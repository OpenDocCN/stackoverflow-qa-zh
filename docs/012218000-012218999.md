# StackOverflow 问答 12218000-12218999

# perl - Perl dbi：fetchrow_array 限制结果：

> ID：12218006
> 
> 赞同：0
> 
> 时间：2012-08-31T15:03:21.580
> 
> 标签：perl, dbi

当我在 mySQL Workbench 中使用相同的请求时，结果计数为 41100。在我的脚本中，计数为 1015。我的代码中没有错误（我使用 die 来查看它）。造成这种差异的原因是什么？

```
# Create the statement 
# select all id in table contacts
$statement = "select distinct contacts.id from $database.contacts"; 

# Prepare and execute the SQL query 
$sqlQuery = $connectGrc->prepare($statement)

# Execute the statement 
$sqlQuery->execute() 

# Make id in array
while($oneId = $sqlQuery->fetchrow_array())
{
    push(@ArrayId,$oneId); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:13:46.617

没有什么明显的错误（除了缺少错误检查并且您的评论不是程序评论）。尝试使用 RaiseError 进行连接，“use strict;”，看看是否存在您可能看不到的问题。此外，如果您想要的只是一列结果数组，并且可以满足数组引用，请考虑 selectcol_arrayref() 为方便起见。

# python - 将鼠标位置写入 QTableWidget

> ID：12218016
> 
> 赞同：0
> 
> 时间：2012-08-31T15:03:51.117
> 
> 标签：python, pyqt, qtablewidget

如何`QTableWidget`在每次单击时将附加鼠标单击坐标写入 a？我已经可以`QMouseEvent`在 a 中显示坐标`QLabelItem`，但我想添加一行，其中包含每次点击的坐标。这可能吗？我知道我需要使用`setItem()`，但如何将它附加到现有的鼠标单击事件？

这是我用于鼠标点击的事件过滤器：

```
 def eventFilter(self, obj, event):
        if obj is self.p1 and event.type() == event.GraphicsSceneMousePress:
            if event.button()==Qt.LeftButton:
                pos=event.scenePos()
                x=((pos.x()*(2.486/96))-1)
                y=(pos.y()*(10.28/512))
                self.label.setText("x=%0.01f,y=%0.01f" %(x,y))
       #here is where I get lost with creating an iterator to append to the table with each click
             for row in range(10):
                for column in range(2):
                    self.coordinates.setItem(row,column,(x,y)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:10:57.340

假设`model=QTableView.model()`，您可以在表中附加一个新行，例如：

```
nbrows = model.rowCount()
model.beginInsertRows(QModelIndex(),nbrows,nbrows)
item = QStandardItem("({0},{1})".format(x,y))
model.insertRow(nbrows, item.index())
model.endInsertRows() 
```

如果您有 a`QTableWidget`而不是 a `QTableView`，则可以使用相同的 MO：

*   追加一个新行`self.insertRow(self.rowCount())`
*   使用该`.setItem`方法修改最后一行的数据。您可以使用 example`QTableWidgetItem("({0},{1})".format(x,y))`或任何您喜欢的字符串来表示您的坐标元组。

但是，我建议您开始使用`QTableView`s 而不是 a `QTableWidget`，因为它提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T18:25:11.983

假设您有一个包含值的两列表`x,y`，并且您希望在每次单击时附加一个新行：

```
def eventFilter(self, obj, event):
    if obj is self.p1 and event.type() == event.GraphicsSceneMousePress:
        if event.button() == Qt.LeftButton:
            pos = event.scenePos()
            x = QtGui.QTableWidgetItem(
                '%0.01f' % ((pos.x() * 2.486 / 96) - 1))
            y = QtGui.QTableWidgetItem(
                '%0.01f' % (pos.y() * 10.28 / 512))
            row = self.coordinates.rowCount()
            self.coordinates.insertRow(row)
            self.coordinates.setItem(row, 0, x)
            self.coordinates.setItem(row, 1, y) 
```

# objective-c - 没有调用iphone应用程序按钮方法

> ID：12218017
> 
> 赞同：0
> 
> 时间：2012-08-31T15:03:51.577
> 
> 标签：objective-c, ios, event-handling, uibutton

我在一个标有“如何搜索”的应用程序中有一个按钮，引用出口是“btnHelpShow”，它的方法“handleHelpShowButton”附加到“Touch up inside”事件。

该应用程序是一个简单的搜索引擎，用于查找车牌价格：

![应用程序的搜索视图](../Images/14f42a78a1d2215d3a56411b5bc1aab3.png)

这是 Interface Builder 中 SearchView.xib 文件的层次结构

![视图层次结构的屏幕截图](../Images/6bd23fcea61f35eeb545dc5fbe5940a5.png)

视图处于 4 个状态：

*   1）等待搜索（如图）
*   2) 显示帮助画面
*   3) 找到的结果
*   4) 没有找到结果

状态 2 和 4 使用单独的 .xib 文件创建一个视图并将其插入到视图堆栈中，然后它们都有一个隐藏视图并再次显示搜索屏幕的按钮。

状态 3 是 SearchView.xib 中的一个子视图（如图），就像我刚刚使用界面生成器将该视图拖到 .xib 中一样。所以它只是将它的隐藏属性设置为 YES/NO

发生状态 3 后，“如何搜索”按钮停止工作，只有在您选择输入字段并输入另一个车牌时才会再次工作。

我已经用作`NSLog(@"pressed")`handleHelpShowButton 的第一行，并且在State3 之后没有被记录，这就像按钮被禁用或者有一个不可见的视图坐在它上面阻止我按下它。

我不知道从哪里看？有很多代码，所以我不想一口气发布所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:10:19.113

也许为状态三创建的子视图与“如何搜索”按钮重叠？在 NSLog 中检查该子视图的框架。

如果这确实是原因，您可以尝试：

```
[self.view bringSubviewToFront:howToSearchButton]; 
```

您可以阅读[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)文档了解更多信息。

# c# - SpecFlow：ClassInitialize 和 TestContext

> ID：12218020
> 
> 赞同：9
> 
> 时间：2012-08-31T15:04:06.247
> 
> 标签：c#, mstest, visual-studio-2012, specflow

首先，我是 SpecFlow 的新手。

我有一个功能文件，我有/想要使用 MSTest 自动运行它作为涉及完全设置的服务器、数据访问的功能测试......为此，我必须使用 SpecFlow 的“给定”中的数据配置服务器块并在之后启动它。我还必须将一些文件复制到测试的输出目录。

在非 SpecFlow 功能测试中，我使用 ClassInitialize 属性从 TestContext 获取 TestDeploymentDir；像这样的东西：

```
[ClassInitialize]
public static void ClassSetup(TestContext context)
{
  TargetDataDeploymentRoot = context.TestDeploymentDir;
} 
```

现在有了 SpecFlow，我不能再使用这个属性了，因为它是由 SpecFlow 本身使用的。确实存在一些新属性，例如*BeforeFeature*，它的作用类似，但它没有将 TestContext 作为参数传递。

在真正启动我的功能测试服务器之前，我只需要访问 TestContext 的 TestDeploymentDir 以便在那里复制一些文件 - 没有 SpecFlow 很容易做到，但使用 SpecFlow 几乎不可能。

如何处理这个问题？

有可能吗？

非常感谢您的建议！

罗伯特

* * *

环境：

*   视觉工作室 2012
*   规范流 1.9.0.77

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-09-14T10:55:29.443

从 SpecFlow 2.2.1 开始，TestContext 可通过上下文注入获得。（[https://github.com/techtalk/SpecFlow/pull/882](https://github.com/techtalk/SpecFlow/pull/882)）

您可以直接从容器中获取它：

`ScenarioContext.Current.ScenarioContainer.Resolve<Microsoft.VisualStudio.TestTools.UnitTesting.TestContext>()`

或通过上下文注入：

```
public class MyStepDefs
{
    private readonly TestContext _testContext;
    public MyStepDefs(TestContext testContext) // use it as ctor parameter
    { 
        _testContext = testContext;
    }

    [BeforeScenario()]
    public void BeforeScenario()
    {
        //now you can access the TestContext
    } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T06:24:14.563

为了能够访问 TestContext 中的值，您必须为您在其中添加 .

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using TechTalk.SpecFlow;

/// <summary>
/// Partial class for TestContext support.
/// </summary>
public partial class DistributionFeature
{
    /// <summary>
    /// Test execution context.
    /// </summary>
    private TestContext testContext;

    /// <summary>
    /// Gets or sets test execution context.
    /// </summary>
    public TestContext TestContext
    {
        get
        {
            return this.testContext;
        }

        set
        {
            this.testContext = value;

            //see https://github.com/techtalk/SpecFlow/issues/96
            this.TestInitialize();
            FeatureContext.Current["TestContext"] = value;
        }
    }
} 
```

然后，您可以使用以下步骤访问部署目录

```
var testContext = (TestContext)FeatureContext.Current["TestContext"];
var deploymentDir = testContext.TestDeploymentDir; 
```

如果您有太多场景，那么您可能必须使用 T4 自动创建此类文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T16:46:55.383

您可以创建插件并自定义 IUnitTestGeneratorProvider 实现。下面应该将这一行添加到 MSTest 的类初始化中。

```
// It's very important this is named Generator.SpecflowPlugin.
namespace MyGenerator.Generator.SpecflowPlugin
{
    public class MyGeneratorProvider : MsTest2010GeneratorProvider
    {
        public MyGeneratorProvider(CodeDomHelper codeDomHelper)
            : base(codeDomHelper)
        {
        }

         public override void SetTestClassInitializeMethod(TestClassGenerationContext generationContext)
        {

            base.SetTestClassInitializeMethod(generationContext);

generationContext.TestClassInitializeMethod.Statements.Add(new CodeSnippetStatement(
                                                                      @"TargetDataDeploymentRoot = context.TestDeploymentDir;"));

        }

     }

[assembly: GeneratorPlugin(typeof(MyGeneratorPlugin))]

    public class MyGeneratorPlugin : IGeneratorPlugin
    {
        public void RegisterDependencies(ObjectContainer container)
        {
        }

        public void RegisterCustomizations(ObjectContainer container, SpecFlowProjectConfiguration generatorConfiguration)
        {
            container.RegisterTypeAs<MyGeneratorProvider, IUnitTestGeneratorProvider>();
        }

        public void RegisterConfigurationDefaults(SpecFlowProjectConfiguration specFlowConfiguration)
        {
        }
    }

} 
```

并在 App.config 文件中引用它：

```
<specFlow>
    <plugins>
      <add name="MyGenerator" type="Generator"/>
    </plugins>
 </specFlow> 
```

下次您重新保存 .feature 文件时，ClassInitialize 中生成的代码应该设置 TargetDataDeploymentDirectory。

我不得不做类似的事情。这是我的工作代码[https://github.com/marksl/Specflow-MsTest](https://github.com/marksl/Specflow-MsTest)和博客文章 [http://codealoc.wordpress.com/2013/09/30/bdding-with-specflow/](http://codealoc.wordpress.com/2013/09/30/bdding-with-specflow/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-02T21:43:28.563

> 有一个 FeatureContext 以及更常用的 ScenarioContext。当然区别在于 FeatureContext 存在于完整功能的执行期间，而 ScenarioContext 仅存在于场景期间。

例如：

添加到上下文：

```
ScenarioContext.Current.Add("ObjectName", myObject); 
```

得到：

```
var myObject = ScenarioContext.Current.Get<object>("ObjectName"); 
```

[你可以在这里](https://github.com/techtalk/SpecFlow/wiki/FeatureContext)阅读更多关于它的信息。

# java - 在java中删除子字符串后跟逗号

> ID：12218025
> 
> 赞同：1
> 
> 时间：2012-08-31T15:04:27.497
> 
> 标签：java, string

我想删除字符串中用逗号分隔的数字：

```
String s= "1000, 2000, 3000, 4000, 1000";
s= s.replace("1000","");
System.out.println(s); 
```

结果是：

```
", 2000, 3000, 4000," 
```

我还想删除前导和尾随逗号，所以预期的结果是：

```
"2000, 3000, 4000" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:07:04.717

我会用

```
String s = "1000, 2000, 3000, 4000, 11000, 1000";
s = s.replaceAll("\b(1000, |, 1000)\b", "");
System.out.println(s); 
```

印刷

```
2000, 3000, 4000, 11000 
```

或者我会使用适当的列表

```
List<Integer> ints = new ArrayList<Integer>(Arrays.asList(
                         1000, 2000, 3000, 4000, 1000, -1000, 11000 ));
while(ints.remove((Integer) 1000));
System.out.println(ints); 
```

印刷

```
[2000, 3000, 4000, -1000, 11000] 
```

如果你真的必须使用字符串，你可以这样做

```
String s = "1000, 2000, 3000, 4000, 1000, -1000, 11000";
List<String> ints = new ArrayList<String>(Arrays.asList(s.split(", ")));
while (ints.remove("1000")) ;
System.out.println(ints); 
```

印刷

```
[2000, 3000, 4000, -1000, 11000] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:19:43.743

```
String s= "1000, 2000, 3000, 4000, 1000";
s= s.replace("1000","");
String[] spl=s.split(',');
String result="";
for(int i=0;i<spl.length;i++)
{ 
  if(spl[i].length()>1)//for space
   result+=spl[i]+",";      
}
result=result.substring(0,result.length()-2);
System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T06:35:23.103

这个问题与 相关`Java`，但如果有人想达到同样的效果，`Javascript`那么它的解决方案是

# 代码

```
var s = "1000, 2000, 3000, 1000, 4000, 11000, 1000";
s = s.replace(/(1000, |, 1000)/g, "");
alert(s); 
```

# 输出

```
2000, 3000, 4000, 11000 
```

# [现场演示](http://jsfiddle.net/bhFxq/1/)

# c# - 命名空间“System.Data”中不存在类型或命名空间名称“OracleClient”

> ID：12218027
> 
> 赞同：5
> 
> 时间：2012-08-31T15:04:30.350
> 
> 标签：c#, reference, oracleclient, system.data, system.data.oracleclient

尝试运行我的代码时，我收到以下错误：

> CS0234：命名空间“System.Data”中不存在类型或命名空间名称“OracleClient”（您是否缺少程序集引用？）

我已包含对`System.Data.dll`and的引用`System.Data.OracleClient.dll`，但我仍然收到此错误。

该错误是由`using System.Data.OracleClient`我的命名空间声明中的行引起的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:18:02.883

该`using System.Data.OracleClient`指令意味着在尝试确定非全名的含义时应考虑该命名空间。

添加引用意味着您添加对给定程序集的引用，在本例中为 System.Data.OracleClient.dll。在 VisualStudio、SharpDevelop 或 MonoDevelop 中，您将在项目资源管理器视图中看到一个引用文件夹。右键单击并“添加引用”（VisualStudio 和 SharpDevelop）或“编辑引用”（MonoDevelop），然后添加 System.Data.OracleClient.dll

如果使用 nant，您需要编辑您的 nant 脚本。

程序集和命名空间重叠，但并不完全相同。引用意味着您可以使用，例如`System.Data.OracleClient.OracleDataReader`，因为项目现在知道代码所在的程序集。`using`指令意味着您只需要 type `OracleDataReader`。程序集和命名空间之间往往存在大量匹配，因为这使每个人的生活都更轻松，但有时程序集具有来自多个命名空间的类，并且命名空间被拆分为多个程序集。一个经典的例子是 mscorlib 有很多来自`System`, `System.Collections`,的类`System.IO`等等，你真的不希望在没有的情况下构建一个 .NET 项目（包括一些 .NET 自己使用的项目），而 System.dll 有更多来自完全相同的命名空间，你可以在不使用的情况下获得（但你仍然会在 99% 的时间里）。

除非您正在编写一个绝对庞大的库，并且有数千个类覆盖重叠的用例，否则您自己的程序集应该使用单个命名空间 - 或者最多一个在该命名空间中包含其他命名空间的单个程序集，例如`JaredksGreatCode`在`JaredksGreatCode.UserInterface`其中包含 -每个 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-09T16:51:14.250

以下对我有用：

Visual Studio --> WEBSITE --> 添加引用... --> 框架 --> **System.Data.OracleClient** [选中此选项]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:15:04.123

我必须添加对 的引用`Oracle.DataAccess.dll`，然后我必须手动将所有引用`OracleClient.blahblah`与 关联`Oracle.DataAccess.Client.blahblah`。

希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-03T11:19:05.343

将引用添加到您的 Web 配置文件中，如下所示。这对我有用。

* * *

```
<!--REFERENCES-->
<compilation debug="true" targetFramework="4.5">
  <assemblies>
    <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.OracleClient, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies>
</compilation> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-31T15:17:13.387

您在`System.Data.OracleClient.dll`.

# c# - 检索存储过程的统计信息，SelectRows 始终为 0

> ID：12218030
> 
> 赞同：1
> 
> 时间：2012-08-31T15:04:40.537
> 
> 标签：c#, sql, sql-server, powershell

我正在尝试收集一些 SQL 查询的统计信息。我正在使用**SqlDbConnection类的****RetrieveStatistics()**方法来获取统计信息，并使用**SqlCommand的****ExecuteReader()**方法来运行查询。 **RetrieveStatistics()**方法返回填充了执行查询的统计信息的字典。当我运行常规查询时，字典的**SelectRows**属性包含查询返回的实际行数。但是当我运行存储过程时，SelectRows 总是为零，尽管 reader 肯定包含行。

 ******我在每个查询之前调用**ResetStatistics()并将****StatisticsEnabled**设置为 true。

这是我的 Powershell 代码：

```
### Stored procedure

$cn = New-Object system.data.sqlclient.sqlconnection
$cn.ConnectionString = "Data Source=localhost;Initial Catalog=XXXX;Integrated Security=SSPI"
$cn.StatisticsEnabled = $true
$cmd = $cn.CreateCommand()
$cmd.CommandText = "[dbo].[spGetXXXX]"
$cmd.CommandType = "StoredProcedure"
$cn.Open()
$cmd.ExecuteReader()
# several rows returned
$cn.RetrieveStatistics()

Name                           Value
----                           -----
BytesReceived                  300
SumResultSets                  1
ExecutionTime                  5
Transactions                   0
BuffersReceived                1
IduRows                        0
ServerRoundtrips               1
PreparedExecs                  0
BytesSent                      132
SelectCount                    1
CursorOpens                    0
ConnectionTime                 51299
Prepares                       0
SelectRows                     0
UnpreparedExecs                1
NetworkServerTime              3
BuffersSent                    1
IduCount                       0

### Regular SQL query
$cn2 = New-Object system.data.sqlclient.sqlconnection
$cn2.ConnectionString = "Data Source=localhost;Initial Catalog=XXXX;Integrated Security=SSPI"
$cn2.StatisticsEnabled = $true
$cmd2 = $cn2.CreateCommand()
$cmd2.CommandText = "SELECT * FROM XXXX"
$cn2.Open()
$cmd2.ExecuteReader()

#rows returned

$cn2.RetrieveStatistics()

Name                           Value
----                           -----
BytesReceived                  12357
SumResultSets                  1
ExecutionTime                  12
Transactions                   0
BuffersReceived                2
IduRows                        0
ServerRoundtrips               1
PreparedExecs                  0
BytesSent                      98
SelectCount                    1
CursorOpens                    0
ConnectionTime                 11407
Prepares                       0
SelectRows                     112
UnpreparedExecs                1
NetworkServerTime              0
BuffersSent                    1
IduCount                       0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:02:36.940

这两个查询的区别在于，在存储过程调用读取器保持打开状态后，行号统计信息不会更新。

所以正确的代码应该是：

```
$connectionn.ResetStatistics()
$reader = $command.ExecuteReader()
$reader.Close() # !
$connection.RetrieveStatistics() 
```******

# javascript - Javascript Regex 选择每个非字母数字字符和空格？

> ID：12218034
> 
> 赞同：0
> 
> 时间：2012-08-31T15:04:59.957
> 
> 标签：javascript

我是 JS 新手，尝试使用 -

```
/[0-9a-z]+$/gi
/[^0-9a-z]+$/gi 
```

都没有工作。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:13:47.823

代替

```
var sentence_split = arr.split(/[0-9a-z]+$/gi); 
```

和

```
var sentence_split = arr.split(/[^0-9a-z]+/gi); 
```

...如果你喜欢这样。

说明：原始正则表达式被锚定（用`$`）到字符串的末尾，并由单词分割 - 而不是分隔它们的符号。

尽管如此，做你所做的事情的方法不止一种：我可能会选择：

```
var words = sentence.match(/(\w+)/g); 
```

...捕获由单词组成的符号序列，而不是通过将它们分开的东西来分割短语。这是一个可以玩的[小提琴。](http://jsfiddle.net/evTZh/1/)

**更新：**最后一件事。我觉得有点……对浪费`sort`只是为了得到`max`本质感到不安。我不知道你是否同意这些想法，我仍然会在这里更新搜索代码：

```
var longest;
words.forEach(function(e) {
  if (! longest || longest.length < e.length) {
    longest = e;
  }
}); 
```

*是的`forEach`，因为我有点懒，想象一下不使用 IE8 是一种奢侈——；`for...`尽管如此，将其重写为常规的数组遍历例程还是很容易的。*

[更新了小提琴](http://jsfiddle.net/evTZh/3/)。

# c++ - 带函数参数的 C++ 函数更优雅

> ID：12218043
> 
> 赞同：0
> 
> 时间：2012-08-31T15:05:20.267
> 
> 标签：c++, class, function, pointers, parameters

我有以下代码：

```
#include <iostream>
using namespace std;

class A
{
    int m_value;
public:
    A(int value)
    {
        m_value = value;
        funcA(&A::param);
    }

    void funcA(void (A::*function)(int))
    {
        (this->*function)(m_value);
    }

    void param(int i)
    {
        cout << "i = " << i << endl;
    }
};

int main()
{
    A ob(10);

    return 0;
} 
```

我有一个类，我在其中调用一个接收另一个函数作为参数的函数。函数调用在 line `funcA(&A::param)`。我想要的是能够将函数作为参数传递而无需指定类范围：`funcA(&param)`. 另外我不想使用`typedef`s 这就是为什么我的代码有点“脏”。

有没有可能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:17:59.137

这有点丑。

您应该考虑做的第一件事是重新编码以使用继承和动态调度。为此，您将 A 类更改为具有 funcA 调用的虚拟方法

```
class A {
...
    void funcA () {
       custom_function(m_value);
    }
protected:
   virtual void custom_function (int)=0;
} 
```

现在，对于您要使用的每个不同的 custom_function，您声明一个从 A 派生的新类，并在其中实现该函数。它将自动从 funcA 调用：

```
class A_print : public A {
public:
    virtual void custom_function (int param) { 
       std::cout << "param was " << param << std::endl;
    }
} 
```

如果这对您来说不够灵活，那么下一个最好的 C++-ish 解决方案是实现一个[仿函数](https://stackoverflow.com/questions/356950/c-functors-and-their-uses)（一个充当函数的对象，甚至可能覆盖`()`运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:19:49.097

这是无法做到的。必须使用类范围（A::function）来标识类中的函数指针

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T15:14:09.347

我不明白为什么你不能这样做：

```
#include <iostream>
using namespace std;

class A
{
    int m_value;
public:
    A(int value)
    {
      param(value);
    }

    void param(int i)
    {
        cout << "i = " << i << endl;
    }
};

int main()
{
    A ob(10);
    return 0;
} 
```

# php - php和javascript都支持的可嵌套模板格式

> ID：12218044
> 
> 赞同：1
> 
> 时间：2012-08-31T15:05:20.693
> 
> 标签：php, javascript, jquery, template-engine

我使用 Mustache 已经有一段时间了，我开始渴望在我的模板中加入一点逻辑。我一直在研究各种模板格式，有点惊讶的是很少有同时支持服务器端和客户端解析的模板格式。

我真的在寻找一种格式： 1\. 一点点逻辑 2\. 可嵌套结构（即可以调用另一个） 3\. 同时具有 PHP 和 JS 解析库

我已经看到[了这个](https://github.com/abackstrom/jquery-tmpl-php)和[这个](https://github.com/xyu/jquery-tmpl-php)，但它们似乎都具有非常低的吸收率，并且没有 100% 支持 jquery tmpl 格式。

有没有人遇到过这样的事情？

# bash - 将（整数，精度）对转换为 bash/bc 中的浮点数

> ID：12218048
> 
> 赞同：1
> 
> 时间：2012-08-31T15:05:37.417
> 
> 标签：bash, shell, bc

我有两个数字，$value 和 $precision。我需要对这些数字进行“浮点”表示（当然输出实际上是一个字符串，因为这是 bash）。

$precision 告诉我这个数字应该有多少个小数点。

例子：

```
 $value=123, $precision=2 
```

这应该给出输出“1.23”。

我怎样才能从 Bash 优雅地做到这一点？我正在查看“bc”手册页，但我并没有真正看到任何方法。我假设最简单的方法是将我的输入值视为字符串并插入 char '.' 以某种方式处于正确的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:12:09.510

在`bc`：

```
bc <<EOF
scale = $precision
$value / (10 ^ $precision)
EOF 
```

在`sed`：

```
sed -e "s/[0-9]\{$precision\}$/.&/" <<< "$value" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:18:11.227

好的，所以我找到了一些对 Bash 的字符串操作帮助......这可以解决问题，但它并不漂亮。在这里张贴给后代。

```
lastIndex=$((${#value}-1))
dotIndex=$((${#value}-$precision))
decvalue=${value:0:$dotIndex}.${value:$dotIndex:$lastIndex} 
```

# ruby-on-rails - 在我的 Mac 上安装 Ruby on rails 失败

> ID：12218050
> 
> 赞同：1
> 
> 时间：2012-08-31T15:06:00.740
> 
> 标签：ruby-on-rails, ruby, terminal

**跑步：**

*   Mac OS X 狮子 10.7.4
*   xCode 版本 4.4.1
*   红宝石 1.8.x
*   酿造
*   虚拟机

我正在尝试在我的 Mac 上的 Rails 上安装 ruby​​（以上是我的规格）。但它并没有真正像以前那样出现。我在网上尝试了几个教程，包括 Stack Overflow。

只要我尝试：

```
$ sudo gem 安装导轨
```

我收到此错误：

```
错误：安装导轨时出错：
错误：无法构建 gem 原生扩展。
```

与 Ruby 1.9.2 相同

**安装红宝石的**编辑错误****

 **```
Peter-Corverss-MacBook-Pro:~ Beer$ rvm install ruby​​-1.9.2-p290
获取 yaml-0.1.4.tar.gz 到 /Users/Beer/.rvm/archives
将 yaml-0.1.4.tar.gz 解压到 /Users/Beer/.rvm/src
在 /Users/Beer/.rvm/src/yaml-0.1.4 中配置 yaml。
运行“./configure --prefix=/Users/Beer/.rvm/usr”时出错，请阅读/Users/Beer/.rvm/log/ruby-1.9.2-p290/yaml/configure.log
在 /Users/Beer/.rvm/src/yaml-0.1.4 中编译 yaml。
运行“make”时出错，请阅读/Users/Beer/.rvm/log/ruby-1.9.2-p290/yaml/make.log
从源代码安装 Ruby 到：/Users/Beer/.rvm/rubies/ruby-1.9.2-p290，这可能需要一段时间，具体取决于您的 CPU...

ruby-1.9.2-p290 - #downloading ruby​​-1.9.2-p290，这可能需要一段时间，具体取决于您的连接...
  % 总计 % 接收 % Xferd 平均速度 时间 时间 时间 当前
                                 下载上传总花费剩余速度
100 8604k 100 8604k 0 0 225k 0 0:00:38 0:00:38 --:--:-- 202k
ruby-1.9.2-p290 - #extracting ruby​​-1.9.2-p290 到 /Users/Beer/.rvm/src/ruby-1.9.2-p290
ruby-1.9.2-p290 - #提取到 /Users/Beer/.rvm/src/ruby-1.9.2-p290
ruby-1.9.2-p290 - #configuring
运行错误'./configure --prefix=/Users/Beer/.rvm/rubies/ruby-1.9.2-p290 --enable-shared --disable-install-doc --with-libyaml --with-opt- dir=/Users/Beer/.rvm/usr'，请阅读/Users/Beer/.rvm/log/ruby-1.9.2-p290/configure.log
运行配置时出现错误。停止安装。

```

上面带有一些颜色的代码（图像）：

![在此处输入图像描述](../Images/ab120dc30daa9041a379368ae27aabcb.png)

这是安装 ruby​​ 的开始，我无法让它工作。

我真的尝试过，但我无法解决问题，希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:34:52.840

是的，如果您在构建 ruby​​ 时遇到问题，您可能需要 Xcode 的命令行实用程序。结帐：http: [//developer.apple.com/library/mac/#recipes/xcode_help-documentation_preferences/DownloadingandInstallingXcodeComponents/DownloadingandInstallingXcodeComponents.html](http://developer.apple.com/library/mac/#recipes/xcode_help-documentation_preferences/DownloadingandInstallingXcodeComponents/DownloadingandInstallingXcodeComponents.html)

它位于带有下载选项卡的首选项窗格中。

安装后，重新打开终端并尝试再次通过 rvm 安装 1.9.2。如果它仍然没有安装，请发表评论，我会看看我是否能解决这个问题。如果确实安装了，请尝试同时安装 rails 和 bundler：

```
rvm use ruby-1.9.2 --default
gem install rails
gem install bundler 
```

第一行会将您切换到 1.9.2，并将其设置为您的默认环境。**

# javascript - 弹出格式化的模态对话框并在用户确认时转发

> ID：12218052
> 
> 赞同：2
> 
> 时间：2012-08-31T15:06:01.750
> 
> 标签：javascript, jquery, html, simplemodal

我需要弹出一个带有警告的模式对话框，等待警告被确认，然后转发到构造的 url。我当前的尝试在窗口中显示对话框并立即转发。

我需要每个链接（示例中的按钮）能够将参数传递给最终 url，因此需要在`onclick`. html 将从 jsp 生成。

请参阅以下演示：

```
<html>
  <head></head>
  <body>
    <div id='container'>
      <input type='button' name='StackOverflow' value='StackOverflow' onClick="Google('StackOverflow')" />
      <br />
      <br />
      <input type='button' name='CodingHorror' value='CodingHorror' onClick="Google('CodingHorror')" />
      <br />
      <br />
    </div>
    <div id="dialog" style="display: none">
      <em>Going to Google</em>
      <hr />
      <ul>
        <li>No guarantee is made that this will work.</li>
        <li>We take no responsibility for the consequences of this action.</li>
      </ul>
    </div>
    <script type='text/javascript' src='js/jquery.js'></script>
    <script type='text/javascript' src='js/jquery.simplemodal.js'></script>
    <script>
    function Google(s) { 
        // Replace this.
        //alert("Going to: "+s); 
        // What to do here to popup a formatted dialog in place of the alert, wait for it to be acknowledged and then proceed with the forward.
        // Doesn't work.
        jQuery("#dialog").modal(); 
        window.location='http://www.google.co.uk?as_q='+s; 
    }
    </script>
  </body>
</html> 
```

您将需要[jQuery](http://docs.jquery.com/Downloading_jQuery)和[simplemodal](https://code.google.com/p/simplemodal/downloads/list)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:22:00.167

破解它！您必须通过`onClose`.

请注意，我将对话框 div 的类设置为，`simplemodal-close`因此单击其中的任何位置都被视为关闭。这是因为这是一个触摸屏驱动的工具。

```
<html>
  <head>
  <style>
    #simplemodal-container {
        background-color:#afafaf; 
        border:solid; 
        padding:12px; 
        cursor:pointer
    }
  </style>
  </head>
  <body>
    <div id='container'>
      <br />
      <br />
      <input type='button' name='StackOverflow' value='StackOverflow' onClick="Google('StackOverflow')" />
      <br />
      <br />
      <input type='button' name='CodingHorror' value='CodingHorror' onClick="Google('CodingHorror')" />
      <br />
      <br />
    </div>
    <div id="dialog" class="simplemodal-close" style="display: none">
      <em>Going to Google</em>
      <hr />
      <ul>
        <li>No guarantee is made that this will work.</li>
        <li>We take no responsibility for the consequences of this action.</li>
      </ul>
    </div>
    <script type='text/javascript' src='js/jquery.js'></script>
    <script type='text/javascript' src='js/jquery.simplemodal.js'></script>
    <script>
    function Google(s) { 
        $.modal($('#dialog'),{
            onClose: function (dialog) {
                window.location='http://www.google.co.uk?as_q='+s;
            }}
        );
    }
    </script>
  </body>
</html> 
```

# c#-4.0 - 在运行时从方法中获取参数值

> ID：12218056
> 
> 赞同：1
> 
> 时间：2012-08-31T15:06:09.383
> 
> 标签：c#-4.0, reflection, methods, parameters, runtime

我有当前的方法示例：

```
public void MethodName(string param1,int param2)
{
    object[] obj = new object[] { (object) param1, (object) param2 };
    //Code to that uses this array to invoke dynamic methods
} 
```

是否有一种动态方式（我猜是使用反射）可以获取当前执行的方法参数值并将它们放在对象数组中？我已经读到您可以使用 MethodBase 和 MethodInfo 获取参数信息，但那些只有关于参数的信息，而不是我需要的它自身的值。

因此，例如，如果我将“test”和 1 作为方法参数传递而没有对特定参数进行编码，我可以获得一个具有两个索引 {“test”，1} 的对象数组吗？

我真的很想不必使用第三方 API，但是如果它有该 API 的源代码，那么我会接受它作为答案，只要它不是一个巨大的 API 并且没有这个就没有简单的方法来做到这一点API。

我相信一定有办法，也许使用堆栈，谁知道呢。你们是专家，这就是我来这里的原因。

提前谢谢你，我迫不及待地想看看这是怎么做到的。

**编辑**

可能不清楚，所以这里有一些额外的信息。这个代码示例就是这样，一个显示我想要的示例。在需要的地方显示实际代码会显得臃肿而庞大，但问题是如何在不手动创建数组的情况下获取数组。我需要一些如何获取值并将它们放在数组中而不编码特定参数的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:37:05.940

使用反射，您可以提取参数名称和元数据，但不能提取实际值：

```
 class Program
    {
        static void Main(string[] args)
        {
            Program p = new Program();
            p.testMethod("abcd", 1);
            Console.ReadLine();
        }

        public void testMethod(string a, int b)
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace();
            StackFrame sf = st.GetFrame(0);
            ParameterInfo[] pis = sf.GetMethod().GetParameters();

            foreach (ParameterInfo pi in pis)
            {
                Console.Out.WriteLine(pi.Name);
            }
        }
    } 
```

# visual-c++ - 从 CStringArray 的元素中获取可修改的 TCHAR*

> ID：12218057
> 
> 赞同：2
> 
> 时间：2012-08-31T15:06:18.583
> 
> 标签：visual-c++, mfc, atl

这是我的尝试和错误：

**代码：**

```
 TCHAR* pszDisplayName_I; //$I .. file
 TCHAR *pDollar = NULL;
 pszDisplayName_I = ((CString)saSursa.GetAt(i)).GetBuffer();  
 pDollar = _tcsrchr(pszDisplayName_I,'$');  
 *(pDollar + 1) = 'I'; 
```

**错误：**

```
 error C2248: 'CObject::CObject' : cannot access private member declared in class 'CObject' C:\Program Files\Microsoft Visual Studio 9.0\VC\atlmfc\include\afxcoll.h 
```

对于 getBuffter 函数，我发现了这个：

*返回指向 CString 对象的内部字符缓冲区的指针。返回的 LPTSTR 不是 const，因此允许直接修改 CString 内容。* 所以没关系。但是对于 getAt(0) 函数，它是这样说的：

```
CObject* GetAt(
 INT_PTR nIndex 
) const; 
```

就是这样，**const 的事情**，有没有办法解决这个问题？一种我可以从 CStringArray 中获取可修改 CString 元素的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:17:58.873

我刚刚编译成功。而不是使用 GetAt() 我使用了 [] 运算符。

```
CStringArray saTest;
saTest.Add(_T("Test"));
TCHAR* pTest = saTest[0].GetBuffer();
saTest[0].ReleaseBuffer(); 
```

# objective-c - UIViewController 在被 nilled 后保持状态

> ID：12218065
> 
> 赞同：0
> 
> 时间：2012-08-31T15:06:59.130
> 
> 标签：objective-c, cocoa, uiviewcontroller, automatic-ref-counting

在我的应用程序中，我创建了一个`BookViewController`显示书籍页面并为其设置动画的`MainMenuViewController`类，以及一个显示用户可以阅读的一组书籍的类。

在后一类中，当用户点击其中一本书时，会调用一个函数，该函数应该创建一个全新的 实例`BookViewController`，但由于某种原因，该实例保持其状态（即它从用户离开的页面恢复）。

如果我将它设置为 nil，怎么会这样？我在这里想念什么？（请注意，我使用的是 ARC）。

**MainMenuViewController.m**

```
@interface MainMenuViewController ()
@property (strong) BookViewController *bookViewController;
@end

@implementation MainMenuViewController
@synthesize bookViewController;

-(void)bookTapped:(UIButton *)sender{

    NSString *bookTitle;

    if(sender == book1button) bookTitle = @"book1";
    else if(sender == book2button) bookTitle = @"book2";

    bookViewController = nil;

    bookViewController = [[BookViewController alloc] initWithBookTitle:bookTitle];
    [self presentViewController:bookViewController animated:YES completion:nil];

} 
```

**BookViewController.h**

```
@interface BookViewController : UIViewController
-(id)initWithBookTitle:(NSString *)bookTitle;
@end 
```

**BookViewController.m**

```
@implementation BookViewController
-(id)initWithBookTitle:(NSString *)theBookTitle{
    self = [super init];
    if(self){
        bookTitle = [NSString stringWithFormat:@"%@", theBookTitle];
        [self setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        NSLog(@"init a BookViewController with bookTitle: %@", bookTitle);
    }
    return self;
} 
```

**编辑1：** 每次点击一本书时，`bookTapped:`都会调用它，并且控制台总是会打印：

`2012-08-31 16:29:51.750 AppName[25713:c07] init a BookViewController with bookTitle: book1`

因此，如果正在创建一个新实例，`BookViewController`它怎么会返回旧实例呢？

**编辑2：** 我 `NSLog(@"bookViewController %@",bookViewController);` 在该行之前插入`[self presentViewController:bookViewController`。控制台输出为：

```
2012-08-31 16:37:41.426 Henry[25784:c07] bookViewController <BookViewController: 0x6a21540>
2012-08-31 16:38:23.321 Henry[25784:c07] bookViewController <BookViewController: 0xe425540>
2012-08-31 16:38:53.393 Henry[25784:c07] bookViewController <BookViewController: 0x6839330> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:31:29.427

您的变量在类的 @implementation 之外声明（您正在声明全局变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:22:29.513

我怀疑您使用的是 ivars 而不是属性。请替换`bookViewController`为`self.bookViewController`.

尝试：

```
if(self){
        self.bookTitle 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:17:08.127

在新实例中保持其状态的变量是这样声明的：

```
#import "BookViewController.h"

int currentPage = 0;

@implementation BookViewController

-(id)initWithBookTitle:(NSString *)theBookTitle{
... 
```

所以我设法通过初始化 init 方法中的变量来解决这个问题：

```
-(id)initWithBookTitle:(NSString *)theBookTitle{
    self = [super init];
    if(self){
        currentPage = 0; //added this line
        bookTitle = [NSString stringWithFormat:@"%@", theBookTitle];
        [self setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

         NSLog(@"init a BookViewController with bookTitle: %@", bookTitle);
    }
    return self;
} 
```

但这并不能解决根本问题，即这样做：

```
bookViewController = [[BookViewController alloc] initWithBookTitle:bookTitle];
[self presentViewController:bookViewController animated:YES completion:nil]; 
```

仍然显示一个具有旧值的 bookViewController `currentPage`！这可能是因为我没有将其声明为属性，也没有在`init`方法中对其进行初始化......有什么想法吗？

# clearcase - 如何在明确的情况下删除目录的标签及其所有内容？

> ID：12218068
> 
> 赞同：5
> 
> 时间：2012-08-31T15:07:09.093
> 
> 标签：clearcase, configuration-management

我已经在明确的情况下递归地将标签应用于目录。我怎样才能删除所有这些标签？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T15:35:01.347

最简单的方法是在命令行中，使用[`cleartool rmlabel`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_rmlabel.htm)

```
 cleartool rmlabel -rec YOUR_LABEL yourDirectory 
```

注意：这仅适用于 ClearCase V7.1+，不适用于 CC7.0.x 或 CCV6.x，不适用于 CCRC（ClearCase 远程客户端）

对于较旧的 ClearCase 版本，您必须这样做（参见[技术说明 swg21126736](http://www-01.ibm.com/support/docview.wss?rs=727&uid=swg21126736)）：

```
# Unix syntax
cleartool find yourDirectory -version "lbtype(YOUR_LABEL)" -exec 'cleartool rmlabel YOUR_LABEL"$CLEARCASE_XPN"'

# Windows syntax
cleartool find yourDirectory -version "lbtype(YOUR_LABEL)" -exec "cleartool rmlabel YOUR_LABEL\"%CLEARCASE_XPN%\"" 
```

* * *

注意：您*可以*使用 GUI 删除标签，但如[技术说明 swg21146450](http://www-01.ibm.com/support/docview.wss?uid=swg21146450)中所述，这只是逐个文件的操作！

![带标签的版本树](../Images/1d7b1cad31a26de8f4aebae24eb22873.png) ![移除标签](../Images/cecb3e772f63748dd453dd017aefe7b2.png)

（如果你有数百个元素——文件和目录——要处理，那就不太实用了……）

# javascript - AJAX 之前的 Dojo 回调

> ID：12218069
> 
> 赞同：5
> 
> 时间：2012-08-31T15:07:09.903
> 
> 标签：javascript, jquery, ajax, dojo, callback

Dojo [xhrPost](http://dojotoolkit.org/reference-guide/1.8/dojo/xhrPost.html) / [xhrGet是否具有与 jQuery](https://dojotoolkit.org/reference-guide/1.8/dojo/xhrGet.html) [beforeSend](http://api.jquery.com/jQuery.ajax/)等效的回调函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:44:20.927

您可以使用`dojo/aspect`.

```
aspect.before(dojo, "xhrGet", function(args){
    args.url = 'index.html?TEST';
    return [args];
});

var btn = new Button({label: 'xhr'}, 'btn');
on(btn, 'click', function(evt){
    var xhrArgs = {
        url: "index.html",
        handleAs: "text",
        load: function(data){ console.debug(data); },
        error: function(error){ console.error(error);}
    }
    dojo.xhrGet(xhrArgs);
}); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/aspect.html](http://dojotoolkit.org/reference-guide/1.7/dojo/aspect.html)

# ios - iOS 报亭：推送通知不会在后台启动应用程序

> ID：12218073
> 
> 赞同：4
> 
> 时间：2012-08-31T15:07:27.383
> 
> 标签：ios, push-notification, newsstand-kit

我正在应用程序中实现报亭功能，虽然应用程序收到推送通知，但它并没有在后台模式下启动。
如果我点击通知警报，应用程序将启动，我可以看到字典中存在“内容可用”：1，并且问题已下载，但应用程序不会自动启动。

我已添加到 plist：

```
<key>UIBackgroundModes</key>
<array>
    <string>newsstand-content</string>
</array> 
```

和 didFinishLaunchingWithOptions：

```
[[NSUserDefaults standardUserDefaults]setBool: YES forKey:@"NKDontThrottleNewsstandContentNotifications"]; // for testing purposes
    [[NSUserDefaults standardUserDefaults] synchronize];

[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeNewsstandContentAvailability )]; 
```

我还看到我的应用程序未显示在“设置”->“商店”->“自动下载”下（其他杂志出现在那里）。

我错过了什么吗？这应该在沙盒环境中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:42:00.823

一些说明

1.  如果您没有在仅包含 content-available:1 的报亭负载中发送“警报”，则通知中心不会添加任何内容。
2.  报亭通知启动应用程序并不意味着该应用程序将进入前台（就像用户点击应用程序图标一样）。这只是意味着如果应用程序不在后台，它将由 iOS 在后台启动 -> 调用 appDelegate 的 didFinishLaunchingWithOptions，应用程序应检查它是否是报刊亭通知，以通过在报刊亭队列中添加资产来安排下载。资产路径可以是 NS 有效负载的一部分（提供 < 有效负载限制 256 字节）

NSDictionary *payload = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

if(payload && [[payload objectForKey:kContentAvailablePush] caseInsensitiveCompare:@"1"] == NSOrderedSame) { NSLog(@"由于 NS 通知而启动"); }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:03:21.080

您必须注册报亭通知才能显示在“设置”中并接收“报亭通知”。要注册，请将其添加到您的`application:didFinishLaunchingWithOptions:`：

```
// Add registration for newsstand notifications
// In your application:didFinishLaunchingWithOptions:

[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
  UIRemoteNotificationTypeNewsstandContentAvailability]; 
```

用户将被要求接受或不接受后台下载。

看看这个关于报亭应用程序的完整教程：http: [//www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:58:33.693

`{"aps": {"badge": 1, "alert": "test","content-available":1}}`这是一个正确的有效载荷。 `{"aps": {"badge": 1, "alert": "test"},"content-available":1}`这是一个错误的有效载荷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:15:20.657

确保在您的 plist 中设置了 UINewsstandApp = YES

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-09T09:53:38.700

当内容可用在有效负载中时会发生这种情况：

*   如果应用程序被暂停，系统会将其带入后台
*   如果应用程序被用户**杀死**，则**不会发生任何事情**并且应用程序仍处于未运行状态

必须有一个用户操作来启动应用程序，本质上是通过将警报消息添加到推送通知中。

**资源**

[http://samwize.com/2015/08/07/how-to-handle-remote-notification-with-background-mode-enabled/](http://samwize.com/2015/08/07/how-to-handle-remote-notification-with-background-mode-enabled/)

但是，这并不能解决您的问题。作为解决方法，您可以使用后台获取，它每隔一定的时间间隔唤醒应用程序。

# android - 安卓位置监听器

> ID：12218075
> 
> 赞同：3
> 
> 时间：2012-08-31T15:07:38.240
> 
> 标签：android, gps, location, android-loadermanager

我想从同一个监听器和实现中同时收听 GPS 和 NETWORK 位置提供程序

这样做可以吗：

```
 locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,metersToUpdate,this);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,0,metersToUpdate,this); 
```

它会为两个提供者使用相同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:20:40.260

谷歌[在这里](http://developer.android.com/guide/topics/location/strategies.html)说：

> 您还可以通过调用 requestLocationUpdates() 两次从 GPS 和网络位置提供程序请求位置更新——一次用于 NETWORK_PROVIDER，一次用于 GPS_PROVIDER。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:23:48.703

就像 1.2.3 一样简单，看看我的例子......

```
try {
            Criteria criteria = new Criteria();
            mLocationManagerHelper.SetLocationManager((LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE));
            mLocationManagerHelper.GetLocationManager().requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, mLocationManagerHelper.GetLocationListener());

            String provider = mLocationManagerHelper.GetLocationManager().getBestProvider(criteria, false);
            Location location = mLocationManagerHelper.GetLocationManager().getLastKnownLocation(provider);

            if (location != null) {
                mLongitude = location.getLongitude();
                mLatitude = location.getLatitude();
            }
        } catch (Exception ex) {
            Log.e(TAG, "GPS", ex);
        } 
```

定位助手

```
public class LocationManagerHelper {
private static final String TAG = LocationManagerHelper.class.getSimpleName();
private Context mContext;

private LocationManager mLocationManager;
private GeoUpdateHandler mLocationListener = new GeoUpdateHandler();

public LocationManagerHelper(Context context) {
    this.mContext = context;
}

public GeoUpdateHandler GetLocationListener() {
    return mLocationListener;
}

public void SetLocationManager(LocationManager locationManager) {
    mLocationManager = locationManager;
}

public LocationManager GetLocationManager() {
    return mLocationManager;
}

public void Stop() {
    if (mLocationManager != null) {
        mLocationManager.removeUpdates(mLocationListener);
    }
}

private class GeoUpdateHandler implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {
        String longitude = "Longitude: " + loc.getLongitude();
        Log.v(TAG, longitude);
        String latitude = "Latitude: " + loc.getLatitude();
        Log.v(TAG, latitude);
    }

    @Override
    public void onStatusChanged(String s, int i, Bundle bundle) {

    }

    @Override
    public void onProviderEnabled(String s) {
    }

    @Override
    public void onProviderDisabled(String s) {
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T20:40:59.210

谷歌提供了一个更好的 API，使用融合位置 API：

[https://developers.google.com/location-context/fused-location-provider/](https://developers.google.com/location-context/fused-location-provider/)

[https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient](https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient)

[https://developer.android.com/training/location/receive-location-updates](https://developer.android.com/training/location/receive-location-updates)

[https://github.com/sakurabird/Android-Fused-location-provider-example](https://github.com/sakurabird/Android-Fused-location-provider-example)

[https://youtu.be/eHjHlujp3Tg?list=WL&t=2129](https://youtu.be/eHjHlujp3Tg?list=WL&t=2129)

# c - ARM 交叉编译 GLib 2.33.10，链接器错误

> ID：12218076
> 
> 赞同：4
> 
> 时间：2012-08-31T15:07:42.847
> 
> 标签：c, linux, arm, cross-compiling, glib

我是新手，我正在研究 Raspberry Pi。我对 GLIB 2.33.10 交叉编译有疑问。我已经从站点和所有依赖项（zlib、ffi）下载了源代码；已经为 ARM 构建了依赖项（在 Raspberry 上测试）。我目前正在使用 arm-bcm2708hardfp-linux-gnueabi 工具链。

我的配置命令行如下：

```
$ ZLIB_CFLAGS=-I/home/myuser/cross_lib/include/libzlib \
ZLIB_LIBS="-L/home/myuser/cross_lib/lib/libzlib/raspberry -lz" \
LDFLAGS="-L/home/myuser/cross_lib/libffi/lib -lffi -L/home/myuser/cross_lib/lib/libzlib/raspberry -lz" 
LIBFFI_CFLAGS=-I/home/myuser/cross_lib/libffi/lib/libffi-3.0.11/include \
LIBFFI_LIBS="-L/home/myuser/cross_lib/libffi/lib -lffi" \
./configure --host=arm-bcm2708hardfp-linux-gnueabi glib_cv_stack_grows=yes \
glib_cv_uscore=yes ac_cv_func_posix_getpwuid_r=no \
ac_cv_func_posix_getgrgid_r=no --with-libiconv=no --without-pcre \
--enable-gtk-doc-html=no --enable-xattr=no --prefix=/home/cross_lib/glib23 
```

如您所见，我已禁用 iconv 和 pcre （这只是一个测试版本）；配置脚本没问题（似乎没问题...）。在开始构建过程时，它会持续一段时间（编译大量代码）然后卡在链接阶段：

```
/opt/tools/arm-bcm2708/arm-bcm2708hardfp-linux-gnueabi/bin/../lib/gcc/arm-bcm2708hardfp-linux gnueabi/4.7.1/../../../../arm-bcm2708hardfp-linux-gnueabi/bin/ld: warning: libgthread-2.0.so.0, needed by ../gobject/.libs/libgobject-2.0.so, not found (try using -rpath or -rpath-link)
/opt/tools/arm-bcm2708/arm-bcm2708hardfp-linux-gnueabi/bin/../lib/gcc/arm-bcm2708hardfp-linux-gnueabi/4.7.1/../../../../arm-bcm2708hardfp-linux-gnueabi/bin/ld: warning: libgmodule-2.0.so.0, needed by ./.libs/libgio-2.0.so, not found (try using -rpath or -rpath-link)
./.libs/libgio-2.0.so: undefined reference to `g_module_close'
./.libs/libgio-2.0.so: undefined reference to `g_module_symbol'
./.libs/libgio-2.0.so: undefined reference to `g_module_supported'
./.libs/libgio-2.0.so: undefined reference to `g_module_open'
./.libs/libgio-2.0.so: undefined reference to `g_module_error'
collect2: error: ld returned 1 exit status
make[4]: *** [glib-compile-resources] Errore 1
make[4]: uscita dalla directory "/home/myuser/cross_lib/source/glib-2.33.10/gio"
make[3]: *** [all-recursive] Errore 1
make[3]: uscita dalla directory "/home/myuser/cross_lib/source/glib-2.33.10/gio"
make[2]: *** [all] Errore 2
make[2]: uscita dalla directory "/home/myuser/cross_lib/source/glib-2.33.10/gio"
make[1]: *** [all-recursive] Errore 1
make[1]: uscita dalla directory "/home/myuser/cross_lib/source/glib-2.33.10"
make: *** [all] Errore 2 
```

对我来说，这似乎是一个奇怪的错误，它找不到自己的库……但我不是专家……有人可以帮助我吗？谢谢你的建议，原谅我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-20T10:34:57.710

只需`-lgmodule-2.0`在最后添加 LDFLAGS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T20:08:17.783

这对我使用 glib 2.36.4 有效：

```
$ make LDFLAGS="-rpath $PWD/gmodule/.libs"
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T15:57:00.283

基于 Anon 的回答，这是我的 DOckerfile 中的部分。诀窍是制造，让它失败，然后用标志再次制造：

```
RUN printf "glib_cv_stack_grows=no\nglib_cv_uscore=no\n" > mips.cache
RUN ZLIB_CFLAGS="-I${PREFIX}/include" \
    ZLIB_LIBS="-L${PREFIX}/lib/ -lz" \
    LIBFFI_CFLAGS="-I${PREFIX}/include/" \
    LIBFFI_LIBS="-L${PREFIX}/lib/ -lffi" \
    LD_LIBRARY_PATH="$PWD/gmodule/.libs -lgmodule-2.0" \
    LD=mips-linux-gnu-ld \
    AR=mips-linux-gnu-ar \
    ./autogen.sh --host=mips-linux-gnu --prefix=$PREFIX \
    --disable-man --disable-libmount --disable-largefile --disable-fam \
    --disable-xattr --disable-libelf --with-pcre=internal --disable-static \
    --cache-file=mips.cache
RUN make -j 8; exit 0 && \
    make LDFLAGS="-rpath $PWD/gmodule/.libs" -j 8 && \
    make install 
```

# wpf - 使用 xaml 在二次贝塞尔线段上绘制箭头末端

> ID：12218077
> 
> 赞同：6
> 
> 时间：2012-08-31T15:07:50.630
> 
> 标签：wpf, xaml

[在QuadraticBezierSegment](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCQQFjAA&url=http://msdn.microsoft.com/en-us/library/system.windows.media.quadraticbeziersegment.aspx&ei=lNFAUIUzganiBKX8gbgL&usg=AFQjCNEwXFkQeUxJV_seioCNV7Y5YTvhqg)末尾绘制箭头的最简单方法是什么？棘手的部分是获得正确的旋转以匹配传入的线段。

关于如何解决这个问题的任何想法？我应该扩展[PathSegment](http://msdn.microsoft.com/en-us/library/system.windows.media.pathsegment.aspx)吗？

![末端带箭头的贝塞尔线段](../Images/0462f562204c7a260f20e58ad9849746.png)

我有这个来画一条简单的贝塞尔线。

```
<Path Stroke="Black" StrokeThickness="1">
  <Path.Data>
    <PathGeometry>
      <PathGeometry.Figures>
        <PathFigureCollection>
          <PathFigure StartPoint="100,430">
            <PathFigure.Segments>
              <PathSegmentCollection>
                <QuadraticBezierSegment Point1="150,250" Point2="250,300" />
              </PathSegmentCollection>
            </PathFigure.Segments>
          </PathFigure>
        </PathFigureCollection>
      </PathGeometry.Figures>
    </PathGeometry>
  </Path.Data>
</Path> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:32:09.553

您可以定义箭头的几何形状……但要在贝塞尔曲线的末端正确定位它需要反复试验。

相反，您可以使用此控件并使用几何定义所需的收头，并将其正确放置在“线”的末端。

*   [http://blogs.msdn.com/b/mrochon/archive/2011/01/10/custom-line-caps-in-wpf.aspx](http://blogs.msdn.com/b/mrochon/archive/2011/01/10/custom-line-caps-in-wpf.aspx)

    ```
    <loc:CappedLine Stroke="Red" StrokeThickness="1" Canvas.Left="40" Canvas.Top="200" RenderTransformOrigin="0.5,0.5" Height="107" Width="195">
        <loc:CappedLine.EndCap>
            <GeometryGroup>
                <LineGeometry StartPoint="0,0" EndPoint="10,10"/>
                <LineGeometry StartPoint="0,0" EndPoint="10,-10"/>
            </GeometryGroup>
        </loc:CappedLine.EndCap>
        <loc:CappedLine.LinePath>
            <PathGeometry Figures="M0,0 C1,1 10.5,75.5 48.5,66.5 86.5,57.5 5,3.5000146 105.5,16.500091 157.5,29.500166 164.5,87.500505 164.5,87.500505" />
        </loc:CappedLine.LinePath>
    </loc:CappedLine>

    <loc:CappedLine Stroke="Red" StrokeThickness="1" Canvas.Left="180" Canvas.Top="200" RenderTransformOrigin="0.5,0.5" Height="107" Width="195">
        <loc:CappedLine.EndCap>
            <GeometryGroup>
                <LineGeometry StartPoint="0,0" EndPoint="10,10"/>
                <LineGeometry StartPoint="0,0" EndPoint="10,-10"/>
            </GeometryGroup>
        </loc:CappedLine.EndCap>
        <loc:CappedLine.LinePath>
            <PathGeometry Figures="M0,0 C1,1 10.5,75.5 48.5,66.5 86.5,57.5 5,3.5000146 105.5,16.500091" />
        </loc:CappedLine.LinePath>
    </loc:CappedLine> 
    ```

![在此处输入图像描述](../Images/6d764ac75949cdbf0add240e4dee49c0.png)

# jsp - 会话跟踪？

> ID：12218078
> 
> 赞同：0
> 
> 时间：2012-08-31T15:08:03.780
> 
> 标签：jsp, servlets

我是 java servlet 的新手，实际上处于学习阶段。我在将我的 JSP 页面字段值发送到另一个页面时遇到困难，这在会话维护方面简而言之面临问题。请帮助我在整个会话中获取值通过使用简单的建设性示例给出一些想法来很好地理解会话的使用..

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:09:03.160

以下是演示会话跟踪机制的 JSP。尝试在浏览器中启用和不启用 cookie 的情况下单击页面上的链接。您应该能够通过使用 cookie 或对 URL 进行编码来维持会话。在 Chrome 中禁用会话 cookie 很容易。

```
<%
  String servletPath = request.getServletPath();
  String contextPath = request.getContextPath();
  String path = contextPath + servletPath;
  String encoded = response.encodeURL(path);
  Integer count = (Integer)session.getAttribute("count");
  if(count==null)count = new Integer(0);
  session.setAttribute("count",new Integer(count.intValue() + 1));
%>
sessionId=<%=session.getId()%><br/>
isNew=<%=session.isNew()%><br/>
fromURL=<%=request.isRequestedSessionIdFromURL()%><br/>
fromCookie=<%=request.isRequestedSessionIdFromCookie()%><br/>
path=<%=path%><br/>
encoded=<%=encoded%><br/>
<a href="<%=path%>">Not encoded request</a><br/>
<a href="<%=encoded%>">Encoded request</a><br/>
count=<%=count%> 
```

上面的页面适用于任何 JSP 容器。如果你使用一个新的（我用 Apache Tomcat/7.0.28 测试过），那么你可以使用下面的页面。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:set var="count" value="${count + 1}" scope="session" />
<c:set var="relativePath" value="${fn:substringAfter(pageContext.request.servletPath, '/')}" />
The session id is ${pageContext.session.id}<br/>
Is the session new ? ${pageContext.session['new']}<br/>
Did the client send the session id in the URL ?   ${pageContext.request.requestedSessionIdFromURL}<br/>
Did the client send the session id in a cookie ?   ${pageContext.request.requestedSessionIdFromCookie}<br/>
<a href="${relativePath}">Not encoded request</a><br/>
<a href="${pageContext.response.encodeURL(relativePath)}">Encoded request</a><br/>
Count is ${count} 
```

# tsql - 如何在 T-SQL 中将带有文件流的 varbinary(max) 转换为实际的 varbinary(max)

> ID：12218079
> 
> 赞同：4
> 
> 时间：2012-08-31T15:08:03.523
> 
> 标签：tsql, blob, filestream

我有一个数据库，它被设置为对 varbinary(max) 字段上的音频文件使用 blob FileStream。它的大小已经增长到 80GB 以上，我正面临性能问题。

环顾四周后，我发现我的平均 blob 大小约为 180k。由于根据[MSDN](http://msdn.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)文件流应该用于超过 1MB 的对象，我正在重新评估如何存储这些 blob。MSDN 还指出，“对于较小的对象，将 varbinary(max) BLOB 存储在数据库中通常会提供更好的流式传输性能。” 所以我正在考虑从带有文件流的 varbinary(max) 转移到只使用 varbinary(max) 字段。

所以我的问题是，有没有一种很好的方法使用 sql 脚本将每个文件流 blob 从文件流移动到实际的 varbinary 字段本身？在决定询问之前我一直在研究的替代方法是让 ac# app 查询数据库中的 blob 并将每个 blob 写入文件系统。然后手动从数据库中删除文件流内容。然后让 c# 应用程序从文件系统读取 blob 并写回数据库。我想必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T16:41:46.403

假设您的源表如下所示：

```
CREATE TABLE audioFiles
(
    AudioID INT IDENTITY NOT NULL PRIMARY KEY,
    [Name] VARCHAR(50) NOT NULL,
    [AudioData] VARBINARY(MAX) FILESTREAM NULL,
    RowGuid UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL UNIQUE DEFAULT(NEWID())
) 
```

然后你可以创建第二个表：

```
CREATE TABLE audioBlobs
(
    AudioID INT IDENTITY NOT NULL PRIMARY KEY,
    [Name] VARCHAR(50) NOT NULL,
    [AudioData] VARBINARY(MAX) NULL,
    RowGuid UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL UNIQUE DEFAULT(NEWID())
)
GO 
```

（请注意，`AudioData`第二个表中的列中缺少 FILESTREAM ......导致二进制数据与记录的其余部分一起存储在页面上，而不是在单独的 FILESTREAM 文件组中。）

然后您可以将数据从一个表插入到另一个表中：

```
SET IDENTITY_INSERT audioBlobs ON

INSERT INTO audioBlobs (AudioID, Name, AudioData, RowGuid)
    SELECT AudioID, Name, AudioData, RowGuid FROM audioFiles

SET IDENTITY_INSERT audioBlobs OFF 
```

完成后，您可以删除原始表，并将新表重命名为原始表的名称：

```
DROP TABLE audioFiles
GO

EXECUTE sp_rename N'dbo.audioBlobs', N'audioFiles', 'OBJECT' 
GO 
```

`VARBINARY(MAX)`或者，您可以在原始表中的列旁边创建第二列`FILESTREAM`，并使用旧列的数据更新新列的值。请注意，无论采用哪种方式，您的总磁盘空间使用量都会增加一倍以上——实际音频数据的空间增加一倍，将其从 FILESTREAM 文件组迁移到 PRIMARY 文件组（或主数据文件所在的任何位置），再加上您的事务日志中有很多空间。

# c# - 后台工作人员完成后，我想更改表单上的标签。我应该在哪里添加此代码？

> ID：12218086
> 
> 赞同：1
> 
> 时间：2012-08-31T15:08:40.003
> 
> 标签：c#, backgroundworker

后台工作人员完成其进程后，我想更改表单上某些标签上的文本。

这是触发 backgroundworker 的 Button：

```
private void btnProcessImages_Click(object sender, EventArgs e)
        {
            DialogResult processImagesWarnMsg = MessageBox.Show("You're about to process images, are you sure?", "Warning!", MessageBoxButtons.YesNo, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button2);

            if (processImagesWarnMsg == DialogResult.Yes)
            {
                DisableAllButtons();

                if (!processImagesWorker.IsBusy)
                {
                    processImagesWorker.RunWorkerAsync();
                }
                //The problem here is that the below will run BEFORE the worker is complete. Where should I place the below method in my code? 
                //ResetDirectoryStatistics();
            }
        } 
```

这是更改表单上标签文本的方法：

```
private void ResetDirectoryStatistics()
        {
            lblSelectedDirectory.Text = "N/A";
            lblTotalNumberOfFilesInDirectory.Text = "N/A";
            lblTotalNumberOfSupportedFilesInDirectory.Text = "N/A";
            lblTotalNumberOfUnsupportedFilesInDirectory.Text = "N/A";
            lblTotalNumberOfPoliciesInDirectory.Text = "N/A";
        } 
```

与后台工作人员打交道时，我应该在哪里放置 ResetDirectoryStatistics 方法？我不能将它放在后台工作者的“DoWork”方法中，因为那将是跨线程的。如果我将方法放在 processImagesWorker.RunWorkerAsync(); 之后，它会在 RunWorker 完成之前自行执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:10:15.960

`RunWorkerCompleted`您应该在后台工作人员的情况下调用您的方法。此事件使用 UI 线程，因此无需担心跨线程问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:10:07.553

您只需要将所有代码`RunWorkerCompleted`放在`BackgroundWorker`.

它甚至会确保事件在 UI 线程中运行，因此您无需担心调用或类似的事情。

# c++ - 如何在 perforce 和 VMS 上为 C++ 进行代码审查/调试/编码/测试/版本控制

> ID：12218088
> 
> 赞同：1
> 
> 时间：2012-08-31T15:08:45.167
> 
> 标签：c++, python, linux, perforce, vms

我正在 VMS 上使用 perforce（一个版本控制工具）进行 C++ 编程。

我需要在 VMS 上处理数十个甚至数百个 C++ 文件（由 perforce 管理）。

我熟悉 Linux、python，但不熟悉 VMS 上的 DCL（一种脚本语言）。

我需要找到一种方法让编程/调试/代码审查尽可能简单。

我更喜欢在 VMS 上使用 python 和 kscope（基于 kde 的文件搜索/代码审查 GUI 工具，可以生成调用图）或类似工具。

我没有 sys-adm 授权，所以我更喜欢一些无需授权即可安装的代码审查 GUI 工具。

你能给我一些关于如何在 VMS 上通过 python 进行代码审查/调试/编程/编译/测试同时使用 kscope 或类似的大型文件管理工具进行代码审查的建议吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:23:01.883

您的问题非常广泛，因此很难给出具体的答案。

听起来您有很大的目标，这很好，但是由于您在 VMS 上，您将没有大量工具可供您使用。kscope 不太可能在 VMS 上工作。如我错了请纠正我。我相信 python 的半新版本在那里可以正常工作。

我建议从基础开始。获得一个基本的构建系统，让您在发布和调试中构建。考虑从 MMS（HP 提供的类似 make 的工具）或 GNU make 开始。您还应该花一些时间确保您的基于 VMS 的 Perforce 客户端也可以正常工作。Perforce 的好人可能会或可能不会修复一些怪癖。

如果您在设置 GNU make（在 VMS 上）或在 VMS 上处理 Perforce 客户端时遇到更具体的问题，请询问，但我建议为这些问题创建单独的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:00:47.640

实际上，从您的问题中不清楚您想在 VMS 上进行哪种编程：C++ 还是 python？

假设您的第一个目标是熟悉代码库，即您希望轻松交叉引用源代码：

*   **如果您在 VMS 上运行 Perforce 服务器，那么您可以尝试使用Linux Perforce 客户端**直接连接到它。并在 Linux 上进行本地“审查”。

*   如果您**没有 Linux 客户端**，我会尝试获取最新版本并将其导入到外部存储库（svn、git、fossil 等）中的原始文件。然后再次使用 Linux 客户端和工具。

如果您的最终目标是在 VMS 之外进行所有开发，那么它可能并不可行——代码可能使用 VMS 特定的包含、系统/RMS 调用、数据结构。并且将更改来回同步到 VMS*会*变得混乱。

根据我的经验，一旦您熟悉了代码库，使用任何可用的编辑器（EDIT/TPU、EDT、LSE、emacs 或 vim 端口等）直接在 VMS 上进行代码更改会更有效。 .

至于调试 - VMS 原生调试器支持 X-GUI 和命令行。检查您的构建系统以进行调试构建，或使用`/NOOPT /DEBUG`编译和`/DEBUG`链接限定符。

顺便说一句，如果安装在您的 VMS 系统上，请查看 DECset。

# gnu-screen - 对屏幕中的所有窗口执行命令

> ID：12218091
> 
> 赞同：1
> 
> 时间：2012-08-31T15:09:04.793
> 
> 标签：gnu-screen

我使用屏幕，有时我会更改我的 .bashrc 配置文件。因此，我想对所有屏幕窗口应用 .bashrc 更改。不幸的是，屏幕读取配置文件仅用于创建新窗口，并且不会为现有窗口重新加载 .bashrc。

我的屏幕会话有一个或多个窗口。在附加屏幕之前，我想为每个窗口执行命令。该命令很简单“source ~/.bashrc”。

我尝试：

```
screen -X stuff "source ~/.bashrc"`echo -ne '\015'` 
```

它仅适用于一个窗口。所以我不能使用“prev”或“next”命令遍历屏幕窗口。

我已经阅读了屏幕人，文档，并且我尝试搜索我的问题的解决方案:)

你能指引我正确的方向吗？或者也许有人已经解决了类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:46:50.397

如果您使用的是最新版本，`screen`则可以使用该`-Q`选项，请参阅[原始线程](http://lists.gnu.org/archive/html/screen-users/2010-02/msg00031.html)和[此答案](https://superuser.com/a/464162/133552)。这在这里有效：

```
screen -Q windows | sed 's/[^0-9]*/\n/g; s/^\n//g' \
| while read; do 
    screen -S test -p $REPLY -X stuff "source ~/.bashrc"$'\n'
  done 
```

和：

```
$ screen --version
Screen version 4.01.00devel (GNU) 2-May-06 
```

请注意，如果您有多个会话，请使用`-S`. 在这种情况下，我正在使用一个名为`test`. `-p`告诉屏幕将命令发送到哪个窗口。

还要注意[ANSI-C 引用](http://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html)( `$'\n'`) 的使用。

当`-Q`命令执行时，在运行命令之前`screen`等待`msgwait`几秒钟，通过设置为零来解决这个问题`msgwait`并在执行后将其重置，即

```
screen -S test -X msgwait 0
...
screen -S test -X msgwait 5 
```

5 是默认值。

# biztalk - 如何在 BizTalk 业务流程中使用 999？

> ID：12218095
> 
> 赞同：0
> 
> 时间：2012-08-31T15:09:20.453
> 
> 标签：biztalk, biztalk-2010, edi

我需要能够在 BizTalk 中接受（不生成）一个 999 文件并通过地图和一些业务逻辑运行它。如果我实际上将 999 模式添加到我的项目中，那么在部署时会出现错误：

> 无法找到文档规范，因为多个架构与消息类型“ [http://schemas.microsoft.com/BizTalk/EDI/X12/2006#X12_00501_999](http://schemas.microsoft.com/BizTalk/EDI/X12/2006#X12_00501_999) ”匹配

...这似乎表明 999 架构已经在 Microsoft.BizTalk.Edi.BaseArtifacts DLL 中。但是在项目中引用它后查看DLL，我只看到997（X12_997_Root）。

那么，建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:18:29.033

啊，在我发布这篇文章 60 秒后，我意识到了问题 - 一个古老的应用程序从未从服务器中清除过，其中也有 999 模式。没关系...

# ruby-on-rails - 从 simple_form 参数中删除路由名称？

> ID：12218097
> 
> 赞同：1
> 
> 时间：2012-08-31T15:09:29.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, params, simple-form

Simpleform 似乎将路由名称附加到其参数哈希中。如何防止或消除它？

```
simple_form_for @profile ... 
```

返回参数，如：

```
Parameters: {"utf8"=>"✓", "query"=>"" ... 
```

但

```
simple_form_for profile_path 
```

返回参数，如：

```
 params['people/search][:query] 
```

我想删除那个人/搜索路径，但无法弄清楚如何以任何方式，任何人都知道如何删除它并仍然使用 simple_form？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:53:49.910

这成功了：

```
 = simple_form_for  :people,  :url => request.fullpath, :method => :get,  :html => { :class => 'form-search' } do |f| 
```

# java - 代码正在产生灰屏

> ID：12218098
> 
> 赞同：3
> 
> 时间：2012-08-31T15:09:35.470
> 
> 标签：java, swing, paint, graphics2d, java-2d

我似乎无法解决这里的问题。

```
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class GamePanel extends JPanel implements Runnable, MouseMotionListener {

private static final int SCREEN_WIDTH = 640;
private static final int SCREEN_HEIGHT = 480;
private static final int INDENT = 20;

private int playerOneScore = 0;
private int playerTwoScore = 0;
private ImageEntity playerOne = new ImageEntity("Images/bouncer.bmp");
private ImageEntity playerTwo = new ImageEntity("Images/bouncer.bmp");

private int mouseX = 0;
private int mouseY = 0;

private BufferedImage gameScreen = new BufferedImage(SCREEN_WIDTH,
        SCREEN_HEIGHT, BufferedImage.TYPE_INT_RGB);

Graphics2D gameScreenGraphics = gameScreen.createGraphics();

public GamePanel() {
    paintBackground(gameScreenGraphics);
    paintScore(gameScreenGraphics);
    paintBouncers(gameScreenGraphics);
}

public void run() {
}

public void mouseMoved(MouseEvent m) {
    mouseX = m.getXOnScreen();
    mouseY = m.getYOnScreen();
}

public void mouseDragged(MouseEvent m) {
}

public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    g2d.drawImage(gameScreen, 0, 0, this);
}

private void paintBackground(Graphics2D g) {
    g.setColor(Color.BLACK);
    g.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);
    g.setColor(Color.WHITE);
    for (int i = 0; i < 10; i++) {
        g.fillRect(SCREEN_WIDTH / 2 - 5, i * SCREEN_HEIGHT / 10, 10,
                (SCREEN_HEIGHT / 10) - 10);
    }
}

private void paintScore(Graphics2D g) {
    Font scoreFont = new Font("Impact", Font.PLAIN, 72);
    g.setFont(scoreFont);
    FontMetrics scoreFontMetrics = g.getFontMetrics();
    g.drawString("" + playerOneScore, SCREEN_WIDTH / 2 - 30
            - scoreFontMetrics.stringWidth("" + playerOneScore),
            SCREEN_HEIGHT / 2);
    g.drawString("" + playerTwoScore, SCREEN_WIDTH / 2 + 30,
            SCREEN_HEIGHT / 2);

}

private void paintBouncers(Graphics2D g) {
    g.drawImage(playerOne.getImage(), playerOne.getX(), playerOne.getY(),
            this);
    g.drawImage(playerTwo.getImage(), playerTwo.getX(), playerTwo.getY(),
            this);
}

public static void main(String[] args) {
    JFrame mainPane = new JFrame("Pong - Mrinank Sharma");
    mainPane.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
    mainPane.setVisible(true);
    mainPane.setResizable(false);
    GamePanel gp = new GamePanel();
    mainPane.add(gp);
}

} 
```

我运行它并最终得到一个灰屏。有什么帮助吗？

`ImageEntity`基本上是一个 Image Wrapper 类型的东西`BufferedImage`。问题似乎出在`paintScore()`方法上，好像我注释掉了方法的调用，它按预期工作。这是针对我正在尝试制作的 Pong 类型游戏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:11:53.460

奇怪的是，这个单一的更改（经过多次更改以使其编译）修复了所述问题：

```
Font scoreFont = new Font("Arial", Font.PLAIN, 72); 
```

![乒乓](../Images/9576c577c33199e0f6516f823b5875fd.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T15:11:49.893

从 gamepanel() 中删除 paintscore 并将其添加到 mainpanel.add(gp) 之后

```
gp.paintScore(gp.gameScreenGraphics); 
```

尽管将字体大小更改为 24，但您的代码还有其他问题

# oracleforms - Oracle Forms - 两个相同的块，但只有第一个块显示数据

> ID：12218106
> 
> 赞同：0
> 
> 时间：2012-08-31T15:10:10.307
> 
> 标签：oracleforms

基于具有相同结构的不同表的两个块。控制字段确定哪个表显示数据。两个表中都存在数据。问题是仅从块 1 的表中显示数据。块 2 从不显示数据。允许在块 2 中看到数据的技巧是什么。两个块都位于同一个画布上。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:23:59.087

Create the relationship between this two blocks and data will be automatically retrived based on this relation..

P.S: I hope there will be some relation between this two table..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:18:23.640

只需将以下代码添加到 when-new-form-instance 中：

`go_block('block_one');

执行查询；

go_block('block_two');

执行查询；`

我希望这个对你有用

# python - 对列表中每个元组的第二个值求和

> ID：12218112
> 
> 赞同：21
> 
> 时间：2012-08-31T15:10:27.217
> 
> 标签：python

我有这样的结构：

```
structure = [('a', 1), ('b', 3), ('c', 2)] 
```

我想`1+3+2`使用`sum()`内置方法（在一行中）对整数（）求和。

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-31T15:11:06.587

```
sum(n for _, n in structure) 
```

会工作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-31T15:11:10.710

```
sum(x[1] for x in structure) 
```

应该管用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:13:02.107

你可以做

```
sum(zip(*structure)[1]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T15:26:14.007

使用功能风格，你可以做

```
reduce(lambda x,y:x+y[1], structure,0) 
```

# php - Htaccess URL重写

> ID：12218114
> 
> 赞同：2
> 
> 时间：2012-08-31T15:10:40.930
> 
> 标签：php, .htaccess, url-rewriting

我有一个关于 URL 重写的问题。
当我现在调用这样的 URL 时：

`http://domein.ext/error/mysql/2/class.core.php/`

它将在 de GET 变量中输出：

```
$_GET['type'] = mysql/2/class.core.php/.php/mysql
$_GET['error'] = 2
$_GET['file'] = class.core.php 
```

但是 TYPE 不正确？这是我的 .htaccess：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f

RewriteRule ^(.*)$ $1.php

RewriteRule ^index/password/ index.php?error=password
RewriteRule ^error/(.*)/(.*)/(.*)/ error.php?type=$1&error=$2&file=$3 
```

我该如何解决这个问题？其他一切都很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:15:39.167

尝试使您的匹配不贪婪：

```
RewriteRule ^error/(.*?)/(.*?)/(.*)/ error.php?type=$1&error=$2&file=$3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:17:15.897

`L`确保以标志结束所有规则。将您的代码更改为：

```
RewriteEngine on

RewriteRule ^index/password/?$ index.php?error=password [L,QSA,NC]

RewriteRule ^error/([^/]+)/([^/]+)/([^/]+)/?$ error.php?type=$1&error=$2&file=$3 [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

# html - 使用来表示幂（例如 4^2）的可访问性？

> ID：12218117
> 
> 赞同：8
> 
> 时间：2012-08-31T15:10:51.220
> 
> 标签：html, accessibility, superscript

使用`<sup>`标签是表示权力的正确方式吗？在屏幕阅读器中，不会`3<sup>2</sup>`只是读为三二或三十二吗？似乎必须有一种更方便的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:36:52.010

HTML 中没有其他标记元素来指示权力。甚至`sup`元素也不意味着指数；它表示上标，这反过来可能意味着不同的东西。根据 HTML5 草案，`sup`并且`sub`应该“仅在*缺少*这些元素会改变内容的含义时使用。但他们仍然展示了类似的例子`<span lang="fr"><abbr>M<sup>lle</sup></abbr>`，其中上标是文体。

的处理方式`sup`因浏览器而异，但我们不能真正期望浏览器读取`3<sup>2</sup>`为“三上标二”或“三的二次方”。如果他们这样做，`M<sup>lle</sup>`听起来真的很奇怪。

关于上标字符的使用也可以做类似的说明，例如“²”。它们的内在含义是上标，而不是表示指数。

这也意味着您可以合理地考虑使用其他标记，例如`3<span class=sup>2</span>`. 该`span`元素在语义上是空的，但并不比`span`具有“表示语义”的 差多少。这样做的原因可能[是没有真正令人满意的方式来设置`sup`元素](http://www.cs.tut.fi/~jkorpela/math/#subsupsize)的样式；，`span`你从一张干净的桌子开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T02:42:52.303

**一般来说，当下**[标/上标](http://en.wikipedia.org/wiki/Subscript_and_superscript)有 Unicode 等价物时，您*应该*直接使用该字符而不是`sub`/`sup`元素（这不是*必须*的，只是建议，所以继续使用您喜欢的任何东西）。

您可以在这些 Wikipedia 文章中找到其中一些下标/上标 Unicode 字符：

*   [Unicode 下标和上标](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)
*   [Latin-1 补充（Unicode 块）](http://en.wikipedia.org/wiki/Latin-1_Supplement_%28Unicode_block%29)（对于`¹`,`²`和`³`）
*   [Unicode 中的音标](http://en.wikipedia.org/wiki/Phonetic_symbols_in_Unicode)

如果将字符集设置为 Unicode 编码（如 UTF-8），则可以直接在文档中输入（或复制/粘贴）这些字符。HTML5 示例：`<meta charset="utf-8">`. 否则你会使用[字符实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。

例外：**在数学上下文中**，您*应该*将[MathML](http://en.wikipedia.org/wiki/MathML)与`msub`/一起使用`msup`（因此不要在此处使用这些特殊的下标/上标 Unicode 字符）。[`math`](http://www.w3.org/TR/html5/mathml.html#mathml)您可以在元素内使用 HTML5 中的 MathML 。

这两个“*应该*”的来源：[**XML 和其他标记语言中的 Unicode**：5.6 上标和下标](http://www.w3.org/TR/2007/NOTE-unicode-xml-20070516/#Superscripts)（[通过德语博客文章](http://untief.org/blog/2012/08/hochstellung-tiefstellung-html-oder-unicode)）

> 似乎必须有一种更方便的方法来做到这一点。

`sub`通过使用/元素或使用相关的 Unicode 字符标记这些下标/上标等价物`sup`，您正在完成您的工作：告诉用户代理“含义”，因此他们可以知道如何处理文本，例如 in-文档搜索（浏览器中的“CTRL + f”）、文本转语音（屏幕阅读器）、网络搜索（搜索引擎）……</p>

如果屏幕阅读器不能正确阅读/宣布`3²`or `3<sup>2</sup>`，这将是一个（严重的）错误，他们应该修复。

这种用户代理的唯一问题是人们是否滥用这些字符/元素。在这种情况下它不相关，但可能对于其他读者：当下标/上标只是风格（并且通过下标/上标没有新含义）时，您应该使用 CSS（而不是特殊的 Unicode 字符或`sub`/`sup`元素）：与/[垂直对齐](http://www.w3.org/wiki/CSS/Properties/vertical-align)（您也必须调整字体大小。请参阅[this answer](https://stackoverflow.com/a/572967/1591669) to a different question。）`sub``super`

# iphone - CLLocationManager 委托在初始化后不工作

> ID：12218118
> 
> 赞同：5
> 
> 时间：2012-08-31T15:11:00.337
> 
> 标签：iphone, ios, delegates, cllocationmanager, rhomobile

我正在尝试使用 rhomobile 框架让 iphone 的指南针工作。我已经完成了 rhomobile 部分，创建了一个在 iphone 上调用本机方法的工作包装器，但我无法让事件正常工作。

位置管理器.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface locationController : NSObject <CLLocationManagerDelegate> 
{
    CLLocationManager *locationManager;
}
@property (strong, nonatomic) CLLocationManager *locationManager;

- (id)init;
- (void)dealloc;

@end 
```

位置管理器.m

```
#import "Locationmanager.h"

#include "ruby/ext/rho/rhoruby.h"

//store the values
double gx, gy, gz, gth;

//init location
locationController *lc;
@implementation locationController

@synthesize locationManager;

- (id)init {
if (self = [super init]) {
    self.locationManager = [[CLLocationManager alloc] init];

    NSLog(@"%@", [CLLocationManager headingAvailable]? @"\n\nHeading available!\n" : @"\n\nNo heading..\n");
    NSLog(@"%@", [CLLocationManager locationServicesEnabled]? @"\n\nLocation available!\n" : @"\n\nNo location..\n");

    // check if the hardware has a compass
    if ([CLLocationManager headingAvailable] == NO) {
        // No compass is available. This application cannot function without a compass, 
        // so a dialog will be displayed and no magnetic data will be measured.
        locationManager = nil;
        UIAlertView *noCompassAlert = [[UIAlertView alloc] initWithTitle:@"No Compass!" message:@"This device does not have the ability to measure magnetic fields." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [noCompassAlert show];
        [noCompassAlert release];
        NSLog(@"\n***** ERROR *****\n No compass found !!!");
    } else {
        // setup delegate callbacks
        locationManager.delegate = self;

        // heading service configuration
        locationManager.headingFilter = kCLHeadingFilterNone;

        // location service configuration
        locationManager.distanceFilter = kCLDistanceFilterNone;
        locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;

        //start location services
        [locationManager startUpdatingLocation];

        // start the compass
        [locationManager startUpdatingHeading];

    }
return self;
}
}
- (void)dealloc {    
    [super dealloc];
    // Stop the compass
    [locationManager stopUpdatingHeading];
    [locationManager release];
}

// This delegate method is invoked when the location manager has heading data.
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)heading {
    NSLog(@"\n\n***** New magnetic heading *****\n %f\n", heading.magneticHeading);
    NSLog(@"\n\n***** New true heading *****\n %f\n", heading.trueHeading);
    gx = heading.x;
    gy = heading.y;
    gz = heading.z;
    gth = heading.trueHeading;
}

// This delegate method is invoked when the location managed encounters an error condition.
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    if ([error code] == kCLErrorDenied) {
        // This error indicates that the user has denied the application's request to use location services.
        NSLog(@"\n ***** ERROR *****\n Location not allowed!");
        [locationManager stopUpdatingHeading];
    } else if ([error code] == kCLErrorHeadingFailure) {
        NSLog(@"\n ***** ERROR *****\n Magnetic interference or something!");
    }
}

@end

//ruby wrappers
void locationmanager_init(void) {
   // make sure we can only start this method once
   static bool started = false;
   if(!started) {
       // Initialize the Objective C accelerometer class.
       lc = [[locationController alloc] init];
       started = true;
   }

}

void locationmanager_get_heading(double *x, double *y, double *z, double *th) {
    NSLog(@"\n ***** DEBUGGER *****\n Getting heading  x: %f, y: %f, z: %f, heading: %f", gx, gy, gz, gth);
    *x = gx;
    *y = gy;
    *z = gz;
    *th = gth;
} 
```

我在带有 iOS 5.1 的 iphone 4 上运行代码，在控制台中我可以看到 init 的调试消息，但我从未看到 didUpdateHeading 委托的调试消息。有人知道我在这里错过了什么吗？

**更新**

我想我需要在后台线程中运行我的代码才能让它工作。当前 locationmanager_init 初始化 + 离开代码，因此它不活动并且不会触发事件。任何人都有一个简单的解决方案在后台初始化它以使其保持活动状态？

**更新 2**

已返回 id，已使用`self = [super init]`但仍未修复 :(

[GitHub 代码](https://github.com/Vikko/Locationmanager_extension/tree/master/extensions/locationmanager/ext/locationmanager/platform/iphone/Classes) 使用 locationmanager_init 初始化，使用 locationmanager_get_heading 检索数据

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T19:43:49.000

您必须`CLLocationManager`在主线程上初始化，在[此处](https://stackoverflow.com/a/3732917/719656)检查此 SO ，或从具有活动运行循环的线程运行它，[在此处](https://stackoverflow.com/a/9237173/719656)检查此 SO ，来自 Apple 文档：

```
Configuration of your location manager object must always occur on a thread with 
an active run loop, such as your application’s main thread. 
```

确保你`locationController`和`CCLocationManager`它的内部在初始化之后仍然存在，检查[这里](https://stackoverflow.com/a/11701940/719656)。我在这里可能错了，但是从您的 Github 代码来看，该`*lc`变量似乎正在自动释放池中释放。尝试给它额外的保留。

```
lc = [[[locationController alloc] init] retain]; 
```

我想这是你问题的原因。如果对象被释放，您将不会获得任何更新。

与问题无关，但：

你应该最后而不是第一个打电话，[在这里](https://stackoverflow.com/a/909925/719656)`[super dealloc]`检查这个

将 return 语句放在 init 方法中最后一个括号之前，而不是在倒数第二个之前。

```
 ...
        // start the compass
        [locationManager startUpdatingHeading];

        }
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:27:07.757

```
- (void)locationManager:(CLLocationManager *)manager 
didUpdateHeading:(CLHeading *)heading;
- (void)locationManager:(CLLocationManager *)manager 
didFailWithError:(NSError *)error; 
```

这些是您的实例方法而不是委托方法。

检查 [https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:24:42.020

可能这不是整体问题的解决方案，但您的`init`方法缺少返回语句：

```
- (id)init {
  if (self = [super init]) {
    // do your setup here
  }

  return self;
} 
```

# javascript - 使用 jQuery Validate 规则标记必填字段

> ID：12218123
> 
> 赞同：0
> 
> 时间：2012-08-31T15:11:13.237
> 
> 标签：javascript, jquery, validation

我已经实现了来自 bassistance.de 的 jQuery 验证插件，并通过在我想要验证的每个表单下方手动定义规则来使用它。我想在脚本初始化完成后根据需要修改我定义的字段（例如，给它们一个边框颜色），但我似乎找不到通用的“加载”回调、事件或扩展可能性。

**有没有办法在每次`$('#form').validate(..)`完成初始化时执行脚本？**

我现在解决的方法如下：

```
$(document).ready(function() {
    $('#myForm').validate({
        rules: {
            txtCode: { required: true, maxlength: 12 },
            txtName: { required: true, maxlength: 50 },
        }
    });
    $('#myForm').highlightRequiredFields();
}); 
```

..`highlightRequiredFields()`我写的一个简单的 jQuery 插件在哪里修改所需的文本框。我只是不太热衷于将该行复制到我的所有表单验证中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:19:24.137

为什么不简单地使用 CSS 进行更改？我有一堆规则，甚至还有一些 JS 行，它们在任何具有**required**类的东西上自动运行，一旦它们有效/错误，其他事情（我想要的）就会发生在他们身上。

否则，您很可能必须在`$.fn.validate()`插件本身内部进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:23:51.783

我会干扰 validate 插件的 init 方法来执行你的 highlightRequiredFields 插件。

不要忘记检查这个插件是否可用，所以如果在其他地方没有突出显示，验证不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:29:33.253

谢谢大家。Zachary 的回应让我意识到这比我想象的要容易得多。我最终添加了这个重载：

```
(function($) {
    $.fn.extend({
        validateAndMarkRequired: function(options) {
            var validator = this.validate(options);
            this.markRequiredFields();
            return validator;
        }
    });
})(jQuery); 
```

# c# - 数据库行未通过 GridView 更新进行更新

> ID：12218127
> 
> 赞同：0
> 
> 时间：2012-08-31T15:11:32.607
> 
> 标签：c#, gridview, .net-3.5, asp.net-3.5

我有一个具有以下属性的 GridView：

`OnRowUpdating="GridViewRowUpdateEventHandler"`

在 GridView 中，我有以下控件：

```
<asp:TemplateField HeaderText="Progress" SortExpression="progress">
    <ItemTemplate>
        <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true">
            <asp:ListItem Value="0">Incomplete</asp:ListItem>
            <asp:ListItem Value="1">Complete</asp:ListItem>
        </asp:DropDownList>
    </ItemTemplate>
</asp:TemplateField> 
```

`GridViewRowUpdateEventHandler`看起来像这样：

```
protected void GridViewRowUpdateEventHandler(object sender, GridViewUpdateEventArgs e)
{
    SqlConnection connection;
    SqlCommand command;

    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];

    DropDownList ddlPriority = (DropDownList)row.FindControl("DropDownList1");

    using (connection = new SqlConnection(ConfigurationManager.AppSettings["connString"]))
    {
        using (command = new SqlCommand(@"update table1 set priority = @priority where id = @id", connection))
        {
            command.Parameters.Add("@priority", SqlDbType.Int, 1).Value = ddlPriority.SelectedValue;
            command.Parameters.Add("@id", SqlDbType.Int, 1).Value = row.RowIndex;

            connection.Open();
            command.ExecuteNonQuery();
            connection.Close();
        }
    }

    GridView1.DataBind();
} 
```

我根本没有收到任何错误消息，并且数据库中的相关行没有被更新。有谁知道为什么？

会不会是我看错了单元格`Cells[5]`？或者可能是因为我在 page_load 中什么都没有？或者也许是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:15:05.070

由于 DropDiownList 在 a 中`TemplateField`并且它`NamingContainer`是 GridViewRow，因此您应该使用它`row.FindControl`来获取参考：

```
DropDownList ddlPriority = (DropDownList)row.FindControl("DropDownList1"); 
```

代替

```
DropDownList ddlPriority = (DropDownList)row.Cells[5].FindControl("DropDownList1"); 
```

但这不是您问题的核心，因为`row.Cells[5].FindControl`它在第 6 个单元格中也可能有效。否则你会得到一个`NullreferenceException`.

我假设您还在回发上绑定了 GridView，您应该检查该[`IsPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback%28v=vs.110%29.aspx)属性：

```
protected void Page_Load()
{
    if (!IsPostBack)
    {
        BindGrid();
    }
} 
```

除此之外：

```
command.Parameters.Add("@id", SqlDbType.Int, 1).Value = row; 
```

不起作用，因为`row`是 GridViewRow。最后，您还应该`DataBind`使用 GridView，否则将不会反映更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:15:13.807

您 `DataBind`在 GridViewRowUpdateEventHandler 的末尾添加

```
GridView.DataBind(); 
```

为了找到控制

```
var ddlPriority = (DropDownList)row.FindControl("DropDownList1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:15:29.920

我假设您忘记**重新绑定**您的**gridView 数据**

```
gridview1.DataSource = YOUR_DATASOURCE;
gridview1.DataBind(); 
```

此外，您应该通过以下方式访问您的 dropDownList

```
DropDownList ddlPriority = (DropDownList) row.FindControl("DropDownList1"); 
```

**编辑**

发现另一个错误

```
command.Parameters.Add("@id", SqlDbType.Int, 1).Value = row; // wrong! primaryKey value needed! 
```

这不起作用，因为行的类型为 GridViewRow。您应该分配我假设的 primaryKey 值！

无论您决定先做什么，我都会添加一些`Debug.WriteLine(..)`语句来查看将哪些值发送到 SQL Server。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T00:02:22.617

我认为问题在于您使用该行的 rowIndex 作为 ID。所以你最后的 sql 命令会是这样的

```
update table1 set priority = 'blah' where id = 0 //(where its the first row and so on) 
```

所以这是一个非常好的查询，它将运行没有错误或异常，但没有 ID = 0。您将它绑定到错误的 ID。您需要将其绑定到的是表中的 ID。

您可以通过运行 SQL 探查器来仔细检查这一点，您应该能够找到正在发送到数据库的查询。

# javascript - 如何以最有效的方式实现这个多维数组？

> ID：12218129
> 
> 赞同：1
> 
> 时间：2012-08-31T15:11:44.467
> 
> 标签：javascript, object, multidimensional-array, constructor, object-literal

我想使用 JavaScript 制作这个数组：

```
 -----------------------------------------------
    |                     |         male          |
    |                     |-----------------------|
    |   rafael            |         single        |
    |                     |-----------------------|
    |                     |          22           | 
    |---------------------|-----------------------|
    |                     |         male          |
    |   jack              |-----------------------|
    |                     |         married       |      
    |                     |-----------------------|
    |                     |         34            |
    ----------------------------------------------- 
```

在思考了很多如何制作它之后，我就使用了这个：

```
var arr = [];
for(i = 0 ; i < 2 ; i++){
    arr[i] = [2]
    for (j = 0; j < 3 ; j++){
        arr[i][1] = [3];
        arr[i][1][j] = "this is row :" + i + ", column : 1, row : " + j ;
        console.log(arr[i][1][j]);
    }
} 
```

有没有其他方法，使用对象构造函数或对象文字来实现这一点？因为我想这样访问它

```
obj["first row"]["third row in second column"] 
```

我希望用户在每个单元格中输入任何值，并像这样调用它：

```
obj["rafael"]["age"]; 
```

**请注意**，我不知道会有多少行，我只是在其中放置任意值以及任意单元格名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:16:43.963

我不会让它成为一个数组，而是一个对象......因为无论如何你都像使用对象一样使用它。（如果您不使用整数索引和长度属性，则无论如何您都可以像使用基本对象一样使用数组。所有数组都是对象，并非所有对象都是数组。）

当然，替换`null`为您将使用的值。或者您可以将它们保留为占位符。

```
var a = {
  "first row": {
    "first row in second column": null,
    "second row in second column": null,
    "third row in second column": null
  },
  "second row": {
    "first row in second column": null,
    "second row in second column": null,
    "third row in second column": null
  }
} 
```

啊，如果它是动态的，那么我会做这样的事情：

```
var folk = {};  // Our basic place holder.
var person = {};  // The 'inner information' to populate.
person.married = true;
person.age = 41;
person.address = "777 Heaven's Gate";
folk["Jeremy J Starcher"] = person;

// Next person
person = {};
person.gender = 'male';
person.insurance = true;
folk["John Doe"] = person;

window.alert(folk["John Doe"]["gender"]);
window.alert(folk["John Doe"].gender); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:19:21.353

如果要通过字符串名称访问元素，则需要使用对象。数组仅支持数字索引。

```
var data = {
    'first row': {
        'first column': 'foo',
        'second column': 'bar',
        'third column': 'baz'
    },
    'second row': {
        'first column': 'foo',
        'second column': 'bar',
        'third column': 'baz'
    }
};

data['first row']['first column']; // gives you 'foo' 
```

请注意，仅当键名具有无效的标识符字符（在本例中为空格）时，才需要引用键名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:27:34.120

这将为您提供一个具有动态属性的对象：

```
var arr = new Object();
for(i = 0 ; i < 2 ; i++){
    var rowName = "row"+i;
    arr[rowName] = new Object();
    for (j = 0; j < 3 ; j++){
        var colName = "col"+j;
        arr[rowName][colName] = "this is row " + i + ", column " + j;
    }
}
console.log(arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:27:55.587

我会将您的数据映射到具有以下内容的单元格：

```
 -----------------------------------------------
    | arr[0].left         | arr[0].right[0]       |
    |                     |-----------------------|
    |                     | arr[0].right[1]       |
    |                     |-----------------------|
    |                     | arr[0].right[2]       | 
    -----------------------------------------------
    | arr[1].left         | arr[1].right[0]       |
    |                     |-----------------------|
    |                     | arr[1].right[1]       |
    |                     |-----------------------|
    |                     | arr[1].right[2]       | 
    ----------------------------------------------- 
```

你可以这样做：

```
var arr = []

for(var i = 0; i < rows; i++) {
    arr[i] = {
        left: "someText",
        right: [
            "some",
            "more",
            "text"
        ]
    };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T15:32:53.150

看到您的编辑，您要么想要：

```
var data = {
    rafael: {
        gender: "male",
        status: "single",
        age: "22"
    },
    jack: {
        gender: "male",
        status: "married",
        age: "34"
    }
}; 
```

或者

```
var data = [{
    name: "rafael",
    gender: "male",
    status: "single",
    age: "22"
}, {
    name: "jack",
    gender: "male",
    status: "married",
    age: "34"
}]; 
```

# ruby-on-rails - 在 Ruby 中的 f.select 上在哪里放置一个类？

> ID：12218131
> 
> 赞同：0
> 
> 时间：2012-08-31T15:11:59.823
> 
> 标签：ruby-on-rails

我正在尝试将一个类应用于使用 Ruby 构建的选择表单元素。

这是 f.select：

```
<%= f.select :within, ["5km", "50km", "100km", "250km", "500km", "1000km"], { :include_blank => 'Anywhere', :selected => (params[:listing][:within] unless params[:listing].nil? || !params[:listing].has_key?(:within)) } %> 
```

上课去哪里？我的课是：

```
:class => 'input-medium' 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:25:38.660

请参阅**[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)**，特别是`html_options`参数。

在您在问题中发布的内容的末尾添加另一个论点：

```
{ class: "input-medium" } 
```

总而言之就是

```
<%= f.select :within, ["5km", "50km", "100km", "250km", "500km", "1000km"], { :include_blank => 'Anywhere', :selected => (params[:listing][:within] unless params[:listing].nil? || !params[:listing].has_key?(:within)) }, { class: "input-medium" } %> 
```

# java - 如何运行 .exe 并在 Eclipse 插件中捕获输出。（爪哇）

> ID：12218138
> 
> 赞同：1
> 
> 时间：2012-08-31T15:12:30.487
> 
> 标签：java, eclipse, eclipse-plugin

> **可能重复：**
> [调用 Runtime.exec 时捕获标准输出](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec)

好吧，

我正在开发一个 Eclipse 插件，它生成一些基于可视界面的 PHP 代码（即用户在视图上拖放一些东西，然后我的插件将使用相关代码更新一些 php 文件）

我正在使用 FileUtils (Apache Commons) 创建 php 文件，并且正在使用 ASTParser 生成 PHP 代码。

我的问题是我需要对我新生成的代码进行美化和很好的缩进。我搜索了一下，发现了这个[http://www.waterproof.fr/products/phpCodeBeautifier/](http://www.waterproof.fr/products/phpCodeBeautifier/)。它以 .exe 文件的形式出现。我已将其添加到资源中，但在调用它并从中获取输出时遇到了一些麻烦。

我怎样才能做到这一点？另外我不得不说我需要它在 Mac 和 Windows 机器上工作。这可以做到吗？有没有更简单的美化代码的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:28:10.150

如果您可以从命令行运行它并传递文件路径来美化代码，您可以使用以下代码运行它并捕获结果。

```
Process p = Runtime.getRuntime().exec("executable.exec");

BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));

while ((String line = input.readLine()) != null) {
  System.out.println(line);
} 
```

另请参阅： [如何捕获从批处理执行的 EXE 返回的数据？](https://stackoverflow.com/questions/1796239/how-to-capture-the-data-returned-from-an-exe-excuted-from-a-batch)

[如何获取由 exe 文件生成的控制台输出？](https://stackoverflow.com/questions/1251039/how-can-i-get-the-console-output-generated-by-a-exe-file/1251045#1251045)

[调用 Runtime.exec 时捕获标准输出](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:29:09.657

I would do it as follows:

1.  Resolve the location of the exe in an OS independent manner.
2.  Create a `Process` using `Runtime.getRuntime().exec('exe_location');
3.  Take the `process.getOutputStream()` and print the unformatted code into it which means the exe would read the text to be formatted on STDIN.
4.  Take the `process.getInputStream()` and read out the formatted code from it which means the exe would print the formatted output on to STDOUT.
5.  Close the streams and end the process.

# iphone - 添加滑动手势以查看情节提要上的控制器不起作用

> ID：12218140
> 
> 赞同：0
> 
> 时间：2012-08-31T15:12:38.090
> 
> 标签：iphone, objective-c, xcode, ios5

我对此很陌生，所以我一直在关注本教程。

```
www.youtube.com/watch?v=5u1-DGiUhXU 
```

我有 4 个带有图像等的视图控制器。我完全按照这个视频做了。我的问题是，如果我点击，拖动什么都没有发生。我只是卡在主屏幕上。我已经尝试更改`push`为，`model`但它也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:29:04.213

您应该将 imageViews UserInteractionEnabled = YES 设置为启用触摸，因为默认情况下它是 =NO。刚刚以这种方式解决了类似的问题。

编辑：我刚刚重复了视频中描述的动作，一切正常！您真的应该仔细遵循视频指南！PS 滑动手势应该是从屏幕左侧快速移动到右侧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:25:09.043

我看到了同样的教程，我遇到了同样的问题，我解决了如下：

拖动滑动手势识别器时，您必须将其拖动到视图本身（背景颜色出现的位置）。当它不适合我时，我将它拖到底部的黑色栏上。希望这可以帮助。

# c# - 将 nHibernate 一张表映射到类和子类

> ID：12218145
> 
> 赞同：0
> 
> 时间：2012-08-31T15:13:07.277
> 
> 标签：c#, nhibernate, fluent-nhibernate

尝试使用两个相同的子类映射订单类并出现以下错误

```
Could not find a getter for property 'RatingCriteria1' in class 'ORM.Entities.Enquiry.EnquiryOrder' 
```

基本上我在数据库中有一个包含很多列的表。12 列与评级相关

BuyerRatingCriteria1、BuyerRatingCriteria2、BuyerRatingCriteria3、BuyerRatingCriteria4、BuyerRatingCriteria5、BuyerRatingCriteriaComments

和

SupplierRatingCriteria1, SupplierRatingCriteria2, SupplierRatingCriteria3, SupplierRatingCriteria4, SupplierRatingCriteria5, SupplierRatingCriteriaComments

我想将它们简化为两个子类，以便我拥有

```
Order.SupplierRating.Criteria1 
```

和

```
Order.BuyerRating.Criteria1 
```

例如

```
public class EnquiryOrder : Entity
{
    public virtual int Id { get; set; }
    public virtual DateTime DateOrdered { get; set; }

    public virtual string PONumber { get; set; }
    public virtual string SONumber { get; set; }

    public virtual Rating SupplierRatings { get; set; }
    public virtual Rating BuyerRatings { get; set; }

}

public class Rating : Entity
{
    public virtual int RatingCriteria1 { get; set; }
    public virtual int RatingCriteria2 { get; set; }
    public virtual int RatingCriteria3 { get; set; }
    public virtual int RatingCriteria4 { get; set; }
    public virtual int RatingCriteria5 { get; set; }
    public virtual string RatingCriteriaComment { get; set; }

} 
```

映射我认为会像这样简单

```
 public EnquiryOrderMapping()
    {
        Id(x => x.Id).Column("EnquiryOrderId");
        Map(x => x.DateOrdered);

        Map(x => x.PONumber).Nullable();
        Map(x => x.SONumber).Nullable();

        Map(x => x.BuyerRatings.RatingCriteria1).Column("EnquiryBuyerRatingsRatingCriteria1").Nullable();
        Map(x => x.BuyerRatings.RatingCriteria2).Column("EnquiryBuyerRatingsRatingCriteria2").Nullable();
        Map(x => x.BuyerRatings.RatingCriteria3).Column("EnquiryBuyerRatingsRatingCriteria3").Nullable();
        Map(x => x.BuyerRatings.RatingCriteria4).Column("EnquiryBuyerRatingsRatingCriteria4").Nullable();
        Map(x => x.BuyerRatings.RatingCriteria5).Column("EnquiryBuyerRatingsRatingCriteria5").Nullable();
        Map(x => x.BuyerRatings.RatingCriteriaComment).Column("EnquiryBuyerRatingsRatingCriteriaComment").Nullable();

    } 
```

不，我没有在这里映射供应商方面，因为我试图尽可能地简化它以便能够解决它。

所以我不明白为什么它有问题......我已经告诉它看哪一列（全名）而不是“RatingCriteria1”

以及当我确实有一个变量 RatingCriteria1 时，它有一个 getter 和 setter ！！！

很奇怪...在映射这样的子类时，我是否遗漏了您必须做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:46:39.113

您需要通过执行以下操作将 Ratings 映射为一个组件：

```
public EnquiryOrderMapping()
{
    Id(x => x.Id).Column("EnquiryOrderId");
    Map(x => x.DateOrdered);

    Map(x => x.PONumber).Nullable();
    Map(x => x.SONumber).Nullable();

    Component(x => x.BuyerRatings,
        y => 
            {
                y.Map(r => r.RatingCriteria1, "EnquiryBuyerRatingsRatingCriteria1").Nullable();
                y.Map(r => r.RatingCriteria2, "EnquiryBuyerRatingsRatingCriteria2").Nullable();
                y.Map(r => r.RatingCriteria3, "EnquiryBuyerRatingsRatingCriteria3").Nullable();
                // etc..
            });     
    // etc..
} 
```

# django - Django 双向关系

> ID：12218147
> 
> 赞同：2
> 
> 时间：2012-08-31T15:13:13.830
> 
> 标签：django, object-relationships

我正在建立一个博客网站，并有关于类别和帖子的模型。帖子与类别具有多对多关系。

```
class Post(models.Model):
     categories = models.ManyToManyField(Category) 
```

除了在模板的类别列表中我只想加载实际有帖子的类别之外，一切都运行良好。

如果一个类别是空的，我不想显示它，我试图在 Category 与 Post 中定义一个关系，以允许我使用类似`{{ if category.posts }}`. 目前在类别中使用另一个多对多字段目前正在给我一个额外的管理字段，我真的不想要或觉得不需要。

如何最好地驾驭这种关系，或者创造一个合适的关系？

干杯凯夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:27:58.053

Django 自动在任何 ForeignKey 或 ManyToMany 关系的相关模型上创建一个字段。您可以通过 related_name 选项控制相关模型上的字段名称，如下所示：

```
class Post(models.Model):
 categories = models.ManyToManyField(Category,related_name='posts') 
```

这样，您的方法无需任何其他字段即可工作。顺便说一句，如果你省略了related_name 参数，Django 将默认创建一个带有[field_name]_set 的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:31:34.523

您可以`reverse relations`在`ManyToMany`字段上使用。在反向过滤器中，您必须使用相关的模型名称（如果您没有使用`related_name`属性）。因此，在您的问题中，您可以使用模型名称作为反向名称，例如：

```
{% if category.post %} 
```

您还可以在视图中的过滤功能中使用它：

```
Category.objects.filter(post__isnull=False) 
```

反向关系名称必须为小写。

[在此处](https://docs.djangoproject.com/en/1.4/topics/db/queries/#lookups-that-span-relationships)查看文档

# xml - 为自定义 XML 构建模式验证定义

> ID：12218148
> 
> 赞同：1
> 
> 时间：2012-08-31T15:13:14.097
> 
> 标签：xml, validation, schema

我在写下 XML 文件的架构时遇到了一些问题，这很简单。

正如我建议的那样，我尝试放置其他代码（我删除了它，因为如果我把所有东西都搞砸了，我就无法解开......）：

我无法弄清楚我的架构问题出在哪里：

```
<?xml version="1.0"
      standalone="yes"?>
<ChangeHistory xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <xs:schema id="ChangeHistory"
             xmlns=""
             xmlns:xs="http://www.w3.org/2001/XMLSchema"
             xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="ChangeHistory"
                msdata:IsDataSet="true"
                msdata:MainDataTable="Version"
                msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:element name="Versions">
        <xs:complexType>
          <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element name="Version">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Edits">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="Edit">
                          <xs:complexType>
                            <xs:attribute name="Content" type="xs:string" />
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="Id" type="xs:string" />
              </xs:complexType>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <Versions>
    <Version Id="1.0.5 - Coming next!">
      <Edits>
        <Edit Content="Bla bla 1" />
        <Edit Content="Bla bla bla" />
      </Edits>
    </Version>
    <Version Id="1.0.4 - Coming soon!">
      <Edits>
        <Edit Content="First edit of the version" />
        <Edit Content="Second edit of the version" />
      </Edits>
    </Version>
  </Versions>
</ChangeHistory> 
```

这个 XML 是从 .NET 数据集生成的，我认为问题出在内部（所以外部部分是正确的！）这个元素：

```
<xs:schema id="ChangeHistory"
    xmlns=""
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"> 
```

**Version**和**Edit**元素的所有属性都是 type `xs:string`。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:58:34.703

只需使用从 Visual Studio 20120 XSD 工具生成的此架构：

```
<xs:schema id="ChangeHistory"
         xmlns=""
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="ChangeHistory"
            msdata:IsDataSet="true"
            msdata:MainDataTable="Version"
            msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0"
               maxOccurs="unbounded">
      <xs:element name="Versions">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Version"
                        minOccurs="0"
                        maxOccurs="unbounded">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Edits"
                              minOccurs="0"
                              maxOccurs="unbounded">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="Edit"
                                    minOccurs="0"
                                    maxOccurs="unbounded">
                          <xs:complexType>
                            <xs:attribute name="Content"
                                          type="xs:string" />
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="Id"
                              type="xs:string" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

# c++ - 使用命名互斥体提高进程间库库性能问题

> ID：12218151
> 
> 赞同：0
> 
> 时间：2012-08-31T15:13:27.123
> 
> 标签：c++, performance, boost, interprocess

具有命名互斥锁的 boost 进程间库是否存在已知问题，boost 版本 1.36。

基本上我们这样做：

```
#define BT_MY_LOCK "XX_BT_MY_LOCK_XX"
#define WAIT_LOCK named_mutex myLock(open_or_create, BT_TICKET_LIB_LOCK);   \
boost::posix_time::ptime expire_time = microsec_clock::universal_time() + boost::posix_time::seconds(2);    \
scoped_lock<named_mutex> lock(ticketLock, expire_time); \
if (!lock.owns()) throw mutex_failure(); 
```

然后我们在需要的时候使用这个宏。

但这似乎导致了很多不必要的 C:\ 文件夹打开和关闭活动，每当 boost 尝试在 C:\ 驱动器下的 temp 文件夹下创建 XX_BT_MY_LOCK_XX 文件时。似乎每个 useufl XX_BT_MY_LOCK_XX 文件访问，大约有 25ish C:\ Open ， Cl​​ose 。

所以它看起来像promon：

```
XX_BT_MY_LOCK_XX access 1 
XX_BT_MY_LOCK_XX access 2
C:\ open
C:\ close
C:\ open
C:\ close
...
repeat 25 times 
...
XX_BT_MY_LOCK_XX access 1 
XX_BT_MY_LOCK_XX access 2
C:\ open
C:\ close
C:\ open
C:\ close
...
repeat 25 times 
```

我只是想知道这是一个已知的提升问题吗？

# javascript - 使用 Javascript 创建内部样式表

> ID：12218152
> 
> 赞同：2
> 
> 时间：2012-08-31T15:13:36.007
> 
> 标签：javascript, html, css

所以我试图使用javascript在标题中创建一个内部样式表，但它不起作用。该脚本的这一点是突出显示我所在页面的选项卡。

下面不是我正在实施它的实际站点，只是测试 - 但它不能正常工作。这甚至可能吗？是的，我知道我可以使用内联 css 或其他东西来做到这一点，但这肯定会更令人困惑！

```
<html>
<head>
<title>Test</title>
<script type="text/javascript">
function parseUrl( url ) {
    var a = document.createElement('a');
    a.href = url;
    return a;
}

var page=parseUrl('').search

function getSecondPart(str) {
    return str.split('=')[1];
}

var site=getSecondPart(page));

text.innerHTML('<style type="text/css">
."nav_"' + page + '" {background-color:red;} {color=green;} </style>')

}
</style>"

</script>
</head>
<body>
<ul>
<li class="nav_home"><a href="testtest.html?site=home">Home</a>
<li class="nav_forum"><a href="testtest.html?site=forum"/>Forum</a>
<li class="nav_help"><a href="testtest.html?site=help"/>Help</a>
<li class="nav_roster"><a href="testtest.html?site=roster"/>Roster<a/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:19:40.063

1.  `parseURL`返回一个 DOM 元素。
2.  `page = parseUrl('').search`，如果`parseUrl('')`返回一个字符串，将返回字符串方法`search`，这本身并不是很有用。
3.  `var site=getSecondPart(page));`有一个额外的括号。
4.  `text`没有定义。
5.  像这样的类`."nav_"4`不是有效的类。
6.  你有一个额外的右括号。

所有这些错误都会阻止您的代码运行。用于确保不发生语法错误的好工具是 Chrome 的 Web Developer、Firefox 的 Firebug 或[JSHint](http://jshint.com)。

完成后，执行以下操作：

```
var style = document.createElement("style");
style.innerHTML = ".nav_" + page + " { background-color: red; color: green; }";
document.body.appendChild(style); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:26:57.863

有两种*适当的*解决方案，它们不是您要的，而是解决您的问题。

* * *

第一种方法是在你的每个`li`s 中使用不同的导航类。这就是你应该一直做的事情。

首选方式：

```
<li class="nav" id="home"> ... 
```

您也可以这样做，但这不是一个好主意，因为家`li`是独一无二的。

```
<li class="nav nav-home"> ... 
```

和

```
li.nav {
    background-color: red;
    color: green;
} 
```

* * *

第二种方法是使用 CSS3 属性选择器。但是，这可能不适用于所有浏览器：

```
li[class^="nav"] {
    background-color: red;
    color: green;
} 
```

# flash - 如何从任何地方获取对系统管理器的引用？

> ID：12218162
> 
> 赞同：1
> 
> 时间：2012-08-31T15:14:10.933
> 
> 标签：flash, apache-flex, flex4, stage

您如何从应用程序中的任何类中获得对系统管理器的引用？

例如说我有：

```
/** 
 * Value object class
 **/
public class Person {

    public function Person():void {
        var sm:SystemManager = ...; // need reference to sm
        var stage:Stage = sm.stage;
    }

    public var name:String;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:26:28.270

您可以为此使用[FlexGlobals.topLevelApplication 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/FlexGlobals.html#topLevelApplication)它将返回对您的主应用程序实例的引用。从那里您可以轻松获取 SystemManager 实例，如下所示：

```
var sm:SystemManager = Application(FlexGlobals.topLevelApplication).systemManager 
```

# python - django - 生成一个验证表单的 dajaxice 函数（dajaxice_register 问题）

> ID：12218163
> 
> 赞同：0
> 
> 时间：2012-08-31T15:14:13.417
> 
> 标签：python, django, decorator, introspection, dajaxice

我想做一个通用函数来使用 dajaxice 实时验证模型。

这是我所做的：

exafeeds/ajax.py

```
from django.core.exceptions import ValidationError                                  
from django.utils import simplejson                                                 

from dajaxice.decorators import dajaxice_register

def gen_validate_model(models_module):

    @dajaxice_register
    def validate_model(request, model, fields):
        errors = {}

        tmp_model = getattr(models_module, model)()

        for (field, value) in fields.items():
            setattr(tmp_model, field, value)

        try:
            tmp_model.clean_fields()
        except ValidationError, err:
            errs = err.message_dict

            for field in fields:
                errors[field] = errs.get(field)

        return simplejson.dumps(errors)

    return validate_model 
```

帐户/ajax.py

```
from exafeeds.ajax import gen_validate_model

import accounts.models

validate_model = gen_validate_model(accounts.models) 
```

和 js 调用：

```
Dajaxice.accounts.validate_model(check_validity_callback, {
    'model': 'User',
    'fields': {
        'username': username,
        'email': email
    }
}); 
```

但是当我收到一个 JS 错误告诉我 Dajaxice.accounts 未定义时。

dajaxice_register 装饰器显然放错了位置，但我应该把它放在哪里？

编辑。我试图用这个替换 dajaxice_register 装饰器：

```
validate_model = gen_validate_model(accounts.models)
validate_model = dajaxice_register(validate_model) 
```

但这并没有改变任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:00:08.860

我找到了一个解决方案，但它看起来很脏。我将不胜感激一个更好的解决方案。

exafeeds/ajax.py

```
from django.core.exceptions import ValidationError
from django.utils import simplejson

def gen_validate_model(models_module):

    def validate_model(request, model, fields):
        errors = {}

        tmp_model = getattr(models_module, model)()

        for (field, value) in fields.items():
            setattr(tmp_model, field, value)

        try:
            tmp_model.clean_fields()
        except ValidationError, err:
            errs = err.message_dict

            for field in fields:
                errors[field] = errs.get(field)

        return simplejson.dumps(errors)

    return validate_model 
```

帐户/ajax.py

```
from dajaxice.decorators import dajaxice_register

from exafeeds.ajax import gen_validate_model

import accounts.models

@dajaxice_register
def validate_model(request, model, fields):
    return gen_validate_model(accounts.models)(request, model, fields) 
```

但是函数生成器变得无用，因此可以简化为：

exafeeds/ajax.py

```
def gen_validate_model(models_module, request, model, fields):
    errors = {}

    tmp_model = getattr(models_module, model)()

    for (field, value) in fields.items():
        setattr(tmp_model, field, value)

    try:
        tmp_model.clean_fields()
    except ValidationError, err:
        errs = err.message_dict

        for field in fields:
            errors[field] = errs.get(field)

    return simplejson.dumps(errors) 
```

帐户/ajax.py

```
@dajaxice_register
def validate_model(request, model, fields):
    return gen_validate_model(accounts.models, request, model, fields) 
```

相当糟糕：|

# jaxb - “版本控制”JAXB 对象？

> ID：12218164
> 
> 赞同：5
> 
> 时间：2012-08-31T15:14:15.003
> 
> 标签：jaxb

我们正在使用 JAXB 构建许多开发人员应用程序，并不断遇到问题，这些问题都归结为 JAXB 对象的生产者和消费者之间的“版本”不匹配。

过程并没有减轻痛苦，所以我正在考虑一些类似于 JAXB 的 CORBA 对象版本控制的方法，可能是通过值必须匹配的必需的最终字段。作为额外的奖励，我想将版本值注入为 Maven 版本 # :-)

这都是使用注释，没有xsd。

想法？

谢谢。

----- 澄清 -----

将此视为一个可序列化的 serialVersionUID，当对象被封送并且是必需的时，它被添加到封送流中，并且在对象被取消封送时*检查*其值。

可以实现各种检查规则，但在这种情况下，我只想要相等。如果 Foo 的当前版本是 1.1，并且您将数据发送给 unmarshal，其版本不是 1.1，我将拒绝它。

帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T10:44:00.303

您可以执行以下操作：

**富**

将版本字段添加到您的根模型对象。

```
package forum12218164;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Foo {

    @XmlAttribute
    public static final String VERSION = "123";

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**演示**

在您的演示代码中，在确定执行解组操作是否安全之前，利用 StAX 解析器检查版本属性：

```
package forum12218164;

import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        // Create the JAXBContext
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        // Create an XMLStreamReader on XML input
        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource xml = new StreamSource("src/forum12218164/input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(xml);

        // Check the version attribute
        xsr.nextTag(); // Advance to root element
        String version = xsr.getAttributeValue("", "VERSION");
        if(!version.equals(Foo.VERSION)) {
            // Do something if the version is incompatible
            throw new RuntimeException("VERSION MISMATCH");
        }

        // Unmarshal for StAX XMLStreamReader
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Foo foo = (Foo) unmarshaller.unmarshal(xsr);

        // Marshal the Object
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**有效用例**

***输入.xml/输出***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<foo VERSION="123">
    <bar>ABC</bar>
</foo> 
```

**无效用例**

***输入.xml***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<foo VERSION="1234">
    <bar>ABC</bar>
</foo> 
```

***输出***

```
Exception in thread "main" java.lang.RuntimeException: VERSION MISMATCH
    at forum12218164.Demo.main(Demo.java:23) 
```

# r - 在 R 中每 60 秒运行一次函数

> ID：12218166
> 
> 赞同：1
> 
> 时间：2012-08-31T15:14:24.603
> 
> 标签：r, function, loops, time

我想每 60 秒运行一次函数，直到任务完成。

我在集群上运行脚本并每 60 秒检查一次它们是否完成。我已经解析了`qstat`输出，但希望每 60 秒在一个函数中运行一次。

我去：下面的行给了我当前秒的时钟，所以计划是只要它为 0，它就会运行这个函数，但没有太大帮助，因为这个检查将是静态的，一次或者我可以尝试使用`until`喜欢这里的功能，但也找不到

```
as.numeric(paste(tail(unlist(strsplit(gsub("\\D","",(format(Sys.time(),"%X"))),'')),2),collapse=''))==0) 
```

你们认为运行此功能或任何存在的定时功能的最有效方法将是有帮助的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:22:37.987

我会使用 cronjob 并以所需的频率调用 R。我建议使用[littler](http://dirk.eddelbuettel.com/code/littler.html)，它的开销比 Rscript 或 R 都要少，而且启动速度很快。另外，它适用于脚本。

操作系统更擅长调度 R 的（单线程！！）应用程序。

# php - ajax 复选框 php

> ID：12218170
> 
> 赞同：4
> 
> 时间：2012-08-31T15:14:32.080
> 
> 标签：php, ajax, forms, checkbox

我有一个 php-ajax 页面，用户在其中写入**搜索字符串 search.php**，**列表在 getsearch.php 中回显**。**getsearch.php**的结果显示在 search.php 中使用 ajax但每一行都有复选框。

```
getsearch.php 

$q = $_GET["q"];

$sql = "select hobbyid,hobby from hobbies where hobby LIKE '%".$q."%' ";

if($result=mysql_query($sql))
{
    while($row=mysql_fetch_assoc($result))
    { 
         $v = $row['hobbyid'];
         echo $row['hobby'] . '<input type="checkbox" name="hobby[]" value='.$v.'>';
    }
} 
```

您可以在以下代码中看到，每次更改（onkeyup）都会触发此 sql。我保留了一个复选框来获取一系列选定的爱好。这些被选择的值被**传递给 updatehobby.php。**

```
search.php

echo '<form action="updatehobby.php" method="POST">
echo 'Search:<input type="text"  onkeyup="showSearch(this.value)" />
<div id="txtSearch" >HERE THE RESULTS FROM getsearch.php are shown</div>
<input type="submit></form>'; 
```

**因此，当用户编写新的搜索字符串时，列表会发生变化，因此之前的复选框会被取消选中。那么即使搜索发生变化，我如何保留以前的复选框并显示它们？**

**最终经过1天的尝试，我成功地做到了！**

看到用户在 search.php 中输入搜索字符串，查询被传递给 getsearch.php 并从那里回显结果，这个结果显示在 search.php

所以我没有使用复选框，而是插入了一个按钮。所以现在每一行都有一个按钮而不是复选框。

```
<button type="button" onClick="submitform(<?php echo $row['hobbyid']; ?     >);">Add hobby</button> 
```

现在在 search.php 中，我再次使用了另一个处理按钮的 onclick 调用的 ajax 函数（submitform）。当按下按钮添加爱好时，将调用 ajax 函数 submitform 并插入爱好。

**所以基本上我在 search.php 中使用了两个 ajax 函数，一个 ajax 用于搜索和填充结果，另一个用于将其更新到数据库。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:23:48.213

(1) 您可以在搜索请求中发送复选框状态，并在 PHP 代码中设置选中/未选中，并将其包含在您对数据库的请求中，这样就可以了

`"select hobbyid,hobby from hobbies where hobby LIKE '%".$q."%' or hobbyid in(list_of_hobbies_received_in_request) "`

比，在您呈现 HTML 的循环中 - 检查 id 是否在接收到的 id 数组中，并为所需的爱好设置检查状态。

(2) 或者您可以在 javascript 中发送请求之前和响应后记住复选框状态 - 避免删除选定的复选框并检查是否有重复项。但看起来这对于您如何获得搜索结果来说将是一个很大的痛苦。所以，我认为（1）是你需要的。

# eclipse - 导入 com.android.common 无法解析

> ID：12218171
> 
> 赞同：2
> 
> 时间：2012-08-31T15:14:34.313
> 
> 标签：eclipse, debugging, android-source

我正在尝试通过 Eclipse（在 Linux 下）调试 AOSP。但是在构建它时会抛出如下错误：

R无法解析为变量导入android.util.MathUtils无法解析
导入com.android.common无法解析

注意：当我尝试调试示例应用程序时，它工作正常并且没有显示任何错误。

# php - 从数据库中获取热门评论

> ID：12218173
> 
> 赞同：1
> 
> 时间：2012-08-31T15:14:39.120
> 
> 标签：php, mysql

我有一个看起来像这样的数据库：

```
id|text|rating|TimeOfRating 
```

对于描述：如果用户以 5 分中的 4 分对评论进行评分，则评分增加 4 分，TimeOfRating 增加 1 分。

使用 php 如何过滤掉 10 条评价最高的评论？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:16:26.413

这将为您提供平均评分：

```
SELECT
  id,
  text,
  (rating/TimeOfRating) AS score
FROM tablename
ORDER BY score DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:31:44.627

根据您提供的信息，这可以满足您的要求。

```
SELECT id, text, rating, TimeOfRating
FROM
    (SELECT id, text
    CASE
            WHEN rating = 4 THEN rating + 5
            ELSE rating
        END AS rating,
    CASE
            WHEN rating = 4 THEN TimeOfRating + 1
            ELSE TimeOfRating
        END AS TimeOfRating
    FROM pickles) a
ORDER BY rating DESC
LIMIT 10 
```

什么类型的柱子`TimeOfRating`？

# javascript - div上的EXT JS 4 MVC点击事件

> ID：12218176
> 
> 赞同：0
> 
> 时间：2012-08-31T15:15:00.123
> 
> 标签：javascript, extjs, dom-events, extjs-mvc

我想知道是否可以在 EXT JS 4 MVC 应用程序中从控制器中捕获某个 div 上的点击事件。

假设我们有：

```
Ext.define('MyApp.controller.myController', {
extend : 'Ext.app.Controller',
init : function() {
    this.control({
        '#myDiv' : {
                     event: this.myFunction
                     }
    });
}
 myFunction: function() {...} }); 
```

当我单击 myDiv 时，我想调用 myFunction。

# jenkins - Maven 构建在 Jenkins 中中止

> ID：12218184
> 
> 赞同：4
> 
> 时间：2012-08-31T15:15:12.357
> 
> 标签：jenkins, maven-3

我是詹金斯的新手！我设法在 Jenkins 中克隆了 GIT hub repo，现在尝试在 Jenkins 中构建获取的 maven 项目。我从 GITHUB 获取了 7 个项目，它们相互依赖，即一些项目在其 POM 中为其他项目定义了依赖项。

**以下是我的 Maven 配置**（抱歉，无法在此处发布图片，请以粗体显示）

根 POM **myFirstProject/pom.xml**

目标和选项 **清洁包安装**

MAVEN_OPTS

备用设置文件 I

增量构建 - 仅构建更改的模块

禁用自动工件归档

并行构建模块检查

使用私有 Maven 存储库策略本地到工作区

为每个失败的模块发送电子邮件

**检查**Pom 解析期间的解决依赖关系

 **无头奔跑

在 Pom 解析期间处理插件

使用自定义工作区

Maven 验证级别 **DEFAULT**

Maven 设置配置 - 选择 -

Maven 全局设置配置 ¡ - 选择 -

```
 I get following trace when I build this job: 
```

**<===[JENKINS REMOTING CAPACITY]===>channel started 构建单个 Maven 模块还没有为 Maven 3 实现！完成：中止**

我正在使用 Maven 3.3

正如您在列出的配置中看到的那样，我正在为其中一个项目的 POM.xml 提供参考。根据我的理解，jenkins 应该先解析这个 xml 并构建所有依赖的项目。我不确定我的理解是否正确......如果它不正确 - 我期待知道如何继续。我应该按照所需的构建依赖顺序为不同的项目创建不同的作业吗？无能为力从这里走...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T02:59:32.897

JENKINS REMOTING CAPACITY 频道已启动构建单个 Maven 模块尚未针对 Maven 3 实现！已完成：已中止 Jenkins 中的 Maven 3 支持存在错误

我将 jenkins 中的 maven 安装从 3.2 降级到 2.2，它工作得很好！这是已经打开的 JIRA 票证，并从这里得到了提示： [https ://issues.jenkins-ci.org/browse/JENKINS-11964](https://issues.jenkins-ci.org/browse/JENKINS-11964)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:58:12.717

如果您有 7 个相互依赖的项目，那么您应该在 jenkins 中有 7 个不同的作业来构建它们并将它们**安装**在 jenkins 本地 maven 存储库中。通过检查该`Resolve Dependencies during Pom parsing`选项（就像您已经做的那样），Jenkins 将自动解决项目的构建顺序。

这样做可能很无聊，特别是如果您计划添加更多依赖项（但它仍然可能是正确的方法）。

另一种方法是（假设您可以控制 7 个项目存储库/结构/...）创建一个父 maven pom，将它们全部构建在一个中。在这种情况下，您可能会将所有项目移动到一个公共文件夹下（在 jenkins 中只有一个 Git 导入）但如果您不喜欢（或有某些原因）不这样做，您还可以在 jenkins 配置中定义多个存储库.**

# mysql - mysql REPLACE INTO 仅某些字段

> ID：12218185
> 
> 赞同：10
> 
> 时间：2012-08-31T15:15:12.510
> 
> 标签：mysql, replace

我有一个mysql表

```
CREATE TABLE `gfs` (
    `localidad` varchar(20),
    `fecha` datetime,
    `pp` float(8,4) NOT NULL default '0.0000',
    `temp` float(8,4) NOT NULL default '0.0000',
    PRIMARY KEY (`localidad`,`fecha`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

当我尝试用这个更新一个字段时

```
REPLACE INTO gfs(localidad,fecha,pp) VALUES ("some_place","2012-08-05 02:00","1.6") 
```

以前的值 en temp 丢失。为什么 ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-31T15:25:01.027

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T15:18:51.047

因为它是一个`REPLACE`声明而不是一个`UPDATE`. 替换时，您将获得未指定的值作为默认列值。

更新允许您更改先前的值并在没有事先选择的情况下对该值进行操作 ( `SET count = count+1`)。它允许所有先前设置的值保持设置。这就是你想要做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:18:40.097

从[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)：

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

您是否尝试进行[更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)？

# html - 打印页面时隐藏 HTML div

> ID：12218189
> 
> 赞同：8
> 
> 时间：2012-08-31T15:15:26.367
> 
> 标签：html, css, printing, xhtml, stylesheet

我有一个基于 XHTML 的页面，其中包含管理信息。管理员应该能够打印页面，但我希望它隐藏他们的信息。

有没有办法在打印页面时设置打印区域，或者是在单击“打印”按钮时打开没有管理员信息的辅助页面的唯一可行解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-31T15:22:17.880

试试这个：

```
<style type="text/css" media="print">
.dontprint
{ display: none; }
</style>

<div class="dontprint">I'm only visible on the screen</div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-31T15:18:50.773

您可以将该 div 的 CSS 设置为`display: none`使用以下内容：

```
@media print {
    div.do-not-print {display: none;}
} 
```

它会正常显示，但是当你去打印时，它会使用那个 CSS 类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T15:16:57.600

将 print.css 添加到您的页面，您可以在其中隐藏所有不想打印的元素

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

media="print" 属性告诉浏览器使用特定的 css 文件。

在该文件中，您可以拥有

```
.admindetails{
   display:none;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-02T08:39:36.273

当然，您可以添加不同的样式表进行打印，请参见下面的示例

```
<link href="print.css"  rel="stylesheet" type="text/css" media="print" /> 
```

或在退出样式表中，您可以添加媒体查询

```
@media print {
    .no-print {display: none;}
} 
```

并在您不想打印 HTML 元素的地方添加 .no-print 类

# php - 为什么我的容器 while 循环只循环第一项？

> ID：12218191
> 
> 赞同：0
> 
> 时间：2012-08-31T15:15:29.710
> 
> 标签：php, mysql

```
// current session id
$sid = session_id();

// get current cart session
$sql = "SELECT * FROM tbl_cart WHERE ct_session_id =  '$sid'";
$result = dbQuery($sql);

// get all the items in the car category
$query = "SELECT pd_id FROM tbl_product WHERE cat_id ='28'";
$r = dbQuery($query);

//Cycle through the cart and compare each cart item to the cars to determine
  if the cart contains a car in it.
         while($cart = dbFetchAssoc($result)){
    while($product = dbFetchAssoc($r)){
        echo $cart['pd_id'] . " - ";
        echo $product['pd_id']. "<br>";
    }
} 
```

dbFetchAssoc() 是一个自定义数据库层，基本上是 (mysql_fetch_assoc)。

我试图从查询中获取行并使用该信息进行比较。上面带有 echo 语句的代码只是为了调试目的而回显。while 循环在嵌套循环之后退出是否有特殊原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:17:53.333

是的。您需要再次运行查询，因为每次调用时`dbFetchAssoc($r)`您都在推进该光标。

```
$sql = "SELECT * FROM tbl_cart WHERE ct_session_id =  '$sid'";
$result = dbQuery($sql);

// get all the items in the car category
$query = "SELECT pd_id FROM tbl_product WHERE cat_id ='28'";

while($cart = dbFetchAssoc($result)){
    $r = dbQuery($query);
    while($product = dbFetchAssoc($r)){
        echo $cart['pd_id'] . " - ";
        echo $product['pd_id']. "<br>";
    }
} 
```

这是一个优化版本，它对数据库的影响不大。但是，它特定于这个特定的问题，如果查询集特别大，这将是一个同样糟糕的选择——它遇到了内存问题而不是速度问题。

```
$sql = "SELECT * FROM tbl_cart WHERE ct_session_id =  '$sid'";
$result = dbQuery($sql);

// get all the items in the car category
$query = "SELECT pd_id FROM tbl_product WHERE cat_id ='28'";
$r = dbQuery($query);

// cache the product results into an array
$products = Array();
while($product = dbFetchAssoc($r)){
    $products[] = $product['pd_id']
}

while($cart = dbFetchAssoc($result)){
    $index = 0;
    while($product = dbFetchAssoc($r)){
        echo $cart['pd_id'] . " - ";
        echo $product[$index]. "<br>";
        $index++;
    }
} 
```

我还没有测试过第二个代码，但是这个想法应该足够清楚了。

# php - PHP mysqli 多查询+事务

> ID：12218192
> 
> 赞同：2
> 
> 时间：2012-08-31T15:15:35.037
> 
> 标签：php, mysql, transactions, mysqli

我有以下代码：

```
...
$mysqli->autocommit(FALSE);

if(in_array('files',$item)){
            $sql_el_truncate = "
                TRUNCATE TABLE `article_files`;
                TRUNCATE TABLE `files`;
                TRUNCATE TABLE `gallery_files`;
                TRUNCATE TABLE `image_captions`;
            ";

            $mysqli->multi_query($sql_el_truncate);

            do{ 
                $mysqli->use_result(); 
            }while ($mysqli->next_result()); 

            if ($mysqli->errno) { 
                $valid_entry = 0;
            } 
            echo $valid_entry;
        }

if( $valid_entry){
            $mysqli->commit();
        }else{
            $mysqli->rollback();
        }

... 
```

出错时，我得到一个正确的`$valid_entry`值 0，但回滚不起作用。即使我故意错误地编写了一些 TRUNCATE 命令，它仍然会运行其余命令，给我错误但它不会回滚。

任何人都知道我怎样才能正确使用交易`mysqli`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:22:48.837

来自[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.5/en/index.html)（[`TRUNCATE TABLE`](http://dev.mysql.com/doc/refman/5.5/en/truncate-table.html)重点是我的）：

> 从逻辑上讲，TRUNCATE TABLE 类似于删除所有行的 DELETE 语句，或一系列 DROP TABLE 和 CREATE TABLE 语句。为了达到高性能，它绕过了删除数据的 DML 方法。因此，**它不能回滚**，它不会导致 ON DELETE 触发器触发，并且不能对具有父子外键关系的 InnoDB 表执行。

如果你想能够，`ROLLBACK`你将不得不使用`DELETE`语句。他们在这里效率较低，但应该给你想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:27:51.940

在我看来，那些 TRUNCATE 命令会导致隐式提交：

[http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html](http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html)

# c++ - ShellExecute 访问打开的文件夹

> ID：12218195
> 
> 赞同：1
> 
> 时间：2012-08-31T15:15:39.997
> 
> 标签：c++, windows, winapi, shellexecute

我`ShellExecute(NULL, L"open", szSomeDirectory, 0, 0, SW_SHOWDEFAULT)`用来在资源管理器中打开一个目录。

我正在尝试打开一个通常会提示我的目录，`You currently do not have permission to access this folder.`并为我提供访问权限并显示 UAC 提示的选项。

当我执行 ShellExecute 时，资源管理器给了我一条错误消息，说`Access Denied`.

我的程序以管理员权限运行，但这似乎无关紧要。

如何获得打开此文件夹的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:26:51.427

弄清楚了。

我的用户帐户无权访问该文件。

我的解决方案是使用`AccessCheck`before`ShellExecute`查看是否可以访问该文件，如果无法访问，请使用`SetNamedSecurityInfo`为具有完全访问权限的登录用户帐户添加 ACE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:05:48.497

您可以在程序的链接器清单中设置 UAC 级别。

看看这个：[奇怪的文件权限，如果应用程序以管理员身份运行](https://stackoverflow.com/questions/5605017/strange-file-permissions-if-apps-run-as-administrator)

# asp.net-mvc - 使用 Facebook 和 Twitter 登录 ASP.NET Web API

> ID：12218199
> 
> 赞同：4
> 
> 时间：2012-08-31T15:15:44.447
> 
> 标签：asp.net-mvc, facebook, twitter, asp.net-mvc-4, asp.net-web-api

我将深入研究 ASP.NET Web API 并想知道是否有一种简单的方法可以让我的用户使用 Facebook 和 Twitter 登录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:32:47.663

随着 Visual Studio 2012 和 .NEt 4.5 的新版本，Microsoft 已全面使用 OAuth/OpenID。

[有关如何支持 Facebook、Twitter 和 Google 帐户的示例](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx) 文章（底部还有 3 篇博客文章链接）。

这是来自 S. Hanselmann[的一段甜蜜的小视频。](http://www.asp.net/vnext/overview/videos/oauth-in-the-default-aspnet-45-templates)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T16:22:36.377

一定要看看**[DotNetOpenAuth](http://www.dotnetopenauth.net/)**。它是一个支持 OpenID、OAuth v1/v2 和 InfoCards 的 .Net 开源库。网站上以及各种博客（例如**[这个](http://jgb146.blogspot.com/2012/02/dotnetopenauth-twitter.html)**）中都有一些不错的文档和示例代码，它们应该可以让您找到正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:25:39.427

至于 Facebook：他们有很多关于使用 Facebook 帐户实现登录的文档。Facebook 登录：[https ://developers.facebook.com/docs/guides/web/#login](https://developers.facebook.com/docs/guides/web/#login)

他们也有一个 JavaScript SDK：（由于声誉限制，无法添加链接，但请查看 SDK 参考链接）

最后，您还可以尝试 .net 的 3rd 方 API。有几个。这是一个：[http ://www.datasprings.com/resources/articles-information/developing-with-facebook-api-sdk-w-asp.net](http://www.datasprings.com/resources/articles-information/developing-with-facebook-api-sdk-w-asp.net)

我没试过，但它是开源的，所以如果你不想使用它，你可以检查代码并学习如何自己实现它。

# objective-c - 如何将 NSNumber 转换为 ObjC 中的字节？

> ID：12218200
> 
> 赞同：1
> 
> 时间：2012-08-31T15:15:50.750
> 
> 标签：objective-c, encoding, nsnumber

我想获取 NSNumber 的字节值，以便将其转换为 NSData 对象。我需要通过 TCP 连接将它作为字节发送，所以我不能将它编码为 UTF8 或其他任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:26:24.363

```
int integer = [num intValue];
NSData *data = [NSData dataWithBytes:&integer length:sizeof(integer)]; 
```

# javascript - 克隆 HTML 文档并生成字符串表示时，不会复制原始文档中的 CSS 样式规则

> ID：12218202
> 
> 赞同：2
> 
> 时间：2012-08-31T15:16:01.983
> 
> 标签：javascript, html, css

我正在尝试生成 HTML 文档的字符串表示形式，以便可以将其发送到另一个服务，该服务将生成当前文档的克隆版本以用于打印目的。

原始 HTML 文档需要使用 Javascript 添加一些样式：

```
// create the style node
var $style = $("<style type='text/css' rel='stylesheet' />").appendTo($("head"));

// create the style rule
var rules = [];
rules.push(".bluecolor {  }");
if ($style[0].styleSheet) { // IE
    $style[0].styleSheet.cssText = rules.join(" ");
} else {
    $style[0].appendChild(document.createTextNode(rules.join(" ")));
}

// later on in the code...

// set the style rule's color to blue
var sheets = document.styleSheets;
for (var i = 0; i < sheets.length; i++) {
    if ((sheets[i].ownerNode || sheets[i].owningElement) == $style[0]) {
        var stylesheet = sheets[i];
        var cssRules =  (stylesheet.cssRules || stylesheet.rules);
        for (var i = 0; i < cssRules.length; i++) {
            if (matches = /\.bluecolor/.exec(cssRules[i].selectorText)) {
                cssRules[i].style.color = "blue";
                cssRules[i].style.width = "10px";
            }
        }
        break;
    }
} 
```

但是，当我去克隆对象时，克隆的版本在 bluecolor 样式规则中没有 color:blue 或 width: 10px 属性：

```
var clonedDocument = document.getElementsByTagName('html')[0].cloneNode(true); 
```

我认为这与通过 Javascript 修改规则时原始文档上的样式节点在 Chrome/Firefox 中没有更新这一事实有关。但在 IE 中并非如此。（这是 Chrome 错误吗？）这是演示该问题的示例代码：http: [//jsfiddle.net/T4aCC/29/](http://jsfiddle.net/T4aCC/29/)

我的最终目标是生成原始文档的字符串表示形式（在 Chrome 中）。但是，我无法通过 cloneNode 执行此操作和/或我通过 Javascript 更新 CSS 样式的方式不正确。有什么建议么？

# jquery - 使用 jquery 进行日期验证，防止输入今天的日期。

> ID：12218203
> 
> 赞同：0
> 
> 时间：2012-08-31T15:16:08.577
> 
> 标签：jquery, validation, date

我正在尝试验证日期输入字段。我可以阻止 jquery datepicker 以防止使用输入旧日期，

```
 $('#delivery_date').datePicker({ minDate: 0 }); 
```

但用户仍然可以手动输入日期。如何防止或验证这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:21:50.933

```
// when the field changes value
$('#delivery_date').on('change',function(){
    var today = new Date();
    today = new Date(today.getYear(), today.getMonth(), today.getDate());
    // compare the value of the field with whatever you want to test against
    if($(this).val() > today){
         // if the test fails, change the value to default
         $(this).datepicker('setDate', new Date());
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:18:47.717

```
$('#delivery_date').on('change', function(){ 
    var today = new Date();
    if(new Date($(this).val()) < new Date(today.getYear(), today.getMonth() - 1, today.getDate()) $(this).datepicker('setDate', new Date());
}); 
```

# autofixture - 如何冻结 AutoFixture 中的空实例

> ID：12218206
> 
> 赞同：8
> 
> 时间：2012-08-31T15:16:10.467
> 
> 标签：autofixture

我将 Autofixture 用作 SUT 工厂，并且在冻结空实例时遇到了困难。

我想做类似的事情：

```
_fixture.Freeze<IPayPalConfiguration>(c => null); 
```

但很快意识到这是错误的。我已经使用这个解决了这个问题：

```
_fixture.Inject((IMyInterface)null); 
```

但这似乎不对。

希望有人会为 HiveMind 提供正确的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:37:22.883

在内部，`Freeze`创建一个请求类型的实例（例如`IPayPalConfiguration`），然后*注入*它，这样当您再次请求它时它总是会返回该实例。

在这种特殊情况下，`_fixture.Inject((IPayPalConfiguration)null)`您可以手动注入空引用，这样您就可以跳过`Freeze`方法的创建部分。您以手动方式将其*冻结*为`IPayPalConfiguration`单个值（实际上，此处为空引用）。

请记住，这将为尝试解析的*方法*`_fixture.Freeze<IPayPalConfiguration>(c => null)`传递一个空引用，因此会引发 ArgumentNullException。*`IPayPalConfiguration`*

# php - 无法在 PHP 中解压缩文件

> ID：12218212
> 
> 赞同：0
> 
> 时间：2012-08-31T15:16:36.490
> 
> 标签：php, zip

在过去的一个小时里，我一直在搜索、添加和失败如何解压缩文件。我经常使用 php 下载 zip。我需要将 zip 的内容提取到一个名为 zips 的文件夹中，这并不重要（只是不是同一个目录）。如果这有什么不同的话，我正在使用具有无限空间和带宽的共享主机。

我下载的 zip 是 1 个 zip，里面有 5 个 zip，这 5 个 zip 中的每一个都有 1 个 csv。我需要读取每个 csv 并将信息存储到数据库中，我已经有了代码，但我无法打开任何 zip 文件。

我已经尝试了以下代码，但我对其中任何一个都没有运气。我也尝试了 php.net 上的解压缩功能，但也没有运气。

有什么建议么？

```
$local_file = '_08222012_213000.zip';
$zip = zip_open($local_file);
if (is_resource($zip)) {
  while ($zip_entry = zip_read($zip)) {
    $fp = fopen(zip_entry_name($zip_entry), "w");
    if (zip_entry_open($zip, $zip_entry, "r")) {
      $buf = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));
      fwrite($fp,"$buf");
      zip_entry_close($zip_entry);
      fclose($fp);
    }
  }
  zip_close($zip);
} 
```

这个也不起作用：

```
$zip = new ZipArchive;
$res = $zip->open($local_file);
if ($res === TRUE) {
    $zip->extractTo('zips/');
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
}
} 
```

编辑：如果将来有其他人遇到问题，我可以使用此代码。

```
//Change directory
chdir("zips/");
exec("unzip ./$local_file"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:25:22.283

您的 PHP 安装中似乎没有安装 zip 支持。如果您使用的是 Windows，PHP 应该附带 DLL（据我所知），您应该在 PHP.ini 文件中通过找到与它对应的 extensions= 行来启用它。

如果您使用的是 Linux，则根据您的发行版，您可以通过包管理器安装该扩展。或者通过这样做：

```
sudo pecl install zip 
```

有关如何安装它的更多信息，请参阅[http://www.php.net/manual/en/zip.installation.php](http://www.php.net/manual/en/zip.installation.php)。

我的另一个建议是确保文件的权限使得 PHP 进程（通常作为网络服务器进程运行）可以访问该文件。还要确保网络服务器可以访问该路径，IE 在 public_html 目录中（将 PHP chroot 到 webroot 目录被认为是共享主机的最佳实践）。

# python - 在 Google App Engine 上拒绝不同域的用户订阅

> ID：12218216
> 
> 赞同：1
> 
> 时间：2012-08-31T15:16:46.483
> 
> 标签：python, google-app-engine, xmpp, chat, subscription

我正在 GAE（谷歌应用引擎）上开发一个应用程序。这个应用程序是一个聊天机器人，用户可以使用它来访问一些资源。问题是我不希望任何知道应用程序 ID 的用户可以将该聊天机器人添加到他们的联系人中，因为它管理私人信息，所以我只想限制我的域帐户的访问。我阅读了 GAE 文档并找到了这个（https://developers.google.com/appengine/docs/python/xmpp/overview#Handling_Subscriptions），但我真的不知道如何应用它。我做了这样的事情：

```
class SuscribeHandler(webapp.RequestHandler):
  def post(self):
    sender = self.request.get('from').split('/')[0]
    domain = sender.split("@")[1]
    if domain == "mydomain.com":
      #Add contact code goes here

app = webapp.WSGIApplication([
  ('/_ah/xmpp/subscription/subscribe/', SuscribeHandler),
  ], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T20:42:31.547

您无法阻止用户将您的机器人添加到名册中。根据 XMPP 文档：

> App Engine 接受所有聊天邀请并自动注册订阅，如处理订阅部分所述。App Engine 将所有聊天消息路由到应用程序，无论发件人之前是否向应用程序发送过邀请。

您应该拒绝回复来自未经授权使用您的应用程序的用户的消息。

# mysql-python - 在 osx 10.8 上安装 mysql-python 时找不到“my_config.h”文件

> ID：12218229
> 
> 赞同：51
> 
> 时间：2012-08-31T15:17:44.950
> 
> 标签：mysql-python

当我想在 osx 10.8 上安装 mysql-python 时遇到这个问题，它显示找不到“my_config.h”文件的错误。

下面是我的运行代码：

```
sudo easy_install mysql-python
Password:
Searching for mysql-python
Reading http://pypi.python.org/simple/mysql-python/
Reading http://sourceforge.net/projects/mysql-python/
Reading http://sourceforge.net/projects/mysql-python
Best match: MySQL-python 1.2.3
Downloading http://pypi.python.org/packages/source/M/MySQL-python/MySQL-python-1.2.3.tar.gz#md5=215eddb6d853f6f4be5b4afc4154292f
Processing MySQL-python-1.2.3.tar.gz
Running MySQL-python-1.2.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-UoZlf7/MySQL-python-1.2.3/egg-dist-tmp-phaQqE
warning: no files found matching 'MANIFEST'
warning: no files found matching 'ChangeLog'
warning: no files found matching 'GPL'
clang: warning: argument unused during compilation: '-mno-fused-madd'
_mysql.c:36:10: fatal error: 'my_config.h' file not found
#include "my_config.h"
         ^
1 error generated.
error: Setup script exited with error: command 'clang' failed with exit status 1
ninjaiimac:MySQL-python-1.2.3 sunninjaisun$ 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2018-07-23T16:59:30.360

```
brew install mysql
brew unlink mysql
brew install mysql-connector-c
sed -i -e 's/libs="$libs -l "/libs="$libs -lmysqlclient -lssl -lcrypto"/g' /usr/local/bin/mysql_config
pip install MySQL-python
brew unlink mysql-connector-c
brew link --overwrite mysql 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2018-08-07T14:49:55.247

在 macOS High Sierra 上运行良好：

如果你还没有安装 mysql：`brew install mysql`

```
brew unlink mysql
brew install mysql-connector-c
brew link --overwrite mysql
pip install MySQL-python 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-05-11T08:20:16.533

请试试：

```
brew install mysql-connector-c 
pip install MySQL-python 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-01-07T17:28:03.467

我曾经`brew`在 Mac OS 10.14.2 上安装所有东西。

`virtualenv`当在 Mojave 上的虚拟环境 () 中时，其他答案对我不起作用。我按照 Jofsey 的指示进行操作，但出现错误：

```
#        define SIZEOF_LONG             4
                    ^
    In file included from _mysql.c:44:
    /usr/local/include/my_config.h:179:9: warning: 'SIZEOF_TIME_T' macro redefined [-Wmacro-redefined]
    #define SIZEOF_TIME_T    8
            ^
    /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/pymacconfig.h:57:17: note: previous definition is here
    #        define SIZEOF_TIME_T           4
                    ^
    2 warnings generated.
    _mysql.c:287:14: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                    cmd_argc = PySequence_Size(cmd_args);
                             ~ ^~~~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:317:12: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                    groupc = PySequence_Size(groups);
                           ~ ^~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:470:14: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                            int j, n2=PySequence_Size(fun);
                                   ~~ ^~~~~~~~~~~~~~~~~~~~
    _mysql.c:1127:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                    len = mysql_real_escape_string(&(self->connection), out, in, size);
                        ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:1129:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                    len = mysql_escape_string(out, in, size);
                        ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:1168:9: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
            size = PyString_GET_SIZE(s);
                 ~ ^~~~~~~~~~~~~~~~~~~~
    /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/stringobject.h:92:32: note: expanded from macro 'PyString_GET_SIZE'
    #define PyString_GET_SIZE(op)  Py_SIZE(op)
                                   ^~~~~~~~~~~
    /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/object.h:116:56: note: expanded from macro 'Py_SIZE'
    #define Py_SIZE(ob)             (((PyVarObject*)(ob))->ob_size)
                                     ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
    _mysql.c:1178:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                    len = mysql_real_escape_string(&(self->connection), out+1, in, size);
                        ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:1180:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                    len = mysql_escape_string(out+1, in, size);
                        ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    _mysql.c:1274:11: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
            if ((n = PyObject_Length(o)) == -1) goto error;
                   ~ ^~~~~~~~~~~~~~~~~~
    /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/abstract.h:434:25: note: expanded from macro 'PyObject_Length'
    #define PyObject_Length PyObject_Size
                            ^
    _mysql.c:1466:10: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                            len = strlen(buf);
                                ~ ^~~~~~~~~~~
    _mysql.c:1468:10: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                            len = strlen(buf);
                                ~ ^~~~~~~~~~~
    _mysql.c:1504:11: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                                    len = strlen(buf);
                                        ~ ^~~~~~~~~~~
    _mysql.c:1506:11: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                                    len = strlen(buf);
                                        ~ ^~~~~~~~~~~
    13 warnings generated.
    cc -bundle -undefined dynamic_lookup -Wl,-F. build/temp.macosx-10.14-intel-2.7/_mysql.o -L/usr/local/Cellar/mysql-connector-c/6.1.11/lib -lmysqlclient -lssl -lcrypto -o build/lib.macosx-10.14-intel-2.7/_mysql.so
    ld: library not found for -lssl
    clang: error: linker command failed with exit code 1 (use -v to see invocation)
    error: command 'cc' failed with exit status 1 
```

因此，在我运行了这些命令之后，我将其作为最终命令运行并且它起作用了：

```
sudo pip install MySQL-Python --global-option=build_ext --global-option="-I/usr/local/opt/openssl/include" --global-option="-L/usr/local/opt/openssl/lib" 
```

**编辑：**

我在[GitHub 上](https://github.com/brianmario/mysql2/issues/795#issuecomment-337006164)找到的另一个解决方案，假设您已经运行`brew install openssl`（这避免了对 CLI 参数的需要，并将防止未来的 SSL 库错误）：

```
export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/opt/openssl/lib/ 
```

您可以将上述内容放入您的`~/.bash_profile`文件中然后运行`source ~/.bash_profile`，或者如果它是虚拟环境，您可以找到一种方法在虚拟环境 shell 中运行导出并使用 . 检查虚拟环境 CLI 中的值`echo $LIBRARY_PATH`。`$LIBRARY_PATH`设置后，您将不会继续看到这些 SSL 库错误。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-09-02T03:14:09.147

我的问题是我使用的是 MAMP 的 mysql 版本，它不包含开发标头。我下载了官方版本的 dmg 并立即运行。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-05-14T14:43:17.857

我检查了`include`这两个文件夹`mysql`并由`mysql-connector-c`自制软件安装，并惊讶地发现没有名为`my_config.h`. 因此，我认为现有的高票答案不再能解决问题。

这是我的解决方案`mysql 8.0.19`。我复制了我安装的文件夹`mysql.h`下的文件并将其保存在同一文件夹下。然后我按照下面的高票解决方案并成功安装。`include/``mysql-connector-c``my_config.h``mysql-python 1.2.5`

```
brew install mysql
brew unlink mysql
brew install mysql-connector-c   # modify the include/ folder after installing the package
sed -i -e 's/libs="$libs -l "/libs="$libs -lmysqlclient -lssl -lcrypto"/g' /usr/local/Cellar/mysql/8.0.19/bin/mysql_config
pip install MySQL-python
brew unlink mysql-connector-c
brew link --overwrite mysql 
```

目前只知道可以成功安装包，但不确定是否是安全的解决方案。

实际上，`mysql-python`是一个相当老的包（最新版本是 6 年前），我推荐其他包用于在 python 中与 mysql 交互（例如`mysql-connector-python`）。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-01-27T08:32:49.330

在 macos 上，我按照[gethue](https://gethue.com/start-developing-hue-on-a-mac-in-a-few-minutes/)的安装说明进行操作。[然后我从Oracle](https://dev.mysql.com/doc/dev/mysql-server/8.0.26/my__config_8h_source.html)下载了 my_config.h ，将文件放在 /usr/local/include 中，安装就可以继续了。但停在一个不相关的丢失文件上。

Oracle 的链接已更新为更新版本的 MySQL 8.0.26。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-12-10T11:58:01.287

这在 macOS Catalina 10.15.7 和 python 2.7 上对我有用

```
brew install mysql@5.7
brew link --force mysql@5.7
PATH="/usr/local/opt/mysql@5.7/bin:$PATH" LDFLAGS="-L/usr/local/Cellar/mysql@5.7/5.7.29/lib -L/usr/local/Cellar/openssl@1.1/1.1.1d/lib" CPPFLAGS="-I/usr/local/Cellar/mysql@5.7/5.7.29/include -I/usr/local/Cellar/openssl@1.1/1.1.1d/include" pip install mysql-python 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-14T07:56:41.813

我从答案一路尝试，这对我不起作用。

1.  只需从 [https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/)下载 mysql 并安装在您的 Mac 中。**不使用** `brew install mysql`

2.  安装 MySQL-python

    ```
    pip install MySQL-python 
    ```

做的每一件事

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-11-22T13:13:08.560

2020 年 11 月，**Catalina 10.15.7**和**Python 2.7.16**对我有用的是两个答案的组合：

第 1 步：[https ://stackoverflow.com/a/61800247/14686220](https://stackoverflow.com/a/61800247/14686220)

但是，我没有像在目录中那样简单地复制`mysql.h`文件（这可能很危险），而是从[官方 MySQL 文档中复制了文件](https://dev.mysql.com/doc/dev/mysql-server/8.0.11/my__config_8h_source.html)`my_config.h``include/``my_config.h`

第 2 步：[https ://stackoverflow.com/a/54079052/14686220](https://stackoverflow.com/a/54079052/14686220)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-14T15:45:25.817

如前所述，您需要 MySQL 的 dev 标头，默认情况下 MAMP 不附带这些标头。可以将标头添加到 MAMP 版本，而不是使用两个 MySQL 实例。这里有很好的说明：http: [//dreamconception.com/tech/how-to-install-mysqldb-mysql-python-on-mamp/](http://dreamconception.com/tech/how-to-install-mysqldb-mysql-python-on-mamp/)

确保不要只是复制粘贴所有命令，它们有点过时，因此您需要更改其中一些命令的版本号。

我正在使用 OS X 10.9 和 python 2.7，一切正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-30T22:03:17.117

在 macOS 10.15 上，只要您的项目与 PyMySQL 1.3.11 或更高版本兼容，以下似乎可以解决此问题：

```
brew install mariadb-connector-c
pip install MySQL-python 
```

参考：[https ://github.com/PyMySQL/mysqlclient-python/blob/master/HISTORY.rst](https://github.com/PyMySQL/mysqlclient-python/blob/master/HISTORY.rst)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-16T11:35:31.390

在 macOS Catalina 10.15.5 上使用`conda`而不是`pip`为我解决了这个问题

```
conda install mysql-python 
```

# ruby - Lambda 作为 Ruby 中的参数

> ID：12218230
> 
> 赞同：0
> 
> 时间：2012-08-31T15:17:48.970
> 
> 标签：ruby, ruby-on-rails-3.2

我需要创建一个可以这样调用的方法

```
list_of_hash_values = MyModel.values_and_links :title, "some_query_param", lambda{|id| url_for :controller => :my_model, :action => :show, :id=> id } 
```

它有 3 个参数：字段名称（作为符号）、查询参数和带有一个参数的 lambda。它返回值的哈希值及其 url。Lambda 返回一些字符串值（在这种情况下，它是模型实例的 ulr）。

我试着做：

```
class MyModel

 def values_and_links(title, query_param, lambda_exp)

   instance_values = MyModel.order(:title).where("#{title} = ?", "%#{query_param}%")
   instance_values.each do |item|
      {:hash_key1 => item.send(title), :hash_key2 => lambda_exp.call(title)} 
   end

 end
end 
```

这是错误的，不起作用。

我希望你明白我需要完成什么。我该怎么做？我怎样才能实现方法`values_and_links`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:28:53.337

我会改用一个块：

```
class MyModel
 def values_and_links(title, query_param)
   instance_values = MyModel.order(:title).where("#{title} = ?", "%#{query_param}%")
   instance_values.each do |item|
      {:hash_key1 => item.send(title), :hash_key2 => yield(title)} 
   end
 end
end 
```

然后，您可以像这样调用您的方法：

```
list_of_hash_values = MyModel.values_and_links :title, "some_query_param" do |id|
  url_for :controller => :my_model, :action => :show, :id=> id
end 
```

或者，对于“短”：

```
list_of_hash_values = MyModel.values_and_links :title, "some_query_param" {|id| url_for :controller => :my_model, :action => :show, :id=> id} 
```

# ios - iOS 谷歌地图的方向？

> ID：12218249
> 
> 赞同：0
> 
> 时间：2012-08-31T15:18:24.307
> 
> 标签：ios, xcode, google-maps, routes, directions

如何在 iOS 谷歌地图中进行如下指示？

![在此处输入图像描述](../Images/2a7b96edbd156ea1bfbaaf3bcf9cf47c.png)

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:25:04.523

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T11:20:29.473

据我了解，您想要两个地方之间的方向

你需要他的 Google Direction API

*`NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=false&mode=driving",getPickUpCoordinate.latitude ,getPickUpCoordinate.longitude, center.latitude, center.longitude]]; NSURLRequest *request = [NSURLRequest requestWithURL:url]; NSURLResponse *response = nil; NSError *error = nil; NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; if (!error) { NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:&error];`*

# ios - CGContextDrawImage 相机应用程序崩溃

> ID：12218255
> 
> 赞同：0
> 
> 时间：2012-08-31T15:18:42.090
> 
> 标签：ios, memory, crash, avcapturesession

我正在尝试使用 AVCaptureSession 获取图像。我遵循了本教程[http://www.benjaminloulier.com/posts/2-ios4-and-direct-access-to-the-camera](http://www.benjaminloulier.com/posts/2-ios4-and-direct-access-to-the-camera)。我正在从图像参考创建 uiimage，然后从该 uiimage 获取像素。但应用程序在一段时间后（不到 30 秒）崩溃。我尝试使用 Leaks 进行分析，但它也崩溃了。使用日志我发现应用程序在 CGContextDrawImage(context, rect, image1.CGImage); 行之前崩溃。你们对我可能做错的事情有什么建议吗？我还在应用程序崩溃前几秒钟看到内存分配错误。请帮忙。

代码贴在下面..

```
// Create a UIImage from sample buffer data

- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{
lock = @"YES";

 CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 

// Lock the base address of the pixel buffer
CVPixelBufferLockBaseAddress(imageBuffer, 0); 

// Get the number of bytes per row for the pixel buffer
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer); 

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer); 

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

size_t bufferSize = CVPixelBufferGetDataSize(imageBuffer);

// Create a Quartz direct-access data provider that uses data we supply.
NSData *data = [NSData dataWithBytes:baseAddress length:bufferSize];

CGDataProviderRef dataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

CGImageRef quartzImage = CGImageCreate(width, height, 8, 32, bytesPerRow,
              colorSpace, kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little,
              dataProvider, NULL, true, kCGRenderingIntentDefault);

CGDataProviderRelease(dataProvider);

// Unlock the pixel buffer

CGColorSpaceRelease(colorSpace);

// Create an image object from the Quartz image
UIImage *image = [UIImage imageWithCGImage:quartzImage];

// Release the Quartz image
CGImageRelease(quartzImage);

CVPixelBufferUnlockBaseAddress(imageBuffer,0);
baseAddress = nil;
[data  release];
lock = @"NO";
return(image);
}

-(void)calculate
{
@try {

        UIImage *image1 = [self stillImage];   //Capture an image from the camera.
        //Extract the pixels from the camera image.

        CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();

        size_t bytesPerRow = image1.size.width*4;
        unsigned char* bitmapData = (unsigned char*)malloc(bytesPerRow*image1.size.height);

        CGContextRef context = CGBitmapContextCreate(bitmapData, image1.size.width, image1.size.height, 8, bytesPerRow,colourSpace,kCGImageAlphaPremultipliedFirst|kCGBitmapByteOrder32Big);

        CGColorSpaceRelease(colourSpace);

        CGContextDrawImage(context, rect, image1.CGImage);

        unsigned char* pixels = (unsigned char*)CGBitmapContextGetData(context);

        totalLuminance = 0.0;
        for(int p=0; p<image1.size.width*image1.size.height*4; p+=4)
        {
            totalLuminance += pixels[p]*0.3 + pixels[p+1]*0.59 + pixels[p+2]*0.11;
        }

        totalLuminance /= (image1.size.height * image1.size.width);                   

        pixels = nil;

        bitmapData = nil;

        [image1 release];

    CGContextRelease(context);
        //image1 = nil;

        //totalLuminance = [n floatValue];                   //Calculate the total luminance.
        float f = [del.camcont.slider value];
        float total = totalLuminance * f;
        NSString *ns = [NSString stringWithFormat:@"Lux : %0.2f", total];
        NSLog(@"slider = %f",f);
        NSLog(@"totlaluminance = %f",totalLuminance);
        NSLog(@"%@",ns);
        //NSString *ns = [NSString initWithFormat:@"Lux : %0.2f", total];
        [del.camcont.lux setText:ns];//Display the total luminance.

        self.stillImage = nil;
        //[self.stillImage release];
         ns = nil;
        //n = nil;
        //del = nil;
    }

    @catch (NSException *exception) {
        NSLog(@"main: Caught %@: %@", [exception name], [exception reason]);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:21:27.203

我不清楚你为什么要先创建 a 然后`CMSampleBufferRef`再创建 a然后`CGImageRef`再`UIImage`取出数据然后将其推入指针中（本质上，指针指向的字节与首先）。`UIImage``CGImageRef``unsigned char``CMSampleBufferRef`

如果您执行以下操作，您将简化您的生活（并且您应该会发现它更容易调试）：

```
CVPixelBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
CVPixelBufferLockBaseAddress(imageBuffer,0);
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer); 
uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
uint8_t *pixels = malloc(bytesPerRow*height);
memcpy(pixels, baseAddress, bytesPerRow*height);
baseAddress = nil;
imageBuffer = nil;
sampleBuffer = nil;
float totalLuminance = 0.0;
for(int r=0; r<height; r++)
{
   for(int p=0, p<width, p+=4)
   {
      totalLuminance += pixels[p+(r*bytesPerRow)]*0.3 
                     + pixels[p+1+(r*bytesPerRow)]*0.59 
                     + pixels[p+2+(r*bytesPerRow)]*0.11;
   {
}
free(pixels);
totalLuminance /= (width * height); 
```

（嵌套`for`循环是为了补偿由于填充而`bytesPerRow`不能假定与 相同的事实。）`width*4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:33:43.050

内存管理乍一看还不错。作为一种解决方法，您可以考虑 UIImage [-imageWithData:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithData%3a) 以防自定义 CGImageCreate 代码出现问题。这是因为无论如何您都在使用 CGImage 创建 UIImage 。

# vba - 在事务内部的 Access 中执行 UPDATE SQL 时超出系统资源

> ID：12218256
> 
> 赞同：2
> 
> 时间：2012-08-31T15:18:42.230
> 
> 标签：vba, transactions, ms-access-2010

我在`UPDATE tblTable SET DataSet=3`事务中执行了一个简单的操作，但是在尝试运行它几秒钟后，我得到一个 3035 - 超出系统资源。大约有 30K 行。

```
Dim db As DAO.Database, wrk As DAO.Workspace, errCount As Long, stSQL As String

Set db = CurrentDb
Set wrk = DBEngine.Workspaces(0)
errCount = 0
wrk.BeginTrans
    Debug.Print "There are no existing entries in the selected DataSet, preparing to proceed..."
    ' - -- ---
    stSQL = "UPDATE tblImportCleaned SET DataSetID=" & Me.lstDataSets
    db.Execute stSQL, dbSeeChanges
    If db.RecordsAffected < 1 Then errCount = errCount + 1
    Me.frmImport_CleanedSubform.Requery
    ' - -- ---

If errCount = 0 Then
    If MsgBox("There were no errors, would you like to COMMIT the changes?", vbYesNo) = vbYes Then
        wrk.CommitTrans
    Else
        wrk.Rollback
    End If
Else
    wrk.Rollback
End If
wrk.Close 
```

请知道为什么会发生这种情况以及如何避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:34:29.730

似乎您正在更新整个表格，即没有 where 条件，您确定要更新整个表格吗？如果您在循环中更新整个表格（我在您的代码中看不到循环，您仍然可能会调用它循环中的过程）系统很可能会出现此错误。

# php - ASP 到 PHP MS SQL 连接错误

> ID：12218265
> 
> 赞同：0
> 
> 时间：2012-08-31T15:19:04.663
> 
> 标签：php, sql-server, asp-classic, database-connection

所以我目前正在经历将很多项目从旧的 asp (VBScript) 迁移到 PHP5 的过程。

该项目必须连接到远程 MS SQL DB。

旧的 ASP 连接字符串是：

```
<%
 Set MyConn = Server.CreateObject("ADODB.Connection")
MyConn.Open "driver={SQL      
Server};server=**.***.***.***;UID=username;PASSWORD=password;DATABASE=DBname"
session.lcid=2057
%> 
```

我的新 PHP 连接字符串是：

```
<?

$myServer = "**.***.***.***";
$myUser = "username";
$myPass = "password";
$myDB = "DBname";

$dbhandle = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn't connect to SQL Server on $myServer"); 

?> 
```

但是，尽管它每次都尝试失败并显示此错误：

警告：mssql_connect() [function.mssql-connect]：无法连接到服务器：**。****.* **.****在第 8 行的（文件路径）中无法连接到 SQL Server **。***. ***.*****

 **我有点认为这可能与未定义驱动程序有关，但是在搜索了一段时间后，如果需要使用驱动器，我似乎无法找到关于哪个驱动器或什么驱动器的明确答案。有人看到我哪里出错了吗？我已经检查并再次检查了登录信息，它是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:20:27.660

感谢**JerryF**，我尝试从我的 PHP 服务器 ping 我的 SQL 服务器，但没有成功。事实证明，我们需要更新我们的服务器并确保使用了正确的 PHP dll。一旦我们这样做了，代码就可以正常工作，一切都运行得很顺利。

只是解决问题的答案。**感谢**JerryF**

# php - 以概率机会生成随机数

> ID：12218267
> 
> 赞同：1
> 
> 时间：2012-08-31T15:19:09.143
> 
> 标签：php, random, probability

我正在尝试创建一个随机数生成器，它将根据其不断变化的动态概率生成数字。基本上它的功能是它会从页面中选择浏览次数最多的帖子到索引页面并显示它。因此，浏览次数最多的页面有它的计数器。在索引页面上，我使用此计数器并希望根据计数器生成一个随机数，该计数器将作为概率。计数器越高，机会越大。到目前为止，我的函数看起来像这样，但我想知道 PHP 中是否有任何内置函数，或者如何使它更好更高效：

```
private function randomWithProbability($chance, $num, $range = false)
 {
    /* first generate a number from 1 to 100 and see if that number is in the range of chance */
    $rand = mt_rand(1, 100);

    if ($rand <= $chance) 
    {
        /* the number should be returned */
        return $num;
    }
    else 
    {
        /* otherwise return a random number */
        if ($range !== false)
        {
            /* make sure that this number is not same as the number for which we specified the chance */
            $rand = mt_rand(0, $range-1);
            while ($rand == $num)
            {
                $rand = mt_rand(0, $range-1);
            }

            return $rand;
        }
    }
 } 
```

$range 只是生成不属于机会的数字的正常范围。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:59:10.697

这可能会在工作中投入扳手并完全改变您打算实现它的方式。但是如果我正确理解你想要做什么，你能不能使用累积概率。

这是我在键盘上敲出的一个例子。显然我的例子很简单，可以更好地编码，但它应该解释这一切的机制。基本上，您可以根据查看次数获得每个“帖子”的累积概率，然后生成一个随机数。查看输出中的最后一个数组，您可以看到每个帖子都有机会显示（或您对它执行的任何操作），但查看次数越高的帖子的概率越大。

[http://codepad.org/9a72bezg](http://codepad.org/9a72bezg)

继承人的代码只是为了它的缘故，键盘永远不会掉线。

```
<?php
$posts = array(
 "php article" => 100,
 "c++ article" => 5,
 "monkey article" => 2,
 "another article" => 67,
 "one more" => 87,
 "ok i wanted another" => 34,
 "last one i promise" => 21
);

// Get total views
$total_views = array_sum($posts);

echo "total views: ".$total_views."\n\n";

// percentage posts
$posts_percents = array();
foreach($posts as $k => $v) {
  $posts_percents[$k] = ($v / $total_views) * 100;
}

//sort um
asort($posts_percents);

echo "chances of each post being viewed";
print_r($posts_percents);

//--- work out cumulative percents
$cumulative = array();
foreach($posts_percents as $k => $v) {
    $cumulative[$k] = end($cumulative) + $v;

}

echo "the cumulative probability";
print_r($cumulative);

//--- just a function i will use in the loop below, hopefully being in a function makes it easier to read than if i put it directly in th loop.
function get_post() {
   global $cumulative;

   asort($cumulative);

   $lowest = floor(current($cumulative));

   $rand = mt_rand($lowest,100);
   foreach($cumulative as $k => $v) {
     if($v > $rand)  {
      // echo $k." (".$rand.")\n";
       return $k;
       }
   }

}

$views=array();
for($i=0;$i<=1000;$i++) {
  $post_viewed = get_post();

  if(empty($post_viewed))
    continue;

  if(isset($views[$post_viewed]))
     $views[$post_viewed]++;
  else
     $views[$post_viewed]=1;

}

arsort($views);

echo "\n chances of being displayed \n\n";
print_r($views);

?> 
```

# visual-studio-2012 - 在 asp.net 4.5 中使用新的模型绑定来格式化日期字段

> ID：12218268
> 
> 赞同：9
> 
> 时间：2012-08-31T15:19:13.540
> 
> 标签：visual-studio-2012, asp.net-4.5

在 asp.net 4.5 之前的过去，我们可以轻松地将日期绑定到 Gridview、Formview 或其他数据绑定控件，并使用简单的格式字符串使其看起来像样。

```
 <asp:TextBox 
                ID="DateFieldTextBox" 
                runat="server" 
                Text='<%# Bind("DateField","{0:d}") %>'/> 
```

新的强类型模型绑定有点困难。

```
 <asp:TextBox 
                ID="DateFieldTextBox" 
                runat="server" 
                Text='<%# BindItem.DateField %>'/> 
```

会起作用，但会产生完整的日期/时间字符串，而不仅仅是日期。

```
 <asp:TextBox 
                ID="DateFieldTextBox" 
                runat="server" 
                Text='<%# BindItem.DateField.ToShortDateString() %>'/> 
```

.. 这应该可以工作，但它会产生编译时错误“BindItem 的代码语法无效”。Item.DateField.ToShortDateString() 有效，但不绑定回发。

现在我们已经恢复到旧语法，但我们希望获得现代编译时间检查，但仍然能够很好地格式化日期。其他人之前遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:47:18.977

为了在网格视图中显示数据，您可以执行 Item.DateField.ToShortString() 并且它会起作用，因为它是一种数据绑定方式。即，您已经在显示记录中的内容。BindItem.DateField.ToDateString() 会将对象从 DateTime 转换为字符串，这将导致您已经看到的错误。您可以在编辑字段或接受新条目时在表单视图中继续使用 Bind(expression,format)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T20:16:28.613

我为此苦苦挣扎了一段时间。我的解决方案是结合数据模型中的数据注释以及在我的 FormView 中使用 DynamicControl。我假设这是一个 WebForms 项目与一个 MCV 项目。

*阅读一些关于[WebForms 中数据访问](http://msdn.microsoft.com/en-us/library/jj822927(v=vs.110).aspx)领域的内容。它是 MS 对 WebForms 数据访问/表示控件的更好描述之一，并且包括对 DynamicControl 的引用。*

```
//I know you want this, and I did too.  It seems like it could/should work, but it doesn't        
<asp:TextBox 
     ID="DateFieldTextBox" 
     runat="server" 
     Text='<%# BindItem.DateField.ToShortDateString() %>'/>

//This works, but you also need to use the Data Annotations in your model.
<asp:DynamicControl
     ID="DateFieldTextBox"
     runat="server"
     DataField="DateField"
     Mode="Edit" />

//sample model annotations in your object class
  [Column(TypeName = "date"), DataType(DataType.Date), DisplayFormat(DataFormatString = "  {0:MM/dd/yyyy}", ApplyFormatInEditMode = true )]
  public DateTime DateField { get; set; } 
```

我将使用这种模式，因为我需要能够以正确格式（以及货币等）显示日期的双向模型绑定。很遗憾，TextBox 控件不能像这样完全处理模型数据的格式。在此上下文中忽略 DataAnnotations。如果没有格式化，双向绑定有效，但如果您需要格式化，则无效。IMO 似乎是一个不完整的 WebForms 实现。

另一方面，使用 DynamicControl 是可行的，但您不会在 DataField 属性上获得智能感知，该属性会在编码时为您提供模型的成员。什么？？？？另一个不完整且不太受欢迎的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-08T13:40:40.603

最后经过两天的努力，我得到了解决格式化字段值的这种双向模型绑定问题的解决方案。只需去掉TextBox的属性文本后的单引号或双引号“”或''即可。它对我来说就像一个魅力！但是，如果您使用 TextBox 的 TextMode 属性来确定日期，请将其删除。原因，它不会显示来自服务器或数据库的值。如果您想使用日期选择器或日历，您可以简单地添加一个 AJAX CalendarExtender 控件来从日历中选择一个日期。

```
<asp:TextBox ID="DateFieldTextBox" runat="server" Text=<%# Bind("DateField","{0:d}") %>/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-14T19:21:04.030

很抱歉复活了这个线程，但是您是否考虑将数据注释添加到您的模型类中？换句话说：

```
using System.ComponentModel.DataAnnotations;

[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
public DateTime DateField { get; set; } 
```

这似乎对我有用，虽然我不知道你的情况的细节。

# apache - 如何在 apache mod_proxy ( Apache2 ) 中启用/配置 SOCKS 代理支持

> ID：12218274
> 
> 赞同：14
> 
> 时间：2012-08-31T15:19:35.210
> 
> 标签：apache, mod-proxy, socks

我正在尝试查找有关如何使用 SOCKS 代理设置 apache2 mod_proxy 的文档 我找到了这个页面 [http://menet.math.ecnu.edu.cn/manual/mod/mod_proxy.html#socks](http://menet.math.ecnu.edu.cn/manual/mod/mod_proxy.html#socks) 但它是关于apache 版本 1，我不确定那里的配方是否仍然适用于版本 2

我想要实现的是：

有一个 apache2 为我的域 exampleA.com 和 SOCKS 代理服务。它们都在服务器 A 上运行。SOCKS 代理在那里，因此服务器 A 上的一些应用程序可以与服务器 B、C 上的其他应用程序通信，并且它在 localhost:4000 上运行

我想要的是当用户访问特定的网址时，例如 [http://exempleA.com/spetialurl/http://exampleB.com/xxx](http://exempleA.com/spetialurl/http://exampleB.com/xxx)

此 http 请求将通过 apache mod_proxy 代理到服务器 B - 但通过 SOCKS 代理或如果用户访问 [http://exempleA.com/spetialurl/http://exampleC.com/xxx](http://exempleA.com/spetialurl/http://exampleC.com/xxx) 这将通过 mod_proxy 代理到服务器 C通过 SOCKS 代理

我可以将 mod_proxy 配置为将特定 URL 代理到服务器 B 或 C 我缺少的是如何配置/告诉 apache2 使用 SOCKS 代理

服务器 B 和 C 上的这些 url 不公开可见，但可以通过 SOCKS 代理访问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-08T07:33:34.737

不幸的是，您不能直接使用它。最接近的东西是下面的指令

[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyremote](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyremote)

对我来说，下面的配置非常适合`http`代理，但不适用于`socks`代理

```
ProxyPass / http://ipinfo.io/
ProxyPassReverse / http://ipinfo.io/
ProxyRequests On
RequestHeader set Host "ipinfo.io"
ProxyRemote http http://185.93.3.123:8080 
```

结果如下

[![IP 代理 Apache](../Images/2aaa7a45f66514a642cfb7037e35e6dd.png)](https://i.stack.imgur.com/gjcJu.png)

这表明请求已通过代理正确代理。但是使用 socks 代理会导致 502，并且我找不到`socks5`支持的文档

所以你的选择是使用类似的东西`polipo`

[https://www.irif.fr/~jch/software/polipo/](https://www.irif.fr/~jch/software/polipo/)

您可以将其用作`http->socks`代理转发器，然后`ProxyRemote`到本地 polipo 端口

# ruby-on-rails - 如何通过 URL 将 json 从 Flex 发送到 Rails

> ID：12218275
> 
> 赞同：0
> 
> 时间：2012-08-31T15:19:36.017
> 
> 标签：ruby-on-rails, json, actionscript-3, apache-flex

是否可以通过 URL 发送 JSON 对象？

我在控制器接收 JSON 对象的 Rails 测试应用程序中制作了脚手架。另一方面，我有一个在 Flex 中构建的 GUI。我应该如何从我的 flex 应用程序发送 JSON？

当我尝试通过此 url 访问时：

> `http://localhost:3000/test`

rails 应用程序插入了一个空对象，但是当我添加参数 Flex 时，会显示以下消息：InvocationTargetException：URL 无效。

如果没有像 RubyAMF 这样的其他库，我如何发送它......？是否可以仅使用 flex > json > rails 发送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:50:22.343

如果您使用的是 Flex，您应该只创建一个 HTTPService 并使用 POST 或 GET 将 JSON 作为参数发布。这对我行得通。显示您的代码也可能会有所帮助:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:03:18.670

解决它：

```
req = new URLRequest("http://localhost:3000/tests/"+market_id);
    jrwloader  = new URLLoader();
    params = new URLVariables();
    req.data = strXml.toString();                               
    req.method = URLRequestMethod.POST;                                                         
    req.requestHeaders.push(new URLRequestHeader("X-HTTP-Method-Override", URLRequestMethod.PUT));                                                          
    **req.requestHeaders.push(new URLRequestHeader("Content-type", 'application/xml'));**             jrwloader.load(req); 
```

谢谢大家！

# python - 在 Xapian 和 Python 中按概率字段搜索

> ID：12218279
> 
> 赞同：0
> 
> 时间：2012-08-31T15:19:48.317
> 
> 标签：python, xapian

这是我打算做的：

```
doc = xapian.Document()
doc.set_data(somedata)
..
..
doc.add_term("Ajohn doe") 
```

假设前缀“作者”可用于文档作者。

现在我希望能够运行这个搜索“ **searchterm AND author:john doe** ”

这显然不起作用，因为“doe”被认为是作者的一部分（QueryParser 将其翻译为**“searchterm AND author:john OR doe”**）。我应该这样做：

```
doc.add-term("Ajohn_doe") 
```

并按“ **searchterm AND author:john_doe** ”搜索？一般来说，有没有其他方法可以搜索带有空格的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:57:22.460

最常见的方法是添加术语`Ajohn`和`Adoe`（可能使用 Xapian's `TermGenerator`，它将为您进行分词和术语创建）。完成此操作后，您可以运行搜索`author:"john doe"`（前缀短语搜索，它将能够搜索多个术语）。类似于以下内容：

```
import xapian
db = xapian.WritableDatabase("my-db", xapian.DB_CREATE_OR_OPEN)
tg = xapian.TermGenerator()

doc = xapian.Document()
tg.set_document(doc)
tg.index_text("John Doe", 1, "A")
db.add_document(doc)

qp = xapian.QueryParser()
qp.add_prefix("author", "A")
q = qp.parse_query('author:"John Doe"')

enq = xapian.Enquire(db)
enq.set_query(q)
for match in enq.get_mset(0, 10):
    print "%8.8i: %f" % (match.docid, match.weight,) 
```

（针对半新的 Xapian 主干进行了测试，尽管我不相信这里有什么特别新的东西。）

# android - Android：Eclipse LogCat 显示被破坏的活动日志

> ID：12218280
> 
> 赞同：0
> 
> 时间：2012-08-31T15:19:56.427
> 
> 标签：android, eclipse, android-activity, logcat, android-logcat

我有一个主要活动调用另一个活动。我希望在按下后退按钮时完全销毁第二个活动。当我按下返回按钮时，总是调用 onDestroy 方法，但在 Eclipse LogCat 中，我仍然看到属于被破坏活动的日志（我在屏幕方向更改时设置它们）。是 Eclipse 错误还是我的第二个活动永远不会被破坏？

这是我的 PhotoActivity，在 CameraActivity 之后调用：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo);
[…]
    OrientationEventListener mOrientationEventListener = new OrientationEventListener(this, SensorManager.SENSOR_DELAY_NORMAL) 
    { 
     @Override
     public void onOrientationChanged(int orientation) 
     {

      mDeviceOrientation = orientation;

      int norientation = 90*Math.round(mDeviceOrientation / 90); 

         if(norientation == 360)
         {
             norientation = 0;
         }

        Log.d("photo","orientation function:"+norientation);
     }
    };

    if(mOrientationEventListener.canDetectOrientation())
    {
     mOrientationEventListener.enable();
    }

}
    @Override
protected void onDestroy() {
    super.onDestroy();
    Log.d("photo","destroy");
} 
```

这是我的 LogCat：

```
 09-03 09:14:54.630: D/orientation(26901): orientation:0
    09-03 09:14:55.630: D/orientation(26901): orientation:270
    09-03 09:14:55.635: D/photo(26901): orientation function:270
    09-03 09:14:55.834: D/orientation(26901): orientation:0
    09-03 09:14:55.834: D/photo(26901): orientation function:0
    09-03 09:14:56.235: D/orientation(26901): orientation:270
    09-03 09:14:56.235: D/photo(26901): orientation function:270
    09-03 09:14:56.434: D/orientation(26901): orientation:0
    09-03 09:14:56.434: D/photo(26901): orientation function:0
    09-03 09:14:56.635: D/orientation(26901): orientation:0
    09-03 09:14:56.635: D/Sensor(26901): Landscape
    09-03 09:14:56.635: D/photo(26901): orientation function:0
    09-03 09:14:56.830: D/orientation(26901): orientation:0
    09-03 09:14:56.830: D/photo(26901): orientation function:0
    09-03 09:14:57.030: D/orientation(26901): orientation:0
    09-03 09:14:57.030: D/photo(26901): orientation function:0
    09-03 09:14:57.234: D/orientation(26901): orientation:0
    09-03 09:14:57.234: D/photo(26901): orientation function:0
    09-03 09:14:57.434: D/orientation(26901): orientation:0
    09-03 09:14:57.434: D/Sensor(26901): Portrait
    09-03 09:14:57.434: D/photo(26901): orientation function:0
    09-03 09:14:57.635: D/orientation(26901): orientation:270
    09-03 09:14:57.635: D/photo(26901): orientation function:270
    09-03 09:14:57.835: D/orientation(26901): orientation:270
    09-03 09:14:57.835: D/photo(26901): orientation function:270
    09-03 09:14:58.034: D/orientation(26901): orientation:270
    09-03 09:14:58.034: D/photo(26901): orientation function:270
    09-03 09:14:58.234: D/orientation(26901): orientation:270
    09-03 09:14:58.234: D/photo(26901): orientation function:270
    09-03 09:14:58.434: D/orientation(26901): orientation:270
    09-03 09:14:58.434: D/photo(26901): orientation function:270
    09-03 09:14:58.634: D/orientation(26901): orientation:270
    09-03 09:14:58.634: D/photo(26901): orientation function:270
    09-03 09:14:58.835: D/orientation(26901): orientation:270
    09-03 09:14:58.835: D/photo(26901): orientation function:270
    09-03 09:14:59.040: D/orientation(26901): orientation:0
    09-03 09:14:59.040: D/Sensor(26901): Landscape
    09-03 09:14:59.040: D/photo(26901): orientation function:0
    09-03 09:14:59.235: D/orientation(26901): orientation:0
    09-03 09:14:59.235: D/photo(26901): orientation function:0
    09-03 09:15:39.240: W/KeyCharacterMap(26901): No keyboard for id 0
    09-03 09:15:39.240: W/KeyCharacterMap(26901): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    09-03 09:15:39.700: D/camera(26901): onrestart:true
    09-03 09:15:39.710: D/camera(26901): camera:android.hardware.Camera@4056a410
    09-03 09:15:39.725: D/orientation(26901): orientation:0
    09-03 09:15:39.725: D/photo(26901): orientation function:0
    09-03 09:15:39.725: D/orientation(26901): orientation:0
    09-03 09:15:39.725: D/photo(26901): orientation function:0
    09-03 09:15:39.760: E/Surface(26901): Surface::init token -2 identity 2344
    09-03 09:15:39.760: D/camera(26901): camera1:android.hardware.Camera@4056a410
    09-03 09:15:39.760: D/camera(26901): camera:android.hardware.Camera@4056a410
    09-03 09:15:40.780: D/camera(26901): w=480-h=800
    09-03 09:15:40.795: D/camera(26901): rotazione
    09-03 09:15:40.795: D/camera(26901): rotation0
    09-03 09:15:40.800: D/camera(26901): parH=800-parW=480
    09-03 09:15:40.825: D/camera(26901): W=800-H=480
    09-03 09:15:41.320: D/orientation(26901): orientation:0
    09-03 09:15:41.320: D/photo(26901): orientation function:0
    09-03 09:15:41.320: D/orientation(26901): orientation:0
    09-03 09:15:41.320: D/photo(26901): orientation function:0
    09-03 09:15:41.320: D/orientation(26901): orientation:0
    09-03 09:15:41.320: D/photo(26901): orientation function:0
                          09-03 09:15:41.390: D/photo(26901): destroy
    09-03 09:15:41.684: D/orientation(26901): orientation:0
    09-03 09:15:41.684: D/photo(26901): orientation function:0
    09-03 09:15:41.885: D/orientation(26901): orientation:0
    09-03 09:15:41.885: D/photo(26901): orientation function:0
    09-03 09:15:42.684: D/orientation(26901): orientation:0
    09-03 09:15:42.684: D/photo(26901): orientation function:0
    09-03 09:15:42.884: D/orientation(26901): orientation:0
    09-03 09:15:42.884: D/photo(26901): orientation function:0
    09-03 09:15:43.084: D/orientation(26901): orientation:0
    09-03 09:15:43.084: D/Sensor(26901): Landscape
    09-03 09:15:43.084: D/photo(26901): orientation function:0
    09-03 09:15:43.285: D/orientation(26901): orientation:0
    09-03 09:15:43.285: D/photo(26901): orientation function:0
    09-03 09:15:43.485: D/orientation(26901): orientation:0
    09-03 09:15:43.485: D/photo(26901): orientation function:0
    09-03 09:15:43.685: D/orientation(26901): orientation:0
    09-03 09:15:43.685: D/photo(26901): orientation function:0
    09-03 09:15:43.885: D/orientation(26901): orientation:0
    09-03 09:15:43.885: D/photo(26901): orientation function:0 
```

如您所见，照片活动已被破坏（我缩进了更多的破坏日志），但是当我移动手机时，日志“orientation function：degrees”继续出现。

# c# - 任务栏紧凑模式？

> ID：12218282
> 
> 赞同：1
> 
> 时间：2012-08-31T15:20:00.510
> 
> 标签：c#, windows, media-player, mode, minimize

我有一个我想做的项目的想法。但是，这样做需要我能够最小化为类似于 Windows Media Player 的紧凑模式的紧凑模式。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:29:27.997

Assuming I understand correctly what you need, the term you are looking for is "deskband" and it is possible to achieve something like this with C# with the usage of the win API.

Take a look at the resources bellow.

1.  [http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099%28v=vs.85%29.aspx) - mainly information
2.  [http://www.codeproject.com/Articles/2219/Extending-Explorer-with-Band-Objects-using-NET-and](http://www.codeproject.com/Articles/2219/Extending-Explorer-with-Band-Objects-using-NET-and) - a working example

# linux - 包含硬链接的文件系统的备份解决方案

> ID：12218285
> 
> 赞同：0
> 
> 时间：2012-08-31T15:20:10.403
> 
> 标签：linux, backup

我有一个想要备份的 Linux 文件系统。我想对整个文件系统进行映像，以便以后在需要时进行恢复。但是，这个特定的文件系统包含指向某些文件的多个硬链接，这些文件必须由备份保存，并在恢复时正确重新链接，就像现在一样。

是否有 Linux 工具可以有效地对文件系统进行映像，并在过程中保留硬链接？如果可能的话，我更喜欢开源的，尽管我愿意考虑所有选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:12:12.297

带有 -H (--hard-links) 选项的 Rsync 将执行您想要的操作，将链接文件保留为目标文件系统中的相同 inode。显然，它仅在目标文件系统支持硬链接时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:29:28.533

如果您制作文件系统的图像，您将得到与制作图像时完全相同的图像（链接和所有内容，这些都是文件系统信息的一部分）。您可能将文件系统本身与它所代表的逻辑实体（文件、目录...）弄错了。

`dd`我个人很久以前使用标准工具来制作/恢复分区备份，并且效果很好。

# ios - NSString 到 std::string 替换加密中使用的符号

ID：12218286

赞同：2

时间：2012-08-31T15:20:20.543

标签：ios, cocoa-touch, nsstring, objective-c++, stdstring

# matlab - 如何将矩阵的值更改为特定位置

> ID：12218288
> 
> 赞同：1
> 
> 时间：2012-08-31T15:20:58.640
> 
> 标签：matlab

这是我的原始矩阵。

```
A =

    60    27    45    72    22    14    56     2     8    39    18    12;
    72    27    60    45    11     7     3    23    41    17    56    39] 
```

然后，我想更改位置值，`column 1 until 4 in second row`以便可以将相同的值排列在同一列中。在这里，我的欲望矩阵。

```
Res =

    60    27    45    72    22    14    56     2     8    39    18    12;
    60    27    45    72    11     7     3    23    41    17    56    39] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:28:47.170

尝试在显示您尝试过的示例的地方发布代码，但我会为您指出正确的方向。

您需要先在 Res 中直接复制 A，然后您可以修改此副本，以便您的 slaveRow（您要覆盖的行）与您的 masterRow（您在覆盖 slaveRow 时引用的行）匹配。像这样：

```
A =

60    27    45    72    22    14    56     2     8    39    18    12
72    27    60    45    11     7     3    23    41    17    56    39

columnStart=1;
columnEnd=4;
masterRow=1;
slaveRow=2;
Res=A;
Res(slaveRow,columnStart:columnEnd)=A(masterRow,columnStart:columnEnd);

Res =

60    27    45    72    22    14    56     2     8    39    18    12
60    27    45    72    11     7     3    23    41    17    56    39 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:40:17.227

尝试

```
 i=1:2:(1+3*2);
  A(i+1)=A(i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:27:11.370

试试这个

```
 Res = A;
 Res(2,[1:4]) = Res(1,[1:4]) 
```

# iphone - UIActionSheet，取消按钮运行方法

> ID：12218298
> 
> 赞同：0
> 
> 时间：2012-08-31T15:21:58.567
> 
> 标签：iphone, objective-c, ios, xcode, uiactionsheet

每次我在 UIActionSheet 中按下取消按钮时，它都会运行一个方法。我不知道为什么，我检查了整个代码很多次，但我仍然看不到问题。你能帮我找到吗？

```
-(IBAction)moreOptions
{

    giftTitle = self.title;

     if(![giftTitle isEqualToString:@"bla"])
     {
        actionSheet = [[UIActionSheet alloc]initWithTitle:giftTitle
                                                            delegate:self
                                                   cancelButtonTitle:@"Back"
                                              destructiveButtonTitle:nil
                                                   otherButtonTitles:@"Send via email",
                                  @"Read in Wikipedia"
                                  , nil];
     }
    else 
    {
        actionSheet = [[UIActionSheet alloc]initWithTitle:giftTitle
                                                 delegate:self
                                        cancelButtonTitle:@"Back"
                                   destructiveButtonTitle:nil
                                        otherButtonTitles:@"Send via email",
                       @"Read in Wikipedia", @"Pineapple mode"
                       , nil];

    }
    actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [actionSheet showInView:self.view.window];

}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{

    // выстраеваем дальнейшие действия кнопок

        switch (buttonIndex) 
        {
            case 0:
                [self showPicker];
            break;

            case 1:
                [self goWiki];
            break;

            case 2:
                [self showPineapple];
            break;

            default:
            break;

        }

} 
```

所以它运行方法`showPineapple`。请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:25:46.083

是的，当您按下操作表上的取消按钮时，它的委托函数总是调用，最后一个索引。

如果您正在实施多个操作表，那么只需按标签值使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:46:53.397

你需要实现这样的东西：

更改您的`if`和`else`部分，为每个 UIActionSheet 添加一个唯一标签：

```
if(![giftTitle isEqualToString:@"bla"]) {
    actionSheet = [[UIActionSheet alloc]initWithTitle:giftTitle
                                             delegate:self
                                    cancelButtonTitle:@"Back"
                               destructiveButtonTitle:nil
                                    otherButtonTitles:@"Send via email", @"Read in Wikipedia" , nil];
    actionSheet.tag = 10;
} else {
    actionSheet = [[UIActionSheet alloc]initWithTitle:giftTitle
                                             delegate:self
                                    cancelButtonTitle:@"Back"
                               destructiveButtonTitle:nil
                                    otherButtonTitles:@"Send via email", @"Read in Wikipedia", @"Pineapple mode", nil];

    actionSheet.tag = 20;
} 
```

然后在 actionSheet:clickedButtonAtIndex: 消息处理程序中查找标记：

```
case 2:
   if (actionSheet.tag == 20)
      [self showPineapple];
   break; 
```

This means `[self showPineapple]` will only run in the `else` scenario, while nothing will happen in the `if` scenario (just as nothing will happen for `buttonIndex` 3 in the `else` scenario (where the Cancel button is indeed at index 3) .

# asp.net-mvc-4 - asp.net MVC 4 与 StructureMap

> ID：12218300
> 
> 赞同：10
> 
> 时间：2012-08-31T15:22:09.420
> 
> 标签：asp.net-mvc-4, structuremap, webactivator

我正在将 ASP.NET MVC3 项目转换为 MVC4。我试图找到使用 StructureMap 和 MVC4 的最佳方法。我找到了一些可能有效的解决方案，但还没有尝试过。

第一个解决方案非常简单和[轻量级](http://biasecurities.com/2012/06/configuring-mvc-4-with-structuremap/)。第二个（[Structuremap.MVC4](https://github.com/webadvanced/Structuremap.MVC4)）依赖于 WebActivator 来启动。

什么是更好和最简单的方法？我还需要引导所有内容并使用 WebActivator 设置 DependencyResolver 吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T18:00:42.307

我做了以下，它的工作原理。希望能帮助到你。

```
public class StructureMapDependencyResolver : IDependencyResolver
    {
        private readonly IContainer _container;

        public StructureMapDependencyResolver(IContainer container)
        {
            _container = container;
        }

        public object GetService(Type serviceType)
        {
            if (serviceType.IsAbstract || serviceType.IsInterface)
            {

                return _container.TryGetInstance(serviceType);

            }

            return _container.GetInstance(serviceType);
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            return _container.GetAllInstances<object>().Where(s => s.GetType() == serviceType);
        }

    } 
```

全球.asax：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        var container = ConfigureDependencies();

        GlobalConfiguration.Configuration.ServiceResolver.SetResolver(new StructureMapDependencyResolver(container));

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes); 
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }

    public static IContainer ConfigureDependencies()
    { 
        IContainer container = new Container();

        Database.SetInitializer(new DataContextInitializer());
        var dataContext = new DataContext.DataContext();

        container.Configure(x => x.For<IRepository>().Use<Repository>().Ctor<DbContext>().Is(dataContext)); 
        container.Configure(x=>x.For<IUnitOfWork>().Use<UnitOfWork>());

        return container;
    } 
```

# ruby-on-rails - 不应该调用动作秀

> ID：12218301
> 
> 赞同：0
> 
> 时间：2012-08-31T15:22:12.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在 Ruby on Rails 上开发一个应用程序，并且我将链接指向显示不同视图和翻译的操作。问题是当我转到该页面时，由于某种原因，调用了“show”操作，并且出现了路由错误。

我什至将路线移到了其中的资源模块之外，但仍然失败。

知道如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:48:45.953

尝试几件事，

rake routes -> 验证您使用的路径变量是否正确 检查 HTML 代码以验证 link_to 是否正确 当您点击该链接时检查服务器日志，看看发生了什么

# jquery - 如何选择具有某个 id 的父级的图像元素？

> ID：12218302
> 
> 赞同：1
> 
> 时间：2012-08-31T15:22:13.443
> 
> 标签：jquery, html, dom, jquery-selectors, selector

```
<div id="someId_123">
     <img class"testClass"/>
</div> 
```

使用 JQuery，我想根据它的类以及 div 的 id 中有“123”这一事实来选择这个图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:23:51.187

```
$("div[id*='123'] img.testClass") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:26:04.053

您应该可以使用`'[id*="123"] > .testClass'`. `>`指定父子关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:26:13.563

我认为这会做到：

```
$("div[id*=123] img.testClass") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:26:37.650

```
$(":div[id*=123] img.testClass"); 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/leniel/EdTF8/2/](http://jsfiddle.net/leniel/EdTF8/2/)

您的 HTML 代码中还有一个错字：

```
<img class"testClass"/> 
```

应该：

```
<img class="testClass"/> 
```

我花了几分钟试图弄清楚为什么 jsFiddle 不工作。只是因为你没有`=`在班级名称前放一个标志。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T15:23:58.330

这将在 ID 中的任意位置搜索 123，并使用类 testClass 获取图像。

`$('[id*="123"] img.testClass')`

如果您希望它是动态的，只需执行以下操作：

`$('[id*="' + idNumber + '"] img.' + className)`

[jsFiddle 演示](http://jsfiddle.net/su6xT/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T15:25:07.953

这个怎么样：

```
$('img.testClass', '[id*="123"]') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T15:28:09.140

首先获取指定类的所有图像（比选择所有节点更有效），然后过滤其父级具有符合特定条件的 id 的图像。

```
$('.testClass').filter(function(){ return this.parent().attr('id').match(/123/) }) 
```

# php - xml:lang 上的 XSD 验证错误

> ID：12218306
> 
> 赞同：3
> 
> 时间：2012-08-31T15:22:31.637
> 
> 标签：php, xml, xsd

我尝试验证这一点（XSD：[http](http://www.imsglobal.org/xsd/imsrdceo_rootv1p0.xsd) ://www.imsglobal.org/xsd/imsrdceo_rootv1p0.xsd ）：

```
<?xml version="1.0" encoding="utf-8"?>
<rdceo xmlns="http://www.imsglobal.org/xsd/imsrdceo_rootv1p0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.imsglobal.org/xsd/imsrdceo_rootv1p0 http://www.imsglobal.org/xsd/imsrdceo_rootv1p0.xsd http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd">
    <identifier>5040d336776eb</identifier>
    <title>
        <langstring xml:lang="en">titre</langstring>
    </title>
</rdceo> 
```

但它说（在各种网站和我的 PHP 代码上）：

> 不允许使用属性“xml:lang”

这是我的PHP代码。

```
<?php

class RDCEOObjectiveBuilder {

    public  $id,
            $title,
            $description;

    public function build() {
        $dom = new DOMDocument('1.0', 'utf-8');

        $root = $dom->createElementNS(
            'http://www.imsglobal.org/xsd/imsrdceo_rootv1p0',
            'rdceo'
        );
        $root->setAttributeNS(
            'http://www.w3.org/2000/xmlns/' ,
            'xmlns:xsi',
            'http://www.w3.org/2001/XMLSchema-instance'
        );
        $root->setAttributeNS(
            'http://www.w3.org/2001/XMLSchema-instance',
            'xsi:schemaLocation',
            'http://www.imsglobal.org/xsd/imsrdceo_rootv1p0 http://www.imsglobal.org/xsd/imsrdceo_rootv1p0.xsd http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd'
        );

        $id = $dom->createElementNS('http://www.imsglobal.org/xsd/imsrdceo_rootv1p0', 'identifier', $this->id);

        $title = $dom->createElementNS('http://www.imsglobal.org/xsd/imsrdceo_rootv1p0', 'title');
        $title_lang = $dom->createElementNS('http://www.imsglobal.org/xsd/imsrdceo_rootv1p0', 'langstring', $this->title);
        $title_lang->appendChild(new DOMAttr('xml:lang', 'en'));
        $title->appendChild($title_lang);

        $root->appendChild($id);
        $root->appendChild($title);
        $dom->appendChild($root);

        $dom->schemaValidate('imsrdceo_rootv1p0.xsd');
        $dom->formatOutput = true;
        return $dom->saveXML();
    }
}

$test = new RDCEOObjectiveBuilder();
$test->id = uniqid();
$test->title = 'titre';
echo $test->build();
?> 
```

我不明白为什么`xml:lang`不允许......在[http://www.imsglobal.org/competencies/](http://www.imsglobal.org/competencies/)（创建xsd的人）上的每个示例中，他们使用`xml:lang`

示例：[http ://www.imsglobal.org/competencies/Examples/MadeUp_Examplev1.xml](http://www.imsglobal.org/competencies/Examples/MadeUp_Examplev1.xml)

你能告诉我为什么吗 ？非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:01:36.040

元素`langstring`定义如下：

```
<xs:anyAttribute namespace="##other" processContents="strict"/> 
```

这意味着当且仅当您的模式中存在该属性的属性声明时，它才允许来自另一个命名空间的属性。由于它们不导入 XML 命名空间的架构，因此架构中没有 xml:lang 的声明，除非您采取措施将其包含在内。我不熟悉您正在使用的 PHP 接口，因此我无法告诉您实现这一目标的最佳方法，但一种方法是定义一个模式文档 D，该文档同时导入 imsglobal 模式和 XML 命名空间的模式，并使用 D 作为验证实例的架构。

另一种方法是引用的示例执行此操作的方式：它们从实例文档中的 xsi:schemaLocation 属性引用 XML 命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:05:10.410

这里的关键是在**langstring**元素上使用 xs:anyAttribute，它是**严格**的处理子句，以及`xml:lang`应该如何工作。

**严格**意味着*XML 处理器必须获取所需名称空间的模式并验证来自这些名称空间的任何属性。*

问题是，任何体面的 XML Schema 处理器都应该内置对我所谓的基本模式的支持；[描述 xml:lang 的xml.xsd](http://www.w3.org/2001/03/xml.xsd)只是其中之一。

就我而言，使用[QTAssistant](http://www.paschidev.com)，您的 XML 验证就好了。

我可以告诉你，如果他们（架构作者）将 xsd:import 包含到[http://www.w3.org/XML/1998/namespace](http://www.w3.org/XML/1998/namespace)，即使没有架构位置，它也会帮助其他处理器，甚至可能明确引用受 i18n 约束的内容的 xml:land 属性。

但是他们没有……您现在可以做的是使用您编写的另一个 XSD 来导入您的和 xml.xsd，您应该没问题。请注意，不要在[http://www.w3.org/2001/03/xml.xsd](http://www.w3.org/2001/03/xml.xsd)模式位置上导入，因为该链接会受到限制并且您会超时。有一个本地副本，然后到那个。像这样的东西：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:import schemaLocation="..." namespace="http://www.imsglobal.org/xsd/imsrdceo_rootv1p0"/>
    <xsd:import schemaLocation="..." namespace="http://www.w3.org/XML/1998/namespace"/>
</xsd:schema> 
```

![rdceo 的 QTAsistant 图](../Images/30f9e6bf93e93615af6465e5c015b7e2.png)

# erlang - Ecoinpool 设置 - couchdb 出错

> ID：12218312
> 
> 赞同：2
> 
> 时间：2012-08-31T15:22:58.590
> 
> 标签：erlang, couchdb, debian, bitcoin

我在测试运行 ecoinpool [https://github.com/p2k/ecoinpool](https://github.com/p2k/ecoinpool)时遇到错误。

操作系统是debian。

```
 root@j064:~/ecoinpool# ./test_launch.sh
==> ecoinpool (compile)
==> ebitcoin (compile)
==> rel (compile)
==> ecoinpool (compile)
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [kernel-poll:true]

Eshell V5.9.1  (abort with ^G)
(ecoinpool_test@j064)1> [12:29:23.245][ebitcoin/fatal] config_db - couchbeam:open_or_create_db/3 returned an error:
{ok,"401",
    [{"Server","CouchDB/1.2.0 (Erlang OTP/R15B01)"},
     {"Date","Thu, 30 Aug 2012 12:29:23 GMT"},
     {"Content-Type","application/json"},
     {"Content-Length","67"},
     {"Cache-Control","must-revalidate"}],
    <<"{\"error\":\"unauthorized\",\"reason\":\"Name or password is incorrect.\"}\n">>}
{"init terminating in do_boot",{{badmatch,{error,{shutdown,{ebitcoin_app,start,[normal,[]]}}}},[{ecoinpool_test_launch,start,0,[{file,"src/ecoinpool_test_launch.erl"},{line,34}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()
root@j064:~/ecoinpool# 
```

* * *

编辑这是我现在面临的错误，遗憾的是我无法解释我是如何来到这里的，但未经授权的错误已经消失了。

```
root@j064:~/ecoinpool# ./test_launch.sh
==> ecoinpool (compile)
==> ebitcoin (compile)
==> rel (compile)
==> ecoinpool (compile)
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [kernel-poll:true]

Eshell V5.9.1  (abort with ^G)
(ecoinpool_test@j064)1> {"init terminating in do_boot",{{badmatch,{error,{shutdown,{ebitcoin_app,start,[normal,[]]}}}},[{ecoinpool_test_launch,start,0,[{file,"src/ecoinpool_test_launch.erl"},{line,34}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()
root@j064:~/ecoinpool# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:23:06.893

响应`401`意味着提供的 BasicAuth 用户：密码对无效。

默认情况下，**ecoinpool**使用此配置进行 CouchDB 访问：

```
{db_options, [{basic_auth, {"ecoinpool", "localtest"}}]}, 
```

`test_launch.config`您可以在文件（或您实际使用的其他配置文件）中更改此设置。

# android - 在 Android 中购买的 InApp

> ID：12218315
> 
> 赞同：8
> 
> 时间：2012-08-31T15:23:15.163
> 
> 标签：android, in-app-billing

> ```
>  public static boolean verify(PublicKey publicKey, String signedData, String signature) {
>     Log.i(TAG, "signature: " + signature);
>     Signature sig;
>     try {
>         sig = Signature.getInstance(SIGNATURE_ALGORITHM);
>         sig.initVerify(publicKey);
>         sig.update(signedData.getBytes());
>         if (!sig.verify(Base64.decode(signature))) {
>             Log.e(TAG, "Signature verification failed.");
>             return false;
>         }
>         return true;
>     } catch (NoSuchAlgorithmException e) {
>         Log.e(TAG, "NoSuchAlgorithmException.");
>     } catch (InvalidKeyException e) {
>         Log.e(TAG, "Invalid key specification.");
>     } catch (SignatureException e) {
>         Log.e(TAG, "Signature exception.");
>     }  catch (Base64DecoderException e) {
>         Log.e(TAG, "Base64DecoderException.", e);
>     }
>     return false;
> } 
> ```

我输入了我的 google play 测试帐户的公钥，但此方法返回 false 值。我使用 android SDK 的 market_billing 项目进行 InApp 计费。除了用于 InApp 计费的公钥之外，还有其他值吗？

```
logcat output- 
```

> ```
>  09-03 14:10:43.439: I/BillingService(3683): Starting
>   09-03 14:10:43.556: D/dalvikvm(3683): GC_EXTERNAL_ALLOC freed 843 objects / 59184 bytes in 99ms
>   09-03 14:10:43.665: I/BillingService(3683): Service starting with onCreate
>   09-03 14:10:43.669: I/BillingService(3683): Market Billing Service Successfully Bound
>   09-03 14:10:43.732: I/BillingService(3683): Market Billing Service Connected.
>   09-03 14:10:48.595: I/BillingService(3683): isBillingSupported response was:    RESULT_OK
>   09-03 14:10:48.595: I/BillingService(3683): requestPurchase()
>   09-03 14:10:48.619: I/BillingService(3683): current request is:4403061459445471804
>   09-03 14:10:48.619: I/BillingService(3683): REQUEST_PURCHASE Sync Response code: RESULT_OK
>   09-03 14:10:48.708: I/BillingService(3683): onPause())
>   09-03 14:11:04.228: I/BillingService(3683): Received action: com.android.vending.billing.IN_APP_NOTIFY
>   09-03 14:11:04.228: I/BillingService(3683): notify got id: android.test.purchased
>   09-03 14:11:04.228: I/BillingService(3683): getPurchaseInformation()
>   09-03 14:11:04.228: I/BillingService(3683): Nonce generateD: -9092176369901149507
>   09-03 14:11:04.255: I/BillingService(3683): current request is:7271094427995930240
>   09-03 14:11:04.255: I/BillingService(3683): GET_PURCHASE_INFORMATION Sync Response code: RESULT_OK
>   09-03 14:11:04.599: I/BillingService(3683): Received action: com.android.vending.billing.RESPONSE_CODE
>   09-03 14:11:04.599: I/BillingService(3683): checkResponseCode got requestId: 4403061459445471804
>   09-03 14:11:04.599: I/BillingService(3683): checkResponseCode got responseCode: RESULT_OK
>   09-03 14:11:05.044: I/BillingService(3683): Received action: com.android.vending.billing.PURCHASE_STATE_CHANGED
>   09-03 14:11:05.044: I/BillingService(3683): purchaseStateChanged got signedData: {"nonce":-9092176369901149507,"orders":[{"notificationId":"android.test.purchased","orderId":"transactionId.android.test.purchased","packageName":"com.blundell.test","productId":"android.test.purchased","purchaseTime":1346661666055,"purchaseState":0}]}
>   09-03 14:11:05.044: I/BillingService(3683): purchaseStateChanged got signature: KZAEykaTIdqZ+to+hJNolkmDcYdliPw+fgg4xa6uBYq77GGiVSma0sbVHCCv3T7WJ5sRMTRLuFgbTM1NC3YEl+paEj5QnIlD1GgDiQBJ9PEErEhGSft1BTmvi+6BS/cu8KFXp7v1h5c+WBNHWNBeNckl433yhoKElOWbY1gvfNakEJ2LdBUesaCbLeHohP+OoZJq4U20zO1sQGhjerRdRpX0Jg7bPJErHTka58GNbaclz/xwVhDs54GZwsBECDceo0fSNfUsmBfpYAe+/kyCnO+Ip+N49pDeN+2FKAnhJ3d8An3IaNX990P8vqShgTHxBpAznc7YHro2sVWtzAXVZQ==
>   09-03 14:11:05.044: I/BillingService(3683): signedData: {"nonce":-9092176369901149507,"orders":[{"notificationId":"android.test.purchased","orderId":"transactionId.android.test.purchased","packageName":"com.blundell.test","productId":"android.test.purchased","purchaseTime":1346661666055,"purchaseState":0}]}
>   09-03 14:11:05.052: I/BillingService(3683): signature: KZAEykaTIdqZ+to+hJNolkmDcYdliPw+fgg4xa6uBYq77GGiVSma0sbVHCCv3T7WJ5sRMTRLuFgbTM1NC3YEl+paEj5QnIlD1GgDiQBJ9PEErEhGSft1BTmvi+6BS/cu8KFXp7v1h5c+WBNHWNBeNckl433yhoKElOWbY1gvfNakEJ2LdBUesaCbLeHohP+OoZJq4U20zO1sQGhjerRdRpX0Jg7bPJErHTka58GNbaclz/xwVhDs54GZwsBECDceo0fSNfUsmBfpYAe+/kyCnO+Ip+N49pDeN+2FKAnhJ3d8An3IaNX990P8vqShgTHxBpAznc7YHro2sVWtzAXVZQ==
>   09-03 14:11:05.068: E/BillingService(3683): Signature verification failed.
>   09-03 14:11:05.072: D/verified(3683): false
>   09-03 14:11:05.072: W/BillingService(3683): signature does not match data.
>   09-03 14:11:05.076: D/AndroidRuntime(3683): Shutting down VM
>   09-03 14:11:05.076: W/dalvikvm(3683): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
>   09-03 14:11:05.083: E/AndroidRuntime(3683): FATAL EXCEPTION: main
>   09-03 14:11:05.083: E/AndroidRuntime(3683): java.lang.RuntimeException: Unable to start receiver com.blundell.test.BillingReceiver: java.lang.NullPointerException
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.app.ActivityThread.access$3200(ActivityThread.java:125)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.os.Handler.dispatchMessage(Handler.java:99)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.os.Looper.loop(Looper.java:123)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.app.ActivityThread.main(ActivityThread.java:4627)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at java.lang.reflect.Method.invokeNative(Native Method)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at java.lang.reflect.Method.invoke(Method.java:521)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at dalvik.system.NativeStart.main(Native Method)
>   09-03 14:11:05.083: E/AndroidRuntime(3683): Caused by: java.lang.NullPointerException
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at com.blundell.test.BillingHelper.verifyPurchase(BillingHelper.java:249)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at com.blundell.test.BillingReceiver.purchaseStateChanged(BillingReceiver.java:44)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at com.blundell.test.BillingReceiver.onReceive(BillingReceiver.java:27)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
>   09-03 14:11:05.083: E/AndroidRuntime(3683):   ... 10 more
>   09-03 14:16:09.611: I/Process(3683): Sending signal. PID: 3683 SIG: 9
>   09-03 14:16:14.880: I/BillingService(3793): Service starting with onCreate
>   09-03 14:16:14.888: I/BillingService(3793): Market Billing Service Successfully Bound
>   09-03 14:16:14.896: I/BillingService(3793): Market Billing Service Connected. 
> ```

有人告诉我验证过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:53:32.367

`verify`代码看起来不错。你怎么一代的`publicKey`？它应该如下所示：

```
protected PublicKey generatePublicKey(String encodedPublicKey) {
    try {
        byte[] decodedKey = Base64.decode(encodedPublicKey);
        KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
        return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    } catch (InvalidKeySpecException e) {
        Log.e(BillingController.LOG_TAG, "Invalid key specification.");
        throw new IllegalArgumentException(e);
    } catch (Base64DecoderException e) {
        Log.e(BillingController.LOG_TAG, "Base64 decoding failed.");
        throw new IllegalArgumentException(e);
    }
} 
```

查看[AndroidBillingLibrary中的](https://github.com/robotmedia/AndroidBillingLibrary)[DefaultSignatureValidator](https://github.com/robotmedia/AndroidBillingLibrary/blob/master/AndroidBillingLibrary/src/net/robotmedia/billing/security/DefaultSignatureValidator.java)类。可能有帮助。

# jquery - 数据表回调

> ID：12218316
> 
> 赞同：2
> 
> 时间：2012-08-31T15:23:16.873
> 
> 标签：jquery, datatables

我正在尝试在我的应用程序中使用 jquery 数据表。我设法让它与服务器数据更新完美配合

用于创建表的 javascript 如下所示

```
jQuery(function() {
    return $('#example').dataTable({
      sPaginationType: "full_numbers",
      bProcessing: true,
      bServerSide: true,
      bRetrieve: true
    });
}).call(this); 
```

问题是我需要在 javascript 中添加一个钩子，以使我能够在从服务器更新表数据后更新另一个页面元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:23:26.403

这[`fnDrawCallback`](http://datatables.net/ref/fnDrawCallback)是你的回调：

```
"fnDrawCallback" : function(oSettings) {
    // Update the element
} 
```

# sitecore - 营销人员的 Sitecore Webform 保存到数据库 FormID

> ID：12218318
> 
> 赞同：1
> 
> 时间：2012-08-31T15:23:20.110
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我有一个在 sitecore WFFM 中创建并导出到 ascx 控件的表单。

我的表单有 2 个保存操作：

1.  保存到数据库和
2.  发送邮件消息

在保存到数据库操作中，将新行插入到 WFFM 表中。

我想获取提交的表单 id（这是表单表中的 id）并作为消息的一部分插入到发送邮件消息中。是否有可以调用的 WFFm 函数来获取 id？我不是在说`this.FormID`哪个是主表单id，而是刚刚提交的表单实例的id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:33:56.757

这个问题的简单答案是，开箱即用，不。您可以在发送电子邮件中使用的唯一现成值是表单本身中的值。您可以通过自定义数据调用轻松地做到这一点，但开箱即用，不行。

# ios - 我忘了设置“部署目标”的版本。我可以在应用审批方面遇到问题吗？

> ID：12218320
> 
> 赞同：1
> 
> 时间：2012-08-31T15:23:23.960
> 
> 标签：ios, appstore-approval

我忘了设置“部署目标”的版本。

我的 iPhone APP 后来只在 iOS 5 上运行，部署目标设置为 iOS 4。

我可以在应用审批方面遇到问题吗？

如果我提交另一个版本的应用程序会更好吗？我迫不及待地等待 Apple 的回报，因为它是为有发布期限的客户准备的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:27:05.707

如果您的截止日期很紧，我会拒绝该应用程序，将部署目标更改为 5.0，然后重新提交。如果您等待并且确实被拒绝，那么该过程只会花费更长的时间。

公平地说，Apple 将尝试在 iOS 4 上测试该设备。您为 Base SDK 放了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:27:44.067

在最新版本的 XCode (4.4.1) 中，如果部署目标为空，它将使用 XCode 中可用的最新 iOS 版本（在我的情况下为 6.0）。

# c# - C# datetimepicker 在更改日期之前读取值

> ID：12218321
> 
> 赞同：4
> 
> 时间：2012-08-31T15:23:32.167
> 
> 标签：c#, datetimepicker

我在 C# 中有一个使用 DateTimePicker 和几个文本框的 win 表单。文本框从用户那里收集一些特定于 DateTimePicker 中日期的信息。

我想在 DateTimePicker 中更改日期时将数据保存在文本框中。

为此，我需要在更改日期*之前*读取 DateTimePicker 中的日期。

我怎么能那样做？DateTimePicker_valueChanged 事件似乎没有这样做。

从 dateTimePicker 读取的值是更改日期后的值。如何在更改日期之前获得日期？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:25:58.583

设置值时，您需要将值存储在某种变量中。

因此，如果您在加载表单时设置值，那么您也将其存储在变量中。当更改事件触发时，您可以使用存储的变量。完成后，您可以更新它以匹配新更改的值，为下次更改做好准备。

例如：

```
public class MyClass
{

    DateTime? LastDateValue = null;

    void OnLoad()
    {
       //Set both datepicker and LastDateValue to be the same
    }

    void DateTimePicker_valueChanged()
    {
       //use LastDateValue to save text fields
       //set LastDateValue to match new value ready to use on next event fire
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:26:55.487

就在您初始化 时`DateTimePicker`，在某个变量中读取它的日期。

然后应用您 `DateTimePicker_valueChanged event`的它将继续存储以前的值并很快重置为新值。

# php - drupal实体类中的文件属性？

> ID：12218322
> 
> 赞同：0
> 
> 时间：2012-08-31T15:23:36.817
> 
> 标签：php, drupal

如何将文件存储在 drupal 实体中？我有一个要与用户关联的公共密钥，因此我创建了一个 APIuser 实体，但我不知道公共密钥属性赋予什么样的字段

```
function api_user_schema() {
    $schema['api_user'] = array(
    'description' => 'The base table for api_user.',
    'fields' => array(
        'id' => array(
            'description' => 'The primary identifier for an artwork.',
            'type' => 'serial',
            'unsigned' => TRUE,
            'not null' => TRUE,
        ),
        'public_key' => array(
            'description' => 'The primary identifier for the public key.',
            'type' => ???,
            'unsigned' => TRUE,
            'not null' => TRUE,
        )
        'created' => array(
            'description' =>
            'The Unix timestamp when the api_user was created.',
            'type' => 'int',
            'not null' => TRUE,
            'default' => 0,
        ),
        'changed' => array(
            'description' =>
            'The Unix timestamp when the api_user was most recently saved.',
            'type' => 'int',
            'not null' => TRUE,
            'default' => 0,
        ),
    ),
    'unique keys' => array(
        'id' => array('id')
    ),
    'primary key' => array('id'),
    );

    return $schema;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:50:47.700

您所拥有的是单个数据库表的定义；Drupal 在此之上没有为文件提供任何层，因此如果您想存储文件，则必须手动进行。

您可以举的最好的例子是核心用户实体。它定义了`picture`属性，这是一个引用表中条目的 ID `file_managed`（顺便说一下，这是 Drupal 核心默认处理所有永久文件存储的方式）。

这是该 db 列的架构定义（来自[`user_schema()`](http://api.drupal.org/api/drupal/modules%21user%21user.install/function/user_schema/7)）：

```
'picture' => array(
  'type' => 'int',
  'not null' => TRUE,
  'default' => 0,
  'description' => "Foreign key: {file_managed}.fid of user's picture.",
) 
```

这与您的定义需要的外观非常相似。

从那里，查看[`user_account_form()`](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_account_form/7)函数（定义`picture`属性的表单元素）和[`user_validate_picture()`](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_validate_picture/7)函数，它将向您展示如何执行文件上传、将文件保存在表中以及更改字段`file_managed`的提交值`picture`到相关的文件 ID（以便它自动保存在实体上）。

您将主要从这两个函数中复制代码，因此不会那么棘手。

# jquery - 在 div 中添加 div

> ID：12218323
> 
> 赞同：0
> 
> 时间：2012-08-31T15:23:43.163
> 
> 标签：jquery, html

我生成了这样的html：

```
<div class="row">
   <div class="item google"></div>
   <div class="item mail"></div>
   <div class="item apps"></div>
   <div class="item plus"></div>
</div>
<div class="row">
   <div class="item google"></div>
   <div class="item mail"></div>
   <div class="item apps"></div>
   <div class="item plus"></div>
</div> 
```

我想把其他项目放在谷歌里面

```
<div class="row">
   <div class="item google">
     <div class="group">
       <div class="item mail"></div>
       <div class="item apps"></div>
       <div class="item plus"></div>
     </div>
  </div>
</div>
<div class="row">
  <div class="item google">
     <div class="group">
       <div class="item mail"></div>
       <div class="item apps"></div>
       <div class="item plus"></div>
     </div>
  </div>
</div> 
```

我正在创建组 div：

```
jQuery("div.google").append('<div class="group"></div>'); 
```

但是当我做 .append 时，我会添加所有的 insted

```
 jQuery("div.row > div.google > div.group").append(jQuery("div.mail")); 
```

我有两个带有类邮件的 div。如何仅针对父母。编辑：http: [//jsfiddle.net/H6MYh/1/](http://jsfiddle.net/H6MYh/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:33:37.347

试试下面的代码：

```
jQuery("div.google").append('<div class="group"></div>');
jQuery("div.google").each(function(){
    var $this = jQuery(this);
    $this.siblings().appendTo($this.find('.group'));
}); 
```

编辑：对于特定的 div：（未测试）

```
jQuery("div.google").each(function(){
    var $this = jQuery(this);
    $this.next('.mail').appendTo($this.find('.group'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:33:34.930

您可以使用`wrapAll`.

```
$('div.row').each(function(){
     $('div:not(:first)', this).wrapAll('<div class="group"></div>')
}) 
```

[小提琴](http://jsfiddle.net/pfPvc/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:31:30.763

```
jQuery("div.google") 
```

获取所有具有“google”类的 div。要仅选择第一个出现，请将 [0] 添加到它。

```
jQuery("div.google")[0].append('<div class="group"></div>');
jQuery("div.row > div.google > div.group").append(jQuery("div.mail")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:34:06.160

您可以使用 $(".row").each(...) 依次处理每一行，然后在结果对象上使用 .find(...) 以仅针对其子对象...

# java - 如何使站点数据库的报告部分独立

> ID：12218332
> 
> 赞同：2
> 
> 时间：2012-08-31T15:24:21.567
> 
> 标签：java, spring, jpa

我需要在我的网站上构建一个报告部分，其中包含一些相当复杂的查询，包括 UNION、GROUP_CONCAT 等。到目前为止，JPA 与我的实体的集成保持了数据库的独立性。目前系统使用 MsSQL，但我们希望稍后我们可以根据需要切换到 Postgres 或 MySQL。

使用这些报告有什么好的方法，这样我就可以在 MySQL 或 Postgres 上运行而不需要太多工作？

该站点还使用 Spring

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:32:03.220

正如我所看到的，您的问题或多或少是“我如何在不与该供应商联系的情况下利用供应商特定的功能？”。

这导致不容易回答；可能最灵活的方法是坚持使用 JPA 并吸收性能损失。

其他可能性：

*   将报告定义为发布一组接口的组件。使用 CDI 注入与您选择的数据库相关的实现

*   上面的一个变体，设置你自己的 DAO 接口来访问数据。就像另一个更具体的 ORM 框架一样，它可以具有更好的性能。在此基础上构建报告。

*   如果您的业务允许，请选择 RDBM 用于报告。在夜间（如果没有太多数据，甚至可以按需使用），将您的生产数据库转储到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:29:05.433

最好的选择是使用[数据访问对象](http://en.wikipedia.org/wiki/Data_access_object)，每个数据库一个，每个都符合一个通用接口。任何客户端代码都可以使用通用 DAO 接口，而无需了解底层数据库。

使用 Spring，很容易在 DAO 实现类之间交换作为配置选项，例如，如果您有一个`CustomerDao`具有 Oracle 和 DB2 实现的接口，则使用以下任一种：

```
<bean id="customerDao" class="my.package.customer.OracleCustomerDao"/> 
```

或者

```
<bean id="customerDao" class="my.package.customer.Db2CustomerDao"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:40:20.243

如果您希望您的 SQL 跨多个数据库工作，那么您可以遵循以下计划：

1.  跨多个数据库测试您的 SQL

要获得可移植性，您需要编写可移植的 SQL。确保 SQL 可移植的唯一方法是检查它的可移植性。

如果您坚持使用标准 SQL，那么这应该相当简单；您将无法使用特定于数据库的功能，但是没有它们您可以做很多事情（它们主要是语法糖，或者用于跳出关系模型，希望您不需要这样做） . 如果您已经误入歧途使用非标准 SQL，那么您可能很难做到这一点，但如果您以一种有纪律的方式开始工作，我会对您坚持标准的能力感到乐观.

如果您正在使用 SQL Server，那么 PostgreSQL 将是第二个用于测试的数据库的不错选择，因为它是免费的、易于设置且功能强大。

# entity-framework - 针对域类的查询应该针对实体进行解析

> ID：12218334
> 
> 赞同：0
> 
> 时间：2012-08-31T15:24:28.510
> 
> 标签：entity-framework, repository-pattern, automapper, iqueryable

我正在尝试构建一个允许查询域类的通用存储库。

我的存储库界面如下所示：

```
public interface IRepository<T>
{
    T Get(int id);
    IQueryable<T> Query();
    void Add(T model);
    void Remove(T model);
} 
```

鉴于我有一个`UserEntity`实体框架类和一个`User`域类，我想查询`User`. `UserEntity`不应该暴露给其他服务，因为它应该在实体框架层的内部。

类似的查询`userRepository.Query().Single(user => user.UserName == "Toni")`应该返回一个`User`域类。但是在内部，它应该查询`IDbSet<UserEntity>`从我的实体框架返回的。表达式树（包含`Single`查询操作）应附加到针对`IDbSet<UserEntity>`. 查询后`IDbSet<UserEntity>`我想将其转换`UserEntity`为`User`域类。这可能吗？

我想`IQueryable`为我的`User`类创建一个内部查询的实现`UserEntity`。

```
public class MappedEntityQuery<TModel, TEntity> : IQueryable<TModel>
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:51:28.537

> Code First 要求约定具有所有 IDbSet 属性以访问要位于 DbContext 中的表

那不是真的。如果您在模型构建器中提供到实体的映射，则无需在上下文中声明任何集合。`EntityTypeConfiguration<T>`在您的情况下，您应该通过`ComplexTypeConfiguration<T>`派生类声明映射。您可以通过调用上下文来创建映射实体类型的任何`DbSet`实例。`Set<T>()`

> 然而，对于这个项目，我使用的是 Database First 方法，它也不允许使用来自不同项目的实体加载组合 DbContext，因为您必须在一个元数据文件（将被嵌入）中指定数据库元数据。

这只是部分正确。EDMX 元数据必须位于主项目中嵌入的单个文件中，但如果您使用自己的而不是自动生成的实体类，则不必这样做。所以你提出的方法应该有效。

但是如果你真的想实现模块化，你不应该使用 EDMX。如果您决定在未来添加或更改任何模块，它也需要更改中心项目，但这会影响所有其他模块 - 它打破了模块化的想法，不是吗？

# java - Apache FTPClient : 530 您尚未登录

> ID：12218336
> 
> 赞同：0
> 
> 时间：2012-08-31T15:24:34.430
> 
> 标签：java, android, ftp

我正在使用`FTPClient`apache 从我的服务器获取特定文件的大小。所以，我在 android 中遇到的错误是`530 You aren't logged in`. 虽然我的代码如下所示，并且我已经在纯 Java 中对其进行了测试。我不知道为什么在 Android 上会发生此错误，但在 Java 中一切正常。

```
client.connect("my-server-ip");
client.login("username", "password");
client.setKeepAlive(true);
client.setFileType(FTP.BINARY_FILE_TYPE, FTP.BINARY_FILE_TYPE);
client.setFileTransferMode(FTP.BINARY_FILE_TYPE);

client.sendCommand("SIZE " + "file-path");

try {
    sizeStr = client.getReplyString().trim();
    this.M_fileData.M_contentLength = Long.parseLong(sizeStr.split(" ")[1]);
    System.out.println(sizeStr);
} catch (NumberFormatException e) {
    e.printStackTrace();
    client.disconnect();
} 
```

Java 纯结果是 : `213 1757682`，而 android 结果是`530 You aren't logged in`.

谁能解释我如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:25:01.080

**-**首先，我希望您确保您已获得`android.permission.INTERNET`许可。

为了进一步参考，我给你我用来在我的 android 应用程序中下载音乐剪辑的代码。

我用过`Apache's commons library`

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("50.xx.xx.xx");

            if (con.login("Adminxxxxx", "KUjWbk361wobbyl-xxxxxx"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/vivek.m4a";

                OutputStream out = new FileOutputStream(new File(data));
                boolean result = con.retrieveFile("vivekm4a.m4a", out);
                out.close();
                if (result) Log.v("download result", "succeeded");
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            Log.v("download result","failed");
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T08:01:27.553

每当返回 530 错误代码时，这意味着您的用户名或密码不正确。由于登录失败，您无法上传文件。

# java - 在谷歌收藏中静态初始化地图的最佳方法

> ID：12218345
> 
> 赞同：12
> 
> 时间：2012-08-31T15:25:11.253
> 
> 标签：java, guava

可修改地图静态初始化的最佳方法是什么？我发现只有

```
ImmutableMap.of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4, K k5, V v5) 
```

但是这种方式创建了不可变映射并包含固定的参数列表。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-01T14:06:07.750

如果您确实想要`of`代码时尚，您可以使用：

```
myMap = Maps.newHashMap(ImmutableMap.of(k1, v1, k2, v2...)); 
```

此外，`ImmutableMap.Builder`从复杂源创建地图的其他选择是：

```
myMap = Maps.newHashMap(new ImmutableMap.Builder<K, V>()
                   .put(k1, v1) //One k-v pair 
                   .putAll(otherMap) //From other Map
                   .put(Maps.immutableEntry(k2, v3)) //From a Map Entry
                   ...
                   .build()); 
```

加：我的代码不是 ImmutableMap 的初衷。如果 Nawa 坚持使用 Guava 库；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T15:37:13.787

您实际上不需要静态初始化。以下有什么问题？

```
Map<K, V> map = Maps.newHashMap();
map.put(k1, v1);
map.put(k2, v2);
// More put() calls

// map is now ready to use. 
```

如果需要，您可以围绕它创建一个辅助方法，但您只能创建这么多不同的版本（用于 1 个条目、2 个条目等）。在某些时候，它不再有帮助了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T15:56:18.400

对于可变集合没有意义。我能想到的唯一原因是，在创建最初的小型可变映射时，您希望对此有一个速记。如果您经常需要这种安静，请编写您自己的实用程序方法：

```
public static <K,V> HashMap<K,V> newHashMap(K k1, V v1) {
    HashMap<K, V> map = new HashMap<>();
    map.put(k1, v1);
    return map;
}

public static <K,V> HashMap<K,V> newHashMap(K k1, V v1, K k2, V v2) {
    HashMap<K, V> map = new HashMap<>();
    map.put(k1, v1);
    map.put(k2, v2);
    return map;
}

... 
```

只要您认为它仍然可读，就覆盖它。由于键和值的混合，我认为这很快就会变得难以理解——即使格式正确。番石榴家伙在 5 个键值对上停止了这个，恕我直言。

# java - 是否会在编译时优化局部变量的一次性使用？

> ID：12218346
> 
> 赞同：7
> 
> 时间：2012-08-31T15:25:14.450
> 
> 标签：java, c++, optimization, compiler-construction

```
double calcTaxAmount() {
    double price = getA() * getB() + getC();
    double taxRate = getD() + getE();
    return price * taxRate;
} 
```

上面的函数计算纳税金额。

价格和费率是通过调用其他一些函数来计算的。

我引入了两个局部变量 price 和 taxRate 只是为了提高代码的可读性，所以它们都只会使用一次。大多数现代编译器会在编译时替换和内联这些“一次性”局部变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:31:19.713

一般是的。

Java 仅在多次调用（默认为 10,000 次）后才将代码优化为本机代码。

即使每次有 1 ns 的差异，您也需要调用此方法 10 亿次才能添加 2 秒的延迟。如果它只有 1000 万次，您不太可能注意到差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T15:31:32.583

显然，这取决于编译器。相当多的编译器在优化方面实际上是脑残，因为它们处理的动态语言足够复杂，以至于大多数优化都是无效的，而许多其他的只有在满足非常严格的条件时才是安全的（例如，任何函数调用几乎可以产生任何影响）。例如，所有 Python 实现都具有编译器，但它们中的大多数只做了很少的窥孔优化，这可能不足以消除*所有*开销。

也就是说，如果您谈论的是静态类型语言（您的示例暗示了这一点），那么通常是的。活性分析可以检测等价（你仍然需要一个存储位置，但生命周期是一样的），任何合理的寄存器分配器都可以避免不必要的溢出值。

也就是说，这是一个非常糟糕的优化重点。如果您*真的*想更快地制作东西，请查看带有真实场景的最终代码和配置文件。如果您要进行微优化，请应用一些常识。即使假设此函数是热点，实际计算和获取值也可能很容易花费 100 倍以上的时间。与堆栈存储相比，非内联函数调用需要相当长的时间，并且**在此级别上**缓存未命中也相当昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:31:49.603

只要编译器可以证明它们没有被别名和外部修改，编译器就应该能够优化它们（我怀疑它可以在这里确定）。

如果你制作它们，`const`我想不出一个无法优化它的编译器。

话虽如此，这听起来像是过早的优化，即使代码稍微慢一点，我也不会更改代码，因为它增加了清晰度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:18:01.617

完全取决于 C 的编译器。对于打开了适当优化选项的当前编译器来说，可能是肯定的。

对于 Java，它*不会*被*编译器*(javac) 优化，但它可能会在代码实际执行时被 JIT 优化。

也就是说，这些局部变量无论如何都会增加很少的开销。如果编译器决定将表达式优化为等价于：

```
 return (getA() * getB() + getC()) * (getD() + getE()); 
```

它仍然需要某种形式的临时存储（堆栈或寄存器）来存储子表达式的中间结果。所以无论如何它不应该有太大的不同。

我不会担心它，而是选择提供更好可读性的东西。

# domain-driven-design - 何时更新审计字段？DDD

> ID：12218352
> 
> 赞同：7
> 
> 时间：2012-08-31T15:25:41.193
> 
> 标签：domain-driven-design, auditing, aggregateroot

我有一个会议对象：

`Meeting{id, name, time, CreatedBy, UpdatedBy}`

和一个

`MeetingAssignee{id, MeetingID, EmployeeId, CreatedBy, UpdatedBy)`

会议，作为聚合根，有一个方法 AssignEmployee。

我正要在调用 AssignEmployee 时将当前用户传递给 Meeting 对象，以便它可以相应地更新其审计字段。

但这似乎不对——是吗？显然，我可以公开审计字段并在以后更改它们 - 也许在服务级别？

每个人更新这些字段的其他首选方法是什么？

请注意：我们使用的不是 Nhibernate，而是一个自定义的 ORM，它没有任何自动功能。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:37:21.193

审计和日志记录很有趣，因为它们通常在应用程序的任何地方都需要，并且它们都是要求（记录**是**OP 人员的要求）。

在不了解您的模型的情况下，并且由于必须要求进行审核，因此我会将当前用户传递给`AssignEmployee`那里，而不是在那里显示一行，而是`AuditBlahBlahBlah`添加一个事件（可能是 MeetingUpdated 或 AssigneeAdded ...您会找到一个好名字）并且该事件被分派到进行审计的类。通过这种方式，Meeting 类对审计一无所知，并为审计目的调度业务事件（在我看来，这非常 DDDish）。

我想知道其他人会怎么说（希望我能学到新东西！）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T13:29:54.120

考虑使用领域事件。

你的领域模型中所有有趣的事情都应该引发一个事件，大声喊出刚刚发生的事情。从外部，只需附加将它们转储到数据库或其他地方的日志处理程序。

这样 - 您不需要使用某种 IAudiService 来搞乱您的域。

更好的是——域模型可以使用事件作为一种在自身内部进行通信的方式。
为了说明为什么这是一个好主意 - 想象我们正在描述早晨、日出和鲜花的域模型。

告诉所有的花朵应该开放，是太阳的责任吗？并不真地。太阳只需要足够明亮（引发事件），光必须传播到地球（必须有某种基础设施使事件成为可能），花朵必须在接收光时自己做出反应（其他领域模型应该处理事件）。

另一个类比 - 驾驶员有责任查看交通灯的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:50:13.120

您可以在持久化或更新实体时从服务层调用审计服务，审计服务已被注入任何需要审计功能的服务，并尽快持久化新创建的实体。

我看到很难确定审计的方式和时间，特别是如果您的实体在被持久化之前的某个时间作为可用实体存在于系统中。即使它们在被持久化之前存在了一段时间，也许您可​​以创建内存审计数据，包含它们的创建细节，然后在实体最终持久化时持久化。还是将 created-by、created-on、modified-by、modified-on 等数据设置为实体中的私有字段，并在实体持久化时将其写入审计日志？

我会对权衡取舍感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T12:18:05.280

我认为审计属性不是您的域模型的关注点。如果您的应用程序服务层中可用的所有用例都使用域模型在系统中进行更改，并且聚合根稍后将发生的任何事情作为域事件发布，您可以为任何事件实现处理程序并将它们保存在您需要的审核日志格式。

# sql - SQL：超出范围的值

> ID：12218362
> 
> 赞同：0
> 
> 时间：2012-08-31T15:26:18.797
> 
> 标签：sql, sql-server

以下查询给出了这个错误

```
The conversion of a nvarchar data type to a datetime data type resulted in an out-of-range value. 
```

字段 timedate 在数据库中看起来像 13/11/2012 uk 格式。

任何人都知道如何解决这个问题。

```
 SELECT
         PRODID, ITEMDES, QTY, StockCode,shipName, shipCompany, shipAddress1, shipAddress2, shipAddress3,shipPostCode,shipcity,shipCountry,shipCounty,customerMessage
         FROM orderedItems oi
        left join orders o on oi.order_id = o.order_id

            where( CONVERT(nvarchar(30),timedate,120) >= 
            <cfqueryparam cfsqltype="cf_sql_date" value="#LSDateFormat(form.fromDate, "yyyy-mm-dd")# 00:00:00">
            AND CONVERT(nvarchar(30),timedate,120) <= 
            <cfqueryparam cfsqltype="cf_sql_date" value="#LSDateFormat(FORM.toDate, "yyyy-mm-dd")# 23:59:59">
            )

            Group by PRODID,ITEMDES,QTY, StockCode,shipName, shipCompany, shipAddress1, shipAddress2, shipAddress3,shipPostCode,shipcity,shipCountry,shipCounty,customerMessage

            ORDER BY PRODID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:28:30.837

我认为 sql-server 可能会将您的日期解释为美国格式，也就是说`mm/dd/YYYY`，显然没有第 13 个月，因此出现超出范围的错误。

您可能更适合使用正确的字段类型保存日期。

# opa - 在资源 JS 文件之后执行自定义生成的 JavaScript

> ID：12218364
> 
> 赞同：1
> 
> 时间：2012-08-31T15:26:27.157
> 
> 标签：opa, leaflet

我正在尝试将[Leaflet](http://leaflet.cloudmade.com/)地图添加到我的应用程序中，它需要在包含 Leaflet 的 CSS 和 JS**之后添加一些 JS 代码。**Opa 服务器在`<head>`HTML 节点中添加 CSS，但`<script>`在所有生成的 XHTML 代码之后包含资源 JS 文件。那么，如何为地图添加代码呢？

我查看了[GMaps API](https://github.com/MLstate/opalang/blob/v2988/lib/stdlib/apis/gmaps/gmaps.opa)，但很难相信这是一个好方法。地图是使用 XHTML 添加的：

```
<script>
Xhtml.of_string_unsafe("some JS function loading the map");
</script> 
```

完全用 JS 编写的地图加载器，因为字符串绑定到 onready，生成新的 javascript DOM 元素，并将其附加到文档的末尾。

我可以将包含JS文件的位置更改为文档的开头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:59:29.610

这是一个示例代码，可让您定义自己的标头：

```
headers =
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.js"></script>

Server.start(
   Server.http, {
     dispatch: function(_) {
       Resource.full_page(
         "Leaflet",
         <>Hello Leaflet</>, headers, {success},
         []
       )
     }
   }
) 
```

否则，如果你想在最后追加，你可以使用：

[`Resource.register_external_js("/path/to/my/js")`](http://doc.opalang.org/value/stdlib.core.web.resource/Resource/register_external_js)

[`Resource.register_external_css("/path/to/my/css")`](http://doc.opalang.org/value/stdlib.core.web.resource/Resource/register_external_css)

这在您需要首先加载 jQuery 时很有用（jQuery 嵌入在 all.js 中，位于文档的末尾）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:28:38.207

尽管正如 Fred 指出的那样，`leaflet.js`可能很容易将其包含在文档的标题中，但我仍然使用 JS 来附加到文档末尾的地图：

```
function onready(_) {
  body = Dom.select_body();
  *body =+ <script>{Xhtml.of_string_unsafe(script)}</script>;
  void;
}
<div id="{map_id}" onready={function (_) Dom.bind(Dom.select_document(), {ready}, onready);void}></div> 
```

# apache - 是否可以在 htaccess 中链接 RewriteCond？

> ID：12218368
> 
> 赞同：0
> 
> 时间：2012-08-31T15:26:46.277
> 
> 标签：apache, .htaccess, mod-rewrite

我将`%{HTTP_HOST}`在我的文件中做一些基本的工作，`.htaccess`并且想知道是否可以做类似的事情：

```
RewriteCond %{HTTP_HOST} ((foo|bar|baz).com)$
RewriteCond %{DOCUMENT_ROOT}/apps/%1/webroot%{REQUEST_URI}  -d [OR]
RewriteCond %{DOCUMENT_ROOT}/apps/%1/webroot%{REQUEST_URI}  -f
  RewriteRule %{DOCUMENT_ROOT}/apps/%1/webroot%{REQUEST_URI} [L]

RewriteRule ^(.*)$ index.php?uri=$1 [QSA,L] 
```

基本上，如果有人访问`foo.com`任何子域，我希望他们直接从该文件夹获得文件，但也有任何不针对特定文件的请求发送到我的`index.php`文件进行处理（这将执行路由）

我问的原因是因为我上面写的实际上不起作用，那么有没有办法做到这一点？（如果这应该有效，那么我的`.htaccess`文件的其余部分显然会出现问题，但在处理一个应用程序文件夹时一切正常）

另一种（混乱的 IMO）方法是将所有内容路由到文件夹并`.htaccess`为每个域创建第二个文件，但如果可以在一个文件中完成，我宁愿不这样做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:32:22.090

您的第一个重写规则缺少正则表达式，这使您尝试匹配的重写引擎事物（作为正则表达式）`%{DOCUMENT_ROOT}/apps/%1/webroot%{REQUEST_URI}`并且您想将其重写为`[L]`. 我怀疑你希望它看起来像：

```
RewriteRule ^ /apps/%1/webroot%{REQUEST_URI} [L] 
```

`^`匹配任何内容，因为您已经使用 3 个条件审查了请求。

现在您需要在最后一条规则中添加一些条件，这样它就不会盲目地应用于所有内容。你可能想要这样的东西：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?uri=$1 [QSA,L] 
```

# php - Facebook 动作和对象提交

> ID：12218375
> 
> 赞同：-1
> 
> 时间：2012-08-31T15:27:09.607
> 
> 标签：php, facebook, blackberry

我是 Facebook sdk 的新手，我想在我的项目（黑莓应用程序）中使用它有开发人员我尝试通过 Web 服务使用下面的代码写入我的时间线，我能够写入我的时间线，我的问题是这个：我必须创建一个动作和对象，在其他用户可以使用我的应用程序写入他们的时间线之前必须提交批准吗？因为当用户尝试写入他们的时间线时，没有授予权限。

```
$ret_obj = $facebook->api('/me/feed', 'POST',array('link' => 'www.****.com','message' => $user_profile["name"].' just downloaded W1'));
    echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:36:40.287

不一定，如果您只想发布帖子。但是，您的用户需要对应用程序进行身份验证才能发布到他们的时间线。如果您已经注册了应用程序（请参见[此处](https://developers.facebook.com/apps)），则需要将`publish_actions`权限添加到您的应用程序。

有关更多详细信息，请参阅[文档](https://developers.facebook.com/docs/reference/php/facebook-api/)。

# asp.net-mvc - 如何显示较少数量的页面链接？

> ID：12218377
> 
> 赞同：0
> 
> 时间：2012-08-31T15:27:15.557
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, pagination

-我正在使用 MVC 3，AdventureworksLT 数据库

- 有很多记录，所以页面链接的数量增加到了30个。 ![在此处输入图像描述](../Images/2652f3260e2449f9f755431892d078f8.png)

*   我想显示较少数量的页面链接。
*   这是视图的代码

    [查看代码](http://ideone.com/DCN8s)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:08:40.787

您需要更改生成这些链接的循环以仅显示特定范围的页码。通常提供指向第一页和最后一页的链接，其中包含指向页面的链接 + 或 - 远离当前页面的任意数量的页面。

```
@{
    ViewBag.PageRange = 3;
}
<div class = "pagination">
    Page:

    <a href="@Url.Action("products","home",new{page = 1})">First</a>&nbsp;

    @for (int p = 1; p <= ViewBag.TotalPages; p++)
    {
        if (p >= ViewBag.CurrentPage - ViewBag.PageRange && p <= ViewBag.CurrentPage + ViewBag.PageRange)
        {
            <a class="@(p==ViewBag.CurrentPage ? "Current" : "")"
            href="@Url.Action("products","home",new{page = p})">@p</a>
        }
    }

    &nbsp;<a href="@Url.Action("products","home",new{page = ViewBag.TotalPages})">Last</a>
</div> 
```

现在，您要显示什么范围以及要以何种方式显示该范围完全取决于您，但这基本上是您要寻找的。有很多方法可以做到这一点。

# javascript - 如何从数据库中获取值，并在 javascript 函数中插入

> ID：12218378
> 
> 赞同：0
> 
> 时间：2012-08-31T15:27:22.867
> 
> 标签：javascript, jquery

我有我的 Facebook 分享脚本：

```
<script>
    $(document).ready(function(){

        $('#share_button').click(function(e){
            e.preventDefault();
            FB.ui(
            {
                method: 'feed',
                name: 'This is the content of the "name" field.',
                link: ' http://www.hyperarts.com/',
                picture: 'http://www.hyperarts.com/external-xfbml/share-image.gif',
                caption: 'This is the content of the "caption" field.',
                description: 'This is the content of the "description" field, below the caption.',
                message: ''
            });
        });     

    });  
  </script> 
```

但是，我想从数据库中获取“名称”、“链接”、“图片”等的值，也许是一个简单的访问 mbd 文件。我将使用 Classic ASP 来连接这个数据库...

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:31:03.533

您需要创建一个服务器端脚本（例如使用 php/mysql 或 asp.net，...），它从数据库中读取您需要的值并以 JSON 格式输出它们，然后使用 ajax 获取脚本的 JSON输出并使用响应值创建您的 FB 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:39:17.213

真的，非常简单的使用[cherrypy的python服务器](http://www.cherrypy.org)

```
import cherrypy
import json

names = ['Bob'] // List of names. You call fill this from a DB
class BasicServer:
    @cherrypy.expose
    def names(self):
        return json.dumps(names) // Returns a JSON list of names from the DB.

cherrypy.quickstart(BasicServer()) 
```

真的，来自服务器的基本请求。

```
$('#share_button').click(function(e){
    e.preventDefault();
    var names = null;
    // Request all the data you want from the server.
    $.when($.get('serverAddress/names', function(data) { names = data; }))
       // When all your requests are done, call your FB.ui function.
      .done(FB.ui({name: names[0]}); // Just selects the first name ('bob')
} 
```

你真正想要的是某种模板引擎。这样您就可**以为您的页面提供****预先填充**的数据。由于这里的示例是 python，请查看[MAKO](http://www.makotemplates.org/)或[mustache之类的库](http://mustache.github.com/)

# javascript - whmcs 和我的 Javascript 文件的问题

> ID：12218379
> 
> 赞同：0
> 
> 时间：2012-08-31T15:27:25.777
> 
> 标签：javascript, html, whmcs

所以我有我自己的 javascript 文件，用于将鼠标悬停在我网站顶部的登录框上。我使用 WHMCS 进行计费和订购。Whmcs 使用他们大量编辑的 Jquery 库。删除它会破坏导航栏和其他所有内容，包括域名订购单。

这是悬停登录框工作所需的我的 JS 文件 - [http://pastebin.com/hGH93abr](http://pastebin.com/hGH93abr)

这是 WHMCS 的 Jquery js 文件 - [http://pastebin.com/jdZ1676e](http://pastebin.com/jdZ1676e)

现在我已经删除了 whmcs 的 Jquery.js 并将其替换为我的 js 文件。然后将鼠标悬停在登录框上效果很好，但是 whmcs 上的所有东西都坏了，或者不再工作了。我尝试了 jquery 无冲突模式，但由于某种原因它没有做很多事情

# android - Android 模拟器在启动时崩溃

> ID：12218380
> 
> 赞同：-1
> 
> 时间：2012-08-31T15:27:30.453
> 
> 标签：android, android-emulator

大家好 :) 我决定用 NetBeans 试用 Android SDK。我安装了 SDK 和包，创建了 ADV，安装了 NetBeans 插件。我写了一个小应用程序，然后启动它。起初它没有出现。我再次启动，我的防病毒软件要求访问网络，我欣然同意了。然后设备显示黑屏，我关闭了窗口，而我的 NetBeans 窗口根本没有更新（就像模拟器仍在运行一样）。下一次运行只是在任务管理器中弹出新进程并立即离开那里。直接从 SDK 管理器运行模拟器刚刚返回 emulator-arm.exe 没有响应窗口。我的详细运行给出了这个：

```
emulator: found SDK root at D:\Programming\Android SDK
emulator: Android virtual device file at: C:\Users\Teodor\.android/avd/AVD16.ini
emulator: virtual device content at C:\Users\Teodor\.android\avd\AVD16.avd
emulator: virtual device config file: C:\Users\Teodor\.android\avd\AVD16.avd/config.ini
emulator: using core hw config path: C:\Users\Teodor\.android\avd\AVD16.avd/hardware-qemu.ini
emulator: Found AVD target API level: 16
emulator: found skin 'WVGA800' in directory: D:\Programming\Android SDK/platforms\android-16\skins
emulator: autoconfig: -skin WVGA800
emulator: autoconfig: -skindir D:\Programming\Android SDK/platforms\android-16\skins
emulator: found skin-specific hardware.ini: D:\Programming\Android SDK/platforms\android-16\skins/WVGA800/hardware.ini
emulator: keyset loaded from: C:\Users\Teodor\.android\default.keyset
emulator: trying to load skin file 'D:\Programming\Android SDK/platforms\android-16\skins/WVGA800/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: autoconfig: -kernel D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/kernel-qemu
emulator: autoconfig: -ramdisk D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/ramdisk.img
emulator: Using initial system image: D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/system.img
emulator: autoconfig: -data C:\Users\Teodor\.android\avd\AVD16.avd/userdata-qemu.img
emulator: autoconfig: -initdata C:\Users\Teodor\.android\avd\AVD16.avd/userdata.img
emulator: autoconfig: -cache C:\Users\Teodor\.android\avd\AVD16.avd/cache.img
emulator: autoconfig: -sdcard C:\Users\Teodor\.android\avd\AVD16.avd/sdcard.img
emulator: Physical RAM size: 512MB

Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.cpu.model = cortex-a8
  hw.ramSize = 512
  hw.screen = touch
  hw.mainKeys = yes
  hw.trackBall = yes
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = qwerty2
  hw.dPad = yes
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  hw.sdCard.path = C:\Users\Teodor\.android\avd\AVD16.avd/sdcard.img
  disk.cachePartition = yes
  disk.cachePartition.path = C:\Users\Teodor\.android\avd\AVD16.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 480
  hw.lcd.height = 800
  hw.lcd.depth = 16
  hw.lcd.density = 240
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = emulated
  hw.camera.front = none
  vm.heapSize = 48
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/kernel-qemu
  kernel.parameters =  android.checkjni=1
  disk.ramdisk.path = D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/ramdisk.img
  disk.systemPartition.initPath = D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/system.img
  disk.systemPartition.size = 200m
  disk.dataPartition.path = C:\Users\Teodor\.android\avd\AVD16.avd/userdata-qemu.img
  disk.dataPartition.size = 200m
  avd.name = AVD16
.
QEMU options list:
emulator: argv[00] = "./emulator-arm.exe"
emulator: argv[01] = "-android-hw"
emulator: argv[02] = "C:\Users\Teodor\.android\avd\AVD16.avd/hardware-qemu.ini"
Concatenated QEMU options:
 ./emulator-arm.exe -android-hw C:\Users\Teodor\.android\avd\AVD16.avd/hardware-qemu.ini
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0xc800000,initfile=D:\Programming\Android SDK/system-images\android-16\armeabi-v7a\/system.img
emulator: mapping 'system' NAND image to C:\Users\Teodor\AppData\Local\Temp\\AndroidEmulator\TMPD8B6.tmp
emulator: rounding devsize up to a full eraseunit, now c810000
emulator: nand_add_dev: userdata,size=0xc800000,file=C:\Users\Teodor\.android\avd\AVD16.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now c810000
emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '48m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '240'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
emulator: nand_add_dev: cache,size=0x4200000,file=C:\Users\Teodor\.android\avd\AVD16.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 ndns=1
Failed to allocate memory: 1455

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我责备我没有等到我的第一次运行显示ANDROID字母的事实。所以现在我不知道该怎么办......重新安装所有东西（我的互联网连接需要很长时间才能做到这一点）还是有更好的解决方案？

PS我尝试删除和添加虚拟设备

**编辑：**杀死从系统运行的任务管理器中的 adb.exe 没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:31:03.043

我发现 Eclipse 在 android 应用程序开发方面比 Net Beans 更方便。如果您可以重新考虑使用 Development Tool 的选项，我会说 Eclipse 是一个更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:07:23.610

您需要了解有关 Android 开发的第一件事是阅读实际阅读日志并在谷歌上搜索错误。搜索时是否尝试过不同论坛提供的解决方案

```
android emulator Failed to allocate memory: 1455 
```

无论如何，你迟早会想在真实设备上测试你的东西，为自己省去很多对模拟器的挫败感，并获得一部便宜的安卓手机。

# c# - 如何在 Silverlight 导航应用程序中检测后退按钮或前进按钮导航

> ID：12218384
> 
> 赞同：6
> 
> 时间：2012-08-31T15:27:41.857
> 
> 标签：c#, .net, silverlight, silverlight-5.0

在 Silverlight 中导航到页面时，您可以覆盖此方法。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
} 
```

有`NavigationEventArgs`一个`NavigationMode`枚举，定义为

```
public enum NavigationMode
{
    New = 0,
    Back = 1,
    Forward = 2,
    Refresh = 3,
} 
```

但是调用`e.NavigationMode`总是抛出一个`NotImplementedException`

是否有一种方法可以在silverlight 中检测到正在导航到的页面，因为用户点击了前进/后退浏览器按钮。

我想要实现的是用户点击后退按钮时可以保留的某种状态。

例如，假设您有一个客户页面，它在数据网格中显示客户列表。用户可以选择一个客户，并且有一个详细视图显示该客户的所有订单。现在，在一个订单项目中，您可以单击一个超链接链接，该链接将您带到该订单的运输历史记录，这是一个单独的页面。当用户点击后退按钮时，我想返回客户页面并自动选择他正在查看的客户。这可能吗？

我还尝试了片段导航功能

```
NavigationService.Navigate(new Uri("#currentcustomerid=" 
       + customer.Id.ToString(), UriKind.Relative)); 
```

当客户选择发生变化，但是当用户点击客户页面上的各种客户时，这会将太多项目添加到历史记录中。

**编辑**

还有一种方法可以覆盖

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
{
} 
```

这与处理 NavigationService.Navigating 事件相同，如 BugFinder 的回答所示。当您点击后退或前进按钮时，此方法`e.NavigationMode`总是返回。`New`此方法唯一返回的时间`Back`是您显式调用`NavigationService.GoBack()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:05:46.000

这

```
public enum NavigationMode 
{ 
    New = 0, 
    Back = 1, 
    Forward = 2, 
    Refresh = 3, 
} 
```

适用于导航事件..

如果我做

```
_ns.Navigating += ns_Navigating;
        void ns_Navigating(object sender, NavigatingCancelEventArgs e)
        {

            if (SecurityCheck(e.Uri.OriginalString)) return;
            e.Cancel = true;
            ShowError("You are not authorised to view this page");
        } 
```

我可以在那里看到 e.NavigationMode 已设置。你可以在那里做你的测试吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:33:37.390

据我所知，我认为没有任何简单的方法可以开箱即用。

[使用我在http://ultimateframework.codeplex.com](http://ultimateframework.codeplex.com)创建的框架可以轻松完成您想要实现的目标

我所做的是将silverlight导航框架和prism导航网格在一起，所以你需要unity和prism和mvvm友好。

您想要实现的目标可以通过以下方式使用框架完成

1) 实现 IsNavigationTarget 并返回 true --> 这将在返回时保持相同的实例，因此保持选择/选定的项目。

2) 访问 onnavigatedto 的日志以跟踪您来自哪里，例如 /item/1 是前一个堆栈，因此您知道从项目 1 按下了后退按钮。

3）您甚至可以在为实现相同结果而提供的自定义控件中实现自己的后退/前进/刷新（尚未在 codeplex 中）

我实际上在工作中将它用于生产代码，并且我创建了它，所以请随意尝试。请注意，那里的版本有问题，我还没有时间发布我们的最新版本，但是如果您需要它，我会为您更新它:)，请私信我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T23:05:39.927

在用户控件中设置一个变量，该变量包含指示哪些客户处于活动状态的内容框。

在用户控件中为 contentframe 的 Navigated 事件添加处理程序。使用它来检查指示哪个客户处于活动状态的变量（如果变量不为空），并选择客户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:46:56.027

这可能是您正在寻找的：

[http://jakkaj.wordpress.com/2008/09/08/control-silverlight-by-using-browser-back-and-foward-buttons/](http://jakkaj.wordpress.com/2008/09/08/control-silverlight-by-using-browser-back-and-foward-buttons/)

# iphone - 如何在一个应用程序中将 .xib 文件作为模板重新使用到另一个 .xib 文件？

> ID：12218386
> 
> 赞同：1
> 
> 时间：2012-08-31T15:27:43.623
> 
> 标签：iphone, xib

如何在一个应用程序中将 .xib 文件作为模板重新使用到另一个 .xib 文件。我想要一个类似于模板的 xib（例如带有徽标的 xib），我将像在另一个 xib 文件上的子视图一样导入它。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:08:35.043

在要导入的 xib 中定义一个新视图，并创建一个类文件：

```
@interface MyView : UIView 
```

在对象检查器中将 MyView 设置为 xib 视图的类。从另一个xib，放置一个空视图，然后将其类更改为`MyView`

# mysql - MySQL 分组和排序

> ID：12218392
> 
> 赞同：1
> 
> 时间：2012-08-31T15:27:58.880
> 
> 标签：mysql, sql

我正在尝试对会话等消息进行分组，并仅显示会话中的最新消息，因此我需要该列中数字最高的消息`time`。

这是我的查询：

```
SELECT * 
FROM console_msgs 
WHERE `to` = $user[id] 
GROUP BY `from` 
ORDER BY time DESC 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:32:53.393

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT console_msgs.*
FROM   console_msgs NATURAL JOIN (
         SELECT   MAX(time) AS time
         FROM     console_msgs
         WHERE    `to` = $user[id]
         GROUP BY `from`
       ) t
WHERE  `to` = $user[id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:32:22.043

我不太了解您需要返回的结果集，但我认为您需要使用 LIMIT 关键字来仅返回最高结果。试试这个：

```
SELECT from, MAX(time) 
FROM console_msgs 
WHERE `to` = $user[id] 
GROUP BY `from` 
ORDER BY time DESC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:36:45.093

你不会想用它`GROUP BY`来实现我认为你所要求的。你只想要多个订单

```
SELECT * 
FROM console_msgs 
WHERE `to` = $user[id] 
ORDER BY `from`, time DESC 
```

# core-data - 永久 NSManagedObjectID 不是那么永久吗？

> ID：12218396
> 
> 赞同：11
> 
> 时间：2012-08-31T15:28:25.470
> 
> 标签：core-data, nsmanagedobject, magicalrecord

我在处理 CoreData 中的对象 ID 时遇到问题。为方便起见，我使用 MagicalRecord 并具有 3 个上下文：私有队列工作上下文、UI 的主队列上下文和工作上下文的父级，以及作为主上下文父级的私有队列保存上下文。

我的目标是在工作上下文中创建一个对象，保存到持久存储，将它的 objectID URL 保存到 NSUserDefaults，然后稍后能够使用 objectID 拉出 MO。但是，我发现保存对象的永久 ID 后正在发生变化。

在下面的控制台输出中，您可以看到，在我请求永久 ID 后，我得到的值是“F474F6EE-A225-456B-92EF-AB1407336F15/CDBaseAccount/p1”，但后来当我列出 CD 中的所有对象时，那里唯一的对象ID 为“F474F6EE-A225-456B-92EF-AB1407336F15/CDBaseAccount/p2”。p1 vs p2，发生了什么？

代码：

```
 NSManagedObjectContext *c = [NSManagedObjectContext MR_contextThatPushesChangesToDefaultContext];
  [c performBlockAndWait:^{

      NSArray *all = [CDBaseAccount MR_findAllInContext:c];
      NSLog(@"count: %d", all.count);
      NSLog(@"all accounts = %@", all);

      CDBaseAccount *a = [CDBaseAccount MR_createInContext:c];
      a.accountName = @"foo";

      [c MR_saveNestedContexts];

      NSLog(@"temp a.objectID = %@", a.objectID);

      NSError *error;
      if (![c obtainPermanentIDsForObjects:@[a] error:&error]) {
          NSLog(@"perm id error: %@", error);
          return;
      }

      NSLog(@"perm a.objectID = %@", a.objectID);

      NSURL *u = a.objectID.URIRepresentation;

      dispatch_async(dispatch_get_main_queue(), ^{
          NSManagedObjectContext *d = [NSManagedObjectContext MR_defaultContext];

          NSArray *all = [CDBaseAccount MR_findAllInContext:d];
          NSLog(@"count: %d", all.count);
          NSLog(@"all accounts = %@", all);

          NSManagedObjectID *i = [d.persistentStoreCoordinator managedObjectIDForURIRepresentation:u];
          NSError *objWithIdError = nil;
          NSManagedObject *o = [d existingObjectWithID:i error:&objWithIdError];
          if (objWithIdError != nil) {
              NSLog(@"existing object error: %@", objWithIdError);
              return;
          }

          NSLog(@"o = %@", o);
          NSLog(@"o.objectID = %@", o.objectID);

      });
  }]; 
```

控制台输出：

```
 > +[NSManagedObjectContext(MagicalRecord) MR_contextWithStoreCoordinator:](0xa7c9b0) -> Created <NSManagedObjectContext: 0x83522a0>:  Context *** MAIN THREAD ***
  > count: 0
  > all accounts = (
  > )
  > -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x8353de0) -> Saving <NSManagedObjectContext: 0x8353de0>:  Context *** MAIN THREAD ***
  > -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x8195450) -> Saving <NSManagedObjectContext: 0x8195450>: *** DEFAULT *** Context *** MAIN THREAD ***
  > -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x83522a0) -> Saving <NSManagedObjectContext: 0x83522a0>: *** BACKGROUND SAVE *** Context *** MAIN THREAD ***
  > temp a.objectID = 0x8187ee0 <x-coredata:///CDBaseAccount/tF392AC6A-3539-4F39-AC53-35F9E5B3C9322>
  > perm a.objectID = 0x8355800 <x-coredata://F474F6EE-A225-456B-92EF-AB1407336F15/CDBaseAccount/p2>
  > count: 1
  > all accounts = (
      "<CDBaseAccount: 0x844ca60> (entity: CDBaseAccount; id: 0x844a4c0 <x-coredata://F474F6EE-A225-456B-92EF-AB1407336F15/CDBaseAccount/p1> ; data: <fault>)"
  )
  > existing object error: Error Domain=NSCocoaErrorDomain Code=133000 "The operation couldn’t be completed. (Cocoa error 133000.)" UserInfo=0x864d8c0 {NSAffectedObjectsErrorKey=(
      "<CDBaseAccount: 0x864b8c0> (entity: CDBaseAccount; id: 0x86405c0 <x-coredata://F474F6EE-A225-456B-92EF-AB1407336F15/CDBaseAccount/p2> ; data: <fault>)"
  )} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-31T15:38:05.860

简短的回答是，不要那样做:)

`-objectID`在您的应用程序启动之间不可靠。在以下条件下保证其唯一性和可靠性：

1.  在应用程序的单个生命周期内
2.  以其原始对象形式（不是 URL 或 NSString 形式）

将`-objectID`视为要存储在持久存储之外的永久唯一标识符会经常让您失败。`-objectID`Core Data在对象的生命周期中多次更改底层细节。

如果您需要一个外部可靠的唯一性，那么您需要自己创建一个。我通常建议将 a 添加`[[NSProcessInfo processInfo] globallyUniqueString]`到任何需要外部引用的唯一实体。 `-awakeFromInsert`是这样做的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:56:03.770

这可能是因为您使用的是嵌套上下文。

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

static NSArray *fetchAllPersons(NSManagedObjectContext *moc);
static NSManagedObjectModel *managedObjectModel();
static NSManagedObjectContext *createManagedObjectContext();
static NSURL *desktopDirectoryURL(void);

static void testObjectID(void);

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        dispatch_async(dispatch_get_global_queue(0, 0), ^{
            testObjectID();
        });
    }
    dispatch_main();
    return 0;
}

static void testObjectID(void)
{
    NSManagedObjectContext *c = createManagedObjectContext();
    [c performBlock:^{

        NSArray *all = fetchAllPersons(c);
        NSLog(@"count: %lu", all.count);
        NSLog(@"all accounts = %@", all);

        NSManagedObject *a = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:c];
        [a setValue:@"foo" forKey:@"name"];

        NSLog(@"temp a.objectID = %@", a.objectID);
        NSError *error = nil;
        NSCAssert([c obtainPermanentIDsForObjects:@[a] error:&error], @"perm id error: %@", error);
        NSLog(@"perm a.objectID = %@", a.objectID);

        NSCAssert([c save:&error], @"Save failed: %@", error);

        NSURL *u = a.objectID.URIRepresentation;

        dispatch_async(dispatch_get_global_queue(0, 0), ^{
            NSManagedObjectContext *d = createManagedObjectContext();

            NSArray *all = fetchAllPersons(c);
            NSLog(@"count: %lu", all.count);
            NSLog(@"all accounts = %@", all);

            NSManagedObjectID *i = [d.persistentStoreCoordinator managedObjectIDForURIRepresentation:u];
            NSError *objWithIdError = nil;
            NSManagedObject *o = [d existingObjectWithID:i error:&objWithIdError];
            NSCAssert(o != nil, @"existing object error: %@", objWithIdError);

            NSLog(@"o = %@", o);
            NSLog(@"o.objectID = %@", o.objectID);
        });
    }];
}

static NSArray *fetchAllPersons(NSManagedObjectContext *moc)
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
    NSError *error = nil;
    NSArray *result = [moc executeFetchRequest:request error:&error];
    NSCAssert(result != nil, @"Fetch failed: %@", error);
    return result;
}

static NSManagedObjectModel *managedObjectModel()
{
    static NSManagedObjectModel *mom = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSEntityDescription *personEntity = [[NSEntityDescription alloc] init];
        [personEntity setName:@"Person"];

        NSAttributeDescription *nameAttribute = [[NSAttributeDescription alloc] init];

        [nameAttribute setName:@"name"];
        [nameAttribute setAttributeType:NSStringAttributeType];

        [personEntity setProperties:@[nameAttribute]];

        mom = [[NSManagedObjectModel alloc] init];
        [mom setEntities:@[personEntity]];
    });
    return mom;
}

static NSManagedObjectContext *createManagedObjectContext()
{
    static NSPersistentStoreCoordinator *coordinator;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: managedObjectModel()];

        NSString *STORE_TYPE = NSSQLiteStoreType;
        NSString *STORE_FILENAME = @"foobar.db";

        NSError *error;
        NSURL *url = [desktopDirectoryURL() URLByAppendingPathComponent:STORE_FILENAME];

        NSPersistentStore *newStore = [coordinator addPersistentStoreWithType:STORE_TYPE
                                                                configuration:nil URL:url options:nil
                                                                        error:&error];

        if (newStore == nil) {
            NSLog(@"Store Configuration Failure\n%@",
                  ([error localizedDescription] != nil) ?
                  [error localizedDescription] : @"Unknown Error");
        }
    });

    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [moc setPersistentStoreCoordinator:coordinator];

    return moc;
}

static NSURL *desktopDirectoryURL(void)
{
    static NSURL *URL;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSFileManager *fileManager = [[NSFileManager alloc] init];
        NSError *error;
        URL = [fileManager URLForDirectory:NSDesktopDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:&error];
        NSCAssert(URL != nil, @"Could not access Desktop directory: %@", [error localizedDescription]);
    });
    return URL;
} 
```

输出：

```
count: 0
all accounts = (
)
temp a.objectID = 0x10180e640 <x-coredata:///Person/tB1D48677-0152-4DA9-8573-7C7532863B4E2>
perm a.objectID = 0x101901bb0 <x-coredata://275C90E5-2598-4DFA-BF4C-E60A336E8BE4/Person/p1>
count: 1
all accounts = (
    "<NSManagedObject: 0x10180e5b0> (entity: Person; id: 0x101901bb0 <x-coredata://275C90E5-2598-4DFA-BF4C-E60A336E8BE4/Person/p1> ; data: {\n    name = foo;\n})"
)
o = <NSManagedObject: 0x100416530> (entity: Person; id: 0x100415b60 <x-coredata://275C90E5-2598-4DFA-BF4C-E60A336E8BE4/Person/p1> ; data: {
    name = foo;
})
o.objectID = 0x100415b60 <x-coredata://275C90E5-2598-4DFA-BF4C-E60A336E8BE4/Person/p1> 
```

# orchardcms - 需要有关自定义模块的 Orchard CMS 教程

> ID：12218398
> 
> 赞同：-2
> 
> 时间：2012-08-31T15:28:33.233
> 
> 标签：orchardcms

我搜索了[http://docs.orchardproject.net](http://docs.orchardproject.net)，但是没有很多关于 Orchard CMS 的教程。

我还搜索了 Orchard 自定义模块教程，但找不到任何好的材料或网站。

谁能告诉我在哪里可以获得涵盖果园的完整教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:38:56.230

我相信这个问题已经被问到并得到了回答，但我找不到确切的任务。

但是，[Pluralsight.com](http://pluralsight.com/training/Courses/TableOfContents/adv-orchard)上有 Kevin Kuebler 的视频可以帮助您入门。

# mysql - SELECT RAND AS 字段，同时选择字段修改的其他值

> ID：12218402
> 
> 赞同：1
> 
> 时间：2012-08-31T15:28:40.357
> 
> 标签：mysql, sql, random, subquery, selection

我试图简化这一点，因此它更多的是实际代码的示例。我想得到一个随机数并用它来修改几个值，但我需要用同一个随机数修改所有值。

我的一般 SELECT 语句类似于：

```
SELECT id, value1, value2 
```

我希望每个值都乘以相同的随机数

我知道这行不通，因为那样它将使用 2 个不同的随机数：

```
SELECT id, value1 * FLOOR(RAND()*10), value2 * FLOOR(RAND()*10) 
```

所以我想要这样的东西，但这是错误的，因为我不知道我在做什么：

```
SELECT id, FLOOR(RAND()*10) AS rmod, value1 * rmod, value2 * rmod 
```

我肯定需要阅读 SQL 中更高级的选择方法，也许有人可以指出我正确的方向？我认为子查询？我知道我可以做一些事情，比如在我的 PHP 代码中创建一个随机数，然后将它拼接到 SQL 命令字符串中，但我正在寻找一个专门的 SQL 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:53:33.720

考虑一下：

```
select @r:=rand(),@r; 
```

第一次调用 rand() 设置变量 @r 可以在后续表达式中使用。在您的示例中：

```
SELECT id, value1 * FLOOR(@rand:=RAND()*10), value2 * FLOOR(@rand*10) 
```

# c# - 哪些文本编写类对于编写大量小文件最有效？

> ID：12218404
> 
> 赞同：1
> 
> 时间：2012-08-31T15:28:55.540
> 
> 标签：c#

我必须每小时将 300 多个文件写入服务器共享。使用 CreateText 快速实现每个文件大约需要 1.4 秒。我知道有更好的方法可以做到这一点，但我不确定*哪种*方法实际上是最快/最有效的；因此我的问题：

**哪个文本写入类最有效地将数百个小文件（平均 336 字节）写入服务器共享？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:31:08.870

我会推荐[File.WriteAllText Method](http://msdn.microsoft.com/en-us/library/ms143375.aspx) .Lesson 是，让 C# 以它自己的方式来做，因为实现者必须关心性能。

我尝试使用以下代码对两个函数进行基准测试（如果您有更好的代码，请随时提出建议）：-

```
class Program
    {       
        static void Main(string[] args)
        {
            const int _max = 1000000;
            string data = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
            string path="First\\" + "txt";
            string path2 = "Second\\" + "txt";
            var s1 = Stopwatch.StartNew();
            for (int i = 0; i < 336; i++)
            {
                File.WriteAllText(path+i, data);
            }
            s1.Stop();

            var s2 = Stopwatch.StartNew();
            for (int i = 0; i < 336; i++)
            {
                using (StreamWriter sw = new StreamWriter(path2+i))
                {                   
                        sw.WriteLine(data);                    
                }
            }
            s2.Stop();

            Console.WriteLine("Loop1 {0}\n",((double)(s1.Elapsed.TotalMilliseconds * 1000000) / _max).ToString("0.00 ns"));
            Console.WriteLine("Loop2 {0}\n", ((double)(s2.Elapsed.TotalMilliseconds * 1000000) / _max).ToString("0.00 ns"));
            Console.ReadKey();
        }
    } 
```

* * *

> 我得到以下输出： -

![输出](../Images/e91be37ab4bfc64acee69ce360baa133.png)

对于`3360`输出的文件计数是：-

```
Loop1 16880.90 

Loop2 17285.55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:32:08.487

为此使用 StreamWriter 会很好。不过，您可能最好的做法是并行执行其中的许多操作，并让操作系统以最有效的方式处理全部内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:52:46.673

如前所述，使用并行编程/线程 - 基本上，如果您有 400 个循环和 4 个核心，它将在每个核心上执行 100 个循环等。我认为快速高效。

```
 //File name and list of string content
  var fileAndContent = new Dictionary<string, List<string>>();
  Parallel.ForEach(fileContent, currentFile => { File.WriteAllLines(currentFile.Key, currentFile.Value); }); 
```

请参阅下面的链接。

[http://msdn.microsoft.com/en-us/library/dd460717](http://msdn.microsoft.com/en-us/library/dd460717)

[http://msdn.microsoft.com/en-us/library/dd460720](http://msdn.microsoft.com/en-us/library/dd460720)

在括号中，您可以放置​​处理每个文件的逻辑。将您的文件路径和字符串内容添加到字典中 - 然后在括号内处理您保存文件的逻辑，无论哪种方式，您都可以使用并行编程做您需要的事情，并在 lambda 表达式注释之后处理括号内已保存文件的验证，如果您什么都不懂:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T16:12:23.080

我做了一个实验，我使用 StreamWriter.Write 和 File.WriteAllText 将一些长度为 1700 字节的任意 lorem ipsum 文本写了 300 次到 300 个不同的文本文件（你知道，file1.txt、file2.txt 等）。使用 StreamWriter 需要 251 毫秒，使用 WriteAllText 需要 161 毫秒。

这是我使用的基本代码：

```
string filename = @"c:\zfile";
Stopwatch sw = new Stopwatch();
sw.Start();
for (int x = 0; x < 300; x++)
{
    string newfn = filename + x.ToString() + ".txt";

    StreamWriter writer = new StreamWriter(newfn);
    writer.Write(text);
    writer.Close();
}
sw.Stop();
long em = sw.ElapsedMilliseconds;

Console.Write(em.ToString()); 
```

对于 File.WriteAllText，将 StreamWriter 代码替换为：

```
File.WriteAllText(newfn, text); 
```

我不知道你在写这个*CreateText*是什么，但它似乎很慢。

# wpf - WPF Printing large custom control

> ID：12218410
> 
> 赞同：1
> 
> 时间：2012-08-31T15:29:09.403
> 
> 标签：wpf, printing, xpsdocument, visual-tree, documentpaginator

I'm sorry if this is a duplicate, but I couldn't find anything relating to it.

I'm trying to create an XpsDocument from a custom control that I have. The custom control already defines properties for a header and a footer, along with the body.

The idea is to be able to use that same control (or derivatives of it) as an input to some custom DocumentPaginator that will create a printer-ready version of that "report", with the header and the footer put on every page, and the controls, inside the body, showing in full (I don't want to create a bitmap of the whole control, then scale it and cut it where the page ends).

Any ideas on how I can split the contents of a user control into pages? Or suggestions on a different way to achieve the printing of the control onto pages?

Thanks a lot in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:09:44.107

检查 VisualDOcumentPaginator； [http://www.codeproject.com/Articles/164033/WPF-Visual-Print-Component](http://www.codeproject.com/Articles/164033/WPF-Visual-Print-Component)

# jquery - jQuery detect scroll of screen and add In static HTML

> ID：12218414
> 
> 赞同：1
> 
> 时间：2012-08-31T15:29:22.560
> 
> 标签：jquery, scroll, detection

I have some code that detects when you scroll which then calls a function.

In this function I want to be able to fade in content as you scroll. So as I reach the bottom of the page it calls a function then snippets of static html is then faded in, say 10 rows of content at a time.

Hopefully someone can help me finish this off as im stuck: -

[http://jsfiddle.net/sTSxS/](http://jsfiddle.net/sTSxS/)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:30:09.953

好的，首先您可能需要某种比例来确定要淡入多少行。为什么需要这个比例？如果用户只向下滚动一英寸，您不想淡入 6 英寸的内容。

*我想在这里做一个说明，并指出在您的最终实现中，比例不是您想要使用的。尽管这是一种考虑解决方案的简单方法，但实际上您将希望淡入与您的页面位置和内容大小相关的大量内容。此外，您将希望内容淡入，即使访问者看不到整行（如果需要，我稍后可以帮助您）。*

出于我们的目的，假设每行的高度为 20px，行之间没有空格，我们的比率是每滚动 20px 1 行淡入（请注意，按照这个比例，您的内容不会淡入，直到您将其完全滚动到视图中）。

下一步是设计一种方法来跟踪您滚动了多少。为简单起见，我们只使用一个变量来保存当前窗口位置（此变量将在每滚动 20px 后更新）：

```
var current = $(window).scrollTop(); //sets the initial value 
```

接下来，您将想要创建一种方法来跟踪您已经淡入的行数。有很多方法可以做到这一点（有些比我要使用的更好），但为了起见，我将使用一个变量简单的。

```
var rowsShown = 0; 
```

接下来，您需要编写滚动事件处理程序来调用您的代码以确定您是否应该，如果是，则淡入您的行：

```
$(window).scroll(function () {
    ...code to determine if you should and actually fade in rows...
}); 
```

现在您需要编写条件来确定是否应该淡入任何行。您首先编写另一个变量来确定新窗口位置，并将其与之前的位置进行比较，存储在`current`. 请记住，我们的比例是每行 20px，因此窗口必须滚动至少 20px 才能淡入另一行：

```
var newPosition = $(window).scrollTop();

if ((newPosition - current) >= 20) {
    ...fade in rows...
    current += 20; //update current
} 
```

*我想指出，为了我们在这个简单的“教程”中的目的，您需要将 current 设置为比以前多 20，而不是将其更新到新的当前位置 ( `newPosition`)。你为什么问？因为鼠标并不总是一次滚动一个像素（事实上，它们几乎不这样做），所以我们保持简单，每行 20px 淡入，我们希望通过保持当前为 20 的倍数来保持该比例。当需要编写最终版本时，您可能希望将其更改为`current = newPosition;`然而。*

接下来，您将不得不编写淡入代码：

```
$(rowsToFadeIn).eq(rowsShown).fadeIn(speed, function () {
    rowsShown += 1; //increment the accumulator
    ...do any other call back stuff here...
}); 
```

最后，您将需要编写一个类似的方法来向上滚动和淡出您的内容（否则，如果您向上滚动并再次开始向下滚动，您将不会看到您的内容淡出它 - 它会在您面前淡出）。

请注意，这不是完整的实现——这只是为了让你开始。并得到一些东西供您测试和玩耍。一旦你让它工作，我会修改脚本的效果部分以使用`.promise().done()`以确定前一个效果何时完成。如果您对使用 a 感到不舒服，`.promise().done()`那么我会执行以下操作：

1.  创建一个变量`var fading = 0`来保存您当前正在淡出的元素数量。
2.  每次您要开始淡化一个元素时，您将执行以下操作：

    1.  添加一个到`fading`
    2.  通过类似这样的调用调用你的效果：

        `$(rowsToFade).eq(rowsShown).delay((fading - 1) * speed).fadeIn(.....`

        *   `(fading - 1) * speed`等待所有当前正在运行的淡入淡出延迟（不包括您将要运行的淡入淡出）
    3.  在您的`.fadeIn()`方法的回调中，从淡入淡出 ( ) 中减一，`fading -= 1;`以防止不必要的延迟。

如果我是你，我会尽量避免使用计时器。他们有相当多的开销，而且他们永远不会完全按照您的意愿行事。另外，使用淡入淡出之类的东西往往会产生断断续续的效果，尤其是在速度较慢的浏览器中，偶尔在 Chrome 等较快的浏览器中。

如果您对此有任何疑问，请告诉我。我很乐意提供帮助。祝你好运！:)

编辑：我几乎忘记了，如果您的元素是正常流程的一部分，您将不得不将主体或包装元素的高度设置为高度，因为`display: none`（对于`fadeIn`and是必需的`fadeOut`）将从中删除它们流动并将您的页面缩短到没有它们的高度。这可能会导致您甚至没有滚动条。

编辑 2：还请注意，您可以（并且应该如果使用它）改进建议的更新实现，`.delay()`因为您无疑会遇到不必要的延迟。如果您不喜欢 A 计划（`.promise().done()`），则基本上是 B 计划；）

但是，如果您是 jQuery 新手，那么您可能会从改进 B 中学到比使用 A 更多的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:35:40.693

```
if ( $(window).scrollTop() + $(window).height() > ( $(document).height() / 1.2 ) && document.documentElement.scrollHeight != document.documentElement.clientHeight ) {
                doit();

} 
```

# css - Creating a row of three boxes separated

> ID：12218415
> 
> 赞同：0
> 
> 时间：2012-08-31T15:29:24.447
> 
> 标签：css

I am new to css and I have a menu bar that I am working on however I am having a problem with one of the menu ("LINKS") items. If you roll over the Links menu item your notice I have three boxes there that I am trying to separate into there own area. Right now they are over lapping each other. Could you please tell me what I am doing wrong?

I have tried margin-left and padding-left and I find that they either move the box further to the right or widen the box more. But they don't space them out.

You can find the menu bar here: [http://jsfiddle.net/vtjPR/](http://jsfiddle.net/vtjPR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:36:48.330

三个框 (div.col_1) 的宽度设置为 125 像素。但是，框内是定义宽度为 150 像素的链接列表 (ul.blackbox)。此外，其列表项的定义宽度为 130 像素。

# c - Representing a long number using c language

> ID：12218418
> 
> 赞同：0
> 
> 时间：2012-08-31T15:29:31.637
> 
> 标签：c

I am trying to represent a very long number (i.e between 13 to 16 numerical digits) using C . `long long` does not seem to work as I am always getting an overflow problem.

I would appreciate it if someone can help me with this problem, thank you.

```
long long number = 123654123654123LL;
printf("%ull", number); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:34:35.320

格式说明符不正确，应该是`%llu`，类型`number`应该是`unsigned long long`：

```
#include<stdio.h>

int main()
{
    unsigned long long number = 123654123654123LL;
    printf("%llu\n", number);

    return 0;
} 
```

输出：

> 123654123654123

请参阅[http://ideone.com/i7pLX](http://ideone.com/i7pLX)。

格式说明符后面`%ull`实际上是两个(ell) 字符。`%u``l`

从 C99 标准的第*5.2.4.2.1 节整数类型 <limits.h>*的大小，最大值`long long`和`unsigned long long`保证至少为：

```
LLONG_MAX +9223372036854775807 // 263 − 1
ULLONG_MAX 18446744073709551615 // 264 − 1 
```

所以`123654123654123`舒适地在范围内。

# iphone - 使用 OpenGL ES 着色器在视频上叠加图像

> ID：12218419
> 
> 赞同：1
> 
> 时间：2012-08-31T15:29:44.633
> 
> 标签：iphone, objective-c, opengl-es

我试图了解 OpenGL 的基本概念。一个星期过去了，我离那里还很远。一旦我进入 glsl，我就知道该怎么做，但我发现到达那里有点棘手。

我目前能够传递我操作和呈现的视频像素。然后我一直在尝试添加静止图像作为叠加层。这就是我迷路的地方。我的最终目标是在同一个片段着色器中结束，其中包含来自我的视频和静止图像的像素数据。我想这意味着我需要两个纹理并传递两个像素缓冲区。我目前正在传递这样的视频像素：

```
glGenTextures(1, &textures[0]);

//target, texture
glBindTexture(GL_TEXTURE_2D, textures[0]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_BGRA, GL_UNSIGNED_BYTE, buffer); 
```

然后我会用图像中的第二个缓冲区在纹理[1] 上重复这个过程吗？如果是这样，我是否同时绑定 GL_TEXTURE0 和 GL_TEXTURE1？...我的着色器看起来像这样吗？

```
uniform sampler2D videoData;
uniform sampler2D imageData; 
```

一旦我在着色器中？似乎无论我尝试哪种组合，图像和视频最终都只是这两者中的视频数据。

很抱歉在这里合并了许多问题，只是想清除我的许多假设并继续前进。为了澄清这个问题，我需要做什么才能在所描述的过程中从静止图像中添加像素？（“易于理解”的示例代码或任何类型的提示将不胜感激）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:52:47.400

甚至不费心自己编写这段代码怎么样？我在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中拥有所有这些，并且可以使用如下代码来设置摄像机源、拉入图像并将该图像覆盖在视频上：

```
videoCamera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];
filter = [[GPUImageOverlayBlendFilter alloc] init];
[videoCamera addTarget:filter];
inputImage = [UIImage imageNamed:@"WID-small.jpg"];
sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
[sourcePicture processImage];            
[sourcePicture addTarget:filter];
[filter addTarget:filterView];
[videoCamera startCameraCapture]; 
```

这一切都在幕后使用 OpenGL ES 2.0 将片段着色器应用于视频帧和静止图像，而且它比我在 iOS 上所知道的任何其他东西都快。对于支持它的设备，我对此进行了调整，以使用一些额外的优化来加快图像和视频帧上传过程。

要在此处回答您的具体问题，是的，您将创建两个纹理制服，就像您在此处展示的那样。在使用它们之前，您需要从链接的着色器程序中获取每个返回的标识符。在您的代码中，您需要将两个纹理绑定到两个不同的纹理单元，然后使用类似于以下的代码将这些纹理单元的值分配给您的制服：

```
glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, sourceTexture);
glUniform1i(filterInputTextureUniform, 2);  

glActiveTexture(GL_TEXTURE3);
glBindTexture(GL_TEXTURE_2D, filterSourceTexture2);                
glUniform1i(filterInputTextureUniform2, 3); 
```

我见过人们犯的一个常见错误是在`glUniform1i()`这里使用纹理名称，而不是纹理绑定到的纹理单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:51:53.287

您需要使用 glActiveTextureARB 进行多重纹理查看本教程[http://www.clockworkcoders.com/oglsl/tutorial8.htm](http://www.clockworkcoders.com/oglsl/tutorial8.htm)

# git - 添加一个不能从索引中删除的子模块

> ID：12218420
> 
> 赞同：32
> 
> 时间：2012-08-31T15:29:48.577
> 
> 标签：git, git-submodules

我正在尝试添加一个已经存在的子模块（不同的 git 远程存储库）。由于我之前没有搜索过如何正确执行此操作，因此我认为我的存储库已经搞砸了，我需要一些帮助来再次修复它。

我已经从 .gitmodules 和 .git/config 中删除了关于我要删除的子模块的所有相关部分。我还验证了我的 .git/ 目录中没有模块目录。

但是，当我运行命令时`git rm --cached path_to_submodule`，会显示以下消息：

```
致命：pathspec 'path_to_submodule' 不匹配任何文件

```

由于上一个命令失败，当我尝试使用新定义再次添加相同的子模块时，运行命令`git submodule add gituser@host:repo.git`，这是显示的消息：

```
'repo' 已存在于索引中

```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-31T16:07:23.223

可以显示消息 () 的唯一方法`'repo' already exists in the index`是索引中仍然存在“repo”（请参阅[​​关于子模块的本章](http://git-scm.com/docs/git-rm)）：

```
$ rm -Rf rack/
$ git submodule add git@github.com:schacon/rack.git rack
'rack' already exists in the index

You have to unstage the rack directory first. Then you can add the submodule:

$ git rm -r rack
$ git submodule add git@github.com:schacon/rack.git rack 
```

即使 ' `rack`' 不是子模块，如果它存在，它也会阻止同名子模块的声明。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-26T14:37:28.267

如果添加新子模块的输出是：

```
'FolderName' already exists in the index 
```

提示下一个命令

```
git ls-files --stage 
```

输出将类似于：

```
160000 d023657a21c1bf05d0eeaac6218eb5cca8520d16  0  FolderName 
```

然后，删除文件夹索引提示：

```
git rm -r --cached FolderName 
```

再次尝试添加子模块

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-28T09:03:01.380

合并错误、手动删除子模块文件夹或其他东西（如 Hallileo Comet）时可能会发生

1.  在文件中`.gitmodules`- 删除子模块的链接（带有子模块名称的整个部分）

2.  在文件中`.git\config`- 删除子模块的链接，如上一步

3.  在文件夹中`.git\modules`- 删除相对路径类似于“问题”模块的相对路径的文件夹

4.  确保子模块的文件夹不再存在

5.  然后：

    `$ git submodule add -f --name <name> <git://path_1.git> <path_2>`

    其中： name - 您希望的子模块名称，可以等于您的`repo`姓名；- 子模块源代码库的路径（即 github 等）， - 子模块所在文件夹的相对路径

    这使您可以在路径中添加子模块或使用仍然存在于索引中但不自然存在的名称添加子模块。

我没有找到任何方法从索引中删除这些死链接，但是当强制

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T04:14:30.920

'submodules/uasdk-clib' 已存在于索引中

git rm -r --cached 子模块/uasdk-clib

git submodule add -b china/release/16.8.0 -f ssh://git@xxx-ios-uasdk.git submodules/uasdk-clib

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-16T07:54:42.033

这是因为您的 repo 中的文件夹与子模块的名称相同

```
$ git rm -r subModuleName
$ git submodule add "your submodule repo path without these quotes" 
```

再次尝试添加子模块

# java - 字符串连接不起作用，或者它是一个错误

> ID：12218427
> 
> 赞同：0
> 
> 时间：2012-08-31T15:30:19.853
> 
> 标签：java, string

我已经编写了一些代码并使用了我使用 += 连接的字符串（因为我只做了几次。

后来我使用了另一个字符串并使用了 concat() 函数。并且串联不起作用。

所以我在Junit（用eclipse）写了一个小方法......

```
@Test
public void StingConcatTest(){

    String str = "";

    str += "hello ";
    str += " and goodbye";

    String conc="";
    conc.concat("hello ");
    conc.concat(" and goodbye");
    System.out.println("str is: " + str + "\nconc is: "+ conc); 
```

输出是...

```
str is: hello  and goodbye
conc is: 
```

所以要么我快疯了，我做错了什么（很可能），JUNIT 有问题，或者我的 JRE / eclipse 有问题。

请注意，字符串生成器工作正常。

大卫。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T15:31:05.750

好的，我们每天至少会看到这个问题几次。

`Strings`是`immutable`，所以对 String 的所有操作都会产生 new `String`。

`conc= conc.concat("hello ");`您需要再次将结果重新分配给字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T15:31:37.567

You have to try with:

```
String conc="";
conc = conc.concat("hello ");
conc = conc.concat(" and goodbye");
System.out.println("str is: " + str + "\nconc is: "+ conc); 
```

For sake of optimization you can write:

```
String conc="";
conc = conc.concat("hello ").concat(" and goodbye");
System.out.println("str is: " + str + "\nconc is: "+ conc); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:33:54.070

如果您计划连接多个字符串，您还可以使用 StringBuilder：

```
StringBuilder builder = new StringBuilder();
builder.append("hello");
builder.append(" blabla");
builder.append(" and goodbye");
System.out.println(builder.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:33:12.900

concat 返回一个字符串。它不会更新原始字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T15:32:29.057

concat() 返回连接的字符串。

```
public static void main(String [] args) {
    String s = "foo";

    String x = s.concat("bar");

    System.out.println(x);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T15:33:53.727

String.concat 不会更改调用它的字符串 - 它返回一个新字符串，该字符串是字符串和参数连接在一起。

顺便说一句：使用 concat 或 += 的字符串连接性能不是很好。您应该改用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)类。

# ms-access-2010 - 如何让 MS Access Union 查询生成表？

> ID：12218428
> 
> 赞同：1
> 
> 时间：2012-08-31T15:30:20.553
> 
> 标签：ms-access-2010

我终于掌握了 MS Access 2010，并且正在合并一些表。

我想将该联合输出到（静态）表，但如果我选择“生成表”选项，它会擦除​​您刚刚编写的联合查询，反之亦然。

这在 SQL 中是微不足道的（`Select * into A from( Select tbl1.col1 from tbl1 UNION Select tbl2.col2 from tbl2`或类似的东西）

但是有可能只按按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:31:35.147

No, it is not possible with pressing buttons. Use sql view of the query design window.

# c++ - 包含文件、typedef 和转发 decl

> ID：12218429
> 
> 赞同：0
> 
> 时间：2012-08-31T15:30:25.033
> 
> 标签：c++, header-files

我有一个围绕 win32/pthreads 的 C++ 线程包装类。问题出在我的标题中，我需要大量的 biggie-include，例如 windows.h 和 boost::function，用于在下面声明我的 typedef。

有没有办法解决？我知道您可以转发声明类和结构，但是诸如 win32 HANDLE 之类的数据类型和命名空间中的模板函数...？

```
 #include "boost/function.hpp"

    /* Thread wrapper class */
    class IThread
    {
    public:
        #if defined _WIN32 || _WIN64
            #define WIN32_LEAN_AND_MEAN
            #include <Windows.h>
            #undef WIN32_LEAN_AND_MEAN
            typedef HANDLE ThreadHandle;  
        #else
            #include <pthread.h>
            typedef pthread_t ThreadHandle;
        #endif

        enum ThreadState
        {
            DETACHED = 0,
            RUNNING,
            FINISHED
        };

        typedef boost::function1<void, void*> Task;

        virtual ~IThread() { }

        IThread& operator=(IThread& other);
        virtual int32_t Join() = 0;
        virtual int32_t SetPriority(int32_t priority) = 0;

        virtual ThreadHandle& GetNativeHandle() = 0;
        virtual ThreadState GetThreadState() const = 0;

    }; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:38:07.807

我假设这不是您的真实代码，因为我看不到包含如何在您的类定义中间工作。

在这种情况下，您可能根本不想公开本机线程标识符。相反，提供抽象功能以理智的方式作用于线程，并且在任何时候都不会公开实现细节，例如`HANDLE`. 然后您可以将包含移动到您的源文件并避免问题。

另请注意，在头文件中执行`WIN32_LEAN_AND_MEAN`+`#include <Windows.h>`意味着不想要`WIN32_LEAN_AND_MEAN`但在他们自己的`windows.h`包含之前包含您的头的人会意外地得到精益和平均。

编辑：我认为`boost::function`在标题中使用很好，因为无论环境如何，包含总是相同的。只要您始终将其公开`Task`而不是其`function`本身，就可以将其视为界面的一部分。

# java - 持久 I/O 流连接

> ID：12218430
> 
> 赞同：4
> 
> 时间：2012-08-31T15:30:27.817
> 
> 标签：java, ssl

我正在与服务器通信，理想情况下，我希望输入流和输出流始终处于启动状态。我收到不请自来的响应，所以我必须随时准备好接收输入流上的数据。

在我进一步深入之前，我应该说我建立的任何连接都必须能够支持 SSL。

我遇到的问题是，当我打开 HttpUrLConnection 并从输出流发送内容时，它不会发送实际输出，直到我打开输入流。如果我打开一个输入流，它会杀死输出流，并且一旦流关闭，似乎就无法恢复它。

实现我想要的行为的最佳方式是什么？如果不可能在一个端口上同时维护两个流，有没有办法让两个单独的流通过某种端口锁定/开关共享连接？

是否有一个库可以发送输出而不必终止输出流来表示我的请求结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:48:34.400

Http 是一个单一的请求协议。

您不能（除非 websocket）使用 http(s) 创建持久连接。你需要另一个协议。

可以使用基本插座。除了 url 以 socket:// 开头外，它的工作方式与 http 连接非常相似。

您只需打开一个连接，然后您就可以获取输入流和输出流并使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:31:11.153

**-**我最好的选择是使用`java.nio package`.

**-**使用**java.nio**`SocketChannel`包，我们可以设置成**非阻塞模式**。当你这样做时，你可以在异步**模式下**调用和。**`SocketChannel`**`connect()``read()``write()`****

# sql - SQL Server 2008 按正确顺序从自引用表中删除记录

> ID：12218431
> 
> 赞同：3
> 
> 时间：2012-08-31T15:30:29.200
> 
> 标签：sql, sql-server-2008, sql-order-by, sql-delete, self-reference

> **可能重复：**
> [SQL：按特定顺序从自引用表中删除数据](https://stackoverflow.com/questions/5200488/sql-delete-data-from-self-referencing-table-in-specific-order)

我需要从 SQL Server 2008 中的自引用表中删除一组记录。我正在尝试执行以下操作，但它不像 order by。

```
WITH SelfReferencingTable (ID, depth)
AS
(
   SELECT id, 0 as [depth]
   FROM dbo.Table
   WHERE parentItemID IS NULL AND [t].ColumnA = '123'
   UNION ALL
   SELECT [t].ID, [srt].[depth] + 1 
   FROM dbo.Table t 
   INNER JOIN SelfReferencingTable srt ON [t].parentItemID = [srt].id
   WHERE [t].ColumnA = '123'       
)   
DELETE y FROM dbo.Table y
JOIN SelfReferencingTable x on x.ID = y.id
ORDER BY x.depth DESC 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:33:42.610

您无需按任何特定顺序删除它们。

只需一次操作即可将它们全部删除。在语句末尾检查约束。

假设您的递归 CTE 代码正确识别了您需要删除的所有行，您可以使用

```
WITH SelfReferencingTable (ID)
AS
(
   SELECT id
   FROM dbo.Table
   WHERE parentItemID IS NULL AND [t].ColumnA = '123'
   UNION ALL
   SELECT [t].ID 
   FROM dbo.Table t 
   INNER JOIN SelfReferencingTable srt ON [t].parentItemID = [srt].id
   WHERE [t].ColumnA = '123'       
)   
DELETE 
FROM dbo.Table 
WHERE ID IN (SELECT id FROM SelfReferencingTable ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:33:42.550

子句`delete`不允许. `order by`这`delete`是一个单一的原子操作，操作步骤的完成顺序无关紧要`delete`。

一个常见的解决方案是在循环中删除没有依赖行的行：

```
while 1=1
    begin
    delete  yt
    from    YourTable yt
    where   where ColumnA = '123'
            and not exists
            (
            select  *
            from    YourTable yt2
            where   yt2.parentItemId = yt.id
            )

    if @@rowcount = 0
        break
    end 
```

# silverlight - 在 Silverlight 中绑定到显式实现的通用接口

> ID：12218433
> 
> 赞同：1
> 
> 时间：2012-08-31T15:30:35.350
> 
> 标签：silverlight, generics, binding, interface, explicit-implementation

我知道可以使用以下方式绑定到显式实现的属性：

```
"{Binding Path=(local:ISomeInterface.SomeProperty)}" 
```

但是如果接口是通用的呢？

```
"{Binding Path=(local:ISomeInterface&lt;TypeParama&gt;.SomeProperty)}"  ??? 
```

什么是神奇的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:28:24.070

我不知道绑定到通用接口的语法，但是，如果您需要快速解决，您可以简单地封装您的属性，即：

```
public int SomePropertyYouCanBindTo
    {
    get
        {
        return (this as ISomeInterface<TypeParameter>).SomeProperty;
..... etc 
```

# php - 练习创建DB类，需要一点指导

> ID：12218435
> 
> 赞同：0
> 
> 时间：2012-08-31T15:30:40.850
> 
> 标签：php, class, pdo

所以我的任务是学习如何使用 PDO 创建我自己的 DB 类。我对 PDO 和更复杂的类开发相当陌生，并且希望在深入了解它之前从社区获得一些指导。我有一个部分构建的类，但我知道必须有更好/更合乎逻辑的方法来做到这一点。

我真的很想能够有一个单一的查询方法，这样我就可以在我的 DB 类中找到几乎任何东西。如果这是错误的想法，请告诉我原因。

目前我有一个定义了 DB 常量的 config.php 文件和一个名为 DB 的类。这是我的代码：

在 index.php 中：

```
 require_once 'config.php';      
    require_once '_inc/class.db.php';
    $db = new DB(); 
```

我的班级：

```
 public $dbh;

public function __construct(){

    $dbh = new PDO('mysql:host='.DB_HOST.';dbname='.DB_NAME, DB_USER, DB_PASSWORD);

}//end __construct

public function build_query( $args ){

    $defaults = array(
                      'type' => 'SELECT',
                      'fields' => '*',
                      'table' => '',
                      'where' => '',
                      'orderby' => 'id',
                      'order' => 'DESC'
                      'offset' => '0',
                      'limit' => ''
                      );

    $params = array_merge( $defaults, $args );

    $sql = $params['type'];

    $sql .= ' '.$params['fields'].' FROM '.$params['table'];

    if( $params['where'] )
        $sql .= ' WHERE '.$params['where'];

    $sql .= ' ORDER BY '$params['orderby'].' '.$params['order'];

    if( $limit )
        $sql .= ' LIMIT '.$params['offset'].', '.$params['offset'];

    return $sql;    

}//end build_query

public function dbq( $args ){

    $sql = $this->build_query( $args );

    $this->$dbh->prepare( $sql );

    return $this->$dbh->execute(); 
```

我知道我在这里遗漏了一些东西。请把我推向正确的方向，因为我真的很想学习这个以成为一个更好的 PHP 开发人员。我确实看过一点使用单例模式，但想从真正了解这一切如何运作和组合在一起的人那里获得更多信息。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:10:31.997

如果我没看错你的问题，那么你正在寻找一个所谓的 Query-Builder。查询构建器是一个具有一些参数并且可以根据参数返回查询的类。

实际上，如果您上面的示例是您所需要的，那么这不需要更多，也不需要更少。您只需要将其放入它自己的类中，因为数据库层的其余部分还有其他事情要做。

然后，您可以将 Query 对象传递到它所属的位置。通常你在某个类内部使用它。所以你实际上并不是在问创建一个通用的 DB 神类（这将是一种气味），但你只是想将 SQL Query String Builder 包装到它自己的类中：

```
/**
 * SQL Query
 */
class SqlQuery
{
    public
        $type = 'SELECT',
        $fields = '*',
        $table,
        $where,
        $orderby = 'id',
        $order = 'DESC',
        $offset,
        $limit;

    /**
     * @return string
     */
    public function getQuery() {

        $sql = sprintf('%s %s FROM %s', $this->type, $this->fields, $this->table);

        $this->where
            && $sql .= sprintf(' WHERE %s', $this->where)
        ;

        $sql .= sprintf(' ORDER BY %s %s', $this->orderby, $this->order);

        $this->limit
            && $sql .= sprintf(' LIMIT %s, %s', $this->offset, $this->limit)
        ;

        $sql .= ';'; ### not strictly necessary but nice for debugging ###

        return $sql;
    }

    public function __toString() {
        return $this->getQuery();
    }
}

### Usage: ###

$query = new SqlQuery;
$query->table = 'TABLE1';
echo $query; // SELECT * FROM TABLE1 ORDER BY id DESC; 
```

这个例子实际上涵盖了你到目前为止所拥有的一切，但给了它一个定义的接口。所以你有默认的属性值，你有构建功能。然后，您可以将其传递到`SqlQuery`您需要的地方。

# sql - 学生模式的 sql 查询

> ID：12218436
> 
> 赞同：0
> 
> 时间：2012-08-31T15:30:52.677
> 
> 标签：sql, relational

我尝试解决以下问题。我只是想确定我是否正确。

> 学生（学生姓名，街道，城市）
> 提供（部门，号码，科室，时间，人口）
> 职称（部门，号码，职称）
> 招生（学生姓名，部门，号码，科室）

如果我需要查找每个课程部分的部门、编号、部分、标题和人数

我尝试的 SQL 查询是：

```
select a.department, a.number, a.section,b.title,population as "students"
from offering a ,titles b ,enrollment c,student d
where a.department=b.department
and a.number=b.number
and a.department=c.department
and a.number=c.number
and a.section=c.section
group by a.section 
```

请让我知道我是否正确。

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:37:29.093

我不认为这是正确的，因为这个问题不是针对学生的。据我了解，问题是获取所有可用部分的列表及其标题，不需要加入 Student。我相信只涉及产品和标题表。

```
SELECT a.department, a.number, a.section, b.title, a.population 
FROM offering a INNER JOIN titles b 
ON a.department=b.department and a.number=b.number 
ORDER BY a.department, a.number, a.section 
```

# javascript - 在 JSP 中将数据从表导出到 Excel

> ID：12218438
> 
> 赞同：0
> 
> 时间：2012-08-31T15:30:58.557
> 
> 标签：javascript, html, jsp, export-to-excel

我有一个带有表格的 Web 应用程序。我需要添加一个导出到 excel 按钮，以便在单击该按钮时下载页面中的当前表格。我尝试了以下代码：

```
<script type="text/javascript">
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
  }
})()
</script> 
```

我从互联网上得到的。它适用于 chrome，但在 Firefox 中，它将文件下载`xxx.xls.part`为 Internet Explorer 并且不适用于 Internet Explorer。我不知道哪个浏览器用户将使用，所以我需要它在所有浏览器上工作。

我在这里做错了什么？或者有没有其他方法可以做到这一点。

请帮忙。

提前致谢。

**注意：**我知道这类问题被问了好几次，但在我的情况下都没有。所以请帮忙。

**注意 2：**我有一个限制，我不能使用任何外部库，例如 poi 或 jxls

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:10:06.640

您发布的 Javascript 代码会生成一个`data:`包含“Excel HTML”文件的 URI，而不是真正的 Excel 工作簿（XLS 或 XLSX）文档。

`data:`大多数当前一代浏览器（IE8 和更高版本）都支持URI（[参见 Wikipedia](http://en.wikipedia.org/wiki/Data_URI_scheme)），但是出于安全原因，IE8 仅支持图像的数据 URI。

大多数“导出到 Excel”实现只生成一个可由 Excel 操作的 CSV 文件，但这意味着您不能包含格式、公式、多个工作表和宏等内容。

使用新的 Office Open XML 标准，您可以使用标准 Zip 文件和 XML 库（存在于基本 Java 库中）来生成和修改 Office 文档，但是 OOXML 文档非常复杂，因此这将需要大量工作（除非您能找到其他已经这样做的人）。出于好奇，为什么不能使用外部库？这只是在您的项目中引用他们的 Jar 文件并捆绑它们的问题。

另一种方法是生成“Excel HTML”文件，就像你现在正在做的那样，但是在服务器端而不是依赖于 Javascript。我不知道您对 JSP 有多好，但从 Servlet 返回自定义内容是一项微不足道的任务。

# r - 是否可以获得转换后的绘图数据？（例如点图中点的坐标、密度曲线）

> ID：12218440
> 
> 赞同：6
> 
> 时间：2012-08-31T15:31:01.683
> 
> 标签：r, ggplot2

我想知道是否可以在 ggplot2 图中获取转换后的数据？特别是，我有兴趣获取点图中点的坐标和大小，以便在另一个绘图库 ( `d3.js`) 中使用它们。我怎样才能提取这些信息？

这是情节：

```
g=ggplot(data.frame(x=rnorm(100)), aes(x = x)) + geom_dotplot() 
```

现在我可以使用得到原始数据，`g$data`但我想要转换后的数据（图中点的坐标）。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T15:53:50.333

使用`ggplot_build`然后提取数据。试试这个：

```
gg <- ggplot_build(g) 
```

生成的对象是一个列表，第一个元素包含您所追求的数据：

```
str(gg, max.level=1)
List of 3
 $ data :List of 1
 $ panel:List of 5
  ..- attr(*, "class")= chr "panel"
 $ plot :List of 8
  ..- attr(*, "class")= chr "ggplot" 
```

这是它的样子：

```
head(gg$data[[1]])
  y         x  binwidth count ncount     width PANEL group countidx stackpos      xmin      xmax ymin ymax
1 0 -2.070496 0.1356025     1  0.125 0.1356025     1     1        1      0.5 -2.138297 -2.002695    0    1
2 0 -1.781799 0.1356025     2  0.250 0.1356025     1     1        1      0.5 -1.849600 -1.713998    0    1
3 0 -1.781799 0.1356025     2  0.250 0.1356025     1     1        2      1.5 -1.849600 -1.713998    0    1
4 0 -1.619960 0.1356025     1  0.125 0.1356025     1     1        1      0.5 -1.687761 -1.552159    0    1
5 0 -1.403223 0.1356025     6  0.750 0.1356025     1     1        1      0.5 -1.471024 -1.335422    0    1
6 0 -1.403223 0.1356025     6  0.750 0.1356025     1     1        2      1.5 -1.471024 -1.335422    0    1 
```

* * *

PS。AFAIK，此功能仅在`ggplot2`0.9.0 版中可用

# jquery - 使用 Twitter 引导模式而不是确认对话框

> ID：12218444
> 
> 赞同：9
> 
> 时间：2012-08-31T15:31:06.880
> 
> 标签：jquery, twitter-bootstrap, modal-dialog, confirm

我正在尝试使用 twitter 引导模式而不是自定义确认对话框。

我的功能

```
function getConfirm(confirmMessage){
    if ( confirmMessage == undefined){
        confirmMessage = '';
    }
    $('#confirmbox').modal({
    show:true,
        backdrop:false,
        keyboard: false,
    });

    $('#confirmMessage').html(confirmMessage);
    $('#confirmFalse').click(function(){
        $('#confirmbox').modal('hide');
        return false;
    });
    $('#confirmTrue').click(function(){
        $('#confirmbox').modal('hide');
        return true;
    });
}   
</script>
<div class="modal" id="confirmbox" style="display: none">
    <div class="modal-body">
        <p id="confirmMessage">Any confirmation message?</p>
    </div>
    <div class="modal-footer">
        <button class="btn" id="confirmFalse">Cancel</button>
        <button class="btn btn-primary" id="confirmTrue">OK</button>
    </div>
</div> 
```

调用函数

```
var confimChange=getConfirm("Do You confirm?");
if(confimChange){
    alert('perfect you confirmed')
}else{
    alert('why didnt you confirmed??')
} 
```

问题是 getConfirm 函数没有返回 true 或 false。

* * *

工作代码：

```
if(receiverListCount > 0){
    var confimChange=confirm("Message");
    if(confimChange){
        resetReceiverList();
    }else{
        return false;
    }
} 
```

修改和更改后的代码片段/不工作

```
if(activeDiv == '#upload'){
    if(listOfSelectedGroups.length> 0|| receiverListCount > 0){
        getConfirm("message",function(result){
            if(result){
                resetReceiverList();
            }else{
                return false;
            }
        });
    }
} 
```

* * *

最后我决定使用 bootboxjs

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T15:44:42.123

您的方法是错误的，它将以异步方式执行，因此它不会等待模式对话框在返回之前关闭。尝试这样的事情：

```
function getConfirm(confirmMessage,callback){
    confirmMessage = confirmMessage || '';

    $('#confirmbox').modal({show:true,
                            backdrop:false,
                            keyboard: false,
    });

    $('#confirmMessage').html(confirmMessage);
    $('#confirmFalse').click(function(){
        $('#confirmbox').modal('hide');
        if (callback) callback(false);

    });
    $('#confirmTrue').click(function(){
        $('#confirmbox').modal('hide');
        if (callback) callback(true);
    });
}  

getConfirm('Are you sure?',function(result) {
   // Do something with result...
}); 
```

但是请注意，您实际上只需要初始化一次模态并挂钩一次事件。我会给出模态正文和 ID，并在显示之前简单地更改内容。

您还应该将背景设置为 true，您需要确认以防止用户在他们确认之前访问页面。

# sql-server-2008-r2 - SQL Server 2008R2 中基于 CLR 的 UDT 和字符串属性

> ID：12218447
> 
> 赞同：0
> 
> 时间：2012-08-31T15:31:11.367
> 
> 标签：sql-server-2008-r2, sqlclr

绝对没有办法将字符串类型的属性作为基于 CLR 的 UDT 的一部分？我知道字符串是非 blittable 的，但我真的需要一个可以克服这个限制的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:46:35.487

该链接包含答案（图 5），它正在实现您自己的序列化程序：http: [//msdn.microsoft.com/en-us/magazine/cc164013.aspx](http://msdn.microsoft.com/en-us/magazine/cc164013.aspx)

# html - 仅更改颜色 css 文本的前 6 个字符

> ID：12218448
> 
> 赞同：9
> 
> 时间：2012-08-31T15:31:12.543
> 
> 标签：html, css

我有短语 as `Client Testimonial`，我只想更改`Client`我只使用过的`first-letter`，但是 css 中是否有任何方法可以更改颜色.. 请不要使用 javascript。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T15:49:19.983

怎么用`:before`？

我会将文本从“Client Testimonial”更改为“Testimonial”，然后使用 CSS 应用`:before`规则：

**HTML：**

```
<div class="word">Testimonial</div>​​​​​​​​ 
```

**CSS：**

```
.word {
 color: black;       
}
.word:before {
 color: red;
 content: "Client ";
} 
```

示例：http: [//jsfiddle.net/LvZt7/](http://jsfiddle.net/LvZt7/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T15:48:20.103

正如其他人所指出的，（不幸的是*）`:first-word`CSS 中没有可用的伪选择器（据我目前所知，即使是版本 3 或 4）。然而，在没有 JavaScript 的情况下存在两种可能性，尽管两者都有其缺点。

第一个也是最简单的方法是将第一个单词简单地包装在一个跨度中：

```
<p><span>Client</span> Testimonial</p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

并使用突出显示设置跨度：

```
p span {
    color: #f90;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/U9HGa/1/)。

虽然这种方法确实需要添加一个额外的元素，但在这种情况下，`span`用于样式目的的元素很容易实现，并且可以跨浏览器可靠地工作。

第二个稍微脆弱一些，虽然避免添加无关`span`标签，但要求您添加一个属性：

```
<p data-highlightword="Client">Client Testimonial</p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用以下 CSS：

```
p[data-highlightword] {
    position: relative;
}

p[data-highlightword]::before {
    content: attr(data-highlightword);
    color: #f90;
    position: absolute;
    top: 0;
    left: 0;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/U9HGa/)。

这种方法依赖于向单个元素添加单个属性，但确实需要额外的 CSS，并且仅适用于兼容的浏览器。现在几乎所有这些，只有 IE 8，或者可能是 9，以及以下证明是有问题的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T15:37:59.707

```
<p><span style="color: #c0ff33;">Client</span> Testimonial</p> 
```

所以是的，只需将`<span></span>`其设计为最适合这种情况的样式即可。

**编辑：**

此编辑不是针对帖子作者，而是针对刚刚学习使用 css 的人：基于“最佳实践”，应该考虑使用单独的 .css 文件以如下方式设置样式：

```
.client {
   color: #c0ff33;
} 
```

并像这样使用它：

```
<p><span class="client">Client</span> Testimonial</p> 
```

如果您想指定更多并确定您只`span`在内部使用您的样式，`<p></p>`您也可以像这样引入它：

```
p span.client {
   color: #c0ff33;
} 
```

小提琴：http: [//jsfiddle.net/LvZt7/97/](http://jsfiddle.net/LvZt7/97/)

您也可以通过其他方式指定您的 p 类而不是跨度：

```
<p class="client"><span>Client</span> Testimonial</p> 
```

和

```
p.client span {
   color: #c0ff33;
} 
```

或者只是指定所有 p span html 标记以在 span 中包含带有颜色的文本`#c0ff33`：

```
<p><span>Client</span> Testimonial</p> 
```

和

```
p span {
   color: #c0ff33;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:35:23.650

您可以将单词包装在 a 中`span`并设置样式。正如 Henrik Ammer 在评论中所说，没有`:first-word`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T15:51:44.420

我建议做这样的事情：

```
<span class = "redcolor">Client </span> Testimonial 
```

CSS：

```
.redcolor
{
    color: red
} 
```

这样，如果你想要任何红色的东西，只需给它一个带有该类的 div/span

# c# - 对 ViewState / IPostback 与持久的文本框值感到困惑

> ID：12218449
> 
> 赞同：2
> 
> 时间：2012-08-31T15:31:13.043
> 
> 标签：c#, asp.net, textbox, webforms

**场景 1：** 我创建一个`TextBox`, `Button`，将它们添加到页面中，并将`TextBox`' 的值**全部**设置在`Page`'`OnInit`或`OnLoad`事件中。

当我通过点击进行回发/表单发布时，我（从浏览器）`Button`输入的任何内容都会保留到下一个回发/页面加载。`TextBox`

**场景 2：** 我创建了一个`TextBox`并将`Button`它们添加到`OnInit`事件的页面中。我设置了事件的`TextBox`值，`OnLoad`

当我通过`Button`单击进行回发/表单发布时，我（从浏览器）输入的任何内容`TextBox`都不会保留，而是显示我在`OnLoad`事件期间分配的值。

谁能解释这里发生了什么？猜测一下，我会说`ViewState`跟踪仅`TextBox`在事件被添加后开始，或者在下一个事件（`OnLoad`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:50:06.737

让我们首先澄清一个常见的误解：a 的值`TextBox`在回发中保持不变，因为浏览器在每个 POST 中将值作为表单数据的一部分发送，而不是因为值保存在视图状态中。**视图状态与您看到的行为无关！**

以下是与此问题相关的页面生命周期阶段：

1.  引发`Init`事件。
2.  加载已发布的表单数据（第一次尝试）。
3.  引发`Load`事件。
4.  加载已发布的表单数据（第二次尝试）。

现在让我们遍历每个场景，看看当用户更改文本框的值并单击按钮时会发生什么。

## 场景 1a：在 OnInit 中添加控件并设置 Text 属性。

```
private TextBox textBox = new TextBox { ID = "textBox" };
private Button button = new Button { ID = "submitButton", Text = "Submit" };

protected override void OnInit(EventArgs e)
{
    this.placeHolder.Controls.Add(this.textBox);
    this.placeHolder.Controls.Add(this.button);
    this.textBox.Text = "Hello";
} 
```

1.  *引发`Init`事件。*被`TextBox`添加到页面并且其`Text`属性设置为“Hello”。
2.  *加载已发布的表单数据（第一次尝试）。*该`Text`属性设置为用户输入的值。
3.  *引发`Load`事件。*什么都没发生。
4.  *加载已发布的表单数据（第二次尝试）。*没有任何反应，因为第一次加载`Text`属性的尝试成功。

最终结果：用户输入的值被持久化。

## 场景 1b：在 OnLoad 中添加控件并设置 Text 属性。

```
protected override void OnLoad(EventArgs e)
{
    this.placeHolder.Controls.Add(this.textBox);
    this.placeHolder.Controls.Add(this.button);
    this.textBox.Text = "Hello";
} 
```

1.  *引发`Init`事件。*什么都没发生。
2.  *加载已发布的表单数据（第一次尝试）。*没有任何反应，因为`TextBox`尚未添加到页面中。
3.  *引发`Load`事件。*被`TextBox`添加到页面并且其`Text`属性设置为“Hello”。
4.  *加载已发布的表单数据（第二次尝试）。*该`Text`属性设置为用户输入的值。

最终结果：用户输入的值被持久化。

## 场景 2：在 OnInit 中添加控件。在 OnLoad 中设置 Text 属性。

```
protected override void OnInit(EventArgs e)
{
    this.placeHolder.Controls.Add(this.textBox);
    this.placeHolder.Controls.Add(this.button);
}

protected override void OnLoad(EventArgs e)
{
    this.textBox.Text = "Hello";
} 
```

1.  *引发`Init`事件。*被`TextBox`添加到页面。
2.  *加载已发布的表单数据（第一次尝试）。*该`Text`属性设置为用户输入的值。
3.  *引发`Load`事件。*该`Text`属性设置为“你好”。
4.  *加载已发布的表单数据（第二次尝试）。*没有任何反应，因为第一次加载`Text`属性的尝试成功。

最终结果：用户输入的值被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:05:35.770

控件的视图状态跟踪在控件的 init 事件结束时打开。请记住，控制事件发生在页面之前。

PreInit 是您应该在其中添加动态控件的事件，但是 Init 会起作用，但您可能会看到一些不一致的行为。不应该使用负载——原因很明显。

设置控件的初始值时始终检查 !IsPostback。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:04:53.303

加载视图状态发生在 Init 和 Load 之间，在 Init 之后和 Lod 之前

加载视图状态阶段仅在页面回发时发生。在这个阶段，从上一次页面访问中保存的视图状态数据被加载并递归地填充到页面的控制层次结构中。正是在这个阶段验证了视图状态。

如果你想用视图状态持久化你的数据，你不能为每个帖子重新绑定你的数据

```
If(! IsPostBack)
{
   //Bind here your textbox
} 
```

并使用 viewstate 来持久化

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T16:28:28.460

ViewState 跟踪在 InitComplete 事件中打开。因此，当您在 OnInit 上添加控件时，它不会被视图状态跟踪，而当您在 Page_Load 上添加它时，它会被视图状态跟踪，并且您可以检索文本框的持久值。

# string - XSLT：用字符串替换整数

> ID：12218450
> 
> 赞同：0
> 
> 时间：2012-08-31T15:31:18.890
> 
> 标签：string, xslt, int, match

我有一个小问题。我的 XML 中的一个节点可能包含一个整数，我必须用一个字符串替换这个整数。每个数字都与一个字符串匹配。

**例如我有：**

* * *

整数 - 字符串

1 - 待办事项

2 - 进行中

3 - 完成

4 - 错误

5 - 中止

* * *

**原始 XML：**

```
 <root>
       <status>1</status>
    </root> 
```

* * *

**转换后的 XML：**

```
 <root>
       <status>TODO</status>
    </root> 
```

所以我想用“TODO”替换1，用“IN PROGRESS”替换2 ...

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
            <xsl:template match="/root/status">
    <root>
      <status>
                <xsl:variable name="text" select="." />

                <xsl:choose>
                    <xsl:when test="contains($text, '1')">

                        <xsl:value-of select="'TODO'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="$text"/>
                    </xsl:otherwise>
                </xsl:choose>
    </status></root>
            </xsl:template>
    </xsl:stylesheet> 
```

我在问是否有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:51:04.997

有很多方法可以做到这一点。如果翻译是从 1 到 N 范围内的连续整数，我会使用

```
<xsl:variable name="index" select="xs:integer(status)"/>
<xsl:value-of select="('TODO', 'IN PROGRESS', 'DONE', 'ERROR', 'ABORTED')[$index]"/> 
```

在其他有少量值的情况下，我可能会使用模板规则：

```
<xsl:template match="status[.='1']" mode="lookup">TODO</xsl:template>
<xsl:template match="status[.='2']" mode="lookup">IN PROGRESS</xsl:template> 
```

等等

在其他情况下，查找表是有意义的（请注意，Dimitre 的版本及其繁琐的 document('') 调用是为 XSLT 1.0 设计的 - 如果您使用的是 2.0，它会简单得多。当人们不说他们使用的是什么版本时，我通常假设为 2.0，Dimitre 通常假设为 1.0。）

我越来越多地看到人们在使用 contains() 表示“=”时会犯错误。如果要测试节点的内容是否为“X”，请使用`$node = "X"`，而不是`contains($node, "X")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:47:32.873

一种方法是创建一种“查找”值表。这可以嵌入到 XSLT 中，或者放在单独的文件中。例如，如果你把它放在 XSLT 文件中，它看起来像这样..

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   
   xmlns:lookup="lookup">

<lookup:data>
   <status code="1">TO DO</status>
   <status code="2">IN PROGRESS</status>
   <status code="3">DONE</status>
</lookup:data> 
```

然后，您还将创建一个变量来访问此数据

```
<xsl:variable name="lookup" select="document('')/*/lookup:data"/> 
```

最后，要查找值，您只需执行此操作

```
<xsl:value-of select="$lookup/status[@code = '1']/> 
```

在这种情况下，这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
 xmlns:lookup="lookup">

   <xsl:output method="xml" indent="yes"/>

   <lookup:data>
      <status code="1">TO DO</status>
      <status code="2">IN PROGRESS</status>
      <status code="3">DONE</status>
   </lookup:data>

   <xsl:variable name="lookup" select="document('')/*/lookup:data"/>

   <xsl:template match="status/text()">
      <xsl:value-of select="$lookup/status[@code = current()]" />
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<root>
   <status>TODO</status>
</root> 
```

最好将它们放在单独的文件中，因为它们可以在其他样式表中重复使用。为此，只需创建一个名为“lookup.xml”的文件，然后添加 XML

```
<data>
   <status code="1">TO DO</status>
   <status code="2">IN PROGRESS</status>
   <status code="3">DONE</status>
</data> 
```

请注意，在这种情况下，您不需要命名空间。然后只需将变量的定义更改为以下

```
<xsl:variable name="lookup" select="document('lookup.xml')/data"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:58:45.700

您的解决方案中有很多不必要的代码。以下是一个简化版本，其工作方式相同：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
        <xsl:template match="/root/status"> 
<root> 
  <status> 
            <xsl:choose> 
                <xsl:when test="contains(.,'1')">TODO</xsl:when> 
                <xsl:otherwise><xsl:value-of select="."/></xsl:otherwise> 
            </xsl:choose> 
  </status>
 </root> 
        </xsl:template> 
</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:36:53.970

最简单的方法是从恒等变换开始，然后添加特殊情况：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="status[. = '1']">
    <status>TODO</status>
  </xsl:template>
  <!-- likewise for status[. = '2'] etc. -->

  <!-- copy everything else -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T14:15:54.930

使用**XSLT 3.0 版**，您可以使用以下`map`类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:variable name="MyMap" select="
    map { 
      '1' : 'TODO', 
      '2' : 'IN PROGRESS',
      '3' : 'DONE',
      '4' : 'ERROR',
      '5' : 'ABORTED'}">
  </xsl:variable>

  <xsl:template match="/root/status">
    <status>
      <xsl:variable name="text" select="."/>
      <xsl:value-of select="$MyMap( $text )"/>
    </status>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-31T16:50:14.417

我的话。XSLT 并不容易，我认为不应该通过炫耀您对内部工作的知识来使其变得比其他一些答案中显示的更难。

为了方便您一针见血，请使用选择语句。我可能会把它放到一个单独的模板中（我在其他语言中使用这些类似的方法）只是为了简化测试并帮助清理你的代码以便于阅读。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template name="PrintStatus">
  <!-- param we can pass a value into or default to the current node -->
  <xsl:param name="text" select="." />  
  <xsl:choose>
    <xsl:when test="contains($text, '1')">
      <xsl:value-of select="'TODO'"/>
    </xsl:when>
    <!-- Assume your others go here -->
    <xsl:otherwise>
      <xsl:value-of select="$text"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template match="/root/status">
  <root>
    <status>
      <xsl:call-template name="PrintStatus" />
    </status>
  </root>
</xsl:template>

</xsl:stylesheet> 
```

除非您需要额外的复杂性，否则请保持简单。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-31T18:07:27.153

我有时在这种情况下使用的一个技巧是在一个字符串中使用一个值列表，并采用一个子字符串，如下所示：

```
<xsl:variable name="statuslist">TODO       IN PROGRESSDONE       ERROR      ABORTED    </xsl:variable>

<xsl:template match="status/text()">
  <xsl:value-of select="normalize-space(substring($statuslist, ( . - 1 ) * 11 , 11))" />
</xsl:template> 
```

请注意，“状态列表”中的值正好相隔 11 个字符（最长值的长度），因此子字符串中的 * 11 和 ,11 。因为你从 1 而不是 0 计数，所以你必须从索引中减去 1。或者，您可以在开始时用 11 个空格填充变量，而不是减去 1，这取决于您。该`normalize-space`调用只是从提取的值中去除多余的空格。

如果你想让它更整洁，你可以在每个值之间放置一个分隔符，并`*12,11`在该`substring`调用中使用。

如果您有大量可能的值，这不是一个可以很好地扩展的解决方案，并且显然它需要您可能的 id 处于一个序列中，但如果只有几个值，它就相当紧凑。

# javascript - 向添加到 DOM 的元素添加 Click 事件

> ID：12218455
> 
> 赞同：0
> 
> 时间：2012-08-31T15:31:33.020
> 
> 标签：javascript, jquery

```
 var myOP = '<div>';
 for (var i = 0; i < op.length; i++) {
     myOP += '<div>';
     myOP += '<div id="myBTN-' + [i] + '">' + op[i]['Field1'] + '</div>';
     myOP += '<div id="blah-' + [i] + '">' + op[i]['Field2'] + '</div>';
     myOP += '</div>';
 }
 myOP += '</div>';
 $("#myBTN-" + i).click(function () {
     $('#blah-' + i).toggle("slow");
 });
 $('#container').html(myOP); 
```

我正在尝试让 click 函数在我使用上述 for 循环创建的元素上触发。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:37:04.580

只要元素只是 a `String`，您将无法添加处理程序。您必须在;*之后添加处理程序* `$('#container').html(myOP)`

您可以尝试探索[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)的想法。使用它，您可以执行以下操作：

```
$('#container').on('click', function(e){
  e = e || event;
  var from = e.target || e.srcElement, i;
  if (from.id && /^mybttn/i.test(from.id)){
   i = +((from.id.match(/\d{0,}$/)||[-1])[0]);
   if (i>=0){
    $('#blah'+i).toggle('slow');
   }
  } 
});​ 
```

[演示](http://jsfiddle.net/KooiInc/H7kGZ/)

或者你可以

```
 $('#container').html(myOP);
 $('div[id^="myBTN-"]').on('click',function(){
     $('#blah-' + this.id.match(/\d{0,}$/)[0]).toggle("slow");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:39:16.087

将 html 保存到 #container 后，请使用以下命令：

```
$('[id^="myBTN-"]', '#container').click(function () {
    $(this).closest('[id^="blah-"]').toggle('slow');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:40:43.477

`.on()`如果使用得当，jQuery 的方法将绑定到附加的元素。[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
<div id="existingParent">
    <!--<div class="added-later">Hi!</div>-->
    <!--<div class="added-later">Hi!</div>-->
</div> 
```

监听后添加元素的事件

```
$('#existingParent').on('click hover','.added-later', myFunction); 
```

该方法必须绑定到存在的元素。$('body') 可以在这里使用，但我想会以牺牲一些性能为代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:33:37.547

当您尝试附加动态添加的事件时，简单的`.click()`不会做，您必须使用`on`：

```
$("#newElementparent").on('click', "#newElement", function() {}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T15:40:36.217

做这样的事情：

```
var myOP = '<div>';
for (var i = 0; i < op.length; i++) {
    myOP += '<div>';
    myOP += '<div id="myBTN-' + [i] + '">' + op[i]['Field1'] + '</div>';
    myOP += '<div id="blah-' + [i] + '">' + op[i]['Field2'] + '</div>';
    myOP += '</div>';
}
myOP += '</div>';
$(myOP).appendTo('#container').find('div[id^="myBTN"]').click(function () {$(this).next().toggle("slow")}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-31T15:39:09.953

您最好动态构建元素：

```
 var container = $('<div>');
 for (var i = 0; i < op.length; i++) {
     container.append(
         $('<div>').append(
             $('<div>').text(op[i]['Field1']).click(function() {
                 $(this).next('div').toggle("slow"); 
             }),
             $('<div>').text(op[i]['Field2'])
         )
     );
 }
 $('#container').empty().append(container); 
```

# mysql - tA tC 和 tP 的含义

> ID：12218459
> 
> 赞同：-2
> 
> 时间：2012-08-31T15:31:38.173
> 
> 标签：mysql, sql

如果这是重复的，我深表歉意，但是在任何搜索中都很难找到两个字母的字符串。

我正在寻找 MySQL 查询的含义`tA` `tC`和`tP`上下文。本着“教人如何钓鱼”的精神，如果你能指出我将来在哪里可以找到这些信息的正确方向，那就太好了。

**编辑：查询**

```
$wpdb->get_row($wpdb->prepare("SELECT tA.* FROM ".AMYLITE_ADS." tA,
    ".AMYLITE_ADS_CAMPAIGNS." tC, ".AMYLITE_PACKAGES." tP
    WHERE tA.id=tC.ad_id AND tC.campaign_id=tP.campaign_id AND tP.zone_id=%d
    AND tP.date_end>CURDATE()
    GROUP BY tA.id ORDER BY RAND()", $zone->id)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:37:53.937

它们是表别名。您在查询中引用的常量正在设置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:47:10.377

正如我所怀疑的，它们是表别名

即：在

```
SELECT tA.* FROM ".AMYLITE_ADS." tA 
```

`tA`是给包含在`AMYLITE_ADS`

# solr - 在唯一 id 字段上删除，而不是覆盖

> ID：12218460
> 
> 赞同：0
> 
> 时间：2012-08-31T15:31:37.723
> 
> 标签：solr

当使用唯一的 id 字段时，Solr 将用新索引的文档覆盖旧文档。有什么办法可以防止这种情况，以便*旧*文件被存储但新文件被丢弃？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:58:23.947

没有。Solr 默认会删除现有记录并插入一条新记录

您可以检查[重复数据删除](http://wiki.apache.org/solr/Deduplication)和[UpdateXmlMessages#Optional_attributes](http://wiki.apache.org/solr/UpdateXmlMessages#Optional_attributes_for_.22add.22)是否可以达到此目的。

您可以编写自己的更新请求处理程序来检测扩展 UpdateRequestProcessorFactory/UpdateRequestProcessor。

否则，您可以检查 Id 是否存在，然后不插入新记录。客户端的开销。

# performance - Scala 中的 Set union 的性能问题

> ID：12218464
> 
> 赞同：4
> 
> 时间：2012-08-31T15:31:49.127
> 
> 标签：performance, scala, set, union

我刚刚在 Scala Set API 中遇到了一个奇怪的行为。这是我的功能，去掉了与项目其余部分相关的内容

```
def grade(...): Double = {
  val setA: HashSet = // get from somewhere else
  val setB: HashSet = // get from somewhere else
  if ((setA size) == 0 || (setB size) == 0) return 0
  else return (setA & setB size) / (setA | set B size)
} 
```

这个函数在一个循环中被调用了很多时间，整个循环在大约 4.5 秒内执行。但是当用大小的总和（粗略近似）替换联合的大小时，为了测试联合操作的影响，执行时间减少到大约 0.35 秒......

```
def grade(...): Double = {
  val setA: HashSet = // get from somewhere else
  val setB: HashSet = // get from somewhere else
  if ((setA size) == 0 || (setB size) == 0) return 0
  else return (setA & setB size) / (setA size + set B size)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:51:10.023

好吧，您不能将像 2 的总和这样的简单运算与2 个集合`Ints`的运算进行比较。`union`我希望这些操作的性能会有很大不同，特别是如果您的 Set 包含很多元素。

你不需要联合，因为你已经做了一个交叉点。尝试以下操作：

```
def grade: Double = {
  val setA: HashSet = // get from somewhere else
  val setB: HashSet = // get from somewhere else
  if ((setA size) == 0 || (setB size) == 0) return 0
  else {
     val inter = setA & setB size
     return inter / ((setA size) + (setB size) - inter)
  }
} 
```

但是，我发现您的测量有点奇怪，因为我预计两种操作（联合和相交）都需要大约相同的时间 O(n)。删除联合应该可以将性能提高一半（2s）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:51:17.723

您是否有机会使用并行集合？并集是以顺序方式执行的，因此任何并行集合首先转换为顺序集合。这可能是性能的原因。

除此之外，联合大约是 O(n)，所以你要从 O(n) 到 O(1)，这会产生很大的不同。

# php - php遍历一个对象，只返回满足条件的地方

> ID：12218466
> 
> 赞同：-1
> 
> 时间：2012-08-31T15:31:57.840
> 
> 标签：php, object, loops

我对物体很陌生，但我仍在努力解决它。

这是我的情况：

我有来自一个 API 的信息，该 API 被格式化为一个带有一堆变量的对象，如下所示：

```
public 'id' => int 64
public 'taskId' => int 6
public 'projectId' => int 2
public 'type' => string 'progress' (length=8)
public 'text' => string 'bug5279 main branch fix confirmed beta still an issue with bounties' (length=111)
public 'ownerId' => int 3
public 'progress' => int 0
public 'hoursDone' => float 0.25
public 'createdAt' => string '2012-08-28T09:33:51' (length=19)
public 'notifyProjectTeam' => boolean false
public 'notifyTaskTeam' => boolean false
public 'notifyClient' => boolean false
public 'date' => string '2012-08-28T09:33:51' (length=19) 
```

这是我用来生成上述代码的代码，它返回一堆对象活动列表

```
$activityList = $activityClient->getList( $filter, $offset, $count ); 
```

这是用户列表

```
$usersList = $usersClient->getAll(); 
```

现在我想做的只是在用户 hoursDone 值 >0 时显示用户名

我用谷歌搜索，我可以找到如何遍历一个对象，但似乎找不到正确的关键字来显示条件，因为我对对象很陌生，所以我有点迷失了。这是我的简单循环代码

```
// get the usernames 
foreach($usersList->items as $user_details) {
$users[$user_details->id]=$user_details->firstName.' '.$user_details->lastName;
}

// get projects
foreach($tasksList->items  as $task_details) 
{
$tasks[$task_details->id]=$task_details->name;
} 
```

这就是我循环活动的方式

```
foreach($activityList->items as $workdetails) 
    {
echo "<br><h2>$username</h2><br>";
}
foreach($tasks as $taskid=>$taskname)
    {
    if($userid==$workdetails->ownerId && $taskid==$workdetails->taskId)
        {
         echo "<br>$workdetails->hoursDone<br>";
         echo "<br>$workdetails->text<br>";
        }
    } 
```

现在的问题是我最终得到了这样的结果：

John 1 处理电子邮件

詹姆士

杰瑞

拍

Harry 2.50 处理电子邮件

玛丽

莎拉

但我不希望人们出现，除非他们有 > 0 小时完成。

这是我真正失去的一点，我不知道从哪里开始说实话。任何指向答案或示例的链接都会很棒。这是继承代码和我自己的代码的混合体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:35:21.610

你快到了，做吧

```
 foreach($tasks as $taskid=>$taskname){
       if($userid==$workdetails->ownerId && $taskid==$workdetails->taskId && $workdetails->hoursDone > 0){
           echo "<br>$workdetails->hoursDone<br>";
           echo "<br>$workdetails->text<br>";
       }
   } 
```

我添加了一个检查以查看 hoursDone 值是否 > 0

# c# - 将 2 个文本框值插入 SQL Server 数据库

> ID：12218469
> 
> 赞同：0
> 
> 时间：2012-08-31T15:32:03.183
> 
> 标签：c#, asp.net, sql-server

我正在尝试学习如何获取控制值并将它们插入到数据库表中。例如，我有一个名为`NameBox`. 我想从该文本框中获取文本并将其添加到数据库表中。

我并不是想以最好的方式做到这一点，而是用最简单的方式来做，这样我就可以绕开这个概念。到目前为止，我有：

```
<asp:TextBox ID="NameBox" runat="server"></asp:TextBox>
<asp:TextBox ID="EmailBox" runat="server"></asp:TextBox> 
```

这是代码隐藏。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string name1 = NameBox.Text;
    string email1 = EmailBox.Text;

    System.Data.SqlClient.SqlConnection sqlConnection1 =
   new System.Data.SqlClient.SqlConnection(@"Data Source=E:\*********.com1.5\**********.com\App_Data\Home.sdf;");

    System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand();
    cmd.CommandType = System.Data.CommandType.Text;
    cmd.CommandText = "INSERT INTO CustomerList (Name, Email) VALUES (" + name1 + "," + email1 + ")";
    cmd.Connection = sqlConnection1;

    sqlConnection1.Open();
    cmd.ExecuteNonQuery();
    sqlConnection1.Close();
} 
```

我收到的错误消息是

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

我用谷歌搜索了错误消息，我读到的很多内容都说我的连接可能是错误的。我尝试使用一些拖放控件对此进行测试，并且我有一个使用相同连接字符串的中继器。

现在我什至不知道这是否是正确的方法。我相信你们都可以在某一点或另一个点上建立联系，我希望看到它在一个非常简单的层面上工作，这样我就可以开始使用它，看看它是如何真正工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:35:15.350

您的连接字符串推断您正在使用 SQL Server Compact Edition - 在这种情况下您希望使用[`SQLCeCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand%28v=vs.80%29.aspx)and[`SQLCeConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection%28v=vs.80%29.aspx)代替。还请考虑使用参数化查询而不是将字符串连接在一起 - 出于性能和安全原因，这样做会更好。请阅读[此链接](http://www.sommarskog.se/dynamic_sql.html#SQL_injection)以获取有关 SQL 注入的更多背景信息 - 目前您很容易受到它的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:34:01.723

您必须使用`SqlCeConnection`才能创建连接

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.sqlserverce.sqlceconnection%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.sqlserverce.sqlceconnection%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:42:53.197

只需复制粘贴您用于中继器代码的连接字符串，并将其粘贴到 Button1_Click 代码中，您将在其中创建新连接。可能有多余的空格，或者一些大写字母不匹配。对于插入，我会在数据库中创建一个存储过程，它接受 Name 和 Email 参数，并使用 SqlCommand 来执行存储过程。

```
CREATE PROCEDURE INSERT_NAME_EMAIL_DATA
    @NAME VARCHAR(100) NULL,
    @EMAIL VARCHAR(100) NULL
AS
BEGIN
      INSERT INTO CustomerList (Name, Email) VALUES (@NAME, @EMAIL)
END 
```

在您的代码中，您可以通过执行以下操作来执行存储过程：

```
cmd.CommandType = System.Data.CommandType.StoredProcedure;
cmd.Parameters.Add(
    new SqlParameter("@NAME", name1));
cmd.Parameters.Add(
    new SqlParameter("@EMAIL", email1));
cmd.Connection = sqlConnection1;

        sqlConnection1.Open();
        cmd.ExecuteNonQuery();
        sqlConnection1.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T11:46:56.210

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

对于上述错误，您已经通过转到服务窗口重新启动您的 sqlserver 实例，如下所示

按 windows + r

输入 services.msc + 输入

找到您的 sqlserver 实例并重新启动它

# php - Jenkins checkstyle.xml 不匹配任何东西：'build' 存在但不'build/logs/checkstyle.xml

> ID：12218472
> 
> 赞同：7
> 
> 时间：2012-08-31T15:32:20.977
> 
> 标签：php, jenkins

我是詹金斯的新手，所以如果这听起来很傻，请原谅我。

我似乎无法在 Jenkins 中运行 checkstyle，我已经设置了构建文件并添加了所需的信息（如下），但它不会获取文件。

我得到的错误是：'build/logs/checkstyle.xml' 不匹配任何东西：'build' 存在但不是 'build/logs/checkstyle.xml'

```
<target name="phpcs" description="Generate checkstyle.xml using PHP_CodeSniffer">
  <exec executable="phpcs" output="/dev/null">
   <arg value="--report=checkstyle" />
   <arg value="--report-file=${basedir}/build/logs/checkstyle.xml" />
   <arg value="--standard=${basedir}/build/phpcs.xml" />
   <arg value="--patterns=${source}/Plugin/Purifier/Vendor/" />
   <arg path="${source}" />
  </exec>
</target> 
```

来自命令行的错误

```
phpcs:
 [exec] Result: 2 
```

phpcs.xml 文件

```
<?xml version="1.0"?>
<ruleset name="Sebastian">
    <description>Sebastian Bergmann's coding standard</description>
    <rule ref="Generic.PHP.DisallowShortOpenTag"/>
    <rule ref="Generic.PHP.NoSilencedErrors"/>
</ruleset> 
```

报告的错误：

错误 未找到报告文件。配置错误？

更新

* * *

错误我已经解决了上述错误，现在得到以下信息：

```
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Fatal error:  Maximum function nesting level of '100' reached, aborting! in /usr/share/php/PHP/CodeSniffer/File.php on line 1389
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpcs:0
PHP   2\. PHP_CodeSniffer_CLI->process() /usr/bin/phpcs:37
PHP   3\. PHP_CodeSniffer->process() /usr/share/php/PHP/CodeSniffer/CLI.php:545
PHP   4\. PHP_CodeSniffer->processFile() /usr/share/php/PHP/CodeSniffer.php:496
PHP   5\. PHP_CodeSniffer->_processFile() /usr/share/php/PHP/CodeSniffer.php:1209
PHP   6\. PHP_CodeSniffer_File->start() /usr/share/php/PHP/CodeSniffer.php:1331
PHP   7\. PHP_CodeSniffer_File->_parse() /usr/share/php/PHP/CodeSniffer/File.php:382
PHP   8\. PHP_CodeSniffer_File::tokenizeString() /usr/share/php/PHP/CodeSniffer/File.php:586
PHP   9\. PHP_CodeSniffer_File::_createScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:956
PHP  10\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1344
PHP  11\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  12\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  13\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  14\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  15\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  16\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  17\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  18\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  19\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  20\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  21\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  22\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  23\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  24\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  25\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  26\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  27\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  28\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  29\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  30\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  31\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  32\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  33\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  34\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  35\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  36\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  37\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  38\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  39\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  40\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  41\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  42\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  43\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  44\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  45\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  46\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  47\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  48\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  49\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  50\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  51\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  52\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  53\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  54\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  55\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  56\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  57\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  58\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  59\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  60\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  61\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  62\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  63\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  64\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  65\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  66\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  67\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  68\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  69\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  70\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  71\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  72\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  73\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  74\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  75\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  76\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  77\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  78\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  79\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  80\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  81\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  82\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  83\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  84\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  85\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  86\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  87\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  88\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  89\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  90\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  91\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  92\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  93\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  94\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  95\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  96\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  97\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  98\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480
PHP  99\. PHP_CodeSniffer_File::_recurseScopeMap() /usr/share/php/PHP/CodeSniffer/File.php:1480 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:25:40.223

当 PHPCS 以 2 的退出代码返回时，它可能有很多原因，除非您针对输出进行验证（输出以`/dev/null`有效地防止输出 [自然]）

*   错误：PHP_CodeSniffer 需要 PHP 5.1.2 或更高版本。
*   错误：PHP_CodeSniffer 需要启用标记器扩展。
*   错误：找不到 .git 目录 (git)
*   错误：无法执行（git、svn、hg）
*   错误：找不到 .hg 目录 (hg)

在错误旁边，可能是参数错误，然后您会看到使用说明。我强烈建议您检查实际输出，因为您知道您有退出代码 2。

该清单是通过以下方式获得的：

```
$ grep -rn -B 1 'exit(2);' * 
```

这导致一些稍微过时的 phpcs 版本（1.3.3、1.3.6 目前稳定）：

```
CLI.php-66-            echo 'ERROR: PHP_CodeSniffer requires PHP version 5.1.2 or greater.'.PHP_EOL;
CLI.php:67:            exit(2);
--
CLI.php-71-            echo 'ERROR: PHP_CodeSniffer requires the tokenizer extension to be enabled.'.PHP_EOL;
CLI.php:72:            exit(2);
--
CLI.php-340-                    $this->printUsage();
CLI.php:341:                    exit(2);
--
CLI.php-347-                    $this->printUsage();
CLI.php:348:                    exit(2);
--
CLI.php-389-                    echo 'ERROR: Report type "'.$report.'" not known.'.PHP_EOL;
CLI.php:390:                    exit(2);
--
CLI.php-447-            $this->printUsage();
CLI.php:448:            exit(2);
--
CLI.php-454-            $this->printUsage();
CLI.php:455:            exit(2);
--
CLI.php-499-                $this->printUsage();
CLI.php:500:                exit(2);
--
CLI.php-509-            $this->printInstalledStandards();
CLI.php:510:            exit(2);
--
Reports/Gitblame.php-105-            echo 'ERROR: Could not locate .git directory '.PHP_EOL.PHP_EOL;
Reports/Gitblame.php:106:            exit(2);
--
Reports/Gitblame.php-112-            echo 'ERROR: Could not execute "'.$command.'"'.PHP_EOL.PHP_EOL;
Reports/Gitblame.php:113:            exit(2);
--
Reports/Hgblame.php-106-            echo 'ERROR: Could not locate .hg directory '.PHP_EOL.PHP_EOL;
Reports/Hgblame.php:107:            exit(2);
--
Reports/Hgblame.php-113-            echo 'ERROR: Could not execute "'.$command.'"'.PHP_EOL.PHP_EOL;
Reports/Hgblame.php:114:            exit(2);
--
Reports/Svnblame.php-80-            echo 'ERROR: Could not execute "'.$command.'"'.PHP_EOL.PHP_EOL;
Reports/Svnblame.php:81:            exit(2); 
```

# android - 如何在 Android 中使用圆形背景颜色对一些编辑和标签进行分组

> ID：12218475
> 
> 赞同：0
> 
> 时间：2012-08-31T15:32:25.320
> 
> 标签：android, background, tableview

在我的应用程序中，我生成带有标签、编辑、复选框等的动态对话框。

布局基于 TableView，它位于 ScrollView 之上，而且非常简单，因为每个 TableRow 中只有 1 或 2 个对象。

现在我必须用特定颜色和圆角对其中的一些 TableRows 进行分组。到目前为止，我没有使用任何具体的坐标，而是让 Android 来做这些事情。我只是读取传入的数据并根据需要创建尽可能多的行。

有没有人有一个好主意，这怎么可能实现？我可以在 Android 的渲染过程中读取实际坐标，以便创建背景图像并将其放在对话框下方吗？

欢迎任何想法;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:45:13.820

我认为您应该定义自己的样式并将它们应用于项目。

# html - 是否可以通过 img src="... vs address bar / "as the document" 检测图像是否已加载？

> ID：12218479
> 
> 赞同：6
> 
> 时间：2012-08-31T15:32:42.253
> 
> 标签：html, image, http-headers, detect

是否可以通过以下方式检测图像是否已加载：

```
<img src="image.jpg"/> 
```

在地址栏中或直接通过以下方式链接到：

```
<a href="image.jpg">Image</a> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:35:34.100

不，一般来说不是。

浏览器将为两者发出完全相同的请求。

当浏览器解析 HTML（它得到的第一件事）时，将分别请求每个附加资源（JavaScript、CSS、图像和其他链接文件）。浏览器不会添加有关它们从何处获得引用的信息 - 因此无法从请求中判断它是直接在地址栏上还是来自 HTML 页面上的引用。

您*可以*查询日志以查看请求是否完全独立，或者对 HTML 页面（可能还有其他资源）的请求是否在同一时间完成。这不是万无一失的（想想我们在网络上拥有的多层次缓存）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:51:58.407

有可能的。
只需检查推荐人！

```
<img src="image.jpg"/> 
```

推荐人将是图像之前的页面

```
<a href="image.jpg">Image</a> 
```

引用者将是嵌入图像的页面

否则，只需添加一个 GET 参数。

```
<img src="image.jpg?src=img"/>

<a href="image.jpg?src=a">Image</a> 
```

在带有 JS 的下一页或 apache 日志中，您可以评估 GET 参数，而不会给用户带来任何副作用或陷阱。

# javascript - JavaScript 中 null 和 undefined 的区别？

> ID：12218483
> 
> 赞同：17
> 
> 时间：2012-08-31T15:33:00.310
> 
> 标签：javascript

根据[JavaScript 中 null 和 undefined 的区别是什么？](https://stackoverflow.com/questions/5076944/what-is-the-difference-between-null-and-undefined-in-javascript),`null`并且`undefined`是 Javascript 中的两个不同的对象（具有不同的类型）。但是当我尝试这段代码时

```
var a=null;
var b;
alert(a==null);      // expecting true
alert(a==undefined); // expecting false
alert(b==null);      // expecting false
alert(b==undefined); // expecting true 
```

上述代码的输出是：

```
true
true
true 
true 
```

现在因为`==`只匹配值，我认为两者`undefined`和`null`必须具有相同的值。所以我尝试了：

`alert(null)`-> 给`null`

`alert(undefined)`-> 给`undefined`

我不明白这怎么可能。

这是[演示](http://jsfiddle.net/A89Qj/1/)。

编辑

我知道这`===`会给出预期的结果，因为`undefined`并且`null`有不同的类型，但是在 Javascript 的情况下，类型转换如何工作`==`？我们可以像在 Java 中那样进行显式类型转换吗？我想在`undefined`和上应用手动类型转换`null`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-31T15:34:17.003

您需要使用[恒等运算符`===`，而不是相等运算符`==`](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-us)。通过此更改，您的[代码将按预期工作](http://jsfiddle.net/A89Qj/2/)：

```
alert(a===null);      // true
alert(a===undefined); // false
alert(b===null);      // false
alert(b===undefined); // true 
```

在这种情况下，相等运算符失败的原因是它试图进行类型转换。`undefined`是 类型`undefined`, 并且`null`是 类型`object`; 在尝试比较两者时，Javascript 将两者都转换为`false`，这就是为什么最终认为它们相等的原因。另一方面，恒等运算符不进行类型转换，并且要求类型相等才能得出相等。

**编辑** *感谢@user1600680 指出，以上内容并不完全正确；ECMAScript 规范将 null-to-undefined 定义为特殊情况，并且相等。没有中间转换为`false`.*

* * *

一个更简单的类型转换示例是数字到字符串：

```
console.log(5 == "5");    // true
console.log(5 === "5");   // false 
```

* * *

上面的答案很好地引用了 Douglas Crockford 的*Javascript: The Good Parts*：

> [“==”运算符在操作数属于相同类型时是正确的，但如果它们属于不同类型，它们会尝试强制转换值。他们这样做的规则既复杂又难以忘怀。

如果您不相信这些规则是*复杂且难以记住*的，那么[快速浏览一下这些规则](http://jibbering.com/faq/notes/type-conversion/) 将会消除您的这种想法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T16:03:22.413

`undefined`并且`null` 具有非常不同的语义含义。

`undefined`通常表示“没有任何回复”，`null`意思是“有回复，但回复什么都没有”。

例如，如果我创建了这个对象：

```
var gameState = {
  state: loaded,
  lastPlayer: null,
  lastScore: null
}; 
```

这并不意味着“我不知道最后一个玩家是谁”，而是意味着“没有最后一个玩家”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:36:15.710

`==`为了澄清先前的答案，以这种方式工作的原因是，与 不同`===`，它会[进行类型转换](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T15:41:27.307

```
 var a;
 var b = null; 
```

a 未定义，b 完全为空。

`==`用于以故意松散的方式比较相等，这通常很有用

```
alert("3" == 3.0); 
```

这给了我们`true`尽管它们明显不同 - 一个是数字，一个是字符串。

不过很多时候，这很棒。

同样，很多时候并不关心某些东西是否没有真正的价值，因为它是未定义的，或者是因为它被显式设置为 null。

虽然有时很有用，但我们有时也需要知道确切的类型匹配以及值，所以我们也有`===`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T20:21:17.603

我还要说`undefined`与 一起使用`typeof`。比较必须为：

```
if( typeof(b)=="undefined" ){} 
```

给出相同的结果

```
if( b === undefined ){} 
```

我已经在你的代码 [http://jsfiddle.net/A89Qj/5/上包含了这个额外的测试](http://jsfiddle.net/A89Qj/5/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T15:36:23.690

您需要使用 === 而不是 ==。=== 运算符的行为方式与 == 运算符相同，只是它不进行任何类型转换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-17T14:18:36.867

typeof undefined 是未定义的，但 null 的类型是对象。null === undefined 会给你错误的。但是 null == undefined 会给你真实的。因为 boh 具有不同的数据类型但具有相同的值。

# asp.net-mvc - 设置 OutputPath 时，“未为项目设置 OutputPath 属性”

> ID：12218495
> 
> 赞同：28
> 
> 时间：2012-08-31T15:33:43.363
> 
> 标签：asp.net-mvc, visual-studio-2010, msbuild, asp.net-mvc-4

在 MVC4 中，如果我为解决方案中的所有项目创建新的构建配置，我会在单独构建 web .csproj 时得到以下信息：

```
msbuild Company.Directory.Web.csproj /p:Configuration=Dev 
```

> [错误] C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(483, 9)：没有为项目“Company.Directory.Web.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='开发'平台='AnyCPU'。您可能会看到此消息，因为您正在尝试构建没有解决方案文件的项目，并且指定了该项目不存在的非默认配置或平台。

但是，`OutputPath`属性是设置的！

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Dev|AnyCPU'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisIgnoreBuiltInRuleSets>false</CodeAnalysisIgnoreBuiltInRuleSets>
    <CodeAnalysisIgnoreBuiltInRules>false</CodeAnalysisIgnoreBuiltInRules>
    <DeployIisAppPath>Port 80/directory/dev</DeployIisAppPath>
  </PropertyGroup>
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>
    </ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{285FBF79-7933-4AF9-AAAF-25EE7734AAAA}</ProjectGuid>
    <ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Company.Directory.Web</RootNamespace>
    <AssemblyName>Company.Directory.Web</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <MvcBuildViews>false</MvcBuildViews>
    <UseIISExpress>true</UseIISExpress>
    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\</SolutionDir>
    <RestorePackages>true</RestorePackages>
  </PropertyGroup>
  <!-- ... --> 
```

**这是一个错误吗？我该如何解决？**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-31T15:33:43.363

事实证明，第一个`PropertyGroup`很重要。`PropertyGroup`Visual Studio出于某种原因在其之前插入了新配置（Dev） 。我猜它是一个错误。我通过在其他配置之后移动新配置来修复它。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>
    </ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{285FBF79-7933-4AF9-AAAF-25EE7734AAAA}</ProjectGuid>
    <ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Company.Directory.Web</RootNamespace>
    <AssemblyName>Company.Directory.Web</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <MvcBuildViews>false</MvcBuildViews>
    <UseIISExpress>true</UseIISExpress>
    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\</SolutionDir>
    <RestorePacCompanyes>true</RestorePacCompanyes>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Dev|AnyCPU'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisIgnoreBuiltInRuleSets>false</CodeAnalysisIgnoreBuiltInRuleSets>
    <CodeAnalysisIgnoreBuiltInRules>false</CodeAnalysisIgnoreBuiltInRules>
    <DeployIisAppPath>Port 80/directory/dev</DeployIisAppPath>
  </PropertyGroup>
  <!-- ... --> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-11T16:09:28.033

尝试使用 msbuild.exe 从命令行构建时，我遇到了类似的错误。我的问题是当我应该放置“AnyCPU”时，我指定了“Any CPU”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-04T12:45:36.660

我对项目有类似的问题`Azure`。在解决方案中添加新配置后`Release-CLOUD-STAGE`，我开始收到相同的错误：

> 未为项目设置 OutputPath 属性

在编辑器中打开`ccproj`文件并搜索新配置后，我在它的末尾看到了这个：

```
 <PropertyGroup Condition=" '$(Configuration)' == 'Release-CLOUD' ">
    <OutputPath>bin\Release-CLOUD\</OutputPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release-CLOUD-STAGE' ">
    <OutputPath>bin\Release-CLOUD-STAGE\</OutputPath>
  </PropertyGroup> 
```

在我看来一切都很好——现有配置`Release-CLOUD`运行良好，但新配置却不行。事实证明，该项目文件中有**两个`PropertyGroup`元素**- 一个 - COMPLETE - 在项目文件的最开头：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release-CLOUD|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release-CLOUD\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup> 
```

然后由于某种原因，还有另一个，我上面显示的简短版本，插入到文件末尾附近。在我为新配置创建了正确的完整版本的`PropertyGroup`元素之后`Release-CLOUD-STAGE`（并删除了两个短版本） - 一切都遵守了。

我不确定这是否是特定于 Azure 的，但我确实在这方面浪费了一些时间，所以我也想分享我的发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T14:55:52.910

我有两个没有条件的 PropertyGroup 元素，我认为后者阻止了前者生效。我将所有子项合并到第一个 PropertyGroup 元素中并去掉了第二个，然后事情就开始工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T11:36:19.230

我在 Azure WebRole 项目中遇到了同样的错误，并将`<PropertyGroup>`元素手动添加到 .csproj 文件中。但是，我不小心把它们放在了几个`<Import>`语句下面。构建将因问题中的错误而失败。

**正确的顺序**

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Dev|AnyCPU'">
   <DebugSymbols>true</DebugSymbols>
   <OutputPath>bin\</OutputPath>
   <DefineConstants>DEBUG;TRACE</DefineConstants>
   <DebugType>full</DebugType>
   <PlatformTarget>AnyCPU</PlatformTarget>
   <ErrorReport>prompt</ErrorReport>
   <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
</PropertyGroup>
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" /> 
```

**顺序错误**

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" />
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Dev|AnyCPU'">
   <DebugSymbols>true</DebugSymbols>
   <OutputPath>bin\</OutputPath>
   <DefineConstants>DEBUG;TRACE</DefineConstants>
   <DebugType>full</DebugType>
   <PlatformTarget>AnyCPU</PlatformTarget>
   <ErrorReport>prompt</ErrorReport
<CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
</PropertyGroup> 
```

# android - 如何解析多部分文件上传android服务器端

> ID：12218502
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:10.960
> 
> 标签：android, file, upload, webserver

我正在开发一个网络服务器应用程序，用户可以从浏览器将文件上传到android设备。我相信apache commons文件上传可用于使用servlets在服务器端解析多部分表单请求。有什么办法可以在android服务器端完成。我只能消费请求正文。

```
 -----------------------------4966737613931 Content-Disposition: form-data; name="datafile"; filename="log with spaces[ezees'.i]godknows.txt" Content-Type: text/plain 08-15 15:54:22.112: I/Process(650): Sending signal. PID: 650 SIG: 9 08-15 15:54:27.532: I/HTTPSERVICE(662): Creating and starting httpService 08-15 15:54:27.542: I/Notification(662): Notification Shown 08-15 16:08:19.332: I/HTTPSERVICE(662): Destroying httpService 08-15 16:08:19.352: I/Notification(662): Notification Destroyed 08-15 16:20:14.852: I/HTTPSERVICE(690): Creating and starting httpService 08-15 16:20:14.862: I/Notification(690): Notification Shown 08-15 16:20:28.102: D/dalvikvm(690): GC freed 2292 objects / 135976 bytes in 157ms 08-15 16:20:28.872: I/Resources(690): Loaded time zone names for en_US in 3090ms. 08-15 16:20:28.882: I/global(690): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required. 08-15 16:20:35.302: I/System.out(690): Host: localhost:8080 08-15 16:20:35.382: I/System.out(690): Accept-Encoding: gzip 08-15 16:20:35.422: I/System.out(690): Referer: http://localhost:8080/ 08-15 16:20:35.422: I/System.out(690): Accept-Language: en-US 08-15 16:20:35.442: I/System.out(690): User-Agent: Mozilla/5.0 (Linux; U; Android 2.1-update1; en-us; sdk Build/ECLAIR) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17 08-15 16:20:35.472: I/System.out(690): Origin: http://localhost:8080 08-15 16:20:35.512: I/System.out(690): Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5 08-15 16:20:35.533: I/System.out(690): Content-Type: application/x-www-form-urlencoded 08-15 16:20:35.562: I/System.out(690): Accept-Charset: utf-8, iso-8859-1, utf-16, *;q=0.7 08-15 16:20:35.599: I/System.out(690): Content-Length: 25 -----------------------------4966737613931-- 
```

这也是一个文本文件。使用 java 手动读取文件上传请求时涉及的解析内在函数是什么？我想从请求正文中获取文件名和文件数据。任何正确方向的想法或指针都是非常感谢。谢谢

# ruby-on-rails - Ruby on Rails 在 phusion 乘客上

> ID：12218503
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:12.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, passenger

我已经使用 rails 在我的机器上创建了一个网站，现在我想将它放在服务器机器（不同的机器）上并运行它。我有一个在 linux 上运行的专用服务器，它使用 apachee。现在我对运行服务器和运行 Rails 网站很感兴趣。但是我不知道该怎么做。

据我了解，我必须使用某种软件来运行它，并且选择了他的 phusion 乘客但我将如何转移它？

如果我应该做什么，我是否只是将文件夹复制并粘贴到存在 www 的服务器中。我的机器上安装了一些宝石，例如回形针，rmagic，我需要通过捆绑安装来安装它们还是 phusion 乘客会照顾它？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:00:14.380

你必须在你的 Apache 机器上安装 Phusion Passenger。就像您在 Linux 上一样，安装应该是直截了当的。www.modrails.com 将您带到乘客下载页面。

安装Passenger不会改变你的应用程序，如果你的应用程序需要任何Gem，你仍然需要运行bundle install来安装它们。

您将把您的应用程序从您的开发机器复制到您的部署机器。你把它放在哪里是你的选择。一旦安装了Passenger，它只需要知道你的rails 应用程序的根目录在哪里。通常你会在 apache 的虚拟主机配置部分定义它，这里是一个例子：

```
<VirtualHost *:80>
  SuexecUserGroup "#1000" "#1000"
  ServerName yourdomain.com
  ServerAlias www.yourdomain.com
  ServerAlias www.yourdomain.net
  DocumentRoot /home/yourappdir/public
  CustomLog /home/logs/access_log combined
  ScriptAlias /cgi-bin/ /home/cgi-bin/
  ScriptAlias /fcgi-bin/ /home/fcgi-bin/
  XSendFile On
  <Directory /home/yourappdir/public>
    Options -Indexes IncludesNOEXEC FollowSymLinks -MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
  <Directory /home/cgi-bin>
    Order allow,deny
    Allow from all
  </Directory>
  <Directory /home/fcgi-bin>
    Order allow,deny
    Allow from all
  </Directory>
  RackEnv production
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:48:17.957

你试过他们的教程吗？

[http://www.modrails.com/documentation/Users%20guide%20Apache.html](http://www.modrails.com/documentation/Users%20guide%20Apache.html)

你应该阅读它。我想你的问题会在那里得到解答。请注意，在这里托管 rails 需要一些知识。它不像在共享主机上托管 php 解决方案那么容易。

而且您必须安装乘客和轨道堆栈。这通常只有在您对目标机器拥有完全的管理员权限时才有可能。

# c# - 来自集合 Lambda 的集合

> ID：12218505
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:23.757
> 
> 标签：c#, linq, lambda

考虑到下面的情况，我需要获取属于分配给顶层的中间对象列表的所有底层对象。我的结构意味着中层对象挂在顶层，但底层只是所有对象的集合。因此，即使列表不存在，我也需要获取所有有效“挂起”顶层和中间层的底层对象。在 lambda 中有一个很好的方法来做到这一点吗？

```
class Program
{
    static void Main(string[] args)
    {
        List<TopClass> topClasses = new List<TopClass>();

        List<MiddleClass> mcList1 = new List<MiddleClass>();
        mcList1.Add(new MiddleClass(1));
        mcList1.Add(new MiddleClass(3));
        mcList1.Add(new MiddleClass(5));
        TopClass tc1 = new TopClass(1, mcList1);
        topClasses.Add(tc1);

        List<MiddleClass> mcList2 = new List<MiddleClass>();
        mcList2.Add(new MiddleClass(2));
        mcList2.Add(new MiddleClass(4));
        TopClass tc2 = new TopClass(2, mcList2);
        topClasses.Add(tc2);

        List<MiddleClass> mcList3 = new List<MiddleClass>();
        mcList3.Add(new MiddleClass(6));
        mcList3.Add(new MiddleClass(7));
        TopClass tc3 = new TopClass(3, mcList3);
        // ** Note not added to the global list

        List<BottomClass> bottomClasses = new List<BottomClass>();
        bottomClasses.Add(new BottomClass(10, 1));
        bottomClasses.Add(new BottomClass(20, 2));
        bottomClasses.Add(new BottomClass(30, 3));
        bottomClasses.Add(new BottomClass(40, 4));
        bottomClasses.Add(new BottomClass(50, 5));
        bottomClasses.Add(new BottomClass(60, 6));
        bottomClasses.Add(new BottomClass(70, 7));

        bottomClass.FindAll(b => ....?
    }
}

public class TopClass //Instruments
{
    public int Id { get; set; }
    public List<MiddleClass> MiddleClasses { get; set; }

    public TopClass(int id, List<MiddleClass> middleClasses)
    {
        this.Id = id;
        this.MiddleClasses = middleClasses;
    }
}

public class MiddleClass // Sequences
{
    public int Id { get; set; }

    public MiddleClass(int id)
    {
        this.Id = id;
    }
}

public class BottomClass //SequenceItem
{
    public int Id { get; set; }
    public int MiddleClassId { get; set; }

    public BottomClass(int id, int middleClassId)
    {
        this.Id = id;
        this.MiddleClassId = middleClassId;
    }
} 
```

结果将是一个包含 10 到 50 但不包含 60 和 70 的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:42:31.870

怎么样

```
topClasses
 .SelectMany(x=>x.MiddleClasses)
 .SelectMany(x=>bottomClasses.Where(y=>y.MiddleClassId==x.Id)) 
```

可选择`.Distinct()`在末尾添加以实现唯一性

或者从其他方式

```
bottomClasses.Where(
  b=>topClasses.Any(t=>t.MiddleClasses.Any(m=>m.Id==b.MiddleClassId))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:42:24.430

不知道这是否是你想要的......

```
var test = bottomClasses.Where(b => b.Id >= 10 && b.Id <= 50); 
```

如果不是，请评论我误解的内容:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:42:48.750

这就是你想要的。因此，给定一个 TopClass，例如 tc3，这将为您提供所有挂在 tc3 上的底层类

```
 var allMiddleClasses = topClasses.SelectMany(t => t.MiddleClasses);

    var allBC = 
            bottomClasses
                .Where(b => allMiddleClasses.Select(m => m.Id).Contains(b.MiddleClassId))
                    .ToList(); 
```

# sql-server - sql中的while循环我不是从其他表中逐一迭代id而是varchar值

> ID：12218506
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:26.970
> 
> 标签：sql-server, loops, while-loop

我想使用 while 循环并从其他表中逐一迭代值，例如“server1name”、“server2name”、“server3name”，下面是与从 sp 生成 sql 作业相关的代码，这是在 4 个不同的环境中一次创建它我想在 sp 下面使用 while 循环

```
--use msdb;
--IF  EXISTS (SELECT job_id FROM msdb.dbo.sysjobs_view WHERE name = N'TORODO1')
--EXEC sp_delete_job @job_name = N'TORODO1' , @delete_unused_schedule=1
--DROP PROCEDURE dbo.JobCreation
--sp_helptext 'dbo.JobCreation';
CREATE PROCEDURE dbo.JobCreation
AS
BEGIN
DECLARE @JobName VARCHAR(30)= 'TORODO1';

EXEC    msdb.dbo.sp_add_job @job_name= @jobName, 
        @enabled=0,                                             
        @notify_level_eventlog=0, 
        @notify_level_email=0, 
        @notify_level_netsend=0, 
        @notify_level_page=0, 
        @delete_level=0, 
        @description=N'No description available.', 
        @category_name=N'[Uncategorized (Local)]', 
        @owner_login_name=N'CORP\StaSQLExec';

EXEC    msdb.dbo.sp_add_jobstep @job_name= @jobName, @step_name=N'DUMMY_1', 
        @step_id=1, 
        @cmdexec_success_code=0, 
        @on_success_action=3, 
        @on_success_step_id=0, 
        @on_fail_action=2, 
        @on_fail_step_id=0, 
        @retry_attempts=0, 
        @retry_interval=0, 
        @os_run_priority=0, @subsystem=N'SSIS', 
        --@database_name=N'NPKSTADAT11',  
        @database_name=@server1name, --server2name, server3name-- here want to apply while loop
        @command=N'/SQL "\Dummy" /SERVER NPKSTADAT11 /CONFIGFILE "E:\SSIS_Package_Repository\Dummy\PackageDependencies_20120801\Dummy.dtsconfig" /CHECKPOINTING OFF /REPORTING E', 
        @flags=0;

EXEC    msdb.dbo.sp_add_jobstep @job_name=@jobName, @step_name=N'DUMMY_2', 
        @step_id=1, 
        @cmdexec_success_code=0, 
        @on_success_action=3, 
        @on_success_step_id=0, 
        @on_fail_action=2, 
        @on_fail_step_id=0, 
        @retry_attempts=0, 
        @retry_interval=0, 
        @os_run_priority=0, @subsystem=N'SSIS', 
        --@database_name=N'NPKSTADAT11',  
        @database_name=N'master',
        @command=N'/SQL "\Dummy" /SERVER NPKSTADAT11 /CONFIGFILE "E:\SSIS_Package_Repository\Dummy\PackageDependencies_20120801\Dummy.dtsconfig" /CHECKPOINTING OFF /REPORTING E',
        @flags=0;

EXEC    msdb.dbo.sp_add_jobschedule @job_name=@jobName, @name=N'Dummy_schedule_2', 
        @enabled=1, 
        @freq_type=8, 
        @freq_interval=63, 
        @freq_subday_type=1, 
        @freq_subday_interval=0, 
        @freq_relative_interval=0, 
        @freq_recurrence_factor=1, 
        @active_start_date=20120831, 
        @active_end_date=99991231, 
        @active_start_time=0, 
        @active_end_time=235959 
        --@schedule_uid=N'08468e56-ffbc-45b0-a3ac-a812bcf8401c'

EXEC    msdb.dbo.sp_add_jobschedule @job_name=@jobName, @name=N'DUMMY_step_1_schedule', 
        @enabled=1, 
        @freq_type=4, 
        @freq_interval=1, 
        @freq_subday_type=1, 
        @freq_subday_interval=0, 
        @freq_relative_interval=0, 
        @freq_recurrence_factor=0, 
        @active_start_date=20120831, 
        @active_end_date=99991231, 
        @active_start_time=230000, 
        @active_end_time=235959 
        --@schedule_uid=N'ef28ae48-cf83-46c7-b83e-973df6adc62d'
EXEC    msdb.dbo.sp_add_jobserver @job_name=@jobName, @server_name = N'(local)'
    END 

        Go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:43:59.207

您将需要研究[Cursors](http://en.wikipedia.org/wiki/Cursor_%28databases%29)来驱动您的 while 循环。就像是

```
declare myCursor cursor for
  select servername from ServerTable

open myCursor
fetch next from myCursor into @serverName

while @@FETCH_STATUS = 0
begin
   ... do the work ...
   fetch next from myCursor into @serverName
end

close myCursor
deallocate myCursor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:54:12.977

以下是如何使用 while 循环。

```
SELECT  Servername ,
    0 AS Status 
 INTO    #temp1
 FROM    ServerTable
 DECLARE @variable VARCHAR(50)

WHILE EXISTS ( SELECT TOP 1
                    NULL
           FROM     #temp1 AS T
           WHERE    T.Status = 0 ) 

BEGIN

    UPDATE TOP ( 1 )
            #temp1
    SET     Status = 1
    WHERE   #temp1.Status = 0

    SELECT TOP 1
            @variable = Servername
    FROM    #temp1 AS T
    WHERE   T.Status = 0

...Do your work...

    DELETE  FROM #temp1
    WHERE   #temp1.Status = 1

END 
```

`

# lucene - 倒排索引 vs 二叉树 vs ...？

> ID：12218507
> 
> 赞同：3
> 
> 时间：2012-08-31T15:34:28.557
> 
> 标签：lucene, elasticsearch

我一直在使用 Elastic Search（由下面的 Lucene 提供支持），它很棒。无论我向它扔什么，它都会快速燃烧。

我想知道*为什么*它现在很快。我理解它使用倒排索引，我部分理解基于我发现的几篇文章和一些很好的 youtube 视频解释它的内容，但为什么这比 Mysql 或 Mongo 中的二叉树快得多? 我知道这有点像苹果和橘子的比较，但我还没有找到任何关于倒排索引与二叉树索引如何工作的*真正*好的解释（比如并排） 。

到目前为止，我唯一收集到的是，基于索引时间，倒排索引总是更快，因为它不必重新平衡树的叶子（分形索引也是如此）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:37:54.147

这都是关于权衡的。

Lucene 的索引与 B-Tree*非常*不同，并且基于一次写入的段。对于每个段，都有一个[术语字典](http://lucene.apache.org/core/3_6_1/fileformats.html#Term%20Dictionary)和[发布列表](http://lucene.apache.org/core/3_6_1/fileformats.html#Frequencies)。查找一个术语需要阅读术语词典中有关该术语的一些信息，然后跳转到其发布列表的开头，您将能够在其中按顺序阅读与该术语匹配的文档列表。术语字典中的查找基于二进制搜索的一种变体，以便能够有效地运行范围查询。

每次添加文档时，都会创建一个新段（这就是 Lucene 在批量更新方面要好得多的原因），当段数达到可配置的阈值（称为合并因子）时，一些段被合并在一起（基于[合并策略](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/MergePolicy.html)）。

这种设计允许 Lucene 高效地运行许多查询，但另一方面，Lucene 仍然不是很擅长原子单文档更新（因为每次提交都需要刷新一个新段并且因为您需要重新索引整个文档，所以没有不管你的修改有多大）。正在进行与[个别领域更新](https://issues.apache.org/jira/browse/LUCENE-3837)相关的工作，但这仍然是实验性的。

# .htaccess - TYPO3：每个 URL 的末尾只有 .html

> ID：12218508
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:31.367
> 
> 标签：.htaccess, rewrite, typo3, realurl

我正在使用 RealURL，可以通过以下方式访问该网站

`www.domain.com/sitemap.html`和`www.domain.com/sitemap`

现在该网站应该只能通过

`www.domain.com/sitemap.html`

如何才能做到这一点？

我找到了 config `'defaultToHTMLsuffixOnPrev' => '.html'`，但我不知道这是否是正确的选择。也有一些可能性`.htaccess`，但这应该只对网站有效（不是图片，pdfs ...）。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:36:00.557

使用扩展*Force RealURLs*，它强制对页面的访问只能由 RealURL 中配置的 URL 方案进行。[扩展 Forcerealurls](http://typo3.org/extensions/repository/view/forcerealurls)。由我测试和认证:)。

此外，请确保在您的 HEAD 部分中使用规范的 URL。[德语教程](http://www.fladi.de/2009/02/17/howto-einbinden-von-canonical-in-den-header-mit-typo3/)。如果您不喜欢摆弄 TypoScript，请使用[Canonical 。](http://typo3.org/extensions/repository/view/canonical)

有一个扩展可以解决这两个问题，但我还没有测试过：[Extension Stop Duplicate Content](http://typo3.org/extensions/repository/view/cps_stopdc)

# c# - 添加项目符号并减少 xaxis 标签间隔

> ID：12218510
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:37.567
> 
> 标签：c#, windows-phone-7, amcharts

我正在使用一个小应用程序，发现 amChart 非常好。但我希望能够控制一些事情，但我还没有发现我怎么能做到这一点......

首先，我希望用户能够看到每个数据值的项目符号，其次我需要减少 xaxis 标签。我想显示所有项目符号，比如说 25 个项目，我只想显示 1、5、10、15、20 和 25。

```
 <amq:SerialChart x:Name="foo" DataSource="{Binding Data}" CategoryValueMemberPath="axis"
                    AxisForeground="White"
                    PlotAreaBackground="Transparent"
                    GridStroke="DarkGray" 
                    LegendVisibility="Collapsed">
                    <amq:SerialChart.Graphs>
                        <amq:LineGraph ValueMemberPath="value" Title="Foo" Brush="#FFFF0000" />
                    </amq:SerialChart.Graphs>
                </amq:SerialChart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:59:09.323

如果你到目前为止还没有做太多的工作，你可以考虑 Visifire。甚至 msdn 也使用他们的库为图表提供了[示例代码。](http://code.msdn.microsoft.com/wpapps/Using-Charts-Gauges-in-WP7-a25c6958)我没有使用 amCharts，而是使用了 visifire 图表。在此处查看[图库图片](http://www.visifire.com/windows_phone_charts.php)。它在我的应用程序中帮助了我。我希望它也能帮助你。

# linq-to-sql - C# 表达式中的 P 是什么意思？

> ID：12218512
> 
> 赞同：0
> 
> 时间：2012-08-31T15:34:50.743
> 
> 标签：linq-to-sql, sorting, data-binding, binding, entityset

我正在尝试使用帖子中的答案：[您如何对 EntitySet<T> 进行排序](https://stackoverflow.com/questions/925567/how-do-you-sort-an-entitysett)以公开接口，以便我可以使用绑定列表对 EntitySet 进行排序。我创建了下面的类，但出现以下编译器错误：“找不到类型或命名空间‘P’（您是否缺少 using 指令或程序集引用？）。有人可以告诉我 P 的含义以及哪个命名空间我需要包含以下方法来编译吗？我对代表和兰巴表达式很陌生。

另外，有人可以确认，如果我从我的 EntitySet 创建一个 BindingList，那么我对 BindingList 所做的任何修改都会对 EntitySet 进行吗？

基本上，我有一个 EntitySet 需要对其进行排序和更改。然后，我将需要使用 BindingList 来自的原始实体来保留这些更改。

```
public class EntitySetBindingWrapper<T> : BindingList<T>
{
    public EntitySetBindingWrapper(BindingList<T> root)
        : base(root)
    {
    }

            public void Sort<P>(Expression<Func<T, P>> expr, ListSortDirection direction)
    {
        if (expr == null)
            base.RemoveSortCore();

        MemberExpression propExpr = expr as MemberExpression;
        if (propExpr == null) throw new ArgumentException("You must provide a property", "expr");

        PropertyDescriptorCollection descriptorCol = TypeDescriptor.GetProperties(typeof(T));
        IEnumerable<PropertyDescriptor> descriptors = descriptorCol.Cast<PropertyDescriptor>();
        PropertyDescriptor descriptor = descriptors.First(pd => pd.Name == propExpr.Member.Name);

        base.ApplySortCore(descriptor, direction);
    }
} 
```

我终于得到了上面的代码来编译但是，现在当我尝试调用构造函数时出现错误：

currentPredefinedJob.fkItems 是 EntitySet 的以下代码导致错误：无法从 System.ComponentModel.IBindingList 转换为 System.ComponentModel.BindingList

```
var bindingWrapper = new EntitySetBindingWrapper<PredefinedJobsItem>(currentPredefinedJob.fkItems.GetNewBindingList()); 
```

而且，以下代码会导致错误：错误 8 Using the generic type 'MarineService.Tests.EntitySetBindingWrapper' requires '1' type arguments

```
var bindingWrapper = new EntitySetBindingWrapper(currentPredefinedJob.fkItems.GetNewBindingList()); 
```

有人能告诉我我需要如何调用这个构造函数并确认我将如何对生成的 BindingList 进行排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:37:24.083

您需要在类定义或方法定义中指定泛型变量。

`P`将是您的函数返回的类型`expr`

```
public void Sort<P>(Expression<Func<T, P>> expr, ListSortDirection direction) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:07:40.563

对于调用构造函数，以下工作正常：

`var w = new EntitySetBindingWrapper<String>(new System.ComponentModel.BindingList<string>());`

问题是否可能出在您正在做的事情中`currentPredefinedJob.fkItems.GetNewBindingList()`？

# java - BigDecimal(double) 构造函数的不可预测性

> ID：12218515
> 
> 赞同：21
> 
> 时间：2012-08-31T15:35:09.180
> 
> 标签：java

我最近在一个项目中开始使用 Sonar，我得到了一条关于使用构造函数的 PMD 规则`new BigDecimal(double val)`。当我阅读 java 文档时，我发现 new BigDecimal(double val) 有点不可预测，我应该使用`new BigDecimal(String val)`可预测的。

这是 javadoc 所说的`BigDecimal` `public BigDecimal(double val)`：

> 将 double 转换为 BigDecimal，BigDecimal 是 double 的二进制浮点值的精确十进制表示。返回的 BigDecimal 的小数位数是使 (10scale × val) 为整数的最小值。
> 
> 笔记：
> 
> 此构造函数的结果可能有些不可预测。有人可能会假设`new BigDecimal(0.1)`用 Java 编写的 a `BigDecimal`正好等于 0.1（未缩放的值 1，比例为 1），但它实际上等于 0.1000000000000000055511151231257827021181583404541015625。这是因为 0.1 不能完全表示为双精度数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。
> 
> 另一方面，String 构造函数是完全可预测的：编写`new BigDecimal("0.1")`创建的 a`BigDecimal`正好等于 0.1，正如人们所期望的那样。因此，一般建议优先使用 String 构造函数。
> 
> 当必须将 double 用作 a 的源时`BigDecimal`，请注意此构造函数提供了精确转换；它与使用 `Double.toString(double)`方法将双精度转换为字符串然后使用 `BigDecimal(String)`构造函数给出的结果不同。要获得该结果，请使用静态 `valueOf(double)`方法。

为什么这个构造函数真的存在？这还`new BigDecimal(String val)`不够吗？我什么时候应该使用`new BigDecimal(double val)`构造函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T15:40:15.123

> 为什么这个构造函数真的存在？

它将实际表示的值转换`double`为 BigDecimal。BigDecimal 的全部意义在于提供尽可能高的精度，这就是这个构造函数的作用。

如果您想通过少量四舍五入获得`Double.toString(double)`可以使用的值

```
System.out.println(BigDecimal.valueOf(0.1)); 
```

印刷

```
0.1 
```

> 我什么时候应该使用新的 BigDecimal(double val) 构造函数

当你想知道`double`真正代表的价值。您可以根据需要应用自己的舍入。

使用`double`时，应始终应用合理的舍入。但是，如果你这样做了，你可能会发现你不需要 BigDecimal。;)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T15:39:30.147

`When should I use the new BigDecimal(double val) constructor?`

最好 - 无处。

如果您愿意使用 BigDecimals，则使用带有 double 的构造函数意味着失去精确数字表示的所有好处。

`Why does this constructor really exists?`

因为有时你只有双倍，你想翻译成 BigDecimal。强迫你在中间使用`.toString()`会很愚蠢；）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T15:37:41.907

因为如果您已经从一个`double`值作为数据开始，那么您已经失去了这种精确性。因此，没有它会迫使您将其转换为`String`for`BigDecimal`以将其转换回来。

而且，也许有时你只需要**那个**值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:39:18.080

当您要使用的数据已经作为双精度值存在时，您将使用双精度构造函数。在这种情况下，必须在将其转换为 BigDecimal 之前将其转换为字符串将是一种浪费。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-24T23:00:14.243

不可预料的？我不同意。

```
final double before = 0.1;
BigDecimal bd = new BigDecimal(before);
double after = bd.doubleValue();
assert before == after; 
```

理解的关键：

```
assert 0.1 == 0.1000000000000000055511151231257827021181583404541015625; 
```

如果你的意思是“0.1”，那么是的，使用 String 构造函数 =) 但是如果你已经有一个`double`，那么那个 double 不是“0.1”。

您引用的 JavaDoc 说：

> 当必须将 double 用作 BigDecimal 的源时，请注意此构造函数提供了**精确的**转换；

我看不出确切的转换是如何“不可预测的”，我非常赞成从这句话中删除“必须”这个词。

归根结底，两个构造函数都按预期工作。如果你有字符串“0.1”，那么 BigDecimal(String) 会精确地转换这个值。如果你有一个 double 0.1，那么 BigDecimal(double) 会精确地转换这个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-26T14:20:26.510

```
double val = 0.1; // this is not 0.1, but an approximination as pointed out in other answers.
BigDecimal biggy = new BigDecimal(val); // this variable conatains the "same" value as val does, however it is not 0.1, but as pointed out in other answers: 0.100000000000000005551115123` 
```

因此，在此处列出的情况下，您可以完全控制源代码，您应该将*val*写为 'String val = "0.1"'

但是`BigDecimal(double val)`，如果您从文件中读取二进制双精度数，则构造函数很有用。显然，在几乎所有情况下，您都需要与“双打”完全相同的 BigDecimal

# php - 我可以根据虚拟字段对 cakePHP 选择框进行排序吗？

> ID：12218519
> 
> 赞同：0
> 
> 时间：2012-08-31T15:35:17.423
> 
> 标签：php, sql, cakephp, cakephp-2.0

现在我的选择框是从我的`Players`类中的一个虚拟字段创建的，用于我的模型的`add.ctp`视图中。`Statistics`选择框当前正在按 id 排序。我宁愿它按`Player.last_name`.

这是我的模型：

```
class Player extends AppModel {

    public $name = 'Player';
    public $virtualFields = array(
    'name' => "TRIM(CONCAT(Player.last_name, ', ', Player.first_name))"
    );
    public $displayField = 'name';

    var $hasMany = array(
         'Statistic' => array(
             'className'     => 'Statistic',
             'foreignKey'    => 'player_id',
             'dependent'=> true
         )
     );  

} 
```

这就是我在我`add.ctp`看来使用的：

```
 echo $this->Form->input('player_id'); 
```

这是当前输出（按 player_id 排序）：

```
<select name="data[Statistic][player_id]" id="StatisticPlayerId">
    <option value="335">Smith, Jordan</option>
    <option value="336">Marall, Jabari</option>
    <option value="337">Rusell, Mike</option>
    <option value="338">Johnson, Calvin</option>
    <option value="339">Thompson, Daniel</option>
    <option value="340">Dennis, Jacob</option>
</select> 
```

这是所需的输出（按姓氏排序）：

```
<select name="data[Statistic][player_id]" id="StatisticPlayerId">
    <option value="340">Dennis, Jacob</option>
    <option value="338">Johnson, Calvin</option>
    <option value="336">Marall, Jabari</option>
    <option value="337">Rusell, Mike</option>
    <option value="335">Smith, Jordan</option>
    <option value="339">Thompson, Daniel</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:47:38.967

是的，您可以按虚拟字段排序，但您的虚拟字段是`'name'`而不是`'last_name'`。尝试`$order = array('Player.name');`

# xml - xml 模式复杂类型

> ID：12218524
> 
> 赞同：1
> 
> 时间：2012-08-31T15:35:29.857
> 
> 标签：xml, schema, complextype

我正在尝试为类似于此的 xml 编写架构

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<store>
    <book>title1</book>
    <poster>some text</poster>
    <poster>some text</poster>
    <book>title1</book>
    <poster>some text</poster>
</store> 
```

我想知道 Schema 中是否有一个 complexType 允许“book”和“poster”标签出现最少 0 次和无限制的最大次数。我需要它们能够以随意的顺序出现，例如：书籍、海报、书籍海报、海报。

我虽然我不能简单地放一个序列，而是写一个这样的模式

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="store" type="TStore"/>

    <xs:complexType name="TStore">
        <xs:element name="book" type="xs:string" maxOccurs="unbounded"/>
        <xs:element name="poster" type="xs:string" maxOccurs="unbounded"/>
    </xs:complexType>
</xs:schema> 
```

但这只是无效的模式。如果书和海报标签以随意的顺序出现，那么“xs:all”会很好，但只出现一次。我该如何解决？编辑：带有 maxOccurs="unbounded" 的 xs:choice 可以很好地解决问题。

我也不明白为什么像这样的简单重复需要一个序列。我查阅了一些教程，但我找不到这个简单案例的参考。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<tags>
    <tag>text1</tag>
    <tag>text2</tag>
    <tag>text3</tag>
</tags>

<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="tags" type="complexType">
        <xs:sequence>
            <xs:element name="tag" type="xs:string" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:28:33.287

> 我也不明白为什么像这样的简单重复需要一个序列

这是你的实际问题吗？简单的答案是[规范](http://www.w3.org/TR/xmlschema-1/#declare-type)需要它。

更详细的答案是验证器想要一个明确的规范，说明它应该寻找什么。明确地告诉验证器它的`<xs:sequence>`内容代表了实例文档中预期的元素序列。就像`<xs:choice>`告诉验证器它应该只看到包含的元素之一。

# css - RSS 未在 Chrome 中显示

> ID：12218525
> 
> 赞同：0
> 
> 时间：2012-08-31T15:35:31.070
> 
> 标签：css, google-chrome, xslt, web, rss

我正在尝试使用我创建的 RSS 提要。它有两个链接的 css 和 xls 文档，一个 css 作为故障保护，以防 xsl 不起作用，另一个 css 用于 xls 格式化提要。网址在这里：

[http://rockthepatch.com/rss/current-events.xml](http://rockthepatch.com/rss/current-events.xml)

RSS 提要如下所示：

```
<?xml version="1.0" encoding="iso-8859-1"?>

<?xml-stylesheet type="text/css" href="http://www.rockthepatch.com/css/rss.css"?>
<?xml-stylesheet type="text/xsl" href="http://www.rockthepatch.com/rss/current-events.xsl"?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <language>en-us</language>
    <title>Upcoming Rock the Patch! Events</title>
    <link>http://www.rockthepatch.com/rss/current-events.xml</link>
    <description>See what's coming up below:</description>
    <atom:link href="http://www.rockThePatch.com/rss/current-events.xml" rel="self"     type="application/rss+xml" />

    <item>
      <title>Thursday's Open Mic at Ole Simms</title>
      <link>https://www.facebook.com/olesimrells</link>
      <description>Join Patches at open mic night at Terre Haute's Ole Simmerls Bar around 9 P.M. every Thursday.</description>
      <guid>http://www.indstate.edu/mpa/sarah/rockThePatch/rss/item0001</guid>
      <pubDate>Mon, 10 Oct 2011 09:15:00 EST</pubDate>
      <author>sklinefelter89@gmail.com (Patches)</author>
    </item>
    <item>
      <title>Fall Break is Here!</title>
      <link>http://www.indstate.edu/academicaffairs/calendar.htm</link>
      <description>School and work will not happen on Friday due to FALL BREAK!!!    </description>
      <guid>http://www.indstate.edu/mpa/sarah/rockThePatch/rss/item0002</guid>
      <pubDate>Fri, 07 Oct 2011 02:23:00 EST</pubDate>
      <author>sklinefelter89@gmail.com (Patches)</author>
    </item>
  </channel>
</rss> 
```

xsl 看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <html>
      <head>
          <link rel="stylesheet" href="http://www.rockthepatch.com/css/xsl.css"     type="text/css"/>
      </head>
      <body>
        <h2>Upcoming Rock the Patch! Events</h2>
        <table border="1px">
          <tr>
            <th>Name of Event</th>
            <th>Description</th>
            <th>Date Posted</th>
            <th>Author</th>
         </tr>
      <xsl:for-each select="rss/channel/item">
        <tr>
              <td>
            <xsl:value-of select="title"/>
          </td>
          <!-- <td>
            <a href="&lt;xsl:value-of select='link'/&gt;" title="Link">
              <xsl:value-of select="link"/>
            </a>
          </td> -->
          <td>
            <xsl:value-of select="description"/>
          </td>
          <td>
            <xsl:value-of select="pubDate"/>
          </td>
          <td>
                <a href="mailto:sklinefelter89@gmail.com" title="sklinefelter89@gmail.com">
                  <xsl:value-of select="author"/>
                </a>
              </td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

我不想下载文件，但每次我点击链接时，它都会下载而不是在任何浏览器中显示......有人能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:10:56.903

我从您的 URL 检查了 HTTP 标头。您发送的内容类型为`application/xhtml+xml`. 您应该将其更改为`application/rss+xml`. 那*应该*可以解决问题。

我将您的 xml 文件放在冷融合服务器上以重现问题。然后将扩展名更改为 cfm，添加`<cfcontent type = "application/rss+xml">`，它可以按您的意愿工作（无需下载）。

# c# - 未调用重写的 Winforms 树视图方法

> ID：12218527
> 
> 赞同：0
> 
> 时间：2012-08-31T15:35:38.120
> 
> 标签：c#, winforms, treeview

我正在尝试覆盖标准 TreeView 控件中的一个简单方法；

```
public class treeView1 : TreeView
{
    protected override void OnMouseUp(MouseEventArgs e)
    {
        MessageBox.Show("Are we getting here?");
        base.OnMouseUp(e);
    }
} 
```

看起来很简单，但我不明白为什么不调用它。我从 TreeView 控件调用继承，并进行基本覆盖。TreeView 被调用`treeView1`并响应其父类上的事件方法，而不是被覆盖的事件方法，为什么！？

另外我不想创建自定义用户控件，只想保持这个基本。谢谢。

**编辑**：我在 Form1.Designer.cs 中创建了树视图

```
private System.Windows.Forms.TreeView treeView1; 
```

& 用以下内容初始化；

```
// 
// treeView1
// 
this.treeView1.Location = new System.Drawing.Point(13, 316);
this.treeView1.Name = "treeView1";
this.treeView1.Size = new System.Drawing.Size(539, 474);
this.treeView1.TabIndex = 2;
this.treeView1.AfterSelect += new System.Windows.Forms.TreeViewEventHandler(this.treeView1_AfterSelect);
this.treeView1.MouseUp += new System.Windows.Forms.MouseEventHandler(this.treeView1_MouseUp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:41:28.080

使用此声明，您正在创建一个新的“类型”，它派生自 TreeView，可用于声明以自定义方式运行的实例。

你没有显示你的使用代码（**编辑**- 现在你有），但我敢打赌，显示在表单上的实际控件仍然被声明：

```
protected System.Windows.Forms.TreeView treeView1; 
```

如果确实如此，那么您没有使用派生类型；实际控件仍然是内置 TreeView 类的实例，而不是您的派生类。因此，在运行时，您的对象的方法不会被调用，因为您的对象甚至没有被使用。

相反，您必须将控件声明为新类的实例：

```
protected treeView1 treeView1; 
```

...然后还要确保它是这样实例化的：

```
private void InitializeComponents()
{
    ...
    treeView1 = new treeView1(); //not System.Windows.Forms.TreeView
    ...
} 
```

为了避免类型和该类型的实例之间的混淆，我将使用 UpperCamelCase 命名约定定义派生类：`TreeView1`.

**编辑：**感谢您展示用法。这绝对是我想的那样；您的变量 treeView1 是内置 System.Windows.Forms.TreeView 的一个实例，而不是您自定义的派生 treeView1 类。类名和类实例名有很大区别。正确的声明应该是：

```
private treeView1 treeView1; 
```

...我重申类名应该使用 UpperCamelCase 命名约定：

```
public class TreeView1 : TreeView
{
    protected override void OnMouseUp(MouseEventArgs e)
    {
        MessageBox.Show("Are we getting here?");
        base.OnMouseUp(e);
    }
}

...
//now when declaring it it'll be easier to tell the difference
private TreeView1 treeView1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:41:47.507

该事件应该正常工作。根据您的班级名称，我将假设您没有正确实施它。

首先，您需要创建一个新类并从树视图继承：

```
class MyTreeView : TreeView 
```

添加您的覆盖方法

```
class MyTreeView : TreeView
{
    protected override void OnMouseUp(MouseEventArgs e)
    {
        MessageBox.Show("Are we getting here?");
        base.OnMouseUp(e);
    }

} 
```

然后确保你编译你的项目一次。之后，具有您的类名称的新控件应位于工具箱中的“组件”下。只需将该控件拖放到您的表单中，然后从那时起使用该控件。

# asp.net - 用于测试的环境 URL

> ID：12218528
> 
> 赞同：2
> 
> 时间：2012-08-31T15:35:40.670
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

我确信这是一个普遍的要求。我已经编写了一个 ASP.NET 应用程序，但现在我有测试要求。基本上，该应用程序使用 Web 服务，因此目前这些都在代码中。我需要能够以尽可能简单的方式使用测试 URL 运行相同的应用程序。

我在想我可以将 URL 放在 web.config 中，并根据需要对变量进行注释/取消注释。

但是我在想这是如何在 Windows 应用程序中完成的。我知道某些应用程序，您在启动 env 时在命令行上指定（例如 prod、uat、prl），然后应用程序使用相关的 URL - 我认为这不是到处都有 if/else 语句吗？

if(UAT){URL=app.settings["UATURL"]}

任何有关如何在专业测试应用程序中完成此操作的信息都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:44:31.690

您可以为不同环境创建构建配置并使用 Web.Config 转换，如此处[所述](http://www.codeguru.com/csharp/article.php/c17407/ASPNET-Tutorial-WebConfig-Transformation.htm)

如果您有构建配置，还可以使用 C# Preprocessor Directives #if，例如：

```
#if DEBUG
    Console.WriteLine("Debug version");
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:44:44.367

将此代码添加到您的 head 标签：

```
<head>
<base href="http://www.yourwebsite.com/optionalInnerPath/" target="_blank" />
</head> 
```

在 href 属性中指定您的站点路径，您站点中的所有路径都将与此路径相关。

# qt - QT 布局、拆分器和小部件大小

> ID：12218530
> 
> 赞同：1
> 
> 时间：2012-08-31T15:35:59.490
> 
> 标签：qt, user-interface, layout

我有一个 MainWindow，其中两个不同的拆分器中有三个小部件。Splitter1 包含两个不同的小部件，Splitter2 包含 Splitter1 和黑色小部件，如图所示。

似乎 QT 巧妙地将每个小部件的宽度调整为外部包含对象的总宽度的 1/3：

[窗户现在的样子](http://www.anothermessageboard.com/misc/window.png)

我想要的是当程序启动时黑色小部件要小得多，看起来像这样：

[我希望窗口如何看待启动](http://www.anothermessageboard.com/misc/window2.png)

我在设计器中和程序上都玩过大小策略。我还尝试通过调用 blackWidget->resize(x,y) 在程序启动时以编程方式设置黑色小部件的大小，但这也不起作用。

如何使该小部件的默认大小像我想要的那样小？

# c# - 如何计算反向模量

> ID：12218534
> 
> 赞同：7
> 
> 时间：2012-08-31T15:36:14.757
> 
> 标签：c#, math, formula, reverse, modulus

现在我有一个公式：

```
int a = 53, x = 53, length = 62, result;
result = (a + x) % length; 
```

但是如果我已经知道结果，如何计算反向模数以获得最小的“x”

```
(53 + x) % 62 = 44
//how to get x 
```

我的意思是得到 x 的公式或逻辑是什么

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T15:50:36.003

```
private int ReverseModulus(int div, int a, int remainder)
{
   if(remainder >= div)
      throw new ArgumentException("Remainder cannot be greater than or equal to divisor");
   if(a < remainder)
      return remainder - a;
   return div + remainder - a;
} 
```

例如：

```
// (53 + x) % 62 = 44
var res = ReverseModulus(62,53,44); // res = 53

// (2 + x) % 8 = 3
var res = ReverseModulus(8,2,3); // res = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T15:39:13.683

它可能不是最初用于模数的 X，但如果你有

`(A + x) % B = C`

你可以做

`(B + C - A) % B = x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:43:10.887

`x = (44 - 53) % 62` 应该管用？

```
x = (44 - a) % length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:46:37.187

怎么样

```
IEnumerable<int> ReverseModulo(
    int numeratorPart, int divisor, int modulus)
{
   for(int i = (divisor + modulus) - numeratorPart; 
       i += divisor; 
       i <= int.MaxValue)
   {
       yield return i;
   }
} 
```

* * *

我现在知道这个答案是有缺陷的，因为它不是最小的，但`.First()`可以解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:19:43.080

谁需要电脑？如果 53 + x 等于 44，模 62，那么我们知道对于整数 k，

```
53 + x + 62*k = 44 
```

求解 x，我们看到

```
x = 44 - 53 - 62*k = -9 - 62*k 
```

显然，最小的解是 -9（当 k=0 时）和 53（当 k=1 时）。

# algorithm - 以小时、日、月和年显示相对时间

> ID：12218540
> 
> 赞同：7
> 
> 时间：2012-08-31T15:36:43.153
> 
> 标签：algorithm, time

我写了一个函数

```
toBeautyString(epoch) : String 
```

给定 a `epoch`，返回一个字符串，它将以小时和分钟显示从现在开始的相对时间

例如：

```
// epoch: 1346140800 -> Tue, 28 Aug 2012 05:00:00 GMT 
// and now: 1346313600 -> Thu, 30 Aug 2012 08:00:00 GMT
toBeautyString(1346140800) 
-> "2 days and 3 hours ago" 
```

我现在想将此功能扩展到月份和年份，以便能够打印：

```
2 years, 1 month, 3 days and 1 hour ago 
```

仅适用于没有任何外部库的时代。此功能的目的是为用户提供一种更好的方式来可视化过去的时间。

我发现了这个：[Calculate relative time in C#](https://stackoverflow.com/questions/11/calculating-relative-time)但粒度不够。

```
function toBeautyString(epochNow, epochNow){
    var secDiff = Math.abs(epochNow - epochNow);
    var milliInDay = 1000 * 60 * 60 * 24;
    var milliInHour = 1000 * 60 * 60;

    var nbDays = Math.round(secDiff/milliInDay);
    var nbHour = Math.round(secDiff/milliInHour);

    var relativeHour = (nbDays === 0) ? nbHour : nbHour-(nbDays*24);
    relativeHour %= 24;

    if(nbHour === 0){
        nbDays += 1;
    }else if(nbHour === (nbDays-1)*24){
        nbDays -= 1;
    }

    var dayS = (nbDays > 1) ? "days" : "day";
    var hourS = (relativeHour > 1) ? "hours" : "hour";

    var fullString = "";

    if(nbDays > 0){
        fullString += nbDays + " " + dayS;
        if(relativeHour > 0)
            fullString += " ";
    }

    if(relativeHour > 0){
        fullString += relativeHour + " " + hourS;
    }

    if(epochDate > epochNow){
        return "Will be in " + fullString;
    }else if ((epochDate === epochNow) 
            || (relativeHour === 0 && nbDays === 0)){
        return "Now";
    }else{
        return fullString + " ago";         
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:54:44.597

您可以使用.NET的[时间周期库中的](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)**DateDiff**类来显示相对时间：

```
// ----------------------------------------------------------------------
public void DateDiffSample( DateTime epoch )
{
  DateDiff dateDiff = new DateDiff( DateTime.Now, epoch );
  Console.WriteLine( "{0} ago", dateDiff.GetDescription( 4 ) );
  // > 1 Year 4 Months 12 Days 12 Hours ago
} // DateDiffSample 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:42:19.470

将其识别为两个不同的问题是有帮助的：1）将时间分割成不同单元的单个块；2）格式化块并将它们与您选择的逗号，连词等连接在一起。这样，您可以将文本格式化逻辑与时间计算逻辑分开。

```
#converts a time amount into a collection of time amounts of varying size.
#`increments` is a list that expresses the ratio of successive time units
#ex. If you want to split a time into days, hours, minutes, and seconds,
#increments should be [24,60,60]
#because there are 24 hours in a day, 60 minutes in an hour, etc.
#as an example, divideTime(100000, [24,60,60]) returns [1,3,46,40], 
#which is equivalent to 1 day, 3 hours, 46 minutes, 40 seconds
def divideTime(amount, increments):
    #base case: there's no increments, so no conversion is necessary
    if len(increments) == 0:
        return [amount]
    #in all other cases, we slice a bit off of `amount`,
    #give it to the smallest increment,
    #convert the rest of `amount` into the next largest unit, 
    #and solve the rest with a recursive call.
    else:
        conversionRate = increments[-1]
        smallestIncrement = amount % conversionRate
        rest = divideTime(amount / conversionRate, increments[:-1])
        return rest + [smallestIncrement]

def beautifulTime(amount):
    names      = ["year", "month", "day", "hour", "minute", "second"]
    increments = [12,     30,      24,    60,     60]
    ret = []
    times = divideTime(amount, increments)
    for i in range(len(names)):
        time = times[i]
        name = names[i]
        #don't display the unit if the time is zero
        #e.g. we prefer "1 year 1 second" to 
        #"1 year 0 months 0 days 0 hours 0 minutes 1 second"
        if time == 0:
            continue
        #pluralize name if appropriate
        if time != 1:
            name = name + "s"
        ret.append(str(time) + " " + name)
    #there's only one unit worth mentioning, so just return it
    if len(ret) == 1:
        return ret[0]
    #when there are two units, we don't need a comma
    if len(ret) == 2:
        return "{0} and {1}".format(ret[0], ret[1])
    #for all other cases, we want a comma and an "and" before the last unit
    ret[-1] = "and " + ret[-1]
    return ", ".join(ret)

print beautifulTime(100000000)
#output: 3 years, 2 months, 17 days, 9 hours, 46 minutes, and 40 seconds 
```

这个解决方案对于现实生活中的年份有些不准确，因为它假设一年由 12 个月组成，每 30 天长。这是一个必要的抽象，否则您必须考虑不同的月份长度、闰日和夏令时等。使用这种方法，您每年将损失大约 3.75 天，这还不错如果您仅使用它来可视化时间跨度的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T17:43:56.883

正如其他答案中详尽讨论的那样，由于月份长度不同，您的代码无法轻松扩展。所以一个人根本不能假设这个月是 30 天。

为了获得人类可读的差异，您必须从人类可读的日期中减去。

我会这样做（JavaScript，以匹配问题）：

```
function toBeautyString(then) {

    var nowdate = new Date();
    var thendate = new Date(then * 1000);

    //finding the human-readable components of the date.

    var y = nowdate.getFullYear() - thendate.getFullYear();
    var m = nowdate.getMonth() - thendate.getMonth();
    var d = nowdate.getDate() - thendate.getDate();
    var h = nowdate.getHours() - thendate.getHours();
    var mm = nowdate.getMinutes() - thendate.getMinutes();
    var s = nowdate.getSeconds() - thendate.getSeconds();

    //back to second grade math, now we must now 'borrow'.

    if(s < 0) {
            s += 60;
            mm--;
    }
    if(mm < 0) {
            mm += 60;
            h--;
    }
    if(h < 0) {
            h += 24;
            d--;
    }
    if(d < 0) {

            //here's where we take into account variable month lengths.

            var a = thendate.getMonth();
            var b;
            if(a <= 6) {
                    if(a == 1) b = 28;
                    else if(a % 2 == 0) b = 31;
                    else b = 30;
            }
            else if(b % 2 == 0) b = 30;
            else b = 31;

            d += b;
            m--;
    }
    if(m < 0) {
            m += 12;
            y--;
    }

    //return "y years, m months, d days, h hours, mm minutes and s seconds ago."
} 
```

该代码通过从人类可读的日期中减去（使用内置的 javascript 命令获得）来工作。剩下的唯一工作就是确保任何超额借款都能顺利进行。这很容易，除非您从月份中借用，因为月份的长度是可变的。

假设您从 4 月 12 日减去 2 月 25 日。

在借款发生之前，`m = 2`并且`d = -13`。`m`现在，当您从,借款时`m = 1`，但您需要确保`d`增加 28，因为您在 2 月份借款。最终结果是 1 个月，15 天前。

如果您从 9 月 12 日减去 7 月 25 日，结果将是 1 个月，18 天前。

上面的代码唯一没有提供的是闰年。这很容易扩展：如果您在 2 月份借款，您只需要考虑年份并根据需要进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T22:45:45.167

两个功能：一个计算差异，另一个显示差异（受凯文回答的启发）。适用于我的所有测试，考虑到月份的持续时间，易于翻译，并且还可以节省夏令时。

```
/**
 * Calculates difference from 'now' to a timestamp, using pretty units
 * (years, months, days, hours, minutes and seconds). 
 * Timestamps in ms, second argument is optional (assumes "now").
 */
function abstractDifference(thenTimestamp, nowTimestamp) {
    var now = nowTimestamp ? new Date(nowTimestamp) : new Date();
    var then = new Date(thenTimestamp);
    var nowTimestamp = Math.round(now.getTime());
    console.log(nowTimestamp, thenTimestamp);

    // -- part 1, in which we figure out the difference in days

    var deltaSeconds = Math.round((nowTimestamp - thenTimestamp)/1000);

    // adjust offset for daylight savings time: 2012/01/14 to 2012/04/14 
    // is '3 months', not 2 months 23 hours (for most earth-bound humans)
    var offsetNow = now.getTimezoneOffset();
    var offsetThen = then.getTimezoneOffset();
    deltaSeconds -= (offsetNow - offsetThen) * 60; 

    // positive integers are easier to work with; and months are sensiteive to +/-
    var inTheFuture = false;
    if (deltaSeconds < 0) {
        inTheFuture = true;
        deltaSeconds = -deltaSeconds;
    }

    var seconds = deltaSeconds % 60;
    var deltaMinutes = Math.floor(deltaSeconds / 60);
    var minutes = deltaMinutes % 60;
    var deltaHours = Math.floor(deltaMinutes / 60); 
    var hours = deltaHours % 24;
    var deltaDays = Math.floor(deltaHours / 24);    
    console.log("delta days: ", deltaDays);           

    // -- part 2, in which months figure prominently

    function daysInMonth(year, month) {
        // excess days automagically wrapped around; see details at
        // http://www.ecma-international.org/publications/standards/Ecma-262.htm
        return 32 - new Date(year, month, 32).getDate();
    }
    var months = 0;
    var currentMonth = now.getMonth();
    var currentYear = now.getFullYear();    
    if ( ! inTheFuture) {
        // 1 month ago means "same day-of-month, last month"
        // it is the length of *last* month that is relevant
        currentMonth --;  
        while (true) {
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            var toSubstract = daysInMonth(currentYear, currentMonth);
            if (deltaDays >= toSubstract) {
                deltaDays -= toSubstract;
                months ++;
                currentMonth --;
            } else {
                break;
            }
        }
    } else {
        // in 1 month means "same day-of-month, next month"
        // it is the length of *this* month that is relevant
        while (true) {
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            var toSubstract = daysInMonth(currentYear, currentMonth);
            if (deltaDays >= toSubstract) {
                deltaDays -= toSubstract;
                months ++;
                currentMonth ++;
            } else {
                break;
            }
        }   
    }

    var years = Math.floor(months / 12);
    var months = months % 12;

    return {future: inTheFuture, 
        years: years, months: months, days: deltaDays, 
        hours: hours, minutes: minutes, seconds: seconds};
}

/**
 * Returns something like "1 year, 4 days and 1 second ago", or 
 * "in 1 month, 3 hours, 45 minutes and 59 seconds".
 * Second argument is optional.
 */
function prettyDifference(thenTimestamp, nowTimestamp) {
    var o = abstractDifference(thenTimestamp, nowTimestamp);
    var parts = [];
    function pushPart(property, singular, plural) {
        var value = o[property];
        if (value) parts.push("" + value + " " + (value==1?singular:plural));
    }
    // to internationalize, change things here
    var lastSeparator = " and ";
    var futurePrefix = "in ";
    var pastSuffix = " ago";
    var nameOfNow = "now";
    pushPart("years", "year", "years");
    pushPart("months", "month", "months");
    pushPart("days", "day", "days");
    pushPart("hours", "hour", "hours");
    pushPart("minutes", "minute", "minutes");
    pushPart("seconds", "second", "seconds");

    if (parts.length == 0) {
        return nameOfNow;
    }

    var beforeLast = parts.slice(0, -1).join(", ");
    var pendingRelative = parts.length > 1 ? 
        [beforeLast , parts.slice(-1) ].join(lastSeparator) :
        parts[0];
    return o.future ? 
        futurePrefix + pendingRelative : pendingRelative + pastSuffix;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-04T12:12:55.963

**不可能有这样的算法！**

一天的小数部分（小时、分钟、秒），甚至是天本身，都没有问题。问题是“一个月”的长度在 28 到 31 天之间变化。

我给你举个例子：

让我们说今天是`28 Feb 2013`，你想计算`toBeautyString(28 Jan 2013)`：

```
today: 28 Feb 2013
toBeautyString(28 Jan 2013)
expected answer: 1 month ago 
```

嗯，那真的没问题。同一天数，同一年，只是月份确实发生了变化。

现在让我们`toBeautyString(27 Jan 2013)`在同一天计算：

```
today: 28 Feb 2013
toBeautyString(27 Jan 2013)
expected answer: 1 month and 1 day ago 
```

这也很简单，不是吗？我们想要前一天的值，输出显示持续时间长了一天。

现在让我们去睡觉，第二天（2013 年 3 月 1 日）继续工作。
尝试这个：

```
today: 1 Mar 2013
toBeautyString(1 Feb 2013)
expected answer: 1 month ago 
```

嗯，就这么简单！与您的第一个计算相同的逻辑。只有月份确实改变了 1，因此持续时间只能是 1 个月。
因此，让我们计算前一天的值：

```
today: 1 Mar 2013
toBeautyString(31 Jan 2013)
expected answer: 1 month and 1 day ago 
```

再次重申：前一天的结果必须是 1 天以上的持续时间。
让我们尝试将持续时间延长 1 天：

```
today: 1 Mar 2013
toBeautyString(30 Jan 2013)
expected answer: 1 month and 2 days ago 
```

更长：

```
today: 1 Mar 2013
toBeautyString(29 Jan 2013)
expected answer: 1 month and 3 days ago 
```

最后：

```
today: 1 Mar 2013
toBeautyString(28 Jan 2013)
expected answer: 1 month and 4 days ago 
```

记住这一点！

* * *

不，让我们重复我们昨天做的第一个计算。昨天我们做了计算`toBeautyString(28 Jan 2013)`，结果是`1 month ago`。今天是一天后。如果我们`toBeautyString(28 Jan 2013)`今天计算，结果应该会显示多一天的持续时间：

```
today: 1 Mar 2013
toBeautyString(28 Jan 2013)
expected answer 1 month and 1 days ago 
```

将此与之前的计算进行比较。我们在 2013 年 3 月 1 日进行了两次计算。在这两种情况下，我们的计算结果都是一样的：`toBeautyString(28 Jan 2013)`. 但我们期待两种不同的结果。令人惊讶的是，这两个预期都是正确的。

因此，为了提供真正符合我们期望的结果，算法应该能够读懂我们的想法。但这对于算法来说是不可能的，因此不可能有一种算法可以完美地满足您的期望。

# node.js - Nodejs process.stdin.resume() 在 Cygwin 中不起作用

> ID：12218542
> 
> 赞同：2
> 
> 时间：2012-08-31T15:36:46.283
> 
> 标签：node.js, terminal, cygwin

尝试制作 CLI 类型的程序 - 等待用户输入。在 Cygwin 中，脚本只是退出。就在脚本 process.stdin.resume() 中

似乎可以在 Linux VM 上工作。也适用于 Windows 命令行。

我假设关于 Cygwin 的“终端”内容..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T23:56:29.290

症状是 Cygwin`process.stdin.on('data', cb);`并`process.stdin.on('end', cb);`没有被调用。

***我找到了解决方法***

## 版本

```
> ver
Microsoft Windows [Version 6.1.7601]

$ uname -a
CYGWIN_NT-6.1 localhost 1.7.28(0.271/5/3) 2014-02-04 16:01 x86_64 Cygwin

$ node --version
v0.8.14 
```

也许它适用于较新的节点，我不知道，我需要使用这个版本。

## c:\test\myecho.js

```
console.error("Starting up");
process.stdin.resume();
process.stdin.setEncoding('utf8');
console.error("Waiting for data");

var inputContents = ""; 
process.stdin.on('data', function (chunk) {
    process.stderr.write(".");
    inputContents += chunk.toString();
});

process.stdin.on('end', function () {
    console.error("\nGot the full thing :)");
    console.log(inputContents);
}); 
```

## 让我们在 Windows 上试试吧

```
c:\test>echo hello | node myecho
Starting up
Waiting for data
.
Got
hello
c:\test>_ 
```

## 让我们在 Cygwin 中尝试一下

```
/cygdrive/c/test$ echo hello | node myecho
Starting up
Waiting for data
/cygdrive/c/test$ _ 
```

## 让我们“在 Cygwin 中”再试一次

```
/cygdrive/c/test$ cmd /c 'echo hello | node myecho'
Starting up
Waiting for data
.
Got the full thing :)
hello
/cygdrive/c/test$ _ 
```

## 好的，现在让它变得花哨！

```
/cygdrive/c/test$ cmd /c 'echo hello | node myecho 2>NUL'
hello
/cygdrive/c/test$ cmd /c 'echo hello | node myecho' 2>/dev/null
hello
/cygdrive/c/test$ _ 
```

太糟糕了，输入不能来自 Cygwin 文件描述符，但作为一种解决方法，可以将其写入文件，然后从那里读取它`type`。

## 可移植性

如果有人想编写一个可移植的脚本来调用需要标准输入的节点应用程序：

```
#!/bin/bash
SCRIPT_DIR='../path/to/scripts' # absolute paths would need a little more playing
if [[ `uname -s` == CYGWIN* ]]; then
  cmd /c "type file1 | node ${SCRIPT_DIR//\//\\}\program.js ${BASHVAR}" | grep stuff >file2
else
           cat file1 | node ${SCRIPT_DIR}/program.js        ${BASHVAR}  | grep stuff >file2
fi 
```

# asp.net - 要排除的 Nuget 和源代码控制文件？

> ID：12218543
> 
> 赞同：6
> 
> 时间：2012-08-31T15:36:46.490
> 
> 标签：asp.net, nuget, nuget-package

我知道我应该更多地使用 nuget，但此时我并不完全理解细微差别，所以我仍然倾向于获取源代码并构建项目，然后引用该项目，或者我创建自己的“dlls”文件夹并手动复制dll在里面。

作为我学习过程的一部分，我试图了解在使用 nuget 时什么是关键的，什么不是。例如，我已经完成了 install-package restsharp，现在当我检查源代码控制时，我得到了类似“packages/RestSharp.103.4/lib/net4/RestSharp.xml”的文件。我假设 nuget 将帮助我进行升级等，它需要具有某些元数据类型文件。

我的问题是：我应该忽略“包”目录中的任何或所有文件吗？如果是这样，是什么以及为什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:46:10.900

有两种工作流程可以处理这种情况。最初的工作流程是提交包目录中的所有文件（您不需要忽略任何文件），以便您团队中的其他开发人员拥有构建项目的包。

自 NuGet 1.6 以来可用的较新工作流是为解决方案启用 NuGet 的包还原功能。这将导致在构建项目时自动下载任何丢失的包文件，但现在您不再需要将大型二进制文件提交到版本控制。从 NuGet 2.0 开始，现在[需要](http://blog.nuget.org/20120518/package-restore-and-consent.html)让团队中的每个开发人员在 Visual Studio 选项中启用 NuGet 的包还原权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:40:04.887

在 Visual Studio 中，在 Project 下，有一个名为`Enable NuGet Package Restore`. 当您打开一个项目并且您正在使用**Web 应用程序项目**（恢复不适用于网站项目）时，此功能可用。选择它并启用包还原。然后，您无需将 Packages 目录提交到任何地方的源代码管理。

NuGet 的文档有更多关于[包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)的信息。

如果您想手动模拟包还原，则需要解析`packages.config`文件然后执行[NuGet 命令行引导](https://nuget.codeplex.com/releases/view/58939)程序( `nuget.exe`) 来安装这些包。幸运的是，引导程序将 packages.config 作为参数。使用以下步骤应该可以恢复您的包：

1.  `packages`从解决方案所在的目录创建一个文件夹。
2.  从包目录从命令行运行以下命令：

    nuget.exe 安装 [packages.config 的路径]

这一切都可以从一个批处理文件中完成，或者您想自动化它。

# node.js - Mongodb查询多个参数

> ID：12218552
> 
> 赞同：4
> 
> 时间：2012-08-31T15:37:16.897
> 
> 标签：node.js, mongodb

我有这个收藏

```
{
    "name" : "montalto",
    "users" : [
        {
            "username" : "ciccio",
            "email" : "aaaaaaaa",
            "password" : "aaaaaaaa",
            "money" : 0
        }
    ],
    "numers" : "8",
    "_id" : ObjectId("5040d3fded299bf03a000002")
} 
```

如果我想搜索一个名为 montalto 的集合**和一个名为****ciccio**的用户，我将使用以下查询：

 **```
db.coll.find({name:'montalto', users:{username:'ciccio'}}).count() 
```

但它不起作用。我哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T15:45:43.897

您必须使用[点符号](http://docs.mongodb.org/manual/core/document/#document-dot-notation)来匹配嵌入数组对象的内部：

```
db.coll.find({name: 'montalto', 'users.username': 'ciccio'}).count() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T16:35:51.037

澄清一个**集合**是一组**文件**。因此，您在此问题中的术语略有偏差。

要访问嵌入的文档或对象，您只需像在传统 javascript 中一样使用点表示法。

```
db.coll.find({name: 'montalto', 'users.username': 'ciccio'}) 
```

您当然可以`.count()`在最后添加。**

# javascript - 回调函数值

> ID：12218558
> 
> 赞同：-2
> 
> 时间：2012-08-31T15:37:37.593
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-framework

> **可能重复：**
> [函数触发早期](https://stackoverflow.com/questions/12201816/function-triggering-early)
> [调用函数值](https://stackoverflow.com/questions/12202188/calling-a-functions-value)

我需要一些帮助。

对于我的一生，我无法弄清楚这一点。我已经把我的头缠在它周围，但无济于事。

我想设置两个功能。

1.  功能：`select_date()`与用户交互以从 jQuery 日期选择器中选择一个日期。如果对话框关闭，则返回 null。

2.  然后是第二个功能：`test()`检查日期是否为`picked/selected`.

这是我的困境，当函数`test()`被执行时，会弹出一个警告框并说`"undefined"`这意味着，我永远无法选择一个日期，而且它总是`"undefined"`

我看不出我在这里做错了什么，一切对我来说似乎都是合乎逻辑的。

```
<!DOCTYPE html>
<html>
<head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js"></script>

    <script type="text/javascript">

    function select_date() {
    var sdate

        $('#dd').dialog({
            autoOpen: true,
            modal: true,
            overlay: {
                opacity: 0.5,
                background: 'black'
            },
            title: "title",
            height: 265,
            width: 235,
            draggable: false,
            resizable: false
        });
        $('#d1').datepicker({
            onSelect: function () {
                $("#dd").dialog("close");
            }
        });
        return sdate
    }

    function test() {
    var x = select_date()

    alert(x)

    }

    </script>
    <style type="text/css">
    #d1 {font-size:64%;}
    </style>
</head>
<body>
<div id="dd">
<div id="d1">
</div>
</div>
<a href="javascript:test()">test</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:43:05.480

这就是 JavaScript 的工作方式……`select_date()`因为`.dialog()`和`.datepicker()`是异步方法，所以立即返回。`return sdate`在任何事情发生之前被调用。正确的方法是使用回调方法`onSelect()`

```
function select_date(callback) {
  $('#dd').dialog({
        autoOpen: true,
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        title: "title",
        height: 265,
        width: 235,
        draggable: false,
        resizable: false
    });
    $('#d1').datepicker({
        onSelect: function () {
            $("#dd").dialog("close");
            callback($(this).datepicker('getDate'));
        }
    });
}

function test() {
  select_date(function(selected_date) { alert(selected_date); });
} 
```

唯一的问题是，如果没有选择日期并且对话框关闭，则不会调用回调。`callback`您可以在对话框上为此添加一个事件侦听器，并使用一个值调用它`null/undefined`，但这取决于您。

# java - struts2不在jsp页面上显示集合

> ID：12218560
> 
> 赞同：1
> 
> 时间：2012-08-31T15:37:40.453
> 
> 标签：java, jsp, struts2, tags

我开始学习struts2，不知道很多，请各位老师帮帮我。我有这样的动作课

```
public class LoginAction extends ActionSupport {

    private String login;
    private String password;
    private Collection<News> newses = new ArrayList<News>();

    public String execute() {
        UserDao userDao = new UserDao();
        if(userDao.checkUser(getLogin(),getPassword())){
            NewsDao newDao = new NewsDao();
            setNewses(newDao.getAllNews());
            return SUCCESS;
        }
        return ERROR;

    }

    public String getLogin() {
        return login;
    }

    public void setLogin(String login) {
        this.login = login;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Collection<News> getNewses() {
        NewsDao newDao = new NewsDao();
        setNewses(newDao.getAllNews());
        return newses;
    }

    public void setNewses(Collection<News> newses) {
        this.newses = newses;
    }
} 
```

当执行方法返回成功时，它重定向到`news.jsp`

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
    <title><s:text name="news.page.title"/></title>
</head>
<body>
      <s:text name="news.page.main.label"/>
      <s:iterator status="stat" value="newses">
          <s:property value="title"/>
          <s:property value="body"/>
          <s:property value="user.name"/>
      </s:iterator>

      <s:include value="../jspf/footer.jsp" />
</body>
</html> 
```

但结果它显示这样的东西 ![在此处输入图像描述](../Images/866b1b80a6fc852a089a76d9e8f33bfe.png)

并且不显示我的收藏..（带有页脚按钮的文本字段和文本区域）帮助我，请告诉我我做错了什么谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:44:32.343

您的 getter/setter 应与属性名称同步。

例子：

```
getNewses()
{
...
} 
```

不是

```
 getNews(){ ...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:58:18.313

（不是答案。）

三个评论：

1.  您的新闻项目 getter*还*实例化 a `NewsDao`，您应该决定是在 getter 中还是在操作的`execute`方法中执行此操作。
2.  您将代码绑定到特定的 DAO 实现。如果您只是在玩玩，那很好，但是为了使事情保持可测试性并与实现隔离，您最好允许注入 DAO 实现。
3.  该`execute`方法的结构不便于理解：失败更快。

```
public String execute() {
    if (!userDao.validUser(login, password)) {
        return ERROR;
    }

    setNews(newDao.getAllNews());
    return SUCCESS;
} 
```

# linux - 使用英特尔 PEBS 的 DTLB 未命中地址跟踪

> ID：12218566
> 
> 赞同：2
> 
> 时间：2012-08-31T15:38:06.070
> 
> 标签：linux, performancecounter, perfmon, tlb, perf

我正在尝试通过使用硬件性能计数器生成 D-TLB 未命中的地址跟踪。英特尔处理器具有“基于事件的精确采样”（PEBS），可以在每次采样时转储硬件寄存器内容。我需要使用这个寄存器转储来创建导致 D-TLB 未命中的地址。但是，我不确定如何从寄存器转储中生成访问地址。

有人有做类似事情的经验，可以给我一些指示吗？

谢谢

阿尔卡

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-22T17:40:31.273

性能计数器基本上是计数器，您需要它们不提供的额外信息。您需要的是一个能够捕获总线事务的跟踪器，这可能有点难以实现，并且仍然不是完美的，因为您只会捕获也错过了 STLB（第二级 TLB）的未命中，另外 - 他们的页面walk 阶段没有命中缓存，因此您可以有足够的可见性来重建虚拟地址。在我看来，您最好的选择是简单地通过二进制检测工具（例如 PIN 或 szim）运行您的代码，编写一个钩子来捕获所有内存访问 - 并通过模拟 DTLB 的回调运行它们（您可以使用几个uarch模拟器或者自己写一些简单的代码）。您只需要获取系统的基本 DTLB 详细信息（大小、关联性等）。这应该让您对真实系统上的 DTLB 丢失地址有一个相对接近的了解。当然，如果您使用混合大小的页面或虚拟化（上帝保佑..），这里可能会出现复杂情况

# git - 如何在 git 中找到包含（不涉及）文件的所有提交？

> ID：12218568
> 
> 赞同：3
> 
> 时间：2012-08-31T15:38:08.323
> 
> 标签：git

在 git 中，我如何从分支头返回并找到包含（不一定涉及）特定文件的每个提交？“touches”版本可以这样写：

```
git log mybranch -- filename | grep "^commit" | awk '{print $2}' 
```

但是，对于我正在尝试做的事情，即构建包含特定文件 (a `pom.xml`) 的所有修订，这还不够。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T08:54:29.200

作为另一种方法，这似乎不需要检查不同的修订版就可以工作：

```
for REV in `git rev-list <mybranch>`
do
  HASPOM=`git ls-tree --name-only -r $REV | grep '<filename>'`
  echo "$REV $HASPOM" | awk 'NF==2{print $1}{}'
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:20:55.160

这是一个快速而肮脏的 bash 解决方案。它获取从任何分支可访问的所有提交 ID 的列表，遍历它们，检查每个提交。如果在签出提交后文件存在，它会打印出该提交 ID。

**这将通过`git checkout -f`**. 在运行之前存储您的更改。

```
for x in `git log --all | grep -o "[a-z0-9]\{40\}"`
do
  git checkout -f $x &> /dev/null
  if [ -e "config/pom.xml" ]
  then
    echo $x
  fi  
done 
```

# c++ - 在 .Net C++ 中将 EventHandler 转换为 MouseEventHandler？

> ID：12218569
> 
> 赞同：0
> 
> 时间：2012-08-31T15:38:13.927
> 
> 标签：c++, .net, visual-c++, casting, event-handling

我在尝试将 EventHandler 转换为 MouseEventHandler 时遇到了一些问题。

```
System::EventHandler^ method = gcnew System::EventHandler(this, &MainForm::Exit_Action);
if (e->trigger == "onmousedown") {
     c->MouseDown += (MouseEventHandler^)(method); // error 
```

（这是指 System::Windows::Forms::Form 类）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:43:00.660

好吧，`EventHandler`不是`MouseEventHandler`（他们甚至不在同一个继承层次结构中），所以这不应该工作。

为什么不在里面创建一个新的（嗯， *gcnew*）？很便宜：）`MouseEventHandler``if`

（在 C# 中，您通常使用类似的东西创建一个隐式 lambda，`c.MouseDown += Exit_Action;`但我不知道在 C++/CLI 中是否有类似的语法。）

# mysql - 通过贝宝支付用户佣金，并更新网站数据库

> ID：12218577
> 
> 赞同：1
> 
> 时间：2012-08-31T15:38:55.833
> 
> 标签：mysql, paypal, payment

我有一个网站，用户为其他用户提供的服务付费，并在周末向用户支付他们服务销售的价值减去我们的佣金。

目前，当我们要向用户付款时，我们会进行人工付款，登录贝宝并在付款后手动更新我们的数据库。我们遇到的问题是我们的交易每周超过一千，因此手动完成非常麻烦。

我们想出了一个小系统，通过使用来自 paypal 的 Adaptive Payments API，我们可以执行支付并一键更新我们的数据库。

我的问题如下 - 我们害怕发生一些情况：

1.  我们向用户付款，我们的 SQL 数据库出现故障，因此我们不更新我们的销售记录。因此，系统会在 cron 执行时再次向用户付款。

2.  我们可以做相反的事情，先更新我们的 SQL 数据库，如果通过，我们执行 paypal 付款。这样做的问题是，如果 PayPal 方面出现问题，我们最终根本不会向用户付款，因为我们的数据库已更新，就好像我们已经向他们付款一样。

我们的解决方案：

*   我们更新我们的数据库并跟踪所有更改的记录 -> 继续调用 PayPal API -> 如果 PayPal 调用失败，我们将更改恢复为更新的记录；如果调用成功，我们保持原样。

*   我们执行 PayPal 付款，并更新数据库。我们将来自 API 的 ACK 消息存储在数据库中，当我们检查我们的记录以支付用户时，我们会验证 ACK 字段是否成功。

我们的解决方案让我们非常疲倦，也许我们陷入了某种思维定势。我们担心的是 SQL 将失败或 PayPal api 调用将无法通过。是否有人对我们的支付系统有任何建议或完全不同的实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:47:25.290

好吧，基本上这是交易系统的东西。

看看这里：[http ://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

1.  开始交易
2.  更新数据库中的用户条目
3.  如果更新成功发送付款到贝宝
4.  如果成功，则向数据库发送提交。

这将是最省钱的方法，如果提交失败，只需在与数据库无关的地方记录该错误，然后手动处理（用户友好）

顺便说一句，当然，在财务上对您来说更安全，首先更新付款已发送的用户数据，然后顺利将付款发送到贝宝。

如果您在付款出错后无法回滚用户数据，这不会对您造成损害，但用户肯定会告诉您他没有收到付款......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:48:31.757

您需要的是[两阶段提交的变体](http://en.wikipedia.org/wiki/Two-phase_commit_protocol)

创建付款流程的状态转换图，其中每个状态代表持久存储（在本例中为您的 MySQL 数据库）的稳定状态，并确保所有路径都可以导致只处理一次付款。

首先，您记录您正在尝试付款。

如果付款成功，您将记录下来。

如果您从系统故障中恢复过来，并且您记录了您正在尝试付款但没有记录您已付款，您必须与贝宝核实您是否已付款。

# python - 将文档字符串设置为 def 中的表达式

> ID：12218578
> 
> 赞同：4
> 
> 时间：2012-08-31T15:39:03.770
> 
> 标签：python, docstring

我想`func_doc`在**.** `def`

```
def f():
    '''My function help''' #Set the docstring

def g():
    "My function " + "help" # An expression, so not read as a docstring
    # can I put something here to set the docstring as an expression?
g.func_doc # is None
g.func_doc = "My function " + "help" # This works 
```

这可能吗？

*（我可以考虑这样做的两个原因：从模块导入函数（并且您也想导入文档字符串）和使用[lexer](https://stackoverflow.com/questions/12217816/regex-with-variable-data-in-it-ply-lex)。）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:46:47.673

你不能这样做，因为只有字符串文字被识别为文档字符串。但是您可以使用装饰器来设置或修改函数的文档字符串。（您也可以`__doc__`在可执行代码中显式修改，但装饰器更简洁，因为它在逻辑上是声明的一部分）。

这可能很有用，例如，如果您有几个函数应该包含与其文档字符串（部分）相同的文本。这是一个小装饰器，它将其参数（文字或变量）附加到函数声明的文档字符串中。

```
def docstring(docstr, sep="\n"):
    """
    Decorator: Append to a function's docstring.
    """
    def _decorator(func):
        if func.__doc__ == None:
            func.__doc__ = docstr
        else:
            func.__doc__ = sep.join([func.__doc__, docstr])
        return func
    return _decorator 
```

它可以这样使用：

```
@docstring("copyright by nobody")
def testme():
    "This function does nothing"
    pass 
```

或者您可以直接执行它，以修改现有功能（可能从另一个模块导入）：

```
from re import sub
docstring("Copyright unknown")(sub) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:44:17.547

你不能。规则是：将[字符串文字](http://docs.python.org/reference/compound_stmts.html?highlight=docstring#id7)作为第一个语句作为文档字符串。如果它是一个表达式，则它不是字符串文字，因此被忽略。

*如果你真的需要这个，*你也可以在之后显式地分配给 docstring 属性。我不明白你*为什么需要它。*你的理由对我来说似乎很可疑：

*   导入一个函数（或其他任何东西，真的）给你相同的对象，具有相同的文档字符串。*包装*一个函数是另一回事，但对于我们所拥有的[`functools.wraps`](http://docs.python.org/library/functools.html#functools.wraps).
*   将正则表达式的一部分分解为一个单独的变量并不会使任何内容本身更具可读性。掌握令牌定义对于理解操作代码至关重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:45:41.470

不，您不能从函数体内设置函数的文档字符串，除非在函数外部或函数内部（需要先调用函数）执行代码，否则无法设置。

python 通常设置文档字符串的方式是获取函数套件的第一行（在该`def`行下缩进的所有内容），*如果那是字符串文字*，它将从套件中删除并使其成为文档字符串。然后 Python 将套件的其余部分编译成函数代码对象，并`function()`通过传入编译的代码对象和文档字符串（以及其他）来创建一个新对象。

如果您使用恰好产生字符串的表达式，那么该“技巧”不起作用；python 将忽略该表达式，将其作为函数套件的一部分进行编译。因为函数套件本身是编译的而*不是执行*的，所以您不能“伸出”并设置要在编译期间在函数对象上使用的文档字符串。

动态设置函数文档字符串的*唯一*方法是直接引用函数对象并设置它的`__doc__`或`func_doc`变量（两者都是别名）。当然，这可以在函数套件中完成，但这毫无意义，除非你这样做，否则文档字符串将是错误的。

请注意，当您从模块中导入函数时，您也已经获得了文档字符串：

```
>>> import itertools
>>> print itertools.groupby.__doc__
groupby(iterable[, keyfunc]) -> create an iterator which returns
(key, sub-iterator) grouped by each value of key(value). 
```

无需单独导入文档字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:09:18.490

您可以`__doc__`在运行时修改函数的属性：

```
>>> def what():
...    """docstring"""
...    what.__doc__ += " x"
...    print what.__doc__
... 
>>> what()
docstring x
>>> what()
docstring x x
>>> what()
docstring x x x
>>> what()
docstring x x x x 
```

# r - 过滤季节性时间序列异常值

> ID：12218584
> 
> 赞同：3
> 
> 时间：2012-08-31T15:39:14.447
> 
> 标签：r, filtering, time-series, outliers

我有一些高度季节性的天气相关数据，我想做的是识别一些“异常值”并将这些异常值更改为合理的值（我不想删除它们）。

我正在使用**pracma包中的****hampel**过滤器来识别和纠正这些异常值，但问题是一些季节性峰值被降低了太多。我猜这个函数没有考虑季节性。下图显示了这一点（24 个月的窗口），红线是过滤后的数据。

 **有没有办法纠正这个问题？换句话说，取“峰值”并在季节之间平均它们？谢谢！ ![在此处输入图像描述](../Images/657d8136cb8ba5c25e8645b1f90ebc11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T19:00:53.470

正如@Michael 所建议的那样，这里有一些删除季节性组件的代码，对剩余的系列应用异常值过滤器，并再次添加季节性组件（使用风险自负）：

```
filter.outliers = function(serie.orig)
{
require(forecast)
require(pracma)

## get a stl decomposition object
stl.decomp = stl(serie.orig, s.window = 'periodic', t.window = 13, robust = T)

## remove the seasonal component
serie.desaz = seasadj(stl.decomp)

## apply a hampel filter
serie.desaz2 = hampel(serie.desaz, k = 12)$y

## put back the seasonal component
return(serie.desaz2 + stl.decomp$time.series[, 'seasonal'])
} 
```

![在此处输入图像描述](../Images/6597e6e9ae0c84e195fe29e67bbd1f1c.png)**

# css - 有没有办法修改 Jersey 生成的 XML 响应以包含样式表信息？

> ID：12218591
> 
> 赞同：1
> 
> 时间：2012-08-31T15:39:32.347
> 
> 标签：css, xml, rest, jersey

在 JAXB 中，这是可能的（使用 marshaller 对象）。我不知道如何使用泽西岛来做到这一点。我想知道是否有办法以某种方式注入类似的东西：

`<?xml-stylesheet type="text/css" href="something.css"?>`

在生成的 xml 响应中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:14:39.977

请参阅 XmlHeader 注释。将其附加到您的资源方法。例如像这样：

```
@GET
@Produces("application/xml")
@XmlHeader("<?xml-stylesheet type=\"text/css\" href=\"something.css\"?>")
public JaxbBean getSomeXml() {
    ....
} 
```

# c# - LINQ to SQL 与属性的多对多关系 - C#

> ID：12218592
> 
> 赞同：1
> 
> 时间：2012-08-31T15:39:45.740
> 
> 标签：c#, linq-to-sql, orm, many-to-many

我刚刚开始了一个使用 LINQ to SQL 的项目，并且遇到了多对多问题。我找到了很多可能的解决方案，我选择[了这个](http://www.codeproject.com/Articles/39104/LINQ-to-SQL-Many-to-Many-Relationships)。

无论如何，受影响的数据库表如下所示：

```
Customer (idcustomer,other stuff..)
Customer_Role(idcustomer, idrole, other_attribute_I_want_to_keep )
Role(idrole, other stuff) 
```

现在，我该如何处理“other_attribute_I_want_to_keep？最好是这样：

客户 c.Role.other_attribute_I_want_to_keep，但我找不到可能的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:45:48.753

您不能为此使用多对多。`BelongsTo`相反，您需要将 CustomerRole 设置为既是 Customer 又是 Role 的一流对象。Customer 和 Role 应该依次`HasOne`为 CustomerRole 声明一个属性。然后你可以这样做：

```
c.CustomerRole.Role
c.CustomerRole.OtherAttribute 
```

您可以将快捷方式`Role`属性`Customer`定义为：

```
[NotMapped]
public Role Role { 
    get { return CustomerRole == null ? (Role)null : CustomerRole.Role; } 
    set { if (CustomerRole == null)
            CustomerRole = new CustomerRole(){ Role = value };
          else
            CustomerRole.Role = value;
    }
} 
```

但请注意，在构建复杂查询时使用此快捷方式可能会遇到麻烦。

# c++ - 如何将值传递给 MFC 消息映射函数 on_command

> ID：12218596
> 
> 赞同：1
> 
> 时间：2012-08-31T15:40:12.777
> 
> 标签：c++, mfc, ribbon, message-map

我有一个函数，它根据接收到的 std::string 值执行特定操作。

例如：

> 无效 performTaskOnStringValue(std::string);

现在我有一组功能区按钮 (CMFCRibbonButton)，需要通过在按钮单击时将它们各自的文本作为值传递来调用此函数。

我已将这些按钮的 ID 映射到带有按钮 ID 的消息映射宏 on_command。所有按钮共享一个共同的 id - 例如 -

> ID_RIBBON_BUTTON_ID

消息映射如下

> ON_COMMAND(ID_RIBBON_BUTTON_ID, &MyClass::performTaskOnStringValue);

**如何将按钮文本作为参数传递给 ButtonClick 上的此函数？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:23:38.607

当按钮都具有相同的 ID 时，您不能让按钮执行不同的操作。命令处理程序没有得到按下哪个按钮的指示。

如果您可以为按钮分配连续的 ID，则可以改用 ON_COMMAND_RANGE。这会将按钮的 ID 传递给您，您可以将其传递给 GetDlgItemText 以从按钮中获取文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:21:59.807

首先，在连续范围内为每个按钮分配不同的 id。

其次，使用[ON_COMMAND_RANGE](http://msdn.microsoft.com/en-us/library/9ab3z9tb%28v=vs.100%29.aspx)将所有按钮映射到一个接收 id 作为参数的处理程序。

第三，在该处理程序中使用 id 来获取按钮文本。然后，您可以调用您的 performTaskOnStringValue 方法。

# javascript - 如何从控制台访问 Backbone 对象？

> ID：12218600
> 
> 赞同：2
> 
> 时间：2012-08-31T15:40:20.380
> 
> 标签：javascript, jquery, backbone.js

`click()`如下代码片段所示，在返回函数中创建了一个主干集合和一些视图。

**问题：**如何`productList`使用 Javascript 控制台访问诸如 Collection 之类的主干.js 对象？`this.productList`不返回任何东西，所以我相信`productList`它不是`window`对象的直接孩子。那么我应该如何创建`productList`集合？

**JS代码**

```
$('#submit_btn').click(function() {
        console.log('do something');
    }, function() {

        this.productList = new ProductCollection();
        var self = this;
        self.productListView = new ProductListView({ collection: self.productList });
        this.productList.fetch({
            data: {gender: 'men'},
            processData: true
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:50:14.913

现在在这种情况下，您不能将所有内容都放在匿名函数中，因此在函数执行后您无法访问它。无论如何，这不是做事的正确方式，也不是主干方式。

这就是我通常做事的方式，创建一个像 app 这样的中心命名空间，然后创建该命名空间的所有模型、集合和视图

```
window.App = {
   //model
   Curve : {},
   //collection
   CurveManager : {},
   //view
   Views : {},
   //controller
   Controller : {}
} 
```

另外，我认为您应该从主干视图本身处理单击事件，这样您就可以相对容易地可视化事物。例如，在[http://backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)中查看 AppView 事件。这应该使事情更加清晰。

这是代码的那一部分

```
var AppView = Backbone.View.extend({
    el: $("#todoapp"),
    statsTemplate: _.template($('#stats-template').html()),
    events: {
      "keypress #new-todo":  "createOnEnter",
      "click #clear-completed": "clearCompleted",
      "click #toggle-all": "toggleAllComplete"
    },

    .
    . // more code in between
    .

    createOnEnter: function(e) {
      if (e.keyCode != 13) return;
      if (!this.input.val()) return;

      Todos.create({title: this.input.val()});
      this.input.val('');
    }, 
```

我一般会在 github 上查看其他人的代码，并尝试了解他们如何做事以及应该如何做事，我建议你也这样做。它有很大帮助 :) 带注释的 todoapp 源代码非常干净而且很容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:54:25.443

您可以将 productList 附加到该`window`对象。

```
$('#submit_btn').click(function() {
        console.log('do something');
    }, function() {

        window.productList = new ProductCollection();
        var self = this;
        self.productListView = new ProductListView({ collection: self.productList });
        window.productList.fetch({
            data: {gender: 'men'},
            processData: true
        });

    });
}); 
```

但是你最好像@avk 所说的那样重构你的代码`submit_btn`，这是Backbone 视图的一部分。

不管发生了什么，因为`this`在那个实例中是指运行代码的闭包，所以在将其导出到外部可用对象之前，它是不可访问的。

# django - Django - 如何从模板访问会话状态

> ID：12218601
> 
> 赞同：0
> 
> 时间：2012-08-31T15:40:34.377
> 
> 标签：django, django-templates, django-sessions

我想为索引页面上的每个帖子添加一个“编辑”链接。但在显示此链接之前；我需要检查会话是否已注册。我的意思是我需要这样的东西：

```
{% if session.name=='blabla' %}
    <a href="#">Edit</a>
{% endif %} 
```

我 在**模板上下文处理器上有****django.core.context_processors.request 。**

 **谢谢你

编辑 ：

这是我的详细信息页面视图：

```
def singlePost(request,postslug):
    post = get_object_or_404(Post, slug=postslug)
    context = {'post':post}
    return render_to_response('detail.html',context,context_instance = RequestContext(request)) 
```

当我尝试这个时：

```
def singlePost(request,postslug):
    session=request.session['loggedin']
    post = get_object_or_404(Post, slug=postslug)
    context = {'post':post}
    return render_to_response('detail.html',context,context_instance = RequestContext(request,{'session':'session',})) 
```

它给出了模板语法错误（渲染错误）

我试过这个：

```
{% if request.session.name=='blablabla' %} 
```

这是错误：

```
TemplateSyntaxError at /post/viva-barca

Could not parse the remainder: '=='djangoo'' from 'request.session.name=='djangoo'' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:44:11.090

如果您正在使用`django.core.context_processors.request`并且模板是用 a 呈现的，`RequestContext`那么您可以从请求中访问会话。

```
{% if request.session.name == 'blabla' %}
    <a href="#">Edit</a>
{% endif %} 
```

编辑：

A`RequestContext`由[`render`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)快捷方式和通用视图自动使用。如果您使用`render_to_response`的是需要使用`context_instance`参数传递。[这在https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)的文档中有详细说明`RequestContext`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:51:24.017

我找到了另一种方式。

```
{% if post.owner == user %}

        <div class="right"><a href="{% url editpost post.id %}">Edit</a></div>

        {% endif %} 
```

这样 ; 我也可以控制用户身份验证。因为有很多用户拥有自己的帐户和帖子，它们都列在 index.html 中。如果我不写这个控件；x 用户可以编辑其他 y 用户的帖子。但现在只有登录用户才能编辑自己的帖子。

如果没有任何登录用户；未显示“编辑”链接。**

# c# - 使用 XslCompiledTransform 去除空格

> ID：12218604
> 
> 赞同：10
> 
> 时间：2012-08-31T15:40:42.947
> 
> 标签：c#, xslt, whitespace, xslcompiledtransform

我正在尝试将大型应用程序从`XslTransform`已编译的 xsl 文件和`XslCompiledTransform`.

该应用程序使用`Xsl`来创建 HTML 文件，并且转换数据 ( `Xml`) 被传递给`Xsl`从`XmlDataDocument`数据库返回的 。

我已经改变了这一切，所以现在我做了（至少是暂时的）：

**C＃**

```
 public string ProcessCompiledXsl(XmlDataDocument xml)
 {
       StringBuilder stringControl = new StringBuilder();
       XslCompiledTransform xslTran = new XslCompiledTransform();

       xslTran.Load(
           System.Reflection.Assembly.Load("CompiledXsl").GetType(dllName)
       );

       xslTran.Transform(xml, this.Arguments, XmlWriter.Create(stringControl, othersettings), null);

       return stringControl.ToString();
 } 
```

**XSL（只是一个例子）**

```
...
  <xsl:output method="html" indent="yes"/>
  <xsl:template match="/">
       <xsl:for-each select="//Object/Table">
              <a href="#">
                     some text
              </a>
       </xsl:for-each>
  </xsl:template> 
```

**问题**

这行得通，但 xsl 正在剥离标签输出之间的空格：

```
<a href="#">
   some text
</a><a href="#">
   some text
</a><a href="#">
   some text
</a><a...etc 
```

我试过了：

*   使用`xml:space="preserve"`但我无法让它工作
*   覆盖`OutputSettings`，但我没有得到任何好的结果（也许我错过了一些东西）
*   使用`xsl:output method="xml"`, 并且有效，但会创建自闭合标签和许多其他问题

所以我不知道该怎么办。也许我做的不对。非常感谢任何帮助。

谢谢！

**编辑**

只是为了将来参考，如果你想解决这个问题，让每个 XSL 保持不变，可以试试我写的[这个 C# 类](http://goo.gl/25R33)，命名为`CustomHtmlWriter`.

基本上我所做的是扩展`XmlTextWriter`和修改编写每个标签的`start`方法`end`。

在这种特殊情况下，您可以像这样使用它：

```
 StringBuilder sb = new StringBuilder();
    CustomHtmlWriter writer = new CustomHtmlWriter(sb);

    xslTran.Transform(nodeReader, this.Arguments, writer);

    return sb.ToString(); 
```

希望它可以帮助某人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:12:06.297

**一、方案一**：

**我先分析一下这里的问题**：

鉴于此源 XML 文档（发明，因为您没有提供任何）：

```
<Object>
 <Table>

 </Table>

 <Table>

 </Table>

 <Table>

 </Table>

 <Table>

 </Table>
</Object> 
```

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" indent="yes"/>

  <xsl:template match="/">
       <xsl:for-each select="//Object/Table">
              <a href="#">
                     some text
              </a>
       </xsl:for-each>
  </xsl:template>
<!--
 <xsl:template match="Table">
   <a href="#">
    Table here
   </a>
 </xsl:template>
 -->
</xsl:stylesheet> 
```

**完全重现了这个问题**——结果是：

```
<a href="#">
                     some text
              </a><a href="#">
                     some text
              </a><a href="#">
                     some text
              </a><a href="#">
                     some text
              </a> 
```

**现在，只需取消注释已注释的模板并注释掉第一个模板：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" indent="yes"/>
<!--
  <xsl:template match="/">
       <xsl:for-each select="//Object/Table">
              <a href="#">
                     some text
              </a>
       </xsl:for-each>
  </xsl:template>
 -->
 <xsl:template match="Table">
   <a href="#">
    Table here
   </a>
 </xsl:template>
</xsl:stylesheet> 
```

**结果有想要的缩进**：

```
 <a href="#">
    Table here
   </a>

 <a href="#">
    Table here
   </a>

 <a href="#">
    Table here
   </a>

 <a href="#">
    Table here
   </a> 
```

**这是解决方案1**

* * *

**二、解决方案 2**：

此解决方案可以将现有 XSLT 代码所需的修改降至最低：

**这是一个两遍转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="ext">
 <xsl:output method="html"/>

  <xsl:template match="/">
    <xsl:variable name="vrtfPass1">
       <xsl:for-each select="//Object/Table">
              <a href="#">
                     some text
              </a>
       </xsl:for-each>
    </xsl:variable>

    <xsl:apply-templates select=
        "ext:node-set($vrtfPass1)" mode="pass2"/>
  </xsl:template>

 <xsl:template match="node()|@*" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*" mode="pass2"/>
  </xsl:copy>
 </xsl:template>

  <xsl:template mode="pass2" match="*[preceding-sibling::node()[1][self::*]]">
   <xsl:text>&#xA;</xsl:text>
   <xsl:copy-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

我们的想法是，我们甚至不触及现有代码，而是捕获其输出并仅使用几行附加代码，我们将输出格式化为所需的最终外观。

**当此转换应用于同一个 XML 文档时，会产生相同的所需结果：**

```
<a href="#">
                     some text
              </a>
<a href="#">
                     some text
              </a>
<a href="#">
                     some text
              </a>
<a href="#">
                     some text
              </a> 
```

**最后，这里演示了如何在不涉及任何现有 XSLT 代码的情况下引入这个小改动**：

让我们有这个现有的代码`c:\temp\delete\existing.xsl`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html"/>

  <xsl:template match="/">
    <xsl:for-each select="//Object/Table">
      <a href="#">
        some text
      </a>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

**如果我们运行它，我们会得到有问题的输出**。

**现在，`existing.xsl`我们运行这个转换**，而不是运行：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="ext">
 <xsl:import href="file:///c:/temp/delete/existing.xsl"/>
 <xsl:output method="html"/>

  <xsl:template match="/">
    <xsl:variable name="vrtfPass1">
       <xsl:apply-imports/>
    </xsl:variable>

    <xsl:apply-templates select=
        "ext:node-set($vrtfPass1)" mode="pass2"/>
  </xsl:template>

 <xsl:template match="node()|@*" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*" mode="pass2"/>
  </xsl:copy>
 </xsl:template>

  <xsl:template mode="pass2" match="*[preceding-sibling::node()[1][self::*]]">
   <xsl:text>&#xA;</xsl:text>
   <xsl:copy-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

**结果是想要的，现有的代码根本没有改变**：

```
<a href="#">
        some text
      </a>
<a href="#">
        some text
      </a>
<a href="#">
        some text
      </a>
<a href="#">
        some text
      </a> 
```

**说明**：

1.  我们使用**[`xsl:import`](http://www.w3.org/TR/xslt#element-import)**.

2.  我们在一个变量中捕获现有转换的输出。它具有臭名昭著的 RTF（**[结果树片段](http://www.w3.org/TR/xslt#section-Result-Tree-Fragments)**），需要将其转换为常规树才能进一步处理。

3.  关键时刻是**[`xsl:apply-imports`](http://www.w3.org/TR/xslt#element-apply-imports)**在捕获转换的输出时执行。这确保了现有代码中的任何模板（即使是我们覆盖的模板——例如模板匹配`/`）都将被选择执行，就像现有转换由自身执行的情况一样）。

4.  我们使用扩展函数将 RTF 转换为常规树**[`msxsl:node-set()`](http://msdn.microsoft.com/en-us/library/hz88kef0%28v=vs.71%29.aspx)**（XslCompiledTransform 也支持**[EXSLT`node-set()`](http://exslt.org/exsl/functions/node-set/index.html)**扩展函数）。

5.  我们对如此制作的常规树进行外观调整。

**请注意**：

**这代表了一种在不触及现有代码的情况下对现有转换进行后处理的通用算法**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:37:01.657

我认为问题是：

```
 <xsl:output method="html" indent="yes"/> 
```

如果我没记错的话，html 会尝试只关心对 HTML 的显示方式很重要的空格。

如果你试试：

```
 <xsl:output method="xml" indent="yes"/> 
```

然后它应该创建您期望的缩进空白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:03:22.023

我不记得我头顶上的 XML/XSLT 空间保留的细节，但它更有可能丢弃空白的一个实例是在没有非空白文本的元素之间（即只有空白的文本节点，如`</a>`和之间的那个`</xsl:for-each>`）。您可以通过使用该`<xsl:text>`元素来防止这种情况。

例如，之后

```
 <a href="#">
                 some text
          </a> 
```

放

```
 <xsl:text>&#10;</xsl:text> 
```

即文字行结束符。

这符合你的要求吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:36:13.140

样式表中的空白文本节点总是被忽略，除非它们包含在 xsl:text 中。如果要将空格输出到结果树，请使用 xsl:text。

（也可以在样式表中使用 xml:space="preserve"，但通常不建议这样做，因为它会产生不必要的副作用。）

# html - Webkit vs. Firefox 背景位置和背景附件

> ID：12218606
> 
> 赞同：1
> 
> 时间：2012-08-31T15:40:46.770
> 
> 标签：html, firefox, css, webkit

Webkit 呈现背景位置的方式与 Firefox 的方式存在一些问题。我正在制作一个自定义动画，它基本上是一个带有 3D 轮播的大型背景图像，可以选择主图像 + 背景图像。然后，动画会四处滑动轮播并拉动背景（请参阅下面的 URL）。

问题是该页面在 Firefox 中呈现我想要的方式，但在 Chrome/Safari 中却没有。他们在此特定布局中以不同方式处理背景位置/背景附件。我不确定 Chrome 以什么为中心，但它似乎位于右下象限。

这是我们要实现的目标的精简示例，因此更有意义。在 FF 中效果很好，但内部窗口背景的居中在 webkit 中很差：http: [//ps12.pointsourcellc.com/webkitTest/test/test.html](http://ps12.pointsourcellc.com/webkitTest/test/test.html)

我们使用具有中心/顶部定位的固定背景，并包含真实背景和中心 div 内部的填充，即：

```
#aboutView .cardFront {
background-image: url('../images/bay_bridge5570.jpg'); 
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center top;
background-size: contain;
} 
```

在此先感谢您的任何建议。我很困惑是什么导致了这个问题，并且没有任何运气搜索它。

* * *

更新：我和同事发现了一些“修复”，但我们仍然对此不满意，并且不确定为什么图像定位首先关闭：

*   删除 .selectedView -webkit-transform: translate(0px, 0px); CSS 的一部分
*   删除 -webkit-backface-visibility: hidden; CSS 的一部分（这使得使用翻转动画变得更加困难，但没有它我们无法让它居中......）
*   添加特定于 webkit 的 background-image-position: 0px 75px; 居中

我不确定为什么它偏离了 75 px 或者为什么背面 vis 会影响它，但这给了我们一些可以对齐的东西。不幸的是，添加这个额外的翻译会导致过度闪烁，因此我们仍在努力寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:48:08.720

如果您删除 background-attachment: fixed，它们的行为似乎相同。我认为不需要它，因为无论如何您已经在应用背景大小来包含。

# shell - 在 AWK 命令中将变量传递给 NR 不起作用

> ID：12218609
> 
> 赞同：6
> 
> 时间：2012-08-31T15:40:58.830
> 
> 标签：shell, unix, awk, ksh

嗨，我正在尝试在使用 awk 命令找到正则表达式后打印 5 行。我有以下内容：

```
line_start=$(awk '/regex/{print NR}' file)
let line_end=$line_start+4
awk 'NR==$line_start, NR==$line_end' file 
```

这不会打印任何东西。它没有挂起，只是继续下一行。

我研究了一些类似的问题，看到人们使用 -v 选项。我应该在这里使用它吗，他们的情况是针对较大的 awk 脚本。

顺便说一句，我正在使用 Kornshell

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T16:12:37.360

您的脚本有几个问题。直接的问题是，在第二次调用 awk 时，您在脚本周围使用单引号，因此`$line_start`和`$line_end`是由 shell 扩展的变量，它们作为脚本的一部分按字面意思传递给 awk。您可以改用双引号来解决此问题。

```
awk "NR==$line_start, NR==$line_end" file 
```

这只是因为`$line_start`和`$line_end`是数字。如果它们是字符串，则不能这样做，因为 shell 变量的值最终会被 awk 解析为 awk 代码的一部分，而不是字符串。通常，要将字符串传递给 awk 脚本，您可以使用 with`-v`来定义与 shell 变量同名的 awk 变量（如果您愿意，也可以使用不同的名称）：

```
awk -v "line_start=$line_start" -v "line_end=$line_end" 'NR==line_start, NR==line_end' file 
```

您的脚本存在更多问题。

*   您解析文件两次。如果文件很大，这可能会很慢，如果数据来自管道而不是磁盘文件，则不可能。
*   如果 有多个匹配项`/regex/`，`$line_start`则将包含行号列表。`let`shell 将在该行上抱怨语法错误。

如果要在匹配后显示 5 行，请在 awk 中进行计数。

```
awk '
  /regex/ { show_lines = 5 }
  show_lines { print; --show_lines; }
' file 
```

如果只想显示第一个匹配的块，则在`show_lines`到达 0 时退出。

```
 show_lines { print; --show_lines; if (!show_lines) exit; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:46:24.177

您可以为此使用 sed：

```
sed -n '/regex/{N;N;N;N;N;p}' file 
```

或者更改 awk 解决方案：

```
line_start=$(awk '/regex/{print NR}' file) 
let line_end=$line_start+4 
awk "{ if (NR>=$line_start && NR<=$line_end) print; }" file 
```

另一个 awk 解决方案`(s.awk)`：

```
BEGIN           { v = -1} 
/regex/         { v = 0 } 
v > -1          { v++   }
v > -1 && v < 5 { print }
v == 5          { exit  } 
```

采用：

```
awk -f s.awk file 
```

# java - 通过 Crystal Reports API 使用 Java 更改 GroupField 上的排序方向

> ID：12218610
> 
> 赞同：0
> 
> 时间：2012-08-31T15:41:13.780
> 
> 标签：java, crystal-reports

使用 Crystal Reports，我可以修改为给定报表分组的字段，但似乎无法弄清楚如何更改字段的排序方向。基本上我正在尝试这样的事情：

```
Sorts sorts=reportdocument.getDataDefinition.getSorts
ISort s=sorts.get(index)
    if(s.getSortField.getName equals field.getName)
        s.setDirection(...) 
```

我还尝试在给定索引处删除 Sort 实例并创建一个新实例来替换它，但这也不起作用。有没有人对我如何做到这一点有任何想法，或者知道任何好的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:21:12.083

我已经想出了如何做到这一点，并发布我所做的以防万一它会帮助其他人。基本上，您需要执行以下操作：

```
GroupController gc=...
IGroup old=gc.findGroup(some field)
IGroup newGroup=(IGroup)old.clone(true);

ISort sort=new Sort();
sort.setSortField(field sorting on);
sort.setDirection(SortDirection);

newGroup.setSort(sort);
gc.modify(old,newGroup); 
```

[这个链接](http://help.sap.com/businessobject/product_guides/cr4E/en/cr4e_relnotes_en.pdf)（不仅是我能找到的几乎所有内容）而且也很有帮助。

# django - 在 Django 中，如何在模板中以小写 am/pm 显示时间？

> ID：12218620
> 
> 赞同：11
> 
> 时间：2012-08-31T15:41:50.957
> 
> 标签：django, django-templates

Django 的[日期/时间格式](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)有一个代码，用于将时间的上午/下午部分显示为：

```
a.m. 
```

或者

```
AM 
```

但不是：

```
am 
```

即没有句点的小写。

你如何用小写的 am/pm 渲染时间？

注意：我在输入这个问题时想到了答案，所以我想与其放弃它，不如分享我的答案，以防它对其他人有帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-31T15:41:50.957

将`lower`模板标签与`time`格式化标签一起使用，例如

```
{{object.time|time:"g:iA"|lower}} 
```

呈现为

```
12:30pm 
```

相比

```
{{object.time|time:"g:iA"}} 
```

呈现为

```
12:30PM 
```

请注意，仅`lower`在没有显式格式过滤器的情况下对时间对象使用过滤`time`器是行不通的。但您可以使用默认时间格式，例如

```
{{object.time|time|lower}} 
```

# objective-c - 此视图动画概念的适当清洁和线程安全设计

> ID：12218623
> 
> 赞同：0
> 
> 时间：2012-08-31T15:41:54.493
> 
> 标签：objective-c, multithreading, cocoa, thread-safety, grand-central-dispatch

我有一个名为 的类`RunningInteger`，它——在不同的线程上（以避免阻塞主线程）——循环一个从 1 到 60 的整数 ivar，它们之间有 1 秒。因此，整个循环大约需要一分钟。ivar 通过方法或只读属性提供给外部世界。

我有一个自定义`NSView`子类，它有 60 种不同的模式，可以在其中显示自己。

现在，这就是我想要完成的：

1.  我在界面上有一个按钮。单击时，即在其操作方法中，`RunningInteger`应创建一个新的实例，并且视图应根据该实例的 ivar 绘制自身。

2.  然而——这就是问题——如果再次单击按钮，动画应该相应地重置并重新开始。这应该是线程安全的，不应该有内存泄漏，也不应该有线程堆积。

关于如何做到这一点的任何想法？

有两个特定的（可能还有许多其他的）问题与此密切相关：

*   显然，让线程不断堆积并不是一个好的设计，即使我们知道它们会在 60 秒后消失。毕竟，如果 60 秒是 1 小时呢？（这是一种可能。）

*   我们如何确保只有*最近创建*的 get实例`RunningInteger`才能更新视图的显示 (setNeedsDisplay:YES)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:46:52.187

使 RunningInteger 成为单例：

```
+(RunningInteger *)sharedManager {
    static dispatch_once_t pred;
    static RunningInteger *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[RunningInteger alloc] init];
    });
    return shared;
} 
```

Then simply reset your counter when the button presses the button. Use a timer to increase the singleton counter at regular interval. Then access the singleton from your view to know what to display.

# java - session.getAttribute 在禁用 cookie 时返回 null

> ID：12218626
> 
> 赞同：0
> 
> 时间：2012-08-31T15:42:16.883
> 
> 标签：java, jakarta-ee

谁能告诉我为什么`request.getSession().getAttribute(SESSIONUSER)`禁用cookie时返回null？

我也看不懂这里

```
Cookie[] cookies = request.getCookies();
Cookie thisCookie = cookies[0];
int age = thisCookie.getMaxAge();  
System.out.println(age); 
```

`age`结果`-1`仍然是会话在 10 小时左右后过期？为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:03:20.147

您的 HTTPSession 使用 jsessionid 进行跟踪。它保存在 cookie 中。因此，当客户端向服务器发送第二个请求时，预计会发送 jsessionid。否则，服务器无法跟踪会话。简而言之，您的会话每次都是在 request.getSession() 期间创建的。因此，您看不到其中的任何对象。

“-1”是什么意思：
这意味着cookie应该是活动的，直到浏览器关闭。如果它在那里持续 10 小时，则意味着您的浏览器在 10 小时内没有关闭。

# xcode - Xcode 内存调试

> ID：12218635
> 
> 赞同：0
> 
> 时间：2012-08-31T15:43:01.297
> 
> 标签：xcode, debugging

Xcode 代码和内存有什么好的处理方法吗？喜欢任何书籍或资源？我在 Xcode 项目中混合使用 Objective-C 和普通 C 并且内存使用量不断增长。我对深入处理基本概念以及包括 Apple Instruments 在内的工具感兴趣。100 页之类的东西会很受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:48:43.320

Apple 有几份关于内存管理的文档。例如：

*   [高级内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)
*   [Core Foundation 的内存管理编程指南](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html#//apple_ref/doc/uid/10000127i)

即使第二个是关于 CF 的，它也解释了 Objective-C 中可用的许多概念。

在 WWDC 会议上也有关于内存管理的精彩视频，尤其是关于 OS X（或 iOS）内存管理内部和 Instruments 的视频。
如果您是注册开发者，您可以从 iTunes 下载它们：

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

# mysql - Sequel pro 将无法再连接

> ID：12218639
> 
> 赞同：0
> 
> 时间：2012-08-31T15:43:23.937
> 
> 标签：mysql, sequelpro

我现在遇到了一些麻烦。我昨天在我的数据库上工作，使用 TigerV1 的 sequel pro（用于旧的 OS X 10.4 powerpc）。问题是，今天早上，sequel pro 将不再连接。我删除了我的“收藏夹”，然后重新输入了主机用户密码。

它不让我访问我的数据库。

这是错误消息：无法连接到主机 xxx.xxxxx.ca，或者请求超时。

确保地址正确并且您拥有必要的权限，或者尝试增加连接超时时间（当前为 30 秒）。

MySQL说：用户'root'@'xx-xx.xx.xxxxxxx.ca'的访问被拒绝（使用密码：YES）

MySQL版本从昨天开始没有变化，我的sequel pro版本也没有。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:01:36.900

很可能某些权限不同步。您昨天是否创建了此用户或更改了任何权限？特权表可能在昨天和今天之间被刷新，使您所做的任何更改都生效。

一些可能的问题：

1.  用户名/密码已更改。
2.  远程连接已被禁用。
3.  您无权访问您尝试连接的数据库。
4.  MySQL 有一个 IP 或主机名白名单，您的 IP 或主机名不在其中。

一些事情要尝试：

1.  如果您有 SSH 访问权限，请尝试通过控制台连接。如果它允许您连接，请检查您的用户权限。确保允许远程连接并且您已将 IP 地址列入白名单。完成后一定`FLUSH PRIVILEGES;`要这样做。
2.  如果您没有 SSH 访问权限，请仔细检查控制面板中的所有权限。
3.  尝试重新启动 MySQL 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T08:31:56.053

每次重新连接互联网或使用静态 IP 时，在**远程 mysql**中添加您的公共IP。这只是远程连接问题。使用此链接了解有关远程 mysql 的更多信息 - [https://documentation.cpanel.net/display/ALD/Remote+MySQL#](https://documentation.cpanel.net/display/ALD/Remote+MySQL#)

# scala - 什么是 TypeTag 以及如何使用它？

> ID：12218641
> 
> 赞同：380
> 
> 时间：2012-08-31T15:43:27.210
> 
> 标签：scala, types, scala-2.10, reification

我所知道的关于 TypeTags 的只是它们以某种方式取代了 Manifests。Internet 上的信息很少，无法让我很好地了解该主题。

因此，如果有人在 TypeTags 上分享一些有用材料的链接，包括示例和流行用例，我会很高兴。也欢迎详细的回答和解释。

* * *

## 回答 #1

> 赞同：579
> 
> 时间：2012-09-01T23:16:37.980

A`TypeTag`解决了 Scala 的类型在运行时被擦除的问题（类型擦除）。如果我们想做

```
class Foo
class Bar extends Foo

def meth[A](xs: List[A]) = xs match {
  case _: List[String] => "list of strings"
  case _: List[Foo] => "list of foos"
} 
```

我们会收到警告：

```
<console>:23: warning: non-variable type argument String in type pattern List[String]↩
is unchecked since it is eliminated by erasure
         case _: List[String] => "list of strings"
                 ^
<console>:24: warning: non-variable type argument Foo in type pattern List[Foo]↩
is unchecked since it is eliminated by erasure
         case _: List[Foo] => "list of foos"
                 ^ 
```

为了解决这个问题，Scala 引入了[Manifest 。](http://www.scala-lang.org/api/current/index.html#scala.reflect.Manifest)但是他们的问题是不能表示很多有用的类型，比如依赖路径的类型：

```
scala> class Foo{class Bar}
defined class Foo

scala> def m(f: Foo)(b: f.Bar)(implicit ev: Manifest[f.Bar]) = ev
warning: there were 2 deprecation warnings; re-run with -deprecation for details
m: (f: Foo)(b: f.Bar)(implicit ev: Manifest[f.Bar])Manifest[f.Bar]

scala> val f1 = new Foo;val b1 = new f1.Bar
f1: Foo = Foo@681e731c
b1: f1.Bar = Foo$Bar@271768ab

scala> val f2 = new Foo;val b2 = new f2.Bar
f2: Foo = Foo@3e50039c
b2: f2.Bar = Foo$Bar@771d16b9

scala> val ev1 = m(f1)(b1)
warning: there were 2 deprecation warnings; re-run with -deprecation for details
ev1: Manifest[f1.Bar] = Foo@681e731c.type#Foo$Bar

scala> val ev2 = m(f2)(b2)
warning: there were 2 deprecation warnings; re-run with -deprecation for details
ev2: Manifest[f2.Bar] = Foo@3e50039c.type#Foo$Bar

scala> ev1 == ev2 // they should be different, thus the result is wrong
res28: Boolean = true 
```

因此，它们被[TypeTags](http://www.scala-lang.org/api/current/scala-reflect/index.html#scala.reflect.api.TypeTags)取代，它们使用起来更简单，并且很好地集成到了新的 Reflection API 中。有了它们，我们可以优雅地解决上面关于路径依赖类型的问题：

```
scala> def m(f: Foo)(b: f.Bar)(implicit ev: TypeTag[f.Bar]) = ev
m: (f: Foo)(b: f.Bar)(implicit ev: reflect.runtime.universe.TypeTag[f.Bar])↩
reflect.runtime.universe.TypeTag[f.Bar]

scala> val ev1 = m(f1)(b1)
ev1: reflect.runtime.universe.TypeTag[f1.Bar] = TypeTag[f1.Bar]

scala> val ev2 = m(f2)(b2)
ev2: reflect.runtime.universe.TypeTag[f2.Bar] = TypeTag[f2.Bar]

scala> ev1 == ev2 // the result is correct, the type tags are different
res30: Boolean = false

scala> ev1.tpe =:= ev2.tpe // this result is correct, too
res31: Boolean = false 
```

它们也很容易用于检查类型参数：

```
import scala.reflect.runtime.universe._

def meth[A : TypeTag](xs: List[A]) = typeOf[A] match {
  case t if t =:= typeOf[String] => "list of strings"
  case t if t <:< typeOf[Foo] => "list of foos"
}

scala> meth(List("string"))
res67: String = list of strings

scala> meth(List(new Bar))
res68: String = list of foos 
```

此时，了解使用`=:=`（类型相等）和`<:<`（子类型关系）进行相等检查非常重要。切勿使用`==`or `!=`，除非您绝对知道自己在做什么：

```
scala> typeOf[List[java.lang.String]] =:= typeOf[List[Predef.String]]
res71: Boolean = true

scala> typeOf[List[java.lang.String]] == typeOf[List[Predef.String]]
res72: Boolean = false 
```

后者检查结构相等性，这通常不是应该做的，因为它不关心诸如前缀之类的事情（如示例中所示）。

A`TypeTag`完全由编译器生成，这意味着编译器在`TypeTag`调用期望这样的方法时创建并填充 a `TypeTag`。存在三种不同形式的标签：

*   [scala.reflect.ClassTag](http://www.scala-lang.org/api/current/index.html#scala.reflect.ClassTag)
*   [scala.reflect.api.TypeTags#TypeTag](http://www.scala-lang.org/api/current/scala-reflect/index.html#scala.reflect.api.TypeTags$TypeTag)
*   [scala.reflect.api.TypeTags#WeakTypeTag](http://www.scala-lang.org/api/current/scala-reflect/index.html#scala.reflect.api.TypeTags)

`ClassTag`替代`ClassManifest`while`TypeTag`或多或少替代`Manifest`.

前者允许完全使用泛型数组：

```
scala> import scala.reflect._
import scala.reflect._

scala> def createArr[A](seq: A*) = Array[A](seq: _*)
<console>:22: error: No ClassTag available for A
       def createArr[A](seq: A*) = Array[A](seq: _*)
                                           ^

scala> def createArr[A : ClassTag](seq: A*) = Array[A](seq: _*)
createArr: [A](seq: A*)(implicit evidence$1: scala.reflect.ClassTag[A])Array[A]

scala> createArr(1,2,3)
res78: Array[Int] = Array(1, 2, 3)

scala> createArr("a","b","c")
res79: Array[String] = Array(a, b, c) 
```

`ClassTag`仅提供在运行时创建类型所需的信息（类型已擦除）：

```
scala> classTag[Int]
res99: scala.reflect.ClassTag[Int] = ClassTag[int]

scala> classTag[Int].runtimeClass
res100: Class[_] = int

scala> classTag[Int].newArray(3)
res101: Array[Int] = Array(0, 0, 0)

scala> classTag[List[Int]]
res104: scala.reflect.ClassTag[List[Int]] =↩
        ClassTag[class scala.collection.immutable.List] 
```

正如上面所见，他们不关心类型擦除，因此如果想要“完整”类型`TypeTag`应该使用：

```
scala> typeTag[List[Int]]
res105: reflect.runtime.universe.TypeTag[List[Int]] = TypeTag[scala.List[Int]]

scala> typeTag[List[Int]].tpe
res107: reflect.runtime.universe.Type = scala.List[Int]

scala> typeOf[List[Int]]
res108: reflect.runtime.universe.Type = scala.List[Int]

scala> res107 =:= res108
res109: Boolean = true 
```

如您所见，方法`tpe`的`TypeTag`结果是完整的`Type`，这与我们在`typeOf`调用时得到的结果相同。当然，可以同时使用`ClassTag`和`TypeTag`：

```
scala> def m[A : ClassTag : TypeTag] = (classTag[A], typeTag[A])
m: [A](implicit evidence$1: scala.reflect.ClassTag[A],↩
       implicit evidence$2: reflect.runtime.universe.TypeTag[A])↩
      (scala.reflect.ClassTag[A], reflect.runtime.universe.TypeTag[A])

scala> m[List[Int]]
res36: (scala.reflect.ClassTag[List[Int]],↩
        reflect.runtime.universe.TypeTag[List[Int]]) =↩
       (scala.collection.immutable.List,TypeTag[scala.List[Int]]) 
```

现在剩下的问题是什么是感觉`WeakTypeTag`？简而言之，`TypeTag`表示一个具体类型（这意味着它只允许完全实例化的类型），而`WeakTypeTag`只允许任何类型。大多数时候人们并不关心哪个是什么（这意味着`TypeTag`应该使用），但是例如，当使用应该与泛型类型一起使用的宏时，就需要它们：

```
object Macro {
  import language.experimental.macros
  import scala.reflect.macros.Context

  def anymacro[A](expr: A): String = macro __anymacro[A]

  def __anymacro[A : c.WeakTypeTag](c: Context)(expr: c.Expr[A]): c.Expr[A] = {
    // to get a Type for A the c.WeakTypeTag context bound must be added
    val aType = implicitly[c.WeakTypeTag[A]].tpe
    ???
  }
} 
```

如果一个替换`WeakTypeTag`为`TypeTag`错误，则抛出：

```
<console>:17: error: macro implementation has wrong shape:
 required: (c: scala.reflect.macros.Context)(expr: c.Expr[A]): c.Expr[String]
 found   : (c: scala.reflect.macros.Context)(expr: c.Expr[A])(implicit evidence$1: c.TypeTag[A]): c.Expr[A]
macro implementations cannot have implicit parameters other than WeakTypeTag evidences
             def anymacro[A](expr: A): String = macro __anymacro[A]
                                                      ^ 
```

有关两者之间差异的更详细说明`TypeTag`，`WeakTypeTag`请参阅此问题：[Scala Macros: “cannot create TypeTag from a type T has unresolved type parameters”</a>](https://stackoverflow.com/questions/12093752/scala-macros-cannot-create-typetag-from-a-type-t-having-unresolved-type-parame)

[](https://stackoverflow.com/questions/12093752/scala-macros-cannot-create-typetag-from-a-type-t-having-unresolved-type-parame)

[Scala 的官方文档站点也包含](https://stackoverflow.com/questions/12093752/scala-macros-cannot-create-typetag-from-a-type-t-having-unresolved-type-parame)[反射指南](http://docs.scala-lang.org/overviews/reflection/overview.html)。

# java - 尝试套接字连接时出现 Java 异常

> ID：12218648
> 
> 赞同：2
> 
> 时间：2012-08-31T15:43:59.173
> 
> 标签：java, sockets

我正在尝试与 ip:port 建立套接字连接，并且它在我的一台计算机上都能正常工作。客户端首先通过socket连接连接到服务器进行登录；之后，它期望来自服务器的传入连接并且它们是成功的。

但是，当我在另一台计算机上尝试时，客户端建立了第一个连接以成功登录，然后等待传入连接。在将启动连接的服务器端，我收到以下消息：

`java.net.NoRouteToHostException`

并且传入连接失败。

为什么会这样？会不会是防火墙问题？

```
s = new Socket(id, 4446);
BufferedWriter out1 = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
BufferedReader in1 = new BufferedReader(new InputStreamReader(s.getInputStream())); 
```

那是第 46 行

```
java.net.NoRouteToHostException: No route to host: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at sample_server.doComms.run(doComms.java:46)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T15:46:36.087

如[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/NoRouteToHostException.html)中所述：

> 表示尝试将套接字连接到远程地址和端口时发生错误的信号。通常，由于中间防火墙或中间路由器已关闭，无法访问远程主机。

您很可能有防火墙或阻止连接的东西。如果您有一个真正快速的，请尝试禁用一个，看看它是如何工作的。如果它不起作用，那就是别的东西（完整的堆栈跟踪可能会有所帮助，正如您对问题的评论所说）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:19:56.093

“没有到主机的路由”意味着您的主机甚至不知道如何联系目标。这是网络连接问题。不是防火墙问题。

# php - PHP Regex 去除多余的标点符号

> ID：12218650
> 
> 赞同：4
> 
> 时间：2012-08-31T15:44:09.177
> 
> 标签：php, regex

所以基本上我们需要一个正则表达式从字符串中去除多余的标点符号，只留下一个标点符号。

所以：

> 这是我的棒棒哒！！！！你不爱吗？？？！！！

会导致

> 这是我的棒棒哒！你不爱吗？！

我已经尝试过并试图得到这个，但我要么最终弄乱了字符串，要么它根本不起作用。我仍在学习正则表达式，所以请原谅这肯定是一个愚蠢的问题。

我想“标点符号”几乎是任何不是 A-Za-z0-9

**编辑**看来我误解了我们最初的要求。使用下面公认的解决方案，我将如何调整它，以便无论你有什么字符，标点符号都仅限于第一个？

IE

> ？？？！！！！！！

会变得公正

> ?

和

> 这是我的字符串！？！？！？！？不是很好吗？？？！！！！！！

会成为

> 这是我的弦！不是很棒吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:05:13.430

与其他答案类似，但应该以`0-9a-zA-Z`任何顺序处理任何非字符，让您每个左侧都有一个：

```
$newstring= preg_replace('/([^\w\s])(?=[^\w\s]*\1)/', '', $oldstring); 
```

应该转

```
This is my awesome string!!!!! Don't you love it???!!??!! 
```

进入

```
This is my awesome string! Don't you love it?! 
```

它通过使用积极的前瞻来查看该字符是否再次出现在此标点符号字符串中。如果是，则将其替换为空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:47:27.030

类似的东西`preg_replace('#([!?])\1+#', '$1')`，也许？例如：

```
$t = 'This is my awesome string!!!!! Don\'t you love it???!!??!!';
$u = preg_replace('#([!?])\1+#', '$1', $t);

// to clear out all these '?!?!...' and '!?!?...' sequences.
$u = preg_replace('#(\?!|!\?)\1+#', '$1', $u); 

echo $u; // This is my awesome string! Don't you love it?! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:49:01.077

尝试`preg_replace_callback`：

```
preg_replace_callback('/[!?]+/', function($m) {
    $excl = strpos($m[0], '!');
    $ques = strpos($m[0], '?');

    if($excl !== false && $excl <= $ques) {
        return $ques === false ? '!' : '!?';
    } else {
        return $excl === false ? '?' : '?!';
    }
}, $str); 
```

[这是一个演示。](http://codepad.viper-7.com/42WQl6)

# c++ - 修改对象与修改该对象的副本

> ID：12218655
> 
> 赞同：0
> 
> 时间：2012-08-31T15:44:31.337
> 
> 标签：c++, object

我试图尽可能地解决我的问题，但它涉及在 C++ 中定义的多个对象。不过，它们很简单——我认为最好在进一步解释之前分享我的代码：

```
#include <iostream>
#include <vector>

struct Cell {
        bool visited;
        Cell():visited(false) {}
        void setVisited(bool val) {visited = val;}
        bool beenVisited() {return visited;}
};
struct Vector2D
{
        int size;
        std::vector<Cell> myVector;
        Vector2D(int n): size(n), myVector(n*n) {}
        Cell& getAt(int x, int y) {return myVector[((x * size) +y)];}
};

int main()
{
    Vector2D vec = Vector2D(1);
    Cell cell= vec.getAt(0,0);

    cell.setVisited(true);
    cell = vec.getAt(0,0);
    if (cell.beenVisited() == false)
        std::cout << "Why is this not true like I set it a moment ago?\n";
} 
```

我为所有这一切真诚地道歉，但有必要说明这一点。如您所见，我 getAt() 我认为是 Cell 对象，将其访问的实例数据设置为 true，然后关闭到另一个单元格。那么，为什么当我回到同一个单元格时，发现访问的值是假而不是真？！好像它没有注册我的私人数据更改！

做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:49:52.853

```
Cell cell= vec.getAt(0,1); 
```

对象的副本。采用

```
Cell& cell = vec.getAt(0, 1); 
```

或者干脆

```
vec.getAt(0, 1).setVisited(true); 
```

**编辑。**

这段代码应该可以工作。

```
using namespace bob;
Vector2D vec = Vector2D(5);
vec.setAt(0,0, Cell(0,0));
vec.setAt(0,1, Cell(0,1));
vec.setAt(0,2, Cell(0,2));
Cell& cell= vec.getAt(0,1);

cell.setVisited(true);
Cell cell1 = vec.getAt(0,2);
cell1 = vec.getAt(0,1);
if (cell1.beenVisited() == false)
{
    std::cout << "Why is this not true like I set it a moment ago?" << std::endl;
} 
```

[http://liveworkspace.org/code/53634eda052a07885d4e6c062a0fd302](http://liveworkspace.org/code/53634eda052a07885d4e6c062a0fd302)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:02:31.387

ForEveR 的答案是正确的——您需要将 getAt() 返回的值存储在引用变量中，而不是将其复制到值变量中。

您可能会考虑明确声明不应复制“Cell”类，这将帮助您更快地捕获此类错误。这可以通过声明一个私有复制构造函数（没有主体）来完成；或者，如果您使用的是 boost，那么可以通过从基类 "boost::noncopyable" ( [docs for noncopyable](http://www.boost.org/doc/libs/1_51_0/libs/utility/utility.htm#Class_noncopyable) ) 继承来完成。

# weka - WEKA 预测插件

> ID：12218657
> 
> 赞同：1
> 
> 时间：2012-08-31T15:44:33.577
> 
> 标签：weka

我的问题与 Weka [Forecasting Plugin](http://wiki.pentaho.com/display/DATAMINING/Using+the+Weka+Forecasting+Plugin)有关。我正在尝试使用 Weka Forecaster 在 6 的预测范围内预测 sin(x) 的值，算法是 SMOReg，并且我正在尝试使用不同的滞后 (1 - 24)。我为此使用了一个循环。我编写的程序运行良好，但问题是我从程序中获得的结果与直接使用 Weka GUI 不同，我不知道为什么？有任何想法吗？

我确保使用算法的相同“选项”，但结果仍然不同。

这是代码：

```
import java.io.*;
import java.util.*;
import java.util.List;
import weka.core.Instances;
import weka.classifiers.Evaluation;
import weka.classifiers.functions.*;
import weka.classifiers.rules.*;
import weka.classifiers.meta.*;
import weka.classifiers.trees.*;
import weka.classifiers.evaluation.NumericPrediction;
import weka.classifiers.timeseries.WekaForecaster;
import weka.classifiers.timeseries.core.TSLagMaker;
import weka.classifiers.timeseries.core.TSLagMaker.Periodicity;
import weka.classifiers.timeseries.eval.TSEvaluation;
import weka.classifiers.timeseries.eval.ErrorModule;
import weka.core.converters.ConverterUtils.DataSource;

public class TimeSeriesSin {
    static Scanner console = new Scanner(System.in);
    public static void main(String[] args) throws FileNotFoundException{
        try {
            String pathToSinData = "C:/Users/khouloud/Desktop/AUSmaster/thesis/summer/chapter1/sin_10.arff";

            PrintWriter out = new PrintWriter("C:/Users/khouloud/Desktop/AUSmaster/thesis/summer/chapter1/try_sin_10.txt");

            DataSource source = new DataSource(pathToSinData);
            Instances diab = source.getDataSet();

            for(int i = 1; i <= 24; i++) {
                WekaForecaster forecaster = new WekaForecaster();
                forecaster.setFieldsToForecast("sin");
                SMOreg tr = new SMOreg();

                String options = "weka.classifiers.functions.SMOreg -C 1.0 -N 0 -I \"weka.classifiers.functions.supportVector.RegSMOImproved -L 0.001 -W 1 -P 1.0E-12 -T 0.001 -V\" -K \"weka.classifiers.functions.supportVector.PolyKernel -C 250007 -E 1.0\"";
                tr.setOptions(weka.core.Utils.splitOptions(options));

                forecaster.setBaseForecaster(tr);
                forecaster.getTSLagMaker().setMinLag(1);

                forecaster.getTSLagMaker().setMaxLag(i);
                forecaster.buildForecaster(diab, System.out);
                forecaster.primeForecaster(diab);
                List<List<NumericPrediction>> forecast = forecaster.forecast(6, System.out);

                TSEvaluation eval = new TSEvaluation(diab, 0.3);
                eval.setHorizon(6);
                eval.setEvaluateOnTestData(true);
                eval.setEvaluateOnTrainingData(false);
                eval.evaluateForecaster(forecaster, System.out);
                out.println("lag= " + i);
                out.println(eval.toSummaryString()); 
            }

            out.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T11:00:34.900

我遇到了同样的问题。我认为这是关于周期性配置（对象 TSLagMaker）。

如果你从[这里](http://wiki.pentaho.com/display/DATAMINING/Time+Series+Analysis+and+Forecasting+with+Weka#TimeSeriesAnalysisandForecastingwithWeka-4UsingtheAPI)运行代码，

它将生成与 GUI 相同的结果。如果删除以下行，结果会有所不同：

```
// add a month of the year indicator field
forecaster.getTSLagMaker().setAddMonthOfYear(true);

// add a quarter of the year indicator field
forecaster.getTSLagMaker().setAddQuarterOfYear(true); 
```

我认为 GUI 会以某种方式自动检测到它。

希望它有所帮助，Honza

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T14:58:37.613

我在预测三个不同的变量时遇到了同样的问题。我用`MLPRegressor`和`SMOreg`。

我`pdm-timseriesforecasting`从`WEKA-GUI`包管理器中检查了包的包版本，并将相同的包版本放在我的 WEKA 代码中（我使用 maven 存储库进行代码实现），问题就解决了。

# jquery - jquery validate 需要在运行时设置一个范围的最大值

> ID：12218667
> 
> 赞同：0
> 
> 时间：2012-08-31T15:45:15.070
> 
> 标签：jquery, jquery-validate

我有一个订单页面，客户只需要能够从 1 到库存数量进行订购。

```
$(document).ready(function()
{
    $("#AddToCartForm").validate({
        rules: {
            quantity: { required: true, range: [1, $('.size_max').val()] }
        }
    });
}); 
```

即使有一个 id 为“size_max”且值为 5 的隐藏字段，这也会返回

```
Please enter a value between 1 and NaN 
```

在数量字段中输入任何数字时。

如何动态设置范围的上限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:48:38.760

您提到您有一个带有 id 的隐藏字段，但您在代码中使用了类选择器。尝试在您的代码中更改`$('.size_max')`为。`$('#size_max')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:50:07.540

如果您的隐藏字段的**ID**如`size_max`您所指，那么您的选择器应该是 : `$('#size_max')`，请注意您正在使用的选择器选择具有**类**的元素`size_max`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:49:55.707

我相信它可能是在严格寻找整数，并`.val()`返回一个-typeof- *string*

尝试做一个`parseInt( $('#size_max').val() );`

# c++ - QTableWidget 的 QHeaderView 样式表

> ID：12218669
> 
> 赞同：2
> 
> 时间：2012-08-31T15:45:26.737
> 
> 标签：c++, qt

我正在尝试使用样式表为我的 QTableWidget 自定义标题的外观。我正在这样做：

```
QHeaderView::section 
{
    background-color: transparent;
    color: black;
    font: 10pt "MS Shell Dlg 2";
    padding-left: 4px;
    border: 1px solid #6c6c6c;
} 
```

它在 Qt Designer 和预览模式下看起来不错，但是当我运行程序时，会使用默认颜色和字体创建标题。

Qt 版本 4.7.2，操作系统 Windows XP。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:25:47.110

好吧，我发现这个问题只有在我使用`QTableWidget`. 所以我找到的解决方案是`QTableView`改用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-06-27T08:14:38.700

我找到了解决这个问题的方法：在tablewidget的基类构造函数中：添加这个：ui->tableWidget->horizo​​ntalHeader()->setStyleSheet("");
然后它将起作用。
我不知道为什么，
但它有效。^_^

# php - 如何增加引导进度条？

> ID：12218670
> 
> 赞同：3
> 
> 时间：2012-08-31T15:45:26.977
> 
> 标签：php, javascript, twitter-bootstrap

我刚开始使用 .php/Java 有人可以告诉我如何让我的引导进度条根据用户设置的时间递增。

进度条：

代码：

```
<div class="progress progress-striped active">

<div id="progressbar" class="bar" style="width: 0%;"></div> 
```

用户输入示例： 代码：

设置秒数：

```
<input type="text" id="speed" value="10" /> 

<input type="submit" value="Start" onclick="doProgress();" /> 
```

Java 脚本{需要}：

代码：

```
 <script type="text/javascript">
 function doProgress()

 { 

 Idk :( Please help.

 };
 </script> 
```

(style="width: 0%;") 进度条值 100% 是否为最大值。

我希望使用我提供的这个元素，根据用户设置的值（以秒为单位）增加值：

```
<input type="text" id="speed" value="10" /> 
```

示例：用户输入 30 我希望进度条需要 30 秒才能达到 100%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:55:08.063

像这样的东西（未经测试）：

```
function doIncrement(increment) {
  w = parseInt(document.getElementById('progressBar').style.width);
  document.getElementById('progressBar').style.width= (w + increment) +'%';
}

var w
var speed = document.getElementById('speed').value;
var increment = (speed/100);
for(var x = 0; x<speed; x++)
{
  setTimeout(doIncrement(increment),1000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-28T14:09:06.140

该`setTimeout`方法（根据其他答案）是动画基于时间的进度的最常见方法。

But I've had a problem with `setTimeout` if the speed is fast or when I want to reset the bar from 100% to 0%, as the default Bootstrap css transitions lead to undesirable animation effects (i.e takes 0.6 seconds to return to 0%). So I suggest tweaking the transition styling to match the desired animation effect e.g

```
pb = $('[role="progressbar"]')
// immediate reset to 0 without animation
pb.css('transition', 'none');
pb.css('width', '0%');
// now animate to 100% with setTimeout and smoothing transitions
pb.css('transition', 'width 0.3s ease 0s');
var counter = 0;
var update_progress = function() {
  setTimeout(function() {
    pb.attr('aria-valuenow', counter);
    pb.css('width', counter + '%');
    pb.text(counter + '%');
    if(counter<100) {
      counter++;
      update_progress();
    }
  }, 5 * 1000 / 100); // 5 seconds for 100 steps
};
update_progress(); 
```

But if you're in the jQuery camp, then jQuery.animate is I think a neater approach as you can forget having to mess with css transition styling and counting steps etc e.g.

```
pb = $('[role="progressbar"]')
pb.css('transition', 'none'); // if not already done in your css
pb.animate({
  width: "100%"
}, {
  duration: 5 * 1000, // 5 seconds
  easing: 'linear',
  step: function( now, fx ) {
    var current_percent = Math.round(now);
    pb.attr('aria-valuenow', current_percent);
    pb.text(current_percent+ '%');
  },
  complete: function() {
    // do something when the animation is complete if you want
  }
}); 
```

I've put a demo and more discussion [on GitHub here](http://tardate.github.io/LittleCodingKata/javascript/progress_bars_bootstrap/index.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-29T06:49:23.430

我自己只是在学习引导程序，并想出了这个来推进它。正如其他答案中提到的，宽度 CSS 属性似乎是触发动画的原因，但我最初并没有注意到它并设置了相关的 aria 属性。如果 a11y 对您很重要，您可能希望确保设置宽度会导致其他相关属性得到正确更新，如果不是，则根据需要设置它们。

```
$( function() {
  var bar = $('div.progress-bar');
  var val = null;

  i1 = setInterval(function() {
    val = parseInt(bar.attr('aria-valuenow'));
    val += 10;
    console.log(val);
    if( val < 101) {
      bar.attr('aria-valuenow', val);
      bar.css('width', val + '%');
    } else {
      clearInterval(i1);
    }
  }, 1000);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:48:02.327

试试这个：

```
//Find the div you want to update
var divArray = document.getElementById('progressbar');

//Set the width style
divArray.style.width = '100%'; 
```

# java - 使用 @Schedule 注释的方法不适用于依赖项 jboss.ha:service=HASingletonDeployer,type=Barrier

> ID：12218673
> 
> 赞同：1
> 
> 时间：2012-08-31T15:45:40.393
> 
> 标签：java, cluster-computing, scheduler, ejb-3.1, stateless

我有一个集群应用程序，在 jboss 6.1.0.Final 中运行了 2 个节点。

我有一些无状态 bean 需要在预定时间执行一些任务。它使用 EJB 3.1 计时器服务。这是其中之一：

```
@Stateless 
public class MyBean implements MyBeanLocal,
    MyBeanRemote {

@Schedule(hour = "1", persistent = false)
public void doStuff() { //my code }
} 
```

直到这里，这完美地工作。

但由于我有 2 个节点，我需要仅在其中一个节点中执行 doStuff 方法，所以这是我的 META-INF/jboss.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss>
<enterprise-beans>
<session>
<ejb-name>MyBean</ejb-name>
<depends>jboss.ha:service=HASingletonDeployer,type=Barrier</depends>
</session>
</enterprise-beans>
</jboss> 
```

当服务器启动时，我看到 MyBean 仅在其中一个节点中创建。

```
installing bean: jboss.j2ee:ear=my-ear.ear,jar=my-jar-0.0.1-SNAPSHOT.jar,name=MyBean,service=EJB3
with dependencies:
and demands:
jboss-switchboard:appName=my-ear,module=my-module-0.0.1-SNAPSHOT,name=MyBean; Required: Create
jboss.ejb:service=EJBTimerService; Required: Described
jboss-injector:topLevelUnit=my-ear.ear,unit=my-jar-0.0.1-SNAPSHOT.jar,bean=MyBean; Required: Described
jboss.ha:service=HASingletonDeployer,type=Barrier; Required: Described
persistence.unit:unitName=my-ear.ear/another-jar-dao-0.0.1-SNAPSHOT.jar#my-entitymanager; Required: Described
and supplies:
...
Added bean(jboss.j2ee:ear=my-ear.ear,jar=my-jar-0.0.1-SNAPSHOT.jar,name=MyBean,service=EJB3) to KernelDeployment of: my-jar-0.0.1-SNAPSHOT.jar 
```

但是，由于在 META-INF/jboss.xml 上声明了依赖关系，doStuff 方法永远不会执行。我测试了从 META-INF/jboss.xml 中删除依赖项，并且该方法在预定时间执行，但它在两个节点中运行。我的需要是创建一个只在集群的一个节点上运行的计划方法。

更新：如果我在 META-INF/jboss.xml 上这样做：

```
<session>
 <ejb-name>MyBean</ejb-name>
 <!-- <depends>jboss.ha:service=HASingletonDeployer,type=Barrier</depends>  -->
</session> 
```

计划的方法仍然不在任何节点中运行。

但如果我这样做：

```
<!-- <session>
 <ejb-name>MyBean</ejb-name>
 <depends>jboss.ha:service=HASingletonDeployer,type=Barrier</depends>  
</session> --> 
```

该方法在两个节点中运行。

任何人都可以帮助我吗？谢谢。

# java - 在java中是否可以识别文件类型而不是文件或目录？

> ID：12218676
> 
> 赞同：1
> 
> 时间：2012-08-31T15:45:46.830
> 
> 标签：java, file-io

在 Unix 系统上，我们有 7 种不同的文件类型 下面来自“man ls”的片段

```
 Regular file        -
    Directory           d
    Character Device    c
    Block Device        b
    Local Domain Socket s
    Named Pipe          p
    Symbolic Link       l 
```

在 java.io.File 中，我们只有 isFile、isDirectory、isHidden 等方法在 java 中是否可以识别文件类型，而不仅仅是文件或目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:49:58.713

[java.nio.file.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)（来自 Java 7）方法支持文件的扩展属性。这为获取[POSIX 属性](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/PosixFileAttributes.html)提供了更大的灵活性。但是，我不支持区分这些文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:09:59.357

使用 Java7，您至少可以检查[符号链接](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isSymbolicLink%28%29)。您还可以检查路径是否是[常规文件](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isRegularFile%28%29)，但我不知道如果针对块设备或命名管道运行它会如何表现。

# c - 在C中有效地对点数组进行排序？

> ID：12218678
> 
> 赞同：10
> 
> 时间：2012-08-31T15:45:50.493
> 
> 标签：c, algorithm, sorting

我需要以一种特殊的方式对一个点数组（一个点是一个具有两种`float`类型的结构 - 一种 for`x`和一种 for ）进行排序。`y`

这些点必须进行排序，因此当它们被遍历时，它们会形成一个锯齿形图案，从最左上点开始**，**移动到**最右上点**，然后向下到**最左边的第二个点**，到**最右边的第二个点**，依此类推。

![插图](../Images/67bd7a874b5da5e9e87472a0c5b886b6.png)

我需要这个能够将任意多边形转换为三角带阵列，然后我可以使用 GLes 绘制。通过使用指针（即传递和重新排列指向点结构的指针）或直接复制和移动结构中的数据，**对这些点进行排序的最有效方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:52:53.640

我将 qsort() 与自定义 compare() 函数一起使用，正如@stefan 指出的那样，按 y 降序排序，然后为 x 交替（最大/最小）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:01:33.663

我强烈建议您使用[Delaunay Triangulation](http://en.wikipedia.org/wiki/Delaunay_triangulation)。[OpenCV](http://opencv.willowgarage.com/documentation/c/imgproc_planar_subdivisions.html?highlight=delaunay)（它在 C 中可用）有一个很好的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:09:21.670

我认为你没有给出明确的命令。例如，如果这些点看起来像这样，它们应该以什么顺序连接：

```
*

         *
                 *
*
    *
    * 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:46:53.527

您似乎向我们展示了您的原始问题的一个已经简化的版本，相信您正走在通往解决方案的正确道路上。我可能错了，但看起来不像你。

看来（根据您的其他问题判断）您最终正在寻找*triangulation*。而且，很可能是一个或多个*多边形的三角**剖分*（而不是一组独立的点）。如果是这样，我建议你看看一些基本的三角测量算法，比如基于单调分解的算法。您在此处提出的问题实际上看起来像是 [可能被误导的] 尝试做类似于单调分解的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:36:41.703

我建议直接从结构中移动数据。

点结构的大小只有 8 到 16 个字节（如果 float 为 8 个字节，则为 16 个字节）。如果您通过指针对数组进行排序，您将复制几乎相同数量的数据（或者如果浮点数是 4 字节，并且在 64 位系统上为 8 字节指针，则复制相同数量的数据）。

如果结构很大，我建议通过指针进行排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T16:45:05.310

您似乎正在尝试重新发明某种单调的多边形链。一些多边形三角测量方法在[wiki](http://en.wikipedia.org/wiki/Polygon_triangulation)和[这里](http://vterrain.org/Implementation/Libs/triangulate.html)有代码链接的简短描述

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T17:16:57.827

您应该首先找到点的中值（中间值）（基于水平值）。这会将点集分成左右两部分。接下来根据垂直值对 2 个集合进行排序。然后，您可以从每个集合的顶部进行迭代：从左侧集合中获取顶部元素，然后从右侧获取顶部元素......等等。

为了找到中位数，有一个基于快速排序的简短算法。但比快速排序更快。只需在中位数所在的部分递归（不像快速排序那样在两者上都递归）。

您应该能够以相反的方式进行操作：首先按垂直值排序，然后按水平拆分（当您有奇数点时，这可能会更好）。

# c++ - 如何从 std::list 中删除项目

> ID：12218680
> 
> 赞同：0
> 
> 时间：2012-08-31T15:45:59.640
> 
> 标签：c++, list

我的代码：

```
using namespace std;

class A{public: 
  int a; 
  A(int itemA) {a=itemA;}
};
class B:A{public:
  int b; 
  B(int itemA, int itemB) {a=itemA; b=itemB;}
};

class C{
  list<A> a;
  list<B> b;
  void transferAB(const A& pA, int itemb){
    a.remove(pA);
    b.push_back(B(pA.a, itemb));
  } 
```

我如何使这件事起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:50:28.330

`list`不知道如何比较你的对象。您需要`operator==`为您的类指定一个相等运算符 ( )。

您可以通过存储**指向**对象的指针来避免这种情况，并且`list`当您调用`remove`. 由于指针只是数字，所以比较没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:56:16.843

```
a.remove(pA); 
```

正如 Esthete 建议`operator ==`的那样，您需要重载或使用，即接收谓词并将谓词传递给它。[http://cplusplus.com/reference/stl/list/remove_if/](http://cplusplus.com/reference/stl/list/remove_if/)`A``remove_if`

# iphone - 如何创建像 TestFlight 这样的 beta 测试服务器？

> ID：12218681
> 
> 赞同：1
> 
> 时间：2012-08-31T15:46:02.407
> 
> 标签：iphone, testflight

我想为 iPhone 应用程序创建自己的测试服务器，因为将大型应用程序上传到 TestFlight 会花费太多时间。我的问题是：如果我使用开发配置文件构建 IPA，将其放在我自己的服务器上，用户可以从我的服务器下载并使用 iOS 设备安装它吗？如果用户可以，有什么特别的事情可以做存档吗？

以及如何收集像在 iOS 的 safari 中运行的 TestFlight 这样的设备信息呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:54:13.093

虽然它们不是一个操作方法，但这个 Stack Overflow 问题的答案应该让你知道你需要知道的大部分事情，我希望：

*   [TestFlight 是如何做到的？](https://stackoverflow.com/questions/4973244/how-does-testflight-do-it)

# c++ - Qt - 显示多条可选择的行

> ID：12218683
> 
> 赞同：0
> 
> 时间：2012-08-31T15:46:15.240
> 
> 标签：c++, qt, qtablewidget

我正在编写一个模拟图灵机的工具。

在这里，我有一个这样的机器的转换表

![在此处输入图像描述](../Images/e124d265e498470d710ea79bba6712f6.png)

双击单元格时，会弹出一个小对话框（这是一个自定义小部件，源自`QFrame`），应该允许编辑单元格的内容。一个单元格可能包含多个规则（`|q2, 3, R|`诸如此类），我希望那个小对话框显示这些规则。问题是用户应该能够添加和删除规则。起初，我想用`QLabel`s 来做这件事，这对于添加方面来说很好，但是如何删除现有规则呢？我计划让用户选择规则并单击“删除”，但我是否确保`QLabel`选择了整个规则 ( )？

还是我应该采取完全不同的方法来删除？就像让每个标签都有自己的复选框一样？

我想让它尽可能简单。例如，`QTableWidget`对于这个来说太“胖”了，我觉得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:04:54.910

您应该使用 QListWidget - 这将允许多行、多选，没有单元格或水平/垂直标题。

[http://qt-project.org/doc/qt-4.8/qlistwidget.html](http://qt-project.org/doc/qt-4.8/qlistwidget.html)

# html - 当网站被浏览时，图标不显示

> ID：12218686
> 
> 赞同：1
> 
> 时间：2012-08-31T15:46:32.960
> 
> 标签：html, css, dreamweaver

M 使用 DW 设计网站。我想在我的网站上添加一个图标，所以当我这样做并查看该网站时，它不会显示该图标。我使用 16 x 16 png 作为图像，下面给出了编码。我可能做错了什么。请帮我！

谢谢你。

```
<link rel="icon" type="image/png" href="favicon.png"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:52:49.610

Internet Explorer 不支持 PNG 图标。

你应该做的是`<link`像这样设置你的标签：

```
<link rel="shortcut icon" type="image/png" href="favicon.png" /> 
```

对于 IE 和旧版浏览器，还要在名为`favicon.ico`. 您可以使用[http://icoconverter.com/](http://icoconverter.com/)将您的 PNG 转换为 ICO。不要只是重命名`favicon.png`为`favicon.ico`并期望它起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:48:01.920

错误的文件扩展名..它应该是`.ico`而不是`.png`

去这里获取所有信息：

[http://tools.dynamicdrive.com/favicon/](http://tools.dynamicdrive.com/favicon/)

**编辑：**

尝试继续链接并将您的网站图标转换为`ico`

然后将此添加`<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">`到您的主页。

确保 favicon 存在于该目录中。

# java - 在 Java 中实现特殊的链表方法

> ID：12218697
> 
> 赞同：2
> 
> 时间：2012-08-31T15:46:55.173
> 
> 标签：java, data-structures, linked-list

是否可以在 Java 中创建一个链接列表，并能够在列表的中间（不仅仅是开头或结尾）的任何位置添加新链接 - 如果可能的话，无需在内存中复制粘贴列表的大部分以适应新链接的输入？

如果是这样，请发布您的示例！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:51:46.753

您可以使用 LinkedList 来执行此操作。

```
List<Integer> ints = new LinkedList<Integer>();
for (int i = 0; i <= 10; i++)
    ints.add(i / 2, i);
System.out.println(ints); 
```

印刷

```
[1, 3, 5, 7, 9, 10, 8, 6, 4, 2, 0] 
```

如您所见，它一直在列表中间添加条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:49:52.487

Java 中的[`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)类已经通过它的[`add(index, element)`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#add%28int,%20E%29)方法做到了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T15:58:20.183

在伪代码中，链接是一个很好的起点：

```
public LinkedList<E> implements List<E>{
    ...

    public void add(int index, E element){
        Node<E> current=findNodeAt(index);
        //add in your logic to insert this node at this location
        //probably something like (depending on your linking)
        element.setNext({current nodes next value})
        current.setnext(element);      
    }

    private Node<E> findNodeAt(index){
        //iterate through list until you reach the index or end of the list
        //then return that node
    }

    ...
}

public Node<E>{
    private Node<E> next;
    ... 

    Node<E> setNext(Node<E> next){
        Node<E> previousNext=next;
        this.next=next;
        return previousNext;
    }

    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:25:00.077

`LinkedList`实现“列表”接口，它具有您需要的添加方法：http: [//docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29)

# java - 从 Groovy 测试用例对 Java 类中的静态方法进行单元测试

> ID：12218699
> 
> 赞同：1
> 
> 时间：2012-08-31T15:47:10.307
> 
> 标签：java, grails, groovy, junit, mocking

我正在尝试用 groovy 为用 java 编写的类编写一个测试用例。Java 类（名称：Helper）中有一个静态方法，其中获取 HttpClient 对象并在其上调用 executeMethod。为了对这个类进行单元测试，我试图在常规测试用例中模拟这个 httpClient.executeMethod()，但不能正确模拟它。

下面是Java类

```
public class Helper{

    public static message(final String serviceUrl){   

        HttpClient httpclient = new HttpClient();
        HttpMethod httpmethod = new HttpMethod();

        // the below is the line that iam trying to mock
        String code = httpClient.executeMethod(method);

    }
} 
```

关于如何从 groovy 对这个静态方法进行单元测试的任何想法。由于 httpClient 对象是类方法中的对象，我如何在 groovy 测试用例中模拟这个对象？

这是我到目前为止的测试用例。我试图模拟为空，但没有发生......

```
void testSendMessage(){
    def serviceUrl = properties.getProperty("ITEM").toString()

    // mocking to return null   
    def mockJobServiceFactory = new MockFor(HttpClient)
    mockJobServiceFactory.demand.executeMethod{ HttpMethod str ->
        return null
    }

    mockJobServiceFactory.use {         
        def responseXml = helper.message(serviceUrl)

    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:51:40.357

您可以使用

```
HttpClient.metaClass.executeMethod = {Type name -> doSomething} 
```

您需要使用正确的`Type`即 String、Map 等声明闭包签名。

```
void testSendMessage(){
    def serviceUrl = properties.getProperty("ITEM").toString()

    // mocking to return null   
    HttpClient.metaClass.executeMethod = {HttpMethod str -> null}
    def responseXml = helper.message(serviceUrl)

} 
```

# php - Backbonejs 仅在 PHP JOIN 上获取一条记录

> ID：12218701
> 
> 赞同：0
> 
> 时间：2012-08-31T15:47:23.760
> 
> 标签：php, join, backbone.js, fetch

好的，所以我有一个响应 GET HTTP 请求的 php；这个 php 脚本调用数据库，并检索一组行。

```
$results = $db->pdoquery("SELECT * FROM posts JOIN users ON posts.user_id=users.id ORDER BY posts.cre DESC LIMIT 4");
    $json = json_encode($results);
    echo $json; 
```

现在，当我使用backbonejs '.fetch' 命令时，它只返回第一条记录，而不是四个。

如果我更改 php 脚本，我会得到所有四个，但我必须失去我的 JOIN

```
$results = $db->pdoquery("SELECT * FROM posts ORDER BY posts.cre DESC LIMIT 4");
    $json = json_encode($results);
    echo $json; 
```

谁能解释我做错了什么？

更新：php 页面打印的 JSON

```
[{"id":"7","post_name":"title","pretty_url":"link1","preface":"a preface 7","body_text":"a body","feat":"0","img":"\/img\/logo.png","cre":"2012-07-22","modi":"2012-07-18","user_id":"2"},{"id":"6","post_name":"title","pretty_url":"link","preface":"a preface 6","body_text":"a body1","feat":"0","img":"\/img\/logo.png","cre":"2012-07-21","modi":"2012-07-18","user_id":"2"},{"id":"5","post_name":"TestTitle 1","pretty_url":"testlink4","preface":"a preface 5","body_text":"a body 2","feat":"0","img":"\/img\/logo.png","cre":"2012-07-20","modi":"2012-07-16","user_id":"2"},{"id":"4","post_name":"TestTitle 1","pretty_url":"testlink3","preface":"a preface 4","body_text":"a body 3","feat":"0","img":"\/img\/logo.png","cre":"2012-07-19","modi":"2012-07-16","user_id":"2"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:44:27.817

我发现了问题。

Posts 和 Users 具有名称相同的列，主要是 'id'，并且由于这四个 post 记录具有相同的 user_id，因此将 'id' 列设置为相同的值。

Backbone 必须有内置的东西来跳过它认为是相同的记录或类似的东西。只需更详细地描述我需要的内容即可解决此问题。

不管修复它的代码都在下面

```
 $results = $db->pdoquery("SELECT 
        posts.post_name, posts.pretty_url, posts.preface, posts.img, posts.cre, posts.modi, users.username
        FROM posts 
            JOIN users 
                ON posts.user_id=users.id 
                ORDER BY posts.cre 
                DESC LIMIT 4");
    $json = json_encode($results);
    echo $json; 
```

感谢所有帮助过的人。

# java - java拆分中的简单正则表达式

> ID：12218707
> 
> 赞同：1
> 
> 时间：2012-08-31T15:47:38.047
> 
> 标签：java, regex, split

我有一个字符串`blah-*-bleh-*-bloh` ，我想将它拆分，`-*-`所以我尝试了（除其他外）：

```
res.split("/-\\*-/g"); 
```

但它不起作用。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:49:27.663

在java中，不需要`/`之前和`/g`之后：

```
String[] splittedArray = res.split("-\\*-"); 
```

# git - 与 git-scm book 相反，Git 提交先前暂存文件的未暂存更改

> ID：12218709
> 
> 赞同：0
> 
> 时间：2012-08-31T15:47:49.157
> 
> 标签：git, commit, git-commit, git-add

本书的部分：

[http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Staging-Modified-Files](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Staging-Modified-Files)

说如果我更改文件 A，运行 'git add A' 然后再次更改文件 A，在此文件上运行 'git commit'，则只会提交以前分段的更改。要提交未暂存的更改 - 再次添加文件，然后提交。

然而，经过一些测试，结果表明 git 提交了文件 A 的所有更改，即使是在文件最初暂存后所做的更改。

任何人都可以对这个问题有所了解吗？谢谢。

编辑：我没有使用 -a 选项看起来如果我为“git commit A”明确指定文件（我没有使用 -a 选项），它也会提交未暂存的更改。没有文件“git commit”的提交要求输入提交消息，然后按照书中描述的方式进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:58:35.163

您如何确定它“提交文件 A 的所有更改”？我无法在我的`git`. 重申我认为你在说的话，如果你遵循这个过程：

```
$ git add A                 #initial commit of A
$ git commit -m first
$ <modify A>
$ git add A                 #stage first set of changes
$ <modify A again>
$ git commit -m second      #without staging second modifications 
```

此时您应该看到的是第一组更改（而不是第二组更改）已提交。`git show HEAD:A`应该在您进行第二次修改之前显示文件。但是，第二次修改仍将在您的文件 ( `cat A`) 的工作副本中，并且`git status`应该报告 A 中有未暂存的更改。这正是我尝试复制它时得到的，并且应该是预期的。

如果这不是你所看到的，那么要么你做了与上面列出的不同的事情，要么`git`你正在运行的版本被破坏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:51:13.813

您可能`-a`在提交时添加了该选项，这会在提交之前对所有内容进行另一个添加。当您省略`-a`.

# asp.net - 在 HttpModule 中获取 Asp.net Web API 控制器上下文或操作上下文

> ID：12218711
> 
> 赞同：3
> 
> 时间：2012-08-31T15:47:59.050
> 
> 标签：asp.net, asp.net-mvc, routing, asp.net-web-api

我有一个 HttpModule 在执行 web api 控制器的操作之前对请求进行一些处理。我希望能够确定请求将执行哪些控制器/动作，以便我可以提前检查可能在控制器/动作上设置的一些属性。如何发现特定请求 URI 将调用的控制器/操作？

在 HttpModule 中，显然我可以从 RouteTable 中获取 RouteData——我如何使用它来找出将被调用的控制器和操作的类型（或者最好是方法信息，或者至少是方法名称）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:53:16.763

这是一个示例，说明如何获取`ActionDescriptor`和`ControllerDescriptor`来自`RouteData`：

```
 var routeData = RouteTable.Routes.GetRouteData(requestContext.HttpContext); 
    if (routeData == null) 
        return false; 
    var controllerName = (string)routeData.Values["controller"]; 
    var actionName = (string) routeData.Values["action"]; 
    var controller = ControllerBuilder.Current.GetControllerFactory().CreateController(requestContext, controllerName); 
    if (controller == null) 
        return false; 
    var controllerType = controller.GetType(); 
    var controllerDescriptor = new ReflectedControllerDescriptor(controllerType); 
    var actionDescriptors = controllerDescriptor.GetCanonicalActions(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:39:58.783

HttpModule 不是你应该做这些事情的地方。无论请求是否进入 ASP.NET Web API 管道，都会为每个请求执行一个 HttpModule。

您需要的是一个[消息处理](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)程序，它将像 HttpModule 一样用于 ASP.NET Web API 请求。

# google-maps-markers - 删除 Fluster2 集群

> ID：12218715
> 
> 赞同：0
> 
> 时间：2012-08-31T15:48:06.663
> 
> 标签：google-maps-markers

我正在使用 GMap API v3 和 Fluster2 创建一个带有集群标记的地图。添加标记并让它们根据缩放级别显示为集群，一切都很好。

但是，当需要清除所有标记以便添加新标记（基于用户输入）时，我遇到了问题。

```
while(overlays[0]){
   overlays.pop().setMap(null);
} 
```

我正在使用以下代码清除标记，不幸的是，它仅影响在所选缩放级别的群集中未找到的标记（覆盖）。

有谁知道我如何从地图中删除所有标记，这意味着所有当前标记（覆盖）显示在当前缩放级别以及在集群中找到的所有其他标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:16:59.017

我决定简单地创建一张新地图并摆脱旧地图。

# html - html5 对于业务应用程序是否足够健壮？

> ID：12218723
> 
> 赞同：2
> 
> 时间：2012-08-31T15:48:36.990
> 
> 标签：html

比如，我可以用 HTML5 编写一个业务强度应用程序，模仿我们当前的系统，其中包含许多高度交互的网格、自定义树等。

我们有一个用 C# WinForms 编写的很好的工作系统，其中部分在 WPF 中完成，并且最近开始为 iPad 编写一个自定义应用程序，通过 WCF 与我们的主要服务器主机进行通信。我们现在有一个用 C# 编写的非常快速的自定义网格，它可以通过 MonoTouch 编译为 Objective C，还有一个很酷的交互式饼图。

现在我的老板希望为 Android 构建一个版本，我在想我们是否真的不应该花时间创建一个可以在 iPad 和 Android 等效设备上运行的 HTML5 应用程序。

事情是 - 拿一个网格 - 我在 iPad 上的网格很快（可重复使用的单元格等） - 我如何从 html5 中的“数据集”类型源创建网格？我真的需要创建大量标签然后将它们提交给浏览器吗？像 jqwidgets 这样的第三方小部件是答案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:14:10.533

这有点轶事，但我的经验是 HTML5/JavaScript 在移动设备上还不够快（在 2012 年），特别是如果您要显示大量数据，尤其是您希望通过交互功能实现快速响应时间。再给它一年，如果随着移动设备的不断发展，这种说法变得过时，我不会感到惊讶。

移动 Web 开发目前肯定有其用途，例如，如果您想使用单个代码库针对大多数设备；如果您没有足够的开发资源并且愿意接受非本地体验；如果您没有本地开发所需的语言等方面的经验。

鉴于您已经完成了 iPhone 应用程序的工作，我的拙见是继续使用原生 Android 应用程序可能会更好——此时您将获得一个响应速度更快的应用程序来完成大约相同的工作量。

> 如何从 html5 中的“数据集”类型源创建网格？

根据网格包含的内容，您可以使用普通的旧 HTML 表格或使用 CSS 样式的其他元素的组合来完成。但实际上还有更多考虑因素——例如，它是否需要在小屏幕（例如，手机）或更大的屏幕（平板电脑）上工作。通常，您无法在小屏幕上真正适应整个网格，因此您最终得到的 UI 不再是真正的网格。您可以查看[jQuery Mobile](http://jquerymobile.com)等移动 JavaScript 框架，了解他们是如何做到的，甚至可以考虑在您自己的应用程序中使用该框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:09:39.937

各种 JavaScript 框架（例如 JQuery 和 Dojo）都具有相当高质量的移动设备特定小部件。看看[http://dojotoolkit.org/features/mobile](http://dojotoolkit.org/features/mobile)和[http://jquerymobile.com/](http://jquerymobile.com/)

这些与使用 ObjectiveC 和 Java 开发的本机应用程序有多接近？不完美，但也许足够好。您还可以在同一个应用程序中使用原生和 HTML 的组合，一些页面原生一些 HTML。我正在使用 IBM 的 Worklight 做这种事情，但是我愿意，我为 IBM 工作 ;-) 不管具体产品如何，我确实看到人们采用这种方法。

除了可移植性之外，使用 HTML 格式拥有大部分应用程序的另一个好处是无需通过应用程序商店即可交付更新版本 - 这提高了功能交付的敏捷性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:31:44.673

作为证据，我想说很多 Windows 8 的应用程序只是封装了 JS/CSS/HTML，并带有一些 Microsoft 提供的 API 以允许访问硬件/文件系统。

我不认为他们已经走到了使 Excel 2013 基于 JS 的地步……但是，话虽如此，他们已经走到了允许开发人员使用数据——这些小程序都将构建在“html5”之上（同样使用 MS-Office JS API）。

这不是一条容易走下去的路——人们希望 jQuery 成为这类事情的救星。如果您想拼凑一个解决方案，这正是 jQuery 不是您想要的。例如：

```
$(".table_cell").click(function () { alert(/*whatever*/); }); 
```

人们认为 jQuery 正在分配一个委托人来监听对任何包含`class="table_cell"`.

这真的不是它在做什么。它循环遍历每一个，并直接为每一个附加一个事件侦听器。人们怀念的正是这些小东西——像 Twitter 这样的人，他们不费心缓存对元素的引用，因为 jQuery 很容易将这些东西组合在一起。因此，您可以让 JS 始终接触（或作用于）数十或数百个单独的元素。

这对任何人都不好。

jQuery 一点也不差——它非常有帮助，作为一种低级结构，可以帮助避开浏览器的差异。它的一些插件也可以。我不能保证它们都是对所有事情的高性能答案。但是一些插件创建者了解如何维护响应良好且性能良好的程序。

哪些适合您的确切需求？谁知道，除了你。

他们会表现得完美而迅速吗？当然，这取决于很多不同的事情。

来自 C#，您可能会查看**AngularJS**之类的东西。Angular 本身使用 jQuery 的内部版本来解决 jQuery 解决的一些低级问题。但它允许数据绑定和非常简单的视图模板。 **Hammer.js**也是一个非常不错的手势跟踪库。

不过，我建议从那里构建您自己的框架，如果您希望它按照您希望的方式完成。除了你之外，没有人知道你的需求是什么，并且试图把东西塞进鞋盒，因为它是可用的，并不总是解决方案，不管不同的公司可能会怎么想......

您可以将大部分节点工作留给 Angular，您可以将手势感应留给 Hammer，您可以从 jQuery-lite 中提取一些其他基础知识（安装在 Angular 中的简洁 jQ，如果您没有jQ 在您的网站上）或 jQ 本身...

但它们只是工具而不是答案。

如果您缓存对元素的引用，而不是一遍又一遍地查询它们，委托事件，在 DOM 外（如果需要，在克隆节点上）进行大的结构更改，并且不要尝试处理JS 作为一种传统的重继承语言，你要注意如何以及何时使用 AJAX（调用的数量/频率与数据的大小——倾向于更少的调用）。

# c# - 从文件名中取出空格或将字符替换为其他内容

> ID：12218730
> 
> 赞同：0
> 
> 时间：2012-08-31T15:49:05.147
> 
> 标签：c#

我试图从一堆文件名中删除空格（目录中的pdf）。我尝试了以下方法。输入和输出目录都是文件夹浏览器对话框的

```
DirectoryInfo di = new DirectoryInfo(folderBrowserDialog1.SelectedPath);
foreach (var file in di.GetFiles())
{
     try
     {
        File.Copy(file.FullName, outputDir + @"\" + file.Replace(" ", "_"));        
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T15:53:26.970

从文件信息对象中获取文件名：

```
file.Name.Replace(" ", "_") 
```

用于`Path.Combine`将路径放在一起（跨不同系统更健壮）：

```
Path.Combine(outputDir, file.Name.Replace(" ", "_")) 
```

所以：

```
di = new DirectoryInfo(folderBrowserDialog1.SelectedPath);
foreach (var file in di.GetFiles()) {
  try {
    File.Copy(file.FullName, Path.Combine(outputDir, file.Name.Replace(" ", "_")));                     
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:53:32.127

试试这个 -

```
DirectoryInfo di = new DirectoryInfo(folderBrowserDialog1.SelectedPath);
foreach (var file in di.GetFiles())
{
    try
    {
        File.Copy(file.FullName, Path.Combine(outputDir, Path.GetFileName(file.FullName).Replace(" ", "_")));
    }
    catch { }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:55:15.833

```
File.Copy(file.FullName, outputDir + @"\" + file.Name.Replace(" ", "_")); 
```

# gwt - 如何在 GWT 中对小部件进行排序？

> ID：12218731
> 
> 赞同：0
> 
> 时间：2012-08-31T15:49:13.387
> 
> 标签：gwt, sorting

我有一个需要排序的小部件列表。我想为这些小部件列表创建一个容器，以便在每次添加新小部件时对它们进行重新排序。我该怎么做？

我可以看到以下方式：

1.  一种直接的方法是将它们放入 arraylist 并通过 Comparator 排序，但是在添加新元素后，我们必须从容器中删除所有列表并以新顺序再次添加它们。
2.  使用一些分类容器。我只为此找到了 CellTable。但实际上我不需要它丰富的功能——我只有一列，不需要对用户事件进行排序，只有在添加或删除新元素时——所以我的用例中还有其他东西可以利用吗？

GWT 2.4

PS 实际上，我正在寻找可以表达为“由小部件集合支持的小部件容器”的东西，即我更改集合 - 容器更改其内容，我该如何实现，或者我在哪里可以找到它？

PPS 小部件可以不同，这就是为什么我认为我不能轻松使用 CellTable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:39:22.157

添加新小部件后，没有直接的方法可以重新排序 DOM 中的元素。附加小部件后，您不能仅移动它们（更改它们在文档结构中的位置）而不分离和重新附加。好吧，使用绝对定位，您只需更改左上角坐标即可移动项目，如果您需要的话。

当我必须对 TreeItem 元素进行排序时（没有可用的内置排序方法），我有一个类似的问题需要解决。作为一种解决方法，我将所有子项读入列表并同时将它们从父小部件中删除，然后使用 Comparator 对这些项目进行排序并将它们从排序列表中添加回父项。一切都在一个 sort() 方法中，它封装了所有必需的功能并简化了对这段代码的理解。

> “由小部件集合支持的小部件容器”

我想了解一个这样的，它也可以在运行中进行排序和重新连接。但它仍然会得到我假设的相同分离连接的支持。我建议你自己写一个，这将满足你的特定需求。您需要 Tree 或 FlowPanel 或其他任何东西 - 您可以扩展它并根据上下文添加 sort() 逻辑。并相应地覆盖 add() 方法。所以，你的第一个选择对我来说似乎是一个可能的解决方案。

# c - 复制指针有什么用，然后返回第一个

> ID：12218736
> 
> 赞同：0
> 
> 时间：2012-08-31T15:49:50.647
> 
> 标签：c, pointers

我对以下功能有 3 个问题。我将它们标记为代码中的注释。

1.  为什么我们将`dest`（`malloc`ed memory）指向的char项复制到`dPtr`，然后在最后（处理输入字符串后）`return dest`。操作起来岂不是更简单`dest`。

2.  这个函数基本上只有在里面有破折号的情况下才会反转单词。标记的命令是否`*subword = '\0';`将`NUL`字符放置在先前增加的位置（in `strncpy`） -`subword+1`或`subword`？

3.  这个函数是否容易出现一些缓冲区溢出或其他不良行为？现在它没有给我任何错误，但我想我只是不知道如何调试它。

* * *

`len`是`strlen(word)`

```
char* function(char* word, int len)
{
    char* subword = NULL;
    char* dest;
    char* dPtr;
    size_t n;

    dest = malloc(len+1);
    if (dest == NULL) return NULL;

    dPtr = dest;               /* [1] */

    while((subword = strrchr(word, '-'))!= NULL) {

        n = len - (subword-word) - (dPtr-dest);
        if (n-1 > 0)
            strncpy(dPtr, subword+1, n-1);

        *subword = '\0';      /* [2] */
        dPtr += n-1;
        *dPtr = '-';
        dPtr++;
    }
    strncpy(dPtr, word, len - (dPtr-dest));
    dest[len] = '\0';
    return dest;              /* [1] */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:53:52.127

> 为什么我们将dest（malloced memory）指向的char item复制到dPtr，然后最后（处理完输入字符串后）返回dest。在dest上操作不是更简单吗？

因为在函数结束时，`dPtr`不会指向`dest`字符串的开头，所以如果该指针是`dest`它本身，我们就不会返回我们构建的整个目标字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:55:58.113

1.  如果`dest`直接修改，函数返回的值就不一样了。所以你需要通过一个临时指针。
2.  `\0`字符被放置在`*subword`（而不是字符`-`）的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:04:25.940

1.  `dPtr`用于在字符串中移动并对其进行修改。`dest`被保留为修改后的字符串的开头，最终是函数的返回值。在每次循环迭代结束时，`dPtr`将指向修改字符串的结尾，并用于每个连续的`strncpy`. 最终，该函数返回一个修改后的字符串，并且`dest`需要跟踪它的开始。

2.  `subword`大概是空终止的，因此只有字符 in`subword`将被复制到`strncpy`循环内的结果中，但这实际上对于使用`strncpy`. 该函数在字符串中向后移动以查找破折号。对于每个命中，`subword`是下一个以破折号分隔的子字符串。*子字符串是原始字符串中*的一块内存，它不是以空值结尾的。如果您正在使用，`strcpy`那么您需要空终止符`subword`，但是由于您使用`strncpy`的是空终止符，因此没有必要：只需注意将您的`n`值作为`strncpy`限​​制。此代码空终止`subword` *到位*，即通过在原始字符串参数中粘贴空字符。这导致＃3：

3.  至于不希望的行为，该函数通过修改原始字符串参数来工作——它将那些空终止符`subword`放入源字符串中——即使它为修改和返回的字符串保留自己的缓冲区。

最后，代码可以不用`dPtr`操作`strncat`而不是`strncpy`.

# c - LPC12xx I2C 向量到服务例程

> ID：12218748
> 
> 赞同：1
> 
> 时间：2012-08-31T15:50:29.033
> 
> 标签：c, embedded

我在 C 中实现“服务例程的向量”时遇到了一些问题。

现在我实现了 I2C 接口的 IRQ-Handler，如下所示：

```
 void I2C0_IRQHandler(void)
    {
        statusCode = LPC_I2C->STAT;
        switch ( statusCode ) { (...) }
    } 
```

对于许多状态代码，这很慢，因为必须访问所有案例。

LPC12xx 微控制器的用户手册给出了提示：

> 如果状态码用作服务例程的向量，则例程会被八个地址位置所取代。8 个字节的代码对于大多数服务例程来说已经足够了

所以我应该编写一些代码大小正好为 8 字节的处理函数，并将它们放在正确的内存位置：

```
0xABCDEF00: handler_for_code_0x00
0xABCDEF08: handler_for_code_0x08
(...)
0xABCDEF90: handler_for_code_0x90 
```

在中断处理程序中我

1.  将状态码添加到内存偏移量（此处为 0xABCDEF00）
2.  将此地址转换为函数指针
3.  并调用该函数。

我有这个权利吗？我怎么能在C中实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:11:15.637

在 C 中执行此操作会很困难。我可以想到两种解决方案：

(1) 使用 asm 创建 8 字节处理函数表，其中每个处理函数只是到 C 函数的跳转，例如

```
org 0xABCDEF00
jmp handler_for_code_0x00
org 0xABCDEF08
jmp handler_for_code_0x01
...
org 0xABCDEF90
jmp handler_for_code_0x1f 
```

(2) 不要使用向量中断，而是保留您当前的方案，但使用函数指针创建一个跳转表（这假设您的编译器还不够聪明，无法从您的 switch 语句生成跳转表），例如

```
typedef void (*handler_fn)(void);

static void handler_for_code_0x00(void) { ... }

static void handler_for_code_0x01(void) { ... }

...

static void handler_for_code_0x1f(void) { ... }

static void handler_for_code_unused(void) { ... }

const handler_fn handler_table[NUM_STATUS_CODE] = {
    handler_for_code_0x00,
    handler_for_code_0x01,
    handler_for_code_unused,
    handler_for_code_0x03,
    handler_for_code_0x04,
    ...
    handler_for_code_0x1d
    handler_for_code_unused,
    handler_for_code_0x1f
};

void I2C0_IRQHandler(void)
{
    statusCode = LPC_I2C->STAT >> 3 ;  // Get table index
    handler_table[statusCode]();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:57:39.470

您如何确定`switch`随着案件增加而放缓？

大多数编译器会生成一个确定性的跳转表，当然不会“访问”每种情况。通过确保案例在数字上是连续的，而不是稀疏地分开（即值之间没有间隙），您可以帮助编译器生成有效的代码。

只有 32 种可能的状态代码，所以一个包含所有代码的案例的详尽开关（即使案例是空的）可能并不令人望而却步。的前三位`STAT`未使用，因此如果您首先将状态右移三位以使状态值从零开始，这也可以使编译器生成更高效的代码。事实上，我希望它生成一个与@Dill 的建议等效的跳转表（这将是我的建议）。

以下是一个惯用的示例，大多数编译器都对其进行了简单优化，只需将代码添加到您明确想要处理的那些情况。如果您的编译器没有从中生成确定性代码，请尝试使用编译器优化级别进行试验。但是，如果它不能做到这一点，我会考虑使用不同的编译器！

```
void I2C0_IRQHandler(void)
{
    switch( LPC_I2C->STAT >> 3 ) 
    { 
        case 0x01 :
            break ;
        case 0x02 :
            break ;
        case 0x03 :
            break ;
        case 0x04 :
            break ;
        case 0x05 :
            break ;
        case 0x06 :
            break ;
        case 0x07 :
            break ;
        case 0x08 :
            break ;
        case 0x09 :
            break ;
        case 0x0a :
            break ;
        case 0x0b :
            break ;
        case 0x0c :
            break ;
        case 0x0d :
            break ;
        case 0x0e :
            break ;
        case 0x0f :
            break ;
        case 0x10:
            break ;
        case 0x11 :
            break ;
        case 0x12 :
            break ;
        case 0x13 :
            break ;
        case 0x14 :
            break ;
        case 0x15 :
            break ;
        case 0x16 :
            break ;
        case 0x17 :
            break ;
        case 0x18 :
            break ;
        case 0x19 :
            break ;
        case 0x1a :
            break ;
        case 0x1b :
            break ;
        case 0x1c :
            break ;
        case 0x1d :
            break ;
        case 0x1e :
            break ;
        case 0x1f :
            break ;
    }
} 
```

# windows-phone-7 - 在 Windows Phone 7 模拟器上进行调试会导致 Internet 连接丢失

> ID：12218750
> 
> 赞同：0
> 
> 时间：2012-08-31T15:50:49.763
> 
> 标签：windows-phone-7

我目前正在尝试开发一个 Windows Phone 7 应用程序和相应的 REST Web API 项目。我遇到了模拟器与 API 对话的问题。在使用 JQuery 和 Fiddler 进行测试后，我发现模拟器正在失去与我的系统的互联网连接。

我想知道是否其他人已经看到了这个问题并且可以推荐一些东西。目前，我能找到的唯一解决方法是重新启动我的整个机器，这不会让开发变得有趣或高效。如果有人可以推荐任何东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:55:30.753

Fiddler 在运行时会创建一个代理。必须重置主机的 Internet 选项，它通常会恢复工作

# android - 旋转期间处理片段

> ID：12218751
> 
> 赞同：0
> 
> 时间：2012-08-31T15:50:58.203
> 
> 标签：android, android-fragments, android-activity, android-fragmentactivity

我之前完成了很多片段，但它们都在扩展一些现有片段，现在这是一个相当/肮脏的测试，我只是设置列表片段及其适配器，但我想摆脱正在发生的这种烦恼并且会想知道什么是最好的方法。

这是我的 FragmentActivity 的 onCreate：

```
 @Override
    protected void onCreate(Bundle savedInstances) {
    super.onCreate(savedInstances);
    mListFrag = new ListFragment();
    getSupportFragmentManager().beginTransaction().add(android.R.id.content, mListFrag).commit();
    getSupportLoaderManager().initLoader(13, null, this).forceLoad();
    } 
```

简单的东西，实例化一个新的 ListFragment，将它添加为我的活动的主框架并启动我的光标加载器。

在游标加载器上，完成后：

```
 @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

    if (mAdapter == null) {
        mAdapter = getCallLogCursorAdapter(cursor);
        mListFrag.setListAdapter(mAdapter);
    } else {
        Cursor oldCursor = mAdapter.swapCursor(cursor);
        if (oldCursor != null)
        oldCursor.close();
    }
    } 
```

再次，简单的东西，如有必要，创建一个适配器，如果不是我只是交换光标。

所有这些在第一次运行时都可以正常工作，但是当我旋转设备时，我得到了旋转列表以及视图中间的进度条。似乎不知何故有两个碎片一个在另一个之上。我试着`mListFrag.setRetainInstance(true);`让它不显示进度条，但仍然有两个片段一个在另一个之上，一个接收滚动列表的触摸，另一个保持静态。

我没有覆盖任何其他活动 onSomething() 回调。

我不会费心做太多复杂的方法，因为我正在测试应用程序的数据端，这只是为了快速查看数据库/加载器/内容提供程序是否都工作正常。UI甚至还没有。

有任何想法吗？？

**编辑：**

我看到了一个不同的问题，使用替换而不是在片段上添加，它有点工作但不是真的。它解决了片段本身内部的所有问题，但是当我单击返回并转到上一个活动时，你猜？不确定的进度条位于与这些列表片段无关的活动中间。

想法？也许我应该将这个片段粘贴到布局 xml 中，但因为它是测试，所以我避免为它们创建资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:31:27.850

**在ListFragment**中初始化加载器不是更好吗？例子：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    adapter = new MyCursorAdapter(getActivity(), null);
    setListAdapter(adapter);
    getLoaderManager().initLoader(0, null, this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:05:29.083

再一次，我为这个没用的帖子上的社区感到抱歉。

上一个活动（在后台堆栈上的那个）也使用了 ListFragment，我没有注意到。所以之前的活动是进行 .add 和复制片段。使用

```
 getSupportFragmentManager().beginTransaction().replace(android.R.id.content, mListFrag).commit(); 
```

在**所有**活动中解决了这个问题。

# function - 致命错误：在非对象上调用成员函数 getPermissionKeyByHandle()

> ID：12218754
> 
> 赞同：0
> 
> 时间：2012-08-31T15:51:26.877
> 
> 标签：function, php, member

您好，我在我的网站 www.csvc.nl 收到以下消息

致命错误：在 /var/www/vhosts/csvc.nl/httpdocs/cms/updates/concrete5.6.0/concrete/core/models/permission/response.php 中的非对象上调用成员函数 getPermissionKeyByHandle()第 53 行

PHP代码是：

```
 <?php 
    defined('C5_EXECUTE') or die("Access Denied.");
    class Concrete5_Model_PermissionResponse {

protected $object;
protected $allowedPermissions = array();
protected $customClassObjects = array();
protected $category;
static $cache = array();

public function setPermissionObject($object) { 
    $this->object = $object;
}
public function getPermissionObject() {
    return $this->object;
}
public function setPermissionCategoryObject($category) {
    $this->category = $category;
}

public function testForErrors() { }

public static function getResponse($object) {
    $r = PermissionCache::getResponse($object);
    if (is_object($r)) {
        return $r;
    }

    $category = PermissionKeyCategory::getByHandle(Loader::helper('text')-        >uncamelcase(get_class($object)));
    if (!is_object($category) && $object instanceof Page) {
        $category = PermissionKeyCategory::getByHandle('page');
    }
    $txt = Loader::helper('text');
    $c1 = get_class($object) . 'PermissionResponse';
    if (!class_exists($c1)) {
        $c1 = 'PagePermissionResponse';
    }
    $pr = new $c1();
    $pr->setPermissionObject($object);
    $pr->setPermissionCategoryObject($category);

    PermissionCache::addResponse($object, $pr);

    return $pr;
}

public function validate($permission, $args = array()) {
    $u = new User();
    if ($u->isSuperUser()) {
        return true;
    }

    $pk = $this->category->getPermissionKeyByHandle($permission);
    if (!$pk) {
        print t('Unable to get permission key for %s', $permission);
        exit;
    }
    $pk->setPermissionObject($this->object);
    return call_user_func_array(array($pk, 'validate'), $args);
}

public function __call($f, $a) {
    $permission = substr($f, 3);
    $permission = Loader::helper('text')->uncamelcase($permission);
    return $this->validate($permission, $a);
} 
```

}

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:42:35.373

我在不完整的 5.6.0 升级中遇到了类似的问题。

Concrete 5 有[核心升级故障排除指南](http://www.concrete5.org/documentation/how-tos/developers/troubleshooting-concrete5-updates/)

对我来说，我只需要在我的网站上执行此操作：[http](http://example.com/index.php/tools/required/upgrade) ://example.com/index.php/tools/required/upgrade并使用升级按钮。

仅供参考，这将条目添加到 PermissionKeyCategories 和其他表（存在，但为空）。

# c# - Mysql Ref Cursor 与 Mysql ADO.NET 提供程序

> ID：12218761
> 
> 赞同：1
> 
> 时间：2012-08-31T15:51:47.033
> 
> 标签：c#, mysql, ado.net, asp.net-mvc-4

[我在这里](https://stackoverflow.com/questions/273929/what-is-the-equivalent-of-oracles-ref-cursor-in-mysql-when-using-jdbc)读到，您可以使用 MySql 的 JDBC 驱动程序从存储过程中隐式返回一个引用。我正在使用 MVC 4 项目，并且正在使用 MySql 数据库来存储客户数据。

执行存储过程后，如何从 MySqlCommand 引用或访问隐式 ref 游标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T22:58:49.507

运行`ExecuteReader`您的存储过程数据库命令，您将得到一个遍历“隐式游标”的数据读取器，就像读取`SELECT`不在过程中的正常结果一样。

# windows-8 - 无法从 FileSavePicker 检测到选定的 FileTypeChoice

> ID：12218764
> 
> 赞同：2
> 
> 时间：2012-08-31T15:52:06.433
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store

我想让用户在选择文件类型时选择保存选项。选择工作正常，如下例所示。但是，在用户选择要保存的文件类型后，我还没有找到检查他选择的类型的可能性。

*请注意：两种文件类型选择具有相同的扩展名。两者的区别在于显示名称。*

```
var fsp = new FileSavePicker();

fsp.FileTypeChoices.Add("my file type", new List<string> {".extension"});
fsp.FileTypeChoices.Add("my file type (special)",new List<string>{".extension"});

StorageFile sf = await fsp.PickSaveFileAsync();

// How to know here which FileTypeChoice the user has selected 
```

有谁知道如何获得选定的 FileTypeChoice？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:07:41.320

我不认为你可以。这里的问题是两者之间的唯一区别是显示名称。我强烈建议使用类似但不同的文件扩展名。你在这里有一个没有任何证据的区别。这使得系统或用户都无法区分 A 类和 B 类。

# javascript - jQuery - 用于切换内容的自定义插件

> ID：12218765
> 
> 赞同：0
> 
> 时间：2012-08-31T15:52:09.310
> 
> 标签：javascript, jquery

我刚刚做了我的第一个 jQuery 插件，它隐藏了太长的内容。

[您可以在http://jsfiddle.net/denislexic/bT4dH/6/](http://jsfiddle.net/denislexic/bT4dH/6/)查看小提琴。

当您检查并单击“...”时，您会注意到第一个切换了三次，第二个切换了两次，第三个是正确的（所以只有一次）。

我不知道它为什么这样做。我试过`e.preventDefault()`,`stopPropagation()`等。似乎没有任何效果。

这是似乎是问题的代码：

```
 $("." + opts.clickZoneClass).on("click", function (e) {
    _debugger(1);

    var element = $(this).parent('div').children('div.status');

    // I know you can use is(':visible'), but it doesn't work in Internet Explorer 8 somehow...
    if (element.hasClass('open')) {
        _debugger(2);
        element.animate({
            height:element.attr('data-toggle')
        }, 'fast');
        //$(this).html();
        element.removeClass('open');
    } else {
        _debugger(3);
        element.animate({
            height:element.attr('data-height')
        }, 'fast');
        element.addClass('open');
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:21:10.470

这是因为您在 $.each 循环中执行上述代码。如果您提取绑定代码并在插件运行良好后运行它。

我只是将其拉出并移至文档就绪功能以进行说明...

[http://jsfiddle.net/bT4dH/10/](http://jsfiddle.net/bT4dH/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:24:16.690

我猜当您迭代元素时，click 事件不止一次绑定。要克服这个问题，只需在点击之前添加取消绑定方法，即

```
$("." + opts.clickZoneClass).unbind().on("click", function (e) {
    // existing stuff
}); 
```

这将解决您的问题。

# objective-c - Objective-C - 块和内存管理？

> ID：12218767
> 
> 赞同：6
> 
> 时间：2012-08-31T15:52:25.380
> 
> 标签：objective-c, memory-management, objective-c-blocks

```
__weak MyClass *selfReference = self;

dispatch_async(dispatch_get_main_queue(), ^{
        [selfReference performSomeAction];
    }); 
```

*   什么时候需要传递对块的弱引用？
*   此规则是否适用于 dispatch_async 以及自定义块？
*   块是复制其中使用的 iVar 还是保留它们？
*   谁拥有在块内初始化的变量？谁应该释放他们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T16:13:00.207

1, 2) 块在其中保留对象指针（任何块，dispatch_async 块都没什么特别的）。这通常不是问题，但可能导致保留周期，因为块可以与所有者对象相关联，并且该所有者对象（通常`self`）可能被块保留。在这种情况下，您应该使用弱变量，然后将其重新分配给强捕获：

```
__weak MyClass *weakSelf = self;
self.block = ^{
    MyClass *strongSelf = weakSelf;
    ...
    [strongSelf ...];
    [strongSelf.property ...];
    [strongSelf->iVar ...];
 } 
```

*注意：如果您直接访问 iVar，编译器会将其转换为 self->iVar 并因此保留 self！*

3）块只保留指针，它们不复制它们。

4) 在块内创建的变量属于该块，当该块超出范围时将被释放。

# iphone - XCode 在 uitableview 之上创建一个 uiview

> ID：12218772
> 
> 赞同：1
> 
> 时间：2012-08-31T15:52:51.433
> 
> 标签：iphone, ios, xcode, uitableview, uiview

我遇到了一些问题，想知道是否有人可以提供帮助。

我一直使用故事板，所以我不擅长以编程方式创建 UIView。

基本上，我从 API 加载数据并将其显示在 UITableView 中。问题是，在我的应用程序的一个部分，加载数据至少需要 10 秒，因为它从 API 加载了 10 种不同的东西。（这必须使用单独的调用）。我使用 1 秒的睡眠，以免每秒对 API 进行太多调用（因此加载需要这么长时间）。这是我的应用程序不可或缺的。

我已经实现了一个计数，每次调用后都会增加。现在我希望做的就是创建一个带有标签和进度条的 UIView 来说明它正在加载以及加载多少。这必须显示在表格视图上。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:46:50.290

我这样做：

1 - 创建一个 UIView 子类，其中包含所有视图子元素的出口。

2 - 创建一个 xib 文件。将顶视图的类更改为您的 UIView 子类的名称。将所需的所有元素添加到视图中，然后将最顶层视图的插座连接到元素。文件的所有者保持空白且未使用。

3 - 在我想使用视图的视图控制器中添加：

```
 NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView"
                                                         owner:self
                                                       options:nil];
    MyCustomView *myCustomView = [nibContents objectAtIndex:0]; 
```

然后您可以将自定义视图添加到您的表格视图中。我可能会在视图控制器中添加一个属性并将自定义视图分配给它，以便我可以使用 self.myCustomView 访问自定义视图。

# php - mysqli::query() 在选择查询时返回 true

> ID：12218775
> 
> 赞同：3
> 
> 时间：2012-08-31T15:53:30.450
> 
> 标签：php, mysql

我正在尝试使用 MySQL 创建一个队列（我知道，真丢脸！）。我设置它的方式是进行更新以在队列项目上设置接收器 ID，在更新发生后，我通过接收器 ID 选择更新的项目。

我面临的问题是当我查询更新然后进行选择时，选择查询返回 true 而不是结果集。当提出快速数量的请求时，这似乎会发生。

有谁知道为什么会这样？

提前致谢。

架构：

```
CREATE TABLE `Queue` (
  `id` char(11) NOT NULL DEFAULT '',
  `status` varchar(20) NOT NULL DEFAULT '',
  `createdAt` datetime DEFAULT NULL,
  `receiverId` char(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

出队：

```
update `'.self::getTableName().'`
set
    `status` = 'queued',
    `receiverId` = '%s'
where
    `status` = 'queued'
    and `receiverId` is null
order by id
limit 1;

select
    *
from 
    `'.self::getTableName().'`
where
    `receiverId` = \'%s\'
order by id
desc limit 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:28:53.117

这听起来像是某种竞争条件。您正在使用 MyISAM，因此可能会推迟更新（特别是如果该表上有大量流量）。

`true`返回表明您的查询`select`已正确完成，但返回的结果集为空（无行）。如果发生这种情况时您的逻辑是等待 50 毫秒，然后再试一次，您可能会发现一切正常。

*编辑*：您可以尝试在执行 UPDATE 之前锁定表，直到您完成最后一次 SELECT。但这可能会破坏应用程序其他部分的性能。最好的办法是让您的应用程序在面对竞争条件时保持健壮。

# arrays - C# 方法参数作为具有特定大小和索引名称的数组？

> ID：12218780
> 
> 赞同：0
> 
> 时间：2012-08-31T15:53:34.227
> 
> 标签：arrays, visual-studio-2010, c#-4.0, parameters, indexing

我可以在 C# 中定义一个接受特定大小的对象数组的方法，并且为了额外的“乐趣”命名数组中的每个索引，以便在编写调用方法时，当我开始键入此方法时，会弹出 XML 工具提示将显示每个索引应该代表什么？

我需要这个的原因是因为我正在创建一个通用包装函数，该函数动态调用在运行时加载的程序集中的方法，并且我想要一种调用和传递参数的好方法。

我理解利弊，但这确实有助于在很多地方减少类似的代码。

提前致谢。

**编辑**

为避免混淆：

一切都按原样工作，但目前我有 (string param1, string param2) 之类的参数，然后我必须手动将其转换为数组，但我想做一些类似 (object[2] params) 但有 XML 注释显示每个索引应该代表什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:21:40.877

好吧，根据对这个问题的评论和我自己的研究，这似乎是不可能的。我对 XML 注释进行了格式化，尽管参数应该是什么，并且不会使 XML 注释的大小变大，但调用此方法的人可以清楚地看到它。它并没有真正解决大小问题，但如果用户应该足够清楚发生了什么。也许这将在未来对其他人有所帮助。

![XML 格式](../Images/aeff689aa207dbf681cf56023ad6d1cb.png) 下面的评论，以便人们可以根据需要复制和粘贴：

```
/// <summary>
/// Summary of the method, which is seperated nicely from below in tool tip
/// </summary>
/// <param name="parameters">
/// (
/// <c>String </c><param name="paramOne" />, 
/// <c>Int </c><param name="paramTwo" /> 
/// )
/// </param> 
```

# windows - mingw make 正在显示版本并退出

> ID：12218781
> 
> 赞同：0
> 
> 时间：2012-08-31T15:53:38.513
> 
> 标签：windows, makefile

在使用 cmake 生成 mingw makefile 后，我正在尝试制作 fltk 1.3.x r9678。运行 make 时，会显示 windows 版本和版权信息，而不是编译 fltk。我正在使用最新版本的 mingw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T15:21:47.663

我刚刚使用 MinGW 构建了 FLTK 1.3.2，无需创建自己的 makefile。以下是我的笔记，括号内有一些评论：

1.  开始菜单 - 所有程序 - MinGW 文件夹 - MinGW shell（启动 MinGW shell）
2.  cd 到 fltk-1.3.2（在 MinGW shell 中将目录更改为 FLTK 的根文件夹）
3.  make clean （如果有的话，清除以前的错误构建）
4.  LDFLAGS="-static-libgcc -static-libstdc++" ./configure --enable-threads --enable-localjpeg --enable-localpng --enable-localzlib （配置它为 MinGW 构建）
5.  制作
6.  进行安装

希望这对将来的其他人有所帮助。

# sublimetext2 - 为 Sublime Text 2 中的无干扰编辑设置不同的字体和颜色

> ID：12218784
> 
> 赞同：9
> 
> 时间：2012-08-31T15:53:44.663
> 
> 标签：sublimetext2

Sublime Text 2 带有使用全屏布局的无干扰编辑模式。全屏布局为使用不同样式用于不同目的留下了空间……例如，在阳光下使用具有较大像素站点的高对比度字体在您的计算机上打字。

Sublime Text 2 是否提供了仅为无干扰编辑模式自定义颜色和字体的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:00:57.403

是的，您可以在以下位置编辑 Distraction Free 设置：首选项 > 设置 - 更多 > Distraction Free - 用户。默认设置为：

```
{
    "line_numbers": false,
    "gutter": false,
    "draw_centered": true,
    "wrap_width": 80,
    "word_wrap": true,
    "scroll_past_end": true
} 
```

您可以添加“color_scheme”和“font_face”。就像这样：

```
{
    "line_numbers": false,
    "gutter": false,
    "draw_centered": true,
    "wrap_width": 80,
    "word_wrap": true,
    "scroll_past_end": true,
    "color_scheme": "Packages/Theme - Aqua/Color Schemes/Espresso Aqua.tmTheme",
    "font_face": "Bitstream Vera Sans Mono"
} 
```

# debugging - 无法识别错误的来源 - 假设：十进制格式冲突

> ID：12218787
> 
> 赞同：1
> 
> 时间：2012-08-31T15:53:49.693
> 
> 标签：debugging, plsql, db2

在执行 DB2 ( **V8** ) 存储过程时，我收到以下错误：

**SQL0304N 无法将值分配给主变量，因为该值不在主变量的数据类型范围内。SQLSTATE=22003**

我没有设置任何类型的跟踪或特定的错误处理，并且由于错误只发生在我不允许使用的客户验证环境中，所以我没有太多选择，只能再次分析我的代码。

这是我当前分析的结果。谷歌帮不上什么忙……

我的“10 页”过程在一组数据上创建了一个 CURSOR，通过它并计算每个元素的值以将其插入表中。

我已经（希望）检查了我所有的变量类型与用于填充它们的数据类型以及目标表的数据类型，我没有看到任何冲突。

由于有很多十进制数、乘法和加法，我唯一的假设是计算值对于定义的变量来说变得太大了。谁能确认那将是“正确的错误”？如果计算生成的小数点后的位数大于目标变量类型所允许的位数（例如十进制（6,2）中的 100000.123），它是否也适用？

我还试图找到一种通过客户端调试 db2 pl sql 的方法，但我没有找到任何解决方案。如果你有什么建议...

非常感谢您提供任何线索:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:14:29.183

我自己回答...

首先，我的最后一个问题 => 我没有找到通过客户端调试 db2 pl sql 的任何方法（至少使用 DB2 V8）。

在我被授权在我们的集成客户端环境中工作后，我可以确认我的假设是正确的。接收乘法的变量格式有时对于计算结果来说太小（十进制（10,2））。

采用的解决方案是将变量格式更改为小数（15,2），并且由于根据客户的要求插入的最终值仍然必须是小数（10,2），我们与客户验证了以下内容：

1-检查变量值：

```
if (myval > 9999999,99)
then 
  set myval = 9999999,99;
end if; 
```

=>“回到十进制（10,2）要求”

2-在插入时返回小数（10,2）：最后一点代码也解决了小数点后数字过多的问题。这也在插入时导致错误

```
insert into mytable values (
... ,
CAST(myval AS DECIMAL( 12 , 2 )),
...
) 
```

# java - 状态为 STARTING 时 Guava 服务停止

> ID：12218793
> 
> 赞同：1
> 
> 时间：2012-08-31T15:54:28.693
> 
> 标签：java, service, guava

我们有一些服务需要一段时间才能启动（1-2 分钟）。在此过程中，有人可能会请求强制关闭服务（即转换`STARTING -> STOPPING`）。[查看AbstractService](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/AbstractService.html)类的源代码，我发现没有调用`doStop()` 当前状态`STARTING`，或者`NEW`这意味着在收到停止请求时没有通知底层类。

```
 switch (snapshot.state) {
    case NEW:
      snapshot = new StateSnapshot(State.TERMINATED);
      terminated(State.NEW);
      break;
    case STARTING:
      snapshot = new StateSnapshot(State.STARTING, true, null);
      stopping(State.STARTING);
      break;
    case RUNNING:
      snapshot = new StateSnapshot(State.STOPPING);
      stopping(State.RUNNING);
      doStop();
      break;
    case STOPPING:
    case TERMINATED:
    case FAILED:
      // do nothing
      break;
    default:
      throw new AssertionError("Unexpected state: " + snapshot.state);
  } 
```

由于无论状态如何，我都需要执行一些清理，有没有办法获得有关关机的通知？[在子类中使用Service.Listener](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/Service.Listener.html)是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:51:20.037

没有调用`doStop`状态何时是`NEW`或者`STARTING`因为您不必停止从未启动的服务。这并不意味着在收到停止请求时不会通知基础类。参考[源`stop()`](http://code.google.com/p/guava-libraries/source/search?q=AbstractService&origq=AbstractService&btnG=Search+Trunk)，如果状态是`NEW`，`terminated`则调用，它将侦听器排队以`terminated`调用其方法。类似地，如果状态为`STARTING`，`stopping`则调用它，它将侦听器排队以`stopping`调用其方法。然后调用中的`finally`块来执行任何排队的s。`stop``executeListeners``Listener`

所以简而言之，是的，使用`Service.Listener`. 确保在开始之前将其添加`Listener`到`Service`，这样您就不会错过任何状态转换的通知。, `failed`,`stopping`和`terminated`方法都得到了传递给它们的`Service.State`那个`Service`，所以你可以在你`Listener`的 s`terminated`方法中为正常情况（`Service`gets `RUNNING`）`if (from == STARTING)`在你的方法中的一个块中`stopping`为你描述你在哪里想要在启动期间强制关闭，以及在您`failed`的特殊情况下使用您的方法。

# vb.net - 发送带有附件的邮件

> ID：12218795
> 
> 赞同：0
> 
> 时间：2012-08-31T15:54:36.933
> 
> 标签：vb.net, email

我正在尝试用我的电子邮件发送附件，但它似乎不起作用。当我不尝试使用附件部分时，我可以发送电子邮件

我正在使用这些进口

```
Imports System.IO
Imports System
Imports System.Web.Mail

Dim mail As New MailMessage()
mail.To = strTo
mail.From = strFrom 
mail.Subject = strSubject
mail.BodyFormat = MailFormat.Html
mail.Body = sBody
'mail.Attachment.Add (strAttachment)
'mail.AddAttachment(strAttachment)

'mail.Attachments.Add(New MailAttachment(strAttachment))
 mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate", "1") 'basic authentication
 mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusername", "xxxxxxxxxxxx") 'set your username here
 mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendpassword", "xxxxxxxxxxx") 'set your password here
 SmtpMail.SmtpServer = "xxxxxxxxxxxx" 'your real server goes here
 SmtpMail.Send(mail) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:01:38.150

尝试这个

```
Dim m as new MailMessage
m.Attachments.Add(New Attachment("C:\Test.txt"))
'rest of your code 
```

# python - Python切片列表中的第一个和最后一个元素

> ID：12218796
> 
> 赞同：85
> 
> 时间：2012-08-31T15:54:40.840
> 
> 标签：python, list, slice, subscript

有没有办法只切片列表中的第一项和最后一项？

例如; 如果这是我的清单：

```
>>> some_list
['1', 'B', '3', 'D', '5', 'F'] 
```

我*想*这样做（显然`[0,-1]`是无效的语法）：

```
>>> first_item, last_item = some_list[0,-1]
>>> print first_item
'1'
>>> print last_item
'F' 
```

我尝试过的一些事情：

```
In [3]: some_list[::-1]
Out[3]: ['F', '5', 'D', '3', 'B', '1']

In [4]: some_list[-1:1:-1]
Out[4]: ['F', '5', 'D', '3']

In [5]: some_list[0:-1:-1]
Out[5]: []
... 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-31T15:57:07.387

单程：

```
some_list[::len(some_list)-1] 
```

更好的方法（不使用切片，但更容易阅读）：

```
[some_list[0], some_list[-1]] 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-04-17T12:32:42.830

Python 3 唯一的答案（不使用切片或丢弃其余部分`list`，但无论如何可能已经足够好了）是使用解包泛化来获取`first`和`last`分离中间：

```
first, *_, last = some_list 
```

选择`_`作为“其余”论点的总括是任意的；它们将存储在`_`通常用作“我不关心的东西”的替代名称中。

与许多其他解决方案不同，这个解决方案将确保序列中至少有两个元素；如果只有一个（所以`first`和`last`将是相同的），它将引发异常（`ValueError`）。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-31T15:59:49.713

只是想我会展示如何使用 numpy 的精美索引来做到这一点：

```
>>> import numpy
>>> some_list = ['1', 'B', '3', 'D', '5', 'F']
>>> numpy.array(some_list)[[0,-1]]
array(['1', 'F'], 
      dtype='|S1') 
```

请注意，它还支持任意索引位置，该`[::len(some_list)-1]`方法不适用于：

```
>>> numpy.array(some_list)[[0,2,-1]]
array(['1', '3', 'F'], 
      dtype='|S1') 
```

[正如 DSM 指出的那样，您可以使用itemgetter](http://docs.python.org/library/operator.html#operator.itemgetter)做类似的事情：

```
>>> import operator
>>> operator.itemgetter(0, 2, -1)(some_list)
('1', '3', 'F') 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-08-31T15:58:48.527

```
first, last = some_list[0], some_list[-1] 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-29T21:54:31.013

似乎有些人回答错了问题。你说你想做：

```
>>> first_item, last_item = some_list[0,-1]
>>> print first_item
'1'
>>> print last_item
'F' 
```

即，您想将第一个和最后一个元素分别提取到单独的变量中。

在这种情况下，Matthew Adams、pemistahl 和 katrielalex 的回答是有效的。这只是一个复合作业：

```
first_item, last_item = some_list[0], some_list[-1] 
```

但后来你陈述了一个复杂的问题：“我将它拆分在同一行，那将不得不花时间将它拆分两次：”

```
x, y = a.split("-")[0], a.split("-")[-1] 
```

因此，为了避免两次 split() 调用，您只能对拆分一次的列表进行操作。

在这种情况下，试图在一行中做太多事情会损害清晰度和简单性。使用变量来保存拆分结果：

```
lst = a.split("-")
first_item, last_item = lst[0], lst[-1] 
```

其他回答回答了“如何获得一个由列表的第一个和最后一个元素组成的新列表？”的问题。根据仔细阅读您的问题，他们可能受到您的标题的启发，其中提到了您实际上不想要的切片。

AFAIK 是用列表的第 0 个和最后一个元素获取新列表的 3 种方法：

```
>>> s = 'Python ver. 3.4'
>>> a = s.split()
>>> a
['Python', 'ver.', '3.4']

>>> [ a[0], a[-1] ]        # mentioned above
['Python', '3.4']

>>> a[::len(a)-1]          # also mentioned above
['Python', '3.4']

>>> [ a[e] for e in (0,-1) ] # list comprehension, nobody mentioned?
['Python', '3.4']

# Or, if you insist on doing it in one line:
>>> [ s.split()[e] for e in (0,-1) ]
['Python', '3.4'] 
```

列表理解方法的优点是元组中的索引集可以是任意的并且可以通过编程方式生成。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-08-31T15:58:19.920

那这个呢？

```
>>> first_element, last_element = some_list[0], some_list[-1] 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-08-31T15:56:55.997

你可以这样做：

```
some_list[0::len(some_list)-1] 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-11-03T10:08:33.510

你可以使用类似的东西

```
y[::max(1, len(y)-1)] 
```

如果你真的想使用切片。这样做的好处是它不会给出索引错误，并且也适用于长度为 1 或 0 的列表。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-31T15:57:13.227

其实我只是想通了：

```
In [20]: some_list[::len(some_list) - 1]
Out[20]: ['1', 'F'] 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-04-17T12:18:03.357

这不是“切片”，但它是一个不使用显式索引的通用解决方案，适用于相关序列是匿名的场景（因此您可以在同一行创建和“切片”，无需创建两次并索引两次）：[`operator.itemgetter`](https://docs.python.org/3/library/operator.html#operator.itemgetter)

```
import operator

# Done once and reused
first_and_last = operator.itemgetter(0, -1)

...

first, last = first_and_last(some_list) 
```

您可以将其内联为（在`from operator import itemgetter`使用时为简洁起见）：

```
first, last = itemgetter(0, -1)(some_list) 
```

但是，如果您将大量重用 getter，则可以通过提前创建一次来节省重新创建它的工作（并给它一个有用的、自记录的名称）。

因此，对于您的特定用例，您可以替换：

```
x, y = a.split("-")[0], a.split("-")[-1] 
```

和：

```
x, y = itemgetter(0, -1)(a.split("-")) 
```

并且`split`仅一次而不将完整存储`list`在持久名称中以进行`len`检查或双索引等。

请注意，`itemgetter`对于多个项目返回 a `tuple`，而不是 a `list`，因此，如果您不只是将其解包为特定名称，并且需要 true `list`，则必须将调用包装在`list`构造函数中。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-06-18T16:02:15.950

这个怎么样？

```
some_list[:1] + some_list[-1:]

Result: ['1', 'F'] 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-04-28T14:49:08.957

**更一般的情况：从列表的每一端返回 N 个点**

答案适用于特定的第一个和最后一个，但是像我这样的一些人可能正在寻找一种可以应用于更一般情况的解决方案，在这种情况下，您可以从列表的任一侧返回前 N 个点（假设您有一个排序列表，只想要 5 个最高或最低的），我想出了以下解决方案：

```
In [1]
def GetWings(inlist,winglen):
    if len(inlist)<=winglen*2:
        outlist=inlist
    else:
        outlist=list(inlist[:winglen])
        outlist.extend(list(inlist[-winglen:]))
    return outlist 
```

以及从列表 1-10 返回底部和顶部 3 个数字的示例：

```
In [2]
GetWings([1,2,3,4,5,6,7,8,9,10],3)

#Out[2]
#[1, 2, 3, 8, 9, 10] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-24T20:48:18.327

有趣的新方法来“单衬”匿名`split`事物的情况，这样您就不会将其拆分两次，而是在一行中完成所有工作是使用[海象运算符 ,`:=`将赋值作为表达式](https://www.python.org/dev/peps/pep-0572/)，允许两者：

```
first, last = (split_str := a.split("-"))[0], split_str[-1] 
```

和：

```
first, last = (split_str := a.split("-"))[::len(split_str)-1] 
```

请注意，在这两种情况下，它基本上完全等同于在一行上做：

```
split_str = a.split("-") 
```

然后跟进以下之一：

```
first, last = split_str[0], split_str[-1]
first, last = split_str[::len(split_str)-1] 
```

`split_str`包括在使用和访问它的线路之外仍然存在的事实。它只是在技术上满足单衬的要求，同时相当丑陋。**我永远不会推荐它而不是[unpacking](https://stackoverflow.com/a/43451567/364696)或[`itemgetter`](https://stackoverflow.com/a/43451355/364696)解决方案**，即使单衬是强制性的（排除显式索引或切片命名变量并且必须引用所述命名变量两次的非海象版本）。

# javascript - 未设置变量的赋值 | _jQuery 是干什么用的？

> ID：12218798
> 
> 赞同：2
> 
> 时间：2012-08-31T15:54:50.840
> 
> 标签：javascript, jquery

这个值是在 jQuery 暴露于全局范围之前设置的：

```
_jQuery = window.jQuery, 
```

在 IIFE 快结束时，在上述声明之后有

```
window.jQuery = window.$ = jQuery; 
```

这是来自[jQuery 开发源](http://code.jquery.com/jquery-latest.js)。

什么编译器机制允许 jQuery 从未设置的变量中进行赋值。

另外，一般来说 _jQuery 是干什么用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:57:52.587

正如评论所说，`_jQuery`支持全局范围内已经存在的任何内容（如旧版本的 jQuery）。这可能是为了`jQuery.noConflict`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:57:25.350

这是 jQuery 促进其 noConflict 功能的一种方式。它正在存储先前设置的任何内容的副本，`window.jQuery`以便以后可以在必要时恢复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:57:43.757

那部分代码是为使用该`$.noConflict()`方法做准备。`window.jQuery`要么是一个现有的 jQuery 库，在包含被初始化的库之前就已经存在，要么就是`undefined`. 这两种情况都不应该引起问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:58:00.060

答案在代码中：

```
// Map over jQuery in case of overwrite 
```

window.jQuery 和 window.$ 的先前值是为 noConflict 功能保存的。

# knockout.js - writeValueToProperty 不可用

> ID：12218799
> 
> 赞同：1
> 
> 时间：2012-08-31T15:54:52.763
> 
> 标签：knockout.js

我正在做一个自定义绑定，我的第一个版本要求数据绑定属性是可观察的，但我刚刚发布了绑定的用户可能想要使用标准属性（如果他们不想在值有时收到通知改变）。

为了支持这一点，我查看了值绑定是如何实现的，它使用

```
ko.jsonExpressionRewriting.writeValueToProperty 
```

将值写入可观察对象或标准属性。

这是一个内部 ko 命名空间，所以我不能从我的绑定中使用它，我应该如何调用这个方法？

**编辑：** 我在 github 有一个拉取请求来解决这个问题 [https://github.com/SteveSanderson/knockout/pull/806](https://github.com/SteveSanderson/knockout/pull/806)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:03:29.417

Knockout 在结果对象中放置一个函数`allBindingsAccessor`，您可以使用该函数将其写入不可观察的模型值。

如果您的绑定被调用`myBinding`，那么您的代码可能如下所示：

```
 if (ko.isObservable(modelValue)) {
            modelValue(valueToWrite);
        }                
        else { //non-observable
           allBindingsAccessor()._ko_property_writers.myBinding(valueToWrite);   
        } 
```

# jquery - 在 div 中追加表格

> ID：12218800
> 
> 赞同：0
> 
> 时间：2012-08-31T15:55:04.783
> 
> 标签：jquery

您好，我正在尝试将表添加到 div 但萤火虫给了我这个错误： SyntaxError: unterminated string literal [Break On This Error] $('#news-tweets').append('

这是正在运行的代码：

```
 for (var i in array) {
                var location = array[i].location;
                var user = array[i].user;
                var date = array[i].date;
                var profile_img = array[i].profile_img;
                var text = array[i].text;
                var url = array[i].url;
                show_tweets(user,date,profile_img,text,url);
                geocode(user, date, profile_img, text, url, location);
            }
            function show_tweets(user, date, profile_img, text, contentString){
                $('#news-tweets').append('<table width="320" border="1">
                <tr>
                  <td colspan="2" rowspan="1">"+user+"</td>
                </tr>
                <tr>
                  <td width="118">"+profile_img+"</td>
                  <td width="186">"+text+"</td>
                </tr>
              </table>');
                } 
```

它告诉我我之前有一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:57:48.923

尝试

```
function show_tweets(user, date, profile_img, text, contentString)
{
    $('#news-tweets').append('<table width="320" border="1"><tr><td colspan="2" rowspan="1">' + user + '</td></tr><tr><td width="118">' + profile_img + '</td><td width="186">' + text + '</td></tr></table>');
} 
```

# ruby-on-rails - Rails 教程 - Ch. 5 更漂亮的测试 Rspec

> ID：12218804
> 
> 赞同：2
> 
> 时间：2012-08-31T15:55:10.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, github, rspec-rails

我真的希望有人可以帮助我解决这个问题。我正在关注 Michael Hartl 的 Rails 3 教程，并且在第 5 章中遇到了困难。昨天我花了大部分时间试图通过回顾所有工作来解决这个问题，并解决了 Stack Overflow 上的所有相关问题。那里有大量信息，但都没有解决我的问题，老实说，我不明白我哪里出错了。

一切进展顺利（该网站的工作方式完全符合书中的说明），直到作者引导您清理您的“static_pages_spec.rb”文件。我的目前处于这种状态：

* * *

```
require 'spec_helper'

describe "Static pages" do

subject { page }

describe "Home page" do
  before { visit root_path }

  it { should have_selector('h1',    text: 'Sample App') }
  it { should have_selector('title', text: full_title('')) }
  it { should_not have_selector 'title', text: '| Home' }
end

describe "Help page" do
  before { visit help_path }

  it { should have_selector('h1',    text: 'Help') }
  it { should have_selector('title', text: full_title('Help')) }
end

describe "About page" do
  before { visit about_path }

  it { should have_selector('h1',    text: 'About') }
  it { should have_selector('title', text: full_title('About Us')) }
end

describe "Contact page" do
  before { visit contact_path }

  it { should have_selector('h1',    text: 'Contact') }
  it { should have_selector('title', text: full_title('Contact')) }
end
end 
```

* * *

如作者所述，我也有两个“spec/support/utilities.rb”文件：

* * *

```
def full_title(page_title)
base_title = "Ruby on Rails Tutorial Sample App"
if page_title.empty?
  base_title
else
  "#{base_title} | #{page_title}"
end 
```

## 结尾

以及“app/helpers/application_helper.rb”中的以下内容

* * *

```
module ApplicationHelper

#Returns the full title based on a per-page basis.
def full_title(page_title)
base_title = "Ruby on Rails Tutorial Sample App"
if page_title.empty?
  base_title
else
  "#{base_title} | #{page_title}"
end
end 
```

## 结尾

当我运行 'guard' （我已经完成了 Guard、Spork 等的设置）时，我遇到了以下三个失败：

> 1) 静态页面帮助页面失败/错误：它 { should have_selector('title', text: full_title('Help')) } 期望 css "title" 和文本 "Ruby on Rails Tutorial Sample App | Help" 返回 >something # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in '
> 
> 2) 静态页面关于页面失败/错误：它 { should have_selector('title', text: full_title('About Us')) } 预期的 css "title" 和文本 "Ruby on Rails Tutorial Sample App | About Us" to > return something # ./spec/requests/static_pages_spec.rb:26:in `block (3 levels) in '
> 
> 3) 静态页面联系页面失败/错误：它 { should have_selector('title', text: full_title('Contact')) } 期望 css “title” 和文本 “Ruby on Rails Tutorial Sample App | Contact” >return something # ./spec/requests/static_pages_spec.rb:33:in `block (3 levels) in '

该站点工作正常（路由似乎是正确的），但我确实注意到，如果我查看任何页面的源代码，:title 始终是“Ruby on Rails Tutorial Sample App”。' | :page_title ' 似乎没有放在前面。我只是找不到我做了什么来打破它，因为我的 rspec 测试在本书的早期阶段工作。

我已经看到了一堆这样的问题，那些试图帮助的人要求访问 GitHub 上的代码。为了快速找到我的错误，我将所有代码都放在那里：

[https://github.com/rbrowndev/sampleapp.git](https://github.com/rbrowndev/sampleapp.git)

[https://github.com/rbrowndev/sampleapp/tree/filling-in-layout](https://github.com/rbrowndev/sampleapp/tree/filling-in-layout)

由于我是新手，如果存储库没有正确配置以允许您克隆项目，请告诉我。我相信我是这样设置的，但是由于我是新手...

如果有人可以提供帮助，将不胜感激。如果您愿意我在 SO 上而不是在 GitHub 上发布更多源代码，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:35:53.373

有一个错误使我们无法检查标题字段中的文本（实际上，它是任何不可见的内容）： [https ://github.com/jnicklas/capybara/issues/844](https://github.com/jnicklas/capybara/issues/844)

到目前为止，这似乎是在我们的规范中启用检查标题文本的最佳方法： [https ://stackoverflow.com/a/13755730/359957](https://stackoverflow.com/a/13755730/359957)

# javascript - Jquery/Javascript -- 查找父母的兄弟姐妹的孩子的孩子

> ID：12218809
> 
> 赞同：1
> 
> 时间：2012-08-31T15:55:31.043
> 
> 标签：javascript, jquery, html, jquery-mobile

以下面的 html 为例：

```
<html>
    <head>
       <title></title>
   </head>
   <body>
       <div>
             <a class="delete-btn"></a>
       </div>
       <ul>
          <li>
          <div>
               <div>
                    <a data-record-id="9">I need to grab this, from a click on 'delete-btn'</a>
               </div>
          </div>
          </li>
       </ul>
   </body>
<html> 
```

我需要向具有类“delete-btn”的项目 a 添加一个单击事件，并从`<a></a>`数据记录 ID 为 9 的项目中获取数据记录 ID。这可以并且将会改变，并假设我不可能将数据记录 ID 添加到原始删除按钮。

基本上，我有一个日期的生命体征列表，我想让用户能够删除某个日期的所有体征。日期标签的所有子项都将具有相同的记录 ID，我需要获取该记录 ID。

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:57:30.600

利用

```
$(this).parent().next().find('a') 
```

我不知道你为什么会收到这个错误。

见[http://jsfiddle.net/3Zkz9/](http://jsfiddle.net/3Zkz9/)

```
$('.delete-btn').click(function(){
    var $a=$(this).parent().next().find('a');
    alert($a.attr('data-record-id')); // gives 9
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:59:31.660

用这个：

```
$('.delete-btn').click(function () {
    var id = $(this).parent('div').next('ul').find('[data-record-id]').attr('data-record-id');
    // use id
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:01:41.523

试试这个，

```
$($('.delete-btn')[0]).parent().next().find('a').attr('data-record-id') 
```

尽管您必须进行适当的更改，例如稍后在所有元素中运行 each 循环或任何您想做的事情。但这有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T16:02:30.477

您可以使用[过滤器](http://api.jquery.com/filter)功能来提取这些锚点`data-record-id=9`：

```
$('a.delete-btn').on('click', function(e) {
    var $recid9 = $('a').filter(function() {
        return ($(this).data('record-id') == 9);
    });
});​ 
```

[http://jsfiddle.net/mblase75/CyKab/](http://jsfiddle.net/mblase75/CyKab/)

# php - 检测提交文本中使用的字母（论坛/博客）

> ID：12218813
> 
> 赞同：3
> 
> 时间：2012-08-31T15:55:57.147
> 
> 标签：php

我想知道检测人们在我的论坛上提交帖子时使用的字母的最佳方法（对博客也很有用）。问题是最近我收到了很多西里尔字母、希腊字母和日语的垃圾邮件，所以由于我的论坛是为讲法语和英语的人准备的，我想防止垃圾邮件发送者使用不同的字母发帖。可以用正则表达式吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:10:08.633

您可以计算不需要的字母表中的字符数。如果此数字超过某个限制 - 删除该消息。要计算这个数字，您可以从请求中检测消息编码，然后使用字符代码。顺便说一句，您也可以通过编码过滤您的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:30:41.670

例如，可以执行以下操作：

```
preg_match('/([\p{Greek}])+/u', $post); 
```

这将检查是否至少有 1 个希腊字符。有关更多信息（和其他字母），请参见此处：[http ://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

也可以采用另一种方式，例如检查所有字符是否属于拉丁字母。

# c# - Json 反序列化 C#

> ID：12218816
> 
> 赞同：3
> 
> 时间：2012-08-31T15:56:01.947
> 
> 标签：c#, json, serialization, json.net

我正在尝试反序列化 Json 字符串 usign Json.NET。我对它有一个基本的了解，但我已经尝试了好几天但无法让它工作，这是我的代码。（请忽略任何不必要/额外的代码，请记住，我正在根据研究后发现的内容尝试多种解决方案）。

```
public class Location
{
    private string ab_;
    private int c_;
    public string name { get { return ab_; } set { value = ab_; } }
    public int woeid { get { return c_; } set { value = c_; } }
}

public class Trend
{
    private string x_, y_, z_;
    private object a_, b_;
    public string query { get { return x_; } set { value = x_; } }
    public string name { get { return y_; } set { value = y_; } }
    public object promoted_content { get { return a_; } set { value = a_; } }
    public string url { get { return z_; } set { value = z_; } }
    public object events { get { return b_; } set { value = b_; } }

}

public class RootObject
{
    private string o, l;
    private List<Location> list1;
    private List<Trend> list2;
    public List<Location> locations { get { return list1; } set { value = list1; } }
    public string created_at { get { return o; } set { value = o; } }
    public List<Trend> trends { get { return list2; } set { value = list2; } }
    public string as_of { get { return l; } set { value = l; } }
}
RootObject values = JsonConvert.DeserializeObject<RootObject>(jsonString) 
```

现在我试图反序列化的 Json 字符串是这个：

```
 [
   {
      "as_of":"2012-08-31T15:31:55Z",
      "trends":[
         {
            "query":"%23GDTHATXX",
            "name":"#GDTHATXX",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%23GDTHATXX",
            "events":null
         },
         {
            "query":"%23UnMundoEnElQue",
            "name":"#UnMundoEnElQue",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%23UnMundoEnElQue",
            "events":null
         },
         {
            "query":"%23%C3%A7ekicibuluyorum",
            "name":"#\u00e7ekicibuluyorum",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%23%C3%A7ekicibuluyorum",
            "events":null
         },
         {
            "query":"%22Darren%20Kenny%22",
            "name":"Darren Kenny",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%22Darren%20Kenny%22",
            "events":null
         },
         {
            "query":"%22Richard%20Wright%22",
            "name":"Richard Wright",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%22Richard%20Wright%22",
            "events":null
         },
         {
            "query":"Yossi",
            "name":"Yossi",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=Yossi",
            "events":null
         },
         {
            "query":"Filipinas",
            "name":"Filipinas",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=Filipinas",
            "events":null
         },
         {
            "query":"%22Javi%20Garc%C3%ADa%22",
            "name":"Javi Garc\u00eda",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%22Javi%20Garc%C3%ADa%22",
            "events":null
         },
         {
            "query":"%22Van%20der%20Vaart%22",
            "name":"Van der Vaart",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=%22Van%20der%20Vaart%22",
            "events":null
         },
         {
            "query":"SSN",
            "name":"SSN",
            "promoted_content":null,
            "url":"http:\/\/twitter.com\/search\/?q=SSN",
            "events":null
         }
      ],
      "created_at":"2012-08-31T15:30:32Z",
      "locations":[
         {
            "name":"Globales",
            "woeid":1
         }
      ]
   }
] 
```

> 无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型“Twitter.TrendParser+RootObject”，因为该类型需要 JSON 对象（例如 {"name":"value"}）才能正确反序列化。
> 
> 要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以从 JSON 数组反序列化。JsonArrayAttribute 也可以添加到类型中以强制它从 JSON 数组反序列化。
> 
> 路径''，第 1 行，位置 1。

正如我之前所说，我对 Json 格式有基本的了解，并且我一直在尝试使用不同类型的类来反序列化并获得相同的结果，任何提示或任何关于问题可能是什么的想法？除了 json.NET，我还坚持使用 .NET 2.0 而不是 3rd 方库。

感谢您的关注。

*   编辑 *

显然，即使我尝试声明列表值，变量“值”也不会在实际上下文中创建，任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:01:19.433

您的 JSON 是一个包含一个对象的数组。

这意味着 JSON.NET 将期待单个对象但得到一个列表。错误消息基本上是在告诉你。

试试这个：

```
List<RootObject> values = JsonConvert.DeserializeObject<List<RootObject>>(receiving); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-30T17:59:50.000

`enter code here`/// 类

公共类 MambuData { 公共 mambuData [] mambuDataS { 获取；放; } }

```
public class mambuData
{
    public string encodedKey { get; set; }
    public string id { get; set; }
    public DateTime creationDate { get; set; }
    public DateTime lastModifiedDate { get; set; }
    public string name { get; set; }
    public string phoneNumber { get; set; }
    public string emailAddress { get; set; }
} 
```

///方法

私有字符串 ParseMambuData(string streamResult) { string R = "";

```
 List<mambuData> mambuDataList = JsonConvert.DeserializeObject<List<mambuData>>(streamResult);

        foreach (mambuData m in mambuDataList)
        {
           //put data in db if you want

        }

        return R;

    } 
```

# android - Android ui如何正确分配图像按钮？

> ID：12218817
> 
> 赞同：0
> 
> 时间：2012-08-31T15:56:01.417
> 
> 标签：android, scaling, imagebutton

我正在开发一个应用程序，我正在尝试正确分配图像按钮，但根据它们正在改变的屏幕，我在低高和中可绘制文件夹中添加了低密度、高密度和中密度图像的图像。

这是我的代码和屏幕截图。

```
<?xml version="1.0" encoding="utf-8"?>
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"    
android:id="@+id/ScrollView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content">    
  <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1" 
    android:gravity="center"
    android:paddingLeft="20dip" 
    android:paddingRight="20dip" >

<TableRow>       
<LinearLayout 
    android:orientation="vertical" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
  <ImageButton 
       android:id="@+id/aboutus"
       android:scaleType="fitCenter"
       android:src="@drawable/aboutus"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:padding="2dp"
       android:background="@android:color/transparent"
       />
    <TextView
    android:text="About Us"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" 
    android:textColor="#ffffff" />
</LinearLayout>
   <LinearLayout 
   android:orientation="vertical" 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
   <ImageButton
       android:id="@+id/services"         
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="@android:color/transparent"
       android:padding="2dp"
       android:src="@drawable/services123" />
    <TextView
    android:text="Services"
     android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" android:textColor="#ffffff" />
    </LinearLayout>
  </TableRow>    
    <TableRow>
        <LinearLayout android:orientation="vertical" android:layout_width="fill_parent"
       android:layout_height="fill_parent">
    <ImageButton 
       android:id="@+id/courses"           
       android:src="@drawable/services"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:padding="2dp"
       android:background="@android:color/transparent"
       />
    <TextView
    android:text="Courses"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" android:textColor="#ffffff" />
</LinearLayout>
   <LinearLayout 
   android:orientation="vertical" 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">     
    <ImageButton 
       android:id="@+id/contactus"
       android:src="@drawable/services"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:padding="2dp"
       android:background="@android:color/transparent"
       />
       <TextView
    android:text="contact us"
     android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" android:textColor="#ffffff" />
   </LinearLayout>
 </TableRow>
      <TableRow>
         <LinearLayout android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
    <ImageButton 
       android:id="@+id/syllabus"
       android:src="@drawable/services"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:padding="2dp"
       android:background="@android:color/transparent"
       />
    <TextView
    android:text="Syllabus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" 
    android:textColor="#ffffff" />
</LinearLayout>
   <LinearLayout 
   android:orientation="vertical" 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">          
    <ImageButton 
       android:id="@+id/pingtoupdates"
       android:src="@drawable/services"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:padding="2dp"
       android:background="@android:color/transparent"
       />
    <TextView
    android:text="Ping To Updates"
     android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="3dip" android:textColor="#ffffff" />
    </LinearLayout>
  </TableRow>
 </TableLayout> 
```

![在此处输入图像描述](../Images/b01055c8ba6eaaead9a11014a56676ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:07:46.273

我相信使用[GridView](http://developer.android.com/reference/android/widget/GridView.html)将是最好的，因为您可以在那里修复布局并指定网格中每个图像的大小，而不管它们的大小。

检查此[示例](http://developer.android.com/guide/topics/ui/layout/gridview.html)教程。

如果您需要更多示例代码，您可以在[此处](http://www.mkyong.com/android/android-gridview-example/)找到关于 GridView 的另一个不错的教程，[该](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)教程解释了如何处理网格中的项目选择，即当您单击网格上的任何图像时会发生什么。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:32:20.447

从一个表格行项目到另一个， layout_width 和 height 有两种变化。在某些 LinearLayout 中，您使用了 fill_parent、fill_parent，在某些 wrap_content 中使用了 wrap_content。首先，您需要更正此问题，因为您要求每行项目应具有相同的尺寸。
对于您的情况，更好的方法是使用 GridView。您只需为行项目创建一个布局文件（XML），然后您可以将其用于所有行项目。
这是网格项的示例代码：

```
 <LinearLayout 
    android:orientation="vertical" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
        <ImageButton 
           android:id="@+id/aboutus"
           android:src="@drawable/aboutus"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:padding="2dp"
           android:background="@android:color/transparent"/>
        <TextView
           android:text="About Us"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:gravity="right"
           android:padding="3dip" 
           android:textColor="#ffffff" />
</LinearLayout> 
```

如果您不熟悉 GridView，请点击此[链接](http://www.mkyong.com/android/android-gridview-example/)

完成此操作后，您应该尝试多设备支持。
您可以点击此[链接](http://developer.android.com/guide/practices/screens_support.html)获取多设备支持。

您还可以查看[此](https://stackoverflow.com/questions/11932951/how-to-show-an-image-proportional-to-the-screen/11933668#11933668)stackoverflow 帖子。

# android - 在 Android 中接收新短信数量时出错

> ID：12218819
> 
> 赞同：0
> 
> 时间：2012-08-31T15:56:03.747
> 
> 标签：android, widget, sms

我一直在为 Android 开发一个小部件。为此，我试图显示未读消息的数量以及当前时间。当前时间工作得很好，但是现在我已经添加了消息部分，当我尝试加载它时它会崩溃。这是我的代码：

```
public class MyTime extends TimerTask {

RemoteViews remoteViews;
AppWidgetManager appWidgetManager;
ComponentName thisWidget;
Context context;

java.text.DateFormat format = SimpleDateFormat.getTimeInstance(
        SimpleDateFormat.SHORT, Locale.getDefault());

public MyTime(Context context, AppWidgetManager appWidgetManager) {
    this.appWidgetManager = appWidgetManager;
    remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
    thisWidget = new ComponentName(context, LeafClockWidget.class);

}

@Override
public void run() {
    SimpleDateFormat sdf1 = new SimpleDateFormat("EEEE, MMMM dd");
    Date d = new Date(System.currentTimeMillis());
    String time1 = sdf1.format(d);

    final Uri SMS_INBOX = Uri.parse("content://sms/inbox");

    Cursor c = context.getContentResolver().query(SMS_INBOX, null, "read = 0", null, null);
    int unreadMessagesCount = c.getCount();
    c.deactivate();

    remoteViews.setTextViewText(R.id.widget_textview3, "You have " + c + " unread SMS messages.");

    remoteViews.setTextViewText(R.id.widget_textview1, time1);
    remoteViews.setTextViewText(R.id.widget_textview2, "The time is "
            + format.format(new Date(System.currentTimeMillis())));

    appWidgetManager.updateAppWidget(thisWidget, remoteViews);
}

} 
```

我很难找到我的代码中的错误，所以我真的希望你们能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:04:39.427

**编辑：**

首先，删除，`c.deactivate()` [因为它已弃用](http://developer.android.com/reference/android/database/Cursor.html#deactivate%28%29)。

我对`ContentResolver`'s 不熟悉，所以请注意，我提供的任何建议都是基于我自己的研究。我认为您的问题*可能*是您`WHERE`的`Cursor` `query()`? 查看[这个答案](https://stackoverflow.com/a/851668/1134705)，看看它是否有帮助。你会想要一些与他/她非常相似的东西，`if(c != null)`并且`c.moveToFirst()`

* * *

LogCat 是您最好的朋友，每当您遇到问题/异常/错误时，您都应该将您的 LogCat 输出粘贴到问题中，以便我们提供更好的帮助。

快速提示，在您可以使用的代码中查找错误`try`-`catch`并观察您的`LogCat`

这是一个例子：

```
@Override
public void run() {
    try {
        SimpleDateFormat sdf1 = new SimpleDateFormat("EEEE, MMMM dd");
        Date d = new Date(System.currentTimeMillis());
        String time1 = sdf1.format(d);
    } catch(Exception e1) {
        Log.e("SimpleDateFormat", "FAILED: " + e1.getMessage());
    }

    final Uri SMS_INBOX = Uri.parse("content://sms/inbox");

    try {
        Cursor c = context.getContentResolver().query(SMS_INBOX, null, "read = 0", null, null);
        int unreadMessagesCount = c.getCount();
        c.deactivate();
    } catch (Exception e2) {
        Log.e("Cursor", "FAILED: " + e2.getMessage());
    }

    remoteViews.setTextViewText(R.id.widget_textview3, "You have " + c + " unread SMS messages.");

    remoteViews.setTextViewText(R.id.widget_textview1, time1);
    remoteViews.setTextViewText(R.id.widget_textview2, "The time is "
            + format.format(new Date(System.currentTimeMillis())));

    appWidgetManager.updateAppWidget(thisWidget, remoteViews);
} 
```

# php - 正则表达式不会产生错误回声，有人可以帮我吗？

> ID：12218821
> 
> 赞同：-1
> 
> 时间：2012-08-31T15:56:16.223
> 
> 标签：php, regex, forms, preg-match

当字段不正确时，正则表达式不会产生错误回显，除此之外，我在第 58 行的偏移量 12 处收到警告：preg_match() [function.preg-match]: Compilation failed: missing)。谁能帮帮我我很绝望.

```
$array = array(
               "error1" == "1",
               "error2" == "2",
               "error3" == "3",
               "error4" == "4",
               "error5" == "5",
               "error6" == "6",
               "error7" == "7",
               "error8" == "8",
               "error9" == "9",
               "error10" == "10",
               "error11" == "11",
               "error12" == "12",
              );

    //the regular expressions of the variables in the form

    function ValidateForm($string, $type){

        switch($type)
            {
            case 'name':
                $pattern="/^[A-Za-z. -]+$/";
                break;
            case 'sex':
                $pattern="/[MWmw]/";
                break;
            case 'insertion':
                $pattern="/^([A-Za-z]*$/";
                break;
            case 'initials':
                $pattern="/^([A-Z]\.)+$/";
            break;
            case 'adress':
                $pattern="/^([A-Za-z -])+[0-9]+([a-z -])*$/";
                break;
            case 'postcode':
                $pattern="/^[1-9][0-9]{3}[]?[A-Za-z]{2}$/";
                break;
            case 'phone':
                $pattern="/^[0-9]{10}$/";
                break;
            case 'email':
                $pattern="/(^[0-9a-zA-Z_\.-]{1,}@([0-9a-zA-Z_\-]{1,}\.)+[0-9a-zA-Z_\-]{2,}$)/";
                break;
            case 'postbus':
                $pattern="/^[A-Z][a-zA-Z -]+$/";
                break;
            }

            if (preg_match($pattern, $string)){
                    return true;
                } else {
                    return false;
                }   
            }   

    if (isset($_POST['submitted'])){        

            if (ValidateForm($_POST["surname"],'name')){
                $error1 = true; 
            }else{
                $error1 = false; 
            } 

            if (ValidateForm($_POST["sex"],'sex')){
                $error2 = true; 
            }else{
                $error2 = false; 
            }

            if (ValidateForm($_POST["insertion"],'insertion')){
                $error3 = true;
            }else{
                $error3 = false; 
            }

            if (ValidateForm($_POST["initials"],'initials')){
                $error4 = true;
            }else{
                $error4 = false; 
            }

            if (ValidateForm($_POST["adress"],'adress')){
                $error5 = true;
            }else{
                $error5 = false; 
            }

            if (ValidateForm($_POST["postcode"],'postcode')){
                $error6 = true;
            }else{
                $error6 = false; 
            }           

            if (ValidateForm($_POST["postbus"],'postbus')){
                $error7 = true;
            }else{
                $error7 = false; 
            }

            if (ValidateForm($_POST["private_phone"],'phone')){
                $error8 = true;
            }else{
                $error8 = false; 
            }

            if (ValidateForm($_POST["mobile_phone"],'phone')){
                $error9 = true;
            }else{
                $error9 = false; 
            }

            if (ValidateForm($_POST["work_phone"],'phone')){

                $error10 = true;

            }else{$error10 = false;
            }

            if (ValidateForm($_POST["work_email"],'email')){
                $error11 = true;
            }else{
                $error11 = false;
            }

            if (ValidateForm($_POST["private_email"],'email')){
                $error12 = true;
            }else{
                $error12 = false; 
            }

    //makes an connection to the db
            mysql_connect("localhost", "root", '') or die(mysql_error());
            mysql_select_db('databaseimage') or die(mysql_error());

    //Here the form vars will be inserted into the database, as you can see above the mysql_query knows where to put it in

            mysql_query("INSERT INTO form (Surname, Insertion, Initials, Name, Sex, Adress, Postcode, Postbus, Location, Private_phone, Mobile_phone, Work_phone, Private_email, Work_email)
            VALUES
            ('".$_POST['surname']."','".$_POST['insertion']."','".$_POST['initials']."','".$_POST['name']."','".$_POST['sex']."','".$_POST['adress']."','".$_POST['postcode']."','".$_POST['postbus']."','".$_POST['location']."','".$_POST['private_phone']."','".$_POST['mobile_phone']."','".$_POST['work_phone']."','".$_POST['private_email']."','".$_POST['work_email']."')")
            or die(mysql_error());  

            }
    ?>

<html>
            <head>
                <meta charset="utf-8"/>
                <meta http-equiv="X-UA-Compatible" content="chrome=1" />
                <link rel="stylesheet" href="css/form.css" type="text/css"  />
                <link rel="stylesheet" href="css/style.css" type="text/css"  />

        <script language = "javascript">

            function DisableButton1() {
                        var surname = document.getElementById("surname").value;
                        var disableButton1 = false;
                        if (surname == "") disableButton1 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton1;
                    }

            function DisableButton2() {
                        var insertion = document.getElementById("insertion").value;
                        var disableButton2 = false;
                        if (insertion == "") disableButton2 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton2;
                    }

            function DisableButton3() {
                        var initials = document.getElementById("initials").value;
                        var disableButton3 = false;
                        if (initials == "") disableButton3 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton3;
                    }

            function DisableButton4() {
                        var name = document.getElementById("name").value;
                        var disableButton4 = false;
                        if (name == "") disableButton4 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton4;
                    }

            function DisableButton5() {
                        var sex = document.getElementById("sex").value;
                        var disableButton5 = false;
                        if (sex == "") disableButton5 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton5;
                    }

            function DisableButton6() {
                        var adress = document.getElementById("adress").value;
                        var disableButton6 = false;
                        if (adress == "") disableButton6 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton6;
                    }

            function DisableButton7() {
                        var postcode = document.getElementById("postcode").value;
                        var disableButton7 = false;
                        if (surname == "") disableButton7 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton7;
                    }

            function DisableButton8() {
                        var postbus = document.getElementById("postbus").value;
                        var disableButton8 = false;
                        if (postbus == "") disableButton8 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton8;
                    }
            function DisableButton9() {
                        var location = document.getElementById("location").value;
                        var disableButton9 = false;
                        if (location == "") disableButton9 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton9;
                    }

            function DisableButton10() {
                        var private_phone = document.getElementById("private_phone").value;
                        var disableButton10 = false;
                        if (private_phone == "") disableButton10 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton10;
                    }

            function DisableButton11() {
                        var mobile_phone = document.getElementById("mobile_phone").value;
                        var disableButton11 = false;
                        if (mobile_phone == "") disableButton11 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton11;
                    }

            function DisableButton12() {
                        var work_phone = document.getElementById("work_phone").value;
                        var disableButton12 = false;
                        if (work_phone == "") disableButton12 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton12;
                    }
            function DisableButton13() {
                        var private_email = document.getElementById("private_email").value;
                        var disableButton13 = false;
                        if (private_email == "") disableButton13 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton13;
                    }

            function DisableButton14() {
                        var work_email = document.getElementById("work_email").value;
                        var disableButton14 = false;
                        if (work_email == "") disableButton14 = true;
                        document.forms['form'].elements['submit'].disabled = disableButton14;
        }

            for (i = 0; i < frm_elements.length; i++)
                {
            field_type = frm_elements[i].type.toLowerCase();
            switch (field_type)
            {
            case "text":
            case "password":
            case "textarea":
            case "hidden":
                frm_elements[i].value = "";
                break;
            case "radio":
            case "checkbox":
                if (frm_elements[i].checked)
                {
                    frm_elements[i].checked = false;
                }
                break;
            case "select-one":
            case "select-multi":
                frm_elements[i].selectedIndex = -1;
                break;
            default:
                break;
            }
        }
        </script>   

            </head>

            <?php

            if (isset($_POST['submit'])){   

                    if ($error1 == true){
                         echo $_POST["surname"]." surname is invalid";
                    }

                    if ($error2 == true){
                         echo $_POST["sex"]." sex is invalid";
                    }

                    if ($error3 == true){
                         echo $_POST["insertion"]." insertion is invalid";
                    }

                    if ($error4 == true){
                         echo $_POST["initials"]." initials is invalid";

        }
                    if ($error5 == true){
                         echo $_POST["adress"]." adress is invalid";
                    }

                    if ($error6 == true){
                         echo $_POST["postcode"]." postcode is invalid";
                    }

                    if ($error7 == true){
                         echo $_POST["postbus"]." postbus is invalid";
                    }

                    if ($error8 == true){
                         echo $_POST["private_phone"]." private phone is invalid";
                    }

                    if ($error9 == true){
                         echo $_POST["mobile_phone"]." mobile_phone is invalid";
                    }

                    if ($error10 == true){
                         echo $_POST["work_phone"]." work phone is invalid";
                    }

                    if ($error11 == true){
                         echo $_POST["work_email"]." work email is invalid";
                    }

                    if ($error12 == true){
                         echo $_POST["private_email"]." private_email is invalid";
                    }
                }

            ?>

            <body>

            <div id="top_bit">

            <h1>Registration form</h1>

            <div class="boxed"> 

            <form ction="<?php echo $_SERVER['PHP_SELF'];?> name="form" method="post">   
            <div id="first_part">       
                <label for="name">Surname</label> 
                    <input type="text" name="surname" id="surname" placeholder="last name" value="Worst" onKeyUp="DisableButton1()"/>

                <label for="website">Insertion</label> 
                    <input type="text" name="insertion" id="insertion" placeholder="If you have one" value="Jaap" onKeyUp="DisableButton2()"/>

                <label for="number">Initials</label> 
                    <input type="text" name="initials" id="initials" maxlength="8" size="8" value="J.P" onKeyUp="DisableButton3()"/>

                <label for="name">Name</label> 
                    <input type="text" name="name" id="name" value="Hans" onKeyUp="DisableButton4()"/>

                <label for="sex">Sex</label> 
                    <input type="text" name="sex" id="sex" maxlength="3" size="3" placeholder="M/W" value="M" value="sex" onKeyUp="DisableButton5()"  />

                <label for="name">Adress</label> 
                    <input type="text" name="adress" id="adress" value="Donkeresteegstraat 78" onKeyUp="DisableButton6()" />
            </div>
            <div id="float_form">

                <label for="name">Postcode</label> 
                    <input type="text" name="postcode" id="postcode" value="1070 HR"  onKeyUp="DisableButton7()"/>

                <label for="name">Postbus</label> 
                    <input type="text" name="postbus" id="postbus"  value="jaap"  onKeyUp="DisableButton8()" />

                <label for="name">Location</label> 
                    <input type="text" name="location" id="location" value="Amsterdam" onKeyUp="DisableButton9()" />

                <label for="name">Private Phone</label> 
                    <input type="number" name="private_phone" id="private_phone" value="0206234567" maxlength="10" size="9" onKeyUp="DisableButton10()" />

                <label for="name">Mobile Phone</label>
                    <input type="number" name="mobile_phone" id="mobile_phoene" value="0654322345" maxlength="10" size="9" onKeyUp="DisableButton11()" />

                <label for="name">Work Phone</label>
                    <input type="number" name="work_phone" id="work_phone" value="0206234567" maxlength="10" size="9" onKeyUp="DisableButton12()" />
            </div>
            <div id="float_form_2"
                <label for="name">Private Email</label> 
                    <input type="email" name="private_email" id="private_email" value="hangslotman@gmail.com" onKeyUp="DisableButton13()" />

                <label for="name">Work Email</label> 
                    <input type="email" name="work_email" id="work_email" value="hangslotman@gmail.com" onKeyUp="DisableButton14()" />
            </div>

                    <input type="hidden" name="submitted" value="1" /> 

                <div id="reset_form"><input type="button" name="reset_form" value="Reset Form" onclick="this.form.reset();"></div>      

                <input type="submit" value="Send information" id="submit"/>

            </form>

            </div>

        </div>

            </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:35:07.630

你的测试：

```
if (isset($_POST['submit'])){ 
```

从未验证，因为提交按钮没有名称属性

将其更改为：

```
<input type="submit" value="Send information" id="submit"/> 
```

至

```
<input type="submit" name="submit" value="Send information" id="submit"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:01:27.610

你打开一个括号

```
case 'insertion':
            $pattern="/^([A-Za-z]*$/";
            break; 
```

但是你在哪里关闭它？如果您将其更改为，错误可能会消失

```
case 'insertion':
                $pattern="/^([A-Za-z])*$/";
                break; 
```

# mysql - 用随机数据 MYSQL 填充的表中的外键值

> ID：12218824
> 
> 赞同：-1
> 
> 时间：2012-08-31T15:56:28.717
> 
> 标签：mysql, random, foreign-keys

我想用随机数据填充我的 MYSQL 数据库的表，以测试其性能。

我遇到了一个问题：如果我有一个包含字段 A、B、C 和 C 的表 X 是在另一个表 Y 中引用 D 的外键，我该怎么办？

我正在使用一个工具为 A 和 B 生成随机数据，但我真的不知道如何将它与 C 的随机值（取自 Y 表中的 D 值）结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:33:21.607

您的工具可以实现以下伪代码：

```
for ($i=0; $i<100; $i++) {
  $d = randomvalue();
  execute("INSERT INTO Y(D) VALUES ($d)");

  while ($j=0; $j<20; $j++) {
    $a = randomvalue(), $b = randomvalue();
    execute("INSERT INTO X(A, B, C) VALUES ($a, $b, $d)");
  }
} 
```

# mysql - MySQL左连接优化

> ID：12218825
> 
> 赞同：3
> 
> 时间：2012-08-31T15:56:32.497
> 
> 标签：mysql, sql, optimization

我有 2 张桌子：

*   `formfill`有列`idmessage`, `value`, `namefield`.
*   `fields`有列`namefield`, `typefield`, `optionsfield`.

我没有任何主键。关系在名称字段列之间。

我的查询是：

```
select e.namefield,e.typefield,e.optionsfield,b.value,b.id
from fields as e
left join formfill as b on e.namefield = b.namefield and b.id=1011 
```

这个查询没问题。但它运行非常缓慢（大约 10 秒）。我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:02:50.040

您可能应该发布您的查询计划

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

但查询执行速度低可能意味着

*   你没有索引，引擎必须做全扫描，所以最好在你有像'='这样的操作的字段上添加索引。如果您使用 = 或 <>，则索引的类型可能是“哈希”，而 btree 用于 < 或 > 等操作

*   右表中的行数比左表中的 1 多 10 倍或更多，因此索引无济于事，您需要考虑对数据进行分区

# xml - 在 Perl 中使用 XML::LibXML 更改 XML 文件：换行符是 Unix，而不是 Windows

> ID：12218831
> 
> 赞同：3
> 
> 时间：2012-08-31T15:57:10.343
> 
> 标签：xml, perl, newline, libxml2, xml-libxml

亲爱的 Perl 和 XML 大师

我的任务是使用**XPath更新****XML**文件中的值。 我使用**Perl**中的库来读取、更改和保存 XML 文件： **`XML::LibXML`**

 ****```
# Read XML file
my $parser = XML::LibXML->new();
my $doc = $parser->load_xml(location => $config_file);
my $root = $doc->documentElement();

# Alter nodes\attributes
foreach (keys %environment_values) {
    my @nodes = $root->findnodes($_);
    if (scalar @nodes < 1) {
        print "ERROR: element not found in $config_file by XPath: $_\n";
        die;
    } elsif (scalar @nodes > 1) {
        print "ERROR: more than 1 element (" . scalar @nodes . ") is found in $config_file by XPath: $_\n";
        die;
    }
    my $node = $nodes[0];
    if  ($node->nodeType == XML_ELEMENT_NODE) {
        $node->removeChildNodes();
        $node->appendText($environment_values{$_});
    } elsif ($node->nodeType == XML_ATTRIBUTE_NODE) {
        $node->setValue($environment_values{$_});
    } else {
        print "ERROR: unknown node type: " . $node->nodeType . "\n";
        die;
    }
}

# Save the resulting XML file
open (my $fh, '>:raw', $config_file) or die $!;
print $fh $doc->toString();
close $fh; 
```

尽管它生成的文件与原始文件非常相似，但仍然存在一些麻烦：

1.  换行符（行尾）是 Unix 风格的，虽然原始文件有它们在 Windows 风格。
2.  关闭 /> 之前的空格被删除，例如`<node />`变为`<node/>`.

有机会解决这些问题吗？我希望得到与原始文件完全相同的 XML 文件，唯一的区别是我正在修改的属性值......

PS 我真的很喜欢`<xmlpoke>`NAnt 的简单性。但是必须使用 Perl 来完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:00:46.887

我认为换行的答案可能是您正在使用的模式。

根据[http://perldoc.perl.org/PerlIO.html#Defaults-and-how-to-override-them](http://perldoc.perl.org/PerlIO.html#Defaults-and-how-to-override-them)：

> 如果平台类似于 MS-DOS 并且通常将 CRLF 转换为“\n”文本文件，则默认层为：
> 
> ```
>  unix crlf 
> ```
> 
> （低级别的“unix”层可以被平台特定的低级别层替换。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T04:24:43.580

一般来说，你不会得到你想要的东西——例如，单引号和双引号轮属性值之间的区别以及标签内的空格将会丢失。

最好的办法是用 Perl 读入一次并写出而不做任何更改，然后运行您的脚本，并比较这两个文件。****

# javascript - 通过Javascript重定向时如何保留StatefulSnippet var值

> ID：12218832
> 
> 赞同：2
> 
> 时间：2012-08-31T15:57:09.437
> 
> 标签：javascript, scala, lift

我有一个图像链接，当我单击它时，我想对某些类变量进行一些更改，然后重定向到其他页面并使用这些值。

这是我的代码，我正在使用 StatefulSnippet

```
class MySnippet extends StatefulSnippet {

  var selectedStudent: Student=null

  def students =
    ".tabla" #> studentsList.map { s =>
      "#id" #> s.Id &
      "#name" #> s.Name & 
      "#surname" #> s.Surname &
      "#buttonAcademic [src]" #> tickUrl &
      ".clickableAcademic [onclick]" #> SHtml.onEvent(onClickCallbackAcademic(s))
    }

  def onClickCallbackAcademic(student: Student,xhtml:NodeSeq)(s: String): JsCmd = {
    //makes some stuff to student
    selectedStudent = student
    JsCmds.RedirectTo("/Academic")
  }

} 
```

但是当我重定向到另一个页面时，我的 var selectedStudent 为空，我尝试调试并且 selectedStudent 具有正确的值，但是在重定向时它变为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:45:46.367

StatefulSnippet 使用 HTML 表单和隐藏参数将信息（应该使用哪个片段实例）传递到 Lift 的服务器端。

所以 JS 重定向将不起作用，因为它不会传递这些信息。

以下是我想到的一些可能适用于这种情况的解决方案：

*   在您的 onClickCallbackAcademic 中包装表单并通过 JS 提交。

*   不要使用 StatefulSnippet，而是使用 SessionVar 来存储您的 selectedStudent，这样您就可以在不提交表单的情况下使用它。

# ios - 我需要在 tabBarController 中创建许多控制器吗？

> ID：12218838
> 
> 赞同：0
> 
> 时间：2012-08-31T15:57:38.140
> 
> 标签：ios, tabbarcontroller

我的服务器中有一个 xml 文件：

```
<categories type="array">
  <category><id type="integer">5</id><name>1</name></category>
  <category><id type="integer">1</id><name>2</name></category>
  <category><id type="integer">2</id><name>3</name></category>
  <category><id type="integer">3</id><name>4</name></category>
  <category><id type="integer">4</id><name>5</name></category>
</categories> 
```

当我的应用程序启动时，我想在底部显示一个类别一个标签项，每个类别页面将显示该类别的许多食物列表

我想知道我需要创建一个类别一个控制器并将它们放在选项卡控制器中还是在选项卡栏中创建多个项目，并且每个类别共享一个页面视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:30:40.270

您需要为每个选项卡项创建一个唯一的视图控制器*实例*。但当然，所有实例都可以属于同一类。因此，您可以定义一个`MyViewController`具有属性的类`type`，`name`然后为每个选项卡实例化一个。

伪代码：

```
NSMutableArray *viewControllers = [NSMutableArray array];
for all categories {
    MyViewController *vc = [[MyViewController alloc] initWithNibName:...];
    vc.type = ....;
    vc.name = ....;
    [viewControllers addObject:vc];
}
tabBarController.viewControllers = viewControllers; 
```

# javascript - 当我的单元测试失败时，回调被调用两次

> ID：12218842
> 
> 赞同：4
> 
> 时间：2012-08-31T15:57:53.190
> 
> 标签：javascript, unit-testing, coffeescript, mocha.js, should.js

当回调失败时，我无法弄清楚为什么我的保存回调在我的 mocha 测试中被调用了两次。它不会两次调用保存，它只会再次触发保存的回调，但是当我的第二个单元测试失败时会出现“应该”错误。如果我从第二个测试中取出失败的“应该”断言`should.exist err`，它似乎工作正常并且不会触发保存索引回调两次。

```
class User

  constructor : (@name, @email, @pwd) ->
  save : (callback) ->
    unless this.validate()
      throw new Error('invalid data')
    else
      user = 
        name  : @name
        email : @email
        pwd   : @pwd

      node = db.createNode user

      node.save (err) ->
        unless err        
          user.id = node.id;
          node.index 'User', 'name', user.name.toLowerCase(), (err2) ->
            #why is this being fired twice when an assert in the callback fail?
            console.log '----------- triggering the save callback'
            callback err2, user

        else
          callback err 
```

摩卡咖啡测试

```
describe "User", ->
    it "should be able to save", (done) ->
        user = new User("quark", "quark@ds9.com", "profit")
        user.save (err, result) ->
            should.exist result
            done err

    #this second unit test should fail since the duplicate checking is not yet implemented
    it "should not allow duplicates to be saved", (done) ->
        user = new User("quark", "quark@ds9.com", "profit")
        user.save (err, result) ->
            console.log err
            should.exist err #this triggers the user.save callback to be fired twice
            done null 
```

以及测试结果

```
 User
    ◦ should be able to save: ----------- triggering the save callback
    ✓ should be able to save (43ms)
    ◦ should not allow duplicates to be saved: ----------- triggering the save callback
undefined
----------- triggering the save callback
{ name: 'AssertionError',
  message: 'expected undefined to exist',
  actual: undefined,
  expected: undefined,
  operator: undefined }
    ✓ should not allow duplicates to be saved 

  ✔ 2 tests complete (69ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:17:50.253

好吧，首先，具有预定义顺序的测试是不好的形式。您的第二个测试应该尝试将两个用户保存到数据库中，而不是依赖于第一个测试。

其次，我只能假设在这种情况下它`db`是一个 node-neo4j `Database`，并且您的断言框架（should.js？chai？）正在使用异常。所以我的回答是基于这个假设。

似乎 node-neo4j 正在调用异常情况下的回调函数。

尝试只做 a`throw 'blah'`而不是`should`断言，看看是否可以将其缩小到那个范围。这没有在 node-neo4j 文档中列出，所以它看起来像一个错误。

见：[http ://coffeedoc.info/github/thingdom/node-neo4j/master/classes/Node.html#save-instance](http://coffeedoc.info/github/thingdom/node-neo4j/master/classes/Node.html#save-instance)

# javascript - Backbone + RequireJS：让集合持久化？

> ID：12218844
> 
> 赞同：2
> 
> 时间：2012-08-31T15:58:07.490
> 
> 标签：javascript, backbone.js, requirejs

我将 Backbone 与 RequireJS 一起使用，我的视图需要在对应于各自 RESTful API 的 20 个集合之间切换。

“正常”的方式可以很好地处理事情，除了需要为每个 API 定义一个新的 Collection 之外，这会导致代码库非常臃肿：

**收集（x 20 次）**

```
define(function(require) {
    var Backbone = require('backbone');

    var c = Backbone.Collection.extend({
        url: '/path/to/api-1'
    });

    return new c();
}); 
```

**看法**

```
define(function(require) {
    var Backbone = require('backbone'),
           c1 = require('./collections/collection-1'),
           ...
           c20 = require('./collections/collection-20');

    var v = Backbone.View.extend({
        /* Some methods to toggle between Collections here */
    });

    return v;
}); 
```

通过只`return c;`在 Collection 内部执行，并在 View 内部调用`new c({url: /path/to/api-1});`，我能够减少高度重复的 Collection 定义；但现在在每次`new c();`调用时，API 总是会被戳以检索新的数据副本，这是对资源的浪费，也是我不想要的。

有什么方法可以让 Collections “持久化”？哪个更好地满足以下所有标准：

*   每个API对应的Collection，只`new`执行一次；
*   每个集合都可以在使用 RequireJS 定义的不同视图之间共享/访问；
*   Collection的定义可以被所有API重用；
*   全局命名空间根本没有被污染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:20:31.807

您无需创建新文件/集合。

你可以在你的视图中做这样的事情：

```
var collections = [];
collections.push( Backbone.Collection.extend({url: '/path/to/api-1'});
collections.push( Backbone.Collection.extend({url: '/path/to/api-2'});
collections.push( Backbone.Collection.extend({url: '/path/to/api-3'}); 
```

...

```
collections.push( Backbone.Collection.extend({url: '/path/to/api-20'});

var view1 = Backbone.View.extend( {data:collections} );
var view2 = Backbone.View.extend( {data:collections} ); 
```

然后，您将加载一个包含所有集合的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:35:30.760

与另一个答案类似，您可以将集合数组定义为 AMD 模块：

**收藏品**

```
define(['backbone', 'underscore'], function(Backbone, _) {
    var collections = [];

    var urls = ['/path/to/api-1', '/path/to/api-2', '/path/to/api-3'];

    _(urls).each(function(url) {
        collections.push(Backbone.Collection.extend({
            url: url
        }));
    });

    return collections;
}); 
```

你的观点可以像这样使用它：

**看法**

```
define(['Backbone', 'collections'], function(Backbone, collections) {

    var v = Backbone.View.extend({
        /* Some methods to toggle between Collections here */
    });

    return v;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T04:03:56.413

找到了一个相当hackish的解决方案：

用另一个**Model**包装你的**Collection**：

 **```
define(function(require) {
    var Backbone = require('backbone'),
        m = require('../models/model');

    var wrapper = Backbone.Model.extend({
        initialize: function() {
            var $_path = this.get('path');

            var c = Backbone.Collection.extend({
                model: m,

                url: $_path,

                initialize: function() {
                    this.deferred = this.fetch();
                }
            });

            this.set({
                collection: new c()
            });
        }
    });

    return wrapper;
}); 
```

然后，定义一个 Cache 容器：

```
define(function(require) {
    return cache = {};
}); 
```

在 View 模块中需要 Cache 容器和包装的 Collection：

```
define(function(require) {
    var $ = require('jquery'),
        _ = require('underscore'),
        Backbone = require('backbone'),
        cache = require(cache),
        wrapper = require('../collections/collection');

    var v = Backbone.View.extend({
        render: function($_path) {
            var c = cache[$_path] || cache[$_path] = new wrapper({
                path: $_path
            }).get('collection'));
        } 
        ....
    });

    return v;
}); 
```

通过这种方式，您可以获得使用动态生成的值实例化新集合的好处`$_path`，并且能够缓存从您的 API 获取的数据，只要页面不刷新 -`localStorage`如果您希望数据在页面刷新时保持不变，请实施。**

# python - 匹配 Python 字典中的实数键

> ID：12218848
> 
> 赞同：3
> 
> 时间：2012-08-31T15:58:23.690
> 
> 标签：python, floating-point, python-3.x

我有一个字典，它提供从实数元组到标识整数的映射。给定一个包含在公差范围内但不*完全*等于字典中的数字的元组列表，我想生成一个相应整数的列表。

例子：

```
tdict = {(0.334, 0.333, 0.333):1, (0.167, 0.666, 0.167):2, (0.5, 0.5, 0):3}
tlist = [(0.333, 0.333, 0.333), (0.16667, 0.6666667, 0.17), (0.34, 0.33, 0.33), (0.5001, 0.4999, 0.0)]
tol = 0.01 
```

运行我想要的代码应该会产生结果

```
ilist = [1,2,1,3] 
```

因为每个元组中的所有数字都在`tdict`. 我可以通过迭代`tdict.keys()`并分别比较每个来做到这一点，但我觉得应该有更好的方法。获取这些元组的相应整数的最有效方法是什么？它不必涉及字典，这对我来说似乎是最自然的。我正在使用 Python 3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:03:31.243

您显然希望在具有一定网格间距（与您的容差值直接相关）的 3D 网格上投影 3D 空间中的点并创建某种直方图。给自己写一个投影函数：它将任意的 3 元素列表/元组（描述空间中的点的向量）作为参数，并将其投影到某个网格点上。你这样做是为了填满你的字典，也为了把它读出来。此外，关于字典中的键，我认为你应该使用整数元组而不是浮点数，因为我不确定浮点数是否可以相同。

这是一个实现示例：

```
from collections import defaultdict
from random import random as rn

class Grid(object):
    def __init__(self, spacing):
        self.spacing = spacing
        self.griddict = defaultdict(int)

    def add_point(self, coords):
        """
        `vid`, a voxel id, is a tuple of indices, indicating one grid
        bin for each dimension, e.g. (1, 5, 2)
        rule: i_x = int(floor(x_coord / spacing))
        """
        vid = tuple([int(c//self.spacing) for c in coords])
        self.griddict[vid] += 1

    def get_point(self, coords):
        vid = tuple([int(c//self.spacing) for c in coords])
        return self.griddict[vid]

    def vid_centercoords(self, vid):
        """
        Return the real coordinates in space for a certain voxel,
        which is identified by its voxel id `vid` (a tuple of indices).
        """
        return tuple([(i-1)*self.spacing + self.spacing/2 for i in vid])

N = 20
fillpoints = [(rn(),rn(),rn()) for _ in xrange(N)]
testpoints = [(rn(),rn(),rn()) for _ in xrange(N)]

grid = Grid(spacing=0.3)

for p in fillpoints:
    grid.add_point(p)

print [grid.get_point(p) for p in testpoints] 
```

它的作用：它在 3D 空间中创建 20 个随机向量（所有坐标都在 0 和 1 之间）。它使用空间中的这些点填充 3D 网格。网格在每个维度上的间距为 0.3。这 20 个空间点中的每一个都分配给网格中的某个体素（只是 3D 像素的一个词）。每个分配将相应体素的计数器增加 1（将网格渲染为直方图）。然后，使用另一组随机的 20 个向量来读出体素。这些点再次投影到体素上，但这一次计数器只是返回而不是增加。执行测试：

```
$ python gridtest.py 
[2, 1, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0] 
```

使用您的数据执行：

```
fillpoints = [(0.334, 0.333, 0.333), (0.167, 0.666, 0.167), (0.167, 0.666, 0.167), (0.5, 0.5, 0), (0.5, 0.5, 0), (0.5, 0.5, 0)]
testpoints = [(0.333, 0.333, 0.333), (0.16667, 0.6666667, 0.17), (0.34, 0.33, 0.33), (0.5001, 0.4999, 0.0)]

grid = Grid(spacing=0.03)
for p in fillpoints:
    grid.add_point(p)
print [grid.get_point(p) for p in testpoints] 
```

它根据需要打印`[1, 2, 1, 3]`。我没有深入思考过这种关系`spacing=3*tolerance`。这很可能是错误的。我只知道存在确定性关系。证明/找到这个公式留给你作为练习:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:15:46.263

如果您有权访问 numpy，则可以使用[numpy.allclose](http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html)来检查匹配项：

```
>>> import numpy
>>> numpy.allclose((0.334, 0.333, 0.333), (0.333, 0.333, 0.333))
False
>>> numpy.allclose((0.334, 0.333, 0.333), (0.333, 0.333, 0.333), atol=0.1)
True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T16:03:10.303

1.  依次按`tdict.keys()`到每个点的距离排序。`tlist`
2.  选择前几个并在 中查找它们`tdict`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:11:25.783

您可以创建一个查找函数（查找元组的舍入版本）：

```
def look_up_tdict( t ):
    return tdict[ (float('%.3f' % t[0]),
                   float('%.3f' % t[1]),
                   float('%.3f' % t[2])
                 ] 
```

*注意：如果字典中没有任何内容接近`t`.* 然后你可以填充`ilist`：

```
ilist = [ look_up_tdict(t) for t in tlist ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:06:37.247

```
 tolerance = 0.1
 for i in tlist:
      list2 = filter(lambda x:abs(sum(i)-sum(x))<tolerance,tdict
      print [tdict[itm] for itm in list2] 
```

我认为这会起作用......虽然不是积极的......事实上它看起来并没有给你想要的输出

# facebook-graph-api - 为已有的 Facebook 帖子使用社交插件

> ID：12218849
> 
> 赞同：2
> 
> 时间：2012-08-31T15:58:24.547
> 
> 标签：facebook-graph-api, comments, facebook-like, facebook-social-plugins, facebook-comments

如果有办法为现有的 Facebook 帖子使用 Facebook 订阅源、评论和点赞社交插件？

我们正在寻找一种方法，让我们网站上的页面补充在我们的 FB 页面上发布的现有 Facebook 帖子。目标是让所有分享、评论和点赞集中在单个帖子上，而不是通常的模式，即每个人在他们的提要上分享不同的帖子。

麦当劳的示例帖子：http: [//www.facebook.com/photo.php? fbid=10151001277817014&set=a.10150319191897014.332821.50245567013&type=1](http://www.facebook.com/photo.php?fbid=10151001277817014&set=a.10150319191897014.332821.50245567013&type=1)

理想情况下，我们希望在我们的页面上引入上述帖子的功能（评论、分享、喜欢），这意味着人们可以从我们的页面发表评论，并且它也会在原始帖子上更新。

将 Facebook 帖子 URL 的变体输入到社交插件中不会引入现有的评论/喜欢/分享。它被视为单独的内容。

这是一个政策问题，还是目前在技术上不可行？

这与之前的问题有些相关：[Facebook 照片和相册的社交插件](http://facebook.stackoverflow.com/questions/7961394/social-plugins-for-facebook-photos-and-albums)

# r - R 错误：无法分配大小为 366.6 MB 的向量

> ID：12218850
> 
> 赞同：0
> 
> 时间：2012-08-31T15:58:25.427
> 
> 标签：r, optimization

我有以下for循环

```
for( i in 1:No_Simulations) {
      Vec =   rowSums(  sweep(Matrix1,MARGIN=2,Matrix2[i,],`*`)  )
      if( i == 1 ) {  Result <- Vec } else {   Result = cbind(  Result , Vec )  } } 
```

其中 No_Simulations = 10000，Matrix2 的暗淡为 10000 100，Matrix1 的暗淡也为 10000 100。

我无法运行这部分代码，因为 R 编译器给了我以下错误：“不可能的 d'allouer un vecteur de taille 366.6 Mo”

即无法分配大小为 366.6 MB 的向量。我也尝试使用 memory.limit() 来增加内存大小，但它仍然不起作用。有人可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:06:40.720

我不认为这应该是一个答案，但我似乎无法评论你的问题（我的代表太低了吗？）：

我确定您已经检查了内存管理的所有明显问题：

*   确保您在物理上有足够的内存来分配
*   确保您的进程总数低于 PROCESS 可寻址限制（现在只有 32 位真正的问题）
*   确保有足够的可用内存来分配您请求的大小的连续块。记忆碎片。

通过玩数字，您是否能够确定您不再能够分配内存的限制？每次都一样还是随着您启动/终止其他进程（即使用不同数量的内存）而改变？

编辑：请参阅[R 内存管理/无法分配大小为 n Mb 的向量](https://stackoverflow.com/questions/5171593/r-memory-management-cannot-allocate-vector-of-size-n-mb?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:09:38.307

不幸的是，32 位操作系统对其使用的 RAM 数量有一个固有的限制，并且 R 不会使用将对象放到您的硬盘驱动器上并从那里工作。如果你填满了 RAM（通常当函数 'memory.size()' 返回 1.8Gb 时），R 会返回一条消息，说明它不能再分配更多的内存。

bigmemory 包是您最好的选择。这个包允许您在 R 中使用非常大的对象（具有速度冲击）。[bigmemory 手册](http://cran.r-project.org/web/packages/bigmemory/bigmemory.pdf)中有大量与您相关的示例 。

最重要的是，有一些 vanilla-R 函数可以帮助 R 中的内存管理：

*   **memory.size()**：返回有关 R 中当前（或最大）内存使用情况的信息
*   **rm()** : 从工作区中移除一个 R 对象
*   **gc()**：调用垃圾收集器，重新分配浪费的内存。根据给定的可选参数，该函数还返回有关内存使用的有用信息。

我不会说只对您的数据进行抽样，但这种方法对某些（不是全部）问题很有用。

希望有帮助！

编辑：在 R 中查找对象的内存大小的一个非常有用的功能： [在 R 会话中管理可用内存的技巧](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:34:40.530

您正在一个可能有许多其他程序和进程正在运行的设备中执行此操作。关闭所有程序和 R。重新启动计算机并仅运行 R，然后再次运行代码。它可能会毫无怨言地成功。

# concurrency - 如何在 Clojure 中并行化分而治之的算法

> ID：12218852
> 
> 赞同：9
> 
> 时间：2012-08-31T15:58:32.177
> 
> 标签：concurrency, clojure, divide-and-conquer

首先说我有一个问题，计算 10 亿位 Pi，计算一个大数的阶乘，或者对一个大列表执行合并排序。我想将问题分成更小的任务，并同时执行每个任务并组合结果。首先，这种类型的并发的名称是什么，您将如何在 Clojure 中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:25:00.280

在当前的 Clojure 1.4 中，您可以使用 Maybe 、 或 来完成[`pmap`](http://clojuredocs.org/clojure_core/clojure.core/pmap)此[`pcalls`](http://clojuredocs.org/clojure_core/clojure.core/pcalls)操作[`pvalues`](http://clojuredocs.org/clojure_core/clojure.core/pvalues)。该`pmap`函数是 的并行版本`map`，而实际上`pcalls`并`pvalues`没有类似的非并行版本（尽管我认为`list`是 的“非并行版本” `pvalues`）。

但是，对于您描述的问题，听起来您希望使用并行版本的`reduce`. Clojure 1.2 中有一个旧的（[见这里](http://clojuredocs.org/clojure_contrib/clojure.contrib.datalog.util/preduce)），我从未使用过，所以我无法谈论它的实用性。

与 Clojure 1.5 一起出现的将是这个新的“reducers”库，Rich Hickey 在[这里](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)发表了博客。在这里，`fold`似乎是`reduce`.

# c# - 从 SQL Server Compact 查询字段值

> ID：12218858
> 
> 赞同：2
> 
> 时间：2012-08-31T15:59:00.960
> 
> 标签：c#, sql-server-ce, constraintexception

```
(playerListTableAdapter.GetHeight(sortedPlayers[counter]) 
```

**"Sorted Players"**是一个小数数组，与*主键*匹配。

当我调用查询**GetHeight**时，我收到以下错误：*“未处理 ConstraintException：无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。”*

查询的 SQL 语句是：

```
SELECT        Height
FROM            PlayerList
WHERE        (Number = @PlayerID) 
```

注意：在数据库中，**数字**是*主键*。

当我们逐步执行时，我们可以看到**sortedPlayers[counter]**确实匹配数据库中的玩家。

关于导致此错误的原因的任何想法？

谢谢！

-多米尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:06:09.000

在努力让查询正常工作后，我发现我可以使用以下语法更直接地访问该值：

```
decimal? Player1Hgt = dsPlayerTeam.PlayerList.Rows.Find(sortedPlayers[counter]).Field<decimal?>("Height"); 
```

这使我可以在不使用 tableAdapter 查询的情况下从数据库中提取值，并且非常简单。

顺便说一句，我确实尝试将我的 tableAdapter的**EnforceConstraints属性设置为 false，但它仍然抛出了错误。**

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:02:02.943

您在查询中添加主键

```
SELECT       YourPrimaryKey, Height
FROM            PlayerList
WHERE        (Number = @PlayerID) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T16:04:41.767

要解决这个问题，您可以在 DataTable 上设置`EnforceConstraints`为。`false`

```
EplayerListTableAdapter.EnforceConstraints = false; 
```

更详细的答案在这里：[http ://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/c2c9158d-cddf-40cf-bf6c-794dc3ef9c7f/](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/c2c9158d-cddf-40cf-bf6c-794dc3ef9c7f/)

# iphone - 安排从现在起 24 小时后发送电子邮件？

> ID：12218861
> 
> 赞同：0
> 
> 时间：2012-08-31T15:59:21.863
> 
> 标签：iphone, xcode, email, ios5, uilocalnotification

我希望我的应用程序能够在未来的各个时间点发送提醒电子邮件（或文本）。我在想这可能可以通过本地通知来实现，但现在我不知道怎么做。关于实现这一目标的好策略有什么建议吗？更多细节：

我正在使用 Xcode 构建一个 iPhone 应用程序。这是一个小型提醒应用程序，会在用户指定的小时数过去后提醒您做某事。因此，您可以在 11 小时内为自己设置一个提醒 TiVo 的驴赛跑，例如，该应用程序会通过电子邮件发送该提醒。我希望将整个过程保留在电话中。因此，该应用程序将注册一个事件（如本地通知）并使用 Mail 应用程序发送电子邮件。

如果我必须走服务器路线，我总是可以设置 cron 作业，但我希望避免这种情况，因为那时我需要担心扩展到许多用户。如果更现实的话，iMessage 或推文可能是一个不错的选择。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:16:27.827

根据我的研究（我希望有一天我发现我错了），没有办法为未来安排电子邮件、文本、推文或任何其他通信。可以使用本地通知，但可用的操作是在设备上显示消息并播放声音。而已。根本问题是，如果您的应用程序处于前台并处于活动状态，您将无法执行代码。如果有人认为我对此有误，请插话！

# haskell - 稍微复杂的 [String] -> [UTCTime]

> ID：12218863
> 
> 赞同：2
> 
> 时间：2012-08-31T15:59:30.973
> 
> 标签：haskell

我有一个字符串列表，这些字符串要么是 unixtime，要么是该 unixtime 的增量，例如。

```
listOfTimes :: [String]
listOfTimes = ["u1345469400","1","2","3","4","5","6","u1346427334","1","2","3","4","5","6"] 
```

我写了一个函数，它需要一个 unixtime 并返回一个 UTCTime

```
dateStringToUTC :: [Char] -> UTCTime
dateStringToUTC a = out
  where
    asInt = read (tail a) :: Integer
    out = psUTC asInt 
```

或者取一个增量和最后一个 unixtime 并返回一个 UTCTime

```
incToUTC :: [Char] -> String -> UTCTime
incToUTC a b = madeDate  
  where
    madeDate = psUTC posixOffset
    posixOffset = lastTime + incTime
    lastTime = read (tail a) :: Integer
    incTime = read b :: Integer 
```

但是我想不出一种方法来编写一个可以映射到返回 [UTCTime] 的整个列表的函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:47:36.027

正如 ja 的回答所说，这不是一张简单的地图。一般折叠会起作用，但任何列表操作都是如此。

您在此处尝试执行的操作听起来更具体地类似于[使用 for `scanr`](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Data-List.html#v%3ascanr)，这是一个正确的折叠，可以生成每个中间步骤的列表，而不仅仅是最终结果。在您的情况下，累加器将是以前的时间值，并且在每一步中，您要么添加增量，要么将其替换为新时间。输出将是每个计算时间的（懒惰！）列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:06:47.647

它不是地图，因为您的 inc 函数有 2 个参数 - 您在后续调用中使用了前一个列表元素。查看折叠：`foldl`、`foldr`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:28:18.147

另一种方法是将彼此对应的时间收集到一个单独的列表中，并分别处理，即

```
convertUTCs [] = []
convertUTCs (x:xs) = map (incToUTC x) increments ++ convertUTCs rest
  where
    (increments, rest) = break (\str -> head str == 'u') xs 
```

这需要第一个元素（应始终为 形式`"u12345"`）和该时间的所有增量（即不以 开头的元素`'u'`），然后对它们进行处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T15:59:47.780

`map`- 改变每个元素

`fold`- 结合所有元素

`scan`- 结合所有元素以保持“总”的运行 - 这就是您所需要的

将所有内容都保留为整数会更容易，直到最后：

```
type PosixOffset = Integer 
```

您的字符串`listOfTimes`可能是 unix 时间、增量或错误值。我们可以代表它，`Maybe (Either PosixOffset Integer)`但这可能会让人讨厌。让我们自己动手：

```
data Time = Unix PosixOffset | Inc Integer | Error String deriving Show 
```

这使我可以灵活地处理我们稍后处理错误的操作：使用 使程序崩溃`error`，向用户显示`Error`消息但以某种方式允许他们恢复，或者忽略错误的值。

让我们制作一个安全的版本来替换`read :: String -> Integer`，它会返回`Nothing`而不是崩溃。我们需要`import Data.Char (isDigit)`

```
readInteger :: String -> Maybe Integer
readInteger "" = Nothing
readInteger xs | all isDigit xs = Just (read xs)
               | otherwise = Nothing 
```

现在我们可以将它用于`readTime`一些有用的`Error`消息。

```
readTime :: String -> Time
readTime ('u':xs) = case readInteger xs of
                    Just i  -> Unix i
                    Nothing -> Error $ "readTime: there should be an integer after the u, but I got: " ++ 'u':xs
readTime [] = Error "readTime: empty time"
readTime xs = case readInteger xs of
              Just i  -> Inc i
              Nothing -> Error $ "readTime: " ++ xs ++ " is neither a unix time nor an increment." 
```

计划是将我们的 Strings 列表转换为 pairs 列表，`(PosixOffset,Integer)`最后一个已知`PosixOffset`的来自 unix 时间，以及当前的增量。然后我们需要能够将这些对转换为`UTCTime`

```
toUTC :: (PosixOffset,Integer) -> UTCTime
toUTC (p,i) = psUTC (p+i) 
```

现在我们需要知道如何将 s 的总和`Time`与 next结合起来`Time`。我们将保留最后一个 unix 时间以供参考。

```
addTime :: (PosixOffset,Integer) -> Time -> (PosixOffset,Integer)
addTime (oldunix,oldinc) time = case time of
    Unix new  -> (new,0)       -- If there's a new unix time, replace and reset the inc to 0.
    Inc inc   -> (oldunix,inc) -- If there's a new increment, replace the old one.
    Error msg -> error msg     -- If there's an error, crash showing it. 
```

或者你可以使用

```
addTimeTolerant :: (PosixOffset,Integer) -> Time -> (PosixOffset,Integer)
addTimeTolerant (oldunix,oldinc) time = case time of
    Unix new  -> (new,0)          -- If there's a new unix time, replace and reset the inc to 0.
    Inc inc   -> (oldunix,inc)    -- If there's a new increment, replace the old one.
    Error msg -> (oldunix,oldinc) -- If there's an error, ignore it and keep the time the same. 
```

现在我们可以把它粘在一起：把`String`s 变成`Time`s，然后用ning把它们组合`(PosixOffset,Integer)`成对，然后把所有得到的对变成s。`scan``addTime``UTCTime`

```
runningTotal :: [String] -> [UTCTime]
runningTotal [] = []
runningTotal xss = let (t:ts) = map readTime xss in      -- turn Strings to Times
    case t of
        Error msg -> error msg
        Inc _     -> error "runningTotal: list must start with a unix time"
        Unix po   -> map toUTC $ scanl addTime (po,0) ts -- scan the list adding times, 
                                                         -- starting with an initial unix time
                                                         -- then convert them all to UTC 
```

或者如果你喜欢保持冷静并继续的方法`addTimeTolerant`，你可以使用

```
isn't_UnixTime :: Time -> Bool
isn't_UnixTime (Unix _) = False
isn't_UnixTime _        = True

runningTotalTolerant :: [String] -> [UTCTime]
runningTotalTolerant xss = 
  let ts = dropWhile isn't_UnixTime (map readTime xss) in    -- cheerily find the first unix time
    if null ts then [] else                                  -- if there wasn't one, there are no UTCTimes
       let (Unix po) = head ts in                            -- grab the first time
          map toUTC $ scanl addTimeTolerant (po,0) (tail ts) -- scan the list adding times, 
                                                             -- starting with an initial unix time
                                                             -- then convert them all to UTC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:50:02.203

```
timesToUnixTimes :: [String] -> [UTCTime] 
```

正如 ja 指出的那样，这不是一个简单的`map`. `[Integer]`但是将 a 转换为 a的最后一步`[UTCTime]`是 a `map`：

```
timesToUnixTimes (s : ss) = map psUTC (i : is)
  where 
```

输入列表的第一个元素`s`最好是 unixtime：

```
 i = read (tail s) :: Integer 
```

后续元素 ,`ss`可能是两者之一，因此解码函数需要访问输出列表的前一个元素：

```
 is = zipWith timeToInteger ss (i : is) 
```

写作留作`timeToInteger :: String -> Integer -> Integer`练习。

由此得出两点：

1.  您可以认为`zipWith`一次将一个函数映射到两个列表（类似地，一次`zipWith3`将一个函数映射到三个列表，一次`zipWith4`映射到四个列表等；没有调用函数，`zipWith1`因为它被调用`map`）。

2.  `is`出现在它自己的定义中。这要归功于~~惰性~~非严格性。

    1.  的第一个元素`is`取决于 和 的第一个`ss`元素`i`。
    2.  的第二个元素`is`取决于 的第二个元素`ss`和 的第一个元素`is`。
    3.  的第三个元素`is`取决于 的第三个元素`ss`和 的第二个元素`is`。
    4.  等等。

    的任何元素都不`is`依赖于自身，或依赖于 的后一个元素`is`。

# php - 如何根据传入的 Hash Tag 发送 PHP 请求？

> ID：12218865
> 
> 赞同：1
> 
> 时间：2012-08-31T15:59:30.697
> 
> 标签：php, javascript, wordpress, jquery, hashtag

我有一个需要处理的井号标签。我的 Javascript 得到了它，重新格式化了一下，现在我需要重定向到带有该标签的页面。但是，主题标签是帖子的名称，并且 Wordpress 设置为具有带有帖子日期的网址。所以我需要向数据库发送请求以重定向到帖子，或者获取帖子的 url 或 ID，然后使用 javascript 重定向..

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:05:58.643

哈希标签是一种在 Twitter 消息中指示搜索词的方法。我认为您的意思是片段标识符。

片段标识符在客户端处理，并且在请求 URL 时不会发送到服务器。

如果您想从它们那里获取数据，您必须在 JavaScript 中解析 URI（请参阅 参考资料`location.hash`）并向服务器发出一个新的 HTTP 请求，将其作为数据包含在内。

当服务器在初始请求中了解其内容是有意义的时，不建议使用片段标识符[。](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:06:14.697

我不确定我是否理解。如果您想知道如何根据帖子的标题获取永久链接，然后将其发送到服务器，调用[get_page_by_title](http://codex.wordpress.org/Function_Reference/get_page_by_title)并返回[get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)。

# node.js - 在 bluehost 中谁可以访问 nodejs 应用程序？

> ID：12218869
> 
> 赞同：2
> 
> 时间：2012-08-31T15:59:37.767
> 
> 标签：node.js, bluehost

我有一个在 bluehost 上运行的应用程序，但我无法访问它。

我尝试访问域（例如*mydomain.com:8000*），但不起作用。

有什么方法可以在**不需要专用 ip**的情况下访问应用程序？

**我的应用程序：**

```
var port = 8000;

var express = require('express'),
    gen = require('./generator');

var app = express();

app.get('/', function(request, response){
    response.send('hello word!');
});

app.use(function(err, request, response, next) {
    console.error(err.stack);
    response.send(500, 'Something broke!');
});

app.listen(port);

console.log('Listening on port ' + port); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T04:42:11.270

如果您使用共享主机，并且希望公众可以访问您的应用程序，那么最好的办法是在某个未使用的 IP 端口上运行服务器并编写一个 CGI 脚本/二进制文件，将传入请求转发到 node.js服务器。

共享主机的最大缺点之一是您不允许运行自己的公开可见的服务器，并且 node.js 需要这样做才能工作。

# ruby - 奇怪的 Ruby group_by 和选择行为

> ID：12218872
> 
> 赞同：0
> 
> 时间：2012-08-31T15:59:51.900
> 
> 标签：ruby, arrays, select, filter

`select`尝试使用以下方法创建的哈希时，我遇到了奇怪的行为`group_by`：

当我跑

```
all_records.group_by(&:opportunity).map{|foo| foo[1].length != 1 }.select{|x| x} 
```

我得到了一些元素：`=> [true, true]`

然而，当我尝试选择时，使用我`map`ped 的确切块：

```
all_records.group_by(&:opportunity).select{|foo| foo[1].length != 1 } 
```

我没有得到任何结果：`=> {}`

就像一个健全性检查一样，当我第一次将哈希转换为数组时，它按预期工作`sort`：

```
all_records.group_by(&:opportunity).sort.select{|foo| foo[1].length != 1 }.length 
```

结果：`=> 2`

这对我来说很奇怪，因为第一个结果表明哈希`foo[1]`完美地识别了该命令。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:19:22.157

在第一个片段中，您正在`Enumerable#map`对哈希执行 a ，其中一个块获得一个参数（为什么不解压缩它？），在这里您得到一对（如您所料）。在第二个片段中，您`Hash#select`再次使用单个参数进行操作（您应该再次解压缩键/值），但在这里您只得到键，而不是对（因为方法是如何实现的，请检查源代码细节）。

```
>> {a: 1, b: 2}.map { |x| p x }
[:a, 1]
[:b, 2]
>> {a: 1, b: 2}.select { |x| p x }
:a
:b 
```

如果您访问[Hash#select](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-select)的文档，您会看到它明确需要解压缩的参数。结论：使用任何方法迭代哈希时，总是解包键/值：

```
records.group_by(&:opportunity).select { |key, values| values.length > 1 } 
```

# cuda - 需要帮助诊断 cudaMemcpyToSymbol 错误

> ID：12218873
> 
> 赞同：3
> 
> 时间：2012-08-31T15:59:59.917
> 
> 标签：cuda, constants, gpu

我正在编写代码并使用`cudaMemcpyToSymbol`将一些代码复制`cudaPitchedPtrs`到（每个进程多个）GPU 设备，以便我可以方便地访问一些主机复制的内存。但是，我发现了一个非常奇怪的错误（我不敢这么称呼它，但我没有其他解释），我不知道如何有效地解决它。这是我负责的代码部分：

因此，我从 main.c 中的 main() 调用 gpu_kernels.cu 中的 init_gpu() （init_gpu 具有通常的`extern "C"`框架，但我删除了它，它并没有影响下面的问题）。gpu_utilities.cu 是唯一包含 gpu_decs.h 的文件（我将所有 CUDA 源代码内联到 gpu_kernels.cu 中）。

现在，这是 gpu_decs.h 的一部分：

```
 __constant__ struct cudaPitchedPtr rad_gpu;

  //__constant__ struct cudaPitchedPtr test_pptr; 
```

当第二行被注释掉时，以下 cudaMemcpyToSymbol 操作将失败，错误代码为 11：

```
cudaErrorCheck(cudaMemcpyToSymbol(rad_gpu, 
    &((*gpu_rad_parms)[n].dstPtr), sizeof(struct cudaPitchedPtr),
    cudaMemcpyHostToDevice), "init_gpu - rad_gpu - symbol"); 
```

但是，当我取消注释 test_pptr （从未在我的代码中的任何地方定义或使用过）时，此行不会引发错误。test_pptr 的类型似乎无关紧要，只要它大于 char，我认为（这可能不是真的；我没有完全描述问题）。

可能有趣的是，如果没有这一行，rad_gpu 是 gpu_decs.h 中的最后一个 __constant__ 声明。但是，这个错误对我来说仍然没有意义。有没有人见过或听说过这个问题的故事，并且有可靠的方法来解决它？我对声明 test_pptr 并考虑问题已解决感到不舒服。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:20:29.993

可能是类型大小不匹配：cudaPitchedPtr 有几个 size_t 类型的字段。因此，如果在您的主机端 sizeof(size_t) 是 8 个字节，而在设备上这是 4 个字节，您可能会遇到问题。这也可以解释为什么定义另一个 pitchedPtr 可以解决问题，因为分配了更多内存。

# php - 用户登录后数据库中的数据未显示在视图中 [codeigniter]

> ID：12218874
> 
> 赞同：0
> 
> 时间：2012-08-31T16:00:02.133
> 
> 标签：php, codeigniter, activerecord, login

用户登录后（使用 codeigniter），它会显示一个私有区域，该区域应该显示存储在数据库中的新闻文章——但它什么也没显示。我已经尝试并测试了指向此的 url 链接，并且仅在用户登录后才能正常显示。任何帮助将不胜感激。

新闻模型：

```
class News_model extends CI_Model {

    public function __construct() {
        parent::__construct();
    }

    function getArticle () {
        $this->db->select('*');
        $this->db->from('news');
        $this->db->order_by('id', 'DESC');
        return $this->db->get()->result_array();
    } 
```

}

新闻控制器：

```
class News extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $this->load->model('admin/news_model');
    }

    public function index() {
        $data = array('news' => $this->news_model->getArticle());
        $data['title'] = 'Admin | News Home';
        $data['heading'] = 'News Articles';
        $this->load->view('admin/news', $data); 
} 
```

}

新闻视图：

```
 <?php foreach ($news as $article): ?>
        <h2><?php echo $article['title'] ?></h2>
            <p><?php echo $article['content'] ?></p>
            <p><?php echo $article['author'] ?></p>
            <p><?php echo $article['date'] ?></p>
    <?php endforeach ?> 
```

我尝试通过对象和数组传递数据，但仍然没有运气。我还没有发布登录模型/视图/控制器以防问题出在此处，但如果看起来正确则可以。

任何指导都会有所帮助，因为我刚刚修复了一个错误并且这已经发生了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:07:42.183

这是一些解决问题的代码：

```
public function index() {
     $data = array('news' => $this->news_model->getArticle());
     $data['title'] = 'Admin | News Home';
     $data['heading'] = 'News Articles';

     echo "<pre>";
     print_r($data);
     echo "</pre>";

     $this->load->view('admin/news', $data); 
} 
```

上面的代码应该为您提供`$data`变量的结构。如果您的新闻文章没有显示，您应该回溯您的步骤，直到找到问题的根源。

# css - 使用 var 的 Flex 样式 CSS

> ID：12218875
> 
> 赞同：0
> 
> 时间：2012-08-31T16:00:11.243
> 
> 标签：css, apache-flex, flex4

我正在使用 CSS 样式表，其中定义了多种样式，这些样式基于我的 Flex 应用程序中的“baseColour”属性。首次加载应用程序时，此 baseColour 会正确应用于所有样式。

现在，我正在寻找的是：如果用户更新了这个“baseColour”，那么所有组件样式都应该基于这个“baseColour”更新自己。

我怎样才能做到这一点？任何指针都会有所帮助。谢谢。

样式.css

```
.leftPage
{
    skinClass: ClassReference("skins.LeftPageSkin");
    themeColour: PropertyReference("baseColour");
}

.rightPage
{
    skinClass: ClassReference("skins.RightPageSkin");
    themeColour: PropertyReference("baseColour");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:45:15.450

检查 StyleManager 是否有任何适合此的方法。你为什么使用 CSS 而不是数据绑定？

# javascript - 使用 Backbone.js 访问部分 JSON 响应

> ID：12218876
> 
> 赞同：1
> 
> 时间：2012-08-31T16:00:11.850
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一些深度多层次的 JSON 响应数据。但是，我只需要在一步一步的向导样式页面中随时检索其中的一部分。在向导的第一步中，需要一个顶级对象`category_a`（其中包含一个对象数组），在下一步中，将使用另一个顶级对象`category_b`，依此类推。

在每一步，主干都会创建几个`ProductView`视图并附加到一个 div `#photo_list`。每个`ProductView`视图都将使用`img`数组中元素的对象。

**问题：**我应该如何一次访问一个顶级对象，给定下面显示的我的模板文件（可以编辑/改进），我试图使其尽可能简单。

**示例 JSON 响应**

*对象名称`category_a`和对象数量可能会有所不同*

```
{"category_a":[
    {"product_id":6283,
    "img":"http:\/\/www.mysite.com\/img\/6283_5e093.jpg"},

    {"product_id":6284,
    "img":"http:\/\/www.mysite.com\/img\/6284_5e093.jpg"}
    ],

"category_b":[
    {"product_id":6283,
    "img":"http:\/\/www.mysite.com\/img\/6283_5e093.jpg"},

    {"product_id":6284,
    "img":"http:\/\/www.mysite.com\/img\/6284_5e093.jpg"}
    ]
} 
```

**Backbone.js 代码**

*`productList`当前包含整个 JSON 响应*

```
ProductCollection = Backbone.Collection.extend({
    url: '/api/someurl',
    model: Product
});

ProductListView = Backbone.View.extend({
    el: '#photo_list',

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(product, index){
            $(this.el).append(new ProductView({ model: product }).render().el);
        }, this);
        return this;
    }
});

ProductView = Backbone.View.extend({
    tagname: 'div',
    className: 'photo_box',

    template: _.template($('#tpl-PhotoListItemView').html()),

    render: function() {
        this.$el.html(this.template( this.model.toJSON() ));
        return this;
    }
}); 
```

**创建集合+视图**

```
this.productList = new ProductCollection();
var self = this;
self.productListView = new ProductListView({ collection: self.productList });
this.productList.fetch(); 
```

**模板片段**

```
<div class="photo_container">
    <img src="<%= img %>" class='photo' />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:58:40.433

我已经做了类似的事情（从 JSON 响应中附加项目），但我在一个视图中完成了这一切，这可能会或可能不会满足您的需求。以为我会分享以防万一它有帮助。

我的模板如下所示：

```
<div id="folders" data-role="content">
    <div class="content-primary">
        <ul data-role="listview" id="foldersListView" data-filter="true">
        <!-- insert folders here -->
        <% for (var i = 0; i < folders.length; i++) { %>
            <% var folder = folders[i]; %>
            <li id=<%= folder.displayName %>><h3><%= folder.displayName %></h3><span class="ui-li-count"><%= folder.count %></span><ul></ul></li>
        <% } %>
        <!-- done inserting -->
        </ul>
    </div>
</div> 
```

然后在我的视图的初始化函数中，我只需传递 JSON 对象，模板将为我逐步完成每个项目。

```
initialize : function() {
    _.bindAll(this, "render", "logoutAction");
    this.template = _.template($("#folders").html(), { folders : app.folders.toJSON() });
    // Add the template HTML to the body.
    $(this.el).html(this.template);
}, 
```

在分享了所有这些之后，我认为对您来说更简单的解决方案可能是在创建视图时逐步浏览每个项目。

```
this.productList = new ProductCollection();
var self = this;
productListJSON = self.productList.toJSON()
$.each(productListJSON, function(product) {
    new ProductListView({ product: productListJSON[product].product });
}); 
```

# ruby-on-rails - Rails - 如何在按小写排序的活动记录模型中使用类级别方法？

> ID：12218878
> 
> 赞同：0
> 
> 时间：2012-08-31T16:00:17.797
> 
> 标签：ruby-on-rails, ruby, class, sorting, model

在 ruby​​ 中，我可以`my_ar_collection.sort_by{ |element| element.name.downcase}`在我的控制器中执行此操作。

我想要一个 ActiveRecord 类方法来做到这一点。

现在我有：

```
def self.ordered
  order(:name)
end 
```

但我想补充`.downcase`一点。我尝试了很多方法，例如使用`sort_by`和使用`order :field.downcase`但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:06:17.053

此代码有效：

```
Use order("lower(name)") 
```

但并不理想，因为它使用的是 sql 函数而不是 ruby​​ 函数，因此它与数据库无关——也就是说——lower() 确实存在于大多数 sql 实现中，包括 MySQL、Postgres、sqlserver 和 Oracle。但是对于这个和其他类似的操作，我更喜欢使用 Ruby 方法。

# informix - Informix 4GL，如何打印？

> ID：12218880
> 
> 赞同：1
> 
> 时间：2012-08-31T16:00:29.640
> 
> 标签：informix, 4gl

我有一列（chgkey）有 17 行记录。如何在同一行中打印前 3 条记录（如 raw1、raw2、raw3）。现在我可以毫无问题地打印 raw1 了。任何帮助，将不胜感激。下面是我的代码。

```
 let rpt.chgkey =  null
      select * into z_charge.* from charge where charnum in
          (select shtwrd_no from crbookid where
               crbookid.book_no = rpt.book_no and crbookid.line_no = rpt.line_no )

    let scratch = z_charge.chgkey
    let rpt.chgkey = scratch
         call make_charge_section(scratch) returning rpt.chgkey
    print
        column   1, ESC, "(s0p12h0s3b4099T", ESC, "&a0.5R"
    print
    print  ESC,"&a15.1R", ESC,"&a15C", rpt.chgkey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:47:23.467

在 print 语句的末尾使用分号来抑制行尾字符。

> 但是，如果您使用分号终止 PRINT 语句，则会在行尾隐藏隐含的 LINEFEED 字符。

[打印](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.gen_busug.doc/c_fgl_reports_PRINT.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:20:46.603

如果 SELECT 语句（现在带有 INTO 子句）返回多行，除非您将其包装在 FOREACH 循环中，否则您将收到运行时错误。

如果在 REPORT 函数中有 FOREACH 循环，那么处理起来相当容易；如果数据是通过单独的 OUTPUT TO REPORT 语句提供的，那就更难了。

假设生活很容易，那么：

```
DECLARE c CURSOR FOR
    SELECT * INTO z_charge.*
      FROM charge
     WHERE charnum IN
           (SELECT shtwrd_no FROM crbookid
            WHERE crbookid.book_no = rpt.book_no AND crbookid.line_no = rpt.line_no
           )

LET i = 0
FOREACH c
    PRINT COLUMN (i * 20 + 1), z_charge.raw;
    LET i = i + 1
    IF i MOD 3 = 0 THEN PRINT END IF
END FOREACH
IF i MOD 3 != 0 THEN PRINT END IF 
```

循环`z_charge.raw`在适当的列中打印值（您可以像这样对列号进行计算）。当然，这假设原始数据适合 20 个字符。

* * *

```
DECLARE c CURSOR FOR
    SQL
    SELECT FIRST 3 * INTO z_charge.*
      FROM charge
     WHERE charnum IN
           (SELECT shtwrd_no FROM crbookid
            WHERE crbookid.book_no = rpt.book_no AND crbookid.line_no = rpt.line_no
           )
    END SQL 
```

# css - CSS背景图片放置

> ID：12218881
> 
> 赞同：0
> 
> 时间：2012-08-31T16:00:30.677
> 
> 标签：css, background-image

我在这里有这个网站[http://cowelllaserhair.com/index.php](http://cowelllaserhair.com/index.php)你会注意到有一个带有 div 的段落像这样包裹着它......

```
<div style="background-image:url(/images/newLocation.jpg);">
<p style="text-align:center;">
Text here
</p>
</div> 
```

但它切断了图像，我也希望[像这样有更高的图像](http://cowelllaserhair.com/images/newLocation2.jpg)

这可能吗？我该怎么做呢？

通过在我的 div 中添加图像的高度和背景图像，解决了图像被切断的问题`<div style="background-image:url(/images/newLocation.jpg); height:580px;">`

现在唯一要做的就是获取图像中的文本。转到[http://cowelllaserhair.com/index.php](http://cowelllaserhair.com/index.php)看看我在说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:11:03.787

你真的不需要'p'标签。

只需将 div 设置为与背景图像相同的宽度和高度，并设置为文本居中对齐。

然后在 DIV 的顶部设置一些填充，以便您的文本位于您需要的位置（确保从 DIV 的高度中减去您使用的顶部填充量。

将背景图像设置为没有重复并且位于左上角。

简单的。

```
div {
    width:XXXpx
    height:XXXpx
    padding-top:20px;
    background:url(/images/newLocation.jpg) no-repeat 0 0;
    text-align:center;
}

<div>
    Text here
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:05:49.987

我建议您添加以下两条规则：

*   `position: relative`到`div`;

*   `position: absolute`到段落。

这样，您可以轻松地将段落移动到其父级中。

检查这个[jsFiddle](http://jsfiddle.net/xyzzy/HDp4v/)：我刚刚应用`top: 100px`到该段落，以便将它垂直居中在`div`.

# jquery - jQuery单击事件未触发-ios主屏幕Web应用程序

> ID：12218883
> 
> 赞同：1
> 
> 时间：2012-08-31T16:00:43.037
> 
> 标签：jquery, ios, events, web-applications, click

构建一个 Web 应用程序并且无法触发点击事件。从普通的 Safari 实例运行时，它可以完美运行，但从主屏幕运行时，它会失败。

```
$("a.applink").live('click', clickHandler);
var clickHandler = function(e) {
    console.log(e);
    e.preventDefault();
} 
```

从主屏幕运行时，“e”为空。如果我将 'click' 替换为 'touchend'，它确实有效，但 touchend 没有给出正确的行为（即，如果您碰巧触摸了一个链接来开始滚动，它会触发意外的点击）。

对此有适当的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:18:44.983

我是这样做的：

本质上，当您浏览页面时，您将点击或滚动。（嗯，还有其他的东西，比如捏和滑动，你可以稍后弄清楚）......

所以点击你的“touchstart”之后会跟着一个“touchend”在滚动你的“touchstart”之后会跟着一个“touchmove”

使用 Jq 1.7... 在其他版本上，您可以使用 .bind()

```
function nextEvent() {
    //behaviour for end
    $(this).on('touchend', function(e){
        /* DO STUFF */
        $(this).off('touchend');
        });
    //behaviour for move
    $(this).on('touchmove', function(e){
        $(this).off('touchend');
        });     
    }

$(element).on('touchstart', this, nextEvent); 
```

基本上，当“touchstart”发生时，我将动作绑定到“touchend”和“touchmove”。

'Touchend' 做任何我想要点击做的事情，然后解除自身绑定 'Touchmove' 基本上什么都不做，除了解除绑定'touchend'

这样，如果你点击你会得到动作，如果你滚动什么都不会发生，但滚动..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:36:30.767

首先定义`clickHandler`函数，一旦它被声明，然后`$("a.applink").live('click', clickHandler);`立即使用，您在声明之前将 clickHandler 绑定到事件，

注意：此模式中的顺序很重要。

```
var clickHandler = function(e) {
    console.log(e);
    e.preventDefault();
}

jQuery(function(){
    $("a.applink").live('click', clickHandler);
}) 
```

或者

像这样更改您的代码

```
jQuery(function(){
    $("a.applink").live('click', clickHandler);
});

function clickHandler (e) {
    console.log(e);
    e.preventDefault();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T15:50:27.533

我知道这个答案有点晚了，但万一其他人偶然发现了这个问题：

`cursor: pointer;`如果您通过 JS 使元素“可点击”，则添加到元素的样式中。这将告诉 iOS 触发点击事件。

一般来说，使用触摸事件可能会干扰滚动。

# extjs - Extjs 在容器中动态包装项目

> ID：12218885
> 
> 赞同：6
> 
> 时间：2012-08-31T16:00:51.603
> 
> 标签：extjs, extjs4

为什么这么难？我有一个容器，layout:'hbox'，以及其中的一组按钮。问题是按钮继续超出容器的右边界。将内容包装在容器内的最佳实践方法是什么？我应该浮动：“离开”我的子项目吗？我可以在任何地方使用固定宽度，我的网站不会水平调整大小。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T17:12:23.240

做我在这里寻找的正确方法是使用`layout:'column'`它将其孩子视为浮动div。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T16:49:36.750

如果您希望内容溢出到下一个“行”，则 hbox 布局不是正确的布局。Hbox 在单行中以固定宽度对齐和分布组件。最好坚持使用“自动”布局（这是默认设置）并允许浏览器通过 CSS 浮动控制溢出（正如您所提到的）。

或者，您可以使用`Ext.toolbar.Toolbar#enableOverflow`- 查看[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Toolbar-cfg-enableOverflow)

> 配置 true 以使工具栏提供一个按钮，该按钮激活下拉菜单以显示溢出工具栏宽度的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T10:23:50.767

如果它会有所帮助；`layout`我默认保留as`auto`并使用额外的 CSS 来实现使用中的`wrap`方法`responsive`；

一些嵌套子容器正在`foocontainer`动态渲染。所以在 CSS 中完全拥有响应式 UI。

```
.foocontainer > div[data-ref="outerCt"] > div[data-ref="innerCt"] {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex!important;
  flex-wrap: wrap!important;
} 
```

# java - IBM Websphere JPA org.apache.openjpa.persistence.ArgumentException

> ID：12218886
> 
> 赞同：2
> 
> 时间：2012-08-31T16:00:52.767
> 
> 标签：java, jpa, websphere, openjpa

我是 JPA 的新手。

我创建了一个 JPA 实体（见下文）。当我将一条记录插入数据库时​​尝试从 java 客户端使用它时，出现以下异常（见下文）

有什么想法可以尝试跳过这个错误吗？

客户端：

```
package co.ne.staffmanagement.test;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

import co.ne.staffmanagement.domain.Employee;

public class TestHarness {

    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("EXAMPLES");

        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = em.getTransaction();
        tx.begin();

        Employee employee1 =  new Employee ("Lucia", "Ochoa", "Manager", 10000);
        em.persist(employee1);
        tx.commit();
        em.close();

    }

} 
```

实体：

```
package co.ne.staffmanagement.domain;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Employee implements java.io.Serializable {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;
    private String firstName;
    private String surname;
    private String jobRole;
    private int salary;

    public Employee(){
        // Required by the JPA
    }

    public Employee(String firstName, String surname, String jobRole, int salary){
        super();
        this.firstName = firstName;
        this.surname = surname;
        this.jobRole = jobRole;
        this.salary = salary;
    }

    public String toString(){
        return "Employee " + this.firstName + " " + this.surname + this.jobRole + this.salary;
    }
} 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="EXAMPLES" transaction-type="RESOURCE_LOCAL">
        <class>co.ne.staffmanagement.domain.Employee</class>
        <properties>
            <property name="openjpa.ConnectionURL"
                value="jdbc:db2://localhost:50000/EXAMPLES:retrieveMessagesFromServerOnGetMessage=true;" />
            <property name="openjpa.ConnectionDriverName" value="com.ibm.db2.jcc.DB2Driver" />

            <property name="openjpa.DynamicEnhancementAgent" value="true"/>
            <property name="openjpa.ConnectionUserName" value="db2admin" />
            <property name="openjpa.ConnectionPassword" value="db2admin" />
            <property name="openjpa.Log" value="SQL=TRACE" />

            <property name="eclipselink.logging.level" value="FINE" />
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="database" />

        </properties>
    </persistence-unit>
</persistence> 
```

异常和控制台输出：

```
IBM WebSphere Application Server, Release 8.5 
Java EE Application Client Tool 
Copyright IBM Corp., 1997-2011
WSCL0012I: Processing command line arguments.
WSCL0001I: Command line, property file, and system property arguments resolved to: 
        File to launch          = C:\Users\User\IBM\rationalsdp\workspace\EmployeeManagement
        CC Property File        = null
        Client Jar File         = EmployeeManagementClient.jar
        Alternate DD            = null
        BootstrapHost           = null
        BootstrapPort           = <default>
        Trace enabled           = false
        Tracefile               = null
        Init only               = false
        Classpath Parameter     = null
        Security Manager        = disable
        Security Manager Class  = Not used. -CCsecurityManager=disable
        Security Manager Policy = Not used. -CCsecurityManager=disable
        Exit VM                 = false
        Soap Connector Port     = null
        Application Parameters  = 
        Provider URL            = null
        Dump Java Name Space    = null
        Admin Connector Host    = null
        Admin Connector Port    = null
        Admin Connector Type    = null
        Admin Connector User    = null
        PARENT_LAST mode        = false
WSCL0013I: Initializing the Java EE Application Client Environment.
[8/31/12 10:08:51:464 COT] 00000001  W UOW=null source=com.ibm.ws.ssl.config.SSLConfig org=IBM prod=WebSphere component=Application Server thread=[P=731088:O=0:CT]
          CWPKI0041W: One or more key stores are using the default password.
WSCL0600I: Binding HandleDelegate object.
WSCL0031I: The object was bound successfully.

WSCL0900I: Initializing and starting components.
WSCL0910I: Initializing component: com.ibm.ws.runtime.component.WsByteBufferPoolManagerClientServiceImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.activity.ActivityServiceClientComponentImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.runtime.component.ChannelFrameworkClientServiceImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.runtime.component.NonRecoverableComponentImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.webservices.wssecurity.core.WSSecurityClientComponentImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.runtime.component.CFSBinder
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.runtime.component.WSBBSBinder
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.cluster.channel.ChannelSelectionAdapterImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.handlerfw.impl.HandlerFrameworkServiceImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.ActivitySession.ActivitySessionClientComponentImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.appprofile.AppProfileClientComponentImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.webservices.component.WSClientImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.workarea.WorkAreaServiceClient
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.injectionengine.ClientInjectionEngineImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ws.websvcs.component.WASAxis2ClientImpl
WSCL0911I: Component initialized successfully.
WSCL0910I: Initializing component: com.ibm.ejs.jms.JMSClientRegistration
WSCL0911I: Component initialized successfully.
WSCL0901I: Component initialization completed successfully.
WSCL0035I: Initialization of the Java EE Application Client Environment has completed.
WSCL0014I: Invoking the Application Client class co.ne.staffmanagement.test.TestHarness
162  EXAMPLES  INFO   [P=731088:O=0:CT] openjpa.Runtime - OpenJPA dynamically loaded a validation provider.
191  EXAMPLES  INFO   [P=731088:O=0:CT] openjpa.Runtime - Starting OpenJPA 2.2.1-SNAPSHOT
275  EXAMPLES  INFO   [P=731088:O=0:CT] openjpa.jdbc.JDBC - Using dictionary class "com.ibm.ws.persistence.jdbc.sql.DB2Dictionary".
com.ibm.net.SocketKeepAliveParameters
773  EXAMPLES  WARN   [P=731088:O=0:CT] openjpa.Enhance - This configuration disallows runtime optimization, but the following listed types were not enhanced at build time or at class load time with a javaagent: "
co.ne.staffmanagement.domain.Employee".
WSCL0100E: Exception received: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.ws.client.applicationclient.launchClient.createContainerAndLaunchApp(launchClient.java:790)
    at com.ibm.ws.client.applicationclient.launchClient.main(launchClient.java:495)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.wsspi.bootstrap.WSLauncher.launchMain(WSLauncher.java:234)
    at com.ibm.wsspi.bootstrap.WSLauncher.main(WSLauncher.java:95)
    at com.ibm.wsspi.bootstrap.WSLauncher.run(WSLauncher.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:340)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
    at org.eclipse.core.launcher.Main.run(Main.java:981)
    at com.ibm.wsspi.bootstrap.WSPreLauncher.launchEclipse(WSPreLauncher.java:376)
    at com.ibm.wsspi.bootstrap.WSPreLauncher.main(WSPreLauncher.java:147)
Caused by: <openjpa-2.2.1-SNAPSHOT-r422266:1325904 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Attempt to cast instance "Employee Lucia OchoaManager10000 [co.ne.staffmanagement.domain.Employee]" to PersistenceCapable failed.  Ensure that it has been enhanced.
FailedObject: Employee Lucia OchoaManager10000 [co.ne.staffmanagement.domain.Employee]
    at org.apache.openjpa.kernel.BrokerImpl.assertPersistenceCapable(BrokerImpl.java:4665)
    at org.apache.openjpa.kernel.BrokerImpl.persistInternal(BrokerImpl.java:2626)
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2571)
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2554)
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2458)
    at org.apache.openjpa.kernel.DelegatingBroker.persist(DelegatingBroker.java:1077)
    at org.apache.openjpa.persistence.EntityManagerImpl.persist(EntityManagerImpl.java:716)
    at co.ne.staffmanagement.test.TestHarness.main(TestHarness.java:21)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T20:17:56.713

这对我有用：

我添加了 `<property name="openjpa.DynamicEnhancementAgent" value="true"/>`

到我的 persistence.xml 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T17:37:37.747

实际上不建议使用动态增强器（不要将其与 EE 环境 Class Transformer 或 java 代理混淆），因为它存在许多问题。对于 SE（瘦客户端、应用程序客户端）环境，我建议预先增强您的实体类（2.1。在构建时增强：http: [//openjpa.apache.org/builds/2.4.0/apache-openjpa/ docs/ref_guide_pc_enhance.html#ref_guide_pc_enhance_build](http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/ref_guide_pc_enhance.html#ref_guide_pc_enhance_build)）。

# c# - 这是散列密码的安全方法吗？

> ID：12218887
> 
> 赞同：7
> 
> 时间：2012-08-31T16:00:58.687
> 
> 标签：c#, security, hash

您能否告诉我以下是否是安全散列密码以存储在数据库中的好方法：

```
 public string CreateStrongHash(string textToHash) {

        byte[] salt =System.Text.Encoding.ASCII.GetBytes("TeStSaLt");

        Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(textToHash, salt, 1000);
        var encryptor = SHA512.Create();
        var hash = encryptor.ComputeHash(k1.GetBytes(16));

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hash.Length; i++) {
            sb.Append(hash[i].ToString("x2"));
        }

        return sb.ToString();

    } 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T16:04:13.623

您使用 PBKDF2-SHA1，它不错但不是很好。Bcrypt 稍微好一点，scrypt 更强大。但是由于 .net 已经包含一个内置的 PBKDF2 实现，所以这是一个可以接受的选择。

你最大的错误是你没有得到盐的意义。每个用户的盐应该是唯一的。标准做法是简单地创建至少 64 位的随机值。将其与哈希一起存储在数据库中。

如果你愿意，你可以把盐分成两部分。一个与用户一起存储在数据库中，每个人都不同，一个共享部分存储在其他地方。这获得了两者的优点。

我还建议使用比`1000`. 找出可以接受的性能，并进行相应的调整。我不会低于 10000，在某些情况下（磁盘加密）一百万也是可以接受的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T16:02:12.273

它可以改进。首先，您应该改用[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)。现在，使用 GPU 可以很容易地破解 SHA-512 等传统哈希。问题是这些散列是为速度而设计的，这与您在密码散列中想要的相反。Bcrypt 是自适应散列算法的一个例子。它可以配置为花费“很长时间”（但仍然不会导致系统出现性能问题）以使暴力破解变得困难。

您还希望使盐对每个用户都是唯一的。

有关如何安全地散列密码的更多信息，请参阅[此问题](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)。

# sql - SQL：数量上的总和

> ID：12218890
> 
> 赞同：1
> 
> 时间：2012-08-31T16:01:14.253
> 
> 标签：sql, sql-server

您将如何根据其 ID 将返回的给定产品的所有数量相加。

我已经尝试过。

```
PRODID, ITEMDES, QTY, SUM(QTY where PRODID = PRODID ) 
as total-qty-for-each-product, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:03:33.770

您将使用分析函数：

```
select
    PRODID, ITEMDES, QTY,
    SUM(QTY) over (partition by PRODID) as total-qty-for-each-product
from
    products
; 
```

这与正常工作类似，`SUM`不同之处在于它将所有具有相同 PRODID 的值相加。结果与以下查询相同：

```
select
    PRODID, ITEMDES, QTY,
    (select SUM(QTY) from products p where p.PRODID = PRODID) 
        as total-qty-for-each-product
from
    products
; 
```

分析功能最好[由专家](http://www.orafaq.com/node/55)解释。

# axis - 在 Axis1 中提取消息 XML

> ID：12218892
> 
> 赞同：1
> 
> 时间：2012-08-31T16:01:20.227
> 
> 标签：axis

我正在运行 Axis 1.2.1（不是 axis2）来使用 .wsdl 文件为 Web 服务客户端生成类。

我希望能够保存我接收和发送的原始 xml 数据，最好是作为字符串，以便我可以将它作为 CLOB 保存到数据库中。

我试过按照本教程进行操作：

[http://proghowto.com/axis-client-request-and-response-logging](http://proghowto.com/axis-client-request-and-response-logging)

但是我的处理程序没有被调用。我几乎复制了教程中的代码。

除了类名和 qname 类（如何将其设置为正确的值？）

# javascript - setInterval 从函数更改背景

> ID：12218900
> 
> 赞同：3
> 
> 时间：2012-08-31T16:01:48.173
> 
> 标签：javascript, jquery, setinterval

您好，这非常接近于：

[jquery 循环遍历不同的背景](https://stackoverflow.com/questions/5977837/jquery-loop-through-different-backgrounds)

该解决方案确实对我有用，但是我不希望在准备好文档时更改背景-它们应该由函数触发。由于某种原因，这使得背景变化太快，它们一次闪烁 3，所以看起来循环在某处运行过度：

```
function run()
{
// Set multicolour backgrounds
window.setInterval( multicolour(), 3000);
}

var colour = 0;
var colours = Array('', 'pink', 'red', 'green', 'light');

function multicolour()
{
    colour = (colour+1) % colours.length ;
    $('body').attr('id', colours[colour]);
    console.log(colour);
} 
```

仅供参考，控制台日志显示颜色每 3 秒闪烁 3 次，而不是每 3 秒更改一次。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:04:53.380

使用递归`setTimeout`并使用一个常见的计时器变量，该变量会被无意的代码覆盖所覆盖。

```
window._timers = {
  changeBackground : null
};

var colour = 0;
var colours = Array('', 'pink', 'red', 'green', 'light');

function multicolour()
{
    colour = (colour+1) % colours.length ;
    $('body').attr('id', colours[colour]);

    // Set multicolour backgrounds
    clearTimeout(window._timers.changeBackground);
    window._timers.changeBackground = setTimeout(multicolour, 3000);
} 
```

演示：http: [//jsfiddle.net/FgkWx/](http://jsfiddle.net/FgkWx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:05:50.587

几个语法问题。你需要传递一个`function reference`到`window.setInterval`

我还清理了您的数组声明。我没有 jQuery，所以我没有尝试运行此代码。

```
function run()
{
  // Set multicolour backgrounds
  window.setInterval( multicolour, 3000);
}

var colour = 0;
var colours = ['', 'pink', 'red', 'green', 'light'];

function multicolour()
{
  colour = (colour+1) % colours.length ;
  $('body').attr('id', colours[colour]);
  console.log(colour);
} 
```

嗯....尝试这个不污染全局空间的方法：这使用了一些更高级的 Javascript 方法，但这种方式“颜色”和“颜色”不会泄漏到全局空间并污染事物。

```
var changeBackground = (function() {

  var colour = 0;
  var colours = ['', 'pink', 'red', 'green', 'light'];

  return function() {
    colour = (colour+1) % colours.length ;
    document.body.id =  colours[colour];
    console.log(colour);

  };

}());

window.setInterval( changeBackground, 3000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:05:35.157

你原来的问题的答案有一个（正确的）你错过了递归调用：

```
setTimeout(changeBackground, 2000); // called from changeBackground() 
```

您在此处的示例没有`multicolour()`使用 setTimeout 递归调用自身

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T16:09:01.193

您正在 setInterval 声明中调用回调函数：

```
window.setInterval( multicolour(), 3000); 
```

试试这个：

```
window.setInterval( multicolour, 3000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:11:22.860

它将像这样工作：

```
var colour = 0;
var colours = Array('', 'pink', 'red', 'green', 'light');

function multicolour(){
    colour = (colour+1) % colours.length ;
    $('body').attr('id', colours[colour]);
    console.log(colour);
}

setInterval( multicolour, 3000); 
```

您需要将函数引用传递给 setInterval 函数，而不是函数的返回值。

[工作小提琴](http://jsfiddle.net/nJLEF/)

# java - Java fork/join 框架逻辑

> ID：12218901
> 
> 赞同：14
> 
> 时间：2012-08-31T16:01:51.193
> 
> 标签：java, multithreading, concurrency, java.util.concurrent, fork-join

这是今天对另一个问题[的答案](https://stackoverflow.com/a/12212803/572743)的“副作用” 。它更多的是关于好奇心而不是实际问题。

Java SE 7 提供了 Oracle 所称的“fork/join 框架”。这可能是一种将工作安排到多个处理器的优越方式。虽然我了解它应该如何工作，但我无法理解它的优越之处以及关于窃取工作的说法。

也许其他人更了解为什么这种方法是可取的（除了因为它有一个花哨的名字）。

fork/join 的底层原语是`ForkJoinTask`s，即`Future`s，其想法是**要么**立即执行工作 [原文如此]（措辞具有误导性，因为“立即”意味着它在主线程中同步发生，实际上这发生在内部a `Future`) 低于某个阈值**或**递归地将工作分成两个任务，直到达到阈值。

未来是将异步运行的任务以不透明和未指定的方式封装到对象中的概念。您有一个函数可以让您验证结果是否可用，并且您有一个函数可以让您（等待和）检索结果。
严格来说，你甚至不知道未来是否异步运行，它*可以*在内部执行`get()`。该实现在理论上也可以为每个未来生成一个线程或使用一个线程池。
在实践中，Java 将 future 作为任务队列上的任务实现，并附加一个线程池（整个 fork/join 框架也是如此）。

fork/join 文档给出了这个具体的使用示例：

```
protected void compute() {
    if (mLength < sThreshold) {
        computeDirectly();
        return;
    }

    int split = mLength / 2;

    invokeAll(new ForkBlur(mSource, mStart, split, mDestination),
              new ForkBlur(mSource, mStart + split, mLength - split,
                           mDestination));
} 
```

这以与 Mergesort 遍历它们的方式相同的方式将任务提交到底层线程池的任务队列（感谢递归）。
例如，我们有一个包含 32 个“项目”的数组要处理，阈值为 4，然后平均拆分，它将产生 8 个任务，每个任务有 4 个“项目”，如下所示：

```
00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31
                                               .
00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15|16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31
                       .                       .                       .
00 01 02 03 04 05 06 07|08 09 10 11 12 13 14 15|16 17 18 19 20 21 22 23|24 25 26 27 28 29 30 31
           .           .           .           .           .           .           .
00 01 02 03|04 05 06 07|08 09 10 11|12 13 14 15|16 17 18 19|20 21 22 23|24 25 26 27|28 29 30 31
------------------------------------------------------------------------------------------------
     1     |     2     |     3     |     4     |     5     |     6     |     7     |     8     | 
```

在单核处理器上，这将按顺序提交/执行（以非常复杂的方式）任务组 1-2-3-4-5-6-7-8。
在双核处理器上，这将提交/执行 (1,3)-(2,4)-(5,7)-(6,8) ^([1])。
在四核处理器上，这将提交/执行 (1,3,5,7)-(2,4,6,8)。

相比之下，没有所有高级魔法的*幼稚*实现只会立即将任务 1-2-3-4-5-6-7-8 提交到任务队列。总是。

在单核处理器上，这将提交/执行 1-2-3-4-5-6-7-8。
在双核处理器上，这将提交/执行 (1,2)-(3,4)-(5,6)-(7,8)。
在四核处理器上，这将提交/执行 (1,2,3,4)-(5,6,7,8)。

**问题：**

1.  不是简单地将*sThreshold*个连续的项目塞进一个任务中，然后一个接一个地提交到线程池的任务队列中，而是生成了一个树状的递归层次结构。这涉及为实际上什么都不做的 N 个子任务构建、引用和销毁 N+log2(N) 个对象。为什么这个优越？

2.  不保留参考位置。处理器缓存和虚拟内存都不会被这样对待。为什么这个优越？

3.  除了在单处理器系统上，任务保证不会以接近其原始顺序的顺序进行调度。如果它真的无关紧要，这可能没有问题，但它使诸如栅栏或屏障之类的东西几乎不可行。拥有类似栅栏的唯一方法是等待根对象完成，然后才提交新任务。这相当于一个完整的管道停顿（这正是您不希望发生的事情）。

4.  Oracle 文档声称这种方法实现了工作窃取*，因此比线程池更好*。我没有看到这种情况发生。我所看到的只是将任务提交到普通线程池的一种非常复杂的方式。这应该如何神奇地实现工作窃取？

* * *

^([1])让我们不要把它弄得太复杂，并假设工作线程不会相互超越，任务都需要相同的时间来处理。否则，执行当然可能以不同的顺序发生，尽管提交是相同的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T16:21:14.043

当您使用 an 时，`ExecutorService` *您*将决定线程池中有多少线程，并且*您*安排的任务和*这些任务创建*的子任务之间没有任何区别。
`ForkJoinPool`相反，类基于 1) 可用处理器和 2) 任务需求来管理线程。
在这种情况下，由活动任务创建的子任务正在通过与外部任务不同的方法进行调度。
我们通常有一个用于整个应用程序的 fork-join 池（与使用`ExecutorService`在任何非平凡应用程序中通常有超过 1 个的地方不同）并且不需要`shutdown`.
我没有审查内部结构来给你一个更底层的解释，但如果你看到[这里](http://www.oracle.com/technetwork/articles/java/fork-join-422606.html)有一个演示文稿和一个基准测试，显示了所承诺的并行度。

**更新：**
这个框架解决了特定类型的问题（`ExecutorService`对于混合了 CPU 和 I/O 活动的任务更有效）。
这里的基本思想是使用递归/分而治之的方法来保持 CPU 不断忙碌。这个想法是创建新任务（分叉）并暂停当前任务，直到新任务完成（加入），但**不**创建新线程并且**没有**共享工作队列。
因此，Fork-join 框架是通过创建有限数量的工作线程（与内核一样多）使用工作窃取来实现的。每个工作线程维护一个私有的双端工作队列。
分叉时，工人将新任务推到其双端队列的头部。当等待或空闲时，worker 从其双端队列的头部弹出一个任务并执行它而不是休眠。
如果工人的双端队列为空，则从另一个随机选择的工人的双端队列尾部窃取一个元素。
我建议阅读[Java 中的 Data Parallelism](http://www.ordina.nl/~/media/Files/Expertises/Pakket%20implementaties/Masterclass%20Brian%20Goetz%20%20DataParallelism.ashx?forcedownload=1)并自己做一些基准测试来说服自己。理论只有在一定程度上是好的。之后进行测量以查看是否有显着的性能优势

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:45:56.420

让我从一篇批评框架的文章开始[是的，我写了它]。[Java Fork-Join 灾难](http://www.coopsoft.com/ar/CalamityArticle.html)

现在回答你的问题：

1.  它不是。框架想要处理 DAG。这就是设计结构。

2.  它不是。正如文章所提到的，Java 应用程序对缓存、内存等一无所知，因此这些假设是错误的。

3.  是的。这正是发生的事情。停顿是如此普遍，以至于框架需要创建“延续线程”来保持移动。这篇文章在这里引用了一个需要超过 700 个延续线程的问题。

4.  我当然同意代码很复杂。Scatter-gather 比应用程序的工作窃取要好得多。至于文档，什么文档？甲骨文没有提供详细信息。这一切都是为了使用该框架。

有替代方案。

# php - mysqli_ping 中断 mysqli_multi_query

> ID：12218902
> 
> 赞同：0
> 
> 时间：2012-08-31T16:01:53.380
> 
> 标签：php, mysqli, mysqli-multi-query

我有一个很好的函数，叫做 lnk()，我已经使用了很长时间，它连接到 MySQL。最近我决定添加 mysqli_ping 调用来检查连接并在需要时重新连接，因为我遇到了一个守护进程（24/7 运行）的问题，它在长时间不活动后一直失去与 MySQL 的连接。

实施后，我开始遇到多查询问题。如果在 mysqli_multi_query 之后发送 ping，则在发送 ping 时会丢失与 MySQL 的连接，除非 mysqli_store_result 在 ping 之前。

```
$mq = mysqli_multi_query(lnk(), "SHOW PROCESSLIST;");
mysqli_next_result(lnk());
$result = mysqli_store_result(lnk());
while($row = mysqli_fetch_row($result)) {
  print_r($row);
} 
```

**任何想法为什么会发生这种情况？**

*请不要建议在库中添加变量以在这些情况下忽略连接检查。我已经想到了，这还不够好。我需要确切地知道为什么会发生这种情况以及在这种情况下 ping 对我的连接有什么作用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:44:00.710

在封面下：

*   [mysqli_ping](https://github.com/php/php-src/blob/master/ext/mysqli/mysqli_api.c#L1698)
*   调用[mysql_ping](https://github.com/php/php-src/blob/master/ext/mysql/php_mysql.c#L2661)
*   调用[PHPMY_UNBUFFERED_QUERY_CHECK](https://github.com/php/php-src/blob/master/ext/mysql/php_mysql.c#L369)
*   来电`zend_list_delete(mysql->active_result_id);`

...这似乎会删除您的结果。

这意味着您应该只重新连接一次（在调用之前`multi_query`）。像这样的东西：

```
$link = lnk(); //once
$mq = mysqli_multi_query($link, "SHOW PROCESSLIST;");
mysqli_next_result($link);
$result = mysqli_store_result($link);
while($row = mysqli_fetch_row($result)) {
  print_r($row);
} 
```

# ruby-on-rails - 用于 has_many 关系的 Ruby on Rails 表单

> ID：12218907
> 
> 赞同：0
> 
> 时间：2012-08-31T16:02:12.707
> 
> 标签：ruby-on-rails, forms, relationship, has-many-through, simple-form

我有用户在注册时需要回答一些问题。用户通过 Answers 连接表有_many Questions。我只是想弄清楚如何在 Users#new 操作上创建表单。我正在使用 simple_form。这是我的数据库架构：

```
ActiveRecord::Schema.define(:version => 20120831144008) do

  create_table "answers", :force => true do |t|
    t.integer  "user_id"
    t.integer  "question_id"
    t.text     "response"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  add_index "answers", ["user_id", "question_id"], :name => "index_answers_on_user_id_and_question_id"

  create_table "questions", :force => true do |t|
    t.string   "title"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "first_name"
    t.string   "last_name"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

end 
```

因此，在 users#new 页面上，我正在遍历问题标题，并且需要在每个问题下方创建一个文本区域并创建它。到目前为止，这是我所拥有的表格，它不起作用，并且可能对解决方案没有太大帮助。

```
<%= simple_form_for(@user) do |f| %>
  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.input :email %>
  <%= f.input :phone %>
  <%= f.input :organization %>
  <%= f.input :primary_contact %>
  <%= f.association :answers, collection: @questions %>
  <% @questions.each do |question| %>
    <div>
      <strong><%= question.title %></strong>
      <%= text_field_tag 'questions[]' %>
    </div>
  <% end %>
  <%= f.button :submit %>
<% end %> 
```

**解决方案**

我能够让它工作，不确定这是否是绝对正确的方法，但它并不完全丑陋。在我的控制器中，我`@user.answers.build`在 simple_form 中循环问题，并创建一个填写了所需数据的答案字段。

```
 <% Question.all.each do |question| %>
    <%= f.simple_fields_for :answers do |a| %>
      <div>
        <strong>
          <%= question.title %>
        </strong>
        <%= a.hidden_field :question_id, value: question.id %>
        <%= a.input :response, label: false %>
      </div>
    <% end %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:13:54.823

我相信你需要做：

```
<%= simple_fields_for @questions.each do |question| %> 
```

以确保您获得嵌套的表单字段。

# ruby-on-rails - rails：无法批量分配受保护的属性

> ID：12218908
> 
> 赞同：0
> 
> 时间：2012-08-31T16:02:13.687
> 
> 标签：ruby-on-rails

这似乎是一个常见的错误，我已经阅读了很多回复。我一定错过了一些愚蠢的东西。

我有一个地点的活动。（有一个）。我已经设置了accepts_nested_attributes_for :location，我相信我有单数/复数的权利（都是单数，这是一个has_one 关系）。（我已经尝试单独列出每个属性的 attr_accessible，没有骰子。）我已经重新启动了我的服务器。然而，我不断得到：

> 无法批量分配受保护的属性：地址、位置名称、电话号码、地区、邮政编码、城市、国家/地区、纬度、

```
class Activity < ActiveRecord::Base
  attr_accessible :beer, :user, :whatdoing, :where, :with, :location_id, :location_attributes

  has_one :location, :dependent => :destroy

  accepts_nested_attributes_for :location

  validates :whatdoing, :numericality => { :only_integer => true, :greater_than => -1}
end

class Location < ActiveRecord::Base
  validates_presence_of :address

  belongs_to :activity

end 
```

**活动控制器：**

```
# GET /activities/new.json
  def new
    @activity = Activity.new

    @activity.build_location

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @activity }
    end
  end

  # PUT /activities/1
  # PUT /activities/1.json
  def update
    @activity = Activity.find(params[:id])

    respond_to do |format|
      if @activity.update_attributes(params[:activity])
        format.html { redirect_to @activity, notice: 'Activity was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @activity.errors, status: :unprocessable_entity }
      end
    end
  end 
```

它一定很简单，但我无法发现它。

提前致谢！

添加相关表单代码：

```
<%= form_for(@activity) do |activity_form| %>
  <% if @activity.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@activity.errors.count, "error") %> prohibited this activity from being saved:</h2>

      <ul>
      <% @activity.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= activity_form.label :whatdoing, "Thinkin" %>
    <%= activity_form.radio_button :whatdoing, 0 %>
    <%= activity_form.label :whatdoing, "Drinkin" %>
    <%= activity_form.radio_button :whatdoing, 1 %>
  </div>
  <div class="field">
    <%= activity_form.label :beer %>
    <%= activity_form.text_field :beer %>
  </div>
  <div class="field">
    <%= activity_form.label :where %>
    <%= activity_form.text_field :where %>
  </div>
  <div class="field">
    <%= activity_form.label :with %>
    <%= activity_form.text_field :with %>
  </div>

<%= activity_form.fields_for :location do |location_fields| %>
<div class="field search">
    <%= label_tag :search %>
    <%= text_field_tag :location_search, nil, :size => 60, :type => "search" %>
  </div>

  <br />

  <div class="field">
    <%= location_fields.label :address, "Full Address" %>
    <%= location_fields.text_field :address, :size => 60 %>
  </div>

  <div class="field">
    <%= location_fields.label :location_name %>
    <%= location_fields.text_field :location_name, :size => 18 %>

    <%= location_fields.label :phone_number %> 
    <%= location_fields.text_field :phone_number, :size => 18 %>
  </div>

  <div class="field">
    <%= location_fields.label :district %>
    <%= location_fields.text_field :district, :size => 18 %>
    <%= location_fields.label :postcode %>
    <%= location_fields.text_field :postcode, :size => 6, :type => 'number' %>
  </div>

  <div class="field">
    <%= location_fields.label :city %>
    <%= location_fields.text_field :city, :size => 18 %>

    <%= location_fields.label :country %> 
    <%= location_fields.text_field :country, :size => 18 %>
  </div>

  <div class="field">
    <%= location_fields.label :lat %>
    <%= location_fields.text_field :lat, :size=> 18 %>
    <%= location_fields.label :lng %>
    <%= location_fields.text_field :lng, :size=> 18 %>
  </div>
<% end %>

  <%= render :partial => "googlemap" %>

  <div class="actions">
    <%= activity_form.submit %>
  </div>

<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:10:23.920

在没有看到带有嵌套字段的表单的情况下，从错误来看，您可能已经省略了`fields_for`位置循环 - 它应该看起来像

```
<%= f.fields_for :location do |f| %>
    <%= render :partial => "locations/form", :locals => {:f => f} %>
<% end -%> 
```

这应该加载嵌套字段的表单，并确保您没有尝试为活动上的位置设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:07:14.457

原来我错过了所有属性的位置模型上的 attr_accessible 。添加了它们，一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:45:42.520

在 Rails 3 及更高版本中，您需要 attr_writer 或 attr_accessor, attr_accessible 用于批量分配属性

您必须为这些属性创建一些写入权限

地址，位置名称，电话号码，区，邮政编码，城市，国家，纬度，

# ios - Xcode 验证步骤作为临时分发的一部分

> ID：12218915
> 
> 赞同：0
> 
> 时间：2012-08-31T16:02:58.943
> 
> 标签：ios, xcode, app-store, ad-hoc-distribution

> **可能重复：**
> [由于一般错误 (1095)，此时无法处理应用程序 info.plist 验证](https://stackoverflow.com/questions/8353049/unable-to-process-application-info-plist-validation-at-this-time-due-to-a-genera)

在过去的几周里，我一直在通过临时分发分发我的 iOS 应用程序的 beta 版本。直到今天早上 2012 年 8 月 31 日，一切都运行良好。

我遵循 Xcode 4.3.3 中的常规程序：

*   产品 => 存档
*   到目前为止一切都很好
*   单击验证并在向导中选择正确的配置内容
*   验证立即失败，提示“由于一般错误，此时无法处理应用程序 info.plist 验证”

我已经尝试验证了大约十次。每次都是一样的。在阅读[了这篇 SO 帖子后](https://stackoverflow.com/questions/8353049/unable-to-process-application-info-plist-validation-at-this-time-due-to-a-genera)，我确信这是 Apple 的问题。但是，我想尽快将这个临时构建给客户。然后我终于明白了：**在进行临时构建时是否需要 Xcode 中的验证步骤？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:22:11.993

这不应该是临时构建的情况（我本人今天在 6 小时前上传了临时构建）。为临时构建构建不需要验证。按照以下步骤为您的客户获取干净的临时构建。

**生成存档后** ![在此处输入图像描述](../Images/52d2817a735967d9ba164d788a831ee7.png)

![在此处输入图像描述](../Images/6d5b5415c7efac0596e5f84fd3770083.png)

![在此处输入图像描述](../Images/66f3679ed076cb8864c1ae81b52135cb.png)

![在此处输入图像描述](../Images/9b8d7e62cf4e4eb9ca611501db045a4d.png)

隐藏客户端应用程序的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:09:30.433

我昨天在尝试提交我的应用程序时得到了这个。为了解决这个问题，我更新了我的应用程序中的图标文件并更新了 plist。

我错过了我的 Icon-72.png

![在此处输入图像描述](../Images/95586041122b42243fa68b30b07d038b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:11:28.040

就我个人而言，我不会在临时构建时验证 IPA，而是在提交到 App Store 时进行。我建议您应该使用 Alt + Cmd + Shift + k 清理整个项目。可能这会解决您的问题。

# c++ - 确定“泛型函数”的返回类型

> ID：12218924
> 
> 赞同：5
> 
> 时间：2012-08-31T16:03:23.487
> 
> 标签：c++, c++11, generic-programming, decltype, argument-dependent-lookup

假设，我想开发一个通用库，它应该可用于类似数字的类型，包括双精度类型和用户定义类型。我现在面临的问题是我不知道如何编写函数模板的返回类型，就像这样：

```
template<class T>
auto transmogrify(T x)
-> ???
{
    using std::abs;
    return abs(x)+2.0;
} 
```

using 声明使此函数模板的主体适用于原始类型，因为它们没有关联的命名空间（因此，没有 ADL）。但是我希望 transmogrify 使用专门的 abs 函数，以防用户定义类型的作者提供他自己的 abs 函数。我不能简单地使用

```
-> decltype( abs(x)+2.0 ) 
```

因为这不适用于双打，因为 std::abs 不在范围内（据我所知）。但是写作

```
-> decltype( std::abs(x)+2.0 ) 
```

将禁用 ADL。但禁用 ADL 不是一种选择。此外，专门的 abs 函数返回的值可能不是 T 类型，而是其他类型。

关于如何解决返回类型问题的任何想法，同时 (a) 保留 ADL 和 (b) 对于不提供专门 abs 的类型使用某些默认函数（如本例中的 std::abs ）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T16:07:25.030

使用单独的命名空间，您可以在其中放置 using 子句。这可以防止命名空间污染，因为 using 子句仅适用于该命名空间。我建议将其命名为独特的名称，以免您不小心将其传播开来。

```
namespace transmog_detail
{
   using std::abs;

   template<class T>
   auto transmogrify(T x) -> decltype(abs(x) + 2.0)
   {
      return abs(x) + 2.0;
   }
}

// Then pull it into the current namespace, as recommended by @LucDanton.
using transmog_detail::transmogrify;

// Or if there is a reason, you can forward. 
// template<class T>
// auto transmogrify(T x)
// -> decltype(transmog_detail::transmogrify(x))
// {
//    return transmog_detail::transmogrify(x);
// } 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-08-31T16:11:19.070

上面的答案很好，但我能想到的最简单的方法是使用 typeinfo 标头。它专门用于确定对象的类型和构造函数。

见这里：[http ://www.cplusplus.com/reference/std/typeinfo/type_info/](http://www.cplusplus.com/reference/std/typeinfo/type_info/)

# java - 休眠日期操作

> ID：12218928
> 
> 赞同：2
> 
> 时间：2012-08-31T16:03:50.027
> 
> 标签：java, database, hibernate, db2, hql

我在 DB2 中使用休眠并遇到以下问题。表/实体`Customer`具有字段`first_name`, `last_name`, `birthday`( `java.util.Date`)。我需要编写一个查询来检索所有在接下来的四天内过生日的客户。问题是，对于某些客户来说，出生年份是未知的，因此在数据库中将其设置为 9999，因此我不能只在 where 子句中进行简单的检查（因为是 9999 年）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:36:37.410

使用简单的 hql 查询

```
from Customer as user where month(user.birthday) = month(current_date()+4 days) and day(user.birthday) = day(current_date()+4 days)
union all
from Customer as user where month(user.birthday) = month(current_date()+3 days) and day(user.birthday) = day(current_date()+3 days)
union all
from Customer as user where month(user.birthday) = month(current_date()+2 days) and day(user.birthday) = day(current_date()+2 days)
union all
from Customer as user where month(user.birthday) = month(current_date()+1 day) and day(user.birthday) = day(current_date()+1 day) 
```

# ruby-on-rails-3 - Rails FileSystemResolver - 实现自定义模板继承

> ID：12218929
> 
> 赞同：2
> 
> 时间：2012-08-31T16:03:54.917
> 
> 标签：ruby-on-rails-3, template-engine, actionpack

如果有人有更好的方法来实现相同的预期效果，但结构不同，我很高兴放弃这个设计。

我在这里的动机是创建一个继承的 javascript 小部件模板系统以在 Rails 3 中使用。我希望用户可以将 javascript 小部件放置在他们的页面上，并拥有可供他们选择的各种预定义模板。

理想情况下，每个模板都将具有“基本”javascript 代码，并且可以通过一组子模板对任何自定义进行分层（从而为模板创建皮肤/新功能）。

这很复杂，因为我想为同一个模板使用多个控制器。

### 控制器

文件夹树

*   应用程序
    *   控制器
        *   小部件
            *   模块
            *   活动
                *   内容
                *   图片
            *   社区
                *   模块
                *   活动
                    *   内容
                    *   图片
            *   用户
                *   模块
                *   活动
                    *   内容
                    *   图片

### 意见

只是关于视图的注释，在每个“模板”目录中，我放置了一个名为 config.rb 的文件。此文件定义模板父模板名称和文件夹位置。我将展示它是如何在模板解析器中加载的。

示例继承配置文件

**位于 app/views/widgets/communities/modules/template_custom_2/config.rb**

```
 module InheritedTemplateConfig
    def inherited_parent_base_path
        "widgets/communities/modules"
    end

    def inherited_parent_template_name
        "template_custom_1"
    end
end 
```

**位于 app/views/widgets/communities/modules/template_custom_1/config.rb**

```
 module InheritedTemplateConfig
    def inherited_parent_base_path
        "widgets/communities/modules"
    end

    def inherited_parent_template_name
        "template"
    end
end 
```

**位于 app/views/widgets/communities/modules/template/config.rb**

```
module InheritedTemplateConfig
    def inherited_parent_base_path
        "widgets/communities"
    end

    def inherited_parent_template_name
        "template"
    end
end 
```

示例模板文件

**位于 app/views/widgets/communities/modules/template_custom_2/modules.js.erb**

```
<%= render :partial => "(TEMPLATE)/same_template_test" %>
<%= render :partial => "(PARENT_TEMPLATE)/parent_template_test" %> 
```

文件夹树

*   应用程序
    *   意见
        *   小部件
            *   模块
                *   模板
                *   template_custom_1
                *   template_custom_2
            *   活动
                *   模板
                *   内容
                    *   模板
                *   图片
                    *   模板
            *   社区
                *   模板
                *   模块
                    *   模板
                    *   template_custom_a
                    *   template_custom_b
                *   活动
                    *   模板
                    *   内容
                        *   模板
                    *   图片
                        *   模板
            *   用户
                *   模板
                *   模块
                    *   模板
                *   活动
                    *   模板
                    *   内容
                        *   模板
                    *   图片
                        *   模板

因此，一些路径示例以及我希望文件夹的模板链能够解决的地方。

*   /widgets/modules.js
    *   /小部件/模块/模板
*   /widgets/communities/1/modules.js?template=custom_a
    *   /widgets/communities/modules/template_custom_a
    *   /widgets/communities/modules/template
    *   /小部件/模块/模板

### 我失败的实施

只想说，这离*工作*太近了。不幸的是，我在解析器（PARENT_TEMPLATE）find_template 函数案例中运气为0，它无限递归。这是因为我无法知道解析时要跳过哪个模板。

唯一不起作用的是渲染部分使用`<% render :partial => "(PARENT_TEMPLATE)/my_file" %>`

```
class Widgets::Communities::ModulesController < ApplicationController
    before_filter do
        @community = Community.find(params[:community_id])

        @template = params[:template].to_s
        @template = "_#{@template}" if !@template.empty?

        # Path to start searching for template files
        prepend_view_path WidgetResolver.new("widgets/communities/modules", "template#{@template}")
    end

    def script
        respond_to do |format|
            format.js { render "modules" }
        end
    end
end

# Walks through from the sub_path to the base_path to find the template file
# This allows you to base one template on another template
class WigetResolver < ActionView::FileSystemResolver
    attr_accessor :templates, :base_path

    # Loads our current templates config, and any parent templates config
    def load_template_config(base_path, template_name)
        config_path = "#{Rails.root}/app/views/#{base_path}/#{template_name}/config.rb" 
        if File.exists?(config_path)
            self.templates << {:template_name => template_name, :base_path => base_path} # This is a valid template, add it to our search path
            load(config_path)
            extend InheritedTemplateConfig
            if !self.inherited_parent_base_path.nil? && !self.inherited_parent_template_name.nil?
                self.load_template_config(self.inherited_parent_base_path, self.inherited_parent_template_name)
            end
        end
    end
   def initialize(base_path, template_name)
        self.templates = []
        # From our base config, load our complete config
        self.load_template_config(base_path, template_name)
        super("app/views")
    end

    def find_templates(name, prefix, partial, details)

        # We want to use our custom template matching
        if prefix.match(/^(TEMPLATE)/)
            self.templates.each_with_index { |template,i|
                result = super(name, "#{template[:base_path]}/#{template[:template_name]}", partial, details)

                # We found the custom template path
                return result if result.present?
            }
        # ----------------------------------------------------
        # ERROR HERE - recurses to max depth
        # ----------------------------------------------------
        elsif prefix.match(/^(PARENT_TEMPLATE)/)
            self.templates.each_with_index { |template,i|

                # We need to skip template above the current partials template file path - HOW DO WE DO THIS?!

                result = super(name, "#{template[:base_path]}/#{template[:template_name]}", partial, details)

                # We found the custom template path
                return result if result.present?
            }
        end

        super(name, prefix, partial, details)
    end

end 
```

所以 - 问题。我如何知道 find_templates 中当前的部分工作目录是什么？如果我知道这一点，我可以跳过它上面的所有模板，并且永远不会得到无限递归。

# javascript - SyntaxError: 'with' 语句在严格模式下无效

> ID：12218931
> 
> 赞同：19
> 
> 时间：2012-08-31T16:04:06.017
> 
> 标签：javascript, safari, with-statement, deprecation-warning

当我尝试从断点执行任何操作时，我在 Safari 控制台中收到此错误。错误报告在这里：[https ://bugs.webkit.org/show_bug.cgi?id=83267](https://bugs.webkit.org/show_bug.cgi?id=83267)

有人有解决方法吗？由于我假设与此有关的原因，javascript 已停止在我的 safari 网站上运行。

编辑：错误报告还包含重现步骤。

另一个编辑：我没有使用“with”语句。这是来自 Safari 控制台的错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T16:07:34.897

该`with(obj) {}`语句已弃用，因此在严格模式下无效。

要解决这个问题，要么禁用严格模式，要么停止使用 with 语句！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T16:12:18.483

ECMAScript 5 中的严格模式禁止例如。`with`陈述。你有两个选择：

*   禁用严格模式（`"strict mode";`从文件/函数中删除行），或
*   （首选）避免使用`with`语句——它们是有害的并且完全不可读。

来自 John Resig 的有关严格模式的更多信息：[ECMAScript 5 Strict Mode、JSON 等](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)。

您可以在文章中阅读该严格模式：

*   让你无法改变`delete`（如 in `delete foo;`），
*   限制使用`eval`,
*   对函数添加一些限制（例如访问`caller`和`callee`），
*   删除`with`语句，

# iphone - UIImageView：内容模式方面适合扭曲图像

> ID：12218932
> 
> 赞同：2
> 
> 时间：2012-08-31T16:04:12.597
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview, uiimage

我正在尝试在 iPhone 上手动创建图像网格。

我已经正确放置了所有 UIImageViews，并且它们都正确链接到代码。但是，我有一个小问题：我的图像太大，因此需要缩小尺寸。

这应该不是什么大问题，因为 UIImageViews 接受“Aspect Fit”设置作为内容模式；然而，当图像被分配到图像视图时，它显然会稍微模糊和扭曲。

![这是原始图像，全尺寸：](../Images/6792bdc46061f625a6eb628c574ba9a5.png)

![这是缩略图：](../Images/ffa0d95795445c9d0888130370c7cf57.png)

现在，很明显第二张图片在某些方面*搞砸了*，尤其是在球员的球衣号码上。

我想这与 SDK 使用的调整大小算法有关；我应该在将图像交给 UIImageView*之前自行调整图像大小，还是问题出在其他地方？*

为了完整起见，这是我正在使用的代码，即使我确定这不是问题的根源：

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"jpg"];
UIImage *image = [UIImage imageWithContentsOfFile:file];
image1.image = image; 
```

编辑：我不确定这是否重要，但原始图像是 JPG 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:11:28.317

是的，在分配给 ImageView 之前调整图像大小会减少您看到的锯齿。要调整 UIImage 的大小，您可以查看[此答案](https://stackoverflow.com/questions/2658738/the-simplest-way-to-resize-an-uiimage)

# javascript - CoinSlider 无法正常工作

> ID：12218938
> 
> 赞同：1
> 
> 时间：2012-08-31T16:04:42.393
> 
> 标签：javascript, jquery, javascript-events

CoinSlider 似乎无法在我的服务器上正常工作[http://voceconecta.educandus.com.br/home.php](http://voceconecta.educandus.com.br/home.php)

似乎它无法访问 coin 元素的 css 属性，我是这样测试的：

```
/* 1 attempt - */ 
$(el).css({ 'background-image': 'url('+images[el.id][imagePos[el.id]]+')' });
alert( $(el).css( 'background' ) );

/* 2 attempt - */
$(el).css( 'background', 'url('+images[el.id][imagePos[el.id]]+')' );
alert( $(el).css( 'background' ) ); 
```

尝试 1 和 2 没有效果，只是一直显示背景无...

知道如何解决吗？你的迪奥戈

# sql-server-2008 - web.config 中缺少 SQL Server Express 2008 连接字符串

> ID：12218942
> 
> 赞同：1
> 
> 时间：2012-08-31T16:04:57.340
> 
> 标签：sql-server-2008

我在我的开发机器（Windows 7 Ultimate、IIS 7.5 和 Visual Studio 2010 Pro）上运行了一个 asp.net 应用程序。我还安装了 SQL Server 2008 R2，当然还有与 VS 2010 Pro 一起安装的 SQL Server Express 2008。

我运行了 ASP.NET 配置向导，为我的应用程序创建了一些用户和滚动。因此，在 App_Data 文件夹中创建了一个 ASPNETDB.MDF 数据库文件。

我现在面临的问题是，我的应用程序的 web.config 中缺少上述 SQL Server Express 数据库的连接字符串，而成员资格元素也是如此。

但我的应用程序运行良好。我可以登录、注销等。劳斯莱斯也按预期工作。

（我还想指出，我的应用程序还可以访问本地计算机上 SQL Server 2008 R2 上的数据库，它也可以在生产服务器上执行相同的操作。）

我将我的应用程序上传到生产服务器，在那里创建会员数据库（SQL Server 2008），传输数据等等。然后，我在 web.config 文件中为该 SQL Server 数据库添加了一个连接字符串。但是，如果我尝试登录，我将无法连接到 SQL Server。错误如下： 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）。

我认为（虽然我不确定）我的应用程序试图访问远程主机上的 SQL Server Express。这是因为连接字符串嵌入其中。

如果我说清楚了，那么我的问题是：如何配置连接字符串或在哪里找到它？因为它不在 web.config 中。

我是 ASP.NET 和 SQL Server 的新手。任何帮助将不胜感激。谢谢。

这是web.config

```
<configuration>
<connectionStrings>
<add name="somename" connectionString="Data Source=remotehost;Initial Catalog=remotedb;User Id=username;Password=password"providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
<customErrors mode="Off"></customErrors>
<roleManager enabled="true" />
<authentication mode="Forms" />
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
</configuration> 
```

这就是我的 web.config 的全部内容。

上面的连接字符串是我为远程服务器添加的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:39:06.030

我找到了我的问题的答案。如果您从头开始创建网站（在我的情况下），则 ASPDBNET.MDF 的连接字符串通常不会出现在 web.config 中。

应用程序使用 machine.config 文件中定义的机器范围连接字符串。这被命名为“LocalSqlServer”。

通常，此 LocalSqlServer 连接字符串默认以本地 SQL Server Express 为目标。

因此，它在使用完整 SQL Server 的远程主机上失败。

要将您的网站上传到远程服务器，需要在 web.config 中进行一些调整以指向通常是 SQL Server 的新服务器。

为此，将新的连接字符串添加到您的 web.config 文件并将其命名为 LocalSqlServer。除了名称之外，通常添加其他所有内容，例如数据源、初始目录等。

要使其在远程主机上工作，请在打开的 connectionStrings 元素之前添加一个 clear 元素。这是远程 SQL Server 的连接字符串的外观。

```
<connectionStrings>
    <clear/>
    <add name="LocalSqlServer" connectionString="Data Source=remotehost;Initial Catalog=remoteDB;User Id=username;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

你完成了。这就是我为我从头开始创建的 ASP.NET 网站所做的。现在它的会员登录、注销、用户和滚动等都运行良好。

谢谢阅读。

# wordpress - 可以在 wordpress 后端的某些页面模板上禁用内容编辑器吗？

> ID：12218943
> 
> 赞同：4
> 
> 时间：2012-08-31T16:05:03.030
> 
> 标签：wordpress

我正在使用 wordpress 的高级自定义字段插件，这意味着我的一些页面中的内容编辑器已经失效，所以我想在某些页面上禁用它们。我确实在某些网站上找到了下面的代码，但这会在后端`Undefined index: post`和`Undefined index: post_ID`

```
add_action( 'admin_init', 'hide_editor' );

function hide_editor() {
    // Get the Post ID.
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
    if( !isset( $post_id ) ) return;

    // Get the name of the Page Template file.
    $template_file = get_post_meta($post_id, '_wp_page_template', true);

    if($template_file == 'contact.php'){ // edit the template name
        remove_post_type_support('page', 'editor');
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T16:45:44.360

使用 PHP 函数 isset() 来修复这个错误：

```
add_action( 'admin_init', 'hide_editor' );

function hide_editor() {

        // Get the Post ID.
        if ( isset ( $_GET['post'] ) )
        $post_id = $_GET['post'];
        else if ( isset ( $_POST['post_ID'] ) )
        $post_id = $_POST['post_ID'];

    if( !isset ( $post_id ) || empty ( $post_id ) )
        return;

    // Get the name of the Page Template file.
    $template_file = get_post_meta($post_id, '_wp_page_template', true);

    if($template_file == 'contact.php'){ // edit the template name
        remove_post_type_support('page', 'editor');
    }

} 
```

# python - 格式化 NumPy 数组

> ID：12218945
> 
> 赞同：0
> 
> 时间：2012-08-31T16:05:18.750
> 
> 标签：python, numpy

我要这个：

```
 SP,1,2,3
        1,1.000000e+00,2.000000e+00,3.000000e+00
        2,1.630000e+01,1.990000e+01,1.840000e+01
        3,1.630000e+01,1.990000e+01,1.840000e+01
        4,1.630000e+01,1.990000e+01,1.840000e+01 
```

我有以下代码：

```
np.savetxt("Final Array.csv", my_array, fmt="%10.6e", delimiter=',') 
```

它产生：

```
 1.000000e+00,2.000000e+00,3.000000e+00
    1.630000e+01,1.990000e+01,1.840000e+01
    1.630000e+01,1.990000e+01,1.840000e+01
    1.630000e+01,1.990000e+01,1.840000e+01 
```

我已经为顶行和左列创建了数组。

我该如何格式化，以便在保持最左边一列的同时保持正确的数字格式，并且第一行保持原样？

我正在使用 vstack 和 hstack 来组合这些，但是“SP”也引起了问题，因为它不是浮点数。

我可以格式化它们，将其全部转换为字符串，组合然后保存txt吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:18:10.373

怎么样：

```
 from cStringIO import StringIO
 from itertools import izip

 # savetxt into a string
 sio = StringIO()
 np.savetxt(sio, my_array, fmt="%10.6e", delimeter=',')
 data_lines = sio.getvalue().split('\n')

 with open('Final Array.csv', 'w') as f:
     f.write(header_string + '\n')
     for leftcol, main in izip(left_column, data_lines):
         f.write(leftcol + ',' + main) 
```

或者根本不这样做`savetxt`：

```
with open('Final Array.csv', 'w') as f:
    f.write(header_string + '\n')
    for label, row in izip(left_column, my_array):
        f.write(str(label) + ',' + ','.join('%10.6e' % x for x in row) + '\n') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:18:19.250

一个简单的解决方案需要创建一个长度`my_array`与额外列相同的临时数组。

```
temp = np.empty((my_array.shape[0], my_array.shape[1]+1)) 
```

然后，用你想要的索引填充第一列，用你的初始数组填充最后一列：

```
temp[:,1:] = my_array
temp[:,0] = np.arange(1, len(my_array)+1) 
```

为了写入标题，您必须先以书面形式打开文件。您仍然可以将文件对象传递给`np.savetxt`，您只需修改格式字符串，以便您的第一列写为`int`，其他列写为`"%10.6e"`：

```
with open('final.csv', 'w') as f:
    f.write("SP,1,2,3\n")
    np.savetxt(f, temp, fmt="%i,%10.6e,%10.6e,%10.6e",delimiter=",") 
```

一种更具交互性的方式来定义您的格式字符串，具体取决于的列数`my_array`是

```
fmt = ",".join(["%i"] + ["%10.6e"] * my_array.shape[1])
np.savetxt(f, temp, fmt=fmt, delimiter=",") 
```

# sql - 需要替代光标以进行 sql 查询。目前耗时太长

> ID：12218947
> 
> 赞同：0
> 
> 时间：2012-08-31T16:05:23.917
> 
> 标签：sql, stored-procedures, cursor

```
CREATE TABLE #TempTable (stuID int, courseID int,outputvalue decimal(9,5))

DECLARE @parm1 int, @parm2 int, @parm3 int, @parm4 int, @parm5 varchar(10)
, @parm6 datetime, @parm7 datetime, @parm8 datetime, @parm9 varchar(5),@parm10 char(1),@parm11 char(1)

DECLARE gradeCursor CURSOR FAST_FORWARD FOR

SELECT
        3968585,
        reg.building,
        schd_ms.[section_key],
        schd_ms_session.course_session,
        CONVERT(nvarchar,reg.student_id), 
        '2012-07-01',
        '2013-06-30',
        REPLACE(convert(varchar, getdate(), 102),'.','-'),
        '%',
        'N',
        'Y'

    FROM    test.dbo.reg

    INNER JOIN schd_stu_course on schd_stu_course.student_id = reg.student_id
    INNER JOIN schd_ms on schd_stu_course.section_key = schd_ms.section_key
    JOIN schd_ms_session on schd_ms_session.section_key = schd_ms.section_key

    where schd_ms.school_year = '2013'

OPEN gradeCursor
FETCH NEXT FROM gradeCursor INTO 
@parm1,@parm2,@parm3,@parm4,@parm5,@parm6,@parm7,@parm8,@parm9,@parm10,@parm11

WHILE @@FETCH_STATUS = 0
BEGIN

DECLARE @odecStudentAverage decimal(9,5)

EXECUTE [Test_Live].[dbo].[spi_GBCalcStudentAverage] @Parm1, @Parm2, @Parm3, @Parm4, @Parm5, @Parm6, @Parm7, @Parm8, @Parm9,@Parm10, @Parm11, @odecStudentAverage output

INSERT INTO #TempTable (stuID, courseID,outputvalue)
Select @Parm5, @Parm3, @odecStudentAverage

FETCH NEXT FROM gradeCursor INTO 
@parm1,@parm2,@parm3,@parm4,@parm5,@parm6,@parm7,@parm8,@parm9,@parm10,@parm11
END

CLOSE gradeCursor
DEALLOCATE gradeCursor

SELECT
        reg.student_id,
        reg.building,
        schd_ms.[course],
        schd_ms.[section_key],
        schd_ms.[description],
        '',
        '',
        schd_ms_session.CREDIT,
        schd_ms_session.START_PERIOD,
        schd_ms_session.END_PERIOD,
        schd_ms_session.ROOM_ID,
        schd_ms_session.PRIMARY_STAFF_ID,
        schd_ms_session.course_session,
        #TempTable .outputvalue

    FROM    test_live.dbo.reg

    INNER JOIN schd_stu_course on schd_stu_course.student_id = reg.student_id
    INNER JOIN schd_ms on schd_stu_course.section_key = schd_ms.section_key
    JOIN schd_ms_session on schd_ms_session.section_key = schd_ms.section_key
    JOIN #TempTable on reg.student_id = #TempTable .stuID AND schd_ms.[section_key] = #TempTable .courseID 

    where schd_ms.school_year = '2013' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:08:53.190

如果可以的话，您最好的选择是将您的`spi_GBCalcStudentAverage`过程更改为表值 UDF。这将允许您将其包含在将替换您的光标的基于集合的查询中。

除非您这样做，否则您将无法摆脱游标，因为您无法在基于集合的查询中调用存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:43:21.550

您要么需要获得正确重构所需的权利，要么忍受糟糕的性能并告诉客户为什么无法提高性能。

您可以通过两种方式进行重构：

重写 sp 以通过带有逗号分隔列表的变量或通过使用 tableinput 变量（较新版本的 SQl 服务器）接受一组数据作为输入

或者创建一个表值函数。如果他们可以为您提供 sp 代码，您可以创建表值函数以使用 set theroy 而不是逐行调用 proc。他们可能更愿意让您创建一个新对象，而不是更改应用程序的其他部分正在使用的对象。

然而，所有这一切的真正关键在于，期望您创建解决方案而没有创建或更改需要更改以解决问题的权利是绝对不能接受的。客户的所作所为使您瘫痪。就好像您希望机械师修理您的汽车，但您拒绝给他启动引擎的钥匙。在你拿到车钥匙之前，你不能从事专业的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:28:26.530

如果您必须运行一个无法在每行基础上更改的存储过程，那么您几乎就是 SOL。你被光标卡住了。

根据您填充的行数，您可能需要考虑将临时表`#TempTable`更改为表变量`@TempTable`。这可以提高性能，但是存在一个阈值表大小，在该阈值表大小上，性能会突然因表变量而下降。

# objective-c - iOS 编程自动释放池

> ID：12218949
> 
> 赞同：2
> 
> 时间：2012-08-31T16:05:29.510
> 
> 标签：objective-c, ios, autorelease

在[Apple 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)中，它说：

> AppKit 和 UIKit 框架处理自动释放池块中的每个事件循环迭代（例如鼠标按下事件或点击）。因此，您通常不必自己创建自动释放池块，甚至不必查看用于创建自动释放池的代码。

现在，这应该很明显，但无论如何我都会要求确认。

如果我正在开发最终将成为后台进程的内容（通过 Grand Central Dispatch），但为简单起见，我首先将其放在第一个加载视图的 viewDidLoad 中，这样我的视图实际上不会显示在屏幕上，直到所有（比如说）2 分钟的处理都完成了，然后在这两分钟内，所有默认的自动释放池都不会被释放，因为它还没有通过事件循环迭代，对吗？听到拒绝简直是疯了，但我陷入了这个日益严重的记忆问题，所以我会要求确认并希望有一个好消息。

如果是这样，我应该放置我自己的自动释放块。如果处理是通过 GCD 在后台进程中完成的，我仍然需要自动释放块，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:30:25.003

我会尽力给你一个完整的回答你的两个问题。

第一部分。首先要注意主线程中长时间运行的操作。例如，如果您的操作需要两分钟，则主线程将被阻塞，直到它完成。从用户的角度来看，应用程序将在两分钟内没有响应。无论如何，是的，在应用程序委托中有一个插入自动释放对象的池。当循环结束时，池内的对象会被释放，因为池会自动排空。如果你有内存问题，你可以看看[Use Local Autorelease Pool Blocks to Reduce Peak Memory Footprint](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI)。如文档中所写，您应该将操作包装在自动释放块中。在块的末尾，临时对象被释放，这通常会导致它们的释放，从而减少程序的内存占用。

关于 GCD 问题，我会说不。处理 GCD 时不必创建自动释放池。通常，也写在[你需要在 GCD 的块内创建一个 NSAutoreleasePool 吗？](https://stackoverflow.com/questions/4141123/do-you-need-to-create-an-nsautoreleasepool-within-a-block-in-gcd), GCD 自动管理每个队列的自动释放池。所以，如果你的对象很少，你不必担心，但如果你创建了很多，是的，创建一个自动释放池。后者还允许您减少内存占用。

> 因此，对于应用程序没有响应的整整两分钟，是在循环尚未结束的情况下，并且在这两分钟内池没有耗尽，对吗？

该应用程序没有响应，因为主线程（通过运行循环）按顺序执行任务。如果您阻止运行循环，应用程序会冻结，直到长时间运行的操作完成（我认为如果您超过特定时间段，应用程序会被 iOS 杀死）。为避免这种情况，您可以（如您所写）在不同的线程中执行长时间运行的操作。

使用线程的目的是使应用程序具有高响应性，但它​​可能会导致各种问题，如不一致的数据（*竞争条件*）或*死锁*。

有关更多信息，我真的建议阅读[NSRunLoop 的弹簧棒](http://bynomial.com/blog/?p=15)，[了解 NSRunLoop](https://stackoverflow.com/questions/12091212/understanding-nsrunloop)和[NSDefaultRunLoopMode vs NSRunLoopCommonModes](https://stackoverflow.com/questions/7222449/nsdefaultrunloopmode-vs-nsrunloopcommonmodes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:06:31.743

您不需要创建自己的自动释放块来管理自动释放对象的内存；有一个池，它*是*自动管理的，自动释放的对象*最终**会*被释放。

因此，唯一的问题是“最终”这个神奇的词。*在您的处理过程中，您的应用程序是否因为尚未*释放的自动释放对象而使用过多内存（例如，系统将杀死它的内存量过多）？记住，他们*会*被释放；问题是情况是否如此糟糕以至于您需要立即释放它们*，*而无需等待自动释放池的耗尽，这肯定*会*在您不采取任何行动的情况下发生。

只有 Instruments 能告诉你，所以不要猜测，不要过早优化；看看仪器揭示了什么。如果情况那么糟糕，那么当然，找到生成所有这些自动释放对象的循环并在其中放置一个自动释放块，以便每次通过循环时都会耗尽池。否则，真的没有必要。（另一方面，在 ARC 下，自动释放块增加的开销很小，因此过早优化也可能不会造成太大*危害。）*

# java - 播放框架验证：重新显示输入

> ID：12218952
> 
> 赞同：0
> 
> 时间：2012-08-31T16:05:39.237
> 
> 标签：java, error-handling, playframework, playframework-1.x

我创建了一个输入表单。当用户提交值但未通过验证时，如何从用户那里获取原始值以显示？我可以正确地看到声明为“必填字段”的验证错误消息。它转发回输入表单并显示验证错误，但它不保存用户输入的值。

该模型

```
@Entity
public class Question extends BaseModel {

    @Required
    @MaxSize(100)
    public String title;
    @Required
    @MaxSize(5000)
    public String txt;
} 
```

控制器

```
public class Questions extends Controller {

    public static void ask() {
        Question question = new Question();
        render(question);
    }

    public static void addQuestion(Question question) {
        // save question
        if (!question.validateAndSave()) {
            params.flash();
            Validation.keep();
            ask();            
        }
        Application.index();
   }
} 
```

风景

```
#{form @exchange.Questions.addQuestion()}

  <label class="control-label" for="question.title">Question Title</label>
  <input type="text" class="input-large" name="question.title" value="${question.title}" />
  #{if errors.forKey('question.title')}<span class="alert-error"> #{error 'question.title'/}</span> #{/if}

  <label class="control-label" for="question.txt">Details</label>
  <textarea class="input-xxlarge span7" rows="6" name="question.txt">${question.txt}</textarea>
  #{if errors.forKey('question.txt')}<br/><span class="alert-error"> #{error 'question.txt'/}</span> #{/if}
  <button type="submit" class="btn btn-primary">Ask Question</button> 

#{/form} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:00:11.293

当您调用`Params.flash`它时，会将您在表单中提交的值添加到 flash cookie 中。因此，在您看来，您可以通过执行以下操作来访问这些值

请特别注意使用 flash 获取表单字段值的位置。

```
#{ifErrors}
   <h1>Oops...</h1>
#{/ifErrors}

#{form @Application.hello()}
   <div>
      Name: <input type="text" name="name" value="${flash.name}" />
      <span class="error">#{error 'name' /}</span>
   </div>
   <div>
      Age: <input type="text" name="age" value="${flash.age}" /> 
      <span class="error">#{error 'age' /}</span>
   </div>
   <div>
      <input type="submit" value="Say hello" /> 
   </div>
#{/form} 
```

# java - 如何在java中读取文本文件的某些部分

> ID：12218959
> 
> 赞同：1
> 
> 时间：2012-08-31T16:05:50.357
> 
> 标签：java, bufferedreader

我想读取文本文件中的某些部分并将这些部分中的每一个添加到它们相应的 ArrayList 中。这是一个示例文本文件：

```
format: pair_diploid
option: -b 50
option: -pp +
option: -mr masked
option: -n C:\Users\Fertilak\gimp\gimp
preprocess_script: cpp
source_files {
1   types.h 1
2   actions.c   2316
3   actions.h   1
4   editor-actions.c    91
5   editor-actions.h    1
287 test-clipboard.c    1247
}
source_file_remarks {
42
:   masked
152
:   masked
170
:   masked
}
clone_pairs {
5545    56.0-180    148.0-180
3083    62.1959-2107    62.2107-2255
3083    62.2107-2255    62.1959-2107
89  82.0-520    82.620-1140
89  82.620-1140 82.0-520
5545    148.0-180   56.0-180
12084   2865.633-694    2868.2877-2938
12084   2868.2877-2938  2865.633-694
}
clone_set_remarks {
} 
```

我想在我的 2 ArrayList 中添加的部分在 source_files 和 clone_pairs 中用括号“{}”括起来。因此，例如，我想在 arraylist sourcefiles 中添加所有数据，例如

```
 1   types.h 1
    2   actions.c   2316
...etc 
```

它们包含在 source_files 括号中。对于 clone_pairs 也是一样的，我会将括号中的所有数据添加到 arrayList clonePairs。

这是我到目前为止所做的......但它不起作用。

```
 public void readFile(String file){
List<String> sourceFiles = new ArrayList<String>();
List<String> clonePairs = new ArrayList<String>();

            try{
                BufferedReader buff = new BufferedReader(new FileReader(file));

                try{

                    String readBuff = buff.readLine();
                    while (readBuff != null){
                        if (readBuff.equals("source_files {") && !readBuff.equals("}")){
                            sourceFiles.add(readBuff);
                               }

                    else if (readBuff.equals("clone_pairs {") && !readBuff.equals("}")){
                            clonePairs.add(readBuff);
                               }

                        readBuff = buff.readLine();
                    }
                }
                finally{
                    buff.close();
                    }
            }

            catch(FileNotFoundException e){
                System.out.println("File not found");
            }
            catch(IOException e){
                System.out.println(e);
            }

        } 
```

除了 if-else 条件之外，几乎所有代码都在这段代码中工作。关于如何做到这一点的任何建议？

## 编辑

我已经编辑了内容并将其替换为 readBuff 字符串。对不起

## 编辑 2

为了大家的利益，这是 Andrew Solution Code 提出的正确代码：

```
public void readFile(String file){
        try{
            BufferedReader buff = new BufferedReader(new FileReader(file));

            try{

                String readBuff = buff.readLine();
                String section = "";
                while (readBuff != null){
                    if (section.equals("source_files {") && !readBuff.equals("}")){
                        sourceFiles.add(readBuff);
                    } else if (section.equals("clone_pairs {") && !readBuff.equals("}")){
                        clonePairs.add(readBuff);
                    } else if (readBuff.equals("source_files {") || readBuff.equals("clone_pairs {")) {
                        section = readBuff;
                    } else if (readBuff.equals("}")) {
                        section = "";
                    }

                    readBuff = buff.readLine();
                }

            }
            finally{
                buff.close();
                }
        }

        catch(FileNotFoundException e){
            System.out.println("File not found");
        }
        catch(IOException e){
            System.out.println("exceptional case");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:22:13.773

您正在构建的东西称为状态机。你需要一些东西来跟踪你在文件中的位置——状态。我已经调用它了`section`。

```
 String readBuff = buff.readLine();
                String section = "";
                while (readBuff != null){
                    if (section.equals("source_files {") && !readBuff.equals("}")){
                        sourceFiles.add(readBuff);
                    } else if (section.equals("clone_pairs {") && !readBuff.equals("}")){
                        clonePairs.add(readBuff);
                    } else if (readBuff.equals("source_files {") || readBuff.equals("clone_pairs {")) {
                        section = readBuff;
                    } else if (readBuff.equals("}")) {
                        section = "";
                    }

                    readBuff = buff.readLine();
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:45:52.063

我认为 if/else 在 while 正文中的方法只是简单的开销。因为对于您要检查的每个循环： 1\. while 循环中的条件 2\. 循环中的每个 if else。然后，当您遇到例如“source_files {”时，您仍在检查所有这些条件的每个循环。

在任何情况下，您都必须阅读文件的每一行，如果您知道它们的定义顺序，那么这应该更有效：

此方法将使 BufferedReader 开始。

```
private BufferedReader getBufferedReader(File file) {
    try{
        return new BufferedReader(new FileReader(file));
    }
    catch(FileNotFoundException e){
        e.printStackTrace();
    }
} 
```

此方法将读取缓冲区的每一行，直到遇到起始字符串。然后它将每下一行添加到列表中，直到遇到右括号。并将返回您新制作的清单。

```
private List<String> readContent(BufferedReader buff, String start) {
    List<String> list = new ArrayList<String>();
    try {
        String readBuff;
        do {
            readBuff = buff.readLine();
        }
        while (readBuff != null && !readBuff.startsWith(start));

        do {
            readBuff = buff.readLine();
            list.add(readBuff);
        }
        while (readBuff != null && !readBuff.startsWith("}"));

    }
    catch(IOException e){
        e.printStackTrace();
    }
    return list;
} 
```

最终你的方法看起来像这样。

```
 public void readLists(File file) {
        BufferedReader buff = getBufferedReader(file);
        List<String> sourceFiles = readContent(buff,"source_files {");
        List<String> clonePairs = readContent(buff,"clone_pairs {");
    } 
```

这段代码基本上在 while 循环中直接读取文件的每一行，因此您不需要任何 if/else。

如果您不知道文件中数据的顺序，则只需要 if/else。因此，此代码假定 source_files 先出现，然后 clone_pairs 出现。

另外，我使用startsWith，因为括号后可能有一个空格，即“source_files {”，这会使等号失败。

# solr - solr 查询语法的潜在语法错误列表？

> ID：12218960
> 
> 赞同：0
> 
> 时间：2012-08-31T16:05:55.843
> 
> 标签：solr, syntax-error

我正在尝试查看是否有完整的 solr 语法错误列表。我的目标是创建一个“清理”前端用户查询的函数，这样它就不会导致语法错误。

到目前为止，我发现了两个错误：

### EOF

如果查询以大写的 AND、OR、NOT 等结尾，则会引发 EOF 错误。
**修复**：小写查询（因为查询设置为不区分大小写）

### 不明字段信息

如果查询包含冒号，如“长学术标题的开始：此处诙谐的副标题”。
**修复**`:`：用空格替换所有实例。

我希望这是我需要解决的所有问题，但是如果还有其他我应该注意和控制的 solr 语法错误，那将非常有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:22:41.003

我不确定是否有任何语法错误的完整列表，但这里有一些，我们已经处理了：

```
1) encoding issues: special characters like %, & etc should not be
passed as it is as they may ruin the whole query

2) cases of two asterisks together: ** may cause infinite loops or
put the system down to its knees, if leading and trailing wildcards
are accepted. Case when a search term is just one asterisk isn't
allowed in our system either

3) (optionally) for boolean queries ensure that opening and closing
brackets match

4) strip the punctuation, but do it with care, e.g. if U.S. turns
into US, then to ensure findability (recall matters to us), we make
sure same happens during the tokenization. Also we identify urls and
don't remove punctuation from them

5) some errors may relate to malformed proximity operators (like
near, ~), e.g. we don't allow them to be nested or boolean operators
inside them 
```

我还要说，可以根据您为用户定义的语法来控制一些语法错误。那就是不要让他们做你不想让他们做的事。这也会在您的用户和您的应用程序之间形成某种搜索合同。提供一些类似工具提示的信息也很好，这些信息将告诉用户可以将什么典型语法用于什么目的。

# objective-c - 保持对象活动直到后台任务完成

> ID：12218964
> 
> 赞同：4
> 
> 时间：2012-08-31T16:06:06.133
> 
> 标签：objective-c, ios, automatic-ref-counting, objective-c-blocks

我正在尝试实现一种在后台执行任务然后在主线程上调用块的方法：

```
+ (void)migrateStoreWithCompletionHandler:(MigrationControllerCompletion)completion
{
    MigrationController *controller = [[MigrationController alloc] initWithCompletionBlock:completion];

    [controller migrateStore];
} 
```

这是`-initWithCompletionBlock:`方法：

```
- (id)initWithCompletionBlock:(MigrationControllerCompletion)completion
{
    self = [super init];

    if (self)
    {
        _completion = [completion copy];
    }

    return self;
} 
```

后台工作发生在`-migrateStore`. 问题是 ARC`controller`在`[controller migrateStore]`. 因为`controller`是持有块的对象，所以我无法调用它。有人对如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:25:48.413

使用对你有利的可怕的“保留周期”。

基本上，控制器对象强烈引用它的_completion iVar，所以如果你使那个块强烈引用，`self`那么你就有一个保留周期，只要你想要，它就会让对象保持活动状态。

编译指示暂时使保留周期警告静音。

然后，您可以通过在调用处理程序后将完成块设置为 nil 来手动中断保留周期。

```
- (id)initWithCompletionBlock:(MigrationControllerCompletion)completion
{
    self = [super init];

    if (self)
    {
        _completion = ^(BOOL success) {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-retain-cycles"
            if (completion) completion(self, success);
#pragma clang diagnostic pop
            _completion = nil;
        };
    }

    return self;
} 
```

然后，在您的代码中，当您想调用完成处理程序时，您不必通过`self`，因为它已经存在...

```
_completion(success); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:14:26.340

您可以考虑让包含`+migrateStoreWithCompletionHandler:`跟踪私有数组或类似数组中所有生成的 MigrationController 实例的类。这样可以避免`controller`过早释放，并允许您调用完成块。

但是，您需要找到一种稍后释放它们的方法，以避免在制作 MigrationControllers 时缓慢增加内存使用量。您可能会考虑在`-migrateStore`调用完成块之后从控制器发布通知，然后让您的工厂类监听该通知并取消分配适当的控制器。（如果您愿意，您也可以使用委托模式获得类似的行为。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:26:41.333

这是迄今为止我处理的 ARC 唯一真正的限制。不过，有一些简单的方法可以解决它：

`MigrationController`1）您可以为对象创建一个静态变量，并将其设置`nil`为调用完成块时。

2）**只有当你*真的*知道你在做什么时才这样做！**
直接使用`CFRetain()`和`CFRelease()`：

```
+ (void)migrateStoreWithCompletionHandler:(MigrationControllerCompletion)completion
{
    MigrationController *controller = [[MigrationController alloc] initWithCompletionBlock:^(MigrationController *migrationController, BOOL finished, ...) {
        if (completion != nil)
            completion(migrationController, finished, ...);

         CFRelease((__bridge void *)migrationController);
    }];

    [controller migrateStore];

    // Make 'controller' live until the completion block is invoked
    CFRetain((__bridge void *)controller);
} 
```

# java - 有没有更简单的方法来拆分/重建字符串？

> ID：12218965
> 
> 赞同：3
> 
> 时间：2012-08-31T16:06:10.017
> 
> 标签：java, string, split

目前我正在使用`String.split("")`这样的：

```
String[] tmp = props.get(i).getFullName().split("\\.");
String name = "";
for(int j = 1; j < tmp.length; j++){
    if(j > 1){
        name = name + "." + tmp[j];
    }
    else
        name = name + tmp[j];
} 
```

我的字符串的格式是`first.second.third...n-1.n`，我真正需要做的就是摆脱`first.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T16:07:17.417

我会用

```
String s = "first.second.third...n-1.n";
s = s.substring(s.indexOf('.')+1);
// or
s = s.replaceFirst(".*?\\.", "");
System.out.println(s); 
```

印刷

```
second.third...n-1.n 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:08:45.877

您可以改为使用`java.util.regex`和执行正则表达式。

要匹配的正则表达式`first.`是`^[^.]+[.]`

```
String s = "first.second.third...n-1.n";
s.replaceAll('^[^.]+[.]', ''); 
```

# xcode - Xcode 工作区源代码控制仅适用于第一个添加的项目

> ID：12218966
> 
> 赞同：0
> 
> 时间：2012-08-31T16:06:15.807
> 
> 标签：xcode, git, version-control, project, workspace

我在 Xcode 4.4 中创建了一个工作区和一个初始项目。一切运作良好。使用 git 进行源代码控制很好。当我将启用源代码跟踪的新项目添加到工作区时（使用项目导航器底部的 + 按钮），这些项目不允许我从工作区管理源代码控制。然而，这些项目确实有 .git 目录，命令行 git 可以很好地与它们配合使用。

最初添加到工作区的第一个项目继续让源代码运行良好。例如，如果我保存对文件的更改，则会出现“M”图标，表明该文件已被修改。源代码管理菜单有效。所有随后添加的项目的行为就像它们不受源代码控制一样。

如果我关闭工作区并单独打开项目，那么源代码控制工作得很好。

也许我误解了在工作区中使用项目的正确方法。任何帮助，将不胜感激。

〜查克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:30:17.423

我在使用 XCode 4.4 时遇到了同样的问题，我已经解决了，如以下步骤列表所示。

1 - 确保您的项目工作文件夹位于存储库列表中（在管理器 - 存储库选项卡中）。

2 - 如果您已经在工作区下的项目列表中显示了该项目，请将其删除（仅供参考）

3 - 现在使用 XCode 菜单中文件语音下的“将文件添加到“YOURWORKSPACE”...”并添加 .xcodeproj 项目文件（使用“为任何添加的文件夹创建文件夹引用”选项）。

然后，您将设法使用“源代码管理”菜单并与您的存储库交谈。...这对我来说听起来像是一个错误，因为每次将新项目添加到工作区时，我都必须重复这些步骤。

希望你能通过这种方式解决！

# wpf - EF4.0 - 将相关对象插入数据库

> ID：12218968
> 
> 赞同：1
> 
> 时间：2012-08-31T16:06:35.033
> 
> 标签：wpf, entity-framework, entity-framework-4, entity-relationship

我正在尝试 Entity Framework 4.0，这是*该*案例的最简化版本 -

我有以下两个相关的表 -

**地址**
ID
城市

**客户**
ID
地址 ID
名称

我已经在 ComboBox 中加载了地址。我想要的只是在文本框中输入客户端名称，从组合框中选择一个地址作为客户端的地址，然后点击保存按钮。我希望将我的客户保存在客户表中。这是我尝试过的 -

```
 /*loads Addresses to the ComboBox*/
    private void LoadData()
    {
        using (CAEntities ctx = ModelAccess.GetContext())
            this.AddressList = ctx.Addresses.ToList();
    }

    /*(tries) to insert the Client to the database*/
    private void Save()
    {
        /*here this.Client is the Client object that is instantiated & initialized   
          by previous code and this.Address is the SelectedItem of the ComboBox*/
        this.Client.Address = this.Address;
        using (CAEntities ctx = ModelAccess.GetContext())
        {
            ctx.Clients.AddObject(this.Client);
            ctx.SaveChanges();
        }
    } 
```

[编程实体框架](https://rads.stackoverflow.com/amzn/click/com/059652028X)中的 Julie Lerman说，`...Because the entities are joined, you can add either entity, and it will bring along the rest of the graph...`但是我所拥有的是一个 InvalidOperationException，它说“EntityKey 属性只能在属性的当前值为 null 时设置。”
如果我使用 -

```
this.Client.AddressId = this.Address.Id; 
```

代替 -

```
this.Client.Address = this.Address; 
```

客户端完美插入数据库。但我认为我也应该能够将实体直接相互关联，对吗？
我认为问题与我正在创建的单独上下文有关。所以我尝试了这个-

```
 private void Save()
    {
        this.Client.Address = this.Address;
        using (CAEntities ctx = ModelAccess.GetContext())
        {
            ctx.Addresses.Attach(this.Address);
            ctx.SaveChanges();
        }
    } 
```

但这次我收到了一个 InvalidOperationException，上面写着“无法将具有临时 EntityKey 值的对象附加到对象上下文。” 那么我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:29:34.543

**这应该可以解决问题：**

```
 using (CAEntities ctx = ModelAccess.GetContext())
    {
        ctx.Addresses.Attach(this.Address);
        this.Client.Address = this.Address;
        ctx.Clients.AddObject(this.Client);
        ctx.SaveChanges();
    } 
```

**为什么这行得通？**

DbContext 跟踪它被拉下或已显式附加到它的对象。在您的情况下，您正在设置`this.Client.Address`DbContext 不知道的对象。在某些情况下，这将导致实体框架同时插入一个新的客户行*和*一个新的地址行，但在您的情况下，由于一些我不知道的语义细节，它引发了一个模糊的异常。

通过附加`this.Address`到 DbContext，实体框架了解该地址已存在于数据库中，并且当您将其分配给现有对象时，您正在创建与现有对象的关联`this.Client.Address`。

IMO，需要更好地记录实体框架的语义。有很多这样的情况会引发误导性或晦涩的异常。例如，在附加对象时，请务必记住它们是递归附加的。如果您要在新的数据上下文中附加`this.Client`，它也会递归附加`this.Client.Address`，并且任何其他实体都`this.Client`可能引用。出于这个原因，如果你要显式附加`this.Client`，那么`this.Address`你会得到一个异常，因为在你附加时地址已经被隐式附加`this.Client`。

# python - 对话框中的 GTK 标签包装

> ID：12218970
> 
> 赞同：7
> 
> 时间：2012-08-31T16:06:37.157
> 
> 标签：python, gtk, gtk3

我正在尝试创建一个带有标签的**不可调整大小的对话框。**这个标签有很多文字，所以我希望它在**不使对话框变得荒谬的情况下换行**。

出于某种原因，我不知道如何让 GTK 允许这种情况发生。我什至找不到在对话框上设置最大宽度的方法，这很好。

这是我的意思的一个运行示例：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from gi.repository import Gtk

class DialogExample(Gtk.Dialog):

    def __init__(self, parent):
        Gtk.Dialog.__init__(self, "My Dialog", parent, 0,
            (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,
             Gtk.STOCK_OK, Gtk.ResponseType.OK))

        self.set_default_size(150, 100)
        self.set_resizable(False)

        label = Gtk.Label("This is a dialog to display additional information, with a bunch of text in it just to make sure it will wrap enough for demonstration purposes")
        label.set_line_wrap(True)

        box = self.get_content_area()
        box.add(label)
        self.show_all()

class DialogWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Dialog Example")

        self.set_default_size(250, 200)

        button = Gtk.Button("Open dialog")
        button.connect("clicked", self.on_button_clicked)

        self.add(button)

    def on_button_clicked(self, widget):
        dialog = DialogExample(self)
        response = dialog.run()

        if response == Gtk.ResponseType.OK:
            print "The OK button was clicked"
        elif response == Gtk.ResponseType.CANCEL:
            print "The Cancel button was clicked"

        dialog.destroy()

win = DialogWindow()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T20:33:01.710

我解决了这个问题（除了将换行设置为 True）将 Gtk.Label 放入 Gtk.Table 中，使用 FILL 和 SHRINK 标志并为标签设置固定宽度。像这样的东西：

```
label = Gtk.Label("This is a dialog to display additional information, with a bunch of text in it just to make sure it will wrap enough for demonstration purposes")
label.set_line_wrap(True)
label.set_size_request(250, -1) # 250 or whatever width you want. -1 to keep height automatic

table = Gtk.Table(1, 1, False)
table.attach(label, 0, 1, 0, 1, Gtk.AttachOptions.SHRINK | Gtk.AttachOptions.FILL) 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-18T00:09:17.330

从 2.6 开始，您可以使用： `label.set_max_width_chars(50)`

目前不折旧。:)

见这里：[https ://developer.gnome.org/Labels/](https://developer.gnome.org/Labels/)

# android - 在附加到适配器的图库中显示位图时“无法绘制回收的位图”

> ID：12218976
> 
> 赞同：15
> 
> 时间：2012-08-31T16:07:04.713
> 
> 标签：android

在 Android 4.1 a 中，对我来说，我们的应用程序中出现了看似奇怪的错误。在应用程序中，扩展 BaseAdapter 的自定义适配器附加到 Gallery 小部件。当从左到右快速滚动时，反之亦然，我得到一个带有异常消息的 FC：

> java.lang.IllegalArgumentException：无法绘制回收位图

getView(..) 方法的代码如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder viewHolder;

    if (convertView == null){
        // View is not recycled. Inflate the layout.
        LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.gallery_image, parent, false);

        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) convertView.findViewById(R.id.gallery_image);

        convertView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder)convertView.getTag();
        viewHolder.image.setImageDrawable(null);
    }

    imageLoader.displayImage(images.get(position).getFilename(),
            images.get(position).getUrlThumbnail(),
            viewHolder.image,
            Math.round(BitmapUtil.convertDpToPixel(400f, context)),
            Math.round(BitmapUtil.convertDpToPixel(400f, context)));

    return convertView;
} 
```

我想我应该在某处为 ImageView 清空，但我无法让它正常工作。ImageLoader 是一个（非常）简单的用于加载图像的类 - 从 LruCache、磁盘/sdcard 或远程获取它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-02T20:47:55.080

您收到此错误是因为您无法访问回收的位图。正如 Android 开发者网站所说：

> 释放与此位图关联的本机对象，并清除对像素数据的引用。这不会同步释放像素数据；如果没有其他引用，它只是允许它被垃圾收集。该位图被标记为“死”，这意味着如果调用 getPixels() 或 setPixels() 将引发异常，并且不会绘制任何内容。此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

我建议您到目前为止不要回收位图，因为它仍然有用。因此，请查看您的代码何时调用该`recycle()`方法，然后将其删除。

当 Bitmap 不再需要使用时，我建议您使用这种方法来处理 Bitmap：

```
public void disposeBitmap(Bitmap bitmap) {
        bitmap.recycle();
        bitmap = null;
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T11:38:04.453

事实证明，这个错误是由在我的类中调用覆盖 LruCache`oldBitmap.recycle()`的方法引起的。`entryRemoved(..)`由于位图可能仍附加到 ImageView 调用`recycle()`会造成麻烦。

如果我理解正确：LruCache 的缓存大小将在其构造函数中设置。当项目数超过此大小时，对象将有资格进行垃圾收集，这将在位图不再与 ImageView 关联时发生。

网络上的许多示例和教程建议`recycle()`应该调用 in `entryRemoved(..)`，但据我所知这是错误的。

# git - Git：将合并规则添加到特定文件的配置中

> ID：12218977
> 
> 赞同：2
> 
> 时间：2012-08-31T16:07:15.113
> 
> 标签：git, configuration, git-merge

我正在使用 git 来跟踪我在不同机器上使用 Kile 编写的大型 LaTeX 文档。

`.kilepr`关闭 Kile 时，Kile 会写入其配置文件。我经常遇到的问题是我在关闭 Kile**之前提交。**所以我提交并推送，在另一台机器上工作，当我回来想要拉时，我遇到了合并冲突，因为`.kilepr`文件包含光标位置（现在显然改变了）。

我的问题：有没有办法为特定文件添加合并规则到 git config （总是使用*--theirs*）？使用`.gitignore`不是一个选项，因为该`.kilepr`文件包含重要信息，例如项目中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:27:49.490

模拟合并的所有可能方法都列在“ [git command for making an branch like another](https://stackoverflow.com/a/4912267/6309) ”中。

但是对于一个文件，您只需要一个合并驱动程序，在`.gitattributes`文件中声明，`keepTheir`脚本如下：

```
mv -f $3 $2
exit 0 
```

有关自定义合并驱动程序（包括[我自己的版本](https://stackoverflow.com/a/1910479/6309)）的具体示例，请参阅“[需要的“<code>git merge -s theirs”——但我知道它不存在”。](https://stackoverflow.com/questions/1910444/git-merge-s-theirs-needed-but-i-know-it-doesnt-exist)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-07T02:15:38.463

2018 年解决方案：合并驱动程序

在 git config 中，您可以添加自定义合并驱动程序：

```
[merge "my-custom-driver"]
    name = A custom merge driver used to resolve conflicts in certain files
    driver = my-merge-tool.sh %O %A %B 
```

但您也可以只为始终保留本地更改的驱动程序返回“true”：

```
[merge "keep-local-changes"]
    name = A custom merge driver which always keeps the local changes
    driver = true 
```

然后在 .gitattributes 中，您可以定义哪些文件类型使用哪些自定义合并驱动程序：

```
/folder/**/*.fileExtension merge=keep-local-changes 
```

# backbone.js - 渲染所选模型的详细视图时的主干样板范围错误

> ID：12218979
> 
> 赞同：0
> 
> 时间：2012-08-31T16:07:18.963
> 
> 标签：backbone.js, boilerplate

我刚从骨干开始并使用样板（[https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)）。我的应用程序分为 3 列：固定导航列表、项目列表和详细视图。单击导航链接时，我会在中间列中加载一组项目。下一步是在单击其中一个项目（集合中的模型）时显示详细视图。

我似乎无法获得要渲染的详细视图。我在列表视图中初始化详细视图，然后在详细视图中设置 pubSub，以便在单击模型时可以调用详细视图。但是，当我尝试渲染视图时，我得到一个“未捕获的 RangeError：超出最大调用堆栈大小”。

相关代码： http: [//pastebin.com/C88ezty7](http://pastebin.com/C88ezty7)

我似乎不明白为什么细节视图无法渲染。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:33:50.660

我似乎已经解决了上述问题。可能不是以正确的方式，但它现在正在按我的预期工作。我将此添加到我的查看项目（模型）中：

```
showDeanery: function(ev) {
    deaneryid = this.model.get('deaneryid');
    //we should load the detail view from here
    console.log('load deanery: '+deaneryid);
    $(".startpage").empty();
    $(".detailcontainer").removeClass('startpage');
    app.layout.insertView('.detailcontainer',new Views.Detail({
            model:this.model
    }),true).render();
} 
```

我希望从另一个视图中调用视图是“好的”。现在只需要弄清楚如何通过路由器加载它！

# svn - 在代码中显示 svn 版本

> ID：12218985
> 
> 赞同：1
> 
> 时间：2012-08-31T16:07:37.840
> 
> 标签：svn

有没有办法在文件中显示文件的 SVN 版本？

我们使用 SVN 进行版本控制。我们主要使用 PHP 编写代码。

我正在尝试做的事情：

所以我想显示文件在头部注释块内的 SVN 版本。所以我很好奇是否有一些 SVN 函数/标签可以自动执行此操作，而不必记住每次提交时都更新数字。

或者我只是想到了这个，是否可以将某种字符串替换标签放入文件中，这样当您提交到 SVN 时，SVN 会用特定的信息替换标签？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:09:33.680

是的，使用 SVN*关键字* `$Revision`- 请参阅[SVN 手册的 v1.4 以](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)了解其他关键字以及如何配置 SVN 来进行*关键字替换*。关键字可以放在注释块中，如下例所示：

```
<?php
/*
  $LastChangedDate$
  $Revision$
*/
?> 
```

SVN v1.6 引入了可能使用的附加关键字，具体取决于您安装的版本。撰写本文时最新的 SVN 版本为[v1.7](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:14:04.653

根据 PHP 文档，假设您通过 PHP 启用了 SVN，您可以运行

```
$status = svn_status(__FILE__);
echo $status['revision']; 
```

在脚本中，您要在其中输出 svn-revision。文档可以在这里找到：[http ://www.php.net/manual/en/function.svn-status.php](http://www.php.net/manual/en/function.svn-status.php)

# web2py - 获取所有登录用户 Web2py

> ID：12218989
> 
> 赞同：2
> 
> 时间：2012-08-31T16:07:51.100
> 
> 标签：web2py

有没有一种快速简单的方法可以让所有当前登录到 web2py 应用程序的用户？我想向页面的管理员显示目前有多少非管理员用户登录。谢谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T01:19:56.340

请注意，“当前登录”不是一个定义明确的概念。您可以登录，然后离开计算机或关闭浏览器。在这种情况下，您还登录吗？您可能不应该被视为已登录，但服务器不知道您离开或关闭了浏览器。Auth 系统确实在 auth_events 表中记录登录和注销事件，因此一种选择是查找在定义的时间段内登录但此后未明确注销的所有用户。请注意，这可能夸大了登录用户的数量，因为有些人可能在没有明确退出的情况下离开了您的网站。这是一些代码：

```
import datetime
limit = request.now - datetime.timedelta(minutes=30)
query = db.auth_event.time_stamp > limit
query &= db.auth_event.description.contains('Logged-')
events = db(query).select(db.auth_event.user_id, db.auth_event.description,
    orderby=db.auth_event.user_id|db.auth_event.time_stamp)
users = []
for i in range(len(events)):
    last_event = ((i == len(events) - 1) or
                   events[i+1].user_id != events[i].user_id)
    if last_event and 'Logged-in' in events[i].description:
        users.append(events[i].user_id)
logged_in_users = db(db.auth_user.id.belongs(users)).select() 
```

以上为您提供了在过去 30 分钟内登录但未明确注销的所有用户。

更复杂的方法将涉及跟踪已登录用户的请求，以确定谁在积极使用该应用程序。您可以缓存一个字典，该字典存储每个登录用户的最新请求的时间戳。当请求报告时，向用户显示最近某个时间范围内的时间戳（并清除时间戳较旧的用户，以防止缓存变得太大）。

另一种选择是检查会话文件。确定在某个时间范围内已修改的会话。其中，找到包含“auth”对象的，并检查 auth.last_visit 的最后一次请求的时间（实际上，auth.last_visit 仅在上次访问后的时间超过 auth.settings 的 1/10 时才更新.expiration 时间，默认为 3600 秒）。

# c# - Visual Studio 2008 要求保存对 .SLN 文件的更改

> ID：12218991
> 
> 赞同：1
> 
> 时间：2012-08-31T16:08:05.767
> 
> 标签：c#, asp.net, visual-studio-2008, solution

当我关闭它时，我的 Visual Studio 不断提示我将项目保存到`.SLN`文件中，但我不知道为什么。

有任何想法吗？我的 ASP.net 不需要这样的“解决方案文件”。

它将我的解决方案显示为名称“Z”，这是我选择映射的驱动器号，它直接将它带到我的代码中。

![在此处输入图像描述](../Images/35db61b13074c681f5255d2dcdcd7a18.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:11:38.133

默认情况下，Visual Studio 总是创建一个解决方案文件，以便它可以跟踪您将来可能添加到解决方案中的任何项目（解决方案只是项目的集合）。

没有办法解决这个问题。只需让它将`sln`文件保存到您选择的目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:11:33.250

如果您没有解决方案文件，那么 Visual Studio 将为您创建一个，这就是它要求您保存的内容。如果您使用项目文件而不是解决方案文件打开项目，它可能会为您创建一个新的解决方案文件，然后再次提示您保存它。我建议您让它保存解决方案文件，然后在将来使用该解决方案文件打开项目。

# php - PHP：错误：异常参数错误，抛出数组异常

> ID：12218993
> 
> 赞同：6
> 
> 时间：2012-08-31T16:08:19.347
> 
> 标签：php, exception, exception-handling

我使用数组抛出异常，如下所示：

```
$response = array('login_email' => '<div class="warning">Your email and / or password were incorrect</div>');

throw new \Exception($response); 
```

我要抓住的是：

```
Error: Wrong parameters for Exception([string $exception [, long $code [, Exception $previous = NULL]]]) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T16:10:51.867

Exception() 不会采用数组。你需要给它一个字符串。

```
$response = 'Your email and / or password were incorrect.';

throw new \Exception($response); 
```

阅读错误：

> 异常（[**字符串**$异常[，**长**$代码[，**异常** $previous = NULL]]]）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T11:22:04.890

如果您想以数组作为参数抛出异常，您可以对数组进行[json_encode](http://php.net/manual/en/function.json-encode.php)，使其变为字符串。

```
$response = array('login_email' => 'sometext', 'last_query' => 'sometext');
throw new \Exception(json_encode($response)); 
```

还可以查看 json_encode 的第二个参数：您可以添加 JSON_PRETTY_PRINT 以使您的错误缩进（它更具可读性但需要更多空间），或者您可以使用[JSON Viewer](https://sourceforge.net/projects/nppjsonviewer/) for Notepad++ 之类的工具在查看时格式化您的 json 字符串它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T15:02:44.790

如果你想抛出一个包含数组的异常，那么你可以创建自己的异常类并扩展它——[你能在php中抛出一个数组而不是字符串作为异常吗？](https://stackoverflow.com/questions/6797142/can-you-throw-an-array-instead-of-a-string-as-an-exception-in-php)

# javascript - 用于 grails 的 javascript 微调器

> ID：12218994
> 
> 赞同：-3
> 
> 时间：2012-08-31T16:08:27.437
> 
> 标签：javascript, grails, spinner

我正在尝试将微调器添加到 onclick 事件中，但我找不到纯 javaScript 微调器。这是可能的还是在grails中有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:30:49.840

纯 javascript — 甚至没有任何图像：

```
document.getElementById("button").onclick = function() {
    var spinner = document.getElementById("spinner_container")​​​​;
    spinner.anim_mode = 0;
    var animation = ["|", "/", "–", "\\"]
    var spin = function() {
        spinner.anim_mode = (spinner.anim_mode + 1) % animation.length;
        spinner.innerHTML = animation[spinner.anim_mode];
    };
    spin();
    setInterval(spin, 100);
};​ 
```

[http://jsfiddle.net/dGL8X/](http://jsfiddle.net/dGL8X/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:33:40.850

这是我最喜欢的旋转器。JS/CSS，没有图像。有蹩脚浏览器的后备方案；）

[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

# mysql - 大表的SQL优化和基于key的选择

> ID：12218995
> 
> 赞同：0
> 
> 时间：2012-08-31T16:08:28.900
> 
> 标签：mysql

我正在尝试将我们服务器上的响应时间降低到 250 毫秒范围内，大多数查询需要不到一毫秒的时间，而这一次需要很长时间。由于行数很大，超过 1500 毫秒。这是数据结构，是否可以采取任何措施来减少此查询的时间，或者使用不同的查询或以某种方式更快地设置我的数据？

```
mysql> describe variant_bikes;

+------------+-----------------------+------+-----+---------+-------+
| Field      | Type                  | Null | Key | Default | Extra |
+------------+-----------------------+------+-----+---------+-------+
| variant_id | mediumint(8) unsigned | NO   | PRI | 0       |       |
| bike_id    | mediumint(8) unsigned | NO   | PRI | 0       |       |
+------------+-----------------------+------+-----+---------+-------+

mysql> describe cscart_product_option_variants;

+----------------------+-----------------------+------+-----+---------+----------------+
| Field                | Type                  | Null | Key | Default | Extra          |
+----------------------+-----------------------+------+-----+---------+----------------+
| variant_id           | mediumint(8) unsigned | NO   | PRI | NULL    | auto_increment |
+----------------------+-----------------------+------+-----+---------+----------------+
15 rows in set (0.00 sec)

mysql> describe bikefilter_cache;
+---------+-----------------------+------+-----+---------+----------------+
| Field   | Type                  | Null | Key | Default | Extra          |
+---------+-----------------------+------+-----+---------+----------------+
| bike_id | mediumint(8) unsigned | NO   | PRI | NULL    | auto_increment |
| year    | smallint(6) unsigned  | NO   | PRI | NULL    |                |
| make    | varchar(20)           | NO   | PRI | NULL    |                |
| line    | varchar(20)           | NO   | PRI | NULL    |                |
| model   | varchar(90)           | NO   | PRI | NULL    |                |
+---------+-----------------------+------+-----+---------+----------------+

mysql> select count(*) from variant_bikes;

+----------+
| count(*) |
+----------+
|  7577597 |
+----------+
1 row in set (1.85 sec)

mysql> select variant_id from variant_bikes where bike_id=112;
9366 rows in set (2.30 sec) 
```

我之前尝试过的一件事，我认为至少在当时的大小上要慢得多，就是让 variant_bikes 成为一个带有 variant_id 的表，但 bike_ids 字段是 varchar 和/或文本，并且您搜索了一个逗号分隔的列表。

我想到的另一件事可能是将所有表排列成不同的更有效的数据结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:46:01.013

为了获得该查询的最佳性能，请添加一个 index `ON variant_bikes (bike_id, variant_id)`。

这将是查询的“覆盖”索引，MySQL 将能够仅“使用索引”块来满足查询，而无需从表中引用（查找）任何数据块。

**问：**为什么在已经有索引的情况下还需要这个索引`(variant_id, bike_id)`？

**A：**这与索引中列的顺序有关。查询中的谓词（WHERE 子句）位于`bike_id`列上。为了让 MySQL 使用索引，该列需要作为索引中的前导列出现。

**问：**如果我只在`(bike_id)`列上有索引怎么办。

**A：** MySQL 很可能使用那个索引。查询还需要从列中返回值`variant_id`……为了获得最佳性能，我们只想满足来自索引块的查询。根据 MySQL 的版本和存储引擎，MySQL 可能能够`variant_id`从索引返回 just `(bike_id)`，因为主键列的值是返回数据块的“指针”。

您可以尝试添加该索引，然后运行一个`EXPLAIN SELECT ...`，您希望看到的最后一列（额外）是“使用索引”，这表明查询已从索引中得到满足，而无需引用表中的块。

```
... key             Extra        
--- -------------   -------------
    bike_id_index   Using index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:20:08.460

您的`variant_bikes`主键是一个复合键`(variant_id, bike_id)`，您正在搜索该复合键的后半部分。所以你不能使用索引。

添加一个索引`bike_id`，一切都应该很好。

# mysql - mysql：获取具有给定值的静态列，如果值存在，则获取具有id的另一列

> ID：12218997
> 
> 赞同：0
> 
> 时间：2012-08-31T16:08:41.660
> 
> 标签：mysql, select

这在 MySQL 中可能吗？

假设我有一张桌子：ID，姓名

现在，我想运行查询以查看这些名称是否存在“John,James,Bill”。假设数据库中只存在 James 的名称（ID：23，名称：James），我希望看到这个结果：

```
ID    | Name
------------
null  | John
  23  | James
null  | Bill 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:11:30.830

您需要在您的表和包含您希望搜索的名称列表的某个表之间建立一个*外部连接*`UNION`（您可以在运行查询之前创建这样的表，或者使用如下所示在查询中具体化这样的表）。了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

```
SELECT * FROM my_table NATURAL RIGHT JOIN (
  SELECT 'John' AS Name UNION ALL SELECT 'James' UNION ALL SELECT 'Bill'
) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/7fe97/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:12:40.410

您可以使用`IN()`比较功能来检查`WHERE Name IN ('John', 'James', 'Bill')`。如果您希望返回显示`ID`匹配的结果，您可以使用：

```
SELECT b.ID, a.Name
FROM sparkles a
LEFT JOIN (SELECT ID, Name FROM sparkles WHERE Name IN ('John', 'James', 'Bill')) b ON b.ID = a.ID 
```

# java - 内容管理系统 CMS 基于 java 的工具？

> ID：12218999
> 
> 赞同：2
> 
> 时间：2012-08-31T16:08:46.647
> 
> 标签：java, sharepoint, content-management-system

请我需要知道是否有任何 CMS 或任何对应的 Microsoft sharepoint，但使用 JAVA 语言。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:28:42.017

*   Nuxeo ECM：[http ://www.nuxeo.com](http://www.nuxeo.com)
*   露天：[http ://www.alfresco.org](http://www.alfresco.org)
*   [http://www.flexive.org/products/cms.html](http://www.flexive.org/products/cms.html)
*   贾希亚[http://www.jahia.com/cms/home.html](http://www.jahia.com/cms/home.html)

**木兰**

Magnolia 是第一个兼容 JSR-170 的开源内容管理系统 (CMS)。它的主要目标是让参与运行 CMS 的所有各方都易于使用。它具有非常灵活的结​​构、通过使用 Java 和 XML 实现平台无关性、简单易用的 API、通过使用 JSP、JSTL 和自定义标签库轻松进行模板化、自动管理 UI 生成、透明和统一的数据访问通过 JSR-170 实现多个数据存储库，通过 XML 轻松配置，轻松集成应用程序并轻松部署为 Java EE servlet。

**可可博客**

CocoBlog 是一个基于 Apache Cocoon 和 Apache Xindice 的免费网络日志软件工具。目前它能够管理一个单用户博客，存储在一个 XML 存储库中并通过 Cocoon 发布它。Cocoon 的使用可以很好地分离内容和表示，因此页面的外观完全由 XSLT 样式表决定。

**滚子博客**

Roller 是基于服务器的网络日志软件，一个旨在支持多个同时网络博客用户和访问者的网络应用程序。Roller 支持所有最新最好的网络日志功能，例如评论、所见即所得的 HTML 编辑、页面模板、RSS 联合、trackback、blogroll 管理，并为 w:bloggar 和 nntp// 等博客客户端提供 XML-RPC 接口RSS。

**迷你博客**

管理博客的小工具。

**简单网**

使用集成内部 Java 数据库 (hSQLDB) 或 MySQL db 设置的 wiki 即插即用设置。HTML 子集编辑。无需学习奇怪的 Wiki 语法。页面预览和所有更改的完整档案。集成的基本搜索。通过电子邮件确认和忘记密码通知自动注册用户。当用户为新闻聚合器更新 RSS 文件并通过电子邮件发送给管理员通知时，将在页面上使用的文件上传（主要用于图像）Weblogs.com ping。Userland Radio OPML 文档转换（使用 Instant Outliner 浏览 wiki）。

**XML2博客**

XML2blog 是一个小型 Java 包，旨在简化将 XML 文档转换为 Blogger 模板的过程，解决 Blogger 的问题

**茧阿帕奇**

Apache Cocoon 是一个 XML 发布框架，它将用于服务器应用程序的 XML 和 XSLT 技术的使用提高到一个新的水平。Cocoon 专为围绕流水线 SAX 处理的性能和可扩展性而设计，提供了一个基于内容、逻辑和样式之间的关注点分离的灵活环境。

**科法克斯**

Cofax 是一个强大的基于 Web 的内容管理系统，用于编辑和管理 16 种以上报纸的在线版本。它是作为开源软件开发的。大部分代码由 Knight Ridder 员工编写，其他代码由其他人根据开源许可贡献。

**开放式管理系统**

OpenCms 是一个基于 Java 的网站内容管理系统。它由 OpenCms 组开发并使用 LGPL 开源许可证。

您还可以找到以下有用的链接：

*   [http://en.wikipedia.org/wiki/List_of_content_management_systems](http://en.wikipedia.org/wiki/List_of_content_management_systems)
*   [http://java-source.net/open-source/content-managment-systems](http://java-source.net/open-source/content-managment-systems)
*   [http://www.opensourcecms.com/](http://www.opensourcecms.com/)
*   [http://www.scriptol.com/cms/list.php](http://www.scriptol.com/cms/list.php)