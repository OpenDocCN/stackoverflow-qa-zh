# StackOverflow 问答 11602000-11602999

# java - 如何在不破坏 Android 的情况下将 Eclipse 工作区组织到文件夹中

> ID：11602002
> 
> 赞同：2
> 
> 时间：2012-07-22T16:31:11.540
> 
> 标签：java, android, eclipse, packages

我一直在 Eclipse 中开发一个 Android 应用程序，它逐渐变得复杂，以至于我发现很难在包资源管理器中找到单个类。

Java 不是我的强项，我来自 Visual Studio/C Sharp 背景，所以我的第一个想法是将类的逻辑组移动到新的包中，有点像在 Visual Studio 中创建一个新的代码文件夹。

我创建了一个新包 com.mycompany.myapp.activities 并将所有 Activity.java 文件拖到这里。

整个事情进展得很糟糕，我遇到了大量的导入错误、资源构建失败等等。自动重构工具也把我的 Manifest 文件弄得一团糟。只是它似乎不是按照这种方式设计的——我最终将它们全部移回，并浪费了两个小时来修复它。

所以我的问题是，Eclipse 是否有某种方法可以将 .java 文件组织到逻辑子文件夹中，而不必为它们创建新包？我想为“数据模型”创建一个文件夹，为“活动”创建一个文件夹，为“接口”创建一个文件夹，依此类推。

我该怎么做呢？还是我想错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:39:10.113

> 所以我的问题是，Eclipse 是否有某种方法可以将 .java 文件组织到逻辑子文件夹中，而不必为它们创建新包？

AFAIK，不。您只需要修复与将代码移动到包中相关的内容。

> 我有大量的导入错误

您的应用程序`R.java`会生成到您的应用程序包 ( `com.mycompany.myapp`) 中，并且同一包中的任何类都`R`通过自动导入获得。驻留在其他包中的代码需要导入该类（例如，`import com.mycompany.myapp.R`）。因此，如果您将应用程序包中的类重构为子包，则需要添加导入。

> 资源构建失败

这似乎不太可能，因为资源对 Java 包一无所知。但是，没有任何细节，很难为您提供具体的帮助。

> 自动重构工具也非常糟糕地弄乱了我的清单文件

您需要调整`<activity>`元素以确保它们指向新重新打包的类。对于您重新打包的任何其他组件（例如，服务）也是如此。除此之外，没有任何细节，很难为您提供具体的帮助。

> 似乎它不是为那样工作而设计的

当然，支持将活动移动到其他包中。ADT 插件是否沉着地处理它的所有方面是另一个问题。如果您想出具体的可重复场景，其中 ADT 插件没有做正确的事情，请在[http://b.android.com](http://b.android.com)提出问题。

# jquery - 与 jquery $.post 和 phoneGap 一起工作的网络

> ID：11602006
> 
> 赞同：0
> 
> 时间：2012-07-22T16:31:46.197
> 
> 标签：jquery, cordova, blackberry-webworks

在使用 webworks、jquery 版本 1.6.4 和 PhoneGap 开发的应用程序中，我无法使用 $.post。在其他类似的问题中使用 Ajax 解决了，但这不是我的情况。

他添加了我的部分代码以尝试找到解决方案：

索引.html

```
<!DOCTYPE HTML>
<html>
<head>
<title>Prueba</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/estilo.css" />
<link rel="stylesheet" type="text/css" href="css/sunny/jquery-ui-1.8.21.custom.css" />
<script type="text/javascript" src="js/json2.js"></script>
<script type="text/javascript" src="js/cordova-1.9.0.js"></script>
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript">
    // process the confirmation dialog result
    function onConfirmaSalir(button) {
        if (button == 2) {
            // si
            navigator.app.exitApp();
        }
    }

    // Show a custom confirmation dialog
    //
    function showConfirm() {
        navigator.notification.confirm(
            'Desea abandonar la aplicaci�n?',  // message
            onConfirmaSalir, // callback to invoke with index of button pressed
            'Salir',         // title
            'No,Si'          // buttonLabels
        );
    }

    // Handle the back button
    function onBackKeyDown() {
       showConfirm();
    } 

    // alert dialog dismissed
    function alertConexion() {
        // do something
    }

    function showErrorConexion() {
        navigator.notification.alert(
            'Sin conexion, intente nuevamente',  // message
            alertConexion,         // callback
            'Error',            // title
            'Ok'                  // buttonName
        );
    }

    function checkConnection() {
            var networkState = navigator.network.connection.type;
            if (networkState == Connection.NONE) {
                return false;
            } else {
                return true;
            }
    }

    function cargarTabla(inicio) {
        $.post("http://sitio.com/", 
                { 
                },
                function(datos) {
                    $('#tabla').html('<article>'+datos+'</article>');
                }
        );
    }

     // PhoneGap is ready
    function onDeviceReady() {
        document.addEventListener("backbutton", onBackKeyDown, false);

        if (checkConnection()) {
            cargarTabla(1);
        } else {
            showErrorConexion();
        }
    }

    // phonegap
    function onBodyLoad()
    {
        // Wait for PhoneGap to load
        document.addEventListener("deviceready", onDeviceReady, false);
    } 
</script>
</head>
<body onload="onBodyLoad();">

<header>
        <h1>Prueba</h1>
</header>
<section>
    <article>
        <p>Hola!</p>
    </article>
</section>
<section id="tabla">
    <article>
            <p>Cargando...</p>
    </article>
</section>
</body>
</html> 
```

我生成了一个压缩文件，其中包含：css、ext（包含 .jar codova）、img、config.xml、index.html、plugins.xml。

打包方式：bbwp path_zip -o path_out

生成文件正常，但在运行时不会更改 html 中“tabla”部分的内容。

如何将 jQuery Post 与 PhoneGap 和 webworks 一起使用？相同的代码适用于 Android。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:12:56.100

似乎您可能没有在配置文件中指定该元素来访问外部资源。

在 config.xml 文件中包含以下内容：`<access uri="http://sitio.com" subdomains="true"/>`

有关更多信息，请查看访问元素文档：[https ://developer.blackberry.com/html5/documentation/access_element_834677_11.html](https://developer.blackberry.com/html5/documentation/access_element_834677_11.html)

# windows - 在 Windows MSVC 中使用带有 boost 线程的 qmake 的链接器错误

> ID：11602009
> 
> 赞同：2
> 
> 时间：2012-07-22T16:32:03.783
> 
> 标签：windows, qt, visual-c++, boost-thread, qmake

我在 Windows 上使用带有 boost 库的 QtCreator。现在我坚持将 boost 线程库与我的应用程序链接起来。
在我的`C:\boost_1_47_0\bin.v2\libs\thread\build`目录中，我只看到`msvc-10.0`no`mingw`所以我需要选择`MSVC2010`作为我的构建配置而不是 mingw。

在编译时报告错误：
`LNK1104: cannot open file 'libboost_thread-vc100-mt-gd-1_47.lib'`

我可以`boost_thread-vc100-mt-gd-1_47.lib`在 libs 目录中找到这里但没有（检查*左侧*`libboost_thread-vc100-mt-gd-1_47.lib` *的额外内容）`lib`*

在我的`.pro`

```
win32:INCLUDEPATH += C:\boost\include\boost-1_47
win32:CONFIG(debug): LIBS += C:\boost_1_47_0\bin.v2\libs\thread\build\msvc-10.0\debug\threading-multi\boost_thread-vc100-mt-gd-1_47.lib 
```

# asp.net - asp.net中的分页结果

> ID：11602012
> 
> 赞同：3
> 
> 时间：2012-07-22T16:32:20.633
> 
> 标签：asp.net, asp.net-mvc, asp.net-ajax, paging

我正在尝试在 asp.net 中找到一个解决方案以实现数据分页，因此 1）应用程序不必在每个页面索引更改时连接到 DB，以便检索整个集合或仅检索一组分页结果 2 ) 不想将结果存储在 Viewstate 或 Session 中

对于大型结果集，我正在考虑将键值（ID、行号）存储在结果集（数组、json）中，然后在行绑定上填充其他行信息。

有没有办法在 asp.net 中做到这一点，或者我需要为这种情况考虑 jQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T16:40:38.240

> 1) 应用程序不必在每次页面索引更改时连接到数据库，以检索整个结果集或仅检索一组分页结果

您需要缓存结果。例如：

例子：

### 缓存方法 1

```
 <asp:SqlDataSource runat="server" ID="sdsd"
        SelectCommand="select * from jobs"
        SelectCommandType="Text"
        DataSourceMode="DataSet"
        ConnectionString="<%$ConnectionStrings: PUBSConnectionString %>"
        CacheDuration="30"
        EnableCaching="true"
    >
    </asp:SqlDataSource>
    <asp:DropDownList ID="ddl" runat="server" AutoPostBack="true" DataSourceID="sdsd" DataTextField="job_desc" DataValueField="job_id">
    </asp:DropDownList> 
```

### 缓存方法 2

您始终可以将结果缓存在代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        IEnumerable<employee> res = Enumerable.Empty<employee>();

        if (this.Cache["emp"] == null)
        {
            res = this.GetEmployeesFromDatabase();
            this.Cache["emp"] = res;
        }
        else
        {
            res = this.GetEmployeesFromCache();
        }

        this.grv.DataSource = res;
        this.grv.DataBind();
    }
}

protected IEnumerable<employee> GetEmployeesFromDatabase()
{
    // go to your database to get the objects
    return Enumerable.Empty<employee>();
}

protected IEnumerable<employee> GetEmployeesFromCache()
{
    return this.Cache["emp"] as IEnumerable<employee>;
} 
```

请记住，返回的对象必须是`DataSet`or`DataTable`才能为缓存结果添加排序功能

> 2）不想将结果存储在 Viewstate 或 Session 中

同样，您需要使用缓存

> 有没有办法在 asp.net 中做到这一点，或者我需要为这种情况考虑 jQuery。

我看不出 jQuery（单独）如何帮助您满足您的要求，我的意思是，如果您使用 AJAX 帖子，您会提高当前页面的感知性能，但这无助于您与数据库的连接除非你使用缓存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:40:13.623

我不确定它是否满足您的所有要求，但分页是[PagedDataSource 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pageddatasource.aspx)

封装允许其执行分页的数据绑定控件（例如 DataGrid、GridView、DetailsView 和 FormView）的分页相关属性。这个类不能被继承。

否则，我建议您查看[JqGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:25:54.457

对于分页数据集，您通常有 2 个选项：

*   如果您期望一个小的结果集（即将搜索结果限制为 500 行或更少），那么使用 viewstate 是完全可以接受的。我个人更喜欢避免使用 session 来存储请求级别的数据

    *   如果您期望一个大型结果集，那么您将需要一个分页数据源。您可以编写一个返回分页数据集的存储过程（即传递页面索引/页面大小）或使用任何 ORM（实体框架或 LINQ TO SQL）。使用 take(n) 和 skip(n) 支持分页。

[http://www.mssqltips.com/sqlservertip/1699/sql-server-stored-procedures-to-page-large-tables-or-queries/](http://www.mssqltips.com/sqlservertip/1699/sql-server-stored-procedures-to-page-large-tables-or-queries/)

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

无论您如何呈现数据（jQuery/ajax 或服务器控件），您仍然必须一次性获取整个结果集并将其缓存以供后续请求（json 数组或视图状态），或者您需要支持分页的数据源. 如果您关心性能，那么分页数据源是可行的方法（EF 示例也适用于 Web 表单，只需使用您的事件处理程序而不是 mvc 中的操作方法）。

# zend-framework - 如何用可以退出的东西替换这个 _forward() ？

> ID：11602013
> 
> 赞同：0
> 
> 时间：2012-07-22T16:32:25.377
> 
> 标签：zend-framework

我在我的 zend 框架应用程序中一遍又一遍地使用以下代码。它用于**检查`action()`**文章是否存在。如果没有，用户将看到一条错误消息：

```
$article = ArticleQuery::create()->findOneByUrl($this->_getParam('url', ''));

if (!$article) {
    $this->getResponse()
         ->setRawHeader('HTTP/1.1 404 Not Found');
    return $this->_forward('error', null, null, array(
        'message' => 'Article not found',
    ));
} 
```

我想知道如何将其分解为自己的方法以减少所有*操作*中的代码负载。

我遇到了这样的事情：

```
protected function myAction() {
    $article = $this->getArticleIfExists($this->_getParam('url', ''));
    if ($article == null) {
        return;
    }
}

protected function getArticleIfExists($url) {
    $article = ArticleQuery::create()->findOneByUrl($this->_getParam('url', ''));

    if ($article) {
        return $article;
    } else {
        $this->getResponse()
             ->setRawHeader('HTTP/1.1 404 Not Found');
        $this->_forward('error', null, null, array(
            'message' => 'Article not found',
        ));
        return nulL;
    }
} 
```

我仍然想摆脱中的`if`情况`myAction()`，但`_forward()`不允许退出执行（当然，因为它仍然需要执行其他操作）。

另一种可能性（我已经在其他一些控制器中实现）是这样的：

```
protected function myAction() {
    $article = ArticleQuery::create()->findOneByUrl($this->_getParam('url', ''));

    if (!$article) {
        return $this->notFound('Article does not exist');
    }
}

protected function notFound($message) {
    $this->getResponse()
         ->setRawHeader('HTTP/1.1 404 Not Found');
    return $this->_forward('error', null, null, array(
        'message' => $message,
    ));
} 
```

我们再次`if`在操作中进行了此检查。它已经比以前更好了，但我们还能做得更好吗？

我该如何规避这个？有没有可能在不丢失当前 URL 的情况下做到这一点？我`Redirector`当然可以退出，但是我会丢失当前的 URL ( `/controller/myaction/url/hello -> /error/error/message/Article%20not%20found`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:48:57.687

一种可能的方法是抛出异常。由于[Zend_Controller_Plugin_ErrorHandler](http://framework.zend.com/code/filedetails.php?repname=Zend%20Framework&path=/trunk/library/Zend/Controller/Plugin/ErrorHandler.php)这将自动将您重定向到 ErrorController 而无需执行任何进一步的代码。

如果您不想访问 ErrorController 而只想访问当前控制器的错误操作，您可以简单地在控制器的 init 方法中修改插件：

```
public function init()
{
    $plugin = Zend_Controller_Front::getInstance()->getPlugin('Zend_Controller_Plugin_ErrorHandler');
    $plugin->setErrorHandlerModule('default')
       ->setErrorHandlerController('MyController')
       ->setErrorHandlerAction('error');
} 
```

但是当然你也可以编写自己的 ErrorHandler 插件来进行更细粒度的错误处理。这在[Zend Framework Manual on Plugins中有描述](http://framework.zend.com/manual/en/zend.controller.plugins.html#zend.controller.plugins.standard.errorhandler.fourohfour)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:00:00.620

对于像仅针对用户请求显示“* 不存在”这样简单的事情，我更愿意将用户留在应用程序中，然后用 flashmessenger 通知打他们，然后将他们留在页面上以发出另一个请求（如果合适）：

```
public function indexAction() {

        //get form and pass to view
        $form = new Form();

        $this->view->form = $form;

        try {
            //get form values from request object
            if ($this->getRequest()->isPost()) {
                if ($form->isValid($this->getRequest()->getPost())) {

                    $data = $form->getValues();

                   // Do some stuff
                }
            }
        } catch (Zend_Exception $e) {

            $this->_helper->flashMessenger->addMessage($e->getMessage());//add message to flashmessenger
            $this->_redirect($this->getRequest()->getRequestUri());//perform redirect to originating page so the messenger will flash
        }
    } 
```

当存在错误用户输入的可能性时，这很简单并且效果很好。

# ajax - 为什么我的 Ajax.BeginForm 会在我专门针对要替换的 ID 时重新加载整个页面？

> ID：11602016
> 
> 赞同：3
> 
> 时间：2012-07-22T16:32:35.363
> 
> 标签：ajax, asp.net-mvc-3

提前为这个问题道歉，但尽管我在这里找到了很多建议，但没有一个对我有用。我感觉很疯狂，所以...

我有一个 MVC 3 应用程序，当它第一次加载时，它会为所有用户显示带有模型数据的表。那部分工作正常。我有两个文本框，一个用于帐户 ID，另一个用于用户，允许我重新查询数据库以获取更具体的用户数据。当我使用提交按钮时，我会取回数据，但整个页面会刷新，当我用正确的数据取回表单和表格时，页面的其余部分是白色的。我以前没有任何图形或任何东西。另一个有趣的事情是，如果我再次从白页提交表单，使用任何有效参数，AJAX 都可以工作。我很困惑。

表格如下所示：

```
@using (Ajax.BeginForm("TaskList", "Dispatch", 
       new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "tblBody", 
       InsertionMode = InsertionMode.Replace }, new { id = "frmTaskList" }))
{
    <table id="tblTaskList" class="tblTaskList"> 
        <thead>
            <tr>
                <th>Ticket ID</th>
                <th>Date</th>
                <th>Customer Name</th>
            </tr>
        </thead>
        <tbody id="tblBody" class="tblBody">        
            @{for (var ix = 0; ix < Model.Value.Count - 1; ix++)
            { 
                <tr id="@(Model.Value[ix].TicketId)">
                    <td>@Model.Value[ix].TicketId</td>
                    <td>@Model.Value[ix].Created</td>
                    <td>@Model.Value[ix].ContactName</td>
                </tr>        
            }}
        </tbody>       
    </table>    

    <input type="text" id="hidAccId" name="hidAccId" value="" />
    <input type="text" id="hidUserId" name="hidUserId" value="" />
    <input type="submit" id="btnTaskList" value="Submit" />
} 
```

还有我正在使用的脚本，放在页面顶部：

```
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script> 
```

旁注：我尝试使用 @Url.Content 而不是 src 属性无济于事。我也尝试过使用以下方法，同样没有不同的结果：

```
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript">    </script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:34:57.517

您引用了 jQuery 和 jQuery-ui 两次。这不是必需的。以下应该足够了：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

您显然应该确保 jquery-1.7.2.min.js 存在于 Scripts 文件夹中。开箱即用的 ASP.NET MVC 3 仅与 jQuery 1.5 一起提供。就 Microsoft* 脚本而言，忘记那些，它们不再在 ASP.NET MVC 3 中使用。

此外，您的表单中没有提交按钮。

这个：

```
<input type="button" id="btnTaskList" value="Submit" /> 
```

应该：

```
<input type="submit" id="btnTaskList" value="Submit" /> 
```

如果您希望提交表单。

# asp.net - 一个定时器，多个更新面板

> ID：11602018
> 
> 赞同：0
> 
> 时间：2012-07-22T16:32:39.080
> 
> 标签：asp.net, ajax, timer, updatepanel

必须`updatePanels`喜欢这样：

```
<asp:UpdatePanel ID="UpdatePanel3" runat="server">
        <ContentTemplate>
            <asp:UpdatePanel ID="UpdatePanel4" runat="server">
            </asp:UpdatePanel>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

我想要一个定时器来更新内部`updatePanel`而不更新外部`updatePanel`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:17:00.120

有`UpdatePanel`一个方法叫做`Update()`. 当您的计时器达到您需要满足的任何标准时，您可以调用：

`UpdatePanel4.Update();`

更新内部`UpdatePanel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:36:27.400

我发现:) 我们将外部`updatePanle`属性更改`Updatemod`为`Conditional`.

# android - 如果 C2DM 或 GCM 接收器的 onReceive 函数在注册意图期间失败会发生什么？

> ID：11602020
> 
> 赞同：0
> 
> 时间：2012-07-22T16:32:40.743
> 
> 标签：android, android-c2dm, android-notifications, google-cloud-messaging

如果 C2DM 或 GCM 接收器的 onReceive 函数在注册意图期间由于某种疯狂的原因失败，例如引发异常或手机关机等，我可以指望 Android 重播该注册意图吗？否则，如果该功能意外失败，我无法保证手机将保持注册通知...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:18:16.240

> 我可以指望 Android 重播该注册意图吗？

不，您必须在您的应用程序中处理这种情况。

> 否则，如果该功能意外失败，我无法保证手机将保持注册通知...

只需尝试重新注册。如果注册失败，您将收到通知，而且您将没有注册 ID。

# sql - 下载次数的 SQL 查询

> ID：11602021
> 
> 赞同：1
> 
> 时间：2012-07-22T16:33:04.220
> 
> 标签：sql, count, group-by

我需要一个查询来获取文件的下载次数。表是这样的

```
fid  uid        ip
21    0      111.111.111.11
21    0      222.222.222.22
21    0      111.111.111.11
21    1      333.333.333.33
21    1      111.111.111.11
21    1      444.444.444.44
21    2      555.555.555.55
22    0      111.111.111.11 
```

uid 是用户 id，如果它是 0，则用户是匿名的。查询应计算 fid 为 21 的行数~~，但如果用户是匿名的，则具有不同的 ips 值，如果用户是注册的，则具有不同的用户和 ips 值。（如果用户下载文件，注销，然后以匿名身份再次下载，则查询应将此计为 1 次下载）~~

在这个例子中，查询应该像这样计算

```
fid  uid        ip
21    0      111.111.111.11
21    0      222.222.222.22
21    1      333.333.333.33
21    2      555.555.555.55 
```

结果应该是4。

任何帮助深表感谢。

编辑：我删除了一些描述，因为它令人困惑。感谢所有评论和可能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:55:26.997

这个查询得到你想要的分组，除了我不知道`333.333.333.33`应该返回的业务规则`uid=1`。我选择使用`MAX(ip)`：

```
select distinct t.uid, t.ip
from MyTable t
inner join (
  select uid, max(ip) maxip
  from MyTable
  where fid = 21
  group by uid
) tm on t.uid = tm.uid
and ((t.uid <> 0 and t.ip = tm.maxip) or t.uid = 0)
where t.fid = 21 
```

[SQL 小提琴示例 #1](http://sqlfiddle.com/#!3/0a26a/11)

然后，您可以将其包装在一个计数中，如下所示：

```
select count(*)
from (
  select distinct t.uid, t.ip
  from MyTable t
  inner join (
    select uid, max(ip) maxip
    from MyTable
    where fid = 21
    group by uid
  ) tm on t.uid = tm.uid
  and ((t.uid <> 0 and t.ip = tm.maxip) or t.uid = 0)
  where t.fid = 21
) a 
```

[SQL 小提琴示例 #2](http://sqlfiddle.com/#!3/0a26a/20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:38:31.097

应该是这样的：

```
 SELECT count(distinct ip) FROM table WHERE fid = 21; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:56:28.960

您的解释和您的示例数据不相关，您声明“如果他们已注册，则用户和 ips 的不同值”，但您的示例数据注册用户尽管拥有不同的 IP，但仅显示一次。根据您的示例数据，这将起作用：

```
SELECT  COUNT(DISTINCT CASE WHEN UID = 0 THEN IP ELSE CAST(UID AS VARCHAR) END) AS UniqueDownloads,
        COUNT(*) AS TotalDownloads
FROM    T
WHERE   FID = 21 
```

但是根据您的描述，这将起作用：

```
SELECT  COUNT(*) AS UniqueDownloads,
        SUM(Downloads) AS TotalDownloads
FROM    (   SELECT  UID, IP, COUNT(*) AS Downloads
            FROM    T
            WHERE   FID = 21
            GROUP BY UID, IP
        ) T 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T16:40:11.193

以下查询应该满足您的需要：

```
select fid, count(*) as uipcount, sum(rowcount) as rowcount
from (select fid, userid, ip, count(*) as rowcount
      from t
      where fid = 21
      group by fid, userid, ip
     ) tsum
group by fid 
```

字段 uipcount 是您要查找的内容。作为奖励，它还包括原始数据中的总行数。

顺便说一句，您的条件“如果用户是匿名的，则具有不同的 ips 值，如果用户是注册的，则具有不同的用户和 ips 值”相当于“每个人的用户和 ips 的不同值”。所有匿名用户都具有相同的用户 ID，因此将他们的用户 ID 包含在不同的用户 ID 中并没有什么区别。

# layout - 如何在 BorderContainer 中设置 Dijit 拆分器以一直关闭？

> ID：11602023
> 
> 赞同：0
> 
> 时间：2012-07-22T16:33:12.473
> 
> 标签：layout, dojo, splitter

有谁知道在 BorderContainer 上设置什么属性以允许用户将拆分器一直向左或向右移动以完全隐藏页面的各个部分？

该演示允许您通过向右拖动完全关闭中心面板，但向左拖动时会留下一个间隙：

[https://dojotoolkit.org/documentation/tutorials/1.8/dijit_layout/demo/appLayout.php](https://dojotoolkit.org/documentation/tutorials/1.8/dijit_layout/demo/appLayout.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:02:00.667

**您必须在启用拆分器的data-dojo-props**中设置左侧 ContenPane 的 minSize ！但至少设置为 1 ！将其设置为 0 将不起作用！它应该看起来像这样：**data-dojo-props="minSize:1, splitter: true"** 这是关于我在您的帖子中编辑的链接的必要代码（您的链接已损坏）：

```
<div id="leftCol" class="edgePanel" data-dojo-type="dijit/layout/ContentPane" 
data-dojo-props="minSize:1,region: 'left', splitter: true">Sidebar content (left)</div> 
```

# vbscript - VBS替换和写入

> ID：11602026
> 
> 赞同：2
> 
> 时间：2012-07-22T16:33:35.530
> 
> 标签：vbscript, replace, readline

从那开始，我对 VBS 不是很好，但正在努力学习。现在我在将替换写入文本文件时遇到了一些困难。

我想要做的是搜索文本“VGML”，当找到它时检查同一行是否有“STML”，如果有，这应该替换为“”，以免弄乱文件中的位置。最后，如果发现没有“STML”的“VGML”，则应删除“VGML”。

到目前为止，我在使用 echo 时可以看到代码执行了我想要的操作，但是写入文件主要是让我得到一个空文件，其中代码删除了所有内容。

谁能把我引向正确的方向？

这是代码：

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\Script\RemoveSTML\testFiles\test.txt", ForReading)

strEMTY = "    "
strSTML = "STML"
strVGML = "VGML"

Do Until objFile.AtEndOfStream
   strLine = objFile.ReadLine
   If InStr(strLine,strVGML)>0 Then
      If Instr(strLine,strSTML)>0 Then
         strLine = Replace(strLine, strSTML, strEMTY)
         wscript.Echo strLine
      Else
         strLine = Replace(strLine, strVGML, strEMTY)
         wscript.Echo strLine
      End If
   End If                                             
Loop
objFile.Close
Set objFile = objFSO.OpenTextFile("C:\Script\RemoveSTML\testFiles\test.txt", ForWriting)
objFile.Write strLine
objFile.Close
Wscript.Echo "done" 
```

谢谢你的帮助！为了给我一个正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:41:21.580

在循环中，您读取文件的每一行并将其写入变量`strLine`.
之后，您替换“SMTL”/“VGML”，但在那之后，您对 的内容什么也不做`strLine`- 您只需在下一个循环中用源文件中的下一行替换它。

仅在最后，您写入`strLine`文件一次 - 但在那一刻，`strLine`仅包含源文件的最后一行。

解决方案：您可以写入**内部**的目标文件`Do...Loop`（但我不熟悉 VBScript，所以我不知道是否/如何执行此操作），或者您可以使用第二个字符串变量在`strLine`循环内追加但更换后......像这样：

```
strFinal = strFinal & strLine 
```

最后，您写入`strFinal`文件，而不是`strLine`.

# html - 如何使用 css 3 保持弯曲的边框

> ID：11602027
> 
> 赞同：0
> 
> 时间：2012-07-22T16:33:42.030
> 
> 标签：html, css

边框半径样式不适用于以下代码

**HTML**

```
<ul id="menu" class="menu">
    <li class="active"><a href="#description">Limerick One</a></li>
    <li><a href="#usage">Limerick Two</a></li>
    <li><a href="#download">Limerick Three</a></li>
</ul>​ 
```

**CSS：**

```
.menu { padding: 0; clear: both; border-radius:10px; }
.menu li { display: inline; }

.menu li a {
    padding: 6px; float:left;font-family:Gill, Helvetica, sans-serif;  border-right: 1px solid #000; border-bottom: none;
    text-decoration: none; color: #fff; font-weight: bold;
    background-image: linear-gradient(bottom, rgb(68,68,68) 0%, rgb(34,34,34) 54%, rgb(68,68,68) 100%);
    background-image: -o-linear-gradient(bottom, rgb(68,68,68) 0%, rgb(34,34,34) 54%, rgb(68,68,68) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(68,68,68) 0%, rgb(34,34,34) 54%, rgb(68,68,68) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(68,68,68) 0%, rgb(34,34,34) 54%, rgb(68,68,68) 100%);
    background-image: -ms-linear-gradient(bottom, rgb(68,68,68) 0%, rgb(34,34,34) 54%, rgb(68,68,68) 100%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(68,68,68)),
        color-stop(0.54, rgb(34,34,34)),
        color-stop(1, rgb(68,68,68))
    );
}

.menu li.active a  { 
    background-image: linear-gradient(bottom, rgb(138,25,25) 0%, rgb(186,52,52) 54%, rgb(138,25,25) 100%);
    background-image: -o-linear-gradient(bottom, rgb(138,25,25) 0%, rgb(186,52,52) 54%, rgb(138,25,25) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(138,25,25) 0%, rgb(186,52,52) 54%, rgb(138,25,25) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(138,25,25) 0%, rgb(186,52,52) 54%, rgb(138,25,25) 100%);
    background-image: -ms-linear-gradient(bottom, rgb(138,25,25) 0%, rgb(186,52,52) 54%, rgb(138,25,25) 100%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(138,25,25)),
        color-stop(0.54, rgb(186,52,52)),
        color-stop(1, rgb(138,25,25))
    );
}

.content {
    float: left; clear: both;
    background: #fff; padding: 10px 20px 20px; width: 400px;
} 
```

这是小提琴：http: [//jsfiddle.net/avkKL/](http://jsfiddle.net/avkKL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:41:14.667

您没有为 .menu 设置边框，并且由于内容而没有高度。Radius 设置边界的半径，但必须存在边界才能使其工作。

例如，添加`border:1px solid; height:24px`到 .menu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:44:26.533

[带有 a 的元素的子元素`border-radius`总是会从其父元素中流出](http://jsfiddle.net/sPJC2/)。

您必须`border-radius`直接在要四舍五入的元素上设置：

```
.menu li:first-child a { border-radius: 10px 0 0 10px }
.menu li:last-child a  { border-radius: 0 10px 10px 0 } 
```

这是小提琴：http: [//jsfiddle.net/avkKL/1/](http://jsfiddle.net/avkKL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:40:21.500

```
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px; 
```

添加 webkit 和 moz 前缀。并非所有版本的 Chrome/Firefox/Safari 都尊重非前缀属性。

# ios - 使用 Facebook SDK 3.0（测试版）、Xcode 4.3.2 在我自己的 Facebook 墙上发布图片

> ID：11602028
> 
> 赞同：0
> 
> 时间：2012-07-22T16:33:53.347
> 
> 标签：ios, xcode, facebook, image, post

我正在使用 Facebook SDK 3.0（也使用 Xcode 4.3.2 并且禁用了 ARC），我已经编写了登录代码并在我自己的 Facebook 墙上发布了一条短信（上面的代码），一切运行良好：

```
 - (IBAction)loginFacebook:(id)sender {

    // Initiate a Facebook instance
    Facebook *facebook = [[Facebook alloc] initWithAppId:@"My_App_ID" andDelegate:nil];

    // Set the session information for the Facebook instance
    facebook.accessToken = self.session.accessToken;
    facebook.expirationDate = self.session.expirationDate;

    // Put together the dialog parameters
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"I'm using Emoji-Smileys", @"name",
                                   @"Facebook for iOS", @"caption",
                                   @"Check out the application Emoji-Smileys for iOS to enable emoji keyboard, and make fun messages! There are 460 smileys!", @"description",
                                   @"http://m.facebook.com/apps/hackbookios/", @"link",
                                   @"http://a365.phobos.apple.com/us/r30/Purple/v4/fa/96/4c/fa964c2a-3a48-4f6d-7789-d3105a392a9f/mzl.evuvwyjk.png?downloadKey=1343552764_471c078e9d07fde2b00bd3f1ee1d88a7", @"picture", 
                                   nil];    

    // Invoke the dialog
    [facebook dialog:@"feed" andParams:params andDelegate:self];
        }

        - (FBSession *)createNewSession
        {
    self.session = [[FBSession alloc] init];
    return self.session;
        }

        - (void)sessionStateChanged:(FBSession *)session 
                      state:(FBSessionState) state
                      error:(NSError *)error
        {
    switch (state)         {
        case FBSessionStateOpen:
            if (!error)         {
                // We have a valid session
                NSLog(@"User session found");
                    }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [session closeAndClearTokenInformation];
            self.session = nil;

            [self createNewSession];
            break;
        default:
            break;
            }

    if (error)         {
        UIAlertView *errorAlert = [[UIAlertView alloc] 
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [errorAlert show];
            }    
        }

        - (void) openSession         {

    [self.session openWithCompletionHandler:
     ^(FBSession *session, FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }]; 
        }

        - (BOOL)application:(UIApplication *)application 
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication 
         annotation:(id)annotation 
        {
            return [self.session handleOpenURL:url]; 

        } 
```

好的，现在，我想知道如何发布我在我的应用程序中提供的图像，不需要使用 UIImagePickerViewController，我不想选择图像。我不知道我是否需要 publish_stream、read_stream 或 user_likes 权限或其他东西。

在此先感谢您的帮助。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:21:26.193

您可以使用此代码，这对我有帮助：

```
[FBRequestConnection startForUploadPhoto:myImg.image
                                   completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                       if (!error) {
                                           // is success do something...
                                       } else {
                                          // If some error , do something...
                                       }
                                   }]; 
```

`myImg`是您可以替换的图像：

```
[UIImage imageNamed:@"image.jpg"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:30:09.663

我敢打赌，这些教程会对你有很大帮助：

[http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

[http://www.raywenderlich.com/1578/how-to-get-a-user-profile-with-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1578/how-to-get-a-user-profile-with-facebooks-new-graph-api-from-your-iphone-app)

[http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

并为这个网站添加书签，它有很多很棒的教程！）

# java - 在对象实例化之后初始化的最终属性

> ID：11602031
> 
> 赞同：0
> 
> 时间：2012-07-22T16:34:10.383
> 
> 标签：java

好吧，我有一个最终属性，但我不想在创建对象时初始化它，因为我做不到。所以我试图不在我的构造函数中初始化它，而是使用一个setter，我猜它会像一个只有一次可用的setter，但我有这个错误：

> Test.java:27：错误：无法为最终变量 foo 赋值
> 
> ```
>  this.foo = new String(foo); 
> ```

这是我用来测试的简短代码：

```
class Test {

    private final String foo;

    public static void main(String[] args) {
        Test test = new Test();
        test.setFoo("gygygy");
        System.out.println(test.getFoo());
    }

    public Test() {
        System.out.println("Constructor");
    }

    public String getFoo() {
        return foo;
    }

    public void setFoo(String foo) {
        this.foo = foo;
    }

} 
```

所以我假设构造函数隐式地做了这样的事情 this.foo = new String(); 或 this.foo = null; 而且我认为我无法修改此行为，但是我怎样才能拥有与我想做的等效的行为？我认为是这样的：

```
private String foo;

/* ... */

public void setFoo(String foo) {
    if( !(this.foo.isInitialized()) )
        this.foo = foo;
} 
```

但是 Object.isInitialized() 方法显然不存在，我找不到等效的 x)

所以这里是我的几句话的问题：我该怎么办？我想要一个在对象实例化时*未初始化的**最终属性*。

 *谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:37:25.777

您可以添加一个布尔字段`isInisialized`，但最好的选择是在构造函数中传递值（如果需要，可能使用 Builder 模式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:37:36.153

> 所以这里是我的几句话的问题：我该怎么办？我想要一个在对象实例化时未初始化的最终属性。

你根本做不到。您所能做的就是拥有一个单独的字段，一旦您设置了“真实”字段，您*也可以更新以记录 - 如果您尝试第二次设置它，则抛出异常。*

或者，使您的类型不可变，但给它一个构造类的*新*实例的方法，除了单个新值外，其数据与以前相同，例如

```
public Test withFoo(String newFoo) {
    // Call a private constructor here, passing in the other fields from
    // "this", and newFoo for the value of foo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:39:32.843

规则说最终实例成员变量应该在声明它的地方或在构造函数中初始化。根据这条规则，您的代码不能按原样满足您的要求。您可以使用构建器模式来实现它。请参阅此链接[Builder Pattern in Effective Java](https://stackoverflow.com/questions/5007355/builder-pattern-in-effective-java)*

# php - Doctrine_Query、作为对象的标准和访问者模式。可能的？

> ID：11602035
> 
> 赞同：2
> 
> 时间：2012-07-22T16:34:33.907
> 
> 标签：php, doctrine-1.2, service-layer, visitor-pattern, doctrine-query

最近我一直在处理一堆将 Doctrine 1.2 集成到 Zend Framework 1.11 中的项目，这真的很有趣。

我在服务层中实现的最常见方法之一是根据作为参数传递的一组标准返回我的域模型集合的方法。

我一直在用这样的接口创建它们：

```
//All books
$books = $service->getBooks();

//Books under certain categories and authored which matches the search term 'Hitchens'
$books = $service->getBooks(array(
                     'category' => array(1,2,3,4),
                     'author' => array('like' => '%Hitchens%', 'diedBefore' => Zend_Date::now()),
                     'orderBy' => 'bookTitle', 
                     'limit' => 10
                   )); 
```

实现如下所示：

```
public function getBooks(array $options = null)
{

     $query = Doctrine_Query::create()->from('LibSys_Model_Book as book');

     if($options !== null){
          if(isset($options['author']){
               //Manipulate Doctrine_Query object here....               
          }
          //More 'ifs' and manipulations to the Doctrine_Query object...(additional criterias, orderBy clauses, limits, offsets, etc.)
     }
} 
```

随着我对更多标准的需求增加，实现变得更加混乱。不用说，到处都有大量的代码重用，更新代码是一项如此乏味的任务。

我一直在想，如果我可以将标准作为对象而不是数组段传递，使用访问者模式和这样的东西会更好：

```
$authorCriteria = new LibSys_Criteria_Author();
$authorCriteria->like('%Hitchens%');
$authorCriteria->diedBefore(Zend_Date::now());

$books = $service->getBooks(array(
    $authorCriteria,
    new LibSys_Criteria_Category(array(1,2,3,4))
)); 
```

使用`LibSys_Criteria_Category`并`LibSys_Criteria_Author`实现一个可能如下所示的通用接口：

```
interface LibSys_Doctrine_Criteria_Interface
{
     public function applyCriteria(Doctrine_Query $query);
} 
```

因此，只需遍历提供的一组标准对象并将`Doctrine_Query`对象传递给它们，因为它们轮流操作它以满足需求：

```
public function getBooks(array $criteria = null)
{

    $query = Doctrine_Query::create()->from('LibSys_Model_Book as book');

    if($criteria !== null){
        foreach($criteria as $criterion){

            if($criterion instanceof LibSys_Doctrine_Criteria_Interface){
                $criterion->applyCriteria($query);
            }

        }
    }
} 
```

这种方式不仅使它们更易于使用，而且使服务可扩展，标准对象可重用，并且一切都更易于维护。

但是，为了使这项工作更加稳健，需要能够检查`Doctrine_Query`对象并检查任何现有的连接、条件等。这是因为两个完全不同的标准可能需要相同的一组条件或相同的条件并非不可能连接集。在这种情况下，第二个标准可以简单地重新使用现有的连接和/或相应地进行调整。此外，不难想象一个标准的一组条件与另一个条件相互不兼容的情况，在这种情况下应该保证抛出异常。

所以我的问题是：

有没有办法检查`Doctrine_Query`并获取有关已加入哪些组件或已应用于它的任何条件集的信息？

# c++ - 使用 thunk 从 cdecl 转到 thiscall (Linux x86)

> ID：11602036
> 
> 赞同：1
> 
> 时间：2012-07-22T16:34:41.053
> 
> 标签：c++, gcc, assembly, x86, calling-convention

我一直在尝试使用“thunking”，这样我就可以将成员函数用于需要 C 函数的遗留 API。我正在尝试对此使用类似的解决[方案](http://www.codeproject.com/Articles/16785/Thunking-in-Win32-Simplifying-Callbacks-to-Non-sta)。到目前为止，这是我的 thunk 结构：

```
struct Thunk
{
    byte mov;   // ↓
    uint value; // mov esp, 'value' <-- replace the return address with 'this' (since this thunk was called with 'call', we can replace the 'pushed' return address with 'this')

    byte call;  // ↓
    int offset; // call 'offset' <-- we want to return here for ESP alignment, so we use call instead of 'jmp'

    byte sub;   // ↓
    byte esp;   // ↓
    byte num;   // sub esp, 4 <-- pop the 'this' pointer from the stack

    //perhaps I should use 'ret' here as well/instead?
} __attribute__((packed)); 
```

下面的代码是我的一个测试，它使用了这个 thunk 结构（但它还没有工作）：

```
#include <iostream>
#include <sys/mman.h>
#include <cstdio>

typedef unsigned char byte;
typedef unsigned short ushort;
typedef unsigned int uint;
typedef unsigned long ulong;

#include "thunk.h"

template<typename Target, typename Source>
inline Target brute_cast(const Source s)
{
    static_assert(sizeof(Source) == sizeof(Target));

    union { Target t; Source s; } u;
    u.s = s;
    return u.t;
}

void Callback(void (*cb)(int, int))
{
    std::cout << "Calling...\n";
    cb(34, 71);
    std::cout << "Called!\n";
}

struct Test
{
    int m_x = 15;

    void Hi(int x, int y)
    {
        printf("X: %d | Y: %d | M: %d\n", x, y, m_x);
    }
};

int main(int argc, char * argv[])
{
    std::cout << "Begin Execution...\n";

    Test test;

    Thunk * thunk = static_cast<Thunk*>(mmap(nullptr, sizeof(Thunk),
        PROT_EXEC | PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, 0, 0));

    thunk->mov = 0xBC; // mov esp
    thunk->value = reinterpret_cast<uint>(&test);

    thunk->call = 0xE8; // call
    thunk->offset = brute_cast<uint>(&Test::Hi) - reinterpret_cast<uint>(thunk);
    thunk->offset -= 10; // Adjust the relative call

    thunk->sub = 0x83; // sub
    thunk->esp = 0xEC; // esp
    thunk->num = 0x04; // 'num'

    // Call the function
    Callback(reinterpret_cast<void (*)(int, int)>(thunk));
    std::cout << "End execution\n";
} 
```

如果我使用该代码；`Test::Hi`我在函数中收到分段错误。原因很明显（一旦你分析了 GDB 中的堆栈），但我不知道如何解决这个问题。堆栈未正确对齐。

`x`参数包含垃圾，**但**`y`参数包含指针`this`（参见`Thunk`代码）。这意味着堆栈错位了 8 个字节，但我仍然不知道为什么会这样。谁能说出为什么会这样？`x`并且`y`应该分别包含`34`和`71`。

注意：我知道这并不适用于所有场景（例如 MI 和 VC++ thiscall 约定），但我想看看我是否可以完成这项工作，因为我会从中受益匪浅！

编辑：显然我也知道我可以使用静态函数，但我认为这更像是一个挑战......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:34:01.143

假设您有一个独立的（非成员，或者可能是静态的）`cdecl`函数：

```
void Hi_cdecl(int x, int y)
{
    printf("X: %d | Y: %d | M: %d\n", x, y, m_x);
} 
```

另一个函数这样调用它：

```
push 71
push 36
push (return-address)
call (address-of-hi)
add esp, 8 (stack cleanup) 
```

您想用以下内容替换它：

```
push 71
push 36
push this
push (return-address)
call (address-of-hi)
add esp, 4 (cleanup of this from stack)
add esp, 8 (stack cleanup) 
```

为此，您必须`return-address`从堆栈中读取 ， push `this`，然后将`return-address`. 对于清理，将 4（而不是减去）添加到`esp`.

关于返回地址 - 由于 thunk 必须在被调用者返回后进行一些清理，它必须将原始返回地址存储在某个地方，并将 thunk 的清理部分的返回地址推送。那么，原始返回地址存储在哪里呢？

*   在全局变量中 - 可能是可接受的 hack（因为您可能不需要您的解决方案是可重入的）
*   在堆栈上 - 需要移动整个参数块（使用机器语言等效的`memmove`），其长度几乎是未知的

另请注意，生成的堆栈不是 16 字节对齐的；如果函数使用某些类型（需要 8 字节和 16 字节对齐的类型 - 例如 SSE 的类型；也**可能** `double`），这可能会导致崩溃。

# android - 我的 Scaled ImageView 的尺寸

> ID：11602049
> 
> 赞同：0
> 
> 时间：2012-07-22T16:36:22.563
> 
> 标签：android, imageview, dimension

如何确定 Scaled ImageView 的尺寸？我尝试使用 getWidth() & getHeight 它总是返回 0。我的 ImageView 的 xml 布局如下：

```
<ImageView
            android:id="@+id/imgView"
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:scaleType="fitXY"
            android:src="@drawable/my_image" /> 
```

请提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:52:35.033

您可能过早地调用 getWidth() 方法。在视图在屏幕上呈现之前，您的 ImageView 的宽度和高度将不可用。尝试在 onWindowFocusChanged 中获取它们：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    int width = iv.getWidth();
    int height = iv.getHeight();

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:58:03.753

您不会在 onCreate 中获得这些维度。视图尚未测量，层次结构尚未设置。这些将起作用，但您需要在应用程序绘制屏幕后的某个地方使用它们，或者另一种方法是设置 ViewTreeObserver 以在设置布局时通知您。[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)

这是它的完成方式：

1.  调用`getVieeTreeObserver()`以获取对活动中 viewTreeObserver 的引用。

然后添加一个 onGlobalLayoutListener：

```
 observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener()
        {
            @Override
            public void onGlobalLayout()
            {   
                ViewTreeObserver obs = MyActivity.this.getViewTreeObserver();
                obs.removeGlobalOnLayoutListener(this);
            }
        }); 
```

在这个`onGlobalLayout`方法中，你可以使用你的视图并获取它的宽度和高度，然后对它们做任何事情。

# java - java程序中的xml文件没有引用我的按钮

> ID：11602051
> 
> 赞同：1
> 
> 时间：2012-07-22T16:36:29.553
> 
> 标签：java, android, xml

所以我制作了一个 xml 文件来尝试访问一个简单的按钮 activity_first.xml 文件是：

```
package com.example.name.calling.proj;

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="This is my first project. This is a test."
    android:textSize="20dp" />

<Button
    android:id="@+id/bFirst"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:text="First Button" />

<Button
    android:id="@+id/bSecond"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:text="Second Button" />

<Button
    android:id="@+id/bThird"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:text="Third Button" />

<Button
    android:id="@+id/bFourth"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:text="Fourth Button" />

</LinearLayout> 
```

然后我制作了Java程序，（只是开始部分）是；

```
package com.example.name.calling.proj;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

int counter; 
Button one, two, three, four;
TextView display;   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first);
    Button one = (Button) findViewById(R.id.bFirst)
    display = (TextView) findViewById(R.id.tvDisplay); 
```

然后它有几个错误说：

```
activity_first cannot be resolved or is not a field. 
```

```
bFirst cannot be resolved or is not a field. 
```

```
tvDisplay cannot be resolved or is not a field. 
```

所以，我在 xml 文件中设置的 ID 没有在 java 程序中被引用，我不知道为什么。我在整个互联网上进行了搜索，从 YouTube 到这个网站，不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:45:10.427

您正在导入 android.R 而不是您自己的 R。只需删除该`import android.R;`行，错误就会消失。另外，不要在布局 xml 的顶部声明包。进行这些更改后，您可能需要“清理”您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:00:49.123

你必须：

1.  `package com.example.name.calling.proj;`从布局文件中删除
2.  `import android.R;`从您的活动中删除
3.  命名您的布局文件`activity_first.xml`，而不是`main.xml`
4.  替换`Button one = (Button) findViewById(R.id.bFirst)`为，`one = (Button) findViewById(R.id.bFirst)`因为您将按钮一声明为 Activity 类的属性
5.  清理你的项目

# css - IE 不能正确显示 3 个浮动部分

> ID：11602054
> 
> 赞同：1
> 
> 时间：2012-07-22T16:37:04.700
> 
> 标签：css, html

在 Firefox/Chrome/Opera/Etc 上，这个 CSS 效果很好，3 列并排。在 IE 上，列是垂直的，不是并排的。

对此有什么简单的修复/破解方法？谢谢！

```
<style>
.col1 {
    float: left;
    width: 270px;
    position: relative;
    padding: 15px;
    margin-bottom: 10px;
}

.col2 {
    float: left;
    width: 270px;
    position: relative;
    padding: 15px;
    margin-bottom: 10px;
    margin-left: 10px;
    margin-right: 10px;
}

.col3 {
    float: left;
    width: 270px;
    position: relative;
    padding: 15px;
    margin-bottom: 10px;
}
</style> 
```

的HTML：

```
 <body>
    <section class="col1">
        <p>Lorem Ipsum is simply dummy text of 
        the printing and typesetting industry.</p>
    </section>

    <section class="col2">
        <p>Lorem Ipsum is simply dummy text of 
        the printing and typesetting industry.</p>
    </section>

    <section class="col3">
        <p>Lorem Ipsum is simply dummy text of 
        the printing and typesetting industry.</p>
    </section>
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:45:43.840

您可以在 head 部分中使用此脚本：

```
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

IE 8< 无法识别该`section`元素。问题是浏览器对它们根本无法识别的标签进行了特殊处理。诸如应用样式和能够包含子项之类的基本内容将不起作用。

# database - 时序数据模型

> ID：11602055
> 
> 赞同：0
> 
> 时间：2012-07-22T16:37:12.750
> 
> 标签：database, design-patterns, database-design, datamodel

在 twitter 网站上，如果您单击屏幕顶部的连接选项卡 ( [https://twitter.com/i/connect](https://twitter.com/i/connect) )，您会看到按时间顺序排列的漂亮推文以及新人关注您的时间等。

我很好奇这背后的数据模型可能是什么，以允许他们构建这样的 UI。我正在尝试自己重新创建它，并且想知道是否有人知道它可能是什么？例如，建模人与人之间的联系似乎很简单，您可以使用某种类型的图表，但是当您添加某人或未关注您的人时能够跟踪日期似乎并不简单。有任何想法吗？

# java - 比较字符串方法

> ID：11602057
> 
> 赞同：0
> 
> 时间：2012-07-22T16:37:30.370
> 
> 标签：java, string

我想比较字符串，但以下代码不起作用。我猜这是因为不兼容，还有其他方法吗？谢谢！

```
 public class test
 {
    public static void main(String[] args)
    {
       String str1 = "abc def ghi abc ded abc ghi";
       String str2 = "ghi";
       int count = 0;

         String array[] = str1.split("\t");
         for(int i = 0; i < array.length; i++)
         {
           if(array[i].equals(str2))
           {
             count++;
             System.out.println(array[i]);  
             System.out.println(count);     
           } 

       }//for

      }//main

     }//test 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:39:28.513

看起来您正在`"\t"`（制表符）上拆分，但您的字符串是`" "`（空格）分隔的。尝试`array[] = str1.split(" ");`使用字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:56:38.897

如果您不想使用拆分，也可以使用 StringTokenizer 类。[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)我觉得这个最有用。您可以像这样为每个字符串创建一个 StringTokenizer。

`StringTokenizer st1 = new StringTokenizer(str1," ");`

str1 后面的“”表示要解析的内容。所以如果你想用逗号、破折号、数字、字母等来解析，只要把它放在那里！

然后根据它找到的令牌数量创建一个数组，如下所示：

```
String[] array1 = new String[st1.countTokens()]; 
```

像这样填充数组：

```
for(int i=0;i<st1.countTokens();i++)
{  
    array1[i]=st1.nextToken(); 
} 
```

您可以用 str2 类似地执行此操作，并以这种方式进行比较！这只是按照您的要求执行此操作的另一种方法。否则，将“/t”更改为“”将与其他答案中所述的拆分一起使用。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:40:49.940

**不要使用** `"\t"`而是使用`" "` **，它可以工作**......

`"\t"`**仅当您已使用而不是空间**时才会有用。`"tab"`

 **现在试试这个..

```
public class T
{
   public static void main(String[] args)
   {
      String str1 = "abc def ghi abc ded abc ghi";
      String str2 = "ghi";
      int count = 0;

        String array[] = str1.split(" ");
        for(int i = 0; i < array.length; i++)
        {
          if(array[i].equals(str2))
          {
            count++;
            System.out.println(array[i]);  
            System.out.println(count);     
          } 

      }//for

     }//main

    }//test 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T16:42:44.010

String 有 contains 方法，它有助于找出项目的出现。在你的情况下 str1.contains(str2)**

# php - 在变量中设置函数

> ID：11602060
> 
> 赞同：0
> 
> 时间：2012-07-22T16:38:18.887
> 
> 标签：php

今天在看某人的代码时，我看到了这个：

```
public $setCookieFunction = 'setcookie';

$setcookie = $this->setCookieFunction; 
```

任何人都知道这是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:42:58.267

它很可能像这样调用，具有与以下相同的参数[`setcookie()`](http://php.net/setcookie)：

```
$setcookie( string $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]] ); 
```

或者：

```
$this->$setCookieFunction( string $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]] ); 
```

这里的好处是您可以更改`$this->setcookie`为您想要的任何函数名称，并且该函数将在整个类中被调用。

# iphone - 如何在方法中暂停执行，直到用户发送“退出时结束”（按下键盘上的“下一步”按钮？

> ID：11602065
> 
> 赞同：0
> 
> 时间：2012-07-22T16:39:21.080
> 
> 标签：iphone, objective-c, ios

这就是我所拥有的：

```
while(wordList){                  //wordlist is instance of NSArray containing NSStrings
    word.text = [wordList objectAtIndex:x]; //word is instance of UILabel

    //LOOKING TO PLACE WAIT CODE HERE TO WAIT FOR "DID END ON EXIT"

    input = inputBox.text; //input is instance of UITextField

    [self compare:input andb:word.text]; //compare is an instance method to compare the two strings
    x++;
} 
```

我是初学者，如果有人能帮助我，那就太好了。

最好的... SL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:43:13.560

这是你想要的？：

```
[yourTextField addTarget:self 
                action:@selector(yourMethod:)
                forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

**编辑**：

为什么不直接中断while循环并在用户点击next时调用一个单独的方法呢？无需暂停并触发其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:21:23.033

你问的方法是行不通的。如果您的应用程序要在方法中间暂停执行，什么会导致它取消暂停？

用户不会在循环中间输入文本——这必须在循环开始执行之前已经完成。触发包含@Imirak 建议的循环的方法，或者从其他一些用户交互，例如按下按钮。这样您就知道用户已经输入了文本，并且您编写的代码应该可以按预期工作。

不过请注意：您显示的代码不会检查您的`compare:andb:`方法的返回值。您还没有真正提供足够的信息来说明您希望该方法做什么来确定这是否有意义。

`wordList`此外，您的循环控制逻辑不正确 - 正如所写的那样，它要么是一个无限循环，要么永远不会进入，具体取决于`nil`. 考虑使用快速枚举语法而不是编写`while`循环，例如：

```
for (UILabel *currLabel in wordList)
{
    // It appears as though this may be the comparison you want to do
    // but there's not enough context in your question to be sure.
    //
    if ([inputBox.text isEqualToString:currLabel.text])
    {
        // Do something here. Again, it's not clear what you're trying to do.   
    }
} 
```

# java - UPNP/DLNA 控制点

> ID：11602069
> 
> 赞同：2
> 
> 时间：2012-07-22T16:39:32.733
> 
> 标签：java, android, upnp, dlna

我正在开发一个 android UPnP/DLNA 应用程序。我有一个控制点，可以在其中将文件从媒体服务器流式传输到渲染器。我可以在播放过程中暂停/播放和停止文件，但我似乎无法弄清楚如何将搜索栏集成到控制点以显示播放文件的进度并能够与搜索栏进行交互。我正在使用 Cling Java 库来创建应用程序。如果有人有任何可以帮助我的例子，我将不胜感激。

谢谢

我尝试实现 SubscriptionCallback 示例并订阅 LastChange

```
SubscriptionCallback callback = new SubscriptionCallback(service, 600) { // Timeout in seconds

                 public void established(GENASubscription sub) {
                     System.out.println("Established: " + sub.getSubscriptionId());

                 }
                 @Override
                 public void failed(GENASubscription sub, UpnpResponse response, Exception ex) {
                     System.err.println(
                         createDefaultFailureMessage(response, ex)
                     );
                 }
                 @Override
                 public void ended(GENASubscription sub, CancelReason reason, UpnpResponse response) {
                     // Reason should be null, or it didn't end regularly
                 }

                 public void eventReceived(GENASubscription sub) {
                     System.out.println("Event: " + sub.getCurrentSequence().getValue());

                               try {
                                   lastChange = new LastChange(
                                           new AVTransportLastChangeParser(),
                                           sub.getCurrentValues().get("LastChange").toString()
                                   );

                               } catch (Exception ex) {
                                   log.warning("Error parsing LastChange event content: " + ex);
                                   return;
                               }

                     Map<String, StateVariableValue> values = sub.getCurrentValues();
                     StateVariableValue status = values.get("Status");
                     System.out.println("Status is: " + status.toString());
                 }

                 public void eventsMissed(GENASubscription sub, int numberOfMissedEvents) {
                     System.out.println("Missed events: " + numberOfMissedEvents);
                 }
                @Override
                protected void failed(GENASubscription arg0,
                        UpnpResponse arg1, Exception arg2, String arg3) {

                }
            };

            upnpService.getControlPoint().execute(callback); 
```

然后我尝试获取当前播放曲目的持续时间：

```
System.out.println("Duration: "+lastChange.getEventedValue(0, AVTransportVariable.CurrentTrackDuration.class).getValue()); 
```

但这会返回 NullPointerException。

有任何想法吗？？？？？？？

****** *** ** *** ** *** ** ******更新****** ** *** ** *** ** *** *****

 **我一直在尝试实现 Seek() 但没有成功。

我有我的搜索栏和侦听器，但是当我将搜索栏拖到新位置时它一直失败。

```
seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
{
        @Override
        public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
        {
            Log.i("SEEKTIME", "time:" + arg1);
            upnpService.getControlPoint().execute(new Seek(service, SeekMode.REL_TIME, arg0.toString())
            {
                @Override
                public void success(ActionInvocation invocation)
                {
                    //super.success(invocation);
                    Log.i("SEEKSUCCESS", "success seek");
                }
                @Override
                public void failure(ActionInvocation arg0, UpnpResponse arg1, String arg2)
                {
                    Log.i("SEEKFAIL", "fail seek");
                }
            });
        } 
```

任何建议为什么这会失败

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T21:06:17.313

您必须轮询渲染器以获取此类信息（请参阅[AVTransport 规范第 2.3.1 章](http://upnp.org/resources/upnpresources.zip)）。该规范鼓励每秒轮询一次，但您可以轻松地阻塞一个真正的硬件渲染器（DLNA 在 a** 中仍然是一种时尚的痛苦，而不是设计的重要部分）。我们既定的做法是`GetPositionInfo()`每 2-3 秒发送一次请求，并将返回`RelativeTimePosition`值仅视为对本地运行计时器的调整。对于搜索栏大小，您还需要当前媒体的总长度。理想情况下，当您订阅`AVTransport.LastChange`. 我不具体了解 Cling，但快速浏览一下在`controlpoint.SubscriptionCallback`. 不幸的是，对于真实的设备，`LastChange`通常不会告诉你太多事情。这些值要么根本不存在，要么具有恒定的惰性值。因此，您将需要`GetMediaInfo()`再次轮询并使用`MediaDuration`值。

至于交互，`Seek()`是你的朋友，理想情况下，参数`Unit = REL_TIME`和`Target`= 你想要的时间偏移。请注意，现实世界的渲染器可能不支持这种搜索单元（模式）。也许它只支持 TRACK_NR 在这种情况下，搜索栏对您来说基本上是只读的。同样，Cling 应该能够告诉您`A_ARG_TYPE_SeekMode`特定渲染器的允许值。**

# c++ - Qt 事件重新获得焦点 MainWindow

> ID：11602070
> 
> 赞同：0
> 
> 时间：2012-07-22T16:39:50.847
> 
> 标签：c++, qt, qt-creator

当我的主窗口重新获得焦点时（当我关闭子窗口时），我需要处理一些事情。

但我没有找到如何做到这一点。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:05:43.987

您可以重新实现[`changeEvent()`](http://qt-project.org/doc/qt-4.8/qwidget.html#changeEvent)主窗口或为其安装[事件过滤器](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)，并观察`ActivationChange`事件。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中跨视图共享帮助程序功能

> ID：11602071
> 
> 赞同：1
> 
> 时间：2012-07-22T16:39:53.513
> 
> 标签：asp.net-mvc-3

我有一个需要在多个视图中使用的 Helper 方法。我尝试使用以下信息：[http](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx) ://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx 。我在 /App_Code/Helpers.cshtml 中定义了这个 Helper 方法。我的观点位于

```
/resources/_Layout.cshtml
/Views/Index.cshtml
/Views/Home/Index.cshtml 
```

如果我在 _Layout.cshtml 中引用我的 Helper 函数，一切正常。但是，如果我在其他视图中引用我的 Helper 函数，则会出现运行时错误。运行时错误说：

CS0103：当前上下文中不存在名称“MyFunction”

我的 Helper 方法如下所示：

```
/App_Code/Helpers.cshtml
------------------------
@helper MakeUrlRelative(string url)
{
    @MyNamespace.MyClass.MakeUrlRelative(HttpContext.Current.Request, url)
} 
```

当我在 /Views/Index.cshtml 中引用它时，我会这样使用它：

```
<link rel="stylesheet" href="@MakeUrlRelative("/resources/css/app.css")" /> 
```

当我在 /Views/Home/Index.cshtml 中引用它时

```
<a href="@MakeUrlRelative("/home/page2")">click me</a> 
```

如您所见，我以相同的方式引用 MakeUrlRelative 方法。就像无法从 /Views/Home/Index.cshtml 访问 Helpers.cshtml 文件一样。什么会导致这个？

# c - 将文本中的空格限制为一个 - c

> ID：11602072
> 
> 赞同：0
> 
> 时间：2012-07-22T16:40:06.790
> 
> 标签：c, getchar

我正在阅读 K&R，问题是：编写一个程序以将其输入复制到其输出，将一个或多个空格的每个字符串替换为一个空格。在我的脑海中，我想我知道我需要做什么，设置一个布尔值来知道我何时在空间中。我已经尝试过了，但没有成功。我找到了这段代码并且它有效，我正在努力弄清楚是什么阻止了空间被写入。我想我可能有它，但我需要澄清。

```
#include <stdio.h>

int main(void)
{
  int c;
  int inspace;

  inspace = 0;
  while((c = getchar()) != EOF)
  {
    if(c == ' ')
    {
      if(inspace == 0)
      {
        inspace = 1;
        putchar(c);
      }
    }

    /* We haven't met 'else' yet, so we have to be a little clumsy */
    if(c != ' ')
    {
      inspace = 0;
      putchar(c);
    }
  }

  return 0;
} 
```

我创建了一个文本文件来处理，文本内容如下：

```
so this    is where    you have been 
```

在 'this' 上的 's' 之后，状态变为 1，因为我们在一个空间中。该空间被写入并读取下一个空间。所以现在我们输入：

```
while((c = getchar()) != EOF)
      {
        if(c == ' ')
        {
          if(inspace == 0)
          {
            inspace = 1;
            putchar(c);
          } 
```

但是 inspace 不是 0，而是 1。那么会发生什么？代码是否跳过返回 0;，不写任何东西，只是继续 while 循环？返回0；在循环之外，但这是我可以看到没有返回值的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:48:20.977

在此刻：

```
if(c == ' ')
{
   if(inspace == 0) // <-- here 
```

如果 inspace 等于 1，则不会执行 if 体，会跳转到：

```
if(c != ' ') { 
```

并且只要上面的 c == ' ' 为假，那么它就会跳过 if 正文并跳转到：

```
while((c = getchar()) != EOF) { 
```

这将一直持续到文件结束或`(c != ' ')`评估为真。当 c 是非空格时：

```
 if(c != ' ')
 {
   inspace = 0;
   putchar(c); 
```

inspace 归零，并打印字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:45:59.657

是的，在您提到的情况下，它不写任何内容并在 while 循环中继续并获取下一个字符。如果下一个字符又是空格，那么它会做同样的事情，即不打印就进入下一个迭代。每当它找到第一个非空格时，它会将 inspace 设置为 0 并开始打印。

当 getchar 获取 EOF 时，while 循环将终止。然后程序将返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:49:06.063

如果 if 语句中的条件不成立，则不执行以下表达式。这意味着相应括号内的所有内容都将被跳过，并且在右括号“之后”继续执行。

由于下面的 if 语句也是错误的，所以在 for 循环的这个迭代中什么也不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:00:16.010

当 inspace 为 1 且 c 为 ' ' 时，表达式：

```
inspace == 0 
```

评估为 0 和代码

```
inspace = 1;
putchar(c); 
```

不会被执行。

如果可以，程序将继续执行 while 循环的下一次迭代，但在 while 循环结束之前它不会返回 0。

您可以将 while 循环简化为以下代码：

```
while((c = getchar()) != EOF)
{
  if(c == ' ')
  {
    if(inspace == 0)
    {
      inspace = 1;
      putchar(c);
    }
  } else
  {
    inspace = 0;
    putchar(c);
  }
} 
```

# java - Hadoop：作业在较小的数据集上运行良好，但在大型数据集上失败

> ID：11602074
> 
> 赞同：8
> 
> 时间：2012-07-22T16:40:12.390
> 
> 标签：java, hadoop, mapreduce, hadoop-streaming

我有以下情况

我有 3 台机器集群，配置如下。

`Master`

```
Usage of /:   91.4% of 74.41GB 
MemTotal:       16557308 kB
MemFree:          723736 kB 
```

`Slave 01`

```
Usage of /:   52.9% of 29.76GB
MemTotal:       16466220 kB 
MemFree:         5320860 kB 
```

`Slave 02`

```
Usage of /:   19.0% of 19.84GB
MemTotal:       16466220 kB
MemFree:         6173564 kB 
```

**hadoop/conf/core-site.xml**

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
<property>
  <name>hadoop.tmp.dir</name>
  <value>/work/app/hadoop/tmp</value>
  <description>A base for other temporary directories.</description>
</property>

<property>
  <name>fs.default.name</name>
  <value>hdfs://master:54310</value>
  <description>The name of the default file system.  A URI whose
  scheme and authority determine the FileSystem implementation.  The
  uri's scheme determines the config property (fs.SCHEME.impl) naming
  the FileSystem implementation class.  The uri's authority is used to
  determine the host, port, etc. for a filesystem.</description>
</property>
<property>
  <name>dfs.datanode.max.xcievers</name>
  <value>4096</value>
</property>
</configuration> 
```

**hadoop/conf/mapred-site.xml**

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
<property>
  <name>mapred.job.tracker</name>
  <value>master:54311</value>
  <description>The host and port that the MapReduce job tracker runs
  at.  If "local", then jobs are run in-process as a single map
  and reduce task.
  </description>
</property>

<property>
  <name>mapred.reduce.tasks</name>
  <value>1</value>
</property>

<property>
  <name>mapred.map.tasks</name>
  <value>100</value>
</property>

<property>
  <name>mapred.task.timeout</name>
  <value>0</value>
</property>

<property>
  <name>mapred.child.java.opts</name>
  <value>-Xmx512m</value>
</property>
</configuration> 
```

**hadoop/conf/hdfs-site.xml**

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
<property>
  <name>dfs.replication</name>
  <value>3</value>
  <description>Default block replication.
  The actual number of replications can be specified when the file is created.
  The default is used if replication is not specified in create time.
  </description>
</property>
<property>
  <name>dfs.datanode.socket.write.timeout</name>
  <value>0</value>
</property>
</configuration> 
```

*   我有超过 200 万个 XML 文档（每个文档大小 ~ 400 KB）
*   `map`任务打开这些xml中的每一个并将它们作为`JSON`
*   `reduce`任务将这些中的每一个都`JSON`作为字符串，应用转换并发出它
*   不。任务- `map`100
*   不。任务- `reduce`01
*   整个工作运行良好时`number of documents = 10,000`
*   什么时候`number of documents = 278262`，作业失败，我看到以下各种问题

**在网页界面上**

*在 slave-01、slave-02 上*

```
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 255.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258) 
```

*在主人*

```
java.lang.RuntimeException: java.io.IOException: Spill failed
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:325)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:545)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:132)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:36)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:261)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:255)
Caused by: java.io.IOException: Spill failed
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1029)
    at org.apache.hadoop.mapred.MapTask$OldOutputCollector.collect(MapTask.java:592)
    at org.apache.hadoop.streaming.PipeMapRed$MROutputThread.run(PipeMapRed.java:381)
Caused by: org.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find any valid local directory for output/spill1.out
    at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:381)
    at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:146)
    at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:127)
    at org.apache.hadoop.mapred.MapOutputFile.getSpillFileForWrite(MapOutputFile.java:121)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1392)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.access$1800(MapTask.java:853)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer$SpillThread.run(MapTask.java:1344) 
```

* * *

```
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Creation of /work/app/hadoop/tmp/mapred/local/userlogs/job_201207220051_0001/attempt_201207220051_0001_m_000004_2 failed.
    at org.apache.hadoop.mapred.TaskLog.createTaskAttemptLogDir(TaskLog.java:102)
    at org.apache.hadoop.mapred.DefaultTaskController.createLogDir(DefaultTaskController.java:71)
    at org.apache.hadoop.mapred.TaskRunner.prepareLogFiles(TaskRunner.java:316)
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:228)

-------
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Creation of /work/app/hadoop/tmp/mapred/local/userlogs/job_201207220051_0001/attempt_201207220051_0001_m_000004_2.cleanup failed.
    at org.apache.hadoop.mapred.TaskLog.createTaskAttemptLogDir(TaskLog.java:102)
    at org.apache.hadoop.mapred.DefaultTaskController.createLogDir(DefaultTaskController.java:71)
    at org.apache.hadoop.mapred.TaskRunner.prepareLogFiles(TaskRunner.java:316)
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:228) 
```

当我去检查登录时`slaves`，这就是我发现的`hadoop-hduser-datanode-hadoop-01.log`

```
2012-07-22 09:26:52,795 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: Receiving block blk_-5384386931827098009_1010 src: /10.0.0.81:51402 dest: /10.0.0.82:50010
2012-07-22 09:26:52,800 WARN org.apache.hadoop.hdfs.server.datanode.DataNode: IOException in BlockReceiver constructor. Cause is 
2012-07-22 09:26:52,800 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: writeBlock blk_-5384386931827098009_1010 received exception java.io.IOException: Unexpected problem in creating temporary file for blk_-5384386931827098009_1010\.  File /work/app/hadoop/tmp/dfs/data/tmp/blk_-5384386931827098009 should not be present, but is.
2012-07-22 09:26:52,800 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: DatanodeRegistration(10.0.0.82:50010, storageID=DS-735951984-127.0.1.1-50010-1342943517618, infoPort=50075, ipcPort=50020):DataXceiver
java.io.IOException: Unexpected problem in creating temporary file for blk_-5384386931827098009_1010\.  File /work/app/hadoop/tmp/dfs/data/tmp/blk_-5384386931827098009 should not be present, but is.
        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSVolume.createTmpFile(FSDataset.java:426)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSVolume.createTmpFile(FSDataset.java:404)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset.createTmpFile(FSDataset.java:1249)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset.writeToBlock(FSDataset.java:1138)
        at org.apache.hadoop.hdfs.server.datanode.BlockReceiver.<init>(BlockReceiver.java:99)
        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.writeBlock(DataXceiver.java:299)
        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.run(DataXceiver.java:107)
        at java.lang.Thread.run(Thread.java:662) 
```

**请帮助我了解我需要做什么才能解决此问题？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T01:54:57.297

由于您有多个 reducer，因此您的映射器会将输出写入从属设备上的本地磁盘（而不是在 HDFS 中）。更准确地说，映射器实际上不会立即写入本地磁盘。相反，它们会在内存中缓冲输出，直到达到阈值（请参阅“io.sort.mb”配置设置）。这个过程称为溢出。我认为问题在于，当 Hadoop 试图溢出到磁盘时，您的从属服务器没有足够的磁盘空间来保存映射器生成的所有数据。

您提到每个映射器都会生成一个 json 字符串。假设每个文档约为 100KB（可能甚至比这更大），它将达到 278,262 x 100KB = ~28GB，并且您的两个从属服务器每个都有大约 15GB 的可用空间。

我认为最简单的方法是使用以下两个配置设置压缩映射器的即时输出：

```
<property>
  <name> mapreduce.map.output.compress</name> 
  <value>true</value>
</property>
<property>
  <name>mapreduce.map.output.compress.codec</name>
  <value>org.apache.hadoop.io.compress.GzipCodec</value>
</property> 
```

由于您的数据都是 JSON/文本数据，我认为您将受益于 Hadoop 支持的任何压缩算法。

仅供参考，如果您的文档大小超过 200 万，您应该考虑为您的主文件添加更多内存。根据经验，每个文件/目录/块占用大约 150 个字节（或每 100 万个文件 300MB）。然而，实际上，我会为每 100 万个文件保留 1GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:12:47.513

我遇到了同样的问题（在 Mac OS X 上）并通过在 mapred-site.xml 中设置以下值来解决它

```
<name>mapred.child.ulimit</name>
<value>unlimited</value> 
```

然后我停止了 hadoop 服务`bin/stop-all.sh`，删除了 /usr/local/tmp/ 文件夹，格式化了 namenode`bin/hadoop namenode -format`并启动了 hadoop 服务`bin/start-all.sh`

# node.js - node.js 中带有 require 的命名空间

> ID：11602076
> 
> 赞同：8
> 
> 时间：2012-07-22T16:40:15.533
> 
> 标签：node.js, require, vows

我正在通过个人项目玩耍并学习誓言。这是一个小型客户端库，在 vows 中完成了测试。因此，我必须构建和测试这样编写的文件：

```
(function(exports) { 
    var module = export.module = { "version":"0.0.1" }; 
    //more stuff
})(this); 
```

在我的测试中（基于[science.js](https://github.com/jasondavies/science.js/)、d3 等）需要这样的模块：

```
require("../module"); 
```

尝试运行测试时，我继续收到“模块未定义错误”，所以我去了一个 repl 并运行：

```
require("../module") 
```

它返回：

```
{ module: { version: "0.0.1" } } 
```

我意识到我可以做类似的事情：

```
var module = require("../module").module; 
```

但感觉我这样做是在制造一个问题，特别是因为我基于这个项目的库是以我描述的格式来做的。

我希望我的项目的行为类似于我所基于的项目，其中：

```
require("../module"); 
```

在此命名空间中创建一个变量：

```
module.version; //is valid. 
```

我已经在各种库中看到了这一点，并且我正在遵循 T 的格式和思考过程，但我相信我可能会遗漏一些我不知道的 require 行为。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T17:04:42.673

以这种方式创建它没有问题。模块定义了它们在`module.exports`对象中返回的内容。顺便说一句，您实际上并不需要自执行函数 (SEF)，没有像浏览器中那样的全局泄漏:-)

## 例子

模块1.js：

```
module.exports = {
    module: { 'version': '0.1.1' }
}; 
```

主.js：

```
var module1 = require( './module1.js' );
// module1 has what is exported in module1.js 
```

* * *

一旦您了解了它的工作原理，您可以轻松地立即导出版本号，如果您愿意：

模块1.js：

```
module.exports = '0.1.1'; 
```

主.js：

```
var module1 = require( './module1.js' );
console.log( module1 === '0.1.1' ); // true 
```

* * *

或者如果你想要一些逻辑，你可以`module1.js`像这样轻松地扩展你的文件：

```
module.exports = ( function() {
    // some code
    return version;
} () ); // note the self executing part :-)
// since it's self executed, the exported part
// is what's returned in the SEF 
```

* * *

或者，正如许多模块所做的那样，如果您想导出一些实用功能（并保持其他“私有”），您可以这样做：

```
module.exports = {
    func1: function() {
        return someFunc();
    },

    func2: function() {},

    prop: '1.0.0'
};

// This function is local to this file, it's not exported
function someFunc() {
} 
```

所以，在 main.js 中：

```
var module1 = require( './module1.js' );
module1.func1(); // works
module1.func2(); // works
module1.prop; // "1.0.0"
module1.someFunc(); // Reference error, the function doesn't exist 
```

## 你的特殊情况

关于您的特殊情况，我不建议您像他们那样做。

如果你看这里：[https ://github.com/jasondavies/science.js/blob/master/science.v1.js](https://github.com/jasondavies/science.js/blob/master/science.v1.js)

您会看到他们没有使用`var`关键字。所以，他们正在创建一个**全局变量**。

这就是为什么一旦他们`require`定义了全局变量的模块就可以访问它的原因。

顺便说一句，`exports`在他们的情况下，这个论点是没有用的。它甚至具有误导性，因为它实际上是`global`对象（相当于`window`在浏览器中），而不是`module.exports`对象（`this`在函数中是全局对象，`undefined`如果启用了严格模式则为）。

## 结论

不要像他们那样做，这是个坏主意。全局变量是一个坏主意，最好使用节点的理念，并将所需的模块存储在您重用的变量中。

如果你想拥有一个可以在客户端使用并在 node.js 中测试的对象，这里有一种方法：

你的模块.js：

```
// Use either node's export or the global object in browsers
var global = module ? module.exports : window.yourModule;

( function( exports ) {
    var yourModule = {};
    // do some stuff
    exports = yourModule;
} ( global ) ); 
```

您可以将其缩短为避免创建`global`变量：

```
( function( exports ) {
    var yourModule = {};
    // do some stuff
    exports = yourModule;
} ( module ? module.exports : window.yourModule ) ); 
```

这样，您可以在客户端像这样使用它：

```
yourModule.someMethod(); // global object, "namespace" 
```

在服务器端：

```
var yourModule = require( '../yourModule.js' );
yourModule.someMethod(); // local variable :-) 
```

仅供参考，`..`意思是“父目录”。这是获取模块的相对路径。如果文件在同一目录中，您将使用`.`.

# ruby-on-rails - Nokogiri：如何通过 id 查找 div 并查看其中包含的文本？

> ID：11602077
> 
> 赞同：11
> 
> 时间：2012-07-22T16:40:19.503
> 
> 标签：ruby-on-rails, screen-scraping, nokogiri

我今天早上刚开始使用 Nokogiri，我想知道如何执行一个简单的任务：我只需要在网页中搜索这样的 div：

`<div id="verify" style="display:none"> site_verification_string </div>`

我希望我的代码看起来像这样：

```
require 'nokogiri'
require 'open-uri'

url = h(@user.first_url)
doc = Nokogiri::HTML(open(url))
if #SEARCH_FOR_DIV#.text == site_verification_string
  @user.save
end 
```

所以主要问题是，我如何使用 nokogiri 搜索那个 div？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-22T16:51:25.127

```
html = <<-HTML
  <html>
    <body>
      <div id="verify" style="display: none;">foobar</div>
    </body>
  </html>
HTML
doc = Nokogiri::HTML html
puts 'verified!' if doc.at_css('[id="verify"]').text.eql? 'foobar' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-19T04:39:48.490

对于通过 ID 获取元素的简单方法，您可以使用`.at_css("element#id")`

查找 id 为“verify”的 div 的示例

```
html = Nokogiri::HTML(open("http://example.com"))
puts html.at_css("div#verify") 
```

这将为您提供 div 及其包含的所有元素

# c# - Page.ClientScript.RegisterStartupScript 在 IE 和 firefox 中工作，但在 chrome 中不工作

> ID：11602081
> 
> 赞同：0
> 
> 时间：2012-07-22T16:40:43.837
> 
> 标签：c#, javascript, asp.net, onload

我在用着

```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "onload", 
  "LoadGraphInitially(true)", true); 
```

在页面加载时附加一个脚本，但它不会在 google chrome 中被触发，尽管它在 IE 和 firefox 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:09:04.263

正如@SJ GJ 建议的那样

`"LoadGraphInitially(true)"`..添加`;` 这样的..`"LoadGraphInitially(true);"` 添加`;`解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:32:39.147

在 HEAD 标记内添加您的 JavaScript。有一种趋势是在 HTML 块的末尾编写 javascript。它影响页面的加载。但是，如果您在表单加载时从代码后面注册脚本，那么脚本应该写在 HEAD 标记内。

# python - 将不同的参数传递给 Fabric 中的不同主机

> ID：11602084
> 
> 赞同：5
> 
> 时间：2012-07-22T16:41:10.110
> 
> 标签：python, fabric

我正在编写一个脚本来在多个主机上启动负载生成实验。我可以编写一个 bash 脚本来启动多个 ssh 会话，但我希望使用更结构化的东西。因为我的大部分脚本都使用 Python，所以我认为[Fabric](http://www.fabfile.org)看起来是一个不错的选择。

唯一的问题是我需要为每个命令传递少量的主机特定数据（实际上只是一个 id 或计数器），我想并行运行它们。

换句话说，我想做类似以下的事情，其中​​每个主机的 host_num 是不同的（可能只是增加了）。

```
@parallel
def launch():
    with cd('/working/dir'):
        run("./start/script -id=%d", host_num) 
```

这在织物中可能吗？如果没有，我可以使用其他工具来完成同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:45:43.747

您可以检查用户/主机。每个任务都知道它们当前运行的环境：

```
env.hosts = ['user@host1.com', 'user@host2.com']

@task
def test():
    print '%(user)s@%(host)s' % (env)

    if env.host == 'host1.com':
        id = 1
    elif ...

    run('echo "%s"' % (id)) 
```

随意以更优雅的方式编写它:)（一个建议是使用类似于用于 id 查找的 case 语句的字典）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:41:42.813

如果您想对任务中正在运行的主机进行一些内省，我建议您引用 env.host 变量。每个任务都知道它的环境状态，尽管它们并行不共享这种状态，因为它们都作为分叉运行。还有[许多其他环境变量](http://docs.fabfile.org/en/1.4.3/usage/env.html)可供您使用。

# html - 固定位置导航栏

> ID：11602086
> 
> 赞同：0
> 
> 时间：2012-07-22T16:41:15.030
> 
> 标签：html, css

我有一个导航栏，我想在我的网站上保持在固定位置（顶部）。我还希望导航栏有一些透明度。我将透明度应用于导航栏，这也使得该 div 内的任何内容（子元素）也继承了透明度。因此，为了解决这个问题，我对导航栏内的内容应用了相对位置，但现在应该固定显示的内容（在导航栏内）随着页面内容的其余部分滚动。我怎样才能解决这个问题？

[小提琴](http://jsfiddle.net/CUfFT/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:47:04.827

在这种情况下不要使用不透明度，`RGBa`用于`background`导航栏`background: rgba(0,0,0,.5);`（以及`filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#0F000000, endColorstr=#0F000000);`IE 8 和更早版本）。所有孩子都继承了该`opacity`值，您对此无能为力（除了将父母`opacity`重新设置为`1`，在这种情况下，您将不再对父母有半透明性）。

[**演示**](http://jsfiddle.net/thebabydino/CUfFT/8/)（改回原来的结构，导航容器内有导航内容和 RGBa）

[**Demo#2**](http://jsfiddle.net/thebabydino/CUfFT/7/)（使用当前结构和`opacity`，将导航内容的位置更改为`fixed`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:07:50.803

您可以使用 CSS 伪选择器`:children`并将不透明度设置为 1。这将使该元素的所有子元素不透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:46:49.257

为什么不在导航栏内的元素的 CSS 中添加另一个透明度规则，以覆盖它们从导航栏继承的规则？不需要更改位置属性，我看不出这将如何影响透明度。

# php - 将 PHP 表放入表中

> ID：11602088
> 
> 赞同：0
> 
> 时间：2012-07-22T16:41:24.713
> 
> 标签：php, html-table, echo

我有一个从 MYSQL 数据库中“拉出”的表，用户可以使用下拉框并保存到 MYSQL。所有这些都有效 - 但桌子不适合 DIV，看起来一团糟。有没有一个我可以有一个水平滚动条来滚动整个表格？

我怎样才能把这个表放在一个 1100x545 像素的表中......它会溢出，但它需要适合 div。我希望它水平溢出

```
echo "<table style=\"float:left;\" width=\"130\" border=\"0\" >";
                foreach($Data as $Item => $Value) {
            if(!is_numeric($Item) && $Item !== "UserIDHere") {
                if($i == 0) {
                    $Unit = substr($Item, 0, 2);
                    $Assignment = substr($Item, 2, 2);
                    $Task = substr($Item, 4, 2);

                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$UArr[$Unit]."</p></td></tr>";
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$AArr[substr($Item, 2, 2)]."</p></td></tr>";
                    echo "<tr><td width=\"60\">".$TArr[$Task]."</td><td width=\"50\">".DropDown($Item, $Value)."</td></tr>";

                }
                if($Unit !== substr($Item, 0, 2)) {
                    echo "</tr>";
                    echo "</tr>";
                    echo "<table style=\"float:left;\" width=\"150\" border=\"0\" >";
                    $Unit = substr($Item, 0, 2);
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$UArr[substr($Item, 0, 2)]."</p></td></tr>";
                }
                if($Assignment !== substr($Item, 2, 2)) {
                    $Assignment = substr($Item, 2, 2);
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$AArr[substr($Item, 2, 2)]."</p></td></tr>";
                }
                if($Task !== substr($Item, 4, 2)) {
                    $Task = substr($Item, 4, 2);
                    echo "<tr><td width=\"60\">".$TArr[$Task]."</td><td width=\"50\">".DropDown($Item, $Value)."</td></tr>";
                }
                $i++;
            }

        }
        echo "</table>"; 
```

这个的CSS是

```
.full-segment
{
    width: 1100px;
    height: 545px;
    overflow: scroll;
} 
```

我怎么做才能使溢出是水平的）所以你水平滑动而不是垂直滑动？

![它看起来如何](../Images/95b0769d3d1247a03e816cb282efcbd0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:50:54.740

放在`<div>`范围之外`<table>`。所以你的代码应该是这样的：

```
echo "<div foo='bar' foo2='bar2'>
<table foo='bar' foo2='bar2'>";
//populate the table here
echo "</table></div>"; 
```

~~默认的 CSS 设置`overflow:auto`将负责其余的工作。~~

编辑：默认 CSS 设置**不是** `overflow:auto`. 是`overflow:visible`。我的错。您需要在属性`overflow:auto`中显式声明。`style`

更新：使字段水平移动需要将它们放入相同的`<tr>`标签中。每个不同`<tr>`的标签都会在表格中产生一个新行（在新行上）。为此，您需要重新考虑您的分组以及如何放置这些`<tr>`标签，以及一行中需要多少个字段。不幸的是，在找到适合自己的外观之前，您必须自己进行试验。

此外，表中的表在工作时，如果您没有正确关闭它们，可能会导致很多麻烦。您可能希望确保那段代码正在执行您希望它执行的操作。

# ruby-on-rails - 从模型到 javascript 的字符串无法编译

> ID：11602089
> 
> 赞同：0
> 
> 时间：2012-07-22T16:41:29.897
> 
> 标签：ruby-on-rails, ruby, url, paperclip

在 Rails 中，我试图将模型中的 URL 作为字符串获取到视图中的 javascript 中。这就是我目前所做的。

```
#in the model
has_attached_file :avatar, styles: { thumb: "60x60>"}, :default_url => "/system/users/avatars/thumb/missing.png"
#using paperclip gem.
....
def someMethod
   return [neares.map{|u| u.avatar.url(:thumb)}.compact]
end 
```

稍后在视图中我执行以下操作：

```
anArray = <%=aModelInstace.someMethod().to_json%>; 
```

这是我在渲染的 javascript 中得到的：

```
//swap all the $ with &
anArray = [[$quot;/system/users/avatars/thumb/missing.png$quot;],[/* many similar to the previous */]]; 
```

这不会编译并导致错误“意外令牌&”。那么我怎样才能让它在javascript中返回一个实际的字符串，而不仅仅是用包装的引号呢？

* * *

我试过`u.avatar.url(:thumb).to_s`和`"#{u.avatar.url(:thumb)}"`. 没运气。此外，数小时的谷歌搜索让我无处可去:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:32:19.303

正如 apneadiving 和 Benjamin Tan 所说：

采用：

> anArray = <%=raw aModelInstace.someMethod().to_json%>;

这解决了问题。

# xcode - 我可以在没有 Xcode 的情况下在 Mac OS X 10.7.4 上安装 Valgrind 吗？

> ID：11602092
> 
> 赞同：1
> 
> 时间：2012-07-22T16:41:54.697
> 
> 标签：xcode, osx-lion, valgrind

我一直在寻找是否有一种方法可以在不需要安装 Xcode 的情况下安装 Valgrind，因为我知道我已经安装了苹果的命令行工具。在安装 Valgrind 期间，我得到以下信息：

```
Making all in coregrind
(cd m_mach && mig /usr/include/mach/mach_vm.defs /usr/include/mach/task.defs /usr/include/mach/thread_act.defs /usr/include/mach/vm_map.defs)
xcode-select: Error: No Xcode is selected. Use xcode-select -switch /Applications/Xcode.app to select /Applications/Xcode.app, or see the xcode-select manpage (man xcode-select) for further information.
/usr/bin/mig: line 174: Error: /usr/bin/xcode-select returned unexpected error.: No such file or directory
mig: fatal: "<no name yet>", line -1: no SubSystem declaration
make[2]: *** [m_mach/mach_vmUser.c] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:44:10.993

如您所见，有`xcode-select: Error: No Xcode is selected`消息。看看[这个](https://stackoverflow.com/a/9621787/432914)。

# r - 在 ggplot 中添加一个带边界的新图

> ID：11602093
> 
> 赞同：2
> 
> 时间：2012-07-22T16:42:37.600
> 
> 标签：r, ggplot2

我有这些数据：

```
dt1 <- structure(list(yr = 2004:2010, X = c(0.637, 0.9701, 0.701, 0.4535, 0.5058, 0.4698, 0.6228), lower = c(0.4254, 0.6442, 0.4699, 0.2929, 0.3311, 0.3213, 0.4276), upper = c(0.8614, 1.32, 0.955, 0.6261, 0.6901, 0.6276, 0.8385)), .Names = c("yr", "X", "lower", "upper"), row.names = 50:56, class = "data.frame")

dt2 <- structure(list(yr = 2004:2010, X = c(0.1753, 0.2872, 0.3038, 0.1994, 0.2486, 0.235, 0.2604), lower = c(0.1059, 0.1747, 0.1879, 0.1174, 0.1542, 0.1507, 0.1704), upper = c(0.2554, 0.4121, 0.4319, 0.2876, 0.3542, 0.3222, 0.3588)), .Names = c("yr", "X", "lower", "upper"), row.names = 8:14, class = "data.frame") 
```

我可以像这样使用ggplot：

```
ggplot(dt1, aes(x=yr, y=X, group=1, ymin = lower, ymax = upper)) +
    geom_ribbon(alpha = 0.2) +
    geom_line() +
    geom_point(shape=21, size=3, fill="blue") +
    theme_gray(12) +
    opts(panel.background = theme_rect(fill='grey80')) +
    ylim(0,1.7) 
```

![在此处输入图像描述](../Images/dfc3d1d09bd8edfbc1a603ee002049ab.png)

...对于 dt2 也是如此： ![在此处输入图像描述](../Images/ab453cad43446cd32bd18e6dddf832bb.png)

现在我想在同一张图上显示两个图。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:49:03.710

我会向两个数据框（基于原始数据框的名称）添加一个新变量（“dt”），然后将它们绑定到一个新的数据框（dt3）中

```
dt1[,"dt"]<-"dt1"  
dt2[,"dt"]<-"dt2"  
dt3<-rbind(dt1,dt2)  
dt3  
  >   yr      X  lower  upper  dt  
50 2004 0.6370 0.4254 0.8614 dt1  
51 2005 0.9701 0.6442 1.3200 dt1  
52 2006 0.7010 0.4699 0.9550 dt1  
53 2007 0.4535 0.2929 0.6261 dt1  
54 2008 0.5058 0.3311 0.6901 dt1  
55 2009 0.4698 0.3213 0.6276 dt1  
56 2010 0.6228 0.4276 0.8385 dt1  
8  2004 0.1753 0.1059 0.2554 dt2  
9  2005 0.2872 0.1747 0.4121 dt2  
10 2006 0.3038 0.1879 0.4319 dt2  
11 2007 0.1994 0.1174 0.2876 dt2  
12 2008 0.2486 0.1542 0.3542 dt2  
13 2009 0.2350 0.1507 0.3222 dt2  
14 2010 0.2604 0.1704 0.3588 dt2 
```

对于这个 dt3 数据框，您的代码可以很好地与更改为新变量名称的组配合使用

```
ggplot(dt3, aes(x=yr, y=X, group=dt, ymin = lower, ymax = upper)) +  
     geom_ribbon(alpha = 0.2) +  
     geom_line() +  
     geom_point(shape=21, size=3, fill="blue") +  
     theme_gray(12) +  
     opts(panel.background = theme_rect(fill='grey80')) +  
     ylim(0,1.7) 
```

更改点和线的颜色（添加：color=dt，linetype=0，更改：而不是 fill="blue"：aes(fill=dt)）。最后两行是自定义颜色。

```
myplot<-ggplot(dt3, aes(x=yr, y=X, group=dt, colour=dt,ymin = lower, ymax = upper)) +  
geom_ribbon(alpha = 0.2, linetype=0)+ geom_line() +  
geom_point(shape=21, size=3, aes(fill=dt)) +  
theme_gray(12) +  
opts(panel.background = theme_rect(fill='grey80')) +  
ylim(0,1.7)  
myplot<-myplot+ scale_color_manual(values=c("red", "blue"))  
myplot<-myplot+ scale_fill_manual(values=c("red", "blue"))  
myplot 
```

![在此处输入图像描述](../Images/f9cf6606bf766288386e68480aedaab2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T18:55:17.533

我通过反复试验找到了这个答案：

```
ggplot(dt1, aes(x=yr, y=X, group=1, ymin = lower, ymax = upper)) +
    geom_ribbon(alpha = 0.2) +
    geom_line() +
    geom_point(shape=21, size=3, fill="blue") +
    theme_gray(12) +
    opts(panel.background = theme_rect(fill='grey80')) +
    ylim(0,1.7) +
    geom_path(aes(x=yr, y=X, group=1, ymin = lower, ymax = upper), data=dt2) +
    geom_ribbon(alpha = 0.2, data=dt_inh) +
    geom_point(shape=21, size=3, fill="red", data=dt2) 
```

![在此处输入图像描述](../Images/2eba125e78167a08601a1fbd1c2ad25c.png)

这是一个好方法吗？

# javascript - 用JS绘制信息表

> ID：11602103
> 
> 赞同：0
> 
> 时间：2012-07-22T16:44:00.630
> 
> 标签：javascript, ajax

我有这个使用哈佛 API 的代码，它可以将所有的 CS 课程加载到下拉列表中。选择一门课程后，我想绘制一张包含课程所有信息的表格，但由于某种原因，我让它工作，该功能没有触发（我认为这是问题所在）。有人可以看到我写的函数中的问题吗？

```
<script type="text/javascript">
         function loadXMLDoc() {
             document.getElementById("span").style.visibility = "visible";
             document.getElementById("button").style.visibility = "hidden";
             $.ajax({
                 type: "GET",
                 url: "http://courses.cs50.net/api/1.0/courses?field=COMPSCI&output=xml",
                 success: function (data) {
                     var courses = data.documentElement.getElementsByTagName("course");
                     var options = document.createElement("select");
                     $(options).change(function () {
                         ShowCourseDetails(this);
                     });
                     for (var i = 0; i < courses.length; i++) {
                         var option = document.createElement("option");
                         option.value = $(courses[i]).find("cat_num").text();
                         option.text = $(courses[i]).find("title").text();
                         options.add(option, null);
                     }
                     document.getElementById("selectDiv").appendChild(options);
                     document.getElementById("span").style.visibility = "hidden";
                 }
             });
         }
         //Get the Course information
         function ShowCourseDetails(event) {
             // get the index of the selected option 
             var idx = event.selectedIndex;
             // get the value of the selected option 
             var cat_num = event.options[idx].value;
             $.ajax({
                 type: "GET",
                 url: "http://courses.cs50.net/api/1.0/courses?output=xml&&cat_num=" + cat_num,
                 success: function (data) {
                     $("#TableDiv").html(ConvertToTable(data.documentElement));
                 }
             });
         }
         //Draw The Table
         function ConvertToTable(targetNode) {
             targetNode = targetNode.childNodes[0];
             // first we need to create headers
             var columnCount = 2;
             var rowCount = targetNode.childNodes.length
             // name for the table
             var myTable = document.createElement("table");
             for (var i = 0; i < rowCount; i++) {
                 var newRow = myTable.insertRow();
                 var firstCell = newRow.insertCell();
                 firstCell.innerHTML = targetNode.childNodes[i].nodeName;
                 var secondCell = newRow.insertCell();
                 secondCell.innerHTML = targetNode.childNodes[i].text;
             }
             // i prefer to send it as string instead of a table object
             return myTable.outerHTML;
         }
</script> 
```

标记：

```
<div class="left">
                   <input id="button" type="button" onclick="loadXMLDoc()" value="Get all Coputer Science Courses From Harvard"/>
                   <br />
                   <span id="span" style="visibility: hidden">Downloading Courses From Harvard.. Please Wait.. </span>
                   <div id="selectDiv"></div>
                   <div id="TableDiv"></div>
            </div> 
```

提前10倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:49:17.883

为了让它调用，`ShowCourseDetails`我更改了此代码：

```
$(options).change(function () {
    ShowCourseDetails(this);
}); 
```

对此：

```
$('select').change(function () {
    ShowCourseDetails(this);
}); 
```

并将其移至回调函数的底部，如下所示：

```
document.getElementById("span").style.visibility = "hidden"; 
```

以便在添加事件后将事件连接到 DOM 元素。然后我不得不更改此代码：

```
$("#TableDiv").html(ConvertToTable(data.documentElement)); 
```

对此，由于 documentElement 似乎没有被定义：

```
$("#TableDiv").html(ConvertToTable(data.childNodes[0])); 
```

然后允许我在你的`ConvertToTable`函数中删除这一行：

```
targetNode = targetNode.childNodes[0]; 
```

它仍然无法正常工作，因为您没有正确浏览返回的 XML。但我会留给你解决这个问题。

# javascript - 为什么道具禁用会导致rails表单中的按钮不触发？

> ID：11602104
> 
> 赞同：0
> 
> 时间：2012-07-22T16:44:06.227
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, forms

好的，所以我有这个表格

```
 = form_tag 'some_controller/create', :remote => true do
  ...
  ...
  .right= submit_tag 'Submit Me', :id => 'submit_me'
  .clear 
```

这是我的 create.js.erb

```
 $('#submit_me').remove(); 
```

和我的 application.js 文件

```
$('#submit_me').live('click', function(){
  $(this).val("One moment please...");
  $(this).prop("disabled", true);
}); 
```

问题是当我点击它时，表单没有提交。如果我拿出`$(this).prop("disabled", true);`

然后它提交得很好，一切正常，但这对于我为什么不能禁用按钮没有意义......任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:52:12.547

我认为你应该在这里处理更合适的事件，`submit`在这种情况下。另外，[不要使用`.live()`](http://liveisdeprecated.com/)

```
$('#Parent').on('submit', '#theForm',function(){
  $('#submit_me').val("One moment please...");
  $('#submit_me').prop("disabled", true);
}); 
```

这里有几点注意事项：

*   如果您`'#Parent'`不确定，可以使用`'body'`.
*   `click`确实有效，但您必须手动提交表单`$('#theForm').submit()`

# ios - 选择指标图像

> ID：11602105
> 
> 赞同：1
> 
> 时间：2012-07-22T16:44:19.523
> 
> 标签：ios, uitabbar, uitabbaritem

我怎样才能去掉这个面具？

![选择指标图像](../Images/ef2307875b9bf39291c20ca84f262257.png)

我没有找到任何解决方案。

请帮我

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:43:45.660

我找到了这个解决方案：

```
UIImage* emptyImage = [UIImage imageNamed:@"empty.png"];
[[UITabBar appearance] setSelectionIndicatorImage:emptyImage]; 
```

selectionIndicatorImage 现在是空的！

看起来不错！

谢谢大家。

# python - python结构到原始字符串表示

> ID：11602107
> 
> 赞同：0
> 
> 时间：2012-07-22T16:44:20.837
> 
> 标签：python, hex

我想知道一些事情，此时我使用 python ctypes 制作一些 wifi 框架结构，并使用 lorcon2 我可以将它们发送到局域网。我想将此结构转换为字节字符串以获得该结构的无符号十六进制表示。为此，我已经看到了两个实现此目的的功能。ctypes.string_at 和 ctypes.wstring_at 函数。我知道 ctypes.wstring_at 用于制作 unicode 字符串，但 ctypes.string_at 用于 ??? 我们可以得到哪种字符串？ascII 字符串？？还是十六进制字符串？？
假设 F() 可以将结构转换为无符号十六进制字节字符串：

> ```
>  class d(Strcuture):
>        _ fields _ = [("num",c_uint8),("char",c_char)]
>     s = d(num = 129,char  = 'c')
>     q = F(s) 
> ```

如果我打印“q”，我想要这样的东西：
'\xe1\x63'
0xe1 是十六进制的 129 0x63 是十六进制
的 99
其中 'c' 在 ascII 中被编码为 99
并且再次使用所有这些，我搜索另一个函数以获取“q”中每个元素的确切字节值假设此函数是 wx()，因此它可以返回：
129 如果写入：wx(q[0])
99 如果我写入：wx(q [1])

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:52:45.920

既不需要`F()`也不`wx()`需要。

```
class d(Structure):
  _fields_ = [("num",c_uint8),("char",c_char)]

  def __str__(self):
    return struct.pack('Bc', self.num, self.char)

  def __getitem__(self, ix):
    if ix == 0:
      return self.num
    if ix == 1:
      return ord(self.char)
    raise IndexError('structure index out of range') 
```

# php - 实施访客跟踪系统

> ID：11602114
> 
> 赞同：0
> 
> 时间：2012-07-22T16:45:15.483
> 
> 标签：php, mysql, visitor-pattern, visitor-statistic

对于我的网站，我想要一个跟踪访问者系统

我在[这里](https://selvabalaji.wordpress.com/2012/06/16/how-to-count-visitors-using-php-mysql/#comment-2141)找到了这个 但是在设置之后，我得到了一个错误。

`Fatal error: Cannot redeclare getBrowserType() (previously declared`

我也不知道第一批代码要去哪里。在您要跟踪的页面或其他地方？

编辑*

删除下面的代码后，它起作用了。但是 MySQL 数据库中的访问者页面和访问者日期是空的。我应该把这段代码放在哪里？我应该改变一些对吗？否则它是双倍的，没有任何效果：

```
function getBrowserType () {
if (!empty($_SERVER['HTTP_USER_AGENT']))
{
   $HTTP_USER_AGENT = $_SERVER['HTTP_USER_AGENT'];
}
else if (!empty($HTTP_SERVER_VARS['HTTP_USER_AGENT']))
{
   $HTTP_USER_AGENT = $HTTP_SERVER_VARS['HTTP_USER_AGENT'];
}
else if (!isset($HTTP_USER_AGENT))
{
   $HTTP_USER_AGENT = '';
}
if (ereg('Opera(/| )([0-9].[0-9]{1,2})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[2];
   $browser_agent = 'opera';
}
else if (ereg('MSIE ([0-9].[0-9]{1,2})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[1];
   $browser_agent = 'ie';
}
else if (ereg('OmniWeb/([0-9].[0-9]{1,2})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[1];
   $browser_agent = 'omniweb';
}
else if (ereg('Netscape([0-9]{1})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[1];
   $browser_agent = 'netscape';
}
else if (ereg('Mozilla/([0-9].[0-9]{1,2})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[1];
   $browser_agent = 'mozilla';
}
else if (ereg('Konqueror/([0-9].[0-9]{1,2})', $HTTP_USER_AGENT, $log_version))
{
   $browser_version = $log_version[1];
   $browser_agent = 'konqueror';
}
else
{
   $browser_version = 0;
   $browser_agent = 'other';
}
return $browser_agent;
}

Here is browser types code:
$visitor_browser = getBrowserType();
Now we need to define hour, minute, day, month and year of visitors:

$visitor_hour = date("h");
$visitor_minute = date("i");
$visitor_day = date("d");
$visitor_month = date("m");
$visitor_year = date("y");
And next we need to find out who is sending us visitors so we can thank them.

$visitor_refferer = gethostbyname($HTTP_REFERER);
So to get the full url of our page we will use this function:

function selfURL() {
$s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";
$protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s;
$port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI'];
}
function strleft($s1, $s2) { return substr($s1, 0, strpos($s1, $s2));
}
Now we have our page, we will store it on a variable:

$visited_page = selfURL(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:48:11.000

就是说这个功能已经存在了。如果项目的其他地方正在使用相同的函数，请将其修改为新的函数名称（如 myGetBrowserType() ）或删除整个函数声明。

`function myGetBrowserType () {`

然后在其他地方...

[..] `myGetBrowserType(`[..]

# facebook - FBRSS.com 替换从 Wall 到 WordPress Syndicate Press 插件的 RSS 提要

> ID：11602115
> 
> 赞同：-1
> 
> 时间：2012-07-22T16:45:38.670
> 
> 标签：facebook, wordpress, rss, feed

我的 WordPress 页面显示来自多个 Facebook 帐户的墙信息，使用 FBRSS.com 将 RSS 提要从 3 个 Facebook 墙流式传输到 Syndicate Press 插件。
但 FBRSS.com 网站已关闭。对于更换或不同的解决方案有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:29:10.080

我有一个信息。这太[IFTTT](http://ifttt.com/ "IFTTT")了。
意思是“ **If** **T** his Then **T** **hat** ”。

1.  这 = 触发通道。
2.  然后 = 触发器。
3.  那 = 频道的行动。

渠道很多。现在有 49 个频道。它是许多社交和网络服务。需要在操作时激活。

触发器在通道上很多。例子....

Facebook（用户）：触发器

1.  您的新状态信息。
2.  您发布的新链接。
3.  你上传一张新照片。
4.  您在照片中被标记。
5.  您的个人资料发生变化。

Facebook（页面）：触发

1.  页面上的新状态消息。
2.  页面上的新链接帖子。
3.  页面上的新照片。

动作太多了……

Facebook（用户）：行动

1.  创建状态消息。
2.  创建链接帖子。
3.  从 URL 上传新照片。

Facebook（页面）：行动

1.  创建状态消息。
2.  创建链接帖子。
3.  从 URL 上传新照片。

包括你的需求？
如果您的 FBRSS.com 服务重新启动。但是这个服务兴趣！
请使用它。

兴趣：使用“日期和时间”和“电话”=早安电话！！！

谢谢，问候。

# java - Java 异常处理（4 合 1）

> ID：11602119
> 
> 赞同：1
> 
> 时间：2012-07-22T16:46:04.057
> 
> 标签：java, exception-handling

如果我的代码中有异常处理部分，并且它可以触发 4 个 sqlException，那么处理它们的最佳方法是什么，它最能说明发生了什么以及在哪里？我做了一个穷人解决方案（通过使用'exceptionDesc'）。

有什么好的做法来处理这种情况吗？（没有制作独特的类和子类）

```
 try {
        exceptionDesc = "prepareStatement"; 
        statement = connection.prepareStatement(sql);

        exceptionDesc = "statement.set...";
        statement.setDate(1, sqlDate);

        exceptionDesc = "executeUpdate";
        statement.executeUpdate();

        exceptionDesc = "commit";           
        connection.commit();
    } 
    catch (SQLException sqlEx) {
        if (exceptionDesc.equals("prepareStatement")) {
            LOG.error ...
        } else if (exceptionDesc.equals("executeQuery")) {
            LOG.error(" executeQuery ...
                    ...
                    ...
        throw new SQLException(sqlEx);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:50:12.677

不要做任何事。异常的堆栈跟踪为您执行此操作：

```
catch (SQLException e) {
    LOG.error("A SQLException happened", e);
    throw e;
} 
```

足够了。记录器，如果配置为显示堆栈跟踪（它应该这样做），将打印堆栈跟踪，堆栈跟踪将准确地告诉哪个方法，在哪一行，抛出了异常。它还将告诉哪个方法调用了导致异常的方法等，直到堆栈底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:20:26.893

**1.**你应该将**try catch从**最**具体的异常**对齐到**最抽象的异常。**

**2.**但是即使你使用 SQLException，堆栈跟踪也会告诉你以下信息：

**-**发生异常的**方法名称。**

**-**发生异常的**类名。**

**-**发生异常的**文件名。**

**-**发生异常的**行号。**

```
catch (SQLException e) {

       e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:06:12.433

为什么业务层需要知道如此细粒度的细节？业务逻辑如何取决于您的数据库事务中的哪一行失败？这仅对人类开发人员/维护人员感兴趣。顺便说一句，我什至什么都抓不到——我会让异常向上传播到主要异常屏障，即管理 JDBC 连接的地方。您在每个 DAO 方法中都重复了事务管理，这也不是很好。您应该让您的业务级代码（以及 DAO）只关注每个事务的细节，并将连接和事务管理留给一个中心位置。如果您在项目中使用 Spring（一个非常热情的建议），这将很容易设置。

# unicode - 如何在 Neo4jClient 中创建具有 unicode 属性的节点？

> ID：11602121
> 
> 赞同：0
> 
> 时间：2012-07-22T16:46:18.807
> 
> 标签：unicode, neo4j, neo4jclient

我在`C#`.

我添加了几个具有包含`nicode`格式字符串的属性的节点。问题是，当我查询节点时，当我通过 Neo4j 服务器页面查看数据时，`C#`我得到`????`的不是值，而是相同的值。`unicode``DataBrowser`

`Neo4j server`我直接在属性中添加了节点`unicode`，一切看起来都很好。

我如何调整以创建具有属性`Neo4jClient`的节点/关系？`unicode`

先感谢您

ps 在 `neo4j-wrapper.conf`我找到的文件中 `wrapper.java.additional.3=-Dfile.encoding=UTF-8`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:42:05.957

这是一个已知的问题：

[https://bitbucket.org/Readify/neo4jclient/issue/25/unicode-characters-are-not-roundtripped](https://bitbucket.org/Readify/neo4jclient/issue/25/unicode-characters-are-not-roundtripped)

请监视该问题以了解何时修复。

# xslt - Xslt 错误：“tr”不能是“xsl:text”元素的子元素

> ID：11602128
> 
> 赞同：0
> 
> 时间：2012-07-22T16:47:05.050
> 
> 标签：xslt

请向我解释如何在 XSL 模板中包含纯 html

```
<xsl:choose>
<xsl:when test="position() = last()">
<xsl:text><tr><td colspan='10'>bla bla.</td></tr></xsl:text></xsl:when>
</xsl:choose> 
```

错误：“tr”不能是“xsl:text”元素的子元素。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:49:22.427

只需删除`<xsl:text>`标签：

```
<xsl:choose>
<xsl:when test="position() = last()">
  <tr><td colspan="10">bla bla.</td></tr>
</xsl:when>
</xsl:choose> 
```

元素的`<xsl:text>`意思是“在此处插入文本”。因此，其内容必须仅由文本节点组成。但是，您可以简单地写出文本；以下两行是等效的：

```
<xsl:text>foo bar</xsl:text>
foo bar 
```

# php - PHP，MySQL LOAD DATA LOCAL INFILE {$_FILES[file][name]} 作为变量文件名

> ID：11602131
> 
> 赞同：1
> 
> 时间：2012-07-22T16:48:04.910
> 
> 标签：php, mysql, variables, load, file-io

我正在创建一个导入文件并创建表并将其命名为 $memberID_$filename 的函数

当它试图转换文件名时它会窒息。我认为这是因为 .txt 但不太确定。

第 23 行是问题所在。

```
<?php
var_dump($_FILES);
//db connection
require 'dbConnect.php';
//session file
require_once('../auth.php');
function uploadList(){
        //var_dump($_FILES);
        if ($_FILES["file"]["type"] == "text/plain")
                {
                if ($_FILES["file"]["error"] > 0)
                        {
                        echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
                }
                else
                        {
                        dbConnect();
                        mysql_select_db('mailList') or die(mysql_error());
                        //$file=''
                        $file = $_FILES['file']['name'];
                        $presql = "CREATE TABLE IF NOT EXISTS (`$_SESSION[SESS_MEMBER_ID]_$file`)";
                        $sql = <<<EOF
                        LOAD DATA LOCAL INFILE {$_FILES[file][name]}
                        INTO TABLE (`$_SESSION[SESS_MEMBER_ID]_$file`)
                        FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\\'
                        LINES TERMINATED BY "\\r\\n"
                        IGNORE 1 LINES
EOF;
                        mysql_query($presql);
                        mysql_query($sql);
                        var_dump($sql);
                        if(mysql_error())
                                {
                                echo(mysql_error());
                        }
                        else
                                {
                                print('Import of campaign emails sucessfull into mysql table.');
                        }
                }
        }
        else
                {
                print('Invalid file type. Please make sure it is a text file.');
        }
}

//var_dump($_FILES);
uploadList();
?> 
```

****** *** ** *** ** *** ** *** ** ******错误****** ** *** ** *** ** *** **** array(1) { ["file"]=> array(5) { ["name"] => string(14) "emailsTest.txt" ["type"]=> string(10) "text/plain" ["tmp_name"]=> string(14) "/tmp/phpW7Cu2I" ["error"]= > int(0) ["size"]=> int(61) } } 注意：使用未定义的常量文件 - 在第 23 行 /home/nyctelecomm.com/www/mail/import.php 中假定为“文件”**

 **注意：使用未定义的常量名称 - 在 /home/nyctelecomm.com/www/mail/import.php 第 23 行 string(178) " LOAD DATA LOCAL INFILE emailsTest.txt INTO TABLE ( `3_emailsTest.txt`) FIELDS TERMINATED BY 中假定为“名称” ,' OPTIONALLY ENCLOSED BY '\' LINES TERMINATED BY "\r\n" IGNORE 1 LINES" 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`3_emailsTest.txt`在第 1 行的 'emailsTest.txt INTO TABLE ( ) FIELDS TERMINATED BY ',' OP'附近使用正确的语法**

# ruby - 什么是正确的数据库？Mongo、SQL、Couch 还是其他？

> ID：11602134
> 
> 赞同：0
> 
> 时间：2012-07-22T16:48:49.267
> 
> 标签：ruby, mongodb, database, nosql

假设我有一个包含 1000 万个文档的集合，看起来像这样：

```
{
"_id": "33393y33y63i6y3i63y63636",
"Name": "Document23",
"CreatedAt": "5/23/2006",
"Tags": ["website", "shopping", "trust"],
"Keywords": ["hair accessories", "fashion", "hair gel"],
"ContactVia": ["email", "twitter", "phone"],
"Body": "Our website is dedicated to making hair products that are..."} 
```

我希望能够在数据库中查询任意数量的标签、关键字和 ContactVia 的 3 个属性中的任何一个，包括 0 个。我需要能够通过 ANDS（本文档包括 X 和 Y 的两个属性）或 OR（本文档包括 X OR Y 的属性）进行选择。

示例查询：

*   给我前 10 个具有标签 website 和 shopping 的文档，关键字匹配“hair Accessories or fashion”，contact_via 包括“email”。

*   给我另外 20 个带有标签“网站”或“信任”的文档，匹配关键字“发胶”或“发饰”。

*   给我 50 个带有“网站”标签的文档。

我还需要按文档中的其他字段（分数类型）或创建或更新日期对这些进行排序。所以基本上有四个定期查询的“范围”。

我一开始是基于 SQL 的。然后，我搬到了 Mongo，因为它支持数组和哈希（我喜欢）。但是，它不支持使用索引的多个范围，所以我的 Mongo 数据库很慢..因为它不能使用索引并且必须扫描 1000 万个文档。

有没有更好的选择。这阻碍了将该应用程序投入生产（以及随之而来的收入）。任何关于正确数据库或替代架构的想法将不胜感激。

如果这很重要，我在 Ruby/Rails 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:13:15.027

当需要对数组进行多次查询时，我们发现至少对我们来说最好的解决方案是使用 ElasticSearch。我们得到了这个，加上其他一些奖金。而且，我们可以减少对 Mongo 的索引要求......所以这是双赢的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:41:53.590

我的两分钱用于 MongoDB。不仅可以将您的数据表示、保存和加载为原始 Ruby 哈希，而且 Mongo 是现代且快速的，并且非常非常容易了解。以下是启动 Mongo 服务器所需要做的一切：

```
mongod --dbpath /path/to/dir/w/dbs 
```

然后要获取控制台，它只是一个基本的 JavaScript 控制台，只需调用`mongo`. 使用它就是这么简单：

```
require 'mongo'
db = Mongo::Connection.new['somedb']
db.stuff.find #=> []
db.stuff.insert({id: 'abcd', name: 'Swedish Chef', says: 'Bork bork bork!'})
db.stuff.find #=> [{id: 'abcd', name: 'Swedish Chef', says: 'Bork bork bork!'}]
db.stuff.update({id: 'abcd', {'$set' => {says: 'Bork bork bork!!!! (Bork)!'}}})
db.stuff.find #=> [{id: 'abcd', name: 'Swedish Chef', says: 'Bork bork bork!!!! (Bork)!'}] 
```

# c++ - Qt中浮点的强制点而不是逗号

> ID：11602136
> 
> 赞同：1
> 
> 时间：2012-07-22T16:48:56.390
> 
> 标签：c++, qt, floating-point

我有一个非常基本的问题：如何在 Qt 中强制使用浮点数中的点而不是逗号（我有我的操作系统的法语版本）？

其他问题：是否可以显示带有千位分隔符的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:22:42.023

尝试这个：

```
QLocale loc = QLocale::system(); // current locale
loc.setNumberOptions(QLocale::c().numberOptions()); // borrow number options from the "C" locale
QLocale::setDefault(loc); // set as default 
```

如果你想要“C”语言环境中的所有选项，你可以简单地做

```
QLocale::setDefault(QLocale::c()); 
```

关于您的第二个问题：Qt 不支持自定义语言环境，但您可以尝试将数字选项设置为匈牙利的语言环境（它应该产生 1234 和 12 345.67 - 我自己没有尝试过）

```
QLocale loc = QLocale::system(); // current locale
QLocale hungary(QLocale::Hungarian);
loc.setNumberOptions(hungary.numberOptions()); // borrow number options from the Hungarian locale
QLocale::setDefault(loc); // set as default 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-10T14:09:49.580

对于 Linux：

由于我住在德国，但希望我的系统使用英文消息，所以我的 PC 上有一个混合区域设置：

```
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC=de_DE.UTF-8
LC_TIME=de_DE.UTF-8
LC_COLLATE="en_US.UTF-8"
LC_MONETARY=de_DE.UTF-8
LC_MESSAGES="en_US.UTF-8"
LC_PAPER=de_DE.UTF-8
LC_NAME=de_DE.UTF-8
LC_ADDRESS=de_DE.UTF-8
LC_TELEPHONE=de_DE.UTF-8
LC_MEASUREMENT=de_DE.UTF-8
LC_IDENTIFICATION=de_DE.UTF-8
LC_ALL= 
```

这给数字的表示带来了一些麻烦。

因为我是 QLocale 的新手并且有时间预算，所以我使用了一个简单的 hack 来临时“修复”问题，它对我来说效果很好：

```
int main(int argc, char *argv[]) {
  // make numbers predictable
  // a preliminary hack. Will be fixed with native language support
  setenv("LC_NUMERIC", "C",1); 
  QApplication a(argc, argv);
... 
```

这样做的好处是，数字在屏幕上的呈现以及从持久存储读取和写入到持久存储都统一了。后一个是最大的问题，例如浮点数写成'123,45'而不是'123.45'。

不是原生解决方案，而是暂时领先的可行技巧。

只是为了完整：该应用程序仅供我自己使用。所以这个技巧当然不要求任何专业性。

# python - 为什么 Google App Engine NDB 在 ndb.Model 中的 @classmethod 内返回属性值的 StringProperty(...)？

> ID：11602137
> 
> 赞同：1
> 
> 时间：2012-07-22T16:49:01.100
> 
> 标签：python, google-app-engine

我有一个简单的 NDB 模型：

```
from google.appengine.ext import ndb
import logging
from libs import Api

class User(ndb.Model):
    oauth_token = ndb.StringProperty(required=False, indexed=False)

    @classmethod
    def update_data(self):
        logging.info("uid = %s, oauth token = %s" % (self.key, self.oauth_token))
        api = Api.Init(self.oauth_token) 
```

在一个单独的文件`test.py`中，我有以下代码：

```
from models import User
from google.appengine.ext import webapp, ndb
import logging

class Test(webapp.RequestHandler):
    def get(self):
        uid = 1
        u = ndb.Key(User, str(uid)).get()
        logging.info("uid = %s, oauth token = %s" % (u.key.string_id(), u.oauth_token))
        u.update_data() 
```

这是日志中的输出：

```
INFO     2012-07-22 16:32:42,532 test.py:8] uid = Key('User', '1'), oauth token = xxxxxxxxxxxxxxxxxxx
INFO     2012-07-22 16:32:42,532 user.py:9] uid = ModelKey('__key__'), oath token = StringProperty('oauth_token', indexed=False) 
```

为什么我得到`StringProperty('oauth_token', indexed=False)`的不是实际财产的价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:02:53.133

`update_data`用 装饰`@classmethod`，这意味着`self`in`update_data`是对 User 类的引用，而不是实例方法。只需删除`@classmethod`.

# regex - 仅允许字母数字和最大长度的字数正则表达式

> ID：11602141
> 
> 赞同：0
> 
> 时间：2012-07-22T16:49:09.157
> 
> 标签：regex

我整个上午都在[gSkinner](http://gskinner.com/RegExr/)上试图改变这个正则表达式。它正确地只允许 15 个单词，但*我如何进一步将输入限制为仅字母数字，并且没有有效单词的长度超过 25 个字符？*

我理解 [a-z0-9]，但大概使用单词边界似乎让我感到困惑，因为无论我做什么，我都会打破它。

`^\W*(?:\w+\b\W*){1,15}$`

它用于 javascript/php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:57:35.547

试试这个正则表达式：`^((\w{1,25}))((\W\w{1,25}){1,14}|)`

第一个单词前面不会有空格（\w{1,25}），这些东西检查这个。现在我想要一个空格后跟一个单词 (\W\w{1,25})，但我想要这个从 1 到 14 次 (\W\w{1,25}){1,14}。好的，但是如果输入只有 1 个单词，则模式的第二部分将不起作用，所以我可以没有空格，而不是后面跟着单词的空格，所以我添加了 |。((\W\w{1,25}){1,14}|)

* * *

编辑

如果您输入，该模式会出现故障-这些字符，因此我将其更新为：
`^([^ ]{1,25})(([ ]{1,}([^ ]{1,25}|)){1,14}|)`

# python - PyGtk CellRendererCombo 使用 Pixbuf

> ID：11602142
> 
> 赞同：2
> 
> 时间：2012-07-22T16:49:15.143
> 
> 标签：python, gtk, pygtk, canonical-quickly

我想在包含一些图标的 TreeView 中显示一个 ComboBox。所以我创建了一个 ListStore 来保存数据。

```
 # Initialize a list store for the combobox.
    priorityModel = Gtk.ListStore(GObject.TYPE_INT, GdkPixbuf.Pixbuf)
    priorityModel.append([0, self.loadPixbuf('./data/media/flag_blue.png')])
    priorityModel.append([1, self.loadPixbuf('./data/media/flag_green.png')])
    priorityModel.append([2, self.loadPixbuf('./data/media/flag_yellow.png')])
    priorityModel.append([3, self.loadPixbuf('./data/media/flag_red.png')]) 
```

然后我创建了 Gtk.CellRendererCombo 对象并将上面的 Gtk.ListStore 分配为模型。

```
 # Setup the priority cell renderer, ...
    self.priorityRenderer = Gtk.CellRendererCombo()
    self.priorityRenderer.set_property( 'editable', True )
    self.priorityRenderer.set_property("model", priorityModel)
    self.priorityRenderer.connect("edited", self.on_priority_changed, self.listStore, 3) 
```

最后，我创建了一个新的 Gtk.TreeViewColumn 并分配了 CellRenderer 并将其添加到 TreeView。

```
 # ... setup the priority column ...
    self.colPriority = Gtk.TreeViewColumn("Priority", self.priorityRenderer, text=3 )

    # ... and add it to the treeview.
    self.append_column( self.colPriority ) 
```

一切都很好，但是如何显示 Pixbuf 图标而不是整数，以及如何使用整数初始化 ComboBox？而且，第二个问题，是否可以在组合框未激活时仅显示图标，并在值更改时显示图标和一些文本（组合框激活）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:57:23.670

你需要一个`Gtk.CellRendererPixbuf`来显示图标。例如，参见优秀的[Python 3 Gtk+ 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/cellrenderers.html#cellrendererpixbuf)。

回答你的第二个问题：是的。只需连接到`"changed"`信号`Gtk.CellRendererCombo`并动态添加/删除单元格渲染器。

# csv - SQLite 3.7 .import (of csv) 跳过 SQLite 3.6 .import 获得 OK 的记录

> ID：11602143
> 
> 赞同：1
> 
> 时间：2012-07-22T16:49:16.957
> 
> 标签：csv, import, sqlite

我有 24,888 条记录进入带有 FTS 索引的 SQLite 表。我使用 .import 从一组带有逗号分隔符的 .csv 文件中加载表。

平台是 Linux - CentOS 6.2，SQLite 3.6.20 作为此发行版中支持的版本。

*这一直在*使用 FTS 3 构建搜索系统 - 使用 Apache 和 PHP。

为了获得 FTS 4 功能——我需要的统计信息——我最近手动更新到 SQLite 3.7.13——最新的。

不幸的是，现在当我从 .csv 导入时——无论是到 FTS 3 还是 FTS 4 表，我丢失了超过一半的行/记录——我只得到 12,224 而不是 24,888。

导入期间没有报告错误。

数据中的最后一列是大量（在某些记录中）文本 - 在少数情况下高达 200K - 300K。文本中仍有一些字符，例如双引号或 m-dash 或 n-dash。

.immport 代码是否有可能看起来像文件结尾？

字数统计实用程序“wc -l”查看所有 24,888 行。

最后一点，.csv 文件是使用在 Linux 系统上运行的 Python 2.6.6 创建的，并且任何原始换行符都被转义（到 ||），所以我相信它们具有统一的回车控制/换行符。也许我错过了一些 SQLite 3.6 忽略但 3.7 看到的换行符或回车符？

我真的需要额外的 FTS 4 功能（主要是使用 matchinfo 报告有关搜索结果的统计信息），但如果我无法加载所有数据，那就不好了！

谢谢，劳伦斯·布雷瓦德加利福尼亚州圣何塞

```
[keywords2@keywords2c6x64 grant-import-tools]$ /usr/local/bin/sqlite3.7 --version
3.7.13 2012-06-11 02:05:22 f5b5a13f7394dc143aa136f1d4faba6839eaa6dc

[keywords2@keywords2c6x64 grant-import-tools]$ /usr/bin/sqlite3 --version
3.6.20

[keywords2@keywords2c6x64 grant-import-tools]$ uname -a
Linux keywords2c6x64 2.6.32-220.23.1.el6.x86_64 #1 SMP Mon Jun 18 18:58:52 BST 2012 x86_64 x86_64 x86_64 GNU/Linux

[keywords2@keywords2c6x64 grant-import-tools]$ cat /etc/redhat-release 
CentOS release 6.2 (Final) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:28:21.493

我修好了我的。

显然，双引号现在对逗号分隔的文件有不同的处理方式。我在原始来源中将它们转义为两个单引号。之后，我的所有线路都毫无问题地导入。

似乎一旦字段中有双引号，直到下一个双引号的所有内容都被视为单个字段。我猜。

从 3.7.7 到 3.7.12，这绝对是不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:17:54.850

我可以确认相同的体验 - 当导入大型 CSV（约 700 万行）时，3.7 丢失了大约 100 万行，而 3.6 没有

# unit-testing - 单元测试：敏捷并且知道要测试什么？根据要求进行测试？

> ID：11602145
> 
> 赞同：0
> 
> 时间：2012-07-22T16:49:23.183
> 
> 标签：unit-testing, tdd, bdd

以前，我实现单元测试只是为了测试一个方法是否*有效。*但是在其他地方阅读之后，似乎我应该在方法*失败时进行测试。*

例如，一个方法应该抛出一个异常，它传递了一个字符串。

这些要求从何而来？

我在一个敏捷团队中工作，因此我们获得了用户故事，其中包括应用程序功能的基本要求。这些基本要求包括非常*简单的* 要求（即密码长度最多为 8 个字符）。

然后，我在考虑需求的情况下从这个用户故事创建任务。

因此，在测试时……我究竟应该测试什么？

我想我应该测试该方法（它是作为用户故事的一部分的任务的一部分）以它应该的方式运行，但我还应该测试它是否应该失败？

例如，当要求最多 8 个字符时，将 12 个字符传递给方法的参数（密码）。我必须为此包含一个测试用例吗？

有谁知道一个很好的资源或链接来解释更多关于这个主题的信息？

我假设没有要求，我只能测试该方法是否成功以及它是否失败，因为我不知道它何时应该失败，因为没有要求？

任何人都可以提供的任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:01:02.293

**从快乐路径测试**开始。您的快乐路径应该基于需求中的用例。

当您涵盖所有快乐的路径时，请继续进行**边界测试**。因此，当它应该是 8 个字符的密码时，请对 7、8、9 个字符进行测试并涵盖相应的场景。

在你涵盖了所有的快乐路径和边界测试之后，问问自己**我该如何编写失败的测试？**如果你能弄清楚，那就写吧。如果应该提出异常，则将其覆盖。考虑到这一点，您可以轻松找出应该测试的内容以及不需要测试的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:54:43.157

我认为您对失败测试的阅读过多。这意味着在编写代码之前编写测试（除了总是返回无效值如 null 的存根）。这样你就知道当它失败时你有代码要写。然后，您编写代码并再次测试。测试现在应该通过了。测试驱动的开发应该总是这样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T17:14:20.747

虽然您当然不能测试*所有*可能性，但您*至少*应该测试代码中考虑的可能性。

因此，在您的示例中，传递给方法的字符串不得超过 8 个字符（顺便说一句，这是对密码的*可怕*要求），该方法可能如下所示：

```
public bool IsPasswordCorrect(string password)
{
    if (password.Length > 8)
        throw new ArgumentException("Password must not be greater than 8 characters.");

    return password == SomeKnownPassword;
} 
```

目标应该是 100% 的代码覆盖率。这意味着实际执行某些操作的每一行代码都应该至少有一个相应的测试。因此，如果唯一的测试是针对“快乐路径”（不超过 8 个字符的字符串），`throw`则永远不会测试该行。

那行代码是为了响应需求而存在的，因此应该测试该需求。在这种情况下，您将进行一些测试：

```
[TestMethod]
public void MatchingPasswordsShouldBeAllowed()
{
    // set the known password
    // set the passed password
    // call the method
    // assert that the method returned true
}

[TestMethod]
public void NonMatchingPasswordsShouldNotBeAllowed()
{
    // set the known password
    // set the passed password to something else
    // call the method
    // assert that the method returned false
}

[TestMethod]
[ExpectedException(typeof(ArgumentException))]
public void PasswordsShouldNotBeGreaterThanEightCharacters()
{
    // set the known password
    // set the passed password to something too long
    // call the method
    // assert that an exception was thrown
} 
```

注意测试方法的名称。它们听起来像是要求。这个想法是，陈述的需求应该被分解成实际的规范。业务需求是：

> *   密码不应超过 8 个字符

但是那里有隐含的要求吗？要求如：

> *   提供的与已知密码匹配的密码应导致身份验证。
> *   提供的与已知密码不匹配的密码不应导致身份验证。

毕竟，方法正在做所有这些事情。如果该方法正在做某事，则应该测试该方法。最终，代码所做的每一件事都应该至少有一个对应的测试来映射需求。

事实上，如果测试写得好，它们就会开始*成为*需求。这很好，因为这意味着相关知识（需求）可以保存在一个地方（测试）而不是多个不同的地方（测试、代码、文档、白板等）。

如果有一行代码没有被测试执行，那为什么那行代码在那里？如果没有测试，那么就没有要求。如果没有要求，请将其删除。

# r - R：使用特定于列的函数进行聚合

> ID：11602147
> 
> 赞同：6
> 
> 时间：2012-07-22T16:49:32.113
> 
> 标签：r, aggregate

我想按时间间隔聚合数据框，对每一列应用不同的函数。我想我几乎已经`aggregate`失败了，并且已经将我的数据分成了`chron`包的间隔，这很容易。

但我不确定如何处理子集。所有的映射函数 , 都`*apply`采用`*ply`一个函数（我希望能够采用函数向量来应用每列或变量，但没有找到）所以我正在编写一个函数来获取我的数据帧子集，并给我所有变量的平均值，除了“时间”，它是索引，和“径流”，它应该是总和。

我试过这个：

```
aggregate(d., list(Time=trunc(d.$time, "00:10:00")), function (dat) with(dat, 
list(Time=time[1], mean(Port.1), mean(Port.1.1), mean(Port.2), mean(Port.2.1), 
mean(Port.3), mean(Port.3.1), mean(Port.4), mean(Port.4.1), Runoff=sum(Port.5)))) 
```

即使它没有给我这个错误，这也会很丑陋：

```
Error in eval(substitute(expr), data, enclos = parent.frame()) : 
  not that many frames on the stack 
```

这告诉我我真的做错了什么。根据我对 RI 的了解，我认为必须有一种优雅的方式来做到这一点，但它是什么？

输入：

```
d. <- structure(list(time = structure(c(15030.5520833333, 15030.5555555556, 
15030.5590277778, 15030.5625, 15030.5659722222), format = structure(c("m/d/y", 
"h:m:s"), .Names = c("dates", "times")), origin = structure(c(1, 
1, 1970), .Names = c("month", "day", "year")), class = c("chron", 
"dates", "times")), Port.1 = c(0.359747, 0.418139, 0.417459, 
0.418139, 0.417459), Port.1.1 = c(1.3, 11.8, 11.9, 12, 12.1), 
    Port.2 = c(0.288837, 0.335544, 0.335544, 0.335544, 0.335544
    ), Port.2.1 = c(2.3, 13, 13.2, 13.3, 13.4), Port.3 = c(0.253942, 
    0.358257, 0.358257, 0.358257, 0.359002), Port.3.1 = c(2, 
    12.6, 12.7, 12.9, 13.1), Port.4 = c(0.352269, 0.410609, 0.410609, 
    0.410609, 0.410609), Port.4.1 = c(5.9, 17.5, 17.6, 17.7, 
    17.9), Port.5 = c(0L, 0L, 0L, 0L, 0L)), .Names = c("time", 
"Port.1", "Port.1.1", "Port.2", "Port.2.1", "Port.3", "Port.3.1", 
"Port.4", "Port.4.1", "Port.5"), row.names = c(NA, 5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T18:32:58.097

你的方法有很多问题。一般的建议是不要直接按照您认为的最终语句应该是什么样子，而是以增量方式工作，否则会使调试（理解和修复错误）变得非常困难。

例如，您可以从以下内容开始：

```
aggregate(d., list(Time=trunc(d.$time, "00:10:00")), identity) 
```

注意到您的拆分变量有问题。显然`aggregate`不喜欢使用此类数据。`Time`您可以通过转换为数字来解决此问题：

```
aggregate(d., list(Time=as.numeric(trunc(d.$time, "00:10:00"))), identity) 
```

那你可以试试

```
aggregate(d., list(Time=as.numeric(trunc(d.$time, "00:10:00"))), apply.fun) 
```

`apply.fun`您的用户定义函数在哪里。这失败了一个相当严厉的消息，但正在运行

```
aggregate(d., list(Time=as.numeric(trunc(d.$time, "00:10:00"))), print) 
```

有助于实现`FUN`内部函数`aggregate`不会为每个数据块调用一次（并传递一个 data.frame），而是为数据块的每一列调用一次（并传递一个未命名的向量），因此您无法得到你想要使用的结果`aggregate`。

相反，您可以使用包中的`ddply`函数`plyr`。在那里，应用于每个部分的函数确实会收到一个 data.frame，因此您可以执行以下操作：

```
apply.fun <- function(dat) with(dat, data.frame(Time=time[1],
                                                mean(Port.1),
                                                mean(Port.1.1),
                                                mean(Port.2),
                                                mean(Port.2.1),
                                                mean(Port.3),
                                                mean(Port.3.1),
                                                mean(Port.4),
                                                mean(Port.4.1),
                                                Runoff=sum(Port.5)))

d.$Time <- as.numeric(trunc(d.$time, "00:10:00"))
library(plyr)
ddply(d., "Time", apply.fun)

#            Time mean.Port.1\. mean.Port.1.1\. mean.Port.2\. mean.Port.2.1.
# 1 15030.5520833    0.4061886           9.82    0.3262026          11.04
#   mean.Port.3\. mean.Port.3.1\. mean.Port.4\. mean.Port.4.1\. Runoff
# 1     0.337543          10.66     0.398941          15.32      0 
```

**编辑：**在下面的第一条评论中跟进@roysc 问题，您可以执行以下操作：

```
apply.fun <- function(dat) {
  out <- as.data.frame(lapply(dat, mean))
  out$Time <- dat$time[1]
  out$Runoff <- sum(dat$Port.5)
  return(out)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T18:36:35.280

使用`by`而不是`aggregate`.

If`f`与您的匿名函数相同，只是其中`list`的内容被替换为`data.frame`，`f <- function(dat) with(dat, data.frame(...whatever...))`然后：

```
d.by <- by(d., list(Time = trunc(d.$time, "00:10:00")), f)
d.rbind <- do.call("rbind", d.by) # bind rows together

# fix up row and column names
rownames(d.rbind) <- NULL
colnames(d.rbind) <- colnames(d.) 
```

`f`如果添加名称本身而不是仅添加名称，我们可以删除最后一个分配列名称的语句`Time`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:30:51.943

这个怎么样？

```
library(plyr)
ddply(d., .(time), colMeans) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-14T22:08:56.583

另一种选择是使用一系列步骤，通过交替运行 aggregate() 然后使用 merge() 在基础 R 中完成相同的任务，如下所示：

```
agMeans_df <- aggregate(cbind(Port.1,Port1.1,Port.2,Port.2.2,Port.3,Port.3.1,Port.4,Port4.1)~timevar,data=d,mean)
agSum_df <- aggregate(Port.5~timevar,data=d,sum)
ag_all_df <- merge(agMeans_df,agSum_df,by="timevar") 
```

我忽略了其他回复中提出的问题，即组向量需要属于正确的类（此处为“timevar”），并且列的顺序可能会更改。*如果您想在同一*列上运行多个不同的函数以避免混淆具有相同名称的两个聚合列，则还需要在 merge() 之前进行一些重命名。

# android - 在 Android 的主要活动中从侦听器更新和检索位置数据

> ID：11602153
> 
> 赞同：0
> 
> 时间：2012-07-22T16:50:18.217
> 
> 标签：android, gps, location

已在主活动中启动了位置侦听器，并希望与作为主活动扩展的其他类共享位置更新。尝试了几种不同的变体，但似乎没有任何工作可以完成。Toast 消息会随着 Intent 的每次更改而显示，当 GPS 在 Eclipse 中更新时，只需要数据。寻求一点帮助或不同的观点。在 Android 方面的专业知识有限，但相信这可以在主要活动中完成，而不是在单独的线程或 AsyncTask 中完成。感谢您的帮助！

这是主要设置的位置管理器。

```
private void initSystems() {
    // Location Manager
    LocationManager lm;
    String context = Context.LOCATION_SERVICE;
    lm = (LocationManager)getSystemService(context);
    // Set up Location Manager
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    Provider = lm.getBestProvider(criteria, true);
    Location location = lm.getLastKnownLocation(Provider);
    updateWithNewLocation(location);
    lm.requestLocationUpdates(Provider, 100, 10,locListener);
} 
```

这是侦听器和更新

```
private final LocationListener locListener = new LocationListener() {
    public void onLocationChanged(Location loc) {
        updateWithNewLocation(loc);
       Toast.makeText(getApplicationContext(), "onLocationChanged", Toast.LENGTH_SHORT).show();
    }

    public void onProviderDisabled(String Provider){
        updateWithNewLocation(null);
    }

    public void onProviderEnabled(String Provider){ }
    public void onStatusChanged(String Provider, int status, Bundle extras){
        Toast.makeText(getApplicationContext(), "onStatusChanged", Toast.LENGTH_SHORT).show();  
    }
};

private double updateWithNewLocation(Location loc) {
    double loc_update = 0;
    if (loc != null) {
        lat = loc.getLatitude();
        lng =- loc.getLongitude();
        loc_update = lat+lng;
        Toast.makeText(getApplicationContext(), "Lat & Long" + lat + " "+lng, Toast.LENGTH_LONG).show();
        Log.d(DEBUG_TAG, "Lat & Long " + lat + " "+lng);
        return loc_update;
    }
    else {
        Toast.makeText(getApplicationContext(), "Unable to Obtain GPS Data", Toast.LENGTH_SHORT).show();
        Log.d(DEBUG_TAG, "Unable to Obtain GPS Data");
    }
    return loc_update;
} 
```

# javascript - VB.NET - WebBrowser 不在 html 源代码中显示由 javascript 创建的 html 元素

> ID：11602155
> 
> 赞同：2
> 
> 时间：2012-07-22T16:50:30.570
> 
> 标签：javascript, vb.net, browser, code-injection

我在处理一些仅在一些 javascript 注入后才显示的 HTML 元素时遇到了困难。

更具体地说，在我的 WebBrowser 类中加载的 html 页面有一个图像。当我以编程方式单击它时，它会创建一些标签，上面有文本框和按钮。

问题是这些标签无法解析，因为它们是在 javascript 中创建的，因此不会显示在页面源代码中。当我检查 javascript 元素时，我只能在 Firefox 浏览器中看到它们，但它们都是灰色的，就像隐藏的一样。

我想更改文本字段的值并单击 javascript 生成的标签中的按钮。

我已经检查了 HtmlElementCollection 并且（如上所述）它们无处可寻。

有什么想法或帮助吗？

附言。如果我通过某种方式获得坐标然后以编程方式将鼠标移动到那里怎么办？虽然，这是我不喜欢的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:55:27.763

1.  动态生成的元素/内容在 html 源代码中不可用。

2.  [您可以通过jquery将事件附加到动态生成](http://api.jquery.com/on/)[**的**](http://api.jquery.com/on/)html 元素[](http://api.jquery.com/on/)

 *** * *

```
<body>
<p>Click me!</p>
<script>
    var count = 0;
    $("body").on("click", "p", function(){
      $(this).after("<p>Another paragraph! "+(++count)+"</p>");
    });
</script> 
```**

# jsf - 是否可以在 primefaces 内嵌编辑数据表中批量更新？

> ID：11602160
> 
> 赞同：0
> 
> 时间：2012-07-22T16:51:25.577
> 
> 标签：jsf, datatable, primefaces

我在我的应用程序中使用 primefaces 内嵌编辑数据表。我需要通过勾选相应的复选框来更新一些记录，有什么办法可以处理 primefaces 吗？提前致谢

# android - Eclipse->File->New->Project->Android->Android Project 中似乎没有“Android Project”选项

> ID：11602163
> 
> 赞同：-1
> 
> 时间：2012-07-22T16:51:41.397
> 
> 标签：android, eclipse

我是 Android 新手，我已经安装了最新版本的 Android SDK 和 eclipse。

当我尝试从 File->New->project->Android 创建新项目时，我没有看到“Android Project”选项。我已经安装了 eclipse-SDK-4.2-win32、ADT 插件 20.0.1 和 Android 4.1我正在使用 Windows 7

我在新项目弹出窗口中有选项 - > Android

```
 ->>>>Android Application Project
  ->>>>Android Project from Existion Code
  ->>>>Android Sample project
  ->>>>Android Test Project 
```

没有选项 Android Project

选项“Android 应用程序项目”和“Android 项目”是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:57:12.500

是的，Android Project 最近在 Android Application Project 中更名了。

# facebook - Facebook Graph API：/userId/subscribers 不应该列出非朋友的订阅者吗？

> ID：11602164
> 
> 赞同：0
> 
> 时间：2012-07-22T16:51:57.217
> 
> 标签：facebook, facebook-graph-api, subscription

来自文档：[https ://developers.facebook.com/docs/reference/api/user/#subscribers](https://developers.facebook.com/docs/reference/api/user/#subscribers)

我在 Graph API Explorer 上进行测试，发现即使我可以通过[http://www.facebook.com/userId/subscribers](http://www.facebook.com/userId/subscribers)页面看到他们，我也无法通过该 API 连接从非朋友的人那里获取公共订阅者列表.

它只检索`summary`带有 的信息`total_count`，不检索`data`。我错过了什么还是设计不支持？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T20:03:52.907

是的，这是设计使然，API 不反映公共接口，最好不要这样想。始终查看所需的权限

> 您可以通过使用 user_subscriptions 或 friends_subscriptions 权限的用户 access_token 向 /USER_ID/subscribers 发出 HTTP GET 请求来为您的应用程序读取用户的订阅者。

因此，正如它所说，您只能读取经过身份验证的用户和具有正确权限的用户的朋友。

# linux - 为什么以下行不打印当前目录中文件的 3 倍？

> ID：11602167
> 
> 赞同：-2
> 
> 时间：2012-07-22T16:52:13.670
> 
> 标签：linux

为什么以下行只打印当前目录中的文件一次（而不是三次）？

这是考试中的一道题。如果您知道一些可以阅读它的来源，那就太好了

```
cp /bin/ls blah
cat blah blah blah >bbb
chmod u+x bbb
bbb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:57:48.840

~~你需要类似的东西：~~

 ~~```
cp /bin/ls/blah .
cat blah blah blah >bbb
chmod u+x bbb
./bbb 
```~~ 

第一个区别是参数的数量[`cp`](http://linux.die.net/man/1/cp)。您需要指定目的地和来源。第二个区别是除非路径中有当前目录，否则需要使用`./command`而不是仅仅`command`执行驻留在当前目录中的程序。

除此之外，重要的是要知道`/bin/ls/blah`. 如果该文件是包含以下内容的 bash 脚本：

```
#!/bin/ls
ls 
```

~~此答案开头给出的修改后的代码块将按预期工作（打印当前目录内容的 3 倍）。如果文件是二进制文件，它很可能不会工作，因为您无法连接二进制文件并期望生成的文件表现为原始二进制文件的 3 次顺序执行。~~

**更新：**编辑后，答案明显改变。现在，只有最后一部分适用于它。由于`/bin/ls`是二进制文件，因此您不能连接二进制文件并期望生成的文件表现为原始二进制文件的 3 次顺序执行。但是，如果您使用的是脚本而不是二进制文件，则该示例将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:56:07.233

ELF 二进制文件具有明确的大小和结构，因此无法执行二进制文件中`ls`包含的其他两个副本`bbb`。

# jquery - 单选按钮作为图像，选中和未选中状态（jquery）

> ID：11602173
> 
> 赞同：1
> 
> 时间：2012-07-22T16:52:45.890
> 
> 标签：jquery, css

我对 jquery 很陌生，我一直在寻找几个小时试图将单选按钮创建为图像 - 用户可以单击以填写调查表。我不想使用 jqueryui，因为图像很难用 jquery 和 css 重新创建。

10 个问题 - 每个问题 3 个答案。

我终于找到了这个似乎最有用的 [http://screwdefaultbuttons.com/](http://screwdefaultbuttons.com/)

我想为每个单选按钮显示 3 个单独的图像，并在选中其中任何一个时显示 3 个图像。

有人可以帮忙吗？现在它只有一张选中的图形和一张未选中的图形。

如果有人有不同的解决方案——那也很有帮助！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:07:12.290

哇，这花了一段时间，在一个好朋友的帮助下，我想到了这个。

我有多组单选按钮，每个组的名称相同，组中每个单选按钮的 id 不同。

```
 <input type="radio" class="question" name="question1" id="q1A" value="A" /><label class="answer" for="q1A">Answer1</label>
          <input type="radio" class="question" name="question1" id="q1B" value="B" /><label class="answer" for="q1B">Answer2</label>
          <input type="radio" class="question" name="question1" id="q1C" value="C" /><label class="answer" for="q1C">Answer3</label> 
```

然后在我的css中我创建了一个隐藏类

```
.input_hidden {
position: absolute;
left: -9999px; 
```

}

使用适当的图像、悬停等设置标签的类别。

对于 jquery 隐藏所有单选按钮 - 在文档加载时执行。

```
$('.question:radio').addClass('input_hidden'); 
```

所以现在只显示标签而不显示单选按钮。当您单击图形时，将选择单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:10:31.210

您可以为每个不同样式的图像设置单独的类，并在 css 中为该类添加图像。

# regex - 用于检测彼此远离的数字的正则表达式？

> ID：11602174
> 
> 赞同：0
> 
> 时间：2012-07-22T16:52:48.730
> 
> 标签：regex, ip, port, range

所以基本上我想检测是否在这些字符串中：

你好 123 我的 222 亲爱的 112 巨魔 12 8889

192.1.1.254:10000

数字的格式如下：[0 到 255][ANYTHING][0 到 255][ANYTHING][0 到 255][ANYTHING][0 到 255][ANYTHING][0 到 65536]

有谁知道我如何构建这样的正则表达式？

它用于检测是否有人以不寻常的格式发布 IP:Port 以绕过默认的 ip:port 过滤器。

编辑：至于第一条评论：我不知道正则表达式，我尝试过的是：

```
if(regex_match("192.168 najlepszy serwer SAMP!!1 1 join1!! 8080","/^[0-2](*)?[0-5](*)?[0-5](*).(*)[0-2](*)?[0-5](*)?[0-5](*).(*)[0-2](*)?[0-5](*)?[0-5](*).(*)[0-2](*)?[0-5](*)?[0-5](*)?$/"))
{
    print("Cannot send message");
}
else
{
    print("New message for everyone! :)");
} 
```

和其他一些不工作的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:08:11.603

如果您不想检查确切范围使您的生活复杂化，那么简单的正则表达式将是：

```
/^.*(\d)+.+(\d)+.+(\d)+.+(\d)+.+(\d)+.*$/ 
```

前四个**(\d)+**部分可以替换为更复杂的 0-255 范围检查：

```
(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?) 
```

最后一个**(\d)+**替换为下一个端口范围检查：

```
(6553[0-5]|655[0-2]\d|65[0-4]\d\d|6[0-4]\d\d\d|[1-5]\d\d\d\d|[1-9]\d{0,3}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:26:06.983

在一般情况下，不可能将您的模式准确、简单和直接地表示为正则表达式。原因是数字范围。像“在这个地方任何具有从 a 到 b 的值的整数”之类的东西太复杂了。正则表达式由有限状态机执行，这些（理论上的）野兽（基本上）只能逐个字符地查看字符串。因此，您可以匹配“忽略所有字符，直到找到第一个数字，然后检查第一个数字后面是否最多再有两个数字”之类的内容。

作为一种解决方法，您可以尝试构建一个覆盖您所需值范围的可能数字模式的交替列表（在极端情况下，列出每个值，如`\b(?:1|2|3|4|...|154|155|...|255)\b`）。我有一个范围为 0-255 的模式，但我没有可能的端口号范围。所以第一个近似值可能是（实际上，这只是一个近似值，没有经过彻底测试）：

```
\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b.*\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b.*\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b.*\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b[^0-9]*[0-9]{1,5} 
```

在上面的模式`(?: .... )`中意味着一个害羞的群体（不记得反向引用）并且`\b`意味着单词边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:04:48.453

你确定你需要正则表达式吗？在我看来，你不需要正则表达式。只需将数字分成由非数字字符分隔的组。然后分析。

什么语言？

至于实际寻找有效范围，看看这个； [http://www.regular-expressions.info/numericranges.html](http://www.regular-expressions.info/numericranges.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:10:40.230

我会做这个简单的正则表达式

```
((\d|\D)+)* 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T17:44:52.393

我建议您阅读正则表达式语法。对于初学者来说`.`是特殊的并且匹配任何字符。做类似的事情`[0-2][0-5][0-5]`也不会捕捉到类似的事情，`192`因为 9 不在 0-5 范围内。

根据您的要求，这是一个应该大致做您想要的正则表达式

`([0-2]?\d{1,2}).*([0-2]?\d{1,2}).*([0-2]?\d{1,2}).*([0-2]?\d{1,2}).*(\d{1,5})?`

每个`([0-2]?\d{1,2})`部分将匹配 1 或 2 个数字，前面可选 0、1 或 2。每个部分`()`将捕获一个组，然后您可以使用 Regex 引擎对其进行检查。您将需要检查该组，因为每个部分的正则表达式将匹配 255 以上的数字（特别是 256-299）。

最后一组`(\d{1,5})?`是捕获端口号，您必须再次检查它，因为它将捕获任何 1 到 5 位数字（因此是`{1,5}`）。使该`?`组可选，如果您希望它必须与端口号匹配，请将其删除。

至于在 C 中做 Regex，我没有太多经验，但应该有一种方法来获取所有分组匹配并检查它们。不幸的是，它们将是字符串，因此您必须将它们转换为整数才能检查它们。

# java - 如何自动调整java swing元素的大小？

> ID：11602177
> 
> 赞同：1
> 
> 时间：2012-07-22T16:53:17.170
> 
> 标签：java, swing, layout

我正在尝试自动调整应用程序左侧的大小。我在左边有一个 JTextField 和一个 JTree，在右边有 3 个 JButton。但我只是不知道如何使左侧自动调整大小。

我使用 Netbeans GUI Creator（或其他任何名称）完成了此操作，但没有 Netbeans 我不知道如何操作。（我通常不使用 Netbeans 进行编程，这只是一个例外，看看是否可以使用 Swing 进行编程。

这是 Netbeans 创建的代码：http: [//pastebin.com/ERwY4rBC](http://pastebin.com/ERwY4rBC) 这并不是代码完全无法使用，而是我想手动尝试一下。

GroupLayout 看起来不错，但 Oracle 网站说它主要用于 GUI 工具。那么，使用 GroupLayout 将不是“类似 Java”，或者我必须如何理解它？或者有没有更好的方法在没有 GroupLayout 的情况下实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:16:38.907

> 因此，使用 GroupLayout 将不是“Java 之类”，或者我必须如何理解它

`GroupLayout`简而言之，手工编码真的很难，并且主要导致大量代码。但这不是“不像 Java”，它只是不是你想手工做的事情，而且之后的代码很难阅读，因为它相当冗长。

[使用一些“嵌套布局”](https://stackoverflow.com/questions/5621338/about-swing-and-jtable/5630271#5630271)可以轻松实现您尝试实现的目标（根据屏幕截图）。如果您的主面板使用`BorderLayout`您将左侧可调整大小的面板放在其中`BorderLayout.CENTER`，而另一个不可调整大小的面板在`BorderLayout.EAST`您将获得所需的调整大小行为。

然后你只需要决定`LayoutManager`为这些单独的面板使用哪个。我认为 the`BoxLayout`和`FlowLayout`will 都做得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T19:45:49.530

帮自己一个忙，使用[MigLayout](http://www.miglayout.com/)来满足您的所有布局需求。手工编写UI特别方便。

他们的网站上有一个[WebStart](http://www.migcalendar.com/miglayout/swingdemoapp.jnlp)应用程序，它使用提供的代码示例演示不同的布局情况。

# jquery - 当元素与ajax displaytag一起出现时，jquery附加到元素

> ID：11602179
> 
> 赞同：0
> 
> 时间：2012-07-22T16:53:55.617
> 
> 标签：jquery

假设我可能（但也可能没有）`order`在我的 DOM 中有一个带有类的元素。它可能在页面加载时创建，也可能在成功的 ajax 请求后创建。我的问题是，我怎样才能添加一些实时事件，它将基于它的类附加到我的元素中？

流程是这样的：

1.打开页面，jQuery 搜索带有 class 的元素`order`，如果找到，则向它们附加一些内容（对于这个问题，让我们说它的文本`"text string"`
2.我做一个 ajax 请求
3.在 ajax 请求之后，jQuery 再次搜索 class`order`并在找到时追加

有一个条件，我不想在ajax请求之后触发任何搜索元素的`.live()`函数，如果可能的话，我更喜欢函数的一些魔术。

**编辑**确切的问题

我真正想要实现的是将 img 附加到新加载的 DOM 中的某个类。
从一开始就：

1.  我尝试使用 displaytag 和 ajax 实现可排序/可分页的表。

2.  然后添加（也是 Ajax）搜索列表过滤。

3.  使用 Ajax 重新加载表格后，附加图像（向上或向下图标取决于排序类型）

结果见我的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:18:30.250

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:22:52.990

使用 ajaxComplete

```
$('body').ajaxComplete(function() {
  $('.order').text('text string');
  //or if you wish to append
  /*$('.order').append('text string');*/
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:27:35.250

Firstly, to implement ajax sorting / pagination I used [Jquery DisplayTag Ajax pluging](http://archive.plugins.jquery.com/project/displaytag-ajax), using it is simple, just surround piece of code with `div` and run displayTagAjax() function on it.

But then, I also wanted Ajaxable table filtering, that was tricky. First step was to create a separate `jsp` page with only display tag in it:

**Table.jsp**

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@taglib uri="http://displaytag.sf.net" prefix="display" %>
<display:table class="noSelect" id="modelsList" name="${modelsList}" pagesize="33" cellspacing="0"
           cellpadding="10" requestURI="">
//
//Columns here
//
</display:table> 
```

Then including this page in MainPage:

**Main.jsp**

```
<select id="searchbox-model-type>
<!-- options here -->
</select>
<select id="searchbox-domain>
<!-- options here -->
</select>
<!-- some more code -->
<div id="model-list">
    <jsp:include page="Table.jsp"/>
</div> 
```

After this steps, we need to fill up our table, so we need a Controller which will change our jsp page to plain html (with static, not ajaxable links yet):

**MyController**

```
@RequestMapping(value = "/ModelListTable/modelTypeId/{modelTypeId}/domain/{domainId}")
public String getTable( Model model, @PathVariable Long modelTypeId, @PathVariable Integer domainId )
{
    if ( modelTypeId != -1 && domainId != -1 )
    {
        model.addAttribute( "modelsList", modelManager.getModelList( modelTypeId, domainId ) );
    } else if ( modelTypeId != -1 )
    {
        model.addAttribute( "modelsList", modelManager.getModelList( modelTypeId ) );
    } else if ( domainId != -1 )
    {
        model.addAttribute( "modelsList", modelManager.getModelList( domainId ) );
    } else
    {
        model.addAttribute( "modelsList", modelManager.getModelList() );
    }
    return "Table";
} 
```

I dont know if it is good piece of code I wrote, but you'll get an idea, basically I'm making select from DB based on the values passed by `select`, -1 stands for no selected. Next step was to implement proper function in `js` file, which will make Ajax GET from my server:

```
jQuery( function ()
{
jQuery.noConflict();

loadTable();
});

function loadTable()
{
    var domainId = jQuery( "#searchbox-domain option:selected" ).val();
    var modelTypeId = jQuery( "#searchbox-model-type option:selected" ).val();
    var url = "/Models/ModelListTable/modelTypeId/" + modelTypeId + "/domain/" + domainId;
    jQuery.ajax( url, {
        type:"GET",
        responseType:"text/html"
    } ).done( function ( data )
        {
            jQuery( "#model-list" ).html( data );
            jQuery( "#model-list" ).displayTagAjax( url );
        } );
} 
```

Then I had to change displayTagAjax function, I append the url which is equal to **Controller** mapping URI, so we will always get filtered list when sorting/chaning page:

```
$.fn.displayTagAjax = function ( pageUrl )
{
//omitted some code
  $.each( links, function ()
    {
    var url = pageUrl + $( this ).attr( "href" );
//rest of the code 
```

Finally I appended my images to newly created elements in ajax call, also in this plugin :) :

```
jQuery.ajax(
    {
       url:url,
       success:function ( data )
       {
         $( this ).html( data );
         $( this ).find( '.order1' ).append( upIcon );
         $( this ).find( '.order2' ).append( downIcon );
         $( this ).displayTagAjax( pageUrl );
       },
       context:ctx
     } ); 
```

And thats it, full Ajaxable display tag table, with dynamic filtering results and fancy icons for ordering :)

# python - 使用数据存储访问 blobstore 值 (python)

> ID：11602181
> 
> 赞同：1
> 
> 时间：2012-07-22T16:54:20.103
> 
> 标签：python, google-app-engine, blobstore

我要做的就是通过使用存储在数据存储中的 blobreference 属性来弄清楚如何为 blob 提供服务。

```
class data(webapp2.RequestHandler): 
def get(self):
    a = db.GqlQuery("SELECT * FROM UserPhoto")
    blob = a[0].blob_key()

    self.redirect('/Serve/%s' % blob())

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
def get(self, photo_key):
    if not blobstore.get(photo_key):
        self.error(404)
    else:
        self.send_blob(photo_key) 
```

我得到的错误是

```
TypeError: 'BlobInfo' object is not callable
INFO     2012-07-22 16:28:42,342 dev_appserver.py:2884] "GET /data HTTP/1.1" 500 - 
```

现在我完全迷路了。

我相当确定我离我不远，因为我的代码只是从教程的工作版本略微修改，但我尝试了我能想到的一切，我希望能朝着正确的方向轻推。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:00:09.737

在重定向行中更改`blob()`为。`blob`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:36:02.580

不完全是一个答案（mjibson 邮寄了它 - 你正在尝试执行 blob），但由于 Python 2.7 和 WSGI 运行时，你可以在你的处理程序代码中放置一个“import pdb; pdb.set_trace()”并检查事情从实时运行的（本地）实例中。

# couchdb - 复制到 iriscouch 失败

> ID：11602182
> 
> 赞同：2
> 
> 时间：2012-07-22T16:54:21.553
> 
> 标签：couchdb, couchapp

我正在尝试使用 couchapp、couchdb 构建示例应用程序。我还使用 jquery.couch.js 插件与我的本地 couchdb 进行通信。但是，当我尝试将其复制到 iriscouch.com 上的远程沙发上时，出现以下错误：

```
Replication failed: {error,
{{badarg,
     [{erlang,list_to_existing_atom,["data_size"]},
      {couch_rep,'-dbinfo/1-lc$^0/1-0-',1},
      {couch_rep,'-dbinfo/1-lc$^0/1-0-',1},
      {couch_rep,do_init,1},
      {couch_rep,init,1},
      {gen_server,init_it,6},
      {proc_lib,init_p_do_apply,3}]},
 {child,undefined,"6f5beff2bd381e02b602cee2e8e1e86d",
     {gen_server,start_link,
         [couch_rep,
          ["6f5beff2bd381e02b602cee2e8e1e86d",
           {[{<<"source">>,<<"zwaroop">>},
             {<<"target">>,
              <<"http://username:password@swaroopsm.iriscouch.com/zwaroop">>}]},
           {user_ctx,<<"root">>,
               [<<"_admin">>],
               <<"{couch_httpd_auth, cookie_authentication_handler}">>}],
          []]},
     temporary,1,worker,
     [couch_rep]}}} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:57:45.157

如果您使用的是 Ubuntu 12.04（CouchDB v1.0.1 附带），您可以使用 PPA 而不是从源代码安装 CouchDB。例如，为了精确起见， [https](https://launchpad.net/~novacut/+archive/daily) ://launchpad.net/~novacut/+archive/daily 有一个 1.2.0 的反向端口；我安装了它

```
$ sudo apt-add-repository ppa:novacut/daily
$ sudo apt-get update
$ sudo apt-get install couchdb 
```

升级到 1.2.0 后问题解决了。

**编辑：** Novacut 存储库不再为 托管包`couchdb`，因为 1.5.0 版已包含在 Ubuntu Trusty ( [http://packages.ubuntu.com/trusty/couchdb](http://packages.ubuntu.com/trusty/couchdb) ) 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:56:56.423

我想知道这是不是版本不匹配？您在本地系统上使用的是什么版本的 CouchDB？

无论如何，一个快速的解决方法是编辑 CouchDB 的源代码并`data_size`在代码中的任何位置插入。

例如，`src/couchdb/couch_doc.erl`

```
-spec to_path(#doc{}) -> path().
to_path(#doc{revs={Start, RevIds}}=Doc) ->
    data_size, % This no-op expression allows list_to_existing_atom
    [Branch] = to_branch(Doc, lists:reverse(RevIds)),
    {Start - length(RevIds) + 1, Branch}. 
```

但是希望我们可以通过识别您的版本找到比这更好的东西。

# iphone - Cocos2d 花栗鼠重力属性

> ID：11602183
> 
> 赞同：1
> 
> 时间：2012-07-22T16:54:34.667
> 
> 标签：iphone, cocos2d-iphone, game-engine, game-physics, chipmunk

当空间中的所有动态物体都被吸引到位于屏幕中心的静态物体时，我需要模仿径向（行星）重力。我设置

空间->重力 = ccp(0, 0);

我通过在 -init 中调用它们的创建方法来创建动态主体，这将从 0:12开始像这里[http://www.youtube.com/watch?v=2BxkbXfEWg4&feature=player_embedded](http://www.youtube.com/watch?v=2BxkbXfEWg4&feature=player_embedded)一样从其他方面落在这个中央主体上。

问题：

1.  如何为每个对象单独设置重力矢量？我计划根据物体坐标的变化实时重新分配重力矢量。
2.  什么实际上具有重力属性：精灵，身体或形状？
3.  是不是更简单的方法来实现这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:58:10.127

Scott Lembcke gives the answer on Cocos2d forum here:

[http://www.cocos2d-iphone.org/forum/topic/35621?replies=4#post-171187](http://www.cocos2d-iphone.org/forum/topic/35621?replies=4#post-171187)

# android - 安卓 I/O 事件

> ID：11602186
> 
> 赞同：0
> 
> 时间：2012-07-22T16:54:45.080
> 
> 标签：android, linux, input

键盘输入和硬件按钮等 I/O 事件通过 /dev/input/event* 处理。设备旋转如何？什么是低级机制，我们如何像 /dev/input/event* 那样进行 record-n-replay？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:18:22.913

我没有精确的机制，但总体思路是旋转由加速度计处理。我相当但不完全确定它也可以通过 /dev/input/event 机制获得，但如果不是，它可能是其他一些类似的方法（即 - 字符设备）。

还要注意两点。首先是您不必实际编写自己的内核级驱动程序来模仿精确的协议。您可以编写自己的协议，然后编写用户级驱动程序将这些事件驱动到 Dalvik 基础架构中。

沙查尔

# matlab - 使用按钮在 MATLAB 的列表框指南中添加/删除数值并使用按钮更新它

> ID：11602187
> 
> 赞同：0
> 
> 时间：2012-07-22T16:54:48.060
> 
> 标签：matlab

在用户选择值的数量后，我需要添加/删除 MATLAB 指南列表框中显示的数值。我还需要使用按下的按钮更新列表框值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:31:19.233

在您的打开函数的某个地方，在 guidata(hObject, figure1) 行之前，您应该有一些变量来跟踪您的数字。声明类似的东西

```
handles.numbers = {}; 
```

一般来说，如果你有一个元胞数组 cell_array，你可以像这样设置列表框。在您的按钮的回调中，首先更新单元格数组，然后使用此行将其加载到您的列表框中

```
set(handles.tag_of_listbox, 'String', handles.numbers, 'Value', 1); 
```

# objective-c - 基于 NSDocument 的应用程序和 NSToolbar

> ID：11602200
> 
> 赞同：2
> 
> 时间：2012-07-22T16:56:58.467
> 
> 标签：objective-c, cocoa, nsdocument, nstoolbar, nspersistentdocument

我有基于 NSDocument (NSPersistentDocument) 的应用程序，在应用程序中我可以（通常）创建多个文档。

主文档窗口（基于 NSPersistentDocument）已添加 IB、工具栏。在代码中，我使用方法`insertItemWithItemIdentifier`和`- (NSToolbarItem *)toolbar:(NSToolbar *)toolbar itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag`.

代码示例：

```
[_toolbar insertItemWithItemIdentifier:@"addTape" atIndex:2]; 
```

和

```
- (NSToolbarItem *)toolbar:(NSToolbar *)toolbar itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag {
    NSToolbarItem *item =nil;

    if ([itemIdentifier isEqual:@"addTape"]) {
        item = [[NSToolbarItem alloc] initWithItemIdentifier: itemIdentifier];
        item.label = NSLocalizedString(@"Add Tape",@"Add Tape");
        item.paletteLabel = NSLocalizedString(@"Add Tape",@"Add Tape");
        item.toolTip = NSLocalizedString(@"Adds new tape",@"Adds new tape");
        item.image = [NSImage imageNamed:@"NSAddTemplate"];
        item.target = self;
        item.action = @selector(addTape:);
        item.tag = 101;         
    }
} 
```

在我只打开一个文档之前，一切都是正确的。当我在第一个文档窗口工具栏上打开第二个文档（或创建新文档）时，工具栏项目加倍（打开第三个文档后，第一个窗口上的项目增加三倍，第二个窗口增加一倍，依此类推）。

编辑：我注意到，`itemForItemIdentifier`每次我尝试添加工具栏项时，都会在每个窗口上调用它。例如：如果我有两个窗口（两个打开的文档），并且在一个窗口上我尝试添加一个按钮`itemForItemIdentifier`被调用两次。
这对我来说很奇怪，因为每个文档都有自己的工具栏，其中委托仅设置为此文档。

我不知道我做错了什么。也许有人会指出我犯错的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:00:18.920

您通常不会自己插入工具栏项；实现委托方法`toolbarAllowedItemIdentifiers:`，`toolbarDefaultItemIdentifiers:`并且工具栏将根据这些列表进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:32:41.080

我找到了解决方案：我不能使用从 nib 创建的工具栏，因为每个创建的这个方法工具栏都有相同的标识符。当我在代码中使用不同的标识符创建工具栏时，问题就消失了。

# c# - 是否有设置以便在发布时数据库被发布中的数据库覆盖

> ID：11602203
> 
> 赞同：0
> 
> 时间：2012-07-22T16:57:14.747
> 
> 标签：c#, visual-studio, sql-server-ce

我有一个包含 SQL Server Compact 数据库的项目。

1.  我构建了它内置的解决方案`bin/Release`。
2.  然后我将项目发布`bin/Release`到我安装它的文件服务器目录。
3.  然后，我通过 Winforms 在已发布的应用程序文件中向数据库添加一些行，然后使用这些额外的行更新其数据库。
4.  然后我回到 Visual Studio 中的解决方案，向表单添加一些按钮，并向其数据库添加一些垃圾记录。
5.  然后我重建并将这个新版本发布到文件服务器并运行应用程序

我注意到的是，来自 4 的新按钮现在在表单上，​​但我在 4 中添加的垃圾行没有 - 数据库保留在我将其留在 3 中的状态。

在解决方案中是否有一个设置，我可以更改，而不是保留应用程序数据库，它们会被解决方案`bin/Release`文件中的数据库覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:03:06.483

右键单击 Visual Studio 中的数据库文件，然后在“复制到输出目录”字段下选择“始终复制”。这将在您每次重建项目时将 bin/Release 文件夹中的数据库文件替换为项目文件夹中的数据库文件。

# c# - 在 web api & odata 中处理大型数据集

> ID：11602206
> 
> 赞同：5
> 
> 时间：2012-07-22T16:57:35.593
> 
> 标签：c#, asp.net, rest, odata, asp.net-web-api

最近几周我一直在使用 asp.net web api 并取得了巨大的成功。它确实帮助我为移动客户端生成了一个界面，以通过 http 进行编程。

我到了需要帮助的地步。

我有一个新的端点，它可以是一个数据库并可以返回 100K 的结果。我正在使用 OData 过滤数据并返回一组分页数据。

由于这可能发生在多个请求中，因此我担心性能。每次从数据库中返回 100K 记录并不理想。所以我有一些想法。

第一个是缓存 100K 结果并让 OData 每次都在这方面发挥作用。我正在使用 AppFabric 分布式缓存作为其负载平衡环境。然而，在 AppFabric 中缓存如此多的数据可能会导致内存复杂化，所以我认为我最好避免这种情况。

下一个选项是忘记 OData 的魔力，将我使用的过滤器发送到数据库，每次只返回所需的数据。所以换句话说，每次都击中数据库。

我可以考虑使用类似本文中概述的版本的缓存处理程序来缓存在 http 缓存中 -> [http://byterot.blogspot.ie/2012/06/aspnet-web-api-caching-handler.html](http://byterot.blogspot.ie/2012/06/aspnet-web-api-caching-handler.html)缺点其中，如果数据通过可能的另一个系统进行更新，则缓存的数据不会过期。

关于如何处理这种情况、大量数据、使用 odata 和 web api 过滤的任何其他提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:26:55.540

这个问题可能会导致各种各样的答案。也就是说，让我戴上我在 MSFT 之前的帽子，给你我的两分钱。

顾问的回答是“视情况而定”，可以很好地回答很多架构问题。答案取决于您的具体情况。一些开发人员在缓存层方面存在问题，因为还有其他事情需要考虑。符合 ACID 的数据库为您购买了很多保险，即您至少具有非常有限的最终一致性。

如果是我做这个决定，我会考虑以下几点：

*   我要定期返回多少行？
*   它们是一遍又一遍的同一行吗？
*   这在内存中有多大？（100k 的行数实际上并不多；您不希望这 100k 行每次都进入磁盘是对的，但是将它们全部保存在内存中可能不是问题；SQL Server 可能会为您执行此操作。）
*   我愿意处理什么：最终一致性？我需要其他软件来处理它吗？（人们经常对缓存感到害怕的是确保失效和插入从不同的应用程序/应用程序的不同位置正确且一致地完成。）

鉴于您已经提供的信息（分层架构，愿意尝试分布式缓存），我认为您应该追求缓存层。那里有很多很好的缓存。在我在 Microsoft 工作之前，AppFabric 为我们工作得很好，但我也处理过各种其他缓存层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:16:29.827

假设您使用实体框架，最好直接返回 EF 的 IQueryable。这样，OData 的魔力将直接作用于您的数据库。$limit 和 $take 将直接映射到您的 SQL 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:47:29.387

[我在博客http://byterot.blogspot.ie/2012/06/aspnet-web-api-caching-handler.html](http://byterot.blogspot.ie/2012/06/aspnet-web-api-caching-handler.html)中指出的缓存适用于**HTTP 缓存**，也称为输出缓存。*实际上数据本身并没有缓存在服务器上，而是在客户端或中游缓存服务器上，因此不适合您的想法。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:10:49.960

最好的方法是使用您已经在使用的分布式缓存。但是您使用的缓存提供程序，即 AppFabric，有一些限制。限制是指功能限制。查看 NCache，它是一个成熟且功能丰富的第三方分布式缓存提供程序。

如果您想了解 NCache 和 Appfabric 的区别，请查看下面的 youtube 链接，仅供参考....

[http://www.youtube.com/watch?v=3CPi1QlskrU](http://www.youtube.com/watch?v=3CPi1QlskrU)

# android - 即使连接了硬件键盘也显示软键盘

> ID：11602209
> 
> 赞同：23
> 
> 时间：2012-07-22T16:57:49.707
> 
> 标签：android, keyboard, android-softkeyboard, android-input-method, kiosk-mode

有什么方法可以显示连接了 USB 键盘的软件键盘（在我的情况下是 RFID 阅读器）？
我尝试使用 InputManager （使用这些或类似参数）强制显示它，但没有运气

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

**重要通知**- 我知道状态/系统栏中有一个按钮可以显示它，但用户（Kiosk 应用程序）看不到这个按钮。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T18:18:14.137

即使有硬键盘，您也需要覆盖 InputMethodService 方法 onEvaluateInputViewShown() 以评估为 true。请参阅[onEvaluateInputShown()和](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html#onEvaluateInputViewShown%28%29)[InputMethodService](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)的软输入视图部分。尝试创建您自己的自定义 InputMethodService 类来覆盖此方法。

编辑：[onEvaluateInputShown() 的来源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/inputmethodservice/InputMethodService.java#InputMethodService.onEvaluateInputViewShown%28%29)应该有所帮助。解决方案应该像创建您自己的扩展 InputMethodService 的类并覆盖这个方法一样简单，该方法只有几行长。确保也将您的自定义服务添加到您的清单中。

来源：

> "覆盖这个来控制何时应该向用户显示软输入区域。默认实现只在没有硬键盘或键盘被隐藏时显示输入视图。如果你改变这个返回的内容，你需要调用 updateInputViewShown () 每当返回的值可能已更改以重新评估和应用它时您自己。”

```
public boolean onEvaluateInputViewShown() {
     Configuration config = getResources().getConfiguration();
     return config.keyboard == Configuration.KEYBOARD_NOKEYS
             || config.hardKeyboardHidden == Configuration.KEYBOARDHIDDEN_YES;
} 
```

[以下](http://developer.android.com/reference/android/content/res/Configuration.html)是您可以检查的可能配置。Configuration.KEYBOARD_NOKEYS 对应无硬件键盘。如果没有硬件键盘或隐藏了硬件键盘，此方法返回 true（应显示软键盘）。删除这两项检查并简单地返回 true 应该会使软件键盘可见，即使连接了硬件键盘也是如此。

尝试（未测试）：

```
public boolean onEvaluateInputViewShown() {
     return true;
} 
```

由于此返回值不会更改，因此您无需自己调用 updateInputViewShown()。如果您以不同方式修改此方法，请务必记住此详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:51:11.487

软键盘在不同平台上可能具有不可预知的行为。首先在您的代码中，确保您有一个可编辑的输入控件。例如，如果你有一个 EditText，你可以使用：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
    .showSoftInput(myEditText, InputMethodManager.SHOW_FORCED); 
```

但是，您可以随时显示和隐藏它：

```
//show keyboard:
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
//hide keyboard :
 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

`OnCreate`您还可以在控件内部或其他一些方法中添加任何这些事件。

但是，如果由于某种原因上述任何一项失败，您最好的选择可能是使用替代键盘，例如[Compass Keyboard](http://code.google.com/p/compass-keyboard/wiki/CompassKeyboard)，

***或者***

**你甚至可以构建你的：**

*请参阅实现的[键盘示例](https://github.com/chrisboyle/sgtpuzzles/blob/master/src/name/boyle/chris/sgtpuzzles/SmallKeyboard.java)[`inputmethodservice.KeyboardView`](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)*

您可能还想查看[GingerBread 键盘源。](https://github.com/g1011999/Gingerbread-Keyboard/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-01T12:11:32.503

如果您的应用程序具有[WRITE_SECURE_SETTINGS](https://developer.android.com/reference/android/Manifest.permission.html#WRITE_SECURE_SETTINGS)权限（适用于系统应用程序或 Android Things 应用程序），它可以设置`show_ime_with_hard_keyboard`系统设置，即使插入硬键盘也将启用软键盘：

```
Settings.Secure.putInt(getContentResolver(), "show_ime_with_hard_keyboard", 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:09:05.593

这在我的应用程序中有效，有趣的是，这也是一个信息亭应用程序。

这有点剥离，我事先做了一些检查，IMM 是否为空等等。

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInputFromWindow(someInputView.getApplicationWindowToken(), InputMethodManager.SHOW_FORCED, 0); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-19T19:46:46.663

根据此[https://stackoverflow.com/a/24287780/2233069](https://stackoverflow.com/a/24287780/2233069)，我为 Kiosk 模式制定了工作解决方案。

```
boolean hardwareKeyboardPlugged=false;

....

mEditText.setOnFocusChangeListener(this);//in onCreate()

....

@Override
public void onResume() {
    //protect from barcode scanner overriding keys
    hardwareKeyboardPlugged=(getResources().getConfiguration().hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO);

    super.onResume();
}

....

@Override
public void onFocusChange(View v, boolean hasFocus) {
    if (hasFocus)
        if (hardwareKeyboardPlugged){
            //protect from barcode scanner overriding keys
            hardwareKeyboardPlugged=false;
            ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).showInputMethodPicker();
            Toast.makeText(this, "USB device detected. Turn OFF hardware keyboard to enable soft keyboard!", Toast.LENGTH_LONG).show();
        }
} 
```

# ruby-on-rails - 如何保存我的 Rails 应用程序创建的响应？

> ID：11602215
> 
> 赞同：2
> 
> 时间：2012-07-22T16:58:35.517
> 
> 标签：ruby-on-rails, file, zip

我的应用程序中有一些对象（例如任务、联系人等）的 CSV 导出。它只是像这样呈现 CSV 文件：

```
respond_to do |format|
  format.html
  format.csv { render text: Task.to_csv } # I have self.to_csv def in model
end 
```

当我毫无问题地转到“/tasks.csv”时，它会生成一个 CSV 文件。

现在我想导出所有对象并压缩它们。我正在使用 ruby​​zip gem 来创建 zip 文件。现在，我使用所有 CSV 创建 zip 文件的代码如下所示：

```
Zip::ZipFile.open("#{path_to_file}.zip", Zip::ZipFile::CREATE) do |zipfile|
  zipfile.file.open("tasks.csv", "w") { |f| f << open("http://#{request.host}:#{request.port.to_s}/tasks.csv").read }
  # the same lines for contacts and other objects
end 
```

但它似乎有问题，因为它执行了很长时间（即使 CSV 中只有一行，我也会收到 Timeout::Error），并且生成的 zip-archive 包含一些损坏的东西。

如何将我的“/tasks.csv”、“/contacts.csv”等保存为服务器上的文件（在这种情况下位于 zip-archive 内部）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:58:31.120

我做的！代码是：

```
Zip::ZipFile.open("#{path_to_file}.zip", Zip::ZipFile::CREATE) do |zipfile|

  zipfile.file.open("tasks.csv", "w") do |f| 
    CSV.open(f, "w") do |csv|
      CSV.parse(Task.to_csv) { |row| csv << row }
    end
  end

end 
```

# gxt - GXT 2.x - TreePanel / TreeStore / TreeLoader / RpcProxy

> ID：11602218
> 
> 赞同：1
> 
> 时间：2012-07-22T16:58:56.737
> 
> 标签：gxt

我正在尝试使用 RpcProxy 调用返回的简单 ModelData 填充树结构（没什么花哨的，没有 Json，没有 Hibernate，只是简单的 Java）我的代码看起来与 AsyncTree 示例非常相似）。

我使用“BasicTree”示例开始，然后修改为看起来像“AsyncTree”。我***假设***服务器端应该返回整个树（如在 BasicTree 示例中，但我看到它真的应该只返回在 Rpc 调用中传递的节点的子节点（我很傻）。

我认为我不理解 TreePanel、Tree... 等。请任何人知道一个体面的在线文档。或解释这是细节的书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:43:16.413

您会发现实际上有一个很好的简洁示例来提供 GXT 2.x 库中包含的基于异步的树内容。

将 gxt.xxx.zip 文件解压到某个地方，看看`samples\examples\src\com\extjs\gxt\samples\server\FileServiceImpl.java` 它只包含几个方法，它一次只构建 1 层树模型。

您可以在中查看相应的客户端代码`examples\src\com\extjs\gxt\samples\client\examples\treepanel\AsyncTreePanelExample.java`

# magento - magento - 删除最近添加的项目

> ID：11602219
> 
> 赞同：1
> 
> 时间：2012-07-22T16:58:59.817
> 
> 标签：magento

我想在 Magento 的首页上的购物车侧边栏中删除“最近添加的项目”。我可以从 checkout/cart/sidebar.phtml 中删除以下行，但是有没有破坏性较小的方法来做到这一点，以防我们将来想快速恢复它？

```
<?php // if(count($_items)): ?>
  <!--  <p class="block-subtitle"><?php //echo $this->__('Recently added item(s)') ?></p> -->
   <!-- <ol id="cart-sidebar" class="mini-products-list"> -->
    <?php // foreach($_items as $_item): ?>
        <?php // echo $this->getItemHtml($_item) ?>
    <?php // endforeach; ?>
   <!-- </ol> -->
   <!-- <script type="text/javascript">decorateList('cart-sidebar', 'none-recursive')</script> -->
<?php // else: ?>
   <!-- <p class="empty"><?php //echo $this->__('You have no items in your shopping cart.') ?></p> -->
<?php //endif ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:55:11.993

您只需在 local.xml 中使用以下 xml 布局更新：

```
 <remove name="cart_sidebar" /> 
```

或者

```
<action method="unsetChild"><name>cart_sidebar</name></action> 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:26:54.730

您可以使用所需的新布局创建新模板文件...

```
app/design/frontend/your_package/your_theme/template/checkout/cart/sidebar-updated.phtml 
```

然后在您的布局 xml 中，您可以将侧边栏模板更改为新版本...

```
<default>
    <reference name="cart_sidebar">
        <action method="setTemplate"><template>checkout/cart/sidebar-updated.phtml</template></action>
    </reference>
</default> 
```

然后在任何时候恢复，只需删除/注释掉这个布局 xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:27:59.287

更好的是，将其添加到您的**local.xml**

```
<remove name="left.reports.product.viewed"/>
<remove name="right.reports.product.viewed"/> 
```

更明确地说，它位于**/app/design/frontent/default/[[your-theme-name]]/layout/local.xml**中。

更容易升级路径的侵入性较小，这个答案是对我在[这里](https://web.archive.org/web/20130711062921/http://dbhoopendra.blogspot.com.au/2011/05/how-to-remove-recently-viewed-products.html)看到的更具侵入性的解决方案的改编。

# android - 修改安卓模拟器

> ID：11602220
> 
> 赞同：0
> 
> 时间：2012-07-22T16:59:07.183
> 
> 标签：android, android-emulator, qemu

有没有办法修改安卓模拟器？例如，我们能否以某种方式拦截用户对模拟器的输入并以不同的方式解释它们？此外，是否有现有工具可以在模拟器或 qemu 中进行动态二进制重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:10:24.197

模拟器正在模拟硬件。您可以在模拟器中以与在设备上完全相同的方式进行动态二进制重写（例如，对本机使用 LD_PRELOAD，或通过更改加载程序），或者根本不进行。它是一个模拟器这一事实对您没有任何帮助，因为在模拟器（硬件）和您尝试更改的抽象之间有太多层。在中间，你有内核、二进制加载器、dalvik 虚拟机等。

用户输入可能更容易，但在我看来，更改处理输入的开源框架代码比更改模拟器本身更容易。

沙查尔

# ruby-on-rails-3 - Rails 本地化语法

> ID：11602221
> 
> 赞同：1
> 
> 时间：2012-07-22T16:59:35.033
> 
> 标签：ruby-on-rails-3, localization

我已将 Twitter Bootstrap 安装到我的项目中，并为我发现了未知的语法：

```
<%=t '.title', :default => model_class.model_name.human.pluralize %>
<%= link_to t('.new', :default => t("helpers.links.new")),
            new_article_path,
            :class => 'btn btn-primary' %> 
```

我无法理解 和的`'.title'`含义。这些结构如何与语言环境字典交互？`'.new'``'helpers.links.new'`

另外我从来没有遇到过方法中的构造`:default =>`，`t`我可以在哪里阅读它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:26:08.510

t 是 Rails 的 I18n 国际化机制提供的辅助方法，是 I18n.translate 方法的快捷方式。

I18n 读取的语言环境文件默认设置为 Rails.root/config/locales/en.yml，假设 en 是您的默认语言环境。

第一个参数是 I18n 将在您的语言环境文件中查找的键。该语句`t('.new', :default => t("helpers.links.new"))`意味着 I18n 将寻找构造

```
en:
  new: "new string" 
```

在您的语言环境文件中。

:default 是在未找到第一个键的情况下将返回的字符串。

`:default => t("helpers.links.new")`只是意味着 I18n 将在 en.yml 中查找以下构造：

```
en:
  helpers:
    links:
      new: "new string" 
```

并在第一个不存在的情况下返回它。

你可以在[这里](https://github.com/svenfuchs/i18n/blob/master/lib/i18n.rb)找到I18n translate 方法的完整文档。

# cakephp - Cakephp aros 表号

> ID：11602226
> 
> 赞同：0
> 
> 时间：2012-07-22T17:00:19.780
> 
> 标签：cakephp

在 cakephp 2 -> Acl -> 创建 aros 表。

左右数字是什么意思？

[图片链接](https://picasaweb.google.com/lh/photo/FYT7r47d2rKHm4z9ou5G_zOeDrFKFKLYpW__DTTnR8o?feat=directlink)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:19:08.323

lft 和 rght 值是树结构的固有部分（如果您有兴趣，它是修改后的预序遍历树）。没有它们，就没有树结构。

Acl 系统可用于根据 parent_id 字段修复损坏的树，但如果没有完整的左右内容，它将无法进行 aco 或 aro 查找，这是非常基本的。

我建议使用 Acl 行为，这也意味着 Tree 行为，作为编辑这些值并为您处理 MPTT 内容的一种方式。

# php - 一个提交按钮，用于将数据从一个 php 函数发送到另一个

> ID：11602230
> 
> 赞同：0
> 
> 时间：2012-07-22T17:01:10.377
> 
> 标签：php, forms, submit

我试图弄清楚如何通过使用提交按钮将数据从一个 php 函数发送到另一个函数。这个想法是拼写检查器将突出显示单词的正确拼写，并且用户将单击按钮以使用正确的拼写再次运行程序。

```
<form method="post" action="results.php">
    <input type="submit" value="Search!" name="submit" id="searchButton" 
           value="<?php
                      $search = "dog";
                      $_POST[$search]
                  ?>"
    /> 
```

这是我目前所拥有的......

另外，按钮的值是否可能是变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:50:00.280

您可以使用隐藏变量来替代 ajax。

```
<input type="hidden" value="dog"  id="search" />
<input type="submit" value="Submit" /> 
```

# amazon-ec2 - 如何将 godaddy 域与 AWS Elastic Beanstalk 环境链接？

> ID：11602232
> 
> 赞同：114
> 
> 时间：2012-07-22T17:01:38.713
> 
> 标签：amazon-ec2, dns, amazon-elastic-beanstalk

我在尝试将我的**Godaddy 域**与**AWS Elastic Beanstalk 实例**链接时遇到了这个问题。我发现了很多关于如何将**EC2 实例**与 Godaddy 上的域链接的文档，但不适用于 Elastic Beanstalk 实例。所以我最终得到了这个网址：`www.MY_SITE.elasticbeanstalk.com`

这是我为 EC2 实例所做的：

1.  **我用我的Route 53 Hosted Zone**中的名称更新了我 Godaddy 域上的**名称服务器**。
***   我在 EC2 控制台上创建了一个新的**弹性 IP 。***   我回到 Godaddy 并从他们的 DNS 管理器中更新了**DNS A @**字段，使用 EC2 弹性 IP 之一。*   您通常必须等待 1 小时到 48 小时，它应该可以工作。**

 **如何对 AWS Elastic Beanstalk 实例而不是 EC2 实例执行相同操作？我看不到我从 EC2 控制台创建的实例，以便将其链接到弹性 IP。

希望这足够清楚..有什么帮助吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2016-07-06T13:54:33.157

无需创建 CNAME 或进行任何转发 - 从 SEO 的角度来看这是不好的，亚马逊不推荐。即使您不应该将记录直接指向IP - 将来会造成很多麻烦，因为IP可以随时更改。

最优雅的方法是[将 DNS 服务从 GoDaddy 迁移到 Route 53](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/MigratingDNS.html)。您仍将使用 GoDaddy，但处理您网站的请求将由亚马逊负责。

这是您需要做的：

1.  在 Route 53 控制台中为您的站点创建一个新的托管区域： [![在此处输入图像描述](../Images/461264d6e12f891ad95dc84134503264.png)](https://i.stack.imgur.com/3ETSV.png)

2.  打开新添加的域名，找到NS记录并复制服务器： [![在此处输入图像描述](../Images/ebf1fb1085ab3a706ca4166f4f9db8e4.png)](https://i.stack.imgur.com/eNfwE.png)

3.  在 GoDaddy 的域管理器中通过“导出区域文件 (Windows)”导出记录。

4.  将这些记录导入 Route 53（“导入区域文件”按钮）。

5.  在 GoDaddy 的域管理器中设置自定义 DNS 名称服务器，在第二步获得： [![在此处输入图像描述](../Images/8c332dc095a3144368f897b75bf5b659.png)](https://i.stack.imgur.com/ktIgi.png)

迁移可能需要一些时间（甚至几天）。现在，您可以将您的域与您的 Elastic Beanstalk 站点链接起来。为此，请在 Route 53 中选择/创建正确的 A 记录类型并为其设置别名： [![在此处输入图像描述](../Images/2c2a674735bec772419d982e11b709ed.png)](https://i.stack.imgur.com/Qha4k.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-30T22:43:30.327

这是我在遇到将 GoDaddy 域与 AWS ElasticBeanstalk 链接问题时所做的。

DNS 管理器：

*   一条记录**@**：64.202.189.170（顺便说一下GoDaddy的转发IP）
*   Cname **www**：AWS EB 域（例如 awseb-xyz.us-east-1.elb.amazonaws.com）

转发：

*   将域转发到 www.example.com（仅转发，无屏蔽）
*   将子域转发到 AWS EB 域（例如 awseb-xyz.us-east-1.elb.amazonaws.com）（带屏蔽）

为了在没有 www 的情况下访问该站点（例如[http://example.com](http://example.com)），我必须将域的转发设置为 www cname。然后这个 www cname 被转发到 AWS EB 域（带有掩码以便将 www.example.com 保留在地址栏中）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-25T02:53:18.220

您应该将[CNAME 记录](http://en.wikipedia.org/wiki/Cname)添加到从 www.yourGoDaddyDomain.com -> MY_SITE.elasticbeanstalk.com 映射的 Godaddy 域名。

这会将对您的域名的请求定向到在您的弹性 beanstalk 环境中运行的负载均衡器。您不想将您的域名路由到特定服务器（即弹性 IP），您希望它转到负载均衡器并将请求路由到您的服务器。由于 AWS 负载均衡器不使用 IP（它们使用域名），因此您不想为此设置 A 记录 - CNAME 记录将域名映射到域名。

查看[GoDaddy 文档](http://support.godaddy.com/help/article/680/managing-dns-for-your-domain-names#cnames)的“添加或编辑 CNAME”部分，了解如何执行此操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-21T18:30:02.883

您的 route53 配置必须指向负载均衡器，而不是 ec2 实例**

# authentication - 身份验证失败从 Github for Windows 发布存储库

> ID：11602233
> 
> 赞同：8
> 
> 时间：2012-07-22T17:01:56.097
> 
> 标签：authentication, github, github-for-windows

我正在尝试 Windows 版 Github，当我尝试发布新创建的存储库时出现以下错误。

> 身份验证失败
> 
> 您的凭据可能已过期。请退出应用程序，然后重新登录，然后重试操作。

不用说，我已经多次退出并重新登录，但都没有成功。我也卸载并安装了最新版本，但无济于事。

该存储库是我在应用程序中创建的一个新存储库，仅包含 .gitattributes、.git 和 README 文件。

我是 Github 的新手，所以很可能我在设置过程中搞砸了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-07T17:07:33.383

我能够通过以下方式解决这个问题：

1.  按设置 - 在 GitShell 中打开。
2.  状态
3.  git 推（或拉）
4.  引入凭据（这是最重要的一步，不知何故 git 客户端搞砸了或忘记了您的凭据）。

提供正确的凭据后，您可以退出 git shell 并再次使用 git 客户端。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T17:11:32.120

事实证明，问题在于 Github for Windows 存储的密码有问题。Github 支持的说明如下：

1.  退出 Github for Windows。
2.  在 github.com 上更改我的密码
3.  重新登录到 Windows 版 Github。

然后我就可以发布我的更改了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:15:11.687

您是否设置了 ssh 密钥？

[https://help.github.com/articles/generating-ssh-keys#platform-windows](https://help.github.com/articles/generating-ssh-keys#platform-windows)

# java - 在 BoxLayout 中对齐 JLabel

> ID：11602237
> 
> 赞同：3
> 
> 时间：2012-07-22T17:02:45.900
> 
> 标签：java, swing, jlabel, boxlayout

几天来我一直在寻找这个问题的答案，但我无法找出问题所在。我想要做的是使顶部 JLabel（称为`display`）向右对齐，底部 JLabel（称为`notice`）向左对齐。似乎两者都不想这样做。从我读过的内容来看，我所拥有的应该可以工作，但事实并非如此。帮助？

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.border.Border;

public class Calculator {

    private static JButton clear, add, subtract, multiply, divide, equals, point, zero, one, two, three, four, five, six, seven, eight, nine;
    private static JLabel display, notice, blank1, blank2, blank3;
    private static JPanel mainPanel, buttonPanel, topLabel, bottomLabel;

    public static void goGUI() {

        JFrame frame = new JFrame("Calculator");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setPreferredSize(new Dimension(600,300));
        mainPanel = new JPanel();
        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));
        frame.setContentPane(mainPanel);
        Border empty = BorderFactory.createEmptyBorder(10,10,10,10);
        mainPanel.setBorder(empty);

        buttonPanel = new JPanel(new GridLayout(5,4, 5,5));
        Border buttonBorder = BorderFactory.createEmptyBorder(10,0,10,0);
        buttonPanel.setBorder(buttonBorder);

        topLabel = new JPanel();
        bottomLabel = new JPanel();

        clear = new JButton("C");
        add = new JButton("+");
        subtract = new JButton("-");
        multiply = new JButton("*");
        divide = new JButton("/");
        equals = new JButton("=");
        point = new JButton(".");
        zero = new JButton("0");
        one = new JButton("1");
        two = new JButton("2");
        three = new JButton("3");
        four = new JButton("4");
        five = new JButton("5");
        six = new JButton("6");
        seven = new JButton("7");
        eight = new JButton("8");
        nine = new JButton("9");

        // Here I added ActionListeners to all the buttons...

        display = new JLabel("0");
        display.setAlignmentX(Component.RIGHT_ALIGNMENT);
        notice = new JLabel("*Maximum 19 digits - Order of operations not taken into account*");
        notice.setAlignmentX(Component.LEFT_ALIGNMENT);
        blank1 = new JLabel();
        blank2 = new JLabel();
        blank3 = new JLabel();

        buttonPanel.add(clear);
        buttonPanel.add(blank1);
        buttonPanel.add(blank2);
        buttonPanel.add(blank3);
        buttonPanel.add(seven);
        buttonPanel.add(eight);
        buttonPanel.add(nine);
        buttonPanel.add(divide);
        buttonPanel.add(four);
        buttonPanel.add(five);
        buttonPanel.add(six);
        buttonPanel.add(multiply);
        buttonPanel.add(one);
        buttonPanel.add(two);
        buttonPanel.add(three);
        buttonPanel.add(subtract);
        buttonPanel.add(zero);
        buttonPanel.add(point);
        buttonPanel.add(equals);
        buttonPanel.add(add);

        topLabel.add(display);
        bottomLabel.add(notice);

        mainPanel.add(topLabel);
        mainPanel.add(buttonPanel);
        mainPanel.add(bottomLabel);

        frame.pack();
        frame.setVisible(true);

    } //end goGUI

    //ActionListener classes went here...

    public static void main(String[] args) {

        try {
            // Set cross-platform Java L&F (also called "Metal")
            UIManager.setLookAndFeel(
                UIManager.getCrossPlatformLookAndFeelClassName());
        } 
        catch (Exception e) {}

        goGUI();

    } //end main
} //end Calculator 
```

为了清楚起见，我删除了所有 ActionListener 的东西。但这是我无法修复的布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:11:47.727

考虑让 topLabel 不使用默认的 FlowLayout，而是使用使其内容填满它的东西，例如 BorderLayout。

```
topLabel.setLayout(new BorderLayout()); 
```

接下来确保设置显示器的水平对齐方式，而不是右对齐：

```
display.setHorizontalAlignment(SwingConstants.RIGHT); 
```

应该对您的通知 JLabel 及其容器进行类似的更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:39:47.143

我添加了几行代码，因为我喜欢 BoxLayout。几个小时前，我在对齐组件中遇到了几乎相同的问题。

如果我们想实现这样的目标

```
//  +----------------------------------+
//  |  Label1  |            |  Label2  |
//  +----------------------------------+ 
```

您只需在两者之间放置一个“Box.createHorizo​​ntalGlue()”。

相反，如果我们想要这样的东西：

```
//  +----------------------------------+
//  |  Label1  |                       |
//  |----------+            +----------|
//  |                       |  Label2  |
//  +----------------------------------+ 
```

我们必须将标签放在两个不同的 JPanel 中，为它们设置不同的 AlignmentX。这是因为在布局中所有组件都应该具有相同的alignmentX。为了避免这种限制，我们可以这样做：

```
//  +-----------------------------------------+
//  |  Label1  |   label1 is inside a JPanel  |
//  +----------+ - - - - - - - - - - - - - - -+
//  + - - - - - - - - - - - - - - -+----------+
//  |  label2 also                 |  Label2  |
//  +-----------------------------------------+ 
```

（不要介意两个面板之间的空间，仅用于图形）这可以通过以下代码完成：

```
mainPanel = new JPanel();
mainPanel.setLayout(new BoxLayout(mainPanel,BoxLayout.PAGE_AXIS));

JLabel lbl1 = new JLabel("Label1");
JPanel p1 = new JPanel();
p1.setOpaque(false);
p1.setLayout(new BorderLayout(0, 0));
p1.add(lbl1, BorderLayout.CENTER);

JLabel lbl2 = new JLabel("Label1");
JPanel p2 = new JPanel();
p2.setOpaque(false);
p2.setLayout(new BorderLayout(0, 0));
p2.add(lbl2, BorderLayout.CENTER);

mainPanel.add(p1);
mainPanel.add(p2); 
```

我希望这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T17:21:02.010

您可以简单地使用`BorderLayout()`：

```
public static void goGUI() {

        ....

        topLabel = new JPanel(new BorderLayout());
        bottomLabel = new JPanel(new BorderLayout());

        ....

        topLabel.add(display, BorderLayout.EAST);
        bottomLabel.add(notice, BorderLayout.WEST);

    } 
```

还要删除这些调用：

```
 display.setAlignmentX(Component.RIGHT_ALIGNMENT);
 notice.setAlignmentX(Component.LEFT_ALIGNMENT); 
```

# matlab - 在折线图中设置 x 轴点距离

> ID：11602241
> 
> 赞同：2
> 
> 时间：2012-07-22T17:03:17.190
> 
> 标签：matlab

我的 x 轴值为 10、100、250、500、1000、2000

和 0 和 1 之间的 y 轴值。我正在比较 10 个值，单个图上有 10 个线图。

我想要 x 轴点之间的相等间隙。我使用了命令： set(gca,'XTick',[10, 100, 250, 500, 1000, 2000])

但是，它没有显示相等的差距。我的意思是，x 轴应该被分成 6 个（上面）等间距的点，就像我的图表一样，因为从 10 点到 250 点的变化更高，所以线条非常拥挤。请问在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:51:39.887

我想因为你的间隙不是均匀分布的，所以你不会得到它（至少使用 Matlab 默认绘图）。您可以尝试使用

设置（gca，'xscale'，'log'）

这将使空间甚至至少倒数第二个刻度（大约）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:20:26.617

您可以将自定义 XTickLabel 用于 1、2、3、...

```
x = [10, 100, 250, 500, 1000, 2000];
y = randn(size(x));
plot(1:numel(x), y);
set(gca,'XTick', 1:numel(x));
set(gca,'XTickLabel', arrayfun(@num2str, x, 'UniformOutput', false)); 
```

# http-status-code-301 - Google 文档重定向 301 错误

> ID：11602242
> 
> 赞同：0
> 
> 时间：2012-07-22T17:03:29.010
> 
> 标签：http-status-code-301

Internet Explorer 9.0 和 Google Chrome 中的 Google Drive 301 重定向问题。

如何下载和恢复我的文档？

**错误详情：**

```
The webpage at https://docs.google.com/nonceSigner?nonce=7cb3t4occcafo&continue=https://doc-14-bg-docs.googleusercontent.com/docs/securesc/i5n0sn4aobda0j320f46k73eteiillh3/plshk64l31ed2qevsqk23j88fdobcn2g/1342972800000/16921087564105121353/16921087564105121353/0B4IwZnOWxZeUMUdqOG9iU2dRT3VGMm82aDdWNUV3QQ?e%3Ddownload%26hash%3Dhhjr1n96p6fbnep6l9cudvmg5ec7jr43%26nonce%3Db1573nhruskb0%26user%3D16921087564105121353&hash=f23l5btt5380bvi1fh63om23i6m3t5t4 has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer.
Here are some suggestions:
Reload this webpage later.
Learn more about this problem. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:03:40.343

[根据谷歌论坛](https://productforums.google.com/forum/?fromgroups=#!topic/drive/XgwZpN_0gz0)上关于 cookie 的提示，我找到了一个解决方案：

通过允许 Google 设置 cookie，我的问题就消失了。Chrome 设置 > 高级 > 内容设置 ... > Cookies > 管理例外。允许：

```
https://[*.]google.com:443
https://[*.]googleusercontent.com:443 
```

该规则可能更具体，但这是有效的。我希望这有帮助。我有非默认的 cookie 限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:42:49.600

尝试从 Google Drive 下载文件时，我在 Chrome、IE 和 Firefox 中遇到过这种情况。禁用扩展和隐身并没有为我解决这个问题，但我能够通过使用 Google Drive Desktop 应用程序找到解决方法。

[https://tools.google.com/dlpage/drive](https://tools.google.com/dlpage/drive)

希望有帮助！

# css - div在另一个中间

> ID：11602244
> 
> 赞同：0
> 
> 时间：2012-07-22T17:04:17.710
> 
> 标签：css, html, margin

我想将 a`<div>`放入另一个并希望将其居中。我的方法是这样的：

```
<div id="redthing">
<div id="whitebox" >
</div>
</div> 
```

.css - 代码如下：

```
#redthing {
margin-top: 2px;
background-color: #f00d28;
height: 250px;
}

#whitebox {
 margin: 0 auto;
 margin-top: 10px;
 padding-top: 20px;
 height: 10px;
 width: 400px;
 background-color: white;
 border:5px solid #000;
} 
```

如您所见，填充和边距无法将其置于页面中间（这意味着 .`whitebox`的顶部和底部之间存在相同的位置`redbox`。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:14:34.837

好吧，让我们来看看你有什么。此图中的每一行代表 10px 的高度：

```
┏━━━━━━━━━━━━━━━━━━━━━┓
┃10px margin top        ┃
┃┌─────────────────────┐┃
┃│20px padding top     │┃
┃│padding continues    │┃
┃│10px height          │┃
┃└─────────────────────┘┃
┃                       ┃
┊  lots of empty space  ┊
┃                       ┃
┗━━━━━━━━━━━━━━━━━━━━━┛ 
```

解释这应该如何工作？

您需要确保您的填充和边距加起来是正确的数量，或者使用这个：

```
/* add this to the container */
position: relative;

/* add this to the inner box */
position: absolute;
top: 50%;
margin-top: -Xpx;
/* where X is half the offsetHeight of the box - ie. (height+padding+border)/2 */ 
```

# android - 如何在列表视图的每一列上创建属性名称？

> ID：11602248
> 
> 赞同：3
> 
> 时间：2012-07-22T17:05:01.057
> 
> 标签：android

我使用 simpleadapter 和 hashmap 填充了一个 listview(4columns)。现在我想让列表视图的每一列都有一个名字。

我的列表视图显示在具有 4 个文本视图的线性布局中。

现在，为了获得每列的属性名称，我尝试使用 2 个线性布局，顶部线性布局有 4 个带有属性名称的文本视图，底部线性布局带有来自 simpleadapter 的数据。并将两个线性布局放在另一个线性布局中。

这并没有按我想要的方式工作......我对android还很陌生，请帮忙。

编辑：

这是我的代码：

公共类 MultiList 扩展 ListActivity {

```
ListView lv;
SimpleAdapter sd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Calendar c = Calendar.getInstance();
    lv = getListView();
    ArrayList<HashMap<String, String>> aList = new ArrayList<HashMap<String,String>>();
    HashMap<String, String> map = new HashMap<String, String>();
    map.put("Date", ""+c.get(Calendar.DATE));
    map.put("Month", ""+c.get(Calendar.MONTH)+1);
    map.put("Time", "" + new Date().toString());
    aList.add(map);
    map = new HashMap<String, String>();
    map.put("Date", ""+c.get(Calendar.DATE));
    map.put("Month", ""+c.get(Calendar.MONTH)+1);
    map.put("Time", "" + new Date().toString());
    aList.add(map);
    map = new HashMap<String, String>();
    map.put("Date", ""+c.get(Calendar.DATE));
    map.put("Month", ""+c.get(Calendar.MONTH)+1);
    map.put("Time", "" + new Date().toString());
    aList.add(map);
    sd= new SimpleAdapter(this, aList, R.layout.main, new String[]{"Date","Month","Time"}, new int[]{R.id.studentID,R.id.studentAge,R.id.studentName});
    lv.setAdapter(sd);

   // insertData();

} 
```

我的 main.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linear1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:paddingBottom="6dip"
        android:paddingTop="4dip" >

        <TextView
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="student ID" />

        <TextView
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="student Age" />

        <TextView
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="student Name" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linear1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:paddingBottom="6dip"
        android:paddingTop="4dip" >

        <TextView
            android:id="@+id/studentID"
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
             />

        <TextView
            android:id="@+id/studentAge"
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
           />

        <TextView
            android:id="@+id/studentName"
            android:layout_width="90dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
             />
    </LinearLayout>

</LinearLayout> 
```

问题是，每个属性名称（学生 ID、学生年龄、学生姓名）在每一行都重复。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:28:36.137

将您的布​​局分成两部分，第一个将具有列标题。我们称之为**header.xml**：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="student ID" />

    <TextView
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="student Age" />

    <TextView
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="student Name" />
</LinearLayout> 
```

第二个只是针对每一行，称为**row.xml**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:id="@+id/studentID"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
         />

    <TextView
        android:id="@+id/studentAge"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
       />

    <TextView
        android:id="@+id/studentName"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
         />
</LinearLayout> 
```

（你可以稍后给他们起更好的名字。）

现在你的 onCreate() 应该有这个：

```
// Set up your header
lv.addHeaderView(getLayoutInflater().inflate(R.layout.header, null, false));

// Change the resource id to R.layout.row
sd = new SimpleAdapter(this, aList, R.layout.row, new String[]{"Date","Month","Time"}, new int[]{R.id.studentID,R.id.studentAge,R.id.studentName});
lv.setAdapter(sd); 
```

# javascript - 从 JSON 消息中解析矩阵

> ID：11602250
> 
> 赞同：1
> 
> 时间：2012-07-22T17:05:24.200
> 
> 标签：javascript, json

我是 Javascript 新手，对它的各种库不是很熟悉。

我有一个序列化为 JSON 消息的 Numpy (Python) 矩阵，但想在 Javascript 中从这个 JSON 消息中解码矩阵。

有没有一个著名的 JS 库可以做到这一点？如果是这样，我从解码中得到的确切数据结构是什么？Javascript中的多维数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:11:46.840

您可以使用[`JSON.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse).

```
var matrix = JSON.parse(numpyString); 
```

完成此操作后，您可以在 Web 浏览器的控制台中探索结果对象的格式。

```
console.dir(matrix); 
```

# php - onchange函数期间的ajax

> ID：11602252
> 
> 赞同：0
> 
> 时间：2012-07-22T17:05:46.160
> 
> 标签：php, ajax

我有一个非常简单的案例，但让我感到困惑，这里是脚本 =>

```
<!DOCTYPE html>
<html>
<head>
    <title>HI</title>
    <link rel="stylesheet" href="./scripts/css/default.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<form name="ok" method="post" action="index.php">
    <select name="sel" id="sel"><option value="a">1</option><option value="b">2</option><option value="c">3</option></select>
</form>
FIRST PAGE

<div id="as"></div>

<script type="text/javascript">
document.getElementById("sel").onchange = function(){
    var doc = false;
    if (window.XMLHttpRequest){
        doc = new XMLHttpRequest();
    }
    if(doc){
        doc.open("POST","./index.php",true);
        doc.onreadystatechange = function(){
            if (doc.status==200 && doc.readyState==4){
                document.getElementById("as").innerHTML = doc.responseText;
            }
        };
        doc.send("sel=" + document.getElementById("sel").value);
    }
};
</script>

<?php
if (isset($_POST['sel'])){
    echo $_POST['sel'];
}
?>

</body>
</html> 
```

从这个脚本中，我希望 onselect 更改返回我选择元素的值，但它再次返回整个页面，为什么？有任何想法吗 ？请帮忙，谢谢:)）

PS。这是自我 index.php 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:12:46.247

创建一个单独的 php 文件来处理您的 ajax 请求，这样 ajax 请求只会向您显示 php 文件回显的文本。

这是我的示例代码：

```
 if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
          if (isset($_POST['sel'])){
             echo "yeah";
          }
  }else{die('You are not allowed to access this page!');} 
```

# php - PHP可以用于构建像Kiosk Locker这样的应用程序吗？

> ID：11602255
> 
> 赞同：0
> 
> 时间：2012-07-22T17:06:13.233
> 
> 标签：php, kiosk, interfacing

php程序应该可以通过在kiosk应用程序中输入正确的凭据来控制储物柜的打开或关闭，就像与硬件接口一样。这在php中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:24:22.093

老实说，我认为它是 :-) 在运行 php 代码的操作系统上，应该有一个程序或命令来锁定/解锁信息亭。php唯一要做的就是使用执行该命令/应用程序

```
exec(); 
```

命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:14:52.730

简短的回答：不。

长答案：使用自定义 PHP 扩展可能会做这样的事情，但始终是一个非常肮脏、笨拙的解决方案。PHP 被设计为在网络服务器上运行，生成页面。仅仅通过语言和底层技术的设计方式，使用它来进行系统编程几乎是不可能的。

看看像 SiteKiosk 这样的商业解决方案会更好。

# c++ - 简单的数学函数不起作用

> ID：11602257
> 
> 赞同：0
> 
> 时间：2012-07-22T17:06:16.727
> 
> 标签：c++, math

我对 c++ 很陌生，但我正在尝试建立一个非常简单的 c++ 项目。到目前为止，您可以在下面找到代码。但我遇到的问题是数学函数`p = n^2-8n+7;`。有什么建议可以改进吗？

```
#include <iostream>
#include <stdio.h> 
using namespace std;

int main() {

/* Variable Declaration */
int p,n,i;

for (n=0; n<100; n++) {

/* Math Function */
p = n^2-8n+7;

/* Check if prime */
for (i=2; i<p; i++) { 
    if (!(p%i)) break;
    else cout << "(" << n << "," << p << ");" << endl;
}

}

/* Ready */
printf("\n\n\a");
system("pause");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T17:12:58.487

你需要改变

```
 n^2-8n+7; 
```

到

```
p = n * n - 8 *n + 7; 
```

您缺少用于乘法的*****，并且您需要乘以两次或使用 pow 函数而不是 ^

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T17:07:15.650

获得方形使用`n*n`而不是`n^2`. `^`是按位异或运算符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T17:09:34.650

运算符 ^ 不等于效力，而是二元运算符 'XOR'。

对于 n^2 使用 (n*n) 或者，对于更高的效力，预制的“pow”功能，这里描述：[http ://www.cplusplus.com/reference/clibrary/cmath/pow/](http://www.cplusplus.com/reference/clibrary/cmath/pow/)

对于您的示例，这将是 pow(n, 2); 8n 也不起作用，你需要把它完全写成'8 * n'。

# algorithm - 找到具有给定点数的最小包含凸多边形

> ID：11602259
> 
> 赞同：22
> 
> 时间：2012-07-22T17:06:36.797
> 
> 标签：algorithm, language-agnostic, geometry, polygon, computational-geometry

给定一个凸多边形和一个数字 N，我如何找到最小的多边形

1.  包含原始多边形的每个点
2.  正好有 N 个角点

例如，假设我有一组点并为它们计算凸包（绿色）。现在我想找到包含所有点的最小四边形（红色）

![最小的四边形](../Images/33d4763ee664af3b587bad6547533200.png) ![在此处输入图像描述](../Images/fe341b1675c6898889ae92c068cd75f9.png)

很容易看出，任何其他具有 4 个角的多边形要么更大，要么无法包含所有点。但是在一般情况下如何找到这个多边形？

* * *

编辑：

最小的多边形是指覆盖最小区域的多边形，尽管我不确定最小的周长是否会产生不同的结果。

我在其中一个答案中添加了另外两张示例图片，不幸的是这些图片似乎不适用于“删除边缘”方法

* * *

一些背景资料：

目标是通过图像识别准确地确定形状。例如拍摄长方体的照片。2D 照片中方框内的所有点都将包含在一个 6 角凸多边形中。然而，由于现实世界的形状没有完美的角，并且相机添加了一些模糊，这个多边形的边缘将被圆角。[请参阅问题从凸点获取角](https://stackoverflow.com/q/10261479/145999)的附图

![模糊的角落](../Images/74164bcd8bd6a2fe4253026149cd2f30.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T18:20:25.333

您需要在问题中定义“最小”的概念。无论您如何定义，计算几何文献中都对这个问题进行了深入研究。关键搜索短语是*最小的封闭 k-gon*：

*   Mictchell 等人：“Minimum-Perimeter Enclosure k-gon”2006（[CiteSeer 链接](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.7066)）
*   Aggarwal 等人：“最小面积外接多边形”1985（[CiteSeer 链接](http://teseerx.ist.psu.edu/showciting?cid=990497)）
*   O'Rourke 等人：“寻找最小封闭三角形的最佳算法”，1986 年，*Algorithmica*（[ACM 链接](http://dl.acm.org/citation.cfm?id=8095)）

一般算法并不简单（尽管最小面积三角形或矩形的算法很简单）。根据您的目标，您可能不得不放弃任何“最小”的数学概念并采用启发式方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:31:30.303

```
While number of edges > N do
  remove the shortest edge by replacing its endpoints 
  with the intersection point of the adjacent edges 
```

# java - 发送参数值struts1 via

> ID：11602260
> 
> 赞同：0
> 
> 时间：2012-07-22T17:06:49.167
> 
> 标签：java, struts-1, hidden-field

我试图通过链接发送 id-property 的值

```
<html:link action="action?method=view&amp;newsID='<bean:write name="news" property="id"/>'">View</html:link> 
```

或者

```
<input type="hidden" name="newsID" value='<bean:write name="news" property="id"/>'/>
                <html:link
                    action="action?method=view&amp;newsID=${newsID}">
                View
                </html:link> 
```

但没有任何工作。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:13:20.037

帮自己一个忙，并使用 JSTL：

```
<c:url var="theUrl" value="/action.do">
    <c:param name="method" value="view"/>
    <c:param name="newsID" value="${news.id}"/>
</c:url>
<a href="${fn:escapeXml(theUrl)}">View</a> 
```

# repository - 您在哪里跟踪有趣的文章？

> ID：11602263
> 
> 赞同：1
> 
> 时间：2012-07-22T17:07:06.087
> 
> 标签：repository, knowledge-management

像许多开发人员一样，我阅读了很多关于不同代码方法、模式、博客、示例等的文章，以及通过 github、codeplex 等跟踪代码示例。

我过去曾使用美味的书签来跟踪有趣的文章，有时还使用代码片段和 repos。然而，这对我来说不是很好，因为我一直忘记并且发现在那里很难找到文章。

所以我想知道其他人用什么来跟踪上述内容？有兴趣听听其他开发人员对知识和资源管理的意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:37:44.887

我使用我的博客 - [http://www.acooke.org/cute](http://www.acooke.org/cute) - 它是通过电子邮件生成的，所以这几乎等同于给自己发送一封带有 URL、有用标题，也许还有一些评论的电子邮件。博客方法的一个优点是偶尔人们会发送有用的评论（不是电子邮件生成的博客吗？这将是等效的......）

我还使用了 mediawiki 的本地安装（维基百科所基于的 wiki，但实际上任何 wiki 都会这样做——我选择了那个，以免它过时）。但这更适合长期的事情，比如客户、项目细节等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:24:47.397

1.  谷歌电子邮件帐户
2.  创建名为代码集合的文件夹
3.  为收到的所有主题为“代码集合”的电子邮件创建过滤器，并将其放入该文件夹
4.  找到一些你喜欢的代码？甚至将整个页面复制并粘贴到电子邮件中，并以“代码集合”为标题发送给自己

然后在该文件夹中的电子邮件的时间和积累之后，您将能够通过“代码集合”文件夹搜索您的电子邮件的关键字 - 实际上是您自己的个人 google 可搜索代码存档。

我一直在做这个 GMail 发布并建立了一个非常好的代码存储库，其中包含超过 3000 封跨多种语言的电子邮件。

我还保留所有工作项目的档案，包括创意，并经常在备份上做标记以保留某些类/功能。

# ruby-on-rails - 铁轨和机厂

> ID：11602267
> 
> 赞同：0
> 
> 时间：2012-07-22T17:07:24.433
> 
> 标签：ruby-on-rails, engineyard

我在引擎场上运行一个 Rails 应用程序。用户可以上传稍后返回的图像。问题是我们目前有 2 个实例正在运行。只是想知道最好的做法是什么，因为当前上传图像时，它不会被添加到两个文件系统中，只会添加到 1。是否可以在顶部实例上单击终止，或者是否有更好的解决方案。

![截图](../Images/0b6bf098758d8f255f1a6a83fc97b1e6.png)

# mysql - 带有断线的 django + mysql 文本字段格式

> ID：11602269
> 
> 赞同：0
> 
> 时间：2012-07-22T17:07:58.137
> 
> 标签：mysql, django, python-2.7

我的 MySQL 表中有一个`text`字段。我想用`<br>`模板的或某种格式来格式化所有新行。框架中是否为此内置了任何内容？我试图阅读以下页面：

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs)

但似乎该页面不适用于此？我可以参考其他文档吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:06:38.677

听起来您需要[`linebreaksbr`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaksbr)模板过滤器。

通常，您会在模板中使用它：

```
{{ instance.fieldname|linebreaksbr }} 
```

但是，也可以导入它并在您的视图中使用它：

```
from django.template.defaultfilters import linebreaksbr
text_with_br = linebreaksbr(instance.fieldname) 
```

使用`linebreaksbr`而不是编写自己的代码段的优点是 linebreaksbr 会为您处理[自动转义](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#filters-and-auto-escaping)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:28:22.707

我决定按以下方式进行：`"<br />".join(word.split("\n"))`. 不确定这是否是最好的方法......仍在深入研究它。它当然有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:19:32.013

根据您的用例，这对您来说可能有点矫枉过正，但我​​在管理区域中使用[django-tinymce](https://github.com/aljosa/django-tinymce)将富文本编辑字段添加到将在模板中使用的字符字段。这会在数据库和模板中保存一个 html 字符串，您可以使用：

```
{{ model.field|safe }} 
```

在不丢失 html 格式的情况下输出它。这很容易设置。

# java - 在 Android 应用中灵活启用/禁用日志记录

> ID：11602271
> 
> 赞同：1
> 
> 时间：2012-07-22T17:08:06.993
> 
> 标签：java, android

出于性能方面的考虑，有些人建议使用以下方法，例如

```
public class MyActivity extends Activity {  

 private static final String TAG = "MyApp";  
 private static final boolean D = true;

 @Override  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "MyActivity.onCreate debug message");  } 
```

但是在做一个大项目的时候这是没有意义的，因为当你调试的时候，你需要为`debug`标志更新很多文件，有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T17:10:16.420

您可以在 BuildConfig 中检查 DEBUG 布尔值：

```
if (BuildConfig.DEBUG) {
    // Do what you need
} 
```

或者，您可以拥有一个调试变量，但或者将其保留在每个活动中，在您的 Application 类中声明它，并在需要时检查它的值。

如果您使用该变量的目的是用于日志记录，则将日志记录包装到另一个类中是一个好习惯，该类检查 DEBUG 变量：

```
public class LogUtils {
    public static void LOGD(final String tag, String message) {
        if (BuildConfig.DEBUG) {
            Log.d(tag, message);
        }
    }

    public static void LOGV(final String tag, String message) {
        if (BuildConfig.DEBUG) {
            Log.v(tag, message);
        }
    }

    public static void LOGI(final String tag, String message) {
        if (BuildConfig.DEBUG) {
            Log.i(tag, message);
        }
    }

    public static void LOGW(final String tag, String message) {
        if (BuildConfig.DEBUG) {
            Log.w(tag, message);
        }
    }

    public static void LOGE(final String tag, String message) {
        if (BuildConfig.DEBUG) {
            Log.e(tag, message);
        }
    }

} 
```

然后，对此类进行日志调用：

```
LogUtils.LOGD(TAG, "MyActivity.onCreate debug message"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T09:47:06.747

我强烈推荐谷歌人在他们的开源应用程序 iosched 上开发的东西。除其他原因外，它还牢记`BuildConfig`并检查指定标签的日志是否可以使用[isLoggable](http://developer.android.com/reference/android/util/Log.html#isLoggable%28java.lang.String,%20int%29)在指定级别记录。这对我的项目来说是必须的。

```
/*
 * Copyright 2012 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.android.apps.iosched.util;

import com.google.android.apps.iosched.BuildConfig;

import android.util.Log;

/**
 * Helper methods that make logging more consistent throughout the app.
 */
public class LogUtils {
    private static final String LOG_PREFIX = "iosched_";
    private static final int LOG_PREFIX_LENGTH = LOG_PREFIX.length();
    private static final int MAX_LOG_TAG_LENGTH = 23;

    public static String makeLogTag(String str) {
        if (str.length() > MAX_LOG_TAG_LENGTH - LOG_PREFIX_LENGTH) {
            return LOG_PREFIX + str.substring(0, MAX_LOG_TAG_LENGTH - LOG_PREFIX_LENGTH - 1);
        }

        return LOG_PREFIX + str;
    }

    /**
     * WARNING: Don't use this when obfuscating class names with Proguard!
     */
    public static String makeLogTag(Class cls) {
        return makeLogTag(cls.getSimpleName());
    }

    public static void LOGD(final String tag, String message) {
        if (Log.isLoggable(tag, Log.DEBUG)) {
            Log.d(tag, message);
        }
    }

    public static void LOGD(final String tag, String message, Throwable cause) {
        if (Log.isLoggable(tag, Log.DEBUG)) {
            Log.d(tag, message, cause);
        }
    }

    public static void LOGV(final String tag, String message) {
        //noinspection PointlessBooleanExpression,ConstantConditions
        if (BuildConfig.DEBUG && Log.isLoggable(tag, Log.VERBOSE)) {
            Log.v(tag, message);
        }
    }

    public static void LOGV(final String tag, String message, Throwable cause) {
        //noinspection PointlessBooleanExpression,ConstantConditions
        if (BuildConfig.DEBUG && Log.isLoggable(tag, Log.VERBOSE)) {
            Log.v(tag, message, cause);
        }
    }

    public static void LOGI(final String tag, String message) {
        Log.i(tag, message);
    }

    public static void LOGI(final String tag, String message, Throwable cause) {
        Log.i(tag, message, cause);
    }

    public static void LOGW(final String tag, String message) {
        Log.w(tag, message);
    }

    public static void LOGW(final String tag, String message, Throwable cause) {
        Log.w(tag, message, cause);
    }

    public static void LOGE(final String tag, String message) {
        Log.e(tag, message);
    }

    public static void LOGE(final String tag, String message, Throwable cause) {
        Log.e(tag, message, cause);
    }

    private LogUtils() {
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T17:18:03.320

[在这个](https://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this)有点相关的问题的答案之一中找到了另一种解决方案。您可以像这样覆盖 Log 类：

```
public class Log {
    static final boolean LOG = false;

    public static void i(String tag, String string) {
        if (LOG) android.util.Log.i(tag, string);
    }
    public static void e(String tag, String string) {
        if (LOG) android.util.Log.e(tag, string);
    }
    public static void d(String tag, String string) {
        if (LOG) android.util.Log.d(tag, string);
    }
    public static void v(String tag, String string) {
        if (LOG) android.util.Log.v(tag, string);
    }
    public static void w(String tag, String string) {
        if (LOG) android.util.Log.w(tag, string);
    }
} 
```

这样，每次使用 log 时都不需要 if 语句。只需更改覆盖的 Log 类中的布尔值。当您准备好发布时，您可以使用 ProGuard 之类的工具去除对 Log 的所有引用以提高性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-30T17:38:02.403

## 使用 ProGuard 去除 Log.v 和 Log.d 消息

另一种使用更少代码的替代方法是使用[ProGuard](http://developer.android.com/tools/help/proguard.html)将这些内容剥离出来以用于最终发布的应用程序。

基本上，在`app\proguard-rules.pro`文件中，定义`android.util.Log`您想要剥离的类的方法。proguard-rules.pro 文件中的以下添加将导致`v`(verbose) 和`d`(debug) 方法在构建时被剥离：

```
# This tell Proguard to assume Log.v and Log.d have no side effects (even
# though they do since they write to the logs) and thus can be removed
# during optimization:
-assumenosideeffects class android.util.Log {
    public static int v(...);
    public static int d(...);
} 
```

这避免了对`if (BuildConfig.DEBUG)`贯穿整个代码的 -style 检查的需要。

另请参阅：[在发布的 Android 应用程序中完全禁用 LogCat 输出？](https://stackoverflow.com/questions/5553146/disable-logcat-output-completely-in-release-android-app?lq=1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T17:15:44.290

我写了一个`LogWrapper`简单的类，看起来像这样：

```
public class LogWrapper {
    private static final String DEBUG_TAG = "some-tag"
    private static boolean logsEnabled;

    public static void e(String msg) {
      if (logsEnabled) {      
        Log.e(DEBUG_TAG, msg);
      }
    }

    // other Log methods
} 
```

您可以使用它代替 Log 类，在一个地方根据需要修改布尔变量。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-14T12:10:50.700

我最近遇到了同样的问题，我认为使用 Proguard 剥离类并不是禁用日志的好主意。所以我最终为标准的 Android Log 类编写了一个简单的替代品

[https://github.com/zserge/log](https://github.com/zserge/log)

它允许您控制日志级别。它还为您提供了很多“糖”来记录多个值、日志标签等等，而且在 Maven Central/JCenter 上只有 200 行代码可用。

# python - 在 web.py 中使 db.update 的输出静音

> ID：11602273
> 
> 赞同：0
> 
> 时间：2012-07-22T17:08:20.583
> 
> 标签：python, database, web.py

我正在使用 web.py 来抽象使用数据库。我遍历一系列网页以将相关信息抓取并收集到变量compiled_essay中。然后我更新数据库中的一列来保存这篇文章。

```
for update_number in range(len(user_list)):    
    db.update('users',where="username = '%(user)s'"%{"user":username},essay_data=compiled_essay) 
```

问题是这最终会在我正在使用的 python shell 中打印出 db 命令：

```
0.0 (update_number): UPDATE users SET essay_data = 'lots_of_text' WHERE username = 'the_user' 
```

我的问题是如何使 db.update 命令静音，这样它就不会为每次更新打印大量文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T01:34:41.997

打印仅在开发模式下启用。

您可以通过在创建数据库之前添加以下行来显式禁用它。

```
web.config.debug = False 
```

或者，通过设置：

```
db.printing = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:11:18.950

由于您在 Python shell 中执行此操作，因此一种方法是将输出设置为变量：

```
for update_number in range(len(user_list)):    
    x = db.update('users',where="username = '%(user)s'"%{"user":username},essay_data=compiled_essay) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:29:45.233

根据评论中的建议，该标志`_test=True`使输出静音。

```
db.update('users',where="username = '%(user)s'"%{"user":username},essay_data=compiled_essay,_test=True) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T18:30:56.010

web.config.debug = False 仍然没有帮助。一些输出仍然完成。

注释掉文件中的行：C:\Python27\Lib\site-packages\web\httpserver.py

线：

```
print >> outfile, utils.safestr(msg) ->
#print >> outfile, utils.safestr(msg) 
```

# c# - 在输入字段中显示标题 C#

> ID：11602274
> 
> 赞同：3
> 
> 时间：2012-07-22T17:08:28.797
> 
> 标签：c#, winforms

> **可能重复：**
> [WinForms 中的水印文本框](https://stackoverflow.com/questions/4902565/watermark-textbox-in-winforms)

我目前正在编写 C# 应用程序的设置对话框。输入字段应如下所示：

![输入字段为空](../Images/b6856cf96b90a701450c91fa9239c29c.png)→![输入字段填写](../Images/c0c42a8055c96c21e146f8a16d6d98c3.png)

实现这一点的最佳方法是什么？我想过创建一个背景图像，但我想知道是否有更好的方法来做到这一点（动态的）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:33:46.787

使用设置为白色的面板作为`BackColor`.
在面板控件中，在左侧插入一个`TextBox`设置`BorderStyle`为`None`。
在面板控件中，在右侧插入一个`Label`BackColor 设置为`Transparent`并设置`Text`为“Firstname”。

![在此处输入图像描述](../Images/19e7ba45336d42fdb2785b789f9fba89.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:34:15.243

只需创建一个新的文本框类

```
 public class MyTextBox : TextBox
    {

        public MyTextBox()
        {
            SetStyle(ControlStyles.UserPaint, true);
        }

     protected override void OnTextChanged(EventArgs e)
    {
        base.OnTextChanged(e);
        this.Invalidate();
    }

        protected override void OnPaint(PaintEventArgs e)
        {

 e.Graphics.DrawString(this.Text, this.Font, new SolidBrush(Color.Black), new System.Drawing.RectangleF(0, 0, this.Width , this.Height ), System.Drawing.StringFormat.GenericDefault);

            e.Graphics.DrawString("Lloyd", this.Font, new SolidBrush(Color.Red), new System.Drawing.RectangleF(0, 0, 100, 100), System.Drawing.StringFormat.GenericTypographic);
            base.OnPaint(e);
        }
    } 
```

对 Draw String 参数进行适当的更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T23:32:50.757

我认为这几乎可以满足您的需求：

```
public class MyTextBox : TextBox
{
    public const int WM_PAINT = 0x000F;

    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_PAINT:
                Invalidate();
                base.WndProc(ref m);
                if (!ContainsFocus && string.IsNullOrEmpty(Text))
                {
                    Graphics gr = CreateGraphics();
                    StringFormat format = new StringFormat();
                    format.Alignment = StringAlignment.Far;

                    gr.DrawString("Enter your name", Font, new SolidBrush(Color.FromArgb(70, ForeColor)), ClientRectangle, format);
                }
                break;
            default:
                base.WndProc(ref m);
                break;
        }
    }
} 
```

在 TextBox 上覆盖 OnPaint 通常不是一个好主意，因为插入符号的位置将被计算错误。

请注意，标签仅在 TextBox 为空且没有焦点时显示。但这就是大多数此类输入框的行为方式。

如果提示应该一直可见，您可以将其添加为标签：

```
public class MyTextBox : TextBox
{
    private Label cueLabel;

    public TextBoxWithLabel()
    {
        SuspendLayout();

        cueLabel = new Label();
        cueLabel.Anchor = AnchorStyles.Top | AnchorStyles.Right;
        cueLabel.AutoSize = true;
        cueLabel.Text = "Enter your name";
        Controls.Add(cueLabel);
        cueLabel.Location = new Point(Width - cueLabel.Width, 0);

        ResumeLayout(false);
        PerformLayout();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T00:45:51.403

创建一个由 3 个控件组成的组合，并将其放入另一个`UserControl`. 三个控制将是：

*   文本框，无边框
*   标签，在文本框的右侧
*   面板，承载他们两个的边界。

从 Hassan 那里拿走食谱，然后把它放在上面`UserControl`并将其用作一个新控件。

# android - 应用它不做......什么？

> ID：11602280
> 
> 赞同：0
> 
> 时间：2012-07-22T17:09:16.700
> 
> 标签：android

我正在修改我正在尝试编写的这个新通知的代码。似乎这样做会更简单，但由于某种原因它不同意我的看法。它没有给我任何东西。没有logcat，模拟器上没有输出。没有。所以这里是修改后的代码：

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.RemoteViews;

public class kickStart extends Activity {
NotificationManager nm;
Context context = this;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification();
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.note);
    contentView.setImageViewResource(R.id.icon, R.drawable.ic_launcher);
    contentView.setTextViewText(R.id.title, "Custom notification");
    contentView.setTextViewText(R.id.text, "This is a custom layout");
    notification.contentView = contentView;
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.contentIntent = contentIntent;
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    nm.notify(R.id.layout, notification);
}
} 
```

Logcat 没有给我任何信息它就像应用程序不存在，即使它说它已安装。

以下是一些其他有用的信息：

```
[2012-07-22 12:57:21 - this1] Android Launch!
[2012-07-22 12:57:21 - this1] adb is running normally.
[2012-07-22 12:57:21 - this1] Performing com.example.this1.kickStart activity launch
[2012-07-22 12:57:21 - this1] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'test'
[2012-07-22 12:57:21 - this1] Uploading this1.apk onto device 'emulator-5554'
[2012-07-22 12:57:23 - this1] Installing this1.apk...
[2012-07-22 12:57:31 - this1] Success!
[2012-07-22 12:57:32 - this1] Starting activity com.example.this1.kickStart on device emulator-5554
[2012-07-22 12:57:33 - this1] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.this1/.kickStart } 
```

所以它安装它知道它只是不会运行的启动器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:17:12.730

尝试为您的通知设置图标和tickerText：

```
notification.icon = R.drawable.small_notification;
notification.tickerText = "Text that scrolls across the status bar"; 
```

好吧，tickerText 是可选的，但图标是必需的。（当我想到它时这是有道理的，因为我们如何在状态栏中看到通知？）

从[通知的文档](http://developer.android.com/reference/android/app/Notification.html#icon)：

> 将不会显示具有无效图标资源的通知。

# wordpress - 如何在单列中显示第一篇文章，在 2 列中显示其他文章？WordPress

> ID：11602290
> 
> 赞同：0
> 
> 时间：2012-07-22T17:10:01.753
> 
> 标签：wordpress, loops, multiple-columns

我目前将所有帖子显示在一列中：

1
2
3
...

我想实现类似的目标：

1
23
4
56
...

有没有人知道我该怎么做？是否可以？非常感谢你:)

现在我有：

```
<?php if( $wp_query->current_post <= 0 ) : ?>
code for the first one column post
<?php else : ?>
the rest of the posts styled in columns
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:25:35.030

我为这个问题找到的解决方案是使用默认循环的 $wp_query->current_post，在添加到`functions.php`主题文件的过滤器函数中，当帖子的 div 是`post_class()`

```
function special_recurrent_post_class($classes) {
      if( is_home() ) {
      global $wp_query;
      $extra_classes = array('','specific','specific','');
      $classes[] = $extra_classes[$wp_query->current_post%count($extra_classes)];
      }
      return $classes;
}
add_filter('post_class', 'special_recurrent_post_class'); 
```

上面的示例将其限制为主页或帖子页面上的帖子；否则，您需要将代码标签更改`is_home()`为其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:31:02.190

只需使用这样的计数器：

```
// before loop
$ctr = 1; 

if ($ctr == 1) {
    *** code for one column; ***
    $ctr ++;
} else {
    *** code for two column; ***
    $ctr++
    if ($ctr == 4) $ctr = 1   // Reset the counter, back to one column
} 
```

# emacs - 如何限制 Emacs 中缓冲区的大小？

> ID：11602294
> 
> 赞同：4
> 
> 时间：2012-07-22T17:10:24.580
> 
> 标签：emacs

有什么方法可以限制 Emacs 中缓冲区的大小？已经检查过这个问题：[我可以限制 Emacs 中编译缓冲区的长度吗？](https://stackoverflow.com/questions/11239201/can-i-limit-the-length-of-the-compilation-buffer-in-emacs)但这不是我想要的。我想限制用户正在处理的缓冲区的大小，所以他不能放超过预定义的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:26:00.493

`message-mode`（将缓冲区置于此模式类型`M-x message-mode`）的示例

```
(define-key message-mode-map [remap self-insert-command]
  '(lambda () 
     (interactive)
     (let ((limit-buffer-size 30))
       (message "buffer-size is %i of %i" (buffer-size) limit-buffer-size)
       (if (< (buffer-size) limit-buffer-size)
       (call-interactively 'self-insert-command)
     (message "Maximum bufer size is %i characters" limit-buffer-size))))) 
```

请注意，用户仍然可以使用`yank`更多字符。另一种选择是重新映射`save-buffer`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T17:34:58.393

我看不到任何直接访问它的方法，你可以做的是：`pre-command-hook`如果命令是一个钩子，`self-insert-command`你可以检查它`buffer-size`是否低于你想要的长度。或者，您可以挂钩`post-self-insert-hook`以检查是否达到大小限制，撤消它并打印一条消息。对于所有这些，您将需要编写一个`minor-mode`在缓冲区中处于活动状态的内容。

# javascript - 对 Knockout js 选择框进行分类

> ID：11602303
> 
> 赞同：0
> 
> 时间：2012-07-22T17:11:19.533
> 
> 标签：javascript, data-binding, knockout.js, knockout-2.0

假设我有以下 knockoutjs 绑定

```
 var optionsWithCategory = [
  "Category: Person", // Category option should be disabled, or non-selectable
  "Jason",
  "John",

  "Category: Department",
  "Human Resource",
  "Sales"
];

<div id="selectBox">
<select databind="options: optionsWithCategory"></select>
</div> 
```

我可以采取哪些方法来添加`disable="disable"`到所有`options`文本值以`Category:`. 因此，`Person`实际上`Department`是不可选择的，但在选择框中充当分隔符。此外，该`select`框被动态添加到`selectBox`div 元素中。

我想出的一种方法是：

```
$('#selectBox').bind('DOMNodeInserted', function (e) {
    if (e.target.text != undefined && e.target.text.indexOf(':') >= 0) {
        $(e.target).attr("disabled", "disabled");
    }
}); 
```

但是好像不太优雅，有没有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:14:09.843

我不确定有什么干净的方法可以做到这一点，因为它有点不常见

但是您可以编写与您编写的代码类似的代码，或者您也可以创建自己的绑定处理程序来执行此操作。我建议使用绑定处理程序，因为它将所有逻辑封装在一个地方。

# null - extbase 存储库 findAll() 返回结果 null

> ID：11602307
> 
> 赞同：9
> 
> 时间：2012-07-22T17:11:35.443
> 
> 标签：null, repository, extbase, findall

我有几个这样的控制器：CategoryController 和 NewsController 以及类别和新闻的域模型以及两者的存储库。

在 NewsController 中，我像这样执行dependencyInjection（与 categoryController 中的方式相同）：

```
 /**
 * categoryRepository
 *
 * @var Tx_MyExtension_Domain_Repository_CategoryRepository
 */
protected $categoryRepository;

    /**
 * injectCategoryRepository
 *
 * @param Tx_MyExtension_Domain_Repository_CategoryRepository $CategoryRepository
 * @return void
 */
public function injectCategoryRepository(Tx_MyExtension_Domain_Repository_CategoryRepository $categoryRepository) {
    $this->categoryRepository = $categoryRepository;
} 
```

当我现在尝试这样的函数时：

```
 /**
 * action getCategoriesAjax
 *
 * @param Tx_MyExtension_Domain_Model_News
 * @return void
 */
public function getCategoriesAjaxAction() {
    $categories = $this->categoryRepository->findAll();
    $this->view->assign('categories',$categories);
} 
```

我得到一个空的结果。

对我来说奇怪的是，如果我在 CategoryController 中执行此操作，相同的函数会像魅力一样工作并返回数据库中的所有元素，对我来说更奇怪的是，**如果我执行 $this->categoryRepository-> findByUid(1) 我得到了正确的元素作为结果**。

我还在我的 categoryRepository 中添加了一个测试函数：

```
public function test(){
  $query = $this->createQuery();
  $result = $query->execute();
  $amount = $result.count();
} 
```

如果我从 categoryController 调用这个函数，我会得到正确数量的元素。如果我从我的 newsController 中调用它，我会得到“0”...

我不明白...

我想念什么？？？我的错误在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T12:01:17.373

这困扰了我好几天（或几周）。如果您未在 TypoScript 中的某处定义以下内容，则 StoragePid（对附加数据库项目的页面的引用）不会进入数据库查询：

```
plugin.tx_myextension.persistence.storagePid = 4 
```

将其放入您的 Page-TS 中，Tx_Extbase_Persistence_Repository 中的 findAll 方法应该可以正常工作。

周。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-01T10:08:39.867

或者您可以强制存储库忽略存储页面：

```
class MymodelRepository extends \TYPO3\CMS\Extbase\Persistence\Repository {
  public function initializeObject() {

  $this->defaultQuerySettings = $this->objectManager->get('TYPO3\\CMS\\Extbase\\Persistence\\Generic\\Typo3QuerySettings');
  $this->defaultQuerySettings->setRespectStoragePage(FALSE);
 }
} 
```

从现在开始，您的存储库将从数据库中提取每条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T09:55:48.063

你确定 findAll() 的返回值为 NULL 吗？

可能是您的**依赖注入**不起作用。那么异常应该是这样的：

> 在非对象（$this->categoryRepository）上调用 findAll()

同样在您的 injectCategoryRepository 中，您`$categoryRepository`使用**lowerCamelCase**和**UpperCamelCase的注释** `$CategoryRepository`

希望这可以帮助..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T11:13:05.607

正如 Hendrik 所说，您可以在页面 TS 中设置它。另一种解决方案是：在您的 BE 中，编辑包含插件的页面内容，选择存储数据库项目的 Sys 文件夹。这位于 Typo3 v6.1 的“行为”选项卡下

# c# - 确保文件从 Windows Phone 上传到 ASP.NET MVC 3

> ID：11602310
> 
> 赞同：3
> 
> 时间：2012-07-22T17:11:45.783
> 
> 标签：c#, asp.net-mvc-3, windows-phone

我正在开发一个 Windows Phone 应用程序。这个应用程序将让用户拍照并将它们上传到我的服务器。我已经成功地实现了这一点。但是，我注意到有时图片无法正确上传。我怀疑当有人在完成上传之前让应用程序进入睡眠状态时会发生这种情况。或者连接被中断。我真的不确定如何解决这个问题。我在这里包含了我的代码。我希望有人可以提供一些见解。

```
Client Side - Windows Phone App - Picture.cs
--------------------------------------------
public event EventHandler Upload_Succeeded;
public event EventHandler Upload_Failed;
public void Upload()
{
  try {
    WebRequest request = HttpWebRequest.Create(GetBackendPictureUploadUrl());
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";
    request.BeginGetRequestStream(new AsyncCallback(UploadBeginGetRequestStreamCallBack), request);
  } catch (Exception ex)
  {
    Upload_Failed(this, EventArgs.Empty);
  }
}

private void UploadBeginGetRequestStreamCallBack(IAsyncResult ar)
{
  try {
    StringBuilder sb = new StringBuilder();
    this.ImageBytes.ToList<byte>().ForEach(x => sb.AppendFormat("{0}.", Convert.ToUInt32(x)));

    Dictionary<string, string> parameters = new Dictionary<string, string>();
    parameters.Add("username", GetUsername());
    parameters.Add("pictureByts", sb.ToString());

    string data = string.Empty;
    foreach (string key in parameters.Keys)
    {
      data += key;
      data += "=";
      data += parameters[key];
      data += "&";
    }
    data = data.Substring(0, data.Length - 1);

    HttpWebRequest webRequest = (HttpWebRequest)(ar.AsyncState);
    using (Stream postStream = webRequest.EndGetRequestStream(ar))
    {
      byte[] byteArray = Encoding.UTF8.GetBytes(data);
      postStream.Write(byteArray, 0, byteArray.Length);
      postStream.Close();
    }
    webRequest.BeginGetResponse(new AsyncCallback(Upload_Completed), webRequest);
  } catch (Exception ex)
  {
    Upload_Failed(this, EventArgs.Empty);
  }
}

private void Upload_Completed(IAsyncResult result)
{
  Upload_Succeeded(this, EventArgs.Empty);
}

Server Size - ASP.NET MVC - MyController.cs
-------------------------------------------
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddPicture(string username, string pictureBytes)
{
  string path = ConfigurationManager.AppSettings["pictureDirectory"] + "/" + username + "/";
  if (Directory.Exists(path) == false)
    Directory.CreateDirectory(path);
  string filePath = path + "/" + Guid.NewGuid().ToString() + ".png";

  // Save the picture to the file system
  string[] bytesToConvert = pictureBytes.Split('.');
  List<byte> fileBytes = new List<byte>();
  bytesToConvert.ToList<string>().Where(x => !string.IsNullOrEmpty(x)).ToList<string>().ForEach(x => fileBytes.Add(Convert.ToByte(x)));

  using (FileStream fileStream = new FileStream(filePath, FileMode.Create))
  {
    byte[] bytes = fileBytes.ToArray();
    fileStream.Write(bytes, 0, bytes.Length);
    fileStream.Close();
  }
} 
```

我很混乱。在我看来，这段代码看起来不错。但我注意到文件正在我的服务器上写入。有时它们只是灰色图像。有时看起来图像的一部分是写的，但不是全部。我究竟做错了什么？如何确保文件完全上传/正确写入？必须有某种方法可以做到这一点。显然 Facebook 等正在这样做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:58:16.103

您需要在 Upload 方法中设置 ContentLength。为此，您应该在发出异步请求之前计算完成的数据缓冲区。然后您将获得所需的长度（在 UTF8 编码之后）。然后在回调发生时将数据提供给流。

# android - 使用 kSOAP 发送自定义对象

> ID：11602318
> 
> 赞同：1
> 
> 时间：2012-07-22T17:12:30.257
> 
> 标签：android, jboss, jax-ws, ksoap2, jbossws

我正在使用**ksoap2** (ksoap2-android-assembly-3.0.0-RC.1-jar-with-dependencies.jar) 将我的**android**应用程序与在**jboss 7** (jboss-as-7.1.1_Final & jbossws-cxf-4.0.2.GA) 与**jaxws** -2.2.6-2-20120518。

我能够获取任何数据（任何意味着我的自定义对象），但我无法发送它们。我已经关注[了这篇](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)文章。我的对象（名为“Frame”）正在实现 org.ksoap2.serialization.KvmSerializable。

我的请求包装类看起来像：

```
@XmlRootElement(name = "addFrame", namespace = "http://frame.service.server.android.i2.eu/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "addFrame", namespace = "http://frame.service.server.android.i2.eu/")
public class AddFrame {

    @XmlElement(name = "arg0")
    private Frame frame;

    public Frame getFrame() {
        return frame;
    }

    public void setFrame(Frame frame) {
        this.frame = frame;
    }
} 
```

当我尝试使用 java se 方法（javax.xml.namespace.QName & javax.xml.ws.Service）发送对象（不在 android 内部）时，对象被持久保存在我的 mssql 数据库中，所以我认为我的 android 存在一些问题客户端实现。

```
String namespace = "http://frame.service.server.android.i2.eu/";
String wsdl = "http://localhost:8080/AndroidServer/AndreyServices/FrameService?wsdl";
String action = "addFrame";
String method = "http://frame.service.server.android.i2.eu/addFrame";

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

SoapObject request = new SoapObject(namespace, action)

PropertyInfo info = new PropertyInfo();
info.setType(Frame.class);
info.setValue(frame);//frame as a java method parameter
info.setName("arg0");
request.addProperty(info);

envelope.setOutputSoapObject(request);

HttpTransportSE soapCall = new HttpTransportSE(wsdl);
soapCall.call(action, envelope); 
```

在此之后我收到：

*   安卓日志：

```
07-22 16:48:51.256: E/FRAME(1013): eu.i2.android.delegate.exception.DelegateException: SoapFault - faultcode: 'soap:Client' faultstring: 'Unmarshalling Error: null' faultactor: 'null'详细信息：空
07-22 16:48:51.256: E/FRAME(1013): eu.i2.android.interfaces.exceptions.CommunicationException: eu.i2.android.delegate.exception.DelegateException: SoapFault - faultcode: 'soap:Client' faultstring ：'解组错误：null'故障因素：'null'详细信息：null
07-22 16:48:51.256: E/FRAME(1013): at eu.i2.android.communication.Communication.addFrame(Communication.java:81)
07-22 16:48:51.256: E/FRAME(1013): 在 eu.u2.android.client.Client.onCreate(Client.java:54)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-22 16:48:51.256: E/FRAME(1013): 在 android.os.Handler.dispatchMessage(Handler.java:99)
07-22 16:48:51.256: E/FRAME(1013): 在 android.os.Looper.loop(Looper.java:123)
07-22 16:48:51.256: E/FRAME(1013): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
07-22 16:48:51.256: E/FRAME(1013): 在 java.lang.reflect.Method.invokeNative(Native Method)
07-22 16:48:51.256: E/FRAME(1013): 在 java.lang.reflect.Method.invoke(Method.java:521)
07-22 16:48:51.256: E/FRAME(1013): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-22 16:48:51.256: E/FRAME(1013): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-22 16:48:51.256：E/FRAME（1013）：在 dalvik.system.NativeStart.main（本机方法）
07-22 16:48:51.256: E/FRAME(1013): 由: eu.i2.android.delegate.exception.DelegateException: SoapFault - faultcode: 'soap:Client' faultstring: 'Unmarshalling Error: null' faultactor: “空”详细信息：空
07-22 16:48:51.256: E/FRAME(1013): 在 eu.i2.android.delegate.delegates.FrameDelegate.addFrame(FrameDelegate.java:152)
07-22 16:48:51.256: E/FRAME(1013): at eu.i2.android.communication.Communication.addFrame(Communication.java:79)
07-22 16:48:51.256: E/FRAME(1013): ... 14 更多
07-22 16:48:51.256: E/FRAME(1013): 原因: SoapFault - 故障代码: 'soap:Client' faultstring: 'Unmarshalling Error: null' faultactor: 'null' detail: null
07-22 16:48:51.256: E/FRAME(1013): 在 org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:141)
07-22 16:48:51.256: E/FRAME(1013): 在 org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
07-22 16:48:51.256: E/FRAME(1013): 在 org.ksoap2.transport.Transport.parseResponse(Transport.java:116)
07-22 16:48:51.256: E/FRAME(1013): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:235)
07-22 16:48:51.256: E/FRAME(1013): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
07-22 16:48:51.256: E/FRAME(1013): 在 eu.i2.android.delegate.AbstractDelegate$SoapCall.call(AbstractDelegate.java:219)
07-22 16:48:51.256: E/FRAME(1013): 在 eu.i2.android.delegate.delegates.FrameDelegate.addFrame(FrameDelegate.java:141)
07-22 16:48:51.256: E/FRAME(1013): ... 15 更多

```

*   服务器日志：

```
18:48:52,057 警告 [org.apache.cxf.phase.PhaseInterceptorChain] (http-localhost-127.0.0.1-8080-2) {http://frame.service.server.android.i2.eu/} 的拦截器AndreyServices#{http://frame.service.server.android.i2.eu/}addFrame 已抛出异常，现在展开：org.apache.cxf.interceptor.Fault: Unmarshalling Error: null
    在 org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall（JAXBEncoderDecoder.java:808）
    在 org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall（JAXBEncoderDecoder.java:642）
    在 org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:156)
    在 org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:109)
    在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    在 org.apache.cxf.transport.ChainInitiationObserver.onMessage（ChainInitiationObserver.java:121）
    在 org.apache.cxf.transport.http.AbstractHTTPDestination.invoke（AbstractHTTPDestination.java:207）
    在 org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:91)
    在 org.jboss.wsf.stack.cxf.transport.ServletHelper.callRequestHandler(ServletHelper.java:169)
    在 org.jboss.wsf.stack.cxf.CXFServletExt.invoke(CXFServletExt.java:87)
    在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    在 org.jboss.wsf.stack.cxf.CXFServletExt.service(CXFServletExt.java:135)
    在 org.jboss.wsf.spi.deployment.WSFServlet.service(WSFServlet.java:140) [jbossws-spi.jar:2.0.3.GA]
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    在 org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    在 java.lang.Thread.run（未知来源）[rt.jar:1.6.0_33]
引起：java.lang.NullPointerException
    在 org.apache.cxf.jaxb.io.DataReaderImpl$WSUIDValidationHandler.handleEvent(DataReaderImpl.java:69)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent（UnmarshallingContext.java:655）
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError（UnmarshallingContext.java:691）
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError（UnmarshallingContext.java:687）
    在 com.sun.xml.bind.v2.runtime.unmarshaller.Loader.handleParseConversionException（Loader.java:271）
    在 com.sun.xml.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:69)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:514)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.processText(StAXStreamConnector.java:339)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleEndElement(StAXStreamConnector.java:217)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:186)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:369)
    在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal（UnmarshallerImpl.java:348）
    在 org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall（JAXBEncoderDecoder.java:778）
    ... 29 更多

```

我没有在 jboss 模块中安装任何[jar](http://code.google.com/p/ksoap2-android/source/browse/#svn/m2-repo/com/google/code/ksoap2-android)。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:53:08.753

android 客户端中的 null 在类中缺少 SoapObjects 扩展，我建议在 android 上也使用 CXF 客户端，因为它会自动生成类。

[http://code.google.com/p/android-ws-client/](http://code.google.com/p/android-ws-client/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:28:16.590

谢谢您的回答。

我已经设法通过简单地编写实现 org.ksoap2.serialization.Marshal 的编组器类来解决我的问题。之后，正确构建了 CXF 拦截器流并且正确序列化了 SOAP 信封，因此我已将我的实现移至 android 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:22:29.967

每个字段都为空的问题主要是由于命名空间问题。您通过 SOAP 发送的数据未映射到服务器端的对象元素，因此它们为空/零。

我建议使用命名空间。

如果您在此处发布您的 WSDL 代码，对我们给出明确的答案会更有帮助。

也看看我的解决方案，我遇到了类似的问题。

[使用 ksoap2 将对象从 android 传递给 wcf soap 服务；它发送和接收 0](https://stackoverflow.com/questions/12846149/passing-objects-to-wcf-soap-service-from-android-using-ksoap2-it-sends-and-rece)

# android - 在 ARM 模拟器上编译以在 Android 手机上使用

> ID：11602319
> 
> 赞同：0
> 
> 时间：2012-07-22T17:12:33.313
> 
> 标签：android, c, arm, shared-libraries

所以我正在尝试在 ARM 模拟器（Quem 和 laungauge 是 C）上编译一个程序，以便在 Android 手机上使用。这是因为我无法在我的 android 手机上获得 build-essentials 和/或 cmake，但我确实有 Terminal Emulator 和 Busybox。

无论如何，我昨晚编译了程序（永远用了！），当我今天尝试在 Android 上运行它时，它最初是说 Permission Denied（即使我有 SU），我发现这是因为我需要将它作为可执行文件，但由于 sdcard 是 FAT32，我无法使用 chmod。所以我安装了 /system，并在 chmod 777 之后将二进制文件复制到那里。现在它给了我 ./myprogram: not found 即使它显然在那里。

做一些阅读，人们说这可能意味着缺少库，但是Android没有 ldd 命令，所以我不知道如何找出它缺少的东西。另外，可能会破坏游戏，但我发现我的手机在 ARMv7 上，而模拟器是 ARM926EJ-S，这会有所作为吗？

任何输入都很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:16:01.513

我在模拟器上编译没有什么意义（恕我直言）。使用交叉编译器来构建您的应用程序及其依赖项更有意义。请搜索有关使用 NDK 的信息。

# android - 在片段中调用 getView 返回 null

> ID：11602325
> 
> 赞同：0
> 
> 时间：2012-07-22T17:13:51.950
> 
> 标签：android, view, dialog, null, fragment

我真的很难过，我迫切希望找到解决方案：

我正在为我的应用程序中的片段使用 ABS 库。

这是`onCreateView`我的片段类中的方法：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    view = inflater.inflate(R.layout.details_fragment, container, false);

    prefs = getSherlockActivity().getSharedPreferences(prefName, getSherlockActivity().MODE_PRIVATE);

    day = Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(0, 2));
    month = Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(3, 5));
    year = Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(6, 10));

    name = (TextView)view.findViewById(R.id.nameEdit);
    age  = (TextView)view.findViewById(R.id.ageEdit);

    name.setText(prefs.getString(FIRST_NAME_KEY, "") + " " + prefs.getString(LAST_NAME_KEY, ""));
    age.setText(getAge(year, month, day) + " years");

    age.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showDatePickerDialog();

        }
    });
    return view;
}

public void update() {
    System.out.println(getView());
} 
```

这个 DateDialogPicker 类：

```
public class DatePickerFragment extends SherlockDialogFragment implements OnDateSetListener {

private SharedPreferences prefs;
private String prefName = "UserPref";
private static final String BIRTH_KEY = "date_of_birth";

private Date dateObj;
private FragmentDetails frag;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    prefs = getSherlockActivity().getSharedPreferences(prefName, getSherlockActivity().MODE_PRIVATE);

    frag = new FragmentDetails();

    final Calendar c = Calendar.getInstance();
    int day = Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(0, 2));
    int month = (Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(3, 5))-1);
    int year = Integer.parseInt(prefs.getString(BIRTH_KEY, "").substring(6, 10));

    return new DatePickerDialog(getSherlockActivity(), this, year, month, day);
}

@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
    // TODO Auto-generated method stub

    String _date = (dayOfMonth + "/" + (monthOfYear+1) + "/" + year);
    SharedPreferences.Editor editor = prefs.edit();

    editor.putString(BIRTH_KEY, formatDate(_date));
    editor.commit();

    FragmentDetails frag = new FragmentDetails();
    frag.update();

}   

private String formatDate(String date) {
    SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy"); 
    try {
        dateObj = curFormater.parse(date);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return (curFormater.format(dateObj));
}
} 
```

一切正常。但是我想通过在方法中调用 FragmentDetails 类的更新方法来更新日期集上片段的文本视图`onDateSet`。但是使用视图或方法访问 textview 会`getView()`返回*空指针异常*。

在这种情况下，方法`update()`打印`getView()`并且其结果为空。

如何获取片段的视图，以便我可以访问和管理该视图的文本视图。

**编辑**

到目前为止，我发现我可以在片段实例中访问片段的任何视图，但是当我创建一个新对话框时，我无法`getView`从对话框实例中访问该片段。

# caching - 从 MVC2 升级到 MVC4 后，ASP.NET 输出缓存不起作用

> ID：11602330
> 
> 赞同：0
> 
> 时间：2012-07-22T17:14:42.547
> 
> 标签：caching, asp.net-mvc-2, asp.net-mvc-4

我们有一个现有的 MVC2 项目，我们刚刚升级到 MVC4，首先按照[这些步骤](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)到达 MVC3，然后[按照这些步骤](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)到达 MVC4。

输出缓存在我们的 MVC2 项目中已经成功运行了很长时间，但是在 MVC4 版本之后它就不起作用了。

我添加了一个简单的控制器来测试缓存：

```
 public class TestController : Controller
 {
    [OutputCache(Duration = 600, VaryByParam = "*")]
    public ActionResult CacheTest()
    {
        return Content(DateTime.Now.ToLongTimeString());
    }
 } 
```

每次刷新此页面时，浏览器的时间输出都会更改。

在相同的解决方案中创建一个新的 MVC3 项目，然后升级到 MVC4，然后复制相同的代码按预期工作。

所以在我们现有的代码或配置中一定有什么东西破坏了输出缓存。

我还尝试从 web.config 文件中删除大量内容，认为某些东西会导致问题 - 不走运。

有关如何修复或调试此问题的任何建议？

**更新：**

在任何视图中呈现上面的 CacheTest 操作将显示缓存结果 - 即每次刷新时日期都不会改变：

```
<% Html.RenderAction("CacheTest", "Test"); %> 
```

为什么这行得通，但来自浏览器的操作 url 永远不会被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:39:17.603

原来这是第三方库的问题 - [51Degrees](http://51degrees.mobi/Support/Forum/tabid/65/forumid/2/threadid/1974/scope/posts/Default.aspx)。这是该库的最新版本中引入的一个问题。在从 MVC2 转换到 MVC4 的过程中，我安装了 nuget 包，它比我使用的前一个版本晚了几个版本。

误报 - 与 ASP.NET MVC 升级或任何与 ASP.NET 相关的内容无关。

# c - 在 C 中使用宏时输出出现一些错误

> ID：11602331
> 
> 赞同：2
> 
> 时间：2012-07-22T17:14:43.400
> 
> 标签：c

我的代码是：-

```
#include<stdio.h>
#include<conio.h>

#define sq(x) x*x*x

  void main()
  {
    printf("Cube is : %d.",sq(6+5));
    getch();
  } 
```

输出是： -

```
Cube is : 71. 
```

现在请帮我弄清楚为什么输出是 71 而不是 1331 ......

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T17:16:58.753

总是用括号屏蔽你的宏参数：

```
#define sq(x) ((x) * (x) * (x)) 
```

考虑不带括号的评估：

```
6 + 5 * 6 + 5 * 6 + 5 
```

回想一下，`*`它的优先级高于`+`，所以这是：

```
6 + 30 + 30 + 5 = 71; 
```

如果您还没有了解优先规则，请了解：http: [//en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T17:15:43.400

您需要在参数周围加上括号。

```
#define sq(x) ((x)*(x)*(x)) 
```

没有括号，表达式将扩展为：

```
6+5*6+5*6+5 
```

您可以看到为什么它会评估为`71`.

更安全的解决方案是使用内联函数。但是，您需要为每种类型定义一个不同的类型。重命名宏也可能更清楚。

```
static inline int cube_int (int x) { return x*x*x; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T17:18:55.257

如果你这样定义宏：

```
#define sq(x) x*x*x 
```

并称之为：

```
sq(6+5); 
```

预处理器将生成以下代码：

```
6+5*6+5*6+5 
```

这就是，由于运算符优先级，相当于：

```
6+(5*6)+(5*6)+5 
```

这就是为什么宏参数必须用括号括起来的原因：

```
#define sq(x) (x)*(x)*(x) 
```

这样预处理器的输出就变成了：

```
(6+5)*(6+5)*(6+5) 
```

但是，如果您传递一些带有副作用的参数，例如 (i++)：

```
sq(i++) 
```

它将扩展为：

```
(i++)*(i++)*(i++) 
```

所以，要小心，也许你需要一个函数

# java - 从 Oauth2 Google Contacts API 获取用户信息

> ID：11602334
> 
> 赞同：7
> 
> 时间：2012-07-22T17:15:08.240
> 
> 标签：java, google-api, oauth-2.0, google-contacts-api, userinfo

我得到的错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Invalid Credentials",
    "reason" : "authError"
  } ],
  "message" : "Invalid Credentials"
} 
```

下面的代码，我正在使用：

```
GoogleCredential credential = new GoogleCredential.Builder()
    .setTransport(this.TRANSPORT).setJsonFactory(this.JSON_FACTORY)
    .setClientSecrets(Constants.CLIENT_ID, Constants.CLIENT_SECRET).build();
credential.setAccessToken(tokenResponse.getAccessToken());
credential.setAccessToken(tokenResponse.getRefreshToken()); 
```

到这里，我得到了刷新令牌、访问令牌等

```
Oauth2 userInfoService = new Oauth2.Builder(this.TRANSPORT,
        this.JSON_FACTORY, credential.getRequestInitializer())
        .setApplicationName(Constants.APPLICATION_NAME).build(); 
```

它在以下行失败：（不知道，为什么？）

```
Userinfo userInfo = userInfoService.userinfo().get().execute(); 
```

我在网上搜索，我得到的例子和稀有材料非常少。任何机构对此有任何想法？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T00:54:16.920

我猜**credential.getRequestInitializer()**为空。

我已经通过像这样为凭证对象设置自定义请求初始化程序来解决这个问题

```
GoogleCredential credential = new GoogleCredential.Builder()
.setTransport(this.TRANSPORT).setJsonFactory(this.JSON_FACTORY)
.setClientSecrets(Constants.CLIENT_ID, Constants.CLIENT_SECRET).setRequestInitializer((new HttpRequestInitializer(){
                @Override
                public void initialize(HttpRequest request)
                        throws IOException {
                    request.getHeaders().put("Authorization", "Bearer " + accessToken);
                }
            })).build() 
```

Google 的[文档](https://developers.google.com/accounts/docs/OAuth2Login)具体说明了以下内容：

** 例如，使用 access_token 查询字符串参数调用 UserInfo API 如下所示：

GET [https://www.googleapis.com/oauth2/v1/userinfo?access_token=](https://www.googleapis.com/oauth2/v1/userinfo?access_token=) {accessToken} 使用 HTTP 标头中的访问令牌对同一 API 的调用如下所示：

GET /oauth2/v1/userinfo HTTP/1.1 授权：Bearer {accessToken} 主机：googleapis.com**

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-19T15:59:18.897

如果您已经获得了访问令牌 ( [GoogleTokenResponse](https://developers.google.com/api-client-library/java/google-api-java-client/reference/1.19.1/com/google/api/client/googleapis/auth/oauth2/GoogleTokenResponse) )，那么您也可以这样做：

```
HttpTransport transport = new NetHttpTransport();

List<String> applicationScopes = Arrays.asList(
  PlusScopes.USERINFO_EMAIL,
  PlusScopes.USERINFO_PROFILE
);

GoogleAuthorizationCodeFlow flow
  = new GoogleAuthorizationCodeFlow.Builder(
    transport,
    JacksonFactory.getDefaultInstance(),
    "your-client-id.apps.googleusercontent.com",
    "your-client-secret",
    applicationScopes).build();

String userId = googleTokenResponse.parseIdToken().getPayload().getSubject();
Credential credential = flow.createAndStoreCredential(googleTokenResponse, userId);
HttpRequestFactory requestFactory = transport.createRequestFactory(credential);

GenericUrl url = new GenericUrl("https://www.googleapis.com/oauth2/v1/userinfo");
HttpRequest request = requestFactory.buildGetRequest(url);
String userIdentity = request.execute().parseAsString(); 
```

然后`userIdentity`看起来像这样：

```
{
  "id": "105358994046791627189",
  "name": "Benny Neugebauer",
  "given_name": "Benny",
  "family_name": "Neugebauer",
  "link": "https://plus.google.com/+BennyNeugebauer",
  "picture": "https://lh4.googleusercontent.com/-dtvDIXCEtFc/AAAAAAAAAAI/AAAAAAAAAoE/1CKd3nH9rRo/photo.jpg",
  "gender": "male",
  "locale": "de"
} 
```

如果您愿意，可以`userIdentity`使用 Jackson 将其解析为您自己的类：

```
ObjectMapper mapper = new org.codehaus.jackson.map.ObjectMapper();
mapper.readValue(userIdentity, YourUser.class); 
```

以下是我用于此示例的依赖项：

```
<dependency>
  <groupId>com.google.apis</groupId>
  <artifactId>google-api-services-plus</artifactId>
  <version>v1-rev401-1.22.0</version>
</dependency>

<dependency>
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-mapper-asl</artifactId>
  <version>1.9.13</version>
  <type>jar</type>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:15:13.217

为了从 Userinfo API 检索数据，您必须请求访问其 OAuth 范围：

[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

`https://www.googleapis.com/auth/userinfo.email`如果要检索电子邮件地址，还请添加范围。

在您的代码中，我看不到您在哪里设置了您请求访问的 OAuth 范围。

# php - 如何更改 Symfony2 中的角色层次结构存储？

> ID：11602337
> 
> 赞同：27
> 
> 时间：2012-07-22T17:15:28.630
> 
> 标签：php, symfony

在我的项目中，我需要将角色层次结构存储在数据库中并动态创建新角色。在 Symfony2 中，角色层次结构`security.yml`默认存储在其中。我发现了什么：

有一个服务`security.role_hierarchy`（`Symfony\Component\Security\Core\Role\RoleHierarchy`）；此服务在构造函数中接收角色数组：

```
public function __construct(array $hierarchy)
{
    $this->hierarchy = $hierarchy;

    $this->buildRoleMap();
} 
```

并且`$hierarchy`财产是私有的。

据我了解，此参数来自`\Symfony\Bundle\SecurityBundle\DependencyInjection\SecurityExtension::createRoleHierarchy()` 使用配置中的角色的构造函数：

```
$container->setParameter('security.role_hierarchy.roles', $config['role_hierarchy']);
```

在我看来，最好的方法是从数据库中编译一组角色并将其设置为服务的参数。但我还没有明白怎么做。

我看到的第二种方法是定义我自己的`RoleHierarchy`继承自基类的类。但是由于在基`RoleHierarchy`类中该`$hierarchy`属性被定义为私有，所以我必须重新定义基`RoleHierarchy`类中的所有函数。但我认为这不是一个好的 OOP 和 Symfony 方式......

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-11T18:19:30.270

解决方案很简单。首先，我创建了一个角色实体。

```
class Role
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @ORM\ManyToOne(targetEntity="Role")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
     **/
    private $parent;

    ...
} 
```

之后创建了一个 RoleHierarchy 服务，从 Symfony 原生服务扩展而来。我继承了构造函数，在那里添加了一个 EntityManager 并提供了一个带有新角色数组而不是旧角色数组的原始构造函数：

```
class RoleHierarchy extends Symfony\Component\Security\Core\Role\RoleHierarchy
{
    private $em;

    /**
     * @param array $hierarchy
     */
    public function __construct(array $hierarchy, EntityManager $em)
    {
        $this->em = $em;
        parent::__construct($this->buildRolesTree());
    }

    /**
     * Here we build an array with roles. It looks like a two-levelled tree - just 
     * like original Symfony roles are stored in security.yml
     * @return array
     */
    private function buildRolesTree()
    {
        $hierarchy = array();
        $roles = $this->em->createQuery('select r from UserBundle:Role r')->execute();
        foreach ($roles as $role) {
            /** @var $role Role */
            if ($role->getParent()) {
                if (!isset($hierarchy[$role->getParent()->getName()])) {
                    $hierarchy[$role->getParent()->getName()] = array();
                }
                $hierarchy[$role->getParent()->getName()][] = $role->getName();
            } else {
                if (!isset($hierarchy[$role->getName()])) {
                    $hierarchy[$role->getName()] = array();
                }
            }
        }
        return $hierarchy;
    }
} 
```

...并将其重新定义为服务：

```
<services>
    <service id="security.role_hierarchy" class="Acme\UserBundle\Security\Role\RoleHierarchy" public="false">
        <argument>%security.role_hierarchy.roles%</argument>
        <argument type="service" id="doctrine.orm.default_entity_manager"/>
    </service>
</services> 
```

就这样。也许，我的代码中有一些不必要的东西。也许可以写得更好。但我认为，这个主要思想现在很明显。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-07T14:01:57.910

我已经做了类似 zIs 的相同操作（将 RoleHierarchy 存储在数据库中），但我无法像 zIs 那样在 Constructor 中加载完整的角色层次结构，因为我必须在`kernel.request`事件中加载自定义原则过滤器。构造函数将在**之前**被调用，`kernel.request`所以这对我来说是没有选择的。

因此，我检查了安全组件，发现`Symfony`调用了一个自定义`Voter`来`roleHierarchy`根据用户角色进行检查：

```
namespace Symfony\Component\Security\Core\Authorization\Voter;

use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Role\RoleHierarchyInterface;

/**
 * RoleHierarchyVoter uses a RoleHierarchy to determine the roles granted to
 * the user before voting.
 *
 * @author Fabien Potencier <fabien@symfony.com>
 */
class RoleHierarchyVoter extends RoleVoter
{
    private $roleHierarchy;

    public function __construct(RoleHierarchyInterface $roleHierarchy, $prefix = 'ROLE_')
    {
        $this->roleHierarchy = $roleHierarchy;

        parent::__construct($prefix);
    }

    /**
     * {@inheritdoc}
     */
    protected function extractRoles(TokenInterface $token)
    {
        return $this->roleHierarchy->getReachableRoles($token->getRoles());
    }
} 
```

getReachableRoles 方法返回用户可以成为的所有角色。例如：

```
 ROLE_ADMIN
         /             \
     ROLE_SUPERVISIOR  ROLE_BLA
        |               |
     ROLE_BRANCH       ROLE_BLA2
       |
     ROLE_EMP

or in Yaml:
ROLE_ADMIN:       [ ROLE_SUPERVISIOR, ROLE_BLA ]
ROLE_SUPERVISIOR: [ ROLE_BRANCH ]
ROLE_BLA:         [ ROLE_BLA2 ] 
```

如果用户分配了 ROLE_SUPERVISOR 角色，则该方法返回角色 ROLE_SUPERVISOR、ROLE_BRANCH 和 ROLE_EMP（实现 RoleInterface 的角色对象或类）

此外，如果没有在`security.yaml`

```
private function createRoleHierarchy($config, ContainerBuilder $container)
    {
        if (!isset($config['role_hierarchy'])) {
            $container->removeDefinition('security.access.role_hierarchy_voter');

            return;
        }

        $container->setParameter('security.role_hierarchy.roles', $config['role_hierarchy']);
        $container->removeDefinition('security.access.simple_role_voter');
    } 
```

为了解决我的问题，我创建了自己的自定义 Voter 并扩展了 RoleVoter-Class：

```
use Symfony\Component\Security\Core\Authorization\Voter\RoleVoter;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Acme\Foundation\UserBundle\Entity\Group;
use Doctrine\ORM\EntityManager;

class RoleHierarchyVoter extends RoleVoter {

    private $em;

    public function __construct(EntityManager $em, $prefix = 'ROLE_') {

        $this->em = $em;

        parent::__construct($prefix);
    }

    /**
     * {@inheritdoc}
     */
    protected function extractRoles(TokenInterface $token) {

        $group = $token->getUser()->getGroup();

        return $this->getReachableRoles($group);
    }

    public function getReachableRoles(Group $group, &$groups = array()) {

        $groups[] = $group;

        $children = $this->em->getRepository('AcmeFoundationUserBundle:Group')->createQueryBuilder('g')
                        ->where('g.parent = :group')
                        ->setParameter('group', $group->getId())
                        ->getQuery()
                        ->getResult();

        foreach($children as $child) {
            $this->getReachableRoles($child, $groups);
        }

        return $groups;
    }
} 
```

注意事项：我的设置类似于 zls 的设置。我对角色的定义（在我的例子中，我称之为组）：

```
Acme\Foundation\UserBundle\Entity\Group:
    type: entity
    table: sec_groups
    id: 
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        name:
            type: string
            length: 50
        role:
            type: string
            length: 20
    manyToOne:
        parent:
            targetEntity: Group 
```

和用户定义：

```
Acme\Foundation\UserBundle\Entity\User:
    type: entity
    table: sec_users
    repositoryClass: Acme\Foundation\UserBundle\Entity\UserRepository
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        username:
            type: string
            length: 30
        salt:
            type: string
            length: 32
        password:
            type: string
            length: 100
        isActive:
            type: boolean
            column: is_active
    manyToOne:
        group:
            targetEntity: Group
            joinColumn:
                name: group_id
                referencedColumnName: id
                nullable: false 
```

也许这对某人有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-16T08:25:39.403

我开发了一个捆绑包。

你可以在[https://github.com/Spomky-Labs/RoleHierarchyBundle找到它](https://github.com/Spomky-Labs/RoleHierarchyBundle)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-26T13:24:45.697

我的解决方案受到 zls 提供的解决方案的启发。他的解决方案对我来说非常有效，但是角色之间的一对多关系意味着拥有一个巨大的角色树，这将变得难以维护。此外，如果两个不同的角色想要继承一个相同的角色（因为只能有一个父级），则可能会出现问题。这就是为什么我决定创建一个多对多的解决方案。我首先将其放在角色类中，而不是只有父级：

```
/**
 * @ORM\ManyToMany(targetEntity="Role")
 * @ORM\JoinTable(name="role_permission",
 *      joinColumns={@ORM\JoinColumn(name="role_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="permission_id", referencedColumnName="id")}
 *      )
 */
protected $children; 
```

之后，我像这样重写了 buildRolesTree 函数：

```
private function buildRolesTree()
{
    $hierarchy = array();
    $roles = $this->em->createQuery('select r, p from AltGrBaseBundle:Role r JOIN r.children p')->execute();

    foreach ($roles as $role)
    {
        /* @var $role Role */
        if (count($role->getChildren()) > 0)
        {
            $roleChildren = array();

            foreach ($role->getChildren() as $child)
            {
                /* @var $child Role */
                $roleChildren[] = $child->getRole();
            }

            $hierarchy[$role->getRole()] = $roleChildren;
        }
    }

    return $hierarchy;
} 
```

结果是能够创建几个易于维护的树。例如，您可以拥有定义 ROLE_SUPERADMIN 角色的角色树和定义 ROLE_ADMIN 角色的完全独立的树，并在它们之间共享多个角色。虽然应该避免循环连接（角色应该布置成树，它们之间没有任何循环连接），但如果它真的发生应该没有问题。我没有对此进行测试，但是通过 buildRoleMap 代码，很明显它会转储任何重复项。这也应该意味着如果发生循环连接，它不会陷入无限循环，但这肯定需要更多测试。

我希望这对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-15T23:36:47.563

由于角色层次结构不经常更改，因此这是一个快速缓存到 memcached 的类。

```
<?php

namespace .....;

use Symfony\Component\Security\Core\Role\Role;
use Symfony\Component\Security\Core\Role\RoleHierarchyInterface;
use Lsw\MemcacheBundle\Cache\MemcacheInterface;

/**
 * RoleHierarchy defines a role hierarchy.
 */
class RoleHierarchy implements RoleHierarchyInterface
{
    /**
     *
     * @var MemcacheInterface 
     */
    private $memcache;

    /**
     *
     * @var array 
     */
    private $hierarchy;

    /**
     *
     * @var array 
     */
    protected $map;

    /**
     * Constructor.
     *
     * @param array $hierarchy An array defining the hierarchy
     */
    public function __construct(array $hierarchy, MemcacheInterface $memcache)
    {
        $this->hierarchy = $hierarchy;

        $roleMap = $memcache->get('roleMap');

        if ($roleMap) {
            $this->map = unserialize($roleMap);
        } else {
            $this->buildRoleMap();
            // cache to memcache
            $memcache->set('roleMap', serialize($this->map));
        }
    }

    /**
     * {@inheritdoc}
     */
    public function getReachableRoles(array $roles)
    {
        $reachableRoles = $roles;
        foreach ($roles as $role) {
            if (!isset($this->map[$role->getRole()])) {
                continue;
            }

            foreach ($this->map[$role->getRole()] as $r) {
                $reachableRoles[] = new Role($r);
            }
        }

        return $reachableRoles;
    }

    protected function buildRoleMap()
    {
        $this->map = array();
        foreach ($this->hierarchy as $main => $roles) {
            $this->map[$main] = $roles;
            $visited = array();
            $additionalRoles = $roles;
            while ($role = array_shift($additionalRoles)) {
                if (!isset($this->hierarchy[$role])) {
                    continue;
                }

                $visited[] = $role;
                $this->map[$main] = array_unique(array_merge($this->map[$main], $this->hierarchy[$role]));
                $additionalRoles = array_merge($additionalRoles, array_diff($this->hierarchy[$role], $visited));
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-28T05:46:46.450

我希望这能帮到您。

```
function getRoles()
{

  //  return array(1=>'ROLE_ADMIN',2=>'ROLE_USER'); 
   return array(new UserRole($this));
} 
```

您可以从哪里得到一个好主意， [在哪里定义安全角色？](https://stackoverflow.com/questions/10024545/symfony2-where-define-roles)

[http://php-and-symfony.matthiasnoback.nl/（2012](http://php-and-symfony.matthiasnoback.nl/) 年 7 月 28 日）

# linq - 在 Linq 查询中 Where 子句的位置是否重要？

> ID：11602338
> 
> 赞同：0
> 
> 时间：2012-07-22T17:15:39.407
> 
> 标签：linq, linq-to-sql

我在 C# 项目中有这个 linq 查询

```
 var query = from p in db.Posts
                    join a in db.Author on p.Author equals a
                    join u in db.Users on p.PostedBy equals u
                    where p.IsActive.Equals(true)
                    orderby p.PostedDate descending
                    select new ViewModel
                    {
                        ...
                    }; 
```

如果我`where p.IsActive.Equals(true)`靠近`from p in db.Posts`，比如

```
 var query = from p in db.Posts
                    where p.IsActive.Equals(true) //Moved
                    join a in db.Author on p.Author equals a
                    join u in db.Users on p.PostedBy equals u
                    orderby p.PostedDate descending
                    select new ViewModel
                    {
                        ...
                    }; 
```

它会对查询的性能产生任何影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:20:02.927

我不确定如果你这样做它会起作用，但如果你将它用于 SQL 数据库，它应该不会有任何区别。这两个查询都将被转换为 SQL，如下所示：

```
SELECT ...
FROM Posts INNER JOIN Author ON ... INNER JOIN Users ON ...
WHERE Posts.IsActive = true
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:27:44.490

关于性能，我强烈建议将连接放在任何位置之前。

原因是，连接已经形成了一个较小的集合（p 是从 Posts 中选择的，然后只采用来自 Author 和 Users 的匹配行。

相反，如果您在开始附近有一个 where ，则会计算一个 caresian（大）产品，然后对其进行过滤。（在您的特殊情况下，只有一个表受到影响，但查询可能会在某个时候改变，没有人知道为什么它很慢）。

请阅读此 SO[为什么 LINQ 加入比 LINQ 快得多 where](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

还有更多关于您的特殊情况：由于这会影响数据库，因此两个查询中的结果 SQL 语句应该相同。看看它！

# ios - 核心图像 - 为颜色切换透明

> ID：11602342
> 
> 赞同：3
> 
> 时间：2012-07-22T17:15:48.873
> 
> 标签：ios, cocoa-touch, core-image

这里肯定有很多有趣的 Core Image 颜色遮罩问题，但大多数（如果不是全部的话）（我见过的）都有“准备使用”、“为问题量身定制”的代码片段。

这很好，但它们大部分也是以速记的方式编写的，没有解释每个部分实际上在做什么。

我有一个图像，其中一部分是透明的，我的目标是使用 Core Image 将**透明部分转换为所选颜色**，*并将*图像的**白色部分转换为透明**。

谁能给我一些关于如何做到这一点的解释？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:30:40.473

我刚刚找到了一个要点，可以在这里找到它：

[https://gist.github.com/1292152](https://gist.github.com/1292152)

它是 UIImage 类别中的一组方法，它允许您删除和替换图像的颜色。

# c++ - 将鼠标单击事件添加到使用 QtCreator 创建的 QGraphicsView

> ID：11602346
> 
> 赞同：2
> 
> 时间：2012-07-22T17:16:36.127
> 
> 标签：c++, qt, qt-creator

有没有办法在不创建另一个类并继承 QGraphicsView 的情况下为创建的 QGraphicsView 创建事件？我想知道是否有办法做这样的事情：

```
ui->gView->AddEvent(click, functionName); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:57:18.063

如果要处理视图的鼠标单击事件，请在视图中安装[事件过滤器](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)并监视[`MouseButtonPress`](http://qt-project.org/doc/qt-4.8/qevent.html#Type-enum)事件。

# sqlite - 我可以防止在 SQLite 中自动生成 ROWID 吗？

> ID：11602347
> 
> 赞同：0
> 
> 时间：2012-07-22T17:16:42.763
> 
> 标签：sqlite, rowid

据我所知，SQLite 会自动生成 ROWID。（不管它是 AUTOINCREMENT 还是现在）但我想明确提供 ROWID，如果在 INSERT 上未指定 ROWID，则会引发错误。而不是自动生成。

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:35:44.917

您可以定义自己的 AUTOINCREMENT 字段 (fe "id")。如果您定义一个 AUTOINCREMENT 字段，您可以通过“Fieldname (id?)”或关键字“rowid”来选择它。

# actionscript-3 - Actionscript 屏幕空闲

> ID：11602353
> 
> 赞同：3
> 
> 时间：2012-07-22T17:17:17.813
> 
> 标签：actionscript-3, timeout, screen, python-idle

我制作了一个小型 Flash 程序来帮助我进行锻炼，但由于电脑屏幕太长，电脑屏幕会闲置。看起来在 android 上有一个解决方案，但是否有一个仅适用于常规 flash 程序的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:31:55.790

如果这是一个 AIR 应用程序，禁用屏幕超时设置：

```
NativeApplication.nativeApplication.systemIdleMode = SystemIdleMode.KEEP_AWAKE; 
```

如果这是在浏览器中运行的 Flash，我认为这是不可能的。

# html - 建立响应式网站的各种方法是什么？

> ID：11602354
> 
> 赞同：-1
> 
> 时间：2012-07-22T17:17:19.153
> 
> 标签：html, css, responsive-design, media-queries

响应式网页设计正在迅速追赶。我知道 twitter Bootstrap 是目前最好的框架作品之一。但我只是想知道其他选择是什么。我看过几个响应式网站，我不确定它们是否是使用 twitter 引导带构建的。我所说的网站是[粉碎杂志](http://www.smashingmagazine.com/)和[css技巧](http://css-tricks.com/)。有谁知道他们是如何响应的，他们使用 twitter bootstrap 还是任何其他框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:04:01.033

实际上**响应式网页设计**包括三个要素：**流体网格**、**灵活图像**和**媒体查询**。如果您有兴趣学习如何使用 RWD 技术构建 Web，我建议您阅读**Ethan Marcotte**的[响应式网页设计](http://www.abookapart.com/products/responsive-web-design)一书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:20:33.357

他们都使用自己的自定义 CSS 代码。对于一个拥有如此大量定制设计的网站，基于 Bootstrap 并没有多大意义。

话虽如此，如果您不介意在完全定义的代码之上构建，Bootstrap 是一个很棒的框架。

对于响应式设计，@media 查询是您唯一需要的。Bootstrap 只是一个非常定义的框架，它也使用@media 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:11:46.713

答案有点晚了，但现在有很多响应式前端框架： 例如[Twitter Bootstrap](http://twitter.github.com/bootstrap/)或[Foundation](http://foundation.zurb.com/)（我是两者的粉丝）。

它们的优势在于非常高水平的定制、流体网格组件、媒体查询和许多其他特性/功能。灵活性足以说明问题。

当然，这些只是起点，您可以根据需要自定义它们。社区不断产生新的想法，例如[bootstrapcdn.com](http://bootstrapcdn.com)，提供快速加载的引导文件以供使用...

要考虑的最重要的因素之一是您的响应式网站可以支持多少个屏幕？3? 4？5? （PC、平板电脑、智能手机、电视等）以及您的网站如何降级以支持不同的屏幕尺寸。

# javascript - iframe Back with javascript - 避免主页返回

> ID：11602355
> 
> 赞同：2
> 
> 时间：2012-07-22T17:17:27.597
> 
> 标签：javascript, html, iframe

我正在使用`iframe`，并且我有一个运行此javascript代码的后退按钮（当用户单击后退按钮时）：

```
document.getElementById("myframe").contentWindow.history.go(-1); // back 
```

这工作正常，但如果框架中没有上一页，主页面将返回。

如何避免这种情况？我只想 iframe 返回，如果没有上一页，则什么也不做。

编辑：[这](http://jsfiddle.net/Brpj6/)是我的代码。(@jsfiddle)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:38:45.123

跟踪这样的变化：

```
<script>
    window.iFrameChanges = -1; //will get incremented to 0 on first page load
</script>

<iframe onLoad="window.iFrameChanges+=1;" src="..."></iframe> 
```

历史价值的减少`window.iFrameChanges`可以追溯到

这样你就可以知道历史的“长度”

# php - 在非对象上调用成员函数 attributes()

> ID：11602356
> 
> 赞同：-1
> 
> 时间：2012-07-22T17:17:41.077
> 
> 标签：php, attributes, simplexml

我想做的是使用 simplexml 从 Youtube 视频 URL 读取内容 xml 标记，但是当我添加属性函数时，它给了我错误：

在非对象上调用成员函数 attributes()

php代码：

```
$xml = simplexml_load_file("http://gdata.youtube.com/feeds/api/videos/FS5uQpBp8XI/related?v=2");

$content = $xml->children("http://search.yahoo.com/mrss/")->group->content[0]->attributes();

$src = $content->url;

echo $src; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:28:13.220

You are calling a method that is not belong to the simple xml object. Try to use the print_r so you can find which attribute are you suppose to print out

# ruby-on-rails - active_admin 仪表板，update_attribute 覆盖每个类成员中的相同属性

> ID：11602358
> 
> 赞同：0
> 
> 时间：2012-07-22T17:17:56.980
> 
> 标签：ruby-on-rails, ruby, activeadmin

我需要将当前订单的 :released 设置为 true

```
 section "Recent orders" do
      table_for Order.where(:released => false).all do |t|
        t.column("Status") {|order| status_tag (order.released ? "Done" : "Pending"), (order.released ? :ok : :error) }
        t.column("User"){|order| link_to order.user.username , admin_user_path(order.user)}
        t.column("Created"){|order| order.created_at.to_formatted_s(:short)}
        t.column("Price") {|order| order.total_price}
        t.column("Actions"){|order| button_tag(:type => 'button') do order.update_attribute(:released, true)  end}     
      end
    end 
```

按下按钮后，表中的所有订单都设置为：释放为真。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:11:50.590

我不知道你在哪里看到你可以做到这一点。渲染时对每个订单进行评估。不是在按下按钮时。

无论如何，请查看文档的此页面以了解如何创建不同的操作，例如您不想要的操作[http://activeadmin.info/docs/8-custom-actions.html#member_actions](http://activeadmin.info/docs/8-custom-actions.html#member_actions)

# android - 在 C 中为 Android 编译一个库

> ID：11602366
> 
> 赞同：1
> 
> 时间：2012-07-22T17:19:18.843
> 
> 标签：android, c, android-ndk

我已经安装了 SDK、NDK、JDK 和 Cygwin。我想知道我是否需要编辑库的代码以使它们为 Android（armv7）编译。

我基本上需要为 Android 移植各种 C 应用程序，但它们都依赖于 PCRE、OpenSSL 等第三方库。我的经验告诉我，PCRE 在 Windows 上编译时没有错误，但我们在这里谈论的是 Android（运行 Linux 内核）。

我是否需要为库中的每个函数编写一个 C 包装器以满足 JNI 调用约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:55:37.427

Android NDK 将编译标准 C 语法，但 Android 没有与桌面相同的 C stdlib 库；相反，它有自己的替代方案，称为仿生。有时当你编译大型项目时，你会遇到仿生不支持的 stdlib 函数调用，你必须采取一个小的解决方法。

有时流行的库具有现有的 JNI 包装器，否则您必须为应用程序调用的函数进行 JNI 调用。

# java - 如何使 Java 中的 TextArea 变黑？

> ID：11602369
> 
> 赞同：0
> 
> 时间：2012-07-22T17:20:14.333
> 
> 标签：java, textarea

我想让我的`TextArea` *黑色*而不是*白色*。我希望制作`Window`全屏，整个屏幕都是黑色的`TextArea`，*并且*有*白色*的字母。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:21:35.177

试试这个..

```
JTextArea txt = new JTextArea();
txt.setBackground(Color.BLACK);
txt.setForeground(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:24:03.910

对于摆动组件

```
JTextArea txt = new JTextArea();
//Set background black
txt.setBackground(Color.BLACK); 
//Set Foreground(text) white
txt.setForeground(Color.WHITE); 
```

awt 组件也是如此

```
TextArea txt = new TextArea();
//Set background black
txt.setBackground(Color.BLACK); 
//Set Foreground(text) white
txt.setForeground(Color.WHITE); 
```

`setForeground`and`setBackground`方法属于`JComponent`/类，因此`Component`每个组件都可以访问，因为所有 Swing/AWT 组件在层次结构中的某个位置都将扩展这些类。

# jquery - 如何让我的 jQuery LavaLamp 效果减少故障

> ID：11602372
> 
> 赞同：1
> 
> 时间：2012-07-22T17:20:22.400
> 
> 标签：jquery, html, css, animation

我正在开发一个 jQuery 函数来在我的导航栏上创建“lavalamp”效果。

目前它工作得很好，除非您将鼠标悬停在某个项目（例如社区服务）上，然后将鼠标从导航栏上移开。执行此操作时，#movingBox div 按预期返回到 Home 项，但仅显示 #movingBox .left div，而其他两个“消失”。

我想让它不会发生这种故障，所以我可以在生产中实际使用它。

HTML

```
 <div id="navArea">
    <div id="navBar" class="noscript">
        <ul class="parent">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">After Care</a></li>
        <li><a href="#">Repair</a></li>
        <li><a href="#">Store</a>
            <ul class="sub">
                <li><a href="#">Cat 1</a></li>
                <li><a href="#">Cat 2</a></li>
                <li><a href="#">Cat 3</a></li>
                <li><a href="#">Cat 4</a></li>
            </ul></li>
        <li><a href="#">Events</a></li>
        <li><a href="#">Community Service</a></li>
        </ul>
    <div id="movingBox">
        <div class="left"></div>
        <div class="middle"></div>
        <div class="right"></div>
    </div>
    </div>
</div>

<div id="mainContent">
</div> 
```

CSS

```
#navArea{
height: 48px;
width: 100%;
background-image: url(../img/navBG.png);
background-repeat: repeat-x;
font-size: 15px;
font-family: 'BPreplayBold', Helvetica, Arial, sans-serif;  
}
#navBar {
margin-right: auto;
margin-left: auto;
position: relative;
width: 636px;
}
#navBar ul{
padding: 0;
margin: 0;
z-index: 20;
position: absolute;
}
#navBar ul li{
float: left;
list-style: none;
}
#navBar ul li a{
padding-left: 15px;
padding-right: 15px;
height: 45px;
display: block;
text-decoration: none;
text-align:center;
line-height: 45px;
color:  #EBEBEB;
}
#navBar ul li ul li{
width: 222px;
float: none;    
}
#navBar ul li ul li a{
padding: 0px 15px;
display:block;
height:25px;
line-height:25px;
background: url('../img/navBG.png');
background-repeat: repeat-x;    
}   
#navBar ul li ul li a:hover{
background: #2abcf2;    
}

#navBar #movingBox {
height: 46px;
width: 70px;
left: 0;
top: 0;
z-index: 19;
position: absolute;
}
#navBar #movingBox .left {
background-image: url(../img/hBoxL.png);
float: left;
width: 7px;
height: 46px;
}
#navBar #movingBox .right {
float: left;
height: 46px;
width: 7px;
background-image: url(../img/hBoxR.png);
}
#navBar #movingBox .middle {
background-image: url(../img/hBoxM.png);
background-repeat: repeat-x;
height: 46px;
float: left;
width: 56px;
} 
```

jQuery

```
<script type="text/javascript">
$(document).ready(function() {
$("#navBar").removeClass("noscript");
$("#navBar ul.sub").hide();
$("#navBar li").hover(function(){
    $(this).find('ul.sub').slideToggle(150);
});
$("#navBar li").mouseover(function(){
    hoverItemLeft = Math.round($(this).offset().left - $("#navBar").offset().left);
    hoverItemWidth = $(this).width();
    $("#movingBox").stop().animate({"left": hoverItemLeft, "width": hoverItemWidth}, 350, 'easeOutBack');
    $("#movingBox .middle").stop().animate({"left": hoverItemLeft, "width": hoverItemWidth-17}, 350, 'easeOutBack');
});
$("#navBar").mouseleave(function(){
    activeItemLeft = Math.round($("#navBar li.active").offset().left - $("#navBar").offset().left);
    activeItemWidth = $("#navBar li.active").width();
    $("#movingBox").stop().animate({"left": activeItemLeft, "width": activeItemWidth}, 350, 'easeOutBack');
    $("#movingBox .middle").stop().animate({"left": hoverItemLeft, "width": hoverItemWidth-17}, 350, 'easeOutBack');
});
});
</script> 
```

谢谢你的帮助！

编辑：我的愚蠢错误：P。在我上次的动画通话中，我偶然使用了 hoverItem 变量。但是，如果您正在寻找相同的功能，请随意使用我的代码，请记住修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:57:11.773

我相信问题出在你最后几行javascript代码中 - 我认为你的注意力有点分散。这里...

```
$("#movingBox .middle").stop().animate({"left": hoverItemLeft, "width": hoverItemWidth-17}, 350, 'easeOutBack'); 
```

在上面的行中，将“hoverItemWidth”更改为“activeItemWidth”；

这是修复的小提琴 - [http://jsfiddle.net/joplomacedo/TxYe2/](http://jsfiddle.net/joplomacedo/TxYe2/)

# c++ - 将 C++ 仅标头模板编译为共享库

> ID：11602375
> 
> 赞同：5
> 
> 时间：2012-07-22T17:20:56.423
> 
> 标签：c++, templates, shared-libraries

我正在研究模板类的代码库。它只是标题（没有 .cpp 文件）。我想隐藏实现并提供一个共享库以及几个仅包含声明的标头。不幸的是，听起来没有任何意义。既然没有编译过的代码，那么这样的共享库里会有什么？编译后试图从头文件中删除定义会导致未定义的引用。有没有办法强制编译器在 dll 或共享库中传送对象而不必显式实例化模板类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T17:26:03.643

不，在可预见的未来，没有也不会有办法做到这一点。提供模板 C++ 代码的唯一方法是仅作为头文件。[模块](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2073.pdf)可能会改变这一点，但这不太可能在你的库完成之前发生。

您可以尝试将其拆分为实现并显式实例化所有可能的用例。然后，您发布的库将无法与实例化类型之外的任何其他类型一起使用，并且会显着减少模板带来的好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T17:33:07.773

模板实现需要在编译时知道。这就是为什么您不能将实现与声明分开的原因。因此，如果您想拥有模板的优势，则无法传递您的标题。

# android - 需要访问 SQL 服务器

> ID：11602381
> 
> 赞同：-2
> 
> 时间：2012-07-22T17:21:29.217
> 
> 标签：android, ios, database, browser-plugin

我正在开发一个应用程序，它需要 Windows、Mac、Linux（所有将是 IE、Chrome、Firefox、Opera 和 Safari 的浏览器插件）、iOS 和 Android 设备（本机应用程序）来访问远程服务器/云/数据库上传和下载数据。

他们需要能够连接到数据库以发送和检索数据（可以在同一帐户下注册多个设备）。数据需要包含用户的用户名和 40 多个字符串，每个字符串包含最多 200 个字符的网址。

我认为我需要的是一个 SQL 服务器，但我不太确定（我在远程环境中几乎没有做过任何工作，主要是在本地）。而且我很确定 AJAX 也参与其中。

那么，我需要什么，我如何获得它，以及它应该花费多少（如果它会花费任何东西的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:26:48.180

如果我理解您的问题，您正在寻找一种在某种数据库上获取和存储数据的方法。

然后，您将获取这些数据，然后在每台设备上对其进行相应的处理。

这让我想起了今年在 Google IO 上的一次演讲（我是一个 android 人）。google 解决方案称为 Google Cloud Endpoints。

### 谷歌云端点。

Google Cloud Endpoints 可让您为所有应用程序提供由 Google App Engine 托管的 API。

您提到您的限制之一是成本；App Engine 上的 API 符合要求。App Engine 用户获得一个“免费配额”，涵盖了年轻应用程序可能获得的所有使用。

借助 Cloud Endpoints，Google 可以轻松地为每种类型的设备自动生成库（Android 的 .jar 文件、插件/Web 应用程序的 javascript 库，无论 iOS 使用什么）。理论上，这应该很容易与您的应用程序集成。

您还可以使用 Google 来处理身份验证需求，使用 OAuth 2.0。

Cloud Endpoints 目前处于选定的开发者试用阶段，所以也许我只是在饥饿的人面前晃来晃去，但值得关注。

### SQL 服务器

您可以像任何其他程序一样在本地计算机上运行 SQL 服务器。我过去使用过 WAMPserver，它为您提供 PHPmyAdmin 没有任何麻烦（允许您构建数据表并在没有所有命令行的情况下输入数据）。

这非常适合测试，但是当您想将其实际投入生产时，您将需要查看某种网络主机。（正如瑞恩罗伯茨所说）

### 免费的方式...

有很多免费的方法可以做你想做的事，但它们可能带来的麻烦多于它们的价值。

您可以在应用引擎上托管 API，并使用 App Engine 数据存储区。但是你必须学习如何编写 App Engine API。

你也可以使用亚马逊 AWS；他们会给你一个免费的服务器实例，可以运行你想要的任何东西。但是你也必须学习如何做到这一点。

我记得，在过去，我使用过一个网站，它为每个用户提供免费的 LAMP 堆栈。当然，这是很久以前的事了，而且非常不友好，我什至不确定它是否仍然存在。

最后，您需要能够让您专注于产品的解决方案；你的时间也值钱。

### 最后说明

我知道通常人们在谈论编写浏览器插件时会有非常具体的想法。您希望它在人们浏览时可用，并且您正在处理用户正在浏览的页面。

如果不是这种情况，请查看构建 Web 应用程序。Web 应用程序用 HTML、CSS 和 javascript 编码，然后向服务器发出调用以获取/设置数据等。

最重要的是，一个 webapp 可以适用于所有平台。构建一次逻辑，构建两次界面（计算机和触摸设备）要比同时构建 8 次（每个目标平台一次）要好得多，除非您有令人信服的理由这样做。

# c# - 在 C# 中 expressionStack_xx_x 是什么意思？

> ID：11602383
> 
> 赞同：0
> 
> 时间：2012-07-22T17:21:38.683
> 
> 标签：c#, decompiling

我刚刚在 C# 中使用 .net 反射器反编译了一个程序集文件，并注意到了很多我以前从未遇到过的 expressionStack_xx_x 表达式。据我了解，编译器用这个表达式替换变量，但我不确定。它们的用途是什么，它们是由编译器生成的吗？下面的代码不完整示例：

```
 public void DisplayDestinationBrowser()
{
System.Windows.Forms.OpenFileDialog dialog2 = new System.Windows.Forms.OpenFileDialog();
System.Windows.Forms.OpenFileDialog expressionStack_45_1 = dialog2;
string expressionStack_45_0 = "";
System.Windows.Forms.OpenFileDialog expressionStack_10_2 = expressionStack_45_1;
string expressionStack_10_1 = expressionStack_45_0;
int expressionStack_10_0 = 0xf7b1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:25:54.750

这些是由您的反编译器生成的。

编译器根本不保存变量名。

# jquery - 无法使用 JSRender 读取嵌套数组 json

> ID：11602384
> 
> 赞同：0
> 
> 时间：2012-07-22T17:21:48.907
> 
> 标签：jquery, jquery-templates, jsrender

无法使用 JSRender 读取嵌套数组 json

这个[jsfiddle中的代码](http://jsfiddle.net/skystar3/aLsaL/)

我正进入（状态

> 错误：错误：无法读取未定义的属性“人”。错误：无法读取未定义的属性“人”。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:06:10.497

你在那里有一行：

```
{{for list.person.phones}} 
```

哪个已经在循环内（因此会在您的对象内`person`寻找一个对象），并且无论如何都与您的数据布局不匹配，因此它会导致错误。将该块更改为：`list``person`

```
{{for numbers}}
    {{for phones}}
        <tr>
            <td>{{:name}}</td>
            <td>{{:number}}</td>
        </tr>
    {{/for}}
{{/for}} 
```

它有效。

# jquery - 类似于 big.dk 的 jquery 排序插件？

> ID：11602385
> 
> 赞同：1
> 
> 时间：2012-07-22T17:22:16.937
> 
> 标签：jquery

我一直在寻找一个插件，可以对类似于[http://big.dk/#projects](http://big.dk/#projects)的图像进行排序，但没有成功。有谁知道有没有类似的插件？还是我需要从头开始？不想重新发明轮子:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:15:24.087

同位素可能是您正在寻找的：http: [//isotope.metafizzy.co/demos/sorting.html](http://isotope.metafizzy.co/demos/sorting.html)

# python - 用于将字符串限制为最大长度的 Python 函数

> ID：11602386
> 
> 赞同：11
> 
> 时间：2012-07-22T17:22:24.410
> 
> 标签：python, string

Python 中是否有内置函数或标准库中的函数，用于将字符串限制为一定长度，如果超出长度，则在其后附加三个点 (...)？

例如：

```
>>> hypothetical_cap_function("Hello, world! I'm a string", 10)
“你好， ...”
>>> hypothetical_cap_function("你好，世界！我是一个字符串", 20)
“你好，世界！我是……”
>>> hypothetical_cap_function("你好，世界！我是一个字符串", 50)
“你好，世界！我是一个字符串”

```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-22T17:24:39.727

```
def cap(s, l):
    return s if len(s)<=l else s[0:l-3]+'...' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:33:08.460

可能最灵活（不只是切片）的方法是创建一个包装器，`textwrap.wrap`例如：（但请记住，它确实会尝试在某些可能无法得到您所追求的结果的*地方进行**智能*拆分 - 但是这是一个方便了解的模块）

 *```
def mywrap(string, length, fill=' ...'):
    from textwrap import wrap
    return [s + fill for s in wrap(string, length - len(fill))]

s = "Hello, world! I'm a string"
print mywrap(s, 10)
# ['Hello, ...', 'world! ...', "I'm a ...", 'string ...'] 
```

然后就拿你所追求的元素。*

# html - DIV 边框顶部和底部的不同图像

> ID：11602394
> 
> 赞同：1
> 
> 时间：2012-07-22T17:23:06.503
> 
> 标签：html, css

我有一个正在开发的网站，其中一个要求是它不能使用任何客户端脚本（jQuery/JavaScript）。而且由于我对 CSS 不是*很好*，所以我有点卡在这里。

我有一个简单的 div，它应该有一个“边框图像”。但我不能使用 CSS `border-image`，因为它不适用于 IE（已经过测试），而且我无法获得两个不同的顶部和底部图像来使用`background-image:`- 所以现在我想知道我能做什么。 ..

下面是它的样子，两个看起来像箭头的东西都是 2 个 png 文件：

![在此处输入图像描述](../Images/292719b6a743e760432f426a01623abf.png)

有没有办法做到这一点？仅使用 1 个 div 和 2 个图像？没有 JavaScript，并且还保持跨浏览器兼容性（有一些例外，如 ie6<）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:33:45.700

这适用于：IE9、Firefox、Chrome、Opera 和 Safari

**代码：**

```
 <style>
      #Container {
        width: 400px;
        height: 400px;
        margin-left: auto;
        margin-right: auto;
        border:1px solid #000000;
      }

      .boxTop {
        position: relative;
        left: 100;
        top: 100;
        width: 200px;
        height: 10px;
        background-color:#00CC00;
        /*place background image css code here and remove line above*/
      }

      .box {
        position: relative;
        left: 100;
        top: 100;
        width: 200px;
        height: 200px;
        background-color:#CC0000;
      }

      .boxBtm {
        position: relative;
        left: 100;
        top: 100;
        width: 200px;
        height: 10px;
        background-color:#0000CC;
        /*place background image css code here and remove line above*/
      }
    </style>

    <div id="Container">
        <div class="boxTop"></div>
        <div class="box"></div>
        <div class="boxBtm"></div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:53:50.480

如果该块已固定`height`并`width`仅设置背景一个图像和`padding`s。如果它已固定`width`使用@Mr。外星人的解决方案。如果它有`height`水平固定裁剪图像并制作背景`repeat-x`。如果两者`width`都是`height`动态的，我建议无论如何都要使用 2-3 个额外的 div（我知道你想避免它），我不认为`:before`和`:after`更好一起玩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:41:00.860

Darcey 的解决方案非常好。盒子 div 里面有 3 个 div，中间 1 个用于内容，另外 2 个用于图像（具有 css 属性背景图像）。

如果您不想修改 html，可以尝试使用 css :before 和 :after [示例](http://www.quirksmode.org/css/beforeafter.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:43:33.877

第一个解决方案：仅使用**`gradient`s**。没有图像，没有额外的元素甚至伪元素。

当然`gradient`s 不被 IE9 和更早版本支持，所以另一个解决方案是使用**多个背景**。

*IE8 及更早版本不支持 CSS3 方式的多背景*，但您可以将`AlphaImageLoader` `filter`其用作这些浏览器的后备。

# architecture - 抢占和上下文切换的区别

> ID：11602395
> 
> 赞同：8
> 
> 时间：2012-07-22T17:23:12.790
> 
> 标签：architecture, kernel, arm, rtos

一点介绍，

我目前正在编写一个小型（读取微小的）RTOS 内核，它应该与内核中的大多数内容是一体的。但是我找不到关于下面列出的一些事情的太多信息，这会很有帮助，除此之外，它实际上不是某种大学项目，而是我按照自己的意愿做的事情。

**回答所有问题的更好选择是，如果您可以向我推荐一个免费的 RTOS（甚至是一本免费的书），最好**是实现用户空间并且是可抢占的（但不像 linux 那样复杂）。Linux 有一些迄今为止我见过的最糟糕的文档（我确实尝试从 linux 代码中找出问题，但是只有大量的定义分散在百万个文件和函数挂钩中，名称很奇怪，而且每个版本都被重命名了有时搬家……）

1.  “抢占”和“上下文切换”有什么区别？

2.  抢占式内核和非抢占式内核之间的主要区别是什么？程序员需要做哪些工作才能使内核抢占式？

3.  如何创建和使用用户模式？

    ARM 文档说，在用户模式下，任何切换到特权模式的指令都将被视为未定义指令。

4.  如果是这样，用户空间程序使用内核代码的唯一方法是系统调用？

5.  那么内核如何响应或与用户空间交互呢？

6.  这是否意味着启动后（在简单系统中）唯一的内核线程将是空闲线程？

7.  如果内核代码和数据所在的页面在切换到用户进程时未映射，那么在系统调用或中断上，内核代码如何在不映射到虚拟地址空间的情况下执行？

8.  “可抢占内核”是否仅意味着内核的设计方式是在内核代码执行期间进行上下文切换是安全的？还是需要做更多的工作（如果有的话）？

哦，如果这里不允许这样的多个问题，抱歉，找不到任何相关信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T17:54:59.517

正如 Mat 所写，这可能是不合理的范围。但是，我会尽量关注问题的总和，就像关注一个范围合理的问题一样，希望这将有助于您开始研究。

> 1 “抢占”和“上下文切换”有什么区别？

抢占是在不涉及进程的情况下中断进程的行为。在这种情况下，这可能意味着将触发定时器中断。这个词来自一个法律概念的[抢占](http://dictionary.reference.com/browse/preemption)：*在他人之前或优先于他人索取或购买的行为或权利。* 出于您的目的，这意味着当定时器中断触发时，中断服务例程 (ISR) 优先于之前运行的代码。这根本不需要涉及内核。您可以在任何 ISR 中运行代码，这些 ISR 将抢先运行。

上下文切换是当操作系统代码（抢占式运行）在一个进程或线程的上下文与另一个之间改变处理器的状态（寄存器、模式和堆栈）时发生的事情。处理器的状态可能在一个线程中的某一行代码。它将在寄存器中具有临时数据、位于某个内存区域的堆栈指针以及其他状态信息。抢占式操作系统可以存储此状态（存储到静态内存或进程堆栈中）并加载前一个进程的状态。这称为上下文切换。

> 2 抢占式和非抢占式内核之间的主要区别是什么？程序员需要做哪些工作才能使内核抢占式？

在抢占式内核中，可以在任意两条汇编指令（称为“序列点”）之间触发中断。在非抢占式内核中，正在运行的进程必须调用一个`yield()`函数以允许其他线程运行。抢占式内核更复杂，但提供了更好的并发错觉。非抢占式内核可以非常简单地用 来完成`setjmp.h`，但是每个线程必须定期调用`yield()`，否则其他线程将无法运行。

当调用类似函数`yield()`时，处理器的状态会自动存储。当您想让您的操作系统抢占时，您必须手动存储此信息。

> 3 如何创建和使用用户模式？
> 
> ARM 文档说，在用户模式下，任何切换到特权模式的指令都将被视为未定义指令。

正确的。但是，他们还说任何中断都会自动以特权模式运行。在 ARM 系统上，您可以使用该`svc`指令生成软件中断。SVC 代码（操作系统的一部分）将能够在特权模式下运行。

> 4 如果是这样，用户空间程序使用内核代码的唯一方法是系统调用？

正确的。至少，这是唯一安全或正确的方法。

> 5 内核如何响应或与用户空间交互？

在 ARM 上，SVC 指令可以获得 8 位值。这可用于生成 256 个系统调用，例如 yield、启用中断、禁用中断或任何您需要的。如果需要，您还可以选择创建共享内存或消息传递交互机制。

> 6 这是否意味着启动后（在简单系统中）唯一的内核线程将是空闲线程？

这完全取决于您如何设计系统。如果您选择仅在创建所有线程后启动内核，这可能会更简单——这样您就不必担心动态分配线程。或者，您可以从空闲线程开始，稍后再添加其他线程（通过远程外壳？我认为您希望至少有一个用户线程始终如一地运行......）

> 7 如果内核代码和数据所在的页面在切换到用户进程时未映射，那么在系统调用或中断时，内核代码如何在不映射到虚拟地址空间的情况下执行？

就像内核模式代码在特权模式下运行一样，即使代码之前在用户模式下执行，内核模式代码也会从主堆栈指针 (MSP) 运行，即使进程代码使用不同的地址空间也是如此。

> 8 “可抢占内核”是否仅意味着内核的设计方式是在内核代码执行期间进行上下文切换是安全的？还是需要做更多的工作（如果有的话）？

我认为这意味着内核可以抢占用户代码，而不是内核本身可以被抢占。中断内核的任何事情都是困难和不寻常的。那将需要更多的工作，而我正在努力了解您为什么想要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:11:05.557

我不会回答您列举的每个问题，而是尽我所能为您（谢天谢地）加粗的请求提供服务：

> **回答所有问题的更好选择是，如果您可以向我推荐免费的 RTOS（甚至是免费书籍），最好是 arm**

Micrium 的 uC/OS-III 是一个基于优先级的实时内核，（当然）支持同步和异步抢占。而且，幸运的是（以及我回复的原因）是有一本免费的书可用，而且源代码也可用。

前往[**uC/OS-III 的主页，**](http://micrium.com/page/products/rtos/os-iii)在左侧您将看到一个视频链接，该视频讨论了源代码可用性（“uC/OS-III 源代码可用”）。

就书籍而言，转到[**项目页面**](http://micrium.com/page/downloads/os-iii_projects)，然后选择与您的目标最匹配的书籍。90%的材料是一样​​的；只有特定于 CPU 的内容（如上下文切换、中断和初始化）会因书而异。

你必须注册才能下载这本书和代码，这对我来说似乎很公平。

祝好运并玩得开心点。感谢您大胆提出您的最终要求/目标，这让这变得容易多了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:20:57.367

我的印象是 uC/OS-III 不是免费的，而是许可的。

FreeRTOS (http://www.freertos.org/) 是一个很棒的免费 RTOS，并且解释得很好

你一定要去那里看看

# python - 用 2 个生成器替换 3 个列表

> ID：11602396
> 
> 赞同：1
> 
> 时间：2012-07-22T17:23:24.530
> 
> 标签：python, list, optimization, generator

我想使用生成器优化我的应用程序，而不是创建 3 个列表，我想使用 2 个生成器。这是我的应用程序在当前版本中的简短方案：

1) 从二进制文件加载数据 -> 第一个列表

```
self.stream_data = [ struct.unpack(">H", data_file.read(2))[0] for foo in
                       xrange(self.columns*self.rows) ] 
```

2）创建所谓的非零抑制数据（所有数据为零）->第二个列表

```
self.NZS_data = list()
for row in xrange(self.rows):
    self.NZS_data.append( [ self.stream_data[column + row * self.rows ] 
                          for column in xrange(self.columns) ] ) 
```

3）创建零抑制数据（坐标不为零）->第三个列表

```
self.ZS_data = list()
for row in xrange(self.rows):
    for column in xrange(self.columns):
        if self.NZS_data[row][column]:
            self.ZS_data.append( [ column, row, self.NZS_data[row][column] ] ) 
```

（我知道这可以使用 itertools.product 压缩到单个列表理解中）

4) 将 ZS_data 列表保存到文件中。

我使用了 Python 的 cProfiler，大部分时间（除了读取和解包）都用于创建这两个（NZS_data 和 ZS_data）列表。因为我只需要它们来将数据保存到我一直在考虑使用 2 个生成器的文件中：

1) 创建一个用于读取文件的生成器 -> 第一个生成器

```
self.stream_data = ( struct.unpack(">H", data_file.read(2))[0] for foo in
                       xrange(self.columns*self.rows) ) 
```

2）创建 ZS_data 生成器（我真的不需要这个 NZS 数据）

```
self.ZS_data = ( [column, row, self.stream_data.next()]
                 for row, column in itertools.product(xrange(self.rows),
                 xrange(self.columns))
                 if self.stream_data.next() ) 
```

**这当然不能正常工作，因为我从生成器中得到了两个不同的值。**

3) 使用生成器将数据保存到文件中。

我想知道如何做到这一点。也许您对可能优化此应用程序有其他想法？

***基于生成器的添加解决方案***：**** 

 ***```
def create_ZS_data(self):
    self.ZS_data = ( [column, row, self.stream_data[column + row * self.rows ]]
                     for row, column in itertools.product(xrange(self.rows), xrange(self.columns))
                     if self.stream_data[column + row * self.rows ] ) 
```

探查器信息：

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     3257    1.117    0.000   71.598    0.022 decode_from_merlin.py:302(create_ZS_file)
   463419   67.705    0.000   67.705    0.000 decode_from_merlin.py:86(<genexpr>) 
```

*乔恩的解决方案：*

```
create_ZS_data(self):
    self.ZS_data = list()
    for rowno, cols in enumerate(self.stream_data[i:i+self.columns] for i in xrange(0, len(self.stream_data), self.columns)):
        for colno, col in enumerate(cols):
            # col == value, (rowno, colno) = index
            if col:
                self.ZS_data.append([colno, rowno, col]) 
```

探查器信息：

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     3257   18.616    0.006   19.919    0.006 decode_from_merlin.py:83(create_ZS_data) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:01:48.063

你可以让拆包更有效率......

```
self.data_stream = struct.unpack_from('>{}H'.format(self.rows*self.columns), data_file) 
```

将循环减少为：

```
for rowno, cols in enumerate(self.data_stream[i:i+self.columns] for i in xrange(0, len(self.data_stream), self.columns)):
    for colno, col in enumerate(cols):
        # col == value, (rowno, colno) = index
        if col == 0:
            pass # do something
        else:
            pass # do something else 
```

**注意 - 未经测试*****

# c++ - 为什么在读取非 HTTP 服务器的套接字时需要异步 IO

> ID：11602400
> 
> 赞同：1
> 
> 时间：2012-07-22T17:24:19.970
> 
> 标签：c++, design-patterns, boost-asio, asyncsocket, ace

我正在设计一个 C++ 客户端应用程序，它侦听多个端口以获取短消息流。在阅读了 ACE、POCO、boost::asio 和所有类似 Proactor 的设计模式之后，我即将开始使用 boost::asio。

一件事我注意到它是使用异步套接字 IO 的不变主题，但还没有阅读 async io 解决的好的问题描述。所有这些设计模式都是基于 HTTP Web 服务器设计的假设吗？

由于 Web 服务器是复杂延迟敏感并发套接字编程的最常见应用程序，我开始怀疑这些模式/习语中的大多数是否适合这一应用程序。

我的应用程序将侦听一些套接字以获取简短而频繁的消息。一个单独的线程将需要组合所有消息进行处理。我正在研究设计模式的一件事是将连接管理与数据处理分开。我希望连接在断开连接后尝试重新连接，并让处理线程继续，就好像什么都没发生一样。这里推荐什么设计模式？

在我的情况下，我看不到 async io 将如何提高性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:37:56.320

你在正确的轨道上。问“为什么”很聪明，尤其是在围绕异步和事件驱动的所有炒作中。除了网络之外，还有其他应用程序。考虑消息队列和金融交易，如高频交易。基本上任何时候等待花费金钱或失去为客户服务的机会都是异步的候选者。网络就是一个很好的例子，因为网络比数据库快得多。与往常一样，对您的应用询问“这是否有意义”。如果您没有从中受益，异步会增加很多复杂性。

如果消息之间的平均时间与处理每条消息所需的时间相当，那么您的简短、快速的消息实际上可能会从异步中受益很多，特别是如果该处理包括持久性。但是你不必急于异步。检测你的阻塞代码，看看你是否真的有瓶颈。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:07:23.357

使用阻塞调用模式需要：

```
1\. Listening on a socket vector of size N
2\. When a message arrives, you wake up with a start in time K, find and start processing the message, employing a time T (it does not matter if the processing is offloaded to another thread: in this case T becomes your offloading time)
3\. You finish examining the vector and GOTO 1 
```

所以你可能会说，如果有 M 条消息到达，而另一条消息在 K+M*T 调度时间内到达，那么第 M+1 条消息会发现自己在等待 K+M*T 时间。这对于您的 K（常数）、M（流量函数）和 T（资源和系统负载函数）的预期值是否可以接受？

异步处理，嗯，实际上并不存在。*在某个地方*总会有一个“同步”IO 循环，只有它会很好地集成到内核（甚至硬件）中，以至于它的运行速度比您自己的快 10-100 倍，因此可能会在较大的值下更好地扩展M 的延迟仍然是 K1+M*T1 的形式，但是这次 K1 和 T1 要低得多。或者 K1 稍微高一点，而 T1 明显更低：对于大的 M 值，架构“扩展得更好”。

如果您的 M 值通常较低，则异步的优势按比例较小。在应用程序生命周期中只有一条消息的荒谬情况下，同步或异步几乎没有区别。

考虑另一个因素：如果消息的数量真的很大，异步有它的优势；但是如果消息本身是独立的（由消息 A 引起的更改不影响消息 B 的处理），那么您可以保持同步并水平扩展，准备一个数量为 Z 的“消息集中器”，每个接收部分 M/Z总流量。

如果处理需要对其他服务执行其他调用（缓存、持久性、信息检索、身份验证......），增加 T 因子，那么最好转向多线程甚至异步。使用多线程，您可以将 T 减少到其值的一小部分（仅调度时间）。从某种意义上说，异步也是如此，但剃须更多，并为您处理更多的编程样板。

# c# - 我无法构建正则表达式

> ID：11602402
> 
> 赞同：0
> 
> 时间：2012-07-22T17:24:25.097
> 
> 标签：c#, regex

我有 HTML 代码：

```
<tr class="odd"><td style="display:none">id&gt;26847504,level&gt;0,key_left&gt;0,key_right&gt;0,name&gt;Random.Stuff345345,type&gt; 
```

我想得到那些：

1.  26847504
2.  随机的东西345345

我已经试过了：

```
<tr class=\".+\"><td style=\"display:none\">id&gt;([0-9]+),level&gt;0,key_left&gt;0,key_right\&gt;0,name&gt;([^,]+),type&gt; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:37:56.840

**用 regex 解析 HTML**是一个非常糟糕的主意，但是如果你想......

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        string input = "...";
        Match match = Regex.Match(input, @"id&gt;([^,]*).*?name&gt;([^,]*)");
        if (match.Success)
        {
            Console.WriteLine(match.Groups[1].Value);
            Console.WriteLine(match.Groups[2].Value);
        }
    }
} 
```

[在这里](http://ideone.com/77N6e)测试代码。

# magento - Magento EE 1.12 中的全页缓存

> ID：11602404
> 
> 赞同：0
> 
> 时间：2012-07-22T17:24:37.280
> 
> 标签：magento

我们正在 EE 1.12 中运行高级产品选项扩展。在扩展之上，我们将其修改为使用 cookie，因此如果客户选择了特定的自定义选项，这些选项将保存在 cookie 中，并且下次他再次访问产品页面时，这些选项会再次从 cookie 中填充。

问题是 Cookie 值是 Magento FPC 中的缓存。我们尝试通过这个来使用打孔，但不幸的是它不能正常工作。

(1) 除了打孔还有其他方法可以解决这个问题吗？(2) 由于这是一个自定义模块，我们是否修改模块/etc/cache.xml 或pagecache/cache.xml 进行打孔。

问候，

史蒂夫

以下是我们为 cookie 提供的部分代码：

```
<?php
    $pres_saved_data = Mage::helper('customoptions')->isCookieExist();
    //$cookieModel = Mage::getModel('core/cookie');
    //$pres_saved_data =  $cookieModel->get('myprescription');
    $show_prefilled_data = false;
    $pres_data = array();
    $other_pres_data = array();
    if($pres_saved_data){
        $sql = "select * from customer_prescription where id = '".$pres_saved_data."'";
        $rowdata = $readConnection->fetchRow($sql);
        if($rowdata){
           $show_prefilled_data = true;
           $optionsdata = unserialize($rowdata['prescription_options']);
           $pres_data['options'] = unserialize($optionsdata['options']);
            /* store all the option data which is there in cookie*/
           $options_data = array(); $options_sku = array(); 
            foreach($pres_data['options'] as $_data){
                 $label = strtolower(str_replace(" ",'_',$_data['label']));
                 if($label == 'prescription_type' || $label == 'lens' || $label =='pd' || $label == 'anti_reflective_coating')  {
                      $options_data[] =  $_data['value']; $options_sku[] =  $_data['sku']; } else{
                      $other_pres_data[$label] = $_data['value']; 
                 }
            }

             $sql  = sprintf("SELECT v.option_type_id ,t.title,c.option_id,v.sku FROM catalog_product_option as c inner join 
                          `catalog_product_option_type_value` as v 
                          on c.option_id = v.option_id 
                          inner join catalog_product_option_type_title as t on v.option_type_id = t.option_type_id
                          and v.sku  in ('%s') and product_id  = %s and t.title in ( '%s') where store_id  in( 0,".Mage::app()->getStore()->getId().")",implode("', '",$options_sku),$current_product->getId(),implode("', '",$options_data));

               $option_cookie_data = $readConnection->fetchAll($sql);             
         }
    }
  ?>
<?php endif; ?> 
```

我们拥有的容器是：

```
<?php
class MageWorx_Customoptions_Model_Container_cachetest
    extends Enterprise_PageCache_Model_Container_Abstract

{
protected function _getIdentifier()
{
return $this->_getCookieValue(Enterprise_PageCache_Model_Cookie::COOKIE_CUSTOMER, '');
}

protected function _getCacheId()
{
return 'customoptions' . md5($this->_placeholder->getAttribute('cache_id') . $this->_getIdentifier());
}

protected function _renderBlock()
{
$blockClass = $this->_placeholder->getAttribute('block');
$template = $this->_placeholder->getAttribute('template');

$block = new $blockClass;
$block->setTemplate($template);
return $block->toHtml();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:48:50.663

整页缓存可能很棘手。这是另一个应该可以帮助您的问题的答案：

[如何在打开全页缓存的产品页面中包含动态块？](https://stackoverflow.com/questions/9120413/how-do-i-include-a-dynamic-block-in-the-product-page-with-full-page-caching-turn/9125519#9125519)

从那个答案看来，您可以使用包含客户 ID 的 ID 保存缓存。这将为每个客户创建一个唯一的缓存条目。这可能会导致与 FPC 的更多冲突，但是，例如当用户更改选项时，您需要删除他们的缓存条目。

打孔/占位符逻辑应该在模块 /etc/cache.xml 中

# objective-c - 带有 NSOpenGLView 的 OpenGL 3.2

> ID：11602406
> 
> 赞同：6
> 
> 时间：2012-07-22T17:24:45.360
> 
> 标签：objective-c, opengl-3, nsopenglview, nsopengl

如何在 NSOpenGLView 的自定义实现中创建核心配置文件？我应该覆盖哪个方法，应该放什么代码？

到目前为止，我有这个代码：

```
// Header File
#import <Cocoa/Cocoa.h>

@interface TCUOpenGLView : NSOpenGLView

@end

// Source File
#import "TCUOpenGLView.h"
#import <OpenGL/gl.h>

@implementation TCUOpenGLView

- (void)drawRect:(NSRect)dirtyRect {
    glClear(GL_COLOR_BUFFER_BIT);
    glFlush();
}

@end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T14:55:35.557

Apple 有一个名为[GLEssentials](http://developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html)的示例代码项目，它准确地展示了如何执行此操作（请注意，它是一个 Mac OS X 和 iOS 示例代码项目）。

本质上，您需要继承 NSOpenGLView（示例代码中的 NSGLView 类）并使用以下代码实现 awakeFromNib 方法：

```
- (void) awakeFromNib
{   
    NSOpenGLPixelFormatAttribute attrs[] =
    {
        NSOpenGLPFADoubleBuffer,
        NSOpenGLPFADepthSize, 24,
        // Must specify the 3.2 Core Profile to use OpenGL 3.2
        NSOpenGLPFAOpenGLProfile,
        NSOpenGLProfileVersion3_2Core,
        0
    };

    NSOpenGLPixelFormat *pf = [[[NSOpenGLPixelFormat alloc] initWithAttributes:attrs] autorelease];

    if (!pf)
    {
        NSLog(@"No OpenGL pixel format");
    }

    NSOpenGLContext* context = [[[NSOpenGLContext alloc] initWithFormat:pf shareContext:nil] autorelease];

    [self setPixelFormat:pf];

    [self setOpenGLContext:context];
} 
```

另请记住，如果您使用已从 3.2 API 中删除的任何 OpenGL API 调用，您的应用程序将会崩溃。这是 3.2 规范的[PDF 文档](http://www.opengl.org/registry/doc/glspec32.core.20090803.pdf)，因此您可以查看更改。

# java - 在没有 ANT 的情况下打包和部署 Java EE webapp

> ID：11602407
> 
> 赞同：0
> 
> 时间：2012-07-22T17:24:45.493
> 
> 标签：java, jakarta-ee, ant

我们将为我们的客户开发一个用 Java EE 技术编码的大型 webapp。我的客户端不支持其服务器中的 OSS ANT 和 Eclipse。

所以我们的要求是在我们的本地系统中编码和开发应用程序并对其进行测试，然后我们需要在客户端服务器中提供源代码，我们将在其中运行一个部署脚本，该脚本将从源文件编译所需的 java 文件并部署.class 文件和其他资源文件到在该服务器 (HP-UX) 上运行的 Tomcat。

是否可以在不使用 ANT 脚本的情况下仅使用 javac、jar 或 JAVA_HOME/bin 中可用的其他命令来部署应用程序？如果有任何这样的实施，你能指导我们吗？我想知道在开发 ANT 之前，JAVA 开发人员是如何部署大型应用程序的。我开始知道 MAKE 命令（在我们的服务器中可用）不适用于 java 应用程序。

注意：我们将有复杂的包层次结构（最多 4 个级别）

**更新：**看起来我没有一个直截了当的答案。我想说服我们的客户使用 ANT。如果不是，我将根据下面的评论为我的客户开发一个跨平台定制构建工具......谢谢大家......如果我们知道打包和部署的正确步骤，我认为构建这种类型的工具并不难。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:41:17.087

我认为整个设置很奇怪，但无论如何......

.war 文件非常简单。它是具有给定目录结构的 ZIP 文件。您可以使用一个 shell 脚本轻松地创建它，该脚本首先运行`javac`以编译源代码，然后将文件复制到正确的目录，最后将其打包到扩展名为 .war 的 ZIP 文件中。

您可以在网上找到 .war 文件的规范。或者您可以在您的环境中构建一个，使用 ZIP 工具打开它，然后查看哪些文件需要放在哪里。

**更新：**如果您的应用程序很大，那么您可以将其拆分为模块。每个模块都将被编译并打包成一个单独的 .jar 文件（基本上也是一个 ZIP 文件）。如果一个模块依赖于另一个模块，那么只需将所需的 .jar 文件作为类路径参数传递给编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:51:43.133

如果你真的必须接受客户的要求，那么我可能会这样做。

为了避免必须修改您添加的每个文件的依赖项，我将介绍一个放置源代码、jar 文件和输出文件的位置的约定。然后我会创建一个带有一些设置的脚本：

1.  战争名称。
2.  图书馆位置列表。
3.  源根列表，可能让根的文件夹名称为 jar 文件名。

然后在运行脚本时，它将创建一个类路径，其中包括库位置列表中显示的所有 jar 文件。然后它将为每个源位置编译 java 文件，构建一个 jar 并将 jar 文件添加到类路径（以防以后的模块需要它）。

最后，它将使用外部库、新创建的 jars、复制 asp 文件（可能是预编译的）构建一个 web 应用程序结构，然后使用 zip 将 web 应用程序结构打包到一个 war 文件中。

找出客户可以接受的外壳，这样您就不会使用任何外壳特定的功能。我认为你不需要任何花哨的东西，所以这不应该太难。

# c# - 使用带有 Linq 的 DbContext 时执行 AS

> ID：11602409
> 
> 赞同：2
> 
> 时间：2012-07-22T17:24:46.590
> 
> 标签：c#, linq, entity-framework, multi-tenant, dbcontext

我正在设计一个多租户数据库，其中每个租户都有一个相应的数据库用户。用户被分配对与租户关联的架构的访问权限以及对 dbo 架构中对象的特定权限。

确定租户后，我想通过执行如下 SQL 语句切换到适当的用户上下文：

```
EXECUTE AS User = 'Tenant1' WITH NO REVERT 
```

当我使用 DbContext 的 Database 属性的 ExecuteSqlCommand 执行此命令时，一切似乎都正常工作。当我稍后使用 Linq 对模型进行更改并调用该方法时

```
myDbContext.SaveChanges(); 
```

我得到一系列例外：

> 在提供程序连接上启动事务时出错。有关详细信息，请参阅内部异常。

内部例外：

> 当前命令发生严重错误。结果，如果有的话，应该丢弃。

是否可以以这种方式更改用户的执行上下文，如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:28:24.907

您是否尝试过 myDbContext.Submit() 或 SubmitAll ？记不太清了，不过应该是这样的。。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:32:11.470

我需要的大部分答案都在这里找到：

[http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/)

```
public partial class MyDBContext
{
  public MyDBContext() : base() { }
  private MyDBContext(DbConnection connection, DbCompiledModel model) : base(connection, model, contextOwnsConnection: false) { }

  private static ConcurrentDictionary<Tuple<string, string>, DbCompiledModel> modelCache
      = new ConcurrentDictionary<Tuple<string, string>, DbCompiledModel>();

  public static MyDBContext Create(string tenantSchema, DbConnection connection)
  {
    var compiledModel = modelCache.GetOrAdd
    (
      Tuple.Create(connection.ConnectionString, tenantSchema),
      t =>
      {
        var builder = new DbModelBuilder();
        builder.Conventions.Remove<IncludeMetadataConvention>();
        builder.Entity<Location>().ToTable("Locations", tenantSchema);
        builder.Entity<User>().ToTable("Users", tenantSchema);

        var model = builder.Build(connection);
        return model.Compile();
      }
    );

  var context = new FmsDBContext(connection, compiledModel);

  if( !string.IsNullOrEmpty( tenantSchema ) && !tenantSchema.Equals( "dbo", StringComparison.OrdinalIgnoreCase ) )
  {
    var objectContext = ( (IObjectContextAdapter)context ).ObjectContext;
    objectContext.Connection.Open();
    var currentUser = objectContext.ExecuteStoreQuery<UserContext>( "SELECT CURRENT_USER AS Name", null ).FirstOrDefault();
    if( currentUser.Name.Equals( tenantSchema, StringComparison.OrdinalIgnoreCase ) )
    {
      var executeAs = string.Format( "REVERT; EXECUTE AS User = '{0}';", tenantSchema );
      objectContext.ExecuteStoreCommand( executeAs );
    }
  }

  return context;
  }
} 
```

然后你可以像这样访问 Schema 的信息：

```
using (var db = MyDBContext.Create( schemaName, dbConn ))
{
  // ...
} 
```

然而，这绕过了实际使用数据库用户。我仍在研究如何使用数据库用户的上下文，而不仅仅是指定模式名称。

* * *

**更新：**

我终于解决了这里的最后一个障碍。关键是以下代码：

```
if( !string.IsNullOrEmpty( tenantSchema ) && !tenantSchema.Equals( "dbo", StringComparison.OrdinalIgnoreCase ) )
  {
    var objectContext = ( (IObjectContextAdapter)context ).ObjectContext;
    objectContext.Connection.Open();
    var currentUser = objectContext.ExecuteStoreQuery<UserContext>( "SELECT CURRENT_USER AS Name", null ).FirstOrDefault();
    if( currentUser.Name.Equals( tenantSchema, StringComparison.OrdinalIgnoreCase ) )
    {
      var executeAs = string.Format( "REVERT; EXECUTE AS User = '{0}';", tenantSchema );
      objectContext.ExecuteStoreCommand( executeAs );
    }
  } 
```

EXECUTE AS 命令在用于执行稍后的 linq to entity 命令之前在连接上发出。只要连接保持打开状态，用户的上下文就会保持不变。在我的数据库中，租户的架构名称和用户名是相同的。

多次更改用户的执行上下文会导致错误，因此使用快速查询来确定当前的用户上下文。需要一个小型实体类来使用连接检索信息：

```
private class UserContext
{
  public string Name { get; set; }
} 
```

# html - 即使缩放也填充浏览器窗口的 DIV

> ID：11602410
> 
> 赞同：3
> 
> 时间：2012-07-22T17:24:55.797
> 
> 标签：html, browser, static, zooming, positioning

我希望我的背景 DIV 始终填满整个浏览器窗口。我在背景顶部有一个 DIV，它按照我想要的方式移动，我的定位是按百分比设置的。当我缩小时，两个 DIV 一起移动，创建背景颜色的曝光。这是我的网站：

[http://search.officesupplycentral.org/details.html](http://search.officesupplycentral.org/details.html)

这是我希望我的 DIV 如何运行的示例：

[http://fab.com/](http://fab.com/)

任何帮助将不胜感激！

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:32:13.893

[fab.com](http://fab.com)使用一种特殊的方法，如果您只检查网站的代码，就很容易看到。

它将背景设置为 HTML 标记`<html style="background-image: url(//s3.amazonaws.com/static.fab.com/relaunch/fab-daily-design-for-everyone-8.jpg);">`，并在 CSS 文件中为其设置以下值：

```
html{
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

然后`<body>`在 CSS 中将背景设置为透明：

```
body{
  background: transparent;
} 
```

我没有进一步研究的有根据的猜测是，由于图像被设置为`<html>`标签上的背景，并且背景大小设置为覆盖它，因此在放大或缩小页面时不会处理它。

# android - 将信息发送到 Internet 并收到回复

> ID：11602412
> 
> 赞同：0
> 
> 时间：2012-07-22T17:25:11.553
> 
> 标签：android, url, qr-code

我的应用程序目标是能够在编辑文本框中写入一些信息并单击一个按钮，当我单击该按钮时，我希望使用我写出的所有信息制作一个 QR 码。我现在的想法是使用 zxing。但是我不知道该怎么做。我需要知道如何将一些信息发送到互联网，然后返回打印的内容。所以有了 zxing，我知道我可以通过编辑一个 url 很容易地写出一个二维码。( [http://chart.apis.google.com/chart?cht=qr&chs=350x350&chld=L&choe=UTF-8&chl=Hello+My+Name+Is+Michael](http://chart.apis.google.com/chart?cht=qr&chs=350x350&chld=L&choe=UTF-8&chl=Hello+My+Name+Is+Michael)( 这甚至可能吗？我想听听您对此的反馈，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:00:27.333

获得网址后，您应该创建一个位图并向 Google 发出请求。你可以这样做：

```
 BitmapFactory.Options bmOptions;
    bmOptions = new BitmapFactory.Options();
    bmOptions.inSampleSize = 1;
    Bitmap bm = LoadImage(image_URL, bmOptions);

.....

private Bitmap LoadImage(String URL, BitmapFactory.Options options)
{       
    Bitmap bitmap = null;
    InputStream in = null;       
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in, null, options);
        in.close();
        } catch (IOException e1) {
        /*ERROR DO SOMETHING ERROR*/
        }
    return bitmap;               
} 
```

我希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:12:55.030

你说的对！对不起，我错过了一段代码：

```
InputStream OpenHttpConnection(String strURL) throws IOException{
    InputStream inputStream = null;
    URL url = new URL(strURL);
    URLConnection conn = url.openConnection();
    try{
            HttpURLConnection httpConn = (HttpURLConnection)conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();
        if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
               inputStream = httpConn.getInputStream();
            }
        }
        catch (Exception ex){
        /* ERROR  DO SOMETHING */
        }
        return inputStream;
    } 
```

# sql-server - 计算Sql server中的事件？

> ID：11602414
> 
> 赞同：5
> 
> 时间：2012-07-22T17:25:47.397
> 
> 标签：sql-server, sql-server-2008, tsql

我有一张包含*购买时间信息*的表格。（用户买了一些东西......）

我需要创建一个间隔为 5 分钟的时间线，我需要在这 5 分钟的窗口中计算 - 进行了多少购买（计数） - （*不需要按用户分组*））

起点 = `@startCheckingTime` 其值为 08:00:00

终点=一天的结束。（如果 :*或小于第二天 at**无关紧要`xx:59:59``00:00:00`*）

表格是：

```
DECLARE @startCheckingTime DATETIME 
SET @startCheckingTime='2010-01-01 08:00:00'
declare @t table 
(
    d   DATETIME 
)

INSERT INTO  @t
SELECT   '2010-01-01 08:02:00'
UNION ALL
SELECT   '2010-01-01 08:04:00'
UNION ALL
SELECT   '2010-01-01 08:05:00'
UNION ALL
SELECT   '2010-01-01 08:06:00'
UNION ALL
SELECT   '2010-01-01 08:07:00'
UNION ALL
SELECT   '2010-01-01 08:12:00' 
```

所以结果应该是：

```
08:05:00    |   3  //in the last 5 min we had 3 purchases
08:10:00    |   2
08:15:00    |   1 
```

问题 ：

为了做到这一点，我*是否必须*创建一个临时表（或表变量），它具有从 08:00:00 到一天结束的所有时间间隔？（通过加入）

或者，这可以在*没有**包含所有可能值的表格的*帮助下完成

 *谢谢。

*ps 如果一个值恰好在 xx:05:00 ，它属于哪个窗口并不重要，只要它对所有项目都相同*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:53:54.893

这感觉不是最自然的，但是您可以使用带有时间间隔的实用程序表，通过除法来展平分钟数。

```
SELECT 
    DATEPART(hour, d) as Hour, 
    (DATEPART(minute, d) / 5) * 5 as Minute, 
    COUNT(*) as Purchases
FROM Times
GROUP BY DATEPART(hour, d), DATEPART(minute, d) / 5
ORDER BY DATEPART(hour, d), DATEPART(minute, d) / 5 
```

这显示了基本思想。包括开始时间并将其限制为仅涵盖一天很简单。

工作[SqlFiddle](http://sqlfiddle.com/#!3/4cf75/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T19:00:41.027

试试这个：

```
select dateadd(minute, m * 5, 0) as d,
       count(*) as c
from (
      select datediff(minute, 0, d) / 5 as m
      from @t
      where d >= @startCheckingTime and
            d < dateadd(day, 1, cast(@startCheckingTime as date))
      ) T
group by m
order by m 
```*

# php - mysql password() 加密密码到oracle迁移

> ID：11602419
> 
> 赞同：2
> 
> 时间：2012-07-22T17:26:28.213
> 
> 标签：php, mysql, database, oracle, encryption

> **可能重复：**
> [MySQL密码功能](https://stackoverflow.com/questions/1751152/mysql-password-function)

我正在使用 MySQL 为我的主页的注册字段制作表格。

我搜索了加密密码的方式，它告诉我我可以在 MySQL 查询中使用 password() 进行加密。

问题是，当我更改我的数据库系统（如 MySQL -> Oracle）时，我可以迁移我的数据库和加密密钥吗？

我可以不用担心只使用密码（）吗？

提前致谢

附言。我很抱歉我没有带来任何源代码，但我什至不知道它是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:33:36.960

不。看看[这个](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)关于如何在数据库中存储密码的问题。基本上，您应该在存储密码之前使用[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)之类的东西对密码进行哈希处理。这些方案不仅非常安全，而且与 DBMS 无关，因此您不必担心任何 DBMS 迁移问题。

# c# - 实体框架 - 虚拟属性 Null

> ID：11602422
> 
> 赞同：4
> 
> 时间：2012-07-22T17:26:44.900
> 
> 标签：c#, entity-framework

我有以下类定义

```
public abstract class AbstractClass
{

    [Key]
    public string Name { get; set; }
    public virtual IndependentClass IndependentClass { get; set; }

    public string IndependentClassName { get { return IndependentClass == null ? "<NULL>" : IndependentClass.Name; } }
}

public class Impl1 : AbstractClass
{
}

public class Impl2 : AbstractClass
{
}

public class IndependentClass
{
    [Key]
    public string Name { get; set; }

    public virtual Impl1 Impl1 { get; set; }
    public virtual ICollection<Impl2> Impl2s { get; set; }
} 
```

这些在我的`Context.OnModelCreating`：

```
modelBuilder.Entity<AbstractClass>().HasOptional(abs => abs.IndependentClass);
modelBuilder.Entity<IndependentClass>().HasRequired(ind => ind.Impl1);
modelBuilder.Entity<IndependentClass>().HasMany(ind => ind.Impl2s); 
```

我的初始化看起来像这样（将数组添加到上下文并`context.SaveChanges()`修剪）

```
var impl1s = new[]
{
    new Impl1() { Name = "a" },
    new Impl1() { Name = "b" },
    new Impl1() { Name = "c" }
}

var inds = new[]
{
    new IndependentClass() { Name = "A", Impl1 = impl1s[0] },
    new IndependentClass() { Name = "B", Impl1 = impl1s[1] }
}

var impl2s = new[]
{
    new Impl2() { Name = "a1", IndependentClass = inds[0] },
    new Impl2() { Name = "a2", IndependentClass = inds[0] },
    new Impl2() { Name = "b1", IndependentClass = inds[1] },
    new Impl2() { Name = "b2", IndependentClass = inds[1] },
    new Impl2() { Name = "c1", IndependentClass = null }
} 
```

最后，我有一个简单的视图，可以转储每个数据库集合。我的问题是导航属性没有像我需要的那样填充。即，我的观点的输出是这样的：

```
Independent Classes:

    A: Impl1 = a, Impl2s = []
    B: Impl1 = b, Impl2s = []

Impl1s

    a: IndependentClass = <NULL>
    b: IndependentClass = <NULL>
    c: IndependentClass = <NULL>

Impl2s

    a1: IndependentClass = A
    a2: IndependentClass = A
    b1: IndependentClass = B
    b2: IndependentClass = B
    c1: IndependentClass = <NULL> 
```

IndepdendentClass 应该填充它们的 Impl2，前两个 Impl1 应该填充 IndependentClass。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:52:44.510

您的模型与以下导航属性具有三个关系：

*   `AbstractClass.IndependentClass`<->`IndependentClass.(NoNavigationProperty)`
*   `IndependentClass.Impl1`<->`Impl1.(NoNavigationProperty)`
*   `IndependentClass.Impl2s`<->`Impl2.(NoNavigationProperty)`

对于每个关系，关联的一端不作为导航属性公开。在这个模型中预计不会...

> IndepdendentClasses 应该填充它们的 Impl2s，前两个 Impl1s 应该填充 IndependentClasses

...因为您没有填充`IndependentClass.Impl2s`初始化代码，也没有填写`Impl1.IndependentClass`. 您填写`Impl2.IndependentClass`，但由于此导航属性属于另一个关系，它根本不会影响`IndependentClass.Impl2s`。

如果您实际上想要两种关系...

*   `IndependentClass.Impl1`<-> `Impl1.IndependentClass` （一对一）
*   `IndependentClass.Impl2s`<-> `Impl2.IndependentClass`（一对多）

...只要您`AbstractClass`是模型中具有自己的表的实体，您就无法实现这一点，因为您必须在*声明*它们的类型的导航属性之间进行映射，`Impl1.IndependentClass`并且`Impl2.IndependentClass`是继承的属性，但它们没有在`Impl1`和中声明`Impl2`.

如果您不创建`AbstractClass`实体，即不在映射代码中使用此抽象类并且`DbSet<AbstractClass>`在您的上下文类中没有a，那么上述两种关系是可能的。对于 EF，您的模型没有任何继承，而是将`Impl1`(and `Impl2`) 视为一个仅包含其自身属性和基类属性的实体，就*好像*它是一个没有基类的类一样。

这就是您自己的答案中的映射按您预期工作的原因：您已经定义了 Fluent API 之间的一对一关系，`IndependentClass.Impl1`并`Impl1.IndependentClass`明确定义了 Fluent API。`IndependentClass.Impl2s`和之间的第二种关系`Impl2.IndependentClass`是通过命名约定自动检测为一对多关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:38:58.933

显然解决方案是更换

```
modelBuilder.Entity<AbstractClass>().HasOptional(abs => abs.IndependentClass);
modelBuilder.Entity<IndependentClass>().HasRequired(ind => ind.Impl1);
modelBuilder.Entity<IndependentClass>().HasMany(ind => ind.Impl2s); 
```

和

```
modelBuilder.Entity<Impl1>()
    .HasOptional(abs => abs.IndependentClass)
    .WithRequired(ind => ind.Impl1); 
```

但我不知道为什么我不必为 Impl2 做任何改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:29:17.027

You need to initialize the properties in your constructor.

EF will only do that for you if the instances come from an EF DataContext.

When you write `new Impl2()`, EF is not involved at all.

# c - Langinfo.h in Visual Studio 2010

> ID：11602425
> 
> 赞同：2
> 
> 时间：2012-07-22T17:27:13.530
> 
> 标签：c, windows, visual-studio, localization, locale

How can I include into my Visual Studio 2010 C-project langinfo.h. I've tried `#include <langinfo.h>`, but it seems there is no such header file in the VS 2010 environment. I need to get the starting weekday for the locale, but I now the way only using this library. So, the question is how to solve my problem: how to include langinfo.h, or how to get the current locale starting weekday.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T10:22:58.993

我认为，您应该使用 GetLocaleInfoEx() 函数。例如，要获取一周的开始日期，可以使用以下调用：

```
# if defined(_WIN32_WINNT_VISTA) && WINVER >= _WIN32_WINNT_VISTA && defined(LOCALE_NAME_USER_DEFAULT)
    GetLocaleInfoEx(LOCALE_NAME_USER_DEFAULT, LOCALE_IFIRSTDAYOFWEEK, wsDay, 4)
# else
    GetLocaleInfo(LOCALE_USER_DEFAULT, LOCALE_IFIRSTDAYOFWEEK, wsDay, 4)
# endif 
```

有关此功能的更多信息，请访问[http://msdn.microsoft.com/en-us/library/dd318103%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd318103%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-18T13:49:25.580

这是一个小示例程序`first_weekday.c`，它获取一周的第一天。此外，打印使用的变量的值和大小。
`GetLocalInfoEx()`将一周的第一天存储在变量中`week_1stday`。
但是，在 Windows 上，我们有：（`0:Monday, ... 6:Sunday`参见：[LOCALE_IFIRSTDAYOFWEEK](https://docs.microsoft.com/en-us/windows/desktop/intl/locale-ifirstdayofweek)）。
因此，此处包含一个计算，以便获得`0:Sunday, 1:Monday, ...`
一周中第一天的数字，然后存储在`first_weekday`

```
#include <stdio.h>
#include <windows.h>

int main(
    )
{
    int       ret;
    int       first_weekday;
    DWORD     week_1stday;

    ret = GetLocaleInfoEx(LOCALE_NAME_USER_DEFAULT,
                          LOCALE_IFIRSTDAYOFWEEK | LOCALE_RETURN_NUMBER,
                          (LPWSTR) & week_1stday,
                          sizeof(week_1stday) / sizeof(WCHAR));
    /* 0:Monday, ..., 6:Sunday. */
    /* We need 1 for Monday, 0 for Sunday. */
    first_weekday = (week_1stday + 1) % 7;
    printf("ret = %d\n", ret);
    printf("sizeof(ret) = %Iu\n", sizeof(ret));
    printf("sizeof(week_1stday) = %Iu\n", sizeof(week_1stday));
    printf("sizeof(WCHAR) = %Iu\n", sizeof(WCHAR));
    printf("week_1stday = %lu\n", week_1stday);
    printf("first_weekday = %d\n", first_weekday);
    return 0;
} 
```

另请参阅：
[GetLocaleInfoEx 函数](https://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-getlocaleinfoex)
[LOCALE_IFIRSTDAYOFWEEK](https://docs.microsoft.com/en-us/windows/desktop/intl/locale-ifirstdayofweek)

# c# - Implementing ACS on emulator web application

> ID：11602428
> 
> 赞同：0
> 
> 时间：2012-07-22T17:27:49.773
> 
> 标签：c#, azure, acs

Can we implement `Access Control Service ( ACS )` without Log on into the

`Windows Azure Management Portal`.Means can we implement ACS on window azure emulator web

application?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:17:29.713

访问控制服务，顾名思义。这是一项由 Microsoft 提供的服务，您可以使用它。这意味着您可以将应用程序托管在本地、云端甚至模拟器中，并且它仍然可以与 ACS 一起正常工作。

现在，如果您想在模拟器中“运行”ACS（我认为这就是您要问的），那么答案是否定的。您不能在模拟器中“运行”ACS。我建议您只需使用真正的 ACS 服务（即使用于开发），因为它非常便宜。

如果由于某种原因您无法获得帐户（您所在的国家/地区可能不支持 Azure），您可以尝试使用实验室环境：[https](https://portal.appfabriclabs.com/Default.aspx) ://portal.appfabriclabs.com/Default.aspx （如果我是正确的，您不要不需要信用卡来使用它）。

而且由于 ACS 只是基于标准，您可以将其替换为其他用于本地开发的东西，例如出色的[IdentityServer](http://identityserver.codeplex.com/)（支持 WS-Trust、WS-Federation、OAuth2、WRAP ...）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T19:20:56.553

Windows Azure 平台培训工具包（[课程](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtoacs2_topic2)）展示了如何在计算模拟器中使用 ACS 进行开发。

# android - Fragment.newInstance() vc onSaveInstanceState()

> ID：11602433
> 
> 赞同：10
> 
> 时间：2012-07-22T17:28:16.870
> 
> 标签：android

Why is it recommended (different sources) not to overload the constructor for `Fragment`s but use static `Fragment.newInstance()` with passing a `Bundle` to it?

When you overload a constructor you just explicitly define default one. Than, if your `Fragment` would be recreated for some reason you use `onSaveInstanceState()` with subsequent data extracting on `onCreate()`. The similar situation with using `Fragment.newInstance()`, the only difference you don't need to create public default constructor.

Am I understanding something wrong? Thank you very much.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T17:34:09.507

> 为什么建议（不同来源）不要重载 Fragments 的构造函数，而是使用静态 Fragment.newInstance() 并将 Bundle 传递给它？

Android 会在配置更改（例如屏幕旋转）时自动重新创建所有未保留的片段，并且它将为此使用零参数构造函数。提供的`Bundle`via`setArguments()`保存为实例状态的一部分，并提供给新创建的片段。因此，您只需实现一种方法（工厂方法）而不是三种（非零参数构造函数*和* `onSaveInstanceState()` *and* `onViewStateRestored()`）即可采用您建议的方法。

> 我理解错了吗？

如果它适合你，那就去吧。正如您所注意到的，工厂方法方法是一种建议，而不是要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T17:32:49.070

最好不要重载该构造函数，因为 Android 可以在需要时杀死您的 Fragments。而且，为了稍后重新创建它们，它将调用非参数构造函数。

要检索参数，只需调用 getArguments()。

```
getArguments().getInt("myInt", 0); 
```

即使您的 Fragment 被重新创建，参数也将可用。

# php - More than one action on html from?

> ID：11602435
> 
> 赞同：1
> 
> 时间：2012-07-22T17:28:19.710
> 
> 标签：php, html, forms, web, paypal

I have a paypal button on webpage that adds item to shopping basket. Can I add another action to the paypal form so that it will send me an email confirmation as well as do the orginal task of 'adding to basket'?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:33:58.660

```
<script type="text/javascript">
function submitTwice(f){
f.action = 'first.php';
f.target='ifr1';
f.submit();
f.action = 'second.php';
f.target='ifr2';
f.submit();
}
</script> 
```

和形式：

```
<form method="post">

<input type="button" value="Send" onsubmit="submitTwice(this.form)">
</form> 
```

# ruby - 在Ruby中打开目录路径和文件名更改的文件

> ID：11602437
> 
> 赞同：0
> 
> 时间：2012-07-22T17:28:23.160
> 
> 标签：ruby

如果您知道大部分目录，是否有一种方法可以打开文件，但是有一个文件夹会根据数据库中文件的 id 而更改，并且文件文件的名称基于用户命名文件的名称。例如，在下面的代码中，id 将根据数据库中文件的 id 更改，文件夹名称将根据用户命名它的名称更改。在我的情况下，文件的扩展名也可以改变。

```
File.open("/public/emails/:id/:filename") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:36:53.217

我建议您的`File`模型存储所有这些元数据。那么这是一个简单的字符串插值案例：

```
file = File.find(...)
File.open("/public/emails/#{file.id}/#{file.name}.#{file.extension}") 
```

这当然会让您容易受到注入式攻击——例如，如果用户命名他们的文件`../../../../boot/grub.conf`或其他东西——但这是特定于应用程序的，由您来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:37:02.907

将冷杉和文件名附加到路径是否有任何问题，例如

```
dir = "2" # the name of dir from database entry
filename = "abc"
extension = ".png"
path = "path/dir/#{dir}/#{filename}#{extension}"

File.open(path) 
```

# android - Android WifiManager.startScan() - 主动或被动扫描？

> ID：11602446
> 
> 赞同：2
> 
> 时间：2012-07-22T17:29:47.230
> 
> 标签：android, wifimanager, probe

SO 上的几篇文章（包括[这篇](https://stackoverflow.com/questions/9380362/android-active-scanning-for-wifi-networks)文章）暗示 WifiManager.startScan() 仅被动扫描，等待 AP 发送信标，而不是主动发送探测请求。

好吧，我下载了 CommView for WiFi 来亲自检查一下，当我在我的应用程序中使用 startScan() 时，我发现我看到了一个探测请求。该设备是摩托罗拉 Atrix。

![WifiManager.startScan() 上的 CommView 探测请求](../Images/62310ee3ceeb00fed00274ce7dbc3278.png)

那我错过了什么？！

PVS

# magento - 如何将存储配置值保存到 javascript 文件中

> ID：11602448
> 
> 赞同：1
> 
> 时间：2012-07-22T17:30:09.990
> 
> 标签：magento

在 Magento 中，我想根据存储配置值测试条件，但我想在 javascript 文件中进行测试。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:30:39.180

处理此问题的最简洁方法是允许将配置值作为参数或通过方法调用传递给脚本。然后从模板提供参数值。例如，如果您的 JavaScript 文件包含一个 JavaScript 对象，则允许该对象通过它的构造函数或对该对象的“setConfigValue()”方法调用从 Magento 配置中接受您需要的值。然后实例化对象并在模板文件中提供参数（或调用“setConfigValue()”方法）。

# javascript - 在用户脚本中使用 Cufon

> ID：11602451
> 
> 赞同：0
> 
> 时间：2012-07-22T17:30:53.783
> 
> 标签：javascript, userscripts, cufon

我用这个函数导入 JS 文件：

```
function importScript(url){
var tag = document.createElement("script");
tag.type= "text/javascript";
tag.src = url;
document.body.appendChild(tag);
} 
```

所以：

```
importScript("http://cdnjs.cloudflare.com/ajax/libs/cufon/1.09i/cufon-yui.js");
importScript("https://raw.github.com/gist/3160278/0895dcf14f623abba82c4aa7d25e00e50404248a/Meta.js"); 
```

没关系。我在源代码中看到带有此代码段的脚本文件。一切正常。但是当我打电话给 Cufon 时：

```
Cufon.replace('h1'); 
```

Chrome 控制台说：**Uncaught ReferenceError: Cufon is not defined**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:48:45.287

您使用的方法异步加载脚本，因此以下代码：

```
Cufon.replace('h1'); 
```

在加载 Cufon 库之前运行。

* * *

相反，传入一个回调，并使用`onload`：

```
function importScript(url, callback) {
    var tag = document.createElement("script");

    tag.type = "text/javascript";
    tag.src = url;

    callback && (tag.onload = callback);

    document.body.appendChild(tag);
}

importScript("http://cdnjs.cloudflare.com/ajax/libs/cufon/1.09i/cufon-yui.js", function() {
    importScript("https://raw.github.com/gist/3160278/0895dcf14f623abba82c4aa7d25e00e50404248a/Meta.js", function() {
        Cufon.replace('h1');
    });
}); 
```

这很快就会失控。我建议您考虑使用[Script Loader](http://net.tutsplus.com/articles/web-roundups/for-your-script-loading-needs/)。

这是小提琴：http: [//jsfiddle.net/72Ghd/](http://jsfiddle.net/72Ghd/)

# c++ - 如何使用 OpenGL 在 C++ 中创建 3D 选择工具？

> ID：11602452
> 
> 赞同：0
> 
> 时间：2012-07-22T17:31:01.440
> 
> 标签：c++, opengl

基本上我想要做的就是在我的opengl窗口中单击某个有模型的地方，然后进行某种检查以查看我是否选择了一个对象。我不知道我会怎么做我了解opengl但不了解数学，一些源代码会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:39:03.593

基本的“待办事项”相当简单：将光线从您的视图投射到您的 3D 世界中，并将其与您的对象相交。

一个非常简单的方法是：

*   确定已单击的视口位置。
*   反转视图/投影矩阵或使用其他方式来确定从您的相机穿过点击点的一条线。如果您知道相机的视野，则可以跳过矩阵内容。使用相机的“前向矢量”并相应地转置它（例如单击视口的最左侧 -> 将矢量旋转一半水平视野）。
*   将该线与对象的边界框相交以确定已单击的项目（使用最接近的项目来确定最前面的对象）。

可以在[此处](http://www.opengl.org/archives/resources/faq/technical/selection.htm)找到一个相当复杂的示例实现（这是使用 GL_SELECTION；另一种方法）。

可以在[这里](https://gamedev.stackexchange.com/questions/12360/how-do-you-determine-which-object-surface-the-users-pointing-at-with-lwjgl)找到另一个解决方案（使用数学方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:41:34.683

*另一种方法是在具有不同 ID 的选择缓冲区*中渲染每个可选择的几何图形，然后获取鼠标下方的 ID。

# windows - 如何定义 Windows 驱动程序名称？

> ID：11602454
> 
> 赞同：0
> 
> 时间：2012-07-22T17:31:44.077
> 
> 标签：windows, driver, inf

我正在尝试定义我的驱动程序的名称，因为它在安装时显示为 UAC 标记的名称。

这是该问题的图像：

![在此处输入图像描述](../Images/2bf5bf1854e8cb8205289396e29b0702.png)

我不知道如何更改此参数的名称，也不知道它来自哪里。我希望名称为“Argon R1 Mainboard”。

以下是来自inf的相关细节：

```
[Version] 
Signature = "$Windows NT$" 
Class=USB
ClassGUID={36fc9e60-c465-11cf-8056-444553540000} 
Provider=%LoveElectronics%
CatalogFile.NTx86   = Argonx86.cat
CatalogFile.NTIA64  = Argoia64.cat
CatalogFile.NTAMD64 = Argamd64.cat

[Strings] 
ClassName           = ".NET Micro Framework"
USB\Vid_16D0&Pid_06F4.DeviceDesc = "Argon R1 Mainboard"
LoveElectronics     = "Love Electronics Ltd"

VERSION             = "1.2"
INQUIRIES_INTERFACE = "{265820CE-19E5-4530-8861-262E97E78575}"
SourceDesc          ="driver installation media" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T14:03:14.777

该名称来自 .inf 文件。您可以使用版本部分中的 DriverPackageDisplayName 条目进行设置，请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/ff547502.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547502.aspx)

以下将显示“您的驱动程序显示名称”作为 UAC 提示符中的名称：

```
[Version]
DriverPackageDisplayName = %DisplayName%

[Strings] 
DisplayName = "Your Driver Display Name" 
```

如果未设置 DriverPackageDisplayName，则 Windows 将结合 Version 部分中的 Provider 和 Class 条目以获得显示名称，如您在屏幕截图中所见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:33:18.147

我相当肯定 UAC 提示来自二进制文件上的数字签名，而不是 INF 文件。您使用什么参数对二进制文件进行签名，以及如何在 .SYS 文件上设置属性？

# php - 会话 ID 已通过，已设置，但会话不包含变量（禁用 cookie）

> ID：11602457
> 
> 赞同：0
> 
> 时间：2012-07-22T17:32:19.177
> 
> 标签：php, session

我在禁用 cookie 的情况下传递会话变量时遇到问题。

***脚本 1：***

```
session_start();
$_SESSION['x'] =55; 
```

然后我通过 URL 传递会话 ID（我通过改变 php init 设置并明确地将其附加到 URL 进行了尝试），例如：

```
<a href="abc.php?<?php echo SID; ?>">abc to</a> 
```

***脚本 2 abc.php：***

```
session_start();
session_id($_GET['PHPSESSID']);
echo session_id(); 
```

* * *

我检查了第二个脚本中的 ID，它完全一样。但是当我尝试使用： `$_SESSION['x']`变量或它`print_r`时`$_SESSION`显示它没有设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:55:32.133

逆天。经过数小时的搜索，我终于在此处发布此问题的几分钟内找到了解决方案。

顺序应该是：

```
session_id($_GET['PHPSESSID']);
session_start(); 
```

所以首先必须设置 ID，然后会话开始。或者至少看起来是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:37:10.170

```
echo session_id($_GET['PHPSESSID']); 
```

代替

```
session_id($_GET['PHPSESSID']);
echo session_id(); 
```

session_id() 返回 session_id( string $id ) 所以要么将它存储在 $var 中，要么在我上面的示例中回显它

您是否希望得到与 $_SESSION['x'] = 55; 相同的结果？?

# sql - 用于多排序的 url 设计中的约定？

> ID：11602458
> 
> 赞同：0
> 
> 时间：2012-07-22T17:32:23.233
> 
> 标签：sql, url, web-applications, query-string

假设一个通用查询，如：

```
SELECT * FROM items
ORDER BY type ASC, created DESC 
```

`Sorter`关于设计查询字符串以构建结果排序类是否有任何约定？在排序键之后附加方向怎么样？

```
/items/list?sorts=typeASC,createdDESC // ORDER BY type ASC, created DESC 
```

缺失等于`ASC`：

```
/items/list?sorts=type,createdDESC // ORDER BY type ASC, created DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:39:05.247

查看[开放数据协议 (OData)](http://www.odata.org/)：

> 开放数据协议 (OData) 是一种用于查询和更新数据的 Web 协议，它提供了一种解锁数据并将其从当今应用程序中存在的孤岛中解放出来的方法。OData 通过应用和构建 Web 技术（例如 HTTP、Atom 发布协议 (AtomPub) 和 JSON）来实现这一点，以提供对来自各种应用程序、服务和商店的信息的访问。该协议源于过去几年在各种产品中实现 AtomPub 客户端和服务器的经验。OData 被用于公开和访问来自各种来源的信息，包括但不限于关系数据库、文件系统、内容管理系统和传统网站。
> 
> OData 与 Web 的工作方式是一致的——它对 URI 做出了深入的承诺以进行资源识别，并承诺使用基于 HTTP 的统一接口与这些资源进行交互（就像 Web 一样）。这种对核心 Web 原则的承诺使 OData 能够跨广泛的客户端、服务器、服务和工具实现新水平的数据集成和互操作性。

以下是它在行动中的样子：

> http://services.odata.org/OData/OData.svc/Products? **$skip** =2& **$top** =2& **$orderby** =评分

# javascript - 在 body 标签之前调用 JavaScript 函数

> ID：11602462
> 
> 赞同：2
> 
> 时间：2012-07-22T17:32:33.827
> 
> 标签：javascript, html

*我在一个名为cookieRedirect.js*的外部文件中有 Load() 函数，我想在 <body> 标记之前加载该函数。

我曾经这样加载它：

```
 <script type="text/javascript" src="cookieRedirect.js"></script>

</head>

<body onload=Load();> 
```

但是当我尝试这个时，它不起作用：

```
 <script type="text/javascript" src="cookieRedirect.js">
        window.onload = Load();
    </script>

</head>

<body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:35:09.817

如果您想在页面加载之前加载该功能，只需将脚本代码添加到`<head>`页面，而不是正文中。`window.onload`或者`onload=""`仅在页面加载时执行您的代码，而不是之前。

这样做：

```
<html>
  <head>
    <script src="cookieRedirect.js"></script>
    <script>
      Load();
    </script>
  <head>

  <body>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:36:10.753

您不能`src`在标签和内联 JavaScript 中包含属性`script`并期望它们都执行。如果你这样做，`src`只会执行该属性。请参阅*[降级脚本标记](http://ejohn.org/blog/degrading-script-tags/)*。

您可以将它们拆分为单独的标签，如下所示：

```
<script src="cookieRedirect.js">
</script>

<script>
    window.onload='Load';
</script> 
```

如果要`Load()`在加载 HTML 文档之前执行，可以这样做：

```
<script src="cookieRedirect.js">
</script>

<script>
    Load();
</script> 
```

但请注意，它会阻止 HTML 的解析和呈现，直到`Load()`完成。因此，如果`Load()`可能需要一些时间，那么这可能会对性能产生负面影响。对于重定向脚本来说，这不太可能成为问题，但通常需要牢记这一点。

# javascript - 如何在没有小部件工厂的情况下创建 jQuery 对话框？

> ID：11602466
> 
> 赞同：0
> 
> 时间：2012-07-22T17:32:55.467
> 
> 标签：javascript, jquery-ui, client-side

我正在使用该机制创建一个`jQuery`对话框。`widget factory`

```
函数 ($) {

    function myDialogDiv() {...} // 为对话框创建所有必需的 HTML

    $.widget("myApp.myDialog", {

        _创建：函数（）{
            var div = myDialogDiv();
            var props = {autoOpen:false, height:'200', width:'30%'};
            var onClose = 函数 () {};
            $(div).dialog(props, onClose);
        },

        _init:function() {$('#myDialog').dialog('open');}
    })

}(jQuery))

...

// 点击按钮打开对话框
$('.myDialogBu​​tton').bind("点击", function(){$(this).myDialog();});

```

它工作正常。现在我想知道是否可以创建*一个*`jQuery`没有.*`widget factory`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:16:57.720

当然，您可以编写自己的对话框库或使用另一个具有自己初始化方案的对话框库；-)

但如果失败了，不。jQuery 对话框（就像所有 jQuery UI 小部件一样）需要一组特定的初始化参数，您可以在每次需要小部件时重现它们，或者您可以使用“小部件工厂”样式将所有初始化内容隐藏在构建器中功能。

此外，您必须记住，jQuery UI 就像 jQuery 一样，不会尝试为您做所有事情：它们故意将很多东西留给开发人员，例如。将按钮连接到对话框的生成。当您考虑它时，这是有道理的，因为其他人可能使用 A 标记，其他人可能使用 DIV 等。库的目标只是让您不必重做常见的东西，而不是让您免于编写任何代码在你的最后。

我能看到的唯一其他选项是一种半对半方法，您每次都重新制作对话，但使用一组全局选项来保存重复：

```
var GLOBAL_DIALOG_PROPS = {autoOpen:false, height:'200', width:'30%'}
function dialogButtonClickHandler() {
    $(this).myDialog().dialog(GLOBAL_DIALOG_PROPS, onClose).dialog('open');
}
$('.myDialogButton').bind("click", dialogButtonClickHandler); 
```

但归根结底，必须完成初始化工作，如果您要在代码中的多个位置执行此操作，明智的做法是将其干燥并将公共位存储在某处（例如在您的小部件工厂中） .*

# vb.net - 使用 vb.net 将数据发布到 asmx 页面

> ID：11602469
> 
> 赞同：0
> 
> 时间：2012-07-22T17:33:20.317
> 
> 标签：vb.net, asmx

问候，我正在尝试使用 vb.net 将数据发布到 asmx webservice，但收到以下错误“错误 WebException 远程服务器返回错误：（500）内部服务器错误。”

我使用的 vb.net 编码是：

```
Private Function ConnectApi() As String
    Dim hwReq As HttpWebRequest
    Dim hwRes As HttpWebResponse

    Dim gsLogin As String = "xxxxxxx"
    Dim gsPassword As String = "xxxxxxxxx"
    Dim gsCode As String = "xxxxxxxxx"
    Dim mTransactionId As String = "521"
    Dim mBaseCurrency As String = "USD"
    Dim mPaymentValue As Decimal = 2.1
    Dim mDateTime As Date = Now.Date

    Dim mCustomValue As Integer = 15

    'Dim strPostData As String = String.Format("sub={0}&login={1}&password={2}&limit={3}", Server.UrlEncode(ApiSub), Server.UrlEncode(ApiUsername), Server.UrlEncode(ApiPassword), Server.UrlEncode(ApiLimit))
    Dim strPostData As String = String.Format("gsLogin={0}&gsPassword={1}&gsCode={2}&mTransactionId={3}&mBaseCurrency={4}&mPaymentValue={5}&mDateTime={6}&mCustomValue={7}", Server.UrlEncode(gsLogin), Server.UrlEncode(gsPassword), Server.UrlEncode(gsCode), Server.UrlEncode(mTransactionId), Server.UrlEncode(mBaseCurrency), Server.UrlEncode(mPaymentValue), Server.UrlEncode(mDateTime), Server.UrlEncode(mBaseCurrency), Server.UrlEncode(mCustomValue))

    Dim strResult As String = ""
    Try
        'https:/gscash.com/gateway/staging/gsprocess.asmx?wsdl

        hwReq = DirectCast(WebRequest.Create("https://gscash.com/gateway/staging/gsprocess.asmx"), HttpWebRequest)

        hwReq.Method = "POST"
        hwReq.ContentType = "application/x-www-form-urlencoded"
        hwReq.ContentLength = strPostData.Length

        Dim arrByteData As Byte() = ASCIIEncoding.ASCII.GetBytes(strPostData)
        hwReq.GetRequestStream().Write(arrByteData, 0, arrByteData.Length)

        hwRes = DirectCast(hwReq.GetResponse(), HttpWebResponse)
        If hwRes.StatusCode = HttpStatusCode.OK Then
            Dim srdrResponse As New StreamReader(hwRes.GetResponseStream(), Encoding.UTF8)
            Dim strResponse As String = srdrResponse.ReadToEnd().Trim()

            strResult = strResponse

        End If
    Catch wex As WebException
        strResult = "Error WebException " + wex.Message
    Catch ex As Exception
        strResult = "Error Exception " + ex.Message
    Finally
        hwReq = Nothing
        hwRes = Nothing
    End Try

    Return strResult
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:22:52.043

我认为你正在努力解决这个问题。

将 Web 服务作为引用添加到您的应用程序中，然后通过直接代码访问它比尝试自己构建请求/响应机制要容易得多。我已验证您上面的 URL 可用于在 .Net 项目中创建 Web 引用。

有关如何添加和使用这些 Web 服务引用的详细信息，请参阅以下 MSDN 文章：

[如何：添加和删除 Web 引用](http://msdn.microsoft.com/en-us/library/a7ddaa5d-4672-405b-91b3-39de65d7e3a2%28v=vs.90%29)

[如何：调用 Web 服务](http://msdn.microsoft.com/en-us/library/d6e04e02-ed54-47e1-a89e-b90b5eef335d%28v=vs.90%29)

您将从第二篇文章中看到，一旦添加了 Web 服务引用，与之交互就非常容易：

```
 Dim oService As New gsCash.gsprocess

    Dim oRequest As New gsCash.PayWithGscash
    oRequest.gsLogin = "login"
    oRequest.gsPassword = "password"

    Dim oResult As gsCash.GsServiceOutput

    oResult = oService.PayWithGscash(oRequest) 
```

# java - 基于其他来源创建 android 项目

> ID：11602470
> 
> 赞同：0
> 
> 时间：2012-07-22T17:33:22.140
> 
> 标签：java, android, project

我正在制作一个条形码扫描仪应用程序，但是当我创建一个以一些文件为源的新项目时，我不明白如何。在我更新 eclipse、adt 和 Android sdk 之前，我在创建新项目时有一个选项。但是现在我看不到了。我该怎么做？我有 eclipse 版本 3.7.0 和 android sdk manager 版本 20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:36:20.737

不要创建新项目（从源代码），而是使用导入并选择源项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:38:46.083

**1.**我认为你的意思是源文件的**库项目**。

**2.**

```
R_Click on your project directory in Package Explorer ---> Select Properties

   ---> Select Android ---> Scroll Down till end, and You will see the Option

   ---> Select the library project. 
```

**3.**但在此之前，对需要制作为库的项目执行与上述相同的操作，并勾选**“库”**复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:38:51.687

使用 File > New > Project > Android Project From Existing Code——他们从标准的 new-Android-project 向导中提取了这个功能。

# wpf - 虚拟键盘上的输入按钮

> ID：11602473
> 
> 赞同：0
> 
> 时间：2012-07-22T17:33:38.740
> 
> 标签：wpf, keyboard, virtual, enter, on-screen-keyboard

我目前正在开发一个开源虚拟键盘，但有一件事我真的没有开始工作：我想创建一个类似于 windows osk 上的 Enter 按钮。但是我怎样才能让 WPF 把它画成一个按钮呢？

这是我的按钮代码：

```
 <Style x:Key="EnterButton" BasedOn="{StaticResource KeyboardButton}" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Rectangle Fill="{TemplateBinding Background}" Stroke="#FF000000" StrokeThickness="1" RadiusX="5" RadiusY="50" Height="68" HorizontalAlignment="Center" x:Name="rectangle" VerticalAlignment="Top" Width="100"/>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="UIElement.PreviewMouseLeftButtonDown">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="rectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                                    <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                    <SplineDoubleKeyFrame KeyTime="00:00:00.0500000" Value="0.18"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="UIElement.PreviewMouseLeftButtonUp">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="rectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                                    <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.18"/>
                                    <SplineDoubleKeyFrame KeyTime="00:00:00.0500000" Value="1"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:43:24.807

你能试试这个吗？

```
<Grid>
    <Button Content="Enter ⏎"
             />
    <Button Content="K"
             /> 
```

基本上它使用**U+23CE**字符作为[Return symbol](http://www.fileformat.info/info/unicode/char/23ce/index.htm)。当然，任何更花哨的东西，你总是可以创建一个带有自定义图像作为内容的按钮

# javascript - 使用 Javascript 动态创建表单

> ID：11602489
> 
> 赞同：0
> 
> 时间：2012-07-22T17:36:32.313
> 
> 标签：javascript

我尝试编写一个函数，该函数接收用户关于在表单中创建多少字段的输入。然后该函数创建一个包含文本框数量（相当于用户输入）和一个提交按钮的表单。我写了这个函数，但它似乎没有在我出错的地方工作。如果有人可以帮助我，我将不胜感激。我的代码：

```
function createTextBox()
    {   
        var box=document.getElementById('pop');                             //getting the ID of the containner
        var val=document.getElementById('uValue').value;                    //getting the Input value from the user

        var candidateForm=document.createElement('form');                   //Creating a form and giving the attributes
        candidateForm.name="candidateForm";
        candidateForm.method="post";
        candidateFomr.action="process.php";

        for(var i=0; i<val;i++)
        {
            var newTextbox = document.createElement('input');               //creating the textboxes according to the users input
            newTextbox.type="textbox";
            newTextbox.name="candidate[]";
            newTextbox.id="candidateId";

            candidateForm.appendChild(newTextbox);                          //putting the created textboxes in the form

        }

        var saveButton=document.createElement('input');                     //creating the submit button which when clicked will save the value written in the textboxes
        saveButton.type="submit";
        saveButton.name="submitButton";
        saveButton.value="Enter";
        candidateForm.appendChild(saveButton);                              //putting the submit button in the form

        box.appendChild(candiateForm);                                      //And putting the form in the containner.

        //alert (val);
    } 
```

这是HTML部分

```
<body>
<input type="textbox" name="value_box" id="uValue" ></input>
<input type="button" onclick="javascript:createTextBox()" value="Click"></input>
<div id="pop"></div>
</body> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:57:58.000

首先`input`类型是独立标签。

将您的 HTML 更改为

```
<input type="textbox" name="value_box" id="uValue" />
<input type="button" onclick="javascript:createTextBox()" value="Click"/>
<div id="pop"></div> 
```

还对js进行了更改

```
function createTextBox()
    {   
        var box=document.getElementById('pop');                             //getting the ID of the containner
        var val=document.getElementById('uValue').value;                    //getting the Input value from the user

        var candidateForm=document.createElement('form');                   //Creating a form and giving the attributes
        candidateForm.name="candidateForm";
        candidateForm.method="post";
        candidateFomr.action="process.php";

        for(var i=0; i<val;i++)
        {
            var newTextbox = document.createElement('input');               //creating the textboxes according to the users input
            newTextbox.type="textbox";
            newTextbox.name="candidate[]";
            newTextbox.id="candidateId";

            candidateForm.appendChild(newTextbox);                          //putting the created textboxes in the form

        }

        var saveButton=document.createElement('input');                     //creating the submit button which when clicked will save the value written in the textboxes
        saveButton.type="submit";
        saveButton.name="submitButton";
        saveButton.value="Enter";
        candidateForm.appendChild(saveButton);                              //putting the submit button in the form

        box.appendChild(candiateForm);                                      //And putting the form in the containner.

        //alert (val);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:48:19.137

您的另一种方法：

```
 <script>
      function generateForm()
      {
        $FormHTML = "";
        $fieldCount = document.getElementById("fieldsCount").value;
        console.log($fieldCount);
        for ($i = 1; $i <= $fieldCount; $i++)
        {
          $FormHTML += "<div><b>Form input " + $i + ":</b><br><input type='text' id='element" + $i + "' name='element" + $i + "' style='width:200px;'/></div>\n";
        }
        document.getElementById("FieldsContainer").innerHTML = $FormHTML;
      }
    </script>

    <form>
      <select id="fieldsCount" name="fieldsCount" onChange="generateForm()">
        <option value="0">Please choose</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="5">5</option>
        <option value="10">10</option>
      </select>
      <div id="FieldsContainer"></div>
    </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:45:51.997

您的代码中有两个拼写错误。这：

```
candidateFomr.action="process.php"; 
```

应该是这样的：

```
candidateForm.action="process.php"; 
```

* * *

还有这个：

```
box.appendChild(candiateForm); 
```

应该是这样的：

```
box.appendChild(candidateForm); 
```

* * *

我测试了纠正错别字的代码，它工作正常。

* * *

要使文本框垂直显示，您可以`br`在每个文本框之后添加一个元素：

```
for(var i=0; i<val;i++)
{
    var newTextbox = document.createElement('input');               //creating the textboxes according to the users input
    newTextbox.type="textbox";
    newTextbox.name="candidate[]";
    newTextbox.id="candidateId";

    candidateForm.appendChild(newTextbox);                          //putting the created textboxes in the form
    var brElement = document.createElement("br");
    candidateForm.appendChild(brElement);

} 
```

* * *

编辑：你的意思是这样？

```
for(var i=0; i<val;i++)
{
    var lblElement = document.createElement("label");
    lblElement.innerHTML = "Label " + (i+1) + " ";
    candidateForm.appendChild(lblElement);
    var newTextbox = document.createElement('input');               //creating the textboxes according to the users input
    newTextbox.type="textbox";
    newTextbox.name="candidate[]";
    newTextbox.id="candidateId";

    candidateForm.appendChild(newTextbox);                          //putting the created textboxes in the form
    var brElement = document.createElement("br");
    candidateForm.appendChild(brElement);

} 
```

# java - java.util.NoSuchElementException 读取文件（扫描仪）

> ID：11602492
> 
> 赞同：0
> 
> 时间：2012-07-22T17:36:52.563
> 
> 标签：java, java.util.scanner

我有一个包含 3 个单词的文本文件，在尝试阅读这些单词时出现以下错误：

```
Exception in thread "main" java.util.NoSuchElementException  
    at java.util.Scanner.throwFor(Unknown Source)  
    at java.util.Scanner.next(Unknown Source)  
    at search.search(search.java:121)  
    at main.main(main.java:38) 
```

以下是有问题的代码：

```
Scanner reader = new Scanner(path + client + "\\" + cat +"\\" + query + ".arch");  
while (reader.hasNext()){  
    String a = reader.next();  // line 121
    String b = reader.next();  
    String c = reader.next();  
    file = new File (path + client + "\\" + a +"\\" + b + ".arch");  
    print(file);  
} 
```

以下是该文件的内容：

> po ref refc （末尾有一个新行）

是什么赋予了？我以前使用过一个非常相似的系统，使用相同的文件，一切正常，我什至在下面的几行中使用了一个非常相似的系统。
顺便说一句，字符串 c 尚未实现，但应进一步向下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:39:26.457

您确定第 121 行不是下一行之一吗？

您检查`reader.hasNext()`以确保还有另一个条目，但随后您阅读了`a`, `b`,中的 3 个条目`c`。例如，如果只有一个，`b = reader.next()`将失败。

# database - 无法选择视图的字段

> ID：11602496
> 
> 赞同：0
> 
> 时间：2012-07-22T17:37:04.017
> 
> 标签：database, oracle, view, plsql

我得到了这个 Oracle 视图：

```
CREATE OR REPLACE VIEW "VALIDA_CADVEN_VIEW" ("SETOR_INI", "NOME_REP_INI", "RE_REP_INI", "TARGET_REP_INI", "SETOR_FIM", "NOME_REP_FIM",
                                                "RE_REP_FIM", "TARGET_REP_FIM", "Situacao", "Causa") AS 
SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'Não existe no arquivo atual' Situacao, 'Arquivo' Causa
FROM ZCADVEN_INI I 
LEFT JOIN (SELECT * FROM ZCADVEN_FIM WHERE RE_REP IS NOT NULL ) f
ON I.RE_REP = F.RE_REP
WHERE F.RE_REP IS NULL
AND I.RE_REP IS NOT NULL

UNION

SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'Não existe no arquivo anterior' Situacao, 'Arquivo' Causa
FROM ZCADVEN_FIM F 
LEFT JOIN (SELECT * FROM ZCADVEN_INI WHERE RE_REP IS NOT NULL ) I
ON I.RE_REP = F.RE_REP
WHERE I.RE_REP IS NULL
AND F.RE_REP IS NOT NULL

UNION

SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'Há divergências' Situacao, 'Target' Causa
FROM ZCADVEN_FIM F 
INNER JOIN (SELECT * FROM ZCADVEN_INI WHERE RE_REP IS NOT NULL ) I
ON I.RE_REP = F.RE_REP
WHERE I.TARGET_REP <> F.TARGET_REP

UNION

SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'Há divergências' SITUACAO, 'Nome' CAUSA
FROM ZCADVEN_FIM F 
INNER JOIN (SELECT * FROM ZCADVEN_INI WHERE RE_REP IS NOT NULL ) I
ON I.RE_REP = F.RE_REP
WHERE I.NOME_REP <> F.NOME_REP

UNION

SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'Há divergências' Situacao, 'Setor' Causa
FROM ZCADVEN_FIM F 
INNER JOIN (SELECT * FROM ZCADVEN_INI WHERE RE_REP IS NOT NULL ) I
ON I.RE_REP = F.RE_REP
WHERE I.SETOR <> F.SETOR

UNION

SELECT I.SETOR, I.NOME_REP, I.RE_REP, I.TARGET_REP,
        F.SETOR, F.NOME_REP, F.RE_REP, F.TARGET_REP, 'OK' Situacao, '-' Causa
FROM ZCADVEN_FIM F 
INNER JOIN ZCADVEN_INI  I
ON I.RE_REP = F.RE_REP
AND I.SETOR = F.SETOR
AND I.NOME_REP = F.NOME_REP
AND I.TARGET_REP = F.TARGET_REP 
```

现在，在某些时候我需要做这个简单的事情`SELECT`：

```
SELECT CAUSA FROM VALIDA_CADVEN_VIEW 
```

我得到这个错误：

```
ORA-00904: "CAUSA": "%s: invalid identifier" 
```

关于我做错了什么的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:50:40.353

由于您使用双引号中的“Causa”创建了视图，因此大小写很重要。你必须这样做：

```
SELECT "Causa" FROM valida_cadven_view; 
```

我建议您使用大写标识符重新创建视图。要么去掉双引号，要么将标识符设为大写：

```
CREATE OR REPLACE VIEW VALIDA_CADVEN_VIEW 
    (SETOR_INI, NOME_REP_INI, RE_REP_INI, TARGET_REP_INI, SETOR_FIM
   , NOME_REP_FIM, RE_REP_FIM, TARGET_REP_FIM, Situacao, Causa) AS 
```

或者

```
CREATE OR REPLACE VIEW "VALIDA_CADVEN_VIEW" 
   ("SETOR_INI", "NOME_REP_INI", "RE_REP_INI", "TARGET_REP_INI", "SETOR_FIM"
  , "NOME_REP_FIM", "RE_REP_FIM", "TARGET_REP_FIM", "SITUACAO", "CAUSA") AS 
```

除非您有真正令人信服的理由在标识符中使用小写字母，否则我建议您不要使用它们。如您所见，它们是造成混乱的主要来源。

# sql - 如何划分嵌套查询的两个结果

> ID：11602497
> 
> 赞同：1
> 
> 时间：2012-07-22T17:37:03.733
> 
> 标签：sql

如何划分嵌套查询的两个结果？我的意思是：我有一个存储过程

```
SELECT s.sheep_id,
       ( s.sheepThatHadBirth / ( s.sheepThatHadBirth + s1.sheepThatNotHadBirth ) ) * 100
FROM   (SELECT sheep_id,
               Count(*) AS sheepThatHadBirth
        FROM   FemaleSheep_Has_Wave
        WHERE  pregnencies_succeded = 1
        GROUP  BY sheep_id)AS s
       CROSS JOIN (SELECT sheep_id,
                          Count(*) AS sheepThatNotHadBirth
                   FROM   FemaleSheep_Has_Wave
                   WHERE  pregnencies_succeded = 0
                   GROUP  BY sheep_id)AS s1 
```

结果不正确，因为交叉加入我想请帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:40:47.907

`JOIN`你在这里根本不需要

```
SELECT sheep_id,
       100.0 * Sum(CASE
                     WHEN pregnencies_succeded = 1 THEN 1
                     ELSE 0
                   END) / Count(*) AS pregnencies_succeded_pct
FROM   FemaleSheep_Has_Wave
GROUP  BY sheep_id 
```

# search - 如何在 Emacs 中进行区分大小写的搜索？

> ID：11602505
> 
> 赞同：16
> 
> 时间：2012-07-22T17:38:14.513
> 
> 标签：search, emacs, case-sensitive

有捷径吗？`Ctrl`+`S`给出`I-search:`，这是不区分大小写的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-22T17:39:45.603

`M-c`运行搜索后按。

这将设置区分大小写的标志。

更一般地，您可以执行以下操作：`C-s` `C-h` `b`在搜索期间查看所有活动的键绑定，在`isearch-mode-map`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T20:42:00.877

除了`M-c`alinsoar 提到的，在搜索字符串中输入大写字母会导致搜索区分大小写。

# xcode4.3 - iOS5 应用程序无法在 iPad 1 和 iPad 2 上安装

> ID：11602507
> 
> 赞同：1
> 
> 时间：2012-07-22T17:38:28.100
> 
> 标签：xcode4.3, ios5.1

我在 xCode 4.3.1 上开发了具有以下构建设置的应用程序：

架构：标准 (armv7) - $(ARCHS_STANDARD_32_BIT) 基础 SDK：iOS5 仅构建活动架构：否 有效架构：armv6 armv7

在 info.plist 中，Required Device Capabilities 没有任何条目。

我正在尝试在 iPad1、iPad 2 和最新的 iPad (3) 上安装。已创建包含所有设备 ID 的配置文件。已使用上述构建设置创建了应用程序存档文件 (.ipa) 文件。

虽然应用程序成功安装在最新的 iPad (3) 上，但在其他两台 iPad（iPad 1 和 iPad 2）上，当按照定义的程序尝试通过 iTunes 同步时，我收到“安装失败”消息。

如果需要对构建设置进行任何更改，请提供帮助。我已经尝试将架构设置为 armv6 + armv7。

# javascript - 是否可以在Android中编写一个产生两个数组的函数

> ID：11602511
> 
> 赞同：0
> 
> 时间：2012-07-22T17:38:53.140
> 
> 标签：javascript, arrays, jquery-ui

使用`JQuery`自动完成功能，我有一个功能可以生成`Array`用户在框中输入的朋友。

这个数组被称为`selected_Id`。但是，我们的项目已经扩展，并且随着“朋友”的选择`(<--the one that produces the selected_Id array)`

我们想添加一个“敌人”功能。

是否可以重写该代码片段以生成 2 个单独的数组？如果我将它们分开，它将调用 getfriends 函数两次`(the getfriends function produces an array of available friends that loads into the jQuery ui that the user gets to choose from)`。

这是我所拥有的：

```
 $(function() {
    var available = new Array();
    available = getFriends();
    available = my_friends
    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function( request, response ) {
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                    available, extractLast( request.term ) ) );
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                //replaced value with label to continue showing the names selected  
                terms.push( ui.item.label);
                //ui.item.valuethis is where my 
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;

            }
        });
            $( "button" ).button();
        $( "button" ).click(function() {
        var selected_Text = $( "#tags" ).val();
        var selected_Friends = selected_Text.split(","); 
        //friend name put in the autocomplete box
        var friend_Name = "";
        //selected id of the person in the array 
                var testCount = 0; 
        //i < j --> run through interation once 
        for(var i = 0, j=selected_Friends.length; i<j; i++ )
        {
            friend_Name = selected_Friends[i];
            while (friend_Name[0] == " "){
                friend_Name = friend_Name.substring(1,friend_Name.length);
            }

            for (var k = 0, l = my_friends.length; k<l; k++)
            {

                if (friend_Name == my_friends[k]["label"])
                {
                    selected_Id.push(my_friends[k]["value"])

                    testCount++;

                } else {

                } 
            }
        }

        return false; 

    });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:46:22.633

您可以返回一个数组对象：

```
function someFunction() {
    return {
        enemies: [1, 2, 3],
        friends: [4, 5, 6]
    };
}
console.log(someFunction().enemies) //The array of [1,2,3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:46:48.927

通过阅读您的问题，我说...您可以通过将这两个数组封装在一个对象中并返回该对象来从一个函数返回两个数组。

```
function get2arrays() {
    var firstArray = new Array();
    var secondArray = new Array();

    ......

    return { First: firstArray, Second: secondArray };
} 
```

# http - 在 Rest 中发送数据的不同方式

> ID：11602512
> 
> 赞同：-1
> 
> 时间：2012-07-22T17:38:56.570
> 
> 标签：http, rest

在休息时，我们有不同的方式（如查询参数、路径参数和正文）从客户端向服务发送数据。

我们是否对每个 Http 方法（如 GET、PUT、POST、DELETE）都使用了所有这些方法？或者

是否有任何限制，如 GET/PUT 等应该只使用某些方式来发送数据？

如果是，请告诉我每个 Http 方法使用的组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:42:21.843

最好查看[标准](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)，因为这里列出的组合太多了。

但习惯上只在 GET 中使用路径和查询参数，在 POST 中主要使用主体和路径参数，在 PUT 中使用这三个参数。使用最简单的方法来完成这项工作；）

# sql-server - 为什么这个触发器会导致“Invalid Column Name 'CreatedDT'”？

> ID：11602519
> 
> 赞同：0
> 
> 时间：2012-07-22T17:39:46.133
> 
> 标签：sql-server, sql-server-2005

下面的 SQL 创建一个没有错误的触发器。当我在 SSMS 中添加记录时，触发器失败并显示以下消息：

> 消息 207，级别 16，状态 1，第 4 行
> 无效的列名称“CreatedDT”。

我究竟做错了什么 ？这是 SQL Server 2005 (v9.0.3080)。谢谢！

```
CREATE TRIGGER TRG_XXX_CreatedOn ON dbo.XXX
AFTER INSERT
AS
BEGIN
UPDATE dbo.XXX
SET dbo.XXX.CreatedDT = GETDATE()
WHERE dbo.XXX.Id IN (SELECT Id FROM Inserted)
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:55:48.313

对我来说很好。

我认为你的表不能有一个名为`CreatedDT`. 请仔细检查（包括名称的大小写，因为您的排序规则可能区分大小写）

除了有一个触发器来设置它，`INSERT`你不能只在那个列上设置一个默认约束吗？这将比通过触发器更有效。

**有效的测试脚本**

```
CREATE TABLE dbo.XXX
(
Id int,
CreatedDT DATETIME
)

GO

CREATE TRIGGER TRG_XXX_CreatedOn ON dbo.XXX
AFTER INSERT
AS
BEGIN
UPDATE dbo.XXX
SET dbo.XXX.CreatedDT = GETDATE()
WHERE dbo.XXX.Id IN (SELECT Id FROM Inserted)
END
GO

INSERT INTO dbo.XXX(Id) VALUES(1)

GO

SELECT * FROM dbo.XXX 
```

# database - 如何在 Exact Synergy Enterprise 中强制设置字段/属性？

> ID：11602522
> 
> 赞同：2
> 
> 时间：2012-07-22T17:40:03.873
> 
> 标签：database, exact-synergy-enterprise

我使用 Exact SDT 为我的存储库创建了一个自定义表，并将其上传到 Exact Synergy Enterprise。如何将业务组件字段/属性设置为强制？例如，当用户在页面中填写表单时，字段不应为空。SDT 有这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:06:04.187

你应该用它`Repository Explorer`来完成这个任务。

请转到、等`System`所在的主页菜单上的选项卡。如果您找不到它，请确保您使用页面右上角的找到启用它。转到选项卡并在该部分下查看使用箭头按钮添加菜单项。`Customers``Documents``Preferences``Menu``Modules`

现在转到`System`选项卡，处理到`Setup`选项卡并在该`Repository`部分下单击`Explorer`。转到您的`Repository`组，单击您的业务组件并选择您要设置为强制的属性。您将看到一个`Validation`部分和一个下拉列表。将其设置为`Mandatory`并单击保存。

现在回到你的`Repository group`并点击`XML`按钮。它会将所有更改保存到您的存储库 XML 文件。

# android - Android浏览器媒体播放器（stagefright？）显示媒体名称

> ID：11602523
> 
> 赞同：3
> 
> 时间：2012-07-22T17:40:36.103
> 
> 标签：android, android-mediaplayer, android-browser, content-disposition, stagefright

当 Android 浏览器打开它可以播放的媒体文件时，内置的（stagefright？）媒体播放器会打开以流式传输它。该媒体的标题会根据 URL 显示在播放器对话框中。

![Android 媒体播放器，标题突出显示](../Images/d80d81f7c0d506ccaeb17e58a182dd8d.png)

本例中的 URL 是`http://10.0.37.195/waug_mp3_128k`. 媒体播放器只是使用路径的最后一部分作为其标题。

**是否可以更改显示的标题？**

我试过一个`Content-Disposition`标题，但它没有效果：

```
Content-Disposition: inline; filename=Some Better Title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:07:43.017

最简洁的答案是不。我认为您不能更改显示的标题以显示来自服务器的其他内容。

我相信该播放器是默认 AOSP 音乐应用程序中的默认[AudioPreview](http://omapzoom.org/?p=platform/packages/apps/Music.git;a=blob;f=src/com/android/music/AudioPreview.java;hb=HEAD)活动。查看它的源代码，显然它会简单地使用 URI 的最后一个路径段来使用 HTTP 方案进行流（它只会查询媒体数据库以获取本地内容/文件）。

以下是相关的代码片段：

```
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    // ...

    if (scheme.equals(ContentResolver.SCHEME_CONTENT)) {

        // ...

    } else if (scheme.equals("file")) {

        // ...

    } else {
        // We can't get metadata from the file/stream itself yet, because
        // that API is hidden, so instead we display the URI being played
        if (mPlayer.isPrepared()) {
            setNames();
        }
    }
}

// ...

public void setNames() {
    if (TextUtils.isEmpty(mTextLine1.getText())) {
        mTextLine1.setText(mUri.getLastPathSegment());
    }
    if (TextUtils.isEmpty(mTextLine2.getText())) {
        mTextLine2.setVisibility(View.GONE);
    } else {
        mTextLine2.setVisibility(View.VISIBLE);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:41:02.550

尝试使用不带空格的文件名。我已经看到android在文件名中存在空格问题。它可能会有所帮助。

```
Content-Disposition: inline; filename=Some_Better_Title 
```

# iphone - 如何在每个 UIScrollView 的页面中下拉刷新（EGORefreshTableHeaderView）

> ID：11602525
> 
> 赞同：0
> 
> 时间：2012-07-22T17:40:50.407
> 
> 标签：iphone, objective-c, ios

我有一个 UIScrollView 包含三个 UIWebView 页面。

网页1，网页2，网页3

现在我想为每个网页使用 EGORefreshTableHeaderView 下拉刷新。说：

当滚动到webPage1，下拉webPage1，然后刷新webPage1，滚动到webPage2 下拉webPage2 刷新webPage2，滚动到webPage3 下拉webPage3 刷新webPage3

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:09:34.730

该库仅适用于`UITableView`s，而不适用于`UIWebViews`. 我强烈建议使用不同的机制来重新加载页面。

# opencv - windows7如何安装opencv2.4？

> ID：11602531
> 
> 赞同：2
> 
> 时间：2012-07-22T17:41:28.310
> 
> 标签：opencv, installation

[我正在尝试使用http://opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)的指南为 windows7 安装 Opencv2.4，我可以完成调试和发布部分。但作为最后一步，他们说我们应该更改计算机的系统路径，我不知道如何更改。（是的，我更改了调试文件夹的环境变量路径，但我不知道如何更改发布文件夹的路径。因为只有一个路径变量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:39:34.237

我找到了关于安装 Opencv 的好教程。我认为这对你也有用。这是[视频教程](http://www.youtube.com/watch?v=kZvjTTK9zTw&feature=related)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:54:18.137

就像他们在您链接的页面中所说的那样

"[Windows] 如果您将 OpenCV 构建为动态库 (DLL)，您可能需要将 \bin 添加到系统路径（**我的电脑--[右键单击]-->属性->高级->环境变量->路径**）让Windows找到“opencv_core240.dll”等）“

但在 Visual Studio 2010 中，您可以通过 Project -> properties 更改 ralease（和任何其他配置的）环境变量，然后从选择列表左上角将配置更改为“Release”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T13:48:47.657

一个简单的命令，将新路径添加到窗口“路径”，粗略的示例可能如下所示： `"set PATH=%PATH%;%OPENCV_DIR%\bin"` **或**

`"set PATH=%PATH%;%OPENCV_DIR%\debug"` （或者调试文件夹的路径可能是什么）

在命令提示符下键入`"Echo %path%"`以查看当前 Windows 路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T04:09:44.850

系统 PATH 变量决定了需要从中获取 DLL 的路径（在这种情况下）。将发布和调试路径都添加到变量中。`d`OpenCV 的所有调试库都以[example: ]结尾，`opencv_calib3d242d.dll`而不是发布库 [ `opencv_calib3d242.dll`]。因此，库之间永远不会发生冲突-它将完全取决于您链接的内容。

# java - Java 中带有一对强制大括号的单行循环

> ID：11602533
> 
> 赞同：23
> 
> 时间：2012-07-22T17:42:10.907
> 
> 标签：java, loops

以下代码段中的代码运行良好。`int`它计算使用类型为的静态字段创建的对象的数量`cnt`。

```
public class Main
{
    private static int cnt;

    public Main()
    {
        ++cnt;
    }

    public static void main(String[] args)
    {
        for (int a=0;a<10;a++)
        {
            Main main=new Main();
        }

        /*for (int a=0;a<10;a++)
            Main main=new Main();*/

        System.out.println("Number of objects created : "+cnt+"\n\n");
    }
} 
```

它显示以下输出。

```
Number of objects created : 10 
```

唯一的问题是，当我从上述循环中删除这对花括号时`for`（请参阅注释`for`循环），会发出编译时错误，指示

> 不是声明。

为什么在这种特殊情况下，即使循环只包含**一个语句**，一对大括号也是**强制性**的？

 *** * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-22T17:44:12.310

当您声明一个变量时（`main`在这种情况下）：

```
Main main = new Main(); 
```

它不算作陈述，即使它有副作用。为了它是一个正确的陈述，你应该这样做

```
new Main(); 
```

* * *

那么为什么是

```
... {
    Main main = new Main();
} 
```

允许吗？`{ ... }`是一个代码块，并且*确实*算作一个语句。在这种情况下，`main`变量*可以*在声明之后使用，但在右大括号之前。一些编译器忽略了它确实没有被使用的事实，其他编译器对此发出警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T17:56:46.407

使用新语句创建单行块是有意义的。没有意义的是将对刚刚创建的对象的引用保存在一行代码块中，因为您无法从 for 范围之外访问变量 main 。

也许（只是我的猜测）编译器会强制您显式键入括号，因为在这种情况下持有引用没有意义，希望您能意识到无用的引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T19:05:45.403

[`for`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14)定义如下。

> ```
> BasicForStatement:
>     for ( ForInitopt ; Expressionopt ; ForUpdateopt ) Statement
> 
> ForStatementNoShortIf:
>     for ( ForInitopt ; Expressionopt ; ForUpdateopt ) StatementNoShortIf
> 
> ForInit:
>     StatementExpressionList
>     LocalVariableDeclaration
> 
> ForUpdate:
>     StatementExpressionList
> 
> StatementExpressionList:
>     StatementExpression
>     StatementExpressionList , StatementExpression 
> ```

[块](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.2)定义如下。

> 块是一系列语句、局部类声明和大括号内的局部变量声明语句。
> 
> ```
> Block:
> { BlockStatementsopt }
> 
> BlockStatements:
>     BlockStatement
>     BlockStatements BlockStatement
> 
> BlockStatement:
>     LocalVariableDeclarationStatement
>     ClassDeclaration
>     Statement 
> ```

[语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5)定义如下。

> ```
> Statement:
>     StatementWithoutTrailingSubstatement
>     LabeledStatement
>     IfThenStatement
>     IfThenElseStatement
>     WhileStatement
>     ForStatement
> 
> StatementWithoutTrailingSubstatement:
>     Block
>     EmptyStatement
>     ExpressionStatement
>     AssertStatement
>     SwitchStatement
>     DoStatement
>     BreakStatement
>     ContinueStatement
>     ReturnStatement
>     SynchronizedStatement
>     ThrowStatement
>     TryStatement
> 
> StatementNoShortIf:
>     StatementWithoutTrailingSubstatement
>     LabeledStatementNoShortIf
>     IfThenElseStatementNoShortIf
>     WhileStatementNoShortIf
>     ForStatementNoShortIf 
> ```

根据规范，`LocalVariableDeclarationStatement`（查看块部分）如果未在块中声明，则无效。因此，除非您使用一对大括号，否则以下循环会报告您在问题中提到`for`的编译时错误“*不是语句”。*

```
for (int a=0;a<10;a++)
        Main main=new Main(); 
```**

# python - 字符串不会在 Django 中使用 Python 2.7 中可用的格式函数进行翻译

> ID：11602536
> 
> 赞同：19
> 
> 时间：2012-07-22T17:43:11.567
> 
> 标签：python, django, translation

在 Python 2.7 中使用新的和推荐的格式化字符串的方法是否会`format`导致 Django 中的未翻译字符串？

字符串在`.po`文件中，已翻译，但不会在网站上翻译。例如：

```
from django.utils.translation import ugettext as _

website_name = "Stackoverflow"
title = _(u"{sitename} is a good website".format(sitename=website_name)) 
```

翻译字符串后的`.po`文件如下所示：

```
#: path/to/file.py:4
msgid "{sitename} is a good website"
msgstr "{sitename} ist eine gute Website" 
```

运行`django-admin.py compilemessages`并重新启动网络服务器后，在处理过的 HTML 页面上它仍然是英文的，而所有其他字符串都在被翻译。此外，虽然`format`未翻译所有使用的字符串，但使用`%`运算符格式化的字符串会按预期进行翻译。这也不是 gettext/ugettext 问题，因为这两个函数的问题是相同的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T18:56:34.350

`compilemessages`将字符串视为“{sitename} 是一个好网站”，但当应用程序运行时，该字符串实际上是例如“MySite 是一个好网站”，当然没有翻译。您必须先翻译裸字符串，*然后*才能对其执行模板操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-02T13:12:47.807

以下应该有效：

```
_('Foo %(x)s') % {'x': "bar"} 
```

`s`是字符串，`d`是整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:14:57.427

我遇到了同样的问题，所以我先翻译了文本，然后添加了动态内容，例如

```
title = _(u"is a good website")
title = " ".join([website_name, title]) 
```

必须有更好的方法来做到这一点

# apache - 从子文件夹运行网站

> ID：11602537
> 
> 赞同：0
> 
> 时间：2012-07-22T17:43:15.510
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我有几个使用共享主机托管的网站。“主域”托管在`/public_html`目录中。我想做的是从`/public_html/domain.com`. 这是我的`/public_html/.htaccess`文件：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteCond %{REQUEST_URI} !^/domain.com/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /domain.com/$1

RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteRule ^(/)?$ domain.com/index.html [L] 
```

通常这很好用，除非我尝试访问一个目录，比如说`http://www.domain.com/test`，我被重定向到`http://www.domain.com/domain.com/test`. 为了澄清，不应该有重定向，服务器应该简单地从指定的子目录为站点提供服务。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:45:21.153

使用[RewriteBase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

```
RewriteEngine on
RewriteBase /domain.com/
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteCond %{REQUEST_URI} !^/domain.com/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /domain.com/$1

RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteRule ^(/)?$ domain.com/index.html [L] 
```

# ember.js - Ember.js 中的“controller.controllers”是什么？

> ID：11602541
> 
> 赞同：2
> 
> 时间：2012-07-22T17:43:37.350
> 
> 标签：ember.js

Ember.js 中的“controller.controllers”是什么？

看起来

```
this.getPath("controller.controllers") 
```

在视图中返回 App.router。这非常有用，但我想了解我在做什么:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:07:23.607

当调用`initialize`你的`Ember.Application`时，所有控制器都被实例化并设置在路由器上。控制器反过来也会注入一些属性，如[在此处](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L216-232)实现的那样。如您所见，该`controllers`属性是对路由器的引用。

```
Ember.Application.registerInjection({
  name: 'controllers',
  injection: function(app, router, property) {
    if (!/^[A-Z].*Controller$/.test(property)) { return; }

    var name = property.charAt(0).toLowerCase() + property.substr(1),
        controller = app[property].create();

    router.set(name, controller);

    controller.setProperties({
      target: router,
      controllers: router,
      namespace: app
    });
  }
}); 
```

# vb.net - 向gridview添加行时索引超出范围

> ID：11602542
> 
> 赞同：1
> 
> 时间：2012-07-22T17:43:45.413
> 
> 标签：vb.net

我在尝试将空行添加到网格视图时遇到索引超出范围异常。这是后面的代码。还有更多列，我只是将它们删除以缩短代码。

```
 Private Sub AddNewGridRow()
        Dim rowIndex As Integer = 0

        If ViewState("CurrentData") IsNot Nothing Then
            Dim dtCurrentData As DataTable = DirectCast(ViewState("CurrentData"), DataTable)
            Dim drCurrentRow As DataRow = Nothing
            If dtCurrentData.Rows.Count > 0 Then
                For i As Integer = 1 To dtCurrentData.Rows.Count
                    Dim lblVoucher As Label = DirectCast(GridView1.Rows(rowIndex).Cells(1).FindControl("lblVoucher"), Label)

                    drCurrentRow = dtCurrentData.NewRow()
                    drCurrentRow("RecID") = i + 1

                    dtCurrentData.Rows(i - 1)("RecID") = lblVoucher
                    rowIndex += 1
                Next
                dtCurrentData.Rows.Add(drCurrentRow)
                ViewState("CurrentData") = dtCurrentData
                GridView1.DataBind()
            End If
        Else
            Response.Write("ViewState is null")
        End If
        SetPreviousData()
    End Sub
    Private Sub SetPreviousData()
        Dim rowIndex As Integer = 0

        If ViewState("CurrentData") IsNot Nothing Then
            Dim dt As DataTable = DirectCast(ViewState("CurrentData"), DataTable)
            If dt.Rows.Count > 0 Then
                For i As Integer = 0 To dt.Rows.Count - 1
    'Out of range exception happens here when trying to fill the previous data.
                    Dim lblVoucher As Label = DirectCast(GridView1.Rows(rowIndex).Cells(1).FindControl("lblVoucher"), Label)

                    lblVoucher.Text = dt.Rows(i)("Voucher").ToString()

                    rowIndex += 1
                Next
            End If
        End If
    End Sub 
```

这是该列的 aspx。

```
 <asp:TemplateField HeaderText="Voucher" SortExpression="RecID">
        <HeaderStyle HorizontalAlign="Center" Width="100px" />
        <ItemStyle HorizontalAlign="Center" />
            <ItemTemplate>
                <asp:Label ID="lblVoucher" runat="server" Text='<%#Eval("RecID") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:56:10.727

您需要将代码放入调试中并查看语句的哪个部分导致了异常。

你有两个可能的问题：

1.  您没有足够的行来满足 rowIndex 要求。

2.  您没有足够的单元格来满足单元格 (1) 的要求。

我会尝试重写问题行如下：

```
 Dim lblVoucher As Label = Nothing

    If GridView1.Rows.Count < rowIndex Then
        Dim oRow As DataGridViewRow

        oRow = GridView1.Rows(rowIndex)
        If oRow.Cells.Count > 1 Then
            lblVoucher = TryCast(oRow.Cells(1).FindControl("lblVoucher"), Label)
        Else
            ' Do something here when you don't have cells
        End If
    Else
        ' Do something here when you don't have a row
    End If 
```

当您没有您期望的内容时，您可以在 else 子句中设置断点或抛出异常或任何适合您的应用程序的内容。

# android - 凸起的碎片外观

> ID：11602546
> 
> 赞同：2
> 
> 时间：2012-07-22T17:44:30.910
> 
> 标签：android, android-fragments

不太清楚如何解释这一点，但我怎样才能让 2 个片段看起来像这张图片中的一个高于另一个

![在此处输入图像描述](../Images/92b923dc2acc5d4221aa4d4b62fd0c19.png)

如您所见，`listview`看起来它的右边缘低于右侧的片段。如何实现？我试图让我的布局看起来不那么一维/扁平。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T18:12:26.880

虽然弗兰克的回答很好，但您实际上可以使用[Android 的内部`gradient`XML 资源](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)在没有图形的情况下执行此操作。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:angle="180"
        android:centerX="0.1"
        android:startColor="#555"
        android:centerColor="#aaa"
        android:endColor="#aaa"
        android:type="linear" />
</shape> 
```

*   `android:angle`说从右到左水平地做
*   `android:centerX`表示要移动渐变的“中心”，使其距离渐变开始的 10%。
*   `android:startColor`是要在右侧显示的颜色。
*   `android:centerColor`是显示在中心的颜色。
*   `android:endColor`是最后显示的颜色。这与`centerColor`我们希望将其保持为除阴影外的纯色相同。
*   `android:type`显然，使它成为线性的。

我只是估计，你会想玩一些颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:59:21.727

我相信这实际上是用一个简单的资源完成的。左侧列表视图的右侧附有一个简单的阴影图形。对于未选择的每一行，该图形都会重复（如您所见，它已被行上的箭头替换）您只需选择一种颜色并使用 Photoshop 中的渐变工具（或 gimp 或其他）。将其淡入几个像素并将其用作您的边缘。

# c# - 使用 Entity Framework 3.5 插入行

> ID：11602547
> 
> 赞同：-1
> 
> 时间：2012-07-22T17:44:49.370
> 
> 标签：c#, asp.net, entity-framework

我的数据库中有两个表

1.  **状态**( `stateid, statename`)

2.  **城市**( `cityid, stateid, cityname`)

我正在使用实体框架来访问我的数据库。

我想使用实体框架将数据插入到`City`表中并引用表`State`

为此，我编写了以下代码

```
MyModel mdl = new MyModel();

City ct = new City();
ct.cityname = "Dallas";
ct.State = mdl.State.Where(u => u.stateid == 1);

mdl.AddToCity(ct);
mdl.SaveChanges(); 
```

表中有数据`State`。

但我在收到以下错误`mdl.AddToCity(ct)`

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:13:14.793

请注意，该`Where`语句将返回一个`IEnumerable`. 你追求的是`. FirstOrDefault(u=>u.stateid==1)`（或`SingleOrDefault`）。我不知道这是否会解决您的问题。
你有没有给`City`班级一个`State`属性，而不仅仅是一个`stateid`？

# php - Paypal api 计划任务 php

> ID：11602549
> 
> 赞同：0
> 
> 时间：2012-07-22T17:44:57.373
> 
> 标签：php, paypal

我需要在我正在工作的网站上设置贝宝支付 API。我有收款人和付款人的电子邮件 ID，但没有任何 API 签名或收款人的用户名。基本上，我网站上的每个用户都必须根据他们选择的付款方式付款。例如，如果我网站上的用户选择他想在一周的每个星期二获得报酬。那么我如何在没有任何用户操作的情况下实现这一点？因为我必须在每个星期二向用户付款。这就像一个预定的任务。但是我不知道paypal如何处理它。可能是贝宝经常性 api 可能有用。但我没有得到正确的想法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:26:15.400

请参考此链接，希望 PayPal 授权和捕获方法适合您

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture)

# asp.net - 包含时间的 DateTime 字段验证失败

> ID：11602550
> 
> 赞同：1
> 
> 时间：2012-07-22T17:45:03.523
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我的模型有一个 DateTime 字段：

```
 [UIHint("DateTimeHHMM")]
    public DateTime TimeBooked { get; set; } 
```

它使用 EditorTemplate 呈现：

```
@model Nullable<System.DateTime> 

@if ( Model.HasValue ) { 
@Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy HH:mm:ss}" , Model.Value ) , new  {     @class = "span3 disabled" } ) 
} 
else { 
@Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy HH:mm:ss}" , DateTime.Now ) , new { @class = "span3 disabled" } ) 
} 
```

在我看来，语法是：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.TimeBooked)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.TimeBooked)
        @Html.ValidationMessageFor(model => model.TimeBooked)
    </div> 
```

在视图中创建记录时，当我单击保存时，在文本框中显示以下内容：

```
22/07/2012 18:33:29 
```

*   我收到验证消息：

> TimeBooked 字段必须是日期。

我的模型或编辑器模板有问题吗？

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:22:01.527

您应该确保应用程序以正确的语言 (CultureInfo) 运行，尤其是涉及日期（和数字）格式时。

您可以在 web.config 文件中执行此操作。

```
 <system.web>
    <globalization culture="en-GB" uiCulture="en-GB"/> 
```

您应该将其设置为符合您需求的任何地区/国家，这样 .NET 将正确处理解析日期和数字。

# php - URL 重写 - 路由器脚本与 .htaccess

> ID：11602551
> 
> 赞同：1
> 
> 时间：2012-07-22T17:45:05.027
> 
> 标签：php, .htaccess

就最佳性能而言，重写 URL 的最佳方法是什么？我知道的两种主要方法是：

1.  `.htaccess`重写，意味着所有请求和重写都由`.htaccess`脚本处理

2.  路由器脚本 - 这用于`.htaccess`将每个请求重定向到`index.php`. 然后一些代码`index.php`重写请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:55:55.667

取决于您是否要使用[MVC 架构](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。在这两种情况下，您都在使用重写引擎，但如果您不想使用 MVC/路由脚本，或者如果您有静态 HTML 内容，则最好选择选项 1。如果您有静态 HTML内容，按原样提供内容将比执行 php.ini 更快。

# java - Java - 基于时间步长同步多个线程

> ID：11602558
> 
> 赞同：5
> 
> 时间：2012-07-22T17:45:40.530
> 
> 标签：java, multithreading

假设我有一个保存 SlaveThread 对象列表的 Master。在每个时间步上，我希望 Master 并行运行 SlaveThreads，但是，在时间步长结束时，我希望 SlaveThreads 在前进之前相互等待对方完成当前时间步长。另外，我不想在每个时间步重新实例化 SlaveThreads。我有 2 种可能的解决方案，但我不知道如何使它们中的任何一个起作用：

1) SlaveThread 中的run() 方法处于while(true) 循环中。在 SlaveThread 中执行单个循环后，我会让 SlaveThread 通知 Master（我不知道该怎么做），而 Master 会执行类似的操作

```
try{
    for (int i = 0; i < numSlaveThreads; i++) {
        while (!slaveThreads[i].getCompletedThisIter()) {
        wait()
        }
      }
  System.out.println("Joined"); 
```

}

在进入下一个时间步之前。我该怎么做？我怎样才能让一个 SlaveThread 只通知主人？

2) Slave 中的 run() 不在 while(true) 循环中，那么我必须在每次迭代时对其调用 start()。但是此时Slave的线程状态会被终止。如何在不重新实例化的情况下再次调用 start() ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:58:52.617

这正是障碍的用途，您可以使用[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)或[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)来实现这一点。这些是用于**延迟**线程进度直到达到所需状态的同步器，在您的情况下，线程已经完成了它们的计算。

这取决于您要如何实现的细节：

> 锁存器用于等待事件；屏障用于等待其他线程。

对于`CyclicBarrier`将以以下方式完成的操作：

```
// whereby count is the number of your slave threads
this.barrier = new CyclicBarrier(count); 
```

然后在`Runnable`你的奴隶的定义中，你将在计算结束时插入：`barrier.await()`

```
public class Slaves implements Runnable {

   // ...

   @Override
   public void run() {

      while(condition) {

         // computation
         // ...

         try {
            // do not proceed, until all [count] threads
            // have reached this position
            barrier.await();
         } catch (InterruptedException ex) {
            return;
         } catch (BrokenBarrierException ex) {
            return;
         }
      }
   }
} 
```

在所有线程完成计算之前，您的从属线程将不会继续。这样你就不需要实现另一个主线程之间的信号。

但是，如果您有一些代码要在所有线程到达该位置后执行（主信号），您可以向构造函数传递一个附加值`Runnable`，该`CyclicBarrier`构造函数将在所有线程到达屏障后执行。

```
this.barrier = new CyclicBarrier(count,
   new Runnable() {
      @Override
      public void run() {
         // signal your master thread, update values, etc.
      }
    }
 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T17:59:19.683

您可以使用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)的组合来管理您的线程（即，您可以回收您的线程而不必在每个周期创建新线程）和一个[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)，它将同步所有从属。

请参阅下面的一个简单示例，其中主设备循环启动从设备，确保它们在重新启动之前都已完成。奴隶们有点懒，只是睡了一段时间（不是随机的）：

```
public class Test {

    private static final ExecutorService executor = Executors.newFixedThreadPool(5);
    private static final CyclicBarrier barrier = new CyclicBarrier(5); //4 slaves + 1 master

    public static void main(String[] args) throws InterruptedException {
        Runnable master = new Runnable() {
            @Override
            public void run() {
                try {
                    while (true) {
                        System.out.println("Starting slaves");
                        for (int i = 100; i < 500; i += 100) {
                            executor.submit(getRunnable(i));
                        }
                        barrier.await();
                        System.out.println("All slaves done");
                    }
                } catch (InterruptedException | BrokenBarrierException ex) {
                    System.out.println("Bye Bye");
                }
            }
        };

        executor.submit(master);
        Thread.sleep(2000);
        executor.shutdownNow();

    }

    public static Runnable getRunnable(final int sleepTime) {
        return new Runnable() {
            @Override
            public void run() {
                try {
                    System.out.println("Entering thread " + Thread.currentThread() + " for " + sleepTime + " ms.");
                    Thread.sleep(sleepTime);
                    System.out.println("Exiting thread " + Thread.currentThread());
                    barrier.await();
                } catch (BrokenBarrierException | InterruptedException ex) {
                }
            }
        };

    }
} 
```

# php - MYSQL 检索最后一个查询是更新还是插入

> ID：11602567
> 
> 赞同：2
> 
> 时间：2012-07-22T17:46:47.070
> 
> 标签：php, mysql, insert, rating

我正在开发一个 PHP 和 MYSQL 评级系统，投票赞成和反对。

我有一个名为的数据库`votes`，其中包含注册用户所做的所有投票（1 表示赞成票，-1 表示反对票）对于每个可以评级的帖子，都有一个所有赞成票、反对票和净票的回顾（赞成票减去反对票）。

当有人对帖子投票时，会有一个`INSERT ... ON DUPLICATE KEY UPDATE`查询插入或更新包含所有投票的表。然后我用新的赞成票数、反对票数和新的净票数更新帖子行。

我的问题是我需要知道第一个查询是插入还是更新，因为如果是更新，我将需要减去旧投票并添加新投票，但 id 这只是我不需要的插入减去任何东西并增加投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:06:29.553

我建议您不要过早地优化投票计算，并且在每次对某个帖子进行新投票后，您只需重新计算该帖子的所有投票，无论是否`INSERT`触发`UPDATE`了重新计算。然后将结果存储到数据库。

此外，它更简单地丢弃甚至总票数缓存并在需要时即时计算这些。

只有当您遇到性能问题时，您才应该衡量您的费用并检查瓶颈是什么。奇怪的是，投票计算不应该是您的应用程序中首先要优化的事情。

让您的生活更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:30:48.033

假设你有一个`PRIMARY KEY`在桌子上，你可以这样做：

```
SET @last_insert_id := IFNULL(LAST_INSERT_ID(), 0);

INSERT ... ON DUPLICATE KEY UPDATE ...

SELECT IFNULL(LAST_INSERT_ID(), 0) <> @last_insert_id AS inserted; 
```

如果`inserted`为 TRUE，则插入记录，如果为 FALSE，则更新现有记录。

当然，此代码假定第一个`LAST_INSERT_ID()`不是从插入到另一个表中设置的。

# java - 数组的链表数组

> ID：11602570
> 
> 赞同：0
> 
> 时间：2012-07-22T17:47:03.360
> 
> 标签：java, collections

我有`Text File`以下几行

```
1) 2,3 3,2 4,5

2) 1,3 4,2 6,13

3) 1,2 4,2 5,5

4) 1,5 2,2 3,2 5,4 7,3 6,6 
```

文本文件的行数是已知的（即 4）。对数字（例如：2,3）对于每一行都是可变的。而对数字对应于属性。

所以，为了表示这些值，我计划有一个数组的链表数组。

我选择这个的原因是：

1 `Since i know the number of lines is 4\. So it will be an array`：。

2 `Each line has a variable number of pairs. So, i will have a linked list representation for it`：。

3 `The pair values each represents a property so i will have an array size two for it. One index for each property`：。

考虑到以上三点，我将有一个`Array(size 4) of LinkedList of an Array(size 2)`.

以下是我在 Java 中的表达方式（我是 Java 新手，我不得不承认我还不知道它是否正确）。

```
static ArrayList<Integer[]>[] graph = (ArrayList<Integer[]>[]) new ArrayList[200]; 
```

现在，考虑到我上面的图形变量已经正确初始化，有人可以告诉我如何用数据填充它。如果您对初始化有其他建议，或者我在概念上如何在 3 点上解决问题，请分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:50:20.810

如果我是你，我会保持简单。只需使用类似的东西

```
List<List<List<Integer>>> 
```

甚至更好的是，为内部类型创建自己的类。

```
List<PairList> 
```

或类似的东西，其中`PairList`扩展（或包含）一个`ArrayList<Pair>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:56:49.343

使用**集合框架。**

`ArrayList<ArrayList<ArrayList<Integer>>>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:02:50.783

尽管您的思维过程是可以理解的，但我认为您做出了错误的决定（可能是由于您缺乏 Java 经验造成的） - 以下是我建议的答案：

1.  你知道行数是一个已知常数，但是在Java中直接使用数组几乎没有用，`ArrayList`而是使用。它是`List`使用数组实现的（元组）。
2.  您关于将变量对建模为列表的想法似乎非常好，我同意这一点。但是，您不应该将 a`LinkedList`用于此目的，因为它通常比 a 慢`ArrayList`。两种实现都满足`List`接口，因此您可以互换使用它们。
3.  您可以将这些对本身建模为两个元素数组，但为了使语义更易于理解，您应该为这两个部分发明一个文档化的数据类。

现在，让我们假设容器类型看起来像这样（你应该给变量和类本身提供更好的名称）：

```
class Pair {
  public final int a;
  public final int b;

  Pair(int a, int b){
    this.a = a;
    this.b = b;
  }
} 
```

然后，您可以使用以下命令创建数据结构：

```
final int lines = 42; // the number of lines
List<List<Pair>> data = new ArrayList<List<Pair>>(lines); 
```

并使用数据填充它

```
for(String line : input){
  final List<Pair> lineList = new ArrayList<Pair>();
  lineList.addAll(extractPairsFromLine(line));
  data.add(lineList);
} 
```

哪里`extractPairsFromLine`是采用 a`String`并返回 a的方法`List<Pair>`。

# c++ - SDL_PeepEvents 不会处理窗口关闭

> ID：11602571
> 
> 赞同：3
> 
> 时间：2012-07-22T17:47:06.317
> 
> 标签：c++, sdl

然而，我在`SDL_PeepEvents( sdlevent, EVENT_BUFFER_SIZE, SDL_GETEVENT, SDL_FIRSTEVENT, SDL_SYSWMEVENT );`运行几秒钟后调用并使用窗口（调整大小/移动/最小化）它不会在单击 x 以关闭窗口时接收事件。

```
void Window::pollWindowEvents(  )
{
    const int EVENT_BUFFER_SIZE = 16;
    SDL_Event sdlevent[ EVENT_BUFFER_SIZE ];    //The SDL event that we will poll to get events.

    SDL_PumpEvents(  );
    int numEvents = SDL_PeepEvents( sdlevent, EVENT_BUFFER_SIZE, SDL_GETEVENT, SDL_FIRSTEVENT, SDL_SYSWMEVENT );

    std::cout << numEvents << std::endl;

    for ( int i = 0; i < numEvents; ++i )
    {
        switch ( sdlevent[ i ].type )
        {
        case SDL_QUIT:
            closed = true;
            std::cout << sdlevent[ i ].type << std::endl;
            break;
        default:
            std::cout << sdlevent[ i ].type << std::endl;
            break;
        };
    }
} 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:02:06.280

调用时，`SDL_PeepEvents()`我只处理队列中选定的事件范围，其余事件未处理。这导致事件队列被这些未处理的事件饱和，结果阻止了我想要处理的事件被处理。这很容易通过处理事件队列中的所有事件来解决。

# mysql - MySQL插入唯一来自联合

> ID：11602573
> 
> 赞同：2
> 
> 时间：2012-07-22T17:47:21.277
> 
> 标签：mysql

我以前没有过多地使用数据库，但我了解一些基础知识。现在，我有两个表，我们将调用表 1 和表 2。我正在尝试创建一个触发器，以便当我将数据插入表 1 时，它会触发触发器以获取 col1 的所有不同值表 1，我想用它来插入表 2。随着更多数据被添加到表 1 中，毫无疑问会出现重复。如果发生重复，我不希望将重复插入表 2。所以，我想我可能会使用联合来提取唯一值并将它们插入表 2，但是在联合之后我不完全确定是什么去做。我是否为这样的想法而疯狂，并且有办法更好地做到这一点？

```
DELIMITER // 
CREATE TRIGGER testdb 
AFTER INSERT ON testdb.table1
FOR EACH ROW
BEGIN    
    SELECT col1 FROM table1
    UNION
    SELECT col1 FROM table2
    (I imagine the insert statement would go here)
END //
DELIMITER ; 
```

简而言之，数据进入表 1，在插入时触发启动以从表 1 Col 1 和表 2 Col 1 中获取唯一值，以尝试获取所有唯一值，然后我想将唯一值插入表 2 Col 1 ，但其中一些唯一值可能已经存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:51:06.320

假设`table2`定义为

```
CREATE TABLE table2 (col1 ..., PRIMARY KEY(col1)); 
```

你可以这样做：

```
DELIMITER // 
CREATE TRIGGER testdb 
AFTER INSERT ON testdb.table1
FOR EACH ROW
BEGIN    
    INSERT IGNORE INTO table2 SET col1 = NEW.col1;
END //
DELIMITER ; 
```

# matlab - 词袋训练和测试opencv、matlab

> ID：11602577
> 
> 赞同：20
> 
> 时间：2012-07-22T17:47:40.503
> 
> 标签：matlab, opencv, image-processing, matlab-cvst, object-recognition

我正在通过使用 SIFT 功能在 opencv 中实现 Bag Of Words，以便对特定数据集进行分类。到目前为止，我一直在对描述符进行聚类并生成词汇表。据我所知，我必须训练 SVM ......但我有一些问题我真的很困惑。主要问题是实现背后的概念，这些是我的问题：

1-当我提取特征然后创建词汇表时，我是否应该提取所有对象（比如说 5 个对象）的特征并将它们放在一个文件中，所以我将它们全部放在一个词汇表文件中，其中包含所有字？以及稍后在进行分类时如何将它们分开？

2-如何实现SVM？我知道 openCV 中使用的函数，但如何？

3- 我可以在 MATLAB 中完成工作，我的意思是 SVM 培训的实施，但是有没有可用的代码可以指导我完成工作？我在[这里](http://www.robots.ox.ac.uk/~vgg/share/practical-image-classification.htm)看到了 Andrea Vedaldi 使用的代码，但他每次只使用一个类，另一个问题是他没有展示如何创建他在练习中使用的 .mat 文件。我能找到的所有其他实现，它们都没有使用 SVM。那么，您也可以在这一点上进行指导吗！

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T02:16:14.283

## 当地特色

使用 SIFT 时，您通常希望提取局部特征。那是什么意思？您有您的图像，并且从该图像中您将找到要从中提取局部特征向量的点。局部特征向量只是一个由数值组成的向量，描述了从中提取它的图像区域的视觉信息。尽管可以从图像 A 中提取的局部特征向量的数量不必与可以从图像 B 中提取的特征向量的数量相同，但局部特征向量的数量分量（即其维数）始终是相同。

现在，如果您想使用本地特征向量对图像进行分类，您就会遇到问题。在传统的图像分类中，每张图像都由一个全局特征向量来描述，在机器学习的上下文中，它可以被看作是一组数值属性。但是，当您提取一组局部特征向量时，您没有图像分类所需的每个图像的全局表示。可以用来解决这个问题的一种技术是词袋，也称为视觉词袋（BoW）。

## 视觉词袋

这是（非常）简化的 BoW 算法：

1.  从您的图像集中提取 SIFT 局部特征向量；

2.  将所有这些局部特征向量放入一个集合中。此时，您甚至不需要存储每个局部特征向量是从哪个图像中提取的；

3.  在一组局部特征向量上应用聚类算法（例如 k-means），以便找到质心坐标并为每个质心分配一个 id。这组质心将成为您的词汇；

4.  全局特征向量将是一个直方图，它计算每个质心在每个图像中出现的次数。要计算直方图，请为每个局部特征向量找到最近的质心。

## 图像分类

在这里，我假设您的问题如下：

> 您有一组标记图像和一组未标记图像作为输入，您希望根据其视觉外观为其分配标签。假设您的问题是对风景摄影进行分类。例如，您的图像标签可以是“山”、“海滩”或“森林”。

从每幅图像（即它的视觉词包）中提取的全局特征向量可以看作是一组数值属性。这组数字属性代表了每张图像的视觉特征和相应的图像标签，可以用来训练分类器。例如，您可以使用诸如[Weka](http://www.cs.waikato.ac.nz/ml/weka/)之类的数据挖掘软件，它具有 SVM 的实现，称为 SMO，来解决您的问题。

基本上，您只需要根据[ARFF 文件格式](http://www.cs.waikato.ac.nz/ml/weka/arff.html)格式化全局特征向量和相应的图像标签，这基本上是一个全局特征向量的 CSV，后跟图像标签。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T04:42:04.093

这是一篇非常好的文章，介绍了使用 OpenCV v2.2 进行分类的词袋模型。 [http://app-solut.com/blog/2011/07/the-bag-of-words-model-in-opencv-2-2/](http://app-solut.com/blog/2011/07/the-bag-of-words-model-in-opencv-2-2/)

关于使用 Normal Bayes Classifier 进行图像分类的后续文章。 [http://app-solut.com/blog/2011/07/using-the-normal-bayes-classifier-for-image-categorization-in-opencv/](http://app-solut.com/blog/2011/07/using-the-normal-bayes-classifier-for-image-categorization-in-opencv/)

还包括一个关于 Caltech-256 数据集的约 200 行代码演示。[http://code.google.com/p/open-cv-bow-demo/downloads/detail?name=bowdemo.tar.gz&can=2&q=](http://code.google.com/p/open-cv-bow-demo/downloads/detail?name=bowdemo.tar.gz&can=2&q=)

以下是对图像分类过程的直观感受： [http ://www.robots.ox.ac.uk/~vgg/share/practical-image-classification.htm](http://www.robots.ox.ac.uk/~vgg/share/practical-image-classification.htm)

真的帮我澄清了很多问题。我希望它可以帮助某人。:)

# c++ - C++：模板类特化和类型特征

> ID：11602578
> 
> 赞同：2
> 
> 时间：2012-07-22T17:47:42.907
> 
> 标签：c++, class, templates, specialization

我的问题如下

```
template<class T> MyClass
{
    MyClass(/* Lots of parameters with no problem */, const T& min = 0, const T& max = std::numeric_limits<T>::max());
    set(/* Lots of parameters with no problem */, const T& min = 0, const T& max = std::numeric_limits<T>::max());
    /* Lots of function with no problem */
} 
```

`std::string`我希望我的模板类在不重新实现所有功能的情况下兼容。对于我想要的 std::string`min = ""`和`max = ""`. 目前，它崩溃为 0 例如不能转换为字符串。怎么做 ？（如果我只能专门化构造函数和主设置器，那就太好了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:20:26.427

我猜想创建包装器？：

```
template<typename T> struct ttraits
{
static T max(){
return std::numeric_limits<T>::max();
}
static T min(){
return std::numeric_limits<T>::min();
}
};

template<> struct ttraits<std::string>
{
static std::string max(){
return ""; //or whatever max is for you
}
static std::string min(){
return "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:57:31.447

您始终可以选择正确的重载来处理特殊情况，`enable_if`或者您可以更好地考虑如何使您的代码更健壮。使用`0`初始化模板参数不是一个好主意，虽然`T()`是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:07:20.503

制作自己的`numeric_limits`重定向到标准的并且专门用于字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T18:23:08.057

```
set(T & const p_Arg = Initializer<T>()) 
```

where`Initializer`专门用于所有支持的类型。

# python - 多处理和套接字

> ID：11602579
> 
> 赞同：1
> 
> 时间：2012-07-22T17:47:54.220
> 
> 标签：python, sockets, multiprocessing

我正在尝试使用多处理和套接字来允许多个连接到同一个套接字。但是，我真的很难过，因为我在这个领域没有太多经验。

我的代码不起作用

```
def server(port, listen=10):
    connected = []
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind(('', port))
    s.listen(listen)

    while True:

        conn, address = s.accept()
        p = multiprocessing.Process(target=server, args=(port, listen))
        p.start()
        p.join()
        command = raw_input("Command: ")
        conn.send(command) 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:55:49.450

这是因为您正在尝试循环创建多个服务器。单台服务器就足够你的任务了，不需要打开很多监听套接字。每个本地端口最多可能被一个监听套接字绑定——这就是你看到“地址正在使用”错误的原因。

试试 Python 标准[`TCPServer`](http://docs.python.org/library/socketserver.html#socketserver-tcpserver-example)类，这比使用低级套接字要方便得多。

对于线程服务器，请参见此[示例](http://docs.python.org/library/socketserver.html#asynchronous-mixins)。

在OS socket层面，这个方案只需要一个监听socket，每次接受新连接时都会产生新的socket（这是socketry的标准方式）。然后，您将在单独的线程中使用新套接字（请记住访问线程之间共享的公共数据）。

# c# - 如何在 C# 中使用带密码的文件作为数据库？

> ID：11602581
> 
> 赞同：1
> 
> 时间：2012-07-22T17:48:31.183
> 
> 标签：c#, database, file

我想编写一个程序来为我维护一些重要信息，但我不想使用 sql 作为数据库，因为没有人可以访问数据对我来说非常重要，我想将我的数据保存在一个文件中并且我想用密码来保护我的文件，比如winrar软件中的密码，然后就可以在我的程序中访问数据，谁能给我一个想法？谢谢大家:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:52:12.897

为什么不使用 AES 加密文件？[这](http://lukhezo.com/2011/11/06/encrypting-files-in-net-using-the-advanced-encryption-standard-aes/)是一个很棒的 C# 和 Rinjdael/AES 加密和文件解密教程。

编辑：

但是正如另一个答案中提到的那样，SQL 确实为其数据库提供了[密码保护](http://technet.microsoft.com/en-us/library/ms171741)，这与您想要做的事情不完全相同（除非您将重新发明轮子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:06:58.583

我见过使用（un）zip 库打开受密码保护的档案的专业应用程序。当然，可以暴力破解这些密码并打开存档。所以我不推荐这个选项。

SQL 数据库看起来是最好的选择，但您需要一个数据库服务器。或者您可能会查看[SQLite](http://sqlite.org/)，它是无服务器的。要密码保护 sqlite，您可以阅读[此问题](https://stackoverflow.com/questions/1381264/password-protect-a-sqlite-db-is-it-possible)

# asp.net - Twitter Bootstrap 渲染 HTML 而不是空格

> ID：11602584
> 
> 赞同：1
> 
> 时间：2012-07-22T17:49:10.543
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, twitter-bootstrap

我将 Twitter Bootstrap 与我的 ASP.Net MVC 项目一起使用。

我正在使用 EditorTemplate，它应该在输入框中添加两个类：

```
@model Nullable<System.DateTime> 

@if ( Model.HasValue ) { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy HH:mm:ss}" , Model.Value ) , new  { @class = "span3 disabled" } ) 
} 
else { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy HH:mm:ss}" , DateTime.Now ) , new     { @class = "span3 disabled" } ) 
} 
```

我在哪里：

```
new  { @class = "span3 disabled" } 
```

在编辑器模板中，这是用`&#32;`而不是空格呈现的 - 然后不会从 CSS 中获取类：

```
class="span3&#32;disabled" 
```

这可以呈现为：

```
class="span3 disabled" 
```

我已经尝试添加`@class = @Html.Raw("span3 disabled")`到 EditorTemplate，但它仍然显示为`&#32`; 而不是标记中的空格。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:09:15.300

有一个重载，它为 htmlattributes 使用 IDictionary，特别有助于诸如“data-role-id”之类的属性。以下可能会有所帮助

```
@Html.TextBox("dateandtime", String.Format("{0:dd/MM/yyyy HH:mm:ss}", DateTime.Now), new Dictionary<string, object> { { "class", "span3 disabled" } }) 
```

# sql-server-2008 - AdventureWorks 示例数据库

> ID：11602587
> 
> 赞同：0
> 
> 时间：2012-07-22T17:49:38.750
> 
> 标签：sql-server-2008, sharepoint, codeplex, sample-data, adventureworks

有人可以帮我解决这个问题。我想在我的 Win7 开发系统上安装 AWDB 示例数据库以与 SharePoint 2010 一起使用。

所以 SQL 2008 Express。我试图从 codeplex 下载各种东西，主要是因为我不知道类型之间的区别。我曾尝试在一些博客文章中在线查找此内容，但我发现/关注的内容似乎都不起作用。

[我认为这是我需要在这里](http://msftdbprodsamples.codeplex.com/releases/view/59211)下载我需要的东西的地方，但我不确定我到底需要什么。在这一点上，我现在只是想在 SQL 中获取数据库，那时我可能是 sql 的新手，但真的只是想开始在 SP2010 中尝试 BCS。

有谁帮助菜鸟？永远赞赏！多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:05:50.127

AdventureWorks2008R2-Full Database Backup.zip 就可以了。

然后在 SQL Express 中使用：

```
restore database [database_name] from disk = 'backup path'
  with move 'AdventureWorks2008R2_Data' to '<database_data_file_path>\<filename>.mdf',
       move 'AdventureWorks2008R2_Log' to '<database_log_file_path>\<filename>.ldf' 
```

# java - 从一个列表复制到另一个列表

> ID：11602589
> 
> 赞同：2
> 
> 时间：2012-07-22T17:49:55.323
> 
> 标签：java, list, iterator, structure

我有一个成对列表。如果我使用equal，它会复制每一组吗？

```
List<HashSet<Pair>> list1 = new ArrayList<HashSet<Pair>>();
List<HashSet<Pair>> list2 = new ArrayList<HashSet<Pair>>();

list1.add(0, new HashSet<Pair>());
list1.add(1, new HashSet<Pair>());
list1.add(2, new HashSet<Pair>());
list1.add(3, new HashSet<Pair>()); 
```

如果我这样做`list2 = list1`，它会完美复制吗？因为当我使用它时，它会崩溃。

```
Iterator<Pair> it1 = list2.get(0).iterator();
Iterator<Pair> it2 = list2.get(1).iterator();
Iterator<Pair> it3 = list2.get(2).iterator();
Iterator<Pair> it4 = list2.get(3).iterator(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:00:18.693

不。分配不会复制任何内容，而是将 list2 引用更新为指向 list1。因此，您可以像使用 list1 一样使用 list2；但是您对 2 所做的更改将反映在 1 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T18:03:28.073

```
list2 = list1 
```

此分配只是将引用分配给与`list2`相同的 List 点`list1`。（请注意，只有*一个*列表有两个引用。）如果要复制列表，则需要使用复制构造函数：

```
list2 = new ArrayList<HashSet<Pair>>(list1); 
```

# c# - 将 DateTime 作为整数存储和检索到 SQL

> ID：11602591
> 
> 赞同：3
> 
> 时间：2012-07-22T17:50:22.167
> 
> 标签：c#, sql, visual-studio-2010, sqlite

过去我玩过一些 SQLite，我非常喜欢它，以至于我想将它用于一个新项目。

第 1 步是创建数据库，我需要创建一个`DateStamp`字段，在其中放置事件发生时的时间戳。

在[SQLite 文档](http://www.sqlite.org/datatype3.html)中，日期和时间数据类型定义如下：

> **1.2 日期和时间数据类型**
> 
> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：
> 
> *   TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
> *   REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
> *   INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。
> 
> 应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。

我宁愿不将日期保存为文本，而且由于 Windows DateTime 对象不会回到公元前 4714 年 11 月 24 日，我想我只能将 DateTime 值存储为 INTEGER。

那么，如何将 DateTime 存储为整数？我会得到我想要的**基准日期**`TimeSpan`和日期之间的日期，提取天数并存储它吗？

 **```
// is this a UTC date?
private static readonly DateTime utc1970_01_01 = new DateTime(1970, 1, 1);

public static double GetIntDate(DateTime dateTime) {
  // FYI: subtracting dates in .NET returns a time span object
  return (dateTime - nov24_4714bc).TotalSeconds;
} 
```

**那正确吗？**这是其他人都在做的使用 SQLite 的事情吗？

它还说 SQLite 以 UTC 时间存储日期时间，所以我需要在此基础上再次转换。

以前肯定有人这样做过。我很高兴看到有人已经制作了处理这些输入的工具。SQLite 有一些[内置函数](http://www.sqlite.org/lang_datefunc.html)，但我不太了解如何使用它们。

**解决了：**

好吧便便。

可以这么简单吗？

```
public static long ToFileTimeUtc(DateTime dateTime) {
  return dateTime.ToFileTimeUtc();
}

public static DateTime FromFileTimeUtc(long fileTimeUtc) {
  return DateTime.FromFileTimeUtc(fileTimeUtc);
} 
```

注释？

我不能那样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:07:03.697

您是否可以使用 FileTime 取决于除您的应用程序之外的任何其他内容是否会访问数据。FileTime 表示自 1601 年 1 月 1 日 (UTC) 以来的 100 纳秒间隔数。

因此，您需要确保整数是 SQLLite 中的 8 字节整数，以便存储整个值。

只要您的应用程序是唯一处理此数据的应用程序，并且您始终使用 FileTime，那么就没有问题。如果其他人会访问这些数据，并且他们能够理解 FileTime，并且他们知道这就是它的本质，那么也没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:59:16.810

好吧便便。

可以这么简单吗？

```
public static long ToFileTimeUtc(DateTime dateTime) {
  return dateTime.ToFileTimeUtc();
}

public static DateTime FromFileTimeUtc(long fileTimeUtc) {
  return DateTime.FromFileTimeUtc(fileTimeUtc);
} 
```

注释？

我不能那样做吗？**

# ios - IAP iOS UIAlertView 取消按钮

> ID：11602593
> 
> 赞同：5
> 
> 时间：2012-07-22T17:50:35.183
> 
> 标签：ios, in-app-purchase, uialertview

我正在使用 StoreKit 在我的应用程序中实现购买。我的问题是当 IAP 对话框出现时如何处理 UIAlertView。我需要处理取消按钮。我需要知道何时按下取消并通知我的系统。我需要处理请求我的用户和密码数据的警报视图上的取消按钮。

例如，如果用户点击取消按钮，它应该调用一些回调方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T18:04:01.723

您可以在[SKPaymentTransactionObserver中处理它](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKPaymentTransactionObserver_Protocol/Reference/Reference.html)

像这样的东西

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                break;
            case SKPaymentTransactionStateFailed:
            {
               if (transaction.error.code == SKErrorPaymentCancelled)
               {
                   //user cancelled purchase
                }
             }  
                break;
            case SKPaymentTransactionStateRestored:
                break;
            default:
                break;
        }
    }
} 
```

# javascript - 将 MVC 的 Kendo UI 从 Beta 版升级到最新版本的最佳方法是什么

> ID：11602595
> 
> 赞同：3
> 
> 时间：2012-07-22T17:50:36.767
> 
> 标签：javascript, kendo-ui

我已经使用`Kendo UI`for启动了一个项目`MVC BETA`，现在我想将该项目升级到新版本。

1.  我应该遵循哪些步骤来执行升级？
2.  我的理解是我复制了`new js and css files`但我在 VS 中这样做？
3.  我要先删除旧文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T20:34:57.347

好的，我能够升级我的解决方案。这可能是也可能不是最好的方法，但它对我有用。

1.  为 ASP.NET MVC Q2 2012 版本下载并安装了 Kendo UI
2.  在 Visual Studio 中打开的解决方案
3.  打开引用并删除对 Kendo.MVC.dll 的引用
4.  添加了对位于“Kendo UI for ASP.NET MVC Q2 2012\wrappers\aspnetmvc\Binaries\Mvc3\Kendo.Mvc.dll”中的新 Kendo.MVC.dll 的新引用
5.  右键单击项目并选择在 Windows 资源管理器中打开文件夹。
6.  导航到“Kendo UI for ASP.NET MVC Q2 2012\styles”文件夹并复制所有文件夹和文件，然后将它们粘贴到解决方案的 Content 文件夹中。根据提示替换现有项目。
7.  导航到“Kendo UI for ASP.NET MVC Q2 2012\js”文件夹并复制所有文件夹和文件（ jquery.min.js 文件**除外**），然后将它们粘贴到解决方案的 Scripts 文件夹中。根据提示替换现有项目。

我确实遇到了层次网格的一个问题，并且不得不更改代码以反映 Kendo UI 文档页面上的代码，但仅此而已，其他一切都一样。

# java - WebORB 是否适用于 Java -> .NET 远程处理和消息传递

> ID：11602598
> 
> 赞同：0
> 
> 时间：2012-07-22T17:50:52.820
> 
> 标签：java, .net, weborb

WebORB 是否支持在 .NET（例如 WPF）中编写桌面客户端并使用 BlazeDS 在 Java 服务器中使用远程处理和消息传递服务？
或者，是否可以在不更改用 Flex 编写的现有客户端的情况下将 Java 服务器中的 BlazeDS 替换为 Java 的 WebORB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:19:48.650

[也许您应该从在WebORB 论坛](http://www.themidnightcoders.com/forum/)上问这个问题开始。

我确实认为 WebORB 支持在 .NET 中编写桌面客户端，因为它们过去支持 SilverLight。我还认为您可以将 BlazeDS 替换为 WebORB 用于 jave，因为 AMF 规范保持不变。

WebORB 附带了很多示例，因此您应该通过查看这些示例来快速回答您的第一个问题。

我建议使用 REST 而不是 AMF，但这只是我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:28:54.873

> WebORB 是否支持在 .NET（例如 WPF）中编写桌面客户端并使用 BlazeDS 在 Java 服务器中使用远程处理和消息传递服务？

WebORB 的 .NET 版本有一个用于桌面应用程序的通信库 ( [http://www.themidnightcoders.com/fileadmin/docs/dotnet/v5/_net_client_overview.htm](http://www.themidnightcoders.com/fileadmin/docs/dotnet/v5/_net_client_overview.htm) )，正如您将看到的，Remoting/RPC、Publish/该库提供订阅消息传递和 RTMP 数据消息传递。

前段时间，我做了一个简单的例子，windows服务与服务器通信并发送一些数据来做。服务器更新数据依次更新所有连接的 FLEX 客户端。尽管在示例中我使用了 WebORB 服务器，但我相信它可以被任何类似的解决方案所取代。详细示例和一些代码可在我的博客[http://blog.scriptico.com/06/120/上找到](http://blog.scriptico.com/06/120/)

> 或者，是否可以在不更改用 Flex 编写的现有客户端的情况下将 Java 服务器中的 BlazeDS 替换为 Java 的 WebORB？

我会说它可以被替换，但这取决于开发人员如何编写它。过去，我有一些从 BlazeDs 迁移到 WebORB 的经验。在最好的情况下，您根本不会接触 FLEX 客户端，或者只是使用修改后的通道端点信息重新构建它。

# delphi - 在树视图中枚举网络计算机和共享文件夹的列表？

> ID：11602599
> 
> 赞同：1
> 
> 时间：2012-07-22T17:50:54.923
> 
> 标签：delphi, treeview, delphi-xe2, file-sharing

我知道有很多方法可以枚举网络上的计算机和设备，但是如何仅显示可用于 Windows 文件共享的计算机？我需要提供网络计算机及其共享文件夹的树视图。我知道我可以为此使用现有的 shell 控件，但我宁愿将其保留在我自己的树视图中。它只会列出网络上具有共享文件夹的那些计算机。通过计算机及其共享文件夹，我可以自己完成单独的目录列表部分。我只需要知道如何获取计算机列表及其共享文件夹列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:20:23.907

如果您对使用 WNetOpenEnum/WNetOpenEnum Windows API 的示例 Delphi 代码感兴趣，请考虑以下资源：

*   Angus John 的[网络驱动器：](http://www.angusj.com/delphitips/netdrives.php)
*   [使用 Windows API 生成](http://edn.embarcadero.com/article/26876)由 Justin Swett 在 EDN 中发布的可用网络资源列表
*   从 Delphitricks.com[获取网络中的计算机列表。](http://www.delphitricks.com/source-code/internet/get_a_list_of_computers_in_a_network.html)

还必须掌握[NETRESOURCE 结构。](http://msdn.microsoft.com/en-us/library/aa385353%28v=VS.85%29.aspx)

[我个人从http://www.developpez.net](http://www.developpez.net)的论坛推荐以下列表：

清单 #1：

* * *

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Unit2;

type
  TForm1 = class(TForm)
    ListBox1: TListBox;
    procedure FormCreate(Sender: TObject);
  private
    procedure EnumNetworkProc(const aNetResource :TNetResource; const aLevel :word; var aContinue :boolean);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TForm1 }

procedure TForm1.EnumNetworkProc(const aNetResource :TNetResource; const aLevel :word; var aContinue :boolean);
begin
  if aNetResource.dwDisplayType in [RESOURCEDISPLAYTYPE_DOMAIN, RESOURCEDISPLAYTYPE_SERVER] then
    ListBox1.Items.Add(StringOfChar(' ', aLevel*4) +aNetResource.lpRemoteName);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  EnumNetwork(EnumNetworkProc, RESOURCE_GLOBALNET, RESOURCETYPE_DISK);
end;

end. 
```

* * *

清单 #2：

```
unit Unit2;

interface

uses Windows;

type
  TEnumNetworkProc = procedure(const aNetResource :TNetResource; const aLevel :word; var aContinue :boolean) of object;

procedure EnumNetwork(const aEnumNetworkProc :TEnumNetworkProc; const aScope :dword = RESOURCE_GLOBALNET; const aType :dword = RESOURCETYPE_ANY);

implementation

//Procédure récursive
procedure DoEnumNetwork(const aContainer :Pointer;
                        const aEnumNetworkProc :TEnumNetworkProc;
                        const aScope :dword;
                        const aType  :dword;
                        const aLevel :byte);
type
  PNetResourceArray = ^TNetResourceArray;
  TNetResourceArray = array [0..0] of TNetResource;
var
  NetHandle    :THandle;
  NetResources :PNetResourceArray;
  NetResult    :dword;
  Size, Count, i :Cardinal;
  Continue     :boolean;
begin
  Continue := TRUE;

  NetResult := WNetOpenEnum(aScope, aType, 0, aContainer, NetHandle);

  if NetResult = NO_ERROR then
  try
    //Taille de base
    Size := 50 *SizeOf(TNetResource);
    GetMem(NetResources, Size);

    try
      while Continue do
      begin
        Count := $FFFFFFFF;
        NetResult := WNetEnumResource(NetHandle, Count, NetResources, Size);

        //Taille insuffisante ?
        if NetResult = ERROR_MORE_DATA
        then ReallocMem(NetResources, Size)
        else Break;
      end;

      //Enumère
      if NetResult = NO_ERROR then
        for i := 0 to Count - 1 do
        begin
          //Callback
          if Assigned(aEnumNetworkProc) then
          begin
            aEnumNetworkProc(NetResources^[i], aLevel, Continue);
            if not Continue then Break;
          end;

          //Appel récursif
          if (NetResources^[i].dwUsage and RESOURCEUSAGE_CONTAINER) > 0 then 
            DoEnumNetwork(@NetResources^[i], aEnumNetworkProc, aScope, aType, aLevel +1);
        end;
    finally
      FreeMem(NetResources, Size);
    end;
  finally
    WNetCloseEnum(NetHandle);
  end;
end;

procedure EnumNetwork(const aEnumNetworkProc: TEnumNetworkProc; const aScope, aType: dword);
begin
  DoEnumNetwork(nil, aEnumNetworkProc, aScope, aType, 0);
end;

end. 
```

* * *

资料来源：[Liste des machines sur un réseau local (tout le réseau de Win)](http://www.developpez.net/forums/d680475/environnements-developpement/delphi/web-reseau/liste-machines-reseau-local-reseau-win/#post3984824) - Lucas Panny 的原帖（法语）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T17:55:30.150

[WNetOpenEnum](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385478%28v=vs.85%29.aspx)将为您提供网络上的所有计算机

> WNetOpenEnum 函数启动网络资源或现有连接的枚举。您可以通过调用[WNetEnumResource](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385449%28v=vs.85%29.aspx)函数继续枚举。

[NetShareEnum](http://msdn.microsoft.com/en-us/library/bb525387%28VS.85%29.aspx)将你所有的共享都放在一台机器上。

> 检索有关服务器上每个共享资源的信息。

您可以使用两者的组合来过滤掉您不想要的东西

# css - 如何将整页背景与链接（或图像地图）结合起来？

> ID：11602604
> 
> 赞同：0
> 
> 时间：2012-07-22T17:51:37.210
> 
> 标签：css, html, image

我知道有[很多技术](http://css-tricks.com/perfect-full-page-background-image/)可以将图像拉伸到整个页面。我喜欢基于“背景尺寸：封面”的那些，但如果它是合理的，我可以使用另一种技术。我的问题是，**我需要使用一些悬停效果来挂钩到该背景图像的某些部分的链接**- 想象一下背景中城堡上的一张图片，当您用鼠标悬停它们时突出显示它的不同部分。

笔记：

*   我更喜欢 imagemap 解决方案，因为它允许多边形热点。
*   请注意，我不希望图像顶部的组件具有自己的尺寸。

# java-me - 蓝牙通信服务器客户端卡住j2me

> ID：11602606
> 
> 赞同：2
> 
> 时间：2012-07-22T17:51:43.757
> 
> 标签：java-me, bluetooth, midp, jsr82

如何使用相同的 Stream 从服务器到客户端或从客户端到服务器多次读取/写入？

我正在通过蓝牙制作回合制游戏。关于如何在 j2me 中实现这一点的任何想法？

我正在使用 RfCOM 协议。

客户端代码是

```
public void serviceSearchCompleted(int transID, int respCode) {
    try {
        StreamConnection SC = (StreamConnection) Connector.open(connectionURL);
        input = SC.openDataInputStream();
        output = SC.openDataOutputStream();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    while (true) {
        f.setCommandListener(new CommandListener() {

            public void commandAction(Command c, Displayable d) {
                if (c.getLabel().toString().equalsIgnoreCase("send")) {
                    try {
                        output.writeUTF("Hey server");
                        output.flush();
                        String msg = input.readUTF();
                        System.out.println(msg);
                    } catch (IOException ex) {
                        ex.printStackTrace();
                        System.out.println("am here now " + ex);
                    }
                }
            }
        });
        synchronized (lock) {
            lock.notify();
        }

    }
} 
```

服务器代码：

```
while (true) {
                StreamConnection sc = scn.acceptAndOpen();

                RemoteDevice rd = RemoteDevice.getRemoteDevice(sc);
                DataInputStream input = sc.openDataInputStream();
                DataOutputStream output = sc.openDataOutputStream();
                String inMsg = input.readUTF();
                System.out.println(inMsg + " recived at " + new Date().toString());

                output.writeUTF("Hey client Sent at " + new Date().toString());
                output.flush();
            } 
```

流只工作一次，然后当我再次单击发送时没有任何反应

```
Processing CONN_INIT 4
Processing CONN_OPEN 4
Processing CONN_SEND 4
Processing CONN_RECEIVE 4
Hey client Sent at Sun Jul 22 19:47:15 GMT+02:00 2012
Processing CONN_SEND 4
Processing CONN_RECEIVE 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:28:45.617

`L2CAPConnectionNotifier.acceptAndOpen`将阻塞循环并等待新的连接。

将代码从 while 主体移动到新线程。

```
while (true) {
    StreamConnection sc = scn.acceptAndOpen();
    final RemoteDevice rd = RemoteDevice.getRemoteDevice(sc);
    new Thread() {
        public void run() {
            treatConnection(rd);
        }
    }.start();
}

private void treatConnection(RemoteDevice rd) {
    DataInputStream input = sc.openDataInputStream();
    DataOutputStream output = sc.openDataOutputStream();
    String inMsg = input.readUTF();

    while (inMsg != null) { // not sure about this stop condition...
        System.out.println(inMsg + " recived at " + new Date().toString());
        output.writeUTF("Hey client Sent at " + new Date().toString());
        output.flush();

        inMsg = input.readUTF();
    }
} 
```

# c# - C# 中的 XML Linq (YouTube API)

> ID：11602608
> 
> 赞同：1
> 
> 时间：2012-07-22T17:51:56.067
> 
> 标签：c#, .net

有人可以快速帮助我吗，我正在写一些使用 Youtube API 的东西，它给了我 XML 的结果，我试图从 XML 响应中获取 vid 的标题。

这是 XML 的链接：[https ://gdata.youtube.com/feeds/api/videos/T7sIiqq66rk?v=2](https://gdata.youtube.com/feeds/api/videos/T7sIiqq66rk?v=2)

这是我的代码：

```
string nameURL = "https://gdata.youtube.com/feeds/api/videos/" + videoID + "?v=2";
WebRequest nameRequest = WebRequest.Create(nameURL);
HttpWebResponse nameResponse = (HttpWebResponse)nameRequest.GetResponse();
Stream nameStream = nameResponse.GetResponseStream();
StreamReader nameReader = new StreamReader(nameStream);
string XML = nameReader.ReadToEnd();
var VideoInfo = from e in XElement.Parse(XML).Elements("entry") select new {Id = e.Element("title").Value};
Console.WriteLine(VideoInfo.FirstOrDefault().Id); 
```

调试器似乎打破了 WriteLine 方法，说它为空，我也尝试了其他一些方法，但似乎只能得到标题元素。

编辑：有什么问题导致结果为空，我已经确定了这一点，但有人可以指出为什么它一直返回空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:55:05.070

首先，`VideoInfo.FirstOrDefault()`如果没有条目，将返回 null，因此当您尝试访问该`Id`字段时会抛出异常。

由于`entry`是根元素，您应该访问 XDocument.Root，而不是`Elements("entry")`

你的代码应该更像这样：

```
var xDoc = XDocument.Parse(XML);

var VideoInfo = new {Id = xDoc.Root.Element("id").Value };

Console.WriteLine(VideoInfo.Id); 
```

# windows - 枚举内核驱动程序中的所有符号链接

> ID：11602616
> 
> 赞同：2
> 
> 时间：2012-07-22T17:53:21.040
> 
> 标签：windows, kernel, enumeration, symlink

如何使用我的 Windows 内核驱动程序枚举所有符号链接？像 winobj 一样 (GLOBAL??)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T20:22:40.643

也许[NtOpenDirectoryObject](http://msdn.microsoft.com/en-us/library/bb470234%28v=vs.85%29)和[NtQueryDirectoryObject](http://msdn.microsoft.com/en-us/library/bb470238%28v=vs.85%29)函数可以帮助你。

# c# - 如何声明一个方法，然后再定义它？

> ID：11602626
> 
> 赞同：3
> 
> 时间：2012-07-22T17:54:49.247
> 
> 标签：c#, class

在 C# 中有没有办法声明类，然后再定义它？我真的很喜欢在 C++ 中，我可以像 TOC 一样在顶部列出所有方法，然后再定义所有内容。

可以这样做是C#吗？

我使用了定义一个方法的想法，该方法只在其中运行一个类似命名的方法，然后类似的方法位于底部。但我认为有更好的方法，谷歌搜索会返回一堆关于创建类的基本代码而没有答案。

所以这就是我要做的......

```
...
public void methodA(){methodAcontent()};
public void methodB()...etc...

...further down...

private void methodAcontent(){
...All the code..
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:59:10.197

这就像`Interface` [http://msdn.microsoft.com/en-us/library/87d83y5b.aspx](http://msdn.microsoft.com/en-us/library/87d83y5b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:02:26.410

*   或者这是一个带有方法的[抽象类。](http://msdn.microsoft.com/it-it/library/sf985hc5%28v=vs.100%29.aspx)`abstract`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:07:04.620

你为什么需要那个？

C# 使用多遍编译，因此函数的定义位置和使用时间无关紧要。您可以在类的末尾定义函数并在开始时使用它，它仍然可以正常编译。

IDE 也可以帮助您。您可以折叠所有方法的主体，在一个组合框中列出所有方法，InteliSense 非常有助于找到正确的方法。

在 C# 中使用 C++ 的实践确实是个坏主意，因为两者在解决问题的方式上大不相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T18:07:52.050

在 C# 语言中没有很好的方法来执行此操作，但 Visual Studio IDE 可以将文件折叠到它的定义中，然后您可以单独展开它（请参阅[this](http://blogs.msdn.com/b/zainnab/archive/2010/03/18/collapse-to-definitions-with-outlining-vstipedit0032.aspx)）。这与[代码区域](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.71%29.aspx)一起帮助我组织更长的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T18:17:33.957

如果您这样做是为了将公共接口“记录”到正确封装问题域中的概念或对象的类的公共接口，那么请使用接口。

如果您这样做是为了获得“概述”类的结构，那么 Visual Studio 有几种方法可以为您提供此功能。您可以将代码折叠到其定义（Ctrl+M、O），或查看类视图（Ctrl+W、C）。

# objective-c - 如何获取协议定义的功能列表？

> ID：11602627
> 
> 赞同：2
> 
> 时间：2012-07-22T17:54:54.613
> 
> 标签：objective-c, reflection

我知道`protocol_copyMethodDescriptionList`在 Objective-C 运行时中有定义，但我不想走得那么深，或者使用 c 数组。有没有`Protocol`可以做到这一点的对象的方法？我在哪里可以找到该`Protocol`对象的任何文档？我希望有类似的东西：

`[foo getMethodsThisProtocolDefines]`;

其中 foo 是一个`Protocol`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T18:38:24.067

自 Leopard/ObjC 2.0 以来，`Protocol`该类已被弃用。* 因此，它没有任何方法，也没有任何当前文档。与协议交互的唯一方法是通过运行时函数。

协议的方法列表中包含的结构也不是对象，因此无论如何它们都无法进入 an`NSArray`而不被包装。

`protocol_copyMethodDescriptionList()`处理从;返回的数组并不是特别困难。你只需要记住`free()`它。如果您有特定的选择器，您还可以使用 来检查协议`protocol_getMethodDescription()`，这不需要您进行任何内存管理。例如：

```
BOOL method_description_isNULL(struct objc_method_description desc)
{
    return (desc.types == NULL) && (desc.name == NULL);
}

const char * procure_encoding_string_for_selector_from_protocol(SEL sel, Protocol * protocol)
{
    static BOOL isReqVals[4] = {NO, NO, YES, YES};
    static BOOL isInstanceVals[4] = {NO, YES, NO, YES};
    struct objc_method_description desc = {NULL, NULL};
    for( int i = 0; i < 4; i++ ){
        desc = protocol_getMethodDescription(protocol,
                                             sel,
                                             isReqVals[i], 
                                             isInstanceVals[i]);
        if( !method_description_isNULL(desc) ){
            break;
        }
    }

    return desc.types;
} 
```

* * *

*事实上，似乎（基于运行时参考中[的注释](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH3g-BBCEFDIE)）该名称现在只是`Class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:04:51.770

你可能想要[这个。](https://github.com/mikeash/MAObjCRuntime)Objective-C 运行时的 Objective-C 包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-21T15:54:31.253

从 Objective-C 运行时检查[protocol_copyMethodDescriptionList 。](https://developer.apple.com/reference/objectivec/1418822-protocol_copymethoddescriptionli?language=objc#)这将返回协议上的一组方法。

# html - 为什么有些 HTML 节点会褪色？

> ID：11602631
> 
> 赞同：1
> 
> 时间：2012-07-22T17:55:13.833
> 
> 标签：html, firebug

嵌套在类 dropdown-menu 的 div 中的代码是褪色的。

```
<li class="drop down">
  <a class="dropdown-toggle" href="#" data-toggle="dropdown">
  Sign In
  <strong class="caret"></strong>
  </a>
  <div class="dropdown-menu" style="padding: 15px; padding-bottom:0px;">
    <form method="post" action="post_login" accept-charset="UTF-8">
      <input id="login" type="text" style="margin-bottom: 15px;" size="30" name="user[login]">
      <input id="login" type="password" style="margin-bottom: 15px;" size="30" name="user[password]">
      <input class="btn btn-primary" type="submit" value="Sign In" style="clear: left; wdith: 100%; height=32px font-size:13px" name="commit">
    </form>
  </div>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:58:38.740

那是因为它在页面中不可见。

# jquery - 在一个页面站点的某一点更改菜单颜色

> ID：11602632
> 
> 赞同：23
> 
> 时间：2012-07-22T17:55:18.850
> 
> 标签：jquery, css, menu, colors, web

我正在制作一个单页作品集。该站点的内容将是水平滚动的，只有菜单是固定的。前两页是黑色的，最后一页是白色的。但是第三页是半黑半白的，这是两个背景的分隔符。

![http://i.stack.imgur.com/uiVqu.jpg](../Images/4b251b5065b0588b77d48d0d09fc5cf8.png)

这是迄今为止我的问题的最佳解决方案：http: [//jsfiddle.net/a5a7x/1/](http://jsfiddle.net/a5a7x/1/) 我只有使它水平而不是垂直的问题。

这是我要拆分的页面内容：http: [//jsfiddle.net/n3FGr/](http://jsfiddle.net/n3FGr/)

记住，我只需要拆分菜单，因为它是固定的，所以只有菜单会有拆分，内容会左右滑动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T11:25:10.720

## Quick&Dirty 相当接近的解决方案

![文字渐变](../Images/8dc96f1e6b53ecc2f097a4d6b4663793.png)

我已经探索了实现目标的方法并进行了一些实验：

*   [文字居中](http://dabblet.com/gist/3181406)
*   [左上角的文字](http://dabblet.com/gist/3181519)
*   [左上角菜单](http://dabblet.com/gist/3181530)
    ![在此处输入图像描述](../Images/f5c741251a6951db95e015bdc2e677d4.png)

我没有完整的解决方案，但结果还不错：（[**dabblet 上的演示**](http://dabblet.com/gist/3181406)）

**HTML：**

```
<div>
    <h1>Chess</h1>
</div> 
```

**CSS：**

```
div {
    background: linear-gradient(45deg, black 52%, white 52%);
}

ul {
    background: linear-gradient(45deg, white 52%, black 52%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
} 
```

### 工作方法：

在每个渐变中同步百分比：

**52%：** ![在此处输入图像描述](../Images/f5c741251a6951db95e015bdc2e677d4.png)
**62%：** ![在此处输入图像描述](../Images/720ce67a5ea7ad596611076a4d844ff6.png)

**优点：**

*   纯html&css;

**缺点：**

*   仅支持 webkit；

## *帆布*路_

**优点：**

*   跨浏览器（移动端）

**缺点：**

*   需要 Javascript

## *SVG*方式_

**优点：**

*   跨浏览器
*   Javascript免费（静态）
*   比 Canvas 更语义化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T23:57:25.790

你不能在 css3 中做一个对角渐变，比如黑色为 50%，然后白色为 51%？

```
background-image: linear-gradient(left top, rgb(0,0,0) 54%, rgb(255,255,255) 55%);
background-image: -o-linear-gradient(left top, rgb(0,0,0) 54%, rgb(255,255,255) 55%);
background-image: -moz-linear-gradient(left top, rgb(0,0,0) 54%, rgb(255,255,255) 55%);
background-image: -webkit-linear-gradient(left top, rgb(0,0,0) 54%, rgb(255,255,255) 55%);
background-image: -ms-linear-gradient(left top, rgb(0,0,0) 54%, rgb(255,255,255) 55%);

background-image: -webkit-gradient(
linear,
left top,
right bottom,
color-stop(0.54, rgb(0,0,0)),
color-stop(0.55, rgb(255,255,255))
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T00:04:45.713

如何更改菜单项的 CSS 颜色 onclick：

```
$('#link1 a').click(function(){
    goTo(0,0);
$('#navigation ul li a').css('color','#fff');  
});

$('#link2 a').click(function(){
    goTo(1,0);
$('#navigation ul li a').css('color','#fff');
});

$('#link3 a').click(function(){
    goTo(2,0);
$('#navigation ul li a').css('color','#000');
});

$('#link4 a').click(function(){
    goTo(3,0);
$('#navigation ul li a').css('color','#000');
}); 
```

JSFIDDLE：http: [//jsfiddle.net/V7YXC/2/](http://jsfiddle.net/V7YXC/2/)

# javascript - contenteditable 中的窗口文本选择

> ID：11602633
> 
> 赞同：2
> 
> 时间：2012-07-22T17:55:23.910
> 
> 标签：javascript, html, contenteditable

contenteditable 中的文本选择给我带来了很大的问题......

我正在尝试以与此代码部分相同的方式获取开始和结束选择点：

[http://jsfiddle.net/TjXEG/1/](http://jsfiddle.net/TjXEG/1/)

（因为在 contenteditable 中，有不同的标签，我需要在失去焦点后重新选择可见的选定文本（文本节点？）

我真的很迷茫，有人知道教程或其他东西来理解网络浏览器中的选择吗？

谢谢，叶宝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:26:35.407

Because I only use Chrome, I chopped off the `else` since it doesn't apply. So here's the Chrome solution:

```
Non-editable text. Editable is below:
<div id="test" contenteditable="true">Hello, some <b>bold</b> and <i>italic and <b>bold</b></i> text</div>
<div id="caretPos"></div>
<div id="caretPost"></div>
<script type="text/javascript">
function getCaretCharacterOffsetWithin(element) {
    var begin = 0;
    var end = 0;
    if (typeof window.getSelection != "undefined") {
        var range = window.getSelection().getRangeAt(0);
        var preCaretRange = range.cloneRange();
        preCaretRange.selectNodeContents(element);
        preCaretRange.setEnd(range.startContainer, range.startOffset);
        begin = preCaretRange.toString().length;
        preCaretRange.setEnd(range.endContainer, range.endOffset);
        end = preCaretRange.toString().length;
    }
    return "Selection start: " + begin + "<br>Selection end: " + end;
}

function showCaretPos() {
    var el = document.getElementById("test");
    var caretPosEl = document.getElementById("caretPos");
    caretPosEl.innerHTML =  getCaretCharacterOffsetWithin(el);
}

document.body.onkeyup = showCaretPos;
document.body.onmouseup = showCaretPos;
</script> 
```

Once you understand it, the logic is pretty simple. There is a start and end container. If it is plain text: they will be the same; however, HTML tags fragment the sentence and will make start contain a portion and end contain a different portion.

If you use `setStart()` where I'm using `setEnd()` and reverse the parameters as well, it'll be the same as reversing the index (i.e. the end will be 0 instead of the beginning).

So in order to fetch the beginning, you still use `setEnd()`, except with the start parameters.

# android - 如何检查 startActivity() 是否会因缺少权限而因 SecurityException 而失败？

> ID：11602641
> 
> 赞同：3
> 
> 时间：2012-07-22T17:55:52.663
> 
> 标签：android, securityexception

我想支持使用联系人选择器添加联系人。似乎某些手机需要 READ_CONTACTS 权限而不是其他手机 - 请参阅[联系人选择器查询是否需要 read_contacts 权限，具体取决于 android 版本？](https://stackoverflow.com/questions/11387586/do-contact-picker-queries-require-the-read-contacts-permission-depending-on-the)

```
 Intent intent = new Intent(Intent.ACTION_PICK, People.CONTENT_URI);
    startActivityForResult(intent, CHOOSE_CONTACT); 
```

当我查询返回的数据（mangedQUery（））时，onActivityResult（）发生异常

```
 if (resultCode == Activity.RESULT_OK) {
              Uri contactData = data.getData();
              if (contactData != null) {
                       Cursor mCursor =  managedQuery(contactData, null, null, null, null);
                       if (mCursor != null && mCursor.moveToFirst()) {
                                long id = mCursor.getLong(mCursor.getColumnIndex(People._ID));
                                String name = mCursor.getString(mCursor.getColumnIndex(People.DISPLAY_NAME));

                                if (name != null) {
                                         displayName(name);
                                         _contact_id = id;
                                         _contact_name = name.trim();
                                }
                       }
              }
     } 
```

我想知道如何事先检查 startActivity 是否会失败，以便在必须执行此“实时检查”之前禁用该功能。

尝试将此作为可能的解决方案，但由于 ai.permission 始终为空，因此无法正常工作：

```
 final PackageManager packageManager = getPackageManager();
    final Intent intent = new Intent(Intent.ACTION_PICK, People.CONTENT_URI);
    List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);

    for (ResolveInfo resolve : list) {
        ActivityInfo ai = resolve.activityInfo;
        if (ai.permission != null) {
            return false;
        }
    }

    return true; 
```

# css - 使用响应式实用程序类时更改“span”类 - Twitter Bootstrap

> ID：11602645
> 
> 赞同：3
> 
> 时间：2012-07-22T17:56:22.583
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap，但我在特定元素上遇到了一些困难。

这是界面已经提供的“脚手架”标记，我将使用它作为示例。

```
<div class="row">
  <div class="span6">
    Level 1 column
    <div class="row">
      <div class="span3">Level 2</div>
      <div class="span3">Level 2</div>
    </div>
  </div>
</div> 
```

此外，为了帮助这种情况......有“响应式实用程序类”，您可以在此处查看 - [http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

因此，我要做的只是将其更改`class="span3"`为，例如，`class="span6"`当我使用“响应式实用程序类”时`.visible-tablet.`

最初，我认为它会奇迹般地自动更改为“最大宽度”，但不幸的是它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:23:43.000

正如@scumah 指出的那样，您不会使用CSS 更改类。为此，您将使用 JS。

然而，如果你想改变一个类的特性（在这种情况下`span3`），当它包含在一个给定类的元素中时（这里`visible-tablet`），这只是让你的 CSS 选择器工作的问题：

```
.visible-tablet .span3 {
  width: 352px;
}​ 
```

这会将 更改`span3`为与默认情况下 a 的宽度相同`span6`。

### [JSFiddle](http://jsfiddle.net/Zf8az/)

然而，这一切似乎有点骇人听闻，所以您可能需要重新考虑您想要完成的工作。

# python - 无法使用默认值向表中插入数据

> ID：11602647
> 
> 赞同：1
> 
> 时间：2012-07-22T17:56:43.623
> 
> 标签：python, mysql, scrapy

我有一个有 4 个属性的表。

```
 +--------------+--------------+------+-----+-------------------+----------------+
| Field        | Type         | Null | Key | Default           | Extra          |
+--------------+--------------+------+-----+-------------------+----------------+
| id           | int(11)      | NO   | PRI | NULL              | auto_increment |
| url          | varchar(255) | YES  |     | NULL              |                |
| mail         | varchar(255) | YES  |     | NULL              |                |
| date_entered | timestamp    | NO   |     | CURRENT_TIMESTAMP |                |
| active       | tinyint(1)   | NO   |     | 1                 |                |
+--------------+--------------+------+-----+-------------------+----------------+ 
```

现在我只想插入 data_entered 和其他属性来获取默认值。我正在为 id 字段做这件事，我需要与我插入到不同表的另一个 id 完全相同。

这是代码：

```
 tx.execute(\
            "insert into company_career (date_entered) "
            "values (%s)",
            (time.time())
        ) 
```

这是错误：

```
 query = query % db.literal(args)
    exceptions.TypeError: not all arguments converted during string formatting 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:14:14.117

试试这个：

```
tx.execute(\
            "insert into company_career (date_entered) "
            "values (FROM_UNIXTIME('%s'))",
            (time.time())
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:08:07.807

当您在插入查询中提供值时，不要忘记用逗号将其括起来

```
"insert into company_career (date_entered) values ('%s')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:49:55.827

我确实设法插入： insert into company(url,mail,date_entered) values("","","now");

# php - 提交表单后 HTML 页面不断重复

> ID：11602651
> 
> 赞同：0
> 
> 时间：2012-07-22T17:57:14.833
> 
> 标签：php, html, css

我有一个包含以下 HTML 元素的 PHP 页面。

```
<div id="templatemo_banner" onClick="parent.location='../index.php'">
    <div id="logo"></div>
</div>

<div id="templatemo_menu_search">
    <div id="templatemo_menu">
      <?php include("../template/menu.php"); ?>     
    </div> <!-- end of menu -->

    <div id="search_section">
        <form action="#" method="get">
            <input type="text" value="Enter keyword here..." name="q" size="10" id="searchfield" title="searchfield" onfocus="clearText(this)" onblur="clearText(this)" />
          <input type="submit" name="Search" value="Search" alt="Search" id="searchbutton" title="Search" />
        </form>
    </div> 

    <div class="cleaner"></div> 
</div> 
```

在相应的 CSS 文件中：

```
#templatemo_banner {
width: 960px;
height: 288px;
margin: 0 auto;
    background: url(images/templatemo_banner_bg.jpg) no-repeat;
border-bottom: 5px solid #cfd389;
}

#templatemo_banner #logo {
float: left;
margin: 100px 0 0 80px;
width: 673px;
height: 128px;
background: url(images/templatemo_logo.jpg) no-repeat;
}

#templatemo_menu_search {
clear: both;
width: 960px;
height: 50px;
background: url(images/templatemo_menu_bg.jpg) no-repeat;   
}

#templatemo_menu {
float: left;
width: 650px;
height: 50px;
}

#templatemo_menu ul {
margin: 0px;
padding: 0px;
list-style: none;
}

#templatemo_menu ul li {
display: inline;
}

#templatemo_menu ul li a {
float: left;
display: block;
padding: 0 30px;
height: 35px;
padding-top: 18px;
text-align: center;
font-size: 12px;
text-align: center;
text-decoration: none;
color: #333333; 
font-weight: bold;
outline: none;
 }

#templatemo_menu li a:hover, #templatemo_menu li .current {
color: #ffffff;
background: url(images/templatemo_menu_hover.jpg) no-repeat;    
} 
```

我遇到了这个问题，在我执行表单提交后，上述 html 元素会重复一次。你可以把它想象成在我有了我的横幅和菜单之后，原来的集合下面有一个额外的横幅和菜单。无论如何，刷新页面后，额外的元素都会消失。

我将不胜感激任何建议。我使用 Google Chrome 作为我的浏览器在 XAMPP 1.7.7 中运行此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:03:09.260

删除操作中的哈希...

```
<form action="" method="get"> 
```

# python - 在 Windows 7 上运行的 WAMP 服务器上安装 mod_wsgi

> ID：11602653
> 
> 赞同：13
> 
> 时间：2012-07-22T17:57:20.807
> 
> 标签：python, apache, windows-7, wamp, mod-wsgi

我从[以下位置](http://www.lfd.uci.edu/~gohlke/pythonlibs/)为 apache 2.2 和 python 2.7（64 位）下载了 mod_wsgi。（我试图让 django 在我的计算机上运行）。

每当我添加以下行时：

```
LoadModule wsgi_module modules/mod_wsgi.so 
```

Apache 无法启动。谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T18:28:57.567

这些是为 Django 设置 Apache 时需要做的以下事情。我假设您在安装了 WAMP 服务器（**32**位）的 Windows（**32****位）上使用 Python 2.7（32**位）。

 ****1.  [下载](http://code.google.com/p/modwsgi/downloads/list)mod_wsgi-win32-ap22py27-3.3.so。或下载您各自的 .so 兼容文件

2.  在 Windows 上将其名称更改为`mod_wsgi.so`并将其复制到`/Program Files/Apache Software Foundation/Apache22/modules`。

3.  `httpd.conf`使用管理员权限打开。现在，您将找到带有 的行列表`LoadModule ...`。只需添加`LoadModule wsgi_module modules/mod_wsgi.so`到该列表即可。

    你已经部分完成了..你可以重新启动apache并且不应该发现任何错误。

4.  现在您需要将它链接到您的 Django 项目。

5.  在您的 Django 项目根文件夹中，添加`apache`文件夹并创建`django.wsgi`（不要更改此名称）和`apache_mydjango.conf`.

6.  在`httpd.conf`页面底部添加以下行。

    `Include "d:/projects/mysite/apache_django_wsgi.conf"`

打开`django.wsgi`并添加以下行：

```
import os, sys

sys.path.append('d:/projects/mysite')
os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

打开`apache_djang_wsgi.conf`并添加：

```
Alias /images/ "d:/projects/mysite/templates/images/"
<Directory "d:/projects/mysite/images>
Order allow,deny
Allow from all
</Directory>

WSGIScriptAlias / "d:/projects/mysite/apache/django.wsgi"

<Directory "d:/projects/mysite/apache">
Allow from all
</Directory>

<VirtualHost *:80>
    DocumentRoot d:/projects/mysite
    ServerName 127.0.0.1

</VirtualHost> 
```

笔记：

我假设您的 Django 项目层次结构是这样的：

```
mysite/
        mysite/
                 settings.py
                 urls.py, wsgi.py.
        manage.py
        <apache> / apache_django_wsgi.conf, django.wsgi 
```

**最佳教程链接：**

1.  [port25.technet.com | 发表了我的微软。](http://blogs.technet.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-86-46-PDFs/8637.InstallingApacheonWindows.pdf)
2.  [mod_wsgi 快速安装指南](http://blogs.technet.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-86-46-PDFs/8637.InstallingApacheonWindows.pdf)
3.  [Django 站点](https://code.djangoproject.com/wiki/django_apache_and_mod_wsgi)
4.  [Django 站点](https://docs.djangoproject.com/en/1.3/howto/deployment/modwsgi/)

*其实我不明白为什么人们无法修复它。我在这里看到了很多关于它的问题，我什至发布了一些......所以，我想直接写一个初始设置版本作为答案*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T18:19:22.310

尝试以下网站获取 Python 扩展的非官方 Windows 二进制文件 [http://www.kaij.org/blog/?p=123](http://www.kaij.org/blog/?p=123) [https://github.com/kirang89/pycrumbs/pull/28](https://github.com/kirang89/pycrumbs/pull/28)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T10:01:08.087

以防万一有人在使用它并且没有发现它，步骤中存在不一致。在第 5 步中，它指的是文件名`apache_mydjango.conf`

在第 6 步中，它指的是文件名`apache_django_wsgi.conf`

这些显然都应该是同一个名字——不管你走哪条路都没有关系——但我花了一段时间试图弄清楚为什么它不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T16:39:53.833

除了Olly的更正之外，Step6还有一个错误：而不是

```
Include "d:/projects/mysite/apache_django_wsgi.conf" 
```

它应该是

```
Include "d:/projects/mysite/apache/apache_django_wsgi.conf" 
```

我完成了所有步骤，现在无法再启动 Apache Server。Wamp 图像是红色的。我可以按照步骤 3 中的说明重新启动 Apache。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T16:35:52.440

**我如何配置 Apache + Django + venv**

要让它工作，你需要三件事：

1.  `mod_wsgi`在 python 和 apache 上安装
2.  `httpd.conf`在 apache 上设置
3.  `mod_wsgi`配置由您的 python 应用程序加载并依次加载的python 脚本（通常是 wsgi.py）

**1.**官方文档中描述的很好（我用的是pip方法）。只需将 apache 发行版（ApacheHaus 为我工作，但**不是**Apache Lounge，我认为它遗漏了一些标题）到一个**标准**位置，例如`C:\` **或**将 env var`MOD_WSGI_APACHE_ROOTDIR`设置为其目录。您将需要 Visual Studio 构建工具**或**mod_wsgi 的二进制分发。然后`pip install`它。

**2.**在 httpd.conf 添加：

```
LoadFile ".../pythonXY/pythonXY.dll"
LoadModule wsgi_module ".../mod_wsgi/server/mod_wsgi.cpXY-win_amd64.pyd"
WSGIPythonHome ".../pythonXY"
WSGIScriptAlias / "...\wsgi.py" 
```

`LoadFile`如果没有以标准方式安装 Python，则此处可能是必需的。最好包括在内。 `WSGIPythonHome`指令应该指向主要的 python 发行版（不是通常所说的**venv**），因为**mod_wsgi**可能有些无法正常工作。比如现在`WSGIPythonPath`什么都不做。或者，您可以相应地设置 PYTHONPATH 或 PYTHONHOME 环境变量。

*现在您可以监控 apache 的错误日志（默认在其日志文件夹内）。如果失败，apache 将打印 mod_wsgi 配置（意味着它已安装，但无法启动 python）和/或 python 错误（如果它设法启动）。*

**3.**在您的 python 脚本 ( `wsgy.py`) 中，您需要提供启动您的应用程序的函数**“应用程序”**（`mod_wsgi`通常是这样编译的）。但是首先将 python 指向它将使用的模块和包，你自己的，就在带有`sys.path`or的脚本中`site.addsitedir`。Django 的 wsgi.py 很好，只需在其中添加所有路径配置即可。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-25T12:45:21.613

仅适用于运行 windows 64 版本的用户。

我创建了wsgi。现在你只需要安装python并运行apache。配置已在包中设置。只需下载包并按照包中的“Steps to follow.txt 文件”中的说明进行操作。

你不需要从任何地方下载 python 和 apache 以及 mod_wsgi.so。我已经编译了so文件，并兼容了python和apache2版本。以便您准备好部署。只是在 apache 配置中，文档根目录已设置为 Apache2 中存在的 cgi-bin 文件夹。

包可以从[Zip包中下载](https://github.com/guptaaditya/Python-Apache-mod_wsgi-package/blob/master/apache-python-wsgisosetup.zip)

[说明和包装使用](https://github.com/guptaaditya/Python-Apache-mod_wsgi-package)****

# objective-c - 使用 AFNetworking 上传多个文件时出现 CF 网络错误 303

> ID：11602666
> 
> 赞同：1
> 
> 时间：2012-07-22T17:58:52.413
> 
> 标签：objective-c, afnetworking

我正在开发一个应用程序，允许用户将他们的照片上传到我的网络服务器。我最近添加了一次上传多个文件的支持：用户可以从他们的 iPhone 相册中选择照片，然后上传到服务器。

上传一个文件没有问题，但是，当我尝试上传多个文件时，我收到以下错误：

```
The operation couldn't be completed (kCFErrorDomainCFNetwork error 303.) 
```

我用于上传文件的代码如下：

```
// start the uploading for each photo
for(int i = 0; i < photosArray.count; i++)
{
    Photo *currentPhoto = [photosArray objectAtIndex:i];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"upload", @"command", UIImageJPEGRepresentation(currentPhoto.image,70),@"file", [NSNumber numberWithInt:album.albumId], @"albumId", currentPhoto.title, @"title", currentPhoto.description, @"description", nil];

    [[AFAPI sharedInstance] commandWithParams:params onCompletion:^(NSDictionary *json)
     {
         //completion
         if (![json objectForKey:@"error"]) 
         {
             // hide the UIProgressView and show the detail label
             UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
             UIProgressView *pv = (UIProgressView *) [cell viewWithTag:4];
             pv.hidden = YES;

             UILabel *detailLabel = (UILabel *) [cell viewWithTag:3];
             detailLabel.text = @"Upload completed";
             detailLabel.hidden = NO;

         } 
         else 
         {
             //error :(
             NSString* errorMsg = [json objectForKey:@"error"];
             [UIAlertView error:errorMsg];
         }
     }
     onUploadProgress:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) 
    {
         // ...
    }];
} 
```

我用for循环枚举photosArray，对于它找到的每张照片，它都会上传图像（currentPhoto.image）。commandWithParams 函数的实现是：

```
-(void)commandWithParams:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock onUploadProgress:(void (^)(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))uploadProgressBlock
{
    NSData* uploadFile = nil;
    if ([params objectForKey:@"file"]) 
    {
        uploadFile = (NSData*)[params objectForKey:@"file"];
        [params removeObjectForKey:@"file"];
    }

NSMutableURLRequest *apiRequest = 
[self multipartFormRequestWithMethod:@"POST" 
                                path:kAPIPath 
                          parameters:params 
           constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
               if (uploadFile) {
                   [formData appendPartWithFileData:uploadFile 
                                               name:@"file" 
                                           fileName:@"photo.jpg" 
                                           mimeType:@"image/jpeg"];
               }
           }];

AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest: apiRequest];
[operation setUploadProgressBlock:uploadProgressBlock];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //success!
    completionBlock(responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //failure :(
    completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
}];

[operation start];
} 
```

很抱歉代码部分很长，但我真的不知道如何解决这个错误。我尝试使用 NSOperationQueue 但这也给出了同样的错误。

我在互联网上搜索过，发现 CFNetwork 中的错误 303 意味着无法解析 HTTP 响应。难道问题出在网络服务上？如果是这样，我还可以提供我处理上传文件的 php 部分:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:07:31.103

我认为这是 AFNetworking 中的一个错误。我遇到了完全相同的问题，但升级到 2012 年 8 月 24 日下载的最新版本解决了我的问题。

# android - 强制 HTC Evo 3D 中的 Android 媒体播放器显示 3D

> ID：11602668
> 
> 赞同：2
> 
> 时间：2012-07-22T17:59:08.483
> 
> 标签：android, 3d, android-mediaplayer, stereo-3d, htcsense

我想强制 Evo 3D Mediaplayer 将任何视频显示为 3D。问题是据说 HTC Evo 3D 正在变成 mp4 文件上带有 FPA SEI 标志的 3D。有没有办法以编程方式引入该标志？

我想找到它被覆盖的位置并手动将其关闭。我试图弄清楚它在 Android 媒体播放器中的读取位置（[http://www.netmite.com/android/mydroid/frameworks/base/media/java/android/media/MediaPlayer.java](http://www.netmite.com/android/mydroid/frameworks/base/media/java/android/media/MediaPlayer.java)）；但是，我找不到。我的猜测是 HTC 实现了另一个媒体播放器，它在 mp4 标头中查找 SEI FPA 标志。

有没有人可以帮助我解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:51:07.003

最好的办法是将您的 3D SBS 视频上传到 Youtube，然后让 Youtube 将其更改为 3D。完成后，等待 20 分钟，然后通过 Evo 3D 在 Youtube 上观看 3D 视频。如果可行，请继续使用 Internet 下载管理器从 Youtube 网站下载它。现在，如果您将该视频放在 SD 卡上，它应该可以直接以 3D 模式播放。

# iphone - 如何使用动画显示日历

> ID：11602672
> 
> 赞同：1
> 
> 时间：2012-07-22T17:59:18.450
> 
> 标签：iphone, core-animation

我可以在使用名为的属性单击按钮时成功显示日历`alpha`。显示我正在做的日历

```
calendar.alpha = 5 
```

通过点击隐藏，我正在做

```
calendar.alpha = 0 
```

这只是非常简单的事情。我正在寻找一些动画来显示和隐藏日历。

这是一些图片

![在此处输入图像描述](../Images/6e928e21391b4993a5bdf2cd5b972d64.png)

上面是文本字段和一个按钮。当您单击一个按钮时，日历将显示如下 ![在此处输入图像描述](../Images/a984931f896134bf36d60a386bdd1b9d.png)

**问题 ：**

当您浏览相册中的照片时，如何制作动画效果，使其看起来像。如果您不喜欢其中一张照片，请单击右下角`a trash`的图标，该照片将滑入`a trash`. 所以在这个例子中，当我点击按钮时，我的日历会从一个按钮慢慢显示并最终完全显示到屏幕上

*编辑：我认为在 iphone 中这种效果称为**suckEffect**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:54:56.753

Core Animation 无法做到这种*吸吮效果。*要实现这一目标，您将需要 OpenGL。

虽然这将是一个很酷的效果，但它可能不值得。不过，我认为您可能希望将标签“opengl”添加到您的问题中。这可能会引起一些 OpenGL 开发人员的注意，他们可能会提供更具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:25:39.787

不透明度的另一件事值从 0 到 1 不等，您使用 5 可以，但 1 是最大值。

您还可以使用 jquery 函数，如 .show() 、 .hide() 或 .toggle() 方法来显示隐藏您的日历和动画[http://api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

# android - 如何存储从 sqlite 数据库中获取的对象以进行列表视图显示？

> ID：11602675
> 
> 赞同：1
> 
> 时间：2012-07-22T17:59:46.813
> 
> 标签：android, sqlite

我想从我的 sqlite 数据库中查询所有行，然后将其传递给列表视图以显示在我的应用程序上。

这是代码（我确实有一个 student.java 实现）：

```
StudentDAO.java:

public void add(Student student)
    {
        db = helper.getWritableDatabase();
        db.execSQL("insert into t_student (sid, name, age) values (?,?,?)", new Object[]
                { student.getId(), student.getName(), student.getAge()}
                );
    }

public Student findAll()
    {
        db = helper.getWritableDatabase();
        Cursor cursor = db.rawQuery("select sid, name, age from t_student", (String[]) new Object() 
                );

        if(cursor.moveToNext())
            return new Student(cursor.getInt(cursor.getColumnIndex("sid")), cursor.getString(cursor.getColumnIndex("name")), cursor.getShort(cursor.getColumnIndex("age")));
        return null;
    }

MultiList.java:

public class MultiList extends ListActivity {

    ListView lv;
    SimpleAdapter sd;

    StudentDAO dao = new StudentDAO(MultiList.this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

Student Alex = new Student();
        chan.setId(1);
        chan.setAge((short) 18);
        chan.setName("Alex ");
        dao.add(Alex );

        Student Queena = new Student();
        chan2.setId(2);
        chan2.setAge((short) 19);
        chan2.setName("Queena");
        dao.add(Queena);

        Student Tom = new Student();
        chan3.setId(3);
        chan3.setAge((short) 20);
        chan3.setName("Tom");
        dao.add(Tom);

            dao.findAll();////how to store them??? 
```

如您所见，现在，在我将所有三个学生对象都插入到我的数据库中之后，我如何读取并存储它们？因为我的 findAll() 方法返回一个学生对象。抱歉，这可能是一个简单的问题，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:11:21.920

有两个简单的选项，在我看来，最好的方法是使用 CursorAdapter 并通过查询传递游标，在这种情况下，listView 将仅加载显示的元素，并在您滚动时从数据库中动态加载。

或者您可以为自己执行查询并将对象存储在数组中以使用 SimpleCursorAdapter 显示。

# android - Android：ListView OnItemClick 显示 Toast

> ID：11602679
> 
> 赞同：1
> 
> 时间：2012-07-22T18:00:36.437
> 
> 标签：android, json, listview, toast

我正在开发一个 Android 应用程序，但我被困在一件小事上。

我创建了一个动态 ListView，它从我的数据库中提取数据。但是现在，如果我单击 ListView 中的特定行，它应该会向我显示带有 ID 的祝酒词。

但我似乎无法让它工作..

有人可以帮帮我吗？

干杯，帕特里克

这是我的代码

```
package wvv.zondag.app;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class WedstrijdenJSONParser extends ListActivity{

/** Called when the activity is first created. */
@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wedstrijdenlist);

    setListAdapter(new ArrayAdapter(
            this,android.R.layout.simple_list_item_1,
            this.populate()));
}

private ArrayList<String> populate() {
    ArrayList<String> items = new ArrayList<String>();

    try {
        URL url = new URL
        ("http://www.wvvzondag2.nl/android/fillwedstrijden.php");
        HttpURLConnection urlConnection =
            (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.connect();
        // gets the server JSON data
        BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream()));
        String next;
        while ((next = bufferedReader.readLine()) != null){
            JSONArray ja = new JSONArray(next);

            for (int i = 0; i < ja.length(); i++) {
                String var = "";
                JSONObject jo = (JSONObject) ja.get(i);
                var = jo.getString("Tijd");
                var = var+" - "+jo.getString("Wedstrijd");
                items.add(var);
                }
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return items;
} 
```

}

* * *

抱歉回复晚了，感谢这段代码，但现在它显示的内容与列表视图显示的内容完全相同，Tijd(Time) 和 Wedstrijd(Match) 但我想在单击时查看 ID列表视图项

我的字段名为 ProgrammaID 我怎样才能设法让那个显示在吐司中？也许我需要先在我的 JSONArray 中调用它？

干杯，帕特里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T18:11:18.613

将此添加到您的代码中

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id){
    super.onListItemClick(l, v, position, id);
             Toast.makeText(getApplicationContext(),
            ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
               /*v passed in as an argument is the view in your listitem which is clicked.If you want to get access to the adapter just use this.getListAdapter().*/

} 
```

# c - 为什么这段代码会引发段错误

> ID：11602680
> 
> 赞同：-4
> 
> 时间：2012-07-22T18:00:37.903
> 
> 标签：c, segmentation-fault

```
void f(int **m, int w, int h )  
{       
int i,j;

    for(i=0;i < w ; i++)  
    {    
      for(j=0;j<h;j++)
      {
         printf("%5d", m[i][j]); //  *( *(m + i) + j ) ??
      }

    printf("\n");
    }
    return;
}

int main()
{

int a[3][3]={{1,2,3},{4,5, 6},{7,8,9}};

f(a,3,3);

} 
```

此代码正在尝试打印二维矩阵，但出现分段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:08:16.680

你的矩阵不是类型`int **`，它的类型是`int[3][]`。

`int **`表示指向指针数组的指针。你没有一个指针数组，你有一个 3 整数数组的数组。这不是一回事。

如果您愿意，您可以更改代码以考虑到这一点。

```
int *addr = (int *)m;  // This is the address of m[0][0] 
```

要访问 m[i][j]，请使用：

```
int elem = addr[i*h+j]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:10:50.330

指向指向 an 的指针与`int`数组不同`3x3`。

您应该以不同的方式声明您的函数，或者以不同的方式准备您的数组：

改成`f`这样：

```
void f(int m[][3], int w, int h ) 
```

或者像这样准备数组：

```
int r0[] = {1,2,3};
int r1[] = {4,5,6};
int r2[] = {7,8,9};
int *a[] = {r0,r1,r2};
f(a,3,3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:11:16.897

```
int a[3][3]={{1,2,3},{4,5, 6},{7,8,9}}; 
```

将其传递给`f`不起作用，的类型与期望`a`的类型不兼容。`f`当传递给一个函数时，`a`被转换为一个类型的指针`int (*)[3]`，指向三个数组的指针`int`。

`f`需要一个指向 的指针`int`。你的编译器应该告诉你不兼容的类型。

发生的是未定义的行为，可能在取消引用`m`in时`f`，数组内容的第一个`sizeof(int*)`字节被解释为指针并跟随，导致访问未分配的内存。

# objective-c - 没有错误信息的异常中断

> ID：11602682
> 
> 赞同：1
> 
> 时间：2012-07-22T18:01:40.650
> 
> 标签：objective-c, exception, core-data, nsmanagedobjectcontext

此代码因非致命异常而中断，但未提供重要的错误信息。这是在更新核心数据实体之后。

```
-(void) commitBackgroundChangesAndNotify:(NSString *)notification{
    NSLog(@"enter commit");

    if([self.backgroundMOC hasChanges]) {

        NSError *error = nil;
        if (!([self.backgroundMOC save:&error])){     // breaks here
            NSLog(@"Unresolved Error %@ %@", error, [error userInfo]);
        } 

//        [[NSNotificationCenter defaultCenter] postNotificationName:notification object:nil];

    }   

    NSLog(@"exit commit");

} 
```

无论我是否启用了断点，它都会在调试器中中断。如果我在没有调试器的情况下运行它，它似乎运行正常。

此代码在 NSOperation 期间运行多次。在操作过程中，中断发生在第二次调用保存时（意味着对上下文的更改已经成功保存了一次。）我验证了 backgroundMOC 是在进行更改和提交的同一线程中创建的，这是 NSOperation 的线程。我还查看了 moc insertObjects、updatedObjects 和 deletedObjects 的计数。这些看起来都对。

调用代码如下所示：

```
- (void) calculateBoundsForSearch {
    NSArray *searchesArray = [currentSearchEntity.resultOfSearch allObjects];

    MyMKMapBounds bounds = [MapController calculateBoundsForArrayOfSearchResults:searchesArray];

    currentSearchEntity.minLatitude = [NSNumber numberWithFloat:bounds.min.latitude];
    currentSearchEntity.minLongitude = [NSNumber numberWithFloat:bounds.min.longitude];
    currentSearchEntity.maxLatitude = [NSNumber numberWithFloat:bounds.max.latitude];
    currentSearchEntity.maxLongitude = [NSNumber numberWithFloat:bounds.max.longitude];

    [dataInterface commitBackgroundChangesAndNotify:@"bounds"];
} 
```

这由两个对象调用。一方面，也不例外。

控制台中的唯一输出是：

```
2012-07-22 10:47:13.790 myApp[46578:17e07] enter commit

Catchpoint 7 (exception thrown).2012-07-22 10:47:21.160 myApp[46578:17e07] exit commit 
```

这是一个非致命的例外。我注意到的一件我不明白的事情是，当它中断时，我必须单击“继续”两次才能通过它。`Catchpoint 7 (exception thrown).`第一次单击后会显示该消息。

我试图弄清楚我手头有哪些工具来确定异常的原因。当然，任何有关导致异常的原因的想法也会有所帮助。

# entity-framework - 播种数据库错误，外键问题

> ID：11602683
> 
> 赞同：1
> 
> 时间：2012-07-22T18:01:50.980
> 
> 标签：entity-framework, ef-code-first

我已经使用 POCO 构建了我的模型。当我去播种我的数据库时，我得到：

无法确定“CSP.Models.Type_Color”关系的主体端。多个添加的实体可能具有相同的主键

这是有问题的模型：

```
public class Type
{
    [Key]
    [ScaffoldColumn(false)]
    public int TypeId { get; set; }

    [Required(ErrorMessage = "A Type Name is Required")]
    [Display(Name="Type")]
    public string Name { get; set; }

    public int ColorId { get; set; }
    public bool Other { get; set; }

    //Navigations
    [ForeignKey("ColorId")]
    public virtual Color Color { get; set; }
    public virtual List<Tools> tools { get; set; }

}

public class Color
{
    [Key]
    [ScaffoldColumn(false)]
    public int ColorId { get; set; }

    [Required(ErrorMessage = "A name is required")]
    public string Name { get; set; }

    public string Description { get; set; }

    //navigation
    public virtual List<Type> Types { get; set; }
} 
```

我在阅读建议后所做的大部分标记。

我收到错误的种子代码在这里：

```
var colors = new List<Color>
        {
            new Color{Name="Red"},
            new Color{Name="White"}
        };

            var types = new List<Type>
        {
            new Type{ Name="Hammer", Color = colors.Where(ws => ws.Name=="Red").Single()},
            new Type{ Name= "Electric", Color = colors.Where(ws => ws.Name=="Red").Single()}
        };

new List<Tool>
        {
            new Wine{ Maker= Maker.Single(v => v.Name=="HammerCo"), Type= types.Single(wt => wt.Name=="hammer")},
        }
        }.ForEach(a => context.Tools.Add(a));
            context.SaveChanges(); 
```

我还尝试将每个值添加到上下文中，然后保存。尝试保存类型实体后出现此错误：

[System.Data.SqlClient.SqlException] = {"INSERT 语句与 FOREIGN KEY 约束 \"Type_Color\" 冲突。冲突发生在数据库 \"TestTools\"，表 \"dbo.Colors\"，列 'ColorId '。\r\n语句已终止。"}

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T21:42:34.957

发生的事情是您的对象都具有其主键的默认 int 值 (0)。当您将它们添加到上下文中时，EF 会检测到这一点并引发错误（相同类型的两个对象不能具有相同的键，在这种情况下为 0。我假设您在数据库中的主键字段设置为 IDENTITY 列并且将插入时自动递增 +1。这听起来可能很奇怪，但您需要为您的对象提供占位符 ID，这些 ID 在插入时将替换为 IDENTITY 值。

```
new Color{ColorId = 1, Name="Red"},
new Color{ColorId = 2, Name="White"}
new Type{TypeId = 1, Name="Hammer", ...}
new Type(TypeId = 2, Name="Electric", ...} 
```

# xslt - 添加 XSL 命名空间后没有元素

> ID：11602685
> 
> 赞同：0
> 
> 时间：2012-07-22T18:02:11.037
> 
> 标签：xslt

对于这个简单的（我希望的）问题，我们将不胜感激。向`xsl:for-each`此 XML 文档添加命名空间后找不到任何元素：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <?xml-stylesheet type="text/xsl" href="cdsort.xsl"?>
    <catalog xmlns="http://www.mycompany.com/test" >
      <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
      </cd>
      <cd>
        <title>Tupelo Honey</title>
        <artist>Van Morrison</artist>
      </cd>
    </catalog> 
```

这是 XSL 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
    xmlns:vv="http://www.mycompany.com/test"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <html>
      <body>
    <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="vv:catalog/cd">
        <tr>
          <td><xsl:value-of select="title" /></td>
          <td><xsl:value-of select="artist" /></td>
        </tr>
      </xsl:for-each>
    </table>
      </body>
    </html>
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:15:09.860

您已经为整个文档设置了默认命名空间，因此 xpath 中的子元素也需要一个前缀：

```
<xsl:for-each select="vv:catalog/vv:cd">
  <tr>
    <td><xsl:value-of select="vv:title" /></td>
    <td><xsl:value-of select="vv:artist" /></td>
  </tr>
</xsl:for-each> 
```

# javascript - Facebook登录验证码调用循环函数两次

> ID：11602687
> 
> 赞同：0
> 
> 时间：2012-07-22T18:02:20.863
> 
> 标签：javascript, facebook-graph-api, authentication

我用来登录用户的 Facebook Graph API 代码调用了我的`getfriends()`循环函数两次。如何更改代码以使循环函数仅调用一次，同时仍允许处于各种状态的用户登录？

```
 <html xmlns:fb="https://www.facebook.com/2008/fbml">
<head> 
<title>FB App</title> 
<script> 
var userList = [];
    userCount = 0;

function getfriends () {
    console.log("getFriends");
    var url = "/me/friends";
    FB.api(url, function (response) {
        userList = userList.concat(response.data);
        userCount = response.data.length;
        compareAllFriends();
    });
}

function compareAllFriends () {
    console.log("compareAllFriends");
    var i = 0, l = 10, userID;
    for (; i < l; i += 1) {
        userID = userList[i].id;
        compareFriendsWith (i, userID);
    }
}
function compareFriendsWith (i, id) {
    console.log("compareFriendsWith", i, id);
}

</script> 
</head> 
<body>
<div id="fb-root"></div>
<p align="right"><button id="fb-auth">Login</button></p>
<script type="text/javascript">// <![CDATA[
window.fbAsyncInit = function() {
  FB.init({ appId: 'APP_ID', 
        status: true, 
        cookie: true,
        xfbml: true,
        oauth: true});

  function updateButton(response) {
    var button = document.getElementById('fb-auth');

    if (response.authResponse) {
      //user is already logged in and connected
      FB.api('/me', function(response) {
        getfriends();
        button.innerHTML = 'Logout';
      });
      button.onclick = function() {
        FB.logout();
      };
    } else {
      //user is not connected to your app or logged out
      button.innerHTML = 'Login with Facebook';
      button.onclick = function() {
        FB.login(function(response) {
      if (response.authResponse) {
            FB.api('/me');
          } else {
            //user cancelled login or did not grant authorization
          }
        }, {scope:''});     
      }
    }
  }

  // run once with current status and whenever the status changes
  FB.getLoginStatus(updateButton);
  FB.Event.subscribe('auth.statusChange', updateButton);    
};

(function() {
  var e = document.createElement('script'); e.async = true;
  e.src = document.location.protocol 
    + '//connect.facebook.net/en_US/all.js';
  document.getElementById('fb-root').appendChild(e);
}());
// ]]></script>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:08:57.350

看来问题可能`updateButton()`是运行了不止一次，然后又调用`getfriends()`了不止一次。

从[Facebook docs](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)来看，既然你设置`status: true`了`init()`，你不需要这一行：

```
 FB.getLoginStatus(updateButton); 
```

这将在您调用的下一行中自动发生`subscribe()`。所以这可能就是你看到`getfriends()`被执行两次的原因。

如果这不起作用，一个快速但不太优雅的解决方法可能是有一个变量`hasfriends`，将其初始化为`false`，检查其内部的值`getfriends()`，如果它是 ，`getfriends()`则不执行任何操作`true`。如果是`false`，请将其设置为`true`in ，`getfriends()`以便 in 中的主代码`getfriends()`仅运行一次。

# php - PHP MySQL慢查询访问

> ID：11602698
> 
> 赞同：1
> 
> 时间：2012-07-22T18:04:08.693
> 
> 标签：php, mysql, performance

我的数据库中有一个表：

![在此处输入图像描述](../Images/9fec67086706eb0c316f5a6b022938bc.png)

我正在使用 MySQL 插入/更新/创建信息，但是执行查询所需的时间很慢，例如：

首先，当用户运行我的应用程序时，它会通过从数据库中检索所有 IP 来验证他们是否可以使用它

```
SELECT IP FROM user_info 
```

如果 IP 在数据库中，则使用 while 循环执行另一个查询：

```
"SELECT Valid FROM user_info WHERE IP='".$_SERVER['REMOTE_ADDR']."'"" 
```

如果 Valid 为 1，那么他们可以使用它，否则他们不能使用，但是如果在 db 中找不到他们的 IP，它会使用为他们创建一个新条目

```
"INSERT INTO user_info (IP,First) VALUES ('".$_SERVER['REMOTE_ADDR']."','".date("Y/m/d") ."')")" 
```

现在这个第一个脚本已经完成它访问另一个 - 这个应该每分钟更新一次数据库但是我不认为我现在可以做到这一点；更新查询是这样的：

```
"UPDATE user_info SET Name='".$Name."', Status='".$Status."', Last='".$Last."', Address='".$Address."' WHERE IP='".$_SERVER['REMOTE_ADDR']."'")" 
```

总之，平均需要**2.2 秒，并且表 atm 中只有 1 行**

我的问题是如何加快 mysql 查询？我已经阅读了索引以及它们如何帮助提高性能，但我不完全了解如何使用它们。关于这个话题的任何启示都会有所帮助。

小块蛋糕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:06:10.677

*随着站点的增长，索引将变得非常重要，但是当您的表中只有一行*时它们将无济于事，并且这不是您的查询需要这么长时间的原因。您的数据库似乎存在某种基本问题。也许这是一个延迟问题。

尝试从一些更简单的查询开始，`SELECT * FROM users LIMIT 1`甚至只是`SELECT 1`看看你是否仍然得到糟糕的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:13:37.630

查询次数越少，系统的延迟就越小。尝试合并对同一张表进行的查询。例如，您的第二个和第三个查询可以合并，您可以执行

```
INSERT INTO user_info ...... WHERE Valid=1 AND IP= ... 
```

检查受影响的行数以了解是否添加了新行。

此外，不要在两者之间的任何时候打开/关闭您的 sql 连接。建立新连接的开销可能很高。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T18:07:40.193

你可以制作IP主键和索引

# hadoop - Hadoop - “代码在数据附近移动以进行计算”

> ID：11602699
> 
> 赞同：1
> 
> 时间：2012-07-22T18:04:21.130
> 
> 标签：hadoop, mapreduce

我只是想澄清这句话“代码在数据附近移动以进行计算”，

1.  这是否意味着开发人员编写的所有 java MR 都部署到集群中的所有服务器上？

2.  如果 1 为真，如果有人更改了 MR 程序，它是如何分发到所有服务器的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:51:07.127

1.  Hadoop 将 MR 作业的 jar 放入 HDFS - 它的分布式文件系统。需要它的任务跟踪器将从那里获取它。所以它分发到一些节点，然后由实际需要它们的节点按需加载。通常这需要意味着节点将处理本地数据。

2.  Hadoop 集群对于作业来说是“无状态的”。每次工作都被视为新事物，并且不使用先前工作的“副作用”。

实际上，当要在大型集群上处理少量文件（或准确地说是拆分）时，优化仅将 jar 发送到数据确实驻留的少数主机可能会在一定程度上减少作业延迟。我不知道是否计划了这样的优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:59:24.220

在 hadoop 集群中，您使用相同的节点进行数据和计算。这意味着您的 hdfs 数据节点设置在任务跟踪器用于计算的同一集群上。因此，现在当您执行 MR 作业时，作业跟踪器会查看您的数据的存储位置。而在其他计算模型中，数据不存储在同一个集群中，您可能必须在某个计算节点上进行计算时移动数据。

开始工作后，所有地图功能都会拆分您的输入文件。执行这些映射函数，以便输入文件的拆分更接近它们，或者换句话说，在同一个机架中。这就是我们所说的计算更接近数据的意思。

因此，为了澄清您的问题，每次运行 MR 作业时，其代码都会复制到所有节点。因此，如果我们更改代码，则会将新代码复制到所有节点。

# iphone - 有没有办法在此设置中获取导航栏中的标准后退按钮？

> ID：11602700
> 
> 赞同：0
> 
> 时间：2012-07-22T18:04:39.523
> 
> 标签：iphone, ios, xcode, uinavigationbar, back-button

我有一个基于标签栏的应用程序。但是用户可以从一个屏幕转到没有标签栏的更详细的视图。

详细屏幕顶部有一个导航栏，右侧有一个简单的按钮，作为导航栏的一部分，它可以工作。（我在 IB 的 Bar Button Item 中创建了导航栏和右键，并将其附加到网点）

然而，由于我必须从这个屏幕返回，所以我喜欢使用标准导航栏添加 STANDARD 后退按钮。（我可以在 IB 中手动添加它，但我没有现成的标准图像，并且认为使用标准会“更智能”）

这是我在 SettingsVC1 中创建详细视图（即 SettingsVC2）的地方：

```
SettingsVC2 *settingsVC2 = [[SettingsVC2 alloc] initWithNibName:@"SettingsVC2" bundle:nil selectedTCNumber:tcNumber];
settingsVC2.delegate = self;
UIBarButtonItem *temporaryBarButtonItem = [[UIBarButtonItem alloc] init];
temporaryBarButtonItem.title = @"Back";
settingsVC2.navigationItem.backBarButtonItem = temporaryBarButtonItem;
settingsVC2.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:settingsVC2 animated:YES completion:nil]; 
```

虽然导航栏本身出现在 SettingsVC2 中，但其中没有后退按钮。

这是 SettingsVC2 本身的代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil selectedNumber: (NSInteger) numberx
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.tabBarItem.image = [UIImage imageNamed:@"settings"];
        self.view.backgroundColor = [UIColor whiteColor];
        self.tableView.opaque = TRUE;

        navBar.tintColor = [UIColor colorFromRGBIntegers:W_COLOR_R green:W_COLOR_G blue:W_COLOR_B alpha:W_COLOR_A];
        navBar.topItem.title =  NSLocalizedString(@"Settings2", @"Settings2");

        UIBarButtonItem *temporaryBarButtonItem = [[UIBarButtonItem alloc] init];
        temporaryBarButtonItem.title = @"Back";
     /*
        self.navigationItem.backBarButtonItem = temporaryBarButtonItem;
        [self.navigationItem.backBarButtonItem setEnabled:YES];
        [self.navigationItem.backBarButtonItem setStyle:UIBarButtonItemStyleDone];
      */
        navBar.topItem.backBarButtonItem = temporaryBarButtonItem;
    }
    return self;
} 
```

这段代码和注释掉的代码都不会出现后退按钮。

**是否有“标准”方式来获取后退按钮（在我的情况下不使用 UINavigationController）还是我必须在 IB 中手动添加它并获取适当的背景图像？**

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:33:05.287

您必须将 backbuttonItem 添加到第一个视图，而不是第二个视图。这当然是非常令人困惑的。无论如何，我使用这两种方法来设置和清除返回按钮标题：

```
- (void)defaultBackButtonTitle
{   
    UIBarButtonItem *temporaryBarButtonItem = [UIBarButtonItem new];
    [temporaryBarButtonItem setTitle:@"Back"];
    self.navigationItem.backBarButtonItem = temporaryBarButtonItem;
}

- (void)clearBackButtonTitle
{   
    self.navigationItem.backBarButtonItem = nil;
} 
```

当您按下想要返回按钮的 viewController 时调用第一个，当您获得 viewWillAppear 时调用第二个（在第一个顶视图控制器中）。

# c# - 将 MVC-3 项目转换为 Windows azure

> ID：11602703
> 
> 赞同：2
> 
> 时间：2012-07-22T18:05:23.030
> 
> 标签：c#, asp.net-mvc-3, azure

我在 MVC-3 中有一个项目，我将在 Windows Azure 项目中进行转换并将使用 blob 存储。

我的问题是我的项目中有一些用户特定的信息，这些信息存储在 ASP.NET 配置文件和数据库表中。喜欢特定用户和其他人上传的图像名称。因此，在更改时，我们还将删除此配置文件和数据库表信息。或者保留这些信息，或者只是更改图像和其他数据的保存位置（意味着从本地硬盘到 Windows Azure 数据中心。）

对不起，如果这是一个奇怪的问题，但我在 Azure 中很新。那么任何机构都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:27:40.263

最简单的方法是使用 SQL 数据库（以前称为 SQL Azure）并编辑指向 SQL 数据库（来自本地 SQL 数据库）的连接字符串。您还需要将 SQL 数据库架构/数据从本地迁移到 SQL 数据库。这样，您的迁移将更加容易，并且您无需对代码进行任何重大更改。

如果您决定使用 Azure 表存储，您将对代码进行重大更改以将用户特定数据存储到键值对类型的存储（即 Azure 表存储）中，具体取决于您的表的复杂程度，这可能是一个选择，也可能不是。

正如您提到的，您在 ASP.NET 配置文件/数据库表中有用户特定信息，但是我认为您的应用程序还需要用户上传图像，因此这也是迁移应用程序时的重要因素。在将 MVC3 应用程序迁移到 Windows Azure 云服务时，您需要将保存在基于本地磁盘的存储上的图像或任何静态内容移动到 Windows Azure Blob 存储（持久网络存储），因此代码更改将需要读取和写入数据到并从 Azure Blob 存储，在本地计算机存储的 lpace 中。这也是您代码中必须更改的代码，否则用户上传的图像数据将不会保留，并且如果由于其他几个原因重新映像 VM，则容易丢失。

其他人可能有不同的想法，但我个人更喜欢使用 SQL 数据库作为降低迁移过程中复杂性的选择，因为您几乎可以通过几行代码更改将数据库表迁移到 SQL 数据库。

# android - 确保通知字换行

> ID：11602713
> 
> 赞同：1
> 
> 时间：2012-07-22T18:06:23.017
> 
> 标签：android, android-notifications

我有一个有趣的（至少对我而言）问题：

我有一个通知，我会根据需要在我的应用程序中弹出。在我的 Galaxy S II 上一切正常（sprint 的 epic touch 4g，因为那里有不同型号的 S II，我觉得我需要具体说明），并且通知字换行没有问题 - 例如：

```
this is a notification, but it's too long, 
so it'll show this second line on it's own. 
```

令我惊恐的是，我意识到有些安卓手机没有自动换行，实际上只是在屏幕末尾剪切了我的通知，所以上面的消息会显示为：

```
this is a notification, but it's too long, 
```

显然，这是行不通的。那么，我该怎么做才能确保始终显示整个消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:31:16.723

**改写**

正如我们之前讨论过的，您希望强制通知的`tickerText`自动换行。一种方法是将文本分成适当长度的行并为每一行发送通知：

```
public class Example extends Activity {
    public class AlarmReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            Log.v("Example", "Alarm received");
            sendNotification();
        }
    }

    AlarmManager alarmManager;
    NotificationManager notificationManager;

    AlarmReceiver alarmReceiver = new AlarmReceiver();
    Notification notification = new Notification(); 
    Intent notificationIntent;
    PendingIntent pendingIntent;
    int tickerIndex = 0;
    List<String> tickerTexts = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        // Determine the screen width and density, split tickerText appropriately
        String tickerText = "A tickerText that is long enough to cause a word wrap in portrait.";
        tickerTexts.add(tickerText.substring(0, 35));
        tickerTexts.add(tickerText.substring(35));

        notificationIntent = new Intent(this, Example.class);
        pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

        notification.flags = Notification.FLAG_ONLY_ALERT_ONCE;
        notification.icon = android.R.drawable.star_on;

        sendNotification();
        registerReceiver(alarmReceiver, new IntentFilter("Generic"));
    }

    @Override
    protected void onDestroy() {
        unregisterReceiver(alarmReceiver);
        super.onDestroy();
    }

    public void sendNotification() {
        Log.v("Example", "Send Notification " + tickerIndex);

        notification.tickerText = tickerTexts.get(tickerIndex);
        notification.setLatestEventInfo(this, "Title", "Text " + tickerIndex, pendingIntent);
        notificationManager.cancel(0);
        notificationManager.notify(0, notification);

        tickerIndex++;
        if(tickerIndex < tickerTexts.size()) {
            Log.v("Example", "Setting up alarm");
            PendingIntent alarmPending = PendingIntent.getBroadcast(this, 0, new Intent("Generic"), 0);
            alarmManager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime() + 1000, alarmPending);
        }
    }
} 
```

但是你可以看到我跳过了设置的一个组成部分：我*假设*了适合的文本长度，我没有计算它。为了确定合适的断点，您需要计算屏幕的宽度、字体的缩放大小和密度。您还需要考虑“！！！” 可能比“www”短，具体取决于字体，并且用户可以在横向和纵向之间切换......您可以查看源代码以了解通用 Android 如何分解tickerText。

无论如何，强制tickerText 自动换行可能比压缩原始字符串或向“非包装”电话制造商发送愤怒的信件更复杂。

# playn - 在我的 PlayN 游戏的 HTML 版本中，如何可靠地加载字体以便在启动时显示文本？

> ID：11602718
> 
> 赞同：1
> 
> 时间：2012-07-22T18:06:55.383
> 
> 标签：playn

我正在使用 PlayN 的 v1.3.1。此问题在以下 google groups 线程中进行了讨论，但我不确定如何实施所提出的建议：

[https://groups.google.com/forum/?fromgroups#!topic/playn/kiE2iEYJqM0](https://groups.google.com/forum/?fromgroups#!topic/playn/kiE2iEYJqM0)

也许有人可以提供一些示例代码。目前，我正在遵循此答案中[HTML 链接中引用的技术：](http://code.google.com/p/playn-samples/source/browse/showcase/html/src/main/webapp/Showcase.html)

[https://stackoverflow.com/a/9116829/1093087](https://stackoverflow.com/a/9116829/1093087)

我的问题：在我的游戏主屏幕上，我使用加载的字体显示了一些文本。在 Java 版本中运行良好。但是，在 HTML 版本中，最初不会显示文本。在下一个屏幕上，或者如果我稍后返回主屏幕，文本会正确显示。所以我得出的结论是，这是由于 google groups 线程中讨论的字体的异步加载造成的。

我的补救措施是添加一个启动画面，显示几秒钟的图像，让字体有机会加载，然后重定向到带有文本的屏幕。但是无论我设置延迟多长时间，文本仍然不显示。

这是加载我的游戏和字体的 HTML 文件：

```
<!DOCTYPE html>
<html>
  <head>
    <title>mygamePlayn</title>
    <!-- fonts -->
    <style>
      @font-face {
        font-family: "DroidSans-Bold";
        src: url(mygame/fonts/DroidSans-Bold.ttf);
      }
      @font-face {
        font-family: "UbuntuMono";
        src: url(mygame/fonts/UbuntuMono-Bold.ttf);
      }
    </style>
  </head>
  <body bgcolor="black">
    <script src="mygame/mygame.nocache.js"></script>
  </body>
</html> 
```

这是我的核心 Java 代码，它生成最初不显示的文本（但可以正常工作）：

```
public static CanvasImage generateTextImage(String text, String fontName,
    Integer fontSize, Integer fontColor, Style fontStyle, Integer padding) {
    Font font = graphics().createFont(fontName, fontStyle, fontSize);
    TextFormat fontFormat = new TextFormat().withFont(font).withTextColor(fontColor);

    TextLayout layout = graphics().layoutText(text, fontFormat);
    Integer width = (int) layout.width() + padding * 2;
    Integer height = (int) layout.height() + padding * 2;

    CanvasImage textImage = graphics().createImage(width, height);
    textImage.canvas().drawText(layout, padding, padding);

    return textImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:49:04.467

我想我终于找到了解决问题的方法。它需要以以下有点迂回的方式使用[Google WebFont Loader ：](https://developers.google.com/webfonts/docs/webfont_loader)

1) 我将字体（在本例中为[DroidSans-Bold](http://www.google.com/webfonts#UsePlace%3ause/Collection%3aDroid+Sans)、[Inconsolata](http://www.google.com/webfonts#UsePlace%3ause/Collection%3aInconsolata)和[UbuntuMono-Bold](http://www.google.com/webfonts#UsePlace%3ause/Collection%3aUbuntu+Mono)）保存在我的 PlayN 项目`resources/fonts`目录中。

2) 在`resources/css`中，我添加了一个`fonts.css`样式表，在其中添加了`@font-face`我本地保存的字体的定义。我的`fonts.css`文件：

> ```
> @font-face {
>     font-family: DroidSans;
>     src: url('../fonts/DroidSans-Bold.ttf');
> }
> @font-face {
>     font-family: Inconsolata;
>     src: url('../fonts/Inconsolata.ttf');
> }
> @font-face {
>     font-family: UbuntuMono;
>     src: url('../fonts/UbuntuMono-Bold.ttf');
> }
> @font-face {
>     font-family: UbuntuMono;
>     font-weight: bold;
>     src: url('../fonts/UbuntuMono-Bold.ttf');
> } 
> ```

注意：我对字体系列名称使用的值与我在 PlayN 代码中用于字体名称的值相同。例如，我在 PlayN 代码中加载 DroidSans 字体，如下所示：

```
Font font = graphics().createFont("DroidSans", fontStyle, fontSize); 
```

3) 然后我在游戏的 html 文件 ( `MyGame.html`) 中使用 Google WebFont Loader 在游戏加载之前加载字体。我的`MyGame.html`文件：

> ```
> <!DOCTYPE html>
> <html>
>   <head>
>     <title>MyGame</title>
>     <style>
>       body {
>         background-color:black;
>         color:white;
>       }
>     </style>
> 
>     <!-- Google AJAX Libraries API -->
>     <script src="http://www.google.com/jsapi"></script>
>     <script>
>         google.load("jquery", "1.4.2");
>         google.load("webfont", "1");
> 
>       WebFontConfig = {
>         custom: { families: ['DroidSans', 'UbuntuMono'],
>           urls: [ 'mygame/css/fonts.css' ]
>         },
>         loading: function() {
>           console.log("loading fonts");
>         },
>         fontloading: function(fontFamily, fontDescription) {
>           console.log("loading font: " + fontFamily + "-" + fontDescription);
>         },
>         fontactive: function(fontFamily, fontDescription) {
>           console.log(fontFamily + "-" + fontDescription + " is active");        
>         },
>         fontinactive: function(fontFamily, fontDescription) {
>           console.log(fontFamily + "-" + fontDescription + " is INACTIVE");
>         },
>         active: function() {
>           console.log("font-loading complete");
>         },
>       };
> 
>       google.setOnLoadCallback(function() {
>         console.log("Google onLoad callback");
>         WebFont.load(WebFontConfig);
>       });
>     </script>
> 
>   </head>
> 
>   <body>
>     <div id="playn-root">
>         &nbsp;
>         <script src="mygame/mygame.nocache.js"></script>
>     </div>
>   </body>
> 
> </html> 
> ```

控制台登录`WebFont.load`回调有助于验证字体是否在 PlayN 游戏代码之前成功加载。

我更愿意将 WebFont Loader 与通过[googleapis.com](http://fonts.googleapis.com/css?family=Droid%20Sans)提供的字体一起使用，但我不知道如何在我的 PlayN 代码和样式表之间同步引用。（现在我看了一下，如果我不想自己托管字体，我想我可以使用 googleapi.com 样式表中列出的相同 url。）无论如何，这种模式似乎可以解决问题.*

*适用于谷歌浏览器。我还没有测试任何其他浏览器。

# ruby-on-rails - Xpath 和 Nokogiri：为什么我不能得到这个属性？

> ID：11602720
> 
> 赞同：0
> 
> 时间：2012-07-22T18:06:58.943
> 
> 标签：ruby-on-rails, xpath, nokogiri

我正在尝试解析如下所示的 HTML：

```
<p class="row">
            <span class="itemdate"> Jul 22</span>
            <span class="itemsep"> - </span> 
            <a href="http://newyork.craigslist.org/brk/abo/3102470187.html">$2000 / 3br - Three bedroom apartment/new renovtion</a>
            <span class="itemsep"> - </span>
            <span class="itempn"><font size="-1"> (Bushwick-L Train-Close to Williamsburg)</font></span>
            <span class="itempx"> <span class="p"> pic</span></span>
            <span class="itemcg" title="abo"> <small class="gc"><a href="/abo/">apts by owner</a></small></span>
        </p> 
```

当我执行此调用时：

```
page.xpath("//p[contains(@class, 'row')]/a").first 
```

我得到如下结果：

```
#<Nokogiri::XML::Element:0x3feea2631444 name="a" 
attributes=[#<Nokogiri::XML::Attr:0x3feea2631390 name="href"
value="http://newyork.craigslist.org/brk/abo/3102470187.html">] 
children=[#<Nokogiri::XML::Text:0x3feea2630ad0 "$2000 / 3br - Three bedroom">]> 
```

因此，通过查看 xpath 文档，我应该能够通过执行以下操作来返回 url：

```
page.xpath("//p[contains(@class, 'row')]/a@href").first 
```

但我得到这个错误：

```
Nokogiri::XML::XPath::SyntaxError Exception: Invalid expression: 
//p[contains(@class, 'row')]/a@href 
```

我知道如何从 Nokogiri 对象获取 URL，但我宁愿 xpath 搜索只返回一个 URL 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:10:01.653

你缺少一个斜线，你需要`.../a/@href`.

# javascript - 多维数组 javascript

> ID：11602723
> 
> 赞同：0
> 
> 时间：2012-07-22T18:07:04.217
> 
> 标签：javascript

我在 JavaScript 中有一个具有以下结构的多维对象：

```
arg: Array[2]
     2.0: "can_be_whatever"
     3.1: Array[6]
     1.0: Array[1]
          1.0: Object
                  1\.    conc: false
                  2\.    followers: Array[1]
                  3\.    altVec: Array[0]
                  4\.    parents: Array[0]
                  5\.    regMsgs: Array[0]
                  6\.    shared: Array[0]
                  7\.    sharedWith: Array[0]
                  8\.    consistsof: Array[3]
                                  1\.    0: Array[1]
                                                  1\.    0: "a"
                                                  2\.    length: 1
                                                  3\.    __proto__: Array[0]
                                  2\.    1: Array[1]
                                                  1\.    0: "a"
                                                  2\.    length: 1
                                                  3\.    __proto__: Array[0]
                                  3\.    2: Array[1]
                                                  1\.    0: "a"
                                                  2\.    length: 1
                                                  3\.    __proto__: Array[0]
                                  4\.    length: 3
                                  5\.    __proto__: Array[0]
                 9\. unregMsgs: Array[0]
                10\. part: 0
                11\. __proto__: Object 
```

我是 JavaScript 的新手，我需要从嵌套数组中获取值“a”。有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:12:57.547

坦率地说，这种结构对我来说没有任何意义。我试图将它“转换”成“真正的”JavaScript 结构。我希望这接近你的意思：

```
var arg = [
    "can_be_whatever",
    [[{
        conc: false,
        followers: [null],
        altVec: [],
        parents: [],
        regMsgs: [],
        shared: [],
        sharedWith: [],
        consistsof: [["a"], ["a"], ["a"]],
        unregMsgs: []
    }], null, null, null, null, null]
]; 
```

然后，您可以像这样选择“a”值：

```
var consistsof = arg[1][0][0].consistsof;
for (var i = 0; i < consistsof.length; ++i) {
    console.log(consistsof[i][0]);
} 
```

`[index]`在 JavaScript 中，您可以使用（就像在任何其他编程语言中一样） 从数组中选择值，并使用`.property`（就像在 Java 中一样）从对象中选择属性。

# c# - RTD 服务器 C#：在部署中获取“N/A”

> ID：11602730
> 
> 赞同：1
> 
> 时间：2012-07-22T18:07:44.010
> 
> 标签：c#, excel, excel-2007, rtd

我已经创建了 Excel RTD 服务器，在调试模式下完成所有实现之后，我能够运行 RTD 并且它工作正常。但是，当我在发布模式下获取 dll 并将其带到另一个系统，并使用“regasm.exe”注册并还提供了“everyone”的完整 DCOM 用户访问权限但仍使用 =RTD() 时，给我的错误为 #N/一个。

我期待我在部署中做的事情。

我被困在这里，请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:00:40.300

我有类似的问题，在我的情况下，机器上安装的办公室是 64 位的，因此我必须使用 64 位 regasm.exe 注册 RTD dll。

看看这里： [http ://social.msdn.microsoft.com/Forums/en/exceldev/thread/7a9e865e-5138-45c0-8f31-ddc148509dbe](http://social.msdn.microsoft.com/Forums/en/exceldev/thread/7a9e865e-5138-45c0-8f31-ddc148509dbe)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T02:32:33.843

我也遇到了这个问题，事实证明，在调试模式下，VS 能够看到我的 RTDServer，在部署中，Windows 不能，因为我没有明确指示安装项目这样做。要将其注册`rtdsrver.dll`为安装项目的一部分，您可以执行以下操作：

*   右键单击设置项目：查看-> 文件系统
*   在文件系统查看器中，选择系统文件夹
*   选择您的 rtdserver.dll 并查看它的属性
*   将`Register`字段设置为`vsdraCOM`
*   重新部署

现在，excel 应该能够在部署中看到您的服务器程序集。

# android - 在eclipse上用maven调试android

> ID：11602734
> 
> 赞同：0
> 
> 时间：2012-07-22T18:08:29.973
> 
> 标签：android, eclipse, debugging, maven

当我在 Eclipse 上创建基本的 Android 项目时，我可以按下调试按钮并获得如下屏幕：

![在此处输入图像描述](../Images/93849594f97ae863b78823a42b697553.png)

很舒服的调试画面，我可以设置断点，看流程等等。

但是当我使用 Maven 项目时，我只能得到 DDMS 窗口，这不是我喜欢看到的。有人知道如何在使用 maven android 插件部署时使调试窗口工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:11:04.020

找到了！！！调试按钮不起作用，但如果清单文件在清单文件中包含调试参数： [我必须在清单中添加什么才能在实际设备上调试 Android 应用程序？](https://stackoverflow.com/questions/2409923/what-do-i-have-to-add-to-the-manifest-to-debug-an-android-application-on-an-actu) 所以在它启动后 -> 去 DDMS 按调试你的进程 -> 然后打开调试视角并享受！！！

# java - 使用 PHP-Java-Bridge 时 Derby 不起作用，为什么？

> ID：11602735
> 
> 赞同：1
> 
> 时间：2012-07-22T18:08:30.813
> 
> 标签：java, hibernate, derby, php-java-bridge

当我通过 netbeans 访问 derby 并记录结果时，我得到了很好的数据，但是当我通过 PHP-Java Bridge 做完全相同的事情时，我没有得到任何数据。包装内：

com.m1sk.HelloBridge

```
 public static String backTest() throws Exception
    {
         BackendLink back = new BackendLink();
        return back.GetTourists();
    } 
```

当通过 main 调用时，我得到如下信息：

```
[{<Json Representation of the only object in the database>}] 
```

这很好，但是当我用 PHP-Java Bridge 调用这个函数时

```
<?
$test = new Java("com.m1sk.HelloBridge");
echo "!!<br>";
echo $test->backTest();
?> 
```

我明白了

```
!!
[] 
```

基本上它调用该函数，但由于某种原因，当它访问实际数据库时，它没有得到相同的东西！

**编辑**

*Backend_DAO_DB_impl：*

```
EntityManager em;
public Backend_DAO_DB_impl()
{
    String PersistenceName = "XYZ;
    EntityManagerFactory emf = Persistence.createEntityManagerFactory(PersistenceName);
    em =emf.createEntityManager();
}

public ArrayList<Tourist> GetTourists()
{
    Query q = em.createQuery("from Tourist");
    return (ArrayList<Tourist>) q.getResultList();
} 
```

*后端链接*

```
public String GetTourists() throws Exception
{
     ArrayList<Tourist> tourists = back.GetTourists();
    JSONArray arr = new JSONArray();
    for(Tourist t : tourists)
    {
       arr.add(JSONConverter.touristToJSON(t));
    }
    return arr.toJSONString();
} 
```

back 是 Backend_DAO_DB_impl 的对象 BackendLink 至少在 eclipse 中运行时有效。问题不在于 JSONConverter，我检查了。所以它必须在代码中更深一些，这意味着它可能在 derby 或 hibernate 中。

我目前的猜测是 netbeans 会自动做一些我没有用 java 桥做的事情。
**编辑** 这里的要求是日志：Catalina

```
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: java5772_5140_9448_modelDB.TouristSite
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.annotations.EntityBinder bindTable
INFO: Bind entity java5772_5140_9448_modelDB.TouristSite on table TouristSite
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: java5772_5140_9448_modelDB.InsideSites
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: java5772_5140_9448_modelDB.OutsideSites
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: java5772_5140_9448_modelDB.TourReservation
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.annotations.EntityBinder bindTable
INFO: Bind entity java5772_5140_9448_modelDB.TourReservation on table TourReservation
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: java5772_5140_9448_modelDB.Tourist
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.annotations.EntityBinder bindTable
INFO: Bind entity java5772_5140_9448_modelDB.Tourist on table Tourist
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.AnnotationConfiguration secondPassCompile
**INFO: Hibernate Validator not found: ignoring**
Jul 25, 2012 9:16:06 AM org.hibernate.connection.DriverManagerConnectionProvider configure
INFO: Using Hibernate built-in connection pool (not for production use!)
Jul 25, 2012 9:16:06 AM org.hibernate.connection.DriverManagerConnectionProvider configure
INFO: Hibernate connection pool size: 20
Jul 25, 2012 9:16:06 AM org.hibernate.connection.DriverManagerConnectionProvider configure
INFO: autocommit mode: true
Jul 25, 2012 9:16:06 AM org.hibernate.connection.DriverManagerConnectionProvider configure
INFO: using driver: org.apache.derby.jdbc.ClientDriver at URL: jdbc:derby://localhost:1527/sample
Jul 25, 2012 9:16:06 AM org.hibernate.connection.DriverManagerConnectionProvider configure
INFO: connection properties: {user=app, password=****, autocommit=true, release_mode=auto}
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: RDBMS: Apache Derby, version: 10.8.1.2 - (1095077)
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: JDBC driver: Apache Derby Network Client JDBC Driver, version: 10.2.2.1 - (538595)
Jul 25, 2012 9:16:06 AM org.hibernate.dialect.Dialect <init>
INFO: Using dialect: org.hibernate.dialect.DerbyDialect
Jul 25, 2012 9:16:06 AM org.hibernate.transaction.TransactionFactoryFactory buildTransactionFactory
INFO: Transaction strategy: org.hibernate.transaction.JDBCTransactionFactory
Jul 25, 2012 9:16:06 AM org.hibernate.transaction.TransactionManagerLookupFactory getTransactionManagerLookup
INFO: No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Automatic flush during beforeCompletion(): disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Automatic session close at end of transaction: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Scrollable result sets: enabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: JDBC3 getGeneratedKeys(): disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Connection release mode: auto
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Default batch fetch size: 1
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Generate SQL with comments: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Order SQL updates by primary key: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Order SQL inserts for batching: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory createQueryTranslatorFactory
INFO: Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
Jul 25, 2012 9:16:06 AM org.hibernate.hql.ast.ASTQueryTranslatorFactory <init>
INFO: Using ASTQueryTranslatorFactory
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Query language substitutions: {}
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: JPA-QL strict compliance: enabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Second-level cache: enabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Query cache: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory createCacheProvider
INFO: Cache provider: org.hibernate.cache.NoCacheProvider
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Optimize cache for minimal puts: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Structured second-level cache entries: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Statistics: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Deleted entity synthetic identifier rollback: disabled
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Default entity-mode: pojo
Jul 25, 2012 9:16:06 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Named query checking : enabled
Jul 25, 2012 9:16:06 AM org.hibernate.impl.SessionFactoryImpl <init>
INFO: building session factory
Jul 25, 2012 9:16:06 AM org.hibernate.impl.SessionFactoryObjectFactory addInstance
INFO: Not binding factory to JNDI, no JNDI name configured
Jul 25, 2012 9:16:06 AM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: Running hbm2ddl schema export
Jul 25, 2012 9:16:06 AM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: exporting generated schema to database
Jul 25, 2012 9:16:08 AM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: schema export complete 
```

其他的看起来还可以。我不太确定那条线。

# javascript - javascript - 将预先创建的对象（o1、o2、o3 ..）存储在数组中

> ID：11602737
> 
> 赞同：0
> 
> 时间：2012-07-22T18:08:56.463
> 
> 标签：javascript, arrays, object

我创建了几个对象.. p0，p1，p2，... p。其中最大'n'是已知的。p? 对象中有自定义的方法（例如 startp() ）。

我想将它们推入一个数组（我们称之为'A'）。这样，给定一些索引 i，我想调用一些方法，例如：A[i].startp()。我的 JavaScript 代码：

```
A = [];
for (var i=0; i<=n; i++){
    A.push( eval('p'+i) );
} 
```

我收到诸如“ReferenceError: p0 is not defined”之类的错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:16:00.750

代替：

```
var p0 = { x: "foo" };
var p1 = { x: "bar" }; 
```

等等，只需这样做：

```
var A = [
  { x: "foo" },
  { x: "bar" }
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:25:11.497

我个人只是选择 Pointy 给出的答案，但取决于 p 在哪里？被声明（认为他们称之为范围）你可以做这样的事情来避免 eval....

```
var A = [];
for (var i=0; i<=n; i++){
    A.push(window['p'+i]);
} 
```

...用有效的方法替换 window ;)...很难在没有看到更多代码的情况下给你一个准确的答案。

# javascript - jQuery Draggable and transparent PNGs - 被透明背景阻挡的可拖动区域

> ID：11602739
> 
> 赞同：3
> 
> 时间：2012-07-22T18:08:59.003
> 
> 标签：javascript, jquery, html, css, draggable

我有一堆要应用的图像`jQuery.draggable()`

它们是透明的 PNG，因此具有透明的背景。问题是它们的背景被视为可拖动区域，因此，如果元素在背景中，则前景元素的透明背景会阻止背景元素被拖动。

**这是一个问题的[例子](http://jsfiddle.net/BT2A9/)**

有什么办法解决这个问题？jQuery有没有办法自动忽略图像的透明区域，只将可见区域视为可拖动的句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:20:11.060

这是可能的，不久前实现了一个 jQuery 插件。这是一个[演示](http://alphadesigns.com.au/pixelselect/test.html)（未启用多子层，仍然有点错误）。作者[的演示站点](http://www.cw-internetdienste.de/pixelselection/)已经关闭，但代码仍然可以在[GitHub](https://github.com/Bahlor/jQuery-Pixel-Related-Object-Selection)上找到。以此为基础并实现您的拖动。

# android - 在 LinearLayout 中为 TableLayout 设置 layout_marginBottom 无效

> ID：11602741
> 
> 赞同：0
> 
> 时间：2012-07-22T18:09:06.743
> 
> 标签：android, android-layout

我有一个垂直的 LinearLayout *（绿色矩形）*，我正在尝试以编程方式将多个 TableLayouts *（红色矩形）*膨胀并插入到这个 LinearLayout 中。每个表格布局包含 4 个 2x2 排列的单元格。

![在此处输入图像描述](../Images/9dd2bf16302d5338267487159ef9c406.png)

它可以工作，除了我为 TableLayout 设置的任何 layout_marginBottom 都没有效果，红色矩形总是紧紧地挤在 LinearLayout 内。我想在每个表之间创建一些垂直间距。

请建议我的 XML 有什么问题：

线性布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">
    <LinearLayout
        android:id="@+id/levellist"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:orientation="vertical">

    </LinearLayout>
</ScrollView> 
```

TableLayout（动态插入）。注意没有效果的 layout_marginBottom ：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="100dp"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <include
            android:id="@+id/levelview0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            layout="@layout/levelmenu_level" />

        <include
            android:id="@+id/levelview1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            layout="@layout/levelmenu_level" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <include
            android:id="@+id/levelview2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            layout="@layout/levelmenu_level" />

        <include
            android:id="@+id/levelview3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            layout="@layout/levelmenu_level" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:19:38.513

在这个 TableLayout 中有一堆相同的视图。我建议尝试使用 GridLayout。它应该有助于内存管理和回收。但是要回答您的问题，您似乎正在为整个表格设置边距，而不是每一行。您是否尝试过将 layout_margin 放在行标签内？您也可以尝试设置填充？这样，您就可以将间距放在行内。但是，我相信无论哪种方式，您都应该获得相同的效果。边距在视图之外，填充在内部。

[http://developer.android.com/reference/android/view/View.html#attr_android:paddingBottom](http://developer.android.com/reference/android/view/View.html#attr_android:paddingBottom)

```
<TableRow
        android:id="@+id/TableRow01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="???dip">

        <include
            android:id="@+id/levelview0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            layout="@layout/levelmenu_level" /> 
```

# c++ - 如何从 C++ 中的另一个头文件调用函数？

> ID：11602742
> 
> 赞同：4
> 
> 时间：2012-07-22T18:09:14.260
> 
> 标签：c++, function

我有以下 3 个文件（1 个 *.cpp 和 2 个 *.hpp）：

主程序文件：

```
// test.cpp

#include<iostream>
#include"first_func.hpp"
#include"sec_func.hpp"

int main()
{
    double x;
    x = 2.3;
    std::cout << sec_func(x) << std::endl;
} 
```

- first_func.hpp 头文件：

```
// first_func.hpp

...

double  first_func(double x, y, x)
{

    return x + y + x;
} 
```

- sec_func.hpp 标头：

```
// sec_func.hpp

...

double sec_func(double x)
{
        double a, b, c;
        a = 3.4;
        b = 3.3;
        c = 2.5;

        return first_func(a,b,c) + x;
} 
```

如何从 sec_func.hpp 文件中正确调用 first_func？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T18:19:09.987

对于大多数函数，实现应该驻留在*编译单元*中，即一个将自行编译并编译一次的文件。

头文件不能自己编译*，而是被多个编译单元包含。

这就是为什么您的函数定义应该驻留在编译单元（如 .cpp）而不是头文件中的原因。头文件应该只包含声明（即没有正文），足以让其他编译单元知道如何调用它们。

* * *

为了完整起见，通常需要在 headers 中定义的函数（作为例外）是：

*   `inline`职能
*   模板函数**（也是类）

* * *

脚注：

`*`头文件实际上可以预编译，但这是加快编译速度的解决方案，并且不会改变它们的用途；不要对此感到困惑。
`**`如果您使用显式模板实例化，您可以将模板函数定义放在标头之外，但这种情况很少见；关键是每个想要实例化模板（对其应用参数）的编译单元都需要有完整的定义，这就是模板函数定义也进入标题的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T18:15:11.687

将函数定义放在`.hpp`文件中是一种不好的做法。您应该只在那里放置函数原型。像这样：

first_func.hpp：

```
double  first_func(double x, double y, double x); 
```

first_func.cpp：

```
double  first_func(double x, double y, double x)
{
    return x + y + x;
} 
```

第二个功能相同。

然后，无论你想在哪里调用你的`first_func`，你只需`first_func.hpp`在该`cpp`模块中包含相应的，然后编写调用。

因此，您的每个模块都包含`hpp`所有声明和`cpp`定义（即主体）。当您需要从此模块中引用某些内容时，您可以包含它`hpp`并使用名称（常量、变量、函数等）。

然后您必须将所有内容链接在一起：

```
gcc main.cpp first_func.cpp second_func.cpp -o program 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T18:17:46.487

要在标头中定义一个函数，您必须标记它`inline`以防止多个定义。

如果您想这样做而不是将实现分离到单独的文件中，则需要在调用函数之前提供原型（通过包含标头（首选）或自己声明函数）。

```
// sec_func.hpp

#include "first_func.hpp"
//or
double  first_func(double x, y, x); //declaration

double sec_func(double x)
{
        double a, b, c;
        a = 3.4;
        b = 3.3;
        c = 2.5;

        return first_func(a,b,c) + x;
} 
```

# happstack - 从 happstack-lite API 获取请求

> ID：11602747
> 
> 赞同：1
> 
> 时间：2012-07-22T18:11:03.763
> 
> 标签：happstack

我将如何从 happstack-lite API 获取请求数据？我正在尝试获取客户端的 IP 地址。据我所知，它在 Request::rqPeer 中，我对深入研究 happstack API 的单子层感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:44:09.477

您可以`askRq`在任何[ServerMonad](http://www.happstack.com/docs/happstack-server-7.0.2/doc/html/happstack-server/Happstack-Server-Monads.html#t%3aServerMonad)中使用来获取请求，您可以使用记录语法对其进行模式匹配以获取客户端主机名：

```
do Request {rqPeer = (host,_)} <- askRq
   ok $ "Your IP: " ++ host 
```

# objective-c - 反转 NSArray 顺序的便捷方法

> ID：11602755
> 
> 赞同：2
> 
> 时间：2012-07-22T18:11:51.233
> 
> 标签：objective-c, cocoa-touch, nsarray

我有一个`NSArray`，我想翻转它，即颠倒对象的顺序。

我可以通过创建一个 for 循环并移动所有对象来做到这一点。是否有一些不错的方法或技巧可以以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T18:13:43.043

```
NSArray* reversedArray = [[originalArray reverseObjectEnumerator] allObjects]; 
```

应该做的伎俩

# agile - SOA 和敏捷方法是互补的吗？

> ID：11602756
> 
> 赞同：2
> 
> 时间：2012-07-22T18:12:04.463
> 
> 标签：agile, soa

我还没有开始学习这两者中的任何一个，但我想知道你们中是否有人使用敏捷方法来实现 SOA？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T03:06:11.987

## 所以问题是：[SOA 和敏捷是朋友还是敌人？](http://www.infoq.com/articles/SOA-Agile-Friends-Or-Foes)

总之，面向服务的架构 (SOA) 和敏捷软件开发都可以帮助公司变得更加灵活，并更好地协调业务和 IT。因此，许多人注意到 SOA 和敏捷似乎是天作之合。

*SOA 引入了一个受控环境，在其中适应变化以支持敏捷过程，通过应用设计模式、标准和治理程序来提高质量、效率和生产力。仅举几例，诸如服务可重用性、可组合性和抽象性之类的设计模式被用来提供灵活和适应性强的生态系统。敏捷方法还使生命周期更具增量性和交互性，允许企业更快地从 IT 获取/提供反馈。它们都支持允许企业制定与 IT 相一致的战略所需的持续业务-IT 周期。——SOA[给敏捷带来了什么？还是从敏捷到 SOA？](http://www.zdnet.com/blog/service-oriented/what-does-soa-bring-to-agile-or-agile-to-soa/8041)*

## 解释

正如您在[SOA Manifesto 2009](http://www.soa-manifesto.org/)和[Agile Manifesto 2001](http://www.agilemanifesto.org/)中看到的那样，有很多共同的价值观，例如敏捷性、灵活性、将变化视为机会等等。由于云计算 [2008]、Web 服务 [2004] 等，一些人将 SOA 视为敏捷的演变。这些撰写宣言的人对[瀑布模型](http://en.wikipedia.org/wiki/Waterfall_model)不满意，因为客户因交付的软件有限而不满意。客户无法在没有官僚主义的情况下更改要求，有时他们只是在过程中才知道自己想要什么或需要什么，此时已经签订了合同。看起来像 Fred Brooks, Jr 说*的“计划扔掉一个 [实施]；无论如何，你会的！”* .

所以人们开始以敏捷的方式制作东西。它给客户带来了快乐。不知何故，他们开始对软件感到满意，并且软件比以往任何时候都更加准确，有小错误并且符合要求。

随着分布式系统的 BOOM!，在我看来，从 Google 开始，一些人开始在 Internet 上开发东西，例如公共或私有 Web 服务和外部 API，SOA 的良好实践是流行语。他们写了宣言，它成为了主要的建筑设计。

## 笔记

1.  瀑布没有坏也没有错！对于像 NASA 这样的人来说，它仍然很好，并且对于规格不会改变的重要软件也很有效。

2.  还有更多的架构设计模式，比如层等等。您需要知道的是这种模式是否适合您的项目。也许 SOA 不适合。

3.  此外，没有银弹！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:41:49.457

是的，我们确实使用敏捷方法来实施 SOA 支持的项目。但是没有人反对不使用敏捷方法。我猜在某些特定项目中，例如国防部或高风险项目，由于也使用了硬控制 SOA，因此不允许使用敏捷。因为这些术语是正交的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T13:24:17.470

全职从事 SOA 实施工作，我对此有一些经验。

您可以使用不同的方法在组织中实施 SOA。我没有看到任何尝试进入并在一个项目中将整个企业集成设计重新制作为 SOA。相反，一旦业务需求出现或发生变化，这将逐步发生。

通常 SOA 实现中的每个子项目都相当小——通常太小而无法划分为带有生产版本的 SCRUM 冲刺。

在许多方面，瀑布方法通常在概念上是实现 SOA 的最简单方法。服务的规格会随着时间的推移而改变，但不可能将其计划为，比如 6 个月的间隔，因为它在很大程度上受到业务需求变化的驱动或受到企业信息系统升级/交换的影响。

但是，当设计阶段完成并确定规范+技术模式时，设计规范可能会有相当多的变化。在实施阶段开始后的项目中。根据我的经验，通常情况下，一旦开始翻转石头，旧的和未知的事情就会爬起来，需要改变。更[迭代](http://en.wikipedia.org/wiki/Iterative_and_incremental_development)的方法通常比严格的瀑布方法更便宜——但不一定是敏捷方法。

决定方法的另一个重要因素是项目的融资和设置方式。敏捷方法可能会获得更好的整体结果/现金比率，但前提是您的组织能够应对敏捷方法。如果您作为内部承包商为某些业务需求启用 SOA，我已经习惯了，那么可能会设置项目计划、成本估算和与责任人一起严格的时间表。使用敏捷方法很难为每个单个项目制定时间表，特别是对于中小型 SOA 项目，很难给出明确的成本估算。

对于交付给单个所有者的大型 SOA 项目，我已经成功地使用了 SCRUM，并且非常推荐它。

# asp.net - Artem GoogleMap vs Subgurim GoogleMaps

> ID：11602759
> 
> 赞同：0
> 
> 时间：2012-07-22T18:12:38.050
> 
> 标签：asp.net, .net, google-maps, controls, subgurim-maps

我知道你们中的许多人不喜欢这些“vs”主题/问题，但我计划开发将使用 Google Maps API 的新项目，但我不确定要使用这两个控件（包装器）中的哪一个。

Velio Ivanov（Artem）的第一个谷歌地图控制

[http://googlemap.artembg.com/](http://googlemap.artembg.com/)

[http://googlemap.codeplex.com/](http://googlemap.codeplex.com/)

Subgurim.net 的第二个谷歌地图

[http://en.googlemaps.subgurim.net/](http://en.googlemaps.subgurim.net/)

两种控件看起来都比其他控件更好，但我不确定哪个实际上是最好的。我正在寻找相当简单、轻量级、同时功能强大且有据可查的控制。

有没有人用过这两个？你有任何问题吗？你有没有像我一样难以破解的坚果？

我将非常感谢任何可以帮助我选择的比较、优点、缺点、问题等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T15:09:56.923

好吧，我使用 Artem Map Control 已经有一段时间了，它非常易于使用。此外，它是开源的，而 Subgurim 控件不是。如果您在免费模式下使用 Subgurim 控件，您会将您的程序暴露给广告，因为他们的页面显示：

*- 仅适用于非商业应用。功能齐全。没有限制。带有来自 GoogleMaps.Subgurim.NET 的**消息**和 HTML 代码注释。*

写完这篇文章后，我正在升级到 v6 Artem Map Control

# binding - 如何在 knockout.js 中进行条件绑定？

> ID：11602760
> 
> 赞同：14
> 
> 时间：2012-07-22T18:12:39.033
> 
> 标签：binding, knockout.js

我试过这个：

```
<div data-bind="attr: {class: itemSelected? 'selected' : 'unselected' }"></div> 
```

但它不起作用:)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-22T18:26:18.787

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T23:01:17.393

Following worked for me, i was using both css and id attributes, for me it did't work if css attribute is not the first one , so keep css attribute as your fist one.

```
<div class="panel-collapse collapse" data-bind="css:{in:$index()==0}, attr: { id:'collapse'+$index()} ">

...
...
...

</div> 
```

# playframework - playframework 版本 1 会过时吗？

> ID：11602766
> 
> 赞同：5
> 
> 时间：2012-07-22T18:13:39.407
> 
> 标签：playframework

现在 playframework 有了一个与版本 1 完全不同的新版本 2；后者会怎样？游戏 1 中编写的所有项目都应该绝对迁移到版本 2 吗？我想知道是否可以依靠 play 1 在近期或中期不会过时和不受支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T19:23:16.180

核心开发团队给出的关键声明之一是，他们自己有许多用 Play 1.x 编写的应用程序，因此，他们将继续支持 Play 1.x。Play 已经存在了很长一段时间，甚至在它公开之前，它就被 Zenexity 用作构建客户 Web 应用程序的框架。

他们不打算回去重新设计 Play 1.x 网络应用程序，而且在许多方面，1.x 周围的支持和社区都比 2 更强大。如果您希望开始使用更多实时功能，那么也许您应该转到 Play 2，但如果您对 Play 1 提供的内容感到满意……为什么要迁移？Nicolas Leroux 和其他一些核心开发人员已承诺维护 Play 1 项目，自 Play 2 发布以来，1.2.5 已经推出，1.3 也即将推出。

也就是说，如果您决定迁移，我强烈建议您使用 Groovy 模板引擎 for 2.x，因为它可以使迁移过程更容易。

就个人而言，我更喜欢 1.x 到 2.x，但这纯粹是个人喜好问题。我在 1.x 上投入了很多时间，并且对它了如指掌，而 2.x 的特性并不足以让我远离 Play 1 的轻松和美丽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:23:39.747

在不久的将来，坚持使用 play 1.+ 可能会更好 - 因为有许多模块可以与 1.+ 一起使用 - 2.+ 可能需要更多时间才能变得稳定并具有更大的模块支持（因此此时将您的 play 1.+ 项目迁移到 2.+ 可能不是最好的做法）。在几个小版本之后使用 play 2.+ 可能更有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:33:29.773

不，至少无需为现有的稳定应用程序重写现有代码。每个应用程序的主要目标*应该*是独立于构建的软件的初始版本。`Play 1.x`将在团队的维护下一段时间，但正如多次告知的那样 - 不会添加新功能，因为目前的主要开发方向是 2.x+

当然，如果您的应用程序处于开发的初始阶段和/或您认为未来会有很多变化，那么现在“跳转”到新版本可能会更好。稍后您将需要迁移更多内容。

另一方面，我肯定会推荐使用 2.x 版本开始新项目，停留在 1.x 级别会导致您有一天会因应用程序构建在不受支持的版本上而醒来。

关于模块可用性：请记住，模块是由社区创建的。我不会将我的选择限制在 Play 版本 1 和 2 之间的模块可用性，因为它只是一段代码，其中许多可以在短时间内再次编写。最后，作为 Play 的开发框架 - 模块只是很好的快捷方式，**而不是**`absolutely required base`任何新应用程序的快捷方式。

# android - 在不同时间更新 android 小部件

> ID：11602771
> 
> 赞同：0
> 
> 时间：2012-07-22T18:14:36.600
> 
> 标签：android, android-widget

我按照[教程](http://www.vogella.com/articles/AndroidWidgets/article.html)创建了一个小部件，我想在一天的不同时间更新小部件视图，更新时间不是恒定的，那么我该怎么做，

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:50:14.753

为此，我创建了一个时间数组，我想在这些时间更新我的小部件，并`Repeating AlarmManager`根据我的要求设置间隔为 1 天，对于每个数组时间，这对我有用。

# sql - 如何根据飞行员的生日和当前日期计算 SQL 日期

> ID：11602774
> 
> 赞同：1
> 
> 时间：2012-07-22T18:14:48.567
> 
> 标签：sql, database, date, sql-server-2008-express

因此，飞行员必须在每 6 个月（半年）和每年（每年）内获得如此多的飞行时间和飞行架次。最大的痛苦是这些时期的开始和结束日期是基于他们的出生月份。

您可以在此处找到有关我的架构的更多信息：[设计决策：部分日期的表架构以计算时间跨度 (SQL Server)](https://stackoverflow.com/questions/11564431/design-decision-table-schema-for-partial-dates-in-order-to-calculate-time-spans)

```
DECLARE @date Date
SET @date = '1985-04-12'

DECLARE @diffInYears INT
SET @diffInYears = DATEDIFF(yy, @date, GETDATE())

DECLARE @currentBirthDate Date
SET @currentBirthDate = (SELECT dateadd(yyyy, @diffInYears, @date))

SELECT DATEADD(dd, -DAY(DATEADD(m,1,@currentBirthDate)), DATEADD(m,7,@currentBirthDate)) semiAnnualDateEnd, 
        DATEADD(dd, -DAY(DATEADD(m,1,@currentBirthDate)), DATEADD(m,13,@currentBirthDate)) annualDateEnd

RESULTS:

semiAnnualDateEnd - annualDateEnd
   2012-10-31     -  2013-04-30 
```

现在，这太好了，这些是我想要的这个特定示例的日期。

但是，当我们来到 2012 年 11 月 1 日时，我希望 semiAnnualDateEnd 变为 2013-04-30。

另外，当 2013 年到来时（2013 年 1 月 1 日），每年的 DateEnd 将变为 2014-04-30，当我希望它保持 2013-04-30 到 2013-05-01 到来时，然后让它变为 2014-04-30（半年度类似情况）。

我不想让这些日期与特定的飞行员静态关联。也就是说，我不想在 Pilot 表中保留几个字段。但是，我想用这些来显示和计算。例如，需要显示每个飞行员当前的半年度和年度飞行次数和飞行时间，以及在任何特定时间点显示他们“当前”统计数据的快照。

编辑：我正在使用 SQL Server 2008 Express RC

编辑2：我想我应该将@currentBirthDate 更改为（SELECT DATEADD（yyyy，@diffInYears - 1，@date）。然后，我需要在下面做一个案例陈述（继续实验）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:20:32.827

半年日期的规则似乎是：将月份添加五个月，然后到月底。月底可能是个问题。因此，让我们将其更改为“加六个月，到月底并减去一天”。（我的这个逻辑是基于你的例子。）

以下表达式执行此操作：

```
select dateadd(d, -1,
               cast(cast(year(bd)+(case when month(bd)+6 > 12 then 1 else 0 end) as varchar(255))+'-'+
                    cast(case when month(bd)+7> 12 then month(bd)+6-12 else month(bd) end as varchar(255))+'-'+
                    '1' as date))
from (select cast('2011-11-01' as date) bd) t 
```

它对日期的 year() 和 month() 值进行日期算术。然后它将它们作为字符串重新组合在一起，转换为日期，并减去 1 天。

我认为类似的东西也适用于您的年份日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:20:30.020

```
DECLARE @pilotID INT
SET @pilotID = 1

DECLARE @birthDate DATE  
SET @birthDate = (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)

DECLARE @diffInYears INT  
SET @diffInYears = DATEDIFF(yy, @birthDate, GETDATE())  

DECLARE @currentBirthDate DATE  
SET @currentBirthDate = (DATEADD(yyyy, @diffInYears - 1, @birthDate))  

DECLARE @firstSixMonthStart DATE
DECLARE @firstSixMonthEnd DATE  
DECLARE @secondSixMonthStart DATE
DECLARE @secondSixMonthEnd DATE  

SET @firstSixMonthStart = (DATEADD(dd,-(DAY(DATEADD(m,1,@currentBirthDate))-1),DATEADD(m,1,@currentBirthDate)))
SET @firstSixMonthEnd = (DATEADD(dd, -DAY(DATEADD(m,1,@currentBirthDate)), DATEADD(m,7,@currentBirthDate))) 
SET @secondSixMonthStart = (DATEADD(dd,-(DAY(DATEADD(m,1,@currentBirthDate))-1),DATEADD(m,7,@currentBirthDate)))
SET @secondSixMonthEnd = (DATEADD(dd, -DAY(DATEADD(m,1,@currentBirthDate)), DATEADD(m,13,@currentBirthDate)))  

DECLARE @semiAnnualStart AS DATE
DECLARE @semiAnnualEnd AS DATE 
DECLARE @annualStart AS DATE
DECLARE @annualEnd AS DATE 

SET @semiAnnualStart =  CASE   
                            WHEN GETDATE() > (DATEADD(dd, -DAY(DATEADD(m,1,@firstSixMonthEnd)), DATEADD(m,7,@firstSixMonthEnd)))  
                                THEN (DATEADD(yyyy, 1, @firstSixMonthStart))  
                            WHEN GETDATE() > @firstSixMonthEnd  
                                THEN @secondSixMonthStart      
                            ELSE @firstSixMonthStart 
                        END     

SET @semiAnnualEnd =    CASE   
                            WHEN GETDATE() > (DATEADD(dd, -DAY(DATEADD(m,1,@firstSixMonthEnd)), DATEADD(m,7,@firstSixMonthEnd)))  
                                THEN (DATEADD(yyyy, 1, @firstSixMonthEnd))  
                            WHEN GETDATE() > @firstSixMonthEnd   
                                THEN @secondSixMonthEnd    
                            ELSE @firstSixMonthEnd 
                        END     

SET @annualStart =      CASE   
                            WHEN GETDATE() > @secondSixMonthEnd THEN (DATEADD(yyyy, 1, @firstSixMonthStart))  
                            ELSE @firstSixMonthStart
                        END         

SET @annualEnd =        CASE   
                            WHEN GETDATE() > @secondSixMonthEnd THEN (DATEADD(yyyy, 1, @secondSixMonthEnd))  
                            ELSE @secondSixMonthEnd  
                        END

SELECT @semiAnnualStart semiStart, @semiAnnualEnd semiEnd, 
        @annualStart annualStart, @annualEnd annualEnd,
        @firstSixMonthStart firstStart, @firstSixMonthEnd firstEnd,
        @secondSixMonthStart secondStart, @secondSixMonthEnd secondEnd,
        COUNT(*) semiSorties, ISNULL(SUM(hours), 0) semiSortieHours
FROM PilotLog
WHERE pilotID = @pilotID
    AND topLevelPosition = 'AVO'
    AND flightDate BETWEEN @semiAnnualStart AND @semiAnnualEnd 
```

结果：

```
semiStart   semiEnd     annualStart annualEnd   firstStart  firstEnd    secondStart secondEnd   semiSorties semiSortieHours
2012-05-01  2012-10-31  2011-11-01  2012-10-31  2011-11-01  2012-04-30  2012-05-01  2012-10-31  1           1.7 
```

这最终奏效了...问题是，我需要为总体摘要页面上的每个飞行员执行此操作。此外，我将需要为她想要的快照计算这种出击信息。她想回到任何特定月份并查看快照，列出每个航班以及他们完成该航班后的出击统计数据。这个 SQL 应该适用于这些情况，只是我必须在这里和那里稍微改变一下。

（编辑：为什么我的代码不水平滚动..？我不想让它换行。没关系，这只是 Internet Explorer 的样子）

# cakephp - Cakephp 幽灵文件

> ID：11602777
> 
> 赞同：0
> 
> 时间：2012-07-22T18:15:08.520
> 
> 标签：cakephp

我正面临一个奇怪的情况。我正在使用 CakePHP 2.0（本地）、XAMPP，我想在我的主页中添加一个简单的计数器，所以我添加了以下代码（非常非常简单）

```
<?php
$filename = 'hitcount.txt';
$handle = fopen($filename, 'r');
$hits = trim(fgets($handle)) + 1;
fclose($handle);

$handle = fopen($filename, 'w');
fwrite($handle, $hits);
fclose($handle);

echo $hits; 
```

有一个名为的文本文件`hitcount.txt`，其中包含点击次数（每次我访问该页面时，它都应该增加点击次数）。有用。当我尝试访问该`hitcount.txt`文件时出现了问题。它是空的，但`$hits`返回了确切的结果！我删除了文件，它仍然显示我预期的结果！我用了不同的浏览器，一样。我删除了 CakePHP 的缓存，没有变化。我在另一个页面中使用了相同的代码，它没有抱怨一些错误，返回了预期的结果。

Cakephp 怎么可能“看到”一个不存在的文件？跟阿帕奇有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:56:55.813

您可能在错误的位置将文件视为 CakePHP 的。我的猜测是 CakePHP 指的是`app/webroot/hitcount.txt`.

您可能想要定义一个完整路径，`hitcount.txt`以便确保您和 CakePHP 都指向同一个位置。

```
<?php
$filename = TMP.'hitcount.txt'; 
```

这将在 `app/tmp/hitcount.txt' 找到文件。

# c# - Linux 上 Mono 中的 Windows kernel32 函数

> ID：11602781
> 
> 赞同：3
> 
> 时间：2012-07-22T18:15:19.703
> 
> 标签：c#, winapi, mono

我得到了这个非常简单的 ini 类，我不久前从某个地方下载了，但现在我正在使用单声道，我遇到了它从 kernel32 导入东西的问题

```
[DllImport("kernel32")]
private static extern long WritePrivateProfileString(string section,
    string key, string val, string filePath);
[DllImport("kernel32")]
private static extern int GetPrivateProfileString(string section,
            string key, string def, StringBuilder retVal,
    int size, string filePath); 
```

哪个在单声道（在linux中）给出了错误`DLLNotFoundException: kernel32`

有没有办法让它与单声道一起工作？也许在编译时将整个东西嵌入到程序集中（如果这甚至有道理，我不知道）。还是我*必须*创建/查找不使用 WinAPI 的 ini 类？（妮妮突然想到）。

如果 WinAPI 的东西可以与 Mono 一起使用，我真的很喜欢，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:18:59.630

[Mono 支持 C# 的 P/Invoke](http://www.mono-project.com/Interop_with_Native_Libraries)，这是运行 Win32 API 函数所必需的。（只要你在 Windows 上运行 Mono——它找不到的事实`"kernel32"`让我怀疑你不是。）

站点 pinvoke.net 为大多数 Win32 API 收集必要的 DllImport 签名。

[以下是关于 GetPrivateProfileString 的内容。](http://www.pinvoke.net/default.aspx/kernel32/GetPrivateProfileString.html)

此代码适用于我在 Windows 7 上使用 Mono 2.10.8：

```
using System;
using System.Text;

public class MainClass
{
  [DllImport("kernel32")]
  private static extern long WritePrivateProfileString(string section,
    string key, string val, string filePath);
  [DllImport("kernel32")]
  private static extern int GetPrivateProfileString(string section,
    string key, string def, StringBuilder retVal,
    int size, string filePath);

  static void Main()
  {
    StringBuilder asdf = new StringBuilder();
    GetPrivateProfileString("global","test","",asdf,100,@"c:\example\test.ini");
    Console.WriteLine(asdf.ToString());
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T10:45:20.077

您需要在本机 .NET 中重写这些函数的功能才能在 Mono/Linux 上使用它们（除非您可以说服 Mono 和 Wine 很好地发挥作用）。

如果 INI 文件受到控制，那么您可能会摆脱简单的文件/字符串操作，但无论如何您最好还是转向更跨平台的东西。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-09-15T18:15:44.480

换成`[DllImport("kernel32")]`_`[DllImport("kernel32.dll")]`

一切都将开始正常工作。

# bash - shell 脚本：需要整数表达式

> ID：11602784
> 
> 赞同：0
> 
> 时间：2012-07-22T18:15:26.087
> 
> 标签：bash, shell

```
#!/bin/bash
if [$# -ne 1];
then
  echo "/root/script.sh a|b"
else if [$1 ='a'];
then
  echo "b"
else if [$1 ='b']; then
  echo "a"
else 
  echo "/root/script.sh a|b"
fi 
```

在 Linux 中运行上面的脚本时出现以下错误。

```
bar.sh: line 2: [: S#: integer expression expected
a 
```

你能帮忙消除这个错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T18:20:02.257

```
if [$# -ne 1]; 
```

`[`并且`]`需要间距。例子：

```
if [ $# -ne 1 ]; 
```

并且`else if`应该是`elif`

```
#!/bin/bash
if [ "$#" -ne 1 ];
then
  echo "/root/script.sh a|b"
elif [ "$1" ='a' ];
then
  echo "b"
elif [ "$1" ='b' ]; then
  echo "a"
else
  echo "/root/script.sh a|b"
fi 
```

不要忘记引用变量。不是每次都需要，但推荐。

问题：为什么我有-1？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:26:45.690

Bash 不允许`else if`。相反，使用`elif`.

此外，您需要在`[...]`表达式中留出间距。

```
#!/bin/bash
if [ $# -ne 1 ];
then
  echo "/root/script.sh a|b"
elif [ $1 ='a' ];
then
  echo "b"
elif [ $1 ='b' ]; then
  echo "a"
else 
  echo "/root/script.sh a|b"
fi 
```

# java - Mockito 测试框架 WantedButNotInvoked 异常

> ID：11602785
> 
> 赞同：1
> 
> 时间：2012-07-22T18:15:29.703
> 
> 标签：java, mockito

我正在尝试为 A 方法编写测试用例，该方法是`handleFault`我们`soaphandller`从中`SOAPMessageContext`获取接口对象的对象的方法，我必须从中获取`SOAPFault`对象，并且在获取对象之后，我必须获取它的所有属性，并且我必须创建一个自定义 Exception 类并将`SOAPFault`对象属性设置为 Exception 类对象并从该方法中抛出该 Exception Class 对象。

我的源代码是`CVOSSecurityHandller`方法

```
 public boolean handleFault(SOAPMessageContext context) {
      try {
        Iterator iterator;      
        SOAPFault fault=context.getMessage().getSOAPBody().getFault();
        SoapServiceException serviceException=new SoapServiceException();
    serviceException.setDetail(fault.getDetail());
        serviceException.setFaultActor(fault.getFaultActor());
        iterator=fault.getAllAttributes();
    List<Name> faultAllAttribute=new ArrayList<Name>();
        while(iterator.hasNext()) {
            faultAllAttribute.add((Name)iterator.next());
        }
        serviceException.setFaultAllAttribute(faultAllAttribute);
        serviceException.setFaultCode(fault.getFaultCode());
        serviceException.setFaultCodeName(fault.getFaultCodeAsName());
        serviceException.setFaultCodeQName(fault.getFaultCodeAsQName());
        serviceException.setFaultNode(fault.getFaultNode());
        serviceException.setFaultRole(fault.getFaultRole());
        serviceException.setFaultString(fault.getFaultString());
        iterator=fault.getFaultReasonTexts();
        List<String> faultReasons=new ArrayList<String>();
        while(iterator.hasNext()){
            faultReasons.add((String)iterator.next());
        }
        serviceException.setFaultReasons(faultReasons);
        List<QName> faultSubcode=new ArrayList<QName>();
    while(iterator.hasNext()){
        faultSubcode.add((QName)iterator.next());
        }
    throw serviceException;
    } catch (SOAPException e) {
        e.printStackTrace();
    }
    catch (NullPointerException e) {
    e.printStackTrace();
    }
    return true;
  } 
```

我的自定义异常类

```
public class SoapServiceException extends RuntimeException {
  private Detail detail;
  private String faultActor;
  private String faultCode;
  private Name faultCodeName;
  private QName faultCodeQName;
  private String faultNode;
  private String faultRole;
  private String faultString;
  private List<QName> faultSubcode;
  private List<Name> faultAllAttribute;
  private List<String> faultReasons;

// here is getter and setter of above properties
} 
```

我的测试用例文件，用于测试 HandleFault 方法

```
public class CVOSSecurityHandllerTest {
    private CVOSSecurityHandler mockCvosSecurityHandller=mock(CVOSSecurityHandler.class);
    private SOAPMessageContext soapMessageContext=mock(SOAPMessageContext.class);
    private SOAPMessage soapMessage =mock(SOAPMessage.class);
    private SOAPBody soapBody=mock(SOAPBody.class);
    private SOAPFault soapFault=mock(SOAPFault.class);
    @Before
    public void setUp() throws Exception
    {
        Factory.instance = new Factory(new MockServicesModule());
    }

    @After
    public void tearDown() throws Exception
    {
    }
    @Test(expected=SoapServiceException.class)
    public void testHandleFault(){
        try{

        when(soapMessageContext.getMessage()).thenReturn(soapMessage);
            when(soapMessage.getSOAPBody()).thenReturn(soapBody);
            when(soapBody.addFault()).thenReturn(soapFault);
            when(soapFault.getFaultString()).thenReturn("The fault string");
            verify(this.mockCvosSecurityHandller, atLeastOnce()).handleFault(soapMessageContext);
            reset(this.mockCvosSecurityHandller);

        }
        catch(SOAPException e){
            //e.printStackTrace();
        }
        catch(NullPointerException e){
            //throw new SoapServiceException();
        }
        catch(SoapServiceException e){
            e.printStackTrace();
            Assert.assertEquals("The fault",e.getFaultString());
        }

    }
    @BeforeClass
public static void setUpBeforeClass() throws Exception
{
    }

    private class MockServicesModule extends AbstractModule
    {

        @Override
        protected void configure()
        {
            bind(SOAPMessageContext.class).toInstance(CVOSSecurityHandllerTest.this.soapMessageContext);
            bind(SOAPMessage.class).toInstance(CVOSSecurityHandllerTest.this.soapMessage);
            bind(SOAPBody.class).toInstance(CVOSSecurityHandllerTest.this.soapBody);
            bind(SOAPFault.class).toInstance(CVOSSecurityHandllerTest.this.soapFault);
        }
    }

} 
```

所以请帮我看看我在哪里犯了错误并为此提供可能的解决方案。我正在尝试创建模拟对象

```
CVOSSecurityHandler mockCvosSecurityHandller=mock(CVOSSecurityHandler.class);
private SOAPMessageContext soapMessageContext=mock(SOAPMessageContext.class);
private SOAPMessage soapMessage =mock(SOAPMessage.class);
private SOAPBody soapBody=mock(SOAPBody.class);
private SOAPFault soapFault=mock(SOAPFault.class); 
```

并验证 的模拟对象`CVOSSecurityHandller`并调用该`handleFault`方法，但它会抛出 的异常`WantedButNotInvoked`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:37:44.410

你的真实对象实例在哪里？我看到的都是嘲笑。您的被测系统（即被测类）应该是一个真实的对象而不是一个模拟对象，否则您的任何真实代码都不会被执行。

# android - AsyncTask OnPostExecute 中的 NullPointerException

> ID：11602786
> 
> 赞同：1
> 
> 时间：2012-07-22T18:15:43.073
> 
> 标签：android

我是`data=null`android的新手。我在执行正确的onPostExecute时得到了。现在我只想显示一个没有可用数据的对话框。但是我得到了`NullPointerException`.

```
public class GetPreviousChatNewThread extends AsyncTask<Void,Void,Void> {

            ProgressDialog dialog;
            ArrayList<HashMap<String,String>> data;

            @Override
            protected  Void doInBackground(Void... void1) {
                data=new ArrayList<HashMap<String,String>>();
                data=HandleJSON.ParseJsonForUserAdminChats(sendHttpRequest(
                        "ReturnUserAdminChats",
                        "admin",
                        "You" ,
                        "a",
                        clientEmail,
                        UserAdminChatActivity.LastShowingChatDate));
                return null;
            }

            @Override
             protected void onPostExecute(Void result) {

                super.onPostExecute(result);

                if(!data.isEmpty())      // <-- error here
                {   
                    adapter.InsertValuesAtTop(data);
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "No more data", Toast.LENGTH_LONG).show();
                }
                if(dialog.isShowing())
                 dialog.dismiss();

             }

            @Override
             protected void onPreExecute() {
                 dialog = ProgressDialog.show(UserAdminChatActivity.this, "", "Loading. Please wait...", true);
             }

        } 
```

这是我的 Logcat，它显示了该过程的完整日志：

```
07-23 12:22:55.976: I/finalAnswer(25159): ["a@hotmail.com","c@hotmail.com","b@hotmail.com"]
07-23 12:23:01.101: I/finalAnswer(25159): [{"username":"moji","chatText":"jingalala hu","chatDate":"4\\July\\2012"},{"username":"You","chatText":"bingalala hu","chatDate":"4\\July\\2012"},{"username":"moji","chatText":"jingalala hu","chatDate":"4\\July\\2012"}]
07-23 12:23:01.101: I/GoTo Json(25159): [{"username":"moji","chatText":"jingalala hu","chatDate":"4\\July\\2012"},{"username":"You","chatText":"bingalala hu","chatDate":"4\\July\\2012"},{"username":"moji","chatText":"jingalala hu","chatDate":"4\\July\\2012"}]
07-23 12:23:01.101: I/dateeeeeee(25159): 4\July\2012
07-23 12:23:01.101: I/dateeeeeee(25159): 4\July\2012
07-23 12:23:01.111: I/dateeeeeee(25159): 4\July\2012
07-23 12:23:01.161: I/finalAnswer(25159): new"[]"
07-23 12:23:02.603: I/finalAnswer(25159): []
07-23 12:23:02.603: I/GoTo Json(25159): []
07-23 12:23:02.613: D/AndroidRuntime(25159): Shutting down VM
07-23 12:23:02.613: W/dalvikvm(25159): threadid=1: thread exiting with uncaught exception (group=0x4001d578)
07-23 12:23:02.623: E/AndroidRuntime(25159): FATAL EXCEPTION: main
07-23 12:23:02.623: E/AndroidRuntime(25159): java.lang.NullPointerException
07-23 12:23:02.623: E/AndroidRuntime(25159):    at com.app.ServerClient.UserAdminChatActivity$GetPreviousChatNewThread.onPostExecute(UserAdminChatActivity.java:197)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at com.app.ServerClient.UserAdminChatActivity$GetPreviousChatNewThread.onPostExecute(UserAdminChatActivity.java:1)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.os.AsyncTask.finish(AsyncTask.java:417)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.os.Looper.loop(Looper.java:138)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at java.lang.reflect.Method.invokeNative(Native Method)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at java.lang.reflect.Method.invoke(Method.java:507)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
07-23 12:23:02.623: E/AndroidRuntime(25159):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑：

下面是 HandleJson 的代码：

```
public class HandleJSON {

private static ArrayList<HashMap<String,String>> chat;
static final String Key_username="username_key";
static final String Key_email="email_key";
static final String Key_messageText="messageText_key";
static final String Key_messageDate="messageDate_key";
static final String Key_messageCounts="messageCount_key";
static boolean newObject;

public static ArrayList<HashMap<String,String>>  ParseJsonForLatestChats(String jsonData)
{
       try {

           if(HandleJSON.newObject)
           {
               chat=new ArrayList<HashMap<String,String>>();
           }
           Log.i("jsonReturned",jsonData.toString());
           JSONArray jsonarr=new JSONArray(jsonData);
            for(int i=0;i<jsonarr.length();i++)
            {   
                HashMap<String,String> hashMap=new HashMap<String,String>();

                hashMap.put(HandleJSON.Key_username, jsonarr.getJSONObject(i).getString("username"));
                hashMap.put(HandleJSON.Key_email, jsonarr.getJSONObject(i).getString("email"));
                hashMap.put(HandleJSON.Key_messageCounts, jsonarr.getJSONObject(i).getString("count"));

                chat.add(hashMap);

            }

            return chat;
      }
      catch(JSONException e)
      {
          Log.e("JsonDek", e.getMessage());
          return null;
      }
}

public static ArrayList<HashMap<String,String>>  ParseJsonForUserAdminChats(String jsonData)
{

       chat=new ArrayList<HashMap<String,String>>();

try {

         JSONArray jsonarr=new JSONArray(jsonData);
         Log.i("GoTo Json",jsonData);
            UserAdminChatActivity.LastShowingChatDate=jsonarr.getJSONObject(0).getString("chatDate");
            for(int i=jsonarr.length()-1;i>=0;i--)
            {   
                HashMap<String,String> hashMap=new HashMap<String,String>();

                hashMap.put(HandleJSON.Key_username, jsonarr.getJSONObject(i).getString("username"));
                hashMap.put(HandleJSON.Key_messageText, jsonarr.getJSONObject(i).getString("chatText"));
                hashMap.put(HandleJSON.Key_messageDate, jsonarr.getJSONObject(i).getString("chatDate"));
                Log.i("dateeeeeee",jsonarr.getJSONObject(i).getString("chatDate"));

                chat.add(hashMap);

            }

            return chat;
      }
      catch(JSONException e)
      {
          return null;
      }
}

public static ArrayList<String> ReturnUsersEmail(String jsonData) throws JSONException
{
    JSONArray jsonarr=new JSONArray(jsonData);
    ArrayList<String> emails=new ArrayList<String>();

    for(int i=0;i<jsonarr.length();i++)
    {
        emails.add(jsonarr.getString(i));
    }

    return emails;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:19:26.567

这需要调试器。要么`doInBackground`不被调用（这*不太*可能），要么你`ParseJSONForUserAdminChats`返回 null。我的赌注是后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:23:28.227

解决您的异常的一个简单方法是将行更改为：

```
 if (null != data  &&  !data.isEmpty()) 
```

我认为原因`data`是`null`（而不是空的）是因为`HandleJSON.ParseJsonForUserAdminChats()`正在返回`null`。（请注意，`new`您在此之前所做的事情既不需要也没有帮助，顺便说一句。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:24:00.130

好吧，我确定这不是您的真实代码。无论如何，如果你可以让它运行并得到这个异常，你不能用 try catch 来处理它吗？也许您的方法“HandleJSON.ParseJsonForUserAdminChats”正在使对象无效，并且 isEmpty 仅在列表没有元素时处理，如果变量为空则不处理。

```
try {
  if(!data.isEmpty()) {
     //if data is not null and not empty will pass here
  }
} catch(NullPointerException e) {
  //If data == null it will pass here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T18:47:20.777

你没有`AsyncTask`正确使用。如果您阅读[本文档中称为](http://developer.android.com/reference/android/os/AsyncTask.html)**AsyncTask 的泛型类型**的部分，您将了解如何使用泛型类型在和之间传递数据。这是您需要做的：`doInBackground``onPostExecute`

```
public class GetPreviousChatNewThread extends AsyncTask<Void,Void,List<HashMap<String, String>>> {

        ProgressDialog dialog;

        @Override
        protected  List<HashMap<String, String>> doInBackground(Void... void) {
            return HandleJSON.ParseJsonForUserAdminChats(sendHttpRequest(
                    "ReturnUserAdminChats",
                    "admin",
                    "You" ,
                    "a",
                    clientEmail,
                    UserAdminChatActivity.LastShowingChatDate));
        }

        @Override
         protected void onPostExecute(List<HashMap<String, String>> result) {
            super.onPostExecute(result);
            if(null != result && !result.isEmpty()) { //checks not null or empty
                adapter.InsertValuesAtTop(result);
            }
            else
            {
                Toast.makeText(getApplicationContext(), "No more data", Toast.LENGTH_LONG).show();
            }
            if(dialog.isShowing())
             dialog.dismiss();

         }

        @Override
         protected void onPreExecute() {
             dialog = ProgressDialog.show(UserAdminChatActivity.this, "", "Loading. Please wait...", true);
         }

    } 
```

如果你得到一个`Toast`，那么你知道返回的数据`HandleJSON.ParseJsonForUserAdminChats(...)`是返回`null`还是空的`List`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T09:05:05.980

if(!data.isEmpty())
这与数据无关！这是关于结果的。所有返回数据都存储在结果中。

# javascript - 如何在表格中选择元素的父行？

> ID：11602789
> 
> 赞同：3
> 
> 时间：2012-07-22T18:16:03.760
> 
> 标签：javascript, jquery

我有以下功能：

```
$("#example tbody").click(function(event) {
        $(oTable.fnSettings().aoData).each(function (){
            $(this.nTr).removeClass('row_selected');
        });
        $(event.target.parentNode).addClass('row_selected');
    }); 
```

当用户单击表中的 td 元素时，它会将 row_selected 类添加到行中。但是，当用户单击 td 内的输入元素时，它会将 row_selected 类添加到 td。

有没有办法可以更改 event.target.parentNode 以便将类添加到父 tr 而不是父级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T18:18:34.587

使用[`closest()`](http://api.jquery.com/closest/).

```
$(event.target).closest('tr').addClass('row_selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:37:11.270

更改您的处理程序以使用 jQuery 的事件委托而不是您自己的...

```
$("#example tbody").on("click", "tr", function(event) { 
```

...然后你可以使用`this`...

```
$(this).addClass('row_selected'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:25:53.007

您可以使用*parentsUntil()*函数，这有点像寻找祖先。我不记得祖先的功能，但这会起作用：

```
$(event.target).parentsUntil("tr").addClass('row_selected'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T18:28:17.530

你可以试试这个

```
$(event.target).closest('tr').addClass('row_selected'); 
```

而不是你的线

```
$(event.target.parentNode).addClass('row_selected'); 
```

使用最接近（），您将能够将`row_selected`类应用于您单击的元素的最近`tr`元素，这可能是其中的一个`td`或任何其他元素。

# objective-c - Subview 和 UIViewController 与 Delegates 之间的交互

> ID：11602791
> 
> 赞同：0
> 
> 时间：2012-07-22T18:16:24.177
> 
> 标签：objective-c, ios, delegates

我已经阅读了很多文章以获取有关目标 c 中整个委托概念的一些信息。至少我认为我对此有大致的了解。但是我没有找到我的问题的答案 - 或者我只是找到了它但没有得到它......

在我的情况下，我有一个自定义子视图，我正在我的 UIViewController 上以编程方式添加。我想与自定义 UIView 进行交互以调用控制器的某些方法。我认为最好有一个委托概念，而不是在 SubView 中引用我的 UIViewController，对吧？我的问题是，难道不能用我的 UIScrollViewDelegate 做点什么吗？我的 UIViewController 正在实现一些委托方法，因为我的 SubView 是 UIScrollView。那么是否可以添加一个自定义方法，我可以使用以下方法调用它：

```
[self.delegate myCustomMethodOnUIViewController] 
```

或者最好的方法是什么？我应该设置一个协议并将其作为自定义委托添加到我的 UIViewController 吗？我是否必须在我的子视图上设置一个委托属性？

感谢帮助！安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:41:43.750

如果您将 UIView 作为子视图添加到 UIViewController，并且您想在子视图中执行父视图中的某些方法，那么您的软件设计中可能会出现一些错误。

如果有必要这样做，请使用 @class 变量进行循环包含并调用您的方法。阅读更多关于 @class 指令的信息。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html)

**可以在链接中阅读更多插图：** [@class vs. #import](https://stackoverflow.com/questions/322597/class-vs-import)

您可以使其与委托和协议一起使用，但请确保您在相同的上下文中正确处理内存以避免泄漏。

# c# - 启用 Ajax 的 WCF 服务 - 实现观察者设计模式

> ID：11602793
> 
> 赞同：3
> 
> 时间：2012-07-22T18:16:31.337
> 
> 标签：c#, asp.net, ajax, wcf, observer-pattern

我创建了一个通知系统，每次有新通知时都会通知用户。

目前在我下面的客户端脚本中，我每秒调用一次 Web 服务调用来 ping 服务器以获取新通知。每次有新通知时，我如何能够让启用 Ajax 的 WCF 通知客户端？

是否有人有任何资源、建议或教程来使用支持 Ajax 的 WCF 实现观察者设计模式？

*注意：使用观察者模式可能不是实现这一点的最佳方式，任何关于最佳模式的建议（可能是我当前的实现）都非常感谢。

客户端：

```
$(document).ready(function () {

self.setInterval("getNewNotificationsCount()", 1000);
});

function getNewNotificationsCount() {
$.ajax({
    type: "POST",
    url: site_root + "services/NotificationService.svc/json/GetNewNotificationsCount",
    contentType: "application/json; charset=utf-8",
    data: {},
    dataType: "json",
    error: function (request, error, u) {
        alert('error: ' + error);
    },
    success: function (result, status) {
        $('#hip_badge').text(result.d);
    }

});} 
```

通知服务

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class NotificationService {

{
    [OperationContract]
    [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json)]
    public int GetNewNotificationsCount()
    {
        NotificationManager nm = new NotificationManager();

        return nm.getNewNotifications(GetUserName());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:01:59.440

您是否与使用 WCF 相关？[SignalR](http://signalr.net/)可能更适合这种推送通知。

更新：只是为了澄清；SignalR 为服务器抽象了一种将数据推送到多个客户端的机制，其中一个是 JavaScript。*在客户端上，您可以挂钩处理通知管理器发送*的通知的事件处理程序......

干杯，院长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:22:27.577

就我对 Web 模型的理解而言，如果没有客户端请求通知，服务器（WCF 服务）就无法通知客户端（AJAX 应用程序）。这似乎是客户端和服务器之间整个请求响应系统的核心。

我知道您需要这样做来提高您的应用程序的效率，并且有一些建议可能会有所帮助：

*   [HTTP 轮询双工 WCF 通道](http://tomasz.janczuk.org/2009/08/ajax-client-for-http-polling-duplex-wcf.html)- 这并不能完全提供您想要的，因为客户端仍会轮询客户端的更改（通知）。但是，它仍然是为您的应用程序量身定制的。
*   如果您不能/不想使用基于轮询的 WCF 并坚持您当前的机制，我建议您将服务从 a`POST`更改`GET`为显然，您不必在获取通知时发送任何复杂的数据。A`GET`比`POST`AJAX 场景中的 a 快一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:32:27.743

这将在新版本的 WCF (4.5) 中成为可能。您可以使用 Websockets 与 HTTP 客户端进行双向通信。那时你不会使用 AJAX，而是使用 websockets 的 javascript。查看以下链接了解更多信息： http: [//www.codeproject.com/Articles/338789/What-s-new-in-WCF-4-5-WebSocket-support-Part-1-of](http://www.codeproject.com/Articles/338789/What-s-new-in-WCF-4-5-WebSocket-support-Part-1-of)

# haskell - 使用 Cabal 安装模块后，类型类实例未解析

> ID：11602797
> 
> 赞同：1
> 
> 时间：2012-07-22T18:16:46.690
> 
> 标签：haskell, ghc, typeclass, cabal

我创建了一个简单的项目来演示这个问题：[https ://github.com/jdevelop/testcabal](https://github.com/jdevelop/testcabal)

如果我使用“cabal install”编译和安装模块，我无法使用二进制序列化 TestData：

```
> ghci                                               
GHCi, version 7.0.4: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package ffi-1.0 ... linking ... done.
ghci> :m +TestBinary.Test Data.Binary
ghci> randomData  . decode $ encode emptyTest 

<interactive>:1:24:
    No instance for (Binary TTestData)
      arising from a use of `encode'
    Possible fix: add an instance declaration for (Binary TTestData)
    In the second argument of `($)', namely `encode emptyTest'
    In the expression: randomData . decode $ encode emptyTest
    In an equation for `it':
        it = randomData . decode $ encode emptyTest 
```

如果我直接将 Test.hs 加载到 ghci - 一切都按预期工作，

```
> ghci TestBinary/Test.hs 
GHCi, version 7.0.4: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package ffi-1.0 ... linking ... done.
[1 of 1] Compiling TestBinary.Test  ( TestBinary/Test.hs, interpreted )
Ok, modules loaded: TestBinary.Test.
ghci> randomData  . decode $ encode emptyTest 
Loading package array-0.3.0.2 ... linking ... done.
Loading package bytestring-0.9.1.10 ... linking ... done.
Loading package containers-0.4.0.0 ... linking ... done.
Loading package binary-0.5.1.0 ... linking ... done.
"123456" 
```

Haskell 编译器版本：

```
> ghci --version 
The Glorious Glasgow Haskell Compilation System, version 7.0.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:33:21.777

在您的 .cabal 文件中，您有

```
Build-depends: base < 5, ghc-binary >= 0.5, bytestring >= 0.9.1 
```

通常，`ghc-binary`不暴露，并且不打算由 GHC 本身使用。当您加载`Data.Binary`到 ghci 时，它会从[`binary`](http://hakage.haskell.org/package/binary)包中加载模块，并且该包中的`Binary`类与来自 的类不同`ghc-binary`，因此`TTestData`没有实例。

如果您从源代码加载文件，ghci 不关心 .cabal 文件并[`binary`](http://hakage.haskell.org/package/binary)直接使用该类，因此它可以工作。

您应该更改对[`binary`](http://hakage.haskell.org/package/binary)包的依赖项。

# java - 在 Android 中访问一个简单类的成员

> ID：11602801
> 
> 赞同：0
> 
> 时间：2012-07-22T18:17:23.100
> 
> 标签：java, android

我有一个简单的 Java 类，它`View`在另一个包中扩展，我正在使用这个类制作一个自定义视图。我想将它用作`View`另一个类的 XML 中的一个，它是一个`Activity`.

我的自定义`View`需要来自该类的一些数据，所以我创建了一个`Pt`类对象，它扩展了`Activity`. 该对象已创建，但是当我使用该对象访问扩展类的成员时`Activity`，它不显示任何成员。我做错了什么，还是有更好的方法？

这是我的代码。我已经在评论中展示了我的期望。

```
public class PlotView extends View {//class to make a custom view

    Plot_View obj_plot = new Plot_View();
    obj_plot.//  here i am expecting it to show the members of that Plot_View class which is extending Activity 

    class Pt{
        float x, y;
        Pt(float _x, float _y){
            x = _x;
            y = _y;
        }
    }

    Pt[] myPath = { new Pt(100, 100), new Pt(200, 200),    new Pt(200, 500),
                    new Pt(400, 500),    new Pt(400, 200) };

    public PlotView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    public PlotView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        Paint paint = new Paint();
        paint.setColor(Color.BLUE);
        paint.setStrokeWidth(3);
        paint.setStyle(Paint.Style.STROKE);
        Path path = new Path();
        path.moveTo(myPath[0].x, myPath[0].y);

        for (int i = 1; i < myPath.length; i++){
            path.lineTo(myPath[i].x, myPath[i].y);
        }
        canvas.drawPath(path, paint);
    }
}// 
```

这是我的 Plot_View 活动。我想访问在此活动中定义的这些 Arraylist

```
 public class Plot_View extends Activity implements OnClickListener {

        public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    setContentView(R.layout.plotview);

      calculationForPlot();

    findViewById(R.id.btn_measure).setOnClickListener(this);

     initMirrorMatrix();

     drawMatrix();
}

 private void calculationForPlot(){
     ArrayList<String> al_edit_A_ft = new ArrayList<String>();
     ArrayList<String> al_edit_A_inch=new ArrayList<String>();
     ArrayList<String>al_edit_B_ft=new ArrayList<String>(); 
     ArrayList<String>al_edit_B_inch= new ArrayList<String>();
    float x=0;
     AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(this);
        SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj.getReadableDatabase();
        String q="SELECT * FROM ab_measurement WHERE job_id=" +"\""+Settings.jobid +"\"";

   Cursor  cursor = sqliteDatabase.rawQuery(q,null);

        if (cursor.moveToNext()) {
            System.out.println(cursor.getCount());
            m=Integer.parseInt(cursor.getString(4));

            do {
                try{

                float a = 0,b = 0;

                 a=(float) Double.parseDouble(cursor.getString(6));
                 String number =String.valueOf(a);
                 System.out.println("aaa ggg"+number);
                 String int_part =number.substring(0,number.indexOf("."));
                 String float_part=number.substring(number.lastIndexOf(".")+1,number.length());
                 System.out.println("aaa values"+int_part);
                 System.out.println("aaa values"+float_part);

                  al_edit_A_ft.add(int_part);
                  al_edit_A_inch.add(float_part);

                     b= (float) Double.parseDouble(cursor.getString(7));
                     String number_b =String.valueOf(b);
                     System.out.println("aaa ggg"+number_b);
                     String int_part_b =number_b.substring(0,number_b.indexOf("."));
                     String float_part_b=number_b.substring(number_b.lastIndexOf(".")+1,number_b.length());
                     System.out.println("aaa values"+int_part_b);
                     System.out.println("aaa values"+float_part_b);
                     al_edit_B_ft.add(int_part_b);
                     al_edit_B_inch.add(float_part_b);

                     x= (float) Double.parseDouble(cursor.getString(3));
                     String ft_base =String.valueOf(x);
                     System.out.println("aaa ggg"+ft_base);
                     String int_part_ft =ft_base.substring(0,ft_base.indexOf("."));
                     String float_part_inch=ft_base.substring(ft_base.lastIndexOf(".")+1,ft_base.length());
                     System.out.println("aaa values"+int_part_ft);
                     System.out.println("aaa values"+float_part_inch);

                }
                catch (Exception e) {

                }

            } while (cursor.moveToNext()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:25:49.333

尝试这个....

**在 Java 类中创建一个类型的对象引用变量，并在构造函数中使用** **传递给它**`Your_Activity` **的值对其进行初始化。** `Context`

 ****活动类：**

```
public class MyActivity extends Activity {
TextView myView ;
protected void onCreate(android.os.Bundle savedInstanceState) {
    myView = (TextView)findViewById(R.id.myView);
        Points myPoints = new Points(this);
        myPoints.displayMsg("MY NAME IS VIVEK");
}  
} 
```

**Java类：**

```
 private class Points {

    public MyActivity mcontext;

    ////---------- a constructor with the Context of your activity

    public Points(MyActivity context){
        mcontext = context;
    }

    public void displayMsg( final String msg){
        context.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                mcontext.myView.setText(msg);    
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:42:03.250

从您注释的代码行不完整的方式来看，我假设您正在使用 IDE 的自动完成功能。

我的第一个建议是将名称更改`Plot_View`为`PlotActivity`. 这将帮助您在将来返回此项目时避免混淆。此外，当您在这里提问时，这将有助于避免混淆。

至于您的实际问题，我假设您指的是以下内容`ArrayList`：

```
ArrayList<String> al_edit_A_ft = new ArrayList<String>();
ArrayList<String> al_edit_A_inch=new ArrayList<String>();
ArrayList<String>al_edit_B_ft=new ArrayList<String>();
ArrayList<String>al_edit_B_inch= new ArrayList<String>(); 
```

首先，您需要意识到这些*不是*类的成员`Plot_View`。它们在`calculationForPlot()`方法中本地声明。虽然，您似乎没有发布整个`Plot_View`班级，所以您可能在其他`ArrayList`地方声明了 other 。如果您确实指`ArrayList`的是我在上面粘贴的 s，则需要将它们声明为成员变量 in`Plot_View`而不是`calculationForPlot()`. 然后，您可以创建 getter 方法以允许您的`View`类访问它们。**

# c++ - timestamp() 函数在哪里定义

> ID：11602810
> 
> 赞同：-6
> 
> 时间：2012-07-22T18:17:46.850
> 
> 标签：c++

我正在尝试使用 timestamp() 函数。但我不知道它是在哪个标头中定义的。我试过了，但是里面没有。编译时出现错误，如下所示

```
error: ‘timestamp’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:30:09.667

没有标准`timestamp()`功能。如果要使用`std::time()`，可以包含`<ctime>`标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:23:18.117

做一个简单的搜索：

> grep 时间戳 *.h

或递归：

> grep -r 时间戳。

（这适用于类 unix 系统；如果您使用 Windows 或其他东西，请进行调整）

# jquery - 我将如何扩展此输入验证？

> ID：11602814
> 
> 赞同：2
> 
> 时间：2012-07-22T18:18:34.957
> 
> 标签：jquery

我正在收集表单输入值并使用本地存储来保存它们。

这是检查其中一个输入并执行我想要的代码的代码 - 但只有一个输入：

```
$('#refresh').click(function() {
    if (localStorage['t'] == null || localStorage['t'].length == 0) {
        $("input#t").css("background-color", "yellow");
        return;
    }
    save_data()
    window.location = 't4.html';
}); 
```

​因此，我将有更多输入值（t、t1、t2 ...），并希望突出显示示例中执行的任何/所有空值。验证插件似乎没有必要，因为这是唯一需要验证的地方。另外，我不喜欢检查输入条目，而只检查何时`#refresh.click`执行，因此用户只有一个“唠叨”。

感谢新手的帮助！

**更新：** `.each`有人建议，但怀疑肯定有比这更好的方法：

```
 $('#refresh').click(function () {

      $("input").each(function (i) {

        if(localStorage['t'] == null || localStorage['t'].length == 0 ) {
        $("input#t").css("background-color","yellow");
        return;
        } 

        if(localStorage['t1'] == null || localStorage['t1'].length == 0 ) {
        $("input#t1").css("background-color","yellow");
        return;
        }

        if(localStorage['t2'] == null || localStorage['t2'].length == 0 ) {
        $("input#t2").css("background-color","yellow");
        return;
        }

        if(localStorage['t3'] == null || localStorage['t3'].length == 0 ) {
        $("input#t3").css("background-color","yellow");
        return;
        }

        else {

        save_data()

        window.location = 't4.html';
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:22:11.257

您可以使用 jQuery 的 .each() 遍历每个元素 :)

[。每个（）](http://api.jquery.com/each/)

# python - sage 中缺少 python 模块

> ID：11602817
> 
> 赞同：0
> 
> 时间：2012-07-22T18:18:44.057
> 
> 标签：python, module, sage

我安装了 Sage 4.7.1 并遇到了一个奇怪的问题。我的许多使用 deepcopy() 和 uniq() 等函数的旧脚本不再将它们识别为全局名称。我已经能够通过一个一个地导入 python 模块来解决这个问题，但这很乏味。但是当我启动命令行 Sage 界面时，我可以在不导入复制模块的情况下键入“list2=deepcopy(list1)”，而且效果很好。命令行 Sage 怎么可能识别全局名称“deepcopy”，但如果我加载使用相同名称的脚本，它就无法识别它？

哎呀，对不起，还不熟悉stackoverflow。我输入：“sage_4.7.1/sage”来启动命令行界面；然后，我输入“load jbom.py”来加载我在python脚本中定义的所有函数。当我使用脚本中的一个函数时，它运行了几秒钟（复杂函数），然后到达我使用 Sage 通常作为全局名称（deepcopy、uniq 等）的一些函数的位置，但由于某种原因，我加载的脚本不知道函数是什么. 重申一下，正如我所描述的，我的脚本 jbom.py 曾经在我上次从事这项特定研究时工作。

如果我使用“load jbom.py”或“import jbom”也没有区别。这两种方法都获得了我在脚本中定义的函数（但在第二种情况下我必须使用 jbom。）并且都得到关于“deepcopy”不是全局名称的相同错误。

回复帝斯曼：我一直草率地描述了这个问题，对此我深表歉意。我创建了一个新脚本“experiment.py”，它的第一行是“import jbom”。执行experiment.py 中的函数可以识别jbom.py 中的函数，但无法识别deepcopy。我尝试将 jbom.py 加载为“加载 jbom.py”，我可以像几个月前一样使用这些功能。那么，这只是在没有正确使用导入/加载等的情况下分层脚本的问题吗？

已解决：我在 jbom.py 的开头添加了“from sage.all import *”，现在我可以加载 Experiment.py 并执行调用 jbom.py 函数的函数而没有任何问题。从关于导入/加载的 Sage 文档中，我无法真正说出我到底做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:35:32.300

好的，这是发生了什么：

您只能使用以( ignoring )`import`结尾的文件。这些是标准 Python 文件，未预解析，因此, not ，并且您没有可玩的 a 等价物。`.py``.py[co]``1/3 == int(0)``QQ(1)/QQ(3)``from sage.all import *`

您可以`load`and `attach`both `.py`and`.sage`文件（以及`.pyx`and `.spyx`and `.m`）。两者都可以访问 Sage 定义，但`.py`文件没有预解析（因此`y=17`生成`y`Python `int`），而`.sage`文件是（因此`y=17`生成`y`Sage `Integer`）。

所以`import jbom`这里的工作方式就像它在 Python 中一样，您无法访问 Sage 已放入范围内的内容。 `load`等很方便，但它们不能很好地扩展到更大的程序。我过去曾提议改进这一点，让`.sage`脚本不再是二等公民，但还没有就该做什么和做这件事的精力达成一致。与此同时，您最好的选择是从`sage.all`.

# ios - 当我的应用程序处于后台时，只有在我触摸顶部通知横幅时才会处理推送通知

> ID：11602826
> 
> 赞同：8
> 
> 时间：2012-07-22T18:20:05.413
> 
> 标签：ios, push-notification

我已经实施

```
application:didReceiveRemoteNotification: 
```

在收到推送通知时将数据存储在我的应用程序中。

但是，当我的应用程序在后台并收到通知时，只有当我触摸出现在顶部的通知横幅时，才会存储数据：

![在此处输入图像描述](../Images/3e2451a311ad33d3977f343abdd021c9.png)

相反，如果我触摸应用程序图标重新打开它，通知的内容不会被存储：

![在此处输入图像描述](../Images/12300ec3f5adfa9f5a9921b678408200.png)

由于我仅在使用分发配置文件时才收到通知，因此我不确定是否`application:didReceiveRemoteNotification:`仅在我将通知横幅推到顶部时才调用。

我认为它总是在收到通知时调用，而不是在用户对设备进行操作之后调用。

**更新**。我不知道这是否有帮助，但为了让您知道，我还没有实现这些方法中的任何一个：

```
– applicationDidEnterBackground:
– applicationWillEnterForeground:
- applicationDidBecomeActive: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:07:18.280

我想我已经找到原因了。从文档：

> 如果点击操作按钮（在运行 iOS 的设备上），系统将启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。
> 
> 如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，但不会提供有关通知的信息。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

但是，我想知道即使通过触摸图标重新打开了应用程序，是否有办法加载有效负载。

# python - Fabric env.hosts 并以相同的方法运行 => 未找到主机

> ID：11602832
> 
> 赞同：9
> 
> 时间：2012-07-22T18:20:32.750
> 
> 标签：python, deployment, fabric

为什么：

```
from fabric.api import env, run

def update():
    env.hosts = ['apycat']
    run('cd /var/www/menu; svn up') 
```

当 I 时不起作用`fab update`，而：

```
from fabric.api import env, run

env.hosts = ['apycat']

def update():
    run('cd /var/www/menu; svn up') 
```

做？

在文档中没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T18:36:36.420

在 fab 命令已经为 fab 任务创建主机列表之后指定主机列表将不起作用。因此，对于第一个示例，您的更新任务没有设置主机列表，然后允许以下 run() 操作。文档中的一个很好的部分[是here](http://docs.fabfile.org/en/1.4.3/usage/execution.html#how-host-lists-are-constructed)。

但还应该注意的是，您可以获得一个像第一个这样的用例，以两种方式中的一种方式工作。首先是 settings() 上下文管理器：

```
def foo():
    with settings(host_string='apycat'):
        run(...) 
```

另一个是使用较新的 api 函数 execute()：

```
def bar():
    run(...)

def foo():
    execute(bar, hosts=['apycat']) 
```

# java - 电池状态总是不充电

> ID：11602833
> 
> 赞同：6
> 
> 时间：2012-07-22T18:20:53.820
> 
> 标签：java, android, status, power-management

```
@Override
public void onReceive(Context context, Intent intent) {
int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS,
    BatteryManager.BATTERY_STATUS_UNKNOWN);

    if (status == BatteryManager.BATTERY_STATUS_CHARGING
        || status == BatteryManager.BATTERY_STATUS_FULL)
        Toast.makeText(context, "Charging!", Toast.LENGTH_SHORT).show();
    else
        Toast.makeText(context, "Not Charging!", Toast.LENGTH_SHORT).show();
} 
```

显现：

```
<receiver android:name=".receiver.BatteryReceiver">
    <intent-filter>
        <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
        <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
        <action android:name="android.intent.action.BATTERY_CHANGED" />
    </intent-filter>
</receiver> 
```

在此代码中，Toast 始终显示“未充电！”。我在实际设备上进行了测试，当我将其插入 AC 或 USB 电源时，它仍然显示“未充电！” 吐司。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T18:32:50.477

您无法`ACTION_BATTERY_CHANGED`通过清单注册，因此您不会收到这些广播。您正试图从中获得`BatteryManager`额外的东西`Intents`，而不是那些额外的东西（例如，`ACTION_POWER_CONNECTED`）。结果，您将获得 的默认值`BATTERY_STATUS_UNKNOWN`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:38:19.753

尝试以下操作：

```
IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
Intent batteryStatus = context.registerReceiver(null, ifilter);
int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1); 
```

'status' 现在将是 1 到 5 之间的值：

```
1 = Unknown
2 = Charging
3 = Discharging
4 = Not Charging
5 = Full 
```

你的代码：

```
if (status == BatteryManager.BATTERY_STATUS_CHARGING
    || status == BatteryManager.BATTERY_STATUS_FULL) ... 
```

可以写成：

```
if (status == 2 || status == 5) ... 
```

两者是相同的，因为 BatteryManager.BATTERY_STATUS_CHARGING 是一个*始终*等于 2 的常量，而 BatteryManager.BATTERY_STATUS_FULL 是一个*始终*等于 5 的常量。

# php - 不要在 Drupal 自定义模块上使用字段类型

> ID：11602842
> 
> 赞同：0
> 
> 时间：2012-07-22T18:22:03.650
> 
> 标签：php, drupal-7, drupal-modules, field

我正在创建一个自定义模块和内容类型。并在我的页面上显示这些项目。我的模块是：

```
function theme_news(){
    global $language;

    $output = '';

    drupal_set_title('News');

    $m_query = db_select("node","n")->extend("PagerDefault")->limit(10);
    $m_query->fields("n",array('nid','title','language'));
    $m_query->condition('status','1',"=");
    $m_query->condition('n.type','news','=');
    //$m_query->condition('n.language',$language->language,'=');
    $m_query->orderBy('n.sticky','desc');

    if(arg(1) == 'latest_news'){
        $m_query->join('field_data_field_etype','fe','n.nid=fe.entity_id');
        $m_query->condition('fe.field_etype_value','ap','=');
        if(arg(2) != ''){
            $m_query->join('field_data_field_myear','fy','n.nid=fy.entity_id');
            $m_query->condition('fy.field_myear_value',arg(2),'=');
        }

    }

    if(arg(1) == 'feature_news'){
        $m_query->join('field_data_field_etype','fe','n.nid=fe.entity_id');
        $m_query->condition('fe.field_etype_value','sp','=');
        if(arg(2) != ''){
            $m_query->join('field_data_field_myear','fy','n.nid=fy.entity_id');
            $m_query->condition('fy.field_myear_value',arg(2),'=');
        }
    } 
```

此功能创建 2 个子菜单并显示这些子菜单中的内容。工作我的代码，但我不知道，为什么我看不到 field_myear 值。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:30:14.797

如果您不想使用视图，请创建一个包含关系、顺序、字段和所有您需要的视图，然后通过模块中的视图复制生成的 sql 查询，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:26:33.553

我建议您通过组合 Drupal 视图和过滤器来解决您的任务，而不是立即在您的自定义模块中制作自定义 SQL 查询。在大多数情况下，这就足够了，并且可以减少以后的头痛。

`condition`子句应该是视图过滤器。

`join`s 应该是视图关系

并且您的自定义字段确实应该是 CCK 字段。

# php - 多张图片上传的动态文件名

> ID：11602844
> 
> 赞同：3
> 
> 时间：2012-07-22T18:22:17.847
> 
> 标签：php, image, upload

我正在使用 class.upload.php 并且我的代码都可以正常工作，除了我想扩展我的脚本以处理多个文件上传我阅读了网站上的文档并能够弄清楚。但是我需要我的图像文件输出，如 m_1234_1、m_1234_3、m_1234_4 等等......如何让它从每次迭代`$handle->file_new_name_body = $new_name;`开始`$new_name.'1'`并继续添加 1？

```
<?php
    $id = $_GET['id'];
    if(isset($_POST['submit'])) {
        // define variables
        $new_name = 'm_'.$id.'_';
        $thumb_name = 't_'.$id.'_';
        $ext = 'jpg';
        $upload_path = 'images/uploads/'.$id.'/'; // will not work with /images/
        $full_src = $upload_path.$new_name.'.'.$ext;
        // end define variables

        $files = array();
        foreach ($_FILES['userfile'] as $k => $l) {
         foreach ($l as $i => $v) {
         if (!array_key_exists($i, $files))
           $files[$i] = array();
           $files[$i][$k] = $v;
         }
        }     

        foreach ($files as $file) {

            $handle = new upload($_FILES['userfile']);
            if ($handle->uploaded) {
                // save uploaded image 458 x 332
                $handle->file_new_name_body = $new_name;
                $handle->image_convert = $ext;
                $handle->allowed = array('image/*');
                $handle->jpeg_quality = 95;
                $handle->image_resize = true;
                $handle->image_ratio_crop = true;
                    $handle->image_x = 458;
                    $handle->image_y = 332;
                $handle->file_overwrite = true;
                $handle->auto_create_dir = true;
                $handle->process($upload_path);
                if ($handle->processed) {
                    mysql_select_db($db);
                    mysql_query("UPDATE projects SET last_modified=NOW(), project_image_1 = '".$full_src."' WHERE id = $id") or die(mysql_error());
                } else {
                    echo '<div class="ec-messages messages-error">';
                    echo 'Error: ' . $handle->error;
                    echo '</div>';
                }
                // create thumbnail 104 x 76
                $handle->file_new_name_body = $thumb_name;
                $handle->image_convert = $ext;
                $handle->allowed = array('image/*');
                $handle->jpeg_quality = 90;
                $handle->image_resize = true;
                $handle->image_ratio_crop = true;
                    $handle->image_x = 104;
                    $handle->image_y = 76;
                $handle->file_overwrite = true;
                $handle->auto_create_dir = true;
                $handle->process($upload_path);
                if ($handle->processed) {
                    echo '<div class="ec-messages messages-success">Image successfully uploaded and added to database (thumnails created)<br>Redirecting to <a href="projects.php?msg=insert">projects main</a>...</div><br><img src="'.$full_src.'" class="display-image">';
                    echo "<script>setTimeout(\"location.href='projects.php?msg=insert';\",2000);</script>";
                    include('Templates/footer_exit.php');
                    $handle->clean();
                    exit;
                } else {
                    // no error here, error will be handled by the first script
                }
            }
        }
    }   
    ?> 
```

更新（现在工作）：

```
 <?php
$id = $_GET['id'];
if(isset($_POST['submit'])) {
    // define variables
    $ext = 'jpg';
    $upload_path = 'images/uploads/'.$id.'/'; // will not work with /images/
    // end define variables

    $files = array();
    foreach ($_FILES['userfile'] as $k => $l) {
     foreach ($l as $i => $v) {
     if (!array_key_exists($i, $files))
       $files[$i] = array();
       $files[$i][$k] = $v;
     }
    }     
    $counter = 1;
    foreach ($files as $file) {

        //$append = rand(100,99999);
        $new_name = 'm_'.$id;
        $thumb_name = 't_'.$id;
        $handle = new upload($file);
        if ($handle->uploaded) {
            // save uploaded image 458 x 332
            $count = $counter++;
            $nn = sprintf("%s_%d", $new_name, $count);
            $full_src = $upload_path.$nn.'.'.$ext;
            $handle->file_new_name_body = $nn;
            $handle->image_convert = $ext;
            $handle->allowed = array('image/*');
            $handle->jpeg_quality = 95;
            $handle->image_resize = true;
            $handle->image_ratio_crop = true;
                $handle->image_x = 458;
                $handle->image_y = 332;
            $handle->file_overwrite = true;
            $handle->auto_create_dir = true;
            $handle->process($upload_path);
            if ($handle->processed) {
                mysql_select_db($db);
                mysql_query("UPDATE projects SET last_modified=NOW(), project_image_".$count." = '".$full_src."' WHERE id = $id") or die(mysql_error());
            } else {
                echo '<div class="ec-messages messages-error">';
                echo 'Error: ' . $handle->error;
                echo '</div>';
            }
            // create thumbnail 104 x 76
            $tn = sprintf("%s_%d", $thumb_name, $count);
            $handle->file_new_name_body = $tn;
            $handle->image_convert = $ext;
            $handle->allowed = array('image/*');
            $handle->jpeg_quality = 90;
            $handle->image_resize = true;
            $handle->image_ratio_crop = true;
                $handle->image_x = 104;
                $handle->image_y = 76;
            $handle->file_overwrite = true;
            $handle->auto_create_dir = true;
            $handle->process($upload_path);
            if ($handle->processed) {
                echo 'Done!';
                /*
                echo '<div class="ec-messages messages-success">Image successfully uploaded and added to database (thumnails created)<br>Redirecting to <a href="projects.php?msg=insert">projects main</a>...</div><br><img src="'.$full_src.'" class="display-image">';
                echo "<script>setTimeout(\"location.href='projects.php?msg=insert';\",2000);</script>";
                include('Templates/footer_exit.php');
                $handle->clean();
                exit;
                */
            } else {
                // no error here, error will be handled by the first script
            }
        }
    }
}   
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:59:09.953

你可以定义

```
$new_name = 'm_'.$id.'_';
$counter = 1;              // File counter 
```

在开头，并将该行替换为

```
$handle->file_new_name_body = sprintf("%s.%d", $new_name, $counter++); 
```

这样“文件”就会变成“file.1.jpg”，依此类推。

# macos - 在 OS X 中，什么是 BASE 图形绘制层？

> ID：11602845
> 
> 赞同：1
> 
> 时间：2012-07-22T18:22:28.470
> 
> 标签：macos, opengl, graphics, drawing, appkit

我开始在 OSX 中进行 GUI 开发，我想知道，系统中绘制图形的 VERY BASE 层是什么？似乎有很多上层抽象（AppKit、OpenGL、CG 等），它们既好又省时，但对我来说，在我了解基础层之前无法使用（除非它的二进制或程序集，在这种情况下我会加入毛巾）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:42:47.757

> 我开始在 OSX 中进行 GUI 开发，我想知道，系统中绘制图形的 VERY BASE 层是什么？

信不信由你，但自从 MacOS X Tiger 以来，整个图形堆栈都基于 OpenGL。OpenGL 下面只有 GPU 驱动程序，然后是裸机。

> 似乎有很多上层抽象（AppKit、OpenGL、CG 等），它们既好又省时，但对我来说，在我了解基础层之前无法使用（除非它的二进制或程序集，在这种情况下我会加入毛巾）。

为什么它们对你不可用？您希望从增加的知识中获得什么？您使用的级别越低，您必须越了解它是如何有效利用它的。OpenGL 本身已经相当低级了。OpenGL 实现向您隐藏了一些血腥细节，例如按需纹理数据从快速内存交换到常规内存等，并且 GLSL 编译器也相当高级。但另一方面，为了有效地使用 OpenGL，您应该以 GPU 原生使用的格式提供数据，着色器可以以二进制形式缓存，缓冲区对象为您提供用于 DMA 传输的 API。

如果你真的对最低层感兴趣，那你就必须看看 GPU 设计，即金属。AMD 实际上确实在他们的一些 GPU 上发布了完整的编程文档（Google for OpenGPU）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:29:20.250

你可以做的比查看[Quartz 2D Programming Guide](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)更糟糕。这是您将最常使用的层，理解这一点将成为您进行任何进一步调查的基础。

# android - 如何在 android 和 opengl es 1.1 中使用顶点缓冲区

> ID：11602846
> 
> 赞同：2
> 
> 时间：2012-07-22T18:22:54.770
> 
> 标签：android, opengl-es-1.1

我几乎一整天都在尝试使用 opengl 1.1 和顶点缓冲区来渲染简单的多边形，但没有运气。我搜索和搜索，但我没有找到太多。

这是我到目前为止所拥有的：

```
public class Polygon {

    int bufferId = 0;

    private FloatBuffer vertexBuffer;  // Buffer for vertex-array

    private float[] vertices = {  // Vertices for the square
            -1.0f, -1.0f, 0.0f,  // 0\. left-bottom
            1.0f, -1.0f, 0.0f,  // 1\. right-bottom
            -1.0f, 1.0f, 0.0f,  // 2\. left-top
            1.0f, 1.0f, 0.0f   // 3\. right-top
    };

    private ByteBuffer indexBuffer;

    private byte[] indices = {0, 1, 2, 3}; // Indices to above vertices (in CCW)

    // Constructor - Setup the vertex buffer
    public Polygon() {
        // Setup vertex array buffer. Vertices in float. A float has 4 bytes
        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder()); // Use native byte order
        vertexBuffer = vbb.asFloatBuffer(); // Convert from byte to float
        vertexBuffer.put(vertices);         // Copy data into buffer
        vertexBuffer.position(0);           // Rewind

        indexBuffer = ByteBuffer.allocateDirect(indices.length);
        indexBuffer.put(indices);
        indexBuffer.position(0);

        int[] buffers = new int[1];
        GLES11.glGenBuffers(1, buffers, 0);
        bufferId = buffers[0];

        GLES11.glBindBuffer(GLES11.GL_ARRAY_BUFFER, bufferId);
        GLES11.glBufferData(GLES11.GL_ARRAY_BUFFER, vertices.length, vertexBuffer, GLES11.GL_STATIC_DRAW);
        GLES11.glBindBuffer(GLES11.GL_ARRAY_BUFFER, 0);
    }

    // Render the shape
    public void draw(GL10 gl) {

        GLES11.glBindBuffer(GLES11.GL_ARRAY_BUFFER, bufferId);

        GLES11.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        GLES11.glVertexPointer(3, GLES11.GL_FLOAT, 0, 0);
        GLES11.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length);
        GLES11.glDisableClientState(GL10.GL_VERTEX_ARRAY);

        GLES11.glBindBuffer(GLES11.GL_ARRAY_BUFFER, 0);
    }
} 
```

它不会呈现任何内容，并且 android logcat 中没有相关错误。我省略了其余的代码。问题显然出在这个类中，因为当我将 draw 方法更改为此时它可以正常工作：

```
public void draw(GL10 gl) {

            GLES11.glEnableClientState(GL10.GL_VERTEX_ARRAY);
            GLES11.glVertexPointer(3, GLES11.GL_FLOAT, 0, vertexBuffer);
            GLES11.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length);
            GLES11.glDisableClientState(GL10.GL_VERTEX_ARRAY);

        } 
```

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:28:11.650

1.  不要在 logCat 中查找错误，您要使用 glGetError() 检查 OpenGL 错误，并检查返回值是否为零（无错误）或非零（错误）。

2.  vertices.length 是 glDrawArrays 的错误参数。您想提供顶点数，而不是浮点数。它应该是 vertices.length/3 （每个顶点 3 个浮点数）。您目前正在通过您的数组进入一些垃圾数据，所以我不确定这可能会产生什么样的后果。

# java - 如何从可能返回 null 的方法中分配变量？

> ID：11602847
> 
> 赞同：8
> 
> 时间：2012-07-22T18:22:59.893
> 
> 标签：java, freemarker

我有以下代码，我将 Java 方法的结果分配给 freemarker 变量。

```
<#assign singleBenchmark = solverBenchmark.findSingleBenchmark(problemBenchmark)> 
```

问题是该 Java 方法的返回值可能`null`。即使我检查该变量是否不是`null`：

```
<#if !singleBenchmark??>
    <td></td>
<#else>
    <td>${singleBenchmark.score}</td>
</#if> 
```

**`<#assign ...>`如果该 Java 方法返回，它仍然在线崩溃，但`null`**有以下例外：

```
freemarker.core.InvalidReferenceException: Error on line 109, column 45 in index.html.ftl
solverBenchmark.findSingleBenchmark(problemBenchmark) is undefined.
It cannot be assigned to singleBenchmark
    at freemarker.core.Assignment.accept(Assignment.java:111) 
```

如何避免此异常，而不必`findSingleBenchmark`在我的 ftl 中多次调用该方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T19:03:59.877

处理此类不安全 API 的常规方法是使用`!`(bang) 运算符：

```
<#assign singleBenchmark = solverBenchmark.findSingleBenchmark(problemBenchmark)!> 
```

[这在 FreeMarker 文档的这一部分中进行了](http://freemarker.sourceforge.net/docs/dgui_template_exp.html#dgui_template_exp_missing)详细说明，并且[在此处给出了推理](http://freemarker.sourceforge.net/docs/app_faq.html#faq_picky_about_missing_vars)。

* * *

如果您的代码段是实际代码，您可以将其（显着）缩短为：

```
<td>${singleBenchmark.score!""}</td> 
```

# android-ndk - Android 中的 JNI_CreateJavaVM()

> ID：11602852
> 
> 赞同：3
> 
> 时间：2012-07-22T18:23:11.447
> 
> 标签：android-ndk

有两种方法可以让 Android 原生 C/C++ 调用 Java 代码。

1.  Java 应用程序首先调用本机函数。本机函数保存 JavaVM 和 JNIEnv，然后使用它们调用 Java 代码，比如 Java 类 X。

2.  本机函数调用相同的 Java 类 X。在这种情况下，我们需要一个 JVM 来运行 Java 代码。JNI_CreateJavaVM() 可用于执行此操作。

我发现以上两种方式创建的 JVM 是不同的。

这是 Java 类 X。

```
public class X
{
    public X()
    {
        Log.d("X", "X()");
    }
} 
```

Log.d() 可以以方式 1 成功运行。但是，在方式 2 中，我从 logcat 收到以下错误消息：“No implementation found for native Landroid/util/Log;.println_native(IILjava/lang/String ;java/lang/String;)I"

我认为从 JNI_CreateJavaVM() 获得的 JNIEnv 遗漏了一些东西。如果我必须使用方式2，我该如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:17:37.717

也许 com.android.internal.util.WithFramework 中的代码可以帮助你。[在这里](https://stackoverflow.com/questions/13000561/cli-on-dalvikvm-fails-on-jni-lib)查看我的类似问题

# java - 当主数据库出现故障时切换到 Hibernate 中的其他数据库

> ID：11602854
> 
> 赞同：1
> 
> 时间：2012-07-22T18:23:18.647
> 
> 标签：java, spring, hibernate

我正在使用休眠从数据库中获取数据。我们有 20 多个节点的 oracle RAC 数据库。

现在的问题是，如果数据库的一个节点发生故障，我必须切换到另一个节点，在运行时没有应用程序抛出错误，如果该节点已关闭，我必须切换到第三个节点。

当我们使用传统的 JDBC 方式建立连接时，它可以很容易地完成，因为当与节点的连接失败时，连接对象将为空。

这就是我创建会话工厂的方式，

私有静态最终SessionFactory sessionFactory = buildSessionFactory();

```
 private static SessionFactory buildSessionFactory() 
  {
       try 
       {
       return new Configuration().configure("database.cfg.xml").buildSessionFactory();
       }
  } 
```

这就是获取会话的方式，

session = HibernateUtil.getSessionFactory().openSession();

现在，我如何确定节点已关闭，以便我可以尝试连接到备用节点。

我不能使用以下类型的配置，因为我所有的节点 sid 都不同

```
jdbc:oracle:thin:@(description=(address_list=(load_balance=on)(failover=on)       (address=(protocol=tcp)(host=host1)(port=1521))(address=(protocol=tcp)(host=host2)(port=1521)))(connect_data=(service_name=xxxxsid)(failover_mode=(type=select)(method=basic))) 
```

我从 2 天开始就摸不着头脑，想知道如何才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:35:04.373

我建议，当您打开会话时，您应该做出断言（Java 断言），例如读取会话状态（只读或其他），这样您可以检查天气连接是否处于活动状态，基于您可以尝试获取的断言另一个节点的不同会话。

此链接可能会对您有所帮助（做出断言）：

[https://forum.hibernate.org/viewtopic.php?f=1&t=1001337](https://forum.hibernate.org/viewtopic.php?f=1&t=1001337)

希望能帮助到你 ;-）

# php - Yii 中的 with() 多于两级？

> ID：11602858
> 
> 赞同：0
> 
> 时间：2012-07-22T18:23:43.227
> 
> 标签：php, activerecord, yii

我正在尝试这样做：

```
$this->PickTicketLineModel->PickTicket->SO->CustomerShipToModel 
```

如果我浏览每一部分，我会得到一个 PickTicketLine 模型，一个 PickTicket 模型，一个 SO 模型。当我到达 CustomerShipToModel 时，我返回 null。由于这应该与数据库中的现有行匹配，我假设关系出了问题。有什么建议么？

Pick Ticket Line Table 关系

```
'PickTicket' => array(self::BELONGS_TO, 'TblwhPickTicket', 'PickTicketNumber'), 
```

取票表关系

```
'SO' => array(self::BELONGS_TO, 'TblsoSO', 'SONumber'), 
```

SO 表关系

```
'CustomerShipToModel' => array(self::BELONGS_TO, 'TblarCustomerShipTo', 'CustomerShipTo'), 
```

客户送货到餐桌关系

```
'CustomerShipToModel' => array(self::HAS_MANY, 'TblarsoSO', 'CustomerShipTo'), 
```

这就是我首先获得 PickTicketLine 模型的方式：

```
$this->pickTicketLine = TblwhPickTicketLine::model()->with('PickTicket','PickTicket.SO')->FindByPk(array('PickTicketNumber'=>$pickTicketNumber, 'PickTicketLineNumber'=>$pickTicketLineNumber)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:05:11.453

尝试显式地急切加载所有相关数据：

```
$this->pickTicketLine = TblwhPickTicketLine::model()->with(array(
    'PickTicket' => array(
        'with' => array(
            'SO' => array(
                'with' => array('CustomerShipToModel')
            )
        )
    )        
))->findByPk(array(
    'PickTicketNumber'=>$pickTicketNumber,
    'PickTicketLineNumber'=>$pickTicketLineNumber
)); 
```

如果这也不起作用，请按照 Pentium10 在评论中的建议记录您的数据库请求并检查查询。您可以让 phpMyAdmin 执行查询或使用 MySQL “EXPLAIN”关键字获取更多信息。为了获取相关日志，您必须将以下行添加到您的 config/main.php 文件中：

```
'components'=>array(
    'db'=>array(
        'enableProfiling' => true,
        'enableParamLogging' => true
    )
) 
```

# asp.net - Asp ajaxtoolkit 组合框无法在 Firefox 中输入

> ID：11602862
> 
> 赞同：0
> 
> 时间：2012-07-22T18:24:05.667
> 
> 标签：asp.net, ajax

Asp ajaxtoolkit 组合框在 Firefox 中不起作用。我无法在 Firefox 中输入组合框。但在 IE 中可以正常工作。

```
<ajaxToolkit:ComboBox ID="ComboBox1" runat="server" AutoPostBack="False" DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend" CaseSensitive="False" CssClass="" ItemInsertLocation="Append" >
   <asp:ListItem>Apple</asp:ListItem>
   <asp:ListItem>Orange</asp:ListItem>
   <asp:ListItem>banana</asp:ListItem>
   <asp:ListItem>Mango</asp:ListItem>
   <asp:ListItem></asp:ListItem>
</ajaxToolkit:ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T09:09:52.353

添加 MaxLength="50" 或您的要求。它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:41:13.593

DropDownStyle="DropDownList" 阻止输入

# android - 我如何修复损坏的资源 eclipse android

> ID：11602864
> 
> 赞同：0
> 
> 时间：2012-07-22T18:25:04.980
> 
> 标签：android, eclipse

我试图在我的 res 中创建一个新文件夹，这样做之后，我的整个项目在任何有 R.drawable 或 R.layout 参考的地方都充满了错误。我尝试运行“干净的项目”但无济于事..我认为有一个文件我需要删除然后运行干净的项目但不记得它是什么..请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:26:55.913

尝试删除 tour gen 文件夹下的 R.java 类，然后再次构建项目。

# jquery - jQuery选择带有ID和类的div

> ID：11602870
> 
> 赞同：2
> 
> 时间：2012-07-22T18:26:04.580
> 
> 标签：jquery, class, html, hide, startswith

我有以下内容：

```
<article id="post-43" class="like"></article>
<article id="post-56" class="like"></article>
<article id="post-78" class="dislike"></article>
<article id="bob" class="like"></article> 
```

我想隐藏所有 ID 以“post-”开头的文章，这些文章也有使用 jQuery 的“like”类。

我试过这个：

```
$('#show_likes').on('click', function() {
    $('input[name^="post-"].like').hide();
}); 
```

但它不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T18:27:21.797

使用`article`代替`input`，而`id`不是`name`：

```
$('article[id^="post-"].like').hide(); 
```

# sql-server - TSQL 插入事务日志填满

> ID：11602872
> 
> 赞同：0
> 
> 时间：2012-07-22T18:26:21.433
> 
> 标签：sql-server, tsql, transaction-log

需要生成一些测试数据。此插件为 800,000 X 1,000。我知道很多，但这是一个真正的应用程序，其中随机数将是一个计算出来的数字。

我怎样才能打破这个，这样事务日志就不会填满？

```
insert into sIDcrossMatch
  select 
  docSVsys1.sID, docSVsys2.sID, Abs(Checksum(NewId())) % 100 As RandomInteger 
  from docSVsys as docSVsys1 
  join docSVsys as docSVsys2
  on docSVsys1.sID <> docSVsys2.sID 
  where docSVsys1.sID < 1000
  order by docSVsys1.sID, docSVsys2.sID 
```

它将插入一个`docSVsys1.sID`而不填满事务日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:34:13.617

由于那是您的测试数据库，因此请先确保您的[恢复模型](http://msdn.microsoft.com/en-us/library/ms189275%28v=sql.105%29.aspx)为 Simple，然后让[日志](http://msdn.microsoft.com/en-us/library/ms365418%28v=sql.105%29.aspx)尽可能多地增长（如果需要，添加更多文件）。并确保您了解这些设置的后果。

下一步，或者如果您无法设置恢复模式并允许日志增长的第一步，请通过添加 where 子句将您的插入语句拆分为多个插入语句，如下所示：

1.  插入 #1: where docSVsys1.sID % 2 = 0 /* % 表示模数 */
2.  插入 #2: where docSVsys1.sID % 2 = 1 /* % 表示模数 */

如果这还不够，请增加分隔符 (2) 并添加更多插入语句。多次插入背后的想法是使用更少的日志空间并重用日志空间。

或者，如果可能的话，请使用 SSIS 并使用一个带有选择查询的源组件和一个目标组件（不要忘记设置批量大小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:22:33.387

正如@usr 指出的那样，这只是太多的数据。应该事先算好。一个大数字的平方是一个非常大的数字。这更适用于 Azure 表存储。这似乎有效。给了支票菲利普。

```
DECLARE @sid int

DECLARE sID_cursor CURSOR FOR 
SELECT top 10 sID
FROM docSVsys
ORDER BY sID

OPEN sID_cursor

FETCH NEXT FROM sID_cursor
INTO @sID

WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT @sID

    insert into sIDcrossMatch
    select @sid, docSVsys.sID, Abs(Checksum(NewId())) % 100 As RandomInteger 
    from docSVsys 
    where docSVsys.sID <> @sid
    order by docSVsys.sID;
    checkpoint;

    FETCH NEXT FROM sID_cursor
    INTO @sID

END 
CLOSE sID_cursor;
DEALLOCATE sID_cursor; 
```

# objective-c - 每个动作方法都需要一个发送者对象吗？

> ID：11602876
> 
> 赞同：2
> 
> 时间：2012-07-22T18:26:45.357
> 
> 标签：objective-c, ios, xcode, ibaction

我可以完全省略参数吗？我似乎在我的 IBAction 方法中找不到它的用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:28:58.753

是的，如果你不想要它，你可以省略它：

```
-(IBAction)action{
    // some stuff
} 
```

虽然它可以在很多情况下派上用场

资料来源：[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW44)

# php - 发送不会进入垃圾邮件的自动邮件

> ID：11602880
> 
> 赞同：0
> 
> 时间：2012-07-22T18:26:56.680
> 
> 标签：php, mysql

我正在测试当用户忘记密码并将其发送到那里的电子邮件地址时生成 random_password 的代码。该代码工作正常，除了它进入垃圾邮件，我的问题是，我是否可以采取任何措施使邮件进入收件箱，或者您是否需要注册为真正的公司才能获得自动电子邮件认证。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:39:02.437

您不能 100% 确定自己会远离所有垃圾邮件过滤器；您只能采取措施使您的邮件看起来尽可能非垃圾邮件。一些想法：

*   利用[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)和[DKIM](http://en.wikipedia.org/wiki/DomainKeys)
*   [签署您的消息](http://en.wikipedia.org/wiki/Digital_signature)（将要求您拥有非自签名的有效证书）
*   使用有效的`From:`地址（以及其余的标题数据，当你在它的时候）
*   正确包含您的消息的文本/纯文本和 HTML 格式版本
*   避免使用类似 SPAM 的触发短语（[SpamAssassin 的默认规则](http://spamassassin.apache.org/tests_3_3_x.html)是一个不错的选择）。
*   确保您的 SMTP 服务器和域不在任何[DNS 黑名单中](http://en.wikipedia.org/wiki/DNSBL)

另见[这个较早的讨论](https://stackoverflow.com/questions/4728791/php-sending-automated-mail-that-doesnt-goto-the-spam-folder?rq=1)

# php - PHP字符串比较不适用于法语é

> ID：11602881
> 
> 赞同：0
> 
> 时间：2012-07-22T18:27:08.280
> 
> 标签：php, wordpress, unicode

如果文本中有“é”，则在获取字符串比较以在 PHP 中工作时遇到问题。下面是我有一堆调试内联代码的代码。问题是，如果我在下拉列表中选择蒙特利尔，则`if`测试不起作用。

```
if ($metabox->get_the_value() == $key) echo $selected;
// original code pre debug 
```

**代码**

```
a= Array(
    [INFORMATION] => INFORMATIONS
    [LODGING] => HEBERGEMENT
    [LOOK OUT FOR] => À SURVEILLER
    [Montréal] => Montréal
    [PROMOTIONS] ==> PROMOTIONS
    [SECTION NAME] ==> NOM DE SECTION
    [SPOTLIGHT] ==> EN VEDETTE
)

foreach (a as $key => $val){
    echo '<option value="'.$key.'"';
    if (strcasecmp ( trim($metabox->get_the_value())), trim($key))== 0) echo $selected ;
    echo '>'.$key.' ('.$val.'):'. strcmp ( $metabox->get_the_value(),  $key).  '</option>';
} 
```

如果我选择并保存蒙特利尔，输出看起来像这样，它被保存在数据库中。

```
<select name="_content_language_meta[_content_cat_type]">
    <option value="-1">Select</option>
    <option value="INFORMATION">INFORMATION (INFORMATIONS):Montréal - 1</option>
    <option value="LODGING">LODGING (HEBERGEMENT):Montréal - 1</option>
    <option value="LOOK OUT FOR">LOOK OUT FOR (À SURVEILLER):Montréal - 1</option>
    <option value="Montréal">Montréal (Montréal):Montréal - -1</option>
    <option value="PROMOTIONS">PROMOTIONS (PROMOTIONS):Montréal - -1</option>
    <option value="SECTION NAME">SECTION NAME (NOM DE SECTION):Montréal - -1</option>
    <option value="SPOTLIGHT">SPOTLIGHT (EN VEDETTE):Montréal - -1</option>
</select> 
```

如果选择了 INFORMATION，则输出

```
<select name="_content_language_meta[_content_cat_type]">
    <option value="-1">Select</option>
    <option value="INFORMATION" selected="selected">INFORMATION (INFORMATIONS):INFORMATION - 0</option>
    <option value="LODGING">LODGING (HEBERGEMENT):INFORMATION - -1</option>
    <option value="LOOK OUT FOR">LOOK OUT FOR (À SURVEILLER):INFORMATION - -1</option>
    <option value="Montréal">Montréal (Montréal):INFORMATION - -1</option>
    <option value="PROMOTIONS">PROMOTIONS (PROMOTIONS):INFORMATION - -1</option>
    <option value="SECTION NAME">SECTION NAME (NOM DE SECTION):INFORMATION - -1</option>
    <option value="SPOTLIGHT">SPOTLIGHT (EN VEDETTE):INFORMATION - -1</option>
</select> 
```

这是一个 WordPress / MYSQL 网站。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:48:20.640

我不是 utf8/char 编码方面的专家，但我可能有很多问题..

关于 UTF-8 值的存储方式，请确保数据库已正确配置为接受 UTF-8 值。确认 utf8 字符已正确存储在数据库中。

确保 DB 字符集设置为“utf8”，并且排序规则也设置为某个 utf8 值，有一段时间我使用“utf8_unicode_ci”，但最近更改为使用“utf8_bin”，因为可能存在“不区分大小写 (ci)" 将使查询的行为不像预期的那样（例如 keY=keY vs key=KeY 和 key=keY 或 key=KEY）

# php - 如何邀请facebook用户的朋友参加活动？

> ID：11602882
> 
> 赞同：0
> 
> 时间：2012-07-22T18:27:12.920
> 
> 标签：php, facebook, api, facebook-graph-api, facebook-fql

我想在应用程序中以用户名创建事件并邀请他的朋友参加。如何在应用程序中做到这一点？我知道如何获得用户：

```
$friends = $facebook->api('/me/friends'); 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:20:31.317

查看此文档以了解如何创建事件：http: [//developers.facebook.com/docs/reference/api/#publishing](http://developers.facebook.com/docs/reference/api/#publishing)。

简而言之，您应该发出带有所需参数的 HTTP POST 请求：

> /PROFILE_ID/事件

带有参数**name**，**start_time**，**end_time**。

查看此[http://developers.facebook.com/docs/reference/api/event/#invited](http://developers.facebook.com/docs/reference/api/event/#invited)了解有关邀请的信息。

这都是关于发出 POST 请求的

> /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3

具有您要邀请的多个用户 ID。

# python - 在 web2py 中创建自定义选项小部件

> ID：11602884
> 
> 赞同：1
> 
> 时间：2012-07-22T18:27:26.657
> 
> 标签：python, widget, web2py

在 web2py 中，内置 SQLFORM.widgets.options.widget 从 Field 的 IS_IN_SET 或 IS_IN_DB 要求中获取选项。我需要一个自定义小部件，但我找不到 Field 类的任何属性或方法来访问选项集。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:00:26.497

您可以通过字段的“requires”属性访问`IS_IN_SET`和验证器，并且每个验证器都有一个方法，您可以调用该方法来获取带有选项的元组列表。例如：`IS_IN_DB``options()`

```
>>> db.mytable.myfield.requires = IS_IN_SET(['apple', 'banana', 'orange'])
>>> print db.mytable.myfield.requires.options()
[('', ''), ('apple', 'apple'), ('banana', 'banana'), ('orange', 'orange')] 
```

# ruby-on-rails - 在 Rails 中为用户模型创建配置文件

> ID：11602885
> 
> 赞同：4
> 
> 时间：2012-07-22T18:28:07.657
> 
> 标签：ruby-on-rails

我的 Rails 应用程序中有一个用户模型。它只有一个名称属性以及添加到它的电子邮件和密码，以便通过设计登录。我想为用户创建一个模型配置文件。我将如何创建它。通过将配置文件属性添加到现有用户模型或通过创建模型配置文件并向其添加belongs_to 关联。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:00:58.573

向您的用户模型添加更多属性会使您的用户对象有点重，并且考虑到您将经常调用该对象，这不是最好的主意。例如，要验证用户，您不需要加载诸如位置或出生日期之类的配置文件属性，而 current_user 助手会这样做。因此，最好在单独的模型中提取配置文件属性并采用 gabreilhilal 的任何一种方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T18:48:19.410

好吧，这取决于您的要求。

如果一个用户只能有一个`profile`，而您只是要添加一些与 相关的属性`user`，则没有理由为其创建一个新类。

但是，即使用户只能拥有一个配置文件，您也可能需要进行一些[规范化](http://en.wikipedia.org/wiki/Database_normalization)。如果是这样，您可能会从表中删除一些属性`users`以创建一个表`profiles`，并且您将拥有一对一的关系。

```
class User < ActiveRecord::Base
  has_one :profile
end 

class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

嗯...根据您的要求，您可能会遇到用户可能拥有多个个人资料的情况。如果是这样：

```
class User < ActiveRecord::Base
  has_many :profiles
end 

class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

总而言之，没有对错之分……这取决于您的要求以及您的设计决策。

# c# - 带有设计器的部分嵌套表单类

> ID：11602886
> 
> 赞同：3
> 
> 时间：2012-07-22T18:28:09.237
> 
> 标签：c#, winforms, dialog, partial, nested-class

我正在制作一个类似 MessageBox 的类（MessageBoxCustom）。我想在一个单独的文件中有一个带有设计器支持的表单，这样我就可以通过 Visual Studio (MessageBoxCustomDialog) 修改外观。

我还想通过 MyMessageBox 外部的代码使这个 MessageBoxCustomDialog 无法访问，并且我正在嵌套 MessageBoxCustomDialog。我想将它移动到一个单独的文件中，以便获得设计师的支持。也许使用部分课程？等级制度将如何发展？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace System.Windows.Forms
{
    public static class MessageBoxCustom
    {
        public static void Show()
        {
            (new MessageBoxCustomDialog()).ShowDialog();
        }

        private class MessageBoxCustomDialog : Form
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:29:28.677

Visual Studio 设计器无法帮助您设计嵌套类。它不是为此而设计的。它检查文件中第一个最外层类的类型，然后决定使用哪个设计器。

如果只是设计表单的布局，我建议照常设计。当你完成你的项目后，你可以用外部类（在两个文件中）包围这个类并将其设为私有。

完成工作后，只需将对话框类复制并粘贴到外部类中并将其设为私有即可。如果您必须重新设计设计，则只需复制和粘贴即可。

MessageBoxCustomDialog.cs：

```
namespace System.Windows.Forms
{
    // make sure this is the first class in the file (required by designer)
    public partial class MessageBoxCustomDialog : Form
    {
        public MessageBoxCustomDialog()
        {
            InitializeComponent();
        }
    }

    public static partial class MessageBoxCustom
    {
        public static void Show()
        {
            new MessageBoxCustomDialog().ShowDialog();
        }

        // put the MessageBoxCustomDialog class here when you are done
    }
} 
```

MessageBoxCustomDialog.Designer.cs：

```
namespace System.Windows.Forms
{
    partial class MessageBoxCustomDialog
    {
        ...
    }

    partial class MessageBoxCustom
    {
        // put the MessageBoxCustomDialog class here when you are done
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:37:59.743

使您的 MessageBoxCustomDialog 成为私有的部分内部类

```
private partial class MessageBoxCustomDialog : Form
{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:43:46.557

您必须使`MessageBoxCustom`部分具有相同的范围`MessageBoxCustomDialog`

**文件 1**

```
using System.Windows.Forms;

namespace System.Windows.Forms
{
    public static partial class MessageBoxCustom
    {
        public static void Show()
        {
            (new MessageBoxCustomDialog()).ShowDialog();
        }

        private partial class MessageBoxCustomDialog : Form
        {

        }
    }
} 
```

**文件 2**

```
using System.Windows.Forms;

namespace System.Windows.Forms
{
    public static partial class MessageBoxCustom
    {
        private partial class MessageBoxCustomDialog : Form
        {
            // designer code
        }
    }
} 
```

您可能会看到此链接[http://msdn.microsoft.com/en-us/library/wa80x488.aspx](http://msdn.microsoft.com/en-us/library/wa80x488.aspx) [限制部分]

# jquery-ui - 按类别设置 TD 值

> ID：11602889
> 
> 赞同：0
> 
> 时间：2012-07-22T18:28:17.990
> 
> 标签：jquery-ui, class, html-table

我有下面的代码形式，我无权访问，也无法编写任何代码。但是在我的网页中，我创建了另一种形式，我可以在其中编写一些脚本。

我的要求：我有一个下拉列表，并且在从中选择值时，我需要更改另一个下拉字段的值，该下拉字段位于不同的下拉列表中。我尝试了以下脚本但无法正常工作。

感谢您对此的任何帮助。编码不是我的职业，但我愿意学习。

```
enter code here

<script type="text/javascript">// <![CDATA[
function doStuff() {
alert($('#donation_campaign').val());
$('#PC1184$ddlDesignations').html($('#donation_campaign').val());
}
// ]]></script>
<h1>Thank you for support</h1>
<p>&nbsp;</p>
<p><label>Select your supporting chapter</label> <select id="donation_campaign"     name="donation[campaign]" onchange=" doStuff()"><option value="Corpus Fund">DC Metro</option><option value="8">Boston</option><option value="13">AZ</option><option value="24">Austin</option><option value="13">JDU</option><option selected="selected" value="13">Common Pool</option></select></p> 
```

* * *

我无权访问的表单代码：**

```
<tr id="PC1184_trDesignation">
            <td class="BBFieldCaption DonationFieldCaption     DonationFieldDropDownCaption">
            <label for="PC1184_ddlDesignations" id="PC1184_lblDesignationCaption">Designation:</label>
        </td>
        <td colspan="2" class="BBFieldControlCell DonationFieldControlCell">
            <select name="PC1184$ddlDesignations"    id="PC1184_ddlDesignations" class="BBFormSelectList DonationSelectList">
            <option selected="selected" value="8">General Unrestricted Fund</option>
            <option value="13">Corpus Fund</option>
            <option value="24">Education Fund</option>

        </select>               
        </td>
    </tr> 
```

* * *

在此先感谢，纳文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:30:58.607

脚本标签在它出现在 HTML 中的那一刻被浏览器处理，代码在那一刻被执行。要推迟执行，您应该将编写的代码绑定到稍后的事件，例如页面加载：

```
$(document).ready(doStuff); 
```

此外，每次更改第一个元素时，似乎都需要调用您的函数。所以你也需要绑定它来改变这个元素的事件。

```
$('#donation_campaign').change(doStuff); 
```

将这两行放在脚本的末尾。

首先，最简单的解决方案是使用`updateEverything`javascript 函数来计算所有依赖项并修改页面上所有必要的元素，以确保一切正确。并且您在页面加载和更改跟踪的依赖项中涉及的任何元素时调用此函数。

# vb.net - VB.NET 将 Alt+Window+Drag 合并到 Form

> ID：11602890
> 
> 赞同：3
> 
> 时间：2012-07-22T18:28:35.810
> 
> 标签：vb.net, window, drag, windows-messages

我知道如果我不使用网络浏览器来填写我的表格，这会起作用。

```
Dim drag As Boolean
Dim mousex As Integer
Dim mousey As Integer

Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    MyBase.WndProc(m)
    '--- Alter the return value of WM_NCHITTEST when the ALT key is down
    If m.Msg = &H84 AndAlso (Control.ModifierKeys And Keys.Alt) <> 0 Then
        '--- Turn HTCLIENT into HTCAPTION
        If m.Result = 1 Then m.Result = 2
    End If
End Sub

Private Sub Form1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Left Then
        drag = True
        mousex = Windows.Forms.Cursor.Position.X - Me.Left
        mousey = Windows.Forms.Cursor.Position.Y - Me.Top
    End If

    Timer1.Enabled = True
    Timer1.Interval = 2500
End Sub

Private Sub Form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
    If drag Then
        Me.Top = Windows.Forms.Cursor.Position.Y - mousey
        Me.Left = Windows.Forms.Cursor.Position.X - mousex
    End If
End Sub

Private Sub Form1_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseUp
    Timer1.Enabled = False
    drag = False
End Sub 
```

但是，我找到了一个具有 Linux Alt+Drag 窗口功能的 Windows 程序，称为[AltWindowDrag](http://www.howtogeek.com/howto/windows-vista/get-the-linux-altwindow-drag-functionality-in-windows/)我知道我可以使用 Process.Start 来运行程序，如下所示......

```
Process.Start(Application.StartupPath & "\AltWindowDrag\AltWindowDrag.exe") 
```

然而，这个问题是当我关闭我的应用程序时，AltWindowDrag 仍在运行。无论如何，当我的表单关闭时，我可以关闭 AltWindowDrag 吗？

任何帮助将不胜感激。

**编辑！**

另一个论坛上的一个家伙帮助我解决了这个问题，所以对于遇到同样问题的其他人来说。这是代码。

```
Dim proc As Process

Private Sub btnStart_Click(sender As System.Object, e As System.EventArgs) Handles btnStart.Click

    proc = Process.Start(Application.StartupPath & "\AltWindowDrag\AltWindowDrag.exe")
End Sub

Private Sub Form1_FormClosing(sender As System.Object, e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing

    If Not proc Is Nothing Then

        If Not proc.HasExited Then

            proc.Kill()
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:55:27.017

这是一个非常简单的技巧，当鼠标按下时，Windows 会询问您的应用程序点击了什么。您可以简单地撒谎并告诉它单击的是标题栏而不是客户区。当您移动鼠标时，这会使 Windows 自动移动窗口。将此代码粘贴到您的表单类中：

```
Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    MyBase.WndProc(m)
    '--- Alter the return value of WM_NCHITTEST when the ALT key is down
    If m.Msg = &H84 AndAlso (Control.ModifierKeys And Keys.Alt) <> 0 Then
        '--- Turn HTCLIENT into HTCAPTION
        If m.Result = 1 Then m.Result = 2
    End If
End Sub 
```

# iphone - 如何从客户设备上禁用 iphone 应用程序

> ID：11602892
> 
> 赞同：-2
> 
> 时间：2012-07-22T18:28:43.630
> 
> 标签：iphone, ios, app-store

我正在向外部公司销售按月付款计划的应用程序。如果他们决定停止支付订阅费，我有什么办法可以删除或禁用客户设备上的应用程序？

例如，我可以使用 Google App Engine，读入一个值并检查是否“有效”。这会通过应用商店审核流程吗？

大学教师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:35:47.720

Apple 可能不会因为您的应用程序具有“自毁”机制而拒绝您的应用程序，但是一旦他们发现您一直在使用它，他们肯定会将您从 App Store 中拉出，原因有两个：

1.  您的应用程序现在对某些人来说毫无用处，这是不可接受的。
2.  您一直在间接销售订阅，而不是通过[Apple](http://www.apple.com/pr/library/2011/02/15Apple-Launches-Subscriptions-on-the-App-Store.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:51:44.213

如果您的应用程序是针对您的目标用户的，为什么不使用登录？如果您已经登录，则可以随时禁用他们的帐户。如果您想变得更复杂，您还可以创建 Web 服务，并在他们登录时检查他们的 UUID。通过这种方式，您可以在他们的帐户或 UUID 上禁止他们。如果他们丢失设备，禁止他们的 UUID 可能有助于保护他们的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:14:52.047

我是这样解释你的情况的：

您有几个客户，假设公司 A 和公司 B，并且您正在为他们俩制作应用程序。为了制作和托管这些应用程序，他们都向您支付月费。

突然，公司 B 停止支付费用，您希望从应用商店中删除应用 B，并使其无法在所有安装了该应用的设备上使用。

你可以这样做：

1.  通过在 iTunesConnect 中将其从销售中删除来从应用商店中删除应用 B
2.  每当有人打开您的任何应用程序（应用程序 A 或 B）时，您都让该应用程序连接到您托管的 Web 服务器，以查看它是否仍然可用。
3.  您可以确保您不进行检查，除非自上次检查以来已经过去了一段时间。
4.  如果您在检查时网络不可用，请稍后再检查并让用户正常使用该应用程序。
5.  如果检查成功并且您发现应用程序不再有效，则向用户提供错误消息并停止显示应用程序的内容。

至于审核过程，我认为应用程序无法使用没有任何问题，只要您将该应用程序从 App Store 上的销售中删除即可。

关于订阅，Apple 规定的是应用程序用户的订阅，而不是你向谁销售应用程序的公司。你可以用任何你喜欢的方式给他们充电。

# html - 网站的 HTML 验证器

> ID：11602907
> 
> 赞同：-2
> 
> 时间：2012-07-22T18:30:27.223
> 
> 标签：html, validation

我有[网站模板](http://www.our-templates.com)并想验证其 HTML。我听说有一个 w5 或类似的东西，我不记得检查 HTML 错误的验证器。那么有人可以给我发一个链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:32:22.947

[http://validator.w3.org/](http://validator.w3.org/)这是标准。

> 这将检查 HTML、XHTML、SMIL、MathML 等 Web 文档的标记有效性。

对于 CSS 有效性之类的内容，您应该查看：http: [//jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:32:22.820

您正在寻找的网站是[W3 标记验证服务](http://validator.w3.org/)(http://validator.w3.org/)。*W3*代表*万维网*。_

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:47:13.533

这取决于您期望验证是什么。W3C 标记验证服务 [http://validator.w3.org/](http://validator.w3.org/)是通常的答案，但它回答的问题不同于人们通常要求验证时的意思。

它最初基于 SGML 的验证概念，这是一个纯粹的形式化过程，一般*不*检查正确性，仅以形式化的方式指定语法规则。除了检测实际的标记错误之外，它还会发出有关违反正式语法的消息，这些消息在任何浏览器中都不会造成伤害（例如`title=Hello!`，没有引号），并接受在任何浏览器中都不起作用的结构（例如`<em/Hello`）。更多信息：[“HTML 验证”是一个很好的工具，但只是一个工具](http://www.cs.tut.fi/~jkorpela/html/validation.html)。

W3C 标记验证服务并不是真正的纯 SGML 验证器（或纯 XML 验证器），但除此之外还有一些检查和警告。还有一个更纯粹的 SGML 验证器：[WDG HTML Validator](http://www.htmlhelp.com/tools/validator/)。

当处理声明为 HTML5 的文档时，使用`<!DOCTYPE html>`，W3C 标记验证服务改变了它的性质：它成为专门针对 HTML5 的临时检查器，其行为与 SGML 验证器完全不同。它被描述为实验性的，不一定对应于最新版本或 HTML5（或“HTML 生活标准”）。从技术上讲，它基于[Validator.nu Living Validator](http://validator.nu/)。

除了极少数例外，这些服务根本不检查嵌入或链接的 CSS 和 JavaScript 的正确性，或链接、语义正确性、可用性、可访问性等。因此，“有效”页面可能看起来一团糟，无法正常工作全部。

还有一些软件以“HTML 验证器”的形式销售（您可以通过谷歌搜索找到），通常执行大量启发式检查，部分基于 HTML 规范，部分基于其他规范，部分基于软件供应商自己的想法正确的。

# c++ - 参考 GetCapture() 函数捕获鼠标是什么意思？

> ID：11602911
> 
> 赞同：0
> 
> 时间：2012-07-22T18:31:10.773
> 
> 标签：c++, winapi, visual-c++, mouseevent

我正在阅读有关 GetCapture() 函数的信息，它是 mfc 的一部分。我仍然不清楚它的作用，以及捕获鼠标的含义，正如这里所说：

[http://msdn.microsoft.com/en-us/library/dxa5eaaa(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/dxa5eaaa(v=vs.80).aspx)

在我的书中，它是这样使用的：

```
 void CSketcherView::OnLButtonUp(UINY nFlags, CPoint point)
 {
   if(this == GetCapture())
       ReleaseCapture();                    // Stop capturing mouse messages

   // ... add information to document
} 
```

那么 GetCapture() 返回什么？“捕获”鼠标是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:59:53.963

作为用于鼠标捕获的具体示例：

取一个带有两个按钮的窗口。单击其中一个并按住鼠标按钮。现在将鼠标光标拖到第二个按钮上并释放鼠标按钮。第一个按钮将收到一条`WM_LBUTTONUP`消息，但第二个按钮不会，即使鼠标光标在它上面。

当第一个按钮收到`WM_LBUTTONDOWN`消息时，它*捕获*了鼠标。当一个窗口捕获鼠标时，它保证它将接收所有后续的鼠标事件（尤其是`WM_LBUTTONUP`消息），即使鼠标已被拖动到其窗口边界之外。这很重要，以便它可以将按钮按下与按钮按下消息匹配并保持正确的状态。这对可用性也很重要（如果您单击一个按钮并意外移动到另一个按钮，您既不想触发第一个按钮也不想触发第二个按钮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:36:27.137

捕获鼠标通常意味着即使鼠标光标位置超出窗口范围，您仍会收到鼠标事件

该`GetCapture`函数仅返回具有鼠标捕获的当前窗口。

# html - 在 css 中提供 height 属性时，scrollHeight 给出不正确的值

> ID：11602914
> 
> 赞同：4
> 
> 时间：2012-07-22T18:31:21.233
> 
> 标签：html

我试图获得我的 div 的 scrollHeight 并且我做对了，但是当我在 CSS 中为那个特定的 div 添加 height 属性时，我得到了一个不同的值。

只需运行[小提琴](http://jsfiddle.net/eagf7/25/)，您将在控制台中看到 scrollheight 属性的值等于 268（等于所有孩子的高度之和）

但是当我在 css 中添加一个高度值（比如 height:50px;）时，输出结果为 252（我认为差异是最后一个子元素的边距）。

有人可以回答为什么会有差异吗？

**编辑** 由于问题不清楚，我改写了 id。当我指定父 div 的高度时，我得到的滚动高度为 252 像素，而如果我没有指定高度或将其设置为“自动”，我得到 268 像素。我只是想知道为什么在后一种情况下边距也不会崩溃？我不担心折叠的边距，只是想知道为什么在这两种情况下滚动高度不同？

下面给出的答案非常好。但是我也使用javascript得到了正确的scrollHeight（包括最后一个孩子的下边距）

```
var h = $(div).height();
$(div).height("auto");
var ch = $(div)[0].scrollHeight;
$(div).height(h); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T23:53:54.643

重新阅读您的问题后，我发现您在问别的问题。但这仍然是我之前发布的相同答案。

总高度正确计算为`254px`。当您明确设置小于此值的高度时，浏览器仅计算`238px`. 这就像您的猜测一样 -`16px`底部没有边距，并且由于“**边距折叠**”而发生。由于这条规则，最后一个边距被丢弃：

> **父母和第一个/最后一个孩子**
> 
> 折叠的边距最终在父级之外。

因此，要修复它，您可以使用：

```
overflow: hidden; 
```

或者您可以使用填充来代替（此填充将“重新构建”您的边距行为，请参见下面的解释）：

```
p {
    padding: 8px;
}
p:first-child, p:last-child {
    padding-top: 16px;
} 
```

有关更多信息，请访问 MDN：[保证金崩溃](https://developer.mozilla.org/en/CSS/margin_collapsing)。

* * *

**编辑：**这是我的第一个答案，在我重新阅读你的问题之前。我会把它留在这里，以防有人有类似的问题，也因为它会导致相同的解决方案。

### 这解决了：为什么兄弟姐妹的高度/边距不符合预期？

您的身高计算正确。你所面临的被称为：**margin collapsing**。

这意味着您所有`<p>`-tags 的顶部和底部边距都被“合并”了。在您有 7 行的情况下，这意味着：

*   18px 是一排的高度
*   顶部和底部的 16px 边距
*   第一个元素的顶部和最后一个元素的底部按预期显示
*   所有其他边距都折叠

这导致：

```
 7 * 18px (height)
+ 6 * 16px (margins in-between)
+ 2 * 16px (margin top and bottom)
= 254px (exact the value calculated by the browser) 
```

您可以通过使用来轻松避免这种情况`padding`。

有关更多信息，请访问 MDN：[保证金崩溃](https://developer.mozilla.org/en/CSS/margin_collapsing)。

# java - 你如何清空 JTable？

> ID：11602915
> 
> 赞同：2
> 
> 时间：2012-07-22T18:31:30.000
> 
> 标签：java, swing, jtable

我正在尝试向 JTable 动态添加行，但遇到 ArrayIndexOutOfBounds 异常时遇到了困难。我很困惑，因为没有具体解释为什么问题存在以及问题发生在哪里。请参阅下面的代码。

```
ArrayList<ArrayList<String>> matrix = new ArrayList<ArrayList<String>>();
Object[][] data;

Random rand = new Random();

******************** WHEN PRESSING A BUTTON *****************************

matrix.add(new ArrayList<String>()); 
((ArrayList<String>)matrix.get(0)).add("row 0 col " + rand.nextInt(100) );
((ArrayList<String>)matrix.get(0)).add("row 0 col 1");
((ArrayList<String>)matrix.get(0)).add("row 0 col 2");
matrix.add(new ArrayList<String>()); 
((ArrayList<String>)matrix.get(1)).add("row 1 col 0");
((ArrayList<String>)matrix.get(1)).add("row 1 col 1");
((ArrayList<String>)matrix.get(1)).add("row 1 col 2");

data = new Object[matrix.size()][];

for(int i = 0; i < matrix.size(); i++){
    data[i] = matrix.get(i).toArray();
}

table = new JTable(data, new String[]{"A", "B", "C"});
table.setFillsViewportHeight(true);
table.setForeground(Color.WHITE);
table.setBackground(Color.BLACK);
table.setBounds(0, 0, 423, 91);

pnlTable.add(table);
pnlTable.setLayout(null);

table.updateUI();
System.out.println("done"); 
```

只有在按钮上按 2 次或更多次后才会出现此问题。谁能帮助我如何动态清空表并在其中添加新数据？

编辑：这是错误日志：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0
    at javax.swing.JTable$1.getValueAt(Unknown Source)
    at javax.swing.JTable.getValueAt(Unknown Source)
    at javax.swing.JTable.prepareRenderer(Unknown Source)
    at javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source)
    at javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source)
    at javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source)
    at javax.swing.plaf.ComponentUI.update(Unknown Source)
    at javax.swing.JComponent.paintComponent(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent._paintImmediately(Unknown Source)
    at javax.swing.JComponent.paintImmediately(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.access$700(Unknown Source)
    at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:41:22.783

要更改 JTable 的内容，请不要重新创建 JTable。只需为其创建一个新的 TableModel，例如 DefaultTableModel 对象或 AbstractTableModel 扩展类对象，然后通过`setModel()`.

此外，您应该避免使用 null 布局，并且永远不要调用 updateUI，除非您正在更改 GUI 的外观和感觉。

例如，

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.util.Arrays;
import java.util.Vector;
import java.util.Random;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;

@SuppressWarnings("serial")
public class TableFoo extends JPanel {
   private static final Vector<String> COLUMN_NAME_VECTOR = new Vector<String>(
         Arrays.asList(new String[] { "A", "B", "C" }));
   private static final int COLUMN_COUNT = COLUMN_NAME_VECTOR.size();
   private JTable table = new JTable();
   private Random rand = new Random();

   public TableFoo() {
      table.setFillsViewportHeight(true);
      table.setForeground(Color.WHITE);
      table.setBackground(Color.BLACK);

      JButton changeData = new JButton(new ChangeDataAction());
      JPanel southPanel = new JPanel();
      southPanel.setBackground(Color.black);
      southPanel.add(changeData);

      setLayout(new BorderLayout());
      add(new JScrollPane(table), BorderLayout.CENTER);
      add(southPanel, BorderLayout.PAGE_END);
   }

   public void changeTableData() {
      Vector<Vector<String>> matrix = new Vector<Vector<String>>();

      int rowCount = rand.nextInt(5) + 3;
      for (int i = 0; i < rowCount ; i++) {
         Vector<String> row = new Vector<String>();
         for (int j = 0; j < COLUMN_COUNT; j++) {
            String rowText = String.format("row %d col %d:   %d", i, j, rand.nextInt(100));
            row.add(rowText );
         }
         matrix.add(row);
      }

      DefaultTableModel model = new DefaultTableModel(matrix,
            COLUMN_NAME_VECTOR);

      table.setModel(model);
   }

   private class ChangeDataAction extends AbstractAction {
      public ChangeDataAction() {
         super("Change Action");
      }

      public void actionPerformed(java.awt.event.ActionEvent arg0) {
         changeTableData();
      };
   }

   private static void createAndShowGui() {
      TableFoo mainPanel = new TableFoo();

      JFrame frame = new JFrame("TableFoo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T01:14:19.533

最简单的方法是使用 TableModel。

```
DefaultTableModel model = (DefaultTableModel) this.yourTable.getModel();
model.setRowCount(0); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:46:58.627

*   选项中的第二个是从中删除所有元素`XxxTableModel`，

*   请注意，如果[您从 XxxTableModel 每个元素中删除数据](https://stackoverflow.com/a/10904480/714968)，则必须开始从最后一个元素中删除回第一个元素

`for (int i = model.getRowCount() - 1; i > -1; i--) {`

*   然后添加新元素到`XxxTableModel`

# asp.net - ASP.NET 页面中的 Ext JS 表单

> ID：11602916
> 
> 赞同：0
> 
> 时间：2012-07-22T18:31:48.807
> 
> 标签：asp.net, extjs

我在 ASP.NET 页面中尝试使用 Ext JS 3 表单，但我的表单加载到了 ASP 页面的“BodyContent”之外。我试过： renderTo: Ext.get('BodyContent') 但它不起作用。我的带有 Ext 代码的 asp 页面：

```
<%@ Page Title="Forms" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Forms.aspx.cs" Inherits="ExtJSDemo.Forms" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
    <script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="ext-3.4.0/ext-all-debug.js"></script>
    <script type="text/javascript">
        if (Ext.BLANK_IMAGE_URL.substr(0, 5) != 'data:') {
            Ext.BLANK_IMAGE_URL = 'ext-3.4.0/resources/images/default/s.gif';
        }
        Ext.onReady(function () {
            var movie_form = new Ext.FormPanel({
                url: 'movie-form-submit.aspx',
                renderTo: Ext.getBody(),
                frame: true,
                title: 'Movie Information Form',
                width: 250,
                items: [{
                    xtype: 'textfield',
                    fieldLabel: 'Title',
                    name: 'title'
                },{
                    xtype: 'textfield',
                    fieldLabel: 'Director',
                    name: 'director'
                },{
                    xtype: 'datefield',
                    fieldLabel: 'Released',
                    name: 'released'
                }]
            });
        });
    </script>

</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<!-- I'M EXPECTING MY FORM HERE, BUT IT'S LOADED OUTSIDE BodyContent AT THE BOTTOM OF THE ENTIRE PAGE -->
</asp:Content> 
```

当我使用 renderTo: Ext.get('BodyContent') 我的表单完全没有显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:42:53.913

问题是“BodyContent”不是结果页面 html 中的有效 id。

尝试放置一个空的 div

```
<div id="myform"></div> 
```

在“BodyContent”内容占位符内并更改表单配置以在该 div 内呈现：

`renderTo: 'myform'`

# hibernate - Hibernate OneToMany JoinColmuns 和常量值

> ID：11602925
> 
> 赞同：2
> 
> 时间：2012-07-22T18:33:17.800
> 
> 标签：hibernate, jpa

我在 Data 和 Parameter 之间有这样的一般关系：

```
enum ParameterType { RISK, ASSET }

class Data {

   Long id;

   @OneToMany
   @JoinColumns({
     @JoinColumn(name="data_id")
     @// Restrict DataParameter.type = 'RISK'
   })
   Set<DataParameter> risks;

   @OneToMany
   @JoinColumns({
     @JoinColumn(name="data_id")
     @// Restrict DataParameter.type = 'ASSET'
   })
   Set<DataParameter> assets;
}

class DataParameter {

   Long id;

   ParameterType type;

   @ManyToOne
   Parameter parameter;
   @Temporal
   Date date;
   ...

} 
```

考虑到 ParameterType，如何设法限制这种关系？我正在使用休眠 4.0

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:49:18.560

[您可以通过在 Hibernate 特定的@Where](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/Where.html)注释中提供条件 (SQL) 来限制它。在这种情况下，以下应该工作：

```
 //other annotations as they where 
   @Where(clause="type=0")
   Set<DataParameter> risks; 
```

然后与资产的值 1 相同。

# c# - TreeView 选定节点

> ID：11602928
> 
> 赞同：0
> 
> 时间：2012-07-22T18:33:32.743
> 
> 标签：c#, winforms, treeview

是否有机会删除所选节点周围的这条虚线？

![](../Images/82d86260949aeacc205a883ee781133f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:43:24.323

您不应该删除它，这表示具有焦点的节点，并且对于使用键盘选择节点的用户来说是必需的。

如果您想将此可用性方面抛到窗外，那么您可以，TreeView 支持自定义绘图。将其 DrawMode 属性设置为 OwnerDrawText 并为其 DrawNode 事件实现一个事件处理程序。像：

```
private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e) {
   Color back = e.Node.BackColor;
   Color fore = e.Node.ForeColor;
   if ((e.State & TreeNodeStates.Selected) == TreeNodeStates.Selected) {
       back = Color.FromKnownColor(KnownColor.Highlight);
       fore = Color.FromKnownColor(KnownColor.HighlightText);
   }
   using (var br = new SolidBrush(back))
   e.Graphics.FillRectangle(br, e.Bounds);
   TextRenderer.DrawText(e.Graphics, e.Node.Text, e.Node.TreeView.Font, e.Bounds, fore);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T18:39:45.770

将 CSS 设置为

```
outline: none; 
```

这将删除虚线。

## 编辑：

应用类似这样的css类

```
<SelectedNodeStyle CssClass="selectNodeCSS" /> 
```

**或者**

```
<asp:TreeView ... SelectedNodeStyle-CssClass="selectNodeCSS" ... /> 
```

*CSS：*

```
.selectNodeCSS {
    outline: none;
} 
```

# javascript - Javascript获取多维数组的键

> ID：11602929
> 
> 赞同：4
> 
> 时间：2012-07-22T18:33:36.763
> 
> 标签：javascript, jquery, arrays, multidimensional-array

我有以下数组：

```
$test[$iterator][1][2]['name'] 
```

我有一个需要获取`$iterator`该数组的函数`['name'] == 'value';`

那么我怎样才能使用 Javascript 来获取给定的`$iterator`呢？

另外，我确实看过其他问题，但我不确定他们的答案是否适用于我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T18:38:32.813

你在寻找这样的东西吗？

```
var $iterator;
for (var i = 0; i < $test.length; i++) {
    if ($test[i][1][2]['name'] == 'value')
    {
        $iterator = i;
        break;
    }
} 
```

# c - linux内核函数page_address()

> ID：11602930
> 
> 赞同：2
> 
> 时间：2012-07-22T18:34:03.867
> 
> 标签：c, linux, memory, linux-kernel, linux-device-driver

我对这个功能感到困惑：

```
void * page_address(struct page *page) 
```

其中（1）“将给定页面转换为其逻辑地址”根据“Linux Kerenl 开发第 3 版”（2）“返回与页框相关的线性地址”根据“理解 linux 内核>>”（3）根据“了解linux虚拟内存管理器”“返回页面的物理地址”

那么哪一个是正确的呢？

让我们看（1）：这个函数需要一个指向物理页面（页框）的指针，那个指针不是已经是“与该页框相关的逻辑地址”了吗？那指针值和返回值有什么区别呢？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T04:01:03.887

1 和 2 都是正确的 - 它们是说同一件事的两种方式（尽管解释 2 更清楚）。解释 3 不正确 -`page_address()`返回页框的虚拟地址，而不是物理地址。

`page_address()`不采用指向页面/页框的指针*。*它需要一个指向 的指针`struct page`，这是一个代表页面的内核数据对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-05T11:42:03.613

page_address() 返回页面的虚拟地址。

[http://lxr.free-electrons.com/source/mm/highmem.c#L408](http://lxr.free-electrons.com/source/mm/highmem.c#L408)

```
/**
 * page_address - get the mapped virtual address of a page
 * @page: &struct page to get the virtual address of
 *
 * Returns the page's virtual address.
 */
 void *page_address(const struct page *page)
 {
          unsigned long flags;
          void *ret;
          struct page_address_slot *pas;

          if (!PageHighMem(page))
                  return lowmem_page_address(page);

          pas = page_slot(page);
          ret = NULL;
         spin_lock_irqsave(&pas->lock, flags);
         if (!list_empty(&pas->lh)) {
                 struct page_address_map *pam;

                 list_for_each_entry(pam, &pas->lh, list) {
                         if (pam->page == page) {
                                 ret = pam->virtual;
                                 goto done;
                         }
                 }
         }
 done:
         spin_unlock_irqrestore(&pas->lock, flags);
         return ret;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-22T22:44:34.243

page_address() 返回物理地址，而不是虚拟地址：

[https://www.kernel.org/doc/gorman/html/understand/understand023.html](https://www.kernel.org/doc/gorman/html/understand/understand023.html)

# php - function getBrowserType () 为什么 Chrome 显示为 Mozilla？

> ID：11602931
> 
> 赞同：1
> 
> 时间：2012-07-22T18:34:06.840
> 
> 标签：php, google-chrome, mozilla

我还添加了 Chrome，但现在将其删除，因为它根本没有效果。在存储信息的 MySQL 中，它显示了适用于 Mozilla 和 Chrome 的 mozilla。为什么？Chrome 有自己的代码吗？

```
function getBrowserType () {
    if (!empty($_SERVER['HTTP_USER_AGENT']))
    {
       $HTTP_USER_AGENT = $_SERVER['HTTP_USER_AGENT'];
    }
    else if (!empty($HTTP_SERVER_VARS['HTTP_USER_AGENT']))
    {
       $HTTP_USER_AGENT = $HTTP_SERVER_VARS['HTTP_USER_AGENT'];
    }
    else if (!isset($HTTP_USER_AGENT))
    {
       $HTTP_USER_AGENT = '';
    }
    if (preg_match('/Opera(\/| )([0-9].[0-9]{1,2})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[2];
       $browser_agent = 'opera';
    }
    else if (preg_match('/MSIE ([0-9].[0-9]{1,2})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[1];
       $browser_agent = 'ie';
    }
    else if (preg_match('/OmniWeb\/([0-9].[0-9]{1,2})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[1];
       $browser_agent = 'omniweb';
    }
    else if (preg_match('/Netscape([0-9]{1})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[1];
       $browser_agent = 'netscape';
    }
    else if (preg_match('/Mozilla\/([0-9].[0-9]{1,2})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[1];
       $browser_agent = 'mozilla';
    }
    else if (preg_match('/Konqueror\/([0-9].[0-9]{1,2})/', $HTTP_USER_AGENT, $log_version))
    {
       $browser_version = $log_version[1];
       $browser_agent = 'konqueror';
    }
    else
    {
       $browser_version = 0;
       $browser_agent = 'other';
    }
    return $browser_agent;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:40:40.550

许多浏览器在其用户代理的开头都有 Mozilla/5.0 或其他东西。因此，如果您要检测这样的浏览器，可能会出现问题。但是，您可以使用此`get_browser()`功能为您执行此操作。它非常准确，您不必为这么多正则表达式而烦恼（您还需要不断更新）

[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

它可以这样实现：

```
<?php
$browser = get_browser($_SERVER['HTTP_USER_AGENT'], true);
if($browser['browser'] == 'Mozilla'){
    echo 'Mozilla';
}else if($browser['browser'] == 'Chrome'){
    echo 'Chrome';
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T10:04:01.240

[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php) 我在这里找到的这段代码效果很好，经过测试。

```
<?php
function getBrowser() 
{ 
    $u_agent = $_SERVER['HTTP_USER_AGENT']; 
    $bname = 'Unknown';
    $platform = 'Unknown';
    $version= "";

    //First get the platform?
    if (preg_match('/linux/i', $u_agent)) {
        $platform = 'linux';
    }
    elseif (preg_match('/macintosh|mac os x/i', $u_agent)) {
        $platform = 'mac';
    }
    elseif (preg_match('/windows|win32/i', $u_agent)) {
        $platform = 'windows';
    }

    // Next get the name of the useragent yes seperately and for good reason
    if(preg_match('/MSIE/i',$u_agent) && !preg_match('/Opera/i',$u_agent)) 
    { 
        $bname = 'Internet Explorer'; 
        $ub = "MSIE"; 
    } 
    elseif(preg_match('/Firefox/i',$u_agent)) 
    { 
        $bname = 'Mozilla Firefox'; 
        $ub = "Firefox"; 
    } 
    elseif(preg_match('/Chrome/i',$u_agent)) 
    { 
        $bname = 'Google Chrome'; 
        $ub = "Chrome"; 
    } 
    elseif(preg_match('/Safari/i',$u_agent)) 
    { 
        $bname = 'Apple Safari'; 
        $ub = "Safari"; 
    } 
    elseif(preg_match('/Opera/i',$u_agent)) 
    { 
        $bname = 'Opera'; 
        $ub = "Opera"; 
    } 
    elseif(preg_match('/Netscape/i',$u_agent)) 
    { 
        $bname = 'Netscape'; 
        $ub = "Netscape"; 
    } 

    // finally get the correct version number
    $known = array('Version', $ub, 'other');
    $pattern = '#(?<browser>' . join('|', $known) .
    ')[/ ]+(?<version>[0-9.|a-zA-Z.]*)#';
    if (!preg_match_all($pattern, $u_agent, $matches)) {
        // we have no matching number just continue
    }

    // see how many we have
    $i = count($matches['browser']);
    if ($i != 1) {
        //we will have two since we are not using 'other' argument yet
        //see if version is before or after the name
        if (strripos($u_agent,"Version") < strripos($u_agent,$ub)){
            $version= $matches['version'][0];
        }
        else {
            $version= $matches['version'][1];
        }
    }
    else {
        $version= $matches['version'][0];
    }

    // check if we have a number
    if ($version==null || $version=="") {$version="?";}

    return array(
        'userAgent' => $u_agent,
        'name'      => $bname,
        'version'   => $version,
        'platform'  => $platform,
        'pattern'    => $pattern
    );
} 

// now try it
$ua=getBrowser();
$yourbrowser= "Your browser: " . $ua['name'] . " " . $ua['version'] . " on " .$ua['platform'] . " reports: <br >" . $ua['userAgent'];
print_r($yourbrowser);
?> 
```

# android - 如何通过 qrcode 搜索执行市场应用程序

> ID：11602933
> 
> 赞同：0
> 
> 时间：2012-07-22T18:34:28.903
> 
> 标签：android, windows-phone-7, app-store, qr-code

我需要使用 android 市场、应用商店、Windows 手机市场搜索任何命名的应用程序。我的目标是

1.  通过具有任何应用名称的任何架构 url 生成 qrcode
2.  从手机读取二维码
3.  按照架构 url 打开 Market（应用商店）应用以按应用名称搜索

有可能吗？

请告诉我（Android、iOS、Windows Phone）中的方案 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:07:29.837

这就是我将如何处理它。

你不知道扫码的人是安卓、iOS还是WP7。

使用以下 URL 创建代码

```
http://example.com/?app=AppName 
```

用户将扫描代码。

用户将打开她的网络浏览器。

您的网络服务器将查看手机的用户代理字符串并确定她使用的是 WP7、Android、iOS 还是其他软件。

如果用户的电话被识别，立即执行 HTTP 302 重定向。

对于 Android，重定向到：

```
https://play.google.com/store/search?q=AppName 
```

对于 iOS，重定向到：

```
http://itunes.com/AppName 
```

对于 Windows Phone 7，重定向到：

```
http://www.windowsphone.com/en-GB/search?q=AppName 
```

对于所有其他手机，重定向到您的主页 - 或者有一个页面告诉用户她的手机不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:44:01.970

从 Android 应用程序：

```
market://details?id=<package_name> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T19:50:25.200

[https://developer.android.com/distribute/marketing-tools/linking-to-google-play](https://developer.android.com/distribute/marketing-tools/linking-to-google-play)

这是旧风格。market://details?id=<package_name>

如果 Playstore 应用程序不在设备中，它可能会崩溃。

下面更安全。 [http://play.google.com/store/apps/details?id=](http://play.google.com/store/apps/details?id=) <package_name>

> 如果您想从 Android 应用程序链接到您的产品，请创建一个打开 URL 的 Intent。在您配置此意图时，将“com.android.vending”传递给 Intent.setPackage()，以便用户在 Google Play 商店应用程序中而不是选择器中看到您的应用程序的详细信息。

> 以下示例引导用户在 Google Play 中查看包含包名称 com.example.android 的应用：

# android - 创建可重用的 TTS 对象

> ID：11602934
> 
> 赞同：0
> 
> 时间：2012-07-22T18:34:40.210
> 
> 标签：android, listview, text-to-speech

我想创建一个应用程序，在 ListView 中显示来自本地数据库的数据，让您将字符串添加到数据库，然后读取选择的任何单词。出于面向对象的目的，我想要一个可重用的 TTS 对象。

目前一切都已实现，如果我在 ListView 中选择一个单词，该条目将显示为一个 toast，这意味着我有一个单词字符串。

问题：当我创建我的 TTS 对象时，我得到一个 NullPointerException。

下面的代码显示了当 ListView 中的一个条目被选中时会发生什么：

```
 list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            Cursor cursor = (SQLiteCursor) list.getItemAtPosition(position); 
            String title = cursor.getString(1);
            Toast.makeText(getApplicationContext(), "selected: " + title , Toast.LENGTH_SHORT).show();

//--> App chrashes here
            AndroidTextToSpeechActivity attsa = new AndroidTextToSpeechActivity();
            attsa.speakOut(title);

        }
    }); } 
```

这是日志猫：

> 07-22 20:25:58.718: W/dalvikvm(18373): threadid=1: 线程退出未捕获异常 (group=0x40a6b1f8) 07-22 20:25:58.738: E/AndroidRuntime(18373): 致命异常: main 07-22 20:25:58.738: E/AndroidRuntime(18373): java.lang.NullPointerException 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.content.ContextWrapper.getPackageName(ContextWrapper.java: 127) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.speech.tts.TextToSpeech.(TextToSpeech.java:545) 07-22 20:25:58.738: E/AndroidRuntime(18373):在 android.speech.tts.TextToSpeech.(TextToSpeech.java:522) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.speech.tts.TextToSpeech.(TextToSpeech.java:507) 07- 22 20:25:58.738: E/AndroidRuntime(18373): at eu.tuts.dbexample.obj.AndroidTextToSpeechActivity.(AndroidTextToSpeechActivity.java:20) 07-22 20:25:58.738：E/AndroidRuntime(18373)：在 eu.tuts.dbexample.activities.Datenbanken$1.onItemClick(Datenbanken.java:79) 07-22 20:25:58.738：E/AndroidRuntime(18373)：在 android。 widget.AdapterView.performItemClick(AdapterView.java:292) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.widget.AbsListView.performItemClick(AbsListView.java:1060) 07-22 20:25: 58.738: E/AndroidRuntime(18373): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:2516) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.widget.AbsListView$1。运行(AbsListView.java:3170) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.os.Handler.handleCallback(Handler.java:605) 07-22 20:25:58.738: E/ AndroidRuntime(18373): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.os。Looper.loop(Looper.java:137) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 android.app.ActivityThread.main(ActivityThread.java:4575) 07-22 20:25:58.738: E/AndroidRuntime(18373): at java.lang.reflect.Method.invokeNative(Native Method) 07-22 20:25:58.738: E/AndroidRuntime(18373): at java.lang.reflect.Method.invoke(Method. java:511) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 dalvik.system.NativeStart.main （本机方法）E/AndroidRuntime(18373): at java.lang.reflect.Method.invokeNative(Native Method) 07-22 20:25:58.738: E/AndroidRuntime(18373): at java.lang.reflect.Method.invoke(Method. java:511) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 dalvik.system.NativeStart.main （本机方法）E/AndroidRuntime(18373): at java.lang.reflect.Method.invokeNative(Native Method) 07-22 20:25:58.738: E/AndroidRuntime(18373): at java.lang.reflect.Method.invoke(Method. java:511) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 dalvik.system.NativeStart.main （本机方法）58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 dalvik.system.NativeStart .main（本机方法）58.738: E/AndroidRuntime(18373): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 07-22 20:25:58.738: E/AndroidRuntime(18373): 在 dalvik.system.NativeStart .main（本机方法）

这是 TTS 对象的完整源代码。抱歉发布完整的Sorcecode - 我不知道错误发生在哪里。

```
 package eu.tuts.dbexample.obj;

import java.util.Locale;
import eu.tuts.dbexample.R;
import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AndroidTextToSpeechActivity extends Activity implements TextToSpeech.OnInitListener {
    /** Called when the activity is first created. */

    private TextToSpeech tts = new TextToSpeech(this, this);

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.US);

            if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                //speakOut();
                Log.d("TTS", "TTS init okay");
            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    public void speakOut(String text) {

        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:37:11.523

您不能`TextToSpeech`在 Activity 的构造函数中创建实例，因为构造函数中的第一个参数`TextToSpeech`是 a并且在 Activity 中调用`Context`之前不会设置上下文。`onCreate()`

改变这个：

```
private TextToSpeech tts = new TextToSpeech(this, this); 
```

对此：

```
private TextToSpeech tts; 
```

并将此代码放入`onCreate()`您的活动中：

```
tts = new TextToSpeech(this, this); 
```

# android - 如何将游标返回的对象存储到数组列表中？

> ID：11602944
> 
> 赞同：3
> 
> 时间：2012-07-22T18:36:20.933
> 
> 标签：android

我在游标的帮助下从 sqlite 数据库中获取对象。我想将它们存储到一个数组列表中。问题是我事先不知道返回数据的大小。那么如何将它们放入数组列表中？

代码：

```
public Student findAll()
    {
        db = helper.getWritableDatabase();
        Cursor cursor = db.rawQuery("select sid, name, age from t_student", null 
                );

        if(cursor.moveToNext())
            return new Student(cursor.getInt(cursor.getColumnIndex("sid")), cursor.getString(cursor.getColumnIndex("name")), cursor.getInt(cursor.getColumnIndex("age")));
        return null;
    }

Main:

ArrayList<Student> studentArrayList = new ArrayList<Student>();

        studentArrayList.add(dao.findAll()); //doing this will only return the first object from the database 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T18:50:34.117

每个 ArrayList 实例都有一个容量。容量是用于存储列表中元素的数组的大小。它总是至少与列表大小一样大。随着元素被添加到 ArrayList，它的容量会自动增长。除了添加一个元素具有恒定的摊销时间成本这一事实之外，没有指定增长策略的细节。

这将帮助您以更好的方式理解 ArrayList。

```
public List<Student> findAll() {
        List<Student> studentArrayList = new ArrayList<Student>();
        db = helper.getWritableDatabase();
        Cursor cursor = db.rawQuery("select sid, name, age from t_student", null 
                );

         while(cursor.moveToNext()) {
               studentArrayList.add(new Student(cursor.getInt(cursor.getColumnIndex("sid")), cursor.getString(cursor.getColumnIndex("name")), cursor.getInt(cursor.getColumnIndex("age"))));
            }

            return studentArrayList ;
        }

    ArrayList<Student> studentArrayList = new ArrayList<Student>();

    studentArrayList=findAll(); 
```

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:41:02.300

试试这个：

```
public List<Student> findAll() {
        List<Student> studentArrayList = new ArrayList<Student>();
        db = helper.getWritableDatabase();
        Cursor cursor = db.rawQuery("select sid, name, age from t_student", null 
                );

        while(cursor.moveToNext()) {
           studentArrayList.add(new Student(cursor.getInt(cursor.getColumnIndex("sid")), cursor.getString(cursor.getColumnIndex("name")), cursor.getInt(cursor.getColumnIndex("age"))));
        }

        return studentArrayList ;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:41:15.070

你的问题是，而不是：

```
if(c.moveToNext()) {
    // ...
} 
```

您必须使用 while 循环进行迭代：

```
while(c.moveToNext()) {
    // ...
} 
```

因此：

```
List<Student> myList = new ArrayList<String>();
Cursor c = ...

while(c.moveToNext()) {
    myList.add(new Student(cursor.getInt(cursor.getColumnIndex("sid")), cursor.getString(cursor.getColumnIndex("name")), cursor.getInt(cursor.getColumnIndex("age")));        
}
c.close(); 
```

# cakephp - 如何在 HABTM CakePHP 关系场景中以编程方式添加多个相关记录？

> ID：11602949
> 
> 赞同：0
> 
> 时间：2012-07-22T18:36:38.760
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

我已经设置了模型，以便用户属于组。这两者之间存在有效的HABTM关系。

下面的代码用于使用一些演示数据填充数据库。在以下代码段之前，Groups 表已填充了一些示例组数据。

下面的代码片段有效。它将记录添加到用户表中，并且连接表 (groups_users) 也获得了正确的条目。所以基本上，HABTM 关系运作良好。

这是我的问题：如何添加与*多个*组的关联而不仅仅是单个关系？做一个

```
'组'=>数组（$group1，$group2）
```

而不是

```
'组'=>$group1'
```

如下所述不起作用。当我使用数组时，连接表中根本没有添加任何内容。

非常感谢您的帮助！

```
$groups = $this->Group->find('all');
  for ($i=0; $i<=200; $i++) {                   
$groupIndex1 = rand(0, count($groups)-1);
$groupIndex2 = rand(0, count($groups)-1);

$this->User->set(
  array(
    'id'=>null,
    'name'=>'Dummy User '.$i0,
    'Group'=>$groups[$groupIndex1]
  )
);
$this->User->save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:46:00.903

要为单个用户保存多个组，您必须`hasMany`在用户模型中定义关系。在您的保存代码中，它看起来像：

```
$groups = $this->Group->find('all');
for ($i=0; $i<=200; $i++) {                   
$groupIndex1 = rand(0, count($groups)-1);
$groupIndex2 = rand(0, count($groups)-1);
$data  = 
  array('User' => array(
                        'id'=>null, 
                        'name'=>'Dummy User '.$i0,
                       ),
        'Group'=> array($groups[$groupIndex1], $groups[$groupIndex2])
  )
);
$this->User->saveAssociated($data, array('deep' => true); 
```

[此链接](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)可能会帮助您了解`'deep' => true`选项。

# exact-synergy-enterprise - 如何在 Exact Synergy Enterprise 中为浏览器 UI 组件应用过滤器/特定标准？

> ID：11602950
> 
> 赞同：1
> 
> 时间：2012-07-22T18:36:44.390
> 
> 标签：exact-synergy-enterprise

我正在创建一个维护页面，我想在其中使用浏览器 UI 组件选择一个任务。我具体要做的是过滤并仅显示尚未完成的任务。我可以使用浏览器 UI 组件来实现吗？Exact Synergy Enterprise 是否为此功能提供其他组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:24:53.993

您应该创建浏览器并在UI 组件`Repository Explorer`中使用它。`browsefield`

转到`System`选项卡，处理到`Setup`选项卡，`Repository section`然后单击`Explorer`。找到您的`Repository group`，输入它，单击、等`Browsers`旁边的选项卡。`Business components``Functional components`

单击`Add`并提供`Name`, `Caption`,`Caption suffix`字段。`Query`然后在字段中编写您的 SQL 查询。结构是：

`SELECT <column(s)> FROM <database table> WHERE <column(s)> IS NOT NULL ORDER BY <column>`.

暂时将该`Column info`字段留空。`Result columns`使用将用作浏览器组件结果的列名称填写该字段。

最后，在字段中添加数据库表名`Table list`。单击`Save + Edit`列信息按钮。从下面显示的列表中编辑列名称`Information section`并用标题填写`Header/Term ID`字段，描述您的列（这将显示在前端用户的浏览器 UI 中）。单击`Save`并测试您新创建的浏览器。如果出现问题，请从头开始重复步骤。大多数时候问题可能是错误地填写了列信息字段。

现在转到您的`ASPX`页面并将`browsername`属性添加到您的`browsefield`UI 组件。这样做会将`browserfield`组件设置为您新创建的浏览器组件。这是您在设置`browsefield`UI 组件时希望在维护页面中看到的：

```
<ex:cardfield runat="server" id="cf" caption="Item" captionid="0">
    <ex:browsefield runat="server" id="p" browsername="pbr" datasource="bc" />
</ex:cardfield> 
```

希望这能让您快速了解您需要做什么才能根据您的情况进行调整`tasks`。

# haskell - 使用 ContT 列出迭代器

> ID：11602953
> 
> 赞同：3
> 
> 时间：2012-07-22T18:37:00.193
> 
> 标签：haskell, iterator, continuations

我有一个简单的列表，我想在每个元素之间迭代“yield”并将该元素打印到输出。我正在尝试使用 ContT monad 来执行此操作，但遇到了问题。这是我到目前为止所拥有的：

```
data K a = Nil | K (a,() -> K a)
listIterator :: (Monad m) => [r] -> m (K r)
listIterator [] = return Nil
listIterator (x:xs) = return (ContT (\k -> K (x,k))) >> listIterator xs

runIterator :: IO ()
runIterator = do
  a <- listIterator ([1,2,3] :: [Int])
  let loop Nil = liftIO $ print "nil"
      loop (K (curr,newI)) =
          do
        liftIO $ print curr
        loop (newI ())
  loop a 
```

预期的输出是：

```
1
2
3
nil 
```

我得到的是：

```
nil 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:42:59.863

```
listIterator (x:xs) = return (ContT (\k -> K (x,k))) >> listIterator xs 
```

不符合你的预期，等式推理

```
listIterator (x:xs) 
= return (ContT (\k -> K (x,k))) >> listIterator xs
= (return (ContT (\k -> K (x,k)))) >>= \_ -> listIterator xs
= (\_ -> listIterator xs) (ContT (\k -> K (x,k)))
= listIterator xs 
```

* * *

我不确定你为什么要使用迭代器。Haskell 已经很懒惰了，所以像这样的迭代模式主要只在您遇到需要与需求驱动的使用模式进行良好交互的资源管理问题时使用。而且，您根本不需要延续单子：

而不是编写`K`构造函数来获取一个元组，它更习惯于

```
data K a = Nil | K a (() -> K a) 
```

直观地， 的类型`listIterator`不使用它的一元结构：它只是构造一个值，所以

```
listIterator ::[r] -> K r
listIterator [] = Nil
listIterator (x:xs) = K x (\_ -> listIterator xs) 
```

现在生活微不足道

```
runIterator :: IO ()
runIterator = do
 let a = listIterator ([1,2,3] :: [Int])
     loop Nil = liftIO $ print "nil"
     loop (K curr newI) =
         do
       liftIO $ print curr
       loop (newI ())
 loop a 
```

这可能最好在不使用 do 表示法的情况下编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:53:08.217

这可能不是您要寻找的答案，但如果您对这种编程风格感兴趣，您应该研究`pipes`类似的库。（`conduit`是“现实世界”中的后起之秀，但管道提供了一种更简单的教学工具，这就是我在这里使用它的原因。）

```
$ cabal update && cabal install pipes 
```

管道就像迭代器，除了它们有三种形式：可以获取输入的那些（消费者），产生输出的（生产者），以及两者都做的那些（管道）。如果你连接管道使得输入和输出端都满足，那么它被称为“管道”，它是一个独立的单元，可以在没有任何额外输入的情况下运行。

Pipe 提供了一个 monad 实例以便于创建管道。操作员将`>+>`两条管道连接在一起。

```
import Control.Pipe
import Control.Monad.Trans.Class
import Control.Monad.IO.Class

-- annoyingly, Pipe does not provide a MonadIO instance
instance (MonadIO m) => MonadIO (Pipe a b m) where
  liftIO = lift . liftIO

listIterator :: Monad m => [a] -> Producer (Maybe a) m ()
listIterator (x:xs) = yield (Just x) >> listIterator xs
listIterator []     = yield Nothing

printer :: (MonadIO m, Show a) => Consumer (Maybe a) m ()
printer = do
  mx <- await
  case mx of
    Just x -> liftIO (print x) >> printer
    Nothing -> liftIO (putStrLn "nil")

main = runPipe $ listIterator [1, 2, 3] >+> printer 
```

[Control.Pipe](http://hackage.haskell.org/packages/archive/pipes/2.1.0/doc/html/src/Control-Pipe.html)的源代码非常简单，特别是如果您一直在阅读 Gabriel 最近关于 Free monads 的博客文章，特别是[Why free monads matter](http://www.haskellforall.com/2012/06/you-could-have-invented-free-monads.html)和[Purify code using free monads](http://www.haskellforall.com/2012/07/purify-code-using-free-monads.html)。

# php - 产品变型的数据库结构

> ID：11602955
> 
> 赞同：1
> 
> 时间：2012-07-22T18:37:30.577
> 
> 标签：php, mysql

我正在升级网站以启用产品变体 - 目前该网站仅提供独立产品，但现在需要提供特定产品的变体，例如尺寸或颜色。目的是使站点管理员能够轻松插入/编辑产品变体。

目前的结构如下：

```
table product
=============
id
name
description
category_id
price
stock_level 
```

“价格”和“库存级别”字段现在需要与每个产品变体相关。

一个产品可以有多种变体组合，例如：

1.  产品 ID 5 - 尺寸：小号，颜色：黑色
2.  产品 ID 5 - 尺寸：小号，颜色：棕色

在前端有两个下拉菜单可以选择变体（尺寸和颜色）。选择所需的变体后，这些值将发布到 PHP 脚本，该脚本运行 SQL 查询以检查该特定变体组合是否可用。

我正在努力为此想出一个解决方案。我目前创建了以下功能，我认为这是起点：

1.  能够创建/编辑变体类型，例如尺寸或颜色：

    ```
    table variant_type
    ==================
    id
    name 
    ```

2.  能够为变体类型分配值，例如小、大、黑色、棕色：

    ```
    table variant_type_value
    ========================
    id
    name
    variant_type_id 
    ```

我正在努力想出将存储产品变体组合（包括它们的价格和库存水平）的表的设计。

请记住，在后端，将有一个“添加新变体”表单 - 在此表单上，管理员在添加/编辑时需要选择“尺寸”、“颜色”、“价格”和“库存水平”一个变种。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:43:07.160

我认为最简单的方法是有一个 Product 表；通过包含 Product 表以及 Size 和 Color 表的外键，其中将包含变体的所有详细信息：

```
table variant
=============
variantID
productID
sizeID
colourID
stock
price

table product 
============= 
id 
name 
description 
category_id 

table size
==========
sizeID
sizeName

table colour
============
colourID
colourName 
```

因此，您可以通过将所有四个表连接在一起来获取变体的详细信息。与产品相关的信息通常在`product`表格中，您可以通过创建新表格并将它们链接到表格中来添加额外类型的变体`variant`。

编辑添加：

这样，如果要添加新类型的变体，则需要添加额外的表。您还可以通过将所有变体可能性合并到一个变体表中来解决它：

```
+--+------+------+
|ID|Type  |Option|
+--+------+------+
|1 |Colour|Brown |
|2 |Size  |Small |
+--+------+------+ 
```

然后，您将`variantInfo`在主产品表中拥有多个外键。

我不喜欢这样——我不喜欢在同一个表中存储多种类型的信息。我只是觉得这很混乱，你需要让编程逻辑更复杂。如果您想拥有额外的变体类型，我建议您现在就将它们全部设置好——这是一些额外的工作，其中一些不会被使用，但我认为它更容易维护。

# iphone - 背景尺寸：封面在视网膜显示器上看起来像素化

> ID：11602957
> 
> 赞同：4
> 
> 时间：2012-07-22T18:37:55.453
> 
> 标签：iphone, html, css, ipad, retina-display

我正在开发的网站可以在[这里](http://ourcityourstory.com/dev/)看到。如果您查看 iPad 3 或 iPhone 4 上的“关于”或“联系方式”部分，背景看起来全是疯狂的像素化。

我已经`background-size`设置好了，`cover`所以当用户调整它的大小时，它会适当地缩放，但是在 iPad 或 iPhone 上它看起来很糟糕。

有关如何为设备解决此问题的任何帮助或提示`@media only screen and (min-device-pixel-ratio: 2)`？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T02:01:21.077

这是因为您正在使用- 无论出于何种原因，在 iOS 上`background-attachment:fixed`使用 this 时都会导致此行为。[（我在http://jag.is](http://jag.is)`background-size: cover`遇到了同样的错误，今天刚刚解决）。

因此，如果您添加以下内容，则应该可以解决：

```
/* for background-size:cover replacement on iOS devices */
@media only screen and (orientation: portrait) and (device-width: 320px), (device-width: 768px) {
    header {
      -webkit-background-size: auto 150%;
      background-attachment: scroll;
    }
}
@media only screen and (orientation: landscape) and (device-width: 320px), (device-width: 768px) {

    header {
      -webkit-background-size: 150% auto;
      background-attachment: scroll;
    }
} 
```

该属性`-webkit-background-size`也适用于 iOS，因为它无法识别`cover``background-size`

[这是](http://kimili.com/journal/the-flexible-scalable-background-image-redux)我从中找到解决方案的文章。

可爱的网站设计顺便说一句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:53:34.390

在为 IOS 创建高分辨率图像时，您需要使用高分辨率媒体查询，您似乎已经在这样做了。此外，您的图像应该是两倍大，然后缩小到 50% 以获得高视网膜。

```
@media all and (-webkit-min-device-pixel-ratio : 1.5) {
            #header { background: url(headerRatio2.png); background-size: 50%; }
        } 
```

这种方法应该可以工作。如果没有，请确保您有适当的元标记，并仔细检查您的代码。

# node.js - 在 Node.JS 中使用名称的枚举驱动器

> ID：11602960
> 
> 赞同：0
> 
> 时间：2012-07-22T18:38:07.877
> 
> 标签：node.js

我实际上是在尝试枚举我的笔记本电脑驱动器并将其返回给客户。我怎样才能用他们的名字枚举驱动器？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:01:56.543

```
require('child_process').exec("wmic logicaldisk get name", console.log, console.error); 
```

# linux - 为什么 Linux 内核（非 SMP）中的自旋锁无操作？

> ID：11602962
> 
> 赞同：1
> 
> 时间：2012-07-22T18:38:22.880
> 
> 标签：linux, kernel, spinlock

我已经读了很长一段时间了，但对我来说没有意义。可能是因为我对这一切都很陌生，仍然不了解一些内核概念。

这就是我想出的（没有错误或 NULL 处理，只是为了这个问题）：

内核自旋锁在内核线程内执行，这是抢占式的。

```
void spinlock_acquire(spinlock_t *spinlock)
{
  tryagain:
    while(spinlock->plock != UNLOCKED) ;
    context_switch_block;
    if(spinlock->plock != UNLOCKED) {
        context_switch_unblock;
        goto tryagain;
    }
    spinlock_lock(spinlock, current_thread);
    context_switch_unblock;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T20:07:10.367

在 Linux 成为抢占式内核之前，UP 上的自旋锁基本上是无操作的。一旦内核被抢占，`preempt_disable()`对自旋锁的调用就会被添加。

所以它或多或少是这样的：

*   你想防止一些冲突的 CPU，使用某种自旋锁。
*   您想防止出现冲突的 softirq、tasklet、... use `spin_lock_bh`，它会禁用 softirq、tasklet 等...（`bh`用于历史名称，它来自“下半部分”）。
*   您想防止出现冲突的硬件中断使用`spin_lock_irq*`，这会禁用硬件中断。
*   所有自旋锁都可以防止抢占。
*   在 UP 内核上，自旋锁不采用真正的自旋锁（因为没有冲突的 CPU，我们不能被抢占，并且有用于处理 hardirqs、softirqs 的自旋锁变体......）。
*   在带有 SMP 内核的 UP 机器上，自旋锁可能会变成 nops。
*   即使在禁用抢占的 UP 内核上，如果启用，自旋锁也可能具有用于自旋锁调试的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:59:39.077

在非 SMP 上不需要自旋锁。由于自旋锁禁用中断，因此其他任何人都不可能在此时拥有锁。一旦线程 A 禁用中断，线程 B 就不可能尝试获取相同的锁，因为没有任何事情可以导致 A 失去 CPU 以支持 B。因此，所有非 SMP 上的自旋锁都是，好吧，什么都没有（除非你要求它禁用中断）。

沙查尔

# php - 使用 PHP 和 JSON 将数组插入 MySQL 数据库

> ID：11602971
> 
> 赞同：1
> 
> 时间：2012-07-22T18:40:03.773
> 
> 标签：php, mysql, json, codeigniter

我想在数据库 mysql 中插入以下日期值作为 json 值，如下例所示：

我希望它们在数据库表行中：

```
 Column static  |                     Column data_1
Row1:      12       |  ["1111111111", "2222222222", "3333333333", "4444444444"]
Row2:      34       |  ["5555555555", "6666666666", "7777777777"]
Row1:      56       |  ["8888888888", "9999999999"] 
```

**演示：** [http ://codepad.viper-7.com/WzGz3p](http://codepad.viper-7.com/WzGz3p)

```
<form method="post">
<input name="static[]" value="12">
<input name="data_1[]" value="1111111111">
<input name="data_1[]" value="2222222222">
<input name="data_1[]" value="3333333333">
<input name="data_1[]" value="4444444444">

<input name="static[]" value="34">
<input name="data_1[]" value="5555555555">
<input name="data_1[]" value="6666666666">
<input name="data_1[]" value="7777777777">

<input name="static[]" value="56">
<input name="data_1[]" value="8888888888">
<input name="data_1[]" value="9999999999">

<input type="submit">
</form> 
```

我的 php 代码不起作用：

```
<?php
$data = array();
$data_1 = $_POST['data_1'];
$static = $_POST["static"];
foreach($static as $idx=>$val){
    $data[] = array(
              'static' => $static[$idx],
              'data_1' => json_encode(Array($data_1[$idx*2],$data_1[$idx*2+1]))             
                   );
}
//$this->db->insert_batch('MyTable', $data);

echo "<pre>";
print_r($data);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:57:49.997

我不建议将这种格式数据存储在数据库中，但是如果您想以这种方式保存，则必须进行一些更改：

更改您的表格：

您正在使用非固定数量的字段，您可以使用如下结构：

```
<input name="static[NUMBER]" value="XXX">
<input name="data_NUMBER[1]" value="YYYYY"> 
```

在php中你可以获得`static=NUMBER`as的信息`$_POST["data_".NUMBER]`

```
<form method="post">
<input name="static[1]" value="12">
<input name="data_1[0]" value="1111111111">
<input name="data_1[1]" value="2222222222">
<input name="data_1[2]" value="3333333333">
<input name="data_1[3]" value="4444444444">

<input name="static[2]" value="34">
<input name="data_2[0]" value="5555555555">
<input name="data_2[1]" value="6666666666">
<input name="data_2[2]" value="7777777777">

<input name="static[3]" value="56">
<input name="data_3[0]" value="8888888888">
<input name="data_3[1]" value="9999999999">

<input type="submit">
</form> 
```

并更改php：

```
foreach($static as $idx=>$val){
    $data_=$_POST["data_".$idx];
    $data[] = array(
        'static' => $static[$idx],
        'data_1' => json_encode($data_)             
    );
} 
```

[http://codepad.viper-7.com/i2xvKC](http://codepad.viper-7.com/i2xvKC)（此处为演示）

# javascript - 使用 CometD 不断观察文件的变化

> ID：11602972
> 
> 赞同：0
> 
> 时间：2012-07-22T18:40:16.340
> 
> 标签：javascript, comet, cometd

我正在创建一个应用程序，并被[告知](https://stackoverflow.com/questions/11545296/updating-a-php-text-based-game-continuously/11545610#11545610)最好将 Comet 用于我想要的。到目前为止，我还没有使用 Comet 的经验，但经过一些研究，我已经建立了一个 CometD 服务器。其他可用的服务器包括 APE，但距离上一次修订似乎已经有一段时间了，而且 CometD 的文档要好得多。

由于我缺乏经验，我真的不知道从哪里开始，并且文档没有涵盖如此具体的案例。

我希望服务器持续监视 .txt 文件的更改，并在 HTML 页面中显示该文档的当前内容。该文件会定期更改（大约每 2 或 3 分钟一次），我希望在更改发生时将新文档显示给连接的客户端。

我认为它是可行的，我想它可以通过修改 JS 来完成。我唯一的问题是……我该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:29:34.957

您可以使用 JDK 7 的文件监视服务来监视文件更改，如[官方教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)中所述。

一旦您检测到更改，您可以在频道上广播 CometD 消息，JavaScript 客户端可以在该频道上侦听消息。[请参阅http://docs.cometd.org](http://docs.cometd.org)的第 3.3.5.5 节。

您可以选择发送整个文件或增量，具体取决于您的应用程序逻辑。

总而言之，您需要服务器端的一些逻辑来监视文件更改，客户端需要一些逻辑来接收文件更改并显示它们。

# ada - Ada接口铸造？

> ID：11602973
> 
> 赞同：1
> 
> 时间：2012-07-22T18:40:23.030
> 
> 标签：ada

我正在尝试根据以下接口在 Ada 中对一组解析器进行建模：

```
package Parsers is

   type Parser is interface;
   type DataArray is array(Integer range <>) of String(1..100);

   function Parse(Object : access Parser; FilePath : String) return DataArray is abstract;

end Parsers; 
```

第一个 Parser 接口成员是一个文本解析器，如下所示：

```
with Parsers;

package TextParsers is
   type Parser is new Parsers.Parser with null record;

   overriding function Parse(Object : access Parser; FilePath : String) return Parsers.DataArray;
   end TextParsers;                                       

with Parsers;
use Parsers;

package body TextParsers is

   overriding function Parse(Object : access Parser; FilePath : String) return Parsers.DataArray is
      Data : Parsers.DataArray (0..144);
   begin
      -- just stubbed out
      return Data;
   end Parse;
end TextParsers; 
```

最后，我希望有一个工厂方法根据提供的路径创建这些解析器，比如检测它是 txt 文件还是 csv 等。这是工厂代码：

```
with Parsers;
use Parsers;

package ParserFactories is
   function GetParser(Path : String) return Parsers.Parser;
end ParserFactories;

with Parsers, TextParsers;

package body ParserFactories is
   function  GetParser(Path : String) return Parsers.Parser is
      Text : TextParsers.Parser;
      Parse : Parsers.Parser'Class := Text;
   begin
      return Parse;
   end GetParser;
end ParserFactories; 
```

我不断收到“不允许动态标记的表达式”编译器错误，我无法弄清楚如何创建这些实现 Parser 接口的对象并将其从该函数中返回。有没有办法在 Ada 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:11:52.633

您正在尝试返回一个`Parsers.Parser`类型。这是不允许的（也不是您打算做的）。改为`Parsers.Parser'Class`改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:16:45.740

答案是您不返回接口的类型，而是返回对象的类型……否则您可以返回接口的类以指示您要将其分配给该抽象类型的变量。

```
Procedure Testing is

package Interface_Test is
    Type IBob is interface;
    Function Make Return IBob is abstract;
    Function Image( Object : In IBob ) Return String is abstract;

    Generic
        Type Data is (<>);
        Default_Data : In Data;
    Package Container is
        Type Data_Container is NEW IBob with private;
    private
        Type Data_Container is new IBob with record
        Info  : Data:= Default_Data;
        end record;

        Overriding Function Make Return Data_Container;
        Overriding Function Image(Object : In Data_Container) Return String;
    end Container;
end Interface_Test;

package Body Interface_Test is
    Package Body Container is

        Function Make Return Data_Container is
        begin
        Return Result : Data_Container;
        end Make;

        Function Image( Object : Data_Container ) Return String is 
        begin
        return Data'Image( Object.Info );
        end image;

    end Container;
end Interface_Test;

package J is new Interface_Test.Container( Integer, 1 );
use type J.Data_Container;
Test : J.Data_Container:= J.Make;

Use Ada.Text_IO;

Begin
  put_line( Test.Image );
End; 
```

# ios - 在翻转卡片的背面定位文本？

> ID：11602974
> 
> 赞同：3
> 
> 时间：2012-07-22T18:40:26.653
> 
> 标签：ios, core-animation, calayer

从之前的几个 StackOverFlow[问题](https://stackoverflow.com/questions/9656071/how-to-flip-a-uiview-around-the-x-axis-while-simultaneously-switching-subviews)和 github [CA360](https://github.com/neror/CA360/)上的这个示例中，我设法模拟了一张翻转卡片，“正面”有图像，背面有文字。然而，卡片背面的文字是颠倒的，我只让它水平居中。如何正确定位文本并将其垂直居中放在卡片上？

卡片正面：

![在此处输入图像描述](../Images/720a84aa6b9af499fe3d5b4b57fede5e.png)

卡片背面（如何垂直定位和居中文本？）：

![在此处输入图像描述](../Images/53ea2d942ceac0b614bc1c47eb48a4df.png)

**[更新]**

我将顶层的不透明度设置为 0.5，然后我想到“预翻转”背面层，这样当实际翻转发生时，它就会将其重置为正常状态。

![在此处输入图像描述](../Images/7806bdee87b62fdd84b9a52ba39fd83d.png)

我的“预翻转”看起来像这样：

```
cardBack.transform = CATransform3DMakeRotation(M_PI, 1.0f, 0.0f, 0.0f); // Pre-flip card 
```

现在我只需要找到一种内置的垂直设置方法或者很难做到……距离的一半……字体高度……加上……

设置有 2 层的卡片容器（[参考](https://stackoverflow.com/questions/9656071/how-to-flip-a-uiview-around-the-x-axis-while-simultaneously-switching-subviews/9658527#9658527)）：

```
    -（无效）加载视图{
        UIView *myView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        myView.backgroundColor = [UIColor whiteColor];

        self.view = myView;

        cardContainer = [CATransformLayer 层];
        cardContainer.frame = CGRectMake(300, 250, 200, 150);

        CALayer *cardFront = [CALayer 层];
        cardFront.frame = cardContainer.bounds;
        cardFront.zPosition = 5; // 高于卡片背面的zPosition
        cardFront.contents = (id)[UIImage imageNamed:@"Ben"].CGImage;
        cardFront.opacity = 0.5;

        [cardContainer addSublayer:cardFront];

        /*
         https://stackoverflow.com/questions/2209734/add-text-to-calayer
         */

        CATextLayer *cardBack = [CATextLayer 层];
        cardBack.string = @"你好";
        cardBack.frame = cardContainer.bounds;
        cardBack.zPosition = 4;
        cardBack.backgroundColor = [[UIColor grayColor] CGColor];
        cardBack.alignmentMode = kCAAlignmentCenter;
        CFTypeRef *font = (CFTypeRef *)CTFontCreateWithName(CFSTR("Times"), 48, NULL);
        cardBack.font = 字体；
        [cardContainer addSublayer: cardBack];

        [self.view.layer addSublayer:cardContainer];

    }

```

借用另一个 SOF 问题的代码来翻转卡片：

```
    -（无效）翻转卡{
    // [self.flipTimer 无效];
    // 如果（翻转）{
    // 返回;
    // }
        NSLog(@"Count=%d", count);
        id 动画块 = ^{
    // self.backView.alpha = 1.0f;
    // self.frontView.alpha = 0.0f;
    // [self bringSubviewToFront:self.frontView];
    //翻转=是；
            NSLog(@"正在翻转...");
            CALayer *layer = cardContainer;
            CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
           旋转和透视变换.m34 = 1.0 / 500;

            如果（计数 == 0）{

                rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, M_PI, 1.0f, 0.0f, 0.0f);
            } else { // 将其翻转回图像

                rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 0.0f, 0.0f, 1.0f, 1.0f);

            }
            layer.transform = 旋转和透视变换；
        };
        计数 = (计数 + 1) % 2;

        [UIView animateWithDuration:1.25
                              延迟：0.0
                            选项： UIViewAnimationCurveEaseInOut
                         动画：动画块
                         完成：无]；

    }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:22:14.887

你知道 UIView 类方法吗：

*   (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView 持续时间：`(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion`

您将有两个视图，正面和背面。两者都可以在您的笔尖中。通过此调用，您几乎可以毫不费力地从一个视图切换到另一个视图。

编辑：我确实看过你的代码。请注意，anchorPoint、位置和边界都一起播放，但您仍然可以使用 frame。改变一个并看看其他人如何变化是很有趣的（我敢说很有趣）。

我最终做的是注释掉所有位置和框架的设置，并基本上像使用 UIView 一样设置文本框框架（大视图的宽度减去小视图的宽度除以 2 等）：

```
cardBackText.frame = CGRectMake((200-100)/2, (150-30)/2, 100,30); // 200, 150
NSLog(@"position=%@ anchorPoint=%@ bounds=%@", NSStringFromCGPoint(cardBackText.position),NSStringFromCGPoint(cardBackText.anchorPoint),NSStringFromCGRect 
```

日志打印出来：

```
position={100, 75} anchorPoint={0.5, 0.5} bounds={{0, 0}, {100, 30}} 
```

# c# - 比较多对布尔值

> ID：11602977
> 
> 赞同：0
> 
> 时间：2012-07-22T18:40:53.250
> 
> 标签：c#, boolean

我不确定要进行的比较的术语：

```
if(test1 == true && test2 == true || test2 == true && test3 == true || test3 == true && test4 == true...)
{
   //Do stuff
} 
```

是否有有效的方法/功能来实现这一点？否则，我将有一个非常长的 if 语句。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:42:27.540

您不必指定`==true`零件。可以写成如下。

```
if(test1 && test2 || test2 && test3 || test3 && test4...)
{
   //Do stuff
} 
```

如果你想简化表达式本身，我建议你研究布尔代数和[布尔表达式的归约](http://sandbox.mc.edu/~bennet/cs110/boolalg/simple.html)。

这是一种形式的表达`AB + BC + CD + ...`。您可以执行的一项减少如下。

```
AB + BC = B(A+C) = B && (A || C) 
```

一个[列表](http://www.dotnetperls.com/list)也可以用来存储所有不同的布尔值，并且可以使用对它们的一次迭代来计算它。这有助于提高可读性，而性能/内存占用**几乎没有变化**或仅略有下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T18:46:55.973

```
var tests = new[] { test1, test2, test3, test4, ... };

for (int i = 0; i < tests.Length - 1; ++i) {
   if (tests[i] && tests[i + 1]) {
     // Do stuff
     break;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:43:16.780

你可以只使用`if(test1 && test2 || ...)`

或者您可以将其分解为多个步骤

您是否有所有单独的变量或者它们是否在数组/列表中在后一种情况下，您可以在循环中迭代它们。

```
bool result = true;

foreach (bool b  in boolArray)
{
   result = result op b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T18:45:01.337

您可以简单地消除布尔比较

`if( (test1 && test2))`相当于`if(test1 == true && test2 == true)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T18:46:34.963

我能想到的最短的是：

```
if((test2 && (test1 || test3)) || (test3 && test4)) {
    //Do Stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T18:49:44.007

如果您不介意将您的布尔值放在列表中并由 linq 使用

例如

```
bool test1 = true;
bool test2 = true;
bool test3 = true;
bool test4 = true;

List<bool> booList = new List<bool>{test1, test2, test3, test4};

bool isTrue = booList.All(b => b == true); //This will return true

bool test5 = false;
booList.Add(test5);

bool isFalse = booList.All(b => b == true); //This will return false 
```

PS：我不知道与 if 语句相比性能如何

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-22T18:49:46.723

```
char test[x]

... test[x] init ...

i=0
res=0

while( i < x-2 )
{
    res |= test[i] && test[i+1]
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-22T18:50:08.500

使用 C# 时，您可以使用逻辑处理布尔值。:)

如果 bool1，则买一些冰淇淋；

如果 bool1 不存在，则不要购买冰淇淋；

将值与 0 进行比较时，可以使用非运算符 (!)。

if(!bool1)MessageBox.Show("没有冰淇淋伴侣");

与 0 比较时也是如此，只是不要应用非运算符（！）。

if(bool1)MessageBox.Show("冰淇淋 :D");

对不起，如果我把它弄糊涂了。

因此，要添加到其他人的帖子中，以下内容将是合适的。

if(bool1 && bool2 || bool1 && bool3)MessageBox.Show("冰淇淋！");

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-22T20:15:21.410

LINQ方式（假设值在一个数组中）：

```
bool result = (from index in Enumerable.Range(0, tests.Length - 1)
               where tests[index] && tests[index + 1]
               select index).Any(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-22T20:27:09.550

或者如果您可以将布尔值放入列表中，则可以转换为 LINQ.ANY

```
List<bool> booList = new List<bool> { true, true, true, true };
            bool isTrue = booList.Any(b => b);
            Console.WriteLine(isTrue.ToString());
            booList = new List<bool> { true, true, false, false };
            isTrue = booList.Any(b => b);
            Console.WriteLine(isTrue.ToString());
            booList = new List<bool> { false, false, false, false };
            isTrue = booList.Any(b => b);
            Console.WriteLine(isTrue.ToString()); 
```

# java - 图像中的颜色优势和直方图的使用

> ID：11602978
> 
> 赞同：0
> 
> 时间：2012-07-22T18:41:00.490
> 
> 标签：java, image-processing, computer-vision

在开始之前，我想将大家的注意力转移到这个问题上，因为我想做类似的事情：[Getting the most common color of an image](https://stackoverflow.com/questions/4427200/getting-the-most-common-color-of-a-image)

现在，我已经对此进行了测试，它通过过滤掉灰色是有效的，尽管它真的能找到我们最重要的颜色吗？它发现最多的是肯定的，尽管仍然会出现一些灰色。

我个人认为它不是最有效的方法。我有一个颜色直方图函数，适用于 RGB 和 HSB，它划分了空间，但是你从这里去哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:36:31.267

如果您想找到最重要的颜色，您可以执行以下操作：

1.  减少图像中的颜色数量。请参阅此[讨论](https://stackoverflow.com/questions/5906693/reduce-the-number-of-colors-in-an-image-with-opencv-python)- 算法是相同的。
2.  循环遍历图像并计算每种颜色。
3.  找到该颜色数组的最大值。这将是你的颜色。

# android - Android Widget PendingIntent Bundle 返回 null

> ID：11602981
> 
> 赞同：0
> 
> 时间：2012-07-22T18:41:01.987
> 
> 标签：android, null, widget, bundle, android-pendingintent

我正在尝试为我的应用程序实现一个小部件，但我遇到了 PendingIntent 捆绑包的问题。

我的小部件有两个按钮，如果一个被按下，小部件应该更新其内容。但是，如果我无法更新`onReceive`方法中的小部件，因为捆绑始终是`null`. 任何想法？

```
public class StudyWidgetProvider extends AppWidgetProvider {

private static String LOG_TAG = StudyWidgetProvider.class.toString();
private static String BUTTON_BACK = "BUTTON_BACK";
private static String BUTTON_FORWARD = "BUTTON_FORWARD";

private Calendar currentDate = Calendar.getInstance();
private RemoteViews widget;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    for(int i=0; i<appWidgetIds.length; i++){
        Log.i(LOG_TAG, "Update Widget");
        Intent intent = new Intent(context, WidgetService.class);
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
        widget = new RemoteViews(context.getPackageName(), R.layout.widget);

        SimpleDateFormat dateFormater = new SimpleDateFormat("EEEE");
        widget.setTextViewText(R.id.widget_day, dateFormater.format(currentDate.getTime()));
        dateFormater = new SimpleDateFormat("dd.MM.yyyy");
        widget.setTextViewText(R.id.widget_date, dateFormater.format(currentDate.getTime()));

        //Button-Actions
        Intent backIntent = new Intent(context, StudyWidgetProvider.class);
        backIntent.setAction(BUTTON_BACK);
        Intent forwardIntent = new Intent(context, StudyWidgetProvider.class);
        forwardIntent.setAction(BUTTON_FORWARD);
        PendingIntent backPendingIntent = PendingIntent.getBroadcast(context, 0, backIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        PendingIntent forwardPendingIntent = PendingIntent.getBroadcast(context, 0, forwardIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        widget.setOnClickPendingIntent(R.id.widget_but_back, backPendingIntent);
        widget.setOnClickPendingIntent(R.id.widget_but_forward, forwardPendingIntent);

        widget.setRemoteAdapter(appWidgetIds[i], R.id.words, intent);
        appWidgetManager.updateAppWidget(appWidgetIds[i], widget);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);

    String action = intent.getAction();
    if(action.equals(BUTTON_BACK)){
        Log.i(LOG_TAG, "Pressed back");
        currentDate.set(Calendar.DATE, -1);
    }
    if(action.equals(BUTTON_FORWARD)){
        Log.i(LOG_TAG, "Pressed forward");
        currentDate.set(Calendar.DATE, 1);
    }

    Bundle extras = intent.getExtras();
    if(extras != null){
        Log.i(LOG_TAG, "Bundle not null");
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
        ComponentName thisAppWidget = new ComponentName(context.getPackageName(), StudyWidgetProvider.class.getName());
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);

        onUpdate(context, appWidgetManager, appWidgetIds);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T08:08:59.817

您没有在 Intent 中添加任何额外内容，那么您为什么期望会有任何内容？

# java - 爪哇。用于解析 FTP 服务器列表的正则表达式

> ID：11602982
> 
> 赞同：2
> 
> 时间：2012-07-22T18:41:08.013
> 
> 标签：java, regex, ftp, ftp-client

我的正则表达式无法将 FTP 服务器列表过滤为文件/目录名称和大小。这是我目前正在使用的正则表达式 `(?m)^.{20}\\s*(\\d+).{14}(.*)$`
所以，用它来过滤这个列表

```
drw-rw-rw- 1 ftp ftp                0 Mar 17 06:10 Tor Browser
-rw-rw-rw- 1 ftp ftp          1538814 Jun 26 00:23 setup.exe
-rw-rw-rw- 1 ftp ftp           142570 May 24 05:28 satellite A665-S6086.pdf 
```

我将得到 Tor Browser, 0 和 setup.exe, 1538814
这是我真正想要的，但在这种格式的列表中

```
 -r-xr-xr-x  1 0  1001     4521014 May 23  2011 FileZilla_3.5.0_win32-setup.exenull
 dr-xr-xr-x  4 0  1001  1024 Mar  2 14:07 pubnull 
```

我会得到类似的东西：2011 年 2 月 23 日 FileZilla_3.5.0_win32-setup.exe, 1 和 14:07 pub ,1。
有没有办法让这个正则表达式适用于这两种类型？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:53:01.183

我会使用以下内容：

```
Pattern regex = Pattern.compile(
    "(\\d+)        # File size           \n" +
    "\\s+          # Whitespace          \n" +
    "\\w{3}        # Month (3 letters)   \n" +
    "\\s+          # Whitespace          \n" +
    "\\d{1,2}      # Day (1 or 2 digits) \n" +
    "\\s+          # Whitespace          \n" +
    "[\\d:]{4,5}   # Time or year        \n" +
    "\\s+          # Whitespace          \n" +
    "(.*)          # Filename            \n" +
    "$             # End of line", 
    Pattern.MULTILINE | Pattern.COMMENTS); 
```

# javascript - 分辨率相关的移动模板

> ID：11602984
> 
> 赞同：0
> 
> 时间：2012-07-22T18:41:18.027
> 
> 标签：javascript, html, css, screen-resolution

我正在开发一个应该只对移动设备可见的小型移动页面。但它应该适合所有 Android 和 iPhone 设备及其分辨率。

该模板包括表格和几张图像，这些图像应该相对于分辨率变化的比例缩小百分比

我基本上需要的是智能 CSS 代码的提示，它将考虑分辨率并从我将创建的几个不同样式表中进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:49:55.443

您可以使用 JS 检测确切的设备并为其生成样式表链接。

```
//Detect mobile devices
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())),

//Detect only iPhone
iphone = (/iphone/i.test(navigator.userAgent.toLowerCase()));

//Apply stylesheet for mobile devices
if(mobile){
   var cssLink = document.createElement("link");
   cssLink.setAttribute("type", "text/css");
   cssLink.setAttribute("rel", "stylesheet");
   cssLink.setAttribute("href", "css/mobile.css");
   document.head.appendChild(cssLink);
}

//Apply stylesheet for iPhone only
if(iphone){
   var cssLink = document.createElement("link");
   cssLink.setAttribute("type", "text/css");
   cssLink.setAttribute("rel", "stylesheet");
   cssLink.setAttribute("href", "css/mobile.css");
   document.head.appendChild(cssLink);
} 
```

或使用 Media Query 检测所有移动设备`max-device-width`：

```
@media only screen and (max-device-width: 480px) {
     /* CSS for mobile */
} 
```

请注意，我设置`max-device-width`为`480px`. 这是因为移动设备的屏幕测量值是**参考像素**，比实际设备像素大。例如，**iPhone 3**和**4**在横向和纵向模式下都有设备宽度`320px`。一些**Android**设备返回设备宽度`480px`。

# html - 声明 XHTML doctype 然后使用 HTML content-type

> ID：11602989
> 
> 赞同：1
> 
> 时间：2012-07-22T18:42:02.593
> 
> 标签：html, xhtml, doctype

我注意到我使用的一个非常受欢迎的论坛，具有讽刺意味的是，它是世界上最大的网络开发论坛之一，它使用了这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" dir="ltr" lang="en" id="vbulletin_html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
... 
```

我知道这是一个过渡文档类型，但是如果您要告诉浏览器将标记呈现为 HTML，那么使用 XHTML 到底有什么意义呢？我不禁想到使用所有这些不必要的结束标签浪费的时间。

这仍然比人们想要的更常见，但为什么会这样呢？肯定它违背了使用 XHTML 的全部目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:09:55.503

主要的实际好处是它允许您在工具链中使用 XML，直到它被传递到浏览器。除了在编辑器中使用简单的语法高亮算法之外，大多数用户并没有从中受益，但它确实允许使用 XSLT 和其他 XML 工具。

有些人认为 XHTML 比 HTML 更严格（因此更好）（尽管 XML 的 DTD 不如 SGML 强大，因此虽然它消除了对标签和属性引号要求的一些例外，但 HTML 允许验证器发现诸如`<a><b><a></a></b></a>`.

有些人只是喜欢明确地关闭他们所有的标签。

有些人被介绍到使用 XHTML 进行 Web 创作（这是本月的热门话题超过几年），但从未认真考虑过替代方案。

# ruby-on-rails - 多态父模型

> ID：11602999
> 
> 赞同：1
> 
> 时间：2012-07-22T18:42:52.067
> 
> 标签：ruby-on-rails, polymorphism

可以说我有两个模型；`Product`和`Recipe`。他们每个人都可以属于一个组`ProductGroup`或`RecipeGroup`。现在组模型基本相同——它们有一个名称列和一个计数器缓存。

是否可以在这里使用多态性以便将组合并到一个`Group`模型中？我知道通常`:polymorphic => true`适用于`belongs_to`关联的 -side。但我想把它放在`has_many`-side 上，这在默认情况下是不可能的。你将如何实现这一点？