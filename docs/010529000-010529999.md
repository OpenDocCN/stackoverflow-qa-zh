# StackOverflow 问答 10529000-10529999

# asp.net - 如何使用linq检查namevaluecollection中是否存在键/值

> ID：10529001
> 
> 赞同：0
> 
> 时间：2012-05-10T07:06:49.250
> 
> 标签：asp.net

如何使用 LINQ 检查 NameValueCollection 中是否存在键/值 我有一个包含一些键及其对应值的名称值集合。我需要检查集合中是否存在特定的键或值。我需要这个 vb.net 代码

我需要使用 LINQ。你能提供 LINQ 语句来从 NameValueCollection 中获取项目吗

我正在使用具有多个值的相同键填充名称 - 值集合。我想检查集合中是否存在具有特定值的特定键

这是代码

```
Dim nvproducts as new namevaluecollectionn
nvproducts.Add("1", "A")
nvproducts.Add("1", "I")
nvproducts.Add("2", "I")
nvproducts.Add("1", "A") 
```

从这个namevaluecollection中，我需要检查namevaluecollection中是否有一个值为1的键和值A。我想在 linq 中做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:19:09.513

您可以使用 NameValueCollection [NameVlaueCollectionCount的 Count 属性](http://msdn.microsoft.com/en-us/library/system.collections.specialized.nameobjectcollectionbase.count.aspx)

```
 NameValueCollection myCol = new NameValueCollection();
      myCol.Add( "red", "rojo" );
      myCol.Add( "green", "verde" );
      myCol.Add( "blue", "azul" );
      myCol.Add( "red", "rouge" ); 
```

像这样获取总计数

```
int TotalCount = myCol.Count; 
```

像这样迭代它

```
 foreach ( String s in myCol.AllKeys )
         Console.WriteLine( " Key  {0,-10} Value: {1}", s, myCol[s] ); 
```

您可以参考此链接以获取更多信息[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)

**更新**：尝试像这样获取特定键的所有值的计数

`var ValuesCount= myCol.GetValues("red").Count()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:21:49.510

假设你有

```
NameValueCollection myCol = new NameValueCollection();
myCol.Add("key1", "value1");
myCol.Add("key2", "value2");
myCol.Add("key2", "value3");

string k = "key2";
string v = "value2"; 
```

然后你可以检查 key`k`是否有这样的值`v`：

```
bool result = 
        myCol.AllKeys.Contains(k) && 
        myCol.GetValues(k).Contains(v); 
```

或类似的东西：

```
bool result =
      (from string key in myCol.AllKeys
       where key == k
       select myCol.GetValues(k).Contains(v)
      ).FirstOrDefault(hasValue => hasValue == true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T01:01:00.730

更容易

```
 Dim lbHasKey As Boolean
    Try
        Dim lsValue As String = mShowCountInMemoryColl.Get(lsCodigoID)
        lbHasKey = True
    Catch exHasKey As Exception
        lbHasKey = False
    End Try 
```

# cocos2d-iphone - 像 CCSpawn 这样的 CCSequence 使用来自不同类的函数

> ID：10529003
> 
> 赞同：0
> 
> 时间：2012-05-10T07:07:01.840
> 
> 标签：cocos2d-iphone, action, sequence, spawn

我尝试在我的 GameLayer 中使用一些功能。第一个 - 来自另一个类，第二个 - 来自 GameLayer 类，但 CCSequence 像 CCSpawn 一样运行，而不是序列。另外，它们都在 GameLayer 中完美运行。

在游戏层中

```
 [self runAction:[CCSequence actions:
                    [CCCallFuncN actionWithTarget:self.rolypoly selector:@selector(jumpToDeath:)],
                    [CCCallFuncND actionWithTarget:self selector:@selector(goToGameOverLayer:tagName:)data:(int)TagGameOverLose],     
                     nil]]; 
```

在rolypoly类

```
-(void)jumpToDeath:(id)sender
{

       [self.sprite stopAllActions];

       id actionSpaw = [CCSpawn actions:
                       [CCMoveTo actionWithDuration:0.5f position:ccp(self.sprite.position.x, self.sprite.position.y+self.sprite.contentSize.height)],
                       [CCBlink actionWithDuration:1.0f blinks:4],
                        nil];

       [self.sprite runAction:[CCSequence actions:
                              [CCCallFuncND actionWithTarget:self selector:@selector(setJumpingToDeath:withValue:)data:(void*)1],
                              actionSpaw,
                              [CCHide action],
                              [CCCallFunc actionWithTarget:self selector:@selector(moveSpriteDeath)], 
                              nil]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:36:10.920

问题是这`runAction`不是阻塞方法。这意味着当您使用函数调用动作（如`CCCallFunc`）时，序列中它之后的动作将在函数调用返回时执行。在您的情况下`jumpToDeath`运行动作但不等待它们完成并且当它返回时执行主序列中的第二个动作（在内部序列`jumpToDeath`完成之前）

尝试重新安排你的行动。如果您需要更多帮助，请告诉我。

**编辑：**我的建议：

```
 [self runAction:[CCSequence actions:
                    [CCCallFuncN actionWithTarget:self.rolypoly selector:@selector(jumpToDeath:)], nil]];

-(void)jumpToDeath:(id)sender
{

       [self.sprite stopAllActions];

       id actionSpaw = [CCSpawn actions:
                       [CCMoveTo actionWithDuration:0.5f position:ccp(self.sprite.position.x, self.sprite.position.y+self.sprite.contentSize.height)],
                       [CCBlink actionWithDuration:1.0f blinks:4],
                        nil];

       [self.sprite runAction:[CCSequence actions:
                              [CCCallFuncND actionWithTarget:self selector:@selector(setJumpingToDeath:withValue:)data:(void*)1],
                              actionSpaw,
                              [CCHide action],
                              [CCCallFunc actionWithTarget:self selector:@selector(moveSpriteDeath)],
                              [CCCallFuncND actionWithTarget:self selector:@selector(goToGameOverLayer:tagName:)data:(int)TagGameOverLose],
                              nil]];
} 
```

如您所见，我将最后一个调用函数操作移动到`jumpToDeath`方法中的最后一个，以确保在所有其他操作完成后最后执行它。

我不知道它的实现是什么，`moveSpriteDeath`但如果它不包含动作就可以了，否则显示它的实现或尝试做同样的事情

# java - 在 Java 中将字节流作为进程执行而不写入文件

> ID：10529011
> 
> 赞同：4
> 
> 时间：2012-05-10T07:07:49.837
> 
> 标签：java

基本上，我希望能够将字节流作为文件执行，而无需将所述字节写入文件。

我想在 Windows 环境中执行此操作。

你可以说我想创建一个文件，将流复制到文件中，然后将文件作为可执行文件打开，但我希望文件在磁盘上没有物理表现。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:11:21.203

使用标准 Java API 无法做到这一点。您将不得不依赖某些特定于操作系统的本机实现，要么为您完成全部工作，要么允许您创建某种 RAM 磁盘，您可以在其上放置临时数据并执行它。

可能相关：

*   [用 java.nio 在内存中写入文件？](https://stackoverflow.com/questions/9827481/write-file-in-memory-with-java-nio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:13:51.260

假设您的 bytestream 是标准 exe 之一，并且您不想调用整个虚拟化环境，那么简短的回答是否定的，因为代码中的内部地址不会映射。

这是一个更详细的答案：

[process.start() 嵌入式 exe 无需先提取到文件 c#](https://stackoverflow.com/questions/5997594/process-start-embedded-exe-without-extracting-to-file-first-c-sharp)

# django - django i18n 不工作

> ID：10529013
> 
> 赞同：7
> 
> 时间：2012-05-10T07:08:01.090
> 
> 标签：django, internationalization

这里是python新手。我希望我的网站支持英文和中文。所以我只是按照 django 书，第 19 章国际化。但这似乎对我不起作用，我希望字符串显示为中文，仍然是英文。我的代码和设置如下。

[设置.py]

```
LANGUAGE_CODE = 'zh-cn'
USE_I18N = True
USE_L10N = True
LANGUAGES = (
    ('en', 'English'),
    ('zh-cn', 'Chinese')
)

TEMPLATE_CONTEXT_PROCESSORS = {
        'django.core.context_processors.i18n',
}
    MIDDLEWARE_CLASSES = (
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

在我的应用程序views.py中，我在索引中强制将语言代码设置为“zh-cn”

```
def index( request ):
    response= render_to_response( 'index.htm' )
    response.set_cookie('django_language','zh-cn')
    return response 
```

那么我希望在 index.htm 之后加载的另一个页面将显示一个中文字符串。

另一个页面由 upload.html 渲染

```
{% load i18n %}
<html>
<head>
{% block head %}

{% endblock %}
</head>
<body>
{% block body %}
<h1>{% trans 'Upload Demo' %}</h1>
{% endblock %}
</body>
</html> 
```

在那之后，我做

```
django-admin.py makemessages -l zh-cn -e htm 
```

在我的 django 项目文件夹中，我在 locale/zh-cn/LC_MESSAGES/django.po 获得了 django.po 内容就像

```
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-05-10 18:33+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: uploader/template/base.htm:10
msgid "Upload Demo"
msgstr "上传文件" 
```

此后，我调用以下命令来编译消息 django-admin.py compilemessages

我在 django.po 的某个文件夹中获得了 django.mo 文件

我首先访问索引页面，然后访问另一个页面，该页面具有“上传演示”字符串 ID。实际上我仍然在那里看到英文字符串。

并尝试通过打印语言代码调试，发现语言设置正确。

context = RequestContext(request) 打印上下文 translation.activate('zh-cn')

最后，我使用

```
gettext locale/zh-cn/LC_MESSAGES/django.mo "Upload Demo" 
```

真的有'上传演示'。所以我认为问题就在这里。但是为什么会这样呢？我真的很困惑。有谁能够帮我。

非常感谢任何评论或帮助。

* * *

```
gettext locale/zh-cn/LC_MESSAGES/django.mo "Upload Demo" 
```

我想我犯了一个错误。上面的命令返回一个字符串，它与您输入的字符串 ID 相同，而不是翻译后的字符串。在上面的命令中，它是“Upload Demo”，也就是说，如果您将上面命令中的“Upload Demo”更改为“bla bla”，您将“bla bla”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-23T20:52:14.820

也许为时已晚，但我敢打赌您的问题可能是由于`LOCALE_PATHS`项目设置中缺少元组。

在拔掉头发一个小时后，我通过简单地将其添加到我项目的 settings.py 文件中解决了同样的问题：

```
LOCALE_PATHS = (
    '/home/myuser/Projects/Some_project_root/My_django_project_root/locale',
) 
```

这就是该目录的外观：

```
locale/
├── de
│   └── LC_MESSAGES
│       ├── django.mo
│       └── django.po
├── en
│   └── LC_MESSAGES
│       ├── django.mo
│       └── django.po
└── es
    └── LC_MESSAGES
        ├── django.mo
        └── django.po 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T09:34:27.623

您的代码块有点乱，因此很难全部阅读。但您可能希望从 .mo 文件开始。它包含一个`#, fuzzy`注释。模糊意味着构建脚本不确定翻译，因此需要翻译人员（=您）的注意。首先检查所有`#, fuzzy`标记的翻译。如果翻译正确（或在您更正了错误的翻译之后）删除`#, fuzzy`注释。接下来再次运行编译消息。这可以解决您的问题。

```
#, fuzzy
msgid "" 
msgstr "" 
"Project-Id-Version: PACKAGE VERSION\n" 
"Report-Msgid-Bugs-To: \n" 
"POT-Creation-Date: 2012-05-10 18:33+0800\n" 
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" 
"Last-Translator: FULL NAME \n" 
"Language-Team: LANGUAGE \n" 
"Language: \n" 
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n" 
```

另请参阅：[django 模糊字符串翻译未显示](https://stackoverflow.com/questions/1377372/django-fuzzy-string-translation-not-showing-up)

友好的问候， Wout

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-17T08:51:14.130

您可以看到 LANGUAGE_CODE 与 django_language 不同。我认为 utils.py 中的 get_language 不能正确处理下划线 LANGUAGES。get_language 将返回 zh-cn 但不应将其切入 cn。相反，应该将 zh-cn 转换为 zh_CN。

所以你应该在setting.py中使用下面的代码

```
LANGUAGES = (
  ('en', _('English')),
  ('zh-cn', _('Simplified Chinese')),
) 
```

并从终端运行以下命令

```
django-admin.py makemessages -l zh_CN
django-admin.py compilemessages 
```

这对我来说非常有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-19T05:01:15.010

我相信问题在于您传递的[makemessages](https://docs.djangoproject.com/en/1.8/ref/django-admin/#makemessages)和[compilemessages参数。](https://docs.djangoproject.com/en/1.8/ref/django-admin/#compilemessages)@Vishnu 上面的回答是正确的。

## TLDR

不要`zh-cn`用于语言环境。使用`zh_CN`.

```
django-admin.py makemessages -l zh_CN
django-admin.py compilemessages -l zh_CN 
```

## 解释

[Django Docs](https://docs.djangoproject.com/en/1.8/topics/i18n/#definitions)中定义的“语言环境名称”是：

> 语言环境名称，可以是 ll 形式的语言规范，也可以是**ll_CC**形式的语言和国家/地区组合规范。示例：it、**de_AT**、es、pt_BR。***语言部分总是小写，国家部分总是大写。分隔符是一个下划线。***

在[makemessages](https://docs.djangoproject.com/en/1.8/ref/django-admin/#makemessages)示例中（位于 makemessages 文档的底部），您会注意到***语言环境名称***约定的使用：

```
django-admin makemessages --locale=pt_BR
django-admin makemessages --locale=pt_BR --locale=fr
django-admin makemessages -l pt_BR
django-admin makemessages -l pt_BR -l fr
django-admin makemessages --exclude=pt_BR
django-admin makemessages --exclude=pt_BR --exclude=fr
django-admin makemessages -x pt_BR
django-admin makemessages -x pt_BR -x fr 
```

您会在[compilemessages](https://docs.djangoproject.com/en/1.8/ref/django-admin/#compilemessages)示例中注意到相同的内容：

```
django-admin compilemessages --locale=pt_BR
django-admin compilemessages --locale=pt_BR --locale=fr -f
django-admin compilemessages -l pt_BR
django-admin compilemessages -l pt_BR -l fr --use-fuzzy
django-admin compilemessages --exclude=pt_BR
django-admin compilemessages --exclude=pt_BR --exclude=fr
django-admin compilemessages -x pt_BR
django-admin compilemessages -x pt_BR -x fr 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-14T18:14:40.833

我遇到过类似的问题：`compilemessages`似乎只`locale`在当前目录中工作。这是一个补救措施：

```
find . -name "locale" | while read VAR1; do CURR="``pwd``";cd $VAR1/..; echo "in $VAR1";django-admin.py compilemessages ; cd $CURR; done` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-17T18:25:25.317

这段代码中有一个突出的问题如下： 在 settings.py 中，如果使用了其他中间件，请确保 MIDDLEWARE 设置中的 django.middleware.locale.LocaleMiddleware 位于 SessionMiddleware 和 CacheMiddleware 之后，并且在 CommonMiddleware 之前。

```
# settings.py

 MIDDLEWARE = [
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.cache',
# ...
'django.middleware.locale.LocaleMiddleware',
# ...
'django.middleware.common.CommonMiddleware',
] 
```

如需更多信息，[请参阅：](https://automationpanda.com/2018/04/21/django-admin-translations/) [1、2](https://lokalise.com/blog/django-i18n-beginners-guide/)

# iphone - 在 PhotoLibrary iPad 中没有得到结果电影

> ID：10529015
> 
> 赞同：0
> 
> 时间：2012-05-10T07:08:15.983
> 
> 标签：iphone, objective-c, avassetwriter, avmutablecomposition

我正在用一组图像和一个音频文件创建一个电影，并将创建的电影保存到照片库中，在模拟器中我用我的图像和音频文件数组得到正确的电影，但是在设备中运行时我没有得到我的结果电影相反，我得到了我添加的视频（我在代码中使用的 OutPut.mov）来编写我的输出文件（混合音频和图像文件数组）。

这是我将混合音频和图像文件数组保存到照片库的代码：

```
AVMutableComposition* mixComposition = [AVMutableComposition composition];
NSString* audio_inputFilePath = [[NSBundle mainBundle] pathForResource:@"Ruler" ofType:@"caf"];
NSURL*    audio_inputFileUrl = [NSURL fileURLWithPath:audio_inputFilePath];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

NSString *video_inputFilePath = [documentsDirectory stringByAppendingPathComponent:@"videoOutput1234videoOutput1234.mp4"];
NSLog(@"output url %@",video_inputFilePath);

NSURL*    video_inputFileUrl = [NSURL fileURLWithPath:video_inputFilePath];

NSString* outputFilePath = [[NSBundle mainBundle] pathForResource:@"OutPut" ofType:@"mov"];
NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

CMTime nextClipStartTime = kCMTimeZero;

AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

[a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];   
_assetExport.outputFileType = @"com.apple.quicktime-movie";
_assetExport.outputURL = outputFileUrl;

[_assetExport exportAsynchronouslyWithCompletionHandler:^(void ) {[self saveVideoToAlbum:outputFilePath]; }       ]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T09:15:13.360

您必须将视频文件写入照片库路径，例如..

 `````
- (void)writeVideoToPhotoLibrary:(NSURL *)url
{
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    [library writeVideoAtPathToSavedPhotosAlbum:url completionBlock:^(NSURL *assetURL, NSError *error){
        if (error) {
            NSLog(@"Video could not be saved");
        }
    }];
    [library release];
}

- (void)video:(NSString *)videoPath didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {
    // Let's see what happened
    NSLog(@"finished");
    NSLog(@":error : %@", error);
} 
`````

# c# - 这个 VB6 Rnd() 调用的 C# 等效项是什么？

> ID：10529018
> 
> 赞同：0
> 
> 时间：2012-05-10T07:08:27.470
> 
> 标签：c#, random, vb6, vb6-migration

我在将 VB 代码`Int(Rnd() * 75) + 75)`转换为 C# 时遇到问题。我试过了

```
Random random = new Random
random.Next( 75 ) + 75 
```

但它是不对的。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T07:12:19.280

假设这意味着给出一个介于 75（含）和 150（不含）之间的值，我会使用

```
Random random = new Random();
int value = random.Next(75, 150); 
```

这比首先在 [0, 75) 范围内生成一个数字然后添加 75，IMO 更清楚。

但是请注意，您*不应该*`Random`在每次需要随机数时都创建一个新实例。您可能希望每个线程一个实例。我有一篇[相当长的文章](http://csharpindepth.com/Articles/Chapter12/Random.aspx)解释了生成随机数的各种陷阱以及一些解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T07:10:14.883

查看您在 VB 中的代码在做什么

1.  生成一个随机数。
2.  将其乘以 75 并将其转换为 int。
3.  然后在其中添加 75。

在 C# 中就像

```
Random random = new Random();
int v = random.Next() * 75 + 75; 
```

无需转换，因为`random.Next()`给出了一个整数。此外，您可以通过提供最小值和最大值 b/w 来限制随机数生成，如下所示：

```
random.Next(50, 100); 
```

它只会找到 b/w 50 和 100 的随机数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:17:21.077

我认为它是这样的

```
 Random random = new Random();
        int rdnum = (random.Next() + 1) * 75; 
```

**编辑**

最后，如果我需要他的随机数，我将使用它（较小的数字为 0-20）

```
 int rdnum = ((new Random()).Next(0, 20) + 1) * 75; 
```

**编辑2**

迪安娜评论后，代码将是

```
 Random random = new Random();
        Double rdnum = (random.NextDouble() * 75) + 75; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-04T05:25:10.137

请记住，如果您想要精确的 Rnd 函数，您可以按照以下步骤操作：
1.在解决方案资源管理器中，右键单击引用并单击“添加引用...”
2.在程序集 -> 框架中，选中“Microsoft.视觉基础”

现在你可以像这样使用它：

```
Microsoft.VisualBasic.VBMath.Rnd();
Microsoft.VisualBasic.VBMath.Randomize(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-23T06:56:40.343

请注意，`Random Rnd = new Random();`在某些情况下应该移出 for...loop：

```
Random Rnd = new Random(); 
float fRnd = (float)Rnd.NextDouble() * 75f + 75f; 
```

# php - 为什么数组会保留重复数据

> ID：10529020
> 
> 赞同：2
> 
> 时间：2012-05-10T07:08:33.987
> 
> 标签：php, mysql, arrays, unit-testing

在使用 PHP 时，处理与数据库（MySQL）的连接

```
$result = mysql_query('select * from products');
$row = mysql_fetch_array($result); 
```

昨天发现该阵列`$row`中有重复数据。

首先，您从数据库中选择的数据排列在索引中，例如：`$row[0] = ID;`比您还可以找到`$row['ID'] = ID.`

那么这只是框架的一个功能，它虚拟地复制数据，或者这些数据在数组中存储两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:13:36.253

要仅获取一个值集，您需要将第二个参数传递给 mysql_fetch_array。“MYSQL_ASSOC”获取关联数组，或“MYSQL_NUM”获取普通数组。例子：

```
$row = mysql_fetch_array($result, 'MYSQL_ASSOC') 
```

这将返回：

```
$row['id'] 
```

[文档](http://php.net/manual/function.mysql-fetch-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:12:04.320

直接[从手册](http://php.net/manual/en/function.mysql-fetch-array.php)：

> mysql_fetch_array — 以关联数组、数值数组或两者的形式获取结果行

该函数的原型说

```
array mysql_fetch_array ( resource $result [, int $result_type = MYSQL_BOTH ] ) 
```

这意味着它默认返回两个数组 - 也就是说 - 复制信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:11:44.400

mysql_fetch_array 将结果行作为关联数组、数值数组或两者兼而有之。请参阅：[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:12:54.253

中的每一行`$result`都有一个索引、一个名称和一个值。您可以通过索引或名称查找行的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T07:14:12.133

请参阅[文档`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php)

默认设置是获取具有数字和关联数组的数组。请参阅 PHP 手册以更改它。

# c# - 为 Windows 窗体自定义控件定义事件

> ID：10529021
> 
> 赞同：5
> 
> 时间：2012-05-10T07:08:34.913
> 
> 标签：c#, visual-studio, custom-controls

我正在开发一个表单自定义控件。该控件是一个 MonthCalendar，如 Visual Studio(C#) MonthCalendar 控件，我想为我的控件定义一个事件。如何为这个表单自定义控件定义一个新事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T12:07:56.917

如果您的活动不应提供任何其他信息（Foo 是您的活动名称）：

```
public event EventHandler Foo; 
```

并以这种方式提出：

```
protected virtual void OnFoo()
{
    if (Foo != null)
        Foo(this, EventArgs.Empty);
} 
```

如果您需要将一些附加信息传递给事件处理程序，则通过从类继承来创建自定义参数`EvenArgs`类

```
public class FooEventArgs : EventArgs
{
    public string Message { get; private set; }

    public FooEventArgs(string message)
    {
        Message = message;
    }
} 
```

以这种方式声明事件：

```
public event EventHandler<FooEventArgs> Foo; 
```

并以这种方式提出：

```
protected virtual void OnFoo(string message)
{
   if (Foo != null)
       Foo(this, new FooEventArgs(message));
} 
```

创建受保护的方法以由声明事件的类的后代引发事件是一种很好的做法。使用事件命名约定的好习惯：

*   `-ing`为在某事发生之前引发的事件添加后缀（通常您可以取消此类事件）（例如验证）
*   `-ed`为事件发生后引发的事件添加后缀（例如单击）

正如 Thorsten 所说，创建`virtual`引发事件的方法的良好实践。它不仅允许从后代引发事件，还可以禁用事件引发，或在事件引发之前/之后添加一些行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:40:00.510

```
public event EventHandler<EventArgs> YourEvent; 
```

# android - Android更新位图数组/队列

> ID：10529022
> 
> 赞同：0
> 
> 时间：2012-05-10T07:08:42.603
> 
> 标签：android, arrays, bitmap

我需要一些建议如何在我的应用程序中实现这种情况。

我有数组`bitmpaps`，我用它来存储我的不同状态`Canvas`，所以我将来可以使用它们。这是我正在使用的代码：

```
private Bitmap[] temp;
// on user click happens this ->
if(index<5){
            temp[index] = Bitmap.createBitmap(mBitmap);
            index++;
} 
```

所以基本上我只想根据用户的操作保存最后 5 个位图。我想学习的是如何更新我的数组，以便始终拥有最后 5 个位图。

这就是我的意思：

> 位图 [1,2,3,4,5] -> 用户点击后我想删除第一个位图，重新排序数组并将新的保存为最后一个..所以我的数组应该如下所示：位图 [ 2,3,4,5,6];

有什么建议/建议是最好的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:25:37.587

我刚刚写了这个......使用这个代码来初始化：

```
Cacher cach = new Cacher(5);
//when you want to add a bitmap
cach.add(yourBitmap);
//get the i'th bitmap using
cach.get(yourIndex); 
```

请记住，您可以重新实现该函数`get`以返回第 i 个“旧”位图

```
public class Cacher {
    public Cacher(int max) {

        this.max = max;
        temp = new Bitmap[max];
        time = new long[max];
        for(int i=0;i<max;i++)
            time[i] = -1;
    }
    private Bitmap[] temp;
    private long[] time;
    private int max = 5;
    public void add(Bitmap mBitmap) {
        int index = getIndexForNew();
        temp[index] = Bitmap.createBitmap(mBitmap);

    }
    public Bitmap get(int i) {
        if(time[i] == -1)
            return null;
        else
            return temp[i];
    }
    private int getIndexForNew() {
        int minimum = 0;
        long value = time[minimum];
        for(int i=0;i<max;i++) {
            if(time[i]==-1)
                return i;
            else {
                if(time[i]<value) {
                    minimum = i;
                    value = time[minimum];
                }
        }
        return minimum;
    }
} 
```

# php - 需要查询mysql中的多层次营销

> ID：10529033
> 
> 赞同：3
> 
> 时间：2012-05-10T07:09:22.370
> 
> 标签：php, mysql

嗨，我需要在 MySQL 中查询我的 PHP 页面，我给我的表格设计提供了数据：

表名：tcustomers

```
Name, LeftID, RightID, Code
---------------------------
Arul    102      103     101
James   104      105     102
Alex    106      107     103
David   108      109     104
Sasi    110      111     105
Prem    112      113     106
Kumar   114      115     107 
```

我需要的是当我在数据（即 101）中传递 arul 代码时，我需要将他的整个左右示例输出为

```
LEFT         Right
James        Alex
David        Prem
Sasi         Kumar 
```

如果这里有人可以在不使用storedprocdure的情况下帮助我，那将非常有帮助并提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:15:19.000

如果您**只需要有限数量的左右元素答案，**这是一个**部分解决方案**。

 **以下是条件 Code = 101 (Arul) 的**3 个右和 3 个左答案**的可能性：

```
SELECT
    c.Name as NameRequested,
    l1.Name as NameLeft1,
    l2.Name as NameLeft2,
    l3.Name as NameLeft3,
    r1.Name as NameRight1,
    r2.Name as NameRight2,
    r3.Name as NameRight3
FROM tcustomers c
LEFT JOIN tcustomers l1 ON c.LeftID = l1.Code
LEFT JOIN tcustomers l2 ON l1.LeftID = l2.Code
LEFT JOIN tcustomers l3 ON l2.LeftID = l3.Code
LEFT JOIN tcustomers r1 ON c.RightID = r1.Code
LEFT JOIN tcustomers r2 ON r1.RightID = r2.Code
LEFT JOIN tcustomers r3 ON r2.RightID = r3.Code
WHERE
    l.Code = 101; 
```

当然，**您可以轻松扩展所需答案的数量**。**

# vim - Vim 编辑 *diff 文件*，自动更新 diff 范围

> ID：10529034
> 
> 赞同：3
> 
> 时间：2012-05-10T07:09:22.617
> 
> 标签：vim, diff

   假设我在提交之前生成了我的项目的差异，比如说使用 svn。为项目中的所有文件设置一个差异是在提交更改之前查看更改的一种非常好的方法。但是有时我希望在不重新打开每个文件的情况下编辑这些更改，只需编辑差异并重新应用它。所以我制作了这样的键映射（我设置了 svn diff 以使用具有相当数量周围行的统一格式）：

```
map scde :w! tmpdiff<cr>:!svn revert -R .<cr>:!patch -p0 <tmpdiff<cr> 
```

   它有效，但只是部分有效；您可以编辑添加的行，但是如果将行标记为已删除或想要添加另一行，则会遇到一些麻烦，因为指定的差异范围与差异中存在的实际文本不匹配。可以更新它们以进行简单的更改，例如添加一行，但是如果您进行更复杂的更改，它会很乏味并且很快就会变得复杂。有没有办法编辑差异，以便范围会自动正确更新？我发现emacs对此有一些差异模式（但是我没有尝试过），但是我无法使用vim找到满足我需求的解决方案。Maye有人可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:18:26.790

看看[`rediff`](http://linuxcommand.org/man_pages/editdiff1.html)。它会自动修复补丁文件中的偏移量。

# spring - 带有多个参数的href

> ID：10529037
> 
> 赞同：2
> 
> 时间：2012-05-10T07:09:27.270
> 
> 标签：spring, url, parameters

我想通过以下方式向控制器发送 3 个参数：

```
<li><a href="result?name1=thor&name2=hulk&name3=loki">SMTH</a></li> 
```

控制器：

```
@Controller
@RequestMapping(value="/result")
public class SmthController {

    @RequestMapping(method=RequestMethod.GET)
    public String dosmth(HttpServletRequest request) {

        String one = request.getParameter("name1");
        String two = request.getParameter("name2");
        String three = request.getParameter("name3");

        JOptionPane.showMessageDialog(null,
                " Param 1 is:" +one +" \n Param 2 is: " +two +" \n Param 3 is: " +three);

        return "redirect:/";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:35:07.667

您的代码没问题，但这是 Spring 方式：

```
@Controller
@RequestMapping(value="/result")
public class SmthController {

    @RequestMapping(method=RequestMethod.GET)
    public String dosmth(HttpServletRequest request, @RequestParam("name1") String one, @RequestParam("name2") String two, @RequestParam("name3") String three) {

        JOptionPane.showMessageDialog(null,
                " Param 1 is:" +one +" \n Param 2 is: " +two +" \n Param 3 is: " +three);

        return "redirect:/";
    }
} 
```

此外，如果未在 GET 请求上设置参数，您可以使用 @RequestParam 的 defaultValue 属性来建立默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:10:15.517

我更喜欢使用 Map 来简化方法签名：

```
@RequestMapping(method=RequestMethod.GET)
public String dosmth(@RequestParam Map<String, String> map) {
    System.out.println("Param 1 is:" + map.get("paramName1") + "Param 2 is:" + map.get("paramName2"));
    return "redirect:/";
} 
```

# c - 库插入/注入不适用于打开命令

> ID：10529039
> 
> 赞同：0
> 
> 时间：2012-05-10T07:09:44.563
> 
> 标签：c, macos, macos-carbon, inject, interposing

我编写了一个动态库，通过环境变量 DYLD_INSERT_LIBRARIES 加载到目标应用程序中，当应用程序通过以下命令从终端执行时，dylib 工作正常：

```
$ export DYLD_INSERT_LIBRARIES=/path/to/mylib.dylib
$ /path/to/application.app/Contents/MacOS/executable 
```

但是当通过 open 命令执行它时：

```
$ open /path/to/application.app 
```

发生此错误：

```
dyld: could not load inserted library: 
```

两种执行方法有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:08:26.963

这个问题的原因是我的 dylib 是 32 位的，它首先加载到 64 位的“open”中。

# iphone - iPhone中按时间顺序排列的国家/地区列表

> ID：10529041
> 
> 赞同：0
> 
> 时间：2012-05-10T07:09:55.180
> 
> 标签：iphone, ios, ios4

对于国家/地区列表，我从 Iphone 本身获取了数组，就像从

`[NSLocale ISOCountryCodes]`

它返回所有国家代码，我得到了完整的国家名称，并按字母顺序进行了一些编码。

但我希望它按时间顺序显示在pickerview中。

任何人都可以帮助我按时间顺序获取国家/地区列表的最短方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:23:39.977

根据您的评论，您希望按“成立”日期对这些国家/地区进行排序。以下维基百科页面提供了获得主权日期的国家列表：

[http://en.wikipedia.org/wiki/List_of_sovereign_states_by_date_of_formation](http://en.wikipedia.org/wiki/List_of_sovereign_states_by_date_of_formation)

您需要自己进行一些数据管理，在 ISOCountryCode 和“基础”日期的本地数据库之间创建一个查找机制。

当然，一个国家的成立日期将有历史学家的争议。也就是说，我很想知道是否有 NSWorldHistory 类:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:08:56.557

我猜你的问题是真的：“我如何显示一组值，但通过一组隐藏的值排序？”

在这里，stackoverflow 周围还有其他一些资源......

一种解决方案是使用 NSDictionary，将创建日期作为键，国家代码作为值，按键排序

如果您的问题是：“我如何将一组数据填充到另一组数据中，具有一对一的关系”，答案又是 NSDictionary，或嵌套 NSDictionary 与 NSArray。

如果您的问题是：“我如何从国家/地区代码中获取我的应用程序的创建日期”，那么您应该在 MikeJ 的回答中点击 V。

# sharepoint-2010 - 将 SharePoint 从一台机器迁移到另一台机器

> ID：10529044
> 
> 赞同：2
> 
> 时间：2012-05-10T07:10:08.503
> 
> 标签：sharepoint-2010

我有一个 SharePoint 服务器，现在我想将它从一台机器移动到另一台机器。

这就是我为迁移所做的。

我刚刚在我的新机器上安装了 sharepoint 服务器，并且我已经从新服务器中删除了 Sharepoint_config 和 wss_content 数据库。我已经从旧服务器恢复了两个数据库。然后我尝试运行 Central Admin，但出现无法连接到内容数据库错误。

更换数据库是错误的。有没有其他方法可以将 SP 服务器从一台机器迁移到另一台机器。我已经尝试过进行农场备份和恢复，但我遇到了很多问题。所以我觉得更换 DB 对我来说会更好。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:12:00.110

在服务器之间移动 SharePoint 是一项巨大的工作。数据库中的数据在很大程度上取决于 SharePoint 安装及其环境。因此，我建议在新服务器上重新安装 SharePoint，然后将网站集备份恢复到新安装。

1.  在新服务器计算机上安装 SharePoint Server
2.  从旧服务器备份网站集，请遵循以下指南：[http ://technet.microsoft.com/en-us/library/cc263441(v=office.12).aspx](http://technet.microsoft.com/en-us/library/cc263441(v=office.12).aspx)
3.  在新服务器上创建 Web 应用程序
4.  从上一个还原网站集。备份，请遵循本指南：[http ://technet.microsoft.com/en-us/library/cc262087(v=office.12).aspx](http://technet.microsoft.com/en-us/library/cc262087(v=office.12).aspx)

请注意，如果您在 LAYOUT 文件夹中部署了场级别的自定义解决方案（由 Visual Studio 开发）或 css 文件，请不要忘记在新服务器上重新部署它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T08:30:23.267

我想这个问题太老了，我的回答对主题启动器没有帮助......但是，我正在寻求更新我自己关于这个主题的知识，我觉得在这里分享它会很有用。

此解决方案不适用于每个 SharePoint 部署，当然，这只是一个一般性的想法。而且我认为它不太适合生产环境......但如果你像我一样勇敢和愚蠢，你也可以在那里做，并采取一些额外的预防措施，如备份等。

## 以下是先决条件：

1.  SharePoint 最初是在农场模式下安装的（不是在单服务器模式下）
2.  新旧服务器都在同一个域中
3.  您知道用于初始安装的 Farm Passphrase
4.  旧服务器仍然完好无损，可以从新服务器访问

## 要做的步骤

*如果您不想将数据库移动到新位置，请跳过步骤 2-6*

1.  在新服务器上安装 SharePoint 并加入现有场。有关加入程序的详细信息，请参阅 [https://technet.microsoft.com/en-us/library/cc261752.aspx 。](https://technet.microsoft.com/en-us/library/cc261752.aspx)
2.  确保 SharePoint 是只读的。如果您的用户没问题，您可以关闭 MS SQL DBEngine 服务。
3.  在新服务器或您想要的其他位置安装 MSSQL Server。请记住，如果不是演示/开发环境，将 SharePoint 和 MSSQL 保留在同一台服务器上并不是一个好主意
4.  将所有 SharePoint 数据库移动到新的 MSSQL Server。您可以简单地复制所有数据库文件并将其附加到新的 SQL 中，或者采用完全备份和恢复的方式。
5.  **重要提示：使用***cliconfg*工具在新服务器上创建 SQL 客户端别名。有关详细信息，请参阅 blogs.msdn.com/b/priyo/archive/2013/09/13/sql-alias-for-sharepoint.aspx。

    *   使用您的旧 SQL 实例名称作为别名。例如，如果您的旧服务器在 SharePoint.mydomain.com 上与 SharePoint 一起安装了 SQL，则别名应为“SharePoint.mydomain.com”
    *   将别名的服务器名称设置为新的 SQL 位置。像“NewServer.mydomain.com”这样的东西
    *   确保为 SQL 连接指定正确的端口号或为默认动态端口配置网络。仅当您在同一台计算机上具有本地 SQL 服务器时，才不需要这样做。
6.  在旧服务器上创建相同的 SQL 客户端别名（这是从场中正确删除旧服务器所必需的）

7.  从场中删除旧服务器。有关详细信息，请参阅[此技术网文章](https://technet.microsoft.com/en-us/library/cc263130.aspx)
8.  更新 DNS 设置或用于将用户指向新服务器的任何设置。

而已。希望它会帮助某人

# performance - 是否有一种比快速排序更快的专门算法来重新排序数据 ACEGBDFH？

> ID：10529049
> 
> 赞同：5
> 
> 时间：2012-05-10T07:10:27.410
> 
> 标签：performance, algorithm, sorting, optimization, language-agnostic

我有一些来自硬件的数据。数据以 32 字节的块形式出现，并且可能有数百万个块。数据块按以下方式分成两半（一个字母是一个块）：

```
A C E G I K M O B D F H J L N P 
```

或者如果编号

```
0 2 4 6 8 10 12 14 1 3 5 7 9 11 13 15 
```

首先是具有偶数索引的所有块，然后是奇数块。是否有专门的算法来正确重新排序数据（按字母顺序）？

限制主要在空间上。我不想分配另一个缓冲区来重新排序：只是一个块。但我也想保持较低的移动次数：一个简单的快速排序将是 O(NlogN)。对于这种特殊的重新排序情况，在 O(N) 中是否有更快的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T07:53:45.047

由于这些数据始终处于相同的顺序，因此根本不需要经典意义上的排序。您不需要任何比较，因为您已经提前知道两个给定数据点中的哪一个。

相反，您可以直接对数据产生排列。如果您将其转换为循环形式，这将准确地告诉您要执行哪些交换，将置换数据转换为有序数据。

这是您的数据的示例：

```
0 2 4 6 8 10 12 14 1 3  5  7  9 11 13 15
0 1 2 3 4 5  6  7  8 9 10 11 12 13 14 15 
```

现在计算逆（我将跳过这一步，因为我在这里很懒，假设我上面给出的排列实际上已经是逆）。

这是循环形式：

```
(0)(1 8 4 2)(3 9 12 6)(5 10)(7 11 13 14)(15) 
```

因此，如果您想重新排序这样结构的序列，您会这样做

```
# first cycle
# nothing to do

# second cycle
swap 1 8
swap 8 4
swap 4 2

# third cycle
swap 3 9
swap 9 12
swap 12 6

# so on for the other cycles 
```

如果您对逆而不是原始排列执行此操作，您将获得正确的序列，并证明交换次数最少。

**编辑**：

有关此类内容的更多详细信息，请参阅有关 TAOCP 中的排列的章节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:26:37.403

所以你有数据以这样的模式进入

a [0] a [2] a [4] ...a [14] a [1] a [3] a [5] ...a [15]

你想让它排序

b [0] b [1] b [2] ...b [15]

通过一些重新排序，排列可以写成：

a [0] -> b [0]

a [8] -> b [1]
a [1] -> b [2]
a [2] -> b [4]
a [4] -> b [8]

a [9] -> b [3]
a [3] -> b [6]
a [6] -> b [12]
a [12] -> b [9]

a [10] -> b [5]
a [5] -> b [10]

a [11] -> b [7]
a [7] -> b [14]
a [14] -> b [13]
a [13] -> b [11]

a [15] -> b [15]

因此，如果您想在一个临时的仅一个块额外空间的情况下对其进行排序`t`，这可以在 O(1) 中完成

```
t = a8;   a8 = a4;  a4 = a2;  a2 = a1;  a1 = t

t = a9;   a9 = a12; a12= a6;  a6 = a3;  a9 = t

t = a10; a10 = a5;  a5 = t

t = a11; a11 = a13; a13 = a14; a14 = a7; a7 = t 
```

编辑：
一般情况（对于 N ！= 16），如果它可以在 O(N) 中解决，实际上是一个有趣的问题。我怀疑循环总是以满足的素数开始，`p < N/2 && N mod p != 0`并且索引具有像 i [n+1] = 2i [n] mod N 这样的递归，但我无法证明这一点。如果是这种情况，推导 O(N) 算法是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:32:38.210

也许我误解了，但是如果订单总是*与*给定的订单相同，那么您可以“预先编程”（即避免所有比较）最佳解决方案（这将是交换次数最少的解决方案）从给定的字符串移到 ABCDEFGHIJKLMNOP 并且对于这么小的东西，您可以手动计算 - 请参阅 LiKao 的答案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:30:31.690

我更容易用数字标记你的集合：

0 2 4 6 8 10 12 14 1 3 5 7 9 11 13 15

从 14 开始，将所有偶数移动到位置（8 次交换）。你会得到这个：

0 1 2 9 4 6 13 8 3 10 7 12 11 14 15

现在您需要另外 3 次交换（9 与 3、7 与 13、11 与 13 从 7 移出）。

共11次交换。不是一般的解决方案，但它可以给你一些提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:21:20.110

您还可以将预期的排列视为地址位 `abcd <-> dabc' 的洗牌（abcd 是索引的各个位），例如：

```
#include <stdio.h>

#define ROTATE(v,n,i) (((v)>>(i)) | (((v) & ((1u <<(i))-1)) << ((n)-(i))))

/******************************************************/
int main (int argc, char **argv)
{
unsigned i,a,b;

for (i=0; i < 16; i++) {
        a = ROTATE(i,4,1);
        b = ROTATE(a,4,3);

        fprintf(stdout,"i=%u a=%u b=%u\n", i, a, b);
        }

return 0;
}

/******************************************************/ 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-10T07:18:52.400

我相信那是[计数排序](http://en.wikipedia.org/wiki/Counting_sort)

# android - 服务中的广播接收器不起作用

> ID：10529055
> 
> 赞同：1
> 
> 时间：2012-05-10T07:10:42.727
> 
> 标签：android

这是我的服务文件：

```
public class SMSCounterService extends Service {
    /** Called when the activity is first created. */
    @Override
    public void onCreate() {
        Log.d(LOG_TAG, "SMSCounterService: Constructor");
        super.onCreate();
        dbActivities = new DBActivities(this);
        dbActivities.open();    // Create or open the existing DB if already created

        IntentFilter filter = new IntentFilter();
        filter.addAction("android.provider.Telephony.SMS_SENT");
        registerReceiver(receiver, filter);
    }

    @Override
    public void onDestroy() {
        unregisterReceiver(receiver);
        dbActivities.close();
        super.onDestroy();
    }

    private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals("android.provider.Telephony.SMS_SENT")) {
                smsCount++;
                Log.d(LOG_TAG, "SMSCounterService: smsCount=" +smsCount);
                long dbInsertReturn = dbActivities.insertIntoDB(smsCount);
            }
        }
    }; 
```

我可以看到日志“SMSCounterService：构造函数”。因此调用了 onCreate() 方法。但是当我发送短信时，BroadcastReceiver 无法识别它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:16:11.470

确保您已在**AndroidManifest.xml中添加所需的权限**

发送：

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

对于接收：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:59:54.073

AFAIK，没有像 android.provider.Telephony.SMS_SENT 这样的意图。我通过冰淇淋三明治做了“grep”，但找不到。

使用 ContentObserver 方法。注册您的观察者以收听更新消息提供者。（决定将其注册为答案，谁知道也许有人会接受它；））

# iphone - 如何从解析结果中删除不需要的数据

> ID：10529058
> 
> 赞同：0
> 
> 时间：2012-05-10T07:10:51.090
> 
> 标签：iphone, ios

我正在开发一个应用程序。在那使用 xml 解析。那个 xml 文件包含 4 个类别标签和其他标签。从 xml 文件中我想获取类别标签的数据。在获取类别数据时，每次我打印类别值的数组。显示正确。但解析完成后，另一个标签数据将附加到最后一个类别名称。我的解析代码如下所示。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
if(self.presentvalue)
{
    [presentvalue appendString:string];
}
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

if(![elementName compare:@"category"])
{
    [categories addObject:presentvalue];
    NSLog(@"%@",presentvalue);
    NSLog(@"Number of elements %@",categories);
}

}
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if([elementName isEqualToString:@"category"])
{
    presentvalue=[NSMutableString string];  
}
} 
```

我的xml文件内容就像

```
 <lesson>
   <categories>
   <category id="1">1</category>
   <category id="2">2</category>
   <category id="3">3</category>
   </categories>
   <references>
    <reference id="1" type="youtube" categoryid="2" name="Boyles law">
    <url><![CDATA[http://www.youtube.com/watch?v=J_I8Y-i4Axc]]>
     </url>
    </reference>
    </references>
    </lesson> 
```

从这个xml我得到了像1,2,3这样的数组值http://www.youtube.com/watch?v=J_I8Y-i4Axc。像这样我得到了结果。所以请告诉我如何在没有那个的情况下获取类别值额外的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:15:41.417

检查您的 xml 解析代码。如果开始/结束元素名称是类别。将对象添加到数组中，否则什么也不做。只是昏倒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:25:14.597

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if ([elementName isEqualToString:@"category"]) {
    NSLog(@"Node is found correctly");
    if(presentvalue == nil)
        presentvalue = [NSMutableString string];
    else 
        [presentvalue setString:@""];
}
else {
    presentvalue = nil;
}

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

[presentvalue appendString:string];
if (presentvalue) 
{
   [self.tempArray addObject:presentvalue]; // add this line. create a tempArray containing all the strings.
    presentvalue = nil;
}
} 
```

这应该可以帮助您进行解析。希望能帮助到你。快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:41:53.010

我觉得这条线看起来很奇怪

```
if(![elementName compare:@"category"]) 
```

不应该是这样吗？（没有 ！）

```
if([elementName compare:@"category"]) 
```

已编辑

尝试将此替换为 didEndElement

```
if([elementName isEqualToString:@"category"])
{
    [categories addObject:presentvalue];
    presentValue = [NSMutableString string];
    NSLog(@"%@",presentvalue);
    NSLog(@"Number of elements %@",categories);
} 
```

# axis2 - axis2 客户端中的 NTLM 身份验证返回错误 401

> ID：10529062
> 
> 赞同：3
> 
> 时间：2012-05-10T07:11:25.283
> 
> 标签：axis2

我正在使用axis2创建客户端代码并使用NTLM身份验证访问wcf webservice。我的客户代码是

```
 Service1Stub stub = new Service1Stub();             
    Options options = stub._getServiceClient().getOptions();    
    HttpTransportProperties.Authenticator   auth = new HttpTransportProperties.Authenticator();
    auth.setUsername("administrator");
    auth.setPassword("passwrd");
    auth.setHost("172.16.12.25"); 
    auth.setDomain("MY-PC");        
    List<String> authSchemes = new ArrayList<String>();         
    authSchemes.add(HttpTransportProperties.Authenticator.NTLM);        
    auth.setAuthSchemes(authSchemes); 

    options.setProperty(HTTPConstants.AUTHENTICATE, auth); 
    options.setProperty(HTTPConstants.CHUNKED, Boolean.FALSE); 
    stub._getServiceClient().setOptions(options); 
```

当我运行我的客户端代码时，它返回以下错误

```
 org.apache.axis2.AxisFault: Transport error: 401 Error: Unauthorized
        at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.java:310)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:194)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:404)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:231)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.tempuri.Service1Stub.welcomeData(Service1Stub.java:473)
        at ws.client.Client.myservice(Client.java:159)
        at ws.client.Client.main(Client.java:50) 
```

我的标题日志是

```
 >> "POST /Service1/Service1.svc HTTP/1.1[\r][\n]"
     >> "Content-Type: text/xml; charset=UTF-8[\r][\n]"
     >> "SOAPAction: "http://tempuri.org/IService1/WelcomeData"[\r][\n]"
     >> "User-Agent: Axis2[\r][\n]"
     >> "Content-Length: 278[\r][\n]"
     >> "Authorization: NTLM TlRMTVNTUAADAAAAGAAYAGMAAAAAAAAAewAAAAkACQBAAAAADQANAEkAAAANAA0AVgAAAAAAAAB7AAAABlIAAFZJTk9USC1QQ0FETUlOSVNUUkFUT1IxNzIuMTYuMTIuMjQ11kmkEIwyUVitHBvTPwhExpcylZ9vkdwd[\r][\n]"
     >> "Host: 172.16.12.25[\r][\n]"
     >> "[\r][\n]"
     >> "<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><ns1:WelcomeData xmlns:ns1="http://tempuri.org/"><ns1:helloservice>Hello Servie</ns1:helloservice></ns1:WelcomeData></soapenv:Body></soapenv:Envelope>"
     << "HTTP/1.1 401 Unauthorized[\r][\n]"
     << "HTTP/1.1 401 Unauthorized[\r][\n]"
     << "Content-Type: text/html[\r][\n]"
     << "Server: Microsoft-IIS/7.5[\r][\n]"
     << "WWW-Authenticate: NTLM[\r][\n]"
     << "X-Powered-By: ASP.NET[\r][\n]"
     << "Date: Thu, 10 May 2012 19:30:20 GMT[\r][\n]"
     << "Content-Length: 1293[\r][\n]"
     << "[\r][\n]"
     << "<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">[\r][\n]"
     << "<html xmlns="http://www.w3.org/1999/xhtml">[\r][\n]"
     << "<head>[\r][\n]"
     << "<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>[\r][\n]"
     << "<title>401 - Unauthorized: Access is denied due to invalid credentials.</title>[\r][\n]"
     << "<style type="text/css">[\r][\n]"
     << "<!--[\r][\n]"
     << "body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}[\r][\n]"
     << "fieldset{padding:0 15px 10px 15px;} [\r][\n]"
     << "h1{font-size:2.4em;margin:0;color:#FFF;}[\r][\n]"
     << "h2{font-size:1.7em;margin:0;color:#CC0000;} [\r][\n]"
     << "h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} [\r][\n]"
     << "#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;[\r][\n]"
     << "background-color:#555555;}[\r][\n]"
     << "#content{margin:0 0 0 2%;position:relative;}[\r][\n]"
     << ".content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}[\r][\n]"
     << "-->[\r][\n]"
     << "</style>[\r][\n]"
     << "</head>[\r][\n]"
     << "<body>[\r][\n]"
     << "<div id="header"><h1>Server Error</h1></div>[\r][\n]"
     << "<div id="content">[\r][\n]"
     << " <div cla"
     << "ss="content-container"><fieldset>[\r][\n]"
     << "  <h2>401 - Unauthorized: Access is denied due to invalid credentials.</h2>[\r][\n]"
     << "  <h3>You do not have permission to view this directory or page using the credentials that you supplied.</h3>[\r][\n]"
     << " </fieldset></div>[\r][\n]"
     << "</div>[\r][\n]"
     << "</body>[\r][\n]"
     << "</html>[\r][\n] 
```

我不知道我在哪里犯错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:21:21.183

不确定您是否已经找到通过 NTLM 身份验证访问 WCF 的方法。但这是我为解决此问题所做的工作。

HttpClient 不支持 NTLM v2，因此我使用 JCIFS 库返回 NTLM v1、2、3 消息类型，如本网站所述

[http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html)

我刚刚使用上述网站上的 JCIFS_NTLMScheme.java 文件来注册身份验证方案，它成功了！！！！

示例客户端：

```
 List authSchema = new ArrayList();
    AuthPolicy.registerAuthScheme(AuthPolicy.NTLM, org.tempuri.JCIFS_NTLMScheme.class);
    HttpTransportProperties.Authenticator auth = new HttpTransportProperties.Authenticator();
    auth.setUsername("");
    auth.setPassword("");
    auth.setDomain("");
    auth.setHost("");
    auth.setPort();
    List authPrefs = new ArrayList(1);
    authPrefs.add(AuthPolicy.NTLM);
    auth.setAuthSchemes(authPrefs);
    stub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, auth); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:16:58.283

据我所知，Axis2 1.6 的标准版本仍然使用 HTTPClient 3.1 和 NTLMv1，大多数 Windows 服务器默认禁用了 NTLMv1。更改此设置需要修补 Axis2 或更改服务器上的注册表设置。

这是开发线程的链接，其中包含最近 25-05-2012 的补丁：
[https ://issues.apache.org/jira/browse/AXIS2-4318](https://issues.apache.org/jira/browse/AXIS2-4318)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T02:04:58.023

正如@WLPhoenix 指出的那样，Axis2 使用旧的 Apache Commons HTTP，它只支持旧的、反向工程的 NTLM 实现。在新的 Apache HTTPComponents 4.2.3 中，添加了对新的、公开记录的 NTLM 标准的支持，该标准适用于较新版本的 Windows Server 和 IIS [（源代码）](https://hc.apache.org/httpcomponents-client-4.3.x/ntlm.html)。

这是一种使用自定义 Apache Commons HTTP AuthScheme 向后移植新的 Apache HTTPComponents 4 NTLMScheme 以在 Axis2 中使用的方法。

```
public class BackportedNTLMScheme extends org.apache.http.impl.auth.NTLMScheme implements org.apache.commons.httpclient.auth.AuthScheme {

    @Override
    public String authenticate(final Credentials credentials, final HttpMethod method) throws AuthenticationException {
        org.apache.commons.httpclient.NTCredentials oldCredentials;
        try {
            oldCredentials = (org.apache.commons.httpclient.NTCredentials) credentials;
        } catch (final ClassCastException e) {
            throw new InvalidCredentialsException(
                    "Credentials cannot be used for NTLM authentication: " 
                    + credentials.getClass().getName());
        }
        final org.apache.http.auth.Credentials adaptedCredentials = new NTCredentials(oldCredentials.getUserName(), oldCredentials.getPassword(), oldCredentials.getHost(), oldCredentials.getDomain());

        try {
            final Header header = super.authenticate(adaptedCredentials, null);
            return header.getValue();
        } catch (final org.apache.http.auth.AuthenticationException e) {
            throw new AuthenticationException("AuthenticationException", e);
        }
    }

    @Override
    public void processChallenge(final String challenge) throws MalformedChallengeException {
        final String s = AuthChallengeParser.extractScheme(challenge);
        if (!s.equalsIgnoreCase(getSchemeName())) {
            throw new MalformedChallengeException("Invalid NTLM challenge: " + challenge);
        }
        int challengeIdx = challenge.indexOf(' ');
        final CharArrayBuffer challengeBuffer;
        if(challengeIdx != -1){
            challengeBuffer = new CharArrayBuffer(challenge.length());
            challengeBuffer.append(challenge);
        } else {
            challengeBuffer = new CharArrayBuffer(0);
            challengeIdx = 0;
        }
        try {
            parseChallenge(challengeBuffer, challengeIdx, challengeBuffer.length());
        } catch (final org.apache.http.auth.MalformedChallengeException e) {
            throw new MalformedChallengeException("MalformedChallengeException", e);
        }
    }

    @Override
    @Deprecated
    public String getID() {
        throw new RuntimeException("deprecated BackportedNTLMScheme.getID()");
    }

    @Override
    @Deprecated
    public String authenticate(final Credentials credentials, final String method, final String uri) throws AuthenticationException {
        throw new RuntimeException("deprecated BackportedNTLMScheme.authenticate(Credentials, String, String)");
    }
} 
```

## 用法

```
// given a stubbed AXIS SOAP client called MyAxisClient:
MyAxisClientStub myAxisClient = new MyAxisClientStub();
ServiceClient serviceClient = myAxisClient._getServiceClient();

// use new NTLM
AuthPolicy.registerAuthScheme(AuthPolicy.NTLM, BackportedNTLMScheme.class);
Authenticator authenticator = new Authenticator();
authenticator.setAuthSchemes(Arrays.asList(AuthPolicy.NTLM));
authenticator.setDomain("my-auth-domain");
authenticator.setHost("my-auth-host");
authenticator.setUsername("my-username");
authenticator.setPassword("my-password");
serviceClient.getOptions().setProperty(HTTPConstants.AUTHENTICATE, authenticator);

//call MyAxisClient methods 
```

我在 Windows Server 2008 R2 上的 IIS 7.5 上对此进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T17:31:22.270

在一位同事发现修复了 401 Unauthorized 之前，我无法让它工作。

```
import org.apache.commons.httpclient.auth.CredentialsNotAvailableException;
import org.apache.commons.httpclient.auth.CredentialsProvider;
import org.apache.commons.httpclient.params.DefaultHttpParams;
import org.apache.commons.httpclient.NTCredentials;

final NTCredentials credentials = new NTCredentials(username, password, host, domain);    
final CredentialsProvider myCredentialsProvider = new CredentialsProvider() {
        public Credentials getCredentials(final AuthScheme scheme, final String host, int port, boolean proxy) throws CredentialsNotAvailableException {
            return credentials;
        }
    };

    DefaultHttpParams.getDefaultParams().setParameter("http.authentication.credential-provider", myCredentialsProvider); 
```

# clojure - 获取 Clojure Stacktrace

> ID：10529063
> 
> 赞同：6
> 
> 时间：2012-05-10T07:11:31.547
> 
> 标签：clojure

我知道[http://richhickey.github.com/clojure/clojure.stacktrace-api.html](http://richhickey.github.com/clojure/clojure.stacktrace-api.html)。

有没有办法在不抛出异常并捕获它的情况下获取当前的堆栈跟踪？

（我正在调试一段代码，并希望在某些点捕获堆栈跟踪，以便分析发生了什么。）

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T07:29:00.910

使用 clojure.repl.pst

```
user=> (try (/ 1 0) (catch Exception e (pst e)))
ArithmeticException Divide by zero
    clojure.lang.Numbers.divide (Numbers.java:156)
    clojure.lang.Numbers.divide (Numbers.java:3691)
    user/eval28 (NO_SOURCE_FILE:8)
    clojure.lang.Compiler.eval (Compiler.java:6511)
    clojure.lang.Compiler.eval (Compiler.java:6477)
    clojure.core/eval (core.clj:2797)
    clojure.main/repl/read-eval-print--6569 (main.clj:245)
    clojure.main/repl/fn--6574 (main.clj:266)
    clojure.main/repl (main.clj:266)
    clojure.main/repl-opt (main.clj:332)
    clojure.main/main (main.clj:427)
    clojure.lang.Var.invoke (Var.java:423) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:56:07.570

此代码返回 StackTraceElement 数组，该数组不难[转换为可读形式](https://stackoverflow.com/questions/1149703/stacktrace-to-string-in-java)：

```
(.getStackTrace (Thread/currentThread)) 
```

# jpa - OpenJPA1.2 - 延迟加载 BLOB

> ID：10529064
> 
> 赞同：3
> 
> 时间：2012-05-10T07:11:35.787
> 
> 标签：jpa, db2, jpql, openjpa

我有一个非常简单的 JPA 实体。它具有一些简单的元数据字段、ID 和一个约 500kB-10MB 的大负载字符串。

```
@Entity
public class MyEntity{
  @Id
  @GenerateValue(Strategy=GenerationType.IDENTITY)
  private long myEntityId;

  private String metaData1; 
  ..
  private String metaDataN;

  @Lob
  private String payload; // large. 
```

}

大多数时候，我并不关心加载有效负载，而只是查询元数据字段。有没有一种方法可以在不创建包装有效负载的特定实体的情况下延迟加载有效负载，并与我的主要实体中的那个实体具有延迟加载一对一的关系？

整个事情是使用 OpenJPA 1.2 和一个 DB2 支持数据库来实现的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:00:55.893

```
@Lob
@Basic(fetch=FetchType.LAZY)
private String payload; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:22:18.303

我想你也可以使用：

```
@OneToOne(fetch=FetchType.LAZY)
@JoinColumn(//some col. name)
private String payload; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T01:36:44.097

Hibernate 不会加载 lob，只要将其映射为 Lob 类型

# javascript - Javascript 在 IE 中不起作用

> ID：10529067
> 
> 赞同：1
> 
> 时间：2012-05-10T07:11:49.517
> 
> 标签：javascript, css, visibility

刚刚意识到我的网站在 IE 中*无法*正常工作。它在 Chrome 和 Firefox 中完美运行。在 IE 中，问题是，受 javascript 影响的元素只是没有出现。我启用了 Javascript，所以我不知道它与其他浏览器有何不同。

当我使用该`toggle_visibility`功能时：

```
function toggle_visibility_1(id) {
    var e = document.getElementById(id);
    if(e.style.display = 'inline') 
    e.style.display = 'none';
}
function toggle_visibility_2(id) {
    var e = document.getElementById(id);
    if(e.style.display = 'none') 
    e.style.display = 'inline';
} 
```

该网站在这里：[http](http://www.dillonbrannick.com/) ://www.dillonbrannick.com/ 当然，除非在 IE 中，否则不会有明显的问题，如果在 IE 中可能不明显，所以希望我已经描述得足够好。

所以我似乎以某种方式**解决了这个问题**，如果你愿意，它应该在这里看到：http: [//testerwebby.tumblr.com/](http://testerwebby.tumblr.com/) 所以我不知道我做了什么，但我很快就会把它推广到我的网站，谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T07:15:18.920

您正在执行任务，而不是比较：

```
// Sets the value of display
if ( e.style.display = 'none' ) 
```

您应该使用`==`(value) 或`===`(value and type) 来测试相等性：

```
// Tests the value of display
if ( e.style.display == "none" ) 
```

`inline`如果您只想在和之间切换`none`，则以下内容会更好：

```
function toggle_visibility(id) {
    var e = document.getElementById(id);
    e.style.display = (e.style.display === "none") ? "inline" : "none" ;
} 
```

演示：http: [//jsbin.com/uyawop/edit#javascript,html](http://jsbin.com/uyawop/edit#javascript,html)

# objective-c - 如何使用单例类实现 iAd

> ID：10529071
> 
> 赞同：2
> 
> 时间：2012-05-10T07:12:07.323
> 
> 标签：objective-c, ios5, singleton, iad, xcode4.3

我想在我的 viewController 中实现 iAd，以便我在这里为 iAd 创建单例类，这是我使用的代码，但它不会在我的 viewController 中显示 iAd。

> adWhirlSingleton.h

```
#import <Foundation/Foundation.h>
#import "iAd/ADBannerView.h"
@interface adWhirlSingleton : NSObject <ADBannerViewDelegate> {
    ADBannerView *adView;
    UIViewController *displayVC;
}
@property (strong, nonatomic) ADBannerView *adView;
@property (strong, nonatomic) UIViewController *displayVC;
+(id)sharedAdSingleton;
-(void)adjustAdSize:(CGFloat)x:(CGFloat)y;
@end 
```

* * *

> adWhirlSingleton.m

```
#import "adWhirlSingleton.h"
@implementation adWhirlSingleton

static adWhirlSingleton* _sharedAdSingleton = nil;
@synthesize adView, displayVC;

+(id)sharedAdSingleton
{
@synchronized(self)
{
    if(!_sharedAdSingleton)
         _sharedAdSingleton = [[self alloc] init];
    return _sharedAdSingleton;
}
return nil;
}

+(id)alloc
{
@synchronized([adWhirlSingleton class])
{
    NSAssert(_sharedAdSingleton == nil, @"Attempted to allocate a second instance of a   singleton.");
    _sharedAdSingleton = [super alloc];
    return _sharedAdSingleton;
}

return nil;
}

-(id)init
{
self = [super init];
if (self != nil) {
    // initialize stuff here
    self.adView.delegate=self;
}
return self;
}

-(void)dealloc
{
displayVC = nil;
if (adView) {
    [adView removeFromSuperview]; //Remove ad view from superview
    [adView setDelegate:nil];
    adView = nil;
}
[super dealloc];
}

-(void)adjustAdSize:(CGFloat)x :(CGFloat)y
{
   [UIView beginAnimations:@"AdResize" context:nil];
   [UIView setAnimationDuration:0.7];
   adView.frame = CGRectMake(x, y, 320, 50);
   [UIView commitAnimations];
}

-(BOOL)adWhirlTestMode
{
  return YES;
}

-(NSString *)adWhirlApplicationKey
{
  return @"xxxxxxxxxxxxx";
}

-(UIViewController *)viewControllerForPresentingModalView
{
  return displayVC;
}

-(void)bannerViewDidLoadAd:(ADBannerView *)banner {
  [self adjustAdSize:0 :410];
}

@end 
```

* * *

> 我的视图控制器.m

```
#import "adWhirlSingleton.h"

-(void)viewWillAppear:(BOOL)animated {

   adWhirlSingleton *adWhirlSingle = [adWhirlSingleton sharedAdSingleton];
   adWhirlSingle.displayVC = self;
   [adWhirlSingle adjustAdSize:0 :self.view.frame.size.height -50];
   [self.view addSubview:adWhirlSingle.adView];
   [self.view bringSubviewToFront:adWhirlSingle.adView];
   NSLog(@"Ad Banner View");
} 
```

* * *

这就是我实现单例类的方式，因为`iAd`当我执行此操作时，我没有`iAd`显示在我的 ViewController 上。如果有人知道如何实现这一点，请帮助我摆脱这个问题。提前致谢。

# c# - LINQ：如果没有元素，All() 会返回什么？

> ID：10529073
> 
> 赞同：12
> 
> 时间：2012-05-10T07:12:12.930
> 
> 标签：c#, .net, linq, entity-framework

这是一个非常简单的问题，但“全部”对谷歌来说是一个糟糕的关键字，哈哈。

我想获取所有类别，其中没有任何产品更新，或者没有任何产品。

换句话说，获取所有类别，其所有产品尚未更新，包括所有尚未有任何产品的类别。

这是正确的表达方式吗？

```
var categs = context.Categories.Where(c => c.Products.All(x => !x.Updated)); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T07:14:26.983

它返回`true`。从[文档](http://msdn.microsoft.com/en-us/library/bb548541.aspx)（强调我的）：

> **如果源序列的每个元素都通过指定谓词中的测试，**或者序列为空，则****返回值**true ；否则为假。**

 **（这也是合乎逻辑的结论。序列中的*所有*元素确实通过了谓词，就像我*所有*的女儿都超过 10 英尺高一样。我没有任何女儿的事实并没有改变陈述的真实性:)

有关它们如何工作的更多详细信息，[请](http://codeblog.jonskeet.uk/2010/12/28/reimplementing-linq-to-objects-part-10-any-and-all.aspx)参阅我的[Edulinq 博客文章。`Any``All`](http://codeblog.jonskeet.uk/2010/12/28/reimplementing-linq-to-objects-part-10-any-and-all.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T07:17:59.683

全部“确定序列的所有元素是否满足条件。”

[MSDN](http://msdn.microsoft.com/en-us/library/bb548541.aspx)

我认为你的表达是正确的。你得到了所有包含未更新产品的类别。**

# c++ - Windows 8 下 Metro 风格应用程序的 Fraps 类功能

> ID：10529085
> 
> 赞同：2
> 
> 时间：2012-05-10T07:13:14.713
> 
> 标签：c++, windows-8, windows-runtime, frame-rate, dll-injection

Fraps 等工具适用于基于 OpenGL 或 DirectX 的游戏，但不适用于简单的 Windows 8 Metro 风格游戏，如“Cut The Rope”或“Pirates Loves Daisies”。是的，我知道“Cut The Rope”和“Pirates Loves Daisies”正在使用不同的技术，如 JavaScript 和 HTML5 canvas，但我真的很好奇是否有可能为此类游戏构建类似 Fraps 的工具（某种 canvas hack？）。我想做两件事：
1.测量fps。
2\. 截取屏幕截图。

我正在阅读有关整个[Fraps 概念](http://www.ring3circus.com/gameprogramming/case-study-fraps/)的文章并[拦截对 DirectX 的调用，](http://www.codeguru.com/cpp/g-m/directx/directx8/article.php/c11453/Intercept-Calls-to-DirectX-with-a-Proxy-DLL.htm "拦截对 DirectX 的调用")但我不确定它是否适用于 Metro 应用程序。也许我只是在浪费时间。我有 2 个问题要问你们：
1\. 你认为是否有可能构建类似 Fraps 的工具，用于不使用 DirectX 或 OpenGL 的 Metro 风格应用程序或游戏？
2\. 弄乱 dxgi.dll（或其他 dll）会有所帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:45:37.217

Fraps 能够显示帧率是因为它与 DirectX 挂钩。HTML 应用程序不提供对相同信息的访问。

我已经确认免费程序 ScreenPresso (http://www.screenpresso.com/) 可以很好地录制 Cut The Rope。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T19:39:39.083

试试英特尔 GPA（图形性能分析器）

[http://software.intel.com/en-us/vcsource/tools/intel-gpa](http://software.intel.com/en-us/vcsource/tools/intel-gpa)

安装它，然后运行该应用程序。

图表和我不完全理解的东西有无数种选择（也许它对你有用）。如果您想要fps，只需关闭窗口即可；该程序将继续在后台运行。

电池信息和音量控制旁边的右下角应该有一个图标。如果您将鼠标悬停在它上面，它会显示您的 IP 地址。右键单击 GPA 的图标，然后选择顶部的“分析应用程序”。

将弹出一个窗口，其中包含机器上的所有磁贴应用程序。单击应用程序（不要双击），然后单击右下角的“运行”。

帧率和分辨率将显示在左上角。

经过测试，它适用于 Cut the Rope（我得到 58-60 fps）。希望这可以帮助。

# java - jtype（JNI）和C/C++类型有什么区别？

> ID：10529087
> 
> 赞同：3
> 
> 时间：2012-05-10T07:13:28.590
> 
> 标签：java, c++, c, java-native-interface, native

在 JNI 中有 jtypes。喜欢`jint`for`int`和`jboolean`for `boolean`。我知道后一种类型是 c/c++ types 。但是类型是`jtype`? 在书中，他们提到这种类型也是*本地*类型。那是什么意思？

***编辑：***

jtype 有什么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:37:46.787

从[`jni.h`](http://xdprof.sourceforge.net/doxygen/jni_8h.html),

```
typedef unsigned char   jboolean
typedef unsigned short  jchar
typedef short   jshort
typedef float   jfloat
typedef double  jdouble
typedef long    jint
typedef jint    jsize 
```

本机类型并不意味着 Java 语言的本机类型，它们是指本机 C 或本机机器等价物。这些`j`版本有助于将 [Java 类型映射到本机 C 类型](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html)。***这种映射的好处是，熟悉基本 Java 类型的 Java 程序员可以继续使用与刚刚添加的`j`. 他不必理会它们是如何映射到机器的基本类型中的。它将由 typedefs 处理。此外，如果底层机器架构发生变化，您仍然无需费心，只需更改 typedef 即可***

在评论中解决您的疑虑`_jstring`是一门课。并且`jstring`是指向此类的指针

```
class _jstring : public _jobject {};
typedef _jstring *jstring; 
```

就像我们有`String`C++ 中的类一样

# mysql - 未创建 MySQL 存储过程

> ID：10529090
> 
> 赞同：2
> 
> 时间：2012-05-10T07:13:40.090
> 
> 标签：mysql

所以我有这个存储的过程，当我运行文件时不会创建它。

```
DELIMITER //

DROP PROCEDURE IF EXISTS msd.test_proc//
CREATE PROCEDURE msd.test_proc()
    BEGIN

        SELECT 
            'Hello proc'
        FROM 
            msd.zipcode_lookup;

    END//
DELIMITER ; 
```

当我运行它时，当我在 RazorSQL 中执行时，我在第 1 行收到错误代码 1064。这是完整的错误消息：

```
ERROR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version 
for the right syntax to use near '//
CREATE PROCEDURE msd.test_proc()
BEGIN

    SELECT

        'Hello proc'
    FROM ' at line 1
Error Code:1064 
```

我尝试了其他变体，但仍然出现错误。我确信这是我所缺少的基本内容。我很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:03:59.847

如[RazorSQL 网站](http://www.razorsql.com/docs/support_mysql_delimiter.html)所述：

> DELIMITER 语句不是 MySQL 语言的一部分。它是某些 MySQL 工具支持的命令。该命令告诉那些 MySQL 程序扫描指示查询或语句结束的特定字符。
> 
> RazorSQL 不支持使用 DELIMITER 命令。可以使用首选项窗口更改 RazorSQL 使用的 SQL 语句分隔符值。默认值为分号。

# php - stderr 和 stdout 在单独的文件中

> ID：10529093
> 
> 赞同：0
> 
> 时间：2012-05-10T07:14:04.137
> 
> 标签：php, exec

我正在使用[这篇文章的](https://stackoverflow.com/a/45966/987104)答案，但我想为 stderr 获取一个文件，为 stdout 获取一个文件。

这是我目前拥有的：

`exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $cmd, $outputfile, $pidfile));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:19:15.613

请提出一个适当的问题，因为我真的不知道你的意思。我将假设您想要分离输出和错误文件？

如果您想要 stdout 和 stderr 的单独文件，则需要删除重定向`2>&1`（将 stderr 重定向到 stdout）。

```
exec(sprintf("%s > %s 2>%s & echo $! >> %s", $cmd, $outputfile, $errorfile, $pidfile)); 
```

# c - C中的NULL比较错误

> ID：10529097
> 
> 赞同：2
> 
> 时间：2012-05-10T07:14:41.750
> 
> 标签：c

你能告诉我我在这里犯了什么错误吗？当我设置`url = NULL`然后比较它是否具有 NULL 是否由`if(strlen(url)!=0)`程序`if(url!=NULL)`崩溃或崩溃。我知道这是一件非常简单的事情，但我做错了什么。

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

void main()
{
    char* url="/v1.0/fafffsdf"  ;
    url=NULL;
    printf("%s\n",url);
    if(url!=0)
    {
        printf("It ain't NULL\n");
    }
    else
    {
        printf("It's NULL\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T07:16:24.143

崩溃发生在

```
printf("%s\n",url); 
```

指针指向`NULL`并且您正试图从那里读取，有效地取消引用`NULL`将产生[分段错误](http://ideone.com/lcQbW)的指针。

指向一个空字符串，如

```
char *url = ""; 
```

可以，并且与指向 NULL 位置（如

```
char *url =NULL; 
```

如果取消引用，这是危险的。

空字符串在内存中具有有效位置，可以取消引用。只是它没有任何东西期望一个`\0`.

# html - CSS 的工作方式

> ID：10529099
> 
> 赞同：0
> 
> 时间：2012-05-10T07:15:12.947
> 
> 标签：html, css

我想知道，如果有人能告诉我。建议我在我的网站上有一个 CSS，我想在每个页面的页面顶部使用相同的属性（类）。我将在其余页面中使用不同的类。例如，假设我有 Page1、Page2、Page3。他们都为“欢迎来到我的网站”标签使用相同的 CSS 类，但除了该标签之外，每个页面都显示不同的数据并使用不同的类。所以每次我从第 1 页移动到第 3 页时，我都会一直调用相同的 CSS。

我的问题是，什么是最好的，既有效又纯粹：

1.在每一页再次调用同一个类。

2.设置页面头部的样式，这样我们就不会每次都调用CSS了。

3\. 其余页面使用 iframe。

4.另一种我没有提到的方法。

--编辑后--

最好的，大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:20:01.680

我不确定你想要什么，但如果你想在你的页面中使用一些通用的 CSS，那么 CSS 链接就派上用场了：

```
<link rel="stylesheet" type="text/css" href="myStyles.css"/> 
```

您可以在一个页面中拥有任意数量的这些（它们必须进入`<head>`），因此您可以将您的 CSS 拆分为任意数量的文件。此外，这允许您的查看者缓存 CSS 文件，因此他们不必每次都下载它。

例子：

**超级标签.css**

```
.superLabel
{
    color: red;
    font-weight: bold;
    margin: 50px;
} 
```

**Page1.html**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page 1</title>
        <link rel="stylesheet" type="text/css" href="SuperLabel.css"/>
        <link rel="stylesheet" type="text/css" href="page1.css"/>
    </head>
    <body>
        <div class="superLabel">I'm FABULOUS!</div>
        ... the rest of content ...
    </body>
</html> 
```

**Page2.html**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page 1</title>
        <link rel="stylesheet" type="text/css" href="SuperLabel.css"/>
        <link rel="stylesheet" type="text/css" href="page2.css"/>
    </head>
    <body>
        <div class="superLabel">I'm fabulous AGAIN!</div>
        ... the rest of content ...
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:23:55.607

我不完全确定我是否理解你的问题 - 但你的意思是将标题 CSS 与正文的其余部分分开以改善加载时间吗？如果那是你的问题，我认为没有必要。它并没有那么重，用户浏览器通常会缓存它，然后检查它是否自您上次访问以来被修改过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:46:14.380

您不需要使用 iframe。身体标签也可以有类。

如果我给出 Page1 类的主体 'style1' 并给出 Page2 类的主体 'style2'

```
<span class="welcome">Welcome to my site</span> 
```

而CSS是

```
.style1 .welcome { color:red; }
.style2 .welcome { color:blue; } 
```

,

Page1 的“欢迎信息”文本颜色为红色，Page2 的“欢迎信息”文本颜色为蓝色。

这将是您想要的；

# jquery - Tubeplayer在播放前获取videoUrl

> ID：10529100
> 
> 赞同：0
> 
> 时间：2012-05-10T07:15:14.943
> 
> 标签：jquery

我在情绪板上有多个 Tubeplayer 实例（[http://www.tikku.com/jquery-youtube-tubeplayer-plugin](http://www.tikku.com/jquery-youtube-tubeplayer-plugin)）。

```
players = $.tubeplayer.getPlayers(); 
```

给我播放器实例，从每个实例中我可以像这样检索 videoUrl：

```
for(var p in players) {
    players[p].getVideoUrl();
} 
```

问题是这个 videoUrl 仅在点击 youtube 视频上的播放按钮后设置，所以如果有人没有点击播放按钮，我会留下一个未定义的 videoUrl。我已经设置了 autostart: true ，这可以正常工作，但并不理想，因为您必须手动暂停所有播放器。

任何人都知道如何在不播放视频的情况下获取 videoId / videoUrl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:39:50.510

在 videoID 属性中找到了解决方案：

```
$(playerId).tubeplayer('data').videoID 
```

# java - android日历月从0开始

> ID：10529102
> 
> 赞同：6
> 
> 时间：2012-05-10T07:15:17.423
> 
> 标签：java, calendar

> **可能重复：**
> [为什么 Java 日历中的 1 月是 0 月？](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)

android中的日历似乎是从0开始的。为什么要这样设计？

```
final Calendar c = Calendar.getInstance();
mMonth = c.get(Calendar.MONTH); 
```

今天，mMonth 是 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:41:40.353

这不是由 Android 开发人员完成的。这就是它在`java.util.Calendar`. 如果你想知道为什么 Java 开发人员会这样设计它，请通过这个线程。 [为什么 Java 日历中的 1 月是 0 月？](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)

# jquery - 支持照片选择的jQuery画廊

> ID：10529107
> 
> 赞同：0
> 
> 时间：2012-05-10T07:15:38.270
> 
> 标签：jquery

我需要一个简单的 jQuery 照片库（只是一个图像表），它支持通过鼠标单击选择照片（例如通过边框颜色/宽度更改）。有没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:31:19.913

那会很容易建立，你为什么需要一个画廊？这是如何“可以”完成的一个相当基本的示例（也在[JsFiddle](http://jsfiddle.net/WNQLN/1/)中显示）

HTML

```
<table id="gallery">
  <tr></tr>
</table> 
```

jQuery

```
$(function(){
  var imgs = array('img1.png', 'img2.png', 'img3.png', 'img4.png', 'img5.png', 'img6.png')
    , img_per_col = 3
    , img_cnt = 0
    , html = '<tr>';

  $.each(imgs, function(img){
    html += '<td><img src="' + img + '" /></td>';
    img_cnt++;
    if(img_cnt == img_per_col) {
      html += '</tr><tr>';
      img_per_col = 0;
    }
  });
  html += '</tr>';
  $('table#gallery').html(html);
}); 
```

# iphone - 代码行之间的数据未执行

> ID：10529110
> 
> 赞同：0
> 
> 时间：2012-05-10T07:15:46.533
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在我的应用程序的某个时刻，我列出了需要应用程序从服务器获取数据的代码列表，我知道这个过程可能需要相当长的时间，我决定在屏幕变暗的地方放置一个加载通知，并在它的中心说“现在从服务器加载 blablabla 数据”

问题是，在从服务器加载多个数据（JSON 数据）之间，即使我在 JSON 函数之间放置代码来更改它，标签也不会改变

这是我的代码

```
[self.viewReportProduksi getDataReport];
                           [loadinglabel setText:@"Loading Chart Data from server . . ."];
                           [self.viewReportProduksi getChartData];
                           [loadinglabel setText:@"Loading Data Komisi from server . . ."];
                           [self.viewKomisi getDataKomisi];
                           [loadinglabel setText:@"Loading Bonus Data from server . . ."];
                           [self.viewBonus getDataBonus];
                           [loadinglabel setText:@"Loading Bonus Agen Data from server . . ."];
                           [self.viewBonusAgen getDataBonusAgen];
                           [loadinglabel setText:@"Loading Agent Reward Data from server . . ."];
                           [self.viewAgenReward getDataRewardAgen]; 
```

那些“getXXXXXX”是执行 JSON 的方法。

从逻辑上讲，这应该使应用程序显示进度走了多远。但标签一直停留在“从服务器加载图表数据”，并且不会根据我的代码进行相应更改。

我在主线程和使用dispatch_queue都试过这个，两者都没有区别

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:19:34.760

这是因为您在主线程上加载数据，并且由于主线程非常繁忙，它永远不会更新显示。

您需要将数据加载移动到另一个线程，例如，向主线程发送带有更新信息的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:03:30.363

问题是所有图形更新都发生在主线程上。因此，在整个代码块完成之前，显示屏上不会发生任何变化。我认为这是您需要在后台进行所有数据加载的情况。为了获得最大的灵活性，我会使用大量的[NSBlockOperations](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSBlockOperation_class/Reference/Reference.html)。

首先，您需要一个在主线程上运行的方法来更新您的状态文本。

```
-(void) updateStatusWithString: (NSString*) message
{
    [loadingLabel setText: message];
    // might want to do other stuff e.g. if you have fully loaded the data
} 
```

然后，代替您的方法顺序加载所有数据，为每个阶段创建一个 NSBlockOperation 并将其放入操作队列中。

```
-(void) loadData
{
    NSBlockOperation* block1 = [NSBlockOperation blockOperationWithBlocK: ^()
    {
        [self performSelectorOnMainThread: @selector(updateStatusWithString:)
                               withObject: @"Loading chart data from server"
                            waitUntilDone: NO];
        [self.viewReportProduksi getChartData];
    }];
    NSOperationQueu* queue = [[NSOperationQueue alloc] init];
    [queue addOperation: block1];

    NSBlockOperation* block2 = [NSBlockOperation blockOperationWithBlocK: ^()
    {
        [self performSelectorOnMainThread: @selector(updateStatusWithString:)
                               withObject: @"Loading Data Komisi from server"
                            waitUntilDone: NO];
        [self.viewKomisi getDataKomisi];
    }];
    [block2 addDependency: block1];
    [queue addOperation: block2];

    // etc for all the other blocks
} 
```

因为每个操作都依赖于前一个操作，所以它们会一个接一个地执行，但是在某个后台线程上。使用操作和操作队列比 GCD 更有优势，因为

*   您可以使用以下方法轻松建模操作之间的依赖关系`-addDependency:`
*   操作有一个内置的取消机制。如果用户决定中途退出应用程序，您可以发出

    ```
    [queue cancelAllOperations]; 
    ```

    队列上所有尚未开始的操作都将被取消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:19:50.430

我认为你应该这样做：

```
 - (void)firstPart {
    //This is main thread
    [loadinglabel setText:@"Loading Chart Data from server . . ."];
    [NSThread detachNewThreadSelector:@selector(getChartData) toTarget:self.viewReportProduksi withObject:nil];
}

 - (void)getChartData {
    //this is an extra thread
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    //Your loading code
    [self performSelectorOnMainThread:@selector(secondPart) withObject:self waitUntilDone:NO];
    [pool drain];
 }
 - (void)secondPart {
        [loadinglabel setText:@"Loading Data Komisi from server . . ."];
        [NSThread detachNewThreadSelector:@selector(getDataKomisi) toTarget:self.viewKomisi withObject:nil];
} 
```

等等...

# c# - 如何在 Team Foundation Build 11 Beta 上构建便携式库？

> ID：10529111
> 
> 赞同：0
> 
> 时间：2012-05-10T07:15:47.157
> 
> 标签：c#, .net, tfs, msbuild, visual-studio-2012

我们最近开始在 Windows Server 2008 R2 系统上使用 Team Foundation Build Server 11 Beta 和构建代理，而无需在该系统上安装 Visual Studio。一切正常。

在我们的解决方案中包含新的 Visual Studio 11 Beta 便携式库时，问题就出现了。MSBuild 无法在构建代理系统上找到包含的 C:\Program Files (x86)\MSBuild\Microsoft\Portable\v4.0\Microsoft.Portable.CSharp.targets。

我们从第二个系统复制了丢失的文件，但现在我们得到一个构建错误“.NETPortable,Version=v4.0,Profile=Profile47”未找到。

如何在 Team Foundation Build 11 上构建便携式库？

最好的问候， 比约恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:35:30.610

[http://msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)

> 要在生成计算机上安装便携式类库工具而不安装 Visual Studio 2010，请将下载文件 (PortableLibraryTools.exe) 保存在您的计算机上，然后从命令提示符窗口运行安装程序。在命令行中包含 /buildmachine 开关。

# c++ - 在应用程序启动时松开 DLL 依赖项

> ID：10529114
> 
> 赞同：1
> 
> 时间：2012-05-10T07:15:51.573
> 
> 标签：c++, dll, dependencies

在我的 Windows C++ 程序中，我对 DLL 有一些依赖（附带输入设备的驱动程序）。我自己实际上并没有加载 DLL，但驱动程序提供了我静态链接的（小）.lib 库（我假设是那些确保 DLL 存在于系统中并加载它们的库）。我正在编写一个可以从一系列摄像机中获取输入的应用程序。在运行时，用户选择使用哪一个。目前我的问题是，我查询是否连接了摄像头的例程已经需要系统上存在摄像头的功能。即假设有相机型号 A 和 B，用户必须安装 A 和 B 的驱动程序，即使他知道他只是拥有型号 B。用户必须这样做，否则我的程序将不会

我想知道在运行时是否有可能确定哪些 DLL 存在，对于那些不存在的，以某种方式禁用加载，甚至静态（因此，动态）组件。

所以基本上我的问题是你不能做`if(DLL was found){ #include "source that includes header using functions defined in lib which loads DLL"}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:23:59.787

我认为使用[DELAYLOAD](http://msdn.microsoft.com/en-us/library/yx9zd12s.aspx)链接器标志可以提供所需的功能。它将允许与`.lib`文件链接，但仅在使用 DLL 时才尝试加载：

> link.exe ... /DELAYLOAD:cameraA.dll /DELAYLOAD:cameraB.dll Delayimp.lib

代码的结构类似于：

```
if (/* user selected A */)
{
    // Use camera A functions, resulting in load of cameraA's DLL.
}
else
{
    // Use camera B functions, resulting in load of cameraB's DLL.
} 
```

来自[延迟加载 DLL 的链接器支持](http://msdn.microsoft.com/en-us/library/151kt790.aspx) ：

```
从 Visual C++ 6.0 开始，当与 DLL 进行静态链接时，
链接器提供延迟加载 DLL 直到程序调用的选项
该DLL中的一个函数。

应用程序可以使用 /DELAYLOAD（延迟加载导入）延迟加载 DLL
带有辅助函数的链接器选项（默认实现由
视觉 C++）。帮助函数将通过调用在运行时加载 DLL
LoadLibrary 和 GetProcAddress 为您服务。

如果出现以下情况，您应该考虑延迟加载 DLL：

- 您的程序可能不会调用 DLL 中的函数。
- DLL 中的函数可能要到程序的后期才会被调用
 执行。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:19:18.997

您需要在运行时加载库。看一看[`LoadLibary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)。

~~这是一篇关于此的 MSDN 文章：[DLLs the Dynamic Way](http://msdn.microsoft.com/en-us/library/ms810279.aspx)~~我刚刚浏览了这个。它很老了。

这一篇展示了LoadLibrary的用法：[Using Run-Time Dynamic Linking](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944%28v=vs.85%29.aspx)

# java - JPA：有条件地获取一些子对象

> ID：10529115
> 
> 赞同：3
> 
> 时间：2012-05-10T07:16:01.667
> 
> 标签：java, hibernate, jpa, jpql

我正在尝试为*Parent对象创建一个**NamedQuery* ，该对象从数据库中检索所有可用的*Parent*对象，并有条件地在同一查询中获取一些*Child对象。*例如，查询应该检索所有父对象并为每个父对象获取*year=2012*的子对象。不应获取其余的子对象。我试图用*LEFT JOIN FETCH*玩 arround ，但结果是一些父对象也被排除在外。但话又说回来，我对*FETCH*语句很陌生。

 ***有什么办法可以完成上述任务？任何帮助深表感谢。*我的Parent*对象的相关代码如下：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = "xxx/xxx/xxx/xxx", name = "Parent")
@XmlRootElement(namespace = "xxx/xxx/xxx/xxx")
public class Parent implements Serializable {
private static final long serialVersionUID = 1L;

/**
 */
.....................
/**
 */

@Column(name = "status")
@Basic(fetch = FetchType.EAGER)
@XmlElement
String status;
/**
 */
/**
 */
@OneToMany(mappedBy = "parent", cascade = { CascadeType.REMOVE }, fetch = FetchType.LAZY)
@XmlElement(name = "", namespace = "")
java.util.Set<xxx.xxx.xxx.Child> children; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:49:06.603

您应该能够使用 @Where 注释来实现您想要的 - 您应该能够将如下注释添加到您的 children 属性中

```
@Where(clause="year=2012") 
```

另外，请参阅此问题：[如何在 Entity-Bean @OneToMany 关系上应用默认限制](https://stackoverflow.com/questions/3514672/how-to-apply-a-default-restriction-on-entity-bean-onetomany-relationships)***

# visual-studio - 卸载 Visual Studio 2010

> ID：10529116
> 
> 赞同：11
> 
> 时间：2012-05-10T07:16:07.043
> 
> 标签：visual-studio, visual-studio-2010, uninstallation

我想卸载 Visual Studio 2010，因为安装已损坏，但无法这样做。当我尝试使用控制面板卸载时，它一开始就卡住了（我在网上发现我不是唯一的）。所以我尝试使用[Visual Studio 2010 Uninstall Utility](http://archive.msdn.microsoft.com/vs2010uninstall/WorkItem/View.aspx?WorkItemId=1)，但它也卡住了！！

我完全没有想法，我很着急，你能帮忙吗？

提前致谢。

埃里克

![在此处输入图像描述](../Images/1926a6d1d63fed01f09f071901b2f4d9.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T07:21:12.940

Microsoft 提供的 Visual Studio 2010 卸载实用程序，可从此处下载：

[下载链接](http://aka.ms/vs2010uninstall)

这个方便的小工具不仅运行成功，而且完全删除和卸载了 Visual Studio 2010 及其所有已安装的模块。

Visual Studio 2010 卸载实用程序可以在 3 种不同的模式下运行：

默认（VS2010_Uninstall-RTM.ENU.exe）

卸载 2010 版本的所有顶级产品及其支持组件。此模式不会删除与以前的产品版本（例如 Visual Studio 2008）或系统级更新（例如 Microsoft .NET Framework 4.0）共享的 Visual Studio 组件。

完整（VS2010_Uninstall-RTM.ENU.exe /完整）

删除 Visual Studio 2010 和支持产品，包括与以前版本的 Visual Studio 共享的组件。注意：可能会破坏机器上安装的以前版本的 Visual Studio 的功能。此选项不会从计算机中删除 Microsoft .NET Framework 4.0。

完成（VS2010_Uninstall-RTM.ENU.exe /full /netfx）

删除整套 Visual Studio 2010 和支持产品，包括 Microsoft .NET Framework 4.0 和与以前版本的 Visual Studio 共享的组件。注意：可能会破坏以前版本的 Visual Studio 或其他依赖 Microsoft .NET Framework 4.0 的产品的功能。

[更多信息可以在这里找到：](http://blogs.msdn.com/b/heaths/archive/2010/08/23/visual-studio-2010-uninstall-utility.aspx?PageIndex=2)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T07:21:31.380

我曾经遇到过这样的问题并且在能够卸载它之前挣扎了很多。为此，我编写了以下 PowerShell 脚本：

```
# Be careful with that axe, Eugene.

Get-ChildItem HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall | 
select @{Name='Guid';Expression={$_.PSChildName}}, @{Name='Disp';Expression={($_.GetValue("DisplayName"))}} | 
where-object {$_.Disp -ilike "*Studio*"} | 
where-object {$_.Guid -like '{*'} | 
% {"rem " + $_.Disp; '$Env:WinDir\system32\msiexec.exe /x "' + $_.Guid + '" /passive'; ''} > uninstallVS.bat 
```

这会生成一个 .bat 文件，您可以运行该文件来卸载该事物。

**不用说这是绝对的最后手段/绝望的措施。如果您的生命没有受到威胁，请不要使用它。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:24:15.513

我今天遇到这个问题，发现删除工具并没有删除SP1，您应该通过控制面板中的添加/删除程序删除SP1，然后使用该工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T00:53:57.190

如果您的控制面板/卸载程序中允许，您可以尝试此操作。

单击要删除的 Visual Studio 版本。在已安装程序的顶部，您将组织和更改链接。单击更改。这将引导您卸载所选的 Visual Studio。另一种选择是运行

```
wmic product where "name like 'microsoft visual studio%'" call uninstall /nointeractive 
```

在您的命令提示符中。确保以管理员身份运行命令提示符。对此您应该非常小心。

# php - 带有“分组依据”的 SQL Server 语句

> ID：10529120
> 
> 赞同：0
> 
> 时间：2012-05-10T07:16:34.403
> 
> 标签：php, sql-server

我正在编写一个 SQL Server 语句来从 2 个表中提取一些数据，如下所示：-

```
$resume_full_name = "select * from [user] 

        left join [department]
        on [user].[departid] = [department].[departid]
        where id = '$value'                     
        order by [department].[departid] DESC"; 
```

它工作正常。但是，当我尝试添加时`GROUP BY [department].[departid]`，无论我放置这个阶段，它都会出错。

> 警告：mssql_query() [function.mssql-query]：消息：关键字“GROUP”附近的语法不正确。（严重性 15）在 D:\project\true2\admin\page\ur\list.php 第 86 行警告：mssql_query() [function.mssql-query]：查询在 D:\project\true2\admin\page 中失败第 86 行的 \ur\list.php 警告：mssql_fetch_array(): 提供的参数不是第 88 行 D:\project\true2\admin\page\ur\list.php 中的有效 MS SQL 结果资源

实际上，mssql 支持`Group By`吗？如果没有，我们如何将事物组合在一起？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:20:41.337

是的，它确实支持`GROUP BY`，但您不能`SELECT *`在顶部，您必须将*聚合函数*（例如`SUM`或`AVG`）应用于将显示分组行聚合的其他字段。

# maven - 码头财产守护进程似乎不工作

> ID：10529126
> 
> 赞同：0
> 
> 时间：2012-05-10T07:16:48.157
> 
> 标签：maven, jetty, daemon, maven-jetty-plugin

我已经在另一个线程中将其作为次要问题提出，但这是唯一剩下的问题。
所以，我使用 Maven2 进行持续集成，这就是它的工作方式：

```
1\. Unit test the server side   
2\. Build the application  
3\. Build the war  
4\. Start a Jetty container => Blocks everything  
5\. Start a Selenium server   
6\. Unit test the client side   
7\. Close the Selenium server   
8\. Close the Jetty container 
```

除了 Jetty 不是作为守护进程启动的那一点之外，一切都运行良好*（jetty 的数据源、插件依赖项中的 postgresql、加载的 selenium 用户扩展......谢谢你们为我提供的所有帮助！）*。

这是我的码头插件的配置：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.9</version>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <daemon>true</daemon>
                        <contextPath>agepro-prototype</contextPath>
                        <webApp>${project.build.directory}/agepro-prototype.war</webApp>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>9091</port> 
                    </connector>
                </connectors>
                <stopPort>9092</stopPort>
                <stopKey>test</stopKey>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>postgresql</groupId>
                    <artifactId>postgresql</artifactId>
                    <version>9.1-901.jdbc4</version>
                </dependency>
            </dependencies>
        </plugin> 
```

有谁知道我在这里做错了什么？
Jetty 容器启动，但它会阻止所有内容，直到我将其杀死 (ctrl+c) 并且生命周期的其余部分无法执行。

*再一次，对那个转贴感到抱歉（我接受了在我上一个帖子上帮助我很多的人的回答，因为他应得的，但没有人来回答了哈哈），并为我的语法问题感到抱歉 xD*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:58:59.923

好的，那我就这么回答。

“我建议在 7.6.x 版本中的某处使用 jetty-maven-plugin，7.6.3.v20120416 是最新的，您使用的插件是什么......我认为超过 4-5 年？”

因此，在将您的 jetty 依赖项更新到较新版本的 jetty 7（对于 servlet 2.5 支持，jetty 8 是 servlet 3.0 支持）之后，您还应该使用最新的 org.mortbay.jetty:jetty-maven-plugin:7.6.3.v20120416 运行时你从 maven cli 启动码头。maven-jetty-plugin 几年前就消失了，因为当时 maven-*-plugin 格式是 maven 项目本身开发的插件的理想约定。多年来，这种惯例似乎已经消失了，所以我很遗憾事后改变了这个名字。

# solr - Solr 索引时间提升 VS 查询时间提升？

> ID：10529127
> 
> 赞同：5
> 
> 时间：2012-05-10T07:16:50.777
> 
> 标签：solr, indexing

问题 1：我们可以只做查询时间提升（使用 dismax）而不在索引时间提及提升值吗？

问题 2：与查询时间提升相比，索引时间提升有哪些优点/缺点，反之亦然。

查询时间和索引时间提升：

在索引时，您可以选择提升特定文档（整个或只是一个字段）。这在内部存储为规范编号的一部分，必须启用它才能正常工作。执行索引时间提升并不常见。在查询时，我们之前已经描述了如何根据需要提高或降低查询的特定子句。稍后将演示强大的 Disjunction-Max（简称 dismax）查询，它可以自动将搜索应用于具有不同提升级别的多个字段。

--《Solr 1.4 Enterprise Search Server》一书第 4 章的段落

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:16:17.017

**问题 1**

是的，一点没错。

**问题2**

索引时间提升可能会快一点，但您需要知道提升是在单个字节上编码的，这会导致精度损失：[在 Lucene 中，为什么提升和未提升的文档得到相同的分数？](https://stackoverflow.com/questions/7899031/in-lucene-why-do-my-boosted-and-unboosted-documents-get-the-same-score/8068457#8068457)

查询时间提升更加灵活（它们可以在每个查询的基础上进行配置）。

索引时间提升有点不切实际，我宁愿建议您开始使用查询时间提升。

# iframe - Selenium Webdriver 2.x 和 SharePoint 2010 IFrame

> ID：10529128
> 
> 赞同：0
> 
> 时间：2012-05-10T07:16:53.460
> 
> 标签：iframe, sharepoint-2010, selenium, webdriver

Sharepoint2010 中任何列表上的“添加新项目”链接都会显示一个窗口/框架。我希望能够找到文本字段，写入它们并在窗口/框架中执行其他操作。目前我使用以下方法不成功：

BrowserInstance.SwitchTo().Frame(index) --- 耗尽所有索引。BrowserInstance.SwitchTo().Window() ---

HTML 看起来像：

```
<Div  class=some class>
<Iframe frameborder=0 ..........>
</iframe></div> 
```

Selenium Webdriver (c#) 识别 div (class= some class) 但不是 Iframe，不幸的是它保存了所有字段和按钮。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:50:30.010

我没有使用硒来做到这一点。所以我在 Selenium Test 中使用了 watin 代码。这可能不是一个好主意，但 Watin 似乎可以很好地识别 SharePoint 2010 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:42:37.150

```
IWebDriver.SwitchTo().Frame(1); 
```

为我工作。

您是否在使用此方法后使用 WebDriverWait？您必须等到模态对话框加载：

```
webDriverWait.Until(drv => _driver.SwitchTo().Frame(1));

// Locate 'Name' field.
webElement = webDriverWait.Until(drv => _driver.FindElement(By.XPath("//textarea[@title='Name']"))); 
```

# c# - 在 C# 或 JavaScript 中将 DIV 内容转换为图像

> ID：10529132
> 
> 赞同：4
> 
> 时间：2012-05-10T07:17:19.347
> 
> 标签：c#, javascript, asp.net, html, css

我有一个 DIV 容器，其中包含一些文本、背景图像、图像。我需要将整个 DIV 内容转换为图像并保存到本地文件夹中。请指导我如何使用 JavaScript 或 C# 将 Div 内容转换为 Image。我在 Google 中搜索过，但没有得到正确的结果。请给一些源代码..帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:35:57.107

由于您不想转换整个 HTML 页面而是转换 html 的一部分，请参阅以下链接中 p.campbell 给出的答案以获得完美的解决方案。

[使用 C# 将 HTML 控件（Div 或表格）转换为图像](https://stackoverflow.com/questions/1972739/convert-a-html-control-div-or-table-to-an-image-using-c-sharp)

其他答案可能会提供将整个 html 网页捕获到图像。如果您发现 p.campbell 的答案难以实施，请在网站中创建一个仅包含 Div 内容的 html 页面，并通过给定的其他答案将其捕获到图像中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T14:04:31.227

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)是您正在寻找的。用法：

HTML：

```
<head>
    <title>Example of capturing the div</title>
</head>
<body>
    <div id="pictureMe"><p>Try this out on JSFiddle right now.</p></div>
    <script src="js/html2canvas.js" type="text/css" rel="stylesheet"></script>
    <script type="text/javascript">
            html2canvas(document.getElementByID("pictureMe"), {
            onrendered: function(canvas) {
            /* What you want to do with the screenshot goes here */
            document.body.appendChild(canvas);
            }
        });
    </script>
</body> 
```

[http://jsfiddle.net/fG4fY/](http://jsfiddle.net/fG4fY/)现在可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T12:45:10.900

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdn.rawgit.com/niklasvh/html2canvas/master/dist/html2canvas.min.js"></script>
    <script type="text/javascript">
        function ConvertToCanvas(btnExporttoimage) {
            html2canvas($("#ContentInfo")[0]).then(function (canvas) {
                var base64 = canvas.toDataURL();
                $("[id*=hdnImageData]").val(base64);
                __doPostBack(btnExporttoimage.name, "");
            });
            return false;
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="ContentInfo" runat="server" style="width: 600px; background-color: White;
        padding: 5px; height: 600px;">
        <u>Student Info</u>
        <br />
        <br />
        <table>
            <tr>
                <td>
                    ID
                </td>
                <td>
                    Name
                </td>
                <td>
                    Country
                </td>
                <td class="style1">
                    Roll.
                </td>
            </tr>
            <tr>
                <td>
                    1
                </td>
                <td>
                    Ranjit
                </td>
                <td>
                    India
                </td>
                <td class="style1">
                    2345
                </td>
            </tr>
            <tr>
                <td>
                    2
                </td>
                <td>
                    Soumya
                </td>
                <td>
                    India
                </td>
                <td class="style1">
                    5678
                </td>
            </tr>
            <tr>
                <td>
                    3
                </td>
                <td>
                    Tapan
                </td>
                <td>
                    Srilanka
                </td>
                <td class="style1">
                    7890
                </td>
            </tr>
            <tr>
                <td>
                    4
                </td>
                <td>
                    Suresh
                </td>
                <td>
                    Bhutan
                </td>
                <td class="style1">
                    4345
                </td>
            </tr>
        </table>
    </div>
    <br />
    <asp:HiddenField ID="hdnImageData" runat="server" />
    <asp:Button ID="btnExporttoimage" Text="Export to Image" runat="server" UseSubmitBehavior="false"
        OnClientClick="return ConvertToCanvas(this)" OnClick="btnExporttoimage_Click" />
    </form>
</body>
</html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Drawing.Imaging;

public override void VerifyRenderingInServerForm(Control control)
{
  /* Verifies that the control is rendered */
}

protected void btnExporttoimage_Click(object sender, EventArgs e)
{
    string base64 = Request.Form[hdnImageData.UniqueID].Split(',')[1];
    byte[] IMGbytes = Convert.FromBase64String(base64);

    ///////////-------FOLLOWING CODE IS TO CONVERT IMAGE TO BINARY AND TO DEFAULT DOWNLOAD PATH--------////////////////////  
    //Response.Clear();
    //Response.ContentType = "image/png";
    //Response.AddHeader("Content-Disposition","canvas.png"));
    //Response.Buffer = true;
    //Response.Cache.SetCacheability(HttpCacheability.NoCache);
    //Response.BinaryWrite(IMGbytes);
    //Response.End();

    ///////////-------FOLLOWING CODE IS TO CONVERT IMAGE TO BINARY AND TO DESIRE DOWNLOAD PATH--------////////////////////  
    MemoryStream msImage = new MemoryStream(IMGbytes, 0, IMGbytes.Length);
    msImage.Write(IMGbytes, 0, IMGbytes.Length);
    System.Drawing.Image imageTosave = System.Drawing.Image.FromStream(msImage, true);
    string filePath = Path.Combine(Server.MapPath("~/CanvasImages/"), "canvas.png");
    imageTosave.Save(filePath, ImageFormat.Png);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-01T11:43:36.213

```
<head runat="server">
    <script type="text/javascript" src="html2canvas.min.js"></script>
    <style type="text/css">
        .labans {
            /*  color:#990000;*/
            color: #336600;
            font-family: Verdana;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .labans1 {
            /*  color:#990000;*/
            color: #000000;
            font-family: Verdana;
            font-size: 12px;
            font-weight: 600;
        }

        .divsection {
            border: 1px solid #DDD;
            padding: 8px 15px;
            spacing: 2px;
            border-radius: 8px;
            box-shadow: #EEEEEE 0.4em 0.0em 0.2em;
            background-image: url(../Images/Front.jpg);
            height: 15cm;
            width: 9.5cm;
            background-size: 358px;
            background-position: center top;
            background-repeat: no-repeat;
            object-fit: fill;
        }
    </style>
    <title></title>
    <!--ForExport data in iamge -->
    <script type="text/javascript">
        function ConvertToImage(btnExport) {
            html2canvas($("#dvContent")[0]).then(function (canvas) {
                var base64 = canvas.toDataURL();
                $("[id*=hfImageData]").val(base64);
                __doPostBack(btnExport.name, "");
            });
            return false;
        }
    </script>
    <!--ForExport data in iamge -->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script src="../data/assets/js/html2canvas.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">

        <div class="row" id="divhiddenInfo" runat="server" style="display: none">
            <div class="col-lg-2">
                <asp:HiddenField ID="lblCode" runat="server" />

            </div>
        </div>
        <asp:Button ID="btnDownload" Text="Download Front" runat="server" UseSubmitBehavior="false"
            OnClick="DownloadImage" OnClientClick="return ConvertToImage(this)" />

        <div id="dvContent" class="divsection">
            <asp:HiddenField ID="hfImageData" runat="server" />
            <table width="100%">
                <tr>

                    <td valign="Right">
                        <table width="88%">

                            <tr>
                                <td class="style43">
                                    <br />
                                    <asp:Image ID="Image1" runat="server" Height="155px" Width="129px" ImageAlign="Right" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="lblDegs" runat="server" CssClass="labans"></asp:Label>

                                </td>
                            </tr>
                            <tr>
                                <td>

                                    <asp:Label ID="lblCity" runat="server" CssClass="labans"></asp:Label>

                                </td>
                            </tr>
                            <tr>
                                <td>

                                    <asp:Label ID="lbllocation" runat="server" CssClass="labans"></asp:Label>

                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

            </table>

        </div>

    </form>
</body>

using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

protected void DownloadImage(object sender, EventArgs e)
    {
        string base64 = Request.Form[hfImageData.UniqueID].Split(',')[1];
        byte[] bytes = Convert.FromBase64String(base64);
        Response.Clear();
        Response.ContentType = "image/jpeg";
        Response.AddHeader("Content-Disposition", "attachment; filename=Front.jpeg");
        Response.Buffer = true;
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.BinaryWrite(bytes);
        Response.End();
    } 
```

# html - 如何从我的 HTML 页面中消除闪烁？

> ID：10529134
> 
> 赞同：0
> 
> 时间：2012-05-10T07:17:24.543
> 
> 标签：html, css, twitter-bootstrap

我这里有一个模型

[http://dummytest.herokuapp.com/](http://dummytest.herokuapp.com/)

目前，普通的普通 HTML 首先显示，然后闪烁，并使用 CSS 呈现。如何让我的页面将 CSS 样式显示为完全绕过无样式文本的第一件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:20:39.110

您的文档[格式不正确（wiki）](http://en.wikipedia.org/wiki/Well-formed_element)，这导致了这种行为。

一般网页去：

```
<html>
 <head>
  <!-- meta tags go here along with title, 
      script links, and css style references -->
 </head>
 <body>
  <!-- elements for rendering go here -->
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:39:13.290

您想更正您的 HTML 以符合[HTML 标准](http://validator.w3.org/)：

```
<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="utf-8"> 
    <title>Test Harness</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content=""> 
    <meta name="author" content=""> 
    <!--<Le>HTML5 shim, for IE6-8 support of HTML elements</Le>--><!--[if lt IE 9]> 
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!--<Le>styles</Le>--> 
    <link href="/stylesheets/bootstrap.css" rel="stylesheet"> 
    <link href="/stylesheets/datepicker.css" rel="stylesheet"> 
    <link href="/stylesheets/style.css" rel="stylesheet"> 
    <style>body { 
        padding-top: 30px; /* 60px to make the container go all the way to the bottom of the topbar */ 
    } 
    </style> 
    <script src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js"></script> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script> 
    <script src="/javascripts/slimScroll.min.js"></script>    
    <script src="/javascripts/housefix.js"></script>  
    <script src="/javascripts/bootstrap-transition.js"></script> 
    <script src="/javascripts/bootstrap-alert.js"></script> 
    <script src="/javascripts/bootstrap-datepicker.js"></script>     
    <script src="/javascripts/bootstrap-modal.js"></script> 
    <script src="/javascripts/bootstrap-dropdown.js"></script> 
    <script src="/javascripts/bootstrap-scrollspy.js"></script> 
    <script src="/javascripts/bootstrap-tab.js"></script> 
    <script src="/javascripts/bootstrap-tooltip.js"></script> 
    <script src="/javascripts/bootstrap-popover.js"></script> 
    <script src="/javascripts/bootstrap-button.js"></script> 
    <script src="/javascripts/bootstrap-collapse.js"></script> 
    <script src="/javascripts/bootstrap-carousel.js"></script> 
    <script src="/javascripts/bootstrap-typeahead.js"></script> 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
</head>  
<body> 
    <p> 
        <a href="/">Home</a> |  
        <a href="/login">Log In</a> 
    </p> 
    <h2>Welcome! Please log in.</h2> 
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:28:11.817

将所有`<head></head>`代码放在一个地方，并将所有`<body></body>`代码放在一个地方。目前您有 2 套`<head>`和`<body>`。取上面的一个（带菜单）并将其与下面的一个（带有欢迎信息）合并。

最好通过[http://validator.w3.org/](http://validator.w3.org/)运行所有网页，以避免将来出现此类问题。

# unicode - 无法使 Ant 使用 unicode (c) 字符编写正确的版本信息

> ID：10529135
> 
> 赞同：3
> 
> 时间：2012-05-10T07:17:29.830
> 
> 标签：unicode, ant, utf-8

将 ant 从 1.6 升级到 1.8.3 版本后，使用 Ant 构建的 Windows .dll 的信息资源已损坏。

以前，此值已正确保存到 version-info 资源：

`product.copyright=\u00a9 Copyright 20xx-20xx yyyyyyyyyy \u2122`（所以 (c) 和 TM 符号被正确显示）。

升级 Ant 后，默认编码更改为预期的 UTF-8，但目前版权字符串如下所示：

```
Â© Copyright 20xx-20xx yyyyyy â„¢ 
```

这**不是控制台问题**- 我使用十六进制编辑器和文件属性对话框进行了检查 - 两者都显示不正确。

查看文件`hexdump`，我看到发生以下（显然不正确）映射

```
\u00a9 -> 0x00c2 0x00a9
\u2122 -> 0x00e2 0x201e 0x00a2 
```

这里的问题是 Ant 将 UTF-8 字节（不是 Unicode 字符串）编码为 16 位字符并将其写入版本信息。

尽管这看起来像是 ant 中的错误，但我想问是否有人设法找到解决此问题或类似问题的任何解决方法。

以下是脚本的一些片段： 项目属性文件：

```
...
product.copyright=(c) Copyright 2005-2012 Clarabridge
.... 
```

build.xml 中包含的文件：

```
<versioninfo id="current-version" if="is-windows"
    fileversion="${product.version}"
    productversion="${product.version}"
    compatibilityversion="1"
    legalcopyright="${product.copyright}"
    companyname="${product.company}"
    filedescription="${ant.project.name}"
    productname="${ant.project.name}"
/>
...
<cc objdir="${target.dir}/${target.platform}/obj"
    outfile="${target.dir}/${target.platform}/${ant.project.name}"
    subsystem="other"
    failonerror="true"
    incremental="false"
    outtype="shared"
    runtime="dynamic"
>
    <versioninfo refid="current-version" />
    <compiler refid="compiler-shared-${target.platform}" />
    <compiler refid="rc-compiler" />
    <linker extends="linker-${target.platform}">
        <libset dir="${target.dir}/${target.platform}/lib" libs="${lib.list}" />
    </linker>

    <fileset dir="${src.dir}" casesensitive="false">
        <include name="*.cpp"/>
    </fileset>
</cc> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:37:59.180

**Your bug is that something is misinterpreting the UTF-8 characters as 8-bit ones!!!**

BTW, Java doesn’t use 16-bit characters; that would be UCS-2\. Java uses UTF-16, which is just as much a variable-width encoding as UTF-8 is. Distressing how many Java programmers screw this up!

UTF-8 has 8-bit code units where UTF-16 has 16-bit code units; neither one supports an “8-bit character” or a “16-bit character”. If you catch yourself writing code that thinks they do, you’ve just written buggy code.

Your output is the result of erroneously displaying UTF-8 as though it were in Latin1, which *does* use 8-bit characters. You, however, do not.

# c# - 如何从另一个网络运行exe

> ID：10529137
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:17:55.503
> 
> 标签：c#, visual-studio-2010, sql-server-2008, scheduling, remote-debugging

我在我的机器上创建了一个 dll 和一个 exe。我在 exe 中引用了这个 dll。但是当我指定另一个网络目录中的文件夹的构建或调试路径时，例如**\\ABC\App\**，然后在 SQL Server 中将其作为作业运行，我收到指定路径的错误到我的**C:\myname\My Documents\Visual Studio 2010\Projects\App\App\program.cs**。我不明白为什么引用仍然没有反映。我为我的项目更改了 Visual Studio 属性中的目录并在 Active(Release) 模式下运行。我不确定参考文献出了什么问题。

* * *

此外，这不是一个重复的问题 plz :) 它是特定于 SQL 作业和远程执行的。我不想要一些问题的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:43:32.693

异常将包含 .cs 文件的原始位置的路径，因为在编译的程序中，已经没有 .cs 文件了。

这与您从网络路径运行程序这一事实无关。

换句话说：当你编译你的程序时，编译器会创建你的 dll 和一个扩展名为 pdb 的同名文件。例如 yourdll.dll 和 yourdll.pdb。 **在编译过程**中，编译器会将 .cs 文件的路径写入 .pdb 文件。这些是您稍后在异常中看到的路径。
这意味着，无论您在何处运行程序，它们都是固定的并且始终相同。

**明确地说：**
这种行为是设计使然，不是错误，无法更改。

# iphone - 从javascript函数调用xcode方法并获取返回值

> ID：10529140
> 
> 赞同：0
> 
> 时间：2012-05-10T07:18:00.553
> 
> 标签：iphone, xcode, ios5

我正在开发一个应用程序，它**需要加载一些菜单和演示文稿（pdf、flash 等）** 菜单项是从数据库加载的，每个菜单项都包含 ID 和文本。菜单项如下所示：

藏红花组合火焰

**上面的菜单项是超链接，单击它们将在同一页面上打开演示文稿。**

在这种情况下，我需要调用一个 xcode 方法，该方法可以查询数据库（位于应用程序的文档文件夹中）并返回演示名称和其他一些详细信息。

我这里有两个问题

1）我遇到了

```
**– webView:shouldStartLoadWithRequest:navigationType:** 
```

但**此方法返回 BOOL**，我**想返回 Presentation 和其他信息**

2）不知道如何通过 javascript 在同一页面上加载演示文稿（在我的应用程序的资源文件夹内）。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:54:15.720

您几乎可以在`webView:shouldStartLoadWithRequest:navigationType`.

1.  如果`NO`从它返回，那么 web 视图将不会加载当前请求；这将使您的应用程序无需执行任何操作：

2.  然后，您可以在同一个 Web 视图中加载不同的请求（比如嵌入演示资源的 HTML 字符串），

3.  或者，您可以向您的某个控制器发送消息以完全运行不同的工作流程（显示不同类型的视图或其他）。

编辑：

详细说明更多选项2：

1.  假设您有一个嵌入 UIWebView 并充当它的委托的视图控制器；

2.  您可以在视图控制器中定义一个方法，该方法获取 HTML 字符串并将其加载到 Web 视图中，如下所示：

    ```
    - (void)loadContentInWebView:(NSString*)content {
         [_webView loadHTMLString:content  baseURL:nil];
    } 
    ```

3.  现在，在 中`webView:shouldStartLoadWithRequest:navigationType`，您可以执行以下操作：

    ```
    - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
            if ([[[request URL] absoluteString] isEqual:WHATEVER]) {
                 [self loadContentInWebView:HERE_THE_HTML];
                 return NO;
        }
        return YES;
    } 
    ```

你应该在这里定义的是：

```
 ([[[request URL] absoluteString] isEqual:WHATEVER]) 
```

即，理解用户何时触摸应该加载演示文稿的链接的逻辑；

和：

```
 [self loadContentInWebView:HERE_THE_HTML]; 
```

即，以某种方式定义您要使用的 HTML 内容，以便显示演示文稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:07:32.413

我有一个解决方法..虽然这不是一个好习惯：

在模型中： **只要有对此 webview 的请求，即使页面在 webview 中加载，也会调用此方法**

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    // check the request, if it's ajax callback, just return NO; other wise YES;

//    NSURLRequest *request = [self request];
    NSURL *url = [request URL];

    NSString *file = [url lastPathComponent];
    if ([file isEqualToString:@"Presentation.html"] == YES) {
        return YES;
    }

    if ([file isEqualToString:@"ajaxcallback.htm"] == YES) {
        // that means the ajax call is done, so you can call this 
        NSString *result = [web stringByEvaluatingJavaScriptFromString:@"getResponse();"];

        // don't forget to stop loading this fake page
        return NO;
    }
} 
```

在javascript中：

```
 function sendRequestToApp(){
        window.location="http://www.domain.com/ajaxcallback.htm";
    }

    function getResponse(src){
        alert("response");
        document.getElementById("sample").src=src;
    } 
```

# java - 网络服务的身份验证

> ID：10529145
> 
> 赞同：0
> 
> 时间：2012-05-10T07:18:39.013
> 
> 标签：java, android

我需要使用 web 服务进行身份验证，所以我[从这里尝试了示例](http://inchoo.net/mobile-development/android-development/rest-api-with-http-authentication-android-beanstalk-example/)。我传递了所有必需的参数和凭据，但在打印响应时收到了失败。我已经在浏览器中测试了用户名和密码，一切正常，但我不明白这里发生了什么：

我的 web 服务是用 ASP.NET 开发的

logcate :: (响应)

```
04-19 02:10:14.063: WARN/etAuthenticationHandler(1613): Authentication scheme ntlm not supported
04-19 02:10:14.070: WARN/DefaultRequestDirector(1613): Authentication error: Unable to respond to any of these challenges: {ntlm=WWW-Authenticate: NTLM, negotiate=WWW-Authenticate: Negotiate}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): OK: <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <html xmlns="http://www.w3.org/1999/xhtml">
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <head>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <title>401 - Unauthorized: Access is denied due to invalid credentials.</title>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <style type="text/css">
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <!--
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): fieldset{padding:0 15px 10px 15px;} 
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): h1{font-size:2.4em;margin:0;color:#FFF;}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): h2{font-size:1.7em;margin:0;color:#CC0000;} 
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): #header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): background-color:#555555;}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): #content{margin:0 0 0 2%;position:relative;}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): .content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): -->
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): </style>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): </head>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <body>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <div id="header"><h1>Server Error</h1></div>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): <div id="content">
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613):  <div class="content-container"><fieldset>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613):   <h2>401 - Unauthorized: Access is denied due to invalid credentials.</h2>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613):   <h3>You do not have permission to view this directory or page using the credentials that you supplied.</h3>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613):  </fieldset></div>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): </div>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): </body>
04-19 02:10:14.080: DEBUG/MY_APP_TAG(1613): </html> 
```

**代码：**

```
String username = "uname";
        String host = "host";
        String password = "pass";

        String urlApiCall_FindAllRepositories = 
                 "http://host:2003/VoyagerWebservice7.0.1/webservices.asmx/Naptan_GetStops_ForVoyager_FromSearch_Custom?SerachText=Easton";

        try {
            HttpClient client = new DefaultHttpClient();

            AuthScope as = new AuthScope(host, 2003);
            UsernamePasswordCredentials upc = new UsernamePasswordCredentials(
                    username, password);

            ((AbstractHttpClient) client).getCredentialsProvider()
                    .setCredentials(as, upc);

            BasicHttpContext localContext = new BasicHttpContext();

            BasicScheme basicAuth = new BasicScheme();
            localContext.setAttribute("preemptive-auth", basicAuth);

            HttpHost targetHost = new HttpHost(host, 2003, "http");

            HttpGet httpget = new HttpGet(urlApiCall_FindAllRepositories);
            httpget.setHeader("Content-Type", "text/xml");

            HttpResponse response = client.execute(targetHost, httpget,
                    localContext);

            HttpEntity entity = response.getEntity();
            Object content = EntityUtils.toString(entity);

            Log.d("MY_APP_TAG", "OK: " + content.toString());

        } catch (Exception e) {
            e.printStackTrace();
            Log.d("MY_APP_TAG", "Error: " + e.getMessage());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:38:58.830

您提到的那篇文章使用 HTTP 身份验证，而您的服务器似乎使用 NTLM 身份验证。您应该使用[`NTCredentials`](http://developer.android.com/reference/org/apache/http/auth/NTCredentials.html)NTLM 身份验证。

如果您对旧设备有疑问，可以查看[http://code.google.com/p/android/issues/detail?id=4962#c274 。](http://code.google.com/p/android/issues/detail?id=4962#c274)

# android - Android UI 布局：如何创建“堆叠”图库

> ID：10529158
> 
> 赞同：0
> 
> 时间：2012-05-10T07:19:13.783
> 
> 标签：android, layout, gallery

我按照[http://developer.android.com/guide/tutorials/views/hello-gallery.html](http://developer.android.com/guide/tutorials/views/hello-gallery.html) 上的教程创建了一个基本画廊。我的最终目标是使用画廊作为我的应用程序的主菜单，但我希望图像可以堆叠和滚动。我已经下载了画廊 3d 应用程序的代码，但分析起来实在太多了。如果我找不到更简单的路线，最终这就是我要做的。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:49:01.580

Android Docs 为您提供了一种像堆栈一样排列图像的方法。看看这个样本：

[图像作为堆栈](http://developer.android.com/resources/samples/StackWidget/index.html)

# php - 在php中下载文件后重定向任何页面

> ID：10529162
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:19:17.037
> 
> 标签：php

我的代码是：

```
readfile('cls_ref.csv');
fclose($fp);
$file_type   = 'octet-stream';
$file_name   = "cls_ref_" . date('m-d-Y H:i');
$file_ending = "csv";
header("Content-Type: application/$file_type; charset=utf-8");
header("Content-Disposition: attachment; filename=$file_name.$file_ending");
header("Pragma: no-cache");
header("Expires: 0");
header("Location:index.php"); 
```

我想在下载后重定向到，`index.php`但它是在下载之前重定向的。

`header("Location:index.php");`我在文件末尾写了一个代码，但在下载文件之前它被重定向。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-10T07:22:42.597

10 秒后刷新元数据怎么样：

```
print "<meta http-equiv=\"refresh\" content=\"10;URL=index.php\">"; 
```

# c# - 在Excel c#中刷新数据后记住隐藏的行

> ID：10529166
> 
> 赞同：0
> 
> 时间：2012-05-10T07:19:27.023
> 
> 标签：c#, excel, vsto

我正在尝试使用 c# 代码执行以下操作：

1.  在excel中隐藏一些行。
2.  清除 Excel 工作表中的所有数据和格式。
3.  将其他数据放到excel表中。

我希望隐藏的行仍然隐藏。是否可以？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:37:41.473

我使用[ClosedXML](http://closedxml.codeplex.com/)操作 excel 电子表格取得了很好的效果。

虽然我没有尝试过你的案例，但我做过类似的事情。在我的例子中，我将我的私人数据放入一个新的工作表中并隐藏它，这让 ClodedXML 变得简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:16:57.100

这是一个示例代码，可以让您继续前进....

```
 //Create an Excel App
        Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();

        Microsoft.Office.Interop.Excel._Workbook xlWorkBook = null;
        Microsoft.Office.Interop.Excel._Worksheet xlWorksheet;

        //Open a Workbook
        xlWorkBook = xlApp.Workbooks.Open(@"d:\test.xlsx");
        xlWorksheet = (Microsoft.Office.Interop.Excel.Worksheet)xlWorkBook.Sheets[1];

        //My Workbook contains 10 rows with some data and formatting
        //I Hide rows 3, 4 & 5
        Microsoft.Office.Interop.Excel.Range hiddenRange = xlWorksheet.get_Range("A3:C5");
        hiddenRange.EntireRow.Hidden = true;

        //Get the entire sheet and Clear everything on it including data & formatting
        Microsoft.Office.Interop.Excel.Range allRange = xlWorksheet.UsedRange;
        allRange.Clear();

        //Now Add some new data, say a Title on the first cell, and some more data in a loop later
        xlWorksheet.Cells[1, 1] = "Title";

        for (int i = 6; i < 10; i++)
        {
            xlWorksheet.Cells[i, 1] = i.ToString();
        }

        xlApp.Visible = true; 
```

就是这样....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:38:18.510

将它们存储在变量中并在用数据填充 excel 后再次隐藏它们。

# c - 在 C 中读取大缓冲区 - 高效技术

> ID：10529167
> 
> 赞同：1
> 
> 时间：2012-05-10T07:19:28.817
> 
> 标签：c, linux, file-io

我正在用 C 语言编程。有时我们必须从通常使用 fread 或 read 系统调用的文件中读取大数据，这意味着流 I/O 或系统调用 I/O。

我想问，如果我们正在读取这么大的数据，然后计算块大小并据此读取，它是否有助于我们有效地读取它？

我知道通过系统调用读取可能会使其变慢，并且还有其他条件，例如如果我们必须处理网络套接字，那么我们应该使用这些，而不是使用基于流的 I/O 会给我们带来优化的结果。同样，我需要一些提示和技巧来从文件中读取大数据以及要处理的事情。

另外，如果 mmap 比这些传统的 I/O 更有利，请详细说明什么时候会这样？

平台：Linux，gcc编译器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:45:33.893

您是否考虑过使用[内存映射](http://en.wikipedia.org/wiki/Memory-mapped_file)文件`mmap`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:44:36.310

我认为分块阅读总是一个好主意。对于大文件，我们显然不想在堆中分配大量内存。如果文件大约为几 MB，那么我认为我们可以在 char 缓冲区中一次读取整个文件，并使用该缓冲区来处理您的数据。这比一次又一次地从文件中读取要快。

# java - xuggle 和直播 rtmp

> ID：10529172
> 
> 赞同：4
> 
> 时间：2012-05-10T07:19:36.533
> 
> 标签：java, rtmp, live-streaming, xuggle

我找到了一个使用 xuggle 的直播 rtmp 示例，但我无法运行它，因为 xuggle 发行版不包含 libx264-normal.ffpreset，建议从发行版中获取。也许一个例子只适用于旧版本的xuggle，如果有，有没有使用最新版本的xuggle进行直播的例子？

```
import com.xuggle.xuggler.Configuration;
import com.xuggle.xuggler.ICodec;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IContainerFormat;
import com.xuggle.xuggler.IPacket;
import com.xuggle.xuggler.IPixelFormat;
import com.xuggle.xuggler.IRational;
import com.xuggle.xuggler.IStream;
import com.xuggle.xuggler.IStreamCoder;
import com.xuggle.xuggler.IVideoPicture;
import com.xuggle.xuggler.video.ConverterFactory;
import com.xuggle.xuggler.video.IConverter;
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class XugglerRtmpReferenceImpl {
    private static String url = "";
    private static String fileName = "/home/pavel/test.flv";
    private static int framesToEncode = 60;
    //screen capture size/pos 
    private static int x = 0;
    private static int y = 0;
    private static int height = 480;
    private static int width = 640;
    public static void main(String[] args) {
        IContainer container = IContainer.make();
        IContainerFormat containerFormat_live =
                IContainerFormat.make();
        containerFormat_live.setOutputFormat("flv", url + fileName,
                null);
        container.setInputBufferLength(0);
        int retVal = container.open(url + fileName,
                IContainer.Type.WRITE, containerFormat_live);
        if (retVal < 0) {
            System.err.println("Could not open output container for live stream");
                    System.exit(1);
        }
        IStream stream = container.addNewStream(0);
        IStreamCoder coder = stream.getStreamCoder();
        ICodec codec =
                ICodec.findEncodingCodec(ICodec.ID.CODEC_ID_H264);
        coder.setNumPicturesInGroupOfPictures(5);
        coder.setCodec(codec);
        coder.setBitRate(200000);
        coder.setPixelType(IPixelFormat.Type.YUV420P);
        coder.setHeight(height);
        coder.setWidth(width);
        System.out.println("[ENCODER] video size is " + width + "x" +
                height);
        coder.setFlag(IStreamCoder.Flags.FLAG_QSCALE, true);
        coder.setGlobalQuality(0);
        IRational frameRate = IRational.make(5, 1);
        coder.setFrameRate(frameRate);
        coder.setTimeBase(IRational.make(frameRate.getDenominator(),
                frameRate.getNumerator()));
        Properties props = new Properties();
        InputStream is =
                XugglerRtmpReferenceImpl.class.getResourceAsStream("/libx264-normal.ffpreset");
        try {
            props.load(is);
        } catch (IOException e) {
            System.err.println("You need the libx264-normal.ffpreset file from the Xuggle distribution in your classpath.");
                    System.exit(1);
        }
        Configuration.configure(props, coder);
        coder.open();
        container.writeHeader();
        long firstTimeStamp = System.currentTimeMillis();
        long lastTimeStamp = -1;
        int i = 0;
        try {
            Robot robot = new Robot();
            while (i < framesToEncode) {
                //long iterationStartTime = 
                System.currentTimeMillis();
                long now = System.currentTimeMillis();
                //grab the screenshot 
                BufferedImage image = robot.createScreenCapture(new
                        Rectangle(x, y, width, height));
                //convert it for Xuggler 
                BufferedImage currentScreenshot = new
                        BufferedImage(image.getWidth(), image.getHeight(),
                        BufferedImage.TYPE_3BYTE_BGR);
                currentScreenshot.getGraphics().drawImage(image, 0, 0,
                        null);
                //start the encoding process 
                IPacket packet = IPacket.make();
                IConverter converter =
                        ConverterFactory.createConverter(currentScreenshot,
                                IPixelFormat.Type.YUV420P);
                long timeStamp = (now - firstTimeStamp) * 1000; //  convert to microseconds
                IVideoPicture outFrame =
                        converter.toPicture(currentScreenshot, timeStamp);
                if (i == 0) {
                    //make first frame keyframe 
                    outFrame.setKeyFrame(true);
                }
                outFrame.setQuality(0);
                coder.encodeVideo(packet, outFrame, 0);
                outFrame.delete();
                if (packet.isComplete()) {
                    container.writePacket(packet);
                    System.out.println("[ENCODER] writing packet of size " + packet.getSize() + " for elapsed time " + ((timeStamp -
                    lastTimeStamp) / 1000));
                    lastTimeStamp = timeStamp;
                }
                System.out.println("[ENCODER] encoded image " + i + " in " + (System.currentTimeMillis() - now));
                        i++;
                try {
                    // sleep for framerate milliseconds 
                    Thread.sleep(Math.max((long) (1000 /
                            frameRate.getDouble()) - (System.currentTimeMillis() - now), 0));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                //Thread.sleep((long) (1000 / frameRate.getDouble())); 
            }
        } catch (AWTException e) {
            e.printStackTrace();
        }
        container.writeTrailer();
    }
} 
```

# java - 如何在 Java 中缓存 Transferable 数据

> ID：10529173
> 
> 赞同：2
> 
> 时间：2012-05-10T07:19:39.120
> 
> 标签：java, caching

在我的程序中，在尝试获取拖放对象上的拖动数据时，程序在包含所有 StepPanel 的面板中创建新的 StepPanel 时变慢。我跟踪了代码，发现使程序变慢的是方法 getTransferData(DataFlavour df)。我在 Internet 上搜索了该问题，然后找到了 Oracle 提供的解决方案。解决方案页面说：

> 问题：当 Java 应用程序使用 Transferable.getTransferData() 进行 DnD 操作时，拖动似乎需要很长时间。为了只在需要时初始化传输的数据，初始化代码放在 Transferable.getTransferData() 中。
> 
> 可传输数据的生成成本很高，并且在 DnD 操作期间，Transferable.getTransferData() 被多次调用，导致速度变慢。
> 
> 解决方案：缓存Transferable数据，使其只生成一次。

但我找不到如何缓存可传输数据。有谁曾经为这个问题而苦苦挣扎过？我真的需要防止程序在这个问题上变慢。如果除了缓存可传输数据之外还有其他解决方案，我将不胜感激。谢谢你。

还有 StepPanel 代码：

```
public class StepPanel extends JPanel implements Transferable, DragSourceListener, DragGestureListener, DropTargetListener{

private DragSource      source;
private TransferHandler transfer;
private DropTarget      dropTarget;

StepContainer       statementStep;
StepContainerPanel  mainPanel;
JButton             add;
JButton             maximize;
JButton             remove;
JTextArea           stepCommand;
ImageIcon           removeIcon;
ImageIcon           maximizeIcon;
ImageIcon           addIcon;
JPanel              eastPanel;

public StepPanel( StepContainer step) /*throws MalformedURLException*/ {

    setLayout( new BorderLayout());
    setBackground(Color.WHITE);

    statementStep = step;

    removeIcon = new ImageIcon( "src/jlfgr-1_0/toolbarButtonGraphics/general/Delete24.gif");
    maximizeIcon = new ImageIcon( "src/jlfgr-1_0/toolbarButtonGraphics/general/ZoomIn24.gif");
    addIcon = new ImageIcon( "src/jlfgr-1_0/toolbarButtonGraphics/general/Add24.gif");

    eastPanel = new JPanel();
    add = new JButton( addIcon);
    maximize = new JButton( maximizeIcon);
    remove = new JButton( removeIcon);
    stepCommand = new JTextArea();

    stepCommand.setPreferredSize( new Dimension( StepContainer.WIDHT, StepContainer.HEIGHT));
    stepCommand.setBorder( BorderFactory.createLineBorder( Color.BLACK));

    add.addActionListener( new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            statementStep.addSubStep();
            ((StepContainerPanel)getParent().getParent().getParent().getParent().getParent()).updateView();
        }  
    });

    maximize.addActionListener( new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            ((StepContainerPanel)getParent().getParent().getParent().getParent().getParent()).setStepContainer( statementStep);
            ((StepContainerPanel)getParent().getParent().getParent().getParent().getParent()).updateView();

        }
    });

    remove.addActionListener( new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            statementStep.removeMe();
            ((StepContainerPanel)getParent().getParent().getParent().getParent().getParent()).updateView();
        }
    });

    //Setting tool tips to the buttons
    maximize.setToolTipText( "Click this button to maximize");
    remove.setToolTipText( "Remove this step");
    add.setToolTipText( "Add a sub-step");

    //East Panel
    eastPanel.setLayout( new GridLayout());
    eastPanel.add( add);     
    eastPanel.add( remove);
    eastPanel.setBackground( getBackground());

    //StepPanel
    add( maximize, BorderLayout.WEST);
    add( eastPanel, BorderLayout.EAST);
    add( stepCommand, BorderLayout.CENTER);

    //The Properties for Drag and Drop

    //setting transferhandler to the panel
    transfer = new TransferHandler() {

        @Override
        public Transferable createTransferable( JComponent c) {

            return new StepPanel( statementStep);
        }
    };
    setTransferHandler( transfer);

    source = new DragSource();
    source.createDefaultDragGestureRecognizer( this, DnDConstants.ACTION_COPY_OR_MOVE, this);

    //setting drop data
    dropTarget = new DropTarget( this, this);
}

@Override
public void paintComponent( Graphics g) {

    super.paintComponent( g);

    setBorder( BorderFactory.createTitledBorder(statementStep.getBorderText()));
    setToolTipText( statementStep.getBorderText());
}

public JButton getRemove() {

    return remove;
}

public StepContainer getStep() {

    return statementStep;
}

@Override
public DataFlavor[] getTransferDataFlavors() {

    return new DataFlavor[]{ new DataFlavor( StepPanel.class, "Step")};
}

@Override
public boolean isDataFlavorSupported( DataFlavor df) {

    return true;
}

//when this method is called it returns this object
@Override
public Object getTransferData( DataFlavor df) throws UnsupportedFlavorException, IOException {

    return this;
}

@Override
public void dragEnter(DragSourceDragEvent dsde) {}
@Override
public void dragOver(DragSourceDragEvent dsde) {}
@Override
public void dropActionChanged(DragSourceDragEvent dsde) {}
@Override
public void dragExit(DragSourceEvent dse) {}
@Override
public void dragDropEnd(DragSourceDropEvent dsde) {}

@Override
public void dragGestureRecognized(DragGestureEvent dge) {

    source.startDrag( dge, DragSource.DefaultMoveDrop, this, this);
}

@Override
public void dragEnter(DropTargetDragEvent dtde) {}
@Override
public void dragOver(DropTargetDragEvent dtde) {}
@Override
public void dropActionChanged(DropTargetDragEvent dtde) {}
@Override
public void dragExit(DropTargetEvent dte) {}

@Override
public void drop(DropTargetDropEvent dtde) {

    //getting the dragged step from dataFlavor and synchroning it if this
    //step has same parent with dropped step then change their order

    //getting and initalizing dragged step
    Transferable transferedPanel = dtde.getTransferable();
    DataFlavor[] datas = transferedPanel.getTransferDataFlavors();

    try {
        //its dragged panel, which is in the 0th index of DataFlavor array
        StepPanel draggedPanel = ((StepPanel)transferedPanel.getTransferData( datas[0]));

        //since the dragged step will come as if it is different object
        //we cannot compare their parents directly since it will give
        //wrong comparison. So we look order of parent step of both dragged 
        //and dropped step
        if( statementStep.getParent().getBorderText().equals( draggedPanel.getStep().getParent().getBorderText())) {

            StepContainer sameParent = statementStep.getParent();

            int indexOfFirstSubStep = statementStep.getParent().getSubSteps().indexOf( statementStep);
            int indexOfSecondSubStep = draggedPanel.getStep().getParent().getSubSteps().indexOf( draggedPanel.getStep());
            System.out.println( "We ");
            sameParent.changeOrders( indexOfFirstSubStep, indexOfSecondSubStep);
        }
        else {

            System.out.println( "We cannot change those steps' orders since their parents are different");
        }
    } catch (UnsupportedFlavorException ex) {

        Logger.getLogger(StepPanel.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {

        Logger.getLogger(StepPanel.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

}

# javascript - 在jQuery中将选择器组合为变量

> ID：10529174
> 
> 赞同：0
> 
> 时间：2012-05-10T07:19:41.523
> 
> 标签：javascript, jquery, coding-style

我正在考虑组合选择器的最佳方式，我在 jQuery 代码中将其用作变量。我想始终将选择器用作变量，但问题是有时我想在一个语句中使用它们，所以我在想最优雅的方法是什么。

我应该使用 add ( (x+y).function... ) 吗？或者也许添加字符串？或者也许将 jQuery 变量保留为仅带有名称的 id，以便我可以在单个 jQuery 语句中组合（$ 即）

```
x = $('#selectorOne');
y = $('#selectorTwo'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:22:28.153

您可以将它们存储在数组中：

```
var selectors = [
    '#selector1',
    '#selector2',
    ....
]; 
```

当你想一起使用它们时，用逗号分隔`join()`

```
var alljoined = selectors.join(','); //join ALL selectors
$(alljoined).doSomethingToAll();     //and do something to all 
```

您也可以选择性地选择：

```
var fewjoined = [                  //select a few selectors...
    selectors[1], 
    selectors[3],
    ...
].join(',');                       //..to join
$(fewjoined).doSomethingToAll();   //and do something 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T07:23:10.103

如果它们被声明为变量，您可以使用`add()`：

```
x.add(y).something(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:22:22.783

[多个选择器（“selector1，selector2，selectorN”）](http://api.jquery.com/multiple-selector/) -您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。

例子 ：

```
$("div,span,p.myClass").css("border","3px solid red"); 
```

或者

[.add()](http://api.jquery.com/add/) - 将元素添加到匹配元素的集合中。

例子 ：

```
$("p").add("div").addClass("widget"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:23:58.180

由于 x 和 y 只是数组，因此可以使用 jQuery.merge 来组合它们。高温高压

# java - Servelts 中始终运行的线程

> ID：10529182
> 
> 赞同：0
> 
> 时间：2012-05-10T07:20:11.467
> 
> 标签：java, jsp, tomcat, servlets, inter-process-communicat

*   我需要构建一个始终运行的线程/进程，并且可以通过其他servlts和JSP页面进行查询......
*   该线程/进程将处理大文件，因此它将缓存文件块以减少文件访问（加上一些其他处理）......
*   因此，该线程/进程将被加载并等待任何查询来回答......只要服务器正在运行。

我想在所有的servelt类之间创建一个通用的静态类，但我发现这行不通（tomcat将每个新的servelt作为一个全新的程序处理）

那么我可以尝试的其他选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:42:32.137

我认为你有两个选择：

1.  使用[`ServletContext`](http://docs.oracle.com/javaee/6/tutorial/doc/bnagl.html)访问应用程序范围的对象。
2.  使用更复杂的解决方案，例如[ehcache](http://ehcache.org)将数据放入内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:06:35.253

除了莫里茨提出的选项之外的其他选项

1.  [在 Tomcat 内部：使用Global JNDI](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)注册一个可供所有 servlet 访问的全局对象
2.  [在同一个 JVM 中：使用Java Service Wrapper 之](http://wrapper.tanukisoftware.com/doc/english/download.jsp)类的启动器以编程方式（嵌入）启动共享资源（静态类、存储库等）和 Tomcat 。您将需要定义一个由您的共享资源实现并可供您的 servlet 使用的小型 API。
3.  跨 JVM 分布：memcached、hazelcast 等...

# jsf-2 - JSF 序列化/反序列化

> ID：10529183
> 
> 赞同：2
> 
> 时间：2012-05-10T07:20:20.943
> 
> 标签：jsf-2, java-ee-6, deserialization, cdi

我们在表示层中使用 JSF。大多数类看起来像这样：

```
@Named
@SessionScoped
public class MyHandler implements Serializable {
   @Inject
   private MyHelper helper;
   @EJB
   private transient MyFacade myFacade;

   ...
} 
```

一般来说，JSF 处理程序有一个对外观的临时引用。外观将表示层与我们的服务层连接起来。助手类几乎将通过 cdi 注入。

JSF 序列化处理程序的状态，但是反序列化会发生什么？引用会自动恢复吗？我如何检查这个或告诉 JSF 序列化/反序列化托管 jsf bean（测试）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:39:05.223

[根据规范，](http://docs.jboss.org/cdi/spec/1.0/html/injectionelresolution.html#clientproxies)所有（相关）CDI 管理的依赖项都被代理，并且代理必须是可被动的，因此反序列化没有问题:)

> [...] 最后，客户端代理可能会被钝化 [...]

# php - 使用 php 从 3rd 方网站提取数据的选项有哪些？

> ID：10529191
> 
> 赞同：0
> 
> 时间：2012-05-10T07:20:46.673
> 
> 标签：php

我想定期（每 2-3 小时）从某个网站获取数据。

网站与天气有关：[http ://meteo.gov.ge/index.php?l=2&pg=cm&ct=1&cm=](http://meteo.gov.ge/index.php?l=2&pg=cm&ct=1&cm=)

他们还提供小部件：[http](http://meteo.gov.ge/index.php?pg=sb) ://meteo.gov.ge/index.php?pg=sb但我需要在我的网页上更个性化...我只需要获取任何城市的温度数字和天气图标。

在我的 ubuntu 上：我可能会尝试使用 curl + grep/regex 并 cron 它。

但是我将如何在 php 中做到这一点？无论如何我可以使用他们提供小部件的事实（我怀疑，因为它嵌入在图像中）？

ps 这不是内容窃取，这是一个由我（纳税人）钱资助的政府网站！我应该能够从我支付的服务中获取我需要的数据 >:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:25:46.417

通常这种天气服务提供 RESTFUL Web 服务 (API) 来获取数据：

您执行一个 http GET 或 POST 提供一些参数（例如，您要检索天气预报的城市名称），它们会向您发送一段带有详细预报的 xml。

然后由您来解析返回的 xml 并仅显示您想要的信息。

我绝对不鼓励您抓取您共享的天气网站主页的整个 html 内容。图片他们突然改变页面的结构、尺寸等等，你的代码会失败。

您需要一种结构化的方式来获取预测，这就是 API 存在的原因。如果该网站没有为您提供 API，请尝试搜索您所在国家/地区的其他天气预报网站！

# java - 将最终和非最终int变量相乘有什么区别？

> ID：10529203
> 
> 赞同：1
> 
> 时间：2012-05-10T07:21:28.543
> 
> 标签：java

考虑这个代码片段

```
public class ConstantFolding {

   static final  int number1 = 5;
   static final  int number2 = 6;

   static int number3 = 5;
   static int number4 = 6;

   public static void main(String[ ] args) {
      int product1 = number1 * number2;             //line A
      int product2 = number3 * number4;             //line B
   }
} 
```

标记为 A 线的线和标记为 B 线的线有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T07:24:42.440

不同之处在于，所需的乘法`product1`是在*编译时*执行的，`number1`并且`number2`是常量。

的计算`product2`是在执行时编译的，因为 和 的值`number3`可以`number4`改变。实际上，您可以更改这些值，然后`main`再次调用。

有关常量表达式和常量变量的更多信息，请参阅 JLS 的第[15.28](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28) 和[4.12.4节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:24:14.953

没有区别，`product1`都`product2`等于 30。

该消息击中了您，因为您不能只发布代码声明而没有任何解释。

# php - 根据空间或其他任何方式计算字符串数据库

> ID：10529205
> 
> 赞同：0
> 
> 时间：2012-05-10T07:21:30.057
> 
> 标签：php, mysql

我有这样的邻接列表模式结构，我想计算父级的所有标题，例如 Food = 9, Fruit = 6

![在此处输入图像描述](../Images/fd7bced0cd7a5bd6e822387bc9878b92.png)

使用该功能计算标题

```
 function display_children($parent, $level) 
     {

    $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');

       while ($row = mysql_fetch_array($result))
        {
           $data=  str_repeat(' ',$level).$row['title']."\n";
           echo $data;
           $this->display_children($row['title'], $level+1);
        }   
  } 
```

调用函数

```
 display_children('Food',0); 
```

结果

通过回声$数据；我得到了我想要的正确结果，但我想数 9

```
 Fruit Green Peer Red Cherry Yellow Banana Meat Pork 
```

所以请指导我调用函数时如何计算所有数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:26:36.337

```
function display_children($parent, $level) 
{

   $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');

   $count = 0;
   while ($row = mysql_fetch_array($result))
    {
       $data=  str_repeat(' ',$level).$row['title']."\n";
       echo $data;
       $count += 1 + $this->display_children($row['title'], $level+1);
    }  
    return $count; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:28:00.347

您可以使用`mysql_num_rows`，它将包含您的查询返回的行数。

```
function display_children($parent, $level) 
{
    $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');
    $count = mysql_num_rows($result);

    while ($row = mysql_fetch_array($result))
    {
       $data=  str_repeat(' ',$level).$row['title']."\n";
       echo $data;
       $this->display_children($row['title'], $level+1);
    }   
  } 
```

不过，您的菜单查询量很大，您应该真正研究如下解决方案：[http ://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)

# c - 强制转换是否会删除 C/C++ 中的字节序依赖？

> ID：10529211
> 
> 赞同：2
> 
> 时间：2012-05-10T07:22:14.897
> 
> 标签：c, casting, variable-assignment, endianness, dereference

即，如果我们将一个名为 arr 的 C 或 C++ 无符号字符数组转换为 (unsigned short*)arr 然后分配给它，结果是否与机器字节序无关？

旁注 - 我看到了关于 IBM 和其他地方关于 SO 的讨论，例如：

```
unsigned char endian[2] = {1, 0};
short x;
x = *(short *) endian; 
```

...说明 x 的值将取决于字节序的布局，因此取决于机器的字节序。这意味着取消引用数组是依赖于字节序的，但是分配给它呢？

```
*(short*) endian = 1; 
```

无论字节顺序如何，是否所有未来的短期取消引用都保证返回 1？

* * *

阅读回复后，我想发布一些背景信息：

在这个结构中

```
struct pix { 
    unsigned char r; 
    unsigned char g;
    unsigned char b; 
    unsigned char a; 
    unsigned char y[2]; 
 }; 
```

用 unsigned short y 替换 unsigned char y[2] 没有个体差异，但是如果我将这些结构组成一个数组并将其放入另一个结构中，那么我注意到容器结构的大小往往更高“无符号短”版本，因此，由于我打算制作一个大型数组，因此我选择了 unsigned char[2] 以节省空间开销。我不知道为什么，但我想在内存中对齐 uchar[2] 更容易。

因为我需要用那个变量 y 做大量的数学运算，这意味着它是一个短长度的数值，我发现自己为了避免单独访问 uchar 字节而进行了很多转换......有点快避免丑陋的特定于字节的数学的方法，但后来我想到了字节顺序以及如果我只是将所有内容都转换为，我的数学是否仍然正确

```
*(unsigned short*)this->operator()(x0, y0).y = (ySum >> 2) & 0xFFFF; 
```

...这是一个程序中的一行，它平均 2-D 数组中的 4 个相邻邻居，但关键是我有一堆需要对 uchar[2] 字段进行操作的操作作为单个短，我试图找到最轻的（即，每次我需要访问或分配时都没有基于字节序的 if-else 语句），与短字节无关的字节序无关方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:24:26.697

由于严格的指针别名，它是未定义的行为，所以它可能是任何东西。如果你对联合做同样的事情，但答案是否定的，结果取决于机器字节序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:45:14.647

的每个可能值`short`都有一个所谓的“对象表示”[*]，它是一个字节值序列。当一个类型的对象`short`保存该值时，该对象的字节保存该值序列。

您可以将字节顺序视为对象表示依赖于实现的方式之一：具有最低地址的字节是保存值的最高有效位还是最低有效位？

希望这能回答你的问题。如果您已经安全地将有效的对象表示形式`1`作为 short 写入某个内存，那么当您从同一内存中读回它时，您将再次获得相同的值，而不管该`1`实现中的对象表示实际上是什么。尤其是不管字节顺序。但正如其他人所说，你必须避免未定义的行为。

[*] 或者，在奇异的架构上，相同的值可能有不止一个对象表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:37:55.357

是的，所有未来的取消引用也将返回`1`：就像`1`在 type 范围内一样`short`，它最终会在内存中未经修改，并且一旦存在就不会在你背后改变。

`unsigned char[2]`但是，代码本身违反了有效类型：将a 作为 a访问是非法的，并且如果您的架构不支持未对齐访问并且您特别不走运`short`，则可能会引发 a 。`SIGBUS`

但是，任何对象的字符访问始终是合法的，并且代码的可移植版本如下所示：

```
short value = 1;
unsigned char *bytes = (unsigned char *)&value; 
```

当然，如何`value`存储在内存中仍然是实现定义的，即如果不进一步了解架构，您将无法知道以下将打印什么：

```
assert(sizeof value == 2); // check for size 2 shorts
printf("%i %i\n", bytes[0], bytes[1]); 
```

# php - 如何在 Visual Studio 中使用 PHP

> ID：10529214
> 
> 赞同：61
> 
> 时间：2012-05-10T07:22:37.623
> 
> 标签：php, visual-studio

首先让我说我从未使用过 PHP，但我正在寻找学习它，所以我的问题是如何在 Visual Studio Ultimate 中使用 PHP？它与您声明 JQuery 的方式相似吗？

```
$(document).ready(function () 
{ 
    // Code goes here?  
}); 
```

我在 Google 上进行了多次搜索，但没有得到我想要的答案。

还是我需要完全不同的软件才能使用它？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-10T07:35:12.687

默认情况下，VS 不会运行 PHP，但您可以使用扩展来执行此操作：

[您可以使用扩展管理器PHP Tools for Visual Studio](http://visualstudiogallery.msdn.microsoft.com/6eb51f05-ef01-4513-ac83-4c5f50c95fb5?SRC=VSIDE)安装附加组件。

如果您想在 VS 中安装它，请转到工具 > 扩展管理器 > 在线图库 > 搜索 PHP，您将在其中找到适用于 Visual Studio 的 PHP 工具（上面的链接）。你也有 Visual Studio 的 VS.Php。两者**都不是免费**的。

你还有一个很酷的 PHP 编译器，叫做 Phalanger： ![Phalanger PHP 编译器](../Images/0bade4fb6c2303cecdabbd8edfe9b89a.png)

如果我没记错的话，你上面写的代码是 JavaScript (jQuery) 而不是 PHP。

如果您想要用于 PHP 的酷炫独立 IDE：（免费）

*   Netbeans：[https ://netbeans.org/downloads/start.html?platform=windows&lang=en&option=php](https://netbeans.org/downloads/start.html?platform=windows&lang=en&option=php)
*   日食： http: [//www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr](http://www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T08:21:08.340

也许我们应该首先帮助您解决一个很大的误解：PHP 是（如 ASP.NET 或您以前使用的任何东西）一种**服务器端**语言，而 javascript 是**客户端**语言。

这意味着 PHP 将在您的网络服务器上运行并动态创建一个 HTML 页面，然后将其发送到浏览器。Javascript 反过来嵌入（直接或作为引用文件）到这个 HTML 页面并在浏览器中运行。

也许你现在可以理解为什么你的方法到目前为止永远行不通。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-12-03T17:55:10.660

尝试**Visual Studio 代码**。直接或通过扩展很好地支持 PHP 和其他语言。它无法替代 Visual Studio 的强大功能，但它是 Visual Studio 的强大补充。您可以在所有操作系统（Windows、Linux、Mac...）上运行它。

[https://code.visualstudio.com/](https://code.visualstudio.com/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-10T08:28:18.770

也许可以在 Visual Studio 上调试 PHP，但是如果您需要同时使用来自两个不同供应商的两种技术，那么除了 Visual Studio 之外，使用[Eclipse PDT](https://eclipse.org/pdt/)或[Netbeans IDE来进行 PHP 项目更简单、更合乎逻辑。](https://netbeans.org/features/php/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-10T18:58:19.280

以下是一些选项：

*   [Visual Studio PHP (VS.Php)](https://marketplace.visualstudio.com/items?itemName=vsphp.VSPhpforVisualStudio)。
*   [DEVSENSE 为 Visual Studio 提供的 PHP 工具](https://visualstudiogallery.msdn.microsoft.com/6eb51f05-ef01-4513-ac83-4c5f50c95fb5)。

或者您可以查看这个[PHP 编辑器评论](http://php-editor-review.toptenreviews.com/)列表。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-09T10:40:15.093

我不明白其他答案如何不回答有关如何使用 PHP 的原始问题（与标题不太一致）。
PHP 文件或嵌入在 HTML 代码中的 PHP 代码始终以标记开头`<?php`并以`?>`.

您可以像这样在 HTML 中嵌入 PHP 代码（您必须使用`.php`扩展名保存文件，以便 PHP 服务器识别和处理它，即：index.php）：

```
<body>
   <?php echo "<div>Hello World!</div>" ?>
</body> 
```

或者您可以使用整个 php 文件，即：test.php：

```
<?php    
$mycontent = "Hello World!";
echo "<div>$mycontent</div>";
?> // is not mandatory to put this at the end of the file 
```

PHP 中没有`document.ready`，脚本在从浏览器或另一个 PHP 文件调用时被处理。

# ios - 有没有办法使用路径绘图添加文本

> ID：10529217
> 
> 赞同：5
> 
> 时间：2012-05-10T07:22:46.353
> 
> 标签：ios, mkmapview, mkoverlay

我有一个继承自 MKOverlayPathView 的地图自定义视图。我需要这个自定义视图来显示圆圈、线条和文本。

我已经设法使用路径绘图 CGPathAddArc 和 CGPathAddLineToPoint 函数绘制圆和线。

但是，我仍然需要添加文本。

我尝试使用添加文本

```
 [text drawAtPoint:centerPoint withFont:font]; 
```

但我得到了无效的上下文错误。

任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:06:04.543

使用`MKOverlayPathView`，我认为添加文本的最简单方法是覆盖`drawMapRect:zoomScale:inContext:`并将路径和文本绘图放在那里（并且什么都不做或不实现`createPath`）。

但是，如果您仍然要使用`drawMapRect`，您可能只想切换到子类化普通`MKOverlayView`而不是`MKOverlayPathView`.

使用`MKOverlayView`, 覆盖该方法并使用(or or )`drawMapRect:zoomScale:inContext:`绘制圆。 `CGContextAddArc``CGContextAddEllipseInRect``CGPathAddArc`

您可以使用此方法绘制文本`drawAtPoint`，该方法将具有所需的`context`.

例如：

```
-(void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
{
    //calculate CG values from circle coordinate and radius...
    CLLocationCoordinate2D center = circle_overlay_center_coordinate_here;

    CGPoint centerPoint = 
        [self pointForMapPoint:MKMapPointForCoordinate(center)];

    CGFloat radius = MKMapPointsPerMeterAtLatitude(center.latitude) * 
                         circle_overlay_radius_here;

    CGFloat roadWidth = MKRoadWidthAtZoomScale(zoomScale);

    //draw the circle...
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
    CGContextSetFillColorWithColor(context, [[UIColor blueColor] colorWithAlphaComponent:0.2].CGColor);
    CGContextSetLineWidth(context, roadWidth);
    CGContextAddArc(context, centerPoint.x, centerPoint.y, radius, 0, 2 * M_PI, true);
    CGContextDrawPath(context, kCGPathFillStroke);

    //draw the text...
    NSString *text = @"Hello";
    UIGraphicsPushContext(context);
    [[UIColor redColor] set];
    [text drawAtPoint:centerPoint 
             withFont:[UIFont systemFontOfSize:(5.0 * roadWidth)]];
    UIGraphicsPopContext();
} 
```

关于另一个答案中的评论......

当相关联的中心坐标或半径（或其他）`MKOverlay`发生变化时，您可以`MKOverlayView`通过调用它来进行“移动” `setNeedsDisplayInMapRect:`（而不是再次删除和添加覆盖）。（使用 a`MKOverlayPathView`时，您可以`invalidatePath`改为调用。）

调用时`setNeedsDisplayInMapRect:`，可以`boundingMapRect`为 map rect 参数传递叠加层的 。

在 WWDC 2010 的 LocationReminders 示例应用程序中，覆盖视图使用 KVO 来观察关联`MKOverlay`的更改，并在检测到圆圈属性发生更改时自行移动，但您可以通过其他方式监视更改并`setNeedsDisplayInMapRect:`从覆盖视图外部显式调用.

[（在对另一个答案的评论中，我确实提到了使用`MKOverlayPathView`，这就是 LocationReminders 应用程序实现移动圆圈覆盖视图的方式。但我应该提到你也可以`MKOverlayView`用来画一个圆圈。对此感到抱歉。）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:44:30.530

推送上下文`UIGraphicsPushContext`给我带来了一个问题。提醒一下，该方法`drawMapRect:zoomScale:inContext:`是同时从不同的线程调用的，所以我必须从调用的地方开始同步这段`UIGraphicsPushContext`代码`UIGraphicsPopContext`。

此外，在计算字体大小时，`[UIFont systemFontOfSize:(5.0 * roadWidth)]`应考虑`[UIScreen mainScreen].scale`，对于 iPad、iPad2、iPhone3`1`和 iPhone4-5 和 iPad3 是`2`。否则，文本大小会从 iPad2 到 iPad3 不同。

所以对我来说，结局是这样的：`[UIFont boldSystemFontOfSize:(6.0f * [UIScreen mainScreen].scale * roadWidth)]`

# php - PHP 动态 JavaScript 值

> ID：10529221
> 
> 赞同：0
> 
> 时间：2012-05-10T07:23:03.173
> 
> 标签：php, javascript, joomla, module

我最近为 Joomla 创建了一个滑动模块，我有一个带有以下参数的 JavaScript 文件：

```
scrollbar: true,
snapToChildren: true,
desktopClickDrag: true,
scrollbarMargin: '5px 40px 0 40px',
scrollbarBorderRadius: 0,
scrollbarHeight: '2px', 
```

我只想知道如何使这些值动态化，以便它们可以从 PHP 中提取值，以便可以在 joomla 的后端参数中对其进行调整。

任何帮助表示赞赏。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:29:18.383

在您的 php 文件中尝试：

```
scrollbarHeight: '<?php echo $yourvalue; ?>px', 
```

对于要动态更新的每个值，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:29:45.420

您可以在页面加载时回显 php 代码中的值。你可能有类似的东西：

```
echo 'var some_javascript_value = '.$the_PHP_value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:41:09.643

我建议你研究一个免费的 joomla 扩展结构，你可以从中学到很多。[这](http://offlajn.com/blog/entry/2012/03/20/free-glassy-menu-module.html)是我们大约一个月前制作的免费扩展，如果您愿意，可以查看代码。

您正在寻找的是将后端参数与前端连接起来，这样您就可以使您的扩展更加用户友好。

我会做这样的事情（joomla 1.5 示例）：

制作模块 xml 文件，因为它包含您在后端看到的模块设置。在您的情况下，它将类似于：

```
<param name="scrollbar" type="list" default="1">
            <option value="true">Yes</option>
            <option value="false">No</option>
</param> 
```

这是滚动条设置的参数之一。前端的相应代码是：

```
...    
scrollbar: <?php echo $params->get('scrollbar', "true"); ?>,
... 
```

这使您滚动条参数动态。如果用户选择是，则该值将为真，否则为假。

# visual-studio-2008 - 让 SpecFlow / Cuke4VS 理解非英语的 .feature 文件

> ID：10529222
> 
> 赞同：1
> 
> 时间：2012-05-10T07:23:09.183
> 
> 标签：visual-studio-2008, specflow

我正在尝试在我们的（Visual Studio 2008）项目中使用 SpecFlow 来定义可执行的验收测试。开发团队决定使用我们的母语德语作为功能文件的语言 - 所以我们将这个配置的小片段添加到我们的测试项目中：

```
<configuration>
  <configSections>
    <section name="specFlow" type="TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler, TechTalk.SpecFlow"/>
  </configSections>
  <specFlow>
    <language feature="de-DE" tool="" />
  </specFlow>
</configuration> 
```

问题是：Visual Studio 2008 中使用 Cuke4VS 突出显示的语法都不起作用，SpecFlow 自定义工具也不能理解和正确解析这些功能文件:-(

所以我有这样的事情：

```
Funktionalität: Abrechnung durchführen
    Um die angefallenen Kosten zu verrechnen
    Als Sachberabeiter
    Will ich eine Abrechnung durchführen

    Szenario: erste Abrechnung erstellen
        Angenommen es existiert noch keine Abrechnung
        Wenn ich eine neue Abrechnung erstelle
        Dann sollte die Abrechnung das aktuelle Jahr abdecken 
```

`Funktionalität`但是（1） Cuke4VS没有突出显示`Szenario`关键字（德语为`Feature`and `Scenario`），并且（2）SpecFlow 自定义工具抛出错误：

> 语法错误，预期：特征：标签

当我使用英语术语`Feature`和`Scenario`- 事情就好了。

我还尝试`#language: de-DE`在文件顶部添加一个标签`.feature`- 但不幸的是，这似乎没有任何帮助:-( 语法突出显示仍然不存在，并且自定义工具仍然吐出错误......

我错过了什么？我什至可以让它在 VS2008 中正常工作吗？（这个项目目前还不能升级到 2010）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:21:06.713

这很奇怪....在多次重新启动 Visual Studio 2008 后，卸载 Cuke4VS 以支持 SpecFlow 1.8.1 中的内置 VS 2008 集成，并在重新启动我的开发机器后，现在突然突出显示语法德语功能运行良好，SpecFlow 的自定义工具现在可以正确地将这些德语功能转换为`*.cs`代码隐藏文件。

但是现在：我们拥有的那些在`#language: en-EN`文件顶部带有前缀的英文功能不再正确突出显示......

相当可疑 - 整个 VS 2008 集成似乎有点不稳定......期待 VS 2010 ！

# jquery - Jquery屏蔽输入 - 编辑时电话号码不起作用

> ID：10529225
> 
> 赞同：0
> 
> 时间：2012-05-10T07:23:27.463
> 
> 标签：jquery, phone-number

我对使用 jquery 的屏蔽输入有一点问题：

我有一个电话号码文本输入，我把它屏蔽了

```
$("#phone").mask("9999-9999999"); 
```

它工作得很好，但是当我在编辑时尝试在电话号码字段中填充值时，它没有显示。

当我单击重置按钮时，它会出现。

我正在使用 jquery-1.5.2.min.js 和 jquery.maskedinput.js - 版本：1.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:56:25.300

您可以像这样设置屏蔽值的值：

```
$("#tin").mask("9999-9999999").val("11111111"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:52:04.130

电话号码字段使用掩码限制为 11，数据库字段也有 11 个长度。但实际上电话号码包含 12 个字符（包括 - ）。所以电话号码没有正确更新。在电话字段上填充它是问题

# android - 音频播放完毕后通知

> ID：10529226
> 
> 赞同：8
> 
> 时间：2012-05-10T07:23:29.103
> 
> 标签：android, android-mediaplayer

好吧，我正在尝试实现语音录制的基本功能，例如

录音、播放/暂停、停止

我能够做到所有这些，但唯一的问题是，一旦音频播放完毕，我如何才能得到通知。我的意思是，如果我播放一个音频文件，那么一旦它完成播放，我想要一个通知，它现在已经停止。

到目前为止我用过

```
 mPlayer.start() // to start the audio

   mPlayer.stop(); // to stop the audio

   mPlayer.pause(); //to pause the audio 
```

我只是想知道音频文件自动完成播放后我怎么知道

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T07:27:11.020

您可以使用 Media Player 类的 Completion Listener 来执行此操作。

```
mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {

                Log.i("Completion Listener","Song Complete");
                Toast.makeText(context, "Media Completed", Toast.LENGTH_SHORT).show();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T07:36:58.113

尝试使用此代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       >
    <Button id="@+id/cmd_play"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:text="Play the music !!!"
       />
    </LinearLayout> 
```

MusicPlayer 活动代码

```
 public class MusicPlayer extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.main);

            // Find the Button from the xml-file.
            Button cmd_play = (Button)this.findViewById(R.id.cmd_play);
            cmd_play.setOnClickListener(new OnClickListener(){

                            @Override
                            public void onClick(View arg0) {
                                    MediaPlayer mp = MediaPlayer.create(MusicPlayer.this,
                                                    R.raw.everlast);
                                    mp.prepare();
                                    mp.start();
                                    // i.e. react on the end of the music-file:
                                    mp.setOnCompletionListener(new OnCompletionListener(){

                                            // @Override
                                            public void onCompletion(MediaPlayer arg0) {
                                                    // File has ended !!! 

Toast.makeText(context, "Media Completed with Success", Toast.LENGTH_SHORT).show();
                                            }
                                    });
                            }
            });
        }
    } 
```

将文件声音放在资产文件夹中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T07:27:58.603

使用mediaplayer 类的**setOnCompletionListener方法..**[查看如何使用该方法..在这里](https://stackoverflow.com/questions/7367997/how-do-you-detect-when-a-sound-file-has-finished)

# iphone - 如何保存自定义单元格文本字段的数据？

> ID：10529227
> 
> 赞同：0
> 
> 时间：2012-05-10T07:23:30.737
> 
> 标签：iphone, objective-c, ios5

![在此处输入图像描述](../Images/cb1753f2c6b59082499da8f131256bd3.png)

我是 iPhone 开发的新手，我正在开发一个应用程序，如果我有带有自定义单元格的表格视图，我的自定义单元格包含标签和文本文件。这是我的注册屏幕，如何保存我的文本字段的数据以及如何对文本进行验证。在文本字段 endediting 中，我们可以保存数据。但是如果用户在第一个文件中输入姓名，然后单击完成按钮，它将显示请输入名字，因为我正在将数据保存在 didendediting 中。当用户在文本字段上时，我想保存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:35:43.907

您可以使用此方法来跟踪您当前的文本字段文本，并借助模型类对象来存储您的文本。

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    NSString *characterSet = nil; 
    switch (theTextField.tag) 
    {
        case 1:
            characterSet = @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz ";
            [sharedInstance.registrationDetails setFirstName:theTextField.text];

            default:
            characterSet = @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789?/!@#$&*.,-:; _";
            break;
    }
    NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:characterSet];
    for (int i = 0; i < [string length]; i++)
    {
        unichar c = [string characterAtIndex:i];
        if (![myCharSet characterIsMember:c]) 
        {
            return NO;
        }
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:37:12.153

使控制器成为单元格文本字段的代表，然后在控制器中实现这些方法。

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{    
    NSInteger tag = [textField tag];
if(tag == 0) {
//save first name text value
}
else if (tag == 1){
//save last name text value
}
else if etc....
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

只需确保在返回单元格时正确设置标签

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

您还可以对如何让键盘像表单处理程序一样使用下一个/上一个按钮进行一些研究

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:11:45.010

寄存器.h

```
@interface Register : NSObject {
    NSString *_firstNameTxt;
    NSString *_lastNameTxt;
NSString *_emailTxt;
    NSString *_passwordTxt;
}

@property (nonatomic, retain) NSString * firstNameTxt;
@property (nonatomic, retain) NSString * lastNameTxt;
@property (nonatomic, retain) NSString * emailTxt;
@property (nonatomic, retain) NSString * passwordTxt;
@end 
```

注册.m

```
@implementation Register
@synthesize firstNameTxt=_firstNameTxt;
@synthesize lastNameTxt =_lastNameTxt ;
@synthesize emailTxt=_emailTxt;
@synthesize passwordTxt= _passwordTxt;

- (void)dealloc{
[super dealloc];
 [_firstNameTxt release];
 [_lastNameTxt  release];
 [_emailTxt  release];
 [_passwordTxt  release];
 }
 @end 
```

注册视图控制器.h

```
@class Register;

@interface RegisterViewController : UIViewController {
    Register *objRegister;
} 
```

注册视图控制器.m

```
- (void)viewDidLoad {
[super viewDidLoad];
  objRegister = [[Register alloc] init];
} 
```

表视图代表

```
[txtFirstName setText:objRegister.firstNameTxt];
[txtLastName setText:objRegister.lastNameTxt];

-(void) textFieldDidEndEditing:(UITextField *)textField{
// do the same code as Warren Burton Post

 } 
```

# php - 如何从静态方法的返回对象初始化派生类？

> ID：10529228
> 
> 赞同：0
> 
> 时间：2012-05-10T07:23:39.973
> 
> 标签：php, oop

如何通过构造中的返回值初始化类的基类？假设我有这个作为基类：

```
class Base
{
    public function Foo()
    {
    }

    private $_var;
}
```

我也有来自另一个类的这个静态方法，它返回基类：

```
class MyStaticClass
{
    public static function Get()
    {
        return new Base();
    }
} 
```

现在我在这里从基类派生它：

```
class Derived extends Base
{
    public function __construct()
    {
        // Here, how can I initialize Base class with
        // object MyStaticClass returns? Something like

        parent = MyStaticClass::Get(); // This doesn't obviously work..
    }
} 
```

有什么解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:30:47.010

尽管这似乎是一种不常见的方式，但您可能是这个意思：

```
class Derived extends Base
{
    public function __construct()
    {
        parent::__construct(MyStaticClass::Get());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:44:51.370

我还没有找到直接做到这一点的方法，但如果你愿意放手`class`，你可以用 javascript 风格的 OOP 来完成。[在https://stackoverflow.com/a/10468793/1369091](https://stackoverflow.com/a/10468793/1369091)上查看我的答案

# java - 如何读取 tagx/jspx 中的系统属性？

> ID：10529229
> 
> 赞同：1
> 
> 时间：2012-05-10T07:23:44.340
> 
> 标签：java, spring, jsp

我正在定义一个名为“version.tagx”的 tagx 文件。这个标签的职责是发出一个锚标签，它的显示文本是应用程序的版本号。目前，该文件的定义如下所示：

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:spring="http://www.springframework.org/tags" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
  <jsp:output omit-xml-declaration="yes" />

  <jsp:directive.attribute name="render" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')" />

  <c:if test="${empty render or render}">
    <spring:message code="global_version" />
    <spring:url var="changelog" value="/resources/changelog.txt" />

    <c:out value=": " />
    <a href="${changelog}" title="Built by ${application_builtBy} on ${application_buildTime}">${application_version}</a>
  </c:if>
</jsp:root> 
```

我的应用程序是在 Tomcat 7x 容器中运行的 Spring MVC 应用程序。我的 applicationContext.xml 中有以下行

```
<context:property-placeholder location="classpath*:META-INF/spring/*_${spring.profiles.active}.properties,classpath:app-info.properties"/> 
```

我已经通过遵循调试日志消息确认 app-info.properties 文件是由 Spring 发现的，并且（可能）该文件中的属性值已加载到我的运行时中。

这是日志消息

```
2012-05-09 23:45:24,237 [main] INFO  org.springframework.context.support.PropertySourcesPlaceholderConfigurer - Loading properties file from class path resource [app-info.properties]
2012-05-09 23:45:24,237 [main] DEBUG org.springframework.core.env.MutablePropertySources - Adding [localProperties] PropertySource with lowest search precedence 
```

这是我的 app-info.properties 文件的内容：

```
application_version=1.0
application_buildTime=05-04-2012 00:00:00
application_builtBy=me
application_buildNumber=55 
```

我想要的是让我的 tagx 发出

```
Version: <a href="path/to/changelog.html" title="Built by me on 05-04-2012 00:00:00">1.0</a> 
```

目前我得到的是：

```
Version: <a href="path/to/changelog.html" title="Built by  on "></a> 
```

有谁知道实现这一目标的方法？我应该尝试一种完全不同的方法来完全放弃属性文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T23:47:12.460

在 webmvc-config.xml 添加 util:properties 其中 /WEB-INF/spring/application.properties 是属性文件的路径：

```
<util:properties id="applicationProps" location="/WEB-INF/spring/application.properties"/> 
```

然后，只需在您的锚标记之前添加它：

```
<spring:eval expression="@applicationProps['application_builtBy']" var="application_builtBy"/>
<spring:eval expression="@applicationProps['application_buildTime']" var="application_buildTime"/>
<spring:eval expression="@applicationProps['application_version']" var="application_version"/> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T14:46:10.633

您还可以执行的操作不会将您与在单个属性占位符中查找属性联系起来，或者如果您使用 java 配置并且仅实例化 PropertySourcesPlaceholderConfigurer 是使用环境对象：

```
<spring:eval expression="@environment.getProperty('application_builtBy')" /> 
```

# php - httpd/AB 杀死 apache？

> ID：10529230
> 
> 赞同：0
> 
> 时间：2012-05-10T07:23:46.593
> 
> 标签：php, mysql, apache

我在专用服务器上设置了 apache-2.22/php 5.3.10，但我有一个奇怪的问题。

我用 mysql 数据库创建了一个 Drupal 7 站点。

如果我使用以下命令对站点进行压力测试：ab -c 1 -n 150 http : //sitename/ 它工作正常。如果我使用以下命令对站点进行压力测试：ab -c 2 -n 20 http : //sitename/ 它会杀死 apache。如果我使用以下命令对站点进行压力测试：ab -c 50 -n 1500 http : //sitename/static.html 它工作正常。

我已将 apache 的错误日志设置为调试。但它什么也没写，无论是在虚拟主机中还是在服务器文件中。

任何人都可以提示可能出了什么问题吗？

最好的问候拉斯尼尔森

# php - 使用冒号表示函数中的字符串

> ID：10529231
> 
> 赞同：-2
> 
> 时间：2012-05-10T07:23:46.573
> 
> 标签：php, javascript

我正在使用一个 onclick 函数来存储一个字符

```
 $itemid=1;
 $storeid=3;
 $status='rejected';

  <a class="blue" href="javascript:void(0);" onclick="status('.$itemid.','.$storeid.','.$status.')" > 
```

但现在它在萤火虫中显示错误

```
 rejected is not defined

  status(1, 3, rejected); 
```

我的感觉是它应该通过字符串 - 拒绝为

```
status(1,3,'rejected') 
```

我试图表示如下所示的函数

```
 onclick="status('.$itemid.','.$storeid.','".$status."') 
```

但它不工作......任何人都可以为此建议一个解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:27:42.250

用于[`json_encode`](http://php.net/manual/en/function.json-encode.php)正确创建转义字符串：

```
onclick="status($itemid, $storeid, '.json_encode($status).")"; 
```

这需要 PHP 5.2.0 并且 的值`$status`是有效的 UTF-8，但这些都不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:52:56.687

这应该有效（注意反斜杠以转义引号）

```
<a class="blue" href="javascript:void(0);" onclick="status('.$itemid.','.$storeid.',\''.$status.'\')" > 
```

# bash - 如何使用默认参数执行 shell 脚本

> ID：10529237
> 
> 赞同：0
> 
> 时间：2012-05-10T07:24:05.923
> 
> 标签：bash, makefile

我不确定标题是否解释了真正的问题。

我有一个`load_config.sh`使用`bash`shell 的 shell 脚本。此脚本将加载配置。在开始加载配置之前，它会提示用户`"Do you want to load all configurations? Y/N ?"`。如果用户选择“N”，它会执行不同的工作并提示许多问题。

现在真正的问题是；我已添加此脚本以在 Makefile 中运行，如下所示。我的想法是在我说的时候加载所有配置`make install`，但是脚本会提示用户。我现在不希望脚本提示，它应该采用默认的“Y”并安装所有配置。我该如何做到这一点？

```
.load_cfg.done : %
        @echo -e "\n* Loading configuration $<"
        $(PIN_HOME)/cfg/load_config.sh $<
        touch $@ 
```

外壳：BASH 操作系统：LINUX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:38:11.500

使用该[`yes`](http://linux.die.net/man/1/yes)命令，以便将某个字符串发送到用户提示符中。

例如，假设您的脚本如下所示：

```
$ cat loadConfig.sh
#!/bin/bash
read -p "Load all configuration? " -n 1 -r
if [[ $REPLY =~ ^[Yy]$ ]]
then
   echo "Loading all configuration"
else
   echo "Not loading all configuration"
fi 
```

管道`yes`进入您的脚本：

```
$ yes | loadConfig.sh
Loading all configuration 
```

# asp.net-mvc-3 - 比较两行，asp.net mvc3 razor

> ID：10529240
> 
> 赞同：1
> 
> 时间：2012-05-10T07:24:15.480
> 
> 标签：asp.net-mvc-3, entity-framework

我正在使用实体框架。我有两条记录是使用主键“id”从表中检索的。现在我想比较这两个表记录数据并在我的视图中显示旧值和新值。现在我的问题是如何比较两条记录......我的表中有近 20 个属性，我从中检索数据。我们必须比较每一个属性，或者有没有最好的方法......任何人都可以帮我找到解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:50:52.977

```
public bool Equals<T>(T first, T second)
    {
        var f = new List<T>() {first};
        var s = new List<T>() {second};
        PropertyInfo[] propertyInfos = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Static);

        foreach (PropertyInfo propertyInfo in propertyInfos)
        {
            if (f.Select(x => propertyInfo.Name).FirstOrDefault() != s.Select(x => propertyInfo.Name).FirstOrDefault())
                return false;
        }
        return true;
    } 
```

按照 Kim R 的建议改为 Equals < T >（T first, T second）

试试看：）我还没有测试过

# hibernate - Grails GORM 查询以匹配多个关联对象

> ID：10529243
> 
> 赞同：0
> 
> 时间：2012-05-10T07:24:28.383
> 
> 标签：hibernate, grails, associations, grails-orm, h2

我无法找出一个 GORM 查询来匹配一个对象上的多个关联：

```
class Zoo {
    String name
    static hasMany = [animals:Animal]

    static namedQueries = {
        // SEARCH1 match any of a list of animals
        searchOr { searchAnimals ->
            or {
                searchAnimals.each { name ->
                    animals {
                        eq('name', name)
                    }
                }
            }
        }

        // SEARCH2 match ALL of a list of animals
        searchAnd { searchAnimals ->
            and {
                searchAnimals.each { name ->
                    animals {
                        eq('name', name)
                    }
                }
            }
        }
    }
}

class Animal {
    String name
} 
```

SEARCH1 很乐意将动物园与动物列表中的任何一个进行匹配，但是应该如何编写 SEARCH2 以获取在提供的列表中包含所有动物的动物园？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:29:14.270

我不知道 GORM，也不知道完整的解决方案，但我认为当前的 SEARCH2 查询存在什么问题以及可能有什么帮助。当前的 searchOr 是这样的：

```
WHERE ANIMAL.NAME = 'bear' 
   OR ANIMAL.NAME = 'bird' 
   OR ANIMAL.NAME = 'puma' 
```

这将运作良好。searchAnd 是这样的：

```
WHERE ANIMAL.NAME = 'bear' 
  AND ANIMAL.NAME = 'bird' 
  AND ANIMAL.NAME = 'puma' 
```

这不能给出正确的结果，因为任何单一的动物都不可能同时是熊、鸟和美洲狮。

你正在寻找的是这样的：

```
WHERE EXISTS (SELECT FROM ANIMAL A WHERE A.ZOO = Z.ID AND A.NAME = 'bear') 
  AND EXISTS (SELECT FROM ANIMAL A WHERE A.ZOO = Z.ID AND A.NAME = 'bird')
  AND EXISTS (SELECT FROM ANIMAL A WHERE A.ZOO = Z.ID AND A.NAME = 'puma') 
```

但是我对 GORM 的了解还不够，无法以这种方式制定查询。从我读到的有一种[分离标准](http://grails.org/doc/latest/guide/GORM.html#detachedCriteria)`exists`的方法。但也许这是不可能的，除非使用[Hibernate Query Language](http://grails.org/doc/latest/guide/GORM.html#hql)。

# asp.net-mvc - JSONP 在第二次调用 ASP.MVC 和 JQuery 解决方案时不返回结果

> ID：10529245
> 
> 赞同：0
> 
> 时间：2012-05-10T07:24:46.733
> 
> 标签：asp.net-mvc, jsonp

我已经在我的项目的这个链接上实现了具有 jsonp 功能的解决方案：http: [//blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx](http://blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx)

它在第一次通话时就像一个魅力，但在第二次通话时它没有响应？

你有什么主意吗？

我的json调用是：

```
$.ajax({
    type: "GET",
    url: '../../askjson',
    data: { name_startsWith: name },
    cache: false,
    dataType: "jsonp",
    success: function (data) { }
}); 
```

控制器是：

```
[HttpGet]
[JsonpFilter]
public JsonResult askjson(string name_startsWith)
{

    // do stuff

    return Json(resultView, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:19:45.243

嗨 Gorkem U 可以在 jsonp 上查看此代码项目解决方案

[http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:58:07.587

谢谢你们。

我已经跟踪了错误，它是一个 400 表示：请求超出了在`MaxQueryStringLength`.

所以我在我的 web.config 下添加了以下内容`<system.web>`

```
 <system.web>
    <httpRuntime maxUrlLength="10999" maxQueryStringLength="2097151" /> 
```

我也做了同样`<system.webServer>`的事情：

```
 <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxUrl="10999" maxQueryString="2097151"  /> 
```

我的问题已经解决了！

# c++ - 捕获所有异常并记录信息

> ID：10529253
> 
> 赞同：5
> 
> 时间：2012-05-10T07:25:07.870
> 
> 标签：c++, exception-handling, try-catch

我是一名使用 C++ 代码的 Java 程序员，需要一些异常处理方面的帮助。

我有以下结构的代码：

```
try{
...
}
catch( ... ) 
{
    log("Exception occurred");
} 
```

发生了异常，但 try 块确实很大，调试不是一种选择，因此我需要对代码进行最低限度的修改，以便为我提供有关异常的相关信息。

因此，我在现有的 catch 块之前添加了以下 catch 块（使用我的 Java 知识并参考 C++ 指南）：

```
catch(exception e)
{
    log(e.what());
} 
```

但是，我仍然收到旧消息 - “发生异常”。try 块中的代码包含许多低级函数，例如`strncpy, memcpy`等。

为什么这个`catch`块没有按预期工作？我可以做些什么来获取有关正在发生的异常以及发生在哪一行的信息，类似于 Java 如此容易提供的堆栈跟踪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T08:04:05.777

首先，你应该通过引用来捕获（通常是 const），所以你的新`catch`块应该是：

```
try {

} catch(std::exception const& e) {
    log(e.what());
} catch(...) {
    log("Exception occurred");
} 
```

其次，在 C++ 中你可以抛出任何值。甚至类型`int`。如果你的代码库中包含这样不精通的`throw`语句，我很同情你。

由于您来自 Java，因此我会检查您是否错误地使用了 a `throw new XXXX`，它会抛出一个指针（指向动态分配的值）而不是一个值。在`new`C++ 中是不必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T07:27:55.637

可能是因为这些异常不是从`exception`类派生的。在 C++ 中，任何类型都可以是异常，例如`string`,`int`等。无论如何，如果您想捕获`exception`，您可能应该捕获对`exception &`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T07:28:21.160

您必须调试并确定异常是否为 C++ 异常。
请注意，除以`0`etc 是 C++ 不支持的运行时异常，因此它可以是任何字面意思。

一个包罗万象的处理程序只会捕获有效的 C++ 异常，而不是所有异常（可能很多）。

# iphone - 如何在iphone的mapview中绘制两个地方之间的线？

> ID：10529258
> 
> 赞同：3
> 
> 时间：2012-05-10T07:25:19.490
> 
> 标签：iphone, mkmapview

```
- (MKOverlayView *)mapView:(MKMapView *)mapView12 viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *overlayView = nil;

    if (nil == overlayView) 
    {       
        overlayView = [[[MKPolylineView alloc] initWithOverlay:overlay] autorelease];

        overlayView.strokeColor = [UIColor blueColor];
        overlayView.lineWidth   = 5.0;  
    }

    return overlayView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:02:24.553

我已经在 mapview 上制作了应用程序。因此，如果您想获得正确的路径，则必须使用 KMLViewer 或使用 GoogleMaps 。在 google Maps 中，您可以执行此代码

NSString *urlstring=[NSString stringWithFormat:@"http://maps.google.com/?saddr=%f,%f&daddr=

%f,%f",sourcelocation.latitude,sourcelocation.longitude,destinationlocation.latitude,destin

位置.经度];

```
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:urlstring]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:34:32.840

我想，你想在车站之间画出正确的线，然后使用 KMLparser。

使用它的子类，然后实现这个方法：

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    return [kml viewForOverlay:overlay];
}

 //  add the pin in mapview

    -(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
    {
        return [kml viewForAnnotation:annotation];
    } 
```

# c# - 从字符串名称返回 FontStyle

> ID：10529259
> 
> 赞同：5
> 
> 时间：2012-05-10T07:25:20.880
> 
> 标签：c#, parsing, fonts

我想编写一个函数，它将返回 FontStyle 并将字符串作为参数

```
FontStyle f = function ("Italic"); // FontStyles.Italic 
```

我不想写 Switch case 或 if else 语句来做同样的事情。

可以为不区分大小写的字符串完成吗？

```
FontStyle f = function ("italic");
FontStyle f = function ("itAlic"); 
```

应该返回相同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T09:31:34.247

在 C# 中，它只是一个枚举。所以你可以像这样转换它：

```
FontStyle f = (FontStyle)Enum.Parse(typeof(FontStyle), "Italic", true); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T07:38:27.580

您可以为此使用反射：

```
var propertyInfo = typeof(FontStyles).GetProperty("Italic",
                                                  BindingFlags.Static |
                                                  BindingFlags.Public |
                                                  BindingFlags.IgnoreCase);
FontStyle f = (FontStyle)propertyInfo.GetValue(null, null); 
```

# c# - 在 C# windows 窗体中读取 xml(.rtdl) 文件时路径中的非法字符

> ID：10529266
> 
> 赞同：0
> 
> 时间：2012-05-10T07:26:11.283
> 
> 标签：c#, xml, visual-studio-2010, parsing, xmlreader

在 Windows 窗体中，我在面板中有一些标签，我想显示从`listBox1`文件夹加载（.rtdl）文件集合的静态值。

当用户选择每个时，我想`labels`在面板中显示相应的属性值。

填充 listBox1 的代码：

```
private void Form1_Load(object sender, EventArgs e)
        {
            PopulateListBox(listBox1, @"C:\TestLoadFiles\", "*.rtdl");
        }

        private void PopulateListBox(ListBox lsb, string Folder, string FileType)
        {
            DirectoryInfo dinfo = new DirectoryInfo(Folder);
            FileInfo[] Files = dinfo.GetFiles(FileType);
            foreach (FileInfo file in Files)
            {
                lsb.Items.Add(file);
            }
        } 
```

从 listBox1 读取文件的代码：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            FileInfo file = (FileInfo)listBox1.SelectedItem;
            DisplayFile(file.FullName);

            string path = (string)listBox1.SelectedItem;
            DisplayFile(path);
        }

        private void DisplayFile(string path)
        {
            string xmldoc = File.ReadAllText(path);

            using (XmlReader reader = XmlReader.Create(xmldoc))
            {

                while (reader.MoveToNextAttribute())
                {
                    switch (reader.Name)
                    {
                        case "description":
                            if (!string.IsNullOrEmpty(reader.Value))
                                label5.Text = reader.Value; // your label name
                            break;
                        case "sourceId":
                            if (!string.IsNullOrEmpty(reader.Value))
                                label6.Text = reader.Value; // your label name
                            break;
                        // ... continue for each label
                    }
                }
            }
        } 
```

当我选择文件时，它会`illegal characters in path`在`using (XmlReader reader = XmlReader.Create(xmldoc))`.

请告诉我这里有什么问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:30:56.447

`XmlReader.Create(string)`将*路径*作为输入（或流），而不是实际的文本字符串 - 请参见此处：http: [//msdn.microsoft.com/en-us/library/w8k674bf.aspx](http://msdn.microsoft.com/en-us/library/w8k674bf.aspx)。

所以只需删除这一行：

```
string xmldoc = File.ReadAllText(path); 
```

并`DisplayFile`改变这一点：

```
using (XmlReader reader = XmlReader.Create(xmldoc)) 
```

对此：

```
using (XmlReader reader = XmlReader.Create(path)) 
```

* * *

也就是说，你正在以一种非常困难的方式做事。对于您要实现的目标，LINQ to XML 要简单得多。

试试这个`DisplayFile`：

```
private void DisplayFile(string path)
{
    var doc = XDocument.Load(path);
    var ns = doc.Root.GetDefaultNamespace();    
    var conn = doc.Root.Element(ns + "connection");

    label5.Text = conn.Element(ns + "description").Value;
    label6.Text = conn.Element(ns + "sourceId").Value;

    // and so on
} 
```

# excel - 无法单击 ActiveX 控件和表单控件 Excel 2010

> ID：10529269
> 
> 赞同：1
> 
> 时间：2012-05-10T07:26:24.403
> 
> 标签：excel, excel-2010, vba

我有一个工作簿，其中包含 ActiveX 控件按钮和表单控件按钮，并且将宏分配给这些控件。这些控件在 excel 2007 中运行良好，但是当我在 excel 2010 中打开此工作簿时，我无法单击这些控件。每当我单击任何按钮时，它都会进入设计模式。有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:14:46.477

Neha 您的 Excel 设置阻止 ActiveX 按钮变为活动状态。做这个

点击`File Tab`| `Options`. 在`Trust Center`打开的对话框中单击 ，然后单击`Trust Center Setting`。转到`ActiveX Setting`并单击选项按钮`Prompt Me before enabling all controls with minimal restrictions`

关闭文件并重新打开它。您将收到`Yellow Popup Bar`要求您启用 ActiveX 的提示。点击是，你就完成了:)

# java - 在 Java 中将 InputStream 转换为 FileItem

> ID：10529270
> 
> 赞同：0
> 
> 时间：2012-05-10T07:26:31.130
> 
> 标签：java

如何在 Java 中从 InputStream 转换为 FileItem？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:06:23.497

这是一个工作示例。请注意，您必须使用 InputStream 更改示例中的 InputStream，并且您可能还想更改 work/tmp dir() 的位置。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItem;

public class TestFile {

    public static void main(String args[]) throws IOException {
        // This is a sample inputStream, use your own.
        InputStream inputStream = new FileInputStream("c:\\Kit\\Apache\\geronimo-tomcat6-javaee5-2.1.6\\README.txt");

        int availableBytes = inputStream.available();

        // Write the inputStream to a FileItem
        File outFile = new File("c:\\tmp\\newfile.xml"); // This is your tmp file, the code stores the file here in order to avoid storing it in memory
        FileItem fileItem = new DiskFileItem("fileUpload", "plain/text", false, "sometext.txt", availableBytes, outFile); // You link FileItem to the tmp outFile 
        OutputStream outputStream = fileItem.getOutputStream(); // Last step is to get FileItem's output stream, and write your inputStream in it. This is the way to write to your FileItem. 

        int read = 0;
        byte[] bytes = new byte[1024];
        while ((read = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, read);
        }

        // Don't forget to release all the resources when you're done with them, or you may encounter memory/resource leaks.
        inputStream.close();
        outputStream.flush(); // This actually causes the bytes to be written.
        outputStream.close();

        // NOTE: You may also want to delete your outFile if you are done with it and dont want to take space on disk.
    }
} 
```

# image - 如何访问Moodle中moodledata文件夹中的文件

> ID：10529273
> 
> 赞同：0
> 
> 时间：2012-05-10T07:26:35.810
> 
> 标签：image, file-upload, upload, moodle

我是穆德尔的新手。我在插件中创建了一个文件上传。该文件将被上传到里面`/moodledata/logoimage`。我不知道如何在 UI 中显示文件。

我试图`/file.php/logoimage/logo1.jpg`在浏览器中显示。

它说无效的课程 ID。如果我访问任何图像`/file.php/7/logoimage/logo1.jpg`，例如课程 ID 为 7，则该图像有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:08:38.123

我不太明白您要做什么，并且我认为您不想将文件存储在moodledata根目录中，但是您必须注意的第一件事是文件管理从1.9版彻底更改为2.x .

您应该在 Moodle 文档 (http://docs.moodle.org) 和论坛 (http://moodle.org/forums/) 中查找信息。

Moodle 社区论坛非常活跃，我相信您会很快得到问题的答案。

# c++ - 在 MXN 矩阵中查找 amxn 子矩阵的最快方法

> ID：10529278
> 
> 赞同：18
> 
> 时间：2012-05-10T07:26:46.217
> 
> 标签：c++, c, algorithm, matrix

我正在考虑一种在更大的矩阵 M 中查找子矩阵 m 的快速方法。我还需要识别部分匹配项。

我能想到的几种方法是：

1.  优化正常的暴力破解以仅处理增量行和列。
2.  可能会将 Rabin-karp 算法扩展到二维，但不确定如何处理部分匹配。

我相信这是图像处理中经常遇到的问题，如果有人可以倾注他们的投入或将我指向有关此主题的资源/论文，我将不胜感激。

**编辑：** 较小的例子：

更大的矩阵：
1 2 3 4 5
4 5 6 7 8
9 7 6 5 2

较小的矩阵：
7 8
5 2

结果：（行：1 列：3）

在 (1, 3) 处有资格作为部分匹配的较小矩阵的示例：
7 9
5 2

如果超过一半的像素匹配，则视为部分匹配。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:10:03.663

我建议对“二维模式匹配算法”进行互联网搜索。你会得到很多结果。我将仅链接 Google 上的第一次点击，[这是一篇](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.45.581&rep=rep1&type=pdf)针对您的问题提出算法的论文。

您还可以查看论文末尾的引文，以了解其他现有算法。

摘要：

> 提出了一种在二维nxn文本中搜索二维mxm模式的算法。它执行的平均比较少于文本大小：n^2/m 使用 m^2 额外空间。基本上，它仅在文本的 n/m 行上使用多个字符串匹配。它最多运行 2n^2 次，并接近许多模式的最佳 n^2 次。它稳步扩展到具有类似最坏情况的与字母无关的算法。实验结果包含在实用版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:27:08.380

如果您愿意对矩阵进行预处理并且您对同一矩阵有很多查询，则有非常快速的算法。

查看多媒体数据库研究小组（波恩大学克劳森教授）关于代数数据库的论文。看看这篇论文，例如：[http ://www-mmdb.iai.uni-bonn.de/download/publications/sigir-03.pdf](http://www-mmdb.iai.uni-bonn.de/download/publications/sigir-03.pdf)

基本思想是推广倒排列表，因此它们使用任何类型的代数变换，而不是像普通倒排列表那样仅在一个方向上移动。

这意味着只要您需要对输入数据进行的修改可以通过代数方式建模，这种方法就可以工作。这特别是可以检索在任意数量的维度中翻译、旋转、翻转等的查询。

该论文主要针对音乐数据展示这一点，因为这是他们的主要研究兴趣，但您可能会找到其他人，它们也展示了如何将其调整为图像数据（或者您可以尝试自己调整它，如果您理解原理很简单）。

**编辑**：

如果您正确定义它们，这个想法也适用于部分匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:41:29.877

如果您只需要将一个小矩阵与一个大矩阵进行匹配，则无法快速完成此操作。但是如果你需要对大矩阵做很多小矩阵，那么就对大矩阵进行预处理。

一个简单的例子，精确匹配，许多 3x3 矩阵与一个巨型矩阵。

制作一个新的“匹配矩阵”，大小与“大矩阵”相同，对于大矩阵中的每个位置，为大矩阵中的每个 x,y 到 x+3,y+3 计算一个 3x3 散列。现在您只需扫描匹配矩阵以查找匹配的哈希值。

您可以使用专门的散列函数实现部分匹配，这些函数为具有相同部分匹配属性的事物提供相同的散列。棘手。

如果您想进一步加快速度并为其提供内存，请为匹配矩阵创建一个哈希表，并在哈希表中查找哈希值。

3x3 解决方案适用于任何 3x3 或更大的测试矩阵。您不需要完美的哈希方法——您只需要能够拒绝大多数错误匹配的方法，然后对哈希表中的潜在匹配进行完全匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-06T15:30:43.220

我认为你不能只用某种方法猜测子矩阵在哪里，但你可以优化你的搜索。

例如，给定一个矩阵 A MxN 和一个子矩阵 B mxn，你可以这样做：

```
SearchSubMatrix (Matrix A, Matrix B)

answer = (-1, -1)

Loop1:
for i = 0 ... (M-m-1)
|
|   for j = 0 ... (N-n-1)
|   | 
|   |   bool found = true
|   |
|   |   if A[i][j] = B[0][0] then
|   |   |
|   |   |   Loop2:
|   |   |   for r = 0 ... (m-1)
|   |   |   |   for s = 0 ... (n-1)
|   |   |   |   |   if B[r][s] != A[r+i][s+j] then
|   |   |   |   |   |   found = false
|   |   |   |   |   |   break Loop2
|   |
|   |   if found then
|   |   |   answer = (i, j)
|   |   |   break Loop1
|
return answer 
```

这样做，由于子矩阵的大小，您将减少搜索。

```
Matrix         Submatrix         Worst Case:
1 2 3 4           2 4            [1][2][3] 4
4 3 2 1           3 2            [4][3][2] 1
1 3 2 4                          [1][3]{2  4}
4 1 3 2                           4  1 {3  2}

                                 (M-m+1)(N-n+1) = (4-2+1)(4-2+1) = 9 
```

虽然这是`O(M*N)`，但它永远不会看`M*N`时间，除非您的子矩阵只有 1 个维度。

# haskell - 是否有充分的理由使用 unsafePerformIO？

> ID：10529284
> 
> 赞同：33
> 
> 时间：2012-05-10T07:27:28.273
> 
> 标签：haskell

这个问题说明了一切。更具体地说，我正在编写与 C 库的绑定，我想知道我可以使用哪些 c 函数`unsafePerformIO`。我认为`unsafePerformIO`与任何涉及指针的东西一起使用是一个很大的禁忌。

很高兴看到其他也可以使用的情况`unsafePerformIO`。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T07:49:45.800

此处无需涉及 C。该`unsafePerformIO`功能可以在任何情况下使用，

1.  你知道它的使用是安全的，并且

2.  您无法使用 Haskell 类型系统证明其安全性。

例如，您可以使用以下命令创建一个 memoize 函数`unsafePerformIO`：

```
memoize :: Ord a => (a -> b) -> a -> b
memoize f = unsafePerformIO $ do
    memo <- newMVar $ Map.empty
    return $ \x -> unsafePerformIO $ modifyMVar memo $ \memov ->
        return $ case Map.lookup x memov of
            Just y -> (memov, y)
            Nothing -> let y = f x
                       in (Map.insert x y memov, y) 
```

（这不是我的想法，所以我不知道代码中是否存在明显的错误。）

memoize 函数使用并修改了一个 memoization 字典，但由于函数*作为一个整体*是安全的，你可以给它一个纯类型（不使用`IO`monad）。但是，您必须使用它`unsafePerformIO`来执行此操作。

**脚注：**当涉及到 FFI 时，您负责向 Haskell 系统提供 C 函数的类型。您可以通过简单地从类型中`unsafePerformIO`省略来实现的效果。`IO`FFI 系统本质上是不安全的，因此使用`unsafePerformIO`并没有太大的区别。

**脚注 2：**使用 的代码中通常存在*非常细微的*错误`unsafePerformIO`，该示例只是可能使用的草图。特别是，`unsafePerformIO`与优化器的交互可能很差。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-10T09:15:32.520

在 FFI 的特定情况下，`unsafePerformIO`用于调用数学函数，即输出*仅*取决于输入参数，并且每次使用相同的输入调用函数时，它都会返回相同的输出。此外，该函数不应有副作用，例如修改磁盘上的数据或改变内存。

例如，大多数函数`<math.h>`都可以用 调用`unsafePerformIO`。

你是对的`unsafePerformIO`，指针通常不会混合。例如，假设您有

```
p_sin(double *p) { return sin(*p); } 
```

即使您只是从指针中读取值，使用`unsafePerformIO`. 如果你 wrap `p_sin`，多个调用可以使用指针参数，但得到不同的结果。有必要保留该函数`IO`以确保它相对于指针更新正确排序。

这个例子应该清楚说明这是不安全的一个原因：

```
# file export.c

#include <math.h>
double p_sin(double *p) { return sin(*p); }

# file main.hs
{-# LANGUAGE ForeignFunctionInterface #-}

import Foreign.Ptr
import Foreign.Marshal.Alloc
import Foreign.Storable

foreign import ccall "p_sin"
  p_sin :: Ptr Double -> Double

foreign import ccall "p_sin"
  safeSin :: Ptr Double -> IO Double

main :: IO ()
main = do
  p <- malloc
  let sin1  = p_sin p
      sin2  = safeSin p
  poke p 0
  putStrLn $ "unsafe: " ++ show sin1
  sin2 >>= \x -> putStrLn $ "safe: " ++ show x

  poke p 1
  putStrLn $ "unsafe: " ++ show sin1
  sin2 >>= \x -> putStrLn $ "safe: " ++ show x 
```

编译后，该程序输出

```
$ ./main 
unsafe: 0.0
safe: 0.0
unsafe: 0.0
safe: 0.8414709848078965 
```

即使指针引用的值在对“sin1”的两次引用之间发生了变化，但不会重新计算表达式，从而导致使用过时的数据。由于`safeSin`（因此`sin2`）在 IO 中，程序被迫重新计算表达式，因此使用更新后的指针数据。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-10T08:48:25.333

显然，如果它永远不应该被使用，它就不会出现在标准库中。;-)

您可能会使用它的原因有很多。示例包括：

*   初始化全局可变状态。（你是否应该首先*拥有*这样的东西是另一个完全*不同*的讨论......）

*   延迟 I/O 就是使用这个技巧来实现的。（同样，惰性 I/O 是否是一个好主意首先是值得商榷的。）

*   该`trace`函数使用它。（再一次，事实证明它`trace`没有你想象的那么有用。）

*   也许最重要的是，您可以使用它来实现引用透明但内部使用不纯代码实现的数据结构。通常`ST`monad 会让你这样做，但有时你需要一点`unsafePerformIO`.

Lazy I/O 可以看作是最后一点的特例。记忆也可以。

例如，考虑一个“不可变的”、可增长的数组。在内部，您可以将其实现为指向*可变*数组的纯“句柄”。句柄保存数组的用户可见大小，但实际的底层可变数组大于此大小。当用户“追加”到数组时，会返回一个新的句柄，具有新的更大的大小，但追加是通过改变底层可变数组来执行的。

你不能用`ST`monad 做到这一点。（或者更确切地说，你可以，但它仍然需要`unsafePerformIO`。）

请注意，要正确处理这类事情是非常棘手的。如果你错了，类型检查器也不会发现。（就是这样`unsafePerformIO`做的；它使类型检查器无法检查您是否正确执行此操作！）例如，如果您附加到“旧”句柄，则正确的做法是复制底层的可变数组。忘记这一点，你的代码会表现*得很奇怪*。

现在，回答你真正的问题：没有特别的理由为什么“没有指针的任何东西”应该是禁止的`unsafePerformIO`。当询问是否使用此功能时，*唯一*有意义的问题是：最终用户可以观察到这样做的任何副作用吗？

如果它唯一要做的就是在某个用户无法从纯代码中“看到”的地方创建一些缓冲区，那很好。如果它写入磁盘上的文件......不太好。

HTH。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-10T23:47:47.983

在 haskell 中实例化全局可变变量的标准技巧：

```
{-# NOINLINE bla #-}
bla :: IORef Int
bla = unsafePerformIO (newIORef 10) 
```

如果我想防止在我提供的函数之外访问它，我还使用它来关闭全局变量：

```
{-# NOINLINE printJob #-}
printJob :: String -> Bool -> IO ()
printJob = unsafePerformIO $ do
  p <- newEmptyMVar
  return $ \a b -> do
              -- here's the function code doing something 
              -- with variable p, no one else can access. 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-10T17:20:34.360

在我看来，各种`unsafe*`非函数真的应该只在你想做一些尊重引用透明性但其实现需要扩充编译器或运行时系统以添加新的原始功能的情况下使用。使用不安全的东西比修改语言实现更容易、更模块化、可读、可维护和敏捷。

FFI 工作通常本质上需要你做这种事情。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-13T23:39:51.523

当然。[您可以在此处](https://hackage.haskell.org/package/fast-arithmetic-0.4.0.0/docs/src/Numeric.Combinatorics.html#choose)查看一个真实示例，但通常`unsafePerformIO`可用于任何碰巧有副作用的纯函数。`IO`即使函数是纯函数（例如计算阶乘），monad 仍可能需要跟踪效果（例如，在计算值后释放内存）。

> 我想知道我可以将 unsafePerformIO 与哪些 c 函数一起使用。我认为将 unsafePerformIO 与涉及指针的任何内容一起使用是一个很大的禁忌。

依靠！`unsafePerformIO`将完全执行操作并消除所有惰性，但这并不意味着它会破坏您的程序。一般来说，Haskellers 更喜欢`unsafePerformIO`只出现在纯函数中，因此您可以将它用于例如科学计算的结果，但可能不能用于文件读取。

# c# - MapReduce 输出 C# 读取 mongoDB

> ID：10529285
> 
> 赞同：2
> 
> 时间：2012-05-10T07:27:28.507
> 
> 标签：c#, mongodb, serialization, mongodb-.net-driver

```
public class myType
{
public int key1;
public int key2;
public int val1;
public int val2;
public int val3;
}; 
```

当我将`myType`对象插入集合时，阅读没有问题。只是：

```
collection.FindAs<myType>(query); 
```

获取对象：

```
"key1":key1, "key2":key2, "val1":val1, "val2":val2, "val3":val3 
```

但是在 mapreduce（键被构造为两个字段的组合）之后，输出集合的结构略有修改。就像是

```
"_id" {"key1" : key1, "key2": key2}, "value" : {"val1":val1, "val2":val2, "val3":val3} 
```

从输出集合中读取对象的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:06:31.500

拥有输出集合后，您可以像查询任何其他集合一样查询它。但是，由于结构不同，您将无法使用相同的 C# 类来执行此操作。因此，您要么需要将其作为 BsonDocument 阅读，要么创建几个新类，如下所示：

```
public class Keys
{
  [BsonElement("key1")]
  public int Key1;
  [BsonElement("key2")]
  public int key2;
}

public class values
{
  [BsonElement("val1")]
  public int Val1;
  [BsonElement("val1")]
  public int Val2;
  [BsonElement("val1")]
  public int Val3;
}

public class MapReduceOutput
{
  [BsonId]
  public Keys Keys;
  [BsonElement("values")]
  public Values Values;
} 
```

然后你可以这样做：

```
collection.FindAs<MapReduceOutput>(query); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:40:07.507

对每个通过 m/r 结果来说都很简单，应该可以快速工作（至少比自动反序列化更快）：

```
var result = RunMapReduce(..);
foreach (var item in result.InlineResults)
{
   var id = item["_id"].AsBsonDocument;
   var value = item["value"].AsBsonDocument;

   var obj = new myType();
   obj.key1 = id["key1"].AsInt32;
   //and so on
} 
```

# cakephp - CakePHP 表单上的多个复选框 (HABTM) 的验证问题

> ID：10529291
> 
> 赞同：3
> 
> 时间：2012-05-10T07:27:42.393
> 
> 标签：cakephp

**精简版**

我在表格上有一些 HABTM 复选框。验证工作正常（至少需要检查一个复选框才能通过验证），但没有按应有的方式生成 CakePHP 错误消息 div。

**长版**

我有一个允许用户填写他们的姓名和电子邮件地址，然后从他们希望收到的小册子（复选框）列表中进行选择。

表格如下所示：

```
<?php
echo $this->Form->create('Request',array('action' => 'index'));
echo $this->Form->input('id');
echo $this->Form->input('name');
echo $this->Form->input('email');
echo $this->Form->input('Brochure',array(
        'label' => __('Information Required:',true),
        'type' => 'select',
        'multiple' => 'checkbox',
        'options' => $list,
        'selected' => $this->Html->value('Brochure.Brochure'),
));
echo $this->Form->submit('Submit');
echo $this->Form->end();
?> 
```

在我的控制器中，`$list`设置如下：

```
$this->Request->Brochure->find('list',array('fields'=>array('id','name'))); 
```

[在 Stack Overflow 上的 CakePHP 中的 HABTM 表单验证中](https://stackoverflow.com/questions/2044102/habtm-form-validation-in-cakephp)阅读了第二个答案（由 user448164 发布）后，我将我的请求模型设置如下：

```
<?php

class Request extends AppModel {

var $name = 'Request';

function beforeValidate() {
    foreach($this->hasAndBelongsToMany as $k=>$v) {
        if(isset($this->data[$k][$k]))
        {
            $this->data[$this->alias][$k] = $this->data[$k][$k];
        }
    }
}

var $validate = array(
    'name' => array(
        'rule' => 'notEmpty',
        'message' => 'Please enter your full name'
    ),
    'email' => array(
        'rule' => 'email',
        'message' => 'Please enter a valid email address'
    ),
    'Brochure' => array(
        'rule' => array('multiple', array('min' => 1)),
        'message' => 'Please select 1'
    ),
);
?> 
```

这实际上工作得很好 99%。如果未选中任何复选框，则验证将失败。但是，唯一的问题是 Cake 没有在 上设置“错误”类`<div>`，也没有`<div class="error-message">Please select 1</div>`按应有的方式创建。

对于姓名和电子邮件，没有问题 - 错误 div 正在正确创建。

因此，澄清一下，验证**适用**于我的 HABTM 复选框。唯一的问题是没有生成错误 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T21:30:10.700

我将其发布在这里，因为这实际上是一个比您发现[的相关问题更好的问题。](https://stackoverflow.com/questions/2044102/habtm-form-validation-in-cakephp)

我正用头撞墙，试图处理使验证错误显示在页面中的相同问题。我正在使用 CakePHP v1.2 并且遇到了类似的问题，尽管我实际上已经将 HABTM 拆分为单独的表，即`Request->BrochuesRequest->Brochure`. 这是因为我不能让它随意删除和重新添加连接表行。

首先，我认为[从您的链接问题中接受的答案](https://stackoverflow.com/a/2044739/327074)假设您在触发呼叫`save / saveAll`时正在执行`beforeValidate`，但是我是通过`validates`呼叫执行的。不同之处在于您需要先调用该`Request->set`方法。这是 Jonathan Snook 的一篇关于[Multiple Validation Sets](http://snook.ca/archives/cakephp/multiple_validation_sets_cakephp/)的文章，向我指出了这个问题。

第二个问题实际上是让错误消息出现在`$field`您调用时使用的值`invalidate`。多年来，我一直在包括模型和字段，假设这是它与输入的无效调用匹配的方式，即你有`$form->input('BrochuresRequest.brochures_id')`你需要`$this->BrochuresRequest->invalidate('BrochuresRequest.brochures_id')`的 .

但是，您只想这样做是**错误**`$this->BrochuresRequest->invalidate('brochures_id')`的。

```
<?php   
// requests/add view
echo $form->input('BrochuresRequest.brochures_id', array('multiple' => true));

// requests_controller
function add() {
    if (!empty($this->data)) {
        $this->Request->create();
        // critical set to have $this->data 
        // for beforeValidate when calling validates
        $this->Request->set($this->data); 
        if ($this->Request->validates()) {
            $this->Request->saveAll($this->data);
        }
    }
}

// request model
function beforeValidate() {
    if (count($this->data['BrochuresRequest']['brochures_id']) < 1) {
        $this->invalidate('non_existent_field'); // fake validation error on Project
        // must be brochures_id and not BrochuresRequest.brochures_id
        $this->BrochuresRequest->invalidate('brochures_id', 'Please select 1');
        return false;
    }
    return true;
}
?> 
```

我在途中捡到的其他一些东西：

1.  视图中不需要[单独的 $form->error](https://stackoverflow.com/a/13841653/327074)
2.  我一辈子都无法让“多重”验证规则在模型中起作用
3.  接受的[答案](https://stackoverflow.com/a/2044739/327074)会检查 isset，但我认为这不是必需的，并且掩盖了没有`$this->data`通过的问题。
4.  `beforeValidate`如果您希望它阻止任何保存操作，则应该返回 false 。

# c - 使用指定主机名的 ocilib 连接 oracle

> ID：10529303
> 
> 赞同：0
> 
> 时间：2012-05-10T07:28:16.713
> 
> 标签：c, oracle, oracle-call-interface

如何使用`OCILIB`配置的主机名和端口号连接 Oracle。

默认情况下，它以 localhost 作为主机名。

我还签入了该`OCI_ConnectionCreate`功能，但它不要求提供主机名和端口号：

```
 cn = OCI_ConnectionCreate("db", "usr", "pwd", OCI_SESSION_DEFAULT); 
```

因为我的要求是连接驻留在不同服务器上的 oracle 服务器，而我的应用程序在不同的服务器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:26:54.110

在 SF.NET 上的 OCILIB 论坛上的原始主题中回答的问题 [链接到主题](http://sourceforge.net/projects/orclib/forums/forum/470801/topic/5260257)

# javascript - 使用 jQuery 延迟对象串行处理 jQuery 集合/数组

> ID：10529305
> 
> 赞同：2
> 
> 时间：2012-05-10T07:28:21.393
> 
> 标签：javascript, jquery, jquery-deferred

我有一个 jQuery 对象数组。如果它们是可见的，我想与数组中的每个项目进行交互。我的流程是这样的：

1.  创建一个数组，其元素都是 jQuery 对象。
2.  对象可能可见也可能不可见。
3.  从数组中的第一个元素开始。
4.  等待项目可见，时间是任意的。说 3 秒。如果变得可见，则转到步骤 5，否则从“播放”功能返回。// 更新
5.  单击该项目。
6.  重复 4-5 直到没有更多的项目可以交互。

**更新（用例说明）：**
基本上我正在做的是对数组执行一系列串行操作。ABCD，按顺序。但是，当 A 创建 B 的元素并且 B 已经被检查是否可见时，可能会出现问题。它不会被点击。

我一直在研究 jQuery 的延迟对象，但不知道如何实现它。如何实施？有没有使用延迟对象的替代方法？

根据@jmort 的建议，我将附上我目前拥有的内容。

```
var play = function() {
    var dfds = []; 
    $(steps).each(function(i, v) {
        dfds[i] = $.Deferred();
    }); 

    $.when.apply(null, dfds).then(function(){
        console.log('all done');
    }); 

}; 
```

假设 steps 等于 jQuery 对象数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:37:18.993

它可以很容易地完成：

```
var play = function() {
    $(steps).filter(':visible').click();
}; 
```

**更新：**

```
var play = function() {
    $(steps).each(function() {
        $(this).filter(':visible').click();
    });
};​ 
```

# objective-c - 不见了

> ID：10529307
> 
> 赞同：0
> 
> 时间：2012-05-10T07:28:34.463
> 
> 标签：objective-c, macos, cocoa, xcode4.2

我从 Xcode 3.2.x 迁移到 Xcode 4.0
我现有的项目正在 Xcode 3.2 中编译，但是当我迁移到 Xcode 4.0 时，文件中出现错误，

ApplicationName_prefix.pch 和说

文件未找到，

我相信通常这个文件应该在

System/Library/Frameworks/Cocoa.framework/Headers

但在我的机器中，这个文件夹“标题”丢失了，

这是否意味着，Xcode 4.0 没有正确安装，

PN：一些项目编译正确，而一些项目给出了这种问题。

如果我需要重新安装，我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:38:11.820

检查（验证）您的项目/目标构建设置并确保选择了正确的 SDK。

另外，检查您的 xcode-select 路径：

```
term> xcode-select -print-path
/Applications/Xcode.app/Contents/Developer 
```

Xcode 3.x 的 IIRC 这是“/Developer”。

# php - PHP 通讯系统

> ID：10529312
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:28:52.377
> 
> 标签：php, email, newsletter

我需要创建一个 PHP 通讯系统来检测电子邮件何时被阅读、转发、打印和删除。然后捕获响应并将其插入数据库中。

我应该如何处理这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:38:20.280

您可以得到的唯一反馈来自电子邮件客户端（通常称为*信标*）加载的图片，它只能告诉您该特定客户端加载了该图片。有些人虽然阅读了电子邮件，但不会加载图像，并且您无法对转发、打印或删除 afaik 做任何事情。

> **在电子邮件中**
> 
> Web bug 经常用于垃圾邮件（发送未经请求的商业电子邮件）作为“ping”的一种方式，以在删除垃圾邮件之前找到哪些垃圾邮件收件人打开（并且可能已阅读）。
> 
> 可以通过以下方式禁用电子邮件中的跟踪：
> 
> *   通过关闭 HTML 显示并仅显示文本可以避免许多 Web 错误。
> *   在仍然使用 HTML 的同时关闭图像的显示可能仍然允许使用其他技术。
> 
> [https://en.wikipedia.org/wiki/Web_bug#In_email](https://en.wikipedia.org/wiki/Web_bug#In_email)

# xml - 做什么 意思是

> ID：10529313
> 
> 赞同：0
> 
> 时间：2012-05-10T07:28:57.230
> 
> 标签：xml, xsd, xsd-validation

谁能解释一下我的xsd中的以下行是什么意思？

```
<xsd:include schemaLocation="Some_schema.xsd" /> 
```

它是如何使用的？XSD 非常大，所以我不能在这里粘贴它。任何人都可以使用以下内容给出一个简单的示例来解释如何集成两个模式？

```
 <xsd:include schemaLocation="Some_schema.xsd" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:58:44.300

它与任何编程语言中的“包含”几乎相同：这意味着，将“someSchema.xsd”中的模式文档的内容视为该模式文档的一部分。详细的语义更微妙，但这是简单的解释。

# powershell - 将新文件夹添加到某个位置时触发脚本

> ID：10529315
> 
> 赞同：3
> 
> 时间：2012-05-10T07:29:06.853
> 
> 标签：powershell, automation

我正在自动化一个过程，并且已经为此制作了一个 powershell 脚本。现在我需要做一些事情，每次将新文件夹添加到特定位置（即删除新版本）时都会调用该脚本。我应该为此使用什么。WCF 太多了吗？如果没有，有任何线索吗？任何有用的链接。或者另一个powershell脚本更好？

请记住，我也需要检查子文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:03:58.243

个人我会使用 System.IO.FileSystemWatcher

```
$folder = 'c:\myfoldertowatch'
$filter = '*.*'                             
$fsw = New-Object IO.FileSystemWatcher $folder, $filter 
$fsw.IncludeSubdirectories = $true              
$fsw.NotifyFilter = [IO.NotifyFilters]'DirectoryName' # just notify directory name events
$onCreated = Register-ObjectEvent $fsw Created -SourceIdentifier FileCreated -Action {  ... do my stuff here } # and only when is created 
```

使用它来停止观看事件

```
Unregister-Event -SourceIdentifier FileCreated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:19:32.150

试试这个：

```
$fsw = New-Object System.IO.FileSystemWatcher -Property @{
    Path = "d:\temp"
    IncludeSubdirectories = $true #monitor subdirectories within the specified path
}

$event = Register-ObjectEvent -InputObject $fsw –EventName Created -SourceIdentifier fsw -Action {

    #test if the created object is a directory
    if(Test-Path -Path $EventArgs.FullPath -PathType Container)
    {
        Write-Host "New directory created: $($EventArgs.FullPath)"  
        # run your code/script here
    }
} 
```

# asp.net-mvc-3 - 删除 devexpress 网格中的列

> ID：10529320
> 
> 赞同：0
> 
> 时间：2012-05-10T07:29:43.140
> 
> 标签：asp.net-mvc-3, devexpress

我想在不使用自定义窗口的情况下删除 devexpress 网格中的列。例如：通过将列从网格中删除，或者列上将有一个 X 按钮将其删除。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:04:42.920

可以将特定的 ASPxGridView 列拖放到自定义窗口中或以编程方式隐藏列。请参阅以下示例：

[E3812](http://www.devexpress.com/Support/Center/e/E3812.aspx)

[E2023](http://www.devexpress.com/Support/Center/e/E2023.aspx)

[E3031](http://www.devexpress.com/Support/Center/e/E3031.aspx)

如果要在导出时显示/隐藏单个列，请使用[E3352](http://www.devexpress.com/Support/Center/e/E3352.aspx)示例中的解决方案。

# svn - 从标记的候选版本或分支发布 Maven

> ID：10529324
> 
> 赞同：3
> 
> 时间：2012-05-10T07:30:05.217
> 
> 标签：svn, maven

考虑以下场景：我有一个正在开发的项目，它使用`maven`构建工具和`svn`/或其他一些用于版本控制的工具。

在某个时候，我决定它“可能”准备好发布，我设置了一个`svn`标签将其标记为`release candidate`

```
+ Trunk (0.0.1-SNAPSHOT)
|
+----------------------------+ Branch "release-candidate" (0.0.1-SNAPSHOT)
|                            | (goes to QA for testing)
+ Trunk (0.0.2-SNAPSHOT)     | 
| (development continues)    + Tag "release-0.0.1" (0.0.1)
....                           (deploy this revision) 
```

此时我需要`pom.xml`用新的开发版本更新。保留快照版本，`release-candidate`直到 QA 完成测试并宣布发布准备就绪。只有这样才能在标签/分支上执行实际的发布 + 部署。

在测试发布候选时，可以在主干中继续开发。

这个两步发布场景可以用 maven 构建实现吗？该`release`插件是否足以满足此要求，还是我需要其他插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:49:58.547

Maven 发布插件是发布 Maven 项目的事实上的标准，它为此强制执行一些具体的工作流程。正如我所看到的，您有完全不同的假设，但如果您尝试在这里符合 Maven 的约定，Maven Release Plugin 将在这里完成所有工作。

首先，`release:branch`目标可以帮助您创建一些版本线分支，同时`trunk`为新开发做好准备。但是，在我看来，`release-candidate`为每个下一个版本共享此分支名称（此处）绝对不是一个好主意。一个标准的方法是每个版本都做一个发布分支，在实际的最终版本之前稍微完善一下。因此，例如分支名称`0.0.1`就可以了。顺便说一句，POM 中的`release:branch`目标更新`<scm />`标记指向刚刚创建的分支，因此使用共享分支 - 再一次 - 不是一个好主意。

在完善您的候选发布后，您可以像在 Maven 中一样使用非常标准的标准`release:prepare`和**来自分支**`release:perform`的调用来进行实际发布。这会创建标签、部署东西等。

 **现在，如果你真的想修复这个分支名称（因为测试人员的需要或其他原因），你总是可以使用`svn:externals`thing 和更新`release-candidate`别名来始终指向当前的候选发布分支。**

# java - 防止在 JTree 中的节点扩展上选择节点

> ID：10529325
> 
> 赞同：3
> 
> 时间：2012-05-10T07:30:10.193
> 
> 标签：java, swing, jtree

我创建了一个`JTree`它的一些节点是自定义的，以将它们显示为可扩展的，尽管它们没有任何子节点（还）。我已经按照[这个线程](https://stackoverflow.com/questions/2472634/add-expand-button-to-jtree-node-that-has-no-children/2472752)来实现它。

为什么？我想动态加载树，所以当树扩展时，我从服务器检索更多信息并将其显示在树上。

我遇到的问题是，当我展开其中一个节点时，它会被选中，这不是默认节点的默认行为（您可以在不更改树选择的情况下展开它们）。

如何解决这个问题以防止该节点在扩展时被选中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:29:58.683

我对下面的代码没有这个问题。您必须在做其他我们无法在没有看到您的代码的情况下猜测的事情。尝试使用下面的代码并对其进行修改以重现您所看到的问题。通过这样做，您很有可能会发现自己在做什么以及为什么会出现这种行为（另请参见[SSCCE](http://sscce.org)）。

代码取自[这里](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JTree.html)

```
import java.awt.BorderLayout;
import java.awt.Container;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeNode;

public class DynamicTree extends JFrame {

    public class OutlineNode extends DefaultMutableTreeNode {
        private boolean areChildrenDefined = false;
        private int outlineNum;
        private int numChildren;

        public OutlineNode(int outlineNum, int numChildren) {
            this.outlineNum = outlineNum;
            this.numChildren = numChildren;
        }

        @Override
        public boolean isLeaf() {
            return false;
        }

        @Override
        public int getChildCount() {
            if (!areChildrenDefined) {
                defineChildNodes();
            }
            return super.getChildCount();
        }

        private void defineChildNodes() {
            // You must set the flag before defining children if you
            // use "add" for the new children. Otherwise you get an infinite
            // recursive loop, since add results in a call to getChildCount.
            // However, you could use "insert" in such a case.
            areChildrenDefined = true;
            for (int i = 0; i < numChildren; i++) {
                add(new OutlineNode(i + 1, numChildren));
            }
        }

        @Override
        public String toString() {
            TreeNode parent = getParent();
            if (parent == null) {
                return String.valueOf(outlineNum);
            } else {
                return parent.toString() + "." + outlineNum;
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new DynamicTree(5);
            }
        });
    }

    public DynamicTree(int n) {
        super("Creating a Dynamic JTree");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Container content = getContentPane();
        JTree tree = new JTree(new OutlineNode(1, n));
        content.add(new JScrollPane(tree), BorderLayout.CENTER);
        setSize(300, 475);
        setVisible(true);
    }
} 
```

# backbone.js - 骨干安全问题

> ID：10529335
> 
> 赞同：3
> 
> 时间：2012-05-10T07:30:54.653
> 
> 标签：backbone.js

在开发主干应用程序时可能面临哪些安全风险。有人可以告诉我减轻此类风险的最佳实践吗？

就像在路由器中一样，任何用户都可以找到被调用的服务

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T04:18:19.717

保护 Backbone 应用程序或任何其他客户端的秘诀在于您不依赖客户端验证。一定要在服务器上验证。

例如，如果您正在构建一个银行应用程序，您不会使用 Backbone 在用户账户之间转移 100 美元，然后将新账户余额作为模型更新发送回服务器。相反，您将向服务器发送用户转移 100 美元的意图，并让服务器发回新余额。这样，服务器可以安全地确定用户在账户之间进行此类转账的授权，确定是否存在足够的资金等。

客户端验证有助于减少往返行程并向用户提供即时反馈，但不应将其视为保护应用程序的一种方法。例如，在将电子邮件地址发送到服务器之前验证客户端上的电子邮件地址格式或密码强度（应该在服务器端再次验证）是客户端验证的一个很好的例子。

至于 Web 服务，有不同的方法来保护它们。例如，您可以使用 HTTPS 或基于令牌的身份验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T08:33:52.297

另一个问题可能是您暴露了太多数据。例如：不要返回完整的用户记录（以填充您的模型），而只返回您的应用程序实际需要的数据。

我已经看到将（散列）密码发送给客户端的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T06:55:08.897

保护主干应用程序时要考虑的是对应用程序本身的访问。

建立一个身份验证页面，用户在其中输入他的登录名/密码，然后如果验证通过，设置一个 cokkie 会话 ID。

例如，如果您在[http://mydomain.com/app](http://mydomain.com/app)上呈现了一个主视图，则必须使用 cookie 验证来保护对“/app”的访问。

例如，如果您的后端是 nodejs ：

```
app.get('/app', function(req, res, next){
  if(!loggedIn(req,res))
    sendError(res);
  else
    next();
}); 
```

登录后的内容基本上是检查您的 cookie 中是否有 sessionID。如果是，它将允许您访问您的应用程序，否则将向用户提示“未经授权的访问”消息。

如前所述，客户端验证很重要，但您必须通过使用服务器端验证来重新执行它。

Web 服务的 HTTPS 也很重要。

# php - 如何使用 CodeIgniter 在 URL 中传递 MySQL 日期时间值？

> ID：10529338
> 
> 赞同：1
> 
> 时间：2012-05-10T07:31:04.187
> 
> 标签：php, mysql, codeigniter

我想在使用 Codeigniter 构建的站点 URL 中传递如下所示的 MySQL 日期时间值。所以日期时间值是例如

```
2012-05-04 07:41:45 
```

我希望它使用某种编码或字符串转换之王在站点 URL 中传递。正如我已经尝试过使用 php urlencode() 函数但它不起作用。

在 URL 中传递它的原因是因为我正在从与该日期时间相关的数据库中查询一些记录。所以我必须将它作为参数传递给控制器​​，为此我必须在 URL 下传递它。

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:40:24.990

简单的：

```
function receiving_function($time)
{
     $date = date("Y-m-d h:i:s", $time);  // Format this however you want the data
}

function sending_data()
{
    $date = strtotime("2012-05-04 07:41:45");
    redirect ('/yourcontroller/receiving_function/'.$date).
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:32:56.587

如果您的日期时间在时间​​戳边界内，您可以将其转换为 Unix 时间戳：

```
function mysql2timestamp($datetime){
   $val = explode(" ",$datetime);
   $date = explode("-",$val[0]);
   $time = explode(":",$val[1]);
   return mktime($time[0],$time[1],$time[2],$date[1],$date[2],$date[0]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:37:35.320

只需使用`strtotime`

```
echo strtotime('2012-05-04 07:41:45'); 
```

输出：

```
1336088505 
```

您也`base64_encode`可以保留确切的字符串，但我怀疑这真的值得;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T07:41:04.877

为了保留准确的字符串，我有时会将任何非标准 url 查询值从 ASCII 转换为十六进制。在下一页，将十六进制转换为 ASCII。

参考[http://www.pgregg.com/projects/php/code/hexstr.phps](http://www.pgregg.com/projects/php/code/hexstr.phps)

在某些情况下，我发现它在传递搜索查询关键字时也很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T14:52:15.440

“有一个应用程序！”

Codeigniter 提供了一个方便的加密类 - 对 base64 没有主要改进，但好处是你可以选择你想要的密码。

你不能从 $_GET 中收集而不是传递到 URI 中吗？

```
$this->load->library('encrypt');

$datetime = "2012-05-04 07:41:45";

$encrypted_string = $this->encrypt->encode($datetime);

$hello_again = $this->encrypt->decode($encrypted_string); 
```

# iphone - 使用 UITableViewCells 聊天气泡

> ID：10529344
> 
> 赞同：0
> 
> 时间：2012-05-10T07:31:26.320
> 
> 标签：iphone, objective-c, ios, uitableview

我想有一个带有自定义气泡图像的聊天气泡，用于显示聊天消息。作为初学者，我正在考虑使用带有自定义单元格的 UITableView。该单元格将具有气泡图像。在该图像中，我想要聊天消息、日期和时间以及状态。

此外，气泡图像的大小会根据消息大小缩小或扩大。

我如何实现这一目标？有没有什么好的教程来实现这一点？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T07:34:18.477

我强烈建议这个图书馆：

[http://www.cocoacontrols.com/platforms/ios/controls/stbubbletableviewcell](http://www.cocoacontrols.com/platforms/ios/controls/stbubbletableviewcell)

我认为它会满足您的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T07:50:54.897

你当然可以有一个结构，但它会很奇怪，因为表格的大小将根据最大单元格的大小，表格的大小也必须在分配期间定义，所以你要做的是放置一个图像根据文本的大小，它会很奇怪，因为单元格的其余部分将是简单的白色。

现在 。您将必须在 UITableViewCell 的 layoutSubviews 方法中实现更改图像大小的逻辑，因为您可以使用 NSString 的 sizeWithFont 方法从聊天消息中获取文本的大小 请查看[标签中的字符串大小](https://stackoverflow.com/questions/1340667/pixel-width-of-the-text-in-a-uilabel) ，然后您必须设置框架uitableview 的委托方法中的每个单元格或图像的“- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath”

您可以根据需要在自定义 UITableViewcell（或控件）中添加任意数量的标签。 [自定义单元教程](http://jainmarket.blogspot.in/2009/05/creating-custom-tableview-cell.html)

或者，您可以创建一个自定义视图，您可以在其中定义方法以添加子视图，并将图像作为背景裁剪以匹配消息的大小，在每条消息下方，并创建字符串数组或字符串字典以跟踪来自不同的消息用户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T07:45:53.707

检查这个 - [http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/](http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/) - 并使用相同的方法，但您在自定义表格单元格中的图像将可以垂直拉伸 - 中间有一些上限.. 然后将此 uiimage 添加为单元格的背景

# excel - 选择项目时带有宏的组合框

> ID：10529347
> 
> 赞同：4
> 
> 时间：2012-05-10T07:31:45.713
> 
> 标签：excel, drop-down-menu, vba

我对 VBA 很陌生，我在 Google 上进行了搜索和搜索，但找不到处理我的问题的示例。

我得到了一个名字列表，我想把它放在一个可选择的下拉列表中。当我点击他们的名字时，我想运行一个我用他们的名字制作的不同的宏。我昨天尝试了很多东西，但每次它只成功地分配了 1 个宏，无论我按哪个名称都会调用它。

我认为解决方案非常简单，但我真的不知道如何以最简单的方式做到这一点。所以希望你们中的任何人都能获得一个简单教程的链接，或者可以分步向我解释。

提前致谢

编辑：我有 2 个名字。Birgitte = A:1 托马斯 = A:2

我有一个表单组合框，其中两个名称都在其中。当我按下 Birgitte 时，我希望运行一个名为 BS_Opgave() 的宏，而当我按下 Thomas 时，我希望运行宏 TR_Opgave。

我的问题是我不确定如何将组合框选择连接到 VBA 编辑器中的宏。我对编辑器中有关组合的所有内容感到非常困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:26:28.277

将此代码粘贴到模块中。右键单击组合框并将宏分配`DropDown1_Change`给它:) 你就完成了。

```
Option Explicit

Sub DropDown1_Change()
    With ThisWorkbook.Sheets("Sheet1").Shapes("Drop Down 1").ControlFormat
        Select Case .List(.Value)
            Case "Birgitte": BS_Opgave
            Case "Thomas": TR_Opgave
        End Select
    End With
End Sub

Sub BS_Opgave()
    MsgBox "You selected Birgitte"
End Sub

Sub TR_Opgave()
    MsgBox "You selected Thomas"
End Sub 
```

**假设**

我假设以下

*   组合框的名称是“Drop Down 1”
*   组合框在“Sheet1”中

# simulation - 如何创建模拟器，模拟帝国时代罗马崛起这样的即时战略游戏？

> ID：10529348
> 
> 赞同：0
> 
> 时间：2012-05-10T07:31:57.447
> 
> 标签：simulation

我有兴趣模拟罗马帝国崛起时代收集食物、木材等的过程。这样的模拟器将有助于实现经济增长，并找到建造建筑物和收集资源的优化顺序。请注意，模拟器将只检查经济过程，而不是战斗。是否有任何易于使用并进行此类模拟的免费软件？问题是如何用模拟器模拟这个过程（而不是如何创建实时游戏）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:35:04.177

Peladao 要求提供 RTS 引擎的示例。我在这里写了一个示例代码，并对其进行了评论。

伪代码：

```
 loop:        
    "decide what want to build";
    "try to build that"; (a verification is made if resources are enough)
    "generate resources";
    goto loop; 
```

真实代码（javascript）

1) 不有趣。定义稍后使用的函数。

```
var rand = function(){
    return Math.random()*100;
};

var random = (function(){   
    return {
        betwen:function(min,max){
            return Math.random()*(max-min)+min;
        },
        element:function(datarray){ 
            var len = datarray.length;
            if(!len) return;
            var r = parseInt(this.betwen(0,len),10);
            return datarray[r];
        }   
    };
})();

var scroll = (function(){        
    var index = 0;
    var maximo = 10;

    return {
    cortarViejas:function(){
        var edadCorte = index - maximo;

        $(".logline").each(function(){
            if($(this).data("nace")<edadCorte)
                $(this).remove();           
        }); 
    },
    add:function(txt){
        var line = $("<div>");      
        line.addClass("logline");
        line.data("nace",index++);
        line.html(txt);

        $(line).insertAfter('#marca');

        this.cortarViejas();
    },
    error:function(txt){
        this.add("ERROR: "+txt);
    },
    battle:function(txt){
        this.add("Battle: "+ txt);
    },
    oceaniaDice:function(txt){
        this.add("[Oceania broadcast] "+ txt);
    },
    debugOceania:function(txt){
        this.add("[Oceania debug] "+ txt);
    }
    };

})(); 
```

2）继承人有趣的部分。大洋洲是一个产生资源并将这些资源投资于坦克或士兵的帝国

```
var oceania = (function(){        

    var tanks = 0;
    var soldiers = 0;
    var build = "";//build strategy 
    var dead = 0;

    var prices = {"tank":5,"soldier":1};

    var hateLines = [ "Eastasia will be destroyed","We hate Eurasia","Our troops are doing good",
        "We have always ben at war with Eastasia","Under the spreading chestnut tree.I sold you and you sold me"];

    var metal = 0;
    var powerplants = 1;
    var factory = 3;    

    return {
    info:function(){
        scroll.debugOceania("Build strategy:"+ build);      
        scroll.debugOceania("Metal:"+ metal);       
        scroll.debugOceania("Army: soldier "+soldiers + ", tanks "+tanks );     
        scroll.debugOceania("Dead:"+ dead);     
    },
    militarTick:function(stuff){

        if(tanks>10 && soldiers > 20){
            tanks -= 10;
            soldiers -= 20;
            scroll.battle("Some units losts! 10 tanks, 20 soldiers");       
            dead += 10+ 20;
        }           
    }, 
```

3）在这里，帝国执行他的建设愿望[东西]

```
 buy:function(stuff){    
        if(!prices[stuff]) {
            scroll.error("buying what?:"+stuff);
            return;
        }
        if(prices[stuff]>metal) {
            scroll.debugOceania(stuff + " is too expensive");
            return;
        }
        metal -= prices[stuff];                 

        switch(stuff){
            case "tank":                            
                tanks++;    
                //scroll.debugOceania("Oceania create tank");               
                break;
            case "soldier":         
                soldiers++; 
                //scroll.debugOceania("Oceania create soldier");                
                break;      
        }       
    },
    buildTick:function(){
        switch(build){
            case "tanks":
                this.buy("tank");
                break;
            case "soldiers":
                this.buy("soldier");
                break;
        }
    }, 
```

3）在这里，帝国根据坦克/士兵比例、士兵数量、坦克数量或任何其他战略级别的问题来决定他的愿望。

```
 strategyTick:function(){        
        var likeSoldiers=0,likeTanks=0;

        build = "nothing";

        //You have something, build something!
        if( metal> 10) //we have metal, lets buy soldiers!
            likeSoldier = 10;   

        //minimum this  
        if ( tanks < 10)
            likeTanks += 10;
        if ( soldiers< 20)
            likeSoldiers += 10;

        //we want 5 soldiers for 1 tank
        if ( soldiers < tanks * 5)
            likeSoldiers += 10;

        //if we have at least 40 soldiers, we would love to have more tanks!
        if ( soldiers > 40) 
            likeTanks += 10;

        //if we have at least 40 tanks, we would love to have moresoldiers!
        if ( tanks > 40) 
            likeSoldiers += 10;

        //we want soldiers more than anything else, lets build soldiers!
        if(likeSoldiers > likeTanks ){      
            build = "soldiers";
        }else 
        //we want tanks more than anything else, lets build soldiers!
        if(  likeTanks > 5) {
            build = "tanks";
        }               
    }, 
```

4）此行之后的所有内容都可以忽略。

```
 produccionTick:function(){
        var t;
        var energy = powerplants * 3;
        var factorycount = factory;
        var metalInitial = metal;

        for(t=0;t<energy,factorycount>0;t++,factorycount--){            
            metal = metal + 1;      
        }           
        //var produce = metal - metalInitial;
        //scroll.debugOceania("Oceania create "+ produce + " metal. Total now:"+metal);         
    },
    propagandaTick:function(){
        if(rand()<5) {
            var hate = random.element(hateLines);
            scroll.oceaniaDice(hate);
        }   
    },
    tick:function(){
        this.propagandaTick();
        this.produccionTick();
        this.strategyTick();
        this.buildTick();
        this.militarTick();
    }   
    };

})();

$(function(){
    $("#cmd").keyup(function(event){                    
        if (event.which == 13) {
            var command = $(this).val();

            $(this).val("");
            scroll.add(command);

            $("#cmd").focus();

            event.preventDefault();
        }  
    });

    $("#reload").click(function(){  
        document.location = "game.htm?r="+Math.random();
    });

    oceania.tick();

    $(document).ready(function(){
        setInterval(function(){
            oceania.tick();
        },300);
    });     
}); 
```

# php - 从 Aspx 页面生成响应

> ID：10529349
> 
> 赞同：0
> 
> 时间：2012-05-10T07:31:58.277
> 
> 标签：php, asp.net, bytearray

我有一个 php 页面，它访问了一个 aspx 页面`http://server/default.aspx?xml=abc`，该文件使用在查询字符串中发送的 xml 创建一个 PDF，并将其存储在 .net 服务器上。

现在，我怎样才能得到生成的 PDF 文件的字节数组？？？我也想知道如何从 aspx 生成响应

注意：我已经完成，直到在 asp 中生成 bytearray

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:40:49.747

它将打开一个文件并将二进制响应写回调用者。

```
using(var file = new FileStream("", FileMode.Open, FileAccess.Read))
{
        var byteArray = new byte[file.Length];

        var br = new BinaryReader(file);

        byteArray = br.ReadBytes((int)file.Length);

        Response.BinaryWrite(byteArray);
} 
```

# php - 如何使用 PHP 语法创建带有标签的图形？

> ID：10529350
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:32:00.753
> 
> 标签：php, graph

如何使用 PHP 语法创建带有标签的图形并使用 phpmyadmin 将其与 sql 集成。

我只想将我的记录集成到一个图表中以监控特定数量的记录数。我真的不知道从我在 phpmyadmin 中制作的记录中得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:34:21.623

[在https://developers.google.com/chart/](https://developers.google.com/chart/)查看 Google 图表。易于从 PHP 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:37:15.460

您可以使用[打开闪存图表](http://teethgrinder.co.uk/open-flash-chart-2/)

您将能够使用 PHP 创建 Flash 图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T06:28:45.210

我建议使用谷歌图表。它的简单、有效和互动也很容易访问：[Google Charts](https://developers.google.com/chart/)
我将它用于我的项目。

# python - 使用 psycopg2 转换器从 PostgreSQL 检索 bytea 数据

> ID：10529351
> 
> 赞同：8
> 
> 时间：2012-05-10T07:32:05.917
> 
> 标签：python, postgresql, psycopg2

我想以二进制（bytea）形式将 Numpy 数组存储在 PostgreSQL 数据库中。我可以让它在测试#1 中正常工作（见下文），但我不想每次都在插入之前和选择之后操作数据数组 - 我想使用 psycopg2 的适配器和转换器。

这是我目前所拥有的：

```
import numpy as np
import psycopg2, psycopg2.extras

def my_adapter(spectrum):
    return psycopg2.Binary(spectrum)

def my_converter(my_buffer, cursor):
    return np.frombuffer(my_buffer)

class MyBinaryTest():

    # Connection info
    user = 'postgres'
    password = 'XXXXXXXXXX'
    host = 'localhost'
    database = 'test_binary'

    def __init__(self):
        pass

    def set_up(self):

        # Set up
        connection = psycopg2.connect(host=self.host, user=self.user, password=self.password)

        connection.set_isolation_level(psycopg2.extensions.ISOLATION_LEVEL_AUTOCOMMIT)

        cursor = connection.cursor()
        try: # Clear out any old test database
            cursor.execute('drop database %s' % (self.database, ))
        except:
            pass

        cursor.execute('create database %s' % (self.database, ))
        cursor.close()
        connection.close()

        # Direct connectly to the database and set up our table            
        self.connection = psycopg2.connect(host=self.host, user=self.user, password=self.password, database=self.database)
        self.cursor = self.connection.cursor(cursor_factory=psycopg2.extras.DictCursor)

        self.cursor.execute('''CREATE TABLE spectrum (
            "sid" integer not null primary key,
            "data" bytea not null
            );

            CREATE SEQUENCE spectrum_id;
            ALTER TABLE spectrum
                ALTER COLUMN sid
                    SET DEFAULT NEXTVAL('spectrum_id');
            ''')
        self.connection.commit()

    def perform_test_one(self):

        # Lets do a test

        shape = (2, 100)
        data = np.random.random(shape)

        # Binary up the data
        send_data = psycopg2.Binary(data)

        self.cursor.execute('insert into spectrum (data) values (%s) returning sid;', [send_data])
        self.connection.commit()

        # Retrieve the data we just inserted
        query = self.cursor.execute('select * from spectrum')
        result = self.cursor.fetchall()

        print "Type of data retrieved:", type(result[0]['data'])

        # Convert it back to a numpy array of the same shape
        retrieved_data = np.frombuffer(result[0]['data']).reshape(*shape)

        # Ensure there was no problem
        assert np.all(retrieved_data == data)
        print "Everything went swimmingly in test one!"

        return True

    def perform_test_two(self):

        if not self.use_adapters: return False

        # Lets do a test

        shape = (2, 100)
        data = np.random.random(shape)

        # No changes made to the data, as the adapter should take care of it (and it does)

        self.cursor.execute('insert into spectrum (data) values (%s) returning sid;', [data])
        self.connection.commit()

        # Retrieve the data we just inserted
        query = self.cursor.execute('select * from spectrum')
        result = self.cursor.fetchall()

        # No need to change the type of data, as the converter should take care of it
        # (But, we never make it here)

        retrieved_data = result[0]['data']

        # Ensure there was no problem
        assert np.all(retrieved_data == data.flatten())
        print "Everything went swimmingly in test two!"

        return True

    def setup_adapters_and_converters(self):

        # Set up test adapters
        psycopg2.extensions.register_adapter(np.ndarray, my_adapter)

        # Register our converter
        self.cursor.execute("select null::bytea;")
        my_oid = self.cursor.description[0][1]

        obj = psycopg2.extensions.new_type((my_oid, ), "numpy_array", my_converter)
        psycopg2.extensions.register_type(obj, self.connection)

        self.connection.commit()

        self.use_adapters = True

    def tear_down(self):

        # Tear down

        self.cursor.close()
        self.connection.close()

        connection = psycopg2.connect(host=self.host, user=self.user, password=self.password)

        connection.set_isolation_level(psycopg2.extensions.ISOLATION_LEVEL_AUTOCOMMIT)

        cursor = connection.cursor()
        cursor.execute('drop database %s' % (self.database, ))
        cursor.close()
        connection.close()

test = MyBinaryTest()
test.set_up()
test.perform_test_one()
test.setup_adapters_and_converters()
test.perform_test_two()
test.tear_down() 
```

现在，测试#1 工作正常。当我使用测试 1 中使用的代码并设置 psycopg2 适配器和转换器时，它不起作用（测试 2）。这是因为馈送到转换器的数据实际上不再是缓冲区。它是 PosgreSQL 对 bytea 的字符串表示。输出如下：

```
In [1]: run -i test_binary.py
Type of data retrieved: type 'buffer'>
Everything went swimmingly in test one!
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (273, 0))

---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/Users/andycasey/thesis/scope/scope/test_binary.py in <module>()
    155 test.perform_test_one()
    156 test.setup_adapters_and_converters()
--> 157 test.perform_test_two()
    158 test.tear_down()
    159 

/Users/andycasey/thesis/scope/scope/test_binary.py in perform_test_two(self)
    101         # Retrieve the data we just inserted

    102         query = self.cursor.execute('select * from spectrum')
--> 103         result = self.cursor.fetchall()
    104 
    105         # No need to change the type of data, as the converter should take care of it

/Library/Python/2.6/site-packages/psycopg2/extras.pyc in fetchall(self)
     81     def fetchall(self):
     82         if self._prefetch:
---> 83             res = _cursor.fetchall(self)
     84         if self._query_executed:
     85             self._build_index()

/Users/andycasey/thesis/scope/scope/test_binary.py in my_converter(my_buffer, cursor)
      7 
      8 def my_converter(my_buffer, cursor):
----> 9     return np.frombuffer(my_buffer)
     10 
     11 

ValueError: buffer size must be a multiple of element size
WARNING: Failure executing file: <test_binary.py>

In [2]: %debug
> /Users/andycasey/thesis/scope/scope/test_binary.py(9)my_converter()
      8 def my_converter(my_buffer, cursor):
----> 9     return np.frombuffer(my_buffer)
     10 

ipdb> my_buffer
'\\x40e67378b9b8ae3f78b15ebecf20ef3f4092f00289dc803f20a843f40b9ddd3f64b6ec99bf62e83f8cea6eb60758d43f2ba47d8e6d5be73f4e88f267bbb2d83ffacc8aad2220d43fc6006b9c7eb7d33ff440cccc638de33f70e0b4b906a1e13fe0eca2af2f87c83f98d31f41e081ee3f1e6f5b8a52fdea3f80fcbd0ec3a0a93f95316c9e462eed3f83fe6d8d2463ea3fb44849fa8404d33f701be5924049df3f6ef3ca0c50f6d63f0c7b7d800cfdda3fc000e89b890c983fb32cf3e4ba1dea3f87f17f7efc06e33f2e194b361190ed3f60e955f0456d933ff24dd5aabc7eeb3f7802405af74ddc3f9ce9c3852db8e03fa0c936267c19d33f3406c35637f9ec3f288d23502e70ee3f08fe67e7ed8ec53f00f5cde29763dc3f26bcb4d362c4e23fa9e01fac6cd8e33fbec912f5ff7ae13f7fbd61e2e585ed3fa0070671e970e83f68ef1f6e0b90da3fce9ce834bfa6d43fa02b825d144e903f42912641e5aedd3f645a299de883db3fd8b5126bb8f6c23f3c5d4ae40ecccd3f5ae503835d00e13fcc784bdb7ea9c43f880ebfb30719be3f1dffcb042f58e23f44cc727ab3dfc53f1bbe477eb861e43f3c4f55f6aea5e53fdc80f6fa91d6e33f12b580ef03acd03f1cb78f8dccaac13f9ebdbd206453d43f32ffc626fe4ddc3f625ff4e2b317d33f44822e2f0d52ca3f38fea7c36ba6cb3ff0290b4707cedc3fd456190f786bcd3f7ed46219b47eda3f66fbdef755c3df3f40ccd47f88978c3f382897872cf5b73f5d24a66af5d7e13f2dd179d56ea3ee3fc4bb5b0962bcd63f20024c1c55ddb63f68a02e5f73fbd13f21eeb68b333de63f1a19dfe1b713e53f7556fedbb698e53f44eb6e9228accf3fe61a509c1d4ae43fe0fb0624828fa83f1822e55e76cdd23f801708ab685dd93f06076be2e92bed3f5ac2ff90247fed3fd42902b6b974d13f9df97b70385ce83fdabc4af1e81fe83f250611249338e73fc0251f9c9739e93f5821b6024621d63f7a7e1fc15605e73fab085fa8bb67e83fb4eb1d087ef5dd3fd1b450d406cbe13f0078ed1c422d3e3f44ed12d19085e83f117d628438daea3f15c776903519e23f747f248fa2e0c83ffcd052e9c4edc93f177a255a0a91e93fbe3b9b894d8edf3fea9fb6dd8be4e23fdc879e88e094e83f18bd28327ae3c03fc1bfd06d0379ec3fe8d7ee7e066ee03f750c4e0f4802e33fca3e4d0e34d3da3fe0578becde30c43f6044d9ad900ed23f08a2562899a3d13f5a83cf6694f3e33f001c61debd5f513fa009953fde2c9a3f29d53b02ca65e53fda066b4421a8ea3f58f074484a08cc3fe239b4b7eb57e03f1f904fe586bde43f9ce6edd599d1d13f43878f622d7ee23fd3ebab4e7904e93f7c3437ad0e16d23fac5e5e9e08a9c83f2b7b2d56db34e73f74f8cd68effeed3f4c279a9d4210c53ffafad9b31886d33f4c3eb4acc9b0dc3f6ed2f82f486edc3fc349273cbe1fec3fe2f70e89b061d83facaa25cb8fdbcd3fb0659c127fb7e83f00a224076b6da43f9ab1eb331dfade3fc86e03757e3bec3f3d00c8545ccce93f90fac6a4cc21b93f08f57560a68bc63fd8cccbabcd13b03fc679c7f9ece6df3f4a8c78aa1a1aed3ffecac18174dbe43fdfe102cffb48e93f0078f7fa27cc463fb40acdaea46ee63f54f754df4daadf3f2a9e063d0ab3da3f82a21b50d3c6d33f1182e48aafb5ed3fb67f3de3b109d63f494258c18422e13f8a5542fc1491e63f43247cbeabece13feb9355572f68eb3f3cf415eee8f1d53f887df6aab75bb43f0042cd907780523ff5e724cad881e03fdb9de04e99ffe43fd6594feb9b75ec3f6d4e6fcf7690e13fabe634f015dee13f584563d26021c93f6f1916ee57c8e13fd8906bad6fa7cd3ff8fad5b03b02eb3f1b3b87c15f16e53f4014ec100f79c73f1aee1302d960d83f45be6b695ed9e13ffc86d1d311dbdb3f089e89e6389fb93f24d742e400cbd63fa048c53d8fbf9c3f6eb1db094d81ed3f8bbf0cba79fde63f70e8f3d63c43c33ff1c5e6fed947e43f64f3a21f062ee03f0d12c4282794e03fa0a3be998572ba3f16510b776d7aeb3fb8c7ca308d2acd3f6f37eb1eb330ef3f1ba1bdb6577fe73f78d805294a05b43f0ed0bea2f180db3f5a4cce890b57ea3f2472556ba6f1e43f1a79fcc20701e53fe2ae8a1ea5f7d73fe0bd1efc12caec3ff94b1e02a75bed3f78e098184e3fea3f46ff0b2344dedb3f1cdc0f7b72efdb3f6ceb0b772b37e43f47e49b2a7088ea3f' 
```

有谁知道我如何（a）反序列化在 my_converter 中返回给我的字符串表示，所以我每次都返回一个 Numpy 数组，或者（b）强制 PostgreSQL/psycopg2 将缓冲区表示发送到转换器（我可以使用) 代替字符串表示吗？

谢谢！

我在 OS X 10.6.8 上使用 Python 2.6.1 (r261:67515)、PostgreSQL 9.0.3 和 psycopg2 2.4 (dt dec pq3 ext)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T21:37:22.213

您在调试器中看到的格式很容易解析：它是 PostgreSQL 十六进制二进制格式 (http://www.postgresql.org/docs/9.1/static/datatype-binary.html)。psycopg 可以解析该格式并返回包含数据的缓冲区；您可以使用该缓冲区来获取一个数组。与其从头开始编写 typecaster，不如编写一个调用原始 func 并对其结果进行后处理的类型。抱歉，我现在不记得它的名字了，我正在用手机写信：您可以从邮件列表中获得更多帮助。

* * *

编辑：完整的解决方案。

默认的 bytea 类型转换程序（可以解析 postgres 二进制表示并从中返回缓冲区对象的对象）是 psycopg2.BINARY。我们可以使用它来创建一个转换为数组的类型转换器：

```
In [1]: import psycopg2

In [2]: import numpy as np

In [3]: a = np.eye(3)

In [4]: a
Out[4]:
array([[ 1.,  0.,  0.],
      [ 0.,  1.,  0.],
      [ 0.,  0.,  1.]])

In [5]: cnn = psycopg2.connect('')

# The adapter: converts from python to postgres
# note: this only works on numpy version whose arrays 
# support the buffer protocol,
# e.g. it works on 1.5.1 but not on 1.0.4 on my tests.

In [12]: def adapt_array(a):
  ....:     return psycopg2.Binary(a)
  ....:

In [13]: psycopg2.extensions.register_adapter(np.ndarray, adapt_array)

# The typecaster: from postgres to python

In [21]: def typecast_array(data, cur):
  ....:     if data is None: return None
  ....:     buf = psycopg2.BINARY(data, cur)
  ....:     return np.frombuffer(buf)
  ....:

In [24]: ARRAY = psycopg2.extensions.new_type(psycopg2.BINARY.values,
'ARRAY', typecast_array)

In [25]: psycopg2.extensions.register_type(ARRAY)

# Now it works "as expected"

In [26]: cur = cnn.cursor()

In [27]: cur.execute("select %s", (a,))

In [28]: cur.fetchone()[0]
Out[28]: array([ 1.,  0.,  0.,  0.,  1.,  0.,  0.,  0.,  1.]) 
```

如您所知， np.frombuffer(a) 会丢失数组形状，因此您必须想办法保存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T15:18:22.303

p对于 numpy 数组的情况，可以避免缓冲区策略及其所有缺点，例如丢失形状和数据类型。在关于在 sqlite3 中存储 numpy 数组的[stackoverflow 问题之后，可以轻松地为 postgres 调整该方法。](https://stackoverflow.com/questions/18621513/python-insert-numpy-array-into-sqlite3-database)

```
import os
import psycopg2 as psql
import numpy as np

# converts from python to postgres
def _adapt_array(text):
    out = io.BytesIO()
    np.save(out, text)
    out.seek(0)
    return psql.Binary(out.read())

# converts from postgres to python
def _typecast_array(value, cur):
    if value is None:
        return None

    data = psql.BINARY(value, cur)
    bdata = io.BytesIO(data)
    bdata.seek(0)
    return np.load(bdata)

con = psql.connect('')

psql.extensions.register_adapter(np.ndarray, _adapt_array)
t_array = psql.extensions.new_type(psql.BINARY.values, "numpy", _typecast_array)
psql.extensions.register_type(t_array)

cur = con.cursor() 
```

现在可以创建和填充表格（如上一篇文章中`a`定义的那样）

```
cur.execute("create table test (column BYTEA)")
cur.execute("insert into test values(%s)", (a,)) 
```

并恢复 numpy 对象

```
cur.execute("select * from test")
cur.fetchone()[0] 
```

结果：

```
array([[ 1.,  0.,  0.],
       [ 0.,  1.,  0.],
       [ 0.,  0.,  1.]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-20T05:30:23.680

`np.savetxt`我尝试了这两个答案，但直到我修改了 Daniel 的代码以使用并`np.loadtxt`更改了他的 typecaster后才能让它们工作

```
bdata = BytesIO(data[1:-1]) 
```

所以这两个函数现在看起来像

```
def _adapt_array(arr):
    out = BytesIO()
    np.savetxt(out, arr, fmt='%.2f')
    out.seek(0)
    return pg2.Binary(out.read())

def _typecast_array(value, cur):
    if value is None:
       return None
    data = pg2.BINARY(value, cur)
    bdata = BytesIO(data[1:-1])
    bdata.seek(0)
    return np.loadtxt(bdata)

pg2.extensions.register_adapter(np.ndarray, _adapt_array)
t_array = pg2.extensions.new_type(pg2.BINARY.values, 'numpy', _typecast_array)
pg2.extensions.register_type(t_array) 
```

我得到的错误是`could not convert string to float: '[473.07'`. 我怀疑此修复程序仅适用于平面数组，但这就是我的数据的结构方式，因此它对我有用。

# css - 媒体查询和设备像素比

> ID：10529354
> 
> 赞同：2
> 
> 时间：2012-05-10T07:32:31.097
> 
> 标签：css, media-queries, smartphone, pixel-ratio

我正在重新设计我的网站，我决定尝试响应式布局。我是 CSS3 媒体查询的新手，不知道如何让网站在我的智能手机上按预期运行。

该页面当前具有此视口元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

我不确定它的作用，因为我看不出在我的 HTML 中拥有和不拥有它之间的区别，但被告知它在某种程度上很有用。

样式表的目标宽度应该是 R < 640px、640px <= R < 960px 和 960px <= R。布局将分别为 320px、640px 和 960px 宽。

我面临的问题是我的智能手机（可能还有所有现代高像素密度手持设备）。我的智能手机的物理分辨率为 480x800px，但在横向模式下，报告的宽度为 533px（它的像素比为 1.5 和 800/1.5 = 533.33，所以我猜这是预期值）。由于 533 < 640，显示的布局是最窄的：320px。我知道中号在智能手机上看起来不错，并且更愿意使用它。我应该怎么做才能让智能手机在横向模式下显示 640px 布局，而不会破坏当前适用于 1:1 像素比桌面浏览器的规则？

每个布局（分别为 320、640、960）的当前媒体查询是：

```
@media only screen and (max-width: 639px)

@media only screen and (min-width: 640px) and (max-width: 959px)

@media only screen and (min-width: 960px) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:15:47.383

这个问题/答案可能对您有所帮助：[iPhone 上的 Safari 是否有与 Android 的 <meta name='viewport' content='target-densitydpi=device-dpi'> 等效的东西？](https://stackoverflow.com/questions/7674247/is-there-any-equivalent-to-androids-meta-name-viewport-content-target-densi)这又指向这篇非常有用的文章：[http ://davidbcalhoun.com/2010/viewport-metatag](http://davidbcalhoun.com/2010/viewport-metatag)

```
<meta name="viewport" content="target-densitydpi=device-dpi" /> 
```

应该让您知道这似乎是适用于 Android 的解决方案，但可能不适用于 iOS 设备（没有 Mac 或 iPhone 可以确认）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:06:03.857

我宁愿使用媒体查询：

```
 @media only screen and (max-width: 639px) and (-Webkit-min-device-pixel-ratio: 1.5), 
    @media only screen and (max-width: 639px) and (-moz-min-device-pixel-ratio: 1.5),
    @media only screen and (max-width: 639px) and (-o-min-device-pixel-ratio: 3/2),
    @media only screen and (max-width: 639px) and (min-device-pixel-ratio: 1.5),
    @media only screen and (min-width: 640px) and (max-width: 959px) 
```

# windows-phone-7 - 在 Windows Phone 7 中禁用列表框项目？

> ID：10529358
> 
> 赞同：0
> 
> 时间：2012-05-10T07:33:21.047
> 
> 标签：windows-phone-7

我正在使用 Windows Phone 7 平台。

我在列表框中显示一年的月份。

现在我只想在列表框中启用当前月份，之前的所有月份都应该被禁用。下面是在 listobx 中填充一年中月份的代码。

Listboxobject.ItemsSource = globalobject.Getmonths;

公开名单Getmonths

```
 monthlist.Add("January");
        monthlist.Add("February");
        monthlist.Add("March");
        monthlist.Add("April");
        monthlist.Add("May");
        monthlist.Add("June");
        monthlist.Add("July");
        monthlist.Add("August");
        monthlist.Add("September");
        monthlist.Add("October");
        monthlist.Add("November");
        monthlist.Add("December");
        return monthlist; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:00:11.330

对于列表框中的每个项目，即每个列表框项目，它都有一个名为 IsEnabled 的属性。它是一个布尔属性。您可以将其设置为 false 以禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:10:26.930

这是你必须做的。请注意，我没有设置ItemSource，只是一个一个添加ListBoxItems。如果您想要禁用项目功能，添加 ListBoxItems 而不是字符串很重要。如果您有任何问题，我可以将解决方案发送给您。

```
 DateTime dt = DateTime.Today;
        DateTime dt2 = new DateTime();

        for (int i = 0; i < 12; i++) {
            string mname = dt2.ToString("MMMM");
            ListBoxItem LBI = new ListBoxItem();
            LBI.Content = mname;
            if (dt.Month > dt2.Month)
                LBI.IsEnabled = false;
            Listboxobject.Items.Add(LBI);
            dt2 = dt2.AddMonths(1);
        } 
```

# haskell - 递归定义的实例和约束

> ID：10529360
> 
> 赞同：13
> 
> 时间：2012-05-10T07:33:38.057
> 
> 标签：haskell, typeclass

我一直在使用新的`DataKinds`扩展名在其类型中编码大小的向量和矩阵。它基本上是这样的：

```
data Nat = Zero | Succ Nat

data Vector :: Nat -> * -> * where
    VNil :: Vector Zero a
    VCons :: a -> Vector n a -> Vector (Succ n) a 
```

现在我们想要典型的实例，比如`Functor`和`Applicative`。`Functor`简单：

```
instance Functor (Vector n) where
    fmap f VNil = VNil
    fmap f (VCons a v) = VCons (f a) (fmap f v) 
```

但是这个`Applicative`实例有一个问题：我们不知道在 pure 中返回什么类型。但是，我们可以根据向量的大小归纳定义实例：

```
instance Applicative (Vector Zero) where
    pure = const VNil
    VNil <*> VNil = VNil

instance Applicative (Vector n) => Applicative (Vector (Succ n)) where
    pure a = VCons a (pure a)
    VCons f fv <*> VCons a v = VCons (f a) (fv <*> v) 
```

然而，即使这个实例适用于所有向量，类型检查器也不知道这一点，所以我们`Applicative`每次使用实例时都必须携带约束。

现在，如果这仅适用于`Applicative`实例，那将不是问题，但事实证明，在使用此类类型进行编程时，递归实例声明的技巧是必不可少的。例如，如果我们使用 TypeCompose 库将矩阵定义为行向量的向量，

```
type Matrix nx ny a = (Vector nx :. Vector ny) a 
```

我们必须定义一个类型类并添加递归实例声明来实现转置和矩阵乘法。这导致我们每次使用代码时都必须携带大量的约束，即使实例实际上适用于所有向量和矩阵（使得约束有点无用）。

有没有办法避免必须进行所有这些限制？是否可以扩展类型检查器以检测这种归纳结构？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T09:22:00.293

的定义`pure`确实是问题的核心。它的类型应该是什么，完全量化和合格？

```
pure :: forall (n :: Nat) (x :: *). x -> Vector n x            -- (X) 
```

不会这样做，因为在运行时没有可用的信息来确定是否`pure`应该发出`VNil`或`VCons`. 相应地，就目前情况而言，你不能只拥有

```
instance Applicative (Vector n)                                -- (X) 
```

你能做什么？好吧，使用[Strathclyde Haskell Enhancement](http://personal.cis.strath.ac.uk/~conor/pub/she)在[Vec.lhs](https://personal.cis.strath.ac.uk/~conor/pub/she/examples/Vec.lhs)示例文件中，我定义了一个前体`pure`

```
vec :: forall x. pi (n :: Nat). x -> Vector {n} x
vec {Zero}    x = VNil
vec {Succ n}  x = VCons x (vec n x) 
```

带有一个`pi`类型，要求`n`在运行时传递一个副本。这`pi (n :: Nat).`脱糖为

```
forall n. Natty n -> 
```

其中`Natty`，在现实生活中有一个更平淡无奇的名字，是由下式给出的单例 GADT

```
data Natty n where
  Zeroy :: Natty Zero
  Succy :: Natty n -> Natty (Succ n) 
```

方程式中的花括号`vec`仅用于将`Nat`构造函数转换为`Natty`构造函数。然后我定义了以下恶魔实例（关闭默认的 Functor 实例）

```
instance {:n :: Nat:} => Applicative (Vec {n}) where
  hiding instance Functor
  pure = vec {:n :: Nat:} where
  (<*>) = vapp where
    vapp :: Vec {m} (s -> t) -> Vec {m} s -> Vec {m} t
    vapp  VNil          VNil          = VNil
    vapp  (VCons f fs)  (VCons s ss)  = VCons (f s) vapp fs ss 
```

这仍然需要进一步的技术。约束`{:n :: Nat:}`对需要`Natty n`见证人存在的事物进行去糖化，并且通过作用域类型变量的力量，`{:n :: Nat:}`明确见证的相同传票。长手，就是

```
class HasNatty n where
  natty :: Natty n
instance HasNatty Zero where
  natty = Zeroy
instance HasNatty n => HasNatty (Succ n) where
  natty = Succy natty 
```

我们用 替换约束`{:n :: Nat:}`，用替换`HasNatty n`相应项`(natty :: Natty n)`。系统地进行这种构造相当于在类型类 Prolog 中编写 Haskell 类型检查器的片段，这不是我的快乐想法，所以我使用计算机。

请注意，该`Traversable`实例（请原谅我的成语括号和我的默认 Functor 和 Foldable 实例）不需要这样的诡计

```
instance Traversable (Vector n) where
  traverse f VNil         = (|VNil|)
  traverse f (VCons x xs) = (|VCons (f x) (traverse f xs)|) 
```

这就是在没有进一步显式递归的情况下获得矩阵乘法所需的所有结构。

**TL;DR 使用单例构造及其关联的类型类将所有递归定义的实例折叠成存在类型级数据的运行时见证，您可以通过显式递归从中计算。**

设计含义是什么？

GHC 7.4 有类型升级技术但 SHE 仍然有单件构造`pi`类型提供。提升数据类型的一个明显重要的事情是它们是*封闭*的，但这还没有真正清晰地显示出来：单例见证的可构造性是这种封闭性的体现。不知何故，如果你有，`forall (n :: Nat).`那么要求一个单例总是合理的，但这样做会对生成的代码产生影响：无论是在我的`pi`构造中是显式的，还是在字典中的隐式`{:n :: Nat:}`，都有额外的运行时信息悬而未决，以及一个相应较弱的自由定理。

未来版本的 GHC 的一个开放设计问题是如何管理类型级数据的运行时见证的存在和不存在之间的这种区别。一方面，我们在约束中需要它们。另一方面，我们需要对它们进行模式匹配。例如，应该`pi (n :: Nat).`意味着显式

```
forall (n :: Nat). Natty n -> 
```

或隐含的

```
forall (n :: Nat). {:n :: Nat:} => 
```

? 当然，像 Agda 和 Coq 这样的语言都有这两种形式，所以也许 Haskell 应该效仿。当然还有进步的空间，我们正在努力！

# django - django-videothumbs 和“列表索引超出范围”错误

> ID：10529363
> 
> 赞同：0
> 
> 时间：2012-05-10T07:33:46.900
> 
> 标签：django, video

我使用[django-videothumbs](https://github.com/macmichael01/django-videothumbs) 视频字段是：

```
video = videothumbs.VideoThumbField(upload_to='videos', sizes=((125,125),(300,200),)) 
```

在上传，视频上传，但在缩略图创建我有这个错误：

> 异常值：列表索引超出范围异常位置：/library/videothumbs.py in generate_thumb，第 51 行

第 51 行：

```
for c in range(len(histogram[0])):
    ac = 0.0
    for i in range(n):
       ac = ac + (float(histogram[i][c])/n)
       avg.append(ac) 
```

视频归档有什么问题？

编辑：`print histogram`我有：

```
sh: ffmpeg: command not found 
```

但在终端：

```
FFmpeg version CVS, Copyright (c) 2000-2004 Fabrice Bellard
Mac OSX universal build for ffmpegX
configuration: --enable-memalign-hack --enable-mp3lame --enable-gpl --disable-vhook --    disable-ffplay --disable-ffserver --enable-a52 --enable-xvid --enable-faac --enable-faad --enable-amr_nb --enable-amr_wb --enable-pthreads --enable-x264
libavutil version: 49.0.0
libavcodec version: 51.9.0
libavformat version: 50.4.0
built on Apr 15 2006 04:58:19, gcc: 4.0.1 (Apple Computer, Inc. build 5250)
usage: ffmpeg [[infile options] -i infile]... {[outfile options] outfile}...
Hyper fast Audio and Video encoder 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:36:37.043

你检查过 的值`histogram[0]`吗？很可能`histogram`没有任何元素。

我将更改代码：

```
if len(histogram) > 0:
  for c in range(len(histogram[0])):
    ac = 0.0
    for i in range(n):
       ac = ac + (float(histogram[i][c])/n)
       avg.append(ac) 
```

# jquery - HTML 反弹效果

> ID：10529364
> 
> 赞同：-3
> 
> 时间：2012-05-10T07:34:01.890
> 
> 标签：jquery, html, bounce

我有这个 HTML 代码：

```
 <!doctype html>
    <html>
    <head>
    <meta charset="utf-8">
    <title>Untitled Document</title>
    <link rel="stylesheet" href="navbar.css" type="text/css">
    </head>

    <body><div class="AJXCSSMenuGAbaaTB"><!-- AJXFILE:navbar.css -->
    <ul class="sub">
     <li><a href="http://www.gigabyte.heliohost.org/" title="Home"><b>Home</b></a></li>
     <li><a class="ajxsub" href="http://www.gigabyte.heliohost.org/about" title="About Us &amp; Contact Information"><b>About</b></a>
      <ul>
       <li class="sfirst slast"><a href="http://www.fb.fan.page.gigabyte.heliohost.org/" title="Like GigaByte on Facebook">Facebook Page</a></li>
      </ul>
     </li>
     <li><a class="ajxsub" href="http://www.gigabyte.heliohost.org/tools/"><b>Tools</b></a>
      <ul>
       <li class="sfirst"><h1>Online</h1></li>
       <li><h1>Backyard Monsters</h1></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/bm-icalc/" title="Backyard Monsters Inferno Base Health Calculator">Inferno Base Health Calculator</a></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/bm-calc/" title="Backyard Monsters Main Base Health Calculator">Main Base Health Calculator</a></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/bm-opcalc/" title="Backyard Monsters Outpost Base Health Calculator">Outpost Base Health Calculator</a></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/bmlist/" title="Update List for Backyard Monsters ">Update List</a></li>
       <li><h1>War Commander</h1></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/wc-calc/" title="War Commander Main Base Health Calculator">Main Base Health Calculator</a></li>
       <li><a href="http://www.gigabyte.heliohost.org/tools/wclist/" title="Update List for War Commander">Update List</a></li>
       <li><h1>Offline</h1></li>
       <li class="slast"><a href="http://www.gigabyte.heliohost.org/tools/offdl/">Downloads</a></li>
      </ul>
     </li>
     <li><a class="ajxsub" href="http://www.gigabyte.heliohost.org/help/" title="Help"><b>Help</b></a>
      <ul>
       <li class="sfirst slast"><a href="http://www.gigabyte.heliohost.org/help/faq/" title="Frequently Asked Questions">F.A.Q.</a></li>
      </ul>
     </li>
    </ul>
     <br >
    </div>
    </body>
    </html> 
```

和CSS代码：

```
 .AJXCSSMenuGAbaaTB {position:relative;margin:0 auto;z-index:100;width:590px;height:52px;text-align:center;}
    .AJXCSSMenuGAbaaTB ul {position:relative;display:inline-block;margin:0;padding:0;list-style-type:none;}
    * html .AJXCSSMenuGAbaaTB ul {display:inline;}
    *+html .AJXCSSMenuGAbaaTB ul {display:inline;}
    .AJXCSSMenuGAbaaTB li {float:left;margin:0;}
    .AJXCSSMenuGAbaaTB li:hover,.AJXCSSMenuGAbaaTB .ajxover {position:relative;}
    .AJXCSSMenuGAbaaTB ul ul h1 {width:184px;padding:5px 8px 5px 8px;margin:0;font:bold 14px/14px Arial,Helvetica,sans-serif;text-decoration:none;text-align:center;color:#000000;background:#ffffff;}
    .AJXCSSMenuGAbaaTB ul ul .sfirst h1 {margin-top:4px;}
    .AJXCSSMenuGAbaaTB a {display:block;float:left;height:52px;white-space:nowrap;overflow:hidden;padding:0 0 0 16px;font:18px/52px Arial,Helvetica,sans-serif;text-decoration:none;text-align:center;color:#ffffff;background:#3c3c3c url(navbar_files/top.gif) no-repeat top left;}
    .AJXCSSMenuGAbaaTB a b {display:block;padding:0 22px 0 0;font-weight:normal;background:url(navbar_files/top.gif) no-repeat top right;}
    .AJXCSSMenuGAbaaTB li:hover a,.AJXCSSMenuGAbaaTB .ajxover a {background:#ff6600 url(navbar_files/top.gif) no-repeat bottom left;}
    .AJXCSSMenuGAbaaTB li:hover a b,.AJXCSSMenuGAbaaTB .ajxover a b {background:url(navbar_files/top.gif) no-repeat bottom right;}
    .AJXCSSMenuGAbaaTB a.ajxsub {background:#3c3c3c url(navbar_files/top-sub.gif) no-repeat top left;}
    .AJXCSSMenuGAbaaTB a.ajxsub b {background:url(navbar_files/top-sub.gif) no-repeat top right;}
    .AJXCSSMenuGAbaaTB li:hover a.ajxsub,.AJXCSSMenuGAbaaTB .ajxover a.ajxsub {background:#ff6600 url(navbar_files/top-sub.gif) no-repeat bottom left;}
    .AJXCSSMenuGAbaaTB li:hover a.ajxsub b,.AJXCSSMenuGAbaaTB .ajxover a.ajxsub b {background:url(navbar_files/top-sub.gif) no-repeat bottom right;}
    .AJXCSSMenuGAbaaTB ul ul {position:absolute;left:-9999px;top:-9999px;width:208px;height: auto;display:inline-block;float:none;margin:0;background:#ff6600 url(navbar_files/sub-bg.gif) right center;}
    .AJXCSSMenuGAbaaTB ul :hover ul,.AJXCSSMenuGAbaaTB ul .ajxover ul {left:-4px;top:52px;}
    .AJXCSSMenuGAbaaTB li li {width:200px;padding:0 4px 0px 4px;}
    .AJXCSSMenuGAbaaTB li li.slast {padding-bottom:4px;}
    .AJXCSSMenuGAbaaTB ul ul a,.AJXCSSMenuGAbaaTB ul :hover ul a,.AJXCSSMenuGAbaaTB ul .ajxover ul a {float:none;margin:0;width:172px;height:auto;white-space:normal;padding:5px 8px 5px 20px;font:14px/14px Arial,Helvetica,sans-serif;text-decoration:none;text-align:left;border:0;color:#000000;background:#ffffff;}
    .AJXCSSMenuGAbaaTB ul :hover ul .sfirst a,.AJXCSSMenuGAbaaTB ul .ajxover ul .sfirst a {margin-top:4px;}
    .AJXCSSMenuGAbaaTB ul ul :hover a,.AJXCSSMenuGAbaaTB ul ul .ajxover a {background:#f1f1f1;}
    .AJXCSSMenuGAbaaTB br {clear:both;height:0;font-size: 1px;line-height: 0px;} 
```

我希望制作一个 javascript 文件，当悬停在主菜单上时，它会创建一个弹跳来显示子菜单，显示子菜单和返回子菜单时有 160 毫秒的延迟，它只会缓和到顶部600 毫秒的延迟才缓和下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:23:13.063

如果你想成为 jQuery 中的忍者，我喜欢这个免费的 30 天学习： [http ://tutsplus.com/course/30-days-to-learn-jquery/](http://tutsplus.com/course/30-days-to-learn-jquery/)

或者只是阅读文档：[http](http://api.jquery.com/animate/) ://api.jquery.com/animate/和反弹 [http://jqueryui.com/demos/effect/#easing](http://jqueryui.com/demos/effect/#easing)

您可以使用以下工具轻松测试它：http: [//jsfiddle.net/](http://jsfiddle.net/)或[http://jsbin.com/3/](http://jsbin.com/3/)

这是一个很好的入门套件！

# google-app-engine - 使用 Google Go 的 Goroutines 创建贝叶斯网络

> ID：10529365
> 
> 赞同：7
> 
> 时间：2012-05-10T07:34:09.347
> 
> 标签：google-app-engine, go, a-star, bayesian, bayesian-networks

我有一个哲学论据的大型数据集，每个论据都与其他论据相连，作为对给定陈述的证明或反证。一个根语句可以有许多证明和反证，每一个也可能有证明和反证。语句也可以用在多个图表中，并且可以在“给定上下文”或假设下分析图表。

我需要构建一个相关参数的贝叶斯网络，以便每个节点将影响公平准确地传播到它的连接参数；我需要能够同时计算连接节点链的概率，每个节点都需要数据存储查找，必须阻塞才能获得结果；该过程主要受 I/O 限制，我的数据存储连接可以在 java、go 和 python {google appengine} 中异步运行。每次查找完成后，它会将效果传播到所有其他连接的节点，直到概率增量降至不相关阈值以下{当前为 0.1%}。该过程的每个节点都必须计算连接链，然后将所有查询中的所有结果求和以调整有效性结果，并将结果向外链接到任何连接的参数。

为了避免无限重复，我正在考虑在 goroutines 中使用类似 A* 的过程来传播参数映射的更新，使用基于复合影响的启发式算法，一旦影响概率下降到 0.1% 以下，就会忽略节点。我曾尝试使用 SQL 触发器来设置计算，但它变得复杂和混乱的方式太快了。然后我转到google appengine来利用异步nosql，它更好，但仍然太慢。我需要以足够快的速度运行更新以获得一个简洁的 UI，因此当用户创建或投票赞成或反对证明或反驳时，他们可以立即看到结果反映在 UI 中。

我认为 Go 是支持我需要的并发性的首选语言，但我愿意接受建议。客户端是一个单一的 JavaScript 应用程序，它只使用 XHR 和 websockets 来实时推送和拉取参数映射{及其更新}。我有一个 java 原型，可以在 10~15 秒内计算出大型链，但对性能的监控表明，我的大部分运行时间都浪费在了同步和 ConcurrentHashMap 的开销上。

如果还有其他高并发语言值得尝试，请告诉我。我知道 java、python、go、ruby 和 scala，但如果适合我的需要，我会学习任何语言。

同样，如果有大型贝叶斯网络的开源实现，请留下建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:21:10.767

我认为很难说出你在问什么。也许你可以详细说明你的问题。

Goroutines 非常便宜，并且非常适合大量使用 XHR 或 Websockets 的现代 Web 应用程序（以及其他必须等待数据库响应和类似东西的 I/O 绑定应用程序）。此外，go 运行时还能够并行执行这些 goroutine，因此 Go 也非常适合 CPU 密集型任务，这些任务应该利用多核和本机编译语言的速度。

但是你也应该记住，goroutines 和 channels 不是免费的。它们仍然需要一定数量的内存，并且每个同步点（例如通道发送或接收）都有其成本。这通常不是问题，因为与数据库查询相比，同步非常便宜，但它可能不适合构建高效的贝叶斯网络，特别是如果每​​个 goroutine / 节点的实际工作与同步开销。

每个并发程序的主要目标应该是尽可能避免共享可变性。因此，使用 goroutine 和通道建模的贝叶斯网络可能是一个很好的教育示例，也是衡量 Go 通道实现性能的好方法，但它可能不是最适合您的问题。

# api - 为什么我的 oAuth 签名最后需要“%26”？

> ID：10529368
> 
> 赞同：1
> 
> 时间：2012-05-10T07:34:30.523
> 
> 标签：api, oauth, imgur

我正在使用 imgur 的 API，需要设置 oAuth 身份验证。进展很顺利，但我遇到了障碍......

我无法让 oAuth request_token 端点向我发送成功消息，因此我联系了 imgur 开发人员，他们给了我一条关键信息。但是，我找不到这些信息的来源。

我所说的信息是我的**oAuth 签名**。我知道 oAuth 签名只是我的**api_secret**，但是在 imgur 开发人员提供的工作代码中，最后有一个 & 标记。

这个 & 符号是 URL 编码的，两次。它从`&`到`%26`，然后到`%2526`

```
API Secret        => 7fc6ff69*snip*c4016e7f99e076 // This does not work by itself
[oauth_signature] => 7fc6ff69*snip*c4016e7f99e076%2526 // Works
[oauth_signature] => 7fc6ff69*snip*c4016e7f99e076&  // This also works 
```

为什么需要 & 符号？这是一个错误，还是在[oAuth 1.0 文档](http://oauth.net/core/1.0)中的某个地方确实提到过？它总是一个＆符号，还是只是一个奇怪的巧合？我不知道它是从哪里来的...

编辑：值得一提的是 oauth_signature 是请求中的最后一个变量，所以它不应该与另一个变量合并。基本上，URL 的结尾必须以 & 符号（或 html 编码的版本）结尾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:02:14.373

对于受保护的 OAuth 请求，签名通常是使用一*对*秘密（通常是共享秘密和授权令牌秘密）生成的。正如您可能已经猜到的那样，与号（“&”）用于分隔这两个秘密。但是，当使用单个密钥作为签名时（与 imgur 一样），与号仍然是必需的，但是因为没有第二个密钥可以分开，所以与号出现在字符串的末尾。另一种思考方式是与号分隔 api_secret 和一个空的秘密。

# c# - 单击桌面快捷方式时从系统托盘恢复应用程序

> ID：10529370
> 
> 赞同：3
> 
> 时间：2012-05-10T07:34:37.060
> 
> 标签：c#, winforms, system-tray

我创建了一个应用程序，它在启动时会在系统托盘中启动。我使用下面的帖子来实现这一点： [如何启动 WinForm 应用程序最小化到托盘？](https://stackoverflow.com/questions/1730731/how-to-start-winform-app-minimized-to-tray)

此应用程序还只允许单个实例运行： http: [//www.codeproject.com/Articles/32908/C-Single-Instance-App-With-the-Ability-To-Restore](http://www.codeproject.com/Articles/32908/C-Single-Instance-App-With-the-Ability-To-Restore)

我遇到的问题是，当我第一次启动应用程序时，它会最小化到系统托盘，但是如果我单击桌面图标，它不会出现。我必须单击托盘中的图标才能恢复应用程序。如果我再次最小化它，然后单击它出现的桌面图标。

这是我对 winform 应用程序的第二次尝试，它与 SetVisibleCore 有关吗？

任何朝着正确方向的指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:57:37.993

如果你让你的 WinForms 应用程序是单例的，那么让最小化的窗口恢复是很容易的，

[http://www.hanselman.com/blog/TheWeeklySourceCode31SingleInstanceWinFormsAndMicrosoftVisualBasicdll.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode31SingleInstanceWinFormsAndMicrosoftVisualBasicdll.aspx)

它只是使用 Microsoft.VisualBasic.ApplicationServices 命名空间中的 WindowsFormsApplicationBase 的另一种变体。比使用互斥锁更容易/更好。

你可能会改变

```
 void this_StartupNextInstance(object sender, StartupNextInstanceEventArgs e)
    {
        Form1 form = MainForm as Form1; //My derived form type
        form.LoadFile(e.CommandLine[1]);
    } 
```

至

```
 void this_StartupNextInstance(object sender, StartupNextInstanceEventArgs e)
    {
        Form1 form = MainForm as Form1; //My derived form type
        form.Show();
        form.WindowState = FormWindowState.Normal;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:10:06.490

如果您在 main.js 中编写恢复逻辑怎么办？您可以使用[ShowWindow](http://msdn.microsoft.com/en-us/library/ms633548.aspx)函数和`SW_MAXIMIZE`标志来执行此操作。

```
 [DllImport("user32.dll", CharSet = CharSet.Auto)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

    private const int SW_MAXIMIZE = 9; //Command to restore the window

    [STAThread]
    static void Main()
    {
        bool onlyInstance = false;
        Mutex mutex = new Mutex(true, "UniqueApplicationName", out onlyInstance);
        if (!onlyInstance) 
        {
             Process[] p = Process.GetProcessesByName("UniqueApplicationName");
             SetForegroundWindow(p[0].MainWindowHandle);
             ShowWindow(p[0].MainWindowHandle, SW_MAXIMIZE);
             return;
        }
        Application.Run(new MainForm);
        GC.KeepAlive(mutex);
} 
```

# wix - 如何将资源文件添加到 WIX 项目

> ID：10529374
> 
> 赞同：1
> 
> 时间：2012-05-10T07:35:07.023
> 
> 标签：wix, wix3.5

我的安装程序已切换到 WiX 3.5 版。我已经看到，要添加文件，我们需要`<Component>`为每个文件定义一个条目。这对我来说没问题。

我的应用程序已本地化，并为法语和英语定义了资源字符串条目。`/bin`构建会在文件夹中创建一个附属结构。

我是否必须以与任何其他文件类似的方式将该结构添加到 WiX，还是有更直接的方法？

# jquery - 如果 CKeditor 实例已经存在于 jQuery 中，则删除它

> ID：10529379
> 
> 赞同：1
> 
> 时间：2012-05-10T07:35:22.000
> 
> 标签：jquery, ckeditor

如果 CKeditor 实例在 jQuery 帮助下已经存在，我该如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:55:52.620

你可以试试： `CKEDITOR.instances.*instanceName*.destroy();`

[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#destroy](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#destroy)

确认存在后删除编辑器： [CKEditor instance already exists](https://stackoverflow.com/questions/1794219/ckeditor-instance-already-exists)

# android - 应用相机崩溃

> ID：10529381
> 
> 赞同：0
> 
> 时间：2012-05-10T07:35:33.633
> 
> 标签：android, memory, crash, camera, android-camera

我在 developer.android.com 中使用下一个教程：http: [//developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html) 和 API 2.1

*   当我点进去拍小照片，没问题
*   点进去拍小图，点进去拍大图，没问题
*   但是，当我直接点击大图时，我拍了一张照片，我的应用程序崩溃了......

在 LogCat 中：

```
05-10 09:26:30.773: D/CameraSample(3407): failed to create directory
05-10 09:26:33.713: W/IInputConnectionWrapper(3407): showStatusIcon on inactive InputConnection
05-10 09:26:45.883: I/Parcours(3407): handleBigCameraPhoto
05-10 09:26:46.133: D/dalvikvm(3407): GC_EXTERNAL_ALLOC freed 124K, 52% free 2628K/5379K, external 1685K/2133K, paused 207ms
05-10 09:26:46.143: E/dalvikvm-heap(3407): 31961088-byte external allocation too large for this process.
05-10 09:26:46.163: E/GraphicsJNI(3407): VM won't let us allocate 31961088 bytes
05-10 09:26:46.213: D/dalvikvm(3407): GC_FOR_MALLOC freed 2K, 52% free 2625K/5379K, external 1685K/2133K, paused 55ms
05-10 09:26:46.213: D/skia(3407): --- decoder->decode returned false
05-10 09:26:46.213: D/AndroidRuntime(3407): Shutting down VM
05-10 09:26:46.223: W/dalvikvm(3407): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
05-10 09:26:46.223: E/AndroidRuntime(3407): FATAL EXCEPTION: main
05-10 09:26:46.223: E/AndroidRuntime(3407): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:284)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at rdaquin.apps.takephoto.TakePhotoActivity.setPic(TakePhotoActivity.java:124)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at rdaquin.apps.takephoto.TakePhotoActivity.handleBigCameraPhoto(TakePhotoActivity.java:195)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at rdaquin.apps.takephoto.TakePhotoActivity.onActivityResult(TakePhotoActivity.java:281)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2549)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2595)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.ActivityThread.access$2000(ActivityThread.java:121)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.os.Looper.loop(Looper.java:123)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at android.app.ActivityThread.main(ActivityThread.java:3701)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at java.lang.reflect.Method.invokeNative(Native Method)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at java.lang.reflect.Method.invoke(Method.java:507)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
05-10 09:26:46.223: E/AndroidRuntime(3407):     at dalvik.system.NativeStart.main(Native Method) 
```

如果你需要一个代码，问我。

我不明白为什么我的应用程序崩溃了，我觉得这是一个内存问题但我不知道该怎么办。这样当我“拍一张小照片”和“拍一张大照片”时，它就可以工作了。但是如果我重新加载应用程序并且我“拍一张大照片”不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:04:33.167

我认为从堆栈跟踪中可以很明显地看出，由于您试图在堆上分配 32MB，所以您的内存不足。你不能那样做。这并不奇怪，因为当你拍一张大照片时会发生这种情况。你不能把它放在记忆中。将其写入存储。

# javascript - Pinterest API 可用性

> ID：10529386
> 
> 赞同：1
> 
> 时间：2012-05-10T07:36:05.680
> 
> 标签：javascript, api, pinterest

如您所知，pinterest api 现在似乎已关闭。（ api.pinterest.com ）在此站点中：[http](http://tijn.bo.lt/pinterest-api) ://tijn.bo.lt/pinterest-api ，它说只读访问仍然有效。究竟是什么意思？

我可以使用此 api 构建应用程序，但不能使用固定或创建自己的板？

抱歉，如果我的问题太荒谬了，我是个新手，无法使用 API 创建应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:52:37.967

该网站上发布的信息有点过时了。

该 API 直到最近才允许读/写访问，但大约两周前，Pinterest 停止通过其原始身份验证方案发布新的访问令牌。新方案要求 API 用户生成一个 oauth 签名来接收访问令牌（需要使用 API），因此 API 只能被那些从 Pinterest 收到其应用程序的 client_id 和 client_secret 的人访问。

警告：如果你碰巧有一个使用旧 API 发出的旧 access_key，你显然仍然可以使用它来进行 API 调用，尽管我猜这些令牌很快就会过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:38:28.427

如果 API*只允许只读*，这意味着您可以使用源中的数据，但不能写入它。您可能会从您的板上获取项目列表，但您无法以编程方式将新项目推送到您的板上。

这是一条单向路，直到他们开辟另一条车道。

# javascript - jQuery Flot xaxis 时间格式

> ID：10529389
> 
> 赞同：0
> 
> 时间：2012-05-10T07:36:22.393
> 
> 标签：javascript, jquery, time, flot, time-format

我正在为我的图表使用 jQuery Plot。我有一个包含数据库中一些时间戳和值的列表。

我想将我的时间戳转换为 H:i:s 格式。该结果是从 10-05-2012 08:57:45 到 10-05-2012 09:03:40。

```
var rx = [[1336633065,  152], [1336633071,  152], [1336633076,  152], [1336633080,  153], [1336633086,  152], [1336633090,  152], [1336633095,  152], [1336633100,  152], [1336633105,  152], [1336633110,  150], [1336633115,  150], [1336633120,  152], [1336633125,  152], [1336633130,  150], [1336633135,  149], [1336633140,  153], [1336633145,  149], [1336633150,  152], [1336633155,  149], [1336633161,  149], [1336633165,  152], [1336633170,  152], [1336633175,  151], [1336633180,  150], [1336633185,  149], [1336633190,  151], [1336633195,  152], [1336633201,  152], [1336633205,  149], [1336633210,  151], [1336633215,  149], [1336633220,  151], [1336633225,  152], [1336633230,  149], [1336633235,  151], [1336633240,  152], [1336633245,  149], [1336633250,  152], [1336633255,  150], [1336633260,  152], [1336633265,  152], [1336633270,  149], [1336633275,  152], [1336633280,  150], [1336633285,  152], [1336633290,  149], [1336633295,  152], [1336633300,  149], [1336633305,  152], [1336633310,  150], [1336633315,  152], [1336633321,  149], [1336633325,  149], [1336633330,  152], [1336633335,  150], [1336633340,  152], [1336633345,  149], [1336633350,  152], [1336633355,  149], [1336633360,  149], [1336633365,  150], [1336633370,  152], [1336633375,  150], [1336633380,  152], [1336633385,  150], [1336633390,  150], [1336633395,  152], [1336633400,  150], [1336633405,  152], [1336633410,  152], [1336633415,  149], [1336633420,  152]]; 
```

当我使用这个选项时，我的 xaxis 是空的.....我错了什么？？？？？？？：

```
var options = {
  legend: { show: false },
  series: {
    lines: { show: true, shadowSize: 1 },
    points: { show: false }
  },
  yaxis: { ticks: 10 },
  xaxis: { mode: "time", timeformat: "%H:%M:%S"
  },
  selection: { mode: "x" }
}; 
```

当我使用此选项时，我会在我的 xaxis 中获得时间戳......但这对于阅读此图表的用户来说并不是很清楚：

```
var options = {
  legend: { show: false },
  series: {
    lines: { show: true, shadowSize: 1 },
    points: { show: false }
  },
  yaxis: { ticks: 10 },
  selection: { mode: "x" }
}; 
```

有人可以帮我弄这个吗？如何在 xaxis 中将时间戳转换为小时：分钟：秒格式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T11:49:25.150

Flot 使用 JavaScript 时间戳，以毫秒而不是通常的秒表示。所以你需要将你的时间戳乘以一千。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:40:07.713

提到的时间格式不被 flot 识别。请用`%y/%m/%d`

# blackberry - 黑莓 AES 加密错误

> ID：10529390
> 
> 赞同：1
> 
> 时间：2012-05-10T07:36:23.550
> 
> 标签：blackberry, encryption, java-me, aes

我使用知识库文章[“如何 - 使用高级加密”中的代码在 BlackBerry 中实现了 AES 加密](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800779/How_to_-_Use_Advanced_Encryption.html?nodeid=800439&vernum=0)

我不断收到错误：

> 未找到模块“net_rim_crypto”。

在我导入的代码中 net.rim.device.api.crypto.*; 包，但我找不到包 net.rim.crypto。

我需要为此添加任何外部 jar 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:25:54.197

如果您对 BlackBerry API 或 OS 版本有疑问，您可以考虑使用[bouncy castle](http://www.bouncycastle.org/latest_releases.html) for j2me。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:46:39.257

您应该安装 JRE 4.6 并将 API 级别设置为 4.6 并且目标设备的操作系统应该高于 JRE 版本。

# java - List 关系中的项目顺序

> ID：10529395
> 
> 赞同：2
> 
> 时间：2012-05-10T07:36:33.253
> 
> 标签：java, jpa, orm

这可能非常简单，但我在 JPA 规范中找不到任何明确的说明。如果我有一个没有注释的`List`基于关系的关系，例如：`@OrderBy`

```
@OneToMany
List<Child> children; 
```

那么这个列表元素在 Java 中的顺序是什么？`Child`如果它是多对多的，这将是表中相应记录或中间表中条目的顺序似乎是合理的，但这是 JPA 提供者的**保证**行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:56:34.580

此外，当您的实体没有子实体时，JPA 规范没有指定在您检索列表时它是否应返回空列表或 null，因此请务必检查它以避免空指针异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:45:03.553

据我所知，规范不保证订单。如果您依赖订单，[@OrderBy是要走的路。](http://docs.oracle.com/javaee/6/api/javax/persistence/OrderBy.html)

编辑：引用 JPA 1.0 规范：

> 可移植应用程序不应期望在持久性上下文中维护列表的顺序，除非使用 OrderBy 构造并且对列表的修改遵循指定的顺序。该命令不是持久的。

（第 19 页，脚注 [4]）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:44:01.433

没有保证的行为，每次的顺序可能不同。休眠时发生在我身上：刷新页面时顺序发生了变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:38:29.837

您可以在搜索时对搜索结果进行排序，而不是在类及其属性的定义中。

# php - 使用 spl_autoload_register 的自动加载问题

> ID：10529396
> 
> 赞同：0
> 
> 时间：2012-05-10T07:36:34.543
> 
> 标签：php, autoloader, spl-autoload-register

首先，我想告诉你我的目录结构

```
- /var/www
   |- /social_network/
      |- index.php
      |- /application/
         |-/controllers/  
                 |-user.php
         |- /models/
         |- framework.php
    |-/tmp/ 
```

在我的 index.php 中，我包含 application/framework.php 这是我的 framework.php 代码

```
 <?php
spl_autoload_register();
class Framework{
        public function load($page, $data){
                if(is_array($data)){
                        extract($data);
                }
                include "views/".$page;
        }
}

$object = "controller\\$controller";
$object = new $object;
if(method_exists($object,"$method")){
$object->$method();
} else {
        show_404();
}

?> 
```

现在使用上面的代码，自动加载我的类工作正常。如果您想知道 $method 和 $controller 来自 index.php，具体取决于 URI。

现在我的一个朋友告诉我这是错误的做法，所以我将代码更改为

```
 <?php
function autoload_controller($controller){
    include "$controller.php";
}
spl_autoload_register('autoload_controller');
class Framework{
        public function load($page, $data){
                if(is_array($data)){
                        extract($data);
                }
                include "views/".$page;
        }
}

$object = "controller\\$controller";
$object = new $object;
if(method_exists($object,"$method")){
$object->$method();
} else {
        show_404();
}

?> 
```

现在我在下面收到此错误

```
Warning: include(controller\User.php): failed to open stream: No such file or directory in /var/www/social_network/application/framework.php on line 3 Warning: include(): Failed opening 'controller\User.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/social_network/application/framework.php on line 3 Fatal error: Class 'controller\User' not found in /var/www/social_network/application/framework.php on line 16 
```

我该如何解决这个问题，我已经在这几个小时了，如果可能的话，请告诉我如何使用自动加载从控制器类内部的模型目录中调用模型谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:41:19.580

```
set_include_path(get_include_path().PATH_SEPARATOR.'/var/www/social_network/application/'); 
```

或一些常数而不是硬编码字符串

# java - 表达式的类型必须是数组类型，但它解析为“温度”-JAVA

> ID：10529399
> 
> 赞同：1
> 
> 时间：2012-05-10T07:36:49.780
> 
> 标签：java

大家晚安，

所以我做了一个温度类，它有一个构造函数来制作温度。温度是 2 个数字 [冷、热] 的数组列表。

```
 public int hotness;
public int coldness;
public int[] temperature;
public int maxTemperature = 10000;

//Constructor Temperature
public Temperature(int hotness, int coldness) {
    /**
     * A constructor for the Array Temperature
     */
    maxTemperature = getMaxTemperature();
        if(hotness <= maxTemperature && coldness <= maxTemperature)
        temperature[0] = coldness;
        temperature[1] = hotness;
        } 
```

现在我想进入另一个类并使用该对象温度进行一些计算。这是它的代码。

```
 //Variabels

public int volatility;
private static Temperature temperature;
private static int intrensicExplosivity;

    public static int standardVolatility(){
    if(temperature[0] == 0){
        int standardVolatility = 100 * intrensicExplosivity * (0.10 * temperature[1]);
    } 
```

所以现在我得到了错误：表达式的类型必须是数组类型，但它解析为“温度”

任何解决方案？

我对 Java 很陌生，所以可能只是一些语法错误，但我就是找不到。

提前致谢。大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:44:38.470

首先在 Temperature 类中创建 getter 和 setter 方法，然后调用 temperature.getTempertature() 并在第二个类中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:39:33.923

代替

```
public static int standardVolatility() {
    if(temperature[0] == 0) { 
```

尝试

```
public static int standardVolatility() {
    if(tepmerature.temperature[0] == 0) {
       ^^^^^^^^^^^^ 
```

请注意，`temperature`您的第二个片段中的类型`Temperature`本身具有一个名为`temperature`. 要访问对象的`temperature`-array `Temperature`，您必须执行`temperature.temperature`.

* * *

正如@Marko Topolnik 指出的那样，您可能还想改变

```
public int[] temperature; 
```

至

```
public int[] temperature = new int[2]; 
```

以便为两个温度值腾出空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:39:51.717

`tempeture``Tempeture`是不是数组的类型。您想要的是`temperature`对象实例（也称为`tempature`）中的数组成员。

无论如何改变线：

```
if(temperature[0] == 0) 
.
. 
```

和 ：

```
if(temperature.tempature[0] == 0)
.
. 
```

我建议您使用 getter 和 setter，并使用不会让您感到困惑的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:41:00.297

你在这里混合了一些变量。

在下面的代码块中，`temperature`指的是您的`Temperature`类的一个实例，但您假设它指的是温度数组，它是`Temperature`该类的成员。

```
public static int standardVolatility() {
    if(temperature.temperature[0] == 0){
        int standardVolatility = 100 * intrensicExplosivity * (0.10 * temperature[1]);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T07:47:24.940

嗯，你的问题就在这里

```
private static Temperature temperature;
if(temperature[0] == 0){
        int standardVolatility = 100 * intrensicExplosivity * (0.10 * temperature[1]);
} 
```

您正在使用一个对象作为数组。那是错误的。相反，请使用 GET 和 set 方法来设置和获取温度。不要公开所有数据，这对 OO 编程非常不利。使用那些 getter 和 setter。像：`if(temperature.getTemperature()==0) etc.`

PS：别忘了用 new 操作符 ( `Temperature temperature = new Temperature(10,30);`)初始化对象

# ruby-on-rails - libmysqlclient.so.15：无法打开共享对象文件：没有这样的文件或目录

> ID：10529401
> 
> 赞同：0
> 
> 时间：2012-05-10T07:36:57.413
> 
> 标签：ruby-on-rails, linux, apache, centos, passenger

直到今天，所有 Rails 应用程序都运行良好。我不确定是否有人更改了这台机器上的设置。但是，有谁知道这可以解决什么问题？

细节：

1.  Centos 5.5
2.  阿帕奇
3.  乘客
4.  导轨 3.0.x
5.  mysql 5.0.77

错误详情：

[![截屏](../Images/b6e932d9349a10c40f4e18eda4312f01.png)](https://i.stack.imgur.com/YwoiY.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T12:03:57.893

好的，这可以节省一天的时间。

```
wget -O /usr/lib64/libmysqlclient.so.15 http://files.directadmin.com/services/es_5.0_64/libmysqlclient.so.15
chmod 755 /usr/lib64/libmysqlclient.so.15
ldconfig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T12:50:46.990

您可以尝试通过以下命令找到正确的包：

```
$ sudo yum whatprovides libmysqlclient.so.15
libmysqlclient15-5.0.95-5.w5.i386
libmysqlclient15-devel-5.0.95-5.w5.i386
cpanel-mysql-libs-5.0.96-1.cp1136.i386 : The shared libraries required for MySQL clients 
```

然后：

```
$ sudo yum reinstall WHATEVER_THE_PACKAGE_NAME_IS 
```

您可以通过执行来仔细检查包名称`yum search package_name`。

如果没有找到，您可以尝试修复您的 yum 存储库，例如通过配置[Webtatic Yum](http://webtatic.com/projects/yum-repository/)存储库。

要设置存储库，请安装 webtatic-release RPM：

用于 CentOS/RHEL 6 的 Webtatic EL6：

```
rpm -Uvh http://mirror.webtatic.com/yum/el6/latest.rpm 
```

用于 CentOS/RHEL 5 的 Webtatic EL5.1：

```
rpm -Uvh http://repo.webtatic.com/yum/el5/latest.rpm 
```

CentOS/RHEL 5 的 Webtatic 5：

```
rpm -Uvh http://repo.webtatic.com/yum/centos/5/latest.rpm 
```

并再次重复搜索/重新安装过程。

* * *

如果您正在运行**cPanel**，您可以尝试运行以下脚本：

```
/scripts/check_cpanel_rpms --fix 
```

如果没有帮助，请删除损坏的包，例如`rpm -e cpanel-mysql-5.0.96-1.cp1136`并再次运行检查命令。

如果仍然不起作用，另一件事可能是通过以下方式重新编译您的 Apache（仅当您的 LAMP 损坏时）：

```
/scripts/easyapache 
```

# wordpress - 删除 Yoast SEO 插件添加的 rel canonical

> ID：10529409
> 
> 赞同：12
> 
> 时间：2012-05-10T07:37:18.073
> 
> 标签：wordpress

快速谷歌后找不到解决方案，所以我想在这里快速发布一个帖子。

尝试删除自动添加的 rel=canonical 链接（由 Wordpress SEO 插件添加 - 由 Yoast 提供）。

我实际上希望谷歌抓取每个不同的子页面，即使它可能不会离开父页面。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T19:43:38.423

rel="canonical" 与爬行无关。它与索引有关，并防止同一页面索引两次或更多。

无论如何，如果你仍然想这样做，你可以通过将此代码添加到你的 functions.php 来做到这一点：

```
add_filter( 'wpseo_canonical', '__return_false' ); 
```

来源：[https ://yoast.com/wordpress/plugins/seo/api/](https://yoast.com/wordpress/plugins/seo/api/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-03T13:36:58.197

你也可以在`wordpress conditional tags`

参考：[https ://codex.wordpress.org/Conditional_Tags](https://codex.wordpress.org/Conditional_Tags)

```
// Remove - Canonical for - [Search - Page]
function remove_canonical() {

    // Disable for 'search' page
    if ( is_search() ) {
        add_filter( 'wpseo_canonical', '__return_false',  10, 1 );
    }
}
add_action('wp', 'remove_canonical'); 
```

删除所有页面的规范。

```
// Disable Canonical for - ALL pages
function remove_canonical() {
    add_filter( 'wpseo_canonical', '__return_false',  10, 1 );
}
add_action('wp', 'remove_canonical'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T12:59:21.937

很可能规范不是由 yoast 生成的，有一个 wordpress 内置功能，您可以通过将其添加到主题的 functions.php 来防止它

```
remove_action('wp_head', 'rel_canonical'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T11:25:45.837

```
remove_action('wp_head', 'rel_canonical'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-26T23:09:23.127

较新版本的 Yoast 忽略了此代码。在 Yoast 15.0 上测试

```
// Disable Canonical for - ALL pages
function remove_canonical() {
    add_filter( 'wpseo_canonical', '__return_false',  10, 1 );
}
add_action('wp', 'remove_canonical'); 
```

我用过滤器优先级值修复了它。这是工作代码：

```
// Disable Canonical for - ALL pages
function remove_canonical() {
    add_filter( 'wpseo_canonical', '__return_false');
}
add_action('wp', 'remove_canonical', -19999); 
```

**因为新的 Yoast 版本（如 15.0）使用负优先级来处理插件文件 front-end-integration.php 中的 wpseo_head：**

```
\add_action( 'wpseo_head', [ $this, 'present_head' ], -9999 ); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-03-20T15:40:54.383

您还可以禁用 wordpress 的规范网址。看这里：[Desactivar rel=”canonical” de Yoast WordPress SEO o de WordPress](http://nicolasviroga.com/desactivar-relcanonical-yoast-wordpress-seo-o-wordpress/4937)

# objective-c - 关于导航控制器

> ID：10529412
> 
> 赞同：0
> 
> 时间：2012-05-10T07:37:25.430
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何在基于视图的应用程序中添加 uinavigation 控制器](https://stackoverflow.com/questions/7398151/how-to-add-uinavigation-controller-in-a-view-based-application)

我是objective c的新用户.....所以我对objective c没有更多的了解，所以我想知道我们如何将导航控制器添加到基于视图的应用程序中？.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:43:19.497

最简单的方法是在 Xcode 中创建一个新项目并选择 Master-Detail Application 模板，然后检查自动生成的代码，尤其是在 AppDelegate 方法`-application:didFinishLaunchingWithOptions:`中。您将看到如何创建一个新`UINavigationController`的，如何创建另一个`UIViewController`并将其添加到窗口`UINavigationController`，然后将`UINavigationController`其设置为`rootViewController`窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:43:45.207

// 在应用程序 delgete 窗口上添加导航控制器。

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:[[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil]];

[窗口添加子视图：导航控制器]；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:49:16.120

UIViewController *aViewController = ... //你需要分配你的视图控制器对象 UINavigationController *newController = [[UINavigationController alloc] initWithRootViewController:aViewController];

[self presentModalViewController:newController Animation:YES];

//你需要释放控制器 [newController release];

# c++ - Qt - Glut32 库

> ID：10529414
> 
> 赞同：1
> 
> 时间：2012-05-10T07:37:32.340
> 
> 标签：c++, qt-creator, glut, lnk2019

我正在尝试使用 Qt 创建者创建一个 Glut 窗口。我所有的代码都是在另一台计算机上完成的。现在，我想自己编译它。

我在以下文件夹中添加了 Glut32 库文件：

*   glut32.lib 到我的项目目录中的 lib/ 文件夹中
*   glut32.dll 进入我的项目目录
*   glut.h 到我的项目目录中的 GL/ 文件夹中

在我的专业文件中，我添加了以下几行：

```
LIBS += -L$$PWD/lib/glut32.lib
LIBS += Opengl32.lib 
```

在我的代码中，我包含以下内容：

```
#include <gl/GL.h>
#include "GL/glut.h" 
```

Qt 不报告最后一个包含的任何错误！

所以，当我尝试编译我的代码时，我有很多错误说：

```
error LNK2019: unresolved external symbol 
```

所有这些错误都属于无法找到的过剩函数。那么，当我包含 glut32 库时，我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:09:13.543

也许它可以帮助您知道，您可以在 pro 文件中输出消息，例如：`message("Location of glut32.lib" + $$PWD/lib/glut32.lib)`. 因此，您可以检查您的路径是否正常。另请注意，您添加的库`-l<LibName>`和库路径为`-L<LibPath>`，因此您应该尝试替换`-L$$PWD/lib/glut32.lib`为`-l$$PWD/lib/glut32.lib`

有关更多选项，请参阅[qmake 变量参考](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html/)

# wpf - WPF错误？单击和双击鼠标手势

> ID：10529436
> 
> 赞同：3
> 
> 时间：2012-05-10T07:38:42.880
> 
> 标签：wpf, xaml, mouseevent, double-click

我们为鼠标点击手势实现了一个简单的 InputBinding，代码如下：

```
<Image.InputBindings>
    <MouseBinding MouseAction="LeftClick" Command="{Binding OpenDialogCommand}" />
    <MouseBinding MouseAction="LeftDoubleClick" Command="{Binding OpenDialogCommand}" />
</Image.InputBindings> 
```

我们希望 WPF 能够识别 Left 和 LeftDouble 手势并执行相应的命令。但在实践中我们发现左键点击是先评估的，双击的第二次点击被视为另一个单击。由于我们的命令是打开一个对话框，因此双击将快速打开和关闭我们的对话框。

有没有人遇到过这样的事情？

谢谢。

S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:59:34.943

我认为这是期望的行为。请注意，这是一个 LeftClick 事件，不一定表示“LeftSingleClick”。您应该查看[Snoop](http://snoopwpf.codeplex.com/)实用程序以准确调查哪些事件被触发。

# sql-server - 在 MVC 4 的 sql 数据库中插入表单值

> ID：10529438
> 
> 赞同：0
> 
> 时间：2012-05-10T07:38:59.713
> 
> 标签：sql-server, asp.net-mvc, sql-server-2008, asp.net-mvc-4

我的 MVC 4 应用程序要求我将表单的文本框值存储在 SQL 数据库中。我已经创建了用于插入记录的存储过程。但是，`[HttpPost]`我不清楚要在控制器中编写的功能..

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:46:15.783

本页：[如何使用 ADO.NET 和 Visual C# .NET 调用参数化存储过程](http://support.microsoft.com/kb/310070)包含一些可以帮助您的示例代码。

# javascript - 无法在 javascript 中设置隐藏字段值

> ID：10529439
> 
> 赞同：0
> 
> 时间：2012-05-10T07:39:00.237
> 
> 标签：javascript, asp.net, hidden-field

我在 aspx 中定义了一个隐藏文件：-

```
<asp:HiddenField runat ="server" ID="hfBrand" value = "False" /> 
```

组合框控件正在调用 JavaScript 函数函数：-

```
<telerik:RadComboBox ID="Brands" runat="server"  
                onclientselectedindexchanged="LoadProperties"
                AutoPostBack="True">
</telerik:RadComboBox> 
```

在该函数中，我试图将该隐藏字段值设置为“True”：-

```
function LoadProperties(sender, eventArgs)
{ 
var lblBrand = document.getElementById('<%= hfBrand.ClientID %>').value;
alert(lblBrand);
document.getElementById('<%= hfBrand.ClientID %>').value = "True";
alert(lblBrand)
} 
```

**问题**：- 我无法将隐藏字段值设置为 TRUE。为什么会这样？？以及如何做到这一点？

更新：-这是让我得到正确期望输出的解决方案：-

```
var lblBrand = document.getElementById('<%= hfBrand.ClientID %>').value;
alert(lblBrand);
lblBrand = "True";
alert (lblBrand); 
```

感谢所有帮助过我的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:48:59.933

您的第二个警报不是指隐藏值新值。更新 hfBrand 输入值后 lblBrand 值不会改变

```
function LoadProperties(sender, eventArgs)
{ 
var lblBrand = document.getElementById('<%= hfBrand.ClientID %>');
alert(lblBrand.value);
document.getElementById('<%= hfBrand.ClientID %>').value = "True";
alert(lblBrand.value)
} 
```

试试这个代码！

我认为它正在设置它，您需要再次获取输入的值......

（如果您想查看更改，只需将隐藏的输入暂时更改为普通文本框

# django - nginx/gunicorn 连接挂起 60 秒

> ID：10529440
> 
> 赞同：4
> 
> 时间：2012-05-10T07:39:03.217
> 
> 标签：django, nginx, timeout, gunicorn

我正在对 nginx->gunicorn->Django 应用程序执行 HTTP POST 请求。响应正文很快返回，但请求还没有完全完成大约 60 秒。

“完全完成”是指我尝试过的各种客户端（Chrome、wget、我正在构建的 Android 应用程序）表明请求仍在进行中，好像在等待更多数据。从 Wireshark 监听我看到所有数据都很快到达，然后在 60 秒后 ACK FIN 终于来了。

本地开发服务器 ( `./manage.py runserver`) 上的相同 POST 请求执行速度很快。此外，它绕过 nginx 直接针对 gunicorn 快速执行。在 Apache/mod_wsgi 设置中也可以快速运行。

GET 请求没有问题。甚至其他 POST 请求也可以。我知道的一个区别是这个特定的请求返回 201 而不是 200。

我认为它与`Content-Length`标头、关闭与保持连接连接有关，但还不知道事情应该如何正常工作。

*   后端服务器（gunicorn）当前正在关闭连接，这是有道理的。
*   后端服务器应该包括`Content-Length header`，还是`Transfer-encoding: chunked`？或者 nginx 是否应该能够在没有这些的情况下应对，并根据需要添加它们？
*   我认为保持连接是好的，不应该在 nginx 中禁用。

*更新：*设置`keepalive_timeout`为 0`nginx.conf`解决了我的问题。但是，当然，keep-alive 已经消失了。我仍然不确定是什么问题。可能堆栈中的某些东西（我的 Django 应用程序或 gunicorn）没有正确实现分块传输，并使客户感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:57:45.127

听起来您的上游服务器（gunicorn）以某种方式在特定的 api 调用上保持连接打开 - 我不知道为什么（取决于您的代码，我认为），但[`proxy_read_timeout`](http://wiki.nginx.org/HttpProxyModule#proxy_read_timeout)nginx 中的默认选项是 60 秒，所以听起来由于某种原因，没有收到此回复。

我使用了一个非常相似的设置，我一般没有注意到 POST 或任何其他请求的任何问题。

请注意，这`return HttpResponse(status=201)`曾给我带来过问题——似乎 Django 更喜欢明确空的主体：`return HttpResponse("", status=201)`工作。我通常在我期望的地方设置*一些东西——这可能是需要注意的事情。*

# php - 查询缓存效率为 2.4 %

> ID：10529442
> 
> 赞同：0
> 
> 时间：2012-05-10T07:39:18.160
> 
> 标签：php, sql-server, mysql

我正在尝试优化我的 mysql 数据库。我在运行 debian 的 VPS 上有大约 2000 个查询/秒和 16GB RAM。刚刚运行 MySQL Tuner。它说：

```
[!!] Query cache efficiency: 2.4% (1K cached / 51K selects)
... 
query_cache_limit (> 8M, or use smaller result sets) 
```

这是否意味着我应该增加或降低 query_cache_limit？

我现在有这些设置：

```
query_cache_limit   = 8M
query_cache_size    = 256M 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:59:46.830

通过按原样关闭统计数据，您将获得更好的性能。

如果您显示实际内存使用情况（百分比：（query_cache_size - Qcache_free_memory）/query_cache_size）会很有帮助

把记忆扔在它上面不太可能有帮助。可能有少量查询将从缓存中受益 - 我假设您已将 query_cache_type 设置为 1（自动）。将其更改为 2 并将 SQL_CACHE 声明添加到应该可缓存的选择中（注意 MySQL 要求查询的第一个字母为“S”以将其视为缓存的候选者）。

根据内存使用情况和空闲块的数量，您可能也应该减小缓存的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:47:39.730

您应该首先优化查询以利用查询缓存。2,4％的效率真的很低。[在这里阅读](http://www.mysqlperformanceblog.com/2006/07/27/mysql-query-cache/)很好，它将为查询缓存的实际工作方式提供大量信息。

**查询必须是确定性**的，我发现这很有趣..它让您考虑`NOW()`在查询中使用事物。很抱歉，在优化您当前的 51k 选择方面我无法提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T14:27:02.623

对我们来说，它可以降低 query_cache_limit。查询缓存限制设置结果集的大小以允许它在查询缓存中。

如果您将限制设置得更低（在我们的例子中为 64k），您可以在缓存中存储更多的小查询。

256M / 8M = 32 次查询 256M / 64K = 4096 次查询

# c - 关于 libcouchbase 中的 TAP

> ID：10529448
> 
> 赞同：0
> 
> 时间：2012-05-10T07:39:37.737
> 
> 标签：c, couchbase

我从 couchbase 文档中看到了“TAP”。我确实有点理解它的作用，但是很难找到使用 TAP APIs 的任何示例。如果您可以解释 TAP 到底是什么以及如何使用它，那就太好了 + 任何示例源都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:34:26.970

TAP 是 Couchbase 用于在集群中移动数据的内部 API。也有一些工具可以使用它。

一种用例是查看集群上发生的所有更新。使用我们的 Elastic Search 适配器（Java 中）中的一些代码可能会更好地实现这一点：

[https://github.com/couchbaselabs/elasticsearch-transport-couchbase](https://github.com/couchbaselabs/elasticsearch-transport-couchbase)

或者有一个项目可以在 Ruby 中提供更改的提要：[https ://github.com/scalabl3/couchbase-xdcr-sinatra](https://github.com/scalabl3/couchbase-xdcr-sinatra)

# winforms - 将控件作为参数传递

> ID：10529449
> 
> 赞同：0
> 
> 时间：2012-05-10T07:39:47.187
> 
> 标签：winforms, vb.net-2010

我正在开发一个项目，其中某些表单将具有重复的填充组合框的方法。在下面的代码片段中，安装在给定 pc 上的字体作为项目添加到组合框中。如何传递一个实际要填充的组合框的参数？例如，AddFonts（组合框）

```
Private Sub AddFonts()
    'add the font names installed on this pc to the font name combo box
    ' Get the installed fonts collection.
    Dim allFonts As New InstalledFontCollection
    ' Get an array of the system's font familiies.
    Dim fontFamilies() As FontFamily = allFonts.Families

    ' Display the font families.
    For i As Integer = 0 To fontFamilies.Length - 1
        'figure our how to make the textbox passable as a paramter
        cbxTitleFonts.Items.Add(fontFamilies(i).Name)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:46:42.070

将控件作为 Control Datatype 传递，并将其转换为函数中的实际控件。

```
Public  Sub mycallingfunc()
    myfunc(textbox1)
End Sub

Public Shared Sub myfunc(ctrl As Control)
    Dim txt As TextBox = DirectCast(ctrl, TextBox)
End Sub 
```

# android - 如何获取应用程序的启动和停止时间？

> ID：10529458
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:40:22.373
> 
> 标签：android

我是安卓新手。

我正在实施一个应用程序。

与我的应用相关

我想获得每个应用程序的启动和停止时间。

如果有人知道解决方案，请帮助我，

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:57:11.417

如果您没有通过使用 finish() 方法停止活动..那么我认为很难知道活动何时准确关闭..因为**onDestroy**是活动完成时调用的方法（有人在其上调用了 finish() ，或者因为系统暂时销毁该活动实例以节省空间......但在某些情况下，系统将简单地终止活动的托管进程而不调用此方法（或任何其他方法）......[请参阅 onDestroy方法在这里](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:04:18.413

您可以在 onStop() 中获取 onStart() 函数的开始时间和活动结束时间，只需在函数中定义给定的代码。

```
 Calendar c = Calendar.getInstance(); 
    Date StartTime = c.getTime();
    Log.i("Start Time", String.valueOf(StartTime)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:16:37.867

首先采取共享偏好。

如您所知，您的应用程序首次在该组件（活动，服务）中启动时转到 oncreate() 并创建共享首选项并保存当前系统时间。

最后你知道ondestroy（）中的最后一个活动或服务在哪里。带来你存储在共享首选项中的值。

现在 u 减去当前系统 - 这个存储的开始时间。您将获得在您的应用程序中花费的总时间。如果您愿意，可以将其保存到共享首选项。

# php - 构建一个 cron 作业调度程序

> ID：10529459
> 
> 赞同：5
> 
> 时间：2012-05-10T07:40:24.537
> 
> 标签：php, zend-framework, cron

目前我正在尝试构建一个好的调度程序系统作为在我的系统上设置和编辑 cron 作业的界面。我的系统是在 Linux 服务器上使用 Zend 框架 1.11.11 构建的。

我有 2 个主要问题希望得到您的建议：

**问题1：应用程序本身的设置**

我有两种方法来运行 cron 作业：

1.  第一种方法是创建一个文件夹`scripts`并在其中创建一个公共引导文件，我将只加载我需要的资源。然后对于每个任务，我将创建一个单独的脚本，并在每个脚本中包含引导文件。最后，我将在 crontab 文件中为这些脚本中的每一个添加一个 cron 任务，该任务将类似于`***** php /path/to/scripts/folder/cronScript_1.php`.

2.  其次，将 cron 作业视为普通请求（没有特殊的引导程序）。在 crontab 文件中为这些脚本中的每一个添加一个 cron 任务，该任务将类似于`***** curl http://www.mydomain.com/module/controller/action`.

**问题2：应用程序的接口**

添加 cron 作业也可以通过 2 种方式完成：

1.  对于每个任务，crontab 文件中都会有一个条目。当我想添加新任务时，我必须通过 cPanel 或任何其他方式来编辑 crontab（可能不可用）。

2.  将任务存储在数据库中并提供与数据库交互的 UI（网格以添加少量任务和配置）。之后，在每分钟运行的 crontab 文件中只写入 1 个 cron 作业。该作业将从数据库中选择所有作业并检查是否有现在应该运行的作业（将存储任务的时间并与服务器的当前时间进行比较）。

* * *

您认为哪种方式更好地实施每个部分？有没有现成的解决方案，一般来说更好？

**笔记**

我遇到[Quartz](http://www.quartz-scheduler.org/)会寻找现成的解决方案。这是我正在寻找的东西还是完全不同的东西？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T23:49:38.907

只是我的意见，但我个人喜欢 1 和 2，这取决于您的脚本打算完成的任务。例如，我们通常对所有 cron 条目执行 1，因为查看 /etc/crontab 并一目了然地看到应该运行的内容变得非常容易。但是，有时需要每分钟调用一次脚本，因为脚本中的逻辑会确定在那一分钟内运行什么。（即需要不断处理数百万用户，因此您有一个公式可以让用户在每小时的每一分钟内做什么）

另请查看 Gearman (http://gearman.org/)。它使您能够在一台机器上运行 cron 脚本，然后将作业分割成更小的部分，并将这些部分分配给其他服务器进行处理。您可以完全控制要在 map/reduce 方面采取多远。它极大地帮助了我们，使我们能够每分钟处理数千个算法脚本。如果我们需要更多功率，我们只需启动更多“主力”节点，Gearman 就会自动检测并利用它们。

我们目前在命令行上做所有事情并且不使用 cPanel、Plesk 等，所以我无法证明从这些后端之一编辑 crontab 是什么感觉。您可能需要考虑让一个人成为您团队中的 crontab“守门人”。将预期的 crontab 条目放入项目代码中不可通过 Web 访问的文件夹中。然后，每当对文件的更改被推送到版本控制时，该人就应该通过 SSH 连接到适当的机器并进行更改。我不确定您的内部结构，因此这可能可行，也可能不可行，但是让开发人员能够看到 crontab 执行脚本的方式是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:52:20.990

对于*问题 2：应用程序的接口*我使用了方法 1 和 2。我强烈推荐第二种方法。创建数据库表和构建 UI 将需要更多的前期工作。但从长远来看，这将使添加要运行的新作业变得更加容易。我为我现在的公司构建了 UI，它非常易于使用，以至于非技术人员（会计师、仓库主管）能够进入并创造就业机会。

比以 root 身份登录服务器、编辑 crontab、记住模式并保存要容易得多。另外，您不会被称为“crontab 家伙”，每个人都想在 crontab 中添加一些东西时会来找他。

至于设置应用程序本身，我会让 cron 调用一个脚本并让该脚本运行其余部分。这样你只需要 1 个 cron 条目。请注意，如果运行作业需要很长时间，您需要确保脚本仅在没有其他实例运行时才开始运行。否则，您最终可能会运行两次相同的作业。

# python - Linux 上的多处理进程终止失败

> ID：10529461
> 
> 赞同：6
> 
> 时间：2012-05-10T07:40:36.360
> 
> 标签：python, linux, python-3.x, multiprocessing

我刚刚注意到 Linux 上的进程终止（来自`multiprocessing`库）方法的问题。我有使用`multiprocessing`库的应用程序，但是......当我`terminate`在 Windows 上调用函数时，一切都很好，另一方面，Linux 在这个解决方案中失败了。作为进程杀戮的替代品，我被迫使用

```
os.system('kill -9 {}'.format(pid)) 
```

我知道这不太聪明，但它有效。所以我只是想知道为什么这段代码可以在 Windows 上运行，但在 Linux 上却失败了。

例子：

```
from multiprocessing import Process
import os

process=Process(target=foo,args=('bar',))
pid=process.pid
process.terminate() # works on Windows only

...

os.sytem('kill -9 {}'.format(pid)) # my replacements on Linux 
```

我的配置：python 3.2.0 build 88445；Linux-2.6.32-Debian-6.0.4

这是我的代码中的一个示例。我希望它就足够了。

```
def start_test(timestamp,current_test_suite,user_ip):
    global_test_table[timestamp] = current_test_suite
    setattr(global_test_table[timestamp], "user_ip", user_ip)
    test_cases = global_test_table[timestamp].test_cases_table

    test_cases = test_cases*int(global_test_table[timestamp].count + 1)
    global_test_table[timestamp].test_cases_table = test_cases
    print(test_cases)
    print(global_test_table[timestamp].test_cases_table)

    case_num = len(test_cases)
    Report.basecounter = Report.casecounter = case_num

    setattr(global_test_table[timestamp], "case_num", case_num)
    setattr(global_test_table[timestamp], "user_current_test", 0)

    try:
        dbobj=MySQLdb.connect(*dbconnector)
        dbcursor=dbobj.cursor()

        dbcursor.execute(sqlquery_insert_progress.format(progress_timestamp = str(timestamp), user_current_test = global_test_table[timestamp].user_current_tes$
    except :...

    for i in range(case_num):
        user_row = global_test_table[timestamp]
        current_test_from_tests_table = user_row.test_cases_table[i]
        unittest.TextTestRunner(verbosity=2).run(suite(CommonGUI.get_address(CommonGUI,current_test_from_tests_table[1], current_test_from_tests_table[2], user$
        global_test_table[timestamp].user_current_test = i + 1
        try:
            dbobj=MySQLdb.connect(*dbconnector)
            dbcursor=dbobj.cursor()

            dbcursor.execute(sqlquery_update_progress.format(progress_timestamp = str(timestamp), user_current_test = global_test_table[timestamp].user_current$
        except :...

@cherrypy.expose()
def start_test_page(self, **test_suite):
    timestamp = str(time.time())
    user_ip = cherrypy.request.remote.ip
    if on_server():
        sys.stdout=sys.stderr=open("/var/log/cherrypy/test_gui/{file}.log".format(file=timestamp),"a")
    current_test_suite = self.parse_result(**test_suite)
    #global_test_table[timestamp] = current_test_suite
    #setattr(global_test_table[timestamp], "user_ip", user_ip)
    user_test_process = Process(target=start_test, args=(timestamp,current_test_suite,user_ip))
    users_process_table[timestamp] = user_test_process
    user_test_process.start()
    return '''{"testsuite_id" : "''' + str(timestamp) + '''"}'''

@cherrypy.expose()
def stop_test(self, timestamp):
    if timestamp in users_process_table:
        if on_server():
            user_process_pid = users_process_table[timestamp].pid
            os.system("kill -9 " + str(user_process_pid))
        else:
            users_process_table[timestamp].terminate()
        del users_process_table[timestamp]
    else:
        return "No process exists" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:57:03.033

从[文档](http://docs.python.org/py3k/library/multiprocessing.html#multiprocessing.Process.terminate)：

> 终止（）
> 
> 终止进程。在 Unix 上，这是使用 SIGTERM 信号完成的；在 Windows 上使用 TerminateProcess()。请注意，退出处理程序和 finally 子句等将不会被执行。
> 
> 请注意，该进程的后代进程不会被终止——它们只会成为孤立的。

所以看起来你必须确保你的进程正确处理 SIGTERM 信号。

用于[`signal.signal`](http://docs.python.org/py3k/library/signal.html#signal.signal)设置信号处理程序。

要设置仅存在进程的 SIGTERM 信号处理程序，请使用：

```
import signal
import sys
signal.signal(signal.SIGTERM, lambda signum, stack_frame: sys.exit(1)) 
```

**编辑**

Python 进程通常在 SIGTERM 上终止，我不知道为什么您的多处理进程不会在 SIGTERM 上终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:51:14.043

不完全是您问题的直接答案，但由于您正在处理线程，这对于调试这些线程也可能会有所帮助： [https](https://stackoverflow.com/a/10165776/1019572) ://stackoverflow.com/a/10165776/1019572 我最近在cherrypy中发现了一个错误使用这个代码。

# mysql - MySQL 查询到 SQLite 查询

> ID：10529463
> 
> 赞同：0
> 
> 时间：2012-05-10T07:40:40.680
> 
> 标签：mysql, sqlite

我正在尝试将此 MySQL 查询转换为 SQLite 查询...

```
SELECT nickname 
FROM   userinfo 
ORDER  BY Round(RIGHT(nickname, Length(nickname) - Length('string'))) 
```

...用于对字母数字值进行排序。它在 MySQL 中按预期工作，但是当我在 SQLite 上运行它时，这个相同的查询不会返回任何记录。如何将此查询转换为 SQLite？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:56:27.173

试试这个：

```
SELECT nickname 
FROM   userinfo 
ORDER  BY Round(RIGHT(nickname, Len(nickname) - Len('string'))) 
```

# android - 应用程序上下文被杀死但活动没有

> ID：10529464
> 
> 赞同：5
> 
> 时间：2012-05-10T07:40:49.010
> 
> 标签：android, application-lifecycle

我正在开发一个有一些活动的应用程序。一个活动开始下一个活动。为了分享一些值，我使用了一个名为 MyApplication的自定义应用程序实现（我说的是*android.app.Application ）。*
众所周知，Android 系统会在应用程序需要更多空间时将其杀死。但这会导致一个问题：

*   我打开我的应用程序并像使用任何其他应用程序一样使用它
*   我关闭它（主页按钮）并使用其他应用程序
*   系统将杀死我的应用程序，因为它正在浪费内存
*   当我重新打开我的应用程序时，它想要打开我使用的最后一个活动并且我强制关闭，因为 MyApplication 中的值为 null

奇怪的是，系统破坏了我的应用程序，但它似乎保留了活动。我真的不明白为什么会这样，因为应用程序似乎没有生命周期。

我想要什么：
当 MyApplication（整个应用程序，不仅仅是活动）被杀死时，我希望最后的活动也被杀死。因此，当我重新打开应用程序时，它会启动 manifest.xml 提供的主要活动。
**或**
MyApplication 中的值是持久的，并且在应用程序被破坏时不会丢失。（我说的是一些对象，所以我认为共享首选项不起作用）。
我不想使用服务将我的活动绑定到，

我希望你明白我的问题是什么，有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:46:28.650

做事的正确方法是保存您的应用程序状态。重写 onSaveInstanceState(Bundle savedInstanceState) 方法以保存您的状态，并重写 onRestoreInstanceState 以检索它。

如果您需要保存大量数据，请考虑使用 SQL 数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:47:38.623

您应该确保应用程序在`onPause()`,`onResume()`和`onStop()`方法中以您希望的方式关闭并重新启动。检查`savedInstanceState`哪些可以保存应用程序的状态（并在它作为参数发送到 onCreate 时恢复它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T20:22:50.887

在应用程序的自定义实现中，添加一个标志说：

```
public boolean appContextExist = false; 
```

在您的第一个活动上，将标志设置为 true，

在需要上下文的 Activity 上覆盖 onCreate 和 onResume 方法，添加以下内容：

```
MyApplication myApp = ((MyApplication) getApplicationContext());
if (!myApp.appContextExist) {
    // Code to return to start activity here
} 
```

# crystal-reports - 适用于 Visual Studio 2010 的 Crystal Reports，并发限制

> ID：10529467
> 
> 赞同：0
> 
> 时间：2012-05-10T07:40:59.550
> 
> 标签：crystal-reports, crystal-reports-2010

我有一个小网站（asp.net），我使用 Crystal Reports for Visual Studio 2010 创建了一些报告。它们是非常基本的报告，用户只能选择导出为 pdf（之前甚至不能在浏览器中查看）出口）。

该站点托管在 IIS 中。

这几天，打开报表的时间变化很大，我相信这可能是由于多个用户同时打开报表。

在网上阅读了一些文章，我发现 Crystal Reports 存在一些并发限制，但无法找到确切的细节。

那么有人可以告诉我到底有什么限制吗？我怎样才能克服这些限制（购买许可证？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:50:30.877

你的水晶报表上的数据源是什么？是通过存储过程、表/命令吗？

如果你使用 SP 作为数据源，你能告诉我你的 SP 吗？

如果您使用表/命令作为数据源，那么问题将是服务器中可用的连接和资源。

# jquery - 文本框列出一个 jQuery 移动文本框

> ID：10529472
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:15.447
> 
> 标签：jquery, html, jquery-mobile, autocomplete, textboxlist

我正在构建一个自定义 jQuery Mobile 自动完成输入框（即不使用插件）并且我想使用文本框列表（即在文本字段内显示非文本元素，请参阅 Facebook 文本框中的标记以获取示例）。我无法找到有关如何解决此问题的任何资源。谁能指出我如何在 jQuery Mobile 输入框中显示非文本元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:39:20.547

您可以将图片以列表视图格式放置，是否会像自动完成那样显示项目列表视图以供从中选择图片？jquery mobile listview还有一个自动搜索栏，可以动态过滤已经内置的结果：

这是所有可能的列表视图类型的链接：

[jQuery-Mobile Listview](http://jquerymobile.com/test/docs/lists/docs-lists.html)

希望这可以帮助 ！

作为对您的评论的回应，自动完成建议似乎必须存储在一个数组中，这可能是通过一些请求动态填充的，或者我知道数据将是什么，只是从 jquery ui 站点对建议进行硬编码：

```
 <script>
        $(function() {
            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
            $( "#tags" ).autocomplete({
                source: availableTags
            });
        });
        </script>

    <div class="demo">

    <div class="ui-widget">
        <label for="tags">Tags: </label>
        <input id="tags">
    </div>

    </div><!-- End demo -->

<div class="demo-description" style="display: none; ">
<p>The Autocomplete widgets provides suggestions while you type into the field. Here the suggestions are tags for programming languages, give "ja" (for Java or JavaScript) a try.</p>
<p>The datasource is a simple JavaScript array, provided to the widget using the source-option.</p>
</div><!-- End demo-description --> 
```

这有帮助吗？你可以在这里看到更多：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

很抱歉让您因冗长的答案而陷入困境，但也可以增强自动完成功能以拍照，请参见此处：http: [//jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)我认为这可能与您的内容一致'正在寻找。

# google-docs-api - Google Drive Api 未按单词出现次数的降序返回结果

> ID：10529474
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:20.010
> 
> 标签：google-docs-api, google-drive-api

我正在使用 Google Documents List API 在文档中进行搜索。
在 google drive ui 上搜索会首先返回出现次数最多的单词的结果。但是使用 api 它首先返回最后上传日期的结果。这是我使用的 URL [https://docs.google.com/feeds/default/private/full?q=search+term](https://docs.google.com/feeds/default/private/full?q=search+term)

我也尝试了[https://docs.google.com/feeds/default/private/full?q=search+term&desc=true](https://docs.google.com/feeds/default/private/full?q=search+term&desc=true)但这给出了与我们之前得到的结果相同的结果，即最后上传日期。有人可以指导我应该将哪些附加参数添加到 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:46:48.993

您可以使用`orderBy`查询参数按特定条件对文档列表提要进行排序：

*   `last-modified`：默认值，按最后修改日期排序。
*   `last-accessed`：按上次访问日期排序。
*   `title`：按标题排序（这就是您要查找的内容。
*   `starred`：按其“星标”属性对文档进行排序。

# c++ - 建议为 C++ 选择线性代数库

> ID：10529475
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:23.010
> 
> 标签：c++, linear-algebra

请帮助我选择一个可以提供线性代数**高性能计算的 C++ 库。**

你能分享你对**犰狳**图书馆的经验吗（[http://arma.sourceforge.net/](http://arma.sourceforge.net/)）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:49:55.860

我会在[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)或 Sonys vectormath 库之间进行选择（google for vectormath aos，似乎找不到直接下载，但它是子弹的一部分）。索尼图书馆的花里胡哨的东西更少，语法有点不方便，但速度很快，尤其是对于他们自己的平台。索尼库仅限于用于游戏的线性代数的子集，但是，例如，矩阵不超过 4x4。

# javascript - JavaScript window.URL 在函数中未定义

> ID：10529476
> 
> 赞同：9
> 
> 时间：2012-05-10T07:41:23.043
> 
> 标签：javascript, html, video

我正在学习一些 JavaScript，选择一个文件并使用它来创建一个 objectUrl，它可以设置为`src`HTML5 的`video`。我在 Ubuntu Lucid 上的 Chrome 版本 18.0.1025.162 中对此进行了尝试，并在同一文件夹中使用带有 JavaScript 文件和媒体文件的本地 HTML 文件。

我可以使用 input 元素选择一个视频文件，当我点击播放链接时，JavaScript 函数`playVideo()`就会执行。

```
<video id="vid" name='myvid' width="640" height="360" controls="controls">
       <source src="test.webm" type="video/webm" />
</video>
<br><a href="#" id="playlnk">Play </a> </li>
<br><input type="file" name="fileselect" id="fselect"> </input> 
```

JavaScript 文件是

```
$(document).ready(function(){
        player=$('#vid').get(0);        
        $('#playlink').click(function(){playVideo(player);});        
    });
function setVideoSrc(player,file){
    console.log('winurl='+window.URL);
    var fileURL = window.URL.createObjectURL(file);
    player.src=fileURL;
    player.load();
    return;
}
function playVideo(player) {
     var file=document.getElementById('fselect').files[0];
     console.log('you chose:'+file);
     if (file==undefined){
        console.log('no file chosen');
     }else{
        console.log('file='+file);
        setVideoSrc(player,file);
     }     
} 
```

当我没有选择任何文件并单击播放链接时，默认视频播放和控制台日志显示未选择文件 - 正如预期的那样。

当我选择一个视频文件然后单击播放链接时会发生错误。然后`playVideo()`调用`setVideoSrc()`控制台日志`window.URL' is` 未定义的方法

为什么会这样？有人可以帮我纠正这个吗？这是控制台日志输出

```
you chose:[object File] //from playVideo() function
file=[object File]   //from playVideo() function
winurl=undefined   //setVideoSrc() function
Uncaught TypeError: Cannot call method 'createObjectURL' of undefined 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:45:01.060

在 Chrome 中使用 window.webkitURL。

这适用于 Chrome 和 FireFox

```
function setVideoSrc(player,file){
    var myURL = window.URL || window.webkitURL
    console.log('winurl='+myURL);
    var fileURL = myURL.createObjectURL(file);
    player.src=fileURL;
    player.load();
    return;
} 
```

也可以看看：

*   [http://caniuse.com/#feat=bloburls](http://caniuse.com/#feat=bloburls)
*   [https://developer.mozilla.org/en/DOM/window.URL.createObjectURL](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)
*   [http://www.w3.org/TR/FileAPI/#url](http://www.w3.org/TR/FileAPI/#url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:52:38.353

试试这种方式： -

```
var file = document.getElementById('fselect').files[0];
if(file){
  setVideoSrc(player,file); 
} 
```

以下行适用于 Chrome 和 Firefox：-

```
window.URL.createObjectURL(file); 
```

确保您正在上述浏览器上进行测试。

参考此信息

*   [window.URL.createObjectURL](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)
*   [窗口.URL](https://developer.mozilla.org/en/DOM/window.URL)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T07:50:18.077

你有没有尝试过

```
 window.location.href = "URL"; 
```

而不是window.url？似乎不支持 url 功能。

# sql - 如何在 SQL 中生成“空”聚合结果

> ID：10529478
> 
> 赞同：7
> 
> 时间：2012-05-10T07:41:26.890
> 
> 标签：sql, oracle, group-by, aggregate-functions

我正在尝试改进 SQL 查询以使我的报告看起来更好。我的查询从一个表中读取数据，按几列分组并计算一些聚合字段（计数和总和）。

```
SELECT A, B, C, COUNT(*), SUM(D) FROM T
GROUP BY A, B, C
ORDER BY A, B, C 
```

现在，假设 B 和 C 列是一些已定义的常量字符串，例如， B 可以是`'B1'`or `'B2'`， C 可以是`'C1'`or `'C2'`。因此，一个示例结果集是：

```
A  | B  | C  | COUNT(*) | SUM(D)
--------------------------------
A1 | B1 | C1 |       34 |   1752
A1 | B1 | C2 |        4 |    183
A1 | B2 | C1 |      199 |   8926
A1 | B2 | C2 |       56 |   2511
A2 | B1 | C2 |        6 |     89
A2 | B2 | C2 |       12 |    231
A3 | B1 | C1 |       89 |    552
... 
```

如您所见，因为`'A1'`我有所有四种可能的 (B, C) 组合，但对于`'A2'`. 我的问题是：实际上，在给定的表中，如何生成不存在 (B, C) 组合的摘要行？也就是说，例如，我如何打印这些行：

```
A  | B  | C  | COUNT(*) | SUM(D)
--------------------------------
A2 | B1 | C1 |        0 |      0
A2 | B2 | C1 |        0 |      0 
```

我能看到的唯一解决方案是创建一些具有所有 (B, C) 值的辅助表，然后使用该辅助表进行 RIGHT OUTER JOIN。但我正在寻找一种更清洁的方法......

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:48:05.780

辅助表不必是真实的表，它可以是通用的表表达式——至少如果您可以从表本身获取所有可能的值（或所有您感兴趣的值）。使用@Bob Jarvis 的查询生成所有可能的组合，您可以执行以下操作：

```
WITH CTE AS (
    SELECT * FROM (SELECT DISTINCT a FROM T)
    JOIN (SELECT DISTINCT b, c FROM T) ON (1 = 1)
)
SELECT CTE.A, CTE.B, CTE.C,
    SUM(CASE WHEN T.A IS NULL THEN 0 ELSE 1 END), NVL(SUM(T.D),0)
FROM CTE
LEFT JOIN T ON T.A = CTE.A AND T.B = CTE.B AND T.C = CTE.C
GROUP BY CTE.A, CTE.B, CTE.C
ORDER BY CTE.A, CTE.B, CTE.C; 
```

如果您有可能不在表格中的固定值，那么它会稍微复杂一些（或者更丑陋，并且随着更多可能的值变得更糟）：

```
WITH CTE AS (
    SELECT * FROM (SELECT DISTINCT a FROM T)
    JOIN (SELECT 'B1' AS B FROM DUAL
        UNION ALL SELECT 'B2' FROM DUAL) ON (1 = 1)
    JOIN (SELECT 'C1' AS C FROM DUAL
        UNION ALL SELECT 'C2' FROM DUAL) ON (1 = 1)
)
SELECT CTE.A, CTE.B, CTE.C,
    SUM(CASE WHEN T.A IS NULL THEN 0 ELSE 1 END), NVL(SUM(T.D),0)
FROM CTE
LEFT JOIN T ON T.A = CTE.A AND T.B = CTE.B AND T.C = CTE.C
GROUP BY CTE.A, CTE.B, CTE.C
ORDER BY CTE.A, CTE.B, CTE.C; 
```

但是你必须加入*一些*知道“缺失”值的东西。如果其他地方需要相同的逻辑，并且您有固定值，那么永久表可能会更干净——当然，无论哪种方式都可能需要维护。您还可以考虑使用流水线函数充当代理表，但可能取决于卷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:58:26.667

问题是，如果您的数据库中没有特定组合，引擎如何知道将该组合包含到结果中？为了在结果中包含所有组合，您需要提供所有组合 - 无论是在主表中还是在用于引用的其他表中。例如，您可以使用如下数据创建另一个表 R：

```
A  | B  | C  
------------
A1 | B1 | C1
A1 | B1 | C2
A1 | B2 | C1
A1 | B2 | C2
A2 | B1 | C1
A2 | B1 | C2
A2 | B2 | C1
A2 | B2 | C2
A3 | B1 | C1
A3 | B1 | C2
A3 | B1 | C1
A3 | B2 | C2
... 
```

然后您的查询将如下所示：

```
SELECT r.*, COUNT(t.d), coalesce(SUM(t.d), 0)
FROM r LEFT OUTER JOIN t on (r.a=t.a and r.b=t.b and r.c=t.c)
GROUP BY r.a, r.b, r.c
ORDER BY r.a, r.b, r.c 
```

这将为您返回`0 | 0`主表中不存在的组合所需的集合。请注意，这只有在您确实知道要包含的每个可能组合时才有可能，但情况并非总是如此。

另一方面，如果您的 A、B、C 是数值，而您只想包含一个范围内的所有数字，那么可能有另一种处理方式，如下所示：

```
SELECT a.n, b.n, c.n, COUNT(t.d), coalesce(SUM(t.d), 0)
FROM (SELECT (rownum) "n" FROM DUAL WHERE LEVEL >= start_a CONNECT BY LEVEL <= end_a) a,
     (SELECT (rownum) "n" FROM DUAL WHERE LEVEL >= start_b CONNECT BY LEVEL <= end_b) b,
     (SELECT (rownum) "n" FROM DUAL WHERE LEVEL >= start_c CONNECT BY LEVEL <= end_c) c,
     t
WHERE a.n = t.a(+) AND b.n = t.b(+) AND c.n = t.c(+)
GROUP BY a.n, b.n, c.n
ORDER BY a.n, b.n, c.n 
```

（我没有方便的 Oracle 实例来测试这个，所以这更像是一个有根据的猜测，而不是其他任何东西。）

底线是引擎需要知道最终结果中包含的内容 - 一种或另一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:00:35.550

可能有更漂亮的方法可以做到这一点，但以下内容应该可以让您开始实现您想要的：

```
SELECT * FROM 
  (SELECT DISTINCT a FROM T)
JOIN
  (SELECT DISTINCT b, c FROM T)
  ON (1 = 1)
ORDER BY a, b, c 
```

这将为您提供 B 和 C 的所有组合，以及所有存在的 A，类似于

```
A1  B1  C1
A1  B1  C2
A1  B2  C1
A1  B2  C2
A2  B1  C1
A2  B1  C2
A2  B2  C1
A2  B2  C2 
```

分享和享受。

# python - Python：如何将包含字典的函数传递给另一个函数？

> ID：10529479
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:29.607
> 
> 标签：python, function, dictionary, arguments

我是 python 新手，我正在构建一个游戏来自学 python。这场比赛将有许多课程，有问题和答案；用户将根据其答案的有效性获得和失去积分。

我正在使用字典来存储将在每节课中提出的问题和答案。

我只想在特定点（例如，在用户输入命令后）显示和检查字典的键和值。为此，我想我可以创建包含字典的函数，然后在需要时将它们传递给主函数。

但是当我运行下面的代码时，出现以下错误： AttributeError: 'function' object has no attribute 'iteritems'

所以我有两个问题：

1.  我尝试从函数中删除字典，然后它工作得很好。有什么方法（或理由）让它在一个函数中工作吗？
2.  是否可以只使用一个字典并在某些点检查其中一部分的键和值？

到目前为止，这是我的代码。任何建议将不胜感激！

```
points = 10 # user begins game with 10 pts 

def point_system(): 
    global points

    #help user track points
    if 5 >= points: 
        print "Careful. You have %d points left." % points 
    elif points == 0: 
        dead("You've lost all your points. Please start over.")
    else:
        print "Good job. Spend your points wisely." 

def lesson1(): 
    #create a dictionary 
    mydict = {
    "q1":"a1", 
    "q2":"a2"
    }

return mydict

def main(lesson):
    global points

    #get key:value pair from dictionary
    for k, v in lesson.iteritems():
        lesson.get(k,v) # Is the .get step necessary? It works perfectly well without it.
        print k
        user_answer = raw_input("What's your answer?: ") 

#test if user_answer == value in dictionary, and award points accordingly 
        if user_answer == v:
            user_answer = True
            points += 1 #increase points by 1 
            print "Congrats, you gained a point! You now have %d points" % points 
            point_system()
        elif user_answer != v: 
            points -= 1 #decrease points by 1 
            print "Oops, you lost a point. You now have %d points" % points 
            point_system()
        else: 
            print "Something went wrong."
            point_system()

main(lesson1) 
```

和有效的代码：

```
points = 10 # user begins game with 10 pts 

#create a dictionary 
lesson1 = {
"q1":"a1", 
"q2":"a2"
}

def point_system(): 
    global points

    #help user track points
    if 5 >= points: 
    print "Careful. You have %d points left." % points 
    elif points == 0: 
    dead("You've lost all your points. Please start over.")
    else:
    print "Good job. Spend your points wisely." 

def main(lesson):
    global points

    #get key:value pair from dictionary
    for k, v in lesson.iteritems():
        lesson.get(k,v) # Is the .get step necessary? It works perfectly well without it.
        print k
        user_answer = raw_input("What's your answer?: ") 

#test if user_answer == value in dictionary, and award points accordingly 
        if user_answer == v:
            user_answer = True
            points += 1 #increase points by 1 
            print "Congrats, you gained a point! You now have %d points" % points 
            point_system()
        elif user_answer != v: 
            points -= 1 #decrease points by 1 
            print "Oops, you lost a point. You now have %d points" % points 
            point_system()
        else: 
            print "Something went wrong."
            point_system()

main(lesson1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:49:23.927

您使用 course1 函数调用 main() 而不是 course1 函数（它是一个目录）的结果。

你应该写：

```
main(lesson1()) 
```

顺便说一句，第 1 课还必须返回创建的目录才能正常工作：

```
def lesson1(): 
    #create a dictionary 
    mydict = {
        "q1":"a1", 
        "q2":"a2"
    }
    return mydict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:51:09.113

您传递了一个返回字典的函数，因此您应该首先调用该函数来获取字典。所以你可以修改你的代码，以便 main 接受字典（代码实际上需要一个字典）：

```
main(lesson1()) 
```

如果你真的想传递一个函数，那么你应该修改你`main`以先执行函数来获取字典：

```
def main(lessonFunc):
    global points
    lesson = lessonFunc()

    #get key:value pair from dictionary
    for k, v in lesson.iteritems(): 
```

但第一个选择可能更好。您还可以将课程打包到一个对象中。

# android - Android Gallery View 半圆形主题

> ID：10529480
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:30.500
> 
> 标签：android, styles, themes, gallery

嗨朋友们，我计划在用户界面部分工作，我想为我的画廊应用程序制作自己的用户界面。例如画廊视图应该是半圆形视图。有人可以建议我吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:54:29.453

你想要这样的东西吗！！

![在此处输入图像描述](../Images/03951045af091f922f61977d68912cb5.png)

[抱歉，您可以在此链接](http://davy-leggieri.developpez.com/tutoriels/android/creation-carrousel/)中找到它， 但该链接是法语，但您可以在页面底部找到来源 镜像链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:15:49.467

您应该首先了解更多关于`Gallery`一般情况的信息。这个[链接](http://developer.android.com/resources/tutorials/views/hello-gallery.html)将是一个好的开始。

了解该代码，阅读教程并开始尝试进行增量更改并查看它们是否有效。

使用这些知识和原型代码开始思考如何创建自定义半圆形画廊。试验并尝试一些不同的东西。

当/如果您遇到任何问题或特定问题时，请将您的问题发布到新线程上，我相信您会找到愿意帮助您的人。

# c++ - GLSL 和 FBO - glActiveTexture 不起作用？

> ID：10529482
> 
> 赞同：0
> 
> 时间：2012-05-10T07:41:34.880
> 
> 标签：c++, opengl, glsl, fbo

我正在尝试编写一个简单的着色器，它将添加附加到 FBO 的纹理。FBO初始化等没有问题（我已经测试过了）。问题是我相信 glActiveTexture(GL_TEXTURE0)。它似乎没有做任何事情-这是我的碎片着色器：（但通常会调用着色器-我已经通过放置 gl_FragColor = vec4(0,1,0,1); 进行了测试

```
 uniform sampler2D Texture0;
 uniform sampler2D Texture1;
 varying vec2 vTexCoord;
 void main()
 {
     vec4 texel0 = texture2D(Texture0, gl_TexCoord[0].st);
     vec4 vec = texel0; 
     gl_FragColor = texel0;     
 } 
```

在 C++ 代码中，我有：

```
 glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, iFrameBufferAccumulation); 

 glDrawBuffer(GL_COLOR_ATTACHMENT0_EXT);
 ( Render something - it works fine to iTextureImgAccumulation texture attached to     GL_COLOR_ATTACHMENT0_EXT )
 glClear (GL_COLOR_BUFFER_BIT );
 glEnable(GL_TEXTURE_RECTANGLE_NV);

 glActiveTexture(GL_TEXTURE0); 

 glBindTexture( GL_TEXTURE_RECTANGLE_NV, iTextureImgAccumulation ); // Bind our frame buffer texture 
 xShader.setUniform1i("Texture0", 0);

 glLoadIdentity(); // Load the Identity Matrix to reset our drawing locations 
 glTranslatef(0.0f, 0.0f, -2.0f); 
 xShader.bind();        
 glBegin(GL_QUADS);

     glTexCoord2f(0,OPT.m_nHeight);
     glVertex3f(-1,-1,0);

 glTexCoord2f(OPT.m_nWidth,OPT.m_nHeight);
 glVertex3f(1,-1,0);

 glTexCoord2f(OPT.m_nWidth,0);
 glVertex3f(1,1,0);

 glTexCoord2f(0,0);
 glVertex3f(-1,1,0);

 glEnd();

 glBindTexture( GL_TEXTURE_RECTANGLE_NV, NULL ); 

 xShader.unbind(); 
```

结果：黑屏（显示第二个纹理并使用着色器时（不使用着色器很好）。我知道这个着色器不应该做太多，但他甚至不显示第一个纹理。我在中间测试的东西，但想法是在渲染到第一个纹理后，我会将第一个纹理添加到第二个纹理。为此，我想这个片段着色器可以工作：

```
 uniform sampler2D Texture0;
 uniform sampler2D Texture1;
 varying vec2 vTexCoord;
 void main()
 {
     vec4 texel0 = texture2D(Texture0, gl_TexCoord[0].st);
     vec4 texel1 = texture2D(Texture1, gl_TexCoord[0].st);
     vec4 vec = texel0 + texel1;
     vec.w = 1.0;
     gl_FragColor = vec;    
 } 
```

整个想法是在循环中 tex2 = tex2 + tex1 （我是否有可能在此着色器中使用 tex2 渲染到附加到 tex2 的 GL_COLOR_ATTACHMENT1_EXT ？）我已经测试了两个 xShader.bind(); 在初始化统一变量之前和之后。两种情况 - 黑屏。

无论如何，我很确定纹理采样器的初始化存在一些问题（可能是因为它们附加到 FBO）？

我检查了其余的，它工作正常。

还有一个愚蠢的问题：

如何在整个屏幕上渲染纹理？

我已经尝试过类似的方法，但它不起作用（我必须翻译一下这个四边形）

```
glViewport(0,0 , OPT.m_nWidth, OPT.m_nHeight);

glBindTexture( GL_TEXTURE_RECTANGLE_NV, iTextureImg/*iTextureImgAccumulation*/ ); // Bind our frame buffer texture 

glBegin(GL_QUADS);
glTexCoord2f(0,OPT.m_nHeight);
glVertex3f(-1,-1,0);

glTexCoord2f(OPT.m_nWidth,OPT.m_nHeight);
glVertex3f(1,-1,0);

glTexCoord2f(OPT.m_nWidth,0);
glVertex3f(1,1,0);

glTexCoord2f(0,0);
glVertex3f(-1,1,0);

glEnd(); 
```

也不适用于 glVertex2f ..

编辑：我已经检查过了，我可以初始化一些统一变量，只有纹理有问题。

我改变了顺序，但它仍然不起作用。:(顺便说一句，其他制服值运行良好。我也显示了我想传递给着色器的纹理。它工作正常。但由于未知原因纹理采样器未初始化在片段着色器中。也许这个纹理是 glTexImage2D(GL_TEXTURE_RECTANGLE_NV, 0, GL_RGB16F / *GL_FLOAT_R32_NV* /, OPT.m_nWidth, OPT.m_nHeight, 0, GL_RED, GL_FLOAT, NULL); （它不是 GL_TEXTURE_2D）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:35:23.333

目前还不清楚你的`xShader.bind()`，我猜你在那里做`glUseProgram(...)`什么。但是应在`glUseProgram(...)`调用后设置统一变量（在您的情况下为采样器索引）。按此顺序：

```
glUseProgram(your_shaders); //probably your xShader.bind() does it.

GLuint sampler_idx = 0; 
GLint location = glGetUniformLocation(your_shaders, "Texture0");
if(location != -1) glUniform1i(location, sampler_idx);
else error("cant, get uniform location");

glActiveTexture(GL_TEXTURE0 + sampler_idx);
glBindTexture(GL_TEXTURE_2D, iTextureImg); 
```

“是”，您可以渲染 FBO 纹理并在另一个上下文中的着色器中使用它

```
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, your_fbo_id);
// render to FBO there
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 
```

然后像使用常规纹理一样使用 FBO 纹理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:34:29.540

```
glActiveTexture(GL_TEXTURE0); 

glBindTexture( GL_TEXTURE_RECTANGLE_NV, iTextureImgAccumulation ); // Bind our frame buffer texture 
xShader.setUniform1i("Texture0", 0); 
```

这是一个矩形纹理。

```
uniform sampler2D Texture0; 
```

这是一个 2D 纹理。他们*不是一回事*。采样器[类型](http://www.opengl.org/wiki/GLSL_Samplers#Sampler_types) *必须*与[纹理类型](http://www.opengl.org/wiki/Texture#Theory)匹配。您需要使用`samplerRect`，假设您的 GLSL 版本支持它。

# ios - 如何将.app 发布到应用商店？

> ID：10529483
> 
> 赞同：3
> 
> 时间：2012-05-10T07:41:38.933
> 
> 标签：ios, app-store, sencha-touch, sencha-touch-2

我正在使用 Sencha Touch Tools 来打包和共同设计一个 webapp，但它输出一个 .app 文件。

不是必须是 .ipa 才能上传到 App Store 吗？

或者我可以压缩 .app 文件并使用 Application Loader 发布它吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:51:16.133

只需压缩（zip）.app然后通过应用程序加载器发送这就是我所做的......它工作正常

# python - 如何使用 Python 的 matplotlib 烛台仅绘制工作日？

> ID：10529492
> 
> 赞同：6
> 
> 时间：2012-05-10T07:42:12.257
> 
> 标签：python, matplotlib, candlestick-chart

没有周末，我无法绘制 matplotlib.finance.candlestick（每 5 个烛台之间的空白）。[Matplotlib 网站](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html?highlight=candlestick)上的示例也不排除周末，并且[在其他地块上排除周末的方法](http://matplotlib.sourceforge.net/examples/api/date_index_formatter.html)似乎不适用于 CandleSticks。

有没有人遇到过这个？

附言。根据要求，这是示例：

```
#!/usr/bin/env python
from pylab import *
from matplotlib.dates import  DateFormatter, WeekdayLocator, HourLocator, \
 DayLocator, MONDAY
from matplotlib.finance import quotes_historical_yahoo, candlestick,\
 plot_day_summary, candlestick2

# (Year, month, day) tuples suffice as args for quotes_historical_yahoo
date1 = ( 2004, 2, 1)
date2 = ( 2004, 4, 12 )

mondays = WeekdayLocator(MONDAY)        # major ticks on the mondays
alldays    = DayLocator()              # minor ticks on the days
weekFormatter = DateFormatter('%b %d')  # Eg, Jan 12
dayFormatter = DateFormatter('%d')      # Eg, 12

quotes = quotes_historical_yahoo('INTC', date1, date2)

fig = figure()
fig.subplots_adjust(bottom=0.2)
ax = fig.add_subplot(111)
ax.xaxis.set_major_locator(mondays)
ax.xaxis.set_minor_locator(alldays)
ax.xaxis.set_major_formatter(weekFormatter)

#plot_day_summary(ax, quotes, ticksize=3)
candlestick(ax, quotes, width=0.6)

ax.xaxis_date()
ax.autoscale_view()
setp( gca().get_xticklabels(), rotation=45, horizontalalignment='right')

show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T03:02:11.853

在您的“引号”行之后：

```
weekday_quotes = [tuple([i]+list(quote[1:])) for i,quote in enumerate(quotes)] 
```

然后

```
candlestick(ax, weekday_quotes, width=0.6) 
```

这将绘制没有工作日之间间隙的数据，现在您必须将 xticks 更改回日期，最好是星期一。假设您的第一个报价是星期一：

```
import matplotlib.dates as mdates

ax.set_xticks(range(0,len(weekday_quotes),5))
ax.set_xticklabels([mdates.num2date(quotes[index][0]).strftime('%b-%d') for index in ax.get_xticks()]) 
```

这很恶心，但似乎完成了工作 - 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T12:52:17.580

虽然@JMJR 的回答有效，但我发现这更可靠：

```
def plot(x):
    plt.figure()
    plt.title("VIX curve")
    def idx(val=[0]):
        val[0] = val[0] + 1
        return val[0]
    d = collections.defaultdict(idx)
    # give each date an index
    [d[t] for t in sorted(x.index.get_level_values('baropen_datetime').unique())]
    # use the index
    x['idx'] = [d[t] for t in x.index.get_level_values('baropen_datetime')]
    # plot using index
    x.groupby('code').apply(lambda y: plt.plot(y.idx.values,
                                               y.close.values,
                                               label=y.index.get_level_values('code')[0]))
    plt.legend()
    plt.show()
    plt.close() 
```

# design-patterns - 从 Datarow 创建对象

> ID：10529493
> 
> 赞同：0
> 
> 时间：2012-05-10T07:42:17.737
> 
> 标签：design-patterns, c#-4.0, datatable

我想从 DataRow 对象创建一个对象。它可以通过遍历 Datarow 对象来完成。但这里的约束是 DataRow 列不固定。DataRow 可以拥有的列数可能会有所不同。我无法根据 ColumnName 遍历 DataRow，因为我不知道哪些列将在 datarow 中。

例如我有一堂课

```
class Abc
{
    string attrib1;
    string attrib2;
    string attrib2;

    public Abc(DataRow dr)
    {
        attrib1 = dr["attrib1"].ToString();
        attrib2 = dr["attrib2"].ToString();
        attrib3 = dr["attrib3"].ToString();
    }
} 
```

当 DataRow 对象具有所有三列时，这将正常工作。但如果不是，那么这将引发异常

请帮我。

我尝试在构造函数中使用 switch case，如下所示

```
class Abc
{
    string attrib1;
    string attrib2;
    string attrib2;

    public Abc(DataRow dr)
    {
         foreach (System.Data.DataColumn dc in record.Columns)
             {
                  switch (dc.ColumnName)
                  { 
                case "attrib1" :
                    attrib1 = dr["attrib1"].ToString();
                    break;
                case "attrib2" :
                    attrib2 = dr["attrib2"].ToString();
                    break;
                case "attrib2" :
                    attrib3 = dr["attrib3"].ToString();
                    break;
            } 
                  }  
           } 
     } 
```

虽然它工作正常，但我想知道这种方法是否很好。

请帮助解决这个问题

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:46:20.823

`default`我认为开关盒没问题，但是，添加标签并在那里抛出异常是个好主意。当您向查询添加新列时，这将为您节省大量调试工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:49:17.140

算法不好。

1-请将您的“attrib1”、“attrib2”、“attrib3”设为常量。

2-请看伪代码：

```
if (dr[CONSTANT_ATT1] != null) then attrib1 = dr[CONSTANT_ATT1].ToString();
if (dr[CONSTANT_ATT2] != null) then attrib2 = dr[CONSTANT_ATT2].ToString();
if (dr[CONSTANT_ATT3] != null) then attrib3 = dr[CONSTANT_ATT3].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:04:08.033

如果您只想要这些值，您可以使用这行代码简单地将 DataRow 作为对象数组获取

```
object[] itemArray = dr.ItemArray; 
```

# javascript - 是否有关于在其他人的网站中嵌入 JavaScript 应用程序的教程？

> ID：10529495
> 
> 赞同：2
> 
> 时间：2012-05-10T07:42:30.030
> 
> 标签：javascript, embed

我指的是[Disqus等服务的嵌入片段（以及下载的相关文件）](http://disqus.com)

当然，给某人一些标记以将您的 JavaScript 文件拉到他们的网站上的概念本身很简单。

但是，当我查看 Disqus 等提供商使用的代码时，我看到了对 an`embedKey`等的引用。这似乎暗示了某种额外的安全规定（而不是简单地期待 Web 服务身份验证令牌）。

那里也有：

*   任何关于“正确”和“安全”进行这种操作的教程？
*   是否有任何主要考虑事项（除了确保您与用户站点上的现有脚本没有冲突）？

**编辑**

有关使用密钥的示例，请参阅 Wufoo 的嵌入代码，网址为[http://wufoo.com/scripts/embed/form.js](http://wufoo.com/scripts/embed/form.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:01:55.060

`embedKey`? 听起来像谷歌地图`API key`或adsense `unit ID`。它确定该代码单元是否有效，是否有人实际拥有它，或者指向服务器中的一组项目（可能像聊天室 ID）。

至于代码冲突，您应该将代码包装在 IFFE 中，这样您的变量就不会泄漏到周围的代码中。未在本地设置的内容假定您是从外部获取的。正确声明变量`var`以避免从外部范围设置/更改变量。此外，对于名称冲突，局部变量将优先。

```
//outsider code
var foo = 'foo';
var bar = 'bar';

//your code
(function(){
    var foo = 'baz';    //set a local foo
    bar = bam;          //outsider bar changed (no var);

    alert(foo); //baz
    alert(bar); //bam

}());

//some more outsider code
alert(foo); //foo, since  you protected your code
alert(bar); //bam, was wrecked by your code 
```

# sql - 使用给定行中的现有 Null 值更新第一个字段

> ID：10529498
> 
> 赞同：0
> 
> 时间：2012-05-10T07:42:42.727
> 
> 标签：sql, database, sqlite, null

我正在使用 sqlite3。

在表“播放列表”中，我想为给定行中的*第一个*Null 字段设置一个新值（只有第一个！）。

因此，例如，如果我正在编辑第一行，我希望该值替换第一个 Null（在“Song2”列中）：

```
____________________________________
**table=Playlist**
____________________________________
id | plname | song1 | song2 | song3| song4.....  (<- column names)
____________________________________
1  | Sounds | Alps | Null | Null | Null.....(<- first row)
____________________________________ 
```

我可以使用什么语句来查找给定行中的第一个 Null 字段，并为该字段设置一个新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:45:27.080

您可以对每一列使用 CASE 语句。这是一个 SQL Fiddle 作为示例（注意：您想用参数替换“值”）[http://sqlfiddle.com/#!7/59931/6](http://sqlfiddle.com/#!7/59931/6)

更新：我错过了您希望它更新第*一个*空列的部分。有点棘手，但这个版本应该可以工作：[http ://sqlfiddle.com/#!7/59931/9](http://sqlfiddle.com/#!7/59931/9)

# c++ - 这是什么意思？(int &)a

> ID：10529500
> 
> 赞同：5
> 
> 时间：2012-05-10T07:42:55.703
> 
> 标签：c++

定义一个float变量a，将a转换为float &和int &，这是什么意思？转换后， a 是自身的引用吗？为什么两者的结果不同？

```
#include <iostream>
using namespace std;
int
main(void)
{
    float a = 1.0;
    cout << (float &)a <<endl;
    cout << (int &)a << endl;

    return 0;
}

thinkpad ~ # ./a.out 
1
1065353216 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T07:47:24.547

```
cout << (float &)a <<endl;
cout << (int &)a << endl; 
```

第一个将位视为浮点数。第二个将位视为一个整数。float 1.0 的位恰好是整数 1065353216 的位。

它基本上相当于：

```
float a = 1.0;
int* b = (int*) &a;
cout << a << endl;
cout << *b << endl; 
```

`(int &) a`将 a 转换为对整数的引用。换句话说，一个对 a 的整数引用。（正如我所说，它将 a 的内容视为整数。）

编辑：我现在正在环顾四周，看看这是否有效。我怀疑不是。这取决于小于或等于实际大小的类型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T07:55:47.877

这意味着未定义的行为:-)。

说真的，这是一种双关语。 `a`是 a `float`，但`a`也是一个内存块（通常是四个字节），其中包含位。 `(float&)a`意味着将该内存块视为一个`float`（换句话说，它实际上是什么）；`(int&)a`表示将其视为`int`. `a`形式上，通过具有不同于对象实际类型的类型的左值表达式访问对象（例如）是未定义的行为，除非该类型是字符类型。实际上，如果这两种类型的大小相同，我希望结果是对位模式的重新解释。

在 a 的情况下`float`，位模式包含符号位、指数位和尾数位。 *通常*，指数将使用一些多余的 n 表示法，并且只有`0.0`0 作为指数。（某些表示，包括在 PC 上使用的表示，不会存储尾数的高位，因为在以 2 为底的标准化形式中，它必须始终为 1。在这种情况下，存储的尾数的`1.0`所有位都为 0 .) 通常（我不知道这里有任何例外），指数将存储在高位中。结果是，当您将浮点值“键入”为相同大小的整数时，无论浮点值如何，该值都会相当大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T07:50:49.280

这些值是不同的，因为将 a 解释`float`为`int &`（对 的引用`int`）会敞开大门。`a`不是`int`，所以当你这样做时，几乎任何事情都可能发生。碰巧，看着它`float`就像`int`给你一样`1065353216`，但取决于底层机器架构，它可能是`42`粉红色芭蕾舞短裙的大象，甚至崩溃。

请注意，这与转换为 an 不同`int`，后者了解如何从转换`float`为`int`。Casting to`int &`只是查看内存中的位，而不了解原始含义是什么。

# iphone - 推送视图时收到警告消息

> ID：10529501
> 
> 赞同：0
> 
> 时间：2012-05-10T07:43:03.353
> 
> 标签：iphone, ipad, uinavigationcontroller

在我的应用程序中，我想从当前视图的 ViewWillAppear 推送不同的视图。应用程序正在运行，但我在控制台中收到一条消息是

在意外状态下完成导航转换。导航栏子视图树可能会损坏。

你能帮助我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:02:55.857

在没有一些请求的代码的情况下，我猜测您将带有动画标志的新 viewController 推送为 YES。在这种情况下，将您之前的 ViewControllers 转换设置为非动画。换句话说（代码）：

```
[self.navigationController pushViewController:firstViewController animated:NO]; 
```

在其（firstViewController）ViewWillAppear 中：

```
[self.navigationController pushViewController:secandViewController animated:YES]; 
```

# iphone - 如何从 iPhone 日历中获取星期开始日期和星期结束日期

> ID：10529509
> 
> 赞同：1
> 
> 时间：2012-05-10T07:43:25.097
> 
> 标签：iphone

我是 iphone 新手。我正在该项目中做一个项目，我对从我的应用程序中获取 iphone 日历的星期开始日期和星期结束日期的概念感到震惊。如果有人知道这个概念，请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:57:40.070

这将帮助你

```
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *components = [cal components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:[[NSDate alloc] init]];

[components setHour:-[components hour]];
[components setMinute:-[components minute]];
[components setSecond:-[components second]];
NSDate *today = [cal dateByAddingComponents:components toDate:[[NSDate alloc] init] options:0]; //This variable should now be pointing at a date object that is the start of today (midnight);

[components setHour:-24];
[components setMinute:0];
[components setSecond:0];
NSDate *yesterday = [cal dateByAddingComponents:components toDate: today options:0];

components = [cal components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:[[NSDate alloc] init]];

[components setDay:([components day] - ([components weekday] - 1))]; 
NSDate *thisWeek  = [cal dateFromComponents:components];

[components setDay:([components day] - 7)];
NSDate *lastWeek  = [cal dateFromComponents:components];

[components setDay:([components day] - ([components day] -1))]; 
NSDate *thisMonth = [cal dateFromComponents:components];

[components setMonth:([components month] - 1)]; 
NSDate *lastMonth = [cal dateFromComponents:components];

NSLog(@"today=%@",today);
NSLog(@"yesterday=%@",yesterday);
NSLog(@"thisWeek=%@",thisWeek);
NSLog(@"lastWeek=%@",lastWeek);
NSLog(@"thisMonth=%@",thisMonth);
NSLog(@"lastMonth=%@",lastMonth); 
```

从[这里](https://stackoverflow.com/a/1889908/932011)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:46:25.413

在这里，我是位置代码。看到它会帮助你。

```
 NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd"];// you can use your format.
    NSString *dateString = [dateFormat stringFromDate:today];

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [gregorian components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];

int dayofweek = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:today] weekday];// this will give you current day of week

    [components setDay:([components day]-(dayofweek))];// for beginning of the week.

   // or

   [components setDay:([components day]+(7-dayofweek))];// for end day of the week

    NSDate *beginningOfWeek = [gregorian dateFromComponents:components];
    NSDateFormatter *dateFormat_first = [[NSDateFormatter alloc] init];
    [dateFormat_first setDateFormat:@"yyyy-MM-dd"];
    NSString *dateString2 = [dateFormat stringFromDate:beginningOfWeek]; 
```

希望对你有帮助...

# python - python变量和函数的vim语法高亮显示？

> ID：10529510
> 
> 赞同：2
> 
> 时间：2012-05-10T07:43:27.310
> 
> 标签：python, vim, syntax-highlighting

我正在使用 vim 7.3，在 python 2.7 中编写脚本。我有一些语法突出显示，但主要是针对数字、字符串、注释以及一些核心函数和关键字。我已经尝试过核心 vim python.vim 语法文件，以及[来自 vim.org 的文件](http://www.vim.org/scripts/script.php?script_id=790)

有没有办法让**变量**和**函数名**（单独的颜色）突出显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T07:46:15.037

python中的变量和函数之间并没有真正的区别（两者都是python中的一等对象）。`callable(var)`因此，如果不实际运行代码并测试是否为真，这几乎是不可能的。

并且总是存在这样的行为会令人困惑的情况：

```
class Dummy(object):
    pass
foo = Dummy()
if False:
    foo()
foo.__call__ = lambda self: 'meow'
foo.x = 'y'
foo() 
```

您现在什么时候将其突出显示`foo`为一项功能？直到赋值之后才能调用它，`__call__`但是对同一个对象使用不同的语法突出显示会很混乱。当然，这个例子是相当愚蠢的。但它很容易说明为什么在 python 中做你想做的事是不可能的。您可以通过使用继承和元类使其更加复杂。

# c - C：换行十六进制值

> ID：10529512
> 
> 赞同：6
> 
> 时间：2012-05-10T07:43:41.467
> 
> 标签：c, hex, newline

我有一些代码从 txt 文件中读取行，然后添加到数据库中。

如果您直接在 txt 文件中输入数据，那么这足以识别换行符：`if (ch == '\n')`

但是，如果您从 Microsoft Word 中剪切和粘贴，则检查`\n`不起作用。

如果我一一转储十六进制值/字符，实际数据如下所示：

```
2e .    [ Last char of line ]
 d 
58 X    [ First char on next line ] 
```

句号是一行的最后一个字符。'X' 是下一行的第一个字符。十六进制 'd' 导致换行。

到底是怎么回事？鉴于它是十六进制的空格-d，我如何测试我的`ch`变量？`> d<`

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T07:52:43.707

Windows 使用一对字符来结束一行：回车符 (0x0d) 后跟换行符 (0x0a)。

您可以在 C 中将它们分别写为`'\r'`和。`'\n'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T07:48:04.053

C 中的十六进制文字以`0x`or为前缀`0X`，因此在您的情况下，您可以使用`0xd`or`0XD`或`0xD`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T09:10:16.183

您可以首先在“十六进制编辑器”中分析您的数据，然后您可以获得与特定字符对应的十六进制值，还可以使用附加 0x 的值来测试变量。

# iphone - 如何在iphone中移动html中的选框等图像

> ID：10529520
> 
> 赞同：0
> 
> 时间：2012-05-10T07:44:29.233
> 
> 标签：iphone

我正在开发一个应用程序。我有 10 个图像。我想像 HTML 中的选取框效果一样从右到左移动这些图像。这些图像移动了无数次。所以请告诉我如何从左到右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:59:06.543

我会尝试这样的事情：

```
- (void)startAnimatingImages
{
    for (UIImage* aImage in yourImageArray)
        {
            [self animateLabelToTheRight:aImage];
        }
}

- (void)animateLabelToTheRight:(UIView *)yourView
{
    [UIView animateWithDuration:0.3 
                     animations:^{ view.frame = CGRectMake(view.frame.origin.x + 35, view.frame.origin.y, image.frame.size.width, image.frame.size.height); } 
                     completion:^{ [self animateLabelToTheLeft:yourView] } ];
}

- (void)animateLabelToTheLeft:(UIView *)yourView
{
    [UIView animateWithDuration:0.3 
                     animations:^{ yourView.frame = CGRectMake(yourView.frame.origin.x - 35, yourView.frame.origin.y, yourView.frame.size.width, yourView.frame.size.height); } 
                     completion:^{ [self animateLabelToTheRight:yourView] } ];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:58:12.813

这种类型的运动图像需要动画。如果您尝试此代码，您的问题将得到解决：

```
UIImageView *animationimage;

  animationimage.animationImages = [NSMutableArray arrayWithObjects:

                                      [UIImage imageNamed:@"Splash1.png"],
                                      [UIImage imageNamed:@"Splash2.png"],
                                      [UIImage imageNamed:@"Splash3.png"],
                                      [UIImage imageNamed:@"Splash4.png"],
                                      [UIImage imageNamed:@"Splash5.png"],nil];

    // all frames will execute in 1.0 seconds
    animationimage.animationDuration = 1.0;
    // repeat the annimation forever
    animationimage.animationRepeatCount = 0; 
```

记住你有不同的顺序图像的一件事是我的代码启动中需要链接％i。

我希望，对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:51:24.303

正如@Dev's answer中所述，这可以通过动画来完成，但是如果您要对其进行动画处理，那么如果您只想移动它，则无需更改图像。

例如，此代码拍摄您选择的照片并将其从屏幕的左上角移动到左下角，并且可以修改为从右到左移动，并且已经设置为无限重复`[UIView setAnimationRepeatCount:-1];`。

在实现选取框效果时，我能想到的最好的处理方法是在动画结束和重置之前使图像在屏幕外完全动画化，从而产生图像离开屏幕一侧并进入屏幕的错觉。其他。

```
- (void)animateImage
{
    UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage.png"]];
    [self.view addSubview:myImageView];
    [myImageView setFrame:CGRectMake(0, 0, 50, 50)];

    [UIView beginAnimations:@"myAnimation" context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationRepeatCount:-1];

//    [UIView setAnimationDidStopSelector:@selector(callSomeThingElse)];

    [myImageView setFrame:CGRectMake(0, 430, 50, 50)];
    [UIView commitAnimations];
} 
```

# java - 安卓。如何获取音频文件格式？

> ID：10529521
> 
> 赞同：0
> 
> 时间：2012-05-10T07:44:29.713
> 
> 标签：java, android, file, audio, format

有没有办法通过给定的 uri 或文件路径获取本地音频文件的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:46:25.970

这是一个页面，描述了如何获取文件的 mime 类型的各种技术：

*   [http://www.rgagnon.com/javadetails/java-0487.html](http://www.rgagnon.com/javadetails/java-0487.html)

# javascript - 根据特定值按顺序显示数组中的对象

> ID：10529527
> 
> 赞同：2
> 
> 时间：2012-05-10T07:44:52.460
> 
> 标签：javascript, jquery

我有这个json：

```
var projects_array = [
{name:"proj1", category:"a", index:1},

{name:"proj2", category:"a", index:2},

{name:"proj3", category:"b", index:3},  

{name:"proj4", category:"c", index:4}
]; 
```

我正在按顺序显示它们，如下所示：

```
for (var i = 0 ; i <proj_num; i++){ 
var numClass="p_"+projects_array[i].index;  
    var act="<li class='"+numClass+"'></li>";           
$('#lookfor').append(act);             
} 
```

我现在需要的是首先显示类别属性中值为“a”的所有对象，然后以任何顺序显示所有其他对象，我尝试以这种方式使用 .sort()：\

```
 function compare(obj){
if(obj.category == "a"){ return 1;}                 
    else{return 0;}                     
}                       
obj.sort(compare); 
```

但它不起作用，因为它将类别的所有对象分组......

您对此问题有任何可能的解决方案吗？

ps：我试图简化我的代码以使其易于理解，我希望它对你来说很清楚，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:52:10.107

这将首先根据重要词排序。

[http://jsbin.com/umezet/12/edit](http://jsbin.com/umezet/12/edit)

```
 var projects_array = [
{
    name: "proj1",
    category: "action",
    index: 1
}, {
    name: "proj2",
    category: "time",
    index: 2
}, {
    name: "proj3",
    category: "buu",
    index: 3
}, {
    name: "proj3",
    category: "time",
    index: 3
}, {
    name: "proj4",
    category: "cooo",
    index: 4
}, {
    name: "proj3",
    category: "@",
    index: 3
}, {
    name: "proj1",
    category: "!",
    index: 1
}, {
    name: "proj2",
    category: "%",
    index: 2
}, {
    name: "proj3",
    category: "cooo",
    index: 3
}, {
    name: "proj4",
    category: "*",
    index: 4
}];
projects_array = projects_array.sort(

function (x, y)
{
    if(x['category'] == 'time') return -1;
    if(y['category'] == 'time') return 1;
    if(x['category'] > y['category']) return 1;
    if(x['category'] < y['category']) return -1;
    return 0;
});
for(var i = 0; i < projects_array.length; i++)
{
    $('body').append(projects_array[i]['category']);
} 
```

# c - scanf() 读取一个减号并且不把它放回去

> ID：10529530
> 
> 赞同：0
> 
> 时间：2012-05-10T07:45:09.543
> 
> 标签：c, command-line, input, scanf

我正在尝试从命令行读取非负数或减号，如果输入不是其中之一，程序将终止，所以我执行了以下操作：

```
while((scanf("%d", &n)==1 && n>-1 && (input=1)) || (scanf("%c", &delete)==1 && delete=='-' && (input=2))) 
```

`input`是一个整数，表示读取的是数字还是减号（循环中的`input=1`&`input=2`是有意的）。

现在，该程序适用于数字，但如果我输入一个减号，第一个`scanf()`读取它但没有将它明显放回去，所以第二个`scanf()`什么也没找到并终止程序。

但是，如果我输入`--`（两个减号），第一个`scanf()`读取一个，第二个`scanf()`读取另一个，并且一切正常。

命令行的输入不能更改，它必须是一个减号。解决这个问题的最佳方法是什么？

请注意，我确实知道如何使用`getchar()`来读取输入然后检查它，但我不想这样做很麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:06:37.193

最好的方法是将整行文本读入缓冲区，*然后*检查缓冲区的内容，而不是依赖于依赖于推回的脆弱的读取链。

只需使用`fgets()`和`sscanf()`。

# java - 通过 Javamail 从 yahoo 中的文件夹中读取邮件

> ID：10529531
> 
> 赞同：0
> 
> 时间：2012-05-10T07:45:16.733
> 
> 标签：java

嗨，我在从手动创建的文件夹中读取邮件时遇到问题。

我可以阅读收件箱中的邮件。但是当我尝试从收件箱以外的地方阅读邮件时，它会出错。

我希望stackoverflow能提供解决方案。提前致谢...

***错误信息：***

**线程“主”javax.mail.FolderNotFoundException 中的异常：MailPop3.main(MailPop3.java:24) 的 com.sun.mail.pop3.POP3Folder.open(POP3Folder.java:183) 中的文件夹不是 INBOX**

***我的代码：***

```
Properties properties = System.getProperties();
Session session = Session.getDefaultInstance(properties);
Store store = session.getStore("pop3");
store.connect(host, user, password);
Folder inbox = store.getFolder("MyPersonalFolder");
inbox.open(Folder.READ_ONLY);

// search for all "unseen" messages
Flags seen = new Flags(Flags.Flag.SEEN);
FlagTerm unseenFlagTerm = new FlagTerm(seen, false);
Message messages[] = inbox.search(unseenFlagTerm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:56:25.100

希望您使用 POP。默认情况下，POP 仅指向 INBOX。根据[`POP3Folder`](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/POP3Folder.html),

*`A POP3 Folder (can only be "INBOX"). See the com.sun.mail.pop3 package documentation for further information on the POP3 protocol provider.`*

要访问您需要使用的自定义文件夹[`IMAPFolder`](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/IMAPFolder.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T16:29:02.463

这可能听起来很奇怪，但我想如果你想制作你的客户文件夹并在代码中使用它，那么你需要将它命名为“Store”，然后它就会起作用。为我工作……花了 3 个小时研究……希望对你也有用

# tsql - 无法执行此 T-SQL 函数

> ID：10529533
> 
> 赞同：0
> 
> 时间：2012-05-10T07:45:31.960
> 
> 标签：tsql

无法执行此功能，我收到错误：

> 必须声明表变量“@Handle”。

函数定义：

```
CREATE FUNCTION [dbo].[FnGetHandle]()
RETURNS INT
AS
  BEGIN
      DECLARE @Handle AS INT;
      DECLARE @strUser AS NCHAR(256);

      SET @Handle = 0;
      SET @strUser = CURRENT_USER;

      INSERT INTO tbl_handle
      Output      Handle
      INTO @Handle ( UserName )
      VALUES      ( @strUser );

      RETURN @Handle
  END 
```

表定义：

> tbl_handle 定义（句柄 int 身份、用户名 nvarchar、创建日期）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:50:28.140

该`output`命令输出到表或表变量。您可以创建一个保存输出值的表变量。

```
declare @T table(handle int)

insert into ...
select ...
output inserted.Handle into @T

select @Handle = handle
from @T

return @Handle 
```

# ios4 - Mobclix 广告未显示在子视图中

> ID：10529535
> 
> 赞同：0
> 
> 时间：2012-05-10T07:45:37.187
> 
> 标签：ios4, mobclix

我已成功将 Mobclix 广告添加到我的应用程序中，但它仅在第一个视图中显示，而不在子视图中显示。我尝试了很多，但我没有得到解决方案。
如果有人可以帮助我，请回复

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:15:09.230

我通过仅添加此行将子视图置于前面来得到答案，其中另一个子视图被添加到视图中，并且 mobclix 广告显示在每个子视图中。

```
[self.view bringSubviewToFront:self.adView]; 
```

这里的 adView 是类 MobclixAdView 的引用。

# sql - 在 Oracle 数据库中声明临时变量

> ID：10529539
> 
> 赞同：1
> 
> 时间：2012-05-10T07:45:54.283
> 
> 标签：sql, oracle, variables

我以前使用过 SQL Server，并且能够学习如何创建临时变量并在 SQL 中使用它们

我曾经写过这样的东西：

```
declare @Student nvarchar(255)

select @Student = studentname from sometable where somecondition = 1

declare @teacher nvarchar(255)

select @teacher = teachername from sometable2 where somecondition >2 
```

接着

```
select @student, @teacher, other columns from sometable where some condition 
```

我想在 ORACLE 数据库中做同样的事情。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:52:38.623

如果您想在 SQL*Plus 中执行此操作而不使用 PL/SQL，则可以使用[替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref453)：

```
column studentname new_value l_studentname
select studentname from sometable where somecondition = 1;

column teachername new_value l_teachername
select teachername from sometable2 where somecondition >2;

select '&l_studentname', '&l_teachername,' other columns
from sometable where somecondition; 
```

指令中的[`new_value`子句](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve013.htm#sthref1337)`column`自动将任何后续选择中的值分配给一个局部变量，我已经预先添加了该变量，`l_`但您可以调用任何内容。然后，您在以后的查询中使用`&`变量替换语法引用该局部变量。

您几乎可以在通常有价值的任何地方使用它们。例如在`where`子句中。请注意，文本值必须用引号引起来，因此`'&l_studentname'`; 如果没有引号，在这种情况下，该*值*将被解释为列名，这是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:51:36.410

你可以声明一个变量说

```
SOME_VAR VARCHAR2(255); 
```

然后直接在查询中使用它

```
SELECT DISTINCT YT.TEACHER_NAME
  INTO SOME_VAR 
  FROM YOUR_TABLE YT
WHERE YT.TEACHER_ID = 1; 
```

然后您可以自由使用此变量 ,`SOME_VAR`以供进一步使用

当然，这不适用于简单的 SQL 语句，但如果您在程序块中使用它，例如过程。

希望能帮助到你

# c++ - 无法理解普通 c++ 与 vc++、win32 编程、mfc、win32 api、CLI 之间的关系

> ID：10529544
> 
> 赞同：2
> 
> 时间：2012-05-10T07:46:10.947
> 
> 标签：c++, winapi, visual-c++, mfc, c++-cli

1.  mfc、cli和win32是什么？你能帮我了解一下视觉工作室是如何与这两个相关的吗？
2.  c++和vc++有什么区别？当我们说“vc++”时，它是否默认暗示了对话框、表单、窗口和其他 gui 元素？
3.  如果我在 Visual c++ 中创建一个基于控制台的应用程序，而不使用任何 win32 编程，它是否有资格作为一个可视化应用程序？
4.  框、对话框、表单和其他 gui 是属于 win32 编程还是它们不同？
5.  除了基于控制台和 win32 编程之外，c++ 中还有哪些其他类型的编程？

请尽可能简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:56:18.503

C++ 是一种编程语言。它已编译，这意味着您需要一个编译器将源代码转换为可执行程序。

VC++是微软出品的一款运行在MS Windows上的编译器，将C++代码编译成MS Windows操作系统的可执行程序。

您可以使用 C++ 编写各种程序，从设备驱动程序到 Web 浏览器插件。好吧，如果您愿意，您甚至可以编写自己的操作系统。

为了简化您的开发，编译器开发人员（和第三方）编写了各种有用的库。MFC 是一个库示例（更准确地说是一个框架），它可以帮助您在 MS Windows 上开发“可视化应用程序”。市场上还有其他 MFC 的替代品。

现在来回答你的问题：

1.  MFC 是 Microsoft 用于在 Visual C++ 中创建可视化应用程序的框架。CLI 是命令行界面。CLI 应用程序通常没有任何可视元素，除了命令行输入——它们大多也没有任何菜单和鼠标交互。Win32 是 32 位 MS Windows 应用程序的总称。您还可以为 64 位 Windows 开发。

2.  C++ 是一种语言。VC++ 是一个编译器。除了 C++ 中可用的功能之外，此编译器还具有一些附加功能，以简化 MS Windows 开发，特别是通过 MFC。

3.  没有“可视化应用程序”的标准术语，但松散地说，如果没有图形元素，您的应用程序将不会被视为可视化应用程序。

4.  对话框、表单和其他 GUI 元素*确实*属于 Win32 编程。如前所述，您可以使用 MFC 来简化此类 Win32 应用程序的开发。

5.  超越基于控制台和 Win32 编程：我认为您会因为在 IDE 中创建新的 C++ 项目时 Visual Studio 附带的各种“向导”而感到困惑。您的安装中可能配置了几种类型的向导；仅举几个例子：您还可以将 ActiveX 和 MFC 控件作为您要创建的“应用程序类型”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T10:04:02.270

好的，让我们从 Windows 开始。Windows 是使用 C/C++ 构建的。您可以使用 Windows 为您提供的功能编写一个 Windows 程序 -**这是 Win32**。

MFC = **Microsoft Foundation Classes** - 一个环绕 Win32 接口的 C++ 类库。它是一个非常薄的包装器，这意味着您仍然可以（有时必须）访问 Win32 函数。按钮、对话框等是 Windows 的原始控件。

控制台应用程序旨在在命令行（也称为 dos 框）中运行。您可以使用 Windows 的某些部分，例如进程、文件系统等，但不能使用对话框之类的“光学东西”。

VC++ 是一个经常用于带有 MFC 的 C++ 的术语，或者至少是 Windows 下的 C++。

HTH 一点点。

# facebook - 如何创建非画布 Facebook 应用程序？

> ID：10529549
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:46:20.513
> 
> 标签：facebook, facebook-graph-api

> **可能重复：**
> [将整个 Facebook 应用程序放入时间线？](https://stackoverflow.com/questions/10227670/putting-a-whole-facebook-application-in-the-timeline)

Facebook 上有一些应用程序不使用 Canvas，但它们很好地利用了 Facebook 时间线；Tumblr、ESPN、Feedly、GoodReads 等等。他们没有画布，但他们只在时间轴中发布用户的活动（例如“阅读文章”、“查看文章”）。我期待着创建这样的应用程序。即使您在 Facebook 中搜索这些应用程序，您也会被重定向到相应的网站。

我浏览过 Facebook 文档，但很痛苦。我阅读的所有文档、视频和文章都是关于 Canvas 应用程序的，但是来自[insidefacebook](http://www.insidefacebook.com/2011/04/22/canvas-connect-websites-best/)的一篇文章给了我一些关于 Facebook 应用程序的想法，但仍然没有成功。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:27:58.827

要将您的应用程序与[Facebook TimeLine](https://www.facebook.com/about/timeline/apps)集成，您需要使用[Open Graph API](https://developers.facebook.com/docs/opengraph/)。

Open Graph API 使用户能够执行除评论、点赞和分享之外的更具体、更高级的社交操作。例如，电影评论应用程序可以使用 Open Graph API 允许用户“评论”“动作电影”、“喜剧”等，而不是通过 Graph API 发布评论链接。图书阅读器应用程序可以允许用户分享他们何时“开始阅读”和“完成阅读”一本“俄罗斯小说”。

要实现 Open Graph 应用程序，您需要为您的应用程序定义[对象和操作](https://developers.facebook.com/docs/opengraph/keyconcepts/)。可以从[现有的对象类型](https://developers.facebook.com/docs/opengraph/objects/builtin/)中选择对象，例如“视频”，或者您可以实现自己的应用程序特定的[自定义对象类型](https://developers.facebook.com/docs/opengraph/define-objects/)，例如“动作电影”。动作可以[内置在动作类型中](https://developers.facebook.com/docs/opengraph/actions/builtin/)，例如“观看”或[自定义动作类型](https://developers.facebook.com/docs/opengraph/define-actions/)，例如“开始阅读”。

[以下](https://developers.facebook.com/docs/opengraph/tutorial/)是 Facebook Developer 上有关如何开始使用 Open Graph 应用程序的分步教程。

# java - 被 JDOM 解析困住了？

> ID：10529557
> 
> 赞同：1
> 
> 时间：2012-05-10T07:46:42.977
> 
> 标签：java, xml, jaxb, xml-parsing, jdom

我有一个复杂的 JDOM 元素，如下 (A)，我需要更改 (B) 的结构，以便处理 JAXB（使用已经存在的类，我唯一​​能做的就是更改 xml 的结构），我能使用 JDOM api 来做到这一点？

由于我是java初学者，这对我来说非常困难，如果有人指出解决方案，这对我很有帮助

## 现有元素 (A)

```
<DETAILS>
    <ROWSET name="OPTIONS">
       <ROW num="1">
          <Uniqueno>1000</Uniqueno>
          <ROWSET name="SUSPENCE">
             <ROW num="1">
                <Uniqueno>1001</Uniqueno>
                <ROWSET name="PERSONS">
                   <ROW num="1">
                     <Name>60821894</Name>
                     <Age>44</Age>
                   </ROW>
                   <ROW num="2">
                      <Name>60821894</Name>
                      <Age>44</Age>
                   </ROW>
                </ROWSET>
                <ROWSET name="PERSONS">
                   <ROW num="1">
                     <Name>60821894</Name>
                     <Age>55</Age>
                   </ROW>
                   <ROW num="2">
                      <Name>60821894</Name>
                      <Age>55</Age>
                   </ROW>
                   <ROW num="3">
                      <Name>60821894</Name>
                      <Age>55</Age>
                   </ROW>
                </ROWSET>
             </ROW>
          </ROWSET>
       </ROW>
    </ROWSET>
 </DETAILS> 
```

## 所需元素 (B)

```
<DETAILS>
    <OPTIONS>
          <Uniqueno>1000</Uniqueno>
          <SUSPENCE>
                <Uniqueno>1001</Uniqueno>
                <PERSONS>
                     <Name>60821894</Name>
                     <Age>44</Age>
                     <Name>60821894</Name>
                     <Age>44</Age>
                </PERSONS>
                <PERSONS>
                     <Name>60821894</Name>
                     <Age>55</Age>
                     <Name>60821894</Name>
                     <Age>55</Age>
                     <Name>60821894</Name>
                     <Age>55</Age>
                </PERSONS>
          </SUSPENCE>
    </OPTIONS>
 </DETAILS> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:34:20.060

我可以建议改用 XSLT。容易得多。从这样的事情开始

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="DETAILS/ROWSET[@name='OPTIONS']">
    <DETAILS>
        <OPTIONS>
            <xsl:apply-templates />
        </OPTIONS>
    </DETAILS>
</xsl:template>

<xsl:template match="ROW">
        <xsl:apply-templates />
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:54:35.360

查看xml，这是两个完全不同的xml。您需要动态构建类似于B的xml结构。为此，以下链接将为您提供帮助。

[http://www.ibm.com/developerworks/java/library/j-jdom/](http://www.ibm.com/developerworks/java/library/j-jdom/)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:37:04.880

您已经多次问过基本相同的问题。

[使用 JDOM API 删除 XML 属性？](https://stackoverflow.com/questions/10514756/remove-xml-attribute-using-jdom-api)

[解析 XML 中的问题](https://stackoverflow.com/questions/10514017/issues-in-parsing-xml)

如果您还不能正确回答前面的问题，您需要退后一步，使用更基本的示例，然后再开始进行多元素移动。

虽然我同意 42 点的观点，即从长远来看 XSL 将是一个更好的解决方案，但我认为您还没有处于可以使事情变得更容易（对您而言）的地方。如果您的数据中有可用的 JDOM 元素，您应该找出您的 Java 调试器，并在添加和删除元素时检查它们。您需要“玩”一点，以更好地理解 Java、XML 和 JDOM 的工作原理。现在你在问一大堆相关的问题，这些问题表明对什么是“基础”概念存在基本的误解。在处理这些更复杂的概念之前，您需要打好这些基础。

不如从简单的开始：

```
XMLOutputter xout = new XMLOutputter(Format.getPrettyFormat());
Document doc = new Document();
Element root = new Element("DETAILS");
doc.addContent(root);

xout.output(System.out, doc);

Element row = new Element("ROW");
root.addContent(row);

xout.output(System.out, doc);

row.detach();
xout.output(System.out, doc); 
```

您可以使用上面的内容来查看如何添加内容以及如何从 JDOM 内容中分离内容。

然后，当你弄清楚了，你可以把它放在循环、扫描等中，这样你就可以从文档层次结构的其他地方分离和重新添加内容。

# php - mysql 在我的表单中插入错误

> ID：10529560
> 
> 赞同：0
> 
> 时间：2012-05-10T07:47:02.710
> 
> 标签：php, mysql, sql, forms

我有这个 php 代码：

```
$db = new mysql;
$new_bad = $_POST['new_bad'];
$new_replace = $_POST['new_replace'];
if ($_POST['submit']) {
  if ($new_bad && $new_replace) {
    $db->query("SELECT * FROM BAD_WORDS WHERE BAD_WORD='".$new_bad."'");
    if ($db->CNrows() == 0) {
      $db->query("
        INSERT INTO BAD_WORDS(BAD_WORD,REPLACE)
        VALUE('".$new_bad."','".$new_replace."')
      ");
      $err = "added succesfully..";
      $tmp->assign('msg', 'true');
    } else {
      $err = "the word is in table ..!!";
      $tmp->assign('msg', 'false');
    }
  } else {
    $err = "you must fill all feilds ..!!";
    $tmp->assign('msg', 'false');
  }
} 
```

但是当我测试它时，我发现了这个错误：

```
您的 SQL 语法有错误；检查相应的手册
到您的 MySQL 服务器版本，以便在 'REPLACE) 附近使用正确的语法
第 1 行的 VALUES('bad1','replace1')'

```

有什么问题？？

`$tmp->`= 它是聪明的模板类，可以毫无问题地工作

`BAD_WORDS`表 =`ID,BAD_WORD,REPLACE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:48:42.507

Replace 是 MySQL 中的保留字。尝试在它周围加上引号（这些`）。您还需要一个 S in VALUE

像这样：

```
INSERT INTO `BAD_WORDS` (`BAD_WORD`,`REPLACE`) VALUES [...] 
```

您可以在此处查看 MySQL 查询中的所有保留字：http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

编辑：

```
$db->query("INSERT INTO `BAD_WORDS` (`BAD_WORD`,`REPLACE`) VALUES ('$new_bad','$new_replace')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:51:45.890

在你的表结构中我看到

```
ID,BAD_WORD,REPLACE 
```

id 字段也需要一个值，因此请替换：

```
$db->query("INSERT INTO BAD_WORDS(BAD_WORD,REPLACE)VALUE('".$new_bad."','".$new_replace."')"); 
```

和：

```
$db->query("INSERT INTO BAD_WORDS(ID,BAD_WORD,REPLACE)VALUE('','".$new_bad."','".$new_replace."')"); 
```

如果 id 是自动递增的，否则给 id 一个值。

# drupal - 在节点上显示 OpenLayers 地图

> ID：10529570
> 
> 赞同：2
> 
> 时间：2012-05-10T07:47:51.273
> 
> 标签：drupal, drupal-7, views, openlayers

我在 drupal 上使用 openlayers 模块。我有纬度和经度字段（没有地理字段模块）和一些节点。我创建了一个视图来在地图上标记这些位置。到目前为止，一切都很好。此外，我想在每个节点上显示一个地图，其中包含每个位置的纬度和经度。为此，我尝试添加块显示，使用添加了 nid 的上下文过滤器，但它对我不起作用？有没有人尝试过这样做？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:02:59.197

最简单的方法是安装geofield 和geofield 地图。然后将 geofield 设置为显示为地图。这将显示为 Google 地图，可能会与您的其他 OpenLayers 地图发生冲突。

另一个选项可能（尚未尝试）是创建一个带有 nid 参数的地图视图，并使用 EVA 模块将其作为字段嵌入到您的节点中。

# php - 简单的登录ajax检查

> ID：10529574
> 
> 赞同：0
> 
> 时间：2012-05-10T07:48:11.213
> 
> 标签：php, jquery, ajax

我有一小段代码，我需要有人帮助我确定我在哪里犯了错误。我感谢您提供的任何帮助。

```
 $('#username').change(function()
     {
        $.ajax(
        {
           type:"POST",
           url:'login.php'
           //datatype:'html'
        }
        ).done(function(data)
        {
           $('#info').html(data);
        }
        );
     }); 
```

我的 login.php 包括使用 mysqli 函数连接到数据库并检查用户是否已经存在等等等等。

```
function query($query)
{
    $mysqli = new mysqli('localhost','root', 'okazaki', 'gene_database');
    if (mysqli_connect_errno())
    {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    } 

    if($result=$mysqli->query($query))
    {
        while($row=$result->fetch_assoc())
        {
            $data[]=$row;
        }
        $mysqli->close();
        print_r($data);
        return $data;
    }
    else
    {
        printf("Unable to query data");
        $mysqli->close();
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:01:03.857

`echo $data`而不是返回它，`return`不输出任何东西，它只是返回它（在服务器级别）

（编辑：抱歉错过了`print_r`你的问题）

你的`query`函数在哪里被调用？在您发布的示例中，它不是。您可以将另一个属性添加到您的 ajax 请求中，例如`action: 'checkUser'`或类似的东西，然后`login.php`检查 if `$_POST['action']`is `checkUser`，如果是，则运行该`query`函数。

此外，您实际上并没有发送任何数据来检查您的 ajax 请求，查看您的示例，您应该发送 username ( `$('#username').val()`) 的值以构建`$query`传递给您的`query`函数。

希望这会为您指明正确的方向。

# jsf - Netbeans 警告：未找到符合注入条件的已启用 bean

> ID：10529577
> 
> 赞同：4
> 
> 时间：2012-05-10T07:48:21.587
> 
> 标签：jsf, netbeans, warnings, observer-pattern, cdi

我有两个豆子。**第一个**bean语言系统：

```
@Named(value = "languageOfSystem")
@SessionScoped
public class LanguageOfSystem implements Serializable {
   @Inject private JsfUtils eeJsfUtils; 
```

第二**个**bean，userBb：

```
@Named(value = "userBb")
@SessionScoped
public class UserBb implements Serializable, LangUpdInterface {
   @EJB
   private EjbUtils ejbUtils;
   @EJB
   private PuserFacade puserFacade;
   @Inject
   private Direction direction;
   @Inject
   private PortfelDao portfelDao;
   @Inject
   private LanguageOfSystem languageOfSystem; 
```

我注入`languageOfSystem`，`userBb`NetBeans IDE 给我与注入一致的警告：

```
no enabled eligible for injection beans are found 
```

但是我可以从`languageOfSystem`in调用方法`userBb`并且它工作正常。那么这个警告很重要，我应该改变吗？

还有第二个问题。我在这种情况下使用[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)，其中`userBb`是依赖项，并且`languageOfSystem`是具有依赖项列表的主题。我`userBb`通过调用适当的方法在主题列表中注册`languageOfSystem`。两个会话 bean 是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:34:06.327

> 但是我可以从 userBb 中的 languageOfSystem 调用方法，并且效果很好。

您的代码看起来没有错 - 它有效。所以这似乎是一个Netbeans的问题。

> 还有第二个问题。我在这种情况下使用观察者设计模式，其中 userBb 是依赖项，languageOfSystem 是具有依赖项列表的主题。我通过从 languageOfSystem 调用适当的方法在主题列表中注册 userBb。两个会话 bean 是否正确？

您是否知道 CDI 规范包含一个强大且[类型安全](http://docs.jboss.org/weld/reference/latest/en-US/html/events.html)的观察者模式实现？你绝对应该检查一下。

这里还有两件事要提到：

```
@Named(value = "languageOfSystem")
@Named(value = "userBb") 
```

1.  您提供的值已经是默认值。因此，您可以将其省略，而只需编写即可`@Named`。
2.  关于您发布的代码：`@Named`根本不需要 - 它所做的只是提供一个用于 JSF 的 EL 名称。如果您完全跳过@Named，您的代码将同样有效......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:32:30.030

至于你的第一个问题：

这是一个已知的 netbeans 错误（请参见[此处](http://netbeans.org/bugzilla/show_bug.cgi?id=201825#c6)和[此处](http://netbeans.org/bugzilla/show_bug.cgi?id=205914)）。但是，第一个链接中的讨论表明这是焊接实现的问题，Netbeans 的警告是根据规范。

尽管如此，bugzilla 文件说它将在 Netbeans v7.2 中得到修复。

在此之前，您仍然可以禁用警告（*工具 --> 选项 --> 编辑器 --> 提示*）

# java - Java中>>和>>>运算符之间的区别

> ID：10529580
> 
> 赞同：2
> 
> 时间：2012-05-10T07:48:35.283
> 
> 标签：java, bit-shift

> **可能重复：**
> [>>> 和 >> 运算符之间的区别](https://stackoverflow.com/questions/1972356/difference-between-and-operators)

我对 >> 和 >>> 运算符感到困惑。所以请用一些关于 >> 和 >>> 运算符的例子来指导我。谢谢

# javascript - IE9 兼容性视图 Javascript 问题

> ID：10529581
> 
> 赞同：0
> 
> 时间：2012-05-10T07:48:38.000
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9

当我在各种旧版本的 IE （包括 IE9 兼容模式）中查看我参与开发的网站时，我遇到了问题。我不是 Javascript 开发人员，所以我需要一些关于为什么它在 IE9 中工作但在兼容模式下不工作的建议。以下链接是最好的例子。

[http://www.hurdrolland.co.uk/architecture/](http://www.hurdrolland.co.uk/architecture/)

有一个 javascript 滑块，您将看到它在 IE9 中工作，但是当您切换到兼容模式时，它会完全停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:52:34.617

而不是简单地使用`compatability mode`这样做：按 F12 打开开发人员窗口。选择 Documentmode 到 IE7 并在它下面的选项卡中选择 Script。现在刷新站点。你会在那里看到几个错误。

我有挪威语的 Windows，我不知道如何正确地将其翻译成英文。但它应该可以帮助您调试问题。

顺便说一句，尝试删除`images`字符串中的最后一个逗号`homeSlides`

```
var homeSlides = {
    html: '<h1>home</h1><p>Lorem ipsum...</p>',
    images: ['/media/17812/eastgate-cover.gif','/media/17873/ed-master-2.gif','/media/14233/cover-3.gif','/media/14241/cover-4.gif',] 
```

}

到：

```
var homeSlides = {
    html: '<h1>home</h1><p>Lorem ipsum...</p>',
    images: ['/media/17812/eastgate-cover.gif','/media/17873/ed-master-2.gif','/media/14233/cover-3.gif','/media/14241/cover-4.gif']
} 
```

# visual-studio-2010 - 检查自定义 Visual Studio 向导中的项目路径

> ID：10529590
> 
> 赞同：2
> 
> 时间：2012-05-10T07:49:13.460
> 
> 标签：visual-studio-2010, project-template

我为 Visual Studio 2010 创建了一个自定义模板向导。因此我正在实现该`Microsoft.VisualStudio.TemplateWizard.IWizard`界面。我希望此向导生成的项目始终放置在某个目录中。如果用户选择了另一个目录，一个消息框将显示错误*"Blah projects must be placed in C:\Blah"*。

**问：**在显示向导之前，是否可以检查项目的目标目录？

# wcf - 使用 Ninject Dispose 的 WCF 未在 requestscope 中触发

> ID：10529592
> 
> 赞同：7
> 
> 时间：2012-05-10T07:49:17.093
> 
> 标签：wcf, ninject

这是我的模块

```
internal class WebServiceConfiguration : NinjectModule
{
    public override void Load()
    {
        Bind<IWebService>().To<WebService>().InRequestScope();
    }
} 
```

这是 global.asax

```
public class Global : NinjectHttpApplication
{
    protected override IKernel CreateKernel()
    {
        return new StandardKernel(new WebServiceConfiguration());
    }
} 
```

我也试过 InScope(c => OperationContext.Current)

这是我在 IWebService 中使用 IDisposable 的服务

```
[ServiceBehavior(InstanceContextMode = InstanceContextModeDefinition.Mode)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class WebService : IWebService
{
    private readonly ISomeService _someService;

    public WebService(ISomeService someService)
    {
        _someService = someService;
    }

    public void Dispose()
    {
        _someService.Dispose();
    } 
```

这是服务标记中的 ServiceHostFactory

```
<%@ ServiceHost Language="C#" Debug="true" Factory="Ninject.Extensions.Wcf.NinjectDataServiceHostFactory" Service="WCFTest.Services.WebService" CodeBehind="WebService.svc.cs" %> 
```

依赖项的注入有效。我唯一担心的是当客户端关闭服务调用时不会触发 dispose 方法。

我试图删除 Factory="Ninject.Extensions.Wcf.NinjectDataServiceHostFactory" 只是为了测试是否会调用 Dipose，它确实调用了，但我当然不会进行自动注入。所以我在设置中可能做错了什么？或者 ninject 有一个错误没有调用 Dispose？

注意：我在 ninject wcf 扩展中获取示例设置并添加了一些 DI。

您的帮助将不胜感激。

顺便说一句：我正在使用 Ninject 3.0.0.15、Ninject.Extensions.Wcf 3.0.0.5、Ninject.Web.Common 3.0.0.7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:33:28.453

采用

```
Bind<IWebService, WebService>().To<WebService>().InRequestScope(); 
```

# asp.net - 使用 asp.net 在 IIS 上的 URL 路径中编码的 ID

> ID：10529594
> 
> 赞同：0
> 
> 时间：2012-05-10T07:49:18.873
> 
> 标签：asp.net, urlencode

我们有一个看起来像这样的 ID：

```
WIUHyUT/Evg=/ 
```

我们想在路径或 url 中使用：

```
http://localhost/freelancers/WIUHyUT/Evg=/Brigitte 
```

这显然不起作用，所以我们使用 HttpUtility.UrlEncode() 并获取

```
http://localhost/freelancers/WIUHyUT%2fEvg%3d/Brigitte 
```

但这仍然行不通。
这里有什么好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:52:37.780

获取 url 字符串后，您必须对其进行解码。此外，您应该在编码参数后使用任何斜杠，使用 & 号代替加入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:09:30.317

我们实际上决定首先将整个内容编码为 HEX：

```
 public static string GetBytesToString(byte[] value)
    {
        SoapHexBinary shb = new SoapHexBinary(value);
        return shb.ToString();
    } 
```

有了这个，我们就在 url 中有 HEX 代码。工作正常。

# cordova - Phonegap 1.7.0 打开 Webview URL 的解决方法

> ID：10529597
> 
> 赞同：0
> 
> 时间：2012-05-10T07:49:25.347
> 
> 标签：cordova, webview, cross-platform, mobile-website

我对 phonegap 版本 1.7.0rc1 和 iOS 5 下的开发有疑问。我正在使用 XCode 4.3 和 cordova 插件来实现跨平台 Web 应用程序。

每个人的目标都是一样的，一个可以在任何目标平台上运行的应用程序。Phonegap 可能是一个解决方案。但是我厌倦了每次我修复或更改 www 内容中的某些内容时从新构建每个应用程序并在每个商店（Play 和 AppStore）中发布它。

我希望有一个远程 www 文件夹也使用 phonegap 容器，而不是将我的 www 文件夹复制或克隆到每个项目中。1.7.0 版有没有办法在不打开 Safari 浏览器窗口的情况下加载外部 URL？

我正在查看这篇文章[PhoneGap for iPhone：加载外部 URL 时出现问题](https://stackoverflow.com/questions/5911255/phonegap-for-iphone-problem-loading-external-url)，但它似乎仅适用于 1.4.0 版

还是有另一种方法可以一次性发布应用程序并对内容进行独立更改？我正在使用像相机这样的本机功能，但也想要一个 Web 应用程序，这就是为什么我要求一个 phonegap “解决方法”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:25:46.077

在 Cordova.plist 中，将密钥设置`OpenAllWhitelistURLsInWebView`为`YES`并确保您已将主机名列入`ExternalHosts`同一 plist 的白名单

# ios - 灰度的 UIView。视图未重绘

> ID：10529601
> 
> 赞同：5
> 
> 时间：2012-05-10T07:49:43.023
> 
> 标签：ios, uiview, grayscale

通过在顶部添加以下视图，我设法获得了灰度 UIView：

```
@interface GreyscaleAllView : UIView

@property (nonatomic, retain) UIView *underlyingView;

@end

@implementation GreyscaleAllView

@synthesize underlyingView;

- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    // draw the image
    [self.underlyingView.layer renderInContext:context];

    // set the blend mode and draw rectangle on top of image
    CGContextSetBlendMode(context, kCGBlendModeColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1.0);
    CGContextFillRect(context, rect);
    [super drawRect:rect];
}

@end 
```

它可以工作，但除非我手动调用 setNeedsDisplay，否则内容不会更新。（我可以按下 UIButton 并触发动作，但外观没有任何变化）因此，为了让它表现得像预期的那样，我每秒调用 setNeedsDisplay 60 次。我究竟做错了什么？

**更新：**

viewcontroller 用这个初始化overlayview：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    GreyscaleAllView *grey = [[[GreyscaleAllView alloc] initWithFrame:self.view.frame] autorelease];
    grey.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    grey.userInteractionEnabled = NO;    
    [self.view addSubview:grey];
} 
```

我已经为底层视图添加了这个来重绘：

```
@implementation GreyscaleAllView

- (void)setup {

    self.userInteractionEnabled = FALSE;
    self.contentMode = UIViewContentModeRedraw;

    [self redrawAfter:1.0 / 60.0 repeat:YES];

}

- (void)redrawAfter:(NSTimeInterval)time repeat:(BOOL)repeat {

    if(repeat) {
        // NOTE: retains self - should use a proxy when finished
        [NSTimer scheduledTimerWithTimeInterval:time target:self selector:@selector(setNeedsDisplay) userInfo:nil repeats:YES];
    }

    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:28:59.577

您真正想要的是仅在父视图重绘时才告诉子视图重绘，在这种情况下，您可以在父视图中覆盖并`-setNeedsDisplay`使其调用`-setNeedsDisplay`. 这需要为您的属性`GreyscaleAllView`子类化 UIView 。`UIViewController``view`

即`loadView`在控制器中实现，并设置

```
self.view = [[CustomView alloc] initWithFrame:frame]; 
```

其中 CustomView 覆盖`setNeedsDisplay`如上所述：

```
@implementation CustomView

- (void)setNeedsDisplay
{
    [grayView setNeedsDisplay]; // grayView is a pointer to your GreyscaleAllView
    [super setNeedsDisplay];
}

@end 
```

为了完整起见，您也应该为`-setNeedsDisplayInRect:`

# objective-c - Objective - C 静态库和它的公共头文件 - 什么是正确的方法？

> ID：10529604
> 
> 赞同：8
> 
> 时间：2012-05-10T07:49:51.527
> 
> 标签：objective-c, ios, xcode, static-libraries, header-files

我正在构建一个将在多个 iOS 应用程序中使用的静态库。与此同时，我正在使用我的库开发其中一个应用程序。

在开发过程中，我每天至少会收到一次关于找不到库中的头文件的烦人错误（在我的应用程序项目中）。我了解到，在构建静态库时，标头可以是`Public`，`Private`或`Project`

我猜想我想在我的库中公开的每个标题都应该是`Public`.

我的问题是，管理这些公共标头的最佳方法是什么？我应该为我的所有公共头文件创建一个主要的公共头文件`#import`吗？Xcode 可以为我生成这样的文件吗？

另一个主要问题是`Public Header Folder Path`设置的推荐值是多少？

我的主要目标是，未来将使用这个库的项目将能够以尽可能少的配置来做到这一点（添加链接器标志、更改`User Header Search Path`等）

非常感谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T12:03:31.430

关于公共/私人/项目标头，这是以前的答案，以防万一=> [https://stackoverflow.com/a/8016333/1075192](https://stackoverflow.com/a/8016333/1075192)

大多数时候，C/C++/Obj-C 库和框架都有一个主标题，包括所有其他标题。例如，Cocoa 框架遵循这条路径。

例如，要使用 QuartzCore 框架声明 CAAnimation，您可以这样做：

```
#import "QuartzCore/CAAnimation.h" 
```

或者

```
#import "QuartzCore/Quartzcore.h" 
```

“QuartzCore.h”实际上只由一个标头保护组成，并包含库的所有其他标头。

在我看来，使用第一个实际上更好，因为它不包含您不需要的所有声明。但大多数时候我们选择一次包含所有内容的惰性解决方案。

我不知道你是否可以直接使用 xCode 生成它，无论如何它很容易自己完成，因为它只是一堆包含或导入。

公共标头文件夹路径通常是“MyLibraryOrFramework/Headers”（例如，只需查看任何 Cocoa 的框架内部）。

最后，如果你想要一些真正可重用和无缝的东西，我建议你使用框架而不是静态库（这几乎是相似的）。

看看这个很好的答案，了解为什么它完全符合您的需要：=> [https://stackoverflow.com/a/6389802/1075192](https://stackoverflow.com/a/6389802/1075192)

瞧，希望这个答案有所帮助。

# java - 代表这种情况的想法

> ID：10529607
> 
> 赞同：2
> 
> 时间：2012-05-10T07:50:05.393
> 
> 标签：java, data-structures, graph

我正在设计一个飞行模拟程序，并且正在寻找有关如何正确实现此类要求的想法。

请看下面我的照片。点代表位置。

![在此处输入图像描述](../Images/cfd4f5d279cb4801943fc6a426be6f44.png)

这个想法是这样的，我想正确地创建一个数据结构来最好地代表java中的这种场景，这样

*   当我在第 1 点时，我离最后的第 8 点还有多远？

    *   点 2、3 和 5 与点 8 的距离相同
    *   从第 1 点，我可以遍历到第 3 点到第 6 点，然后是第 7 点，然后是第 8 点，这相当于 4 个步骤。
*   当我在第 0 点时

    *   我可以遍历到第 4 点，然后到第 5 点，然后到第 7 点，然后到达第 8 点，这也相当于 4 步。

我只是想帮助用户帮助他们找到不同的路线。

这可能吗？哪种 java 数据结构最适合这个要求？还有任何设计想法如何实现这一点？

抱歉，如果我的问题可能含糊不清，我只是想尽可能多地获取信息以正确处理此类要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:54:11.707

您所拥有的是一个[加权图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29#Weighted_graph)，其中权重表示节点之间的距离（这很常见）。您可以自己轻松地实现它（这是一种很好的学习方式！），但是那里有很多 Java 源代码。

当然，这不是*java*数据结构。它只是一种数据结构（或概念），每个人、任何地方都可以使用。

一旦您实现了加权图，计算步数和距离就非常容易。

有大量关于这一切的文档，尤其是在[Stackoverflow](https://stackoverflow.com/search?q=weighted%20graph%20%5Bjava%5D)上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:11:54.807

这是一个最短路径问题，一个常见的图问题。表示数据的常用方法是邻接列表或矩阵：

邻接[列表](http://en.wikipedia.org/wiki/Adjacency_list)为每个节点保留所有 1 步可达目的地。这通常作为链接列表实现。如果您的图表相对稀疏（即每个节点的目的地很少），这是正确的选择。

邻接[矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)用于（非常）密集的图。基本上，您保留一个 NxN 值矩阵（权重/成本，或是/否布尔值）。然后，distances[i][j] 表示从 i 到 j 的成本。不可用弧的成本为 INF（或某个错误值）。

问题本身通常由[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)解决。

# jsf - JSF 2.0 中的对话范围

> ID：10529609
> 
> 赞同：0
> 
> 时间：2012-05-10T07:50:10.130
> 
> 标签：jsf, jsf-2, cdi, myfaces, codi

我正在尝试为我们的应用程序在 JSF 的支持 bean 中实现对话范围。起初，我尝试使用 MyFaces Orchestra。它似乎运作良好。但是，我关心的是应用程序部署在集群环境和会话复制期间的情况。然后，我在考虑 MyFaces CODI 和 OpenWebBeans 是否是更好的选择。

我有两个问题要问：

**(1) MyFaces Orchestra 声称它不支持分布式会话。是不是说明在集群环境下效果不好？**

**(2) MyFaces CODI 部署在集群环境有什么问题吗？我在其文档中找不到任何有关此的信息。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:23:36.040

如果您的服务器支持 CDI 会话范围 bean 的集群，您还可以集群 M​​yFaces CODI 会话。

# python - 根据属性的三个不同值对python中的对象列表进行排序？

> ID：10529613
> 
> 赞同：-2
> 
> 时间：2012-05-10T07:50:27.123
> 
> 标签：python, sorting, jquery-ui-sortable

我有一个对象列表。每个对象都有一个属性“优先级”，其值可能是低、中、高。我需要对对象列表进行排序，以便优先级“高”的对象首先出现在列表中，然后是对象优先级“中”，最后是优先级“低”的对象。我知道我可以使用几个 for 循环来做到这一点，但我想要一个快速有效的 Python 解决方案。对不起，但我是 Python 的初学者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T07:53:44.350

```
score = dict(high=0, medium=1, low=2)
mylist.sort(key=lambda x: score[x.priority]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T09:53:31.503

非常感谢。赞成 pythonic 解决方案。

我使用了排序的变体。

```
sorted(myList, key = lambda x : score[x.priority]) 
```

# java - Java LostFocus 和 InputVerifier，以反向标签顺序移动

> ID：10529618
> 
> 赞同：2
> 
> 时间：2012-05-10T07:50:35.177
> 
> 标签：java, swing, focus

我有一个 GUI 应用程序，它使用 InputVerifier 在产生焦点之前检查文本字段的内容。这一切都很正常。然而，昨天发现了一个问题——它似乎是一个错误，但我在任何地方都找不到任何提及它的内容。在我将此报告为错误之前，我想我会问：我在这里遗漏了一些明显的东西吗？

情况：

*   一组带有 InputVerifiers 的文本字段。
*   所有控件上的 FocusLost 和 FocusGained 侦听器，所以我可以看到发生了什么。
*   一个单独的线程使用 DefaultKeyboardFocusManager 报告（每 2 秒）哪个控件具有焦点。
*   我将无效数据放在表单中间的 JTextField 中，并尝试离开控件。

如果我尝试使用鼠标或使用 tab 键离开此控件，我不能。FocusLost 事件不会触发并且控件正确地保留焦点。

*但是，如果我尝试使用 Shift-Tab 以相反*的制表顺序离开控件，**有时会**触发 FocusLost 事件。如果发生这种情况，单独的线程会报告**没有控件具有焦点**，即 getFocusOwner() 返回 null。

* * *

编辑：下面是一个显示问题的小示例程序。问题与额外的线程无关 - 线程只是为了使问题更加明显。如果存在竞争条件，则它在 Swing 中的某个地方。

要查看问题，请转到第二个文本框并将其清空。控件应该保留焦点，*除非*您通过按 shift-tab 离开它，否则会保留焦点。与完整的应用程序不同，错误似乎 100% 发生在这里。在 OpenJDK 6 和 Oracle Java 7 下都是如此。

这几乎太明显了，不可能是一个错误，而且它发生在多个 Java 环境中。因此，我怀疑我遗漏了一些明显的东西。任何人？

```
public class FocusBugDemo extends JFrame {
    static JTextField txtOne = new JTextField("Ignore this control");
    static JTextField txtTwo = new JTextField("Delete this text, then press shift-tab");
    static JLabel lblFocus = new JLabel("");
    static KeyboardFocusManager kfm = new DefaultKeyboardFocusManager();

    public static void main(String[] args) {
        new FocusBugDemo();
        Thread t = new Thread() {
            @Override
            public void run() {
                while(true) {
                    Component c = kfm.getFocusOwner();
                    String focusInfo = "elsewhere";
                    if (c == null) {                        focusInfo = "null";
                    } else if (c == txtOne) {       focusInfo = "txtOne";
                    } else if (c == txtTwo) {       focusInfo = "txtTwo";
                    }
                    lblFocus.setText(System.currentTimeMillis() + " - Focus owner " + focusInfo);
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                    }
                }
            }
        };
        t.start();
    }

    private FocusBugDemo() {
        super("Focus bug demo");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setPreferredSize(new Dimension(300,100));
        setLayout(new GridLayout(3,1));
        NotEmpty validator = new NotEmpty();
        txtOne.setInputVerifier(validator);
        txtTwo.setInputVerifier(validator);
        add(txtOne);
        add(txtTwo);
        add(lblFocus);
        pack();
        setVisible(true);
    }

    private class NotEmpty extends InputVerifier {
        @Override
        public boolean verify(JComponent input) {
            JTextField txtField = (JTextField) input;
            return (txtField.getText().length() > 0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:24:44.820

现在作为错误[7167871](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7167871)报告给 Oracle 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:42:32.620

使用您的[sscce](http://sscce.org/)，我无法在支持@CatalinaIsland 观察的 Mac OS X、Java 6 上重现您描述的效果。特别是，焦点永远不会使用`tab`or离开一个空的文本字段`shift-tab`；`null`只有当框架被停用时，焦点才会变为。

我看到两个线程访问多个字段而根本没有同步。至少，您应该使用`EventQueue.invokeLater()`in`t`来更新 GUI，如[*Swing 中的并发中*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)所述并在下面显示。

更广泛的问题是：您要使用什么来解决焦点问题`t`？

```
import java.awt.Component;
import java.awt.DefaultKeyboardFocusManager;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.KeyboardFocusManager;
import javax.swing.InputVerifier;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class FocusDemo {

    private static final JTextField txtOne =
        new JTextField("Ignore this control");
    private static final JTextField txtTwo =
        new JTextField("Delete this text, then press shift-tab");
    private static final JLabel lblFocus = new JLabel("");

    public static void main(String[] args) {
        new FocusDemo();
        Thread t = new Thread() {

            @Override
            public void run() {
                while (true) {
                    EventQueue.invokeLater(new Runnable() {

                        KeyboardFocusManager kfm =
                            new DefaultKeyboardFocusManager();

                        @Override
                        public void run() {
                            Component c = kfm.getFocusOwner();
                            String focusInfo = "elsewhere";
                            if (c == null) {
                                focusInfo = "null";
                            } else if (c == txtOne) {
                                focusInfo = "txtOne";
                            } else if (c == txtTwo) {
                                focusInfo = "txtTwo";
                            }
                            lblFocus.setText(System.currentTimeMillis()
                                + " - Focus owner " + focusInfo);
                        }
                    });
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace(System.err);
                    }
                }
            }
        };
        t.start();
    }

    private FocusDemo() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Focus bug demo");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setPreferredSize(new Dimension(300, 100));
                f.setLayout(new GridLayout(3, 1));
                NotEmpty validator = new NotEmpty();
                txtOne.setInputVerifier(validator);
                txtTwo.setInputVerifier(validator);
                f.add(txtOne);
                f.add(txtTwo);
                f.add(lblFocus);
                f.pack();
                f.setVisible(true);
            }
        });
    }

    private class NotEmpty extends InputVerifier {

        @Override
        public boolean verify(JComponent input) {
            JTextField txtField = (JTextField) input;
            return (txtField.getText().length() > 0);
        }
    }
} 
```

# java - 将外部属性放入命名查询

> ID：10529625
> 
> 赞同：0
> 
> 时间：2012-05-10T07:51:13.037
> 
> 标签：java, spring, jpa

有谁知道将外部属性放入 jpa 命名查询的方法（如果有）？

例如：

```
@NamedQuery(name = "Test", query = "select t from ${table.name} t") 
```

相对于：

```
 @NamedQuery(name = "Test", query = "select t from TableName t") 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:58:42.157

注释是最终的，因此它们不能在运行时更改，所以你不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:05:39.807

您可以在运行时定义本机查询而不是命名查询并自己翻译 SQL 字符串。

其他解决方案是在您的代码上使用某种预编译器，或使用某种持久性单元事件来后处理您的查询。如果您使用的是 EclipseLink，您可以为此使用 SessionCustomizer，或使用 SessionEventListener 在 SQL 查询执行之前对其进行预处理。

# c# - 如何获取多页文档中当前页面的 PdfWriter？

> ID：10529629
> 
> 赞同：1
> 
> 时间：2012-05-10T07:51:45.240
> 
> 标签：c#, itext

我正在尝试在现有文档 PDF 中插入 3D 注释。在“PdfAppearance ap..”行中出现错误 - “使用 PdfStamper.getUnderContent() 或 PdfStamper.getOverContent()”。如何更改代码以使其工作？

```
private void button4_Click(object sender, EventArgs e)
        {
            Document document = new Document();
            PdfReader reader = new PdfReader("model.PDF");
            PdfStamper stamper = new PdfStamper(reader, /* new FileOutputStream("HelloWorldStamped.pdf"));*/
            new FileStream("PartCreated1.pdf", FileMode.Create));
            PdfContentByte newPage;
            int total = reader.NumberOfPages;
            for (int i = 1; i <= total; i++)
            {
                newPage = stamper.GetOverContent(i);
                if (i == 1)
                {
                    PdfWriter writer = newPage.PdfWriter;
                    Stream sd = File.Open(RESOURCE, FileMode.Open);
                    iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(100, 100, 500, 800);
                    PdfStream stream3d = new PdfStream(sd, writer);
                    stream3d.Put(PdfName.TYPE, new PdfName("3D"));
                    stream3d.Put(PdfName.SUBTYPE, new PdfName("U3D"));
                    stream3d.FlateCompress();
                    PdfIndirectObject streamObject = writer.AddToBody(stream3d);
                    stream3d.WriteLength();
                    PdfDictionary dict3D = new PdfDictionary();
                    dict3D.Put(new PdfName(PDF_NAME_XN), new PdfString("DefaultView"));
                    dict3D.Put(new PdfName(PDF_NAME_IN), new PdfString("Unnamed"));
                    dict3D.Put(new PdfName(PDF_NAME_MS), new PdfName(PDF_NAME_U3D));
                    dict3D.Put(new PdfName(PDF_NAME_U3DPATH), new PdfString("DefaultView"));
                    PdfIndirectObject dictObject = writer.AddToBody(dict3D);
                    PdfAnnotation annot = new PdfAnnotation(writer, rect);
                    annot.Put(PdfName.CONTENTS, new PdfString("3D Model"));
                    annot.Put(PdfName.SUBTYPE, new PdfName("3D"));
                    annot.Put(PdfName.TYPE, PdfName.ANNOT);
                    annot.Put(new PdfName("3DD"), streamObject.IndirectReference);
                    annot.Put(new PdfName("3DV"), dictObject.IndirectReference);
                    PdfAppearance ap = stamper.GetOverContent(i).PdfWriter.DirectContent.CreateAppearance(rect.Width, rect.Height);//in this line I got an error "Use PdfStamper.getUnderContent() or PdfStamper.getOverContent()"
                    annot.SetAppearance(PdfAnnotation.APPEARANCE_NORMAL, ap);
                    annot.SetPage();
                    writer.AddAnnotation(annot);
                    sd.Dispose();
                    sd.Close();

                }
            }
            stamper.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:53:10.247

我自己得到了它：

```
PdfAppearance ap = newPage.CreateAppearance(rect.Width, rect.Height);
annot.SetAppearance(PdfAnnotation.APPEARANCE_NORMAL, ap);
annot.SetPage();
stamper.AddAnnotation(annot, i);
sd.Dispose();
sd.Close(); 
```

# ios - ios创建类似音量的弹出窗口

> ID：10529631
> 
> 赞同：1
> 
> 时间：2012-05-10T07:51:47.657
> 
> 标签：ios, popup, volume

在我的应用程序中，我想测试连接性，如果没有连接性，我想弹出一个小窗口。

有没有办法像音量控制一样弹出窗口？屏幕中间的正方形？

像这样：（[来源：][[only-iphone.fr](http://www.only-iphone.fr/wp-content/uploads/2011/07/HUD-Controls-Plus.jpg)][）]
[![例子](../Images/be1bc3677557579320f20e8193def27e.png)](https://i.stack.imgur.com/Myzth.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:03:27.807

正如[Adig](https://stackoverflow.com/users/450896/adig)所写，使用[MBProgressHUD](https://github.com/matej/MBProgressHUD)或[SVProgressHUD](https://github.com/samvermette/SVProgressHUD)。要检查连接性，您可以使用[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。*之后*将它们组合起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:53:50.620

是的，有几个开源库可以实现这一点： [https](https://github.com/samvermette/SVProgressHUD) ://github.com/samvermette/SVProgressHUD 或 [https://github.com/matej/MBProgressHUD](https://github.com/matej/MBProgressHUD)

# c# - 如何设置我的流行音乐以下载过去 30 天的所有邮件

> ID：10529633
> 
> 赞同：-2
> 
> 时间：2012-05-10T07:51:56.407
> 
> 标签：c#, email, gmail, pop3

我有一个使用**pop**的 C# 应用程序，它已经可以正常工作了。但是，我想对其进行编程，使其**仅下载过去 30 天内**发送给我的所有邮件，并下载它们，即使它们之前已经**下载过**。

有没有办法设置下载日期以及如何设置 pop 以下载所有邮件，即使它们之前已经下载过？我不想在我的 Gmail 中设置它，而是在**代码**中设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:56:23.853

只需继续从弹出服务器下载消息，而

```
msg.Headers.DateSent; 
```

是在

```
DateTime.Now.AddDays(-30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:58:54.380

有完美答案！！！！！！

如果您在您的用户名之前添加最近：例如 Me@gmail.com = 最近：Me@gmail.com

最近模式获取最近 30 天的邮件，无论它是否已经发送到另一个 POP1 客户端。

可以在这里阅读。

[http://support.google.com/mail/bin/answer.py?hl=en&answer=47948](http://support.google.com/mail/bin/answer.py?hl=en&answer=47948)

# c# - 为什么 string.Normalize 不根据上下文保持一致？

> ID：10529636
> 
> 赞同：17
> 
> 时间：2012-05-10T07:52:21.993
> 
> 标签：c#, .net, unicode, normalization, unicode-normalization

我有以下代码：

```
string input = "ç";
string normalized = input.Normalize(NormalizationForm.FormD);
char[] chars = normalized.ToCharArray(); 
```

我在 64 位 Windows 7 上使用 Visual Studio 2010 .net4 构建此代码。

我在两个上下文中的单元测试项目（平台：任何 CPU）中运行它并检查以下内容`chars`：

*   Visual Studio 单元测试：字符包含`{ 231 }`.
*   [ReSharper](http://www.jetbrains.com/resharper/)：字符包含`{ 231 }`.
*   [NCrunch](http://www.ncrunch.net/)：字符包含`{ 99, 807 }`.

在[msdn 文档](http://msdn.microsoft.com/en-us/library/ebza6ck1%28v=vs.100%29.aspx)中，我找不到任何表示不同行为的信息。

那么，为什么我会得到不同的行为呢？对我来说，NCrunch 的行为是预期的，但我希望其他人也是如此。

**编辑：** 我切换回 .Net 3.5 仍然有同样的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:51:04.890

在[String.Normalize(NormalizationForm) 文档](http://msdn.microsoft.com/en-us/library/ebza6ck1)中它说

> 二进制表示采用由 normalizationForm 参数指定的规范化形式。

这意味着您将在两种情况下都使用 FormD 规范化，因此 CurrentCulture 等应该不重要。

那么，我能想到的唯一可以改变的是“ç”字符。该字符将根据为 Visual Studio 源代码文件假定或配置的字符编码进行解释。简而言之，我认为 NCrunch 假设源文件编码与其他源文件编码不同。

根据在 NCrunch 论坛上的快速搜索，提到了一些 UTF-8 -> UTF-16 转换，所以我会检查一下。

# wcf - WCF：如何使用异步方法将异常从服务冒泡到客户端

> ID：10529638
> 
> 赞同：0
> 
> 时间：2012-05-10T07:52:33.060
> 
> 标签：wcf, asynchronous, exception-handling

我试图在服务的方法中捕获异常并将此异常冒泡给客户端。

我的代码是：

合同：

```
[OperationContract(AsyncPattern = true)]
[FaultContractAttribute(typeof(Exception))]
IAsyncResult BeginUpdateUsers(List<Users> paramUsers, AsyncCallback callback, object state);
List<Users> EndUpdateUsers(IAsyncResult result); 
```

实现界面

```
public IAsyncResult BeginUpdateUsers(List<Users> paramUsers, AsyncCallback callback, object state)
{
    Task<List<Users>> task= Task<List<Users>>.Factory.StartNew(p => aupdateUsersMethod(paramUsers), state);
    return task.ContinueWith(res => callback(task));
}

public List<Users> EndUpdateUsers(IAsyncResult result)
{
    try
    {
        return ((Task<List<Users>>)result).Result;
    }

    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
}

private updateUsersMethod(List<Users> paramUsers)
{
    try
    {
    }
    catch(Exception ex)
    {
          throw new Exception(ex.Message);
     }
} 
```

我在方法 updateUsersMethod 的捕获中遇到运行时错误。它进入了catch，但是在我抛出新异常的行中，我收到以下错误：usr的代码不控制异常。

EDIT1：我解决了这个问题，我必须抛出 FaultException 而不是 Exception。但是，异常不会到达客户端。这可能是什么原因？

EDIT2：好吧，我必须使用faultException，但我遇到了同样的问题，它说faultException不是由用户的代码处理的。我在所有方法中都有 try/catch，Begin、End 和辅助方法 updateUsersMethod。

# android - 在运行时创建列表视图并将其添加到布局

> ID：10529649
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:53:12.770
> 
> 标签：android, android-layout, android-listview

我有这样的设计

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.20"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/backbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back" />

    <Button
        android:id="@+id/nextbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="next" />
</LinearLayout>
<!-- the two columns part -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.80"
    android:orientation="horizontal" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.80" 
        android:id="@+id/submenue"
        >

         <!-- this will be the menue list -->
         <ListView
            android:id="@+id/MyHiddenListView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone" 
            >

            </ListView>

            <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/contents"
            />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="First Name" />

    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.20" 
        android:id="@+id/mainLayout"
        >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="second Name" />
    </LinearLayout>
</LinearLayout> 
```

我将以下代码添加到下一个按钮，以便它显示并填充列表

```
this.next = (Button)this.findViewById(R.id.nextbutton);
        this.next.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                String[] MainMenue =  new String[] { "aaaa", "bbb", "ccc"};

                menueview = (ListView)findViewById(R.id.MyHiddenListView);
                menueview.setVisibility(ListView.VISIBLE);
                menueview.setAdapter(new submenueadapter(getApplicationContext(), MainMenue));

            }
        }); 
```

适配器类是

包 com.appnetics；

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class submenueadapter   extends ArrayAdapter<String> {

    private final Context context;
    private final String[] values;

    public submenueadapter(Context context,String[] objects)
    {

        super(context, R.layout.main, objects);
        this.context = context;
        this.values = objects;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.main, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.contents);

        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println(s);

        return rowView;
    }
} 
```

问题是列表中填充了数组加上页面中的其他控件（2个按钮）

单击下一步之前 ![在此处输入图像描述](../Images/c4f35075bf855e07b7a405647bd0d770.png) 的布局 单击 ![在此处输入图像描述](../Images/3561a8e79f46f483fd2000e03b37328c.png) 任何想法以解决该问题后的布局

最好的问候最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:02:04.870

ViewGroup 类确实提供了各种方法来在任何地方添加视图，并且使用 LayoutParams 类，您可以传递各种父容器类特定属性以应用于要添加到容器中的子视图。

你可以用谷歌搜索并且很容易做到。

我还可以考虑将一个 ListView 放在 XML 中，而 Visibility GONE 。

并在特定的动作触发器上使其可见。这将阻止我执行在特定位置添加视图所需的各种编程工作。而且我也不觉得这种方法有任何伤害。

例如

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <Button
            android:id="@+id/backbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Back" />
        <ListView
            android:id="@+id/MyHiddenListView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone" />
</Linearlayout> 
```

在 .java 文件中

```
btnBack = (Button)findViewById(R.id.backbutton);
myListView = (ListView)findViewById(R.id.MyHiddenListView);

btnBack.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
      myListView.setVisibility(ListView.VISIBLE);
      myListView.setAdaptor(new MyListViewAdaptor());
   }
}); 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:30:46.887

主要问题是您将所有内容都包含在一个**main.xml**布局中。

由于这个问题，您将获得每个列表项的返回/下一步按钮（实际上整个布局正在重复为列表项）。

**解决方案：**

相反，尝试为 ListItem 定义单独的布局，并在 getView() 方法中扩展该布局。所以必须有 2 个 XML 布局文件，一个只有 ListView 的主要设计，另一个只有你想要的每个列表项的视图。

例如，(1) main.xml (2) row_item.xml

现在，您只需要在膨胀布局的代码中进行更正：

```
View rowView = inflater.inflate(R.layout.row_item, parent, false);  // row_item.xml is inflated here 
```

# jquery - 从选择字段单击选项时 Jquery 显示 div 在 Chrome 中不起作用

> ID：10529650
> 
> 赞同：2
> 
> 时间：2012-05-10T07:53:18.687
> 
> 标签：jquery

当我单击选择字段的选项时，我确实尝试了一个非常简单的测试来显示一行。它确实适用于我相信的所有浏览器，除了 Chrome。它什么都不做，当我检查 javascript 调试控制台时，它甚至没有给出错误。

```
<select name="test">
    <option value="1">one</option>
    <option value="2" id="show_div">two</option>
</select>

<div id="show_block" style="display:none;">it works!</div> 
```

非常简单的jquery

```
$('#show_div').click(function(){
    $('#show_block').show();
}); 
```

我尝试而不是单击，更改，但在 Chrome 中没有结果。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:54:59.577

```
$('select[name="test"]').change(function() {
    if ($(this).find('#show_div').is(':selected'))
        $('#show_block').show();
});​ 
```

[**现场演示**](http://jsfiddle.net/ddCA6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:58:09.517

您不应该将单击事件绑定到选择列表中的项目，您应该绑定到整个选择的单击，然后检查选择了哪个项目，如下所示：

```
$('select').change(function(){
    if ($(this).val() == 2)
    {
          $('.show_block').show();
     }
  }); 
```

这个问题是类似的：[在chrome中选择选项元素上的点击事件](https://stackoverflow.com/questions/1402227/jquery-click-event-on-select-option-element-in-chrome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:58:17.067

您的 select 元素上没有 id 属性，但您在 Jquery 代码中通过 id 引用它。这在 chrome 中有效，这里在[JsFiddle](http://jsfiddle.net/WcM3z/)中。

HTML

```
<select id="show_div" name="test">
  <option value="1">one</option>
  <option value="2" id="show_div">two</option>
</select>
<div id="show_block" style="display:none;">it works!</div> 
```

jQuery

```
$('#show_div').change(function(){
  $('#show_block').show();
});​ 
```

# ruby-on-rails - Rails Activerecord 反向关联

> ID：10529659
> 
> 赞同：0
> 
> 时间：2012-05-10T07:53:44.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有模型：

```
class Materialtitle < ActiveRecord::Base
  has_many :edocs
end

class Edoc < ActiveRecord::Base
     belongs_to :materialtitles
end 
```

我可能会`Materialtitle.find(2).edocs`。
我想做类似的事情`Edoc.find(10).materialtitles`。但它返回**nil**。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:09:49.847

如果它是多对一的，那么它应该是`belongs_to :materialtitle`（单数的）并且您的 DSL 应该如下所示：

```
 Edoc.includes(:materialtitle).find(10).materialtitle 
```

# licensing - ikvm.net 的许可问题？

> ID：10529661
> 
> 赞同：0
> 
> 时间：2012-05-10T07:53:47.810
> 
> 标签：licensing, openjdk, ikvm

我正在考虑使用 ikvm.net。虽然 ikvm.net 具有可用于商业应用程序的许可证，但 openjdk 将在 GPL 下开发。

我的问题是因为 ikvm.net 正在提供一个 openjdk .net 程序集，这会影响将要使用 ikvm.net 的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:32:05.210

以下是我个人的看法，可能有误。我不是律师。

OpenJDK 的许可是 GPL+[链接例外](http://en.wikipedia.org/wiki/GPL_linking_exception)，而不是简单的 GPL。这意味着您可以编写基于 OpenJDK 的商业应用程序。商业应用程序的编写是导致链接异常的原因。

IKVM 也没有 Android 的问题，因为许可证不像 Apache 许可证那样免费。OpenJDK 部分在 GPL+链接异常下继续。

更大的问题是专利。Java的专利只有在TCK通过的情况下才能使用。IKVM 没有通过 TCK。我认为从来没有测试过。

但大多数专利是无效的。感谢谷歌。大多数专利更多地与 VM 本身相关，而不是与 API 相关。垃圾收集和反射之类的东西不是 IKVM 的一部分。这是 .NET Framework 的功能。

几周后我们会知道更多。如果 Android 没有专利问题，那么 IKVM 也没有专利问题。

# c# - 如何从模型类生成操作链接？

> ID：10529668
> 
> 赞同：2
> 
> 时间：2012-05-10T07:54:09.913
> 
> 标签：c#, json, asp.net-mvc-3, html.actionlink, jquery-datatables

> **可能重复：**
> [HTML.ActionLink 方法](https://stackoverflow.com/questions/200476/html-actionlink-method)

在我的 ASP.NET MVC 3 应用程序中，我希望从模型类中生成一个操作链接，对应于在视图中调用[Html.ActionLink 。](http://msdn.microsoft.com/en-us/library/dd492124.aspx)原因是我需要通过 JSON 将链接返回到[DataTables](http://datatables.net)，以便将它们呈现在表格单元格中。我该怎么做？

具体来说，模型类包含一个属性，该属性返回一个包含指向我的应用程序的链接的字符串。DataTables 接收模型类实例的 JSON 表示，并使用此特定属性填充表格单元格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:15:35.337

我会避免让模型生成自己的链接，而是让控制器创建链接并使用结果值设置属性。无论如何，您可以像这样在控制器中创建和使用 UrlHelper：

```
var url = new UrlHelper(ControllerContext.RequestContext);
url.Action(...); 
```

如果您无权访问控制器上下文（例如您决定在模型中与视图或控制器分开执行此操作），则可以使用

```
UrlHelper url = new UrlHelper(HttpContext.Current.Request.RequestContext); 
```

# javascript - MVC架构中的编码

> ID：10529671
> 
> 赞同：0
> 
> 时间：2012-05-10T07:54:15.143
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, jstree

我需要在 MVC（模型视图集合）架构中表示一个复杂的模型。我正在`backbone.js`使用`jsTree`.

我正在从服务器中检索数据`JSON`并用它制作一棵树。为了显示树，我使用了 jQuery 的`jsTree`插件。数据代表某个远程系统的文件系统架构。

我遇到的问题是：

1.  *我应该创建两个模型吗？*一个代表目录，一个代表文件，因为目录中可以有更多文件。
2.  *如何将视图附加到 UI？*我想监听所有事件并根据它们执行一些服务器端操作，因为视图是由 jsTree 插件动态生成的。
3.  *如果我制作 2 个模型，我需要制作 2 个系列吗？*因为所有模型的完整集合中的 id 都是唯一的，所以一个人会这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:02:18.150

目录和文件真正代表了复合设计模式。您可以有两个模型 (`File`和`Directory`)，然后使用多态性来执行类似`this.getContents()`.

我对骨干没有太多经验，因此无法就第 2 点或第 3 点提供建议。（我建议您将这些问题拆分为其他问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:34:13.370

我知道这个答案来晚了，但你可以帮自己一个大忙，先在像 Astah 社区这样的 UML 应用程序中画出一个设计。这将帮助您识别对象以及对象之间的关系，并使您的编码变得更加容易。

# c++ - _snprintf_s 中的错误

> ID：10529674
> 
> 赞同：0
> 
> 时间：2012-05-10T07:54:26.360
> 
> 标签：c++, visual-c++, msvcrt

我收到 _snprintf_s 这个奇怪的错误：

```
int ival = strlen("F(LL)L");
char buff[32];
memset(buff,0,sizeof(buff));
_snprintf_s(buff,strlen("F(LL)L"),_TRUNCATE,"%s","F(LL)L"); 
```

`"F(LL)"`即使字符串长度计算为 6，也仅在 buff中复制。如果我将长度参数指定`strlen("F(LL)L") + 1`为复制完整字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:00:18.393

[_snprintf_s()](http://msdn.microsoft.com/en-us/library/f30dzcf6.aspx)的第二个参数是目标缓冲区的大小（以字节为单位）。必须为终止`NUL`字符保留一个字节，这就是不复制输入字符串的最后一个字符的原因。

传递缓冲区的实际大小而不是输入字符串的长度会更好（也更安全）：

```
_snprintf_s(buff, sizeof(buff), _TRUNCATE, "%s", "F(LL)L"); 
```

# php - PHP - 从域中的子域列出目录

> ID：10529679
> 
> 赞同：0
> 
> 时间：2012-05-10T07:54:54.267
> 
> 标签：php, security, subdomain

如果我将打开 open_basedir，这意味着如果我将允许使用 PHP opendir() 和 readdir() 列出我域中子域中的目录，那么我会产生哪些安全风险以及如何防止它们？

我问这个问题的原因是需要从子域访问我在域中的目录之一。

# c++ - 如何在全局范围内初始化结构/类

> ID：10529682
> 
> 赞同：3
> 
> 时间：2012-05-10T07:55:02.560
> 
> 标签：c++, c, struct, initialization

我现在知道如何在全局范围内初始化结构。

以下是示例代码：

```
#include<GL/glut.h>
struct A
{
    int x;
};
struct A a;
a.x=6;
int main()
{} 
```

我在 Ubuntu 11.10 上，当我编译这个程序时，我收到以下错误：

```
error: ‘a’ does not name a type 
```

我不知道为什么会发生这种情况。我想知道如何将复杂的参数传递给某个回调函数？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:28:19.150

> 我在 Ubuntu 11.10 上，当我编译这个程序时，我收到以下错误：错误：'a'没有命名类型

编译器通过此消息告诉您，对结构成员的分配不能在全局范围内发生。如果你想初始化`a`任一写

```
struct A a = {6}; 
```

或使用更新的语法

```
struct A a = {.x = 6}; 
```

或在程序启动后尽早进行初始化分配（即在 main 的开头）。

### 更新/编辑：

顺便说一句：这与 GLUT 或任何其他标题无关。这是语言规范的事情。

### 更新/编辑 2

> 我想知道如何将复杂的参数传递给某个回调函数？

好吧，在 GLUT 回调的情况下会很困难，因为 GLUT 不允许您指定用户定义的回调数据。您可以使用**ffcall**库创建原位*闭包*，然后将其传递给 GLUT。但是有以下几点需要考虑：一旦你碰到这堵墙，就该放弃 GLUT。GLUT 不是 OpenGL 开发的必要条件，也不是复杂应用程序的基础。因此，请不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:28:50.490

您正在执行任何功能之外的任务。在您的情况下，您只能移动一行代码来获得以下内容：

```
#include<GL/glut.h>
struct A
{
    int x;
};
struct A a;
int main()
{
    a.x=6;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:38:36.370

您观察到的问题与包括过剩无关。编译器不允许您为全局范围内的结构赋值。您可以通过调用结构的构造函数（在全局范围内允许）或通过调用某个函数中的赋值来实现您想要的。

编辑：这是一个有点相关的讨论：[Why can't I access my array subscript in global scope](https://stackoverflow.com/questions/10205222/why-cant-i-access-my-array-subscript-in-global-scope)

# android - 在eclipse中打开mupdf源码

> ID：10529683
> 
> 赞同：2
> 
> 时间：2012-05-10T07:55:05.640
> 
> 标签：android, mupdf

我知道之前有人问过这个问题，并且有一些关于这个问题的教程，但是我一直在努力解决这个问题，但没有成功，我不太了解如何使用 Cygwin 或 ANT。我只想在 Eclipse 中从源代码运行 MuPDF，之后我将了解如何将它与我的项目结合起来。一旦我通过本教程使用 OCR 阅读器：http: [//kurup87.blogspot.com/2012/03/android-ocr-tutorial-image-to-text.html](http://kurup87.blogspot.com/2012/03/android-ocr-tutorial-image-to-text.html)简单易懂，MuPDF 有一些类似且简单的教程?

我已经阅读了 StackOverflow 上的所有问题和教程，但都没有成功，我只需要简单的教程即可。

# javascript - 无法为 Slickgrid 中的行设置 CSS 属性

> ID：10529686
> 
> 赞同：0
> 
> 时间：2012-05-10T07:55:37.807
> 
> 标签：javascript, jquery, css, slickgrid

我正在尝试将 CSS 类设置为 Slickgrid 中的行。[我在这里](https://stackoverflow.com/questions/8930167/how-do-i-add-a-css-class-to-particular-rows-in-slickgrid)和[这里](http://groups.google.com/group/slickgrid/browse_thread/thread/0f2aca06b128cc29)查找，并根据[这个](http://mleibman.github.com/SlickGrid/examples/example-colspan.html)Slickgrid 示例创建了一个测试代码。这里是：

```
 var cols = [{ id: "id", name: "Report name", field: "Description", width: 600, sortable: true}];

    var options = {
       enableCellNavigation: true,
       enableColumnReorder: false,
       syncColumnCellResize: true,
       showHeaderRow: true,
       headerRowHeight: 30
    };

    $(function () {
      var data = [];
      for (var i = 0; i < 10; i++) {
        data[i] = {
            Description: "Task " + i
        };
      }
      data.getItemMetadata = function (index) {
        if (index == 0) {
            return { "cssClasses": "test" };
        }
      };

      grid = new Slick.Grid("#listV", data, cols, options);
      grid.setSelectionModel(new Slick.RowSelectionModel());
   }); 
```

'test' CSS 类仅用红色为行的背景着色。

发生的情况是，当我加载页面时，我可以看到第一行以红色闪烁一秒钟，但是一旦加载页面，背景颜色就会恢复到其他行的颜色。

这里可能是什么问题？非常感谢！

# objective-c - 在 XCode 中编译 IOS 应用程序时出现错误“找不到文件：-fobjc-arc”

> ID：10529691
> 
> 赞同：7
> 
> 时间：2012-05-10T07:56:10.630
> 
> 标签：objective-c, xcode, linker

添加 OCMock 框架后，我得到了那个奇怪的错误...... :(

```
ld：找不到文件：-fobjc-arc
clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

```

看起来编译器标志是否试图由 XCode 加载？

任何的想法？

最好的问候， hijolan

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T14:07:14.053

我在 Xcode 4.3.2 上遇到了完全相同的错误。这是我的导航日志；我正在为 Google 果汁添加它。

```
Ld /Users/makdad/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Products/Debug-iphonesimulator/JournalTests.octest/JournalTests normal i386
cd /Users/makdad/Documents/MT/mt-mobile/iOS/Journal
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/phooze/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Products/Debug-iphonesimulator -F/Users/phooze/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /Users/phooze/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Intermediates/Journal.build/Debug-iphonesimulator/JournalTests.build/Objects-normal/i386/JournalTests.LinkFileList -mmacosx-version-min=10.6 -bundle_loader /Users/phooze/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Products/Debug-iphonesimulator/Journal.app/Journal -Xlinker -objc_abi_version -Xlinker 2 -ObjC -force_load -fobjc-arc -ftest-coverage -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40100 -lOCMock -framework Twitter -framework MapKit -framework MobileCoreServices -framework SystemConfiguration -lxml2 -licucore -framework CoreData -framework CoreGraphics -framework CFNetwork -framework QuartzCore -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/phooze/Library/Developer/Xcode/DerivedData/Journal-bfkvfbsrkmrsjpddzfmwrstjfkzr/Build/Products/Debug-iphonesimulator/JournalTests.octest/JournalTests 
```

OCMock 指令明确要求您添加链接器标志 -`-ObjC`和`-force_load`.

`-force_load`期待一个值 - 请参阅[此问题的答案](https://stackoverflow.com/questions/2906147/what-does-the-all-load-linker-flag-do)，说明`-all_load`如果您不想指定库名称，请使用该答案。

作为一个只花了 25 分钟的人，我应该再次查看 OCMock 教程——我认为本说明中的内容不是很清楚。

[这篇博客文章](http://www.infinite-loop.dk/blog/2011/04/using-mock-objects-to-stabilize-unit-tests/)有一个更好的图像，可以准确地显示您的设置应该是什么样子。

# c# - C# 与 WPF 从窗口窗体调用 UserControl 窗体

> ID：10529696
> 
> 赞同：0
> 
> 时间：2012-05-10T07:56:24.880
> 
> 标签：c#

实际上，我将 C# 与 WPF 一起使用。让我再解释一下：

1.  我用一个按钮创建了用户控件（WPF）（单击按钮创建图像和文本框（如新文件夹））。

2.  而且我有另一个带有按钮的窗口窗体（WPF），我想单击窗口窗体中的按钮来执行操作，而不是用户控件中的按钮。这是用户控件的代码：

```
private void btnNewRoom_Click(object sender, RoutedEventArgs e)
    {

        Image img = new Image();
        img.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        img.Width = 100;
        img.Height = 100;

        var assemblyLocation = Assembly.GetExecutingAssembly().Location;
        var applicationDirectory = System.IO.Path.GetDirectoryName(assemblyLocation);
        img.Source = new BitmapImage(new Uri("/Resources/Images/folder.png", UriKind.RelativeOrAbsolute));

        StackPanel sp = new StackPanel();
        TextBox tb = new TextBox();
        tb.Width = 120;
        tb.Height = 25;
        tb.Text = "New Folder";            

        sp.Children.Add(img);
        sp.Children.Add(tb);

        AddNewRoom.Children.Add(sp);
    } 
```

有可能吗？

注意：点击按钮创建图像和文本框有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:57:57.737

在您的 WPF 控件中实现一个静态事件处理程序，并简单地从您的窗口窗体的按钮单击事件中调用它。

# c# - 在网络流上安全地超时 ReadLine

> ID：10529702
> 
> 赞同：3
> 
> 时间：2012-05-10T07:56:30.710
> 
> 标签：c#, timeout, tcpclient

如何安全地使以下代码超时？

```
var client = new TcpClient("localhost", 6000);
new StreamReader(client.GetStream()).ReadLine(); // close the client if no line arrives after 5 seconds... 
```

以前我有一个计时器在另一个线程上运行，如果超时过期，它调用 client.Close() ，但我不认为这样的调用`client.Close()`是线程安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:01:46.953

您可以使用内置`ReceiveTimeout`属性。

# php - 无法修改标头信息

> ID：10529703
> 
> 赞同：-1
> 
> 时间：2012-05-10T07:56:33.190
> 
> 标签：php

我在 php 中使用 mail() 向多个用户发送邮件时收到“警告：无法修改标头信息 - 标头已发送（输出从 process_contact.php:5 开始）（第 147 行的 /process_contact.php）”。

```
 $from = "test@gmail.com";
    $adminmessage="You have received an email from ".$_POST['email'].
    $to = "test1@gmail.com";
    $subject = "Email Received for an Order";
    $message = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>
    <head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body>
    Online Reservation Form has been submitted on the website on '.$date.'.<br><br>
<table width="710px" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="40%" height="30" valign="top">Name:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["name"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Address:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["address"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Phone no.:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["phone"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">E-mail:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["email"].'</b></td>
  </tr>
  <tr>    
     <tr>
    <td width="40%" height="30" valign="top">Check Out:</td>
    <td width="60%" height="30" valign="top"><b>'. $_POST["price"].'</b></td>
  </tr>

  <tr>
    <td width="40%" height="30" valign="top">Night:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["night"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Rooms:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["rooms"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Adults:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["adults"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Children:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["children"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Room Type:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["roomtype"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Price:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["price"].'</b></td>
  </tr>
  <tr>
    <p><strong>Payment Details</strong></p>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Payment Type:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["paymentype"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Card Name Holder:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["cardholder"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Credit Card no.:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["creditcardno"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Expiration Date:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["exp"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Security Code:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["securitycode"].'</b></td>
  </tr>
  <tr>
    <p>Payment Details</strong></p>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Billing Address( Street adress ):</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["billing1"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Billing Address( City/State/Zip ):</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["billing2"].'</b></td>
  </tr>
  <tr>
    <td width="40%" height="30" valign="top">Special Request:</td>
    <td width="60%" height="30" valign="top"><b>'.$_POST["comments"].'</b></td>
  </tr>

</table>
    </body></html>';

    $headers = "From:" . $from."\n";
    $headers .= 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-Type: text/html; charset=ISO-8859-1' . "\r\n";
    ini_set("SMTP","192.168.0.30");
    $date = date("m/d/Y H:i:s");
    mail($to,$subject,$message,$headers);
    //for client
    $from="test@gmail.com";
    $to1=$_POST['email'];
    $subject1="Confirmation";
    $clentmessage1 ='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
    <head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head>
<body><p>Dear Customer! &nbsp;'.$_POST["name"].'.Your reservation  has been confirmed.<br>
Thank you for Emailing us. We will get back to you shortly.<br/>
Plz donot hesitate to contact us atfor further information or any queries!<br/><br/><br/>
<strong>Super Value Inn</strong>
</body>
</html>';
    $headers = "From:" . $from."\n";
    $headers .= 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-Type: text/html; charset=ISO-8859-1' . "\r\n";
    ini_set("SMTP","192.168.0.30");
    mail($to1,$subject1,$clentmessage1,$headers);
    echo "Mail Sent.";
    header('Location: reservation.php?sentok');
    exit();
}
else
{
    header('Location: reservation.php?err');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:58:37.997

`echo`编辑完某些内容后，您将无法发送标头信息。有关如何解决此问题的信息，请参阅[PHP 输出缓冲。](http://php.net/manual/en/book.outcontrol.php)

放下它，它应该可以工作：

```
echo "Mail Sent."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:59:50.547

```
echo "Mail Sent.";
header('Location: reservation.php?sentok'); 
```

那个^

无论如何，回显某些内容然后直接重定向是没有意义的。你可以改为`Mail Sent`输出`reservation.php`

```
if(isset($_GET['sentok'])) echo 'Mail Sent.'; 
```

编辑：

我认为您的错误消息指出了那里的语法错误：

```
$adminmessage="You have received an email from ".$_POST['email']. // <-- this
$to = "test1@gmail.com"; 
```

这会在我的本地设置中给我一个`Undefined Variable`通知，这反过来会阻止您调用`header()`，因为该通知被视为 php.ini 的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:58:38.103

您在 header() 调用之前有一个 echo 语句，这将导致发送标头。你不能在 header() 之前输出任何东西

# windows-phone-7 - 一段时间后如何运行 WP7 silverlight 应用程序？

> ID：10529709
> 
> 赞同：0
> 
> 时间：2012-05-10T07:56:53.243
> 
> 标签：windows-phone-7, silverlight-4.0, timer

我在 WP7 silverlight 中有一个应用程序，需要在特定时间段后启动，比如警报。

但我想启动应用程序本身而不是 WP7 的警报。

我用：

this.Visibility = Visibility.Collapsed;

为了隐藏应用程序，我知道这不是让它在后台运行的正确方法。

请问有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:30:50.243

该平台特别不支持以您描述的方式运行应用程序。

如果您的功能无法在后台代理中运行，那么您唯一的选择是使用警报或 toast 消息（作为推送通知发送）来提示用户启动应用程序。

平台背后的设计决策之一是用户应该始终知道手机上发生了什么，因此让应用程序自行停止和启动将与此相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:20:15.300

您可以运行后台代理并向用户显示 toast 通知，并在用户单击 toast 时启动应用程序。

您还可以将 toast 消息推送到设备，并依靠用户单击 toast 。

# postgresql - postgres 中的时间旅行 - 违反 PRIMARY KEY 约束

> ID：10529710
> 
> 赞同：1
> 
> 时间：2012-05-10T07:56:57.060
> 
> 标签：postgresql, triggers, time-travel

我想在我的应用程序中使用时间旅行功能（F.39\. spi，PostgreSQL 9.1 文档），但它似乎对我来说不能正常工作。将行插入表中一切正常，我可以正确获取开始和停止日期，但是当我尝试更新这些行时，postgres 给了我关于违反 PRIMARY KEY 约束的错误。他试图插入一个与前一个元组具有相同主 ID 的元组......

从数据库中的所有表中删除主键约束是很疯狂的，但这是我需要的功能。所以也许你对时间旅行有一些经验？

任何形式的帮助将不胜感激。提前致谢。

DDL：

```
CREATE TABLE cities
(
  city_id serial NOT NULL, 
  state_id integer, 
  name character varying(80) NOT NULL,
  start_date abstime,
  stop_date abstime,
  CONSTRAINT pk_cities PRIMARY KEY (city_id ),
  CONSTRAINT fk_cities_states FOREIGN KEY (state_id)
      REFERENCES states (state_id) MATCH SIMPLE
      ON UPDATE CASCADE ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);

-- Trigger: time_travel on cities

-- DROP TRIGGER time_travel ON cities;

CREATE TRIGGER time_travel
  BEFORE INSERT OR UPDATE OR DELETE
  ON cities
  FOR EACH ROW
  EXECUTE PROCEDURE timetravel('start_date', 'stop_date'); 
```

给出的声明：

```
INSERT INTO cities(
            state_id, name)
    VALUES (20,'Paris'); 
```

没关系。我得到 start_date 和 stop_date。但是通过：

```
UPDATE cities SET name='Rome' WHERE name='Paris' 
```

我得到错误 - 前面描述过。

状态图式

```
-- Table: states

-- DROP TABLE states;

CREATE TABLE states
(
  state_id serial NOT NULL, -- unikatowy numer wojewodztwa
  country_id integer, -- identyfikator panstwa, w ktorym znajduje sie wojewodztwo
  name character varying(50), -- nazwa wojewodztwa
  CONSTRAINT pk_states PRIMARY KEY (state_id ),
  CONSTRAINT uq_states_state_id UNIQUE (state_id )
)
WITH (
  OIDS=FALSE
); 
```

不幸的是，作为一个新用户，我不允许在这里发布图片。你可以在那里看到它们：

来自表格城市的样本数据：korpusvictifrew.cba.pl/postgres_cities.png

来自表状态的样本数据：korpusvictifrew.cba.pl/states_data.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:56:14.440

时间旅行将 UPDATE 转换为旧记录的 stop_date 的 UPDATE 和 INSERT 的新记录，其中包含更改的数据和无穷大的 stop_date。由于 pk_cities，city_id 的记录不能超过一条。时间旅行触发器不允许您打破该要求。

你不能使用这个：

```
CONSTRAINT pk_cities PRIMARY KEY (city_id ) 
```

你必须使用这个

```
CONSTRAINT pk_cities PRIMARY KEY (city_id, stop_date) 
```

# iphone - 为什么tableview不显示任何数据？

> ID：10529715
> 
> 赞同：1
> 
> 时间：2012-05-10T07:57:15.863
> 
> 标签：iphone, ios, uitableview

我正在使用自定义表格视图来显示来自 Data Core 的数据，它应该看起来像这样

![在此处输入图像描述](../Images/4f1e3305848c0811eaac133cf5684d16.png)

但我实际上得到的是这个

![在此处输入图像描述](../Images/a5647fbe81d65722ccd5adbbf78aa56a.png)

这是我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    Item *item = [self.items objectAtIndex:indexPath.row];
    UILabel *nameLabel = (UILabel *)[cell viewWithTag:100];
    nameLabel.text = item.name;
    UILabel *catLabel = (UILabel *)[cell viewWithTag:101];
    catLabel.text = item.category;
    UILabel *amountLabel = (UILabel *)[cell viewWithTag:102];
    amountLabel.text = item.amount;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"AccountCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    [self configureCell:cell atIndexPath:indexPath];

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:08:40.767

您的其他数据源方法正在工作，因为您可以看到存在单元格，但没有填充任何内容。

这一行：

```
Item *item = [self.items objectAtIndex:indexPath.row]; 
```

当您使用获取的结果控制器时，这并不常见。它应该是

```
Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

如果您签入调试器，您将看到该项目可能与您当前的代码为零。

如果不是这种情况，那么您的标签在原型单元格和您的代码之间不匹配。同样，这可以在调试器中检查 - 标签将为 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:19:11.290

如果您右键单击故事板中的标签，您可以看到它们连接到哪些插座。检查它们是否有一个白点来表示连接，然后按照@jhurton 的建议，检查您的数据项 is not `nil`。

# iphone - 多个NSURLConnection一个接一个调用？

> ID：10529731
> 
> 赞同：0
> 
> 时间：2012-05-10T07:58:17.877
> 
> 标签：iphone, ios, asynchronous, nsurlconnection

好的，我为此尝试了很多不同的方法。我想调用一个 JSON API，获取它的响应，保存键值，然后用不同的参数再次调用它。最近，我尝试在 for 循环中调用 URL 方法，在发布 `connectionDidFinishLoading:` 通知时在观察者中发布 NSNotification 和 NSLogging 值。但它只是多次记录最终调用的值。

我用它来初始化连接......

```
 eventConnection=[[NSURLConnection alloc]initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]] delegate:self startImmediately:NO];
        [eventConnection scheduleInRunLoop: [NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [eventConnection start]; 
```

这是委托方法...

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  NSNotification *eventNotification=[NSNotification notificationWithName:@"eventsFound" object:nil userInfo:responseDict];
        [[NSNotificationQueue defaultQueue]enqueueNotification:eventNotification postingStyle:NSPostNow coalesceMask:NSNotificationCoalescingOnName forModes:nil];
} 
```

关于我如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:03:57.150

为了有效地链接多个 NSURLConnection 请求，您不应该一次启动它们（例如，就像您说的“在 for 循环中”）。

相反，开始第一个请求；然后，从`connectionDidFinishLoading`第二个开始；然后再一次，当再次 `connectionDidFinishLoading`执行时，开始第三次，依此类推。

这只是您如何帮助您找到适合您的应用程序的良好设计的草图；一种可能性是：

1.  定义一个状态机，负责根据当前状态触发请求；（状态可以是一个简单的整数，表示您必须执行的顺序步骤）；

2.  启动状态机：它将触发第一个请求；

3.  当请求完成时，`connectionDidFinishLoading`将向状态机发出信号，使其进入下一步；

4.  在每一步，状态机都会触发与该步骤对应的请求。

当然，还有其他可能的设计选项；哪个是最好的取决于您的整体要求和您需要的呼叫流程类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:04:23.047

设置一个计数器和要发送的请求总数。并且在连接完成加载时，检查计数器是否达到要发送的请求总数，否则再次调用您发送数据的方法，并增加发送的请求。如果你使用文件中的数据。即首先将数据写入文件wid一个数字，然后当你想发送请求时读取它，然后它很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:58:09.823

哼，

您是否尝试使用像 AFNetworking 这样的库，您可以创建异步请求并使用块来处理答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:18:07.923

您可以使用 NSOPerationQueue 或 Block 或 thread 进行相同的操作。完成一个函数后调用另一个函数。

# javascript - 如何在javascript中检查一个日期是否在另一个日期之前

> ID：10529738
> 
> 赞同：2
> 
> 时间：2012-05-10T07:58:57.657
> 
> 标签：javascript, validation, datetime

我有 2 个日期，我有一个来检查一个日期是否在另一个日期之前。我知道您必须将日期解析为 JS 日期对象，然后以毫秒为单位进行检查。

但问题是，在我的数据库中，日期时间是这样存储的。

```
10-mei-2012 09:36 
```

所以我的问题是如何比较其中两个日期并检查日期 1 是否在 date2 之前？哦，为了记录，我也使用 jquery 来获取这些值。

```
var dateB = $('#DATUM_BEGIN').val();
var dateE = $('#DATUM_EINDE').val(); 
```

亲切的问候

史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:01:03.423

在这种格式中，您可以按原样比较字符串，这是安全的。所以只用

```
if (dateB < dateE) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:02:10.710

[http://www.datejs.com/](http://www.datejs.com/)可能会有所帮助。它是一个比较日期的 jquery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:05:28.643

您显示的格式“主要是”ISO-8601 组合日期格式，在设计上与纯文本相当。

你所拥有的和纯 ISO-8601 之间的唯一区别是空格字符所在的位置需要一个“T”。

[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

因此，如果您可以对字符串进行排序，您就知道哪个字符串在前。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T08:04:44.743

这是[在谷歌搜索时](http://dzone.com/snippets/convert-mysql-datetime-js-date)发现的将 MySQL DATETIME 转换为 JS 对象的函数

```
function mysqlTimeStampToDate(timestamp) {
  var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
  var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
  return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
} 
```

这是如何使用它的一个示例：

```
$(function(){
  var dateB = mysqlTimeStampToDate($('#DATUM_BEGIN').val());
  var dateE = mysqlTimeStampToDate($('#DATUM_EINDE').val());

  if(dateB < dateE){
    // dateB is older
  } else {
    // dateB is newer
  }
}); 
```

# jquery - Ajax 错误处理，ie7

> ID：10529739
> 
> 赞同：1
> 
> 时间：2012-05-10T07:59:13.717
> 
> 标签：jquery, ajax, internet-explorer-7

我使用 jquery ajax 打开 XML 文件。我想调试 IE7 中的错误，但目前我在警报中得到的只是：

```
"Error: error, [object Error]" 
```

我的错误回调：

```
error: function (a, b, c) {
    alert('Error: ' + b + ", " + c);
} 
```

我的猜测是这`b`是一个包含一些信息的对象，但我无法在 IE7 中检查对象，因为它没有控制台。任何人都知道对象属性是什么？我想知道 XML 导入出了什么问题:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:06:51.343

试试这个：

```
 error: function (request, status, error) {
        console.log(request.responseText);
    } 
```

responseText 将包含一条错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:07:53.793

> **错误（jqXHR，textStatus，errorThrown）**
> 
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象、描述发生的错误类型的字符串和可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

我猜“异常对象”是指您通常期望在 JS 中出现的内容，因此 errorThrown 的键是`name`and `msg`。

# c# - 如何在 Server.Transfer 之后捕获异常（不使用 customErrors）？

> ID：10529740
> 
> 赞同：0
> 
> 时间：2012-05-10T07:59:31.223
> 
> 标签：c#, asp.net, redirect, try-catch, server.transfer

我将简化示例，假设我们有`Page A`,`Page B`和`Page C`

1.  `Page A`继续，`base.OnInit()`_`page B`
2.  `Page B`抛出异常并将被重定向`Server.Transfer`到 to `Page C`。
3.  `Page C`有一个 try/catch，应该在其中捕获异常。

我一直在尝试`Server.GetLastError()`，没有带来任何东西（GetLastErros 为空）。你怎么能在**不**添加`<customErrors>`的情况下解决它和处理`web.config`？

有趣的是，当我在 中调试时`Page C`，我可以看到`$exception`设置正确的变量。

图片 -> [http://www.picfront.org/d/8EeT](http://www.picfront.org/d/8EeT)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:34:18.027

您是否在`Web Page/Content Page/BasePage`.

```
protected override void OnError(EventArgs e)
{
     base.OnError(e);
} 
```

你`Application_Error`在`Global.asax`文件中使用了吗？

```
void Application_Error(object sender, EventArgs e)
{
      // Code that runs when an unhandled error occurs
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:19:35.553

您的*Page C对**Page B*中的异常一无所知。*在页面 B*中引发的异常在此处处理。

我猜`$exception`您在*Page C*中看到的是此页面堆栈跟踪的非公开成员。

要让您的*Page C*充当通用错误处理程序，您必须交出有关异常的信息。您可以在查询字符串参数中执行此操作，但我怀疑这将是一个易于维护的解决方案。

也许使用母版页，提供通用事件处理程序可以提供更好的解决方案而不是专用页面，但我没有尝试过。

# c# - 现有 Web 应用程序需要更改才能在智能手机/平板电脑中访问

> ID：10529746
> 
> 赞同：0
> 
> 时间：2012-05-10T07:59:49.320
> 
> 标签：c#, asp.net, .net-3.5

我有一个 ASP.NET Web 应用程序。我想在智能手机和平板电脑上访问这个应用程序。所以请帮我解决这个问题。需要进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:41:02.450

您的问题的答案可能从无到有。归根结底，这完全取决于您现有的应用程序在目标移动设备（iPad、Android 等）中的外观。如果您现有的应用程序外观和功能正常，那么您无需执行任何操作。如果没有，那么，你找出问题所在并让它发挥作用。

您的问题确实不适合 StackOverflow，因为它过于宽泛且无法回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:06:26.933

Asp.net 应用程序可以在网络浏览器中运行，包括智能手机和平板电脑附带的浏览器。主要关注的是各种设备的各种屏幕尺寸。因为它们变化很大，所以你的 asp.net 应用程序的一个好的设计概念是以能够适应屏幕大小的方式布局内容。

在 asp.net 应用程序中，特别是对于已经构建的应用程序，最好的技术是实现样式表 (.css)

以这些样式为例：

`float`, `clear`,`max-width`和`max-height`

检查这些和其他样式：[http ://www.w3schools.com/css/](http://www.w3schools.com/css/)

现在，还有一个概念是让您的 asp.net 应用程序检测正在使用的设备，然后相应地生成 UI 代码（或加载 .ascx 控件）以提供特定于设备的显示。

查看：

`Request.Browser.IsMobileDevice`

`Request.UserAgent`( [http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx) )

但是，我只建议在最低限度内使用它，因为如果您对 UI 进行更改，您将不希望为不同的设备不断更新 UI 的多个实例。

一个好的折衷方案是为每组屏幕尺寸（智能手机、平板电脑、PC 等）构建样式表，然后检测正在使用的设备并包含相应的样式表。

注意：有很多开源项目，可以让您在考虑移动开发的情况下更快地运行。查看 sourceforge.net 和 codeplex.com 以获取示例。

# javascript - 使用 Javascript 动态更改 smarty 包含文件

> ID：10529749
> 
> 赞同：1
> 
> 时间：2012-05-10T07:59:51.850
> 
> 标签：javascript, smarty

我的 smarty 文件中有两个选项卡。在 tab1 我有一个下拉菜单，它包含城市列表。我有基于城市的模板列表，其中包含有关城市的详细信息。在第二个选项卡中，我应该根据下拉选择显示相关的城市模板。

例如：下拉：

```
<select name='city' id='city' class="medium" style="float:left" onchange="setCityTpl(this);">
<option value=''></option>
{html_options options=$city_filter selected=$city.name}
</select> 
```

如果我在下拉菜单中选择 City 1

我应该将 smarty 包含文件中的 tpl 名称设置为 city1.tpl

```
<div id="tab2" class="tab-content" style="display: none; visibility: hidden; padding-top:0px">
{include file=city1.tpl}
</div> 
```

如果我在下拉菜单中选择 City 2

我应该将 smarty 包含文件中的 tpl 名称设置为 city2.tpl

```
<div id="tab2" class="tab-content" style="display: none; visibility: hidden; padding-top:0px">
{include file=city2.tpl}
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:52:50.147

您可以从 javascript 加载 url。所以我认为如果用户从 Dropdown1 中选择 City1，你的 JS 将加载 city1.tpl 而 City2 将加载 city2.tpl

或者您可以执行以下操作：js 脚本调用`selected-city.php`带有“city1”或“city2”的 POST/GET 值的 url ()。使用名为（取自 POST/GET）和您的 tpl的参数`selected-city.php`检索：`selected-city.tpl``selected`

```
<div id....>
{include file=${selected}.tpl}
</div ...> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:55:17.557

smarty是一个基于php的模板引擎，这意味着它运行在**服务器端**，而javascript运行在**客户端**（用户的浏览器）。因此，在用户真正看到您的页面之前，smarty 模板已经完成处理并且所有包含都已经完成。

要实现您想要的，一种方法是包含所有文件并隐藏相应的 html 元素（例如 display:none ）。然后，根据用户的选择，您将显示您想要的元素（您的案例中的第二个下拉菜单

# c# - 环境变量对 java 不可见

> ID：10529751
> 
> 赞同：7
> 
> 时间：2012-05-10T07:59:55.570
> 
> 标签：c#, java, environment-variables

### 该项目

该项目是一个用于测试自动化的大型 C# 项目。为此，我必须使用 java-tool，它是将所有结果保存到可以加载到测试环境中的文件中的工具。

### 界面

我从 C++ 中构建的测试环境供应商处获得了一个 DLL，该 dll 加载 java 环境并加载 jar 文件。

### 现在的情况

java环境加载成功，它配置了在C#中设置的环境变量，方法如下：

```
String java = GetJavaInstallationPath();
Environment.SetEnvironmentVariable("PATH", String.Format("{0};{1}", Environment.GetEnvironmentVariable("PATH"), Path.Combine(java, @"bin\client")), EnvironmentVariableTarget.Process); 
```

在此之后，我使用以下代码设置 java 类的路径：

```
Environment.SetEnvironmentVariable("ITEPCLASSPATH",
                String.Format("{0};{1}",
                Path.Combine(iTepPath, "itep.jar"),
                Path.Combine(iTepPath, "libs\\itorx.jar")), EnvironmentVariableTarget.Process); 
```

哪个实际上应该工作，它在使用时显示正确的值，`Environment.GetEnvironmentVariable("ITEPCLASSPATH")`但 C++-DLL 告诉我它不工作。

通过使用外部 bat 文件设置类路径时，它可以工作。更多事实：

*   应用程序由bat文件启动
*   该路径是从我生成的 dll 路径中复制的
*   我没有评论任何东西，所以路径仍然由 C# 设置

似乎 java 没有访问我在 C# 中设置的 env.-variable，但认识到我在 bat 文件中设置了它。

我真的需要通过 C# 设置变量，我该如何存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:12:13.190

它没有明确写在[Microsoft System.Environment 文档](http://msdn.microsoft.com/en-us/library/96xafkes)中，但目标值`Process`似乎仅将范围限制为当前进程。默认情况下，[CreateProcess 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)继承子进程的当前进程环境。也许那里使用的参数会破坏这种默认行为。

所以我建议你先用`EnvironmentVariableTarget.User`in`SetEnvironmentVariable`进行测试，看看它是否效果更好。

顺便说一句，我认为您将不得不进一步诊断环境变量并使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)之类的工具创建流程操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:25:30.253

确保环境变量适用于每个目标：进程、用户和机器。请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)文章。

```
// Set the environment variable for the default target (the current process).
Console.WriteLine(fmt2x, "(default)", myVarA, existsA);
Environment.SetEnvironmentVariable(myVarA, existsA);

// Set the environment variable for the the current process.
Console.WriteLine(fmt2x, "Process", myVarB, existsB);
Environment.SetEnvironmentVariable(myVarB, existsB, 
    EnvironmentVariableTarget.Process);

// Set the environment variable for the the current user.
Console.WriteLine(fmt2x, "User", myVarC, existsC);
Environment.SetEnvironmentVariable(myVarC, existsC, 
    EnvironmentVariableTarget.User);

// Set the environment variable for the the local machine.
Console.WriteLine(fmt2x, "Machine", myVarD, existsD);
Environment.SetEnvironmentVariable(myVarD, existsD, 
    EnvironmentVariableTarget.Machine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:18:53.060

Java 允许您使用以下方式将环境变量作为参数传递：

```
java -DMYPROP=MYVALUE myclass.class 
```

参数语法。检查 -D 标志。

然后，这些系统属性将应用于该 JVM 进程实例。这不是比尝试修改操作系统环境更简单吗？

# ssl - Directadmin 中的 SSL 证书不起作用

> ID：10529752
> 
> 赞同：1
> 
> 时间：2012-05-10T08:00:00.320
> 
> 标签：ssl, certificate

我正在尝试在安装了 directadmin 的共享服务器上安装 Comodo SSL 证书。我已经为用户分配了一个唯一的 IP 地址，提出了 CSR 请求并上传了证书。

在 directadmin 中，我得到证书和私钥都已保存的响应。不幸的是，当我浏览到[https://www.domain.com](https://www.domain.com)时，我收到一个 SSL 错误，说证书不受信任，因为它是自签名的。

我很困惑为什么会发生这个错误。在我看来，我按照正确的步骤安装了 Comodo ssl 证书。我还尝试通过服务器上的命令行删除私钥和证书。但这似乎并不能解决错误。

我应该从什么方向着手解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:15:52.637

检查您是否安装了中间证书。您必须在字段中为您的公钥列出一个或多个中间证书。

您还可以为 DirectAdmin 使用 GlobalSign OneClickSSL 插件，让插件自动为您完成所有工作。

请参阅：[https ://www.globalsign.com/ssl/oneclickssl/directadmin/](https://www.globalsign.com/ssl/oneclickssl/directadmin/)

并且：[http ://www.youtube.com/#/watch?v=tVP9i6Ing1M](http://www.youtube.com/#/watch?v=tVP9i6Ing1M)

# .net - WPF 标签，如 ItemsControl/Selector

> ID：10529754
> 
> 赞同：0
> 
> 时间：2012-05-10T08:00:17.460
> 
> 标签：.net, wpf

在 WPF 中，如何构建像 ItemsControl/Selector 这样的标签？我需要一个看起来像标签的控件，但可以从 ItemsSource 属性提供数据集合并根据 DisplayMemberPath 属性显示文本。用户无法更改该值。它仅用于显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:22:52.487

您只需要一个使用 StackPanel 作为其 ItemsPanel 的 ItemsControl，如下所示：

Xaml

```
<Grid>
    <Grid.DataContext>
        <local:TestViewModel/>
    </Grid.DataContext>
    <ItemsControl ItemsSource="{Binding Items}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding ItemText}" Margin=5/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

或者，如果您想使用 DisplayMemberPath，您可以拥有

```
<Grid>
    <Grid.DataContext>
        <local:TestViewModel/>
    </Grid.DataContext>
    <ItemsControl ItemsSource="{Binding Items}" DisplayMemberPath="ItemText">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

查看模型

```
public class TestViewModel
{
    public TestViewModel()
    {
        Items = new List<TestItem>
                    {
                        new TestItem{ItemText = "One"},
                        new TestItem{ItemText = "Two"},
                        new TestItem{ItemText = "Three"},
                    };
    }
    public IEnumerable<TestItem> Items { get; set; }
}

public class TestItem
{
    public string ItemText { get; set; }
} 
```

显示单个选定文本项的一个简单（有点 hacky）的解决方案是设置列表框的样式

```
<Grid>
    <Grid.DataContext>
        <local:TestViewModel/>
    </Grid.DataContext>
    <Grid.Resources>
        <Style TargetType="ListBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <TextBlock Text=
                                   "{Binding RelativeSource=
                                     {RelativeSource Mode=TemplatedParent}, 
                                     Path=SelectedItem.ItemText}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>
    <ListBox Grid.Row="2" ItemsSource="{Binding Items}" SelectedIndex="2" />
</Grid> 
```

更好的解决方案是创建基于 Selector 的自定义控件，并使控件可模板化。

# jsf-2 - 我应该抛出 EJBException 来阻止实体创建吗

> ID：10529756
> 
> 赞同：0
> 
> 时间：2012-05-10T08:00:29.283
> 
> 标签：jsf-2, jpa-2.0

我有以下代码：

JSF 托管 Bean：

```
@ManagedBean(name = "purchaseView")
@ViewScoped
public class PurchaseView implements Serializable {

 @EJB
 private PurchaseService service;
 private Order order;

 // Getter/Setters here

 public void checkoutOrder() {
   // .. some checks for null here, then call service
   service.checkout(order);
 }
} 
```

服务：

```
@Stateless
public class BuyVoucherService {

 @EJB
 private OrderBean orderBean;
 @EJB
 private ProductBean productBean;

 public boolean checkout(Order order) {
  orderBean.create(order);
  for(int i=0;i<order.getQuantity();i++) {
   Product product = new Product();
   if(someCondition) {
     // don't save anything and
     return false;
   }
   // .. some setter here
   product.setOrder(order);
   productBean.create(product);
  }
  return true;
 } 
```

productBean 和 orderBean 是简单的 JPA EJB，带有 EntityManager 和 CRUD 操作（由 Netbeans 生成..）。在上面的服务中，当服务返回时，事物被持久化在数据库中。如果出现问题（`someCondition`上面的 == TRUE），如果我返回 false，orderBean.save(order) 仍会将订单保留在数据库中，我不希望这样。

抛出 EJBException 并在 ManagedBean 中捕获它是最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:14:17.207

由于您没有明确指定任何事务属性，它很可能是`Required`，但取决于服务器。因此，这两种方法都将在同一个事务中，因此在一个方法中回滚将级联另一个方法中的更改。

您也可以尝试`Mandatory`对第二种方法使用属性，它将确保它需要事务才能继续进行，否则会导致运行时异常。

```
 @Resource
    private EJBContext context;

    try{

      if(someCondition) {
          throw SomeBusinessException("Failed, rolling back");
    } 

    }catch(Exception e){
       log(e.getMessage, e) 
       context.setRollbackOnly();
    } 
```

否则，您可以抛出系统异常，这将强制容器回滚所做的更改。

```
 if(someCondition)
        throw SomeBusinessException("Failed, rolling back");

    }catch(Exception e){
        throw new EJBException (e.getMessage(), e);
    } 
```

# c# - 如何使用 C# 读取特定字体的文本数据？

> ID：10529758
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:00:35.560
> 
> 标签：c#

考虑一个记事本 Text.txt，它的数据只能用字体“终端”读取。如何在 C# 中实现？只有当我将字体设置为“终端”时，记事本的内容才可读。否则我只能看到盒子。C# 必须使用“终端”字体读取内容，以便它可以获取准确的数据而不是 BOX。尝试使用 UTF8。一样的回应。

即使我在这里写记事本的内容，我也可以看到连字符。

例如：

文本是——但我不是连字符的意思。实际单词是 n 上方的双点。只有在记事本中使用终端字体才能看到。

![在此处输入图像描述](../Images/589cdc873ac94216ab7e1c12086b2d6c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:04:24.353

中实际上没有`font`保存任何信息`.txt files`。

只需在 C# 中使用您希望在 .txt 文件中看到的相同字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:17:36.417

您的问题可能是文本文件的编码（代码页）。文本文件是用什么语言编写的？例如，如果文件包含希腊文本（代码页 1253），您将使用如下内容：

```
System.Text.Encoding GreekEncoding = System.Text.Encoding.GetEncoding(1253);
System.IO.StreamReader sr = new StreamReader(@"c:\test.txt", GreekEncoding);
System.Diagnostics.Debug.WriteLine(sr.ReadLine());
sr.Close();
sr.Dispose(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:09:17.350

文本数据总是独立于字体，所以我认为你的问题没有这样的答案

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T07:44:40.497

```
Encoding GreekEncoding = Encoding.GetEncoding(1254);
using (StreamReader sr = new StreamReader(sNotepadName+".txt", GreekEncoding))
{
    while ((input = sr.ReadLine()) != null)
    {
        sTempInput = input.Split('='); //Data - double dotted above A=A
        lMyDictionary.Add(sTempInput[0],sTempInput[1]);

    }
} 
```

添加到字典后，如果输入 A，我必须在文本框中的 A 符号上方显示双点。

```
string[] sSplitedText = sEnteredText.Split(' '); //Because many letters can be entered with sapce as delimiter 
foreach(string sNewStr in sSplitedText)
{
    if (lMyDictionary.ContainsKey(sNewStr))
    {
        sReturnText += lMyDictionary[sNewStr];
    }
}
ResultDisplayTextBox.Text = sReturnText; 
```

由于“终端”字体在 vs2005 中不可用，因此文本框中的结果将是一个框或逗号或连字符等。如果将此数据复制并粘贴到记事本中并使用“终端”字体我们可以看到数据。如果不使用编码技术，即使您从文本框中粘贴数据，它也会看起来像一颗心或任何其他符号。这样我的问题就解决了。感谢你的回复。

# matlab - 如何在 Matlab 中使用从“min”函数返回的索引？

> ID：10529760
> 
> 赞同：3
> 
> 时间：2012-05-10T08:00:39.747
> 
> 标签：matlab, indexing, min

如何使用从 matlab 中的“min”函数返回的索引在三维的 3D 矩阵中检索其数据？例如，我有以下代码：

```
%a is a 3D matrix
[res, index] = min(a, [], 3); 
```

我想使用索引访问最小元素，例如：

```
a(index); 
```

注意：我不想使用 res 变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:19:01.433

全部获取：

```
a=rand(3,2,3);
[res, index] = min(a, [], 3);

sizeA=size(a);
sizeA12 = prod(sizeA(1:2));
lin_idx = sub2ind([sizeA12 sizeA(3)],1:sizeA12,index(:)');
a(lin_idx)

ans =

        0.0344   0.0971   0.171   0.695  0.0318  0.187

>> res(:)'

ans =

        0.0344   0.0971   0.171   0.695  0.0318  0.187 
```

## 更一般的方法

```
a=rand(3,2,3); % sample data

dim_min = 2; % dimension along to take the minimum
[res, index] = min(a, [], dim_min);

sizeA       = size(a);
sizeAstart  = prod(sizeA(1:dim_min-1));
sizeAend    = prod(sizeA(dim_min+1:end));
idstart     = repmat(1:sizeAstart,1,sizeAend);
idend       = repmat(1:sizeAend  ,1,sizeAstart);

lin_idx = sub2ind([sizeAstart sizeA(dim_min) sizeAend ],idstart,index(:)',idend);
a(lin_idx) 
```

您还可以重塑结果以使其具有与原始矩阵相同的维度（省略最小化维度）：

```
reshape(a(lin_idx),sizeA([1:dim_min-1 dim_min+1:end])) 
```

适用于任何大小的数据矩阵或任何值`dim_min`（当然只要`1<=dim_min<=ndims(a)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-05T11:58:46.740

不幸的是，我没有获得评论冈瑟（将近六岁）答案所需的声誉点，但这里有一个错误，这使得“更一般的方法”不正确：

“idend”-index 不应与 repmat 重复，而应与 repelem 重复，以获得该索引所需的 1 1 1 2 2 2 3 3 3 顺序。下面是 Gunther 方法的一个功能示例：

# 更一般的方法（更正的同义词）

```
a=rand(3,2,3); % sample data

dim_min = 2; % dimension along to take the minimum
[res, index] = min(a, [], dim_min);

sizeA       = size(a);
sizeAstart  = prod(sizeA(1:dim_min-1));
sizeAend    = prod(sizeA(dim_min+1:end));
idstart     = repmat(1:sizeAstart,1,sizeAend);
idend       = repelem(1:sizeAend  ,1,sizeAstart);

lin_idx = sub2ind([sizeAstart sizeA(dim_min) sizeAend ],idstart,index(:)',idend);
% check correct result
isequal(a(lin_idx)',res(:)) 
```

# c# - 使用 HTML、jQuery 和 Web 服务上传多个文件 - 而不是 PHP

> ID：10529763
> 
> 赞同：0
> 
> 时间：2012-05-10T08:00:56.490
> 
> 标签：c#, jquery, web-services, file-upload

我已经看到了很多例子，但没有一个能完全满足我的所有要求

我需要一个带有进度条的多文件上传器，它调用 Web 服务以上传到服务器/将详细信息保存到数据库

任何示例/演示都会很棒

甚至可以做到吗？

我正在尝试使用此示例

[http://jquery-with-asp.net/2012/02/ajax-file-upload-with-asp-net-using-valuems-script/](http://jquery-with-asp.net/2012/02/ajax-file-upload-with-asp-net-using-valums-script/)

函数创建上传器（）{

```
 var uploader = new qq.FileUploader({
            element: document.getElementById('dvFileUploader'),
            action: 'ws/FilesUploader.html',
            debug: true
        });             
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:23:56.903

我希望它能帮助您 [使用 jQuery 在 ASP.NET 中上传多个文件](http://www.dotnetcurry.com/ShowArticle.aspx?ID=317)

# sqlite - 反转SQLite中结果集的顺序

> ID：10529764
> 
> 赞同：11
> 
> 时间：2012-05-10T08:00:58.327
> 
> 标签：sqlite, select

这可能是一个非常基本的问题，但我根本不懂 SQL。

为了简化问题，假设有一个只有一列的表，这样我就可以水平写下行：

```
1 3 11 39 41 45 52 63 66 70 72 80 81 90 92 97 
```

如您所见，它们已排序。现在，我知道有“70”的行，我想按升序查询它之前的五行。也就是说，我要

```
41 45 52 63 66 
```

我应该如何进行查询？

我可以按降序查询这五行，然后将结果集反转，但我认为应该有更好的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T12:49:35.127

以[likeToCode的例子为例](https://stackoverflow.com/questions/10529764/reverse-the-order-of-the-result-set-in-sqlite/10531127#10531127)，修改如下，对结果进行重新排序：

```
SELECT * FROM (
    SELECT *
    FROM SAMPLE
    WHERE index1 < 70
    ORDER BY index1 DESC
    LIMIT 0,5
)
ORDER BY index1 ASC; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T09:28:31.447

以下是我能够提出的查询，但我不确定这是否是您需要的，而且结果是按降序排列的。

我创建了一个表 SAMPLE，其中 index1 作为其唯一列：

```
SELECT * FROM SAMPLE WHERE index1 < 70 ORDER BY index1 DESC LIMIT 0,5; 
```

# android - 无法在恢复时启动 Activity ComponentInfo

> ID：10529769
> 
> 赞同：1
> 
> 时间：2012-05-10T08:01:24.087
> 
> 标签：android, xmpp

我的应用程序工作正常，但是当应用程序进入后台时，它应该恢复时崩溃。正如您在源代码中看到的，我记录了 onStart、onStop 等事件。

在我的日志中，当我启动应用程序时，我可以看到 onStart、onResume。当我按下返回键时，我看到：onStop、STOP、onPause 和 onDestroy。

当我尝试重新启动应用程序时，它会立即崩溃，除了“无法启动 Activity ComponentInfo java lang.NullPointerException”之外，日志中没有其他消息。

我怎样才能防止这种情况？

```
public class Start extends Activity {

private Handler handler = new Handler();
private ArrayList<String> discussionThread;
private EditText textMessage;

private ListView listview;

private ConnectionConfiguration config;
private Presence presence;
private MultiUserChat muc;
private DiscussionHistory history;
private PacketFilter filter;
private MyCustomAdapter discussionThreadAdapter;
private XMPPConnection connection;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    try {
        initConnection();
    } catch (XMPPException e) {
        e.printStackTrace();
    }

    final EditText textMessage = (EditText) this.findViewById(R.id.message);        
    listview = (ListView) this.findViewById(R.id.list);

    discussionThread = new ArrayList<String>();
    discussionThreadAdapter = new MyCustomAdapter();
    listview.setAdapter(discussionThreadAdapter);

    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            String text = textMessage.getText().toString();

            Message msg = new Message(ROOM, Message.Type.groupchat);
            msg.setBody(text);
            connection.sendPacket(msg);
            discussionThreadAdapter.notifyDataSetChanged();
            textMessage.setText("");
        }
    });

    textMessage.setOnKeyListener(new OnKeyListener()
    {
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                switch (keyCode)
                {
                    case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:
                        SendText();
                        return true;
                    default:
                        break;
                }
            }
            return false;
        }
    });
}

private void initConnection() throws XMPPException {
    config = new ConnectionConfiguration(SERVER_HOST, SERVER_PORT, SERVICE_NAME);
    connection = new XMPPConnection(config);
    connection.connect();
    connection.login(LOGIN, PASSWORD);
    presence = new Presence(Presence.Type.available);

    connection.sendPacket(presence);

    muc = new MultiUserChat(connection, ROOM);
    history = new DiscussionHistory();

    history.setMaxStanzas(25);

    muc.join(LOGIN, PASSWORD, history, SmackConfiguration.getPacketReplyTimeout());

    filter = new MessageTypeFilter(Message.Type.groupchat);

    connection.addPacketListener(new PacketListener() {

        public void processPacket(Packet packet) {
            Message message = (Message) packet;
            if (message.getBody() != null) {
                String fromName = message.getFrom().substring(48);
                String nieuweRegel = fromName + ": " + message.getBody();

                fromName = fromName.toUpperCase();

                if (fromName.equals(LOGIN.toUpperCase())) {
                    discussionThreadAdapter.addVanMijItem(nieuweRegel);
                } else {
                    discussionThreadAdapter.addVanAnderItem(nieuweRegel);
                }

            }
        }
    }, filter);

}

private void Notify() {
    discussionThreadAdapter.notifyDataSetChanged();
    listview.setSelection(discussionThreadAdapter.getCount());
}

private class MyCustomAdapter extends BaseAdapter {

    private static final int BERICHT_VAN_ANDER = 0;
    private static final int BERICHT_VAN_MIJ = 1;
    private static final int TYPE_MAX_COUNT = BERICHT_VAN_MIJ + 1;

    private LayoutInflater mInflater;

    private TreeSet<Integer> mySet = new TreeSet<Integer>();

    public MyCustomAdapter() {
        mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void addVanAnderItem(final String item) {
        discussionThread.add(item);
        handler.post(new Runnable() {
            public void run() {
                Notify();
            }
        });

    }

    public void addVanMijItem(final String item) {
        discussionThread.add(item);
        mySet.add(discussionThread.size() - 1);
        handler.post(new Runnable() {
            public void run() {
                Notify();
            }
        });
    }

    @Override
    public int getItemViewType(int position) {
        return mySet.contains(position) ? BERICHT_VAN_MIJ : BERICHT_VAN_ANDER;
    }

    @Override
    public int getViewTypeCount() {
        return TYPE_MAX_COUNT;
    }

    @Override
    public int getCount() {
        return discussionThread.size();
    }

    @Override
    public String getItem(int position) {
        return discussionThread.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        int type = getItemViewType(position);
        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
                case BERICHT_VAN_ANDER:
                    convertView = mInflater.inflate(R.layout.bericht_van_ander_item, null);
                    holder.textView = (TextView)convertView.findViewById(R.id.textline);
                    break;
                case BERICHT_VAN_MIJ:
                    convertView = mInflater.inflate(R.layout.bericht_van_mij_item, null);
                    holder.textView = (TextView)convertView.findViewById(R.id.textline);
                    break;
            }
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder)convertView.getTag();
        }
        holder.textView.setText(discussionThread.get(position));
        return convertView;
    }

}

public static class ViewHolder {
    public TextView textView;
}

private void SendText() {

    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(textMessage.getWindowToken(), 0);

    String text = textMessage.getText().toString();

    Message msg = new Message(ROOM, Message.Type.groupchat);
    msg.setBody(text);
    connection.sendPacket(msg);
    textMessage.setText("");
}

public void onStart() {
    super.onStart();
    Log.i("CONN", "onStart");
    startConnection();
}

public void onRestart() {
    super.onRestart();
    Log.i("CONN", "onReStart");
    startConnection();
}

public void onResume() {
    super.onResume();
    Log.i("CONN", "onResume");
    startConnection();
}

public void onPause() {
    super.onPause();
    Log.i("CONN", "onPause");
    stopConnection();

}

public void onStop() {
    super.onStop();
    Log.i("CONN", "onStop");
    stopConnection();
}

public void onDestroy() {
    super.onDestroy();
    Log.i("CONN", "onDestroy");
    stopConnection();
}

private void stopConnection() {

    if (connection != null) {

        Log.i("CONN", "STOP");

        connection.disconnect(presence);

        connection = null;
        filter = null;
        history = null;
        muc = null;
        presence = null;
        config = null;
        discussionThreadAdapter = null;

    }

}

private void startConnection() {

    if (connection.isConnected() ) {

    } else {

        Log.i("CONN", "START");

        try {
            initConnection();
        } catch (XMPPException e) {
            e.printStackTrace();
        }
    }
} 
```

}

好的，我更改了以下内容：

```
 private void startConnection() {

    if (connection != null ) {

        Log.i("CONN", "RUNNING");

    } else {

        Log.i("CONN", "START");

        try {
            initConnection();
        } catch (XMPPException e) {
            e.printStackTrace();
        }
    }
} 
```

我启动应用程序，一切正常。日志：

> 05-12 08:40:21.743: D/AndroidRuntime(491): >>>>>>>>>>>>>> AndroidRuntime 开始 <<<<<<<<<<<<< 05-12 08 :40:21.743: D/AndroidRuntime(491): CheckJNI 开启
> 
> 05-12 08:40:22.065: D/AndroidRuntime(491): --- 注册本机函数 ---
> 
> 05-12 08:40:23.353: D/AndroidRuntime(491): 关闭虚拟机
> 
> 05-12 08:40:23.363: D/dalvikvm(491): 调试器已分离；对象注册表有 1 个条目
> 
> 05-12 08:40:23.393: I/AndroidRuntime(491): 注意: 附加线程 'Binder Thread #3' 失败
> 
> 05-12 08:40:24.184: D/AndroidRuntime(499): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
> 
> 05-12 08:40:24.184: D/AndroidRuntime(499): CheckJNI 开启
> 
> 05-12 08:40:24.523: D/AndroidRuntime(499): --- 注册本机函数 ---
> 
> 05-12 08:40:25.873: I/ActivityManager(70): 开始活动: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=nl.yeswecanclinics。聊天/.开始 }
> 
> 05-12 08:40:25.965: D/AndroidRuntime(499): 关闭虚拟机
> 
> 05-12 08:40:25.973: D/dalvikvm(499): 调试器已分离；对象注册表有 1 个条目
> 
> 05-12 08:40:26.034: I/AndroidRuntime(499): 注意: 附加线程 'Binder Thread #3' 失败
> 
> 05-12 08:40:26.105: I/ActivityManager(70): 启动 proc nl.yeswecanclinics.chat 活动 nl.yeswecanclinics.chat/.Start: pid=506 uid=10032 gids={3003, 1015}
> 
> 05-12 08:40:27.843: I/global(506): BufferedReader 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:40:27.843: I/global(506): BufferedWriter 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:40:28.294: W/System.err(506): java.security.KeyStoreException: KeyStore jks implementation not found
> 
> 05-12 08:40:28.294: W/System.err(506): 在 java.security.KeyStore.getInstance(KeyStore.java:134)
> 
> 05-12 08:40:28.294: W/System.err(506): at org.jivesoftware.smack.ServerTrustManager.(ServerTrustManager.java:61)
> 
> 05-12 08:40:28.294: W/System.err(506): 在 org.jivesoftware.smack.XMPPConnection.proceedTLSReceived(XMPPConnection.java:832)
> 
> 05-12 08:40:28.304: W/System.err(506): 在 org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:268)
> 
> 05-12 08:40:28.304: W/System.err(506): at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:44)
> 
> 05-12 08:40:28.313: W/System.err(506): at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:71)
> 
> 05-12 08:40:29.004: I/global(506): BufferedReader 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:40:29.014: I/global(506): BufferedWriter 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:40:29.483: D/dalvikvm(506): GC_FOR_MALLOC 在 153 毫秒内释放了 3668 个对象/280752 个字节
> 
> 05-12 08:40:29.663: I/CONN(506): onStart
> 
> 05-12 08:40:29.685：I/CONN（506）：正在运行
> 
> 05-12 08:40:29.685: I/CONN(506): onResume
> 
> 05-12 08:40:29.693：I/CONN（506）：正在运行
> 
> 05-12 08:40:30.633: I/ActivityManager(70): 显示的活动 nl.yeswecanclinics.chat/.Start: 4712 ms（总共 384269 ms）
> 
> 05-12 08:40:37.114: D/dalvikvm(175): GC_EXPLICIT 在 122 毫秒内释放了 444 个对象/22064 个字节
> 
> 我按下返回按钮
> 
> 05-12 08:41:07.253: W/KeyCharacterMap(506): id 0 没有键盘
> 
> 05-12 08:41:07.253：W/KeyCharacterMap(506)：使用默认键盘映射：/system/usr/keychars/qwerty.kcm.bin
> 
> 05-12 08:41:07.403: I/CONN(506): onPause
> 
> 05-12 08:41:07.403: I/CONN(506): 停止
> 
> 05-12 08:41:07.784: W/InputManagerService(70): 在非聚焦客户端 com.android.internal.view.IInputMethodClient$Stub$Proxy@45066cf8 (uid=10032 pid=506) 上开始输入
> 
> 05-12 08:41:07.804: W/IInputConnectionWrapper(506): 非活动 InputConnection 上的 showStatusIcon
> 
> 05-12 08:41:08.173: I/CONN(506): onStop
> 
> 05-12 08:41:08.173: I/CONN(506): onDestroy
> 
> 我通过单击图标重新启动应用程序
> 
> 05-12 08:41:30.583: I/global(506): BufferedReader 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:41:30.623: I/global(506): BufferedWriter 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:41:31.663: W/System.err(506): java.security.KeyStoreException: KeyStore jks implementation not found
> 
> 05-12 08:41:31.663: W/System.err(506): 在 java.security.KeyStore.getInstance(KeyStore.java:134)
> 
> 05-12 08:41:31.663: W/System.err(506): 在 org.jivesoftware.smack.ServerTrustManager.(ServerTrustManager.java:61)
> 
> 05-12 08:41:31.674: W/System.err(506): 在 org.jivesoftware.smack.XMPPConnection.proceedTLSReceived(XMPPConnection.java:832)
> 
> 05-12 08:41:31.674: W/System.err(506): 在 org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:268)
> 
> 05-12 08:41:31.683: W/System.err(506): at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:44)
> 
> 05-12 08:41:31.683: W/System.err(506): at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:71)
> 
> 05-12 08:41:31.984: I/global(506): BufferedReader 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:41:31.994: I/global(506): BufferedWriter 构造函数中使用的默认缓冲区大小。如果需要 8k 字符的缓冲区，最好是明确的。
> 
> 05-12 08:41:32.043: D/AndroidRuntime(506): 关闭虚拟机
> 
> 05-12 08:41:32.043: W/dalvikvm(506): threadid=1: 线程退出未捕获异常 (group=0x4001d800)
> 
> 05-12 08:41:32.214: D/dalvikvm(506): GC_FOR_MALLOC 在 147 毫秒内释放了 5507 个对象/388504 个字节
> 
> 05-12 08:41:32.226: D/NativeCrypto(506): 释放 OpenSSL 会话
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 致命异常: main
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): java.lang.RuntimeException: 无法启动活动 ComponentInfo{nl.yeswecanclinics.chat/nl.yeswecanclinics.chat.Start}: java.lang.NullPointerException
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.os.Looper.loop(Looper.java:123)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 java.lang.reflect.Method.invoke(Method.java:521)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 05-12 08:41:32.234: E/AndroidRuntime( 506): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): at dalvik.system.NativeStart.main(Native Method)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 由: java.lang.NullPointerException 引起
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): at org.jivesoftware.smackx.muc.MultiUserChat$1.connectionCreated(MultiUserChat.java:114)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 org.jivesoftware.smack.XMPPConnection.initConnection(XMPPConnection.java:618)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 org.jivesoftware.smack.XMPPConnection.connectUsingConfiguration(XMPPConnection.java:565)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:991)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 nl.yeswecanclinics.chat.Start.initConnection(Start.java:131)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 nl.yeswecanclinics.chat.Start.onCreate(Start.java:71)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
> 
> 05-12 08:41:32.234: E/AndroidRuntime(506): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:29:26.513

虽然 Marek 的回答肯定不正确（这实际上可能是您得到 a 的原因`NullPointerException`），但我知道的一件事是您不应该尝试在 UI 线程上建立连接。这将不可避免地导致您的应用程序在建立连接的时间超过几秒钟的情况下崩溃。您应该在`AsnycTask`那里进行连接和状态更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:20:26.513

您设置了`stopConnection`方法`null`，`connection`因此当您尝试进行检查时，`if(connection.isConnected())`您会收到`null`，因为您设置了它。如果不是，您应该检查`startConnection`方法，否则您必须调用方法。`connection``null``initConnection`

# vim - Vim：从一个文件中复制一个模式并在另一个文件中搜索它

> ID：10529770
> 
> 赞同：3
> 
> 时间：2012-05-10T08:01:41.427
> 
> 标签：vim, replace

假设我们在`vsplit`mode 下打开了两个文件 A 和 B。现在`p`在 A 中有一个模式，并且想要在 B 中拉出它（切换可视模式和`yy`）并搜索它（通过输入`/`命令模式）。如何实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T08:06:28.430

您可以使用`Ctrl`+`R`后跟`"`将默认寄存器的内容粘贴到`/`搜索或`:`命令中。如果你已经完成了 yank 使用，`yy`那么文本将在默认寄存器中，所以这将是你想要的。

如果您想要的文本已被拉入非默认值的寄存器中，则只需使用寄存器字母或数字代替`"`例如`Ctrl`+ `R`，`z`即可粘贴寄存器 z 的内容。

[在命令行文档](http://vimdoc.sourceforge.net/htmldoc/cmdline.html)中搜索`CTRL-R`更多详细信息和可以使用的特殊寄存器。

# windows - Qt 获取系统 32 位或 64 位信息？

> ID：10529772
> 
> 赞同：0
> 
> 时间：2012-05-10T08:01:47.697
> 
> 标签：windows, qt, 32bit-64bit

我正在使用 Qt 编写软件。我的任务之一是判断Windows操作系统是32位还是64位，然后根据这个事实进行以下操作。

但是，当我尝试“ **QSysInfo::WordSize** ”时，它总是返回 32 而我实际上是在 Windows 7-64 位操作系统上运行。我也试过

```
#ifdef _WIN32
return 32;
#elif _WIN64
return 64; 
```

这也返回 32。

实际上 Qt 在我的系统中是 32 位的。那是问题吗？如何获得 Windows 的实际字长？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:21:16.947

我个人会打电话[`GetNativeSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340.aspx)检查该[`wProcessorArchitecture`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724958.aspx)字段的值。

和宏`_WIN32`与`_WIN64`所有宏一样，在编译时进行评估。它们告诉您可执行文件的体系结构，而不是运行可执行文件的系统体系结构。后面的信息，即您想要的信息，只能在运行时确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:17:40.450

QSysInfo::WordSize 仅告诉您应用程序是在 32 位平台还是 64 位平台上**编译的。**所以，是的，以某种方式使用 32 位 Qt 编译将返回 32 的字长。

对于您的情况，您可能需要检查**[IsWow64Process](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139%28v=vs.85%29.aspx)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-11T16:17:28.547

这应该适用于任何不使用“段寄存器”（IOW，具有适当平坦的内存空间）的系统上的任何 c++ 环境，包括 Qt 的：

```
uint32_t archwidth = sizeof(int *);    // arch width in bytes
uint32_t archbits  = 8 * archwidth;    // arch width in bits 
```

这里的机制是：

在 64 位架构（如 XEON）上，CPU 将使用 8 字节（64 位）指针，因此`archwidth`将返回**8**；然后`archbits`是**8*8**或**64**。

在 32 位架构（如 68000）上，CPU 将使用 4 字节（32 位）指针，因此`archwidth`将返回**4**；然后`archbits`是**4*8**或**32**。

在 16 位架构（如 6809）上，CPU 将使用 2 字节（16 位）指针，因此`archwidth`将返回**2**；然后`archbits`是**2*8**或**16**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-29T15:35:57.753

您可以使用[Q_PROCESSOR_WORDSIZE](https://code.qt.io/cgit/qt/qtbase.git/tree/src/corelib/global/qprocessordetection.h?h=dev&id=4744f31e59711a407ffaf2db725711aec41bc134#n186)（或[此处](https://code.qt.io/cgit/qt/qtbase.git/tree/src/corelib/global/qprocessordetection.h?h=dev&id=4744f31e59711a407ffaf2db725711aec41bc134#n214)）。我很惊讶它没有记录，因为它不在私有标头（QtGlobal）中并且非常方便。

对于某些用例，它可能更可取，因为它不依赖于处理器架构。（例如，它对 x86_64 以及 arm64 和许多其他的定义方式相同）

例子：

```
#include <QtGlobal>
#include <QDebug>

int main() {
#if Q_PROCESSOR_WORDSIZE == 4
    qDebug() << "32-bit executable";
#elif Q_PROCESSOR_WORDSIZE == 8
    qDebug() << "64-bit executable";
#else
    qDebug() << "Processor with unexpected word size";
#endif
} 
```

甚至更好：

```
int main() {
    qDebug() << QStringLiteral("%1-bit executable").arg(Q_PROCESSOR_WORDSIZE * 8);
} 
```

# php - 什么是序列化？

> ID：10529773
> 
> 赞同：0
> 
> 时间：2012-05-10T08:01:49.787
> 
> 标签：php, wordpress, serialization

序列化数据时会发生什么？说真的，我很担心它的用途，我一直在网上搜索，但他们似乎只给出了用法，而不是使用它的原因。.我的任务是在将数据作为 post_meta 数据插入 wordpress 之前对其进行序列化，我有点迷茫。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:09:13.187

> [Wiki](http://en.wikipedia.org/wiki/Serialization) : [S] 序列化是将数据结构或对象状态转换为可以存储 [...] 并稍后在相同或另一个计算机环境中“复活”的格式的过程。

简单地说，通过序列化，您可以将对象存储为可传输和可存储的状态。将内存中的对象转换为 XML 以将其发送到 SOAP 服务是序列化。PHP 将您的`$_SESSION`数组序列化为会话文件（至少在默认情况下）。ORM 将您的对象序列化为 SQL 查询。[JSON](http://en.wikipedia.org/wiki/JSON)可以表示要在服务器和浏览器之间传输的序列化对象。

至于您的问题，我不知道这如何适用于 Wordpress 或您的问题实际上是什么，也许您应该显示一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:10:28.537

可能需要对数据进行序列化，以使其能够以 PHP 可以理解的形式从数据库中成功存储和检索。

WordPress 使用不同的函数进行序列化。检查以下函数引用

1.  [也许序列化](http://codex.wordpress.org/Function_Reference/maybe_serialize) `<?php maybe_serialize( $data ); ?>`
2.  [被序列化](http://codex.wordpress.org/Function_Reference/is_serialized) `<?php is_serialized( $data ) ?>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:22:14.237

一般来说，序列化是将对象或数据结构存储在您可以存储的东西中的一种方式。Java 有自己的方式，JavaScript 有 JSON 等等。

它对于在数据库中存储对象或复杂的数据结构非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T08:13:15.197

序列化可以将您的对象/数据结构保存到内存或文件中。当您反序列化时，您能够以与以前相同的状态检索此信息。

来自维基百科：

[http://en.wikipedia.org/wiki/Serialization](http://en.wikipedia.org/wiki/Serialization)

> 序列化是将数据结构或对象状态转换为可以存储（例如，在文件或内存缓冲区中，或通过网络连接链路传输）并稍后在相同或另一个计算机环境中“复活”的格式的过程.

要回答您的问题，实际发生的是对象以某种方式进行转换和结构化，以便以后可以检索此数据。例如，您可以将对象序列化为 xml 结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T08:08:54.153

序列化

这个过程生成了一个值的可存储表示，该表示对于存储或传递 PHP 值很有用，而不会丢失它们的类型和结构。

联合国序列化：

此过程采用单个序列化变量并将其转换回 PHP 值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T08:26:54.857

你问我们为什么要序列化数据。数据被序列化以便以一种格式（作为一系列位）存储或传输，当在接收端重新创建时，位的存储格式是有意义的，**这种重新创建可以发生在另一个环境或另一个应用程序中**，而不是进行序列化的应用程序。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-10T08:05:23.027

WordPress 以非常便携而著称，但在阅读了 WPGarage.com 上最近的一篇文章后，在某种情况下 WordPress 中的数据可能变得不可移植。它与数据的序列化有关。但是，它们提供了几种不同的方法来处理问题，这样您就不会通过数据库转储丢失数据。

# .net - 安全和 MAF 插件

> ID：10529785
> 
> 赞同：0
> 
> 时间：2012-05-10T08:02:36.460
> 
> 标签：.net, wpf, appdomain, add-on, maf

我想构建一个 WPF 系统，该系统可以包含由外部开发人员社区开发的插件。由于我不能为这些开发人员担保，我希望他们的代码在安全的环境中运行。看来 MAF 是一个很好的解决方案，所以我决定调查一下 MAF 的安全性。可以为每个插件定义一个精确的权限集，这非常好。

但是，我希望插件能够返回 WPF 控件。为此，他们需要能够运行 WPF 程序集。另外，我不希望插件能够运行非托管代码，这样它们就不能覆盖我在加载插件时设置的安全权限。

所以这就是问题所在 - 如果我在未经许可的情况下加载插件以运行非托管代码，那么插件将无法创建 WPF 控件。我怎么解决这个问题？

为了进一步测试这个问题，我编写了一个小型 WPF 应用程序，并尝试加载它并从第二个应用程序运行它。Bellow 是加载和运行 WPF 应用程序的代码。如果按原样，它会很好用，但是如果我删除最后一个 AddPermission 语句（带有 UnmanageCode 标志的语句），它就会停止工作，说它无法创建 WPF 应用程序的窗口。

```
PermissionSet set = new PermissionSet(PermissionState.None);
set.AddPermission(new FileIOPermission(FileIOPermissionAccess.AllAccess, PATH));
set.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));
set.AddPermission(new UIPermission(PermissionState.Unrestricted));
set.AddPermission(new SecurityPermission(SecurityPermissionFlag.UnmanagedCode));

Evidence ev = new Evidence();
AppDomain domain = AppDomain.CreateDomain("Test", ev, new AppDomainSetup() { ApplicationBase = PATH }, set);
domain.ExecuteAssembly(PATH); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T06:00:58.933

它对我有用，我认为问题在于您如何激活插件。尽量不要自己创建 AppDomain。您的代码应如下所示：

```
PermissionSet set = new PermissionSet(PermissionState.None);
set.AddPermission(new FileIOPermission(FileIOPermissionAccess.AllAccess, PATH));
set.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));
set.AddPermission(new UIPermission(PermissionState.Unrestricted));

// .. retreive the addin token
var plugin = token.Activate<IMyPluginInterface>(set); 
```

当我以前以这种方式创建插件时，它对我有用。它也是一个 wpf UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:08:23.410

您是否查看过 CreateDomain 方法的[这种重载？](http://msdn.microsoft.com/en-us/library/ms130766.aspx)您可以设置一些将被视为完全信任的组件。

如果您查看 System.AddIn 源代码（可在[此处](http://referencesource.microsoft.com/netframework.aspx)找到），您将看到在文件 AddInActivator.cs 中，他们使用从 System.AddIn 程序集获取的[AssemblyName中获取的](http://msdn.microsoft.com/en-us/library/System.Reflection.AssemblyName.aspx)[StrongNamePublicKeyBlob创建了](http://msdn.microsoft.com/en-us/library/System.Security.Policy.StrongName.aspx)[StrongName的实例。](http://msdn.microsoft.com/en-us/library/system.security.permissions.strongnamepublickeyblob.aspx)

因此，也许您可​​以对 PresentationCore 和 System.Windows.Presentation 或您想要授予完全信任的任何其他程序集执行相同的操作。

例如，您可以试试这个（从 AddInActivator.cs 中几乎逐字记录）：

```
//assembly is the Assembly object you want to grant full trust permissions.
AssemblyName assemblyName = assembly.GetName();

// get the public key blob
byte[] publicKey = assemblyName.GetPublicKey(); 
if (publicKey == null || publicKey.Length == 0)
    throw new InvalidOperationException(Res.NoStrongName);

StrongNamePublicKeyBlob keyBlob = new StrongNamePublicKeyBlob(publicKey); 

// and create the StrongName 
StrongName strongName = new StrongName(keyBlob, assemblyName.Name, assemblyName.Version); 
// then call the overload of CreatDomain that takes a StrongName object parametes. 
```

# mysql - mysql - 我应该使用什么来代替 IN 语句？

> ID：10529786
> 
> 赞同：0
> 
> 时间：2012-05-10T08:02:42.263
> 
> 标签：mysql

在以下 mysql 查询中，我试图选择所有具有括号中所有功能的产品。我使用的 IN 显然返回具有功能 1 或功能 2 等的产品...我应该使用什么来代替 IN？

```
SELECT *, f.name as feature, p.productcode as productcode, p.name as name 
from product p 
left join productfeatures pf on p.productcode = pf.productcode 
left join features f on pf.featureid = f.id
where f.id in (1, 2, 3) 
group by p.productcode 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:07:47.037

将此添加到末尾

```
having count(f.id) = 3 
```

这只会导致具有 3 `f.id`s 而不仅仅是 1 或 2 的组。

如果您的子句`f.id`中有超过 3 个 s `in`，则需要扩展该值。例子：

```
where f.id in (1, 2, 3, 4, 5) 
group by p.productcode    
having count(f.id) = 5 
```

# php - 呈现 HTML 和 PHP 的最有效方式

> ID：10529787
> 
> 赞同：0
> 
> 时间：2012-05-10T08:02:45.820
> 
> 标签：php, optimization

使用 PHP 和 HTML 呈现页面的最有效方法是什么？

连接

```
$html = '<span><img src="page.png" alt="page" />'.$variable1.'</span>';
echo $html 
```

替换变量

```
$html = "<span><img src=\"page.png\" alt=\"page\" />{$variable1}</span>";
echo $html; 
```

内联 PHP 标记 - 这似乎并不实用，即使它在大规模上是最有效的

```
<span><img src="page.png" alt="page" /><?php echo $variable1; ?></span> 
```

请假设您正在生成整个页面。我使用上面的片段作为每种方法的示例。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:09:43.760

这实际上取决于您尝试实现的目标。

如果只是渲染一个简单的页面，最有效的方法是使用单引号（基于基准）连接代码（即使差异不是那么重要）。

但我猜你正在建立一个网站，你会广泛使用 html+php。如果是这样，我建议您使用模板引擎，或者直接使用 PHP。

当然，使用任何模板引擎都会降低性能，但它会提高项目的可读性并以更好的方式构建它。“性能损失”/“可读性 - 维护”的比率是值得的。你应该去做（同样，如果你打算渲染许多 html 页面）。请参阅[MVC 设计模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

现在，对于模板引擎，我建议您直接使用 PHP，因为它最初是为此目的而开发的。您可以找到许多模板引擎最终在模板中使用 php，同样适用于框架。例如，如果您看一下[Code Igniter](http://codeigniter.com/)，您会发现模板是由 php 组成的。

现在，出于安全原因，在模板中使用 PHP 很大程度上取决于谁将编辑模板。如果只有你，或者你完全信任的人，你应该去争取。如果您的用户能够编辑模板（出于任何原因），那么我绝对应该避免它，因为他们可以在您的服务器上做任何他们想做的事情，包括访问数据库、查看所有文件（甚至是配置文件）等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:10:58.567

没有足够的性能差异来衡量或衡量。做最易读的事情。在我的（许多）PHP 应用程序中，我主要使用带有短标签的嵌入式 PHP 替换：

```
<p><?= $text ?></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:07:09.203

最好的方法是：可读和可维护。

话虽如此，我可能会使用模板引擎（如[twig](http://twig.sensiolabs.org/)或[smarty](http://www.smarty.net/)），但如果不可用，我肯定会使用内联 php 标签（如 Zend Framework 视图和 Symfony 成功模板中的视图中使用的那样）。

如果我必须在 php 中生成 html，我会选择`sprinft('<img src="%s">", $src');`或连接。

我真的，真的不喜欢使用`{$var}`or `$html = "$var"`。

# sql - 从有时不匹配字段的三个表中获取记录

> ID：10529791
> 
> 赞同：0
> 
> 时间：2012-05-10T08:03:08.133
> 
> 标签：sql, sql-server, tsql

我有一个问题应该很容易回答...

我有一张表叫`Projects`，主键是`ProjectId`。

第二个表被称为`ProjectResources`，`ProjectId`作为外键，加上用户和小时字段（代表分配给项目工作的用户）

第三个表是`TimesheetEntries`（用户用来记录用户在项目上实际工作的时间），`ProjectId`作为外键和字段`User`

我需要的是显示`projectId,BudgetedHours`（从`ProjectResources`表）和`ActualHours`（从`TimesheetEntries`表）的记录；但是，我想包括以下情况：

1.  一个用户被分配到该项目，但没有工作（在这种情况下，预算小时数应该有一个值，而实际小时数应该为零）

2.  用户未分配到该项目，但仍对其进行了处理（在这种情况下，BudgetedHours 应该为零，ActualHours 应该有一个值）

3.  一个用户既被分配到该项目并且已经在它上面工作（BudgetedHours 和 ActualHours 都有值）

有人可以指导我使用 T-SQL 语句来获得这种结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:43:00.457

我认为您遇到问题的原因是因为您认为实际时间和预算时间基本上是相等的，因为它们被分配给项目。

但是，实际和预算的计算方式非常不同。您需要使用单独的子查询来计算它们，如下例所示：

```
select coalesce(budget.ProjectId, actual.ProjectId) as ProjectId,
       budget.BudgetedHours, actual.ActualHours
from 
(
  select projectid, sum(pr.hours) as BudgetedHours
  from Projects p 
  left outer join ProjectResources pr
) budget 
full outer join
(
  select projectid, sum(tse.hours) as ActualHours
  from  Projects p 
  left outer join TimeSheetEntries tse
     on tse.ProjectId = p.ProjectId
) actual
  on budget.ProjectId = actual.ProjectId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:30:12.807

您可以尝试以下方法：

```
SELECT p.ProjectId, 
       (CASE WHEN pr.[User] Is NULL THEN te.[User] ELSE pr.[User] END) as [User], 
       IsNull(pr.BudgetedHours, 0.0), 
       IsNull(Sum(te.ActualHours), 0.0)
FROM Project p
LEFT JOIN ProjectResources pr on p.ProjectId = pr.ProjectId
LEFT JOIN TimeSheetEntries te on p.p.ProjectId = te.ProjectId
GROUP BY p.ProjectId, te.User, pr.BudgetedHours 
```

但我猜测您的字段名称等，因此您需要针对您自己的域进行调整。

# javascript - jQuery输入字段格式为XX-XX-XX

> ID：10529792
> 
> 赞同：-3
> 
> 时间：2012-05-10T08:03:11.223
> 
> 标签：javascript, jquery

我找不到适合这个的插件。我希望能够格式化用户能够在该字段中输入的方式。

```
XX-XX-XX 
```

其中 X 是 0-9 之间的任何数字

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:08:52.187

您可以使用屏蔽输入： [屏蔽输入库](http://digitalbush.com/projects/masked-input-plugin/#demo)

它应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:10:54.840

阅读[http://www.webresourcesdepot.com/javascript-input-masks/](http://www.webresourcesdepot.com/javascript-input-masks/)

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

哦，使用 [Google][1]

[1]：[https](https://www.google.ro/?gws_rd=ssl#hl=ro&gs_nf=1&pq=input) ://www.google.ro/? gws_rd=ssl#hl=ro&gs_nf=1&pq=输入格式jquery库&cp=19&gs_id=141&xhr=t&q=屏蔽输入插件&pf=p&sclient=psy-ab&oq=屏蔽输入插件&aq= 0L&aqi=g-L3&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=bf2149430d246ba1&biw=1280&bih=886

# ios - 如何创建自定义 UISearchBar

> ID：10529797
> 
> 赞同：0
> 
> 时间：2012-05-10T08:03:34.467
> 
> 标签：ios, searchbar

在 iOS 中有一个带有文本字段的搜索栏组件。如何将文本字段自定义为其他内容？有不同的图像？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:51:38.870

[如何自定义 UISearchBar 的外观](https://stackoverflow.com/questions/6201406/how-to-custom-uisearchbar)

[http://forrst.com/posts/Customize_a_UISearchBar_background-7UD](http://forrst.com/posts/Customize_a_UISearchBar_background-7UD)

[http://jomnius.blogspot.com/2010/10/how-to-control-uisearchbar-background.html](http://jomnius.blogspot.com/2010/10/how-to-control-uisearchbar-background.html)

如果您期待一个示例代码，这对您来说不是一个理想的网站 =)

快乐编码

# android - 尝试通过 setLayoutParams 在触摸事件中移动 ImageView，imageview 没有移动

> ID：10529799
> 
> 赞同：4
> 
> 时间：2012-05-10T08:03:41.660
> 
> 标签：android

我在全屏 FrameLayout 中有一个小的 ImageView，我想设置它，以便当我触摸 FrameLayout 时，imageview 移动到该位置。

我已经阅读了我能找到的关于移动 ImageView 的所有其他 SO 问题，但我还没有看到为什么我的解决方案还不起作用。

在扩展 FrameLayout 的自定义视图中：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event){

    if(event.getActionMasked() == MotionEvent.ACTION_DOWN){
        ImageView iv = (ImageView) this.findViewById(R.id.draggedImage);
        FrameLayout.LayoutParams params = (LayoutParams) iv.getLayoutParams();
        params.leftMargin = (int) event.getX();
        params.bottomMargin = (int) event.getY();
        iv.setLayoutParams(params);
        iv.invalidate();
        invalidate();           
    }
    return true;
} 
```

我已经更改了 layoutparams 边距以反映新的触摸位置，并使 imageview 和 framelayout 无效（不确定我应该做什么），但 imageView 没有让步（只是始终位于左上角框架）。

我还验证了当我触摸屏幕并且参数设置为合理的 X 和 Y 值时，会调用此方法。

我的布局：

```
<CustomFrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <!-- some other unrelated views -->

    <ImageView
        android:id="@+id/draggedImage"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:src="@drawable/pause" />    

</CustomFrameLayout> 
```

编辑：应该提到我正在尝试以 API 级别 10 为目标，所以我不能使用任何 Honeycomb 视图方向优势 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:56:19.270

通过反复试验和搜索发现我错过了这个电话：

`params.gravity = Gravity.LEFT | Gravity.BOTTOM;`

最初重力只是-1，所以边距没有影响，因为它不知道它应该从哪一侧开始边距。添加重力使其具有锚定的一侧，以便可以将其移出边距中的量。

现在完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:10:01.330

我相信您想设置顶部和左侧填充。请参阅以下问题，它比我能更好地解释它。[视图的填充和边距之间的区别](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:15:28.210

我觉得：

```
iv.setLayoutParams(params); 
```

只是将参数设置为`FrameLayout`本身的 iv 布局。

您也许可以设置`ImageView`´s Position by `iv.setX()`; `iv.setY()`;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:37:15.090

我找到了蒂姆的解决方案：

**params.gravity = Gravity.LEFT | 重力.BOTTOM;**

要更改视图的边距，只有在 android 级别 10 或更低的设备上运行时才需要！

问题没有出现在 14 或 17 级。

添加上面的代码可以在所有 android 级别上提供所需的行为......谢谢蒂姆。

# iphone - 有没有办法通过Objective-C中的委托发送对象

> ID：10529811
> 
> 赞同：0
> 
> 时间：2012-05-10T08:04:19.567
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我有一个场景，我正在等待 uiwebview 完全加载，然后在完成后从 finishedWebViewLoading 调用一个委托。但是，我想在完成加载作为另一个类的私有对象的对象时返回该 webView。反正有没有通过代表来做到这一点？我不想将该 uiwebview 作为公共财产，因此我在我的主文件下使用了它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:12:21.420

当然你可以这样做..在.h

```
@protocol yourClassProtocal <NSObject>

- (void) loadingFinsihForWebView:(UIWebView*)wv;

@end 
```

并在 webView 委托中`webViewDidFinishLoad`

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [delegate loadingFinsihForWebView:webView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:10:17.537

你的问题的答案是：是的。但是，我相信您可能需要阅读委托如何工作以及如何创建委托，这篇文章可能会让您走上正确的道路：[委托如何在 Objective-C 中工作？](https://stackoverflow.com/questions/1045803/how-does-a-delegate-work-in-objective-c)

另外，看看这篇文章：http: [//blog.shoguniphicus.com/2011/10/17/writing-custom-delegate-in-objective-c/](http://blog.shoguniphicus.com/2011/10/17/writing-custom-delegate-in-objective-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:11:58.253

你可以使用这个：

```
 if([self.theDelegate respondsToSelector:@selector(loadData:)]) {
        [self.theDelegate performSelector:@selector(loadData:) withObject:theObject]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:12:55.960

我不确定我是否理解您的要求，但您不能从中返回任何值`(void)webViewDidFinishLoad:(UIWebView*)webView`，也不能更改委托签名。

另一方面，如果您的意思是要从 调用另一个自定义委托方法`webViewDidFinishLoad`，并且希望它返回`webView`，那么这绝对是可能的。只需调用该自定义委托方法并将其传递`webView`给它，然后使自定义委托方法返回它。

这假设您负责自定义委托方法签名的定义，例如：

```
@protocol CustomDelegateProtocol
    - (UIWebView*)myCustomDelegateMethod:(UIWebView*)view;
@end 
```

# java - 如何合并更新到自动生成的 Hibernate POJO？

> ID：10529812
> 
> 赞同：0
> 
> 时间：2012-05-10T08:04:22.067
> 
> 标签：java, hibernate

我正在使用注释配置的 Hibernate POJO 处理基于 Hibernate 的项目。对 Hibernate 生成的原始 POJO 进行了修改，包括非 Hibernate 方法和自定义类型（例如枚举）。

更新数据模型时，将更改有效合并到对象的休眠生成部分的最佳方法是什么？

# xcode - 编译应用程序时出现 Xcode 错误：-dynamic 未指定，-all_load 无效

> ID：10529817
> 
> 赞同：1
> 
> 时间：2012-05-10T08:04:37.417
> 
> 标签：xcode, dynamic

> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：-dynamic 未指定，-all_load 无效
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：-dynamic 未指定以下标志无效：-ObjC
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：找不到文件：-lzbar
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：文件：-lzbar 不是目标文件（库中不允许）命令
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool 失败，退出代码为 1

在编译要运行的主项目时，子项目上发生此错误。这个自行打开的子项目可以很好地构建和运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:27:16.330

zbar lib 文件丢失。

# c# - 继承/泛型基础。如何实现 DRY 的代码结构

> ID：10529820
> 
> 赞同：2
> 
> 时间：2012-05-10T08:04:52.187
> 
> 标签：c#, asp.net-mvc, generics, inheritance

为了今天干掉我的代码，我想做以下事情。（我不知道这是否是最好的方法，但它似乎比拥有不断增加的代码库更好，如果我想在整个站点上更改某些内容，我需要不断更新多种方法）

我对继承的了解是可怕的。因为我从来没有质疑过我使用的任何代码/库，也从来没有真正尝试过写这样的东西，但我想学习......希望这将是我启蒙的一天：P

**对于我的问题：**

假设我有一个 add 方法（在我所有的控制器中），如下所示：

```
public ActionResult Add(VM_Down_Time_Capture viewModel)
        {
            using (Down_Time_CaptureRepository repository = new Down_Time_CaptureRepository())
            {
                if (!ModelState.IsValid)
                    return ReturnValidationFailure(ViewData.ModelState.Values);

                Down_Time_Capture model = new Down_Time_Capture();
                model.InjectFrom(viewModel);

                string mserMsg = repository.Add(model, User.Identity.Name);

                if (!string.IsNullOrEmpty(mserMsg))
                    return ReturnCustomValidationFailure(Server.HtmlEncode(mserMsg));

                repository.Save();

                return Json("Added successfully.", JsonRequestBehavior.AllowGet);
            }
        } 
```

目前我也有以下内容。

**由 T4 模板/EF 生成。**

```
 ViewModels, Repositories, (Standard) EF Models 
```

我在想每个页面都需要一个 ModelSpecfic 基本控制器（可以使用 T4 完成），它继承自包含基本 CRUD 功能的自定义 ControllerBase 类。这样我就可以为每个控制器拥有自定义代码，并且我的代码库将更干净、更小，并且如果我需要重新生成基本文件，也不会受到影响

我不太明白如何按照我需要的方式实现一些东西。到目前为止我所理解的是，我需要拥有我的存储库，并且视图模型也从一个基础继承，并以某种方式在 [B] 中指定我正在使用哪些......但至于如何做到这一点，我不知道知道

例如（这是我最好的尝试，而不是我的实际代码，非常hacky，因为我非常困惑：S）

```
 public class Down_Time_CaptureController : Down_Time_CaptureBase
    {
     //[A]
    }

    //Generated by T4
    public class Down_Time_CaptureBase: ControllerBase
    {
      //[B]
       public override EntityObject CreateNewModel()
       {
          return new Down_Time_Capture();
       }

       public override Base_Repository CreateNewRepository()
       {
          return new Down_Time_CaptureRepository();
       }

       public override Base_ViewModel CreateNewViewModel()
       {
          return new VM_Down_Time_Capture();
       }

      //how would i go about specifying which repository & model & view model to use
      //although i expect it to be something to what i did here above
      //and how would i go about calling the new generic add method (but in context of this controller)?

    }

    //coded once
    public abstract class ControllerBase: Controller
    {
        //[C]
        //make abstract so i have to override it
        public abstract Base_Controller CreateNewModel();
        public abstract Base_Controller CreateNewRepository();
        public abstract Base_Controller CreateNewViewModel();

        //I'm assuming my generified add method would go in here  
        public virtual ActionResult Add(Base_ViewModel viewModel)
        {
           using (Base_Repository repository = CreateRepository())
           {
                   if (!ModelState.IsValid)
                       return ReturnValidationFailure(ViewData.ModelState.Values);

                   EntityObject model = CreateNewModel();
                   model.InjectFrom(viewModel);

                   string mserMsg = repository.Add(model, User.Identity.Name);

                   if (!string.IsNullOrEmpty(mserMsg))
                       return ReturnCustomValidationFailure(Server.HtmlEncode(mserMsg));

                   repository.Save();

                   return Json("Added successfully.", JsonRequestBehavior.AllowGet);
            }       
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:57:32.290

这是对您所要求的内容的简单通用解释：

```
// concrete controller implementation
public class Down_Time_CaptureController: ControllerBase<Down_Time_Capture, VM_Down_Time_Capture, Down_Time_CaptureRepository>
{
}

// generic controller base
public abstract class ControllerBase<TModel, TViewModel, TRepository>: Controller
        where TModel : Base_Model, new()
        where TViewModel : Base_ViewModel, new()
        where TRepository : Base_Repository, new()
{
    protected virtual TModel CreateNewModel()
    {
           return (TModel)Activator.CreateInstance<TModel>();

    }

    protected virtual TRepository CreateNewRepository()
    {
           return (TRepository)Activator.CreateInstance<TRepository>();
    }

    protected virtual TViewModel CreateNewViewModel()
    {
            return (TViewModel)Activator.CreateInstance<TViewModel>();
    }

    //I'm assuming my generified add method would go in here  
    public virtual ActionResult Add(TViewModel viewModel)
    {
       using (var repository = CreateRepository())
       {
               if (!ModelState.IsValid)
                   return ReturnValidationFailure(ViewData.ModelState.Values);

               var model = CreateNewModel();
               model.InjectFrom(viewModel);

               string mserMsg = repository.Add(model, User.Identity.Name);

               if (!string.IsNullOrEmpty(mserMsg))
                   return ReturnCustomValidationFailure(Server.HtmlEncode(mserMsg));

               repository.Save();

               return Json("Added successfully.", JsonRequestBehavior.AllowGet);
        }       
    }
} 
```

几点注意事项：

1.  您可能希望为三种类型（模型、视图模型、存储库）创建接口并将它们用作通用约束。
2.  您可能需要一个通用的 Repository 接口和基本实现（因此您不必独立编写每个存储库，并将相似的逻辑从一个存储库复制到另一个存储库）。
3.  考虑使用[Inversion of Control 容器和依赖注入](http://martinfowler.com/articles/injection.html)。例如，与其让控制器处理创建存储库的实例，不如让它成为一个属性并从构造函数中设置它。然后，您可以使用您选择的 IoC（如 Ninject 或 Autofac）并注册具体实现，它将管理依赖项和控制器本身的创建和生命周期。

# php - 如何返回选中正确单选按钮的注册页面？

> ID：10529821
> 
> 赞同：0
> 
> 时间：2012-05-10T08:05:00.890
> 
> 标签：php, javascript, html

所以我正在建立一个网站，其中有一个价格页面，列出了不同的订阅包。每个套餐选项下方都有一个“注册”按钮，可将用户带到我的注册页面，在我的注册页面上有一个单选按钮组，每个订阅选项都有自己的单选按钮。我的问题是，如何根据在价格页面上单击的按钮返回带有选中特定单选按钮的注册页面？

我知道我可以有单独的注册页面，每个选项一个，并在 html 中选中特定的单选按钮，但这看起来真的很不雅，我相信有更好的方法来做到这一点，或者通过 php 响应或者也许javascript?? 谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:07:49.567

您可以使用 get/post 变量将数据传递到下一页，其中每个注册按钮都有自己的表单，或者您可以根据单击的按钮设置 cookie。您可以处理下一页上的输入并选中相应的单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:11:08.720

您可以使用几个选项：

url :`http://example.com/signup?option1=true`
会话 :`$_SESSION[signup1] = true/false`
或通过 cookie

并像这样设置：

```
<input type="radio" <?php $_GET['option1'] ? "checked" : "" ?> 
```

或者

```
<input type="radio" <?php $_SESSION['option1'] ? "checked" : "" ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:19:29.463

有很多方法可以做到这一点。

一旦用户使用 javascript 检查该单选按钮： 1.您可以将值设置为一个 html 隐藏元素并将该表单发布在您需要显示注册表单的操作页面上

2.在单选按钮上单击检查是否已选中，然后使用 javascript window.location 传递，您可以使用[http://www.asb.com?key=value传递该变量值](http://www.asb.com?key=value)

在操作页面上检查已设置的值，您可以使用

```
$value = $_REQUEST['key'];
switch($value) 
case 'price_1':
// do ur action here for price 1
// i.e set radio button
break;
case 'price_2':
// do your action here 
// i.e set other radio button
break; 
```

条件，您可以决定在这种情况下执行什么操作。

希望这对您的问题有用

# dynamics-crm - 在线CRM，添加组织

> ID：10529822
> 
> 赞同：2
> 
> 时间：2012-05-10T08:05:01.940
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, microsoft-dynamics, dynamics-crm-online

是否有可能将更多组织添加到“CRM 2011 Online”中，就像在“允许的 CRM”中实现的那样（使用助手或类似的东西）？我只想通过调用 CrmDiscoveryService 来获得一个包含多个组织的数组

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:22:49.777

如果您购买新的订阅/许可证，您可以。

另一种方法是在一个组织下添加新的业务单位。

# wpf - 即使我的班级没有更改任何属性，也实施 INotifyPropertyChanged

> ID：10529825
> 
> 赞同：0
> 
> 时间：2012-05-10T08:05:15.290
> 
> 标签：wpf, inotifypropertychanged

我知道绑定到 CLR 属性比 INotifyPropertyChanged 慢。

但是，如果我的视图模型在创建后没有更改它的任何属性，那么如果我在我的视图模型中提供 INotifyPropertyChanged 的​​空实现，它会给我带来任何性能提升吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:10:29.080

如果您不使用它，它不会给您带来任何性能优势。

如果仅在初始化时设置属性，您可以将绑定模式更改为 OneTime，这应该会减少开销。

这也是检查数据绑定性能的好页面

[http://msdn.microsoft.com/en-us/library/bb613546.aspx](http://msdn.microsoft.com/en-us/library/bb613546.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:53:07.100

使用 Binding Mode=OneTime 或实现 INotifyPropertyChanged 接口。

否则会有内存泄漏。请参阅[http://support.microsoft.com/kb/938416](http://support.microsoft.com/kb/938416)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:20:40.087

请注意，您**为所有绑定设置了 Mode=OneTime**。否则你可能会遇到一些内存泄漏问题。看到这个[帖子](http://code.logos.com/blog/2008/10/detecting_bindings_that_should_be_onetime.html)。

# php - preg_replace http 为 https

> ID：10529829
> 
> 赞同：3
> 
> 时间：2012-05-10T08:05:29.660
> 
> 标签：php, preg-replace

简而言之，我需要检查变量 $url 中的字符串是否是简单的 http，如果是，请将其替换为 https - 但我无法让它工作 - 任何想法：

```
$url="http://www.google.com"; // example http url ##
$url_replaced = preg_replace( '#^http://#','https://', $url ); // replace http with https ## 
```

干杯!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T08:08:12.153

为什么不`str_replace`呢？

```
$url="http://www.google.com"; // example http url ##
$url = str_replace('http://', 'https://', $url ); 
echo $url; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:08:07.243

`preg_replace()`在这里是不必要的。只需使用`str_replace()`.

```
str_replace('http://', 'https://', $url) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T13:20:22.490

您总是可以创建一个简单的函数来返回安全链接。如果您需要更改大量链接，则容易得多。

```
function secureLink($url){

$url = str_replace('http://', 'https://', $url ); 
return $url;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T15:18:43.550

不要使用`str_replace`，因为它可能会在中间替换字符串（如果 url 编码不正确）。

`preg_replace("/^http:/i", "https:", $url)`

注意`/i`不区分大小写的参数，并`^`说它必须以此字符串开头。

[http://sandbox.onlinephpfunctions.com/code/3c3882b4640dad9b6988881c420246193194e37e](http://sandbox.onlinephpfunctions.com/code/3c3882b4640dad9b6988881c420246193194e37e)

# javascript - js文件路径正确但无法加载

> ID：10529830
> 
> 赞同：1
> 
> 时间：2012-05-10T08:05:32.670
> 
> 标签：javascript, asp.net, asp.net-dynamic-data

我正在使用 ASP.Net 动态数据。我的 site.master 页面中有以下行。

```
<script src="../Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script> 
```

路径正确且文件存在。但是当我加载页面时，我可以在 firebug 的 Net 面板中看到它找不到文件。错误消息是“404 未找到”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:29:19.870

**`Approach - 1`**

您应该按照以下方式修改代码...

1.  `~/Scripts/jquery-ui-1.8.20.custom.min.js`
2.  `"<%#ResolveUrl("~/Scripts/jquery-ui-1.8.20.custom.min.js")%>"`

## 在第一种情况下，将 .. 替换为 ~

**`Approach - 2`**

或者，右键单击页面并选择`View Source`。单击脚本文件的链接并检查它是否导航到您的实际脚本文件？否则，如上所述进行必要的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:07:10.143

我不相信你的网址 :)

利用 ：

```
<script src='ResolveUrl("~/Scripts/jquery-ui-1.8.20.custom.min.js")' type="text/javascript"></script> 
```

另外，请验证 - 在加载此行之前加载 jQuery.js。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:35:31.613

当您`../`在 url 的开头使用时，它是以**浏览器的**当前 url 作为基础。因此，只有当您位于站点根目录的下一级目录时，该 url**才会起作用，如下所示：**

`http://myserver:myport/myvirtualdir/somedir/somepage.aspx`

或这个：

`http://myserver:myport/myvirtualdir/somedir/` *（使用默认页面或视图）*

然后，浏览器将加载以下脚本：

`http://myserver:myport/myvirtualdir/Scripts/jquery-ui-1.8.20.custom.min.js`

但是，如果您在**任何其他目录深度**，浏览器将使用错误的 url 作为脚本。就像您位于根默认页面一样：

`http://myserver:myport/myvirtualdir/Default.aspx`

然后浏览器会尝试从错误的目录加载脚本：

`http://myserver:myport/Scripts/jquery-ui-1.8.20.custom.min.js`

这就是为什么您需要在服务器端**解析**url，就像几个人已经说过的那样。这将为浏览器提供脚本的工作 url。文件路径和 url 之间存在差异。

您收到**404**的事实意味着浏览器尝试访问的 url 根本不正确，从浏览器的角度来看，这实际上是唯一有效的观点，即使您是开发人员, 确信你做对了...

```
<script src="<%#ResolveUrl("~/Scripts/jquery-ui-1.8.20.custom.min.js")%>"></script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T08:24:32.627

正如 Royi 提到的，请确保您`jquery.js`拥有`jquery-ui.js`

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script> 
```

这是一个提示。打开`site.Master`设计器，然后将 .js 文件从解决方案资源管理器拖放到设计器中。它将为您创建路径。

# javascript - 减少文本和背景图像之间的填充

> ID：10529831
> 
> 赞同：0
> 
> 时间：2012-05-10T08:05:37.883
> 
> 标签：javascript, html, css

[http://jsfiddle.net/9aaNh/](http://jsfiddle.net/9aaNh/)

请检查这个小提琴。我在 HOVER 中的文本和背景图像之间的间距有问题。

这很好用，但我不知道为什么我无法将图像放在文本的前面。在这个小提琴中出现的图像就在我要求它出现在文本之前的角落

这是我现在拥有的图像

![在此处输入图像描述](../Images/db53b2b548a90c48a56765f811b635d0.png)

而且我要

![在此处输入图像描述](../Images/7f11dd0815a33213cb2dadd17822ceaf.png)

我使用 Javascript 做到了，这里是下面的小提琴

[http://jsfiddle.net/jhilomhaldar1/bNcgH/1/](http://jsfiddle.net/jhilomhaldar1/bNcgH/1/)

但是这个代码的问题是在盒子上移动太多了。我真的很困惑，不知道该怎么办

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:17:36.007

只需将CSS更改为

```
#nav li:hover {
    background: url("http://i.imgur.com/IhyGC.png") no-repeat scroll 5px 12px #3EBBEC;
    color: #FFFFFF;
} 
```

希望你期待这个输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:12:55.147

将此添加到您的导航中

```
background-position: 0px 5px; 
```

它应该工作

# android - 将 Qt（针对 KDE）开发的游戏移植到 Android

> ID：10529832
> 
> 赞同：3
> 
> 时间：2012-05-10T08:05:39.443
> 
> 标签：android, qt, qml

我有用 Qt (QML) 为 KDE 编写的游戏（基于[Contract Bridge](http://en.wikipedia.org/wiki/Contract_bridge)的卡片），现在我应该将整个游戏移植到 Android 上（当然还有 Android 应用的 UI）。起初我考虑使用[Necessitas](http://labs.qt.nokia.com/2011/02/28/necessitas/)（Android 的 Qt 端口），但发现它仍在开发中，目前处于 3rd Alpha 阶段。我是 Android 开发（以及游戏开发）的新手，但我有使用 Java、C++ 和 HTML5、JavaScript 等 Web 技术的经验。

因此，根据我的技能，我考虑使用[MoSync](http://www.mosync.com/)。但我不确定我是否能够使用已经在 Qt 中开发的任何现有游戏模块（而在 MoSync 中可以从 JavaScript 调用 C++ 代码，反之亦然），因为我没有在Qt 版本的游戏，我首先必须参考该代码，然后我将使用相同的 Android 版本。所以我需要建议我应该从哪里开始。此外，我有 1.5 个月的时间来完成这个项目（没有任何工作时间限制），所以如果使用 Android API 从头开始​​工作是否是个好主意，也建议我。

如果我需要进一步阐述这个问题，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T08:05:37.760

我建议看看[V-Play](http://v-play.net/) (v-play.net)。它是一个基于 Qt/QML 的跨平台游戏引擎。如果您的游戏已经用 QML 编写，那么您的移植工作最少，因为您可以使用几乎所有现有代码，并使用 V-Play QML 游戏组件来处理多种显示分辨率和纵横比、动画、粒子、物理、多- 触摸、手势、路径查找等（[API 参考](http://v-play.net/doc/vplay-group.html)）。

您还可以查看[福利](http://v-play.net/benefits/#qtdeveloper)，了解 V-Play 是否满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T20:12:43.000

Qt 现在比以往任何时候都更加跨平台。而不是移植，只需对其稍作修改并继续使用 Qt，然后针对 iOS、Android 等进行编译。

# javascript - 使用 jQuery Mobile 的 OpenLayers

> ID：10529837
> 
> 赞同：2
> 
> 时间：2012-05-10T08:05:53.573
> 
> 标签：javascript, jquery-mobile, reference, openlayers

所以，在这个超链接下：[示例](http://garcia.cba.pl/openlayers/index2.html)我有一些使用 OpenLayers 和 jQuery Mobile 的示例。不幸的是，我对这个例子有一个问题：

```
ReferenceError: OpenLayers is not defined 
```

当然，当我删除 jQuery Mobile 库时一切正常，但是当我使用它们时会发生上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:32:59.290

我看了你的例子。

必须首先引用 OpenLayers.js。更改脚本包括顺序：

```
<script src="resources/js/mobile.js"></script>
<script src="resources/js/OpenLayers.js"></script> 
```

到：

```
<script src="resources/js/OpenLayers.js"></script>
<script src="resources/js/mobile.js"></script> 
```

# templates - 错字3 templavoila 模板在“使用模板设计”下拉菜单中不可用

> ID：10529839
> 
> 赞同：0
> 
> 时间：2012-05-10T08:06:01.140
> 
> 标签：templates, typo3

我为我的网站创建了一个新的 TemplaVoila 模板。现在我想将此模板添加到使用模板设计下拉菜单中 Apereance 下的*ROOT*页面*。*不幸的是，模板没有显示在下拉列表中。我该怎么做才能有机会在下拉菜单中选择模板？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:42:54.040

确保在 ROOT 页面属性中，您在字段`General Record Storage Page`（`Resources`选项卡）中使用 TemplaVoila'a 结构和模板指向 sysfolder*

# javascript - 使用 var t=!0 / var t=!1 表示真/假有多安全？他们总是返回真布尔真/假吗？

> ID：10529841
> 
> 赞同：1
> 
> 时间：2012-05-10T08:06:09.053
> 
> 标签：javascript, shorthand

我们中的许多人已经看到/使用以下内容：

```
var t=!0; (t will equal true)
var t=!1; (t will equal false) 
```

这种评估真/假的方法有多安全？

我看到谷歌一直在使用它。

这些总是会返回**布尔值**真/假吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:10:53.823

是的：

> 11.4.9 逻辑非运算符 (!)
> 
> 产生式 UnaryExpression : ! UnaryExpression 的评估如下：
> 
> 1.  令 expr 为计算 UnaryExpression 的结果。
>     
>     
> 2.  让 oldValue 为 ToBoolean(GetValue(expr))。
>     
>     
> 3.  如果 oldValue 为真，则返回假。
>     
>     
> 4.  返回真。

来源：[http ://es5.github.com/x11.html#x11.4.9](http://es5.github.com/x11.html#x11.4.9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:10:26.270

是的，他们总会回来`true`的`false`。

更具体地说，*将*`!x`返回`true`任何“虚假”值（、等），反之则返回任何*“*真实”值。`undefined``""``false`

 *一个更常见的习惯用法是`!!x`将任何“虚假”值转换为严格`false`，任何“真实”值转换为严格`true`- 换句话说，它就像一个布尔值的“类型转换”。*

# c++ - OpenPrinterAPI 挂钩

> ID：10529844
> 
> 赞同：1
> 
> 时间：2012-05-10T08:06:23.670
> 
> 标签：c++, visual-c++, dll

我正在连接到 OpenPrinter API，但它没有得到 Hook，我的代码如下。我无法挂钩此功能，如果某些参数（签名）不正确，请帮助我....

```
typedef BOOL (WINAPI *OpenPrinterANext)(__in_opt LPSTR pPrinterName,__out LPHANDLE  phPrinter,__in_opt LPPRINTER_DEFAULTSA pDefault);
OpenPrinterANext Real_OpenPrinterA = NULL;

typedef BOOL (WINAPI *OpenPrinterWNext)(__in_opt LPWSTR pPrinterName,__out LPHANDLE phPrinter,__in_opt LPPRINTER_DEFAULTSW pDefault);
OpenPrinterWNext Real_OpenPrinterW = NULL;

BOOL WINAPI OpenPrinterACallback(__in_opt LPSTR pPrinterName,__out LPHANDLE         phPrinter,__in_opt LPPRINTER_DEFAULTSA pDefault)
{
 MessageBoxA(NULL,"OpenPrinterA Function Called","Info",MB_OK);
 return Real_OpenPrinterA(pPrinterName,phPrinter, pDefault);
}

BOOL WINAPI OpenPrinterWCallback(__in_opt LPWSTR pPrinterName,__out LPHANDLE phPrinter,__in_opt LPPRINTER_DEFAULTSW pDefault)
{
 MessageBoxA(NULL,"OpenPrinterW Function Called","Info",MB_OK);
 return Real_OpenPrinterW(pPrinterName,phPrinter, pDefault);
}
 BOOL APIENTRY DllMain( HMODULE hModule,
                   DWORD  ul_reason_for_call,
                   LPVOID lpReserved
                 )
{

switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
                        if (MH_Initialize() != MH_OK)
                        {
                            MessageBoxW(NULL,L"Failed Initialize",L"Info!",MB_ICONWARNING|MB_OK);   
                        }            
                        if 
                        if (MH_CreateHook(&OpenPrinterA, &OpenPrinterACallback, reinterpret_cast<void**>(&Real_OpenPrinterA)) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Printing Disabled by hooking",L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        if (MH_EnableHook(&OpenPrinterA) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Failed EnableHook Printing",L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        if (MH_CreateHook(&OpenPrinterW, &OpenPrinterWCallback, reinterpret_cast<void**>(&Real_OpenPrinterW)) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Printing Disabled by hooking",L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        if (MH_EnableHook(&OpenPrinterW) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Failed EnableHook Printing",L"Info!",MB_ICONWARNING|MB_OK);
                        }
break ;

case DLL_PROCESS_DETACH:
                       if (MH_DisableHook(&OpenPrinterA) != MH_OK)
                       {

                       }
                       if (MH_DisableHook(&OpenPrinterW) != MH_OK)
                       {

                       }
                       if (MH_Uninitialize() != MH_OK)
                       {

                       }
                       break;
}

return TRUE;
} 
```

请帮助我
提前谢谢

# ios - 校正图像方向

> ID：10529845
> 
> 赞同：0
> 
> 时间：2012-05-10T08:06:24.073
> 
> 标签：ios, image-processing

我有一张可以在不同方向上拍摄的图像。我的问题是，在拍摄完图像后，我必须将其旋转到直立位置。我最初的计划是在图像的左上角放置一个标记，找到它的位置，然后旋转它。但是，如果我采用这种方法，我必须研究对象/特征提取。这个问题还有其他简单的解决方案吗？顺便说一句，我需要用它制作一个 iOS 应用程序

预先感谢！

# javascript - 是否有其他方法可以打印出调试消息而无需在 javascript 中换行内容？

> ID：10529846
> 
> 赞同：1
> 
> 时间：2012-05-10T08:06:26.417
> 
> 标签：javascript

我想知道是否有许多其他方法可以打印出调试消息而不会换行内容：

```
 (function(){
          var r="";
          console.log("start: ");
        for (var i = 0; i < 10; i++) {

                        console.log(i + " ");; //this will line-break the content
        }

        console.log("finish");

})(); 
```

* * *

**这不会破坏内容：****但是我必须将所有结果添加到一个变量中，然后最后打印出整个内容，想知道是否有其他方法可以直接在 LOOP 内打印而无需换行内容...

谢谢

```
 (function(){
          var r="";
          console.log("start: ");
        for (var i = 0; i < 10; i++) {

                       r+= (i + " "); //this will NOT break the content
        }
        console.log(r);
        console.log("finish");

})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:10:38.907

这取决于你需要什么。`console`对象有很多方法，不仅`log()`.

您可以将所有数据放在某个对象中并调用`console.dir(someObj)`例如等。

您可以在[MDN上找到更多信息](https://developer.mozilla.org/en/DOM/console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:10:46.693

*   `console`您可以使用文本区域制作自己的“ ”。
*   您可以将值添加到数组 ( `debugMessages.push(i)`) 然后加入它们 ( `debugMessages.join(" ")`)

# php - PHP：一遍又一遍地做同样的查询？

> ID：10529848
> 
> 赞同：0
> 
> 时间：2012-05-10T08:06:34.340
> 
> 标签：php, mysql

我有一个产品类，当实例化时，它从“产品”表中获取数据，它还在其中创建一个“类别”对象（产品-> 类别），该对象从类别表中获取数据。我的问题是，当列出来自同一类别的多个产品时会发生什么，为了创建类别对象进行多个相等的查询，因为它们来自同一类别。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:14:42.200

在 SQL 中使用 JOIN：

```
SELECT *
FROM product
LEFT JOIN category ON product.category_id = category.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:18:12.777

您必须构建一个拦截和/或缓存查询的层。当它看到您正在请求具有特定 ID 的类别时，它应该从其缓存中显示该类别，如果它不存在，它应该检索然后缓存它，因此在请求期间不会查询同一行不止一次。

手动执行此操作是[行不通的](http://en.wikipedia.org/wiki/Not_invented_here)，只需选择一个体面的[ORM](https://stackoverflow.com/questions/108699/good-php-orm-library)即可为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:17:31.217

使用创建对象的工厂，并为要在构造函数中传递的产品/类别的数据提供选项。工厂加载将列出的所有产品的数据，然后实例化产品对象，提供已经获取的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:28:11.063

在循环内部执行 sql 查询不是一个好习惯。

您可以做的是将产品表与类别表左连接。

```
$select = SELECT *
FROM product
LEFT JOIN category ON product.category_id = category.id; 
```

然后执行查询，然后将您的产品分类为类别基础，就像您可以运行循环一样

```
$result = mysql_query($select);
while($data = mysql_fetch_assoc($result)){

   $product_info['product_name'] = $data['product_name'];
   $product_info['price'] = $data['product_price'];

   $product[$data['category']][$data['product_id']] = $product_info;
} 
```

这个循环将发挥神奇作用，它可以帮助您对属于同一类别的产品进行分类。您可以以更有效的方式显示您的数据。

# c# - 在类范围内定义和实例化变量如何在内部解释

> ID：10529850
> 
> 赞同：0
> 
> 时间：2012-05-10T08:06:42.423
> 
> 标签：c#, compiler-construction, instantiation

Class1 声明一个变量并实例化它。定义和实例化语句允许是类范围。

```
class class1
{
public bool variable = false;
} 
```

使用相同的逻辑为什么 Class2 不能实例化变量。为什么不允许实例化语句在这样的类范围内。

```
class class2 : class1
{
variable = false;
} 
```

**我很感兴趣，如果这背后有任何合乎逻辑的解释。**可能是编译器以某种特殊的方式解释了这样的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:09:10.830

除了内联初始化之外，类主体中不允许使用不包含在构造函数、方法或属性等内容中的语句。

如果要将变量初始化为其他内容，请将其粘贴在构造函数中（这是构造函数的用途）：

```
public class Class2 : Class1
{
    public Class2()
    {
        variable = false;
    }
} 
```

另一个类似的问题：

[仅在方法中声明，但声明呢？](https://stackoverflow.com/questions/3866055/statements-only-in-methods-but-what-about-declarations)

总之，声明只允许在类范围内。内联初始化等同于在构造函数中初始化成员变量——我猜这是作为语法糖添加的，因为内联初始化对于许多语言来说都是存货交易。

还有一个关于命名的快速说明，类通常是标题大小写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:08:54.357

从来没有看到你的第二种情况有问题，除了在**第二种**情况下你没有定义变量的类型。

**编辑**

我想我误解了你的问题：

该成员`variable`是基类定义的一部分。您不能通过任何方法访问类的*公共* 成员。这就对了。

# sharepoint - 在 SharePoint 的列中设置值

> ID：10529853
> 
> 赞同：1
> 
> 时间：2012-05-10T08:06:54.840
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个带有列的自定义列表。

```
1\. Location 
2\. Location_MMYY(Not visible on form) 
```

在此列表的新项目表单中，单击保存按钮时，我想在值字段 2 下方设置。

```
Value from field 1 + "_" + Current Month(MM) + Current Year(YY) 
```

我被告知不允许自定义编码。请帮助我，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:33:09.180

Location_MMYY 应该是一个计算字段。在字段公式中给出如下内容：

```
=Location&"_"&MONTH(Edited)&DAY(Edited) 
```

这将把该字段中最后一次编辑的值和月份和日期放在一起。

# java - 覆盖 ecplise ui 视图扩展点中的视图

> ID：10529854
> 
> 赞同：1
> 
> 时间：2012-05-10T08:06:58.803
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我正在开发一个由几个插件组成的 Eclipse RCP 应用程序。其中一个插件（“common ui”插件）提供了一个由其他几个插件使用的视图。视图在通用 ui 插件的 plugin.xml 中定义，以及它的工具栏和上下文菜单贡献（在菜单扩展点中）。

但是，有一个插件，我们称之为“特殊业务插件”，它需要对通用 ui 插件提供的视图进行一些补充。因此，我从通用 ui viewpart 类扩展了 viewpart 类（以添加额外的列和自己的标签和内容提供程序）。

扩展视图部分需要与公共视图部分相同的菜单贡献。当然，我不想写两次，我只想使用通用插件的plugin.xml中定义的菜单贡献。但是，它们绑定到公共视图部分的视图 ID。如果我对特殊视图部分使用相同的视图 ID，则不会打开特殊视图部分，而是打开公共视图部分（当然，因为它们共享相同的 ID）。如果我使用不同的 id，我必须写两次菜单贡献，这是我想避免的。

那么，当我想使用与要覆盖的视图相同的菜单贡献时，如何覆盖由另一个插件定义的视图？

常用插件的plugin.xml

```
<plugin>
  <extension point="org.eclipse.ui.views">
    <view
        allowMultiple="true"
        category="org.eclipse.ui"
        class="com.mycompany.client.common.ui.view.CommonViewPart"
        icon="icons/CommonView.gif"
        id="com.mycompany.client.common.ui.view.CommonView"
        name="%CommonView"
        restorable="false">
    </view>
  </extension>
  <extension point="org.eclipse.ui.menus">
    <menuContribution
        locationURI="toolbar:com.mycompany.client.common.ui.view.CommonView">
      <command
           commandId="com.mycompany.client.common.ui.handler.RefreshCommand"
           label="%refresh"
           style="push">
      </command>
    </menuContribution>
  </extenstion>
</plugin> 
```

特殊插件的plugin.xml

```
<plugin>
  <extension point="org.eclipse.ui.views">
    <view
        allowMultiple="true"
        category="org.eclipse.ui"
        class="com.mycompany.client.special.view.SpecialViewPart"
        icon="icons/CommonView.gif"
        id="com.mycompany.client.common.ui.view.CommonView"
        name="%CommonView"
        restorable="false">
    </view>
  </extension>
</plugin> 
```

视图由具有以下代码行的处理程序打开：

常见的：

```
AbstractViewPart view = (AbstractViewPart).
    getActiveWorkbenchPage(event).showView(CommonViewPart.ID, null,
    IWorkbenchPage.VIEW_VISIBLE); 
```

特别的：

```
AbstractViewPart view = (AbstractViewPart).
    getActiveWorkbenchPage(event).showView(SpecialViewPart.ID, null,
    IWorkbenchPage.VIEW_VISIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:14:14.323

在这种情况下，您不能用另一个定义覆盖一个定义。有几个选项。

1.  [在某些情况下，您可以使用产品定制](http://wiki.eclipse.org/Product_Customization)之类的东西来删除通用视图定义。这对你正在做的事情来说是相当沉重的。
2.  在单独的小插件中提供通用视图定义。然后不要在包含您的专业视图的 RCP 产品中包含那个小插件。

# django-admin - Django admin + MPTT：过滤父节点时如何显示子节点？

> ID：10529858
> 
> 赞同：1
> 
> 时间：2012-05-10T08:07:14.403
> 
> 标签：django-admin, django-mptt

我设置了 2 个模型文章和分类。分类是一个 MPTTModel 子类。

一切正常，除了一件事：如果我选择一个没有链接到它的文章的父节点，它将不会显示链接到子节点的文章。

所以我正在尝试编写我的自定义过滤器，但我遇到了查询集过滤。如果单击父节点，如何过滤此查询集以显示链接到子节点的所有文章？：

```
class TaxonomyFilter(SimpleListFilter):
    """
    Return incremented taxonomy list. Filtering by parent node display all children.
    """
    title = ('Index')
    parameter_name = 'node_id'

    def lookups(self, request, model_admin):
        taxos = Taxonomy.objects.all()
        leafs = []
        for taxo in taxos:
            leafs.append((taxo.id,(taxo.name)))

        return leafs

    def queryset(self,request,queryset):
        """
        Filter list by displaying children if parent node has any.
        """
        if self.value():
            return queryset.filter()  
        else:
            return queryset 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:28:57.187

不确定是否可以回答我们自己的问题，但对于其他面临同样问题的人来说，这里是“工作但不是防弹”片段

```
 def queryset(self,request,queryset):
    """
    Filter list by displaying children if parent node has any.
    """
    descendants = Taxonomy.objects.get(pk=self.value()).get_descendants(include_self=True)

    descendant_list = []
    for descendant in descendants:
        descendant_list.append(descendant.id)

    return queryset.filter(taxonomy__in=descendant_list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:38:43.407

Julius：这有点低级，但比您的解决方案执行的查询更少（2 个而不是 3 个）

```
def queryset(self, request, queryset):
    """
    Filter list by displaying children if parent node has any.
    """
    t = Taxonomy.objects.get(pk=self.value())

    return queryset.filter(taxonomy__lft__gte=t.lft, taxonomy__rght__lte=t.rght) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:24:10.500

在`django-mptt`某些情况下，craigds 描述的查询可能不起作用，因为左右叶属性在任何方面都不是唯一的。为避免错误匹配，您可以使用`tree_id`附带的字段`django-mptt`：

```
t = Taxonomy.objects.get(pk=self.value())

return queryset.filter(
    taxonomy__tree_id=t.tree_id,
    taxonomy__lft__gte=t.lft,
    taxonomy__rght__lte=t.rght
) 
```

# ruby - 如何在 jekyll markdown 博客中包含视频

> ID：10529859
> 
> 赞同：64
> 
> 时间：2012-05-10T08:07:15.060
> 
> 标签：ruby, video, markdown, highlight, jekyll

我刚开始使用 jekyll 写博客。我用markdown写我的帖子。现在，我想在我的帖子中加入一个 youtube 视频。我怎样才能做到这一点？

另外，我不太喜欢 jekyll 默认提供的 pygments 高亮。无论如何我可以将其更改为其他样式吗？如果是的话，你能指点我一些不错的样式/插件吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-10T08:34:44.000

您应该能够将用于嵌入的 HTML 直接放入您的降价中。在视频下方，有一个“分享”按钮，点击它，然后是“嵌入”按钮，它应该给你一些看起来有点像的东西：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe> 
```

只需将其复制并粘贴到您的帖子中，Markdown 预处理器就不会触及它。

* * *

[对于 Pygments，这个存储库](https://github.com/richleland/pygments-css)中有一大堆用于各种颜色主题的 CSS 样式表，您可以尝试使用它们。（请注意，您必须替换`.codehilite`为`.highlight`这些才能与 Jekyll 一起使用。）

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-05T02:49:39.873

我做了类似的事情，但就我而言，简单的复制和粘贴不起作用。错误信息如下：

> REXML 无法解析此 XML/HTML：

为避免此错误，我`allowfullscreen`从复制的源中删除如下：

```
<iframe width="480" height="360" src="http://www.youtube.com/embed/WO82PoAczTc" frameborder="0"> </iframe> 
```

在结束之前添加一个空格很重要`</iframe>`。

然后，我成功地将视频嵌入到我的网站中。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-22T14:16:03.620

插入 youtube 视频的 html 代码可以使用[https://gist.github.com/1805814](https://gist.github.com/1805814)中描述的简单插件在 Jekyll 中生成。

语法变得如此简单：

```
{% youtube oHg5SJYRHA0 %} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-02T11:13:33.410

就我而言，问题已通过 jQuery 解决：

**jQuery**

```
$('.x-frame.video').each(function() {
  $(this).after("<iframe class=\"video\" src=\"" + ($(this).attr('data-video')) + "\" frameborder=\"0\"></iframe>");
}); 
```

**用法**

```
<div class="x-frame video" data-video="http://player.vimeo.com/video/52302939"> </div> 
```

请注意，中间需要空格`<div> </div>`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-27T22:27:40.973

WordPres 的一个更好的功能是您可以将 Youtube URL 粘贴到内容中（在新行上），然后 WordPress 将其转换为嵌入代码。

以下代码对 Jekyll 执行相同的操作。只需将此代码放在您的页脚中（或使用 Jekyll 包含），所有带有 Youtube URL 的段落都会自动转换为 Vanilla JS 的响应式 Youtube 嵌入。

```
<style>
.videoWrapper {position: relative; padding-bottom: 56.333%; height: 0;}
.videoWrapper iframe {position: absolute; top: 0; left: 0; width: 100%; height: 100%;}    
</style>

<script>
function getId(url) {
    var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    var match = url.match(regExp);
    if (match && match[2].length == 11) {
        return match[2];
    } else {
        return 'error';
    }
}
function yt_url2embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        var pattern = /^((http|https|ftp):\/\/)/;
        if(pattern.test(p[i].innerHTML)) {
            var myId = getId(p[i].innerHTML);
            p[i].innerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + myId + '?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe></div>';
        }
    }
}
yt_url2embed();
</script> 
```

尽管仅将 HTML 代码添加到您的 Markdown 是一个非常好的（甚至可能更好）且有效的解决方案，但此解决方案可能对用户更友好。

（[*来源*](http://jekyllcodex.org/without-plugin/open-embed/)）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-29T05:43:56.523

您多久发现自己在谷歌上搜索“**如何在 Markdown 中嵌入视频？** ”

虽然不可能在 Markdown 中嵌入视频，但最好和最简单的方法是从视频中提取帧。为了更轻松地将视频添加到您的降价文件中，我认为下面的 jekyll 插件会帮助您，它会自动解析图像块内的视频链接。

> jekyll-spaceship - 一个 Jekyll 插件，为 table、mathjax、plantuml、emoji、youtube、vimeo、dailymotion 等提供强大的支持。

[https://github.com/jeffreytse/jekyll-spaceship](https://github.com/jeffreytse/jekyll-spaceship)

目前，提供了这些视频链接解析：

*   YouTube
*   维密欧
*   每日运动
*   ...

有两种方法可以在 Jekyll 博客页面中嵌入视频：

内联样式：

```
![]({video-link}) 
```

参考风格：

```
![][{reference}]

[{reference}]: {video-link} 
```

然后，您成功地将视频嵌入到您的网站中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-11T04:24:33.257

在当今：

```
<iframe width="840" height="473" src="https://www.youtube.com/embed/IQf-vtIC-Uc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> 
```

或者

右键单击浏览器中的视频并复制嵌入代码。 [![截屏](../Images/ae9e39c00da84d79ba69b8d723bfa27d.png)](https://i.stack.imgur.com/S4sFO.png)

# c# - 如何等待 IScheduler.Schedule？

> ID：10529860
> 
> 赞同：1
> 
> 时间：2012-05-10T08:07:15.323
> 
> 标签：c#, system.reactive

等待安排在 a 上的东西的最佳方式是什么`IScheduler`，即是否有任何优雅的方式来获得未来或 IObservable 的日程安排电话？

```
scheduler.Schedule(() => Thread.Sleep(2000));
// wait for call to finish 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:17:04.477

解决了`Observable.Start().FirstOrDefault()`

# php - 项目类的PHP数组映射和方法

> ID：10529861
> 
> 赞同：0
> 
> 时间：2012-05-10T08:07:17.570
> 
> 标签：php, array-map

我有数组：

```
array(
  0 => new SomeClass(1),
  1 => new SomeClass(2),
  2 => new SomeClass(3),
) 
```

如何使用数组映射为数组中的每个项目调用 SomeClass 类的方法（非静态）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:12:47.163

有一种比[`array_map`](http://php.net/array_map)or更具可读性的方式[`array_walk`](http://php.net/array_walk)：

```
$instances = array(
  0 => new SomeClass(1),
  1 => new SomeClass(2),
  2 => new SomeClass(3),
)

foreach($instances as $instance)
{
    $instance->foo();
} 
```

但如果你真的想要`array_map`：

```
array_map(function($instance) {
    $instance->foo();
}, $instances); 
```

# python - 我应该使用字典还是列表？

> ID：10529863
> 
> 赞同：0
> 
> 时间：2012-05-10T08:07:19.347
> 
> 标签：python, performance, loops

我想遍历一个大的二维列表：

```
authors = [["Bob", "Lisa"], ["Alice", "Bob"], ["Molly", "Jim"], ... ] 
```

并获得一个列表，其中包含作者中出现的所有名称。

当我遍历列表时，我需要一个容器来存储我已经看过的名称，我想知道我应该使用列表还是字典：

有一个清单：

```
seen = []
for author_list in authors:
    for author in author_list:
        if not author in seen:
            seen.append(author)
result = seen 
```

用字典：

```
seen = {}
for author_list in authors:
    for author in author_list:
        if not author in seen:
            seen[author] = True
result = seen.keys() 
```

哪个更快？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T08:16:59.250

你真的想要一个`set`. 集合比列表更快，因为它们只能包含唯一元素，这允许它们被实现为哈希表。哈希表允许及时进行成员资格测试 ( `if element in my_set`) `O(1)`。这与列表形成对比，列表中检查元素是否在列表中的唯一方法是依次（`O(n)`及时）检查列表中的每个元素。

A`dict`与 a 相似`set`，两者都只允许唯一键，并且都实现为哈希表。它们都允许`O(1)`成员资格测试。不同之处在于 a`set`只有键，而 a 同时`dict`具有键和值（这是您在此应用程序中不需要的额外开销。）

* * *

使用`set`, 并将嵌套的 for 循环替换为 an`itertools.chain()`以将 2D 列表展平为 1D 列表：

```
import itertools
seen = set()
for author in itertools.chain(*authors):
    seen.add(author) 
```

或更短：

```
import itertools
seen = set( itertools.chain(*authors) ) 
```

编辑（感谢@jamylak）对大型列表更有效的内存：

```
import itertools
seen = set( itertools.chain.from_iterable(authors) ) 
```

* * *

列表列表示例：

```
>>> a = [[1,2],[1,2],[1,2],[3,4]]
>>> set ( itertools.chain(*a) )
set([1, 2, 3, 4]) 
```

* * *

PS：如果您不想找到所有唯一的作者，而是想**计算**您看到每个作者的次数，请使用 a `collections.Counter`，一种为计算事物而优化的特殊字典。

下面是一个对字符串中的字符进行计数的示例：

```
>>> a = "DEADBEEF CAFEBABE"
>>> import collections
>>> collections.Counter(a)
Counter({'E': 5, 'A': 3, 'B': 3, 'D': 2, 'F': 2, ' ': 1, 'C': 1}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:15:03.527

`set`应该更快。

```
>>> authors = [["Bob", "Lisa"], ["Alice", "Bob"], ["Molly", "Jim"]]
>>> from itertools import chain
>>> set(chain(*authors))
set(['Lisa', 'Bob', 'Jim', 'Molly', 'Alice']) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T08:15:59.420

使用 a`dict`或 a`set`比使用 a[快得多](http://wiki.python.org/moin/TimeComplexity)`list`

```
import itertools
result = set(itertools.chain.from_iterable(authors)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T08:13:00.080

您可以使用设置 -

```
from sets import Set

seen = Set()

for author_list in authors:
    for author in author_list:
        seen.add(author)

result = seen 
```

这样您就可以逃避“if”检查，因此解决方案会更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T08:16:19.563

如果您关心查找的性能，列表中的查找是**O(n)**，而字典中的查找摊销到**O(1)**。

[您可以在此处](https://stackoverflow.com/questions/513882/python-list-vs-dict-for-look-up-table)找到更多信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T08:35:14.590

列表只是按特定顺序存储一堆项目。把你的作者名单想象成一长串的鸽子箱，在箱子里的几篇论文上写着作者的名字。名字按你输入的顺序排列，你可以很容易地在任何特定的分类中找到作者，但是如果你想知道某个特定的作者是否在任何分类中，那么你必须逐个查看直到找到你要的名字。您也可以在任意数量的鸽笼中使用相同的名称。

字典有点像电话簿。给定作者的姓名，您可以非常快速地查看作者是否在电话簿中，并找到与它一起列出的电话号码。但是您只能将每个作者包括一次（只有一个电话号码），并且您不能按照您喜欢的任何顺序将作者放入其中，它们必须按照电话簿有意义的顺序排列。在真正的电话簿中，该顺序是按字母顺序排列的；在 Python 字典中，顺序是完全不可预测的（当您向字典中添加或删除内容时它会发生变化），但 Python 在字典中查找条目的速度甚至比在电话簿中查找条目的速度还要快。

另一方面，集合就像电话簿，*只*列出姓名，而不是电话号码。您仍然不能多次包含相同的名称，它要么在集合中，要么不在集合中。而且您仍然不能将名称在集合中的顺序用于任何有用的东西。但是您可以非常快速地检查名称是否在集合中。

* * *

鉴于您的用例，一组似乎是显而易见的选择。你不关心你看过作者的顺序，或者你看过每个作者的次数，你只需要快速检查你以前是否看过某个作者。

列表不适合这种情况；他们努力以您指定的任何顺序记住重复项，而且搜索速度很慢。但是您也不需要将键映射到值，这是字典所做的。回到电话簿的类比，你没有任何相当于“电话号码”的东西。在您的字典示例中，您所做的相当于编写电话簿，其中每个人的号码都列为`True`，那么为什么还要列出电话号码呢？

一套，OTOH，正是你所需要的。

# android - Android 自定义列表视图中的按钮

> ID：10529876
> 
> 赞同：0
> 
> 时间：2012-05-10T08:07:59.017
> 
> 标签：android

> **可能重复：**
> [如何使用动态数据实时更新 Android ListView？](https://stackoverflow.com/questions/5846385/how-to-update-android-listview-with-dynamic-data-in-real-time)

我有一个自定义`listview`使用 a`time value`和一些`buttons`点击它。我目前通过`notifyDataSetChanged()`一秒处理程序方法每秒更新时间。

这在更新时间方面效果很好。不幸的是，这意味着每秒都会重新创建视图。这意味着我的按钮按下操作不是很敏感，因为每次重新生成视图时，按钮都会重置。因此，如果您在视图更改时按下按钮，则按下无效，您必须释放按钮然后再次按下。长按问题更严重，因为在重新生成视图之前没有足够的时间来注册长按。所以长按永远不会发生。

有没有办法更改列表视图中的数据而不必重新生成整个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:26:46.653

尝试实现一些可以实时呈现自身的东西，例如 FlashTextView。所以每次你的时钟需要更新这个textview中的值时，你可以从这些flash-textview中调用一些方法来改变自己，而不用触及ListView和listview的整个项目。

# android - Random string on button press

> ID：10529879
> 
> 赞同：0
> 
> 时间：2012-05-10T08:08:08.630
> 
> 标签：android, arrays, string, random

I am trying to get a random string from an array when I press a button.

So far it works with getting a random string when the application starts up, but I cannot get it to work on press of a button after startup.

EDIT: It now crashes on start up??

My new code:

```
private String[] myString;
private static final Random rgenerator = new Random();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView) findViewById(R.id.joke);
  Resources res = getResources();

    myString = res.getStringArray(R.array.Jokes); 

    String q = myString[rgenerator.nextInt(myString.length)];    
    tv.setText(q);
    Button btn = (Button)findViewById(R.id.button);

 btn.setOnClickListener(new OnClickListener() { 
public void onClick(View v) {

    myString = res.getStringArray(R.array.Jokes); 

    String q = myString[rgenerator.nextInt(myString.length)];    
    tv.setText(q);
  }
});

}
} 
```

Logcat says:

```
03-31 22:47:35.777: W/dalvikvm(1152): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
03-31 22:47:35.777: E/AndroidRuntime(1152): Uncaught handler: thread main exiting due to uncaught exception
03-31 22:47:35.903: E/AndroidRuntime(1152): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.jc.dkjokes/com.jc.dkjokes.DanskeJokesMain}: java.lang.NullPointerException
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.os.Looper.loop(Looper.java:123)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread.main(ActivityThread.java:4363)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at java.lang.reflect.Method.invokeNative(Native Method)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at java.lang.reflect.Method.invoke(Method.java:521)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at dalvik.system.NativeStart.main(Native Method)
03-31 22:47:35.903: E/AndroidRuntime(1152): Caused by: java.lang.NullPointerException
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.Activity.findViewById(Activity.java:1612)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at com.jc.dkjokes.DanskeJokesMain.<init>(DanskeJokesMain.java:17)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at java.lang.Class.newInstanceImpl(Native Method)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at java.lang.Class.newInstance(Class.java:1479)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-31 22:47:35.903: E/AndroidRuntime(1152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
03-31 22:47:35.903: E/AndroidRuntime(1152):     ... 11 more
03-31 22:47:35.963: I/dalvikvm(1152): threadid=7: reacting to signal 3
03-31 22:47:36.148: I/dalvikvm(1152): Wrote stack trace to '/data/anr/traces.txt' 
```

*   SnoX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:13:49.253

you have to define onClickListener() for generating string on button click, Something like this,

```
 Button btn = (Button)findViewbyId(R.id.yourbuttonid);
    btn.setonclickListener(new onClickListner(){
          public void onclick()
          {
               //write your oncreate code here again
          }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:13:13.483

To achieve that you need to declare one button in your main.xml file then you have to initialize that in your activity. Then after you have to set on click event listener on that button.

```
<Button
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:id="@+id/buttonClick"
    /> 
```

**Code**

```
TextView tv = (TextView) findViewById(R.id.joke);
Button btn = (Button)findViewbyId(R.id.buttonClick);
    btn.setonclickListener(new onClickListner(){
          public void onclick()
          {
               myString =  getResources().getStringArray(R.array.Jokes); 
               String q = myString[rgenerator.nextInt(myString.length)];
               tv.setText(q);
          }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:17:03.697

You haven't defined an `onClickListener` for your `Button`. Do so as follows:

```
Button button = findViewById(R.id.button);
TextView tv = findViewById(R.id.joke);

button.setOnClickListener(new OnClickListener()  
    public void onClick(View view) {
        String[] myString = getResources().getStringArray(R.array.Jokes); 
        tv.setText(myString[rgenerator.nextInt(myString.length)]);
    }
}); 
```

# c# - p/invoke 的结构变量的内存对齐 - 字符串丢失最后一个字符

> ID：10529880
> 
> 赞同：3
> 
> 时间：2012-05-10T08:08:10.237
> 
> 标签：c#, interop, pinvoke, btrieve

我正在尝试通过 P/Invoke 使用 C# 代码中的 btrieve API 从 Btrieve (v6.15) 数据库中读取记录。

我已经设法读取记录，但是在阅读时会裁剪字符串的最后一个字符。如果我增加数据结构中的字符串大小，那么字符串会被正确读取，但这次下一个变量没有被正确读取。

这里可能有什么问题？

Btrieve 函数声明：

```
 [DllImport("WBTRV32.dll", CharSet = CharSet.Ansi)]
    static extern short BTRCALL(ushort operation,
        [MarshalAs(UnmanagedType.LPArray, SizeConst = 128)] byte[] posBlk,
        [MarshalAs(UnmanagedType.Struct, SizeConst = 255)] 
        ref RecordBuffer databuffer, 
        ref int dataLength, 
        [MarshalAs(UnmanagedType.LPArray, SizeConst = 255)] char[] keyBffer, 
        ushort keyLength, ushort keyNum); 
```

我的结构定义：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1, CharSet = CharSet.Ansi)]
    public struct RecordBuffer
    {
        public short docType;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 15)]
        public string docDescPlural;
        public short sorting;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 15)]
        public string docDescSingle;
        public short copyOtherThanSrc;
        public double defaultNotebookNo;
    } 
```

这些是来自 Btreive 数据库管理器的列的大小：

1.  有符号整数，2 个字节
2.  字符串，15 个字节
3.  有符号整数，2 个字节
4.  字符串，15 个字节
5.  有符号整数，2 个字节
6.  浮点数，8 个字节

编码：

```
 private void PopulateAllRecords(string fileName)
    {
        byte[] positionBlock = new byte[128];
        char[] fileNameArray = fileName.ToCharArray();

        // Open file
        RecordBuffer dataBuffer = new RecordBuffer();
        int bufferLength = System.Runtime.InteropServices.Marshal.SizeOf(dataBuffer);
        BReturnCodes status = (BReturnCodes) BTRCALL(
            BOPEN, positionBlock, ref dataBuffer, ref bufferLength, fileNameArray, 0, 0);

        if (status == BReturnCodes.NO_ERROR)
        {
            // Get first record
            dataBuffer = new RecordBuffer();
            status = (BReturnCodes) BTRCALL(
                BGETFIRST, positionBlock, ref dataBuffer, ref bufferLength, fileNameArray, 0, 0);

            if (status == BReturnCodes.NO_ERROR)
            {
                AddListViewItem(dataBuffer);
            }

            // Get subsequent records
            while (status == BReturnCodes.NO_ERROR) // BReturnCodes.END_OF_FILE or an error will occur
            {
                dataBuffer = new RecordBuffer();
                status = (BReturnCodes)BTRCALL(
                    BGETNEXT, positionBlock, ref dataBuffer, ref bufferLength, fileNameArray, 0, 0);

                if (status == BReturnCodes.NO_ERROR)
                {
                    AddListViewItem(dataBuffer);                        
                }
            }
        }
        else
        {
            MessageBox.Show("Error occured while opening file: " + status.ToString());
        }
    }

    private void AddListViewItem(RecordBuffer buffer)
    {
        ListViewItem item = new ListViewItem(buffer.docType.ToString());
        item.SubItems.Add(buffer.docDescPlural);
        item.SubItems.Add(buffer.sorting.ToString());
        item.SubItems.Add(buffer.docDescSingle);
        item.SubItems.Add(buffer.copyOtherThanSrc.ToString());
        item.SubItems.Add(buffer.defaultNotebookNo.ToString());
        listView.Items.Add(item);
    } 
```

编辑：将字符串更改为 char 数组（感谢weismat的回答）解决了这个问题。快乐的！

```
 [StructLayout(LayoutKind.Sequential, Pack = 1, CharSet = CharSet.Ansi)]
    public struct RecordBuffer
    {
        public short docType;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 15)]
        public char[] docDescPlural;
        public short sorting;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 15)]
        public char[] docDescSingle;
        public short copyOtherThanSrc;
        public double defaultNotebookNo;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:22:33.527

我认为问题来自使用带有 p/invoke 的 C# 字符串时预期的 \0。
我没有使用 Btrieve 的经验，但很可能没有 \0。
你能发布原始的c结构吗？否则需要使用固定长度为 15 的字节数组，然后将其转换为字符串。
此外，我会使用 sizeof 运算符来比较两端结构的大小。

# crash - RabbitMQ 断电后无法启动

> ID：10529886
> 
> 赞同：2
> 
> 时间：2012-05-10T08:08:29.923
> 
> 标签：crash, erlang, centos, rabbitmq

我正在我的机器上运行一个 RabbitMQ 服务器实例。但在大楼停电后，我无法让兔子启动。

没有其他服务在同一个 TCP 端口上运行，我尝试重新安装 rabbit 和 erlang，但似乎没有任何效果。

我在跑：

*   CentOS 5.4 版（最终版）
*   兔子rabbitmq-server-2.8.2-1.noarch
*   erlang-R14B-03.3.el5.x86_64

startup_error 日志为空，但 startup_log 包含：

```
{
error_logger,
{
    {2012,5,10},
    {9,35,43}
},
"Protocol: ~p: register error: ~p~n",
[
    "inet_tcp",
    {
        {
            badmatch,
            {
                error,
                econnrefused
            }
        },
        [
            {
                inet_tcp_dist,
                listen,
                1
            },
            {
                net_kernel,
                start_protos,
                4
            },
            {
                net_kernel,
                start_protos,
                3
            },
            {
                net_kernel,
                init_node,
                2
            },
            {
                net_kernel,
                init,
                1
            },
            {
                gen_server,
                init_it,
                6
            },
            {
                proc_lib,
                init_p_do_apply,
                3
            }
        ]
    }
]
}{
error_logger,
{
    {2012,5,10},
    {9,35,43}
},
crash_report,
[
    [
        {
            initial_call,
            {
                net_kernel,
                init,
                [
                    'Argument__1'
                ]
            }
        },
        {
            pid,
            <0.20.0>
        },
        {
            registered_name,
            [

            ]
        },
        {
            error_info,
            {
                exit,
                {
                    error,
                    badarg
                },
                [
                    {
                        gen_server,
                        init_it,
                        6
                    },
                    {
                        proc_lib,
                        init_p_do_apply,
                        3
                    }
                ]
            }
        },
        {
            ancestors,
            [
                net_sup,
                kernel_sup,
                <0.9.0>
            ]
        },
        {
            messages,
            [

            ]
        },
        {
            links,
            [
                #Port<0.90>,
                <0.17.0>
            ]
        },
        {
            dictionary,
            [
                {
                    longnames,
                    false
                }
            ]
        },
        {
            trap_exit,
            true
        },
        {
            status,
            running
        },
        {
            heap_size,
            610
        },
        {
            stack_size,
            24
        },
        {
            reductions,
            509
        }
    ],
    [

    ]
]
}{
error_logger,
{
    {2012,5,10},
    {9,35,43}
},
supervisor_report,
[
    {
        supervisor,
        {
            local,
            net_sup
        }
    },
    {
        errorContext,
        start_error
    },
    {
        reason,
        {
            'EXIT',
            nodistribution
        }
    },
    {
        offender,
        [
            {
                pid,
                undefined
            },
            {
                name,
                net_kernel
            },
            {
                mfargs,
                {
                    net_kernel,
                    start_link,
                    [
                        [
                            rabbitmqprelaunch4868,
                            shortnames
                        ]
                    ]
                }
            },
            {
                restart_type,
                permanent
            },
            {
                shutdown,
                2000
            },
            {
                child_type,
                worker
            }
        ]
    }
]
}{
error_logger,
{
    {
        2012,
        5,
        10
    },
    {
        9,
        35,
        43
    }
},
supervisor_report,
[
    {
        supervisor,
        {
            local,
            kernel_sup
        }
    },
    {
        errorContext,
        start_error
    },
    {
        reason,
        shutdown
    },
    {
        offender,
        [
            {
                pid,
                undefined
            },
            {
                name,
                net_sup
            },
            {
                mfargs,
                {
                    erl_distribution,
                    start_link,
                    [

                    ]
                }
            },
            {
                restart_type,
                permanent
            },
            {
                shutdown,
                infinity
            },
            {
                child_type,
                supervisor
            }
        ]
    }
]
}{
error_logger,
{
    {
        2012,
        5,
        10
    },
    {
        9,
        35,
        43
    }
},
std_info,
[
    {
        application,
        kernel
    },
    {
        exited,
        {
            shutdown,
            {
                kernel,
                start,
                [
                    normal,
                    [

                    ]
                ]
            }
        }
    },
    {
        type,
        permanent
    }
]
}{
"Kernel pid terminated",
application_controller,
"{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:53:00.490

开头的 econnrefused 清楚地表明有东西在同一个端口上监听，**netstat -plten**可以显示它是什么。

# git - git fsck -- full 没有问题，但不能向上游推送

> ID：10529887
> 
> 赞同：2
> 
> 时间：2012-05-10T08:08:30.250
> 
> 标签：git

我有一个大约 7000 个文件的项目，我正在尝试添加并提交大约 4000 个文件以进行上游初始推送

跑步

```
 git fsck --full 
```

返回时没有错误，但是当我执行

```
git push -u origin master 
```

或者

```
git push origin master 
```

我收到这样的错误

```
fatal: loose object 890b67d9a81c0061176d5a9a061cc6437eac283d (stored in .git/objects/89/0b67d9a81c0061176d5a9a061cc6437eac283d) is corrupt
error: failed to push some refs to 'ssh://git@xxxxxxx' 
```

疯狂的是每次我运行推送命令时引用的松散对象都是不同的。

并且非常非常偶尔它实际上会在此消息中途失败之前开始将对象推向上游

```
Counting objects: 4551, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4168/4168), done.
fatal: loose object c839cf225383c94e4bb2234fca9f9b8b2d645cde (stored in .git/objects/c8/39cf225383c94e4bb2234fca9f9b8b2d645cde) is corrupt
fatal: early EOF
error: failed to push some refs to 'ssh://git@xxxxxxxx' 
```

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:30:01.343

它可能是：

*   权限问题（ACL 对 的限制太大 `.git/object/...`）
*   句柄问题（`.git/objects/c8/39cf225383c94e4bb2234fca9f9b8b2d645cde`不知何故已被另一个进程锁定）
*   损坏问题（在这种情况下，您需要检查该文件是否存在于另一个分支中（或者只是在 上可读`master`），然后将其复制到中`.git/objects/c8`）

# command-line - 是否可以在 xp Bath (cmd) 脚本中自动转义变量？

> ID：10529895
> 
> 赞同：1
> 
> 时间：2012-05-10T08:08:54.887
> 
> 标签：command-line, windows-xp, escaping, cmd

所以在 *.cmd 文件中我有：

```
set /p variable=user input here 
```

现在我应该用这个变量做某事，但用户可以在这里放任何东西，甚至是如果未转义则不允许的字符。所以我在 CMD 工具箱中有任何东西来处理这种可能性。那就是现在自动创建（用户不知道什么是允许的，什么是不允许的）另一个包含所有必要字符的变量已转义，以便我可以在我的脚本中安全地使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:22:58.527

SET /P 将正确接受任何输入，包括未转义的特殊字符。当需要使用（可能）包含特殊字符的变量时，您只需要使用延迟扩展。

```
@echo off
setlocal enableDelayedExpansion
set /p "test=Enter something: "
echo test=!test! 
```

SET /P 语句中的引号不需要允许特殊字符输入。它们只是为了在提示符末尾启用一个空格。

# objective-c - NSArray 中枚举的所有值？

> ID：10529896
> 
> 赞同：0
> 
> 时间：2012-05-10T08:08:57.583
> 
> 标签：objective-c, ios, cocoa-touch

大家好，我有一个包含我的错误代码的枚举类型。

问题是它们不是连续的，即

```
enum{
    ErrorCode1                = 1,
    ErrorCode2                = 4,
    ErrorCode3                = 74
}; typedef NSInteger  MyErroCodes; 
```

还有可能有 50 个代码 + 所以我真的不想复制数据或手动进行，这是我迄今为止在搜索中看到的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:17:22.603

enum 构造仅在编译时存在。在运行时，您的 MyErrorCodes 实例是纯整数，而 ErrorCodeN 值只是纯整数常量。没有办法在运行时从你的枚举中提取元数据（好吧，也许调试信息等中有，但你不想去那里......）。

我建议：

*   创建一个小脚本（Python、Perl 或其他）来生成将数字代码映射到字符串值的函数。在 XCode 中，如果您真的需要，您甚至可以在编译阶段运行代码生成器。
*   在编译期间使用元编程或预处理器宏来生成这些函数。这需要一些思考，但可以做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:16:54.863

这通常是通过包含一个文件来完成的，该文件包含某个正文中的所有值，有时还使用宏：

**ErrorCode_enum.h**

```
MON_ENUM_VALUE(ErrorCode1, 1)
MON_ENUM_VALUE(ErrorCode2, 4)
MON_ENUM_VALUE(ErrorCode3, 74) 
```

where`MON_ENUM_VALUE`将是一个*变量*宏扩展。

并且您的枚举声明可能采用以下形式：

```
enum {
#include "mon_enum_value_begin.h" // defines MON_ENUM_VALUE and such
#include "ErrorCode_enum.h"
#include "mon_enum_value_end.h" // undefines MON_ENUM_VALUE and everything else defined in mon_enum_value_begin.h
};
typedef NSInteger  MyErroCodes; 
```

然后你可能会写：

```
#include "mon_enum_NSNumber_begin.h" // defines MON_ENUM_VALUE and such
#include "ErrorCode_enum.h"
#include "mon_enum_NSNumber_end.h" // undefines MON_ENUM_VALUE and… 
```

或者

```
#include "mon_enum_NSError_begin.h" // defines MON_ENUM_VALUE and such
#include "ErrorCode_enum.h"
#include "mon_enum_NSError_end.h" // undefines MON_ENUM_VALUE and… 
```

这可能会将这些标签和值添加或字符串化到其他类型。

*就我个人而言，我认为宏很粗糙，只是采取了替代方法（诚然，编写*起来可能更乏味）。

# c# - 当数据库中有数据时查询不返回任何内容

> ID：10529897
> 
> 赞同：6
> 
> 时间：2012-05-10T08:09:09.177
> 
> 标签：c#, .net, entity-framework, tsql, linq-to-entities

我使用 EntityFramework 4 + 生成的 POCO 并**禁用**延迟加载。
假设有名为*Table1、Table2、Table3**和 Table4*的SQL 表，并假设它们包含一些数据。
让我们假设这些表的简化 POCO 表示如下所示：

```
public class Table1
{
    public int ID;
    public DateTime TableDate;
    public int Table2ID;
    public Table2 Table2;
    public ICollection<Table3> Table3s;
}

public class Table2
{
    public int ID;
    public string SomeString;
    public int Table4ID;
    public Table4 Table4;
}

public class Table3
{
    public int ID;
    public int Table1ID;
    public Table1 Table1;
    public decimal SomeDecimal;
}

public decimal Table4
{
    public int ID;
    public string SomeName;
} 
```

如果将执行以下代码：

```
Database DB = new Database(); // object context
var result = DB.Table1
    .Where(x => x.TableDate >= DateTime.MinValue); 
```

EF 将生成以下 SQL 语句：

```
exec sp_executesql N'SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[TableDate] AS [TableDate], 
[Extent1].[Table2ID] As [Table2ID]
FROM [dbo].[Table1] AS [Extent1]
WHERE ([Extent1].[TableDate] >= @p__linq__0)',N'@p__linq__0 datetime2(7)',@p__linq__0='0001-01-01 00:00:00' 
```

并且查询将返回预期的数据。
但是，如果将执行以下代码：

```
Database DB = new Database(); // object context
var result = DB.Table1
    .Include("Table2")
    .Include("Table2.Table4")
    .Include("Table3")
    .Where(x => x.TableDate >= DateTime.MinValue); 
```

EF 将生成以下 SQL 语句：

```
exec sp_executesql N'SELECT 
[Project1].[ID2] AS [ID], 
[Project1].[ID] AS [ID1], 
[Project1].[TableDate] AS [TableDate], 
[Project1].[ID1] AS [ID2], 
[Project1].[SomeString] AS [SomeString], 
[Project1].[Table4ID] AS [Table4ID], 
[Project1].[ID3] AS [ID3], 
[Project1].[SomeName] AS [SomeName], 
[Project1].[ID4] AS [ID4], 
[Project1].[SomeDecimal] AS [SomeDecimal], 
[Project1].[Table1ID] AS [Table1ID]
FROM ( SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[TableDate] AS [TableDate], 
[Extent2].[ID] AS [ID1], 
[Extent2].[SomeString] AS [SomeString], 
[Extent2].[Table4ID] AS [Table4ID], 
[Extent3].[ID] AS [ID2], 
[Extent4].[ID] AS [ID3], 
[Extent4].[SomeName] AS [SomeName], 
[Extent5].[ID] AS [ID4], 
[Extent5].[SomeDecimal] AS [SomeDecimal], 
[Extent5].[Table1ID] AS [Table1ID], 
CASE WHEN ([Extent5].[ID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
FROM     [dbo].[Table1] AS [Extent1]
INNER JOIN [dbo].[Table2] AS [Extent2] ON [Extent1].[Table2ID] = [Extent2].[ID]
LEFT OUTER JOIN [dbo].[Table2] AS [Extent3] ON [Extent1].[Table2ID] = [Extent3].[ID]
LEFT OUTER JOIN [dbo].[Table4] AS [Extent4] ON [Extent3].[Table4ID] = [Extent4].[ID]
LEFT OUTER JOIN [dbo].[Table3] AS [Extent5] ON [Extent1].[ID] = [Extent5].[Table1ID]
WHERE ([Extent1].[TableDate] >= @p__linq__0)
)  AS [Project1]
ORDER BY [Project1].[ID2] ASC, [Project1].[ID] ASC, [Project1].[ID1] ASC, [Project1].[ID3] ASC, [Project1].[C1] ASC',N'@p__linq__0 datetime2(7)',@p__linq__0='0001-01-01 00:00:00' 
```

并且查询不会返回任何内容。

为什么会发生这种情况？

*编辑*

以下是创建上述表的 SQL 语句：

```
CREATE TABLE [dbo].[Table1](
[ID] [int] IDENTITY(1,1) NOT NULL,
[Table2ID] [int] NOT NULL,
[TableDate] [date] NOT NULL,
 CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Table1]  WITH NOCHECK ADD  CONSTRAINT [FK_Table1_Table2] FOREIGN KEY([Table2ID])
REFERENCES [dbo].[Table2] ([ID])

ALTER TABLE [dbo].[Table1] CHECK CONSTRAINT [FK_Table1_Table2]

CREATE TABLE [dbo].[Table2](
[ID] [int] NOT NULL,
[SomeString] [nvarchar](50) NOT NULL,
[Table4ID] [int] NULL,
 CONSTRAINT [PK_Table2] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Table2]  WITH NOCHECK ADD  CONSTRAINT [FK_Table2_Table4] FOREIGN KEY([Table4ID])
REFERENCES [dbo].[Table4] ([ID])
ON UPDATE CASCADE

ALTER TABLE [dbo].[Table2] CHECK CONSTRAINT [FK_Table2_Table4]

CREATE TABLE [dbo].[Table3](
[ID] [int] IDENTITY(1,1) NOT NULL,
[SomeDecimal] [decimal](18, 4) NOT NULL,
[Table1ID] [int] NOT NULL,
 CONSTRAINT [PK_Table3] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Table3]  WITH NOCHECK ADD  CONSTRAINT [FK_Table3_Table1] FOREIGN KEY([Table1ID])
REFERENCES [dbo].[Table1] ([ID])
ON DELETE CASCADE

ALTER TABLE [dbo].[Table3] CHECK CONSTRAINT [FK_Table3_Table1]

CREATE TABLE [dbo].[Table4](
[ID] [int] NOT NULL,
[SomeName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Table4] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

*编辑 2*

此查询也将不返回任何记录，并且可以作为一个最小示例：

```
Database DB = new Database();
var result = DB.Table1
    .Include("Table2")
    .Where(x => x.TableDate >= DateTime.MinValue); 
```

生成的 SQL：

```
exec sp_executesql N'SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[Table2ID] AS [Table2ID], 
[Extent1].[TableDate] AS [TableDate], 
[Extent2].[ID] AS [ID1], 
[Extent2].[SomeString] AS [SomeString], 
[Extent2].[Table4ID] AS [Table4ID], 
FROM  [dbo].[Table1] AS [Extent1]
INNER JOIN [dbo].[Table2] AS [Extent2] ON [Extent1].[Table2ID] = [Extent2].[ID]
WHERE ([Extent1].[TableDate] >= @p__linq__0)',N'@p__linq__0 datetime2(7)',@p__linq__0='0001-01-01 00:00:00' 
```

此外，以下是 .edmx 的摘录：

```
<EntityContainer>
      <AssociationSet Name="FK_Table1_Table2" Association="MyModel.Store.FK_Table1_Table2">
        <End Role="Table2" EntitySet="Table2" />
        <End Role="Table1" EntitySet="Table1" />
      </AssociationSet>
</EntityContainer>

<!-- ... -->

<EntityType Name="Table2">
  <Key>
    <PropertyRef Name="ID" />
  </Key>
  <Property Name="ID" Type="int" Nullable="false" />
  <Property Name="SomeString" Type="nvarchar" Nullable="false" MaxLength="50" />
  <Property Name="Table4ID" Type="int" />
</EntityType>

<!-- ... -->

<EntityType Name="Table1">
  <Key>
    <PropertyRef Name="ID" />
  </Key>
  <Property Name="ID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="TableDate" Type="date" Nullable="false" />
  <Property Name="Table2ID" Type="int" Nullable="false" />
</EntityType>

<!-- ... -->

<Association Name="FK_Table1_Table2">
  <End Role="Table2" Type="MyModel.Store.Table2" Multiplicity="1" />
  <End Role="Table1" Type="MyModel.Store.Table1" Multiplicity="*" />
  <ReferentialConstraint>
    <Principal Role="Table2">
      <PropertyRef Name="ID" />
    </Principal>
    <Dependent Role="Table1">
      <PropertyRef Name="Table2ID" />
    </Dependent>
   </ReferentialConstraint>
</Association> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:24:35.180

看来这是 SQL Server 中的实际数据不一致的问题。
如[那里](http://www.w3schools.com/sql/sql_join_inner.asp)所述，

> 当两个表中至少有一个匹配项时，INNER JOIN 关键字返回行。如果“Table1”中有与“Table2”不匹配的行，则不会列出这些行。

此查询没有理由失败，除非“Table2”中确实没有与“Table1”匹配的行。虽然这很奇怪，因为 FK 约束是强制执行的，但这值得另一个问题，这个案例已经结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:09:47.363

我的猜测是 Include() 导致您的查询无法按照您期望的顺序进行评估，因此在调用 Where() 时 TableDate 不可用。如果你强制评估，然后调用你的 Where() 怎么办？

# android - Android 3.2 - SurfaceView 变黑但如果“迷你应用程序托盘”可见则重新出现

> ID：10529904
> 
> 赞同：0
> 
> 时间：2012-05-10T08:09:36.770
> 
> 标签：android, android-layout, surfaceview

我有一个适用于 Android 2.2 的绘图应用程序。但是，当我将它升级到 3.2 并在 3.2 设备中运行时，我的自定义 SurfaceView 消失了（但仍然接受触摸事件）。奇怪的是，如果我保持迷你应用托盘打开，它会重新出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:46:05.260

经过一段时间的尝试，罪魁祸首是**setDrawingCacheEnabled(true);** .

在我评论它之后，它就像一个魅力。

# hibernate - javax/javaee-api-6.0 的 javax/validation/validation 错误

> ID：10529906
> 
> 赞同：1
> 
> 时间：2012-05-10T08:09:45.040
> 
> 标签：hibernate, session, jakarta-ee, ejb-3.0

我在尝试配置会话工厂时遇到此错误，根据谷歌的结果，将 javaee-api 放在提供的范围内应该可以解决问题，但它没有：/

完整的 pom.xml [代码]

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.me.app</groupId>
  <artifactId>PersonnesServices</artifactId>
  <version>1.0</version>
  <packaging>jar</packaging>
  <name>PersonnesServices</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <!-- Junit -->
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
    </dependency>
    <!-- HIBERNATE -->
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>4.1.2</version>
   </dependency>

   <!--  HSQLDB -->
   <dependency>
      <groupId>org.hsqldb</groupId>
      <artifactId>hsqldb</artifactId>
      <version>2.2.8</version>
   </dependency> 
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
  </dependencies>

</project> 
```

[/代码]

我的 hibernate.cfg.xml

[代码]

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</property>
        <property name="hibernate.connection.url">jdbc:hsqldb:hsql://localhost</property>
        <property name="hibernate.connection.username">sa</property>
        <property name="connection.password"></property>
        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>
        <property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property>
        <property name="current_session_context_class">org.hibernate.context.ThreadLocalSessionContext</property>
        <!-- Enable Hibernate's automatic session context management -->
        <property name="hibernate.current_session_context_class">thread</property>
        <!-- Disable the second-level cache -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>
        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <property name="javax.persistence.validation.mode">none</property>
         <!-- Mapping files -->
        <mapping class="com.me.dto.Personne"/>
        <mapping class="com.me.dto.Ecole"/>
    </session-factory>
</hibernate-configuration> 
```

[/代码]

和我的错误：

[代码]

```
Exception in thread "main" java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:296)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:115)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:304)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1741)
    at com.csc.util.HibernateUtil.configureSessionFactory(HibernateUtil.java:15)
    at com.csc.services.test.main(test.java:20) 
```

[/代码]

你们中有人遇到过这样的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T20:08:51.280

我在运行 junit 测试时使用 javaee-web-api 6 和休眠时遇到了这个问题。

我修复它替换：

```
<dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-web-api</artifactId>
      <version>6.0</version>
      <scope>provided</scope>
    </dependency> 
```

为了：

```
<dependency>
   <groupId>org.jboss.spec</groupId>
   <artifactId>jboss-javaee-6.0</artifactId>
   <version>2.0.0.Final</version>
   <type>pom</type>
   <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:40:18.453

迟到总比没有好：你可以使用 jboss-javaee-6.0 而不是 javaee-api-6.0。

看看这里[Maven：hibernate-entitymanager 和 javaee-api 一起破坏了我的单元测试](https://stackoverflow.com/questions/5638479/maven-hibernate-entitymanager-together-with-javaee-api-break-my-unit-tests)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T14:05:29.480

我在运行 JUnits 时遇到了同样的问题，并通过以下步骤解决了： 1\. 在 hibernate 依赖项之上添加以下依赖项

```
 <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.glassfish.main.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.1.2.2</version>
        <scope>test</scope>
    </dependency> 
```

2.  我搞砸了我的构建路径，所以删除了“.classpath”文件（eclipse>navigator）并做了 maven>update project 来重置我的构建路径

然后它起作用了

# matlab - 说话的大致节奏

> ID：10529907
> 
> 赞同：0
> 
> 时间：2012-05-10T08:09:48.427
> 
> 标签：matlab

Matlab中是否有任何方法或功能来近似语音的节奏？如何做呢？如果没有，我应该用什么来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:05:33.443

这是一个与 DSP 相关的问题。您应该首先阅读语速文献。[http://scholar.google.es/scholar?q=speech+rate+estimation](http://scholar.google.es/scholar?q=speech+rate+estimation)

# java - 使用apache poi检测excel中的隐藏单元格

> ID：10529909
> 
> 赞同：3
> 
> 时间：2012-05-10T08:09:54.183
> 
> 标签：java, apache, excel, apache-poi

我们正在使用 apache poi 3.8 来解析 excel。我们需要能够检测（并跳过）隐藏行，因为它们在我们的用例中往往包含垃圾数据。

看起来这应该有效：

```
row.isFormatted() && row.getRowStyle().getHidden() 
```

但似乎从来没有任何行级格式（getRowStyle() 总是返回 null）。作为最后的手段，我们认为检查单元格样式可能会起作用：

```
for (int i = 0; i < row.getLastCellNum(); i++) {
    Cell cell = row.getCell(i);
    if (cell != null && cell.getCellStyle() != null && cell.getCellStyle().getHidden())
        ... 
```

但是对于我们得到的每一行（上面的 for 循环中的自定义输出）：

```
Cell 0 is not hidden org.apache.poi.hssf.usermodel.HSSFCellStyle@1b9142d0 / false 
```

“getHidden()”是不起作用还是不像我认为的那样起作用？还有另一种检测隐藏行的方法吗？（隐藏列也将是一个不错的奖励，但相关性稍差一些）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T08:22:18.367

`getRowStyle`通常应该按您的预期工作。

否则，您可以检查行的高度，因为隐藏行的高度往往设置为 0。使用`row.getHeight()`或`row.getZeroHeight()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T22:35:33.510

After trying a few approaches, `row.getZeroHeight()` worked correctly for identifying hidden row. Also for those who are stuck with Apache POI <= 3.7 version this may be the only solution.

# sql - 从 SQL 返回一个 200mb 的 blob 需要多长时间

> ID：10529911
> 
> 赞同：2
> 
> 时间：2012-05-10T08:10:02.873
> 
> 标签：sql, sql-server, sharepoint, blob

我有支持 SharePoint 2010 环境的 SQL 2008 R2。一些文件会非常大（即200mb）。虽然未来将向我们的平台添加远程 Blob 存储，但我想了解将 200mb 文件提供给用户时的合理性能。

SharePoint WFE 之间的网络只是其中的一部分。简单地从磁盘读取 blob 并通过 SharePoint 层传递它必须花费一些时间，但我不知道如何计算这个（或者人们需要什么额外的信息来帮助）

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:51:28.503

这是一个非常复杂的问题，需要了解您工作的环境。你说得对，网络是一方面，但还有很多其他方面。流量拥塞、QoS、SQL Server 版本、设置、硬件等 Web 前端如何将数据和 HTTP 管道传递给用户、正在使用的浏览器等方面存在问题。

查看安装 SharePoint 2010 的开发人员仪表板，您将能够看到感染和交付文件的所有步骤以及每个步骤将花费您多长时间。您会对路径的详细程度感到非常惊讶。

[SharePoint 2010 开发人员仪表板](http://msdn.microsoft.com/en-us/library/ff512745.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:01:48.963

无论大小如何，如果您的大型内容当前存储在文档库中，您都应该考虑激活 BlobCache 功能。

这将在首次访问后将其放在您的 WFE 上，使用适当的过期标头交付它，并完全减少 SQL Server 的负载。想象一下 20 个并发用户访问一个 200mb 的文件。如果不在 blobcache 中，您的农场将很难吞下这些无用的负载。

当您以单用户身份请求它时，第一次访问将比您的测试场景更长，但任何进一步的访问都将很快，因为 IIS 7 能够提供它并且网络容量取决于您的客户端。

希望它有所帮助。

# algorithm - 哈希表和子串匹配

> ID：10529915
> 
> 赞同：4
> 
> 时间：2012-05-10T08:10:13.930
> 
> 标签：algorithm, hashtable

我有数百个键，例如：

*   红苹果
*   人事
*   孔子
*   蓝苹果

我有与这些键相关的数据，数据是一个字符串，最后有相关的键。

*   红苹果：树有红苹果
*   maninred：她看到了maninred
*   foraman: 他们买了现在的foraman
*   蓝苹果：令人惊讶，但它是蓝苹果

我希望使用哈希表和哈希函数根据键记录数据，并且我希望能够从表中检索数据。

我知道使用哈希函数和哈希表，这里没有问题。

**但;**

我应该给程序一个字符串，它作为子字符串发生并检索匹配键的数据。

**例如：**

我必须给**“红色”**并且必须能够得到

*   红苹果：树有红苹果
*   maninred：她看到了maninred

作为输出。

或者

我必须给**“苹果”**并且必须能够得到

*   红苹果：树有红苹果
*   蓝苹果：令人惊讶，但它是蓝苹果

作为输出。

**如果它们具有匹配的子字符串，我只能考虑搜索所有键，还有其他解决方案吗？如果我搜索每个查询的所有关键字符串，则不需要使用散列，没有意义，是吗？**

**但是**，搜索子字符串的所有键是 O(N)，我希望用 O(1) 解决问题。

通过散列，我可以将密钥（例如“redapple”）散列到例如**943**，并将“maninred”散列到例如**332**。

**并且查询人给出字符串“red”我如何从943**和**332**中找出键具有“red”子字符串？这超出了我的cs思维能力。

感谢您的任何建议，想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:41:10.267

它不能在哈希表中很好地完成。给定 aa 子字符串 - 您无法预测整个字符串^(1的散列结果)

一个合理的替代方法是使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)。后缀树中的每个终端都将保存完整字符串的引用列表，该后缀与之相关。

给定一个 substring `t`，如果它确实是`s`你的集合中 some 的子串，那么有一个-的后缀`x`，即的前缀。通过在读取时遍历后缀树，并找到从您从那里到达的节点可到达的所有终端。这些终端包含所有需要的字符串。`s``t``x``t`

* * *

(1)假设合理的hash函数，如果`hashCode() == 0`对于每个元素，可以明显的预测出hash值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:56:25.960

可能您应该对 n-gramm 使用反转索引，相同的方法用于拼写校正。对于**redapple**一词，您将有以下一组 3-gramms **red, eda, dap, app, ppl, ple**。对于每个 n-gramm，您将有一个包含它的字符串列表。例如对于红色它将是

**红色 -> maninred, redapple**

此列表中的单词必须排序。当您想查找包含 aa 给定子字符串的所有字符串时，您在 n-gramm 上搜索子字符串并截取 n-gramm 的单词列表。

这个算法不是 O(n)，但它练习它有足够的速度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-07T01:47:37.033

我最近研究了这个问题，我确信这是做不到的。我希望哈希表能像你一样帮助我提高搜索速度，但这让我很失望。

# sharepoint - 使用 Visual Studio 进行 SharePoint 2010 开发

> ID：10529917
> 
> 赞同：2
> 
> 时间：2012-05-10T08:10:22.873
> 
> 标签：sharepoint, sharepoint-2010

我的公司有 SharePoint 服务器场设置并在 Internet 和本地运行。现在我们必须在上面开发一些应用程序。我们如何在 PC/笔记本电脑（未安装 SharePoint 服务器）上的 VS2010 中做到这一点？如果我们必须远程连接到服务器并在服务器上使用VS 2010，如何多人同时工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:47:42.013

SharePoint 开发需要在安装了 SharePoint 的系统上完成（忘记尝试远程，它永远无法与 SharePoint 一起工作）。您可以在 PC/笔记本电脑上安装 SharePoint 用于开发目的 -[如何设置 SharePoint 开发环境](http://msdn.microsoft.com/en-us/library/ee554869.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:53:57.453

您可以在未安装 SP 的情况下开发 SharePoint 应用程序，但仅限于使用 REST Api、ClientContext API 或外部连接器，例如[来自 Bendsoft 的用于 SharePoint 的 Camelot .NET 连接器](http://www.bendsoft.com/net-sharepoint-connector/)。

通常，SharePoint 开发人员在安装了 SharePoint 基础的虚拟环境中工作，在本地创建他们的部署包。

如果您想为开发设置虚拟环境，这是一个很好的起点。[http://msdn.microsoft.com/en-us/library/ee554869(office.14).aspx](http://msdn.microsoft.com/en-us/library/ee554869(office.14).aspx)

# android - 联系人总数 - 安卓

> ID：10529918
> 
> 赞同：3
> 
> 时间：2012-05-10T08:10:22.903
> 
> 标签：android

我是android编程的新手，如果这是一个简单的问题，请原谅。如何从通讯录中获取联系人总数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T08:14:04.823

查找所有联系人的电话号码计数

```
Cursor cursor =  managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

int count = cursor.getCount(); 
```

查找特定 RawContactID 的所有电话号码的计数（在 rawContactId 中传递联系人 id 值）。

```
Cursor cursor =  managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.RAW_CONTACT_ID + " = " + rawContactId, null, null);

int count = cursor.getCount(); 
```

ContactsListActivity 中显示的联系人数量可以通过以下查询确定。

```
Cursor cursor =  managedQuery(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

int count = cursor.getCount(); 
```

但是，如果在多个帐户下输入了一个人，则上述查询仅获得一个实例，因为 ContactsContract.Contacts 结合了所有此类联系人。

```
Cursor cursor =  managedQuery(RawContacts.CONTENT_URI, null, null, null, null);

int count = cursor.getCount(); 
```

ContactsContract.Contacts 和 RawContacts 之间的关系可以在 [http://developer.android.com/resources/articles/contacts.html找到](http://developer.android.com/resources/articles/contacts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:14:23.463

对于联系人总数，请使用以下代码。

```
Cursor cursor =  managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

int count = cursor.getCount(); 
```

# c# - 模型未在 ASP.NET MVC 3 中传递

> ID：10529926
> 
> 赞同：4
> 
> 时间：2012-05-10T08:10:53.967
> 
> 标签：c#, .net, asp.net-mvc-3

我有一个索引视图，其中有一个包含不同公式的部分视图的表单。

```
@Html.ValidationSummary(true, "Beheben Sie die Fehler, und wiederholen Sie den Vorgang.")
@using (Html.BeginForm())
{
object mod = null;
switch (Model.Step)
{
    case 1:
        Html.RenderPartial("Step1", Model.Step1);
        break;
    case 2:
        Html.RenderPartial("Step2", Model.Step2);
        break;
    default:
        Html.RenderPartial("Step0");
        break;
}

<p>
    @if (Model.Step > 100000)
    {
        <button name="button" value="Zurück" />
    }
    @if (Model.Step != 0)
    {      
        <input type="submit" name="submit" value="Zurück" />   <input type="submit" name="submit"
            value="Weiter" id="Weiter" /> <input type="submit" name="submit" value="Abbrechen" />
    }
</p>
} 
```

在我的控制器中，我得到了这样的东西：

```
[HttpPost]
public ActionResult Index(InputModel model, string submit, HttpPostedFileBase file)
{
    if (String.IsNullOrEmpty(submit))
        submit = "";
    if (submit == "Weiter")
        model.Step++;

    if (submit == "Zurück")
        model.Step--; 
```

InputModel 有几个像这样的“子模型”：

```
public Step1Model Step1 { get; set; }

public Step2Model Step2 { get; set; }

public Step3Model Step3 { get; set; } 
```

将其传递给局部视图以填充它们。现在的问题是我的控制器中的 HttpPost 中总是有一个空模型。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:26:35.047

> 我究竟做错了什么？

您正在使用部分。部分不尊重导航上下文。因此，当您查看生成的 HTML 源代码时，您将看到以下内容：

```
<input type="text" name="SomeProperty" value="some value" /> 
```

而不是默认模型绑定器所期望的正确的：

```
<input type="text" name="Step1.SomeProperty" value="some value" /> 
```

因此，当您提交此表单时，您没有正确绑定到该`Step1`属性。显然对于其他复杂属性也有同样的评论。

一种可能性是使用编辑器模板而不是部分模板，因为它们保留导航上下文并为您的输入字段生成正确的名称。

所以而不是：

```
Html.RenderPartial("Step1", Model.Step1); 
```

利用：

```
@Html.EditorFor(x => x.Step1, "Step1") 
```

然后将您的`~/Views/SomeController/Step1.cshtml`部分移动到 `~/Views/SomeController/EditorTemlpates/Step1.cshtml`.

如果您不想使用编辑器模板但保留部分，您可以更改部分内的模板前缀。因此，例如在`Step1.cshtml`部分内部，您可以将以下内容放在顶部：

```
@{
    ViewData.TemplateInfo.HtmlFieldPrefix = "Step1";
} 
```

现在，当您检查生成的 HTML 源代码时，应该为输入字段发出正确的名称。就我个人而言，我会推荐你​​使用编辑器模板方法，以避免硬编码前缀并使这部分与编辑器模板相比可重用性降低。

# oracle - 从 Hibernate Native 查询调用 Oracle 存储过程时出错

> ID：10529930
> 
> 赞同：0
> 
> 时间：2012-05-10T08:11:12.480
> 
> 标签：oracle, hibernate, nativequery

考虑以下代码：

```
String checkSeatQuery = "BEGIN USP_RESERVESEAT(IRESULT=>?, ICART_SESSION=>?, IEVENT_ID=>?, ISESSION_ID=>?, IPRICE_SCHEME_ID=>?, ISEAT_ID=>?, IBLOCK_ID=>?, INO_OF_SEAT=>?, IPOS=>?, ISOURCE=>?, IFLASH_SEAT_STATUS_KEY=>?); END;";
Query q = entityManager.createNativeQuery(checkSeatQuery);
        q.setParameter(1, DataTypes.STRING); //value passed in: 1
        q.setParameter(2, cartSessionId); //value passed in: BT71C49DD999300D33E70B69F0A43F3436
        q.setParameter(3, tblEvent.getId()); //value passed in: 20
        q.setParameter(4,null); //value passed in: null
        q.setParameter(5, Integer.toString(tempTicket.getTblPriceSchemes().getId())); //value passed in: 366
        q.setParameter(6, seatId); //value passed in: null
        q.setParameter(7, blockId); //value passed in: null
        q.setParameter(8, accumulatedSeat); //value passed in: 1
        q.setParameter(9, pos); //value passed in: 1
        q.setParameter(10, source); //value passed in: 1
        q.setParameter(11, null); //value passed in: null

        String outputs = (String) q.getResultList().get(0); 
```

甲骨文程序：

```
 DECLARE
  IRESULT VARCHAR2(200);
  ICART_SESSION VARCHAR2(200);
  IEVENT_ID NUMBER;
  ISESSION_ID NUMBER;
  IPRICE_SCHEME_ID VARCHAR2(200);
  ISEAT_ID VARCHAR2(200);
  IBLOCK_ID NUMBER;
  INO_OF_SEAT NUMBER;
  IPOS NUMBER;
  ISOURCE NUMBER;
  IFLASH_SEAT_STATUS_KEY VARCHAR2(200);
BEGIN
  ICART_SESSION := NULL;
  IEVENT_ID := NULL;
  ISESSION_ID := NULL;
  IPRICE_SCHEME_ID := NULL;
  ISEAT_ID := NULL;
  IBLOCK_ID := NULL;
  INO_OF_SEAT := NULL;
  IPOS := NULL;
  ISOURCE := NULL;
  IFLASH_SEAT_STATUS_KEY := NULL;

  USP_RESERVESEAT(
    IRESULT => IRESULT,
    ICART_SESSION => ICART_SESSION,
    IEVENT_ID => IEVENT_ID,
    ISESSION_ID => ISESSION_ID,
    IPRICE_SCHEME_ID => IPRICE_SCHEME_ID,
    ISEAT_ID => ISEAT_ID,
    IBLOCK_ID => IBLOCK_ID,
    INO_OF_SEAT => INO_OF_SEAT,
    IPOS => IPOS,
    ISOURCE => ISOURCE,
    IFLASH_SEAT_STATUS_KEY => IFLASH_SEAT_STATUS_KEY
  );
  DBMS_OUTPUT.PUT_LINE('IRESULT = ' || IRESULT);
END; 
```

我收到错误消息：

```
2012-05-10 15:45:16,267 WARN  [org.hibernate.util.JDBCExceptionReporter] (http-localhost%2F127.0.0.1-8080-5) SQL Error: 6550, SQLState: 65000
2012-05-10 15:45:16,267 ERROR [org.hibernate.util.JDBCExceptionReporter] (http-localhost%2F127.0.0.1-8080-5) ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'USP_RESERVESEAT'
ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'USP_RESERVESEAT'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

这是为什么？在网络搜索后，我找不到太多有用的信息。
我正在使用以下内容：
**Oracle，版本：Oracle Database 11g Release 11.1.0.0.0 - Production
Hibernate 3.3.2.GA**

**PL/SQL：**

```
create or replace
PROCEDURE USP_RESERVESEAT 
(
  IRESULT OUT VARCHAR2  
, ICART_SESSION IN VARCHAR2  
, IEVENT_ID IN NUMBER  
, ISESSION_ID IN NUMBER  
, IPRICE_SCHEME_ID IN VARCHAR2  
, ISEAT_ID IN VARCHAR2  
, IBLOCK_ID IN NUMBER  
, INO_OF_SEAT IN NUMBER  
, IPOS IN NUMBER  
, ISOURCE IN NUMBER  
, IFLASH_SEAT_STATUS_KEY IN VARCHAR2  
)as

     Iprice_scheme_id_inv VARCHAR2 (3000);
     Iseat_id_inv NUMBER;
     Icheck NUMBER;
     IPos1 NUMBER;
   IPos2 NUMBER;

    Icapacity NUMBER;
    Itic_sold NUMBER;
    Irv_cart NUMBER;
    Irefund_tic NUMBER;
    Irecord NUMBER;
    Irecordc NUMBER;
    Inew_seat NUMBER;

    Iavailable VARCHAR2 (3000);
    Istatus_name VARCHAR2 (3000);
    Ilatest_seat_status_key VARCHAR2 (3000);
    Ilatest_seat_status_name VARCHAR2 (3000);

    Ichild NUMBER;
    Itotal_child NUMBER;
    Icount_row NUMBER;
    Ipromo_quantity NUMBER;
    Iis_package NUMBER;

    Itocart_seat_id NUMBER;
    Ilatest_flash_seat_id VARCHAR2 (3000);
    Ipromo_tic NUMBER;
    Iallotment NUMBER;

    Iready_to_cancel NUMBER;
    Iready_to_cancel_booking_id NUMBER;
    IKILL NUMBER;
BEGIN

    if (ISOURCE = '0') THEN 
    Istatus_name := 'Internet Reserved';
    else
    if (ISOURCE = '1') THEN 
      Istatus_name :=  'POS Reserved';
    else
    if (ISOURCE = '2')  THEN 
      Istatus_name :=  'CS Reserved';
    else
    if (ISOURCE = '3') THEN 
      Istatus_name :=  'Call Centre Reserved';
    else
    if (ISOURCE = '4') THEN 
      Istatus_name :=  'Promoter Reserved';
    end IF;
  end IF;
  end IF;
  end IF;
  end IF;

  begin

                        INSERT INTO tbl_cart_session
                        (   cart_session,
              event_id,
                            price_scheme_id,
                            no_of_seat,
                            created_date
                        )
                        VALUES
                        (
                            Icart_session,
                            Ievent_id,
                            Iprice_scheme_id,
                            INO_OF_SEAT,
                            sysdate
                        );

      update tbl_cart_session set created_date=sysdate where cart_session=Icart_session;
            select '1' into Iresult from dual;  

  end;

END USP_RESERVESEAT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:29:14.640

这`IRESULT`是一个 OUT 参数，因此您应该像这样注册它：

```
String checkSeatQuery = "BEGIN USP_RESERVESEAT(IRESULT=>?, ICART_SESSION=>?, IEVENT_ID=>?, ISESSION_ID=>?, IPRICE_SCHEME_ID=>?, ISEAT_ID=>?, IBLOCK_ID=>?, INO_OF_SEAT=>?, IPOS=>?, ISOURCE=>?, IFLASH_SEAT_STATUS_KEY=>?); END;";
Query q = entityManager.createNativeQuery(checkSeatQuery);
        q.registerOutParameter(1, DataTypes.STRING); //value passed in: 1
        q.setParameter(2, cartSessionId); //value passed in: BT71C49DD999300D33E70B69F0A43F3436
        q.setParameter(3, tblEvent.getId()); //value passed in: 20
        q.setParameter(4,null); //value passed in: null
        q.setParameter(5, Integer.toString(tempTicket.getTblPriceSchemes().getId())); //value passed in: 366
        q.setParameter(6, seatId); //value passed in: null
        q.setParameter(7, blockId); //value passed in: null
        q.setParameter(8, accumulatedSeat); //value passed in: 1
        q.setParameter(9, pos); //value passed in: 1
        q.setParameter(10, source); //value passed in: 1
        q.setParameter(11, null); //value passed in: null

        String outputs = (String) q.getResultList().get(0); 
```

# php - 有没有将法语重音符号转换为 HTML 编码字符的功能

> ID：10529931
> 
> 赞同：-3
> 
> 时间：2012-05-10T08:11:16.180
> 
> 标签：php, character-encoding, special-characters

PHP 中是否有任何函数可以将重音字符（例如法语中的字符）转换为 HTML 编码的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:12:29.033

您唯一需要做的就是确保它们是有效的 UTF8 并设置适当的 content-tyoe 标头 ( `text/html; charset=utf-8`)。

现在没有理由为这些字符使用 HTML 实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:42:45.013

您编写 HTML 编码的字符，所以我假设您想将字符转换为[HTML Entitites ^(*Ref*)](http://www.w3.org/TR/html4/charset.html#h-5.3.2) 。这些是在 HTML 2（[ISO Latin 1 Character Entity Set](http://www.w3.org/MarkUp/html-spec/html-spec_9.html#SEC9.7.2)）、HTML 3.2（[Character Entities for ISO Latin-1](http://www.w3.org/TR/REC-html32#latin1)）和 HTML 4（HTML 4[中的字符实体引用](http://www.w3.org/TR/html4/sgml/entities.html)）中引入的。

您尚未共享您正在使用的那些 HTML 版本，因此我建议您查看[XML 列表和 HTML 字符实体引用^(*Wikidpedia 以*)](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)找到您想要替换的那些。

与这些相关的 PHP 函数称为：[^(*文档*)](http://php.net/htmlentities)。[`htmlentities`](http://php.net/htmlentities)

 *多亏[了 HTTP 中的 content-type 标头](https://www.rfc-editor.org/rfc/rfc2616#section-14.17)并且[它在 HTML](http://www.w3.org/TR/html4/charset.html#spec-char-encoding)中是等效的，所以没有必要将这些字符编码为实体，因为您可以告诉浏览器您正在使用哪个字符集。您只需要使用实体，以防字符不是您用于输出/响应的编码的一部分。

对于这些情况 [^(*文档*)](http://php.net/htmlentities)或 可以使用[^(*文档功能。*)](http://php.net/strtr)由于您尚未指定数据和目标所涉及的编码，因此无法给出具体的代码示例，而只能给出一般示例：[`htmlentities`](http://php.net/htmlentities)*[`strtr`](http://php.net/strtr)*

 **```
echo htmlentities ($string, ENT_HTML401, $encoding = 'YOUR STRING ENCODING'); 
```

[`ENT_HTML401`翻译表^(Docs)](http://php.net/get_html_translation_table)*将转换的字符多于您可能要求的字符。*

 *除了使用内置转换表，您还可以创建自己的转换表并使用 [^(*文档*)](http://php.net/strtr)功能。如果 不支持您的数据编码，例如 Adob​​e 符号字体（请参阅：[如何将符号字体转换为标准 utf8 HTML 实体](https://stackoverflow.com/q/8240030/367456)），则也需要这样做。或者因为您只想运行自己的转换（请参阅[如何使用 PHP 替换字符串中的非 SGML 字符？](https://stackoverflow.com/q/9736949/367456)）。[`strtr`](http://php.net/strtr)*`htmlentities`*

 *```
/*
 * mappings of Windows-1252 (cp1252)  128 (0x80) - 159 (0x9F) characters:
 * @link http://en.wikipedia.org/wiki/Windows-1252
 * @link http://www.w3.org/TR/html4/sgml/entities.html
 */
$cp1252HTML401Entities = array(
    "\x80" => '&euro;',    # 128 -> euro sign, U+20AC NEW
    "\x82" => '&sbquo;',   # 130 -> single low-9 quotation mark, U+201A NEW
    "\x83" => '&fnof;',    # 131 -> latin small f with hook = function = florin, U+0192 ISOtech
    "\x84" => '&bdquo;',   # 132 -> double low-9 quotation mark, U+201E NEW
    "\x85" => '&hellip;',  # 133 -> horizontal ellipsis = three dot leader, U+2026 ISOpub
    "\x86" => '&dagger;',  # 134 -> dagger, U+2020 ISOpub
    "\x87" => '&Dagger;',  # 135 -> double dagger, U+2021 ISOpub
    "\x88" => '&circ;',    # 136 -> modifier letter circumflex accent, U+02C6 ISOpub
    "\x89" => '&permil;',  # 137 -> per mille sign, U+2030 ISOtech
    "\x8A" => '&Scaron;',  # 138 -> latin capital letter S with caron, U+0160 ISOlat2
    "\x8B" => '&lsaquo;',  # 139 -> single left-pointing angle quotation mark, U+2039 ISO proposed
    "\x8C" => '&OElig;',   # 140 -> latin capital ligature OE, U+0152 ISOlat2
    "\x8E" => '&#381;',    # 142 -> U+017D
    "\x91" => '&lsquo;',   # 145 -> left single quotation mark, U+2018 ISOnum
    "\x92" => '&rsquo;',   # 146 -> right single quotation mark, U+2019 ISOnum
    "\x93" => '&ldquo;',   # 147 -> left double quotation mark, U+201C ISOnum
    "\x94" => '&rdquo;',   # 148 -> right double quotation mark, U+201D ISOnum
    "\x95" => '&bull;',    # 149 -> bullet = black small circle, U+2022 ISOpub
    "\x96" => '&ndash;',   # 150 -> en dash, U+2013 ISOpub
    "\x97" => '&mdash;',   # 151 -> em dash, U+2014 ISOpub
    "\x98" => '&tilde;',   # 152 -> small tilde, U+02DC ISOdia
    "\x99" => '&trade;',   # 153 -> trade mark sign, U+2122 ISOnum
    "\x9A" => '&scaron;',  # 154 -> latin small letter s with caron, U+0161 ISOlat2
    "\x9B" => '&rsaquo;',  # 155 -> single right-pointing angle quotation mark, U+203A ISO proposed
    "\x9C" => '&oelig;',   # 156 -> latin small ligature oe, U+0153 ISOlat2
    "\x9E" => '&#382;',    # 158 -> U+017E
    "\x9F" => '&Yuml;',    # 159 -> latin capital letter Y with diaeresis, U+0178 ISOlat2
);

$outputWithEntities = strtr($output, $cp1252HTML401Entities); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T01:54:27.237

来源：[http ://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)

试试这个功能：

```
function GenerateUrl ($s) {
  //Convert accented characters, and remove parentheses and apostrophes
  $from = explode (',', "ç,æ,œ,á,é,í,ó,ú,à,è,ì,ò,ù,ä,ë,ï,ö,ü,ÿ,â,ê,î,ô,û,å,e,i,ø,u,(,),[,],'");
  $to = explode (',', 'c,ae,oe,a,e,i,o,u,a,e,i,o,u,a,e,i,o,u,y,a,e,i,o,u,a,e,i,o,u,,,,,,');

  //Do the replacements, and convert all other non-alphanumeric characters to spaces
  $s = preg_replace ('~[^\w\d]+~', '-', str_replace ($from, $to, trim ($s)));

  //Remove a - at the beginning or end and make lowercase
  return strtolower (preg_replace ('/^-/', '', preg_replace ('/-$/', '', $s)));
} 
```*****

# jsp - 通过存储在jsp数据库中的文件路径下载文件

> ID：10529933
> 
> 赞同：0
> 
> 时间：2012-05-10T08:11:26.540
> 
> 标签：jsp, hyperlink

嗨，想从文件位置存储在数据库中的目录下载文件，我已经完成了从数据库检索到 html 表的路径的编码，但我不知道如何使用存储在数据库中的路径下载文件.这是我从数据库中检索路径的代码。

```
<%@ page import="java.io.*,java.sql.*"%>

 <%
 String id=request.getParameter("id");
 Class.forName("com.mysql.jdbc.Driver").newInstance();  
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/ksa","root","root");  
 Statement st=con.createStatement();
 ResultSet rs=st.executeQuery("Select id,file_path,file_date from file12 where id like '"+id+"%'");
 %>
 <table cellpadding="15" border="1">
 <%
 while(rs.next()){

%>
<tr>
<td><%=rs.getString("id")%> </td>
<td><%=rs.getString("file_path")%></td> 

 <td><%=rs.getString("file_date")%> </td> 
  </tr>
  <%}%>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:16:24.117

```
<td><a href = '<%=rs.getString("file_path")%>'><%=rs.getString("file_path")%></a></td> 
```

应该做的伎俩。

# css - 当表格在类内时如何覆盖默认表格样式？

> ID：10529934
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:11:36.430
> 
> 标签：css

我有两种不同的表格样式定义：

```
table {
border: solid 1px #E8EEF4;
border-collapse: collapse;
} 
```

因为我的特定表在里面，所以`<div class="checkboxquestion>`我对这个类中的表有一个特殊的样式定义：

```
.checkboxquestion table
{
    border: none;
    text-align: center;
} 
```

问题是，它`border: none;`被`border-collapse: collapse;`- 覆盖，并且所有其他样式选项都被“默认”定义覆盖。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:17:31.823

我认为你犯了另一个错误，它对我有用，就像你做的那样：看看[这个小提琴](http://jsfiddle.net/vfGNS/)

也许您没有像在问题中那样关闭 div 类的引号？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:15:52.713

`div.checkboxquestion table`也是一种选择；）

并确保特定定义出现在通用定义之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:18:26.630

创建一个新类并将其应用于 .checkboxquestion 内的表

像：

```
table, .tabelClass {
border: solid 1px #E8EEF4;
border-collapse: collapse;
} 
```

然后将其应用于您的表：

```
<table class="tabelClass"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:22:25.683

不要进入特异性战争，尤其是与你自己。使用 table、tr、td 等选择器定义所有常见的表格样式。
如果您有两种不同样式的表格，请给它们两个不同的类。

如果这是“一次性的事情”，并且您确实需要一切都相同：

```
.checkboxstyle table {
 border-collapse: separate;
 text-align:center;
 border:none;
} 
```

我不能 100% 确定您要做什么，但是如果您要使边框不可见，则只用背景颜色为边框着色会更容易。

```
.checkboxstyle table {
 border-color:blue;
} 
```

**您可以在此处**了解有关特异性的更多信息：** [http](http://htmldog.com/guides/cssadvanced/specificity/) ://htmldog.com/guides/cssadvanced/specificity/ 请记住，阅读后立即忘记所有内容，因为您不想计算特异性。如果你发现你正在这样做，那么你正在编写糟糕的 CSS。**

# .net - 为什么 InitializeComponent 是公开的

> ID：10529935
> 
> 赞同：7
> 
> 时间：2012-05-10T08:11:52.250
> 
> 标签：.net, wpf, user-controls, initializecomponent

我的 WPF 用户控件的公共接口包含自动生成的 InitializeComponent 方法（包含在部分类中）。这对我来说是一个惊喜，因为我期望这样一个内部的东西是私人的。

有什么方法可以从用户控件公共界面中删除 InitializeComponent 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:02:49.017

`InitializeComponent`是定义在接口上的方法，`System.Windows.Markup.IComponentConnector`用于加载组件的编译页面。

请参阅此[链接](http://msdn.microsoft.com/en-us/library/system.windows.markup.icomponentconnector.initializecomponent.aspx)`MSDN`的以下摘录，其中包含更多信息：

`IComponentConnector`由 内部使用`Baml2006Reader`。

作为与应用程序和编程模型结合`InitializeComponent`使用的框架或技术所提供的基础设施的一部分，可以广泛观察到 的实现。`XAML`例如，每当您查看为 WPF 页面和应用程序中的 XAML 根元素生成的类时，您将看到在输出中定义的 InitializeComponent。该方法也存在于编译的程序集中，并在 WPF 应用程序模型中发挥作用，在 XAML 解析时加载 XAML UI 内容（我想因此`InitializeComponent`必须在接口中并且是公共的，以便其他外部 WPF 相关程序集可以使使用它）。

为了进一步解释这一点，请转到`InitializeComponent()`您的（say）`Window1.g.cs`类中的方法定义：say：`WPFProject`项目，并将其访问权限从更改`public`为`private`

> （保持 .g.cs 文件在您的项目中打开，否则构建过程会覆盖此文件，您将无法看到错误）

现在，当您编译 WPF 项目时，它会引发如下编译错误：

> 错误 22“WPFProject.Window1”未实现接口成员“System.Windows.Markup.IComponentConnector.InitializeComponent()”。'WPFProject.Window1.InitializeComponent()' 无法实现接口成员，因为它不是公共的。

此外，`InitializeComponent()`标有 `[System.Diagnostics.DebuggerNonUserCodeAttribute()]`属性，因此您在调试时无法单步执行此方法。

还有另一个[SO QA 讨论](https://stackoverflow.com/questions/245825/what-does-initializecomponent-do-and-how-does-it-work-wpf)，可以帮助您更详细地解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:18:12.767

如果你能控制自己，你会感觉更好`internal`吗？

```
<UserControl 
     x:Class="PBbase.Client.Navigation.UserControl1"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     x:ClassModifier="internal"> 
```

# java - 我可以使用嵌套的 AsyncTasks 在 Andorid 中加载图像吗？

> ID：10529936
> 
> 赞同：0
> 
> 时间：2012-05-10T08:11:53.310
> 
> 标签：java, android, android-asynctask

我正在构建一个简单的应用程序，它查询 Web 服务以获取我想要下载的图像的 URL。现在，我通过运行执行`AsyncTask`查询、处理 XML 以查找图像 URL 并`Object`使用所有这些详细信息填充 an 来做到这一点。

我想知道我是否可以`Object`在内部使用它`onPostExecute()`来创建另一个`AsyncTask`从对象中的 URL 下载所有图像的对象？

这是我的代码...

```
protected SongObject doInBackground(LastFMClient... client) {
    LastFMClient lfmClient = client[0];
    SongObject track = lfmClient.getMusicMetadata();
    return track;
}

 protected void onPostExecute(SongObject response) {
    // create another asynctask here to download images from the URLs in response.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:13:58.507

是的，您可以从 onpost 方法调用其他异步任务。

# ios - 不完全实施警告

> ID：10529949
> 
> 赞同：9
> 
> 时间：2012-05-10T08:13:00.143
> 
> 标签：ios, xcode

有没有办法让 Xcode 告诉我哪个函数没有正确实现，触发了它的“不完整实现”警告？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-10T08:21:27.547

有时方法名称不会显示在代码内警告中。在这种情况下：

转到问题导航器（左窗格中的警告标志），展开警告，单击“在此处声明的方法”。

![Xcode 问题导航器：不完整的实现](../Images/137401268e2107f487b398bfd1851a8b.png)

首先，单击小箭头 (1)，然后单击其中一个方法名称 (2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:18:55.613

如果您单击 Xcode 在文件末尾显示的缺少方法定义的警告标志，您将看到一条额外的消息，告诉您它是哪种方法。

![在此处输入图像描述](../Images/54411c83a50737c9880d0a0e6b90c23f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:19:05.613

是的，当您收到此警告时，请单击它..例如，它将带您.m文件..在警告中，未实现的方法有一个编号..单击它，您将获得方法..检查下面的快照。

![在此处输入图像描述](../Images/168b2dc2ba36d06add2a5c0f120442d8.png)

![在此处输入图像描述](../Images/645695592d64d10d8eae50f590274c23.png)

# php - 复选框为真时突出显示行

> ID：10529955
> 
> 赞同：21
> 
> 时间：2012-05-10T08:13:33.633
> 
> 标签：php, javascript, jqgrid, jqgrid-php

有人可以帮助我吗，我有一个 jqgrid，如果复选框为真，我想突出显示该行，谢谢！！

![在此处输入图像描述](../Images/0704c1da639490db725a817e37c06fa7.png)

这就是我想在这个项目中做的......

```
function loadjqGrid(jsonGridData){
    var xaxis=1300
    var yaxis = $(document).height();
    yaxis = yaxis-500;
    getGrids();     
    $("#maingrid").jqGrid({
        url:'models/mod.quoservicetypedetails.php?ACTION=view',
        mtype: 'POST',
        datatype: 'xml',
        colNames:getColumnNames(jsonGridData),
        colModel :[ 
            {name:'TypeID', index:'TypeID', width:350,hidden:true, align:'center',sortable:false,editable:true,
            edittype:"select",editoptions:{value:getTypeID()},editrules: { edithidden: true}},  
            {name:'Order1', index:'Order1', width:80, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}},                  
            {name:'Order2', index:'Order2', width:80, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}}, 
            {name:'Order3', index:'Order3', width:80, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}},                      
            {name:'Description', index:'Description', width:140, align:'center',sortable:false,editable:true,
            edittype:"textarea",editoptions:{size:"30",maxlength:"30"}},                    
            {name:'Notes', index:'Notes', width:120, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}}, 
            {name:'Measure', index:'Measure', width:80, align:'center',sortable:false,editable:true, edittype:"textarea", editoptions:{size:"30",maxlength:"30"}},                  
            {name:'UnitPrice', index:'UnitPrice', width:100, align:'center',sortable:false,editable:false,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}},  
            {name:'Remarks', index:'Remarks', width:140, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}}, 
            {name:'UnitCost', index:'UnitCost', width:100, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}},     
            {name:'Service', index:'Service', width:120, align:'center',sortable:false,editable:true,edittype:"textarea",editoptions:{size:"30",maxlength:"30"}}, 
            //If the GroupHeader is true the row background is yellow
            {name:'GroupHeader', index:'GroupHeader', width:100, align:'center',sortable:false,editable:true,formatter:'checkbox', edittype:'checkbox', type:'select', editoptions:{value:"1:0"}}, 
            {name:'IsGroup', index:'IsGroup', width:80, align:'center',sortable:false,editable:true,formatter:'checkbox', edittype:'checkbox', type:'select', editoptions:{value:"1:0"}}, 
        ],
        viewrecords: true,  
        rowNum:20,
        sortname: 'id', 
        viewrecords: true, 
        sortorder: "desc",
        height: yaxis,
        pager : '#gridpager',
        recordtext: "View {0} - {1} of {2}",
        emptyrecords: "No records to view",
        loadtext: "Loading...",
        pgtext : "Page {0} of {1}",         
        height: yaxis,
        width: xaxis,
        shrinkToFit: false,
        multiselect: true,
        editurl:'models/mod.quoservicetypedetails.php?ACTION=edit'
    }); 
} 
```

我怎么能这样做？有人能帮我吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-10T09:59:38.323

我在[答案](https://stackoverflow.com/a/6575634/315935)中描述了一种如何实现突出显示的好方法。

jqGrid 4.3.2 版具有新功能 -`rowattr`回调（请参阅[我的原始建议](http://www.trirand.com/blog/?page_id=393/feature-request/introduce-rowattr-jqgrid-like-cellattr-but-for-setting-attributes-on-tr-element-instead-of-td/#p26208)），这是专门针对您的情况引入的。它允许您*在填充网格期间*突出显示某些网格行。为了获得最佳性能优势，您应该`gridview: true`另外使用。顺便说一句**，我建议您`gridview: true`在所有 jqGrids**中使用。

回调的使用`rowattr`非常简单：

```
gridview: true,
rowattr: function (rd) {
    if (rd.GroupHeader === "1") { // verify that the testing is correct in your case
        return {"class": "myAltRowClass"};
    }
} 
```

CSS 类`myAltRowClass`应该定义突出显示行的背景颜色。

您可以在[此处](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridChangeRowBackgroundBasedOnCheckboxes3.htm)找到相应的演示：

![在此处输入图像描述](../Images/a29db5a9e6154d9d4da1d280f2facdee.png)

因为在您的演示中，您只需要突出显示而不选择我在演示中未使用的行`multiselect: true`。如果`multiselect: true`它以完全相同的方式工作。

在我的回答结束时，我想建议您使用[列模板](https://stackoverflow.com/a/6047856/315935)。该功能将使您的代码更短、更易读且易于维护。您需要执行以下操作：

*   您可以在`cmTemplete`. 在你的情况下，它可能是

```
cmTemplate: {align: 'center', sortable: false, editable: true, width: 80} 
```

*   然后您可以定义一些变量来描述您在某些列中经常使用的常见属性。例如：

```
var myCheckboxTemplate = {formatter: 'checkbox', edittype: 'checkbox', type: 'select',
        editoptions: {value: "1:0"}},
    myTextareaTemplate = {edittype: "textarea",
        editoptions: {size: "30", maxlength: "30"}}; 
```

*   之后，您可以使用其中的内容`myCheckboxTemplate`，`myTextareaTemplate`在`colModel`您的情况下将减少到以下内容

```
colModel: [
    {name: 'TypeID', index: 'TypeID', width: 350, hidden: true, edittype: "select",
        editoptions: {value: getTypeID()}, editrules: { edithidden: true}},
    {name: 'Order1', index: 'Order1', template: myTextareaTemplate},
    {name: 'Order2', index: 'Order2', template: myTextareaTemplate},
    {name: 'Order3', index: 'Order3', template: myTextareaTemplate},
    {name: 'Description', index: 'Description', width: 140, template: myTextareaTemplate},
    {name: 'Notes', index: 'Notes', width: 120, template: myTextareaTemplate},
    {name: 'Measure', index: 'Measure', template: myTextareaTemplate},
    {name: 'UnitPrice', index: 'UnitPrice', width: 100, editable: false, template: myTextareaTemplate},
    {name: 'Remarks', index: 'Remarks', width: 140, template: myTextareaTemplate},
    {name: 'UnitCost', index: 'UnitCost', width: 100, template: myTextareaTemplate},
    {name: 'Service', index: 'Service', width: 120, template: myTextareaTemplate},
    //If the GroupHeader is true the row background is yellow
    {name: 'GroupHeader', index: 'GroupHeader', width: 100, template: myCheckboxTemplate},
    {name: 'IsGroup', index: 'IsGroup', template: myCheckboxTemplate}
],
cmTemplate: {align: 'center', sortable: false, editable: true, width: 80}, 
```

# ruby-on-rails - 仅允许数字的正则表达式，并且必须以单个“#”符号结尾

> ID：10529956
> 
> 赞同：1
> 
> 时间：2012-05-10T08:13:39.157
> 
> 标签：ruby-on-rails, regex

嗨，我想验证一个字符串，其中只允许使用数字并且只有一个 # 符号

结束。我使用它，但它允许在末尾使用双 # 符号。

```
 /^[0-9]+#/ 
```

我如何将其改进为仅允许在字符串末尾使用单个 # 符号，例如 1345#

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:24:27.187

不要使用`^`和`$`。使用`\A`and`\z`代替！这是一个大问题！

```
/\A[0-9]+#\z/ 
```

`^`并`$`用于指定**LINE 的结尾**，而不是 sting！

```
# don't do this!!!
/^[0-9]+\#$/ =~ "12#\nfoo" # MATCHES!!! 
```

我希望它会帮助别人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:15:59.647

用于`$`匹配字符串的结尾

```
/^[0-9]+#$/ 
```

# c# - 在 MVC 3 中创建局部视图

> ID：10529961
> 
> 赞同：0
> 
> 时间：2012-05-10T08:14:07.877
> 
> 标签：c#, asp.net, asp.net-mvc-3

我尝试在 MVC 3 中创建数据驱动菜单。所以我完成了以下代码：

模型 ：

```
#region MenuTree
    public class MenuTree : BusinessObject
    {

        #region  Constructor
        public MenuTree()
        {

        }
        #endregion

        #region Property
        #region ParentID
        private int _nParentID;
        public int ParentID
        {
            get { return _nParentID; }
            set { _nParentID = value; }
        }
        #endregion
        #region MenuName
        private string _sMenuName;
        public string MenuName
        {
            get { return _sMenuName; }
            set { _sMenuName = value; }
        }
        #endregion
        #region LinkText
        private string _sLinkText;
        public string LinkText
        {
            get { return _sLinkText; }
            set { _sLinkText = value; }
        }
        #endregion
        #region ActionName
        private string _sActionName;
        public string ActionName
        {
            get { return _sActionName; }
            set { _sActionName = value; }
        }
        #endregion
        #region ControllerName
        private string _sControllerName;
        public string ControllerName
        {
            get { return _sControllerName; }
            set { _sControllerName = value; }
        }
        #endregion
        #endregion

        #region Functions
        public MenuTree Get(int MenuTreeID)
        {
            return MenuTreeService.Instance.Get(new ID(MenuTreeID));
        }

        public ID Save()
        {
            return MenuTreeService.Instance.Save(this);
        }
        public void Delete()
        {
            MenuTreeService.Instance.Delete(ID);
        }
        #endregion
    } 
```

控制器部分：

```
 public class TreeMenuController : Controller
        {
            //
            // GET: /TreeMenu/

            public ActionResult Index()
            {
                return View(MenuTrees.Gets());
            }

        }

view : 

@model ESimSolMVC05.Models.MenuTrees
@{
    ViewBag.Title = "Index";
}

<table>
    <thead> 
    <tr>
        <th> ID </th>
        <th> ParentID</th>
        <th> Menu Name</th>      
    </tr>
    </thead>
    <tbody>

    @foreach (ESimSolMVC05.Models.MenuTree item in Model)
    {
    <tr>
        <td>@Html.DisplayFor(modelItem => item.ObjectID)</td>
        <td>@Html.DisplayFor(modelItem => item.ParentID)</td>
        <td>@Html.DisplayFor(modelItem => item.MenuName)</td>       
    </tr>

    }
</tbody>
</table> 
```

然后我尝试使用以下代码将我的视图称为 _layout 中的部分视图：

```
@Html.Partial("~/Views/TreeMenu/index.cshtml") 
```

但是当我运行我的项目时，我得到了一个例外

我的异常消息是：对象引用未设置为对象的实例。

任何人建议我我可以称其为局部视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:16:31.603

```
public PartialViewResult Index()
{
     return PartialView(MenuTrees.Gets());
} 
```

采用：

```
@Html.Partial("Index","TreeMenu") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:00:22.077

将操作更改为

```
public ActionResult Index()
{
     return PartialView(MenuTrees.Gets());
} 
```

在 _layout 页面中

```
@Html.Action("Index","TreeMenu") 
```

# java - 创建 JSP 布局模板的最佳方法是什么？

> ID：10529963
> 
> 赞同：38
> 
> 时间：2012-05-10T08:14:14.320
> 
> 标签：java, jsp, jstl

> **可能重复：**
> [使模板更容易的 JSP 技巧？](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier)

我是 JSP 和 Servlet 的新手，我想知道是否有一种巧妙的方法来创建布局 jsp 并在类似的 jsp 页面上重用它，比如 asp.net 母版页。

我用谷歌搜索，有人说使用模板 [http://java.sun.com/developer/technicalArticles/javaserverpages/jsp_templates](http://java.sun.com/developer/technicalArticles/javaserverpages/jsp_templates) 使用 jstl 标签库。它说要放置这样的标签：

```
<%@ taglib uri='/WEB-INF/tlds/template.tld' prefix='template' %> 
```

但我收到错误（因为 jstl.jar 和 standard.jar 在 WEB-INF/lib/ 目录中）。

~~但是有人说jstl模板有问题根据这个 [Struts OR Tiles OR ???...... JSP模板解决方案](https://stackoverflow.com/questions/7155998/struts-or-tiles-or-jsp-template-solution)~~

我很乐意帮助我了解最好的方法。

编辑：我需要将页面的布局拆分为内容、标题等部分，并将这些部分设置在使用布局模板的页面中，就像 asp.net 母版页一样。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-27T19:19:43.697

将以下内容放入 WEB-INF/tags/genericpage.tag

```
<%@tag description="Overall Page template" pageEncoding="UTF-8"%>
<%@attribute name="header" fragment="true" %>
<%@attribute name="footer" fragment="true" %>
<html>
  <body>
    <div id="pageheader">
      <jsp:invoke fragment="header"/>
    </div>
    <div id="body">
      <jsp:doBody/>
    </div>
    <div id="pagefooter">
      <jsp:invoke fragment="footer"/>
    </div>
  </body>
</html> 
```

要使用这个：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="t" tagdir="/WEB-INF/tags" %>

<t:genericpage>
    <jsp:attribute name="header">
      <h1>Welcome</h1>
    </jsp:attribute>
    <jsp:attribute name="footer">
      <p id="copyright">Copyright 1927, Future Bits When There Be Bits Inc.</p>
    </jsp:attribute>
    <jsp:body>
        <p>Hi I'm the heart of the message</p>
    </jsp:body>
</t:genericpage> 
```

这正是你认为的那样！

这是 Will Hartung 在[此链接](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier)上的精彩回答的一部分。

# php - 在 Codeigniter 中将 javascript 变量从视图发送到控制器

> ID：10529964
> 
> 赞同：5
> 
> 时间：2012-05-10T08:14:18.093
> 
> 标签：php, javascript, codeigniter, view, controller

> **可能重复：**
> [如何将 JavaScript 函数数据放入 PHP 变量中](https://stackoverflow.com/questions/419240/how-to-get-javascript-function-data-into-php-variable)

我在 order.php 视图中有一个 javascript 变量，我想将该变量发送到控制器，然后发送到模型以将其写入数据库。

例如：var myOrderString = "something" to order.php 控制器。

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:46:20.613

为了建立 rayan.gigs 和 antyrat 的答案，以下是对 rayan.gigs 答案的修复以及您将如何在控制器端接收该信息：

rayan.gigs 固定答案（修改以匹配下面的控制器示例）：

```
// your html
<script>
    var myOrderString = "something";

    $.ajax({
        type: "POST",
        url: <?= site_url('OrderController/receiveJavascriptVar'); ?>
        data: {"myOrderString": myOrderString},  // fix: need to append your data to the call
        success: function (data) {
        }
    });
</script> 
```

[jQuery AJAX 文档](http://api.jquery.com/jQuery.ajax/)解释了 AJAX 函数可用的不同函数和参数，如果您不熟悉 jQuery 的 AJAX 功能，我建议您阅读它。即使您不需要成功回调，您可能仍希望实现错误，以便您可以重试 AJAX 调用、记录错误或在适当时通知用户。

antyrat（修改为适合下面的控制器示例）：

```
<form action="<?= site_url('OrderController/receiveJavascriptVar'); ?>" method="POST"  id="myForm">
  <input type="hidden" name="myOrderString" id="myOrderString">
</form>
<script>
  var myOrderString = "something";
  document.getElementById('myOrderString').value = myOrderString;
  document.getElementById('myForm');
</script> 
```

对于上述两种情况，控制器可能如下所示：

```
<?php
    class OrderController extends CI_Controller
    {
        public function receiveJavascriptVar()
        {
            $myJSVar = $this->input->post('myOrderString');
            // push to model
        }
    }
?> 
```

我会推荐 rayan.gigs 方法而不是滥用表格。但是，如果您尝试提交用户信息或在现有表单提交的同时提交信息，您可以使用 antyrat 的方法并插入您在渲染时或通过 javascript 填写的隐藏项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:16:19.187

您想将 var 从视图发送到另一个控制器 ..... 这意味着新请求

使用 Ajax 请求很容易做到

**在视图中**

```
 // your html
 <script>
  var X = "bla bla ";

   $.ajax
     ({
     type: "POST",
     url: // ur controller,
     success: function (html)
                            {
     }
     });

 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:19:00.027

您可以创建`<form>`带有隐藏字段的简单 html。将您的 JS 变量分配给该字段并提交表单。

简单的例子：

```
<form action="order.php" id="myForm">
  <input type="hidden" name="myOrderString" id="myOrderString">
</form>
<script>
  var myOrderString = "something";
  document.getElementById('myOrderString').value = myOrderString;
  document.getElementById('myForm');
</script> 
```

现在在`order.php`你将`_GET`有价值`myOrderString`。

您也可以简单地使用 AJAX 来完成。

# c# - 实体对象和 NHibernate 会话

> ID：10529968
> 
> 赞同：3
> 
> 时间：2012-05-10T08:14:36.320
> 
> 标签：c#, silverlight, nhibernate, entity

我们的第一个 NHibernate 项目进展顺利。但是，我仍然没有完全理解如何在我们的场景中管理会话和对象。

因此，我们在持久对象模型中配置系统结构，使用 NHibernate 存储在数据库中。

该系统由物理设备组成，应用程序在服务进程中对其进行监控。所以在服务启动时，我们在服务中实例化设备对象，并根据从设备接口读取的数据更新它们的状态。对象模型在服务的生命周期内保持活动状态。

该服务还为 Silverlight 客户端提供服务，这些客户端显示对象数据并且还可以操作一些对象。但是它们必须访问服务用于监视的相同对象，例如，因为对象也有内存中的数据，这些数据不会持久化。（是的，我们使用 DTO 对象将数据实际传输到客户端。）

由于该服务是一个多线程系统，因此问题是应该如何管理 NHibernate 会话。

我现在正在考虑一种方法，我们只需要一个后台线程来处理后台的对象持久性，而其他线程只需将“SaveRequests”放置到我们的存储库中，而不是直接访问 NHibernate 会话。通过这种方式，我可以为服务使用单个会话，并完全独立于访问对象的服务和客户端来管理 NHibernate 层。

我还没有找到任何关于这种设置的文档，因为每个人都在建议一个 session-per-request 模型或一些变体。但如果我做对了，如果我在一个会话中实例化一个对象并将其保存在另一个会话中，它就不是同一个对象——而且 NHibernate 似乎也会在数据库中创建一个新条目。

我也试图弄清楚 IOC 容器在这种情况下的作用，但我没有找到任何有用的例子来证明它们真的可以帮助我。

我在正确的轨道上还是应该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:21:30.043

将 ISession 视为一个工作单元。您需要在应用程序的上下文中定义什么构成工作单元。工作单元是围绕一系列较小操作的边界，这些操作构成完整的功能性任务（完整和功能性由您在应用程序设计中定义）。是在您的服务响应 Silverlight 客户端请求还是其他外部请求时？是在服务唤醒以在计时器上做一些工作的时候吗？上述所有的？

您希望为该工作单元创建会话，并在完成时处理它。不建议您使用长时间运行的 ISession 实例，其中操作会懒惰地使用它们可以找到的任何环境 ISession。

这个想法通常是这样描述的：

1.  我需要做一些工作（因为我正在响应一个事件，无论是传入的请求还是计时器上的工作，都没有关系）。
2.  因此，我需要开始一个新的工作单元（这有助于我跟踪执行这项工作时需要执行的所有操作）。
3.  工作单元开始一个新的 ISession 来跟踪我的工作。
4.  我做我的工作。
5.  如果我能够成功完成我的工作，我的所有更改都应该被刷新并提交
    1.  如果没有，请回滚我的所有更改。
6.  自己清理后（处理 ISession 等）。

# jstree - jsTree 删除文本 标签

> ID：10529971
> 
> 赞同：0
> 
> 时间：2012-05-10T08:14:48.390
> 
> 标签：jstree

我第一次尝试 jsTree ，并且有一个问题，在调用之后`jstree()`，我的元素中的文本`<li>`消失了。通话后，我的树如下所示：

```
<div id="assessment-treeview" class="jstree jstree-0 jstree-focused jstree-classic">
    <ul>
        <li class="jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins>
            <ul style="">
                <li class="jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins>
                    <ul style="">
                        <li class="jstree-last jstree-leaf"><ins class="jstree-icon">&nbsp;</ins></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

在调用之前它看起来像这样：

```
<div id="assessment-treeview">
    <ul>
        <li>Specific Outcomes
            <ul>
                <li>[section: name not available for import]
                    <ul>
                        <li>[outcome: name not available for import] </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

jstree 调用如下所示：

```
$("#assessment-treeview").jstree({ "themes": { "theme": "classic" } }); 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:37:11.247

jsTree 不喜欢“li”标签内的纯文本节点。当我将项目文本放入像“跨度”这样的标签中时，一切都恢复正常了。

从上面的问题代码：

```
<li><span>Specific Outcomes</span>
    <ul>
    .        
    .       
    </ul>
</li> 
```

# cuda - 多GPU基本用法

> ID：10529972
> 
> 赞同：24
> 
> 时间：2012-05-10T08:14:48.533
> 
> 标签：cuda, gpu, multi-gpu

如何使用两个设备来提高例如以下代码的性能（向量总和）？是否可以“同时”使用更多设备？如果是，我如何管理向量在不同设备的全局内存上的分配？

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>
#include <cuda.h>

#define NB 32
#define NT 500
#define N NB*NT

__global__ void add( double *a, double *b, double *c);

//===========================================
__global__ void add( double *a, double *b, double *c){

    int tid = threadIdx.x + blockIdx.x * blockDim.x; 

    while(tid < N){
        c[tid] = a[tid] + b[tid];
        tid += blockDim.x * gridDim.x;
    }

}

//============================================
//BEGIN
//===========================================
int main( void ) {

    double *a, *b, *c;
    double *dev_a, *dev_b, *dev_c;

    // allocate the memory on the CPU
    a=(double *)malloc(N*sizeof(double));
    b=(double *)malloc(N*sizeof(double));
    c=(double *)malloc(N*sizeof(double));

    // allocate the memory on the GPU
    cudaMalloc( (void**)&dev_a, N * sizeof(double) );
    cudaMalloc( (void**)&dev_b, N * sizeof(double) );
    cudaMalloc( (void**)&dev_c, N * sizeof(double) );

    // fill the arrays 'a' and 'b' on the CPU
    for (int i=0; i<N; i++) {
        a[i] = (double)i;
        b[i] = (double)i*2;
    }

    // copy the arrays 'a' and 'b' to the GPU
    cudaMemcpy( dev_a, a, N * sizeof(double), cudaMemcpyHostToDevice);
    cudaMemcpy( dev_b, b, N * sizeof(double), cudaMemcpyHostToDevice);

    for(int i=0;i<10000;++i)
        add<<<NB,NT>>>( dev_a, dev_b, dev_c );

    // copy the array 'c' back from the GPU to the CPU
    cudaMemcpy( c, dev_c, N * sizeof(double), cudaMemcpyDeviceToHost);

    // display the results
    // for (int i=0; i<N; i++) {
    //      printf( "%g + %g = %g\n", a[i], b[i], c[i] );
    //  }
    printf("\nGPU done\n");

    // free the memory allocated on the GPU
    cudaFree( dev_a );
    cudaFree( dev_b );
    cudaFree( dev_c );
    // free the memory allocated on the CPU
    free( a );
    free( b );
    free( c );

    return 0;
} 
```

先感谢您。米歇尔

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-10T09:43:22.423

自 CUDA 4.0 发布以来，您所询问的类型的多 GPU 计算相对容易。在此之前，您需要使用多线程主机应用程序，每个 GPU 一个主机线程和某种线程间通信系统，以便在同一主机应用程序中使用多个 GPU。

现在可以对主机代码的内存分配部分执行类似的操作：

```
double *dev_a[2], *dev_b[2], *dev_c[2];
const int Ns[2] = {N/2, N-(N/2)};

// allocate the memory on the GPUs
for(int dev=0; dev<2; dev++) {
    cudaSetDevice(dev);
    cudaMalloc( (void**)&dev_a[dev], Ns[dev] * sizeof(double) );
    cudaMalloc( (void**)&dev_b[dev], Ns[dev] * sizeof(double) );
    cudaMalloc( (void**)&dev_c[dev], Ns[dev] * sizeof(double) );
} 
```

（免责声明：用浏览器编写，从未编译，从未测试，使用风险自负）。

这里的基本思想是，`cudaSetDevice`当您在设备上执行操作时，您可以在设备之间进行选择。所以在上面的代码片段中，我假设了两个 GPU 并在每个上分配了内存 [(N/2) 在第一个设备上是双倍的，在第二个设备上是 N-(N/2)]。

从主机到设备的数据传输可以很简单：

```
// copy the arrays 'a' and 'b' to the GPUs
for(int dev=0,pos=0; dev<2; pos+=Ns[dev], dev++) {
    cudaSetDevice(dev);
    cudaMemcpy( dev_a[dev], a+pos, Ns[dev] * sizeof(double), cudaMemcpyHostToDevice);
    cudaMemcpy( dev_b[dev], b+pos, Ns[dev] * sizeof(double), cudaMemcpyHostToDevice);
} 
```

（免责声明：用浏览器编写，从未编译，从未测试，使用风险自负）。

然后，代码的内核启动部分可能类似于：

```
for(int i=0;i<10000;++i) {
    for(int dev=0; dev<2; dev++) {
        cudaSetDevice(dev);
        add<<<NB,NT>>>( dev_a[dev], dev_b[dev], dev_c[dev], Ns[dev] );
    }
} 
```

（免责声明：用浏览器编写，从未编译，从未测试，使用风险自负）。

请注意，我在内核调用中添加了一个额外的参数，因为内核的每个实例都可以使用不同数量的数组元素来处理。我将把它留给你来制定所需的修改。但是，同样，基本思想是相同的：用于`cudaSetDevice`选择给定的 GPU，然后以正常方式在其上运行内核，每个内核都有自己独特的参数。

您应该能够将这些部分组合在一起以生成一个简单的多 GPU 应用程序。在最近的 CUDA 版本和硬件中还有许多其他功能可用于辅助多个 GPU 应用程序（如统一寻址、点对点设施更多），但这应该足以让您入门。CUDA SDK 中还有一个简单的多 GPU 应用程序，您可以查看更多想法。

# node.js - 在 Node.js 中生成进程的正确语法是什么？

> ID：10529973
> 
> 赞同：2
> 
> 时间：2012-05-10T08:15:02.623
> 
> 标签：node.js, mocha.js, spawn

我试图跟随

[http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

在努力做

```
./node_modules/.bin/mocha --reporter json -u tdd 
```

我试过了

```
var mocha    = spawn('./node_modules/.bin/mocha', ['--reporter json -u tdd']); 
```

但我收到以下错误

```
error: unknown option `--reporter json -u tdd' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:21:52.647

快速查看您提供的参考 URL，您的括号中的参数似乎需要分开：

```
var mocha    = spawn('./node_modules/.bin/mocha', ['--reporter','json','-u','tdd']); 
```

# ios - iOS 视频播放器 FFmpeg

> ID：10529976
> 
> 赞同：0
> 
> 时间：2012-05-10T08:15:05.117
> 
> 标签：ios, ffmpeg, media-player, xcode4.3

所以我想为 iPhone 制作一个可以播放实时 mms:// 视频流的应用程序。

我环顾四周，到处都说我需要 FFmpeg 才能完成它。所以我成功编译了FFmpeg库，但是现在

我是否必须将 mms:// 链接转换为 .m3u8 链接？或者我可以只使用 apples AV Foundation Framework 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:20:20.627

You need libmms as well as the ffmpeg libs ,however as think the latest versions of ffmpeg has the code built in so you may not need libmms mms is just a streaming protocol so the actual format is likely some mpeg variant, mp4, h264.

Once you have that you extract the frames , and use ffmpeg avcodec_decode_video2 to decode to an avFrame. Just like any other video.

# hibernate - 如何检索经审计的关系修订？

> ID：10529982
> 
> 赞同：2
> 
> 时间：2012-05-10T08:15:32.807
> 
> 标签：hibernate, hibernate-envers

这是我的用例

我有两个实体：Personn 和 Email（@OneToMany 关系）。两者都经过审核。

首先我创建一个新的 Personn，带有一个电子邮件（=> 他们都有一个修订版 1），然后我修改了电子邮件（=> 电子邮件有一个修订版 2，但 Personn 只有一个修订版 1）

在 Web 应用程序中，最终用户只有一个视图来显示人员的属性以及他的电子邮件属性。在此视图中，我想显示此 Personn 的所有现有修订。但是当我查询审计系统时，它没有显示修订版 2，因为 Personn 没有被修改。

我理解技术问题，但从最终用户的角度来看，他希望看到修订版 2，因为他修改了人员的电子邮件！他不知道（也不必知道）我们决定将这些信息分成 2 个 Java 对象。当然，这个问题不仅适用于 Personn-Email 关系（我在 Personn 和其他显示在同一视图中的对象之间有很多关系 - Adress、Job、Site、Card 等等）

我想到了2个解决方案：

1-查询所有关系以了解是否存在修订（但我想它会生成一个大请求或多个请求 - 我有很多关系）。

2- 将“hibernate.listeners.envers.autoRegister”设置为 false，编写我自己的 EnversIntegrator 和事件实现。在事件实现中（覆盖默认的 Envers 实现），当电子邮件的属性被修改时，我将为 Personn 创建一个 ModWorkUnit（当然它不会被硬编码：在 personn 字段上添加一个自定义注释，如 @AuditedPropagation）。该解决方案的缺陷是即使没有修改，也要为 Personn 创建很多行。

您如何看待这些解决方案？您知道解决这种用例的更好方法吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:52:25.197

我尝试实施第二个解决方案：

1.  首先我的集成器添加了一个新的更新后监听器（RevisionOnCollectionPostUpdateEventListenerImpl）

    ```
    public class RevisionOnCollectionUpdateIntegrator implements Integrator {
    private static final CoreMessageLogger LOG = Logger.getMessageLogger(CoreMessageLogger.class, RevisionOnCollectionUpdateIntegrator.class.getName());

    public static final String REGISTER_ON_UPDATE = "org.hibernate.envers.revision_on_collection_update";

    @Override
    public void integrate(Configuration configuration, SessionFactoryImplementor sessionFactory, SessionFactoryServiceRegistry serviceRegistry) {

        final boolean autoRegister = ConfigurationHelper.getBoolean(REGISTER_ON_UPDATE, configuration.getProperties(), true);
        if (!autoRegister) {
            LOG.debug("Skipping 'revision_on_collection_update' listener auto registration");
            return;
        }

        EventListenerRegistry listenerRegistry = serviceRegistry.getService(EventListenerRegistry.class);
        listenerRegistry.addDuplicationStrategy(EnversListenerDuplicationStrategy.INSTANCE);

        final AuditConfiguration enversConfiguration = AuditConfiguration.getFor(configuration, serviceRegistry.getService(ClassLoaderService.class));
        if (enversConfiguration.getEntCfg().hasAuditedEntities()) {
            listenerRegistry.appendListeners(EventType.POST_UPDATE, new RevisionOnCollectionPostUpdateEventListenerImpl(enversConfiguration));
        }
    } 
    ```

2.  然后是更新后的监听器（扩展）：

    ```
    public class RevisionOnCollectionPostUpdateEventListenerImpl extends EnversPostUpdateEventListenerImpl {
    protected final void generateBidirectionalWorkUnits(AuditProcess auditProcess, EntityPersister entityPersister, String entityName, Object[] newState,
            Object[] oldState, SessionImplementor session) {
        // Checking if this is enabled in configuration ...
        if (!getAuditConfiguration().getGlobalCfg().isGenerateRevisionsForCollections()) {
            return;
        }

        // Checks every property of the entity, if it is an "owned" to-one relation to another entity.
        // If the value of that property changed, and the relation is bi-directional, a new revision
        // for the related entity is generated.
        String[] propertyNames = entityPersister.getPropertyNames();

        for (int i = 0; i < propertyNames.length; i++) {
            String propertyName = propertyNames[i];
            RelationDescription relDesc = getAuditConfiguration().getEntCfg().getRelationDescription(entityName, propertyName);
            if (relDesc != null && relDesc.isBidirectional() && relDesc.getRelationType() == RelationType.TO_ONE && relDesc.isInsertable()) {
                // Checking for changes
                Object oldValue = oldState == null ? null : oldState[i];
                Object newValue = newState == null ? null : newState[i];

                        // Here is the magic part !!!!!!!!!
                        // The super class verify if old and new value (of the owner value) are equals or not
                        // If different (add or delete) then an audit entry is also added for the owned entity
                        // When commented, an audit row for the owned entity is added when a related entity is updated
            //  if (!Tools.entitiesEqual(session, relDesc.getToEntityName(), oldValue, newValue)) {
                    // We have to generate changes both in the old collection (size decreses) and new collection
                    // (size increases).
                    if (newValue != null) {
                        addCollectionChangeWorkUnit(auditProcess, session, entityName, relDesc, newValue);
                    }

                    if (oldValue != null) {
                        addCollectionChangeWorkUnit(auditProcess, session, entityName, relDesc, oldValue);
                    }
            //  }
            }
        }
    } 
    ```

它似乎有效，但我必须进行更多测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:01:06.677

我无法使自定义更新后侦听器解决方案工作。addCollectionChangeWorkUnit 似乎直到休眠 4.1 才存在，它被标记为私有。EnversPostUpdateEventListenerImpl 似乎出现在休眠 4.0 的某个时刻

我通过在相当于您的 A 实体上添加隐藏的 lastUpdated 日期字段解决了我的问题。

```
@Entity
public class A {
    private Date lastModified;
    @OneToMany(mappedBy = "a", cascade = CascadeType.ALL )
    private List<B> blist;
    public void touch(){
        lastModified=new Date();
    }
} 
```

在相关实体（如您的 B 字段）中，我添加了以下内容：

```
public class B {
    @ManyToOne
    private A a; 

    @PreUpdate
    public void ensureParentUpdated(){
        if(a!=null){
            a.touch();
        }
    }
} 
```

这确保了无论何时将修订添加到 B，都会将修订添加到 A，即使它需要许多实体中的自定义代码。

# iphone - 情节提要未显示 Tab Xcode iOS

> ID：10529984
> 
> 赞同：0
> 
> 时间：2012-05-10T08:15:36.020
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller, storyboard

我的故事板有问题。

我有一个标签栏控制器和一个导航栏控制器。[我在本教程](http://maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part1/)的帮助下创建了我的应用程序。

前 3 个选项卡工作得很好。我使用 seque 在前 3 个选项卡上创建了一些详细视图。现在我想在我的标签栏中有第四个和第五个标签。

所以我回到教程并添加了标签。在情节提要中，一切看起来都很完美。见[屏幕](http://files.beger.org/storyboard.tiff)。当我构建应用程序时，我的新标签没有出现。

我添加了另一个以检查是否犯了错误。但这里也一样：它没有出现。

我在教程中创建了一个新项目，它可以工作！但为什么不在我的旧项目中呢？我搞砸了一些构建设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:01:14.317

我不确定是否是您没有代码的情况，但我最近在我的 Storyboard 中添加了另一种语言以及我所做的所有更改，因为这仅适用于英语 Storyboard。所以，当我在我的设备上运行应用程序（不是英语）时，我看到的东西与 Storyboard 不同。

尝试将您的语言更改为英语并告诉我们您所看到的。

# python - 如何在python中有两列的文件中对数据进行排序

> ID：10529986
> 
> 赞同：1
> 
> 时间：2012-05-10T08:15:50.843
> 
> 标签：python, sorting

我有包含以下数据的文件：

```
12, 9
13, 9  
45, 23
1, 4 
0, 8
91, 45
638, 56
123, 3  
2, 9 
```

现在我需要做的是像这样排序：

```
0, 8
1, 4
2, 9
12, 9
13, 9
45, 23
91, 45
123, 3
638, 56 
```

我试过使用：

```
import sys,csv    
import operator
reader = csv.reader(open('filename.txt'),delimiter=',')
sort = sorted(reader,key=operator.itemgetter(0),reverse=False) 
```

但这对我不起作用。它根据第一个位置排列列，而不是按我想要的那样排列。即：

```
0, 8
1, 4
12, 9
123, 3
13, 9
2, 9
45, 23
638, 56
91, 45 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:21:00.697

```
sorted(reader, key=lambda row: int(row[0])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:22:32.057

我相信您在应用您描述的解决方案时得到的结果与预期的一样。剩下的就是您需要将第一列转换为整数而不是使用字符串值（否则您将获得字典排序）：

```
import sys,csv
import operator
reader = csv.reader(open('filename.txt'),delimiter=',')
sort = sorted(reader,key=lambda row: int(row[0]),reverse=False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:23:35.280

我认为您正在那里对字符串进行排序。怎么样：

```
sort = sorted(tuple(int(x) for x in row) for row in reader) 
```

# sqlite - 批处理文件在 sqlite 中使用西里尔字体插入不正确的数据

> ID：10529992
> 
> 赞同：0
> 
> 时间：2012-05-10T08:16:00.253
> 
> 标签：sqlite, encoding, batch-file

我有一个简单的批处理，它将特定记录插入到 sql db：

```
set /P theuserinput="Enter the filename: "
sqlite3 test "insert into films (title, date, start_time) values ('%theuserinput%', '%date%', '%time%');" 
```

它适用于拉丁文文件名，但是当我尝试将它与西里尔文文件名一起使用时，它会插入一些不可读的字符。

事实证明它工作正常，我只需要在 SQLite Maestro 中查看那些西里尔文记录，而不是在 sqlite3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:40:56.017

您可以在执行 sqlite 插入到西里尔字母 pgae 之前尝试更改代码页`chcp 855`

或者到 65001 UTF-8，但是你需要阻止你的命令

```
set /P theuserinput="Enter the filename: "
(
  chcp 65001
  sqlite3 test "insert into films (title, date, start_time) values ('%theuserinput%', '%date%', '%time%');" 
  chcp 850
) 
```

# c# - 从数据读取器加载数据

> ID：10529997
> 
> 赞同：0
> 
> 时间：2012-05-10T08:16:22.387
> 
> 标签：c#, .net, ado.net, database-schema

我想从我的响应数据读取器对象中读取列名和类型，因为我需要它来实例化一些对象。我出来了：

```
using (db.sqlConnection) {
    db.sqlConnection.Open();
    using (var cmd = new SqlCommand("areaGetStreetTypes", db.sqlConnection)) {
        cmd.CommandType = CommandType.StoredProcedure;
        using (SqlDataReader dr = cmd.ExecuteReader(CommandBehavior.KeyInfo)) {
            DataTable dt = dr.GetSchemaTable();
            foreach (DataRow myField in dt.Rows) {
                foreach (DataColumn coloana in dt.Columns) {
                    string c1 = coloana.ColumnName;  //column name ???
                    string c2 = coloana.GetType().ToString(); //column type ??
                    Console.WriteLine(c1 + "  " + c2);
                }
            }
        }
    }
} 
```

但不工作。对于每一列返回我想打印（对于初学者）类似：

```
id_someID int32    
name string    
surname string     
ssn string 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:28:12.097

无需调用 GetSchemaTable 来获取每列的数据类型，因为 Reader 已经拥有所有这些详细信息

```
SqlCommand cmd = new SqlCommand(strSql, sqlConn);
SqlDataReader sdr;
sdr = cmd.ExecuteReader();
for (int i = 0; i < sdr.FieldCount; i++)
{
    string dataTypeName = sdr.GetDataTypeName(i); // Gets the type of the specified column in SQL Server data type format
    string FullName = sdr.GetFieldType(i).FullName; // Gets the type of the specified column in .NET data type format
    string specificfullname = sdr.GetProviderSpecificFieldType(i).FullName; //Gets the type of the specified column in provider-specific format
    //Now print the values
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:32:19.917

我认为您实际上想要类似的东西

```
DataTable dt = dr.GetSchemaTable();
foreach (DataRow myField in dt.Rows) 
{
    var name = myField["ColumnName"];
    var type = myField["DataTypeName"];
    Console.WriteLine("{0} {1}", name, type);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:21:07.750

使用`DataColumn.DataType`属性和`CommandBehavior.SchemaOnly`枚举成员。

# internet-explorer - 处理本地xml + xslt时为什么“XSLT8690：XSLT处理失败”

> ID：10529999
> 
> 赞同：1
> 
> 时间：2012-05-10T08:16:26.880
> 
> 标签：internet-explorer, xslt, browser, internet-explorer-9, quirks-mode

广泛的研究并没有让我理解为什么会发生以下情况 - 我希望 SO 社区可以提供帮助......

我将[为什么 HTML1113：文档模式从 IE9 标准重新启动到 Quirks](https://stackoverflow.com/questions/10457111/why-html1113-document-mode-restart-from-ie9-standards-to-quirks)`D:\...`中提到的文件复制到本地文件系统并在 IE9 中打开 xml（通过在 url 栏中指定路径）。
令人惊讶的是，该行为与打开网络版本完全不同。
现在我可以理解“我的电脑”区域设置不同于 Internet 区域的设置解释了下面提到的弹出窗口，但我不明白为什么结果不同以及为什么不自动选择怪癖模式，就像在在网络上打开 xml。

当我打开本地文件时，我得到以下信息：

![允许脚本](../Images/a922a242e3fe359789739fb0c7a9e4c1.png)

这无疑是由本地区域设置引起的。接下来，浏览器模式是 IE9（不是之前的自动怪癖），它在应用 XSLT 时失败：

![XSLT8690](../Images/9b4e4c0949c249f3e2f7680b1a8b28d9.png)

首先，我认为这是由 MSXML6 DOM 基本设置（例如`AllowXsltScript`未设置为 true）引起的，但我不再确定这一点，因为打开 Web 版本时一切正常。
那么为什么本地失败呢？

更奇怪的是，打开网络版本会导致自动怪癖模式和正确的结果，但是当我切换到本地文件的怪癖模式时，它在 MSXML6 DOM 对象上失败 - 实际上这对我来说比没有错误更有意义，因为怪癖模式可能只提供 MSXML3 （或者应该只提供 - 但是为什么网络版本中的自动怪癖可以？）。

![怪癖1](../Images/7a313613ccc2147efc90092d3bc65267.png)

接受后变为

![怪癖2](../Images/b4a2c9d21c657a3ccfa57ea7aadaef98.png)

现在，当再次选择 IE9 标准模式时，我得到

![IE9take2_console](../Images/133f55bf83a773b950790363a1d4d7c0.png)

结果是预期的

![IE9take2](../Images/d2dbdcb8a9b37c3c3bdd31b52c0ae17f.png)

使用本地文件时的背诵事件（除了区域设置差异）：

1.  IE9 标准模式 XSLT8690 错误
2.  切换到怪癖模式错误
3.  现在可以切换回 IE9 标准模式

打开网页版时背诵事件（除了区域设置的差异）：

1.  自动怪癖模式
2.  页面在怪癖中正确打开 - 显然 MSXML6 在自动怪癖模式下仍然使用
3.  切换到IE9标准模式也可以
4.  回到上面的怪癖模式错误（“参数不正确”）

**是什么导致了所有这些特殊的差异？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:30:08.633

这个花了我一些时间，但我明白了！

Paul Sweatte 的评论让我发现了很多已经绘制出来的问题，但也导致了一些未知的水域，但最终我开始直接通过注册表尝试 IE9 我的电脑区域安全设置，可惜无济于事，直到.....我查看了再次弹出 Internet 选项窗口，并注意到有不止一个地方可以更新安全设置.....

浏览所有与非区域相关的 IE9 设置，我选择了“高级”选项卡，并在安全小节中遇到了一个有希望的未选中选项：

`Allow active content to run in files on My computer`

将其更改（在本例中为`checked`）需要重新启动，但是当我这样做并重新打开本地 xml 文件时，它突然表现得像 web 一样：它`quirks mode`正确打开。此外，切换到 IE9 标准模式并返回到 quirks 模式的行为与 Web 模式相同。此外，关于“脚本通常是安全的”的弹出警告也不再存在。

这就解释了为什么`XSLT8690`会发生错误：xslt，或者可能只是其中的 javascript 被认为是`active content`.

故事结局？
对于这个问题，是的，但我仍然想知道为什么自动怪癖模式可以，但手动选择的怪癖不是。
我怀疑在第一次运行时会在自动切换到怪癖发生之前处理 xslt，那时不再需要 MSXML6，因为结果页面已经可用。但是当您以 quirks 模式打开 xml 时，它会尝试以 quirks 模式执行 xslt，并且由于可用的 MSXML3 而不是 MSXML6 而无法执行。