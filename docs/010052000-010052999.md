# StackOverflow 问答 10052000-10052999

# silverlight-4.0 - Telerik Silverlight RadComboBox 选定项目

> ID：10052002
> 
> 赞同：1
> 
> 时间：2012-04-07T05:16:28.293
> 
> 标签：silverlight-4.0, telerik

我在该控件中自定义 Telerik Datapager 控件，创建一个资源文件并添加一个组合框以更改网格的页面大小

```
<UserControl.Resources>
.......
<telerik:RadComboBox x:Name="CmbPageSize" MinWidth="40" telerik:StyleManager.Theme="{StaticResource Theme}" ItemsSource="{Binding Path=BindPageSize, Mode=TwoWay}" SelectedItem="{Binding Path=DataPagerPageSize_string, Mode=TwoWay}"></telerik:RadComboBox>
....... 
```

绑定一个组合

```
 public string DataPagerPageSize_string
    {
        get
        {
            if (_DataPagerPageSize_string == null || _DataPagerPageSize_string == string.Empty)
            {
                //DatapagerIndex = 1;
                return DefaultPageSize.ToString();

            }
            return _DataPagerPageSize_string;
        }
        set
        {
            _DataPagerPageSize_string = value;
            OnPropertyChanged("_DataPagerPageSize_string");

        }
    }
public List<string> BindPageSize
    {
        get
        {
            List<string> Pagerdata = new List<string>();

            Pagerdata.Add("10");
            Pagerdata.Add("20");
            Pagerdata.Add("50");
            Pagerdata.Add("100");
            Pagerdata.Add("250");
            Pagerdata.Add("500");
            Pagerdata.Add("750");
            Pagerdata.Add("1000");
            Pagerdata.Add("1500");
            Pagerdata.Add("2000");
            Pagerdata.Add("Automatic");
            Pagerdata.Add("All");

            return Pagerdata;
        }
    } 
```

如果我从组合框中选择一个值但我想从 Like 后面的代码中更改它，这可以正常工作

```
 EVP.DataPagerPageSize_string = "All"; 
```

这个 thigs 工作正常，但 Combobox 向我显示了一个旧值；如果我要检查一个属性，那么它会显示一个新设置的值，但组合框不会选择新值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:20:28.317

尝试改变

```
 OnPropertyChanged("_DataPagerPageSize_string"); 
```

到

```
 OnPropertyChanged("DataPagerPageSize_string"); 
```

删除下划线。

# javascript - 使用 Jquery 在多选框中选择多个值

> ID：10052006
> 
> 赞同：8
> 
> 时间：2012-04-07T05:16:49.780
> 
> 标签：javascript, jquery, selectedvalue, multiple-select

所以我有两个这样的多选框

```
<select id="foo" multiple="multiple">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select>

<select id="bar" multiple="multiple">
    <option value="1">Opt 1</option>
    <option value="2">Opt 2</option>
    <option value="3">Opt 3</option>
    <option value="4">Opt 4</option>
</select>
<a href="#" onclick="select()">Select</a> 
```

我想要做的是，当单击“选择”时，将选择“#bar”中与“#foo”中的选项具有相同值的任何选项。在这种情况下，应选择“#bar”中的 Opt 1 和 Opt 2。我不知道为什么我的 javascript 不起作用。我知道这一定很简单。我只是看不到它。:(所以我的Javascript函数如下：

```
function select(){
    var vals = new Array();
    var iter = 0;
    $("#foo option").each(function(){
        var v = $(this).val();
        $('#bar option').each(function(){
            if ($(this).val() == v)
            {
                vals[iter] = v;
                iter++;
                break;
            }
        });
    });
    $("#bar").val(vals);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T05:41:31.043

看看这个[http://jsfiddle.net/NtF8J/](http://jsfiddle.net/NtF8J/)

html

```
<select multiple>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>

<select multiple>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>

<button> random </button>​ 
```

jQuery

```
$(function(){
  $(document.body).delegate(
    'select:first', 'change', function(){
      $('select:not(:first)').val(
        $(this).val()
      )
    }
  )
  .delegate(
    'button', 'click', function(){
     $('select').val([1,2,3,4].filter(function(){return!!Math.round(Math.random() * 1)}))
    }
  )
});

​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T05:53:45.710

看到 KON 的例子后更新

[演示](http://jsfiddle.net/mplungjan/MJVKB/)

```
$("#sel").click(function(e) {
  e.preventDefault(); // cancel the link itself
  $("#bar").val($("#foo").val());
}); 
```

* * *

```
<a href="#" id="sel">Select</a> 
```

* * *

使用每个的旧示例

[演示](http://jsfiddle.net/mplungjan/uqSy9/)

```
$("#sel").click(function(e) { // when link clicked
  e.preventDefault();
  $("#foo option:selected ").each(function(){
    var v = $(this).attr("value"); // first select's value
    $('#bar option').each(function(){
      if ($(this).attr("value") == v) { 
        $(this).attr("selected",true); // select if same value
      }
    });
  });
}) 
```

# javascript - 在 javascript 中的 head 标签内编写脚本是最好的选择，为什么？

> ID：10052013
> 
> 赞同：1
> 
> 时间：2012-04-07T05:18:32.660
> 
> 标签：javascript

我知道，我问的是非常简单和愚蠢的问题，但我想知道 java 脚本中的每一件事。我们可以在头部或正文部分编写脚本标签。但是，在 javascript 中的 head 标签内编写脚本是最好的选择，为什么？

我知道一件事，它是连续处理的……除此之外，我想从各位专家那里了解其他原因。

将不胜感激。

提前致谢...：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:21:20.293

它并不总是最好的选择。

正如您所说，脚本是串行运行的。更重要的是，一旦在页面中看到它们就会立即运行......并且它们在运行时往往会占用浏览器，并使其无法加载内容和呈现页面。很多时候最好把脚本放在页面的末尾，正因为这个原因——当它们运行时，用户有一些东西可以看，所以延迟并不那么明显。

就个人而言，我只`head`在页面中的其他脚本需要它们时将脚本放在其中。图书馆之类的。在页面加载时实际执行操作的脚本会进入正文。

# android - Android访问soap服务

> ID：10052020
> 
> 赞同：0
> 
> 时间：2012-04-07T05:21:02.880
> 
> 标签：android, soap

我正在使用以下代码访问网络服务

```
public SoapObject getWeather() throws Exception
{
    SoapObject request = new SoapObject("http://www.freewebservicesx.com", "GetCurrentGoldPrice");
    //request.addProperty("PlaceName", city);
    request.addProperty("Username","myusername");
    request.addProperty("Password","pass");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    // It seems that it is a .NET Web service because it doesn't work without next line
    envelope.dotNet = true;

    HttpTransportSE transport = new HttpTransportSE("http://www.freewebservicesx.com/GetGoldPrice.asmx");
    transport.call("http://freewebservicesx.com/GetCurrentGoldPrice", envelope);

    return (SoapObject) envelope.getResponse();
}

public List<CharSequence> getWeatherForecast() 
{
    SoapObject obj = null;
    try {
        obj = getWeather();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
//error is being thrown here
        Log.e("error",e.getMessage());
    }
    SoapObject details = (SoapObject) obj.getProperty("GetCurrentGoldPriceResult");

    List<CharSequence> list = new ArrayList<CharSequence>(details.getPropertyCount());
    for (int i = 0; i < details.getPropertyCount(); i++) {
        Object property = details.getProperty(i);
        if (property instanceof SoapObject) {
            SoapObject weather = (SoapObject) property;
            String day = weather.getProperty("string").toString();
            String min = weather.getProperty("string").toString();
            //String max = weather.getProperty("MaxTemperatureF").toString();
            Log.v("ts is whait ai am ",day);

            list.add(day + " :: " + min);
        }
    }
    return list;
} 
```

[http://www.freewebservicesx.com/GetGoldPrice.asmx?op=GetCurrentGoldPrice](http://www.freewebservicesx.com/GetGoldPrice.asmx?op=GetCurrentGoldPrice)包含服务的详细信息。我收到一个失败的活页夹事务错误。

> 04-07 11:10:01.405：W/System.err(651)：SoapFault - 故障代码：'soap:Server' 故障字符串：'System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.ArgumentNullException：值不能为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:36:25.113

请换行：

```
envelope.dotNet = "true"; 
```

至

```
envelope.dotNet = "false"; 
```

因为“真”总是向网络服务器发送一个空值，所以设置一个假..

和其他东西..在你的代码中

```
request.addProperty("Username","myusername");

request.addProperty("Password","pass"); 
```

检查客户端和服务器端 Web 服务上的参数名称（用户名、密码）必须相同，这意味着它区分大小写。

希望代码对你有所帮助。

# php - 获取属性等于数字的xml数据

> ID：10052023
> 
> 赞同：0
> 
> 时间：2012-04-07T05:21:42.523
> 
> 标签：php, xml, find

我正在尝试实施 Expedia API，但遇到了问题。我需要获取具有特定属性号的父标签的描述标签。这是我尝试过的，但它不起作用：

```
$data->RoomTypes->RoomType['roomCode="17918"']->description; 
```

我不知道这是否是正确的语法。如果我要在 mysql 中查找它，它看起来像这样：

```
mysql_query("SELECT description FROM RoomType WHERE roomCode = '17918'"); 
```

我将如何使用 php 在 xml 中执行此操作？任何帮助将不胜感激！！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:32:31.020

一般来说，对于 XML 查询，节点属性必须以 a 开头以`@`进行匹配。您尚未指定正在使用的 XML 库，但如果它遵循约定/标准，您可能想要

```
$data->RoomTypes->RoomType['@roomCode="17918"']->description;
                            ^--- 
```

反而。

# asp.net - 使用 Cookie 和无 SQL 的 ASP.NET MVC3 角色身份验证？

> ID：10052025
> 
> 赞同：0
> 
> 时间：2012-04-07T05:21:56.580
> 
> 标签：asp.net, asp.net-mvc-3, roles

我正在尝试使用角色进行表单身份验证，我有 global.asax Application_AuthenticateRequest 方法从 cookie 中获取角色，效果很好。但我不知道在 Web.Config 中配置什么提供程序。我不想使用 SQL 服务器，只是使用 cookie。

这一行创建了 IPrincipal: (roles 是一个带有角色的字符串数组)

```
Context.User = new GenericPrincipal(Context.User.Identity, roles); 
```

最终目标是让 DataAnnotations 像 [Authorize(Roles = "Admin")] 和 IsInRole 方法工作。

此外，IsInRole 方法在 global.asax 中使用时效果很好，但在其他地方则不行。为什么不？

Web.config 目前配置如下：

```
<roleManager defaultProvider="DefaultRoleProvider" cacheRolesInCookie="true"> 
```

并且 DefaultProvider 很遗憾地无缘无故地连接到一些空的 SQL 数据库。

这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:35:23.450

更好的选择可能是使用[ASP.NET XmlProviders](http://aspnetxmlproviders.codeplex.com/)。（无数据库）

或者，如果您只是不想拥有 SQL 服务实例，但想要拥有某种类型的数据库的优势，请使用[ErikJ 的 Sql CE MembershipProvider/RoleProviders](http://erikej.blogspot.com/2010/08/sql-server-compact-40-aspnet-membership.html)。（博客提到 CE 4.0 还没有准备好投入生产，但那是很久以前的事了，现在可以在较小的生产环境中使用）。

**更新**

您当然可以扮演您自己的[AuthroizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)角色并在派生的授权属性类上覆盖 OnAuthorize。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:55:46.157

根据您所说的，您不需要自己的提供者。所以你可以阅读并简单地设置authenticrequest。

现在的问题是您要将它们存储在哪里。你想如何存储它们？你会只在cookie中设置它们吗？当然，您想要保留一些持久存储，否则当 cookie 消失时，您如何刷新他们的角色？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:00:47.490

为什么不直接使用内置角色提供程序并指定将角色缓存在 cookie 中，这样您在登录时只有一个数据库调用，然后它们会自动存储在 cookie 中。

```
<roleManager defaultProvider="DefaultRoleProvider" cacheRolesInCookie="true"> 
```

# shell - 如何从文件中获取 awk 输入并将我自己的文本添加到数据中？

> ID：10052028
> 
> 赞同：0
> 
> 时间：2012-04-07T05:22:36.117
> 
> 标签：shell, scripting, awk

假设我有一个用冒号分隔的文本文件。我了解如何使用`awk`. 但是，我想要做的是获取`awk`输出，然后通过使用 shell 脚本添加我自己的文本来显示它？例如，假设我的文本文件是：

```
England:London:GMT
USA:Washington:EST
France:Paris:GMT 
```

我想要做的是将此输入显示为以下格式：

```
COUNTRY: England
CAPITOL: London
TIMEZONE: GMT

COUNTRY: USA
CAPITOL: Washington
TIMEZONE: EST

COUNTRY: France
CAPITOL: Paris
TIMEZONE: GMT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:39:01.253

您可以使用以下`awk`命令：

```
awk -F: '{printf "COUNTRY: %s\nCAPITOL: %s\nTIMEZONE: %s\n\n",$1,$2,$3}' 
```

根据以下成绩单：

```
pax> echo 'England:London:GMT
...> USA:Washington:EST
...> France:Paris:GMT' |awk -F: '
...>     {printf "COUNTRY: %s\nCAPITOL: %s\nTIMEZONE: %s\n\n",$1,$2,$3}'
COUNTRY: England
CAPITOL: London
TIMEZONE: GMT

COUNTRY: USA
CAPITOL: Washington
TIMEZONE: EST

COUNTRY: France
CAPITOL: Paris
TIMEZONE: GMT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T05:25:07.483

您可以简单地打印额外的数据：

```
awk -F: '{ print "COUNTRY: " $1;
           print "CAPITOL: " $2;
           print "TIMEZONE: " $3;
           print "";
         }' text_file 
```

平原`print`在它打印的内容中添加了一个换行符。在`awk`中，字符串连接是通过将字符串（或变量）彼此相邻放置来完成的——不需要逗号或其他运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:59:21.933

你可以在没有 awk 的情况下做到这一点：

```
<FILE  tr : '\n' | 
    xargs printf "COUNTRY: %s\nCAPITOL: %s\nTIMEZONE: %s\n\n" 
```

其中 FILE 是您的数据文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T12:36:09.913

这可能对您有用：

```
sed 's/^/COUNTRY: /;s/:/\nCAPITOL: /2;s/:/\nTIMEZONE: /3;$!s/$/\n/' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T14:06:18.250

您可以在 shell 中使用 awk 而阻止代码：

```
 cat text | while read line 
  do
      echo $line | awk -F: '{print "COUNTRY: ", $1, "\nCAPITOL: ", $2, "\nTIMEZONE: ", $3, "\n"}'
  done 
```

# cakephp - cakephp 分页切换

> ID：10052031
> 
> 赞同：0
> 
> 时间：2012-04-07T05:24:04.457
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我有很多用户，我正在使用分页，但我的经理希望我有一个选项，可以在一个页面上看到所有用户。我怎样才能做到这一点。我在用户索引操作中有这个

```
public function index() {
                            $this->User->recursive = 0;
                            $this->set('users', $this->paginate());
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:41:00.950

（这个问题似乎太简单了……也许我理解错了？）

常规 find('all') 怎么样？

```
public function index($all = false) {
    $this->User->recursive = 0;

    if($all){
        $this->set('users', $this->User->find('all'));
    } else {
        $this->set('users', $this->paginate());
    }
} 
```

然后只需转到 /users/all

# python - 与某些扩展不匹配的正则表达式模式？

> ID：10052032
> 
> 赞同：12
> 
> 时间：2012-04-07T05:24:04.930
> 
> 标签：python, regex, lookbehind

我写了这个模式

```
^.*\.(?!jpg$|png$).+$ 
```

但是有一个问题 - 此模式匹配 file.name.jpg（2 点）

它在 filename.jpg 上正常工作（不匹配）。我试图弄清楚如何使它不匹配任何 .jpg 文件，即使文件名中有 2 个或更多点。我尝试使用向后看，但 python 抱怨没有使用固定宽度（我不确定这意味着什么，但文件名将是可变长度。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-07T05:53:26.050

这应该有效：`^.*\.(?!jpg$|png$)[^.]+$`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T05:29:20.570

使用`os.path`的漂亮函数将文件路径正确拆分为组件以便于解析：

```
filepath, filename = os.path.split(str)
basename, extension = os.path.splitext(filename)

if exension[1:] in ['jpg', 'png']:
  # The extension matches 
```

* * *

试试这个正则表达式（不要这样做。它与你想做的完全相反）：

```
\.(jpg|png)([^\.]|$) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T15:23:30.583

如果你只关心字符串不以`.jpg`or结尾`.png`，你可以使用这个：

```
^.+$(?<!\.jpg)(?<!\.png) 
```

这`^.+`不是绝对必要的，但根据 JSON 解析器的编码方式，您可能需要强制正则表达式使用整个字符串。如果您也将正则表达式用于其他验证，您可能需要更详细的内容，例如：

```
^\w+(?:\.\w+)+$(?<!\.jpg)(?<!\.png) 
```

您可能尝试过使用`(?<!\.jpg|\.png)`，但它不起作用，因为 Python 的正则表达式风格是最受限制的一种。PHP 和 Ruby 1.9+ 会接受它，因为每个替代方案都有固定的长度。它们甚至不必是*相同*的长度。`(?<!\.jpg|\.jpeg|\.png)`也可以。只是不要试图分解点，如`(?<!\.(?:jpg|jpeg|png))`; 交替必须在lookbehind的顶层。

Java 会接受分解后的版本，因为它在编译时会做更多的工作来确定后向可能需要匹配的最大字符数。不过，lookbehind 表达式需要相当简单，并且不能使用`+`or`*`量词。最后，.NET 和 JGSoft 风格对lookbehinds 没有任何限制。但是 Python 做了一个非常简单的尝试来找出后向需要匹配的确切字符数，当它失败时会生成那个神秘的错误消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T07:45:42.500

看起来你几乎拥有它：

```
.*\.(?!jpg$|png$)[^.]+ 
```

根据我的测试（在java中），我得到了这些结果：

```
file.jpg - false
file.png - false
file.name.jpg - false
file.name.png - false
file.gif - true
file.name.gif - true
file.jpg.gif - true
file.jpge - true 
```

如果这不是您想要的，请根据您的期望更新您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T07:14:08.103

请试试

```
    .*\.(jpg$|png$)

```

它将正确匹配 filename.jpg。您试图弄清楚如何匹配任何 .jpg 文件，即使文件名中有 2 个或更多点，也可以正常工作。
在使用 python 脚本时，请确保您使用的是正确的拆分类型。不同类型的拆分即 rsplit（右拆分）和 lsplit（左拆分）。

# javascript - 知道使用 javascript 打开了哪个页面

> ID：10052034
> 
> 赞同：0
> 
> 时间：2012-04-07T05:24:22.137
> 
> 标签：javascript, jquery, html

我有一个 html 页面。我使用了 3 张带有标签的图像，我正在导航页面。是否可以知道在新打开的 html 页面中单击了哪个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:31:57.620

当然，让图像使用的链接具有查询字符串或哈希标签，如下所示：

```
<a href="YourSite.com/YourPage.htm?Image=1"><img src="image.png"></a> 
```

然后像这样拉：

```
function getQuerystring(key, default_)
{
  if (default_==null) default_="";
  key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regex = new RegExp("[\\?&]"+key+"=([^&#]*)");
  var qs = regex.exec(window.location.href);
  if(qs == null)
    return default_;
  else
    return qs[1];
}
if (getQuerystring("Image")=="1"){ ... } 
```

最初从[javascript 查询字符串](https://stackoverflow.com/questions/5609559/javascript-query-string)和[Blogging Developer](http://www.bloggingdeveloper.com/post/JavaScript-QueryString-ParseGet-QueryString-with-Client-Side-JavaScript.aspx)查询字符串代码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T05:27:35.580

是的，使用 javascript。

您可以使用 JS + Ajax 然后您可以在图像 onclick 事件中的数据库中插入一个条目。

如果您想了解有关此解决方案的更多信息，请给我们更多详细信息/代码。

# mysql - MySQL 一些列 Distinct

> ID：10052038
> 
> 赞同：1
> 
> 时间：2012-04-07T05:25:20.993
> 
> 标签：mysql

我有以下查询效果很好。

```
 SELECT DISTINCT city,region1,region2 from static_geo_world where country='AU' AND
 (city LIKE '%geel%' OR region1 LIKE '%geel%' OR region2 LIKE '%geel%' OR region3 LIKE '%geel%' OR zip LIKE 'geel%') ORDER BY city; 
```

我还需要提取一个名为“id”的列，但这会弄乱 DISTINCT，因为每个 ID 都不同。

我怎样才能获得与上述相同的唯一记录集，同时又获得每条记录的“id”？注意：有时我可以返回几千条记录，因此无法查询每条记录。

任何想法都会非常受欢迎......

例子：

表可能有以下

```
 ID Country zip  region1        region2  region3 City
 1  AU      3323 geelong        victoria         Geelong
 2  AU      3324 geelong        victoria         Geelong
 3  AU      3325 Geelong North  victoria         Geelong 
```

我想获得不同的城市、区域 1 和区域 2 集，因为不同的邮政编码可能有重复。这是当前查询所做的。但我也想获得 ID，因为这是我将把所选记录放入数据库中作为参考的 ID。

想要的结果：

我希望能够获得独特的 'city,region1,region2

```
 geelong geelong victoria
 geelong geelong north victoria 
```

初始查询得到这些结果

但我也想知道已返回记录的 ID。我将在用户配置文件中使用此 ID（存储在 DB 中）。例如：

```
 1 geelong geelong victoria
 3 geelong geelong north victoria 
```

希望这能更好地解释它。只需要包含返回的 Distinct 记录 ID 即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:30:28.603

我没有检查过这个但不会这样工作：

```
SELECT DISTINCT (city,region1,region2), ID from static_geo_world where country='AU' AND
 (city LIKE '%geel%' OR region1 LIKE '%geel%' OR region2 LIKE '%geel%' OR region3 LIKE '%geel%' OR zip LIKE 'geel%') ORDER BY city; 
```

希望这有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:42:03.197

你不能做你似乎要求的事情：

输入数据：

```
ID  City   Region1  Region2
--- ------ -------- --------
 1  geel1  geel2    geel3
 2  geel1  geel2    geel3
 3  geel4  geel5    geel6
 4  geel1  geel2    geel3 
```

查询`select distinct city,region1,region2`返回

```
City   Region1  Region2
------ -------- --------
geel1  geel2    geel3
geel4  geel5    geel6 
```

删除重复行后，行不再有唯一 ID。你说

> 如何获得与上述相同的唯一记录集，但也获得每条记录的“id”

但是对于第一个返回的行，有三个可能的 ID，并且要求“每条记录的 'id'”是没有意义的。

编辑

如果你只是想要最低的 ID，你可以这样做：

```
select min(id),city,region1,region2 from ... where ... group by city,region1,region2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T06:17:14.833

改用 group by

```
SELECT id , city,region1,region2 from static_geo_world where country='AU' AND
(city LIKE '%geel%' OR region1 LIKE '%geel%' OR region2 LIKE '%geel%' OR region3 LIKE     '%geel%' OR zip LIKE 'geel%') ORDER BY city group by city; 
```

这将返回您需要的内容。但是从数据库记录中它总是会选择找到的第一个记录意味着如果 city = 'A' 并且这个城市有很多记录，它将选择找到的第一个记录并返回它的 id

# android - Android - 更新列表适配器会创建 NullPointException

> ID：10052039
> 
> 赞同：1
> 
> 时间：2012-04-07T05:26:00.197
> 
> 标签：android

我有一个 ListActivity，它有一个崩溃的适配器。这是使程序崩溃的代码：

```
Question q = new Question ();
q.setQuestion( "" );

questions.add(q);       

adapter = new ArrayAdapter<Question>(this, R.layout.user_question_list, 
        R.id.label,  questions); 
```

这是我创建适配器的方法：

```
ArrayAdapter<Question> adapter; 

ArrayList<Question> questions = new ArrayList <Question>( ); 
```

列表 xml 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

整个Activity xml是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical" >    

<TextView
    android:id="@+id/question_label"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Loading your questions..."
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>

        <Button  
            android:id="@+id/add_question"  
            android:layout_height="wrap_content"  
            android:text="Ask a Question"
            android:onClick="sendFeedback"  
            android:layout_width="fill_parent">  
        </Button>     

</LinearLayout> 
```

知道为什么我尝试更新适配器的代码会导致 NullPointerException 吗？

这是错误日志：

```
04-06 18:43:19.626: D/AndroidRuntime(2564): Shutting down VM
04-06 18:43:19.626: W/dalvikvm(2564): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-06 18:43:19.686: E/AndroidRuntime(2564): FATAL EXCEPTION: main
04-06 18:43:19.686: E/AndroidRuntime(2564): java.lang.NullPointerException
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ListView.onMeasure(ListView.java:1155)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.os.Looper.loop(Looper.java:137)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at dalvik.system.NativeStart.main(Native Method) 
```

以下是 Activity 开始时的样子：

```
public class MyQuestionsActivity extends ListActivity
{
    ArrayAdapter<Question> adapter;     

    ArrayList<Question> questions = new ArrayList <Question>( );        

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.users_questions);

        // Make sure the user is logged in
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( MyQuestionsActivity.this);
        final String user_id = prefs.getString( "user_id" , null );     

        // If the user is not logged in, send them to log in
        if ( user_id == null )
        {
            sendEmail("My Questions Error", "User id is empty but they chose the my-questions button. They should be logged in before they see this button. Here is their user_id: " + user_id );       

            Intent loginIntent = new Intent( MyQuestionsActivity.this, LoginActivity.class);
            MyQuestionsActivity.this.startActivity(loginIntent);            
        }          

        final TextView question_label = (TextView) findViewById(R.id.question_label);

        Question q = new Question ();
        q.setQuestion( "" );

        questions.add(q);       

        adapter = new ArrayAdapter<Question>(this, R.layout.user_question_list, 
                R.id.label,  questions);

        setListAdapter ( adapter );

        ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        ... 
```

以下是 Question 类的字段：

```
public String questionId;
public String question;
public ArrayList <QuestionComment>  questionComments;
public String questionByMemberId;
public String authorName; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:16:18.280

试试这个，

```
adapter = new ArrayAdapter<Question>(this, R.layout.user_question_list, questions); 
```

让我知道发生了什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:33:40.573

如果您不扩展 ListActivity 并粘贴活动代码，请尝试将 android:id="@android:id/list" 更改为 android:id="@android:id/mylist"

```
setListAdapter ( adapter ); 
ListView lv = getListView();
lv.setTextFilterEnabled(true); 
```

尝试像 bwlow 一样重新编码它::

```
 ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setListAdapter ( adapter ); 
```

# windows - 从 Windows 命令脚本 (.cmd) 文件执行 (.exe) 时出错

> ID：10052040
> 
> 赞同：0
> 
> 时间：2012-04-07T05:26:04.243
> 
> 标签：windows, windows-7, batch-file, cmd

我在 .cmd 文件中有以下语法，其中 PathList 是控制台应用程序，扩展名为 .exe。

```
cd  D:\Sample
D:
PathList 2> file.txt 
```

如果文件以 .bat 作为扩展名保存，则此语法可以正常工作，但如果以 .cmd 扩展名保存，则会引发错误，提示“PathList”不被识别为内部或外部命令、可运行程序或批处理文件。请我知道用 .cmd 扩展名保存它有什么问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:33:35.330

你能在 CMD 的情况下尝试改组前两行吗，我认为它无法导航到我们用 CD 移动的那个目录

试试这个

```
D:
cd  D:\Sample
PathList 2> file.txt 
```

# linux - 如何列出非本机二进制文件的库依赖项？

> ID：10052041
> 
> 赞同：62
> 
> 时间：2012-04-07T05:26:12.473
> 
> 标签：linux, gcc, shared-libraries, cross-compiling, binutils

在为本机平台开发时，我可以使用 ldd 列出所有共享库（.so 文件），我构建的二进制可执行文件将在启动时尝试加载。但是在交叉编译时，我不知道如何获得相同的信息。这`ldd`不是一个普通的 binutils 实用程序，如`strip`or `ar`，可以与`gcc`交叉编译一起构建，而是一个神秘的 shell 脚本，显然只能在本机平台上运行。

那么，使用跨目标 binutils 工具，有没有办法获取外部二进制文件的动态链接依赖项列表？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-07T14:36:22.190

> 有什么方法可以获取外部二进制文件的动态链接依赖项列表

您可以很容易地列出二进制文件的*直接*依赖项：

```
readelf -d a.out | grep NEEDED

 0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6] 
```

我知道没有办法递归地继续这个来获得完整的列表（就像`ldd`这样）。您必须`NEEDED`手动为每个库重复该过程。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-07T05:49:40.267

你可以做`bash -x ldd /bin/ls`以了解`ldd`正在做什么。该`ldd`脚本并不那么“神秘”。它基本上运行

```
LD_TRACE_LOADED_OBJECTS=1 /lib64/ld-linux-x86-64.so.2 /bin/ls 
```

所以它使用系统的动态加载器（因为结果`ldd`取决于您的实际环境和系统！）。但是您可以使用`objdump -x /bin/ls`可执行文件的动态部分进行检查，例如

```
% objdump -x /bin/ls
  /bin/ls:     file format elf64-x86-64
  /bin/ls
  architecture: i386:x86-64, flags 0x00000112:
  EXEC_P, HAS_SYMS, D_PAGED
  start address 0x00000000004046d4

  Program Header:
      PHDR off    0x0000000000000040 vaddr 0x0000000000400040 paddr 0x0000000000400040 align 2**3
           filesz 0x00000000000001c0 memsz 0x00000000000001c0 flags r-x
    INTERP off    0x0000000000000200 vaddr 0x0000000000400200 paddr 0x0000000000400200 align 2**0
           filesz 0x000000000000001c memsz 0x000000000000001c flags r--
      LOAD off    0x0000000000000000 vaddr 0x0000000000400000 paddr 0x0000000000400000 align 2**21
           filesz 0x0000000000019ef4 memsz 0x0000000000019ef4 flags r-x
      LOAD off    0x000000000001a000 vaddr 0x000000000061a000 paddr 0x000000000061a000 align 2**21
           filesz 0x000000000000077c memsz 0x0000000000001500 flags rw-
   DYNAMIC off    0x000000000001a028 vaddr 0x000000000061a028 paddr 0x000000000061a028 align 2**3
           filesz 0x00000000000001d0 memsz 0x00000000000001d0 flags rw-
      NOTE off    0x000000000000021c vaddr 0x000000000040021c paddr 0x000000000040021c align 2**2
           filesz 0x0000000000000044 memsz 0x0000000000000044 flags r--
  EH_FRAME off    0x0000000000017768 vaddr 0x0000000000417768 paddr 0x0000000000417768 align 2**2
           filesz 0x00000000000006fc memsz 0x00000000000006fc flags r--
     STACK off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**3
           filesz 0x0000000000000000 memsz 0x0000000000000000 flags rw-

  Dynamic Section:
    NEEDED               libselinux.so.1
    NEEDED               librt.so.1
    NEEDED               libacl.so.1
    NEEDED               libc.so.6
    INIT                 0x0000000000402148
    FINI                 0x00000000004125f8
    HASH                 0x0000000000400260
    GNU_HASH             0x00000000004005c0
    STRTAB               0x0000000000401100
    SYMTAB               0x0000000000400620
    STRSZ                0x00000000000004d7
    SYMENT               0x0000000000000018
    DEBUG                0x0000000000000000
    PLTGOT               0x000000000061a208
    PLTRELSZ             0x0000000000000990
    PLTREL               0x0000000000000007
    JMPREL               0x00000000004017b8
    RELA                 0x0000000000401740
    RELASZ               0x0000000000000078
    RELAENT              0x0000000000000018
    VERNEED              0x00000000004016c0
    VERNEEDNUM           0x0000000000000003
    VERSYM               0x00000000004015d8

  Version References:
    required from librt.so.1:
      0x09691a75 0x00 05 GLIBC_2.2.5
    required from libacl.so.1:
      0x05822452 0x00 06 ACL_1.2
      0x05822450 0x00 04 ACL_1.0
    required from libc.so.6:
      0x09691a75 0x00 03 GLIBC_2.2.5
      0x0d696913 0x00 02 GLIBC_2.3 
```

同样，实际的依赖取决于运行二进制文件的系统（例如，因为我可以在某个地方`LD_LIBRARY_PATH`拥有自己的`libc.so.6`，这将是一个坏主意）。

所以你需要一个交叉变体`objdump`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-18T12:50:41.440

而在 中`gdb`，**信息共享**类似于`ldd`。它提供了可执行文件的完整人类可读的运行时信息。
`readelf`会**错过路径和其他库信息**。
`readelf`是对主机学习非常好的工具。开发人员可以选择可行的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-09T05:46:39.670

这对我有帮助

```
objdump -p /path/to/program | grep NEEDED 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-23T07:00:57.207

很抱歉创建了一个僵尸线程，但我正在为我的 OpenWRT 路由器做一些事情，并希望它检查一些依赖关系，看看我的 jffs2 分区上是否有足够的空间来复制`e2fsck`. 简短的回答：[nope.avi](https://www.youtube.com/watch?v=gvdf5n-zI14)。

Anyhoo，我制作了一个小脚本，使用[接受的答案](https://stackoverflow.com/q/10055340)加上一些（可能过于冗长）`grep`调用，稍微挥手和一些独角兽眼泪（不用担心，它们是快乐的眼泪！）我设法将以下脚本放在一起，给出你所有的依赖。我确信有很大的改进空间，尤其是 RE：循环和递归，以及它一直都是 bashism（即索引数组）的事实，但这至少名义上对我有用：

```
#!/bin/bash

declare -a search_path
declare -a found_deps

find_dependencies() {
    local file="$1"
    local -a deps
    local -a deps_to_process

    deps=( $( readelf -d "$file" | grep "NEEDED" | \
        grep -o -E "\[[^]]*\]" | grep -o -E "[^][]*" ) )

    local add_this_dep=true

    # always assume we've found $file and add it to the $found_deps list
    # if it's not there
    for found_dep in "${found_deps[@]}"
    do
        if [ "$found_dep" = "$(basename $file)" ]
        then
            add_this_dep=false
            break
        fi
    done

    # if $add_this_dep is true, go ahead and add to the found_deps list
    if $add_this_dep
    then
        found_deps+=("$(basename $file)")
    fi

    # for every dependency found by readelf (no path)
    for dep in "${deps[@]}"
    do
        local process_dep=true

        # if the basename of the file passed into the function is
        # this dep, skip processing altogether
        if [ "$dep" = "$(basename $file)" ]
        then
            break
        else
            # otherwise, if it's one of the 'found deps' don't process it
            for found_dep in "${found_deps[@]}"
            do
                if [ "$dep" = "$found_dep" ]
                then
                    process_dep=false
                    break
                fi
            done

            # it wasn't one of the 'found deps' so add 
            # it to the found_deps list
            if $process_dep
            then
                found_deps+=($dep)
            fi
        fi

        # if we are supposed to process this dep
        if $process_dep
        then
            local file_path=

            # check each search path for a file named $dep underneath it
            for dir in $search_path
            do
                file_path=$( find "$dir" -name "$dep" | head -n 1 )

                # if the $file_path is not empty, then we found
                # a copy of it, so break out of the loop
                if [ -n "$file_path" ]; then break; fi;
            done

            # if the $file_path is not empty, then we found a copy
            # of the file, place it the list of deps to be processed
            if [ -n "$file_path" ]
            then
                deps_to_process+=($file_path)
            fi
        fi
    done

    # now, go through all of our $deps_to_process (with path)
    # and run "find_dependencies" on them
    for dep_to_process in "${deps_to_process[@]}"
    do
        find_dependencies "$dep_to_process"
    done
}

argc=$#

if [ $argc -eq 0 ]
then
    printf '%s: prints dependencies of a (potentially) non-native elf executable, recursively\n'
    printf '\n'
    printf 'usage:\n'
    printf '\t%s <non-native elf executable> [ --supress-header ] [ <path> ... ]\n' "$(basename $0)"
    printf '\twhere\n'
    printf '\t\t<non-native elf executable> is the name of a file to find the dependencies of.\n'
    printf '\t\t[ <path> ... ] is an optional list of directories under which to search for libraries.\n'
    printf '\t\t[ --supress-header ] is an optional flag that prints nothing other than the list of files to stdout.\n'
    printf '\t\t\t(without the parameter a banner is sent to stderr)'
    printf '\n'
else
    file="$1"
    shift 1

    show_header=true

    if [ "$1" = "--supress-header" ]; then show_header=false; shift 1; fi;

    if $show_header
    then
        printf ' -------------------------------------------------------------------------------------------------------------\n' 1>&2
        printf '  ldd-nonnative: find all dependencies of a (potentially) non-native binary %s\n' "$file" 1>&2
        printf ' -------------------------------------------------------------------------------------------------------------\n' 1>&2
    fi

    search_path="$@"
    find_dependencies $file

    printf '\t%s\n' "${found_deps[@]}"
fi

# ❤ copyheart, shelleybutterfly, 2014
# love is never subject to the low; please copy and share with love :)

# contact information:
# shelleybutterfly@mojoprocode.com

# I hereby dedicate this software to the public domain in all jurisdictions
# where possible. In other jurisdictions, I license it to you under your
# choice of permissive license, as defined by the Open Source Institute (OSI),
# found at URL http://opensource.org. Should such a license be unavailable in
# your jurisdiection, you may use any copyleft open source license, again as
# defined by OSI; and if that too is unavailable, then you are licensed this
# software under the least restrictive possible terms allowed in your
# jurisdiction.

# I request but do not require that you give credit to me, shelleybutterfly,
# which I will accept in cases of licensing other than the public domain as
# valuable consideration for your use of my software. (I love to know that 
# my name is plastered all over some obscure piece of code that's at least
# appreciated by those who do see it, and I consider that more than enough
# consideration. :D) This software is provided completely as-is, and I take
# absolutely no responsibility for any damages that it may cause. It has
# not been fully tested and should be considered pre-alpha release quality,
# (that is to say, it is likely unstable and unsafe to use without your own
# validation to ensure that it meets some or any your needs without: among
# other things: melting your computer, calling your grandma at midnight,
# telling your girlfriend she's fat, and throwing your computer in the
# dishwasher to make sure it's clean, and you take full responsibility for
# doing your own testing to ensure that it suits your needs, and operates 
# properly int the conditions under which you intend to use it.

# Should you not be willing to take this risk, it is highly recommended
# that you do not use this software at all, ever, and that you instead find
# a real commercial piece of software, or other warranted piece of software,
# as I can not and do not and shall not provide any warranty of fitness for
# any purpose whatsoever, even to scrub your toilet, and it's provided with
# the understanding that it will be used primarily as an educational tool
# rather than any sort of production code. I disclaim any responsibility for
# anything that may happen to you due to your use of software, even if it
# causes huge zits, a rash under your boobs that wont go away, or a burning
# sensation when you pee. Sorry, **especially** for a burning sensation when
# you pee.

# Your use of this software implies acceptance of these terms as well as 
# any painful urination or other issues it may cause in your life.

# [deep breath] 

# my love to you all; I hope this software was useful to you in some way; if
# you end up using it despite the dire warnings against doing so, feel free
# to drop me a note at shelleybutterfly@mojoprocode.com, as I imagine it
# will be rare enough to make my day, every time. ♥ 
```

所以，你去吧。希望它可以帮助某人。Egads 我花了很长时间才得到足够好的 shell 脚本能够完成这样的事情，更不用说我花费的时间比它应该花费的时间要长得多，所以请原谅可能动摇了你们中的一些人脚本大师是你存在的核心。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-24T09:22:45.973

这个添加有点晚了，但有人可能会受益/澄清。readelf 的 -A 标志不是给出与 ldd 相同的结果吗？

```
 $ readelf -AW /bin/vi

Library list section '.gnu.liblist' contains 8 entries:
     Library              Time Stamp          Checksum   Version Flags
  0: libselinux.so.1      2011-07-25T08:02:58 0x17a7d5f7 0       0
  1: libtermcap.so.2      2011-07-25T08:02:59 0x29ae9ff7 0       0
  2: libacl.so.1          2011-07-25T08:02:58 0x60748842 0       0
  3: libc.so.6            2011-07-25T08:02:58 0x0c2c7eeb 0       0
  4: libdl.so.2           2011-07-25T08:02:58 0xdfbfc467 0       0
  5: libsepol.so.1        2011-07-25T08:02:58 0x857499cb 0       0
  6: /lib64/ld-linux-x86-64.so.2 2011-07-25T08:02:58 0x9e6549b7 0       0
  7: libattr.so.1         2011-07-25T08:02:58 0x862f1546 0       0 
```

这里唯一缺少的信息似乎是这些库所在的完整路径。

另一方面，到目前为止提到的工具只有在您安装了已知可以工作的情况下才有用。我最常见的问题是：

1.  安装一个程序（主要通过 rpm），然后在启动过程中无法启动或崩溃。不知何故，我认为这与库不兼容有关，但我还没有找到一种简单的方法来在安装程序之前检查这些东西（实际上也不是之后）
2.  为了克服（1），有时我会下载源代码并在本地编译。典型的配置脚本部分有用，因为它会告诉您缺少哪些库。但是，它无法告诉您需要哪些最低版本的此类库

任何人都可以对这些问题有所了解吗？顺便说一句，我已经尝试阅读安装说明和发行说明，但它们几乎总是远远不够。

一个强大的示例可能会将所有内容置于上下文中，因此请尝试编译[Cinelerra](http://cinelerra.org/getting_cinelerra.php)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-17T16:25:15.860

按照设计 ldd 只能在目标上执行。但是，可以使用 readelf 模拟 ldd 行为。在 crosstool-ng 项目中开发了一个名为“xldd”的脚本。此脚本的独立版本可在此处获得：

[https://gist.github.com/jerome-pouiller/c403786c1394f53f44a3b61214489e6f](https://gist.github.com/jerome-pouiller/c403786c1394f53f44a3b61214489e6f)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-09T07:53:43.147

要列出非本机二进制文件的共享库依赖项，您可以尝试以下工具： http: [//www.mathembedded.com/component/k2/item/1-cross-ldd.html](http://www.mathembedded.com/component/k2/item/1-cross-ldd.html)

我在 SH4 和 MIPS 上使用它。正如其他答案中所报告的那样，您可以使用 readelf 输出和递归循环来实现相同的目标，但由于 cross-ldd 存在，我从来没有自己尝试过。

# sql-server-2008 - 为具有动态列的配置文件表寻找 SQL Server 表设计完整性检查

> ID：10052045
> 
> 赞同：2
> 
> 时间：2012-04-07T05:26:56.877
> 
> 标签：sql-server-2008, dynamic, user-profile

为系统中的两个不同的配置文件（在我的例子中是教师和学生）通用一个配置文件表是否有意义？我正在这样做，只是想对我的设计方法进行一般的健全性检查。回应表示赞赏。背景如下：

我们正在构建一个既有教师又有学生的网络系统。两者都在系统中有帐户。两者在系统中都有配置文件。

我的问题是关于那些 Profile 表的表设计。

教师资料在与其关联的元数据方面是相当静态的。每位教师都有一组字段，用于公开有关该人的信息（学校、学位等）。然而，学生却是另一回事。我们正在使用 Windows 服务从源源不断的 Excel 电子表格中提取有关学生的各种数据。

数据被移动到我们的数据库中，然后这些字段与学生的个人资料相关联。因此，每个学生的个人资料中可能有非常不同的领域。

我最初是从三个表的概念开始的：

**账户**

```
AccountID 
```

**教师简介**

```
TeacherProfileID
AccountID
SecondarySchool
University
YearsTeaching
Etc... 
```

**学生档案**

```
StudentProfileID
AccountID
Header
Value 
```

该`StudentProfiles`表将保存 Excel 电子表格中列标题的名称和相关值。

从那以后，我对设计进行了一些改进，以便根据附加的 ERD 图像更通用地处理配置文件。教师和学生的“标题”存储在一个名为的表中`ProfileAttributeTypes`，并且响应（来自 Excel 文档或通过 Web 表单上的输入字段）放在一个`ProfileAttributes`表中。这样，学生和教师个人资料都可以与个人资料字段的动态流相关联。“权限”表告诉我们我们是在与学生打交道还是与教师打交道。

由于该系统可能会快速增长，因此我想确保基础牢固。您能否提供有关此设计的反馈，并让我知道它是否看起来不错，或者您是否可以看到它可能产生的问题，如果是这样，什么可能是更好的方法？

提前致谢。

![简介](../Images/22a198daafc33def84b10d8562e37506.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:58:49.730

我不认为你的设计很好。该模型混合了用户和实体的概念。

这是一个更合适的设计的开始。

t_User

t_User_Settings（配置文件）

t_Permissions

t_Actions

t_学生

t_Teacher

t_Student_Attributes

t_Teacher_attributes

用户相关项目/属性属于 t_User 或 t_User_Settings 域相关项目/属性属于 t_Teacher/t_Teacher_Attributes 或 t_Student/t_Student_Attributes

您可以通过外键将域概念（教师/学生）与用户概念相关联。或者您可以创建一个 t_Teacher_User + t_Student_User 表。

请注意，您如何仅通过读取表名就可以准确地知道去哪里了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T20:23:28.080

# 财产袋方法

您提出的数据模型依赖于“property-bag”（配置文件的键值项的集合）。该模型的优点在于您可以扩展您的属性而无需更改数据模型。

缺点是您经常需要“透视”数据，并且您的表（和索引）会很快膨胀。（我的经验：50K 记录的每个键 200 个属性 = 1000 万个属性，而无需跟踪属性的更改。）

如果您主要需要查询一个特定属性的键，则可以推荐使用此模型。思考诸如“有多少人拥有数学学位？”之类的问题。其中数学学位是属性键。

# XML字段方法

通过这种策略，我们向表中添加了一个“xml”字段，该字段以 xml`Profiles`的形式获取属性列表。此模型还允许您扩展属性的数量，而无需更改数据模型。

Sql Server 对此类字段有很好的支持（通过 xpath 查询、xml 索引等），其好处当然是您保留了一个简单的数据模型，允许您在 xml 字段中存储您喜欢的任何内容。

当字段内容被整体替换时，建议使用此模型，您可以通过xpath查询更改xml字段中的数据，但速度很慢。

# 稀疏列

SQL Server 2008 中引入了[稀疏列](http://msdn.microsoft.com/en-us/library/cc280604.aspx)系统，允许您在未密集填充的表中创建许多不同的字段。好处是它允许您创建比 1024 限制更多的列，并且未填充的字段在未填充时不会占用空间。

缺点是您需要预先了解所有可能的字段，否则每次遇到新字段时您都会查看数据模型的更改。如果您的表中大部分是空列，则此模型非常有用。

# 采取哪种方法？

这是困难的部分，这完全取决于您想对数据做什么。根据我的经验，属性包方法适用于小型数据集，并且如果您不需要跟踪属性的更改。（我见过1个月后表中有超过10亿条记录的情况）

当您经常需要查询字段的特定内容时，Xml 字段可能会非常痛苦，但它非常适合存储只会“按键”请求的信息

当为少于 30%-40% 的记录填充列时，稀疏列效果很好。

**附加说明**：在您的数据模型中存储诸如“教学年数”之类的内容被认为是一种不好的做法，因为您必须始终更新该值。最好存储“教学开始年份”并计算增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:35:51.470

根据我的经验，健全性检查数据模型的最佳方法是计算出您可能需要的查询/DML。

正如 Filip de Vos 所写，您的“property bag”方法并不容易适用于典型的关系查询——“select count(*) from students where course = 'maths' and score > 12”将是一个巨大的痛苦。

另一方面，您的初始设计确实解决了有关存储架构变化或在设计时未知的数据的问题。

在实践中，您通常最终在典型的关系模型中对“固定”的东西进行建模，并使用属性包或 XML 文档对变量位进行建模。如果您在设计时能够清楚架构，“稀疏列”也可能会有所帮助。

# sql - <> 过滤空值的行为

> ID：10052048
> 
> 赞同：1
> 
> 时间：2012-04-07T05:27:34.673
> 
> 标签：sql, sql-server, sql-server-2008

嗨专家：我有一个表叫做`tblAlarm`，它有一些这样的记录：

![在此处输入图像描述](../Images/cde5fd2eec4ebbb291e939db9cfb4f95.png)

我有另一个表来确定哪些用户看到了什么消息：

![在此处输入图像描述](../Images/425fb7953d91022febe047fa44e7e9c6.png)

现在我想写一个查询来显示用户没有看到的消息如果消息没有过期。（例如它是 BeginYear 和 EndYear 之间的年份等等......）。我写了这个查询：

```
SELECT  *
FROM
tblAlarms LEFT OUTER JOIN tblUsersAlarms tua ON tblAlarms.Id=tua.MessageID
WHERE @CurrentYear BETWEEN  tblAlarms.BeginYear AND tblAlarms.EndYear 
  AND @CurrentMonth BETWEEN  tblAlarms.BeginMonth AND tblAlarms.EndMonth 
  AND @CurrentDay BETWEEN tblAlarms.BeginDay AND tblAlarms.EndDay
  AND @CurrentHour * 60 + @CurrentMinute BETWEEN tblAlarms.BeginHour*60 + tblAlarms.BeginMinute AND tblAlarms.EndHour*60 + tblAlarms.EndMinute
  --AND (tua.UserID <> 128  AND tua.UserID IS NULL) 
```

它返回：

![在此处输入图像描述](../Images/4280ec2474ebc528797257a520570f48.png)

但是如果我取消注释最后一行，它不会返回任何记录。我如何确定哪些消息没有看到用户？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T06:42:40.567

将 NULL 与值进行比较的结果是 UNKNOWN。筛选条件仅选择条件评估为 TRUE 的行，因此不选择条件评估为 FALSE 或 UNKNOWN 的行。

`IS NULL`和测试是不同的`IS NOT NULL`，并且总是产生 TRUE 或 FALSE 答案。你也不能写`column = NULL`or `column != NULL`（至少，SQL 标准不允许这样做；一些 SQL 方言可能）。

你的条件是：

```
AND (tua.UserID <> 128 AND tua.UserID IS NULL) 
```

*   如果 的值为`tua.UserID`NULL，则第二项计算为 TRUE，但第一项将计算为 UNKNOWN，并且 UNKNOWN 和 TRUE 为 UNKNOWN，即不为 ​​TRUE，因此不会选择该行。

*   如果 的值`tua.UserID`不为 NULL，则第二项的计算结果为 FALSE，因此整体条件的计算结果为 FALSE，因此不会选择该行。

因此，正如您所观察到的，当您添加条件时，不会选择任何内容。

更典型的是，您的情况将是以下两种之一：

```
AND (tua.UserID <> 128 AND tua.UserID IS NOT NULL)

AND (tua.UserID <> 128 OR tua.UserID IS NULL) 
```

第一个备选方案中的双重条件实际上是多余的。如果`tua.UserID`为 NULL，则第一项将评估为 UNKNOWN，因此整体条件不会为 TRUE，并且不会选择行。第二种选择非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:06:37.093

“ `NULL`”的意思是：“我不知道值”。这并不意味着：“不可能有任何价值”。因此，如果您使用 NULL-Value 作为其参数之一执行比较，则结果可能是`TRUE`or `FALSE`，具体取决于实际（但未知）值。But`UNKNOWN`不是有效的比较结果，因此在这种情况下，输出为`FALSE`.

当您在两个值（字段或文字）之间放置一个比较运算符，如`=`, `!=`, `<`, `<=`, `>`, `>=`,`<>`并且其中一个值为 NULL 时，该比较操作的结果*始终* `FALSE`为。

您已经使用了两个用于 NULL 值的特殊比较运算符：`IS NULL`和`IS NOT NULL`. 两者都不是二元运算符，而是一元运算符。这意味着，他们没有两个论点，而只有一个论点。他们测试他们的论点是否为 NULL 值。

所以，如果`tua.UserID`是`NULL`，`tua.UserID <> 128`一定是`FALSE`。另一部分`tua.UserID IS NULL`是`TRUE`, 但是`FALSE AND TRUE`是`FALSE`，这使得`FALSE`所有行都具有完整的 WHERE-Condition。

# api - Foursquare 类别包含

> ID：10052059
> 
> 赞同：0
> 
> 时间：2012-04-07T05:29:33.403
> 
> 标签：api, http, foursquare

在我的应用程序中，我需要检索场地列表并排除某些类别（如家庭、火车、飞机或出租车）。在[这个](https://stackoverflow.com/questions/9644953/foursquare-venues-exclusions)问题中，我了解到无法从响应中排除某些类别，我需要编写所有必须包含的其余类别。但是当我描述所有类别时，我的 URL 太长了。

那么，如何使用我的标准检索场地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:01:26.677

我了解到您了解如何搜索和使用 categoryId 过滤器。
如果没有，请[在此处](https://developer.foursquare.com/docs/venues/search)查找 categoryId 参数。

Foursquare 类别具有层次结构（树），您可以[在此处](https://developer.foursquare.com/docs/venues/categories)获取所有类别。

当您在树中搜索顶级节点时，foursquare 也会返回其所有子类别。

*例如*，搜索顶级食品类别，将返回所有类型的餐馆，所以如果我想要特定半径内的所有餐馆，我可以使用该过滤器。

如果我想要除“寿司”之外的所有餐厅，我认为最好的方法是按照示例询问所有顶级类别，然后自己进行过滤，否则您可能会遇到上述问题，其中 URL太大。

如果上述不满足，另一种选择是将搜索分成两个不同的请求。不确定这是最佳实践，但我的解决方案有时会同时在同一位置运行 7 个不同的搜索以获得所有可能的结果（请记住，响应也有 50 个结果限制）。

# php - 已弃用的函数已弃用 ereg_replace() 和 eregi()

> ID：10052063
> 
> 赞同：0
> 
> 时间：2012-04-07T05:30:32.280
> 
> 标签：php

以下两行给出警告，

```
if (eregi($patt,$v,$res))
Deprecated: Function eregi() is deprecated in /classes/xtpl.php on line 50 
```

和

```
$copy=ereg_replace("\{".$v."\}","$var",$copy);

Deprecated: Function ereg_replace() is deprecated in /classes/xtpl.php on line 25 
```

我尝试使用`preg_match()`以下方式，但无法解决问题

```
$copy=preg_match("\{".$v."\}","$var",$copy);
if (preg_match($patt,$v,$res)) 
```

请给出一些想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:23:40.340

自 PHP 5.3 起不推荐使用这些函数。使用 preg_replace 代替 ereg_replace 和 preg_match 代替 eregi。您可以在此处找到有关这些功能的必要信息 - [http://www.php.net/manual/en/function.preg-replace.php](http://www.php.net/manual/en/function.preg-replace.php) http://www.php.net/manual/en/function.preg-匹配.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:33:37.070

你必须使用分隔符

```
preg_match('/'.$v.'/',$var,$copy); 
```

[http://us.php.net/preg_match](http://us.php.net/preg_match)

# json - SOAP 从散列创建 JSON 并从客户端解码

> ID：10052065
> 
> 赞同：2
> 
> 时间：2012-04-07T05:30:44.063
> 
> 标签：json, perl, soap, hash

我正在使用肥皂制作网络服务。我一直试图弄清楚使用 perl 将哈希转换为 JSON。现在我正在客户端对其进行测试，并且我正在尝试打印出 JSON - 所以我不确定我的问题是出在服务器端还是客户端。

这是我的服务器端代码。

```
 #create hash
 my %hash_to_encode = (
    weigh => $weight,
    price => $price,
    unit  => $unit,
    picture=> $picture,
    amount => $amount,
    dimensions => $dimensions,
    country => $country,
    description => $description,
    name => $name,
    category => $category,
    comment => $comment,
    expires => $expires
  );

 my $json_string = JSON->new->utf8->encode(%hash_to_encode);

return $json_string;

My client side code:
#! /usr/bin/perl -w
use CGI qw(:standard);
use SOAP::Lite;
use JSON;
print "Content-type: text/html\n\n";

my $exhibitID = '13';
my $username = 'us43';
my $password = 'green4356';
my $link = 'its a secret :P';
my $namespace = 'also a sewcret';
#The soap call works (i have other functions and they work as expected so dont worry about this part.
my $mySoap = SOAP::Lite
 -> uri($link)
 -> proxy($namespace);

#This is where the error lies.
my $result = $mySoap->status($exhibitID, $username, $password)->result;
print "Json String: $result";

#my $jsonString= JSON->new->utf8->decode($result);
#print "Status is: $jsonString";

print "<p> Finished status</p>"; 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:46:15.257

```
my $json_string = JSON->new->utf8->encode(\%hash_to_encode); 
```

您需要提供哈希引用，而不仅仅是编码函数的哈希。

为此，可以像我上面所做的那样添加反斜杠，或者如下更改定义（尽管只做两者之一......）

```
my $hash_to_encode = {
weigh => $weight,
price => $price,
unit  => $unit,
picture=> $picture,
amount => $amount,
dimensions => $dimensions,
country => $country,
description => $description,
name => $name,
category => $category,
comment => $comment,
expires => $expires
}; 
```

# mobile - 如何链接到移动版 Google Plus

> ID：10052072
> 
> 赞同：7
> 
> 时间：2012-04-07T05:32:21.833
> 
> 标签：mobile, google-plus

我们正在构建我们网站的移动版本，并且在处理页脚的社交链接的过程中，我遇到了 Google Plus。

将 FB 和 Twitter 链接转换为指向他们的移动版本（m.facebook.com/ourpage 和 mobile.twitter.com/ourpage）非常容易，但如果我能为 GooglePlus 解决这个问题，我会很高兴.

我试过用我的手机浏览器去那里，但它会生成一个巨大的字符串，似乎与我们的 G+ id 号码无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T05:45:54.873

获取`https://plus.google.com/app/basic/`并添加个人资料/页面 ID。

谷歌： https: [//plus.google.com/app/basic/116899029375914044550](https://plus.google.com/app/basic/116899029375914044550)

~~谷歌：[https ://m.google.com/app/plus/mp/960/#~loop:view=profile&a=g%3A116899029375914044550](https://m.google.com/app/plus/mp/960/#~loop:view=profile&a=g%3A116899029375914044550)~~

我不认为 Google 正式支持此 URL，因此它将来可能会更改并破坏您的链接。

# pascal - 在 Pascal 中检查类型

> ID：10052076
> 
> 赞同：8
> 
> 时间：2012-04-07T05:32:47.060
> 
> 标签：pascal, fpc

我只是想知道如何在帕斯卡中进行类型检查？我现在已经搜索了几个小时，但我找不到任何有用的东西。

例子：

```
var 
number: Integer;

begin
  write('Enter a number: ');
  read(number);

  if {How am I supposed to check if 'number' is an Integer here?}
  then writeln(number)
  else writeln('Invalid input')
end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T11:48:09.983

您实际上是在进行 I/O 类型检查。您可以通过暂时禁用它然后检查结果来解决此问题：

```
 {$I-}  //turn off IO checking temporarily
 read(i);
 {$I+}  // and back on

 if ioresult=0 then  // check the result of the last IO operation
   writeln('integer successfully read:',number)
 else
   writeln('invalid input'); 
```

注意：典型的答案通常是“只读取一个字符串并自己进行转换”，但是如果不对终端类型做出假设，就很难做到这一点。

对于您只需要经过验证的输入的清晰简单的程序，上述技巧（以及围绕它的循环在错误时重复）就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T05:43:18.283

也许[Val](http://www.gnu-pascal.de/gpc/Val.html)程序可以帮助你。这是fpc的[一个](http://www.freepascal.org/docs-html/rtl/system/val.html)。但是将您的逻辑更改为读入 a`String`并使用`Val`. [你可以在这里](http://www.programmersheaven.com/mb/pasprog/385911/385911/pascal-validating-integers/)找到一个样本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T15:18:44.393

太简单了，看我下面的代码：

```
program int_check;
uses crt;
var n:real;
begin 
     clrscr;
     write('Enter a number: ');readln(n);
     if n-round(n)=0 then write('Integer!') else write('Not an Integer!');
     readln;
end. 
```

你看，没有字符串，没有`IOcheck`，适合你的形式！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T05:49:48.187

由于`number`是`Integer`，如果用户键入非数字值，应用程序将失败。你永远达不到`if`声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T07:31:31.550

直接使用 frac(n)

> 程序int_check；使用crt；var n：真实的；开始 clrscr；write('输入一个数字：');readln(n); if frac(n)=0 then write('Integer!') else write('Not an Integer!'); 读入；结尾。

# facebook-graph-api - 为什么限制可下载的帖子数量？

> ID：10052078
> 
> 赞同：0
> 
> 时间：2012-04-07T05:33:14.670
> 
> 标签：facebook-graph-api, numbers, limit, posts

我无法下载墙上的所有花盆。我已经提到了 99999 作为限制，但它会在 150 到 300 之间停止！！这是为什么？

例如 /some_page_id/feeds

它为不同的页面返回不同数量的帖子，而且我永远不会把所有的帖子都发完？有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:47:58.303

因为像那里的大多数 API 一样，客户端都有配额。对于 tweeter 或 netflix 或其他内容也是如此，因为当您请求某些内容时，您正在耗尽 facebook 带宽或 tweeter 的带宽，因此他们限制您可以执行的请求数量是有意义的。

# algorithm - 通过位运算符检查点是否在矩形内

> ID：10052079
> 
> 赞同：4
> 
> 时间：2012-04-07T05:33:33.550
> 
> 标签：algorithm, geometry, bit-manipulation

几天前，我的老师告诉我，仅使用位运算符就可以检查给定点是否在给定矩形内。这是真的吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T06:07:13.473

这可能无法回答您的问题，但您正在寻找的可能是这个。
[这些是](http://graphics.stanford.edu/~seander/bithacks.html)Sean Eron Anderson 编制的技巧，他甚至悬赏 10 美元奖励那些能找到一个 bug 的人。我在这里找到的最接近的东西是一个宏，它查找任何整数*X*是否有一个[介于](http://graphics.stanford.edu/~seander/bithacks.html#HasBetweenInWord)[*M*](http://graphics.stanford.edu/~seander/bithacks.html#HasBetweenInWord)[和](http://graphics.stanford.edu/~seander/bithacks.html#HasBetweenInWord)[*N*](http://graphics.stanford.edu/~seander/bithacks.html#HasBetweenInWord)之间的*单词*[](http://graphics.stanford.edu/~seander/bithacks.html#HasBetweenInWord)

 **> **确定一个单词是否有一个介于 m 和 n 之间的字节**
> 
> 当 m < n 时，该技术测试字 x 是否包含无符号字节值，例如 m < value < n。当 n 和 m 为常数时，它使用 7 个算术/逻辑运算。注意： 等于 n 的字节可能会被可能报告为误报，因此如果需要某个结果，则应按字符进行检查。
> 
> 要求：x>=0；0<=m<=127; 0<=n<=128
> 
> ```
> #define likelyhasbetween(x,m,n) \
> ((((x)-~0UL/255*(n))&~(x)&((x)&~0UL/255*127)+~0UL/255*(127-(m)))&~0UL/255*128) 
> ```
> 
> 这种技术适用于快速预测试。需要多一次操作（常数 m 和 n 共 8 个）但提供准确答案的变体是：
> 
> ```
> #define hasbetween(x,m,n) \
> ((~0UL/255*(127+(n))-((x)&~0UL/255*127)&~(x)&((x)&~0UL/255*127)+~0UL/255*(127-(m)))&~0UL/255*128) 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T06:51:53.950

如果数字是有限的正整数，这是可能的。

假设我们有一个由`(a1,b1)`和表示的矩形`(a2,b2)`。给定一个点`(x,y)`，我们只需要计算表达式`(a1<x) & (x<a2) & (b1<y) & (y<b2)`。所以现在的问题是找到表达式c对应的位运算

设`ci`为数字的第 i 位`c`（可以通过掩码`ci`和位移获得）。我们证明，对于最多`n`位的数字，`c<d`等价于`r_(n-1)`，其中

```
r_i = ((ci^di) & ((!ci)&di))  |  (!(ci^di) & r_(i-1)) 
```

**证明：**当`ci`and`di`不同时，左表达式可能为真（取决于`((!ci)&di)`），否则右表达式可能为真（取决于`r_(i-1)`下一位的比较）。

该表达式`((!ci)&di)`实际上相当于位比较`ci < di`。因此，这个递归关系返回真，它从左到右逐位比较，直到我们可以确定`c`小于`d`。

因此，比较运算符对应的是*纯位运算表达式*，因此可以通过纯位运算在矩形内找到一个点。

**编辑**：实际上不需要条件语句，只需扩展`r_(n+1)`，然后完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T06:34:22.953

x,y 在矩形中，`{x0<x<x1 and y0<y<y1}`如果`{x0<x and x<x1 and y0<y and y<y1}`

如果我们可以使用位运算符模拟 <，那么我们就可以开始了。

在二进制中说某事是 < 是什么意思？考虑

```
a: 0 0 0 0 1 1 0 1
b: 0 0 0 0 1 0 1 1 
```

在上面，a>b，因为它包含第一个 1，它在 b 中的对应项是 0。我们是那些寻找最左边的位的人`myBit!=otherBit`。（== or`equiv`是一个位运算符，可以用 and/or/not 表示）

然而，我们需要某种方式将信息以一位到多位的方式传播。所以我们问自己这个问题：我们是否可以只使用“位”运算符来“编码”一个函数，这相当于`if(q,k,a,b) = if q[k] then a else b`. 答案是肯定的：

*   我们创建了一个包含将 q[k] 复制到每个位上的位字。我可以想到两种方法来做到这一点：
    *   1）左移k，然后右移wordsize（有效，但仅当您有复制最后一位的移位运算符时才有效）
    *   2）效率低但理论上正确的方法：
        *   我们将 q 左移 k 位
        *   我们将这个结果`and`与 10000...0
        *   我们将其右移 1 位，并`or`使用非右移版本。这会将第一个位置的位复制到第二个位置。我们重复这个过程，直到整个字与第一位相同（例如 64 次）
*   调用这个结果`mask`，我们的函数是`(mask and a) or (!mask and b)`：`a`如果第`k`th 位`q`为真，则结果为，否则为`b`

取位向量 c= `a!=b and a==1111..1 and b==0000..0`，我们使用我们的`if`函数依次测试第一位是否为 1，然后第二位是否为 1，依此类推：

```
a<b := 
  if(c,0, 
    if(a,0, B_LESSTHAN_A, A_LESSTHAN_B), 
    if(c,1, 
      if(a,1, B_LESSTHAN_A, A_LESSTHAN_B), 
      if(c,2, 
        if(a,2, B_LESSTHAN_A, A_LESSTHAN_B), 
        if(c,3, 
          if(a,3, B_LESSTHAN_A, A_LESSTHAN_B), 
          if(...
                  if(c,64, 
                    if(a,64, B_LESSTHAN_A, A_LESSTHAN_B), 
                    A_EQUAL_B)
                  )
             ...)
        )
      )
    )
  ) 
```

这需要一些`wordsize`步骤。但是，如果不允许递归，则可以使用递归定义的函数或定点组合器将其编写为 3 行。

然后我们把它变成一个更大的函数：`xMin<x and x<xMax and yMin<y and y<yMax`**

# security - [NodeJS]我的后端代码安全吗？

> ID：10052084
> 
> 赞同：0
> 
> 时间：2012-04-07T05:34:42.703
> 
> 标签：security, node.js, backend

我想在 NodeJS 上创建一个简单的站点。例如，它有两个文件（app.js - 主应用程序文件）和 router,js（一个 url 文件）。我想知道 - 如果任何人都可以访问 mydomain.com/router.js 来获取我的应用程序的源代码吗？我问'因为例如在 PHP 中你不能只访问 php，因为你知道服务器只是给你这个 PHP 文件的工作结果，而不是文件本身。那么，如何使我的 nodejs-app 对公共访问不可见？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:40:49.800

这取决于你如何使用 Node.js 以及你在它前面的 Web 服务器使用什么。与作为 CGI 或 Apache 中的模块运行的 PHP 不同，node 和 node 应用程序本身就是一个服务器。如果您的网络服务器暴露了您的节点源目录，那么您在问题中提供的 url 很可能会导致您的源代码被提供。即使您使用 Apache 并代理到节点，通常也不会涉及输出过滤器。相反，请求被传递到解释它们的后端节点服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:13:16.737

我确保 Node.js 的所有文件都不会位于由另一个 Web 服务器（例如 Apache）提供服务的路径中。这样，源被意外送达的危险很小。

我的节点程序和文件放在 /var/nodejs 中，并为 Node 中的每个应用程序创建一个子文件夹。当然，默认情况下，除非您告诉它，否则 Node 不会提供任何服务。

在我的 Apache 配置的根目录中，我确保所有文件夹都是安全的，因此我必须明确地启用在任何文件夹结构上的服务，即使在我用于所有 Apache 站点的 /var/www 文件夹下也是如此。

因此，只要您将文件夹分开，使用默认设置的 Node 和 Apache 就非常安全。此外，Node 不会意外地提供源代码，您必须设置一个 Node 服务器，将文件作为文本读取并将其写入 http 流。

# javascript - 阻止 onfocus 事件在 javascript 中触发

> ID：10052085
> 
> 赞同：0
> 
> 时间：2012-04-07T05:34:52.050
> 
> 标签：javascript

onFocus 事件在页面加载时不断触发，并且在元素进入焦点时似乎不起作用。我只希望在输入成为焦点而不是页面加载时触发警报

```
//Input
var input = document.getElementById('phonenumber');
//onfocus execute function
input.onFocus = alert('test') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:36:51.383

您正在调用该函数`alert`并将其返回值 ( `undefined`) 分配给焦点处理程序。试试这个：

```
input.onfocus = function() { alert('test'); }; 
```

或者，也许更容易理解：

```
function inputFocused() {
    alert('test');
}
input.onfocus = inputFocused; 
```

请注意，作业后面没有括号`inputFocused`。我们要设置`onfocus`为*函数本身*，而不是*调用*函数的结果。

# iphone - iphone中非零客户端计数的AddRunningClient启动设备？

> ID：10052086
> 
> 赞同：-4
> 
> 时间：2012-04-07T05:35:09.303
> 
> 标签：iphone, objective-c, ios

谁能告诉我这条消息是什么意思？

AddRunningClient 在非零客户端计数上启动设备。

谢谢你。

阿巴斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:55:08.403

这是 AVAudioPlayer 吗？它在模拟器中吗？如果是，那只是 API 中的一个 bug，可以忽略。在设备上应该没问题。

# flash - Flash 可以做低延迟的音频合成吗？

> ID：10052092
> 
> 赞同：3
> 
> 时间：2012-04-07T05:36:41.850
> 
> 标签：flash, audio, synthesis

当使用 Sound 类的 SAMPLE_DATA 事件合成声音时，Flash 文档建议尽可能多地写入最多 8192 个样本。在我的系统上，除非我每个事件至少写入 4192 个样本，否则声音会中断。那是整整十分之一秒，这将是用户注意到的。

我可以选择提前缓冲一些东西，但这对我的应用程序来说是一个主要的烦恼。有什么方法可以降低延迟音频输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:18:38.167

不幸的是，`SAMPLE_DATA`它是合成音频的主要手段，它在平台之间具有不同的性能和延迟。对于最小的延迟，您能做的最好的事情是在`SampleDataEvent`.

还有[Sound.loadPCMFromByteArray](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/media/Sound.html#loadPCMFromByteArray%28%29)，它是在 Flash Player 11 中添加的，允许您将样本直接加载到普通的 Sound 对象中。虽然这对实时动态音频合成没有帮助，但它允许您预先生成声音并在需要时播放它。

# php - 如何在使用php插入mysql数据库时去除[，]括号

> ID：10052096
> 
> 赞同：0
> 
> 时间：2012-04-07T05:37:21.897
> 
> 标签：php, mysql

您好先生，我正在通过 url 将数组列表 android 发送到 php，它也成功插入，但是 start[ 和 end ] 这个刹车也插入了我想删除它

我尝试以下代码..

```
<?php
    $arr=explode(',',preg_replace('/^\[(.*)\]$/','$1',$_POST['menuname']));
    mysql_connect("localhost","root","root");
    mysql_select_db("test");
    foreach($arr as $value){
        mysql_query("INSERT INTO test (menuname) VALUES ('" . 
        mysql_real_escape_string($value) . "')")or
        die('unable'.mysql_error());
        echo "inserted";
    }
?> 
```

请问如何删除括号开始和结束请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:44:06.347

我不知道 PHP 但在 Mysql 中是这样的

```
INSERT INTO test (menuname) VALUES (replace(replace(value, '[', ''), ']', '')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:36:17.947

如果您的数据如下所示：
[menu1,menu2,menu3]
那么您可以使用 substr 转储括号，然后将其分解，如下所示：

```
$arr=explode(',',substr($_POST['menuname'],1,-1))

...

foreach($arr as $value){
$val=mysql_real_escape_string($value);
mysql_query("INSERT INTO test (menuname) VALUES ('" . $val . "')")or
        die('unable'.mysql_error());

... 
```

顺便提一句。您可以通过创建一个更长的查询在 mysql 中一次性插入多行：

```
INSERT INTO test (menuname) VALUES (value1), VALUES(value2) .... 
```

# android - 将值从一项活动传递到另一项活动

> ID：10052097
> 
> 赞同：0
> 
> 时间：2012-04-07T05:38:23.373
> 
> 标签：android

我想将值从一个活动发送到另一个活动，但出现空指针异常，请解决我的问题。第一个活动包含短信，该短信的详细信息
将根据这些值发送到第二个活动第二个活动搜索联系人号码并发送回复短信。

```
public void onReceive( Context context, Intent intent ) 
    {
        // Get SMS map from Intent
        Bundle bundle = null;
        Bundle extras = intent.getExtras();

        String messages = "";
        String address = null,body=null;

        if ( extras != null )
        {
            // Get received SMS array
            Object[] smsExtra = (Object[]) extras.get( "pdus" );

            // Get ContentResolver object for pushing encrypted SMS to incoming folder
            //ContentResolver contentResolver = context.getContentResolver();

            for ( int i = 0; i < smsExtra.length; ++i )
            {
                SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

                body = sms.getMessageBody().toString();
               address = sms.getOriginatingAddress();

                messages += "SMS from " + address + " :\n";                    
                messages += body + "\n";

                // Here you can add any your code to work with incoming SMS
                // I added encrypting of all received SMS 

            }

            // Display SMS message
            Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
            Intent i=new Intent(context,AlertActivity.class);

           bundle.putString("from",address);
            bundle.putString("msg",body);
            i.putExtras(bundle);

            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);

        }

} 
```

活动2：

```
 Intent i=getIntent();
    Bundle bundle=i.getExtras();
    String fromAdd=bundle.getString("from");
    String msgBody=bundle.getString("body"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:47:42.350

改变这个

```
String msgBody=bundle.getString("body"); 
```

至

```
String msgBody=bundle.getString("msg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:48:08.170

尝试这个：

```
@Override  
 public void onCreate(Bundle savedInstanceState) {  
 super.onCreate(savedInstanceState);  
 setContentView(R.layout.main);    
 Bundle bundle = this.getIntent().getExtras();   
if (bundle != null)
{       
 String fromAdd = bundle.getString("from");  
 String msgBody = bundle.getString("body");   
}         
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T05:53:22.947

在 Android Bundle 中，我们放置了键值对，并且您必须传递相同的键，同时从您放置数据的 bundle 中获取数据。检查您的代码，您将两个字符串放在意图上，它们是：“from”和“msg”，并且您通过键从意图中获取值：“from”和“body”

所以在开始活动或活动 2 中更改它。以便键值匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:18:10.927

Try this..... to pass value from Activity1 to Activity2.

```
 Intent myIntent = new Intent(Activity1.this, Activity2.class);
           myIntent.putExtra("UserId",UserId);
           myIntent.putExtra("UserName",UserName);
           myIntent.putExtra("CompanyID",CompanyID);
           myIntent.putExtra("CompanyName",CompanyName);
           myIntent.putExtra("ProjectId",ProjectId);
           startActivity(myIntent); 
```

Also can extract the value you can use

```
 Intent intent = getIntent();
    UserId=intent.getStringExtra("UserId");
    UserName=intent.getStringExtra("UserName");
    CompanyID=intent.getStringExtra("CompanyID");
    CompanyName=intent.getStringExtra("CompanyName"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T06:09:18.787

尝试这个.....

Activity1.java

```
Intent intent = new Intent(getApplication(),Activity2.class);
intent.putExtra("from",from);
intent.putExtra("Body",Body);
StartActivity(intent); 
```

Activity2.java

```
Intent intent = getintent();
Bundle bundle=intent.getExtras();
String Body=bundle.getString("Body");
String From=bundle.getString("From");
setResult("RESULT_OK",intent); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T07:45:53.473

用这种方法试试。。

捆绑 bu=getIntent().getExtras();

String title=bu.get("from").toString();

字符串 msg=bu.get("body").toString();

# java - 在java中验证电子邮件地址

> ID：10052098
> 
> 赞同：3
> 
> 时间：2012-04-07T05:38:26.397
> 
> 标签：java, spring-mvc

我究竟如何验证电子邮件地址的域部分？我是否需要首先列出我的 java 类中的现有域，或者 java`InternetAddress.validate()`将默认执行它？我用过这个：

```
public static boolean verifyEmailAddress(String regEmail) {
    boolean result = true;
    try {
        InternetAddress emailAddr = new InternetAddress(regEmail);
        emailAddr.validate();
    } catch (AddressException ex) {
        result = false;
    }
    return result;
} 
```

request.getParameter 有一个电子邮件地址并存储在 regEmail 中。问题甚至是无效的电子邮件，比如`san@hhhgggmail.com`它显示有效。谁使用过并测试过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T21:30:09.190

I think you are approaching the problem from the wrong perspective. From your application point of view, an email should be considered *valid* (better, useful) if it can receive mail. That's why all those forums keep sending you activation email :) You should send some random string to every new email address and keep it in a *quarantine* state until the user can prove he read the secret.

This is because the domain could exist, or even an MX record for that domain can exist in DNS, but neither of these conditions can guarantee that the address is *valid* - again, when you *validate* something you are really stating that it can be used later in your code for some purpose, and the purpose for an email address is to receive mail

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:40:34.723

我不知道Java中是否有自动方式。但我会查找域的 MX 记录。如果存在 MX 记录，则域可能会收到邮件。

另请参阅[此页面](http://www.tomred.net/java-extended-email-validation-using-dns-mx-lookup.html)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T05:48:22.350

为什么不在域部分使用[InetAddres.getByName呢？](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T03:27:27.403

我认为没有完全有效的方法来验证它。我们所能做的就是验证模式，或者更多地验证邮件域，例如 hhhgggmail.com。但是你怎么能怀疑“san@hhhgggmail.com 确实存在”？

SMTP 确实有一个命令“VEFY”，但出于安全原因，几乎所有的 smtp 服务器都没有实现这个命令。

哦，你想验证域名。所有 smtp 服务器都需要一个 mx dns 记录。您可以使用 dnsjava 模块来验证它。代码为：</p>

```
public static MXRecord digOptimalMxRecords(String domainName) throws TextParseException {
        List<MXRecord> records = DNSHelper.digMxRecords(domainName);
        if (CollectionUtils.isNotEmpty(records)) {
            Collections.sort(records, new Comparator<MXRecord>() {
                @Override
                public int compare(MXRecord o1, MXRecord o2) {
                    return o2.getPriority() - o1.getPriority();
                }
            });
            return records.get(0);
        }
        return null;
    }

public static List<MXRecord> digMxRecords(String domainName) throws TextParseException {
    List<MXRecord> list = new ArrayList<MXRecord>();
    Lookup mxLookupper = new Lookup(domainName, Type.MX);
    mxLookupper.run();
    if (mxLookupper.getResult() == Lookup.SUCCESSFUL) {
        Record[] answers = mxLookupper.getAnswers();
        for (Record record : answers) {
            list.add((MXRecord) record);
        }
    }
    return list;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-26T16:01:25.257

请忽略变量名称，因为它们不专业：

```
import java.util.regex.Matcher;

import java.util.regex.Pattern;

import java.util.Scanner;

public class EmailValidator {

public static void main(String[] args) {

    recursion();

}

static void recursion () {

    Scanner scanner = new Scanner(System.in);

    System.out.println("Welcome to the game of typing a correct email address!");

    System.out.println();

    System.out.println("As the game says, enter a correct email address.");

    System.out.println();

    String snow = scanner.nextLine();

    String[] sssp = snow.split("@");

    if (sssp.length != 2) {

    System.out.println();

    System.out.println("This is not a correct email address."); 

    System.out.println();

    recursion();

    } else {

        String regex = "[^a-z0-9._]";

        String regex1 = "^\\.|\\.$";

        String regex2 = "\s";

        String regex3 = "^$";

        String regex7 = "\\._|_\\.";

        String regex39 = "__";

        String regex19 = "\\.\\.";

        String regex20 = "^_|_$";

        Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);

        Pattern pattern1 = Pattern.compile(regex1, Pattern.CASE_INSENSITIVE);

        Pattern pattern2 = Pattern.compile(regex2, Pattern.CASE_INSENSITIVE);

        Pattern pattern3 = Pattern.compile(regex3, Pattern.CASE_INSENSITIVE);

        Pattern pattern11 = Pattern.compile(regex7, Pattern.CASE_INSENSITIVE);

        Pattern pattern12 = Pattern.compile(regex19, Pattern.CASE_INSENSITIVE);

        Pattern pattern13 = Pattern.compile(regex20, Pattern.CASE_INSENSITIVE);

        Pattern pattern14 = Pattern.compile(regex39, Pattern.CASE_INSENSITIVE);

        Matcher matcher = pattern.matcher(sssp[0]);

        Matcher matcher1 = pattern1.matcher(sssp[0]);

        Matcher matcher2 = pattern2.matcher(sssp[0]);

        Matcher matcher3 = pattern3.matcher(sssp[0]);

        Matcher matcher11 = pattern11.matcher(sssp[0]);

        Matcher matcher12 = pattern12.matcher(sssp[0]);

        Matcher matcher13 = pattern13.matcher(sssp[0]);

        Matcher matcher14 = pattern14.matcher(sssp[0]);

        boolean matchFound = matcher.find();

        boolean matchFound1 = matcher1.find();

        boolean matchFound2 = matcher2.find();

        boolean matchFound3 = matcher3.find();

        boolean matchFound10 = matcher11.find();

        boolean matchFound11 = matcher12.find();

        boolean matchFound12 = matcher13.find();

        boolean matchFound13 = matcher14.find();

        String hello = sssp[1];

        String[] whoop = hello.split("\\.", 2);

        if (whoop.length != 2) {

        System.out.println();

        System.out.println("This is not a correct email address."); 

        System.out.println();   

        recursion();

        } else {

            String regex4 = "[^a-z]";

            String regex5 = "^$";

            String regex6 = "\s";

            Pattern pattern4 = Pattern.compile(regex4, Pattern.CASE_INSENSITIVE);

            Pattern pattern5 = Pattern.compile(regex5, Pattern.CASE_INSENSITIVE);

            Pattern pattern6 = Pattern.compile(regex6, Pattern.CASE_INSENSITIVE);

            Matcher matcher4 = pattern4.matcher(whoop[0]);

            Matcher matcher5 = pattern5.matcher(whoop[0]);

            Matcher matcher6 = pattern6.matcher(whoop[0]);

            boolean matchFound4 = matcher4.find();

            boolean matchFound5 = matcher5.find();

            boolean matchFound6 = matcher6.find();

            Pattern pattern7 = Pattern.compile(regex4, Pattern.CASE_INSENSITIVE);

            Pattern pattern8 = Pattern.compile(regex5, Pattern.CASE_INSENSITIVE);

            Pattern pattern9 = Pattern.compile(regex6, Pattern.CASE_INSENSITIVE);

            Matcher matcher7 = pattern7.matcher(whoop[1]);

            Matcher matcher8 = pattern8.matcher(whoop[1]);

            Matcher matcher9 = pattern9.matcher(whoop[1]);

            boolean matchFound7 = matcher7.find();

            boolean matchFound8 = matcher8.find();

            boolean matchFound9 = matcher9.find();

            System.out.println();

            if(matchFound || matchFound1 || matchFound2 || matchFound3 || matchFound4 || matchFound5 || matchFound6 || matchFound7 || matchFound8 || matchFound9 || matchFound10 || matchFound11 || matchFound12 || matchFound13) {

                System.out.println("This is not a correct email address.");

                System.out.println();

                recursion();

            } else {

                System.out.println("This is a correct email address.");

                System.out.println();

                System.out.println("Do you still want to play? (say yes to play) ");

                System.out.println();

                Scanner scanner1 = new Scanner(System.in);

                String snow1 = scanner1.nextLine();

                if (snow1.equalsIgnoreCase("yes")) {

                    System.out.println();

                    recursion();

                } else {

                    System.out.println();  

                    System.out.println("Okay, then.");  

                    scanner.close();

                    scanner1.close();

                }

            }   

        }

    }

}

} 
```

# php - jquery,javascript用@改变文本链接

> ID：10052101
> 
> 赞同：0
> 
> 时间：2012-04-07T05:39:07.103
> 
> 标签：php, javascript, jquery, regex

我有这个字符串

> @[123:peterwateber]**你好！**再会！

我想把它改成`<a href="123">peterwateber</a> &lt;b&gt;hellow!&lt;/b&gt;! good day!`

我首先要做的是，从给定的字符串中，首先将 @[123:peterwateber] 转换为锚标记，然后将带有 htmlspecialchars 的剩余字符串解析为纯文本。这该怎么做？

我通过这段代码使用 php 做了第一个：`preg_match('#@\[(\w+)\:(\w+)\]#', $hidden_input, $m)`但这次我想用 jquery 或 javascript 来做......有什么建议吗？我非常需要你们的帮助，解决这个问题已经 3 天了 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:56:56.287

**javascript中的正则表达式替换**

```
'@[123:peterwateber] hello! good day!'.replace(
    /@\[(.*):(.*)\](.*)/,
    '<a href="$1">$2</a>$3'
 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:01:09.943

你可以做这样的事情：

```
var text = 'And then @[123:peterwateber] said "Hello world!". After that @[123:nathanjosiah] was talking about a jsfiddle';

text = text.replace(/@\[(\d+)\:(\w+)\]/g, '<a href="$1">$2</a>')
// output: And then <a href="123">peterwateber</a> said "Hello world!". After that <a href="123">nathanjosiah</a> was talking about a jsfiddle 
```

# iphone - 可达性类错误

> ID：10052102
> 
> 赞同：2
> 
> 时间：2012-04-07T05:39:29.543
> 
> 标签：iphone

Xcode 4.2, iOS 5.0 我的项目启用了 ARC，当在我的项目中添加非 ARC Reachabilty 类时，出现以下错误：

```
Undefined symbols for architecture i386:
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[Reachability startNotifier] in Reachability.o
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[Reachability startNotifier] in Reachability.o
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[Reachability stopNotifier] in Reachability.o
  "_SCNetworkReachabilityCreateWithName", referenced from:
      +[Reachability reachabilityWithHostName:] in Reachability.o
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      +[Reachability reachabilityWithAddress:] in Reachability.o
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[Reachability connectionRequired] in Reachability.o
      -[Reachability currentReachabilityStatus] in Reachability.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:24:53.803

您是否在项目中添加了框架 SystemConfiguration.framework？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:46:06.507

您添加的库似乎只为设备构建，而不是为模拟器构建（这就是为什么它说“找不到架构 i386”）。

找到代码并将其直接添加到您的项目中，您应该能够为设备*和*模拟器构建。

# c# - 如何 Linq2Xml 一个网络服务？

> ID：10052104
> 
> 赞同：0
> 
> 时间：2012-04-07T05:39:49.297
> 
> 标签：c#, linq-to-xml, xml-namespaces

我正在使用 HttpWebRequest.Create 方法调用 WebService 并使用 StreamReader 读取它，（以下方法执行此工作）：

```
private string ReadWebMethod(string address)
{
    var myRequest = (HttpWebRequest)HttpWebRequest.Create(address);
    myRequest.Method = "POST";
    using (var responseReader = new StreamReader(myRequest.GetResponse().GetResponseStream()))
        return responseReader.ReadToEnd();
} 
```

此方法效果很好，并输出如下字符串：

```
<ArrayOfAppObject xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<AppObject>
<Name>MyApp</Name>
<Image>StoreApp.png</Image>
<Version>SM2.1.0</Version>
</AppObject>
</ArrayOfAppObject> 
```

现在我想看看这个字符串，所以我使用 XElemnet 并解析字符串。（下面的代码）：

```
XElement x = XElement.Parse(ReadWebMethod(address)); 
```

现在，当我 foreach 时，x.Elements("AppObject")，它不返回任何项目并跳过 foreach。我的 foreach 是这样的：

```
foreach (var item in x.Elements("AppObject"))
{
    listApplication.Add(new AppObject { Image = item.Element("Image").Value, Name = item.Element("Name").Value, Version = item.Element("Version").Value });
} 
```

我创建了一个本地字符串并在“ArrayOfAppObject”（xmlns：xsi =“htt ...）之后删除属性（有些地方将其命名为xmlnamespace）并再次测试它，它也可以正常工作并且foreach不会跳过！

那么，如何使用带有命名空间的 xml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:59:12.807

使用 XDocument 类

```
using System.Xml.Linq;

//...
var xml = ReadWebMethod(address);
var xdocument = System.Xml.Linq.XDocument.Parse(xml); 
```

## 更新

当您的 XML 数据定义命名空间时..`xmlns="http://tempuri.org/"`

您必须使用有效的命名空间声明完整**的 XName 。**访问每个元素值

```
XName theElementName = XName.Get("AppObject", "http://tempuri.org/");
//or alternate way..
XName theElementName = XName.Get("{http://tempuri.org/}AppObject"); 
```

这是示例测试方法

```
[TestMethod]
public void ParseXmlElement()
{
    XDocument xdoc = XDocument.Parse(this.mockXml);

    XName appTag = XName.Get("{http://tempuri.org/}AppObject");
    XName nameTag = XName.Get("{http://tempuri.org/}Name");
    XName imageTag = XName.Get("{http://tempuri.org/}Image");

    XElement objElement = xdoc.Root.Element(appTag);
    Assert.IsNotNull(objElement, "<AppObject> not found");
    Assert.AreEqual("{http://tempuri.org/}AppObject", objElement.Name);

    XElement nameElement = objElement.Element(nameTag);
    Assert.IsNotNull(nameElement, "<Name> not found");
    Assert.AreEqual("MyApp", nameElement.Value);

    XElement imageElement = objElement.Element(imageTag);
    Assert.IsNotNull(imageElement, "<Image> not found");
    Assert.AreEqual("StoreApp.png", imageElement.Value);
} 
```

以这种方式使用 Xml.Linq ..

```
[TestMethod]
public void ParseXmlLinq()
{
    XDocument xdoc = XDocument.Parse(this.mockXml);

    XElement app = xdoc.Root.Elements()
        .FirstOrDefault(e => e.Name == XName.Get("AppObject", "http://tempuri.org/"));

    Assert.IsNotNull(app, "<AppObject> not found");

    XElement img = app.Elements()
        .FirstOrDefault(x => x.Name == XName.Get("Image", "http://tempuri.org/"));

    Assert.IsNotNull(img, "<Image> not found");
    Assert.AreEqual("StoreApp.png", img.Value);
} 
```

*请注意，我只是从您的 XML 中模拟和解析字符串。*

# python - 如何优化 BK-Tree

> ID：10052105
> 
> 赞同：2
> 
> 时间：2012-04-07T05:39:50.720
> 
> 标签：python, algorithm, cython, bk-tree

我正在 Cython 中实现 BK-Tree。

一百万个项目，搜索时间太长了！大约 30 秒 :(

这是我的 Cython 代码：

```
# -*- coding: UTF-8 -*-

from itertools import imap
from PIL import Image

DEF MAX_TREE_POOL = 10000

cdef extern from "distances.h":
    int hamming_distance(char *a, char *b)
    enum: HASH_BITS

cdef findInTree(Node parent, Item item, int threshold):
        cdef int d
        cdef int i = 0

        cdef Node child

        cdef object childrens
        cdef object results = []
        cdef object extends = results.extend

        if parent:
            d = hamming_distance(item.hash, parent.item.hash)
            childrens = parent.childrens.get

            if d <= threshold:
                results.append((d, parent.item))

            for i in xrange(max(0, d - threshold), d + threshold + 1):
                child = childrens(i)
                if child:
                    extends(findInTree(child, item, threshold))

        return results

cdef class Item:

    cdef public unsigned int id
    cdef public object hash

    def __init__(Item self, unsigned int id, object hash):
        assert id > 0 and len(hash) == HASH_BITS

        self.id = id
        self.hash = hash

    def __str__(Item self):
        return '<Item {0}>'.format(self.id)

    def __repr__(Item self):
        return '<Item #{0} object at 0x{1}>'.format(self.id, id(self))

cdef class Node:

    cdef readonly Item item
    cdef readonly dict childrens

    def __cinit__(Node self, Item item):
        self.item = item
        self.childrens = {}

    def __repr__(Item self):
        return '<Node object at 0x{0} item {1} childrens {2}>'.format(id(self), repr(self.item), repr(self.childrens))

cdef class BKTree:

    cdef readonly Node tree
    cdef readonly unsigned int count

    def __cinit__(BKTree self):
        self.count = 0

    def addItem(BKTree self, Item item):
        cdef int w
        cdef int d

        cdef object a

        cdef Node n
        cdef Node c

        if not self.tree:
            self.tree = Node(item)
        else:
            w = 1
            c = self.tree

            a = item.hash

            while w:
                d = hamming_distance(a, c.item.hash)
                n = c.childrens.get(d)

                if n is None:
                    c.childrens[d] = Node(item)

                    # Break
                    w = 0
                else:
                    c = c.childrens[d]

        self.count += 1

        # Success, return
        return self.count

    def query(BKTree self, Item item, int threshold):
        return findInTree(self.tree, item, threshold)

cdef class BKTreePool:

    cdef list pool
    cdef readonly unsigned int count
    cdef BKTree tree

    def __cinit__(BKTreePool self):
        self.pool = []
        self.rotate()

    def addItem(BKTreePool self, Item item):
        if self.tree.count >= MAX_TREE_POOL:
            self.rotate()

        try:
            self.tree.addItem(item)
            self.count += 1
        finally:
            return self.count

    def query(BKTreePool self, Item item, int threshold):
        cdef BKTree tree
        cdef list results

        results = []

        for tree in self.pool:
            results.extend(tree.query(item, threshold))

        return results

    cdef rotate(BKTreePool self):
        self.pool.append(BKTree())
        self.tree = self.pool[-1] 
```

距离.h

```
#ifndef DISTANCES_H

  #define DISTANCES_H 1
  #define HASH_BITS 16 * 16

  static int hamming_distance(char *a, char *b);
  // static int default_distance(char *a, char *b);

  static int hamming_distance(char *a, char *b) {
      unsigned int distance = 0;
      int i;

      for (i = 0; i <= HASH_BITS; i++) {
          if (a[i] != b[i]) {
              distance++;
          }
      }

      return distance;
  }

#endif 
```

例子：

```
tree = BKTreePool()
tree.addItem(Item(1, '10' * 256))
tree.addItem(Item(1, '10' * 256))
....

tree.query(Item(1, '10' * 256), 5) 
```

这棵树开始通过 256 位哈希搜索重复图像。

如何优化此`findInTree`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:22:20.013

通过以 256 位（32 字节）而不是 256 或 512 字节表示“256 位哈希”，您可以节省大量内存（从而交换和/或缓存刷新）。

Python伪代码：

```
num_bits_set = (0, 1, 1, 2, 1, etc etc, 7, 8)
assert len(num_bits_set) == 256

def ham_diff(a, b):
    h = 0
    for p, q in zip(a, b):
        h += num_bits_set[ord(p) ^ ord(q)]
    return h 
```

# android - 如何杀死堆栈活动

> ID：10052106
> 
> 赞同：1
> 
> 时间：2012-04-07T05:39:57.753
> 
> 标签：android, android-activity

请告诉我，如何杀死以前堆叠的活动。我的要求是让我从活动 A---->B----->C-------->D----- >E 然后活动**堆栈**将是 **EDCBA** 现在我在**E**，如果我的所有工作都完成了，那么我 使用

 **```
startActivity(intent); 

this.finish(); 
```

此代码将仅 **终止 E**活动，但我也想终止**CD**活动。我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T05:46:11.463

一种解决方案是使用标志 FLAG_ACTIVITY_CLEAR_TOP 调用 Activity [B]

```
Intent b = new Intent(this,B.class);
b.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(b);
this.finish(); 
```

这会杀死`C D E`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T05:48:10.327

```
Intent intent  = new Intent(this, B.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);        
    startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T05:47:21.307

您必须将活动上下文传递给 intet，以便您可以在活动上调用完成。

也好主意是通过使用开始活动`startActivityForResult(Intent, int).`

`int`您开始的活动的代码在哪里。

稍后您可以调用`finishActivity(int requestCode)`which 将终止您提供的代码的活动。您可以在`strings.XML`.

[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent) , int)**

# c# - 如何在 datalist 中获取选定的单选按钮文本？

> ID：10052108
> 
> 赞同：1
> 
> 时间：2012-04-07T05:40:27.530
> 
> 标签：c#, javascript, asp.net

在下面的数据列表中代表一组问题和答案，当用户使用javascript单击提交按钮时，如何检查用户是否选择了正确的答案单选按钮？

答案存储在数据库中。

数据列表：

```
<asp:DataList ID="DataList1" runat="server" DataKeyField="Qno" 
        DataSourceID="SqlDataSource1">
        <ItemTemplate>
            Qno:
            <asp:Label ID="QnoLabel" runat="server" Text='<%# Eval("Qno") %>' />
            <br />
            Question:
            <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
            <br />
            <asp:RadioButton ID="RadioButton1" runat="server" Text='<%# Eval("Ans1") %>' />
            <br />
            <asp:RadioButton ID="RadioButton2" runat="server" Text='<%# Eval("Ans2") %>' />
            <br />
            <asp:RadioButton ID="RadioButton3" runat="server" Text='<%# Eval("Ans3") %>' />
            <br />
            <asp:RadioButton ID="RadioButton4" runat="server" Text='<%# Eval("Ans4") %>' />
            <br />
            <asp:Button ID="Button2" runat="server" Text="Submit" />
            <br />
        </ItemTemplate>
    </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:19:06.193

为 DataList 中的 Button2 提供 CommandName 参数：*CommandName="Validate"*

为 DataList1 添加 OnItemCommand 事件：*OnItemCommand="DataList1_OnItemCommand"*

在后面的代码中，填写 *DataList1_OnItemCommand* 事件操作：

```
protected void DataList1_OnItemCommand(object sender, DataListCommandEventArgs e)
{
 if (String.Equals(e.CommandName, "Validate"))
 {
  DataListItem dataItem = (DataListItem )e.Item;
  RadioButton rbtn1 = (RadioButton)dataItem.FindControl("RadioButton1");
  RadioButton rbtn2 = (RadioButton)dataItem.FindControl("RadioButton2");
  RadioButton rbtn3 = (RadioButton)dataItem.FindControl("RadioButton3");
  RadioButton rbtn4 = (RadioButton)dataItem.FindControl("RadioButton4");

  // Code to check which radio button was checked.
  if(rbtn1 != null && rbtn1.Checked)
  {

  }
  else if(rbtn2 != null && rbtn2.Checked)
  {

  } //Perform these for the remaining two check boxes
 }
} 
```

根据选中的复选框采取必要的措施。

# cakephp - CakePHP 2.1 验证多个选择框

> ID：10052113
> 
> 赞同：1
> 
> 时间：2012-04-07T05:41:05.020
> 
> 标签：cakephp, cakephp-2.0

我正在使用 CakePHP 2.1，我有两个模型 Movie 和 Person .. 其中 Movie 包含 person_id 作为外键作为多个选择框.. 那么如何在 Movies 视图中验证 person_id 添加函数..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:39:27.360

需要什么类型的验证？将此代码添加到电影模型中：

```
public $validate = array(
    'person_id' => array(
        'notempty' => array(
            'rule' => array('notempty'),
        ),
    )
); 
```

更多关于验证：[http ://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

# jquery - jQuery检测悬停在单个div的左侧或右侧

> ID：10052119
> 
> 赞同：2
> 
> 时间：2012-04-07T05:42:13.500
> 
> 标签：jquery, hover, mouse

我有一个正在构建的照片库，并且我有一个上一个和下一个按钮，可以根据悬停等显示和隐藏以及更改不透明度。现在我有一个围绕图像本身的包装器，然后我在里面有两个 50% 宽度的 div，左边是上一个，右边是下一个。我想通过检测何时将鼠标悬停在单个 div 包装器的左侧或右侧 50% 上来做到这一点。包装器也有不同的可能宽度，它使用 100% 的宽度来调整屏幕尺寸。

我希望它替换：

```
$(".photo-previous, .photo-next").hover(function()
{
$(this).fadeTo(100, 1);
},
function()
{
$(this).fadeTo(100, 0.5);
}
); 
```

使用鼠标位置而不是`.photo-previous`and `.photo-next`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T06:11:23.753

使用`mousemove`事件。

```
$("#photoContainer").on('mousemove', function(e) {
    var mouseSide;
    if ((e.pageX - this.offsetLeft) < $(this).width() / 2) {
        mouseSide = 'L';
    } else {
        mouseSide = 'R';
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/58Qdw/3/)

编辑：添加`- this.offsetLeft`和更新小提琴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T05:57:05.280

我已经说过我喜欢你的其他实现，但如果你真的想用不同的方式来做，你可以使用鼠标事件的`e.pageX`and成员。`e.pageY`所以你可以做类似的事情......

```
$("#wrapper").mouseover(function(e){
    var x = e.pageX - $(this).offsetLeft;

    if(x < $(this).width() / 2)
        //left
    else
        //right
}); 
```

这使它成为动态的，所以包装器的宽度并不重要。

我确信 jquery UI 的鼠标插件有一些内置的方法来获取相对鼠标位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T05:59:07.800

有一个 mouseover(function) 可以让这样的事情变得简单。

# wpf - 为什么 Datagrid 不显示数据？

> ID：10052122
> 
> 赞同：-1
> 
> 时间：2012-04-07T05:43:30.583
> 
> 标签：wpf, datagrid

我在 C# + WPF 中有一个应用程序，我需要填充一个数据网格。

我尝试使用其属性 ItemsSource 填充 DataGrid。

```
DataGrid.ItemsSource = <ElementList>; 
```

ElementList 是一个字符串列表。

当我运行它时，它会为列表的每个元素生成一行，但它不显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:47:15.503

你的数据有[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)吗？[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)将不起作用，除非您手动创建列，否则也[`AutoGenerateColumns`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratecolumns.aspx)需要。`true`

# node.js - NodeJS 会话变量不会粘住

> ID：10052128
> 
> 赞同：2
> 
> 时间：2012-04-07T05:44:14.867
> 
> 标签：node.js, timezone, connect, utc

我对 nodejs 和 connect 有疑问，而且它没有在请求之间保留会话变量。现在我不想使用数据库来存储我的会话。我只想使用 MemoryStore。

我的服务器：

```
var server = connect()
.use(connect.cookieParser('justmeknowsthis'))
.use(connect.session({ cookie: { maxAge: config.data.sessionTimeout /* 1800000 */ }}))
.use(auth.authorize)
.use(routes.routes)
.use(function(req, res, next) {
    utils.data.returnJsonError(res, 404, true, {
        message: 'Call not supported'
    });
}); 
```

我正在设置这样的会话变量：

```
req.session.auth = true;
req.session.username = data.username; 
```

在找到有关该问题的更多信息后，我注意到它可能与时区有关，因为如果我只是增加超时，它就会开始工作。从我过去使用 ASP.Net 的经验来看，我以前从未遇到过这个问题，因为它似乎并不关心这个问题。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:42:28.960

好的。所以终于想出了怎么做。在阅读了很多关于我没有在 UTC 中运行我的服务器是多么愚蠢之后，我决定试一试。我在 ubuntu 上，这是让 cookie 正常工作的解决方案。

跑：

```
sudo dpkg-reconfigure tzdata 
```

从“地理区域”列表中选择“Etc” 选择 UTC 并按 Enter

**更新** 我注意到我的服务器时间漂移很大（虚拟机），所以我还必须使用 ntp-daemon 让它正确地保持时间。设置如下：

```
sudo apt-get install ntp 
```

您需要停止 ntp-daemon 才能第一次手动更新它。您也可以重新启动服务器，但它是 Linux，因此您不必这样做。运行以下命令来停止守护进程：

```
sudo /etc/init.d/ntp stop 
```

手动更新服务器时间（使用[http://www.pool.ntp.org/en/](http://www.pool.ntp.org/en/)附近的服务器）：

```
ntpdate ntp.ubuntu.com pool.ntp.org 
```

只需重新启动守护程序：

```
sudo /etc/init.d/ntp start 
```

还要更新文件 /etc/ntp.conf 并包括您的本地时间服务器。

**再次更新** 运行一天后，我注意到时间仍然关闭。我现在已经关闭了 VM 机器的 UTC 选项。不幸的是，这也需要重新启动。

# c# - 如何保护在asp.net中将已发送的电子邮件分类为垃圾邮件

> ID：10052129
> 
> 赞同：2
> 
> 时间：2012-04-07T05:44:18.357
> 
> 标签：c#, asp.net, sql-server, email

> **可能重复：**
> [如何降低电子邮件的垃圾邮件分数？](https://stackoverflow.com/questions/1860937/how-can-i-lower-the-spam-score-of-my-email-message)

我有这个可以向人们发送大量电子邮件的 c# 代码。但是我发送的电子邮件被归类为垃圾邮件。我该怎么办。我应该对我的代码进行任何更改吗？我尝试从 sql server 数据库获取电子邮件地址。我的代码可以附加一个文件。

```
Entities context = new Entities();
var query = from c in context.Emails select c.EmailAddress;
MailMessage mail = new MailMessage();
Regex sample = new Regex(@"^[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z{|}~])*
                                  @[a-zA-Z](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$");
int total = 0;//number of all emails
int count = 0;//counter for putting interrupt between each 10 sending
int failed = 0;//number of failed sending
int success = 0;//number of successful sending

double totalsize = 0;//size of attachment file

if (FileUpload1.HasFile)
{
    mail.Attachments.Add(new Attachment(FileUpload1.PostedFile.InputStream, FileUpload1.FileName));
    foreach (Attachment attachment in mail.Attachments)
    {
        string size =attachment.ContentStream.Length.ToString ();
        totalsize=Convert .ToDouble (size);
    }
 }
foreach (var c in query)
{
    if (count == 10)
    {
        Thread.Sleep(10000);
        count = 0;
    }
    mail.From = new MailAddress("hadi@myhost.com");
    mail.Bcc.Add(new MailAddress(c.ToString()));
    mail.Subject = "hello";
    mail.IsBodyHtml = true;

    mail.Body = FCKeditor1.Value.ToString();

    SmtpClient smtp = new SmtpClient();
    smtp.Host = "localhost";
    smtp.Port = 25; 
    if ((sample.IsMatch(c.ToString())) && (sample .IsMatch (mail .From .ToString ())) && (totalsize<1000000))
    {
      try
        {
            smtp.Send(mail);
            //Response.Write("email has sent to " + c.ToString());
            success++;

        }
        catch 
        {
            //Response.Write("email has not sent to " + c.ToString());
            failed++;
        }
        count++;
    }
    total++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:34:28.013

您无需对您的代码做任何事情以使其不是垃圾邮件。您所要做的就是确保您从不应该具有“开放中继”的主机发送电子邮件，这意味着不是每个人都可以从它发送电子邮件。

从正确的服务器发送您的电子邮件并带有正确的电子邮件签名，这样当接收者检查身份验证时，他们应该验证您的电子邮件源服务器和从您的电子邮件主机验证的签名。

# windows - 使用 BitBlt 从屏幕写入屏幕

> ID：10052130
> 
> 赞同：1
> 
> 时间：2012-04-07T05:45:00.907
> 
> 标签：windows, winapi, graphics, bitmap

我正在尝试复制部分屏幕，修改它们，然后将这些部分复制回屏幕。这是在 Windows 中，使用 C++。

我的代码的一般结构如下所示：

```
HDC hdcDesktop = GetDC(NULL);
HDC hdcTemp = CreateCompatibleDC(hdcDesktop);

BitBlt(hdcTemp, 0, 0, 100, 100, hdcDesktop, 100, 100, SRCCOPY);
BitBlt(hdcDesktop, rand() % 1920, rand() % 1080, 100, 100, hdcTemp, 0, 0, SRCCOPY); 
```

这*应该*将从 (100, 100) 开始的屏幕的 100x100 部分复制到屏幕的某个随机部分。然而，这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:57:44.403

这段代码有几个问题：

1.  如文档所示，[`CreateCompatibleDC`](http://msdn.microsoft.com/en-us/library/dd183489%28v=vs.85%29.aspx)创建一个 1x1 像素的新内存图像。对于您的 100x100 图像块来说，这显然不够大。您可能应该使用[`CreateCompatibleBitmap`](http://msdn.microsoft.com/en-us/library/dd183488%28v=vs.85%29.aspx).

2.  传递给 BitBlt 的坐标是：

    *   目的地的左上角（nXDest，nYDest）
    *   副本的宽度/高度 (nWidth,nHeight)
    *   源的左上角 (nXSrc,nYSrc)

    以该顺序。您似乎将 nXSrc/nYSrc 与 nWidth/nHeight 混淆了。检查你的号码。

3.  像这样肆意滥用桌面表面实际上可能 (1) 被禁止和 (2) 产生意想不到的结果。小心你试图达到的目标。

# c++ - 字符串常量之前的预期标识符

> ID：10052135
> 
> 赞同：18
> 
> 时间：2012-04-07T05:46:05.543
> 
> 标签：c++, linux, constructor

有这样的程序：

```
#include <iostream>
#include <string>
using namespace std;
class test
{
public:
    test(std::string s):str(s){};
private:
    std::string str;
};

class test1
{
public:
    test tst_("Hi");
};

int main()
{
    return 1;
} 
```

…为什么我在执行时得到以下信息

> g++ main.cpp

```
main.cpp:16:12: error: expected identifier before string constant
main.cpp:16:12: error: expected ‘,’ or ‘...’ before string constant 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T05:49:28.793

您无法`tst_`在声明它的位置进行初始化。这只能用于`static const`原始类型。相反，您需要为`class test1`.

编辑：下面，您将看到我在[ideone.com](http://ideone.com/y4h52)中所做的一个工作示例。请注意我所做的一些更改。首先，最好让构造函数引用到`test`以避免复制。其次，如果程序成功了，你不应该（在[ideone](http://ideone.com/h8n2V)中出现运行时错误）。`const``string``return 0``1``return 1`

```
#include <iostream>
#include <string>
using namespace std;
class test
{
public:
    test(const std::string& s):str(s){};
private:
    std::string str;
};

class test1
{
public:
    test1() : tst_("Hi") {}
    test tst_;
};

int main()
{
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-21T16:23:46.077

还有另一种更简化的方式来做你想做的事：只需将你的语句从`test tst_("Hi");`to更改为`test tst_{"Hi"};`它就会起作用。下面是修改后的代码，它按预期工作。

```
#include <iostream>
#include <string>
using namespace std;
class test
{
public:
    test(std::string s):str(s){cout<<"str is: "<<s;}
private:
    std::string str;
};

class test1
{
public:
    test tst_{"Hi"};
};

int main()
{   test1 obj;
    return 0;
} 
```

请注意，我刚刚更改`test tst_("Hi");`为`test tst_{"Hi"};`，其他一切都完全相同。只是为了确认这有效，我添加了一个 cout 来检查它是否正确初始化了 str 变量。我认为这种单线解决方案更优雅（至少对我而言）并且与新标准保持同步。

# css - 来自 Firefox 或 IE 的错误列表填充

> ID：10052143
> 
> 赞同：0
> 
> 时间：2012-04-07T05:47:52.603
> 
> 标签：css

我想知道这一点，不知道它来自哪里：

*   火狐 11：http: [//imgur.com/gDjWy,xFjbH#0](http://imgur.com/gDjWy,xFjbH#0)
*   Internet Explorer 9：http: [//imgur.com/gDjWy,xFjbH#1](http://imgur.com/gDjWy,xFjbH#1)

我确实在文件的开头设置了（它是唯一的 css 文件）：

```
* {
    margin: 0;
    padding: 0;
    font-family: Verdana, Geneva, sans-serif
} 
```

这是#top-Div-Container 的完整样式：

```
#top {

}
#top a {
    font-size: 10px;
    color: #ADD2F8;
    margin-right: 10px;
}
#top a:hover {
    text-decoration: underline;
}
#top ul {
    list-style: none;
}
#top li {
    float: left;
} 
```

帮助和促销是简单的链接。只有登录、请求密码和注册在列表标签​​中，但这里是 HTML：

```
<div id="top">
  <div class="left">
    <a href="/prizeplay/help">Help</a>
    <a href="/prizeplay/promotions">Promotions</a>
  </div>
  <div class="left">
    <ul>
      <li>
        <a name="Login" href="#">Login</a>
      </li>
      <li>
        <a style="font-weight: bold; color: #FFDE00;" href="/prizeplay/request">Register</a>
      </li>
      <li>
        <a href="/prizeplay/request">Request password</a>
      </li>
    </ul>
  </div>
  <div class="clear"></div>
</div> 
```

我不明白这个填充问题。这是为什么？

# php - 在 $dataProvider 变量中获取依赖记录

> ID：10052150
> 
> 赞同：0
> 
> 时间：2012-04-07T05:48:51.603
> 
> 标签：php, yii

我有两个表 tbl_entries 和 tbl_votings

```
tbl_entries -> id, othercolums
tbl_votings -> id, entry_id, othercolumns 
```

如果用户为条目投票，我想从 tbl_entries 显示 zii.widgets.CListView 中的数据。

我能够在 sql 查询下成功运行。

```
select * from tbl_entries where id in (select tbl_entries.id from tbl_votings where entry_id = tbl_entries.id ) 
```

如何以 YII 风格进行操作，以便在 CListView 中显示结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:45:13.400

在`Entries`模型中添加关系：

```
...
'votes' => array(self::HAS_MANY, 'Votings', 'entry_id'),
... 
```

然后通过 AR 搜索：

```
$records = Entries::model()->with('votes')->findAll(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:35:37.813

**更新**

好的，我在您的帖子中错过了“如果”一词，并认为只有当用户投票支持时您才需要条目。阅读下面的更新以获取正确的代码。我把第一部分留给你，以防你将来需要它。仅当条目至少有 1 票时，INNER JOIN 才会接受条目。

------------------ 第一部分（错误）------------------

在模型中声明一个关系`Entries`：

```
public function relations() {
    return array(
        'votes' => array(self::HAS_MANY, 'Votings', 'entry_id'),
    ); 
```

}

当你创建你的数据提供者时，这样做：

```
$dataProvider = new CActiveDataProvider('Entries',
    array(
        'criteria' => array(
            'with' => array(
                'votes'=>array(
                    'joinType' => 'INNER JOIN'
                )
            )
        )
    )
); 
```

这不会为您创建上面编写的 SQL，但这会以正确的方式进行。SQL 将类似于以下内容：

```
select * from tbl_entries t INNER JOIN tbl_votings v ON t.id = v.entry_id 
```

----------------- 第二部分（右） ------------------

**更新**

好的，所以如果您只需要为他们获取条目和投票，您可以从第一部分执行相同的关系声明：

```
public function relations() {
    return array(
        'votes' => array(self::HAS_MANY, 'Votings', 'entry_id'),
    ); 
```

}

然后你像这样创建你的数据提供者：

```
$dataProvider = new CActiveDataProvider('Entries',
    array(
        'criteria' => array(
            'with' => array('votes')
        )
    )
); 
```

# ruby-on-rails - 为什么 Rails 应用程序意外重定向而不是匹配路由？

> ID：10052158
> 
> 赞同：3
> 
> 时间：2012-04-07T05:50:45.017
> 
> 标签：ruby-on-rails, rails-routing

我之前问过这个问题，并认为它已解决，但事实并非如此。上一个问题[在这里](https://stackoverflow.com/questions/10050148/match-in-rails-routes-rb-is-redirecting-too-many-times)

我的问题是我正在尝试设置路线，以便在我输入时

本地主机：3000/站点/管理员

它*应该*重定向到

本地主机：3000/en/sites/admin

这是我的 routes.rb 文件

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
  get "log_out" => "sessions#destroy", as: "log_out"
  get "log_in" => "sessions#new", as: "log_in"

  resources :sites, except: [:new, :edit, :index, :show, :update, :destroy, :create]   do
  collection do
    get :home
    get :about_us
    get :faq
    get :discounts
    get :services
    get :contact_us
    get :admin
    get :posts
  end
end
resources :users
resources :abouts
resources :sessions
resources :coupons
resources :monthly_posts
resources :reviews
resources :categories do
collection { post :sort }
resources :children, :controller => :categories, :only => [:index, :new, :create,   :new_subcategory]
end
resources :products do
  member do
    put :move_up
    put :move_down
  end 
end
resources :faqs do
  collection { post :sort }
end 
root :to => 'sites#home'
match "/savesort" => 'sites#savesort'

end

match '', to: redirect("/#{I18n.default_locale}")
match '*path', to: redirect("/#{I18n.default_locale}/%{path}") 
```

但截至目前，它重定向到 /en/en/en/en/en/en/en/en/en/en/sites/admin （添加 en 直到浏览器抱怨）。

任何想法为什么它不断添加/ en？

**编辑：** 答案很好，谢谢。你能帮我诊断一下根路由吗？

```
root to: redirect("#{/#{I18n.default_locale}") # handles / 
```

我知道重定向正在寻找类似的东西

```
redirect("www.example.com") 
```

所以剩下这部分

```
#{/#{I18n.default_locale} 
```

#{ 使用的是 ruby​​s 字符串插值，对吧？我不确定那个 { 在做什么。

那么我们有

```
/#{I18n.default_locale} 
```

哪个也使用字符串插值并打印出 I18n.default_locale 的值？

希望这是有道理的，我真的很感激帮助，我学到了很多东西。

**编辑2：**

我改变了线路

```
root to: redirect("#{/#{I18n.default_locale}") # handles / 
```

到

```
root to: redirect("/#{I18n.default_locale}") # handles / 
```

但我不确定那是否正确。现在我得到了错误

```
uninitialized constant LocaleController 
```

我知道它从根目录获取错误：“locale#root”，但我认为语言环境# 将来自范围。

我会继续玩它，让你知道任何进展。

这是我的路线文件的新链接[https://gist.github.com/2332198](https://gist.github.com/2332198)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T17:25:10.720

我们又见面了，鲁沃恩。:)

我创建了一个测试 Rails 应用程序，以下最小示例适用于我：

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
  resources :sites do
    collection do
      get :admin
    end
  end

  root to: "locale#root" # handles /en/
  match "*path", to: "locale#not_found" # handles /en/fake/path/whatever
end

root to: redirect("/#{I18n.default_locale}") # handles /
match '*path', to: redirect("/#{I18n.default_locale}/%{path}") # handles /not-a-locale/anything 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T23:01:23.300

使用 Rails 4.0.x`%{path}`时，重定向中的路径会转义斜杠，因此您将获得一个无限循环重定向到`/en/en%2Fen%2Fen%2Fen...`

以防万一有人像我一样正在寻找适合 Rails-4 的解决方案，这就是我发现工作没有问题的方法，即使需要重定向更复杂的路径：

```
# Redirect root to /:locale if needed
root to: redirect("/#{I18n.locale}", status: 301)

# Match missing locale paths to /:locale/path
# handling additional formats and/or get params
match '*path', to: (redirect(status: 307) do |params,request|
  sub_params = request.params.except :path
  if sub_params.size > 0
    format = sub_params[:format]
    sub_params.except! :format
    if format.present?
      "/#{I18n.locale}/#{params[:path]}.#{format}?#{sub_params.to_query}"
    else
      "/#{I18n.locale}/#{params[:path]}?#{sub_params.to_query}"
    end
  else
    "/#{I18n.locale}/#{params[:path]}"
  end
end), via: :all

# Redirect to custom root if all previous matches fail
match '', to: redirect("/#{I18n.locale}", status: 301), via: :all 
```

# ruby-on-rails - 无法运行 gem 命令并使用 zlib 支持构建 ruby

> ID：10052159
> 
> 赞同：1
> 
> 时间：2012-04-07T05:51:09.043
> 
> 标签：ruby-on-rails, ruby, gem, rvm, zlib

我不知道安装 ruby​​ 这么痛苦 在使用 curl 证书遇到很多麻烦之后，我使用 rvm 站点中提到的方法安装了 rvm，还得到了 stackoverflow 问题的大量帮助。现在我正在尝试使用 gems 命令安装 rails

```
gem install rails 
```

但我总是收到这个错误

```
 ERROR:  Loading command: install (LoadError)
   cannot load such file -- zlib
   ERROR:  While executing gem ... (NameError)
   uninitialized constant Gem::Commands::InstallCommand 
```

我确实遵循了这里提到的每一件事[https://rvm.beginrescueend.com/packages/zlib/](https://rvm.beginrescueend.com/packages/zlib/) 以及stackoverflow帖子中提到的

我确实按照要求安装了所有工具

```
 yum install -y gcc-c++ patch readline readline-devel zlib zlib-devel libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison iconv-devel 
```

但我仍然收到此错误。当我查看 /usr/local/rvm/log/ruby-1.9.3-p125/configure.log 下的 ruby​​ 构建日志时，我看到了这个错误

```
 [2012-04-07 01:13:44]  ./configure --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-zlib --with-opt-dir=/usr/local/rvm/usr --with-libyaml
  configure: WARNING: unrecognized options: --with-zlib, --with-libyaml 
```

rvm坏了吗？或者在构建 ruby​​ src 时是否有问题。

注意：我正在运行 Fedora 14

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:11:14.063

RVM 导致的问题多于它解决的问题（恕我直言）。更好的工具是 ruby​​-build 和 rb-env。看起来也很不错的新工具是 ruby​​-install 和 chruby。

这是我最近安装的 Ruby 的 Red Hat Enterprise Linux (RHEL) 的笔记，我认为它与 Fedora 非常相似。也许这些笔记可以对你有所帮助。喜欢就问我问题。

## 安装 zlib

```
yum install zlib zlib-devel 
```

### 安装 YAML

```
export k=yaml v=0.1.4
wget http://pyyaml.org/download/libyaml/$k-$v.tar.gz
tar zxvf $k-$v.tar.gz
cd $k-$v 

./configure
make && make install 
```

## 如果您想要 X 或无头浏览进行测试，请安装 X11

```
yum install 
  xorg-x11-fonts-misc
  xorg-x11-fonts-truetype
  xorg-x11-server-Xorg
  xorg-x11-server-Xvfb 
```

## 安装库

```
yum install 
  gdbm gdbm-devel
  ncurses ncurses-devel
  openssl openssl-devel
  readline readline-devel
  tk tk-devel
  libjpeg libjpeg-devel
  libpng libpng-devel
  libxml2 libxml2-devel
  libxslt libxslt-devel
  zlib zlib-devel 
```

## 安装 ruby​​-build

```
cd /opt
git clone git://github.com/sstephenson/ruby-build.git
cd ruby-build/
./install.sh 
```

## 安装 Ruby

```
export k=ruby v=1.9.3-p125
wget http://ftp.ruby-lang.org/pub/ruby/1.9/$k-$v.tar.gz
tar zxvf $k-$v.tar.gz
cd $k-$v

# Either onfigure with defaults...
./configure 

# Or configure with custom locations...
./configure --prefix=/opt/$k/$v --enable-shared --with-opt-dir=/opt/yaml/current

make && make check && make install 
```

## 环境

编辑 /etc/environment 以添加：

```
RUBYOPT='-r rubygems -r psych' 
```

如果您将 Ruby 放在自定义目录中，请将其与现有路径合并：

```
PATH=/opt/ruby/1.9.3-p125/bin  (or wherever you put it) 
```

负载环境：

```
source /etc/environment 
```

验证 gem 运行，您会看到最初的一组 gem：

```
gem list 
```

宝石更新：

```
gem update --system 
```

# java - 在 Socket 中处理多个客户端

> ID：10052160
> 
> 赞同：0
> 
> 时间：2012-04-07T05:51:16.643
> 
> 标签：java, multithreading, sockets

我开发了一个 java swing 客户端-服务器应用程序。服务器有许多服务，如数据库服务、缓存服务和与客户端对话的客户端服务。

客户端服务在端口上打开一个套接字并侦听传入的连接。它为每个客户端连接生成一个新线程，创建一个会话并读取传入的序列化对象。它维持这个会话（使线程保持活动状态）直到客户端发出“CLOSE_SESSION”命令。

我想知道的是，为每个新的客户端套接字会话生成一个新线程是否正确。谢谢。

我的客户服务代码如下。

创建服务器套接字的代码：

```
 try {
                ServerSocket socket = new ServerSocket(serverPort);
                Socket listener = socket.accept();

                Thread client = new Thread(new ClientHandler(listener));
                client.start();

            } catch (IOException ex) {
                log.error(new Throwable(ex));
            } 
```

为每个客户端生成新线程的代码

```
class ClientHandler implements Runnable {

private static Logger log = Logger.getLogger(ClientHandler.class);

private Socket listener;

public ClientHandler(Socket listener) {
    this.listener = listener;
}

public void run() {
    try {
        ObjectInputStream inStream = new ObjectInputStream(
                listener.getInputStream());
        try {
            ServiceRequestResponse request = (ServiceRequestResponse) inStream
                    .readObject();
            if (request != null && request.getServiceCommand() != null) {

                ServiceCommand command = request.getServiceCommand();
                log.debug("command : " + command.getCommand());
                log.debug("is session alive? " + request.isAlive());
                log.debug("ServiceCommand.CREATE_SESSION : "
                        + ServiceCommand.CREATE_SESSION.getCommand());
                if (!request.isAlive()
                        && command.getCommand().equals(
                                ServiceCommand.CREATE_SESSION.getCommand())) {
                    // No session yet, and service command issued is login.
                    // Call login service, check credentials and create
                    // session.
                    request.setSessionId(UUID.randomUUID());
                    log.debug("Created user session with id : "
                            + request.getSessionId());
                } else {
                    if (command.getCommand().equals(
                            ServiceCommand.CLOSE_SESSION)) {
                        // Close session and do clean up here
                    }
                    // Here session is alive.
                    while (!ServiceCommand.CLOSE_SESSION.equals(command
                            .getCommand())) {
                        // Read the service command from the request
                        // response and
                        // Hand it over to the appropriate handler.
                    }

                }

            }

        } catch (ClassNotFoundException ex) {
            log.error(new Throwable(ex));
        }

    } catch (IOException ex) {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:55:08.397

如果您的客户端会话请求可以持续很长时间，那么每个连接的线程是一个很好的解决方案。

替代方案是：

*   使用蔚来；
*   如果客户端请求很短，则使用线程池。

# joomla - Joomla。文章在哪里输出？

> ID：10052163
> 
> 赞同：0
> 
> 时间：2012-04-07T05:53:01.073
> 
> 标签：joomla, joomla1.7

我是 Joomla 的新手，所以需要一些基本的帮助。我已经为 Joomla 1.7 编写了模板并以这种方式使用它：

模板有一个称为“主要”的位置。

我使用自定义 HTML 来构建页面结构，并使用 ModulesAnywhere 插件包含模块。现在我有一个模块，它列出了类别中的所有文章。当我单击链接时，我将重定向到 my_site/category/article_name。但是文章文本在哪里输出呢？

似乎它应该在位置上被输出。如果是这样，我怎么能在我的自定义 HTML 中动态添加这个标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:12:07.107

文章默认显示（或任何其他组件内容）此标记在模板中的位置：

```
<jdoc:include type="component" /> 
```

普通内容不需要像模块这样的位置。

# asp.net - CheckedChanged后Gridview不刷新？

> ID：10052164
> 
> 赞同：0
> 
> 时间：2012-04-07T05:53:18.110
> 
> 标签：asp.net, gridview

我有一个带有模板字段的网格视图。我在 templatefield 添加了一个复选框。复选框的自动回发是真的。

我在 Load-page 中填充网格并创建列 dynamic 。

```
 if (!IsPostBack)
        {
         FillGrid();
        } 
```

我使用更新面板

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
<SharePoint:SPGridView ID="grid" AllowSorting="true" AllowFiltering="true"    CssClass="ms-listviewtable"  
runat="server" AutoGenerateColumns="false">
<RowStyle CssClass="ms-alternating" Height="10px" />
<Columns>
    <asp:TemplateField> 
        <ItemTemplate  >
            <asp:CheckBox ID="select" runat="server" 
                OnCheckedChanged="select_CheckedChanged" AutoPostBack="true"  />
            <input id="Display" type="hidden" runat="server" />
            <input id="itemID" type="hidden" runat="server" />
            <asp:Image ID="icon" runat="server" Height="10px" Visible="false"  />
        </ItemTemplate>
        <ItemStyle Width="35px" />
    </asp:TemplateField>
    <asp:TemplateField >
     </asp:TemplateField>
</Columns>
</SharePoint:SPGridView>
 </ContentTemplate>
  <Triggers>
<asp:AsyncPostBackTrigger ControlID="select" EventName="OnCheckedChanged" />
 </Triggers>
 </asp:UpdatePanel> 
```

但显示错误：在 UpdatePanel“UpdatePanel1”中找不到触发器的 ID 为“select”的控件。

我的问题是：当复选框更改时，页面刷新

**我不想在检查更改后刷新页面！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:57:14.410

您必须在复选框中设置 autopostback="false" 或删除 autopostback 属性。自动回发实际上刷新页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:59:26.787

那么如果将复选框的 autopostback 属性设置为 false 会发生什么？

此外，如果您实际上希望处理复选框的 onchange 事件，则可以使用 UpdatePanel 包装网格；用户不会看到回发，但您仍然可以获得服务器端事件处理的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:59:44.503

首先你需要改变 Templetecolumn 如下

```
<asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="chkselect" runat="server" />
                <input id="Display" type="hidden" runat="server" />
                <input id="itemID" type="hidden" runat="server" />
                <asp:Image ID="imgicon" runat="server" Height="10px" Style="display: none;" ImageUrl="~/images/arrow_left.jpg" />
            </ItemTemplate>
            <ItemStyle Width="35px" />
        </asp:TemplateField> 
```

现在在服务器端代码中处理 itemdatabound 事件

```
Protected Sub SPGridView_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvBanner.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim chkselect As CheckBox = e.Row.FindControl("chkselect")
        Dim imgicon As Image = e.Row.FindControl("imgicon")
        If chkselect IsNot Nothing Then
            chkselect.Attributes.Add("onclick", "javascript:DoMyTask(this,'" + imgicon.ClientID + "')")
        End If
    End If
End Sub 
```

现在在 aspx 页面中指定 JavaScript 函数，如下所示。

```
<script type="text/javascript" language="javascript">
    function DoMyTask(obj, imgid) {            
        var objCheck = obj.checked;
        var objimg = document.getElementById(imgid)
        if (objCheck == true) {
            objimg.style.display = "block";
            //set more attributes over here
        }
        else {
            objimg.style.display = "none";
            //set more attributes over here
        }
        var count = $(":checkbox:checked").length;
        alert('you have selected ' + count + ' Rows');
    }

</script> 
```

希望这会帮助你......快乐的编码......

# c# - 正则表达式捕获由初始分隔符分隔的多个组

> ID：10052175
> 
> 赞同：3
> 
> 时间：2012-04-07T05:55:44.927
> 
> 标签：c#, .net, regex

我有一个这样的字符串：

```
|T1| This is some text for the first tag |T2| this is some text for the second tag 
```

我需要解析出标签和与每个标签相关联的文本。这些标签事先不知道，但它们由 . 分隔`\|\w+\|`。

我知道我可以在这里做一些事情来捕获组等等，但是在 powershell 中搞砸之后，我能想到的最好的方法是首先使用`\|\w+\|.*`ExplicitCapture 选项隔离每个配对，然后解析出标签和文本那里。

但这正在做双倍的工作，而且完全不是超酷的haxor。regex-pro 的方法是什么？

**编辑：**实际上我意识到已经很晚了，我误读了我的结果。以上实际上不起作用，所以现在我什至没有一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T06:30:48.523

```
\|(?<tag>\w+)\|(?<text>[^|]*) 
```

火柴`|T1| This is some text for the first tag |T2| this is some text for the second tag`

进入

```
 |T1| This is some text for the first tag 
 |T2| this is some text for the second tag 
```

**编辑**：使用正则表达式组获得部分匹配；

```
var tagName = match.Groups["tag"].Value;
var text = match.Groups["text"].Value; 
```

切换到命名组而不是编号

# prestashop - prestahop 中具有多种价格的产品

> ID：10052181
> 
> 赞同：0
> 
> 时间：2012-04-07T05:57:51.460
> 
> 标签：prestashop

有人可以指导我如何设置具有多种价格的产品。

例如：-

[http://www.madeleinemarket.com/epicerie-fine/caviar-saumon/caviar/caviar-baeri/6000-caviar-tradition-prunier.html](http://www.madeleinemarket.com/epicerie-fine/caviar-saumon/caviar/caviar-baeri/6000-caviar-tradition-prunier.html)

高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:32:12.470

您可以创建属性组。转到目录>属性和组。然后在属性组中添加属性。在您的情况下，您有属性组（体积）并将属性添加到 500 毫升、250 毫升等。当您这样做时，您会注意到您需要输入的“价格影响”部分。将信息添加到相关的降价多少到您在产品页面上键入的默认价格。例如，如果产品默认价格是 100ml 的 3.50，那么您可以输入 250ml 的产品价格影响增加 4.00 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:30:09.103

看看产品组合。组合可以有不同的价格和属性[http://doc.prestashop.com/display/PS14/Adding+Products+and+Product+Categories](http://doc.prestashop.com/display/PS14/Adding+Products+and+Product+Categories)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T06:35:35.947

**您只能通过价格选项卡为您的产品设置一个价格**- 假设您选择 15 毫升大小的价格，即 8.00 美元。这是在特色产品列表、类别页面中列出的产品等中显示的价格。

当您编辑 30 毫升大小的组合时，您需要提供的影响是对单个产品价格的影响。30 毫升的价格为 13.50 美元，“标准”价格为 8.00 美元，因此输入的影响为增加了 5.50 美元。

同样，对于 50 毫升组合，影响需要增加 10.00 美元才能达到 18.00 美元的期望价格。

通过： http: [//www.prestashop.com/forums/topic/272014-same-product-different-attributes-different-prices/](http://www.prestashop.com/forums/topic/272014-same-product-different-attributes-different-prices/)

使用官方论坛有很多这样的信息。

# optimization - 从标准输入读取一大块 - 想要更快

> ID：10052182
> 
> 赞同：1
> 
> 时间：2012-04-07T05:58:10.130
> 
> 标签：optimization, python-2.7, stdin

我已经对此进行了研究，除了我正在使用的解决方案之外，没有看到任何解决方案——但它们都已经很老了。

在 Python 2.7 中，我正在尝试优化一些代码以进行编程测试。必须从标准输入中读取 10**18 个用空格分隔的数字（根本没有换行符）。

```
numbers = [int(x) for x in sys.stdin.read().strip().split(' ')] 
```

对于测试运行，整个运行需要 1.3 秒，其中 1.2 秒用于读取，因此这是唯一需要优化的地方。

有什么建议么？

# php - 从PHP中的字符串获取html图像标签

> ID：10052184
> 
> 赞同：1
> 
> 时间：2012-04-07T05:58:28.130
> 
> 标签：php, regex, preg-match

我正在尝试从给定的字符串中获取 HTML 图像标记 url。我使用的 PHP 方法`preg_match("/src=\"([^\s\"]+)/",$body,$matches);`在大多数情况下都可以正常工作，但是我无法从以下链接获取 url...

```
src=http://4.bp.blogspot.com/-LqmY1y4DCO0/T39EoCmzfoI/AAAAAAAACp0/TRKmdPmhJ90/s640/how+to+make+cheesecake+carrots,+orange+cheesecake+recipe,+recipes,+Easter+dessert+.jpg 
```

谁能解释一下这个失败的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:35:04.073

用这个正则表达式试试:)

```
preg_match_all("/src=([^\\s]+)/", $body, $m);
print_r($a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:18:41.917

您的测试字符串在 src= 之后没有 " 字符，并且您的正则表达式需要它，因此它不匹配。如果您想测试您的正则表达式，我建议您使用程序 RegexCoach，它会突出显示匹配项并允许您逐步完成匹配过程，所以你可以很容易地看到它失败的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:31:00.710

用 DOM 加载？

```
$dom = new DOMDocument();
$dom->loadHTML($var);

$xpath = new DOMXPath($dom);
$img = $xpath->query('//img[@src]');

if(count($img)>0)
{
    foreach($img as $i)
        echo $i->getAttribute('src');
} 
```

# php - 网站上的第一页请求非常慢

> ID：10052186
> 
> 赞同：2
> 
> 时间：2012-04-07T05:58:43.113
> 
> 标签：php

我在超过 20 分钟未访问后从我的网站加载的第一页非常慢。随后的页面加载速度提高了 10-20 倍。这种症状的常见原因是什么？当我的服务器没有接收到 http 请求时，它会不会处于睡眠状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:39:10.373

我一般会回答这个问题，因为我确信这会让很多新手感到困惑。

*真正*简短的答案是：[缓存](http://en.wikipedia.org/wiki/Cache_%28computing%29)。

几乎您计算机中的每个程序都使用某种形式的缓存来记住最近已经加载/处理的数据，因此它不必再次进行这项工作。

缓存的大小总是有限的，所以必须扔掉东西。99% 的情况下，过期缓存条目的主要标准是，这最后一次使用是多久以前的？

*   您的操作系统缓存从磁盘读取的文件数据
*   PHP 缓存页面并将它们编译在内存中
*   CPU 将内存缓存在它自己的特殊更快的内存中（尽管这对大多数用户来说可能不太明显）

有些东西实际上不是缓存，其工作方式与缓存相同：

*   [虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)又名[交换](http://en.wikipedia.org/wiki/Swap_space)。当某些程序没有足够的内存可用时，操作系统必须通过将内存块移动到磁盘上来为它们腾出空间。在更新的操作系统上，操作系统会这样做只是为了让磁盘缓存更大。
*   一些 Web 服务器喜欢运行自己的多个副本，并在它们之间分担请求的工作量。副本也单独缓存内容，具体取决于设置。当工作负载足够低时，服务器可以终止其中一些进程以释放内存并对计算机的其余部分友好。稍后，如果工作量增加，则必须启动新进程，并在其内存中加载各种数据。

（注意，上面的维基百科链接包含很多细节。我不希望每个人都阅读它们，但如果你真的想了解更多，它们就在那里）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T06:12:19.690

应该是没睡吧 它只是暂时没有访问并释放它的资源。重新开始需要时间。

如果许多用户经常访问该站点，则它应该每次都快速响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:01:36.270

听起来它可能正在缓存。服务器是否与您的浏览器在同一台机器上运行？如果不是，网络配置是什么（相同的 LAN 等）？

# javascript - 为什么这个简单的 javascript 代码不起作用

> ID：10052193
> 
> 赞同：1
> 
> 时间：2012-04-07T05:59:49.850
> 
> 标签：javascript

我有以下代码：

```
function show(){
    var a=document.getElementById('somediv').style.display;
    a="block";
} 
```

上面的代码不起作用，如果我们使用它就可以了

```
 {
     var a=document.getElementById('somediv');
     a.style.display="block";
 } 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T06:11:29.800

要理解这一点，您需要了解一点关于 javascript 分配的知识。

当您使用 = 运算符时，javascript 中有两种类型的赋值：按值赋值和按引用赋值。虽然某些语言让您可以选择在任何给定时间使用哪种类型的作业，但 javascript 并没有给您选择。它对何时使用每个规则都有一套严格的规则。

“按值赋值”意味着将特定值（如数字`3`或字符串`"none"`）分配给另一个变量。

“通过引用赋值”意味着指向另一个变量的指针被放置到您的新变量中，并且对该对象内容的任何编辑都将反映在这两个位置。

对于字符串、数字和布尔值等简单类型，javascript 总是使用按值赋值。对于像数组和对象这样的类型，javascript 总是通过引用进行赋值。这意味着当你这样做时：

```
var a=document.getElementById('somediv').style.display; 
```

由于`display`属性中的值是一个字符串，javascript 将使用按值赋值，并将`display`属性中字符串的值复制到`a`变量中。一旦制作了这个副本，该变量就与该属性`a`没有任何关系。`display`您可以完全独立地更改`display`属性，`a`因为它们每个都有自己的字符串副本。

所以，当你这样做时：

```
a="block"; 
```

您只是为变量分配了一个新字符串，因为它与先前的属性`a`无关。`display`

* * *

另一方面，当你这样做时：

```
var a=document.getElementById('somediv'); 
```

您将一个对象分配给`a`. 而且，javascript 总是通过引用分配对象。这意味着它`a`有一个指向`somediv`对象的指针。没有副本，它们都指向完全相同的对象。因此，您对任一引用所做的任何更改实际上都会更改同一个对象。所以，当你这样做时：

```
 a.style.display="block"; 
```

您正在更改实际的 DOM 对象。

* * *

我记得的规则是数字、字符串和布尔值等简单类型在分配时会被复制（按值分配）。像数组和对象这样的复杂类型不会被复制，只有指向原始对象的指针被放入新变量（通过引用分配），因此它们都指向完全相同的对象。

按值赋值非常简单。通过引用分配可能既强大又偶尔令人困惑，从而导致软件中的错误无法预料到真正引用原始文件的后果。因此，如果您想要一个对象的实际副本，则必须显式地制作该对象的副本，因为赋值不会为您做到这一点。另一方面，只要您了解它的工作原理，拥有可以传递的复杂对象的引用会非常有用。在 javascript 中，无法获取对数字、字符串或布尔值等简单类型的引用。它可以放入一个对象（作为一个属性），然后您可以传递对该对象的引用，但不能传递对简单类型的引用。

* * *

这里有一些例子：

```
// define person
var person = {height: 66, hair: "blonde"};

// assign the person object to bob
// because person is an object, the assignment is by reference
var bob = person;

// change bob's hair
bob.hair = "red";

// because assignment was by reference, person and bob are the same
// object so changing one changes the one original
alert(person.hair);    // red 
```

* * *

```
// define person
var person = {height: 66, hair: "blonde"};

// assign the person's height to a variable
// because height is a number, the assignment is by value (e.g. it's copied)
var myHeight = person.height;

// change both heights
myHeight = 72;
person.height = 60;

// because assignment was by value, myHeight and person.height are 
// completely separate copies so changing one does not affect the other
alert(myHeight);         // 72
alert(person.height);    // 60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:02:05.937

是`=`赋值运算符。您正在将某些内容放入变量中。在第一种情况下，您设置`a`为 的值`display`。这是一个等于`block`或`none`等的字符串。

在第二种情况下，您设置`a`为 object `somediv`。然后在其上设置显示属性。

第一种情况不起作用，因为您的代码说：设置字符串的显示属性。字符串没有显示属性，因此失败。这就像在说：

```
'foobar'.style.display = 'none' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:16:36.710

你写错了函数的拼写。根据您的代码`document.getElementById('somediv').style.display`返回 div 的当前显示状态，因此设置显示块会出错。

您将像这样直接设置 div 显示属性

```
function show(){
    var a=document.getElementById('somediv').style.display="block";
} 
```

# c# - RegisterHotkey Fn 修改器？

> ID：10052194
> 
> 赞同：4
> 
> 时间：2012-04-07T06:00:01.697
> 
> 标签：c#, winapi, keyboard-shortcuts, pinvoke, hotkeys

我知道您可以对 RegisterHotKey 使用`CTRL`, `ALT`,`SHIFT`等修饰符，但是`Fn`键呢？

我曾经在我的笔记本电脑上有一些过时的软件，当按下 Fn+Up/Down 时会改变亮度。我删除了所有的臃肿软件，我想编写一个做同样事情的程序。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T06:24:52.800

`Fn`key是修饰符，而不是操作系统处理的软件，如`ALT`，`SHIFT`等。`Fn`是硬件键修饰符，因此它会更改键盘发送到操作系统的键码。

例如`←`37 和`Fn`+`←`是 36 所以当你需要处理`Fn`+`←`按下时，你需要对 36 键码做出反应。

**PS。**在某些键盘上，Fn 键发送键码以便可以单独处理，但通常不会。

# javascript - javascript，使用for循环的选择选项，返回选定的值

> ID：10052198
> 
> 赞同：0
> 
> 时间：2012-04-07T06:00:42.030
> 
> 标签：javascript

我对javascript很陌生，所以请多多包涵。我正在尝试创建一个从 1 到 100 的年龄选择下拉列表，默认显示选项 20。我还需要获取用户选择的返回值，以便我可以用来计算年份。这是到目前为止我正在玩的代码。

```
 function createAgeList()
    {
        var myAgeOptions;

        for (cntr=1; cntr<100; cntr++)
        {
           myAgeOptions = myAgeOptions + "<option value=" + cntr + ">" + cntr + "</option>";
        }

        var myAgeSelect = document.getElementById('agelist');
        myAgeSelect.innerHTML = myAgeOptions;
    } 
```

```
HTML code:
<form name="yearsleptform" id="yearsleptform" method="post">
  <select size="1" id="agelist" name="agelist">
  </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:06:00.797

```
document.yearsleptform.agelist.value 
```

这将返回他们选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:11:40.847

要设置默认选项：

```
function createAgeList()
    {
        var myAgeOptions;

        for (cntr=1; cntr<100; cntr++)
        {
           myAgeOptions = myAgeOptions + "<option value=" + cntr + " "+(cntr===20?"selected=selected":"")+ ">" + cntr + "</option>";
        }

        var myAgeSelect = document.getElementById('agelist'); 
```

[现场演示](http://jsfiddle.net/7QjgN/)

```
 myAgeSelect.innerHTML = myAgeOptions;
    } 
```

获取选定的值：

```
document.yearsleptform.agelist.value 
```

**[现场演示](http://jsfiddle.net/7QjgN/)**

# sql - Delphi XE中TClientDataSet（CDS文件）的SQL查询？

> ID：10052199
> 
> 赞同：5
> 
> 时间：2012-04-07T06:00:46.257
> 
> 标签：sql, delphi, delphi-xe

我在 Delphi XE 中将 2.8 MB XML 文件转换为 ClientDataSet。XML 文件更改非常频繁，我基本上是在每次 XML 更改时以编程方式构建一个新的 CDS 文件。变化的不仅仅是内容，还有实际的结构。

问题是：是否可以在 ClientDataSet1 上使用简单的 SQL 在内存中创建第二个带有结果表的 ClientDataSet？如果答案是肯定的，那么基本机制是什么？目前我只使用 TClientDataSet 和 TDataSource 使数据库可用于数据感知组件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T10:18:44.740

不，您不能在[`TClientDataSet`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TClientDataSet)when 用作内存数据集时运行 SQL 语句，因为没有关联的 SQL 提供程序。您最好的选择是使用 TClientDataSet 中包含的过滤功能。为此，您可以使用`Ranges`or`Filters`然后将结果克隆到辅助 TClientDataSet 中。有关过滤的更多详细信息，请尝试这篇文章[`Filtering ClientDataSets`](http://edn.embarcadero.com/article/29271)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T02:05:30.440

TxQuery 可以做你想做的事。它是一个 TDataSet 后代组件，可用于使用 SQL 语句查询一个或多个 TDataSet 后代组件。可在[http://code.google.com/p/txquery/ 获得](http://code.google.com/p/txquery/)

# mysql - 用户“root”的访问被拒绝

> ID：10052201
> 
> 赞同：1
> 
> 时间：2012-04-07T06:01:00.353
> 
> 标签：mysql, wamp, mysql-error-1064

我下载了一个 adobe flex mysql 脚本（来自我正在学习的教程）并在我的 sql 5.5 中运行该脚本。它创建了一个数据库，但它存储在我的 wamp 文件夹中：

C:\wamp\bin\mysql\mysql5.1.36\data

我有一个测试 php 页面，它应该打印出数据库中的数据（来自 adobe 教程）。

但是，当我从 localhost/test.php 加载测试页面时，它只是说：

```
Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'root'@'localhost' (using password: YES) in C:\wamp\www\test.php on line 7
Error connecting to MySQL 
```

如果我从 localhost:3306/test.php 运行它，我得到的只是胡言乱语：

```
B???
5.1.36-community-log????nKm`zell?ÿ÷??????????????Z\Ap3JZcfVZD???ÿ„Got packets out of order 
```

我使用什么密码——我的 wamp 密码/登录名，还是新的 mysql5.5 根密码？我试过mysql5.5的root和密码，还是连接不上。

为什么 mysql5.5 在我的旧 WAMP sql 数据文件夹下加载数据库？与 WAMP 一起安装 MySQL5.1 和我刚刚单独安装的 MySQL5.5 是否存在冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:01.220

在这个问题上浪费了一天的大部分时间之后，结果我所要做的就是提供非本地主机名。我不知道为什么（允许用户从任何主机连接），但它有效！

```
root@base:~# mysql -u username -h hostname -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g. 
```

在 PHP 中：

```
Test 1807:
<?php
$username = "username";
$password = "password";
$hostname = "actualhostnamenotlocalhost"; 

$con = mysqli_connect($hostname, $username, $password);

// Check connection
if (mysqli_connect_errno($con)){
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

mysqli_close($con);    

?>
OK. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:10:58.833

请在 phpMyAdmin 或 my sql work bench 的帮助下验证您是否使用了正确的密码

如果这是全新安装，那么您将没有任何 root 密码

您需要设置密码并使用设置的密码开始连接到数据库

此外，如果您能够在不指定密码的情况下运行脚本，这意味着没有为数据库设置密码

您可以将“使用密码”开关设置为 NO 并使用 root 连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:00:04.403

我花了几乎一整天的时间来解决这个问题，所以如果这对任何人有帮助，我可以使用以下代码解决它：

```
// - Get Connection - //

$this->dbCon = mysqli_connect($this->dbHost,$this->dbUser) or 
    die("Connection failed:<br/>" . mysqli_connect_error());

// - Select Database - //

mysqli_select_db($this->dbCon,$this->dbName) or
    die("Selection failed: <br/>" .   mysqli_connect_error());

-and also by setting

  $cfg['Servers'][$i]['AllowNoPassword'] = true - in the config.inc.php file. 
```

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T06:47:02.277

更新我的 phpmyadmin 版本后出现同样的问题，结果是配置问题：

step 1) 打开对应的phpmyadmin安装目录，将**config.sample.inc.php**复制到 同一目录下的**config.inc.php 。**

步骤 2) 打开 config.inc.php

改变

```
$cfg['Servers'][$i]['AllowNoPassword'] = **false**; 
```

至

```
$cfg['Servers'][$i]['AllowNoPassword'] = **true**; 
```

并保存文件。

# c++ - 存储在数组中的垃圾字符

> ID：10052208
> 
> 赞同：0
> 
> 时间：2012-04-07T06:02:11.250
> 
> 标签：c++

我正在尝试将数据从从主发送到本地函数中的另一个字符数组中复制，即使我`'\0'`在字符串末尾添加了垃圾字符，我也总是看到垃圾字符。

这是我的部分代码。

```
for (int i = 0; i < strlen(main) ; i++){
    if (main[i] != ';'){
        local[i] = main[i];  // Copy the characters until `;` isn't found
    } else {
        local[i] = '\0' ;   // If `;` found, null terminate the copied destination.
        break;
    }
} 
```

所以基本上是从 main 发送的数据，例如这样

`look;can;you;see;me`

```
My Local-----> 'look??y??>c?Lw?T?w??>c?2+a?'
Actual data in main---> 'look' 
```

正如您从上面的示例中看到的那样，我试图只获取第一个单词，但我总是得到垃圾，我不知道为什么？

**编辑**：

这几乎是 100% 确定导致我出现问题的全部功能。

```
void myFunction(char main[ ]){

   for (int i = 0; i < strlen(main) ; i++){
    if (main[i] != ';'){
        local[i] = main[i];  // Copy the characters until `;` isn't found
    } else {
        local[i] = '\0' ;   // If `;` found, null terminate the copied destination.
        break;
    }
}

        if(main[i] != '\0'){

            int col = 0, row = 0;

            do {
                if(main[i] == ';' || main[i] == '\0') {
                    sending[row++][col] = '\0';
                    col = 0;
                } else {
                    sending[row][col++] = main[i];
                }
            } while(main[i++] != '\0');

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T06:21:13.573

如果 ; 你忘记了处理零终止字符串 没有*找到*。一个简单的解决方法是调整你的 for 循环，这样它也能在 main 中看到 \0：

```
for (int i = 0; i <= strlen(main); i++) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:03:04.210

标准库会为您处理这个问题。使用`strchr`和`strncpy`：

```
size_t length = std::strlen(main);
const char* current_pos = main;
for (int i = 0; ; ++i) {
    size_t chars_remaining = length - std::distance(main, current_pos);
    const char* end_of_field = std::strchr(current_pos, ';');
    if (end_of_field == NULL) {
        std::strncpy(local[i], current_pos, chars_remaining + 1);
        // we're at the end of the input
        break;
    }
    else {
        size_t field_length = std::distance(current_pos, end_of_field);
        std::strncpy(local[i], current_pos, field_length);

        // don't forget to NUL-terminate the string
        local[i][field_length] = '\0';

        // go to next character for the next iteration through loop
        current_pos = end_of_field + 1;
    }
} 
```

就个人而言，我更喜欢`std::find`and `std::copy`(from `<algorithm>`)：

```
size_t length = std::strlen(main);
const char* current_pos = main;
for (int i = 0; ; ++i) {
    size_t chars_remaining = length - std::distance(main, current_pos);
    const char* end_of_field = std::find(current_pos, current_pos + chars_remaining, ';');
    char* output_end = std::copy(current_pos, end_of_field, local[i]);

    // don't forget to NUL-terminate the string
    *output_end = '\0';

    // if we're at the end of main, then we're done;
    // we're at the end if we're on a NUL character
    if (*end_of_field == '\0')
        break;

    // go to next character for the next iteration through loop
    current_pos = end_of_field + 1;
} 
```

这不是我写过的最漂亮的代码，但这主要是由于使用了 C 风格的字符串和指针算法，考虑到原始问题，这看起来是无法避免的。此外，我还没有对溢出进行必要的检查。这样做很容易，但使用起来更容易，`std::vector<std::string>`并且让标准库为您担心。

# javascript - 按钮列表上的 onclick 事件无法使用 JQuery

> ID：10052211
> 
> 赞同：0
> 
> 时间：2012-04-07T06:04:46.947
> 
> 标签：javascript, jquery, html, onclick, html-lists

我正在尝试在列表内的按钮上添加事件，但似乎只有列表上的第一个按钮正在注册 onclick 事件。没有显示错误，但我不明白为什么只有按钮的第一部分正在注册事件？这里是：

```
<ul id = "button-list"> 
    <li>
        <button class = "buttons" id = "first"  name = "ltrContainer"   ></button>
    </li>
    <li>
        <button class = "buttons" id = "second" name = "ltrContainer"  ></button>
    </li>
    <li>
        <button class = "buttons" id = "third"  name = "ltrContainer"   ></button>
    </li>
    <li>
        <button class = "buttons" id = "fourth" name = "ltrContainer"  ></button>
    </li>
    <li>
        <button class = "buttons" id = "fifth" name = "ltrContainer"  ></button>
    </li>
    <li>
        <button class = "buttons" id = "sixth" name = "ltrContainer"   ></button>
    </li>
</ul> 
```

只有第一个按钮正在注册一个事件，这是我的 JQuery 代码

```
$('.buttons').click(function(){
    textContainer.value += this.innerHTML;
    alert(this.innerHTML);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:22:29.173

```
 $(function(){
    $('.buttons"').click(function(){
            var myValue = $(this).html();
            alert(myValue); 
        });
      });
 }); 
```

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T06:30:21.617

它们在按钮的内部 html 中没有价值。您将在按钮中写入任何值。我已经修改了你的代码检查它

```
<ul id = "button-list"> 
    <li>
        <button class = "buttons" id = "first"  name = "ltrContainer"   >1</button>
    </li>
    <li>
        <button class = "buttons" id = "second" name = "ltrContainer"  >2</button>
    </li>
    <li>
        <button class = "buttons" id = "third"  name = "ltrContainer"   >3</button>
    </li>
    <li>
        <button class = "buttons" id = "fourth" name = "ltrContainer"  >4</button>
    </li>
    <li>
        <button class = "buttons" id = "fifth" name = "ltrContainer"  >5</button>
    </li>
    <li>
        <button class = "buttons" id = "sixth" name = "ltrContainer"   >6</button>
    </li>
</ul>

$(document).ready(function()
{   
    $('.buttons').click(function(){
    document.getElementById('textContainer').value += this.innerHTML;
    alert(this.innerHTML);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:33:55.957

```
$("#button-list .buttons").each(function () {
            $(this).bind("click", function() {
                //Put your code here
            });
}); 
```

希望这可以帮助...

# java - Android ArrayList，意外停止

> ID：10052214
> 
> 赞同：2
> 
> 时间：2012-04-07T06:05:07.543
> 
> 标签：java, android, arraylist

我是一名新手程序员，我正在尝试使用 Eclipse 学习 Android 编码。这是我第一次使用 StackOverflow。

仅出于教程目的，我想做一个简单的动物百科全书。

所以在我的 Home 类中，有一些按钮：“Dog”、“Cat”、“Bird”等。当我单击按钮时，它会将我带到**相同的布局**，但当然会有不同的内容。

*   所以我创建了一个名为 AnimalData 的类，它包含 `ArrayList<Integer>`要存储`R.drawable.xxx`和`ArrayList<String>` 存储我将放在图片下方的文本（如“Bulldog”或“Husky”）

*   然后我创建了一个名为 ChangeContent 的类来将所有这些可绘制对象和文本设置为 XML

*   但是每当我单击该按钮时，都会导致意外停止错误

以下是缩短的 Home 课程，**“崩溃制造者”不在这里**。我已经使用检查了每行的整个代码行`Thread.sleep(2000)`，所以如果我的应用程序在 2 秒之前崩溃，则错误出现在 sleep() 代码之前，反之亦然。

```
public class Home extends Activity implements OnClickListener{
    Button dog, cat, bird;
    AnimalData ad;
    ChangeContent cc;

    private ArrayList<Integer> drawable;
    private ArrayList<String> title;

public Home(){
    ad = new AnimalData();
    cc = new ChangeContent(ad);
    drawable = new ArrayList<Integer>();
    title = new ArrayList<String>()
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    //set the findViewById for all the buttons
    //set onClickListener() to all the buttons
}

public void onClick(View v) {
    switch (v.getId()){
    case R.id.bDog:
        drawable.add(R.drawable.xxx);
        drawable.add(R.drawable.yyy);
        title.add("Bulldog");
        title.add("Husky");
        break;
    case R.id.Cat:
        //same
        break;
    case R.id.bBird:
        //same
        break;
    }
    ad.setDrawable(drawable);
    ad.setTitle(title);
    Intent i = new Intent("animal.ChangeContent"); //from Manifest
    startActivity(i);
}
} 
```

AnimalData 只是一个典型的 getter setter，所以我将**跳过**它的代码

错误就在 ChangeContent 启动之后，因为即使我将 sleep() 放在构造函数的第一行，它也没有任何效果。

```
public class ChangeContent extends Activity {

    TextView title1, title2;
    ImageView pic1, pic2;
    private ArrayList<Integer> drawable;
    private ArrayList<String> title;

public ChangeContent(AnimalData data){
    drawable = new ArrayList<Integer>();
    title = new ArrayList<String>();
    drawable = data.getDrawable();
    title = data.getTitle();
}
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.animal_info);

    //findViewById for the TextView and ImageView
    //setText() for TextView and setImageResource() for ImageView
}
} 
```

对不起，这个问题很长，我尽量让它尽可能短，你们能帮我找出错误吗？之前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:21:10.373

您正在尝试从意图中获取 arraylist，而您没有放置 putStringArrayList 和 putIntegerArrayList 方法。

```
putIntegerArrayListExtra(String name, ArrayList<Integer> value)

putStringArrayListExtra(String name, ArrayList<String> value) 
```

所以将调用活动更改为以下：

```
Intent i = new Intent(Home.this, ChangeContent.class); //from Manifest
i.putIntegerArrayListExtra("drawables", drawable);
i.putStringArrayListExtra("titles", titles);
startActivity(i); 
```

并通过以下方法从 onCreate 方法中的意图获取数据：getIntegerArrayListExtra 和 getStringArrayListExtra

您还可以通过将 contentChanged 方法设置为静态来执行以下操作，这样您就不需要对应用程序代码进行太多更改，只需执行以下操作：

```
public class ChangeContent extends Activity {

    TextView title1, title2;
    ImageView pic1, pic2;
    private static ArrayList<Integer> drawable;
    private static ArrayList<String> title;

public static ChangeContent(AnimalData data){
    drawable = new ArrayList<Integer>();
    title = new ArrayList<String>();
    drawable = data.getDrawable();
    title = data.getTitle();
}
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.animal_info);

    //findViewById for the TextView and ImageView
    //setText() for TextView and setImageResource() for ImageView
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:19:06.290

请在此处查看 RajaReddy P 的答案：

[https://stackoverflow.com/a/9937854](https://stackoverflow.com/a/9937854)

在发送类中使用：

```
Intent intent = new Intent(PhotoActivity.this,PhotoActivity1.class ); 
intent.putIntegerArrayListExtra("VALUES", image);               
startActivity(cameraIntent); 
```

..并在接收器类中使用：

```
Intent i = getIntent();
ArrayList<Integer> img = i.getIntegerArrayListExtra("VALUES"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:25:27.813

你的方法是错误的-

```
public Home(){
ad = new AnimalData();
cc = new ChangeContent(ad);
drawable = new ArrayList<Integer>();
title = new ArrayList<String>() 
```

}

ChangeContent 是一个 Activity 类，所以你不要像这样传递参数。

传递类应该是可序列化的并使用它 -

```
startActivity(new Intent(this, ChangeContent.class)
             .putExtra("key", ad); 
```

并在您的 ChangeContent 类中从 Intent 中提取类

因此，更改您的代码设计并继续。祝你好运。

# html - 制作 HTML5 AssetLoader，浏览器总是缓存图片吗？

> ID：10052219
> 
> 赞同：3
> 
> 时间：2012-04-07T06:06:06.327
> 
> 标签：html, caching, assets

我正在为 HTML5 中的简单面向对象游戏引擎构建资产加载器。现在我知道制作资产加载器的两种方法（总结如下），我更喜欢第二种方法。我的问题是，第二种方式是否保证始终适用于所有浏览器？

为了清楚起见：

*   相关类的名称是 AssetLoader，
*   加载所有资产的方法称为 loadAssets()，
*   主要课程是游戏，
*   主游戏循环是runGameloop()。

# 方法一

创建一个将在整个游戏中持续存在的 AssetLoader 实例。当在游戏开始时调用 loadAssets() 时，它将创建一个字典，该字典将在游戏期间保存所有资产的键/值对。

当 sprite 需要图像时，它将使用给定名称（例如“Archer”）查询 AssetLoader，并且实例将返回适当的图像供 sprite 使用。

# 方法二

创建一个*不会*在整个游戏中持续存在的 AssetLoader 实例（它将被调用一次并且不会分配给任何实例变量）。

实例的职责是向服务器查询每个资产，这将导致浏览器缓存资产；很像：

```
function AssetLoader()
{

    ...

    self.loadAssets = function(runGameloop)
    {
        self.tempImage = new Image();

        $(self.tempImage).load(function()
        {
            self.assetsLoadedSoFar += 1;
            if(self.assetsLoadedSoFar === self.totalAssets)
            {
                self.runGameloop();
            }
        });

        self.tempImage.src = "assets/sprites/archer/archerSpriteSheet.png";
    }

    ...

} 
```

现在，当一个精灵需要一张图片时，该图片现在应该被缓存在浏览器中，它只是用一个新的 Image() 对象加载它，而无需通过 AssetLoader。

**为什么我更喜欢方法 2**
1.) 我想避免向引擎引入不必要的抽象层，我不想每次加载资产时都必须通过 AssetLoader。
2.) 如果我在游戏中有很多资产，我不希望它们全部同时加载到 AssetLoader 的单个实例中。也许有人可以纠正我，但一次加载所有这些资源不会不必要地给游戏带来压力吗？

所以现在我在[这里](http://www.scs.ryerson.ca/~aalksne/valGame/)有一个方法 2 的工作版本，并且对它非常满意，但我需要知道的是：**“浏览器是否保证总是使用方法 2 缓存给定的图像？”** 或者那是我不能依赖的东西？是否有某些配置可能会关闭自动缓存？（这甚至可能吗？）。您还有其他您认为更好的方法吗？非常感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:30:49.490

我认为您不能依赖浏览器缓存。可以禁用自动缓存，我想人们这样做是相当普遍的。

我过去正是这样做的，原因有两个：

1.  家庭共享计算机上的磁盘空间不足（多个单独的帐户）
2.  开发时，为了保证最新的改动在页面刷新时始终可见

此外，在 Chrome / Firefox 的隐身 / 私人浏览模式下禁用缓存。

# django - 使用 URLField 优于 TextField 的优势？

> ID：10052220
> 
> 赞同：47
> 
> 时间：2012-04-07T06:06:37.680
> 
> 标签：django, performance, postgresql, url, django-models

据我了解，当您使用 PostgreSQL 数据库时，您应该始终将 a用于可变长度字符串，因为 a和 a`TextField`之间的速度差异在PostgreSQL 中可以忽略不计。我对 Django 比较陌生，并且正在考虑在我的数据库中使用可变长度 url。我想知道使用它是否有任何优势？使用 a而不是 a for url会被认为是不好的形式吗？`TextField``CharField``TextField``URLField``TextField``URLField`

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-07T06:20:42.563

URLField 实际上是 CharField，支持基于 Regexp 的 URL 模式检查和在线验证器（已被基于 RegEx 的验证器取代），如果您不关心 URL 的长度限制，则可以使用 TextField

```
from django.core.validators import URLValidator

# in model
field = models.TextField(validators=[URLValidator()]) 
```

此外，使用 CharField 或 TextField 取决于您是否要对字段进行最大长度约束，以及哪种元素类型更适合编辑：textarea 或 input。在 PostgreSQL 方面，没有显着差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T04:40:31.013

试试这个类：

```
class LongURLField(TextField):
    description = 'Long URL'

    def __init__(self, verbose_name=None, name=None, **kwargs):
        TextField.__init__(self, verbose_name, name, **kwargs)
        self.validators.append(validators.URLValidator())

    def formfield(self, **kwargs):
        # As with TextField, this will cause URL validation to be performed
        # twice.
        defaults = {
            'form_class': forms.URLField,
        }
        defaults.update(kwargs)
        return super(LongURLField, self).formfield(**defaults) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T06:39:25.863

[https://docs.djangoproject.com/en/dev/ref/models/fields/#urlfield](https://docs.djangoproject.com/en/dev/ref/models/fields/#urlfield) 当然，您可以使用 CharField/TextField 但处理用户输入并确保用户输入的内容取决于您。

从源代码：

> # 与 CharField 一样，这将导致执行 URL 验证

如果您查看[URLField 源代码](https://github.com/django/django/blob/916e38802f151b34aaca487dc7e928946e81be73/django/db/models/fields/__init__.py#L2288-L2289)，您会发现它实际上是一个带有 URL 验证器的 CharField。

还有其他现成可用的字段，例如 EmailField、ImageField、*Field！

# php - 如何为 preg_match() 更改此正则表达式

> ID：10052221
> 
> 赞同：0
> 
> 时间：2012-04-07T06:06:39.517
> 
> 标签：php

我正在执行以下正则表达式

```
$patt="(BEGIN:|END:)[[:blank:]]*([0-9a-zA-Z\_]+)[[:blank:]]*-->(.*)"
if (preg_match($patt,$v,$res)) 
```

它给出了以下错误

```
Warning: preg_match() [function.preg-match]: Unknown modifier '[' 
```

它工作正常

```
if (eregi($patt,$v,$res)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:14:41.600

您需要添加正则表达式分隔符，例如：

`if (preg_match('#'.$patt.'#',$v,$res))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:14:51.423

`preg_*`函数族要求您将模式编写为`/pattern/`，其中`/`可以是任何其他“非字母数字、非反斜杠、非空白”字符，例如`#pattern#`或`!pattern!`。

[http://us.php.net/manual/en/regexp.reference.delimiters.php](http://us.php.net/manual/en/regexp.reference.delimiters.php)

# mips - MIPS，递归

> ID：10052223
> 
> 赞同：1
> 
> 时间：2012-04-07T06:06:53.593
> 
> 标签：mips

我试图编写一个 MIPS 程序，它获取一个无符号整数作为参数，并递归地返回整数中所有十进制数字的总和。例如，如果参数为 75080，则返回的总和为 20 (7+5+0+8+0)。到目前为止，这是我的代码。任何帮助，将不胜感激。

我的想法是将数字除以 10，留下数字中的最后一个整数，使用 mfhi 添加提醒。

```
.data
prompt: .asciiz "Enter a string of integer: "
output: .asciiz "\nThe total sum is: "
    .text
    .globl main
main:
    la $a0, prompt
    li $v0, 4
    syscall

    li $v0, 5
    syscall

    move $t2, $v0

    la $a0, output
    li $v0, 4
    syscall

Loop:
    div $t2, $t2, 10
    mflo, $t1
    mfhi, $t3
    beqz $t1, Exit
    add $t1, $t1, 0
    b additive

additive:
    add $t0, $t1, $t1
    j Loop

Exit:   
        la $a0, output
            li $v0, 4
            syscall
            la $v0, 10
            syscall 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:53:35.050

*   这应该是做什么的？向寄存器添加 0 不会改变其值：

    `add $t1, $t1, 0`

*   与 和 相除后`$t1`，`$t3`商*为*in `$t1`，*余数*为`$t3`。当您添加到总数时，您正在以相反的方式对待它。

*   这实际上会给您`$t0 = 2 * $t1`：您正在添加`$t1`自身并将结果存储在`$t0`.

    `add $t0, $t1, $t1`

    您可能实际上想要：

    `add $t0, $t0, $t3`

*   您在将余数添加到总数`$t1 == 0` *之前进行*检查，因此永远不会添加最高有效数字。你也不需要一个子程序来增加总数。您也可以使用`bnez Loop`代替`beqz Exit`-> `b Loop`。最后，您甚至不需要`$t1`，因为商已经在`$t2`.

摆脱`additive`并替换`Loop`为：

```
Loop:
    div $t2, $t2, 10
    mfhi, $t3
    add $t0, $t0, $t3
    bnez $t2, Loop 
```

*   你`Exit`很奇怪：你`output`第二次打印字符串而不是打印整数。

将其更改为：

```
Exit:
    move $a0, $t0
    la $v0, 1
    syscall

    la $v0, 10
    syscall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T13:01:07.603

方法很简单。您需要递归函数，我将其命名为 SumDigits，它将获取最后一位数字并对参数中的所有数字重复过程。递归调用返回后，您将在前一个结果中添加数字。为了便于理解，对代码进行了注释。代码如下：

```
 .text

#calculates sum of digits recursively
SumDigits:

    sub     $sp,    $sp,    12                  #alloocate 12B on stack
    sw      $ra 0($sp)                      #save return address
    sw      $a0,    4($sp)                      #save argument

    beq     $a0,    $0, exit_sumdigits      #when there is no more digits return 0
    rem     $t0,    $a0,    10                  #get last digit
    sw      $t0,    8($sp)                      #save it on stack
    div     $a0,    $a0,    10                  #divide argument by 10
    jal     SumDigits                       #repeat procedure
    lw      $t0,    8($sp)                      #read digit from stack
    add     $v0,    $v0,    $t0             #add digit to previous result
    lw      $ra,    0($sp)                      #load return address
    addi    $sp,    $sp,    12                  #free stack
    jr      $ra                             #return

exit_sumdigits:
    li      $v0,    0                           #there are no more digits, return 0
    lw      $ra,    0($sp)                      #load return address
    addi    $sp,    $sp,    12                  #free stack
    jr      $ra                             #return

main:
    li      $a0,    75080                       #load number in $a0
    jal     SumDigits                           #call SumDigits

    move    $a0,    $v0                         #set a0 = result of SumDigits
    li      $v0,    1                           #set $v0 for print int system call
    syscall

    li      $v0,    10                          #set $v0 for exit system call
    syscall

.data 
```

# android - 使用 AS3 在 iPhone 和 android 中设置提醒

> ID：10052226
> 
> 赞同：3
> 
> 时间：2012-04-07T06:07:12.107
> 
> 标签：android, iphone, actionscript-3, sqlite, flash-cs5.5

我需要在 iphone 和 android 应用程序中设置弹出提醒，无论该应用程序是否处于活动状态。如何使用 as3 和 flash cs5.5 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:59:15.423

查看功能类： [http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html 您可以知道您的 as3 应用程序在哪个操作系统下运行。如果它是 android ，您可以编写一些本机 Java 代码并将其（我正在考虑套接字）连接到您的应用程序以显示警报。iphone的，不知道能不能用。

# python - python - 如何在不格式化的情况下打印字符串？

> ID：10052228
> 
> 赞同：0
> 
> 时间：2012-04-07T06:07:28.973
> 
> 标签：python, string

是否有任何可能性或方法可以在不传递任何参数或不在 python 中格式化的情况下打印字符串？

**致@Blender。**

我已经使用 mysqlDB 模块完成了一个简单的脚本来与 mysql 服务器交互。使用该脚本，我可以执行 mysql 查询以获取它的输出。

例如，如果我将输入作为“show master logs”传递到脚本中，我将收到错误消息

TypeError：格式字符串的参数不足。

在这里，我无法传递足够的 agrumnet 来打印输出。因为，如果我传递了足够的参数来打印输出，我就无法打印具有更多参数的查询的输出。所以，我想在没有任何参数的情况下打印输出。

建议我，有可能或有任何替代解决方案。我是python的学习者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:39:33.293

是的，只需打印它：

```
>>> print "hello %s"
hello %s 
```

不发生格式化，而不是：

```
>>> print "hello %s" % "there"
hello there 
```

# android - 在后台运行并即时更新的 Android 短信服务

> ID：10052229
> 
> 赞同：0
> 
> 时间：2012-04-07T06:07:47.630
> 
> 标签：android, eclipse

我是android平台的新手，我希望制作一个没有终端设备和协调器的应用程序，它们将通过短信进行通信。

我已经在 j2me 中构建了它，但现在在 android 中我想创建一个在后台接收短信并不间断更新数据库的服务。我已经编写了一些在简单类中运行良好但在服务中如何绑定它的代码>

```
public class SMSReceiver extends BroadcastReceiver {
    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private SMSSync sync;
    private Context context;
    public SMSReceiver(Context ctx){
        sync = new SMSSync(ctx);
        this.context = ctx;
    }

    @Override
    public void onReceive(Context context,final Intent intents){
        if (intents.getAction().equals(SMS_RECEIVED)) {
            new Thread(){
                Context context;
                Thread Set(Context ctx){
                    this.context=ctx;
                    return this;
            }
        public void run(){
            try{
            SmsManager sms = SmsManager.getDefault();
            Bundle bundle = intents.getExtras();
            /*String uriContent =intent.getDataString();
            String[] str = uriContent.split(":");
            String strPort = str[str.length-1];
            short Port =  Short.valueOf(strPort, 16);*/
            //if(Port==5000){*/
            if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++)
            messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            String msg=null;
            String address = null;
                for (SmsMessage message : messages) {
                     msg = message.getMessageBody();
                     address = message.getOriginatingAddress();
                }
                ////////////sending to SMSSync class//////////////
                MainThread th = new MainThread(sync,msg);
                try{
                    th.thread.join();
                }catch(Exception e){
                    Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();
                }
                if(msg.substring(3, 4).equals("2"))
                    ConstantClass.isAuditrequestSend = true;
//              sync.smsProcess(msg);
                //Toast.makeText(context, "Message Received Successfully", Toast.LENGTH_SHORT).show();              
            }
//          }
            ////////////////after receiving the sms opening the Main Screen./////////////////////
            Intent intent = new Intent(context,ZigbeeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent);

        }catch(Exception e){
            Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();
        }
        }
    }.Set(context).start();
    }
    }
//}
} 
```

# ocaml - 在类型中工作的想法

> ID：10052230
> 
> 赞同：2
> 
> 时间：2012-04-07T06:08:07.057
> 
> 标签：ocaml

请在[我的上一个问题中查看详细信息](https://stackoverflow.com/questions/10026597/type-errors-when-using-same-name)

```
1) cpf0.ml:
type string = char list
type name = string
type symbol =
| Symbol_name of name

2) problem.ml:

type symbol =
  | Ident of Cpf0.string 
```

在这`problem.ml`它有两个 type 定义`string`，当然它给了我一个错误，但是我可以让它们具有相同的类型吗？我需要一个想法。

```
module Str = struct type t = string end;;
module StrOrd = Ord.Make (Str);;
module StrSet = Set.Make (StrOrd);;
module StrMap = Map.Make (StrOrd);;

module SymbSet = Set.Make (SymbOrd);;
let rec ident_of_symbol = function
  | Ident s -> s

let idents_of_symbols s =
  SymbSet.fold (fun f s -> StrSet.add (ident_of_symbol f) s) s StrSet.empty;; 
```

**此表达式的类型为 Cpf0.string = char list，但表达式应为 Util.StrSet.elt = string 类型**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:20:56.090

如果您愿意，您可以在不同模块中为不同类型使用名称“字符串”，尽管（正如 Basile Starynkevitch 指出的那样）它令人困惑。最好选择一个不同的名字。如果确实需要重用名称，可以每次都指定模块。如果您不指定模块，您将获得预定义的含义（或最里面打开的模块的含义）。

在我看来，您引用的代码中的问题是这一行：

```
module Str = struct type t = string end;; 
```

没有为字符串指定模块名称，因此它引用了预定义的`string`. 您似乎想说：

```
module Str = struct type t = Cpf0.string end;; 
```

然而，这很难说。没有足够的上下文让我真正理解你想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:12:11.787

`string`是 Ocaml 中的预定义类型（即在`Pervasives`模块中）；它是例如字符串文字常量的类型，例如`"this string"`. 使用其他名称（否则您和任何阅读您的代码的人都会非常困惑）

# objective-c - 用于 iOS 游戏中网络交易的 Protobuf 与二进制 plist

> ID：10052233
> 
> 赞同：4
> 
> 时间：2012-04-07T06:08:33.370
> 
> 标签：objective-c, ios, plist, protocol-buffers, multiplayer

我正在为 iOS 开发实验性多人 roguelike。玩家将通过 GameKit API 连接，他们将被放在一个地牢中。玩家可以执行各种动作，所以我想让一个设备成为主机，并实现某种 RPC 来发送/接收这些动作（以及游戏开始时相当复杂的地牢状态）

我需要一些紧凑而快速的序列化。我在 protobuf 和二进制 plist 之间进行选择。二进制 plist 看起来很容易用于 objc 对象序列化/反序列化（这很重要，因为它的实验性非商业项目），但它看起来效率低下。Protobuf 看起来很高效，但完全陌生。有什么选择吗？

编辑：刚刚找到[http://msgpack.org/](http://msgpack.org/)。看起来是一条路

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:54:20.207

协议缓冲区序列化应该比二进制 plist 更快。此外，如果您想在 android 或任何其他平台上再次制作游戏，那么协议缓冲区将是您的朋友。（*平台独立*）

在 ios 上使用协议缓冲区一开始可能会很痛苦。仅使用 XCode 设置项目会占用大量时间。最初我尝试使用[目标 c 版本的 protobuf](https://github.com/regwez/protobuf-objc-iOS5)，但由于库中的一些限制，我不得不完全放弃它。

我现在已经直接在 Xcode 上添加了谷歌源代码，并且它工作得很好。[看看这个答案](https://stackoverflow.com/a/15246414/1383704)。通过这个，您将能够轻松地开始在您的项目中使用 protobufs。

# java - Tokyo Cabinet - 内存调优

> ID：10052234
> 
> 赞同：15
> 
> 时间：2012-04-07T06:08:35.257
> 
> 标签：java, database, tokyo-cabinet

我有超过 1 亿个键值对（一个键可以有多个值）。我正在使用 Tokyo Cabinet 的 BDB (B+Tree DB)，其键值是 32 位字节数组。

东京内阁是否可以设置它可以使用多少内存（下限和上限）？实际上，我有 8GB 内存，但似乎无法利用大内存。

还有一点就是，我想知道怎么设置，

tokyoCabinet.tune() tokyoCabinet.optimize() tokyoCabinet.setxmsiz() tokyoCabinet.setcache() 这些参数，因此我可以为我的情况获得最大的调整。提前致谢。任何想法对我也有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:57:00.990

**tokyoCabinet.setcache()** - 设置缓存大小，通常是文件大小的一半或更多

**tokyoCabinet.tune()** - 打开前设置哈希桶文件和BTree索引参数

**tokyoCabinet.optimize()** - 文件已经打开时设置的哈希桶文件和BTree索引的新参数，如果记录的数量增加超过tune(bnum)中设置的数量，可以通过optimize()增加，例如.

**tokyoCabinet.setxmsiz()** 设置额外映射内存的大小，和使用mmap一样，通常是filesize

> 1 亿个键值对 - bnum > 100M * 2 值是 32 位字节数组 -> recsize = 32bit = 8 字节 -> apow = 3 ( = 2^3 )

如果你有 1024 个元素的 Array:recsize，设置 apow = 13

**lmemb**指定每个叶页中的成员数。如果不大于 0，则指定默认值。默认值为 128。

**nmemb**指定每个非叶页面中的成员数。如果不大于 0，则指定默认值。默认值为 256。 fpow 指定空闲块池的最大元素数，是 2 的幂。

[官方文档](http://fallabs.com/tokyocabinet/spex-en.html#tcbdbapi)

# caching - 如何在 symfony2 存储库中指定查询结果缓存？

> ID：10052239
> 
> 赞同：5
> 
> 时间：2012-04-07T06:09:31.240
> 
> 标签：caching, symfony, doctrine-orm, apc

我有一个存储库，我正在尝试设置结果缓存。我只能在网上找到一个如何执行此操作的示例......但是当我在我的一个存储库中实现该示例时，我收到了一个错误。我正在使用 APC 进行缓存，并已启用查询缓存以在我的 config.yml 文件中使用 APC。我已经为 APC 分配了 512M，它目前只使用了 50M（其中 23M 用于这个失败的缓存条目）

这是我拥有的存储库代码：

```
class AchievementRepository extends EntityRepository
{
    function findAchievementsByCategory($categoryObj)
    {
        $em=$this->getEntityManager()->createQuery("SELECT a FROM FTWGuildBundle:Achievement a where a.category=:category order by a.title")
            ->setParameter('category',$categoryObj);
        $em->useResultCache(true,3600,'findAchievementsByCategory');
        $result=$em->getResult();
        return $result;
    }
} 
```

当执行此操作时，我收到以下错误

```
Notice: apc_store() [<a href='function.apc-store'>function.apc-store</a>]: &quot;type&quot; returned as member variable from __sleep() but does not exist in /data/www/ftw2/Symfony/vendor/doctrine-common/lib/Doctrine/Common/Cache/ApcCache.php line 80 
```

当我查看我的 apc.php 文件以查看缓存的内容时，我在用户缓存部分中找到我的缓存条目，其存储值为

```
Fatal error:  Nesting level too deep - recursive dependency? in /data/www/localhost/apc.php on line 1000 
```

谁能给我一些关于我哪里出错的方向？

此实体中有几列是 ManyToOne，我是否需要禁用此查询的延迟加载才能使其工作？如果是这样……怎么办？编辑：我通过将 ,fetch="EAGER" 添加到我的 ManyToOne 映射来启用急切负载......没有苹果:(

编辑#2：**回答**- 工作类代码（注意，实体类（成就）的所有属性都已更改为受保护）

```
class AchievementRepository extends EntityRepository
{
    function findAchievementsByCategory($categoryObj)
    {
        $em=$this->getEntityManager()->createQuery("SELECT a FROM FTWGuildBundle:Achievement a where a.category=:category order by a.title")
            ->setParameter('category',$categoryObj);
        $em->useResultCache(true,3600,'findAchievementsByCategory');
        $result=$em->getArrayResult();
        return $result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:16:43.070

当 Doctrine 缓存一个实体时，它会保存它的序列化状态。问题是，私有属性（由 Doctrine 生成时的默认可见性）无法序列化。要解决此问题，您必须保护您的实体属性。更多信息：[http ://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html#merging-entities](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html#merging-entities)

另一件事是（最终）在 Doctrine 版本 2.2 中修复[的已知问题](http://www.doctrine-project.org/jira/browse/DDC-217)，它将在 Symfony 2.1 中。如果由于某种原因无法升级，缓存关联的唯一方法是使用实​​体[`getArrayResult`](http://www.doctrine-project.org/api/orm/2.1/class-Doctrine.ORM.AbstractQuery.html#_getArrayResult)而不是填充实体。

# mysql - 获取 SQL UNION 中的字段总和

> ID：10052240
> 
> 赞同：1
> 
> 时间：2012-04-07T06:09:33.027
> 
> 标签：mysql, sql

我将如何在这里获得共同领域的总和？

```
SELECT first_user_id, mutual
    FROM userprofile_usercontact
UNION ALL
SELECT second_user_id, mutual
    FROM userprofile_usercontact
GROUP BY first_user_id 
```

换句话说，我想获得`SUM(mutual)`（first_user_id + second_user_id），其中mutual = 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:12:28.817

```
SELECT u.user_id, SUM(u.mutual)
  FROM (SELECT first_user_id AS user_id, mutual
          FROM userprofile_usercontact
        UNION ALL
        SELECT second_user_id AS user_id, mutual
          FROM userprofile_usercontact
       ) AS u
 GROUP BY user_id; 
```

评论中的问题是：

> 我将如何摆脱相互 = 0 的条目？

像往常一样使用过滤条件：

```
SELECT u.user_id, SUM(u.mutual)
  FROM (SELECT first_user_id AS user_id, mutual
          FROM userprofile_usercontact
        UNION ALL
        SELECT second_user_id AS user_id, mutual
          FROM userprofile_usercontact
       ) AS u
 WHERE u.mutual != 0   -- or u.mutual <> 0
 GROUP BY user_id; 
```

优化器很可能会将条件下推到 UNION 查询中，因此它会像编写查询一样执行：

```
SELECT u.user_id, SUM(u.mutual)
  FROM (SELECT first_user_id AS user_id, mutual
          FROM userprofile_usercontact
         WHERE mutual != 0
        UNION ALL
        SELECT second_user_id AS user_id, mutual
          FROM userprofile_usercontact
         WHERE mutual != 0
       ) AS u
 GROUP BY user_id; 
```

最终结果当然是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:15:06.800

```
SELECT SUM(mutual) sm, user_id FROM
(SELECT first_user_id user_id, mutual
    FROM userprofile_usercontact
    UNION ALL
    SELECT second_user_id, mutual
        FROM userprofile_usercontact
        GROUP BY first_user_id) s 

    GROUP BY user_id ORDER BY sm DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:11:07.803

```
Select sum(field) from (
  Select ....
  Union all 
  Select ....
 ) atable
where .... 
```

# c# - 更新相关实体 DDD

> ID：10052241
> 
> 赞同：1
> 
> 时间：2012-04-07T06:10:07.253
> 
> 标签：c#, entity-framework, domain-driven-design

我对如何使用 DDD 更新相关实体感到困惑。假设我有一个员工类和工作计划类。我应该如何更新某个员工的具体工作时间表？Employee 和 Workschedule 之间的关系是一对多的。下面是我使用的如何添加/更新某个工作计划的代码。

```
public class Employee 
{    
    public int EmployeeId { get; set; }
    public virtual ICollection<WorkSchedule> WorkSchedules { get; set; }

    public WorkSchedule AddWorkSchedule(WorkSchedule workSchedule)
    {
        this.WorkSchedules.Add(workSchedule);

        return workSchedule;
    }

    public WorkSchedule EditWorkSchedule(WorkSchedule workSchedule)
    {
        var originalWorkSchedule = this.WorkSchedules.FirstOrDefault(w => w.WorkscheduleId ==  workSchedule.WorkscheduleId);

        originalWorkSchedule.ClockIn = workSchedule.ClockIn;
        originalWorkSchedule.ClockOut = workSchedule.ClockOut;

        return originalWorkSchedule;
    }
}
public class WorkSchedule
{
    public int WorkScheduleId { get; set; }
    public DateTime ClockIn { get; set; }
    public DateTime ClockOut { get; set; }

    public int EmployeeId { get; set; }
} 
```

这个对吗？我是否正确遵循 DDD？另外，我现在的想法 Workschedule 是一个值对象，但我将 ID 用于规范化目的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:35:43.407

由于这里的所有内容都与 EF 相关，因此它与 DDD 无关。如果代码按要求工作，那么没关系。但 DDD 与 EF 或任何其他 ORM 无关。您应该设计域对象，而不关心数据库或 ORM。然后，在存储库中，您将域实体映射到将由 ORM 处理的持久性实体。

> 另外，我现在的想法 Workschedule 是一个值对象，但我将 ID 用于规范化目的

这是层和模型混合时的结果。您不需要域中的 ID，但需要用于持久性的 ID。试图在一个模型中同时满足这两个要求并调用该模型域会导致一事无成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T18:31:21.337

EF它不适合DDD，太笨拙了。EF 适用于喜欢将 SQL 表映射到实体并像 ActiveRecord 反模式一样的代码猴子，但是在更聪明的开发人员开始将此称为不好的做法后，他们开始使用 ORM、实体并继续进行猴子编码。

在过去的 3 年里，我一直在努力让 EF 以 DDD 的方式工作。它成功地抵抗并获胜。没有黑客，它就行不通。多对多关系仍然无法按预期工作，无法使用构造函数创建实体，而不是公共属性等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:11:41.040

你的模型应该是“POCO”类

CRUD 方法，例如......**添加**或**编辑**将被视为“服务”或“存储库”的一部分

这是我刚刚想到的一个快速想法/它应该是什么样子及其用法..

```
IRepository repository { get; set; } //implement Interface and inject via IoC Container

//..usage
var employee = repository.GetEmployee(123); //get by id
//..new WorkSchedule
employee.WorkSchedules.Add(workSchedule);

var result = repository.Save(employee); 
```

# php - 内部和外部反向链接

> ID：10052245
> 
> 赞同：1
> 
> 时间：2012-04-07T06:11:15.153
> 
> 标签：php, api, web-crawler

我想为 sitemap.xml 的每个 url 找到内部和外部反向链接。

我可以在 seomoz 免费 api 的帮助下得到这个。但它在提取数据时花费了太多时间，有时会在两者之间徘徊。

数据提取过程需要快速，因为一个 sitemap.xml 可以有数千个 url，而我有很多这样的 sitemap.xml。

是否有任何 api 或其他方式（如制作爬虫）来查找反向链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:15:32.123

我不确定这是否会对您有所帮助，但有一个用于 Firefox 的工具（插件）**SEO 用于 Firefox**浏览器。这使您可以轻松地将页面的**内部和外部链接**导出到 CSV。

# javascript - javascript中一串一位数字的总和？

> ID：10052254
> 
> 赞同：5
> 
> 时间：2012-04-07T06:13:04.043
> 
> 标签：javascript

我正在尝试编写一个添加字符串左侧并针对右侧验证它的脚本。

例如：

```
var left = "12345"
var right = "34567" 
```

我需要做某种求和函数，将 1+2+3+4+5 相加并检查它是否等于 3+4+5+6+7。

我只是不知道该怎么做。

我想我需要使用 for 循环来遍历数字，例如 for (var i = 0, length = left.length; i < length; i++)

但我不确定如何从那里添加每个数字。

***编辑***var 实际上是从字段中提取的。所以 var left = document.blah.blah

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T06:18:25.103

[演示](http://jsfiddle.net/qgvaS/)

```
var left = "12345"
var right = "12345"

function add(string) {
    string = string.split('');                 //split into individual characters
    var sum = 0;                               //have a storage ready
    for (var i = 0; i < string.length; i++) {  //iterate through
        sum += parseInt(string[i],10);         //convert from string to int
    }
    return sum;                                //return when done
}

alert(add(left) === add(right));​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:20:24.703

1.  查找字符串的长度
2.  然后在一个临时变量中存储值 pow(10,length-1)
3.  如果你应用模块函数 (left%temp) 你会得到最后一个有效数字
4.  您可以使用此数字添加
5.  重复这个过程，直到左边的字符串长度为 0 6 对右边的字符串也重复上述所有步骤，然后比较值

注意：使用 parseInt 函数将字符串转换为 int

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T06:40:58.457

```
var sum = function(a,b){return a+b}

function stringSum(s) {
    var int = function(x){return parseInt(x,10)}
    return s.split('').map(int).reduce(sum);
}

stringSum(a) == stringSum(b) 
```

# javascript - 从 chrome 扩展中的内容脚本访问全局对象

> ID：10052259
> 
> 赞同：6
> 
> 时间：2012-04-07T06:14:31.527
> 
> 标签：javascript, html, google-chrome-extension

我在 .js 文件中定义了一个全局对象。例如 file1.js 包含全局对象 SomeObject。该文件在 background.html 中加载。

由于 file1.js 包含在 background.html 中，我可以访问此页面中的全局对象。所以这里没有问题。

当执行单击扩展按钮之类的事件时，我正在使用`chrome.tabs.executeScript(null, {file: "contentscript.js"});`api 运行内容脚本。

在这种情况下，如何访问 contentscript 中的 SomeObject？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-07T10:39:50.003

**无法从内容脚本或注入脚本直接访问**后台[页面](https://developer.chrome.com/extensions/content_scripts.html)的**全局**对象。

要使用注入脚本中的后台页面方法，请执行以下步骤：

1.  **内容脚本**：将事件侦听器绑定到页面^([示例 1](https://stackoverflow.com/a/9636008/938089?chrome-extension-retrieving-gmails-original-message))。
    *每当您想从后台页面通知该方法时：*
2.  **注入脚本**：创建并触发此特定事件^([示例 1](https://stackoverflow.com/a/9636008/938089?chrome-extension-retrieving-gmails-original-message))。 **→ 1)**
    中的事件监听器被触发。
***   在此事件侦听器中，用于[`chrome.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime.html#method-sendMessage)从后台^([示例 2](https://developer.chrome.com/extensions/messaging.html#simple))请求功能。*   在后台页面中，使用[`chrome.runtime.onMessage`](https://developer.chrome.com/extensions/runtime.html#event-onMessage).*   或者，使用 . 在原始选项卡中注入代码[`chrome.tabs.executeScript(tab.id, func)`](https://developer.chrome.com/extensions/tabs.html#method-executeScript)。**

 **要从内容脚本中使用背景页面的方法，只需要步骤 3 和 4。
这是一个示例，其中内容脚本与后台页面进行通信：

```
// Example background page
function some_method(arg_name) {
    return localStorage.getItem(arg_name);
}
chrome.runtime.onMessage.addListener(function(request, sender, callback) {
    if (request.type == 'localStorage - step 4') {
        callback( some_method(request.name) );
    } else if (request.type == 'localStorage - step 5') {
        localStorage.setItem(request.name, request.value);
    }
});

// Example contentscript.js
chrome.runtime.sendMessage({
    type: 'localStorage - step 4',
    name: 'preference'
}, function(value) {
    if (value === null) {
        // Example: If no preference is set, set one:
        chrome.runtime.sendMessage({
            type: 'localStorage - step 5',
            name: 'preference',
            value: 'default'
        });
    }
}); 
```

## 也可以看看

*   SO: What you **should** know about [background scripts vs Content Scripts vs Injected scripts](https://stackoverflow.com/a/9916089/938089?chrome-extension-auto-run-a-function).
*   SO: Example code: [Communicating between an Injected script and a Content script](https://stackoverflow.com/a/9636008/938089?chrome-extension-retrieving-gmails-original-message).**

# ios - 在（BOOL）webView 中：如何打开在 UIWebView 中单击的 URL 以打开模态 UIWebView

> ID：10052264
> 
> 赞同：3
> 
> 时间：2012-04-07T06:15:31.443
> 
> 标签：ios, xcode, uiwebview, modalviewcontroller, uistoryboardsegue

感谢您查看我的问题。让我先描述一下这个应用程序。我有一个基于 iOS5.1 的标签栏应用程序，它使用故事板和 ARC。有四个带有视图控制器的选项卡，每个选项卡显示带有本地 HTML 文件的 web 视图（每个视图是一组不同的要显示的 html 文件）。

目前，当用户点击 http 或 https 链接时，它将在 Safari 中打开。但是，我现在希望它通过模态视图在应用程序中打开。我目前已创建并准备显示界面，但我无法将 URL 传递给模态的“webview2”。我已经寻找了许多使用 RSURL 和字符串等执行此操作的示例，但无法让它们中的任何一个工作。给出的一些示例代码似乎不适用于我的情况。

在我的 FirstViewController.m 文件中（在其他视图中相同），我有...

```
 - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    //Gets the link.
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        NSURL *URL = [request URL]; 
        NSLog(@"url:%@",request); //Get's the url itself

        //If it's an external link...
        if ([[URL scheme] isEqualToString:@"http"] || 
            [[URL scheme] isEqualToString: @"https" ])  {
            [[UIApplication sharedApplication] openURL:[request URL]];
            NSLog(@"Opened in Safari");
            return NO;
        }

        //If it's an email address...
        else if ([[URL scheme] isEqualToString:@"mailto"]) {
            [webView loadRequest:request];
            [[UIApplication sharedApplication] openURL:[request URL]];
            NSLog(@"Opened in Mail App");
            return NO;
        }
    }        
    return YES;
} 
```

如果我希望在 Safari 中打开 URL，这可以正常工作。所以在这部分...

```
//If it's an external link...
    if ([[URL scheme] isEqualToString:@"http"] || 
        [[URL scheme] isEqualToString: @"https" ])  {
        [[UIApplication sharedApplication] openURL:[request URL]];
        NSLog(@"Opened in Safari");
        return NO;
    } 
```

我需要它来打开带有单击 URL 的模式视图，而不是 Safari。

所以我要问的是...... **保存此 URL 的最佳方法是什么，然后打开模态视图，然后在模态 Web 视图中打开刚刚触摸的 URL？**

我已经有了使用关闭按钮等制作的模式视图。我只需要在加载时加载单击的 URL。

我可以通过线路加载模态...

```
[self performSegueWithIdentifier:@"ModalWebView" sender:self]; 
```

但这只是加载它而没有任何 URL 信息和空白的 webview，当然。模态使用 WebViewController.h/m。

如果有人能告诉我如何打开和传递 URL，以便它加载到 segue“ModalWebView”中，我将不胜感激。请让我知道我是否需要在运行模态视图的 WebViewController.h/m 中包含任何属性或其他任何内容。也许需要使用 -(void)prepareForSegue？如果是这样，怎么做？

我意识到答案可能很简单，但我仍然是一个初学者，并且花了几天时间试图找到一个明确的答案。我之前通过搜索在这个网站上找到了很多问题的答案，但我担心我被困在这个问题上。

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:25:33.283

在您的视图控制器中，实现该`prepareForSegue`方法并添加以下代码。

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSLog(@"Source Controller = %@", [segue sourceViewController]);
    NSLog(@"Destination Controller = %@", [segue destinationViewController]);
    NSLog(@"Segue Identifier = %@", [segue identifier]);

    if ([segue.identifier isEqualToString:@"ModalWebView"]) {

        ModalWebViewController *wVC = [segue destinationViewController];
        wVC.url = [NSURL URLWithString:article.url]; // replace article.url with your url.
    }

} 
```

在我上面的代码中，将使用的 URL 是从我的 article.url 对象中设置的。要使其正常工作，您需要从 method 获取 url `shouldStartLoadWithRequest`。

```
// CurrentViewController.h
@property (strong, nonatomic) NSURL *targetUrl;

// CurrentViewController.m 
//If it's an external link...
    if ([[URL scheme] isEqualToString:@"http"] || 
        [[URL scheme] isEqualToString: @"https" ])  {
        targetUrl = url;
        [self performSegueWithIdentifier:@"ModalWebView" sender:self];
        return NO;
    } 
```

如果使用上述方法，我们现在将第一个代码块中的 article.url 替换为 targetUrl。

```
if ([segue.identifier isEqualToString:@"ModalWebView"]) {

            ModalWebViewController *wVC = [segue destinationViewController];
            wVC.url = targetUrl; 
        } 
```

在您的模式 web view.h 文件的视图控制器中创建一个 NSURL。

```
//ModalWebViewController.h
@property (strong, nonatomic) NSURL *url; 
```

在您的实现文件 (.m) 中创建方法`viewDidAppear`

```
//ModalWebViewController.m 
-(void) viewDidAppear:(BOOL)animated {
    [_webView loadRequest:[NSURLRequest requestWithURL:url]];
} 
```

希望我已经解释了足够的内容，以便您能够实施。

# php - 无法在查询中设置限制值

> ID：10052266
> 
> 赞同：2
> 
> 时间：2012-04-07T06:15:55.710
> 
> 标签：php, mysql, codeigniter

我正在使用 Codeigniter 在查询中设置“限制”的值时遇到问题，限制仅显示“限制 NULL”

这是我的代码片段。

```
SELECT block.loc, owner.name , block.dist_name FROM   house INNER JOIN block ON house.block_id = block.block_id INNER JOIN owner ON owner.house_id = house.house_id WHERE 
            block.dist = ? AND house.status = 5 limit ? , ? 
 $result = $this->db->query($qry, array($this->getDist(), (int) $this->getLimitStart(), (int) $this->getLimitOffset())); 
```

转储为

```
(int) $this->getLimitStart() is '0' and (int) $this->getLimitOffset() is '10' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:39:04.537

据我了解，您创建了自己的对象的 getter setter，您在查询中提供的 getter 返回 NULL 只是因为您没有使用相同的 setter。

例如：如果您使用它 ($this->getLimitOffset())，您也必须像这样设置它 yourObject->setLimitOffset(10)。我认为它现在对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:07:28.680

尝试这个：`$this->db->limit($nrecords, $offset);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:29:01.567

您应该像这样交换起始值和偏移值

```
SELECT block.loc, owner.name , block.dist_name FROM   house INNER JOIN block ON house.block_id = block.block_id INNER JOIN owner ON owner.house_id = house.house_id WHERE 
        block.dist = ? AND house.status = 5 limit ? , ? 
 $result = $this->db->query($qry, array($this->getDist(), (int) $this->getLimitOffset(),(int) $this->getLimitStart())); 
```

因为codeigniter活动记录限制的第一个参数是limit abd第二个是offset。

```
http://codeigniter.com/user_guide/database/active_record.html 
```

# windows - Wix 通过 INSTALLUILEVEL_FULL 模式捕获 Windows Installer 错误消息

> ID：10052270
> 
> 赞同：2
> 
> 时间：2012-04-07T06:16:49.643
> 
> 标签：windows, installation, wix

如何捕获 Windows 安装程序的默认错误消息？它看起来像静音模式，没有任何消息显示。例如，当另一个 msi 正在进行时，安装程​​序将显示错误代码 1500 的错误消息：“另一个安装正在进行中。您必须先完成该安装才能继续此安装。”，我不想在这种情况下显示它，只是退出安装程序。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:18:09.087

Windows Installer 会自动显示“另一个安装正在进行中”错误。这是一个内部错误，它不是由您的包管理的。所以你无法控制它。

大多数安装错误也是如此。您无法以自定义方式捕获或处理它们。您可以做的最好的事情是尽量避免它们，例如在安装过程中不启动另一个 MSI。

如果您需要使用安装程序安装其他软件包，您可以尝试将它们添加为先决条件。

# asp.net-mvc - MVC Telerik Chart 使用 SVG 导出为 PDF

> ID：10052271
> 
> 赞同：3
> 
> 时间：2012-04-07T06:16:52.580
> 
> 标签：asp.net-mvc, svg, telerik-mvc

我正在尝试使用 svg.dll 将 Telerik MVC 图表导出为 PDF（适用于 Telerik Kendo Charts），这是我的代码：

```
 <% Html.Telerik().Chart<A1cGroupData>()
                .Name("Chart")
                .Title("A1c Groups - Last Visit")
                .Legend(legend => legend
                .Position(ChartLegendPosition.Left))
                .Series(series => series.Pie(s => s.percent, s => s.A1CGroup).Border(1, "#d6dbe0", ChartDashType.Solid).Labels(labels => labels
                .Template("<#= value #>%")
                .Visible(true)))
                .Tooltip(tooltip => tooltip.Visible(true).Template("<#= category #> - <#= value #>%"))
                .DataBinding(dataBinding => dataBinding
                .Ajax().Select("_A1cGroupChartData", "Report"))
                .ClientEvents(events => events
                .OnLoad("onLoad")
                )
                .Render();
            %>

      <script type="text/javascript">
            function onLoad(e) {
                var chart = $('#chart').data('tChart');
                var svg = chart.svg();
                $('#hfSVG').val(htmlEncode(svg));
            }
            function htmlEncode(value) {
                return $('<div/>').text(value).html();
            }
   function PrintChart(fc) {

            var fc = $('#hfSVG').val();
            var url = '<%= Url.Content("~/Report/PrintChart1") %>';
            $.post(url, { fc: fc },
            function (content) {
                if (content != null) { 5 }
            }, "json");
        }
        </script>

    <input type="hidden" id="hfSVG" name="hfSVG" />
    <input type="button" onclick="PrintChart();" value="print chart" /> 
```

我收到此错误：无法获取属性“svg”的值：对象为空或未定义。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:29:10.603

尝试

```
 var chart = $('#Chart').data('tChart'); 
```

您的`Name`图表是“图表”。

# emacs - 使用 Emacs replace-regexp 保留 tab-to-tab-stop

> ID：10052272
> 
> 赞同：2
> 
> 时间：2012-04-07T06:16:57.363
> 
> 标签：emacs

我有一个非常大的文本文件，有近 20 列。不幸的是，生成该文件的程序没有正确处理以 -10 开头的列（它只正确间隔了总共有 5 个字符，而不是 6 个字符的数据）。本质上，我最终得到了如下所示的东西：

```
-10.072-10.179-10.2190.002 
```

我希望它看起来像：

```
-10.072     -10.179     -10.219     0.002 
```

并且几乎能够做到这一点：

`M-x` `replace-regexp` `RET` `-10\....` `RET` `\&``TAB` `RET`

但是，当我使用`TAB`它时，它只替换为空格而不是制表符——理想情况下是制表符到制表符。如果我手动转到文件中的这些情况之一并`TAB`正确键入它，则会执行制表位到制表位以将数据与正确的列对齐。如何在替换正则表达式中保留制表符停止功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:41:03.943

搜索和替换当然应该插入一个标签。当然，选项卡的外观大小可能会有所不同，这是我能想到的唯一原因，因为它看起来是一个空格。您可以使用`whitespace-mode`使差异更加明显。

至于`tab-to-tab-stop`，这是一个动态函数，而不是一种特殊的制表符，所以你不能通过搜索和替换¹来做到这一点。我建议改用键盘宏，以获得与手动输入相同的动态行为。

*   `F3`
*   `M-C-s` `-10....` `RET`
*   `M-x` `tab-to-tab-stop` `RET`
*   `F4`

或者也许只是：`F3``M-C-s` `-10....` `RET``TAB``F4`

然后你可以运行宏，直到它失败`C-0``F4`

（如果您只想在缓冲区的一部分上运行它，您可以简单地先缩小到相关区域。）

¹不完全正确，因为 Emacs 允许您将任意 elisp 评估为替换模式的一部分；但这不仅仅是调用 tab-to-tab-stop 函数的情况，因此宏确实要简单得多。

# android - SQLite：通过传递两个值来检索记录

> ID：10052273
> 
> 赞同：-1
> 
> 时间：2012-04-07T06:16:58.533
> 
> 标签：android, sqlite

我有一张桌子“TABLE_QUESTION”。我需要通过**Exam_id**和**question_Id**来获取记录。我编写了一个查询来从表中获取记录，但它显示异常`"SQLite Exception near question_id"`。

这是我的查询供您参考..

```
 String selectQuery=("select * from question where exam_id ='" + examId + " and question_id ='" + questionId +"'" );
        Cursor cursor = db.rawQuery(selectQuery, null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T06:20:19.293

你错过了一个单引号，`examId + "`必须是 `examId + " '`

```
String selectQuery=("select * from question where exam_id ='" + examId + "' and question_id ='" + questionId +"'" ); 
```

# database - 将审计和日志记录与响应时间分开 - 设计

> ID：10052277
> 
> 赞同：1
> 
> 时间：2012-04-07T06:18:06.750
> 
> 标签：database, jakarta-ee

我有一个简单的基于 Web 的应用程序场景，发送请求并从数据库获取响应。响应将有非常多的行，例如一次大约 10,000 到 20,000 条记录。

我已经为所有事务设计了审计日志记录。即为所有此类响应插入数据库。比如一次 10,000 到 20,000 行。

因为，插入表只是为了审计目的。我可以用某种方法将审计和日志记录与正常响应分开吗？有什么方法可以区分它们？

对设计的任何帮助都将是非常可观的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-27T15:07:38.523

一般来说，Web 应用程序在同步 Web 请求中做太多工作是个坏主意。Web 服务器（和 Web 应用程序服务器）旨在为大量并发请求提供服务，但假设每个请求只需几毫秒即可执行。不同的服务器有不同的线程策略，但是一旦你有长时间运行的请求，你很可能会因为线程管理而遇到开销，然后你很快就会发现你的 Web 服务器速度变慢到出现故障的地步。

在单个 Web 请求中读取或写入数以万计的行几乎可以肯定是个坏主意。您可能希望将应用程序设计为使用异步工作队列。有几种解决方案；在 Java 生态系统中，您可以查看[vert.x](http://vertx.io/)

在这些异步模型中，审计很简单——您的审计员订阅与“写入数据库”侦听器相同的消息队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T14:55:29.963

签***出 log4j2***以分离审计和日志记录。

> 这很容易通过在 log4j2.xml 本身中有两个附加程序来完成。

参考访问：

[https://logging.apache.org/log4j/2.x/manual/appenders.html](https://logging.apache.org/log4j/2.x/manual/appenders.html)

# android - java.lang.classcastException android.content.pm.ResolveInfo

> ID：10052279
> 
> 赞同：1
> 
> 时间：2012-04-07T06:18:32.773
> 
> 标签：android, android-listview

我正在尝试显示所有已安装的应用程序及其图标。单击列表项后，我将显示该应用程序的相关记录。

应用程序和图标显示正确，但是当我单击列表项时出现以下错误。`java.lang.classcastException android.content.pm.ResolveInfo`

```
final PackageManager pm = this.getPackageManager();

    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    final ArrayList<ResolveInfo> list = (ArrayList<ResolveInfo>) pm
            .queryIntentActivities(intent,
                    PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list) {
        Log.i("taa", ": Installed Applications "
                + rInfo.activityInfo.applicationInfo.loadLabel(pm)
                        .toString());
    }

    final ArrayAdapter<ResolveInfo> adapter = new ArrayAdapter<ResolveInfo>(
            this, R.layout.installedapp, list) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null)
                convertView = LayoutInflater.from(parent.getContext())
                        .inflate(R.layout.installedapp, parent, false);

            final String text = list.get(position).activityInfo.applicationInfo
                    .loadLabel(pm).toString();
            ((TextView) convertView.findViewById(R.id.text)).setText(text);

            final Drawable drawable = list.get(position).activityInfo.applicationInfo
                    .loadIcon(pm);
            ((ImageView) convertView.findViewById(R.id.image))
                    .setImageDrawable(drawable);

            return convertView;
        }

    };
    setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

}

protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);///////---->error
    List<String> app_item = dh.getRecordItem(item);
    // Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    Intent intent = new Intent(ApplicationList.this, AppContent.class);
    Bundle bundle = new Bundle();

    if (app_item.get(0).equals("No records")) {
        Log.d("Set", "No Activity happened");
        bundle.putString("list", app_item.toString());
    } else {
        Log.d("Set", "Act happened");
        bundle.putString("list", app_item.toString());
    }
    intent.putExtras(bundle);
    startActivity(intent);

} 
```

我试图在日志中打印项目的值我得到了这个值`resolverInfo{405437c0 com.android.camera gallaru pickerp=0 o=0 m=0x108000}` 但我不想只得到相机。这样我的点击代码就可以工作了。我应该怎么做才能解决这个错误。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:27:32.223

实际上，您正在将`ResolveInfo`对象转换为`String`对象，这就是您得到异常的原因..

尝试这个

```
protected void onListItemClick(ListView l, View v, int position, long id) {
 ResolveInfo info = (ResolveInfo) getListAdapter().getItem(position);
 String item =  info.activityInfo.name;
.
.
. 
```

让我知道发生了什么..

# spring - 我想在 Spring Data MongoDB 持久层中将数字序列作为 ID。如何配置此行为？

> ID：10052283
> 
> 赞同：2
> 
> 时间：2012-04-07T06:20:06.323
> 
> 标签：spring, mongodb, spring-data

具有 BigInteger id 的 MongoDB 的 Spring Data 仍在生成字母数字 ObjectId。我想将数字序列作为 ID。如何配置此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:05:46.077

Spring Data MongoDB 尝试按照推荐的方式转换所有可以`ObjectId`偶然组成 s 的类型。如 MongoDB[参考文档](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers)中所述，这是因为它们允许在集群上创建稳定增加的 id。如果你真的需要线性 ids（1,2,3……不仅是稳定增加的），请使用一种类型`Long`并手动创建 ids。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:50:20.873

根据 springdata 文档：在 Java 类中声明为 BigInteger 的 id 属性或字段将使用 Spring Converter 转换为 ObjectId 并存储为

你到底想为_id代表什么？如果它只是一个大数字，使用 long 值将能够表示 64 位数字。如果您需要表示大于 64 位的值，那么它们必须在 mongo 中表示为 String 或 BinData，但不是 ObjectId，因为它是固定的 12 个字节。

# php - Foreach：获取所有值为“X”的键

> ID：10052284
> 
> 赞同：3
> 
> 时间：2012-04-07T06:20:18.627
> 
> 标签：php, arrays, foreach

假设我有一个这样的数组：

```
$array = array("a","b","c","d","a","a"); 
```

我想获取所有值为“a”的键。

我知道我可以使用`while`循环来获取它们：

```
while ($a = current($array)) {
    if ($a == 'a') {
        echo key($array).',';
    }
    next($array);
} 
```

**我怎样才能使用`foreach`循环来获取它们？**

我试过了：

```
 foreach ($array as $a) {
        if ($a == 'a') {
            echo key($array).',';
        }

    } 
```

我得到了

> 1,1,1,

作为结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T06:24:20.823

如果您想要特定值的所有键，我建议使用[`array_keys`](http://www.php.net/manual/en/function.array-keys.php), 使用可选`search_value`参数。

```
$input = array("Foo" => "X", "Bar" => "X", "Fizz" => "O");
$result = array_keys( $input, "X" ); 
```

`$result`变成哪里

```
Array ( 
  [0] => Foo 
  [1] => Bar 
) 
```

如果你想使用 a `foreach`，你可以遍历每个键/值集，当它的值与你的搜索匹配时，将键添加到一个新的数组集合中：

```
$array = array("a","b","c","d","a","a");
$keys = array();

foreach ( $array as $key => $value )
  $value === "a" && array_push( $keys, $key ); 
```

`$keys`变成哪里

```
Array ( 
  [0] => 0 
  [1] => 4 
  [2] => 5 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:27:29.840

您可以使用以下内容打印出具有特定值的键

```
 foreach ($array as $key=>$val) {
        if ($val == 'a') {
            echo $key." ";
        }

    } 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:41:11.270

利用

```
foreach($array as $key=>$val)
{
  //access the $key as key.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T06:41:37.997

这是一个更简单的过滤器。

```
$query = "a";
$result = array_keys(array_filter($array,
    function($element)use($query){
        if($element==$query) return true;
    }
)); 
```

# jquery - 仅显示最新推文并添加指向 JSON Array / Twitter Stream 代码结果的链接

> ID：10052287
> 
> 赞同：0
> 
> 时间：2012-04-07T06:20:33.603
> 
> 标签：jquery, json, twitter, stream

我正在使用此代码从客户端连接到 Twitter Stream（我需要坚持使用此方法，请不要提供替代方法） - 我正在尝试了解如何将结果限制为仅显示一条推文（最新一）。现在它显示了结果中的所有推文。我编辑了搜索 URL 中的主题标签和用户名，如果有人想帮助我，请插入您自己的。这是代码：

```
<div id="tweet_stream">
Loading #Apple tweets...
</div>
<script type="text/javascript">
jQuery(function(){
// Execute this code when the page is ready to work
// Create a Script Tag
 var script=document.createElement('script');
 script.type='text/javascript';
 script.src= "http://search.twitter.com/search.json? q=%23HASHTAGHERE+from:USERNAMEHEREr&callback=processTheseTweets&_="+ new Date().getTime();
 // Add the Script to the Body element, which will in turn load the script and run it.
 $("body").append(script);
 });

 function processTheseTweets(jsonData){
 var shtml = '';
 var results = jsonData.results;
  if(results){
 // if there are results (it should be an array), loop through it with a jQuery function
  $.each(results, function(index,value){
  shtml += "<p class='title'><span class='author'>" + value.from_user + "</span>: " +
  value.text + "<span class='date'>" + value.created_at + "</span></p>";
  });

 // Load the HTML in the #tweet_stream div
  $("#tweet_stream").html( shtml );
  }
 }
 </script> 
```

我还试图让最终结果显示推文的 HTML 版本，以便显示链接。做这些事情的任何帮助都会非常棒！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:27:12.453

您正在 $.each() 中创建结果数组的每个元素的 html 并将其附加到 shtml 变量中。无需遍历结果，只需找出最新推文的索引即可。它可能是第一个元素（索引 0）、最后一个元素（索引 results.length-1）或其他基于您的逻辑的元素。

```
var index = 0; //suppose its first element.
var value = results[index];
shtml = "<p class='title'><span class='author'>" + value.from_user + "</span>: " + value.text + "<span class='date'>" + value.created_at + "</span></p>";
$("#tweet_stream").html( shtml ); 
```

现在你有了tweet的html版本。如果要显示，请使用 text() 而不是 html()。

```
$("#tweet_stream").text( shtml ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:52:14.617

您为什么不将 api 限制为仅提供 1 条推文，而不是获取所有推文并显示 1 条推文？

将网址更改为此，

```
script.src= "http://search.twitter.com/search.json?q=%23HASHTAGHERE+from:USERNAMEHEREr&callback=processTheseTweets&rpp=1&_="+ new Date().getTime(); 
```

即设置rpp（每页结果）为1

# android - 如何在 Android 中使用 Url 播放视频

> ID：10052289
> 
> 赞同：0
> 
> 时间：2012-04-07T06:20:46.333
> 
> 标签：android, android-videoview

**我想使用 Url 播放视频，但它显示对话框消息无法播放视频。**

这是我的代码。

```
VideoView video;
getWindow().setFormat(PixelFormat.TRANSLUCENT);
video.setMediaController(new MediaController(VideoActivity.this));
video.setVideoPath(path);
video.requestFocus();
video.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T21:18:29.283

您确定 Uri 输入正确吗？这就是我之前无法播放对话框消息的原因

# delphi - 组件可以用它自己的处理程序替换它的所有者表单的事件（OnClose）吗？

> ID：10052290
> 
> 赞同：1
> 
> 时间：2012-04-07T06:20:53.093
> 
> 标签：delphi, components, delphi-5

我正在研究一个放置在我项目的每种形式上的组件。是否可以在运行时让组件将代码包含到其所有者表单的 OnClose 事件处理程序中。换句话说，表单将触发它自己的 OnClose 事件处理程序，但组件还将包含额外的事件处理程序代码以在所有者表单的 OnClose 事件上运行。（这就是所谓的向量替换吗？）谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T06:39:53.033

您需要让组件声明一个字段来存储表单的原始`OnClose`. 然后您可以在组件的构造函数中执行以下操作：

```
FOriginalFormClose := (Owner as TForm).OnClose;
(Owner as TForm).OnClose := FormClose; 
```

然后组件`FormClose`将显示：

```
TMyComponent.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  // do stuff for this component
  if Assigned(FOriginalFormClose) then
    FOriginalFormClose(Sender, Action);
end; 
```

自然，`as`演员将这个组件与表单拥有联系在一起，但如果你想要更多的灵活性，你可以轻松地满足这一点。

这是对您提出的问题的直接回答，但如果不质疑您的整体设计，那将是我的失职。如果您希望组件存在于应用程序中的*每个*`TForm`表单上，那么您当然应该派生一个包含您的自定义项的子类。然后让您的应用程序中的每个表单都基于该通用基表单类。

这种方法还有许多其他好处。例如，@LachlanG 添加了以下非常恰当的评论，我完全同意：

> 不希望有一个组件干预它的拥有形式。绝大多数组件应该是自包含的实体，改变组件所有者会破坏 Delphi 组件的预期合同。

通用基本表单方法通过将与表单一起使用的代码放置在表单中来解决这个问题。

如果您确实走上了拥有通用基本表单的路线，那么您应该覆盖`DoClose`而不是使用该`OnClose`事件。`DoXXX`在创建公共基类或组件时，始终使用事件引发器而不是事件本身。

# ruby - 如何使用 Ruby 将数组转换为 64 位双 Mac 绝对时间？

> ID：10052298
> 
> 赞同：1
> 
> 时间：2012-04-07T06:21:56.170
> 
> 标签：ruby, arrays, macos, time, binary

是否可以将具有存储为每个元素的二进制或十六进制值的数组转换为 64 位双 Mac 绝对时间？`p var_bytes`当我使用控制台检查数组时显示以下输出。

```
\000\000\000\000\000\000\000\000\000\000\000\234\225x\266A\000\000\000\345\005\230\264 
```

是否可以将 64 位双 Mac 绝对时间中的上述数组元素转换为字符串？

我的代码只是一个简单的`do..end`

```
puts "\nClose off the page header#{y.unpack("n")}\n"
            z.scan(/(.{8})(.{8})(.{4})(.{4})(.{4})(.{4})(.{8})(.{8})(.{8})(.*\w)/m).each do |j,k,l,m,n,o,p,q,r,s|
                puts "\nContent1#{j.unpack("n")}\n"
                puts "\nContent2:#{k.unpack("n")}\n"
                puts "\nContent3:#{l.unpack("n")}\n"
                puts "\nContent4:#{m.unpack("n")}\n"
                puts "\nContent5:#{n.unpack("n")}\n"
                puts "\nContent6:#{o.unpack("n")}\n"
                puts "\nContent7:#{p.unpack("n")}\n"
                expdt = Time.at((q.unpack("L"))[0])
                createdt = Time.at((r.unpack("L"))[0])
                puts "Date1:\n#{expdt}\n"
                puts "\nDate2:\n#{createdt}\n"
                puts "\nCookie:\n"
                puts s.split(/\0/m)
            end
        end 
```

将这个负值转换为正值的简单方法是什么，以便 Time.at 不会给出错误，然后根据 MA​​C Epoch 时间进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:14:03.237

Try this:

```
MAC_EPOCH = Time.gm(2001,1,1)

def bin2time(bin)
    return MAC_EPOCH + (bin.unpack "D")[0]
end 
```

where `bin` is an 8-byte representation of a double precision float.

you may need to change "D" to "E" or "G" depending on where you are getting your data from. check the [`unpack`](http://railsapi.com/doc/ruby-v1.9.2/classes/String.html#M000811) docs for details.

# solr - solr 多值字段和词频奇怪的行为

> ID：10052302
> 
> 赞同：1
> 
> 时间：2012-04-07T06:23:08.233
> 
> 标签：solr, full-text-search

omitTermFreqAndPositions="true" on solr 多值字段

对我来说很奇怪，我禁用了术语频率重新索引并且 solr 仍然计算 tf 等于与查询匹配的单词数。为什么会发生这种情况？为什么这适用于单值字段而不适用于多值字段？它与 lucene 索引中的串联存储方式不同吗？

# android - IntelliJ IDEA 没有正确形成 Android 项目层次结构？

> ID：10052305
> 
> 赞同：2
> 
> 时间：2012-04-07T06:23:20.557
> 
> 标签：android, intellij-idea

[我在IntelliJ 社区论坛](http://devnet.jetbrains.net/thread/435429)上发布了这个问题，但似乎他们不是很活跃，所以我就在 S/O 上发布它。

我是 IntelliJ 的新手，我正在从 Eclipse 切换到使用它，这确实是错误的，对我的需求没有用处。但是，我正在尝试在 IntelliJ Idea 中构建一个 Android 项目，它只是创建一个 .idea 文件夹和 src 目录，其中没有任何内部文件。我已经正确安装了 Android-SDK，并且我正在使用 JDK 1.7，我什至按照指示从 IntelliJ Wiki 正确启动 Android 项目（[在此处找到）](http://wiki.jetbrains.net/intellij/Simple_Android_application_from_scratch_in_IntelliJ_IDEA_10.5)) 但它仍然导致我没有成功。好像我的程序中已经安装了 Android 支持插件，但我又不太确定。我可以得到一些帮助，这样我就不必再次恢复到 Eclipse 了吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:28:19.480

尝试删除 Android SDK 并重新安装，然后至少下载一个平台。IDEA 运行 SDK 工具来创建 Android 项目模板，由于某种原因它在您的系统上失败。

检查它是否适用于 JDK 1.6。

请参阅我刚刚录制[的截屏视频。](http://www.screenr.com/dWd8)

# android - 如何在 Android 中仅获取 TTS 语言环境

> ID：10052306
> 
> 赞同：2
> 
> 时间：2012-04-07T06:23:21.127
> 
> 标签：android, locale, text-to-speech

我可以使用以下代码获取语言环境

```
Locale.getAvailableLocales(); 
```

它正在设备中获得大量可用的语言环境。我正在寻找仅适用于 TTS 的语言环境。

我发现的另一个选项是使用以下功能进行交叉检查，我不愿意使用以下代码检查所有可用的语言环境。

```
mTts.isLanguageAvailable(localeLang) 
```

任何人都可以建议我获得仅 TTS 语言环境的最佳方法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:48:07.270

没有用于此的 API。此外，支持的语言环境是特定于 TTS 引擎的，因此不存在“设备上可用的 TTS 语言环境”之类的东西。您可以检查当前（或默认）TTS 引擎支持的语言环境，但不能同时检查所有引擎。您需要支持多少个语言环境，为什么调用`isLanguageAvailable()`有问题？

# php - 在php中查找括号的快速方法

> ID：10052310
> 
> 赞同：1
> 
> 时间：2012-04-07T06:24:14.723
> 
> 标签：php, regex, parsing

我有一个这样的字符串： (...1 (...2 DS(...3 ( ...4 ) ) ) )

如果我不知道 DS 结束前有多少括号，那么在 DS 括号中查找数据的最佳方法是什么？(3, 4) 就像数学一样：将 ds 乘以 3 和 4 括号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T06:40:33.607

它不能通过正则表达式来完成。它不是一种[常规语言](http://en.wikipedia.org/wiki/Regular_language)。它的一般解析。

```
$data  = '(...1 (...2 DS(...3 ( ...4 ) 5) )6 )';
$num   = array();
$start = strpos($data, 'DS') + strlen('DS');
$end   = strlen($data) - 1;
$paren = 0;
for ($i = $start;$i <= $end;$i++) {
    $n = $data[$i];
    if ($n == '(') $paren++;
    if ($n == ')') $paren--;
    if ($paren >= 0 && is_numeric($n)) {
        $num[] = $n;
    }
}
print_r($num); 
```

**输出**

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 5
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T06:35:58.727

使用正则表达式是不可能的。正则表达式无法保存有多少开括号......

你应该用 php 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T06:39:13.677

这可以用吗？

```
preg_match_all('/DS\(...(\d)+ \)?\(?[DS]?/', $subject, $result, PREG_PATTERN_ORDER);
$result = $result[0]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-07T06:36:22.520

使用函数 substr 从 DS 出现的地方取出子字符串，并从中取出数据。要获取数据，只需解析保留左括号计数的子字符串。当右括号开始时，记下它们的数量。当这个计数和之前的计数相等时，你就得到了你的数据。

# apache - IIS 服务器和 Apache 服务器

> ID：10052312
> 
> 赞同：2
> 
> 时间：2012-04-07T06:24:28.623
> 
> 标签：apache, iis, solr

我正在为 solr 运行 Tomcat Apache 服务器，并且我的 Web 界面基于 IIS。我想知道我是否有可能在同一台机器上同时运行 IIS 和 Tomcat 服务器并相互运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:28:01.603

在不同的端口上运行它们，你应该很高兴。您可以通过以下端口访问它们：

```
localhost:80/myIISSite or localhost/myIISSite (default http port)

localhost:8080/myApacheWebsite 
```

[配置 apache 以侦听特定端口](http://httpd.apache.org/docs/2.2/bind.html)

对于 IIS：

1.  打开 IIS 管理器。
2.  打开默认网站的属性窗口。
3.  选择网站选项卡。
4.  在网站标识下，您可以更改默认的 80 端口，也可以单击高级选项卡，然后可以更改默认的 80 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:28:17.323

是的，购买他们将不得不使用不同的端口。安装一个并在标准端口（http 为 80，https 为 443）上启动它，然后安装并配置另一个以在另一组端口上启动。

# jquery - qTip2 IE8 圆角

> ID：10052315
> 
> 赞同：0
> 
> 时间：2012-04-07T06:25:16.130
> 
> 标签：jquery, internet-explorer-8, tooltip, rounded-corners, qtip2

我在我的应用程序中使用[qTip2](http://craigsworks.com/projects/qtip2/)。我通过以下 jQuery 实现的 tooptipfication：

```
$(this).qtip({
        style: {
            tip: {
                corner: true,
                width: 10,
                height: 5
            },
            classes: 'ui-tooltip-rounded ui-tooltip-shadow ui-tooltip-tipsy'
        },
        position: {
            my: 'bottom left',
            at: 'top right',
            adjust: {
                x: -10,
                y: 0
            }
        },
        events: {
            show: function (event, api) {
                $('.ui-tooltip-content').addClass('ui-tooltip-center');
            }
        },
        show: {
            effect: function (offset) {
                $(this).show();
            }
        },
        hide: {
            effect: function (offset) {
                $(this).hide();
            }
        }
}); 
```

现在它正在渲染：

*   火狐：![在此处输入图像描述](../Images/ec223e7bf8b70c1aa9073d8e3aaf383a.png)
*   IE8：![在此处输入图像描述](../Images/3a238c760ff8d93844f7d68005c859c6.png)

如您所见，圆角在 IE8 中消失了；x, y 的尖端的调整也不起作用。我正在为 qTip2 的这个特殊问题寻找解决方案。有没有办法解决这个问题？

有没有更好的Tooptip 库没有这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:39:37.193

IE8 不支持`border-radius`属性，因此您不能在 qtip 中使用圆角。这是图书馆网站上的一篇文章，作者回复说它不受支持，他不想过度设计像 qtip 这样微不足道的东西。

[http://craigsworks.com/projects/forums/thread-rounded-corners-with-ie8-possible](http://craigsworks.com/projects/forums/thread-rounded-corners-with-ie8-possible)

# python - Python 类和集合

> ID：10052322
> 
> 赞同：1
> 
> 时间：2012-04-07T06:26:37.503
> 
> 标签：python, list

这是一个最佳实践问题

假设，我有一个类对象，如下所示：

```
class ClassOfObjects:
     def __init__(self, name):
       self.name = name
     ... 
```

可以说，我实例化了其中的 3 个对象

```
a = ClassOfObjects('one')
b = ClassOfObjects('two')
c = ClassOfObjects('three') 
```

现在，我想创建我的对象列表。一种明显的方法是创建列表对象

```
ListOfObjects = [a,b,c] 
```

我发现这是限制性的。特别是当我尝试搜索具有特定对象的对象时。有没有人知道任何最佳实践。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T06:42:26.633

您可以让每个实例在创建时向类注册自身：

```
class K(object):
     registry = {}
     def __init__(self, name):
         self.name = name
         self.registry[name] = self 
```

然后`K.registry`是您创建的所有实例的字典，名称为键。您甚至不需要将实例分配给变量，因为它可以通过注册表访问。您还可以轻松地迭代实例。

也许如果您分享有关您的用例的更多信息，有人可以提供更好的选择。

# c - MiniDumpWriteDump 段错误？

> ID：10052325
> 
> 赞同：2
> 
> 时间：2012-04-07T06:27:12.510
> 
> 标签：c, segmentation-fault, minidump, minidumpwritedump

我正在尝试转储一个进程，比如说`calc.exe`

当我运行我的程序时，我得到

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000401640 in MiniDumpWriteDump () 
```

这是代码

```
#include <windows.h>
#include <dbghelp.h>

int main(){
    HANDLE hFile = CreateFileA(
        "calc.dmp",
        GENERIC_READ | GENERIC_WRITE,
        FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
        NULL,
        CREATE_ALWAYS,
        FILE_ATTRIBUTE_NORMAL,
        NULL
    );

    DWORD procID = 196;

    HANDLE hProc = OpenProcess(
        PROCESS_ALL_ACCESS,
        FALSE,
        procID
    );

    MiniDumpWriteDump(
        hProc,
        procID,
        hFile,
        MiniDumpWithFullMemory,
        NULL,
        NULL,
        NULL
    );

    CloseHandle(hFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:17:18.447

您的示例适用于 32 位和 64 位窗口，但必须使用相同的“位”进行编译（64 位在 64 位 Windows 上，32 位在 32 位 Windows 上）。

我只添加了一个窗口枚举和一种提供 procID 作为参数的方法。应该检查返回值的函数是否有错误。

```
#include <windows.h>
#include <dbghelp.h>
#include <stdio.h>
#define TRYTO(b,a) if (!(a)) { \
fprintf(stderr,"Unable to " b "\n"); exit(1);}
static BOOL CALLBACK FunkyCallback(HWND hWnd, LPARAM lParam ){
    char b[100]; RECT Rect;
    DWORD pid;
    if(!GetParent(hWnd)){
        GetWindowText(hWnd, b, 99); GetWindowRect(hWnd,&Rect);
        GetWindowThreadProcessId(hWnd, &pid);
        printf("%li: %s left:%li top:%li\n",pid,b,Rect.left,Rect.top);
    }
    return TRUE;
}
int main(int argc, char ** argv){
    HANDLE hFile;
    DWORD procID;
    HANDLE hProc;
    if (argc > 1){
        TRYTO("create file",(
            hFile = CreateFile(
                "proc.dmp",
                GENERIC_READ | GENERIC_WRITE,
                FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
                NULL,
                CREATE_ALWAYS,
                FILE_ATTRIBUTE_NORMAL,
                NULL
            ))!=INVALID_HANDLE_VALUE);
        DWORD procID = atoi(argv[1]);
        TRYTO("open process",(
            hProc = OpenProcess(
                PROCESS_ALL_ACCESS,
                FALSE,
                procID
            )));
        TRYTO("write dump",(
            MiniDumpWriteDump(
                hProc,
                procID,
                hFile,
                MiniDumpNormal,
                NULL,
                NULL,
                NULL
            )));
        fprintf(stderr,"Successfully created proc.dmp.\n",argv[0]);
        CloseHandle(hFile);
    } else { 
        EnumChildWindows(GetDesktopWindow(),FunkyCallback, 0);
        fprintf(stderr,"Usage: %s procID\n",argv[0]);
    }
} 
```

## 编译笔记

[使用Mingw64](http://sourceforge.net/projects/mingw-w64)在 Linux 上测试。 [Fedora Linux 在这里有软件包](http://fedoraproject.org/wiki/MinGW/CrossCompilerFramework#Development_and_testing_repository)。我将 64 位`dbghelp.dll`从 Windows Server 2008 Windows/system32 复制到源文件夹。`objdump -f`可以确认dll是64位还是32位。编译行类似于

```
/usr/bin/x86_64-w64-mingw32-gcc dmp.c -L. -l dbghelp -o dmp.exe 
```

## 链接

*   [链接到 Windows 上的 .DLL](https://stackoverflow.com/questions/9522834)
*   [葡萄酒](http://appdb.winehq.org)
*   [使用 MingW 链接到 DLL](http://mingw.org/wiki/CreateImportLibraries)
*   [C FAQ 系统依赖](http://lysator.liu.se/c/c-faq/c-16.html#16-11)

# javascript - 使用 JavaScript 跟踪值

> ID：10052334
> 
> 赞同：1
> 
> 时间：2012-04-07T06:28:55.237
> 
> 标签：javascript, asp.net, google-analytics

在 A 页

```
 test.Controls.Add(GetButton(thisReader["session_name"].ToString(), "Join Session"));

Response.Redirect("EnterSession.aspx?session=" + e.CommandArgument.ToString()); 
```

在 B 页

```
 _gaq.push(['pageTrackerTime._trackEvent', 'category', 'action', document.location.href, roundleaveSiteEnd]); 
```

当用户单击页面 A 上的按钮时，他将被定向到页面 B 并且我使用 document.location.href 来跟踪当前 URL。现在我也想使用 JavaScript 从页面 A 跟踪 session_name。

我怎样才能做到这一点

原来的代码是这样的

```
SqlCommand thisCommand = thisConnection.CreateCommand();
                thisCommand.CommandText = "SELECT * FROM Tmyapp_Session;";
                SqlDataReader thisReader = thisCommand.ExecuteReader();

                while (thisReader.Read())
                {
                    test.Controls.Add(GetLabel(thisReader["session_id"].ToString(), thisReader["session_name"].ToString()));
                    string[] compare = secondResult.Split(';');
                    foreach (string word in compare)
                    {
                        if (word == thisReader["session_id"].ToString())

                        {
                            test.Controls.Add(GetButton(thisReader["session_id"].ToString(), "Join Session")); 
```

我不得不将最后一个代码更改为

```
test.Controls.Add(GetButton(thisReader["session_name"].ToString(), "Join Session")); 
```

`session_id`至`session_name`

因为我想通过 url 获得 session_name 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:03:47.140

看起来您只需要从查询字符串中获取 session_name 即可。[在这里](https://stackoverflow.com/a/901144/1254874)查看这篇文章，它有几个很好的解决方案。

我看到了两种完成你想要的方法，你可以添加另一个查询字符串

```
/url.aspx?session_name=[session_name]&session_id=[session_id] 
```

或在会话变量中

```
session["session_id"] = session_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:42:25.840

```
<HTML>
  <HEAD>
  <SCRIPT LANGUAGE="JavaScript">
      // include getCookie and setCookie functions here
    </SCRIPT>
  </HEAD>
  <BODY>
    <SCRIPT LANGUAGE="JavaScript">
      var username = getCookie("username");
      if (username != null) { // registered user
        document.writeln("Welcome back " + 
          username + ".");
        var visits = getCookie("visits");
        document.writeln(" You have been here " +
          visits + " time(s) before.");
        setCookie("visits",parseInt(visits)+1);
      }
      else {                  // new user
        var username = prompt("What is your name ?","");
        if (username != null) {
          setCookie("username",username);
          setCookie("visits",1);
          document.writeln("Thank you. Please reload this page.");
        }
      }
    </SCRIPT>
  </BODY>
</HTML> 
```

希望这会奏效！

# adobe - 在 Photoshop 中的图层上显示轮廓

> ID：10052338
> 
> 赞同：9
> 
> 时间：2012-04-07T06:29:21.013
> 
> 标签：adobe, photo, photoshop, layer

这一定是一个非常菜鸟的问题，但通过谷歌搜索，我得到了不同的答案。

我只希望通过图层面板单击任何图层时，所有图层之间必须有选择轮廓，即选择了哪个图层。

我已经使用了 Adob​​e 烟花，在其中我可以通过单击它轻松地看到选定的图层。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T06:37:35.107

**在 Windows Photoshop cs5 上。**

```
View->Show->Layer Edges 
```

当您选择一个图层时，它现在将以蓝色显示边缘。您可以选择多个图层以查看多个轮廓。

也稍微偏离主题，但如果您想直接在画布上单击以选择类似于 Fireworks 所做的项目。您可以选择移动工具，然后单击屏幕顶部的“**自动选择”选项。**如果要选择单个图层，请将下拉菜单更改为“**图层**”而不是“**组”。**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-07T11:33:50.637

您可以通过 `ctrl`+*单击*我在下面突出显示的图层缩略图来执行此操作（在 Mac 上*单击*`cmd`+ ）

 *![高亮区域：图层缩略图](../Images/2b7c1d53cd935509d255b14f88239b3e.png)

**不要点击图层名称，**它会选择图层，但不会显示轮廓。在单击之前，您的光标应该是带有轮廓的手。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T06:39:44.103

您可以 ctrl+单击一个图层来选择它。这可以帮助可视化它的所有不透明区域/覆盖范围。（请注意，可能不会显示不透明度低的像素）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-18T15:48:50.080

仅对于形状，当您看到形状的轮廓时，您可以执行一个很好的技巧，即按 Ctrl + Enter（如果您没有看到它，Ctrl + H 将显示它）。对于 Mac，快捷键是 Cmd + Enter。*

# android - ANDROID：将数组列表中的项目添加到 AlertDialog

> ID：10052351
> 
> 赞同：2
> 
> 时间：2012-04-07T06:32:44.123
> 
> 标签：android

我正在尝试将数组列表的内容添加到 AlertDialog，但出现错误：

```
java.lang.IllegalStateException: Could not execute method of the activity 
```

这是我遇到问题的代码片段：

```
 public void ShowOnlineUserDialog(){
     CharSequence[] users = {_onlineUsers.get(1), _onlineUsers.get(2),    _onlineUsers.get(3), _onlineUsers.get(4)};
     AlertDialog.Builder onlineUser = new AlertDialog.Builder(this);
     onlineUser.setTitle("Online Users");
     onlineUser.setItems(users, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            System.out.println("User clicked!");

        }
    });
     onlineUser.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();

        }
    });
     onlineUser.show();
 } 
```

此外，是否有更有效的方法可以添加到警报框，for 循环？我很抱歉，但我缺乏数组知识让我失望。

任何帮助都会很棒！谢谢！

编辑：如果我这样设置我的代码：

```
 String user1 = _onlineUsers.get(1);
     String user2 = _onlineUsers.get(0);

     CharSequence[] users = {user1, user2}; 
```

它工作得很好，但我想找到一种更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T06:52:16.223

你可以这样做：

取而代之`String[] users`_`CharSequence[] users`

并像下面这样：

```
users = new String[_onlineUsers.size()];
System.out.println("Total Item is: "+_onlineUsers.size());
users = _onlineUsers.toArray(users);
System.out.println("USERS :"+_onlineUsers.toArray(users)); 
```

这会将您的整体转换`ArrayList<String> _onlineUsers`为`String[] users`.

希望它会帮助你。

如果它不能解决您的问题，请随时提出任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:59:20.510

您的代码是正确的并且没有错误。我认为你必须检查它 -

```
CharSequence[] users = {_onlineUsers.get(1), _onlineUsers.get(2),    _onlineUsers.get(3), _onlineUsers.get(4)}; 
```

检查它是否能够从中获取字符串。

# php - 使用 .htaccess 重写 URL 不传递参数

> ID：10052357
> 
> 赞同：0
> 
> 时间：2012-04-07T06:34:01.397
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我正在使用 php。我想将每个请求重定向到 index.php 文件并在那里访问参数，例如，mysite.com/a 应该重定向到 mysite.com/index.php?id=a 以便我可以使用代码访问参数$_GET["id"], 为此，我使用以下代码创建了一个 .htaccess 文件。

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule [a-z] index.php?id=$1 [NC] 
```

注意：这里我正在考虑使用小写字母的每个请求。

我正在尝试访问我的 index.php 文件中的 id，如下所示：

```
<?php
echo "sample redirection: <br/>";
echo $_GET["id"];
?> 
```

这是重定向但不传递参数。所以我的输出是这样的：

```
sample redirection: 
```

它不打印参数。帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:35:41.897

后面需要一个美元符号`[a-z]`。

```
RewriteRule ([a-z])$ index.php?id=$1 [NC] 
```

请注意，它`[a-z]`只会匹配一个字母。要匹配任何字符串，请使用：

```
 RewriteRule ([a-z]*)$ index.php?id=$1 [NC] 
```

# jquery - 如何在单击带有href的锚标记时将焦点设置在不同的元素上

> ID：10052364
> 
> 赞同：2
> 
> 时间：2012-04-07T06:35:08.180
> 
> 标签：jquery, html, anchor

当有人单击链接时，我想将焦点设置在父 div 上我怎么能

```
<li class="active">
    <a href="#about">Link to the parent div</a>
</li>

<div id="#parent">
    <div id="about">dummy data</div>
    <div id="news">dummy data</div>
</div> 
```

[http://jsfiddle.net/bipin000/PGzwc/](http://jsfiddle.net/bipin000/PGzwc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:41:12.797

只需使用`document.getElementById('parent').focus()`. 请参阅[更新的 jsFiddle](http://jsfiddle.net/PGzwc/2/)。

但是当 div 获得焦点时应该发生什么？Divs 在获得焦点时不会改变任何东西！

编辑：
如果您希望在单击时`<a>`将文档滚动到顶部`parent`，这就是您需要的：`document.body.scrollTo(0, document.getElementById('parent').offsetTop); return false;`请参阅[再次更新的 jsFiddle](http://jsfiddle.net/PGzwc/8/)。

但如果这也不是你想要的，那就直说吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:38:07.370

动画jQuery解决方案：

[http://jsfiddle.net/PGzwc/5/](http://jsfiddle.net/PGzwc/5/)

```
$('a').click( function(e) {
    e.preventDefault();       
    $('body').animate( { scrollTop: $('#parent').offset().top }, 'slow');
});​ 
```

只是改变

```
<a href="#about">Home</a>  
          to 
<a href="#parent">Home</a> 
```

该`#`标签告诉浏览器搜索带有该标签的元素`id`并将其带到页面顶部。

# ruby - 试图让 xauth 与 Ruby 和可读性 API 一起工作

> ID：10052365
> 
> 赞同：1
> 
> 时间：2012-04-07T06:35:19.680
> 
> 标签：ruby, oauth, readability, xauth

我想通过[Readit gem](https://github.com/29decibel/readit)使用 Readability API ；但是，我在尝试通过 XAuth 获取访问令牌时遇到了一些麻烦。这是我的代码：

```
require 'highline/import'
require 'yaml'
require 'oauth'
require 'readit'

config = YAML.load_file("config/readability.yaml")
uname = ask ("Username: ") 
passwd = ask ("Password: ") {|q| q.echo = false}

consumer = OAuth::Consumer.new(config["-consumer_key"], config["-consumer_secret"], :site => "https://www.readability.com/api/rest/v1/oauth/access_token/")
access_token = consumer.get_access_token(nil, {}, {:x_auth_mode => 'client_auth', :x_auth_username => uname, :x_auth_password => passwd}) 
```

但是，当我尝试运行它时，我得到以下信息：

```
/Users/mike/.rvm/gems/ruby-1.9.3-p125/gems/oauth-0.4.5/lib/oauth/consumer.rb:219:in `token_request': 404 NOT FOUND (OAuth::Unauthorized)
from /Users/mike/.rvm/gems/ruby-1.9.3-p125/gems/oauth-0.4.5/lib/oauth/consumer.rb:109:in `get_access_token'
from instab.rb:11:in `<main>' 
```

有人可以向我解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:23:10.923

你应该写如下：

```
consumer = ::OAuth::Consumer.new(Readit::Config.consumer_key,Readit::Config.consumer_secret,:site=>"https://www.readability.com/", :access_token_path => "/api/rest/v1/oauth/access_token/") 
```

# c# - 两个 ArrayList 操作

> ID：10052369
> 
> 赞同：0
> 
> 时间：2012-04-07T06:35:29.710
> 
> 标签：c#, asp.net, arraylist

我在 Session 中有一个 ArrayList，比如说`[305,306,380]`。

提交时，用户选择我将它们保存在第二个数组中的其他产品，例如`[390,305,480,380]`

我怎样才能在哪里制作另外三个数组

1.  所有新值`[390,480]`

2.  两个列表中的所有值`[305,380]`

3.  list1 中不在 list2 中的所有值`[306]`

我在 ASP.NET 4.0 C# 中需要这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T06:52:00.430

您可以使用[`ArrayList.ToArray()`](http://msdn.microsoft.com/en-us/library/fcyyh2hb.aspx)针对您的数组列表获取数组。然后使用 LINQ，您可以通过[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)方法轻松获得所需的内容[`Intersect`](http://msdn.microsoft.com/en-us/library/bb355408.aspx)，例如

```
array2.Except(array1)
array1.Except(array2)
array1.Intersect(array2) 
```

**编辑：完整代码**

根据您的要求，您的代码可能如下所示；

```
 ArrayList arrayList1 = new ArrayList(new int[] { 305, 306, 380 });
        ArrayList arrayList2 = new ArrayList(new int[] { 390, 305, 480, 380 });

        int[] array1 = (int[])arrayList1.ToArray(typeof(int));
        int[] array2 = (int[])arrayList2.ToArray(typeof(int));

        //1\. All New values
        int[] uniqueInArray2 = array2.Except(array1).ToArray();

        //2\. Common values
        int[] commonValues = array1.Intersect(array2).ToArray();

        //3\. Values of arrayList1 which are not in arrayList2
        int[] uniqueInArray1 = array1.Except(array2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T06:42:41.887

按以下方式使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)：

```
var first = new HashSet<int>();
first.Add(...);

var second = ...;

1\. second.ExceptWith(first);
2\. first.IntersectWith(second);
3\. first.ExceptWith(second); 
```

# pointers - 在 Ada 中根据关键字创建对象并调用它们的方法

> ID：10052371
> 
> 赞同：2
> 
> 时间：2012-04-07T06:35:56.683
> 
> 标签：pointers, ada

这是我的问题[here](https://stackoverflow.com/questions/9946382/implementing-an-abstract-function-with-access-types-in-ada)的后续行动。

我在程序中遇到了一个点，我觉得我无法继续使用当前的结构，所以我做了很多重写。`Statement`类型不再是抽象的，每个子类型都创建`Statement`自己`Statement`的变量实例。我还从 Statements 包中删除了抽象`execute`函数，因为编译器不喜欢这样（`execute`无论如何，每个子类型仍然有自己的方法）。该`execute`函数已更改为过程，因为必须修改传入的 Statement 类型。我将`statementFactory`（以前的 createStatement）移动到`Statement`包中。

这是我得到的错误：

```
statements-compoundstatements.adb:15:29: expected type "CompoundStatement" defined at statements-compoundstatements.ads:11
statements-compoundstatements.adb:15:29: found type "Statement'Class" defined at statements.ads:6 
```

我是 Ada 的初学者，但我的直觉是，因为`execute`程序在`CompoundStatements`（它是 Statements 的“子类”）中，所以它永远无法看到`execute`Statements 的另一个“子类”的方法。我能想到的唯一解决方案是将所有`execute`调用过程的过程转储`execute`到`Statement`包中，但这似乎是不可取的。但这仍然不能解释为什么`stmt.all`被用作类型`Statement'Class`而不是在`statementFactory`.

这是新代码：

```
package Statements is

   type Statement is tagged private;

   type Statement_Access is access all Statement'Class;
   ParserException : Exception;

   procedure createStatement(tokens : Vector; S : out Statement);
   procedure statementFactory(S: in out Statement; stmt: out Statement_Access);

--.....A bunch of other procedures and functions.....

private
   type Statement is tagged
      record
         tokens : Vector;
         executedtokens : Vector;
      end record;

end Statements; 
```

* * *

```
 procedure createStatement(tokens : Vector; S : out Statement) is
   begin
      S.tokens := tokens;
   end createStatement;

   procedure statementFactory(S: in out Statement; stmt: out Statement_Access) is
      currenttoken : Unbounded_String;
      C            : CompoundStatement;
      A            : AssignmentStatement;
      P            : PrintStatement;

   begin
      currenttoken := getCurrentToken(S);
      if currenttoken = "begin" then
         createStatement(S.tokens, C);
         stmt := new CompoundStatement;
         stmt.all := Statement'Class(C);
      elsif isVariable(To_String(currenttoken)) then
         createStatement(S.tokens, A);
         stmt := new AssignmentStatement;
         stmt.all := Statement'Class(A);
      elsif currenttoken = "print" then
         createStatement(S.tokens, P);
         stmt := new PrintStatement;
         stmt.all := Statement'Class(P);
   end statementFactory; 
```

* * *

```
package body Statements.CompoundStatements is

   procedure execute(skip: in Boolean; C: in out CompoundStatement; reset: out Integer) is
      stmt: Statement_Access;
      tokensexecuted: Integer;
      currenttoken : Unbounded_String;
   begin
      match(C, "begin");
      currenttoken := getCurrentToken(C);
      while(currenttoken /= "end") loop
         statementFactory(C, stmt);
         execute(skip, stmt.all, tokensexecuted); //ERROR OCCURS HERE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T08:46:46.150

你说“我还从 Statements 包中删除了抽象执行函数，因为编译器不喜欢那样”；但是您确实需要它，因为否则编译器如何知道当您调用`execute (skip, stmt.all, tokensexecuted)`any时，它`stmt.all`会提供一个`execute`供它分派的对象？

扩展类型不仅继承了其父类型的属性（因此每个`CompoundStatement`etc 已经具有`tokens`and `executedtokens`），它还继承了父类型的原始操作；如果父操作是`abstract`，则子操作必须提供自己的实现，否则，子操作可以提供自己的（覆盖）实现。

请参阅[Ada 95 Rationale](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p1-2.html#1)和[Wikibooks](http://en.wikibooks.org/wiki/Ada_Programming/Object_Orientation)以获得关于此的良好讨论。

# java - 安卓网络服务访问

> ID：10052378
> 
> 赞同：1
> 
> 时间：2012-04-07T06:37:51.333
> 
> 标签：java, android, web-services, axis2, ksoap2

我已经从 Android 2.2 访问了 Web 服务。完全没问题。我更改了 Android 4.0.3 的程序以访问相同的 Web 服务。但这不起作用。我的 Android 程序的代码

```
 import org.ksoap2.SoapEnvelope;
 import org.ksoap2.serialization.SoapObject;
 import org.ksoap2.serialization.SoapPrimitive;
 import org.ksoap2.serialization.SoapSerializationEnvelope;
 import org.ksoap2.transport.HttpTransportSE;

 import android.widget.TextView;
 import android.app.Activity;
 import android.os.Bundle;

 public class AndroidWSClientActivity extends Activity {

private static final String SOAP_ACTION = "http://ws.android4.com/";
private static final String METHOD_NAME = "sayHello";
private static final String NAMESPACE = "http://ws.android4.com/sayHello/";
private static final String URL = "http://175.157.45.91:8085/ForAndroid4/services/TestWs?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Thread networkThread = new Thread() {
    @Override
    public void run() {
       try {
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          
         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.setOutputSoapObject(request);

         HttpTransportSE ht = new HttpTransportSE(URL);
         ht.call(SOAP_ACTION, envelope);
         final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
         final String str = response.toString();

         runOnUiThread (new Runnable(){

          public void run() {
              TextView result;
               result = (TextView)findViewById(R.id.textView1);
               result.setText(str);
              }
           }

          } 

   catch (Exception e) {
            e.printStackTrace();
        }
    }
  };
}
} 
```

我也添加了互联网许可。该程序正确安装在模拟器上。但没有显示结果。没有任何错误显示。Eclipse 说没有使用“networkThread”。我该如何纠正这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:13:24.870

看起来您从未启动过networkThread。你会在 onCreate() 的最后需要这个：

```
networkThread.start(); 
```

话虽如此，您最好使用 AsyncTask 来做这种事情。我想一旦你掌握了窍门，你会发现它更容易。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 将指向函数的指针作为 in 参数而不声明任何特定委托类型的 C# 函数？

> ID：10052380
> 
> 赞同：1
> 
> 时间：2012-04-07T06:38:07.977
> 
> 标签：c#, delegates

我想实现一个可以在我的自定义类中找到东西的方法。它应该像通用集合一样工作——我将一个指针传递给一个函数，该方法将遍历它必须查看的所有内容，应用此函数，如果它返回 true，则返回找到的项目。

我想将函数指针作为参数传递，但我不想声明委托类型。

我知道我可以做类似的事情：

```
delegate bool Foo(MyClass)
MyClass MyMethod(Foo x)
{...} 
```

我知道我可以做这样的事情：

```
MyClass MyMethod(Func<MyClass,bool> x) 
```

但是我可以在不声明委托类型并且不使用诸如 Func<> 之类的内置东西的情况下做到这一点，它对我可以拥有的参数数量有限制（在 Func 的情况下，一个......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:18:35.773

您总是可以传入一个[Delegate](http://msdn.microsoft.com/en-us/library/y22acf51.aspx)并在其上调用[DynamicInvoke](http://msdn.microsoft.com/en-us/library/system.delegate.dynamicinvoke.aspx)：

```
MyClass MyMethod(Delegate x) {
    // ...
    x.DynamicInvoke(....);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:26:59.527

如果你愿意，你可以使用*委托*，虽然它有点老派:)

```
public void TestInvokeDelegate()
{
    InvokeDelegate( new TestDelegate(ShowMessage), "hello" );
}

public void InvokeDelegate(TestDelegate del, string message)
{
    del(message);
}

public delegate void TestDelegate(string message);

public void ShowMessage(string message)
{
    Debug.WriteLine(message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:40:12.623

看起来您正在尝试实现[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。在这种情况下，访问方法通常只有一个参数——要访问的实例。传递额外的参数会隐藏模式的使用，并使其更难推理。[本文](http://www.dofactory.com/Patterns/PatternVisitor.aspx)向您展示了在 C# 中实现它的一种方法。

关键是创建一个访问者类，它将封装所有影响访问过程的参数。这样，您不需要在访问方法中传递除了有问题的对象之外的任何东西——其他所有东西都存在于实例字段中。

但是，如果你真的想在方法中传递一些额外的参数并且不知道它们可以有什么类型，有办法做到这一点。.NET 世界中或多或少的标准方法是使用没有返回值且具有单个参数类型`object`的委托，例如[ParameterizedThreadStart 委托](http://www.dofactory.com/Patterns/PatternVisitor.aspx)：

```
public delegate void ParameterizedThreadStart(
    Object obj
) 
```

这样你就可以在委托中只传递一个参数，但它可以是任何东西——一个类的实例、一个数组或 null，如果你最终不需要额外的参数的话。这种方法的缺点是它需要类型转换，这会导致运行时错误。

# ravendb - 如何调试：ravendb 索引总是过时

> ID：10052381
> 
> 赞同：4
> 
> 时间：2012-04-07T06:38:19.707
> 
> 标签：ravendb

我正在使用 RavenDB 888 版。

我的客户端应用程序将数十万个文档插入 RavenDB。它工作正常。插入后，我的应用程序将从我预定义的静态索引中查询一些数据。我不想要过时的结果，所以我的应用程序会定期查询并等到索引是最新的。

不幸的是，今天我发现我的应用程序挂起（更准确地说，是一次又一次地查询 RavenDB），因为服务器总是告诉它索引仍然是陈旧的。这有点奇怪，因为上次插入很久以前就完成了——理论上服务器应该已经完成​​了索引。

我查看了管理工作室并检查了我最简单的索引，该索引对我的一种文档集合进行了一些计数。有趣的是，索引给出的计数是最新的（与我在管理工作室的“收藏”选项卡中看到的数字相同），但状态是“陈旧”。它的最后一次更新显示“6 小时前”。总而言之，我的索引中有一半是这样陈旧的，但根据工作室的说法，另一半是新鲜的。

我不知道为什么 RavenDB 会让它们变得陈旧，以及 RavenDB 现在在做什么。它的 CPU 使用率不高。如何调试场景？

更新：

我想我发现了一件事可能有助于找到根本原因。在将我的非陈旧索引与总是陈旧的索引进行比较之后，reduce 结果似乎很重要：陈旧索引在 reduce 结果中具有较大的 Value 属性，而最新索引具有较小的 Value 属性。

```
public class ReduceResult
{
    public string ID { get; set; }
    public string Key { get; set; }
    public long Value { get; set; } //This field seems to matter
} 
```

这是我的索引定义之一：

```
public class InternalPageCountIndex : AbstractIndexCreationTask<InternalPage, ReduceResult>
{
    public InternalPageCountIndex()
    {
        Map = posts => from post in posts
                       select new
                       {
                           Key = post.BatchID,
                           Value = 1
                       };

        Reduce = results => from result in results
                            group result by result.Key
                                into g
                                select new
                                {
                                    Key = g.Key,
                                    Value = g.Sum(c => c.Value)
                                };
    }
} 
```

顺便说一句，服务器日志看起来也很有趣。今天下午服务器认为没有工作要做：

*2012-04-07 16:36:44.6725,Raven.Database.Tasks.ReduceTask,Debug,Indexed 65 reduce keys in 00:00:03.5535907 with 493666 results for index SNRTotalByteSizeIndex, 2012-04-07 17:35:21.1888,Raven .Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5, for: ReducingExecuter, 将等待额外工作", 2012-04-07 17:35:21.1888,Raven.Database.Indexing.WorkContext,Debug "未找到工作，workerWorkCounter: 5，for：IndexingExecuter，将等待额外的工作"，2012-04-07 18:35:39.4759,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter : 5, for: ReducingExecuter, 将等待额外的工作”, 2012-04-07 18:35:39.4759,Raven.Database.Indexing.WorkContext,Debug,"未找到工作, workerWorkCounter: 5, for: IndexingExecuter, 将等待额外的工作”，2012-04-07 19:35:56.5994,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5，for：ReducingExecuter，将等待额外工作"，2012-04-07 19:35 :56.5994,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5，for：IndexingExecuter，将等待额外工作", 2012-04-07 20:36:12.3345,Raven.Database.Indexing .WorkContext,Debug,"未找到工作，workerWorkCounter: 5，for：ReducingExecuter，将等待额外工作", 2012-04-07 20:36:12.3345,Raven.Database.Indexing.WorkContext,Debug,"无工作被发现，workerWorkCounter: 5, for: IndexingExecuter, 将等待额外的工作”,将等待额外的工作”，2012-04-07 19:35:56.5994，Raven.Database.Indexing.WorkContext,Debug，“没有找到工作，workerWorkCounter：5，for：IndexingExecuter，将等待额外的工作”，2012 -04-07 20:36:12.3345,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5, for: ReducingExecuter, 将等待额外工作", 2012-04-07 20:36: 12.3345,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5，for：IndexingExecuter，将等待额外工作",将等待额外的工作”，2012-04-07 19:35:56.5994，Raven.Database.Indexing.WorkContext,Debug，“没有找到工作，workerWorkCounter：5，for：IndexingExecuter，将等待额外的工作”，2012 -04-07 20:36:12.3345,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5, for: ReducingExecuter, 将等待额外工作", 2012-04-07 20:36: 12.3345,Raven.Database.Indexing.WorkContext,Debug,"未找到工作，workerWorkCounter: 5，for：IndexingExecuter，将等待额外工作",ReducingExecuter, 将等待额外的工作”, 2012-04-07 20:36:12.3345,Raven.Database.Indexing.WorkContext,Debug,"没有找到工作, workerWorkCounter: 5, for: IndexingExecuter, 将等待额外的工作” ,ReducingExecuter, 将等待额外的工作”, 2012-04-07 20:36:12.3345,Raven.Database.Indexing.WorkContext,Debug,"没有找到工作, workerWorkCounter: 5, for: IndexingExecuter, 将等待额外的工作” ,*

但是当我今晚通过 Management Studio 查询 RavenDB 以查看有多少陈旧索引时，服务器开始执行 map/reduce！是的，下午和今晚之间没有插入，但是服务器在工作室查询后发现与索引有关...

*2012-04-07 21:23:16.9357,Raven.Database.Tasks.ReduceTask,Debug,Read 1 reduce keys in 00:03:05.6481176 with 505406 results for index InternalPageCountIndex,*

2012-04-07 21:23:19.5103，Raven.Database.Indexing.Index.Indexing，Debug，“批量索引/1 结果索引 PageCountMissingDescriptionIndex 给出了文档：__reduce_key I-：批次/1 键 IS：批次/1 值IS: 505406 Value_Range IS: 505406",

*2012-04-07 21:23:19.6797,Raven.Database.Indexing.Index.Indexing,Debug,Reduce 为减少键的 InternalPageCountIndex 生成 1 个条目：batchs/1, 2012-04-07 21:23:19.6797,Raven .Database.Tasks.ReduceTask,Debug,Indexed 00:00:02.7426449 中的 1 个减少键，索引 InternalPageCountIndex 的结果为 505406，*

根据工作室查询，服务器仍然告诉我一半的索引是陈旧的:(

![过时的索引](../Images/0090f464241dc07da5cc5cf69fd114ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:14:08.023

这是一个错误。

感谢 Ayende 和 RavenDB 团队，自构建 909 以来，此问题已得到修复。有关更多信息，请参阅[http://groups.google.com/group/ravendb/browse_thread/thread/13b16ce3f562472d](http://groups.google.com/group/ravendb/browse_thread/thread/13b16ce3f562472d)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:55:24.773

看起来您正在减少 BatchID，并且有很多具有相同批次 ID 的项目。这意味着对于每个唯一键，我们必须加载该唯一键的所有映射结果，在您的情况下，其中有 505,406 个，所以这需要时间。映射结果花费的时间相对较少。减少它们需要时间，因为我们需要减少大量数据。

# c++ - 包含 fstream.h 标头时出错

> ID：10052382
> 
> 赞同：1
> 
> 时间：2012-04-07T06:39:09.773
> 
> 标签：c++

我正在阅读一本 2001 年出版的《Data Structures and Algorithms in C++》一书，我认为从那时起，c++ 编译器应该发生了很大的变化，因为我发现书中的代码无法编译。

```
#include <fstream.h>
#include <string.h> 
```

所以我用谷歌搜索答案，并将代码更改为

```
#include <fstream>
#include <cstring>
using namespace std; 
```

但是当我尝试编译代码时，我遇到了一些我从未见过的错误：

```
oo@oo:~/raf$ g++ database.cpp personal.cpp student.cpp useDatabase.cpp -o useDatabase
In file included from /usr/include/c++/4.6/ios:45:0,
                 from /usr/include/c++/4.6/istream:40,
                 from /usr/include/c++/4.6/fstream:40,
                 from personal.h:4,
                 from student.h:1,
                 from student.cpp:1:
/usr/include/c++/4.6/bits/ios_base.h: In copy constructor ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’:
/usr/include/c++/4.6/bits/ios_base.h:788:5: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/include/c++/4.6/bits/basic_ios.h:64:11: error: within this context
In file included from /usr/include/c++/4.6/istream:41:0,
                 from /usr/include/c++/4.6/fstream:40,
                 from personal.h:4,
                 from student.h:1,
                 from student.cpp:1:
/usr/include/c++/4.6/ostream: In copy constructor ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’:
/usr/include/c++/4.6/ostream:57:11: note: synthesized method ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’ first required here 
In file included from student.cpp:1:0:
student.h: In function ‘std::ostream& operator<<(std::ostream&, Student&)’:
student.h:17:39: note: synthesized method ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’ first required here 
student.h:15:18: error:   initializing argument 1 of ‘std::ostream& Student::writeLegibly(std::ostream)’
student.cpp: At global scope:
student.cpp:24:10: error: prototype for ‘std::ostream& Student::writeLegibly(std::ostream&)’ does not match any in class ‘Student’
student.h:15:18: error: candidate is: std::ostream& Student::writeLegibly(std::ostream)
student.cpp: In member function ‘std::istream& Student::readFromConsole(std::istream&)’:
student.cpp:34:5: error: ‘cout’ was not declared in this scope
In file included from /usr/include/c++/4.6/ios:45:0,
                 from /usr/include/c++/4.6/ostream:40,
                 from /usr/include/c++/4.6/iostream:40,
                 from useDatabase.cpp:1:
/usr/include/c++/4.6/bits/ios_base.h: In copy constructor ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’:
/usr/include/c++/4.6/bits/ios_base.h:788:5: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/include/c++/4.6/bits/basic_ios.h:64:11: error: within this context
In file included from /usr/include/c++/4.6/iostream:40:0,
                 from useDatabase.cpp:1:
/usr/include/c++/4.6/ostream: In copy constructor ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’:
/usr/include/c++/4.6/ostream:57:11: note: synthesized method ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’ first required here 
In file included from useDatabase.cpp:2:0:
student.h: In function ‘std::ostream& operator<<(std::ostream&, Student&)’:
student.h:17:39: note: synthesized method ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’ first required here 
student.h:15:18: error:   initializing argument 1 of ‘std::ostream& Student::writeLegibly(std::ostream)’
oo@oo:~/raf$ 
```

我花了很多时间在谷歌上寻找答案，但得到了更多的错误。也许我应该注册一个 Github 帐户并在那里上传我的代码。

数据库.cpp

```
#include "database.h"

template<class T> Database<T>::Database() {
    cout << "File name: ";
    cin >> fName;
}

template<class T> void Database<T>::add(T& d){
    database.open(fName, ios::in|ios::out|ios::binary);
    database.seekp(0, ios::end);
    d.writeToFile(database);
    database.close();
}

template<class T> void Database<T>::modify(const T& d){
    T tmp;
    database.open(fName, ios::in|ios::out|ios::binary);
    while(!database.eof()){
        tmp.readFromFile(database);
        if (tmp == d){
            cin >> tmp;
            database.seekp(-d.size(), ios::cur);
            tmp.writeToFile(database);
            database.close();
            return;
        }
    }
    database.close();
    cout << "The record to be modified is not in the database\n";
}

template<class T> bool Database<T>::find(const T& d){
    T tmp;
    database.open(fName, ios::in|ios::binary);
    while(!database.eof()){
        tmp.readFromFile(database);
        if (tmp == d){
            database.close();
            return true;
        }
    }
    database.close();
    return false;
}

template<class T> ostream& Database<T>::print(ostream& out){
    T tmp;
    database.open(fName, ios::in|ios::binary);
    while(1){
        tmp.readFromFile(database);
        if (database.eof())
            break;
        out << tmp << endl;
    }
    database.close();
    return out;
}

template<class T> void Database<T>::run() {
    char option[5];
    T rec;
    cout << "1.Add 2.Find 3.Modify a record 4.Exit\n";
    cout << "Enter an option: ";
    cin.getline(option, 4);
    while (cin.getline(option, 4)){
        if (*option == '1'){
            cin >> rec;
            add(rec);
        }
        else if (*option == '2'){
            rec.readKey();
            cout << "The record is ";
            if (find(rec) == false)
                cout << "not ";
            cout << "in the database\n";
        }
        else if (*option == '3'){
            rec.readKey();
            modify(rec);
        }
        else if (*option != '4'){
            cout << "Wrong option\n";
        }
        else return;
        cout << *this;
        cout << "Enter an option";
    }
} 
```

数据库.h

```
#ifndef DATABASE
#define DATABASE
#include <fstream>
#include <iostream>
using namespace std;

template<class T> class Database{
    public:
        Database();
        void run();
    private:
        fstream database;
        char fName[20];
        ostream& print(ostream&);
        void add(T&);
        bool find(const T&);
        void modify(const T&);
        friend ostream& operator<<(ostream& out, Database& db) {
            return db.print(out);
        }
};
#endif 
```

个人.cpp

```
#include "personal.h"
#include <iostream>

Personal::Personal() : nameLen(10), cityLen(10) {
    name = new char[nameLen + 1];
    city = new char[cityLen + 1];
}

Personal::Personal(char *ssn, char *n, char *c, int y, long s) : nameLen(10), cityLen(10) {
    name = new char[nameLen + 1];
    city = new char[cityLen + 1];
    strcpy(SSN, ssn);
    strcpy(name, n);
    strcpy(city, c);
    year = y;
    salary = s;
}

void Personal::writeToFile(fstream& out) const {
    out.write(SSN, 9);
    out.write(name, nameLen);
    out.write(city, cityLen);
    out.write(reinterpret_cast<const char*>(&year), sizeof(int));
    out.write(reinterpret_cast<const char*>(&salary), sizeof(int));
}

void Personal::readFromFile(fstream& in) {
    in.read(SSN, 9);
    in.read(name, nameLen);
    in.read(city, cityLen);
    in.read(reinterpret_cast<char *>(&year), sizeof(int));
    in.read(reinterpret_cast<char *>(&salary), sizeof(int));
}

void Personal::readKey() {
    char s[80];
    cout << "Enter SSN: ";
    cin.getline(s, 80);
    strncpy(SSN, s, 9);
}

ostream& Personal::writeLegibly(ostream& out){
    SSN[9] = name[nameLen] = city[cityLen] = '\0';
    out << "SSN = " << SSN << ", name = " << name
        << ", city = " << city << ", year = " << year
        << ", salary = " << salary;
    return out;
}

istream& Personal::readFromConsole(istream& in){
    char s[80];
    cout << "SSN: ";
    in.getline(s, 80);
    strncpy(SSN, s, 9);
    cout << "Name: ";
    in.getline(s, 80);
    strncpy(name, s, nameLen);
    cout << "City: ";
    in.getline(s, 80);
    strncpy(city, s, cityLen);
    cout << "Birthyear: ";
    in >> year;
    cout << "Salary: ";
    in >> salary;
    in.getline(s, 80); //get '\n'
    return in;
} 
```

个人.h

```
#ifndef PERSONAL
#define PERSONAL

#include <fstream>
#include <cstring>
using namespace std;

class Personal {
    public:
        Personal();
        Personal(char*, char*, char*, int, long);
        void writeToFile(fstream&) const;
        void readFromFile(fstream&);
        void readKey();
        int size() const {
            return 9 + nameLen + cityLen + sizeof(year) + sizeof(salary);
        }
        bool operator==(const Personal& pr) const{
            return strcmp(pr.SSN, SSN) == 0;
        }

    protected:
        const int nameLen, cityLen;
        char SSN[10], *name, *city;
        int year;
        long salary;
        ostream& writeLegibly(ostream&);
        friend ostream& operator<<(ostream& out, Personal& pr){
            return pr.writeLegibly(out);
        }
        istream& readFromConsole(istream&);
        friend istream& operator>>(istream& in, Personal& pr){
            return pr.readFromConsole(in);
        }
};

#endif 
```

学生.cpp

```
#include "student.h"

Student::Student() : majorLen(10) {
    Personal();
    major = new char[majorLen + 1];
}

Student::Student(char *ssn, char *n, char *c, int y, long s, char *m): majorLen(11){
    Personal(ssn, n, c, y, s);
    major = new char[majorLen + 1];
    strcpy(major, m);
}

void Student::writeToFile(fstream& out) const {
    Personal::writeToFile(out);
    out.write(major, majorLen);
}

void Student::readFromFile(fstream& in) {
    Personal::readFromFile(in);
    in.read(major, majorLen);
}

ostream& Student::writeLegibly(ostream &out){
    Personal::writeLegibly(out);
    major[majorLen] = '\0';
    out << ", major = " << major;
    return out;
}

istream& Student::readFromConsole(istream& in){
    Personal::readFromConsole(in);
    char s[80];
    cout << "Major: ";
    in.getline(s, 80);
    strncpy(major, s, 9);
    return in;
} 
```

学生.h

```
#include "personal.h"

class Student : public Personal {
    public:
        Student();
        Student(char*, char*, char*, int, long, char*);
        void writeToFile(fstream&) const;
        void readFromFile(fstream&);
        int size() const{
            return Personal::size() + majorLen;
        }
    protected:
        char *major;
        const int majorLen;
        ostream& writeLegibly(ostream);
        friend ostream& operator<<(ostream& out, Student& sr){
            return sr.writeLegibly(out);
        }
        istream& readFromConsole(istream&);
        friend istream& operator>>(istream& in, Student& sr){
            return sr.readFromConsole(in);
        }
}; 
```

使用数据库.cpp

```
#include <iostream>
#include "student.h"
#include "personal.h"
#include "database.h"

int main(){
    Database<Personal> db;
    db.run();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:42:50.430

这是一个很大的文件集——可以说是太大了——需要在 SO 问题中进行分析。您需要学习一些方法来缩小问题的规模，以便向 SO（或技术支持）提出。

C 或 C++ 的第一步是确保您创建的头文件可以干净地编译。如果标头不干净，您将无法编译使用标头的代码，因此必须先对标头进行排序。

为了帮助我，我有一个脚本，我称之为`chkhdr`：

```
#!/bin/sh
# Check whether headers compile

tmp=chkhdr-$$
trap 'rm -f $tmp.?; exit 1' 0 1 2 3  13 15

cat > $tmp.c <<EOF
#include HEADER /* Check self-containment */
#include HEADER /* Check idempotence */
int main(void) { return 0; }
EOF

options=
for file in "$@"
do
    case "$file" in
    (-*) options="$options $file";;
    (*)  echo "$file"
         ${CC:-gcc} $options -DHEADER="\"$file\"" -c $tmp.c
         ;;
    esac
done

rm -f $tmp.?
trap 0 
```

我用它来检查标头是否既自包含又是幂等的。一个独立的头文件可以被包含在它之前而不需要任何其他头文件，并且它可以编译。这意味着它可以毫不费力地在任何需要其服务的地方使用。幂等标头可以包含多次而不会造成麻烦。（我主要在 C 中工作，因此默认编译器是 GCC 而不是 G++。但我可以`CC=g++`在环境中设置切换到 C++ 工作。）

您的`student.h`标头不是幂等的；我立即在顶部和底部添加了标准节：

```
#ifndef STUDENT_H_INCLUDED
#define STUDENT_H_INCLUDED

...original contents of student.h...

#endif /* STUDENT_H_INCLUDED */ 
```

[守卫宏名称](https://stackoverflow.com/questions/314983/include-header-guard-format)的详细选择由您决定；这就是我这些天使用的命名方案，但是使用诸如标头草稿的 MD5 校验和之类的东西来为您提供准随机保护宏是有一些优点的。

`student.h`单独编译头文件的输出是：

```
In file included from chkhdr-8120.c:1:
/usr/include/c++/4.2.1/bits/ios_base.h: In copy constructor ‘std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)’:
/usr/include/c++/4.2.1/bits/ios_base.h:779: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/include/c++/4.2.1/iosfwd:55: error: within this context
/usr/include/c++/4.2.1/iosfwd: In copy constructor ‘std::basic_ostream<char, std::char_traits<char> >::basic_ostream(const std::basic_ostream<char, std::char_traits<char> >&)’:
/usr/include/c++/4.2.1/iosfwd:64: note: synthesized method ‘std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)’ first required here 
student.h: In function ‘std::ostream& operator<<(std::ostream&, Student&)’:
student.h:20: note: synthesized method ‘std::basic_ostream<char, std::char_traits<char> >::basic_ostream(const std::basic_ostream<char, std::char_traits<char> >&)’ first required here 
student.h:20: error:   initializing argument 1 of ‘std::ostream& Student::writeLegibly(std::ostream)’ 
```

错误信息的最后一行明确指出了问题所在；其他信息有些切线，并导致关键信息。（很多时候，尤其是在 C 语言中，第一个错误是最重要的。令我惊讶的是，最后一行是关键。）将第 20 行更改`student.h`为：

```
 ostream& writeLegibly(ostream&); 
```

解决了这个问题，并且`student.h`头文件编译得很干净。其他标题也很干净。然后编译源文件就很简单了。只有`student.cpp`一个问题：

```
student.cpp: In member function ‘std::istream& Student::readFromConsole(std::istream&)’:
student.cpp:34: error: ‘cout’ was not declared in this scope 
```

这听起来像是“应该`std::cout`改用”的情况，但添加它会导致：

```
student.cpp: In member function ‘std::istream& Student::readFromConsole(std::istream&)’:
student.cpp:34: error: ‘cout’ is not a member of ‘std’ 
```

这是通过包含来解决的`#include <iostream>`。然后代码在下面干净地编译：

```
g++ -c *.cpp 
```

我无法链接；我遇到了对数据库代码的未定义引用，但这并不奇怪。

* * *

### 概括

修复的细节并不是非常重要。重要的是技术。这里的关键技术是：

1.  确保标题自己干净利落地工作 ( `chkhdr`)。
2.  一次处理一个文件。
3.  问题最小化。

我们不应该处理所有的代码；您应该能够更好地隔离问题。在您向他人报告软件问题的任何情况下，这都是一项重要的技能。消除多余的东西，并减少到最基本的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T06:52:16.853

错误报告

```
student.cpp:34:5: error: ‘cout’ was not declared in this scope 
```

我想你需要

```
#include <iostream> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T07:11:43.857

`Student`变化中

```
ostream& writeLegibly(ostream); 
```

到

```
ostream& writeLegibly(ostream&); 
```

这应该可以解决很多问题。通过缺少＆符号，您试图复制流。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-07T07:33:46.340

虽然编译器已经改变了 C++ 并且 C 是向后兼容的。语言的强项之一。无论如何，我已将您的代码复制到 VS2010 中，因为我更容易分析它的问题。

1.  将#include <iostream> 放在您的personal.h 中。它由您有 cout 的个人.cpp 使用。

2.  student.h 中的签名

    ```
    ostream& writeLegibly(ostream); 
    ```

    错了，应该是：

    ```
    ostream& writeLegibly(ostream&); 
    ```

3.  我已将database.cpp 中的实现代码移到database.h 中。在#endif 上方进行简单的剪切和粘贴。由于模板性质，编译器不喜欢它在单独的实现 cpp 中。

希望有帮助。

# java - Java：杀死unix上的所有子进程

> ID：10052383
> 
> 赞同：1
> 
> 时间：2012-04-07T06:39:10.073
> 
> 标签：java, unix, runtime, sigterm

我有一个用 java 编写的应用程序，它在 Unix 上运行并在启动时启动两个子进程（通过`Runtime.getRuntime().exec()`）。如果应用程序由于某种原因崩溃，子进程不会被杀死。

现在，我添加了一个关闭钩子，它会在每次崩溃时触发，到目前为止还可以。但我想在 UNIX 控制台上为应用程序的每个子进程发送一个 SIGTERM 信号（或至少是 SIGINT）。我应该能够通过 找到他们的进程 ID `ps`，但我没有正确提取 PID 并为每个进程发送信号。

任何人都可以帮忙吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:34:21.617

我的建议不是官方功能，而是技巧。

这就是我为我的 java 应用程序获取进程 ID 的方式。我从来没有找到其他方法。

```
public static final String getPid() {
    try {
        RuntimeMXBean runtimeBean = ManagementFactory.getRuntimeMXBean();
        String name = runtimeBean.getName();
        int k = name.indexOf('@');
        if (k > 0)
            return name.substring(0, k);
    } catch (Exception ex) {
    }
    return null;
} 
```

这适用于win、mac和linux。

# javascript - 谷歌地图信息窗口内不会触发文本框按键事件

> ID：10052389
> 
> 赞同：0
> 
> 时间：2012-04-07T06:39:50.340
> 
> 标签：javascript, jquery, google-maps

我试图在 Google 地图信息窗口内的 TextBox 上只允许有效字符。'keypress' 事件不会触发。请帮我解决这个问题。

```
google.maps.event.addListener(drawingManager, 'polygoncomplete', function(polygon) {

        var polylength=polygon.getPath().getArray().length;
        var lastarray=polygon.getPath().getAt(polylength-1);

            vertex=polygon.getPath().getArray();
        var contentString="<form id='myform'>Name:<input name='cname' id='cname' type='text' size='50'></input><br>Address<input name='addr' id='addr' type='text' size='50'></input><br><input type='button' value='submit' onclick='save();'></input></form>";
        infowindow = new google.maps.InfoWindow({
            content: contentString,
            });
        infowindow.setPosition(lastarray);
        infowindow.open(map);
    }); 

$('input').bind('keypress', function(event){
                 alert("pressed");
                var regex = new RegExp("^[a-zA-Z0-9 ]+$");
                var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                if (!regex.test(key)) {
                   event.preventDefault();
                   return false;
                }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:44:50.133

当您`bind`对`input`字段`input`进行事件侦听器时，尚未创建字段。您需要在 上添加domready[事件](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)侦听器`infowindow`，然后侦听器：`bind``keypress`

```
infowindow = new google.maps.InfoWindow({
     content: contentString,
});
google.maps.event.addListener(infowindow , 'domready', function(){
    $('#myform input').bind('keypress', function(event){
             alert("pressed");
            var regex = new RegExp("^[a-zA-Z0-9 ]+$");
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (!regex.test(key)) {
               event.preventDefault();
               return false;
            }
    });
}); 
```

# asp.net - 在应用程序中配置一次 autoMapper.Mapping

> ID：10052392
> 
> 赞同：0
> 
> 时间：2012-04-07T06:40:05.123
> 
> 标签：asp.net, automapper

有没有办法在我的应用程序（Mapper.CreateMap()）中映射 2 个模型，例如在 global.asax 中，然后在必要时在代码中调用 Mapper.Map()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:41:09.140

是的，您可以，事实上这是配置 AutoMapper 的推荐方式。创建初始映射是 AutoMapper（相对）昂贵的部分，因此您只想执行一次。

正如你所建议的那样，`Global.asax`是一个很好的地方。尽管将它放在一个单独的类中是个好主意，例如`Bootstrapper`，`Application_Start`方法调用到的类中，这样也可以从您的单元测试中调用这个类和方法。

来自[AutoMapper 文档](http://automapper.codeplex.com/wikipage?title=Getting%20Started)：

> 我在哪里配置 AutoMapper？如果您使用的是静态 Mapper 方法，则每个 AppDomain 只需进行一次配置。这意味着放置配置代码的最佳位置是在应用程序启动中，例如用于 ASP.NET 应用程序的 Global.asax 文件。通常，配置引导程序类在其自己的类中，并且从启动方法调用此引导程序类。

另请参阅[这个问题](https://stackoverflow.com/questions/1494167/how-to-configure-automapper-once-per-appdomain)，其中有一些好主意，包括编写 AutoMapper 的 Jimmy Bogard 的建议。

# javascript - Google Map API 查询位置

> ID：10052394
> 
> 赞同：0
> 
> 时间：2012-04-07T06:40:18.993
> 
> 标签：javascript, html, google-maps, google-maps-api-3, google-maps-api-2

我是使用 JavaScript 使用 Web 服务的新手。

我想要的只是通过 Google Maps API 从 JSON 获取绑定值（东北、西南：纬度和经度）。

```
http://maps.googleapis.com/maps/api/geocode/json?address=chicago&sensor=true 
```

我想通过 HTML 表单传递值“芝加哥”。

但我应该在`<script>`. 我不确定。如果是，我怎么打电话给芝加哥？通过表格在下面的标签中

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/geocode/json?address=chicago&sensor=true"></script> 
```

我对这种新的编程概念很陌生。

任何输入都会有所帮助。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:53:47.037

不幸的是，我不相信您可以通过客户端脚本来做到这一点。Geolocation API 仅支持 XML 和 JSON 输出。由于您必须发出跨域请求，因此出于安全原因，浏览器会阻止这两种格式。对于跨域请求，您必须使用不支持[的 JSON-P 。](http://en.wikipedia.org/wiki/JSONP)

您可以在自己的域中设置代理。制作一个简单的 PHP、ASP.Net（或您喜欢的任何服务器端语言）脚本，该脚本会发送到 Google，获取结果，然后以 JSON 的形式发回给您。然后，您的 JavaScript 可以在您自己的域中调用您自己的代理，而不是立即调用 Google。[一种变通方法，用同源策略](http://en.wikipedia.org/wiki/Same-origin_policy)解决您的问题。

**更新**

通读文档后，您可以使用 JavaScript API，而不是地理位置 API。看看JavaScript API的[Geolocation 服务的文档。](https://developers.google.com/maps/documentation/javascript/geocoding)

# php - PHP + 唯一的数组

> ID：10052400
> 
> 赞同：1
> 
> 时间：2012-04-07T06:41:57.290
> 
> 标签：php

我在一个表或位置和用户查询中找到那里的位置。我遇到的问题是某些位置重复 - 下面是一个示例（注意：有时结果集可能是几千条记录）：

![在此处输入图像描述](../Images/2c622e3f29f928d87107b7ccc80ce2dc.png)

在这里你可以看到： 吉朗北，维多利亚 北吉朗，维多利亚

我可以将每个位置的所有单词（不带逗号）加载到一个数组中 - 例如：

```
 array[0] - Geelong North Victoria
 array[1] - North Geelong Victoria 
```

那么是否有一种有效的方法对数组进行排序以删除重复项。我想如果我订购了 AZ 这个词 - 重复应该很明显。

任何人都对如何最好地解决这个问题有任何建议。我可以想象一个解决方案（有点像我上面解释的，但可能有更好的方法来完成这个）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:07:20.253

首先对单词进行排序，然后应用[array_unique](http://php.net/array_unique)

```
$array = array('Geelong North, Victoria', 'North Geelong, Victoria');
function sortloc($s) {
    $d = preg_split("/\W+/", $s, -1, PREG_SPLIT_NO_EMPTY);
    sort($d);
    return implode(' ', $d);
}
$locs = array_map('sortloc', $array);
$locs = array_unique($locs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:12:46.823

该 array_unique() 有一个函数。
看到这个： http: [//fi2.php.net/manual/en/function.array-unique.php](http://fi2.php.net/manual/en/function.array-unique.php)

另一种方法是，如果您不需要保留数字，则将该值也作为键，因此：

```
array["Geelong North Victoria"] - Geelong North Victoria
array["North Geelong Victoria"] - North Geelong Victoria 
```

这肯定会删除你的重复项。

# php - 有没有办法批量更改时间？

> ID：10052401
> 
> 赞同：0
> 
> 时间：2012-04-07T06:42:02.220
> 
> 标签：php, mysql

我的mysql数据库中有两列如下：

```
ID        time
1          2012-02-05 14:15:54
2          2012-02-05 14:15:54
3          2012-02-05 14:15:54
4         2012-02-05 14:15:54
5          2012-02-05 14:15:54
10         2012-02-05 14:15:54 
```

现在，我想使用 sql 命令（在 phpmyadmin 中使用）来更新可选的时间`(2011-01-05 14:15:54 ---2012-04-05 14:15:54)`

我想将其更改`2012-02-05 14:15:54` 为另一个时间， `(2011-01-05 14:15:54 ---2012-04-05 14:15:54)`例如：`2011-02-06 13:15:54 2011-05-06 11:15:54....`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:51:23.863

这是你想要的吗？

```
UPDATE your_table 
  SET time = DATE_SUB(time, INTERVAL 5 YEAR) 
  WHERE time BETWEEN '2011-01-05 14:15:54' AND '2012-01-05 14:15:54' 
```

# c# - 防止电脑休眠

> ID：10052402
> 
> 赞同：2
> 
> 时间：2012-04-07T06:42:19.137
> 
> 标签：c#, pinvoke

我有一个可以播放某种媒体的应用程序，我不希望计算机在我的应用程序运行时休眠。我四处搜寻，才知道这可以通过 P/Invoke 来完成。

显示器也不应关闭，计算机也不应进入睡眠状态。所以，我做了以下测试：

```
b.Click += (x, y) =>
                {
                    SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS | EXECUTION_STATE.ES_AWAYMODE_REQUIRED);
                    Debug.WriteLine("Power line executed");
                };

 [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern EXECUTION_STATE SetThreadExecutionState(EXECUTION_STATE esFlags);

        [FlagsAttribute]
        public enum EXECUTION_STATE : uint
        {
            ES_AWAYMODE_REQUIRED = 0x00000040,
            ES_CONTINUOUS = 0x80000000,
            ES_DISPLAY_REQUIRED = 0x00000002,
            ES_SYSTEM_REQUIRED = 0x00000001
        } 
```

但是，电脑在一段时间后仍然进入睡眠状态。这里缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T06:55:05.667

XP 不支持离开模式。使用连续 | 显示 | 系统代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T07:02:14.267

[设置线程执行状态](http://msdn.microsoft.com/en-us/library/aa373208.aspx)

要启用离开模式，应用程序同时使用 ES_AWAYMODE_REQUIRED 和 ES_CONTINUOUS；要禁用离开模式，应用程序使用 ES_CONTINUOUS 调用 SetThreadExecutionState 并清除 ES_AWAYMODE_REQUIRED。启用离开模式后，任何会使计算机进入睡眠状态的操作都会将其置于离开模式。当系统继续执行不需要用户输入的任务时，计算机似乎处于睡眠状态。**离开模式不影响睡眠空闲定时器；为了防止系统在计时器到期时进入睡眠状态，应用程序还必须设置 ES_SYSTEM_REQUIRED 值**。

# mongodb - MongoDB 和就地更新

> ID：10052409
> 
> 赞同：6
> 
> 时间：2012-04-07T06:42:49.190
> 
> 标签：mongodb

我有一个非常大的 MongoDB 对象，大约 2MB。

我必须经常更新 readCount 字段，并且我需要确保操作非常快。

我知道“就地更新”，我可以发送这个简单的操作

```
db.pages.update( { name:"SamplePage" }, { $inc: { readCount : 1 } } ); 
```

但是 MongoDB 如何在内部处理该操作？它从磁盘加载所有文档，修改值，并存储整个文档，或者，如果文档大小没有改变，它能够仅在磁盘上更新相对于 readCount 值的文件部分？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T04:21:45.247

MongoDB 使用内存映射文件进行数据文件管理。这实际上意味着 mongo 不会从磁盘加载文档。相反，它会尝试访问该文档所在的内存页面。如果该页面尚未在 RAM 中，则操作系统继续从磁盘中获取它。

写作完全一样。Mongo 尝试写入内存页面。如果它在 RAM 中，那么它是超快的（只是交换内存中的一些位）。该页面被标记为脏，操作系统将负责将其刷新回磁盘（保留您的更改）。

如果您启用了日志，那么您的插入/更新会更加昂贵，因为 mongodb 必须对仅附加文件进行另一次写入。

在我的应用程序中，mongodb 在适度的硬件上每个实例每秒处理 10-50k 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T16:54:35.417

MongoDB 根据项目增长或移动的频率计算每个集合的填充因子。更经常增长更大的填充因子。在内部，它使用自适应算法来尝试最小化更新的移动。基本上它在 RAM 中运行。

# python - Tkinter 按钮没有出现在 TopLevel 上？

> ID：10052410
> 
> 赞同：1
> 
> 时间：2012-04-07T06:42:57.960
> 
> 标签：python, button, tkinter

这是我为这个问题编写的一段代码：[Entry text on a different window?](https://stackoverflow.com/questions/10051721/how-to-fetch-the-entry-text-on-a-different-window/10051863#10051863)

发生的事情真的很奇怪`mySubmitButton`，似乎该按钮在第一次启动时不想出现，但是当您单击它时会出现。即使您单击它并将其从按钮上释放，这样它也不会被发送。我怀疑这是否只发生在 Mac 上，或者只发生在我的电脑上，因为这是一个非常小的问题。或者这是我对我的代码所做的愚蠢的事情。

```
self.mySubmitButton = tk.Button(top, text='Hello', command=self.send)
self.mySubmitButton.pack() 
```

我错过了什么吗？[我在 daniweb 上](http://www.daniweb.com/software-development/python/threads/341851/tkinter-button-not-appearing-but-still-useable)搜索并找到了这个问题和答案。我对它们进行了比较，无法弄清楚他做了什么“修复”，但我确实看到该行已更改为`command=root.quit`. 不过和我的不一样。。。

这是完整的源代码，没有错误消息，只是缺少按钮。

```
import tkinter as tk

class MyDialog:
    def __init__(self, parent):
        top = self.top = tk.Toplevel(parent)
        self.myLabel = tk.Label(top, text='Enter your username below')
        self.myLabel.pack()

        self.myEntryBox = tk.Entry(top)
        self.myEntryBox.pack()

        self.mySubmitButton = tk.Button(top, text='Hello', command=self.send)
        self.mySubmitButton.pack()

    def send(self):
        global username
        username = self.myEntryBox.get()
        self.top.destroy()

def onClick():
    inputDialog = MyDialog(root)
    root.wait_window(inputDialog.top)
    print('Username: ', username)

username = 'Empty'
root = tk.Tk()
mainLabel = tk.Label(root, text='Example for pop up input box')
mainLabel.pack()

mainButton = tk.Button(root, text='Click me', command=onClick)
mainButton.pack()

root.mainloop() 
```

![在此处输入图像描述](../Images/7c6781599ea1f6f4c2401d8dcc47ca58.png)

![在此处输入图像描述](../Images/2b708403cf8f5d56a5f1c0b72251e0b8.png)

1.  在此按钮之后添加另一个按钮，第二个按钮实际出现。我想可能是因为我没有调用同一个函数，但我调用了同一个函数，它做的事情和它看起来完全一样......
2.  在它们之间添加一个空标签是行不通的。该按钮仍未被绘制。

![在此处输入图像描述](../Images/f504f84c7d98c06ef4f70489fd1a6d81.png)

PS：我使用的是 Mac OS 10.5.8 和 Tk 8.4.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:09:03.180

我看到了 hello 按钮，但我在 Windows 7 上。

我快速重写了您的示例。我会很好奇它是否对你有任何影响。

```
import tkinter as tk

class GUI(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)

        mainLabel = tk.Label(self, text='Example for pop up input box')
        mainLabel.pack()

        mainButton = tk.Button(self, text='Click me', command=self.on_click)
        mainButton.pack()

        top = self.top = tk.Toplevel(self)
        myLabel = tk.Label(top, text='Enter your username below')
        myLabel.pack()

        self.myEntryBox = tk.Entry(top)
        self.myEntryBox.pack()

        mySubmitButton = tk.Button(top, text='Hello', command=self.send)
        mySubmitButton.pack()

        top.withdraw()

    def send(self):
        self.username = self.myEntryBox.get()
        self.myEntryBox.delete(0, 'end')
        self.top.withdraw()
        print(self.username)

    def on_click(self):
        self.top.deiconify()

gui = GUI()
gui.mainloop() 
```

# php - 如何在codeigniter中删除浏览器历史记录？

> ID：10052412
> 
> 赞同：1
> 
> 时间：2012-04-07T06:43:45.663
> 
> 标签：php, codeigniter, session, logout, browser-history

您好我正在开发一个项目（PHP-CodeIgniter，MySQL）。在我的应用程序中，我在用户成功登录后为用户数据（用户 ID、用户名）创建会话，并在注销后取消设置会话。

“这是主要问题，如果我点击浏览器的后退按钮，我也可以在注销后在我的应用程序中看到以前访问过的页面”。

如何使用 codeigniter 防止这种情况发生？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T08:04:09.373

有一些 JavaScript 方法可以停止使用后退按钮（正如 Raheel 所提到的），但是对这种行为的可靠控制可能很棘手。例如，如果用户在一个页面上并且可以看到它，那么没有什么可以阻止他们截屏。

您还应该确保发送正确的标头以停止缓存页面：

```
$this->output->set_header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
$this->output->set_header("Cache-Control: no-store, no-cache, must-revalidate");
$this->output->set_header("Cache-Control: post-check=0, pre-check=0", false);
$this->output->set_header("Pragma: no-cache"); 
```

来源：[http ://codeigniter.com/forums/viewthread/137096/#675799](http://codeigniter.com/forums/viewthread/137096/#675799)

即使这样，我也不确定是否所有浏览器都会遵守标题，但这是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:59:58.837

登出时虽然可以访问上一页但不能进行活动。如果您执行任何活动，它应该首先将您重定向到登录页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:27:02.630

只需在`.htaccess`之后添加这些行`RewriteEngine on`

```
<Files *>
    Header set Cache-Control: "private, pre-check=0, post-check=0, max-age=0"
    Header set Expires: 0
    Header set Pragma: no-cache
</Files> 
```

我更喜欢这个，因为我们只需要在一个地方（`.htaccess`）添加它，它会影响整个应用程序。

# python - 从 Python 运行 AppleScript（单击菜单项）

> ID：10052413
> 
> 赞同：0
> 
> 时间：2012-04-07T06:43:49.483
> 
> 标签：python, applescript

我在从 python (Mac OS X 10.7.3) 运行 applescript 时遇到问题。实际上，我可以运行 applescript，但某些部分不起作用。特别是，我正在尝试单击应用程序中的菜单项：

```
args = ['osascript', '-e', 'tell app "StataMP" to activate']
args.extend(['-e', 'tell application "System Events" to tell application process "StataMP" to click menu item "run tmp file" of menu 1 of menu item "Applescript helpers" of menu 1 of menu bar item "User" of menu bar 1'])
subprocess.Popen(args) 
```

我还尝试了一个更简单的版本来测试脚本但没有成功：

```
args.extend(['-e', 'tell application "System Events" to tell process "StataMP" to tell menu bar 1 to tell menu bar item "Window" to click menu item "Zoom"']) 
```

是的，“启用辅助设备访问”已启用，我还尝试禁用它并再次启用它（无需重新启动）。

谢谢！

# image - 使某些文本居中的图像任务

> ID：10052414
> 
> 赞同：0
> 
> 时间：2012-04-07T06:44:43.997
> 
> 标签：image

我想在图像中添加一些文本。目前我正在使用 Paint Shop Pro 9。我发现在中间正确地居中一些文本有点困难。

是否有一些免费软件可以让我轻松有效地完成这项任务。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:52:59.500

[Google Picasa](http://picasa.google.com/)中提供了许多基本的照片处理功能

# c - 有哪些方法可以跳过使用 && 的条件语句？

> ID：10052419
> 
> 赞同：0
> 
> 时间：2012-04-07T06:45:13.887
> 
> 标签：c, logical-operators

我的书中有一个练习，要求我编写一个等效于的 for 循环：

```
for(i=0;(i<4) && (i<5);i++) 
```

但没有使用`&&`和`||`运算符。

我想出了这样的解决方案：

```
for (i=0;;i++)
        if((i<4))
            if((i<5))
                printf("Works!!!\n");
            else
                break;
        else
            break; 
```

有用。由于我是 C 的初学者，我想知道是否有比这更好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T06:47:37.517

您`&&`正在结合两个条件，使得一个在逻辑上相对于另一个而言较弱。如果一个整数小于 4，它必然小于 5。因此`(i<4) && (i<5)`可以用 代替`(i<4)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:50:25.573

关于样式的说明：最好总是使用带有嵌套 if 的大括号，至少对于外部的，尤其是缺少 else 的情况。这不会做你打算做的事情：

```
if (Cond1)
    if (Cond2)
        DoSomething;
else
    DoSomethingElse; 
```

编译器将 else 视为属于 Cond2。这不会留下任何误解的余地：

```
if (Cond1)
{
    if (Cond2)
    {
        DoSomething;
    }
}
else
{
    DoSomethingElse;
} 
```

# android - Android textView如何显示全文？

> ID：10052423
> 
> 赞同：1
> 
> 时间：2012-04-07T06:46:05.240
> 
> 标签：android, textview

我在我的应用程序中使用了 TextView。例如在字符串中我写了一些例如超过 30000 个符号的文本。应用程序中的文本时间仅显示一些符号。如何使 tyextview 显示全文并滚动应用程序中的所有文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:09:09.583

你可以用**android:singleLine="true"**和**android:ellipsize="marquee"**包裹你的文本。

这将以滚动模式显示全文

或者您可以使用 android:ellipsize="none" -> 这将显示在最左侧换行文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:58:11.400

你可以像这样包裹你的`TextView`内部`ScrollView`：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</ScrollView> 
```

# xml - SOLR 的 XML 结果

> ID：10052425
> 
> 赞同：2
> 
> 时间：2012-04-07T06:47:07.600
> 
> 标签：xml, solr

我将使用 Solr 搜索服务器的 XML 结果，有没有人知道我可以如何使用它或它保存在哪里？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:59:21.020

当您要使用 XML 结果时，请不要将它们保存在某个地方，因为在这种情况下会涉及额外的 I/O。

您的问题的答案取决于您使用的编程语言/环境。

例如，如果您使用的是 Python，那么有一个 urllib 模块可以帮助您。

类似于（代码片段）：

```
import urllib
from xml.dom import minidom
dom = minidom.parse(urllib.urlopen("http://localhost:8080/sor/select/....")) 
```

现在您的变量“dom”将返回 XML 并且您可以进行处理。

因此，您可以在用于处理 solr xml 的编程语言中搜索类似的内容。

# sas - 如何在 SAS 中进行 1-way RM ANOVA 后进行 Tukey 的 HSD 事后测试？

> ID：10052429
> 
> 赞同：0
> 
> 时间：2012-04-07T06:48:25.663
> 
> 标签：sas, glm, anova, posthoc

我运行以下几行：

```
DATA abc;  
INPUT AA BB CC DD EE;  
CARDS;  
...  
;  
RUN;

PROC GLM DATA = abc;  
MODEL AA BB CC DD EE = / NOUNI;  
REPEATED conditions 5 (1 2 3 4 5) / PRINTE;  
MEANS / TUKEY ALPHA = 0.05;  
RUN; 
```

但是该`MEANS`语句适用于类变量（*“错误：此效果中只允许类变量。”* SAS 说。）。反过来，我只定义了响应（试验）`MODEL AA BB CC DD EE = / NOUNI;`：。有谁能够帮我？

PS
（基本上我的设计在[CrossValidated](https://stats.stackexchange.com/q/11887/5003)中进行了解释。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:40:45.457

我相当肯定，根据我在 SAS 方面的经验，你想要的东西在 SAS 中并不容易获得——尽管我相信这是可能的。如果需要，手动确认当然很容易。

考虑您提供的链接中的数据，我将其读入 SAS 程序...

```
DATA raw_lph;
    INPUT idnum cntrl a b c d;
    CARDS;
    20 5.1 12.42 10.1 9.58 8.54
    21 4.07 9.96 14.12 10.79 12.24
    22 3.94 4.92 13.04 15.96 9.37
    25 0.6 3.24 8.94 0.61 3.62
    26 1.72 13.96 2.48 3.44 3.12
    27 0.53 3.36 1.4 4 0.81
    28 0.97 3.88 2.33 3.77 3.31
    31 0.15 4.05 1.45 2.44 1.47
    32 0.58 1.92 2.47 2.33 4.92
    33 1.02 6.03 4.4 4.8 3.88
;  
RUN; 
```

要对其进行更传统的方差分析，您需要对其进行转置，我就是这样做的。

```
DATA transposed_lph;
    SET raw_lph;
    RETAIN idnum;
    ARRAY varnames[5] $ _TEMPORARY_ ('cntrl' 'a' 'b' 'c' 'd');
    ARRAY steps[5] cntrl--d;
    DO i=1 TO 5;
        well=varnames[i];
        pctlph=steps[i];
        OUTPUT;
    END;
    KEEP idnum well pctlph;
RUN; 
```

现在，下面有两个块，一个具有更传统的 ANOVA 格式，一个设置为使用 REPEATED 语句。

```
PROC GLM DATA=transposed_lph;
    CLASS well idnum;
    MODEL pctlph = well idnum well(idnum);
    LSMEANS well /ADJUST=TUKEY E=well(idnum) PDIFF=ALL;
QUIT;

PROC GLM DATA=raw_lph;
    MODEL cntrl--d = /NOUNI;
    REPEATED Well;
QUIT; 
```

处理重复测量就是处理受试者内部的变化，而不是受试者之间的变化。第一个模型失败是因为它没有错误项，因为我们成功地用三个项解释了模型中的所有方差。这些术语是血液在哪个井中，它是哪个主题，以及嵌套在 idnum 中的井的效果 - 或者本质上，每个主题的每个井之间的差异 - 也就是在主题变化中。

如果您查看第一组的输出，您会看到最终得到：

```
Source                   DF     Type III SS      Mean Square       F    p-value
well                      4     134.5175200      33.6293800        .       .
idnum                     9     487.1931300      54.1325700        .       .
well(idnum)              36     255.2066000       7.0890722        .       . 
```

使用 LSMEANS 语句，我要求 Tukey-adjusted 均值很好；E=well(idnum) 告诉系统使用 well(idnum) 作为这些均值的误差项。现在，查看第二个 PROC GLM 的输出。

```
Source                  DF    Type III SS    Mean Square   F Value   Pr
Well                     4    134.5175200     33.6293800      4.74   0.0035
Error(Well)             36    255.2066000      7.0890722 
```

如您所见，重复测量很好地识别了相同的错误陈述。但是，据我所知，如果不使用 CLASS 语句，您将无法从 SAS 中的任何建模过程中获取方法。因此，解决此问题的一种方法是重组我所做的模型以尝试“游戏系统”。或者，您可以手动计算 Tukey HSD。也可能有一个比 SAS 处理得更好的 R 包。

对于它的价值，我在 Minitab 上学习了建模，它实际上似乎很好地处理了建模，所以它可能值得一看。

！

# javascript - Javascript鼠标悬停功能

> ID：10052435
> 
> 赞同：1
> 
> 时间：2012-04-07T06:49:58.143
> 
> 标签：javascript, jquery, html

我有这个代码

这是我脑海中的剧本

```
 <script src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {
$("#hmenu li a").hover(
    function () {
    if ($("#hmenu li a").val == "Work")
    {
        alert ('halla')
    }

    },
    function () {
        $(this).removeClass("active");
    }
    );
    });
</script> 
```

这是 HTML 部分

```
<div id="headd">
<img src="logoname.png"/>
</div>
<div id="ll">
<p>My home, the front page and the main page</p>
</div>
<img id="da" src="logo.png" />
<div id="line">
    <img src="rr.gif" />
</div>
<ul id="hmenu">
    <li><a class="active" href="#">HOME</a></li>
    <li><a href="#">WORK</a></li>
    <li><a href="#">PORTFOLIO</a></li>
    <li><a href="#">ABOUT</a></li>
    <li><a href="#">CONTACT</a></li>
</ul> 
```

每当用户将鼠标悬停在锚标记上时，我想更改此区域中的文本：“#ll p”。

例如。当用户将鼠标悬停在内容为“HOME”的锚标签上时，JavaScript 通过 if 和 else 进行比较（我不知道是否有其他方法，但我愿意接受任何建议）所以就是这样：如果#hmenu li a 值等于 Home 然后 #ll p 内容应更改为“您悬停工作锚点”等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:56:28.013

怎么样

```
$('#hmenu li').hover(function() {
    $('#ll p').text('you hover the '+$(this).text()+' anchor');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:12:24.807

如果要添加文本然后返回原始文本，可以将值存储在数据标签中。看看这个样本：

[http://jsfiddle.net/PjJfk/](http://jsfiddle.net/PjJfk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:17:52.460

添加到@alexg 和@Jay：

听起来您想要该`title`属性的功能，但是标题文本不是弹出窗口，而是进入预定义的框。

我建议使用`title`attr，因为如果禁用了 js，它仍然可以工作。然后我想你可以使用悬停（mouseenter / mouseleave）动作，如：

mouseenter：从链接中删除标题，但将其用于'#ll p'的内容 mouseleave：恢复链接的原始标题和原始内容`#ll p`

我不是一个真正的 jQuery 人，但类似：

```
$(function() {
 var text, title;
 $('#hmenu li a').hover(
  function() {
     var $p = $('#ll p'), $a = $(this);
     text = $p.text();
     title = $a.attr('title');
     $a.attr('title','');
     $p.text(title);
  },
  function() {
     $('#ll p').text(text);
     $(this).attr('title', title);
  }
 )
}); 
```

#hmenu 变成

```
<ul id="hmenu">
  <li><a class="active" href="#" title="My home, the front page and the main page">HOME</a></li>
  <li><a href="#" title="Glad I'm not there now">WORK</a></li>
  <li><a href="#" title="You really have to see this">PORTFOLIO</a></li>
  <li><a href="#" title="I'm interesting once you get to know me">ABOUT</a></li>
  <li><a href="#" title="Shazam">CONTACT</a></li>
</ul> 
```

见[http://jsfiddle.net/heey3/](http://jsfiddle.net/heey3/)

# android - proguard 警告库类 android.webkit.WebView 依赖于程序类 android.webkit.WebViewClien

> ID：10052437
> 
> 赞同：6
> 
> 时间：2012-04-07T06:50:44.580
> 
> 标签：android, proguard, webviewclient

我的应用程序源目录中有一个版本的文件 android.webkit.WebViewClient，以便在我自己的 WebViewClient 扩展版本中处理 onReceivedSslError。当我在 sdk-7 中使用新的 ProGuard 集成时，我收到以下警告：

```
[proguard] Warning: library class android.webkit.WebView depends on program class android.webkit.WebViewClient

...

 [proguard] Warning: there were 1 instances of library classes depending on program classes.
 [proguard]          You must avoid such dependencies, since the program classes will
 [proguard]          be processed, while the library classes will remain unchanged. 
```

谁能告诉我如何在我的 proguard.cfg 中解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T10:51:31.160

我遇到了同样的问题，根据上面的提示，我将这些行写入`proguard.cfg`并解决了问题：

```
-keep public class android.net.http.SslError
-keep public class android.webkit.WebViewClient

-dontwarn android.webkit.WebView
-dontwarn android.net.http.SslError
-dontwarn android.webkit.WebViewClient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:58:18.147

尝试在 proguard.cfg 或 proguard-project.txt 文件中添加以下内容：

```
-dontwarn android.webkit.WebView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:44:12.453

这可能有点晚了，但我遇到了同样的问题。我需要在`WebView`低于 2.2 的 android 上支持 SSL 连接。

通过以下操作，我能够成功地使用 proguard 构建 apk：

*   正如评论中所说 -`android.webkit.WebViewClient`从您的源代码中删除，而是创建您自己的类并扩展原始类，`WebViewClient`其中只有`onRecieveSslError`方法（没有覆盖）。

*   用新的替换现有的`WebViewClient`使用

*   `SslError`可以保持不变，因为在 SDK 7 及更低版本中它不存在于开放 API 中，因此 proguard 不会注意到它。

就是这样。

# iphone - application:didRegisterForRemoteNotificationsWithDeviceToken: 如何工作

> ID：10052439
> 
> 赞同：0
> 
> 时间：2012-04-07T06:50:58.043
> 
> 标签：iphone, objective-c, apple-push-notifications

`- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken`当应用程序成功注册到 Apple Push Service (APS) 时，我将该方法发送给委托人。在低级别这是如何工作的？应用程序是否会在您启动应用程序并验证设备已连接时尝试调用它？在连接设备之前是否多次调用？收到设备令牌后它会停止工作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:19:43.237

`didRegister`回调实际上是对方法的直接响应`- (void)registerForRemoteNotificationTypes:(UIRemoteNotificationType)types`。每次您的应用程序启动时，您都有责任：

1.  调用`registerForRemoteNotificationTypes:`您的应用程序对象（UIApplication / NSApplication）
2.  响应`application:didRegisterForRemoteNotificationsWithDeviceToken`和`application:didFailToRegisterForRemoteNotificationsWithError:`回调。
3.  将设备令牌发送到您正在与之通信的任何服务，以便将来可以使用该设备令牌。

具体回答您的问题：

1.  如果网络无法访问或您没有正确签署您的应用程序，您将收到“didFailToRegister”。返回的 NSError 具有相当的描述性。
2.  一旦应用程序启动并且您已成功注册远程通知，您无需再次注册。这样做没有坏处，但真的没有意义。如果您失败了，您可以稍后再尝试注册（即当 APNS 再次可访问时）。
3.  您只会收到一个回调（成功或失败）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T11:10:33.670

朋友，您需要执行几个步骤 1) 您需要下载与推送通知服务链接的应用程序配置文件（在创建应用程序 ID 时）。

有关详细信息，请访问此处[http://mobiforge.com/developing/story/programming-apple-push-notification-services?dm_switcher=true](http://mobiforge.com/developing/story/programming-apple-push-notification-services?dm_switcher=true)

# multithreading - 有没有不支持线程的操作系统？

> ID：10052441
> 
> 赞同：1
> 
> 时间：2012-04-07T06:51:16.330
> 
> 标签：multithreading, operating-system

有没有不支持线程的操作系统？

我在某处读到 CLI 线程在支持线程的操作系统上不起作用，只是好奇哪些是这样的操作系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:53:41.293

MS-DOS 不支持线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:48:03.163

Mac OS 9、Windows 3.1 没有线程。

# solr - 如何进行查询并将其发送到 solr

> ID：10052449
> 
> 赞同：-1
> 
> 时间：2012-04-07T06:52:53.390
> 
> 标签：solr

我想根据从我的服务器和查询 solr 服务器获得的参数进行查询。

首先，我想要一个指南，如何制作查询 url，其次，如何将其发送到 solr。暂时我使用默认的图形用户界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:30:34.440

在您的应用程序中使用 Solr 提供的客户端库来构建从浏览器获取的查询并将其请求给 solr。
这些库以各自的语言对象提供 Solr 结果，使用起来非常简单。

[Solrj](http://wiki.apache.org/solr/SolJava) for Java、Sunspot 和 rsolr with Ruby、SolrPHP for PHP 等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:55:15.020

正如我从您的其他评论中了解到的，您正在使用 C#。

在这里，使用 C# 在 Solr 中获取 XML 的**代码片段**

```
using System.Net; 
... 
... 

HttpWebRequest webrequest = (HttpWebRequest)HttpWebRequest.Create(solruri); 

webrequest.Method = WebRequestMethods.Http.Get; 

//Get the Response from Solr 

HttpWebResponse webresponse = (HttpWebResponse)webrequest.GetResponse(); 

StreamReader reader = new StreamReader(webresponse.GetResponseStream()); 
```

变量 solruri= 运行 Solr 实例的 url，例如：_http://localhost:8080/solr/select……

# php - 如何找到 x2 和 y2

> ID：10052451
> 
> 赞同：-4
> 
> 时间：2012-04-07T06:53:13.057
> 
> 标签：php, math, geometry

我有以下矩形.. **x1,y1,width 和 height**

如何找到具有上述值的**x2 和 y2 ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:57:13.793

用坐标系在一张纸上画`(x1, y1)`，然后`width x height`在同一张纸上画一个尺寸为矩形。

如果你做`width = 0`，你可以说`x1 = x2`。如果宽度变得更大，则`x2 > x1`. 你可以这么说`x2 = x1 + width`。

高度的工作方式相同，所以`y2 = y1 + height`.

我假设这`(x1, y1)`是左下角的坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T07:45:22.867

根据 x1,y1 表示的点和您说 x2,y2 时所指的点，我们有以下输出：-

如果 x1,y1 是矩形的**最左下点**

那么其他 3 点是`x1+width,y1`, `x1,y1+height`,`x1+width,y1+height`

如果 x1,y1 是矩形的**最右下点**

那么其他 3 点是`x1-width,y1`, `x1,y1+height`,`x1-width,y1+height`

如果 x1,y1 是矩形的**最左上点**

那么其他 3 点是`x1+width,y1`, `x1,y1-height`,`x1+width,y1-height`

如果 x1,y1 是矩形的**最右顶点**

那么其他 3 点是`x1-width,y1`, `x1,y1-height`,`x1-width,y1-height`

# c - c 初学者 rand()

> ID：10052452
> 
> 赞同：3
> 
> 时间：2012-04-07T06:53:30.437
> 
> 标签：c, random

此代码连续 1 次折腾 200 次为 r 生成 1 结果；后来的投掷不是静态的；他们改变了；知道我搞砸了什么吗？使用 Xcode。谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define tprop .5    // propability coin will be tails

int main(int argc, const char *argv[])
{
    int i;          // for loop counter
    int n;          // # of rolls
    int hc = 0;     // heads counter
    int tc = 0;     // tails counter
    int r;          // roll... 1=heads, 0=tails

    srand(time(NULL));  // seed Random# generator with current time

    printf("Enter # of times to toss a coin: ");
    scanf("%i", &n);

    for (i = 0; i < n; i++) {
        if ((float) rand() / RAND_MAX > tprop) {
            r = 1;
            hc++;
        } else {
            r = 0;
            tc++;
        }
        printf("%in", r);
    }
    printf("# of times heads came up: %i (%f%%)n", hc, (float) hc / n * 100);
    printf("# of times tails came up: %i (%f%%)n", tc, (float) tc / n * 100);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:28:21.330

To answer this question, first we need to look at rand() code.

From [Rand Implementation](https://stackoverflow.com/questions/4768180/rand-implementation):

```
void __cdecl srand (unsigned int seed)
{
    #ifdef _MT
        _getptd()->_holdrand = (unsigned long)seed;
    #else /* _MT */
        holdrand = (long)seed;
    #endif /* _MT */
}

int __cdecl rand (void)
{
   #ifdef _MT
    _ptiddata ptd = _getptd();
    return( ((ptd->_holdrand = ptd->_holdrand * 214013L + 2531011L) >> 16) &
    0x7fff );
   #else /* _MT */
    return(((holdrand = holdrand * 214013L + 2531011L) >> 16) & 0x7fff);
   #endif /* _MT */
} 
```

As you can see, the random value is computed based on the seed value (and a new seed value is the computed), thats why we call those numbers pseudo-random. Since we are intersted in the first run, lets simplify the code a bit, lets write a function which takes the input the seed, and return the first rand():

```
int firstRand(unsigned int seed) {
    return (((seed * 214013L + 2531011L) >> 16) & 0x7fff);
} 
```

And now lets run a test with with this function:

```
for (i = 0; i < 50; ++i) {
    printf("seed = %u; rand = %d\n", seed + i, firstRand(seed + i));
} 
```

Here I got this result:

```
seed = 1333783311; rand = 19779
seed = 1333783312; rand = 19783
seed = 1333783313; rand = 19786
seed = 1333783314; rand = 19789
seed = 1333783315; rand = 19792
seed = 1333783316; rand = 19796
seed = 1333783317; rand = 19799
seed = 1333783318; rand = 19802
seed = 1333783319; rand = 19805
seed = 1333783320; rand = 19809
seed = 1333783321; rand = 19812
seed = 1333783322; rand = 19815
seed = 1333783323; rand = 19819
seed = 1333783324; rand = 19822
seed = 1333783325; rand = 19825
seed = 1333783326; rand = 19828
seed = 1333783327; rand = 19832
seed = 1333783328; rand = 19835
seed = 1333783329; rand = 19838
seed = 1333783330; rand = 19841
seed = 1333783331; rand = 19845
seed = 1333783332; rand = 19848
seed = 1333783333; rand = 19851
seed = 1333783334; rand = 19854
seed = 1333783335; rand = 19858
seed = 1333783336; rand = 19861
seed = 1333783337; rand = 19864
seed = 1333783338; rand = 19868
seed = 1333783339; rand = 19871
seed = 1333783340; rand = 19874
seed = 1333783341; rand = 19877
seed = 1333783342; rand = 19881
seed = 1333783343; rand = 19884
seed = 1333783344; rand = 19887
seed = 1333783345; rand = 19890
seed = 1333783346; rand = 19894
seed = 1333783347; rand = 19897
seed = 1333783348; rand = 19900
seed = 1333783349; rand = 19903
seed = 1333783350; rand = 19907
seed = 1333783351; rand = 19910
seed = 1333783352; rand = 19913
seed = 1333783353; rand = 19917
seed = 1333783354; rand = 19920
seed = 1333783355; rand = 19923
seed = 1333783356; rand = 19926
seed = 1333783357; rand = 19930
seed = 1333783358; rand = 19933
seed = 1333783359; rand = 19936
seed = 1333783360; rand = 19939 
```

So, as you can see, if the seed are close, the values will probably be close to, and since you used the current time, the 200 tests you ran were all with seed values close to each other.

time(NULL) return the current time in seconds. To get better results you should use the time in milliseconds (and if you really need the values to change a lot between 2 runs do some operation over it).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T08:10:56.737

rand 的 Windows（这里用 wine 模拟）和 glibc (x86_64) 版本完全不同，但代码将在任何地方编译。你的代码在我的 Linux 机器上运行良好，但是今天，在这个小时，当使用从 time(NULL) 生成的种子时，你的代码的 Windows 版本总是在第一轮为我返回 1——即使我等待了几分钟。也许几个小时、几天、几个月之后会有所不同。看一下这个：

```
#include <stdio.h>
#include <stdlib.h>

int main (int argc, const char *argv[]) {
    int i;
    int r;
    printf ("rand() returns:\n",RAND_MAX);
    for (i = 0; i < 25; i++) {
        srand (i);
        r = rand();
        printf ("%i ", r);
    } printf ("\nout of RAND_MAX of %li\n",RAND_MAX);
    return 0;
} 
```

Linux (x86_64) 上的结果：

```
rand() returns:
1804289383 1804289383 1505335290 1205554746 1968078301 590011675 290852541 1045618677 757547896 444454915 1215069295 1989311423 1687063760 1358590890 2146406683 762299093 462648444 1227918265 1995168598 623271449 319571911 1086411056 1857631170 1562469902 188364873 
out of RAND_MAX of 2147483647 
```

葡萄酒的结果（用 mingw 编译）：

```
rand() returns:
38 41 45 48 51 54 58 61 64 68 71 74 77 81 84 87 90 94 97 100 103 107 110 113 116 
out of RAND_MAX of 32767 
```

请注意 Windows 版本如何与种子值更紧密地耦合，因此与 32767 的 RAND_MAX 相比，它返回​​的结果非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T07:21:55.493

可能您的测试是脚本化的，并且运行速度尽可能快。

所以大多数测试将在同一[时间](http://en.wikipedia.org/wiki/Wall_clock_time)秒内执行。

您使用当前时间戳为伪随机数生成器播种，其分辨率为一秒。

您可以查看其他熵源[`/dev/urandom/`](http://en.wikipedia.org/wiki//dev/urandom)，例如 Linux 或 BSD。如果您在 x86/x64 系统上运行代码，您也可以使用[时间戳计数器](http://en.wikipedia.org/wiki/RDTSC)作为熵源。

# php - solr 可以像 CMS 那样提供单个文档吗？

> ID：10052453
> 
> 赞同：0
> 
> 时间：2012-04-07T06:53:31.893
> 
> 标签：php, drupal, joomla, solr, content-management-system

我正在寻找建立一个房地产搜索引擎规格是大约 500 000 个列表，可能每天更新 50 000 个列表数据以干净（ish）CSV 提供 - 需要删除字符，编码 utf，通常。50 多个数据字段（30 张图片、各种属性规格等）

我对 Drupal7 有很多问题，而 Joomla 无法处理。那只是数据导入。

我想让 solr 索引数据并用作搜索引擎。我有几个问题。

1.  solr 可以直接从其索引中提供列表吗？（如果是这样，我需要一个数据存储，比如 Mysql 甚至是 CMS）
2.  我最好将数据放在一个简单的单表 mysql DB 中并使用它将文档推送到 solr 以获取索引，然后从 DB 或从 Solr 索引加载列表。

由于数据困难，似乎我可以简单地消除许多复杂性，试图弄清楚 D7/Joomla/任何其他 cms 的内部工作原理，只需将一些简单的 php 文件作为前端。

我不需要任何花哨的外观，我打算为这个项目使用基本的 drupal 模板。

我需要速度和可靠性以及出色的搜索结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:44:51.740

恕我直言，应该可以专门为您的目的使用 SOLR。SOLR 50000 个列表的数量即使对于单个服务器来说也不是很多，但我建议每 10 小时 500000 次更新确实很多。因为您每小时将有大约 50000 次更新，这相当于每小时完整的重新索引。

我们的企业也使用 SOLR，大约有 40-120 个字段。40000 个项目确实需要大约 5 分钟才能完全索引。如果您想自动预热缓存，您可能需要为此添加几分钟。

据我所知，您的问题将是小的更新周期。如果您想每小时更新一次单个文档而不是全部 50000 个列表，那么您的 solr 不能使用缓存，或者您将不得不使用多个 solr 服务器。（也许对于 solr 4.0，您甚至可以考虑扩展您的 solr 服务器硬件，但我怀疑 3.x 会从中受益） 不使用缓存可能会导致搜索性能变慢，但并非必须如此。

由于 SOLR 提供[动态字段](http://lucidworks.lucidimagination.com/display/solr/Dynamic+Fields)功能，您可以为每个文档添加不同的结构。这应该符合您的各种属性要求。

# java - GWT：无法从我的 onmoduleload 调用 mymain.html 类中的 javascript 方法

> ID：10052461
> 
> 赞同：0
> 
> 时间：2012-04-07T06:56:10.953
> 
> 标签：java, gwt, jsni

我正在尝试从我在 GWT 中的 java 调用我的 Javascript 方法，这就是我正在做的事情

```
public void onModuleLoad() {
    jsniAlert("test");
}

private static final native void jsniAlert(String test) /*-{
    $wnd.alert(test);
    $wnd.testJavascript();
}-*/; 
```

HelloJSNI.html（用于在 war 文件夹中打开我的应用程序的主要 html 类）

```
<script type="text/javascript" language="javascript"  
    src="hellojsni/hellojsni.nocache.js"></script>

<script type="text/javascript">
    function testJavascript(var input) {
        window.jsniAlert();
        var var1inJS = "Default value";

        alert("Value of Var1 = " + var1inJS);
        var1inJS = input;
        alert("Value of Var1 = " + var1inJS);

        var var2inJS = "Waht is the value of Var2";

        alert("Value of Var2 = " + var2inJS);   
    } 
```

但是当我运行我的应用程序时出现异常

```
javascriptexception:object doesn't support property or method 'testjavascript' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:33:47.710

你的`testJavascript`函数有错误，所以它没有被加载，你不能调用它。

改变这个：

```
function testJavascript(var input) { 
```

对此

```
function testJavascript(input) {  //notice that var keyword is not used to define parameters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:35:24.863

您的 javascript 函数未加载。在浏览器中，当浏览器检测到脚本标签之间的代码错误时，里面的代码将不会被加载，并可能导致意外结果。

# dynamic - 动态加载和动态链接的区别？

> ID：10052464
> 
> 赞同：33
> 
> 时间：2012-04-07T06:56:33.390
> 
> 标签：dynamic, linker, operating-system, loading

> 例程在被调用之前不会加载。所有例程都以可重新定位的加载格式保存在磁盘上。主程序被加载到内存中并被执行。这称为动态链接。

为什么这称为动态链接？它不应该是动态加载，因为在动态加载中调用例程之前不会加载例程，而在动态链接中，链接推迟到执行时间。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-08-30T11:58:46.163

这个答案假设您知道基本的 Linux 命令。

在 Linux 中，有两种类型的库：静态库或共享库。

[![在此处输入图像描述](../Images/62d49ecf8794652971a0067f473a60d0.png)](https://i.stack.imgur.com/JagAC.gif)

为了调用静态库中的函数，您需要将库静态链接到可执行文件中，从而生成静态二进制文件。

在共享库中调用函数时，您有两种选择。

第一个选项是动态链接，这是常用的 - 在编译可执行文件时，您必须指定程序使用的共享库，否则它甚至不会编译。当您的程序启动时，系统会负责打开这些库，这些库可以使用`ldd`命令列出。

另一个选项是动态加载——当你的程序运行时，打开那个库是程序的工作。此类程序通常与 libdl 链接，它提供了打开共享库的能力。

摘自维基百科：

> 动态加载是一种机制，计算机程序可以在运行时将库（或其他二进制文件）加载到内存中，检索库中包含的函数和变量的地址，执行这些函数或访问这些变量，并卸载记忆中的图书馆。它是计算机程序可以使用其他软件的三种机制之一；另外两个是静态链接和动态链接。与静态链接和动态链接不同，动态加载允许计算机程序在没有这些库的情况下启动，以发现可用的库，并可能获得额外的功能。

如果您仍然感到困惑，请先阅读这篇很棒[的文章：剖析 Linux 动态库](https://www.ibm.com/developerworks/library/l-dynamic-libraries/index.html)并构建[动态加载示例](https://developer.ibm.com/tutorials/l-dynamic-libraries/#dynamic-loading-example)以了解它，然后再回到这个答案。

这是我的输出`ldd ./dl`：

```
linux-vdso.so.1 =>  (0x00007fffe6b94000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f400f1e0000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f400ee10000)
/lib64/ld-linux-x86-64.so.2 (0x00007f400f400000) 
```

如您所见，`dl`它是一个动态可执行文件`libdl`，它`ld.so`在您运行时由 Linux 动态链接器动态链接`dl`。列表中的其他 3 个库也是如此。

`libm`未显示在此列表中，因为它用作动态加载的库。直到`ld`被要求加载它才会加载。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-07T07:30:38.973

**Dynamic loading** means loading the library (or any other binary for that matter) into the memory during load or run-time.

Dynamic loading can be imagined to be similar to plugins , that is an exe can actually execute before the dynamic loading happens(The dynamic loading for example can be created using LoadLibrary call in C or C++)

**Dynamic linking** refers to the linking that is done during load or run-time and not when the exe is created.

In case of dynamic linking the linker while creating the exe does minimal work.For the dynamic linker to work it actually has to load the libraries too.Hence it's also called linking loader.

Hence the sentences you refer may make sense but they are still quite ambiguous as we cannot infer the context in which it is referring in.Can you inform us where did you find these lines and at what context is the author talking about?

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-03T03:15:59.063

动态加载是指在启动后将可执行文件或库映射（或较少复制）到进程的内存中。动态链接是指在编译后解析符号——将它们的名称与地址或偏移量相关联。

这是 quora 上 Jeff Darcy 的完整答案的链接

[http://www.quora.com/Systems-Programming/What-is-the-exact-difference-between-Dynamic-loading-and-dynamic-linking/answer/Jeff-Darcy](http://www.quora.com/Systems-Programming/What-is-the-exact-difference-between-Dynamic-loading-and-dynamic-linking/answer/Jeff-Darcy)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-12T15:27:49.677

我也在阅读“恐龙书”，对加载和链接的概念感到困惑。以下是我的理解：

1.  动态加载和链接都发生在运行时，并将所需的任何内容加载到内存中。

2.  主要区别在于动态加载检查例程是否由**加载程序加载**，而动态链接检查例程是否在**内存中**。

3.  因此，对于动态链接，在内存中只有一份库代码，对于动态加载可能不是这样。这就是为什么动态链接需要操作系统支持来检查其他进程的内存。这个特性对于许多程序共享的语言子程序库来说非常重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-13T12:32:46.487

动态链接器是一个运行时程序，它在开始执行程序之前加载和绑定程序的所有动态依赖项。动态链接器将找到程序需要哪些动态库，这些库需要哪些库（等等），然后它将加载所有这些库并确保对函数的所有引用都正确指向正确的位置。例如，即使是最基本的“hello world”程序通常也需要 C 库来显示输出，因此动态链接器将在加载 hello world 程序之前加载 C 库，并确保对 printf() 的任何调用都执行到正确的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-16T06:39:46.233

`Dynamic Loading:`在调用时将例程加载到主存储器中。

`Dynamic Linking:`在执行期间将例程加载到主存中，如果调用发生在执行时间之前，则推迟到执行时间。

**动态加载**不需要操作系统的特殊支持，程序员有责任检查要加载的例程是否存在于主存中。

**动态链接**需要操作系统的特殊支持，通过动态链接加载的例程可以在各个进程之间共享。

> 例程在被调用之前不会加载。所有例程都以可重新定位的加载格式保存在磁盘上。主程序被加载到内存中并被执行。这称为动态链接。

声明不完整。*“主程序被加载到主存中并被执行。”* 未指定何时加载程序。

如果我们认为它是按第*1^条语句*指定的调用时加载的，那么它的**动态加载**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-03T16:26:53.893

我们使用动态加载来实现更好的空间利用率

*   **使用动态加载，程序在被调用之前不会被加载**。*所有例程都以可重定位加载格式保存在磁盘上。主程序被加载到内存中并被执行。*
*   当一个例程需要调用另一个例程时，调用例程首先检查是否已加载。如果没有，则调用可重定位链接加载器将所需的例程加载到内存中并更新程序的地址表以反映这种变化。然后控制是传递给新加载的例程

**优点**

1.  永远不会加载未使用的例程。这在程序代码很大时最有用，其中需要处理不经常发生的情况，例如错误例程。在这种情况下，尽管程序代码很大，但使用的代码会很小。
2.  动态加载不需要 OS 的特殊支持。用户有责任设计自己的程序以利用方法。但是，OS 可以提供库来帮助程序员

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-25T11:07:28.273

有两种类型的链接静态和动态，当输出文件在运行时执行时没有任何依赖项（文件=库），这种类型的链接称为静态，其中动态有两种类型 1.动态加载链接 2.动态运行时链接.这些描述如下

动态链接是指在运行时链接，其中库文件被带到主内存并链接..（无论函数调用如何，这些都是链接的）。

动态运行时链接是指在需要时链接，这意味着无论何时发生函数调用，都在运行时链接..并非所有函数都被链接，这在代码编写中有所不同。

# javascript - 使用 Python 抓取 javascript 生成的数据

> ID：10052465
> 
> 赞同：8
> 
> 时间：2012-04-07T06:56:36.343
> 
> 标签：javascript, python, screen-scraping, web-scraping

我想使用 Python 抓取以下 url 的一些数据。 [http://www.hankyung.com/stockplus/main.php?module=stock&mode=stock_analysis_infomation&itemcode=078340](http://www.hankyung.com/stockplus/main.php?module=stock&mode=stock_analysis_infomation&itemcode=078340)

这是关于公司信息的摘要。

我要抓取的内容未显示在第一页上。通过单击名为“재무제표”的选项卡，您可以访问财务报表。然后点击名为“현금흐름표”的选项卡，您可以访问“现金流”。

我想抓取“现金流”数据。

但是，现金流数据是由 javascript 跨 url 生成的。以下链接是隐藏的网址，[http ://stock.kisline.com/compinfo/financial/main.action?vhead=N&vfoot=N&vstay=&omit=&vwidth=](http://stock.kisline.com/compinfo/financial/main.action?vhead=N&vfoot=N&vstay=&omit=&vwidth=)

现金流数据是通过向该 url 提交一些选项值和 cookie 生成的。

如您所见，第一个链接中的 itemcode=078340 表示股票代码，我想收集多达 1680 只股票的现金流数据。我想让它成为一个循环结构。

有没有好的方法来抓取现金流数据？我试过scrapy，但scrapy很难应付我已经在使用的另一个抓取代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T10:20:31.827

还有[dryscape](https://github.com/niklasb/dryscrape)（我写的一个库，所以推荐有点偏颇，很明显：）它使用基于Webkit的快速内存浏览器来导航。它也理解 Javascript，但比 Selenium 轻得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:16:25.690

如果您需要 scape 使用 AJAX 更新的页面内容并且您不受此 AJAX 界面的控制，我将使用 Selenium 浏览器自动化器来完成该任务：

[http://code.google.com/p/selenium/](http://code.google.com/p/selenium/)

*   Selenium 具有 Python 绑定

*   它会启动一个真实的浏览器实例，因此它可以执行和抓取 100% 与您亲眼所见相同的事情

*   AJAX 更新后通过 Selenium API 获取 HTML 文档内容

*   使用 lxml + xpath / CSS 选择器从文档中解析出相关部分

# ios - 如何从加速度计代码中排除特定轴？

> ID：10052467
> 
> 赞同：0
> 
> 时间：2012-04-07T06:56:55.573
> 
> 标签：ios, iphone, xcode, accelerometer

我在我的项目中使用加速度计功能，我需要从代码中排除某些轴。我想排除 Y 和 Z，只使用 X。谢谢

这是我正在使用的代码。

```
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{

    double const kThreshold = 1.5;
    //    double const kThreshold = 2.0;
    if ( fabsf(acceleration.x) > kThreshold
        || fabsf(acceleration.y) > kThreshold
        || fabsf(acceleration.z) > kThreshold) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:13:25.790

如果您只想检查 x 轴的 kThreshold 以上的加速度，请更改：

```
if ( fabsf(acceleration.x) > kThreshold
        || fabsf(acceleration.y) > kThreshold
        || fabsf(acceleration.z) > kThreshold) 
```

至：

```
if ( fabsf(acceleration.x) > kThreshold) 
```

# redirect - 可以使用 JavaScript 进行准确的浏览器检测/重定向吗？

> ID：10052469
> 
> 赞同：0
> 
> 时间：2012-04-07T06:57:23.007
> 
> 标签：redirect, browser-detection

如果这个答案在本网站或网上的其他地方，请原谅我。如果是的话，我肯定在过去几天的搜索中没有找到它。

我希望找到的是一种“*准确*”的方法来检测浏览器并重定向到一个简单的静态页面，如果不是最近的浏览器的话。

到目前为止，我发现的示例通常无法准确表示正在使用的实际浏览器。例如：

*   使用 Navigator 9 进行测试时，我会收到一条消息，提示我正在使用 Firefox 2
*   使用 Maxthon 3 进行测试时，它报告我使用的是 IE 9。

我的网站在我测试过的所有当前浏览器中都能正确显示。但我希望我能为那些出于任何原因仍在使用旧浏览器的 0.01% 的人提供一个基本的静态页面。他们仍然可以从我的网站获得一些基本信息，并鼓励他们更新到更新的浏览器。

如果有人有任何有用的建议，我将不胜感激。

非常感谢。

干杯，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:16:26.397

由于各种原因，浏览器检测从来都不是完美的。如果您使用的是 jQuery，您应该查看[jQuery.browser](http://api.jquery.com/jQuery.browser/)。

如果浏览器是非标准的，我会尝试检测服务器端的浏览器并执行 HTTP 重定向。大多数体面的框架都具有从用户代理字符串中检测浏览器的功能。同样，这并不完美，主要是因为数据浏览器报告。另外，如果傲游报它是IE，那是因为它*是*基于IE的，所以布局引擎应该是一样的。

所以你要么

*   支持少数浏览器并迎合他们的怪癖，将所有其他浏览器发送到一个基本页面（这对于未来版本的浏览器来说很糟糕，因为它们可能符合标准，但它们仍然会显示您的非常基本的页面），或者

*   你有一个所有浏览器都符合标准的页面，然后你定义了那些给你带来问题的替代方案。

我会选择第二个选项。它通常归结为适用于所有浏览器的一个版本，以及适用于各种版本的 IE 的许多 hack。另外，请记住避免在您的 CSS 中填充并使用边距。

最后，您可能不应该测试浏览器和版本号，而是支持的功能。尝试使用[Modernizr](http://modernizr.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:09:12.240

$.browser 属性在 jQuery 1.3 中已弃用。在 jQuery 支持站点上，他们强烈建议使用[检测功能](http://api.jquery.com/jQuery.support/)(JQuery.support) 而不是 jQuery.browser 属性。实际上，这已经在另一个问题中得到了回答，请在这里查看[如何检测浏览器的版本？](https://stackoverflow.com/questions/5916900/detect-version-of-browser)

# php - 在php中生成奇偶校验位

> ID：10052474
> 
> 赞同：1
> 
> 时间：2012-04-07T06:58:47.863
> 
> 标签：php, parity

我有一行数据，其中包含数字并按“-”拆分，如下所示：2012-421-020-120407 现在我想在我的 php 代码中在此字符串的末尾生成一个奇偶校验位（0 或 1） . 但我不知道该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:00:56.247

如果你有你的数字，用它`%`来确定这个数字是否能被 2 整除。如果是，它是偶数。如果不是，那就奇怪了。从该结果中收集您的平价。

```
$numbers = "2012-421-020-120407";
$numbers_array = explode( "-", $numbers );

print_r( $numbers_array ); // [0]=>2012 [1]=>421 [2]=>020 [3]=>120407

foreach ( $numbers_array as &$number )
  $number .= ( $number % 2 == 0 ) ? 0 : 1 ;

print_r( $numbers_array ); // [0]=>20120 [1]=>4211 [2]=>0200 [3]=>1204071 
```

如果您想要数字总和的奇偶校验，您可以尝试以下操作：

```
$numbers = "2012-421-020-120407";
preg_match_all( "/[0-9]+/", $numbers, $matches );

$parity = array_sum( $matches[0] ) % 2 ;

echo $parity; // Outputs 0 or 1 
```

# ruby-on-rails - ruby rails - 重定向到原始请求 url

> ID：10052479
> 
> 赞同：11
> 
> 时间：2012-04-07T06:59:59.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我用于重定向到默认 url(myapp_url) 的内容。但我想更改重定向以转到用户在身份验证后输入的请求 url。我怎么做？我尝试了从此处搜索的几个选项，例如：back。但是不行。

用户输入一个 url，如果未通过身份验证则被重定向到登录页面，然后在登录后用户将被重定向到原始请求 url。

```
def create
   user = User.Authenticate(params[:user_id], params[:password])
 if user
   session[:user_id] = user.id
   redirect_to myapp_url, :notice => "Logged in!"
else
    flash.now.alert = "Invalid email or password"
    render "new"
  end

end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T16:08:39.110

您可以阅读Michael Hartl 的“Ruby on Rails 教程”中[有关“友好转发”的章节](https://www.railstutorial.org/book/_single-page#sec-friendly_forwarding)，了解如何轻松实现它。

基本上你有 3 个辅助方法：

1.  `store_location`在会话中存储用户所需的位置
2.  `redirect_back_or(url)`将用户重定向到存储在会话中的位置，或者，如果未设置，则重定向到`url`方法参数中包含的位置
3.  并`clear_return_to`通过该`redirect_back_or`方法“内部”使用，以清除该条信息。

然后你使用这些方法：

A) 当您看到访客用户尝试访问需要身份验证的页面时，`store_location`会将其重定向到登录页面。
B）当用户登录时，您使用`redirect_back_or(url)`将他重定向到正确的位置（当然如果存在）

这是对其工作原理的概述，您明白了，但我建议阅读该章以了解实现（很少）细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:06:04.920

您需要在身份验证重定向之前保存会话中的路径，并在成功进行身份验证后重定向到该路径。

# wpf - WPF中用于绑定数据的逻辑容器

> ID：10052480
> 
> 赞同：0
> 
> 时间：2012-04-07T07:00:08.373
> 
> 标签：wpf, data-binding, controls

我想将一个数据绑定到多个控件。**WPF**中是否有一些逻辑控制来实现这一点？例如我有一个`Grid`

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>

    <TextBlock Text="{Binding Name}" />
    <Button Grid.Column="1" Grid.RowSpan="2" IsEnabled="{Binding IsSimulationRunning}" />
    <controls:PlayerControl Grid.Row="1" IsEnabled="{Binding IsLoaded}" />
</Grid> 
```

我想绑定`TextBlock`到一个数据和`Button`另一个数据`PlayerControl`，如下所示：

```
<Container DataContext="{Binding Object2}">
    <Button IsEnabled="{Binding IsSimulationRunning}" />
    <controls:PlayerControl IsEnabled="{Binding IsLoaded}" />
</Container> 
```

我怎样才能以最好的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:10:23.423

绑定绑定到包含依赖属性的元素的 DataContext。您可以将 DataContext 绑定到底层视图模型：

```
<TextBlock DataContext="{Binding Object1}" Text="{Binding Name}" />
<Button Grid.Column="1" Grid.RowSpan="2" 
    DataContext="{Binding Object2}" IsEnabled="{Binding IsSimulationRunning}" />
<controls:PlayerControl Grid.Row="1" 
    DataContext="{Binding Object2}" IsEnabled="{Binding IsLoaded}" /> 
```

如果您的视图模型如下所示：

```
public class PlayerViewModel {        
    public TrackViewModel Object1 { get; set; }
    public PlaybackViewModel Object2 { get; set; }
}
public class TrackViewModel { public string Name { get; set; } }
public class PlaybackViewModel { 
    public bool IsLoaded { get; set; } 
    public bool IsSimulationRunning { get; set; }
} 
```

在这种情况下，您可以直接绑定到对象。要点是您需要在 1 个公共视图模型中拥有两个对象。

```
<TextBlock Text="{Binding Path=Object1.Name}" />
<Button Grid.Column="1" Grid.RowSpan="2" IsEnabled="{Binding Path=Object2.IsSimulationRunning}" />
<controls:PlayerControl Grid.Row="1" IsEnabled="{Binding Path=Object2.IsLoaded}" /> 
```

# iphone - 在 NSArray 中添加字符串元素

> ID：10052482
> 
> 赞同：2
> 
> 时间：2012-04-07T07:00:27.903
> 
> 标签：iphone, objective-c, arrays, nsstring, nsarray

我有一个名为 arrayout 的可变字符串数组。它有 3 个元素。现在我想添加 1 个字符串元素该数组。但是当我尝试添加时，它正在采用空值....无法得到做什么...请帮助...

我的代码是：

```
 NSString *ds1 = @"--";
        [arrayout arrayByAddingObject:ds1];
        NSLog(@"arrrrr '%@'",arrayout); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T07:03:26.067

试试这个：

```
NSString *ds1 = @"--";
[arrayout addObject:ds1];
NSLog(@"arrrrr '%@'",arrayout); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T11:20:18.697

你也可以这样做：

```
NSMutableArray *arrayout = [[NSMutableArray alloc] init];        // alloc here
[arrayout insertObject:@"SomeText Here" atIndex:[arrayout count]];  // insert here
NSLog(@"Appended Array: '%@'",arrayout);                      // Print here 
```

这将填充`arrayout`.`SomeText Here`

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T07:07:41.967

你为什么要像这样连接字符串？你可以做一些简单的事情，比如

```
NSString* newString = [NSString stringWithFormat:@"%@/%@/%@", string1, string2, string3]; 
```

# sql-server - 从两个不同的表中获取值时将行连接成单列

> ID：10052483
> 
> 赞同：0
> 
> 时间：2012-04-07T07:00:31.237
> 
> 标签：sql-server, sql-server-2008

> **可能重复：**
> [根据 ID 连接值](https://stackoverflow.com/questions/6603319/concatenate-values-based-on-id)

我有两张桌子

**表 1**包含

```
pkUserSubjectid  UserId  fkSubjectId
   15              146     1
   16              146     2
   17              146     4
   18              147     1
   19              147     3
   20              148     1
   21              148     3
   22              149     1
   23              149     3 
```

**表 2**包含

```
pkSubjectId   SubjectName
      1        Maths
      2        English
      3        Physics
      4        Chemistry
      5        Computer 
```

我想要这种格式的结果

```
 UserId     SubjectName
   146       Maths, English, Chemistry
   147       Maths, Physics 
```

等等

请告诉我 SQL 中的任何查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:45:24.930

考虑构建一个 clr 聚合函数。msdn 示例函数适用于此。

[http://msdn.microsoft.com/en-us/library/ms131056(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms131056(v=sql.100).aspx)

然后你可以做类似的事情

```
SELECT a.[UserId], dbo.MyAgg(b.[SubjectName]) as [SubjectName] 
FROM table1 as a 
LEFT OUTER JOIN table2 as b ON a.[fkSubjectId] = b.[pkSubjectId] 
GROUP BY a.[UserId] 
```

该示例使用单个参数并使用“，”作为分隔符。您还可以像第二个示例中那样创建一个 2 参数函数来传递分隔符。

# java - JAXB 解组非包装元素

> ID：10052484
> 
> 赞同：0
> 
> 时间：2012-04-07T07:00:42.773
> 
> 标签：java, xml, jaxb

我有以下输入从第 3 方进入我的应用程序

```
 <?xml version="1.0"?>
    <document>
      <name>Foobar</name>
      <descriprion>Foobar Foobar</descriprion>
      <lead>Lorem</lead>
      <bodytext>Foobar Foobar Lorem</bodytext>

      <ImageFile1>pic123</ImageFile1>
      <caption1><![CDATA[yadda yadda]]></caption1>
      <photographer1><![CDATA[Mr. Foobar]]></photographer1>
      <crop1>1.01 0 0 1.01 0 -80000 0</crop1>
      <width1>283.86</width1>
      <height1>164.51</height1>

      ...

      <ImageFile38>000bemdt</ImageFile38>
      <caption38><![CDATA[Ljubov Kavaljova]]></caption38>
      <photographer38><![CDATA[]]></photographer38>
      <crop38>1.24 0 0 1.24 -369326 -69264 0</crop38>
      <width38>44.10</width38>
      <height38>68.35</height38>
    </document> 
```

我正在将 XML 解组为对象 X。请注意，图像文件元素没有被包装，而是被编号！如何将那些未包装的元素和相关元素解组为对象列表，我将其设置为对象 X 的列表类型字段？

```
public class Article()
{
  private String name;
  private String description;
  private String lead;
  private String bodytext;
  private List<Picture> pictures;
}

public class Picture()
{
  private String fileName;
  private String caption;
  private String photographer;
  private String crop;
  private String width;
  private String height;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:27:32.500

您可以使用`XmlAnyElement`注释。

看[这里](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlAnyElement.html)。

# c++ - 如何在 OPNET Modeler 的调试模式下显示打印语句？

> ID：10052485
> 
> 赞同：1
> 
> 时间：2012-04-07T07:00:43.777
> 
> 标签：c++, visual-studio, debugging

我在 OPNET Modeler 中编写 C++ 代码。我尝试在调试器模式下模拟我的场景，并且我需要跟踪我编写的函数。我需要显示我把它放在我的代码中的打印语句。

我在调试器模式下使用：`***ltr function_name()***`然后`***c***`

但结果看起来像：

```
Type 'help' for Command Summary

ODB> ltr enqueue_packet()
Added trace #0: trace on label (enqueue_packet())

ODB> c
|-----------------------------------------------------------------------------|
| Progress: Time (1 min. 52 sec.); Events (500,002)                           |
| Speed: Average (82,575 events/sec.); Current (82,575 events/sec.)           |
| Time : Elapsed (6.1 sec.)                                                   |
| DES Log: 28 entries                                                         |
|-----------------------------------------------------------------------------|
|-----------------------------------------------------------------------------|
| Progress: Time (1 min. 55 sec.); Events (1,000,002)                         |
| Speed: Average (69,027 events/sec.); Current (59,298 events/sec.)           |
| Time : Elapsed (14 sec.)                                                    |
| DES Log: 28 entries                                                         |
|-----------------------------------------------------------------------------|
|-----------------------------------------------------------------------------|
| Progress: Time (1 min. 59 sec.); Events (1,500,002)                         |
| Speed: Average (51,464 events/sec.); Current (34,108 events/sec.)           |
| Time : Elapsed (29 sec.)                                                    |
| DES Log: 28 entries                                                         |
|-----------------------------------------------------------------------------|
|-----------------------------------------------------------------------------|
| Simulation Completed - Collating Results.                                   |
| Events: Total (1,591,301); Average Speed (48,803 events/sec.)               |
| Time  : Elapsed (33 sec.); Simulated (2 min. 0 sec.)                        |
| DES Log: 29 entries                                                         |
|-----------------------------------------------------------------------------|
|-----------------------------------------------------------------------------|
| Reading network model.                                                      |
|-----------------------------------------------------------------------------| 
```

我需要在我的代码中显示打印语句。它必须出现在哪里？在运行模拟之前是否有任何步骤以确保 OPNET 调试器使用 Visual Studio 并通过我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T16:13:18.310

OPNET Modeler 提供以下命令来打印跟踪输出：

op_prg_odb_print_major() 以从主缩进级别开始的 ODB 跟踪语句的格式将字符串序列打印到标准输出设备。

op_prg_odb_print_minor() 以次要缩进级别的 ODB 跟踪语句的格式将字符串序列打印到标准输出设备。

op_prg_text_output() 将用户定义的字符串序列打印到标准输出设备。

例如：

```
if (op_prg_odb_ltrace_active ("tcp_window")) {
  /* a trace is enabled, output Window-Related Variables */
  char str0[128], str1[128], str2[128];
  sprintf (str0, "rcv requests pending : (%d)", num_rcvs_allowed);
  sprintf (str1, "local receive window : (%d)", receive_window);
  sprintf (str2, "remote receive window : (%d)", remote_window);
  op_prg_odb_print_major ("Window-Related Variables", str0, str1, str2, OPC_NIL);

  sprintf (str0, "send unacked : (%d)", send_unacked);
  sprintf (str1, "send_next : (%d)", send_next);
  sprintf (str2, "receive next : (%d)", receive_next);
  op_prg_odb_print_minor (str0, str1, str2, OPC_NIL);
} 
```

显示在标准输出设备上的示例输出：

```
 |       Window-Related Variables
            |               rcv requests pending : (3)
            |               local receive window : (6400)
            |               remote receive window : (10788)
            |               send unacked : (4525)
            |               send_next : (5000)
            |               receive_next : (1200) 
```

[代码取自 OPNET Modeler 文档。]

注意：我猜您正在修改标准模型并使用 stdmod 存储库。如果是这种情况，您的代码没有被编译，您将不会在调试器中看到任何打印语句。查看首选项“网络模拟存储库”以查看您是否使用存储库而不是编译自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:25:19.713

我不太了解您要做什么，但我认为您可以使用以下命令将语句直接输出到 C++ 代码的调试器

`OutputDebugStringA("Your string here");`

要不就

`OutputDebugString("Your string here");`

希望这可以帮助！

# jquery - jqueryMobile 和 phonegap pageinit 和 ajax 手风琴

> ID：10052487
> 
> 赞同：0
> 
> 时间：2012-04-07T07:00:56.460
> 
> 标签：jquery, jquery-mobile, cordova

我的代码：

```
$('#cars').live('pageinit',function() {
    var msg = "";
    $.ajax({
        url: 'http://192.168.23.20/php/getcar.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',  
        success: function(data){
        msg += '<div data-role="collapsible-set">';
            $.each(data, function(i,v){
                msg += '<div data-role="collapsible">';
                msg += '<h3>'+v.carName+'</h3>';
                msg += '<p>'+v.cardesc+'</p>';
                msg += '</div>';
            });
        msg += '</div>';
        $(".car").after(msg);
        }
    });         
}); 
```

输出显示为纯文本而不是 JQM 手风琴。有什么解决方法可以在 pageinit 上做 JQM 手风琴吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:26:30.947

如果您要动态创建手风琴列表或动态修改，那么您需要刷新该特定手风琴以获得 JQM 样式和效果，您可以通过`$('.selector').collapsibleset('refresh');`

可能这（未经测试）对您有用。

```
$accordion_div = $('<div data-role="collapsible-set"></div>');
msg = ""
$.each(data, function(i,v){
  msg += '<div data-role="collapsible">';
  msg += '<h3>'+v.carName+'</h3>';
  msg += '<p>'+v.cardesc+'</p>';
  msg += '</div>';
});
$accordion_div.html(msg);
$accordion_div.appendTo(".car").collapsibleset('refresh'); 
```

# javascript - Javascript RegExp花括号和测试问题

> ID：10052488
> 
> 赞同：0
> 
> 时间：2012-04-07T07:01:11.113
> 
> 标签：javascript

我希望 regExp 测试两个 'Hello'-s 并返回 true，但它只返回 false，即使我找不到我的代码有任何问题。我该如何解决？还请提出代码有什么问题。

```
<html>
<body>

<script type="text/javascript">

var str ="Hello Hello";
var patt = /(hello){2}/gi;
var result =patt.test(str);
document.write("Returned value: " + result); 
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:15:53.733

你忘了空格：

```
var patt = /(hello ?){2}/gi; 
```

您原来的 RE 匹配“HelloHello”，但不是两次出现的“Hello”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:06:00.440

您可以使用在`match()`正则表达式和字符串之间搜索匹配项并返回匹配项的方法。

```
 var result = "Hello hello".match(/Hello/gi); // Array { 0="Hello", 1="hello"}

   result.length // 2 
```

如果您想使用搜索而不是匹配：

```
 "hello hello ".search(/(hello ?){2}/gi); // it returns 0 when it find two occurrences of hello
                                            // if not it returns -1 
```

# javascript - JavaScript 中 URL 值跟踪的一部分

> ID：10052491
> 
> 赞同：0
> 
> 时间：2012-04-07T07:01:25.420
> 
> 标签：javascript

我有例如这个网址

```
www.mypage/SessionPage.aspx?session=session%202#b 
```

使用此代码我可以跟踪完整的 URL

```
 _gaq.push(['pageTrackerTime._trackEvent', 'category', 'action', document.location.href, roundleaveSiteEnd]); 
```

但是我只想参与其中`session%202`

有没有办法在 JavaScript 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:08:43.130

使用正则表达式

```
function getSessionId() {
  var re = /session=([^&=]+)/g;
  var match = re.exec(document.location.href);
  if (match) {
     var sessionId = match[1];
     return sessionId;
  }
  return null;
} 
```

# logic - 将函数从 AND、NOT 和 OR 门转换为仅 NOR

> ID：10052492
> 
> 赞同：0
> 
> 时间：2012-04-07T07:01:31.343
> 
> 标签：logic, boolean, boolean-logic

我有一个由 AND NOT 和 OR 门制成的电路，我需要对其进行转换，使其只有 NOR 门，这对我来说效果不佳，因此非常感谢任何提示。这是要转换的原始函数：

```
~a~b~cd + ~a~bc~d + ~ab~c~d + ~abcd + a~b~c~d + a~bcd + ab~cd + abc~d 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:08:53.137

我假设 cd 表示 c AND d。[规则](http://en.wikipedia.org/wiki/Logical_NOR#Introduction.2C_elimination.2C_and_equivalencies)是：

*   ~a = a 或 a
*   a^b = (a 或 a) 或 (b 或 b)
*   a+b = (a 或 b) 或 (a 或 b)

从那以后，它是纯机械的。我将以第一部分为例：

```
~a~b~cd + ~a~bc~d
(a NOR a)(b NOR b)(c NOR C)d + (a NOR a)(b NOR b)c(d NOR d)
(((a NOR a) NOR (a NOR a)) NOR ((b NOR b) NOR (b NOR b)))(c NOR C)d + (a NOR a)(b NOR b)c(d NOR d) 
```

# request - 如何知道 Kohana 请求是否是内部请求？

> ID：10052500
> 
> 赞同：3
> 
> 时间：2012-04-07T07:03:13.790
> 
> 标签：request, kohana, kohana-3, internal

我正在使用 Kohana 编写一个 API。每个外部请求都必须由客户端签名才能被接受。

但是，有时我还需要通过构建`Request`对象并调用`execute()`. 在这些情况下，签名是不必要的，因为我知道请求是安全的。所以我需要知道请求是内部的，这样我就可以跳过签名检查。

那么有什么方法可以查明请求是否是使用`Request`对象手动创建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:15:53.833

查看 Request 看起来您的新请求将被视为内部请求，但没有设置任何特殊标志来告诉您这一点。看看 Kohana_Request 中的 782 到 832 ……没有什么可以帮助你的。

有了这个，我建议扩展 Kohana_Request_Internal 以添加一个将其显示为内部的标志，并在您需要检查它是否为内部/所有其他时将其拉入您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:40:50.353

可以使用请求对象的 is_initial() 方法吗？使用此方法，您可以确定请求是否为子请求。

[Kohana 3.2 API，请求 - is_initial()](http://kohanaframework.org/3.2/guide/api/Request#is_initial)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T04:16:30.547

这就是我最终这样做的方式：我已经覆盖了该`Request`对象并`is_server_side`为其添加了一个属性。现在，当我创建请求时，我只是将其设置为 true，以便我知道它是在服务器端创建的：

```
$request = Request::factory($url);
$request->is_server_side(true);
$response = $request->execute(); 
```

然后稍后在控制器中接收请求：

```
if ($this->request->is_server_side()) {
    // Skip signature check
} else {
    // Do signature check
} 
```

这是**application/classes/request.php**中被覆盖的请求类：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Request extends Kohana_Request {

    protected $is_server_side_ = false;

    public function is_server_side($v = null) {
        if ($v === null) return $this->is_server_side_;
        $this->is_server_side_ = $v;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T01:30:35.323

听起来您可以通过设置应用程序可以检查的某种静态变量来轻松解决此问题。如果它不是 FALSE，那么你就知道它是内部的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T07:25:17.830

也许您正在寻找`is_external`方法： http:
[//kohanaframework.org/3.2/guide/api/Request#is_external](http://kohanaframework.org/3.2/guide/api/Request#is_external)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-15T08:17:56.040

控制器中的 Kohana 3.3：

```
$this->request->is_initial() 
```

[http://kohanaframework.org/3.3/guide-api/Request#is_initial](http://kohanaframework.org/3.3/guide-api/Request#is_initial)

# html - Cant Head 部分包含任何标签？

> ID：10052501
> 
> 赞同：1
> 
> 时间：2012-04-07T07:03:22.710
> 
> 标签：html

来自 Richard Kiessig 的超快速 asp.net 书籍，

头部分不能包含任何导致浏览器在屏幕上绘制内容的标签，用户将看到注意，直到它下载了该部分中的所有资源。

——他从这句话中指的是什么？

```
<HEAD runat ="server">
        <title>WebForm1</title>
        <h1> Hi </h1>
    </HEAD> 
```

浏览器正在播放“嗨”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:24:28.950

`h1`里面`head`是无效的html。不允许。但是，如果网络浏览器的生产者拒绝所有无效的 html 文档，大约 90%（甚至更多）的网站将不会显示给用户。

于是，一个浏览器生产商开发了一个浏览器，它也可以渲染无效的网站，所有的用户都开始使用这个浏览器。因此，正确的网络浏览器的生产者没有其他机会。他们还构建了可以呈现无效 html 的浏览器。正因为如此，所有正在使用的网络浏览器都是能够呈现无效 html 的浏览器。

但：

没有关于如何呈现无效 html 的标准定义。所以每个生产者对于如何显示无效文档都有自己的想法，因此，当您编写无效的 html 时，您可能会很幸运，并且该文档在您用于开发和测试的浏览器中看起来很好。但是您网站的用户不仅使用您的浏览器。他们使用所有可用的浏览器，如果您的 html 代码无效，那么很有可能很多用户使用您不知道的浏览器，并且该浏览器不会显示您想要的内容，而是一些垃圾。

结论：

*   真正优秀的 Web 浏览器的生产者必须生产可以呈现任何垃圾的浏览器。
*   真正好的 html 文档的生产者必须产生有效的 html。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:26:09.197

声明“头部部分不能包含任何导致浏览器在屏幕上绘制内容的标签，用户将看到注意，直到它下载了该部分中的所有资源。” 最好忽略；它只会引起混乱并且缺乏意义。试图纠正其中的错误需要很长时间，而且不会真正导致任何结果。

关于无效标记的处理

```
<HEAD runat ="server">
        <title>WebForm1</title>
        <h1> Hi </h1>
    </HEAD> 
```

简单的答案是，当浏览器在解析元素时遇到时，它们的解析器会暗示一个结束`</head>`标签和一个开始标签。这完全符合 HTML 规范。`<body>``<h1>``head`

在片段中，除了`runat ="server"`根本不希望传递给客户端的属性（它是 ASP 而不是 HTML）之外，唯一无效的东西是虚假的结束标记`</HEAD>`。元素已经关闭，`head`不能再次关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T07:05:34.970

是的，当然`<head></head>`可以包含默认情况下带有该`display:none;`属性的所有标签。这些是 和 之类的`<meta>`元素`<title>`。但`<h1>`必须在屏幕上渲染，它是`display:inline;`. 但大多数元素不是`display:none;`，应该放在该`<body></body>`部分中。

那时它不会通过 w3c 进行验证，因此您违反了 Web 标准。但是，它应该在所有现代浏览器中都可以正常呈现。大多数人会说您希望在构建网页时保持组织和质量，其中一部分是确保您的代码是正确的语法。

ETA：标准 HTML5 标记...

```
<!DOCTYPE html>
<html>
    <head>
        <title>My Title</title>
        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <header>
        </header>

        <section>
        </section>

        <footer>
        </footer>
    </body>

</html> 
```

在那个 lt IE9 评论中，它添加了对 IE 8 及以下不支持它的 HTML5 的支持。;-)

# html - 制作一个简单的单页网站，以便在 iPhone 上浏览

> ID：10052503
> 
> 赞同：1
> 
> 时间：2012-04-07T07:04:04.373
> 
> 标签：html, css, mobile-safari, mobile-website

我对网页设计非常陌生，只是在[这里](http://thefalconapp.com)为我的 iOS 应用程序制作了一个简单的单页网站。我现在想这样做，以便当在 iPhone 上打开此页面时，整个内容已足够缩小，因为现在页面的右半部分不显示。[根据我迄今为止](https://stackoverflow.com/questions/6701919/retrofit-existing-web-page-with-mobile-css)的理解和[研究](https://stackoverflow.com/questions/7244387/building-a-single-page-compatible-for-mobile-where-to-start) ，我需要使用媒体查询并为移动设备创建一个单独的 CSS 样式表。但是，我觉得对于这样一个简单的页面，应该有一个更简单的解决方案，其中包含一些即插即用的代码。由一个简单的条件类型语句组成的东西，检查用户是否在移动设备上，如果是，则给出页面的新尺寸。在涉及 Web 开发时，除了 html、css 和 javascript 的基本知识外，我真的什么都不知道，所以非常感谢简单的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:08:22.433

我认为你必须去[http://www.jquerymobile.com](http://www.jquerymobile.com)它是非常好的移动网络框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:44:20.977

[您可能希望尝试使用viewport 元标记](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag)，而不是创建特定于移动设备的页面。桌面浏览器不使用该标签，但它会缩放您在移动设备屏幕上看到的内容的大小。您还可以查看[Apple 的指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)以获取更多信息。

# php - 在jquery中提交没有页面刷新问题

> ID：10052510
> 
> 赞同：0
> 
> 时间：2012-04-07T07:04:58.763
> 
> 标签：php, javascript, jquery, mysql, submit

我想在不刷新 jquery 页面的情况下提交表单。

但我不知道为什么数据没有插入数据库。下面的代码有问题吗？

在此之前，我已经提到过[这里](http://www.ryancoughlin.com/2008/11/04/use-jquery-to-submit-form/)，希望我没有写错。

HTML

```
<form id="submit">
    <fieldset><legend>Enter Information</legend> <label for="fname">Client First Name:</label> 
    <input id="vName" class="text" type="text" name="vName" size="20" /> 
    <label for="lname">Client Last Name:</label> 
    <input id="vLat" class="text" type="text" name="vLat" size="20" /> 
    <input id="vLng" class="text" type="text" name="vLng" size="20" /> 
    <input id="Add" class="text" type="text" name="Add" size="20" /> 
    <button class="button positive"> <img src="../images/icons/tick.png" alt="" /> Add Client </button></fieldset>
</form> 
```

Javascript

```
$("form#submit").submit(function() {
// we want to store the values from the form input box, then send via ajax below
var vName     = $('#vName').val();
var vLat      = $('#vLat').val();
var vLng      = $('#vLng').val();
var Add      = $('#Add').val();
    $.ajax({
        type: "POST",
        url: "ajax.php",
        data: "vName="+ vName +"&amp; vLat="+ vLat +"&amp; vLng="+ vLng +"&amp; Add="+ Add,
        success: function(){
            $('form#submit').hide(function(){$('div.success').fadeIn();});

        }
    });
return false;
}); 
```

dbtools.inc.php

```
<?php
      function create_connection()
      {
        $link = mysql_connect("localhost", "root", "52082475");
        if (!$link) {
            die('Could not connect: ' . mysql_error());
        }
        echo 'Connected successfully';
        mysql_close($link);

        mysql_query("SET NAMES utf8");
      }

      function execute_sql($database, $sql, $link)
      {
        $db_selected = mysql_select_db($database, $link)
          or die("Fail <br><br>" . mysql_error($link));

        $result = mysql_query($sql, $link);

        return $result;
      }
?> 
```

ajax.php

```
<?php

    include ("dbtools.inc.php");
    $link = create_connection();
    // CLIENT INFORMATION
    $vName        = htmlspecialchars(trim($_POST['vName']));
    $vLat         = htmlspecialchars(trim($_POST['vLat']));
    $vLng         = htmlspecialchars(trim($_POST['vLng']));
    $Add          = htmlspecialchars(trim($_POST['Add']));

    $sql  = "INSERT INTO map_db (vName,vLat,vLng,add) VALUES ('$vName','$vLat','$vLng','$Add')";

        $result = execute_sql("map",$sql,$link);        
        mysql_close($link);
        header("location:add.html"); 
        exit(); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:20:05.397

对于初学者，您的 PHP 代码不安全（查找 sql 注入和准备好的语句）。接下来让你的 PHP 代码回显/打印一些东西——查询的结果。例如，您可能希望使用 JSON 或 XML 来打印查询结果（好||坏）。这样，ajax 可以在`success`函数中使用它来确定查询是否成功，从而可以适当地显示错误或成功消息。

还响应 ajax 请求中的错误（[参考这里](http://api.jquery.com/jQuery.ajax/)）。例如：

```
ajax.({
   url:..,
   ....
   error: function() {
   ...
   }
}); 
```

通过解释 PHP 的响应，您应该能够确定错误的原因是什么（错误的 mysql 连接、查询、语法、url、数据等）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:21:38.820

我认为您的 ajax post 方法的数据字段中存在语法错误...

如果您想发布整个表格，请使用...

```
var formData= $('form').serialize();

data: formData 
```

或使用以下代码发送单个参数...

```
data: { 'vName' : vName, 'vLat' :  vLat, 'vLng' : vLng} 
```

我不熟悉 php 编码风格...但这适用于 c# 方法签名...根据发布的数据字段更改 php 中的代码

注意：在您的提交方法中使用 preventDefault()，以免重定向/刷新您的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:22:53.040

如果您想提交表单数据，则无需使用表单标签，而是使用这样的按钮

```
<input type = 'image' src ='blah blah' id = 'submit'> 
```

我还在这里看到您正在使用提交事件而不是使用点击事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T07:26:06.847

`create_connection()`我猜你不应该关闭连接。该功能的存在是为了*打开*一个新功能:)

哦，你似乎也想`$link`从同一个方法返回，即使你并不真的需要所有的代码（既不显式`mysql_close()`也不使用`$link`，除非你碰巧连接到两个或多个不同的数据库在同一个脚本）。

服务器端代码似乎很弱且不安全。如果它是一个宠物项目，那没关系，但如果可能变得很严重，你应该注意 sql 注入和 PHP 漏洞，或者使用通常为你处理这个问题的 PHP 框架

# clojure - 使用 Clojure 的 FTP

> ID：10052511
> 
> 赞同：5
> 
> 时间：2012-04-07T07:05:01.553
> 
> 标签：clojure, ftp

是否有任何库可以使用 clojure 执行 FTP 传输，惯用 clojure，或者是否有必要使用 java 库，如 apache commons？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:14:04.743

没有必要使用 java 库，您可以在 Clojure 中滚动完整的 FTP 实现，但这就像重新发明轮子一样，不是一件可行的事情。您可以做的可能是在 Java 库上编写一个功能更强大的包装器，然后在您的 clojure 代码中使用该包装器，这样一切看起来都是无缝的，而不是在 Clojure 中使用了多少现有的 Java 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T13:05:03.707

您可以通过调用一些便利功能或打开客户端并使用它调用多个命令来使用[https://github.com/miner/clj-ftp 。](https://github.com/miner/clj-ftp)

完整的 API 记录在 GitHub 的[https://github.com/miner/clj-ftp/blob/master/src/miner/ftp.clj](https://github.com/miner/clj-ftp/blob/master/src/miner/ftp.clj)中。

**project.clj 的内容**

```
(defproject my-sweet-project "0.5.0"
  :dependencies [[com.velisco/clj-ftp "0.3.0"]
                 ; Other deps
                 ]
  ; ...
) 
```

**调用单个 FTP 命令**

这将为每个命令打开新的 FTP 连接，因此它只能用于调用单个命令。有关这些便利功能的完整列表，请参阅完整的 API。

```
(ns my-sweet-name.space
  (:require [miner.ftp :as ftp]))

(defn list-files-from-ftp-server []
  "Here we list contents of a directory with a convenience function"
  (let [ftp-url "ftp://username:password@my.ftp.server.host:port/path/to/stuff"]
    (ftp/list-files ftp-url))) 
```

**调用具有相同连接的多个命令**

这将打开 FTP 连接并使用它调用任意数量的命令。这应该在应该调用多个命令时使用。FTP 连接将自动关闭。再次检查完整的 API 以获取完整的函数列表。

```
(ns my-sweet-name.space
  (:require [miner.ftp :as ftp]))

(defn list-and-download-files []
  "Here we list and download contents of a directory"
  (let [ftp-url "ftp://username:password@my.ftp.server.host:port/path/to/stuff"]
    (ftp/with-ftp [ftp-client ftp-url]
      ; client-file-names is used to list contents of the ftp-url
      ; client-get is used to download a file
      (doseq [file-name (ftp/client-file-names ftp-client)]
        (let [local-file-name (str "/download-path/" file-name)]
          (ftp/client-get ftp-client file-name local-file-name)))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:40:08.100

[https://github.com/miner/clj-ftp](https://github.com/miner/clj-ftp)是 Apache Commons Net 的包装器。

# map - 悬停在特定国家/地区时，在空白世界地图上突出显示国旗

> ID：10052519
> 
> 赞同：4
> 
> 时间：2012-04-07T07:06:27.383
> 
> 标签：map, svg, flags, country, jvectormap

我正在使用[jVectormap](http://jvectormap.owl-hollow.net/)插件在世界地图上突出显示国家/地区。现在正如我的问题所暗示的，我想在特定国家悬停时显示国家的国旗。

我不想为整个世界地图做图像映射。所以不要发布那个解决方案，我认为它不是一个可行的解决方案，因为我没有时间这样做。

如果有人使用任何插件、svg、谷歌地图、js 完成此功能，请帮助我。

如果有任何付费插件，那么我想知道。我已经搜索了2天。但我还没有遇到过这样的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T14:54:48.817

您可以提供一个函数，[`onRegionLabelShow`](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)该函数使用该区域`code`为国家标志构造 URL，然后自定义`label`.

```
$(function() {
    $('#map').vectorMap({
        onRegionLabelShow: function(event, label, code)
        {
           label.html(label.html()+
           '<br><img src="'+getFlagImgSrc(code)+'" height="20">');
        }
    });

    /*
    * Constructs a URL for a country flag image on Flags Of The World 
    * using the ISO-3166 Digraph 
    */
    function getFlagImgSrc(code)
    {
       return 'http://www.fotw.us/images/'+
               code.toLowerCase().substring(0,1)+
               '/'+
               code.toLowerCase()+
               '.gif';  
    }    

});​ 
```

当您将鼠标悬停在某个地区上时，呈现的标签与国家标志的外观示例：

![在此处输入图像描述](../Images/2c766a9e04c946cdc8894400a926a32e.png)

# regex - 在正则表达式中单独离开

> ID：10052522
> 
> 赞同：0
> 
> 时间：2012-04-07T07:06:39.027
> 
> 标签：regex, c#-3.0, regex-negation

我正在使用 C# 正则表达式。

我如何匹配（任何较低的上部和/或 &）

```
A & E    ==> Should leave this as is
a & e    ==> Should leave this as is 
```

而不是这个

```
A &#1234 B ==> Should convert to A B

A&#1234 B ==> Should convert to A B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:21:11.750

看起来您真的只想从字符串中删除 &#Digit？

```
new Regex(" ?&#[0-9]+").Replace("A&#1234", "") 
```

# windows-phone-7 - 在 windowsphone 7.5 中使用 listpicker 进行多项选择

> ID：10052523
> 
> 赞同：0
> 
> 时间：2012-04-07T07:07:14.163
> 
> 标签：windows-phone-7

在 ListPicker 中找不到 SelectionMode 属性。我们在项目中包含了对 Microsoft.Phone.Controls.Toolkit 的引用，并且还包含了

xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"

在 xaml 页面中。但我们无法提供 SelectionMode=Multiple

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:42:31.537

确保您拥有最新版本，以前的版本没有`SelectionMode`属性

# objective-c - 在编写使用 NSDictionary 将变量转换为数字的方法时遇到问题

> ID：10052530
> 
> 赞同：0
> 
> 时间：2012-04-07T07:08:29.710
> 
> 标签：objective-c, ios, nsdictionary

一点背景知识：我正在自学如何编写 iOS。所以我是初学者。我只是无法解决这个问题。

我有一个基本上应该在按钮上获取变量的方法，将该变量传递给我的变量转换方法。

变量转换方法只是应该经过一个预定义的`NSDictionary`，基本上是搜索变量并返回相关值。

然后使用该关联变量更新显示。

即如果 x 的值为 2，那么当我按下 x 时，屏幕应该只显示 2。我只是想自学 NSDictionary 和所有这些，所以任何帮助都会很棒。

```
- (IBAction)variablePressed:(id)sender {
    NSDictionary *values = [NSDictionary dictionaryWithObjectsAndKeys: 
                            [NSNumber numberWithInt:2], @"x",
                            [NSNumber numberWithInt:4], @"y",
                            [NSNumber numberWithInt:6], @"z", nil];
    double newValue = [self.brain convertVariable:[sender currentTitle] usingVariableValues:values];

  // NSLog([NSString stringWithFormat:@"%d", newValue]);
} 
```

代码在与`NSLog`. 我把它注释掉了，因为我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:39:23.250

尝试将 NSLog 语句更改为以下...

```
NSLog(@"newValue is %f", newValue); 
```

NSLog 执行参数替换，因此不需要 stringWithFormat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:23:53.413

您没有在 stringWithFormat 中使用正确的变量替换。它试图将其读取为数字。这会导致从该内存位置读取的字节数不正确（或者我假设如此），并导致崩溃（这部分不是假设 xD）。%d 看起来应该表示“double”，但实际上表示“digit”（int、short 等）。将其更改为 %f (=float) 就可以了。

**编辑**如另一个答案中所述，NSLog 的工作方式与 stringWithFormat 相同（它直接采用格式字符串和参数）。您不需要将 stringWithFormat 传递给它。事实上，这样做会导致编译器警告可能不安全的字符串。

# android - 如何从android中的ArrayAdapter类调用下一页

> ID：10052531
> 
> 赞同：1
> 
> 时间：2012-04-07T07:08:36.617
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

Hai Friends 我是 Android 的新手 ..如何从 ArrayAdapter 类导航到另一个活动类。我不知道如何导航。我知道“intent”关键字用于将一个活动导航到另一个活动..但现在我使用 ArrayAdapter 类，如果我使用“intent”关键字导航另一个活动，我会出错。

```
package org.ajsquare.test;

import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
 import android.database.DataSetObserver;
 import android.graphics.Color;
 import android.sax.StartElementListener;
  import android.view.LayoutInflater;
  import android.view.View;
 import android.view.View.OnClickListener;
  import android.view.ViewGroup;
  import android.widget.ArrayAdapter;
  import android.widget.ImageView;
 import android.widget.ListAdapter;
 import android.widget.TextView;
 import android.widget.Toast;

 public class Teamname extends ArrayAdapter<String>
{

  private LayoutInflater mInflater;

private String[] mStrings;
private TypedArray mimages;
String mteam=null;
private int mViewResourceId;
Context c;

public Teamname(Context context, int textViewResourceId,TypedArray images,String[] test) {
    super(context, textViewResourceId,test);
    c=context;
    mimages=images;
    mViewResourceId=textViewResourceId;
    mInflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mStrings=test;
        }

public int getCount()
{

    return mStrings.length;
}

public String getId(int position)
{
    return mStrings[position];

}

public long getItemId(int position)
{

    return 0;

}

public View getView(final int position, View convertview, ViewGroup parent)
{

            convertview=mInflater.inflate(mViewResourceId, null);

    ImageView imageView=(ImageView)convertview.findViewById(R.id.image_teamname);
    imageView.setImageDrawable(mimages.getDrawable(position));
    imageView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        System.out.println(position);

        //Intent intent=new Intent(Teamname.this,Team_details.class);// i am getting error from this line
                    //startActivity(this);

        }
    });

    return convertview;

}

     } 
```

//我不能在这个类中使用意图..请给出解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:12:10.957

如果你的班级是`NonActivityClass`如此用于`context`开始新的活动......

```
Intent intent=new Intent(c,Team_details.class);
c.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:00:46.740

```
Intent intent=new Intent(Teamname.this,Team_details.class); 
startActivity(this); 
```

使用此代码并尝试::::

```
Intent intent=new Intent(Teamname.this,Team_details.class);
startActivity(intent); 
```

# android - listView.addHeaderView() 给出“空指针异常”

> ID：10052537
> 
> 赞同：0
> 
> 时间：2012-04-07T07:08:58.357
> 
> 标签：android

我有一个要求，我需要将标题添加到我的列表视图中。

下面是我实现相同的代码..

```
 ListView listView;
     listView = (ListView) findViewById(R.id.list_view);
     //View header = View.inflate(this  , R.layout.header, null);
     LayoutInflater ll = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     View v2 = ll.inflate(R.layout.header, null, false);

    listView.addHeaderView(v2); 
```

但是“listView.addHeaderView(v2)”这一行给出了“NullPointerException”

请让我知道可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:17:46.210

试试这个：

```
listView.addHeaderView(LayoutInflater.from(this).inflate(R.layout.header, null)); 
```

代替 ：

```
LayoutInflater ll = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v2 = ll.inflate(R.layout.header, null, false);
listView.addHeaderView(v2); 
```

# java - 如何从 Hibernate POJO 类创建表？如何在 Hibernate 中实现逆向工程策略？

> ID：10052542
> 
> 赞同：1
> 
> 时间：2012-04-07T07:09:08.250
> 
> 标签：java, hibernate, reverse-engineering

我已经使用 POJO 类、*.cfg.xml 文件、*.hbm.xml 文件和休眠代码来检索数据。

但我没有创建任何表。hibernate 中是否有任何可用的标签可以使用配置文件创建表。

如何在hibernate中实现逆向工程？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:14:28.807

您实际上可以设置配置属性并指示 hibernate 为您创建数据库模式。

```
hibernate.hbm2ddl.auto = create-drop | update 
```

请参阅此链接[Asking hibernate to generate schema for you](http://www.javaworld.com/javaworld/jw-08-2008/jw-08-hibernate-annotations.html)

# android - 如何在 Android 中创建/打开数据库？

> ID：10052544
> 
> 赞同：0
> 
> 时间：2012-04-07T07:09:13.593
> 
> 标签：android, database, sqlite, cordova

在 PhoneGap 中，我如何在 Android 中创建/打开数据库？

我正在使用此代码创建数据库：

```
function onDeviceReady() {
        alert("okey");
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
 } 
```

然后，在控制台中打印此错误消息：

> E/Web 控制台（13516）：类型错误：表达式“db”[null] 的结果不是对象。在文件：///android_asset/www/index.html:24

我怎样才能消除这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:14:36.083

我认为您的问题在于 db 变量的范围。试试这个

```
var db;
function onDeviceReady() {
        alert("okey");
        db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
 } 
```

# algorithm - 编程竞赛中的多边形算法中的点

> ID：10052546
> 
> 赞同：-3
> 
> 时间：2012-04-07T07:09:21.130
> 
> 标签：algorithm, computational-geometry, point-in-polygon

在编程竞赛中解决多边形中的点的最佳算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:25:51.090

从该点射出一条射线（在任意方向上）并检查它穿过多边形边缘的次数，如果它是偶数则该点在多边形之外，否则该点在多边形内。

如果您需要对大量查询点执行此操作，则可以对多边形进行三角剖分（实际上是对多边形内部和包含它的凸面之间的区域进行三角剖分），以便您可以在 O(log n) 中进行射线拍摄

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T06:11:45.390

如果你有一个凸多边形，你可以使用这个：

[http://e-maxx.ru/algo/pt_in_polygon](http://e-maxx.ru/algo/pt_in_polygon)

# c++ - 什么样的数据类型将在 C++ 中保存 3000000^2？

> ID：10052548
> 
> 赞同：1
> 
> 时间：2012-04-07T07:09:33.923
> 
> 标签：c++

什么会保持像 3000000^2 这样的东西而不会溢出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:12:59.537

3000000^2 小于 2^48，因此`uint64_t`from `cstdint`or`stdint.h`将保留您的号码并保持良好的边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T07:11:15.953

64位整数：

```
long long int 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T07:16:27.373

您可以使用`std::numeric_limits`. 在 c++11 中，`long long`是至少 64 位的标准整数，因此，例如，`unsigned long long`有以下限制：

```
#include <iostream>
#include <limits>

int main() {
  std::cout << "sizeof : " << sizeof(unsigned long long) << "\n"; 
  std::cout << "min    : "<< std::numeric_limits<unsigned long long>::min() << "\n";
  std::cout << "max    : "<< std::numeric_limits<unsigned long long>::max() << "\n\n";
} 
```

在我的平台上制作：

```
sizeof : 8
min    : 0
max    : 18446744073709551615 
```

C++ 提供了各种整数类型，但据我所知，标准 pre-c++11 并未强制要求 64 位类型。I`long long`是唯一一个至少为 64 位的标准整数，因此您需要一个支持 c++11 的编译器。但可能是您的编译器支持其他一些非标准的 64 位类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T07:15:59.507

当您说“类似”时，这表明您实际上不确定要存储的数字有多大。

看看[这里](http://www.cplusplus.com/doc/tutorial/variables/)（比如说），看看哪种数字类型最适合您的应用程序。

请注意，该列表中有 64 位整数；那是因为它并非随处可见。

# php - 用 preg_match() 替换 eregi() 后得到空白页

> ID：10052557
> 
> 赞同：0
> 
> 时间：2012-04-07T07:11:20.080
> 
> 标签：php

完成以下操作后我变得空白。

```
$patt="(BEGIN:|END:)[[:blank:]]*([0-9a-zA-Z\_]+)[[:blank:]]*-->(.*)";
if (eregi($patt,$v,$res)) 
```

工作正常，

现在我用以下代码替换了上面的代码

```
$patt="(BEGIN:|END:)[[:blank:]]*([0-9a-zA-Z\_]+)[[:blank:]]*-->(.*)";
   if (preg_match('#'.$patt.'#',$v,$res)) 
```

现在我得到空白页。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:15:21.797

`eregi`不区分大小写，您需要添加`i`.

```
 if (preg_match('#'.$patt.'#i',$v,$res)) 
```

# deployment - 如何在 NetBeans 的特定 glassfish 集群上直接部署 EJB

> ID：10052563
> 
> 赞同：1
> 
> 时间：2012-04-07T07:12:11.223
> 
> 标签：deployment, glassfish, ejb, cluster-computing

我在本地 glassfish 服务器上创建了两个集群。一种用于war部署，另一种用于ejb部署。

当我尝试直接从 netbeans 部署 ejb 或 war 时，默认情况下它会部署到名为“服务器”的默认集群。

我想更改它，以便它直接部署到相应的集群。我如何做到这一点？指南将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:21:00.940

你必须使用这个命令：

```
asadmin deploy --target <clusterName> <yourApplication> 
```

查看本指南（适用于 GlassFish 3.1）：[http ://docs.oracle.com/cd/E18930_01/html/821-2432/gkybx.html](http://docs.oracle.com/cd/E18930_01/html/821-2432/gkybx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:05:27.817

没有这方面的指南。有[一篇关于在 NetBeans 中将集群注册为部署目标的简短博客](https://blogs.oracle.com/vkraemer/entry/prototype_of_cluster_and_instance)。

注册部署目标后，您可以像使用普通实例一样使用它，并选择它作为项目的“目标服务器”。

# c++ - 是否可以将 bool T::operator < (const T& right) 等成员函数转换为 binary_function？

> ID：10052565
> 
> 赞同：1
> 
> 时间：2012-04-07T07:12:24.420
> 
> 标签：c++, stl

我想尽可能避免代码重复。假设我有一个类，例如，

```
class T {
    int val;
    bool operator < (const T& right) const { return val < right.val; }
} 
```

我希望能够像这样调用 std::sort() ，

```
std::sort( SomeContainer.begin(), SomeContainer.end(), FuncAdaptedFromOp ); 
```

这是我在 StackOverflow 上的第一个问题。请原谅。

**编辑**

问题是该类可能具有多个`bool T::Compare (const T& right)`功能。我仍然想要一个适配器。举这个例子，

```
class Edge {
    Vertex u, v;
    bool CompareSrc (const Edge& right) const { return u < right.u; }
    bool CompareDest (const Edge& right) const { return v < right.v; }
} 
```

有时我想按 source`Vertex`有时按 destination排序`Vertex`。我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:15:03.140

如果您不提供第三个参数，则将使用 < 运算符。

[http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)

“第一个版本使用 operator< 比较元素，第二个版本使用 comp。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:20:42.040

您只需复制 STL 仿函数`std::less` [http://www.cplusplus.com/reference/std/functional/less/](http://www.cplusplus.com/reference/std/functional/less/)

```
template <class T> struct less : binary_function <T,T,bool> {
  bool operator() (const T& x, const T& y) const
    {return x<y;}
}; 
```

少的例子：

```
#include <iostream>
#include <functional>
#include <algorithm>

struct my_struct {
   int a;
   bool operator< (const my_struct &s) const {
      return a < s.a;
   }
};

int main() {
   my_struct array[10];

   for (int i = 0; i < 10; ++i)
      array[i].a = 10 - i;

   std::sort(array, array + 10, std::less<my_struct>());

   for (int i = 0; i < 10; ++i)
      std::cout << array[i].a << ", ";
} 
```

你不需要写它。算法`std::sort`有两个版本：

```
template <class RandomAccessIterator>
  void sort ( RandomAccessIterator first, RandomAccessIterator last );

template <class RandomAccessIterator, class Compare>
  void sort ( RandomAccessIterator first, RandomAccessIterator last, Compare comp ); 
```

`operator <`当您的课程提供（可比较）时，可以使用第一个版本。如果您不想使用`operator <`或它不存在，则使用第二个版本。

没有更少的例子：

```
#include <iostream>
#include <functional>
#include <algorithm>

struct my_struct {
   int a;
   bool operator< (const my_struct &s) const {
      return a < s.a;
   }
};

int main() {
   my_struct array[10];

   for (int i = 0; i < 10; ++i)
      array[i].a = 10 - i;

   std::sort(array, array + 10);

   for (int i = 0; i < 10; ++i)
      std::cout << array[i].a << ", ";
} 
```

示例具有相同的结果。

您还可以使用其他仿函数来更改排序算法的行为，例如`std::greater`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:17:49.963

```
using namespace std::placeholders;
std::sort(SomeContainer.begin(), SomeContainer.end()
    // or use &Edge::CompareDest if you want that instead
    , std::bind(&Edge::CompareSrc, _1, _2) ); 
```

`std::bind`虽然是 C++11，所以你可能想要使用`boost::bind`（在这种情况下你不应该使用前面的 using 指令）或`bind`来自 TR1 的，如果你的实现有的话。否则，我建议您手动处理自己的仿函数。

# java - 如何编写一个程序，将整数序列读入数组并计算数组中所有元素的交替和？

> ID：10052568
> 
> 赞同：0
> 
> 时间：2012-04-07T07:12:59.867
> 
> 标签：java

编写一个程序，将整数序列读入数组，并计算数组中所有元素的交替和。例如，如果程序使用输入数据执行

1 4 9 16 9 7 4 9 11 然后计算

1 - 4 + 9 - 16 + 9 - 7 + 4 - 9 + 11 = - 2

到目前为止，我有以下代码：

```
import java.util.Arrays;

/**
This class computes the alternating sum
of a set of data values.
*/
public class DataSet
{
private double[] data;
private int dataSize;

/**
Constructs an empty data set.
*/
public DataSet()
{
final int DATA_LENGTH = 100;
data = new double[DATA_LENGTH];
dataSize = 0;
}

/**
Adds a data value to the data set.
@param x a data value
*/
public void add(double x)
{
if (dataSize == data.length)
data = Arrays.copyOf(data, 2 * data.length);
data[dataSize] = x;
dataSize++;
}

/**
Gets the alternating sum of the added data.
@return sum the sum of the alternating data or 0 if no data has been added
*/
public double alternatingSum()
{
. . .
}
} 
```

我必须使用以下类作为测试器类：

```
/**
This program calculates an alternating sum.
*/
public class AlternatingSumTester
{
public static void main(String[] args)
{
DataSet data = new DataSet();

data.add(1);
data.add(4);
data.add(9);
data.add(16);
data.add(9);
data.add(7);
data.add(4);
data.add(9);
data.add(11);

double sum = data.alternatingSum();
System.out.println("Alternating Sum: " + sum);
System.out.println("Expected: -2.0");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:45:06.127

我为你实现了方法alternatingSum：

```
public double alternatingSum() {
    double alternatingSum = 0;
    if(data != null || dataSize > 0) {
        for(int i = 0; i < dataSize; i = i + 2) {
            alternatingSum += data[i];
        }
        for(int i = 1; i < dataSize; i = i + 2) {
            alternatingSum -= data[i];
        }
    }
    return alternatingSum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:21:28.437

我会使用这个简单的逻辑来实现目标。首先将数组中的所有奇数相加。然后将所有偶数相加。现在减去这两个值 n 你会得到你的答案。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T07:27:14.693

我会使用 for 循环和布尔标志来解决这个问题：

```
set flag to false
set sum to zero
for alle elements in array
 if flag is set
  add to sum
 else 
  subtract from sum

When loop is done you have your sum. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-03T11:53:52.607

```
 int[] a = {50, 60, 60, 45, 70};
        int sum = IntStream.range(0, a.length).filter(i -> i % 2 == 0).map(i -> a[i]).sum()
                - IntStream.range(0, a.length).filter(i -> i % 2 == 1).map(i -> a[i]).sum();

        System.out.println("Sum= " + sum); 
```

我使用流来做到这一点，首先我使用 Intstream，然后过滤掉偶数索引并获取映射的值并添加它们，并且对奇数索引也做了同样的事情，然后减去它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T09:31:23.170

例如`a[]={1, 3, 5, 6}`，如果您有 4 个数字，则有几种情况：

```
operation:
    + + +
    + + -
    + - +
    + - -
    - + +
    - + -
    - - +
    - - - 
```

在您的情况下，“操作”将只有 + - +

使用带有此符号的数组并计算您的结果。

```
int k=a[0];
    for(int i = 1; i<= 3; i++){
    if(operation[i-1]=="+".charAt(0))
{k=k+a[i];}
etc...
} 
```

这并不难:) 祝你好运。

# c# - C# WinForms TreeView 移除水平滚动条

> ID：10052572
> 
> 赞同：6
> 
> 时间：2012-04-07T07:13:35.590
> 
> 标签：c#, treeview

我需要一个只有垂直滚动条的 TreeView。

我试过[了，](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/4aa4dade-53a2-4e2e-a8b4-b4980da1f39c/)但它不起作用，生成的滚动条根本没有做任何事情。

我尝试了相反的方法（可滚动到 true 并使用该 user32.dll 函数禁用水平滚动条） - 它不起作用，当我向 TreeView 添加足够长的内容时，滚动条再次显示......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T07:34:05.427

您可以尝试在 treeview 控件上打开**TVS_NOHSCROLL**窗口样式。为此，您必须使用像这样的自定义 TreeView 扩展标准 TreeView 控件：

```
public class NoHScrollTree : TreeView {
protected override CreateParams CreateParams {
get {
    CreateParams cp = base.CreateParams;
    cp.Style |= 0x8000; // TVS_NOHSCROLL
    return cp;
}
} } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T07:36:34.930

如果您的目的是获得类似于 Windows Vista 和 7 本机树视图的外观和感觉，那么您应该遵循这个，

[如何让 Windows 原生查找 .NET TreeView？](https://stackoverflow.com/questions/5131534/how-to-get-windows-native-look-for-the-net-treeview)

SetWindowTheme 是必要的。那么水平滚动条就不会出现了。

它适用于 Windows Vista 和 Windows 7。

# openid - openid ax fetch_request 泛化 ext1_value 和 ax_value

> ID：10052573
> 
> 赞同：0
> 
> 时间：2012-04-07T07:13:46.453
> 
> 标签：openid

在`fetch_request`google 和 aol 返回`ax`属性之后`openid_ext1_value_*`，就像所有其他人返回一样，`openid_ax_value_*`这如何概括？

谷歌是唯一的例外吗？还是可以是`ax_value`or以外的任何东西`ext1_value`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:22:24.080

根据此处找到的 AX 规范：http: [//openid.net/specs/openid-attribute-exchange-1_0.html](http://openid.net/specs/openid-attribute-exchange-1_0.html)

`openid.ns.<extension_alias>=http://openid.net/srv/ax/1.0`您可以通过查找规范第 1.1 节中描述的方法来概括您的解决方案。

该值将是与该扩展相关的其余参数的前缀。

因此，在**Google**和**AOL**的请求中，您应该找到`openid.ns.ext1=http://openid.net/srv/ax/1.0`. 因此，所有`AX`相关请求都将采用以下形式`openid.ext1.<AX parameter>`（例如`openid.ext1.mode`）。

# jquery - 是否可以为 jQuery UI 滑块定义自定义间隔数？

> ID：10052582
> 
> 赞同：0
> 
> 时间：2012-04-07T07:14:45.033
> 
> 标签：jquery, jquery-ui

根据该站点和我见过的所有演示，滑块的值必须始终是可整除的。因此，例如，如果我将 min 和 max 选项设置为 10 和 100，则滑块将以 10 为单位递增，例如 10、20、30 等。

我需要定义一些不可整除的预选数字，例如：

20、60、100、150、300

有没有办法用现有的滑块来做到这一点而不必创建一个全新的插件？

```
$('.slider').slider({
    animate: true,
    value: 20,
    range: 'min',
    min: 10,
    max: 100,
    step: 10,
    slide: function(event, ui) {
        $('span#amount').text(ui.value);
    },
    change: function(event, ui) {
        $('input#range').val(ui.value);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-16T13:14:18.320

尝试这个，

```
var amounts = [20, 60, 100, 150, 300];
$(".slider").slider({
  animate: true,
  value: 20,
  range: 'min',
  min: 0,
  max: sizes.length - 1,
  step: 1,
  slide: function(event, ui) {
    $('span#amount').text(amounts[ui.value]);
  }
}); 
```

# wix - MSI 安装程序使用 WiX 在静默模式下调用另一个 MSI 安装程序

> ID：10052583
> 
> 赞同：10
> 
> 时间：2012-04-07T07:14:55.963
> 
> 标签：wix, windows-installer, silent, silent-installer

我正在使用[WiX](http://en.wikipedia.org/wiki/WiX)制作一个[MSI](http://en.wikipedia.org/wiki/Windows_Installer)安装程序来调用另一个 MSI 安装程序。

*   我可以在 UILevel=5 (Full UI) 模式下解决这种情况。我的解决方案是向调用另一个 MSI 的 UISequence 表添加一个 CustomAction。它不会得到错误代码 1500：“另一个安装已经在进行中......”
*   但是在静默模式下，UILevel = 2，我做不到，因为它只在ExecuteSequence中运行CustomAction。如何在静默模式下运行我的 MSI 并调用另一个 MSI 安装程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T13:22:08.643

使用 wix 3.6 中包含的[Burn 引导程序](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)安装两个 MSI 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:20:01.480

严格来说 MSI 文件是事务性安装程序，因此它们一次只能出现一个。

微软通过合并模块解决了这个问题，这些模块类似于 MSI，但用于嵌入 MSI 文件。

您想要嵌入的 MSI 是否有可能更改为 MSM 文件？

# c++ - 如何使用指针指向结构的向量？

> ID：10052586
> 
> 赞同：0
> 
> 时间：2012-04-07T07:15:26.817
> 
> 标签：c++, pointers, struct

```
struct Edge;

struct Node {
    int id;
    vector<Edge> *edges;
};

struct Edge {
    int id;
    Node* vertex1;
    Node* vertex2;
};

int main(){
    vector<Edge> nodeEdgeList;
    Node* nodePtr = new Node;
    nodePtr->id = vertex;
    nodePtr->edges = nodeEdgeList;
} 
```

由于最后一行，我收到以下编译器错误。

```
error: cannot convert 'std::vector<Edge, std::allocator<Edge> >' to 'std::vector<Edge, std::allocator<Edge> >*' in assignment 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:19:16.473

您的 Node 类有一个向量 * 作为您试图将非指针设置为指针的成员

错误信息在这里很清楚`error: cannot convert 'std::vector<Edge, std::allocator<Edge> >' to 'std::vector<Edge, std::allocator<Edge> >*' in assignment`

所以改为：

```
int main(){
    vector<Edge> *nodeEdgeList = new Vector<Edge>;
    Node* nodePtr = new Node;
    nodePtr->id = vertex;
    nodePtr->edges = nodeEdgeList;
} 
```

或者

```
int main(){
    vector<Edge> nodeEdgeList;
    Node* nodePtr = new Node;
    nodePtr->id = vertex;
    nodePtr->edges = &nodeEdgeList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T07:18:07.647

```
int main(){
    vector<Edge> nodeEdgeList;
    Node* nodePtr = new Node;
    nodePtr->id = vertex;
    nodePtr->edges = &nodeEdgeList; // <-- use & before
} 
```

# css - 在 ASP.NET 中从 CSS 引用 .htc 文件

> ID：10052592
> 
> 赞同：0
> 
> 时间：2012-04-07T07:16:27.133
> 
> 标签：css, asp.net, visual-studio-2010

我正在尝试在 css 中添加一个 htc 文件。解决方案结构为：

![在此处输入图像描述](../Images/9461874082ab7039e1828ab0c137aea6.png)

我在 /Styles/QTip/jquery.qtip.css 中，从那里我将 PIE.htc 称为：

```
behavior: url('../HTC/PIE.htc'); 
```

但它不起作用。

如果我浏览，也从 VS2010 运行应用程序后

[http://localhost:2873/Styles/QTip/jquery.qtip.css](http://localhost:2873/Styles/QTip/jquery.qtip.css)

然后浏览器打开 css 文件，但如果我浏览 URL

[http://localhost:2873/Styles/HTC/PIE.htc](http://localhost:2873/Styles/HTC/PIE.htc)

我得到**找不到资源**。

这个 htc 文件的正确路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:26:07.500

你需要去另一个文件夹...

```
behavior: url('../HTC/PIE/PIE.htc'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:28:34.470

[您必须按照此处](https://stackoverflow.com/questions/7005442/where-do-i-put-the-pie-htc-file-for-making-ie-work-with-css3-when-im-using-ca)和[此处](https://stackoverflow.com/questions/4870870/css3pie-in-mvc-where-to-place-the-pie-htc-file)的建议使用绝对路径或完整的 URL 引用。

# iphone - Xcode - 从不同的视图更新 ViewController 标签文本

> ID：10052594
> 
> 赞同：7
> 
> 时间：2012-04-07T07:16:35.900
> 
> 标签：iphone, objective-c, uilabel

我的项目中有两个视图控制器`ViewController`，`SettingsView`. `ViewController's`在这里，当我单击`SettingsView's`后退按钮时，我正在尝试更新标签。`NSLog`工作正常，但标签没有更新......请帮助我......

**设置视图.m**

```
-(IBAction)backToMain:(id) sender {

  //calling update function from ViewController
    ViewController * vc = [[ViewController alloc]init];
    [vc updateLabel];
    [vc release];

  //close the SettingsView 
    [self dismissModalViewControllerAnimated:YES];
} 
```

**视图控制器.m**

```
- (void)updateLabel
{
    NSLog(@"Iam inside updateLabel");
   self.myLabel.text = @"test";
} 
```

你能告诉我我的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T07:24:45.300

您必须为此实施协议。按照这个：

1）在 SettingView.h 中定义这样的协议

```
 @protocol ViewControllerDelegate

 -(void) updateLabel;

  @end 
```

2）在.h类中定义属性并在.m类中合成..

```
 @property (nonatomic, retain) id <ViewControllerDelegate> viewControllerDelegate; 
```

3) 在 SettingsView.m`IBAction`

```
 -(IBAction)backToMain:(id) sender 
 {
     [viewControllerDelegate updateLabel];
 } 
```

4) 在 ViewController.h 中采用这样的协议

```
@interface ViewController<ViewControllerDelegate> 
```

5) 在 vi​​ewController.m 中包含这一行`viewDidLoad`

```
settingView.viewControllerDelegate=self 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:25:03.303

您的标签未更新，因为您正在尝试`updateLabel`使用新实例调用方法。

您应该调用`updateLabel`您从中呈现模态视图的 viewcontroller 的原始实例。

你可以使用委托机制或 NSNotification 来做同样的事情。

代表机制将是干净的。NSNotification 又快又脏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:47:34.347

你不完全调用正确的`vc`. 这是因为您正在创建该类的新实例并调用该`updateLabel`实例的。

你有几个选择。

1.  将其实现为`delegate`回调（委托 messagePassing 或委托通知 - 但是您想调用它）以通知该类实例调用该`updateLabel`方法。

2.  将原始实例`VC`用作`dependency injection`您现在所在的类，并使用该实例调用`updateLabel`

3.  使用 NSNotifications / NSUserDefaults 在 vi​​ewControllers 之间进行通信并为您的操作设置通知系统。这很容易，但从长远来看并不是很好。

我会推荐选项 1（或）选项 2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T08:03:39.187

只需在 SettingsView 类中声明如下：

```
 UILabel *lblInSettings;// and synthesize it 
```

现在在您展示设置视图控制器时分配如下：

```
settingsVC.lblInSettings=self.myLabel; 
```

然后，无论您在 lblInSettings 中更新什么，它显然都会出现在 MainView 中......不需要任何委托方法或更新方法。

```
Means if you assign at the time of dismissing like
lblInSettings.text=@"My new value";
then self.myLabel also will be updated. 
```

如果您有任何疑问，请告诉我？

# android - android 平板电脑的最低 api 级别是多少？

> ID：10052595
> 
> 赞同：0
> 
> 时间：2012-04-07T07:16:35.577
> 
> 标签：android, operating-system, tablet

我是新的 android 应用程序开发人员，我想为平板电脑和手机制作应用程序。我不知道创建应用程序的 api 级别，我需要示例教程给我。请参考一些书籍或网络链接，汤姆，谢谢你的提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:26:25.783

好吧，您需要确定什么是有效的平板电脑，因为有很多运行 2.1、2.2、2.3、3.0、3.1、3.1 等的平板电脑，甚至在您使用已经在较新版本上的最新 ICS 之前，这涵盖了第 7 级一直到15。

另一个问题是我知道没有运行 Android 3.X 的手机。

我的目标是 ICS 级别 14，但这会切断许多运行 2.2 及更高版本的手机，因此您需要对应用程序进行编码以检测 api 级别是什么，并根据您在运行时检测到的 api 级别运行代码。

**@Renard 提供的其他链接**

这些库似乎提供了您想要的东西，而您不必为自己处理不同的 api 级别而头疼。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)和[http://nineoldandroids.com/](http://nineoldandroids.com/)

# mef - 在构造函数方法中将项目添加到列表时出现 MEF 错误

> ID：10052596
> 
> 赞同：0
> 
> 时间：2012-04-07T07:16:39.633
> 
> 标签：mef

我编写silverlight 程序非常简单。我使用Mef 和WCF。

此代码是包含命令和属性的 MainPageViewModel 类。

```
 public List<NoOfStudentsDropDownItem> ListNoOfStudent{get;set;}
 public MainPageViewModel()
 {
   InitializList();
 }
 private void InitializList()
 {
  ListNoOfStudent.Add(New NoOfStudentsDropDownItem(){DisplayText="1",NoOfStudent=-1});
  ListNoOfStudent.Add(New NoOfStudentsDropDownItem(){DisplayText="5",NoOfStudent=5});
 } 
```

这是 NoOfStudentsDropDownItem 类；

```
public Class NoOfStudentsDropDownItem
{
   public string DisplayText{get;set;}
   public int NoofStudent{get;set} 
} 
```

这是应用程序类的一部分。

```
private void Application_Startup(object sender,StartupEventArgs e)
{
  CompositionInitializer.SatisfyImports(this);
  MainPage mainpage=new MainPage();
  mainpage.DataContext=MainViewModel;
  this.RootVisual=mainpage;
}
[Import]
public MainPageViewModel MainViewModel{get;set;} 
```

评论 InitializList 方法时我没有出错。我不知道原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:58:46.400

您只是忘记创建列表。您为它声明了一个属性，但它从未被分配，因此当您调用 Add 时它仍然为空。

# facebook - 您如何配置 Facebook 应用程序以将用户直接发送到网站？

> ID：10052605
> 
> 赞同：0
> 
> 时间：2012-04-07T07:18:19.783
> 
> 标签：facebook

请注意点击 Facebook 搜索的 Instagram 应用程序条目如何将用户*直接*发送到 Instagram的网站。**这是如何实现的？**

这里似乎有一个相关的问题（有一个公认的答案）：[Facebook 应用程序：使登录页面重定向到 URL？](https://stackoverflow.com/q/6037782/1196206)但是，尚不清楚这是正确的方法，因为它不能提供相同的用户体验。

调用这样的实现将*首先*将用户发送到带有 iframe 的 facebook 应用程序页面。然后该 iframe（带有建议的重定向代码）调用重定向。这很快，但对用户来说仍然很明显，并且明显不同。更不用说，它也可能违反 Facebook 的条款（虽然不确定）。

**底线是，如何配置 facebook 应用程序链接以充当 Instagram 应用程序链接？**

（注意，我会简单地将此评论添加到引用的问题中，但似乎我还没有所需的代表点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:02:49.313

在[https://developers.facebook.com/apps](https://developers.facebook.com/apps) - 转到“编辑应用程序”，然后在“设置”->“基本”中，仅选择“使用 Facebook 登录的网站”（您会看到一个绿色的 V）。

现在转到左侧栏中的“应用程序中心” - 填写所有必要的表格并点击提交。然后转到：[https ://www.facebook.com/appcenter/YOUR_APP_NAME](https://www.facebook.com/appcenter/YOUR_APP_NAME)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:49:09.010

我可能错了，但这是我的两分钱；

转到 Facebook 上的应用程序开发人员页面 (https://developers.facebook.com/apps/) 创建一个新应用程序并在设置 -> 基本在网站下输入您的网站 URL（单击它之后）然后转到设置 ->高级，在页面底部有一个按钮，上面写着创建 Facebook 页面点击它，一旦有人点击你的 Facebook 页面，他们应该被重定向到你的网站。

# postgresql - DDD：在 PostgreSQL 中建模聚合实体的唯一全局/本地 ID

> ID：10052617
> 
> 赞同：2
> 
> 时间：2012-04-07T07:20:44.667
> 
> 标签：postgresql, domain-driven-design, aggregate, uniqueidentifier

我读过 Eric Evans 的领域驱动设计一书，并且一直在尝试应用其中的一些概念。

在他的书中，Eric 谈到了聚合以及聚合根应该如何具有唯一的全局 ID，而聚合成员应该具有唯一的本地 ID。我一直在尝试将该概念应用于我的数据库表，但遇到了一些问题。

我的 PostgreSQL 数据库中有两个表：设施和员工，可以将员工分配到单个设施。

过去，我会按如下方式布置员工表：

```
CREATE TABLE "employees" (
  "employeeid"  serial NOT NULL PRIMARY KEY,
  "facilityid"  integer NOT NULL,
  ...
  FOREIGN KEY ("facilityid") REFERENCES "facilities" ("facilityid")
); 
```

其中employeeid 是一个全球唯一的ID。然后，我将在后端添加代码以进行访问控制验证，防止一个设施的用户访问与其他设施相关的行。我有一种感觉，这可能不是最安全的方法。

我现在考虑的是这种布局：

```
CREATE TABLE "employees" (
  "employeeid"  integer NOT NULL,
  "facilityid"  integer NOT NULL,
  ...
  PRIMARY KEY ("employeeid", "facilityid"),
  FOREIGN KEY ("facilityid") REFERENCES "facilities" ("facilityid")
); 
```

其中employeeid 对于给定的facilityid 是唯一的（本地），但需要与facilityid 配对才能在全球范围内唯一。

具体来说，这就是我要找的：

员工 A (employeeid: 1, facilityid: 1)
员工 B (employeeid: 2, facilityid: 1)
员工 C (employeeid: 1, facilityid: 2)

其中 A、B 和 C 是 3 名不同的员工，并且...
将员工 D 添加到设施 1 会给他钥匙（employeeid：3，facilityid：1）
将员工 E 添加到设施 2 会给他钥匙（employeeid： 2、facilityid：2）

我看到了两种实现这一目标的方法：

1.  我可以使用触发器或存储过程来自动生成新的员工 ID，并将每个设施的最后一个 ID 存储在另一个表中以便更快地访问，但我担心并发问题并最终导致来自同一设施的 2 名员工具有相同的 ID。

2.  我可以为每个设施创建一个新序列来管理员工 ID，但我担心最终需要管理数千个序列，并且在删除设施的情况下会删除这些序列。这有什么问题吗？对我来说似乎很重。

我应该采取哪种方法？有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:50:44.810

我猜你在这里过分强调了聚合根的概念。根据我对员工建模的理解（取决于您的上下文），员工几乎总是一个聚合根，可能被另一个聚合根设施**引用。**

员工和设施几乎总是拥有自然密钥。对于员工来说，这通常是一些员工 ID（印在员工身份证上，或至少在人力资源软件系统中维护），设施也有这个自然键，几乎总是包含一些位置部分和一些数字，如“ *MUC-1* ”设施 1 位于慕尼黑。但这一切都取决于您的上下文。如果员工和设施拥有这些自然键，您的数据库模型应该非常清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:08:35.093

我从你的问题推断你将为所有设施运行一个数据库，或者至少如果你有一个本地数据库作为每个设施的“主”，那么数据需要在一个中央数据库中组合而不会发生冲突.

我会将 facilityid 设为主键的*高阶*部分。您可能可以使用一种简单的`SELECT max(employeeid) + 1 ... WHERE facilityid = n`方法分配新员工编号，因为将员工添加到任何一个设施可能不会从多个并发源每秒发生数百次。这可能会导致偶尔的序列化失败，但我认为任何数据库访问都应该通过一个能够识别这些并自动重试事务的框架。

# javascript - 无法通过此代码查看视频？

> ID：10052619
> 
> 赞同：1
> 
> 时间：2012-04-07T07:20:57.970
> 
> 标签：javascript, video, html5-video

我尝试使用以下 HTML 来显示视频。但是我看不到视频。

它只加载视频，但不播放。我正在使用“ [video.js](http://videojs.com/) ”一个 JavaScript 和 CSS 库，它操作视频标签以获得一致的 UI。

如果我遗漏了什么，请告诉我。

这是我的代码：

```
<video id="my_video_1" class="video-js vjs-default-skin" controls
        preload="auto" width="640" height="264" poster="my_video_poster.png"
    data-setup="{}" >
        <source src="scroll_index.mp4" type='video/mp4'>
    <source src="scroll_index.webm" type='video/webm'>
</video> 
```

我在 body 标签中包含了上面的代码，并且在 head 标签中也包含了对*video.js*和*video.css*的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:36:45.490

我不知道你正在测试什么浏览器，也许它不支持 html5 视频标签，但关于你的评论，我不这么认为 :)

但是，您既没有设置`controls`属性以使控制面板出现以便用户可以手动启动（和控制）视频，也没有设置`autoplay`属性以使视频在准备好后立即播放，因此我建议添加以下属性：

```
<video id="my_video_1" class="video-js vjs-default-skin" controls
       preload="auto" width="640" height="264"   poster="my_video_poster.png"
       autoplay="autoplay" controls="controls" 
       data-setup="{}">
    <source src="scroll_index.mp4" type='video/mp4'>
    <source src="scroll_index.webm" type='video/webm'>
</video> 
```

# opengl - Cocos2d Mac ccDrawLine 颜色

> ID：10052620
> 
> 赞同：0
> 
> 时间：2012-04-07T07:21:01.307
> 
> 标签：opengl, cocos2d-iphone

我在 mac 上使用 cocos2d。我已经重载了 CCLayer 子类的 ccdrawline 以绘制一条线。它工作正常。要将颜色更改为红色，我使用 glColor4f(1.0f,0,0,1.0f);

但无论我给 glColor4f 的任何值，颜色都不会改变。它仍然是白色的。但我注意到其他 openGL 函数如 glLineWidth(5.0f) 工作正常！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:53:36.540

如果您使用的是 cocos2d 2.x，您可以使用：

```
void ccDrawColor4F( GLfloat r, GLfloat g, GLfloat b, GLfloat a ); 
```

如 中所定义`CCDrawingPrimitives.h`。

尽管 phix23 指出它是一个全局函数，但您可以立即使用它。

# java - 向 JList 添加滚动条，将 JList 添加到 JPanel

> ID：10052621
> 
> 赞同：0
> 
> 时间：2012-04-07T07:21:11.073
> 
> 标签：java, swing, jpanel, jscrollpane

我有一个要动态填充的列表，因此需要滚动条。我在列表中添加了一个滚动条。问题是当我尝试将列表添加到面板时。滚动条在列表中变得可见，但即使列表的元素变大，它们也不起作用。

```
JPanel p4=new JPanel();
Container c=getContentPane();
myList=new JList(model);
myList.setVisibleRowCount(5);
myList.setFixedCellWidth(200);

p4.add(new JScrollPane(myList,ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS,
     ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS));
c.add(p4); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:47:28.550

在这里工作得很好。我为此[SSCCE使用了](http://sscce.org/)[SplitPaneDemo.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/SplitPaneDemoProject/src/components/SplitPaneDemo.java)文件，并删除了所有不必要的东西

```
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
import java.awt.BorderLayout;

public class SplitPaneDemo extends JPanel {
  private JList<String> list;
  private String[] imageNames = { "Bird", "Cat", "Dog", "Rabbit", "Pig", "dukeWaveRed",
      "kathyCosmo", "lainesTongue", "left", "middle", "right", "stickerface"};
  public SplitPaneDemo() {
    setLayout( new BorderLayout(  ) );

    list = new JList<>(imageNames);
    list.setSelectionMode( ListSelectionModel.SINGLE_SELECTION );
    list.setSelectedIndex( 0 );

    add( new JScrollPane(list) );
  }

  /**
   * Create the GUI and show it.  For thread safety,
   * this method should be invoked from the
   * event-dispatching thread.
   */
  private static void createAndShowGUI() {

    //Create and set up the window.
    JFrame frame = new JFrame("SplitPaneDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    SplitPaneDemo splitPaneDemo = new SplitPaneDemo();
    frame.getContentPane().add(splitPaneDemo);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
  }

  public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        createAndShowGUI();
      }
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:57:40.263

类似的问题在这里：[这里](https://stackoverflow.com/questions/818163)

不过，我认为您的情况的答案并不相同。当您将内容添加到列表中时，可能会出现问题；你可以尝试做：

```
myList.revalidate(); 
```

在它改变之后。

# ios - iOS UIScrollView requireGestureToFail

> ID：10052623
> 
> 赞同：0
> 
> 时间：2012-04-07T07:21:12.763
> 
> 标签：ios, uigesturerecognizer

有没有办法在处理 UIView 滚动的手势上调用 requireGestureToFail ？我有一个自定义手势，所以当它触发时，我希望禁用滚动。

我试过scrollView.scrollEnabled = NO。但是，我无法重新启用它。我相信这是由于视图上有多个手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:01:45.550

我认为从 IOS 5 你可以做到这一点。假设您在滚动视图中有滑动手势，您可以这样做以避免在滑动时滚动，

```
[swipeGesture requireGestureToFail:scrollView.panGestureRecognizer]; 
```

# javascript - 从 JS 中的对象中捕获错误

> ID：10052624
> 
> 赞同：0
> 
> 时间：2012-04-07T07:21:24.810
> 
> 标签：javascript, error-handling

目前我有一个模块构建器。在此脚本的精简版本中，会触发正文单击`foo()`，这会引发错误。我想将一个错误处理程序附加到整个模块对象以捕获其中抛出的任何内容，不仅在创建期间，而且在运行时。是否可以？

目前，“foo alert”出现在控制台中。我想抑制这一点，让中央记录器做必要的日志。在这种情况下，我想看到“记录”。

```
$(function() {

    var moduleCollection = {};

    //creates modules, stores them and returns for reference
    function define(name, def) {
        var newModule = def();              //creates the module object
        moduleCollection[name] = newModule; //store

        //somewhere here, i must attach some sort of
        //error handlers for the module
        //something like:
        newModule.onerror = function(){
            //execute error procedure (like logging)
            console.log('logged');
        }

        return newModule //return as reference
    }

    //a module definition
    var mymod = define('mymod', function() {
        //foo chokes unintentionally and results into an error
        function foo() {throw new Error('foo alert');}

        function start() {
            //a body click calls foo
            $('body').on('click', function() {foo()});
        }
        return {start: start}
    });

    //start module
    mymod.start()

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:29:12.050

如果需要，您需要在每个代码执行级别添加`try`和`catch`。

也就是说，在“定义”时，在您的构造函数（如果存在）、每个方法体和每个事件处理程序中。

另外，也许这只是您的示例代码，但是：

```
$('body').on('click', function() {foo()}); 
```

可能只是这样：

```
$('body').on('click',foo); 
```

# objective-c - NSBox 对焦环？

> ID：10052628
> 
> 赞同：1
> 
> 时间：2012-04-07T07:22:13.917
> 
> 标签：objective-c, xcode, cocoa, user-interface, osx-lion

有没有办法专注于 NSBox 并为该框绘制对焦环？我想 [box drawFocusRingMask]; 可能是类似的东西，但没有任何反应。当单击按钮时，我只需要该框在其周围有一个焦点环。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:20:45.020

假设您要部署到 10.7 或更高版本，您可以创建一个自定义视图类（可能是 NSBox 的子类）并让它覆盖以下方法：

```
- (BOOL)acceptsFirstResponder {
    return YES;
}
- (void)drawFocusRingMask {
    NSRectFill([self bounds]);
}
- (NSRect)focusRingMaskBounds {
    return [self bounds];
} 
```

如果子类化 NSBox，如果您愿意，可以使用`-borderRect`代替。`bounds`

* * *

编辑：您也许可以使用 10.7 之前风格的对焦环绘图。您可能会执行以下操作：

```
-(void)drawRect:(NSRect)rect
{
    NSResponder* fr = [[self window] firstResponder];
    if ([fr isKindOfClass:[NSView class]] && [(NSView*)fr isDescendantOf:self])
    {
        [NSGraphicsContext saveGraphicsState];
        NSSetFocusRingStyle(NSFocusRingOnly);
        [[NSBezierPath bezierPathWithRect:NSInsetRect([self bounds],4,4)] fill];
        [NSGraphicsContext restoreGraphicsState];
    }
    // ... normal drawing, possibly invoking super ...
} 
```

The view would also have to watch for changes in the first responder and invoke `-setKeyboardFocusRingNeedsDisplayInRect:` on itself. Plus, it may need to call `-setFocusRingType:` on itself during setup with `NSFocusRingTypeExterior`, although that may be the default, depending on the superclass.

# asp.net-web-api - 带有来自路由定义的 id 的 Asp.net WebApi multipart/form-data

> ID：10052634
> 
> 赞同：0
> 
> 时间：2012-04-07T07:23:34.513
> 
> 标签：asp.net-web-api

我正在向一个操作（文件上传）发送一个 multipart/form-data 请求，但我将它发送到一个在 url 中具有由路由指定的 id 的操作：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new {action = "Index", id = RouteParameter.Optional }
); 
```

我要发布到的网址：`/api/Contacts/1/Photo`

行动：

```
[HttpPost]
public HttpResponseMessage Photo(int id)
{

    var task = this.Request.Content.ReadAsStreamAsync();
    task.Wait();
    Stream requestStream = task.Result;

    /* ... */

} 
```

使用 id 参数，我得到这个错误：`No 'MediaTypeFormatter' is available to read an object of type 'Int32' with the media type 'multipart/form-data'.`没有 id 参数，它工作正常。

[我在这里](https://stackoverflow.com/a/10039092/400861)的这个答案中尝试了 MediaTypeFormatter ，但它似乎没有从 url 获取 id 并且在尝试使用它时崩溃`FirstDispositionNameOrDefault("id")`。有没有办法让路由 url 中指定的 id 绑定到操作的 id 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:25:09.517

FirstDispositionNameOrDefault 用于读取表单控件的值。

您可以在参数上使用 [FromUri] 属性：

```
public HttpResponseMessage Photo([FromUri] int id) 
```

这告诉 Web API 不要从消息正文中获取参数。

# android - 如何使用命令行在 android 模拟器上启用媒体选项

> ID：10052636
> 
> 赞同：5
> 
> 时间：2012-04-07T07:24:07.590
> 
> 标签：android, android-emulator

在我的应用程序中，我正在录制语音，因此我需要设置能够录制语音的模拟器。我在谷歌中搜索了一些解决方案，需要通过媒体选项手动启动模拟器。我使用以下 cmd 但出现错误。

```
emulator -avd Test -audio-in MIC 
```

我在 Windows 7 上使用 Android 2.2(Api 2.2)。如何在我的模拟器上启用 MIC 选项。请帮我。

我收到以下错误：

> ```
> >emulator -avd Test -audio-in MIC
> 
> >unknown option: -audio-in 
> ```
> 
> 请使用 -help 获取有效选项列表

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T08:00:42.797

尝试使用此示例：

```
package com.benmccann.android.hello;

import java.io.File;
import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Environment;

/**
 * @author <a href="http://www.benmccann.com">Ben McCann</a>
*/

public class AudioRecorder {

final MediaRecorder recorder = new MediaRecorder();
final String path;

/**
* Creates a new audio recording at the given path (relative to root of SD card).
*/
public AudioRecorder(String path) {
this.path = sanitizePath(path);
}

private String sanitizePath(String path) {
  if (!path.startsWith("/")) {
  path = "/" + path;
 }
 if (!path.contains(".")) {
  path += ".3gp";
 }
 return Environment.getExternalStorageDirectory().getAbsolutePath() + path;
}

/**
 * Starts a new recording.
*/
public void start() throws IOException {
  String state = android.os.Environment.getExternalStorageState();
  if(!state.equals(android.os.Environment.MEDIA_MOUNTED))  {
    throw new IOException("SD Card is not mounted.  It is " + state + ".");
 }

 // make sure the directory we plan to store the recording in exists
 File directory = new File(path).getParentFile();
  if (!directory.exists() && !directory.mkdirs()) {
  throw new IOException("Path to file could not be created.");
 }

 recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
 recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
 recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
 recorder.setOutputFile(path);
 recorder.prepare();
 recorder.start();
}

/**
* Stops a recording that has been previously started.
*/
public void stop() throws IOException {
recorder.stop();
recorder.release();
}

} 
```

希望这对您有所帮助。让我们知道进展如何，或者如果您需要进一步的帮助。

# iphone - 如何实现一个 uitableviewcell 的值来自另一个 uitableviewcell

> ID：10052637
> 
> 赞同：2
> 
> 时间：2012-04-07T07:24:18.787
> 
> 标签：iphone, ios, uitableview, nsfetchedresultscontroller

我正在尝试做一些相当简单的事情，但我看不到最好的方法。我有一个带有两个单元格的 uitableview，第一个在 contextview 中有一个 uitextfield，输入视图设置为 uidatepicker。单元格映射回 nsmanageobject 日期属性。nsmanagedobject 有一个从属属性，它是今天日期和所选日期之间的天数差。加载视图时，此值显示在第二个单元格中。

问题是当用户更改第一个单元格中的日期时，第二个单元格不会自动更新。

首先，我认为我可以在 uitableview 上调用 setNeedsDisplay。但这似乎相当沉重。

所以我一直在阅读 KVO，但我还没有找到一个很好的例子来解决我的问题。

我正在为我的表格视图使用 fetchresultscontrollers。我试图实现一个关键路径依赖项，如 iPhone 文档中所示，但这并没有成功。

例如...

```
+ (NSSet *)keyPathsForValuesAffectingDaysRemaining
{
NSLog(@"keyPathsForValuesAffectingDaysRemaining");
return [NSSet setWithObjects:@"dateOfOccasion", nil];
}

-(NSNumber *)daysRemaining {

    return [self.dateOfOccasion daysFromNow]; //simple calendar calc.  
} 
```

有人可以为我指出一个相对简单问题的适当解决方案的正确方向。

谢谢，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:57:12.670

我认为`[[self tableView] reloadData]`战略性地实施应该可以解决问题。一旦您更改了 中的对象`cell1`，我会假设您基本上将更改保存在全局或 Coredata 中。只需在该配置中重新加载 tableView 即可解决此问题。

在您的情况下，由于您正在实现`NSFetchedResultsController`，因此我假设`objectDidChange`您更改该对象的值时会触发。A`tableView reloadData`将是一个很好的实现！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:06:23.050

如果您有修改后的值，您可以重新加载该行以更新内容。更新行的值后，您可以在 KVO 方法中重新加载行，

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_3_0); 
```

# c# - 在 Windows 任务计划程序 C# 中计划任务

> ID：10052638
> 
> 赞同：4
> 
> 时间：2012-04-07T07:24:26.853
> 
> 标签：c#, scheduled-tasks

我的应用程序需要每天午夜重新开始。根据我的说法，对于这项工作，任务调度程序将是理想的选择，但我无法找到如何在 C# 中使用任务调度程序 API（无需使用外部库）

从任务计划程序启动应用程序完成后，我还想要建议如何在特定时间自动关闭应用程序（即使该特定时间的应用程序可能没有响应，显示一些错误消息框或由于某些问题而无法工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:02:25.263

好吧，我想你不知道这个`schtasks`命令。
您只需打开命令提示符并键入`schtasks /?`即可查看可用选项。
这里需要的是`/create`. 当然这个选项需要一系列参数来配置你的计划任务。但最后你可以解决所有调用：

```
Process.Start("schtasks", commandParams); 
```

对于关闭过程部分，我使用了Microsoft 的 Mark Russinovich`pskill`的[Sysinternals 套件中的一个小实用程序。](http://technet.microsoft.com/it-it/sysinternals/bb896649)这也可以在设置为计划任务的批处理文件中调用。

编辑：从 psshutdown 更改为 pskill （您只需要关闭您的应用程序对吗？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T08:51:55.610

我建议你写一个服务来处理这个问题。另外，为什么*需要重启*？

但是，如果*您必须*使用任务调度程序，请尝试如下：

```
schtasks /create /SC DAILY /TN AppName /TR AppExecutablePath /ST 0
0:00 /ET TIMEFORENDTASK 
```

您可以简单地在批处理脚本中键入它并在用户安装应用程序时运行批处理脚本，然后将其放入卸载批处理脚本中：

```
schtasks /delete /TN AppName 
```

# java - 添加没有操作的 JFileChooser 会导致面板不呈现

> ID：10052647
> 
> 赞同：1
> 
> 时间：2012-04-07T07:26:25.690
> 
> 标签：java, swing, jfilechooser

这是一个奇怪的问题。我有一个解决方案，但我不知道为什么会首先出现问题。观察下面的代码：

```
// VERSION 1

public class test {

    public static void main(String[] args) {
        JFrame mainFrame = new JFrame("Test");
        JPanel inputPanel = new JPanel();

        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.getContentPane().add(BorderLayout.CENTER, inputPanel);
        mainFrame.setBounds(100, 50, 200, 100);
        mainFrame.setVisible(true);

        JButton inputFileButton = new JButton("BROWSE");
        inputPanel.add(inputFileButton);
    }
} 
```

它按预期工作。该按钮不执行任何操作，但可以正确呈现。现在，我添加了一个 JFileChooser（我计划稍后使用它，但现在我正在做的只是实例化它）。

```
// VERSION 2

public class test {

    public static void main(String[] args) {
        JFrame mainFrame = new JFrame("Test");
        JPanel inputPanel = new JPanel();

        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.getContentPane().add(BorderLayout.CENTER, inputPanel);
        mainFrame.setBounds(100, 50, 200, 100);
        mainFrame.setVisible(true);

        JFileChooser inputFileChooser = new JFileChooser(); // NEW LINE

        JButton inputFileButton = new JButton("BROWSE");
        inputPanel.add(inputFileButton);
    }
} 
```

突然我的按钮不再呈现。为什么？我知道两种让它再次工作的方法，但对我来说都没有 100% 的意义。一种解决方法：

```
// VERSION 3

public class test {

    public static void main(String[] args) {
        JFrame mainFrame = new JFrame("Test");
        JPanel inputPanel = new JPanel();

        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.getContentPane().add(BorderLayout.CENTER, inputPanel);
        mainFrame.setBounds(100, 50, 200, 100);
        mainFrame.setVisible(true);

        JButton inputFileButton = new JButton("BROWSE");
        inputPanel.add(inputFileButton);

        JFileChooser inputFileChooser = new JFileChooser(); // MOVE LINE TO END
    }
} 
```

因此，将该行移到末尾允许按钮再次呈现，但这对我来说仍然没有意义，实例化的 JFileChooser 与未连接的按钮有什么关系。我可以解决此问题的另一种方法：

```
// VERSION 4

public class test {

    public static void main(String[] args) {
        JFrame mainFrame = new JFrame("Test");
        JPanel inputPanel = new JPanel();

        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.getContentPane().add(BorderLayout.CENTER, inputPanel);
        mainFrame.setBounds(100, 50, 200, 100);

        JFileChooser inputFileChooser = new JFileChooser();

        JButton inputFileButton = new JButton("BROWSE");
        inputPanel.add(inputFileButton);

        mainFrame.setVisible(true); // MOVE *THIS* LINE TO THE END            
    }
} 
```

为什么上面的版本解决了这个问题是有道理的……显然，关于 JFileChoose 实例化的某些东西使我的按钮不可见，但是这个 setVisible() 方法随后将它带回了光明。但这仍然不能告诉我为什么它一开始就看不见了。

有人可以帮我弄清楚我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:38:59.467

您正在使您的`mainFrame`可见并随后添加按钮。看看[这个 SO question](https://stackoverflow.com/questions/9885855/how-to-dynamically-add-jbutton-to-jpanel)你需要采取哪些步骤来确保你的按钮是可见的。

它在您的第一个示例中起作用的原因可能是纯粹的运气。您添加按钮的调用将在 EDT 显示您的组件之前执行。

注意：请在 EDT 上进行 Swing 操作

# objective-c - 填充nsmutablearrayobjective-c

> ID：10052650
> 
> 赞同：1
> 
> 时间：2012-04-07T07:26:32.790
> 
> 标签：objective-c, nsmutablearray, nsarray, nspredicate

有人可以解释一下以下用于填充 myStrings 数组的代码片段之间的区别：

```
 NSString *match = @"ad*.png";

    NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];
    NSPredicate *fltr = [NSPredicate predicateWithFormat:@"SELF like %@", match];

    NSArray *onlyPNGs = [dirContents filteredArrayUsingPredicate:fltr];

    myStrings = [NSMutableArray array];
    for(int i=0;i<[onlyPNGs count];i++)
    {
        [myStrings addObject:(NSString *)[onlyPNGs objectAtIndex:i]];
    }
    NSLog([myStrings description]); 
```

当我以这种方式填充数组时，在构造函数之后，myStrings 以某种方式变为空，但不是用过滤器填充，如果我手动添加项目一切都很好：

```
 [myStrings addObject:@"adburgerking1.png"];
    [myStrings addObject:@"adburgerking2.png"];
    [myStrings addObject:@"adburgerking3.png"];
    [myStrings addObject:@"addominos1.png"];
    [myStrings addObject:@"admcdonalds1.png"];
    [myStrings addObject:@"admcdonalds2.png"];
    [myStrings addObject:@"admcdonalds3.png"];
    [myStrings addObject:@"admeshuriskender1.png"];
    [myStrings addObject:@"adquickchina1.png"];
    [myStrings addObject:@"adsencam1.png"];
    [myStrings addObject:@"adsultanahmetkoftecisi1.png"]; 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:28:20.740

从您的第一条评论来看：`myStrings`是具有`retain`语义的属性 - 如果作为属性 ( `self.myStrings = ...`) 访问，属性将仅保留值，如果您直接分配给基础变量 ( `myStrings = ...`)，则不会保留。

从您的第二条评论中：`[[NSMutableArray alloc] init]`vs. `[NSMutableArray array]`-`[[NSMutableArray alloc] init]`返回您拥有的数组，您不需要`retain`保留它；但是`[NSMutableArray array]`返回一个您不拥有的数组，`retain`如果您想保留它，则必须使用它。

所以你需要的是：

```
self.myStrings = [NSMutableArray array]; 
```

RHS 返回一个您不拥有的数组，LHS 将返回`retain`- 现在它将保留。

您可能很想使用：

myStrings = [[NSMutableArray alloc] init];

因为 RHS 返回一个您拥有的数组，而 LHS 只是存储它*而不*保留它，因为您正在访问变量而不是属性。但是，此版本不会`release`引用任何以前的数组，`myStrings`因此通常无法正常工作。

The rule is always access a property using dot notation, with the possible exception of a classes `init` and `dealloc` methods (this last bit is debated).

# facebook - 如何获取 Facebook 应用程序的旧权限页面

> ID：10052652
> 
> 赞同：-1
> 
> 时间：2012-04-07T07:26:57.610
> 
> 标签：facebook, authentication

我很困惑如何为我的应用程序获取旧的权限页面。

*   `http://vishwa.us/1/red/`- 我的应用程序

*   `http://apps.facebook.com/howlucky/?r=16` -- 其他应用

上面提到的另一个应用程序获取旧的权限页面。但是我的应用程序正在获取新的权限页面。我也在高级设置中禁用了增强的身份验证对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:25:50.540

我认为您无法再获得旧的身份验证对话框，迁移到新身份验证对话框的应用程序被“卡住”了。

正如它在*[Launching the Improvement Auth Dialog](https://developers.facebook.com/blog/post/633/)*官方博客文章中所说：

> 2012 年 2 月 1 日，所有应用都将启用改进的对话框，但尚未完全配置其对话框的用户可以在 2 月 15 日之前禁用开发者应用中的设置，届时将为所有应用启用该设置。

我猜您在问题中链接的应用程序由于某种原因没有迁移，我无法解释原因。

至于指向您的应用程序的链接，您只是做错了，因此看起来非常糟糕。出于某种原因，您使用了*display=touch*，这导致尝试通过普通 Web 浏览器使用它的用户体验不佳。您应该使用*display=page*这也是默认设置（如您在[Dialog 文档](http://developers.facebook.com/docs/reference/dialogs/)中所见），因此您可以完全忽略*display*属性。

# java - Integer vs. String decision making in Java

> ID：10052658
> 
> 赞同：4
> 
> 时间：2012-04-07T07:27:52.180
> 
> 标签：java, string, integer

I'm working on a program where user input is an array of mixed Strings and Integers. For Example:

dog 10 23 cat frog 22 elephant

I'm supposed to sort this array without changing the type of each index. So the output will be;

cat 10 22 dog elephant 23 frog

After reading the line from the console, I'm using a string tokenizer to go through each element. After that I'm trying to parseInt and if it throws an exception, I'm assuming that it is a string, otherwise it is an Integer. Is there a better way to figure out if a token is numerical or not?

Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T07:36:09.937

依赖程序逻辑的异常被认为是不好的做法，因为异常很慢。相反，您可以使用正则表达式。

```
Matcher numericalMatcher = Pattern.compile("^-?\\d+$").matcher(token);
if( numericalMatcher.matches() ) {
   // Token is a number
} else {
   // Token is not a number
} 
```

请参阅[http://docs.oracle.com/javase/1.6.0/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.6.0/docs/api/java/util/regex/Pattern.html)和[http://docs.oracle.com/javase/1.6.0/docs/api /java/util/regex/Matcher.html](http://docs.oracle.com/javase/1.6.0/docs/api/java/util/regex/Matcher.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T07:34:29.347

使用`parseInt`不是一个坏主意。

或者，您可以使用正则表达式，但我相信您的选择更加实用和简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:48:19.417

例如，您可以使用“StringUtils.isNumeric”来检测字符串是否为数字

[http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html)

缺点是您必须包含一个库。

# c++ - Related to Exception Handling

> ID：10052664
> 
> 赞同：0
> 
> 时间：2012-04-07T07:28:55.307
> 
> 标签：c++

> I am trying to call terminate function. [I think this function gets called when another exception arises during stack unwinding]. The same scenario I have written and trying to verify.
> 
> I am able to see a call being made to terminate() function but i am not sure why i am geting the Debug Error.
> 
> While trying to execute the following code in Visual studio 2008, I am getting an error message dialog box "Debug Error". The output is also being displayed:
> 
> > Output:
> > 
> > In try block
> > 
> > In constructor of A
> > 
> > In constructor of B
> > 
> > In destructor of B
> > 
> > In destructor of A
> > 
> > Call to my_terminate
> > 
> > Why this "Debug Error" window appears while executing this code? It is expected behavior? How to remove this error?

```
class E
{
public:
      const char* message;
      E(const char* arg) : message(arg) { }
};
void my_terminate() 
{
      cout << "Call to my_terminate" << endl;
};

class A 
{
public:
      A() { cout << "In constructor of A" << endl; }
      ~A() 
      {
          cout << "In destructor of A" << endl;
          throw E("Exception thrown in ~A()");
      }
};

class B 
{
public:

         B() { cout << "In constructor of B" << endl; }
         ~B() { cout << "In destructor of B" << endl; }
};

void main() 
{
      set_terminate(my_terminate);

      try 
      {
        cout << "In try block" << endl;
        A a;
        B b;
        throw("Exception thrown in try block of main()");
      }
      catch (const char* e) 
      {
        cout << "Exception: " << e << endl;
      }
      catch (...)
      {
        cout << "Some exception caught in main()" << endl;
      }

      cout << "Resume execution of main()" << endl;
      getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:31:44.363

You are throwing exception from `~A()`. Throwing an exception out of a destructor is dangerous. If another exception is already propagating the application will terminate. See [https://stackoverflow.com/a/130123/72178](https://stackoverflow.com/a/130123/72178) for more detailed description.

> Why this "Debug Error" window appears while executing this code?

You are throwing exception in `main` from `try` block. This invokes "Stack unwinding" and destructors of `A` and `B` are called. When exception is thrown from `~A()` application terminates.

> It is expected behavior?

Yes, it is defined by Standard.

> How to remove this error?

Don't throw from destructors.

# asp.net-mvc - Nested content place holders

> ID：10052666
> 
> 赞同：3
> 
> 时间：2012-04-07T07:29:09.860
> 
> 标签：asp.net-mvc

I want my master page to be divided in two parts - left and right.

Here's is how I do it:

The master page:

```
<section id="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server">
        <div>
            <asp:ContentPlaceHolder ID="left" runat="server" />
        </div>
        <div>
            <asp:ContentPlaceHolder ID="right" runat="server" />
        </div>
    </section>
</asp:ContentPlaceHolder > 
```

The About view:

```
<asp:Content ID="aboutContent" ContentPlaceHolderID="MainContent" runat="server">
    <asp:Content ID="leftHome" ContentPlaceHolderID="left" runat="server">
        <h2>About</h2>
    </asp:Content>
    <asp:Content ID="rightHome" ContentPlaceHolderID="right" runat="server">
        <h2>About</h2>
    </asp:Content>
</asp:Content> 
```

I get the error: Content controls have to be top-level controls in a content page or a nested master page that references a master page.

How to resolve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:36:43.000

你不能有这样的嵌套。以下是您可以在母版页中执行的操作：

```
<section id="main">
    <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    <div>
        <asp:ContentPlaceHolder ID="left" runat="server" />
    </div>
    <div>
        <asp:ContentPlaceHolder ID="right" runat="server" />
    </div>
</section> 
```

在视图中：

```
<asp:Content ID="leftHome" ContentPlaceHolderID="left" runat="server">
    <h2>Left content</h2>
</asp:Content>

<asp:Content ID="rightHome" ContentPlaceHolderID="right" runat="server">
    <h2>Right content</h2>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    some main content
</asp:Content> 
```

# php - How can I run .php, .aspx on same site ubuntu 10.04

> ID：10052669
> 
> 赞同：0
> 
> 时间：2012-04-07T07:29:13.503
> 
> 标签：php, asp.net, ubuntu-10.04

I installed ModMono using the reference: [http://ubuntuexperiment.wordpress.com/2009/01/29/running-aspnet-applications-in-ubuntu-using-modmono/](http://ubuntuexperiment.wordpress.com/2009/01/29/running-aspnet-applications-in-ubuntu-using-modmono/)

Now I am able to run .aspx pages, but if I try to run .php files its not working.

How can I solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:01:54.060

我得到了解决方案，它对我很有效.....

这篇文章帮助我为同一个站点同时运行 .net 和 .php。

[http://studentguru.gr/b/kingherc/archive/2008/05/22/how-to-mono-1-9-1-and-php-5-on-ubuntu-8-04-hardy.aspx](http://studentguru.gr/b/kingherc/archive/2008/05/22/how-to-mono-1-9-1-and-php-5-on-ubuntu-8-04-hardy.aspx)

# c++ - How to configure openMP for nested loops to keep the inner loop not parallelized?

> ID：10052670
> 
> 赞同：0
> 
> 时间：2012-04-07T07:29:15.837
> 
> 标签：c++, parallel-processing, openmp

I have the following nested for loops. I want to parallelize the first loop but the second loop must NOT be parallelized. So I want that each thread executes the second loop in itself, which means that second loop must be special for each thread (for each "i" in the code).

How can I do that?

```
#pragma omp parallel for
    for (i=k+1;i<row;i++){
        for (n=0;n<k;n++){
           // #pragma omp atomic
            dummy += L[i][n]*L[k][n];
            L[i][k] = (A[i][k] - dummy)/L[k][k];
        }
        dummy = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:50:19.473

该`omp parallel for`pragma 仅适用于紧随其后的循环。`i`循环将分布在线程之间。在 的每次迭代中`i`，`n`循环将在同一个线程上执行。您的代码已经完成了您正在尝试做的事情。

# google-docs-api - Can the changes feed be limited to changes within a specific collection?

> ID：10052671
> 
> 赞同：1
> 
> 时间：2012-04-07T07:29:16.640
> 
> 标签：google-docs-api

I've been pouring over the new documentation for the Google Docs API for more efficient ways to synchronize my application's resources and I came upon the changes feed. So far, all the documentation leads me to believe that the changes feed applies to the entire documents list only without the ability to inquire about changes to a specific collection. My application doesn't care about any documents besides the ones belonging to the collections the user has specified. Does anyone know if querying a specific collection for a changes feed is possible? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:53:08.130

这是不可能的，但是更改提要的性质是，通过[存储最大的时间戳](https://developers.google.com/google-apps/documents-list/#retrieving_all_changes_since_a_given_changestamp)来获取最新的一些更改应该更便宜。获得更改提要后，您可以通过查看条目的 #parent 链接来过滤它们，如下所示：

```
<link rel='http://schemas.google.com/docs/2007#parent'
      type='application/atom+xml'      
      href='https://docs.google.com/feeds/default/private/full/folder%3A0B343'
      title='Some API Documentation' /> 
```

# asp.net - Need an alternative to using StringBuilder when calling ExecuteXmlReader to return a very large XML file

> ID：10052672
> 
> 赞同：0
> 
> 时间：2012-04-07T07:29:37.933
> 
> 标签：asp.net, xml, ado.net, out-of-memory, large-files

Currently one my DAL methods uses the ExecuteXmlReader command to read and append to a StringBuilder object and return XML as a string. I realize this isn't the best way to handle very large files (200MB+) as when the ToString() method is called on StringBuilder it throws an out of memory exception.

There are certain constraints I need to adhere by - I cannot return a XMLReader out of the DAL (db connection stays open, etc), this XML will have to be written to file and keeping it's formatting for various reasons, currently using an XMLTextWriter's WriteRaw method for that purpose.

What would be the best data type to return from the DAL to make all this work with large XML files? I explored the options of using a DataSet, Memory Stream and a Byte Array - but each have their shortfalls. I am looking for the best practice and some code samples would be helpful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:34:08.800

您可以使用 XDocument 处理您的 xml 文件。您可以使用 linq to xml 来查询您的元素。下面是一个例子：

```
XDocument document = XDocument.Load("http://someurl.com/data.xml");

var elements = from element in document.Descendants("SomeElement")
               select element;

Console.WriteLine(elements.First().Value); 
```

如果您也因此遇到内存不足异常（我想您会的），那么您应该看看以下帖子：

[http://james.newtonking.com/archive/2007/12/11/linq-to-xml-over-large-documents.aspx](http://james.newtonking.com/archive/2007/12/11/linq-to-xml-over-large-documents.aspx)

关于 XDocument 类的更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

和这里

[http://www.hookdonlinq.com/Print.aspx?Page=LINQtoXML5MinuteOverview](http://www.hookedonlinq.com/Print.aspx?Page=LINQtoXML5MinuteOverview)

祝你好运！

# r - Emacs + R: too long buffer name */usr/local/bin/R* for R buffers

> ID：10052673
> 
> 赞同：2
> 
> 时间：2012-04-07T07:30:01.207
> 
> 标签：r, emacs, ess

I work with Emacs 24 (Emacs-pretest-24.0.91-universal-10.6.7 from [http://emacsformacosx.com/builds](http://emacsformacosx.com/builds)) on Mac OS X 10.7.3 with R 2.15\. When I open a new R buffer, the buffer name is `*/usr/local/bin/R*`. For all other buffers I receive a reasonable file name, but for R buffers, the filename always contains this path. This is quite annoying if you have multiple R buffers open and you display a buffer menu (for example). Then you see a lot of buffers displayed as `*/usr/local/...` and you can't see which of the buffers corresponds to which R process.

Is this a problem of the Mac or just my setup?

The only thing I can image as a reason for this is the following. To call R from the console (as from within Emacs), I defined a symbolic link in `/usr/local/bin` pointing to the correct path where R is installed. This link I called "R".

```
cd /usr/local/bin
sudo ln -s /Library/Frameworks/R.framework/Resources/bin/R R 
```

I could imagine that the emacs buffer name is determined from the link `/usr/lcoal/bin/R` but I don't know how to fix this since without the link I can't start R. On Ubuntu, I simply see the buffer name R (or R[2],... etc.), it would be great to have the same on Mac OS.

**Update**

```
inferior-R-program-name is a variable defined in `ess-custom.el'.
Its value is "/usr/local/bin/R"
Original value was "R"

ess-dialect is a variable defined in `ess-custom.el'.
Its value is "R"
Local in buffer */usr/local/bin/R*; global value is "R"
Automatically becomes buffer-local when set in any fashion.

ess-use-inferior-program-name-in-buffer-name is a variable defined in `ess-custom.el'.
Its value is t
Original value was nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:07:25.837

您有两个选择：设置为（`inferior-R-program-name`并`"R"`确保`/usr/local/bin`在您的.`$PATH``ess-use-inferior-program-name-in-buffer-name``nil``ess-dialect`

# c# - a sample code about the concept " Interface as a contract " that describes the state and the role of the terms caller and the callee?

> ID：10052675
> 
> 赞同：0
> 
> 时间：2012-04-07T07:30:51.653
> 
> 标签：c#, interface

In many books or articles u may see such a definition about interface :**an interface is a "contract" or an agreement between the consumer (caller) and the provider (callee)**.but Unfortunately there is no Clear example that describes what is **caller class** or what is **callee class** and show how they could communicate with each other through interface.

from this point of view I am confused about The Terms *caller(consumer) and callee (provider)*, I just know that we define an interface and a class Implements that Interface . is the implementor class considerd as *caller* if so what about *callee* , how callee uses the interface , could any one describe this terms clarely and give a clear example about that .

any help would be highly appreciated .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:39:15.340

实现接口的人是*被调用者*，因为他*提供*了接口的实现。消费者是使用*被调用者*对象的人，所以他们称之为*调用者*。

**编辑**

```
pulbic interface IPlugin
{
    double Calculate(double d1, double d2);
}

public class WebConnectPlugin: IPlugin
{
   public double Calculate(double d1, double d2){ // some code}
}

public class DBConnectPlugin: IPlugin
{
   public double Calculate(double d1, double d2){ // some code}
} 
```

在代码中的某处：

```
public class CallerIDE
{
   IPlugin plugin= null; 

   public void DoSomething()
   {
      contractor = GetPlugin();
      double value = contractor.Calculate(10.3456, -3.546456);
   }

   private IPlugin GetPlugin()
   {
      return new WebConnectPlugin();

      return new DBConnectPlugin(); //based on some logic
   }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T18:28:27.080

学校是许多个人来学习的地方。每个人都有不同的学习方式。

学校有一个规则：任何进来的个人都必须是可学习的。

学校确信，如果一个人不是可学习的，那么它就不能教他们，因此
他们就不能学习。

每个 INDIVIDUAL 都实现 ILEARNABLE 接口

```
public  class INDIVIDUAL : ILEARNABLE //this is provider class as it provides implementation of interface.
{

    LEARN()
     {
        //WAY OF LEARNING IS MENTIONED HERE...
     }
} 
```

学校通过一种叫做 Teach() 的方法教他们

```
class SCHOOL  // This is consumer class -
{
   void Teach (ILEARNABLE  anyone)
   {
     ...     
     anyone.LEARN();
     ... some code...
   }

} 
```

这里学校只要实现了 ilearnable 接口就不用担心谁是个体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:38:19.303

调用者将是调用实现接口的事物的代码。被调用者将是一个实现接口的对象。尽管人们很少使用这个术语。

这是（java-inspired）伪代码中的一个示例：

```
interface readable {
    function read();
}

//callee
class book implements readable {
    function read() {
        print this.text;
    }
    //other implementation code goes here
}

//caller
define readable b = new book();
b.read(); 
```

# objective-c - NSPoint as dictionary index

> ID：10052679
> 
> 赞同：0
> 
> 时间：2012-04-07T07:31:25.717
> 
> 标签：objective-c

I need to have data structure, each element in which is accessible by pair of (x,y) (like nspoint).

I can store them in NSDictionary with keys like @"8,10", but I'm looking for more elegant and efficient solution (I don't want to have two dimensional array cause I want to have O(1) access to elements by coordinate)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:56:41.157

您可以使用`NSValue`as 键（`+NSValue valueWithCGPoint:`请参阅[此链接](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/NSValue_UIKit_Additions/Reference/Reference.html)），可能有点“轻”。否则，如果值是 x 和 y 对有一些限制，例如 x 为 256，y 为 256，您可以使用位掩码，其中前 8 位表示 x 值，后 8 位表示 y 值（因为 256 = 2^8)。

# sql - Count right word from a specific variable

> ID：10052687
> 
> 赞同：0
> 
> 时间：2012-04-07T07:34:06.720
> 
> 标签：sql, sql-server, sql-server-2008

How should I be able to count the word "asdf" in the variable aaa with value "asdf_dd_adf34asdf_sdf"?

```
DECLARE @aaa varchar;

SET @aaa = 'asdf_dd_adf34asdf_sdf'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:40:24.423

如果删除单词的出现次数，然后除以单词的长度，请计算有多少字符消失：

```
(len(aaa) - len(replace(aaa, 'asdf', ''))) / len('asdf') 
```

# customization - 仅登录 prestashop 目录

> ID：10052690
> 
> 赞同：0
> 
> 时间：2012-04-07T07:34:46.490
> 
> 标签：customization, prestashop

我正在构建一个 prestashop 目录，但它只需要对登录的客户可见。这可能吗。如果为此使用内置的 prestashop 登录，那就太好了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:59:14.253

我有一个建议。您可以使用 PrestaShop 1.5 中的客户组功能，并且只允许登录的客户查看价格。对于在访客中分组的每个客户，他们会在目录模式下看到您的网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T12:14:16.933

Prestashop 1.5 解决方案：

只需上传原始文件：

```
classes\controller\FrontController.php 
```

进入：

```
override/classes/controller/FrontController.php 
```

接下来，重命名类。最终代码应如下所示：

```
class FrontController extends FrontControllerCore
{
    public function init()
    {
        parent::init();
        if (!$this->context->customer->isLogged() && $this->php_self != 'authentication' && $this->php_self != 'password')
        {
            Tools::redirect('index.php?controller=authentication?back=my-account');
        }
    }
} 
```

最后一步是手动删除以下文件，以便 prestashop 知道被覆盖的类（它将自动重新生成）：

```
cache/class_index.php 
```

瞧，无需覆盖核心文件即可实现功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:29:28.140

这会很容易。

使用此代码：

```
 if(!self::$cookie->isLogged(true) AND in_array($this->step, array(1, 2, 3)))
    Tools::redirect('authentication.php'); 
```

在您的 indexController 的预处理中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T10:06:25.093

这是我的解决方案，它就像一个魅力，而且很容易解决！

在 classes\Configuration.php （大约第 114 行）中，它看起来像这样

```
static public function get($key, $id_lang = NULL)
{
    if ($id_lang AND isset(self::$_CONF_LANG[(int)$id_lang][$key]))
        return self::$_CONF_LANG[(int)$id_lang][$key];
    elseif (is_array(self::$_CONF) AND key_exists($key, self::$_CONF))
        return self::$_CONF[$key];
    return false;
} 
```

将其更改为：

```
static public function get($key, $id_lang = NULL)
{
    //Grab access to the $cookie which is already loaded in the FrontController as global $cookie;
    global $cookie;
    if ($id_lang AND isset(self::$_CONF_LANG[(int)$id_lang][$key]))
        return self::$_CONF_LANG[(int)$id_lang][$key];
    elseif (is_array(self::$_CONF) AND key_exists($key, self::$_CONF))
        //If the system is trying to find out if Catalog Mode is ON, then return the configuration setting,
        //but override it with the user logon status
        if($key == 'PS_CATALOG_MODE')
        {
            return !$cookie->logged || self::$_CONF[$key];
        }
        else
        {
            return self::$_CONF[$key];
        }
    return false;
} 
```

本质上，我想强制系统在用户未登录时显示“目录模式”，并在用户登录时将其关闭。

我可以保证这适用于 v1.4.3.0 并且当前版本 1.4.8.2 的代码（在本文发布时）没有改变，所以它应该在那里工作。

# playframework - 播放框架：带有表单参数的 REST url

> ID：10052693
> 
> 赞同：1
> 
> 时间：2012-04-07T07:35:34.960
> 
> 标签：playframework

Play!Framework 允许您编写一个输入名称为“message.id”的表单，然后像这样编写一个动作

```
public static void getMessage( Message message )
{
    ....
} 
```

因此，参数 message.id 使用值上的“findById”转换为模型消息。

Play 还允许您编写 REST url。例如 GET /message/{id}

但在这种情况下，动作签名是

```
public static void getMessage( long id )
{
    ....
} 
```

在这种情况下，我需要自己调用 Message.findById。

我正在尝试做这样的组合

```
GET /message/{message.id}    MessageController.getMessage 
```

以及要采取的行动

```
public static void getMessage( Message message ){ ... } 
```

但我无法让它工作。如果我使用 play 1.2.1，如何让它工作？

我在此找到了一个 google 组线程：[here](https://groups.google.com/forum/?fromgroups#!topic/play-framework/7JdAYZ2RShc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:30:28.533

你不能*把这*两者混为一谈，这没有多大意义。Play 的[pojo 对象绑定](http://www.playframework.org/documentation/1.2.4/controllers#anamepojoPOJOobjectbindinga)允许您使用 Java 对象作为参数编写操作方法，但该机制仅在您遵循其约定时才有效。如果要传递 a`Message`来`getMessage()`简单地定义路由如下：

```
GET    /message/{message}    MessageController.getMessage 
```

您将能够通过类似的 URL 选择正确的消息`/message/message.id=123`

# ruby - Ruby gem 改变 irb 输出字体大小和颜色？

> ID：10052694
> 
> 赞同：0
> 
> 时间：2012-04-07T07:35:40.917
> 
> 标签：ruby, rubygems, terminal, irb

任何机构都可以指导我动态更改终端输出`ruby gem`的字体大小和颜色。`irb`如果没有`gem`，还有其他方法可以减轻终端和/或 irb 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:03:48.620

您也可以尝试使用[pry](http://pry.github.com)。`irb`它是外壳的替代品。它具有开箱即用的彩色结果等等。

有关于它的[RailsCast](http://railscasts.com/episodes/280-pry-with-rails)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:46:00.890

我问了 DuckDuckGo，它告诉我你应该看看：[fancy_irb](https://github.com/janlelis/fancy_irb)

```
$ sudo gem install fancy_irb
$ irb
> require 'fancy_irb'
=> true
> FancyIrb.start
=> "Enjoy your FancyIrb :)" 
```

# python - 如何在 Python 中存储计算结果，这样我的程序就不会计算两次相同的东西？

> ID：10052698
> 
> 赞同：3
> 
> 时间：2012-04-07T07:36:10.123
> 
> 标签：python, math, memory, runtime, primes

我一直在使用 Python 中的程序（我是一个完整的新手）遇到问题，它不存储来自计算的数据，并且当我觉得它应该保存它时一遍又一遍地执行它。我怎样才能让 Python 保存答案，这样它就不会一遍又一遍地计算程序？

前任：

```
import prime
def g(x):
    i=0
    while i<len(prime.sieve(x)):
        print str(prime.sieve(x)[i])+' is prime'
        i=i+1 
```

这是“主要”模块，以防有人想要编译它：

```
def sieve(max):
    #Takes in a number, and returns all primes between 2 and that number

    #Start with all of the numbers
    primes = range(2,max+1)
    #Start running through each number 
    for i in primes:
            #Start with double the number, and
            j = 2
            #remove all multiples
            while i * j <= primes[-1]:
                    #As long as the current multiple of the number
                    #is less than than the last element in the list
                    #If the multiple is in the list, take it out
                    if i * j in primes:
                            primes.remove(i*j)
                    j=j+1
    return primes 
```

无论如何，第一段代码一遍又一遍地计算列表“prime.sieve(x)”，我想保存它以供打印时参考。

谢谢！

罗弗斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:38:27.907

```
saved_sieve_map = {}
def saved_sieve(x):
  if x not in saved_sieve_map:
    saved_sieve_map[x] = sieve(x)
  return saved_sieve_map[x] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T07:41:48.797

这称为记忆。幸运的是，有很多 memoization 装饰器，其中之一在这里：[http ://wiki.python.org/moin/PythonDecoratorLibrary#Memoize](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)

示例用法是：

```
@memoized
def fibonacci(n):
   "Return the nth fibonacci number."
   if n in (0, 1):
      return n
   return fibonacci(n-1) + fibonacci(n-2)

print fibonacci(12) 
```

（`@memoized`表达式将装饰器应用于它后面的函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:40:34.163

您可能只是将其分配给局部变量：

```
i=0
saveit = prime.sieve(x)
while i<len(saveit):
    print str(saveit[i])+' is prime'
    i=i+1 
```

注意：即使`g(x)`使用相同的值调用两次，它仍然会计算筛子`x`。对于确实保存计算甚至超出范围的版本，`g`请参见例如 Keith 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T08:03:31.327

此函数可用于消除递归复杂性。

```
from functools import wraps
def memo(func): 
    cache = {}
    @wraps(func)
    def wrap(*args):
        if args not in cache: 
            cache[args] = func(*args)
        return cache[args] 
    return wrap 
```

无论如何，这是我对筛子的实现，它应该比你的运行得更快。

```
@memo
def sieve(end):
    import itertools
    lng = ((end/2)-1+end%2)
    sieve = [True]*(lng+1)
    for i in itertools.ifilter(lambda z: sieve[z],xrange(int(end**0.5) >> 1)):
        n=len(sieve[int((i*(i + 3) << 1) + 3): int(lng): int((i << 1) + 3)])
        sieve[int((i*(i + 3) << 1) + 3): int(lng): int((i << 1) + 3)]=[False]*n
    return sum([(x << 1) + 3 for x in itertools.compress(xrange(lng),sieve)])+2 
```

# javascript - 子“a”元素显示块阻止了“li”鼠标悬停事件

> ID：10052711
> 
> 赞同：0
> 
> 时间：2012-04-07T07:38:57.700
> 
> 标签：javascript, html, css

我试图在它的 parent 事件上显示一个子导航`<ul>`标签。问题是该元素设置为，因此永远不会触发'事件。`<li>``mouseover``a``display:block``li``hover`

它使用 jQuery 工作，但我不能让它使用普通的 javascript。我将侦听器应用于标题元素，并使用该`.matchesSelector`方法确定事件目标是否匹配`.nav > li;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:43:59.700

没有代码，人们不得不*猜测*，但我的猜测是您正在使用`mouseover`并`mouseout`确定悬停。事件*冒泡*，所以你会从 的后代元素中`mouseout`收到，并且错误地（我在这里再次猜测）认为光标已经离开了而不是离开了 . 的后代元素之一。同样，当光标从自身移动到后代元素时，触发 a 。它在 jQuery 中工作（使用，大概？）因为 jQuery 不使用and ，它使用and*`mouseout``li``li``li``li``li``mouseout``hover``mouseover``mouseout``mouseenter``mouseleave`，更适合这种情况。（并且它在本机没有它们的浏览器上模拟它们；它们最初是 IE-only。）*

 *因此，如果您使用 jQuery，显然，只需使用`hover`. 如果您不是，并且您没有使用库，或者使用不为您模拟的库，则`mouseenter`需要`mouseleave`检查`mouseout`操作来自哪个元素并忽略它，除非它是它`li`本身。

如果子导航`ul`无法覆盖`li`显示它的内容，您可能会考虑仅使用 CSS 的解决方案。例如，结构：

```
<ul class="mainnav"><!-- Main nav -->
  <li><!-- Nav item 1 -->
    Nav Text 1
    <ul><!-- Menu for nav item 1 -->
    ...
    </ul>
  </li>
  <li><!-- Nav item 2 -->
    Nav Text 2
    <ul><!-- Menu for nav item 2 -->
    ...
    </ul>
  </li>
</ul> 
```

这个 CSS 会做到这一点（你想要更多，用于定位，但这会做显示/隐藏部分）：

```
ul.mainnav > li > ul {
  display: none;
}
ul.mainnav > li:hover > ul {
  display: none;
} 
```

这在 IE6 上不起作用；它适用于 IE7 及更高版本（如果您处于标准模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:45:07.537

为什么不为所有子元素定义事件处理程序，然后做一个

```
event.cancelBubble = true; //IE
event.stopPropagation(); //FF, etc 
```*

# asp.net-mvc - 在 ajax 发布后，我在显示结果时遇到问题

> ID：10052714
> 
> 赞同：1
> 
> 时间：2012-04-07T07:39:07.097
> 
> 标签：asp.net-mvc

我有一个名为**Index.cshtml**的视图，其中包含一个用户表（创建/编辑/更新功能）。

![在此处输入图像描述](../Images/3fb2deadb0f75baec5baa90947a4d899.png)

单击按钮（创建/编辑/更新）时，我有一个 jQuery 对话框。接下来我使用这样的 ajax 帖子：

*   编辑>>调用一个动作控制器进行编辑并返回一个json>>用javascript更新行表
*   删除 >> 调用一个动作控制器来删除并返回一个 json >> 用 javascript 删除行表
*   创建 >> 调用一个动作控制器来创建并重定向到 Index.cshtml >> ???

对于创建部分，我有一个问题：我想“简单地”显示我的视图，但我在一个 ajax 帖子中。我不知道该怎么做。

这是我的代码（提交数据然后刷新视图）：

```
 $.post($(this).attr('action'), $(this).serialize(), function (data, status) {
            $('#my-modal').modal('hide');

            if (data.operation == 'edit') {
                // Edit
                var row = $('#' + data.userid);
                row.children(':eq(0)').text(data.company);
                row.children(':eq(1)').text(data.username);
                row.children(':eq(2)').text(data.email);
                row.children(':eq(3)').text(data.firstname);
                row.children(':eq(4)').text(data.lastname);
            } else if (data.operation == 'delete') {
                // Delete
                var row = $('#' + data.userid);
                row.remove();
            } else {
                // Create
                alert(data);
                $("#userList").html(data);
            }
        }) 
```

如您所见，我检查了 data.operation，它告诉我是否对（最后一种可能性）“创建”进行了“编辑”或“删除”。对于创建问题，我的整个视图（< html> < body> ...）已生成并添加到我的#userList div 中。那是重复的东西。

也许这不是正确的做法？

谢谢。

* * *

**更新**

这是我的**创建**操作：

```
 [HttpPost]
    public ActionResult Create(UserCreateViewModel viewModel)
    {
        if (!ModelState.IsValid)
        {
            this.Response.StatusCode = 400;
            return PartialView("Create", viewModel);
        }

        var userDTO = new UserDTO();
        Mapper.Map(viewModel, userDTO);
        _requestServiceClient.CreateNewUser(userDTO);
        return RedirectToAction("Index");
    } 
```

这是我的**索引**操作：

```
 [Authorize]
    public ActionResult Index(string q, int? page)
    {
        var users = _requestServiceClient.GetUsers();
        ...
        ...
        if (Request.IsAjaxRequest())
            return PartialView(userListPaged);
        else
            return View(usersListPaged);
    } 
```

在 relexion 之后，在“创建”的情况下，我认为最好像这样简单地重新加载页面：

```
 ...
            } else if (data.operation == 'create') {
                // Create >> refresh the page
                location.reload();
            } 
```

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:21:15.307

将此代码放入您的局部视图中：

```
@{
    Layout = null;
} 
```

此代码表示您不需要此页面的主视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:12:55.003

如果您的列表不是太长，我建议在每个 ajax 请求中发回完整列表，无论是更新、创建还是删除。

因此，您可以删除数据操作检查（如果有一天您更改列的顺序，您的 :eq(0) 内容将失败），只需将 ajax 请求的结果放在您的#userlist div 中。

**编辑**

但是要解决您的创建问题：

只需在 Create 操作中替换这一行：

```
return RedirectToAction("Index"); 
```

用这条线：

```
return PartialView("Index", _requestServiceClient.GetUsers()); 
```

它应该只返回新列表。

**编辑2**

好的，您的 Index.cshtml 似乎具有完整的布局，而不仅仅是我想的列表。所以你必须先这样做：

1.  仅移动在单独的视图中构建列表所需的 HTML 代码，`_List.cshtml`例如将其命名
2.  在您的 Index.cshtml 中 HTML 代码所在的`@Html.Partial("_List")`位置
3.  此时，您的索引视图应该看起来与以前相同，但您有单独的列表视图
4.  将我上面的示例更改为不返回索引，而是返回 _List 部分： `return PartialView("_List", _requestServiceClient.GetUsers());`

我希望这对你有用。

# java - Collection.shuffle 不工作 - GWT

> ID：10052718
> 
> 赞同：6
> 
> 时间：2012-04-07T07:40:01.887
> 
> 标签：java, collections, shuffle

使用`import java.util.Collections;`我应该的。不是 GWT 的。在 GWT 项目的共享文件夹中有错误的类。

### 代码是这样的结构：

```
List<String []> qaList;
qaList = new ArrayList<String[]>();

qaList.add("12345 main st", "tomah");
qaList.add("124 main st", "lacrosse");
qaList.add("123 main", "yeeehahaaa");

Collections.shuffle(qaList); 
```

### 给我这个错误：

> [错误] [_012cfaexam] - 第 109 行：`shuffle(List<String[]>)`> 类型集合的方法未定义

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T08:44:00.663

引自[GWT 的 JRE 仿真参考](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)：

> Google Web Toolkit 包含一个模拟 Java 运行时库子集的库。下面的列表显示了 GWT 可以自动翻译的一组 JRE 包、类型和方法。请注意，在某些情况下，给定类型仅支持方法的子集。

具体来说，如果您查看[Package java.util](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_util)`Collections`  ，您会发现它不包含该方法。`shuffle()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-20T13:34:35.023

还有另一种解决此错误的方法：

```
Random random = new Random(qaList.size());  

for(int index = 0; index < qaList.size(); index += 1) {  
    Collections.swap(qaList, index, index + random.nextInt(qaList.size() - index));  
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T08:42:05.860

除了matsev已经说过的话：

如果你的代码是 GPL，你可以复制 SUN 的实现：

```
public static void shuffle(List<?> list, Random rnd) {
    int size = list.size();
    if (size < SHUFFLE_THRESHOLD || list instanceof RandomAccess) {
        for (int i=size; i>1; i--)
            swap(list, i-1, rnd.nextInt(i));
    } else {
        Object arr[] = list.toArray();

        // Shuffle array
        for (int i=size; i>1; i--)
            swap(arr, i-1, rnd.nextInt(i));

        // Dump array back into list
        ListIterator it = list.listIterator();
        for (int i=0; i<arr.length; i++) {
            it.next();
            it.set(arr[i]);
        }
    }
} 
```

它基本上是[Fisher Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)并进行了一些优化，以防列表不是随机访问。

# php - PHP中函数前的感叹号是什么意思

> ID：10052719
> 
> 赞同：6
> 
> 时间：2012-04-07T07:40:04.907
> 
> 标签：php, function, boolean

就像标题一样，函数前的感叹号在 PHP 中的真正含义是什么？

例如下面的语句：

```
if (!stripos($haystack, $needle)) {} 
```

与此相同：

`if (stripos($haystack, $needle) === FALSE) {}`

或这个：

`if (stripos($haystack, $needle) == FALSE) {}`

任何澄清将不胜感激

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-07T07:42:32.053

前面`!`的功能同...

```
if (stripos($haystack, $needle) == FALSE) {} 
```

这是相同的，因为它是`==`不检查类型的比较。

它被称为*否定一元运算符*。它*翻转*一个值的布尔值（如果需要，强制为布尔值）。

例如...

```
! 0;    // True
! 1 ;   // False
! '';   // True
! true; // False
!! 0    // False 
```

这个`!!`技巧在没有`(bool)`演员表的语言中很方便。通过翻转一个值两次，您可以获得其原始值的布尔版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:44:14.910

！将进行价值比较，所以它与我认为的第二个比较相同。因为 ！会将 false、0、null 捕获为 false，并且它们与您看到的类型不同。"" 可能是一个例外，因为我总是使用 trim()!="" 来比较字符串。我不知道那件事。

# c# - 通过 Javascript 管理 Activex .NET 事件

> ID：10052722
> 
> 赞同：0
> 
> 时间：2012-04-07T07:40:19.950
> 
> 标签：c#, javascript, com, activex

我确实编写了一个简单的 COM .NET dll (Activex)，以便通过我的 Html 页面通过 javascript 调用一些方法并管理一些事件。

好吧，在阅读了许多关于当今的主题之后，我无法通过 javascript 管理任何事件。我确实尝试了很多示例，很多语法，但不是为了我的目的。

我的 .NET COM 事件声明如下所示：http: [//www.codeproject.com/Articles/24089/Create-ActiveX-in-NET-Step-by-Step](http://www.codeproject.com/Articles/24089/Create-ActiveX-in-NET-Step-by-Step)

我也读过这篇文章（http://stackoverflow.com/questions/150814/how-to-handle-an-activex-event-in-javascript），但我不确定如何简单地扩展我的 ActivexControl按照建议的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:58:32.837

以下是关于我的 activex 的代码片段：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Forms;

using System.Threading;

namespace AxControls
{

    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    [Guid("61327C9D-EFC5-42B7-BA0D-4A8648797003")]
    public interface IHelloWorld
    {
        string GetText();
    }

    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    [Guid("61327C9D-EFC5-42B7-BA0D-4A8648797003")]
    public interface IMyEvt
    {
        [DispId(1)]
        void OnMyEvt(int prm);
    }

    [ComImport()]
    [Guid("13AD0E8B-BA3F-4CDE-A7D4-8A311EC1766B")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    interface IObjectSafety
    {
        [PreserveSig()]
        int GetInterfaceSafetyOptions(ref Guid riid, out int pdwSupportedOptions, out int pdwEnabledOptions);

        [PreserveSig()]
        int SetInterfaceSafetyOptions(ref Guid riid, int dwOptionSetMask, int dwEnabledOptions);
    }

    [ComVisible(true)]
    [ClassInterface(ClassInterfaceType.None)]
    [Guid("32E6AD29-DD5F-46EA-A4D1-BD2F1E3EE064")]
    [ProgId("AxControls.HelloWorld")]
    [ComSourceInterfaces(typeof(IMyEvt))]
    public class HelloWorld : UserControl, IHelloWorld, IObjectSafety
    {
        [ComVisible(false)]
        public delegate void OnMyEvtDelgate(int prm);

        [DispId(1)]
        public event OnMyEvtDelgate OnMyEvt;

        public HelloWorld()
        {
            this.OnMyEvt += new OnMyEvtDelgate(Dummy);
        }

        void Dummy(int param) { }

        #region IHelloWorld Members

        public string GetText()
        {
            if (this.OnMyEvt != null) OnMyEvt(10);
            return "Hello ActiveX World!";
        }

        #endregion

        #region IObjectSafety Members

        public enum ObjectSafetyOptions
        {
            INTERFACESAFE_FOR_UNTRUSTED_CALLER = 0x00000001,
            INTERFACESAFE_FOR_UNTRUSTED_DATA = 0x00000002,
            INTERFACE_USES_DISPEX = 0x00000004,
            INTERFACE_USES_SECURITY_MANAGER = 0x00000008
        };

        public int GetInterfaceSafetyOptions(ref Guid riid, out int pdwSupportedOptions, out int pdwEnabledOptions)
        {
            ObjectSafetyOptions m_options = ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_CALLER | ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_DATA;
            pdwSupportedOptions = (int)m_options;
            pdwEnabledOptions = (int)m_options;
            return 0;
        }

        public int SetInterfaceSafetyOptions(ref Guid riid, int dwOptionSetMask, int dwEnabledOptions)
        {
            return 0;
        }

        #endregion

    }

} 
```

# php - PHP PDO + 复制出数组

> ID：10052727
> 
> 赞同：-1
> 
> 时间：2012-04-07T07:41:13.300
> 
> 标签：php

我有一个 PDO 查询，它返回似乎是数组 $pds 的内容。我可以按如下方式遍历这个数组：

```
foreach ($pds as $row) {

 } 
```

我需要第二次遍历同一个数组，但是当我这样做时，数组中似乎没有任何数据。我还尝试按如下方式复制数组：

```
 $pds2 = $pds; 
```

我错过了两次使用这个数组的技巧吗？

谢谢

代码：

```
 // Remove Duplicate Locations where words are in a different order
        $cityArray = $pds;

        foreach ($cityArray as $data) {
            $words = explode(' ', $data['city'] . ' ' . $data['region1'] . ' ' . $data['region2'] . ' ' . $data['region3']);
            sort($words);
            $cityWordsArray[$data['id']] = implode(' ', $words);
        }
        $cityWordsArray = array_unique($cityWordsArray);

        foreach ($pds as $row) {
            echo 'hi';
            foreach($cityWordsArray as $key=>$value) {
                if($row['id'] == $key) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:50:31.720

恐怕这`$pds`不是一个数组，而是一个`PDOStatement`.

如果你想获取一个数组，你应该使用`fetchAll`来获取一个数组的结果。

`$pds = $pds->fetchAll();`在循环之前尝试。

# c++ - 带有 SWIG 的 Python C++ 扩展 - 通过导入模块调用函数

> ID：10052730
> 
> 赞同：0
> 
> 时间：2012-04-07T07:41:30.527
> 
> 标签：c++, python, function, swig, init

我如何编写一个 C++ 库并使用 SWIG 使其成为 python 扩展，并通过导入模块`import module`，它会自动调用一个初始化一些全局变量的函数。

我试图将函数重命名为`__init__()`，但是当我导入模块时它没有被调用。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:05:16.897

将代码放在 SWIG 接口文件的 init 部分中：

```
%init %{
    my_init_function();
%} 
```

此代码将添加到生成的 swig 包装器中，并在导入模块时调用。

[SWIG 2.0](http://www.swig.org/Doc2.0/SWIGDocumentation.html)第 5.6.2 节：[代码插入块](http://www.swig.org/Doc2.0/SWIGDocumentation.html#SWIG_nn42)

# android - Android，我们可以在不同的 xml 文件中为视图重复 id 吗？

> ID：10052737
> 
> 赞同：1
> 
> 时间：2012-04-07T07:42:49.527
> 
> 标签：android, user-interface

假设我们有 3 个不同的活动。每个活动都有自己的用于绘制 UI 的 XML 文件。在每个 XML 文件中，我们都有一个 TextView（但每个文件的样式都不同）。

我想知道如果我为每个人分配相同的 id 会发生什么，例如`android:id = "@+id/textView"`为他们所有人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:48:00.473

当您使用**setContentView(R.layout.yourlayout);** **findViewById()**将仅从该特定布局中获取文本视图...因此您可以在不同的活动中分配相同的 ID ..

# c - 如何在 php ext 中的类中创建私有属性作为数组

> ID：10052739
> 
> 赞同：0
> 
> 时间：2012-04-07T07:42:52.847
> 
> 标签：c, php-extension

我仍然是编写扩展程序的新手。我试图让这成为结果：

```
class FooClass {
    private $elements = array();
} 
```

实例化 FooClass 时出现错误：

PHP 致命错误：无法访问私有属性 ArrayClass::$elements

我确切地知道为什么会发生这种情况我只是不知道将类定义创建为数组的正确方法。这是我到目前为止所拥有的，我相信这很简单：

```
static zend_class_entry *foo_class_ptr;

void create_class_properties(TSRMLS_D) {
     zend_declare_property_null(foo_class_ptr, "elements", strlen("elements"), ZEND_ACC_PRIVATE);
}

ZEND_METHOD(foo_class, __construct) { 
    zval *this = getThis();
    zval *elements;

    MAKE_STD_ZVAL(elements);
    array_init(elements);

    add_property_zval_ex(this, "elements", sizeof("elements"), elements);
}

static zend_function_entry foo_class_methods_def[] = { 
    PHP_ME(foo_class, __construct, NULL, ZEND_ACC_PUBLIC)
    {NULL, NULL, NULL}
};

void create_class_def(TSRMLS_D) {
    zend_class_entry ce;
    INIT_CLASS_ENTRY(ce, "FooClass", foo_class_methods_def);

    foo_class_ptr = zend_register_internal_class(&ce);
} 
```

从 PHP_MINIT_FUNCTION() 调用 create_class_def。这里有一个类似的问题：[如何将数组作为对象属性添加到 PHP 扩展中声明的类？](https://stackoverflow.com/questions/1105360/how-do-i-add-an-array-as-an-object-property-to-a-class-declared-within-a-php-ext)但它没有解决私有/受保护的访问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:17:38.557

最简单的方法可能是使用`zend_update_property`：

`void zend_update_property(zend_class_entry *scope, zval *object, const char *name, int name_length, zval *value TSRMLS_DC);`

`name_length`不包括终结者。

# objective-c - 如何从 DataViewController 正确翻页 UIPageViewController？

> ID：10052740
> 
> 赞同：0
> 
> 时间：2012-04-07T07:42:54.130
> 
> 标签：objective-c, ios, ios5, uipageviewcontroller

我希望能够将我的 UIPageViewController 作为特定页面上的事件的结果。在 Xcode 中使用 Page View 模板，实现此目的的正确方法是什么？我正在考虑让 DataViewController 和 ModelController 在 RootViewController 中包含对 UIPageViewController 的引用，然后使用 [(UIPageViewController *) setViewControllers] 方法，但这似乎很草率。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:03:03.203

UIPageViewController 已经可以从 DataViewController 访问。所有 UIViewController 子类都有一个名为“ [parentViewController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIViewController/parentViewController) ”的字段，该字段指向拥有它们的 UIViewController 子类（UIPageViewController 使用该子类）。

如果要更改页面，只需调用

```
[((UIPageViewController*)self.parentViewController) setViewControllers:
        target direction:UIPageViewControllerNavigationForward completion:nil]; 
```

# javascript - 根据品牌下拉选择型号

> ID：10052741
> 
> 赞同：0
> 
> 时间：2012-04-07T07:43:04.380
> 
> 标签：javascript, html

我有两个下拉框，第一个下拉框包含移动品牌，其他包含我希望它们工作的移动模型，就像在第一个下拉列表中选择品牌时第二个下拉列表将显示我想要做的那个特定品牌的模型它与 javascript 下拉值是静态值我怎么能做到这一点？

```
<select name="brand">
<option value="samsung">Samsung</option>
<option value="Nokia">Nokia</option>
</select>

<select name="model">
<option value="Galaxy">Galaxy</option>
<option value="N8">N8</option>
</select> 
```

下拉将像上面的一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:45:31.547

在第一个 celect 框更改上使用 ajax 记录并将其填充到第二个选择框中。Jquery ajax 将函数将数据发送到将从数据库中获取数据的函数。

# java - 加权单向图的顶点表示

> ID：10052743
> 
> 赞同：0
> 
> 时间：2012-04-07T07:43:25.040
> 
> 标签：java, data-structures, graph, adjacency-matrix

我正在使用邻接矩阵来表示我的加权单向大图的所有顶点。在该图中，没有边将顶点连接到自身。这使得我的邻接矩阵的所有对角元素`null`。由于我的图很大，所以在邻接矩阵中我不需要在左三角形中保存任何元素。下面是一个带有邻接矩阵的小样本图。![这是具有邻接矩阵的示例小图](../Images/575c7720a877a5faf364b19f798dc897.png)

在单向图中，左三角形只是右三角形的镜像。即`adjacency_matrix[i][j]`，`adjacency_matrix[j][i]`相同。那么为什么要存储左三角形。对于大图，这个技巧可以节省很多内存。同时，对角元素也为零，因为没有边将顶点连接到自身。即`adjacency_matrix[i][i]`为零。但是我该如何实现呢？这里可以使用二维数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:50:25.290

Java 并没有真正的二维数组，尽管有用于分配数组数组的语法糖。

你可能只想：

```
int[][] weight = new int[N][];
for (int i = 0; i < N; i++) weight[i] = new int[N-1-i]; 
```

这将分配你想要的三角形。然后只需在 weight[r][cr-1] 处索引行 r，col c。

另一种选择只是使用单个数组

```
int[] weight = new int[N*(N-1)/2]; 
```

索引计算起来可能有点复杂，但分配和指针开销更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:49:30.057

您可以使用锯齿状数组。

```
int[][] matrix = new int[N][];
for (int i = 1; i <= N; i++) {
   matrix[i] = new int[N - i + 1];
   for (int j = 1; j <= N - i + 1; j++)
       matrix[i][j] = edgeValue;
} 
```

基本上，您根据需要为每一行分配。

PS也许我在这里搞砸了一些界限，但你仍然应该明白重点:)

# asp.net - 来自代码隐藏的 Web 表单身份验证

> ID：10052744
> 
> 赞同：2
> 
> 时间：2012-04-07T07:43:26.497
> 
> 标签：asp.net, web-config, forms-authentication

在我的应用程序中，特权用户可以添加/删除/更新用户角色（同时也可以将它们分配给特定用户）。以下摘录显示了我的 web.config 文件中的一条规则，该规则仅允许管理员使用用户阻止功能：

```
<location path="block-user.aspx">
  <system.web>
    <authorization>
      <allow users="Administrator"/>
    </authorization>
  </system.web>
</location> 
```

如果我想动态添加或删除除默认角色之外的其他角色怎么办？这可以通过代码隐藏来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T12:59:07.117

如果要将某些页面限制为某些角色，可以在 Page_Load 函数中执行此操作；

```
 protected void Page_Load(object sender, EventArgs e)
    {
          if(!User.IsInRole(allowedrole))
          {
             Response.Redirect("block-user.aspx");
          }
          else
          {
          //do stuff
          }
    } 
```

# android - 动态更改图像按钮的大小

> ID：10052749
> 
> 赞同：0
> 
> 时间：2012-04-07T07:44:35.190
> 
> 标签：android, android-layout, resize, runtime, imagebutton

实际上，我试图通过尝试在按钮单击时调整 ImageButton 的大小来实现不同的缩放，因为我的布局仅包含 ImageButtons。但我面临的问题是按钮在 TableRow 中被充气，而 TableRow 在 TableLayout 中被充气。

```
LAYOUT1.xml

<HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/TabScrollView" >

        <ScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:id="@+id/RelativeLayoutTable"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/TabScrollView"
                android:background="@drawable/blackbackground" >

                <TableLayout
                    android:id="@+id/elementTable"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_x="2dp"
                    android:layout_y="2dp"
                    android:orientation="horizontal" >
                </TableLayout>

                </TableLayout>
            </RelativeLayout>
        </ScrollView>
    </HorizontalScrollView>

LAYOUT2.xml

<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/elementRow"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

</TableRow>

LAYOUT3.xml

<?xml version="1.0" encoding="utf-8"?>
<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/elementImage"
android:layout_width="100px"
android:layout_height="100px"
android:background="@null"
android:onClick="onClick"
android:padding="3dip"
android:scaleType="fitXY" /> 
```

我尝试使用此代码

```
ImageButton ib =(ImageButton)findviewbyId(R.id.elementImage);
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(width, height);
ib.setLayoutParams(layoutParams); 
```

按钮大小保持与图像大小相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:55:30.027

在设置布局参数后尝试调用[invalidate() 。](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)

# jquery - 在继续阅读之前需要 标签→在每个 标记我有该文本的位置 继续阅读 →

> ID：10052755
> 
> 赞同：0
> 
> 时间：2012-04-07T07:45:33.863
> 
> 标签：jquery

现在我的输出是这样的

```
 <p>text text text  Continue reading →&lt;/p>
  <p>text1 tex1t text1  Continue reading →&lt;/p>
  <p>text2 text2 text2  Continue reading →&lt;/p> 
```

但我需要那样

```
 <p>text text text <br/> Continue reading →&lt;/p>
  <p>text1 tex1t text1 <br/>  Continue reading →&lt;/p>
  <p>text2 text2 text2 <br/> Continue reading →&lt;/p> 
```

我不知道如何在 jquery 中做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T07:54:03.997

```
$("p").each(function() {
    $(this).html( 
        $(this).html().replace(/\sContinue\sreading\s→/g , 
            "<br /> Continue reading →"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:53:55.133

您可以像这样使用查找和替换方法：

[http://jsfiddle.net/pswcb/](http://jsfiddle.net/pswcb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:13:40.807

您还可以使用 CSS 伪元素：

```
<p>text text text  <span></span>Continue reading →&lt;/p>

p span:before
{
     content : "\A";
     white-space : pre;
} 
```

JQuery 解决方案更安全，因为旧 IE 不支持 ::before，但 CSS 解决方案在没有 JS 的情况下也可以工作。

# java - 阻止用户浏览互联网

> ID：10052759
> 
> 赞同：0
> 
> 时间：2012-04-07T07:45:55.633
> 
> 标签：java, web

我正在尝试制作一个类似于在线考试的在线应用程序，但我想确保在测试期间没有用户可以浏览互联网。有可能吗？我正在考虑一个不会最小化的全屏应用程序。但这并不能消除用户 alt-tabs 其他窗口的机会:(

任何方向都受到高度赞赏。

技术没有门槛。话虽如此，学生们将***在家中参加考试***。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:43:48.957

> 技术没有门槛。话虽如此，学生们将**在家中参加考试**。

请务必了解[10 条不变的安全法中](http://technet.microsoft.com/en-us/library/cc722487.aspx)的第 1、2、3 条法律的精神：

> 法则 1：如果坏人可以说服你在你的计算机上运行他的程序，那它就不再是你的计算机了
> 法则 2：如果一个坏人可以改变你计算机上的操作系统，那它就不再是你的计算机了
> 法则 3：如果坏人可以不受限制地物理访问您的计算机，那它就不再是您的计算机了

**唯一符合您意愿的计算机（在您的情况下，您希望 PC 禁止浏览）是您可以完全控制其硬件和软件的计算机。**

您只能欺骗不太成熟的用户。如果您的用户倾向于，他们可以轻松学会破坏它。从 DRM 的惨败和一些学校和大学的个人轶事来看，充分证明了用户可以**领先一步**，试图缩小差距是**金钱和努力的黑洞**。

* * *

孩子们也在家。他们总是可以使用其他设备或手段。你可以用javascript制作一个页面，可以防止它失去焦点，但是一个10岁的孩子可以学会打开另一个窗口。制作一个全屏桌面应用程序，检查鼠标是否“在里面”，16 岁的孩子可以在虚拟机或屏幕会话上运行它。是的，我在那个年纪就那么聪明，孩子们变得比你我更聪明。

此外，检测不法行为的自动化系统可能会**带走无辜的受害者**并引起痛苦和怨恨。[出于同样的原因，在](http://www.pluggd.in/indian-it-companies-firewall-blocks-steve-jobs-death-297/)“Steve **Jobs** death”和“new c# **jobs** ”上触发的Internet 过滤器令人烦恼。带有自动欺诈检测算法和客户服务的支付处理器和网站广告已经让人们崩溃了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T07:52:45.617

我认为这在学校路由器的网络层上会得到更好的解决。在进行测试时，阻止对除此教室的在线测试之外的所有内容的 IP 访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:02:52.383

您还可以设置系统（IE）代理，并编写一个小型代理服务器来拦截任何出站请求并且不返回任何内容
编写这样的代理很简单......
如果您在 Windows 上，您可以编写一个批处理文件来启动您的程序和使用 REG 命令修改注册表项

# facebook - 设计 + Omniauth + fb_graph + Rails 3 教程

> ID：10052763
> 
> 赞同：5
> 
> 时间：2012-04-07T07:46:25.820
> 
> 标签：facebook, facebook-graph-api, devise, omniauth, fb-graph

任何人都可以建议一个关于如何在 Rails 3 中使用 Devise 和 Omniauth 设置 Facebook 身份验证的完整教程，然后使用 fb_graph 将其与 Facebook Graph API 集成？

我已经查看了 Ryan Bates 的 railscasts 和大量其他教程，但它们似乎都不起作用。任何关于此事的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:04:25.120

看下面的链接 [FbGraph + OmniAuth + Facebook Graph API on Rails 应用程序](http://www.catespotr.com/2012/02/fbgraph-omniauth-facebook-graph-api-on.html)

# java - 使用apache poi将数据导出到excel工作表列？

> ID：10052771
> 
> 赞同：0
> 
> 时间：2012-04-07T07:48:02.363
> 
> 标签：java, excel, apache-poi

我设法将数据写入单列。我的要求是将数据写入下一个相邻列而不覆盖第一列中的数据。有什么帮助吗？

```
InputStream inp;
    try {
        inp = new FileInputStream("D:\\test.xls");
        Workbook wb = WorkbookFactory.create(inp);
        Sheet sheet = wb.getSheetAt(0);
        Row row =  null;

        Cell c = null;

        int rowNum=0;
        Set<String> keySet = new HashSet<String>();
        keySet = tushMap.keySet();
        for (Entry<String, String> entry : tushMap.entrySet()) {
            row=sheet.createRow((short) (sheet.getLastRowNum() + 1));
            System.out.println((short) (sheet.getLastRowNum() + 1));
            c = row.createCell(0);
            c.setCellValue("fff");
            System.out.println("fff");
            System.out.println(entry.getKey() + "/" + entry.getValue());
            rowNum++;
        }

        FileOutputStream fileOut = new FileOutputStream("D:\\test.xls");
        wb.write(fileOut);
        fileOut.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (InvalidFormatException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这是为填充第一列而编写的代码。填充第二列会覆盖第 1 列。请提出一些解决方案。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:08:34.670

要并排获取数据，请获取循环外的最后一行并将其保存为起始行。为您在循环内编辑的行保留一个计数器。如果该行为空，则创建该行。

```
rowPos = sheet.getLastRowNum();
for (Entry<String, String> entry : tushMap.entrySet()) {
    rowPos++;
    Row currentRow = sheet.getRow(rowPos);
    if(null == currentRow)
        currentRow = createRow(rowPos); 
```

编辑：

我正在使用这个得到想要的输出

```
int beginingRow = sheet.getLastRowNum();
            for( int col=0; col<2; col++){
                int currentRow = beginingRow;
                for (int i=0; i<10; i++) {
                    currentRow++;
                    row = sheet.getRow(currentRow);
                    if(null == row)
                        row=sheet.createRow(currentRow);
                    c = row.createCell(col);
                    c.setCellValue("fff");
                    System.out.println("fff");
                    //System.out.println(entry.getKey() + "/" + entry.getValue());
                    rowNum++;
                }
            } 
```

输出

```
fff fff
fff fff
fff fff
fff fff
fff fff
fff fff
fff fff
fff fff
fff fff
fff fff 
```

# php - 使用 cURL 提取令牌并使用令牌生成 url

> ID：10052773
> 
> 赞同：0
> 
> 时间：2012-04-07T07:48:10.430
> 
> 标签：php, curl, token

我需要在网页上提取时间戳标记，然后使用该标记生成 curl 的 url，

令牌显示如下 vjVQa1PpcFNe5sFFxtCUrXRWJDVyaYicDmsTUKi_KSo vjVQa1PpcFOzI5sDxrYZe4M534bx_GCGLYcSZunSldg vjVQa1PpcFNikdPAOJXxmmg9sCUjXDfNyLbG5FQOdtY_3D

所以基本上总是有 vjVQa1PpcF，那么正则表达式会是什么？我将如何生成一个网址？

谢谢

这是一个很长的 java-script 函数，这是一段摘录

pQ9GzRe5qs\u0026amp;user_age=21\u0026amp;keywords=Popup%2CVideo\u0026amp;timestamp=1333784465\u0026amp;sw=0.1\u0026amp;t=vjVQa1PpcFNikdPAOJXxmmg9sCUjXDfNyLbG5FQOdtY3%

其中 t= 部分是我需要的

@David-SkyMesh 到目前为止，我一直使用它作为正则表达式来提取数据，但它似乎正在提取所有 43 个长度的字符串

```
[^t=]\S{42} 
```

# php - 将其发送到数据库时出现字符问题

> ID：10052781
> 
> 赞同：1
> 
> 时间：2012-04-07T07:49:43.577
> 
> 标签：php, mysql, utf-8, character-encoding, oscommerce

我对瑞典语字符（与英文字母不同的字符）以及它们如何插入数据库有疑问。

我使用 osCommerce，`iso-8859-1`在管理页面和目录页面中都设置为字符集。如果我`SHOW VARIABLES;`在`character_set`数据库中运行`latin1`.

还有一些来自 phpinfo 的服务器设置：

```
iconv.input_encoding ISO-8859-1

iconv.internal_encoding ISO-8859-1

iconv.output_encoding ISO-8859-1 
```

根据主机支持页面Apache`UTF-8`默认交付所有页面，可以通过添加来更改

```
AddDefaultCharset ISO-8859-1 
```

在一个`.htaccess`文件中。

当我去管理员更新产品时，不同输入字段中的所有字符都从数据库中提取并按预期显示。但是当我更新产品时，所有特殊字符都会像这样转换：

*   å 变成 Ã¥
*   ä 变成 Ã¤
*   ö 变成 Ã¶

如果我添加新产品，也会发生同样的情况。

当我使用 phpmyadmin 查看数据库时，会显示“损坏”字符，因此不仅仅是网页翻译错误。

我的主人最近宣布他们将为 php 做一些更新，所以我认为这与这次更新有关。几天前一切正常。

我不确定我的 previos php 版本，但现在我有 5.2.17 而 mysql 是 4.0.27-standard

有人可以在这件事上帮助我并告诉我我需要做什么。

有没有一个简单的解决方案，我需要将数据库和网页转换为 utf-8 还是需要做其他任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:01:24.140

听起来网络浏览器正在以 UTF-8 而不是 ISO-8859-1 发送表单。或者应用程序（或 MySQL 客户端）在将文本写入数据库之前将其转换为 UTF-8。您可以`$text`通过执行简单的`echo bin2hex($text);`.

[`accept-charset`](http://www.w3.org/TR/html401/interact/forms.html#adef-accept-charset)如果问题出在浏览器上，请在表单标签中设置用于发送表单的字符编码。那是：

```
<form action="..." method="POST" accept-charset="ISO-8859-1">
    ....
</form> 
```

# javascript - 在基于 JSF 的 Web 架构中是否有 JQuery 的空间？

> ID：10052785
> 
> 赞同：0
> 
> 时间：2012-04-07T07:50:43.340
> 
> 标签：javascript, jquery, jsf

JSF 架构非常基于组件。单击您最终在服务器上某处的按钮。JSF 隐藏了按钮和侦听器之间的 HTTP 请求，试图使您的代码看起来像 Swing。我想这意味着即使您隐藏了很多 HTTP 请求，您最终也会收到很多请求。

JQuery、Javascript 意味着您可以在客户端上让事情变得更胖，并减少 http 请求。您可以设置更均匀的方式来处理完全在客户端发生的逻辑 - 因为 JQuery 拥有如此丰富的库集，例如 JQuery UI，您可以在胖客户端中做很多事情，而无需访问服务器。

所以我想知道，一旦你走上了 JSF 的道路（正确或错误），你最终会经常使用 Jquery 吗？或者您是否已经决定要在客户端上保持精简，并且不使用太多 javascript 或任何流行的 javascript 库。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:03:16.363

jQuery 在每个 Web 应用程序中都有一个空间。两个最流行的 JSF 组件 Richfaces 和 Primefaces 包含构建在顶级 jQuery 和第三方 jQuery 插件上的可重用组件。

# cocoa-bindings - nsarraycontroller 和绑定：如何调试？

> ID：10052786
> 
> 赞同：1
> 
> 时间：2012-04-07T07:51:02.470
> 
> 标签：cocoa-bindings, nsarraycontroller, nsxml, nsxmlnode

我有一个包含一系列子节点的 NSXMLNode，我想使用 NSArrayController 和绑定在 NSTableView 中显示这些子节点的属性。

我是 NSArrayControllers 和绑定的新手，所以我决定首先用节点的子节点填充表。它与 Apple 的示例“XMLBrowser”非常相似，尽管我可以设法让我的工作。

我的视图控制器有一个属性，该属性包含在 initWithNibName 方法中填充的 NSXMLNode。从这里我遵循的步骤是：

1.  将 NSArrayController 添加到 xib 文件

2.  将其类名设置为 NSXMLNode 并将“名称”添加到键中

3.  将其绑定到文件所有者（ViewController）并将“.children”添加到 Model-Key-Path

4.  我将我的表格列绑定到阵列控制器。

5.  将 Controller Key 设置为“arrangedObjects”，将 Model-Key-Path 设置为“name”

我通过断点和 NSLog 检查了我的 NSXMLNode 有有意义的子节点，但尽管 TableView 没有被填充。

你看到我的步骤有什么缺陷吗？有什么我想念的吗？

另外，您如何调试这些应用程序？放置断点和 NSLogs 的代码很少，我怎么知道发生了什么？

# ios5 - GLKit：使用 GL_POINTS 绘制点

> ID：10052787
> 
> 赞同：0
> 
> 时间：2012-04-07T07:51:04.623
> 
> 标签：ios5, opengl-es, opengl-es-2.0, glkit

我正在使用 GLKit 选择 opengl es 2.0。我可以成功地绘制正方形、三角形、立方体等形状。

我在绘制点时遇到问题，这是我的代码在设备（iPod 4）上不起作用，尽管我可以在视网膜模拟器中看到点/点。

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

     //White background color
    glClearColor(1.0, 1.0, 1.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];  

    //USING _program
    glUseProgram(_program);

    GLfloat vert[] = {0,0, 0.1,0.1, 0.2,0.2, 0.3,0.3, 0.4,0.4, 0.5,0.5};
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, vert);
    glDrawArrays(GL_POINTS, 0, 5);
    glDisableVertexAttribArray(GLKVertexAttribPosition);
} 
```

这是我的更新方法，仅供参考：

```
- (void)update {
    float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 4.0f, 10.0f);    
    self.effect.transform.projectionMatrix = projectionMatrix;

    //Since visible range is 4 to 10 so have to mave back in z
    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -6.0f);
    self.effect.transform.modelviewMatrix = modelViewMatrix;   
} 
```

以下是我如何定义效果：

```
self.effect = [[GLKBaseEffect alloc] init];
self.effect.useConstantColor = GL_TRUE;
self.effect.constantColor = GLKVector4Make(0.0, 0.0, 1.0, 1.0); //Blue color 
```

这样这些点在白色背景上可见。

有人可以指出这段代码中的任何缺陷吗？我不确定为什么它没有显示在设备上，因为三角形、正方形和立方体都可见。任何帮助表示赞赏。

**编辑：**

我以前没有使用过着色器，所以这是我第一次。正如本提到的示例代码。这就是我现在正在做的事情：

我有**VertexShader.glsl**和**FragmentShader.glsl**文件：

**顶点着色器.glsl**

```
void main()
{
    gl_PointSize = 10.0;
} 
```

**片段着色器.glsl**

```
void main()
{

} 
```

我在创建效果之前和设置 EAGLContext 之后设置着色器：

```
// Setup shader
GLuint vertexShader = [self createShaderWithFile:@"VertexShader.glsl" type:GL_VERTEX_SHADER];
GLuint fragmentShader = [self createShaderWithFile:@"FragmentShader.glsl" type:GL_FRAGMENT_SHADER];
_program = glCreateProgram();

glAttachShader(_program, vertexShader);
glAttachShader(_program, fragmentShader);
glLinkProgram(_program);

GLint linked = 0;
glGetProgramiv(_program, GL_LINK_STATUS, &linked);
if (linked == 0) {
    glDeleteProgram(_program);
    return;
} 
```

这里是 createShaderWithFile 方法：

```
- (GLuint)createShaderWithFile:(NSString *)filename type:(GLenum)type 
{
    GLuint shader = glCreateShader(type);

    if (shader == 0) {
        return 0;
    }

    NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:filename];
    NSString *shaderString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    const GLchar *shaderSource = [shaderString cStringUsingEncoding:NSUTF8StringEncoding];

    glShaderSource(shader, 1, &shaderSource, NULL);
    glCompileShader(shader);

    GLint success = 0;
    glGetShaderiv(shader, GL_COMPILE_STATUS, &success);

    if (success == 0) {
        char errorMsg[2048];
        glGetShaderInfoLog(shader, sizeof(errorMsg), NULL, errorMsg);
        NSString *errorString = [NSString stringWithCString:errorMsg encoding:NSUTF8StringEncoding];
        NSLog(@"Failed to compile %@: %@", filename, errorString);
        glDeleteShader(shader);
        return 0;
    }

    return shader;
} 
```

我还更新了上面的 drawRect 方法。

这是该项目的链接：http: [//dl.dropbox.com/u/36638938/Template.zip](http://dl.dropbox.com/u/36638938/Template.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:06:09.200

尝试将`gl_PointSize`顶点着色器中的变量设置为更大的值。也许您在设备上看不到一个像素。

# jquery - 在 jQuery 中使用 'this' 参考父选择器

> ID：10052789
> 
> 赞同：1
> 
> 时间：2012-04-07T07:51:41.440
> 
> 标签：jquery, validation, this

我有一个以下 jQuery 代码，它使用验证我的注册表单的用户名`$.post`

```
$("input[name='username']").blur(function() {
    $("#usernm").html("<img src='css/assets/ajax-loader.gif' alt='Loading'/>");
    $.post("validate.jsp", {
        fieldtype : $(this).attr("name"),
        fieldval : $(this).val()
    },
    function(resp) {
        if(resp.trim()!="true")
            $("input[name='username']").addClass("invalidvalue");
        else
            $("input[name='username']").removeClass("invalidvalue");
        $("#usernm").html("&nbsp;");
    })
}); 
```

目前，我正在验证的表单上的每个输入都有这样的方法块，我想做的是而不是使用`$("input[name='username']").addClass("invalidvalue");`我想使用类似的东西`$(this)`，它指向`input[name='username']`我也只想为每个输入保留一个方法我想要验证的输入，以便我可以减少我的 JS 代码。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:56:12.590

要验证所有输入字段，您可以使用以下内容：

```
//Mapping of input elements and its 'loading' elements 
var inputMap = { 'username' : 'usernm' };

$("input").blur(function() {
   var inputName = $(this).attr('name');
   var that = this;

   $( "#"+inputMap[inputName] ).html("<img src='css/assets/ajax-loader.gif' alt='Loading'/>");       
   $.post("validate.jsp", {
       fieldtype : inputName,
       fieldval : $(this).val()
   },
   function(resp) {
       if(resp.trim()!="true")
           $(that).addClass("invalidvalue");
       else
           $(that).removeClass("invalidvalue");
       $("#"+inputMap[inputName]).html("&nbsp;");
   })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:06:27.730

这可以通过在您想要使用此功能的元素上设置一个类来轻松完成。

使您的输入字段像这样：

```
<input type="text" name="username" class="validate">
<input type="password" name="password" class="validate"> 
```

jQuery 代码

```
$(".validate").each(function(){
  $(this).blur(function(){
    var field = $(this);
    field.addClass("loading"); //Make a class for loading behavior if possible
    $.post(
      "validate.jsp",
      {  fieldtype:field.attr("name"),
         fieldval :field.val()
      },
      function(resp) {
        field.removeClass("loading"); //see on top
        if(resp.trim()!="true") {
          field.addClass("invalidvalue");
        }
        else {
          field.removeClass("invalidvalue");
        }
      }
   });
}); 
```

如果您想为某些字段设置一些特殊变量，您可以使用 HTML data-* 类型并进行如下操作：

```
<input name="username" class="validate" data-var="blabla"> 
```

然后您可以使用该值`field.attr("data-var");`

# performance - 聚合点的算法

> ID：10052792
> 
> 赞同：0
> 
> 时间：2012-04-07T07:52:10.800
> 
> 标签：performance, algorithm, aggregation

我有一张桌子

*   第 1 行 = (V1, K1, 5);
*   第2行=（V2，K2，7）；
*   第2行=（V1，K1，3）；

我需要聚合 AggregateRating 表中的点，以便该表包含

*   第 1 行 = (V1, K1, 8);
*   第2行=（V2，K2，7）；

我在 Rating 表中循环一次，并使用 [key = (Col1,Col2), value = Points] 创建一个地图，如果密钥存在，我添加点，否则创建一个新的地图条目。评级表可以包含近 100 多个条目，因此我想避免多次通过。

**这是最有效的方法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:59:10.260

这取决于您用于存储地图的数据结构。如果您使用哈希映射，那么存储和读取它的复杂性将保持不变（`O(1)`）。然后，您使用一个查询进行一次传递，并且对数组中的每个条目最多插入一次。这意味着您的算法的整体复杂性将是`O(n)`.

但是，仅输入是`O(n)`，这意味着您无法做得更好。

请记住，如果您选择不同的地图实现，例如树形地图，复杂性将会改变，您将无法获得最有效的解决方案。

# c# - 启动时系统服务显示错误

> ID：10052793
> 
> 赞同：0
> 
> 时间：2012-04-07T07:52:23.653
> 
> 标签：c#, windows, visual-studio-2010

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.IO;
using System.Collections;

namespace cloud_sync
{
public partial class cloud_sync : ServiceBase
{
    public cloud_sync()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        while (true)
        {
            System.Diagnostics.Process proc = new System.Diagnostics.Process();

            proc.StartInfo.FileName = "C:\\ec2\\ec2.bat";
            proc.StartInfo.RedirectStandardError = false;
            proc.StartInfo.RedirectStandardOutput = false;
            proc.StartInfo.UseShellExecute = true;
            proc.Start();
            proc.WaitForExit();

            string[] filePaths = Directory.GetFiles(@"c:\My cloud\VM Instances\");
            foreach (string filePath in filePaths)
                File.Delete(filePath);
            try
            {
                StreamReader sr = new StreamReader("c:/ec2/temp.txt");

                if (new FileInfo("c:/ec2/temp.txt").Length > 0)
                {
                    string line, temp, temp1;
                    string[] content = new string[4];
                    line = GetWord(sr);
                    line = GetWord(sr);
                    string[] terms = line.ToLower().Trim().Split('\t');

                    Console.WriteLine(terms[1]);
                    Console.WriteLine(terms[5]);
                    Console.WriteLine(terms[9]);
                    temp1 = terms[1];
                    content[0] = "Instance_id :" + terms[1];
                    content[1] = "Status :" + terms[5];
                    content[2] = "Type :" + terms[9];
                    if (terms[5].Equals("terminated"))
                    {
                        line = GetWord(sr);
                    }
                    else
                    {
                        line = GetWord(sr);
                        line = GetWord(sr);
                    }

                    terms = line.ToLower().Trim().Split('\t');
                    Console.WriteLine(terms[4]);
                    content[3] = "Name :" + terms[4];
                    int i = terms[4].Length;

                    temp = "c:/My cloud/VM Instances/" + temp1 + " (" + terms[4] + ")";
                    temp = temp + ".cvm";
                    File.WriteAllLines(temp, content);

                    while ((line = GetWord(sr)) != null)
                    {
                        line = GetWord(sr);
                        terms = line.ToLower().Trim().Split('\t');

                        Console.WriteLine(terms[1]);
                        Console.WriteLine(terms[5]);
                        Console.WriteLine(terms[9]);
                        temp1 = terms[1];
                        content[0] = "Instance_id :" + terms[1];
                        content[1] = "Status :" + terms[5];
                        content[2] = "Type :" + terms[9];
                        if (terms[5].Equals("terminated"))
                        {
                            line = GetWord(sr);
                        }
                        else
                        {
                            line = GetWord(sr);
                            line = GetWord(sr);
                        }

                        terms = line.ToLower().Trim().Split('\t');
                        Console.WriteLine(terms[4]);
                        content[3] = "Name :" + terms[4];
                        i = terms[4].Length;

                        temp = "c:/My cloud/VM Instances/" + temp1 + " (" + terms[4] + ")";
                        temp = temp + ".cvm";
                        File.WriteAllLines(temp, content);
                    }
                }
                sr.Close();
                sr.Dispose();
                System.Threading.Thread.Sleep(50000);
                File.Delete("c:/ec2/temp.txt");

            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }

        }
    }
    protected override void OnStop()
    {
    }

   static string GetWord(StreamReader sr)
    {
        return sr.ReadLine();
    }

}    
} 
```

我已经编写了这个系统服务，但是当我启动这个服务时，它显示错误**“Windows 无法在本地计算机上启动 cloud_sync 服务。错误：1053 服务没有及时响应启动和控制请求。”** 并按下后好的，它的状态变为“开始”。请告诉这是什么问题。我是 C# 的新手，这是我的第一个系统服务。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:44:54.567

你收到`Windows could not start the cloud_sync service on local computer. Error: 1053 the service did not respond to start and control request in timely fashion`是因为你`OnStart()`没有回来。您需要分拆另一个线程来执行您想要的代码。

```
private Task _serviceTask;
private bool _stop;

protected override void OnStart(string[] args)
{
    _serviceTask = Task.Factory.StartNew(SomeTask) 
}

// Rename the method from SomeTask to something that makes more sense
private static void SomeTask()
{
    // Move your code here
} 
```

您应该替换您的`while(true)`to`while(!_stop)`以便您可以在`OnStop()`.

# netbeans - 必须设置 dist.jar

> ID：10052794
> 
> 赞同：0
> 
> 时间：2012-04-07T07:52:23.977
> 
> 标签：netbeans, java-me, netbeans-7, midp-2.0

在 netbean 7.0.1 中构建 j2me 应用程序时出现以下错误

```
D:\Netbean_proj\Avvaiyar\nbproject\build-impl.xml:62: Must set dist.jar
BUILD FAILED (total time: 0 seconds) 
```

如何解决这个问题，我google了很多，但没有找到正确的答案。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:16:51.183

打开项目属性 > 构建 > 创建 JAR，然后将 JAD 和 JAR 文件名设置为类似 mymidlet.jad 和 mymidlet.jar（在我的情况下它们都设置为“null”）

或者您可以直接将其添加到 nbproject/project.properties：

```
dist.jad=javame.jad
dist.jar=javame.jar 
```

# firefox - MozBackup 备份文件可以转换为 FEBE 文件吗？

> ID：10052797
> 
> 赞同：1
> 
> 时间：2012-04-07T07:53:50.147
> 
> 标签：firefox, passwords, save, backup, bookmarks

我最近切换到 Ubuntu 并删除了 Windows 7。我使用 MozBackup 备份了我的 Firefox 内容，这在 Linux 上似乎不起作用。我尝试了葡萄酒，但仍然无法正常工作。

现在关于这个问题，我想知道是否有机会将 MozBackup 文件“转换”为 FEBE 备份文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T22:47:28.410

我知道这个问题很老，可能对操作没有帮助，但对其他人没有帮助：MozBackup 只是创建一个包含您原始配置文件文件夹的 zip 存档。因此，您可以打开它作为存档创建的 .pcv 文件（最终将其扩展名从 .pcv 更改为 .zip），并将其内容复制到新安装的配置文件文件夹中。

在 Ubuntu 中，我认为这类似于`~/.mozilla/firefox/*.default/`.

可以在[http://kb.mozillazine.org/Moving_from_Windows_to_Linux](http://kb.mozillazine.org/Moving_from_Windows_to_Linux)找到迁移到 Linux 的推荐（和详细）方法。

# java - 如何在 Selenium 2.20 和 java 上上传文件？

> ID：10052801
> 
> 赞同：0
> 
> 时间：2012-04-07T07:54:31.080
> 
> 标签：java, selenium, webdriver

我浏览了大量的上传线程，但无法找到答案。有人可以帮忙吗。我有一个浏览按钮，可以让我选择要从我的电脑上传到网站的文件。这是网站上浏览按钮所在的 html 代码：

```
<input id="contentFileInput" width="110" type="file" height="30" name="contentFileInput" style="display: none;">
<object id="contentFileInputUploader" width="110" height="30" type="application/x-shockwave-flash" data="../../Scripts/uploadify.swf" style="visibility: visible;">
<param name="quality" value="high">
<param name="wmode" value="opaque">
<param name="allowScriptAccess" value="sameDomain">
<param name="flashvars" value="uploadifyID=contentFileInput&pagepath=/Content/&script=/Content/AsyncUpload/&folder=&width=110&height=30&wmode=opaque&method=POST&queueSizeLimit=999&simUploadLimit=1&fileDesc=*.mpeg;*.mpg;*.avi;*.flv;*.mov;*.mp4;*.wmv&fileExt=*.mpeg;*.mpg;*.avi;*.flv;*.mov;*.mp4;*.wmv&auto=true&sizeLimit=1258291200&fileDataName=Filedata">
</object> 
```

我试过： WebElement elem = driver.findElement(By.xpath("//*[@id='contentFileInputUploader']")); elem.sendKeys("C:///video/file.flv");

但它什么也没做。当我悬停浏览按钮时，我从 ff 中的 firepath 获得了 xpath。有人可以建议我能做什么吗？我真的被困住了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:55:56.263

您必须在文件输入上使用 sendKeys()，而不是在按钮上。在示例 html 中，您应该使用：

findElement(By.id("contentFileInput"))

代替

findElement(By.xpath("//*[@id='contentFileInputUploader']"))

如果问题仍然存在，您应该在这里查看：

[http://saucelabs.com/blog/index.php/2012/03/selenium-tips-uploading-files-in-remote-webdriver](http://saucelabs.com/blog/index.php/2012/03/selenium-tips-uploading-files-in-remote-webdriver)

# jquery - 单击时切换图像边框颜色

> ID：10052802
> 
> 赞同：0
> 
> 时间：2012-04-07T07:54:42.127
> 
> 标签：jquery

参考这个小提琴（[http://jsfiddle.net/j5uGN](http://jsfiddle.net/j5uGN)），我如何在和之间切换点击图像的边框颜色`#efefef`，`#3f96cf`以便`#efefef`在图像似乎未选中（又名“nocheck”类）时切换？我已经在 img.check 上触发了一个 click 事件，那么如何将命令链接在一起以更改不同的元素？

我的问题清楚吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:10:22.090

你可以这样做：

Javascript点击事件：

```
$(this).find('img.fb_thumbnail').toggleClass("uncheckedborder"); 
```

CSS：

```
div#friend_box img.fb_thumbnail.uncheckedborder {
    border:3px solid #efefef !important;
} 
```

[http://jsfiddle.net/j5uGN/5/](http://jsfiddle.net/j5uGN/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:09:19.443

```
$("div.friend").click(function() {
    if( $(this).find('img.nocheck').length > 0) {
        $(this).find('img.nocheck').removeClass("nocheck");
        $(this).find('img.fb_thumbnail').css("border-color", "#3f96cf");            
    } else {
          $(this).find('img.check').addClass("nocheck");
          $(this).find('img.fb_thumbnail').css("border-color", "#efefef");
    }
});​ 
```

[更新了 jsfiddle 演示](http://jsfiddle.net/j5uGN/3/)

# api - 使用 Win API 将文本附加到备忘录

> ID：10052804
> 
> 赞同：0
> 
> 时间：2012-04-07T07:55:02.963
> 
> 标签：api, winapi, sendmessage, memo

我正在尝试使用此代码附加文本行

```
SendMessage(Form1.log.Handle, WM_SETTEXT, 0, Integer(PChar(textLog))); 
```

// textLog 是一些行，例如 'Program started at xxx' 等

但它不附加，只是设置新文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:07:29.330

`WM_SETTEXT`将替换整个内容；要么阅读当前内容，追加新文本并设置批号，要么确保插入符号位于您希望追加的位置，然后使用`EM_REPLACESEL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:32:21.907

建议您不要使用 EM_SETSEL 或 EM_REPLACESEL。因为在 vista 和 windows 7 等较新的操作系统上，UAC 会阻止您发送这些消息。我建议你这样做。1\. 获取窗口元素的句柄 2\. 做一个setfocus，这会将你的光标定位在textarea 3\. 然后你应该使用SendInput，这对UAC没有任何问题

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:21:28.653

找到完整的解决方案

```
 procedure appendLog(const S: string);
var
  SelStart, LineLen: Integer;
  Line: string;
begin

  SelStart := SendMessage(Form1.log.Handle, EM_LINEINDEX, 0, 0);
  if SelStart >= 0 then Line := S + #13#10 else
    begin
      SelStart := SendMessage(Form1.log.Handle, EM_LINEINDEX, -1, 0);
      if SelStart < 0 then Exit;
      LineLen := SendMessage(Form1.log.Handle, EM_LINELENGTH, SelStart, 0);
      if LineLen = 0 then Exit;
      Inc(SelStart, LineLen);
      Line := #13#10 + s;
    end;

  SendMessage(Form1.log.Handle, EM_SETSEL, SelStart, SelStart);
  SendMessage(Form1.log.Handle, EM_REPLACESEL, 0, Longint(PChar(Line)));

end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-24T20:16:30.040

或更好：

```
SendMessage(Form1.log.Handle, EM_SETSEL, 0, -1);
SendMessage(Form1.log.Handle, EM_SETSEL, (WPARAM)-1, -1);
SendMessage(Form1.log.Handle, EM_REPLACESEL, 0, (LPARAM)Msg); //add a text
//SendMessage(Form1.log.Handle, EM_REPLACESEL, 0, (LPARAM)L"\r\n"); //add a new line 
```

# android - 启动超时已过期

> ID：10052807
> 
> 赞同：1
> 
> 时间：2012-04-07T07:55:37.550
> 
> 标签：android, sockets

我正在创建一个客户端服务器应用程序，其中 android 应用程序用作服务器。客户端代码是用java编写的。我想要做的是在android应用程序的后台连续监听连接，而用户可以继续在应用程序中做其他事情。

java客户端代码的一部分是

```
 Socket socket1 = null;
    DataOutputStream dataOutputStream = null;
    DataInputStream dataInputStream = null;
    socket1 = new Socket(GlobalState.waiterip, 8888);
    dataOutputStream = new DataOutputStream(socket1.getOutputStream());
    dataInputStream = new DataInputStream(socket1.getInputStream());
    dataOutputStream.writeUTF("1"); 
```

android活动代码是

```
Button tabstatus,menu,logout,inbox;
public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.waiterhome);
       tabstatus=(Button)findViewById(R.id.tabstatus);
       menu=(Button)findViewById(R.id.menu);
       logout=(Button)findViewById(R.id.logout);
       inbox=(Button)findViewById(R.id.inbox);
       Intent myIntent = new     Intent(getApplicationContext(),WaiterService.class);
       startService(myIntent);
       tabstatus.setOnClickListener(new OnClickListener() 
       {
    public void onClick(View v) 
    {
               //some code          }
    });
       menu.setOnClickListener(new OnClickListener()
       {
    public void onClick(View v)
    {
                //some code
    }
    });
       logout.setOnClickListener(new OnClickListener() 
       {
    public void onClick(View v) 
    {
        //some code
    });
       inbox.setOnClickListener(new OnClickListener()
       {
    public void onClick(View v)
    {
        //some code
    }
    });
       }
     } 
```

我正在启动的 android 服务的代码，即 WaiterService 是

```
 public class WaiterService extends Service
   {
   public IBinder onBind(Intent intent) 
   {
      return null;
   }
   public void onCreate()
   {
        ServerSocket serverSocket = null;
            Socket socket = null;
    DataInputStream dataInputStream = null;
    DataOutputStream dataOutputStream = null;
    try
    {
      serverSocket = new ServerSocket(8888);
      while(true)
      {
        socket = serverSocket.accept();
            dataInputStream = new DataInputStream(socket.getInputStream());
            dataOutputStream = new DataOutputStream(socket.getOutputStream());
            int op=Integer.parseInt(dataInputStream.readUTF());
            switch(op)
            {
            case 1://some code
                               break;
            }
    }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
 }
  } 
```

我还在 manifest.xml 文件中包含了服务描述

当我运行此代码时，我在 logcat 中收到如下错误

```
 04-07 12:23:53.393: W/ActivityManager(51): Launch timeout has expired,   giving up wake lock!
 04-07 12:23:53.399: W/ActivityManager(51): Activity idle timeout for HistoryRecord{44e00278 aac.imenu.MyDroidClient/.WaiterActivity}
 04-07 12:24:03.510: W/ActivityManager(51): Timeout executing service: ServiceRecord{44dde9b0 aac.imenu.MyDroidClient/.WaiterService} 
```

并且模拟器屏幕变黑并且没有显示活动的gui。也没有进行套接字通信。

我不知道问题到底出在哪里，请指导我如何解决这个问题。或者有没有其他方法可以在后台连续监听套接字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:39:05.597

我认为您可以忽略此错误，因为这可能不是问题的原因。

[在这里](https://stackoverflow.com/a/10069805/977831)检查问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:15:32.160

A possible reason could be that your server socket is blocking the main thread. Try putting the server socket listening in seperate process.

# php - 如何访问嵌套数组项 php

> ID：10052808
> 
> 赞同：1
> 
> 时间：2012-04-07T07:55:53.310
> 
> 标签：php, arrays, xml-parsing

我正在使用 PHP 开发应用程序。一些示例代码在这里。

```
$url = "http://localhost:8080/?Xml";

$xml = simplexml_load_file($url);

foreach($xml->result->doc as $doc){
echo "<pre>".print_r($doc)."</pre>";
} 
```

我要求的其中一项看起来像这样。

```
SimpleXMLElement Object ( [@attributes] => Array ( [score] => 4.112774 [pos] => 0 ) [field] => Array ( [0] => http://www.w3schools.com/htmldom/dom_examples.asp [1] => text/html [2] => Free HTML XHTML CSS JavaScript jQuery XML DOM XSL XSLT RSS AJAX ASP .NET PHP SQL tutorials, references, examples for web building. [3] => html,css,tutorial,html5,dhtml,css3,xsl,xslt,xhtml,javascript [4] => www.w3schools.com [5] => en ) [snippet] => Array ( [0] => DOM Examples [1] => DOM HOME DOM Intro DOM Nodes DOM Node Tree DOM Methods DOM Node Access DOM Node Info DOM How To DOM Events DOM Summary DOM... ) ) 
```

我想知道如何访问数组项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:00:09.840

```
foreach($doc->attributes() as $key => $value) {
    echo "$key: $value\n";
} 
```

# asp.net - 相同浏览器和相同版本的不同显示网站

> ID：10052809
> 
> 赞同：0
> 
> 时间：2012-04-07T07:55:58.273
> 
> 标签：asp.net, css, iis, localhost

之后我在我的 iis 中添加了一个网站，当我浏览这个地址时，例如（http://localhost:8080）我的布局一切正常，但是当用我的计算机的 ip（192.168.1.30）交换“localhost”时：例如（http ://192.168.1.30:8080) 我的布局不正确。为什么？这个问题从我在服务器上发布我的网站开始，在服务器上是错误的，但在本地调试模式下我的布局是正确的。IE 8 中的所有状态检查，即使我删除了我的所有 css 文件，但存在此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:44:40.917

我猜这个问题与兼容性视图有关。默认情况下，IE8 将加载带有 quirksmode 渲染的“内联网站点”（即[http://localhost/](http://localhost/)），就好像您的 HTML 代码开头没有 doctype 一样。

尝试取消选中`Tools > Compatibility View Settings > Include intranet sites in Compatibility View`或者如果它不起作用，请尝试此 MSDN 主题中的其他方法：[远程访问简单网页时的 IE8 格式问题](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/a8a01461-b798-4467-9633-cac04603079a/)

注意：您是否使用 IE8 作为主要浏览器来测试您的工作？请尽快安装和使用 Firefox（或者可能是 Chrome 或 Opera），并且只使用 IE8 来测试 IE8 上的渲染；）

# javascript - 带有名称和 ID 的 asp.net url 生成

> ID：10052810
> 
> 赞同：0
> 
> 时间：2012-04-07T07:56:06.900
> 
> 标签：javascript, asp.net

```
test.Controls.Add(GetButton(thisReader["session_id"].ToString(), "Join Session")); 
```

我已将上面的代码更改为下面的代码

```
test.Controls.Add(GetButton(thisReader["session_name"].ToString(), "Join Session")); 
```

我这样做是因为我想让我的 URL`session= session_name`结尾代替`session_id`. 这样做现在产生了一个问题，因为由于 session_id 没有传递，所以没有显示基于 session_id 的下一页上的结果。请参考原始问题 [asp.net url generation](https://stackoverflow.com/questions/10046586/asp-net-url-generation)

```
Response.Redirect("EnterSession.aspx?session=" + e.CommandArgument.ToString()); 
```

如何解决这个问题？

c# entersession.aspx的一部分

```
public partial class _EnterSession2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            SessionID.Value = Request.QueryString["session"];
            // Label2.Text = DateTime.Now.ToString();  
            if (User.Identity.IsAuthenticated)
            {
                string userName = User.Identity.Name;
                //Username.Value = User.Identity.Name;
                Username.Value = userName.ToLower();
                HiddenField1.Value = User.Identity.Name;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:15:35.437

您可以在 EnterSession.aspx 页面中定义一个方法。它将参数作为请求[“会话”]。然后您可以调用 db 以根据 session_name 获取 session_id。

使用下面的代码

```
public partial class _EnterSession2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        SessionID.Value = GetSesssionID(Request["session"]);
        // Label2.Text = DateTime.Now.ToString();  
        if (User.Identity.IsAuthenticated)
        {
            string userName = User.Identity.Name;
            //Username.Value = User.Identity.Name;
            Username.Value = userName.ToLower();
            HiddenField1.Value = User.Identity.Name;
        }

    }

private string GetSesssionID(string session_name)
{
    string strRetval = string.Empty;
    // make database call to fetch session_id and assign value to strRetval.

    return strRetval;

} 
```

希望对你有帮助....

# php - PHP SQLite fetchAll 返回空数组

> ID：10052814
> 
> 赞同：0
> 
> 时间：2012-04-07T07:56:28.080
> 
> 标签：php, sqlite, pdo

我创建了这个查询 sqlite 数据库的 php 脚本，如下所示：

```
$r = $db->prepare("SELECT * FROM logs WHERE ip=?;");
$r->bindValue(1, $ip, PDO::PARAM_STR);
$r->execute();

if($r->fetchColumn() >= 1) {
   echo "contains columns.. <br />";
$result = $r->fetchAll();
    foreach ($result as $log) {
        echo "in loop";
        $log_ip = $log['ip'];
        $log_userAgent = $log['userAgent'];
        $log_hits = $log['hits'];

        $log_hits = $log_hits++;

        echo "hits " . $log_hits;

        $hitUp = $db->prepare("UPDATE logs SET hits = ? WHERE ip = ?;");
        $hitUp->bindValue(1, $log_hits, PDO::PARAM_INT);
        $hitUp->bindValue(2, $ip, PDO::PARAM_STR);
        $hitUp->execute();
} 
```

但是，`$r->fetchAll();`正在返回一个空数组。

我 100% 确定该行存在并且 $ip 是 127.0.0.1：

```
sqlite> select * from logs;
1|127.0.0.1|1|Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.54.16 (KHTML, like Gecko) Version/5.1.4 Safari/534.54.16 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:21:42.110

您可能需要删除它，`if($r->fetchColumn() >= 1)`因为它可能[会消耗您的单个结果](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)：

> 从结果集的下一行返回单个列，如果没有更多行，则返回 FALSE。

此外，您不应怀疑您至少有一列，而应验证是否`$result`为空。

也许通过运行这样的东西来尝试：

```
$r = $db->prepare("SELECT * FROM logs;");
$r->execute();
$result = $r->fetchAll();
echo "result contains " . count($result); 
```

如果您的数组中仍然有 0 条记录，则上游可能有问题。如果您仍然获得 0 条记录，请告诉我。

# c# - 通过for循环从gridview插入数据

> ID：10052817
> 
> 赞同：0
> 
> 时间：2012-04-07T07:57:07.093
> 
> 标签：c#, asp.net, sql

从 datatable 插入数据时出现以下错误。显示的错误是已声明变量名称“@ndate1”。变量名称在查询批处理或存储过程中必须是唯一的。我是 .net 的新手。我该如何解决这个错误请帮我解决这个错误..

我的部分代码在这里..

```
 for (int i = 0; i <= DT.Rows.Count; i++)
            {
                //sqlcmd.Parameters.Add("@company", SqlDbType.NVarChar).Value = Convert.ToString(dr["company"]);
                sqlcmd.CommandText = @" Insert into tbl_rtdata (fld_date,fld_dtcode,fld_company,fld_primary,fld_sales,fld_balance)
               values (@ndate1,@dtcode1,@company1,@billing1,@sales1,@balance1)";
                sqlcmd.Parameters.AddWithValue("@ndate1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["ndate"]);
                sqlcmd.Parameters.AddWithValue("@dtcode1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["dtcode"]);
                sqlcmd.Parameters.AddWithValue("@company1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["company"]);
                sqlcmd.Parameters.AddWithValue("@billing1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["billing"]);
                sqlcmd.Parameters.AddWithValue("@sales1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["sales"]);
                sqlcmd.Parameters.AddWithValue("@balance1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["balance"]);

                sqlcmd.ExecuteNonQuery();
            } 
```

第一行仅插入数据库...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:42:22.800

您只需要添加`sqlcmd.Parameters.Clear`，否则它将维护第一个循环的参数集合。

```
 for (int i = 0; i <= DT.Rows.Count; i++)
            {
                sqlcmd.Parameters.Clear();
                sqlcmd.CommandText = @" Insert into tbl_rtdata (fld_date,fld_dtcode,fld_company,fld_primary,fld_sales,fld_balance)
               values (@ndate1,@dtcode1,@company1,@billing1,@sales1,@balance1)";
                sqlcmd.Parameters.AddWithValue("@ndate1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["ndate"]);
                sqlcmd.Parameters.AddWithValue("@dtcode1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["dtcode"]);
                sqlcmd.Parameters.AddWithValue("@company1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["company"]);
                sqlcmd.Parameters.AddWithValue("@billing1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["billing"]);
                sqlcmd.Parameters.AddWithValue("@sales1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["sales"]);
                sqlcmd.Parameters.AddWithValue("@balance1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["balance"]);

                sqlcmd.ExecuteNonQuery();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:05:59.323

如下修改您的代码。

```
for (int i = 0; i <= DT.Rows.Count; i++)
        {

            sqlcmd = new SqlCommand(); 
            sqlcmd.Connection = objconn;

            //sqlcmd.Parameters.Add("@company", SqlDbType.NVarChar).Value = Convert.ToString(dr["company"]);
            sqlcmd.CommandText = @" Insert into tbl_rtdata (fld_date,fld_dtcode,fld_company,fld_primary,fld_sales,fld_balance)
           values (@ndate1,@dtcode1,@company1,@billing1,@sales1,@balance1)";
            sqlcmd.Parameters.AddWithValue("@ndate1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["ndate"]);
            sqlcmd.Parameters.AddWithValue("@dtcode1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["dtcode"]);
            sqlcmd.Parameters.AddWithValue("@company1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["company"]);
            sqlcmd.Parameters.AddWithValue("@billing1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["billing"]);
            sqlcmd.Parameters.AddWithValue("@sales1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["sales"]);
            sqlcmd.Parameters.AddWithValue("@balance1", SqlDbType.NVarChar).Value = Convert.ToString(DT.Rows[i]["balance"]);

            sqlcmd.ExecuteNonQuery();
        } 
```

希望这会帮助你..快乐的编码..

# ruby-on-rails-3.2 - has_friendly_id 不适用于acts_as_paranoid 模型

> ID：10052820
> 
> 赞同：2
> 
> 时间：2012-04-07T07:57:31.300
> 
> 标签：ruby-on-rails-3.2, friendly-id, acts-as-paranoid

在我的联系人模型中添加记录时出现以下错误。

```
Mysql2::Error: Duplicate entry 'john-doe' for key 'index_contacts_on_cached_slug': UPDATE `contacts` SET `cached_slug` = 'john-doe', `company` = 'XYZ-company-name', `first_name` = 'John', `last_name` = 'Doe', `prefix` = NULL, `suffix` = NULL, `title` = NULL, `created_at` = '2012-04-07 06:25:37', `updated_at` = '2012-04-07 06:25:37', `deleted_at` = NULL WHERE `contacts`.`id` = 314 
```

联系模型看起来像

```
acts_as_paranoid

has_friendly_id :full_name, :use_slug => true, :approximate_ascii => true, :allow_nil => true,
    :sequence_separator => '_', :max_length => 20 
```

现在的情况是，如果添加了一个具有相似名称的新联系人并且现有联系人偏执，那么friendly_id 无法找到该记录并创建一个具有相似名称的新 slug，但 Contact 模型不会接受它，因为该 slug 名称已经存在。

有没有办法让friendly_id也考虑偏执记录，即使用类似的东西

`scope => :with_deleted`

# javascript - 获取用户尝试返回的页面的 url

> ID：10052824
> 
> 赞同：0
> 
> 时间：2012-04-07T07:58:11.137
> 
> 标签：javascript, jquery

如何确定用户试图返回的页面的 url？例如，如果我目前在：

[http://site.com/forward](http://site.com/forward)和我之前访问的上一页是[http://site.com](http://site.com)我如何获取 url [http://site.com](http://site.com)

```
window.onbeforeunload = function (e) {

    //get url
} 
```

这在 JavaScript 中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:01:25.523

尝试

```
document.referrer 
```

（[MDC 文档](https://developer.mozilla.org/en/DOM/document.referrer)；[DOM 规范](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-95229140)）希望对您有所帮助..!!

此解决方案并不总是有效....因为在进一步移动之前，每次都可以选择将 URL 存储在 cookie 中...

# php - 使用 PHP 的基于 Cron 的 Google Analytics API 请求

> ID：10052827
> 
> 赞同：3
> 
> 时间：2012-04-07T07:58:37.210
> 
> 标签：php, cron, google-analytics-api

在阅读了 GA API 文档并查看了 PHP 的示例代码之后，我无法看到在没有用户在场的情况下如何进行身份验证。

对于我们的网站，我们希望每小时提取一次 GA 数据，并与我们网站上的其他指标进行比较。我们的目标是在 CRON 上执行此操作，然后它将告知我们当前站点行为与历史 GA 趋势数据之间的相关性。

有没有办法在 PHP 中模拟身份验证，以便可以通过 CRON 完成，假设电子邮件和密码对于 GA 帐户是已知的？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T08:58:26.933

好的，经过澄清后，我想我明白了你的意思。以下是一个巨大的概括。

所以，我假设你正在使用某种框架，但如果不是，那无论如何都不是问题。您可以在您的公共文件夹上创建单独的 php 文件，该文件将从我们请求的 ip ($_SERVER['REMOTE_ADDR']) 检查它是否是本地的（在默认 Apache 中工作正常，如果您使用代理，则需要一些额外的配置像 nginx 这样的服务器）然后你可以继续获取 GA 数据。

如何在此处进行描述：[http ://code.google.com/p/gapi-google-analytics-php-interface/](http://code.google.com/p/gapi-google-analytics-php-interface/)

非常简单：包含 GAPI 类，然后运行

```
$ga = new gapi('email@yourdomain.com','password');
$ga->requestReportData(145141242,array('browser','browserVersion'),array('pageviews','visits')); 
```

* * *

如果上面的代码不起作用，那么您必须使用 OAuth2 才能访问 GA。

关于如何做的描述：

1.  常规 -[核心报告 API - 授权](http://code.google.com/apis/analytics/docs/gdata/v3/gdataAuthorization.html)
2.  常规 -[使用 OAuth 2.0 访问 Google API](https://developers.google.com/accounts/docs/OAuth2)
3.  [适用于 PHP 的 Google API 客户端库](http://code.google.com/p/google-api-php-client/wiki/OAuth2)

# django-models - 如何编写 Django 模型迭代器？

> ID：10052828
> 
> 赞同：0
> 
> 时间：2012-04-07T07:59:04.347
> 
> 标签：django-models, iterator

我编写了一个小型 Django 应用程序来处理用户私人消息。模型看起来像：

```
#models.py
class Message(models.Model):
    subject = models.CharField(max_length=100)
    body = models.TextField()
    from = models.ForeignKey(User)
    to = models.ForeignKey(User)
    #.... some more fields 
```

我想在模型中添加一个“收件箱”属性/方法来封装查询收件箱项目的数据库，所以在*views.py*中我可以像这样遍历收到的消息：

```
# views.py
from models import Message

for msg in Message.inbox(request.user):
    print "%s: %s", (msg.from, msg.subject) 
```

所以很明显我应该`qs = Message.objects.filter(to=user)`在模型类中做一些类似的事情，但我该怎么做呢？我要返回什么？这是一个好主意，还是一个坏主意？

# facebook - 文本框中带有 in 的 Facebook 好友选择器

> ID：10052830
> 
> 赞同：0
> 
> 时间：2012-04-07T07:59:49.533
> 
> 标签：facebook, user-interface

我可以在文本框中实现 Facebook 好友选择器，这样当我输入名称时，它会自动填充从我的 Facebook 好友列表中获取的匹配好友名称？有没有这样功能的facebook插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:16:11.213

不，没有像你描述的那样的插件。

您可以自己实现类似的东西，但在我看来这是没有意义的，因为 facebook 没有为朋友邀请其他[对话框](http://developers.facebook.com/docs/reference/dialogs/requests/)提供任何 api ，所以如果您自己实现这样的事情，您仍然**需要**打开 fb邀请对话框供用户使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:17:21.960

您可以使用 FQL 在名称中进行搜索

这是一个如何搜索名字中带有“Neal”的所有朋友的示例 `fql?q=SELECT uid, name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2=me()) AND strpos(name,'Neal') >= 0`

这将返回类似

```
{
  "data": [
    {
      "uid": 120,
      "name": "Tina McNeal"
    },
    {
      "uid": 121,
      "name": "Rusty Nealy"
    },
    {
      "uid": 123,
      "name": "Neal Armstrong"
    }
  ]
} 
```

# text - 在脚本中重复文本

> ID：10052833
> 
> 赞同：1
> 
> 时间：2012-04-07T08:00:07.047
> 
> 标签：text, repeat

我有一个包含文本的文件

```
 Host:xxx.xxx.xxx.123
    Host:xxx.xxx.xxx.124
    Host:xxx.xxx.xxx.125
```

Questin是如何获取这个文件的（unix方式）

```
 Host:xxx.xxx.xxx.123; something xxx.xxx.xxx.123
    Host:xxx.xxx.xxx.124; something xxx.xxx.xxx.124
    Host:xxx.xxx.xxx.125; something xxx.xxx.xxx.125
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:37:47.217

这是一个 awk 替代方案：

awk 'BEGIN{FS=":"}{ printf "%s:%s; 东西 %s \n", $1, $2, $2 }' yourfile.txt

awk 非常适合像这样的逐行字符串操作。如果需要，只需将输出定向到目标文件。如果还没有完全理解，请查看 AWK 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:33:05.870

awk 也可以使用，但这有效（file1 是您的原始文件）：

```
cut -d":" file1 -f2 > tmp.txt; paste tmp.txt tmp.txt | \
sed 's/^/Host:/' | sed 's/\s/; something /' 
```

它不是很精致，大多数人不会使用 sed 两次，但它确实有效。要将其发送到文件中，只需以 > file2 结尾

# android - 如何在 GridView 中单击图标/图像时显示网页？

> ID：10052836
> 
> 赞同：0
> 
> 时间：2012-04-07T08:00:26.860
> 
> 标签：android, gridview, webview, onclick, onclicklistener

我有一个包含 3 个图像/图标的 GridView 布局。我想要做的是，每当单击一个项目时，都应该显示一个网站页面（Webview）。这是我所做的：

1.  在 main.xml 文件中定义了 GridView 和以 LinearLayout 作为根元素的 WebView 布局。
2.  在Androidmanifest.xml文件中赋予了上网权限
3.  为gridview编写代码
4.  为 Webview 编写代码。
5.  在 GridView 中，在 setOnItemClickListener 下，使用 loadUrl() 给出要显示的网页的 url

所以问题是：“如何在单击图标/图像时显示网页？” *我可以在模拟器上看到 UI。但是点击图标没有反应。我想我对 onClickItem() 事件做错了。*

感谢您的时间。我写了以下代码：

```
package prototype.wenview.gridview;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class MainActivity extends Activity 
{
    // Images to display-----------------------//
    Integer[] imageIds =    {           R.drawable.market,          R.drawable.news,            R.drawable.weather    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState); //calls the method from super class Activity
        setContentView(R.layout.main);          //sets the UI

        GridView gridView = (GridView) findViewById(R.id.gridview);// Bring gridView into context from main.xml
        gridView.setAdapter(new ImageAdapter(this)); 

        gridView.setOnItemClickListener(new OnItemClickListener()
                    {
                        public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                        {
                WebView myWebView = (WebView)findViewById(R.id.webview);
        myWebView.loadUrl("http://translate.google.com/translate?sl=auto&tl=hi&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http%3A%2F%2Fwww.kvk.pravara.com%2Fweather.html");
                        }
                    }
                    );  //setOnItemClickListener declaration ends here.
     }  //onCreate() ends here.

    public class ImageAdapter extends BaseAdapter
    {
        private Context context; // Context class object - context

        public ImageAdapter(Context c)
        {
            context = c;
        }

        //return number of images
        public int getCount()
        {
            return imageIds.length;
        }

        public Object getItem(int position)     // return type of getItem method is an Object
        {
            return position;
        }

        public long getItemId(int position)
        {
            return position;
        }

        //returns an ImageView view--------------
        public View getView(int position, View convertView, ViewGroup parent)
        {
            ImageView imageView;
            if(convertView == null)
            {
                imageView = new ImageView(context);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(5, 5, 5, 5);
            }

            else
            {
                imageView = (ImageView) convertView;
            }
            imageView.setImageResource(imageIds[position]);
            return imageView;
        }       
    }    
} 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />

    <GridView xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center"

/>

<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/>    

</LinearLayout> 
```

/* Activity2.java 的 XML 代码。此页面旨在在单击网格视图中的图标后显示网页。*/

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

// 活动 2 的 Java 代码

包在.niteesh.MultipleActivity；

导入android.app.Activity；导入android.os.Bundle；

```
public class Activity2 extends Activity 
{   
    @Override
    public void onCreate(Bundle savedInstanceState)
    {   
        super.onCreate(savedInstanceState);         //calls the method from super class Activity
        setContentView(R.layout.activity2);          //sets the UI
    }
} 
```

// AndroidManifest.xml 文件，其中我提到了 Activity2 的存在

```
<activity android:name=".Activity2" android:label="Activity 2">
            <intent-filter>
                <action android:name="net.learn2develop.ACTIVITY2" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

// 在 onItemClick 下的 MainActivity 类中，我为网页编写了以下代码 // 在第二个 Activity 中显示

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
{
String url = "http://google.com/";  
        Intent i = new Intent(Intent.ACTION_VIEW);  
        i.setData(Uri.parse(url));  
        startActivity(new Intent("net.learn2develop.ACTIVITY2"));//reference to start the activity
} 
```

/*现在的问题是 - 点击一个图标后，它切换到 Activity2 但没有显示网页。我尝试了各种周转，但找不到解决方案*/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:42:26.183

我有一个解决方案可以在您的活动中打开网页：

首先，我更改了布局的一些属性：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" />

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

否则 WebView 将不可见。

您还必须添加一个类来控制操作系统：

```
private class CustomWebViewClient extends WebViewClient {   
    @Override
    /**
     * Take control over the loaded url so the url is open in the current Webview and not by the OS browser
     */
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return false;
    } 
```

}

你的听众应该是这样的：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {
        WebView myWebView = (WebView)findViewById(R.id.webview);
        CustomWebViewClient myCustomWebViewClient = new CustomWebViewClient();
        myWebView.setWebViewClient(myCustomWebViewClient);
        myWebView.loadUrl("http://www.google.com");
    } 
```

希望这是您正在寻找的。

编辑：另一种解决方案，它在（应用程序的）第二个活动中打开 webview：

我刚刚对你的听众做了一些改变：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
{
    String url;
    //The url changes accordingly to the button clicked
   switch (position) {
        case 0:  url = "http://stackoverflow.com";
                 break;
        case 1:  url = "http://yahoo.fr";
                 break;
        case 2:  url = "http://bing.com";
                 break;
        default: url = "http://google.com";
                 break;
    }
    Intent intent = new Intent(MainActivity.this,SecondActivity.class); 
    //used to pass the url to the next activity
    intent.putExtra("url", url);
    startActivity(intent);//reference to start the activity
} 
```

我的第二个活动：

```
public class SecondActivity extends Activity 
{   
    @Override
    public void onCreate(Bundle savedInstanceState)
    {   
        super.onCreate(savedInstanceState);         //calls the method from super class Activity
        setContentView(R.layout.second);          //sets the UI
        //the webview inside the second activity xml
        WebView myWebView = (WebView)findViewById(R.id.webview);
        CustomWebViewClient myCustomWebViewClient = new CustomWebViewClient();
        myWebView.setWebViewClient(myCustomWebViewClient);
        //get the url from the previous activity
        String url = getIntent().getStringExtra("url");
        myWebView.loadUrl(url);
    }

    private class CustomWebViewClient extends WebViewClient {   
        @Override
        /**
         * Take control over the loaded url so the url is open in the current Webview and not by the OS browser
         */
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return false;
        }
    }

} 
```

我没有触摸xml文件。

对于第一种解决方案，我们需要重写 shouldOverrideUrlLoading 以便在正确的视图中加载 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:04:49.127

在您的 xml 代码中，您的 webview 和网格视图的高度是填充父级。您必须能够加载页面，但 gridview 是 fillparent 它占据了全屏。

让它包装内容。

而且我认为如果它满足您的要求，最好在下一个活动中加载 webview。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T03:17:27.207

Agarwal 是对的——考虑修改你的布局，或者在单独的活动中打开网页。

以下是从 url 打开网页的代码：

```
String url = "http://almondmendoza.com/android-applications/";  
Intent i = new Intent(Intent.ACTION_VIEW);  
i.setData(Uri.parse(url));  
startActivity(i); 
```

编辑：

要从新活动打开链接：

```
String url = "http://almondmendoza.com/android-applications/";
Intent i = new Intent(this, Activity2.class);
i.putExtra("key_url", url);
startActivity(i); 
```

`this`in`new Intent(this, Activity2.class);`是您活动的上下文。如果此代码在内部类中，请使用`MyActivity1.this`

对于Activity2，从前面的`startActivity`代码中获取Intent抛出的url，

```
String url = getIntent().getStringExtra("key_url"); 
```

然后你可以对 url 做任何你想做的事情，比如

```
webView.loadUrl(url); 
```

所有这些在`onCreate`

# ruby-on-rails - 使用 rvm 在 rails 3 中 rake 任务和 cron

> ID：10052838
> 
> 赞同：7
> 
> 时间：2012-04-07T08:00:50.533
> 
> 标签：ruby-on-rails, ruby, cron, crontab

我正在尝试在 Rails 3.0.9（使用 RVM）中使用 crontab 运行 Rake 任务，但它不起作用。

但是当我在控制台中运行时它工作正常

我的耙子任务

```
namespace :alert  do
  desc "create some reminder notification"
  task :send_reminder => :environment do
     p "my task goes here ----"
  end
end 
```

我的 cron 任务

```
*/1 * * * * cd /home/anu-karthik/Documents/billguru/ && /home/anu-karthik/.rvm/gems/ruby-1.9.2-p0/bin/rake  alert:send_reminder >/home/anu-karthik/alert.out 
```

但我没有在“alert.out”文件中找到任何日志条目

我也尝试过以下方法

```
*/1 * * * * cd /home/anu-karthik/Documents/billguru/ && rake  alert:send_reminder >/home/anu-karthik/alert.out 
```

现在输出是（在/home/anu-karthik/Documents/billguru）

我认为这是 RVM 的问题。我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T10:15:12.167

根据 RVM 文档：[https ://rvm.io/integration/cron](https://rvm.io/integration/cron)

对于每个 rvm 或 gemset，都有一个描述它的环境文件。您可以通过以下方式获得它：

```
rvm env --path -- ruby-version[@gemset-name] 
```

那就是rvm环境文件的路径。

从 cron 运行 rake 任务时，**从 shell 脚本调用它们**是一个好习惯。

crontab 应该是这样的：

```
*/30 * * * * /path/to/shell/script.sh >/dev/null 2>&1 
```

然后在 shell 脚本中：

```
#!/bin/bash
cd /path/to/project
source /path/to/env/file
rake task 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T08:09:13.283

尝试使用[无论何时](https://github.com/javan/whenever)gem 来管理编写和部署您的 cron 作业。

> 默认情况下，所有作业都使用 bash -l -c 'command...' 运行。除其他外，这允许您的 cron 作业通过加载整个环境而不是 cron 有限的环境来与 RVM 配合使用。阅读更多：http: [//blog.scoutapp.com/articles/2010/09/07/rvm-and-cron-in-production](http://blog.scoutapp.com/articles/2010/09/07/rvm-and-cron-in-production)

从描述来看，它应该对你有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T00:12:27.223

我刚刚为一个项目解决了这个问题：

来自[https://rvm.io/integration/cron/](https://rvm.io/integration/cron/)：

```
"For every installed ruby and created gemset RVM creates wrappers for basic command line tools like gem, rake, ruby. You can find them in `$rvm_path/bin`." 
```

因此，在上面列出的情况下，您可以执行以下操作：

```
*/1 * * * * (cd /home/anu-karthik/Documents/billguru/; /usr/local/rvm/bin/rake-ruby-1.9.2-p290@billguru alert:send_reminder) 
```

其中 billguru 将是 gemset，而 ruby​​-1.9.2-p290 将是您正在使用的 ruby​​ 版本。这假设您在 /usr/local/rvm 中安装了系统范围的 rvm。这会在 gemset 的上下文中运行 rake 任务，并为该 gemset 提供适当的 rake。

上面提到的 rvm.io 页面列出了执行相同操作的其他几种方法，但这种方法对我来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T18:39:24.653

你可以只加载（使用）你的 RVM 环境，它会像这样设置 rake 的路径：

```
0 * * * * /home/user/.rvm/bin/rvm use ree-1.8.7-2011.03 rake name:task 
```

`ree-1.8.7-2011.03`我要加载的 gemset 的名称在哪里，输入`rvm list`以查看您的 gemset。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-10T21:18:13.823

此脚本将允许您从任何用户/环境运行 Rake 任务。它将检测 RVM ruby​​ 环境和正确的 Rails 用户。

```
#!/bin/bash

RAILS_USER=$(stat -c '%U' /YOUR_PATH_HERE/environment.rb) 

echo "Detected rails user: $RAILS_USER"

sudo -H -u $RAILS_USER bash -c 'RAILS_USER=$USER; echo "I am $USER, with uid $UID" ; echo "whoamI: $(whoami)" ; echo "Running rvm script: /home/$RAILS_USER/.rvm/scripts/rvm" ; source /home/$RAILS_USER/.rvm/scripts/rvm ; ENV_FILE=`rvm env --path` ; echo $ENV_FILE ; source $ENV_FILE ; cd /YOUR_PATH_HERE/lib/tasks ; rake XXX:YYY RAILS_ENV=production' 
```

# c# - 在 C# 中并行运行循环需要什么条件？

> ID：10052841
> 
> 赞同：2
> 
> 时间：2012-04-07T08:01:33.450
> 
> 标签：c#, linq, loops, parallel-processing, requirements

我有这样一段代码：

```
foreach (var elem in coll.AsParallel())
{
   ... // some *local* computation
   cache.Add(elem,computation_outcome);
} 
```

where `cache`is`ConcurrentDictionary`和`Add`is 扩展方法，它`TryAdd`在失败时包装并抛出异常。

有用。唯一的问题是，它不能并行运行。

**问题**- 并行运行循环的要求是什么？

*我知道强制并行模式，但我只是询问并行执行的要求。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:37:42.430

`AsParallel()`用于 LINQ 查询。它不会进行正常`foreach()`的并行运行。

你应该使用类似的东西：

```
Parallel.ForEach (coll, elem => 
{
   ... // some *local* computation
   cache.Add(elem,computation_outcome);
} ); 
```

# c# - 如何在发生异常时暂停后台工作线程并在发生异常时恢复它

> ID：10052844
> 
> 赞同：0
> 
> 时间：2012-04-07T08:01:49.213
> 
> 标签：c#, windows

我使用以下代码向数据库中的所有学生发送短信

```
private void btnsend_Click(object sender, EventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = false;
        }
        if (!bgw.IsBusy)
        {
            bgw.RunWorkerAsync();
        }
    }
    private void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            Invoke((MethodInvoker)delegate()
            {
                using (var sp = new SerialPort(cbcomport.Text))
                {
                    sp.Open();
                    sp.WriteLine("AT" + Environment.NewLine);
                    sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
                    sp.WriteLine("AT+CMGS=\"" + dt.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
                    sp.WriteLine(tbsms.Text + (char)26);
                    if (sp.BytesToRead > 0)
                    {
                        tbsentto.Text = i + 1 + " of " + dt.Rows.Count;
                    }
                }
            });
            Thread.Sleep(5000);
        }
    }
    private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = true;
        }
    } 
```

我的问题是：如果发生异常，例如端口“COM5”不存在，则会向学生发送短信。我想通过按钮重试和取消向用户显示相同的系统消息。如果已经解决了问题。即插入设备后，用户按下重试按钮，我想从同一点恢复线程，如果用户按下取消按钮，我想停止暂停的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:31:22.980

尝试这个

```
private void btnsend_Click(object sender, EventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = false;
        }
        if (!bgw.IsBusy)
        {
            bgw.RunWorkerAsync();
        }
    }
    private void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            if ((bgw.CancellationPending == true))
            {

                e.Cancel = true;
                break;
            }
            else
            {
                Invoke((MethodInvoker)delegate()
                {
                    using (var sp = new SerialPort(cbcomport.Text))
                    {
                        try
                        {
                            sp.Open();
                            sp.WriteLine("AT" + Environment.NewLine);
                            sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
                            sp.WriteLine("AT+CMGS=\"" + dt.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
                            sp.WriteLine(tbsms.Text + (char)26);
                            if (sp.BytesToRead > 0)
                            {
                                tbsentto.Text = i + 1 + " of " + dt.Rows.Count;
                            }
                            Thread.Sleep(5000);
                        }
                        catch (Exception ex)
                        {
                            if (MessageBox.Show(ex.Message, "Error", MessageBoxButtons.RetryCancel, MessageBoxIcon.Error) == System.Windows.Forms.DialogResult.Retry)
                            {
                                try
                                {
                                    sp.Open();
                                    sp.WriteLine("AT" + Environment.NewLine);
                                    sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
                                    sp.WriteLine("AT+CMGS=\"" + dt.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
                                    sp.WriteLine(tbsms.Text + (char)26);
                                    if (sp.BytesToRead > 0)
                                    {
                                        tbsentto.Text = i + 1 + " of " + dt.Rows.Count;
                                    }
                                    Thread.Sleep(5000);
                                }
                                catch (Exception ex2)
                                {
                                    MessageBox.Show(ex2.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                                    bgw.CancelAsync();

                                }
                            }
                            else
                            {
                                bgw.CancelAsync();
                            }
                        }
                    }
                });
            }
        }
    }
    private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:53:46.947

对于这样的方案，一般的想法是您需要：

*   捕获可能从工作人员抛出的异常（但**只有**您知道可以处理的异常；捕获所有异常是**邪恶**的！）
*   通知UI线程提示用户
*   暂停执行直到 UI 线程收到输入
*   如果输入指示，则中止执行

对于最后两项，使用一个可等待的对象，例如 an`AutoResetEvent`和一个状态变量（即使是 a`bool`也至少会这样做），指示是否应该中止任务。这些变量必须可以从 UI 线程和工作线程访问：

```
AutoResetEvent pauseEvent(false);
bool shouldAbort; 
```

然后工人的代码变成：

```
for (int i = 0; i < dt.Rows.Count; i++)
{
    try
    {
        // your existing code goes here
    }
    catch (SomeException ex) // do not catch all exceptions!
    {
        BeginInvoke(...);     // tell the UI thread something bad happened
        pauseEvent.WaitOne(); // and block the worker until user gives input
        if (shouldAbort)
        {
            // cleanup any other resources if required and then
            break;
        }
    }
} 
```

在该`BeginInvoke`行中，您应该调用一些方法来向用户显示适当的消息并请求说明。`BeginInvoke`将立即返回，并且工作人员将`AutoResetEvent`通过调用无限期地阻塞`pauseEvent.WaitOne`.

UI 方法应查询用户，并在收到响应后发出`pauseEvent`信号

```
pauseEvent.Set(); 
```

这将解除对工作人员的阻止并允许其恢复执行。由于代码的结构，这意味着它将继续循环的下一次迭代。如果您想让工作人员中止，请设置`shouldAbort`为`true` *before* signaling `pauseEvent`。

如果您`i`在`catch`块内递减，您还可以使代码重试引发异常的迭代（而不是跳过它并继续下一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:08:23.470

您必须`sync`在线程之间使用对象。尤其是看 [这里](http://msdn.microsoft.com/en-us/library/ms173179.aspx)`wait handlers`的部分。

# php - php 检查图像文件名结尾是否不是 .jpg、.jpeg、.png 或 .gif。

> ID：10052845
> 
> 赞同：3
> 
> 时间：2012-04-07T08:01:49.667
> 
> 标签：php, regex, mime-types

我尝试将网页图像保存到本地，我在这里使用代码进行判断，如果图像文件名结尾不是.jpg，.jpeg，.png或.gif，则添加它们。我使用`stripos`，但是当像这样的图像 url 时遇到一些麻烦。那么如何解决呢？谢谢。

```
$webimage = 'http://pcdn.500px.net/5953805/d0dd841969187f47e8ad9157713949b4b95b3bda/4.jpg?1333782904356';
$pieces = explode("/", $webimage); 
$pathend = end($pieces);
$imageinfo = @getimagesize($webimage);
$imagetype= $imageinfo['mime'];
if($imagetype=='image/jpeg'){
    if(stripos($pathend,'.jpg')==0){
        $newpathend = $pathend.'.jpg'; // if image end is't '.jpg', add '.jpg'
    }else if(stripos($pathend,'.jpeg')==0){
        $newpathend = $pathend.'.jpeg'; // if image end is't '.jpg', add '.jpeg'
    }else{
        $newpathend = $pathend;// if image end is '.jpg' or '.jpeg', do not change
    }
}
if($imagetype=='image/png'){
    if(stripos($pathend,'.png')==0){
        $newpathend = $pathend.'.png'; // if image end is't '.png', add '.png'
    }else{
        $newpathend = $pathend;// if image end is '.png', do not change
    }
}
if($imagetype=='image/gif'){
    if(stripos($pathend,'.gif')==0){
        $newpathend = $pathend.'.gif'; // if image end is't '.gif', add '.gif'
    }else{
        $newpathend = $pathend;// if image end is '.gif', do not change
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T07:04:30.173

为什么不使用 preg_match？

```
if( preg_match('/\.(jpg|jpeg|png|gif)(?:[\?\#].*)?$/i', $webimage, $matches) ) {
    // matching file extensions are in $matches[1]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T11:31:06.737

你可以这样尝试

```
$type=Array(1 => 'jpg', 2 => 'jpeg', 3 => 'png', 4 => 'gif'); //store all the image extension types in array

$imgname = ""; //get image name here
$ext = explode(".",$imgname); //explode and find value after dot

if(!(in_array($ext[1],$type))) //check image extension not in the array $type
{
    //your code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:07:50.567

这个函数[pathinfo](http://php.net/manual/en/function.pathinfo.php)可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-24T13:21:51.870

这适用于 jpg 和 jpeg 以及大写字母。它也适用于文件名，如`testing.the.bicycle.jpg`

试试[https://regex101.com/r/gI8uS1/1](https://regex101.com/r/gI8uS1/1)

```
public function is_file_image($filename)
{
   $regex = '/\.(jpe?g|bmp|png|JPE?G|BMP|PNG)(?:[\?\#].*)?$/';

   return preg_match($regex, $filename);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T06:42:16.667

使用**strops**

```
if (strpos($your_text,'.png') !== false) {
        //do something
 } else if (strpos($your_text,'.jpg') !== false) {
        //do something
 } else if (strpos($your_text,'.gif') !== false) {
        //do something
 } 
```

希望它会有所帮助！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-01T12:39:17.293

引用自**kingjeffrey**在此页面中回答

```
if( preg_match('/\.(jpg)(?:[\?\#].*)?$/i', $imgname, $matches) ) {
    echo "jpg";
}else if( preg_match('/\.(png)(?:[\?\#].*)?$/i', $imgname, $matches) ) {
    echo "png";
}else if( preg_match('/\.(gif)(?:[\?\#].*)?$/i', $imgname, $matches) ) {
    echo "gif";
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-22T18:31:19.057

```
$Extension=strrev(substr(strrev($fileName),0,strpos(strrev($fileName),'.')));
if(preg_match('/png|jpg|jpeg|gif/',$Extension))
{ 
    true 
}
else
{ 
    false
} 
```

# datetime - 计算编号 在 php 中在一小时内进行的交易

> ID：10052846
> 
> 赞同：0
> 
> 时间：2012-04-07T08:01:51.470
> 
> 标签：datetime, timestamp, php

我有以下关于同一天交易的数据（PHP）：

```
交易 ID 日期/时间
```

```
111-11111 05:50:07
```

```
211-21111 06:02:58
```

```
241-21311 06:43:00
```

```
255-26711 07:58:00
```

**如果所有这些交易都在同一小时（一个小时）内完成**，我如何检查？我在这里有点迷路，需要指导。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T04:16:40.463

我怀疑你还在寻找这个，但对于其他可能正在寻找类似东西的人来说，这就是我到目前为止所拥有的。

```
<?php

$transactions = array(
    '111-11111' => '05:50:07',
    '211-21111' => '06:02:58',
    '241-21311' => '06:43:00',
    '255-26711' => '07:58:00'
);

list($hour, $minutes, $seconds) = explode(':', array_shift($transactions));
$first   = (new DateTime())->setTime($hour, $minutes, $seconds);
$endtime = $first->add(new DateInterval('PT1H'));
foreach ($transactions as $key => $time) {
    list($hour, $minutes, $seconds) = explode(':', $time);
    $datetime = (new DateTime())->setTime($hour, $minutes, $seconds);
    printf("Transaction ID: %s, Date/Time: %s, Within an hour: %s<br>\n",
        $key,
        $time,
        ($datetime < $endtime ? 'Yes' : 'No')
    );
} 
```

基本上，它采用第一条记录并将其用作基线，然后遍历其他记录并检查它们是否在第一条记录的一小时内。

[**看到它在行动**](http://3v4l.org/9o5re)

# c# - C# 中的 Scala flatMap.toMap 类似物

> ID：10052847
> 
> 赞同：5
> 
> 时间：2012-04-07T08:01:52.737
> 
> 标签：c#, scala

前几天我在 C# 中编写了一些代码来获取一个对象列表，每个对象都包含一个数组字段，并将其转换为一个映射（即字典），其中对象成为值，对象数组字段的每个元素都成为键。这可能没有多大意义，所以让我们展示一些代码。在 Scala 中，我可能会这样做：

```
// Data class
class MyClass(val keys:Array[String])

object MyClassTests {

  // Dummy method just to get some sample data
  def getMyClassList() = List(
    new MyClass(Array("one", "two", "three")),
    new MyClass(Array("four", "five", "six")))

  def test() = {
    val list = getMyClassList()
    val map1 = list.view.flatMap(mc => mc.keys.map(_ -> mc)).toMap
    // or, if you like for-comprehensions:
    val map2 = (for (mc <- list.view; k <- mc.keys) yield k -> mc).toMap
    map1 // or map2, same difference
  }
} 
```

在 REPL 中运行它，给我们（添加了格式）：

```
res0: scala.collection.immutable.Map[String,MyClass] = 
    Map(four -> MyClass@4ee31ef2, 
        three -> MyClass@69bc6271, 
        two -> MyClass@69bc6271, 
        six -> MyClass@4ee31ef2, 
        five -> MyClass@4ee31ef2, 
        one -> MyClass@69bc6271) 
```

但是，我不想在 Scala 中执行此操作，我想在 C# 中执行此操作。下面介绍了两种可能的解决方案，Test1() 是一个非常命令式的解决方案，而 Test2() 是我当场想到的最接近的类似物。

**所以我的问题是**：忽略这个例子看似空洞的事实，Test2() 真的是最接近 Scala 代码的类似物吗，它是在 C# 中执行此操作的最简洁方式吗？是否有更简洁的方法来完成相同的任务（在 C# 中）？

```
// Data class
class MyClass {
    public string[] Keys { get; set; }

}

class MyClassTests {
    // Dummy method just to get some sample data
    public static IList<MyClass> GetMyClassList() {
        return new List<MyClass> {
            new MyClass {
                Keys = new[] {"one", "two", "three"}
            },
            new MyClass {
                Keys = new[] {"four", "five", "six"}
            }
        };
    }

    public void Test1() {
        var list = GetMyClassList();
        var validTypes = new Dictionary<string, MyClass>();
        foreach (var h in list) {
            foreach (var key in h.Keys)
                validTypes.Add(key, h);
        }
    }

    public void Test2() {
        var list = GetMyClassList();
        var validPartTypes = list
            .SelectMany(mc => mc.Keys.Select(k => new KeyValuePair<string,MyClass>(k, mc)))
            .ToDictionary(x => x.Key, x => x.Value);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T08:34:28.720

您可以使用匿名类型而不是`KeyValuePair<>`使其更简洁：

```
var validPartTypes = list.SelectMany(mc => mc.Keys.Select(k => new { k, mc }))
                         .ToDictionary(x => x.k, x => x.mc); 
```

或者，如果您觉得 LINQ 查询语法更清晰，那就是：

```
var validPartTypes = (from mc in list
                      from k in mc.Keys
                      select new { k, mc })
                      .ToDictionary(x => x.k, x => x.mc); 
```

但是，您的代码是完全有效的，我没有看到任何更好的方法可以在 C# 中实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:32:23.433

您可以创建自己的类似 LINQ 的方法：

```
public static class MyLinq
{
    public static IDictionary<TKey, TValue> ToDictionary<TKey, TValue>(this IEnumerable<KeyValuePair<TKey, TValue>> t)
    {
        return t.ToDictionary(p => p.Key, p => p.Value);
    }
} 
```

您也可以使用`ToDictionary`代替`.Select(k => new KeyValuePair`，但由于创建了许多无用的字典，这是一种非常缓慢的方式：

```
public void Test2() { 
    var list = GetMyClassList(); 
    var validPartTypes = list 
        .SelectMany(mc => mc.Keys.ToDictionary(k => mc)) 
        .ToDictionary(); 
} 
```

# javascript - Fancybox 框在我将其上传到 webhost 后无法正常工作，但可以在 localhost 上使用

> ID：10052848
> 
> 赞同：0
> 
> 时间：2012-04-07T08:01:55.957
> 
> 标签：javascript, html, css, iframe, fancybox

[http://www.outofthegardendesigns.com](http://www.outofthegardendesigns.com)

有什么想法吗？

我认为这与路径有关，但我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:26:15.680

您正在多次添加 jQuery。

来自这个 url 的两次`js/libs/jquery-1.7.1.js`，然后再次使用 google cdn，如果 google cdn 离线，则再次回退。我想，这引起了冲突。因为，在您的本地主机上，您可能处于离线状态，google cdn jQuery 没有加载并且一切正常。但是当您在服务器中打开它时，google cdn jQuery 会尝试加载并花费时间并引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:22:43.987

您到 fancybox 和 jquery 的链接不正确。你有 ：

```
<script src="js/libs/jquery-1.7.1.js" type="text/javascript"></script>
<script src="fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script> 
```

您需要在链接的开头添加“/”，例如：

```
<script src="/js/libs/jquery-1.7.1.js" type="text/javascript"></script>
<script src="/fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script> 
```

删除额外的 jquyer 链接后，您的代码应如下所示：

```
<script src="/js/libs/jquery-1.7.1.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function(){

        $('.b2').animate({
            opacity:.0

        });

        $('.b2').hover(function(){
            $(this).stop().animate({opacity:1});

        }, function(){
            $(this).stop().animate({opacity:0});

        });

    });
</script>

<!--FANCY BOX-->
<script src="/fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script> 
```

# jquery - 如何用 jQuery 装饰表单输入元素？

> ID：10052855
> 
> 赞同：-1
> 
> 时间：2012-04-07T08:03:46.237
> 
> 标签：jquery, jquery-ui

寻找一种使用 jQuery 向我的输入元素添加所需类的快速方法。我相信我需要添加以下类，但我不确定如何添加这些以及是否需要添加悬停类。

```
ui-widget ui-widget-content ui-corner-all 
```

有没有人有关于添加什么以及如何添加包括悬停在内的类的建议？我检查了文档，但在 jQuery 网站上我什至看不到这一点：-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:10:36.207

如果您正在创建小部件并希望在其中使用 jQuery UI 主题，则[jQuery UI CSS 框架](http://jqueryui.com/docs/Theming/API)页面会告诉您 CSS 类等的用途。

在添加`-hover`和`-active`类方面，前者有jQuery的[`hover`](http://api.jquery.com/hover)函数，后者有事件[`focus`](http://api.jquery.com/focus)和[`blur`](http://api.jquery.com/blur)事件。[`addClass`](http://api.jquery.com/addClass)您可以通过和添加和删除类[`removeClass`](http://api.jquery.com/removeClass)。

* * *

**更新**：下面你说你不是在创建一个小部件，你只是想把一些东西应用到一个简单的文本框中。据我所知，您无需做任何事情，也无需添加任何课程。例如，看一下[主题滚轮](http://jqueryui.com/themeroller/)： 自动完成器的输入框除了那些由*自动完成*器代码添加的类之外没有其他类。您不添加它们，而是在元素上设置自动完成器并*添加*它们。据我所知，情况始终如此：您通过在运行时调用它们的插件函数来设置小部件，并且如果需要，*小部件*代码会将它需要的任何类添加到元素中。

如果您只是想为页面上的其他元素设置样式，以使其与主题完美契合——即使没有创建小部件——上面链接的页面应该会告诉您执行此操作需要知道什么。但总的来说，你大多不会。jQuery UI 不是网站 CSS 框架；CSS 针对 jQuery UI 提供的特定内容（但以一种很好的整体方式，因此可以以统一的方式对整个事物进行主题化）。

# iphone - 语义问题：不兼容的指针警告

> ID：10052858
> 
> 赞同：0
> 
> 时间：2012-04-07T08:04:06.483
> 
> 标签：iphone, ios, automatic-ref-counting, compiler-warnings

我启用了 ARC，在我的`didFinishLaunchingWithOptions`方法中，我编写了以下代码：

AppDelegate.h：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

AppDelegate.m:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    ViewController * vc = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    UINavigationController * nav = [[UINavigationController alloc] initWithRootViewController:vc];
    self.viewController = nav;
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

但是语句：`self.viewController = nav;`得到一个编译警告，警告信息是：

`file://.../AppDelegate.m: warning: Semantic Issue: Incompatible pointer types passing 'UINavigationController *__strong' to parameter of type 'ViewController *'`

![编译警告信息](../Images/59f845cffd43b2ae09eeda5348376dae.png)

如何删除警告？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:13:06.257

I assume that ViewController is a custom subclass of UIViewController which is either completely different *or* a subclass of UINavigationController itself. That's why it's wrong: a superclass can't completely act as it's subclass(es) (e. g., it may not have certain properties/methods etc.), hence the warning.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:42:11.113

尝试以下代码： -

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    UINavigationController * nav = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = nav;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:12:04.050

编译器告诉你：“导航，一个 UINavigationController 的实例，不是一个 'ViewController' 或 'ViewController' 的子类”。如果你真的想同时保留导航控制器和视图控制器，你可以添加第二个属性：

```
@property (nonatomic, strong) UINavigationController *navController; 
```

然后将其设置在`application:didFinishLaunchingWithOptions:`

```
self.viewController = vc;
self.navController = nav; 
```

*这里的另一个*解决方案是只保留导航控制器并使用“topViewController”属性来访问您的 VC。

编辑：或者更好的是，不关心导航控制器。只需这样做：

```
self.viewController = vc;
self.window.rootViewController = nav; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T08:22:33.253

你可以这样做

```
 self.viewController =[nav.viewControllers objectAtIndex:0]; 
```

那么它不会显示类似“不兼容的指针类型将'UINavigationController *__strong'传递给'ViewController *类型的参数”的警告

# css - MVC 样式化选项卡

> ID：10052861
> 
> 赞同：1
> 
> 时间：2012-04-07T08:05:01.123
> 
> 标签：css, asp.net-mvc

以下是母版页中的选项卡：

```
<nav>
     <ul id="menu">
         <li><%: Html.ActionLink("Home", "Index", "Home")%></li>
         <li><%: Html.ActionLink("About", "About", "Home")%></li>
     </ul>
</nav> 
```

这是CSS：

```
ul#menu li.selected a {
    background-color: #a6e2a6;
    color: #000;
} 
```

但无论我对背景颜色做什么，它总是保持不变。如何更改所选标签的背景颜色和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:15:51.593

The `:active` selector doesn't style the link that corresponds with the current page, but it styles the link on which is the user is currently clicking.

The `:active` selector is really similar to the `:hover` selector, which styles the link when the user is hovering over it. They are both selectors which are responding to mouse actions.

Here is a sample which shows the behavior rather obvious: [http://jsfiddle.net/NuExP/](http://jsfiddle.net/NuExP/)

Edit after you modified the question:

Like @o.v. said, there is no selector for the current active page, so his solution to add a class to the link to indicate that it is the current active page is correct.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:18:40.697

I'm assuming you're trying to change the styling of a tab that is currently selected? If so, you should be adding a css class like `.current` server-side to one of the tabs (also, you may need to style li element rather than the link inside it - but it all depends on the current css structure)

`:active` pseudo-class is used for [a different purpose](https://developer.mozilla.org/En/CSS/%3aactive), you could see it applied when you, for instance, click and hold on the anchor.

# eclipse - 获取 Eclipse 编辑器的关联文件扩展名

> ID：10052864
> 
> 赞同：0
> 
> 时间：2012-04-07T08:05:36.163
> 
> 标签：eclipse, eclipse-plugin, eclipse-pde, dltk

我正在尝试从我的（基于 DLTK 的）Eclipse 插件中以编程方式检索特定编辑器的关联文件扩展名。原因是我只想索引与我的编辑器关联的文件，并且我需要避免对扩展名进行硬编码，因为用户可以通过 Eclipse 首选项将任何文件扩展名关联到编辑器。

示例代码：

```
public boolean isValidPluginFile(ISourceModule sourceModule) {

    // currently: 
    if (sourceModule.getUnderlyingResource().getFileExtension().equals("twig")) {
      return true;
    }
    return false;

    // what i would need instead (pseudocode):

    List extensions = Somehow.Retrieve.AssociatedExtensionsFor('MyEditorID');
    for (String extension : extensions) {
       if (sourceModule.getUnderlyingResource().getFileExtension().equals(extension)) {
         return true;
       }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:19:48.607

您可以获得所有[文件编辑器映射](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IFileEditorMapping.html)

```
IEditorRegistry editorReg = PlatformUI.getWorkbench().getEditorRegistry();
IFileEditorMapping[] mappings = editorReg.getFileEditorMappings(); 
```

然后选择仅关联到您的 editorId。

# c++ - 顺序和并行版本给出不同的结果 - 为什么？

> ID：10052867
> 
> 赞同：2
> 
> 时间：2012-04-07T08:06:12.667
> 
> 标签：c++, gcc, parallel-processing, openmp

我有一个嵌套循环：（L 和 A 是完全定义的输入）

```
 #pragma omp parallel for schedule(guided) shared(L,A) \
    reduction(+:dummy)
    for (i=k+1;i<row;i++){
            for (n=0;n<k;n++){
                #pragma omp atomic
                dummy += L[i][n]*L[k][n];
                L[i][k] = (A[i][k] - dummy)/L[k][k];
            }
            dummy = 0;
    } 
```

及其顺序版本：

```
 for (i=k+1;i<row;i++){
            for (n=0;n<k;n++){
                dummy += L[i][n]*L[k][n];
                L[i][k] = (A[i][k] - dummy)/L[k][k];
            }
            dummy = 0;
    } 
```

他们都给出了不同的结果。并且并行版本比顺序版本慢得多。

什么可能导致问题？

编辑：

为了摆脱 atomic 指令带来的问题，我将代码修改如下：

```
#pragma omp parallel for schedule(guided) shared(L,A) \
    private(i)
    for (i=k+1;i<row;i++){
        double dummyy = 0;
        for (n=0;n<k;n++){
            dummyy += L[i][n]*L[k][n];
            L[i][k] = (A[i][k] - dummyy)/L[k][k];
        }
    } 
```

但它也没有解决问题。结果仍然不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:14:26.637

I am not very familiar with OpenMP but it seems to me that your calculations are not order-independent. Namely, the result in the inner loop is written into `L[i][k]` where `i` and `k` are invariants for the inner loop. This means that the same value is overwritten `k` times during the inner loop, resulting in a race condition.

Moreover, `dummy` seems to be shared between the different threads, so there might be a race condition there too, unless your pragma parameters somehow prevent it.

Altogether, to me it looks like the calculations in the inner loop must be performed in the same sequential order, if you want the same result as given by the sequential execution. Thus only the outer loop can be parallelized.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T08:19:57.940

在您的并行版本中，您插入了一个不必要的（并且可能有害的）原子指令。一旦您声明`dummy`为归约变量，OpenMP 就会负责停止干扰归约的线程。我认为不必要的指令的主要影响是减慢你的代码，很多。

我看到你有另一个答案来解决你的结果的错误。但我注意到您似乎在每次外循环迭代结束时设置`dummy`为 `0`也许您想减少到`dummy`整个内部循环？

如果您在还原方面遇到问题，[请阅读此内容](https://computing.llnl.gov/tutorials/openMP/#REDUCTION)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T09:08:21.340

结果的差异来自内部循环变量`n`，它在线程之间共享，因为它是在 omp pragma 之外定义的。

澄清：循环变量`n`应该在 omp pragma 中声明，因为它应该是线程特定的，例如`for (int n = 0;.....)`

# java - Tomcat活动线程堆积并停止服务器

> ID：10052868
> 
> 赞同：4
> 
> 时间：2012-04-07T08:06:14.430
> 
> 标签：java, tomcat, jpa, threadpool

我们的生产服务器（apache-tomcat-7.0.6）遇到了这个问题，它使用 MySQL 作为 DB 运行 Spring-JPA-Hibernate 应用程序。在此问题期间，服务器变慢，并且在一分钟内它变得无响应，活动的 tomcat 线程数达到 200 个（我们使用 javamelody 来观察这些事情）。日志看起来像：

```
2012-04-07 07:53:48,058 DEBUG AuthenticationHandler:("http-bio-7006"-exec-304):35 - Authentication handler : ~
2012-04-07 07:53:48,059 DEBUG AuthenticationHandler:("http-bio-7006"-exec-304):45 - Service Id : 1333765428059-/xxx-framework-service/platform/items/search/
2012-04-07 07:53:48,060 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-304):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:53:48,060 DEBUG JpaTransactionManager:("http-bio-7006"-exec-304):365 - Creating new transaction with name [com.xxx.framework.manager.ItemManager.search]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
2012-04-07 07:53:48,060 DEBUG JpaTransactionManager:("http-bio-7006"-exec-304):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@6aee43a9] for JPA transaction
2012-04-07 07:53:53,583 DEBUG AuthenticationHandler:("http-bio-7006"-exec-217):35 - Authentication handler : System~System
2012-04-07 07:53:53,584 DEBUG AuthenticationHandler:("http-bio-7006"-exec-217):45 - Service Id : 1333765433584-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:53:53,585 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-217):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:53:53,586 DEBUG JpaTransactionManager:("http-bio-7006"-exec-217):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:53:53,586 DEBUG JpaTransactionManager:("http-bio-7006"-exec-217):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@7cb3b78] for JPA transaction
2012-04-07 07:54:04,297 DEBUG AuthenticationHandler:("http-bio-7006"-exec-311):35 - Authentication handler : System~System
2012-04-07 07:54:04,298 DEBUG AuthenticationHandler:("http-bio-7006"-exec-311):45 - Service Id : 1333765444298-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:04,299 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-311):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:04,299 DEBUG JpaTransactionManager:("http-bio-7006"-exec-311):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:04,299 DEBUG JpaTransactionManager:("http-bio-7006"-exec-311):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@d8c7ec2] for JPA transaction
2012-04-07 07:54:05,713 DEBUG AuthenticationHandler:("http-bio-7006"-exec-252):35 - Authentication handler : System~System
2012-04-07 07:54:05,714 DEBUG AuthenticationHandler:("http-bio-7006"-exec-252):45 - Service Id : 1333765445714-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:05,715 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-252):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:05,715 DEBUG JpaTransactionManager:("http-bio-7006"-exec-252):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:05,715 DEBUG JpaTransactionManager:("http-bio-7006"-exec-252):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@685eb738] for JPA transaction
2012-04-07 07:54:16,293 DEBUG AuthenticationHandler:("http-bio-7006"-exec-282):35 - Authentication handler : System~System
2012-04-07 07:54:16,294 DEBUG AuthenticationHandler:("http-bio-7006"-exec-282):45 - Service Id : 1333765456294-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:16,295 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-282):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:16,295 DEBUG JpaTransactionManager:("http-bio-7006"-exec-282):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:16,296 DEBUG JpaTransactionManager:("http-bio-7006"-exec-282):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@6d37b108] for JPA transaction
2012-04-07 07:54:16,541 DEBUG AuthenticationHandler:("http-bio-7006"-exec-302):35 - Authentication handler : Heartbeat User~dummy_heartbeat
2012-04-07 07:54:16,542 DEBUG AuthenticationHandler:("http-bio-7006"-exec-302):45 - Service Id : 1333765456542-/xxx-framework-service/platform/skus/5500
2012-04-07 07:54:16,543 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-302):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:16,543 DEBUG JpaTransactionManager:("http-bio-7006"-exec-302):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.findById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
2012-04-07 07:54:16,543 DEBUG JpaTransactionManager:("http-bio-7006"-exec-302):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@7a973a0f] for JPA transaction
2012-04-07 07:54:19,708 DEBUG AuthenticationHandler:("http-bio-7006"-exec-236):35 - Authentication handler : System~System
2012-04-07 07:54:19,709 DEBUG AuthenticationHandler:("http-bio-7006"-exec-236):45 - Service Id : 1333765459709-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:19,710 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-236):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:19,710 DEBUG JpaTransactionManager:("http-bio-7006"-exec-236):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:19,711 DEBUG JpaTransactionManager:("http-bio-7006"-exec-236):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@342f22a9] for JPA transaction
2012-04-07 07:54:22,648 DEBUG AuthenticationHandler:("http-bio-7006"-exec-292):35 - Authentication handler : System~System
2012-04-07 07:54:22,649 DEBUG AuthenticationHandler:("http-bio-7006"-exec-292):45 - Service Id : 1333765462649-/xxx-framework-service/platform/skus/get_avaliable_count
2012-04-07 07:54:22,650 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-292):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:22,650 DEBUG JpaTransactionManager:("http-bio-7006"-exec-292):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getAvaliableCountOpt]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:22,650 DEBUG JpaTransactionManager:("http-bio-7006"-exec-292):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@5e5d2643] for JPA transaction
2012-04-07 07:54:25,751 DEBUG AuthenticationHandler:("http-bio-7006"-exec-291):35 - Authentication handler : System~System
2012-04-07 07:54:25,752 DEBUG AuthenticationHandler:("http-bio-7006"-exec-291):45 - Service Id : 1333765465752-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:25,753 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-291):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:25,753 DEBUG JpaTransactionManager:("http-bio-7006"-exec-291):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getSkuDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:25,754 DEBUG JpaTransactionManager:("http-bio-7006"-exec-291):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@28c7c70b] for JPA transaction
2012-04-07 07:54:30,811 DEBUG AuthenticationHandler:("http-bio-7006"-exec-234):35 - Authentication handler : System~System
2012-04-07 07:54:30,812 DEBUG AuthenticationHandler:("http-bio-7006"-exec-234):45 - Service Id : 1333765470812-/xxx-framework-service/platform/skus/get_avaliable_count
2012-04-07 07:54:30,813 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-234):242 - Returning cached instance of singleton bean 'transactionManager'
2012-04-07 07:54:30,814 DEBUG JpaTransactionManager:("http-bio-7006"-exec-234):365 - Creating new transaction with name [com.xxx.framework.manager.SkuServiceManager.getAvaliableCountOpt]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-04-07 07:54:30,814 DEBUG JpaTransactionManager:("http-bio-7006"-exec-234):323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@140768d6] for JPA transaction
2012-04-07 07:54:33,790 DEBUG AuthenticationHandler:("http-bio-7006"-exec-301):35 - Authentication handler : System~System
2012-04-07 07:54:33,790 DEBUG AuthenticationHandler:("http-bio-7006"-exec-301):45 - Service Id : 1333765473790-/xxx-framework-service/platform/skus/get_sku_details
2012-04-07 07:54:33,792 DEBUG DefaultListableBeanFactory:("http-bio-7006"-exec-301):242 - Returning cached instance of singleton bean 'transactionManager' 
```

并且这种事务的创建一直在发生，直到服务器达到 200 个线程（需要 1-2 分钟）并且变得无响应。我在这段时间检查了 MySQL 连接，并且计数远低于最大连接限制。

我们也进行了线程转储，但我不确定这到底是什么可能指向这样的堆积或线程。

任何进一步调试此问题的想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:09:47.307

Ok, so after analyzing thread dump we realized that somehow many threads were waiting on **awaitAvailable**() method of c3p0 library which manages DB connections in our application. We found a discussion where somebody suggested to upgrade c3p0 library(from 0.9.1.2 to 0.9.2) because old library had this issue when lot of concurrent connections are checked out of pool, the connection counter value remains bloated after check-ins and hence doesn't allow to check out new connections and results in processes to wait for connections perpetually (we had checkout timeout = 0).

But even after upgrading the library we faced this issue so we used *debugUnreturnedConnectionStackTraces* property to see what's happening to connections and why are they unavailable. After a day of logs we realized that our code which was leaking DB connections managed by c3p0\. There were few flows in our code where we were not calling rollback() specifically in catch block before closing entity Manager in finally block, so in case of exceptions connection was not coming back to pool and if frequency of exception is high(more than size of pool within timeout interval) then all other process threads would pile up to get connection.

Since that code is fixed, we haven't seen any such thread pileup problems.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T09:43:58.733

线程转储分析是前进的方向。这个问题的答案应该可以帮助你找到根本原因： [线程转储分析工具/方法](https://stackoverflow.com/questions/3156434/thread-dump-analysis-tool-method)

# mysql - 生成兰特时间

> ID：10052870
> 
> 赞同：0
> 
> 时间：2012-04-07T08:06:23.150
> 
> 标签：mysql

我想在`created`列设置随机时间值，例如：

```
UPDATE review  set created=now()-rand(1,30) 
```

但`created=now()-rand(1,30)`不起作用。如何纠正它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T08:18:00.407

您必须使用 DATE_ADD 或 DATE_SUB。

像这样的东西：

```
UPDATE
   review
SET
   created = DATE_ADD(NOW(), INTERVAL (24*RAND()) HOUR) 
```

查看[参考](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html)以了解如何使用日期和时间函数。

这是一个更复杂的示例，它生成从 25 年前开始的随机日期。

```
UPDATE 
    review
SET
    created =
      DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD(
         NOW(), 
         INTERVAL (-24*RAND())-1 YEAR),
         INTERVAL 11*RAND() MONTH),
         INTERVAL 30*RAND() DAY),
         INTERVAL 23*RAND() HOUR),
         INTERVAL 59*RAND() MINUTE),
         INTERVAL 60*RAND() SECOND) 
```

# events - 有这样的 HTML DOM 事件吗？

> ID：10052877
> 
> 赞同：0
> 
> 时间：2012-04-07T08:08:58.540
> 
> 标签：events, insert, dom

我需要一个可以绑定到 HTML DOM 文档并在将任何 HTML DOM 元素插入到 DOM 文档时运行的 HTML DOM 事件？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:22:48.487

你应该看看 Mutation DOM Events

[https://developer.mozilla.org/en/XUL/Events#Mutation_DOM_events](https://developer.mozilla.org/en/XUL/Events#Mutation_DOM_events) https://developer.mozilla.org/en/DOM/DOM_event_reference

但请注意，并非每个浏览器都会触发每个事件，您应该在不同的浏览器中使用不同的事件。

[这是一个 jsfiddle 现场演示](http://jsfiddle.net/newtang/kysTm/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:14:01.117

[在这里](https://developer.mozilla.org/en/DOM/DOM_event_reference)您可以找到所有 DOM 事件的列表。

# java - java中的字符串标记化（大文本）

> ID：10052882
> 
> 赞同：1
> 
> 时间：2012-04-07T08:10:13.300
> 
> 标签：java, string, tokenize, stringtokenizer, large-data

我有这个大文本（读大）。我需要标记每个单词，分隔每个非字母。我使用 StringTokenizer 一次读取一个单词。但是，当我正在研究如何编写分隔符字符串（“每个非字母”）而不是执行以下操作时：

```
new StringTokenizer(text, "\" ();,.'[]{}!?:”“…\n\r0123456789 [etc etc]"); 
```

我发现每个人基本上都讨厌 StringTokenizer（为什么？）。

那么，我可以用什么代替呢？不要建议 String.split 因为它会复制我的大文本。我需要逐字阅读文本并为每个非字母定界。我自己构建东西更容易还是有一些最佳实践方法来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T08:19:33.353

StringTokenizer，根据文档`"StringTokenizer is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. It is recommended that anyone seeking this functionality use the split method of String or the java.util.regex package instead."`这几乎总结了 StringTokenizer 的仇恨。

如果内存确实是一个问题，您可以逐个字符地遍历字符串和分隔符之间的子字符串，进行处理，然后继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T09:28:49.920

您可以使用Google 的[guava](/questions/tagged/guava "show questions tagged 'guava'")库中的灵活字符串[Splitter类。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)

如果您需要更强大的功能，请查看 Apache Lucene 的[StandardTokenizer](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardTokenizer.html)。从文档：

> 对于大多数欧洲语言文档，这应该是一个很好的标记器：
> 
> *   在标点符号处拆分单词，删除标点符号。但是，后面没有空格的点被视为标记的一部分。
> *   在连字符处拆分单词，除非标记中有数字，在这种情况下，整个标记被解释为产品编号并且不被分割。
> *   将电子邮件地址和 Internet 主机名识别为一个标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:36:09.683

如果你的语法很复杂，你的文件很大，你可以考虑使用[JavaCC](http://javacc.java.net/)。

当我遇到你的情况时，我会使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T15:52:05.080

Scanner.class 逐字（或逐行）读取，可用于大文件（或输入流）。

[正则表达式的模式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)可以检测空间和许多东西（看看 § 你可以在哪里找到类似 \p{..}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-07T08:27:33.530

我从来都不是正则表达式的粉丝，但我看不出仅仅使用`"[^a-zA-Z]"`StringTokenizer 有什么问题。

# python - Python双while循环不起作用，不知道为什么

> ID：10052887
> 
> 赞同：1
> 
> 时间：2012-04-07T08:11:02.950
> 
> 标签：python

我知道也许使用“for”代码可能会很清楚，但我想了解为什么这段代码不起作用。此外，该代码是对 2008 年 MIT OCW 课程练习的改编，其中允许使用的唯一函数是算术函数，if、elif、else、print 和 while。需要指出的是，代码应该打印出前 1000 个素数。

```
print '2, '      #Print the prime 2 to set only odd primes.
primesofar=3     #Set 3 as the first prime
primecounter=1   #Mark 3 as the first prime to test until 1000, otherwise the while below should test to 1001
primesupport=1   #Create primesupport with a integer value
while primecounter<1000:
    primesupport=primesofar/2  #Create a support counter for test the prime. This counter only had to have the half value of the supposed prime, because we only need to try to divide by the primes that are lower than the half of the suppposed prime. In fact it would be better to test for values that are lower than the square root of the supposed prime, but we can't use square root operation yet.
    while primesupport>0:
      if primesofar%primesupport == 0:
        primesupport=-1       #If the remainer of the division is 0, the number isn't prime because it will have more than two divisors so we set primesupport as -1 to exit the while and increase the current primesofar to the next odd number.
        primesofar=primesofar+2
      elif primesupport==1:   #If primesupport is 1, we tested all the numbers below the half of the supposed prime which means the number is prime. So we print it, set the while exit and increase the number of primes counted and go to the next odd number.
        print primesofar+', '
        primesofar=primesofar+2
        primesupport=-1
        primecounter=primecounter+1
      else: 
        primesupport=primesupport-1 
```

感谢您的快速响应，现在我认为代码中可能存在我看不到的中断。因此，我将尝试写下我认为代码应该执行的操作，以便您更容易指出我在哪里犯了错误。让我们开始吧：primesofar 收到 3；primecounter 接收 1 并且 primesupport 接收 1。第一个 while 测试 primecounter 并且由于 primesupport 小于 1000，它进入循环。然后，primesupport值变为1，因为3/2=1 由于primesupport大于0，进入第二个while循环。if 条件为真（3%1=0）所以代码输入 if，将 primesupport 更改为 -1 并将 primesofar 增加 2。（现在 primesupport=-1 和 primesofar=5）这里有问题，因为它离开不打印 3，但让我们继续。当它返回到第二个 while 时，它​​将收到一个 False，因为 -1 不大于 0。这将使代码测试第一个 while，并且由于 primecounter 没有更改，它将再次进入循环。Primesupport 现在将收到 2（因为 5/2=2）它将进入第二个循环并通过所有循环，直到出现 else 条件。Primesupport 将减一（primesupport now =1），while 循环将继续进入 elif。这将打印 5 增加 primesofar 到 7 减少 primesupport 以离开 while 循环并增加 primecounter，回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。这将使代码在第一个 while 中进行测试，并且由于 primecounter 没有更改，它将再次进入循环。Primesupport 现在将收到 2（因为 5/2=2）它将进入第二个循环并通过所有循环，直到出现 else 条件。Primesupport 将减一（primesupport now =1），while 循环将继续进入 elif。这将打印 5 增加 primesofar 到 7 减少 primesupport 以离开 while 循环并增加 primecounter，回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。这将使代码在第一个 while 中进行测试，并且由于 primecounter 没有更改，它将再次进入循环。Primesupport 现在将收到 2（因为 5/2=2）它将进入第二个循环并通过所有循环，直到出现 else 条件。Primesupport 将减一（primesupport now =1），while 循环将继续进入 elif。这将打印 5 增加 primesofar 到 7 减少 primesupport 以离开 while 循环并增加 primecounter，回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。Primesupport 现在将收到 2（因为 5/2=2）它将进入第二个循环并通过所有循环，直到出现 else 条件。Primesupport 将减一（primesupport now =1），while 循环将继续进入 elif。这将打印 5 增加 primesofar 到 7 减少 primesupport 以离开 while 循环并增加 primecounter，回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。Primesupport 现在将收到 2（因为 5/2=2）它将进入第二个循环并通过所有循环，直到出现 else 条件。Primesupport 将减一（primesupport now =1），while 循环将继续进入 elif。这将打印 5 增加 primesofar 到 7 减少 primesupport 以离开 while 循环并增加 primecounter，回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。回到第一个循环并重新开始。我承认，除了没有按预期打印的 3 之外，我看不出我在哪里犯了错误。希望你能指出我。

感谢大家的帮助，特别是 FallenAngel、John Machin、DiamRem 和 Karl Knechtel 指出错误并展示了调试方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:06:16.757

我放置了一些`print`语句，这是您的程序给出的输出：

```
primesupport 1
primesofar 5
primesupport 2
primesupport 1
primesofar 7
primesupport 3
primesupport 2
primesupport 1
primesofar 9
primesupport 4
primesupport 3
primesofar 11
primesupport 5
primesupport 4
primesupport 3
primesupport 2
primesupport 1
primesofar 13
primesupport 6
primesupport 5
primesupport 4
primesupport 3
primesupport 2
primesupport 1
primesofar 15
primesupport 7
primesupport 6
primesupport 5
primesofar 17
primesupport 8
primesupport 7
... 
```

您的代码永远不会进入`elif primesupport==1:`块，所以`primecounter`永远不会增加......

用于测试的是：

```
while primecounter<2:
primesupport=primesofar/2
print 'primesupport %s' % primesupport
while primesupport>0:
    if primesofar%primesupport == 0:
        primesupport=-1 
        primesofar=primesofar+2
        print 'primesofar %s' % primesofar
    elif primesupport==1:
        print primesofar+', '
        primesofar=primesofar+2
        primesupport=-1
        primecounter=primecounter+1
        print 'primesofar %s' % primesofar
        print 'primesupport %s' % primesupport
        print 'primecounter %s' % primecounter
    else:
        primesupport=primesupport-1
        print 'primesupport %s' % primesupport 
```

原因是，最终`else`块减少`primesupport`到 1，然后在下一个循环中，`if primesofar%primesupport == 0:`返回 true 并执行该块，增加`primesofar`2 并开始新的质数检查......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:07:56.527

您需要在测试`primesupport == 1`之前进行测试，`primesofar % primesupport == 0`因为`any_integer % 1`始终为 0，并且您想要在`primesupport == 1`没有发生时执行的代码。

当你修复它时，你会发现它`print primesofar+',`不起作用......你应该能够自己修复它。

您可以部署的最基本的有效调试技术是 (1) 使用一小组数据，以便您可以理解正在发生的事情，并且您只需一支铅笔和一张纸就可以检查结果 (2)打印出正在发生的事情。

(1)`while primecounter < 5:`

(2) 在第二次之后，

`print "sofar, support, count", primesofar, primesupport, primecounter`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:44:43.800

```
if primesofar%primesupport == 0:
    primesupport=-1 
```

当代码到达这一点时，内部循环将被打破而不`primecounter`改变。代码将以相同的`primecounter`值重复相同的步骤，并且必然到达相同的点；没有办法打破外循环。

（尽管跳出循环的正确方法是使用`break`.）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T08:30:54.590

我认为这是问题所在：

你被卡住了，因为 primesofar=3 和 python 3/2 = 1，所以如果 primesofar%primesupport == 0: 这是真的，因为 1%1 = 0 在 python 和代码中如果 primesofar 是 1+2，那么 primesofar 又是 3 并且你在永恒中从一段时间跳到另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T09:20:57.073

您的代码的问题在于，每次 primecounter 变为 1 时，您都在检查 primesofar%primesupport == 0，它总是会这样做。所以你的程序永远不会进入 elif 和 else 部分。因此素数计数器永远不会增加。所以这将是一个无限循环。

您可以通过在 if primesofar%primesupport == 0 之后放置一个打印语句来检查这一点：

```
if primesofar%primesupport == 0:
    print primesofar 
```

在检查 primesofar%primesupport == 0 之前，您可以通过检查 primesupport==1 来纠正它：

```
print '2, '      #Print the prime 2 to set only odd primes.
primesofar=3     #Set 3 as the first prime
primecounter=1   #Mark 3 as the first prime to test until 1000, otherwise the while below should test to 1001
primesupport=1   #Create primesupport with a integer value
while primecounter<1000:
    primesupport=primesofar/2  #Create a support counter for test the prime. This counter only had to have the half value of the supposed prime, because we only need to try to divide by the primes that are lower than the half of the suppposed prime. In fact it would be better to test for values that are lower than the square root of the supposed prime, but we can't use square root operation yet.
    while primesupport>0:
        if primesupport==1:   #If primesupport is 1, we tested all the numbers below the half of the supposed prime which means the number is prime. So we print it, set the while exit and increase the number of primes counted and go to the next odd number.
            print primesofar
            primesofar=primesofar+2
            primesupport=-1
            primecounter=primecounter+1
        elif primesofar%primesupport == 0:
            primesupport=-1       #If the remainer of the division is 0, the number isn't prime because it will have more than two divisors so we set primesupport as -1 to exit the while and increase the current primesofar to the next odd number.
            primesofar=primesofar+2
        else: 
            primesupport=primesupport-1 
```

此代码将为您打印 1000 个素数。

顺便说一句，你不能用 + 连接 str 和 int。你可以只打印素数。打印语句将自动添加换行符。

# c# - 在作为参考传递时委托行为

> ID：10052889
> 
> 赞同：0
> 
> 时间：2012-04-07T08:11:46.113
> 
> 标签：c#

我正在和代表们玩耍，我遇到了我不确定发生了什么的情况。

在我的逻辑中，“问候”委托的调用列表应该返回 2，但它只返回 1。如您所见，我将委托引用传递给我创建的对象。我想确认委托可以从外部引用私有方法，唯一的要求是在将方法分配给委托期间可以访问该方法。

```
 class Program
    {
        static void Main(string[] args)
        {
            Action greetings = FirstGreeting;

            Test test = new Test();
            test.AddGreeting(greetings);

            Console.WriteLine(greetings.GetInvocationList().Count());

            greetings();

            Console.ReadLine();
        }

        static void FirstGreeting()
        {
            Console.WriteLine("This is the first greeting.");
        }
    }

    class Test
    {
        public void AddGreeting(Action greetings)
        {
            greetings += new Action(SecondGreeting);
        }

        private void SecondGreeting()
        {
            Console.WriteLine("This is the second greeting.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:27:06.173

> 如您所见，我将委托引用传递给我创建的对象。

是的，但是您正在使用：

```
greetings += new Action(SecondGreeting); 
```

这会创建一个*新*的委托 - 它不会更改*现有的*委托。委托是不可变的，就像字符串一样。如果您真的希望代码以您期望的方式工作，您必须使用：

```
public void AddGreeting(ref Action greetings)
{
    greetings += new Action(SecondGreeting);
} 
```

并将其称为

```
test.AddGreeting(ref greetings); 
```

（或返回对新委托的引用，如彼得的回答所示。）

请参阅我[关于代表和事件](http://csharpindepth.com/Articles/Chapter2/Events.aspx)的文章，以了解有关功能的更多详细信息`+=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:31:48.957

我刚刚试过你的代码，可以明白你的意思。如果您在`AddGreeting()`方法中添加一行打印出调用列表，您将在其中看到两个方法。但正如 Jon Skeet 指出的那样，委托是不可变的，您还没有返回创建的新（多播）委托。

我建议您将方法更改为：

```
public Action AddGreeting(Action greetings)
{
    return greetings + new Action(SecondGreeting);
} 
```

因为这将为您提供正确的调用集。

# actionscript-3 - 装载机悬挂问题

> ID：10052891
> 
> 赞同：1
> 
> 时间：2012-04-07T08:11:48.613
> 
> 标签：actionscript-3, flash, loading

我有一个加载主应用程序的加载器。一切正常，除了一个问题：

加载主应用程序时，加载程序中的动画会冻结几秒钟（5-8）。我认为在这 5-8 秒内，主应用程序会创建它的对象。

我试图最小化主应用程序中的对象数量，它确实有所帮助，但冻结问题仍然存在。

有人遇到过这样的问题吗？如何加载内容而不冻结？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:05:30.537

我假设这是因为 main 中的其他 SWF 不完整而发生的，所以发生的事情是您的“电影”加载了“第二部电影”，而第二个“电影”此时创建了它的对象，它冻结了。这会发生，因为第二部电影可能已经加载，但它初始化了所有内容。

为了解决这个问题，您需要隐藏第二部电影，直到它完全完成创建对象而不是展示自己，或者在第二部电影中创建一个调用，让第一部电影我完成我的事情（）

如果你需要，我前段时间已经做了一个例子，我可以为你放在我的服务器上。

# jquery-mobile - 如何使用 jquery mobile 为可折叠对象的打开和关闭设置动画？

> ID：10052892
> 
> 赞同：1
> 
> 时间：2012-04-07T08:11:59.333
> 
> 标签：jquery-mobile

我正在使用 Jquery mobile 并做一些自定义的东西。

默认的可折叠对象似乎只是立即“显示”隐藏的内容，我觉得这对用户有点不友好。这样做会出现一些问题，如果按钮位于屏幕底部，并且隐藏的内容不在屏幕上，那么用户可能不知道任何事情都发生了。

在我看来，应该发生两件事。

1.  内容应该是slideDown()。
2.  我应该可以选择让页面向下滚动，以便按钮位于屏幕顶部，这样做可以保证以前隐藏的内容是可见的。

关于我如何做这些中的任何一个的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:21:16.390

如果我理解正确，您说的是可折叠的内容块，当用户点击标题时，它应该向下滚动一点，以便向用户显示正文部分。您可以通过将点击事件附加到触发滚动的标题来实现。在下面的代码中，我将其作为动画完成。我还用 -40px 调整了滚动位置，这样用户仍然可以看到标题顶部的部分元素。

```
$('.ui-collapsible-heading-collapsed').on('click.scrollintoview', function (event) {                        
    $('body').animate({ scrollTop: $(event.target).offset().top - 40}, 500);
}); 
```

# springboard - 在 iphone 跳板上阻止传入警报

> ID：10052894
> 
> 赞同：0
> 
> 时间：2012-04-07T08:12:10.340
> 
> 标签：springboard

我正在尝试在 iOS 5 中拦截传入的短信，代码是

```
HOOK(CKSMSService,_receivedMessage$replace$postInternalNotification$,void,CKSMSRecordRef arg,BOOL arg2,BOOL arg3){
//NSLog(@"received message  %@", message);
CALL_ORIG(CKSMSService,_receivedMessage$replace$postInternalNotification$,arg,arg2,arg3);
} 
```

此代码有效，但通知弹出窗口仍然出现，所以我如何阻止此弹出窗口出现。

# algorithm - 根据霍纳的方案，将多项式的解析树转换为其评估的解析树

> ID：10052896
> 
> 赞同：3
> 
> 时间：2012-04-07T08:12:22.673
> 
> 标签：algorithm, expression-trees, compiler-optimization, parse-tree, expression-templates

您能否指出一种算法，该算法采用（二进制）解析树来评估单个变量中的多项式表达式，并返回一个等效的解析树，该解析树根据霍纳规则评估多项式。

预期的用例在表达式模板中。这个想法是，对于一个矩阵`x`，解析树从

```
a + bx + c * x*x + d * x*x*x... 
```

会被优化成对应的解析树

```
a + x *( b + x( c + x*d)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:47:07.577

您可以使用以下转换。

*假设*：多项式的解析树按指数递增的顺序排列——如果这个假设不成立，则可以在解析树中交换部分多项式以使假设成立

*假设*：解析树保存变量的指数形式（例如`x^2`）而不是乘法形式（例如`x*x`），除了`x^0`——简单的转换可以在两个方向之间进行转换

*假设*：多项式中的系数（如果恒定）不为零——这是为了避免必须处理 ( `a+0*x+c*x^2`->`a+x(cx)`而不是`a+cx^2`)

解析树`a+b*x^1+c*x^2+d*x^3`：

```
 .+..
 /    \
a   ...+....
   /        \
  *         .+..
 / \       /    \
b  ^      *      *
  / \    / \    / \
 x   1  c   ^  d   ^
           / \    / \
          x   2  x   3 
```

转换为`a+x(b+c*x^1+d*x^2)`

```
 +
 / \
a   *
   / \
  x   +
     / \
    b   .+..
       /    \
      *      *
     / \    / \
    c   ^  d   ^
       / \    / \
      x   1  x   2 
```

转换为`a+x(b+x(c+d*x^1))`

```
 +
 / \
a   *
   / \
  x   +
     / \
    b   *
       / \
      x   +
         / \
        c   *
           / \
          d   ^
             / \
            x   1 
```

然后最后（`a+x(b+x(c+d*x))`）：

```
 +
 / \
a   *
   / \
  x   +
     / \
    b   *
       / \
      x   +
         / \
        c   *
           / \
          d   x 
```

常见的转换是：

```
 .            ->    .
  .           ->     .
   .          ->      .
    +         ->      .*..
   / \        ->     /    \
  *   N(k+1)  ->    ^      +
 / \          ->   / \    / \
ck  ^         ->  x   k  ck  N'(k+1)
   / \        -> 
  x   k       -> 
```

其中是与每个指数替换`N'(k+1)`为相同的子树（如果为 1，则将子树替换为）`N(k+1)``j``j-k``k``x^k``x`

然后再次应用该算法（*），`N'(k+1)`直到其根为`*`（而不是`+`），表明达到了最终的部分多项式。如果最终指数为 1，则将指数部分替换为`x`( `x^1`-> `x`)

(*) 这里是递归部分

*注意*：如果您累积跟踪`N(k+1)`子树中的指数变化，您可以将最后两个步骤放在一起进行`N(k+1)`递归转换

*注意*：如果你想允许负指数，那么要么

a) 提取最大的负指数作为第一项：

```
a*x^-2 + b*x^-1 + c + d*x + e*x^2  ->  x^-2(a+b*x+c*x^2+d*x^3+d*x^4) 
```

并应用上述转换

或 b) 分离方程的正指数部分和负指数部分，并分别对每个部分应用上述变换（您需要“翻转”负指数侧的操作数并用除法替换乘法）：

```
a*x^-2 + b*x^-1 + c + d*x + e*x^2  ->  [a+x^-2 + b*x-1] + [c + d*x + e*x^2] ->
-> [(a/x + b)/x] + [c+x(d+ex)] 
```

这种方法似乎比 a) 更复杂

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T15:55:18.790

你只需要应用以下规则，直到你不能再应用它们。

```
((x*A)*B)     -> (x*(A*B))
((x*A)+(x*B)) -> (x*(A+B)))
(A+(n+B))     -> (n+(A+B))  if n is a number 
```

where`A`和`B`是子树。

这是执行此操作的 OCaml 代码：

```
type poly = X | Num of int | Add of poly * poly | Mul of poly * poly

let rec horner = function
  | X -> X
  | Num n -> Num n
  | Add (X, X) -> Mul (X, Num 2)
  | Mul (X, p)
  | Mul (p, X) -> Mul (X, horner p)
  | Mul (p1, Mul (X, p2))
  | Mul (Mul (X, p1), p2) -> Mul (X, horner (Mul (p1, p2)))
  | Mul (p1, p2) -> Mul (horner p1, horner p2) (* This case should never be used *)
  | Add (Mul (X, p1), Mul (X, p2)) -> Mul (X, horner (Add (p1, p2)))
  | Add (X, Mul (X, p))
  | Add (Mul (X, p), X) -> Mul (X, Add (Num 1, horner p))
  | Add (Num n, p)
  | Add (p, Num n) -> Add (Num n, horner p)
  | Add (p1, Add (Num n, p2))
  | Add (Add (Num n, p1), p2) -> Add (Num n, horner (Add (p1, p2)))
  | Add (p1, p2) -> horner (Add (horner p1, horner p2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:17:19.067

您可以通过递归函数获得树的[单项式系数](http://en.wikipedia.org/wiki/Monomial_basis)。转换这些系数并根据霍纳定律得到一个表达式很[简单](http://en.wikipedia.org/wiki/Horner%27s_method)。

我可以给你一个简单的递归函数来计算这些值，即使*可能*存在一个更有效的函数。

### 理论的东西

首先，让我们制定表达式。一个表达式`E`：

```
E = a0 + a1x + a2x^2 + ... + anx^n 
```

可以写成 (n+1) 元组：

```
(a0, a1, a2, ..., an) 
```

然后，我们定义两个操作：

*   加法：给定两个表达式`E1 = (a0, ..., an)`and `E2 = (b0, ..., bm)`，对应的元组`E1 + E2`为：

    ```
     {(a0+b0, a1+b1, ..., am+bm, a(m+1), ..., an) (n > m)
    E1 + E2 = {(a0+b0, a1+b1, ..., an+bn, b(n+1), ..., bm) (n < m)
              {(a0+b0, a1+b1, ..., an+bn)                  (n = m) 
    ```

    也就是说，有`max(n,m)+1`元素，`i`^(第 th 个)元素由（使用 C-ish 语法）计算：

    ```
    i<=n?ai:0 + i<=m?bi:0 
    ```

*   乘法：给定两个表达式`E1 = (a0, ..., an)`和`E2 = (b0, ..., bm)`，对应的元组`E1 * E2`是：

    ```
    E1 * E2 = (a0*b0, a0*b1+a1*b0, a0*b2+a1*b1+a2*b0, ... , an*bm) 
    ```

    也就是说，有`n+m+1`元素，`i`^(第 th 个)元素由下式计算

    ```
    sigma over {ar*bs | 0<=r<=n, 0<=s<=m, r+s=i} 
    ```

因此递归函数定义如下：

```
tuple get_monomial_coef(node)
    if node == constant
        return (node.value)  // Note that this is a tuple
    if node == variable
        return (0, 1)        // the expression is E = x
    left_expr = get_monomial_coef(node.left)
    right_expr = get_monomial_coef(node.right)
    if node == +
        return add(left_expr, right_expr)
    if node == *
        return mul(left_expr, right_expr) 
```

在哪里

```
tuple add(tuple one, tuple other)
    n = one.size
    m = other.size
    for i = 0 to max(n, m)
        result[i] = i<=n?one[i]:0 + i<=m?other[i]:0
    return result

tuple mul(tuple one, tuple other)
    n = one.size
    m = other.size
    for i = 0 to n+m
        result[i] = 0
        for j=max(0,i-m) to min(i,n)
            result[i] += one[j]*other[i-j]
    return result 
```

注意：在 的实现中`mul`，应该从到`j`迭代，同时还必须满足以下条件：`0``i`

```
j <= n (because of one[j])
i-j <= m (because of other[i-j]) ==> j >= i-m 
```

因此，`j`可以从`max(0,i-m)`and `min(i,n)`（等于`n`since `n <= i`）

### C++ 实现

现在您有了伪代码，实现应该不难。对于元组类型，一个简单的`std::vector`就足够了。所以：

```
vector<double> add(const vector<double> &one, const vector<double> &other)
{
    size_t n = one.size() - 1;
    size_t m = other.size() - 1;
    vector<double> result((n>m?n:m) + 1);
    for (size_t i = 0, size = result.size(); i < size; ++i)
        result[i] = (i<=n?one[i]:0) + (i<=m?other[i]:0);
    return result;
}

vector<double> mul(const vector<double> &one, const vector<double> &other)
{
    size_t n = one.size() - 1;
    size_t m = other.size() - 1;
    vector<double> result(n + m + 1);
    for (size_t i = 0, size = n + m + 1; i < size; ++i)
    {
        result[i] = 0.0;
        for (size_t j = i>m?i-m:0; j <= n; ++j)
            result[i] += one[j]*other[i-j];
    }
    return result;
}

vector<double> get_monomial_coef(const Node &node)
{
    vector<double> result;
    if (node.type == CONSTANT)
    {
        result.push_back(node.value);
        return result;
    }
    if (node.type == VARIABLE)
    {
        result.push_back(0.0);
        result.push_back(1);  // be careful about floating point errors
                              // you might want to choose a better type than
                              // double for example a class that distinguishes
                              // between constants and variable coefficients
                              // and implement + and * for it
        return result;
    }
    vector<double> left_expr = get_monomial_coef(node.left);
    vector<double> right_expr = get_monomial_coef(node.right);
    if (node.type == PLUS)
        return add(left_expr, right_expr);
    if (node.type == MULTIPLY)
        return mul(left_expr, right_expr);
    // unknown node.type
}

vector<double> get_monomial_coef(const Tree &tree)
{
    return get_monomial_coef(tree.root);
} 
```

注意：此代码未经测试。它可能包含错误或错误检查不足。确保你理解它并自己实现它，而不是复制粘贴。

从这里开始，您只需要根据此函数为您提供的值构建一个表达式树。

# python - 推特/社交数据挖掘——Ruby 还是 Django？

> ID：10052900
> 
> 赞同：1
> 
> 时间：2012-04-07T08:13:14.060
> 
> 标签：python, ruby-on-rails, ruby, django

我是一个不错的 c/c++ 程序员，但对 web 开发知之甚少。我对推特/社交数据挖掘感兴趣。那么哪个是更好的工具 - RoR 或 Django？我在 ruby​​ 和 python 中都处于零级。但是 python 的语法似乎更容易理解/学习。但主要的问题是哪个工具有更好的挖掘相关 API？

谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T08:22:10.380

他们都有你需要的一切。但我认为 Python 在这里做得更好。Python 有一个非常有趣的文本挖掘库，称为[NLTK](http://www.nltk.org/)和[Numpy/Scipy](http://numpy.scipy.org)用于分析计算，它可以让您获得几乎 c 的可比性能。另一方面，对于纯数据挖掘，我建议使用 python+ [Pandas](http://pandas.pydata.org/)（Pandas 写得很好，速度很快，据我所知没有 ruby​​ 等价物）或 python + 一些称为 thru [rpy](http://rpy.sourceforge.net/)的 R 代码。如果在您的数据挖掘代码中您需要计算一些符号数学，您可以决定使用[Sympy](http://code.google.com/p/sympy/)（速度较慢，因为它是用 python 编写但非常完整）或[Theano](http://deeplearning.net/software/theano/)（速度更快但功能较少；它甚至可以让您的代码在 GPU 上运行通过 CUDA）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:19:59.457

如果您只是从 twitter 收集数据，则不需要像 Django 或 RoR 这样的 MVC 框架。实际上，您可以使用[C++ 库](https://dev.twitter.com/docs/twitter-libraries#cplusplus)从 Twitter 收集数据，将它们存储在数据库中，建立索引等，然后使用 C 或 C++ 对您的数据执行数据挖掘任务。或者，您可以随时随地进行分析。

如果您想构建自己的 Web 界面来展示您的工作，或者类似的，Django 和 RoR 都是非常好的且易于上手的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:16:34.323

这不是一个真正的问题，请阅读[常见问题解答](https://stackoverflow.com/faq)

# fft - Apple FFT Accelerate Framework Inverse FFT from Array of Real Numbers

> ID：10052901
> 
> 赞同：0
> 
> 时间：2012-04-07T08:13:21.267
> 
> 标签：fft, inverse

I am using the accelerate framework FFT functions to produce a spectrogram of a sound sample. This part works great. However, I want to (effectively) manipulate the spectrum directly (ie manipulate the real numbers), and then call the inverse again, how would I go about doing that? It looks like the INVERSE call expects an array of IMAGINARY numbers, but how can I produce that from my manipulated real numbers? I have tried making the realp array my reals, and the imagp part zero, but that doesn't seem to work.

The reason I ask this is because I wish to run an FFT on a voice audio sample, and then run the FFT again and then lifter the low part of the cepstrum (thus hopefully separating the vocal tract components from the pitch) and then run an inverse FFT again to produce a spectrogram showing the vocal tract (formant) information more clearly (ie, without the pitch information). However, I seem to be running into problems on the inverse FFT, into which I am passing in my real values (cepstrum) in the realp array and the imagp is zero. I think I am doing something wrong here and the results are unexpected.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:00:26.273

您需要处理复杂的正向 FFT 结果，而不是实际幅度，否则 IFFT 结果频谱的形状会失真。不要将它们视为虚数，将它们视为包含所需角相位信息的 2D 矢量的一部分。

如果您的倒谱提升器/滤波器仅改变实际幅度，那么您可以尝试使用实际幅度的变化量作为比例因子，在执行复数 IFFT 之前更改前向复数 FFT 结果。

# jquery - How to hyerlink in a jquery function

> ID：10052908
> 
> 赞同：-1
> 
> 时间：2012-04-07T08:15:34.543
> 
> 标签：jquery, hyperlink, onclick

I need to hide some buttons, show others then hyperlink to a new web page using a button's onclick event.

I have the hidden/visible code working in a jquery function but don't know (and have tried to find out) how to add the hyperlink call to the function.

Do I have to add a hidden button and use ".click" or is there a better way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:38:38.043

在您在 onclick 事件中添加的此功能中，您想将用户重定向到另一个 url？如果我理解正确，你想在你的函数中使用的可能是：

```
window.location.href = "http://thesite.com"; 
```

# in-app-purchase - 应用内购买保持游戏循环

> ID：10052909
> 
> 赞同：1
> 
> 时间：2012-04-07T08:15:39.793
> 
> 标签：in-app-purchase, game-loop

在我的 iPhone/iPad 游戏应用上，当用户点击购买/购买按钮时，会弹出一个应用内购买对话框，整个游戏循环都卡住了。我希望在处理应用内购买时游戏循环仍在更新。

请有人指点我的解决方案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:24:02.177

您可以将游戏循环移动到另一个线程，直到主线程被中断。

# java-me - How to put the selected Date of Calendar into a textfield in LWUIT 1.4 of J2ME

> ID：10052911
> 
> 赞同：1
> 
> 时间：2012-04-07T08:15:57.807
> 
> 标签：java-me, lwuit

I am a new in the J2ME. I have searched a lot on the J2ME tutorial, but I did not find an answer. I am using the calendar component in LWUIT 1.4 and I want to set the selected date of the calendar into the textfield. I also used [this link](https://stackoverflow.com/questions/6148862/how-to-add-calendar-in-lwuit-textfield-or-combobox). But it did not work, it only shows the calendar and the `getDate()` function did not work in the LWUIT 1.4\. Please suggest any better books or tutorials for the J2ME with LWUIT 1.4. here is my code:

txtDOB.addActionListener(new ActionListener() {

```
 public void actionPerformed(ActionEvent arg0) {
           // throw new UnsupportedOperationException("Not supported yet.");

             final Form calFrame = new Form();
                final Calendar cal = new Calendar();
                calFrame.setScrollable(true);
                calFrame.setSmoothScrolling(true);
                calFrame.setIsScrollVisible(true);
                cal.addDataChangeListener(new DataChangedListener() {

                public void dataChanged(int arg0, int arg1) {
                txtDOB.setText(cal.getDate());  //textfield which was shown error of unknown symbole.
                        ffregs.showBack();
                }
            });

                calFrame.addComponent(cal);
                calFrame.show();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:11:00.087

[Codename One 博客](http://codenameone.blogspot.com)中有很多教程，LWUIT 的好处是你可以在谷歌中输入任何问题，你会得到很多结果。

日历组件有一些限制，据我回忆，这些限制在 1.5 中已修复。但是，无论如何，现在大部分开发工作都在[Codename One中进行。](http://www.codenameone.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:58:04.547

你的问题到底是什么？你能显示一些代码吗？我认为如果您可以将整个问题分解为一小段代码，您会发现您的问题会产生更成功的答案。并显示该代码。

话虽如此，我已经看到了一个很好的 LWUIT 教程。 [看一看。](http://java.sun.com/developer/technicalArticles/javame/lwuit_intro/)

这很容易成为我发现甚至听说过的最佳参考。如果您需要更多建议而不仅仅是一个链接，请发布更多代码。

# python - How to sort dictionaries of objects by attribute value?

> ID：10052912
> 
> 赞同：23
> 
> 时间：2012-04-07T08:15:58.920
> 
> 标签：python, sorting, dictionary, attributes

I would like to iterate over a dictionary of objects in an attribute sorted way

```
import operator

class Student:
    def __init__(self, name, grade, age):
        self.name = name
        self.grade = grade
        self.age = age

studi1 = Student('john', 'A', 15)
studi2 = Student('dave', 'B', 10)
studi3 = Student('jane', 'B', 12)

student_Dict = {}
student_Dict[studi1.name] = studi1
student_Dict[studi2.name] = studi2
student_Dict[studi3.name] = studi3

for key in (sorted(student_Dict, key=operator.attrgetter('age'))):
    print(key) 
```

This gives me the error message: `AttributeError: 'str' object has no attribute 'age'`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-07T08:23:39.743

```
for student in (sorted(student_Dict.values(), key=operator.attrgetter('age'))):
    print(student.name) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T08:35:08.733

```
>>> for key in sorted(student_Dict, key = lambda name: student_Dict[name].age):
...     print key
... 
dave
jane
john 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T12:53:24.290

```
class Student:
    def __init__(self, name, grade, age):
            self.name = name
            self.grade = grade
            self.age = age
    def __repr__(self):
            return repr((self.name, self.grade, self.age))

student_objects = [
    Student('john', 'A', 15),
    Student('jane', 'B', 12),
    Student('dave', 'B', 10),
]
print student_objects
student_objects.sort(key=attrgetter('age'))
print student_objects 
```

来源：[https ://wiki.python.org/moin/HowTo/Sorting](https://wiki.python.org/moin/HowTo/Sorting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T08:20:09.580

如何在[排序](http://wiki.python.org/moin/HowTo/Sorting)方法的文档中显示

```
sorted(student_Dict.keys(), key=lambda student: student.age) 
```

# ajax - How to improve SEO while using MVC with AJAX

> ID：10052913
> 
> 赞同：1
> 
> 时间：2012-04-07T08:16:03.633
> 
> 标签：ajax, model-view-controller, seo

I am developing a site using asp.net MVC. I have used AJAX for paging,sorting dropdown fillup,showing different content on link click etc. I came to know that AJAX call is always against SEO and SEO is most important for my site. Please suggest me ways to improve SEO of my site without removing AJAX.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:01:35.123

您应该从一开始就使用渐进增强。您的网站应该可以在不启用 JavaScript/Ajax 的情况下运行。这样，包括搜索引擎在内的所有用户都可以访问您的内容。然后，您应该通过添加 JavaScript 和 Ajax 来*增强*用户体验，以提供更好的体验。

在这一点上，你没有很多选择。您需要返回并在没有 JavaScript 的情况下提供该内容。您也可以使用[Google 的可抓取 Ajax 标准](http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html)，但这仅适用于 Google，而且您可以通过稍微多一点的工作使每个搜索引擎和每个用户都能够访问您的内容，而无需使用您的网站所需的 JavaScript .

# c# - Check if array is null or empty?

> ID：10052914
> 
> 赞同：9
> 
> 时间：2012-04-07T08:16:15.187
> 
> 标签：c#

I have some problem with this line of code:

```
if(String.IsNullOrEmpty(m_nameList[index])) 
```

What have I done wrong?

EDIT: The m_nameList is underlined with red color in VisualStudio, and it says "the name 'm_nameList' does not exist in the current context"??

EDIT 2: I added some more code

```
 class SeatManager
{
    // Fields
    private readonly int m_totNumOfSeats;

    // Constructor
    public SeatManager(int maxNumOfSeats)
    {
        m_totNumOfSeats = maxNumOfSeats;

        // Create arrays for name and price
        string[] m_nameList = new string[m_totNumOfSeats];
        double[] m_priceList = new double[m_totNumOfSeats];
    }

    public int GetNumReserved()
    {
        int totalAmountReserved = 0;

        for (int index = 0; index <= m_totNumOfSeats; index++)
        {
            if (String.IsNullOrEmpty(m_nameList[index]))
            {
                totalAmountReserved++;
            }
        }
        return totalAmountReserved;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-07T08:18:26.937

If `m_nameList` is null, that will still blow up, because it will try to find the element to pass to `String.IsNullOrEmpty`. You'd want:

```
if (m_nameList == null || String.IsNullOrEmpty(m_nameList[index])) 
```

That's *also* assuming that `index` is going to be valid if `m_nameList` is non-null.

Of course, this is checking if the *element* of an array is null or empty, or if the array reference itself is null. If you *just* want to check the array itself (as your title suggests) you want:

```
if (m_nameList == null || m_nameList.Length == 0) 
```

EDIT: Now we can see your code, there are *two* problems:

*   As Henk showed in his answer, you're trying to use a *local* variable when you need a field
*   You're *also* going to get an `ArrayIndexOutOfBoundsException` (once you've used a field) due to this:

    ```
    for (int index = 0; index <= m_totNumOfSeats; index++) 
    ```

    That will perform `m_totNumOfSeats + 1` iterations because of your bound. You want:

    ```
    for (int index = 0; index < m_totNumOfSeats; index++) 
    ```

    Note that `m_nameList[m_totNumOfSeats]` is *not* valid, because array indexes start at 0 in C#. So for an array of 5 elements, the valid indexes are 0, 1, 2, 3, 4.

Another option for your `GetNumReserved` method would be to use:

```
int count = 0;
foreach (string name in m_nameList)
{
    if (string.IsNullOrEmpty(name))
    {
        count++;
    }
}
return count; 
```

Or using LINQ, it's a one-liner:

```
return m_nameList.Count(string.IsNullOrEmpty); 
```

(Are you sure you haven't got it the wrong way round though? I would have thought reservations would be the ones where the name *isn't* null or empty, not the ones where it *is* null or empty.)

If it's the wrong way round, it would be this instead in LINQ:

```
return m_nameList.Count(name => !string.IsNullOrEmpty(name)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T08:43:34.180

在Edit2之后：

您定义 `m_nameList`为构造函数的局部变量。
您的其余代码需要它作为一个字段：

```
class SeatManager
{       
   // Fields
   private readonly int m_totNumOfSeats;
   private string[] m_nameList;
   private double[] m_priceList;

  // Constructor
  public SeatManager(int maxNumOfSeats)
  {
     m_totNumOfSeats = maxNumOfSeats;

     // Create arrays for name and price
     m_nameList = new string[m_totNumOfSeats];
     m_priceList = new double[m_totNumOfSeats];
  }

  ....
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T08:24:01.643

为避免该错误，您可以在 if 中执行一些前置条件，如下所示：

```
if(m_nameList == null || index < 0 || m_nameList.Length < index || String.IsNullOrEmpty(m_nameList[index])) 
```

这应该在几乎任何条件下都可以正常工作（不会导致错误）......

# java - Automatic adding of elements to an array

> ID：10052917
> 
> 赞同：1
> 
> 时间：2012-04-07T08:16:45.280
> 
> 标签：java, android, arrays, parsing

Hi I'm not particular good at Java so please bear with me. I'm trying to write a very simple android app now and I need help with some coding.

Thing is, I have a server that automatically generates .png files and saves them to a public directory in a numerical order. The update occurs daily and is non-exhaustive.

Is there anyway in which I can assign the dynamic values to an array within my app?

```
 private String[] myRemoteImages = {
            "http://hypotheticalurl1.png",
            "http://hypotheticalurl2.png",
            "http://hypotheticalurl3.png",
            "http://hypotheticalurl4.png",
            "http://hypotheticalurl5.png",
            "http://hypotheticalurl6.png",
            "http://hypotheticalurl7.png",
            "http://hypotheticalurl8.png",
            "http://hypotheticalurl9.png",
            "http://hypotheticalurl10.png",
            "http://hypotheticalurl11.png",
            "http://hypotheticalurl12.png",
            //...blah blah blah
            // these are all dynamically created so I won't know what is the last number on the list
    }; 
```

This array will eventually be used to get the images from my server using the app. It works so far but that's only with hardcoded URLs. I would like the URLs to be dynamic, as the number of images will change from day to day.

I'm doubting that regex will work well in Java but then again I'm no expert. Was thinking of perhaps writing a script on the server end that generates a list of existing values and somehow parsing that with the android app.

Can anyone point me in the right direction? Thanks in advance.

**Clarification:**

The array doesn't have to be dynamically sized while the app is running.

I need a way to read the list of existing images in a remote directory and pass that information to populate the array automatically at runtime.

***Resolved***

Guys, thanks for the help. Sorry if I wasn't clear enough.

I've found a way to do it. Basically it was rather simple, which was to append an extra line of code to the shell script on the server end to generate a text list of existent image URLs at the same time that it generates the images.

After that, I used a combination of BufferedReader and openStream on the app to parse the remote text file into a String array.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:50:56.527

谢谢您的帮助。对不起，如果我不够清楚。

我找到了一种方法。基本上它相当简单，即在服务器端的 shell 脚本中附加一行额外的代码，以在生成图像的同时生成现有图像 URL 的文本列表。

之后，我在应用程序上使用了 BufferedReader 和 openStream 的组合将远程文本文件解析为字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:31:29.907

根据您的情况，您需要具备以下条件：

1- 一个 Web 服务，它有一种方法可以让您获得可用图像名称的列表。

2- 你的安卓应用程序需要一个 Web 服务客户端，我建议你使用[KSOAP 2](http://ksoap2.sourceforge.net/)，因为它广为人知且易于实现。（如果您不知道如何在程序中使用 ksoap，我可以为您提供一些示例代码）

3-您需要使用 ArrayList(java.util) 来保存动态大小的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:32:27.113

Hey ytou 可以通过
`ArrayList stringList = new ArrayList();`

```
stringList.add("Item"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T08:29:04.147

使用数组，您可以：

*   改变数组的元素

但你不能：

*   添加或删除元素。数组中固定的元素数。可以找到一些解决方法，例如在使用数组中的值时放置空值并丢弃它们。但这比真正有用更麻烦。

另一方面，如果你想要一个完整的动态“数组”：使用一个列表（[java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)）。ArrayList 在这里会很有趣，甚至是 Vector，因为您可能需要围绕这个数组进行一些多线程处理。使用列表，您可以添加和删除元素，大小可以变化并且可以替换元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T08:29:06.573

在这种情况下，我会使用 ArrayList。您不必知道要添加的元素数量，并且在最后附加元素非常简单。

```
private List<String> list = new ArrayList<String>(); 
```

然后只需添加元素

```
list.add("http://hypotheticalurl1.png"); 
```

问候，帕特里克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T08:30:21.360

而不是使用 Array of String 使用`ArrayList<String>`它将为您在运行时添加和删除项目提供更大的灵活性，请参阅此链接... http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ ArrayList.html

听说您可以在 arraylist 上找到示例...http://www.java2s.com/Tutorial/Java/0140_ *Collections/0160* _ArrayList.htm

希望有帮助

# c# - 如何为组合框仅获取一次我的数据源？

> ID：10052918
> 
> 赞同：1
> 
> 时间：2012-04-07T08:16:53.453
> 
> 标签：c#, asp.net, performance, web-services, telerik

我用`telerik:RadComboBox`

像这样 ：

```
<telerik:RadComboBox runat="server" ID="RadComboBox1"  EnableLoadOnDemand="true"
                                            ShowMoreResultsBox="true" EnableVirtualScrolling="true" CollapseDelay="0" Culture="ar-EG" ExpandDelay="0" Filter="StartsWith" ItemsPerRequest="100"
                                            MarkFirstMatch="true" Skin="Outlook" ValidationGroup="L" Width="202px" EnableAutomaticLoadOnDemand="True"
                                            EmptyMessage="-Enter user name-"
                                            EnableItemCaching="true" >
                                            <WebServiceSettings Path="../WebService/Employees.asmx" Method="LoadData" /> 
```

* * *

和我的网络服务：

```
 [System.Web.Script.Services.ScriptService]
    public class Employees : System.Web.Services.WebService
    {

        [WebMethod(EnableSession = true)]  
            public RadComboBoxData LoadData(RadComboBoxContext context)
                {

                RadComboBoxData result = new RadComboBoxData();
                DataTable dt = FollowsDAL.GetAllEmployees();

                var allEmployees = from r in dt.AsEnumerable()

                                   orderby r.Field<string>("name")

                                   select new RadComboBoxItemData
                                   {
                                       Text = r.Field<string>("name").ToString().TrimEnd()
                                   };
                string text = context.Text;
                if (!String.IsNullOrEmpty(text))
                {
                    allEmployees = allEmployees.Where(item => item.Text.StartsWith(text));
                }
                //Perform the paging
                // - first skip the amount of items already populated
                // - take the next 10 items
                int numberOfItems = context.NumberOfItems;
                var employees = allEmployees.Skip(numberOfItems).Take(100);

                result.Items = employees.ToArray();

                int endOffset = numberOfItems + employees.Count();
                int totalCount = allEmployees.Count();

                //Check if all items are populated (this is the last page)
                if (endOffset == totalCount)
                    result.EndOfItems = true;

                //Initialize the status message
                result.Message = String.Format("Items <b>1</b>-<b>{0}</b> out of <b>{1}</b>",
                                               endOffset, totalCount);

                return result;
            }} 
```

* * *

我的问题是：

虽然这个控件非常快，但每次我首先输入特定名称时，它都会在数据`20000`表中获取员工`dt`！

与每个字符。

我的问题是：

*   这种不良行为怎么会这么快？
*   有没有办法让所有员工只得到一次？
*   如何提升业绩？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:43:41.583

使用服务器端过滤总是更好，因为您不需要将 20000 条记录检索到网络服务器以使用 10 或 20 项返回。

[http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:28:46.213

您的 DAL 应该有一种方法来根据发送的文本过滤结果，然后将它们添加到组合框中。我的 DAL 是 Telerik OpenAccess ORM (Linq2SQL)，但您也可以编写一个存储过程来过滤结果。

这是我的一个填充 radcombobox 的 asmx 服务的示例：

```
 [WebMethod]
    public RadComboBoxData FindEmployee(RadComboBoxContext context)
    {
        RadComboBoxData comboData = new RadComboBoxData();

        using (DataBaseContext dbc = new DataBaseContext())
        {
            IQueryable<Employee> Employees = dbc.FindEmployee(context.Text);

            int itemOffset = context.NumberOfItems;
            int endOffset = Math.Min(itemOffset + 10, Employees.Count());
            List<RadComboBoxItemData> result = new List<RadComboBoxItemData>();

            var AddingEmployees = Employees.Skip(itemOffset).Take(endOffset - itemOffset);
            foreach (var Employee in AddingEmployees)
            {
                RadComboBoxItemData itemData = new RadComboBoxItemData();
                itemData.Text = Employee.Person.FullName;
                itemData.Value = Employee.EmployeeID.ToString();

                result.Add(itemData);
            }

            comboData.EndOfItems = endOffset == Employees.Count();
            comboData.Items = result.ToArray();
            if (Employees.Count() <= 0)
                comboData.Message = "No matches";
            else
                comboData.Message = String.Format("Items <b>1</b>-<b>{0}</b> out of <b>{1}</b>", endOffset, Employees.Count());
            return comboData;
        }
    } 
```

如果您想知道我的 FindEmployee 方法是什么：

```
public IQueryable<Employee> FindEmployee(string SearchString, bool IncludeInactive = false)
    {
        return from e in this.Employees
               where
                    (e.EmployeeID.ToString() == SearchString ||
                     e.Person.FirstName.Contains(SearchString) ||
                     e.Person.MiddleName.Contains(SearchString) ||
                     e.Person.LastName.Contains(SearchString) ||
                     (e.Person.FirstName + " " + e.Person.LastName).Contains(SearchString) ||
                     (e.Person.FirstName + " " + e.Person.MiddleName).Contains(SearchString) ||
                     (e.Person.FirstName + " " + e.Person.MiddleName + " " + e.Person.LastName).Contains(SearchString)) &&
                    ((e.Inactive == false || e.Inactive == null) && IncludeInactive == false)
               select e;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T05:15:33.283

我将创建一个从数据库加载值然后将它们存储在缓存中的方法。对该方法的后续调用应返回缓存版本。然后将 DataSource 设置为此方法。这应该会给您带来非常好的性能提升。

[http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T13:26:07.203

我认为您的解决方案应该是@PraVn 和@nurgent 的混合答案。`search`编写一个按字符串过滤记录的存储过程。让您的 DAL 使用从您现有的 Web 方法调用的方法调用此 SP`public RadComboBoxData LoadData(RadComboBoxContext context)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T02:24:23.857

据我了解，为了相同的目的一遍又一遍地向数据库发送请求不利于应用程序的健康。

基本上有两种方法可以加快这个过程。

> 1.  从您的数据库中以 DataTable 的形式获取数据。
> 2.  从您的数据库中以 DataSet 的形式获取数据。

## 数据表方法

`Database`在表单加载期间从 中获取所有记录。将其保存在 中`ViewState`而不是`Session`. 请注意这一点。像下面这样访问数据.. 现在访问`ViewState`. `Type Cast`它并访问下面提到的功能。

```
public static class GetFilteredData
{
    public static DataTable FilterDataTable(this DataTable Dt, string FilterExpression)
    {
        using (DataView Dv = new DataView(Dt))
        {
            Dv.RowFilter = FilterExpression;
            return Dv.ToTable();
        }
    }
}

DataTableObject.FilterDataTable("Search Expression or your string variable") 
```

这将返回您的`DataTable`. 将数据重新分配给控件，而不发生任何数据库故障。每当您必须过滤记录时执行此步骤。

## 数据集方法

此过程`26 DataTable`将从您的数据库发送。我知道它看起来很重。但正如您已经提到的，总记录将是 25,000 条。因此，所有这些记录都将在这些表中进行划分。请看下面的解释。

`ComboBox DataField Text column`可以有 26 个不同的`Start With`字符。您必须根据`Start with`字符来划分这些记录。以 A 开头的记录将被插入到 First Table。以 B 开头的记录将被插入到第二个表中，以 C 开头的记录将被插入到第三个表中，依此类推，直到以 Z 开头的记录将被插入到第 26 个表中。

请注意，您的`UDT`查询最初将用于将所有记录插入到`Local Temporary Table`. 这`Local Temporary Table`将进一步有 26 个基于以字符开头的选择语句。

下面是示例存储过程。

```
Create Proc ProcName
As

Create Table #Temp
(
    ColumnName Varchar(50)
)

Insert into #Temp(ColumnName)
Select ColumnName from YourTableName

Select ColumnName From #Temp Where ColumnName like 'a%'
Select ColumnName From #Temp Where ColumnName like 'b%'
Select ColumnName From #Temp Where ColumnName like 'c%'
--UpTo Z 
```

现在，你终于有了`26 Tables`，数据`DataSet`将从你的 BLL 返回。只保留它`ViewState`。现在将过滤数据，请使用下面提到的功能。

```
public static class GetFilteredData
{
    public static DataTable FilterDataTable(this DataSet Dt, string FilterExpression)
    {
        string Lowercase = FilterExpression.ToLower();
        Int16 TableID = 0;
        if (Lowercase.StartsWith("a"))
        {
            TableID = 0;
        }
        else if (Lowercase.StartsWith("b"))
        {
            TableID = 1;
        }
        else if (Lowercase.StartsWith("c"))
        {
            TableID = 2;
        }
        //upTo Z
        using (DataView Dv = new DataView(Dt.Tables[TableID]))
        {
            Dv.RowFilter = FilterExpression;
            return Dv.ToTable();
        }
    }
} 
```

所以我们理解使用的意义`DataSet Technique`在于，将记录进一步划分为表中的子节点。您`Search expression`将在`Splitted Nodes`而`DataSet`不是`Original DataSet`.

* * *

## 根据原始查询中提到的代码修改

仅在您的 Web 应用程序/网站中添加以下内容。

```
public static class GetFilteredData
{
    public static DataTable FilterDataTable(this DataTable Dt, string FilterExpression)
    {
        using (DataView Dv = new DataView(Dt))
        {
            Dv.RowFilter = FilterExpression;
            return Dv.ToTable();
        }
    }
} 
```

`WebForm`在自身中添加以下属性。以下`Property`将在`ViewState`为空的情况下从数据库返回结果集。否则它将`ViewState`只返回保留的数据。

```
public DataTable Employees
{
    get
    {
        if (ViewState["Employees"] == null)
        {
            return FollowsDAL.GetAllEmployees();
        }
        return (DataTable)ViewState["Employees"];
    }
    set
    {
        ViewState["Employees"] = value;
    }
} 
```

现在您可以`ViewState`在`WebForm`您可以`Combobox`控制的地方访问它。根据我的理解，您应该选择`DataSet`Approach。

请注意，`WebService`在此上下文中不需要。

# xcode - How to install Xcode 3.2.x on Lion?

> ID：10052921
> 
> 赞同：3
> 
> 时间：2012-04-07T08:17:24.277
> 
> 标签：xcode, osx-lion

I have tried to install Xcode 3.2.x on Lion using two methods below, but both failed. Did anyone succeed with that two methods?

**Method 1**:

1.  right click on "Xcode and iOS SDK.mpkg" and choose show package content;
2.  modify the Contents/iPhoneSDKSL.dist to replace "10.7" with "10.8" in it;
3.  install.

**Method 2**:

1.  open the terminal;
2.  export COMMAND_LINE_INSTALL=1;
3.  open "/Volumes/Xcode and iOS SDK/Xcode and iOS SDK.mpkg"
4.  uncheck all but the first one that include sdk and ide to install.

Besides, I also tried to use both two methods together, but failed again.

Any help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:38:14.303

其实我不确定你是否可以做到这一点。因为 Xcode 3 对于 Lion 来说太旧了。但可能会有某种黑客行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T01:53:04.273

尝试及时设置系统时钟。由于旧证书，它对我来说失败了。我使用了 2011 年 5 月 6 日

# css - Set space between divs

> ID：10052922
> 
> 赞同：35
> 
> 时间：2012-04-07T08:17:48.370
> 
> 标签：css, asp.net-mvc

I have two divs like this:

```
<section id="main">
        <div id="left">
            <asp:ContentPlaceHolder ID="left" runat="server" />
        </div>
        <div id="right">
            <asp:ContentPlaceHolder ID="right" runat="server" />
        </div>
</section> 
```

And here is my css:

```
#left
{
    float: left;
    margin-right: 17px;

}

#right
{
    float: right;
} 
```

I want the space between the divs to be 40px. I tried adding padding, margin and width in my css, but I think it didn't set the padding to correct 40px. How to do it?

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2016-09-19T11:56:18.977

对于寻找设置`N`div 之间间距的解决方案的人们，这里是另一种使用伪选择器的方法：

```
div:not(:last-child) {
  margin-right: 40px;
} 
```

您还可以组合子伪选择器：

```
div:not(:first-child):not(:last-child) {
  margin-left: 20px;
  margin-right: 20px;
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-07T08:22:40.573

以相同的方式浮动它们并添加 40px 的边距。如果您有 2 个元素以相反的方式浮动，您将拥有更少的控制权，并且包含元素将确定它们之间的距离。

```
#left{
    float: left;
    margin-right: 40px;
}
#right{
   float: left;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-26T20:14:53.810

N div 之间间距的另一种解决方案是：

```
div + div {
  margin-left: 40px;
} 
```

我们正在利用`+`css 选择器。它只选择`<div>`紧跟在元素之后的`<div>`元素。

注意：我们`margin-left`不在`margin-right`此处设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-22T18:06:45.947

您需要两个 div 之间的排水沟，排水沟可以制作如下

边距（装订线）= 宽度 - 装订线尺寸 例如边距 = 计算（70% - 2em）

```
<body bgcolor="gray">
<section id="main">
        <div id="left">
            Something here     
        </div>
        <div id="right">
                Someone there
        </div>
</section>
</body>
<style>
body{
    font-size: 10px;
}

#main div{
    float: left;
    background-color:#ffffff;
    width: calc(50% - 1.5em);
    margin-left: 1.5em;
}
</style> 
```

# ruby - Ruby: Why symbols change to strings when using puts instead of print?

> ID：10052925
> 
> 赞同：0
> 
> 时间：2012-04-07T08:17:56.280
> 
> 标签：ruby, printing

I don't understand the behavior of print and puts? I know print would not make a new line but puts can. but why the output of print will change from symbol to string when using puts instead of print?

`$ ruby -e 'print Kernel.private_instance_methods(false)'

```
[:initialize_copy, :remove_instance_variable, :sprintf, :format, :Integer, :Float, :String, :Array, :warn, :raise, :fail, :global_variables, :__method__, :__callee__, :eval, :local_variables, :iterator?, :block_given?, :catch, :throw, :loop, :caller, :trace_var` 
```

$ ruby -e 'puts Kernel.private_instance_methods(false)'

```
initialize_copy
remove_instance_variable
sprintf
format
Integer
Float
String
Array
warn
raise
fail
global_variables
__method__
__callee__
eval
local_variables 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T09:15:20.547

当你调用`puts`时，真正被调用的是`rb_io_puts`C 函数，它的工作原理基本上是这样的：

*   如果没有参数，则输出一个换行符。
*   对于每个参数，检查它是否为字符串类型（`T_STRING`在 Ruby C 术语中），如果是，则`rb_io_write`使用它调用。此外，如果字符串的长度为零或没有以换行符结尾，请添加`\n`.
*   如果参数是一个数组，递归调用`io_puts_ary`它。
*   在任何其他情况下，调用`rb_obj_as_string`参数，这基本上是`to_s`.

因此，当您 时`puts [:a, :b, :c]`，您将遇到第三种情况并`io_puts_ary`接管。长话短说，这将做与我上面描述的类似的事情，并将调用`rb_obj_as_string`每个元素并输出它，然后是换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:58:19.767

print函数会调用数组的to_s函数，数组的to_s函数是inspect函数的别名。

这可以在 ruby​​ 的 array.c 代码中找到。

```
rb_define_alias(rb_cArray,  "to_s", "inspect"); 
```

所以：

```
array = Kernel.private_instance_methods(false)
$stout.write(array.to_s) 
```

也会输出相同的结果。

# charts - Draw a line above bar chart

> ID：10052927
> 
> 赞同：1
> 
> 时间：2012-04-07T08:18:19.090
> 
> 标签：charts, bar-chart, google-visualization

In the old static image Google charts I have been producing a combined chart like this one:

![enter image description here](../Images/afb1a33d516168aa1ce30a9dc882a767.png)

It has 3 series (the bars drawn in dark green, light green and pink - on the top) and then it is overlayed by one more data serie - the blue line.

My question is: if that is possible [in the new Google charts](https://developers.google.com/chart/)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:10:39.493

看起来[组合图](https://developers.google.com/chart/interactive/docs/gallery/combochart)仍然有列、堆叠列和线条的文档。

# php - 正则表达式不剥离周期

> ID：10052932
> 
> 赞同：0
> 
> 时间：2012-04-07T08:19:09.573
> 
> 标签：php, regex

为什么我的正则表达式没有去掉句点？最终结果应该只输出字母和数字字符，加上'-'，但我不断在输出中得到句点。我试过 trim($string, '.') 但没有用。请帮忙！

更新！我已经用正确的解决方案更新了代码。谢谢！

```
<?php
protected $trimCharacters = "/[^a-zA-Z0-9_-]/";
protected $validWords = "/[a-zA-Z0-9_-]+/";

private function cleanUpNoise($inputText){

  $this->inputText = preg_replace($this->trimCharacters, '', $this->inputText);
  $this->inputText = strtolower($this->inputText);
  $this->inputText = preg_match_all($this->validWords, $this->inputText, $matches);

  return $matches;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:30:04.283

您的正则表达式仅在您第一次模式匹配时获取...尝试在您的模式中设置全局标志，例如

`"/[\\s,\\+]+/g"`

就像是

```
'/[\s,\+]+/g'
'/[^\w-]/g' 
```

将是您的表达式，您正在寻找...请注意：您必须转义反斜杠...如果不是，php 将尝试解释`\s` `\+` `\w`...

像使用它一样

```
protected $splitPattern = '/[\\s,\\+]+/g';
protected $trimCharacters = '/[^\\w-]/g'; 
```

编辑：

哦...您不能将其简化为：

```
$this->inputText = preg_replace($this->splitPattern, '', $this->inputText);
$this->inputText = preg_replace($this->trimCharacters, '', $this->inputText); 
```

# c# - 在 asp.net 中的 javascript 中允许和防止回发

> ID：10052933
> 
> 赞同：0
> 
> 时间：2012-04-07T08:19:10.930
> 
> 标签：c#, javascript, asp.net

我试图在按钮单击事件上使用 java 脚本验证日期。如果验证返回错误的回发应该被阻止，如果返回真正的回发应该被允许。

问题是即使验证返回 false 也会发生回发.....

我是javascript的新手。请给我任何解决方案.....

这是我的代码

```
<script type="text/javascript">
    function ValidateDate() {

        var GridView = document.getElementById('GridView1');           
        var i = 1;
        var rows = GridView.rows.length;           
        for (var j = 0; j < rows - 2; j++) {
            i = i + 1;              
            var FromDate = new Date(document.getElementById('GridView1_ctl0' + i + '_txtFrom').value);
            var ToDate = new Date(document.getElementById('GridView1_ctl0' + i + '_txtTo').value);
            if (ToDate < FromDate) {
                document.getElementById('GridView1_ctl0' + i + '_txtFrom').focus();
                alert('ToDate is less than from date');
                return false;
            }
        }
        return true;      
    }
</script> 
```

我在页面加载事件中调用了 javascript

```
this.btnSave.Attributes.Add("onClick", "ValidateDate();"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:26:08.837

你忘了指定`return`

你应该尝试：

```
this.btnSave.Attributes.Add("onClick", "return ValidateDate();"); 
```

您正在从 ValidateDate() 返回值，因此对于这种情况，您需要在函数调用时指定它，当它返回 false 时，它​​会进一步停止执行。

# java - 将数据导入不同平台上的 Java 程序？

> ID：10052934
> 
> 赞同：2
> 
> 时间：2012-04-07T08:19:16.650
> 
> 标签：java, file-io, portability

我目前正在编写一个需要一些数据才能运行的 java 程序。
数据不是特别广泛；它是元素周期表中所有元素（符号和全名）与其原子质量的列表，每个元素最多保留大约 7 个小数位。

目前，我将这些数据存储在我计算机上 Java 程序目录中的一个 .txt 文件中，我打算简单地读取它并将其操作为我想要的数据类型。我在我的 Windows 7 32 位 PC 上执行此操作。

但是，我希望我的程序完全兼容所有可以支持 Java 的平台，例如移动设备。
关于文件 IO，我需要特别考虑以确保程序兼容吗？

我不知道文件 IO 在 Android 或 iPad 甚至 Mac 等平台上是如何工作的。我应该如何执行此数据导入，以便程序仍然可以在所有 Java 兼容平台上运行？

我考虑过的一种可能性是将这些数据类型“手动”嵌入到代码中。IE; 我没有从文件中导入数据，而是直接将其编码到程序中（这会使数据在编译后无法更改，我觉得这是不好的做法）。
我也想知道我是否也应该使用 Java ME 而不是 SE。

谢谢！

* * *

规格：
Java SE (jre 7) 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T08:38:40.760

J2SE、Android 和（可能）J2ME 中作为“嵌入式应用程序资源”的资源可以（因此应该）通过. 网址。

使用以下方式获取 URL：

```
URL periodicTableData = this.getClass().getResource(
    "/relative/path/to/periodicTable.dat"); 
```

> 我假设不同平台有不同的安装方法？

“静态”资源，即不会改变的资源，可以添加到 Jar 中。如果该 Jar 在应用程序的运行时类路径中，则可以使用`getResource()`.

> 数据 .. (is).. 元素周期表中所有元素的列表（包括符号和全名）与它们的原子质量，每个元素最多保留约 7 个小数位。

正如 gt_ebuddy 所提到的，可能会为此使用 CSV。OTOH 我倾向于使用 XML。XML 可以处理比这里立即需要的更复杂的结构，但确实提供了良好的内置支持的优势（至少在 J2SE 上），并且（以 UTF-8 编码）将可以跨平台读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:31:25.723

AFAIK，所有平台都可以选择执行 IO 工作。我的建议是：

1.  txt 文件是最便携/跨平台的，并且足够简单，易于阅读和解析。到处使用文本文件。
2.  为了使每个平台中的程序更容易解析，请将您的数据文件格式化为制表符分隔或逗号分隔等。

**“我还想知道我是否也应该使用 Java ME 而不是 SE。”** ：

您必须为每个平台编写不同的代码。不过，跨 JavaME-JavaSE-Android 的核心逻辑（GUI 除外）几乎不会发生变化。

*   JavaME：适用于支持 Java 的移动设备
*   JavaSE：用于桌面应用程序
*   Android : 支持 Dalvik VM

# mysql - 带连接的 SQL 更新 - 无法在 from 子句中指定 TABLE_NAME

> ID：10052939
> 
> 赞同：1
> 
> 时间：2012-04-07T08:20:06.717
> 
> 标签：mysql, sql, sql-update

我有一个我无法解决的 sql 错误。我必须用几个连接更新一个表。我尝试在没有“in”子句的情况下这样做，但这没有用。现在使用 in 子句，这是我的查询：

```
 UPDATE sc_module_architect 
    SET
    item_name="Print Cover Price"
    WHERE 
    item_id IN (
         SELECT a.item_id
         FROM sc_module_architect a
         LEFT JOIN sc_module_architect_category_links l on l.item_id=a.item_id
         LEFT JOIN sc_module_architect_category c on c.category_content_id=l.content_id
         LEFT JOIN sc_content sc on sc.content_id=l.content_id
         WHERE item_active=1
         AND content_name LIKE "ed_abc_print%"
         LIKE item_name LIKE "Cover Price%"); 
```

现在运行它时出现错误

```
/* SQL Error (1093): You can't specify target table 'sc_module_architect' for update in FROM clause */ 
```

无法弄清楚为什么会出现这种情况。有任何想法吗？mysql 5.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:52:39.230

您也不能同时在子查询中使用更新下的表：

您需要遵循以下语法：

```
update tablea JOIN tableb ..... SET columnname='yourvalue' where [....] 
```

试试下面：

```
update sc_module_architect as t1  LEFT JOIN  (select a.item_id
    from sc_module_architect a
    left join sc_module_architect_category_links l on l.item_id=a.item_id
    left join sc_module_architect_category c on c.category_content_id=l.content_id
    left join sc_content sc on sc.content_id=l.content_id
    where
    item_active=1
    and content_name like "ed_abc_print%"
    and item_name like "Cover Price%") as t2
    on t1.item_id=t2.itemid
    set
    t1.item_name="Print Cover Price" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:51:40.987

将条件从`WHERE`移到 a `JOIN`。（而且这些`left`连接似乎不合适。我认为它们应该是`INNER`连接）：

```
UPDATE sc_module_architect AS ma
  JOIN
     ( SELECT a.item_id
         from sc_module_architect a
           left join sc_module_architect_category_links l 
             on l.item_id=a.item_id
           left join sc_module_architect_category c 
             on c.category_content_id=l.content_id
           left join sc_content sc on sc.content_id=l.content_id
       WHERE content_name LIKE 'ed_abc_print%'
     ) AS t
    ON t.item_id = ma.item_id 

  SET
    ma.item_name = 'Print Cover Price'

WHERE ma.item_active = 1
  AND ma.item_name LIKE 'Cover Price%' ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:31:55.817

您可以先将所有 Id 放入一个临时表中，然后将其用作插入中的查找

```
CREATE TEMPORARY TABLE tempTable (item_id INT);

INSERT INTO tempTable (item_id)
SELECT a.item_id
FROM sc_module_architect a
LEFT JOIN sc_module_architect_category_links l on l.item_id=a.item_id
LEFT JOIN sc_module_architect_category c on c.category_content_id=l.content_id
LEFT JOIN sc_content sc on sc.content_id=l.content_id
WHERE
  item_active=1
  AND content_name like "ed_abc_print%"
  AND item_name like "Cover Price%";

UPDATE sc_module_architect 
SET
  item_name="Print Cover Price"
WHERE 
  item_id in (select item_id from tempTable) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T08:46:07.667

当您在子查询中将表 sc_module_architect 设置为“a”时，请使用它

```
update a 
set
item_name="Print Cover Price"
WHERE 
item_id in (select a.item_id
from sc_module_architect a
left join sc_module_architect_category_links l on l.item_id=a.item_id
left join sc_module_architect_category c on c.category_content_id=l.content_id
left join sc_content sc on sc.content_id=l.content_id
where
item_active=1
and content_name like "ed_abc_print%"
and item_name like "Cover Price%"); 
```

# haskell - 我需要哪个 Monad？

> ID：10052943
> 
> 赞同：1
> 
> 时间：2012-04-07T08:20:35.740
> 
> 标签：haskell, monads

这是对这个问题的扩展：

[在 Haskell 中使用命令行参数调度以纠正函数](https://stackoverflow.com/questions/10005478/dispatching-to-correct-function-with-command-line-arguments-in-haskell)

所以，事实证明，我还没有一个很好的解决方案来将“命令”从命令行分派到其他函数。因此，我想扩展上述问题中的方法。必须手动将函数添加到表中并将适当的转换函数应用于每个函数，以便它获取正确大小的列表而不是其正常参数，这似乎很麻烦。相反，我想建立一个表，我将在其中添加函数并用它需要从命令行获取的参数数量“标记”它们。然后，“add”过程应负责使用正确的“takesXarguments”过程进行组合并将其添加到表中。

我希望能够将函数的“包”安装到表中，这让我认为我需要能够跟踪表的状态，因为它会在安装包时发生变化。我要找的是 Reader Monad 还是 State Monad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:53:58.443

不需要单子。您的标记想法是正确的，但是该信息的编码方式可能与您预期的不同。

我将从命令的定义开始：

```
type Command = [String] -> IO () 
```

然后你可以制作“命令制作者”功能：

```
mkCommand1 :: (String -> IO ()) -> Command
mkCommand2 :: (String -> String -> IO ()) -> Command
... 
```

作为标签。如果你不喜欢函数的泛滥，你也可以做一个“命令 lambda”：

```
arg :: (String -> Command) -> Command
arg f (x:xs) = f x xs
arg f [] = fail "Wrong number of arguments" 
```

这样您就可以编写如下命令：

```
printHelloName :: Command
printHelloName = arg $ \first -> arg $ \last -> do
    putStrLn $ "Hello, Mr(s). " ++ last
    putStrLn $ "May I call you " ++ first ++ "?" 
```

当然`mkCommand1`etc. 可以很容易地写成`arg`, 为了两全其美。

至于包，`Command`充分封装了多个子命令之间的选择，但它们不组合。这里的一种选择是更改`Command`为：

```
type Command = [String] -> Maybe (IO ()) 
```

这允许您`Command`通过采取不返回的第一个操作将多个 s 组合成一个`Nothing`。现在你的包也只是类型的值`Command`。（总的来说，对于 Haskell，我们对这些组合非常感兴趣——而不是包和列表，考虑如何将某个对象中的两个作为组合对象）

为了使您摆脱您肯定建立的愿望：（1）没有合理的方法来检测函数接受的参数数量*，并且（2）没有办法使类型依赖于数字，所以您将无法创建将参数数量`mkCommand`作为第一个参数的 a `Int`。

希望这有帮助。

*   在这种情况下，事实证明是有的，但我建议不要这样做，并认为这是一个坏习惯——当事情变得更抽象时，技术就会失效。但我是个纯粹主义者；更多的胶带Haskellers可能不同意我的观点。

# c++ - 带有 Visual Studio 2010 的 GUI C++ Qt

> ID：10052949
> 
> 赞同：0
> 
> 时间：2012-04-07T08:21:53.050
> 
> 标签：c++, visual-studio-2010, user-interface, qt4

我正在开发一个需要 GUI 的 C++ 应用程序。我想使用 Windows 7 功能区框架，所以我对让我的应用程序与不同于 Windows 的操作系统兼容不感兴趣。我还想使用我喜欢的 IDE，Visual Studio 2010，显然我想使用标准 C++ 的东西，比如 std::string 等。我看到有 Qt，它看起来很酷，但据我所知，我应该使用它他们自己的编译器，因为他们提供了一些不属于标准 c++ 的东西（例如，slots 关键字）。另外，我看到我可以使用 QWinHost 来托管 win32 控件，但我不确定是否可以托管功能区控件。我应该自己实现一个小库来简单地管理本机 win32 控件还是应该使用 Qt？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:29:41.187

> 但据我了解，我应该将它与他们自己的编译器一起使用

不，这是不正确的。您将使用您的编译器——无论是 microsoft 编译器、mingw-g++ 还是其他东西，只要 Qt 支持它。

Qt 提供了自己的附加**预处理器**，称为[moc](http://qt-project.org/doc/qt-4.8/moc.html)。Moc 接受输入文件并根据其内容生成包含标准 c++ 代码的附加 *.cpp 文件。这些文件又被馈送到您的“普通”编译器。只要您使用 qmake 生成项目，所有必要的构建规则都会自动处理。

> 我应该自己实现一个小库来简单地管理本机 win32 控件还是应该使用 Qt？

这是你的代码，也是你的决定。然而，对我来说，写“小图书馆”听起来很像重新发明轮子。如果我是你，我会首先尝试让控件与 Qt 一起工作——因为这样我就不必重新发明轮子——已经有太多的 GUI 工具包，所以单独制作另一个是毫无意义的。

# c++ - 在 C++ 中将文件从 URL 下载到磁盘

> ID：10052960
> 
> 赞同：1
> 
> 时间：2012-04-07T08:24:35.867
> 
> 标签：c++, macos, url, curl

我有一个简单的问题。是否可以编写简单的代码来从互联网（从 URL 到磁盘）下载文件而不使用 curl 等 C++（对于 mac osx）库？我看过一些例子，但所有这些都使用 Curl 库。

我在我的 xcode projet 上使用此代码..但我有一些编译（链接）错误

```
 #define CURL_STATICLIB
#include <stdio.h>
#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>
#include <string>

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written;
    written = fwrite(ptr, size, nmemb, stream);
    return written;
}

int main(void) {
    CURL *curl;
    FILE *fp;
    CURLcode res;
    char *url = "http://localhost/aaa.txt";
    char outfilename[FILENAME_MAX] = "bbb.txt";
    curl = curl_easy_init();
    if (curl) {
        fp = fopen(outfilename,"wb");
        curl_easy_setopt(curl, CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        res = curl_easy_perform(curl);
        curl_easy_cleanup(curl);
        fclose(fp);
    }
    return 0;
} 
```

如何将 curl 库链接到我的 xcode 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:33:18.297

您可以启动控制台命令，非常简单：D

```
system("curl -o ...") 
```

或者

```
system("wget ...") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:31:52.727

您必须学习一些“套接字编程”并实现一个非常基本的 HTTP 协议；最简单的事情是向`"GET /this/path/to/file.png HTTP/1.0\r\n"`网站发送类似的字符串；然后，它可能会回答一个 HTTP 标头，您必须解析以至少知道后面的二进制数据的长度（如果请求成功，否则您必须处理 HTTP 错误，或者像 html 页面这样的意外内容类型） .

[本指南](http://beej.us/guide/bgnet/)应该为您提供基础知识；关于[HTTP](http://www.w3.org/Protocols/rfc2616/rfc2616.html)，这取决于您的需要，有时发送“原始” GET 就足够了，有时则不行。

**编辑**

更改为假装请求来自符合 HTTP/1 的客户端，因为 HTTP/1.1 希望发送 Host 标头，正如评论者正确指出的那样。

**编辑2**

OP 改变了这个问题，它变成了关于如何与 Xcode 中的库链接的问题。[在 SO](https://stackoverflow.com/questions/445815/linking-libraries-in-xcode)上已经有一个类似的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:33:13.483

“从 URL 下载文件”基本上意味着`GET`向某个远程 HTTP 服务器发出请求。因此，您需要让您的应用程序知道如何执行该 HTTP 请求。

但是[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)现在是一个相当复杂的协议。仅它的规范就很长而且很复杂（超过一百页）。[libcurl](http://curl.haxx.se/libcurl/)是一个很好的实现它的库。

为什么要避免使用实现复杂协议的优秀免费库？当然，您可以自己实现复杂的 HTTP 协议（​​可能需要多年的工作），或者制作一个不实现 HTTP 协议的所有细节但可能工作的最小程序（但不适用于奇怪的 HTTP 服务器）。

# ruby-on-rails - 如何使用 :includes 渲染 json？

> ID：10052967
> 
> 赞同：0
> 
> 时间：2012-04-07T08:25:58.383
> 
> 标签：ruby-on-rails

我有模型`GuestOrder, OrderBatch, OrderItem`

```
# == Schema Information
#
# Table name: guest_orders
#
#  id             :integer         not null, primary key
#  notes          :string(255)
#  adults         :integer
#  children       :integer
#  created        :datetime
#  placed         :datetime
#  billed         :datetime
#  created_at     :datetime
#  updated_at     :datetime
#

class GuestOrder < ActiveRecord::Base
  has_many :order_batches, :dependent => :destroy
end

# == Schema Information
#
# Table name: order_batches
#
#  id             :integer         not null, primary key
#  placed         :datetime
#  guest_order_id :integer
#  created_at     :datetime
#  updated_at     :datetime
#

class OrderBatch < ActiveRecord::Base
  belongs_to :guest_order
  has_many :order_items, :dependent => :destroy
end

# == Schema Information
#
# Table name: order_items
#
#  id             :integer         not null, primary key
#  quantity       :integer
#  accepted       :datetime
#  cooking        :datetime
#  ready          :datetime
#  delivered      :datetime
#  cancelled      :datetime
#  order_batch_id :integer
#  dish_id        :integer
#  created_at     :datetime
#  updated_at     :datetime
#

class OrderItem < ActiveRecord::Base
  belongs_to :order_batch
  belongs_to :dish
end 
```

我试图在以下方法中呈现 json，以通过将 guest_order id 作为参数传递来获取 guest_order 及其所属的 order_batches 和 order_items。

```
 def getOrderDetails
        #To get the details of a particular guest_order and its batches and items
        @guest_order = GuestOrder.find_by_id(params[:id])
        render :json => @guest_order.to_json(:except => [:created_at, :updated_at], 
:includes => {:order_batches => {:except => [:guest_order_id, :created_at, :updated_at],
:includes => {:order_items => {:except => [:order_batch_id, :created_at, :updated_at] } } } } )
    end 
```

但我没有得到预期的结果，只呈现了 guest_orders 表中的详细信息。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:41:16.677

我使用 :include 而不是 :includes，不确定这是否重要。

尝试先使用不带 :except 的 :include，然后当你开始工作时，添加 :except。

# symfony - 如何从 symfony2 中的 bundle 类访问存储库？

> ID：10052968
> 
> 赞同：0
> 
> 时间：2012-04-07T08:26:03.907
> 
> 标签：symfony, repository, bundle

所以，我使用 bundle 类来完成我的大部分工作，因为我不需要控制器 (src\CSFs\QuicklinksBundle\CSFsQuicklinksBundle.php)。

从另一个包的 FrontController 中，我得到了快速链接包，将容器对象注入到包类（上图）中，然后在包类中提取模板以返回 HTML，这很好。但是，我在存储库方面遇到了麻烦。

```
/**
 * Get the container object, so we can use all the symfony2 fun stuffs
 */
public function injectContainer($cont) 
{
    // Template
    $this->tpl = $cont->get('templating');

    // EM
    $this->em = $cont->get('doctrine')->getEntityManager();
}

/**
 *
 **/
public function doStuff()
{
    $products = $this->em->getRepository('QuicklinksBundle:Quicklinks')
                ->getUsersWithQuicklinks();
} 
```

我得到的错误是：

```
Unknown Entity namespace alias 'QuicklinksBundle'. 
```

我有生成的实体文件和定义了 getUsersWithQuicklinks() 方法的存储库类。

如何让实体经理了解我的存储库？

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:17:30.533

改变：

```
$this->em->getRepository('QuicklinksBundle:Quicklinks') 
```

到：

```
$this->em->getRepository('CSFsQuicklinksBundle:Quicklinks') 
```

我假设您有一个名为“快速链接”的实体

# python - 是否可以通过 XML-RPC 创建具有自定义帖子类型和自定义字段的新 Wordpress 帖子？

> ID：10052969
> 
> 赞同：1
> 
> 时间：2012-04-07T08:26:04.043
> 
> 标签：python, wordpress, xml-rpc, custom-post-type

我一直在尝试使用 python 和 wordpress 的 XML-RPC API 在我的网站上创建新的博客文章。所以我遇到了[一个包装器](https://github.com/maxcutler/python-wordpress-xmlrpc)并尝试了它，但它似乎不支持使用自定义帖子类型和字段创建帖子。所以我开始寻找自定义代码并遇到了这个[错误报告](http://core.trac.wordpress.org/ticket/16476)。现在我很困惑。甚至有可能做到这一点吗？如果是，如何？正如我可以找到代码示例一样，这对我来说有点困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:51:11.330

WordPress XML-RPC API 当前不支持自定义帖子类型。但是，将在即将发布的 WordPress 3.4 版本中添加支持。您可以在[Codex](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts)上找到相关文档。

我有一个[插件](http://wordpress.org/extend/plugins/xml-rpc-modernization/)，它充当 WordPress 3.3 及更早版本的 shim，并添加了与 3.4 中添加的功能等效的功能。

我最近更新了您找到的我的 python 包装器，它现在支持 WordPress 3.4 的新功能。我在图书馆的文档中提出了几个例子。

本质上，您需要使用`post_type`可用字段作为新`wp.*Post`XML-RPC 方法的参数。

# php - 命名空间 & __autoload

> ID：10052974
> 
> 赞同：0
> 
> 时间：2012-04-07T08:26:59.703
> 
> 标签：php, namespaces, autoload

我有一个文件 SQL_config.php：

```
namespace database;

class SQL_config
{
    private $_server="localhost";
    private $_user="root";
    private $_password="";

    private static $_singleton;
    private $_connection;

    protected function __construct()
    {
        $this->_connection=mysql_connect($this->_server,$this->_user,$this->_password);
    }

    public static function getInstance()
    {
        if(is_null(self::$_singleton))
        {
            self::$_singleton=new SQL_config();
        }

        return self::$_singleton;
    }
} 
```

和 index.php：

```
//namespace database;
//require_once'SQL_config.php';

 function __autoload($class)
    {  
     // convert namespace to full file path  
    //$class = 'database/' . str_replace('\\', '/', $class) . '.php';  
    //require_once($class); 
    require_once  $class . '.php'; 
    }  

$connection=database\SQL_config::getInstance(); 
```

并且不起作用。警告：require_once(database\SQL_config.php) [function.require-once]：无法打开流：第 11 行的 C:\wamp\www\Formular_contact\index.php 中没有这样的文件或目录。对于我使用的所有版本它给我错误不能有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:43:23.220

```
define(CLASS_DIR, "/path_to_your_classes_to_load/");

require_once CLASS_DIR . str_replace('\\', '/', ltrim($className, '\\')) . '.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T14:57:39.720

您需要将“\”替换为“/”并在新类名的末尾添加一个“.php”，因为它只会获得没有逗号和扩展名的名称。并在正确的文件夹中找到该类，如路径所示。

```
function __autoload($className){
    $newClassName= str_replace("\\", "/", $className) .".php";
    require_once($newClassName);
} 
```

确保在正确的文件夹中找到类文件，例如

./database/SQL_config.php

如果您的班级位于“classes”文件夹中，请改用此方法。

```
function __autoload($className){
    $newClassName = "classes/";
    $newClassName .= str_replace("\\", "/", $className) .".php";
    require_once($newClassName);
} 
```

确保在正确的文件夹中找到类文件，例如

./classes/database/SQL_config.php

在您提供的代码中 - 类文件在文件结构中的位置也很重要。

# php - 使用 SOAP 还是不使用 SOAP？什么最适合我的网络服务？

> ID：10052975
> 
> 赞同：2
> 
> 时间：2012-04-07T08:27:04.620
> 
> 标签：php, web-services, soap

我需要创建一个将 XML 数据返回给我的一些客户的 Web 服务。
无论我在哪里[搜索](http://www.google.no/search?q=php%20soap%20tutorial&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3anb-NO%3aofficial&client=firefox-a#hl=no&client=firefox-a&hs=mN7&rls=org.mozilla%3anb-NO%3aofficial&sclient=psy-ab&q=php%20web%20service%20tutorial&oq=php%20web%20service%20tutorial&aq=f&aqi=g1&aql=&gs_l=serp.3..0.149325l150399l0l151235l11l11l0l0l0l4l148l1105l7j4l11l0.llsin.&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=9c9191c4064592ed&biw=1366&bih=982)网络[服务教程](http://phpmaster.com/web-services-with-php-and-soap-1/)，80% 的人都在谈论使用[SOAP](http://en.wikipedia.org/wiki/SOAP)。

我的问题是这样的：任何客户端都可以将获取的数据作为普通 XML 读取吗？
有 SOAP 的替代品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T08:32:59.300

REST 是 SOAP 的轻量级替代方案。它使用现有的 HTTP 方法，如 GET、POST、PUT、DELETE。从概念上讲，URL 标识服务器上的资源，HTTP 方法定义要执行的操作。

REST 是一种架构风格，因此它在实现方式方面非常灵活。该体系结构只是一个指南，如果应用程序满足 REST Web 服务的定义特征，则该应用程序被视为 RESTful。

JSON 通常用作传输，而不是 XML。优点是 JavaScript 可以立即解析 JSON，并且许多服务器端技术都有用于将 JSON 反序列化为对象的库。虽然建议使用 JSON，但您可以将任何内容类型用于 REST，包括 XML。

有关更多详细信息，请参阅[有关 REST 的 Wikipedia 文章。](http://en.wikipedia.org/wiki/Representational_state_transfer)

**例子：**

获得福特雷鸟的汽车课程

```
HTTP GET http://example.com/cars/ford/thunderbird/8NUY1234  

$.ajax({
    url: '/cars/ford/thunderbird/8NUY1234',
    type: "GET",  /* implicit default, listed for clarity only */
    success: function(data) {
        alert(JSON.stringify(data) );  /* output json
        alert("engine = " + data.engine);
    }
}); 
```

在集合中插入车辆

```
HTTP POST http://example.com/cars/ford/f150/?vin=F14564564564&color=blue&engine=I6&...

// insert record on server.
var dataString = "vin=F143567547&color=blue&engine=I6"
$.ajax({ 
    url: '/cars/ford/f150',
    data: dataString,
    type: "POST",
    success: function(data) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T09:10:43.353

我会说这在很大程度上取决于您的要求。

*   JSON 是轻量级的，因为它没有 XML 那么多的开销。如果您有很多短键值部分，则在 XML 中传输的最多字节是标记和属性定义，而不是信息数据本身。

*   JSON 非常适合在 JavaScript 应用程序中使用。但是，大多数编程语言本身就支持 JSON；其中，流行语言如 PHP 或 - 自 Flash 10.2 起 - Actionscript 3。

XML 生活在一个由明确定义（并且广泛传播）的其他标准组成的丰富生态圈中。其中：

*   XSD，一种模式定义，您可以在其中定义信息的结构方式以及客户期望它们的方式。这些可以伴随命名空间。许多编程语言（如 Java）或框架（如 .NET）可以基于此模式自动生成类和对象。

*   XSL(T) 是一种转换语言，它可以将给定的 XML 转换为可以自动适合您的客户的文档格式（例如，针对他们网站的不同部分的不同 HTML 片段）。

SOAP 充分利用了这些标准，因为它提供了关于客户端如何使用您的服务的方案和明确定义的合同。许多语言（包括 PHP、Java）和许多框架（包括 .NET 和 Zend Framework）可以自动检测服务提供哪些接口并自动生成面向对象的接口，而无需客户端解释 SOAP 协议 - 就是这样明确定义它可以自动完成。一旦定义了类，一些框架（例如 Zend、.NET）甚至可以为您自动生成 SOAP 服务——这要归功于定义非常明确的标准。

正如 jmort253 已经说过的，REST 是另一种方法：您没有那么多标准和限制，因此在您的实现中非常自由。

长话短说：我建议将 SOAP 用于必须作为数据传输的复杂信息，将 REST 用于非复杂数据，主要可以看作是键 => 值对，没有很多维度。

SOAP 的一个很好的例子是 adidas miCoach API，它必须处理大量的锻炼数据和大量的锻炼结果。

另一方面，Twitter 主要处理 key => value 信息（例如标签 => 消息）并且非常适合 REST API。

# php - 数据同步如何工作以及如何在服务器-客户端应用程序中使用它？

> ID：10052980
> 
> 赞同：4
> 
> 时间：2012-04-07T08:27:35.310
> 
> 标签：php, android, web-services, synchronization, client-server

我将在一个真实的例子中演示这个问题，所以情况：

1.  有一个网站（例如：真实示例： http: [//www.news.com.au/break-news](http://www.news.com.au/breaking-news)）
2.  我想从网站上解析“最新新闻”数据。这应该是一个服务（基于php、c#aspx...）做的就是被我们这边注销了。数据以 XML 或类似格式解析和准备。
3.  有许多客户端（桌面变体，移动......），当带有新 PUSH 的新闻（就像交换服务器那样）应该被通知时。

我不知道如何在 2) 和 3) 之间进行连接/同步。

一个想法将由客户端在一段时间内发送，然后对服务的请求需要进行 PUSH。还是有其他变体可以解决这个问题？也许这样客户端正在等待并且只有很大一部分服务间隔没有请求？

有什么具体的方法、想法、建议吗？

在此先感谢，最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:13:20.077

1.  客户端（即 Android 应用程序）定期查询服务器，发送时间戳值。服务器将时间戳与其数据进行比较，并仅回复相关（最新）数据。
2.  推送通知：在 Android 上，您可以使用 C2DM。如何在 PHP 中做到这一点？参见： [C2DM 实现 PHP 代码](https://stackoverflow.com/questions/4121508/c2dm-implementation-php-code/5232809#5232809)

# opencv - 如何在opencv中跟踪多个校准相机中的单个标记

> ID：10052984
> 
> 赞同：1
> 
> 时间：2012-04-07T08:29:15.940
> 
> 标签：opencv, 3d-reconstruction

opencv 中有很多与 3D 重建相关的函数。我有多个相机，我用 opencv 校准了它们。所以我有整个相机的外在和内在以及本质和基本矩阵。

我知道在 3d 空间中跟踪标记的一个很好的算法是三角测量。在 opencv 中是否有任何好的三角测量实现，或者处理三角测量的外部库是一种正确的方法？

此外，如果我理解正确，标记的 3d 位置基于相机的坐标系之一。如何根据真实的地面坐标系获得标记的 3d 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:11:31.137

您应该研究[运动结构](http://code.google.com/p/libmv/)(SFM) 和[捆绑调整](http://www.ics.forth.gr/~lourakis/sba/)(BA) 算法。

# r - 在 R 的曲线（）中绘制对数刻度

> ID：10052987
> 
> 赞同：2
> 
> 时间：2012-04-07T08:30:03.507
> 
> 标签：r, plot

我有一个要在累积函数中绘制的数据。

我拥有的 R 代码如下：

```
dat <- read.table("evalues_point.txt" )
pre.test <- dat$V1
print (pre.test)

pre.ecdf <- ecdf(pre.test)
rx <- range(pre.test)
ry <- max(length(pre.test))

curve(length(pre.test)*(1-pre.ecdf(x)), from=rx[1], to=rx[2], col="red", xlim=rx, ylim=c(0,ry)) 
```

使用我的代码，当前情节看起来像这样（无对数比例）。如何修改我的代码，使其在 Y 轴上绘制对数刻度？

数据可以在[这里下载](http://www.mediafire.com/?8o0qqy1vg5qs33u)

![在此处输入图像描述](../Images/88491cbaa823bf09b81926b950d73a2c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:48:21.553

您可以将参数添加`log = "y"`到调用中，但您必须将最小范围从零更改为更高的值。有关`?plot.default`此参数的详细信息，请参阅从`curve`.

# c# - 使用不同类型的 List<>.Contains()

> ID：10052989
> 
> 赞同：1
> 
> 时间：2012-04-07T08:30:11.307
> 
> 标签：c#

我有一个自定义类型的通用列表

```
List<MyType> list = new List<MyType>(); 
```

我已经覆盖了 MyType 的 .Equals ，因此如果您将字符串或 MyType 与它进行比较，它就可以工作。我的问题是 - 如果 List 只包含 MyType，有没有办法使用 List.Contains(string)？

我意识到还有其他方法可以做到这一点（例如在那里创建一个 MyType 对象，然后代替字符串），但是有没有一种方法可以在不必扩展 List 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T08:33:41.343

使用 linq：

```
bool hasSugar = list.Any(i => i.Equals("sugar")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T09:33:23.470

海德良，

Linq 可以为您解决这个问题吗？下面在我的示例“MyType”中是一个整数列表，但我能够对字符串值执行“包含”并返回一个过滤列表。

```
using System.Collections.Generic;
using System.Linq;

List<int> list = new List<int>();

List<int> sList = (from s in list
where s.ToString().Contains("1")
select s).ToList(); 
```

我希望这会有所帮助。您应该搜索 Linq 示例，它非常强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T10:38:05.767

如果您已经为您的自定义类型实现了接口，那么 Contains 可以与自定义 IEquatable 一起使用。您可以为特定类型实现一个通用的 IEquatable 接口，例如。它们都有一个**唯一的**int 值，可以用作 id。在这种情况下，您可以使用 IEquatable ，并在实现主体中：

```
class MyType1 : IEquatable<int>

bool IEqutabale<int>.Equals(int other)
{
    if (Id == other) return true;
    return false;
} 
```

那么您可以进行如下比较：

```
if (Type1List.Cast<IEquatable<int>>().Contains(type2Obj.Id)
{
   //write your code here
} 
```

您的另一个选择是在两种类型之间实现**直接平等。**那是 ：

```
class MyType1 : IEquatable<MyType2>

bool IEquatable<MyType2>.IEquals(MyType2 other)
{
     //write equality logic here
} 
```

然后可以进行如下比较：

```
if(Type1List.Cast<IEquatable<MyType2>>().Contains(type2Object))
{
    //write your code here
} 
```

# sql - 将子行计数为查询中的条件

> ID：10052990
> 
> 赞同：1
> 
> 时间：2012-04-07T08:30:11.777
> 
> 标签：sql, ruby, activerecord, count

我有一个组表，其中包含一个“容量”列，并且与 Enrollments 具有 has_many 关系。我希望能够找到注册人数少于其容量的组，因此使用 ActiveRecord + Ruby 我可以这样做：

```
Group.all.select {|g| g.enrollments.count < g.capacity }.first 
```

但似乎应该有一种方法可以在 SQL 中做到这一点，我只是不知道怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:42:07.897

执行此操作的纯 SQL 方式是

```
select groups.* from groups
    inner join enrollments on enrollments.group_id = groups.id
group by groups.id
having count(*) < capacity 
```

或在活动记录中

```
Group.joins(:enrollments).group('groups.id').having('count(*) < capacity) 
```

但是，在计数器列上具有索引的计数器缓存会更快，尽管显然您不必在 acriverecord 的背后创建注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:34:25.850

可以使用 :counter_cache 选项。

1.  在 Groups 表中添加一个enrollments_count 列

    ```
    column :groups, :enrollments_count, :integer, :default => 0 
    ```

2.  设置 Enrollment 的 :counter_cache 选项

    ```
    class Enrollment < ActiveRecord::Base
      belongs_to :group, :counter_cache => true
    end 
    ```

3.  Group.where("容量 > 注册数").first

# mysql - 使用 MySQL 查找与十进制度坐标最近的 X 位置的效率

> ID：10052992
> 
> 赞同：1
> 
> 时间：2012-04-07T08:30:23.043
> 
> 标签：mysql, performance, indexing, geolocation, geospatial

这听起来像是许多其他人发布的问题，但有一个我无法弄清楚的细微差别：在询问最近的 X 数据点时，我不想限制我的界限，并且查询需要快速.

现在我使用 SQL 如下：

```
SELECT * FROM myTable WHERE col1 = 'String' AND col2 = 1
ORDER BY (latCol - <suppliedLat>) + (longCol - <suppliedLong>)
LIMIT X;  //X is usually lower than 100 
```

将 Lat 和 Long 存储为双精度，并且表包含大约一百万行，这个查询在我们的服务器上需要大约 6 秒 - 不够快。EXPLAIN SELECT 告诉我它没有使用索引（正如预期的那样 - 只有一个索引并且它与位置无关），执行文件排序，并命中所有约 100 万行。

删除两个 WHERE 子句根本不会提高性能，我们应用于 col1、col2 和第三个 col 的一个索引实际上降低了该查询的性能，尽管大大提高了其他查询的速度。

我对如何解决这个问题的阅读使我相信空间索引是要走的路，但我们从不打算使用任何更高级的空间特征，如多边形和圆形边界，我们只需要速度。是否有一种简单的方法可以将空间（或其他类型）索引应用于已经存在的十进制度表以提高上述查询的速度？有没有更好的方法来编写查询以提高效率？

最大的杀手是，我读到的关于在 MySQL 中实现空间索引的大多数内容似乎都需要更改插入数据的方式，但是修改我们的 INSERT 语句以使用地理/空间数据类型大大增加了我们的开发周期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:49:50.353

这个想法是使用四键。它可以看起来像这样 12131212。​​然后键中的每个字符代表一个叶节点（四叉树的）。如果您想找到类似的位置，您可以简单地在 where 子句中使用 mysql 子字符串：WHERE SUBSTRING( `Field`,0,4) = "1213"。对于上述数据，它将返回第一个位置 12131212 和以 1213 开头的任何其他位置。当然，您可以将字符 1、2、3、4 替换为任何其他更有意义的字符。你下载我的 php 类 hilbert-curve@phpclasses.org。

# android - MediaPlayer.start() 死于点击过多

> ID：10052997
> 
> 赞同：0
> 
> 时间：2012-04-07T08:31:19.297
> 
> 标签：android

在 Adnroid 中，首先我通过以下方式声明媒体播放器

```
MediaPlayer mpl; 
```

接下来我在 onCreate 方法中有这个

```
mp = new MediaPlayer();
mp = MediaPlayer.create(this, R.raw.hit );
mp.setVolume(1, 1); 
```

和一个应该在调用时播放声音的函数

```
public void click()
{
    mp.start();
} 
```

但问题是，如果用户多次调用此函数，在它停止播放最后一个声音之前，它会在应用程序重置之前死亡并停止播放任何声音。

任何想法如何解决这个问题？

谢谢！

**编辑 - 找到了解决方案：**

```
mp.setOnCompletionListener(new OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {
    mpl.release();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:33:33.813

```
public void click()
{
    if( ! mp.isPlaying() ) {
        mp.start();
    }//if
}//met 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:34:56.317

您可以禁用该按钮。

或者您可以停止当前播放并加注星标

onClick() 中的新功能