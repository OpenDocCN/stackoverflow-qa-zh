# StackOverflow 问答 10573000-10573999

# objective-c - 向核心文本添加连字符？

> ID：10573001
> 
> 赞同：4
> 
> 时间：2012-05-13T15:39:11.907
> 
> 标签：objective-c, core-text, core-foundation

我正在尝试将连字符添加到字符串以使用 Core Text 进行绘制。到目前为止，我[在 NSString 上发现了这个试图添加连字符的类别扩展](http://blog.tupil.com/adding-hyphenation-to-nsstring/)，但它已经过时，并且当字符串有撇号时不起作用，以及许多其他问题。然后这个[其他人](http://frankzblog.appspot.com/?p=7001)使用该代码来执行此操作，但这取决于第一个源代码，这不好。

但是现在在 iOS 5 中显然有一个内置的连字符方法，尽管教程和示例非常稀缺：`CFStringGetHyphenationLocationBeforeIndex`. 任何对 Core Text 和 CF 更有经验的人都可以快速举例说明我如何可能使用此功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:11:36.760

好的，要使类别起作用，您只需要使用`[token length]`而不是 `strlen(tokenChars)`（第 112 行）。`CFStringGetHyphenationLocationBeforeIndex`只是在这里替换了一些核心[http://frankzblog.appspot.com/?p=7001](http://frankzblog.appspot.com/?p=7001) 如果您有简单的 CTFrameRef（CGPath 作为矩形），此方法确实有效。

# javascript - Javascript按字母顺序匹配字符串的开头，然后按字母顺序匹配包含的文本

> ID：10573004
> 
> 赞同：10
> 
> 时间：2012-05-13T15:39:36.690
> 
> 标签：javascript, sorting

我需要帮助整理一些数据。假设我在搜索字段中输入“piz”。我得到了包含“piz”的所有条目的回报和数组。

我现在想按以下顺序显示它们：

```
pizza 
pizzeria
apizzetto
berpizzo 
```

首先是以我按字母顺序键入的内容开头的项目，然后是包含我按字母顺序键入的内容的项目。

相反，如果我按字母顺序对它们进行排序，我会得到以下信息

```
apizzetto
berpizzo
pizza 
pizzeria 
```

有谁知道如何做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T15:50:56.847

您可以将数据拆分为两个数组，一个以您的输入开头，一个不以您的输入开头。分别排序，然后合并两个结果：

```
var data = [
    'pizzeria',
    'berpizzo',
    'apizzetto',
    'pizza'
];

function sortInputFirst(input, data) {
    var first = [];
    var others = [];
    for (var i = 0; i < data.length; i++) {
        if (data[i].indexOf(input) == 0) {
            first.push(data[i]);
        } else {
            others.push(data[i]);
        }
    }
    first.sort();
    others.sort();
    return(first.concat(others));
}

var results = sortInputFirst('piz', data); 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/nH2Ff/](http://jsfiddle.net/jfriend00/nH2Ff/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-20T13:03:30.327

正确的完整解决方案是：

```
var data = [
    'pizzeria',
    'berpizzo',
    'apizzetto',
    'pizza'
];

var _sortByTerm = function (data, term) {
    return data.sort(function (a, b) {
       return a.indexOf(term) < b.indexOf(term) ? -1 : 1;
    });
};

var result = _sortByTerm(data, 'piz'); 
```

如果您想要对象排序，请使用此功能：

```
var _sortByTerm = function (data, key, term) {
     return data.sort(function (a, b) {
        return a[key].indexOf(term) < b[key].indexOf(term) ? -1 : 1;
     });
 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T15:55:11.577

Here's another one:

```
var str = 'piz';
var arr = ['apizzetto','pizzeria','berpizzo','pizza'];

arr.sort(function(a,b) {
    var bgnA = a.substr(0,str.length).toLowerCase();
    var bgnB = b.substr(0,str.length).toLowerCase();

    if (bgnA == str.toLowerCase()) {
        if (bgnB != str.toLowerCase()) return -1;
    } else if (bgnB == str.toLowerCase()) return 1;
    return a < b ? -1 : (a > b ? 1 : 0);
});

console.log(arr); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-02T15:52:04.543

使用减少：

```
const data = ['pizzeria', 'berpizzo', 'pizza', 'apizzetto'];

function sortInputFirst(input, data) {
    data.sort();
    const [first, others] = data.reduce(([a, b], c) => (c.indexOf(input) == 0 ? [[...a, c], b] : [a, [...b, c]]), [[], []]);
    return(first.concat(others));
}

const output = sortInputFirst('piz', data);
console.log(output) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-10T23:05:46.563

以下是我如何使用投票最多的答案来使我的搜索功能使用标准化的数据集。它在比较字符串之前删除重音，并且不区分大小写。

```
function getAutocompleteNormalizedMatches(userInput, array) {
    const normalizedInput = getNormalizedString(userInput);
    let normalizedListItem;
    let startsWith = [];
    let anywhere = [];
    for (let i = 0; i < array.length; i++) {
        normalizedListItem = getNormalizedString(array[i]);
        if (normalizedListItem.indexOf(normalizedInput) === 0) {
            startsWith.push(array[i])
        } else if (normalizedListItem.includes(normalizedInput)) {
            anywhere.push(array[i])
        }
    }
    startsWith.sort();
    anywhere.sort();
    return startsWith.concat(anywhere);
}

const getNormalizedString = function (str) {
    str = str.replace(/\s+/g, " ").trim();
    return (str ? removeDiacritics(str.toLowerCase()) : "");
}; 
```

要获取 removeDiacritics() 函数，请参考此链接，因为如果你们不需要它，它会占用相当多的无用空间：[Remove Accents diacritics in a string with JavaScript](https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript)

# configuration - MODX：new_folder_permissions 和 new_file_permissions 在哪里？

> ID：10573007
> 
> 赞同：1
> 
> 时间：2012-05-13T15:40:00.087
> 
> 标签：configuration, modx

在安装过程中会询问这些内容，但不会在配置文件\表中的任何位置进行更改

编辑：

变更日志指出以下内容：

*   [#MODX-760]、[#MODX-1080]、[#MODX-1528] 添加设置选项以在欢迎视图中设置 new_file_permissions 和 new_folder_permissions
*   [#MODX-760]、[#MODX-1528] 从设置中删除了 new_file_permissions 和 new_folder_permissions 系统设置

这样做对我来说似乎有点奇怪......不过，我仍然需要改变它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:25:49.537

这些似乎应该在您的 MODX 系统设置中，尽管我无法在我自己的任何 MODX 安装（所有 Revo 2.1+）中找到它们。它们有可能是多余的，或者由于某种原因在安装过程中没有正确创建（在这种情况下，它可能是安装程序错误）。

您可以通过添加这些设置来覆盖它们，如下所示：

```
Key:    new_folder_permissions
Value:  0755 
```

这样做，然后尝试使用文件管理器创建一个新文件夹。让我们知道是否正在使用正确的权限。如果是这样，我会考虑为安装程序打开一个错误报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T23:05:07.147

它们不在系统设置中，因为它们默认为 PHP umask 值，因为它们应该如此。如果要覆盖它们，可以通过将设置“new_file_permissions”或“new_folder_permissions”添加到系统设置来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:19:45.877

apache/webuser 需要写入：core/cache core/export core/config/config.inc.php [安装后改回] core/packages core/components assets/components

*编辑*对不起，看看这里： core/model/modx/processors/system/filesys/folder/create.php 他们似乎在该文件中被硬编码。

# c++ - 即使我在设计器中更改了高度，组合框下拉菜单也不起作用

> ID：10573010
> 
> 赞同：0
> 
> 时间：2012-05-13T15:40:40.377
> 
> 标签：c++, windows, visual-studio-2008, mfc, combobox

我正在尝试修复组合框下拉列表，因为它没有正确列出。列表中只显示一个项目，其余所有您可以使用箭头键看到。我也增加了设计师的高度，无论如何这不是问题，为什么因为它在某些机器上列出并且相同的版本在我的机器上不起作用。我使用 DDX_Control 将此控件分配给一个变量。我们是否需要考虑任何其他可能影响下拉列表的事情？

环境：vs2008，windows 7

可能是我没有以正确的方式解释问题。经过一番谷歌搜索后，我知道我应该在这里多提几点。我将此组合框嵌入到对话框编辑器中，已经有一些组合框可以正常工作。它们可能是用早期版本的 VS 创建的。即使我尝试在这个新组合上设置 SetMinVisibleItems，但总是返回失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:51:24.683

*下拉*组合框的高度确实是对话框模板中控件的高度。如果你在设计器中让你的组合框足够高，那么它应该在打开时显示几行。

根据您所做的，正确的行为是其他计算机。错误的行为是您的计算机。

不，在设计组合框时无需考虑其他事项。使用您的调试器并尝试找出您的计算机上的组合框高度降低的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:16:51.630

如果`No Integral Height`组合框属性设置为 true，并且组合框的列表框组件的高度被无意中设置为组合框组件的高度，则可能会发生这种情况。

对话框设计器允许您设置这两个高度。单击下拉箭头图标，然后底部节点调整列表框组件。将该高度更改为您想要的高度，并将其设置`No Integral Height`为 false。

这并不能解释为什么它可以在其他机器上运行，但请尝试一下。

# google-app-engine - 如何将 com.google.appengine.api.datastore.Entity 转换为我的实体对象？

> ID：10573012
> 
> 赞同：2
> 
> 时间：2012-05-13T15:41:05.577
> 
> 标签：google-app-engine, google-cloud-datastore

为什么当我尝试使用 com.google.appengine.api.datastore.Query 获取某些数据库对象时出现转换错误

例如：DatastoreService 数据存储 = DatastoreServiceFactory.getDatastoreService(); 查询 q = new Query("用户");

```
PreparedQuery pq = datastore.prepare(q);

for (Entity entity : pq.asIterable()) {
   User myUser = (User)entity;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:38:41.637

You can not do that. Entities returned are of type `Entity` and in java you can not just cast one type to another.

If you want queries to return objects of custom type, you need some kind of mapping framework, for example [`objectify`](http://code.google.com/p/objectify-appengine/). It lets you directly use your classes in database operations.

# qt - int 和 QComboBox 之间的简单连接？

> ID：10573013
> 
> 赞同：1
> 
> 时间：2012-05-13T15:41:07.173
> 
> 标签：qt, qcombobox

不知怎的，我觉得问这个问题真的很傻，但我只花了 2 个小时阅读这个网站和其他信息源，我只找到复杂的解决方案，而我坚信必须有一个非常简单的解决方案来解决我的问题。

例如，在 TCL/TK 中，我可以在 2 行代码中定义一个变量并将其绑定到一个组合框。同样在 Qt/C++ 中，我在我的一个类中定义了一个 int，并且我希望 QCombobox 将该 int 设置为所选元素的编号（索引）。

我真的必须深入研究模型/视图及其类来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:50:27.820

[`currentItemChanged(int)`](http://qt-project.org/doc/qt-4.8/qcombobox.html#currentIndexChanged)您所需要的只是一个连接到组合框信号的插槽。该插槽可以更新您的`int`变量，或对所选索引执行任何操作。（看看 QComboBox 的其他信号，还有替代方案。）

（这是 1 行，`connect`插槽是 1、2 或 3 行，具体取决于您如何计算。）

# jquery - 如何使用 sinatra 中的模板引擎为 AJAX 调用返回“文本/html”内容？

> ID：10573015
> 
> 赞同：0
> 
> 时间：2012-05-13T15:41:12.577
> 
> 标签：jquery, ajax, sinatra, slim

所以，我对 Ajax（使用 JQuery）和 Sinatra 有疑问。

我有一条路线：

```
get '/ajx' do
  content_type 'text/html', :charset => 'utf-8'
  slim :mypartitial, :layout => false
end 
```

这将通过 Ajax "GET" 调用：

```
 $(document).ready(function() {
    $('#vars').click(function(event){
      $.ajax({  
        type: "GET",  
        url: "/ajx",  
        data: "",
        success: function(data) {  
          $("#result").html(data)
        }  
      }); 
    });
  }); 
```

但我没有得到 html 输出，也没有渲染任何内容。我想问题就在这里

```
 slim :mypartitial, :layout => false 
```

但我不知道如何返回仍然使用模板引擎的有效 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:57:48.730

我的错。它需要

```
$(document).ready(function() {
  $('#vars').click(function(event){
    $.ajax({  
      type: "GET",  
      url: "/ajx",  
      data: "",
      success: function(data) {  
        $("#result").html(data)
      }  
    });
  return false;   //  <-- 
  });
}); 
```

# android - 使用加载器管理游标

> ID：10573016
> 
> 赞同：3
> 
> 时间：2012-05-13T15:41:39.280
> 
> 标签：android, loader

我编写了一个 Android 应用程序并问自己如何管理光标。我知道如何通过游标从数据库中获取数据。我不想自己处理这些游标的生命周期。对于 Android 2.x 及更低版本，根据 Android API，我使用了 managedQuery 和 startManagingCursor 等方法。这些方法现在已弃用。例如，我应该使用 Loader 类（CursorLoader）来代替这些方法。据我所知，CursorLoader 必须由 ContentProvider 支持。仅当我想共享我的数据时，Android SDK 才会推荐 ContentProvider。但我只想写一个简单的应用程序，不应该共享数据。在我所有的研究中，我只是找到了有关 Loaders 和 ContentProvider 的教程。SDK 说我也可以在类 AsyncTaskLoader 上编写自己的 Loader。是否有人已经有一些经验如何实现这样的加载器？有没有最佳实践？有没有好的教程如何实现这样的加载器？还是实现一个 ContentProvider 更好，这样我就可以使用 CursorLoader（这意味着只有一个托管游标需要做很多工作）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:08:29.823

使 ContentProvider[`android:exported="false"`](http://developer.android.com/guide/topics/manifest/provider-element.html#exported)在您的清单中私有使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T15:47:43.943

ContentProviders 比您想象的要容易，并且是 Android 团队建议的方式。请参阅[http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html](http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html)以获得创建 ContentProvider 的一个很好的示例。

# php - 分配一个等于 Include 函数内容的变量

> ID：10573018
> 
> 赞同：2
> 
> 时间：2012-05-13T15:41:54.103
> 
> 标签：php, sidebar, vbulletin

这个问题出现在 vBulletin 系统中。我想在侧边栏区域构建一个块来帮助我完成一些日常工作.. 我写了这样的 php 代码：

```
<?php
    $myDay = date('D');
    $myHour = date('G');
    // Saturday
    if ($myDay == "Sat") {
        if ($myHour >= 7) {
            $output = include('textFilePath/saturday.txt');
        } else {
            $output = include('textFilePath/friday.txt');
        }
    }
    // Sunday
    if ($myDay == "Sun") {
        if ($myHour >= 7) {
            $output = include('textFilePath/sunday.txt');
        } else {
            $output = include('textFilePath/saturday.txt');
        }
    }
    // and it goes on to friday...
    // and in the end :
    return $output;
?> 
```

我的问题是 include() 函数。当我返回 $output 值时，它返回一个布尔值（0 或 1）并包含函数在文档开头写出 txt 文件内容而不是“侧边栏块”我知道我可以回显实际内容而不是使用 include 和 txt文件。但正如我所说，我想自动化日常任务并让用户访问编辑 txt 文件。

是否有任何其他技术或功能可以将本地文件的内容分配给变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T15:44:12.240

你可能想检查

```
$output = file_get_contents('textFilePath/saturday.txt'); 
```

更多信息在这里：http: [//in3.php.net/file_get_contents](http://in3.php.net/file_get_contents)

# vba - 如何删除除shaperange之外的页眉和页脚

> ID：10573020
> 
> 赞同：1
> 
> 时间：2012-05-13T15:42:06.500
> 
> 标签：vba, header, ms-word, shapes

可以使用 delete 命令删除页眉和页脚。但我想从页眉/页脚中删除除形状之外的所有内容。有两个范围：TextRange 和 ShapesRange。ShapeRange 可以按如下方式访问。

```
 For Each sec In worddoc.Sections
        For Each hdr In sec.Headers
            For Each sh In hdr.Shapes
                If sh.Left > 200 Then
                    'Do something
                End If
            Next sh
        Next hdr
    Next sec 
```

如何删除文本范围？

通过设置 .TextRange="" 将删除表格，文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:40:33.003

这是你想要的吗？

```
Option Explicit

Sub Sample()
    Dim ctl As ContentControl
    Dim tbl As Table
    Dim i As Long

    With ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Range

        On Error Resume Next
        '~~> Delete all controls like textbox label etc
        For Each ctl In .ContentControls
            ctl.Delete
        Next

        '~~> Delete all tables
        For Each tbl In .Tables
            tbl.Delete
        Next
        On Error GoTo 0

        '~~> Delete all printable/non printable characters
        For i = 0 To 255
            With .Find
                .ClearFormatting
                .Replacement.ClearFormatting
                .Text = Chr(i)
                .Replacement.Text = ""
                .Forward = True
                .Wrap = wdFindContinue
                .Execute Replace:=wdReplaceAll
            End With
        Next i
    End With

    MsgBox "Done" 

End Sub 
```

**快照**

![在此处输入图像描述](../Images/13c7a0e2e60dd5659e5d36b7cdb28e5a.png)

# jquery - jQuery滚动超时

> ID：10573021
> 
> 赞同：5
> 
> 时间：2012-05-13T15:42:26.347
> 
> 标签：jquery, scroll, settimeout

我在滚动操作时使用 jquery 设置了超时。例如，在滚动等待 10 秒并发送 ajax 请求后，如果接收到第一个超时未处理的滚动新动作，如何取消先前的超时？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T15:56:51.380

Use [`clearTimeout`](https://developer.mozilla.org/en/DOM/window.clearTimeout):

```
var timer;

$(window).scroll(function(){

    if ( timer ) clearTimeout(timer);

    timer = setTimeout(function(){
        // Make your AJAX request here...
    }, 10000);
}); 
```

# google-apps-script - 对于 Google Apps 脚本：建议的部署路线以启用 Android 智能手机功能？

> ID：10573022
> 
> 赞同：1
> 
> 时间：2012-05-13T15:42:57.607
> 
> 标签：google-apps-script

我开发了一个漂亮的 Google Apps Script 应用程序。我现在想将它移植到 Android 智能手机上。有没有建议的迁移路线来做到这一点？

我知道 Google Apps Script 已经基于 Google Web Toolkit，这是否意味着我可以使用相同的 GUI 小部件？例如垂直面板？

谢谢你，康梅特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:33:36.723

正如 Waqar 提到的，最好的方法是在浏览器中打开 GAS UI。是的，Henrique 也是对的——并不是所有的 UI 元素都是触摸友好的。

另请参阅为此打开的问题 - [http://code.google.com/p/google-apps-script-issues/issues/detail?id=1092](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1092)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:26:49.553

您的意思是可安装的 Android 应用程序。如果是这样，我还没有遇到任何可以将 GAS 代码移植到 Android 应用程序的东西。如果您指的是 Web 应用程序，您可以使用您的 android 浏览器通过服务 URL 在您的 android 手机上访问您发布的应用程序脚本应用程序。

# shell - 如何组合两个图像 (png) 文件以使用 AppleScript 进行双面打印

> ID：10573029
> 
> 赞同：0
> 
> 时间：2012-05-13T15:44:05.203
> 
> 标签：shell, printing, applescript, automator

是的，所以我会尽可能清楚地解释这一点；

将两个文件放在文件夹中后，我想要一个文件夹操作来打印这些文件 - 明白了......

但是，这是我的问题。目前它一个接一个地打印文件，我想确保它们打印在一起，双面打印。

到目前为止，我有这个：

```
 on adding folder items to this_folder after receiving added_items
    do shell script "defaults write com.apple.print.custompresets com.apple.print.lastPresetPref Duplex"

    tell application "Finder" to print these_items
end adding folder items to 
```

所以我认为我需要合并/附加这两个文件 - 所以打印机将它们视为一个，结果只有一个打印作业，从而创建一个双面打印文件：D

如果您对如何解决这个问题有提示/想法，那就太棒了！干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:22:54.257

我找到了一个由 Martin Michel 编写的 python 脚本，它将多个图像组合到一个文件中。它应该可以帮助您解决问题......在[这里](http://files.macscripter.net/joy/files/combimgs.py)找到它。您可能希望先使用图像事件来调整图像大小，然后再将其传递给此脚本，以便它们正确地适合打印页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:43:03.263

您可以创建一个简单的 Automator 文件夹操作，该操作将从添加的图像文件创建多页 PDF，然后直接在 Automator 中打印，或将其传递给 AppleScript 以设置您的打印机首选项。

![Automator 文件夹操作屏幕截图](../Images/b7551251e69c086076180d6339e8c5dd.png)

# ruby - 红宝石中的奇怪数组测试

> ID：10573036
> 
> 赞同：0
> 
> 时间：2012-05-13T15:45:03.523
> 
> 标签：ruby, arrays, each

我注意到奇怪的行为。虽然这个按预期运行：

```
@a = ['0','1','2','3','4','5']
def test2
  @a[0..2].each do |i|
    puts 'I am at: ' +i.to_s
    if i == '2'
      puts 'I am removing 2'
      @a.delete(i)
      licz
    end
  end
end

I am at: 0
I am at: 1
I am at: 2
I am removing 2
I am at: 0
I am at: 1
I am at: 3 
```

不知何故，这段代码“记住”了旧数组并尝试完成之前的“if”语句：

```
@a = ['0','1','2','3','4','5']
def test1
  @a.each do |i|
    puts 'I am at: ' +i.to_s
    if i == '2'
      puts 'I am removing 2'
      @a.delete(i)
      test1
    end
  end
end
    I am at: 0
    I am at: 1
    I am at: 2
    I am removing 2
    I am at: 0
    I am at: 1
    I am at: 3
    I am at: 4
    I am at: 5
    I am at: 4
    I am at: 5
    => ["0", "1", "3", "4", "5"] 
```

为什么它重复 4 5, 4 5 ？

我知道在第二次测试中，我在每个元素上运行每个，但为什么它试图完成旧语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T15:49:40.973

因为您两次调用相同的函数（test1）。

# asp.net-mvc-3 - loginUrl 重定向到其他地方

> ID：10573038
> 
> 赞同：1
> 
> 时间：2012-05-13T15:45:44.033
> 
> 标签：asp.net-mvc-3

在单击“添加可部署依赖项”之前，我有一个运行正常的 asp.net mvc 应用程序。因为我在部署服务器上遇到了一些问题，我不得不点击那个选项。这样做之后，web.config 中的身份验证部分无法正常工作：

它不是将我重定向到 ~/Admin/LogIn 而是将我重定向到 Account/Login?...

我阅读了这些有用的链接，例如[http://forums.asp.net/p/1613705/4128618.aspx](http://forums.asp.net/p/1613705/4128618.aspx)，我在服务器中应用了解决方案。

但是我的问题是，为什么我的应用程序不再像以前那样在本地机器上工作，而没有身份验证重定向问题？

# matlab - Matlab：图形用户界面。获取 ActiveX 控件的处理程序

> ID：10573039
> 
> 赞同：1
> 
> 时间：2012-05-13T15:45:59.913
> 
> 标签：matlab, user-interface, activex

我下载了activeX组件**mschrt20.ocx**并注册了它。

然后我将它添加到 GUI 并查看，我不知道如何在没有处理程序的情况下设置/获取属性，因为它没有**属性**`Tag`。

`Tag`它没有财产，而是`hWnd`财产。

如何处理，知道`hWnd`吗？

另一个问题是替代解决方案。

我可以像这样创建对象：

```
 f = figure('position',[0 0 600 500]);
      mschrt = actxcontrol('MSChart20Lib.MSChart.2',[0 0 600 500], f);
      %... many settings here 
```

但为此我必须创建图形并将其放入 gui 形式。

如何在gui中做到这一点？（轴，也许？）

# ruby - 将 n 个元素附加到数组

> ID：10573041
> 
> 赞同：4
> 
> 时间：2012-05-13T15:46:06.280
> 
> 标签：ruby, arrays

我有一个数组和一个哈希

```
L = []
H = {3=>"a", 2=>"b", 1=>"c"}

```

因此，我将遍历键以获取元素出现的次数 n 并将该元素附加到数组 n 次

结果

```
L = ['a', 'a', 'a', 'b', 'b', 'c']

```

用注入（或我经常在 ruby​​ 代码中看到的其他方法）编写此代码的好方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T15:50:12.143

```
array = hash.flat_map { |k,v| [v]*k } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:36:03.427

@David 的回答可以满足您的需求。但是，通常，您可以通过以下方式之一将对象*o*添加到现有数组*n*次：

```
# Modify the array in-place, or…
my_array.concat( [o]*n )

# …alternatively create a new modified array
new_array = my_array + [o]*n 
```

# c# - Json.Net JObject 的 Automapper 反射错误

> ID：10573048
> 
> 赞同：2
> 
> 时间：2012-05-13T15:47:41.260
> 
> 标签：c#, json.net, automapper

将 AutoMapper 与 json.net JObject 一起使用时出现反射错误

```
public class Source
{
    public string Key { get; set; }
    public JObject Value { get; set; }
} 
```

这里是目标

```
public class Target
{
    public string Key { get; set; }
    public JObject Value { get; set; }
} 
```

这是映射

```
public class SourceTargetMapping
{
    public static void IntializeMapping()
    {
        Mapper.CreateMap<Target, Source>()
            .ForMember(g => g.Value, op => op.ResolveUsing(s => s.Value));

        Mapper.CreateMap<Source, Target>()
            .ForMember(s => s.Value, op => op.ResolveUsing(g => g.Value));
    }

}

public static class SourceTargetMappingExtensions
{
    public static Source ToDomain(this Target repoItem)
    {
        var result = Mapper.Map<Target, Source>(repoItem);
        return result;
    }

    public static Target ToRepo(this Source domainItem)
    {
        var result = Mapper.Map<Source, Target>(domainItem);
        return result;
    }

    public static List<Source> ToDomain(this ICollection<Target> repoCollection)
    {
        return Mapper.Map<ICollection<Target>, List<Source>>(repoCollection);
    }

    public static List<Target> ToRepo(this ICollection<Source> domainCollection)
    {
        return Mapper.Map<ICollection<Source>, List<Target>>(domainCollection);
    }

} 
```

这是（NUnit）单元测试（非空值失败，空值通过）

```
[TestFixture]
public class AutoMappingTest
{
  [SetUp]
  public void SetUp()
  {
    SourceTargetMapping.IntializeMapping();
    Mapper.AssertConfigurationIsValid();
  }

  [TestCase("State", "{\"State\":\"TX\"}", "Should handle normal value")]
  [TestCase("State", @"{""State"":""TX""}", "double quoted quotes")]
  [TestCase("State", "", "empty json")]
  [TestCase("State", null, "null json")]
  public void ShouldMapFromSourceToTarget(string key, string value, string description)
  {
    //arrange
    JObject jObject = (!string.IsNullOrEmpty(value)) ? JObject.Parse(value) : new JObject();
    var source = new Source() {Key = key, Value = jObject};

    //act
    var repo = source.ToRepo();

    Assert.IsNotNull(repo);
    Assert.AreEqual(key, repo.Key);
  } 
```

这是一个例外：

```
AutoMapper.AutoMapperMappingException : 

Mapping types:
JObject -> JObject
Newtonsoft.Json.Linq.JObject -> Newtonsoft.Json.Linq.JObject

Destination path:
Target.Value

Source value:
{
  "State": "TX"
}
  ----> System.Reflection.TargetException : Object does not match target type.
at IsolationChamber.SourceTargetMappingExtensions.ToRepo(Source domainItem) in SourceTargetMapping.cs: line 62
at IsolationChamberTest.AutoMappingTest.ShouldMapFromSourceToTarget(String key, String value, String description) in AutoMapperSiteSettingTest.cs: line 35
--TargetException
at System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
at AutoMapper.Mappers.DictionaryMapper.Map(ResolutionContext context, IMappingEngineRunner mapper)
at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) 
```

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-30T21:01:05.723

我有同样的问题，只需添加一个显式映射 JObject -> JObject 即可克隆。

```
Mapper.CreateMap<JObject, JObject>().ConvertUsing(value =>
{
    if (value == null)
        return null;

    return new JObject(value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:55:58.673

事实证明我没有正确地进行映射。我根据 AutoMapper 的[文档](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)创建了一个自定义类型转换器，然后它就可以工作了。

# zend-framework - 正则表达式路由 - 找不到规则

> ID：10573049
> 
> 赞同：0
> 
> 时间：2012-05-13T15:47:55.753
> 
> 标签：zend-framework

我正在定义用于清理我的 URLS 的正则表达式路由。这个想法是用户添加的所有页面都将使用 URL www.example.com/page-slug，而不是使用实际的控制器 www.example.com/userpages/page-slug。其他页面将遵循标准的 module:controller:action 路由方案。

我正在尝试使用路由器优先级来实现这一点。

我已经定义了下面的方案..

```
class Default_Bootstrap extends Zend_Application_Module_Bootstrap{  

protected function _initRoute() {

    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter(); // returns a rewrite router by default

    $route['index'] = new Zend_Controller_Router_Route_Regex(
        '/',
        array(
        'module'     => 'default',
        'controller' => 'index',
        'action'     => 'index'
        )
    );
    $route['contact'] = new Zend_Controller_Router_Route_Regex(
        'contact/(\d+)',
        array(
        'module'     => 'default',
        'controller' => 'contact',
        'action'     => 'index'
        )
    );
    $route['research'] = new Zend_Controller_Router_Route_Regex(
        'research/(\d+)',
        array(
        'module'     => 'default',
        'controller' => 'research',
        'action'     => 'index'
        )
    );
    $route['account'] = new Zend_Controller_Router_Route_Regex(
        'account/(\d+)',
        array(
        'module'     => 'default',
        'controller' => 'account',
        'action'     => 'index'
        )
    );
    $route['userpages'] = new Zend_Controller_Router_Route_Regex(
        '/(.+)',
        array(
        'module'     => 'default',
        'controller' => 'userpages',
        'action'     => 'index'
        ),
        array(
        'slug' => 1
        ),
        '%s'
    );

    $router->addRoute('userpages',     $route['userpages']);
    $router->addRoute('contact',       $route['contact']);
    $router->addRoute('research',      $route['research']);
    $router->addRoute('account',       $route['account']);
    $router->addRoute('index',         $route['index']);

}

} 
```

路由器优先级通常工作正常，可确保索引/帐户/研究/联系页面选择正确的控制器。但是，当尝试访问“userpages”路由（例如“about-us”）所涵盖的 URL 时，未找到最终捕获所有路由，导致...

```
Message: Invalid controller specified (about-us) 
.
.
.
Request Parameters:

array (
  'controller' => 'about-us',
  'action' => 'index',
  'module' => 'default',
) 
```

知道我在哪里出错了吗？在我看来，正则表达式是正确的“/（。+）”应该捕捉到所有不是索引页面的东西。

编辑：@phatfingers，好吧，你是对的，我已将 "\d+" 编辑为 ".+" 以捕捉一个或多个任何字符。问题仍然存在。事实上，在更改正则表达式之前，我尝试了 URL www.example.com/52，并得到了同样的错误 - “指定的控制器无效 (52)”。更改后 - 使用上面编辑过的代码段的代码，该规则仍然无法找到任何匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:24:51.887

在 'userpages' 正则表达式中删除正斜杠，即 ('.+)

引用直接来自手册[Zend Router](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.regex)和 Router_Regex 但它也适用于所有路由。

> 注意：在匹配之前从路由器中的 URL 中修剪前导和尾随斜杠。因此，匹配 URL [http://domain.com/foo/bar/](http://domain.com/foo/bar/)将涉及 foo/bar 的正则表达式，而不是 /foo/bar。

# controller - Codeigniter formgenlib multiple forms under same controller

> ID：10573050
> 
> 赞同：0
> 
> 时间：2012-05-13T15:48:08.827
> 
> 标签：controller, codeigniter-2, multiple-forms

> That was a bug of the component being used.

I have to use multiple forms in a page.

My Problem: I can not stop the code check the unsubmitted form with the other ?automaticly?. *Errors are different. One’s error is not shown under other’s error list.

Here is my code to generate required forms using formgenlib under my controller. By the way, If I click on the first button, "//do the stuff..." doesn’t work. But errors are shown.

```
$this->load->library('form');
                $login_form = new $this->form;
                $login_form
                    ->open()
                    ->col(240, 'left', 'left')
                    ->text()
                    ->col(170, 'left', 'left')
                    ->password()
                    ->col(100, 'left', 'right')
                    ->submit('', 'submit_login')
                    ->col(0)
                    ->validate();
                $data['login_form'] = $login_form->get();
                $this->load->view('overal_header', $data);
                $login_form->clear();
                $radio = array(
                    array('', ''),
                    array('', ''),
                );
                $register_form = new $this->form;
                $register_form
                    ->open()
                    ->fieldset()
                    ->text()
                    ->text()
                    .
                    .
                    .
                    ->submit('', 'submit_form');
                    if($this->input->post('submit_form'))
                    {
                        $register_form->validate();
                        if($register_form->valid)
                        {
                            //do the stuff here...
                        }
                    }
                $data['form'] = $register_form->get();
                $data['errors'] = $register_form->errors;
                $register_form->clear();
                $this->load->view('page_welcome', $data);
                $this->load->view('overal_footer'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:00:52.500

不确定这是否重要，但文档显示使用多种形式略有不同。每个表格使用：

```
$this->form->text 
```

代替

```
$login_form->text 
```

并且不区分这两种形式，直到

```
$this->form->get() 
```

所以清除的调用将是

```
$this->form->clear() 
```

同样，不确定这是否真的重要。也许只是别的东西要看。

# visual-studio-2010 - how to debug asynccallback method

> ID：10573052
> 
> 赞同：1
> 
> 时间：2012-05-13T15:48:24.177
> 
> 标签：visual-studio-2010

I mean for example AsyncGetter method.

```
req = (HttpWebRequest) WebRequest.Create("http://www.google.com/ig/api?weather=" + city + "&hl=" + lang);
req.Method = "GET";
req.BeginGetResponse(AsyncGetter, req); 
```

When I use F11 it doesn't enter this method.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:50:41.383

在您的异步回调方法中放置另一个断点，此时无需按 F11（您可以在此时按 F5）并让该方法执行，一旦您得到响应，它将落到您在回调方法中设置的断点。

**编辑：**

```
req.BeginGetResponse(new AsyncCallback(AsyncGetter), req); 
```

异步获取器（）：

```
private void AsyncGetter(IAsyncResult result){
    HttpWebRequest req = (HttpWebRequest)result.AsyncState;
    ...
} 
```

# c++ - C++ boost 错误：无法在初始化中将 const value type* (aka const wchar_t*) 转换为 const char*

> ID：10573054
> 
> 赞同：0
> 
> 时间：2012-05-13T15:48:37.573
> 
> 标签：c++, boost, char, constants, value-type

我正在尝试使用 boost 模块和 c++ 从文件中搜索一个单词，但我遇到了这个错误消息：

```
error: cannot convert 'const value_type* {aka const wchar_t*}' to 'const char*' in initialization 
```

错误来自这行代码：

```
const char* file_path = itr->path ().filename ().c_str(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T15:50:11.333

它告诉你你需要这个：

```
const wchar_t* file_path = itr->path ().filename ().c_str(); 
```

# java - Replacing the background of the main menu in minecraft

> ID：10573056
> 
> 赞同：0
> 
> 时间：2012-05-13T15:48:48.250
> 
> 标签：java, opengl, lwjgl, minecraft

I have gotten my code for this mostly working using some code i found for drawing with quads but it seems to only take up the lower left-hand corner of the minecraft screen with my image when it should take up the whole thing. I think i need some way to scale it but i don't know why i should need that or if i do... the code for doing the drawing is correct it's just that it's not drawing in the right spot... and i don't know why.

```
private void drawImageQuad(int textureHandle, int x, int y, float w, float h) {
    // activate the specified texture
    GL11.glBindTexture(GL11.GL_TEXTURE_2D,textureHandle);
    // prepare to render in 2D
    setOrthoOn();
    // draw the image textured onto a quad
    GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0f, 0f);
    GL11.glVertex3f( (float)x, (float)y, (float)0);
    GL11.glTexCoord2f(1f, 0f);
    GL11.glVertex3f( (float)x+w, (float)y, (float)0);
    GL11.glTexCoord2f(1f, 1f);
    GL11.glVertex3f( (float)x+w, (float)y+h, (float)0);
    GL11.glTexCoord2f(0f, 1f);
    GL11.glVertex3f( (float)x, (float)y+h, (float)0);
    GL11.glEnd();
    // restore the previous perspective and model views
    setOrthoOff();
}

private void setOrthoOn()
{
    // prepare to render in 2D
    if(GL11.glIsEnabled(GL11.GL_DEPTH_TEST)){
        depthTest=true;
        GL11.glDisable(GL11.GL_DEPTH_TEST);
    }

    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glPushMatrix();                            // preserve perspective view
    GL11.glLoadIdentity();                          // clear the perspective matrix
    GL11.glOrtho(0,width,0,height,-1,1);  // turn on 2D
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glPushMatrix();     // Preserve the Modelview Matrix
    GL11.glLoadIdentity();   // clear the Modelview Matrix
}

private void setOrthoOff()
{
    // restore the original positions and views
    if(depthTest){
        GL11.glEnable(GL11.GL_DEPTH_TEST);
        depthTest = false;
    }
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glPopMatrix();
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glPopMatrix();
}

/**
 * Draws the screen and all the components in it.
 */
public void drawScreen(int par1, int par2, float par3)
{
    //renderSkybox(par1, par2, par3);
    Tessellator tessellator = Tessellator.instance;
    double zoom = width/(double)384;
    int widthOffset = (int)((width - (384*zoom))/2);
    int widthOffset2 = widthOffset +(width*(384/256));
    this.drawImageQuad(mc.renderEngine.getTexture("/title/background0.png"),widthOffset,(height - (int)(256*zoom))/2,widthOffset+(int)(256*zoom),height+((height - (int)(256*zoom))/2));
    this.drawImageQuad(mc.renderEngine.getTexture("/title/background1.png"),widthOffset2,(height - (int)(256*zoom))/2,widthOffset2+(int)(256*zoom),height+((height - (int)(256*zoom))/2)); 
```

# php - Match words in a string which are not in anchor of link with regex

> ID：10573058
> 
> 赞同：1
> 
> 时间：2012-05-13T15:49:38.973
> 
> 标签：php, regex

I'm trying to find some words (or expression: like two words) in a string which are not in the anchor of a link (the string contains html code and is usually utf-8 encoded). The plan is to replace those words with some links after that.

I'm not really good with regex, i've searched the web and stackoverflow and found two regex patterns which help me, but each of them have an issue. I'm hoping someone can help me to combine those two example to get a good one.

First pattern: `/('.$tag.')(?![^<]*<\/a>)/is`

This pattern, finds the words, but if by example i'm trying to find "express" in the string:

`In computing, a regular expression provides a concise and flexible means...`

..i don't expect to find a match, however the match is found in the word "expression".

Second pattern: `\'(?!((<.*?)|(<a.*?)))(\b'.$tag.'\b)(?!(([^<>]*?)>)|([^>]*?</a>))\'is`

This pattern, doesn't have the previous issue, but if the word or expression, i'm trying to find has as a last character a special utf-8 character then i don't get a match.

Example word: apă

Example string: `...care transformă umiditatea din aer în apă potabilă. Dacă iniţial a fost creată pentru situaţia ţărilor...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:14:57.173

假设第二个正则表达式对你有用（我还没有测试过，我真的不认为你应该对这种东西使用正则表达式），你需要做的就是添加一个`u`修饰符，比如@hakre 说：

```
\'(?!((<.*?)|(<a.*?)))(\b'.$tag.'\b)(?!(([^<>]*?)>)|([^>]*?</a>))\'isu 
```

就个人而言，我会使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)来完成这项任务。

# r - R ff / ffbase 合并创建行

> ID：10573060
> 
> 赞同：2
> 
> 时间：2012-05-13T15:49:51.177
> 
> 标签：r, merge

我正在使用`ff`and`ffbase`包来组合两个`ffdf`对象，但是当我使用该`merge`语句时，它从目标中的 100 万行`ffdf`变为 800 万行。

ffdf1 是 100 万行乘 6 列：

```
> summary(ffdf2)
              Length  Class     Mode
userid        1000000 ff_vector list
V2            1000000 ff_vector list
V3            1000000 ff_vector list
V4            1000000 ff_vector list
V5            1000000 ff_vector list
V6            1000000 ff_vector list 
```

ffdf2 约为 2000 万行 X 3 列，如下所示：

```
 userid      gender      age
    1         1          3
    2         1          2
    3         2          5
    4         0          4
    5         2          3
    ...       ...       ... 
```

我使用以下代码将两者合并：

```
ffdf3 <- merge(ffdf1, ffdf2, by.x="userid",by.y="userid",all.x=T,sort=F) 
```

结果是这样的：

```
> summary(ffdf3)
                  Length  Class     Mode
    userid        8000000 ff_vector list
    V2            8000000 ff_vector list
    V3            8000000 ff_vector list
    V4            8000000 ff_vector list
    V5            8000000 ff_vector list
    V6            8000000 ff_vector list
    gender        8000000 ff_vector list
    age           8000000 ff_vector list 
```

任何想法为什么长度从 1 毫米到 8 毫米？

编辑：

当我尝试这个时：

```
ffdf3 <- merge(ffdf1, ffdf2, by.x="userid",by.y="userid",all.x=F,sort=F) 
```

我得到：

```
> summary(ffdf3)
                      Length  Class     Mode
        userid        740383 ff_vector list
        V2            740383 ff_vector list
        V3            740383 ff_vector list
        V4            740383 ff_vector list
        V5            740383 ff_vector list
        V6            740383 ff_vector list
        gender        740383 ff_vector list
        age           740383 ff_vector list 
```

这里也是运行合并的输出：

```
2012-05-13 14:49:06, x has 2 chunks, y has 8 chunks
2012-05-13 14:49:06, working on x chunk 1:500000
2012-05-13 14:49:07, working on y chunk 1:2958661
2012-05-13 14:49:16, working on y chunk 2958662:5917322
2012-05-13 14:49:32, working on y chunk 5917323:8875983
2012-05-13 14:49:45, working on y chunk 8875984:11834644
2012-05-13 14:49:57, working on y chunk 11834645:14793305
2012-05-13 14:50:09, working on y chunk 14793306:17751966
2012-05-13 14:50:20, working on y chunk 17751967:20710627
2012-05-13 14:50:30, working on y chunk 20710628:23669283
2012-05-13 14:50:40, working on x chunk 500001:1000000
2012-05-13 14:50:41, working on y chunk 1:2958661
2012-05-13 14:50:52, working on y chunk 2958662:5917322
2012-05-13 14:51:03, working on y chunk 5917323:8875983
2012-05-13 14:51:14, working on y chunk 8875984:11834644
2012-05-13 14:51:24, working on y chunk 11834645:14793305
2012-05-13 14:51:36, working on y chunk 14793306:17751966
2012-05-13 14:51:47, working on y chunk 17751967:20710627
2012-05-13 14:51:58, working on y chunk 20710628:23669283 
```

还`ffdf1`包含 677840 个唯一`userid`的。所以在 1mm 行中有一些重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:32:34.937

merge.ffdf 包含一个错误，目前只允许正确进行内部连接，而不是 all.x=TRUE 和 all.y=FALSE。该功能适用​​于@ [http://code.google.com/p/fffunctions/](http://code.google.com/p/fffunctions/)。问题是当您没有匹配的记录时，在进行左外连接时，需要更改 vmode 才能正确允许 NA。这正在处理中。

供参考。现在在[http://code.google.com/p/fffunctions/](http://code.google.com/p/fffunctions/)的开发版本中解决了这个问题，并将在未来几周内上传到 CRAN。

# css - div中的CSS错误跨度溢出

> ID：10573061
> 
> 赞同：0
> 
> 时间：2012-05-13T15:49:56.610
> 
> 标签：css

导航到**客户**页面，您应该会看到链接和电子邮件地址溢出其包含给定类“客户”的 div 标记 例如：

```
<div class="client">
<span class="delete">
<span class="name">
<span class="address">
<span class="municipal">
<span class="county">
<span class="phone">
<p class="email">
<span class="url">
<strong>www:</strong>
<a href="http://www.edjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjju.salford.ac.uk">
</span>
</div> 
```

有没有办法阻止电子邮件和网站的 span 元素内的文本字符串离开 div 使其在下面的新行上连续运行？解决方案需要有序，以便页面可以通过 W3C 验证 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:51:05.403

像这样写：

```
a{
 word-wrap:break-word;
} 
```

# emacs - 删除 Emacs 中的内置包

> ID：10573067
> 
> 赞同：7
> 
> 时间：2012-05-13T15:50:16.233
> 
> 标签：emacs, elpa

是否可以删除像“俄罗斯方块”这样的内置 Emacs 包？从 24.1 开始，它们不能在包列表中标记为删除。通过删除一些或全部内置包来进行 Emacs 的最小安装——即使几乎没有用处——会很好。有没有可能以某种方式做，将来会增加这个能力吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T03:19:18.910

即使整个`lisp`目录为空，Emacs 也应该启动并且可以使用（请注意，我们很少/从不测试它，所以我不保证它会工作，但至少在原则上应该可以，如果没有，你应该报告它`M-x report-emacs-bug`）。因此，请随意删除其中没有用的所有包，以创建精简版的 Emacs。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T16:01:18.877

你可以删除所有你想要的包的 elc 文件。

例如，在位于 ubuntu 存储库中的 emacs 版本中，俄罗斯方块包位于：

```
/usr/share/emacs/23.3/lisp/play/tetris.elc 
```

如果您移动或移除它，emacs 将继续工作，但您将无法再玩俄罗斯方块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:48:21.647

您可能想要检查`package--builtins`变量。也就是说 - 删除通过安装的任何包几乎没有意义，`package.el`因为 package.el 仅自动提取和加载包的自动加载 - 因此安装许多包不会导致任何重大开销。我很确定删除内置包永远不会成为`package.el`.

# dll - 关于 Windows 的 DLL 的一些问题？

> ID：10573069
> 
> 赞同：1
> 
> 时间：2012-05-13T15:50:30.793
> 
> 标签：dll, autohotkey

我在一个名为 Titanium 的基于 JS 的框架中编写了一个应用程序。这个框架没有一些功能，所以我捆绑了自动热键，并使用 STDIN/STDOUT 将两者连接起来。Autohotkeys 有一个很酷的功能`DllCall`，它允许与操作系统交互，应该可以帮助我缩小基于 JS 的框架和缺少的功能之间的差距。

举个例子，Titanium 允许我绑定到一个特定的端口。但是，如果我绑定到 0 并让操作系统选择一个空闲端口（应该如此），它会起作用，但无法判断它实际绑定到哪个端口。

现在，由于我来自 Web 应用程序，所以 DLL 对我来说是新的；所以我有几个问题：

1.  是否有一个包含所有 DLL 及其所有方法的大文档？
2.  我如何知道某些方法是否依赖于某些服务？我的意思是我听说有些依赖 RPC、COM、COM+、WMI 等，用户可以关闭它们，如果关闭，这些方法将不起作用。还有一个地方可以让我获得更多信息吗？
3.  是否有任何现成的 DLL 及其方法，我可以相信它们从 XP 到 7 可以 100% 工作？
4.  有什么我应该知道的访问权限吗？他们是否记录在案。
5.  如果您也来自网络编程，还有什么我应该注意的吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:58:55.317

您可以在[MSDN](http://msdn.microsoft.com)上在线或使用[Windows SDK](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK)中的文档离线找到所有 Windows API 函数（驻留在 DLL 中）的（大部分）完整文档。

例如查看**[SHGetSpecialFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762204%28v=vs.85%29.aspx)**的文档。在那里您可以找到各种信息，例如 DLL (shell32.dll)、任何先决条件（最低 IE 4）和平台可用性。（最低 Windows 2000）还记录了安全注意事项。

所有 API 函数都或多或少地以这种方式记录。一个很好的起点是**[Windows Developer Reference](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447209%28v=vs.85%29.aspx)**。从那里您可以浏览许多 API 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:58:26.007

基本上每个问题的答案是您应该在 MSDN 中搜索您感兴趣的函数或 API，并阅读那里的文档：

[http://msdn.microsoft.com/en-us/library/ms123401.aspx](http://msdn.microsoft.com/en-us/library/ms123401.aspx)

他们记录了这些功能在哪些操作系统中可用，因此编写在 Windows XP 及更高版本中工作的东西应该很容易。

# objective-c - Xcode - 在 APP 中使用短信文本

> ID：10573071
> 
> 赞同：0
> 
> 时间：2012-05-13T15:50:49.077
> 
> 标签：objective-c, xcode, sms

我的场景：我有一个设备可以通过错误代码发送短信。该设备有自己的 SIM 卡。现在我想在我的应用程序中自动分析带有短信到我的 iPhone 的错误代码。我的想法：应用程序启动并查看我的“短信文件夹”，如果有来自“带有错误代码的特殊号码”的消息并将最后一个复制到我的应用程序我现在的解决方案是复制短信并将其粘贴到文本框中我将其转换为我的应用程序...

我希望我的英语不要那么差。

最好的问候约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:58:58.447

Not working without Jailbreak.

# web-services - Base64 的图像 URL

> ID：10573075
> 
> 赞同：0
> 
> 时间：2012-05-13T15:51:23.007
> 
> 标签：web-services, api, image-processing, base64

是否有任何公共 Web 服务 API 允许提交图像 URL 并返回该图像的 Base64 编码版本？这是一个例子： http: [//software.hixie.ch/utilities/cgi/data/data](http://software.hixie.ch/utilities/cgi/data/data)

我想要这个的两个原因：

1.  我不太了解服务器端，所以最好避免自己编写代码。
2.  使用 HTML5 Canvas + 外部 URL + .toDataURL = 安全异常（跨域问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T15:56:41.073

Without any security considerations, you can do this VERY trivially in php:

```
<?php

echo base64_encode(file_get_contents($_GET['url'])); 
```

Don't be scared of "server-side".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:27:19.310

[http://www.greywyvern.com/code/php/binary2base64](http://www.greywyvern.com/code/php/binary2base64)

[http://webcodertools.com/imagetobase64converter](http://webcodertools.com/imagetobase64converter)

# javascript - 移动Safari垂直滚动 - 如何检测窗口何时停止在Javascript中移动

> ID：10573080
> 
> 赞同：2
> 
> 时间：2012-05-13T15:51:53.763
> 
> 标签：javascript, ios, scroll, detect

是否有 js 方法来检测长 iOS safari 页面上的垂直轻弹何时停止移动，例如等效于伪：

```
window.element.momentumScroll == false 
```

这是为了检测减速的内容是否仍在移动或滚动事件是否已完成。

感激地收到任何和所有的线索。

附录我没有在我的代码中实现任何外部库（没有 jQuery 等），需要找到一个本地 js 侦听器/方法来告诉我轻弹滚动何时结束。

```
doc.addeventlistener("scroll", function(e){setvariable to 1}, false)

doc.addeventlistener("noscroll", function(e){setvariable to 0}, false) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:31:05.703

方法：

```
startTop = window.pageYOffset on touchStart

currTop = window.pageYOffset on touchEnd
deltaTop = startTop - currTop
deltaTop == 0 means no momentum scrolling occurred during another event. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:15:57.440

我不确定我是否正确理解了这个问题。我相信您正在尝试实现诸如在页面到达底部时加载新内容之类的目标？（请原谅我假设）

如果您的事件基于触摸，我认为您正在寻找一些 javascript 手势库。

这个 Powertools 上有 Mootools 库：http: [//cpojer.net/PowerTools/#](http://cpojer.net/PowerTools/#)！

Drag.Flick：[http ://mootools.net/forge/p/drag_flick](http://mootools.net/forge/p/drag_flick)

在其他框架中也应该有平等的实施。（jQuery：http: [//jgestures.codeplex.com/](http://jgestures.codeplex.com/)）

可能的解决方案是寻找可以返回超过 document.body.clientHeight 的当前触摸位置的事件（阅读：不是跨平台）。

希望我能指出正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T17:34:47.597

只需在 touchend 事件中执行 setTimeout 即可。一旦触摸端停止工作，超时将触发。定时器在触摸事件期间暂停。在 ios 上，一旦页面停止滚动并且不再有动力，就会触发设置超时。

```
body.addeventlistener("ontouchend", function(e){
    setTimeout(function(){
       alert("done moving")
    },0); 
}, false); 
```

或者

```
$('body').on('touchend.scroll', function () { 
    setTimeout(function(){
       alert("done moving")
    },0); 
}); 
```

请注意，只要您松开手指，Android 就会触发该事件。计时器似乎没有暂停。

# java - 是否可以在 Java 中使用此 switch 语句

> ID：10573082
> 
> 赞同：0
> 
> 时间：2012-05-13T15:51:59.600
> 
> 标签：java, switch-statement

C++有一个很方便的switch语句，但不知道这是否可能是java

```
switch(num)
{
   case 1 ... 9:
     do something
     break
   case 10 ... 19:
     do something
     break
   default: something
} 
```

这在java中是否可行，我试过了，但它不起作用，至少不像c ++那样，有没有等价物？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T15:56:34.403

Java's `switch` statement requires you to explicitly list all values that you match (except for the `default:` clause, of course). If you're doing substantial ranges, it is probably better to use a chain of `if`s:

```
if (num >= 1 && num <= 9) {
    do_something_A
} else if (num >= 10 && num <= 19) {
    do_something_B
} else {
    do_something_C
} 
```

If your real `num` has side effects (or is plain expensive to compute), evaluate it once and save it to a local variable, then use that local in the chain of tests.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T15:57:20.783

No, it's not possible. Probably the most straightforward equivalent is:

```
if (num >= 1 && num <= 9)
  doSomething();
else if (num >= 10 && num <= 19)
  doSomethingElse();
else
  doDefault(); 
```

Marginal cleanup could be defining an `inRange` utility function and using it inside the `if` statements:

```
boolean inRange(int num, int min, int max) {
    return num >= min && num <= max;
}

...

if (inRange(num, 1, 9))
  doSomething();
else if (inRange(num, 10, 19))
  doSomethingElse();
else
  doDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T15:54:54.283

Java have [switch](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html) statement, but you have to use it in this way :

```
switch(num)
{
   case 1:
   case 2:
   case 3:
   case 4:
     //And so far with cases 
     //do something
     break
   case 10:
   case 11:
   case 12:
     //And so far ...
     //do something
     break
   default: something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T15:56:42.923

Yes, there is a [`switch`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html) statement in Java. It is in fact quite similar to `switch` in C++.

However, neither C++ nor Java support ranges in case labels.

For the specific example that you present I would use a series of `if` statements:

```
if (num >= 1 && num <= 9) {
  ...
} else if (num >= 10 && num <= 19) {
  ...
} else {
  ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T15:59:32.970

没有 Java 不会，在这种情况下，使用一系列 if-else 语句会更实用。:)

```
 if(num >= 1 && num < 10) {
        //do something
    } else if(num >= 10 && num < 20) {
        //do something
    } else {
        //do something
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-13T15:59:39.513

您正在谈论的功能实际上并不属于 C++，它是一种语言扩展，例如存在[于 GCC 中](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Case-Ranges.html)。但通常在 C++ 范围内使用`if`...检查`else`，并且在 Java 中应该使用相同的技术：

```
if (num >= 1 && num <= 9) {
    //Do something
} else if (num >= 10 && num <= 19) {
    //Do something else
} else {
    //Do something by default
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-13T15:55:49.903

No, ranges are not allowed you would need to use an if else structure.

# ruby-on-rails - 捆绑安装请求手动执行每个 gem 安装 - 如何避免？

> ID：10573088
> 
> 赞同：6
> 
> 时间：2012-05-13T15:53:05.477
> 
> 标签：ruby-on-rails, rubymine

这可能是一个非常简单的问题。
每次我在项目文件夹中执行“捆绑安装”时，都会出现这样的错误

```
 An error occured while installing json (1.6.6), and Bundler cannot continue.
 Make sure that X succeeds before bundling. 
```

其中 X 可以是
'gem install json -v '1.6.6'
或
'gem install execjs -v '1.3.2'
或 'gem install coffee-script -v '2.2.0'

现在，在我逐渐手动安装每个 gem 之后，捆绑安装成功。
有没有办法在一个命令中完成所有这些？
有没有办法在红宝石矿中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T16:30:49.587

这就是 Bundler**应该**为您做的。

看来您的 Bundler 或 Ruby 安装在某处有问题。

如果没有更多信息，我只能建议您查看[Bundler 故障排除页面](https://github.com/carlhuda/bundler/blob/master/ISSUES.md)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:05:47.723

由于与使用 SSL 连接相关的错误，您的某些 gem 可能没有安装。这意味着依赖于这些 gem 的 gem 会抛出一个错误，就像您遇到的那样。

请参阅：[http ://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

该链接有各种解决方法，但最简单的是替换此行：

```
source 'https://rubygems.org' 
```

在你的 Gemfile 的顶部有这一行：

```
source 'http://rubygems.org' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:34:31.883

如果我的网络连接是不稳定/低带宽的无线连接，我之前也遇到过同样的问题。它尝试一次安装所有 gem，但由于带宽不足而在其中一个上停止。那么您当然可以一次安装一个，但是如果您的连接不断进出，这可能是您无法一次安装它们的原因。

# objective-c - 应用重新打开时执行代码

> ID：10573091
> 
> 赞同：4
> 
> 时间：2012-05-13T15:53:34.503
> 
> 标签：objective-c, ios, multitasking

我有一个单一视图应用程序。当我点击主页按钮并“最小化”应用程序时，我希望能够在用户重新打开它时执行代码。

由于某种原因，当我最小化并重新打开应用程序时，viewDidAppear 和 viewWillAppear 不会执行。

有什么建议么？

在此先感谢萨亚当

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T15:57:50.880

您可以在应用程序委托中执行代码

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

或注册以观察`UIApplicationDidBecomeActiveNotification`通知并执行您的代码作为响应。

应用委托中还有通知`UIApplicationWillEnterForegroundNotification`和方法`- (void)applicationWillEnterForeground:(UIApplication *)application`。

* * *

要连接通知，请在适当的位置添加

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
                                       selector:@selector(didBecomeActive:)
                                           name:UIApplicationDidBecomeActiveNotification
                                         object:nil]; 
```

定义一个对应的方法

```
- (void)didBecomeActive:(NSNotification *)notification;
{
    // Do some stuff
} 
```

然后不要忘记在适当的时候让自己成为观察者

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

**讨论**

您很可能只希望您的 viewController 在它是当前活动的视图控制器时响应事件，因此注册通知的好地方是`viewDidLoad`，然后是作为观察者移除自己的好地方`viewDidUnload`

如果您想运行在您的`viewDidAppear:`方法中出现的相同逻辑，则将其抽象为另一个方法并`viewDidAppear:`让响应通知的方法调用此新方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T16:04:02.130

这是因为自从 Apple 实施了“多任务处理”后，当您再次启动应用程序时，它们会完全重新加载，就像您从未关闭它们一样。因此，没有理由调用 viewDidAppear。

您可以实施

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
```

并在那里做任何你想做的事。或者您在视图控制器中注册通知`UIApplicationWillEnterForegroundNotification`。在 viewDidLoad 中执行此操作：

```
[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myAppWillEnterForeground) 
    name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

当然，实现指定的选择器并在那里做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-29T14:11:23.850

我不确定@Paul.s 的答案如何执行 OP 请求，因为注册`UIApplicationDidBecomeActiveNotification`将执行两次：

1.  启动应用程序时
2.  当应用程序进入后台时

更好的做法是将这些事件解耦为 2 个不同的[通知](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class)：

1.  [UIApplicationDidBecomeActiveNotification](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/#//apple_ref/c/data/UIApplicationDidBecomeActiveNotification)：

> 当应用程序激活时发布。应用程序在接收事件时处于活动状态。一个活跃的应用程序可以说是有焦点的。它在启动后获得焦点，在弹出覆盖窗口或设备锁定时失去焦点，并在设备解锁时获得焦点。

这基本上意味着所有与“应用程序首次启动时”相关的逻辑

2.  [UIApplicationWillEnterForegroundNotification](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/#//apple_ref/c/data/UIApplicationWillEnterForegroundNotification)：

> 在应用程序离开后台状态成为活动应用程序之前不久发布。

## 结论

通过这种方式，我们可以创建一个可以执行两种算法但作为解耦方式的设计：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethodName1) name:UIApplicationWillEnterForegroundNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethodName2) name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T15:57:47.557

这是因为您不会重绘视图。在 AppDelegate 中使用**applicationWillEnterForeground**代替。这应该适合你。

# android - 使用自定义适配器 setOnItemClickListener 的 ListView 不起作用

> ID：10573094
> 
> 赞同：1
> 
> 时间：2012-05-13T15:53:48.463
> 
> 标签：android, android-listview

我查看了其他帖子，并且在我的应用程序中使用了自定义适配器，但这由于某种原因不起作用。

我在自定义适配器中有 3 个 TextView，它们都设置为：

```
android:focusable="false" 
android:focusableInTouchMode="false"

final ListView VideoList =(ListView)findViewById(R.id.lvVideoList);     
VideoList.setItemsCanFocus(false);

VideoList.setOnItemClickListener(new OnItemClickListener()      
{             
    @Override
    public void onItemClick(AdapterView<?> parent, View v,int position, long id) 
    {
        vibrator.vibrate(intVib);
        Log.i("test","VideoList onclick called");

        Object listItem = VideoList.getItemAtPosition(position); 
        String xList = listItem.toString().replaceAll("\\s+", "").replaceAll("\\n+", "");
        if(xList.toString().length() > 1)
        {
            String tvUrl = listItem.toString();
            Toast toastUDComplete = Toast.makeText(getApplicationContext(), tvUrl.toString(), Toast.LENGTH_SHORT);toastUDComplete.setGravity(Gravity.TOP | Gravity.CENTER, 0, 0); toastUDComplete.show();
            //getVideo(v, tvUrl);
        }
        else
        {
            Toast toastUDComplete = Toast.makeText(getApplicationContext(), "No Videos Available", Toast.LENGTH_SHORT);toastUDComplete.setGravity(Gravity.TOP | Gravity.CENTER, 0, 0); toastUDComplete.show();      
        }                   
    }      
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:12:28.973

如果您的适配器布局中有一个复选框，请将此属性设置为它。

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

# ruby-on-rails - Twitter 中的动态回调 url 支持 - Omniauth

> ID：10573096
> 
> 赞同：4
> 
> 时间：2012-05-13T15:54:32.463
> 
> 标签：ruby-on-rails, twitter, omniauth

我在我的 rails 应用程序中使用omniauth-twitter gem 进行用户身份验证。

我正在尝试通过将 callback_url 作为参数传递来实现动态回调

```
/auth/twitter?oauth_callback=http://mynewwebsite.com 
```

但是 twitter 会重定向到在 twitter 应用程序设置中指定的 callback_url。我在这里错过了什么吗？

推特不支持动态回调吗？任何其他的宝石来实现这个功能？请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T16:23:27.247

不，没有动态回调。

您可以创建一个调度程序：将预期的回调 URL 放在 cookie 中，将用户发送到 Twitter，让他回来，然后将他重定向到他的 cookie 告诉你的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T15:34:39.100

您可以使用 url 查询来发送任何其他参数。所以它可以用来代替cookies。例如

```
#url
"/auth/twitter?x_auth_access_type=read&target=customer_login"

#controller
def twitter
  if params[:target] == "customer_login"
    ...
  end
end 
```

[或者像这样](https://stackoverflow.com/questions/4888263/setting-up-rails-routes-based-on-querystring)使用 smth创建基于 QueryString 的路由

# linux - 加速 Linux 应用程序的读取

> ID：10573097
> 
> 赞同：0
> 
> 时间：2012-05-13T15:54:32.710
> 
> 标签：linux, caching

我的程序读取一个文件，交错如下：

![在此处输入图像描述](../Images/03175fb88441e065d5a626ccf0bacffc.png)

要读取的文件很大。它分为四个部分，然后分成许多块。我的程序首先读取第 1 部分的第 1 块，然后跳转到第 2 部分的第 1 块，依此类推。然后回到第 1 部分的第 2 部分，...，这样。

在测试中性能下降。我相信原因是内核的页面缓存功能在这种情况下不能有效地工作。但是文件太大了`mmap()`，而且文件位于 NFS 中。

在这种情况下如何加快阅读速度？欢迎任何意见和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:14:27.757

您可能希望用于[`posix_fadvise()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_fadvise.html)向系统提示您的使用情况，例如。用于`POSIX_FADV_RANDOM`禁用预读，并可能用于`POSIX_FADV_WILLNEED`让系统在您需要之前尝试将下一个块读入页面缓存（如果您可以预测的话）。您也可以在完成读取块后尝试使用`POSIX_FADV_DONTNEED`以使系统释放底层缓存页面，尽管这可能不是必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:14:38.590

对于每一对块，都读入，处理第一个，然后将第二个压入堆栈。当您到达文件末尾时，开始将值从堆栈底部移出，逐个处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:28:59.087

您可以将读数分解为线性块。例如，如果您的代码如下所示：

```
int index = 0;
for (int block=0; block<n_blocks; ++block) {
  for (int part=0; part<n_parts; ++part) {
    seek(file,part*n_blocks+block);
    data[part] = readChar(file);
  }
  send(data);
} 
```

将其更改为：

```
for (int chunk=0; chunk<n_chunks; ++chunk) {
  for (int part=0; part<n_parts; ++part) {
    seek(file,part*n_blocks+chunk*n_blocks_per_chunk);
    for (int block=0; block<n_blocks_per_chunk; ++block) {
      data[block*n_parts+part] = readChar(file);
    }
  }
  send(data);
} 
```

然后为您的缓存优化 n_blocks_per_chunk。

# iphone - 应用内购买的单一杂志问题

> ID：10573098
> 
> 赞同：4
> 
> 时间：2012-05-13T15:54:33.487
> 
> 标签：iphone, ios, ipad, in-app-purchase

我对报亭/应用内购买有一些疑问，我真的无法弄清楚。我会尽量简洁。

场景：杂志应用程序必须为用户提供购买（除了订阅之外）单个问题的选项。这些问题将每周发布一次，即使在应用程序发布之后也是如此。

我的疑问（操作性而非技术性）与在应用程序已获批准时如何处理应用程序内购买有关。如何管理未来问题的出版？
我认为在我的网络服务上上传新期刊，然后在 iTunes Connect 的“应用内购买”部分创建一个新产品就足够了（因为 Apple 说个别杂志期刊是非消耗品），但多久在问题发售之前需要吗？

如果应用内购买（在应用已经获得批准后插入）需要获得批准，那么几乎不可能满足周刊的最后期限……
应用（如《连线》或各种报纸）如何销售个别问题？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:07:40.630

抱歉，如果我不理解您的问题，但您想知道如何发布您的杂志的新问题？

这可能会有所帮助： [https ://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf](https://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf)

对不起，如果我错了

编辑：如果你需要应用程序本身的帮助，苹果在[这里创建了一个视频](https://developer.apple.com/itunes/?destination=adc.apple.com.8266314619.08266314625.8367850245?i=1477723662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:37:27.663

预测未来的 IAP 产品以使其获得批准，并在正确的时间激活它们

# javascript - Javascript random image generator in css-based page

> ID：10573119
> 
> 赞同：0
> 
> 时间：2012-05-13T15:57:12.200
> 
> 标签：javascript, html, css, image, random

as the title says I'm trying to figure out how to call this javascript function in my webpage. It's for my business, and the template is just a basic, free one. I'm sure for someone more experienced than me it's probably just a simple matter of formatting it correctly. Here's what I'm working with.

Code that goes in the HEAD portion of the webpage:

```
var theImages = new Array() 
theImages[0] = 'splash1.jpg'
theImages[1] = 'splash2.jpg'
theImages[2] = 'splash3.jpg'
theImages[3] = 'splash4.jpg'
theImages[4] = 'splash5.jpg'
theImages[5] = 'splash6.jpg'

var j = 0
var p = theImages.length;
var preBuffer = new Array()
for (i = 0; i < p; i++){
  preBuffer[i] = new Image()
  preBuffer[i].src = theImages[i]
}
var whichImage = Math.round(Math.random()*(p-1));
function showImage(){
document.write('<img src="'+theImages[whichImage]+'">');
}

</script> 
```

Now to call the function I use:

```
<SCRIPT LANGUAGE="JavaScript">
showImage();
</script> 
```

Here's the page in which I'm trying to implement it: [http://coloradopp.com/index4.html](http://coloradopp.com/index4.html)

Instead of just displaying an image, I would like to call that function. Splash 1-6 are all the same size as the original image.

Here's the code snippet:

```
<div id="splash">
<img class="pic" src="images/splash1.jpg" width="870" height="374" alt="" />
</div> 
```

As you can tell the page calls on a style sheet (style.css) for all the formatting.

Can anyone offer any tips on how to make this work? From what I've gathered, one cannot implement javascript into css sheets. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:38:40.913

做这样的事情：

```
showImage() {
  var theImages = [ 'splash1.jpg', 'splash2.jpg', 'splash3.jpg', 'splash4.jpg', 'splash4.jpg' ];
  var img = theImages[Math.round(Math.random() * (theImages.length - 1))];
  document.getElementById('splash').innerHTML = '<img src="' + img + '">');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:01:02.180

首先将您的javascript代码移动到函数中，例如：

```
function showImage(){ ...your code goes here...} 
```

然后您可以像这样在页面加载时启动该功能：

```
<body onload="showImage()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:15:56.017

您可以将图像动态设置为背景图像并放置类似这样的内容

```
<script>
document.write('<style>#splash{ background-image:url(\'images/splash'+Math.round(Math.random()*5+1)+'.jpg\');}</style>');
</script> 
```

在您页面的顶部。使用此解决方案，您必须为 div 标签 (870x374) 设置固定尺寸

# html - 我的 HTML 表格只能用 TH 宽度调整大小吗？

> ID：10573122
> 
> 赞同：0
> 
> 时间：2012-05-13T15:57:38.233
> 
> 标签：html, html-table, width

我无法使 HTML 表格正常运行。这是一张宽大的桌子，大约有 44 列，如果它从用户的屏幕向右延伸就可以了（我想要它）。

我试图通过为每个表头提供三个类之一来为我的每一列提供三个宽度之一：

```
.c_th_small {
    width: 60px;
}
.c_th_medium {
    width: 100px;
}
.c_th_large {
    width: 500px;
} 
```

我将这三个标签之一放入表格标题单元格中。但是，如果我给整个表格一个 Width 属性，它们只会调整我的列的大小。如果我让我的桌子真的很宽，那么这些工作，但他们与桌子的宽度打架。

我的问题是，我可以告诉每一列它应该有多宽，并让它强制表格尽可能宽吗？我真的不想为我的表格设置宽度，我只想让它与所有列加在一起的宽度一样宽。这适用于较小的桌子，但这张大桌子似乎无法变得足够宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:06:57.767

听起来您需要使用CSS规则

```
table { table-layout: fixed; } 
```

这告诉浏览器使用第一行单元格的宽度来确定列宽，而不是同时考虑单元格的内容。

# jquery-mobile - 在 jQuery Mobile 中使用自定义图标创建一个按钮

> ID：10573125
> 
> 赞同：3
> 
> 时间：2012-05-13T15:58:09.560
> 
> 标签：jquery-mobile

我正在为客户开发一个应用程序，并试图创建一个带有完全自定义图标的按钮。图标为 30px x 30px，中间是透明的。

我几乎已经使用这个 css 代码实现了我想要的：

```
/* info button override */
.ui-icon-info-page {
    background: url(images/G_help_icon_round.png) 50% 50% no-repeat;
    background-size: 30px 30px;
    background-color: black;
} 
```

但是图标内部出现了一个黑色的细圆圈，并且图标图像似乎被切断了：

![在此处输入图像描述](../Images/19ca4cbd9350c36337c4c58c7c1e4ed3.png)

我想删除这个圈子并阻止图标？从被切断。另外，我希望问号是透明的而不是黑色的，以显示下方导航栏的图像。但是，如果我尝试将背景颜色设置为透明，则该按钮将完全显示为白色：

![在此处输入图像描述](../Images/7eef6115a5cbd3203635d76c32b7a2c3.png)

我怎样才能做到这一点？

更新：

我尝试应用此代码：

```
/* info button override */
.ui-icon-info-page {
    background: url(help.png) 50% 50% no-repeat;
    background-size: 30px 30px;
    width: 30px;
    height: 30px;
    margin-top: -15px !important;
    box-shadow: none;
    -webkit-box-shadow: none;
} 
```

并得到了这个结果：

![在此处输入图像描述](../Images/392c3261038d1444598d8359be8139c8.png)

我可以通过调整顶部和左侧边距来移动图标，但它的边缘在以黑色圆圈为中心的框架之外被切断：

![在此处输入图像描述](../Images/77ee5b328cad61b68a600acab5aa18eb.png)

更新 2：

这是我正在使用的按钮（请注意，它在这里是不可见的，因为它是白色背景上的白色按钮）：

![在此处输入图像描述](../Images/274f9fe80dcd45201a2010a41079e677.png)

这是我用来加载按钮的 html 代码：

```
<div data-role="header" data-position="fixed"> 
            <div><img border="0" src="images/G_iphone_navbar_logo.png" style="display:inline;"/> </div>          
            <a href="index.html" data-icon="refresh" class="ui-btn-left" data-transition="fade" data-iconpos="notext" data-theme="a"></a>
            <a href="info.html" data-icon="info-page" class="ui-btn-right" data-transition="flip" data-iconpos="notext" data-theme="a"></a>

</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T17:00:30.563

这应该可以解决问题

```
/* info button override */
.ui-icon-info-page {
    background: url(help.png) 50% 50% no-repeat;
    background-size: 30px 30px;
    width: 30px;
    height: 30px;
    margin-top: -15px !important;
    box-shadow: none;
    -webkit-box-shadow: none;
} 
```

请确保您在 jquery mobile css 之后加载您的应用程序 css 文件。

编辑：这是基于您发布的已修复问题的代码的示例代码

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
        <style>
            #rightBtn .ui-btn-inner {
                width: 30px;
                height: 30px;
                margin: -3px;/*Modify to change icon position wrt the header*/
                border: none !important;
            }
            .ui-icon-custom {
                background: url(http://i.stack.imgur.com/AqicD.png) 50% 50% no-repeat;
                background-size: 30px 30px;
                width: 30px;
                height: 30px;
                box-shadow: none;
                -webkit-box-shadow: none;
                margin: 0 !important;
            }
        </style>
    </head>
    <body>
        <div data-role="header">
            <h1>Page Title</h1>
            <a href="index.html" data-icon="refresh" class="ui-btn-left" data-transition="fade" data-iconpos="notext" data-theme="a"></a>
            <a href="info.html" id="rightBtn" data-icon="custom" class="ui-btn-right" data-transition="flip" data-iconpos="notext" data-theme="a"></a>
        </div><!-- /header -->

        <div data-role="content"></div><!-- /content -->

        </div><!-- /page -->

    </body>
</html> 
```

​这里有一个演示 - [http://jsfiddle.net/LCsmt/](http://jsfiddle.net/LCsmt/)

让我知道这是否有帮助。

# mysql - VB.NET MySqlDataAdapter.Fill 大约需要 6-7 秒

> ID：10573126
> 
> 赞同：0
> 
> 时间：2012-05-13T15:58:13.880
> 
> 标签：mysql, vb.net

我在大约 1,500 行的表的存储过程中运行了一个简单的 SELECT（如下所述）。

```
CREATE PROCEDURE `LoadCollectionItemProperty`(IN sId int(10))
BEGIN
SELECT *
FROM itemproperty
WHERE itemid IN
    (SELECT itemid
    FROM collectionitem
    WHERE collectionid = sId AND removed ='0000-00-00 00:00:00');
END 
```

此操作大约需要 7 秒。我插入了断点并使用 F11 来确定 MySqlAdapter.Fill 是滞后开始的地方。我的计算机和托管 MySQL 数据库的服务器都没有受到规格方面的挑战。我猜这是查询本身。

collectionitem 拥有 2 个将 item 属性链接到集合的外键。我们提供 sproc sId(PK of collection)，以便子查询返回特定集合中的所有 itemid，然后我们在 itemproperty 中使用 itemid(PK)。

有什么方法可以加快这个过程吗？

**更新**

我的问题完全是由于不正确的索引。一旦我知道要索引哪些列，一切都非常顺利！感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:14:48.863

好吧，鉴于它是查询，（您应该通过在服务器上的 teh propmpt 上运行它来证明这一点）

将查询从 sp 中删除，并在其前面加上 Explain，以查看要确认的查询执行计划，但有些事情会很明显。

```
SELECT *
FROM itemproperty
inner join collectionitem on collectionitem.itemid = itemproperty.itemid and removed ='0000-00-00 00:00:00' 
```

摆脱子查询。

是否删除了日期时间，是否已编入索引？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:25:07.493

您可以试试这个，但如果您的表缺少索引，它可能无济于事。

```
BEGIN
SELECT *
FROM itemproperty i
WHERE exists
    (SELECT 1
    FROM collectionitem c
    WHERE collectionid = sId AND i.itemid = c.itemid AND removed ='0000-00-00 00:00:00');
END 
```

# c++ - Implications of using std::vector in a dll exported function

> ID：10573130
> 
> 赞同：17
> 
> 时间：2012-05-13T15:58:41.330
> 
> 标签：c++, dll, stl

I have two dll-exported classes A and B. A's declaration contains a function which uses a std::vector in its signature like:

```
class EXPORT A{
 // ...
 std::vector<B> myFunction(std::vector<B> const &input);
}; 
```

(EXPORT is the usual macro to put in place _*declspec(dllexport)/*_declspec(dllimport) accordingly.)

Reading about the issues related to using STL classes in a DLL interface, I gather in summary:

*   Using std::vector in a DLL interface would require all the clients of that DLL to be compiled with the same *version* of the same compiler because STL containers are not binary compatible. Even worse, depending on the use of that DLL by clients conjointly with other DLLs, the ''instable'' DLL API can break these client applications when system updates are installed (e.g. Microsoft KB packages) (really?).

*   Despite the above, if required, std::vector can be used in a DLL API by exporting `std::vector<B>` like:

    ```
    template class EXPORT std::allocator<B>;
    template class EXPORT std::vector<B>; 
    ```

    though, this is usually mentioned in the context when one wants to use std::vector as a *member* of A (http://support.microsoft.com/kb/168958).

*   The following Microsoft Support Article discusses how to access std::vector objects created in a DLL through a pointer or reference from within the executable (http://support.microsoft.com/default.aspx?scid=kb;EN-US;Q172396). The above solution to use `template class EXPORT ...` seems to be applicable too. However, the drawback summarized under the first bullet point seems to remain.

*   To completely get rid of the problem, one would need to wrap std::vector and change the signature of `myFunction`, PIMPL etc..

My questions are:

*   Is the above summary correct, or do I miss here something essential?

*   Why does compilation of my class 'A' not generate warning C4251 (class 'std::vector<_Ty>' needs to have dll-interface to be used by clients of...)? I have no compiler warnings turned off and I don't get any warning on using std::vector in `myFunction` in exported class A (with VS2005).

*   What needs to be done to correctly export `myFunction` in A? Is it viable to just export `std::vector<B>` and B's allocator?

*   What are the implications of returning std::vector by-value? Assuming a client executable which has been compiled with a different compiler(-version). Does trouble persist when returning by-value where the vector is copied? I guess yes. Similarly for passing std::vector as a constant reference: could access to `std::vector<B>` (which might was constructed by an executable compiled with a different compiler(-version)) lead to trouble within `myFunction`? I guess yes again..

*   Is the last bullet point listed above really the only clean solution?

Many thanks in advance for your feedback.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:26:06.607

不幸的是，您的清单非常准确。根本原因是DLL-to-DLL或DLL-to-EXE是在操作系统层面定义的，而函数之间的接口是在编译器层面定义的。在某种程度上，当客户端和服务器缺乏二进制兼容性时，您的任务与客户端-服务器交互的任务类似（尽管稍微容易一些）。

编译器将它所能做的映射到特定操作系统中 DLL 导入和导出的方式。由于语言规范在用户定义类型甚至内置类型的二进制布局方面为编译器提供了很大的自由（回想一下，`int`只要满足最小的大小要求，确切的大小取决于编译器），导入并且需要手动完成从 DLL 导出以实现二进制级别的兼容性。

当您使用相同编译器的相同版本时，上面的最后一个问题不会产生问题。然而，一旦一个不同的编译器出现，所有的赌注都没有了：你需要回到简单类型的接口，并引入包装器以在你的代码中维护漂亮的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:57:46.400

我一直有同样的问题，并发现了一个巧妙的解决方案。您可以从库中传递 a
而不是传递。 然后你引用的问题在库中处理，你根本不需要处理它。 当然，代价是不得不使用该库并接受其稍差的性能。 就它为您节省的编码和调试时间而言，这个解决方案非常值得。`std:vector``QVector``Qt`
`Qt`

# installation - Wix-Installer-如何获取 setup.exe 的当前目录？

> ID：10573135
> 
> 赞同：5
> 
> 时间：2012-05-13T15:59:06.697
> 
> 标签：installation, wix, custom-action

我正在使用 setup.exe 和 setupbld.exe（来自 %WixProramFolder%\bin）为我的安装程序创建引导程序。一切都很好，除了：我想获取 setup.exe 的当前目录但是：

1.  当我使用属性“CURRENTDIRECTORY”时，如果我在 cmd.exe 中运行命令行，我会得到错误的值：“C:>”D:\setup.exe“”。"CURRENTDIRECTORY" 是 "C:\" 但 "D:\" 是真的。

2.  当我使用属性“SOURCEDIR”时，setup.exe 会将 setup.msi 提取到“%Temp%{ProductID}\setup.msi”并且“SOURCEDIR”是“%Temp%{ProductID}\”但预期是“D:\ "

任何人都可以帮助我吗？这次让我头疼:-(对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:22:25.660

上周我遇到了同样的问题，我需要在安装过程中恢复一个数据库备份。我不想包含在安装程序中，因为它很可能会被更新，即使压缩后也是 ~168Mb。

最后，我将文件包含在安装程序中，以便将其安装到应用程序安装目录并`Compressed="no"`在文件上进行设置，使其成为外部依赖项。这并不理想，但我可以让它工作的唯一方法。

# lisp - 首先排序原子，然后从 LISP 中的列表中子列表

> ID：10573139
> 
> 赞同：3
> 
> 时间：2012-05-13T15:59:46.897
> 
> 标签：lisp, common-lisp, difference-lists

我在 LISP 中有这个作业，我需要整理原子，然后从列表中列出子列表。我确信这应该是一件容易的事，但由于我不是一个程序员，所以这真的需要很长时间才能让我理解。

我有这个数字列表：

```
(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6) 
```

如果我正确理解我的任务，那么我应该得到这样的结果：

```
(5 -1 -6 (2 6 1) (8 7 -3) (0 (9 4))) 
```

到目前为止，我发现的只是如何计算原子和/或子列表，但我不需要。

```
(DEFUN ATOMNUMBER (L) (COND ((NULL L) 0)
  ((ATOM (CAR L)) (+ 1 (ATOMNUMBER (CDR L))))
  (T (ATOMNUMBER (CDR L))) )) 
```

即使只有子列表，只有原子或只有空列表，该功能也应该正常工作。

也许有人可以给我任何例子？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T17:24:39.110

Common Lisp 中有几种可能的方法：

*   使用 REMOVE-IF 删除不需要的项目。（或者使用 REMOVE-IF-NOT 来保留想要的项目。）您需要两个列表。附加它们。

*   使用 DOLIST 并遍历列表，将项目收集到两个列表中并附加它们

*   编写一个需要保留两个结果列表的递归过程。

*   还应该可以将 SORT 与特殊的排序谓词一起使用。

例子：

```
> (sort '(1 (2 6 1) 4 (8 7 -3) 4 1 (0 (9 4)) -6 10 1)
        (lambda (a b)
           (atom a)))

(1 10 -6 1 4 4 1 (2 6 1) (8 7 -3) (0 (9 4))) 
```

作为稳定版本：

```
(stable-sort '(1 (2 6 1) 4 (8 7 -3) 4 1 (0 (9 4)) -6 10 1)
             (lambda (a b)
               (and (atom a)
                    (not (atom b)))))

(1 4 4 1 -6 10 1 (2 6 1) (8 7 -3) (0 (9 4))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:01:12.957

我更习惯于 Scheme，但这里有一个适用于 Lisp 的解决方案：

```
(defun f (lst)
  (labels 
      ((loop (lst atoms lists)
         (cond
          ((null lst) 
           (append (reverse atoms) (reverse lists)))
          ((atom (car lst))
           (loop (cdr lst) (cons (car lst) atoms) lists))
          (T
           (loop (cdr lst) atoms (cons (car lst) lists))))))
    (loop lst '() '())))

(f '(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6)) 
```

基本上，您遍历列表，并且每个元素都附加到原子列表或列表列表中。最后你加入两者以获得你的结果。

**编辑**

当然，remove-if 版本要短得多：

```
(let ((l '(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6)))
   (append
    (remove-if-not #'atom l)
    (remove-if     #'atom l))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:27:15.230

这是一个迭代代码，以自上而下的方式构造其输出（注释采用 Haskell 语法）：

```
;atomsFirst xs = separate xs id id where
;  separate [] f g  = f (g [])
;  separate (x:xs) f g
;      | atom x = separate xs (f.(x:)) g
;      | True   = separate xs f (g.(x:))

(defmacro app (l v)
   `(progn (rplacd ,l (list ,v)) (setq ,l (cdr ,l))))

(defun atoms-first (xs)
  (let* ((f (list nil)) (g (list nil)) (p f) (q g))
    (dolist (x xs)
      (if (atom x) (app p x) (app q x)))
    (rplacd p (cdr g))
    (cdr f))) 
```

以自上而下的方式构建的两个中间列表被维护为开放式列表（即具有显式结束指针），基本上遵循差异列表范式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T23:54:41.313

以防万一你想多运动，你会发现这里提供的例子还不够:P

```
(defun sort-atoms-first-recursive (x &optional y)
  (cond
    ((null x) y)
    ((consp (car x))
     (sort-atoms-first-recursive (cdr x) (cons (car x) y)))
    (t (cons (car x) (sort-atoms-first-recursive (cdr x) y)))))

(defun sort-atoms-first-loop (x)
  (do ((a x (cdr a))
       (b) (c) (d) (e))
      (nil)
    (if (consp (car a))
      (if b (setf (cdr b) a b (cdr b)) (setf b a d a))
      (if c (setf (cdr c) a c (cdr c)) (setf c a e a)))
    (when (null (cdr a))
      (cond
        ((null d) (return e))
        ((null c) (return d))
        (t (setf (cdr b) nil (cdr c) d) (return e))))))

(sort-atoms-first-recursive '(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6))

(sort-atoms-first-loop '(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6)) 
```

第二个是破坏性的（但不会创建任何新的cons）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-15T01:15:06.667

你可以这样做递归方式：

```
(defun f (lst) 
    (cond 
        ((null lst) nil)
        ((atom (car lst)) 
        (append (list (car lst)) (f (cdr lst)))) 
        (T
            (append (f (cdr lst)) (list (f (car lst))))
        )
    )
)
(step (f '(5 -1 (2 6 1) (8 7 -3) (0 (9 4)) -6))) 
```

输出：

```
step 1 --> (F '(5 -1 (2 6 1) (8 7 -3) ...))                                                                   
step 1 ==> value: (5 -1 -6 (0 (9 4)) (8 7 -3) (2 6 1)) 
```

# c# - 将字符串与 Regex 与 IgnoreCase 或与字符串的 ToLower 方法进行比较是否更快？

> ID：10573143
> 
> 赞同：3
> 
> 时间：2012-05-13T16:00:31.277
> 
> 标签：c#, regex

给定这样的字符串：

```
string s1 = "Abc";
string s2 = "ABC"; 
```

什么更快：

```
Regex.Match(s1, s2, RegexOptions.IgnoreCase) 
```

或者

```
s1.ToLower() == s2.ToLower() 
```

如果它们相同或一个比另一个更快，那么什么时候使用一个比另一个更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T16:02:11.013

可能第二个更快，但我会避免这两种方法。

更好的是使用[`string.Equals`](http://msdn.microsoft.com/en-us/library/c64xh8f9)带有适当`StringComparison`参数的方法：

```
s1.Equals(s2, StringComparison.CurrentCultureIgnoreCase) 
```

在线查看它：[ideone](http://ideone.com/2mTc5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T16:04:43.640

从理论上讲，比较两个字符串应该更快，RegEx 被认为是相当慢的。

但是，如果您想在忽略大小写的情况下将字符串 s1 与 RegEx s2 匹配（这与比较 2 个字符串不同），那么第一个解决方案会更好，因为它应该避免创建另一个字符串。

与此类问题一样，我会运行基准测试并比较两种性能:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T16:12:27.537

@Mark Byers 已经发布了正确答案。

我想强调的是，你*永远不*应该使用 ToLower 进行字符串比较。这是不正确的。

```
s1.Equals(s2, StringComparison.CurrentCultureIgnoreCase) //#1
s1.ToLower() == s2.ToLower() //#2
s1.ToLowerInvariant() == s2.ToLowerInvariant() //#3 
```

(2) 和 (3) 对于外来语言和奇怪字符都是不正确的。土耳其语的“I”是典型的例子。

**始终使用 #1**，即使在哈希表中

*（非常特殊的情况除外）*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T16:14:11.620

应该注意的`Regex.Match(s1, s2, RegexOptions.IgnoreCase)`是，在一般情况下检查不区分大小写的相等性并不是一种安全的方法。`s2`考虑is的情况`".*"`。`Regex.Match`无论是什么，都将永远返回真`s1`！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-13T22:12:46.483

这可能是 我见过的最极端的[过早优化案例。](http://c2.com/cgi/wiki?PrematureOptimization)相信我，您永远不会遇到与此问题相关的情况。

不要听那些告诉你避免使用正则表达式的人，因为“它们很慢”。 *写得不好*的正则表达式确实会占用一些可怕的资源，但这是编写正则表达式的人的错。精心设计的正则表达式对于人们应用它们的绝大多数任务来说足够快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T17:41:03.450

比较会更快，但与其转换为小写或大写然后进行比较，不如使用可以不区分大小写的相等比较。例如：

```
 s1.Equals(s2, StringComparison.OrdinalIgnoreCase) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-13T21:55:32.043

以下是所提出的 3 种方法的小比较：

> 正则表达式：282ms ToLower：67ms 等于：34ms

```
public static void RunSnippet()
{
    string s1 = "Abc";
    string s2 = "ABC";

    // Preload
    compareUsingRegex(s1, s2);
    compareUsingToLower(s1, s2);
    compareUsingEquals(s1, s2);

    // Regex
    Stopwatch swRegex = Stopwatch.StartNew();
    for (int i = 0; i < 300000; i++) 
        compareUsingRegex(s1, s2);
    Console.WriteLine(string.Format("Regex: {0} ms", swRegex.ElapsedMilliseconds));

    // ToLower
    Stopwatch swToLower = Stopwatch.StartNew();
    for (int i = 0; i < 300000; i++) 
        compareUsingToLower(s1, s2);
    Console.WriteLine(string.Format("ToLower: {0} ms", swToLower.ElapsedMilliseconds));

    // ToLower
    Stopwatch swEquals = Stopwatch.StartNew();
    for (int i = 0; i < 300000; i++) 
        compareUsingEquals(s1, s2);
    Console.WriteLine(string.Format("Equals: {0} ms", swEquals.ElapsedMilliseconds));
}

private static bool compareUsingRegex(string s1, string s2) 
{
    return Regex.IsMatch(s1, s2, RegexOptions.IgnoreCase);
}

private static bool compareUsingToLower(string s1, string s2) 
{
    return s1.ToLower() == s2.ToLower();
}

private static bool compareUsingEquals(string s1, string s2) 
{
    return s1.Equals(s2, StringComparison.CurrentCultureIgnoreCase);
} 
```

# c++ - MS VC2010 - 双向带有斜线的路径

> ID：10573144
> 
> 赞同：0
> 
> 时间：2012-05-13T16:00:41.750
> 
> 标签：c++, visual-studio-2010, path

我在 Visual C++ 中遇到了这个错误。我以前用斜线指向错误的方向得到它。

这是错误：

```
Unable to start program
'C:\Develop\QxOrm\1.2.4\QxOrm\tes\qxDllSample\dll1\debug/dll1.dll' 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:03:37.097

\t 是选项卡的转义码。使用 \\ 转义反斜杠，或使用所有正斜杠。

# javascript - javascript element.focus() IE

> ID：10573145
> 
> 赞同：0
> 
> 时间：2012-05-13T16:00:43.947
> 
> 标签：javascript, internet-explorer, focus

因此，当用户双击 div 时，我想让它可编辑并将光标设置在他双击的位置。

html：

```
<div id="mydiv" class="cmydiv" ondblclick="fEdit(this, event)">haha brouhaha beeee lololol</div> 
```

javascript：

```
function fEdit(elem, e) {
    elem.contentEditable = "true";
    var range;
    if (document.selection) {
        range = window.document.selection.createRange();
        range.expand("word");
        range.execCommand("unselect");
    } else {
        range = window.getSelection();
        if (range.rangeCount > 0) range.collapseToStart();
    }
    setTimeout(function() { elem.focus(); }, 10);
    //elem.focus();
} 
```

正如你所看到的，我用 IE 的 setTimeout 调用 focus()，但是它仍然不起作用！在所有其他浏览器中，我可以看到现在可编辑的 div 内的光标，但不能在 IE 中（版本 8）。到底是怎么回事 ？

jsfiddle：http: [//jsfiddle.net/QcKpr/12/](http://jsfiddle.net/QcKpr/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:25:55.573

这似乎可以做到这一点：

```
function fEdit(elem, e) {
    elem.contentEditable = "true";
    var range;
    if (document.selection) {
        range = window.document.selection.createRange();
        range.collapse();
        range.select();
    } else {
        range = window.getSelection();
        if (range.rangeCount > 0) range.collapseToStart();
    }
    setTimeout(function() { elem.focus(); }, 10);
    //elem.focus();
}; 
```

重要的一点是为 IE 调用 range.select()。range.collapse() 对其他浏览器执行与 range.collapseToStart() 相同的操作。range.execCommand("unselect") 不是你想要的。

更新了 jsFiddle：http: [//jsfiddle.net/QcKpr/16/](http://jsfiddle.net/QcKpr/16/)

# drupal - 在 drupal 7 中，如何从节点标题中获取节点 ID？

> ID：10573147
> 
> 赞同：0
> 
> 时间：2012-05-13T16:00:54.730
> 
> 标签：drupal, load

我知道节点标题，我想从节点标题中获取节点 ID，我尝试了 2 种方法但无法正常工作

1)

```
$title = arg(2); // get node title from the url 
$node = node_load(array('title' => $title));    
$nid = $node->nid;
print $nid; 
```

错误是说 `Can only flip STRING and INTEGER values! in DrupalDefaultEntityController->load()`，`Trying to get property of non-object`

2)

```
 $items = entity_load('node', FALSE, array(
            'type' => 'article',
            'title' => arg(2),
    )); 
```

但那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:27:44.423

节点 nid 只能是数字和唯一值。$title 不是数值，是用户输入的字符串，$title 与 $node->nid 没有任何关系。您可以有 10 个具有相同标题的不同节点。另请参阅：

[http://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_load/7](http://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_load/7)

[http://api.drupal.org/api/drupal/includes!common.inc/function/entity_load/7](http://api.drupal.org/api/drupal/includes!common.inc/function/entity_load/7)

# php - 动态 XSLT 排序

> ID：10573151
> 
> 赞同：0
> 
> 时间：2012-05-13T16:02:01.573
> 
> 标签：php, xml, xslt, sorting

我的问题与这个非常相似：

[XSLT：在 xls:sort 属性中使用参数（动态排序）](https://stackoverflow.com/questions/2529465/xslt-use-parameters-in-xlssort-attributes-dynamic-sorting)

但我想按节点的属性对其进行排序。如何更改此命令：

```
<xsl:sort select="*[name()=$sortBy]" order="{$order}"/> 
```

这样就可以与属性名称进行比较，而不是 name() 函数？或者有没有其他方法（根据给定参数动态地）按属性对节点进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:20:04.397

使用`<xsl:sort select="@*[name()=$sortBy]" order="{$order}"/>`，这就是所有需要的。

# java - 我需要单独的 Eclipse 项目来使用 PC 代理为 Android 开发吗

> ID：10573153
> 
> 赞同：1
> 
> 时间：2012-05-13T16:02:20.710
> 
> 标签：java, android, windows, eclipse

我正在编写一个将与 PC 通信的 Android 应用程序。我试图在一个 Eclipse 项目中创建 2 个包，但这似乎不起作用。当我尝试调试 PC java 应用程序时，它会因“无法连接到 VM”而崩溃。我搜索了这个，并找到了关闭 Windows 防火墙并重新启动的建议。这没有用。崩溃报告指出：

```
# Internal Error (classFileParser.cpp:3494), pid=4408, tid=4776
# Error: ShouldNotReachHere() 
```

也许我缺少一个最佳实践？这两个相似的代码单元（它们共享一些公共类）应该在不同的项目中，还是我采取了一种好的方法，只是遇到了一些配置问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:13:59.030

如果您真的想在一个 Eclipse 项目中同时拥有这两个项目，则必须执行以下操作：

1.  为您的 PC 项目创建运行配置（运行 -> 运行配置 -> 添加）
2.  将 JRE 设置为任何 JavaSE（例如 1.7）（选项卡 JRE）
3.  删除 Androidx.x 库 vom 引导条目（选项卡类路径）

现在你应该可以运行你的电脑项目了。

- - 编辑：

关于您关于最佳实践的问题。我认为你可能应该分开项目，除非你的 PC 项目真的很小（比如只有一个班级）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:06:00.583

我觉得拥有两个独立的项目将是适合您的方式。在组织上，我相信这会更好。这也可以帮助您避免将来出现此类问题。

# c# - 使用 Html Agility Pack 解析表格

> ID：10573154
> 
> 赞同：4
> 
> 时间：2012-05-13T16:02:23.843
> 
> 标签：c#, html-agility-pack

我有一些桌子

```
<table>
        <tr class="odd">
        <td class="ind gray">1</td>
        <td><b>acceding</b></td>
        <td class="transcr">[əksˈiːdɪŋ]</td>
        <td class="tran">присоединения</td>
      </tr>
<!-- .... -->
        <tr class="odd">
        <td class="ind gray">999</td>
        <td><b>related</b></td>
        <td class="transcr">[rɪlˈeɪːtɪd]</td>
        <td class="tran">родственный</td>
      </tr>
</table> 
```

我想在一行中解析三个“td”。我的代码

```
Dictionary<string, Word> words = new Dictionary<string, Word>();
string text = webBrowser1.DocumentText;
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(text);
for (int i = 0; i < doc.DocumentNode.SelectNodes("//tr").Count; i++)
{
     HtmlNode node = doc.DocumentNode.SelectNodes("//tr")[i];
     Word word = null;
     if (TryParseWord(node, out word))
     {
          try
          {
               if (!words.ContainsKey(word.eng))
               {
                    words.Add(word.eng, word);
               }
          }
          catch
          { continue; }
     } 
} 
```

以及解析功能

```
private bool TryParseWord(HtmlNode node, out Word word)
{
    word = null;
    try
    {
        var eng = node.SelectNodes("//td")[1].InnerText;
        var trans = node.SelectNodes("//td")[2].InnerText;
        var rus = node.SelectNodes("//td")[3].InnerText;
        word = new Word();
        word.eng = eng;
        word.rus = rus;
        word.trans = trans;
        return true;

    }
    catch
    {
        word = null;
        return false;
    }
} 
```

在我的方法 TryParseWord 中，我只有第一行的值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T16:20:08.467

我可以通过这种方式轻松获取值

```
 HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
 doc.LoadHtml(html);

 var table = doc.DocumentNode
            .Descendants("tr")
            .Select(n => n.Elements("td").Select(e => e.InnerText).ToArray()); 
```

和用法：

```
foreach (var tr in table)
{
    Console.WriteLine("{0} {1} {2} {3}", tr[0], tr[1], tr[2], tr[3]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T16:15:45.353

您必须更改 XPath，使其不再从一开始就匹配。像这样：

```
node.SelectNodes(".//td")[1] 
```

点告诉 XPath 只匹配当前节点。

# php - 如何在 PHP 中分别销毁管理会话和用户会话？

> ID：10573157
> 
> 赞同：0
> 
> 时间：2012-05-13T16:02:49.100
> 
> 标签：php, session

我目前正在使用一个面临明显问题的应用程序。我的应用程序中有两个主要面板，一个是*管理*面板，另一个是*用户*面板，显而易见。

假设，管理员当前登录到他的面板，同时*用户*面板上的一些用户可能已经登录。如果我在 PHP 中使用以下代码注销并重定向到*登录*页面，会发生什么情况（当管理员或任何用户注销时）。

```
session_start();
session_unset();

if(session_destroy())
{
    header("location:Login.php");   
} 
```

假设用户正在注销，而管理员仍在登录。上面的代码将破坏会话，因此管理员也将注销并重定向到*登录*页面。

我知道会话可以像这样取消设置，`unset($_SESSION['something'])`但是记住应用程序中使用的所有会话变量是一个乏味的过程，因为双方（管理员和用户）都已经使用了很多会话变量。

有没有办法分别销毁管理会话和用户会话？我的意思是当用户注销时，他的会话被破坏，这根本不会影响管理会话，反之亦然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T16:04:16.120

会话在用户之间是独立的。仅仅因为一个用户注销并不意味着每个会话都被破坏 - 只是注销的用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T16:07:32.970

简单的解决方案 - 为您的变量添加一个级别，以便管理员和用户变量位于完全独立的部分，例如

```
$_SESSION['admin']['setting1'] = 'someval';
$_SESSION['admin']['setting2'] = 'otherval';

$_SESSION['user']['setting3'] = 'foo';
$_SESSION['user']['setting4'] = 'bar'; 
```

然后，如果用户退出管理部分，这很简单

```
unset($_SESSION['admin']); 
```

和**POOF**，所有管理员变量都消失了。

# iphone - NSString drawInRect 与核心文本

> ID：10573158
> 
> 赞同：1
> 
> 时间：2012-05-13T16:02:58.227
> 
> 标签：iphone, objective-c, ios, core-text

我在文档中读到，`NSString`类别方法`drawInRect`适用于少量文本，但对于大量文本来说开销太大。在我的情况下，替代方法是使用 Core Text `CTFrameDraw`。

`drawInRect`我的问题是，使用vs Core Text之间的“分界点”是什么？Core Text 总是比 快`drawInRect`吗？如果额外的编程不是问题，我是否应该总是使用 Core Text 而不是`drawInRect`，即使是小字符串？

大多数情况下，我会画段落，但有时它们也可能是短线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:49:44.910

对我来说，当我对平面设计师有一些特定要求时，就会使用核心文本。例如需要混合颜色、类型、字体大小等的标签。drawRect 是在视图层中绘制东西的方法，只是 CG 函数的包装，核心文本是处理如何绘制文本的完整框架：更改字体，空间，联运。我的意思是作为比较是不公平的，一个更好的问题可能是使用核心文本而不是常见的 UI 文本 porpoise obejects 并且答案基于您的应用程序设计-UI 相关要求。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:32:53.140

I wonder if using a UIWebView would get all the performance that's possible. The iOS (and every OS) has a constantly loaded webkit ready to go. Its pretty well optimized too. It would also get work offloaded.

Interesting to compare.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:06:41.353

我会编写一些测试代码来使用您预期的字符串内容的统计分布来对正在考虑的两种方法进行基准测试。可能需要数千万的字符串渲染时间。在实际的 iOS 设备上运行基准测试，因为使用 ARM 目标框架的相对性能可能会有所不同。

# windows - 关于 Windows，系统变量和环境变量有什么区别？

> ID：10573159
> 
> 赞同：4
> 
> 时间：2012-05-13T16:02:58.757
> 
> 标签：windows, path, environment-variables

在 Windows 上定义环境变量有两种方法。我已经看到使用“系统”变量和仅使用“环境”变量的示例。使用一种方法相对于另一种方法有什么区别和后果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T16:48:44.127

像 %SystemRoot% 和 %WinDir% 这样的变量只是普通的环境变量。唯一的区别是它们的值来自哪里：

*   系统环境变量是预定义的，由安装程序确定。 [这篇 Technet 文章](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)“在 Cmd.exe 中使用环境变量”部分列出了它们的名称，请注意它已过时且不涵盖 64 位特定变量
*   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment 注册表项中定义的可配置系统范围环境变量，对任何用户都有效
*   HKEY_CURRENT_USER\Environment 注册表项中定义的可配置用户特定环境变量。

有效的过程环境是这三个来源的合并。

后两个注册表项可以从控制面板+系统小程序，环境变量按钮进行编辑。请注意，使更改生效可能需要注销 + 登录，因此该过程从环境的新副本开始，而不是从其父进程继承的陈旧副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T17:22:06.357

环境变量按以下顺序“评估”（即，它们被归因）：

系统变量 autoexec.bat 中定义的变量 用户变量 每个进程都有一个环境块，其中包含一组环境变量及其值。环境变量有两种类型：用户环境变量（为每个用户设置）和系统环境变量（为每个人设置）。子进程默认继承其父进程的环境变量。

命令处理器启动的程序继承命令处理器的环境变量。

环境变量指定文件的搜索路径、临时文件的目录、特定于应用程序的选项和其他类似信息。系统为每个用户和计算机维护一个环境块。系统环境块代表特定计算机的所有用户的环境变量。用户的环境块代表系统为该特定用户维护的环境变量，包括系统环境变量集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T16:09:38.940

我的理解是“系统”选项仅适用于管理员帐户。选择此选项将为所有用户提供变量值。非管理员用户的环境变量，并且可以用他们自己想要的值覆盖值。第二个选项对系统上的其他帐户没有影响。

定义系统变量需要重新启动系统以更新您的系统。如果使用命令提示符和环境选项，您只需要一个新的或新的提示符来使用您定义的变量。

# css - 将一个 div 放在另一个 div 的背景下

> ID：10573174
> 
> 赞同：1
> 
> 时间：2012-05-13T16:05:55.133
> 
> 标签：css

不确定这是否可行，但我有一个带有“边框”背景的 div。在这个 div 里面是另一个包含内容的 div，我希望这个 div 出现在边框下。

这可能与CSS有关吗？

编辑：抱歉写得太匆忙了，让我试着解释一下。

父 div 像这样使用背景图像：

```
background-image: url(images/SomeImage.png) 
```

SomeImage.png 只是出现在 div 顶部的自定义边框。

我在这个父 div 中有一个子 div，我希望它出现在 SomeImage.png 下。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:14:32.497

做这样的事情：

**HTML**

```
<div id="border-bg">
   <div id="content">
      Your content goes here
   </div>
</div>​ 
```

**CSS**

```
​#border-bg {
    background:url(images/border.png) no-repeat;
    z-index:100;
    position:relative;
}
#border {
    z-index:10;
    position:relative;
}​ 
```

确保添加边框图像的`width`和`height`。

z-index 属性指定元素的堆栈顺序。具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。

[检查此以获取有关 z-index 的更多信息](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:15:30.047

这是可能的。尝试更改父 div 的不透明度。例如 $("#childdiv").css({ opacity: 1.0 }); $("#parentdiv").css({ 不透明度：0.75 });

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:58:23.747

只是把它扔在那里......我正在使用它来将背景图像放在登录屏幕后面......

```
 <table align=center width=100% border=0 cellpadding=0 cellspacing=0    background="images/image.png" STYLE="background-repeat: no-repeat; background-position:center">
 <tr>
 <td align=center valign=middle height="350" background="images/loginimage.png"  STYLE="background-repeat: no-repeat; background-position:center">

 Content Here

 </td>
 </tr>
 </table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T16:16:08.007

我想你想在内容 div 上应用内阴影[http://sublimeorange.com/css/css3-inner-shadow/ ？](http://sublimeorange.com/css/css3-inner-shadow/)

```
<div id="border-frame" style="padding: 10px; background-color: red">
<div id="content" style="padding: 10px; box-shadow:inset 0 0 10px #000000; background-color:white"> 
this is some great text
</div>
</div> 
```

[http://jsfiddle.net/gzbVG/](http://jsfiddle.net/gzbVG/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T16:25:51.393

我最终将“背景图片”放在另一个 div 中并使用负边距。很抱歉造成混乱，但没有其他解决方案对我有用。

# ios - 使用 UINavigationController 推送 EAGL-View 时 iPhone 内存使用量增加

> ID：10573179
> 
> 赞同：2
> 
> 时间：2012-05-13T16:07:13.917
> 
> 标签：ios, opengl-es, uinavigationcontroller

我正在开发一个简单的 iOS 游戏，但我遇到了 UINavigationController 和 EAGL-View 的问题。情况如下：我使用一个 EAGL-View 与多个控制器配合使用。每当我推送 MainViewController（它执行所有自定义 openGL 绘图）时，我最终都会使用更多内存（每次推送大约 5MB！）。

问题似乎出在`[eaglView_ setFramebuffer]`- 或者至少几乎所有分配似乎都在那里（我已经通过 Instruments 检查了实时字节 - 在这个函数中分配了大约 70% 的内存）。

EAGLView::setFramebuffer:

```
- (void)setFramebuffer {
    if (context) {
        [EAGLContext setCurrentContext:context];

        if (!defaultFramebuffer)
             [self createFramebuffer];

        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, msaaFramebuffer);         
        glViewport(0, 0, framebufferWidth, framebufferHeight);
    }
} 
```

和 EAGLView::createFramebuffer:

```
- (void)createFramebuffer
{
    if (context && !defaultFramebuffer) {
        [EAGLContext setCurrentContext:context];

        // Create default framebuffer object.
        glGenFramebuffers(1, &defaultFramebuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);

        // Create color render buffer and allocate backing store.
        glGenRenderbuffers(1, &colorRenderbuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);
        [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:(CAEAGLLayer *)self.layer];
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &framebufferWidth);
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &framebufferHeight);

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorRenderbuffer);

        //MSAA stuff
        glGenFramebuffers(1, &msaaFramebuffer);
        glGenRenderbuffers(1, &msaaRenderBuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, msaaFramebuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, msaaRenderBuffer);

        glRenderbufferStorageMultisampleAPPLE(GL_RENDERBUFFER, 4, GL_RGBA8_OES, framebufferWidth, framebufferHeight);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, msaaRenderBuffer);

        glGenRenderbuffers(1, &msaaDepthBuffer);      
        glBindRenderbuffer(GL_RENDERBUFFER, msaaDepthBuffer);
        glRenderbufferStorageMultisampleAPPLE(GL_RENDERBUFFER, 4, GL_DEPTH_COMPONENT16, framebufferWidth, framebufferHeight);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, msaaDepthBuffer);

        if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
            NSLog(@"Failed to make complete framebuffer object %x", glCheckFramebufferStatus(GL_FRAMEBUFFER));

    }
} 
```

如您所见 - 没有什么特别的。我像这样切换我的 ViewController：（在 AppDelegate 中）

```
- (void) swichToViewController: (UIViewController*) newViewController overlapCurrentView: (bool) overlap {
  // get the viewController on top of the stack - popViewController doesn't do anything if it's the rootViewController.
  if(!overlap) {
    // clear everything that was on the eaglView before 
    [eaglView_ clearFramebuffer];
    [eaglView_ applyMSAA];
    [eaglView_ presentFramebuffer];         
  }

  UIViewController* oldViewController = [navController_ topViewController];
  // see if the view to be switched to is already the top controller:
  if(oldViewController == newViewController)
    return;
  // if the view is already on the stack, just remove all views on top of it:
  if([[navController_ viewControllers] containsObject:newViewController]) {
    [oldViewController setView:nil];
    [newViewController setView:eaglView_];
    [navController_ popToViewController:newViewController animated:!overlap];
    return;
  }
  // else push the new controller
  [navController_ popViewControllerAnimated:NO];
  [oldViewController setView:nil];
  [newViewController setView:eaglView_];
  [navController_ pushViewController:newViewController animated:!overlap];
} 
```

最后，我像这样渲染我的精灵：（在我的 MainViewController.mm 中）：

```
- (void)drawFrame
{
  // When I delete this line, I just get a white screen, even if I have called setFramebuffer earlier(?!)
  [(EAGLView *)self.view setFramebuffer];

  glClearColor(1, 1, 1, 1);
  glClear(GL_COLOR_BUFFER_BIT); 

  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();

  GLfloat screenWidth = [UIScreen mainScreen].bounds.size.width;
  GLfloat screenHeight = [UIScreen mainScreen].bounds.size.height;

  glOrthof(0, screenWidth, 0, screenHeight, -1.0, 1.0);
  glViewport(0, 0, screenWidth, screenHeight);

  [gameManager_ playGame];

  //MSAA stuff
  [(EAGLView *)self.view applyMSAA];

  [(EAGLView *)self.view presentFramebuffer];
  [(EAGLView *)self.view clearFramebuffer];
} 
```

可能值得一提的是，我不会在每次推送视图时分配视图，我会一直引用它们直到游戏退出。

`[gameManager_ playGame]`将精灵绘制到屏幕上 - 但我在另一个项目中使用了这种方法，没有任何内存问题。

任何帮助将不胜感激，因为我已经坚持了 2 天：/

编辑：我已经能够将问题缩小到调用`gldLoadFramebuffer`. 每当我尝试使用 openGL 函数在屏幕上绘制某些东西时，都会调用它。当上下文发生变化时，它似乎会消耗更多的内存......但我该如何避免呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:23:48.000

我想我找到了问题所在。对于任何感兴趣的人：切换视图时没有正确删除 MSAA 缓冲区。这导致在几次推送后性能显着下降，并且也是内存使用量增加的原因。

# c++ - 增加由暴露给 boost::python 的构造函数创建的对象的引用计数

> ID：10573181
> 
> 赞同：3
> 
> 时间：2012-05-13T16:07:29.130
> 
> 标签：c++, boost-python

我公开了一个打算在 Python 中子类化的 C++ 对象。在构造这些对象时，某些容器 C++ 端会引用这些对象。（实际上是 std::map）一个对象只能在从该容器中显式删除后才能被破坏。然而，它们由 Python 管理，因此在没有 Python 引用但仍被容器引用时被销毁。

我必须告诉 Python，当我构造对象时，我保留了对它的引用。我找不到任何简单的方法来做到这一点。我没有找到任何意味着“将对返回对象的引用计数增加一”的调用策略。我应该实施自己的呼叫政策来做到这一点吗？（我不知道如何实现调用策略）或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T16:56:41.487

我写了一个特殊的策略来增加对正在构造的对象的引用计数。

```
template <class Base = default_call_policies>
struct incref_return_value_policy : Base
{
    static PyObject *postcall(PyObject *args, PyObject *result)
    {
        PyObject *self = PyTuple_GET_ITEM(args, 0);
        Py_INCREF(self);
        return result;
    }
}; 
```

然后它可以用作任何其他策略：

```
class_<A>("A", init<>()[ incref_return_value_policy<>() ] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:03:32.223

这是一个小例子，可以满足我的要求。整个过程的中心是使用一个“holder”类，它告诉 Boost.Python 在 Python 中构造某种类型的实例时实际使用不同的类，并且它应该将 Python 对象作为第一个参数传递给自定义的任何构造函数包装类。您可以在此处找到更多信息：

[http://www.boost.org/doc/libs/1_48_0/libs/python/doc/v2/class.html](http://www.boost.org/doc/libs/1_48_0/libs/python/doc/v2/class.html)

（具体参见“HeldType 语义”讨论）。

```
#include "boost/python.hpp"

namespace bp = boost::python;

class Base {
public:
    virtual double go(int x) const = 0;
    virtual ~Base() {}
};

class PyBase : public Base {
public:
    explicit PyBase(PyObject* self) : _self(self) {
        Py_INCREF(_self); // THIS LEAKS MEMORY IF THERE'S NO DECREF!
    }
    virtual double go(int x) const {
        return bp::call_method<double>(_self, "go", x);
    }
private:
    PyObject * _self;
};

BOOST_PYTHON_MODULE(example) {
    bp::class_<Base,PyBase,boost::noncopyable>(
        "Base",
        bp::init<>() // the PyObject* arg is implicit
    ) 
        .def("go", &PyBase::go)
        ;
} 
```

但有一些警告：

*   如果您没有`go`在继承自 的 Python 中实现`Base`，您将收到一条关于无限递归的无用 Python 异常消息。如果有默认实现，我也不确定如何使虚函数回退到 C++（您可能可以通过查看 的代码来弄清楚`bp::wrapper`，它做了非常相似的事情）。

*   如果您`Base`通过引用或指针从 C++ 函数返回一个对象，您将不会有一个包含`PyBase`对象的 Python 对象，除非您返回的实例实际上是一个 PyBase 对象（如果您考虑一下，这是有道理的）课程）。

*   如果要按值返回，则需要添加一个以 a 作为其第一个参数的复制构造函数，然后才能从调用`PyObject*`中删除`boost::noncopyable`模板参数。`bp::class_`

*   构造函数中的`Py_INCREF`语句告诉 Python “您的代码”正在对该对象进行额外引用。但是我不清楚你想如何添加相应的`Py_DECREF`: 如果你只有 a对象，那么`std::map`以后`Base*`就没有办法从中得到 a`PyObject*`了。

*   解决上述问题的一种方法是拥有一个`bp::handle<>`or的容器`bp::object`，并构造其中一个 from`self`放入容器中。但在这种情况下，您需要确保在程序结束之前清空这些容器，因为如果在静态析构函数时调用 Python 析构函数，您将遇到分段错误。

# applescript - AppleScript - 语音转文本

> ID：10573183
> 
> 赞同：1
> 
> 时间：2012-05-13T16:07:39.907
> 
> 标签：applescript, speech-recognition, speech-to-text

我正在尝试编写一个小的 AppleScript，它可以输出一串可以由另一个脚本操作的文本。这有效：

```
tell application "SpeechRecognitionServer"
    set display to no
    set theResponse to listen for {"yes", "no"}
    if theResponse is "yes" then
        display
    else
        say "Goodbye."

    end if
end tell 
```

唯一的问题是它会重复您发出的命令！（在我们的例子中，是或否）。所以我的问题是：**有没有办法防止它重复命令？**我只是不明白为什么它会重复该命令，也无法弄清楚哪个进程运行语音，否则我会杀死它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:09:03.343

手动修复：
系统偏好设置 -> 语音 -> 语音识别选项卡
禁用“识别时”复选框。

程序修复：
这涉及在您的代码之前禁用这些首选项，然后将它们设置回其原始值。也就是说，如果您打算将此代码移植给其他用户。如果它只是您自己的个人脚本，那么手动修复可以永久设置它。

参考这个论坛的人问同样的问题，以及他们尝试过的各种方法： http://macscripter.net/viewtopic.php?id=
[33259](http://macscripter.net/viewtopic.php?id=33259)

# jquery - .load() 、 fadeOut() 和 fadein() 在 IE8 中不起作用

> ID：10573195
> 
> 赞同：4
> 
> 时间：2012-05-13T16:09:51.977
> 
> 标签：jquery, internet-explorer-8, load

我在发布之前已经搜索过这个。我的网站中有一个页面，我需要每 X 秒刷新一次数据。我正在使用`

```
var s= setInterval(function()
{

    $('#responsecontainer').fadeOut("slow").load('table_data.php?pair_id=<?echo $pair_id?>').fadeIn("slow");

}, 5000);

var s= setInterval(function()
{

    $('#responsecontainer2').fadeOut("fast").load('last_modifed.php').fadeIn("fast");

}, 5000); 
```

`

它在 FF 和 Chrome 中运行良好，但在 IE8 中运行良好。我不介意看到它每次都加载数据，但它甚至不这样做，我试着写

```
$('#responsecontainer').load('table_data.php'); 
```

即使我更改它，它也会从文件中加载旧数据。

该页面在[这里](http://s-maof.com/Forum/forex.php)（它是希伯来语，顺便说一句）有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:15:00.903

您的`table_data.php`页面正在返回`304 Not Modified`，这意味着您已将其设置为缓存。向该文件添加标头以[防止缓存](http://www.blog.highub.com/php/php-solutions/php-prevent-browser-and-proxy-cache/)，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:17:08.683

确保页面没有被缓存。一种典型的方法是使用唯一的时间戳或类似的值

```
'table_data.php?pair_id=<?echo $pair_id?>&no-cache=' + (new Date()).getTime() 
```

# php - Facebook-connect 提供重定向循环

> ID：10573199
> 
> 赞同：5
> 
> 时间：2012-05-13T16:10:45.650
> 
> 标签：php, facebook, login

拜托，我需要帮助。我正在处理这个问题1个月！

我想使用 PHP 和 php-sdk 3.1.1 实现 facebook 连接登录到我的网站。简而言之，我的代码离线工作（在本地主机上）但不能在线工作，这导致“重定向循环过多（在 Chrome 上）”：错误 310（net::ERR_TOO_MANY_REDIRECTS）：重定向过多。

这是我的代码：

1/ 我加载 facebook 连接 SDK 并初始化它：

```
 require 'src/facebook.php';
    $facebook = new Facebook(array(
        'appId'  => '209633612480053',
        'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx'
    )); 
```

请注意，我在 facebook-developper 页面上创建了两个应用程序，一个用于离线测试，另一个用于在线测试。而且我肯定在测试时在两对appId/secret（在线和离线）之间正确切换。所以不是facebbok-connect init坏的问题。

2/ 我尝试获取用户信息：

```
 $uid = $facebook->getUser();

  if($uid)
  {
     /*
      * Get user information.
      */
     $user = $facebook->api('me/');
     print_r($user); // Display user info.
  }
  else
  {
     /*
      * Redirect to FB login URL to allow access.
      */
     $loginURL = $facebook->getLoginURL();
     echo '<script> top.location.href=\''.$loginURL.'\'</script>';
  } 
```

It's as simple as that: If user ic connected to facebook, so display it's information, else, redirect to facebook login page to allow access.

IT WORKS PERFECTLY OFFLINE, but online, I get a chrome error:

```
This webpage has a redirect loop
The webpage at https://www.facebook.com/dialog/oauth?client_id=209633612480053&redirect_uri=http%3A%2F%2Fwww.bluward.com%2Foauth%2Ffacebook&state=551f60cd4be6cd8ed1622f8168a5219a#_=_ has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer. 
```

Some additional information: Online, I use 1and1 host provider, and to be sure to have the same server configuration than offline server (which is a MAMP Pro), I uploaded the sams php.ini file.

Please, if someone has an idea, or get a similar problem, I'll be glad to have help.

Thank you in advance for all help.

**UPDATE:**

I updated my code to focus on the problematic line, so instead of redirecting to facebook login page, I display the redirect URL, so I just have to click to login:

```
 $uid = $facebook->getUser();

  if($uid)
  {
     /*
      * Get user information.
      */
     $user = $facebook->api('me/');
     print_r($user); // Display user info.
  }
  else
  {
     /*
      * Redirect to FB login URL to allow access.
      */
     $loginURL = $facebook->getLoginURL();
     echo $loginURL; // <-- HERE I CHANGED THE CODE TO DISPLAY LOGIN URL
  } 
```

What I noticed is that facebook is infinitely redirecting to my script page. Only `code` parameter on URL bar changes.

So, why facebbok is redirecting to my script page without giving me user info?

Please, any idea?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T08:35:27.960

I had this problem, in my case I had to edit base_facebook.php from the SDK:

```
public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2',
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_SSL_VERIFYHOST => false,
); 
```

The last two options I added manually.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:28:49.973

I had a similar issue with chrome browser, cookies always were incorrect or empty.

Then I downloaded a facebook example from [Heroku](https://www.heroku.com/) (it uses a popup window as login instead of a js redirect) and noticed that it doesn't work in chrome when the base URL of the website isn't the server root URL (ex: `localhost/somedirectory/`). But after creating a virtual host it looks like it works.

You can see an example of the index.php from the application here [https://gist.github.com/2845986](https://gist.github.com/2845986)

# java - 无法从 WSDL 创建 JAX-WS 服务

> ID：10573203
> 
> 赞同：0
> 
> 时间：2012-05-13T16:11:54.480
> 
> 标签：java, wsdl, jax-ws

我有一个 WSDL 文档：

```
<definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
             xmlns:tns="http://java.CAEServer"
             xmlns:server="http://caeserver.caebeans.org"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns="http://schemas.xmlsoap.org/wsdl/"
             targetNamespace="http://java.CAEServer"
             name="CAEInstanceImplService">

    <types>
        <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                    targetNamespace="http://caeserver.caebeans.org"
                    xmlns:test="http://example.org"
                    xmlns:wsa="http://www.w3.org/2005/08/addressing"
                    xmlns:serv="http://caeserver.caebeans.org"
                    attributeFormDefault="unqualified" elementFormDefault="qualified">

            <xsd:element name="data" type="xsd:string"/>

            <xsd:element name="parameter">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="text">
                            <xsd:complexType>
                                <xsd:attribute name="data" type="xsd:string"/>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="units">
                            <xsd:complexType>
                                <xsd:attribute name="data" type="xsd:string"/>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="comment">
                            <xsd:complexType>
                                <xsd:attribute name="data" type="xsd:string"/>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="enums" type="xsd:string"/>
                        <xsd:element name="default" type="xsd:int"/>
                        <xsd:element name="value" type="xsd:string"/>
                    </xsd:sequence>
                    <xsd:attribute name="name" type="xsd:string"/>
                    <xsd:attribute name="type" type="xsd:string"/>
                    <xsd:attribute name="visible" type="xsd:boolean"/>
                </xsd:complexType>
            </xsd:element>

            <xsd:complexType name="languageData">
                <xsd:simpleContent>
                    <xsd:extension base="xsd:string">
                        <xsd:attribute name="name" type="xsd:string"/>
                    </xsd:extension>
                </xsd:simpleContent>
            </xsd:complexType>

            <xsd:element name="language">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element maxOccurs="unbounded" name="data" type="serv:languageData"/>
                    </xsd:sequence>
                    <!--<xsd:attribute name="xml:lang" type="xsd:string"/>-->
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="instance_ID" type="xsd:string"/>

            <xsd:element name="problemCaebean">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="categories">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="category">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element maxOccurs="unbounded" ref="serv:parameter"/>
                                            </xsd:sequence>
                                            <xsd:attribute name="name" type="xsd:string"/>
                                            <xsd:attribute name="data" type="xsd:string"/>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="resources">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element maxOccurs="unbounded" ref="serv:language"/>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                    <xsd:attribute name="name" type="xsd:string"/>
                    <xsd:attribute name="author" type="xsd:string"/>
                    <xsd:attribute name="version" type="xsd:decimal"/>
                    <xsd:attribute name="caebeanId" type="xsd:string"/>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="caeProject">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="serv:problemCaebean"/>
                        <xsd:element name="logical">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element maxOccurs="unbounded" name="node">
                                        <xsd:complexType>
                                            <xsd:attribute name="id" type="xsd:string"/>
                                            <xsd:attribute name="type" type="xsd:string"/>
                                            <xsd:attribute name="condition" type="xsd:string"/>
                                            <xsd:attribute name="execute" type="xsd:string"/>
                                            <xsd:attribute name="x" type="xsd:int"/>
                                            <xsd:attribute name="y" type="xsd:int"/>
                                        </xsd:complexType>
                                    </xsd:element>
                                    <xsd:element maxOccurs="unbounded" name="edge">
                                        <xsd:complexType>
                                            <xsd:attribute name="source" type="xsd:string"/>
                                            <xsd:attribute name="target" type="xsd:string"/>
                                            <xsd:attribute name="when" type="xsd:boolean"/>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="physical">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="componentCaebean">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element maxOccurs="unbounded" name="input">
                                                    <xsd:complexType>
                                                        <xsd:attribute name="filename" type="xsd:string"/>
                                                    </xsd:complexType>
                                                </xsd:element>
                                                <xsd:element maxOccurs="unbounded" name="output">
                                                    <xsd:complexType>
                                                        <xsd:attribute name="filename" type="xsd:string"/>
                                                    </xsd:complexType>
                                                </xsd:element>
                                                <xsd:element name="jar-premode">
                                                    <xsd:complexType>
                                                        <xsd:attribute name="name" type="xsd:string"/>
                                                    </xsd:complexType>
                                                </xsd:element>
                                                <xsd:element name="exec">
                                                    <xsd:complexType>
                                                        <xsd:sequence>
                                                            <xsd:element name="param">
                                                                <xsd:complexType>
                                                                    <xsd:attribute name="name" type="xsd:string"/>
                                                                </xsd:complexType>
                                                            </xsd:element>
                                                        </xsd:sequence>
                                                        <xsd:attribute name="name" type="xsd:string"/>
                                                        <xsd:attribute name="appname" type="xsd:string"/>
                                                        <xsd:attribute name="appversion" type="xsd:decimal"/>
                                                    </xsd:complexType>
                                                </xsd:element>
                                            </xsd:sequence>
                                            <xsd:attribute name="name" type="xsd:string"/>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                    <xsd:attribute name="name" type="xsd:string"/>
                    <xsd:attribute name="author" type="xsd:string"/>
                    <xsd:attribute name="version" type="xsd:decimal"/>
                    <xsd:attribute name="id" type="xsd:string"/>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="Status">
                <xsd:complexType>
                    <xsd:choice>
                        <xsd:element name="NOT_STARTED"/>
                        <xsd:element name="RUNNING"/>
                        <xsd:element name="HELD"/>
                        <xsd:element name="SUCCESSFULL"/>
                        <xsd:element name="FAILED"/>
                    </xsd:choice>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="CurrentTime">
                <xsd:complexType>
                    <xsd:simpleContent>
                        <xsd:extension base="xsd:dateTime">
                            <xsd:anyAttribute namespace="##other" processContents="lax"/>
                        </xsd:extension>
                    </xsd:simpleContent>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="TerminationTime" nillable="true">
                <xsd:complexType>
                    <xsd:simpleContent>
                        <xsd:extension base="xsd:dateTime">
                            <xsd:anyAttribute namespace="##other" processContents="lax"/>
                        </xsd:extension>
                    </xsd:simpleContent>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="Description">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="serv:Status"/>
                        <xsd:element ref="serv:TerminationTime"/>
                        <xsd:element ref="serv:CurrentTime"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

            <!--
            message used to create a new instance WS-Resource
            -->
            <xsd:element name="createInstance">
                <xsd:complexType/>
            </xsd:element>

            <!--
               the response, simply contains an EPR to the new instance
            -->
            <xsd:element name="createInstanceResponse">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="instanceID" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="submitJob">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="serv:instance_ID"/>
                        <xsd:element ref="serv:problemCaebean"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="submitJobResponse">
                <xsd:complexType>
                    <xsd:sequence>
                        <!--<xsd:element name="xml" type="xsd:string"/>-->
                        <xsd:element name="Result" type="xsd:int"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="getStatus">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="instance_ID" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

            <xsd:element name="getStatusResponse">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="serv:Status"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>

        </xsd:schema>
    </types>

    <message name="SubmitJobRequest">
        <part name="parameter" element="server:submitJob"/>
    </message>

    <message name="SubmitJobResponse">
        <part name="parameter" element="server:submitJobResponse"/>
    </message>

    <message name="GetStatusRequest">
        <part name="parameter" element="server:getStatus"/>
    </message>

    <message name="GetStatusResponse">
        <part name="parameter" element="server:getStatusResponse"/>
    </message>

    <portType name="CAEInstance">
        <operation name="SubmitJob">
            <input message="tns:SubmitJobRequest"/>
            <output message="tns:SubmitJobResponse"/>
        </operation>
        <operation name="GetStatus">
            <input message="tns:GetStatusRequest"/>
            <output message="tns:GetStatusResponse"/>
        </operation>
    </portType>

    <binding name="CAEInstanceImplPortBinding" type="tns:CAEInstance">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <operation name="SubmitJob">
            <soap:operation soapAction="http://java.CAEServer/submitJob"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
        <operation name="GetStatus">
            <soap:operation soapAction="http://java.CAEServer/getStatus"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>

    <service name="CAEInstanceImplService">
        <port name="CAEInstanceImplPort" binding="tns:CAEInstanceImplPortBinding">
            <soap:address location="http://127.0.0.1:9000/caeinstance"/>
        </port>
    </service>
</definitions> 
```

我正在使用命令创建类型和服务定义

```
wsimport -keep -verbose ../src/main/resources/instance.wsdl 
```

但是当我编译并运行我的项目并尝试从生成的 WSDL 编译客户端存根时，我遇到了一个错误

```
parsing WSDL...

[ERROR] undefined element declaration 'ns1:instance_ID'
  line 36 of http://localhost:9000/caeinstance?xsd=1

[ERROR] undefined element declaration 'ns1:Result'
  line 49 of http://localhost:9000/caeinstance?xsd=1 
```

我的 WSDL 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:26:31.907

CXF 和 Eclipse 都提供 WSDL 验证器。您应该通过其中之一运行您的 WSDL 并查看它的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T13:49:51.913

您是否创建了该 WSDL？我认为您正在尝试使用一些未在 WSDL 中导出的数据类型。

wsdl 引用了一个名为“s”的模式，但找不到，因为它的 URL 是 XMLSchema 但应该是 XMLSchema.xsd

你可以使用 wsimport -b [http://www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd) usrtowsdl?WSDL

# windows-server - 更改 Windows Server 主机上的文件权限

> ID：10573205
> 
> 赞同：1
> 
> 时间：2012-05-13T16:12:07.740
> 
> 标签：windows-server

我将我的网站上传到我的主机，除了 mdb 文件写入问题外一切正常。我将它用作我的数据库，但默认情况下访问文件是只读的。如何设置其文件权限？我尝试使用 filezilla 更改它，但它仅适用于 linux 服务器。任何人都可以帮忙吗？

问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:44:45.050

大多数托管公司都提供了一个控制面板，如 websitepanel、plesk 或 helm 来更改/修改文件的权限。

如果您可以共享您正在使用的控制面板名称，我们可以为您提供更改文件权限的分步说明。

# ruby-on-rails - Rails 3.2.3：预编译资产失败并显示“没有这样的文件或目录 - 资产：预编译：所有（Errno::ENOENT）”

> ID：10573208
> 
> 赞同：0
> 
> 时间：2012-05-13T16:12:48.333
> 
> 标签：ruby-on-rails, asset-pipeline

我正在使用 rails 3.2.3，当我运行 bundle exec rake assets:precompile 时，它​​失败并显示以下跟踪：

```
bundle exec rake assets:precompile --trace

** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/harish/.rvm/rubies/ruby-1.8.7-p352/bin/ruby /home/harish/.rvm/gems/ruby-1.8.7-p352/bin/bundler_wrapper assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
/home/harish/.rvm/gems/ruby-1.8.7-p352/bin/bundler_wrapper:22:in `read': No such file or directory - assets:precompile:all (Errno::ENOENT)
    from /home/harish/.rvm/gems/ruby-1.8.7-p352/bin/bundler_wrapper:22
rake aborted!
Command failed with status (1): [/home/harish/.rvm/rubies/ruby-1.8.7-p352/b...]
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `create_shell_runner'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/home/harish/.rvm/rubies/ruby-1.8.7-p352/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/harish/.rvm/gems/ruby-1.8.7-p352/gems/rake-0.9.2.2/bin/rake:33
/home/harish/.rvm/gems/ruby-1.8.7-p352/bin/rake:19:in `load'
/home/harish/.rvm/gems/ruby-1.8.7-p352/bin/rake:19
/home/harish/.rvm/gems/ruby-1.8.7-p352/bin/bundler_wrapper:22
Tasks: TOP => assets:precompile 
```

它正在尝试查找文件“assets:precompile:all”。当我创建一个名为“assets:precompile:all”的虚拟文件时，它运行成功但没有做任何事情。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:04:39.673

问题出在 rake 0.9.2.2 上。重新安装 rake 0.9.2.2 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:22:36.457

我也遇到了这个问题，我通过执行以下操作解决了它：

打开`config/environments/production.rb`并确保将以下选项设置为`true`：

```
# Don't fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = true 
```

然后运行：

```
rake assets:precompile --trace RAILS_ENV=production 
```

# android - “等待调试器附加”即使未在调试模式下运行也会显示

> ID：10573210
> 
> 赞同：85
> 
> 时间：2012-05-13T16:13:17.160
> 
> 标签：android, debugging

**我的问题**：

我在开发应用程序时遇到了一个尴尬的问题。如标题中所述，每次我在启动时安装我的应用程序（在运行模式下，而不是调试！）时，*等待调试器连接..*消息出现 1-2-3 秒，然后应用程序启动。

**我想要什么**：

我想要的是能够在不出现该消息的情况下启动应用程序（它只是在最近几天才开始出现，我不记得更改与调试相关的任何内容）。

**我试过的**：

*   我已经尝试设置，`android:debuggable="false"`但如果我这样做，调试器永远不会附加并且消息永远不会消失。
*   安装后我也尝试过禁用`USB Debugging`，但仍然没有结果。
*   即使我终止应用程序并通过外部源将其唤醒（它使用 Google 的 C2D 消息传递框架），它仍然会尝试在唤醒时以调试模式运行。

我已经开发了几个 Android 应用程序，但从未偶然发现这一点。为什么我无法在 RUN 模式下启动应用程序？有没有其他方法可以在设备上安装应用程序，而无需点击 Eclipse 中的运行按钮？

如果需要，我可以从 AndroidManifest 或代码的其他部分发布代码片段，但正如我已经提到的，我几天前没有遇到这种奇怪的行为。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-13T16:31:18.380

确保您的 java 文件没有任何断点，并且`Restart the device`一切都应该正常。

我遇到了同样的问题，我的应用程序总是在调试模式下运行。重新启动设备对我有用。

并确保您正在使用

右键单击项目-->>运行方式-->> Android应用程序

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-03-09T01:08:28.017

对我来说，解决方案是从我的设备设置中关闭**USB 调试**，然后再次打开它！

比重新启动整个设备要快得多。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-06T21:56:48.673

我在使用 Android Studio 时遇到了同样的问题。重启手机对我有用！

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-03-01T14:41:01.703

**1** . 在你的手机中打开设置。

**2** . 转到开发人员选项。（关于电话-> 开发人员选项）。

**3** . 禁用开发人员选项并再次启用开发人员选项。

**4** . 启用 USB 调试并通过 USB 安装。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-28T08:17:56.080

检查等待调试器的选项是否已激活。

设置 -> 开发人员选项 -> 等待调试器。

我认为这是果冻豆的新产品。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-03-05T08:57:05.473

运行此命令，问题将得到解决

```
adb shell am clear-debug-app 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-13T16:28:50.650

我假设这是在模拟器中而不是在设备上。如果是设备，则忽略其余部分。:p

听起来您在调试器连接时保存了模拟器的快照。

修理：

1) 转到 AVD 控制面板，单击受影响的模拟器并点击启动
2) 弹出窗口时，取消选择“从快照启动”并保持选中“保存到快照”
3) 启动模拟器。
4) 关闭模拟器
5) 在 AVD 控制面板上再次启动模拟器 6) 再次选中“从快照启动”

那应该可以解决问题。

**编辑**。

抱歉浪费了空间，我读得太快了，错过了您谈论尝试禁用 USB 调试的内容。我遇到了我之前描述的上述情况，所以我会为那些遇到这样问题的人留下这个答案。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-13T05:47:13.597

开发人员选项中的“等待调试器”可能已设置为等待您的应用程序。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-08-26T05:31:22.430

一旦你放置了断点，请检查一下。运行应用程序一次，如果您收到相同的消息，请调试 as-> 调试配置-> 选择您需要运行的应用程序并选择始终提示选择设备。它肯定会工作。这可能很愚蠢，但我长期面临这个问题，我尝试了这个，这对我有帮助。如果需要，重新启动您的设备。谢谢

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-09T03:28:36.957

对我来说，我使用 Android Studio 2.1.2I，我点击 Menu Run > Attach debugger to Android process 只有 2 行 __device_name ____app_name 我只需选择 app_name（想要运行）然后点击 OK 然后奇迹发生了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-07T06:46:51.553

我有同样的问题。但是重新启动我的设备或清除断点不起作用。

我试过：运行——>附加到Android进程。选择您的包裹，然后按 OK。

它有效:)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-03-28T12:06:07.710

有这么多 adb 进程正在运行，我将它们全部杀死并开始调试

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-07T11:30:03.997

您还可以将您的 Android App 设置为 Debugging-App Settings --> Developer Options --> set Debuging-App

在那里你可以选择你的应用程序

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2014-07-08T07:06:45.687

您的清单文件可能包含以下权限

只需删除此权限

```
<uses-permission android:name="android.permission.SET_DEBUG_APP"/> 
```

# java - Java Sonatype 异步 HTTP 客户端上传进度

> ID：10573211
> 
> 赞同：0
> 
> 时间：2012-05-13T16:13:20.843
> 
> 标签：java, file-upload, asynchronous, progress

我正在尝试使用 sonatype 异步 http 客户端 - [https://github.com/sonatype/async-http-client](https://github.com/sonatype/async-http-client)来实现异步文件上传。

我尝试了文档中建议的方法。使用传输监听器。 [http://sonatype.github.com/async-http-client/transfer-listener.html](http://sonatype.github.com/async-http-client/transfer-listener.html)

我实现了 TransferListener 接口的 onBytesSent （就像测试一样）：

```
public void onBytesSent(ByteBuffer byteBuffer) {

     System.out.println("Total bytes sent - ");
     System.out.println(byteBuffer.capacity());
} 
```

然后在另一个线程中（因为我不想阻止应用程序）我尝试执行以下操作：

```
TransferCompletionHandler tl = new TransferCompletionHandler();
tl.addTransferListener(listener);

asyncHttpClient.preparePut(getFullUrl(fileWithPath))
      .setBody(new BodyGenerator() {
           public Body createBody() throws IOException {
                return new FileBodyWithOffset(file, offset);
           }
       })
       .addHeader(CONTENT_RANGE, new ContentRange(offset, localSize).toString())
       .execute(handler).get(); 
```

一切都很好。文件上传正确且速度非常快。但问题是 - 我仅在上传完成后才从**TransferListener**中`onBytesSent`收到消息。例如，上传在 10 分钟内完成。在那 10 分钟内，我什么也得不到。只有在那之后，所有内容都打印在控制台上。

 **我无法弄清楚这段代码有什么问题。我只是尝试遵循文档。

我试图在主线程中执行上面的代码，它也没有工作。

也许使用这个客户端实现上传进度监听器是错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:46:03.217

我会自己回答。我没有设法解决 TransferListener 的问题。所以我尝试了另一种方式。

我已经将进度逻辑放在 Body 接口实现中（在 read 方法中）：

```
public class FileBodyWithOffset implements Body {

    private final ReadableByteChannel channel;

    private long actualOffset;

    private final long contentLength;

    public FileBodyWithOffset(final File file, final long offset) throws IOException {

        final InputStream stream = new FileInputStream(file);

        this.actualOffset = stream.skip(offset);

        this.contentLength = file.length() - offset;

        this.channel = Channels.newChannel(stream);
    }

    public long getContentLength() {

        return this.contentLength;
    }

    public long read(ByteBuffer byteBuffer) throws IOException {

        System.out.println(new Date());

        actualOffset += byteBuffer.capacity();

        return channel.read(byteBuffer);
    }

    public void close() throws IOException {

        channel.close();
    }

    public long getActualOffset() {

        return actualOffset;
    }
} 
```

也许这是一个肮脏的把戏，但至少它有效。**

# user-interface - wxhaskell 中的布局组合器

> ID：10573212
> 
> 赞同：1
> 
> 时间：2012-05-13T16:13:21.110
> 
> 标签：user-interface, haskell, wxhaskell

我正在尝试填充文本条目以填充整个宽度，如果将条目直接放入框架中，这可以正常工作，但如果将它们放入面板中，它们会恢复为默认大小。“盒装”布局组合器文本也消失了。我究竟做错了什么？

```
import Graphics.UI.WX

main = start gui

gui = do
  f <- frame []
  p <- panel f []
  xcoord <- entry p []
  ycoord <- entry p []
  set p [layout := fill $ boxed "foo" $
      grid 5 5 [
          [floatRight $ label "x   coordinate", hfill $ widget xcoord]
        , [floatRight $ label "y coordinate", hfill $ widget ycoord]
      ]
    ]
  set f [layout := fill $ container p glue] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:24:09.403

您在语句中指定 p 的布局，然后将其与用法`set p [layout := ...`一起丢弃。`container p glue`

(`container`的第二个参数是容器的布局。`glue`是一个布局，但对于面板来说不是一个明智的布局。)

您应该（最简单）替换`container p glue`为`widget p`：

```
import Graphics.UI.WX

main = start gui

gui = do
  f <- frame []
  p <- panel f []
  xcoord <- entry p []
  ycoord <- entry p []
  set p [layout := boxed "foo" $
      grid 5 5 [
          [floatRight $ label "x   coordinate", hfill $ widget xcoord]
        , [floatRight $ label "y coordinate", hfill $ widget ycoord]
      ]
    ]
  set f [layout := fill $ widget p] 
```

或将所有布局代码移动到最后的容器表达式中：

```
import Graphics.UI.WX

main = start gui

gui = do
  f <- frame []
  p <- panel f []
  xcoord <- entry p []
  ycoord <- entry p []
  set f [layout := fill $ container p $ boxed "foo" $
      grid 5 5 [
          [floatRight $ label "x   coordinate", hfill $ widget xcoord]
        , [floatRight $ label "y coordinate", hfill $ widget ycoord]
      ]] 
```

但我更喜欢第一个，因为它对我来说感觉更干净，并且以后在你的主框架中添加更多东西似乎更容易`f`。

# sql - SQLite 在哪里插入或替换

> ID：10573215
> 
> 赞同：8
> 
> 时间：2012-05-13T16:13:44.987
> 
> 标签：sql, sqlite

我有一个包含 3 列、ID、描述和键的表，其中 ID 不是主键！我想要的是插入或更新/替换当前记录。示例：decryptionKeys ID 描述密钥 999 生日 24.12.1988

我试过这个，但它不会工作：

```
INSERT OR REPLACE INTO decryptionKeys VALUES ("999","Birthday","25.12.1988") WHERE ID="999" AND Description="Birthday" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T16:19:22.960

离开 thr where 子句

```
INSERT OR REPLACE INTO decryptionKeys VALUES ("999","Birthday","25.12.1988") 
```

# python - App Engine 上 BackgroundThreads 的日志在哪里？

> ID：10573217
> 
> 赞同：2
> 
> 时间：2012-05-13T16:13:45.633
> 
> 标签：python, google-app-engine, backend, background-thread

我正在编写一个应用程序，它从后端实例上的 BackgroundThread 对象写入日志条目。我的问题是我不知道如何访问日志。

文档说，“后台线程的 os.environ 和日志条目独立于生成线程的条目”，实际上，日志条目不会与后端实例的条目一起显示在管理控制台上。但是管理控制台不提供显示后台线程的选项。

appcfg request_logs 似乎也不是答案。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:26:12.220

应用程序的版本/后端的左上角有一个组合框切换到后端，您将看到后端日志。

# emacs - Emacs Lisp 的有趣错误

> ID：10573219
> 
> 赞同：3
> 
> 时间：2012-05-13T16:13:54.770
> 
> 标签：emacs, lisp, elisp

在尝试简化我的 init.el 时，我决定将一些功能从丑陋的条件树中移出。为了摆脱一些决策，我构建了两个辅助函数：

```
(defun abstract-screen-width ()
  (cond ((eq 'x window-system) (x-display-pixel-width))
        ((eq 'ns window-system) (display-pixel-width))
        ))

(defun perfect-font-size (pixels)
  (cond ((eq 'x window-system) (cond ((<= pixels 1024) 100)
                                     ((<= pixels 1366) 110)
                                     ((> pixels 1366) 120)))
        ((eq 'ns window-system) (cond ((<= pixels 1024) 110)
                                      ((<= pixels 1280) 120)
                                      ((> pixels 1280) 140))))) 
```

而且它们很好地结合在一起，并按照它们被调用的方式调用它们工作正常。

```
(perfect-font-size (abstract-screen-width))
130 
```

custom-set-faces 调用，因为它是有效的

```
(custom-set-faces
        '(default ((t (:inherit nil :stipple nil :inverse-video nil :box nil
                                :strike-through nil :overline nil
                                :underline nil :slant normal :weight normal
                                :height 130 :width normal
                                :family "IBM 3270"))))
        '(linum ((t (:inherit default :foreground "#777" :height 130))))) 
```

但我的“更好”版本

```
(custom-set-faces
        '(default ((t (:inherit nil :stipple nil :inverse-video nil :box nil
                                :strike-through nil :overline nil
                                :underline nil :slant normal :weight normal
                                :height (perfect-font-size (abstract-screen-width)) :width normal
                                :family "IBM 3270"))))
        '(linum ((t (:inherit default :foreground "#777" :height 120))))) 
```

没有。它给出了“默认面高不是绝对和积极的”错误。faces.el 和 cus-face.el 中的来源并没有太大帮助。有什么提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T16:25:50.037

表达方式

```
'(default ((t (:inherit nil :stipple nil :inverse-video nil :box nil
                            :strike-through nil :overline nil
                            :underline nil :slant normal :weight normal
                            :height (perfect-font-size (abstract-screen-width)) :width normal
                            :family "IBM 3270")))) 
```

被完整引用，即`(perfect-font-size (abstract-screen-width))`不会被评估。尝试反引号：

```
`(default ((t (:inherit nil :stipple nil :inverse-video nil :box nil
                            :strike-through nil :overline nil
                            :underline nil :slant normal :weight normal
                            :height ,(perfect-font-size (abstract-screen-width)) :width normal
                            :family "IBM 3270")))) 
```

（注意反引号和逗号）。该错误只是 emacs 告诉您的方式，它更喜欢获得列表的数字`(perfect-font-size (abstract-screen-width))`

# facebook - 使用 JS SDK 删除时间轴上的动作

> ID：10573226
> 
> 赞同：1
> 
> 时间：2012-05-13T16:14:38.310
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-timeline

我有一个“添加到时间轴”按钮，我已经可以使用另一个函数将帖子添加到时间轴，但现在我希望能够获取一个操作的 requestID，以便我可以从我拥有的另一个 javascript 函数中删除它。我一直在到处搜索，但找不到一个很好的例子来学习如何获取 ID，我仍然对如何做感到困惑。这是代码：

```
 <script type="text/javascript">
       function deleteRead(requestId)
       {        
       FB.api(
             requestId,
               'delete',
                function(response) {
                 if (!response || response.error) {
                        alert('error...');
                 } else {
                     alert('Successfully Deleted!');
                     }
                  });
             }</script> 
```

添加帖子的操作 ID 号直接有效，我可以在我的时间轴上删除帖子。但我必须让它自动获取每个帖子的 id。

我是否必须使用 PHP SDK 才能获取 requestID？这是我正在使用的另一个代码：

```
 <div id="fb-root"></div>
             <script type="text/javascript">
              window.fbAsyncInit = function() {

                 FB.init({
                 appId      : 'I-have-my-app-ID-here', // App ID
                 status     : true, // check login status
                 cookie     : true, // enable cookies to allow the server to access the session
                 xfbml      : true  // parse XFBML
                 }); 

             };

              // Load the SDK Asynchronously
             (function(d){
                 var js, id = 'facebook-jssdk'; 
                 if (d.getElementById(id)) {return;}
                 js = d.createElement('script'); js.id = id; js.async = true;
                 js.src = "//connect.facebook.net/en_US/all.js";
                 d.getElementsByTagName('head')[0].appendChild(js);
                  }(document));   
                 </script> 
```

更好的是，有没有办法可以通过 PHP 获取 requestID 并将其传递给变量？取决于帖子（如果它被添加到时间轴），所以我可以用“requestID”替换它，比如：

```
 <?php echo $requestID; ?> 
```

这样，我可以在我的 javascript 中使用 requestID 所在的 php 代码，并且如果您想使用为同一页面中的其他内容获取的相同 requestID。示例：如果将帖子添加到时间轴，它将在该帖子页面上显示它的请求 ID 号，以防您希望仅在将其添加到时间轴时才显示删除按钮，如果未添加，则不要显示删除按钮使用一个条件语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:57:34.907

有两种方法可以做到这一点：

*   将每个操作的 ID 存储在数据库中。这不是想法，因为可以从 Facebook 中删除操作，并使其与您的数据库不同步。
*   实时查询用户的操作并使用它来显示要删除的操作列表。这是首选。

示例代码：

```
// get activity from Facebook
$actions = $facebook->api('/me/' . $action_id );
// get ID of last action
echo $actions[0]['id'] ); 
```

然后，您可以从上面获取帖子的 ID（例如`$actions[0]['id']`）并将其传递给您的 JavaScript 函数或创建一个 PHP 函数来删除该操作。或者，您可以循环`$actions`搜索特定操作是否已存在，通过 URL 匹配，例如

```
if ( $actions[0]['data']['article']['url'] == $current_url ) {
    ...
} 
```

# html - 为什么波纹模拟器给我这个错误信息？

> ID：10573247
> 
> 赞同：0
> 
> 时间：2012-05-13T16:17:32.047
> 
> 标签：html, blackberry, blackberry-webworks, ripple

我刚刚安装了 Ripple Emulator 和 BlackBerry WebWorks SDK。但是，当我启动 Ripple Emulator 时，它直接进入一个页面，上面写着“404 页面未找到”，但我只是刚刚启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:11:30.553

这与我遇到的问题相同...如果您以前安装过 Ripple Emulator（安装路径中的文件夹），请确保您已删除备份，现在您要重新安装它。有时它的行为异常，因此您必须删除以前安装的所有足迹。

# ios - iOS OpenGL ES Analyzer 列出“不存在的帧缓冲区附件”和“缺少帧缓冲区附件”，但 FBO 可以工作

> ID：10573248
> 
> 赞同：5
> 
> 时间：2012-05-13T16:17:36.640
> 
> 标签：ios, opengl-es, instruments

我正在使用 OpenGL 帧缓冲区对象 (FBO) 在 iOS 上实现模板阴影。代码有效——也就是说，从视觉上看，模板缓冲区正在完成这项工作，而且性能似乎还不错。

但是，当我通过 OpenGL ES Analyzer 工具运行应用程序时，它会抱怨“不存在帧缓冲区附件”和“缺少帧缓冲区附件”。我无法理解这些消息，因为 FBO 确实有颜色、深度和模板的附件。调用 glCheckFramebufferStatus() 返回 GL_FRAMEBUFFER_COMPLETE，表示没有问题。

这是 Instrument 的 OpenGL Analyzer 中的错误吗？

另请参阅[此线程](https://github.com/isgl3d/isgl3d/issues/20#issuecomment-5044579)，它没有给出任何答案，但提出了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:52:52.640

我终于在他们的论坛上得到了 Apple 的答复：

[苹果官方回复](https://devforums.apple.com/message/685479#685479)

> 感谢您报告此错误。这是一个已知问题，已在 Xcode 4.4 和 4.5 开发者预览版中修复。干杯，赛斯。

# ios - 在 iOS 中使用正则表达式从一个字符串中排除字符串

> ID：10573249
> 
> 赞同：0
> 
> 时间：2012-05-13T16:17:47.520
> 
> 标签：ios, regex, nsstring

我想做与[使用正则表达式排除字符串](https://stackoverflow.com/questions/3792367/excluding-strings-using-regex)中的几乎相同的操作，但我想使用正则表达式来做 iOS。所以我基本上想在字符串中找到匹配项，然后将它们从字符串中删除，所以如果我有这样的字符串，`Hello #world @something`我想找到`#world`&`@something`然后将它们从字符串中删除，这样它就变成了`Hello`. 我已经有这个表达式可以删除`#world`，`something`但不是`@`，`#[\\p{Letter}]+|[^@]+$`我`@`通过这样做解决了这个问题

```
NSString *stringWithoutAt = [input stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"@%@",atString] withString:@""];
NSString *stringWithoutTag = [input stringByReplacingOccurrencesOfString:tagString withString:@""]; 
```

所以对于第一个我结束`Hello #world`和第二个`Hello @something`。但是有没有办法使用正则表达式或其他方法同时删除 the`#world`和 the `@something`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:48:06.960

您可以通过两种方式在 iPhone 中使用正则表达式：-

1>使用RegExKitLIte作为框架[见教程](http://www.mobisoftinfotech.com/blog/iphone/iphone-regular-expression-tutorial-regexkitlite-framework/)

2>使用 NSRegularExpression & NSTextCheckingResult

```
NSStirng *string=@"Your String";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"@[a-z]*#[a-z]*" options:NSRegularExpressionCaseInsensitive error:&error];
[regex enumerateMatchesInString:string options:0 range:NSMakeRange(0, [string length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop)
{
    // your statement if it matches
}]; 
```

这里@之后的任何表达式和#之后的表达式都被连接起来

在语句中，您可以将其替换为空格以获取表达式

如果您只想修改字符串，请执行以下操作：-

```
 NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0
range:NSMakeRange(0, [string length]) withTemplate:@"$2$1"]; 
```

# php - 具体的正则表达式函数

> ID：10573250
> 
> 赞同：2
> 
> 时间：2012-05-13T16:17:49.430
> 
> 标签：php

我有一个包含成员 ID 值的数据库。（总是 8 位长）如果成员在工资单上，则 ID 中会添加一个“SI”前缀。

例如：

```
John: 12345678

Jack: SI87654321 
```

现在我想编写一个函数来检查数字开头是否有“SI”。（某种从数字中提取“SI”的正则表达式）

如果是 -> 返回 ID 号（没有 SI），则选中 YES 单选按钮。（检查=“检查”）

如果不是 -> 返回 ID 号，则选中 NO 单选按钮。（检查=“检查”）

例子：

PHP：

```
$ID = get from database (for example: SI12345678)

function check () {return $pureNumber} 
```

HTML：

```
<body>
<?php echo $pureNumber ?><br/>
<label for="dz1"><input type="radio" value="SI" name="davzav" id="dz1"/>YES(SI)</label>
<label for="dz2"><input type="radio" value="" name="davzav" id="dz1"/>NO</label>
</body> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T16:20:00.293

您可以只检查前两个字符：

```
if( substr($id,0,2) == "SI") {
    $is_si = true;
    $id = substr($id,2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T16:21:18.810

您不需要正则表达式：

```
if (0 === strncmp($userid, 'SI', 2)) {
    echo "SI number: ", substr($userid, 2);
} else {
    echo "Not SI number: ", $userid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:39:23.443

如果您想用正则表达式在一行中执行此操作，以下代码将返回您的号码。

```
$result = preg_replace("/^SI/", '', $in,  1); 
```

然后，将 $result 值与 $in 值进行比较。

```
if ($result != $in) { checked = "checked";} 
```

# c - BLAS：C 中的矩阵乘积？

> ID：10573257
> 
> 赞同：2
> 
> 时间：2012-05-13T16:19:15.880
> 
> 标签：c, performance, matrix, product, blas

感谢 BLAS，我想用 C 语言实现一些快速操作（没有机会选择另一个库，它是我项目中唯一可用的库）。我执行以下操作：

*   反转方阵，
*   制作矩阵乘积 A*B，其中 A 是计算的逆矩阵，B 是向量，
*   将两个（非常长的）向量相加。

我听说使用 BLAS 可以进行这种操作，而且速度非常快。但是我搜索并没有发现任何可以让我理解和应用它的东西（我的意思是在 C 代码行中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T16:50:05.663

BLAS 库最初是用 Fortran 编写的。C 的接口称为 CBLAS，所有函数都以 . 为前缀`cblas_`。

不幸的是，对于 BLAS，您只能直接解决最后两点：

*   `sgemv`（单精度）或`dgemv`（双精度）执行矩阵向量乘法
*   `saxpy`(单精度) 或`daxpy`(双精度) 执行一般向量-向量加法

BLAS 不处理更复杂的矩阵求逆运算。为此，有基于 BLAS 并提供线性代数运算的 LAPACK 库。LAPACK 中的一般矩阵求逆是使用`sgetri`（单精度）或`dgetri`（双精度）完成的，但还有其他处理特定情况的求逆例程，如对称矩阵。如果您反转矩阵只是为了稍后将它乘以一个向量，那本质上是求解一个线性方程组，并且有`sgesv`（单精度）和`dgesv`（双精度）。

您只能通过本质上（重新）实现 LAPACK 例程之一来使用 BLAS 操作来反转矩阵。

有关更多详细信息和示例，请参阅众多 BLAS/LAPACK 实现之一，例如[Intel MKL](http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/index.htm)或[ATLAS](http://math-atlas.sourceforge.net/faq.html#doc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:19:38.333

你真的需要计算完整的逆吗？这很少需要，非常昂贵且容易出错。

计算逆乘以向量或矩阵更为常见。这是很常见的，相当便宜，而且不容易出错。您无需计算倒数即可将其乘以向量。

如果您想计算 Z = X^-1Y 那么您应该查看[LAPACK 驱动程序例程](http://www.netlib.org/lapack/lug/node26.html)。在这种情况下，通常 Y 只有几列。如果您确实需要查看所有 X^-1，则可以将 Y 设置为完整标识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T15:37:30.980

从技术上讲，您可以按照您的要求做，但通常这样做更稳定：

*   三角分解，例如 LU 分解或 Cholesky 分解
*   在分解矩阵上使用三角求解器

BLAS 非常有能力做到这一点。从技术上讲，它在“LAPACK”中，但大多数/许多 BLAS 实现都包括 LAPACK，例如 OpenBLAS 和英特尔的 MKL 都这样做。

*   进行 LU 分解的函数是`dgetrf`("(d)ouble, (ge)neral matrix, (tr)iangular (f)actorization") [http://www.netlib.org/lapack/double/dgetrf.f](http://www.netlib.org/lapack/double/dgetrf.f)
*   那么求解器是`dtrsm`("(d)ouble (tr)iangular (s)olve (m)atrix") [http://www.netlib.org/blas/dtrsm.f](http://www.netlib.org/blas/dtrsm.f)

请注意，要从 C 调用这些，请注意：

*   函数名应为小写，带`_`后缀，即`dgetrf_`和`dtrsm_`
*   所有参数都应该是指针，例如`int *m`和`double *a`

# c++ - 向客户公开服务

> ID：10573268
> 
> 赞同：0
> 
> 时间：2012-05-13T16:20:26.890
> 
> 标签：c++, architecture, service, thrift

我们的应用程序中有内部服务，基本上是作为 Thrift RPC 服务开发的。现在，我需要将这些服务公开给核心系统之外的客户端应用程序。

现在，问题是：我应该直接向客户端公开这些 Thrift 服务吗？这样做的好处是所需的工作量最少。缺点是客户端需要连接到这些 Thrift API 以及另一个已经存在的接口，所以实际上客户端应用程序需要打开多个套接字才能连接到核心系统。

另一种选择是将这些 Thrift 服务包装在另一层中，最终将交付给最终客户端。这样做的缺点：对数据进行两次编组/解组，一次使用 Thrift，下一次使用另一个接口。

处理这种情况的首选方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:47:11.987

我们不会将这些服务直接暴露给外部客户。我们将构建或使用应用程序来配置外部客户端可以连接的代理。

这样做的好处是：

*   无需在防火墙上打洞
*   可以进行额外的安全检查
*   可以限制对内部服务的访问
*   黑客能够利用服务的机会较小

# css - 返回顶部按钮 - 根据分辨率更改固定位置

> ID：10573274
> 
> 赞同：0
> 
> 时间：2012-05-13T16:20:39.290
> 
> 标签：css, layout, positioning

在[我的站点](http://webdev.aanm.ca/Evan_Parsons/Portfolio/index.aspx)中，返回顶部按钮将跟随页面，这正是我想要的。但是，如果您的分辨率高于 1024x768（我很确定每个人都是如此），则按钮的位置不会在主要内容 div 内。

我可以使用 Javascript 来检测分辨率，然后从那里调整位置，但如果有更清洁的解决方案，我更愿意！另外，我不是设计师，所以如果有人有任何化妆品方面的意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:37:26.073

我有一个解决方案。添加一个 div 来包装按钮。

```
<div id="button-wraper">
    <div id="backToTop">
            <a href="#top">
                <img src="site_resources/upArrow.png" style="border: none;z-index: 100;" alt="Back to top">
            </a>
    </div>
</div> 
```

**CSS**

```
#button-wraper {
    width: 960px;
    margin: 0 auto;
    position: relative;
} 
```

`position: fixed;`并从中删除`#backToTop`。

还要确保`<div class="footer">`仅将此代码放在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:08:45.310

放

```
<div id="backToTop">
            <a href="#top">
                <img alt="Back to top" style="border: none;z-index: 100;" src="site_resources/upArrow.png">
            </a>
        </div> 
```

在内容 div 中。删除“左”定位并保留底部，它将位于其自然左侧位置，因为您没有定义任何内容。

但实际上，我认为它现在看起来好多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:32:31.127

编辑**

尝试这个：

```
<div id="button-wrap">
    <div id="backToTop">
        <a href="#top">
            <img src="site_resources/upArrow.png" style="border: none;z-index: 100;" alt="Back to top" />
        </a>
    </div>
</div> 
```

**CSS**

```
#button-wrap {
  position: fixed;
  bottom: 0px;
  left: 0px;
  width:100%;
}

#backToTop {
  position:relative;
  width:1000px;
  margin:0 auto;
  z-index: 1000;
  color: #C6C6C6;
  opacity: 0.3;
} 
```

# jquery - 用于 HTML5 音频问题的 javascript 垫片

> ID：10573277
> 
> 赞同：3
> 
> 时间：2012-05-13T16:21:13.337
> 
> 标签：jquery, html, javascript, html5-audio

我正在使用一个名为 audio.js 的 javascript 垫片来提供带有 Flash 回退的 HTML5 音频。我现在可以在所有现代浏览器以及 Android 和 iO 中使用它，但是有一个问题我似乎无法解决，那就是在 Firefox 或 Android 中，当我使用在轨道结束时触发的回调时，我无法重播声音的。文件在播放结束时卡住。

该项目是一个幻灯片，其逻辑取决于每个轨道结束时触发的回调。这是我尝试使用回调的方式：

```
audio.trackEnded=function() {

    // operate on the DOM
    } 
```

这是来自 audio.js API 的一点：

```
trackEnded: function(e) {
      this.skipTo.apply(this, [0]);
      if (!this.settings.loop) this.pause.apply(this);
      this.settings.trackEnded.apply(this);
    } 
```

我没有任何运气深入研究 API 试图弄清楚如何重置音频文件。我所知道的是，无论我在 trackEnded 函数中添加了什么，在需要 Flash 的浏览器中，文件最后都会冻结，当我删除该函数时，音频会很好地重置。并尝试通过设置 currentTime = 0 来对音频元素本身进行操作；打破了整个事情。

这是音频冻结的演示，您可以在单击幻灯片后看到：

[http://www.jontakiff.com/audio-playback/skeleton.html](http://www.jontakiff.com/audio-playback/skeleton.html)

任何关于我如何解决这个问题的见解都将非常感激。

编辑：这里是 audio.js API 的链接：http: [//kolber.github.com/audiojs/docs/](http://kolber.github.com/audiojs/docs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:35:05.353

抱歉评论，只是看看页面代码。你可以试试 jQuery Connect 插件。这里有一些参考：

[http://beyondrelational.com/modules/2/blogs/61/posts/11231/what-is-jquery-connect-how-to-use-jquery-connect.aspx](http://beyondrelational.com/modules/2/blogs/61/posts/11231/what-is-jquery-connect-how-to-use-jquery-connect.aspx)

[http://archive.plugins.jquery.com/project/jqConnect](http://archive.plugins.jquery.com/project/jqConnect)

jquery 代码如下所示：

```
$.connect(audio,'trackEnded',window,window.trackEnded); 
```

请注意，您需要使用 trackEnded 函数作为格式的常规函数​​：

```
function trackEnded(){
    //code here
} 
```

# ruby-on-rails - rails未定义的用户模型方法

> ID：10573283
> 
> 赞同：0
> 
> 时间：2012-05-13T16:22:17.480
> 
> 标签：ruby-on-rails, undefined

rspec 测试未通过此项目：

```
Failure/Error: before { visit user_path(user) }
ActionView::Template::Error:
undefined method `picking?' for nil:NilClass 
```

触发此错误的代码是：

```
<% if current_user.picking?(post) %> 
```

在用户模型中，picking方法定义为：defpicking?(post)trips.find_by_pickedpost_id(post.id)end

current_user 定义为：

```
def current_user=(user)
  @current_user = user
end

def current_user
  @current_user ||= user_from_remember_token
end 
```

为什么测试失败？为什么 current_user 是零类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:27:00.020

你确定要`user_from_remember_token`退货吗？我建议使用`debugger`或`pry`调试您的代码。我发现后者更容易使用，但它似乎缺乏第一个的功能。

# entity-framework - 具有附加属性的关系映射表？

> ID：10573284
> 
> 赞同：0
> 
> 时间：2012-05-13T16:22:19.540
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, code-first, entity-relationship

我有三个班级：

```
public partial class Student : Contact
{   
    //Inherited from Contact:
    //public int ContactId { get; set; }
    //public string FirstName { get; set; }
    //public string LastName { get; set; }

    public virtual StudentExam StudentExam { get; set; }
}

public partial class Exam
{
    public int ExamId { get; set; }
    public string Title { get; set; }
    public DateTime Date { get; set; }

    public virtual StudentExam StudentExam { get; set; }
}

public partial class StudentExam
{
    public byte Score { get; set; }
    public int ContactId { get; set; }
    public int ExamId { get; set; }

    public virtual Student Student { get; set; }
    public virtual Exam Exam { get; set; }
} 
```

尝试初始化 DbContext 时，它会抛出`ModelValidationException`：在模型生成期间检测到一个或多个验证错误： *\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'StudentExam' has no key defined。定义此 EntityType 的键。\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'StudentExams' 基于没有定义键的类型'StudentExam'。*

我尝试将`StudentExam`类的属性更改为以下内容：

```
[Key, ForeignKey("Student"), Column(Order = 0)]
public int ContactId { get; set; }
[Key, ForeignKey("Exam"), Column(Order = 1)]
public int ExamId { get; set; } 
```

现在我得到了这个例外：

\tSystem.Data.Entity.Edm.EdmAssociationEnd: : 多重性在关系“StudentExam_Student”中的角色“StudentExam_Student_Source”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是“*”。\tSystem.Data.Entity.Edm.EdmAssociationEnd: : 多重性在关系“StudentExam_Exam”中的角色“StudentExam_Exam_Source”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是“*”。

有没有办法通过数据注释来实现这一点（当我可以使用数据注释时，我不喜欢使用流畅的 API；流畅的 API 会导致代码混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:17:17.013

这与数据注释或流利的 api 无关，而是与错误定义的类有关——在您的类中定义的关系根本无法映射，因为它们在关系级别无效。你必须修改你的类：

```
public partial class Student : Contact
{   
    public virtual ICollection<StudentExam> StudentExams { get; set; }
}

public partial class Exam
{
    ...

    public virtual ICollection<StudentExam> StudentExams { get; set; }
} 
```

一旦你定义了这个关系，你就可以使用你的数据注释来定义`StudentExam`类中的键，它就会起作用。

顺便提一句。流利的 api 不会导致代码混乱。凌乱的代码是由程序员而不是 API 创建的。数据注释反过来又违反了 POCO 原则。

# c++ - 使用线程反转字符串

> ID：10573286
> 
> 赞同：3
> 
> 时间：2012-05-13T16:22:43.800
> 
> 标签：c++, multithreading, algorithm, c++11

最近，我在一次采访中被要求使用线程实现一个字符串反转功能。我想出了下面的大部分解决方案。被选中与否是另一回事:-)。我尝试在运行 Windows 8 消费者预览版的家用 PC 上运行以下解决方案。编译器是VC11 Beta。

问题是，多线程代码总是比顺序代码快或慢 1 毫秒。我给出的输入是一个大小为 32.4 MB 的文本文件。有没有办法让多线程代码更快？还是给出的输入太少而没有任何区别？

**编辑**

我只在采访中写了`void Reverse(char* str, int beg, int end, int rbegin, int rend);`和方法。
`void CustomReverse(char* str);`所有其他代码都是在家编写的。

```
 template<typename Function>
    void TimeIt(Function&& fun, const char* caption)
    {
        clock_t start = clock();     
        fun();     
        clock_t ticks = clock()-start;     
        std::cout << std::setw(30) << caption          << ": "          << (double)ticks/CLOCKS_PER_SEC << "\n"; 
    }

    void Reverse(char* str)
    {

        assert(str != NULL);
        for ( int i = 0, j = strlen(str) - 1; i < j; ++i, --j)
        {
            if ( str[i] != str[j])
            {
                std::swap(str[i], str[j]);
            }
        }

    }

     void Reverse(char* str, int beg, int end, int rbegin, int rend)
        {
            for ( ; beg <= end && rbegin >= rend; ++beg, --rbegin)
            {
                if ( str[beg] != str[rbegin])
                {
                    char temp = str[beg];
                    str[beg] = str[rbegin];
                    str[rbegin] = temp;
                }
            }
        }

        void CustomReverse(char* str)
        {
            int len = strlen(str);
            const int MAX_THREADS = std::thread::hardware_concurrency();
            std::vector<std::thread> threads;

            threads.reserve(MAX_THREADS);

            const int CHUNK = len / MAX_THREADS > (4096) ? (4096) : len / MAX_THREADS;

            /*std::cout << "len:" << len << "\n";
            std::cout << "MAX_THREADS:" << MAX_THREADS << "\n";
            std::cout << "CHUNK:" << CHUNK << "\n";*/

        for ( int i = 0, j = len - 1; i < j; )
                {
                    if (i + CHUNK < j && j - CHUNK > i )
                    {
                        for ( int k = 0; k < MAX_THREADS && (i + CHUNK < j && j - CHUNK > i ); ++k)
                        {                                                
                             threads.push_back( std::thread([=, &str]() { Reverse(str, i,    
                                                    i + CHUNK, j, j - CHUNK); }));
                            i += CHUNK + 1;
                            j -= CHUNK + 1;
                        }

                        for ( auto& th : threads)
                        {
                            th.join();
                        }

                        threads.clear();
                    }
                    else
                    {          
                                        char temp = str[i];
                                        str[i] = str[j];
                                        str[j] = str[i];
                        i++;
                        j--;
                    }
                }
            }

        void Write(std::ostream&& os, const std::string& str)
        {
           os << str << "\n";
        }

        void CustomReverseDemo(int argc, char** argv)
        {
            std::ifstream inpfile;
            for ( int i = 0; i < argc; ++i)
                std::cout << argv[i] << "\n";

            inpfile.open(argv[1], std::ios::in);

            std::ostringstream oss;
            std::string line;

            if (! inpfile.is_open())
            {
                return;
            }
            while (std::getline(inpfile, line))
            {
                oss << line;
            }

            std::string seq(oss.str());
            std::string par(oss.str());

            std::cout << "Reversing now\n";

            TimeIt( [&] { CustomReverse(&par[0]); }, "Using parallel code\n");  
            TimeIt( [&] { Reverse(&seq[0]) ;}, "Using Sequential Code\n");
            TimeIt( [&] { Reverse(&seq[0]) ;}, "Using Sequential Code\n");
            TimeIt( [&] { CustomReverse(&par[0]); }, "Using parallel code\n");      

            Write(std::ofstream("sequential.txt"), seq);
            Write(std::ofstream("Parallel.txt"), par);
        }

        int main(int argc, char* argv[])
        {
            CustomReverseDemo(argc, argv);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T17:30:58.950

我发现代码很难理解，但我发现了以下问题：

*   您的 4096 块大小太小，不值得一个线程。启动一个线程可能与实际操作一样昂贵。
*   你分叉加入了很多（对于每个 CHUNK * MAX_THREADS 字符）。这引入了许多不需要的连接点（顺序部分）和开销。

将字符串静态划分为 MAX_THREADS 个块并启动 MAX_THREADS 个线程。有更有效的方法可以做到这一点，但至少这会给你一些加速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:31:05.017

当你使用所有新的线程特性时，你并没有使用标准库的所有旧的好部分，比如`std::string`和`iterators`

您不应该自己编写线程的东西，而是使用提供类似`parallel_for`构造的并行算法库。

您的任务可以简化为：

```
 std::string str;

  // fill string

  auto worker = [&] (iter begin, iter end) {
      for(auto it = begin; it != end; ++it) {
        std::swap(*it, *(std::end(str) - std::distance(std::begin(str), it) - 1));
      }
  };

  parallel_for(std::begin(str), 
    std::begin(str) + std::distance(std::begin(str), std::end(str)) / 2, worker); 
```

请注意，您需要相当大的文本文件来加快这种并行方法的速度。34 MB 可能还不够。

在小字符串上，[虚假共享](http://en.wikipedia.org/wiki/False_sharing)等效果会对您的性能产​​生负面影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:38:32.233

*   将块大小限制为 4096 没有任何意义。
*   初始化一次，然后在最后同步应该始终是并行操作的模式（想想 map/reduce）

较小的东西：

*   检查字符是否相同对于任何类型的管道优化都是不利的。只需执行交换（）。
*   在并行和顺序版本中，您使用不同的代码进行交换。为什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T13:14:33.717

从 300 MB 字符串大小开始，我看到多线程版本（基于 TBB，见下文）的性能平均比串行版本好 3 倍。不得不承认，对于这 3 倍的加速，它使用了 12 个真实硬件核心 :)。我对粒度进行了一些试验（您可以在 TBB 中为 blocksed_range 类对象指定粒度），但这并没有产生任何重大影响，默认的 auto_partitioner 似乎能够以最佳方式对数据进行分区。我使用的代码：

```
tbb::parallel_for(tbb::blocked_range<size_t>(0, (int)str.length()/2), [&] (const tbb::blocked_range<size_t>& r) {
    const size_t r_end = r.end();
    for(size_t i = r.begin(); i < r_end; ++i) {
        std::swap(*(std::begin(str) + i), *(std::end(str) - 1 - i));
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T13:27:59.150

我尝试编写具有相同功能的程序： [我的“使用线程反转字符串”的努力](http://code.google.com/p/my-cpp11-study/source/browse/trunk/cpp11/main.cpp)

我已经在 Windows 7 上使用 VC11 Beta 和 mingw(gcc 4.8) 的 2 核处理器进行了测试

测试结果：

**VC11 测试版：**

**7 MB**文件：

调试

简单反向：0.468

异步反向：0.275

释放

简单反向：0.006

异步反向：0.014

**98 MB**文件：

调试

简单反向：5.982

异步反向：3.091

释放

简单反向：0.063

异步反向：0.079

**782 MB**文件

释放

简单反向：0.567

异步反向：0.689

**明武：**

**782 MB**文件

释放

简单反向：0.583

异步反向：0.566

如您所见，多线程代码仅在调试构建中获胜。但是在发行版中，即使是单线程代码，编译器也会进行优化并使用所有内核。

所以相信你的编译器=）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-01T10:28:05.173

测试代码

```
#include <iostream>
#include <mutex>
#include <thread>
#include <vector>
#include <string.h>
#include <stdio.h>
#include <memory.h>
#include <stdlib.h>

void strrev(char *p, char *q, int num)
{
    for(int i=0;i < num ; ++i,--q, ++p)
        *q = *p;
}

int main(int argc, char **argv)
{
    char *str;
    if(argc>1)
    {
        str = argv[1];
        printf("String to be reversed %s\n", str);
    }
    else
    {
        return 0;
    }

    int length = strlen(str);
    int N = 5;
    char *rev_str = (char *)malloc(length+1);
    rev_str[length] = '\0';

    if (N>length)
    {
        N = length;
    }

    std::vector<std::thread> threads;

    int begin=0, end=length-1, k = length/N;
    for(int i=1; i <= N; ++i)
    {
        threads.emplace_back(strrev, &str[begin], &rev_str[end], k);
        //strrev(&str[begin], &rev_str[end], k);
        begin += k;
        end -= k;
    }

    while (true)
    {
        if (end < 0 && begin > length-1)
        {
            break;
        }
        rev_str[end] = str[begin];
        --end; ++begin;
    }

    for (auto& i: threads)
    {
        i.join();
    }

    printf("String after reversal %s\n", rev_str);

    return 0;
} 
```

# android - 会有什么行为 安卓市场的原因？

> ID：10573288
> 
> 赞同：0
> 
> 时间：2012-05-13T16:23:38.463
> 
> 标签：android, manifest

如果我在 Manifest.xml 中设置并尝试使用 eclipse 安装 .apk，安装将失败并显示 logcat 的缺少库错误。作为开发人员，这对我来说没问题。

但是 Google Play 中的行为会如何呢？简单地将失败写入 logcat 对普通用户没有用处。如果出现适当的错误对话框，告知用户错误、原因以及如何修复它（在这种情况下，最好是指向 Google Play 中缺少的应用程序的链接，以便用户可以轻松安装缺少的应用程序）

有谁知道，如果用户尝试通过 android 市场（或其他市场）安装 .apk，该错误是如何处理的？有没有办法让这种处理方式变得更加华丽？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:27:21.770

> 但是 Google Play 中的行为会如何呢？

如果设备没有您需要的固件库，该应用程序将不会显示在 Google Play 商店中。因此，用户将没有机会安装它。

这在文档的[Google Play 过滤器](http://developer.android.com/guide/appendix/market-filters.html)部分中有介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:39:21.323

根据[uses-library 文档](http://developer.android.com/guide/topics/manifest/uses-library-element.html)，您可以使用反射来确定特定类是否可用。我自己没有这样做，但这里有一个博客点，其中使用反射来确定设备是否支持动态壁纸[使用反射来测试 Android 设备是否正在使用“动态壁纸”](http://geekyouup.blogspot.com/2010/01/android-app-optimization-using.html)。

将它改编为其他库一定不会很困难。

此外，从 API 7 开始，标签的 android:required 值允许从 Google Play 安装应用程序，即使该库不存在于用户设备中。

希望这可以帮助...

# python - 如何让多个子类在父类的约束中运行

> ID：10573290
> 
> 赞同：0
> 
> 时间：2012-05-13T16:23:41.727
> 
> 标签：python

我是编程新手，我只是在看一本 python 书。我想让多个机器人在地图内运行。地图中将有多个机器人。我需要对地图类做些什么才能让它以这种方式工作？我知道这很含糊，但我 14 岁，正在努力解释这一点。

```
class Map:

    def __init__(self):
        self.robot = []

    def add_robot(self, robot):
        self.robot.add(Robot)

    def is_occupied(self, x, y):
        for r in self.robot:
            if r.xpos == x and r.ypos == y:
                return True
        return False

class Robot(Map):

    def __init__(self):
        self.xpos = 0
        self.ypos = 0

    def step(self, axis):
        if axis in "xX":
            if self.is_occupied(self.xpos+1, self.ypos):
                self.xpos += 1 
                print "step X axis"
        elif axis in "yY":
            self.ypos += 1

    def walk(self, axis, steps=2):
        for i in range(steps):
            self.step(axis)

    def get_pos(self):
        print "X:%i  Y:%i" % (self.xpos, self.ypos)

robot1 = Robot()
robot1.walk("x", 5)
robot1.get_pos() 
```

如果我没有“地图”类，这工作得很好，但我不能让地图类工作。我得到了制作地图类的帮助，但我无法让它与我的机器人类一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:53:06.327

你有`Robot`一个子类`Map`; 这不是应该使用继承的方式。考虑“子类”而不是“子类”。

考虑一下：

```
class Animal:

    def eat(self, food):
        print "mmm"

class Human(Animal):

    def speak(self, words):
        print words 
```

人就是动物；它会说话，但它会吃东西。

机器人显然不是地图。我相信你正在考虑一个有机器人的地图，如果你`Robot`不做一个子类，它应该可以工作。哦，更改`self.robot`为`self.robots`.

# c++ - 如何使 C++ 程序读取使用 Python subprocess.call() 传递给它的参数？

> ID：10573291
> 
> 赞同：1
> 
> 时间：2012-05-13T16:23:42.830
> 
> 标签：c++, python, stdin, piping

基本上我正在制作一个 Python 程序，其中一部分需要运行 C++ 可执行文件，我正在调用 exe：

```
subprocess.call(["C:\\Users\\User\\Documents\\Programming\\Python\\Utilities\\XMLremapper\\TranslatorSource\\FileFixer.exe", "hi"]) 
```

但是如何让 C++ 程序读取输入呢？我试过了：

```
FILE * input = popen("pythonw.exe", "r");
cout<< input.getline() << endl << endl; 
```

但这只是输出`0x22ff1c`，绝对不是“嗨”。需要什么代码将输入通过管道传输到 C++ 程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:30:33.377

它们作为参数传递给`main`函数。

```
main(int argc, char *argv[]) 
```

`argc`是 的长度`argv`。所以它会是

```
main(int argc, char *argv[])
{
 cout<<argv[1];
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:11:54.553

如果您只想传入一些参数，一个简单的选择是在命令行上读取参数，如另一个答案中所建议的那样。

对于更大量的输入/输出，您自然希望使用 cout 或 cin，更好的选择是使用 subprocess.Popen。然后，您可以像在 python 中的文件句柄一样写入和读取其他进程。例如：

```
proc = subprocess.Popen(["FileFixer.exe"], 
            stdin=subprocess.PIPE, 
            stdout=subprocess.PIPE, 
            stderr=subprocess.PIPE)
stdout, stderr = proc.communicate("hi\n") 
```

这告诉 python 运行该进程，传入 'hi' 后跟回车作为标准输入，然后可以由 C++ 程序中的 cin 读取。然后将标准输出（C++ 中 cout 的结果）传递到 stdout 列表，并将标准错误传递到 stderr。

如果您需要更多的交互式通信，您还可以访问 proc.stdout 和 proc.stdin，就好像它们是 python 中的文件句柄一样（例如 proc.stdin.write("hi\n")

# java - 在主类或主方法中声明数组有什么区别？

> ID：10573292
> 
> 赞同：0
> 
> 时间：2012-05-13T16:24:07.827
> 
> 标签：java, arrays

我一直在尝试像教程所说的那样在 Java 中声明一个数组，但收到了一个错误。这是我的代码：

```
public class ArrayExample {

   private static final int SIZE = 15;

   /*   this works   */
   int[] arrayOfInt = new int[SIZE];

   /*  but this doesn't work, says "cannot find symbol"  */
   int[] arrOfInt;
   arrOfInt = new int[SIZE];

   public static void main(String[] args) {

      /*  but here it works; why? what's the difference? */
      int[] arrOfInt;
      arrOfInt = new int[SIZE];
   }
} 
```

我在教程中找不到这种差异的解释。为什么第二个声明不起作用，但`main`方法中的第三个声明起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:26:15.513

您不能将赋值语句编写为类定义的一部分。

使用第一种方法（首选）或将赋值移动到构造函数中（在这种情况下不是必需的，但如果在构造对象之前不知道大小，则可能很有用 - 然后您可以将其作为参数传递给构造函数）。

```
int[] arrOfInt;

public ArrayExample()
{
    arrOfInt = new int[SIZE];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:41:22.470

当你这样做时

```
int[] arrayOfInt = new int[SIZE]; 
```

编译器将读取`arrayOfInt`并记住用`new int[SIZE]`.

`arrayOfInt`在那一刻不会发生初始化。

当你这样做时：

```
int[] arrOfInt;
arrOfInt = new int[SIZE]; 
```

编译器读取`arrOfInt`但是当它到达第二行时它没有找到 arrOfInt 的类型，记住此时编译器可能没有读取所有变量因此它说它找不到`arrOfInt`，简而言之它不会检查它是否已经读取了一个变量与 not 同名，因为它尚未完成其完整的处理并且它不在初始化块中。您仍然在代码的声明块中。

方法是声明+初始化块，因此编译器允许您在两个不同的点声明和初始化变量。

对于初始化，您可以使用构造函数或实例初始化块或静态初始化块。

*   静态初始化块在加载类时执行一次。
*   实例初始化块每次创建类的实例时都会执行，并且在类的构造函数中完成对 super 的调用后，它们将按照类中定义的方式执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:28:29.293

如果愿意，您甚至可以将变量的初始化插入到类匿名代码块中，而无需使用构造函数，方式如下：

```
int[] arrOfInt;

 {
arrOfInt = new int[SIZE];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T16:41:14.867

你不能在静态方法中声明非静态值所以这是错误的

```
int []arrOfInt;
public static void main(String[] args) {
      arrOfInt = new int[SIZE];
} 
```

你可以这样解决

```
int []arrOfInt=new int[SIZE];
    public static void main(String[] args) {
    }
} 
```

或者像这样

```
class ArrayExample{
   int []arrOfInt;
   public static void main(String args[]){
        ArrayExample a = new ArrayExample();
        a.arrOfInt=new int[a.SIZE];
   }
} 
```

# eclipse-plugin - org.eclipse.xtext.linking.impl.IllegalNodeException 弹出错误而不是仅仅写入日志

> ID：10573295
> 
> 赞同：0
> 
> 时间：2012-05-13T16:24:57.727
> 
> 标签：eclipse-plugin, xtext

我正在编写一个基于 xtext 的编辑器。(v 2.2.1)(Eclipse Indigo) 我有一个扩展 DefaultLinkingServic 并覆盖该方法的类：public List getLinkedObjects(EObject context, EReference ref, INode node) throws IllegalNodeException。当无法解析对象时，该方法会抛出 IllegalNodeException。当抛出异常（并且应该抛出）时，错误不仅会写入错误日志，还会导致弹出窗口出现错误：

在“Xtext 验证”期间发生内部错误。org.eclipse.xtext.linking.impl.IllegalNodeException：Action App.f 不适用于指定的参数。

这是非常有问题的，特别是如果文件有多个错误，这使得无法在编辑器中编辑任何内容，因为弹出窗口反复出现在屏幕上。

这个问题在几个 IDE 中是一致的，但在其他 IDE 中是不可重现的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:22:08.080

你偶然发现了这个已经在 2.3（六月到期）修复的[错误。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362902)作为一种解决方法，您可能希望绑定 LazyLinkingResource 的自定义实现并在 #getEObject 中捕获 IllegalNodeException。或者，您可以从自定义 LinkingService 返回一个空列表，而不是引发 IllegalNodeException。

# javascript - 我的 Firefox 插件代码正在破坏导航栏

> ID：10573298
> 
> 赞同：1
> 
> 时间：2012-05-13T16:25:24.733
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我想在我的插件中的 Firefox 搜索容器之前添加一个工具栏按钮。但它完全清除了我的导航栏。 ![在此处输入图像描述](../Images/59b4e55aca68c389b34b77f01f94cd24.png) 我怀疑有问题的代码是由于空数组或其他原因造成的，但我不能确定。

```
//insert before search container
if(navBar && navBar.currentSet.indexOf("mybutton-id")== -1 )//navBar exist and our button doesnt
{
    var arrayCurrentSet= navBar.currentSet.split(',');
    var arrayFinalSet= [];//empty at first
    if(arrayCurrentSet.indexOf("search-container") != -1)//if search-container exists in current set
    {
        // check item by item in current set
        var i= null;
        while(i=arrayCurrentSet.shift() != undefined)
        {
            if(i == "search-container")//"search-container" found !!
            {
                /*insert our button after it but only if our button does not already exist*/
                if(arrayFinalSet.indexOf("mybutton-id") == -1) arrayFinalSet.push("mybutton-id");
            }
            arrayFinalSet.push(i); 
            dump("arrayFinalSet "+ i);
        }
    }
    else //damn search-container doesnt exist
    {
        arrayFinalSet= arrayCurrentSet;
        arrayFinalSet.push("mybutton-id");//add our button to the end of whatever is available in nav bar
    }
    //set new navBar
    navBar.currentSet= arrayFinalSet.join(',');  
} 
```

完整代码可用

[https://builder.addons.mozilla.org/addon/1052494/latest/](https://builder.addons.mozilla.org/addon/1052494/latest/)

[http://jsfiddle.net/CQ4wA/](http://jsfiddle.net/CQ4wA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:10:20.907

我不太清楚为什么导航栏被移除了，但我认为从不同的角度来处理这个会更好。与其乱用字符串数组，不如尝试使用 DOM 方法。

例如

```
var sC=navBar.querySelector("#search-container");
navBar.insertBefore(btn, sC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:58:30.823

您在这里的代码似乎可以工作 - 但工具栏需要以某种方式找到您的按钮。您当前的代码甚至没有将按钮插入到文档中，这意味着工具栏没有机会通过其 ID 找到它。它应该在工具栏调色板调色板中，但是，调色板还确定用户在自定义工具栏时可以选择哪些按钮。所以你可能想先做这样的事情：

```
var toolbox = navBar.toolbox;
toolbox.palette.appendChild(btn); 
```

您可能还想简化代码：

```
var arrayCurrentSet = navBar.currentSet.split(',');
var insertionPoint = arrayCurrentSet.indexOf("search-container");
if (insertionPoint >= 0)
  arrayCurrentSet.splice(insertionPoint, 0, "mybutton-id");
else
  arrayCurrentSet.push("mybutton-id");
navBar.currentSet = arrayCurrentSet.join(','); 
```

最后，您可能想让浏览器记住当前的按钮集，它不会自动发生：

```
document.persist(navBar.id, "currentset"); 
```

请注意，将插入工具栏中的按钮与您添加到调色板的按钮不同 - 工具栏代码克隆按钮，在调色板中留下一个副本。因此，通过添加的事件侦听器`addEventListener`将很遗憾地丢失。最好使用[`command`属性](https://developer.mozilla.org/en/XUL/Attribute/command)并将[`<command>`元素](https://developer.mozilla.org/en/XUL/command)插入到您将附加侦听器的文档中。

*注意*：在 XUL 中，您通常需要`command`而不是`click`事件 - 除非您真的只对鼠标点击感兴趣并且想要忽略由键盘或其他方式触发的按钮。

# php - 使用 Image/Barcode 在 DOMPdf 中生成条形码时图像损坏

> ID：10573299
> 
> 赞同：0
> 
> 时间：2012-05-13T16:25:31.477
> 
> 标签：php, pdf, pear, barcode, dompdf

我正在尝试调试 DOMPdf 生成的 pdf 中的条形码问题。该图像大部分时间都有效，但每 10 次尝试中有 1 次会导致图像质量较差

![损坏的条形码图像](../Images/8e3c8d9501f1c160b292ba2451155db1.png)

我试过改变我能想到的一切，但没有结果。有没有人遇到过这个问题并修复它？我无法在我的本地机器上重现损坏的图像，它只发生在我们的实时服务器中。

我们在带有所有更新的 Ubuntu 10.04 LTS 上运行最新的 DOMPdf。我使用 DOMPdf 中的 ->stream() 函数将 pdf 流式传输给用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:25:26.470

要对此进行调试，我建议存储单独生成的原始条形码图像。检查它们中的任何一个是否包含损坏，或者它是否只是包含损坏的条形码图像的 PDF。

还可以使用包中的工具`pdfimages`从`poppler-utils`pdf 中提取条形码图像。检查它们是否包含损坏，或者 PDF 呈现是否损坏。

# objective-c - 将保管箱文件保存在路径中

> ID：10573309
> 
> 赞同：0
> 
> 时间：2012-05-13T16:26:31.547
> 
> 标签：objective-c, xcode

这给了我...

```
NSString *filename2 = [NSString stringWithFormat:@"/newFile.json"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename2]];

[self.restClient loadFile:filename2 intoPath:getImagePath];

NSString *fileContent = [[NSString alloc] initWithContentsOfFile:getImagePath];  

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil]; 
```

...这个错误：

文件加载到路径：（空）

...但为什么？？这段代码正在查看确实加载。该文件在保管箱中，所以有什么问题

# facebook - 像 Facebook 一样的按钮作为覆盖层以获得跨网络的点赞？

> ID：10573313
> 
> 赞同：0
> 
> 时间：2012-05-13T16:27:10.567
> 
> 标签：facebook, facebook-like, google-plus, google-plus-one, facebook-likebox

我有一个页面，允许用户“喜欢”某些元素。点赞类似于 facebook-like，但出于各种原因（例如能够轻松操纵数据），点赞是针对我网站的用户，不一定针对 facebook 用户，并且数据保留在我的网站上。所以有一个“mysite-like”按钮。但是，我希望这个类似 mysite 的按钮也可以用作类似 facebook 的按钮，并且如果一个人登录到 facebook，它会将其发布在他们的墙上。

有没有办法制作一个同时执行这两种功能的按钮？例如，也许通过有一个不可见的类似 facebook 的按钮，覆盖在类似 mysite 的按钮之上？也许通过一些 opacity=0 iframe？在理想的世界中，单击一个按钮将起到类似 mysite、类似 facebook 和 google+1 的作用。一键统治所有...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:12:57.060

执行这种实现的简洁方法是使用回调方法，其中社交按钮上的用户交互会触发您网站上的更改。

**局限性**

这些回调在一个方向上起作用。例如：

Facebook Like 按钮 -> 您的自定义“喜欢”按钮

或者

Google +1 按钮 -> 您的自定义“喜欢”按钮

因此，您将无法

*   从您的自定义“喜欢”按钮触发它们中的任何一个
*   从另一个触发一个第三方按钮

现在你知道你可以用它们做什么，这里是如何做到的。

**Facebook Like 按钮回调（[来自另一个 StackOverflow 帖子](https://stackoverflow.com/questions/2798622/facebook-like-button-callback)）**

```
<script>
  FB.Event.subscribe('edge.create', function(href, widget) {
    alert('You just liked the page!');
    // this is where you would trigger your site specific logic
  });
</script> 
```

**Google +1 按钮回调（来自[官方文档](https://developers.google.com/+/plugins/+1button/#plusonetag-parameters)）**

```
<g:plusone callback="myCallback"></g:plusone>
<script>
function myCallback(result) {
  alert('button was just changed to state ' + result['state']);
  // this is where you would trigger your site specific logic
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:47:24.703

一种方法是让类似 facebook 的按钮也触发“类似 mysite”的操作，例如通过[http://www.saschakimmel.com/2010/05/how-to-capture-clicks-on-the-facebook-like -按钮/](http://www.saschakimmel.com/2010/05/how-to-capture-clicks-on-the-facebook-like-button/)

有没有办法用 google+ 来做到这一点？您可以使用回调选项[https://developers.google.com/+/plugins/+1button/#plusonetag-parameters](https://developers.google.com/+/plugins/+1button/#plusonetag-parameters)但不确定如何获取用户的用户 ID。

# java - 无法连接到 windows server 2008 上的 glassfish ip 地址

> ID：10573315
> 
> 赞同：0
> 
> 时间：2012-05-13T16:27:29.380
> 
> 标签：java, glassfish, glassfish-3, glassfish-embedded

我开发了一个servlet并将其部署在我的服务器-windows server 2008-服务器有一个ip，glassfish 3.1.2服务器的端口是11188，当我从本地主机调用servlet时它工作正常，但是当我通过 IP 地址调用服务器此错误显示无法连接到 NN.NN.NNN.NNN:11188 ;N: 是一个数字。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:31:16.917

在防火墙中打开端口 11188。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:26:04.340

我忘记在主机控制面板上批准的端口上定义端口 11188

# unity3d - Unity3D：具有相同脚本的两个对象

> ID：10573317
> 
> 赞同：1
> 
> 时间：2012-05-13T16:27:35.920
> 
> 标签：unity3d

我想将相同的脚本与我在游戏中用作占位符的不同空对象相关联。其目的是利用它们的位置，以便当用户触摸屏幕中靠近这些对象之一的点时，会出现一个专用的 GUI。问题是虽然这两个对象不同，但它们的脚本似乎相互影响，因此当游戏运行时，我触摸这两个对象之一时，gui 都会出现。我究竟做错了什么？

```
....
private var check: boolean;
var topCamera : Camera;
var customSkin : GUISkin;

function Update () {
   if (Input.GetMouseButtonDown(0)){
      if(Input.mousePosition.x > this.transform.position.x - Screen.width*0.20 && Input.mousePosition.x < this.transform.position.x + Screen.width*20){
        if(Input.mousePosition.y > this.transform.position.y - Screen.height*0.2 && Input.mousePosition.y < this.transform.position.y + Screen.height*0.2){
                check = true;
        }
    }
}

if(check){
   //the camera zooms forward   
}else{
   //the camera zooms backward  
}
}

function OnGUI () {
if (this.check){
var w = Screen.width;
var h = Screen.height;
var bw = 0.083;
var bws = 0.001 *w;
GUI.skin = customSkin;
GUI.Box(new Rect(w*0.6,h*0.3,w*0.38,h*0.45), "Stuff");
customSkin.box.fontSize = 0.04*h;
customSkin.textField.fontSize = 0.08*h;
customSkin.button.fontSize = 0.04*h;
textFieldString = GUI.TextField (Rect (w*0.62, h*0.39, w*0.34, h*0.1), textFieldString);    
if (GUI.Button (Rect (w*0.62,h*0.50, w*bw, h*0.1), "+")) {
    if (this.check){
        this.check=false;

    }else{
        this.check = true;
    }
//...   
}
 //...
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:36:35.063

这可能不起作用，因为您在`Update()`函数中比较苹果和橙子。`Input.mousePosition`返回 2D*像素*坐标`transform.position`中的位置，并返回 GameObject 在 3D*世界*坐标中的位置。

要检查您是否单击了某个对象，您需要将一个 Collider 附加到相关游戏对象，并在脚本中使用[Raycast测试碰撞。](http://unity3d.com/support/documentation/ScriptReference/Physics.Raycast.html)这是 JavaScript 文档中的相关示例：

```
var ray = Camera.main.ScreenPointToRay (Input.mousePosition);
if (Physics.Raycast (ray, 100)) {
    print ("Hit something");
} 
```

这种方法很酷的一点是，我们正在检查 Collider 和射线之间的碰撞。如果您只想查看是否在 GameObject 附近单击，只需将 Collider 设置为大于 GameObject。没有必要摆弄不平等！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:27:57.473

如果您的目标是单击对象*附近**的*某处而不仅仅是对象，那么您有一些配置（这些对象在空间中的位置），其中有足够接近两个对象以使其 GUI 出现的空间，因此您需要一些脚本来决定哪个更接近。

我建议你实现一个[单一行为，它是一个单例](http://answers.unity3d.com/questions/17916/singletons-with-coroutines.html)，可以跟踪这些点击并测量所有对象的距离，以获得最近的。

再次阅读您的帖子，我认为您只想在单击*对象*时获得 GUI，而当您这样做时，您会获得两个 GUI。我认为发生这种情况是因为错误的计算面积导致`check`go `true`。

你能提供更多细节吗？是否有一些空间在单击时不应该有 GUI 消息，或者是否所有内容都被这些对象填充？

# php - register_shutdown_function 还是 ignore_user_abort？

> ID：10573318
> 
> 赞同：1
> 
> 时间：2012-05-13T16:27:43.777
> 
> 标签：php, performance, background-process

嘿，我见过人们推荐他们每个人，一个校准的 register_shutdown_function 更好但没有解释。

我说的是哪个更好地发回响应并仍然执行其他任务。我想知道什么是更好的方法以及为什么。

**编辑：** 在[register_shutdown_function](http://php.net/manual/en/function.register-shutdown-function.php)文档中，有人发布了以下方法：

```
<?php 
function endOutput($endMessage){ 
    ignore_user_abort(true); 
    set_time_limit(0); 
    header("Connection: close"); 
    header("Content-Length: ".strlen($endMessage)); 
    echo $endMessage; 
    echo str_repeat("\r\n", 10); // just to be sure 
    flush(); 
} 

// Must be called before any output 
endOutput("thank you for visiting, have a nice day'); 

sleep(100); 
mail("you@yourmail.com", "ping", "im here"); 
?> 
```

它会比我所说的任何功能更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:32:24.303

ignore_user_abort() 告诉 PHP/Apache 在用户断开连接时不要终止执行。register_shutdown_function 只允许您在 PHP 处于关闭过程中时进行一些清理。

register_shut_down 仅在您需要进行一些 PHP 的正常关闭例程无法处理的清理操作时才有用，例如删除手动创建的锁定文件、在某处的数据库记录中翻转位等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:39:40.180

在旧版本的 PHP 中（在 Apache 下 <4.1.0）， register_shutdown_function() 将确保在您的关闭函数运行之前关闭连接。这已不再是这种情况。如果您没有打开任何输出缓冲区，您编辑中的 endOutput() 函数确实应该执行您想要的操作。但是，它确实将脚本设置为能够在必要时永久运行，如果它进入无限循环（尤其是在调试期间），这可能会很烦人。您可能希望更改 set_time_limit() 以使用实际反映脚本应该花费多少秒的值。

如果您不需要它，最好避免使用 register_shutdown_function()，因为它还有一些其他奇怪的行为（例如，如果第一个关闭函数调用 exit()，则无法添加第二层关闭函数来运行）。

# c++ - StereoMatch 代码中对 MinFilter 和 MaxFilter 的未定义引用

> ID：10573320
> 
> 赞同：0
> 
> 时间：2012-05-13T16:28:10.663
> 
> 标签：c++

每个人

最近，我正在研究立体视觉。我从 Middlebury 网站下载 StereoMatch 代码：http: [//vision.middlebury.edu/stereo/code/](http://vision.middlebury.edu/stereo/code/)

我使用 Ubuntu 11.10 运行此代码。运行此代码后，出现以下错误。有 3 个 'undefined reference to ' 错误。但是代码已经包含了头文件'MinFilter.h'。我很困惑。有人可以帮助我吗？我会很感激。

错误：

StcAggregate.o: In function `CStereoMatcher::AggrMin()': StcAggregate.cpp:(.text+0x20f): undefined reference to`void MinFilter(CImageOf&, CImageOf&, int, int)' StcEvaluate.o: In function `_ZL14PartialShuffle8CImageOfIhERS0_S1_f.constprop.2': StcEvaluate.cpp:(.text+0x37): undefined reference to`void MinFilter(CImageOf&, CImageOf&, int, int)' StcEvaluate.cpp:(.text+0x5b): undefined reference to `void MaxFilter(CImageOf&, CImageOf&, int, int)' collect2: ld 返回 1 退出状态 make: *** [StereoMatch] 错误 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T09:16:17.593

我遇到了完全相同的问题并像这样解决了它：打开 Makefile 并将第一行从

CPPFLAGS = -O2 -Wall

至

CPPFLAGS = -O -Wall

然后“make clean”和“make”，它对我有用。所以我猜这是因为参数“-O2”做了比预期更多的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:42:59.210

这是来自链接器（和/或运行时环境）的错误，它找不到您包含的头文件承诺存在的某些符号（即代码）。为了找到这些符号，您必须告诉链接器链接到包含它们的库（或目标文件）。这个库可能带有预编译的代码，或者可能是在安装过程中制作的。您是否没有一个 README 文件，其中解释了如何使用（即链接和运行）代码？

# android - 如何在android应用程序中解析这个Json？

> ID：10573329
> 
> 赞同：0
> 
> 时间：2012-05-13T16:29:14.680
> 
> 标签：android, json, parsing

我想构建一个简单的应用程序，它将从远程数据库中获取记录并存储一些记录，我使用 php-mysql-apache(wamp)，我的 php 文件是

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="application/json; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

    <body>

    <?php
    $link = mysql_connect('localhost', 'root', ''); 
       if (!$link) {
       die('Not connected : ' . mysql_error()); 
    }

    mysql_query("SET NAMES 'greek'", $link); 

    $db_selected = mysql_select_db('products', $link); 
    if (!$db_selected) {
      die ('Can\'t use roflcopter: ' . mysql_error());
    }

    $id = $_GET['id']; 

    $sql = "SELECT * FROM `items` WHERE `id` = ".$id. " ORDER BY  `id` ASC";           
    $result = mysql_query($sql); 

    if (!$result) {                 
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        // $message .= 'Whole query: ' . $query;
        die($message);
    }

     $json = NULL;

      while ($data_array[] = mysql_fetch_assoc($result)){ 

     $json = json_encode($data_array); 
     }

     echo $json; 

     ?>
     </body> 
     </html> 
```

当我从浏览器运行它时我得到的响应是

```
 [{"id":"1590774","name":"Nokia C7","descr":"????. ??????? Symbian 3, ????? 3,5\", 360 ? 640 pixels, Amoled, Capacitive ?????\/???????? 8GB","price":"339","stock":"3"}] 
```

（它不识别希腊字符 - 我该怎么办？）

我应该在 Eclipse 上编写什么代码以获取并显示该行？

实际上，我正在尝试使用在 Internet 上找到的一个项目作为获取此 json 数组的示例

```
 http://api.androidhive.info/contacts/ 
```

android 项目由 3 个 java 活动组成：

```
 public class AndroidJSONParsingActivity extends ListActivity {

        // url to make request
        private static String url = "http://api.androidhive.info/contacts/";

        // JSON Node names
        private static final String TAG_CONTACTS = "contacts";
        private static final String TAG_ID = "id";
        private static final String TAG_NAME = "name";
        private static final String TAG_EMAIL = "email";
        private static final String TAG_ADDRESS = "address";
        private static final String TAG_GENDER = "gender";
        private static final String TAG_PHONE = "phone";
        private static final String TAG_PHONE_MOBILE = "mobile";
        private static final String TAG_PHONE_HOME = "home";
        private static final String TAG_PHONE_OFFICE = "office";

        // contacts JSONArray
        JSONArray contacts = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new       ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        contacts = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String email = c.getString(TAG_EMAIL);
            String address = c.getString(TAG_ADDRESS);
            String gender = c.getString(TAG_GENDER);

            // Phone number is agin JSON Object
            JSONObject phone = c.getJSONObject(TAG_PHONE);
            String mobile = phone.getString(TAG_PHONE_MOBILE);
            String home = phone.getString(TAG_PHONE_HOME);
            String office = phone.getString(TAG_PHONE_OFFICE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String,String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
            map.put(TAG_PHONE_MOBILE, mobile);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_EMAIL, cost);
            in.putExtra(TAG_PHONE_MOBILE, description);
            startActivity(in);

        }
    });

} 
```

}

第二个活动是 Json Parser：

```
 public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

第三个用于将结果显示到列表视图

```
 public class SingleMenuItemActivity  extends Activity {

// JSON node keys
private static final String TAG_NAME = "name";
private static final String TAG_EMAIL = "email";
private static final String TAG_PHONE_MOBILE = "mobile";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String name = in.getStringExtra(TAG_NAME);
    String cost = in.getStringExtra(TAG_EMAIL);
    String description = in.getStringExtra(TAG_PHONE_MOBILE);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

    lblName.setText(name);
    lblCost.setText(cost);
    lblDesc.setText(description);
} 
```

}

我试图更改此示例以将其调整为我的 json 响应，我意识到的第一件事是我的 json 数组没有像示例的“联系人”标签那样的任何标签，以便像在示例联系人 = json 中一样使用它。 getJSONArray(TAG_CONTACTS);

另一件事是，对于我的应用程序，我需要发送一个参数来获取特定 id 的数据我有一个包含字段的表：id、名称、描述、价格、股票我尝试将我的 url 作为“http://localhost/items. php?id=1590774" 或 "http://localhost/items.php"

以这种方式传递参数

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("id","1590774")); 
```

我是一个初学者，所以我很感激你的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:17:13.647

您应该尝试向您的`DefaultHttpClient`实例添加一个参数以供字符集使用：

```
...
HttpParams params = new BasicHttpParams();
params.setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET, HTTP.UTF_8);
// defaultHttpClient
DefaultHttpClient httpClient = new DefaultHttpClient(params);
... 
```

如果`HTTP.UTF_8`不适合您，`HTTP`您可以从类中选择适当的值。如果这不能解决问题，请附加更多 logcat 输出。

# android - 需要减少正在加载的位图数量（静态位图引用？）

> ID：10573334
> 
> 赞同：0
> 
> 时间：2012-05-13T16:30:35.527
> 
> 标签：android, out-of-memory, stack-overflow, terrain

我一直在为我正在尝试构建的游戏开发一个简单的基于图块的地形生成系统，但遇到了一些障碍。我正在尝试开发一种新方法来选择和存储单个图块所需的位图。我有一个非常简单的方法，在我运行世界绘图之前，所有位图都已加载，并且位图是根据它是哪种类型的图块来选择的。

不幸的是，当我在瓷砖和世界类型上添加变化时，选择过程可能会变得相当复杂。因此，将数据存储在 tile 对象中似乎是一个好主意，以及确定它将是哪个 tile 所需的所有规则。

我遇到的问题是这种方法导致我为每个图块加载位图的副本，而不仅仅是加载指向位图的指针。反过来，这会占用我的内存并导致我的 GC 有点混乱。

我正在寻找的是一种简单的方法来创建指向将要使用的不同位图的静态指针，然后在平铺对象中引用这些指针，而不是加载位图的新副本。我遇到的问题是我无法在没有上下文引用的情况下加载位图，而且我不知道如何在静态方法中引用上下文。

有没有人对如何解决这个问题有任何想法？

这是我的 tile 类，以及 tile 类型类的示例（它们几乎都相同）

瓦片：包com.psstudio.hub.gen；

```
import java.io.Serializable;

import android.graphics.Bitmap;

public class Tile implements Serializable
{
/****
 * Create a BitmaHolder class that uses a case for which field type it isn, and then 
 * loads all applicable bitmaps into objects.  The individuak tile types then reference
 * those objects and return bitmaps, which are ultimately stored in this super class.
 */
double elevation = 0.0;     //tile's elevation

int type = 0;       //tile's type
int health = 0;     //tile's health - used for harvestable tiles (trees, stone, mountain, etc.)
Bitmap bitmap;          //pointer to the bitmap

public void setTile(Bitmap _bitmap, double _elev, int _type){
    bitmap = _bitmap;
    elevation = _elev;
    type = _type;
}
public void setBreakableTile(Bitmap _bitmap, double _elev, int _type, int _health){
    bitmap = _bitmap;
    elevation = _elev;
    type = _type;
    health = _health;
}

} 
```

瓷砖类型（草）：

```
package com.psstudio.hub.gen.tiles;

import java.util.Random;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import com.psstudio.hub.R;
import com.psstudio.hub.gen.Tile;

public class Grass extends Tile {
Bitmap holder;
BitmapFactory.Options bFOptions = new BitmapFactory.Options();  //used to prevent bitmap scaling

Random r = new Random();

public Grass(Context context, int mapType, Double elevation){
    super.setTile(pickBitmap(context, mapType), elevation, 4);
    pickBitmap(context, mapType);

}

public Bitmap pickBitmap(Context context, int mapType){
    bFOptions.inScaled = false;

    switch(mapType){        
    case 1:                 //Forest Type 1
        holder = BitmapFactory.decodeResource(context.getResources(), R.drawable.grass, bFOptions);
        break;
    }

    return holder;
}
} 
```

“holder = BitmapFactory”是我认为导致我的问题的原因，因为它为每个草瓦加载一个新的位图，而不仅仅是指向一个预加载的位图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:45:14.507

好吧，我设法找到了一种方法来做我需要的事情。我不知道这是否是最合适的方法，但它可以满足我的需要。

我创建了一个 BitmapLoader 类，它根据世界类型加载图像，然后将它们存储到静态位图中，然后由图块引用。

不是最优雅的解决方案，但它可以完成工作。^^

# php - 使用 mysql/php 从数据库中选择行

> ID：10573339
> 
> 赞同：0
> 
> 时间：2012-05-13T16:30:55.030
> 
> 标签：php, mysql

我正在尝试使用 php 从数据库中获取一行，我制作了一个 html 表单，该表单应该从用户那里获取书名并从数据库中获取关于这本书的评论，然后将其发布在输入文本中，表单的操作导致以下功能：

```
function GetReview($BookTitle)
{
require'DB.php';
if(empty($_POST['BookTitle']))
    {
        echo " You must enter a book name!";
        return false;
    }

$BookTitle = mysql_real_escape_string($BookTitle);

$q="Select Reviews from Users_Booklist where (Book_Title like '%" .$BookTitle."%');";
if(!mysql_query($q,$con))
{
die("Error".mysql_error());
}
else
{
$row = mysql_fetch_row($q);
?>
<html>
<head><title>Delete Review </title>
</head>
<body> 
<br>
<form name="DeleteReview " action="DeleteReviewsFunction.php" method="post">
Review: <input type="text" name="Review" size="200" value="<?php echo $row[0]; ?>"/>            
<input type="submit" value="Delete Review" />
</form>
</body>
</html>
<?php
}
}
GetReview($_POST['BookTitle']) 
```

但是，它引导我进入下一个表单，输入文本中没有任何内容，并且出现以下警告：

```
Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource in     C:\AppServ\www\GetReview.php on line 20 
```

我已经搜索并尝试了不同的代码，但结果仍然相同。谁能告诉我错误在哪里？？？...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:33:37.383

```
$qq = mysql_query($q,$con);
if(!$qq) {
// (...)

$row = mysql_fetch_row($qq); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:35:18.210

我不会提供很多帮助，但是您的问题似乎是错误发生的位置，我可以告诉您。

它在`$row = mysql_fetch_row($q);`队列中。

你可以这样说，因为错误记录以 开头`mysql_fetch_row()`，而上面的行是`mysql_fetch_row()`代码中唯一提到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:16:01.997

通过打印 $q 变量的输出来检查 SQL 查询：

> 回声 $q;

现在，尝试从您的 MySQL 客户端执行它。收集结果（如果有）并检查错误。

一个建议：如果你愿意，你可以使用像[ezSQL](http://justinvincent.com/ezsql)这样非常有用的工具（特别是对于代码组织）

# c++ - 访问冲突写入位置 0x00000000。memset 函数问题

> ID：10573340
> 
> 赞同：1
> 
> 时间：2012-05-13T16:31:07.543
> 
> 标签：c++, string

```
#include <iostream>
#include <string.h>
using namespace std;

void newBuffer(char* outBuffer, size_t sz) {
    outBuffer = new char[sz];
}

int main(void) {

    const char* abcd = "ABCD";
    char* foo;
    foo = NULL;
    size_t len = strlen(abcd);
    cout<<"Checkpoint 1"<<endl;
    newBuffer(foo, len);
    cout<<"Checkpoint 2"<<endl;

    cout<<"Checkpoint 2-A"<<endl;
    memset(foo, '-', len);
    cout<<"Checkpoint 3"<<endl;
    strncpy(foo, abcd, len);
    cout<<"Checkpoint 4"<<endl;
    cout << foo << endl;

    int hold;
    cin>>hold;
    return 0; 
```

}

该程序在检查点 2-1 和 3 之间崩溃。它试图将 char 数组 foo 设置为 char '-'，但由于某些访问问题而失败。我不明白为什么会这样。非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T16:32:57.683

您的`newBuffer`函数应该通过引用接受第一个参数，以便调用者可以看到函数内部对其所做的更改：

```
void newBuffer(char*& outBuffer, size_t sz) {
    outBuffer = new char[sz];
} 
```

就像现在一样，您将结果分配给`new char[sz]`局部变量，该变量`outBuffer`只是调用者变量的*副本*`foo`，因此当函数返回时，就好像什么都没发生（除了您泄漏的内存）。

此外，您还有一个问题，您将缓冲区分配给长度`ABCD`为 4 的大小。这意味着您最多可以在该缓冲区中保存 3 个字符，因为最后一个字符是为 NUL 终止符保留的。您需要在`+ 1`某处添加长度（我会在调用函数时这样做，而不是在函数内部，因为`newBuffer`不应该专门用于 C 字符串）。`strncpy`如果源字符串足够短，则只有 NUL 终止缓冲区，所以在这种情况下，您很幸运，`0`在您分配的缓冲区之后恰好有一个在内存中。

完成后也不要忘记进入`delete[] foo`（`main`尽管对于这种大小的程序并不重要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T16:35:17.227

它失败了，因为您的`newBuffer`功能实际上不起作用。修复它的最简单方法是将声明更改为`void newBuffer (char *&outBuffer, size_t sz)`. 正如它所写的那样，新分配的内存地址实际上并没有存储到 main 中`foo`，因为指针是按值传递的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:36:11.087

您正在按值传递指针。您需要传递对指针的引用或指针的地址。

也就是说，在我看来，使用返回值会更好：

```
char* newBuffer(size_t sz) {
    return new char[sz];
} 
```

以这种方式编写时，该`newBuffer`功能似乎并不值得。你不需要它。你可以`new`直接使用，这样会更清楚。

当然，如果您使用的是 C++，那么这一切都毫无意义。您应该使用`string`智能指针等。您不需要`new`直接调用。一旦你修复了你在这个问题中讨论的错误，你会遇到一个问题，你的字符串不是以空值结尾的，并且缓冲区太短而无法容纳字符串，因为你忘记为空值终止符分配空间。C++ 的优点之一是您可以摆脱 C 中字符串处理的恐惧。

# asp.net - 我们可以使用带有 asp.net 登录控制的 Diffie-Hellman 公钥加密算法吗？

> ID：10573344
> 
> 赞同：0
> 
> 时间：2012-05-13T16:31:33.390
> 
> 标签：asp.net, login-control, diffie-hellman

我试图找出asp.net 中登录控制的内部结构。它是否使用一些公钥加密算法来交换密钥，然后将其用作对称密钥进行进一步的通信。

我们在选择加密算法方面也有发言权，比如我想专门使用带有登录控制的 Diffie Hellman。有可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:31:21.510

免责声明：我不是密码学家......

*   [Login 控件默认](http://msdn.microsoft.com/en-us/library/ms178329.aspx)使用 ASP.Net Membership 和 Forms Authentication 。
*   您可以[创建自己的身份验证机制](http://msdn.microsoft.com/en-us/library/ms178329.aspx#the_login_control)
*   ASP.net Membership 中使用的默认哈希算法是[SHA1](http://msdn.microsoft.com/en-us/library/1b9hw62f.aspx)。是的，你有一个选择。几年前，我不得不在迁移项目中使用 MD5（如果内存从 phpBB 到 ASP.net）...
*   （见免责声明）椭圆曲线 Diffie-Hellman (ECDiffieHellman) 信息
    *   在[配置中](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptoconfig.aspx)
    *   [ECDiffieHellman](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ecdiffiehellmancng.aspx)

嗯……

# jpa - 实体对象未持久化：通过未标记的关系找到新对象

> ID：10573345
> 
> 赞同：0
> 
> 时间：2012-05-13T16:31:45.703
> 
> 标签：jpa, persistence, eclipselink

我正在尝试保留以下实体：

```
public class CommentEntity {

@Id

@ManyToOne(optional=false,cascade=CascadeType.REFRESH, targetEntity=UserEntity.class)
@JoinColumn(name="USERID",referencedColumnName="USERID")
private UserEntity userEntity;

@ManyToOne(optional=false,cascade=CascadeType.REFRESH, targetEntity=PostEntity.class)
@JoinColumn(name="POSTID",referencedColumnName="POSTID")
private PostEntity postEntity;

} 
```

但是错误出来了：

在同步期间，通过未标记为级联 PERSIST 的关系找到了一个新对象：entity.PostEntity@16afec。

当我尝试持久化 PostEntity 时，它会持久化。不会抛出这样的异常：

```
public class PostEntity {

@ManyToOne(optional = false, cascade = CascadeType.REFRESH, fetch = FetchType.LAZY, targetEntity = UserEntity.class)
@JoinColumn(name = "USERID", referencedColumnName = "USERID")
private UserEntity userEntity;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "postEntity", fetch = FetchType.LAZY)
private List<CommentEntity> commentEntityList;
} 
```

为什么会这样？用户实体是：

```
public class UserEntity {

@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "userEntity")
private List<PostEntity> postEntityList;

@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "userEntity")
private List<CommentEntity> commentEntityList;
} 
```

我正在使用代码坚持commentEntity：

```
entityManagerFactory = Persistence
                    .createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
            entityManager = entityManagerFactory.createEntityManager();
            entityTransaction = entityManager.getTransaction();
            entityTransaction.begin();
            entityManager.persist(commentEntity);
            entityTransaction.commit();
            entityManager.close(); 
```

我无法理解可能是什么原因？那么为什么 PostEntity 会在同样的情况下持续存在呢？

我正在使用 EclipseLink

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:42:07.873

因为您尝试保留具有 userEntity 或 postEntity（或两者）引用未持久化实体的 CommentEntity。调用*em.persist(instance of commentEntity)*不会导致这些实体被持久化，因为您级联只刷新。您应该通过单独调用*em.persist*来持久化这些实体。

如果这不能回答您的问题，请提供创建实体并保留它们的代码。

# forms - 在drupal 7中，由于多个附件，将表单添加到视图会产生多个相同的表单，如何只保留一个？

> ID：10573347
> 
> 赞同：0
> 
> 时间：2012-05-13T16:31:50.160
> 
> 标签：forms, drupal, view

我正在给一个视图添加评论表单，其实在这个视图中我有3个附件，所以当我最终通过代码在view.tpl.php中添加了一个表单时

```
 $comment = new stdClass;
 $comment->nid = arg(2);
 $form = drupal_get_form('comment_node_project_form', $comment);
 print render($form); 
```

我可以看到页面上有 4 个表单，虽然我在那个视图中只需要一个表单，如何删除额外的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:14:21.653

仅在需要的 view.tpl.php 中使用您的代码。在视图配置的“主题信息”中列出的模板。您在名为 yout_view_id_view.tpl.php 或类似名称的模板中打印表单。我建议您阅读 drupal.org 上的文档。

# css - Unicode 字体无法在 Chrome 上正确显示

> ID：10573350
> 
> 赞同：2
> 
> 时间：2012-05-13T16:32:09.063
> 
> 标签：css, wordpress, google-chrome, unicode, fonts

我在我当前的网站上使用本地字体 Meera.ttf、MEERA0.eot，它是马拉雅拉姆语（印度的一种本地语言）。现在的问题是在 Chrome 中显示一些大字体的大帖子，但它在所有其他浏览器中都能完美运行。其他内容在 Chrome 和其他浏览器中都能完美运行。附上两张截图。第一个是 Chrome，第二个是 Firefox。

* * *

### 铬合金

![在 Chrome 上](../Images/1ff38d3fbf12530a711cb8ab3434b932.png)

* * *

### 火狐

![在火狐上](../Images/59c7c7337e6581ada3e37c713ac9625a.png)

* * *

这发生在很多页面上。但是，如果内容很短，则效果很好。

作为参考，该网站位于 Wordpress 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:02:49.637

[W3C 标记验证器](http://validator.w3.org)在页面上发现 101 个标记错误并另外发出 10 个警告。页面结构相当做作，它会进行一些浏览器嗅探，并尝试为不同的浏览器提供不同的样式表。很难说这些是否与观察到的问题有关。追踪问题的原因可能是一项重大工作，并且有这么多标记错误会使页面相当脆弱。

恐怕“首先简化结构并修复标记错误”这个显而易见的答案不太现实，但这可能是您能得到的最佳建议。

# ruby-on-rails - 为什么ajax成功被调用一次？

> ID：10573352
> 
> 赞同：0
> 
> 时间：2012-05-13T16:32:15.717
> 
> 标签：ruby-on-rails, ajax, jquery

为什么，如果我在 javascript 中编写 html 方法，它只会被调用一次，但如果我只有警报，它每次都会调用，我会更改输入中的 wy 值（模糊）。

```
$(".quantity").blur(function() {
    console.log("upd");
    $.ajax({ 
      url: "/line_items/update_quantity/"+$(this).attr("id"), 
      type: "GET", 
      data: {quantity: $(this).val()},
      success: function(text)
      {
        alert(text);
        $('.right').html(text);
      },
      error: function(){
        alert('Ошибка javascript');
      },
      dataType : "html"
    });
  }); 
```

每次模糊后我都需要重新加载 html 部分...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:37:22.100

尝试这样做..

```
$(document).on('blur', '.quantity', function() {
   // place your code here
}); 
```

我怀疑您正在替换应用原始模糊绑定的 dom 元素。如果这样做，您将删除事件处理程序。 [On()](http://api.jquery.com/on/)将使其保持活力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:39:05.750

如果`.quantity`是动态元素（我认为是这样）然后尝试

```
$(document).delegate('.quantity', 'blur', function() {
   // code
}); 
```

[在此处阅读有关委托（）的信息](http://api.jquery.com/delegate/)

# jquery - 为什么 jQuery fadeTo() 在 scroll() 上不起作用？

> ID：10573359
> 
> 赞同：0
> 
> 时间：2012-05-13T16:32:56.263
> 
> 标签：jquery, scroll, scrolltop, fadeto

我不知道为什么这段代码不起作用：

```
$(window).scroll(function () {
    var $scrtop = $(window).scrollTop(),
    $topnavbar = $(".topbar,.navbar-fixed-top");

    $topnavbar.mouseenter(function(){
        $topnavbar.stop(true,true).fadeTo(4000,1);
    }).mouseleave(function(){
        $topnavbar.stop(true,true).fadeTo(4000,.5);
    })
    if( $scrtop > 100 )
    {
        $topnavbar.stop(true,true).fadeTo(4000,.5);
    } else {
        $topnavbar.stop(true,true).fadeTo(4000,1);
    }

});//scroll 
```

它只是直接进入最终的不透明度，没有fadeTo（）的阶段。这是在jsfiddle：http: [//jsfiddle.net/pPr9S/](http://jsfiddle.net/pPr9S/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:59:10.093

**更新了代码**

您将从停止中删除第二个*true*，因为它实际上完成了队列中的下一个动画；

```
var $topnavbar = $(".topbar,.navbar-fixed-top"),  
    $scrtop;  
 $(window).scroll(function () {
$scrtop = $(window).scrollTop();
if( $scrtop > 100 )
{
    $topnavbar.stop(true).fadeTo(500,.5);
} else {
    $topnavbar.stop(true).fadeTo(500,1);
}
});

$topnavbar.hover(function(){
$topnavbar.stop(true).fadeTo(500,1);
}, function(){
    $topnavbar.stop(true).fadeTo(500,.5);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:35:24.633

我不知道你的问题是什么，试试这个，如果没有，请在 js [http://jsfiddle.net/](http://jsfiddle.net/)上插入 html 代码，这样你会很快得到答案...

```
var $topnavbar = $(".topbar,.navbar-fixed-top"),
    $scrtop; $(window).scroll(function () {
    $scrtop = $(window).scrollTop();
    if( $scrtop > 100 )
    {
        $topnavbar.stop().fadeTo(4000,.5);
    } else {
        $topnavbar.stop().fadeTo(4000,1);
    } });

$topnavbar.hover(function(){
    $topnavbar.stop().fadeTo(4000,1); }, function(){
    $topnavbar.stop().fadeTo(4000,.5); }); 
```

# c++ - 指针操作++导致内存泄漏？

> ID：10573362
> 
> 赞同：2
> 
> 时间：2012-05-13T16:32:58.627
> 
> 标签：c++

当我写

```
char *s = "hello everyone";
s++; 
```

这里有内存泄漏吗？

p/s：英语不是我的母语，所以可能会有一些错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T16:34:20.847

不，没有分配字符串文字，因此没有内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:08:45.007

不，那里没有泄漏，它与指向字符串文字的指针无关。增加指针永远不会导致内存泄漏。导致内存泄漏的唯一原因是没有释放您分配的内存。

# opencv - 在 OPENCV v2 API 中执行 PCA 时，如何在 libfacerec 中使用 Mahalanobis 距离？

> ID：10573364
> 
> 赞同：0
> 
> 时间：2012-05-13T16:33:16.060
> 
> 标签：opencv, computer-vision, face-detection, face-recognition, pca

我正在从事人脸识别项目，并且正在使用 libfacerec。在预测标签时，库使用计算绝对差的 norm()。如何使用 Mahalanobis 距离来提高准确性？OpenCV2 有一个功能：

```
double Mahalanobis(InputArray vec1, InputArray vec2, InputArray icovar) 
```

这需要我通过使用计算 icovar

```
void calcCovarMatrix(InputArray samples, OutputArray covar, OutputArray mean, int flags, int ctype=CV_64F) 
```

但是，此函数期望样本存储为单独的矩阵或单个矩阵的行/列。我不知道如何为这个函数提供数据，即如何使样本分离矩阵或作为单个矩阵的行。请帮忙。我想更改以下代码：

```
int Eigenfaces::predict(InputArray _src) const {
// get data
Mat src = _src.getMat();
// project into PCA subspace
Mat q = project(_eigenvectors, _mean, src.reshape(1,1));
double minDist = numeric_limits<double>::max();
int minClass = -1;
for(unsigned int sampleIdx = 0; sampleIdx < _projections.size(); sampleIdx++) {
    //Change Here------------------------------------------------
    Mat icovar;
    Mat mean;
    calcCovarMatrix(Mat(),icovar,mean,CV_COVAR_SCRAMBLED);
    double dist = Mahalanobis(q, sampleIdx, icovar);
    //-----------------------------------------------------------
    //double dist = norm(_projections[sampleIdx], q, NORM_L2);
    if(dist < minDist) {
        minDist = dist;
        minClass = _labels[sampleIdx];
    }
}
return minClass;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:59:47.820

# 介绍

首先是这个。根据我的个人经验，我可以告诉你，对于 PCA，距离度量对识别率并没有任何显着影响。我知道有些论文报告了它，但我无法在我的图像数据库中承认它。至于你关于如何计算马氏距离的问题。PCA 和 Mahalanobis 距离之间存在密切关系，请参阅[http://www.cognotics.com/opencv/servo_2007_series/part_5/page_5.html](http://www.cognotics.com/opencv/servo_2007_series/part_5/page_5.html)上的“改进特征脸” ，这也在 [1] 中给出。为了完整起见，本文所指的项目位于：[https](https://github.com/bytefish/libfacerec) ://github.com/bytefish/libfacerec 。

## 代码

没有任何进一步的测试，我会将认知学的东西重写为：

```
int cv::Eigenfaces::predict(InputArray _src) const {
  // get data
  Mat src = _src.getMat();
  // project into PCA subspace
  Mat q = subspace::project(_eigenvectors, _mean, src.reshape(1,1));
  double minDist = numeric_limits<double>::max();
  int minClass = -1;
  for(int sampleIdx = 0; sampleIdx < _projections.size(); sampleIdx++) {
    Mat diff0, diff1;
    // perform element wise multiplication and division
    multiply(q - _projections[sampleIdx], q - _projections[sampleIdx], diff0);
    divide(diff0.reshape(1,1), _eigenvalues.reshape(1,1), diff1);
    double dist = sum(diff1).val[0];
    if(dist < minDist) {
      minDist = dist;
      minClass = _labels[sampleIdx];
    }
  }
  return minClass;
} 
```

## 参考

[1] Moghaddam, B. 和 Pentland, A. 模式分析和机器智能中的“对象表示的概率视觉学习” *，IEEE Transactions on* Vol。19, No. 7\. (1997), pp. 696-710

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T19:27:00.090

我一直在为我的作业做这件事的方式是展平每个图像。因此，如果图像是 24x24，我将其重塑为 1x1024。

然后我将要比较的 2 张图像堆叠到一个数组中。所以现在你有一个 2x1024 矩阵/数组。

我将 2x1024 放入 calcCovarMatrix() 以获取协方差数组（使用 COVAR_ROWS 标志）。然后使用 invert() 反转它。

然后你将你的两个图像和你的倒置协方差传递给 Mahalanobis()

# .net - 调整大小时 VirtualizingStackPanel 行为异常

> ID：10573370
> 
> 赞同：1
> 
> 时间：2012-05-13T16:35:01.590
> 
> 标签：.net, wpf, virtualizingstackpanel

我正在研究使用模式设置为“回收”的 VirtualizingStackPanel 的自定义控件，我遇到了以下问题：http: [//i.imgur.com/XoarX.png](http://i.imgur.com/XoarX.png)

当我“玩”列宽度一段时间然后最大化窗口时，就会发生这种情况。我不知道是什么原因造成的。PrepareContainerForItemOverride 被调用，我检查了单元格宽度并且它是正确的，似乎包含单元格的 StackPanel 没有重新排列其内容，我不知道如何强制它这样做......

我知道我没有提供太多细节，但也许你们中的一些人有类似的问题，只是碰巧知道解决方案。

**编辑：** 相关部分的 XAML：

```
<Style x:Key="{x:Type dgp:CellsPresenter}" TargetType="{x:Type dgp:CellsPresenter}">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type dgp:CellsPresenter}">
                <ItemsPresenter/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="{x:Type dg:Cell}" TargetType="{x:Type dg:Cell}">
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}" />
    <Setter Property="BorderThickness" Value="0,0,1,1" />

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type dg:Cell}">
                <Border Background="{TemplateBinding Background}" 
              BorderBrush="{TemplateBinding BorderBrush}"  
              BorderThickness="{TemplateBinding BorderThickness}" 
              SnapsToDevicePixels="True">
                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

每行（简单控件，与 XAML 无关）都包含 CellPresenter，并且行堆叠到 VirtualizingStackPanel 中。您可以在 ItemsPanelTemplate 中看到的具有水平方向的 StackPanel 似乎没有更新其布局。

# django - 如何在视图中配置 django-notifications

> ID：10573372
> 
> 赞同：1
> 
> 时间：2012-05-13T16:35:10.107
> 
> 标签：django, django-views

我有一个应用程序，员工可以在其中为支持团队发布工作请求订单。我正在尝试对其进行配置，一旦保存请求表，就会向支持团队的代表发送通知。使用 django-notifications，我创建了 management.py 文件...

```
from django.conf import settings
from django.utils.translation import ugettext_noop as _

if "notification" in settings.INSTALLED_APPS:
    from notification import models as notification

def create_notice_types(app, created_models, verbosity, **kwargs):
    notification.create_notice_type("post_request", _("Post Request Received"), _("you have received a Post Request"))

    signals.post_syncdb.connect(create_notice_types, sender=notification)
else:
    print "Skipping creation of NoticeTypes as notification app not found" 
```

但是，我在视图函数中使用正确的语法有困难。如其所写：

```
def create_record(request):
    if request.method == 'POST':
        form = PostRequestForm(request.POST)
        user = User.objects.filter(username="targetuser")
        if form.is_valid():  
            form.save()
            if notification:
                notification.send([user], "post_request", {"user": user})
                return HttpResponseRedirect('/create/')
    else:
        form = PostRequestForm()
    return render(request, 'createpostrequest.html', {
        'form': form,
}) 
```

但它会抛出错误“NoticeType 匹配查询不存在”。如果我用特定的用户名替换“用户”，我会得到全局名称未定义错误。我究竟做错了什么？

# java - 将地图声明为地图有什么好处吗 与地图相反

> ID：10573377
> 
> 赞同：0
> 
> 时间：2012-05-13T16:35:38.277
> 
> 标签：java, generics

除了确保 key 是 String 作为编译类型之外，它还有其他优点吗？或者它可以被排除在外吗？我存储的值可以是多种类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T16:38:45.143

*不推荐使用*没有`Map`泛型类型信息的声明，并且大多数 IDE 都会在此处生成警告。这很重要，即使它是。还要确保关键是在编译时实际上是相当多的。*`Map<Object, Object>``String`*

 *从技术上讲，这些类型在编译期间会被擦除，因此在运行代码时没有任何优势。但同样 - 从 Java 5 开始，您应该始终包含泛型类型信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T17:01:00.600

使用的好处`Map<String, Object>`主要是代码可读性。其他开发人员更容易阅读您的代码，也为您节省了一些强制转换操作。然而，在编译之后，泛型被删除，因此它对应用程序没有任何实际影响。您还可以看到：[原因泛型是在 java 5 中引入的](https://stackoverflow.com/questions/3545141/reason-generics-were-introduced-in-java-5)*

# java - 内存无限增长，垃圾收集器增加占用空间

> ID：10573378
> 
> 赞同：1
> 
> 时间：2012-05-13T16:35:53.283
> 
> 标签：java

所以我有一个应用程序可以创建 2000 个对象。

对于每个对象，它下载一个网页（大约 75kb 的字符串），创建整个 html 树的 DOM 文档对象模型并丢弃字符串（超出范围）。

然后它从 DOM 中提取一些文本和链接，并丢弃 DOM（通过将其设置为 null）。

在大约 1000 个对象之后（取决于我打开了多少应用程序，可能是在 50 个对象之后），我得到了 OutOfMemory 异常，并且使用 Process Explorer 我可以看到内存占用量一直在以对数步长增加。

我尝试在将其`System.gc();`设置为 null 后插入 a，但内存使用量仍在不断增加，但现在不是使用对数步长，而是在每个处理对象后使用大约 0.5Mb 的步长。此外，在调试时，每当我越过`System.gc()`足迹时，足迹就会增加这个数量，并且它保持不变，直到指令指针`System.gc()`再次相同。

[编辑]

我按照答案中的建议在转储上运行了配置文件，发现这些类中的每一个仍然存储一个 150kb 字符串（75k 个字符）。总计 242mb。所以问题就变成了，如何在不保留原始字符串的情况下保留子字符串？显然 String 构造函数就是这样做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:43:13.177

这看起来像内存泄漏。我猜你在解析 HTML (?) 后没有关闭 HTTP 连接或清理，但这只是猜测。您有两个选项来诊断问题：

*   在内存不足错误 ( ) 上转储内存`-XX:+HeapDumpOnOutOfMemoryError`并使用内存分析器。它会告诉你什么占据了大部分内存

*   尝试删除一些处理步骤（通过 HTTP 获取数据、解析 HTML、提取数据）并查看没有哪一步内存增长停止。此步骤会导致内存泄漏。

打电话`System.gc()`也帮不了你，永远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:42:03.320

首先，您不能强制 JVM 进行垃圾收集。您只能提出建议[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)。进一步设置某些东西`null`并不能保证对该对象的所有引用都已被删除。我的猜测是你已经忘记了[字符串池](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool) 没有看到任何代码这些是我们必须工作的假设。此外，您应该考虑缓存结果，而不是每次都丢弃它们，因为这会浪费 JVM 中的时间和资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:53:59.260

一个问题可能是在提取子字符串时仍然引用了长的原始字符串（如果您想从一个原始字符串中生成许多子字符串，则很好，如果原始字符串很长并且您只想使用单个子字符串，则不好）。

尝试转储内存以查看保留哪些对象以及引用它们的位置。当内存已满时，可以使用*-XX:HeapDumpOnOutOfMemoryError获取转储。*您还可以使用*jmap -dump:format=b,file=heap.bin*来获取转储。有了这个，您可以在每次处理文档后获取转储，然后使用 Eclipse 内存分析器工具 (MAT) 比较转储，以查看创建和保留了哪些新对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:38:44.823

除了诊断目的之外，很少有充分的理由显式调用垃圾收集器。

当您从 DOM 中提取字符串时，如果您的程序的另一部分保留对直接来自 DOM 的任何内容的引用，请确保对它们进行实习（）或实现您自己的对象池。

使用您的分析器来确认没有其他任何东西保留对您认为要丢弃的 DOM 或其他对象的引用。还要记住，Java 的内置 DOM 实现可能有大约 5 倍的内存开销，并确保您的最大堆大小 (-Xmx) 足够大。

# java - 让 Hibernate 在完成实体实例后释放它们？

> ID：10573379
> 
> 赞同：1
> 
> 时间：2012-05-13T16:36:04.260
> 
> 标签：java, hibernate, jpa

我有一个简单的 Java 应用程序，它将记录插入表“A”，通过读取适当的“B”记录将它们链接到另一个表“B”中的记录，在“A”中设置引用，并保存“A”记录。我遇到的问题是，Hibernate 显然保留了它在链接过程中读取的每个“B”记录，这最终导致程序内存不足（堆空间错误）。

我查看了带有 JHAT 的堆转储，这是有问题的类。前三名都是 Hibernate 的东西，第四名是我的 Hibernate/JPA 托管实体类。当它尝试实例化 GeoEntity 的另一个实例时，会发生内存不足错误，即我的“B”表实体：

```
134489 instances of class org.hibernate.engine.spi.EntityKey 
67245 instances of class org.hibernate.engine.spi.EntityEntry 
67245 instances of class org.hibernate.internal.util.collections.IdentityMap$IdentityKey 
67244 instances of class com.electricgearbox.model.GeoEntity 
```

我已经浏览了我的代码，我很确定我没有做任何事情，比如设置引用然后从不清除它们。事实上，我在循环结束时将我使用的两个本地引用显式设置为 null。

那么，有人遇到过这种情况吗？我确定这是缺少代码行或我忘记了设置，但谷歌搜索和阅读 Hibernate 文档并没有提供明显的解决方案。是什么让 Hibernate 无缘无故地持有这些引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T16:54:44.960

所有这些都缓存在 Session / EntityManager 后面。如果您使用 Hibernate Session，则可以使用以下内容：

*   [evict](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#evict%28java.lang.Object%29)从会话中删除单个实体
*   [clear](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#clear%28%29)清除所有实例。如果程序逻辑中有这样一个点，即不需要会话中的任何实体。

或者他们在 EntityManager 中的对应物，如果再次开发 JPA API：

*   [分离](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#detach%28java.lang.Object%29)：仅在 JPA 2 中可用。
*   [清除](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#clear%28%29)

# c# - 同时从一个表中检索值并将值插入到另一个表中

> ID：10573381
> 
> 赞同：0
> 
> 时间：2012-05-13T16:36:08.803
> 
> 标签：c#, sql-server, shopping-cart

我正在为我的项目开发购物车，但在如何检索 orderid 并将其插入另一个表时遇到了麻烦。

我在 sql server 中有两个表

```
Order
orderid (PK) | date| orderstatus| name| shippingaddress| contactnumber| totalprice| customerid|

Order_book
orderid (PK) | ISBN (PK)| quantity 
```

我想从订单表中检索 orderid 并将其插入 order_book，每当订单提交到数据库时，订单表中的 orderid 是一个增量为 1 的标识 int。

使用 c# 从一个表到另一个表同时检索和插入的最佳选项是什么？

谢谢。

代码::

```
protected void checkout_Click(object sender, EventArgs e)
{
    SQLInjection sql = new SQLInjection();
    String name;
    String address; 
    int contactnumber;
    if (newaddresspanel.Visible == true)
    {
       name = sql.SafeSqlLiteral(NameLabel.Text, 2);
       address = Address1.Text + " " + Address2.Text + "," + PostalCode.Text + "," + State.SelectedItem.Value;
       contactnumber =  int.Parse(Telephone1.SelectedItem.Value) + int.Parse(Telephone2.Text);
       insertDetails(name, address, contactnumber);
    }
    else if (defaultaddresspanel.Visible)
    {
        SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["BookWormDBConnectionString"].ConnectionString);//connect to database
        SqlCommand bindDetails = new SqlCommand("SELECT NAME, ADDRESS, TELEPHONE_NUMBER FROM CUSTOMER WHERE CUSTOMERID = @username", myConnection);

        bindDetails.Parameters.Add("@username", SqlDbType.VarChar);
        bindDetails.Parameters["@username"].Value = username;

        try
        {
            myConnection.Open();
            SqlDataReader reader = bindDetails.ExecuteReader();
            while (reader.Read())
            {
                name = reader["NAME"].ToString();
                address = reader["ADDRESS"].ToString();
                contactnumber = int.Parse(reader["TELEPHONE_NUMBER"].ToString());
                insertDetails(name, address, contactnumber);

                }
            reader.Dispose();
            myConnection.Close();
        }
        catch (SqlException se)
        {

        }
    }
    try
    {
        cart = (DataTable)HttpContext.Current.Session["Cart"];
        foreach (DataRow dr in cart.Rows)
        {
            int isbn = int.Parse(dr["ISBN"].ToString());
            int quantity = int.Parse(dr["quantity"].ToString());
            insertOrderbook(isbn, quantity);
        }

    }

    catch (Exception ae)
    {

        Response.Write(ae.Message);

    } 
```

插入订单：“失败”

```
protected void insertOrderbook(int isbn, int quantity)
{

    int orderid;
    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["BookWormDBConnectionString"].ConnectionString);//connect to database
    SqlCommand orderId = new SqlCommand("SELECT SCOPE_IDENTITY() FROM ORDERBOOK", myConnection);

    try
    {
        myConnection.Open();

        orderid = int.Parse(orderId.ExecuteScalar().ToString());
            SqlCommand insertOrderBook = new SqlCommand("INSERT INTO ORDERBOOK_BOOK (ISBN, ORDERID, QUANTITY) VALUES (@isbn, @orderid, @quantity)", myConnection);

            insertOrderBook.Parameters.Add("@isbn", SqlDbType.Int);
            insertOrderBook.Parameters["@isbn"].Value = isbn;

            insertOrderBook.Parameters.Add("@orderid", SqlDbType.Int);
            insertOrderBook.Parameters["@orderid"].Value = orderid;

            insertOrderBook.Parameters.Add("@quantity", SqlDbType.Int);
            insertOrderBook.Parameters["@quantity"].Value = quantity;

            insertOrderBook.ExecuteNonQuery();
            myConnection.Close();
        }
    catch (SqlException se)
    {
        Response.Write(se.Message);
    }
} 
```

插入订单详情::

```
protected void insertDetails(string name, string address, int contactnumber)
{
    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["BookWormDBConnectionString"].ConnectionString);//connect to database
    SqlCommand orderDetails = new SqlCommand("INSERT INTO ORDERBOOK (DATE, ORDERSTATUS, TOTALPRICE, SHIPPING_ADD, CUSTOMERID, NAME, CONTACTNUMBER) VALUES (@date, @orderstatus, @totalprice, @shippingadd, @username, @name, @contactnumber)", myConnection);
    orderDetails.Parameters.Add("@date", SqlDbType.DateTime);
    orderDetails.Parameters["@date"].Value = getTime();

    orderDetails.Parameters.Add("@orderstatus", SqlDbType.VarChar);
    orderDetails.Parameters["@orderstatus"].Value = "Order Processing";

    orderDetails.Parameters.Add("@totalprice", SqlDbType.Decimal);
    orderDetails.Parameters["@totalprice"].Value = totalPrice;

    orderDetails.Parameters.Add("@shippingadd", SqlDbType.VarChar);
    orderDetails.Parameters["@shippingadd"].Value = address;

    orderDetails.Parameters.Add("@name", SqlDbType.VarChar);
    orderDetails.Parameters["@name"].Value = name;

    orderDetails.Parameters.Add("@contactnumber", SqlDbType.Int);
    orderDetails.Parameters["@contactnumber"].Value = contactnumber;

    orderDetails.Parameters.Add("@username", SqlDbType.VarChar);
    orderDetails.Parameters["@username"].Value = username;

    try {
        myConnection.Open();
        orderDetails.ExecuteNonQuery();
        myConnection.Close();

    }
    catch ( SqlException se)
    {

    }
} 
```

错误：输入字符串的格式不正确

我试图调试它，不知何故，orderid 显示 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:57:37.903

如果我理解正确，您希望在插入订单时检索新创建的 orderId，然后将该 ID 放入 order_book。

要检索最后创建的值，[`SELECT SCOPE_IDENTITY()`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)请在订单表中插入项目后立即使用。这将为您提供要插入 order_book 的 orderId。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:24:58.687

你正在做这个选择

```
SELECT SCOPE_IDENTITY() FROM ORDERBOOK 
```

您应该做的是在您的订单簿插入 SP 中添加一个输出参数（例如，@orderBookId），然后在插入之后，您应该执行

```
SELECT @orderBookId = SCOPE_IDENTITY() 
```

注意没有 FROM 子句，并确保在 C# 代码中添加参数作为输出参数。

然后，在插入详细信息时，只需添加 @orderBookId 作为输入参数即可。

# iphone - 我什么时候应该将我的代码包装到自动释放池中

> ID：10573387
> 
> 赞同：9
> 
> 时间：2012-05-13T16:36:32.510
> 
> 标签：iphone, objective-c, memory-management, autorelease

我是 Objective-c 的新手，我知道基本的内存管理规则，比如 when to `retain` `release` `autorelease`. 但我不知道什么时候应该将我的代码包装到自动释放池中，为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-13T16:39:31.873

与其他性能优化一样，如果您注意到高内存使用和分析（例如使用 Instruments）导致您将额外的自动释放池作为解决方案，您通常应该只在代码中添加额外的自动释放池。

也就是说，您可以将创建大量临时对象的代码包装在自动释放池中的紧密循环中。默认的自动释放池在运行循环周期结束时被耗尽。因此，如果您在代码中 for 循环的每次迭代中创建大量临时对象，则默认自动释放池将在整个循环运行之后才会耗尽，这意味着您创建的所有临时对象可以加起来高临时内存使用率（有时称为“高水位线”）。您可以将循环的每个迭代包装在 an 中`@autoreleasepool`，以使在该循环迭代中创建的不需要的、自动释放的临时对象更快地释放。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-13T17:03:37.193

要扩展以前的答案：

自动释放池用于`release`自动向添加到其中的对象发送消息。

在 iOS 或 Cocoa 程序中，自动释放池会在主线程上自动创建，并在运行循环结束时耗尽。

也就是说，在另一个线程上使用自动释放对象时，自动释放池是强制性的。

因此，如果您将线程分离到某个方法，则将线程代码包装在自动释放池中。否则，线程中创建的自动释放对象只会泄漏。

自动释放池的另一个用途是优化将使用大量内存的部分代码，因此它们在运行循环结束之前被释放。

但它只涉及自动释放的对象。

例如：

```
- ( void )test
{
    NSMutableArray * a = [ [ NSMutableArray alloc ] init ];

    [ a release ];
} 
```

这里不需要自动释放池，因为您没有自动释放的对象。
该`a`变量将被立即释放，因为它已被显式分配并释放。

现在这个：

```
- ( void )test
{
    NSMutableArray * a = [ NSMutableArray arrayWithCapacity ];
} 
```

在这里，您使用的是便利构造函数，这意味着您没有该对象的所有权。
这也意味着该对象已添加到当前的自动释放池中（如果有的话）。

所以当这个自动释放池被耗尽时它会被释放，所以它可能需要一些周期......

如果您正在编写的代码部分使用大量内存，您可以使用另一个自动释放池，以便在您的方法返回时释放您的自动释放对象：

```
- ( void )test
{
    @autoreleasepool
    {
        NSMutableArray * a = [ NSMutableArray arrayWithCapacity ];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:52:14.000

所有自动释放的对象在技术上都放在一个自动释放池中。通常在您的 main 函数中创建一个默认值。至于在非默认自动释放池中包装对象，这通常是作为一种优化来完成的。

通常不需要使用显式的自动释放池，因为默认的自动释放池会在应用程序的运行循环中自动耗尽。但是，如果您的应用程序在从事件处理程序返回之前创建了许多自动释放的对象，则它可能会为这些对象使用大量内存。因此，如果您将代码包装在显式自动释放池中，则自动释放的对象将被放置在那里，而不是默认池。这允许您定期清空此池以防止自动释放的对象累积。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T23:45:32.417

但是，在三种情况下您可能会使用自己的自动释放池块：

1.  如果您正在编写不基于 UI 框架的程序，例如命令行工具。

2.  如果您编写一个创建许多临时对象的循环。您可以在循环内使用自动释放池块在下一次迭代之前处理这些对象。在循环中使用自动释放池块有助于减少应用程序的最大内存占用。

3.  如果你产生一个辅助线程。

# c++ - C++ 哈希链函数

> ID：10573392
> 
> 赞同：0
> 
> 时间：2012-05-13T16:37:44.457
> 
> 标签：c++, function, hashtable, chaining

我正在尝试构建一个哈希表，并根据我使用在线教程学到的知识，我想出了以下代码

```
#include <iostream>
#include <string>
#include <cstdlib>

using namespace std;
const int SIZE = 100;

int hash(string);

class Node
{
   public:
      Node();
      Node(string);
      int hash(int value);
   private:
      string data;
      Node* next;

   friend class HashTable;
};

Node::Node() {
  data = "";
  next = NULL;
}

Node::Node(string) {
  data = "";
  next = NULL;
}

int Node::hash(int value) {
   int y;
   y = value % SIZE;
}

class HashTable {
public:
    HashTable();
      HashTable(int);
      ~HashTable();
      void insertItem(string);
      bool retrieveItem(string);

private:
      Node* ht;
};

HashTable::HashTable() {
  ht = new Node[SIZE];
}

HashTable::HashTable(int max) {
  ht = new Node[max];
}

HashTable::~HashTable() {
   delete[] ht;
}

void HashTable::insertItem(string name) {
    int val = hash(name);
    for (int i = 0; i < name.length(); i++)
        val += name[i];
}

bool HashTable::retrieveItem(string name) {
    int val = hash(name);
    if (val == 0 ) {
        cout << val << " Not Found " << endl;
    }
    else {
        cout << val << "\t" << ht->data << endl;
    }
}

void print () {
    //Print Hash Table with all Values
}

int main() {

   HashTable ht;
   ht.insertItem("Allen");
   ht.insertItem("Tom");

   ht.retrieveItem("Allen");

   //data.hash(int val);
   //cout << ht;

   system("pause");
   return 0;
}

int hash(string val) {
    int key;
    key = val % SIZE;
} 
```

我正在尝试插入字符串值并使用retrieveItem 函数验证名称是否存在。另外，我该如何去打印带有值的 HashTable。

任何帮助将不胜感激。

维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:21:08.173

这里有点不对劲。只是瞥了一眼代码中间的一个随机点，我发现：

```
Node::Node(string) {
  data = "";
  next = NULL;
} 
```

这不会保存传入的字符串的值。我猜你真的想要更像：

```
Node::Node(string value) : data(value), next(NULL) {} 
```

接下来我看到的是：

```
int Node::hash(int value) {
   int y;
   y = value % SIZE;
} 
```

这会计算一个值并将其放入`y`（局部变量）但不返回任何内容，因此您计算的值会立即丢失。如果你尝试使用它的返回值，你会得到未定义的行为（实际上，我不记得了——似乎在 C 中你只有在尝试使用返回值时才会得到 UB，但在 C++ 中它是 UB这一点都没有——不管技术细节如何，它显然不是你想要的，需要修复）。

就像我说的，我只是看了一眼代码中的一个地方，但发现——我怀疑它们是唯一的问题。最重要的是，您可能需要稍微备份一下，弄清楚每个功能应该做什么，并一个一个地检查它们并确保每个功能都在做它应该做的事情。

另一点建议：我没有自己处理动态分配数组，而是使用`std::vector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:46:10.327

只需使用 stl hashmap 或线程安全 hashmap 使用英特尔线程构建块库

# list - 方案：从嵌套列表中检索元素

> ID：10573395
> 
> 赞同：2
> 
> 时间：2012-05-13T16:38:11.827
> 
> 标签：list, graph, scheme, nested-lists

我对 Scheme 很陌生，我在编写一个函数作为家庭作业的一部分时遇到了麻烦。我有一个图表 G 以列表形式提供给我，格式如下：((node1 node2 weight1) (node3 node4 weight2) ...)。我正在尝试编写一个函数，以这种格式返回此图中所有节点（V）的列表：（node1 node2 node3 ...）。该函数只能将图形（G）作为输入。

所以我想我可以通过将G中每个嵌套列表的第一个和第二个元素添加到V来递归地做到这一点。这是我写的：

```
 (define nodes-of
      (lambda (G)
        (if (null? G) 
            ()
            (begin (add-to-set (cadar G) (nodes-of (cdr G))) 
                   (add-to-set (caar G) (nodes-of (cdr G)))))) 
```

我认为这是错误的，因为第一个递归只涉及 (cadar G) 而第二个涉及 (caar G)，返回值将仅由 begin 下的第二个语句设置（如果我没记错的话）。

add-to-set 是我之前为家庭作业编写的一个函数，如果列表中不存在一个元素，它会将它添加到列表中。（例如： add-to-set n S ，这会将 n 添加到 S）

有人可以帮我吗？（顺便说一句，我不允许使用多个 let's、let* 或 set）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:16:43.200

好吧，您可以递归地执行此操作是对的，并且您的代码非常接近。回想一下，每个递归过程都需要一个您知道答案的基本状态，以及每次递归时降低问题复杂性的方法。

在处理列表的情况下，您的基本情况是空列表，这就是您要检查 null 的原因。然后减少公式将断开列表的一部分，然后调用剩余部分的过程。所以，就像我说的，你很接近。

然后意识到，由于您的数据是定期结构化的，您可以将您的图表视为普通列表。您不需要递归到列表的每个元素，您只需对每个元素执行两个操作并将结果放入列表中。

```
(define nodes-of
    (lambda (G)
        (if (null? G)   ;<-- have we reached the base case yet?
            '()         ;<-- if yes, return null so our cons will build a list
            (cons (caar G) (cons (cadar G) (nodes-of (cdr G))))))) ;<-- if not, keep building the list by grabbing the things we want from each element, then reducing the list 
```

如果你愿意，你也可以使用`let`..

```
(define nodes-of
    (lambda (G)
        (if (null? G)
             '()
             (let ((n1 (caar G))
                   (n2 (cadar G)))
               (cons n1 (cons n2 (nodes-of (cdr G)))))))) 
```

在您的情况下，您将使用`add-to-set`where I've used `cons`。一旦我们达到了基本情况，所有的调用`add-to-set`都将能够从最后一个开始评估，然后返回堆栈到第一个。

```
|cons n3 '()           | 2    => (n3)
|cons n2 [result of 2] | 1    => (n2 n3)
|cons n1 [result of 1] | 0    => (n1 n2 n3) 
```

# hyperlink - 在 domainA 上的 Flash 横幅链接，但在 domainB 上不起作用

> ID：10573396
> 
> 赞同：0
> 
> 时间：2012-05-13T16:38:13.703
> 
> 标签：hyperlink, flash

我想知道，为什么我的 Flash 横幅不起作用？有一家公司想在我的网站上做广告，用她自己的 flash 横幅，但是当我把它插入我的网站时，它没有链接，但是如果我在新窗口中打开它（只有 SWF 文件） ，它完美地工作。请帮助我，因为我不知道为什么它这么有问题。

SWF 文件的链接：[http ://www.szolnokinaplo.hu/feltoltes/banner/alla.swf](http://www.szolnokinaplo.hu/feltoltes/banner/alla.swf)

我想插入的网站（上一个）：[http ://szolnokinaplo.hu/2012/05/11/kevesebb-virag-a-viragos-varosban/](http://szolnokinaplo.hu/2012/05/11/kevesebb-virag-a-viragos-varosban/)

谢谢你的帮助。:)

你的，巴拿巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:50:17.410

如果您无法编辑 de .fla 文件，也许您可​​以将标签放在具有绝对根目录的 html 文件中:)

# android - Android 逻辑 if .. else 运算符

> ID：10573398
> 
> 赞同：-3
> 
> 时间：2012-05-13T16:38:25.673
> 
> 标签：android, logical-operators

Android / Java 编程中是否存在与 PHP 类似的结构：

```
Condition ? [if true, do this] : [else do this] 
```

有时代码比无尽的 if..else 子句更容易阅读，所以如果 Java / Android 不提供类似的东西，我会感到惊讶吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:41:47.233

是的，语法完全相同：`Condition ? [if true, do this] : [else do this]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T16:46:33.240

首先是一些重要的术语：

*   **语句**是做什么的说明，例如`System.out.println("hello");`，`Thread.sleep(1000);`

*   **表达式**，例如`x + y`或`foo() - bar()`计算为值。

您需要了解这些术语并将它们分开。

条件控制结构`if (a) { b } else { c }`是一个**语句**。

三元运算符`a ? b : c`是一个**表达式**（就像在 PHP 中计算结果为`b`if`a`计算结果为 true，`c`否则计算结果为 else）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:48:21.647

在 Java 中也存在`if-then-else`语句的简写：查看[条件运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)一章以更好地理解。

更清楚地说，正如@aioobe 所建议的那样：尽管在特定上下文中它被认为是`if-then-else`结构的简写**`? :`**，但它不是语句，而是**三元条件运算符**或**三元运算符**。

# c++ - 缓存数据结构设计

> ID：10573401
> 
> 赞同：1
> 
> 时间：2012-05-13T16:38:40.023
> 
> 标签：c++, data-structures

我有一个 C++ 程序需要访问这个风数据，每 6 小时刷新一次。由于服务器的客户端需要数据，服务器查询数据库并将数据提供给客户端。客户端将使用 lat、lon 和 mb 作为键来查找这 ​​5 个值。

```
+------------+-------+-----+-----+----------+----------+-------+------+------+
| id         | lat   | lon | mb  | wind_dir | wind_spd | uv    | vv   | ts   |
+------------+-------+-----+-----+----------+----------+-------+------+------+
| 1769584117 | -90.0 | 0.0 | 100 |      125 |        9 | -3.74 | 2.62 | 2112 |
| 1769584118 | -90.0 | 0.5 | 100 |      125 |        9 | -3.76 | 2.59 | 2112 |
| 1769584119 | -90.0 | 1.0 | 100 |      124 |        9 | -3.78 | 2.56 | 2112 | 
```

因为数据很少更改，所以我希望数据由服务器缓存，因此如果客户端需要先前查询的数据，则不需要第二个 SQL 查询。

我试图确定最有效的内存数据结构，就存储/速度而言，但更重要的是，易于访问。

我最初的想法是一个由 lat 键控的映射，包含一个由 lon 键控的映射，包含一个由 mb 键控的映射，其值为包含 wind_dir、wind_speed、uv、vv 和 ts 字段的映射。

但是，这很快就会变得复杂。当然，另一个想法是包含最后 5 个字段的结构的 3 维数组（lat、lon、mb 索引）。

当我坐在这里时，我想出了将 lat、lon 和 mb 组合成一个字符串的想法，它可以用作地图的索引，因为我 99% 确定 lat、lon 和mb 永远是独一无二的。

还有哪些有意义的想法？

编辑：下面评论的更多细节

在数据方面，数据集中有 3,119,040 行。这将是相当稳定的，尽管随着新报告站的增加，它可能会随着这些年的增加而缓慢增长。通常有 700 到 1500 个客户端请求数据。客户是飞行模拟器。默认情况下，他们将每 5 分钟请求一次数据，但可能的最大频率为每 30 秒一次。没有其他信息 - 您在上面看到的是想要返回的数据。

最后一点我忘了提：我对我的 C++ 尤其是 STL 的东西很生疏，所以越简单越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:48:52.980

您可以使用`std::map`三部分键和合适的小于运算符（这是 Crazy Eddie 提出的，用一些代码行扩展）

```
struct key
{
    double mLat;
    double mLon;
    double mMb;
    key(double lat, double lon, double mb) :
        mLat(lat), mLon(lon), mMb(mb) {}
};

bool operator<(const key& a, const key& b)
{
    return (a.lat <  b.lat ||
            a.lat == b.lat && a.lon <  b.lon ||
            a.lat == b.lat && a.lon == b.lon && a.mb < b.mb);
} 
```

定义并插入地图如下所示：

```
std::map<key, your_wind_struct> values;
values[key(-90.0, 0.0, 100)] = your_wind_struct(1769584117, 125, ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:02:55.510

排序的向量也很有意义。您可以为它提供一个较少的谓词来比较您的三部分键。你可以对地图或集合做同样的事情。哈希...取决于您选择哪个容器的很多因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:06:41.127

另一个选项是 c++11 unordered_set，它使用哈希表而不是红黑树作为内部数据结构，并且（我相信）红黑的平均查找时间为 O(1) vs O(logn) . 您使用哪种数据结构取决于相关数据的特征 - 有多少条数据，可能访问特定记录的频率等。我同意几位评论者的观点，即使用结构作为键是最干净的方法。如果将来发生变化，它还允许您更简单地更改唯一密钥是什么；你只需要在你的关键结构中添加一个成员，而不是创建一个全新的地图级别。

# javascript - 使用自定义 HTML 而不是 URL 打开一个新选项卡

> ID：10573404
> 
> 赞同：48
> 
> 时间：2012-05-13T16:38:46.857
> 
> 标签：javascript, jquery, greasemonkey

我正在制作一个 Greasemonkey 脚本，并想打开一个新选项卡，该选项卡不会显示 URL，但会显示一些作为脚本一部分的 HTML。所以基本上我想做这样的事情（这显然是行不通的）：

```
window.open('<html><head></head><body></body></html>');
or
GM_openInTab('<html><head></head><body></body></html>'); 
```

欢迎任何提示！

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-13T16:42:37.053

你可以这样做：

`var newWindow = window.open();`

然后做

`newWindow.document.write("ohai");`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-09T14:50:22.653

**2021 年 4 月编辑：**这个答案现在已经过时了。Chrome[禁止](https://groups.google.com/a/chromium.org/g/blink-dev/c/GbVcuwg_QjM)将数据 URI 加载到顶部窗口中，并且[iframe 解决方案](https://stackoverflow.com/questions/45493234/jspdf-not-allowed-to-navigate-top-frame-to-data-url)在 Firefox 中对我不起作用。

**原始答案：**如果其他答案给您`Error: Permission denied to access property "document"`，请参阅[this question](https://stackoverflow.com/questions/7995223) about how to handle the same-origin policy questions，或[this one](https://stackoverflow.com/questions/22481340)。

或者，又快又脏，使用数据 URI：

```
var html = '<html><head></head><body>ohai</body></html>';
var uri = "data:text/html," + encodeURIComponent(html);
var newWindow = window.open(uri); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T20:58:22.160

I am putting this here just in case anyone will need this. I have made a way to solve this problem, i created a little website ([https://tampermonkeykostyl.dacoconutnut.repl.co](https://tampermonkeykostyl.dacoconutnut.repl.co)) that you can give html to in the hash! Example: (you might need to middle click the url for it to actually open in new tab)

```
// get url
var el = document.getElementById("url");

// make html
var HTML = `
<h1>hi</h1>
if you can see this then cool <br>
<i>this should be italic</i> and <b>this should be bold</b>
`;

// insert html after the link to demonstrate
document.body.insertAdjacentHTML("beforeend", HTML); // https://stackoverflow.com/a/51432177/14227520

// set url href
el.href = "https://tampermonkeykostyl.dacoconutnut.repl.co/#" + encodeURI(HTML);

// make it open in new tab
el.target = "_blank";
```

```
<a id="url">Click here to display following HTML in a link (see js):</a>
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-04-16T15:27:02.893

假设您有一个`.html`本地存储的文件。你可以做的是：

```
var newWindow = window.open();
newWindow.document.location.href = "/path/to/html/file"; 
```

# java - JTable 键绑定

> ID：10573405
> 
> 赞同：3
> 
> 时间：2012-05-13T16:39:00.327
> 
> 标签：java, swing, jtable, key-bindings

我想在我的应用程序的任何地方触发保存操作（Control+S）。我已经添加了必要的键绑定，并且操作按预期触发。但是，如果我在 JTable 上尝试 Control+S，表格将启动我的自定义操作并激活表格单元格进行编辑。我想我已经禁用了表格输入映射中的编辑操作。我在这里想念什么？

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.KeyStroke;
import javax.swing.UIManager;

public class TestTableKeyBinding extends JFrame{

JTable table;
JScrollPane scroll;

public static void main(String[] args){
    TestTableKeyBinding test = new TestTableKeyBinding();
    test.setVisible(true);
}

TestTableKeyBinding(){
    super();
    initUI();
    addKeyBindings();
}

void initUI(){
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    String[] headers = new String[]{"apples", "bananas"};
    String[][] data = new String[][]{{"1", "2"},{"4","6"}};
    table = new JTable(data, headers);
    table.setCellSelectionEnabled(true);
    scroll = new JScrollPane();
    scroll.setViewportView(table);
    this.add(scroll);
    this.pack();
    this.setSize(new Dimension(300, 400));  

}

void addKeyBindings(){
    //root maps
    InputMap im = this.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
    ActionMap am = this.getRootPane().getActionMap();

    //add custom action
    im.put(KeyStroke.getKeyStroke("control S"), "save");
    am.put("save", saveAction());

    //disable table actions via 'none'
    table.getInputMap().put(KeyStroke.getKeyStroke("control S"), "none");
    table.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke("control S"), "none");
    table.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke("control S"), "none");
    table.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("control S"), "none");
    ((InputMap)UIManager.get("Table.ancestorInputMap")).put(KeyStroke.getKeyStroke("control S"), "none");
}

AbstractAction saveAction(){
    AbstractAction save = new AbstractAction(){
        public void actionPerformed(ActionEvent e) {
            // TODO Auto-generated method stub
               JOptionPane.showMessageDialog(TestTableKeyBinding.this.table, "Action Triggered.");
        }           
    };
        return save;
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:35:50.233

像@Guillaume 一样，我运行您的代码没有问题。你可能会找一个`CellEditor`不经意间失败的，在[这里](https://stackoverflow.com/a/10067560/230513)`editingStopped()`讨论。sscce[可能](http://sscce.org/)有助于澄清问题。

附录：您可以在`saveAction()`处理程序中取消编辑，如下所示。

```
table.editingCanceled(null); 
```

作为参考，我在几个方面更新了您的示例：

*   `Control-S`不受任何`JTable` `Action`常见的外观和感觉实现的约束，因此无需[删除](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto)它。
*   为方便跨平台，请使用[`getMenuShortcutKeyMask()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Toolkit.html#getMenuShortcutKeyMask%28%29).
*   Swing GUI 对象应该*只*在[事件分派线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

代码：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.KeyStroke;

public class TestTableKeyBinding extends JFrame {

    private static final int MASK =
        Toolkit.getDefaultToolkit().getMenuShortcutKeyMask();
    private JTable table;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TestTableKeyBinding test = new TestTableKeyBinding();
                test.setVisible(true);
            }
        });
    }

    TestTableKeyBinding() {
        super();
        initUI();
        addKeyBindings();
    }

    private void initUI() {
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        String[] headers = new String[]{"apples", "bananas"};
        String[][] data = new String[][]{{"1", "2"}, {"4", "6"}};
        table = new JTable(data, headers);
        table.setCellSelectionEnabled(true);
        this.add(new JScrollPane(table));
        this.pack();
        this.setSize(new Dimension(300, 400));

    }

    private void addKeyBindings() {
        //root maps
        InputMap im = this.getRootPane().getInputMap(
            JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        ActionMap am = this.getRootPane().getActionMap();
        //add custom action
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_S, MASK), "save");
        am.put("save", saveAction());
    }

    private AbstractAction saveAction() {
        AbstractAction save = new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(
                    TestTableKeyBinding.this.table, "Action Triggered.");
                table.editingCanceled(null);
            }
        };
        return save;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T01:08:30.190

我终于弄明白了。没有要设置的键绑定，操作映射不存在。所以 put 的调用没有做任何事情。

```
table.getInputMap().put(KeyStroke.getKeyStroke("control S"), "none");
table.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke("control S"), "none");
table.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke("control S"), "none");
table.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("control S"), "none");
((InputMap)UIManager.get("Table.ancestorInputMap")).put(KeyStroke.getKeyStroke("control S"), "none"); 
```

JTable 通过触发表格来启用编辑，将按键事件传递给 editCellAt。有两种方法可以解决这个问题。1) 添加对 JTable 的输入/操作映射的操作引用或 2) 覆盖 editCellAt 以返回 false。这是我解决这个问题的方法。

```
public boolean editCellAt(int row, int column, EventObject e){              
            if(e instanceof KeyEvent){
                int i = ((KeyEvent) e).getModifiers();
                String s = KeyEvent.getModifiersExText(((KeyEvent) e).getModifiers());
                //any time Control is used, disable cell editing            
                if(i == InputEvent.CTRL_MASK){
                    return false;
                }
            }               
            return super.editCellAt(row, column, e);                
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T07:15:10.980

我只是有一个类似的情况，我想重新分配左/右键。帮助我的是查看[https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

最后我想出了这样的代码：

```
 {
        InputMap im = jTable1.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "decStash");
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), "incStash");
    }
    {
        InputMap im = jTable1.getInputMap(JComponent.WHEN_FOCUSED);
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "decStash");
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), "incStash");
    }
    {
        ActionMap am = jTable1.getActionMap();
        am.put("decStash", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                log.debug("decStash");
            }
        });
        am.put("incStash", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                log.debug("incStash");
            }
        });
    } 
```

请注意，我的代码不会像所选答案那样查找根组件。

# c# - Gridview 如何在控件中捕获唯一约束值错误

> ID：10573406
> 
> 赞同：0
> 
> 时间：2012-05-13T16:39:00.843
> 
> 标签：c#, asp.net

我有一个 gridview 和 sqldatasource 来将数据从 datatable 绑定到 gridview 。

当我用一个新的单元格更新一个值，并且该值已经存在于 gridview 的其他单元格中时，我将在新页面中收到唯一值的约束错误，这对用户来说真的很糟糕。

如何捕获该错误并在标签中显示另一个文本以警告用户该值已存在？

所以，我没有从事件中向 gridview 添加一些东西，也没有什么我可以捕捉到的。我需要制定一般规则或其他东西，但我不知道如何。

我试过这个，但没有用，没有出现。

```
protected void GridViewUpdateEventHandler(Object sender, GridViewUpdatedEventArgs e)
{
    if(e.Exception!=null)
    {
       lblForError.Text="Value already exists"; //etc
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:44:48.520

可以使用 try/catch 块包装 CRUD 操作。

使用来自以下线程的建议：

[在 .NET 中捕获 SQL 唯一键异常](https://stackoverflow.com/questions/628189/catching-sql-unique-key-exceptions-in-net)

[具有唯一约束 asp.net 的 SQL 更新命令](https://stackoverflow.com/questions/7328526/sql-update-command-with-unique-constraint-asp-net)

# android - Android 应用程序在模拟器上意外崩溃

> ID：10573414
> 
> 赞同：0
> 
> 时间：2012-05-13T16:39:41.913
> 
> 标签：android, crash

这是我的错误日志，请帮忙？

我是安卓新手，这是我的第一个应用

```
package gaurav.rapp.swamiji;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AnimationUtils;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ViewSwitcher.ViewFactory;

public class BeWithSwamijiActivity extends Activity implements ViewFactory {
    Integer pics[]={R.drawable.img1,R.drawable.img2,R.drawable.img3,R.drawable.img4,R.drawable.img5,R.drawable.img6,R.drawable.img7,R.drawable.img8,R.drawable.img9,R.drawable.img10,R.drawable.img11,R.drawable.img12,R.drawable.img13,R.drawable.img14,R.drawable.img15,R.drawable.img16,R.drawable.img17};
    ImageSwitcher iSwitcher;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        iSwitcher = (ImageSwitcher) findViewById(R.id.ImageSwitcher01);
        iSwitcher.setFactory(this);
        iSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
                    android.R.anim.fade_in));
        iSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
                    android.R.anim.fade_out));

        Gallery gallery = (Gallery) findViewById(R.id.Gallery01);
        gallery.setAdapter(new ImageAdapter(this));
        gallery.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                iSwitcher.setImageResource(pics[arg2]);
            }
        });

    }

    public class ImageAdapter extends BaseAdapter {

        private Context ctx;

        public ImageAdapter(Context c) {
            ctx = c; 
        }

        @Override
        public int getCount() {

            return pics.length;
        }

        @Override
        public Object getItem(int arg0) {

            return arg0;
        }

        @Override
        public long getItemId(int arg0) {

            return arg0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {

            ImageView iView = new ImageView(ctx);
            iView.setImageResource(pics[arg0]);
            iView.setScaleType(ImageView.ScaleType.FIT_XY);
            iView.setLayoutParams(new Gallery.LayoutParams(150, 150));
            return iView;
        }

    }

    @Override
    public View makeView() {
        ImageView iView=new ImageView(this);
        iView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        iView.setLayoutParams(new ImageSwitcher.LayoutParams(
                                LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
        iView.setBackgroundColor(0xFF000000);
        return iView;
    }
} 
```

日志

```
05-13 21:58:39.107: I/Process(397): Sending signal. PID: 397 SIG: 9
05-13 21:58:45.517: D/dalvikvm(409): GC_FOR_ALLOC freed 43K, 4% free 6362K/6595K, paused 75ms
05-13 21:58:45.587: I/dalvikvm-heap(409): Grow heap (frag case) to 10.624MB for 4566704-byte allocation
05-13 21:58:45.697: D/dalvikvm(409): GC_FOR_ALLOC freed 1K, 3% free 10820K/11079K, paused 86ms
05-13 21:58:45.887: D/dalvikvm(409): GC_CONCURRENT freed <1K, 3% free 10820K/11079K, paused 25ms+3ms
05-13 21:58:46.427: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 3% free 10820K/11079K, paused 112ms
05-13 21:58:46.547: I/dalvikvm-heap(409): Grow heap (frag case) to 18.362MB for 8114772-byte allocation
05-13 21:58:46.839: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 2% free 18745K/19015K, paused 72ms
05-13 21:58:47.057: D/dalvikvm(409): GC_CONCURRENT freed 0K, 2% free 18745K/19015K, paused 4ms+16ms
05-13 21:58:47.680: D/dalvikvm(409): GC_FOR_ALLOC freed 5051K, 26% free 15340K/20679K, paused 72ms
05-13 21:58:47.889: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 21% free 16537K/20679K, paused 71ms
05-13 21:58:47.889: I/dalvikvm-heap(409): Grow heap (frag case) to 18.284MB for 2179600-byte allocation
05-13 21:58:48.037: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 10% free 18666K/20679K, paused 75ms
05-13 21:58:48.307: D/dalvikvm(409): GC_CONCURRENT freed 0K, 10% free 18666K/20679K, paused 5ms+3ms
05-13 21:58:48.511: D/dalvikvm(409): GC_FOR_ALLOC freed 1197K, 11% free 18425K/20679K, paused 73ms
05-13 21:58:48.530: I/dalvikvm-heap(409): Grow heap (frag case) to 19.705MB for 1735988-byte allocation
05-13 21:58:48.681: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 11% free 20120K/22407K, paused 76ms
05-13 21:59:09.187: D/dalvikvm(409): GC_FOR_ALLOC freed 961K, 13% free 19660K/22407K, paused 75ms
05-13 21:59:11.737: D/dalvikvm(409): GC_FOR_ALLOC freed 678K, 10% free 20385K/22407K, paused 143ms
05-13 21:59:11.797: I/dalvikvm-heap(409): Grow heap (frag case) to 24.518MB for 4776976-byte allocation
05-13 21:59:11.971: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 8% free 25049K/27079K, paused 85ms
05-13 21:59:12.117: D/dalvikvm(409): GC_CONCURRENT freed <1K, 8% free 25049K/27079K, paused 4ms+3ms
05-13 21:59:12.327: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 8% free 25049K/27079K, paused 93ms
05-13 21:59:12.437: I/dalvikvm-heap(409): Grow heap (frag case) to 32.619MB for 8494048-byte allocation
05-13 21:59:12.589: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 6% free 33344K/35399K, paused 82ms
05-13 21:59:12.877: D/dalvikvm(409): GC_CONCURRENT freed 0K, 6% free 33345K/35399K, paused 5ms+4ms
05-13 21:59:29.208: D/dalvikvm(409): GC_FOR_ALLOC freed 4862K, 17% free 29383K/35399K, paused 84ms
05-13 21:59:31.130: D/dalvikvm(409): GC_FOR_ALLOC freed 353K, 13% free 30855K/35399K, paused 84ms
05-13 21:59:31.137: I/dalvikvm-heap(409): Grow heap (frag case) to 32.266MB for 2179600-byte allocation
05-13 21:59:31.287: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 7% free 32983K/35399K, paused 82ms
05-13 21:59:31.538: D/dalvikvm(409): GC_CONCURRENT freed 0K, 7% free 32983K/35399K, paused 5ms+4ms
05-13 21:59:31.647: D/dalvikvm(409): GC_FOR_ALLOC freed 1549K, 12% free 31435K/35399K, paused 92ms
05-13 21:59:31.692: I/dalvikvm-heap(409): Grow heap (frag case) to 33.028MB for 2384216-byte allocation
05-13 21:59:31.880: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 11% free 33764K/37767K, paused 100ms
05-13 21:59:32.057: D/dalvikvm(409): GC_CONCURRENT freed <1K, 11% free 33764K/37767K, paused 4ms+4ms
05-13 21:59:32.307: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 11% free 33764K/37767K, paused 108ms
05-13 21:59:32.377: I/dalvikvm-heap(409): Grow heap (frag case) to 37.073MB for 4241380-byte allocation
05-13 21:59:32.547: D/dalvikvm(409): GC_FOR_ALLOC freed 0K, 10% free 37906K/41927K, paused 97ms
05-13 21:59:32.797: D/dalvikvm(409): GC_CONCURRENT freed 0K, 10% free 37906K/41927K, paused 4ms+14ms
05-13 21:59:34.747: D/dalvikvm(409): GC_FOR_ALLOC freed 2329K, 13% free 36533K/41927K, paused 98ms
05-13 21:59:35.037: D/dalvikvm(409): GC_CONCURRENT freed 1304K, 12% free 37261K/41927K, paused 4ms+4ms
05-13 21:59:42.547: D/dalvikvm(409): GC_FOR_ALLOC freed 337K, 11% free 37524K/41927K, paused 88ms
05-13 21:59:42.607: I/dalvikvm-heap(409): Grow heap (frag case) to 41.255MB for 4776976-byte allocation
05-13 21:59:42.801: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 10% free 42188K/46599K, paused 104ms
05-13 21:59:43.021: D/dalvikvm(409): GC_CONCURRENT freed <1K, 10% free 42188K/46599K, paused 4ms+4ms
05-13 21:59:43.180: D/dalvikvm(409): GC_FOR_ALLOC freed <1K, 10% free 42189K/46599K, paused 98ms
05-13 21:59:43.180: I/dalvikvm-heap(409): Forcing collection of SoftReferences for 8494048-byte allocation
05-13 21:59:43.327: D/dalvikvm(409): GC_BEFORE_OOM freed 8K, 10% free 42180K/46599K, paused 143ms
05-13 21:59:43.327: E/dalvikvm-heap(409): Out of memory on a 8494048-byte allocation.
05-13 21:59:43.337: I/dalvikvm(409): "main" prio=5 tid=1 RUNNABLE
05-13 21:59:43.337: I/dalvikvm(409):   | group="main" sCount=0 dsCount=0 obj=0x4001b5c8 self=0x125d8
05-13 21:59:43.337: I/dalvikvm(409):   | sysTid=409 nice=0 sched=0/0 cgrp=default handle=-1342913432
05-13 21:59:43.337: I/dalvikvm(409):   | schedstat=( 10690152881 5424008534 597 ) utm=864 stm=205 core=0
05-13 21:59:43.337: I/dalvikvm(409):   at android.graphics.Bitmap.nativeCreate(Native Method)
05-13 21:59:43.337: I/dalvikvm(409):   at android.graphics.Bitmap.createBitmap(Bitmap.java:604)
05-13 21:59:43.337: I/dalvikvm(409):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
05-13 21:59:43.337: I/dalvikvm(409):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
05-13 21:59:43.337: I/dalvikvm(409):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
05-13 21:59:43.347: I/dalvikvm(409):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
05-13 21:59:43.347: I/dalvikvm(409):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
05-13 21:59:43.347: I/dalvikvm(409):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:738)
05-13 21:59:43.347: I/dalvikvm(409):   at android.content.res.Resources.loadDrawable(Resources.java:1918)
05-13 21:59:43.347: I/dalvikvm(409):   at android.content.res.Resources.getDrawable(Resources.java:655)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.ImageView.resolveUri(ImageView.java:510)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.ImageView.setImageResource(ImageView.java:289)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.ImageSwitcher.setImageResource(ImageSwitcher.java:41)
05-13 21:59:43.357: I/dalvikvm(409):   at gaurav.rapp.swamiji.BeWithSwamijiActivity$1.onItemClick(BeWithSwamijiActivity.java:39)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.AdapterView.performItemClick(AdapterView.java:282)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.Gallery.onSingleTapUp(Gallery.java:867)
05-13 21:59:43.357: I/dalvikvm(409):   at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
05-13 21:59:43.357: I/dalvikvm(409):   at android.widget.Gallery.onTouchEvent(Gallery.java:842)
05-13 21:59:43.377: I/dalvikvm(409):   at android.view.View.dispatchTouchEvent(View.java:4609)
05-13 21:59:43.377: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
05-13 21:59:43.377: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
05-13 21:59:43.377: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.387: I/dalvikvm(409):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.387: I/dalvikvm(409):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1709)
05-13 21:59:43.407: I/dalvikvm(409):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1264)
05-13 21:59:43.407: I/dalvikvm(409):   at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
05-13 21:59:43.407: I/dalvikvm(409):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1682)
05-13 21:59:43.417: I/dalvikvm(409):   at android.view.View.dispatchPointerEvent(View.java:4677)
05-13 21:59:43.417: I/dalvikvm(409):   at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2392)
05-13 21:59:43.417: I/dalvikvm(409):   at android.view.ViewRoot.handleMessage(ViewRoot.java:2054)
05-13 21:59:43.417: I/dalvikvm(409):   at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 21:59:43.417: I/dalvikvm(409):   at android.os.Looper.loop(Looper.java:132)
05-13 21:59:43.417: I/dalvikvm(409):   at android.app.ActivityThread.main(ActivityThread.java:4123)
05-13 21:59:43.417: I/dalvikvm(409):   at java.lang.reflect.Method.invokeNative(Native Method)
05-13 21:59:43.417: I/dalvikvm(409):   at java.lang.reflect.Method.invoke(Method.java:491)
05-13 21:59:43.417: I/dalvikvm(409):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-13 21:59:43.417: I/dalvikvm(409):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-13 21:59:43.417: I/dalvikvm(409):   at dalvik.system.NativeStart.main(Native Method)
05-13 21:59:43.417: D/AndroidRuntime(409): Shutting down VM
05-13 21:59:43.417: W/dalvikvm(409): threadid=1: thread exiting with uncaught exception (group=0x40014760)
05-13 21:59:43.467: E/AndroidRuntime(409): FATAL EXCEPTION: main
05-13 21:59:43.467: E/AndroidRuntime(409): java.lang.OutOfMemoryError
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.Bitmap.nativeCreate(Native Method)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.Bitmap.createBitmap(Bitmap.java:604)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:738)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.content.res.Resources.loadDrawable(Resources.java:1918)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.content.res.Resources.getDrawable(Resources.java:655)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.ImageView.resolveUri(ImageView.java:510)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.ImageView.setImageResource(ImageView.java:289)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.ImageSwitcher.setImageResource(ImageSwitcher.java:41)
05-13 21:59:43.467: E/AndroidRuntime(409):  at gaurav.rapp.swamiji.BeWithSwamijiActivity$1.onItemClick(BeWithSwamijiActivity.java:39)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.AdapterView.performItemClick(AdapterView.java:282)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.Gallery.onSingleTapUp(Gallery.java:867)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.widget.Gallery.onTouchEvent(Gallery.java:842)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.View.dispatchTouchEvent(View.java:4609)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
05-13 21:59:43.467: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1709)
05-13 21:59:43.467: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1264)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
05-13 21:59:43.467: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1682)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.View.dispatchPointerEvent(View.java:4677)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2392)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2054)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.os.Looper.loop(Looper.java:132)
05-13 21:59:43.467: E/AndroidRuntime(409):  at android.app.ActivityThread.main(ActivityThread.java:4123)
05-13 21:59:43.467: E/AndroidRuntime(409):  at java.lang.reflect.Method.invokeNative(Native Method)
05-13 21:59:43.467: E/AndroidRuntime(409):  at java.lang.reflect.Method.invoke(Method.java:491)
05-13 21:59:43.467: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-13 21:59:43.467: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-13 21:59:43.467: E/AndroidRuntime(409):  at dalvik.system.NativeStart.main(Native Method)
05-13 21:59:46.117: I/Process(409): Sending signal. PID: 409 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:46:44.447

> 8494048 字节分配内存不足。

不要尝试加载 8MB 位图！将您的资产调整为更合适的大小，或查看 BitmapFactory.Options 以缩小您尝试加载的任何内容。

# jquery - 禁用 jQuery UI 单选按钮不起作用

> ID：10573415
> 
> 赞同：0
> 
> 时间：2012-05-13T16:39:50.710
> 
> 标签：jquery, jquery-ui

如何禁用jquery单选按钮？以下不起作用：

```
<input type="radio" id="myButton" name="myButton" />

$("#myButton").attr({disabled: true}); 
```

以下禁用了按钮，但它破坏了按钮的布局，可能是因为它的 RADIO 按钮：

```
$("#myButton").button("option", "disabled", true ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:42:23.170

```
$("#myButton").attr('disabled',true); 
```

示例：http: [//jsfiddle.net/eUgdm/](http://jsfiddle.net/eUgdm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:44:18.180

```
$("#myButton").button({disabled:true}); 
```

# c# - 如何在gridview中显示父对象属性？ASP.NET

> ID：10573418
> 
> 赞同：0
> 
> 时间：2012-05-13T16:40:11.150
> 
> 标签：c#, asp.net, one-to-many

假设我有一张员工表和一张公司表。每个员工都属于一家公司，因此在公司表的员工表中有一个外键列。

我在 default.aspx 上为员工创建了一个 gridview 组件，并使用 sqldatasource 将其绑定到数据库表。所以我可以看到所有的数据，但我希望 gridview 显示用户所属的公司名称而不是 company_id 字段。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:23:36.067

您应该在数据层而不是 UI 中处理它。在 SqlDataSource 的 SelectCommand 属性中使用 SQL Join。

有关 SQL 连接类型的更多信息：

[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# ruby-on-rails - 查询具有相同标题的条目

> ID：10573419
> 
> 赞同：0
> 
> 时间：2012-05-13T16:40:34.463
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb

我正在编写网站[http://Meer.li](http://Meer.li)，这是一个用户可以上传设计的网站。

在我的设计模型中，我需要找到具有相同标题的设计并将它们分组。我该如何进行这样的查询？

现在我只有：

```
@designs = Design.order_by( :created_at, :desc ) 
```

我正在运行 rails 3.2、ruby 1.9.3 并且我正在使用 mongoid 作为数据库。

**进一步说明：**

对不起，如果我不够具体。我有很多设计，其中一些设计具有相同的标题。首先，我想找到所有具有相同标题的设计。其次，我想将这些设计分组到一个数组中，因此我不需要多个数组来获取我的设计。最后一件事是，具有相同标题的设计仅应在由同一用户制作时进行分组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:12:55.200

如果我的问题正确，这应该可以解决问题：

```
@designs = Design.where(:title => "someTitle").order_by( :created_at, :desc ) 
```

**更新：**

所以也许这行得通

```
Design.select("title, count(title) as title_count").group(:title).having("title_count > 1") 
```

从来没有用 mongo db 尝试过这个 - 也许它可以工作，或者它可以帮助你适应你的需要

希望这可以帮助！

# windows - 保证 Windows 文件缩略图周围没有边框

> ID：10573420
> 
> 赞同：1
> 
> 时间：2012-05-13T16:40:35.677
> 
> 标签：windows, thumbnails

我正在尝试从最大为 256x256 的文件中获取缩略图，我可以保证它周围没有丑陋的边框。

代替能够做到这一点，我可以检测边框并手动删除它，但这是一种丑陋的做事方式，并且不能很好地移植到不同的 Windows 版本。

我目前正在使用 抓取缩略图`IShellItemImageFactory::GetImage`。

据我所知，没有办法确定 Windows 是否发现有必要在不够大的图标周围放置边框。如果有人能告诉我我错了并让我知道如何以正确的方式做，我将不胜感激。

# objective-c - 如何将标签栏推送到其他视图控制器

> ID：10573421
> 
> 赞同：1
> 
> 时间：2012-05-13T16:41:10.870
> 
> 标签：objective-c, xcode, cocoa, ios5

我有一个标签栏完全工作，但我怎样才能将标签栏项目推送到另一个视图控制器？

代码：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {

    switch (item.tag) {
        case 0:
            break;
        case 1:

            break;
        case 2:

            break;
        case 3:
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:51:51.907

使用 UITabBarController。创建它，创建您想要的自定义视图控制器，然后执行：

```
tabBarController.viewControllers = [NSArray arrayWithObjects:customController1,
customController2, customController3, nil]; 
```

然后获取对窗口的访问权并将 UITabBarController 放入窗口，如下所示：

```
[window addSubview:tabBarController.view]; 
```

# c# - 如何读取自定义数据类型

> ID：10573423
> 
> 赞同：0
> 
> 时间：2012-05-13T16:41:17.780
> 
> 标签：c#, wcf, windows-phone-7, windows-phone-7.1, custom-attributes

我是从 WCF 创建的，我可以知道如何专门读取数据吗？

```
[DataContract]
public class UserData
{
    [DataMember]
    public int userID { get; set; }

    [DataMember]
    public string name { get; set; }

    [DataMember]
    public string email { get; set; }

    [DataMember]
    public string contact { get; set; }

    [DataMember]
    public string status { get; set; }
} 
```

这是 WCF 方面并从 WCF 返回，我想从 Window 手机中读取此内容。我可以知道有一些例子吗？谢谢你的回复

**更新**

我要使用数据的电话部分中的代码

```
 private Service1Client _serviceClient;
    public Login()
    {
        InitializeComponent();
        _serviceClient = new Service1Client();
        _serviceClient.LoginUserCompleted += new EventHandler<LoginUserCompletedEventArgs>(_serviceClient_LoginUserCompleted);

    }

    private void loginBtn_Click(object sender, RoutedEventArgs e)
    {
        _serviceClient.LoginUserAsync(txtEmail.Text, txtPassword.Password);
    }

    private void _serviceClient_LoginUserCompleted(object sender, LoginUserCompletedEventArgs e)
    {

        if (e.Error == null && e.Result != null)
        { 
```

> ```
>  (App.Current as App).MyUserID = 16;
>             MessageBox.Show("Welcome " + e.Result + "!");
>             //ContentPanel.Visibility = Visibility.Collapsed;
>             //Data.Visibility = Visibility.Visible;
>             //Testing.ItemsSource = e.Result; 
> ```

想知道如何使这几行代码相应地读取数据，**将其放入列表或可以提取特定数据**，目前这几行代码给了我这个答案::

> ```
>  WCFReference.UserData 
> ```

```
 }
        else
        {
            MessageBox.Show(e.Error.InnerException.Message + " Couldn't Login, Please try again =D");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:37:03.397

如果您使用的是 SOAP 协议，您可以构建一个 WSDL 来描述 Web 服务，或者您可以根据您对 Web 服务的了解在客户端上创建自定义类。

如果您使用的是 REST 协议（这将是 WP7 应用程序的最佳替代方案），您必须根据您的知识在客户端上创建类，因为没有像 WSDL 这样的东西可以描述 REST Web 服务。

这是你的一个开始。

```
public class UserData
{
    public int userID { get; set; }
    public string name { get; set; }
    public string email { get; set; }
    public string contact { get; set; }
    public string status { get; set; }
} 
```

现在，您只需将来自 Web 服务请求的响应解析为 UserData 类，并且您已准备就绪。

正如一些人指出的那样，如果您愿意，可以将 Web 服务用作服务参考，但有时它只会把事情搞砸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:14:28.557

您可以通过创建服务引用（代理）来使用公开的 Web 服务。

查看以下网址

*   [博文](http://hadyelsahar.wordpress.com/2011/10/08/webservices-in-wp7/)

*   [MSDN 链接](http://msdn.microsoft.com/en-us/library/ff637518%28v=vs.92%29.aspx#BKMK_WebandDataServices)

# javascript - 我的 ajax/jquery 函数不适用于动态加载的分页内容

> ID：10573431
> 
> 赞同：0
> 
> 时间：2012-05-13T16:42:56.273
> 
> 标签：javascript, jquery, ajax, dom, javascript-events

我记得以前遇到过这个问题，但我不知道它在哪个项目上，也不知道我是如何解决的。

我有一个 ajax '添加到收藏夹' 按钮，我也有无限滚动，当您到达页面底部时，ajax 会加载页面。问题是ajax不适用于新附加的内容

```
// Favorites
  $('.res-list .star').click(function(){
    var starLink = $(this);
    var listItem = $(this).parent().parent();

    if ($(starLink).hasClass('starred')) {
       $(starLink).removeClass('starred');
     } else {
       $(starLink).addClass('starred');
     }
     $.ajax({
       url: '/favorites/?id=' + $(starLink).attr('data-id'),
       type: 'PUT',
       success: function() {

         if ($(starLink).hasClass('starred')) {
           $(listItem).animate({
             backgroundColor: '#FFF8E4'
           }, 400);
         } else {
           $(listItem).animate({
             backgroundColor: '#ffffff'
           }, 400);
         }
       }
     });
     return false;
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T16:46:38.630

您需要现场活动

```
$('.res-list').on('click', '.star', function() {

   // code here
}); 
```

或使用委托（）

```
$('.res-list').delegate('.star', 'click', function() {

       // code here
    }); 
```

[阅读委托（）](http://api.jquery.com/delegate/)

[阅读关于 on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:52:32.477

.bind() 方法会将事件处理程序附加到所有匹配的锚点！这是不好的。隐式迭代所有这些项目以附加事件处理程序不仅代价高昂，而且由于它一遍又一遍地使用相同的事件处理程序，这也是一种浪费。

.delegate() 方法的行为方式与 .live() 方法类似，但您可以选择锚定位置，而不是将选择器/事件信息附加到文档。就像 .live() 方法一样，这种技术使用事件委托来正常工作。

# iphone - NSString sizeWithFont 行距

> ID：10573436
> 
> 赞同：1
> 
> 时间：2012-05-13T16:43:59.643
> 
> 标签：iphone, objective-c, ios, core-text, uifont

我有一个 UITableView ，其中每个单元格都使用 Core Text 来绘制一些文本。在计算返回 heightForRow 的高度时，我使用 NSString sizeWithFont 来确定单元格的高度。但是，在我的核心文本绘图中，我将每行之间的间距增加了几位小数。

问题是，我怎样才能在我的 heightForRow 方法 sizeWithFont 中弥补这一点，以便除了默认字体行间距之外还考虑行间距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:48:25.127

如果你使用 Core Text 来绘制文本，你应该使用 Core Text 来计算文本的高度。查看`CTFramesetterSuggestFrameSizeWithConstraints`功能。

# c# - 如何将 XAML 文本框绑定到自定义对象？

> ID：10573445
> 
> 赞同：0
> 
> 时间：2012-05-13T16:46:01.997
> 
> 标签：c#, wpf, xaml, data-binding

好的，我认为这将是小菜一碟，但显然它不适合（我是 XAML/WPF 新手，顺便说一句）

我有两个 WPF 窗口，比如 Window1 和 EditCustomObjectWindow。后者需要编辑 Window1 提供的 CustomObject 实例。（我遗漏了很多与这个问题无关的代码）

Window1.xaml.cs：

```
// first window, holding an instance of CustomObject
public partial class Window1 : Window {
    public CustomObject CustomObject {
        get;
        set;
    }

    void buttonClicked(object sender, RoutedEventArgs e) {
        new Windows(CustomObject).ShowDialog();
    }

} 
```

EditCustomObjectWindow.xaml.cs：

```
public partial class EditCustomObjectWindow : Window {
    public CustomObject CustomObject {
        get;
        set;
    }
    public EditCustomObjectWindow (CustomObject customObject) {
        this.CustomObject = customObject;
    }

} 
```

EditCustomObjectWindow.xaml：

```
<TextBox
        Height="22"
        Margin="5"
        Width="150"
        Text="{Binding Path=CustomObject.SomeProperty, Mode=TwoWay, PresentationTraceSources.TraceLevel=High}"></TextBox> 
```

当然，CustomObject 具有 SomeProperty 的公共访问器。单击按钮时，将跟踪以下信息到输出窗口。但不知何故，我无法将其转化为问题的根源。

```
System.Windows.Data Warning: 54 : Created BindingExpression (hash=31654880) for Binding (hash=40799911)
System.Windows.Data Warning: 56 :   Path: 'CustomObject.SomeProperty'    System.Windows.Data Warning: 59 : BindingExpression (hash=31654880): Default update trigger resolved to LostFocus
System.Windows.Data Warning: 60 : BindingExpression (hash=31654880): Attach to         
System.Windows.Controls.TextBox.Text (hash=58067579)
System.Windows.Data Warning: 65 : BindingExpression (hash=31654880): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=31654880): Found data context element: TextBox (hash=58067579) (OK)
System.Windows.Data Warning: 69 : BindingExpression (hash=31654880): DataContext is null
System.Windows.Data Warning: 63 : BindingExpression (hash=31654880): Resolve source deferred
System.Windows.Data Warning: 65 : BindingExpression (hash=31654880): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=31654880): Found data context element: TextBox (hash=58067579) (OK)
System.Windows.Data Warning: 69 : BindingExpression (hash=31654880): DataContext is null
System.Windows.Data Warning: 65 : BindingExpression (hash=31654880): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=31654880): Found data context element: TextBox (hash=58067579) (OK)
System.Windows.Data Warning: 69 : BindingExpression (hash=31654880): DataContext is null
System.Windows.Data Warning: 65 : BindingExpression (hash=31654880): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=31654880): Found data context element: TextBox (hash=58067579) (OK)
System.Windows.Data Warning: 69 : BindingExpression (hash=31654880): DataContext is null
System.Windows.Data Warning: 65 : BindingExpression (hash=31654880): Resolving source  (last chance)
System.Windows.Data Warning: 68 : BindingExpression (hash=31654880): Found data context element: TextBox (hash=58067579) (OK)
System.Windows.Data Warning: 76 : BindingExpression (hash=31654880): Activate with root item <null>
System.Windows.Data Warning: 104 : BindingExpression (hash=31654880):   Item at level 0 is null - no accessor
System.Windows.Data Warning: 101 : BindingExpression (hash=31654880): Replace item at level 1 with {NullDataItem}
System.Windows.Data Warning: 78 : BindingExpression (hash=31654880): TransferValue - got raw value {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 86 : BindingExpression (hash=31654880): TransferValue - using fallback/default value ''
System.Windows.Data Warning: 87 : BindingExpression (hash=31654880): TransferValue - using final value '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:02:05.760

在您的 Binding 中，您必须将 RelativeSource 设置为祖先 EditCustomObjectWindow，如下所示：

```
{Binding Path=CustomObject.SomeProperty, RelativeSource={RelativeSource AncestorType={x:Type local:EditCustomObjectWindow}}, Mode=TwoWay, PresentationTraceSources.TraceLevel=High} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:53:31.853

问题是您传入的实例`new EditCustomObjectWindow(CustomObject).ShowDialog);` 为空。

拥有与类型同名的属性可能会有点令人困惑，也许你知道 `new EditCustomObjectWindow(new CustomObject()).ShowDialog);`吗？

在日志中您可以看到：

```
System.Windows.Data Warning: 76 : BindingExpression (hash=31654880): Activate with root item <null> 
System.Windows.Data Warning: 104 : BindingExpression (hash=31654880):   Item at level 0 is null - no accessor 
System.Windows.Data Warning: 101 : BindingExpression (hash=31654880): Replace item at level 1 with {NullDataItem} 
```

告诉我们`CustomObject`找到了“第一个”属性 ( )，但它为空，因此该值被替换为`NullDataItem`

# android - LinearLayout 中的软键盘移动按钮

> ID：10573447
> 
> 赞同：0
> 
> 时间：2012-05-13T16:46:06.877
> 
> 标签：android, android-layout, button, android-linearlayout, android-softkeyboard

嗨，我正在为 Uni 项目设计一个导航应用程序。当按钮出现时，我无法将其留在软键盘下方。我使用 LinearLayout 作为框架。我进行了很多搜索并尝试了不同的技术，但似乎没有任何效果。

[问题的图片](http://i.imgur.com/E1I9F.png)

这是我的 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="0px"
        android:layout_height="0px"
        android:focusable="true"
        android:focusableInTouchMode="true" />

    <requestFocus />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/navi_searchfield1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Current location" >
        </EditText>

        <ListView
            android:id="@+id/navi_listview1"
            android:layout_width="fill_parent"
            android:layout_height="0dp">
        </ListView>

        <EditText
            android:id="@+id/navi_searchfield2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Destination" />

        <ListView
            android:id="@+id/navi_listview2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </ListView>

    </LinearLayout>

    <Button
        android:id="@+id/start_navigation"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:background="@drawable/start"
        android:textColor="#ffffff"
        android:text="Start navigation" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:18:06.123

在 AndroidManifest.xml 中添加`android:windowSoftInputMode="adjustPan"`到您的活动中：

```
 <activity
                android:windowSoftInputMode="adjustPan"
.
.
.                
    </activity> 
```

这将阻止 SoftKeyboard 移动您的按钮，从而为您提供如下输出： ![在此处输入图像描述](../Images/8ad72dc32f508d35eee74fd1b693ce77.png)

即使通过在屏幕上滚动显示键盘，您也可以使用该按钮。但我认为您可能无法在按钮上方显示键盘，因为我使用 SoftKeyboard 并且它使用：

```
 android:layout_alignParentBottom="true" 
```

所以，你只能保证你的布局不会被软键盘推送。

# cocoa - 拖动图像后评估 If 语句？

> ID：10573451
> 
> 赞同：0
> 
> 时间：2012-05-13T16:46:38.870
> 
> 标签：cocoa, drag-and-drop, uiimageview

我正在屏幕上拖动一个 imageView，效果很好。目前，它正在评估每次图像移动时的 if 语句，但我希望它在用户将手指从屏幕上抬起时检查它。我该怎么办？我想也许使用 touchesEnded:withEvent 但它看起来不像是在抬起手指时被调用。
我的代码有点复杂（嗯，对我来说看起来就是这样！）但如果这有帮助，我会发布它。基本上，在 handlePanGesture 方法中，它根据字典检查坐标，如果为真，将“捕捉”到正确的位置。我想检查用户何时抬起的原因是，如果他们把它放在错误的位置，我想将它动画化回原来的位置。
非常感谢您阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:45:45.217

我认为您需要在动作方法中检查手势识别器的状态，gestureRecognizer.state == UIGestureRecognizerStateEnded。我的理解是，如果您将 geture 识别器子类化，您只能使用 touchesEnded:withEvent。

# php - Concrete5 - 查询作曲家和检索数据列表的方法是什么

> ID：10573455
> 
> 赞同：0
> 
> 时间：2012-05-13T16:47:36.660
> 
> 标签：php, concrete5

在我的具体5（最新）中，我有几个作曲家（博客、新闻等等）。
我想**通过 php 代码**查询数据库并检索作曲家条目列表。
最重要的是，新闻作曲家之一 Fields 是布尔值 - DisplayOnHomePage。

我想要做的是在主页上显示标记为 DisplayOnHomePage=true 的新闻（标题和图像）列表。
有没有官方的API可以做到这一点？

如果没有，有没有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:40:11.763

我建议使用页面列表（块或模型）

这允许您按任意数量的事物（包括属性）过滤页面。

```
$pl = new Pagelist();
$pl->ignoreAliases();
$pl->filterByPath('/some/page');
$pl->filterByCollectionTypeHandle('some_handle');
$pl->filterByDisplayOnHomePage();
$pages = $pl->get($numofitems); 
```

您可以过滤很多东西，唯一真正需要的就是该代码的第一行和最后一行。

只是让你知道，那是使用模型，而不是块。

在你这样做之后，`$pages`是一个页面对象数组。

麦克风

# css - Wordpress 特色图片未在 IE8 中显示

> ID：10573458
> 
> 赞同：0
> 
> 时间：2012-05-13T16:47:47.130
> 
> 标签：css, wordpress, internet-explorer-8

我在使用 IE8 时遇到问题：它没有在这个网站上显示特色图片：[http ://www.melisayavas.com/news/](http://www.melisayavas.com/news/)

这是我的functions.php中用于输出特色图像的代码：

```
if ( function_exists( 'add_theme_support' )) {
    add_theme_support( 'post-thumbnails' );
}

if ( function_exists('add_image_size')) {
    add_image_size('news-thumb', 200, 200);
} 
```

这是用于特色图片的 CSS：

```
.post-thumb {
    float: left; 
    padding: 10px;
} 
```

特别是对于 IE8，我有这个 CSS：

```
.post-thumb img {
    float: left\9;
    margin-top: 10px\9;
    margin-right: 10px\9;
} 
```

如果我向 中添加边距或宽度`.post-thumb element`，图像会显示在 IE8 上，但我不需要固定的宽度或高度。我不明白为什么它不拾取图像的宽度和高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:57:43.877

问题是由这个规则引起的：

```
img, object, embed {
    max-width: 100%;
} 
```

如果您`img`从此规则中删除 ，图像将出现在 IE8 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:30:13.367

您的代码将呈现为`<img width="118" height="200"`

和没有。`px`_ 但是根据 Chrome 和 Firefox 的属性，它会自动读取为.`width``height``width="118px" height="200px"`

但是 IE 没有这个内置属性。这就是为什么它没有显示您的图像。

尝试更新您的代码以添加`px`到图像大小。

# jython - jython 访问超类失败

> ID：10573459
> 
> 赞同：1
> 
> 时间：2012-05-13T16:47:59.157
> 
> 标签：jython, superclass

```
class  InsertRemoveJTree( JTree ):
    def setModel( self, treeModel ):
    # for reasons I don't understand, the first call below results in infinite recursion... 
    # in other words the "super" approach returns this object, not its underlying base-class 
    # object.  The second approach works as expected
        # super( InsertRemoveJTree, self ).setModel( treeModel )
        JTree.setModel( self, treeModel ) 
```

有人知道这是怎么回事吗？“setModel”是 dir() 列出的 InsertRemoveJTree 对象的一个​​属性。

JTree 中的许多其他方法也可以使用“超级”方法正常工作。

我也尝试过：

```
super(InsertRemoveJTree, self ).model = treeModel 
```

...但它声称没有attr“模型”

*之后*

我得出的结论是，这是由于在预先存在的 Java 类上调用方法而造成的限制，并且我的声明“JTree 中的许多其他方法也可以使用“超级”方法正常工作。” 是错的。有一些受保护的方法是通过 super_XXX 调用的*（例如 DefaultTreeModel: super* _fireTreeNodesInserted），它们会给 Jython 新手用户带来不少问题，直到您开始使用 dir(inserted) 检查实例的属性。但作为一项规则，这似乎是一个普遍的限制：即不能使用“super(PresentClass, self)...”调用 Jython 中子类化的 Java 类的基类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:35:30.270

您的第一次调用意味着“调用 InsertRemoveJTree 中定义的 setModel”，即递归调用。您想`super( JTree, self ).setModel( treeModel )`调用 JTree 中定义的那个。这是[super 的 Python 文档](http://docs.python.org/library/functions.html#super)。

# vb.net - VB silverlight for windows phone "LateBinding"

> ID：10573463
> 
> 赞同：1
> 
> 时间：2012-05-13T16:48:26.687
> 
> 标签：vb.net, silverlight, windows-phone-7

您好，我正在为 windows phone 开发一个 vb 应用程序，我需要这样做：

 `Private Sub ItemTap(sender As Object, e As GestureEventArgs) Dim url = "/" & sender.Content & ".xaml" Me.NavigationService.Navigate(url) End Sub`

我的页面中有一个列表框，列表框的内容是具有两个属性的项目：名称和标签

我想使用这个子导航到这个 paga：/name.xaml 但它有一个错误说 url 不应该是一个字符串，另一个说目标平台不支持后期绑定：S 有什么想法吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:24:44.470

您需要声明 url... 作为 Uri：

```
Dim url as New Uri("/" & sender.Content & ".xaml", UriKind.Relative) 
```

# qt - Qml 可滑动页面

> ID：10573464
> 
> 赞同：2
> 
> 时间：2012-05-13T16:48:29.977
> 
> 标签：qt, menu, symbian, nokia, qml

如果我想创建一个基本上类似于 Symbian 主屏幕的可轻弹循环页面菜单，我会使用什么元素？我可能会如何使用它？

我尝试在 QML 中创建“页面”元素，然后创建一个带有 3 个页面的可滑动元素，当您轻弹页面时，页面会根据列表进行更改，然后 fickable 居中，允许您循环浏览页面但它不是几乎与原生 Symbian 主屏幕一样流畅。它不会自动完成对下一页的轻弹；它也不会检测到导致页面不被更改和居中的慢速轻弹，这意味着您必须朝另一个方向轻弹然后返回。必须使 flickable 上的页面等于列表中的另一个页面也有点令人困惑，因此我希望能够将所有页面放在元素上，而不必交换页面。我没有

我想我应该使用 Listview 之类的东西，但我不知道怎么做。如果您对此有任何想法或经验，请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:34:08.157

是的，您应该使用`ListView`. `snapMode`设置`ListView.SnapOneItem`为.

# javascript - div 刷新只工作一次

> ID：10573467
> 
> 赞同：0
> 
> 时间：2012-05-13T16:49:44.617
> 
> 标签：javascript, load, refresh

我有一个按钮设置为在单击某个 div 时刷新它。问题是它只能工作一次。

单击按钮时我需要刷新的 div：

```
<div id="refresh">

    <?php include('space.php'); ?>

</div> 
```

刷新 div 的脚本：

```
jQuery(function() {
    jQuery("#go").click(function() {
        jQuery("#refresh").load("space.php");
    });
}); 
```

和 space.php 的内容：

```
 <?php

    /* get disk space free (in bytes) */
    $df = disk_free_space("/home");
    /* and get disk space total (in bytes)  */
    $dt = disk_total_space("/home");
    /* now we calculate the disk space used (in bytes) */
    $du = $dt - $df;
    /* percentage of disk used - this will be used to also set the width % of the progress bar */
    $dp = sprintf('%.2f',($du / $dt) * 100);

    /* and we formate the size from bytes to MB, GB, etc. */
    $df = formatSize($df);
    $du = formatSize($du);
    $dt = formatSize($dt);

    function formatSize( $bytes )
    {
            $types = array( 'B', 'KB', 'MB', 'GB', 'TB' );
            for( $i = 0; $bytes >= 1024 && $i < ( count( $types ) -1 ); $bytes /= 1024, $i++ );
                    return( round( $bytes, 2 ) . " " . $types[$i] );
    }

    ?>

        <table class='ipb_table' cellspacing='1'>  

                <tr>

                    <td class='row2' colspan='2'>

                        <div class='progress'>

                                <div class='prgbar'></div>

                        </div>

                    </td>

                <tr>

                    <td class='row2'>

                        Disk Space:

                    </td>

                    <td class='row2'>

                        <?php echo "$dt"; ?>

                    </td>

                </tr>

                <tr>

                    <td class='row2'>

                        Free: 

                    </td>

                    <td class='row2'>

                        <?php echo "$df"; ?>

                    </td>

                </tr>

                <tr>

                    <td class='row2'>

                        Used:

                    </td>

                    <td class='row2'>

                        <?php echo "$du"; ?>

                    </td>

                </tr>

                <tr>

                    <td class='row2' colspan='2' align='center'>

<a class='ipsButton' id='go'>Refresh<a>

                    </td>

                </tr>                           

        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:56:57.573

试试这个，它可能会起作用。

```
jQuery(function() {
    jQuery("#go").on('click', function() {
        jQuery("#refresh").load("space.php");
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:57:56.653

删除`<?php include('space.php'); ?>`
Jquery 很好。测试一下

```
 jQuery(function() {
    var i=1;
    jQuery("#go").click(function() {
        jQuery("#refresh").html(i);
        i++;
    });
});​ 
```

[jSfiddle](http://jsfiddle.net/NaAG3/2/)

确保`space.php`在同一台服务器上。第二件事是那`.load`不是替换`php include`. 这样做`jQuery Ajax`

# objective-c - 使用不同的 UIViewcontroller 来控制 UISearchDisplayController

> ID：10573470
> 
> 赞同：2
> 
> 时间：2012-05-13T16:50:11.153
> 
> 标签：objective-c, ios

我有一个带有 nsfetchedresultscontroller 的表格视图。我想用 uisearchdisplaycontroller 设置搜索。我想将搜索结果分成不同的视图控制器文件。我能够做到这一点，但是如果我将其设置`contentestcontroller`为另一个控制器，`self`那么委托方法将起作用，但 tableview 不显示。我能够通过将 uisearchbar 委托设置为 self 并将 serchtext 传递给另一个 tableview 控制器来使此设置正常工作，但我希望它全部在搜索 tableview 控制器中工作。

我是否需要建立一些联系，或者总的来说这不是一个好主意？

这是一些代码

这是主控制器的 viewdidload

 `````
- (void)viewDidLoad 
{
    [super viewDidLoad];
    self.peopleListSearch = [[PeopleListSearchViewController alloc] init];

    self.peopleSearchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    self.debug = NO;
    self.isSearching = NO;
    self.peopleSearchBar.delegate = self.peopleListSearch;
    self.searchBarController = [[UISearchDisplayController alloc]initWithSearchBar:self.peopleSearchBar contentsController:self.peopleListSearch];
    self.searchBarController.searchResultsDelegate = self.peopleListSearch;
    self.searchBarController.searchResultsDataSource = self.peopleListSearch;
</code> 
```

This is the main tableview controller which works.

 ````
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{

    self.peopleListSearch.searchTerm = searchBar.text;
    [self.peopleListSearch performSearch];
    [self.searchBarController.searchResultsTableView reloadData];
} 
````  `是否有调用方法来显示 uisearchdisplay 控制器的表格视图。

提前致谢！```

# f# - 具有多个语句的 F# lambda 表达式

> ID：10573471
> 
> 赞同：6
> 
> 时间：2012-05-13T16:50:15.240
> 
> 标签：f#

我正在学习 F# 并发现我正在写一些有用但我并不完全理解的东西。这是一个例子

```
let processArgs args =
    match args with
    | null
    | [||]          -> [fun() -> getCredentials(); home 20; mentions 20; messages 20]
    | [|"-h"|] 
    | [|"-?"|]      -> [showHelp]
    | [|"-reset"|]  -> [clearAllSettings]
    | _             -> [fun() -> printfn "%s" (String.Join(" ", args))]

[<EntryPoint>]
    let main (args:string[]) =
    try
        let actions = processArgs args
        List.iter (fun action -> action()) actions
        0
    finally
        Console.ResetColor()
        Console.CursorVisible <- true 
```

getCredentials、home、mentions、messages、showHelp 和 clearAllSettings 方法都是简单的函数，可以按照您的预期进行操作。（是的，它是一个 twitter 客户端，这不是新的“Hello World”演示吗？）

该行：

```
[fun() -> getCredentials(); home 20; mentions 20; messages 20] 
```

像我想要的那样工作。它调用 getCredentials，然后是 home，然后是提及，然后是消息

从我的角度来看，分号就像一个语句分隔符。我以前没有见过这样的描述。这就是这里发生的事情吗？

有没有更惯用的方式来写这个（换句话说，一个经验丰富的 F# 程序员看到这个会在地板上大笑）？

更多信息：我最初的意图是创建一个操作列表，然后在我发现选项时添加操作。在 C# 中，我通常会使用 List<Action>() 来执行此操作。分号的事情让我感到惊讶，因为最初我试图这样写：

```
[getCredentials; home 20; mentions 20; messages 20] 
```

但是编译器不喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:33:49.773

当你写：

```
[fun() -> getCredentials(); home 20; mentions 20; messages 20] 
```

编译器创建一个列表，其中只有一个元素是 type 的函数`unit -> unit`。`S1 ; S2`是 S1 类型为 时的序列组合`unit`，依次执行 S1 和 S2 并返回 S2 的结果。所以，三个功能`home`，居然都有签名。`mentions``messages``int -> unit`

如果你想创建一个包含 4 个不同函数的列表，它应该是：

```
[ getCredentials; // ; is optional
  fun () -> home 20; 
  fun () -> mentions 20; 
  fun () -> messages 20 ] 
```

这些函数用空格分隔以避免混淆使用；作为列表分隔符和序列组成。

由于您的示例所有列表都只有一个元素，因此可以简化很多：

```
let processArgs = function
    | [||]          -> getCredentials(); home 20; mentions 20; messages 20
    | [|"-h"|] 
    | [|"-?"|]      -> showHelp()
    | [|"-reset"|]  -> clearAllSettings()
    | args          -> printfn "%s" (String.Join(" ", args))

[<EntryPoint>]
let main (args:string[]) =
  try
    processArgs args
    0
  finally
    Console.ResetColor()
    Console.CursorVisible <- true 
```

# c++ - memcpy 大小值

> ID：10573480
> 
> 赞同：0
> 
> 时间：2012-05-13T16:51:12.917
> 
> 标签：c++, memory

我将复制收到的数据`recv()`，输入/输出缓冲区的最大大小为 MAX_PACKET。

以固定大小复制它是否安全`MAX_PACKET`？使用 memcpy 时是否需要设置正确的缓冲区大小？

```
recv(sock,recvbuf,MAX_PACKET,0);
memcpy(inbuffer,recvbuf,MAX_PACKET); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:42:24.320

您需要声明 inbuffer 至少与 MAX_PACKET char * inbuffer = new char[MAX_PACKET]; 的大小一样多的字节数

并放置在每个 recv() memset(inbuffer,0,MAX_BUFFER) 之前；将缓冲区归零，这样您就不会在收到两个数据包的情况下错误地看到前一个数据包的尾端，其中第二个比第一个短。

如果您的传入数据包没有唯一的终止字节，即 '\r' 您需要添加 int recvbytes ；recvbytes =new recv(...) 因为 recv 返回线路上接收到的字节数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:58:40.190

除非 inBuffer 至少与 MAX_PACKET 一样大。

除了 Oezbek 所说的之外，除非实际收到 0，否则 recv 也不会 0 终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:03:59.003

另一种方法

```
 std::string inbuffer; // member variable to the class
 .......
 int ret = recv(sock,recvbuff,MAX_PACKET);
 if(ret != 0)
 {
   inbuffer.insert(inbuffer.end(),recvbuff, recvbuff + ret);

 ...... // use the data.
 } 
```

这避免了使用 memcpy。无论如何，STD 库应该做聪明的事情并为你调用 memcpy/memmove :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:11:04.073

使用时有必要设置正确的缓冲区大小，`memcpy`因为`recv`它将只放入`recvbuf`当前可用的数据，并且最多为您指定的`MAX_PACKET`. 即使在另一端你正在做`send(sock,sendbuf,MAX_PACKET,0);`（并且`MAX_PACKET`在两个地方都具有相同的价值），也不是。如果您使用的是 UDP( ) 并且您的所有数据报都是 size ，
那么您的代码唯一有意义的情况是。`SOCK_DGRAM``MAX_PACKET`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T16:56:34.187

安全是的，但很浪费。也不要忘记除了从 recvbuf 实际接收到的数据之外，不要使用 inbuffer 中返回的数据。

# java - Java - 套接字和 Swing

> ID：10573482
> 
> 赞同：1
> 
> 时间：2012-05-13T16:51:28.187
> 
> 标签：java, swing, sockets, client-server

我还在学习挥杆和插座，所以请耐心等待。学习我正在制作一个聊天客户端/服务器系统。现在，我正在处理客户端。我的课是

*   **Main**（带main方法）[代码链接](http://pastebin.com/PPBJKXj9)
*   **Window**（设置 Swing 组件）[代码链接](http://pastebin.com/E4J0qrGU)
*   **ActLis**（处理来自 Window 的所有组件动作侦听器）[代码链接](http://pastebin.com/grz7b7vV)
*   **SocketManager**（管理我的套接字）[代码链接](http://pastebin.com/7jdQzBbq)

我在程序运行时设置了一个`SocketManager`对象`Main`，但是当`ActLis`需要使用该套接字时，`send a message`我不知道从`Main`. 我正在做的事情是否完全无效并且有更好的设置方法，或者有没有办法从我不知道的班级中获取我的`SocketManager`对象？*（我意识到我的代码中还有其他问题，但我只是想让套接字开始工作，我很难处理它们。）*`Main`

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:14:25.977

你有几个选择：

> 1) 在 Main 类中有一个 ActLis 对象，并将 Main 对 SocketManager 的引用传递给它

```
public class Main
{
   public static void main(String[] args)
   {
       ActList        a = new ActList(...);
       SocketManager sm = new SocketManager(...);

       a.sendMessageWithSocket(sm); //here you pass Main's reference to SocketManager 
   }                                //object to the ActLis class for use
} 
```

> 2）让ActLis类有一个SocketManager对象的引用，在它的构造函数中设置

```
public class ActLis
{
    private SocketManager sm;

    public ActLis(SocketManager sm)
    {
        this.sm = sm;
    }
} 
```

这些可能是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:37:38.210

添加到亨特麦克​​米伦的：

> 3）制作主类，单例。id est 不要让它的实例超过一个（如果我已经理解了你的目的，你不需要这个类的多个实例。）所以只需创建这个类的一个实例并将其引用保留为公共静态最终字段。（当然不要让它从这个类之外实例化：

```
 public class Main
    {
        public static final Main instance = new Main(/*args*/);

        private Main(/*args*/)
        {
            //blah blah
        }
    } 
```

这样，您就可以毫无问题地在代码中的任何位置以表单形式访问您的`Socket`字段。`Main`*

# xamarin.android - 有多少种方法可以在 monodroid 中的活动之间共享数据？

> ID：10573484
> 
> 赞同：0
> 
> 时间：2012-05-13T16:52:00.590
> 
> 标签：xamarin.android

我需要在`activities`.
我有两个`EditText`基本上是`username`，`password`
我正在使用一个 web 服务，它基于提供的用户名和密码返回一些用户信息（`DataType:String`）。就像`userid`，`useremail` `etc..`基本上是 CSV 格式
，我在整个应用程序中都需要这些信息。但我不知道哪个是更好的方法。

- 到目前为止我发现的一种方法是将[sqlite 与 MonoAndroid](https://stackoverflow.com/a/4945737/1224003)
一起使用 - 我发现的另一种方法是使用[Application 类](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data/4208947#4208947)
我今天刚开始学习 android，但我想知道是否有其他方法可以共享数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:15:37.970

正如您所提到的，全局`Application`类和数据库是共享应用程序范围数据的两种好方法。需要注意的一件事是，当应用程序处于后台时，您的 Application 类可能会被回收，因此您将丢失任何尚未持久保存到更永久的数据。

除了数据库之外，您还可以将数据持久保存到文件系统中。[这个来自 Xamarin 的配方](http://docs.xamarin.com/ios/Recipes/Network/Web_Requests/Download_a_File)有一个直接写入文件的示例。您需要进行文件访问的大多数类都可以在`System.IO`命名空间中找到。Mono for Android 还支持[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)，它提供了更高级别的 API 用于读取和写入文件。

如果您只需要在活动之间直接传递数据，则可以通过将其作为额外内容添加到意图中来实现。[这个食谱](http://docs.xamarin.com/android/recipes/Fundamentals/Activity/Pass_Data_between_Activity)解释了如何做到这一点。

如果您想以一种更受管理的方式结束对特定资源的访问，该方式可以被应用程序的其他部分甚至外部应用程序访问，您可以考虑实现一个[content provider](http://developer.android.com/guide/topics/providers/content-providers.html)。Android 本身为联系人和媒体等资源提供了几个内置的内容提供程序，如果您需要一个使用示例的示例。[这个秘籍](http://docs.xamarin.com/android/recipes/Data/ContentProviders/Read_Contacts)解释了如何从联系人提供者那里读取数据。

# python - 在 Python 中使用变量对列表进行切片

> ID：10573485
> 
> 赞同：54
> 
> 时间：2012-05-13T16:52:02.433
> 
> 标签：python, list, slice

给定一个列表

```
a = range(10) 
```

您可以使用以下语句对其进行切片

```
a[1]
a[2:4] 
```

但是，我想根据代码中其他地方设置的变量来执行此操作。我可以很容易地为第一个做到这一点

```
i = 1
a[i] 
```

但是我该怎么做呢？我尝试使用列表进行索引：

```
i = [2, 3, 4]
a[i] 
```

但这不起作用。我也尝试过使用字符串：

```
i = "2:4"
a[i] 
```

但这也行不通。

这可能吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-13T16:56:48.937

这[`slice()`](http://docs.python.org/library/functions.html#slice)就是：

```
a = range(10)
s = slice(2,4)
print a[s] 
```

这与使用`a[2:4]`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-13T16:53:28.220

为什么它必须是单个变量？只需使用两个变量：

```
i, j = 2, 4
a[i:j] 
```

如果它*真的*需要是一个单一的变量，你可以使用一个元组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T16:56:36.933

通过下面的分配，您仍然使用您显示的相同类型的切片操作，但现在使用变量作为值。

```
a = range(10)
i = 2
j = 4 
```

然后

```
print a[i:j]
[2, 3] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T17:02:47.947

```
>>> a=range(10)
>>> i=[2,3,4]

>>> a[i[0]:i[-1]]
range(2, 4)

>>> list(a[i[0]:i[-1]])
[2, 3] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-29T03:49:35.223

我最近遇到了这个问题，同时查找如何让用户通过命令行上传递的参数来模仿通常的切片语法`a:b:c`,`::c`等。

该参数被读取为字符串，我宁愿不拆分`':'`，将其传递给`slice()`等。此外，如果用户传递*单个*整数`i`，则预期含义很明显`a[i]`。然而，`slice(i)`将默认为`slice(None,i,None)`，这不是所需的结果。

在任何情况下，我能想到的最直接的解决方案是将字符串作为变量读取`st`，然后将所需的列表切片恢复为`eval(f"a[{st}]")`.

这使用了[eval()](https://docs.python.org/3/library/functions.html#eval)内置函数和一个在大括号内插值的[f 字符串。](https://cito.github.io/blog/f-strings/)`st`它精确地处理通常的以冒号分隔的切片语法，因为它只是按原样插入包含冒号的字符串。

# iphone - UIWebView 无法识别 URL 地址

> ID：10573492
> 
> 赞同：0
> 
> 时间：2012-05-13T16:52:47.503
> 
> 标签：iphone, ios, uiwebview, nsxmlparser

我已经构建了一个 XML Parse 应用程序，它从 PHP（XML 内容）文件中检索我的数据库中的一些值，在其中一个值中我有一个 URL，问题是，每次我尝试使用这个 URL 加载 webView没有任何反应！我有以下代码：

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ( [elementName isEqualToString:@"users"] ) {

        [messages addObject:[NSDictionary dictionaryWithObjectsAndKeys:msgIDEN,@"id",msgAdded,@"added",msgUsername,@"username",msgEmail,@"email",msgMainCode,@"maincode",msgPictureAddress,@"userpictureaddress",nil]];

        [[messages reverseObjectEnumerator] allObjects];

        lastId = msgId;

        [msgAdded release];
        [msgUsername release];
        [msgEmail release];
        [msgMainCode release];
        [msgPictureAddress release];

        NSLog(@"UserData:Success");
        NSString *urlAddress = msgPictureAddress;
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webViewMateus loadRequest:requestObj];

    }

    if ( [elementName isEqualToString:@"id"] )                  { inIDEN = NO;  }
    if ( [elementName isEqualToString:@"username"] )            { inUsername = NO;  }
    if ( [elementName isEqualToString:@"email"] )               { inEmail = NO;  }
    if ( [elementName isEqualToString:@"usermaincode"] )        { inMainCode = NO;  }
    if ( [elementName isEqualToString:@"userpictureaddress"] )  { inPictureAddress = NO;  }

} 
```

如何使 UIWebView 地址与我的相同`NSMutableString = userpictureaddress`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:44:54.840

如果您查看您的代码，您只是在将 msgPictureAddress 分配给 urlAddress 之前丢弃（发布）了它。你确定要在那个时候发布那些东西吗？

# ios - 以编程方式在 iPhone 上拨打紧急电话

> ID：10573502
> 
> 赞同：5
> 
> 时间：2012-05-13T16:53:49.623
> 
> 标签：ios, iphone, objective-c

我想制作一个按钮，用户可以通过该按钮拨打紧急服务。

似乎没有任何特定的方法可以调用来做到这一点，所以我想我必须使用

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

并自己分配电话号码。但是，虽然我知道这是美国的 911，英国的 999 等，但我不确定如何确定用户所在的国家/地区 - 我可以检索他们的语言环境，但如果他们手动设置语言环境或在他们的国家/地区以外旅行，这将是不可靠的。我可以解析他们的位置，但如果他们关闭 GPS 或没有互联网连接，它将无法工作。

我听说 112 现在是 GSM 手机的通用标准 - 它适用于所有 iPhone 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T18:03:23.857

我不确定如何获取不同的号码，但假设您有一组这些（比如说按国家/地区分类的字典），那么您可以使用网络信息来确定手机当前位于哪个国家/地区。

您可以通过使用 CoreTelephony 框架，特别是`CTTelephonyNetworkInfo`和`CTCarrier`类来做到这一点。这是一个小样本，它将获取当前运营商的 ISO 3166-1 国家代码。

```
CTTelephonyNetworkInfo *network = [[[CTTelephonyNetworkInfo alloc] init] autorelease];
CTCarrier *carrier = [network subscriberCellularProvider];
NSString *countryCode = [carrier isoCountryCode]; 
```

现在`countryCode`会有代码（据我所知是 Alpha-2 代码），每个国家/地区都是唯一的，[这里是这些代码的列表](http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:00:54.187

> 似乎没有任何特定的方法可以调用来做到这一点，所以我想我必须使用
> 
> [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];

这是对的。

关于拨打什么号码，我认为没有全球紧急号码。

# java - 检查字符串是否为有效整数

> ID：10573505
> 
> 赞同：0
> 
> 时间：2012-05-13T16:54:23.083
> 
> 标签：java

我想拆分一个字符串，然后检查我拆分的每个部分是数字还是标识符，这就是我到目前为止所做的:)

```
public class splitest {

public void splitfunc() {

    String str = "A:25";
    String[] temp = null;
    temp = str.split(":");

    run(temp);
}

public void run(String[] s) {

    for (int i = 0; i < s.length; i++) {

        if (s[i].equals(" ")) {   // <<<   checks if the splitted string is a digit ot not??

            System.out.println(s[i]+"  is a number");

            } else

                System.out.println(s[i]+"  is an Identfier");
    }
}

public static void main(String args[]) throws Exception {
    splitest ss = new splitest();
    ss.splitfunc();
}
  } 
```

有没有办法将字符串转换为数字然后检查或其他什么？

输出应该是这样的：这是一个标识符这是一个数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:00:01.533

```
public boolean isInteger( String input )  
{  
   try  
   {  
      Integer.parseInt( input );  
      return true;  
   }  
   catch( Exception e )  
   {  
      return false;  
   }  
}  

String[] tokens = s.split("\s+");
for (String token : tokens) {
  if (isInteger(token)) {
    System.out.println(token + " is a number");
  } else {
    System.out.println(token + " is an identifier");
  }
} 
```

# java - 完成空活动

> ID：10573506
> 
> 赞同：0
> 
> 时间：2012-05-13T16:54:39.733
> 
> 标签：java, android

我正在尝试使用活动打开屏幕。我达到了我的目标，但活动仍然存在。如果我使用完成方法，它不会被关闭。

注意：即使我 setContentView(...my xml...); 它也不起作用

```
package it.android.smartscreenon;

import android.app.Activity;
import android.os.Bundle;
import android.view.WindowManager;

public class AccendiSchermo extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
                finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:03:28.693

尝试 `System.exit(0);` 代替 `finish();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T15:28:40.043

Try to place your `finish();` function in the

```
 @Override
public void onAttachedToWindow(){
    super.onAttachedToWindow();
    Log.d("MyLog", "InActivity->onAttachedToWindow");
    finish();
} 
```

# jquery - 如何将文本字符串添加到日期列并在 Tablesorter 中调整排序顺序

> ID：10573510
> 
> 赞同：1
> 
> 时间：2012-05-13T16:54:55.527
> 
> 标签：jquery, regex, formatting, tablesorter

我最近[在我的 jQuery/tablesorter 表上获得了正确的日期格式](https://stackoverflow.com/questions/10465038/custom-parser-for-tablesorter-plugin-for-custom-date-format)。客户在表格中列出公司，并希望其中一列按日期排序，其中一些是投资组合中的“活跃”公司，而其他公司已经退出，那些是使用日期格式的公司。我遇到的问题是，因为这些都在同一个表中，并且日期列按日期排序，所以列为“活动”的公司在列表的开头或结尾分组在一起，但按时间顺序排列命令。

因此，这些公司目前的排序为“活跃”>“活跃”>“活跃”>2006 年 1 月 >2010 年 3 月 >2012 年 2 月等。

我想看看是否有办法将其添加到解析器中，以便将“活动”字符串转换为当前日期，以便公司排序为：“活动”>“活动”>“活动”> 2012 年 2 月 > 2010 年 3 月 > 2006 年 1 月。

这可能吗？有任何想法吗？我决定就此开始一个新线程，因为这是上一个问题的新问题，只是为了让正确的日期格式正常工作。我在下面发布我的 HTML 和代码。提前致谢。

```
<table id="myTable" class="tablesorter stripeMe sample" width="100%" cellpadding="0"  cellspacing="0">
<thead>
<th width="30%" align="left">COMPANY</th><th width="35%">DESCRIPTION</th><th width="17%"  align="left">INDUSTRY</th><th width="18%" align="left">EXIT DATE</th></tr></thead>
<tbody>
<tr><td width="30%">  Cartera Commerce, Inc. </td>
<td width="35%">Provides technology-enabled marketing and loyalty solutions 
</td><td width="17%">   Financials    </td> <td width="18%">Active</td>
</tr><tr><td width="30%">   Critical Information Network, LLC </td>
<td width="35%">Operates library of industrial professional training and certification materials 
</td><td width="17%">   Education    </td> <td width="18%">Active</td>
</tr><tr><td width="30%"> Cynergydata </td>
<td width="35%">Provides merchant payment processing services and related software products 
</td><td width="17%">   Merchant Processing    </td> <td width="18%">Active</td>
</tr><tr><td width="30%">    </td>
<td width="35%">Operates post-secondary schools  
</td><td width="17%">   Education    </td> <td width="18%">Active</td>
</tr><tr><td width="30%">  CorVu Corporation</td>
<td width="35%">Develops and distributes performance management software products and related services 
</td><td width="17%">   Information Technology    </td> <td width="18%">May 2007</td>
</tr><tr><td width="30%">    Fischer Imaging Corporation </td>
 <td width="35%">Manufactures and services specialty digital imaging systems and other  medical devices
</td><td width="17%">   Healthcare    </td> <td width="18%">Sep 2005</td>
</tr><tr><td width="30%">   Global Transportation Services, Inc.  </td>
<td width="35%">Provides air and ocean transportation and logistics services
</td><td width="17%">   Transportation     </td> <td width="18%">Mar 2010</td>
</tr><tr><td width="30%">  HMP/Rita  </td>
<td width="35%">Operates as a specialty medical device company that manufactures and markets vascular and spinal access systems
</td><td width="17%">   Healthcare    </td> <td width="18%">Dec 2006</td>
</tr>

</tbody>
</table> 
```

和当前的 jQuery 解析器：

```
$.tablesorter.addParser({
id: 'monthYear',
is: function(s) {
    return false;
},
format: function(s) {
    var date = s.match(/^(\w{3})[ ](\d{4})$/);
    var m = date ? date[1] + ' 1 ' || '' : '';
    var y = date && date[2] ? date[2] || '' : '';
    return new Date(m + y).getTime() || '';
},
type: 'Numeric'
});

$('#myTable').tablesorter({

headers: {
    3: {
        sorter: 'monthYear'
    }
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:01:01.873

这实际上只是一个简单的修改。将解析器更改为：

```
var today = new Date().getTime();

$.tablesorter.addParser({
    id: 'monthYear',
    is: function(s) {
        return false;
    },
    format: function(s) {
        // remove extra spacing
        s = $.trim(s.replace(/\s+/g, ' '));
        // process date
        var date = s.match(/^(\w{3})[ ](\d{4})$/),
            m = date ? date[1] + ' 1 ' || '' : '',
            y = date && date[2] ? date[2] || '' : '';
        return /active/i.test(s) ? today : new Date(m + y).getTime() || '';
    },
    type: 'Numeric'
}); 
```

表格单元格中的“活动”一词将不区分大小写。这是[它工作的演示](http://jsfiddle.net/Mottie/vCTHw/118/)。请注意，未来的日期（在这种情况下为 2012 年 7 月）将排在“活动”之上。

# ruby-on-rails - Rails 3.2.1 - 重命名路线

> ID：10573511
> 
> 赞同：0
> 
> 时间：2012-05-13T16:55:02.693
> 
> 标签：ruby-on-rails, routes

我对 Rails (3.) 有点陌生，需要您的帮助才能使用重命名的路线。我有以下路线来展示和搜索产品。

```
 namespace :store do
    namespace :product do 
      resources :home
      resources :search
    end 
  end 
```

并`rake routes`为上述资源呈现以下输出：

```
 store_product_home_index GET    /store/product/home(.:format)                       store/product/home#index
                           POST   /store/product/home(.:format)                       store/product/home#create
    new_store_product_home GET    /store/product/home/new(.:format)                   store/product/home#new
   edit_store_product_home GET    /store/product/home/:id/edit(.:format)              store/product/home#edit
        store_product_home GET    /store/product/home/:id(.:format)                   store/product/home#show
                           PUT    /store/product/home/:id(.:format)                   store/product/home#update
                        DELETE    /store/product/home/:id(.:format)                   store/product/home#destroy
store_product_search_index GET    /store/product/search(.:format)                     store/product/search#index
                           POST   /store/product/search(.:format)                     store/product/search#create
  new_store_product_search GET    /store/product/search/new(.:format)                 store/product/search#new
 edit_store_product_search GET    /store/product/search/:id/edit(.:format)            store/product/search#edit
      store_product_search GET    /store/product/search/:id(.:format)                 store/product/search#show
                           PUT    /store/product/search/:id(.:format)                 store/product/search#update
                        DELETE    /store/product/search/:id(.:format)                 store/product/search#destroy 
```

而不是像 /store/product/home 这样的路径，我想重命名为 /products/home。

所以修改后的路线应该如下所示：

```
 store_product_home_index GET    /products/home(.:format)                       store/product/home#index
                           POST   /products/home(.:format)                       store/product/home#create
    new_store_product_home GET    /products/home/new(.:format)                   store/product/home#new
   edit_store_product_home GET    /products/home/:id/edit(.:format)              store/product/home#edit
        store_product_home GET    /products/home/:id(.:format)                   store/product/home#show
                           PUT    /products/home/:id(.:format)                   store/product/home#update
                        DELETE    /products/home/:id(.:format)                   store/product/home#destroy
store_product_search_index GET    /products/search(.:format)                     store/product/search#index
                           POST   /products/search(.:format)                     store/product/search#create
  new_store_product_search GET    /products/search/new(.:format)                 store/product/search#new
 edit_store_product_search GET    /products/search/:id/edit(.:format)            store/product/search#edit
      store_product_search GET    /products/search/:id(.:format)                 store/product/search#show
                           PUT    /products/search/:id(.:format)                 store/product/search#update
                        DELETE    /products/search/:id(.:format)                 store/product/search#destroy 
```

请注意，我使用的是 Rails 3.2.1。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:59:26.360

据我了解，您只想删除 /store 命名空间？

代替

```
 namespace :store do
    namespace :product do 
      resources :home
      resources :search
    end 
  end 
```

和

```
namespace :product do 
  resources :home
  resources :search
end 
```

如果您出于结构原因想保留命名空间，请尝试

```
 namespace :store,:path => "" do
    namespace :product do 
      resources :home
      resources :search
    end 
  end 
```

希望这可以帮助！

# javascript - 使用 jquery 找不到元素

> ID：10573512
> 
> 赞同：1
> 
> 时间：2012-05-13T16:55:08.717
> 
> 标签：javascript, jquery

我`p`在页面上有一个带有 id 的标签列表，例如：

```
item_1
item_2
item_3
etc. 
```

在 jquery 函数中，我为 id 构建字符串，然后我想更改它的一些值，但它接缝 jquery 找不到具有此 id 的元素，但它在页面上：

```
...
var itemId = '#item_' + itemId;
                            if ($(itemId).length > 0) {
                                alert("exist");
                            }
... 
```

ID 在 itemId 变量中很好。我在这里做错了什么，也许我的方法是错误的？标记

```
<div>
       <a href="#"><p id="item_283">Counter</p></a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:03:28.993

`var`由于过度使用关键字，您似乎有某种变量范围冲突。

看到这个小提琴 - [http://jsfiddle.net/alnitak/acGmQ/](http://jsfiddle.net/alnitak/acGmQ/)我在其中声明了一个 external `itemId`，然后在一个函数中我复制了你的代码。

在该函数内部，`itemId`外部范围的原始数据不再可用，它是`undefined`，所以你最终得到`#item_undefined`.

相反，写：

```
var sel = '#item_' + itemId;
if ($(sel).length > 0) {
    alert("exist");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:00:56.060

你试过了吗：

```
var item = $('#item_'+itemId); if(item.length > 0).... 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:56:31.050

```
var itemId = '#item_+' + itemId; 
```

注意`_+`

那是不对的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T16:56:44.657

```
var itemId = '#item_' + itemId; // #item_+ << what +?
if ($(itemId).length > 0) {
   alert("exist");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T18:04:40.833

```
if($('#item_'+itemId))
{
alert('exist');
} 
```

# java - 在 SWIG C++/Java 中使用导向器进行内存管理

> ID：10573516
> 
> 赞同：1
> 
> 时间：2012-05-13T16:55:53.517
> 
> 标签：java, c++, swig

我正在尝试使用 SWIG 为我的 C++ 库创建一个 Java 包装器。为了在 Java 编程环境中获得我需要的所有功能，我需要导向器。更具体地说，我需要 Java 用户能够从我的 C++ 类继承并实现某些方法。特别是，需要实现的方法之一是某种`clone()`方法。

在 C++ 中，用户实现提供了一个对象指针`Base*`。然后，该指针由库本身管理。

```
Base* Derived::clone() {
  return new Derived(*this);
} 
```

我对 Java 包装器的问题是 Java 代理类默认`Base`获取相应 C++ 导向器类的管理。`SwigDirector_Base`

这当然适用于一般情况，但不适用于这个特定的用户定义`clone()`函数。

我个人的限制是我的 C++ 库的 Java 包装器不使用特定于 Java 的代码，因此用户实现应该如下所示：

```
class Derived {
  ...
  Base clone() {
    return new Derived(this);
  }
} 
```

到目前为止，为了使其正常工作并避免对复制的 Java 实例进行垃圾收集，我使用了[http://www.swig.org/Doc2.0/SWIGDocumentation.html#CSharp_memory_management_member_variables](http://www.swig.org/Doc2.0/SWIGDocumentation.html#CSharp_memory_management_member_variables)中提到的技巧。

并且为了确保 Java`Derived`类永远不会删除相应的 C++ 导向器类`SwigDirector_Base`，我习惯于`%typemap(directorout)`从 C++ 包装器代码中设置复制实例的 Java cMemOwn 标志的值，即在方法中`SwigDirector_Base::clone()`。

我对这个解决方案不太满意，因为它适用于所有返回`Base`类指针的方法，无论它是否是复制方法......

关于如何以特定功能的方式执行此操作的任何想法？或者以任何其他方式？

# mysql - sql查询不拉记录相同

> ID：10573531
> 
> 赞同：2
> 
> 时间：2012-05-13T16:57:42.907
> 
> 标签：mysql

我有这个查询：

```
SELECT Book.title, Book.copyright, Book.publisher, Book.id,
    MaterialType.type, Item.id as item_id, 100 as relevance FROM `books` AS `Book`
inner JOIN `material_types` AS `MaterialType` ON (`MaterialType`.`id` = `Book`.`material_type_id`)
inner JOIN `items` AS `Item` ON (`Item`.`book_id` = `Book`.`id` AND `Item`.`accession_number` = '0936')
WHERE 1 = 1  GROUP BY `Book`.`id` 
```

什么都没有。但是，如果我执行此查询，它会找到正确的记录：

```
SELECT * FROM `items` AS `Item` WHERE `Item`.`accession_number` = '0936' 
```

不过，最奇怪的部分是它适用于其他记录。如果我使用 accession_number 0396，如果在两个查询中都找到正确的记录。我无法为我的生活弄清楚发生了什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:02:05.047

您需要将 LEFT JOIN 与 matierial_types 一起使用，因为此表可能没有与书籍相同的 materialType id 试试这个

```
SELECT Book.title, Book.copyright, Book.publisher, Book.id,
    MaterialType.type, Item.id as item_id, 100 as relevance FROM `books` AS `Book`
LEFT JOIN `material_types` AS `MaterialType` ON (`MaterialType`.`id` = `Book`.`material_type_id`)
LEFT JOIN `items` AS `Item` ON (`Item`.`book_id` = `Book`.`id`) 
WHERE `Item`.`accession_number` = '0936'
GROUP BY `Book`.`id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:07:18.080

看起来您在“Book”中没有与“accession_number”为 0936 的项目相对应的条目。对项目的右连接应该显示：

```
SELECT Book.title, Book.copyright, Book.publisher, Book.id,
    MaterialType.type, Item.id as item_id, 100 as relevance FROM `books` AS `Book`
left JOIN `material_types` AS `MaterialType` ON (`MaterialType`.`id` = `Book`.`material_type_id`)
right JOIN `items` AS `Item` ON (`Item`.`book_id` = `Book`.`id` AND `Item`.`accession_number` = '0936')
WHERE 1 = 1  GROUP BY `Book`.`id` 
```

# sql - 如何在 SELECT 语句中将字符串拆分为多行（不允许使用变量或 UDF）

> ID：10573542
> 
> 赞同：1
> 
> 时间：2012-05-13T16:59:19.990
> 
> 标签：sql, crystal-reports

这是一个有趣的。我正在为一家非营利组织编写一份水晶 XI 报告，该报告基于从他们的筹款数据库中导出。导出会创建一个 MDB 文件，该文件用作报告的数据源。

我的数据源中有三个表，其中一个字段包含以分号分隔的捐赠律师列表。我需要将这三个字段组合成一列不同的名称。此命令的结果将用于过滤和分组。这是表格设置和所需的输出：

表格1

> 多伊，约翰；能源部，简；史密斯，鲍勃

表 2

> 史密斯，鲍勃

表3

> 多伊，约翰；史密斯，鲍勃

我必须结合它来创建：

> Doe、John
> Doe、简·
> 史密斯、鲍勃

很容易，对吧？但是，我必须仅使用 SELECT 语句来执行此操作。你为什么问？

*   每次运行都会覆盖 MDB。这意味着不能将 UDF 或存储过程添加到 MDB，因为它们将在下一次导出运行期间被删除。
*   最终用户没有安装 Access，所以即使我为他们编写了一个脚本来将一个对象添加到 MDB 作为导出和我的报告之间的一个步骤，他们也无法运行它。
*   Crystal 中的 SQL 命令不能声明变量，所以我不能编写游标或任何在 BEGIN 和 END 之间进行处理的东西。
*   我无法控制生成我的数据源的过程，所以我无法在那里修复它。

我不确定这是否可能在这些限制内实现，但它们是具体的。我几乎正在尝试将 UDF 保存在单独的数据库中并将 SQL 命令作为跨数据库查询运行，以便我可以利用该功能，但我不知道 Crystal 的 SQL 命令是否可以处理跨数据库查询。数据库查询。

在这些限制范围内有任何解决方案的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:28:32.590

如果您使用命令，您将能够组合三个记录集：

```
SELECT NAME_FIELD
FROM   TABLE_1

-- eliminate duplications
UNION

SELECT NAME_FIELD
FROM   TABLE_2

UNION

SELECT NAME_FIELD
FROM   TABLE_3 
```

然后，您可以创建一个将值拆分为数组的公式：

```
//{@names}
Stringvar Array names;
Split({Command.NAME_FIELD}), ";");
true; 
```

不幸的是，您将无法使用此公式将数组转换为“行”。水晶只是不支持这一点。本质上，您处于“死胡同”。

Your best option (and only one given the requirements) is to have the source system (i.e. the one that creates the MDB file) split the fields' values into equivalent recordsets. This will require you to create either a stored procedure or user-defined function in the source system. If you are using Oracle, see [How can I combine multiple rows into a comma-delimited list in Oracle?](https://stackoverflow.com/questions/468990/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-oracle).

# ubuntu - 在精确的穿山甲上安装 mongrel2？

> ID：10573549
> 
> 赞同：3
> 
> 时间：2012-05-13T17:00:07.463
> 
> 标签：ubuntu, ubuntu-12.04, mongrel2

可能是一个愚蠢的问题，但是有没有一种 ppa 或简单的方法可以使用包管理器在精确的穿山甲上安装 mongrel2？如果从源代码安装是当前最好的方法，那也很好，但我更喜欢通过 apt-get 保持一切最新...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:02:34.830

请注意，有一个小错误会阻止示例应用程序使用 -sudo。chroot 监狱不包括 /proc，pgm 需要在那里检查功能，并且因为 libzmq 已使用 --enable-pgm 编译，即使您不打算使用 pgm，您也会遇到陷阱错误（只需检查 dmesg）。

这就是说您应该更改到您正在运行 mongrel2 的目录并执行以下操作的所有内容：

$ mkdir -p proc && sudo mount --bind /proc proc

这样，pgm 就可以看到 /proc，并且一切都很愉快。

（来自[https://github.com/zedshaw/mongrel2/issues/78](https://github.com/zedshaw/mongrel2/issues/78)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:00:35.547

你必须使用压缩包。mongrel2 依赖 zeromq 包，你*可以*通过 apt-get 安装它：

```
apt-get install libzmq-dev 
```

然而，在 .deb 文件中编译 tar 并将其放入私有 apt 存储库（即不是您的发行版的镜像，只是您生成的 .deb 文件的一部分）并不难。我发现测试本地补丁的开销有点太大了，但是当我不得不将结果分发到多台计算机时，我使用了它。你可能想看看[http://www.debian-administration.org/articles/286](http://www.debian-administration.org/articles/286)

# mysql - 从 2 个表中过滤 SQL 语句

> ID：10573550
> 
> 赞同：0
> 
> 时间：2012-05-13T17:00:15.577
> 
> 标签：mysql, sql

所以我正在编写一个简单的测验脚本：用户获取问题列表并有 2 个可能的答案。我有 2 个表：1）包含用户 ID 和问题 ID

```
user | question_id 
```

2) 包含问题数据库，包含答案、每个答案的投票数以及是否接受 qiven 问题（可以在公开列表中查看）

```
id | question | answer1 | answer2 | a1count | a2count | accept 
```

我的 sql 语句有问题 - 现在我写了这个（用户 id 是恒定的 atm）：（用户应该只得到那些尚未回答的问题）

```
SELECT * 
FROM questions as q, answers as a 
WHERE a.user = 2 
    AND a.question_id <> q.id 
    AND q.accept = 1 
```

如果这个结果有 0 行，我放了 if 语句来检索所有可能的问题。不幸的是，它在某些时候出错了：当我回答所有问题时，第一个语句获得 0 行并触发下一个语句 + 如何在第一个表为空且没有可比较的情况下检查显示未回答的问题？

也许任何人都可以给出提示或帮助如何解决这个问题？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:10:05.730

我假设而不是 q.accept = 1 它应该是 q.accept = 0 (accept = 1 (已回答) and accept = 0 (unanswered))

您可以使用此查询来解决不存在的问题

```
select * from questions where accept = 0 and NOT EXISTS (Select id from answers where user_id = 2 and id IN (select question_id from questions)) 
```

# android - 对于 Android ASOP，如果我使用 -b 参数指定分支，“repo sync”实际上是否会下载整个源代码树事件

> ID：10573552
> 
> 赞同：1
> 
> 时间：2012-05-13T17:00:49.833
> 
> 标签：android, git, version-control, android-source

如果我使用`repo -u init [url] -b gingerbread`并执行`epo sync`，是不是只下载了 ginerbread 的源代码？据我所知，git 实际上会保留整个存储库。所以我想如果我可以做一些事情`git checkout ics`来获取我只执行的 ICS 源代码事件`repo -u [url] -b gingerbread`。

我不太明白`repo`命令是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T18:40:01.353

如果您只想要单个分支，请使用 -c 参数。它也更快，可能会使用更少的空间。

回购同步 -c ...

# ruby-on-rails - 将变量传递给部分

> ID：10573557
> 
> 赞同：1
> 
> 时间：2012-05-13T17:01:23.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, variables, partial-views

我有以下和部分设置，但我不断收到错误，部分无法识别变量 |builder|。

形式

```
<%= simple_form_for @firm  do |f| %>

<%= f.fields_for :events do |builder| %>
          <%= render 'event_fields', :builder => builder  %>
  <% end %>

<%= end %> 
```

_events_fields 部分

```
<fieldset>
<%= builder.input :name, :collection => ['Applications Open', 'Applications Close', 'Traineeship Starts'] %>
<%= builder.text_field :start_at, :class => 'datepicker' %>
<%= builder.hidden_field :all_day, :value => true %>
<%= link_to "remove", '#', class: "remove_fields" %> 
```

知道我应该如何填充变量吗？或者如果事实上这是正确的做法？如果有人可以帮助我更多地了解您需要如何以及为什么需要这样做，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:34:27.917

您需要告诉它这是一个局部视图并将哈希传递给 locals 选项。像这样：

```
<%= simple_form_for @firm  do |f| %>
    <%= f.fields_for :events do |builder| %>
        <%= render partial: 'event_fields', locals: {builder: builder} %>
    <% end %>
<% end %> 
```

如果您使用的是 Ruby 1.8，那么：

```
<%= simple_form_for @firm  do |f| %>
    <%= f.fields_for :events do |builder| %>
        <%= render :partial => 'event_fields', :locals => { :builder => builder } %>
    <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T13:48:42.483

`partial_name`将替换为实际的部分名称或部分名称与目录名称。

我们将`data_object`对象提供给partial，在partial中的局部变量下可用，`data_variable`相当于：

```
<%= render partial: "partial_name", locals: { data_variable: data_object } %> 
```

# android - 存储多个动态 EditText 值

> ID：10573560
> 
> 赞同：0
> 
> 时间：2012-05-13T17:01:40.510
> 
> 标签：android

我有一个添加多个 EditText 的代码。我如何将它们存储到数组中。这个数字 10 只是一个例子，这个数字可能比这更大。单击按钮后如何存储它

```
for(int i=0; i<10; i++) {
    String store[] = new String[10];
    EditText addAnsMCQ = new EditText(this);      
    AnswerRG.addView(addAnsMCQ, 1);
    addAnsMCQ.setWidth(200);
    addAnsMCQ.setId(1000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:06:14.603

您需要保留/获取对每个 EditText 的引用，然后您可以使用 .getText().toString() 查找它的值，您可以以任何您喜欢的方式存储它。

但是，如果如你所说

> 这个数字 10 只是一个例子，这个数字可能比这更大。

如果数字会更大，您应该使用 Adapter 和 ListView 或其他东西来保存您的 View 对象。这将使将所有内容都显示在屏幕上变得更加容易。并且会给你视图回收的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:12:43.430

在您的示例中，实际上并未使用 store 变量，您是否打算使用它来存储 EditTexts？

而不是使用数组`String`，只需使用数组`EditText`并存储对它们的引用：

```
EditText store[] = new EditText[10];

for(int i=0; i<10; i++) {
    EditText addAnsMCQ = new EditText(this);     
    AnswerRG.addView(addAnsMCQ, 1);
    addAnsMCQ.setWidth(200);
    addAnsMCQ.setId(1000);
    store[i] = addAnsMCQ; //store a reference in the array to the EditText created
} 
```

然后在 for 循环之外，您可以访问对 each 的引用`EditText`，例如

```
store[0].setWidth(300); 
```

# javascript - 使用Javascript显示文本字段onChange的值

> ID：10573561
> 
> 赞同：1
> 
> 时间：2012-05-13T17:01:48.307
> 
> 标签：javascript, html

我想要做的是，每当我在文本字段中输入一个值时，输入的值就会立即显示出来。

我该怎么做？无论如何我可以将值放入变量中并立即使用它而不使用onClick？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:09:21.917

这是我的做法：

```
<script>
function change(){
    var el1 = document.getElementById("div1");
    var el2 = document.getElementById("text");
    el1.innerHTML = el2.value;
}
</script>

<input type="text" id="text" onkeypress="change()">
<div id="div1"></div> 
```

我不认为你可以在没有任何事件的情况下做到这一点。也许您可以使用 HTML5 的 <output> 标签来做到这一点。我不是很了解，但请尝试一些研究。
W3Schools 有一些很好的例子。

希望这可以帮到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:11:38.740

**不**使用更改事件？你到底为什么要这个？我能想到的唯一选择是每隔一段时间进行轮询。就像是：

```
var theValue = "";
var theTextBox = document.getElementById('myTextBox');

// Run 10 times per second (every 100ms)
setInterval(function() {
    // Check if the value has changed
    if(theTextBox.value != theValue)
    {
        theValue = theTextBox.value;
    }
}, 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T13:25:43.690

```
<script>
function change(){
var el1 = document.getElementById("div1");
var el2 = document.getElementById("text");
el1.innerHTML = el2.value;
}
function changenew(){
var el1 = document.getElementById("div1");
var el2 = document.getElementById("text");
el1.innerHTML = el2.value;
}
</script>

<input type="text" id="text" onkeypress="change()" onchange="changenew()"> 
```

是否可以

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:11:28.927

您可以检查您的输入字段是否处于焦点，然后侦听任何[键输入](https://developer.mozilla.org/en/DOM/window.onkeypress)事件并使用适当的字符更新您的显示字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T17:11:48.800

html:

```
​&lt;input type="text" id="myText"/>
<span id="output"></span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

js：

```
var myText = document.getElementById("myText");
myText.onkeyup = function(){
   var output = document.getElementById("output");
   output.innerHTML = this.value;
} 
```

演示： http: [//jsfiddle.net/seUBJ/](http://jsfiddle.net/seUBJ/) ​</p>

# phpbb - phpbb3 curl注册-无法显示正确的验证码图像

> ID：10573567
> 
> 赞同：2
> 
> 时间：2012-05-13T17:02:13.330
> 
> 标签：phpbb, phpbb3

我们有一些网站在不同的 CMS（Drupal、Joomla 等）上运行。我们希望这些站点共享一个 phpbb 论坛（在不同的域上），并希望在每个站点上注册的人也能在论坛上自动创建一个用户帐户。

为此，我编写了一个脚本，它发送一个`php curl request`模仿 phpbb 的注册过程的脚本。

首先，我厌倦了一个简单的注册表单，它运行良好。但由于论坛使用`Captcha`我需要在我的脚本中添加一个表单，以便用户可以输入`Captcha string`. 而这里的事情并没有那么顺利。经过数小时的检查`phpbb`代码文件后，我设法或多或少地找出了问题所在，尽管我有限的 phhbb 知识阻止我找到解决方案，所以我想我会在这里寻求帮助。

我的脚本发送 curl 请求以`ucp.php?mode=register`通过`"agree to terms"`屏幕，解析结果以获取令牌和创建时间，然后发送另一个请求。返回值是带有验证码图像的注册屏幕。除了没有图像可以被视为`url`图像脚本是相对的，所以我改变了输出结果并制作了`url`一个`absolute url`.

所以而不是

```
./ucp.php?mode=confirm&amp;confirm_id=xxxxxxxxxxxxx&amp;type=1 
```

我将代码更改为

```
http://www.mydomain.com/phpbb3/ucp.php?mode=confirm&confirm_id=xxxxxxxxxxxxx&type=1

```

并获取验证码图像（`xxxxxxxxxxxxx`每次`confirm_id string`都会更改）。

这就是我碰到砖墙的地方。**生成的图像永远不是正确的验证码字符串。**

如果我`var_dump`在其中的`$captcha`变量`ucp_register.php`可以看到正确的字符串，它永远不是验证码图像中的那个。我在输出某些变量的文件中放置了一些代码，`phpbb`以帮助我了解幕后发生的事情。这是我设法收集的内容，希望有人能告诉我为什么会发生这种情况，或者至少为我指明正确的方向：

1.  In`captcha_abstract.php`和`captcha_gd.php`是变量`$this->confirm_code`。当我在这两种情况下将其转储到文件中时，我可以看到正确的验证码（与输出`$captcha var`in时相同`ucp_register.php`）。
2.  `ucp_confirm.php`里面有一个`$captcha->code`var ，它保存了我在输出验证码图像时看到的字符串。
3.  当我通过浏览器正常完成注册过程`$this->confirm_code`并`$captcha->code`持有相同的值时。

所以很明显，更改`ucp.php?mode=confirm`上面的行会导致这种情况，但我无法避免，好像我不这样做我没有得到验证码图像。

# c++ - NSData、NSDictionary、NSArray 等效 C++

> ID：10573568
> 
> 赞同：0
> 
> 时间：2012-05-13T17:02:16.943
> 
> 标签：c++, objective-c, gcc

我想知道 C++ 库中是否有 NSData、NSDictionary 和 NSArray 等价物，如果没有，是否有任何已知的流行框架提供这些类？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:06:45.477

见这些：

NSArray：[向量](http://www.cplusplus.com/reference/stl/vector/)

NSDictionary:[地图](http://www.cplusplus.com/reference/stl/map/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:06:12.887

并非如此，因为这些类的功能在很大程度上受语言的支配。

另一方面，有 std::vector （数组和数据）和 std::map （字典）。这些根本不是等效的，但它们具有相似的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:41:07.393

STL 有可以用来代替 NSDictionary 的地图和可以用来代替 NSArray 的向量，但是“转换”当然不是无痛的，因为可能缺少特定的功能并且需要更多的编码。例如，要“模拟” `dictionaryWithContentsOfURL:`NSDictionary 的选择器，您将需要在 C++ 中进行额外的编码，以解析 URL，并且——如果它是远程资源——连接并检索它，然后反序列化数据；其他库当然可能会有所帮助（提升？），但关键是如果您需要移植 NSDictionary（和其他）的一些特殊功能，您需要编写更多代码。

另一方面，如果您只使用基本的字典和数组功能，“转换”可能变得相当微不足道。

NSData 的类似论点，可能可以通过`std::stringbuf`.

您还可以使用[GNUstep](http://www.gnustep.org/)库；GNUstep 是一个 GNU 开放的 Cocoa 框架，它提供了您在 Cocoa 上的几乎所有东西（AppKit 和 Foundation 类）；GNUstep 存在于 Apple Mac OS X 以外的其他平台上，因此您可以在这些平台上移植 Cocoa 应用程序。使用 Objective-C++，您可以同时使用 STL 和 Cocoa/GNUstep 框架，并利用这两个世界中最好的（在 OO 编程和不同“来源”的类/对象之间的“交互”方面受到限制），理论上（我从来没有尝试了这样的混合，但[注意](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)可能会有一些好处，也许）

# c# - 使用 WCF REST 的 PUT 和 POST 之间的区别

> ID：10573569
> 
> 赞同：5
> 
> 时间：2012-05-13T17:02:33.657
> 
> 标签：c#, wcf, wcf-rest

我试图实现一个 REST WCF 以探索 PUT 和 POST 动词之间的区别。我已经使用该服务在某个位置上传了一个文件。

服务实现如下：

```
[OperationContract]
[WebInvoke(UriTemplate = "/UploadFile", Method = "POST")]
void UploadFile(Stream fileContents);

public void UploadFile(Stream fileContents)
{
 byte[] buffer = new byte[32768];
 MemoryStream ms = new MemoryStream();
 int bytesRead, totalBytesRead = 0;
 do
 {
       bytesRead = fileContents.Read(buffer, 0, buffer.Length);
       totalBytesRead += bytesRead;

       ms.Write(buffer, 0, bytesRead);
  } while (bytesRead > 0);

  using (FileStream fs = File.OpenWrite(@"C:\temp\test.txt")) 
  { 
      ms.WriteTo(fs); 
   }

  ms.Close(); 
```

}

客户端代码如下：

```
HttpWebRequest request =     (HttpWebRequest)HttpWebRequest.Create("http://localhost:1922   /EMPRESTService.svc/UploadFile");
        request.Method = "POST";
        request.ContentType = "text/plain";

        byte[] fileToSend = File.ReadAllBytes(@"C:\TEMP\log.txt");  // txtFileName contains the name of the file to upload. 
        request.ContentLength = fileToSend.Length;

        using (Stream requestStream = request.GetRequestStream())
        {
            // Send the file as body request. 
            requestStream.Write(fileToSend, 0, fileToSend.Length);
            //requestStream.Close();
        }

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            Console.WriteLine("HTTP/{0} {1} {2}", response.ProtocolVersion, (int)response.StatusCode, response.StatusDescription);
        Console.ReadLine(); 
```

文件正在上传，响应状态码返回“200 OK”。在上传位置存在或不存在文件的情况下，状态代码相同。

我已将 REST 动词更改为 PUT，状态代码与上述相同。

谁能解释一下，在这种情况下我如何识别动词之间的差异？我无法模拟从客户端代码生成连续请求。如果这样做的行为会有所不同，有人可以帮助我修改 ordrr 中的客户端代码以连续发送连续请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:48:07.710

当您创建新资源（在您的情况下为文件）时使用 POST 动词，重复操作会在服务器上创建多个资源。如果多次上传同名文件会在服务器上创建多个文件，则此谓词将有意义。

PUT 动词用于更新现有资源或创建具有预定义 ID 的新资源。多个操作将重新创建或更新服务器上的相同资源。如果第二次、第三次上传同名文件会覆盖之前上传的文件，这个动词就有意义了。

# c# - C# - 使用不同的 ODBC 驱动程序连接来自两个不同数据库的表

> ID：10573576
> 
> 赞同：2
> 
> 时间：2012-05-13T17:03:22.980
> 
> 标签：c#, database, odbc, myob

我有一个 C# 应用程序需要从两个不同的数据库中提取数据： 数据库 1 是一个 MYOB 数据库（它使用 ODBC 使用 MYOB 的驱动程序进行连接） 数据库 2 是一个 Access 数据库，我再次使用 ODBC 连接到它。

例如。这是我要运行的查询：

```
$query = "SELECT * FROM [" + myobConnectString + "].Accounts, ["+accessConnectString+"].tblTest WHERE tblTest.ID = Accounts.AccountID"; 
```

我的问题是如何运行它（或者如果它甚至可能）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:44:02.327

以您编写查询的方式，答案是否定的。原因很简单，因为查询本身是在单个引擎上运行的。哪个引擎会按照您编写的方式运行查询？

如果任一数据库服务器能够提供对另一个的直接访问（SQL Server 具有此功能，但我现在忘记了名称），那么单个引擎可以执行此操作，因为它可以访问另一个。

最有可能的是，您唯一的解决方案是将两个表中的数据加载到本地应用程序中，然后将数据连接到内存中。根据记录的数量，这可能是一个可接受的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:55:23.457

要记住的一件事是查询是由数据库而不是您的应用程序在数据库上执行的。因此，将执行查询的数据库需要能够访问其他数据库。

在 Oracle 中，此功能称为数据库链接。这是一篇文章，详细介绍了如何从 Oracle 到 SQL Server 执行此操作：[http ://www.dba-oracle.com/t_heterogeneous_database_connections_sql_server.htm](http://www.dba-oracle.com/t_heterogeneous_database_connections_sql_server.htm)

在 SQL Server 中具有相同功能的称为 Linked Servers。这是一篇解释该概念并提供有关如何设置的详细信息的文章：http: [//msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

否则，您可以使用每个特定数据库的驱动程序运行两个单独的查询，并在应用程序的内存中执行连接。您还可以从一个 DB 中进行选择，插入到另一个 DB 中的临时表中，然后在该 DB 上运行连接。当然，就性能而言，这可能是一项代价高昂的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:41:27.100

除了其他答案之外，您还可以使用 ODBC Join Engine，例如[ODBC-ODBC Join Engine](http://www.easysoft.com/products/data_access/odbc_odbc_join_engine/index.html)中的那个。但是，这将在本地提取数据并为您执行连接，因此它具有与 Nickoli 在其答案末尾概述的相似的缺点。

# python - 字典变量上的 MemoryError

> ID：10573580
> 
> 赞同：3
> 
> 时间：2012-05-13T17:03:36.530
> 
> 标签：python, python-2.7

我在第三轮（while 循环）中执行的代码有什么问题`nfind`，返回 MemoryError 符合`CACHE[sha] = number`？在系统上有足够的内存，并且在 while 循环的每一端我清除分配的内存，但它在第三次`while`循环中返回错误。如果您运行这些代码，在某些情况下，我认为有必要更改`XRAN= 2**23`为更大或更小的指数（一或二），以产生错误。请帮助和建议。

```
from multiprocessing import Pool
from hashlib import sha256
from struct import pack
import gc

XRAN= 2**23

def compsha(number):
    return number, sha256(pack("Q", number)).digest()

if __name__ == '__main__':
    gc.enable()
    nfind = 1
    while (nfind > 0):
        print(nfind)
        CACHE = {}
        pool = Pool()
        for i, output in  enumerate(pool.imap_unordered(compsha, xrange((nfind-1)*XRAN, nfind*XRAN), 2)):
            number, sha = output
            CACHE[sha] = number
        pool.close()
        pool.join()
        if nfind != 0 :
            nfind = nfind + 1
        del CACHE
=======================================================
>>> 
1
2

Traceback (most recent call last):
  File "D:\Python27\free_pool.py", line 20, in <module>
    CACHE[sha] = number
MemoryError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:23:03.463

除了 Ned 关于在字典中存储太多甚至不使用的答案之外，您是否有可能在 32 位 python 解释器上运行并在主进程中达到 4GB 内存限制？

```
$ python -c "import sys; print sys.maxint" // 64-bit python
9223372036854775807

$ python-32 -c "import sys; print sys.maxint" // 32-bit
2147483647 
```

在 Windows 上，32 位进程可能会限制在 2-4GB 之间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:07:29.253

您的内存不足是因为您试图将`2**23`元素存储在字典中。这使用了大量的内存，显然比你拥有的更多！你说你有足够的内存，你是如何确定你需要多少内存的？

你需要想出一个不同的算法。

此外，您似乎从未访问过 CACHE，那么您为什么要使用它呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:32:37.033

Keep in mind running `del CACHE` only marks that area of memory as freeable -- it doesn't actually free it. It's the garbage collector's job to come and free up that memory. Try running `gc.collect()` at the end of your loop.

(Disclosure: I can't replicate your problem so I don't know that this will fix anything)

# php - 无法使用 PDO 连接到 MySQL 服务器

> ID：10573583
> 
> 赞同：9
> 
> 时间：2012-05-13T17:04:04.433
> 
> 标签：php, mysql, connection, pdo, host

我有一个用于连接 MySQL 数据库的 PHP 脚本。通过 mysql_connect 进行连接可以完美运行，但是在尝试使用 PDO 时出现以下错误：

```
SQLSTATE[HY000] [2005] Unknown MySQL server host 'hostname' (3) 
```

我用来连接的代码如下：

```
 <?php  
    ini_set('display_errors', 1);
    error_reporting(E_ALL);

    $hostname_localhost ="hostname";  
    $database_localhost ="dbname";  
    $username_localhost ="user";  
    $password_localhost ="pass";  
    $user = $_GET['user'];  
    $pass = $_GET['pass'];

    try{
        $dbh = new PDO("mysql:host=$hostname_localhost;dbname=$database_localhost",$username_localhost,$password_localhost);
        echo 'Connected to DB';
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $stmt = $dbh->prepare("SELECT check_user_company(:user,:pass)");
        $stmt = $dbh->bindParam(':user',$user,PDO::PARAM_STR, 16);
        $stmt = $dbh->bindParam(':pass',$pass,PDO::PARAM_STR, 32);

        $stmt->execute();

        $result = $stmt->fetchAll();

        foreach($result as $row)
        {
            echo $row['company_id'].'<br />';
        }

        $dbh = null;
    }
    catch(PDOException $e)
    {
        echo $e->getMessage();
    } 
    ?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T13:11:53.653

遇到了同样的问题。我的解决方案是另一个数据库端口。我写了 localhost:1234 并得到了这个错误。

固定：

```
mysql:host=$hostname_localhost;port=1234;dbname=$database_localhost",$username_localhost,$password_localhost);
        echo 'Connected to DB'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T04:48:10.027

看起来确实很简单，这是我用来构建 PDO 连接器的内容（注意到您的 dbname 和 host 与我的不同，不知道是否相关，但值得一试）：

***PDO 创建函数***

```
require_once('config.inc.php');

function buildDBConnector(){
    $dsn = 'mysql:dbname='.C_BASE.';host='.C_HOST;
    $dbh = new PDO($dsn, C_USER, C_PASS);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    return $dbh;
} 
```

***配置文件***

```
define('C_HOST','localhost');// MySQL host name (usually:localhost)
define('C_USER','sweetUsername');// MySQL username
define('C_PASS','sweetPassword');// MySQL password
define('C_BASE','superGreatDatabase');// MySQL database 
```

虽然这没有任何意义，但当我试图在调用`$dsn`期间声明包含变量的内联变量时`newPDO`，我也一直失败。我把它拆开并使用 $dsn 变量来做到这一点。从那以后就没有问题了。

想知道您是否偶然在共享主机中？

***注意：*** 如果您没有专用 IP，而是通过 NAT，您的 IP 将无法正确转换为您的实际服务器。

有帮助吗？

***更新：*** 刚刚想到另一件事。您是否尝试连接到与运行脚本不同的 IP 上的 mysql 数据库？如果是这样，您可能需要为调用数据库的 IP 启用 remoteSQL 访问。相当容易做到，但如果您不访问本地主机，则至关重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T20:09:39.743

您似乎没有指定数据库主机 dns 详细信息或 IP 地址。添加将解决问题

# android - 将 ItemizedOverlay 添加到我的地图视图

> ID：10573586
> 
> 赞同：2
> 
> 时间：2012-05-13T17:04:59.097
> 
> 标签：android, itemizedoverlay, osmdroid

我正在使用 osm 开发地图应用程序。我想在我的地图视图上创建一些标记。我使用以下代码：

```
this.mMyLocationOverlay = new ItemizedOverlay<OverlayItem>(this, items,
                new ItemizedOverlay.OnItemGestureListener<OverlayItem>() {
                    @Override
                    public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                        Toast.makeText(
                                SampleWithMinimapItemizedoverlay.this,
                                "Item '" + item.mTitle + "' (index=" + index
                                        + ") got single tapped up", Toast.LENGTH_LONG).show();
                        return true; // We 'handled' this event.
                    }

                    @Override
                    public boolean onItemLongPress(final int index, final OverlayItem item) {
                        Toast.makeText(
                                SampleWithMinimapItemizedoverlay.this,
                                "Item '" + item.mTitle + "' (index=" + index
                                        + ") got long pressed", Toast.LENGTH_LONG).show();
                        return false;
                    }
                }, mResourceProxy); 
```

...

但在“new ItemizedOverlay.OnItemGestureListener”下的第 2 行中，我得到一条红线和一个错误，指出修复项目设置。我很困惑。为什么我在eclipse中得到这个错误？请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:32:35.493

你可以使用类似的东西。- 扩展 ItemizedOverlay

```
package dispatch.driver.osmMaps;

import java.util.ArrayList;

import org.osmdroid.ResourceProxy;
import org.osmdroid.api.IMapView;
import org.osmdroid.views.overlay.ItemizedIconOverlay;
import org.osmdroid.views.overlay.OverlayItem;

import android.graphics.Point;

public class OsmMapsItemizedOverlay extends ItemizedIconOverlay<OverlayItem>
{
    private ArrayList<OverlayItem> mItemList = new ArrayList<OverlayItem>();

    public OsmMapsItemizedOverlay(ArrayList<OverlayItem> pList,
            ItemizedIconOverlay.OnItemGestureListener<OverlayItem> pOnItemGestureListener, ResourceProxy pResourceProxy)
    {
        super(pList, pOnItemGestureListener, pResourceProxy);
        mItemList = pList;
        // TODO Auto-generated constructor stub
    }

    public void addOverlay(OverlayItem aOverlayItem)
    {
        mItemList.add(aOverlayItem);
        populate();
    }

    public void removeOverlay(OverlayItem aOverlayItem)
    {
        mItemList.remove(aOverlayItem);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i)
    {
        return mItemList.get(i);
    }

    @Override
    public int size()
    {
        if (mItemList != null)
            return mItemList.size();
        else
            return 0;
    }

    @Override
    public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3)
    {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

在你的活动课上

```
private void PrepareItemizedOverlay()
    {
        /* itemized overlay */
        mItemizedOverlay = new OsmMapsItemizedOverlay(mItems,
                new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>()
                {
                    @Override
                    public boolean onItemSingleTapUp(final int index, final OverlayItem item)
                    {

                        Toast.makeText(OsmMapsActivity.this,
                                "Item '" + item.mTitle + "' (index=" + index + ") got single tapped up",
                                Toast.LENGTH_LONG).show();

                        return true; // We 'handled' this event.
                    }

                    @Override
                    public boolean onItemLongPress(final int index, final OverlayItem item)
                    {

                        Toast.makeText(OsmMapsActivity.this,
                                "Item '" + item.mTitle + "' (index=" + index + ") got long pressed", Toast.LENGTH_LONG)
                                .show();

                        return true;
                    }
                }, mResourceProxy);
    } 
```

要添加新的叠加层，您可以使用以下内容：

```
{    OverlayItem overlayItem;

            overlayItem = new OverlayItem("Center", "Center", (GeoPoint) aPoint);

            mItemizedOverlay.addOverlay(overlayItem);

            mMapView.getOverlays().clear();
            mMapView.getOverlays().add(mItemizedOverlay);
            mMapView.getController().animateTo(aPoint);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T17:08:01.030

尝试右键单击您的项目-> android 工具-> 修复项目（或类似的东西）。还要尝试清理您的项目。

# c# - C#：“无法复制文件...因为它正被另一个进程使用

> ID：10573587
> 
> 赞同：0
> 
> 时间：2012-05-13T17:05:13.610
> 
> 标签：c#, build

是的。我的问题在 StackOverFlow 中很常见，但我还没有看到我的问题的真正解决方案，所以我再次发帖希望对我有所帮助。

每次编译并运行一个项目，然后再次编译并运行一个项目后，我都会遇到此错误。

我只有一个解决方案：打开`Process Explorer`并杀死 A.exe（其中 A 是 C# 项目的名称）。

但它非常方便，我不知道为什么这个非常愚蠢的错误，微软还没有修复它。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:08:25.553

当您编译并运行一个可执行文件时，它正在使用中——这意味着它*不能*被重新编译替换，直到可执行文件终止。

如果您的应用程序没有终止，则可执行文件本身正在使用中。重新编译将尝试替换该文件并失败。

您需要确保发生这种情况，然后才能再次编译。

# uitableview - 来自不同 UITableViewCells 的不同 Segue？

> ID：10573593
> 
> 赞同：1
> 
> 时间：2012-05-13T17:06:18.457
> 
> 标签：uitableview, segue, uistoryboard

这似乎是一个故事板编辑器问题，因为它很容易在代码中完成。

我有一个带有两个不同原型单元的 UITableView。他们有重复使用的标识符，不同的配件。我想选择一种类型来触发对另一个视图控制器的 segue，并选择另一种类型来转到另一个视图控制器。但是一旦我在情节提要编辑器中创建了第二个转场，第一个转场就会被替换。即使我给它起了名字。

看起来这应该是一个足够常见的场景，我应该能够有多个 segue，并在 prepareForSegue 中区分它们。

我需要注意，这在视图控制器的表视图委托的 didSelectRowAtIndexPath 中很容易做到，但是我必须从情节提要中显式加载模板（除非我使用通用并且不需要笔尖）。

有没有人能够让它在故事板编辑器中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:00:20.490

对于目前的工作方式，我能想到的唯一方法是使用两种不同类型的原型单元。（两个单独的类）并将每个不同的segue分配给每个不同的子类原型单元。

# c++ - boost::make_function_output_iterator 的逆

> ID：10573596
> 
> 赞同：3
> 
> 时间：2012-05-13T17:06:46.520
> 
> 标签：c++, boost, stl, iterator

boost 函数[make_function_output_iterator](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/function_output_iterator.html)将适用于 std::for_each 的函数转换为适用于 std::copy 的迭代器。是否有反向的升压功能。即，采用适合 std::copy 的迭代器并将其转换为适合 std::for_each 的函数。

因此，如果我有一个输出迭代器 output_iter。我需要

```
for_each(v1.begin(), v1.end(), make_output_iterator_function(output_iter)); 
```

做同样的事情

```
copy(v1.begin(), v1.end(), output_iter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:36:15.767

也许[`std::insert_iterator`](http://www.cplusplus.com/reference/std/iterator/insert_iterator/)或者[`std::transform`](http://www.cplusplus.com/reference/algorithm/transform/)是你正在寻找的东西？

您可以使用一些魔法来绑定`std::insert_iterator::operator=`，它会在每次调用时插入：`boost::bind`

```
#include <boost/bind.hpp>
#include <vector>
#include <iterator>
#include <algorithm>

    typedef std::vector<int> Container;
    typedef std::insert_iterator< Container > InsertIt;

int main(){
    Container v1, v2;
    InsertIt insert_it (v2,v2.end());
    std::for_each(v1.begin(), v1.end(),
            boost::bind(static_cast<InsertIt& (InsertIt::*)(typename Container::const_reference)>(&InsertIt::operator=), insert_it, _1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:37:39.180

班上

```
 template<typename T>
 struct iterator_to_function {
      T iter_;
      iterator_to_function(const T& iter) : iter_(iter) {}
      template<typename T2>
      T& operator()(const T2& elem) {*iter_=elem; return ++iter_;}
 };

template<class T>
iterator_to_function<T> make_iterator_function(const T& iter) 
{
  return iterator_to_function<T>(iter);
} 
```

将输出迭代器转换为一元函数。

```
typedef vector<int> t_vec;
t_vec v;
t_vec v2;
for_each(v.begin(), v.end(), 
         make_iterator_function(back_inserter(v2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T20:38:23.960

如果您可以选择，我会使用 lambdas 而不是`std/boost::bind`，例如：

```
std::vector<type> v1;
std::for_each(v1.begin(), v1.end() [&output_iter](const type& t) {*output_iter++ = t}); 
```

当然，首先使用会更有意义`std::copy`！

# 3d - 从线框草图进行 3D 重建

> ID：10573601
> 
> 赞同：1
> 
> 时间：2012-05-13T17:07:25.677
> 
> 标签：3d, 3d-reconstruction, sketching

我想根据原始手绘草图重建对象的 3-D 形状。草图还包含对象的不可见线条，并且绘制在已经存在的 3-D 场景（城市）之上。我也许可以根据它们与城市中其他物体的重合度来恢复一些 3-D 点。

重构的形状不需要 100% 精确，允许有一些不准确，并且它们不包含曲线和曲面，仅包含普通多边形。

我发现了这个话题：

[通过处理纸上的 2d 草图生成 3d 对象](https://stackoverflow.com/questions/8915057/generate-3d-object-from-processing-a-2d-sketch-on-paper)

但与我的情况相比，那里的问题似乎根本没有受到限制。我也读过一些论文，最新的和最具描述性的一篇是： [http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.118.2577&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.118.2577&rep=rep1&type=pdf)

本文实现了一种基于约束（例如平行线、平行面、对称、最小距离等）的算法。但它没有可用的实现......

我想实现一个快速而肮脏的并行算法，但我似乎没有找到任何代码开始......我将不胜感激任何提示或链接到现有实现。我知道这是一个难题，但我相信这不是不可能解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:24:32.990

我找到了一个解决这个问题的方法，虽然不完全是我正在寻找的那个：

[形状识别和物理模拟](http://gamesalfresco.com/2009/10/16/ismar-2009-sketch-and-shape-recognition-preview-from-ben-gurion-university/)

**这种方法仅识别可见边缘**之外的形状。用户不必绘制不可见的边缘。我也想使用不可见的边缘。

不幸的是，我无法访问源代码，即使他们已经发送了一封电子邮件以表示对源代码的兴趣。

# ruby-on-rails - Rails 应用程序模板删除了默认 gem

> ID：10573604
> 
> 赞同：2
> 
> 时间：2012-05-13T17:08:02.933
> 
> 标签：ruby-on-rails

当使用 Rails 应用程序模板时，可以使某些默认 gem（sqlite3、coffescript 和 sass）不包含在 Gemfile 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-03-10T03:38:47.693

我确定您在过去 7 年中已经解决了这个问题，但对于其他所有人来说，我见过的最好的方法是将它从文件中 gsub 删除：

```
# Removes sqlite3, coffee-rails, and sass-rails gems

gsub_file "Gemfile", /^gem\s+["']sqlite3["'].*$/,''
gsub_file "Gemfile", /^gem\s+["']coffee-rails["'].*$/,''
gsub_file "Gemfile", /^gem\s+["']sass-rails["'].*$/,'' 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-13T18:03:35.560

是的，只需修改您的应用程序模板文件以不包含它们。看看[https://github.com/RailsApps/rails3-application-templates](https://github.com/RailsApps/rails3-application-templates)

获得更好的想法，特别是 mongoid 模板

# c# - 返回单点触控异步调用的正确方法

> ID：10573605
> 
> 赞同：1
> 
> 时间：2012-05-13T17:08:04.260
> 
> 标签：c#, .net, asynchronous, xamarin.ios

假设我在这样的单点触控项目中有一个异步调用

```
context.getNameCompleted += HandleContextgetNameCompleted;
context.getNameAsync();

void HandleContextgetNameCompleted(object sender, getNameCompletedEventArgs args)
    {
        string name = args.Result;
    } 
```

现在我如何让另一个异步方法运行，它依赖于第一个的完成而不会使程序崩溃。所以例如我的第二个电话可能是

```
context.getAgeCompleted += HandleContextgetAgeCompleted;
context.getAgeAsync();

void HandlegetAgeCompleted(object sender, getAgeCompletedEventArgs args)
    {
        string age = args.Result;
    } 
```

第二种方法只有在我们从第一个人返回“名称”时才能返回一个值。请提供如何正确使用此方法或任何替代解决方案的原因和/或示例。像往常一样，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:32:09.700

当您完成第一个请求时触发第二个请求。

```
void HandleContextgetNameCompleted(object sender, getNameCompletedEventArgs args)
    {
        string name = args.Result;

        context.getAgeCompleted += HandleContextgetAgeCompleted;
        context.getAgeAsync();

    } 
```

# c# - 适用于新 iPhone 开发者的 MonoTouch 诉 Objective-C

> ID：10573607
> 
> 赞同：9
> 
> 时间：2012-05-13T17:08:10.800
> 
> 标签：c#, objective-c, ios, xamarin.ios

我正在与一家小型初创公司合作，目标是创建一个 iPhone 应用程序。我们团队的程序员都懂 C 和 Java，但我们没有 ObjC/C#/iPhone 经验——无论如何我们都会学到一些东西。我在这个主题上看到的所有问题都是从 C# 程序员进入 iOS 的角度来看的，所以我没有任何关于学习其中一个或另一个的相对优点的信息。

所以，我想知道的是 C# 和 Objective-C 对于新程序员的相对优点，在这些方面：

*   表现
*   便于使用
*   易于学习
*   可靠性（即，新的 iOS 版本会破坏 MonoTouch 应用程序吗？）

此外，使用 MonoTouch 编写代码对使用 Android 进行跨平台开发有什么好处吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T17:54:40.730

如果你的创业目标是创建一个 iPhone 应用程序，那么显然你应该学习构建 iOS 应用程序的语言，Objective-C。你的团队已经有 C 的经验，所以应该很容易上手。[Big Nerd Ranch 的书籍](http://www.bignerdranch.com/books)将在一两周内让您启动并运行（我与 Big Nerd Ranch 无关，我只是认为它们很棒）。

考虑到您的团队没有 C#/.NET 经验，我不明白您为什么要提出 MonoTouch。还有很多其他框架，例如 MonoTouch，包括[Titanium SDK](http://www.appcelerator.com/platform/titanium-sdk) (JavaScript)、[RubyMotion](http://www.rubymotion.com/) (Ruby) 等等。所有这些都很棒，但在我看来，这主要是为那些有各自语言经验的人准备的。它们允许您使用您更熟悉的语言编写 iOS 应用程序，但有以下缺点：

1.  性能可以一样好，但通常比用 Objective-C 编写的应用程序差一点（有时很多）。
2.  学习资源不如 iOS SDK/Objective-C 丰富。有很多人想要制作 iOS 应用程序，其中一些人使用这些框架，但他们在其中被稀释了。只有一小部分可用于 iOS 开发的资源将用于任何给定的框架。
3.  这些框架都是基于 iOS SDK/Objective-C 的，所以自然开发总是落后一步。如果 Apple 在下一版本的 iOS SDK 中推出全新的 API，您将不得不等待这些框架适应（用 Objective-C 编写的应用程序也可能会崩溃，但基于第 2 点）。
4.  大多数这些框架都需要熟悉 iOS SDK。您仍然需要知道应用程序`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`在启动时调用该方法，但此外您还需要记住如何将其转换为 MonoTouch 的适当方法：`public override bool FinishedLaunching (UIApplication app, NSDictionary options)`。iOS SDK 非常庞大，大多数 iOS 开发人员都依赖 Apple 的文档来获得洞察力。因此，您将查看为 Objective-C 编写的 API 文档，并将方法转换为您选择的框架。
5.  Objective-C 生态系统不断发展，出现了[CocoaPods](https://github.com/CocoaPods/CocoaPods)、[bwoken](https://github.com/bendyworks/bwoken)等很酷的新项目。这些项目主要是在开发 Objective-C 和 Xcode 的基础上进行的。将它们配置为与您选择的框架一起工作几乎总是会给您带来额外的时间和工作。

以上几点通常使我没有过多地研究这些其他框架。它们都非常酷，但它们在采用方面的主要优点似乎是促进了在 Objective-C 之外具有深厚技能的人的开发，或者允许缺乏资源投资于 Android*和*iOS 的小型团队进行跨平台开发（以及Windows Phone) 程序员。希望对采用者而言，收益超过上述成本。

> 此外，使用 MonoTouch 编写代码对使用 Android 进行跨平台开发有什么好处吗？

我想会的。事实上，[MonoTouch 主页](http://xamarin.com/monotouch)吹捧这是使用该框架的主要优势。我不太确定视图/控制器类，因为它们似乎会被绑定到`UIKit`中，但是封装在模型中的逻辑应该很容易移植。

长话短说，我认为您和您的团队应该坚持使用 Objective-C 进行 iOS 开发。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T18:28:04.067

如果你只是构建一个*iPhone*应用程序，那么一定要选择 Objective C。但如果你想要一个**移动**应用程序——可能包括 android、windows phone、windows rt、blackberry、webos 或其他选项——你可能想要仔细查看一些替代平台，其中 MonoTouch 是一个突出的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:51:32.427

Objective C 是 C 的严格超集，因此如果您了解在 ARM 上编译的 C 代码的性能特征，您可以使用您熟悉的 C 子集，iOS UI 除外。

似乎有报道称，经验丰富的 C 程序员在大约 2 周的时间内就开始加快使用 Objective C 编写 iOS 应用程序的速度。但是，当然，无论使用哪种语言，都要在持续的学习过程中学习广泛的框架和 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T02:48:05.830

就性能而言，答案一直是 Objective-C。

也就是说，看看用 HTML5 做这件事。如果您坚持使用加速转换，则应用程序前端的 HTML5 性能会出奇的好。将您的 HTML5 应用程序迁移到 Android 也很容易。

简单的答案是Objective-C。学起来也不是太难。如果你在 C 方面很扎实，在 OOP 方面很扎实，那你会没事的。

# mysql - mysql - 从数组中查找字符串

> ID：10573613
> 
> 赞同：0
> 
> 时间：2012-05-13T17:08:47.330
> 
> 标签：mysql, arrays, sql-like

数据库表：

```
编号| p1 | p2 | 笔记
1 | 1 | 一个 | 猫、老鼠、狗
2 | 1 | 一个 | 猫、马、狗

```

我现在需要运行一个查询来选择“notes”不包含 $exclusions 数组中定义的字符串的行。我已经尝试过 LIKE '%mouse%' 运算符，但这给出了错误。

```
$exclusions = 数组（“鼠标”）；
if($row['p1'] == 1 && $row['p2'] == "a" && $row['notes'] 不像 '%mouse%') {...}

```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:12:28.053

看起来您正在混合使用 PHP 代码和 sql 来执行逻辑。要在 php 中执行此操作，您可以执行

```
!strstr($row['notes'], 'mouse') 
```

上面写着“如果 $row['notes'] 中没有出现“鼠标””

这 ！如果没有发生，将使其返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:12:12.787

```
if($row['p1'] == 1 && $row['p2'] == "a" && $row['notes'] not like '%mouse%') {...} 
```

这不是 MySQL 语法。它看起来像 PHP，在 PHP 中你不能使用`LIKE`. 尝试使用字符串比较运算符，例如`strstr`. [http://php.net/manual/en/function.strstr.php](http://php.net/manual/en/function.strstr.php)

**Mysql 风格**

在没有鼠标的情况下获取所有行的查询可能是这样的：

```
 SELECT * FROM `tablename` 
 WHERE `notes` NOT LIKE '%mouse%'; 
```

或者从 php 数组中获取排除项：

```
 $condition = "WHERE ";
 $first = true;
 foreach($exclusions as $ex) {
      if(!$first) $condition .= " AND "; // or use OR
      $condition .= "`notes` NOT LIKE \"%$ex%\"";
      $first = false;
 }

 $complete_query = "SELECT * FROM `tablename` $condition;"; 
```

# .net - 在 RavenDB 中使用 Includes() 处理非规范化，以检索最新数据

> ID：10573615
> 
> 赞同：0
> 
> 时间：2012-05-13T17:09:06.317
> 
> 标签：.net, ravendb

我在 RavenDB 中保留了这样的实体：

```
public class Project: RootAggregate
{        
    public string Name { get; set; }        
}

public class Profile: RootAggregate
{
    public string User { get; set; }
    public IList<Project> FavoriteProjects { get; set; }
} 
```

因为，它是文档数据库，而不是关系数据库，所以它是非规范化的，应该没问题。无论如何，我没有这样设计：

```
public class Profile: RootAggregate
{
    public string User { get; set; }
    public IList<string> FavoriteProjectsIds { get; set; }
} 
```

但有时我必须加载最新的项目（对于这种情况，使用最新的名称）。[我在Ayende 博客](http://ayende.com/blog/4584/ravendb-includes)上读过可以使用`Include()`，如下所示：

```
var profile = session.Include<Project>(x => x.Id)
                     .Load<Profile>(Id); 
```

首先我认为声明：

```
var projects = profile.FavouriteProjects; 
```

会给我合并的最新结果，但没有。我很困惑，但后来我进一步阅读，意识到没关系，但下面的查询应该不会第二次到达数据库（据我了解 Ayende 的帖子）：

```
var projectsIds = profile.FavoriteProjects.Select(x => x.Id).ToList();
var projects = session.Load<Project>(projectsIds); 
```

我对吗？我问是因为在博客中有关于单个实体（`Customer`）的演讲，而我想检索整个最新的集合（`IList<Project>`）。

接下来，如果在获取与配置文件相关联的新项目时，我想同时搜索索引配置文件（因为我没有他们的 ID），例如如下所示（不允许这样的构造）：

```
var profile = session.Include<Project>(x => x.Id)
                     .Query<Profile>()
                     .Single(x => x.User == "jwa"); 
```

可以通过某种方式完成，还是需要我“自己”检索最新的项目，如下所示？

```
var profile = session.Query<Profile>().Single(x = x.User == "jwa");
var projectsIds = profile.FavoriteProjects.Select(x => x.Id).ToList();
var projects = session.Load<Project>(projectsIds); 
```

是否应该重新设计以更具关联性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:23:15.133

很抱歉，我很难回答您的问题，但是，我会尝试为您的情况提供更一般的答案。

包含功能的目的是消除对数据库的后续请求的需要，以便获取您在初始请求中获得 id 的文档。假设您有这样的模型：

```
public class Project
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class Profile
{
    public string Id { get; set; }
    public string Username { get; set; }
    public IList<string> FavoriteProjectIds { get; set; }
} 
```

现在，如果你想加载配置文件，你可以这样做：

```
var profile = session.Load<Profile>("profiles/daniel"); 
```

这将为您提供包含该用户所有喜欢的项目的 ID 的配置文件文档。假设您要显示项目名称列表。你会做这样的事情：

```
var favoriteProjects = session.Load<Project>(profile.FavoriteProjectIds); 
```

这工作得很好，但是，它产生了两个对数据库的请求。如果您在嵌入式模式下运行，这对您来说无关紧要，但如果您有一个远程 ravendb 服务器，您可能希望消除第二个 http 请求，因为无论如何您都不需要它。该`.Include<T>()`功能派上用场：

```
var profile = session.Include<Profile>(x => x.FavoriteProjectIds)
                     .Load("profiles/daniel");
var favoriteProjects = session.Load<Project>(profile.FavoriteProjectIds); 
```

这段代码只会进入数据库一次，这就是它更快的原因。请注意我们如何在 Include 调用中指定类型参数 - 这只是因为我们希望在参数中支持 lambda 表达式，并且与包含文档的类型无关。

这就是使用 Include 的工作方式。为了简单起见，我建议采用这种方法。如果您真的想获得最大的性能，或者您有其他原因不使用这种方法（例如，配置文件和项目不在同一个分片上的分片环境），您可以将项目的*某些*部分非规范化到您的配置文件中.

这里要注意的重要一点 - 您永远不想在配置文件文档中对整个项目文档进行非规范化。假设您需要在应用程序的某处显示用户的个人资料页面。在此页面上，您还希望显示用户最喜欢的项目列表。您真正需要什么来显示该列表？

在这种情况下，您只需要对项目名称进行非规范化以构建正确的 html 链接（无论如何您都有 id）。用代码来说，你可能有一个如下所示的类：

```
public class DenormalizedProject
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

...并且您的个人资料类将包含这样的属性...

```
public IList<DenormalizedProject> FavoriteProjects { get; set; } 
```

使用这种方法，您拥有在一个文档中显示个人资料页面所需的一切，甚至不需要使用 Include 来获取该信息。但是，这是有代价的——您现在必须维护非规范化的项目名称。如果它是不可变的，很好，但在大多数情况下，用户可以更改它，然后您必须确保所有非规范化引用也得到更新（使用批处理命令或只是加载和更新所有包含的文档）。在采用非规范化方法之前，您肯定要考虑这一点。

# c++ - .txt 到矢量 过错

> ID：10573619
> 
> 赞同：0
> 
> 时间：2012-05-13T17:09:46.990
> 
> 标签：c++, input, vector, struct

我目前正在完成我的学校考试项目。我要创建一个用户数据库，您可以在其中通过帐户登录并向系统中的其他人发送消息。但是有几个错误，我直到现在才发现。程序第一次执行时，会将用户数据库复制成.txt格式，像这样（userlist.txt），

```
created: Sun May 13 18:41:08 2012
mod_date: Sun May 13 18:41:08 2012

ID:1
created:Sun May 13 18:41:08 2012
name:admin
password:Admin1
security level:2
status:active 
```

这很好用，因为它是从向量复制的。但是我必须做相反的过程，当我第二次打开程序时（除非我删除了 userlist.txt），并且向量似乎包含错误的信息。很难解释，因此我将源代码上传到了 mediafire。我猜总共有 600 行代码，但我只认为 main.cpp 以及 dbmani.h 中的函数 login() 和 writedb() （其中向量是在类中定义的）是查看问题所必需的. 代码的第一行在这里（如果存在，向量将从 userlist.txt 接收输入），希望您不必下载我所有的源代码，

```
int main()
{

    system("mkdir messages");
    ifstream inFile;
    inFile.open("userlist.txt");

    if(inFile.good())   // If userlist.txt exist - therefore an existing user database exist.
    {
        // ADD DATE OF MODIFICATION
        cout << "USERLIST FOUND, READING USERS.\n\n";
        userstats tempBuffer;
        int userCount = -1;
        int overCount = 0;
        string buffer;

        while(getline(inFile, buffer))
        {
            if (0 == buffer.find("ID:"))
            {
                userCount++;

                if (userCount > overCount)
                {

                    userbase.users.push_back(tempBuffer);
                    overCount++;

                }
                buffer.erase(0, 3);
                tempBuffer.ID = buffer;

            }
            else if (0 == buffer.find("created:"))
            {

                buffer.erase(0, 8);
                tempBuffer.date = buffer;

            }
            else if (0 == buffer.find("name:"))
            {

                buffer.erase(0, 5);
                tempBuffer.name = buffer;

            }
            else if (0 == buffer.find("password:"))
            {
                buffer.erase(0, 9);
                tempBuffer.password = buffer;
            }
            else if (0 == buffer.find("status:"))
            {
                buffer.erase(0,7);
                if (buffer == "active")
                    tempBuffer.active = true;
                else if (buffer == "inactive")
                    tempBuffer.active = false;
            }

        }
        if (userCount == 0)
        {
            userbase.users.push_back(tempBuffer);
        }

        inFile.close();
    }
    else    // If no userlist.txt exists, create new one from vector. This instance works, but there is only one user
    {
        cout << "NO USERS FOUND, CREATING NEW LIST.\n";
        inFile.close();

        // Determine current date
        time_t rawtime;
        struct tm * timeinfo;

        time (&rawtime );
        timeinfo = localtime ( &rawtime );
        string cdate = asctime(timeinfo);

        userstats userBuffer = {"1", cdate, "admin", "Admin1", admin, 1};
        userbase.users.push_back(userBuffer);

        ofstream outFile("userlist.txt");

        outFile << "created: " << cdate;
        outFile << "mod_date: " << cdate << "\n\n";
        outFile << "ID:" << userbase.users[0].ID << "\n";
        outFile << "created:" << userbase.users[0].date;
        outFile << "name:" << userbase.users[0].name << "\n";
        outFile << "password:"<< userbase.users[0].password << "\n";
        outFile << "security level:" << userbase.users[0].secLev << "\n";
        outFile << "status:active\n\n";

        outFile.close();
    }

    // CHECK DIR
    char ch;
    cout << "Choices are listed below\n";
    cout << "1) login\t2) Register an Account\n"
         << "q) Quit.\n";
    cout << "Select option: ";

    bool breakFlag = false;
    while (breakFlag == false && cin.get(ch))
    {
        cin.ignore();
        // Could use getch to eliminate errors instead.

        switch (ch)
        {
            case '1':   int logID;
                        logID = userbase.login();
                        if (logID)
                        {
                            logID -= 1;
                            loggedin(logID);
                        }
    ... 
```

另外，如果我在 dbmani.h 中使用 regAcc() 注册了第二个帐户“admina”，我注意到我的用户列表看起来像这样（创建第三个帐户将覆盖第二个帐户），

```
created: Sun May 13 18:41:08 2012
mod_date: Sun May 13 19:08:01 2012

ID:1
created:Sun May 13 18:41:08 2012name:admin
password:Admin1
status:active

ID:2
created:Sun May 13 19:08:01 2012
name:admina
password:Admin1
security level:0
status:active 
```

这里是源代码，如果你喜欢它： [http ://www.mediafire.com/download.php?6dp6sxn952j7s37](http://www.mediafire.com/download.php?6dp6sxn952j7s37)

如果有人愿意花一些时间帮助我，我将非常感激，如果只是解决“.txt to vector”问题，因为我的时间不多了，而且我真的看不到错误。我试着在网上寻找，但我似乎没有找到任何关于它的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:37:10.137

不看压缩代码，我突然想到了一些事情：

1) 您正在搜索字符串“created”，但您会发现它位于文件的最开头，它不是记录的一部分，会产生误报

2）在读取 .txt 文件结束时，您似乎没有将最后一条记录添加到记录向量中（除非用户总数为 0，这似乎不太可能）

3) tempBuffer 永远不会被清除，因此如果记录 4 有创建日期，而记录 5 没有，则记录 5 将与记录 4 的创建日期一起存储。

当找到“ID：”时，我倾向于一次读取整个记录，例如：

```
if (0 == buffer.find("ID:"))
{
    tempBuffer.ID = buffer.substr(3);
    if (!getline(inFile, buffer) || buffer.find("created:") != 0)
    {
        cerr << "Error reading record for ID" << tempBuffer.ID << endl;
        exit(1);
    }

    tempBuffer.date = buffer.substr(8);
    // ...etc

    userbase.users.push_back(tempBuffer);
} 
```

希望这也有助于消除文件格式中的错误。

# ios - IOS：带路线的地图

> ID：10573621
> 
> 赞同：5
> 
> 时间：2012-05-13T17:10:13.933
> 
> 标签：ios, mapkit, routes

在我的应用程序中，我应该创建一个视图控制器，里面应该是一张地图；在这张地图中，我应该看到一条连接两个引脚的路线。（因为我有两个别针）所以我想知道获得这个结果的最佳解决方案是什么；再次我应该看到两种类型的路线：一条有汽车的路线和一条步行路线……有没有可以帮助我的框架？（因为 mapkit 不能解决我的问题）谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:57:08.817

如果您使用 UIWebView，则可以使用 javascript 并基本上免费获得该功能，因为正如您所说，MapKit 不提供该功能。这很简单，查看[这个谷歌地图教程了解基础知识](https://developers.google.com/maps/articles/tutorial-iphone)。当然，通过这种方式，您可以获得 html 和 javascript 的所有优点和缺点。

您只需将您的 javascript 代码写入一个 html（这里是`map.html`），然后将其放入您的项目文件夹中，然后像这样启动该 html 文件。

```
NSString *html = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"map" ofType:@"html"] encoding:NSUTF8StringEncoding error:&error];
  [self.mapView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

你像这样从objective-c调用一个javascript函数。在这里，在 map.html 中有一个名为`setMarkerAtPosition(latitude, longitude)`. 很直接。

```
[self.mapView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"setMarkerAtPosition(%f,%f)",latlong.latitude, latlong.longitude]]; 
```

**根据要求编辑：**

您添加一个 UIWebView 并将其连接到控制器（如果您不知道如何执行此操作，则绝对应该退后一步并做一些基本教程）（不要忘记合成 mapView。再次，如果您不知道那是什么做基础阅读）

```
#import <UIKit/UIKit.h>
@interface MapViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIWebView *mapView;
@end 
```

然后将以下代码放入您的 viewDidLoad 方法中。它会创建一个 NSString 并使用本地 html 文件的内容对其进行初始化（就像已经发布的一样）。然后，调用 UIWebView 的 loadHTMLString 方法。html 字符串基于您的本地 html 文件`map.html`（只需将其命名，如果您尚未添加它，只需将其拖放到您的项目中）。

```
- (void)viewDidLoad
{
  [super viewDidLoad];
    NSError *error = nil;
  // create NSString from local HTML file and add it to the webView
  NSString *html = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"map" ofType:@"html"] encoding:NSUTF8StringEncoding error:&error];
  [self.mapView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];  
  [self.view sendSubviewToBack:self.mapView];
} 
```

接下来将一个按钮添加到您的视图（界面构建器，您应该知道如何）并将其连接到一个方法。在这个方法里面，放这个代码（这会给你一个德国的路线）

```
[self.mapView stringByEvaluatingJavaScriptFromString:@"calculateRoute(50.777682, 6.077163, 50.779347, 6.059429)"]; 
```

最后，把它作为你`map.html`文件的内容（注意；里面还有一些没用的东西，但你以后可以弄清楚。我删除了所有你不需要显示路线的代码，但里面有很多标题没用）：

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<script type="text/javascript" src="http://maps.google.de/maps/api/js?sensor=false&region=DE"></script>
<script src="http://www.google.com/jsapi"></script>
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script src="json.js"></script>
<script type="text/javascript">google.load("jquery", "1");</script> 
<script type="text/javascript"> google.load("maps", "3", {other_params:"sensor=false"}); </script> 
<script type="text/javascript">

  // global variables
  var currentPosition;
  directionsDisplay = new google.maps.DirectionsRenderer();
  var directionsService = new google.maps.DirectionsService();
  var map;

  var infowindow = new google.maps.InfoWindow();

  // calculates the current userlocation
  function getCurrentLocation(){
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error);
    } else {
      alert('geolocation not supported');
    }
  }

  // called when the userLocation has been located
  function success(position) {
    currentPosition = position;
    drawMap(position.coords.latitude, position.coords.longitude);
  }

  // called when the userLocation could not be located
  function error(msg) {
    alert('error: ' + msg);
  }

  // calculate and route from-to and show on map
  function calculateRoute(fromLat, fromLong, toLat, toLong){
      var start =  new google.maps.LatLng(fromLat, fromLong);
      var end = new google.maps.LatLng(toLat, toLong);
      var request = {
          origin:start, 
          destination:end,
          travelMode: google.maps.DirectionsTravelMode.WALKING
      };
      directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
             directionsDisplay.setDirections(response);
          }
      });
      directionsDisplay.setMap(map);
  }

  // draws the inital map and shows userlocation
  function drawMap(latitude, longitude) {
    var latlng = new google.maps.LatLng(latitude, longitude);
      var myOptions = {
      disableDefaultUI: true,
      zoom: 15,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
      google.maps.event.addListener(map, 'click', function() {if(infowindow){infowindow.close();}});
      setMarkerAtPosition(latitude, longitude);
  }

</script>
</head>
<body onload="getCurrentLocation()">
 <div id="map_canvas" style="width:100%; height:100%">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:09:41.583

请参阅本教程以在 mkmapview 中绘制折线或路线

1>[使用mapkit绘制路线](http://spitzkoff.com/craig/?p=65)

2>从ios4.0以上的版本可以使用[MKOverlayPathView See Apple Docs](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKOverlayPathView_class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T19:41:21.780

您可以向 Google Maps 询问该路线，解析 json 答案并在地图上显示一条线作为 PolyLineView。这就是它在 iOS 地图应用程序上的工作方式。[在https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)检查 Google Maps Route API

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T13:06:33.813

您可以使用网络视图并打开网址

[https://maps.google.com/maps?saddr=START_LOCATION&daddr=DESTINATION_LOCATION](https://maps.google.com/maps?saddr=START_LOCATION&daddr=DESTINATION_LOCATION)

这将根据需要打开一个网页。

您可以输入一对（纬度，经度）或直接城市名称。

希望对你有帮助

# php - Mysql：无法添加或更新子行：外键约束失败

> ID：10573622
> 
> 赞同：0
> 
> 时间：2012-05-13T17:10:26.773
> 
> 标签：php, mysql, database

首先，我知道有很多关于这个主题的帖子，但我检查过的帖子对我没有帮助，所以我想发布我的问题。

我正在建立一个网站，人们可以注册为用户，然后为我填写一些不同的表格。我有 2 个表，一个是“用户”，另一个是“表单”表。在用户表中，我有 user_id，它是 auto_incremented，并且这个 id 作为外键连接到“form”表。我想查看哪些用户通过 user_id 填写了表单。当我尝试将填写的表单注册到数据库时，我收到“无法添加或更新子行：外键约束失败”消息。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:22:39.327

这主要发生**在表中有数据**并且您想要创建/编辑/删除foreign_key
或者
您想要使其成为foreign_key的字段与Table字段的格式不同时

解决方案：
您必须进行
1）备份或复制您的数据
2）删除外键
3）并从表中截断数据
4）最后重新附加外键
5）更新您的数据

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:13:36.570

如果您已将表单表上的 user_id 设置为指向用户表中 user_id 的外键，则在插入表单行时必须提供有效的 user_id。

您可以将表单表上的 user_id 字段设置为 NULL，这意味着不必设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:21:30.307

您正在尝试将一些数据添加到您的外键列中，而其他表中没有相同的数据。

# objective-c - 当前的 Apple 文档中有关高级内存管理的内容是否有轻微的不准确之处？

> ID：10573623
> 
> 赞同：5
> 
> 时间：2012-05-13T17:10:28.320
> 
> 标签：objective-c, cocoa

Apple 的[Advanced Memory Management 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)写得很好而且很精确，但我想知道它的图表：

（我的是当前版本 2011-09-28）

![在此处输入图像描述](../Images/6fbfab6ee660fbdfb159b3f1d3256efa.png)

图中 and 之后`alloc`，`init`引用计数（或保留计数）为 1，这是基本的内存管理规则。之后`retain`，引用计数现在是 2。然后 C 类向`copy`对象发送消息，之后，对象的引用计数仍然为 2。新对象的引用计数为 1。

到目前为止这符合规则，但是接下来，在图的顶部，A 类向`release`对象发送消息，引用计数应该是 1？该图有一个 2 代替。然后 B 类也向`release`对象发送消息，现在引用计数应该为 0。图中显示的是 1。这是正确的，或者可能有不同的方式来阅读图表，或者上面的某些概念不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:21:02.543

我认为该图在两个方面有点误导。一是对于分配和保留步骤，相关的计数是操作的结果。然而，在释放步骤中，计数似乎是操作前的状态。这对我来说很有意义，因为**没有**“Destroyed”方法可以导致 1 到 0 的转换。

另一个具有误导性的部分是，我认为保留计数从未真正变为零，而且我看到人们因相信它确实变为零而感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:21:16.170

简单读为：在发布消息之前它的保留计数为 2，然后为 1。

为了更好地理解，最好将保留计数放在保留/分配消息中对象圈的右侧。

# mysql - MySQL 查询问题：无法从另一个表中选择列

> ID：10573624
> 
> 赞同：0
> 
> 时间：2012-05-13T17:10:43.217
> 
> 标签：mysql, select, mysqli

我的 SQL 语句看起来像这样

```
SELECT SQL_CALC_FOUND_ROWS q.id, q.question, sb.subject, c.chapter, sc.section, p.paragraph 
FROM questions AS q
     , subjects AS sb
     , sections AS sc
     , chapters AS c
     , paragraphs AS p 
WHERE (sb.id=q.subject AND c.id=q.chapter AND sc.id=q.section AND p.id=q.paragraph) AND (q.author_id=1) 
ORDER BY  q.id asc 
LIMIT 0, 25 
```

如您所见，这些表通过 id 相互关联。问题是，我得到`subject`的是表格列`questions`而不是表格`subject`列`subjects`。我在这里想念什么？

笔记

我提供了主题作为示例。实际上所有三个部分 AS sc、章节 AS c、段落 AS p 都不起作用。我得到的只是主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:18:50.837

显然，您的问题中的查询很好，但仍要使用此语句来挖掘它，并查看 subject_subject 列中出现的**内容**：

```
SELECT SQL_CALC_FOUND_ROWS q.id, q.question, sb.subject as subjects_subject, c.chapter, sc.section, p.paragraph 
FROM questions AS q
     , subjects AS sb
     , sections AS sc
     , chapters AS c
     , paragraphs AS p 
WHERE (sb.id=q.subject AND c.id=q.chapter AND sc.id=q.section AND p.id=q.paragraph) AND (q.author_id=1) 
ORDER BY  q.id asc 
LIMIT 0, 25 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:27:16.687

我通常明确地使用 JOIN 语法。这有时会给你更好的错误输出，以帮助追踪问题。

这是原始格式，因此您可以轻松查看差异。

```
SELECT SQL_CALC_FOUND_ROWS q.id, q.question, sb.subject, c.chapter, sc.section, p.paragraph 
FROM questions AS q, 
     subjects AS sb, 
     sections AS sc, 
     chapters AS c, 
     paragraphs AS p 
WHERE (sb.id=q.subject 
       AND c.id=q.chapter 
       AND sc.id=q.section 
       AND p.id=q.paragraph) 
      AND (q.author_id=1) 
ORDER BY  q.id asc 
LIMIT 0, 25 
```

这是经过编辑的版本 - 请注意定义表如何挂钩的 WHERE 子句参数已作为 ON 子句向上移动到表名列表中。这是 INNER JOIN 语法的一部分，即： INNER JOIN ON 。

```
SELECT SQL_CALC_FOUND_ROWS q.id, q.question, sb.subject, c.chapter, sc.section, p.paragraph 
FROM questions AS q
  INNER JOIN subjects AS sb ON sb.id = q.subject
  INNER JOIN sections AS sc ON sc.id = q.section 
  INNER JOIN chapters AS c ON c.id = q.chapter
  INNER JOIN paragraphs AS p ON p.id = q.paragraph
WHERE (q.author_id=1) 
ORDER BY  q.id asc 
LIMIT 0, 25 
```

如果您尝试直接针对 MySQL 运行它，会发生什么？

# c# - Blend 项目在 Blend 5 (Windows 8 Consumer Preview) 中创建为空

> ID：10573626
> 
> 赞同：0
> 
> 时间：2012-05-13T17:10:44.887
> 
> 标签：c#, xaml, expression-blend, windows-8, winrt-xaml

我正在尝试使用 Blend（在 Windows 8 消费者预览版中）创建一个 Metro 风格的项目。

我启动 Blend，选择“New Project”并选择 C#（Metro 风格的应用程序）。

无论我选择哪个项目，项目都是空的：

![在此处输入图像描述](../Images/dc5e07dba6dc1d3ec2e0bb1890e65c9e.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:53:23.720

你确定你有正确的 Blend 版本吗？我目前在 CP 上使用的是 5.0.30129.0。你说“C#（Metro 风格应用程序）”，我当前的 Blend 提供“XAML（Windows Metro 风格）”——这可能是旧版本的指示。

或者，您的 Blend 安装已损坏。所以可能重新安装可能会有所帮助。

但是我从不在 Blend 中创建新项目。**我总是在 Visual Studio 中创建它们，然后只在 Blend 中打开 .sln 文件。**我建议您尝试这种方法作为第一步。

只是为了说明......在我的例子中，创建对话框如下所示：

![混合 - 新项目](../Images/06462f55374dc8c22dcc1ae1798e1c31.png)

确定后这是我的解决方案资源管理器：

![混合 - 新项目](../Images/2256d829c48b1a41c0b4b2656528e2a3.png)

# java - 在 Netty 中处理多格式数据

> ID：10573627
> 
> 赞同：3
> 
> 时间：2012-05-13T17:10:56.740
> 
> 标签：java, forms, httprequest, netty, form-processing

有这样的客户

```
StringBody body = new StringBody("form_username", Charset.forName("UTF-8"));
multipart.addPart("username", body);
ByteArrayBody bBody = new ByteArrayBody(bs, "form_command.dat");
multipart.addPart("data", bBody);
httppost.setEntity(multipart); 
```

应该如何在 netty 服务器中检索值。我已经在管道中添加了一个 HttpRequestDecoder。并且 messageReceived 这样处理

```
HttpRequest request = (HttpRequest) e.getMessage();
    this.mRequest = request;

    if (is100ContinueExpected(request)) {
        send100Continue(e);
    }

    ChannelBuffer content = request.getContent();
    if (content.readable()) {

        System.out.println("Content()\n" + content.toString(CharsetUtil.UTF_8) + "\r\n");

    } 
```

打印输出。

```
Content()
--Xdq2t6unVsUp191MKhpR6BXz5P7Eoo
Content-Disposition: form-data; name="username"
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

form_username
--Xdq2t6unVsUp191MKhpR6BXz5P7Eoo
Content-Disposition: form-data; name="data"; filename="form_command.dat"
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary

--Xdq2t6unVsUp191MKhpR6BXz5P7Eoo--

End of contents 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:03:44.360

您需要使用新的[HttpPostRequestDecoder](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java)。这仅在即将发布的 Netty 3.5（3 分支）和 Netty 4（主分支）中可用。

这里是一个示例[用法](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/upload/HttpUploadServerHandler.java)。

如果您现在需要使用它，您可以将这个[拉取请求](https://github.com/netty/netty/pull/286)中提到的文件复制到您的项目命名空间中并使用它。

希望这可以帮助。

# javascript - 一个页面上有多个表单，每个表单都可以提交

> ID：10573632
> 
> 赞同：0
> 
> 时间：2012-05-13T17:11:35.090
> 
> 标签：javascript, forms

如何在一个页面上有多个表单，每个表单都可以提交自己。当我这样设置时，第一个表单提交，但第二个不起作用。有关如何使其工作的任何建议？（我将在 1 页上有很多这样的表格）

谢谢

```
<form action="/order-form2.php" method="post">
<input type="hidden" name="phoneType" value="iPhone 2g - 4GB//ATT">
 <input type="hidden" name="price" value="75">
<div class="prodSize"><a href="#" onclick="document.forms[0].submit();">4 GB</a></div> 
</form>

   <form  action="/order-form2.php">
<input type="hidden" name="phone" value="iPhone 2g - 8GB//ATT">
 <input type="hidden" name="price" value="25">
<div class="prodSize"><a href="#" onclick="document.forms[1].submit();">8 GB</a></div> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:21:19.227

第一个表单设置方法为 post，第二个没有，如果你用 POST 捕获则它是空的，设置方法为 post 或用 GET 捕获，如果它没有设置方法，默认是 GET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:23:50.283

将此用于第二种形式，它将起作用。如果没有方法，默认方法设置为获取。

```
<form action="/order-form2.php" method="post"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:25:52.957

请使用以下

```
<form name='form1' id='form1' method='POST' action='/order-form1.php'>
    <a href="#" onclick='return document.forms.form1.submit();'>4 GB</a>
</form> 
```

注意分配给表单的 id 和 name 属性，在 javascript 中使用

# indexeddb - 索引数据库 - 数据库在被删除并提供另一个名称后未定义

> ID：10573634
> 
> 赞同：0
> 
> 时间：2012-05-13T17:11:46.393
> 
> 标签：indexeddb

我有以下代码可以创建一个数据库并允许我对其执行基本操作，这通常可以正常工作（我知道它不是最优雅的代码，但我只是在一分钟内测试分配：P）.....但是，当我使用删除功能并刷新页面（包括在擦除所有浏览数据等之后）时，数据库不会再次打开并且我得到一个未定义的错误，关于为什么会发生这种情况的任何想法？

ps 我知道数据库的名称与删除函数中的名称不同，这是我试图创建一个新的

```
// Browser support detection
    var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;

    // Transaction object for use with CRUD
    var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;

    (function () {     

        var db;

        var memberInfo = [
            { memID: "001", forename: "John", surname: "Smith", dob: "23/01/1987", password: "password123", gID: "1" },
            { memID: "002", forename: "Bob", surname: "Smith", dob: "17/05/1934", password: "password123", gID: "2" },
            { memID: "003", forename: "Frank", surname: "Smith", dob: "17/05/1990", password: "password123", gID: "2" },
            { memID: "004", forename: "Alan", surname: "Smith", dob: "17/05/1985", password: "password123", gID: "1" },
            { memID: "005", forename: "Tony", surname: "Smith", dob: "17/05/1978", password: "password123", gID: "3" }

        ];

        var gradeInfo = [
            { gID: "1", type: "GOLD", cost: "£200.00" },
            { gID: "2", type: "SILVER", cost: "£125.00" },
            { gID: "3", type: "BRONZE", cost: "£75.00" }

        ];

        var facInfo = [
            { memID: "001", factype: "Squash"},
            { memID: "001", factype: "Martial Arts"},
            { memID: "002", factype: "Swimming"},
            { memID: "004", factype: "Squash"},
            { memID: "004", factype: "Tennis"},
            { memID: "004", factype: "Swimming"},
            { memID: "005", factype: "Football"},
            { memID: "005", factype: "Archery"}

        ];

        function initDb() {

            // Open call is used to open database with given name & set DB version
            var request = indexedDB.open("HaleSportsClub", 1); 

            // Function used to get database object from request and store for user
            request.onsuccess = function (evt) {
                db = request.result;                                                
            };

            request.onerror = function (evt) {
                alert("Database did not open: " + evt.target.message); // !!!!!
            };

            // Fire when version is smaller than one provided (by open call)
            request.onupgradeneeded = function (evt) { 

                var db = evt.target.result;

                // Each object store resembles a table in RDBMS              
                var memberObject = db.createObjectStore("members", { keyPath: "memID" });
                var gradeObject = db.createObjectStore("grades", { keyPath: "gID" });
                var facObject = db.createObjectStore("facilities", { keyPath: "memID" });

                // Creates searchable indexes (??)

                memberObject.createIndex("forename", "forename", { unique: false });
                memberObject.createIndex("surname", "surname", { unique: false });
                memberObject.createIndex("gID", "gID", { unique: false });
                facObject.createIndex("memID", "memID", { unique: false });

                for (i in memberInfo) {
                    memberObject.add(memberInfo[i]);
                }

                for (i in gradeInfo) {
                    gradeObject.add(gradeInfo[i]);
                }

                for (i in facInfo) {
                    facObject.add(facInfo[i]);
                } 

            };

            request.onblocked = function (evt){

                alert("database currently being upgraded, try again soon");
            }

        }

        function contentLoaded() {

            initDb(); 
```

// 此区域包含添加/删除等功能，但出于此问题的目的，我已将其取出

```
 }

        window.addEventListener("DOMContentLoaded", contentLoaded, false); // starts functions

})(); 
```

我使用此代码删除数据库：

```
 function delDB() {

                    var dbreq = indexedDB.deleteDatabase("HSC_Member_Database");

                    try{
                        dbreq.onsuccess = function (event) {
                            var output = document.getElementById("printOutput");
                            output.innerHTML = "deleted";

                        }

                        dbreq.onerror = function (event) {
                            console.log("Database error code: " + event.target.errorCode);
                        }

                    }catch(e){
                        console.log("Database error code: " + e.target.errorCode);
                    }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:24:28.400

升级后遇到问题时要尝试的一件事是增加数据库版本号：

```
var request = indexedDB.open("HaleSportsClub", 2); 
```

# java - Android 多点触控无法正常工作

> ID：10573637
> 
> 赞同：1
> 
> 时间：2012-05-13T17:11:57.337
> 
> 标签：java, android, surfaceview, multi-touch

我正在为基于 android 中的surfaceview 的游戏设计虚拟按钮。我已经重写了 onTouch(MotionEvent event) 方法来执行多点触控功能，但它的行为并不符合我的预期。当一根手指被触摸时，第二根手指不会被识别，因此我无法按需要执行这些功能。这是我覆盖的方法的代码。

```
@Override
public boolean onTouchEvent(MotionEvent event){

    touchX = (int)event.getX();
    touchY = (int)event.getY();

    int action = event.getActionMasked();//event.getAction() & MotionEvent.ACTION_MASK;

    if(touchX >= 0 && touchX <= leftbutton.getWidth() && touchY >= this.getHeight() - 100 && touchY <= this.getHeight()){
        if (action == MotionEvent.ACTION_DOWN){
            starship.setLeftRight(1, 0, true);
            leftButton.update(touchedleftbutton);
        }
        else if (action == MotionEvent.ACTION_UP){
            starship.setLeftRight(0, 0, false);
            leftButton.update(leftbutton);
        }
        else if (action == MotionEvent.ACTION_POINTER_DOWN){
            starship.setLeftRight(1, 0, true);
            leftButton.update(touchedleftbutton);
        }
        else if (action == MotionEvent.ACTION_POINTER_UP){

            starship.setLeftRight(0, 0, false);
            leftButton.update(leftbutton);
        }
    }
    else if (touchX >= 20 + leftbutton.getWidth() && touchX <= 20 + leftbutton.getWidth() + rightbutton.getWidth() && touchY >= this.getHeight() - 100 && touchY <= this.getHeight()){
        if (action == MotionEvent.ACTION_DOWN){
            starship.setLeftRight(0, 1, true);
            rightButton.update(touchedrightbutton);
        }
        else if (action == MotionEvent.ACTION_UP){
            starship.setLeftRight(0, 0, false);
            rightButton.update(rightbutton);
        }
        else if (action == MotionEvent.ACTION_POINTER_DOWN){
            starship.setLeftRight(0, 1, true);
            rightButton.update(touchedrightbutton);
        }
        else if (action == MotionEvent.ACTION_POINTER_UP){
            starship.setLeftRight(0, 0, false);
            rightButton.update(rightbutton);
        }
    }

    else if(touchX >= this.getWidth() - shootbutton.getWidth() && touchY >+ this.getHeight() - 100 && touchY < this.getHeight()){
        if (action == MotionEvent.ACTION_DOWN){

            shootButton.update(shoottouched);
        }
        else if (action == MotionEvent.ACTION_UP){

            shootButton.update(shootbutton);
        }
        else if (action == MotionEvent.ACTION_POINTER_DOWN){

            shootButton.update(shoottouched);
        }
        else if (action == MotionEvent.ACTION_POINTER_UP){

            shootButton.update(shootbutton);
        }
    }

    return true;        
} 
```

- - - - - - - - - - - - - - - - - - - - - - - 编辑 - - --------------------------------------

我能够解决我的问题，现在一切正常。这是我更新的代码。希望它可以帮助任何与我有同样问题的人。

```
@Override
public boolean onTouchEvent(MotionEvent event){

    int action = event.getActionMasked();//event.getAction() & MotionEvent.ACTION_MASK;
    int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >> MotionEvent.ACTION_POINTER_ID_SHIFT;
    int pointerID = event.getPointerId(pointerIndex);
    int pointerCount = event.getPointerCount();

    touchX = new int[pointerCount];
    touchY = new int[pointerCount];

    for(int i = 0; i<pointerCount; i++){

        touchX[i] = (int) event.getX(i);
        touchY[i] = (int) event.getY(i);

    }
    switch(action){

    case MotionEvent.ACTION_DOWN:
        if(touchX[0] >= 0 && touchX[0] <= leftbutton.getWidth() && touchY[0] >= this.getHeight() - 100 && touchY[0] <= this.getHeight()){
            starship.setLeftRight(1, 0, true);
            leftButton.update(touchedleftbutton);

        }
        else if (touchX[0] >= 20 + leftbutton.getWidth() && touchX[0] <= 20 + leftbutton.getWidth() + rightbutton.getWidth() && touchY[0] >= this.getHeight() - 100 && touchY[0] <= this.getHeight()){

            starship.setLeftRight(0, 1, true);
            rightButton.update(touchedrightbutton);
        }
        else if(touchX[0] >= this.getWidth() - shootbutton.getWidth() && touchY[0] >+ this.getHeight() - 100 && touchY[0] < this.getHeight()){
            shootButton.update(shoottouched);
        }

        break;

    case MotionEvent.ACTION_UP:
        if(touchX[0] >= 0 && touchX[0] <= leftbutton.getWidth() && touchY[0] >= this.getHeight() - 100 && touchY[0] <= this.getHeight()){
            starship.setLeftRight(0, 0, false);
            leftButton.update(leftbutton);

        }
        else if (touchX[0] >= 20 + leftbutton.getWidth() && touchX[0] <= 20 + leftbutton.getWidth() + rightbutton.getWidth() && touchY[0] >= this.getHeight() - 100 && touchY[0] <= this.getHeight()){

            starship.setLeftRight(0, 0, false);
            rightButton.update(rightbutton);
        }
        else if(touchX[0] >= this.getWidth() - shootbutton.getWidth() && touchY[0] >+ this.getHeight() - 100 && touchY[0] < this.getHeight()){
            shootButton.update(shootbutton);
        }

        break;

    case MotionEvent.ACTION_POINTER_DOWN:
        if(touchX[pointerID] >= 0 && touchX[pointerID] <= leftbutton.getWidth() && touchY[pointerID] >= this.getHeight() - 100 && touchY[pointerID] <= this.getHeight()){
            starship.setLeftRight(1, 0, true);
            leftButton.update(touchedleftbutton);

        }
        else if (touchX[pointerID] >= 20 + leftbutton.getWidth() && touchX[pointerID] <= 20 + leftbutton.getWidth() + rightbutton.getWidth() && touchY[pointerID] >= this.getHeight() - 100 && touchY[pointerID] <= this.getHeight()){

            starship.setLeftRight(0, 1, true);
            rightButton.update(touchedrightbutton);
        }
        else if(touchX[pointerID] >= this.getWidth() - shootbutton.getWidth() && touchY[pointerID] >+ this.getHeight() - 100 && touchY[pointerID] < this.getHeight()){
            shootButton.update(shoottouched);
        }

        break;

    case MotionEvent.ACTION_POINTER_UP:
        if(touchX[pointerID] >= 0 && touchX[pointerID] <= leftbutton.getWidth() && touchY[pointerID] >= this.getHeight() - 100 && touchY[pointerID] <= this.getHeight()){
            starship.setLeftRight(0, 0, false);
            leftButton.update(leftbutton);

        }
        else if (touchX[pointerID] >= 20 + leftbutton.getWidth() && touchX[pointerID] <= 20 + leftbutton.getWidth() + rightbutton.getWidth() && touchY[pointerID] >= this.getHeight() - 100 && touchY[pointerID] <= this.getHeight()){

            starship.setLeftRight(0, 0, false);
            rightButton.update(rightbutton);
        }
        else if(touchX[pointerID] >= this.getWidth() - shootbutton.getWidth() && touchY[pointerID] >+ this.getHeight() - 100 && touchY[pointerID] < this.getHeight()){
            shootButton.update(shootbutton);
        }

        break;
    }
    return true;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:16:22.590

我对 Android 的多点触控进行编码并在一个连接中进行测试的经历令人沮丧。

我最终使用了[android-multitouch-controller](http://code.google.com/p/android-multitouch-controller/)。该库将使您更好地了解如何处理所有警告。

# selenium - 由于所有浏览器中的安全警报，如何处理 selenium webdriver 脚本？

> ID：10573638
> 
> 赞同：0
> 
> 时间：2012-05-13T17:11:59.683
> 
> 标签：selenium, webdriver

任何人都可以提供解决方案，我将如何处理 selenium web 驱动程序中的脚本，但是它给出了安全警报（受信任的证书）问题，因此无法记录它。请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:30:52.687

假设“继续网页”链接的 id 是“overridelink”（通常是这样）......

尝试这个：

```
driver.navigate().to("javascript:document.getElementById('overridelink').click()"); 
```

# apache - apache 错误日志中的 httpdocs/cache 条目

> ID：10573640
> 
> 赞同：2
> 
> 时间：2012-05-13T17:12:23.390
> 
> 标签：apache, centos

我们的网站有一个 LAMP 环境。

最近我们开始看到一些新的 error_log 条目，它们类似于以下条目：

```
 [Tue May 08 17:30:37 2012] [error] [client 123.123.123.123] 
 File does not exist: /var/www/vhosts/domain.com/httpdocs/cache, 
 referer: http://www.domain.com/my.php 
```

问题是我们没有名为“cache”的文件夹，也没有引用该名称的文件夹。没有新的配置更改。

这些条目来自不同的 IP，并且随着时间的推移而分散。

是什么触发了这些条目？

我们的 Web 服务器位于 netscaler 后面。它可能已经开始这样做了吗？
我们正在运行 APC。APC 可以这样做吗？我们在 APC 3.1.9，PHP 5.3.13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T22:12:21.453

我遇到了同样的问题，我得到了某些模式的查询 Apache **access.log**充满了**编辑**和**缓存**不存在的文件夹。

```
example.com/edit
example.com/cache
example.com/cache/6dd9aa0b0606270d0875acb21546bedb (If i create such folder) 
```

最后一行是散列，在我的示例中，我想随机散列进行演示，不要搜索它。

问题是，这个查询可能过于频繁，看起来甚至像锤击一样。有时我有高达 20-30 req/s 的“/edit”查询。

到目前为止，我只是阻止了此类机器人，但我很想得到任何答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:54:35.417

您的页面“www.mydomain.com/my.php”可能在某个时间点引用了“httpdocs/cache”。像谷歌这样的搜索引擎会缓存你的很多页面。因此，有人（人或机器人）可能正在访问“httpdocs/cache”内容。

许多公司都有抓取网络以获取信息的爬虫。这可能是您收到对不存在文件的重复请求的原因。

您可以查看 access_logs 以获取有关用户/机器人的更多信息。如果您发现可疑内容，您可能希望使用 IPTable 规则阻止该客户端的访问。

# python - django：为什么我的自定义小部件不会填充来自数据库对象的值？

> ID：10573641
> 
> 赞同：1
> 
> 时间：2012-05-13T17:12:27.457
> 
> 标签：python, django, custom-widgets

我为我的 Django 应用程序编写了一个自定义小部件，以将 Twitter Bootstrap 的按钮组与一个选择多个小部件（从不喜欢这些东西）连接起来。它工作得很好，除了一件事：当我从数据库对象实例化我的表单时，值不会被填充。

真正令人费解的是，当我创建将 request.POST 传递给构造函数的表单时，它确实填充了这些小部件。从数据库对象与从 POST 对象传入的数据或表单的填充方式似乎有所不同，但我不确定从那里去哪里。

这是小部件：

```
from itertools import chain
from django.forms.util import flatatt
from django.forms.widgets import CheckboxSelectMultiple
from django.utils.encoding import force_unicode
from django.utils.html import conditional_escape
from django.utils.safestring import mark_safe

# todo-devon Values are not preserved with object instances
class BootstrapButtonSelect(CheckboxSelectMultiple):

    def __init__(self, attrs=None, all=False, none=False, classes=[], layout='horizontal'):
        """
        Optional arguments for creating a BootstrapButtonSelect widget. Default settings are in brackets.

        all=True/[False]
        Adds a button to select all options when set to True.

        none=True[False]
        Adds a button to select none of the options when set to True.

        classes=[]
        A list of strings which adds CSS classes to the buttons making up the button select widget. The btn class is already included. Examples: 'btn-large', 'btn-primary'

        layout=['horizontal']
        Sets the layout of the button select widget to 'horizontal' or 'vertical' (Not yet implemented. All groups are currently vertical.)
        """
        super(BootstrapButtonSelect, self).__init__(attrs)
        self.all = all
        self.none = none
        self.layout = layout

        if classes:
            self.classes = u' %s' % u' '.join(classes)
        else:
            self.classes = u''

    def render(self, name, value, attrs=None, choices=()):
        """
        Builds button group and select list for widget
        """
        # todo-devon Add code for horizontal layout
        if value is None: value = []
        has_id = attrs and 'id' in attrs
        final_attrs = self.build_attrs(attrs, name=name)

        # Create the select multiple widget
        select_output = [u'<select class="button-toggles" id="%s" multiple="multiple"%s>' % (name, flatatt(final_attrs),)]
        for i, (option_value, option_label) in enumerate(chain(self.choices, choices)):
            # If an ID attribute was given, add a numeric index as a suffix,
            # so that the checkboxes don't all have the same ID attribute.
            if has_id:
                final_attrs = dict(final_attrs, id='%s_%s' % (attrs['id'], i,))
            option_value = force_unicode(option_value)
            option_label = conditional_escape(force_unicode(option_label))
            if option_value in value:
                select_output.append(u'<option value="%s" selected="selected">%s</label>' % (option_value, option_label))
            else:
                select_output.append(u'<option value="%s">%s</label>' % (option_value, option_label))
        select_output.append('</select>')
        select_output = u'\n'.join(select_output)

        # Create the button group
        button_output = [u'<div class="btn-select-vertical span3 hidden-phone" id="%s" data-toggle="buttons-checkbox">' % name]
        for i, (option_value, option_label) in enumerate(chain(self.choices, choices)):
            # If an ID attribute was given, add a numeric index as a suffix,
            # so that the checkboxes don't all have the same ID attribute.
            if has_id:
                final_attrs = dict(final_attrs, id='%s_%s' % (attrs['id'], i,))
                label_for = u' for="%s"' % final_attrs['id']
            else:
                label_for = ''
            option_value = force_unicode(option_value)
            option_label = conditional_escape(force_unicode(option_label))
            button_output.append(u'<label%s class="btn%s" id="btn-%s-%s" data-name="%s,%s">%s</label>' % (label_for, self.classes, name, option_value, name, option_value, option_label))
        button_output.append(u'</div>')
        button_output = u'\n'.join(button_output)

        # Buttons for select all or none
        if self.all or self.none:
            select_all_none_button_output = [u'<div class="btn-group all-none-buttons" data-toggle="buttons-radio" data-name="%s">' % name]
            if self.all:
                select_all_none_button_output.append(u'<button class="select-all btn%s" type="button" data-name="%s">All</button>' % (self.classes, name,))
            if self.none:
                select_all_none_button_output.append(u'<button class="select-none btn%s" type="button" data-name="%s">None</button>' % (self.classes, name,))
            select_all_none_button_output.append(u'</div>')
            select_all_none_button_output = u'\n'.join(select_all_none_button_output)

        # Full output
        if select_all_none_button_output:
            output = "%s\n%s\n%s" % (select_output, button_output, select_all_none_button_output)
        else:
            output = "%s\n%s" % (select_output, button_output)

        return mark_safe(output)

    class Media:
        js = ('/static/bootstrap-button-multiselect.js',)
        css = {
            'all': ('/static/bootstrap-button-multiselect.css',)
        } 
```

如果您感到困惑，我使用 CSS 在大屏幕上显示按钮，然后在手机和平​​板电脑上的选择多个小部件中切换回来。我的视图功能：

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template.context import RequestContext
from tickets.forms import TicketForm
from tickets.models import Ticket

def addEditTicket(request, op='add', encrypted_pk=None, cipher=None):
    """
    Form and processing for new tickets
    """
    if encrypted_pk is not None:
        pk = int(encrypted_pk) ^ cipher
        ticket  = Ticket.objects.get(pk=pk)
        form = TicketForm(instance=ticket)
        initialData = {'form': form, 'form_action': '/ticket/' + op + '/', 'title': op.capitalize() + ' a ticket'}
        csrfContext = RequestContext(request, initialData)              # adds CSRF token to form context
        return render_to_response('form.html', csrfContext)             # pass context with token to form

    if request.method == 'POST':
        form = TicketForm(request.POST)
        if form.is_valid():
            new_ticket = form.save()
            form = TicketForm(instance=new_ticket)
            # todo-devon Notify user in new form that object was saved
            # Context includes form object, URL for form action (dynamically generated from argument passed as op),
            # and a title dynamically generated from operation combined with the object type in question.
            initialData = {'form': form, 'form_action': '/ticket/edit/', 'title': 'Edit a ticket'}
            csrfContext = RequestContext(request, initialData)      # adds CSRF token to form context
            return render_to_response('form.html', csrfContext)     # pass context with token to form
    else:
        form = TicketForm()

    # Context includes form object, URL for form action (dynamically generated from argument passed as op),
    # and a title dynamically generated from operation combined with the object type in question.
    initialData = {'form': form, 'form_action': '/ticket/' + op + '/', 'title': op.capitalize() + ' a ticket'}
    csrfContext = RequestContext(request, initialData)              # adds CSRF token to form context
    return render_to_response('form.html', csrfContext)             # pass context with token to form 
```

很抱歉在这里转储所有这些代码。提前致谢。

编辑：取出Javascript。这与问题并不真正相关，恐怕它让我的问题看起来更加令人生畏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:12:14.673

找到了解决方案，而且，我并不自豪地说，我不知道它为什么会起作用。我必须遍历选定的值并在每个值上强制使用 unicode。我假设数据库中的对象不是 unicode。我不明白为什么这会阻止它们在小部件初始化时被匹配和设置，但我很高兴它可以工作。我梳理了 Django 默认选择小部件以找到此解决方案。

谢谢大家，您的时间。

# playframework - 安装播放框架

> ID：10573654
> 
> 赞同：7
> 
> 时间：2012-05-13T17:14:30.813
> 
> 标签：playframework

我在 Windows 7 上，我正在尝试安装播放框架。

我在系统变量中创建了环境变量，
**变量名：** *play*，**值：** *c:\webapp\play\*

当我试图逃离`play help`指挥官时，它说

```
play is not recognized as an internal or external command, operable program or 
batch file and it is running only in the directory of c:webapp\play. 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T11:14:09.787

为了能够在命令行的任意位置运行 Play，请创建一个`PLAY_HOME`指向 play 文件夹的环境变量，例如`c:\play-2.0.1`，并将其添加`%PLAY_HOME%`到`PATH`环境变量中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T20:43:13.740

穆罕默德是正确的。我唯一要补充的是：保存环境变量后，我注意到必须：

1.  关闭所有资源管理器窗口
2.  开一个新的
3.  打开一个新的 cmd 提示符

然后我在路径上看到了 play_home，并且到处都可以玩。出于某种原因，更新环境变量并没有刷新现有窗口。

**UPDATE：**
如果你赶时间又觉得叛逆，先打开一个cmd提示窗口，然后杀死explorer.exe，然后在cmd窗口重启explorer.exe。
那应该刷新一切，但要小心......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T17:23:56.020

这是我过去为其他人设置的方法。

创建目录`c:\playframework`

在这个里面再创建两个

`framework`和`apps`

然后我有一个名为的 bat 文件，`env.bat`其中包含以下内容

```
set PATH=%path%;c:\playframework\framework\' 
```

然后您可以运行`env.bat`以确保播放已初始化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T18:45:28.563

我意识到，如果您在通往游戏框架的路径中有**空间**，它就行不通。

所以而不是

```
C:\Folder with space\PlayFramework 
```

尝试

```
C:\FolderWithoutSpace\PlayFramework 
```

这为我修复了它，猜想它与播放批处理文件有关，它不能正确处理带有空格的路径。在寻找解决方案时偶然发现了这个问题，因此它可能对其他人有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T06:32:06.713

1.  以管理员身份打开命令提示符
2.  `setx PATH "%PATH%;c:\path\to\play" /m` <--用你的路径替换**c:\path\to\play**
3.  重新打开新的命令提示符，您可以在任何地方运行**播放**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-02T07:51:58.433

要启动一个播放项目，另一种方法是下载激活器并创建一个播放项目。下载激活器并将其添加到环境变量中。打开命令提示符，使用以下命令创建 java 项目： C:\ activator new project-name play-java 如果要创建 scala 项目 C:\ activator new project-name play-scala

# cocoa-touch - 减少屏幕外精灵的开销

> ID：10573655
> 
> 赞同：0
> 
> 时间：2012-05-13T17:14:34.580
> 
> 标签：cocoa-touch, ios4, cocos2d-iphone

对于我的游戏，我正在开发 2 人模式，玩家可以向左滑动以查看其他玩家在做什么。有效 2 个 iPhone 屏幕。

我的问题是，屏幕外的任何精灵、粒子（即播放器 2）是否像在屏幕上一样被渲染和处理？如果是这样，有没有办法让 cocos2d 以不同的方式处理这些问题，以免降低整体游戏性能？(fps)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:57:54.823

我知道降低开销的唯一方法是使 sprite.visible 属性为 NO，在这种情况下根本不会计算平局。如果设置为可见，则将绘制离屏精灵。此外，在做出任何与“FPS”相关的决定之前，请确保您验证了您在真实设备上获得的内容。您会发现模拟器在性能方面非常不足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:14:35.777

如果将`visible`属性设置为`NO`，它确实会减少开销。如果精灵在屏幕之外，它仍然会自己绘制（所以是的，您可以将其设置为 NO 以减少一些开销）。但无论如何，无论`visible`属性值如何，所有精灵仍然会消耗一些内存等。

如果他们有动画，他们将继续播放。您可以取消安排这些精灵并释放更多处理。

我对这个`visible`属性提出的一个问题可能会对您有所帮助：[.visible 属性会影响性能吗？](https://stackoverflow.com/questions/9502586/does-the-visible-property-affect-performance)

# r - 在 R 中创建多维 NetCDF

> ID：10573656
> 
> 赞同：8
> 
> 时间：2012-05-13T17:14:48.277
> 
> 标签：r, netcdf

[我正在尝试使用 R 包ncdf](http://cran.r-project.org/web/packages/ncdf/index.html)创建多维 NetCDF 文件。我正在对一组 1500 个点进行气候日常观测，每个点的观测数约为 18250。问题是 NetCDF 文件（*create.ncdf*）的结构占用 4Gb，每个点使文件的大小增加超过 3Gb（*put.var.ncdf*）

这是我正在使用的代码：

```
# Make a few dimensions we can use
dimX <- dim.def.ncdf( "Long", "degrees", Longvector )
dimY <- dim.def.ncdf( "LAT", "degrees", Latvector )
dimT <- dim.def.ncdf( "Time", "days", 1:18250, unlim=FALSE )

# Make varables of various dimensionality, for illustration purposes
mv <- -9999 # missing value to use
var1d <- var.def.ncdf( "var1d", "units", dimX, mv,prec="double" )
var2d <- var.def.ncdf( "var2d", "units", list(dimX,dimY), mv,prec="double" )
var3d <- var.def.ncdf( "var3d", "units", list(dimX,dimY,dimT), mv,prec="double" )

# Create the test file
nc <- create.ncdf( "writevals.nc", list(var1d,var2d,var3d) )
# !!Creates a nc file with + 4 Gb

# Adding the complete time series for one point (the first point in the list of the dataset)
put.var.ncdf( nc, var3d,dataset[[1]], start=c(Longvector[1],Latvector[1],1),         count=c(1,1,-1)) 
```

Longvector 和 Latvector 是从每个点的 Long 和 Lat 矩阵中获取的向量。数据集是一个列表格式，对于每个点，我都有一个数值列表。

```
dataset[[1]]=c(0,0,0,9.7,0,7.5,3.6,2.9,0,0.5,....) 
```

我错过了什么还是应该尝试其他包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T06:03:35.587

您的不可重现代码中有一些错误，据我估计该文件为 219Mb（1500 * 18250 * 8 字节）。

```
library(ncdf) 
```

提供前两个暗淡的向量和数据集以匹配至少一个切片

```
Longvector = seq(-180, 180, length = 50)
Latvector = seq(-90, 90, length = 30)
dataset <- list(1:18250)

dimX <- dim.def.ncdf("Long", "degrees", Longvector)
dimY <- dim.def.ncdf("LAT", "degrees", Latvector)
dimT <- dim.def.ncdf("Time", "days", 1:18250, unlim = FALSE)

mv <- -9999 
var1d <- var.def.ncdf( "var1d", "units", dimX, mv,prec="double")
var2d <- var.def.ncdf( "var2d", "units", list(dimX,dimY), mv,prec="double")
var3d <- var.def.ncdf( "var3d", "units", list(dimX,dimY,dimT), mv,prec="double")

nc <- create.ncdf( "writevals.nc", list(var1d,var2d,var3d)) 
```

count是维度的索引，不是轴位置值，所以我们修正`start`为1，使用第3维度的count（长度）（不是-1）。

```
put.var.ncdf(nc, var3d, dataset[[1]], start = c(1, 1, 1),  count = c(1, 1, length(dataset[[1]])))

close.ncdf(nc) 
```

询问文件大小。

```
file.info("writevals.nc")$size/1e6
[1] 219.0866 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-21T13:32:02.480

这是 mdsumner 答案的更新版本，可与 R ( [ncdf4](https://cran.r-project.org/web/packages/ncdf4/ncdf4.pdf) ) 的 NetCDF4 包一起使用。

```
# Open library
library(ncdf4)

# Get x and y vectors (dimensions)
Longvector = seq(-180, 180, length = 50)
Latvector = seq(-90, 90, length = 30)
# Define data
dataset = list(1:18250)

# Define the dimensions
dimX = ncdim_def("Long", "degrees", Longvector)
dimY = ncdim_def("Lat", "degrees", Latvector)
dimT = ncdim_def("Time", "days", 1:18250)

# Define missing value
mv = -9999

# Define the data
var1d = ncvar_def( "var1d", "units", dimX, mv, prec="double")
var2d = ncvar_def( "var2d", "units", list(dimX,dimY), mv, prec="double")
var3d = ncvar_def( "var3d", "units", list(dimX,dimY,dimT), mv, prec="double")

# Create the NetCDF file
# If you want a NetCDF4 file, explicitly add force_v4=T
nc = nc_create("writevals.nc", list(var1d, var2d, var3d))

# Write data to the NetCDF file
ncvar_put(nc, var3d, dataset[[1]], start=c(1, 1, 1),
    count=c(1, 1, length(dataset[[1]])))

# Close your new file to finish writing
nc_close(nc) 
```

# python - 设置路径下走树结构的功能

> ID：10573661
> 
> 赞同：0
> 
> 时间：2012-05-13T17:15:15.007
> 
> 标签：python, tree

我已经花了几个小时，仍然无法获得最佳结果。但是，这项任务很容易，但今天我似乎遗漏了一些东西或者只是变慢了。

所以，我们有一个简单的对象树结构。正式的对象如下所示：

```
node:
    name {str}
    value {str}
    children {list}
        node,
        node,
        ... 
```

我需要创建以`walk`元组列表格式输出所有节点列表的函数：

```
for node in topNode.walk():
    path, object = node 
```

where`path`显然是到当前节点的路径（即`/name/name`）。几乎相同的`os.walk()`功能。

目前我陷入了这段代码：

```
def walk(self):
    result = []
    for child in self.children:
        result.append(child)
        result.extend(child.walk())
    return result 
```

这里怎么添加`path`？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:26:27.963

做任何你必须做的事情`child`以获得复合路径，然后`child.name`作为 walk 的参数传递（它甚至可以是关键字参数）。

就像是...

```
def walk(self, path=''):
    result = []
    for child in self.children:
        child_path = path + '/' + child.name
        result.append((child_path, child))
        result.extend(child.walk(child_path))
    return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:26:18.497

这可能行得通——我在脑海里把它煮熟了，还没有测试过……

```
 def walk(self,_root='/'):
     result=[]
     for child in self.children:
         path="%s%s/"%(_root,child.name) if child.children else "%s%s"%(_root,child.name)
         result.append((path,child))
         result.extend(child.walk(_root=path))

     return result  #result if _root != '/' else zip(*result) 
```

**编辑**

修复了 return 语句以匹配您上面的编辑。

# php - 在 PHP 和 MySQL 中构建事件调度/自定义 cronjob 系统，这是一种理智的方法吗？

> ID：10573662
> 
> 赞同：1
> 
> 时间：2012-05-13T17:15:22.597
> 
> 标签：php, mysql, cron

我有一个应用程序，我希望用户能够随时添加事件，即只应在用户输入确定的未来特定时间运行的代码块。与 cronjobs 类似，除了在任何时候都可能需要处理数千个此类事件，每个事件都在其特定的到期时间进行。据我了解，crontab 将无法处理它们，因为它并不意味着拥有大量的 cronjobs，此外，我需要精确到秒，而不是分钟。我知道可以以编程方式将 cronjobs 添加到 crontab，但同样，这对于我想要完成的工作来说还不够。

另外，我需要这些是实时的，通过在访问页面时简单地检查是否有到期项目来伪造它们不是解决方案；即使在适当的时间没有访问任何页面，它们也应该触发。我一直在做一些研究以寻找一个理智的解决方案，我读了一些关于队列系统的信息，例如 gearman 和 rabbitmq，但是 FIFO 系统也对我不起作用（添加事件的顺序无关紧要，因为它是完美的可能会添加一个事件以在 1 小时内触发，然后紧接着另一个应该在 10 秒内触发的事件）

到目前为止，我发现的最佳解决方案是构建一个守护进程，即一个脚本，它将持续运行以检查是否有新事件要触发。我知道 PHP 是魔鬼，会泄漏内存等等，但我仍然希望 PHP 守护程序可以稳定运行数周并偶尔重启，只要我生成新的独立进程来执行“繁重”，即事件触发时的实际处理。

所以无论如何，显而易见的问题：

1）这听起来合理吗？有没有更好的方法我可能会失踪？

2）假设我确实实现了守护进程的想法，代码自然需要检索哪些事件是到期的，下面是它的伪代码：

```
while 1 {
    read event list and get only events that are due
    if there are due events
        for each event that is due 
            spawn a new php process and run it
            delete the event entry so that it is not run twice
    sleep(50ms)
} 
```

如果我要将此列表存储在 MySQL 数据库中，这肯定是最好的方法，因为我需要能够使用“SELECT * FROM eventlist where duetime >= time();”行中的某些内容来查询该列表。 ，让守护进程每 50 或 100 毫秒执行一次 SELECT 是不是很疯狂？或者我只是过于偏执，服务器应该能够很好地处理它？每次迭代中检索的数据量应该相对较小，可能只有几百行，我认为它不会超过几 KB 的内存。守护进程和 MySQL 服务器也将在同一台机器上运行。

3) 如果我确实使用了上述所有内容，包括 MySQL DB 上的表，我可以做些什么来优化它？我曾考虑将表存储在内存中，但我不喜欢在服务器崩溃或重新启动时丢失其内容的想法。我能想到的最接近的事情是拥有一个完成写入和更新的标准 InnoDB 表，以及另一个执行读取的 1:1 镜像内存表。使用触发器应该可以让内存表镜像所有内容，但另一方面，维护起来确实很麻烦（如果由于某些原因表不同步，则很容易发生fubar情况）。

# android - 是否可以使 ActionBar 选项卡的高度高于 ActionBar 的高度？如果是这样，怎么做？

> ID：10573665
> 
> 赞同：10
> 
> 时间：2012-05-13T17:16:16.817
> 
> 标签：android, android-layout, actionbarsherlock, android-actionbar

我正在使用 ActionBarSherlock

在关于 ActionBar 选项卡高度的类似问题中，我使用了：

```
<style name="YourTheme" parent="@android:style/Theme.Holo">
   <item name="android:actionBarStyle">@style/blah1</item>
   <item name="android:actionBarTabStyle">@style/blah2</item>
   <item name="android:actionBarSize">80dp</item>
   ..
</style> 
```

我假设我可以在每种样式上使用这个特定属性

```
<item name="android:actionBarSize">80dp</item> 
```

并从 ActionBar 选项卡高度单独调整 ActionBar 高度。

但它不起作用。

那么，这是我无法覆盖的 Android 设计原则吗？

选项卡必须始终与 ActionBar 具有相同的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T07:21:28.900

您可以覆盖操作栏的 android 设计原则，我已经尝试过，它可能对您有用。

将以下代码复制到 styles.xml 文件中

```
<style name="ThemeSelector" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/myTheme.ActionBar</item>
</style>

<style name="myTheme.ActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">imageforactionbar</item>
    <item name="android:titleTextStyle">@style/myTheme.ActionBar.Text</item>
    <item name="android:height">60dp</item>
</style> 
```

1）将图像放在drawable文件夹中

2）在样式xml中写入样式主题'myTheme.ActionBar.Text'。

```
<style name="myTheme.ActionBar.Text" parent="@android:style/TextAppearance">
    <item name="android:textColor">@color/white</item>
    <item name="android:textSize">@dimen/app_head</item>
</style> 
```

相应地更改清单文件，包括

```
android:theme="@style/ThemeSelector" 
```

在应用程序标签下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T06:48:48.037

不，您不能更改 ICS 上原生操作栏的大小。原生操作栏的高度始终为 48dip（纵向）或 40dip（横向）。

但是如果你坚持改变它的高度，你可以实现你自己的动作栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:56:26.750

我对此不是 100% 的，但根据我的经验，它无法完成，android 不允许它。也许这会在未来发生变化，但目前对此无能为力。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T23:24:19.020

您是否尝试过使用自定义操作栏？您可以使用单独的布局完全自定义操作栏。

此[示例](https://github.com/prijupaul/Priju/tree/master/CustomActionBar)将向您展示如何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T08:52:09.500

您可以覆盖操作栏

getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.action_bar);

```
android:layout_width="@dimen/action_BarWidth"
android:layout_height="@dimen/action_BarHeight" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-10T10:09:49.900

我们可以从 java 类中的代码或主题动态创建操作栏：

第 1 步：我们可以更改特定类的操作栏的图像、名称、颜色、高度等，这是一个过程。

```
 ActionBar actionBar = getActionBar();
   // show the action bar title
    actionBar.setDisplayShowTitleEnabled(true);
    LayoutParams test = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT, Gravity.CENTER | Gravity.CENTER);
    View actionBarView = LayoutInflater.from(this).inflate(
            R.layout.x, null); // layout which contains your
                                            // button.
    actionBar.setCustomView(actionBarView, test);
    actionBar.setDisplayShowCustomEnabled(true);

    SpannableString s = new SpannableString("Test");
    s.setSpan(new ForegroundColorSpan(Color.parseColor("#ffffff")), 0,
            s.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    // Update the action bar title with the TypefaceSpan instance
    actionBar.setTitle(s); 
```

# php - CakePHP 级联条件问题：find('all')

> ID：10573667
> 
> 赞同：0
> 
> 时间：2012-05-13T17:16:26.177
> 
> 标签：php, model, cakephp-2.0, conditional-statements

我尝试使用 CakePHP 2 来执行模型查询是徒劳的。我有 3 个表：代码：php

一张“Offer”表（一个offer属于一个“Place”）一张“Place”表（一个“Place”有很多offer）（一个地方属于一个“City”）一张“City”表（一个“City”有许多“地方”）

我无法找到正确的语法来通过“条件”参数从特定“城市”获取所有“优惠”。

这是我尝试过的。代码：

```
$this->set('offers', $this->Offer->find('all', array(
  'conditions' => array('Place.City.name' => 'MyCity'),
  'recursive' => 3))); 
```

模型关系（“hasOne”、“blongsTo”等）没有问题，因为我可以使用 pr() 看到正确的数据。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:43:50.280

您的报价模型属于地方，因此报价包含foreignKey，因此您的条件应该是：

```
array('Offer.place_id' => $placeid) 
```

或类似的东西。当然，place_id 是您正在使用的外键。

编辑：哎呀，快读。你需要的是城市而不是地方。我认为您需要为此绑定模型，有关更多详细信息，请参见：[http](http://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations) ://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations 。

# html - 我的页面中间的大间隙是怎么回事？

> ID：10573672
> 
> 赞同：4
> 
> 时间：2012-05-13T17:17:51.680
> 
> 标签：html, css, wordpress

我的页面在[这里](http://davidspeightphotography.co.uk/wordpress/?page_id=56)。我正在讨论的部分从帆布美术包装开始，你会注意到第一段和第二段之间有很大的差距。我在 chrome (osx)、safari(osx) 和 firefox(windows) 上看过它

标记中没有任何内容表明其原因。检查它显示没有边距或任何导致它的东西。![在此处输入图像描述](../Images/855dfe92e851998514d6ca5fbd214faf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:46:54.943

听起来 Wordpress 坚持不应该做的事情。我的建议是：

*   进入html视图
*   剪掉所有的代码
*   粘贴到记事本中
*   将页面另存为完全空白
*   将元素一一复制到您的 html 视图中并保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T17:31:04.970

添加`display: inline-block;`到`.box p`选择器。它应该在此之后工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:24:51.460

p 有一个边距 - 应该减少

此外，盒子类应该减少它的行高。

## 编辑

另外-我将您的文本编辑为：1111 和 2222，这很好

您可能粘贴了包含一些坏字符的文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:34:31.877

我看到的主要问题是您的 normalise.css 文件的第 199/200 行：

它有：

```
p, pre {
    margin: 1em 0;
} 
```

如果我删除它，那么大的差距就会被删除。

# delphi - Delphi 通用异常捕获

> ID：10573675
> 
> 赞同：5
> 
> 时间：2012-05-13T17:18:31.937
> 
> 标签：delphi, exception-handling

在 .NET WinForms 中有一个这样的提示，我可以在应用程序级别捕获任何未捕获的异常。

是否也可以在 Delphi 中完成 - 在异常源无法与 try/except 块绑定的情况下。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T17:28:25.797

您可以将事件处理程序附加到`Application.OnException`并在那里处理任何未处理的异常。

根据您的 Delphi 版本，您可以

*   完全在您的主窗体、dpr 或您认为合适的任何地方的代码中附加和实现事件处理程序`Application.OnException := DoApplicationException`。
*   在主窗体上放置一个`TApplicationEvents`组件，双击 OnException 事件并实现您的代码。

# django - 在 Django 模板中获取 URL 编码的 request.GET 变量的值

> ID：10573676
> 
> 赞同：1
> 
> 时间：2012-05-13T17:18:39.913
> 
> 标签：django, django-templates

我在 Windows 7 x64 上使用 Django 1.3 和 Python 2.7.2。

我有一个这样的 URL 模式：

```
url(r'^(?P<club_id>\d+)/$', 'view_club') 
```

从模式中，我希望能够在我的模板中使用 request.GET，以便能够基于此 GET 变量 (club_id) 创建指向我的视图的 URL。我在网上阅读了我可以做到的：

```
{{ request.GET.club_id }} 
```

但是，这始终显示为空白。我无法弄清楚原因。我的默认上下文处理器列表中有请求上下文处理器。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:25:46.233

在您的示例中，`club_id`不是 GET 参数，它是 URL 中路径的一部分。您的视图函数将`club_id`其作为参数，然后应将其放入上下文中，以便模板可以访问它。

例如，您的视图功能：

```
def view_club(request, club_id):
     return render(request, "template_name.html", { 'club_id': club_id }) 
```

然后在您的模板中：

```
{{ club_id }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:31:43.613

如果您在 URL 中传递一个变量 - 在本例中为 club_id - 只需将其作为参数包含在请求旁边的视图函数中：

```
def get_club(request,club_id):
     club = Club.object.get(pk=club_id)
     return render_to_response('club.html', {'club': club}) 
```

现在在您的模板中，您可以将 {{club}} 作为单独选择的对象访问并执行 {{club.name}} 之类的操作。这也适用于具有多个对象的变量，您可以使用 for 循环进行迭代。

# qt - OSX下的QFileDialog将许多错误转储到控制台

> ID：10573677
> 
> 赞同：0
> 
> 时间：2012-05-13T17:18:40.910
> 
> 标签：qt, qfiledialog

尝试在 OSX 10.6.8、Qt 4.7 下使用 QFileDialog：

```
QFileDialog *dialog = new QFileDialog(0,tr("Load Band Recordings"),qbh,tr("Wave Files (*.wav)"));
dialog->setFileMode(QFileDialog::ExistingFiles);

if (dialog->exec())
{
QStringList fileNames;
    fileNames = dialog->selectedFiles();
    qs = fileNames[0];
}
else
{
    return(0);
} 
```

它可以工作，但许多错误被转储到控制台：

```
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: Failed to create window context device
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGWindowContextCreate: failed to create context delegate.
2012-05-13 11:03:41.445 SdrDx[18982:903] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x31197, window:0xffffffff
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextSaveGState: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextTranslateCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextScaleCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextAddRect: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: doClip: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextRestoreGState: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: Failed to create window context device
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGWindowContextCreate: failed to create context delegate.
2012-05-13 11:03:41.533 SdrDx[18982:903] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x31197, window:0xffffffff
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextSaveGState: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextTranslateCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextScaleCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextAddRect: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: doClip: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextRestoreGState: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: Failed to create window context device
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGWindowContextCreate: failed to create context delegate.
2012-05-13 11:03:41.576 SdrDx[18982:903] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x31197, window:0xffffffff
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextSaveGState: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextTranslateCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextScaleCTM: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: CGContextAddRect: invalid context 0x0
Sun May 13 11:03:41 machine-mac-pro.local SdrDx[18982] <Error>: doClip: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextRestoreGState: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: Failed to create window context device
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGWindowContextCreate: failed to create context delegate.
2012-05-13 11:03:41.616 SdrDx[18982:903] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x31197, window:0xffffffff
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextSaveGState: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextTranslateCTM: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextScaleCTM: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextAddRect: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: doClip: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextRestoreGState: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: Failed to create window context device
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGWindowContextCreate: failed to create context delegate.
2012-05-13 11:03:41.638 SdrDx[18982:903] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x31197, window:0xffffffff
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextSaveGState: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextTranslateCTM: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextScaleCTM: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextAddRect: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: doClip: invalid context 0x0
Sun May 13 11:03:41 -mac-pro.local SdrDx[18982] <Error>: CGContextRestoreGState: invalid context 0x0 
```

文档说提供父小部件；似乎没关系。

任何人都知道如何在 OSX 下正确使用 Qt 4.7 QFileDialog 类，以便它不会向控制台吐出错误？

顺便说一句，文件和目录对话框的静态版本和构造版本都执行此操作。我在 Qt 论坛上询问过，但没有收到任何答复。希望这里有人已经弄清楚了。

# c++ - 删除与运算符删除（和空指针）

> ID：10573678
> 
> 赞同：14
> 
> 时间：2012-05-13T17:18:46.343
> 
> 标签：c++, destructor, void-pointers, delete-operator

`delete ptr`不同之处`operator delete(ptr)`仅在于`delete`调用`ptr`析构函数吗？或者换句话说，是否`delete ptr`首先调用析构函数`ptr`然后`operator delete(ptr)`释放分配的内存？然后在`delete ptr`技术上等价于以下内容：

```
T * ptr = new T;

//delete ptr equivalent:
ptr->~T();
::operator delete(static_cast<void *>(ptr)); 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T17:43:13.353

`delete ptr`将对 进行重载解析`operator delete`，因此它可能不会调用全局`::operator delete`

但除此之外，是的。运算符调用相关的`delete`析构函数（如果有），然后调用`operator delete`.

# android - 如何将数据库打印为表格？（安卓、SQLite）

> ID：10573682
> 
> 赞同：1
> 
> 时间：2012-05-13T17:19:30.267
> 
> 标签：android, sqlite, tablelayout

我已经成功地创建了一个包含多个表的数据库，并成功地使用 rawQuery 选择了所有表。所有表都是相似的，我的意思是它们具有不同值的相同列。现在我需要打印一个新活动中的所有表格。我想通过在 TableLayout 中添加行来做到这一点。每个新表都将打印在新行中。

请纠正我或显示另一种方法。我这样做：

//添加新表

```
EditText title = (EditText)findViewById(R.id.Title); 
        String Title = title.getText().toString();

        EditText d = (EditText)findViewById(R.id.director); 
        String Director = d.getText().toString();

                SQLiteDatabase db = openOrCreateDatabase("Films", MODE_PRIVATE, null);
        db.execSQL("CREATE TABLE IF NOT EXISTS " + Title + " (Title VARCHAR, Director VARCHAR);");
        db.execSQL("INSERT INTO " + Title + "(Title) VALUES('" + Title + "');");
        db.execSQL("INSERT INTO " + Title + " (Director) VALUES('" + Director + "');");
        db.close();
        startActivity(new Intent(Add.this, Browse.class)); 
```

//选择

```
SQLiteDatabase db = openOrCreateDatabase("Films", MODE_PRIVATE, null);
     Cursor c = db.rawQuery("SELECT * FROM sqlite_master WHERE type='table'",null); 
```

//尝试在遇到新标题时创建新行

```
c.moveToFirst();
TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout);
while (c.moveToNext())
     {
         if (c.getString(c.getColumnIndex("Title")) != null)
         {
             String Title = c.getString(c.getColumnIndex("Title"));

             TableRow tr = new TableRow(this);
               tr.setLayoutParams(new LayoutParams(
                              LayoutParams.FILL_PARENT,
                              LayoutParams.WRAP_CONTENT));
                    /* Create a Button to be the row-content. */
                    TextView b = new TextView(this);
                    b.setText(Title);
                    b.setLayoutParams(new LayoutParams(
                              LayoutParams.FILL_PARENT,
                              LayoutParams.WRAP_CONTENT));
                    /* Add Button to row. */
                    tr.addView(b);
             tl.addView(tr,new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
             c.moveToNext();
         } 
```

但是 DDMS 说它无法从第 1 行 col -1 获取字段插槽。

顺便说一句，我在每个表中只有 2 列，但 CursorWindow 说有 5 列。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:34:58.477

您拉出的游标仅包含一列，即表名，这就是您尝试访问该游标中不存在的列时出现列错误的原因。

您需要使用该游标中的表名设置一个循环来查询每个表的表内容，并使用表内容游标来填充您的表。

根据您的操作方式，您可能需要使用 MergeCursor。

**编辑**

返回的前两个表是系统表，因此您应该跳过它们并从游标中的第三个条目开始。

```
c.moveToFirst();
c.moveToPosition(3);  // may be two, not sure if the cursor starts at 0 or 1
while (c.isAfterLast == false) {
    String tblName = c.getString(1);
    Cursor table = db.rawQuery("SELECT * FROM " + tblName,null);
    table.moveToFirst();
    if (table.getString(table.getColumnIndex("Title")) != null) {
        //  Your code to create table
    }
    c.moveToNext();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:37:29.960

表格在 android 中没有被很好地清除，而且比预期的要难，所以我做了一个新技巧来在水平文本视图布局下填充一个普通的列表视图，这里是如何跟随我的领导这是一个从数据库中检索团队分数的表：

主要活动 ：

```
public class ViewAllScores extends ListActivity {

@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
 setContentView(R.layout.table_total_scores_by_exam);

        generateTable();

    }private void generateTable() {
        // TODO Auto-generated method stub
        setContentView(R.layout.table_total_scores_by_exam);
        mDbHelper = new DBhelp(this);
        mDbHelper.open();
        String ExamID = "1";
        mNotesCursor = mDbHelper.getAllTeamsScoresByExam(ExamID);

        startManagingCursor(mNotesCursor);

        String[] from = new String[] { mDbHelper.KEY_TEAMS_TEAMNAME,
                mDbHelper.KEY_SCORES_TOTALSCORE,
                mDbHelper.KEY_SCORES_TIMEELAPSED };

        int[] to = new int[] { R.id.tblTablesTeamsByExamRowsTeamName,
                R.id.tblTablesTeamsByExamRowsTeamScore,
                R.id.tblTablesTeamsByExamRowsElapsedTime };
        SimpleCursorAdapter notes = new SimpleCursorAdapter(this,
                R.layout.table_teams_by_exams_rows, mNotesCursor, from, to);

        setListAdapter(notes);

    } 
```

数据库活动：

```
public Cursor getAllTeamsScoresByExam(String examID) {
        // TODO Auto-generated method stub
        String where = KEY_SCORES_SCOREDEXAMID + "=?";

        String[] whereArgs = new String[] { examID };

        Cursor cursor = ourDatabase.query(VIEW_TEAMS_SCORES_BY_EXAM,
                new String[] { KEY_SCORES_SCOREDEXAMID, KEY_SCORES_TIMEELAPSED,
                        KEY_SCORES_TOTALSCORE ,KEY_SCORES_TEAMTRANSID,
                        KEY_TEAMS_TEAMNAME }, where, whereArgs, null, null,
                KEY_SCORES_TOTALSCORE+" DESC");

        return cursor;
    } 
```

R.layout.table_total_scores_by_exam：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="99" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="33"
            android:background="@drawable/cell_shape"
            android:gravity="center"
            android:text="Team Name"
            android:textSize="30sp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="33"
            android:background="@drawable/cell_shape"
            android:gravity="center"
            android:text="Total Score"
            android:textSize="30sp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="33"
            android:background="@drawable/cell_shape"
            android:gravity="center"
            android:text="Elapsed Time"
            android:textSize="30sp"
            android:textStyle="bold" />
    </LinearLayout>

    <ListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

R.layout.table_teams_by_exams_rows：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="99" >

    <TextView
        android:id="@+id/tblTablesTeamsByExamRowsTeamName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="33"
        android:background="@drawable/cell_shape"
        android:gravity="center"
        android:text="Team Name"
        android:textSize="22sp"
        />

    <TextView
        android:id="@+id/tblTablesTeamsByExamRowsTeamScore"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="33"
        android:background="@drawable/cell_shape"
        android:gravity="center"
        android:text="Total Score"
        android:textSize="22sp"
        />

    <TextView
        android:id="@+id/tblTablesTeamsByExamRowsElapsedTime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="33"
        android:background="@drawable/cell_shape"
        android:gravity="center"
        android:text="Elapsed Time"
        android:textSize="22sp"
        />

</LinearLayout> 
```

希望这个技巧有帮助

# c++ - 顶点缓冲区对象（删除进程）opengl

> ID：10573684
> 
> 赞同：3
> 
> 时间：2012-05-13T17:20:25.020
> 
> 标签：c++, opengl, vbo

我什么时候应该调用 glDeleteBuffersARB ？申请结束时我应该这样做吗？我可以以某种方式自动化删除顶点缓冲区对象的过程吗？例如 smart_ptr 之类的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T18:01:07.223

绝不。你永远不应该打电话`glDeleteBuffersARB`。十多年来，缓冲区对象一直是 GL 的核心功能。如果您仍在使用带 ARB 后缀的扩展功能，请*停止*。如果您遵循使用它们的教程，请再次*停止*；它显然太旧而无法使用。

现在，你应该什么时候使用[`glDeleteBuffers`](http://www.opengl.org/wiki/GLAPI/glDeleteBuffers)？`delete`您应该在使用常规 C++ 对象的同时使用它。也就是说，在*完成*对象后使用它。当您不再使用它并想摆脱它时。

> 那么我可以使用析构函数为 vbo 创建类来删除 vbo 对象吗？然后将对象创建为 smart_ptr 以使一切自动化？

你可以，但它不会为你买那么多。此外，您冒着等待删除对象的*真正*风险，直到为时已晚。

在创建 OpenGL 上下文之前（并使其成为当前）或当 GL 上下文不是当前时（例如，在您销毁 GL 上下文之后）调用任何 OpenGL 函数是非法的。尝试这样做并不好。

如果您使用`shared_ptr`这些资源来管理这些资源，理论上它们可能会比实际的 OpenGL 上下文更长寿。那很糟。就个人而言，我更喜欢一种更严格的管理方案，将 GL 对象的生命周期与上下文的生命周期牢固地联系起来。

# android - 显示主菜单的 Android 清单

> ID：10573685
> 
> 赞同：1
> 
> 时间：2012-05-13T17:20:26.223
> 
> 标签：android, android-manifest

谁能指导我，我正在尝试创建一个具有启动画面和主菜单活动的简单应用程序。

我已经实现了这两个活动，每当我运行模拟器时，我都可以看到启动画面，但它永远不会进入主菜单活动。

我尝试更改清单中的 XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.book" android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="7" />
    <application android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:name=".activity.StartApp">
 <activity 
        android:name=".activity.MainMenuApp"
        android:label="@string/app_name">

    </activity>

        <activity android:name=".activity.SplashApp" 
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

谁能建议为什么主菜单没有出现？

谢谢。

编辑：SplashApp.java

```
import com.book.R;
public class SplashApp extends Activity {

private DBAdapter mDBAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
}

@Override
protected void onStart() {

    super.onStart();
    mDBAdapter = new DBAdapter(getApplicationContext());

    try{

... 
….      int sec = 1;
        new Handler().postDelayed(new Runnable(){
            public void run(){
                Intent intent = new Intent(SplashApp.this, MainMenuApp.class);
                startActivity(intent);

                finish();
            }
        }, sec * 1000);
    }catch (Exception e){
        e.printStackTrace();
    }
}
} 
```

我发现问题可能出在我的清单文件中，上面写着：

```
package="com.book" 
```

我现在可以加载启动活动，但它不会进入主菜单页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:41:19.937

如果您的**主菜单活动**实际上是一个`Activity`，则还应在`androidManifest.xml`文件中注明（带有或不带有意图过滤器）：

```
...
<activity android:name=".activity.MainMenu" 
    android:label="@string/main_menu">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
... 
```

如果您在`SplashApp`Activity 中执行初始化任务，并且应用程序的主要功能位于 中`MainActivity`，您会发现`DEFAULT`Intent 过滤器很有用。

**edit1：**从清单中的标签中删除`android:name`属性`application`

**edit2：**使用`SplashApp.this.finish()`而不是简单的`finish()`，因为这里的**this**指的是处理程序。

**SplashApp.java：**

```
package com.book.activity;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import com.book.R;

public class SplashApp extends Activity
{
    private DBAdapter mDBAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
    }

    @Override
    protected void onStart()
    {
        super.onStart();
        mDBAdapter = new DBAdapter(getApplicationContext());
        try
        {
            ArrayList<BookBean> books = mDBAdapter.getAllBooks();
            if (books == null)
            {
                InputStream instream = getAssets().open("bookdata.txt");
                BufferedReader bf = new BufferedReader(new InputStreamReader(instream));
                String line;
                while ((line = bf.readLine()) != null)
                {
                    String arr[] = line.split("***");
                    for (int i = 0; i < arr.length; i++)
                    {
                        String temp[] = arr[i].split("*");
                        BookBean book = new BookBean();

                        book.setDescription((temp[0]));
                        book.setName(temp[1]);
                        book.setYearPublished(temp[2]);
                        mDBAdapter.insertBook(book);
                    }
                }
            }
            final int sec = 1;
            new Handler().postDelayed(new Runnable()
            {
                public void run()
                {
                    Intent intent = new Intent(SplashApp.this, MainMenuApp.class);
                    startActivity(intent);
                    SplashApp.this.finish();
                }
            }, sec * 1000);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

**androidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.book" android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" />
    <application android:icon="@drawable/ic_launcher" 
        android:label="@string/app_name">
        <activity android:name=".activity.MainMenuApp" 
            android:label="@string/app_name" />
        <activity android:name=".activity.SplashApp" 
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# python - NumPy polydiv，几个变量

> ID：10573686
> 
> 赞同：2
> 
> 时间：2012-05-13T17:20:46.720
> 
> 标签：python, numpy

我需要将多项式除以**NumPy**中的多项式。为此，我使用**numpy.polydiv**，但在只有一个变量的多项式文档的示例中。我需要用三个变量来划分多项式。请告诉我该怎么做。

例如：x^3 + y^3 + z^3 除以 x^2 + z

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:16:20.020

我建议您使用[sympy](http://sympy.org/en/index.html)，它允许进行基本的符号操作。在您的示例`x^3 + y^3 + z^3`中不能被 整除`x^ 2 + z`，因此没有什么可以帮助您！但是，通过一个简单的例子，例如`x**2 - y**2`除以`x - y`，我们可以看到实际效果`sympy`：

```
>>> import sympy
>>> x, y = sympy.symbols('x y')
>>> sympy.simplify((x**2 - y**2) / (x - y))
x + y 
```

# python - 我偶尔会收到此错误：sqlite3.OperationalError：无法打开数据库文件

> ID：10573688
> 
> 赞同：2
> 
> 时间：2012-05-13T17:21:03.303
> 
> 标签：python, sqlite

这发生在 python 2.6.6、sqlite3 上。我有一个使用 sqlite 的数据库类。下面是它的初始化部分。

```
def _init_db(self):
"init the database tables and indices"
    print '\n'.join(DROP_TABLES[0:1])
    print '\n'.join(CREATE_TABLES[0:1])
    print '\n'.join(CREATE_INDEXES[0:1])
    print '\n'.join(CREATE_TRIGGERS[0:1])
    for query in DROP_TABLES:
       self.connection.execute(query)
#   self.connection.commit()
    for query in CREATE_TABLES:
       self.connection.execute(query)
#   self.connection.commit()        
    for query in CREATE_INDEXES:
       self.connection.execute(query)
#   self.connection.commit()
    for query in CREATE_TRIGGERS:
       self.connection.execute(query)            
    self.connection.commit() 
```

这是查询的打印输出。（在我看来它不是很重要，这里是为了完整性）

```
DROP TABLE IF EXISTS graph_T 

CREATE TABLE IF NOT EXISTS graph_T
(v1 int,
v2 int,
step_start int,
step_end int DEFAULT 2147483647,
value int DEFAULT 1,
path_kind int DEFAULT 0,
path_id long,
partial_path_id long) 

CREATE INDEX IF NOT EXISTS idxgraph_T
          ON graph_T(v1,v2)

CREATE TRIGGER IF NOT EXISTS trig_graph_T_path_id
AFTER INSERT ON graph_T
BEGIN
UPDATE graph_T SET 
path_id = (10000 * 10000 * max(new.v1, new.v2) + 
    10000 * min(new.v1, new.v2) + 0 ) ,
partial_path_id = 10000 * 10000 * max(new.v1, new.v2) + 
    10000 * min(new.v1, new.v2)
WHERE rowid = new.rowid;
END; 
```

我得到 sqlite3.OperationalError：无法在 self.connection.execute 行之一上打开数据库文件。有时是第三个或第四个（它也发生在我程序的其他地方）。

我在窗户上工作。我不确定为什么会发生这种情况以及我做错了什么。将不胜感激任何建议。

**更多信息（由于提出的问题）：** - 我没有使用并发访问。没有线程或类似的东西。

**编辑-更多信息**：我在所有 connection.execute 行上添加了定时重试，它通常会失败一次或两次，然后就可以工作了。我猜测当执行命令返回时，数据可能并*没有真正*写入磁盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T15:11:17.370

我的直觉告诉我，文件系统中肯定有一些可疑的事情发生，而不是软件中。也许其中之一：

*   备份脚本正在临时移动/重命名文件或父文件夹
*   文件系统显示为“本地”，但实际上是 SAN，并且存在一些间歇性问题
*   其他面向文件系统的内核模块，例如透明加密，正在干扰 SQLite 系统调用
*   入侵检测软件正在干扰 SQLite 系统调用
*   另一个用户在您不知情的情况下打开文件进行读取
*   这是一种病毒`:-)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T17:24:09.353

SQLite 不适合并发访问。如果你有多个线程或进程访问同一个数据库文件，你会遇到这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T15:53:48.257

并发访问答案帮助我解决了我的问题。我的解决方案本质上是从并发访问发生之前恢复到以前未损坏的数据库文件（[https://stackoverflow.com/a/57729827/3869714](https://stackoverflow.com/a/57729827/3869714)）。

# c# - WP7，本地数据库，DateTime 列上的强制转换异常

> ID：10573703
> 
> 赞同：0
> 
> 时间：2012-05-13T17:22:50.873
> 
> 标签：c#, windows-phone-7, linq-to-sql

我正在尝试将带有 DateStamp 的数据存储在 WP7 的本地数据库中。我遵循了[MSDN 指南](http://blogs.msdn.com/b/wriju/archive/2011/08/01/windows-phone-7-using-local-database-for-application.aspx)并创建了以下代码：

```
[Table]
public class HistoricGame
{
    [Column(IsDbGenerated = true, IsPrimaryKey = true)]
    public int Id { get; set; }

    [Column]
    public DateTime DateStamp { get; set; }

    [Column]
    public string GameId { get; set; }

    [Column]
    public int Score { get; set; }

    [Column]
    public int LongestSequence { get; set; }

}

public class HistoricGameContext : DataContext
{
    public const string ConnectionString = "Data Source=isostore:/NumbersNerdDB.sdf";

    public HistoricGameContext()
        :base(ConnectionString)
    {}

    public Table<HistoricGame> HistoricGames
    {
        get { return GetTable<HistoricGame>(); }
    }
} 
```

这被称为写入数据库：

```
private void StoreThisGame()
{
    using (var db = new HistoricGameContext())
    {
        if (!db.DatabaseExists())
            db.CreateDatabase();
        var game = new HistoricGame
        {
             DateStamp = DateTime.Now,
             GameId = "1",
             LongestSequence = _currentGame.LongestCorrectSequence,
             Score = _currentGame.TotalPoints
        };
        db.HistoricGames.InsertOnSubmit(game);
        db.SubmitChanges(); //<- This is where it throws an InvalidCastException
    }            
} 
```

但是 `db.SubmitChanges();`不断抛出`InvalidCastException`消息“无法从类型'System.DateTime'转换为类型'System.Byte []'。”

我找不到任何指向数据库相关问题的内容，虽然我使用的原始示例不包含 DateTime，但[Silverlightshow.net](http://www.silverlightshow.net/items/Windows-Phone-7.1-Local-SQL-Database.aspx)上的示例确实在非常相似的上下文中使用了 DateTime。

我是在看错地方还是遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:13:39.667

我有一个类似的问题。

在我的情况下，它缺少我的表的属性“服务器数据类型”上的值。我将属性“Type”定义为 DateTime，但这还不够。

# php - 对数组的 + 运算符的限制

> ID：10573704
> 
> 赞同：1
> 
> 时间：2012-05-13T17:22:51.453
> 
> 标签：php

以下代码产生`Unsupported operator types`错误：

```
$data = $modelData + array_merge($data, $recordData); 
```

但是，问题在于`$modelData`,`$data`和`$recordData`都是数组。内容可以在这里找到：http: [//bin.cakephp.org/view/1477154570](http://bin.cakephp.org/view/1477154570)

所以我不得不怀疑使用 + 运算符或其他一些潜在问题是否有限制。

编辑：确切的 php 版本：Win 7 64 位上的 PHP 5.3.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:48:16.473

您正在尝试合并 2 个数组，然后与第三个数组合并。在我看来还可以。如果我遗漏了什么，请告诉我。这是您给定数据的经过尝试的代码。 [http://codepad.org/hA654cQE](http://codepad.org/hA654cQE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:38:20.833

也许这是一个内置的语言特性而不是一个函数。所以它可能只接受变量形式的数组，而不是函数的结果。（虽然不确定。）

## 编辑

没有。测试了这段代码，它工作：

```
php > $a = array('w' => 'hello');
php > $b = array('x' => 'world');              
php > $c = array('y' => '!', 'z' => 1337);
php > $d = $a + array_merge($b, $c);
php > var_dump($d);
array(4) {
  ["w"]=>
  string(5) "hello"
  ["x"]=>
  string(5) "world"
  ["y"]=>
  string(1) "!"
  ["z"]=>
  int(1337)
} 
```

在 PHP 5.4.3 CLI 上。拱Linux。

# iphone - 对象的 UIScrollView 问题

> ID：10573708
> 
> 赞同：0
> 
> 时间：2012-05-13T17:23:12.213
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

现在我有一个 UIScrollView，它有很多 UIImageViews、UILabels 和其他对象。现在我必须能够从一个故事板视图滚动到另一个。我在情节提要中添加了另一个视图，现在如何从一个视图控制器滚动到另一个视图控制器而不弄乱以前的对象？任何帮助将不胜感激。

谢谢，维林德博拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:17:12.963

假设您必须查看 View1 和 View2 以及 UIScrollView 滚动条。

假设我理解这个问题，试试这个：

```
- (void) viewDidLoad {
    CGrect frame = self.View2.frame;
    frame.origin.y = 480; // assuming View1 and View2 has frames 320x480
    self.View2.frame = frame;
    self.scroller.contentSize = CGSizeMake(320,480*2);
} 
```

现在 View1 的 frame = [320,480]，View2 的 frame = [320,480]，scrollers content = [320,480*2] 为两个视图腾出足够的空间。

# algorithm - 有向无环图的最短路径

> ID：10573710
> 
> 赞同：0
> 
> 时间：2012-05-13T17:23:23.993
> 
> 标签：algorithm, language-agnostic, directed-graph, directed-acyclic-graphs

所以基本上，我有一个 n x m 浮点值数组，我试图找到任何第一行值和任何第 m 行值之间的最短路径。图中的节点对于不在边缘且不在底行的任何节点`(i, j)`都有子节点。我正在寻找一种算法来及时解决这个特定问题。我目前的思路围绕 A* 搜索展开，但请告诉我您的想法。`{(i, j+1), (i-1, j+1), i+1, j+1)}``(0 < i < n-1)``(j < m-1)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:20:39.220

*   项目清单

动态解是 O(NM) 或 O(M^2)。它不能低于这个 - 这是任何更好解决方案的反例。假设您想在第一行的最左侧元素和最后一行的最左侧元素之间找到一条路径。让我们看一下这种形式的矩阵：

```
10000000000000
11000000000000
11100000000000
11110000000000
11111000000000
11111100000000
11111110000000
11111111000000
11111110000000
11111100000000
11111000000000
11110000000000
11100000000000
11000000000000
10000000000000 
```

“1s”是您在从源元素到目标元素的路径上可能经过的元素。“0s”是你不能通过的元素。

“1”的数量是 NM/4 阶，所以 O(NM)（实际上是 Min(NM, M^2)，见下文）。因此，读取该矩阵中每个 1 的算法将具有 >=O(NM) 的复杂度。

另一方面，不读取所有“1”的算法将是不正确的。

**证明**：令矩阵中的数字为权重。选择算法未读取的“1”。将 1 更改为 0.5。该输入的算法失败，因为最佳路径现在通过它从未读取过的元素（因为它第一次读取的元素都没有改变，这次它也会读取相同的元素，除非它是不确定的，在这种情况下它是随机机会是否会起作用，这也使它不正确）。

但是，好的 O(NM) 解决方案应该适用于 1000x1000 矩阵（不到一秒）。如果您只击中必须击中的元素，则可以将其优化为 Min(M^2, MN)（例如，在我的示例矩阵中，如果宽度增加到 10000000，则不必读取添加的元素）。同样，如果高度增加到 10000000，则没有 M^2 顺序读取，因为您没有超出矩阵的边界。但是，正如您所说，这两个维度都非常大，我猜这没什么帮助。

# javascript - 在评估 javascript 时设置 this 指针

> ID：10573712
> 
> 赞同：0
> 
> 时间：2012-05-13T17:23:36.127
> 
> 标签：javascript, eval, this

我想执行一些 javascript，它是我通过 AJAX 下载的 html 的一部分。下载后我调用`eval`所有脚本标签。有没有办法操纵`this`指针并让它指向我定义的东西（例如下载的 AJAX blob）。我需要这个的原因是我需要对`HTML`仅下载的内容进行一些下载后处理。现在我通过为 AJAX 父元素分配一个 ID 并让脚本首先`getElementById`对该元素进行查找 () 来做到这一点。只要 id 是唯一的，但在我的情况下很难执行，这就可以了。

我当前的代码如下所示：

```
 if (element.children[i].tagName=="SCRIPT")
    {
        eval(element.children[i].innerHTML);
    } 
```

我希望`this`指针`innerHTML`指向`element`. 任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:25:42.197

您可以使用[`Function.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)或[`Function.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)。请注意，图元 ( `42`, `true`, `"foo"`) 将被装箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T20:23:11.787

我觉得更干净。

```
if (element.children[i].tagName=="SCRIPT")
{
    eval.call(element, element.children[i].innerHTML);
} 
```

# ios - 将连接从故事板拖到应用程序委托

> ID：10573713
> 
> 赞同：4
> 
> 时间：2012-05-13T17:23:38.170
> 
> 标签：ios, xcode, interface-builder, uistoryboard

我似乎在任何地方都找不到这个，但我在尝试在我的故事板中为我的应用程序委托创建参考出口时遇到了`UIWindow`问题`UIViewController`。`UIViewController`s 来自a `UISplitViewController`。从我看到的使用 xib 文件而不是故事板的示例中，`IBOutlet`s 似乎是通过“单击和拖动”来制作的。

我完全迷失了这个问题，因为 Xcode 不允许我将任何插座拖到我的应用程序委托中。如果您能帮助指出我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:05:22.053

XCode 和 Story 板通常只允许您将 outlet 拖动和连接到视图控制器。使用故事板时，选择一个项目作为根视图控制器，然后从那里进行通信和转场。如果您只是尝试将事物映射到您的故事板，您应该能够找到您执行类似的操作：

```
UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController; 
```

如果您有一个通用的“数据共享”类，那么单例是始终获取类的公共实例并确保所有引用类都使用相同信息的好方法。

# sql - 如何使用 ruby 修改 .sql 文件？

> ID：10573718
> 
> 赞同：0
> 
> 时间：2012-05-13T17:24:13.423
> 
> 标签：sql, ruby

我有一个在编辑器中看起来像这样的 sql 文件（alice.sql）

```
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_dg_object_extern_pub_dg_extern_pub_status]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)ALTER TABLE [dbo].[dg_object_extern_pub] DROP CONSTRAINT FK_dg_object_extern_pub_dg_extern_pub_status GO 
```

如果我将该文件加载到 irb 中，它看起来像这样

```
 f = File.open("alice.sql").readlines 
```

它看起来像这样:(

```
=> ["\377\376i\000f\000 \000e\000x\000i\000s\000t\000s\000 \000(\000s\000e\000l\000e\000c\000t\000 \00 
```

我想搜索和替换文件中的一些字符串，但现在这似乎不可能

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:21:58.357

随着`f = File.open("alice.sql").readlines`您打开文件句柄，但永远不要关闭它。

你应该做：

```
f = File.open("alice.sql")
lines = f.readlines
f.close 
```

或者

```
File.open("alice.sql"){|f|
  lines = f.readlines
} 
```

随着`File#readlines`你得到一系列的线。如果你想在一个字符串中进行替换，你应该使用`read`：

```
File.open("alice.sql"){|f|
  content = f.read
} 
```

最后但同样重要的是：您的*alice.sql*似乎是 UTF16，因此您必须将其读取为 UTF-16：

```
File.open("alice.sql", :encoding => 'UTF-16BE:UTF-8'){|f|
  content = f.read
} 
```

现在你得到`\uFEFFif exists (sele...`你看到领先的 BOM 了吗？要摆脱它，请使用：

```
File.open("alice.sql", :encoding => 'BOM|UTF-16BE:UTF-8'){|f|
  content = f.read
} 
```

（需要 ruby​​ 1.9，也许 BOM 版本需要 1.9.3）。

如果需要块外的内容，必须在块外定义变量（或者使用File#close）

```
content = nil #define variable, so you get the content after the open-block
File.open("alice.sql", :encoding => 'BOM|UTF-16BE:UTF-8'){|f|
  content = f.read
}
p content 
```

# ruby-on-rails - 在导轨中过滤之前

> ID：10573735
> 
> 赞同：0
> 
> 时间：2012-05-13T17:27:03.547
> 
> 标签：ruby-on-rails, ruby, actioncontroller, before-filter

像这样在过滤器之前设置这个好主意吗

```
ActionController::Base.before_filter { TitleHelper::Taitl.reset } 
```

我使用它是因为 rails 缓存类，我需要重置变量以使我的脚本正常工作

我也不想在 ApplicationController 中明确调用它

[这是我的代码](https://gist.github.com/2689572)

# powershell - 为什么 Powershell 作业这么慢？

> ID：10573737
> 
> 赞同：7
> 
> 时间：2012-05-13T17:27:20.570
> 
> 标签：powershell, jobs

当我在本地执行一个简单的语句时

```
$path = 'C:\Windows\System32\WindowsPowerShell\v1.0'
gci $path 
```

我立即看到了回应。但是当我在本地机器上将它作为作业执行时

```
$start = get-date
$path = 'C:\Windows\System32\WindowsPowerShell\v1.0'
$cmd = [scriptblock]::Create("gci $path")
$jnr1 = Invoke-Command -computer localhost -ScriptBlock $cmd  -asJob
Wait-Job $jnr1
Receive-job $jnr1
$end = Get-date
($end - $start).totalseconds 
```

我必须等待 55 秒。根据我十年前的 unix 经验。我希望后台作业的运行速度几乎与前台作业一样快。

有没有办法加快 PowerShell 后台作业的执行速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:37:42.570

这个较短的命令做同样的事情：

```
Measure-Command {Start-Job -Command {gci C:\Windows\System32\WindowsPowerShell\v1.0} | Wait-Job | Receive-Job} 
```

在带 PSv3 的 Win8 beta 上对我来说快了大约 3 秒，在带 PSv2 的 WinXp 上大约是 15-30 秒。

使用 PsV2 引入了后台作业。他们有时间进行优化，因为 v2 和 PowerShell 现在在 v3 中使用[DLR](http://huddledmasses.org/powershell-3-finally-on-the-dlr/)，因此可以解释性能差异。

它必须使用命令文本启动另一个 powershell 进程，运行命令，发回序列化结果并拆除该进程。

为了找出它在做什么，我在上面的命令运行时运行了 procmon，并且大部分时间 powershell.exe 都在读取网络和 COM 相关的 reg 键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-24T11:09:31.927

您的演示在我测试的 Windows 服务器上运行得非常快。我相信在这种特殊情况下，工作可能不是问题，而是调用本地主机！尝试将其更改为 127.0.0.1。我遇到了 PHP 应用程序的性能问题，因为解析 localhost 花费了太长时间。将其更改为 ip 地址修复了它。试试看。

相关讨论 [https://forums.iis.net/t/1153459.aspx?PHP+very+slow+on+IIS7](https://forums.iis.net/t/1153459.aspx?PHP+very+slow+on+IIS7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T22:52:40.537

我也遇到了慢速作业的问题，它在前台运行得很快，但是你的问题对于单个命令来说是如此明显，以至于我怀疑这与产生新的 powershell 进程的成本或某些机器特定的困难有关. （是的，您会为每个并发作业获得一个额外的 powershell.exe。）但对于很多人来说，它不仅如此。这篇文章：（[https://vwiki.co.uk/Background_Jobs_(PowerShell)](https://vwiki.co.uk/Background_Jobs_(PowerShell))）提到作业在 PS 中运行的默认优先级低于正常优先级。一些帖子建议在作业代码块中放置以下内容之一，以解决主要的 CPU 问题：

```
[System.Threading.Thread]::CurrentThread.Priority = 'AboveNormal'
([System.Diagnostics.Process]::GetCurrentProcess()).PriorityClass = 'AboveNormal' 
```

对我来说不幸的是，我认为我遇到了 I/O 性能问题，这与作业的 CPU 性能问题有关。这篇文章：（[如何在 Powershell 中设置低 I/O（“后台”）优先级](https://stackoverflow.com/questions/21700738/how-to-set-low-i-o-background-priority-in-powershell)）涉及增加内存和 IO 优先级的概念，但我没有看到一个我觉得很舒服的答案。

Powershell 作业最重要的特性之一是并行执行多个作业。PS Jobs 的替代品是 PS“工作流”，但似乎我仍然遇到与工作相同的工作流性能问题。非常令人沮丧。

# java - 选择单元格而不是 swt 表中的一行

> ID：10573738
> 
> 赞同：0
> 
> 时间：2012-05-13T17:27:23.320
> 
> 标签：java, eclipse, swt, rcp

我有一个 SWT 表。单击时，我不想选择整行，而是选择某些单元格。那可能吗？

我目前的代码是：

```
tableViewer = new TableViewer(parent, SWT.NONE);
    Table table = tableViewer.getTable();
    this.tableViewer.getTable().setLayoutData(
            new GridData(SWT.FILL, SWT.FILL, true, true, 2, 1));
    TableLayout layout = new TableLayout();
    layout.addColumnData(new ColumnWeightData(20, 20, true));
    layout.addColumnData(new ColumnWeightData(20, 20, true));
    this.tableViewer.getTable().setLayout(layout);
    table.setHeaderVisible(true);
    table.setLinesVisible(true);
    tableViewer.setContentProvider(new ArrayContentProvider());
    tableViewer.setLabelProvider(new ITableLabelProvider() {
               ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:57:06.487

默认实现是只选择单元格而不是行。在您的情况下，因为您选择`fullSelection`了 true，所以选择了整行。用这个替换你的代码，它应该可以工作。

```
this.tableViewer.getTable().setLayoutData(
        new GridData(SWT.FILL, SWT.FILL, true, true, 2, 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T14:44:50.450

如果要获取单元格的文本，可以使用 getCell()

```
this.tableViewer.getTable().addMouseListener(new MouseAdapter() {
    public void mouseDown(MouseEvent e) {
        ViewerCell viewerCell = this.tableViewer.getCell(new Point(e.x,e.y));
        String cellText = viewerCell.getText();
        System.out.println("Cell clicked: " + cellText);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:12:34.653

转到[JFace Snippets](http://wiki.eclipse.org/JFaceSnippets)，然后搜索“cell”。有几个有用的片段可供选择......

# matlab - MATLAB 中的错误处理和插值

> ID：10573739
> 
> 赞同：1
> 
> 时间：2012-05-13T17:27:28.510
> 
> 标签：matlab, error-handling, interpolation, data-processing

我目前正在研究一个 MATLAB 脚本，该脚本可以从运动传感器中发现错误，其中数据“翻转”半球并记录它应该是什么的倒数。除此之外，还有一个过渡期，传感器在此“翻转”过程中继续记录值。

下面是一个示例（x 轴是以样本为单位的时间，y 是以英寸为单位的传感器与传感器的距离）：

![在此处输入图像描述](../Images/3b42c6068d14de306d135e0a6740830b.png)

我目前的进展如下：

![在此处输入图像描述](../Images/d2d3ca432036b76bd19e73c256bcd22f.png)

数据错误已被抑制，但仍与数据集的其余部分不一致。有人可以提出改进的方法吗？

我的代码如下：

```
%Create counter variable
n = 1;

%Find length of the matrix under test
size = length(mTest);
intVals = zeros(size,1);

for n = 1:size

    %Round all of the values recorded to the nearest integer (inch)
    intVals(n,1) = round(mTest(n,1)); 

end

%Find the mode of the integers to have a reference point against the errors
ref = mode(intVals);

%Create a sample to put the new `fixed` data into
mFix1 = zeros(size,1);

for n = 1:size

    checkVal = mTest(n,1);

    %If the raw value is not within an inch either side of the reference 
    %point check for complete wrapping by inverting the data.
    if checkVal < (ref-1)
        checkVal = -checkVal;
    end

    if checkVal > (ref+1);
        checkVal = -checkVal;
    end

    %If the data is still outside of the range of acceptable values create
    %an estimate based upon the last 3 samples
    if checkVal < (ref-1) && checkVal > (ref+1)
        m(1,1) = mFix1(n-3,1);
        m(2,1) = mFix1(n-2,1);
        m(3,1) = mFix1(n-1,1);
        checkVal = mean(m);       
    end

    %Output the data after error checking
    mFix1(n,1) = checkVal;

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:12:05.750

您是否尝试过中值过滤器？

如果你能找到一个好的窗口宽度，它可能会比你正在执行的移动平均线好一点。

例如：

```
Avg([1 100 1]) = 34;
Median([1 100 1) = 1; 
```

Matlab medfilt1

# php - PHP/FB API/GRAPH - 为什么我得到一个未定义的偏移错误？

> ID：10573744
> 
> 赞同：0
> 
> 时间：2012-05-13T17:28:08.450
> 
> 标签：php, facebook, facebook-graph-api

我不明白为什么会出现此错误：

> 注意：未定义的偏移量：0

我正在尝试使用以下方法从 FB Graph API 获取用户朋友列表：

```
// get users friends
        $friends_url = "https://graph.facebook.com/".$user_id."/friends?access_token=".$access_token;
        $friends_json = file_get_contents($friends_url);
        $friends_data = json_decode($friends_json, true);       

        for ($i = 0; $i < sizeof($friends_data); $i++) {
        $friends = $friends_data[$i];
        echo $friends['name'] . ", ";
        } 
```

如果你 var_dump($friends_data) 或 print_r($friends_data) 你可以看到我有朋友数组，并且 data[0] 有一个朋友信息。那么为什么会出错呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:45:25.637

该列表存储在

```
$friends_data['data'][$i] 
```

不是

```
$friends_data[$i] 
```

你应该做

```
$friends_data = json_decode($friends_json, true)['data'];   

for ($i = 0; $i < sizeof($friends_data); $i++) {
    $friends = $friends_data[$i];
    echo $friends['name'] . ", ";
} 
```

示例数据位于：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:46:09.360

我可能`$friends_data`没有数字索引。您的解决方案是使用`foreach`：

```
 foreach ($friends_data as $friends) {
    echo $friends['name'] . ", ";
  } 
```

# python - query.filter 和 gql

> ID：10573745
> 
> 赞同：3
> 
> 时间：2012-05-13T17:28:22.647
> 
> 标签：python, google-app-engine, google-cloud-datastore, gql

我正在尝试这个功能，但是出了点问题。我存储了名称“John”，但是当我将 john 传递给`username_`并调用`check_user`输出`return results`时，即使该名称未存储在谷歌数据存储中也是如此。为什么？

```
def check_user(self, username_):
    query = db.Query(Registrations)
    results = query.filter('username =', username_)
    if results:
        return results

user_username = self.request.get('username')
check_username_valid = self.check_user(user_username)

 if not check_username_valid:
    error_username_exists="Username already exists" 
```

在 GQL 的情况下，我如何将变量传递`username_`到查询中？像：

```
 qr = db.GqlQuery("Select * from Registrations Where username = ?????") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:31:37.827

results 是查询对象而不是结果，您需要调用`query.filter('username =', username_).get()`以返回单个结果或`query.filter('username =', username_).fetch()`返回所有结果。

# ruby - 安装 ruby 1.9.3 时遇到问题

> ID：10573753
> 
> 赞同：3
> 
> 时间：2012-05-13T17:29:43.273
> 
> 标签：ruby, macos, rvm

我正在寻找安装 ruby​​ 1.9.3。我目前安装了 ruby​​ 1.9.2

Mac Os X Xcode Version 4.3.2 我已经转储了所有以前版本的 Xcode

我已经阅读了大量文章，并尝试了[https://stackoverflow.com/a/9651747/1392225中详述的步骤](https://stackoverflow.com/a/9651747/1392225)

这是我的错误

```
ruby-1.9.3-p125 - #fetching 
ruby-1.9.3-p125 - #extracted to /Users/kai/.rvm/src/ruby-1.9.3-p125 (already extracted)
WARN: Patch 'xcode-debugopt-fix-r34840.diff' not found.
ruby-1.9.3-p125 - #configuring 
ruby-1.9.3-p125 - #compiling 
ERROR: Error running 'make ', please read /Users/kai/.rvm/log/ruby-1.9.3-p125/make.log
ERROR: There has been an error while running make. Halting the installation. 
```

错误日志似乎指向这个

```
compiling readline.c
readline.c: In function ‘username_completion_proc_call’:
readline.c:1499: error: ‘username_completion_function’ undeclared (first use in this function)
readline.c:1499: error: (Each undeclared identifier is reported only once
readline.c:1499: error: for each function it appears in.)
make[2]: *** [readline.o] Error 1
make[1]: *** [ext/readline/all] Error 2
make: *** [build-ext] Error 2 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T10:06:53.903

我得到了同样的错误。我通过使用以下命令解决了它：

`rvm reinstall 1.9.3 --with-readline-dir=/usr/local/Cellar/readline/6.2.4`

只需使用 homebrew 安装的 readline，在[https://rvm.io/packages/readline/上查看更多信息](https://rvm.io/packages/readline/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:59:46.200

看起来您已经在使用 rvm 并且 readline 包有问题，请查看以下说明：

[https://rvm.io/packages/readline/](https://rvm.io/packages/readline/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T03:43:55.843

你安装了readline包吗？

尝试使用最新的 RVM 稳定分支安装 1.9.3-p194（不是 p125），它不需要上述输出提到的 osx 补丁。请仔细按照我在[文章](https://stackoverflow.com/questions/9651670/issue-updating-ruby-on-mac-with-xcode-4-3-1/9651747#9651747)中描述的步骤进行操作，如果您仍有问题，请提供您运行的命令（除了输出。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-13T17:57:58.833

使用[http://rvm.io](http://rvm.io)，这可能是当今在您的计算机上安装 Ruby 的最简单和最好的方法。其他人可能会建议使用 rbenv 或 homebrew 或其他数据包管理器。这些可能也很好。

# php - 教义：在 OneToMany 关联中忽略了 mappedBy 的值

> ID：10573756
> 
> 赞同：0
> 
> 时间：2012-05-13T17:29:52.707
> 
> 标签：php, orm, doctrine, doctrine-orm, entity

我在Doctrine中建立了一个简单的User->Comment关联，简单的OneToMany（一个用户可以写很多评论）。

所有作品都找到了，但我发现了一个奇怪的教义行为。首先一些代码：

**用户实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="users")
 */
class User extends EntityAbstract {
    /**
     * @var int
     * @ORM\Id
     * @ORM\Column(name="id", type="integer")
     * @ORM\GeneratedValue
     */
    protected $_id;

    /**
     * @var \Doctrine\Common\Collections\Collection
     * @ORM\OneToMany(targetEntity="Comment", mappedBy="TodayIsASunnyDay")
     *                                                  ^^^^^^^^^^^^^^^^ WTF
     */
    protected $_commentsAuthored;

    public function __construct() {
        $this->_commentsAuthored = 
            new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

**评论实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="comments")
 */
class Comment extends EntityAbstract {
    /**
     * @var int
     * @ORM\Id
     * @ORM\Column(name="id", type="integer")
     * @ORM\GeneratedValue
     */
    protected $_id;

    /**
     * @var User
     * @ORM\ManyToOne(targetEntity="User")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     *
     */
    protected $_author;
} 
```

在用户中，学说需要一个*mappedBy*属性，因为它是关联的反面。但看起来，我可以写**任何我想要的东西作为 value**。（我认为正确的值是“user_id”？）

那么，什么时候使用或检查过这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:39:30.423

是的，你是对的，在我的项目中检查了它 - 没有发出错误。它会影响实体的加载方式（设置`fetch="EAGER"`在里面`OneToMany`，你会得到你的错误），主要是它在水合数据时将所有者设置在评论对象上（引擎盖下有更多的魔法，很难理解）。我会在教义错误跟踪器中发布一个问题，如果您拼写错误的字段名称，它是一个难以调试的错误来源。

* * *

您还需要指定`inversedBy`：

```
/**
 * @var User
 * @ORM\ManyToOne(targetEntity="User", inversedBy="_commentsAuthored")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 *
 */
protected $_author; 
```

~~当您确实检索 的值`_commentsAuthored`并尝试用它做某事（例如，计算它）时，应该使用它~~

# java - Java中的自动文件/输入流处理

> ID：10573759
> 
> 赞同：0
> 
> 时间：2012-05-13T17:30:20.650
> 
> 标签：java, inputstream

序言：我了解 Apache IO，并且希望得到关于 Apache IO 指针之外的评论。

* * *

这可能是一个有点愚蠢的问题，但我刚刚意识到：

当我实现一个必须从输入流中读取的 API 时，我最终实现了很多重载的变体，例如：

```
public void foo ( InputStream input, int somearg, float someotherarg) { ... 
```

重载变体：

```
public void foo ( File inputFile, int somearg, float someotherarg) { ...
public void foo ( String filename, int somearg, float someotherarg) { ... 
```

- 或者 -

我可以实现

```
public void foo ( InputStream input, int somearg, float someotherarg) { ... 
```

并实现处理文件名、文件并将它们转换为 InputStreams 的辅助实用程序函数。

我的问题是我一直在重新实现它——是否有人编写了一个库，或者它是否在设计模式中被处理过。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:19:53.967

[番石榴](http://code.google.com/p/guava-libraries/wiki/IOExplained)有这个东西叫`InputSupplier`。也许你应该看看。

除此之外，Java 7 中有一个[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)接口和一个称为[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)的功能，这可以简化您的情况（即您只能创建需要的 API 方法，`InputStream`程序员可以使用 try-with-resources 来处理这些输入当它们具有字符串/文件参数时流）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:34:24.947

您可能正在寻找 Apache Commons IO。它有很多方法可以减少这类事情的开销。

# java - 加密程序更改字符串的索引

> ID：10573760
> 
> 赞同：1
> 
> 时间：2012-05-13T17:30:23.473
> 
> 标签：java, permutation

```
public class Encryption {
private static final int[] encrypt = {2, 9, 3, 4, 6, 8, 1, 0};
private static final int[] decrypt = new int[8];
private static final int minLength = 10;

String encrypt (String password)    {
    if(password.length()<minLength) {
        return password;

    }   else {
        char[] arrayEncrypted = password.toCharArray();
        for (int i = 0; i < encrypt.length; i++)    {
            arrayEncrypted[i] = (char) (arrayEncrypted[i]);

            }
            return String.valueOf(arrayEncrypted);

    }
}

String decrypt (String password)    {
    if (password.length()<minLength)    {
        return password;

    }   else {
        char[] arrayDecrypted = password.toCharArray();
        for (int i = 0; i < arrayDecrypted.length; i++) {
            arrayDecrypted[i] = (char) (arrayDecrypted[i]);
        }
        return String.valueOf(arrayDecrypted);
    }
}

boolean isValidLength (String password) {
    if (password.length()<minLength)    {
        return true;

    }   else    {
        return false;
    }
}

int getMinLength(){
    return minLength;
}

} 
```

该程序假设使用经典的置换函数来加密数据。加密类中要使用的加密函数只有(2, 9, 3, 4, 6, 8, 1, 0)。

密码中的每个字符都根据排列移动到新的索引。由于在排列中 2 紧随其后的是 9，因此密码索引 2 处的字符必须重新分配给索引 9。类似地，索引 9 中的字符必须重新分配给索引 3，依此类推。最后一次重新分配通过将最初位于索引 0 的字符放入索引 2 来完成循环。

只是检查一下，因为我的程序非常偏离，我需要一些帮助才能让它回到正轨。下图是编译后的样子。

![编译](../Images/a59a7359047798c2052b0b3ae1b86e48.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:38:41.950

仔细看这条线。

```
arrayEncrypted[i] = (char) (arrayEncrypted[i]); 
```

除非我完全误解了它，否则您在那儿所做的……实际上，*绝对没有*。您将`i`在数组中的位置找到的字符，并将其放置在位置`i`。你想做的是像

```
encryptionResult[i] = (arrayEncrypted[encrypt[i]]); 
```

当您尝试*重新排列*字符时。

# php - 在javascript中使用php函数

> ID：10573761
> 
> 赞同：-2
> 
> 时间：2012-05-13T17:30:23.653
> 
> 标签：php, javascript

我想在javascript中调用一个php函数。我有一个解决方案，它确实有效，但不是我想要的方式。

代码：

```
function test(){ 
    document.getElementById("php_code").innerHTML="<?php   
    print 'something';
    ?>"; 
}

... 
<a href="#" onclick="test(); return false;"> test </a> 
```

当我单击链接时它可以工作，但我无法以其他方式调用该功能，只需单击链接即可。所以我想要什么，只需通过 test() 调用该函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:37:06.617

学习 AJAX（异步 Javascript 和 Xml），因为 javascript 在 PHP 之后执行。使用 AJAX，您可以在不刷新页面的情况下向服务器发送请求，然后服务器返回一些字符串，您可以在页面上使用该字符串。（通过在请求中发送一些参数，您可以使用简单的 if 语句执行 test() 函数（如果将其转换为 PHP）。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:41:56.877

PHP 在服务器端执行（它负责为浏览器呈现页面），同时 Javascript 将在客户端执行（在页面交付给浏览器之后）。

因此，您可以在它们之间传递值的唯一方法是您的解决方案之一。在它们之间调用函数是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:48:57.443

你试图做的事情是不可能的。

PHP 是服务器端代码，Javascript 是客户端代码。从 javascript 调用执行 PHP 脚本的唯一方法是通过 AJAX。有一个非常简单的教程可以帮助您在 w3schools 上使用 AJAX。

[w3schools Ajax 教程](http://www.w3schools.com/ajax/default.asp)

# php - 无法使用 FOSRestBundle

> ID：10573764
> 
> 赞同：12
> 
> 时间：2012-05-13T17:30:58.887
> 
> 标签：php, rest, symfony, fosuserbundle

我正在尝试使用 Symfony2 和 FOSRestBundle 来提出一个 REST 框架，但我失败了。

我做了以下事情：

在我的 deps 文件中：

```
[FOSRest]
    git=git://github.com/FriendsOfSymfony/FOSRest.git
    target=fos/FOS/Rest

[FOSRestBundle]
    git=git://github.com/FriendsOfSymfony/FOSRestBundle.git
    target=bundles/FOS/RestBundle

[JMSSerializerBundle]
    git=git://github.com/schmittjoh/JMSSerializerBundle.git
    target=bundles/JMS/SerializerBundle 
```

在我的应用程序/config.yml

```
fos_rest:
    view:
        formats:
            rss: true
            xml: false
        templating_formats:
            html: true
        force_redirects:
            html: true
        failed_validation: HTTP_BAD_REQUEST
        default_engine: twig

sensio_framework_extra:
    view:
        annotations: false 
```

在我的控制器中：

```
namespace Rest\WebServiceBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use FOS\RestBundle\View\View;  

class DefaultController extends Controller
{

    public function indexAction($name)
    {

  $view = View::create()
          ->setStatusCode(200)
          ->setData($name);
        return $this->get('fos_rest.view_handler')->handle($view);

    }
} 
```

当我转到 URL 时：[http ://local.symfony.com/web/app_dev.php/hello/test](http://local.symfony.com/web/app_dev.php/hello/test)

我得到：

```
Unable to find template "".
500 Internal Server Error - InvalidArgumentException
2 linked Exceptions: Twig_Error_Loader » Twig_Error_Loader 
```

文档让我感到困惑，我无法继续。我想要的只是能够将一组数据传递给控制器​​并取回 JSON 格式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T19:15:43.050

在`formats`部分中，`config.yml`您必须启用 json 格式并禁用其他格式并`_format`在路由中将默认值设置为 json。例如

```
# app/config/config.yml
fos_rest:
    view:
        formats:
            json: true
            rss: false # removing them will also work
            xml: false
#.......

#bundle/routing.yml
route_name:
  pattern: /route
  defaults: { _controller: Bundle:Controller:Method, _format:json } 
```

或者，在控制器中你可以做

```
$view->setFormat('json'); 
```

还要查看文档中给出的示例链接。

# sdk - 佳能 SDK (EdsGetPropertyDesc)

> ID：10573768
> 
> 赞同：0
> 
> 时间：2012-05-13T17:31:30.677
> 
> 标签：sdk, edsdk

我正在使用佳能 2.10 SDK (eos)，但无法理解`EdsGetPropertyDesc` `PropDesc`数据数组。数组中的值看起来不像我的相机选项。

例如，这些`Av`值包括 40,43,45,48,51,53,... 而我的相机有 4, 4.5, 5, 5.6,...

我必须以某种方式转换价值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:11:22.883

这里是`Av`十六进制的值。你可以用你的相机设置映射它

```
value      Aperture Value
---------------------------
Ox40       11  
Ox43       13 (1/3)  
0x44       13    
0x45       14
0x48       16     
0x50       22
0x53       25 
```

您将在此处找到完整的 Aperture 表`kEdsPropID_Av` [EDSDK API](https://docs.google.com/viewer?a=v&q=cache%3amdhN7DAlfr0J%3awww.assembla.com/spaces/CanonEOSApp/documents/aP8H0mUaqr3OlDeJe5afGb/download/aP8H0mUaqr3OlDeJe5afGb+edsdk+api+pdf&hl=en&pid=bl&srcid=ADGEESgehWFrlZw2EWtHs7HMJzyrjv9YJGAcFQpMgMIp4NQu_9oL4kkMfZ-G7NNFRnCdAxvnCEyR9cTWVaU4vm_p0yoZTQGGUPnpk6igvujGwX-hlM02IHmCbEhAKCfRAT-n1RwUgska&sig=AHIEtbQfVzTRUlqwWmGmLvJLgllwQPMo8Q)

# javascript - IE7中Craftmap的问题

> ID：10573774
> 
> 赞同：0
> 
> 时间：2012-05-13T17:32:39.090
> 
> 标签：javascript, internet-explorer-7

我在以下测试站点上使用[Craftmap 插件：](http://www.jscraft.net/plugins/craftmap.html) [http](http://hhglobal.energycell.co.uk/locations/) ://hhglobal.energycell.co.uk/locations/ 。

在静态全球地图下方，我有美洲、欧洲和亚太地区的选项卡，其中显示了工艺地图的实例。

这在除 IE7 或 IE8 之外的所有浏览器中都可以正常工作。出于某种原因，在这两个浏览器中，当您单击选项卡时，它只会显示预加载器图形，不会显示地图图像，即使图像可用且链接正确。

我想知道是否有人可以提出一些建议？似乎这两个浏览器出于某种奇怪的原因不会加载地图图像。

我已请求插件开发人员提供一些支持，但他现在似乎不可用。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:13:07.383

此错误是由于在 IE7 中缓存图像引起的。`load()`如果图像缓存在 IE7 中，则不会触发jQuery方法，因此`preload`图像不会消失。

要解决此问题，您需要在标记中向图像添加随机数据。

时间戳例如：

```
<div class="demo1">
    <img src="/assets/framework/world_map.jpg?23456897" class="imgMap" />
<!-- ... your code ... -->
<div class="demo2">
    <img src="/assets/framework/world_map.jpg?907784534235" class="imgMap" />
<!-- ... your code ... -->
<div class="demo3">
    <img src="/assets/framework/world_map.jpg?11123423535" class="imgMap" />
<!-- ... your code ... --> 
```

请注意，由于您有相同的图像，您需要向图像添加 3 个不同的随机数。

或者您可以修改`craftmap.js`代码：

`init`在类中查找函数`preloader`：

```
init: function(){
    var img = new Image(),
        src = IMG.attr('src');
    P.preloader.create();
    $(img).addClass(S.image.name).attr('src', src).load(function(){
        var t = $(this),
            css = {
                width: this.width,
                height: this.height
            }
        t.css(css);
        IMG.remove();
        P.preloader.remove();
        S.preloader.onLoad.call(this, t, css);
    }).appendTo(C);
}, 
```

并将随机数据添加到图像`src`：

前：

```
$(img).addClass(S.image.name).attr('src', src).load(function(){ 
```

后：

```
$(img).addClass(S.image.name).attr('src', src + '?' + Math.random() * (new Date().getTime())).load(function(){ 
```

甚至更好：

如果您在仅加载一张地图时不需要`preload`图像，则可以`preload`通过添加手动禁用元素：

```
$('.preloader').remove(); 
```

在所有方法初始化后在您的`init.js`文件中：`craftmap`

```
$('.demo3').craftmap({
image: {
    width: 2046,
    height: 925
},
    map: {
        position: '855 410'
    }
});
$('.preloader').remove(); // IE7 fix 
```

# php - php 中的正则表达式不适用于 @\\section{(.*?)}@U

> ID：10573775
> 
> 赞同：0
> 
> 时间：2012-05-13T17:32:46.967
> 
> 标签：php, regex

我用 PHP 写了一个简单的正则表达式脚本：

```
<?php  
$string = "\section{Test 1} 
sdfgsdfg";  
$regex = "@\\section{(.*?)}@U";  
$replace = "$1jksdfahlkjh";  
$newString = preg_replace ($regex, $replace, $string, -1 );  
?> 
```

见：[http ://regexp-tester.mediacix.de/t287](http://regexp-tester.mediacix.de/t287)

使用

```
echo $newString; 
```

只给我

> \section{测试 1} sdfgsdfg

正则表达式模式，如

```
$bbcode = array(

"/\[b\](.*?)\[\/b\]/is" => "<strong>$1</strong>",
"/\[u\](.*?)\[\/u\]/is" => "<u>$1</u>",
"/\[url\=(.*?)\](.*?)\[\/b\]/is" => "<a href='$1'>$2</a>"

);
$text = "[b]Text[/b][u]Text[/u]";

$text = preg_replace(array_keys($bbcode), array_values($bbcode), $text);
echo $text; 
```

效果很好。有什么解决办法吗？我不想写一个完整的 LaTeX-Parser，但我想替换那些 "\section{...}"-Strings

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:40:11.843

您需要转义`\`'s，否则它们将被 php 本身视为转义然后剥离：

```
$regexp = "@\\\\section{(.*)}@"; 
```

修饰符是不必要的`U`，因为这会使`.*?`贪婪再次出现，因此您正在反转反转。效果`.*`也很好。

# javascript - 使用 Jquery 将元素居中

> ID：10573777
> 
> 赞同：0
> 
> 时间：2012-05-13T17:33:21.860
> 
> 标签：javascript, jquery, css

我正在尝试使元素居中。元素可能会改变宽度，因此我不能使用`margin: 0 auto`.

这是我的代码：

```
$.fn.center = function() {
    $(this).css({
        'margin-left': ($(this).parent().innerWidth() - $(this).outerWidth()) / 2  + "px",
        'margin-right': ($(this).parent().innerWidth() - $(this).outerWidth()) + ($(this).outerWidth() / 2)  + "px"
    });   
};
$('#nav').center(); 
```

不幸的是，这不起作用。你能帮我弄清楚为什么吗？我应该使用绝对定位吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:43:12.217

这一切都不需要。。

由于您正在将子元素（`li`）设置为内联块，因此只需将容器设置`#nav`为 have `text-align:center`。

并且根本不设置任何边距..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:43:47.610

您可以定位元素`position:absolute;`，然后使用公式设置左侧位置。另一种方法是定位元素`position:relative;`，并使用`outerWidth`设置元素的宽度，然后使用`margin:0 auto;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:39:15.240

它可能有效：

```
var space = ($(this).parent().width() - $(this).width) / 2;

$(this).css({marginLeft : space , marginRight : space}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:41:06.350

要将 id 为“gameCanvas”的画布元素居中，包含在我最近使用的 id 为“game”的 div 中：

```
$('#gameCanvas').css('margin-left', ($('#game').width() - $('#gameCanvas').width()) / 2); 
```

因此，如果您知道您的容器 ID，请将“#gameCanvas”替换为“#game”，`this`并将“#game”替换为您的容器 ID

# .htaccess - 通过 .htaccess 扩展重写规则以在查询字符串中包含分页字段和值

> ID：10573779
> 
> 赞同：0
> 
> 时间：2012-05-13T17:33:45.447
> 
> 标签：.htaccess

我在网站上有一个页面，该页面根据从数据库中提取的记录显示图像。该页面为此目的使用查询字符串，如下所示：

```
www.example.com/category.php?category=cars 
```

但我想在浏览器中有一个“漂亮”的地址，看起来像这样：

```
www.example.com/category/cars 
```

所以我把这个指令放在根 .htaccess 文件中：

```
RewriteEngine on
RewriteRule ^category/(\w+)/?$ category.php?category=$1 
```

这成功了：现在，链接到：

```
www.example.com/category/cars 
```

... 获取本应通过以下方式获取的页面内容：

```
www.example.com/category.php?category=cars 
```

（并且后一个原始查询字符串版本仍然有效）。

但是现在我想在 category.php 中引入分页，这样它就需要两个查询字符串：“category”（和以前一样）和现在的“page”。

我的问题是，如何修改/扩展 .htaccess 指令，以便链接到：

```
www.example.com/category/cars/9 
```

...获取以下输出：

```
www.example.com/category.php?category=cars&page=9 
```

此外，是否可以扩展重写工作，以便如果站点访问者手动更改明显看起来是页码的内容，请说：

```
www.example.com/category/cars/9 
```

至：

```
www.example.com/category/cars/2 
```

...地址实际上会获取相应的“页面”：

```
www.example.com/category.php?category=cars&page=2 
```

（如果它按照分页存在）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:43:42.263

看到这个：

[分页和.htaccess](https://stackoverflow.com/questions/1514756/pagination-and-htaccess)

并考虑一个空页面作为第一页，例如

# class - 找不到类异常：找不到MyMapper.class

> ID：10573780
> 
> 赞同：0
> 
> 时间：2012-05-13T17:33:45.773
> 
> 标签：class, hadoop, mapreduce

我运行了一个 hadoop map reduce 程序，它的映射和归约。但是错误**类 not** * *found 异常我*来了，并且在任务跟踪器从属的 Web 界面中没有执行它的工作。我有足够的内存空间并且运行了其他运行良好的程序。我也有所有的 .class 文件，输出也是正确的。**如何删除类未找到异常，以便奴隶也可以从事工作。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:17:09.043

问题的可能原因可能是驱动程序中缺少“SetJarByClass”调用。在这种情况下，作业将开始，但任务跟踪器将没有您的课程。

# java - 比较“大于'0'..和NULL”的两个字符串

> ID：10573788
> 
> 赞同：3
> 
> 时间：2012-05-13T17:35:11.863
> 
> 标签：java, string-comparison, comparison-operators

我试图通过严格的 Java 方法和运算符挖掘我的方式，但现在，试图将一段 PHP 代码“翻译”为 Java (Android)，我有点卡住了。

在 PHP 中：

```
if ($row['price']>'0'){
  (.. do something if price is defined - and higher than zero ..)
} 
```

问题是 $row['price'] 可能为空（在 Java 中：null？）或包含 '0'（零）。但是我怎样才能以一种智能且不太复杂的方式在 Java 中编写代码呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T17:42:42.090

假设您以可变价格获得价格字符串

```
String price = <get price somehow>;    
try {
    if (price != null && Integer.valueOf(price) > 0) {
        do something with price...
    }
} catch (NumberFormatException exception) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:26:40.243

你可以使用这个：

```
String price="somevalue";
int priceInt=Integer.valueOf(price);

try{
if( !price.equals("") && priceInt>0){

// if condition is true,do your thing here!

}
}catch (NullPointerException e){

//if price is null this part will be executed,in your case leave it blank
}
catch (NumberFormatException exception) {
} 
```

# jquery - Meteor 加载 jQuery 的方式有什么奇怪的吗？

> ID：10573789
> 
> 赞同：5
> 
> 时间：2012-05-13T17:35:26.963
> 
> 标签：jquery, backbone.js, meteor, backbone-views

当我使用 Meteor 时，我在使用标准 jQuery 功能时遇到了一些困难。我的主要“客户端/服务器”JS 文件如下所示：

```
if (Meteor.is_client) {
$(document).ready(function(){
$('#myDiv').append("foo");
console.log('bar');
});
} 
```

当我加载应用程序时，'bar' 记录正常，但 .append 不起作用。如果我在页面加载后在控制台中调用相同的 .append ，它工作正常。（类似地，如果我在非 Meteor 设置中运行相同的代码，它也可以正常工作。）

我实际想要运行的代码如下所示：

```
$(document).ready(function(){
var myModel = new MyModel({"name": "foo"});
var myModelView = new MyModelView({model: myModel});
});
var MyModel = Backbone.Model.extend({
initialize: function() {  
}
});
var MyModelView = Backbone.View.extend({
el: $('#myEl'),
initialize: function(){
_.bindAll(this, 'render');
this.render();
},
render: function(){
$(this.el).append(this.model.get('name'));
console.log(this.model.get('name'))
}
}); 
```

在这里不起作用的方法是在视图中渲染。渲染方法的 console.log 位很好，但 jQuery 附加不起作用。最初我想知道问题是否与我使用 Backbone 的方式有关，但现在我想知道这是否是 Meteor/jQuery 问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T17:58:14.977

也许尝试`Meteor.startup`在客户端使用：

```
if (Meteor.is_client) {
    Meteor.startup(function () {
        $(document).ready(function (){
            $('#myDiv').append("foo");
            console.log('bar');
        });
    });
} 
```

根据我在[Meteor 文档](http://docs.meteor.com/#meteor_startup)中收集的内容，使用`$(document).ready()`时调用甚至可能是多余的`Meteor.startup`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T19:25:12.740

以下对我有用：

```
if (Meteor.is_client) {
    Template.templateNameThatContainsMyDiv.rendered = function(){
        $('#myDiv').append("foo");
        console.log('bar');
    };
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-13T17:53:29.097

`$(document).ready`当初始静态 DOM 完成加载时开始，如果您使用任何 JS 模板库，那么初始静态 DOM 在`$(document).ready`运行时很可能是空的。因此，当模板完成渲染时，您必须订阅回调以启动您的代码。如果这不可能，您将不得不使用`.on`or`.bind`并监听您正在寻找的 DOM 节点的插入...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-21T06:26:47.537

这俩：

```
$(document).ready 
```

和：

```
Template.templateName.rendered = function(){ 
```

解决方案取决于启动时显示的模板和/或填充其所有内容。例如，如果您使用

```
{{#if show}} 
```

对于模板中的实际内容，jQuery 可能并不总是绑定。我最终添加了一个

```
{{bindEvents}} 
```

在我的模板末尾，然后：

```
Template.templateName.bindEvents = function(){
$( "#accordion" ).accordion();
} 
```

感觉 hackish 但这样我的 jQuery 可以正常工作，无论实际内容如何加载与模板或文档本身相关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T04:27:26.490

### 流星助手

```
Template.templateName.helpers({
    runJQueryPlugin: function() {
        $('#itemId').dropdown();
    }
} 
```

### 火焰

```
<template name="templateName">
    {{#if currentUser}}
        <div id="itemId">JQuery Dropdown Menu</div>
        {{runJqueryPlugin}}
    {{else}}
        <div>Login Button</div>
    {{/if}}
</template> 
```

这对我有用。

# html - 左右浮动元素的无序列表导航

> ID：10573793
> 
> 赞同：0
> 
> 时间：2012-05-13T17:36:03.027
> 
> 标签：html, css, navigation, html-lists

我在页面顶部有一个带有几个链接的简单导航栏——第一个使用 li:first child 浮动到左侧，最后一个使用 li:last child 浮动到右侧，其余的位于中间页。

从所有意图和目的来看，这是可行的——但尽管每个导航块之间的*空间*是相同的，但中央块实际上位于更靠右的位置。我认为这是因为链接的长度不同——即链接 1 为 23 个字符，链接 2 为 7 个字符。

有没有办法解决这个问题，或者我应该使用另一种方法将中间块定位在页面的绝对中心？

下面是我目前正在使用的代码，可以在这里找到一个 jsfiddle：http: [//jsfiddle.net/pxuVJ/](http://jsfiddle.net/pxuVJ/)

**编辑 19:28 13.05.12** 由于解释起来有点令人困惑，我拍摄了一个说明问题的屏幕截图：http: [//bit.ly/Khd8cN](http://bit.ly/Khd8cN)

非常感谢。

HTML：

```
<nav>
<div id="navigation">
<ul>
    <li><a href="#home">title of site</a></li>
    <li><a href="#link 1">link 1</a></li>
    <li>&#8226;</li>
    <li><a href="#link2">link 2</a></li>
    <li>&#8226;</li>
    <li><a href="#link 3">link3</a></li>
    <li><a href="#contact">contact</a></li>
</ul>
</div>
</nav> 
```

CSS：

```
nav {
font: 10pt Courier;
position: fixed;
top: 0; right: 0; bottom: 0; left: 0;
height: 20px;
padding: 20px;
background-color: #ffffff;
text-transform: uppercase;
z-index: 10;
text-align: center;
}

nav li { display: inline; list-style: none; }
nav li:first-child { float: left; }
nav li:last-child { float: right; }​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:45:39.810

而不是使用

```
dispaly:inline; 
```

您可以使用

```
nav li { float:left; list-style: none; padding : 10px; }
nav li:first-child { margin-right:50px; } nav li:last-child { margin-left:50px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:59:56.337

Shreedhar 是非常正确的，因为不需要使用“float”——尽管与其猜测分配*li:first-child*和*li:last child*绝对位置的边距似乎是一种更好的方法——它似乎也适用于任意数量的链接在中央街区。

```
nav li {
    display: inline;
    list-style: none;
    text-align: center;
}

nav li:first-child {
    position: absolute;
    left: 20px;
    text-align:left;
}

nav li:last-child {
    position: absolute;
    right: 20px;
    text-align: right;
} 
```

# javascript - 用jquery滚动后的动作

> ID：10573796
> 
> 赞同：1
> 
> 时间：2012-05-13T17:36:18.990
> 
> 标签：javascript, jquery, scroll

滚动动作后如何开始计数超时（不是在滚动时，而是在滚动停止时）？滚动**后**如何绑定动作？

$(窗口).scroll(函数(){

```
if ( timer ) clearTimeout(timer);

timer = setTimeout(function(){
    // Make your AJAX request here...
}, 10000); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:38:42.267

### 描述

您可以使用**James Padoley 为 jQuery 提供的出色 jQuery 插件 Special scroll events**。

真的很棒。

查看页面和这个[jsFiddle 演示](http://jsfiddle.net/fbSbT/1/)（只需滚动；））

### 更多信息

*   [jQuery 的特殊滚动事件](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)
*   **[jsFiddle 演示](http://jsfiddle.net/fbSbT/1/)**

# java - 在 Freemarker 中，如何将自定义 NumberFormat 或 DateFormat 用于 1 行（但不是报告的其余部分）？

> ID：10573797
> 
> 赞同：3
> 
> 时间：2012-05-13T17:36:51.717
> 
> 标签：java, freemarker

我想在 freemarker 文件中显示 2 个数字：

*   基准`long id`

*   基准`long timeSpend`

id 应该使用默认`NumberFormat`实例，但 timeSpend 应该使用我的`MillisecondsSpendNumberFormat`实例，所以我在输出中得到如下内容：

*   ID：`1 234 567`

*   花费时间：`1min 23sec 456ms`

如何将我的`NumberFormat`实例用于 1 个`long`实例，但不能用于所有实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:34:29.230

您可以将格式化程序实例提供给 Freemarker 模板（将其添加到包含传递给模板的对象的模型中），然后显式调用其 format() 方法来格式化数字。

就像是

```
timeSpend: ${myCustomFormatter.format(timeSpend)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:01:17.473

您可以`${someNumber?string("somePattern")}`在单个场合使用非默认格式。但你真正的问题是 FreeMarker 总是使用`DecimalFormat`数字格式，你只能指定模式。所以你根本不能使用`MillisecondsSpendNumberFormat`，除非你手动调用它。您可以通过将一个`MillisecondsSpendNumberFormat`实例放入数据模型并从模板中调用它的 Java API 来`TemplateMethodModelEx`做到这一点，或者通过实现一个在内部进行格式化的方法，然后将其拉入一些常用的`#include`-d/ `#import`-d 文件中`<#assign formatTimeSpent = "com.example.MyTimeSpentFormatter"?new()>`，然后使用`${formatTimeSpent(someNumber)}`in模板。

# windows - 为什么显示“更新 Git 索引失败”

> ID：10573815
> 
> 赞同：50
> 
> 时间：2012-05-13T17:40:11.623
> 
> 标签：windows, git, newline, core.autocrlf

我正在使用 Windows。暂存文件时出现此错误。

`Updating the Git index failed. A rescan will be automatically started to resynchronize git-gui.`

后面是已从 LF 转换为 CRLF 的文件列表

在大量阅读有关 Git 跨平台使用的 CRLF / LF 问题之后，我或多或少地了解发生了什么，并且我正在尝试确定哪种 autocrlf 设置最适合我，但我不明白为什么 Git 这么说更新索引失败。我的理解是它已经转换了 EOF，所以有什么问题，为什么它告诉我更新索引失败。我是否需要修复某些东西（除了选择适当的 autocrlf 设置）还是我可以继续

然后我有两个选项继续和解锁索引，这些是什么意思以及最佳行动方案是什么。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-13T19:02:36.480

```
git config --global core.autocrlf false 
```

一直是我的建议（请参阅“ [Windows 上的 Git 1.6.4 beta (msysgit) - Unix 或 DOS 行终止](https://stackoverflow.com/questions/1249932/git-1-6-4-beta-on-windows-msysgit-unix-or-dos-line-termination/1250133#1250133)”）。

但是，在您的情况下，您可以“继续”，但此警告是为了提及某些文件的转换可能不可逆：

```
core.safecrlf 
```

> 如果为真，当行尾转换处于活动状态时，让 git 检查转换 CRLF 是否可逆。Git 将验证命令是否直接或间接修改了工作树中的文件。例如，提交一个文件然后签出同一个文件应该会在工作树中产生原始文件。如果当前设置不是这种情况`core.autocrlf`，git 将拒绝该文件。
> 该变量可以设置为“警告”，在这种情况下，git 只会警告不可逆的转换，但会继续操作。

如果您不想看到此警告，[如此线程](http://comments.gmane.org/gmane.comp.version-control.msysgit/7232)中所述，您可以设置`core.safecrlf`为`false`.

你也可以通过 git gui 的工具菜单来存储你的文件，并为这些工具添加一些选项，例如，这个[git config file](https://github.com/adamfranco/dotfiles/blob/master/.gitconfig)。
有趣的是，对于每个工具，您可以添加：

```
guitool.<name>.norescan 
```

> 工具完成执行后，请勿重新扫描工作目录以进行更改。

* * *

> 你能详细说明一下解锁索引吗

[`index.tcl`您可以在git-gui 脚本](https://github.com/git/git/blob/master/git-gui/lib/index.tcl#L4-L57)中看到该消息：它删除了 git-gui 在操作索引时创建的 index.lock 文件。
您可以在[“lockfile API”文档页面](https://github.com/git/git/blob/master/Documentation/technical/api-lockfile.txt)查看更多信息：

> **互斥**。
> 当我们写出一个新的索引文件时，首先我们创建一个新文件`$GIT_DIR/index.lock`，将新内容写入其中，并将其重命名为最终目的地`$GIT_DIR/index`。
> 我们尝试创建`$GIT_DIR/index.lock`文件，`O_EXCL`以便我们可以在其他人已经尝试更新索引文件时注意到并失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-26T15:41:51.250

即使我的`core.autocrlf`设置已经设置`false`并且`core.safecrlf`未设置，我也遇到了这个问题。我怀疑罪魁祸首是配置设置`diff.astextplain.textconv`。

当我运行`git config --list`时，输出中显示了以下行：

```
diff.astextplain.textconv=astextplain 
```

我认为此设置实际上与警告/错误无关，但它启发了我研究可能正在进行的文本转换。在网上和我的 repo 中进行了一些探索之后，我在 repo 的*.gitattributes*文件中发现了以下行：

```
* text=auto 
```

[我可能从 GitHub 获得了*.gitattributes*文件。]

鉴于只有上面的行没有被注释，而且处理“自动”行结束转换**一直**是一个令人头疼的问题，我选择从我的仓库中删除该文件。这样做之后，暂存相同的文件不再提示我“更新 Git 索引失败”警告/错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-25T09:11:29.360

**TL;DR：**这个警告意味着尽管你签入了一个 UNIX 风格的文本文件，git 可能会返回一个 Windows 风格的文本文件。

UNIX 和 Windows 在文本文件中保存换行符的方式不同。维基百科有一个[不同操作系统上的换行符列表](https://en.wikipedia.org/wiki/Newline#Representation)

如果您在 Windows 上执行以下操作，您收到的警告是可重现的：

*   在空目录中创建一个 git 存储库
*   创建一个代表仓库初始空状态的提交：

    ```
    git commit --allow-empty -m "initial commit" 
    ```

*   使用`git config core.autocrlf`and`git config core.safecrlf`来验证`autocrlf`设置为`true`和`safecrlf`未设置（无输出）。如果不是这种情况，请使用以下命令进行设置

    ```
    git config core.autocrlf true
    git config --unset core.safecrlf 
    ```

*   使用[Notepad++](https://notepad-plus-plus.org)`text.txt`编写一个以 UNIX 格式调用的文本文件。编写一个至少有一个换行符的文件。这是您选择 UNIX 行尾的方式： [![带有菜单编辑的记事本++ - 打开了 EOL 转换](../Images/5684e9d49f2cafcffee87fb6c1d56363.png)](https://i.stack.imgur.com/xDJZ5.png)

*   `git add text.txt`. 您收到警告消息

    > 警告：在 text.txt 中，LF 将被替换为 CRLF。
    > 该文件将在您的工作目录中具有其原始行结尾。

*   提交文本文件：`git commit -m "add file with UNIX ending"

*   现在看看如果从树中检出该文件的样子。首先，在创建文件之前检查版本（返回 1 次提交）。该文件`text.txt`从工作目录中消失：

    ```
    git checkout ~1 
    ```

*   现在，在创建文件后恢复版本

    ```
    git checkout master 
    ```

文件`text.txt`已恢复。但是在 Notepad++ 中打开它并检查 Notepad++ 底部状态行中的行结束格式：

[![恢复的文件现在具有 Windows 样式的 CRLF 结尾](../Images/c3d497a27285bc90d1647f1bc14d9204.png)](https://i.stack.imgur.com/pR7Nx.png)

您签出的文件具有 Windows 样式的行结尾，而您提交的文件具有 UNIX 样式的文件结尾！这就是警告消息的内容：**这些设置意味着您从树中恢复的文件可能`core.autocrlf=true`与`core.safecrlf=<unset>`您签入的文件不同，因为它们可能具有不同的文件结尾。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T16:32:49.200

**更直接的答案：**

Git 告诉您当前工作区文件的行尾与预期不同。听起来您已经阅读过。就个人而言，我认为**最好**的解决方案是在 .gitattributes 文件中定义所需的行尾： *.py text eol=lf *.bat text eol=crlf

**现在对于每个人都拒绝回答的问题：**

Git Gui 中的“解锁索引”有什么作用？它会删除“.git/index.lock”文件，以便您可以在继续之前运行其他 git 命令。Git GUI 将在启动 Git 命令时创建此文件，这样没有其他 git 进程会干扰和破坏您的本地存储库。完成后它会删除 index.lock 。

**底线：** 单击“解锁索引”在这里不会做任何有用的事情，只有在调试 Git Gui 本身时才应该单击它。它很少使用，以至于大多数人甚至不知道它的作用，也不在乎。

# javascript - 在 ASP.NET 中调试 JavaScript

> ID：10573819
> 
> 赞同：13
> 
> 时间：2012-05-13T17:41:01.750
> 
> 标签：javascript, asp.net, debugging

我需要调试用 asp.net 编写的 javascript 函数。

我目前正在使用 chrome，但它不会达到断点。如果我把`alert('Some message')`. 我可以看到显示的消息。

如果有人知道如何在 ASP.NET 中使用 JavaScript 调试器，请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T17:57:43.487

要在 chrome 中调试，您需要做两件事

1.  将调试器写入要开始调试的地方。
2.  在执行脚本之前打开开发者工具（通过按 ctrl + shift + i）

现在，当控制执行到您编写调试器的语句时，将暂停执行以供您调试。

这是一个供您学习的示例，请按照评论中的说明进行操作。[如何在chrome中调试](http://jsfiddle.net/mRL2F/3/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-13T18:08:11.847

尝试使用 Internet Explorer 调试您的代码，您可以这样做，将 debugger 关键字放在您要调试的代码之前。

```
 <script type="text/javascript">
    function s() {
   //enable the debugger feature.
        debugger;
        var alert = "this is a debugger test";
        alert(alert);
    }
   </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:43:59.173

Visual Studio 只能调试附加到 IE 实例的 Javascript。

您应该使用 Chrome 的开发人员工具，其中包括一个 Javascript 调试器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T18:10:21.780

根据我的经验，Visual Studio 无法同时调试托管代码和 JavaScript。

这意味着当您在 Visual Studio 中以调试模式启动 ASP.NET 项目时，它将启动 Web 服务器，附加到它，然后是 IE（或其他浏览器）并附加到它。但是 JS 断点不会被命中。

但是，当您在没有调试的情况下启动项目并手动附加到 IE 时 - 这些断点将被命中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T02:09:38.897

使用萤火虫！太好了！它为您提供比传统调试更多的功能。 [http://getfirebug.com/errors](http://getfirebug.com/errors)

> **状态栏错误指示器**
> 
> 在 Firefox 浏览器状态栏的右侧，您会看到一个绿色的小图标。这是 Firebug 告诉您一切正常的方式。当那个图标变成一个红色的“x”时，事情就没有那么美好了。
> 
> 单击“x”打开 Firebug 错误控制台，它将显示页面上发生的所有错误。
> 
> **没有错误的汤**
> 
> 大多数浏览器通过将它们全部转储到一个大窗口来报告错误，该窗口包括您曾经访问过的每个网页的问题。Firebug 比这更友善。它仅向您显示您正在查看的页面的错误。
> 
> **跳转到调试器**
> 
> 每个错误报告的右侧都有一个链接，指向发生错误的文件和行号。单击此链接将带您直接进入 Firebug JavaScript 调试器或 CSS 检查器，以便您可以立即开始解决问题。
> 
> 一些错误还包括包含错误的实际源代码片段，这也是原始文件的链接。

# php - PHP代码显示不正确[一行] EOL

> ID：10573825
> 
> 赞同：3
> 
> 时间：2012-05-13T17:41:20.807
> 
> 标签：php

当我尝试在我的服务器上上传一个 php 文件时，我收到一条消息：`"Parse error: ..."`我知道这意味着什么，但问题是别的。

如果我在本地服务器上编辑文件（我的计算机上安装了 XAMPP），一切都很好。但是，如果我在线上传相同的文件（在 Godaddy 托管），所有代码都会显示在一行中。我已经通过从服务器下载它然后在记事本++中进行了测试。

例如，我的代码如下所示：

```
<?php
     //my comment 
     echo 'First';
     echo 'Second';
?> 
```

但是显示：

```
<?php //my comment echo 'First'; echo 'Second';?> 
```

所以，现在`//my comment`打破了我所有的代码。

我找不到解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T17:49:45.347

使用编辑器`Notepad++`来编辑您的代码。

有两种可能性。您拥有的 Godaddy 服务器正在运行，`Windows`并且您在基于 Unix 的系统上。反之亦然。

简而言之，`\r\n`UNIX 中使用的中断实际上与`\n`Windows 中使用的中断不兼容。因此，请使用像[Notepad++](http://notepad-plus-plus.org/ "记事本++") 这样的编辑器，它默认情况下会优先保存`\r\n`中断。

**编辑：**

尝试在您正在使用的 FTP 程序中将传输模式从二进制转换为 ASCII。通常FTP软件在传输过程中应该交叉支持主机和客户端上的文本文件。

**编辑 2** [谢谢@Wesley Murch]

用于轻松切换 EOL（行尾）格式：`Edit -> EOL Convertion -> Windows`格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T10:39:08.763

从 Mercurial for VCS 迁移到 Git 后，我​​遇到了类似的问题。如果您使用 Netbeans 作为 IDE，有一个很棒的插件可以提供帮助： http: [//plugins.netbeans.org/plugin/36810/show-and-change-line-endings](http://plugins.netbeans.org/plugin/36810/show-and-change-line-endings)

# javascript - 在 Chrome 中制作动画时隐藏的角落变得可见

> ID：10573828
> 
> 赞同：0
> 
> 时间：2012-05-13T17:41:45.337
> 
> 标签：javascript, jquery, html, css, google-chrome

我有一个`ul`with`border-radius: 10px; overflow:hidden`和 inside 我有多个`li`s。

通常，`ul`角落隐藏了内部内容。但是在 Chrome 中，当使用 jQuery 为`li`s 设置动画（淡化）时，在动画期间，`li`角变得可见。

动画完成后，`li`s 的角将恢复为隐藏状态。

我能做些什么来防止这种情况发生？

这只发生在 Webkit 浏览器中：Chrome 和 Safari。

**HTML：**

```
<ul>
    <li>Text</li>
    <li>Text</li>
    <li>Text</li>
</ul> 
```

**CSS：**

```
ul {
    border-radius: 10px;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:54:08.560

你可以试试这个：

```
// give specific border-radius to first ans last li
$('li:first').css('border-radius', '0 10px 0 0');
$('li:last').css('border-radius', '0 0 10px 0'); 
```

**注意**你也可以使用 CSS

[DEMO 展示了一个示例动画](http://jsfiddle.net/thesystemrestart/6NEGB/4/)

# java - 设置 EditText 内容

> ID：10573831
> 
> 赞同：0
> 
> 时间：2012-05-13T17:42:11.747
> 
> 标签：java, android, android-edittext

我有一个 EditText 字段，它只允许十进制数字。当我按下按钮时，如何在代码中设置它的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:45:35.710

```
yourEdit.setText(String.valueOf(12)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:54:13.800

您有很多方法可以在`EditText`. 假设你有它`@id`是`my_edittext`：

```
final Integer value = 10;
final EditText myEditText = (EditText)findViewById(R.id.my_edittext);
myEditText.setText(value.toString());
myEditText.setText(Integer.toString(value));
myEditText.setText(String.valueOf(value));
// and an ugly one: 
myEditText.setText(value + ""); 
```

# safari - 是否可以以编程方式设置 Safari 扩展白名单？

> ID：10573834
> 
> 赞同：2
> 
> 时间：2012-05-13T17:42:36.900
> 
> 标签：safari, whitelist

我已经成功编写了我的第一个 Safari 扩展程序。它遍历所有输入元素并从 type="text" 元素中删除“自动完成”属性。这会覆盖关闭自动完成功能的**愚蠢网站（例如记住用户名和密码）。**

我将我的扩展程序的白名单（在开发人员工具中）定义为我希望它工作的网站。一个主要的缺点——阻止我公开发布这个扩展——是每次我希望它应用到一个新网站时，我必须将它添加到开发工具的白名单中并重新加载扩展。

有没有办法以编程方式编辑白名单或将其公开给用户（而不仅仅是开发人员）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:44:34.860

事实证明这是不可能的。您需要登录 Apple 开发者论坛才能阅读那里的讨论：

[https://devforums.apple.com/message/660858](https://devforums.apple.com/message/660858)

这导致向Apple提交了RFE。

# objective-c - 如何计算#define中的元素

> ID：10573836
> 
> 赞同：2
> 
> 时间：2012-05-13T17:42:56.460
> 
> 标签：objective-c, cocoa, nsstring, c-preprocessor

如何获取宏定义中的元素数量，如下所示：

```
#define myThings @"A",@"B",@"C",@"D",@"E" 
```

从 myThings 获得答案 5 的方法是什么？

`[myThings count]`不工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:53:44.237

定义是文本的文字替换：它会像代码一样工作吗

```
 [@"A", @"B", @"C" count]; 
```

? 如果答案是否定的，它不会起作用，那么这就是你的问题。你可以做

```
 [[NSArray arrayWithObjects: myThings, nil] count]; 
```

这应该可行，但我根本不建议使用这种“模式”。

**添加**

另一种计算有多少值的方法可能如下：

```
 NSString *arr[] = {myThings};
  size_t cnt = sizeof(arr)/sizeof(NSString *); 
```

这是一种 C 常用的方法来了解 .c 中有多少元素`arr`。再一次，我强调一个事实，`myThings`它*实际上*被你定义的任何东西所取代`#define`，所以结果是一样的

```
 NSString *arr[] = {@"A", @"B", @"C", @"D", @"E"}; 
```

**添加2**

请注意，如果您不使用`arr`“真正”，优化将删除它，并且不会“浪费空间”。

但是，另一种解决方案是计算传递给宏的参数数量，以便将 CountingMacro(myThings) 替换为 5。[这个 SO 答案](https://stackoverflow.com/questions/2308243/macro-returning-the-number-of-arguments-it-is-given-in-c)在这种情况下可能会有所帮助。

# javascript - 更新问题:: querySelector 可能存在 PhantomJS/Javascript 问题

> ID：10573844
> 
> 赞同：2
> 
> 时间：2012-05-13T17:43:31.870
> 
> 标签：javascript, jquery-selectors, anchor, phantomjs

我正在使用 cli 中的 PhantomJS (v1.5) 和 javascript 运行测试。测试在 fedora/centos 上运行。

该测试说明了从 querySelector 返回 html(type) 元素时出现的错误（用户或其他错误）。

测试了两个项目，第一个是输入，第二个是anchor

带有 id=ICType 的输入正常工作，锚返回一个 href/content，它不是我期望的 htmlAnchorType。

我希望能够在返回的 htmlAnchorElement 上执行一种 foo.click() ，然后应该为所选锚点调用 href javascript。但是，如果返回的唯一内容是 href 内容..那么这似乎是一个问题..

上网查了一下，还没有想到我做错了什么。

想法/评论？？？

谢谢

```
running on fedora
 phantomjs  foo.js 
```

## foo.js

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
}

//
var page = require('webpage').create();
var searchUrl = 'https://courses.osu.edu/psc/hcosuct/EMPLOYEE/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL';

page.onConsoleMessage = function(msg) {
    console.log(msg);
};

phantom.loadState = false;

page.onLoadFinished = function(status) { 
    console.log('called with state ' + phantom.loadState);
    if (status !== "success") {
        console.log("Unable to access network");
    } else {
        if (!phantom.loadState) {
            page.evaluate(function() {
                    var aa1;

                    /*
                        we test two items, one is an input, which succeeds, the other is the anchor, 
                    which fails

                        the querySelector should return an element htmlelement(type)..
                        for the ancho, it simply returns the href content... wth!!!
                    */

                    var sub="ICType";
                    var t1 = document.querySelector("[id^='ICType']");

                    console.log(t1);        //<<< this will be htmlelement. which is correct..
                    console.log("after ictype");

                    /*
                        the complete id for the anchor
                        var sub="CLASS_SRCH_WRK2_SSR_PB_SRCH$56$";

                        for testing, use a subset without the $.. doesn't make a difference..
                    */  
                    sub="CLASS_SRCH_WRK2_SSR_PB_SRCH";
                    t1 = document.querySelector("[id^='CLASS_SRCH_WRK2_SSR_PB_SRCH']");

                    console.log(t1);    // <<< this should be htmlelement.. but is the href content.. WHY??????
                    console.log("test complete");

                    /*
                        -- IF the test ever generates the actual/correct htmlelemtent for the anchor
                        --the goal will be to then do a foo.click() to then run/invoke the 
                        --underlying javascript for the anchor/href which is

                            <a class="SSSBUTTON_CONFIRMLINK" 
                        href="javascript:submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_SRCH$56$');" 
                            tabindex="32" id="CLASS_SRCH_WRK2_SSR_PB_SRCH$56$" 
                        name="CLASS_SRCH_WRK2_SSR_PB_SRCH$56$">
                    */

                //window.setTimeout(function () {
                //submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_SRCH$56$');
                //}, 2000);
            });
            phantom.loadState = true;
        } else {
            console.log(page.content);
            phantom.exit();
        }
    }
}

page.open(encodeURI(searchUrl)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:07:03.190

这可能有点晚了，但事实证明锚在 phantom js 中没有 click()

**编辑** 这不是选择器的问题。选择器实际上工作正常 - 它确实返回元素，而不仅仅是 href。对调用 click() 函数没有响应是规范的一部分... [http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-2651361](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-2651361) `<a>`标签不执行调用它们时的默认行为。

我认为选择器混淆是由于在幻象上下文中缺乏对象检查器的可用性，以及 a `console.log(el)`（其中 el 是`<a>`标签元素）实际上*“有用地”*注销 href 的事实 - 给人的错误印象是只有 href 字符串由选择器返回。

因此，虽然不支持直接调用 click() 函数，但您仍然可以触发锚点的默认 onClick 事件处理程序，详情如下 - 这被记录为在其他线程中工作，我自己的项目，并在上面的 tom 代码上进行了测试。

**结束编辑**

还有一些其他关于同一问题的帖子，但关于其他浏览器，例如..[如何使用 JavaScript 模拟点击？](https://stackoverflow.com/questions/2705583/simulate-click-javascript)- 解决方法是创建自己复制和粘贴的事件......

```
var evt = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
t1.dispatchEvent(evt); 
```

# security - 编程中的安全加密

> ID：10573853
> 
> 赞同：0
> 
> 时间：2012-05-13T17:44:41.183
> 
> 标签：security, encryption

对于以下情况，最安全的加密方法是什么：

*   我有一个运行并获取文件、加密并覆盖原始文件的 exe。

我发现我自己的想法有两个问题：

1.  在运行文件的人无法从 exe 中提取加密密钥的情况下，我可以使用哪种语言？
2.  您认为确保没有密钥无法破解文件的最安全加密方法是什么？（可以用这种语言实现）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:31:18.140

像大多数安全问题一样，您的问题归结为[密钥管理](http://en.wikipedia.org/wiki/Key_management)。

除非密钥本身被加密，否则任何密钥都不能安全地嵌入到可执行文件中。但随后可执行文件需要访问*该*加密密钥，依此类推。

安全存储密钥的唯一方法是将其放在只有授权实体可以访问的地方。这归结为选择合适的存储系统，它可能是具有受控访问的数据库或文件系统，也可能在人脑中。

许多密码既安全又容易获得。最常见的一种是[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)，即*高级加密标准*，已被证明具有军事实力。正确的选择取决于您需要的安全级别；您愿意在创建、存储和使用适当的密钥方面投入的计算资源量；以及您的用户愿意等待加密/解密的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:07:28.193

即使嵌入到 bin exe 中，也无法完全保护密钥。为什么不让程序的用户提供 enc/dec 密钥并将密钥保护留给用户呢？仅供参考，大多数现代算法都很好，诀窍是密钥位长度（位越多越好）和密钥保护以确保输出无法被破译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:53:32.600

如果您的问题是加密某些内容并保护机密，因为使用此机密有人可以解密某些文件，请尝试使用一些带有公钥/私钥的算法，例如 RSA。有许多语言的库可以使用 RSA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:56:58.863

如果您不希望任何人能够从可执行文件中提取加密密钥，则需要对密钥本身进行加密，可能使用密码。当然，任何有密码的人都可以得到密钥。没有办法允许某人在不让他们访问他们正在使用的密钥的情况下加密某些东西。

如果您真正想做的是让人们加密文件，而不是让他们解密文件，那么您正在寻找[公钥密码术。](http://en.wikipedia.org/wiki/Public-key_cryptography)

# sql-server-2008 - 更改动态生成的列的数据类型

> ID：10573854
> 
> 赞同：0
> 
> 时间：2012-05-13T17:44:45.210
> 
> 标签：sql-server-2008

我有一个临时表，其中的列是使用数据透视动态生成的。当我使用数据透视函数时，列本身就是 int 数据类型。列的值是 0 或 1。现在我想用“Y”更新 1，用“N”更新 0。但是这样做时我遇到了转换错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:34:21.400

在此查询中，您需要将 int 值转换为 varchar。

```
set @a= 'select  * into ##test2   
from ##test  
PIVOT  (  Count(OtherConditionCode)  
FOR [CodeDescription] IN  ('+@cols+')  )  AS p'; 
```

我不知道你所有的列名，但它应该看起来像这样，假设 col4 是带有 1|0 的列。

```
set @a = '
  select col1, col2, col3,
    case when col4 = 1 then 'Y' else 'N' end as col4
  from ##test
  PIVOT ... 
```

# php - PHPExcel行分组

> ID：10573855
> 
> 赞同：1
> 
> 时间：2012-05-13T17:44:46.367
> 
> 标签：php, phpexcel

我有一个一对多的类似数组。

结构示例：

```
 [
   [
    InvoiceID,
    [
      InvoiceEntry1_label,
      InvoiceEntry2_label
    ],
    [
      InvoiceEntry1_value,
      InvoiceEntry2_value
    ],
    Total
   ],
   [
    InvoiceID,
    [
      InvoiceEntry1_label,
      InvoiceEntry2_label
    ],
    [
      InvoiceEntry1_value,
      InvoiceEntry2_value
    ],
    Total
   ],
   and so on
 ] 
```

如何使用 PHPExcel 对行进行分组，以便在 Excel 中排序后，属于 Invoice 的行会粘在一起？

不要与 Excel 大纲和分组功能混淆，因为这些功能在排序后不会粘在一起。

我已经知道如何使用 PHPExcel。一个简单的示例或文档参考将作为答案。我自己一个也找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:04:45.173

我不完全确定我将如何在 MS Excel 本身中处理这个问题。

我确信可能有一个解决方案。在过去，我使用条件格式“隐藏”了重复的单元格值，例如发票编号，如果 invoiceId 值与前一行的 invoiceId 值匹配，则将前景色/文本颜色设置为背景色......排序时，先前“隐藏”的 invoiceId 值可能会变为“未隐藏”，而之前“未隐藏”的 invoiceId 值可能会变为“隐藏”。这是一个笨拙的解决方案，但我不知道在 MS Excel 本身中做这件事的更好方法，没有数据透视表的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:31:09.830

在 Excel 中，这只能使用这样的数据透视表来完成：

*   包含源数据的工作表，所有行都扩展为“多”部分（例如，将为每一行复制 InvoiceID）；
*   数据透视表
    *   在数据透视字段列表中，所有列都放置在“行标签”部分中，其他 3 个部分（报表过滤器、值、列标签）中没有列；可选地，只有来自“多”部分（一对多关系）的字段可以移动到“值”部分；
    *   右键单击每个字段，字段设置，将“小计”设置为“无”
    *   右键单击每个字段，字段设置，将“布局”设置为“以表格形式显示项目标签”
    *   将“许多”部分中的所有字段按顺序移到最后；

上面的方法在排序和过滤之后启用了行的粘贴，具有非常漂亮的一对多表示（其中许多部分将当前行拆分为子行）。

PHPExcel 根本不支持数据透视表（[“Codeplex：实现数据透视表”](http://phpexcel.codeplex.com/workitem/17?ProjectName=phpexcel)），因此无法使用 PHPExcel 创建、编辑或读取上述 Excel 数据透视表。

# performance - 文本编辑器内部文本存储：最佳块大小？

> ID：10573862
> 
> 赞同：2
> 
> 时间：2012-05-13T17:45:58.467
> 
> 标签：performance, text, data-structures, x86, buffer

显然，在实现通用文本编辑器时（例如，通用我的意思是它不必能够处理大文件（超过 100-200 MB（这仍然很多，更像是“一般情况”的极端示例）），仅将文本存储在一个连续的长缓冲区中是不可行的，因为插入/删除会降低性能。

虽然有很多方法可以解决这个问题，但它们都围绕着这样一个事实，即您必须将文本分成块，所以我的问题是：考虑到今天的计算机能力，最佳的块大小是多少？文本缓冲区的实际大小实际上开始变得太大而无法存储在简单的连续缓冲区中？当代计算机移动大块字节的速度有多快？（为了清楚起见，我们只说不能使用间隙缓冲区，每个块将是一个简单的连续数组。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:05:26.140

在 Eclipse 中，几乎所有的编辑器都是使用`GapTextStore`.

`GapTextStore`JaveDoc 中用于状态的有趣部分：

> 实现间隙管理文本存储。间隙文本存储依赖于对文档的连续更改位于同一位置的假设。间隙的起点始终移动到最后一次更改的位置。
> 
> 性能：除非需要重新分配，否则键入样式的更改会在恒定时间内执行。一般来说，不引起重新分配的变化最多会引起一个长度约为d的arraycopy操作，其中d是与前一次变化的距离。设 a(x) 为长度为 x 的数组复制操作的算法性能，然后这样的更改在 O(a(x)) 中执行，get(int, length) 在 O(a(length)) 中执行，得到(int) 在 O(1) 中。
> 
> 数组需要重新分配的频率由构造函数参数控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:31:13.927

典型的消费系统可以在 DDR3 内存上实现 10 到 30 GB/s 的原始内存吞吐量。那是一种基数。

根据我的经验，我认为可以安全地假设在 Java 中实现每秒大约 100 MB 的内存操作没有问题（C++ 可能可以做到 4-8 倍）。由此看来，如果缓冲区大小为 64kb，您可以每秒进行 2^10 次操作，但仍然可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:33:59.557

您应该阅读[称为“绳索”的数据结构](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)（绳索当然是一种重量级字符串）。最初的[SGI STL 有它们](http://www.sgi.com/tech/stl/Rope.html)以及字符串，虽然它们没有进入 C++ 标准库，但[Gnu 将它们作为扩展](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.3/a00223.html)。

[请注意，“块大小”在实现（注释](http://www.sgi.com/tech/stl/ropeimpl.html)）中不会像这样出现，这更多是关于以一种懒惰的、功能性的方式做事。

# java - 位图工厂给出空位图

> ID：10573865
> 
> 赞同：-1
> 
> 时间：2012-05-13T17:46:12.590
> 
> 标签：java, android, bitmap, inputstream

我不知道为什么方法返回 null 而不是位图。我要做的是读取位图的尺寸并创建一个更小的新尺寸。[在将图像加载到位图对象时，](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)我试图关注这个奇怪的内存不足问题

请帮忙

```
private Bitmap LoadImageFromWebOperations(String url)
    {
          URL myFileUrl =null;          
          try {
               myFileUrl= new URL(url);
          } catch (MalformedURLException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
          }
    try
    {
    /*InputStream is = (InputStream) new URL(url).getContent();
    Drawable d = Drawable.createFromStream(is, "src name");
    bitmap = ((BitmapDrawable)d).getBitmap().copy(Config.ARGB_8888, true);*/

         HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
         conn.setDoInput(true);
         conn.connect();
         InputStream is = conn.getInputStream();
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(is,null,o);

         int IMAGE_MAX_SIZE=960;

         int scale = 1;
         if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
             scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
         }
        o.inJustDecodeBounds = false;
         is.close();
         HttpURLConnection conn2= (HttpURLConnection)myFileUrl.openConnection();
         conn2.setDoInput(true);
         conn2.connect();
         InputStream is2 = conn2.getInputStream();
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inMutable=true; 
         o2.inSampleSize = scale;
         o2.inPreferredConfig=Config.ARGB_8888;
         o2.inTempStorage = new byte[32*1024];

         o2.inJustDecodeBounds = true;
         bitmap = BitmapFactory.decodeStream(is2, null,o2);

         Log.d("nothing>>>>>>>>>>", String.valueOf(o2.outHeight));

   //  bitmap=bitmap1.copy(Bitmap.Config.ARGB_8888, true);
    //bitmap1.recycle();    
    return bitmap;
    }catch (Exception e) {
    System.out.println("Exc="+e);
    return null;
    }
    }`` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:50:49.373

您设置为 true，如果您将此字段设置`inJustDecodeBounds`为，解码器将始终返回`null``true`

# java - 需要有关许可证密钥算法的想法

> ID：10573866
> 
> 赞同：1
> 
> 时间：2012-05-13T17:46:18.440
> 
> 标签：java, security, licensing

我正在尝试向我计划出售的软件添加软件许可（这意味着如果许可正确，则授予对软件的访问权限。否则，中断访问权限）。我没有任何服务器，所以无法连接到它们。我将使用一项付费在线服务来销售我的软件（我也不喜欢使用他们的服务器支持来获得许可，因为我该休息一下了）。所以，我决定使用客户端验证。无论如何，我对如何生成许可证（许可证算法）以及如何验证它（根据许可证算法）感到困惑。我可以按我的方式做，但不喜欢搞砸这个安全问题，所以决定请你的专业知识帮助。请告诉我/给我展示/举例说明如何创建此许可证生成器和验证器。而且，如果您要发布带有算法的示例，如果您认为它很复杂，请善意地解释它。因为只有我才能创造我自己的

除此之外，我还有一个疑问。也就是说，一个软件只有一个许可证密钥可以吗？因此，它可以硬编码到软件中而不会出现任何问题。

请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:53:25.037

使用公钥密码系统。该应用程序只需要包含许可证签署机构的公钥，因此它没有生成新许可证所需的密钥（只有您拥有）。签名的文档可以列出应该启用/禁用的任何可选功能。带有用于签署文件和验证签名的示例代码的教程在这里：[http ://docs.oracle.com/javase/tutorial/security/apisign/index.html](http://docs.oracle.com/javase/tutorial/security/apisign/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:32:17.263

实际上任何保护都可以被破解。问题是黑客需要付出多少努力。

只要密钥可以轻松共享，拥有 1 个硬编码密钥可能是您可以选择的最糟糕的解决方案。密钥应该是 f(system_id)，因此密钥共享将不起作用。

硬编码的密钥验证也不好。黑客只需将这部分代码复制/粘贴到注册机即可。

[更好的解决方案是像http://activation-cloud.com](http://activation-cloud.com)那样检查服务器端的密钥。但目前它只是 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:13:23.097

正如@James Youngman 所说 - PPK 是要走的路。如果您想要使用它的快捷方式，请参阅[TrueLicense](http://truelicense.java.net/)。

至少，看看设计注意事项，看看如果你想自己开始这个，你必须注意什么

# html - Meteor 错误：无法在某行解析 .. um .. 一些 HTML 文件。对不起

> ID：10573867
> 
> 赞同：2
> 
> 时间：2012-05-13T17:46:22.697
> 
> 标签：html, meteor, handlebars.js, skeleton-css-boilerplate

我是车把和 Meteor 的新手，我正在尝试用一个新项目来实现[Skeleton 。](http://www.getskeleton.com)但是，当我将默认 Skeleton 代码放入新的 Meteor 项目时，我收到以下错误：

> 捆绑应用程序时出现异常：
> 
> 错误：无法在某行解析.. um .. 一些 HTML 文件。对不起

我的阅读表明这与车把不是正常的 HTML 和 Doctype 行没有被正确解析有关吗？

究竟是什么导致了这个错误，我该如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:28:10.163

记住`.html`Meteor 中的文件实际上是一种用于定义 Handlebars 样式模板的文件格式，而不是我们习惯于从服务器看到的 HTML 文档，这很有帮助。Meteor 应用程序中不需要完整的 HTML 文档，因为每个 Meteor 客户端通过运行从服务器发送的 JavaScript 在浏览器中构建自己的 DOM。

Meteor 服务器发送给客户端的唯一 HTML 是一个初始的基本文档，它仅引用样式表和带有`<link rel...>`.

因此，这些 Handlebars 文件中允许的唯一三个顶级标签是：

*   `<template>`: 定义 Handlebars 样式模板。模板标签内的 HTML 在客户端编译为 JS 函数。

*   `<head>`：`<head>`项目中每个 HTML 文件中所有标签的内容都被连接起来，并作为文档的初始 HEAD 部分传递给浏览器。

*   `<body>`: 同上，但定义了`<body>`标签的初始内容而不是`<head>`.

`DOCTYPE`例如，这里没有位置。（不幸的是，也没有 HTML 注释的地方，但我们会努力解决这个问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:40:30.000

此外，它可能与您放置代码的*位置一样简单。*如果您将它同时发送到客户端和服务器，您通常会使用服务器不会（也不应该）处理的 javascript/其他代码收到此错误。

确保[将代码分开](http://docs.meteor.com/#structuringyourapp)，以便应该仅在客户端上的内容实际上仅在客户端上。例如，如果您在通用文件夹中有多个 html 文件，服务器将尝试解释它们。

# java - 使用 DefaultHttpClient 下载时出现 java.net.URISyntaxException

> ID：10573868
> 
> 赞同：0
> 
> 时间：2012-05-13T17:46:32.760
> 
> 标签：java, syntax, uri

我编写了一个类，该类通过创建一些并行下载来获取文件。我使用下面的简单代码进行任何下载：

```
DefaultHttpClient conn = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(new URI(M_url));
HttpResponse = conn.execute(httpPost); 
```

在某些文件链接（**M_url**）中，程序还可以，但是当我想下载包含**[ ]** URISyntaxException 之类的字符的链接时。例如，对于链接`http://dl.androidiha.com/games/Dead-Rider-v2.5.2[Androidiha.com].zip`错误如下：

> java.net.URISyntaxException：索引 48 处路径中的非法字符：http://dl.androidiha.com/games/Dead-Rider-v2.5.2[Androidiha.com].zipException in thread“main” java.lang.NullPointerException

解决此问题的编程解决方案是什么？我使用以下代码，但这不能解决我的问题：

`M_url = URLEncoder.encode(M_url, "UTF-8")`

如果此主题与类似主题重复，请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:52:47.513

我相信编码也许是答案。存在关于如何处理 URISyntaxexception 的类似主题。 [如何处理 URISyntaxException](https://stackoverflow.com/questions/749709/how-to-deal-with-the-urisyntaxexception)

我相信你可以用类似的方式解决问题

# design-patterns - MVP 模式。如何减少代码重复？

> ID：10573869
> 
> 赞同：1
> 
> 时间：2012-05-13T17:46:39.297
> 
> 标签：design-patterns, gwt, mvp, gwt-mvp

MVP 模式假设 View 向 Presenter 公开方法。例如在 View 中我们可以这样写：

```
public HasClickhandlers getButton() {
    return myBtn;
} 
```

并从演示者访问此方法，例如

```
view.getButton().addclickhanlder() ... 
```

但是当我以这种风格构建我的应用程序时，我有很多不必要的代码。比如我要创建`TablesView`and `TablesPresenter`（我决定`TablesPresenter`and`TablesView`是最小实体（minimal module），不能再分成更小的presenters和view，也不能更复杂）。然后，当我创建时`TablesView`，我想在这个视图中放入另一个自定义组件 - `MyCustomTable`。并且 Inside `MyCustomTable`put `MyCustomHeader`， inside `MyCustomHeader`put`MyCustomFilter`等等（这个序列可能要长得多）......所以问题是当我想从 Presenter 访问输入的文本（按用户）里面`MyCustomFilter`时，我需要公开方法`MyCustomFilter`：

```
//inside MyCustomFilter
public String getFilterText() {
   return textBox.getText();
} 
```

然后在包含的小部件中`MyCustomFilter`- 即`MyCustomHeader`我需要公开此方法：

```
//inside MyCustomHeader
public String getFilterText() {
  return myCustomFilter.getFilterText();
} 
```

在它之后，`MyCustomTable`我需要在里面公开这个方法：

```
//inside MyCustomTable
public String getFilterText() {
  return myCustomHeader.getFilterText();
} 
```

之后，我需要在 内部（包含）公开`getFilterText()`方法，并且在所有这些操作之后，我的演示者可以访问内部的文本。有时这个序列更长。那么如何解决这个问题呢？可能是我不了解MVP的一些事情吗？`TablesView``MyCustomTable``MyCustomFilter`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:08:16.583

您的视图没有理由不能返回其组件之一的*视图*，但您必须从*组件*化的角度考虑：这会破坏*封装*，然后您的视图会暴露其内部。

另外，请记住，GWT 中 MVP 最重要的好处之一是您可以轻松地模拟您的视图并对您的演示者进行单元测试，而不会出现`GWTTestCase`. 有一些权衡可以使您的代码易于测试/可模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:44:02.170

解决它的一种方法是使用接口。这样，您就可以公开组件的视图，而无需在视图和演示者之间创建紧密耦合。

这些方面的东西：

```
public interface CustomFilter {
   String getFilterText();
   // other methods that might be accessed from your presenter
}

public class MyCustomFilter implements CustomFilter {

    @Override
    public String getFilterText() {
        return textBox.getText();
    }
} 
```

您可以对其他组件执行相同的操作：

自定义标题：

```
public interface CustomHeader {
   CustomFilter getFilter();
   // or String getFilterText()
   // other methods that might be accessed from your presenter
}

public class MyCustomHeader implements CustomHeader {

    @Override
    public CustomFilter getFilter() {
        return myCustomFilter;
    }
} 
```

自定义表：

```
public interface CustomTable {
   CustomHeader getHeader();
   // or Sring getFilterText();
   // other methods that might be accessed from your presenter
}

public class MyCustomTable implements CustomTable {

    @Override
    public CustomHeader getHeader() {
        return myCustomHeader;
    }
} 
```

您可以决定是否只想在每个接口中公开一个字符串或整个客户端组件的接口。如果您公开整个界面，您可能会在演示者中进行这样的调用，从而违反[demeter 定律](http://en.wikipedia.org/wiki/Law_of_Demeter)：

```
getView().getTable().getHeader().getFilter().getFilterText(). 
```

可能更好的解决方案是在您的接口中定义字符串，将层次结构的调用委托给您的`CustomFilter`接口：`getView().getTable().getFilterText();`或`even getView().getFilterText()`.

使用接口的另一个好处是，您可以轻松地模拟它们以对您的演示者进行单元测试，甚至可以单独查看组件，并且您可以轻松地在 UI 组件的不同实现之间创建切换（例如针对智能手机优化的组件等）无需更改演示者中​​的任何内容

# matlab - 在 Matlab 中使用 Delta 规则对点进行训练

> ID：10573870
> 
> 赞同：0
> 
> 时间：2012-05-13T17:46:39.627
> 
> 标签：matlab, neural-network

我通过这段代码创建了两类点

```
clf;
%# random points

N = 1000;

a1=-1; b1=4;
a2=-4; b2=4;

x1 =  a1 + (b1-a1).*rand(N,1);
y1 =  a2 + (b2-a2).*rand(N,1);

x2 =  a1 + (b1-a1).*rand(N,1);
y2 =  a2 + (b2-a2).*rand(N,1);

hold all;

% Plot line y=-3/2*x+3
t = -1:.1:4;
z = -3/2*t+3;
plot(t,z)

n=300;

x1new=zeros(n,1);
y1new=zeros(n,1);
error1=zeros(n,1);
x2new=zeros(n,1);
y2new=zeros(n,1);
error2=zeros(n,1);

p1=rand(N,1); %  make error distribution for class 1

d1=0;
d2=0;
i=1;
 while d1<n  && i<N
   if (3*x1(i)+2*y1(i)<=6)  
       if p1(i) > 0.2
    d1=d1+1; 
    x1new(d1)=x1(i);
    y1new(d1)=y1(i); 
    error1(d1)=0; 
    plot(x1new(d1), y1new(d1),'-bs', 'MarkerFaceColor','b', 'MarkerSize',5)
       else
    d2=d2+1; 
    x2new(d2)=x1(i);
    y2new(d2)=y1(i);   
    error2(d2)=1; 
    plot(x2new(d2), y2new(d2),'-bs', 'MarkerFaceColor','r', 'MarkerSize',5)
       end  
   end
   i=i+1;
p2=rand(N,1); %  make error distribution for class 2
   if (3*x2(i)+2*y2(i)>6)  
       if p2(i) > 0.2
    d2=d2+1; 
    x2new(d2)=x2(i);
    y2new(d2)=y2(i); 
    error2(d2)=0; 
    plot(x2new(d2), y2new(d2),'-bs', 'MarkerFaceColor','r', 'MarkerSize',5)
       else
    d1=d1+1; 
    x1new(d1)=x2(i);
    y1new(d1)=y2(i);   
    error1(d1)=1; 
    plot(x1new(d1), y1new(d1),'-bs', 'MarkerFaceColor','b', 'MarkerSize',5)
       end  
   end
   i=i+1;
 end

 % Export to workplace
 assignin('base', 'Class1', [x1new,y1new,error1]);
 assignin('base', 'Class2', [x2new,y2new,error2]); 
```

这是结果 [http://i.stack.imgur.com/nBK8D.png](http://i.stack.imgur.com/nBK8D.png)

每门课得300分。生成的数据不是线性可分的——每个类别中有 20% 的数据违反了线性可分性。

但是，现在我必须使用 Delta Rule：

1.  使用感知器，使用 Delta Rule (Widrow-Hoff) 对 200 个点进行训练以确定权重和偏差，并对剩余的 100 个点进行分类。

2.  使用 adaline，使用 Delta Rule (Widrow-Hoff) 对 200 个点进行训练以确定权重和偏差，并对剩余的 100 个点进行分类。

*对于每种类型的单位，绘制显示收敛速度的图表（垂直轴的均方误差与水平轴的训练示例数，）

*对于每种类型的单元，绘制显示正确分类示例与训练集中示例数量的比率（百分比）的图表（使用 100 个示例进行学习并对剩余的 200 个进行分类——计算正确分类数据的百分比; 然后使用 125 个样本进行训练并对剩余的 175 个样本进行分类；使用 150 个样本进行训练并对剩余的 150 个样本进行分类；使用 175 个样本进行训练并对剩余的 125 个样本进行分类；使用 200 个样本进行训练并对剩余的 100 个样本进行分类）

你能帮我处理 Matlab 中的 Delta Rule 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:06:09.193

Will Dwinnell 为 DeltaRule 学习做了[这个](http://www.mathworks.com/matlabcentral/fileexchange/26696-deltarule)，并建议输入可能的参数：

```
% B = DeltaRuleBatchTrain(X,Y,LearningRate,MaximumPasses,MinimumWeightChange,B0)
%
% B                    = Discovered coefficients
%
% X                    = Predictors (exemplars in rows, variables in columns)
% Y                    = Target variable (0/1 values)
% LearningRate         = Learning rate                             (try 0.05)
% MinimumWeightChange  = Minimum change in weight norm to continue (try 0.01)
% MaximumPasses        = Maximum number of training passes         (try 50)
% B0                   = Initial guess for coefficients (optional, NaN for none) 
```

他给出了以下示例（我已对其进行了修改以使用您创建的数据：

```
% Generate some random data
X = [Class1; Class2]  %Now 600x3
Y = ones(size(X,1),1);
Y(1:size(Class1,1)) = 0;

% Train single neuron model using delta rule
B = DeltaRule(X,Y,0.05,0.01,50);

% Recall using discovered model
Z = Logistic(B(1) + X * B(2:end));

% Measure resubstitution accuracy
mean(Y == (Z > 0.5)) 
```

# java - 从数组列表中挑选元素

> ID：10573871
> 
> 赞同：-2
> 
> 时间：2012-05-13T17:46:46.300
> 
> 标签：java, arraylist

给一个数组列表说 [3,10,9,11,10,2,9]，我需要编写一些代码来挑选序列 [10,9,11,10]。

必须这样做的方法是从一个元素创建一个区间，然后检查下一个元素是否在该区间内。

外汇：

从元素 3 我们得到区间 3*0,80 和 3*1,20 = [2.4 - 3.6]。现在检查下一个元素 10 是否在该区间内 - 它不是。移动到下一个元素，10。

从 10 我们得到区间 [8 - 12]。我们看到 9、11 和 10 都在那个区间，2 并没有那么停止！

是）我有的：

```
import java.util.ArrayList;
import java.util.List;

public class HelloWorld {

public static void main (String[] args){
    List<Integer> tops = new ArrayList<Integer>();
    tops.add(3);
    tops.add(10);
    tops.add(9);
    tops.add(11);
    tops.add(10);
    tops.add(2);
    tops.add(9);

    List<Integer> newtops = new ArrayList<Integer>();
    for (int i = 1; i < tops.size()-1; i++){
        double minValue = tops.get(i)*0.80;
        double maxValue = tops.get(i)*1.20;
        for (int k = i+1; k < tops.size()-1; k++){
            if (tops.get(i) > minValue && tops.get(i) < maxValue){
                newtops.add(tops.get(i));
            }
            else{
                break;
            }
        }
    }System.out.println(newtops);
}
} 
```

输出：[10、10、10、10、9、9、9、11、11、10]

预期输出：[10、9、11、10]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:30:13.023

我认为这会奏效。未经测试...

```
List<Integer> list = new ArrayList<Integer>();
list.add(3);
list.add(10);
list.add(9);
list.add(11);
list.add(10);
list.add(2);
list.add(9);

List<Integer> result = new ArrayList<Integer>();
double lowerFactor = 0.8d;
double upperFactor = 1.2d;

double lowerLimit = list.get(0) * lowerFactor;
double upperLimit = list.get(0) * upperFactor;
int index = 1;
do
{
     if (lowerLimit <= list.get(index) && list.get(index) <= upperLimit)
     {
         if (result.isEmpty())
         {
             result.add(list.get(index - 1));
         }
         result.add(list.get(index));
     } else if (result.size() > 0)
     {
         break;
     } else
     {
         lowerLimit = lowerFactor * list.get(index);
         upperLimit = upperFactor * list.get(index);
     }
     index++;
} while (index < list.size()); 
```

# cordova - 无法在 phonegap 应用程序中使用 strophe 连接到 openfire

> ID：10573873
> 
> 赞同：1
> 
> 时间：2012-05-13T17:47:01.360
> 
> 标签：cordova, xmpp, openfire, strophe

我正在创建一个 phonegap 应用程序，它尝试使用 strophe 连接到 xmpp 服务器（在我的情况下是 openfire）......但我总是在我的回调函数中获得 Status.CONNFAIL 作为状态。可能是什么原因。我的 index.html 简单代码如下：

```
$("#loginButton").click(function() {
    var username = $('input[name=username]').val();
    var password = $('input[name=password]').val();
    var conn = new Strophe.Connection(Powerchat.openfireConnectionURL);

    conn.connect(username, password, function(status) {
        alert(status);
        if (status === Strophe.Status.CONNECTED) {
            alert(status);
            $(document).trigger('connected');
        } else if (status === Strophe.Status.DISCONNECTED) {
            alert('disconnected 1');
            $(document).trigger('disconnected');
        }
    });
    Powerchat.connection = conn;
}); 
```

在警报中，我总是得到 2，这是在 Status.CONNFAIL 的情况下出现的。我在 res/xml/cordova.xml 中列出了 openfireConnectionURL

# javascript - 使用prototype.slice.call 定义一个动态二维数组

> ID：10573874
> 
> 赞同：0
> 
> 时间：2012-05-13T17:47:08.627
> 
> 标签：javascript

我尝试使用prototype.slice.call 创建一个动态二维数组。数组维度取决于用户插入的值 k。代码如下：

```
var A = new Array(k);

                if (k > 1) {
                    var args = Array.prototype.slice.call(k, 1);
                    for (var n = 0; n < k; n++) {
                        A[n] = new Array.apply(this, args);
                    }
                }

                alert (A); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:14:45.340

`.slice()`是错误的工具。它用于对另一个数组或数组的一部分进行浅克隆。

如果您正在寻找方形结构，您只需使用 2 个嵌套循环来创建外部和内部数组。

```
var k = 10;

var a = [];
for (var i = 0; i < k; i++) {
    a[i] = [];
    for (var j = 0; j < k; j++) {
        a[i][j] = i + ':' + j;
    }
} 
```

[http://jsfiddle.net/zGhnv/](http://jsfiddle.net/zGhnv/)

```
>[["0:0","0:1","0:2","0:3","0:4","0:5","0:6","0:7" ,"0:8","0:9"],
["1:0","1:1","1:2","1:3","1:4","1:5","1:6","1:7"," 1:8","1:9"],
["2:0","2:1","2:2","2:3","2:4","2:5","2:6","2:7"," 2:8","2:9"],
["3:0","3:1","3:2","3:3","3:4","3:5","3:6","3:7"," 3:8","3:9"],
["4:0","4:1","4:2","4:3","4:4","4:5","4:6","4:7"," 4:8","4:9"],
["5:0","5:1","5:2","5:3","5:4","5:5","5:6","5:7"," 5:8","5:9"],
["6:0","6:1","6:2","6:3","6:4","6:5","6:6","6:7"," 6:8","6:9"],
["7:0","7:1","7:2","7:3","7:4","7:5","7:6","7:7"," 7:8","7:9"],
["8:0","8:1","8:2","8:3","8:4","8:5","8:6","8:7"," 8:8","8:9"],
["9:0","9:1","9:2","9:3","9:4","9:5","9:6","9:7"," 9:8","9:9"]]

```

请注意，我真的不需要声明 Array 的初始长度。我可以根据需要将成员添加到每个数组。

如果要预先声明长度，可以将两者都替换`[]`为`new Array(k)`.

# php - &no 总是显示为特殊字符

> ID：10573875
> 
> 赞同：1
> 
> 时间：2012-05-13T17:47:17.890
> 
> 标签：php, html, email, html-email

这可能是我曾经问过的最愚蠢的问题，但我找不到解决方案......

我正在处理电子邮件通知，但我不想编写通知，而是想在我的网站上向用户显示他们的通知列表。

现在在我的电子邮件中，我正在使用：

```
<iframe width=100%; height:100% src='http://www.mysite.com/newsfeed/index.php?email=true&user=".$to_id."&notification_type=messages'/> 
```

但我的电子邮件客户端 (mail.app) 不断将 ¬ification_type 中的**&no**变成特殊字符...

任何不涉及更改 index.php 中的 $_GET 变量的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T17:50:24.907

您还需要在 url 中使用 html 特殊字符：

采用`<a href=".&amp;user=....&amp;notification_type=.." >`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:51:10.093

用这个`&amp;`代替这个`&`

# ruby-on-rails - ActiveAdmin 0.4.3 Rails 3.2.3 升级错误

> ID：10573877
> 
> 赞同：1
> 
> 时间：2012-05-13T17:47:26.180
> 
> 标签：ruby-on-rails, activeadmin

我已经将 ActiveAdmin 从 0.2.2 升级到 0.4.3，并将 Rails 从 3.0.0 升级到 3.2.3。我将“rails generate active_admin:assets”称为 ActiveAdmin 升级过程的一部分。当我尝试访问 ActiveAdmin 根目录 (http://localhost:3000/admin) 时出现以下错误。任何帮助将不胜感激。

在 2012-05-13 10:31:51 -0700 开始 GET "/admin" for 127.0.0.1 由 Admin::DashboardController#index 处理，因为 HTML Geokit 正在使用域：localhost 用户负载 (0.2ms) SELECT `users`.* FROM`users`在哪里`users`。`id`= 1 LIMIT 1 渲染 /home/js/.rvm/gems/ruby-1.9.3-p194/gems/activeadmin-0.4.3/app/views/active_admin/dashboard/index.html.arb (77.3ms) 完成 500 86 毫秒内的内部服务器错误

ActionView::Template::Error (未定义的方法 `destroy_admin_user_session_path' for #): 1: 渲染 view_factory.dashboard_page

完整的跟踪在这里：[http ://pastebin.com/raw.php?i=W4bzay3t](http://pastebin.com/raw.php?i=W4bzay3t)

配置/初始化程序/active_admin.rb：

```
ActiveAdmin.setup do |config|
  config.site_title = "SiteName"
  config.default_namespace = :admin
  config.authentication_method = :admin_user?
  config.current_user_method = :current_user
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:23:44.347

在你的配置块中试试这个：

```
ActiveAdmin.setup do | config | 
...
  config.logout_link_path = :signout_path
...
end 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T07:13:56.540

如果 rake 路由显示这个，这将起作用

注销 /signout(.:format) 会话#destroy

希望这有帮助

ActiveAdmin.setup 做 | 配置 | ... config.logout_link_path = :signout_path ... 结束

# java - 比较 2 个 URL 是否具有相同的原始目标

> ID：10573879
> 
> 赞同：4
> 
> 时间：2012-05-13T17:47:31.807
> 
> 标签：java

我有两个 url 作为 Java 字符串假设“youtube.com”和“goo.gl/ur2l”，我想创建一个函数

```
boolean isSame(String url1, String url2) 
```

它将天气两个 url 返回到最后是否直接指向相同的 url。这将如何在 java 中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:50:52.227

对每个 URL 执行 HTTP 请求并检查 HTTP 代码。如果是重定向 ( `30*`)，请提取`Location`HTTP 标头，这应该是“原始”URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:51:36.617

您需要将字符串转换为 IP 地址，然后进行比较。像这样的东西：

```
 InetAddress address = null;

    byte[] ip = new byte[0];

    try {
    address = InetAddress.getByName("google.com");
    ip = address.getAddress();
    } catch (UnknownHostException e) {
    e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:53:01.483

[我只是将http://www.youtube.com](http://www.youtube.com) URL缩短为[http://bit.ly/9b2Y3D](http://bit.ly/9b2Y3D)。[现在，当我使用curl](/questions/tagged/curl "显示标记为“卷曲”的问题")访问后者时，我得到：

```
$ curl http://bit.ly/9b2Y3D
[...]
> GET /9b2Y3D HTTP/1.1
[...]
< HTTP/1.1 301 Moved
[...]
< Location: http://youtube.com/ 
```

您会看到，缩短的 URL 返回 302 而不是 200 OK。标题也`Location`很有趣。我想你现在有很多信息可供初学者使用。尝试 HttpClient 并提取状态代码和`Location`. 然后看看[`URL`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)类，特别是它是如何实现[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#equals%28java.lang.Object%29)的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T17:55:46.920

您需要遵循 302 重定向，直到找到大约 200 个 http 代码。请进行配置以避免遵循无限重定向:)

# magento - 了解 Magento 的 unsetChild 方法

> ID：10573881
> 
> 赞同：1
> 
> 时间：2012-05-13T17:48:04.510
> 
> 标签：magento

我想了解 Magento 块，因此我阅读了 Mage_Core_Block_Abstract 的 Magento 1.5 代码。

insert($block,,,$alias) 方法首先调用 setChild($alias,$block) 方法，该方法构建一个 _children 数组（value=$block, key=$alias），然后构建一个 _sortedChildren 数组（值 = $ 名称，键 = 数字）。

我无法理解的是 unsetChild($alias) 方法，在取消设置 _children[$alias] 项目后......试图通过 array_search($alias,_sortedChildren) 找到相应的 _sortedChildren 项目......好吧，_sortedChildren 的值是块名称，不是别名！

unsetChild 是否与别名不等于其名称的孩子一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:20:49.007

`unsetChild`创建用于将现有块从一个地方移动到另一个地方。您可以从默认位置取消设置块，并在其他位置插入具有相同名称的块（您不能使用`remove`方法执行此操作，因为它会完全删除块）。

# android - Android嵌套自定义ListView

> ID：10573884
> 
> 赞同：1
> 
> 时间：2012-05-13T17:48:09.280
> 
> 标签：android, android-layout, android-listview

我有 2 个自定义 ListView 创建为项目布局 + ArrayAdapter + 我自己的 ListView 类。然后我在我的主要布局中使用这个 ListView ：

```
<MyListViewFirst
        android:id="@+id/MyListView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

此 MyListViewFirst 包含带有一个文本字段（右侧）和另一个 ListView - MyListViewSecond 的 Layout1：

```
<MyListViewSecond
        android:id="@+id/MyListView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="18" /> 
```

当我看到 Layout1 时，我的 TextView 和 MyListViewSecond 都适合页面，而不取决于 MyListViewSecond 包含多少行。

但是，当我查看每个 MyListViewFirst 元素的主布局时，TextView 确实适合该项目，但 MyListViewSecond 不适合 - 它只显示几个元素。

看起来它与 TextView 高度对齐，我需要最大高度 - MyListViewSecond 和所有内部项目高度。

那么如何才能显示内部 ListView 中的所有项目呢？

例子： ![在此处输入图像描述](../Images/9f8293ee1a63c38d44405f158f0f1923.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:05:04.003

你真的不应该把 a`ListView`放在 another 里面`ListView`。它会给你带来糟糕的性能，而且对用户来说也不是一个好的解决方案——他们会发现它很难使用。我建议您重新考虑您的设计并以不使用嵌套的更好方式实现它`ListViews`。

这不是您问题的答案，但我认为没有人会从实际答案中受益，因为您的设计实现效率非常低，难以使用并且违反 Android 设计指南。

也许您应该考虑查看[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，看看您是否可以以某种方式更改您的设计以使用它。

# facebook - 更新 Open Graph 项目

> ID：10573887
> 
> 赞同：2
> 
> 时间：2012-05-13T17:48:17.267
> 
> 标签：facebook, facebook-graph-api

我正在制作一个网站，用户可以建立他们的电视观看列表。他们可以保存他们观看了多少集节目。

由于某些节目可能有超过 200 集，因此每集推送一个事件并不可行，因此我只使用一个事件进行节目。

用户更新数据后如何更新剧集计数？

（用户不能多次观看同一个节目，所以一个节目只能有一个打开图表事件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:35:44.837

据我所知，您有两种可能性：

1.  如果要实时更新打开的图表项，则必须每集调用一个事件。
2.  如果您以后更新没问题，您可以使用 cookie 或会话变量来保存每个节目的剧集计数，并且您可以在间隔时间内将计数推送到打开图形事件。但是您必须确保如果用户突然关闭浏览器，您的计数器不会丢失（您可以使用`window.onunload`或类似的 jquery 替代方案）。

# android - 如何在我的 android 应用程序中添加音频消息？

> ID：10573890
> 
> 赞同：1
> 
> 时间：2012-05-13T17:48:31.590
> 
> 标签：android, audio, android-activity

我想在我的 android 应用程序打开时提供音频消息，就像“欢迎我们的系统”一样，但我不能。

**代码：**

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            String text="Welcome to our location based system";
            if (text!=null && text.length()>0)              
            {
                Toast.makeText(SimpleAudioTestActivity.this, "Saying: " + text, Toast.LENGTH_LONG).show();
                tts.speak(text, TextToSpeech.QUEUE_ADD, null);
            }                       

    Intent checkintent=new Intent();
    checkintent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkintent, MY_DATA_CHECK_CODE);
} 
```

当我单击按钮后执行此操作时，就可以了：

```
public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        but1=(Button) findViewById(R.id.button1);
        but1.setonclickListener(new View.onclickListener() 
        {

            @Override
            public void onclick(View arg0) 
            {
                String text="Welcome to our location based system";
                if (text!=null && text.length()>0)              
                {
                    Toast.makeText(SimpleAudioTestActivity.this, "Saying: " + text, Toast.LENGTH_LONG).show();
                    tts.speak(text, TextToSpeech.QUEUE_ADD, null);
                }                       
            }
        });           

        Intent checkintent=new Intent();
        checkintent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkintent, MY_DATA_CHECK_CODE);
    } 
```

我怎样才能做到这一点？请有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:13:58.590

这是你要找的吗？此代码将使用 texttospeech 说出字符串“text”中的任何内容。把它放在你的 onCreate 中。

```
TextToSpeech speak;

speak = new TextToSpeech(TextTalk.this,
            new TextToSpeech.OnInitListener() {

                @Override
                public void onInit(int status) {
                    if (status != TextToSpeech.ERROR) {
                        speak.setLanguage(Locale.US);
                    }
                }
            });

speak.speak(text, TextToSpeech.QUEUE_FLUSH, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:55:43.633

您可以将音频文件（例如 mp3 文件）放在`res/raw`文件夹中，然后创建`MediaPlayer`并播放该文件

# c# - VisualTransition 的 GeneratedDuration 属性如何工作？

> ID：10573893
> 
> 赞同：3
> 
> 时间：2012-05-13T17:48:51.327
> 
> 标签：c#, wpf, templates, xaml, custom-controls

我开始学习 WPF 几天。现在我正在制作动画`Button`，当它使用`VisualStateManager`.

创建我的`Button`并应用`ControlTemplate`到它

```
<Button Content="This is a Button" Height="100" HorizontalAlignment="Center" 
    VerticalAlignment="Center" Width="200" 
    Template="{DynamicResource ButtonControlTemplate}" 
    FontFamily="Trebuchet MS" FontSize="24" Foreground="White"/> 
```

这里是`ControlTemplate`

```
<ControlTemplate x:Key="ButtonControlTemplate" TargetType="{x:Type Button}">
    <Grid x:Name="ElementRoot">
        <Border x:Name="border" BorderThickness="1" Width="Auto" CornerRadius="3">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFF8FFF6" Offset="0"/>
                    <GradientStop Color="#FF67ED38" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.BorderBrush>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FF52A370" Offset="0"/>
                    <GradientStop Color="#FF054E21" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <ContentPresenter 
                HorizontalAlignment="{TemplateBinding   HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
        </Border>
    </Grid>
</ControlTemplate> 
```

这是`VisualStateManager`改变外观的`Button`

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualStateGroup.Transitions>
            <VisualTransition From="MouseOver" GeneratedDuration="0:0:1" To="Pressed">
                <Storyboard x:Name="MouseOverToPressedStoryboard">
                    <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="border">
                        <EasingThicknessKeyFrame KeyTime="0:0:1" Value="20,10"/>
                    </ThicknessAnimationUsingKeyFrames>
                </Storyboard>
            </VisualTransition>
        </VisualStateGroup.Transitions>
        <VisualState x:Name="Normal"/>
        <VisualState x:Name="MouseOver"/>
        <VisualState x:Name="Pressed">
            <Storyboard x:Name="pressedStoryboard">
                <ColorAnimation Duration="0" Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[1].(GradientStop.Color)" Storyboard.TargetName="border" To="#FF3DA917" />
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Disabled"/>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

我已经阅读了`GeneratedDuration`MSDN 中的属性详细信息（这里是[链接](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.VISUALTRANSITION.GENERATEDDURATION%29;k%28VS.XAMLEDITOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)），如果我理解正确，`GeneratedDuration`是控件（我的`Button`）从一种状态转换到另一种状态所需的时间。在我的情况是从`MouseOver`到`Pressed`。这样，它必须等待一秒钟才能进入`Pressed`状态。Pressed 状态改变了 Button 的背景颜色。当您将鼠标指向按钮（尚未单击）然后单击它时，一秒钟后，它的外观`Button`应该开始改变。但是当你点击它时它会立即改变。

我在哪里误解了什么？希望有人可以提供帮助。先感谢您。

# linux - OSX/Linux，减慢终端的输出

> ID：10573906
> 
> 赞同：0
> 
> 时间：2012-05-13T17:51:11.647
> 
> 标签：linux, macos, terminal

我正在打印一个长文本文件，该文件在我的屏幕上滚动得非常快，有没有办法减慢滚动速度？换句话说，是否有一个系统设置可以控制输出显示到屏幕的速度（OSX/Linux）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:01:40.420

简单的回答：没有。

扩展版：还有其他解决方案。您可以从以下选项之一中进行选择：

*   使用管道。使用管道允许您重定向终端输出并以您自己的速度查看它。适当的符号是`|`。将输出重定向到`less`ore等程序`more`。两者都允许您通过按回车滚动输出，您可以随时按退出`q`。例如，为了处理长目录列表，您可以使用

    ```
    ls | more 
    ```

*   将您的输出重定向到一个文件中。如果您的输出缓存在文件中，它是持久的，并允许您使用您选择的编辑器打开它以查看（和编辑）它。符号是`>`。

    ```
    touch log.txt # create the file
    ls > log.txt
    nano log.txt # use nano text editor to view 
    ```

*   `script`允许您记录整个终端会话。这对于您的用例来说可能有点过头了，但它确实很有用。从手册页：

    > script 为您终端上打印的所有内容制作打字稿。它对于需要交互式会话的硬拷贝记录作为作业证明的学生很有用，因为打字稿文件可以稍后使用 lpr(1) 打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:56:48.480

用于[`less`](http://linux.about.com/library/cmd/blcmdl1_less.htm)翻阅文件；可以来回翻页、搜索等。

`xterm`对滚动速度的控制有限；`less`大多数其他终端仿真器都没有，因为当您可以使用诸如过滤输出之类的程序时，这是单步执行文件的错误方法。

# c++ - 如何使用表单使 QTabWidget 可扩展

> ID：10573912
> 
> 赞同：1
> 
> 时间：2012-05-13T17:52:14.900
> 
> 标签：c++, qt, user-interface, qtabwidget

在 QT Designer 中，我有一个添加了 QTabWidget 的表单。

但是在预览期间，当我展开表单时，选项卡保持不变。如何使选项卡展开。

这是 QT 设计器的限制吗？当我实际运行它时，选项卡会展开吗？

我已将大小策略设置为 x、y 的可扩展。为了得到这个，我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:00:53.410

您应该将布局添加到小部件。只有当一个小部件有布局时，它的内容才会在小部件调整大小时自动移动和调整大小。

为此，您需要在 Designer 中右键单击主小部件并选择“添加布局 -> 网格布局”（例如）。

# python - Python，转置列表并写入 CSV 文件

> ID：10573915
> 
> 赞同：16
> 
> 时间：2012-05-13T17:52:30.267
> 
> 标签：python, list, csv

我需要使用 python 写入一个 csv 文件，并且每个迭代器项都应该在一个新行中开始。所以我使用的分隔符是“\n”。写入每个列表后，下一个列表应从下一个单元格开始写入。如下所示：

```
 lol = [[1,2,3],[4,5,6]] 
```

csv 将类似于：

```
1 4
2 5
3 6 
```

我试过的：

```
file = open("test.csv", "wb")
fileWriter = csv.writer(file , delimiter='\n',quotechar='|', quoting=csv.QUOTE_MINIMAL)
spamWriter.writerow([1,2,3])
spamWriter = csv.writer(file , delimiter=',',quotechar='|', quoting=csv.QUOTE_MINIMAL)
spamWriter.writerow([4,5,6])
file.close() 
```

结果如下：

```
 1
 2
 3
 4 5 6 
```

使用 csv 模块如何获得如下输出：

```
 1 4 
 2 5
 3 6 
```

这里的空格表示 csv 文件中的逗号。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T18:32:44.473

不使用 zip，您可以这样做：

```
import csv

lol = [[1,2,3],[4,5,6],[7,8,9]]
item_length = len(lol[0])

with open('test.csv', 'wb') as test_file:
  file_writer = csv.writer(test_file)
  for i in range(item_length):
    file_writer.writerow([x[i] for x in lol]) 
```

这将输出到 test.csv：

```
1,4,7
2,5,8
3,6,9 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-13T17:55:34.393

首先通过使用转置您的输入`zip()`

```
>>> zip(*lol)
[(1, 4), (2, 5), (3, 6)] 
```

然后将其传递给`csw.writer`例如

```
with open("test.csv", "wb") as f:
    fileWriter = csv.writer(f, delimiter=',',quotechar='|', quoting=csv.QUOTE_MINIMAL)
    for row in zip(*lol):
        fileWriter.writerow(row) 
```

...这导致：

```
$ cat test.csv 
1,4
2,5
3,6 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-22T12:50:00.727

如果您使用的是 Python3，您需要以文本格式“wt”打开文件，此外`csv`还有`writerows`可用于一次编写所有内容的文件。这是一个例子：

```
data=[("test", "value1", "value2"), ("test2", "value3", "value4")]
with open('my.csv','wt') as out:
   csv_out=csv.writer(out)
   csv_out.writerows(data) 
```

我刚刚注意到问题询问如何转换列表，这是一个单独的步骤，这是我将如何做到的：

```
lol = [[1,2,3],[4,5,6]]
data = zip(lol[0],lol[1]) 
```

# php - MySQL 错误：无法跳转到 MySQL 结果索引 8 上的第 0 行

> ID：10573918
> 
> 赞同：1
> 
> 时间：2012-05-13T17:52:55.300
> 
> 标签：php, mysql

我有以下代码：

```
if ($user) {
        $highscore = mysql_result(mysql_query("SELECT Score FROM HighScore WHERE fbID = $user"),0);
        if (empty($highscore)) { //if no result
            echo '<div id="uhs">0</div>';
        } else { 
            echo '<div id="uhs">'. $highscore .'</div>';
        }
    } else {
        echo '<div id="uhs">0</div>';
    } 
```

当我从 db 没有得到任何结果时（因为没有`Score`），它应该回显：`echo '<div id="uhs">0</div>';`但它没有。相反，我得到了错误：`MySQL error: Unable to jump to row 0 on MySQL result index 8`。我认为 using:`if (empty($highscore))`在没有结果时应该照顾它。

我在做什么错以及如何解决它，当数据库中有分数时它工作正常

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:55:43.430

要检查空 sql 结果，请尝试

```
if(mysql_num_rows($result) > 0) { ... } 
```

即使没有返回结果，$highscore 仍将填充为空结果集。因此，“empty($highscore)”将无法按照您的意愿工作。

编辑：为了将来使用，请改用[mysqli_num_rows](http://php.net/manual/en/mysqli-result.num-rows.php)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:57:36.877

该函数`mysql_num_rows()`用于检查是否`mysql_query`返回任何结果。

```
$highscore = mysql_query("SELECT Score FROM HighScore WHERE fbID = $user");
if (mysql_num_rows($highscore) == 0) { 
    // No result
} else {
    // Show result
} 
```

# xcode - 工作地点反过来

> ID：10573921
> 
> 赞同：0
> 
> 时间：2012-05-13T17:53:03.507
> 
> 标签：xcode, mapkit, core-location

我想输入一个 long/lat 并更新 MapView 以显示我输入的位置。

她有很多关于如何使用 MapKit 和 CoreLocation 来显示您当前所在位置的优秀示例，但无法找到任何相反的方法。

有谁知道任何允许您输入 long/lat 然后显示答案的示例。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:54:38.787

这是一个简单的答案，所以也许这就是您没有找到它的原因。您需要做的是根据纬度和经度坐标为您的 MapView 提供一个区域。

它看起来像这样：

```
- (void)centerMapOnLocation:(id)sender{
    CLLocationCoordinate2D center;
    center.latitude = ......; // conversion and origin of data left to the reader
    center.longitude = .......; // conversion and origin of data left to the reader
    //Span of the région we want to display
    MKCoordinateSpan span;
    span.latitudeDelta = 0.1f;
    span.longitudeDelta = 0.1f;
    //Region you actually want to display
    MKCoordinateRegion aRegion;
    aRegion.center = center;
    aRegion.span = span;

    //Everything 's ready, let's move the map to the right place
    [mapView setRegion:aRegion animated:YES];
} 
```

# sql - SQL 标准对反引号（`）的使用有何规定？

> ID：10573922
> 
> 赞同：48
> 
> 时间：2012-05-13T17:53:10.797
> 
> 标签：sql, sqlite, standards

有一次我花了几个小时调试一个简单的 SQL 查询，使用`mysql_query()`in`PHP/MySQL`才意识到我错过了表名周围的提示。从那时起，我一直在表名周围使用它。

但是当我在 中使用相同`SQLite/C++`的符号时，甚至无法识别该符号。令人困惑，是否使用它？标准对它的使用有什么看法？

此外，如果有人能告诉我什么时候使用引号，什么时候不使用引号，那将会很有帮助。我的意思是围绕值和字段名称。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-13T18:07:37.887

SQL 标准（当前版本是 ISO/IEC 9075:2011，分多个部分）没有说明“反引号”或“反引号”符号（Unicode U+0060 或 GRAVE ACCENT）；它不会将其识别为可以出现在 SQL 中的具有特殊含义的字符。

引用标识符的标准 SQL 机制是用双引号括起来的分隔标识符：

```
SELECT "select" FROM "from" WHERE "where" = "group by"; 
```

在 MySQL 中，可能会这样写：

```
SELECT `select` FROM `from` WHERE `where` = `group by`; 
```

在 MS SQL Server 中，可能会这样写：

```
SELECT [select] FROM [from] WHERE [where] = [group by]; 
```

SQL 标准表示法的问题在于 C 程序员习惯于用双引号将字符串括起来，因此大多数 DBMS 使用双引号来替代标准识别的单引号。但是，当您想要包含标识符时，这会给您带来问题。

微软采取了一种方法；MySQL拿了另一个；Informix 允许单引号和双引号可互换使用，但是如果您想要分隔标识符，则设置一个环境变量，然后您必须遵循标准（字符串使用单引号，标识符使用双引号）；DB2 只遵循标准，AFAIK；SQLite 似乎遵循标准；甲骨文似乎也遵循标准；Sybase 似乎允许双引号（标准）或方括号（与 MS SQL Server 一样——这意味着 SQL Server 也可能允许双引号）。此[页面](http://www.ispirer.com/wiki/sqlways/sybase/identifiers)（链接 AWOL 自 2013 年以来 - 现在可在[The Wayback Machine](https://web.archive.org/web/20150531201149/http://wiki.ispirer.com/sqlways/sybase/identifiers)中找到）~~文档~~记录了所有这些服务器（并有助于填补我的知识空白）并注意分隔标识符中的字符串是否区分大小写。

* * *

至于何时在标识符周围使用引用机制，我的态度是“从不”。好吧，不是完全没有，而是只有在绝对被迫这样做的时候。

请注意，分隔标识符区分大小写；也就是说，`"from"`并`"FROM"`引用不同的列（在大多数 DBMS 中——参见上面的 URL）。大多数 SQL 不区分大小写；知道使用哪种情况很麻烦。（SQL 标准面向大型机——它希望将名称转换为大写；不过，大多数 DBMS 将名称转换为小写。）

通常，您必须将作为关键字的标识符与您正在使用的 SQL 版本分隔开。[这意味着Standard SQL](http://www.savage.net.au/SQL/)中的大多数关键字，以及您正在使用的特定实现中的任何附加内容。

一个持续的麻烦来源是当您升级服务器时，在版本 N 中不是关键字的列名在版本 N+1 中变成了关键字。升级前运行的现有 SQL 升级后停止运行。然后，至少作为短期措施，您可能会被迫引用该名称。但在事件的一般过程中，您应该避免需要引用标识符。

当然，我的态度因 Informix（这是我主要使用的）逐字接受此 SQL 的事实而受到影响，而大多数 DBMS 会对此感到窒息：

```
CREATE TABLE TABLE
(
    DATE    INTEGER NOT NULL,
    NULL    FLOAT   NOT NULL,
    FLOAT   INTEGER NOT NULL,
    NOT     DATE    NOT NULL,
    INTEGER FLOAT   NOT NULL
); 
```

当然，为了演示目的而制作如此荒谬的桌子的人应该被绞死，画出来，分成四等份，然后应该留下残渣来修复他们制造的烂摊子。但是，在客户通常设法达到的某些限制范围内，关键字可以在许多情况下用作标识符。这本身就是一种有用的面向未来的形式。如果某个词成为关键字，则现有代码将继续工作而不受更改影响的可能性不大。但是，机制并不完善；您无法创建包含名为 PRIMARY 的列的表，但您可以更改表以添加这样的列。异能是有原因的，但很难解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-01T23:49:33.010

# 尾随下划线

你说：

> 如果有人能告诉我什么时候用引号，什么时候不用引号，那会很有帮助

几年前，我调查了几个关系数据库产品，寻找命令、关键字和保留字。令人震惊的是，我发现**了一千多个**不同的单词。

他们中的许多人作为“数据库词”出人意料地违反直觉。所以我担心在命名我的表、列等时没有简单的方法来避免与保留字的无意冲突。

然后我在互联网上的某个地方找到了这个提示：

> *在所有 SQL 命名中*使用尾随下划线。**

 *事实证明，SQL 规范明确承诺绝不在任何与 SQL 相关的名称中使用尾随[下划线。](https://en.wikipedia.org/wiki/Underscore)

由于受版权保护，我不能直接引用 SQL 规范。但是`5.2.11 <token> and <separator>`来自 ISO/IEC 9075:1992 的假定草案的部分*，数据库语言 SQL* ( [SQL-92](https://en.wikipedia.org/wiki/SQL-92) ) 说（用我自己的重新措辞）：

> 在 SQL 规范的当前和未来版本中，*没有关键字以下划线结尾*

➥ 虽然奇怪地在没有讨论的情况下被放入 SQL 规范中，但对我来说，这个简单的语句尖叫着“用尾随下划线命名你的东西以避免所有命名冲突”。

代替：

*   `person`
*   `name`
*   `address`

…利用：

*   `person_`
*   `name_`
*   `address_`

* * *

自从采用这种做法后，我发现了一个很好的副作用。在我们的应用程序中，我们通常具有与数据库对象（表、列等）同名的类和变量。因此，在引用数据库对象与引用应用程序状态（类、变量）时，会出现固有的歧义。现在上下文很清楚了：当在名称上看到尾随下划线时，数据库被明确指出。无下划线表示应用程序编程（Java 等）。

* * *

有关 SQL 命名的进一步提示：为了获得最大的可移植性，请*在 words 之间使用全小写和下划线*，以及尾随下划线。虽然 SQL 规范*要求*（不建议）实现以全大写形式存储标识符，同时接受其他大小写，但大多数/所有产品都忽略了这一要求。因此，经过大量阅读和实验，我了解到带有下划线的全小写字母将是最便携的。

如果在单词之间使用全小写、下划线和尾随下划线，您可能永远不需要关心用单引号、双引号、反引号或括号括起来。*

# ruby-on-rails - minitest、test::unit 和 rails

> ID：10573923
> 
> 赞同：30
> 
> 时间：2012-05-13T17:53:16.573
> 
> 标签：ruby-on-rails, ruby, testunit, minitest

我在某处读到“minitest”是“ruby 1.9.2+ 的新测试::unit”。

但是 ruby​​ 1.9.3 似乎同时包含*test* [::unit](http://ruby-doc.org/stdlib-1.9.3/libdoc/test/unit/rdoc/Test/Unit.html) *和* [minitest](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest.html)，这是真的吗？

在默认的 Rails 测试中，如[Rails 测试指南](http://guides.rubyonrails.org/testing.html)中所述......诸如`ActiveSupport::TestCase`,之类的东西`ActionController::TestCase`是使用`Test::Unit`or`Minitest`吗？

在 rails 指南中，它显示了具有如下定义的测试的示例：

```
test "should show post" do
  get :show, :id => @post.id
  assert_response :success
end 
```

`test string`与使用类似 -- 的名称定义方法相反，该语法在 Minitest*或*Minitest`test_something`的文档中均未提及。那是从哪里来的？Rails 是否添加了它，或者它实际上是......任何测试 lib rails 正在使用的一部分？ *`Test::Unit`*

 *PS：请不要告诉我“只使用 rspec”。我知道rspec。我正在尝试在 rails 的上下文中探索 stdlib 的替代方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-13T18:34:03.490

There is a `Test::Unit` "compatibility" module that comes with Minitest, so that you can (presumably) use your existing Test::Unit tests as-is. This is probably the `Test::Unit` module you are seeing.

As of rails 3.2.3, generator-created tests include `rails/test_help` which includes `test/unit`.

The `test "something" do` syntax is a rails extension. It's [defined](https://api.rubyonrails.org/classes/ActiveSupport/Testing/Declarative.html) in `ActiveSupport::Testing::Declarative`, which is `require`'d by `rails/test_help`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T17:03:53.760

这可能是一个切线的回应，但至于您的 rspec 评论...您可能想看看`minitest/spec`在 1.9.x 中的 stdlib 中提供了规范风格的语法。

[http://bfts.rubyforge.org/minitest/MiniTest/Spec.html](http://bfts.rubyforge.org/minitest/MiniTest/Spec.html)*

# android - 如何获取我的应用程序的主要活动类或类名？

> ID：10573930
> 
> 赞同：11
> 
> 时间：2012-05-13T17:53:54.180
> 
> 标签：android

如何获取我的应用程序的主要活动类或类名？

非常感谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-17T11:40:51.853

感谢 Lee 解释如何获取类名，代码如下：

```
String packageName = context.getPackageName();
Intent launchIntent = context.getPackageManager().getLaunchIntentForPackage(packageName);
String className = launchIntent.getComponent().getClassName(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-13T20:24:16.270

要获取您的启动器活动，请使用[http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage(java.lang.String](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage(java.lang.String) )

```
getLaunchIntentForPackage 
```

在此 Intent 调用`getComponentName`和返回的 CompomemtName 调用中`getClassName`

[http://developer.android.com/reference/android/content/ComponentName.html](http://developer.android.com/reference/android/content/ComponentName.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-09T06:57:07.567

这在 Kotlin 中非常适合我：

```
callingActivity::class.simpleName 
```

或在 Java 中：

```
activity.getClass().getSimpleName() 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-10T21:57:12.337

我只是在我的主要活动中设置了一个变量，就像这样......`public static Activity activity = this;`然后我可以从任何地方使用它来引用它：`MainActivity.activity`。

您也可以在 onCreate() 方法中设置它，只需像这样在主活动类的顶部设置变量，`public static Activity activity;`然后在 onCreate() 方法中添加`activity = this;`任何位置。

这适用于任何扩展 Activity 的类，例如，`public class MainActivity extends Activity`您可以从任何类调用该变量，即使它们不扩展 Activity。

希望这可以帮助。

# java - Android服务android.os.BinderProxy错误

> ID：10573931
> 
> 赞同：10
> 
> 时间：2012-05-13T17:54:06.007
> 
> 标签：java, android, service

我一直在尝试让这个 android 服务正常工作，但我不知道为什么会出现这个错误。

```
05-13 12:13:36.203: ERROR/dalvikvm(7782): could not disable core file generation for   pid 7782: Operation not permitted
05-13 12:13:36.469: ERROR/AndroidRuntime(7782): FATAL EXCEPTION: main
05-13 12:13:36.469: ERROR/AndroidRuntime(7782): java.lang.ClassCastException: android.os.BinderProxy
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at whiskeymedia.com.GiantBombAppActivity$1.onServiceConnected(GiantBombAppActivity.java:69)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1064)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1081)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.os.Handler.handleCallback(Handler.java:587)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.os.Looper.loop(Looper.java:130)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at android.app.ActivityThread.main(ActivityThread.java:3806)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at java.lang.reflect.Method.invokeNative(Native Method)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at java.lang.reflect.Method.invoke(Method.java:507)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-13 12:13:36.469: ERROR/AndroidRuntime(7782):     at dalvik.system.NativeStart.main(Native Method)
05-13 12:13:45.234: ERROR/GlobalUnplugService(7116): plugged = true,mBatteryPlugged=true 
```

GiantBombAppActivity：

```
package whiskeymedia.com;

import java.util.ArrayList;
import java.util.List;

import whiskeymedia.com.vo.Achievement;
import android.app.ListActivity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.graphics.Color;
import android.os.Bundle;
import android.os.IBinder;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class GiantBombAppActivity extends ListActivity {
  private ListView mListView;

  private AchievementDatabase achievementDatabase;

  private AchievementUpdateService s;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mListView = getListView();
    List<Achievement> achievements = new ArrayList<Achievement>();
    achievementDatabase = new AchievementDatabase(this);
    achievementDatabase.open();
    //achievementDatabase.resetDatabase();
    achievements = achievementDatabase.getAllAchievements();

    MyAdapter adapter = new MyAdapter(this, achievements);
    setListAdapter(adapter);

    List<String> achievementNames = new ArrayList<String>();
    for(Achievement achievement: achievements) {
      achievementNames.add(achievement.getAchievementName());

      mListView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){
          //When clicked show a toast with the textview text
          Toast.makeText(getApplicationContext(), ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
      });

      doBindService();
    }
  }

  private ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName className, IBinder binder) {
      s = ((AchievementUpdateService.MyBinder) binder).getService();
      Toast.makeText(GiantBombAppActivity.this, "Connected", Toast.LENGTH_SHORT).show();
    }

    public void onServiceDisconnected(ComponentName className) {
      s = null;
    }
  };

  void doBindService() {
    bindService(new Intent(this, AchievementUpdateService.class), mConnection, Context.BIND_AUTO_CREATE);
  }

  /**
  * Adapter class to use for the list
  */
  private static class MyAdapter extends ArrayAdapter<Achievement> {

    /**
    * Constructor
    * 
    * @param context The context
    * @param contacts The list of contacts
    */
    public MyAdapter(final Context context, final List<Achievement> achievements) {
      super(context, 0, achievements);
    }

    @Override
    public View getView(final int position, final View convertView, final ViewGroup parent) {
      View view = convertView;
      if (view == null) {
        view = LayoutInflater.from(getContext()).inflate(R.layout.list_item, null);
      }

      final TextView achiev = (TextView)view.findViewById(R.id.achievement);
      if (getItem(position).getAchievmentRarity().compareTo("common") == 0) {
        achiev.setTextColor(Color.GREEN);
      }
      else if (getItem(position).getAchievmentRarity().compareTo("uncommon") == 0) {
        achiev.setTextColor(Color.BLUE);
      }
      else if (getItem(position).getAchievmentRarity().compareTo("rare") == 0) {
        achiev.setTextColor(Color.MAGENTA);
      }

      achiev.setText(getItem(position).getAchievementName());

      final TextView game = (TextView)view.findViewById(R.id.game);
      game.setText(getItem(position).getGameName());
        return view;
      }
    }
  }
} 
```

成就更新服务：

```
package whiskeymedia.com;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import whiskeymedia.com.vo.Achievement;
import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;

public class AchievementUpdateService extends Service{

  private AchievementDatabase achievementDatabase;

  private final IBinder mBinder = new MyBinder();

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
    HtmlParser htmlParser = new HtmlParser();
    try {
      List<Achievement> achievements= htmlParser.parseDocument();
      achievementDatabase.loadAchievements(achievements);
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

    return Service.START_NOT_STICKY;
  }

  @Override
  public IBinder onBind(Intent arg0) {
    return mBinder;
  }

  public class MyBinder extends Binder {
    AchievementUpdateService getService() {
    return AchievementUpdateService.this;
    }
  }

} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-16T00:07:36.740

崩溃是因为您返回的活页夹是 BinderProxy 的一个实例，而不是您的本地活页夹类。这通常是因为您的活动试图绑定到不在同一进程中的服务。跨进程边界绑定时，将使用 BinderProxy 的实例而不是实际实例（因为它位于不同的进程中）。

您的 AndroidManifest.xml 是什么样的？

# c - C链表堆栈和指针

> ID：10573934
> 
> 赞同：1
> 
> 时间：2012-05-13T17:54:26.880
> 
> 标签：c, pointers, reference, stack

我是 C 新手，正在尝试使用链表实现堆栈。目前正在设置堆栈，到目前为止一切都很好。当我尝试将新节点推送到列表时，问题就出现了。我目前有

在`main()`中，`push()`被调用：

```
push(&(s.head), 'r'); 
```

功能`push`是：

```
void push(StackNodePtr *topPtr, char value){
    printf("topPtr value %c", (*topPtr)->data); // - Is currently 'p'

    StackNodePtr sNP;
    sNP = malloc(Node_Size);
    sNP->data = value;                          // - Is currently 'r'
    sNP->nextPtr = *topPtr;

    printf("\nsNP value - %c", sNP->nextPtr->data);      // Prints p... cool
    topPtr = &sNP;      // Just assigned it???
    printf("\ntopPtr at end of push = %c", (*topPtr)->data);    // prints r... cool
    // WHY YOU NO REFERENCE sNP LATER!?!?
} 
```

同时，回到主要内容：

```
 printf("\non the stack...%c", stackTop(s.head));  // prints 'p' 
```

它似乎在推送中工作正常，但是我调用了指向`printf()`的节点，而以前打印出来的值（在本例中为“p”）。据我从狩猎中得知，它看起来和感觉都是正确的，我不知道我错过了什么。`topPtr``topPtr`

可能是我做过的地方`topPtr = &sNP;`吗？

任何朝着正确方向的“推动”都是好的推动……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:00:07.240

```
topPtr = &sNP;      // Just assigned it??? 
```

此分配在函数外部不可见。 `topPtr`是按值传递的，即复制它并传递给函数。因此，分配不同的值只会修改副本；原始参数仍然指向旧的内存位置。

如果您需要以这种方式修改参数，则需要另一个间接级别，即采用`StackNodePtr**`.

另外，我假设这`StackNodePtr`是 a `typedef`for a `StackNode*`。我说得对吗？`typedef`这种指针类型有充分的理由吗？通常它只会使事情复杂化。我建议`typedef`仅当指针类型确实是不透明类型（即`HANDLE`Windows 上的 a ）时才使用指针类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:00:15.433

它应该是

```
 *topPtr = sNP; 
```

这样，调用者将指针传递到的原始头，即成为新头的下一个头，被正确“覆盖”，并且调用者具有指向新头的正确指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:59:31.657

您的函数 push 正在修改指针 topPtr。由于 C 是按值传递的，因此头部作为值传递，传递的副本在推送中被修改。因此，要修改指针本身，您需要将指针传递给指针。此外，需要更正函数 push() 签名以传递指向指针的指针。最后，需要更正 push 中的 topPtr 分配，如代码片段所示。

进行以下更改：

```
push(&(s.head), 'r'); // pass pointer to pointer, assuming head is pointer, it should be fine

void push(StackNodePtr **topPtr, char value){  // make first argument pointer to pointer. 

StackNodePtr sNP;
sNP = malloc(Node_Size);
sNP->data = value;                       
sNP->nextPtr = *topPtr; 

*topPtr = &sNP;     <------*topPtr needs to be assigned. 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T18:00:02.520

```
topPtr = &sNP;      // Just assigned it??? 
```

不，你没有。您将值分配给指针的本地副本。你改变了`topPtr`它本身的价值，它是不会走出去的。相反，您应该写入它指向的位置：

```
*topPtr = sNP; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T18:02:18.467

它看起来像错误在这里：topPtr = &sNP; // 刚刚赋值？？？

而不是 push 返回 void。更改它以返回堆栈的新头部。返回sNp；

# jquery - Rails 3 - 如何使用带有文本区域的自动完成功能而不是经典文本输入？

> ID：10573936
> 
> 赞同：0
> 
> 时间：2012-05-13T17:54:45.983
> 
> 标签：jquery, ruby-on-rails-3, autocomplete, textarea

我正在玩[rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete) gem，它对我很有效。这是一个示例，我的自动完成输入看起来如何：

```
= f.autocomplete_field :interest, autocomplete_interest_users_path, :"data-delimiter" => ',' 
```

因为很多时候我需要在输入中写入很多单词，这就是为什么使用**textarea**而不是 default **input**更好，但是该怎么做呢？有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:00:37.297

也许像[http://rightjs.org/ui/tags/demo这样的东西？](http://rightjs.org/ui/tags/demo)[在http://st-on-it.blogspot.com/2011/04/making-tags-with-rails-and-rightjs.html](http://st-on-it.blogspot.com/2011/04/making-tags-with-rails-and-rightjs.html)上有一篇关于使用 Rails 进行这项工作的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T15:42:58.180

这是我用 jQuery 做的：

将此添加为助手：

```
module ActionView
  module Helpers
    module FormHelper

      def autocomplete_text_area(object_name, method, source, options ={})
        options["data-autocomplete"] = source
        text_area(object_name, method, rewrite_autocomplete_option(options))
      end
    end
  end

  class ActionView::Helpers::FormBuilder
    def autocomplete_text_area(method, source, options = {})
      @template.autocomplete_text_area(@object_name, method, source, objectify_options(options))
    end
  end
end 
```

这就是在 Rails 中扩展表单助手的方式。我们在这里所做的是添加我们自己的方法，我们可以在我们的视图中调用它。

现在，将此添加到您的 javascript 文件之一：

```
 $('textarea[data-autocomplete]').railsAutocomplete() 
```

这设置了自动完成 js 脚本来监听和响应我们的文本区域。

你现在应该能够在你的视图中做这样的事情：

```
f.autocomplete_text_area :name, autocomplete_menu_item_name_menus_path, placeholder: "Menu Item Name", class: 'input-lg menu_item', size: "45x2" 
```

# android - android在开始到结束之间的交叉点数组之间画线

> ID：10573937
> 
> 赞同：1
> 
> 时间：2012-05-13T17:54:53.890
> 
> 标签：android, google-maps-api-3, overlay, geopoints

我已经这样做了：

```
public class LongTravlOverlay extends Overlay{
    private Projection projection;
    private List<GeoPoint> glist;

    GeoPoint gP1; 
    GeoPoint gP2;
    public LongTravlOverlay(Projection a,List<GeoPoint> b){
        projection=a;
        this.glist=b;
    }   
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        Paint   mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.BLUE);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(3);
        for(GeoPoint g1:glist)
        {
            if(gP1!=null)
            {
                gP1=gP2;
                gP2=new GeoPoint(g1.getLatitudeE6(),g1.getLongitudeE6());
            }
            else
            {
                gP1=new GeoPoint(g1.getLatitudeE6(),g1.getLongitudeE6());
                gP2=gP1;
                continue;
            }
        Point p1 = new Point();
        Point p2 = new Point();
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);

        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x,p1.y);

        canvas.drawPath(path, mPaint);
        }
    }
} 
```

它起作用并在所有点之间画线。唯一的问题是在第一个点和最后一个点之间还有一条线最终与其他点的路径相交。我该如何删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:03:49.447

您将地理点 gP1 和 gP2 作为实例变量。`draw`将被多次调用。

在第一次调用的迭代结束时`draw`，`gP2`是最后一点。在第二次和后续调用的第一次迭代中`draw`，`gP1`将分配给最后一个点并`gP2`分配给您的第一个点。这在第一个点和最后一个点之间画了一条线。要纠正这个问题，只需`draw`在遍历您的地理点之前声明这些变量或将其初始化为 null。

```
gP1 = null;
gP2 = null;
for(GeoPoint g1:glist) {
//Drawing logic
} 
```

# android - 删除自定义选项菜单项之间的行

> ID：10573948
> 
> 赞同：7
> 
> 时间：2012-05-13T17:55:49.053
> 
> 标签：android

我自定义了选项菜单，删除了默认背景并通过引用样式自定义了它自己的项目，但是我堆叠删除了项目之间的线，如图所示。

任何建议将被认真考虑。

![在此处输入图像描述](../Images/7028a1b6d7283de1b217698d4d086f38.png)

我的代码：

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
     android:shape="rectangle">
      <stroke android:width="1dp" android:height="1dp" android:color="#B22222" /> 
   <solid android:color="#FCE6C9" /> 
     <padding android:left="2dp" android:top="2dp" android:right="2dp"
          android:bottom="2dp" /> 
   <corners  android:bottomRightRadius="30dp"  android:bottomLeftRadius="30dp"
     android:topLeftRadius="30dp"  android:topRightRadius="30dp" />

    </shape> 
```

* * *

选项菜单代码：

```
 public class OptionMenu extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);}

public boolean onCreateOptionsMenu(android.view.Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.cool_menu, menu);

    getLayoutInflater().setFactory(new Factory() {
    public View onCreateView(String name, Context context,
    AttributeSet attrs) {

    if (name .equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {
    try {

    LayoutInflater li = LayoutInflater.from(context);
    final View view = li.createView(name, null, attrs);

    new Handler().post(new Runnable() {
    public void run() {

    // set the background drawable
    view .setBackgroundResource(R.drawable.border);

    ((TextView) view).setTextSize(20); 

    // set the text color
    ((TextView) view).setTextColor(Color.RED);}
        });
    return view;}
     catch (InflateException e) { }
     catch (ClassNotFoundException e) { }
            }
    return null; }
            });
    return super.onCreateOptionsMenu(menu);}

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch (item.getItemId()) {
        case R.id.AboutUs:
            Intent i = new Intent("com.test.demo.ABOUT");
            startActivity(i);

             break;
                 case R.id.preferences:
                 Intent p = new Intent("com.test.demo.PREFS");
                 startActivity(p);
             break;
             case R.id.exit:
                   finish();
             break;}
            return false;} } 
```

* * *

酷菜单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:title="about"  android:id="@+id/AboutUs"  /> 
 <item android:title="Prefs"  android:id="@+id/preferences" /> 
 <item android:title="Exit"   android:id="@+id/exit" /> 
 </menu> 
```

* * *

菜单样式.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
     <resources>
        <style name="Theme_menu">
        <item name="android:panelFullBackground">@drawable/border</item> 
          </style>
     </resources> 
```

* * *

清单中的样式参考选项菜单：

```
 <activity
           android:name=".OptionMenu"
           android:label="@string/app_name" android:theme="@style/Theme_menu"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T00:55:50.800

正如您所提到的，您想找到删除线的解决方案。我不知道这样做，但我也更喜欢编写自己的动态和可定制的菜单系统（特别是在动画和图形方面）。您可以选择为我自己的项目编写的源代码。

并根据需要设计您的布局。

**样本结果：**

![在此处输入图像描述](../Images/2f54e603b0487dc491130163eb9c5ae1.png)

**更新：完整答案**

**下一个**

```
public class MenuActivity extends EnhancedActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

**下一个**

```
public class EnhancedActivity extends Activity {

private static Activity _this;

public static Activity getCurrent() {
    return _this;
}

public static void setCurrent(Activity activity) {
    _this = activity;
}

@Override
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);

    _this = this;

    G.gWidgetMenu.retarget();
}

@Override
protected void onResume() {
    super.onResume();

    if (_this == this) {
        return;
    }

    _this = this;

    G.gWidgetMenu.retarget();
}

@Override
protected void onPause() {
    G.gWidgetMenu.forceClose();
    super.onPause();
}

@Override
public boolean onKeyDown(int keycode, KeyEvent e) {
    if (G.gWidgetMenu.processKey(keycode, e)) {
        return true;
    }

    return super.onKeyDown(keycode, e);
}
} 
```

**下一个**

```
public class G extends Application {

public static Context        gContext;
public static LayoutInflater gInflator;
public static WidgetMenu     gWidgetMenu;

@Override
public void onCreate() {
    gContext = getApplicationContext();
    gInflator = (LayoutInflater) gContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    gWidgetMenu = new WidgetMenu();
}
} 
```

**下一个**

```
public class WidgetMenu extends FrameLayout implements AnimationListener {

private static final int       _RES_LAYOUT          = R.layout.widget_menu;
private static final int       _RES_ANIMATION_OPEN  = R.anim.anim_menu_open;
private static final int       _RES_ANIMATION_CLOSE = R.anim.anim_menu_close;

private static final Animation _ANIM_OPEN           = AnimationUtils.loadAnimation(G.gContext, _RES_ANIMATION_OPEN);
private static final Animation _ANIM_CLOSE          = AnimationUtils.loadAnimation(G.gContext, _RES_ANIMATION_CLOSE);

private static boolean         _canReceiveKey       = true;

private Ui                     _ui;

public WidgetMenu() {
    super(G.gContext);
    _ANIM_CLOSE.setAnimationListener(this);
    _ANIM_OPEN.setAnimationListener(this);

    View view = G.gInflator.inflate(_RES_LAYOUT, this);
    _ui = new Ui(view);
}

/**
 * open/close menu if menu key pressed, and close menu when back key
 * pressed. if this method act, it will return true other wise return false
 * as meaning no action occured.
 */
public boolean processKey(int keycode, KeyEvent e) {
    if ( !_canReceiveKey) {
        return false;
    }

    switch (keycode) {
        case KeyEvent.KEYCODE_MENU:
            if (getVisibility() == View.VISIBLE) {
                close();
            } else {
                open();
            }

            return true;

        case KeyEvent.KEYCODE_BACK:
            if (getVisibility() == View.VISIBLE) {
                close();
                return true;
            }

            return false;
    }

    return false;
}

public void retarget() {
    FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, Gravity.LEFT | Gravity.BOTTOM);
    if (EnhancedActivity.getCurrent() != null) {
        ViewGroup parent = (ViewGroup) getParent();
        if (parent != null) {
            parent.removeView(this);
        }
        setVisibility(View.GONE);
        _ui.format();

        EnhancedActivity.getCurrent().addContentView(this, layoutParams);
        _canReceiveKey = true;
    }
}

public void forceClose() {
    onAnimationEnd(_ANIM_CLOSE);
}

/** play close animation and when close listener act, remove it from view */
private void close() {
    _canReceiveKey = false;
    startAnimation(_ANIM_CLOSE);
}

/** add control to view an show open animation */
private void open() {
    _canReceiveKey = false;
    setVisibility(View.VISIBLE);
    startAnimation(_ANIM_OPEN);
}

@Override
public void onAnimationStart(Animation animation) {}

@Override
public void onAnimationRepeat(Animation animation) {}

@Override
public void onAnimationEnd(Animation animation) {
    if (animation == _ANIM_CLOSE) {
        setVisibility(View.GONE);
    }

    _canReceiveKey = true;
}

private class Ui {

    public ViewGroup panel_about;
    public ViewGroup panel_setting;

    public Ui(View view) {
        panel_about = (ViewGroup) findViewById(R.id.panel_about);
        panel_setting = (ViewGroup) findViewById(R.id.panel_setting);

        format();
    }

    public void format() {
        panel_about.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Log.i("LOG", "About Menu Pressed");
            }
        });

        panel_setting.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Log.i("LOG", "Setting Menu Pressed");
            }
        });
    }
}
} 
```

**下**一个 widget_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#000000">

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:background="#c84300"/>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_marginTop="4dip">

        <LinearLayout
            android:id="@+id/panel_feedback"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="4dip"
            android:layout_weight="0.33"
            android:background="#330000"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:paddingBottom="4dip"
            android:paddingTop="4dip" android:layout_marginRight="2dip">

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="3dip"
                android:singleLine="true"
                android:text="Feedback"
                android:textColor="#ffffff"
                android:textSize="17dip"/>

        </LinearLayout>

        <LinearLayout
            android:id="@+id/panel_about"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.33"
            android:background="#330000"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:layout_marginLeft="2dip" android:layout_marginRight="2dip" android:paddingTop="4dip" android:paddingBottom="4dip">

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:scaleType="centerInside"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:id="@+id/txt_menu1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="3dip"
                android:singleLine="true"
                android:text="About"
                android:textColor="#ffffff"
                android:textSize="17dip"/>

        </LinearLayout>

        <LinearLayout
            android:id="@+id/panel_setting"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.33"
            android:background="#330000"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:layout_marginRight="4dip" android:paddingTop="4dip" android:paddingBottom="4dip" android:layout_marginLeft="2dip">

            <ImageView
                android:id="@+id/ImageView05"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:id="@+id/txt_menu2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="3dip"
                android:singleLine="true"
                android:text="Settings"
                android:textColor="#ffffff"
                android:textSize="17dip"/>

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

**下**一个 anim_menu_close.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="200"
        android:fillAfter="true"
        android:fillBefore="true"
        android:fromXDelta="0%"
        android:fromYDelta="0%"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:repeatCount="0"
        android:toXDelta="0%"
        android:toYDelta="100%" />

</set> 
```

**下**一个 anim_menu_open.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="200"
        android:fillAfter="true"
        android:fillBefore="true"
        android:fromXDelta="0%"
        android:fromYDelta="100%"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:repeatCount="0"
        android:toXDelta="0%"
        android:toYDelta="0%" />

</set> 
```

**下一个**清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.uncocoder.menu"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <application
        android:name="com.uncocoder.menu.G"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.uncocoder.menu.MenuActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T15:41:54.383

我遇到了同样的问题，但我遇到了问题，`cleared`而不是试图解决它！我试图显示一个`transparent`带有布局`like`菜单的 Activity，当用户单击主 Activity 中的菜单按钮时，会显示透明的 Activity。我希望这些代码段对您有所帮助：

主要活动：

```
public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ( keyCode == KeyEvent.KEYCODE_MENU ) { 
            Intent i = new Intent(this, MyCustomMenuActivity.class);
            startActivity(i);
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

自定义菜单活动：

```
public class MyCustomMenuActivity extends Activity {
    Button finishButton;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);
        finishButton = (Button) findViewById(R.id.finishbutton);
        finishButton.setOnClickListener(new OnClickListener() { 
            @Override
            public void onClick(View v) {
                MyCustomMenuActivity.this.finish();
            }
        });
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ( keyCode == KeyEvent.KEYCODE_MENU ) {
            finish();
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/ic_launcher">
</LinearLayout> 
```

菜单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@null"
    >

    <Button
        android:id="@+id/finishbutton"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text=""
        android:layout_alignParentBottom="true" 
        android:background="@null"/>

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

</RelativeLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="y.namespace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".MainActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="MyCustomMenuActivity" android:theme="@style/Theme.Transparent"></activity>
    </application>

</manifest> 
```

主题透明.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Transparent" parent="@android:style/Theme.NoTitleBar">    
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@color/transparent</item>
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowFrame">@null</item>
  </style>
</resources> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T18:38:53.253

这些分隔线看起来类似于默认情况下在 ListView 中的条目之间插入的分隔线。根据 Menu 与 ListView 的相似程度（可能不是很相似），以下代码修改可能会起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<menu 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:divider="@android:color/transparent">

   <item android:title="about"  android:id="@+id/AboutUs"  /> 
   <item android:title="Prefs"  android:id="@+id/preferences" /> 
   <item android:title="Exit"   android:id="@+id/exit" /> 
</menu> 
```

如果这不起作用，那么阅读[Menu 对象](http://developer.android.com/reference/android/view/Menu.html)可能会很有用。`Menu.addIntentOptions()`我从函数文档中找到了以下引用。

> 通常，此功能会自动删除同一组中菜单中的所有现有项目，并在添加的项目上方和下方放置一个分隔符；可以使用 flags 参数修改此行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-21T04:21:20.677

将您的主题更改为 AppTheme 到 AppTheme.NoActionBar。

`<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"> <!-- Customize your theme here. --> <item name="colorPrimary">@color/colorPrimary</item> <item name="colorPrimaryDark">@color/colorPrimaryDark</item> <item name="colorAccent">@color/colorAccent</item> </style>`

```
<style name="AppTheme.NoActionBar">
    <item name="windowActionBar">false</item>
    <item name="windowNoTitle">true</item>
    <item name="android:windowDrawsSystemBarBackgrounds">true</item>
    <item name="android:statusBarColor">@android:color/transparent</item>
</style> 
```

# php - 在 apache 上设置虚拟主机以允许 Zend 与另一个应用程序/静态网站位于同一域

> ID：10573949
> 
> 赞同：0
> 
> 时间：2012-05-13T17:56:25.053
> 
> 标签：php, apache, zend-framework, redirect, virtualhost

目标是在与静态网站相同的域上有效地设置 Zend 应用程序。目前以下情况属实，但速度较慢：

*   www.website.com/ 重定向到 www.website.com/corp/index.html
*   /admin, /login, /session 解析为 zend 应用程序所在的 /index.php

我已经在我的引导文件中设置了到 www.website.com/corp/index.html 的重定向，但是无论我访问哪个页面，这个重定向都必须在适当的时候发生。它正在减慢整个静态站点的速度。这是我的虚拟主机 httpd.conf 条目，它将所有内容重定向到 /index.php 但我想放置一个异常，允许在该目录中访问 /corp 而无需重定向。当然也欢迎其他简单有效的解决方案。

```
<VirtualHost *:18887>
   DocumentRoot c:\pathtoapp\public
   ServerName website.com

    SetEnv APPLICATION_ENV "local"
     <Directory c:\pathtoapp\public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:22:57.677

如果您修改 Zend Framework 的`.htaccess`文件以绕过向`/corp/*`前端控制器发送任何请求，您应该能够绕过这个问题。

尝试将`.htaccess`公共目录中的文件更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} ^corp\/* [OR]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

第一个 RewriteCond 检查请求文件名是否匹配`/corp/*`，如果匹配，则绕过前端控制器并直接通过 Apache 为请求提供服务，您的 Zend 应用程序永远不必处理任何这些请求。

# objective-c - 与 NSURLRequest 连接

> ID：10573950
> 
> 赞同：0
> 
> 时间：2012-05-13T17:56:28.313
> 
> 标签：objective-c, nsurlrequest

我正在使用这段代码：

```
NSString *recievedData;

NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.site.com/"]
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:60.0];
// create the connection with the request
// and start loading the data
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    recievedData = [NSMutableData data];

    NSLog(@"%@", recievedData);
} else {
    // Inform the user that the connection failed.
    NSLog(@"Unsuccessful.");
} 
```

[这是这个](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)的修改版本。

我的问题是它总是返回

> <>

无论我是否连接到互联网，它总是会成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:06:16.420

NSURLConnection 不能那样工作。您开始一个连接，然后在接收到数据时接收回调。

如果您想要一个简单的调用来检索远程数据，请使用 NSData 的 dataWithContentsOfURL 方法。但是，您应该只在辅助线程上使用它，否则它会在调用期间锁定您的用户界面，并且如果花费太长时间，系统可能会终止您的应用程序。

[请参阅NSURLConnection 示例](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)中的完整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:14:09.923

您还没有收到任何数据，您刚刚实例化了将保存接收到的数据的对象。您需要实现处理响应和失败的委托方法，并且通常最好异步使用 NSURLConnection。

有一些[使用 NSURLConnection的示例代码](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

# video-processing - 使用系统安装的专有编解码器编辑/解码 AVI 文件

> ID：10573951
> 
> 赞同：2
> 
> 时间：2012-05-13T17:56:42.317
> 
> 标签：video-processing, video-encoding, codec

我已经搜索了几天了，但似乎没有什么能完全回答或对我有用，所以如果我问的是一个愚蠢的问题或似乎已经在其他地方得到回答的问题，请原谅我。

我有一个使用 GMP4 视频编解码器编码的 AVI 文件，目前安装在我的计算机上，因此我可以在 Windows Media Player 中播放该文件。我要做的是打开/解码文件以进行编辑，以便能够将两个视频文件拼接在一起。我不要求它以相同的格式输出，而只是打开进行编辑，获取帧，然后我可以输出为更标准的格式。

我遇到的问题是没有为这种格式创建 DirectShow 过滤器，所以它不会为我使用它打开（没有深入研究它，但所有样本都无法加载视频文件）。FFMPEG 尝试读取文件，指出标头不正确，但无论如何它都会尝试读取它，然后死掉，说明我需要 GMP4 编解码器。正如我之前所说，我安装了特定的编解码器，但 FFMPEG 似乎没有注意到或无法访问它。

有什么可以让我使用系统安装的编解码器来解码视频帧吗？Windows Media Player 可以做某事对我来说似乎很奇怪，但我不能以编程方式重复它。我不限于 C++ 或 C#，尽管 C# 肯定是首选语言。

谢谢大家，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:14:35.083

我整天都在遇到同样的问题。解决方案是安装 AVISynth，然后您可以使用 ffmpeg 加载系统具有 VfW 编解码器的任何 AVI 文件。不要将 ffmpeg 传递给您的 AVI 输入文件，而是创建一个包含 AviSource("your-avi-filename") 的单行的 .avs 文件，并将 .avs 文件名传递给 ffmpeg。

假设您要将专有视频编解码器中的 input.avi 转换为 h263 格式（假设您的 input.avi 具有受支持的 h263 帧大小）：

```
echo AviSource("input.avi") > input.avs
ffmpeg -i inputs.avs -vcodec h263 output.avi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:18:25.657

Nuno 有一个很好的答案，但是您想避免命令行转换，您可以使用 AForge.Net c# 库来访问 AfW 编解码器、FFMpeg 编解码器甚至 DShow 编解码器（一些 CCTV DVR 确实在 DShow 中进行编码）。

还有一种方法可以将 Windows Media Player 作为 ac# 对象打开并从中抓取帧。如果您想了解更多信息，请给我发电子邮件 - 听起来我们正在开展类似的项目。

# vb.net - 将多个对象保存到单个文件 vb.net

> ID：10573954
> 
> 赞同：0
> 
> 时间：2012-05-13T17:57:01.573
> 
> 标签：vb.net, single-file

问候，

我正在尝试将多种类型的对象保存到单个文件中，对象是我能够序列化的自定义类，另一个对象是无法通过二进制序列化的 word 文档。有没有一种方法可以使用 vb 将多个对象保存到一个文件中，也可以像保存 docx 一样保存文件，即 .zip 重命名为 docx 但可以访问内部对象。

我正在尝试在 vb.net 中做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:04:10.327

我想我找到了一种在必要时通过使用 System.IO.ZipPackaging 和 BinarySerialization 手动完成的方法。谢谢你。

# git - 从本地存储库推送到 GitHub 托管的远程

> ID：10573957
> 
> 赞同：116
> 
> 时间：2012-05-13T17:57:40.253
> 
> 标签：git, github, git-push

我在我的开发机器上使用 Git GUI 创建了我的 Visual Studio 2010 解决方案文件夹的本地存储库。然后，我在我的 GitHub 帐户中创建了一个远程存储库。现在，我正在寻找如何将本地存储库推送到远程存储库。

在 SVN 中，我可以使用 TortoiseSVN 提交并将更改推送到远程存储库。我没有看到任何可用于 Git 的工具。

如何将本地仓库推送到 GitHub 上的远程仓库？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-05-13T18:01:22.783

`git push`在首先使用命令建立两者之间的关系后，使用命令将本地存储库推送到远程存储库`git remote add [alias] [url]`。如果您访问您的 Github 存储库，它将显示用于推送的 URL。您将首先输入如下内容：

```
git remote add origin git@github.com:username/reponame.git 
```

除非您首先`git clone`针对远程存储库运行，否则此步骤已经为您完成。

之后，您将输入：

```
git push origin master 
```

第一次推送后，您只需键入：

```
git push 
```

当您将来想要更新远程存储库时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:59:36.663

类型

```
git push 
```

从存储库目录中的命令行

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T18:01:38.387

Subversion始终隐式地拥有与之关联*的远程存储库。*另一方面，Git 允许许多“远程”，每个“远程”代表一个您可以推入或拉出的远程位置。

您需要将 GitHub 存储库的远程添加到本地存储库，然后分别使用`git push ${remote}`或`git pull ${remote}`推送和拉取 - 或 GUI 等效项。

Pro Git 在这里讨论遥控器：http: [//git-scm.com/book/ch2-5.html](http://git-scm.com/book/ch2-5.html)

GitHub 帮助也在此处以更“以任务为中心”的方式讨论它们：http: [//help.github.com/remotes/](http://help.github.com/remotes/)

将两者关联后，您将能够推或拉分支。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-08T10:19:46.253

这适用于我的 GIT 版本 1.8.4：

1.  从本地存储库文件夹中，右键单击并选择“ **Git Commit Tool** ”。
2.  在那里，在“未分级更改”下选择您要上传的文件，然后单击“**分级更改****”**按钮。（您最初可以单击“**重新扫描**”按钮来检查哪些文件已修改但尚未上传。）
3.  编写提交消息并单击“**提交**”按钮。
4.  现在再次右键单击该文件夹并选择“ **Git Bash** ”。
5.  输入：**git push origin master**并输入您的凭据。完毕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-26T10:26:34.133

打开命令提示符转到项目目录

输入 git remote add origin 你的 git hub 存储库位置 with.git

# android - ViewBinder 中的 ProgressBar 有奇怪的值

> ID：10573964
> 
> 赞同：0
> 
> 时间：2012-05-13T17:58:42.420
> 
> 标签：android, android-listview, android-viewbinder

我有`SimpleAdapter`一个`ViewBinder`。`ViewBinder`绑定 some和`TextViews`a 。`ProgressBar`工作正常，`TextView`但是当我向后滚动列表时，我得到了奇怪的`ProgressBar`. 为什么会发生这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:49:19.237

我终于发现了。发生这种情况是因为数据绑定器是动态加载的。我不得不撤销我的算法。我希望如果其他人遇到这个问题，我的回答会有所帮助。

# c++ - 删除向量中的特定值

> ID：10573977
> 
> 赞同：0
> 
> 时间：2012-05-13T18:00:09.140
> 
> 标签：c++, vector

当我尝试执行此擦除功能以从我的向量中删除“2”时，我遇到了一个错误列表。我不确定问题出在哪里。帮助将不胜感激！

STRUCT MyInt

```
struct MyInt
{
friend ostream &operator<<(ostream &printout, const MyInt &Qn)
{
   printout<< Qn.value << endl;
   return printout;
}

  int value;
  MyInt (int value) : value (value) {}
}; 
```

结构我的东西

```
struct MyStuff
{
  std::vector<MyInt> values;

  MyStuff () : values ()
  { }
}; 
```

主要的

```
int main()
{
MyStuff mystuff1,mystuff2;

for (int x = 0; x < 5; ++x)
    {
        mystuff2.values.push_back (MyInt (x));
    }

vector<MyInt>::iterator VITER;
mystuff2.values.push_back(10);
mystuff2.values.push_back(7);

    //error points to the line below
mystuff2.values.erase(std::remove(mystuff2.values.begin(), mystuff2.values.end(), 2), mystuff2.values.end());

    return 0; 
```

}

错误信息

> stl_algo.h：在函数 '_OutputIterator std::remove_copy(_InputInputIterator, _InputIterator, const_Tp&) [with_InputIterator = __gnu_cxx:__normal_iterator >>, OutputIterator = __ gnu_cxx::__normal iterator >>, Tp = int]'
> 
> 运算符==' 不匹配

错误消息显示该特定行实际上违反了 stl_algo.h 的第 1267、1190、327、1263、208、212、216、220、228、232、236 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:05:43.857

您需要`==`为 class 重载运算符`MyInt`。

例如：

```
struct MyInt
{

friend ostream &operator<<(ostream &printout, const MyInt &Qn)
{
   printout<< Qn.value << endl;
   return printout;
}

// Overload the operator 
bool operator==(const MyInt& rhs) const
{
  return this->value == rhs.value;
}

  int value;
  MyInt (int value) : value (value) {}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:09:15.413

有两个问题。您看到的错误是告诉您您尚未定义 int 和您的类型之间的相等比较。在您的结构中，您应该定义一个相等运算符

```
bool operator==(int other) const
{
    return value == other;
} 
```

当然，在另一个方向定义一个全局运算符：

```
bool operator==(int value1, const MyInt& value2)
{
    return value2 == value1;
} 
```

# php - CSV 导入编码

> ID：10573981
> 
> 赞同：1
> 
> 时间：2012-05-13T18:00:34.063
> 
> 标签：php, encoding, csv

我正在使用该`fgetcsv()`功能导入 CSV，效果很好。

但是，当我查看数据库中的数据时，我看到带有问号的黑色菱形。当再次回显数据时，这不是什么大问题，因为它们不会出现，但是当我想使用其中一个 CSV 字段作为 MySQL 日期时，它不会被识别为日期并且是存储为`0000-00-00`.

例如

![在此处输入图像描述](../Images/4620694277ecd28ea844707117e27393.png)

我认为这个问题与 CSV 的编码有关吗？任何人都可以提供任何建议吗？

谢谢！

编辑：如果有帮助，这里是我的导入脚本，根据 mb_detect_encoding，编码类型是 ASCII

```
<?php
include 'config.php';
include 'opendb.php';
ini_set("auto_detect_line_endings", true);

$row = 0;
$tmpName = $_FILES['csv']['tmp_name'];

if (($handle = fopen($tmpName, "r")) !== FALSE) {
    $num = count($data);

     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
        $noQuotes = str_replace("\"", '', $data);
        $originalDate = $noQuotes[1];

        //$delivery_date = date('Y-m-d', strtotime($originalDate));

        $parts = explode('/', $originalDate);
        $delivery_date = $parts[2] . '-' . $parts[1] . '-' . $parts[0];

        $row++;

        $import="INSERT into dispatch (delivery_note_number, delivery_date, dispatch_date, customer_delivery_date, delivery_line, produce, variety, quantity, pallets, count, depot, customer, grower, haulier, status) 
        values ('$noQuotes[0]', '$delivery_date', '$noQuotes[2]', '$noQuotes[3]', '$noQuotes[4]', '$noQuotes[5]', '$noQuotes[6]', '$noQuotes[7]', '$noQuotes[8]', '$noQuotes[9]', '$noQuotes[10]', '$noQuotes[11]', '$noQuotes[12]', '$noQuotes[13]', '$noQuotes[14]')";

        echo $import; 
        mysql_query($import) or die(mysql_error());
     }

        //header("location:list_dispatch.php?st=recordsadded");

    fclose($handle);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:07:03.333

如果您的数据库使用的字符编码与 CSV 文件不同，则可能应首先转换数据。

执行此操作的一种方法是使用[mb_convert_encoding()](http://www.php.net/manual/en/function.mb-convert-encoding.php)函数。

同样有用的是，[mb_detect_encoding()](http://www.php.net/manual/en/function.mb-detect-encoding.php)应该能够检测给定输入字符串的字符编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:32:02.550

有人在另一个论坛上找到了解决方案：

> 这些是 NUL 字符（ASCII 代码 0x00），像这样替换它们：
> 
> $string = str_replace(chr(0), '', $string);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T14:44:30.750

```
fputcsv($f, $array, ' ', chr(0)); 
```

# css - 在 WP7 浏览器上重定向到 https 后的 CSS 加载失败

> ID：10573982
> 
> 赞同：1
> 
> 时间：2012-05-13T18:00:34.700
> 
> 标签：css, redirect, https

我在 Azure 云中有一个测试网页，我在 https 中有登录页面。我的问题是，如果我通过重定向进入登录页面，则 CSS 或图像都不会加载到 WP7 默认浏览器 - IE 中。证书是自签名证书 - 所以在进入实际页面之前我会收到来自浏览器的警告。

奇怪的是，如果我在初始加载后单击刷新按钮 - CSS 和图像加载正常。此外，如果我直接进入 https 登录页面而不通过重定向 - 一切都会再次正常。

服务器端使用 MVC3 完成，https 重定向是通过在控制器之前添加 [RequireHttps] 属性来完成的。

提琴手日志没有显示任何对我有帮助的东西。在重定向的情况下，我可以看到在加载 html 页面后，有用于获取 https 隧道的握手，但没有对 css 或图像的请求。当我单击刷新时，Fiddler 日志似乎以相同的方式启动，但这次也加载了 CSS 和图像。

我已经对此进行了相当多的谷歌搜索，但我找到的答案似乎都没有帮助。CSS 和图像加载了相对链接，所以这不应该是问题。目录访问权限也应该没问题，因为它无需重定向即可工作。它在我尝试过的桌面 IE 和其他移动浏览器中也可以正常工作。

任何帮助将不胜感激。

# c - 如何使用 fopen() 选择打开模式？

> ID：10573984
> 
> 赞同：3
> 
> 时间：2012-05-13T18:00:38.090
> 
> 标签：c, linux, file-io, fopen

我有一个关于文件打开模式的问题`fopen()`。

就我而言，我想自由地寻找光标，`EOF`有时甚至可能超出。更重要的是，我还想附加到它而不是截断现有文件。我试图以`a+`模式打开文件；但是，我不能自由地寻找文件光标。每次我在 之外寻找光标时`EOF`，新到达的数据都会附加到文件的末尾，而不是我指定的位置。同时，如果以`w+`模式打开，现有文件将被截断。这个问题有完美的解决方案吗？

* * *

更新：

没有明确说明的一点是该文件可能并不总是存在；在这种情况下，我必须创建一个新文件。

其实我想处理一个配置文件。我不知道这样实施是否是一种好习惯。或者我应该先放置一个空的配置文件。这样有没有必要关心case文件不存在？

下面是代码片段：

```
FILE *f = fopen(FILE_PATH, "wb+");
struct record r;
if (f) {
    if (fread((void *)&r, 1, sizeof(struct record), f) {
        /* File exists, do the normal flow */
    } else {
        if (feof(f)) {
            /* File is newly created, do some initialization */
        }
    }
} else {
    /* issue a warning */
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T18:41:05.060

您必须分两个阶段处理可能不存在的文件，首先假设它存在，然后处理它的缺失：

```
if ((f = fopen(filename, "rb+") == 0)
    f = fopen(filename, "wb+");
if (f == 0)
    ...report error... 
```

该`"rb+"`模式将无法打开不存在的文件（但会按照您的意愿行事）。如果文件不存在，那么`"wb+"`将做你想做的事情（尽管它仍然可能失败，例如如果文件存在但你没有写入权限）。您必须希望您没有受到双重尝试的 TOCTOU（检查时间，使用时间）攻击。

另一种方法使用`open()`带有适当标志的系统调用的 3 参数版本来打开文件描述符，然后使用`fdopen()`从文件描述符创建文件流：

```
#include <fcntl.h>

int fd;
if ((fd = open(filename, O_RDRW | O_CREAT, 0644)) >= 0)
    f = fdopen(fd, "rb+"); 
```

[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)您可以通过标志获得相当精确的控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:04:25.980

文件模式已明确记录`fopen`（尝试`man 3 fopen`在 Unix/Linux/OS X 上）。

> `r+` 开放阅读和写作。流位于文件的开头。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T06:21:38.197

你好，fseek可以用"w+"读写，我写了一个小demo程序，先把数据写入文件，然后用fseek把每个数据间隔变成一个字节，然后读取：

```
#include <stdio.h>
#include <unistd.h>

#define FILE_PATH "seek_test.txt"
#define STEP_SIZE 64

void set_data(FILE* fp)
{
    int i = 0;
    fseek(fp, 0, SEEK_SET);

    for ( ; i < 20; ++i)
    {
        fprintf(fp, "%d", i);
        fseek(fp, STEP_SIZE, SEEK_CUR);
    }
}

void get_data(FILE* fp)
{
    int i = 0;
    fseek(fp, 0, SEEK_SET);

    for ( ; i < 20; ++i)
    {
        fscanf(fp, "%d", &i);
        fprintf(stderr, "Cur Step: %5ld, value = %4d\n", i * STEP_SIZE, i);
        fseek(fp, STEP_SIZE, SEEK_CUR);
    }
}

int main(int argc, char* argv[])
{
    FILE* fp = fopen(FILE_PATH, "w+");
    if (fp == NULL)
    {
        printf("fopen Error\n");
        exit(0);
    }

    set_data(fp);
    get_data(fp);

    return 0;
} 
```

================================ 结果如下：

当前步长：0，值 = 0

当前步长：64，值 = 1

当前步长：128，值 = 2

当前步长：192，值 = 3

当前步长：256，值 = 4

当前步长：320，值 = 5

当前步长：384，值 = 6

当前步长：448，值 = 7

当前步长：512，值 = 8

当前步长：576，值 = 9

当前步长：640，值 = 10

当前步长：704，值 = 11

当前步长：768，值 = 12

当前步长：832，值 = 13

当前步长：896，值 = 14

当前步长：960，值 = 15

当前步长：1024，值 = 16

当前步长：1088，值 = 17

当前步长：1152，值 = 18

当前步长：1216，值 = 19

==============================

# android - 错误 - android.database.CursorIndexOutOfBoundsException：请求索引 0，大小为 0

> ID：10573985
> 
> 赞同：5
> 
> 时间：2012-05-13T18:00:42.770
> 
> 标签：android, database

我正在尝试做一个数据库，但我有一个问题......

这是日志：

```
E/AndroidRuntime(894): FATAL EXCEPTION: main
E/AndroidRuntime(894): java.lang.IllegalStateException: Could not execute method of the activity
E/AndroidRuntime(894):  at android.view.View$1.onClick(View.java:3044)
E/AndroidRuntime(894):  at android.view.View.performClick(View.java:3511)
E/AndroidRuntime(894):  at android.view.View$PerformClick.run(View.java:14105)
E/AndroidRuntime(894):  at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime(894):  at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(894):  at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(894):  at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(894):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(894):  at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(894):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(894): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(894):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(894):  at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(894):  at android.view.View$1.onClick(View.java:3039)
E/AndroidRuntime(894):  ... 11 more
E/AndroidRuntime(894): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
E/AndroidRuntime(894):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
E/AndroidRuntime(894):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
E/AndroidRuntime(894):  at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:74)
E/AndroidRuntime(894):  at and.mGroup.VirtualTrener.DatabaseControl.fetchItemByType(DatabaseControl.java:59)
E/AndroidRuntime(894):  at and.mGroup.VirtualTrener.DatabaseManageActivity.onClick(DatabaseManageActivity.java:48)
E/AndroidRuntime(894):  ... 14 more 
```

这是 DatabaseControl.java：

```
public class DatabaseControl {

    private static final String KEY_ROWID = "_id";
    private static final String KEY_NAME = "NAME";
    private static final String KEY_BKI = "BKI";
    private static final String KEY_CKM = "CKM";

    private static final String DATABASE_TABLE ="inventory";

    private Context context;
    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    public DatabaseControl(Context context){
        this.context = context;
    }

    public DatabaseControl open() throws SQLiteException {
        dbHelper = new DatabaseHelper(context);
        database = dbHelper.getWritableDatabase();
        return this;
    }

    public void close () {
        dbHelper.close();
    }

    public long addItem(String NAME, int BKI, int CKM) {
        ContentValues setUpVals = CreateContentValues(NAME,BKI,CKM);
        return database.insert(DATABASE_TABLE, null, setUpVals);

    }

    public boolean updateItem (long id, String NAME, int BKI, int CKM){
        ContentValues updateVals = CreateContentValues(NAME,BKI,CKM);

        return database.update(DATABASE_TABLE, updateVals, KEY_ROWID + "="+ id, null) > 0;
    }

    public long fetchItemByType(String type){
        Cursor dbCursor;

        long id =0;
        try {
            dbCursor = database.query(true, DATABASE_TABLE, new String[]{KEY_ROWID},KEY_NAME + "= '" + type + "'" , null, null, null, null, null);
            dbCursor.moveToFirst();
            id = dbCursor.getLong(dbCursor.getColumnIndex(KEY_ROWID));
        } catch (SQLiteException e) {
            id = -1;
        }
        return id;      
    }

    public String fetchAllItems(){
        String allData = "";

        Cursor dbCursor;
        try {
            dbCursor = database.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME, KEY_BKI, KEY_CKM}, null, null, null, null, null);
            //dbCursor.getCount();
            int iRow = dbCursor.getColumnIndex(KEY_ROWID);
            int iName = dbCursor.getColumnIndex(KEY_NAME);
            int iBKI = dbCursor.getColumnIndex(KEY_BKI);
            int iCKM = dbCursor.getColumnIndex(KEY_CKM);

            for (dbCursor.moveToFirst(); !dbCursor.isAfterLast(); dbCursor.moveToNext())
            {
                allData = allData + " " + dbCursor.getString(iRow) + "\t" + dbCursor.getString (iName) + "\t" + dbCursor.getString (iBKI) + "\t" + dbCursor.getString (iCKM) + "\n";
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            allData = "";

        }
        return allData;
    }

    public boolean deleteItem(long id){
        return database.delete(DATABASE_TABLE, KEY_ROWID + "=" + id, null) > 0;
    }

    private ContentValues CreateContentValues(String nAME, int bKI, int cKM) {
        // TODO Auto-generated method stub
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, nAME);
        values.put(KEY_BKI, bKI);
        values.put(KEY_CKM, cKM);
        return values;
    }
} 
```

这是 DatabaseHelper.java：

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "ItemInventorydb";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE = "CREATE TABLE inventory (" +
    "_id integer PRIMARY KEY AUTOINCREMENT," +
            "NAME text," +
            "BKI integer," +
            "CKM integer" +
            ");";

    public DatabaseHelper (Context context){
        super(context, DATABASE_NAME,null,DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXIST inventory");
        onCreate(db);

    }
} 
```

这是 DatabaseManageActivity.java：

```
public class DatabaseManageActivity extends Activity {

    private EditText nazwaInput;
    private EditText bkiInput;
    private EditText ckmInput;
    private DatabaseControl dbControl;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wejscie_sesje);
        dbControl = new DatabaseControl(this);
        nazwaInput = (EditText) findViewById(R.id.name);
    }

    public void onClick(View arg){
        String nazwaData = nazwaInput.getText().toString().toLowerCase();
        //String bkiData = bkiInput.getText().toString();
        //String ckmData = ckmInput.getText().toString();
        Dialog notice = new Dialog(this);
        TextView msgBody = new TextView(this);
        msgBody.setTextSize(20);
        long tempVal =0;

        switch (arg.getId()){
        case R.id.addItem:

            try {
                //int bkiDataAsNum =Integer.parseInt(bkiData);
                //int ckmDataAsNum =Integer.parseInt(ckmData);
                int bkiDataAsNum = 3500;
                int ckmDataAsNum = 24;
                dbControl.open();

                if ((tempVal = dbControl.fetchItemByType(nazwaData)) != -1){
                    if(dbControl.updateItem(tempVal, nazwaData, bkiDataAsNum, ckmDataAsNum)){
                        notice.setTitle("Zaktualizowano!");
                        msgBody.setText("Item, który istniał zostal zaktualizowany");
                    }
                    else {
                        notice.setTitle("Aktualizacja zakończona niepowodzeniem");
                        msgBody.setText("Item, ktory istniał nie został zaktualizowany");
                    }
                }
                else {
                    long rowId =0;
                    rowId = dbControl.addItem(nazwaData, bkiDataAsNum, ckmDataAsNum);
                    notice.setTitle("Item umieszczony!");
                    msgBody.setText("Item umieszczony na pozycji" + rowId);
                }
                dbControl.close();
            }
            catch (SQLiteException e) {
                e.printStackTrace();
                notice.setTitle("Umieszczenie zakończone niepowodzeniem !");
                msgBody.setText("Błąd SQL");
            }
            catch (NumberFormatException e) {
                e.printStackTrace();
                notice.setTitle("Umieszczenie zakończone niepowodzeniem!");
                msgBody.setText("Wartość musi być wartością numeryczną!");
        }
        notice.setContentView(msgBody);
        notice.show();
        break;

        case R.id.updateItem:

            try{
                //int bkiDataAsNum =Integer.parseInt(bkiData);
                int bkiDataAsNum = 3500;
                int ckmDataAsNum = 24;
                //int ckmDataAsNum =Integer.parseInt(ckmData);

                dbControl.open();

                if ((tempVal = dbControl.fetchItemByType(nazwaData)) != -1){
                    if(dbControl.updateItem(tempVal, nazwaData, bkiDataAsNum, ckmDataAsNum)){
                        notice.setTitle("Zaktualizowano!");
                        msgBody.setText("Item, zostal zaktualizowany");
                    }
                    else {
                        notice.setTitle("Aktualizacja zakończona niepowodzeniem");
                        msgBody.setText("Aktualizacja zakończona niepowodzeniem, nie znaleziono rekordów");
                    }
                }
                else
                {
                    notice.setTitle("Aktualizacja zakończona niepowodzeniem");
                    msgBody.setText("Item nie został znaleziony!");
                }
                dbControl.close();

    }
            catch (SQLiteException e) {
                e.printStackTrace();
                notice.setTitle("Update zokończony niepowodzeniem!");
                msgBody.setText("Błąd SQL");
            }
            catch (NumberFormatException e) {
                e.printStackTrace();
                notice.setTitle("Update zokończony niepowodzeniem!");
                msgBody.setText("Wartość musi być wartością numeryczną!");
        }
        notice.setContentView(msgBody);
        notice.show();
        break;

        case R.id.deleteItem:

            try{

                dbControl.open();

                if ((tempVal = dbControl.fetchItemByType(nazwaData)) != -1){
                    if(dbControl.deleteItem(tempVal)){
                        notice.setTitle("Usunięto!");
                        msgBody.setText("Item, zostal usunięty");
                    }
                    else {
                        notice.setTitle("Usunięcie zakończone niepowodzeniem");
                        msgBody.setText("Usunięcie zakończone niepowodzeniem, nie znaleziono rekordów");
                    }
                }
                else
                {
                    notice.setTitle("Usunięcie zakończone niepowodzeniem");
                    msgBody.setText("Item nie został znaleziony!");
                }
                dbControl.close();

    }
            catch (SQLiteException e) {
                e.printStackTrace();
                notice.setTitle("Usunięcie zakończone niepowodzeniem!");
                msgBody.setText("Błąd SQL");
            }

        notice.setContentView(msgBody);
        notice.show();
        break;

        case R.id.viewData:
            Intent i = new Intent("android.intent.action.DatabaseViewer");
            startActivity(i);
            break;
            default:
}
    }} 
```

和 DatabaseViewer.java：

```
public class DatabaseViewer extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dataview);
        TextView content = (TextView) findViewById(R.id.dataOutput);
        DatabaseControl control = new DatabaseControl(this);
        String result = "_id\t NAME\t BKI\t CKM \n ";

        try {
            control.open();
            result = result + ""+ control.fetchAllItems();
            control.close();
        }
        catch (SQLiteException e) {
            e.printStackTrace();
        }
        content.setText(result);
    }

} 
```

我不知道出了什么问题...您能帮帮我吗？会很好，如果你会回答，你会使用简单易懂的语言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T19:21:25.330

`fetchItemByType`检查是否返回 true ，`cursor.moveToFirst()`如果不是，则您没有任何数据，您可以返回 -1。我认为`CursorIndexOutOfBoundsException`不会被您的程序捕获，并且`fetchItemByType`函数会返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T06:26:34.023

```
if (cursor!= null && cursor.moveToFirst()){
    while (!cursor.isAfterLast()) {
                        str = String.valueOf(cursor.getInt(1));

                        arrayList.add(str);
                        cursor.moveToNext();
                    }
                    cursor.close();
    } 
```

# c++ - C++ 中的布尔表达式解析和求值

> ID：10573995
> 
> 赞同：0
> 
> 时间：2012-05-13T18:01:45.327
> 
> 标签：c++, boolean, expression, expression-evaluation

我需要在 C++ 中运行时评估简单的布尔函数。这些函数作为字符串从文件中读取。是否有任何可用的库可供我使用？

我调查了[BuDDy](http://drdobbs.com/cpp/184401847)，但听起来它不解析字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:05:22.363

使用 boost 库 (lexical_cast.hpp)

```
bool a = boost::lexical_cast<bool>("true"); //true
bool b = boost::lexical_cast<bool>("0"); //false 
```

或者去这里[num_get facet 和 stringstream 转换为布尔值 - 初始化布尔值失败？](https://stackoverflow.com/questions/3880927/num-get-facet-and-stringstream-conversion-to-boolean-fails-with-initialised-bo)