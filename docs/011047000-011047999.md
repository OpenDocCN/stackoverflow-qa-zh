# StackOverflow 问答 11047000-11047999

# asp.net - 如何防止继承“位置：相对”CSS

> ID：11047004
> 
> 赞同：0
> 
> 时间：2012-06-15T08:18:47.020
> 
> 标签：asp.net, css, positioning, document-body

我的体型如下：

```
*
{
    padding: 0px;
    margin: 0px;
}
html, body
{
    background-color: #006F92;
    position: relative;
    direction: rtl;
    font: 9pt Tahoma, 'b yekan' , 'b homa' , 'arial' , Sans-Serif;
    color: #0061B7;
    height: 100%;
    top: 0px;
    right: 0px;
} 
```

我的身体中有一个字段集，如下所示：

```
<fieldset id="fieldset_From">
    <legend>Web Site Names</legend>
    <asp:Label ID="lblFrom" runat="server" Text="Web Site Names" ForeColor="#00FF5A"></asp:Label>&nbsp;&nbsp;
    <telerik:RadComboBox ID="radcbFrom" runat="server" DataSourceID="sdsFrom_WebSites"
        DataTextField="From_WebSite" DataValueField="ID" EnableEmbeddedSkins="false" Skin="BlackByMe"
        ValidationGroup="A" Width="240px" LoadingMessage="Loading..." CausesValidation="False"
        MaxHeight="150px" AppendDataBoundItems="True">
        <Items>
            <telerik:RadComboBoxItem runat="server" Text="All" Value="-1" />
        </Items>
    </telerik:RadComboBox>
</fieldset> 
```

`position: relative;`Telerik RadComboBox 的滑块在我身上有问题。
我需要身体中的那个定位。
如何防止 RadComboBox Slider 从 body 继承定位？

**编辑：**
呈现 HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
    <title></title>
    <link type="text/css" rel="stylesheet" href="Styles/FromDBTotxt.css">
    <link type="text/css" rel="stylesheet" href="Skins/RadInput_Black/Input.BlackByMe.css">
    <link type="text/css" rel="stylesheet" href="Skins/RadButton_Black/Button.BlackByMe.css">
    <link type="text/css" rel="stylesheet" href="Skins/RadComboBox_Black/ComboBox.BlackByMe.css">
    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
    <link class="Telerik_stylesheet" rel="stylesheet" type="text/css" href="/WebResource.axd?d=1uAw9jPTc2xXMWXZnwFR0WHd9WYjFZAUCOAtuqocex__v5L75EC9QiX_sCH45VnopNjopRnq8rc8IEBb3KEXdWBHUZf74tOouskOPfCOXucUYuXc1IfLchqzXDq1K-fmB_9PfPUmfdjW8QIXDn5ivw2&amp;t=634696541680000000">
    <link class="Telerik_stylesheet" rel="stylesheet" type="text/css" href="/WebResource.axd?d=13iOD6Zoftm8nqRaawCSklC8y9V9g87Y0kr5Ei4P5EElO9xRCq8xhXuPJ30Iwbwg9kiOCjehP62W8g2RapUnp9ZBxIOX0hzU9SVgbYeN9G8djxjjKGLG6WMwLTPG7F3J8Nh0QK_NxEIB1g4ijjLujSVvq2XEv0hC84UsTw08oIA1&amp;t=634696541680000000">
    <link class="Telerik_stylesheet" rel="stylesheet" type="text/css" href="/WebResource.axd?d=gLb4irI44ajzCsQ4ReOSJ8ZiF9XR9XzxjpiDIqOJXuhuP0sPMfnjAXjgO-VY4QblDmgpJh-_WxKIQiMZaQROEdEvLAiN2FXshWze-IJ9IgagNyNeDwXhyzF40PDKNRQGdHL4sKP3uvxWW5RW0EAJDg2&amp;t=634696541680000000">
    <link class="Telerik_stylesheet" rel="stylesheet" type="text/css" href="/WebResource.axd?d=F2aSoEO9Kst6ePwRmXcY64NfoYAv2uqdm1Rp5bXsLh47toZzK4udXXoUY7k8r2SQSP_Sak2wVUyqGRGFlqokdI7N0ryqScecklidHHWXBA2pio3xJ0yNVAArZyR1DmIlXzTPVjUNjsccsZ6LsfyQRQ2&amp;t=634696541680000000">
</head>
<body>
    <form id="form1" action="FromDBTotxt.aspx" method="post">
    <div style="z-index: 6000; visibility: visible; display: none; overflow: hidden;
        margin-left: 0pt; position: absolute; top: 81px; left: 482.5px; height: 121px;
        width: 240px;" class="rcbSlide">
        <div style="display: block; visibility: visible; top: -121px; left: 0px; width: 238px;"
            class="RadComboBoxDropDown RadComboBoxDropDown_BlackByMe  RadComboBoxDropDown_rtl RadComboBoxDropDown_BlackByMe_rtl"
            id="radcbFrom_DropDown" dir="rtl">
            <div style="height: 119px; width: 100%; overflow: auto;" class="rcbScroll rcbWidth">
                <ul style="list-style: none outside none; margin: 0pt; padding: 0pt;" class="rcbList">
                    <li class="rcbHovered ">All</li><li class="rcbItem ">11</li><li class="rcbItem ">aa</li><li
                        class="rcbItem ">bb</li><li class="rcbItem ">bbb</li><li class="rcbItem ">cc</li><li
                            class="rcbItem ">ccc</li></ul>
            </div>
        </div>
    </div>
    <div class="aspNetHidden">
        <input type="hidden" value=";;System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35:en-US:e71d0a15-7471-4384-9905-78bdf2047cba:ea597d4b:b25378d2;Telerik.Web.UI, Version=2012.1.411.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4:en-US:ebfa5361-1bb0-4d72-bf6d-db0befdf104a:16e4e7cd:ed16cbdc:f7645509:24ee1bba:f46195d3:2003d0b8:1e771326:aa288e2d:7165f74"
            id="RadScriptManager1_TSM" name="RadScriptManager1_TSM">
        <input type="hidden" value="" id="__EVENTTARGET" name="__EVENTTARGET">
        <input type="hidden" value="" id="__EVENTARGUMENT" name="__EVENTARGUMENT">
        <input type="hidden" value="" id="__LASTFOCUS" name="__LASTFOCUS">
        <input type="hidden" value="/wEPDwUJMjE1MTIwNjQ4D2QWAgIDD2QWDAIFDw9kDxAWAmYCARYCFgIeDlBhcmFtZXRlclZhbHVlBQItMRYCHwAFB0FsbF9MYW4WAmZmZGQCCQ8PFgIeF0VuYWJsZUFqYXhTa2luUmVuZGVyaW5naGRkAg0PEGRkFgFmZAIPDxAPFgIeC18hRGF0YUJvdW5kZ2QPFgMCAQICAgMWAxAFStin24zZhiDYp9uM2YXbjNmEINmH2Kcg2qnYp9mF2YTYp9mLINmB2LnZkdin2YQg2Ygg2KrYs9iqINi02K/ZhyDZh9iz2KrZhtivBQExZxAFcNin24zZhiDYp9uM2YXbjNmEINmH2Kcg2KrZiNiz2Lcg2KfYs9m+2KfbjNiv2LHZh9inINin2LIg2YjYqCDYs9in24zYqiDZhdix2KjZiNi32Ycg2KzZhdi5INii2YjYsduMINi02K/ZhyDYp9mG2K8FATJnEAVR2KfbjNmGINin24zZhduM2YQg2YfYpyDYqtiz2Kog2LTYr9mHINmG24zYs9iq2YbYryDZiCDYqNin24zYryDYqNix2LHYs9uMINi02YjZhtivBQEzZxYBZmQCEw8UKwACDxYIHhNjYWNoZWRTZWxlY3RlZFZhbHVlZB4EVGV4dAUG2YfZhdmHHwFoHwJnZA8UKwAHFCsAAg8WBh8EBQbZh9mF2YceBVZhbHVlBQItMR4IU2VsZWN0ZWRnZGQUKwACDxYGHwQFAjExHwUFAjExHwZoZGQUKwACDxYGHwQFAmFhHwUFAmFhHwZoZGQUKwACDxYGHwQFAmJiHwUFAmJiHwZoZGQUKwACDxYGHwQFA2JiYh8FBQNiYmIfBmhkZBQrAAIPFgYfBAUCY2MfBQUCY2MfBmhkZBQrAAIPFgYfBAUDY2NjHwUFA2NjYx8GaGRkDxQrAQdmZmZmZmZmFgEFd1RlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94SXRlbSwgVGVsZXJpay5XZWIuVUksIFZlcnNpb249MjAxMi4xLjQxMS40MCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj0xMjFmYWU3ODE2NWJhM2Q0Fg4CAg8PFgYfBAUG2YfZhdmHHwUFAi0xHwZnZGQCAw8PFgYfBAUCMTEfBQUCMTEfBmhkZAIEDw8WBh8EBQJhYR8FBQJhYR8GaGRkAgUPDxYGHwQFAmJiHwUFAmJiHwZoZGQCBg8PFgYfBAUDYmJiHwUFA2JiYh8GaGRkAgcPDxYGHwQFAmNjHwUFAmNjHwZoZGQCCA8PFgYfBAUDY2NjHwUFA2NjYx8GaGRkAhUPPCsABAEADxYCHwFoZGQYAgUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgIFCXJhZGNiRnJvbQUNUmFkYnRuR2V0RmlsZQUJcmFkY2JGcm9tDxQrAAIFBtmH2YXZhwUCLTFkfb9wwPpbUuCpYxSZLLpIHeyHbDPMJzu+qYSO8AdXVyE="
            id="__VIEWSTATE" name="__VIEWSTATE">
    </div>
    <script type="text/javascript">
        //&lt;![CDATA[
        var theForm = document.forms['form1'];
        if (!theForm) {
            theForm = document.form1;
        }
        function __doPostBack(eventTarget, eventArgument) {
            if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                theForm.__EVENTTARGET.value = eventTarget;
                theForm.__EVENTARGUMENT.value = eventArgument;
                theForm.submit();
            }
        }
        //]]&gt;
</script>
    <script type="text/javascript" src="/WebResource.axd?d=cqUgLmRt1PDc02tdUmiePGftPICf3D-48hjRGcwL5K3eLKNuAYv8U2uk3XygxG-ztdx_jATxom9V7sPijlN-xLrorIsalg6DX1qib_8o31o1&amp;t=634602272469974565"></script>
    <script type="text/javascript" src="/Telerik.Web.UI.WebResource.axd?_TSM_HiddenField_=RadScriptManager1_TSM&amp;compress=1&amp;_TSM_CombinedScripts_=%3b%3bSystem.Web.Extensions%2c+Version%3d4.0.0.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d31bf3856ad364e35%3aen-US%3ae71d0a15-7471-4384-9905-78bdf2047cba%3aea597d4b%3ab25378d2%3bTelerik.Web.UI%2c+Version%3d2012.1.411.40%2c+Culture%3dneutral%2c+PublicKeyToken%3d121fae78165ba3d4%3aen-US%3aebfa5361-1bb0-4d72-bf6d-db0befdf104a%3a16e4e7cd%3aed16cbdc%3af7645509%3a24ee1bba%3af46195d3%3a2003d0b8%3a1e771326%3aaa288e2d%3a7165f74"></script>
    <script type="text/javascript">
        //&lt;![CDATA[
        if (typeof (Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
        //]]&gt;
</script>
    <div class="aspNetHidden">
        <input type="hidden" value="/wEWDgLqwvGUDQKX9+fxBwKZstXTDgLY3rqSDQLZ3q6SDQLisZz9AQLGn4b/DgLKn8r8DgLLn8r8DgLIn8r8DgLF8OCSAgLO85mIDQLjnNj8AwLO85mIDb7HcTY/Qfm98Hx8Gq9vgGyvxXOrQPxE9OVxUkyuieEt"
            id="__EVENTVALIDATION" name="__EVENTVALIDATION">
    </div>
    <script type="text/javascript">
        //&lt;![CDATA[
        Sys.WebForms.PageRequestManager._initialize('RadScriptManager1', 'form1', ['tsdsFrom_WebSitesPanel', '', 'tRBL_PriorityPanel', '', 'tradcbFromPanel', '', 'tRBL_LanguagePanel', '', 'tRadAjaxManager1SU', 'RadAjaxManager1SU'], ['RBL_Priority', 'RBL_Priority', 'RBL_Language', 'RBL_Language'], [], 90, '');
        //]]&gt;
</script>
    <div id="sdsFrom_WebSitesPanel" style="display: block;">
    </div>
    <!-- 2012.1.411.40 -->
    <div id="RadAjaxManager1SU" style="display: none;">
        <span style="display: none;" id="RadAjaxManager1"></span>
    </div>
    <div style="display: none;" class="RadAjax RadAjax_Black" id="RadAjaxLoadingPanel1">
        <div class="raDiv">
        </div>
        <div class="raColor raTransp">
        </div>
    </div>
    <div id="OuterDiv">
        <a href="javascript:__doPostBack('lbHome','')" class="Link" id="lbHome">خانه</a>
        <fieldset id="fieldset_From">
            <legend>Wes Site Names</legend><span style="color: rgb(0, 255, 90);" id="lblFrom">
                Wes Site Names</span>&nbsp;&nbsp;
            <div id="radcbFromPanel" style="display: block;">
                <div style="width: 240px;" class="RadComboBox RadComboBox_BlackByMe RadComboBox_rtl RadComboBox_BlackByMe_rtl"
                    id="radcbFrom">
                    <table style="border-width: 0pt; border-collapse: collapse;" summary="combobox" class="">
                        <tbody>
                            <tr class="rcbReadOnly">
                                <td class="rcbInputCell rcbInputCellRight" style="width: 100%;">
                                    <input type="text" readonly="readonly" value="All" id="radcbFrom_Input" class="rcbInput"
                                        name="radcbFrom" autocomplete="off">
                                </td>
                                <td class="rcbArrowCell rcbArrowCellLeft">
                                    <a style="overflow: hidden; display: block; position: relative; outline: medium none;"
                                        id="radcbFrom_Arrow">select</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <input type="hidden" name="radcbFrom_ClientState" id="radcbFrom_ClientState" autocomplete="off">
                </div>
            </div>
        </fieldset>
    </div>
    <script type="text/javascript" language="javascript">
        function pageLoad() {

        }

        //&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;

        $(document).ready(function () {

        });

        //&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
        </script>
    <script type="text/javascript">
        //&lt;![CDATA[
        Sys.Application.add_init(function () {
            $create(Telerik.Web.UI.RadAjaxManager, { "_updatePanels": "", "ajaxSettings": [{ InitControlID: "RBL_Priority", UpdatedControls: [{ ControlID: "sdsFrom_WebSites", PanelID: "" }, { ControlID: "RBL_Priority", PanelID: "" }, { ControlID: "radcbFrom", PanelID: ""}] }, { InitControlID: "RBL_Language", UpdatedControls: [{ ControlID: "sdsFrom_WebSites", PanelID: "" }, { ControlID: "radcbFrom", PanelID: "" }, { ControlID: "RBL_Language", PanelID: ""}]}], "clientEvents": { OnRequestStart: "", OnResponseEnd: "" }, "defaultLoadingPanelID": "", "enableAJAX": true, "enableHistory": false, "links": [], "styles": [], "uniqueID": "RadAjaxManager1", "updatePanelsRenderMode": 0 }, null, null, $get("RadAjaxManager1"));
        });
        Sys.Application.add_init(function () {
            $create(Telerik.Web.UI.RadAjaxLoadingPanel, { "initialDelayTime": 0, "isSticky": false, "minDisplayTime": 0, "skin": "Black", "transparency": 0, "uniqueID": "RadAjaxLoadingPanel1", "zIndex": 90000 }, null, null, $get("RadAjaxLoadingPanel1"));
        });

        WebForm_InitCallback(); Sys.Application.add_init(function () {
            $create(Telerik.Web.UI.RadComboBox, { "_dropDownWidth": 0, "_maxHeight": 150, "_skin": "BlackByMe", "_text": "همه", "_uniqueId": "radcbFrom", "_value": "-1", "clientStateFieldID": "radcbFrom_ClientState", "collapseAnimation": "{\"duration\":450}", "expandAnimation": "{\"duration\":450}", "itemData": [{ "value": "-1", "selected": true }, { "value": "11" }, { "value": "aa" }, { "value": "bb" }, { "value": "bbb" }, { "value": "cc" }, { "value": "ccc"}], "loadingMessage": "در حال لود شدن ...", "localization": "{\"AllItemsCheckedString\":\"All items checked\",\"ItemsCheckedString\":\"items checked\",\"CheckAllString\":\"Check All\"}", "selectedIndex": 0 }, null, null, $get("radcbFrom"));
        });
        Sys.Application.add_init(function () {
            $create(Telerik.Web.UI.RadButton, { "_postBackReference": "", "clientStateFieldID": "RadbtnGetFile_ClientState", "iconData": {}, "imageData": {}, "text": "دریافت فایل", "toggleStatesData": [], "uniqueGroupName": "", "uniqueID": "RadbtnGetFile", "width": "150px" }, null, null, $get("RadbtnGetFile"));
        });
        //]]&gt;
</script>
    </form>
</body>
</html> 
```

和所有 CSS：

```
*
{
    padding: 0px;
    margin: 0px;
}
html, body
{
    background-color: #006F92;
    position: relative;
    direction: rtl;
    font: 9pt Tahoma, 'b yekan' , 'b homa' , 'arial' , Sans-Serif;
    color: #0061B7;
    height: 100%;
    top: 0px;
    right: 0px;
}
input, select, option
{
    font-family: Tahoma, 'b yekan' , 'b homa' , 'arial' , Sans-Serif;
}
#OuterDiv
{
    width: 650px;
    height: 100%;
    margin: 0 auto;
}
#OuterDiv .Link:link, #OuterDiv .Link:visited
{
    color: #00FF12;
}
#OuterDiv .Link:hover, #OuterDiv .Link:active
{
    color: #F0FF00;
}
#lbHome
{
    font: bold 15px tahoma;
    position: absolute;
    top: -15px;
    right: 20px;
    text-decoration: none;
}
fieldset
{
    width: 550px;
    margin: 30px;
    padding: 15px;
}
fieldset legend
{
    color: #00eaff;
    font-weight: bold;
    font-size: 12px;
}
fieldset table label
{
    position: relative;
    top: -2px;
    right: 5px;
}
#radcbFromPanel
{
    display: inline !important;
}
#fieldset_From
{

} 
```

表单元素下的 div 是该 RadComboBox 的滑块。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:22:32.990

您可以使用以下属性将 CSS 类显式添加到自定义控件[`CssClass`](http://msdn.microsoft.com/en-us/library/9wx8w7we)：

```
.static-position {
    position: static;
}

<telerik:RadComboBox ID="radcbFrom" CssClass="static-position" ...>
    ....
</telerik:RadComboBox> 
```

**更新：**我们在评论中找到了具体问题的解决方案。该问题已通过在 周围放置另一个`<div style="position:relative;">...</div>`解决了`lbHome`，这需要相对定位，并从 body 标签的样式中删除该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:23:26.093

将内联样式添加到您的控件以覆盖父样式。

例如：

```
style="position: absolute;" 
```

**其他定位选项包括：**

静态：元素按顺序呈现，就像它们出现在文档流中一样。这是默认设置。

absolute：元素相对于它的第一个定位（非静态）祖先元素定位

固定：元素相对于浏览器窗口定位

relative：元素相对于其正常位置定位，因此“left:20”将元素的 LEFT 位置增加 20 个像素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:24:34.107

我看到了`position : static` [这里](http://www.w3schools.com/cssref/pr_class_position.asp)。希望它会恢复到默认值。

# javascript - 如何从 setInterval() 调用 js 函数

> ID：11047013
> 
> 赞同：1
> 
> 时间：2012-06-15T08:19:21.927
> 
> 标签：javascript, jquery, qtip

目标：我想将以下函数设置为每 5 秒调用一次。使用 qtip。

变量 ALARM_POPUP 通过替换变量内容的 shellscript 每分钟更改一次。

代码：

```
 function popupTXT()

         {

              var ALARM_POPUP="Alarm Warning warning ";

              $('#telecom_1').qtip({content:ALARM_POPUP,style: {name: 'dark', tip: 'topLeft'} });

        }; 
```

我正在使用以下内容来调用计时器。

```
 setInterval("popupTXT()",5000); 
```

结果：这只会在我刷新浏览器时起作用。任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T08:21:08.183

尝试这个：

```
setInterval(popupTXT,5000); 
```

**[只是一个样本](http://jsfiddle.net/QStkd/261/)**

阅读更多关于**[.setInterval()](https://developer.mozilla.org/en/window.setInterval)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T08:41:22.643

> 该变量`ALARM_POPUP`每分钟都会通过一个替换变量内容的 shellscript 更改。

这意味着为了在页面上看到该更改，您必须调用服务器以获取更新的值。你不这样做。

你可以通过[`ajax`](http://api.jquery.com/jQuery.ajax). 创建一个服务器端页面，`ALARM_POPUP`以原始文本（使用`Content-Type: text/plain`）或 JSON（使用`Content-Type: application/json`）的形式输出新值，并触发`ajax`调用以获取该页面的内容，然后`qtip`使用它进行更新。您不希望`setInterval`这样做，因为由于通话时间不确定`ajax`，事情很快就会变得混乱。相反，只需`setTimeout`在前一个周期完成后启动。

假设您创建了一个`updatealarm.xyz`将当前值输出为纯文本的页面（PHP、JSP、ASP.Net 等）`ALARM_POPUP`，它看起来*像*这样：

```
(function()
{
    var ALARM_POPUP="Alarm Warning warning ";

    function updateQtip(popupText)
    {
        $('#telecom_1').qtip({content:popupText,style: {name: 'dark', tip: 'topLeft'} });
        setTimeout(nextUpdate, 5000);
    }

    function nextUpdate()
    {
        $.ajax({
            url: "updatealarm.xyz",
            success: function(data)
            {
                ALARM_POPUP = data; // Although you don't actually need to update it
                updateQtip(data);
            },
            error: function()
            {
                // Do error handling
            }
        });
    }

    updateQtip();

})(); 
```

关于您的原始`setInterval`电话：最好不要将字符串传递给`setInterval`or `setTimeout`; 这基本上是在做一个`eval`，这既不是必要的也不是一个好主意。相反，传递一个函数引用（例如，函数的名称，不`()`调用它），如上。

* * *

在下面回复您的评论：

> 我遇到了这个问题，我想知道您是否提供了一个 php 文件的示例

我只做了一点 PHP，但我相信它会是这样的：

```
<?php
    header('Content-Type: text/plain');
    echo 'This is the message that will end up in \'data\' in the ajax success handler.';
?> 
```

或者，如果您更喜欢使用变量来简化`sed`脚本：

```
<?php
    header('Content-Type: text/plain');
    $alarm_popup = 'This is the message that will end up in \'data\' in the ajax success handler.';
    echo $alarm_popup;
?> 
```

# jquery - 使用 Jquery 获取会话状态

> ID：11047015
> 
> 赞同：0
> 
> 时间：2012-06-15T08:19:24.503
> 
> 标签：jquery, spring-mvc

在我的应用程序中，我会通过每 30 秒执行一次 Ajax 调用来知道会话何时过期，但问题是当我可以控制方法时，HttpSession 刷新和 lastaccessedtime 发生了变化。所以你知道如何知道会话的状态而不改变它的行为吗？我正在使用 Jquery 和 SpringMVC 2.5

```
@RequestMapping(value = "/consultForm.htm", params = "verifySession", method = RequestMethod.GET)
public ModelAndView verifySessionStatus(WebRequest webRequest, Model model, HttpServletRequest request, HttpServletResponse response) {
    boolean isValid = true;
    HttpSession session = request.getSession(false);
    if (session.getAttribute("user") == null) {
        isValid = false;
    }
    ModelAndView modelAndView = new ModelAndView("jsonView");
    model.addAttribute("sessionValid", isValid);
    modelAndView.addObject(model);
    return modelAndView;
}

$.ajax({
    url : "search.htm?verifySession=1",
    type : "GET",
    async : false,
    cache : false,
    success : function(data) {

        valid = data.sessionValid;
        if (!valid) {
            showPopinExpire = true;
            $("#dialog-session-expired").dialog("open");
        }
    },
    error:function (xhr, ajaxOptions, thrownError){
        alert(xhr.status);
        alert(thrownError);
    } 
}); 
```

即使使用`request.isRequestedSessionIdValid()`，每次我调用控制器方法时，会话都会刷新。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:27:30.930

从您的示例中，您似乎需要一个 json 响应，因为您正在执行此操作：

```
valid = data.sessionValid; 
```

它不是**默认值** `dataType`，因此您需要**指定**：

```
$.ajax({
    url : "search.htm?verifySession=1",
    type : "GET",
    async : false,
    cache : false,
    dataType: 'json' // added this
    // your rest of the code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:26:13.690

您可以在 Javascript 中使用计时器来计算会话到期的时间，并注册[ajaxSend](http://api.jquery.com/ajaxSend/)处理程序来重置计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:03:02.580

每次您向服务器发出请求时，会话 lastAccessedTime 都会更新。

您可以做的是每次您想在会话中存储一个自定义变量的时间戳。然后使用您的 ajax，您可以调用控制器的方法来检索存储在您的对象中的自定义时间戳。我建议您使用 AOP 方法来生成您的时间戳。我会少打扰。

祝你好运 ！

# jquery - 选项卡式表单上的 Jquery 验证

> ID：11047016
> 
> 赞同：0
> 
> 时间：2012-06-15T08:19:27.163
> 
> 标签：jquery

我有一个包含 6 个字段的选项卡式表单。单击任何选项卡并且其他选项卡中的字段获取样式时，每个选项卡上都有 3 个字段处于活动状态`display:none`。如何验证具有样式的字段`display:none`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:41:43.487

您需要告诉验证器不要忽略任何内容（隐藏字段，不显示任何字段）。

`ignore:''`会做的。

```
 $("#formId").validate({
        ignore : '',
        rules : {
             ...
        },
        messages : {
            ...
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:23:20.370

如果您只是为了检查元素是否可见，

```
 $(element).is(":visible") or 
        $(element).is(':hidden') or
        $(element).css('display') == 'none' 
```

如果元素是否隐藏，将返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:25:27.107

您可以声明然后使用该函数：

```
jQuery.expr[':'].hiddenByParent = function(a) { 
   return jQuery(a).is(':hidden') && jQuery(a).css('display') != 'none'; 
}; 
```

获取隐藏选项卡中的字段。

# android - 使用 facebook api 从 facebook 获取用户组

> ID：11047025
> 
> 赞同：0
> 
> 时间：2012-06-15T08:20:28.797
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk, facebook-group

我想获取用户组并想列出它们，但我无法从 Facebook 获取组，尽管我可以做到

```
*Successful Login
*fetch friend list 
*i have also allowed the permission user_groups for fetching user groups 
```

在这里我这样做是为了获取用户组

```
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
mAsyncRunner.request("me/groups", params,
                    new GroupsRequestListener());

public class GroupsRequestListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        dialog.cancel();
        Log.v("response", response);
        Intent myIntent = new Intent(getApplicationContext(),
                GroupsList.class);
        myIntent.putExtra("API_RESPONSE", response);
        startActivity(myIntent);
    }

    public void onFacebookError(FacebookError error) {
        dialog.cancel();

        Toast.makeText(getApplicationContext(),
                "Facebook Error: " + error.getMessage(), Toast.LENGTH_SHORT)
                .show();
    }

} 
```

但我得到了回应，日志上是这样的

```
06-15 07:43:19.563: V/response(645): {"error":{"message":"(#100) Unknown fields:    location,birthday","type":"OAuthException","code":100}} 
```

“我/朋友”参数可以用于获取朋友列表。参数“me/groups”是否适合获取用户组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:44:37.123

谢谢@Christoph Eberhardt。在您的帮助下，我得到了解决方案。我做错的是磨损的请求`parameters`。参数应该是

```
Bundle params = new Bundle();
params.putString("fields", "name"); 
```

设置请求参数后，上面的代码完美运行。获取用户组的完整解决方案是

```
//onCreate
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
Bundle params = new Bundle();
params.putString("fields", "name");

mAsyncRunner.request("me/groups", params,
                new GroupsRequestListener());

//then

public class GroupsRequestListener extends BaseRequestListener {

@Override
public void onComplete(final String response, final Object state) {
    dialog.cancel();
    Log.v("response", response);
    Intent myIntent = new Intent(getApplicationContext(),
            GroupsList.class);
    myIntent.putExtra("API_RESPONSE", response);
    startActivity(myIntent);
    }

public void onFacebookError(FacebookError error) {
    dialog.cancel();

    Toast.makeText(getApplicationContext(),
            "Facebook Error: " + error.getMessage(), Toast.LENGTH_SHORT)
            .show();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:29:00.080

错误指向您这边的请求参数错误。在请求好友时，您可以明确请求好友的生日和位置。可能组没有这些属性。

检查您的请求参数，您应该没问题。

# sql - 根据在另一个表中删除的行删除表行

> ID：11047028
> 
> 赞同：1
> 
> 时间：2012-06-15T08:20:39.633
> 
> 标签：sql, postgresql, triggers

我有两张桌子`t1`和`t2`. 我正在以`t2`这种方式删除某些行：

```
delete from t2 where expiry < NOW(); 
```

和有一个`id`共同`t1`的列`t2`。执行上述语句时，我还想删除相应的行（`t1`如果有）（可能没有）。

如何才能做到这一点？
是否可以为这两个操作编写一个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:49:54.670

我看到至少三种好方法 - 取决于您的问题中缺少的更多细节。我以您的示例为基础：

*   `t2`是母桌
*   `t1`孩子

### 1.外[键约束](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-FK)`ON CASCADE DELETE`

试验台：

```
CREATE TABLE t2 (
  id serial PRIMARY KEY  -- primary or unique key needed
, expiry timestamp
);

CREATE TABLE t1 (
  id int references t1(id) ON DELETE CASCADE  -- ON UPDATE CASCADE, too?
); 
```

填充表：

```
INSERT INTO t2(expiry)
SELECT (now() + g * interval '1h')
FROM   generate_series(1, 10) g;   -- 10 arbitrary rows

INSERT INTO t1(id)
SELECT id FROM t2 WHERE id%2 = 0;  -- pick even numbers for t1

SELECT * FROM t1; 
```

如果您从 t2 中删除行，则会自动删除 t1 中的相应行：

```
DELETE FROM t2 WHERE id IN (1,2,3,4,5);
-- rows 2,4 in `t1` are deleted automatically 
```

要将这样的外键约束添加到现有表：

```
ALTER TABLE t1 ADD CONSTRAINT t1_id_fkey FOREIGN KEY (id)
REFERENCES t2 (id) ON DELETE CASCADE; 
```

当然，外键需要唯一的或主键`t1.id`。但是在这样的情况下，您可能会遇到这种情况。

### 2.[触发`AFTER DELETE`](https://www.postgresql.org/docs/current/sql-createtrigger.html)

如果其中的值`t2.id`不是唯一的，或者如果您的值`t1.id`违反了外键约束，则可以改为创建触发器 AFTER DELETE。

触发功能：

```
CREATE OR REPLACE FUNCTION t2_delaft
  RETURNS trigger 
  LANGUAGE plpgsql AS
$func$
BEGIN
   DELETE FROM t1
   WHERE  t1.id = OLD.id;

   RETURN NULL;  -- AFTER trigger can return NULL
END
$func$ 
```

扳机：

```
CREATE TRIGGER delaft
AFTER DELETE ON t2
FOR EACH ROW EXECUTE PROCEDURE t2_delaft(); 
```

您还可以实施[RULE](https://www.postgresql.org/docs/current/sql-createrule.html)。但我发现触发器通常更容易处理。

### 3.[数据修改CTE](https://www.postgresql.org/docs/current/queries-with.html#QUERIES-WITH-MODIFYING)

请原谅我最后给出了最简单的答案。无论如何，这都有效 - 前提是您使用的是 PostgreSQL **9.1 或更高版本**：

```
WITH x AS (
    DELETE FROM t1
    WHERE  id IN (1,2,3,4,5)
    RETURNING id
    )
DELETE FROM t2
USING  x
WHERE  t2.id = x.id; 
```

# ios - 更改分组 UITableView 的背景

> ID：11047029
> 
> 赞同：20
> 
> 时间：2012-06-15T08:20:47.020
> 
> 标签：ios, uitableview

我在尝试使用组更改 UITableView 的背景时遇到了一些麻烦。

```
_tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tableViewBg.png"]]; 
```

这通常适用于所有其他 UITableView，但不适用于带有组的 UITableView，我还有其他事情要做吗？在 IB 中，我将背景颜色设置为清晰的颜色，但这并没有多大作用。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-17T09:28:18.420

您还需要禁用的背景视图`_tableView`：

```
[_tableView setBackgroundView:nil];
 _tableView.backgroundColor = [UIColor redColor]; 
```

无需向 backgroundView 添加新视图。这对我有用`iOS6`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T08:33:33.280

为什么不设置tableView.backgroundView？您可以使用指定的图像分配图像视图并将其传递给背景视图，而不是设置背景颜色。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T08:27:16.010

我通常对分组 UITableViews 所做的是将背景颜色设置为清除，并将该模式​​图像设置为父视图。

```
self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tableBG.png"]];
self.tableView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T02:39:21.863

```
tableView.backgroundView = nil;
tableView.backgroundColor = [UIColor colorWithPatternImage: xxx];
// tableView.backgroundColor = [UIColor redColor];  // is ok 
```

如果您将 backgroundColor 设置为这样，当您滚动 tableView 时，backgroundColor 视图也会滚动。所以，你可以： tableView.backgroundView = nil; self.view.backgroundColor = ...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-21T22:50:21.223

所选答案有效，但它清除了 tableHeaderView 和表格部分标题视图的背景。如果您只希望表格标题具有某种颜色，请说白色和部分标题仍然是默认灰色，而不是执行以下操作 -

```
tableView.tableHeaderView.inputView.backgroundColor = [UIColor whiteColor]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T10:59:58.910

只是想添加到 Nirav 的答案 - 它也可以使用 iOS 5 外观代理来完成。

```
[[UITableView appearance] setBackgroundView:nil];
[[UITableView appearance] setBackgroundColor:[UIColor lightGreyColor]]; 
```

优点是它适用于全局，因此您可以将所有 UI 自定义组合到一个地方。但是，它将适用于所有 tableViews（不仅仅是分组样式）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-06T20:51:29.967

对于**iOS 9+**，更改背景颜色`UITableView`就足够了。

**Objective-C**

```
tableView.backgroundColor = [UIColor redColor]; 
```

**迅速**

```
tableView.backgroundColor = .red 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-14T12:17:15.320

**斯威夫特 4.2**

> > **删除背景视图和颜色**

```
tableView.backgroundView = nil
tableView.backgroundColor = .clear 
```

# c++ - 只是简单的程序，但出了点问题

> ID：11047032
> 
> 赞同：-1
> 
> 时间：2012-06-15T08:20:56.993
> 
> 标签：c++

我有一段非常简单的代码。目标是当我输入四位数字来检查并验证是否可以被 3 整除。

```
 #include <iostream>
     using namespace std;
     int main()
{
     int number;
     cout<<"number: ";
     cin>>number;
     if(number%3==0)
     {
     cout<<"divisible by 3";
     }else{
       cout<<"not divisible by 3";
     }
} 
```

并且不工作。

我真的很抱歉。似乎问题出在Dev ++中。我将删除此线程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T08:24:05.640

你的程序很好。结束输出行`endl`以刷新输出。如果您仍然认为它不起作用，请解释您在做什么，结果是什么，以及您期望结果是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:30:58.880

控制台窗口会立即消失吗？自从我做了一个 C++ 控制台应用程序以来已经有一段时间了，但我记得调试和发布中的行为与窗口在运行后是否关闭有关。

有更好的方法，但为了快速检查，我通常在最后添加一个额外的 cin 以强制程序不退出。

没有返回值`int main()`会在大多数编译器中导致警告，最佳实践是指定类型的返回值，但在这种情况下不会导致错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:26:31.883

您必须乘以该数字的组成数字，然后检查是否可被 3 整除。

编辑：是的，这里也可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T08:26:53.057

尝试插入一个

```
return 0; 
```

就在您结束代码之前，因为您正在使用

```
int main() 
```

或者更确切地说使用

```
void main() 
```

它可以工作。:-)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T08:35:12.583

我想你忘记了一个库：也许是标准库：#include

# python - django 给出一个错误 __init__() 正好需要 3 个参数（1 个给定）

> ID：11047034
> 
> 赞同：1
> 
> 时间：2012-06-15T08:21:06.927
> 
> 标签：python, django, rss, feed

错误在这里：/data/http/cobalt/cards/urls.py in

```
106:    (r'^latest/feed', LatestNews()) ... 
```

这部分 urls.py 抛出错误

```
from django.conf.urls import patterns, url, include
from myproject.feeds import LatestNews

urlpatterns += patterns('',
    # ...
    (r'^latest/feed/$', LatestNews()),
    # ... 
```

)

实际上我已经从[https://docs.djangoproject.com/en/1.1/ref/contrib/syndication/复制了所有代码](https://docs.djangoproject.com/en/1.1/ref/contrib/syndication/)

但他们提供的网址有错误，我无法找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:50:06.037

在 LatestNews 中，您可能正在使用

```
from django.contrib.syndication.feeds import Feed 
```

代替

```
from django.contrib.syndication.views import Feed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:23:51.297

错误必须与`LatestNews`. 您没有传递任何参数，这意味着它将接收一个（对象本身）。`LatestNews`是在该行上构造的唯一对象（URL 是一个简单的元组，它没有固定数量的参数）。

检查`LatestNews`类——它的`__init__()`方法无疑需要三个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:15:50.430

正如您[在此处](https://docs.djangoproject.com/en/1.1/ref/contrib/syndication/#initialization)和[此处](https://docs.djangoproject.com/en/1.1/ref/contrib/syndication/#publishing-atom-and-rss-feeds-in-tandem)看到的，这些提要类并不意味着视图。它们旨在`django.contrib.syndication.views.feed`作为参数传递给视图。

# django - 如何使用 Django-Cumulus 以编程方式将图像保存到 ImageField？

> ID：11047051
> 
> 赞同：1
> 
> 时间：2012-06-15T08:22:06.510
> 
> 标签：django, rackspace-cloud, django-models

我正在使用 Django-Cumulus 将图像存储到 Rackspace 的 Cloudfiles 平台。

我想动态地操作我的图像并将它们保存为我的模型的新 ImageField。例如，我有一个带有以下 ImageField 的 Photo 模型：image、thumb_256x256

在我的 Form 的 save() 方法中，我让用户指定裁剪位置（使用 JCrop）。

无论如何，我知道如何获取用户上传的现有图像文件。我也知道如何使用 PIL 进行操作。我遇到的问题是创建一个新的 Rackspace 文件并写入它。

我不断收到异常“NoSuchObject”。

这是一些示例代码：

```
def save(self, commit=True):
    """ Override the Save method to create a thumbnail of the image. """
    m = super(PhotoUpdateForm, self).save(commit=False)

    image = Image.open(m.image.file)
    image.thumbnail((256,256), Image.ANTIALIAS)
    thumb_io = CloudFilesStorageFile(storage=CLOUDFILES_STORAGE, name='foo/bar/test.jpg')
    image.save(thumb_io.file, format='JPEG') 
```

此外，一旦我到达这一点 - 将此图像设置为模型的其他 ImageField 的最佳方法是什么？（在我的情况下为 m.thumb_256x256）

提前致谢！

更新：我正在使用的实际 Cloudfiles Django 应用程序的名称是“ [django-cumulus](https://github.com/richleland/django-cumulus) ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:08:36.500

这是一个临时解决方案。我在正确设置新文件名时遇到问题。它只是将 _X 附加到文件名。例如，每当我保存新版本时， somefilename.jpg 就会变成 somefilename_1.jpg。

这段代码有点难看，但确实完成了工作。它会创建图像的裁剪版本，并在需要时生成缩略图。

```
def save(self, commit=True):
    """ Override the Save method to create a thumbnail of the image. """
    m = super(PhotoUpdateForm, self).save(commit=False)

    # Cropped Version
    if set(('x1', 'x2', 'y1', 'y2')) <= set(self.cleaned_data):
        box = int(self.cleaned_data['x1']), \
              int(self.cleaned_data['y1']), \
              int(self.cleaned_data['x2']), \
              int(self.cleaned_data['y2'])
        image = Image.open(m.image.file)
        image = image.crop(box)
        temp_file = NamedTemporaryFile(delete=True)
        image.save(temp_file, format="JPEG")
        m.image.save("image.jpg", File(temp_file))
        cropped = True # Let's rebuild the thumbnail

    # 256x256 Thumbnail
    if not m.thumb_256x256 or cropped:
        if not image:
            image = Image.open(m.image.file)
        image.thumbnail((256,256), Image.ANTIALIAS)
        temp_file = NamedTemporaryFile(delete=True)
        image.save(temp_file, format="JPEG")
        m.thumb_256x256.save("thumbnail.jpg", File(temp_file))

    if commit: m.save()
    return m 
```

# android - 设备启动时我的应用程序没有启动？

> ID：11047052
> 
> 赞同：0
> 
> 时间：2012-06-15T08:22:11.290
> 
> 标签：android, boot, autostart

我编写了以下课程来启动我的应用程序活动`Home.class`，但在设备启动时它显示错误**强制关闭**。

```
public class MyBootRecvr extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Intent i = new Intent(context, Home.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        i.addFlags(Intent.FLAG_FROM_BACKGROUND);
        context.startActivity(i);
        Toast.makeText(context, "Where is my KeyBoard", Toast.LENGTH_LONG)
                .show();
    }
} 
```

* * *

**应用程序中的权限和接收者标签。**

* * *

```
<receiver
     android:name=".Home"
     android:enabled="true"
     android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
     <intent-filter>
         <action android:name="android.intent.action.BOOT_COMPLETED" />
         <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
 </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:45:49.587

如果这是您的应用程序中唯一的代码，它将永远不会运行。Android 应用程序必须至少有一个 Activity 子类作为运行应用程序的起点。Activity 至少应该看起来像这样：

```
class MyActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.my_layout); /* my_layout should be an XML layout in res/layout */
    }
} 
```

确保以下代码是您的 AndroidManifest.xml 文件

```
<activity android:name="MyActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

如果您在 Eclipse 中创建一个新的 Android 项目，它将为您完成此设置。有很多关于在 Android 中设置基本应用程序和使用 Eclipse 为您完成的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:16:15.610

这样做可以解决问题，这要归功于 xono

```
<receiver
     android:name=".MyBootRecvr"
     android:enabled="true"
     android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
     <intent-filter>
         <action android:name="android.intent.action.BOOT_COMPLETED" />
         <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
 </receiver> 
```

# php - 按列分组时如何获取数据？

> ID：11047063
> 
> 赞同：-1
> 
> 时间：2012-06-15T08:23:16.353
> 
> 标签：php, joomla

我有一个样本数据：

```
mobile(id, name, os)
      (1, "samsung 1", "android")
      (2, "samsung 2", "android")
      (3, "iPhone 3", "OS")
      (4, "iPhone 4", "OS")
      (5, "samsung 3", "android") 
```

并查询：

```
$db =& JFactory::getDBO(); 
$query = "SELECT id, name, os
          FROM `mobile` order by os";
$db->setQuery($query);        
$rows = $db->loadObjectList(); 
$i=0;
$data = array();
foreach ($rows as $row) {
    if(empty($data[$row->os])) {
        $data[$row->os] = array();
    }
    if(empty($data[$row->os][$row->name])) {
        $data[$row->os][$row->name] = array();
    }
    $data[$row->os][$row->name] = $row->id;
}
<?php foreach ($data as $os => $names) {?>
<li>
    <?php echo $os; ?>
    <ul>
        <?php
        foreach ($names as $name => $id) {
            ?>
            <li>
                <?php echo $name; ?>
            </li>
            <?php
        }
        ?>
    </ul>
</li>               
<?php $i++; }?> 
```

当我运行代码时，结果不会显示在此：

```
android
-samsung 1
-samsung 2
-samsung 3
OS
-iPhone 3
-iPhone 4 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:27:35.197

```
$data[$row->os][$row->name] = $row->id 
```

应该

```
$data[$row->os][$row->id] = $row->name 
```

（并相应地在下面更改）

`$data["android"]["Samsung"]`你继续用`1, 2, 3, 4`;覆盖 按 ID 之类的唯一事物索引，而不是可以重复的名称。

编辑：我看到你初始化`$data[$row->os][$row->id]`为一个数组，但是你用`$row->name`;覆盖该值 而且您不会遍历它；所以没用。这也是一种方式，但效率较低，因为更多不必要的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:17:10.317

改变这个：

```
$data[$row->os][$row->name] = $row->id; 
```

对此：

```
$data[$row->os][$row->name][] = $row->id; 
```

第一个用单个项目替换数组。第二个将一个项目推送到数组上。

# python - python读取ini文件

> ID：11047071
> 
> 赞同：1
> 
> 时间：2012-06-15T08:23:57.117
> 
> 标签：python

使用 python 我想将 Joomla ini 语言文件转换为 sql。然而 joomla ini 文件实际上错过了任何部分（例如：[翻译]）

由于 rawconfigparser 几乎可以完成这项工作，但它需要一个部分，所以我构建了一个临时文件，其中包含一个名为 [ALL] 的“虚拟”部分：

```
 fout = tempfile.NamedTemporaryFile(delete=True)
    fin = file(self._inFilename, "r")
    fout.write("[ALL]\n")
    for f in fin.read():
            fout.write(f)
    config = ConfigParser.RawConfigParser(allow_no_value=True)
    config.read(fout.name)
    for c in config.items("ALL"):
            self._ini2sql(unicode(c[0]).upper(), unicode('de'), unicode(c[1][1:-1])) 
```

但是...这是定义。不是最优雅的解决方案......有什么技巧可以让这个更pythonic吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:31:40.220

您可以使用 StringIO 而不是创建实际文件：

```
from cStringIO import StringIO
import shutil

data = StringIO()
data.write('[ALL]\n')
with open(self._infilename, 'r') as f:
    shutil.copyfileobj(f, data)
data.seek(0)
config.readfp(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:34:06.233

您可以改用[StringIO](http://docs.python.org/library/stringio.html)，它将内容保存在 RAM 中：

```
import cStringIO

fout = cStringIO.StringIO()
fout.write("[ALL]\n")

with open(self._inFilename) as fobj:
    fout.write(fobj.read())
fout.seek(0)

config = ConfigParser.RawConfigParser(allow_no_value=True)
config.readfp(fout) 
```

请注意，与您的代码相比，有一些优化，这对您学习很重要：

1.  始终安全地关闭文件。这是通过`with`语句完成的。
2.  您正在遍历输入的每个字符并编写它。这不是必需的，并且是严重的性能缺陷。

作为一个替代方案，`ConfigParser`我真的会推荐这个[`configobj`](http://www.voidspace.org.uk/python/configobj.html)库，它有一个更干净、更 Python 的 API（并且不需要默认部分）。例子：

```
from configobj import ConfigObj

config = ConfigObj('myConfigFile.ini')
config.get('key1') 
config.get('key2') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T21:35:04.810

读取当前目录中的 .ini 文件

```
import configparser
import os

ini_file = configparser.ConfigParser()
ini_file_path = os.path.join(os.path.dirname(__file__),"filename.ini")
ini_file.read(ini_file_path)  # ini_file as a dictionary
print (ini_file["key1"]) 
```

# c# - Visual Studio“重建全部失败”

> ID：11047079
> 
> 赞同：27
> 
> 时间：2012-06-15T08:24:35.937
> 
> 标签：c#, visual-studio-2010

为什么重建失败且没有错误？

从今天早上开始，这个错误一直出现。我构建了整个解决方案（25 个 C# 托管项目）并出现“重建全部失败”，但没有任何错误！（我有 13 条关于 COM 不支持泛型的警告，但这是“正常的”，因为一个 dll 被公开为 COM。）

![0 错误的屏幕截图](../Images/4eff5b6f995ec2009123fafe48eb177e.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-15T08:29:41.367

本身不是答案 - 但您最好查看输出窗口并查看其中的内容。

此外，为了帮助解决这个问题，您可能需要查看您的 MSBuild 详细程度 - 如此屏幕截图所示（最后两个选项）：

![构建选项 - Visual Studio](../Images/068164cba085b21e38a222f186e2af0b.png)

当心 - 最高级别会产生大量信息。

最后 -`msbuild`在命令提示符下从解决方案文件夹运行将真正解决问题 - 因为错误消息和警告分别以红色和黄色出现。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-08T16:48:15.683

我找到了自己的解决方案，它很简单：

**出现此错误时，保存项目并关闭VS 2013。之后，重新打开VS2013并打开最后一个项目。**

它就像一个魅力。但是每次都很烦！

许多人在VS2010、VS2012和VS2013中报告了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-19T18:39:38.930

可能是损坏的解决方案用户选项文件。

关闭解决方案，删除其 .suo（VS2012+ 为 .v12.suo），重新打开解决方案，Visual Studio 将构建一个新的。您将丢失启动项目、断点、书签、打开的文件、展开的项目/文件夹等。但与未构建的解决方案相比，这一切都微不足道！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-12T15:15:54.713

我有同样的问题。我试图将更高的 .net 框架版本（4.5.2）引用到更低的 .net 框架版本（4.5），这会导致构建错误。我在两个项目中都制作了相同的版本并且它有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T08:26:38.980

您是否尝试过在重新生成之前清洁溶液？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T16:53:19.153

不久前，我通过修复 .NET Framework 安装（在我的情况下为 .NET Framework v4.0 Extended）来修复它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T08:29:10.923

如果我是你，这是我会做的检查和事情的列表（尝试在每个步骤之后构建）：

*   错误列表是否已激活？（有时我忘了激活，我只能看到警告和消息）
*   检查输出窗口是否有错误消息..
*   清洁溶液。
*   清理后仔细检查所有内容是否已从调试文件夹中删除。
*   以发布模式构建它。
*   构建解决方案项目到项目，直到您隔离有问题的项目。
*   删除 COM 和注释代码，看看这是否是问题的根源。
*   重启VS2010。
*   重新启动窗口。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-18T07:22:08.493

我在 VS 2015 中遇到了同样的问题。我尝试了以下但没有成功：

1.  关闭 VS 项目并重新打开
2.  关闭所有打开的 VS 项目并仅重新打开有问题的项目
3.  清洁溶液
4.  重建解决方案
5.  删除 bin\debug 和 bin\release 中的所有文件

最后我尝试[了 Keith Robertson 的回答，](https://stackoverflow.com/a/27572028/241211)删除`.suo`( `\Visual Studio 2015\Projects\[ProjectName]\.vs\[ProjectName]\v14\.suo`)。尽管这并没有让我得到一个好的构建，但它最终确实给了我一条错误消息，指出我的应用程序有两个入口点。我转到应用程序属性（Alt + Enter）并从下拉列表中选择一个 Startup 对象。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-04T11:50:51.113

检查**输出窗口**（查看 -> 输出），因为它会告诉您出了什么问题。有时，可能会缺少引用，或者解决方案中的一个项目的目标 .NET 版本存在问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-01T04:54:47.323

选择合适的目标框架
- 右键单击​​项目
- 属性
- 在应用程序选项卡中，选择目标框架

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-05T22:49:31.370

我只是有同样的事情。对我来说，它有助于重新启动 VS 并以管理员身份运行它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-29T18:09:44.077

我刚刚遇到这种情况，并意识到我在代码中留下了“#error”行并忘记了它。当我尝试构建时，构建失败但#error 行没有出现在我的错误中。

尝试搜索所有“#error”

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-15T08:31:47.607

1.  清洁溶液
2.  尝试构建每个项目，看看问题出在哪里。
3.  检查每个参考（每个项目的）以确保没有黄色警告标志

解决方案是否已构建？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-15T18:25:01.457

我通过转到数据库项目/项目设置并注意到目标平台是 SQL Server 2014 而不是应有的 2012 来修复它在 Visual Studio 2013 的新实现上。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-16T17:46:49.810

解决方案：因为没有为调试设置先决条件，仅用于发布 01-更改解决方案配置（在主屏幕中）设置（调试到发布）将解决方案平台设置为（任何 CPU）02-设置调试的先决条件（如果您想继续调试模式) 03-设置所有项目的目标平台版本

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-24T01:20:20.620

我没有收到任何反馈/消息/错误。只是所有项目都未能建立。

我关闭并再次尝试-我注意到一个错误说“您无权访问...”

我点击了我的帐户，重新输入了我的凭据，然后重新构建了解决方案。

瞧！当我构建一个解决方案时，我得到了我习惯看到的东西——在他们所有的荣耀中都有很多错误。

希望这可以帮助某人。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-29T11:35:37.317

就我而言，这是计算机的错误日期和时间。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-18T14:05:59.290

Some of the files included in your solution are not in the correct directories, or you have changed the name of one or more directories in your application. In the solution explorer under Setup review the list of all files and remove those that are not properly listed in the SourcePath Property.

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-07-22T19:04:37.813

我今天遇到了类似的问题，并通过修复解决了它。

1.  开始
2.  跑…
3.  `Appwiz.cpl`
4.  （查找已安装的 Visual Studio 版本）
5.  右键点击
6.  改变
7.  修理

[![空错误列表的屏幕截图](../Images/bdda7116e5f1f3be9e0a79f3f8d5f25b.png)](https://i.stack.imgur.com/m6mlb.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-02-27T19:21:07.027

我遇到了与原始海报显示相同的问题，错误为 0，重建全部成功。输出选项卡显示一条消息，指出引用的 dll 是使用更高版本的 .NET Framework 构建的。

更改 .NET 框架以匹配解决了我遇到的 0 Errors 和 Rebuild All 成功的问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-09T21:11:32.447

这显然有很多原因。我刚刚找到了我的问题的原因：我创建的新项目的 .NET 版本高于顶级项目的版本。（4.5.2 与 4.0）

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-04-24T19:30:25.327

这个错误对我来说似乎有点笼统。我也经历过这种情况，但我设法以不同于这里提到的任何一种方式来解决它。

我有一个项目和几个依赖项。其中一个依赖项发生了变化。

[![在此处输入图像描述](../Images/f7989f7630064c6a63dbc01428564cd1.png)](https://i.stack.imgur.com/CS7hk.png)

在调试模式下编译主项目时，我验证一切正常。但是，切换到发布模式并重新编译时出现了问题。`Rebuild all failed`和`0 Errors`

[![在此处输入图像描述](../Images/773f9b5250aa9e9ef907bfbf3754b00e.png)](https://i.stack.imgur.com/sFRSi.png)

通过分析调试输出，我遇到了一个错误：

[![在此处输入图像描述](../Images/4c0315d8a02aa9deb439b32e5ba7ef7f.png)](https://i.stack.imgur.com/qR92y.png) [![在此处输入图像描述](../Images/77acdb9e59b90fb3e27319a260f462a3.png)](https://i.stack.imgur.com/Er1ug.png)

尽管构建依赖项配置正确。在发布模式下编译时，主项目没有找到在辅助项目中创建的新方法。所以我不得不在发布模式下一个一个地重新编译每个二级项目。之后，我重新编译了主项目，一切正常。

希望它可以帮助某人！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-10-18T07:19:37.173

这里还有另一个原因，有些人可能听起来很熟悉。我已将一些代码集成到包装 DLL 的解决方案中。随附的 C# 代码文件提供了一个很好的托管 API，并处理了低级 LoadLibrary 的内容以访问 DLL。两者都有相同的基本名称，所以我有 SomeName.cs 和 SomeName.dll。我可以把它放到任何项目中，它会起作用。

一段时间后，这并不是那么好，因为我开始在不同的项目中使用它。我在多个项目中获得了 DLL 和包装器代码的副本。所以我认为最好将包装器代码和 DLL 放入一个新的类库项目中，然后从其他项目中引用该新项目。

完成之后，我开始遇到这个问题。构建进展顺利，直到最后一个阶段，然后没有错误地失败。输出只显示成功。

问题是包装类库项目的名称。我为此使用了相同的基本名称（SomeName）。默认情况下，程序集名称为 SomeName.dll 并且我已经有一个这样的文件（要包装的 DLL），因此我与输出文件发生冲突。

将包装项目及其输出程序集重命名为 SomeNameWrapper 后，问题就消失了。

这可能不是您的确切原因，但您似乎也有一些名称冲突或部署问题。编译器不会给你一个错误也就不足为奇了，因为在编译阶段没有问题，问题从部署开始，显然这并没有以明显的方式出现。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-05-11T12:40:14.637

一旦出现此错误的机会是当我们尝试重新命名服务引用名称时，我们会在服务引用中提供一些其他名称，但在命名空间中它将引用旧名称，因此如果您删除并添加服务引用然后保持相同的名称，否则我们可能会遇到此错误，但我们可以在输出窗口中看到错误。

# android - sharedpreferences 使所有变量都相同

> ID：11047084
> 
> 赞同：1
> 
> 时间：2012-06-15T08:25:04.967
> 
> 标签：android, sharedpreferences

我正在使用共享首选项来保存 3 个字符串字段。我每次都在另一个类中使用以下代码打开共享首选项。我通过一个函数调用这个类来保存它。

```
mPrefs=context.getSharedPreferences(id, Context.MODE_PRIVATE); 
```

这样做之后，我保存了 3 个字段，即一个人的 id、name 和 surname。保存过程成功。我将所有这 3 个变量都保存在一个名为 person 的对象中。我可以从共享内存中获取信息。当我得到第一个人的信息时，我可以做到。我正在把它写到日志。它是成功的。但是在使用第二人称的 id 获得第二人称信息后，第一人称对象也是第二人称。共享首选项将所有变量分配给相同的值。

任何帮助将不胜感激。谢谢

**编辑**

```
personGet.setId(mPrefs.getString("id", null)); 
personGet.setName(mPrefs.getString("name", null)); 
personGet.setSurname(mPrefs.getString("surname", null)); 
// This is for saving to shared preferences. 

mPrefs = context.getSharedPreferences(person.getId(), Context.MODE_PRIVATE);
SharedPreferences.Editor editor = mPrefs.edit(); 
editor.putString("name", person.getName()); 
editor.putString("surname", person.getSurname()); 
editor.putString("id", person.getId()); 
// This is for saving. the "id" is unique for all users – 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:51:20.173

SharedPreferences 只是[键值对的映射](http://developer.android.com/reference/java/util/Map.html)

是的，这会将您的 id 保存在“id”键下：

```
 editor.putString("id", "abc"); 
```

但是这样做会覆盖它，因为键“id”是相同的：

```
 editor.putString("id", "zxy"); 
```

因此，当您询问 sharedPreference “id”时，您将得到

```
 zxy 
```

*编辑*

不要忘记调用 commit(); 在你的共同偏好上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:49:39.877

当我们从偏好中获取数据时，我们这样写

```
 personGet.setId(mPrefs.getString("id", "")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:59:17.923

当您在共享首选项中编辑或保存某些内容时，您需要调用“commit()”。会是这样，

```
mPrefs = context.getSharedPreferences(person.getId(), Context.MODE_PRIVATE); 
```

SharedPreferences.Editor 编辑器 = mPrefs.edit();

editor.putString("name", person.getName()).commit();

# python - Python完整路径导入不适用于包树中的分支

> ID：11047086
> 
> 赞同：0
> 
> 时间：2012-06-15T08:25:19.900
> 
> 标签：python, jython, jython-2.5

我有以下项目结构：

```
Project
  - GUI
    - ...Modules
  - Data
    - Database
      - ...Modules
    - Files
      - ...Modules
  - Utilities
    - ...Modules 
```

我正在尝试通过包边界进行一些导入，例如：

在文件（模块）中，`Project.Database.dbdriver`我尝试导入`Project.Utilities.Conversions`. 如果我使用像`import Project.Utilities.Conversions`这样的完全指定的导入失败，它适用于`import Utilities.Conversions`，即我不能指定更多的路径而不是那些不同的部分。但是我想使用完全指定的路径，一个原因是 Eclipse 中的 pydev 更喜欢它们（否则它会显示一个错误），第二个原因是我觉得不这样做会令人困惑。

我偶然发现了这一点，但认为这是错误的/这里不需要[如何在 Python 中创建命名空间包？](https://stackoverflow.com/questions/1675734/how-do-i-create-a-namespace-package-in-python)

**问题：**如何在包结构中交叉子分支时使用完全指定的包含？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:20:24.450

完全指定的导入失败，因为 python（或 jython）的当前工作目录设置为 Project。你可以：

将 Project 的父目录添加到您的 python 库中

```
import sys
sys.path.append('/parent/of/project') 
```

或者只是在调试设置中将jython的工作目录更改为Project的父级。（我不知道该怎么做，因为我不使用pydev。）

# jquery - 如何使用插件显示 6 张而不是 3 张幻灯片进行幻灯片放映

> ID：11047090
> 
> 赞同：-2
> 
> 时间：2012-06-15T08:25:33.470
> 
> 标签：jquery, asp.net

如何为选项卡的[幻灯片放映](http://www.jquerytools.org/demos/tabs/slideshow.html)插件显示更多 3 张幻灯片（=6）？默认设置只给我 3 张幻灯片，但我需要 6 张。

我的代码是：

```
$(function () {

        $(".slidetabs").tabs(".images > div", {

            // enable "cross-fading" effect
            effect: 'fade',
            fadeOutSpeed: "slow",

            // start from the beginning after the last tab
            rotate: true,

            // use the slideshow plugin. It accepts its own configuration
        }).slideshow({ clickable: false });
    }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:50:24.183

如果我正确理解您的问题，您想要的是能够显示 6 张幻灯片，而不是插件显示为标准的 3 张幻灯片。

如果这是一个案例，它是一个简单的 HTML 更改。

目前代码如下：

```
 <!-- container for the slides -->
   <div class="images">

     <!-- first slide -->
     <div>Lorem ipsum ..</div>

      <!-- second slide -->
     <div>Lorem ipsum ..</div>

     <!-- third slide -->
     <div>Lorem ipsum ..</div>

    </div> 
```

您只需将其更改为以下内容：

```
 <!-- first slide -->
     <div>Lorem ipsum ..</div>

      <!-- second slide -->
     <div>Lorem ipsum ..</div>

     <!-- third slide -->
     <div>Lorem ipsum ..</div>

     <!-- fourth slide -->
     <div>Lorem ipsum ..</div>

      <!-- fifth slide -->
     <div>Lorem ipsum ..</div>

     <!-- sixth slide -->
     <div>Lorem ipsum ..</div>

    </div> 
```

您还需要再添加三个 a href：

```
 <div class="slidetabs">
       <a href="#"></a>
       <a href="#"></a>
       <a href="#"></a>
       <a href="#"></a>
       <a href="#"></a>
       <a href="#"></a>
    </div> 
```

希望这可以帮助。

# c++ - Informix 错误后进程崩溃

> ID：11047091
> 
> 赞同：1
> 
> 时间：2012-06-15T08:25:42.787
> 
> 标签：c++, informix, coredump

我有一个 C++ 进程不时崩溃（主要是在完成性能测试时）。当我检查核心日志时，我可以在崩溃之前看到很多 Informix 错误。

`Out of Memory`在进程核心转储之前，我看到一系列与异常相关的错误代码 406 的 Informix 错误。我还看到错误代码 244（无法进行物理顺序读取以获取下一行）。

有人可以分享您对这些场景如何导致进程核心转储的想法吗？

**更多细节**

进程：多线程 C++ 进程
环境：Solaris
数据库：带有 ESQL 接口的 Informix

ESQL DB 函数（插入/更新/选择）正在抛出，被进程捕获。catch 块中的消息是进程日志中出现的最后一条消息。之后就没有关于这个过程的线索了。

进程核心转储时出现的正常消息（`Caught signal. dumped core`）也丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:34:58.783

当你说`during performance testing`那里时，你有一个巨大的线索！！！！！！！

通常，对于性能测试用例，编译器优化会加速，导致一些写得不太好的代码短路，从而导致崩溃。

给你一个典型的例子：当变量应该被跨线程读取时，它们没有被声明为 volatile。

# java - 获取 javax.net.ssl.SSLHandshakeException：收到致命警报：handshake_failure 错误

> ID：11047100
> 
> 赞同：1
> 
> 时间：2012-06-15T08:26:25.780
> 
> 标签：java, ssl, apple-push-notifications

我正在尝试使用 Java-pns 向 iPhone 发送推送通知，但出现以下错误 - **javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure**

我的代码是 -

```
String token="95076d2846e8979b46efd1884206a590d99d0f3f6139d947635ac4186cdc5942";
String host = "gateway.sandbox.push.apple.com";
int port = 2195;
String payload = "{\"aps\":{\"alert\":\"Message from Java o_O\"}}";

NotificationTest.verifyKeystore("res/myFile.p12", "password", false);
KeyStore keyStore = KeyStore.getInstance("PKCS12");
keyStore.load(getClass().getResourceAsStream("res/myFile.p12"), "password".toCharArray());

KeyManagerFactory keyMgrFactory = KeyManagerFactory.getInstance("SunX509");
keyMgrFactory.init(keyStore, "password".toCharArray());

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(keyMgrFactory.getKeyManagers(), null, null);
SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();

SSLSocket sslSocket = (SSLSocket) sslSocketFactory.createSocket(host, port);
String[] cipherSuites = sslSocket.getSupportedCipherSuites();
sslSocket.setEnabledCipherSuites(cipherSuites);
sslSocket.startHandshake();

char[] t = token.toCharArray();
byte[] b = Hex.decodeHex(t);

OutputStream outputstream = sslSocket.getOutputStream();

outputstream.write(0);
outputstream.write(0);
outputstream.write(32);
outputstream.write(b);
outputstream.write(0);
outputstream.write(payload.length());
outputstream.write(payload.getBytes());

outputstream.flush();
outputstream.close();

System.out.println("Message sent .... "); 
```

对于**NotificationTest.verifyKeystore** ，我知道这个有效的是文件和密钥库。

我不明白为什么会收到此错误。

请问有人可以帮助我吗？

提前致谢 ...

在我的日志中，我看到了

** 证书请求

证书类型：RSA、DSS、ECDSA

证书颁发机构：

[阅读] MD5 和 SHA1 哈希：len = 10

0000: 0D 00 00 06 03 01 02 40 00 00 ....@..

** 服务器HelloDone

[阅读] MD5 和 SHA1 哈希：len = 4

0000: 0E 00 00 00 ....

** 证书链

**

** ClientKeyExchange、RSA PreMasterSecret、TLSv1

[写入] MD5 和 SHA1 哈希：len = 269

.

.

.

.

.

主要，阅读：TLSv1 警报，长度 = 2

主要，RECV TLSv1 ALERT：致命，handshake_failure

主要的，称为 closeSocket()

主要，处理异常：javax.net.ssl.SSLHandshakeException：收到致命警报：handshake_failure

我不明白为什么**Cert Authorities:**是空的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:02:26.850

无法在没有看到堆栈跟踪以及运行客户端或服务器时产生的输出的情况下回答`-Djavax.net.debug=ssl,handshake.`但是：

> String[] cipherSuites = sslSocket.getSupportedCipherSuites(); sslSocket.setEnabledCipherSuites(cipherSuites);

不要那样做。它根本不安全，它只是隐藏了真正的问题，这几乎总是一个证书信任链问题：要么客户端不信任服务器的证书，反之亦然。

# public-key-encryption - 如何获取网页的公钥？

> ID：11047103
> 
> 赞同：9
> 
> 时间：2012-06-15T08:26:39.240
> 
> 标签：public-key-encryption, public-key

如何获取 VeriSign 等网站和所有其他使用 https（安全协议）的网站的公钥？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T22:01:19.273

这取决于您使用的浏览器，如果您让我知道，我会更新我的答案。

**Chrome 55 及更高版本**您现在可以在开发者工具中找到此信息。选项（3 个点） -> 更多工具 -> 开发人员工具，或按 F12，然后单击“安全”选项卡，您将获得带有“查看证书”按钮的“安全概述”。根据Chrome 60[的另一篇 SO 帖子](https://superuser.com/questions/1160502/how-to-view-ssl-certificate-details-on-chrome)，如果您转到`chrome://flags/#show-cert-link`.

**Chrome 54 及以下版本：**如果您使用的是 Chrome，请单击地址栏中“https：”左侧的绿色栏，对于 VeriSign 网站，绿色栏显示`Symantec Corperation [US]`，这将打开一个弹出窗口。在弹出窗口中单击“证书信息”。这将打开另一个弹出窗口。在此转到顶部的“详细信息”选项卡并向下滚动到“公钥”，它显示了网站用于其 SSL 的公钥。在 VeriSign 的情况下，公钥是 2048 位密钥。

![铬 https](../Images/0c5dff04fb580b580be2a8761ab5e8b6.png)

**IE：**要点击的绿条在网址的右边。点击它会弹出一个类似的弹出窗口，您必须点击“查看证书”，然后弹出与 Chrome 相同的弹出窗口，您可以在其中转到“详细信息”选项卡并向下滚动到“公钥”

![在此处输入图像描述](../Images/d7eeae99472e75325f60afb9ac69f25b.png)

这是单击“证书信息”或“查看证书”链接后打开的弹出窗口。

![在此处输入图像描述](../Images/a8abeb25b42cbc12f7f86e0f07009395.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T08:45:10.003

在 Chrome 中，您可以通过开发人员工具（Windows 中的 F12）或在菜单中选择它（菜单 -> 更多工具 -> 开发人员工具）。

然后您需要做的就是选择安全选项卡，这里有您需要的所有信息。

[![在此处输入图像描述](../Images/9314697665034a19c2c9f0403a6bd2d8.png)](https://i.stack.imgur.com/dcGDE.png)

仅单击安全弹出窗口不再起作用。

# python - 懒加载字典

> ID：11047105
> 
> 赞同：2
> 
> 时间：2012-06-15T08:26:39.810
> 
> 标签：python

我有一个`fsdata`在模块级别调用的字典（如全局变量）。

从文件系统中读取内容。它应该在第一次访问时加载一次数据。到目前为止，它在导入模块期间加载数据。这应该被优化。

如果没有代码访问`fsdata`，则不应从文件系统中读取内容（节省 CPU/IO）。

如果您也检查布尔值，则应该进行加载：

```
if mymodule.fsdata:
    ... do_something() 
```

更新：一些代码已经使用了 mymodule.fsdata。我不想改变其他地方。它应该是变量，而不是函数。并且“mymodule”必须是一个模块，因为它已经在很多代码中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:34:53.470

我认为您应该像这样使用 Future/Promise [https://gist.github.com/2935416](https://gist.github.com/2935416)

要点 - 你创建的不是一个对象，而是一个关于对象的“承诺”，它的行为就像一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:44:15.827

您可以将模块替换为`object`具有描述符语义的模块：

```
class FooModule(object):
    @property
    def bar(self):
        print "get"
import sys
sys.modules[__name__] = FooModule() 
```

查看[http://pypi.python.org/pypi/apipkg](http://pypi.python.org/pypi/apipkg)以了解打包方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:35:26.897

您可以创建一个简单的函数来记忆数据：

```
fsdata = []

def get_fsdata:
    if not fsdata:
        fsdata.append(load_fsdata_from_file())
    return fsdata[0] 
```

（我正在使用列表，因为这是一种使变量成为全局变量而无需使用 global 关键字的简单方法）。

现在，`module.fsdata`您可以直接调用`module.get_fsdata()`.

# c# - 在 DataTemplate 中绑定项目

> ID：11047107
> 
> 赞同：1
> 
> 时间：2012-06-15T08:27:01.693
> 
> 标签：c#, wpf

在我的 xaml 文件中，我有：

```
<DataTemplate DataType="{x:Type Configuration:Drivers}">
    <ItemsControl ItemsSource="{Binding Cars}" FontWeight="Normal" />   
<DataTemplate>

<DataTemplate DataType="{x:Type Configuration:Car}">
    <UniformGrid HorizontalAlignment="Stretch" Margin="5,1,5,2" Columns="2">                                              
         <CheckBox IsChecked="{Binding Enabled, UpdateSourceTrigger=PropertyChanged}"/>    
         <CheckBox Visibility="{Binding SaveImage, UpdateSourceTrigger=PropertyChanged}"/>
    </UniformGrid>      
</DataTemplate> 
```

对于每辆车，它都有： Enabled 属性，但没有 SaveImage 属性。

```
Car
{
   public bool Enabled {}
} 
```

'SaveImage' 是全局设置的。我不知道如何绑定：DataTemplate 中的 bool SaveImage？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:08:28.517

`DataTemplates`是一个封装边界，因此您不能总是使用它`FindAncestor`来获取所需的数据。一个好的解决方案是将您`ViewModel`的 XAML 作为 a`StaticResource`然后将`DataContext`您的`LayoutRoot`网格设置为 this `StaticResource`，然后所有其他 DataTemplates 都可以`DataContext`通过相同的方式访问`StaticResource`

**例子**

```
<Window.Resources>
    <local:MyViewModel x:Key="viewmodel" />
    <DataTemplate DataType="{x:Type Configuration:Car}">
        <UniformGrid HorizontalAlignment="Stretch" Margin="5,1,5,2" Columns="2">
            <CheckBox IsChecked="{Binding Enabled, UpdateSourceTrigger=PropertyChanged}"/>
            <CheckBox Visibility="{Binding Source={StaticResource viewmodel}, 
                Path=SaveImage, UpdateSourceTrigger=PropertyChanged}"/>
        </UniformGrid>
    </DataTemplate>
</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource viewmodel}}">

</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:34:00.197

如果`SaveImage`在 中可用，`DataContext`您`ItemsControl`可以通过这种方式绑定到它：

```
<CheckBox IsChecked="{Binding DataContext.SaveImage, UpdateSourceTrigger=PropertyChanged,
RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:41:51.830

解决方案1：可以尝试RelativeSource将IsCheck绑定到abcestor对象。

```
{Binding Path=SaveImage, RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}} 
```

解决方案2：将属性SaveImage添加到视图模型类Car并引用模型SaveImage。这不是一个好的解决方案。

# reporting-services - 动态矩阵宽度始终等于图表宽度

> ID：11047111
> 
> 赞同：2
> 
> 时间：2012-06-15T08:27:12.733
> 
> 标签：reporting-services, ssrs-2008, ssrs-expression

SSRS 中的大多数事情都是动态的，即您可以为大多数格式创建自定义表达式。

我有一份带有矩阵工具的报告。该矩阵的宽度将根据包含的列数而有所不同。

矩阵上方是一个图表。

如何使列宽动态化，使其始终与矩阵宽度相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:14:20.390

对不起，但这**是不可能的**。不能用表达式设置矩阵中的列宽：

> 问：是否可以在运行时设置列的宽度属性？
> 答：这是一个常见的请求，我肯定看到其中的值。但是，对于 SSRS 2008，我们没有做到这一点。

[来源 social.msdn](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/9e6043f1-c458-4540-be59-d37b02feab8a/)

* * *

一种可能适合您的替代方法是改变图表的宽度，因为它们确实具有[动态高度](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.rdlobjectmodel.chart.dynamicheight%28v=sql.105%29.aspx)和[动态宽度](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.rdlobjectmodel.chart.dynamicwidth%28v=sql.105%29.aspx)的属性（另请参阅[这篇博文](http://blogs.msdn.com/b/robertbruckner/archive/2008/10/27/charts-with-dynamic-size-based-on-categories-or-data.aspx)）。请注意，这仅在 SSRS-2008 及更高版本中可用。

其他替代方案将更加“繁重”，包括为 RDL 动态生成（或编辑）XML。解决方法将包括隐藏多余的列（可以动态设置可见性）

# java - com.impetus.kundera.metadata.KunderaMetadataManager - 找不到该类的实体元数据

> ID：11047113
> 
> 赞同：1
> 
> 时间：2012-06-15T08:27:19.103
> 
> 标签：java, hibernate, persistence, cassandra, kundera

我正在尝试在我的 Cassandra DB 和 Kundera（Cassandra ORM）中使用查询，这个查询在其他项目中工作但是当我尝试在 webapp 中执行它（使用 tomcat 6.0）时，我收到了这个错误：

```
com.impetus.kundera.metadata.KunderaMetadataManager  - No Entity metadata found for the class 
```

=> JavaNullPointerException。

但是当我从我的项目中离开persistence.xml 时，我遇到了另一个错误。（找到 NoPersistence.xml 什么的……）

所以，我的项目找到了 Persistence.xml，但没有找到我的实体类：fileCassandra。

你可以看到我的 persistence.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <!--  192.168.3.107 -->
    <persistence-unit name="cassandra_pu">
        <provider>com.impetus.kundera.KunderaPersistence</provider>     
        <class>net.***.common.db.***.FileCassandra</class>

        <properties>            
            <property name="kundera.nodes" value="localhost"/>
            <property name="kundera.port" value="9160"/>
            <property name="kundera.keyspace" value="KunderaExamples"/>
            <property name="kundera.dialect" value="cassandra"/>
            <property name="kundera.client.lookup.class" value="com.impetus.client.cassandra.pelops.PelopsClientFactory" />
            <property name="kundera.cache.provider.class" value="com.impetus.kundera.cache.ehcache.EhCacheProvider"/>
            <!-- <property name="kundera.cache.config.resource" value="/ehcache-test.xml"/>    -->           
        </properties>
       </persistence-unit>
</persistence> 
```

网。***.common.db。***.FileCassandra 我必须用***替换，因为它是我公司的名称；）

# c# - 将 .net System.Int32[] 转换为 matlab 矩阵

> ID：11047114
> 
> 赞同：4
> 
> 时间：2012-06-15T08:27:20.010
> 
> 标签：c#, matlab

我已将 C# dll 开发为具有返回通用列表的方法的程序集 - `List<T>`. 我从 Matlab 调用此方法并将返回值作为`System.Int32[]`.

如何将此类型转换为 Matlab 矩阵（或单元格）以便在 Matlab 中更自由地使用它？

更好的是，如果它被 Matlab 调用，我可以让 dll 自动返回“Matlab 样式”数组吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T07:40:58.557

假设我们有以下类型的数组`System.Int32[]`（由 C# 函数返回）：

```
arr = NET.createArray('System.Int32',5);
for i=1:5
    arr.Set(i-1, i);
end 
```

现在要转换为 MATLAB 矩阵，我们可以简单地执行以下操作：

```
M = double(arr) 
```

或更具体：

```
M = int32(arr) 
```

结果：

```
>> whos
  Name      Size            Bytes  Class             Attributes

  M         1x5                20  int32                       
  arr       1x1                60  System.Int32[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:33:26.793

MATLAB Builder NE 插件有望解决您的问题。试试看。

# apache - 如何让 Solr Suggester 也返回拼写建议

> ID：11047119
> 
> 赞同：10
> 
> 时间：2012-06-15T08:27:42.507
> 
> 标签：apache, solr, autosuggest

我目前正在将 Apache Solr 搜索集成到我的平台中，并使用 Suggester 功能进行自动完成。但是，Suggester 模块也不返回拼写建议，例如，如果我搜索：

```
shi 
```

建议模块返回以下内容：

```
shirt
shirts 
```

但是，如果我搜索：

```
shrt 
```

不返回任何建议。我想知道的是：

a) 是否是导致此问题的 Suggester 模块配置不正确？b) Suggester 模块是否以不返回拼写建议的方式构建？c) 我怎样才能让 Suggester 模块也返回拼写建议，而不必再次请求拼写更正建议？

我已经阅读了 Solr 文档，但似乎无法在这方面取得进展。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T08:57:26.397

您需要配置拼写检查组件以生成备用拼写选项，如[https://lucene.apache.org/solr/guide/8_1/spell-checking.html中所述](https://lucene.apache.org/solr/guide/8_1/spell-checking.html)

该任务包括以下步骤：

首先，`schema.xml`使用拼写检查字段更新 。这通常意味着创建一个新字段并将多个字段复制到一个`spellcheck`字段：

```
<field name="spellcheck" type="text_general" 
   indexed="true" 
   stored="false" 
   multiValued="true"/>

<copyField source="id" dest="spellcheck"/>
<copyField source="name" dest="spellcheck"/>
<copyField source="description" dest="spellcheck"/>
<copyField source="longdescription" dest="spellcheck"/>
<copyField source="category" dest="spellcheck"/>
<copyField source="source" dest="spellcheck"/>
<copyField source="merchant" dest="spellcheck"/>
<copyField source="contact" dest="spellcheck"/> 
```

在`solrconfig.xml`更新您的请求处理程序并创建一个`solr.SpellCheckComponent`并将其添加到您的搜索处理程序中。

```
 <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
      <lst name="spellchecker">
        <!-- decide between dictionary based vs index based spelling suggestions, 
        in most cases it makes sense to use index based spell checker
        as it only generates terms which are 
        actually present in your search corpus -->
        <str name="classname">solr.IndexBasedSpellChecker</str>
        <!-- field to use -->
        <str name="field">spellcheck</str>
        <!-- buildOnCommit|buildOnOptimize -->
        <str name="buildOnCommit">true</str>
        <!-- $solr.solr.home/data/spellchecker-->
        <str name="spellcheckIndexDir">./spellchecker</str>
        <str name="accuracy">0.7</str>
        <float name="thresholdTokenFrequency">.0001</float>
      </lst>
    </searchComponent>

    <requestHandler name="/select" class="solr.SearchHandler">
      <lst name="defaults">
        <str name="echoParams">explicit</str>
        <int name="rows">10</int>
        <str name="df">defaultSearchField</str>
        <!-- spell check component configuration -->
        <str name="spellcheck">true</str>
        <str name="spellcheck.count">5</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck.maxCollationTries">5</str>
      </lst>
      <!-- add spell check processing after 
        the default search component. This is 
        the search component name. -->
      <arr name="last-components">
        <str>spellcheck</str>
      </arr>
    </requestHandler> 
```

*   重新索引语料库

*   测试建议正在发挥作用。例如，

[http://localhost:8983/solr/select/?q=coachin](http://localhost:8983/solr/select/?q=coachin)

```
{
  "responseHeader": {
    "status": 0,
    "QTime": 12,
    "params": {
      "indent": "true",
      "q": "coachin"
    }
  },
  "response": {
    "numFound": 0,
    "start": 0,
    "docs": []
  },
  "spellcheck": {
    "suggestions": [
      "coachin", {
        "numFound": 1,
        "startOffset": 0,
        "endOffset": 7,
        "suggestion": ["cochin"]
      }
    ]
  }
} 
```

# java - 后续运行程序时如何保存和重新加载 JTree？

> ID：11047120
> 
> 赞同：2
> 
> 时间：2012-06-15T08:27:50.113
> 
> 标签：java, swing, jtree

我们已经编写了`JTree`可以动态添加和删除节点的代码。

但是，我们无法拯救这棵树。每次我们运行程序，我们都无法得到之前创建的树。

如何`JTree`保存和加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:08:13.133

您可以[序列化/反序列化](http://docs.oracle.com/javase/7/docs/technotes/guides/serialization/)您的 JTree，这是一个示例：

```
 JTree tree=new JTree();

   ....

   //serialization
    try{
        FileOutputStream file= new FileOutputStream("/home/alain/Bureau/serialisation.txt");
        ObjectOutputStream out = new ObjectOutputStream(file);
        out.writeObject(tree);
    }
    catch(Exception e){}
    //Deserialization
    JTree tree2=null;
    try{
        FileInputStream file= new FileInputStream("/home/alain/Bureau/serialisation.txt");
        ObjectInputStream in = new ObjectInputStream(file);
        tree2 = (JTree) in.readObject();
    }
    catch(Exception e){} 
```

请注意，[`transient`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.3)字段不可序列化，因此**您还应该序列化您的 TreeModel**。

# android - Mifare Plus 与 Mifare DESfire (Android)

> ID：11047121
> 
> 赞同：2
> 
> 时间：2012-06-15T08:27:57.663
> 
> 标签：android, security, nfc, mifare

除了 NXP 网站上显示的有关 mifare plus 和 mifare desfire 的内容外，考虑以下因素：

1.  安全
2.  阅读速度
3.  当用铁氧体层粘上以便可以粘在手机上时，哪个更好？
4.  未来，如果我们想进行支付，首选什么？
5.  nfc 标签贴纸的尺寸将是 35 毫米直径，这有什么不同吗？使用的标签是什么？
6.  标签将与插入 Android 设备的 nfc 阅读器进行交互。从 android POV，哪个更好？为了便于开发和更多功能，哪个更合适？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T22:12:46.093

MIFARE Plus 的真正意义在于升级现有的基于 MIFARE Classic 的系统。它具有向后兼容 MIAFRE CLassic 的模式。它具有与 MIFARE Classic 相同的固定内存结构：扇区具有 3 个 16 字节数据块和一个用于 2 个访问控制键的块。它不符合 ISO 14443-4 标准。

MIFARE DESFire 具有灵活的内存结构：最多 28 个“应用程序”（一种操作目录），每个最多 32 个文件。访问控制也非常灵活。它符合 ISO 14443-4 标准，并且可以以符合 ISO 7816-4 标准的模式进行通信。它可以配置为 NFC Forum Type 4 标签，以便兼容的系统（例如带有 NFC 的 Android 设备）自动读出 NDEF 消息。它用于某些支付系统。

编辑：

我想说，这两种产品的安全目标有些不同。DESFire 提供 AES 和 3DES 以实现最大的灵活性，通过加密、MACed 或明文通信：您的选择。每个应用程序和文件都可以配置有自己的访问控制密钥。虽然 MIFARE Plus 旨在提高 MIFARE Classic 的安全性，但其功能与其余部分非常相似。此外，MIFARE Plus 有接近检查功能，而 DESFire 则没有。

它们都支持相同的阅读速度（检查规格！）。它们都将在铁氧体层上运行良好，并且 35 毫米的天线尺寸听起来不错。我有这样的 DESfire 标签，无论有没有铁氧体，都可以在 Android 手机上正常工作。

为了便于开发，我更喜欢 DESFire。它在通信选项和数据存储配置方面都更加灵活。如果你有一个具有 NFC 功能的 Android 设备，你甚至可以将 DESFire 配置为 Type 4 Tag，这意味着 Android 将自动读取任何 NDEF 数据并以意图的形式将其传递给你的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T08:52:47.267

您似乎在这里有很多问题，其中一些可能实际上并不相关，但这里有：

1.  安全性 - DESFire 具有更强大的安全功能，获得 Common Criteria EAL 4+
2.  可读性 - 它们都可以处理 848 kbit/sec
3.  当用铁氧体层粘上以便可以粘在手机上时，哪个更好？- 不是一个真正的问题。他们都可以应付，但我建议使用胶水，因为它是一种更好的物理解决方案，可以防止意外丢失。
4.  未来，如果我们想进行支付，首选什么？- DESFire 具有更强大的安全功能，所以我会推荐它而不是 Plus
5.  nfc 标签贴纸的尺寸将是 35 毫米直径，这有什么不同吗？使用的标签是什么？- 外形看起来相同，所以没有。
6.  标签将与插入 Android 设备的 nfc 阅读器进行交互。从 android POV，哪个更好？为了便于开发和更多功能，哪个更合适？- 命令集相似，DESFire 具有额外的命令集和运行更多应用程序的能力，因此根据您对功能的评论，DESFire 提供了更多选项。

# javascript - 通过javascript设置按钮属性

> ID：11047124
> 
> 赞同：0
> 
> 时间：2012-06-15T08:28:11.937
> 
> 标签：javascript, asp.net-mvc-3, devexpress

需要设置按钮的一些属性。例如“已检查”。我想这很简单，但我无法处理它。请给个平安的建议。

```
 Html.DevExpress().Button(
                   btnSettings =>
                   {
                       btnSettings.Name = "Details";
                       btnSettings.Text = "";
                       btnSettings.ClientSideEvents.Click = "function (s,e){Details.Checked = true}";
                       btnSettings.ControlStyle.CssClass = "button";
                       btnSettings.ToolTip = "details";
                       btnSettings.UseSubmitBehavior = false;
                       btnSettings.AllowFocus = false;
                       btnSettings.Width = 1;
                       btnSettings.Height = 1;
                   }
               )
               .Render(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:40:10.583

来自[devexpress 在线文档](http://documentation.devexpress.com/#AspNet/CustomDocument9011)

```
<script type="text/javascript">
    function button1_CheckedChanged(s, e) {
        if (s.GetChecked()) {
            button2.SetEnabled(false);
            s.SetText("Enable Button");
        } else {
            button2.SetEnabled(true);
            s.SetText("Disable Button");
        }
    }
</script>

<table>
    <tr>
        <td>
            <% 
                Html.DevExpress().Button(
                    settings => {
                        settings.Name = "button1";

                        settings.Text = "Disable Button";
                        settings.Width = 120;
                        settings.GroupName = "FakeGroup";
                        settings.ClientSideEvents.CheckedChanged = "button1_CheckedChanged";
                    }
                )
                .Render();
            %>
        </td>
        <td></td>
        <td>
            <% 
                Html.DevExpress().Button(
                    settings => {
                        settings.Name = "button2";
                        settings.EnableClientSideAPI = true;
                    }
                )
                .Render();
            %>        
        </td>
    </tr>
</table> 
```

# php - php在应用程序内销毁Facebook以前的用户

> ID：11047126
> 
> 赞同：0
> 
> 时间：2012-06-15T08:28:23.827
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我有一个 facebook 应用程序，一个用户登录并使用它。简单的。

问题：如果用户注销然后另一个用户在同一台​​电脑上登录，则会加载以前的用户详细信息。

由于用户在我的画布应用程序中，因此我无法将它们从 facebook 中注销。

我用：

```
require_once '/home/public_html/pages/social_login/fb_lib/facebook.php';

    $facebook = new Facebook(array(
      'appId'  => '__app_ID__',
      'secret' => '__secret__',
      'cookie' => true
    ));

    $fb_user = $facebook->api('/me');
    print_r($fb_user); die; 
```

这将在 Facebook 标题的顶部显示实际登录的人 - 但数组显示前一个用户。

如何在不让用户再次登录和注销的情况下销毁以前的用户详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:31:43.500

在 facebook sdk 中尝试：

`$facebook->destroySession();`- 在用户注销时:)

让我知道这是否有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:31:44.843

您可以尝试在用户注销时删除 FB cookie，例如：

```
 $facebook->destroySession();
    $fb_key = 'fbs_'.FACEBOOK_APP_ID_HERE;
    setcookie($fb_key, '', time() - 3600, '', '/', '');
    //clear session and 
    //rest of you logout code 
```

你的意思是这样的吗

# c++ - 未找到 C++ 中重载的 << 运算符

> ID：11047127
> 
> 赞同：1
> 
> 时间：2012-06-15T08:28:31.547
> 
> 标签：c++, operator-overloading, stream-operators

这是困扰我的问题：我`operator <<`在头文件 FAPPDebug.h 中有一个重载，例如：

```
QTextStream& operator << (QTextStream& a, FAPPDebug& b); 
```

以及 FAPPDebug.cpp 中的实现：

```
QTextStream& operator << (QTextStream& a, FAPPDebug& b)
{
    QString msg = *b.stream->ts.string(); // just take the message from b
    a << msg;
    return a;
} 
```

以及相应的函数调用：

```
QTextStream(stdout) << (debug() << "Quitting because application object is not set."); 
```

不管这看起来多么奇怪，它都可以在 Windows 下使用 MSVC2010 编译（并且可以工作！）

debug() 只是一个从当前位置创建 FAPPDebug 对象的宏。请注意 (debug() << "...") 周围的额外 () 集，但它不会产生我想要的。

在使用 g++ 4.4 的 Linux 下，我收到以下错误：

> MessageBroker.cpp:91: 错误: 'QTextStream(stdout, QFlags((QIODevice::OpenModeFlag)3u)) << ((FAPPDebug*)((FAPPDebug*)FAPPDebug(417, ( (const char*)"MessageBroker.cpp"), ((const char*)(& **PRETTY_FUNCTION** )), (LogLevel)7u).FAPPDebug::operator<<(((const char*)"Module")))- >FAPPDebug::operator<<(((const QString&)((const QString*)(& ModuleBase::getModuleDescription()())))))->FAPPDebug::operator<<(((const char*)"由于未设置应用程序对象而退出。"))' /usr/local/Trolltech/Qt-4.8.2/include/QtCore/qtextstream.h:184：注意：候选人是：FAPPDebug.h:94：注意：QTextStream& 运算符<<(QTextStream&, FAPPDebug&)

（候选人很多，我只保留重要的）

我已将函数调用修改为：

```
::operator << (QTextStream(stdout),  debug() << "Failed to schedule application startup."); 
```

我收到错误消息：

> MessageBroker.cpp：在成员函数'bool MessageBroker::init(Application*, const QString&)'中：MessageBroker.cpp:91: 错误：没有匹配函数调用'operator<<(QTextStream, FAPPDebug&)' /usr/local /Trolltech/Qt-4.8.2/include/QtCore/qchar.h:396：注意：候选人是：QDataStream& operator<<(QDataStream&, const QChar&) /home/ferenc/work/trunk/Core/Common/FAPPDebug.h :94: 注意：
> QTextStream& 运算符<<(QTextStream&, FAPPDebug&)

所以你可以看到每次都能找到正确的函数（是的，FAPPDebug.h 头文件包含在 MessageBroker.cpp 中），但“更符合标准”的编译器未能使用它。我觉得这是我对某处标准的理解中的一个小故障，所以我请求您帮助找到它。

编辑：操作员被声明为朋友`class FAPPDebug`

EDIT2： debug() 是一个宏，定义如下：

```
#define debug() FAPPDebug(__LINE__, __FILE__, __PRETTY_FUNCTION__, LOG_DEBUG) 
```

IE。它只是创建了一个 FAPPDebug 对象，其参数指示当前位置。

谢谢！F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:39:58.353

你的第二个参数不应该`operator<<`是`FAPPDebug const&`吗？即使某些编译器仍然无法检测到错误，您也无法使用临时初始化非常量引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:41:05.233

如果你仔细观察，编译器看到的函数和你定义的函数是不一样的。

它看到了什么：

```
no matching function for call to ‘operator<<(QTextStream, ... 
```

它定义了什么

```
QTextStream& operator<<(QTextStream&, ... 
```

似乎临时对象不能作为非常量引用传递。因此，要么将其更改为`QTextStream const&`或使用*rvalue reference*。

编辑：哦，好吧，我只是明白作为第一个参数传递的流不能真正是 const。在我看来，如果可能的话，使用右值引用或仅按值捕获似乎是现在唯一的方法。是你的`(debug() ...)`对象导致了问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:13:58.570

我认为问题可能是您的插入运算符按预期接受引用（左值）作为第一个参数，但是您试图传递从构造函数自动创建的右值。想一想，您如何期望一个自动创建的 QTextStream(stdout) 进行一系列类型的调用，QTextStream(stdout) << a << b << c。实际上，这是 x << a 然后 x << b 然后 x << c。为了让它在一个句子中发生，我认为第一个和返回都必须是 const 引用，它能够*固定*你的右值。或者您可以只声明一个变量，如 QTextStream qout(stdout)，并使用 qout 代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-05T12:23:18.570

我遇到了这个问题，这是任何 C++ 初学者的问题。

```
QTextStream& operator << (QTextStream& a, FAPPDebug& b); 
```

这是您的声明，但您的用法是：

```
QTextStream(stdout) << (debug() << "Quitting because application object is not set."); 
```

我假设你的 FAPPDEbug 对象有一个运算符，可以让它在 const char 指针上使用运算符。所以这变成了这个

```
QTextStream(stdout) << FAPPDebugObject; 
```

如果 FAPPDebugObject 没有作为参考返回，你的编译器不会找到它，因为你在下一个运算符中要求参考 arg。

我希望它对您或任何寻求解决方案的人有意义。

# javascript - 跨多个 div 问题选择跨度

> ID：11047132
> 
> 赞同：1
> 
> 时间：2012-06-15T08:28:52.657
> 
> 标签：javascript, selection, range, html

我遇到以下问题 - 我正在尝试选择跨多个 div 的跨度内的文本。举个例子

```
<div>asd<span>fgh</span></div>
<div><span>qwerty</span></div>
<div><span>uio</span>asd</div> 
```

现在在这种情况下，如果用户单击单词内部的某个位置，`qwerty`我想选择文本“fghqwertuio”-> 所有相邻的跨度。我正在使用以下代码来执行此操作：

```
 var range = document.caretRangeFromPoint(lastTappedX, lastTappedY);
    range.selectNodeContents(range.startContainer);
    window.getSelection().addRange(range);

    var containerNodes = document.body.children[0].children;
    var whichChild = -1;

    for ( var i = 0; i < containerNodes.length; ++i) {
        if (containerNodes[i] === range.startContainer.parentNode.parentNode) {
            whichChild = i;
            break;
        }
    }

    if (whichChild === -1) {
        console.log("couldn't find the highlighted div");
    }

    // go right the dom tree
    for ( var i = whichChild + 1; i < containerNodes.length; ++i) {
        var containerChildren = containerNodes[i].children;
        if (containerChildren[0]
                && containerChildren[0].style['background-color']) {
            var newRange = document.createRange();
            newRange.selectNodeContents(containerChildren[0]);
            window.getSelection().addRange(newRange);
        }

        if (containerChildren.length > 1) {
            break;
        }
    }

    // go left the down tree
    for ( var i = whichChild - 1; i >= 0; --i) {
        var containerChildren = containerNodes[i].children;
        if (containerChildren[containerChildren.length - 1].style['background-color']) {
            var newRange = document.createRange();
            newRange
                    .selectNodeContents(containerChildren[containerChildren.length - 1]);
            window.getSelection().addRange(newRange);
        }

        if (containerChildren.length > 1) {
            break;
        }
    } 
```

当我记录发生的事情时 - 我正确地创建了包含我想要选择的文本的范围，但将它们添加到选择对象似乎不起作用。当前选择只是第一个添加的范围。任何有关如何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:18:43.343

在主要浏览器中，只有 Firefox 允许每次选择多个范围。在所有其他浏览器中，您仅限于一个范围。

您需要调整代码以创建一个范围并使用范围`setStart()`和`setEnd()`方法。此外，`style`元素属性的属性使用驼峰式大小写而不是连字符（即`.backgroundColor`，而不是`['background-color']`）。

# redmine - 错误\功能\支持之外的跟踪器选项

> ID：11047133
> 
> 赞同：1
> 
> 时间：2012-06-15T08:28:57.280
> 
> 标签：redmine

有没有办法在“Tracker”字段下使用与 Redmine 中默认 Bug\Feature\Support 选项不同的选项来标记问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:40:38.233

当然，您可以[在 redmine 中定义自己的跟踪器](http://www.redmine.org/projects/redmine/wiki/RedmineIssueTrackingSetup)：`Administration -> Trackers`列出所有现有的跟踪器并允许您添加新的跟踪器。

# c++ - ATL Web 服务日志记录

> ID：11047135
> 
> 赞同：0
> 
> 时间：2012-06-15T08:29:02.067
> 
> 标签：c++, web-services, iis, logging, atl

我在 Visual Studio 2005 中创建了一个 C++ ATL Web 服务。我想为我的 Web 服务提供详细的日志，以了解在数据库调用期间发生的请求或天气发生的任何异常。

我通过 IIS 托管我的 Web 服务。我知道如果启用了日志记录，IIS 会创建一个日志文件但我想在格式方面对这些日志有更多的控制。

是否有任何方法可以使用 IIS 系统本身在该日志文件中实现我们自己的日志，或者我应该实现一个多线程日志系统，它将日志推送到文本文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:32:06.607

如果您想要在 IIS 本身提供的功能之外进行日志记录，您要么必须实现自己的记录器，要么使用已经存在的几十个记录器中的任何一个。

很多人喜欢的一个是 Peantheios： http: [//www.pantheios.org/](http://www.pantheios.org/)

那里有很多。

不过，对您的问题的简单回答是，IIS 没有内置的日志记录功能，超出您在 GUI 中看到的内容。

# drupal-7 - Drupal 7：页面加载前的节点处理钩子

> ID：11047136
> 
> 赞同：0
> 
> 时间：2012-06-15T08:29:03.997
> 
> 标签：drupal-7, hook, nodes

我在 Drupal 7 中，想要在渲染节点页面之前进行一些辅助处理，即既不影响节点上的字段也不影响主题。换句话说，我想在自定义模块中实现一个“适当的钩子”，以便我可以获取节点的信息。再次，我想在.module 文件中而不是在template.php 中执行实现功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:41:39.080

检查[http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7](http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7)

可能你应该看看 hook_node_view。

# html - Internet Explorer 按钮的简单行为需要启用 ActiveX 控件吗？

> ID：11047145
> 
> 赞同：0
> 
> 时间：2012-06-15T08:29:40.193
> 
> 标签：html, onmouseover

我有一个按钮，当鼠标悬停在它上面时，它的文本颜色会发生变化。HTML是：

```
<a href="products.html" style="text-decoration:none">
     <div
          class="button"
          onmouseover="this.style.color='black'"
          onmouseout="this.style.color='#666666'"><div class="menu_text">Products</div></div></a> 
```

问题是当我在 IE8 中打开页面时，IE8 说：

> 为了保护您的安全，IE8 已限制此页面运行可能访问您计算机的脚本或 ActiveX 控件。

在信息栏中。

我单击选项并允许阻止的内容。然后它工作正常。

**我的页面中包含的**Fancybox**和**GalleryView插件也仅在允许被阻止的内容时才能看到。****

 **有没有办法解决这个问题？

我发现导航栏按钮（主页，随机，关于...）中没有显示这样的问题[。](http://www.janitha.com)为什么这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:33:26.007

默认情况下，IE 在本地运行网站（即从本地文件系统）时会阻止脚本。在服务器或本地主机上运行时不应出现警告。

请参阅此处：[如何避免 IE7 和 IE8 中的下拉 ActiveX 警告？](https://stackoverflow.com/questions/4007037/how-do-you-avoid-the-drop-down-activex-warning-in-ie7-and-ie8)**

# php - 来自 3 个一对多表的嵌套 JSON

> ID：11047151
> 
> 赞同：4
> 
> 时间：2012-06-15T08:29:47.287
> 
> 标签：php, mysql, sql, json, sencha-touch-2

我正在构建一个 Sencha-Touch 2 应用程序，我在从服务器端（mysql DB）恢复我的数据时遇到了一些麻烦。

这是我的数据模型：

```
Table1 : 
     ID:int
     description:varchar(100)

Table2 : 
     ID:int
     description:varchar(100)
     table1_ID:int

Table3 : 
     ID:int
     name:varchar(100)
     info:varchar(100)
     table2_ID:int 
```

表 1 以一对多的关系连接到表 2，表 2 和表 3 相同。

我想要的服务器是一个嵌套的 JSON，它看起来像这样：

```
[
   Table1_object1_ID: 'id' : {
      Table1_object1_description: 'description',
      Table2_Objects : [
            'Table2_object1': {
                Table2_object1_id : 'id',
                Table2_object1_description : 'description'
                Table3_Objects : [
                      table3_object1: {
                          Table3_object1_name : 'name',
                          Table3_object1_info : 'info',
                      },
                      table3_object2: {
                          Table3_object2_name : 'name',
                          Table3_object2_info : 'info',
                      },
                      table3_object3: {
                          Table3_object3_name : 'name',
                          Table3_object3_info : 'info',
                      },
                      etc...
                ],

            },
            'Table2_object2': {
                Table2_object2_id : 'id',
                Table2_object2_description : 'description'
                Table3_Objects : [
                      ...
                ]
            },
            etc....
      ]
   },
   Table1_object2_ID: 'id' : {
      etc....
] 
```

在我的应用程序中，我为每个表使用 3 个模型，理想情况下我想将我的数据保存在 3 个商店中，但这将是另一个问题；-)

第一个商店（基于来自的模型`Table1`）发出`JsonP`请求以获取嵌套 JSON。

实际上我在 PHP 文件中的 SQL 请求很简单：

```
SELECT * 
FROM Table1 
INNER JOIN Table2 ON Table1.ID = Table2.table1_ID 
INNER JOIN Table3 ON Table2.ID = Table3.table2_ID; 
```

我试图根据我的 SQL 结果在 PHP 中创建一个数组，但无法获得预期的结果。我也尝试更改我的 SQL，`GROUP BY`但`GROUP_CONCAT`在这里相同，无法获得我想要的 JSON。

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:48:07.483

带有一些示例数据的可运行代码：http: [//codepad.org/2Xsbdu23](http://codepad.org/2Xsbdu23)

我使用了 3 个 distinct`SELECT`来避免不必要的重复。当然，您必须将`$result`数组自定义为您想要的 JSON 格式，但我认为这并不难。

```
// assume $t1/2/3 will be arrays of objects
$t1 = 
SELECT     Table1.*
FROM       Table1 
WHERE Table1.ID = 111

$t2 = 
SELECT     Table2.*
FROM       Table2
WHERE      Table2.table1_ID = 111

$t3 = 
SELECT     Table3.*
FROM       Table2
INNER JOIN Table3 ON Table2.ID = Table3.table2_ID
WHERE      Table2.table1_ID = 111

function array_group_by( $array, $id ){
  $groups = array();
  foreach( $array as $row ) $groups[ $row -> $id ][] = $row;
  return $groups;
}

// group rows from table2/table3 by their parent IDs
$p2 = array_group_by( $t2, 'table1_ID' );
$p3 = array_group_by( $t3, 'table2_ID' );

// let's combine results:
$result = array();
foreach( $t1 as $row1 ){
  $row1 -> Table2_Objects = isset( $p2[ $row1 -> ID ]) ? $p2[ $row1 -> ID ] : array();
  foreach( $row1 -> Table2_Objects as $row2 )
    $row2 -> Table3_Objects = isset( $p3[ $row2 -> ID ]) ? $p3[ $row2 -> ID ] : array();
  $result[] = $row1;
}

echo json_encode( $result ); 
```

# asp.net - 我可以在 asp.net 托管的 RESTful API 中使用 async / await 吗？

> ID：11047152
> 
> 赞同：0
> 
> 时间：2012-06-15T08:29:58.027
> 
> 标签：asp.net, c#-5.0, async-await

是否可以对托管在 asp.net 下的 RESTful API 进行异步调用？

我有一个长期运行的过程。我想触发它​​通过 http GET 请求启动，然后定期检查它的进度。如何使用新的 C#5 `async`/`await`语法来做到这一点？

我在这个问题中有一个详细的例子：

*   [如何使用 C#5 async / await 从 asp.net 托管模块调用异步进程？](https://stackoverflow.com/questions/11039411/how-do-i-call-an-asynchronous-process-from-an-asp-net-hosted-module-using-c5-as)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:06:15.653

我认为您不需要使用等待或异步。也许您可以启动一个新线程来运行长时间的任务，并立即向客户端返回一个任务ID。并且客户端使用这个 id 来检查任务的进度。

# php - iOS 推送通知消息 - 单击查看按钮后的操作

> ID：11047153
> 
> 赞同：5
> 
> 时间：2012-06-15T08:30:35.887
> 
> 标签：php, ios, push-notification, push, apple-push-notifications

我对推送通知有一些问题。我可以很好地将它们发送到我注册的设备。一切正常。

我的问题是：点击查看按钮后，应用程序正在启动。暂时没有任何内容。

如何在此处添加内容？此内容应取决于我发出的推送通知。

例如：我的推送通知是关于 1 号新闻的 - 然后点击查看后我应该得到更多关于 1 号新闻的信息

等等...

当从 1 号新闻返回时，还应该可以在列表中读取应用程序中所有以前收到的新闻。

你明白我的意思吗？

我没有任何真正的想法...如果您能向我展示有关示例的代码，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T08:52:27.530

只需实现以下代码，您就可以开始了：

```
// will be called if the app was not active
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self applicationDidFinishLaunching:application];

    if (launchOptions != nil)
    {
        NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (dictionary != nil)
        {
            // get the necessary information out of the dictionary 
            // (the data you sent with your push message)
            // and load your data
        }
    }
    return YES;
}

// will be called when in foreground
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {    
    // get the necessary information out of the dictionary 
    // (the data you sent with your push message)
    // and load your data
  } 
```

您可以在这里找到关于 APNS 的著名教程：[http ://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:52:16.377

如果当用户点击视图按钮时您的应用程序不在后台，`application:didFinishLaunchingWithOptions:`则调用。该方法的第二个参数中的字典包含有关启动原因（直接、来自推送或本地通知等）和通知内容的信息。

如果您的应用程序已经在后台，`application:didReceiveRemoteNotification:`则在唤醒时调用。同样，第二个参数是一个包含通知内容的字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:45:54.543

生成通知的 UUID 时出错。必须使用 __bridge_transfer 或 CFBridgingRelease，而不是使用 __bridge；否则 CFStringRef 将永远不会被释放。

# java - 当用户输入无效时，Wicket FilterToolbar 不会使支持模型上的长值归零

> ID：11047154
> 
> 赞同：1
> 
> 时间：2012-06-15T08:30:38.900
> 
> 标签：java, datatable, wicket

我们在 wicket 1.5.5 应用程序中将 FilterToolbar 用于我们的数据表。

当过滤工具栏的后备模型属性是 Long.class 时，我们遇到了问题。如果用户输入有效的输入，比如“123”，一切都会正常工作。发生以下步骤时会出现问题：

1）用户输入有效输入（“123”），并通过提交表单进行过滤。
2）用户输入无效输入（“abc”）并通过提交表单进行过滤。

当用户在步骤 2 中提交表单时，支持模型的长字段仍将设置为 123，而不是所需的行为 null。

这可能是检票口中的错误还是我以某种方式引起了问题？

提前致谢！
偶来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:16:47.653

这是 wicket 处理模型的方式。如果新输入无效，它们不会更改。您应该能够通过`onError`在表单中​​实现将空值写入无效字段的方法来解决此问题。`onSubmit`如果输入包含无效值，则调用 onError 而不是。

# facebook - 多个页面上的 Facebook 登录按钮？

> ID：11047157
> 
> 赞同：1
> 
> 时间：2012-06-15T08:31:00.283
> 
> 标签：facebook, facebook-login

我在我的网站上使用 facebook 登录按钮，它工作得很好。但是，对于我的网站，我使用 require_once 函数在每个页面上包含我的 header.php 文件。我知道我在 fb 上的应用设置中列出的网站 url 必须与具有登录按钮的页面相匹配。是否可以在多个页面上使用 facebook 登录按钮？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:35:43.143

当您在 developer.facebook.com 中编辑您的应用程序时，您可以添加应用程序域。这些是您可以从中进行身份验证的域，因此您可以执行 example.com 和 www 或 www2 或仅 example.com 将允许身份验证。但是您询问是否有任何页面的“登录按钮”，只要您不更改域，这应该不是问题。:)

# python - 用于极其轻量级的 Python Web 服务的 Python 框架

> ID：11047162
> 
> 赞同：0
> 
> 时间：2012-06-15T08:31:21.710
> 
> 标签：python, web-services

我想使用 RESTful JSON API 开发一个**非常轻量级**的Web 服务。我将在服务器端进行所有会话管理。该解决方案将在一小时内接收数个 100k（或更多）API 调用并返回（压缩）JSON 作为响应，它应该能够轻松扩展。

安全性自然很重要，但我想避免使用 Django 等重量级框架，最好使用 nginx 或 lighttpd 等网络服务器而不是 Apache。

在服务器端，这就是我所需要的：

1.  用户会话管理
2.  安全性（防止至少更常见的攻击，例如跨站点请求伪造等）
3.  网址路由
4.  http 实用程序（例如压缩）

我知道 web2py，但它的部署选项充其量似乎“不是很好”——到目前为止，尽管遵循了用户手册，但我一直无法让它与 Apache 一起使用。

谁能推荐一个最适合这项任务的 Python 框架（和 Web 服务器）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:36:12.893

如果你想真正轻量级，你可以尝试没有框架的 wsgi 本身，或者[Flask](http://flask.pocoo.org/)。我了解 wsgi 在 lighttpd 上运行，您会在 Google 搜索中获得一些点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:44:14.070

试试[金字塔](http://www.pylonsproject.org/)。它快速、轻巧，并且有很多选项可以根据需要配置您的环境......

# corba - 不同语言之间的 Corba 通信

> ID：11047163
> 
> 赞同：1
> 
> 时间：2012-06-15T08:31:22.873
> 
> 标签：corba, idl, iiop

CORBA IDL 如何用于支持以不同语言实现的对象之间的通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:26:14.433

CORBA IDL 允许您以编程语言中立的方式指定对象接口。一旦完成了您希望通过网络公开的对象，CORBA 规范详细说明了该接口是如何公开的，以及如何在 C++、Smalltalk、Java 等不同语言中使用。规范的这一部分称为“语言映射”。

因此，并不是所有的 python 对象都只是在另一边显示为 java 对象。您需要描述您想与 IDL 共享的对象的行为，然后根据语言映射指定的规则对它们进行编码和使用。

# objective-c - 一个协议的委托方法如何阻止另一个协议的另一个方法的执行？

> ID：11047169
> 
> 赞同：1
> 
> 时间：2012-06-15T08:31:47.107
> 
> 标签：objective-c, nsurlconnection

具体来说，`connectionDidFinishDownloading:destinationURL:`from`<NSURLConnectionDownloadDelegate>`阻止执行`connection:DidReceiveData:`from `<NSURLConnectionDataDelegate>`。怎么会这样？

我在命名方法上输入错误，然后用 Xcode 自动完成拼写错误，`connectionDidFinishDownloading:destinationURL:`而不是`connectionDidFinishLoading`. 然后有几天我不明白为什么`connection:DidReceiveData:`根本没有打电话。所以我把所有东西都修好了，现在问你：**为什么**会这样？

谢谢回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T16:38:44.857

这是一个没有很好记录的功能。NSURLConnection 有两种不同的委托协议：NSURLConnectionDataDelegate 和 NSURLConnectionDownloadDelegate。

*   NSURLConnectionDataDelegate：用于将数据加载到内存的委托方法。这些委托方法都是可选的。
*   NSURLConnectionDownloadDelegate：用于直接将资源下载到磁盘文件的委托方法。所有方法都是可选的，除了 connectionDidFinishDownloading:destinationURL: 必须实现它以便通知代理完成下载的位置。

如您所见，如果您在委托中实现了 connectionDidFinishDownloading:destinationURL:。这将通知 NSURLConnection 你想要将数据下载到磁盘文件而不是内存作为 NSData。目标磁盘文件位于应用程序缓存目录中，并保证在委托回调期间存在。这意味着代理应该将下载内容复制或移动到更持久的位置。

因此，如果您从委托类实现中消除 connectionDidFinishDownloading:destinationURL: ，则将调用 connection:DidReceiveData: 。

这不是最后一个故事。当您实现 connectionDidFinishDownloading:destinationURL: 然后想通过destinationURL访问下载的文件时。不幸的是，该文件不存在。明白了，委托回调适用于报亭应用。如果您在 Info.plist 中指定时没有开发报亭应用程序，请远离 NSURLConnectionDownloadDelegate。Apple 确认这是从 iOS 5 到 iOS 7 的错误。仍未修复：)

# android - 根据 SeekBar 的进度更改 TextView 颜色

> ID：11047171
> 
> 赞同：0
> 
> 时间：2012-06-15T08:31:49.270
> 
> 标签：android, xml, colors, textview, seekbar

我正在尝试`TextView`根据`SeekBar`进度更改 的颜色，如下所示：

*   0-25% -> 绿色
*   25%-50% -> 黄色等等...

当我使用以下代码时，`TextView`不再显示该值。

我将不胜感激任何帮助！

**代码：**

```
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) 
{   
    textView.setText(String.valueOf(progress + "%"));
    if(progress >= 25 && progress < 50)
        textView.setTextColor(R.color.Yellow);
    else if(progress >= 50 && progress < 75)
        textView.setTextColor(R.color.Orange);
    else if(progress >= 75 && progress <= 100)
        textView.setTextColor(R.color.Red);
    else 
        textView.setTextColor(R.color.Green);
} 
```

* * *

**XML:**

```
<TextView
    android:id="@+id/eT"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tvProgress"
    android:textColor="@color/Green"
    android:textSize="25dp"
    android:textStyle="bold"
    android:layout_gravity="center"
    android:layout_marginBottom="5dp"
    /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:05:02.070

我不明白问题出在哪里，但我一直在努力，对我来说效果很好。我还附上了输出的屏幕截图。请检查。

**主要的.xml**

```
 <ScrollView  android:layout_width="wrap_content"
     android:layout_height="wrap_content">

     <RelativeLayout  android:layout_width="wrap_content"
         android:layout_height="wrap_content">

            <TextView  android:id="@+id/aksharTextView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="afadjklhfg"
                android:paddingTop="10dip"
                android:layout_below="@+id/arialTextView"/>

            <SeekBar  android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/aksharTextView"
                android:padding="10dip"
                android:id="@+id/seekbar"/>
     </RelativeLayout>

 </ScrollView> 
```

**onCreate()**

```
 seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            public void onStopTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub

            }

            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub

            }

            public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {
                aksharTextView.setText(progress+"");
                if(progress >= 25 && progress < 50)
                    aksharTextView.setTextColor(Color.BLUE);
                else if(progress >= 50 && progress < 75)
                    aksharTextView.setTextColor(Color.WHITE);
                else if(progress >= 75 && progress <= 100)
                    aksharTextView.setTextColor(Color.GREEN);
                else 
                    aksharTextView.setTextColor(Color.RED);
            }
        }); 
```

**输出屏幕**

![一](../Images/2bb0f1d82427b471623179ac3c8de143.png)

![在此处输入图像描述](../Images/10c223489c70322016ed2d0693c74bce.png)

![在此处输入图像描述](../Images/2fbd8c77ae2b1676db9468589610bac4.png)

![在此处输入图像描述](../Images/07db12525ab711c759df47a9208fa61d.png)

# xml - 包含给定文本节点元素的 XPath 表达式

> ID：11047174
> 
> 赞同：5
> 
> 时间：2012-06-15T08:32:19.417
> 
> 标签：xml, xpath

我正在编写一些 Perl 以使用 XPath 来定位表中的特定`td`元素，看起来与此类似

```
 <table>
    <tr>
      <td>...</td>
      <td><font color="white" face="verdana, Helvetica, Arial" size="2">Showing <b>1</b>-<b>100</b> of <b>200</b> total</font></td>
      <td>...</td>
      <td>...</td>
    </tr>
  </table> 
```

我想要的是找到一个具有包含字符串`td`的节点的元素。`font/text()``Showing`

火柴`contains(., "Showing")`

直接比较效果很好：

```
//td[font/text()="Showing "] 
```

但我想使用`contains()`XPath 功能使匹配更加灵活。

我努力了

```
//td[contains(font/text(), "Showing ")] 
```

但这会引发错误

```
XPath failed due to: A sequence of more than one item is not allowed as the first argument of contains() 
```

我已经设法实现了我想要的

```
//td[font/text()[contains(., "Showing")]] 
```

但这很丑陋，我希望能有更简洁的东西。请有人可以为我改进这个，或者确认这是最好和最简洁的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T08:42:02.800

尝试这个：

```
//td[contains(font/text()[1], 'Showing ')] 
```

# actionbarsherlock - 隐藏“刷新”操作栏项目，同时在操作栏中显示不确定的进度条

> ID：11047175
> 
> 赞同：2
> 
> 时间：2012-06-15T08:32:19.433
> 
> 标签：actionbarsherlock, android-actionbar, android-menu

我是 Jakes ActionbarSherlock 课程的忠实粉丝。

我的应用中有一个新闻提要，并且希望在将数据提取到该新闻提要时显示一个不确定的进度条。

所以我使用这个代码：

```
...
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setSupportProgressBarIndeterminateVisibility(false);
... 
```

这工作正常，但进度条显示在我的刷新操作栏项目旁边。我想在显示不确定进度的同时隐藏刷新项。

任何想法如何做到这一点？

谢谢！

# ios - iOS 如何使用私有 API 中的 UIApplication launchApplicationWithIdentifier？

> ID：11047176
> 
> 赞同：4
> 
> 时间：2012-06-15T08:32:24.283
> 
> 标签：ios, jailbreak, uiapplication, iphone-privateapi

[编辑]我有我的设备。我在 Github 上找到了最新的私有 API [iOS-Runtime-Headers 。](https://github.com/nst/iOS-Runtime-Headers)

我想在我的应用程序中使用私有 API。

我在 github 上找到[了 kennytm/iphone-private-frameworks](https://github.com/kennytm/iphone-private-frameworks)，但它只支持 iOS 3.x。当我在 iOS 5.0.1 上工作时。

我还在Google iPhone 开发工具上找到[了一些代码。](http://code.google.com/p/iphone-dev/source/browse/branches/include-1.2-sdk/include/UIKit/UIApplication.h?r=266)但这真的让我很困惑。我是 iPhone 开发的新手。

我该怎么做才能使用

```
[[UIApplication sharedApplication] launchApplicationWithIdentifier:@"com.a.b" suspended:NO]; 
```

有人可以给我一个方向或一些例子。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T09:24:39.793

## 要求

1.  **越狱**的设备
2.  **您的钥匙串及其关联的**配置文件中的****有效证书/密钥**。（如果你没有注册苹果开发者计划，使用这个解决方法：[self sign my code and test on iphone in xCode](https://stackoverflow.com/questions/8417967/self-sign-my-code-and-test-on-iphone-in-xcode)）**

 **## 我的解决方案

1)在您的 XCode 项目中启用**权利。**

要将权利添加到您的项目，请在**project navigator中选择您的****项目**，然后在活动的 Target -> **Summary** -> **Entitlements** -> 选中**Enable entitlements**复选框。*名称为“ YourProject.entitlements* ”的新文件将立即出现在项目导航器中。

 *******2) 将以下**属性**添加到权利。

![添加权利属性：com.apple.springboard.launchapplications，布尔类型，值为 YES](../Images/26b62cb1e6c56c148652524405e49d95.png)

3) 由于`launchApplicationWithIdentifier:suspended:`是**私有 API**，您需要显式声明它才能构建您的应用程序。只需在适当的位置**添加以下代码：**

```
// Simply make declaration  inside a Category.
#import "BlahBlah.h"
@interface UIApplication (Undocumented)
    - (void) launchApplicationWithIdentifier: (NSString*)identifier suspended: (BOOL)suspended;
@end
....
@implementation BlahBlah
... 
```

4）**构建**你的项目。

5) 将*YourProject.app*复制到设备的**/Application**文件夹中（例如通过 SFTP）

6）**重启**或重启iDevice。

7) ...

8）利润！

## 也可以看看

[从我的应用程序启动应用程序的特殊 API](https://stackoverflow.com/questions/10204785/special-api-to-launch-an-app-from-my-application) -**另一种解决方案**

[苹果在 iOS 中默认应用程序的捆绑标识符是什么？](https://stackoverflow.com/questions/9910366/what-is-the-bundle-identifier-of-apples-default-applications-in-ios)*********

# perl - 如何在单个 Perl 文件中为多个 URL 运行 Selenium 测试？

> ID：11047178
> 
> 赞同：1
> 
> 时间：2012-06-15T08:32:30.547
> 
> 标签：perl, selenium-rc

```
use strict;
use warnings;
use Time::HiRes qw(sleep);
use Test::WWW::Selenium;
use Test::More "no_plan";
use Test::Exception;
my $sel = Test::WWW::Selenium->new(
    host        => "localhost",
    port        => 4444,
    browser     => "*firefox",
    browser_url => "http://10.201.3.192:8000/"
);
$sel->open_ok("/abc-dd/");
$sel->window_maximize();
$sel->$sel->$sel->$sel->_ok();
$sel->close_ok(); 
```

上面的代码适用于单个 URL。我需要对另一个 URL 执行相同的操作。以下代码仅完成了第一部分的执行。

```
use strict;
use warnings;
use Time::HiRes qw(sleep);
use Test::WWW::Selenium;
use Test::More "no_plan";
use Test::Exception;
my $sel = Test::WWW::Selenium->new(
    host        => "localhost",
    port        => 4444,
    browser     => "*firefox",
    browser_url => "http://10.201.3.192:8000/"
);
$sel->open_ok("/abc-dd/");
$sel->window_maximize();
$sel->$sel->$sel->$sel->_ok();
$sel->close_ok();
$sel->open_ok("http://10.201.3.195:8000/abc-dd/");
$sel->window_maximize();
$sel->$sel->$sel->$sel->_ok();
$sel->close_ok(); 
```

我必须对单个 Perl 文件中的两个 URL 执行操作：

```
http://10.201.3.192:8000/abc-dd/
http://10.201.3.195:8000/abc-dd/ 
```

如何附加第二个 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:45:26.537

你可以创建一个url数组并循环遍历它

```
my @urls = qw (http://10.201.3.192:8000 
               http://10.201.3.195:8000); # create list of urls

for my $url (@urls) {

    my $sel = Test::WWW::Selenium->new( host => "localhost", 
                                    port => 4444, 
                                    browser => "*firefox", 
                                    browser_url => $url );

    $sel->open_ok("/abc-dd/");
    $sel->
    $sel->
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:28:25.987

将您的逻辑打包到函数中以供重用：

```
use strict;
use warnings;
use Time::HiRes qw(sleep);
use Test::WWW::Selenium;
use Test::More "no_plan";
use Test::Exception;

sub test_url {
    my $sel = Test::WWW::Selenium->new( host => "localhost", 
                                        port => 4444, 
                                        browser => "*firefox", 
                                        browser_url => "http://10.201.3.192:8000/" );

    $sel->open_ok("/abc-dd/");
    $sel->window_maximize();
    $sel->
    $sel->
    $sel->
    $sel->_ok();
    $sel->close_ok();
}

test_url("/abc-dd/");
test_url("http://10.201.3.195:8000/abc-dd/"); 
```

# web-services - 提取使用 Tomcat Valve 接收到的 SOAP 消息的方法是什么

> ID：11047181
> 
> 赞同：0
> 
> 时间：2012-06-15T08:32:35.030
> 
> 标签：web-services, tomcat, soap, axis2, tomcat-valve

我正在尝试通过扩展`org.apache.catalina.valves.ValveBase`类来为 Apache Tomcat 创建一个自定义 Valve。它有方法`public abstract void invoke(Request request,Response response)`。在我的 Tomcat 容器中，我有 Axis2，它托管了一个 Web 服务。所以我的问题是找到一种方法来使用这个自定义阀门将 SOAP 消息提取到该 Web 服务。那么使用参数`org.apache.catalina.connector.Request`和获取 SOAP 消息的方法是`org.apache.connector.Response`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:24:03.047

由于自定义阀是在 Axis2 接收请求之前执行的，因此您将无法访问 Axis2 解析的 SOAP 消息。您唯一能做的就是自己解析消息，然后将原始消息的副本传递给 Axis2（如果您的 Valve 没有修改该消息）或重新序列化该消息（如果您的 Valve 修改该消息）。

请注意，与其他用户所说的相反，Axis2 文档中没有任何内容可以帮助您做到这一点。但是，根据您的用例（您没有详细描述），您可能能够使用 Axis2 处理程序来实现您的目标。当然，Axis2 处理程序在 Axis2 文档中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:03:51.097

执行此操作的方式与编写 Servlet 或 Filter 时提取 SOAP 消息的方式相同：`org.apache.catalina.connector.Request`implements`HttpServletRequest`和`org.apache.connector.Response`implements `HttpServletResponse`，因此请像往常一样使用它们。

如果您不知道如何从 中提取 SOAP 消息`HttpServletRequest`，则必须阅读 Axis2 文档。

# c# - 如何用回调包装事件驱动的代码？

> ID：11047182
> 
> 赞同：1
> 
> 时间：2012-06-15T08:32:35.093
> 
> 标签：c#, multithreading, asynchronous

我正在使用第三方套接字库，尽管这与我的问题有些无关。该库包含一个带有“ConnectAsync”和“WriteAsync”等方法的“Socket”类。调用这些方法之一后控制立即返回，并且套接字类引发事件以通知操作何时完成，例如“ConnectCompleted”和“WriteCompleted”。当接收到数据时，该类还会引发一个事件：“PacketArrived”。

在我的应用程序中，我想发送数据并等待回复。由于这可能发生在很多地方，因此将上面的套接字类包装在某种帮助器中为我完成所有这些是有意义的。我还希望它是异步的，因此 UI (WPF) 在连接/写入/等待回复期间不会冻结，因此辅助方法调用可能如下所示：-

```
SocketHelper.SendData(dataToSend, myCallback); 
```

当接收到数据时调用“myCallback”。

作为线程新手，我不知道如何编写这个助手 - 不知何故，它需要将各种方法和事件串在一起，即打开连接，等待连接完成，写入数据，等待写入完成，然后等待数据包到达（然后调用提供的回调）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:47:53.957

**更新 - 2021 年 11 月 1 日**

大多数原始技术在 .NET Framework 4.7 及更高版本以及 .NET Core（包括 .NET 5 及更高版本）中作为开箱即用的方法提供。此时，.NET 6 已在生产中得到支持，并且目前对 .NET 的长期支持，两周后即可获得完整的 RTM。

*   SocketTaskExtensions类为[Sockets](https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.sockettaskextensions?view=net-5.0)提供基于任务的扩展方法，例如[ConnectAsync](https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.sockettaskextensions.connectasync?view=net-5.0#System_Net_Sockets_SocketTaskExtensions_ConnectAsync_System_Net_Sockets_Socket_System_String_System_Int32_)允许异步打开连接，而[SendAsync](https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.sockettaskextensions.sendasync?view=net-5.0#System_Net_Sockets_SocketTaskExtensions_SendAsync_System_Net_Sockets_Socket_System_ReadOnlyMemory_System_Byte__System_Net_Sockets_SocketFlags_System_Threading_CancellationToken_)异步发送缓冲区：

```
await socket.ConnectAsync(someIp,somePort);
await socket.Send(msg, SocketFlags.None); 
```

这些类通过可选的 CancellationToken 参数支持取消。

*   对于基于 Socket 的高性能代码，[引入了管道](https://docs.microsoft.com/en-us/dotnet/standard/io/pipelines)以允许通过重用内存缓冲区以最小分配处理任意消息大小，这些缓冲区从一个处理步骤传递到下一个处理步骤。这既节省了内存*，也*节省了在缓冲区之间复制数据所需的时间。

*   WebClient 完全被 HttpClient 取代。事实上，WebClient 和 HttpWebRequest 类现在只是 HttpClient 的兼容性包装器。HttpClient 是线程安全和异步的，使用套接字和管道提供比 WebClient 更好的性能：

```
HttpClient _client=new HttpClient(...);

...
async Task<string> GetThatPage(string someUrl)
{
   var page=await _client.GetStringAsync(someUrl);
   ....
} 
```

在 .NET 6 中，`Parallel.ForEachAsync`同时发出多个异步请求变得微不足道：

```
var urls=new List<string>();

...
await Parallel.ForEach(urls,async url=>{
    var page=_client.GetStringAsync(url);
    var fileName=CalculateNameFrom(url);
    await File.WrileAllTextAsync(fileName,page);
}); 
```

.NET (Core) 中的默认编码是 UTF8。

*   SmptClient 本身已[过时，其文档页面建议改用](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.smtpclient?view=net-5.0#remarks)[MailKit](https://github.com/jstedfast/MailKit)等开源客户端。

*   可以使用[SendPingAsync发送异步 ping](https://docs.microsoft.com/en-us/dotnet/api/system.net.networkinformation.ping.sendpingasync?view=net-6.0)

```
var reply=await ping.SendPingAsync(someIP); 
```

* * *

**原始答案（2012）**

Stephen Toub 在“[等待套接字操作](https://devblogs.microsoft.com/pfxteam/awaiting-socket-operations/)”中讨论了 .NET 4.5 的这个主题。通过一些工作，您可以对 .NET 4 使用相同的技术。

您可以使用任务并行库来[简化异步调用](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/tpl-and-traditional-async-programming?redirectedfrom=MSDN)，而不是使用回调。使用 TPL，您可以将所有套接字操作和回调转换为调用操作并处理结果的任务。

使用 ContinueWith 等方法可以非常轻松地组合任务，仅在第一个任务完成时执行链中的下一个任务。

任务是使用线程池中的线程执行的，因此您不必担心线程。

TPL 已经提供了一种从 BeginXXX/EndXXX 函数对或 IAsyncResult 对象创建任务的方法。如果您的套接字库提供了这些，您可以立即开始使用任务。

要处理事件，您可以使用任务并行库中的 TaskCompletionSource 创建一个任务，该任务将在您调用套接字方法时启动，并仅在引发相应事件时完成。该技术在“[任务和基于事件的异步模式](https://devblogs.microsoft.com/pfxteam/tasks-and-the-event-based-asynchronous-pattern/)”中进行了描述

[ParallelExtensionsExtras](https://docs.microsoft.com/en-us/samples/dotnet/samples/parallel-programming-extensions-extras-cs/)库使用此技术为[WebClient、SmtpClient 和 Ping](https://devblogs.microsoft.com/pfxteam/parallelextensionsextras-tour-16-async-tasks-for-webclient-smtpclient-and-ping/)提供异步方法版本。

使用“Tasks and the EAP”中的代码，您可以为您的 Socket 类编写扩展方法，如下所示：

```
public static Task ConnectTask( this Socket socket, object address) 
{ 
    var tcs = CreateSource(address); 
    socket.ConnectCompleted += 
        (sender, e) => TransferCompletion(tcs, e, () => e.Result, null); 
    socket.ConnectAsync(address, tcs); 
    return tcs.Task; 
} 
```

并像这样使用它：

```
var connectTask=mySocket.ConnectTask(myaddress);
connectTask.ContinueWith(t=> { ... }); 
```

在 .NET 4.5 中事情变得更加容易。async/await 关键字允许您取消 ContinueWith 调用并编写看起来与其同步版本非常相似的代码。您可以检查“[等待套接字操作](https://devblogs.microsoft.com/pfxteam/awaiting-socket-operations/)”以获得专门针对套接字的扩展。

# asp.net - 在代码中创建的对象存储在内存中的哪里？

> ID：11047183
> 
> 赞同：0
> 
> 时间：2012-06-15T08:32:41.937
> 
> 标签：asp.net, .net, memory, client

假设我们从 ASP.NET 中页面的代码隐藏创建一个“DataTable”对象。这个数据表到底保存在内存中的什么位置？客户端还是服务器端？应用程序池？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:35:09.697

类的实例存储在服务器端的内存中，具体来说是在托管[堆中](http://en.wikipedia.org/wiki/Dynamic_memory_allocation#Dynamic_memory_allocation)。

这是一篇很棒的文章，解释了变量和对象的内存存储概念：

*   [文章：六个重要的 .NET 概念 - 部分：堆栈和堆](http://www.codeproject.com/Articles/76153/Six-important-NET-concepts-Stack-heap-value-types#Stack%20and%20Heap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:36:53.817

服务器端，在服务器的内存中。将大量记录加载到数据表时要小心，这可能会导致 OutOfMemoryExeption。

# linux - 如何在 Linux 上运行 pg_dump/pg_dumpall 命令？

> ID：11047185
> 
> 赞同：6
> 
> 时间：2012-06-15T08:33:10.587
> 
> 标签：linux, postgresql, pg-dump, pg-dumpall

大家好，我正在尝试通过转储在 postgres 中创建备份。当我通过命令行运行命令时它需要密码当我输入密码时它会给出一些错误

```
pg_dump: [archiver (db)] connection to database "nsdgpkidb" failed: FATAL:  password authentication failed for user "root" 
```

如果有人有一些宝贵的时间，请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T08:42:24.640

这类问题最好在[ServerFault](http://serverfault.com)上提出。您必须通过命令行参数为 pg_dump 提供有效的 postgresql 帐户：

```
pg_dump -U postgres nsdgpkidb > file.sql 
```

默认情况下，它假定当前的本地用户帐户 (root)。另一种方法是[更改​​当前用户](https://stackoverflow.com/q/8835835/55209)并发出命令。

# algorithm - 融合持久化的实际应用

> ID：11047194
> 
> 赞同：4
> 
> 时间：2012-06-15T08:33:50.563
> 
> 标签：algorithm, data-structures, persistence, purely-functional

我只是在阅读Brodal 等人的[纯功能最坏情况恒定时间可连接排序列表。](http://www.cs.au.dk/~gerth/papers/esa06trees.pdf)他们对数据结构上下文中不同类型持久性的介绍给我留下了一个明显的问题：

> **融合持久化：**所有版本都可以更新和查询，另外，两个版本可以组合产生一个新版本。请注意，在这种情况下，可以通过重复将其与自身连接来在多项式时间内创建指数大小的结构。

通过反复将其与自身连接来在多项式时间内创建“指数大小”结构的实际应用是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T12:02:18.640

这是一个示例用例。想象一个通用的“sequence”数据类型在预期数组是稀疏的情况下用作数组（即，大多数元素将包含相同的值，相对较少的点设置为其他值）。如果序列数据类型具有此属性，那么您可以使用您提到的技术构建（可能非常大）数组，并且在这种用法下它仍然具有合理的空间和时间效率。

当然，你可以为稀疏数组创建一个特殊用途的数据类型，它可能比通用数据类型更节省空间和时间，但关键是通用数据类型足够优雅地适应这种用法您甚至可能不需要创建专用数据类型的模式。

（诚​​然，这个例子是关于一般的融合持久性，而不是关于论文的“排序列表”。再一次，在论文中，他们对一般的融合持久性发表了有问题的评论，而不是专门针对他们自己的数据结构.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:13:53.703

我没有阅读这篇论文，但是通过查看您提供的 Confluent Persistence 的定义，我可以将其与[二项式堆](http://en.wikipedia.org/wiki/Binomial_heap)等数据结构相关联，其中合并操作是对数运行时间，它非常适合集合联合类型的算法。随着树呈指数增长并考虑到二项式堆，我们可能有几个，并且每个都可以在多项式时间内合并。执行联合操作将是我认为对于此类数据结构以及多项式时间内最好的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:20:21.947

您的问题表明您阅读论文时说此属性是表现出这种持久性的数据结构的优势。看看这篇论文，我不认为这就是作者的意图——这只是他们想要指出的这种数据结构的一个有点违反直觉的属性，以使读者感到有趣和愉悦。

作为进一步说明，我认为作者谈论的指数大小是“数学”大小（抽象意义上的节点数），而不是内存大小 - 不可能访问或编写多项式时间内的内存位置的指数数量！

# c# - 如何将部分视图呈现为字符串？

> ID：11047198
> 
> 赞同：2
> 
> 时间：2012-06-15T08:33:59.103
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, partial-views

如何`Html.Partial()`从控制器或外部类库中的其他方法调用方法？

我需要类似的东西：

```
string someView = "SomeView";
object someModel = new SomeModel();    
HtmlHelper helper = new HtmlHelper();    
string html = helper.Partial(someView, someModel).ToString(); 
```

我需要获取此方法返回的 html 字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T08:49:53.210

如果要将部分视图呈现为字符串，可以使用此链接：[将视图呈现为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)

但我认为你做错了什么......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:57:40.070

您需要使用 WebClient 下载 html 页面，如下所示：

```
string viewUrl = Url.RouteUrl(new { Controller = "Pages", Action = "Index" });

WebClient client = new WebClient();
client.Encoding = Encoding.UTF8;
string result = client.DownloadString(new Uri(viewUrl )); 
```

然后你会得到页面的html

# android - Android：是否可以轻松知道视图实例实际上在屏幕上可见？

> ID：11047201
> 
> 赞同：3
> 
> 时间：2012-06-15T08:34:05.890
> 
> 标签：android, android-view

是否可以轻松知道视图实际上在屏幕上可见。我的意思是视图是滚动视图的子视图的情况。是否有一种简单的方法可以知道视图何时滚动出屏幕或滚动到可见屏幕区域？（或者也许还有其他模式来处理视图“延迟初始化”的情况？ - 当滚动视图的子项是变量类型时，列表视图不匹配）提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:45:22.380

有受保护的方法[onDisplayHint](http://developer.android.com/reference/android/view/View.html#onDisplayHint%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:40:56.810

您可以将`onVisibilityChanged`事件处理程序添加到子视图。当视图的可见性改变时调用。可以在[此处](http://developer.android.com/reference/android/view/View.html#onVisibilityChanged%28android.view.View,%20int%29)找到有关此的 Android 文档。

# java - 整理器字符串比较

> ID：11047202
> 
> 赞同：2
> 
> 时间：2012-06-15T08:34:06.273
> 
> 标签：java, internationalization

我想知道使用整理器有意义的情况（现在我们不要成为纯粹主义者）。javadocs 中的[Performing Locale-Independent Comparisons](http://docs.oracle.com/javase/tutorial/i18n/text/locale.html)页提供了一种这样的情况。我很好奇是否还有更多这样的案例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:45:19.890

我怀疑还有很多其他情况，但我可以想象一些：

1.  正确排序 CSV 中的日期或时间列。
2.  不区分大小写排序。

基本上，Collat​​or 是一个更复杂的 Comparator，所以在任何你可能使用 Comparator 的地方，理论上你都可以使用 Collat​​or。它更适合字符串，它假设直观形式（字符串）在比较之前需要一些规范化（Collat​​ionKey）。除此之外，它几乎只有一个用例。

# css - 如何对 CSS 过滤器进行功能检测？

> ID：11047206
> 
> 赞同：17
> 
> 时间：2012-06-15T08:34:53.910
> 
> 标签：css, browser-feature-detection

在某些浏览器中，包括 Chrome 稳定版，您可以这样做：

```
h3 {
  -webkit-filter: grayscale(1);
  filter: grayscale(1);
} 
```

你不知道吗，h1 将完全以灰度渲染。[一切旧的又是新的](http://msdn.microsoft.com/en-us/library/ms532853.aspx)。

无论如何 - 有没有人知道对此进行特征检测的任何方法？

`filter`如果不起作用，我需要能够应用其他样式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T08:38:11.287

所谓的***更新***答案：

正如 OP 提到的一个好点，我正在更新答案，但这与我之前的答案没有任何相关或矛盾，这只是浏览器检测。

Alan H. 在 10 号之前提到了 IE。版本，支持`filter`css 属性，但不是我们都知道的方式（`CSS3 filter`我的意思）。

因此，如果我们只想检测功能`CSS3 filter`，我们应该继续使用一点*浏览器检测*。正如我在[评论](https://stackoverflow.com/questions/11047206/how-can-i-feature-detect-css-filters#comment15167372_11047247)中提到的那样。

使用`documentMode`属性，并将其与我们简单的特征检测相结合，我们可以排除 IE 中所谓的误报。

```
function css3FilterFeatureDetect(enableWebkit) {
    //As I mentioned in my comments, the only render engine which truly supports
    //CSS3 filter is webkit. so here we fill webkit detection arg with its default
    if(enableWebkit === undefined) {
        enableWebkit = false;
    }
    //creating an element dynamically
    el = document.createElement('div');
    //adding filter-blur property to it
    el.style.cssText = (enableWebkit?'-webkit-':'') + 'filter: blur(2px)';
    //checking whether the style is computed or ignored
    //And this is not because I don't understand the !! operator
    //This is because !! is so obscure for learning purposes! :D
    test1 = (el.style.length != 0);
    //checking for false positives of IE
    //I prefer Modernizr's smart method of browser detection
    test2 = (
        document.documentMode === undefined //non-IE browsers, including ancient IEs
        || document.documentMode > 9 //IE compatibility moe
    );
    //combining test results
    return test1 && test2;
} 
```

[原始的 Modernizr 源](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/filters.js)

* * *

```
if(document.body.style.webkitFilter !== undefined) 
```

或者

```
if(document.body.style.filter !== undefined) 
```

***额外的信息：***

对于简单的特征检测，请使用我上面的代码。有关支持的功能列表，请查看此处：

*   [滤镜效果 1.0](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html)
*   [滤镜效果 1.0 功能](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#FilterFunction)

对于`filter`s 在 Chrome 中的现场演示，请看这里：

*   [CSS 滤镜效果](http://html5-demos.appspot.com/static/css/filters/index.html)

还有 2 个资源供您使用：

*   [WebKit 中的 CSS 滤镜效果登陆](http://updates.html5rocks.com/2011/12/CSS-Filter-Effects-Landing-in-WebKit)
*   [什么时候可以使用 CSS 滤镜效果？](http://caniuse.com/css-filters)

***在我写这个答案时，您必须使用`webkit`供应商前缀才能使其工作。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-27T21:15:08.357

以@Sepehr 的答案为基础，但要对其进行一些现代化改造并删除多余的行：

```
var supportsFilters = (function() {
  var filterEl = document.createElement('div');
  filterEl.style.cssText = 'filter:blur(2px)';
  return filterEl.style.length != 0 && (document.documentMode === undefined || document.documentMode > 9);
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-27T05:12:49.287

您现在可以使用 CSS 的内置[`@support`](https://developer.mozilla.org/en-US/docs/Web/CSS/@supports)有条件地应用样式。请注意，[浏览器对 的支持`@support`很好但并不完美](https://caniuse.com/#feat=css-featurequeries)。这是一篇很好的文章，解释了它如何与几个示例一起使用：[https ://iamsteve.me/blog/entry/feature-detection-with-css](https://iamsteve.me/blog/entry/feature-detection-with-css)

例如，您可以执行以下操作（[现场查看](https://jsfiddle.net/w41j0hfm/)）：

```
@supports (filter: grayscale(1)) or (-webkit-filter: grayscale(1)) {
  h3 {
    -webkit-filter: grayscale(1);
    filter: grayscale(1);
  }
}

@supports not (filter: grayscale(1)) and not not (-webkit-filter: grayscale(1)) {
  h3 {
    color: #808080;
  }
} 
```

# opengl-es - OpenGL|ES 添加阴影/阴影映射

> ID：11047212
> 
> 赞同：-3
> 
> 时间：2012-06-15T08:35:10.930
> 
> 标签：opengl-es, 3d, opengl-es-2.0, shadow, shadow-mapping

向 3d 对象添加阴影的最简单方法是什么？

我将对象信息（顶点、texCoordinates、法线、索引）存储在数组中。

有一些框架，如iOS 的[isgl3d](https://code.google.com/p/isgl3d/)，允许用户加载 3d .obj 文件并添加阴影，但它们添加了很多无用的东西并且不是多平台的（iOS + android）

向 3d 对象添加阴影的最简单方法是什么？
你能显示/链接到一个工作示例（iOS/Android）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:58:11.947

最简单的方法是找到可以编译到平台的库或一些实现。3d 中的阴影并不明显，据我所知，OpenGL 没有实现它。

我知道的技术是阴影卷[http://en.wikipedia.org/wiki/Shadow_volume](http://en.wikipedia.org/wiki/Shadow_volume) 并且可能更简单的是（我找不到链接）是将对象的顶点映射到平面时，因为例如到地面并再次用黑色绘制对象。

# c# - 仅用 3 个字符替换字符串的中间

> ID：11047217
> 
> 赞同：0
> 
> 时间：2012-06-15T08:35:27.677
> 
> 标签：c#, regex, replace

我可以用什么来替换这样的字符串中的中间字符：`000`变成`010`.

我是否必须使用正则表达式，如果是，我可以有模式吗？还是只用`String.Replace`方法？

信息：字符串中总是有数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:52:07.933

```
 string s = "111000111";
 string pattern = "000";
 string replacement = "010";
 Regex rgx = new Regex(pattern);
 string result = rgx.Replace(s, replacement);
 lbloriginal.Text = s;
 lblnew.Text = result; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T08:43:30.460

替换过程背后没有明确的逻辑，查看问题，但*假设*您在某个时候知道哪个符号应该出现在中间，

可以创建一个*扩展*方法，这样说

```
public static class Extension
{
    public static string ReplaceMiddle(this string value, char charToPutIn)
    {
        var builder = new StringBuilder(value);
        builder[value.Length/2] = charToPutIn;
        return builder.ToString();
    }

} 
```

然后像这样使用它：

```
"hello".ReplaceMiddle('5') 
```

这将产生如下结果：

```
"he5lo" 
```

正如预期的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T08:46:26.373

如果它只是一个 3 个字符的字符串：

```
String number = "123";
String res = number[0] + "5" + number[2]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T08:43:28.030

*用索引*替换字符或子字符串有点尴尬。它会归结为

```
string newString = str.Substring(0,1) + newChar + str.Substring(2); 
```

*内容*更容易，您可以使用[Replace 方法](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)将子字符串替换为另一个子字符串。

正则表达式是一种选择，但即便如此它也不漂亮：

```
Regex.Replace(str, "^(.).(.)$", "${1}1$2" 
```

# python - 使用 Networkx，如何将 graphml 和其他格式写入字符串而不是文件？

> ID：11047220
> 
> 赞同：1
> 
> 时间：2012-06-15T08:35:43.830
> 
> 标签：python, networkx, graphml

我非常肤浅地使用networkx。将图形写入文件很容易，例如 graphml，但是如何在不打扰文件系统的情况下将其保存到字符串中呢？

[它的文档](http://networkx.lanl.gov/reference/generated/networkx.readwrite.graphml.write_graphml.html#networkx.readwrite.graphml.write_graphml)说这是可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:28:07.120

大多数格式也有一个“生成器”。所以你可以在不使用 StringIO 的情况下这样做：

```
In [1]: import networkx as nx

In [2]: G=nx.path_graph(4)

In [3]: s='\n'.join(nx.generate_graphml(G))

In [4]: print s
<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  <key attr.name="name" attr.type="string" for="graph" id="d0" />
  <graph edgedefault="undirected">
    <data key="d0">path_graph(4)</data>
    <node id="0" />
    <node id="1" />
    <node id="2" />
    <node id="3" />
    <edge source="0" target="1" />
    <edge source="1" target="2" />
    <edge source="2" target="3" />
  </graph>
</graphml> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T12:10:20.720

正如 larsmans 评论的那样，可以使用[`StringIO`](http://docs.python.org/library/stringio.html)：

```
import networkx as nx
import StringIO
import itertools

g = nx.Graph()

edges = itertools.combinations([1,2,3,4], 2)
g.add_edges_from(edges)

# File-like object
output = StringIO.StringIO()

nx.write_graphml(g, output)

# And here's your string
gstr = output.getvalue()
print gstr
output.close() 
```

# qt - 刷新布局需要调整大小？

> ID：11047223
> 
> 赞同：1
> 
> 时间：2012-06-15T08:36:05.500
> 
> 标签：qt, layout, resize, refresh, qmainwindow

我正在尝试刷新 a `QWidget`，`QMainWindow`实际上我只是更改了它的布局，它`QVBoxLayout`充满了`QGroupBoxs`

因此，当发出某个信号时，`QMainWindow`隐藏`QWidget`其布局中存在的所有 s（在删除它们之前），然后创建新的和`show()`它们。问题是，在 90% 的情况下，新的`QWidget`s 列表更大。所以当刷新完成时，新`QWidget`的 s 实际显示，但 s 是`QMainWindow`旧的大小！一个简单的调整大小（用鼠标）`QMainWindow`可以调整到适当的大小。

有什么功能可以应用`QWidget`吗？在它的布局上？上`QMainWindow`？

我对它们中的每一个都尝试了adjustSize（），但没有奏效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:56:27.287

它应该自然起作用，所以你做错了什么。小部件上的默认`sizeConstraint`布局是仅在小部件太小时时才增加小部件。您可以将其更改为增大和缩小小部件。

1.  您必须将新小部件添加到布局中。

2.  您的主窗口不能有`minimumSize()`. 如果您从确实返回非零的小部件派生，则`minimumSize()`必须覆盖它并返回零大小。

3.  您不必在`delete`ing 之前隐藏子小部件。这是毫无意义。只需删除它们，Qt 就会正确处理它。

请参阅下面的完整示例。在 OS X 和 Windows XP + MSVC 上测试。

```
//main.cpp
#include <cstdlib>
#include <QApplication>
#include <QWidget>
#include <QLabel>
#include <QHBoxLayout>
#include <QPushButton>

static int pick() { const int N = 10; return (qrand()/N) * N / (RAND_MAX/N); }

class Window : public QWidget {
    Q_OBJECT
    QLayout * layout;
public:
    Window() {
        layout = new QHBoxLayout;
        QPushButton * button;
        button = new QPushButton("Randomize", this);
        connect(button, SIGNAL(clicked()), SLOT(randomize()));
        layout->addWidget(button);
        button = new QPushButton("Grow", this);
        button->setCheckable(true);
        connect(button, SIGNAL(toggled(bool)), SLOT(grow(bool)));
        layout->addWidget(button);
        setLayout(layout);
    }
private slots:
    void randomize() {
        // remove old labels
        foreach (QObject * o, findChildren<QLabel*>()) { delete o; }
        // add some new labels
        int N = pick();
        while (N--) {
            layout->addWidget(new QLabel(QString(pick(), 'a' + pick()), this));
        }
    }
    void grow(bool shrink)
    {
        QPushButton * button = qobject_cast<QPushButton*>(sender());
        if (shrink) {
            button->setText("Grow && Shrink");
            layout->setSizeConstraint(QLayout::SetFixedSize);
        } else {
            button->setText("Grow");
            layout->setSizeConstraint(QLayout::SetDefaultConstraint);
        }
    }
};

int main(int c, char ** v)
{
    QApplication app(c,v);
    Window w;
    w.show();
    return app.exec();
}

#include "main.moc" 
```

# android - 无法使用 BitmapFactory.decodeFile 加载 JPEG 图像。返回空

> ID：11047224
> 
> 赞同：1
> 
> 时间：2012-06-15T08:36:10.127
> 
> 标签：android, image, skia

我正在制作一个应用程序，显示大量由 Imagemagick 从 PDF 文件生成的图像。某些图像，无法使用 BitmapFactory 加载。它只是返回 null 而不是位图。

日志说：

```
 D/skia(15101): --- decoder->decode returned false 
```

这不是内存问题，因为一些有问题的图像非常小，并且图像没有损坏，因为我可以在任何其他机器上显示它们。此外，如果我使用 BitmapFactory 能够解码宽度和高度

```
 inJustDecodeBounds = true; 
```

在选项中。

我尝试使用外部图像查看器 ( [QuickPic](https://play.google.com/store/apps/details?id=com.alensw.PicFolder) ) 加载其中一张图像，但没有运气。它还返回“加载失败”，这表明 SKIA 认为图像已损坏或至少由于某种原因不受支持。

[可以在此处](http://i.imgur.com/MPSIT.jpg)找到其中一张不起作用的图像

我用来加载它的完整代码在这里

```
 BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(FILENAME,o);
    int width = o.outWidth;
    int height = o.outHeight;
    /* Width and height decoded successfuly */

    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o.inJustDecodeBounds = false;
    Bitmap bitmap = BitmapFactory.decodeFile(FILENAME,o2); 
    /*Bitmap is null */ 
```

欢迎任何想法有什么问题或如何规避它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T11:16:35.287

[像这样](https://i.imgur.com/MPSIT.jpg)具有 CMYK 颜色空间的图像，默认情况下无法被 Android 解码，因此无法显示。

Niels 是对的，但如果您无法在 imageMagick 转换中更改该参数，您可以将 CMYK 图像转换为 RGB 图像（Android 支持）。有一个用于 Android 的 imageMagick 库，名为[android-lib-magick](https://github.com/puelocesar/android-lib-magick)，[这](https://stackoverflow.com/a/15897163/2232889)是解决此问题的方法。

只需导入[这个库](https://github.com/puelocesar/android-lib-magick)，转换其色彩空间的代码就非常简单：

```
ImageInfo info = new ImageInfo(path); // path where the CMYK image is your device
MagickImage imageCMYK = new MagickImage(info);
imageCMYK.transformRgbImage(ColorspaceType.CMYKColorspace);
Bitmap bitmap = MagickBitmap.ToBitmap(imageCMYK); 
```

如果图像不在您的设备或 SD 卡中，您需要先下载它。

我已经使用[android-lib-magick](https://github.com/puelocesar/android-lib-magick)实现了两个简单的方法，称为“getCMYKImageFromPath”和“getCMYKImageFromURL”。[你可以在这里](https://github.com/Mariovc/GetCMYKImage)看到代码：

[https://github.com/Mariovc/GetCMYKImage](https://github.com/Mariovc/GetCMYKImage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:42:56.580

显然[SKIA 对](http://code.google.com/p/skia/issues/detail?id=69#c2)带有 CMYK 配置文件的 JPG 有问题。我的问题的解决方法是将参数“-colorspace RGB”添加到我的 imagemagick 转换中。

# objective-c - UIView 之间的 NSString 转换

> ID：11047226
> 
> 赞同：0
> 
> 时间：2012-06-15T08:36:17.817
> 
> 标签：objective-c, xcode, nsstring

我想`NSString`从一个`UIView`在另一个使用`UIView`。

`NSString`我在第一种中创建的方式有两种`UIView`。

```
NSString *firstNameTemp =  [[[[html componentsSeparatedByString:@"<first_name>"] objectAtIndex:1] componentsSeparatedByString:@"</first_name>"] objectAtIndex:0];
NSString *lastNameTemp =  @"Михаил"; 
```

如果我使用`NSLog`我在两种情况下都会得到相同的行：

```
2012-06-15 16:21:54.778 VKLike[22718:707] –Ь–Є—Е–∞–Є–ї
2012-06-15 16:21:54.790 VKLike[22718:707] –Ь–Є—Е–∞–Є–ї 
```

编码存在问题，但如果我`UILabel`用`NSString`它创建显示正确的字符串（Михаил）。

第二种`UIView`if使用方法

```
- (void) initPhotoViewWithFrame:(CGRect)frame Image:(UIImage *)image Name:(NSString *)name; 
```

当我尝试使用***firstNameTemp***时出现错误。

***但是，如果我使用lastNameTemp***，我不会收到错误。

问题是：如何成功通过第一个`NSString`（***firstNameTemp***）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:47:21.620

这是内存管理错误。您必须保留`firstNameTemp`（并稍后释放它）。严格来说，这也是正确的，`lastNameTemp`但错误不会出现，因为字符串文字 ( `@"..."`) 是由编译器创建的，并且只要进程存在就存在。

# parsing - 解析空文件 yacc/lex 时没有错误

> ID：11047227
> 
> 赞同：1
> 
> 时间：2012-06-15T08:36:18.223
> 
> 标签：parsing, bison, yacc, lex

我有一个从 yacc/lex 生成的解析器。除了一种情况外，我设置的所有规则都可以正常工作。

如果此解析器正在解析的文件为空，则会出错。我想添加规则，以便在文件为空时不会出错。我没有在任何一个 .l/.y 文件中添加任何检查。

如何使用 YACC/LEX 来做到这一点？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:39:58.713

词法分析器应该识别输入的结尾并相应地返回一个标记（即`EOF`）。

您的语法的开始规则可能如下所示：

```
%start program

...

program : EOF 
        | instructions EOF
        ; 
```

正如 Ira Baxter 指出的那样，一个简单的“空”规则也足够了。[GNU bison 手册](http://www.gnu.org/software/bison/manual/bison.html#Rpcalc-Rules)为此提供了一个示例：

```
input   : /* empty */
        | input line
        ; 
```

# php - 通过数据表搜索确切的单词

> ID：11047228
> 
> 赞同：1
> 
> 时间：2012-06-15T08:36:33.993
> 
> 标签：php, search, datatables

我正在通过数据表为我的 php 脚本实现排序和搜索功能。对于排序它的好。对于搜索，我有 3 个文本字段、1 个年龄范围字段和 1 个下拉菜单。下拉框的不同值是“所有者”、“超级管理员”、“管理员”和“代理”。因此，当我选择值“admin”时，记录列表将显示其中包含“admin”和“superadmin”。我可以理解这是在“superadmin”一词中显示的，“admin”一词在那里。所以只有这个下拉框，我怎么能限制确切的词。我的代码是这样的：

```
<script type="text/javascript" >
                    (function($) {
                        $.fn.dataTableExt.oApi.fnGetColumnData = function ( oSettings, iColumn, bUnique, bFiltered, bIgnoreEmpty ) {
                // check that we have a column id
                if ( typeof iColumn == "undefined" ) return new Array();

                // by default we only wany unique data
                if ( typeof bUnique == "undefined" ) bUnique = true;

                // by default we do want to only look at filtered data
                if ( typeof bFiltered == "undefined" ) bFiltered = true;

                // by default we do not wany to include empty values
                if ( typeof bIgnoreEmpty == "undefined" ) bIgnoreEmpty = true;

                // list of rows which we're going to loop through
                var aiRows;

                // use only filtered rows
                if (bFiltered == true) aiRows = oSettings.aiDisplay; 
                // use all rows
                else aiRows = oSettings.aiDisplayMaster; // all row numbers

                // set up data array    
                var asResultData = new Array();

                for (var i=0,c=aiRows.length; i<c; i++) {
                    iRow = aiRows[i];
                    var aData = this.fnGetData(iRow);
                    var sValue = aData[iColumn];

                    // ignore empty values?
                    if (bIgnoreEmpty == true && sValue.length == 0) continue;

                    // ignore unique values?
                    else if (bUnique == true && jQuery.inArray(sValue, asResultData) > -1) continue;

                    // else push the value onto the result data array
                    else asResultData.push(sValue);
                }

                return asResultData;
            }}(jQuery));

            function fnCreateSelect( aData )
            {
                var r='<select><option value=""></option>', i, iLen=aData.length;
                for ( i=0 ; i<iLen ; i++ )
                {
                    r += '<option value="'+aData[i]+'">'+aData[i]+'</option>';
                }
                return r+'</select>';
            }

                        function fnFilterColumn ( i )
                        {

                            $('#example').dataTable().fnFilter( 
                                $("#col"+(i+1)+"_filter").val(),
                                i
                            );
                        }

                        /* Custom filtering function which will filter data in column four between two values */
                            $.fn.dataTableExt.afnFiltering.push(
                                function( oSettings, aData, iDataIndex ) {
                                    var iMin = document.getElementById('min').value * 1;
                                    var iMax = document.getElementById('max').value * 1;
                                    var iVersion = aData[4] == "-" ? 0 : aData[4]*1;
                                    if ( iMin == "" && iMax == "" )
                                    {
                                        return true;
                                    }
                                    else if ( iMin == "" && iVersion < iMax )
                                    {
                                        return true;
                                    }
                                    else if ( iMin <= iVersion && "" == iMax )
                                    {
                                        return true;
                                    }
                                    else if ( iMin <= iVersion && iVersion <= iMax )
                                    {
                                        return true;
                                    }
                                    return false;
                                }
                            );

                        $(document).ready(function(){

                            $('#example').dataTable( {
                                "bProcessing": true,
                                //"bServerSide": true,
                                "sAjaxSource": "datatabledb.php",
                                "bJQueryUI": true,
                                "sPaginationType": "full_numbers",
                                "sDom": 'T<"clear">lfrtip',
                                "oTableTools": {
                                    "aButtons": [

                                        {
                                            "sExtends": "csv",
                                            "sButtonText": "Save to CSV"
                                        }
                                    ]
                                },
                                "oLanguage": {
                                        "sSearch": "Search all columns:"
                                    },
                                "aoColumns": [
                                                null,
                                                { "bSortable": false }, // disable the sorting property for checkbox header
                                                null,
                                                null,
                                                null,
                                                null,
                                                null,
                                                null,
                                                null,
                                                null
                                            ]

                            } );

                            $("#example").dataTable().columnFilter(
                               {  aoColumns: [
                                                    null,
                                                    null,
                                                    null,
                                                    null,
                                                    null,
                                                    null,
                                                    null,
                                                    {
                                                         type: "select",
                                                         values: [ 'Owner', 'Superadmin', 'Admin','Agent' ]
                                                    },
                                                    null,

                                                    null
                                                 ]
                               }
                 );

                            $("#col1_filter").keyup( function() { fnFilterColumn( 0 ); } );

                            $("#col3_filter").keyup( function() { fnFilterColumn( 2 ); } );

                            $("#col4_filter").keyup( function() { fnFilterColumn( 3 ); } );

                            //$("#col5_filter").keyup( function() { fnFilterColumn( 4 ); } );

                            //$("#col8_filter").keyup( function() { fnFilterColumn( 7 ); } );

                            var oTable = $('#example').dataTable();
                            /* Add event listeners to the two range filtering inputs */
                            $('#min').keyup( function() { oTable.fnDraw(); } );
                            $('#max').keyup( function() {oTable.fnDraw(); } );

                            //$('table').dataTable({"bFilter": false});

                        });

                     </script>
<table cellpadding="3" cellspacing="0" border="0" class="display userTable" aria-describedby="example_info">

                <tbody>
                    <tr id="filter_col1">
                        <td>Name: </td>
                        <td><input type="text"     name="col1_filter" id="col1_filter"></td>
                        <td>Email:                      </td>
                        <td><input type="text"     name="col4_filter" id="col4_filter" /></td>
                        <td>Username: </td>
                        <td><input type="text"     name="col3_filter" id="col3_filter" /></td>
                        <td>Min Age:</td>
                        <td><input type="text" id="min" name="min" maxlength="2" class="ageFeild" onkeypress="return numbersonly(event, false)" /></td>
                        <td>Max Age: </td>
                        <td><input type="text" id="max" name="max" maxlength="2" class="ageFeild" onkeypress="return numbersonly(event, false)" /></td>
                        <td style="padding-left:25px;">Privilege:</td>
                    </tr>
                    </tbody>
                 </table>

                     <table width="100%" border="0" align="center" cellpadding="2" cellspacing="1" class="form_table display" id="example">

<thead>
                            <tr>                            
                                <th class="sorting_asc">Name</th>
                                <th >Photo</th>
                                <th >Username</th>
                                <th >Email</th>                        
                                <th>Age</th>                        
                                <th>Location</th>                        
                                <th>Contact No</th>                        
                                <th>Privilege</th>                        
                                <th>Joining Date</th> 
                                <th>Status</th>                        
                            </tr>

                     </thead>                    
                     <tbody>

                        <tr>
                            <td colspan="10" class="dataTables_empty">Loading data from server</td>
                        </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th>All Privilege</th>
                        <th></th>
                        <th></th>
                    </tr>
                </tfoot>

            </table> 
```

在 datatabledb.php 页面中，

```
...
   while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        if($aRow['admin_name'] != ''){
            $row[] = wordwrap($aRow['admin_name'],15,"<br />\n",TRUE);
        }
        if($aRow['admin_photo'] == ''){
                $row[] = "<img src='http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/no-pic.jpg' width='50' height='50'>";
        }
        else if($aRow['admin_photo'] != ''){
            if(!file_exists("http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/".$aRow['admin_photo'])){$row[] = "<img src='http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/no-pic.jpg' width='50' height='50'>";}
            elseif(file_exists("http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/".$aRow['admin_photo'])){$row[] = "<img src='http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/".$aRow['admin_photo']."' width='50' height='50'>";}
        }
        if($aRow['username'] != ''){
            $row[] = $aRow['username'];
        }
        if($aRow['email'] != ''){
            $row[] = wordwrap($aRow['email'],15,"<br />\n",TRUE);
        }
        if($aRow['email'] == ''){
            $row[] = "N/A";
        }
        if($aRow['age'] != ''){
            $row[] = $aRow['age'];
        }
        if($aRow['age'] == ''){
            $row[] = 0;
        }
        if($aRow['location'] != ''){
            $row[] = $aRow['location'];
        }
        if($aRow['location'] == ''){
            $row[] = "N/A";
        }
        if($aRow['contact_no'] != ''){
            $row[] = $aRow['contact_no'];
        }
        if($aRow['contact_no'] == ''){
            $row[] = "N/A";
        } 
        if($aRow['role'] != ''){
            $row[] = get_role_name_by_id($aRow['role']);
        }
        if($aRow['creation_date'] != ''){
            $joiningDate = date("d-m-Y h:i:s", strtotime($aRow['creation_date']));
            $row[] = substr($joiningDate,0,10);
        }
        if($aRow['status'] != ''){
            $row[] = ($aRow['status'] == 1)?"Enable":"Disable";
        }

        $output['aaData'][] = $row;
    }
... 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:23:37.850

要获得精确匹配过滤器有多种方法，但基本上您必须禁用列的智能过滤器功能。这可以通过两种方式完成：

使用`fnFilter()`并传递 true 作为最后一个参数

```
oTable.fnFilter("^"+some_string+"$", some_column_id, true); 
```

使用 o设置

```
// after creating the table and getting the table object...

var oTable = $('#some_id').dataTable();

// ...you can use it to get a settings object...

var oSettings = oTable.fnSettings();

// ...then you can do things with the settings object (your col index should be 7 )

oSettings.aoPreSearchCols[ iCol ].sSearch = "^\\s*"+'1'+"\\s*$";
oSettings.aoPreSearchCols[ iCol ].bRegex = false;
oSettings.aoPreSearchCols[ iCol ].bSmart= false; 
```

这是从[这里](http://www.datatables.net/forums/discussion/4096/filtering-an-exact-match/p1)获取的，应该可以工作

# ios - 绘制透明时删除虚线

> ID：11047230
> 
> 赞同：0
> 
> 时间：2012-06-15T08:36:38.603
> 
> 标签：ios, core-graphics, quartz-2d

我只是在开发一个绘图应用程序。我需要画一条透明的线，每当我画的时候，线上都会出现点。

我该如何解决这个问题？如何从线上删除点？

我的代码在下面

```
- (UIImage *)drawSmoothLine  // stright line correct
{
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGSize screenSize = self.frame.size;
    UIGraphicsBeginImageContext(screenSize);

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    [self.layer drawInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);

    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 

    CGContextSetLineCap(context, kCGLineCapRound);

    CGContextSetStrokeColorWithColor(context, drawColor.CGColor);

    CGContextSetBlendMode(context, kCGBlendModeColorBurn);
    CGContextSetLineWidth(context, lineWidth);

    CGContextStrokePath(context);

    UIImage *ret = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return ret;
} 
```

[![Ipad 屏幕截图的错误](../Images/508fb4403628d3e9e6e25a490522796e.png)](https://i.stack.imgur.com/dwwKm.png)
[（来源：[4shared.com](http://dc471.4shared.com/img/3_9Uo8qT/s3/Screen_shot_2012-06-15_at_1564.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:23:03.717

尝试使用`UIBezierPath` 看[这个链接](https://stackoverflow.com/questions/10927702/getting-a-smooth-bezier-path-using-catmullromspline)以供参考并根据您的需要进行修改。希望这对您有所帮助。

# php - 使用 phpMailer 发送邮件后的空白页面

> ID：11047232
> 
> 赞同：1
> 
> 时间：2012-06-15T08:36:41.817
> 
> 标签：php, phpmailer

我正在尝试使用 phpMailer 发送邮件。这是我的代码：

```
<?php
  require_once('phpmailer/class.phpmailer.php');
  $mail = new PHPMailer(true);

  $mail->PluginDir = "phpmailer/";
  $mail->IsSMTP();
  $mail->SMTPAuth = true; // enable SMTP authentication
  $mail->SMTPSecure = "ssl"; // sets the prefix to the servier
  $mail->Host = "smtp.gmail.com";
  $mail->Port = 465;
  $mail->Username = "xxx@gmail.com";
  $mail->Password = "xxxxx";

  $mail->SetFrom('yyyya@gmail.com', 'Nasze imie i nazwisko');

  $mail->AddAddress("email@anymail.pl"); // ADRESAT

  $mail->Subject = 'Test message';

  // w zmienną $text_body wpisujemy treść maila
  $text_body = "Hello, \n\n";
  $text_body .= "Sending succesfully, \n";
  $text_body .= "PHPMailer";

  $mail->Body = $text_body;

  if(!$mail->Send())
    echo "There has been a mail error <br>";
  echo $mail->ErrorInfo."<br>";

  // Clear all addresses and attachments
  $mail->ClearAddresses();
  $mail->ClearAttachments();
  echo "mail sent <br>";
?> 
```

邮件没有发送，在浏览器中我有空白页面，没有消息。这里有什么问题？

最好的问候， 达格纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T08:40:28.447

> **邮件没有发送，在浏览器中我有空白页面，没有消息。** 这里有什么问题？

尝试设置错误检查（仅用于开发）：

```
ini_set('display_errors',  true);
error_reporting(1); 
```

将以上两行放在页面顶部。这应该现在给你一些信息，例如究竟出现了什么错误。

# 更新

我像这样修改了`class.smtp.php`文件的`Connect`功能以使其适合自己：

```
public function Connect($host, $port = 0, $tval = 30) {

  $host = "ssl://smtp.gmail.com";
  $port = 465;

  // other code 
```

我的电子邮件发送代码是有效的；

```
require("PHPMailer_v5.1/class.phpmailer.php");

$mail = new PHPMailer();
$mail->IsSMTP(); // send via SMTP
$mail->SMTPAuth = true; // turn on SMTP authentication
$mail->Username = "xxxxxxxxx@gmail.com"; // SMTP username
$mail->Password = "xxxxxxxxx"; // SMTP password
$webmaster_email = "xxxxxx@gmail.com"; //Reply to this email ID
$email = "xxxxxxx@gmail.com"; // Recipients email ID
$name = "Sarfraz"; // Recipient's name
$mail->From = $webmaster_email;
$mail->FromName = "Local Mail from Sarfraz";
$mail->AddAddress($email, $name);
$mail->AddReplyTo($webmaster_email,"Webmaster");
$mail->WordWrap = 50; // set word wrap
$mail->IsHTML(true); // send as HTML
$mail->Subject = "I am a local mail !";
$mail->Body = "Hey What's up? Have fun :)"; //HTML Body

if(!$mail->Send())
{
  echo "Mailer Error: " . $mail->ErrorInfo;
}
else
{
  echo "Message has been sent";
} 
```

# python - Python mongodb 示例应用程序

> ID：11047234
> 
> 赞同：0
> 
> 时间：2012-06-15T08:36:48.853
> 
> 标签：python, mongodb

我正在考虑将 mongodb 用于自定义应用程序。我是 mongodb 的新手，我正在寻找一个示例应用程序（最小，但比 更有用一点`hello world`），它展示了如何使用 Python 和 mongodb 编写一个小而有用的应用程序（例如博客应用程序）。

这样一个（小而有用的）应用程序将帮助我了解如何开发我的应用程序；特别是如何从 RDBMS 思维方式转变为 NoSQL 思维方式。然而，尽管在网上搜索了一段时间，我还没有遇到过这样的例子。有这样一个“有用”或“真实世界”的示例应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:47:00.693

[Tornado 简介](https://rads.stackoverflow.com/amzn/click/com/1449309070)实际上有一节介绍使用 Tornado 作为 Web 服务器和 MongoDB 作为数据库来构建博客。这本书的代码也可以在[GitHub](https://github.com/Introduction-to-Tornado/Introduction-to-Tornado)上找到，如果你想通读它以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:55:22.733

请参阅[https://github.com/mr0re1/NCR](https://github.com/mr0re1/NCR)在 Application/application/mongoloid.py。有简单的代码连接到MongoDB，并通过简单的操作。

```
connection = pymongo.Connection(settings.MONGOLOID['host'], settings.MONGOLOID['port'])
db = connection[settings.MONGOLOID['database']] 
```

“主机”、“端口”和“数据库”的描述在 settings.py 中。

所有的操作都非常简单，像这样`db['lexemes'].find(request)`，其中“lexemes”是集合名称，“request”是字典。

# eclipse - myRole plink 没有服务名称

> ID：11047236
> 
> 赞同：0
> 
> 时间：2012-06-15T08:36:54.307
> 
> 标签：eclipse, esb, wso2, bpel, wso2esb

当我尝试运行我的 BPEL 流程时，我遇到了以下错误。

**myRole plink {Partner Link name} 没有服务名称。**

> [2012-06-15 14:02:58,973] 错误 - NStateLatch - 闩锁错误，正在为状态 1 释放，但实际上在 org.apache.ode.bpel.engine.NStateLatch.release 的 -1 java.lang.Exception 中（NStateLatch .java:113) 在 org.apache.ode.bpel.engine.BpelProcess.getEndpointToMyRoleMap(BpelProcess.java:769) 在 org.apache.ode.bpel.engine.BpelProcess.initMyRoleMex(BpelProcess.java:336) 在 org. apache.ode.bpel.engine.BpelEngineImpl.createNewMyRoleMex(BpelEngineImpl.java:219) 在 org.apache.ode.bpel.engine.BpelEngineImpl.createMessageExchange(BpelEngineImpl.java:153) 在 org.wso2.carbon.bpel.core。 org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onAxisServiceInvoke(BPELProcessProxy.java:148) 上的 ode.integration.BPELProcessProxy.createMessageExchange(BPELProcessProxy.java:269)。 ode.integration。axis2.receivers.BPELMessageReceiver.handleInOutOperation(BPELMessageReceiver.java:100) 在 org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.invokeBusinessLogic(BPELMessageReceiver.java:73) 在 org.apache.axis2。 receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110) at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181) at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java: 172) 在 org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146) 在 org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199) 在 javax.servlet.http .HttpServlet.service(HttpServlet.java:641) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.eclipse.equinox.http.servlet。internal.ServletRegistration.handleRequest(ServletRegistration.java:90) 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet。服务（ProxyServlet.java:67）在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164) 在 javax.servlet.http .HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在org.apache.catalina.core.StandardContextValve 中的 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)。在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) 调用(StandardContextValve.java:164) .catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154) at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer. java:254) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector .CoyoteAdapter.service(CoyoteAdapter.java:399) 在 org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396) 在 org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534) at java.util.concurrent.ThreadPoolExecutor$ Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)
> 
> [2012-06-15 14:02:58,975] 错误 - BPELProcessProxy - 调用 ODE java.lang.IllegalArgumentException 时发生异常：在 org.apache.ode.bpel.engine.BpelProcess.setRoles(BpelProcess) 处没有 myRole plink EmployeeDSPL 的服务名称.java:546) 在 org.apache.ode.bpel.engine.BpelProcess.access$1400(BpelProcess.java:93) 在 org.apache.ode.bpel.engine.BpelProcess$HydrationLatch.doHydrate(BpelProcess.java:940)在 org.apache.ode.bpel.engine.BpelProcess$HydrationLatch.access$100(BpelProcess.java:836) 在 org.apache.ode.bpel.engine.BpelProcess$HydrationLatch$2.run(BpelProcess.java:846) 在 org .apache.ode.bpel.engine.NStateLatch.latch(NStateLatch.java:92) 在 org.apache.ode.bpel.engine.BpelProcess.getEndpointToMyRoleMap(BpelProcess.java:766) 在 org.apache.ode.bpel.engine .BpelProcess.initMyRoleMex(BpelProcess.java:336) 在 org.apache.ode.bpel.engine.BpelEngineImpl.createMessageExchange(BpelEngineImpl.java:153) 在 org.wso2 的 org.apache.ode.bpel.engine.BpelEngineImpl.createNewMyRoleMex(BpelEngineImpl.java:219) .carbon.bpel.core.ode.integration.BPELProcessProxy.createMessageExchange(BPELProcessProxy.java:269) 在 org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onAxisServiceInvoke(BPELProcessProxy.java:148) 在 org.wso2 .carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.handleInOutOperation(BPELMessageReceiver.java:100) 在 org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.invokeBusinessLogic(BPELMessageReceiver. java:73) 在 org.apache.axis2.engine.AxisEngine 的 org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)。在 org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146) 的 org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172) 接收(AxisEngine.java:181)在 org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 在 javax.servlet.http.HttpServlet.service(HttpServlet .java:722) 在 org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111 ) 在 org.wso2.carbon.bridge 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 的 org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)。BridgeServlet.service(BridgeServlet.java:164) at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) at org.apache .catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java :164) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) 在 org.apache.catalina.valves 的 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)。 org.wso2.carbon.server.CarbonStuckThreadDetectionValve 的 ErrorReportValve.invoke(ErrorReportValve.java:100)。在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563) 在 org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254) 在 org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254) 调用(CarbonStuckThreadDetectionValve.java:154)。 apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399) at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor. java:396) 在 org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356) 在 org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534) 在 java .util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:第908章）

这阻碍了..任何人都可以让我知道为什么会出现这种情况吗？

我为我的合作伙伴链接分配了适当的角色，如下所示：

![在此处输入图像描述](../Images/34e920507f2c88f8898f984b3dbc9fd4.png)

我的代码也按照显示的 UI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:13:13.827

我看到您为“EmployeeDSPL”设置了一个 myrole。但我在您的流程中没有看到任何`<receive>`使用此合作伙伴链接的活动。我认为您只是在尝试调用外部合作伙伴服务。在这种情况下，您只需要合作伙伴角色。将“我的角色”设置为“无”

高温高压

# logging - 作业历史日志文件

> ID：11047237
> 
> 赞同：0
> 
> 时间：2012-06-15T08:37:02.623
> 
> 标签：logging, hadoop, hadoop-streaming

我有使用 hadoop vaidya 工具的程序。 [http://hadoop.apache.org/mapreduce/docs/r0.21.0/vaidya.html](http://hadoop.apache.org/mapreduce/docs/r0.21.0/vaidya.html)

`$HADOOP_HOME/contrib/vaidya/bin/vaidya.sh -jobconfig <path1> -joblog <path2>`

我无法找到工作经历；我在哪里可以找到 hadoop 中的作业历史日志文件？

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:28:07.227

当您的 MR 作业完成并输出到 HDFS 中的某个位置时，检查 HDFS 输出文件夹 - 您应该会看到一个`_logs`文件夹，其中包含一个历史文件夹，该文件夹又包含您之后的两个文件（作业 conf XML 和一个作业历史记录）

# c++ - 我如何知道 C++ 中数组的长度

> ID：11047239
> 
> 赞同：1
> 
> 时间：2012-06-15T08:37:19.557
> 
> 标签：c++, arrays

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

我有一个 char 数组，我想在一个函数中处理它，我尝试了这样的代码：

```
int main(){
    char *word = new char [5];      
    /*here we make this word
    ....
    */

    process(word);
    puts(word);
}

void process(char *word){
    int sizeOfWord = sizeof(word)-1;
    /* here is cycle that process the word, I need it lenght to know how long cycle must be
    .....
    */
} 
```

但我无法获得数组的长度`sizeof`。为什么？我怎样才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:39:30.627

你不能。使用指针，无法知道大小。

你应该做的是，把长度也`word`传给你`process`。

* * *

你应该知道数组和指针是有区别的。数组确实是许多元素，因此`sizeof`数组给出了它的大小（以字节为单位）。另一方面，指针只是一个地址。它甚至可能不指向数组。由于`sizeof`运算符是在编译时计算的（可变长度数组除外），它无法知道您的意思。

想想这个例子：

```
void process(char *word);

int main(){
    char *word = new char [5];
    char *word2 = new char [10];

    process(word);
    process(word2);
    /* ... */
}

void process(char *word){
    int sizeOfWord = sizeof(word)-1;  // what should this be?
    /* ... */
} 
```

现在，知道`sizeof`在这种情况下是在编译时计算的，你认为它应该得到什么值？`5`? `10`?

* * *

旁注：看起来您正在将此数组用作字符串。在这种情况下，您可以使用 轻松获得它的长度[`strlen`](http://linux.die.net/man/3/strlen)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:39:40.170

你应该`strlen()`改用。

**编辑**：假设你的最后`word`是有效的单词`\0`。

无论如何，你使用`c++`所以你应该使用一些容器，比如`std::string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T08:41:48.340

如果您的数组始终为`char*`or`const char*`并且包含以空字符结尾的字符串，您可以使用`strlen`，甚至更轻松地使用`std::string`该类及其适当的方法。

如果它不是以空字符结尾的字符串（例如，它是一个纯字节数组，或者您的问题是关于数组的一般性问题，而这`char`只是一个示例），请使用`std::vector<char>`or`std::array<char, 5>`并调用它们的`.size()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T08:45:08.017

在 Windows 上，有一个[`_msize`](http://msdn.microsoft.com/en-us/library/z2s077bc%28v=vs.71%29)函数可以获取堆上分配的内存大小（以字节为单位）。在 VS2005 和 VS2008 中，它与 operator 完美配合`new`，因为它用于`malloc`分配内存。我必须注意：

**这不是标准方式，所以你不应该使用它！**

```
Object * addr = new Object[xxx];
size_t number_of_objects = _msize(addr) / sizeof(Object); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T08:38:48.760

不，这行不通。`sizeof`指针只返回指针类型的大小，而不是数组的大小。当您将数组作为参数传递给函数时，数组*衰减*为指针，这意味着编译器将不再知道它究竟指向什么，如果它是一个数组，它可以有多长。您在函数内部了解它的唯一方法是

*   将长度作为附加参数传递，或
*   向数组添加一个额外的终止符元素。

请注意，C 和 C++ 中的数组不会以任何方式存储它们的大小，因此程序员必须牢记这一点并相应地进行编程。在上面的代码中，你知道 的实际大小`a`是 5，但是编译器（和运行时）无法知道它。如果您将其声明为数组，即

```
char[] word = new char [5]; 
```

编译器将跟踪其大小，并`sizeof`在此声明的范围内返回此大小（以字节为单位）。这允许人们应用一个众所周知的习语来获取数组的实际大小：

```
int size = sizeof(a) / sizeof(char); 
```

但同样，这只有在编译器知道它`a`实际上是一个数组时才有效，因此在函数调用中不可能将其`a`作为（指针）参数传递。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T08:39:46.263

由于数组在这样的代码中“衰减”为指向它们的第一个元素的指针，所以你不能。指针不“知道”它指向的内存块有多大。您需要单独传递大小，例如

```
void process(char *word, size_t length); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T08:40:48.823

在 C/C++ 中只有一种方法可以知道数组的长度：已经知道它。您需要将数组的长度作为另一个参数传递。

如果您专门讨论字符串，请在数组中搜索空字符，然后使用它的索引 + 1 作为长度（这基本上是 strlen() 函数所做的）。

否则，也许您可​​以只使用 std::string ，然后获取它的长度属性？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T08:41:21.973

您要么必须将数组的长度传递给`process`函数，要么使用 null ( `\0`) 字符来标记结束。

假设后者你可以使用

```
void process(char *word)
{
  while (*word)
  {
    //do stuff with the character *word
    ++word;
   }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-15T09:27:18.823

其他答案已详细解释了为什么您无法获得经典 C 数组的大小，但我想指出以下几点。

您的示例缺少一个

```
delete [] word; 
```

在主要的末尾。否则你有内存泄漏。

这说明了为什么在 C++ 中使用数组的首选方法是使用`std::vector`or - 在固定长度的情况下 - 新的`std::array`和在字符串的情况下`std::string`。编译器将为您管理底层存储。所有这些类都提供了一个`size`功能。

# php - PHP 和 JSON：返回合适的格式

> ID：11047243
> 
> 赞同：0
> 
> 时间：2012-06-15T08:37:50.973
> 
> 标签：php, javascript, ajax, json, geolocation

我正在尝试使用谷歌地图方向 API 从数据库中映射连接城市的路线。我的问题是我被困在一个点，我应该通过 json 从 php 脚本返回值。我要映射的数据是一个数组的通知：

```
$data=array('chicago','new york','lebanon','maysvile','greenfield'); 
```

我的意图是从我的数据数组中返回以下格式。

```
var request = {
   origin:start, 
   destination:end,
   waypoints:[{
         location:"",
         stopover:true
   }],
   travelMode: google.maps.DirectionsTravelMode.DRIVING
} 
```

这就是我的起点和终点：数组中的第一个和最后一个元素：

```
$start=reset($data);     
$end=end($data); 
```

php 使用 json_encode() 返回的数据

```
 $response=array('origin'=>$start,'destination'=>$end,'travelMode'=>"google.maps.DirectionsTravelMode.DRIVING");
echo json_encode($response); 
```

返回的格式不正确。我也不知道我应该怎么做中间点。中点是选择 $start 和 $end 后剩余的所有值。任何想法都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:46:34.163

```
$response = array(
    'origin' => array_shift($data),
    'destination' => array_pop($data),
    'waypoints' => array(),
    'travelMode' => 'DRIVING'
);
foreach($data as $wp) {
    $response['waypoints'][] = array('stopover' => true, 'location' => $wp);
}
echo json_encode($response); 
```

请注意`array_shift`并`array_pop`修改`$data`数组！

脚本的输出是：

```
{
    "origin": "chicago",
    "destination": "greenfield",
    "waypoints": [
        {
            "stopover": true,
            "location": "new york"
        },
        {
            "stopover": true,
            "location": "lebanon"
        },
        {
            "stopover": true,
            "location": "maysvile"
        }
    ],
    "travelMode": "DRIVING"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:07:17.180

当您从 PHP 获得响应时，它将是一个包含 JSON 格式数据的字符串。

您将需要使用：

```
var myObject = JSON.parse(stringOfJson); 
```

将其转换为 JSON 对象。

如果您想要数据的 PHP 表示，为什么不在 PHP 中创建一个对象来表示它：

```
class RouteInformation 
{
    public $Origin;
    public $Destination;
    public $Waypoints;
    public $TravelMode;

    public function __construct() 
    {
        $this->Waypoints = array();
    }
} 
```

然后，您可以将此对象序列化为 JSON，它将采用您需要的格式。

```
$response = new RouteInformation();
$response->Origin = array_shift($data);
$response->Destination = array_pop($data);
$response->TravelMode = 'DRIVING';

foreach($data as $wp) {
    $response->Waypoints[] = array('stopover' => true, 'location' => $wp);
}

echo json_encode($response); 
```

您可以更进一步，创建一个 Waypoint 类来表示数组中的每个 Waypoint。

# facebook - 将组的所有线程（带注释）导出到文本程序（Word 或 Indesign）

> ID：11047244
> 
> 赞同：1
> 
> 时间：2012-06-15T08:37:53.930
> 
> 标签：facebook, export-to-excel

单个线程可以通过拖放导出，但在某些组中多个线程最多700条评论，无法拖放。计划在两年内导出所有线程和评论...有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:40:53.720

您是否检查过 rorohiko 的免费导出工具？ [http://www.rorohiko.com/wordpress/indesign-downloads/text-exporter/](http://www.rorohiko.com/wordpress/indesign-downloads/text-exporter/)

Loic [http://www.loicaigon.com](http://www.loicaigon.com)

# java - 应用名称在设备上看起来很奇怪

> ID：11047249
> 
> 赞同：0
> 
> 时间：2012-06-15T08:38:22.457
> 
> 标签：java, android

我已使用换行符将我的应用程序名称分成两部分，因此我的名称将出现在程序列表中图标下的两行中，如下所示：

`<string name="app_name">Munspel\nAppen</string>`

这在模拟器和我正在测试我的应用程序的三星 Galaxy 上运行良好。但是，当我在我的旧设备 Godroid V.5 android 版本 2.2.2 上安装它时，它会在名字之后显示一个方形字符 ¤。像这样： Munspel¤ 还有其他具有类似换行符的程序，就像我在列表中显示的名称通常不带 ¤ 字符一样，所以我确信应该可以找到解决方案来删除它。有人有什么想法吗？我专门为 android 版本 API 8、2.2 制作了我的应用程序，所以发生这种情况似乎很奇怪......感谢所有帮助...... Andreas

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:47:59.567

禁用app的默认标题栏，使用自己的两个textviews布局分别显示单词。这样您就不必担心不同的设备。您还可以使应用程序名称 textviews 更符合应用程序的主题。

[此链接](http://staticallytyped.wordpress.com/2011/03/18/android-dynamic-and-custom-title-bars/)说明如何创建自定义标题栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:41:25.437

启动器应用程序最终决定如何显示您的应用程序名称，因此您不能真正依赖任何特定行为。如果决定使用某些字符（或他们使用的字体）显示换行符，那么您无能为力。只需不要在您的应用名称中使用换行符，而是让启动器处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:43:09.413

如果你想要一个新行，试试这样的\r\n：Munspel\r\nAppen

# git - Git rebase --onto: atal: 需要一个修订版

> ID：11047252
> 
> 赞同：2
> 
> 时间：2012-06-15T08:38:51.333
> 
> 标签：git, rebase, git-rebase

尝试将功能分支重新定位到 master 时，我收到以下错误：

我所处的情况几乎与手册中描述的将主题移植到 master 上的情况完全相同。

```
o---o---o---o---o  master
     \
     o---o---o---o---o  next (telephony)
                  \
                   o---o---o  topic (ivr) 
```

情况略有不同，next已经被合并到master中。

我想将 ivr 移植到 master 上，但是当我这样做时出现错误：

```
dhcp-156:gitrepos barry$ git rebase --onto origin/master telelphony ivr
fatal: Needed a single revision
invalid upstream telelphony 
```

哪个看起来找不到电话分支？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T08:43:21.380

如果你想要`telephony`分支你需要说`telephony`，不是`telelphony`。

# scala - Scala文件啜饮

> ID：11047256
> 
> 赞同：20
> 
> 时间：2012-06-15T08:39:25.240
> 
> 标签：scala

关于这个问题

[在 Scala 中读取整个文件？](https://stackoverflow.com/questions/1284423/read-entire-file-in-scala)

第一个答案有一条评论，内容为

> 但我讨厌人们不知道他们可以在后备箱中执行“io.File(”/etc/passwd").slurp”。

当我尝试这样做时，斯卡拉告诉我

```
error: object File is not a member of package io 
```

我有 scala 2.9.1-1。难道我做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T10:42:50.963

文件不再是标准库的一部分。相反，您应该使用`scala.io.Source`. 要读取整个文件，您可以执行

```
val fileContents = io.Source.fromFile("my_file.txt").mkString 
```

不过，对于大文件应该避免这种情况。如果是大文件，`Source.getLines`请改用并逐行处理文件。`Source`还有很多其他方便的方法，所以在这里查看它们[http://www.scala-lang.org/api/current/index.html#scala.io.Source](http://www.scala-lang.org/api/current/index.html#scala.io.Source)

# svn - 是否可以在不被 VCS 检测到的情况下更改文件行？

> ID：11047258
> 
> 赞同：1
> 
> 时间：2012-06-15T08:39:28.387
> 
> 标签：svn, version-control, intellij-idea

对我来说，文件中很少有不应该提交给 VCS 的更改行是很常见的。对于这种情况，我：

1.  货架变化
2.  提交/合并
3.  未上架的更改

是否可以简化此工作流程？是否可以将行标记为“不可提交”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:46:42.877

将这些更改放在单独的更改列表中，例如**Don't Commit**。像往常一样提交您的默认更改列表或特定于任务的更改。IntelliJ IDEA 将处理其余部分。

如果您启用选项以在|中显示**更新项目**对话框。，你会看到：`Version Control``Confirmations`

![更新项目](../Images/5d7879a0c65e4198d10d209d3fc97fe1.png)

清理选项将取决于 VCS 集成，因为`git`支持存储，对于其他 VCS 系统，您可能只有一个`Shelve`选项。

这适用于每个文件，没有选项可以忽略特定行中的更改。

# jquery - 测试 div 创建

> ID：11047266
> 
> 赞同：1
> 
> 时间：2012-06-15T08:39:53.253
> 
> 标签：jquery, jquery-selectors

我正在使用drupal，它有一个为每个聊天创建div 的聊天模块。因为它是一个外部模块，我不想修改代码。我的问题是这样的：

如果另一个脚本创建了一个 div，jquery 有没有办法触发事件？我是否必须每 X 秒测试一次，或者类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:42:45.523

也许是这样的：

```
$('#myDiv').bind('DOMNodeInserted DOMNodeRemoved', function(event) {
    if (event.type == 'DOMNodeInserted') {
        alert('Content added! Current content:' + '\n\n' + this.innerHTML);
    } else {
        alert('Content removed! Current content:' + '\n\n' + this.innerHTML);
    }
}); 
```

有了它，您可以检查是否已将某些内容添加到某个 div。因此，如果在 myDiv 中插入了某些内容，它将触发您收听的事件，然后执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:43:04.530

这就是新的*突变事件*规范的用途。即使它仍处于早期阶段，您也可以根据需要支持的浏览器来使用它。

[功能检测：JavaScript 中的突变事件可用性？](https://stackoverflow.com/questions/4882238/feature-detect-mutation-event-availability-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:10:30.270

如果客户端浏览器支持它，你可以像这个[小提琴](http://jsfiddle.net/fragmentedreality/yRARy/1/)一样做：

```
</div>
    <input type="button" onclick="javascript: create_div();" value="create"/>
    <div id="div-area"></div>​
    <script>
    function create_div() {
        $('#div-area').append('<div class="chatdiv">new chat</div>');
    }
    $(document).ready(function() {
        $('#div-area').bind('DOMNodeInserted', function(e, o) {
            $(e.target).css('background', 'red');
        });
    });
    </script>
</div> 
```

根据您的评论，您需要注册到 onclick。这[`live()`](http://api.jquery.com/live/)是为了：

```
</div>
    <input type="button" onclick="javascript: create_div();" value="create"/>
    <div id="div-area"></div>​
    <script>
    function create_div() {
        $('#div-area').append('<div class="chatdiv">new chat</div>');
    }
    $(document).ready(function() {
        $('#div-area div.chatdiv').live('click', function(e, o) {
            $(e.target).css('background', 'red');
        });
    });
    </script>
</div> 
```

[jsfiddle](http://jsfiddle.net/fragmentedreality/zu344/2/)。

# magento - Magento - 如何以编程方式为类别设置新的父级？

> ID：11047272
> 
> 赞同：5
> 
> 时间：2012-06-15T08:40:11.473
> 
> 标签：magento, parent, categories

我正在使用这种方法，所以创建新类别：

```
private function createCat($name){
    $category = Mage::getModel( 'catalog/category' );
    $category->setStoreId( 0 );
    $category->setName( $name ); // The name of the category
    $category->setUrlKey( strtolower($name) ); // The category's URL identifier
    $category->setIsActive( 1 ); // Is it enabled?
    $category->setIsAnchor( 0 );
    // Display mode can be 'PRODUCTS_AND_PAGE', 'PAGE', or 'PRODUCTS'
    $category->setDisplayMode( 'PRODUCTS' );
    $category->setPath( '1/3' ); // Important you get this right.
    $category->setPageTitle( $name );
    $category->save();

    return $category->getId();
} 
```

在我知道 Magento 分配给该类别的 ID 之后，我在循环中调用以下方法为每个类别分配一个父类别：

```
private function assignCat($id, $parent){

    $category = Mage::getModel( 'catalog/category' )->load($id);
    $category->setPath( '1/3/'.$parent.'/'.$id ); // Important you get this right.
    $category->save();
    return;
} 
```

然而，它实际上不起作用。第一种方法可以很好地创建类别，但是在运行第二种方法后，我什至无法加载管理面板来显示类别。

我究竟做错了什么？

编辑：

我向第二种方法发送了错误的 ID。它似乎已正确填充数据库表 catalog_category_entity，但现在类别在管理视图中未正确显示。它们仍然显示好像根类别是父类，并且在数据库中，新父类显示为有 0 个子类。是否需要进行某种索引？

编辑：解决方案：

与此同时，我设法找到了解决方案。要更改父类别，我需要使用内置的类别 move() 方法移动其下的类别：

```
private function assignCat($id, $parent){
    $category = Mage::getModel( 'catalog/category' )->load($id);
    Mage::unregister('category');
    Mage::unregister('current_category');
    Mage::register('category', $category);
    Mage::register('current_category', $category);
    $category->move($parent);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-04T21:48:32.817

您可以使用`setParentId()`：

```
$category->setParentId($parentCategoryId); 
```

或者，您可以使用 Category Api 模型来创建类别：

```
$categoryData = array(
    'name'        => $name,
    'url_key'     => $urlKey,
    'is_active'   => '1',
);

$categoryApi = Mage::getModel('catalog/category_api_v2');
$categoryId = $categoryApi->create($parentCategoryId, $categoryData, $store) 
```

# java - 为什么原始数据类型在 Java 中不能为“null”？

> ID：11047276
> 
> 赞同：52
> 
> 时间：2012-06-15T08:40:40.147
> 
> 标签：java, null, primitive-types

当声明任何原始类型数据时`int`，`double`它们会被初始化为`0`or `0.0`。为什么我们不能将它们设置为`null`？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-15T08:43:21.677

原始类型只是数据。另一方面，我们所说的对象只是指向数据存储位置的指针。例如：

```
Integer object = new Integer(3);
int number = 3; 
```

在这种情况下，`object`它只是一个指向值恰好为 3 的 Integer 对象的指针。也就是说，在存储变量对象的内存位置，您所拥有的只是对数据实际位置的引用。`number`另一方面，存储的内存位置直接包含值 3。

因此，您可以将 设置`object`为 null，但这仅意味着该对象的数据为 null（即未分配）。您不能将 int 设置为 null，因为该语言会将其解释为值 0。

希望有帮助！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-15T08:44:51.310

因为 null 是一个引用。原始类型不是引用类型。只有对象是引用类型。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-15T08:44:29.817

因为Java中的原始数据类型不是`Object`s。您始终可以使用其中一个包装类来拥有一个`Object`. 八种原始数据类型中的每一种都有其对应的包装器：

*   字节：`java.lang.Byte`
*   短的：`java.lang.Short`
*   诠释：`java.lang.Integer`
*   长：`java.lang.Long`
*   漂浮：`java.lang.Float`
*   双倍的： `java.lang.Double`
*   布尔值： `java.lang.Boolean`
*   字符`java.lang.Character`

如果您对整个结构感兴趣，可以从[这里开始 (Primitive Data Types)](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-15T08:42:38.837

因为这就是语言标准所说的。

如果您希望能够通过`null`，您应该使用[包装器类型](http://docs.oracle.com/javase/tutorial/java/data/numberclasses.html)，例如，`Integer`而不是`int`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-15T08:43:46.900

因为它是原始类型而不是对象。如果您需要能够使用空值（即 Double 表示双精度、Long 表示长整数、Boolean 表示布尔值等），您可以为每种类型使用相应的对象。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-15T03:33:29.867

对象比原语涉及更多开销。以下测试显示 int 的执行速度比 Integer 快约 10 倍。

```
int n;
EtmPoint point1 = etmMonitor.createPoint("test:objects");
for (n = 0; n < 1000000; n++) {
    Integer t = 0;
    t = 10;
    t = 11;
}

point1.collect();
EtmPoint point = etmMonitor.createPoint("test:primitives");
for (n = 0; n < 1000000; n++) {
    int t = 0;
    t = 10;
    t = 11;
}
point.collect();

etmMonitor.render(new SimpleTextRenderer()); 
```

这就是 .net 实现可空原语的原因，不幸的是 java 没有可空原语。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-22T10:22:35.423

除了以上所有答案，我还想补充这一点。

对于原始类型，我们有固定的内存大小，即对于 int 我们有 4 个字节，对于 char 我们有 2 个字节。null 仅用于对象，因为内存大小不固定。

所以默认情况下，我们有，

```
 int a=0; 
```

并不是

```
 int a=null; 
```

与其他原始类型相同，因此 null 仅用于对象而不用于原始类型。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-07T22:54:32.147

首先，Primitive 和 Object Reference 的区别在于 Primitive 变量存储实际值，而对象引用变量存储它们所引用的对象的地址，在这种情况下，在对象引用中，如果没有地址，它将传递给“空值”。

Primitive 数据类型的默认值取决于原始数据类型：like byte = 0, short = 0, int = 0, long = 0L, float = 0.0f, double = 0.0d, boolean = false, char = "\u0000" .

当我们声明任何类类型的变量时，它被称为引用数据类型。

前任：

测试 t1

测试 t2

（对象包装类型）

整数 i

长升

对象引用默认值，Jvm 将引用变量初始化为“null”并且还将数组初始化为“null”

# windows-8 - Win8：在布局文件夹中注册应用程序...失败

> ID：11047277
> 
> 赞同：5
> 
> 时间：2012-06-15T08:40:43.690
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro

菜鸟警告。我对 Windows 开发工具真的很陌生。

我已经安装了最新的 Win8 RC，并为它安装了 VS 2012 RC。现在我正在尝试创建一个 Metro 风格的应用程序 (C#)，但是在从 VS 执行测试时遇到了问题。错误信息是：

```
Error : DEP0700 : Registration of the app in the layout folder "C:\<FOLDER>" failed. 

error 0x80070005: Failed to set access rights to \\?\C:\<FOLDER>

Failed to activate Metro style unit test executor. Error : The parameter is incorrect. 
```

如果尝试使用*vsttest.console.exe*从命令行运行单元测试，最初由于根证书不受信任而失败。补救措施是使用 Certutil 添加生成的 .cer 文件，然后从命令提示符运行单元测试按预期工作。

但是，Visual Studio 仍然拒绝运行测试并显示相同的错误消息。路径中的 * *\?**看起来无效，但我没有足够的 VS 经验来知道它是否正常。我还尝试了[此处](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/06b0434f-2fbc-403f-9c44-8aa2e4b1f555)和[此处](http://social.msdn.microsoft.com/Forums/en-HK/toolsforwinapps/thread/4d399046-e7fc-4dc2-9aae-51a9e5a765da)的说明，但没有任何用处。

跑步

```
Get-WinEvent -logname Microsoft-Windows-Appx* |Select-Object -first 10|Out-GridView 
```

说“最后一次成功达到的状态是 PrerequiesitesCheced”，但否则给我或多或少与上面相同的“无法设置访问权限”错误。

更多背景信息：

*   这是一个共享（通过 vcs）项目，它在其他开发机器上运行良好
*   签名证书不是“我的”，但由于它是从 cmd 运行的，我认为它不可能是根本原因
*   测试是使用 Visual Studios 单元测试框架编写的，例如 NUnit 似乎不太适合 Metro 应用程序。
*   目录中的权限应该没问题，我检查了所有文件和目录都归我所有，并且具有读/写访问权限
*   笔记本上有另一个用户，他用过VS，但是项目没有共享，并且从那时起重新生成了应用程序和签名ID。我还在搜索问题的解决方案时删除了用户名。

有没有人遇到过类似的情况，并设法以某种方式解决它？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:49:02.000

我通过应用清单更改包名称解决了这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T10:06:41.157

就我而言，事实证明我对每个文件夹都进行了加密。要运行该应用程序，我必须禁用整个解决方案文件夹（和子文件夹/文件）的加密。

* * *

## 如何：

首先右键单击文件夹然后属性：

![下拉式菜单](../Images/30fc74f4cccf259d56a31d523be2ecdc.png)

然后点击高级：

![文件夹属性](../Images/73c7d0eef49978eae2eaf6a634aca0bc.png)

然后取消选择

> 加密内容以保护数据

![先进的](../Images/841c73f604b5aff751c5bb46fb68bf80.png)

最后点击应用。然后会询问您将更改应用到哪里。选择

> 将更改应用到此文件夹、子文件夹和文件

![应用更改](../Images/5f06f8c3fe2a4b6a283e0eb771ffad95.png)

现在你完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:00:18.043

我们从未设法找出原因，为了节省时间，我最终擦除了整个环境，并最终重新安装了 windows。我为此使用了专用机器，MS 使安装过程变得非常简单，所以这没什么大不了的。我猜是预发布的问题，因为我再也没有遇到过类似的问题，我的团队中也没有其他人。

# .net - 为什么我对 DateTime.TryParseExact 的调用失败？

> ID：11047282
> 
> 赞同：4
> 
> 时间：2012-06-15T08:41:06.630
> 
> 标签：.net, datetime

简单的问题：

我打电话：

```
DateTime.TryParseExact("May 16 13:47:12 2012", "MMM dd hh:mm:ss yyyy", System.Globalization.CultureInfo.GetCultureInfo("en-US"), DateTimeStyles.None, out parsedStartDate) 
```

结果是*假*的。

为什么我做错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T08:43:06.747

您输入的时间是 24 小时制（小时部分是 13）。

您需要使用 HH 而不是 hh 来获得 24 小时时间。

这是有关所有时间格式字符串的有用 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# entity-framework - 如何在 EF 中提取实体属性列映射

> ID：11047287
> 
> 赞同：1
> 
> 时间：2012-06-15T08:41:27.827
> 
> 标签：entity-framework

我一直在寻找这个问题的答案。虽然我看过很多类似的帖子，但似乎都以“您需要直接从 XML 中读取映射数据”来回答，但我看不到如何做到这一点的示例。

我使用的是 EF 4.1，数据库优先和 Dbcontext。我正在尝试实现一个审核过程，这是通过在我的自定义上下文中覆盖 SaveChanges 来完成的。我查询状态管理器以撤回修改的记录等。所有标准的东西和很多很好的例子。

但是，我想写入数据库中的单个审计表，其中列名被更改以及该列所属的表名。目前我只是写出列记录的实体属性名称和表记录的实体类型。好的，这可行，但这并不完全正确，因为我应该写映射的列/表名而不是概念表示。到目前为止，我所有的实体都使用精确映射，即它们与数据库名称相同。但是，如果开发人员有一天从新表创建实体并为映射指定不同的名称，我的审计将不正确。例如，我将有一个不存在的列名的审计详细信息！另外，我知道您可以将一个实体映射到多个表。所以这就是我想要做的理想：

在实体属性级别，我想从数据库中找出列名及其所属的表名（包括完整架构 - 即对于表 MySchema.MyTable 我想写入审计表 MySchema.MyTable 不只是我的表）。这个过程将保护审计过程从开发人员编辑映射名称，或从多个表创建实体等。

所有示例都说您需要使用 CSSpace 数据集，因为它包含从数据存储 (SSpace) 到概念存储 (CSpace) 的关系信息。但这显然是在内部使用的，不能通过 metadataworkspace API 访问。相反，我应该直接阅读 CSSpace 的 XML 吗？如果是这样，这个文件在哪里（嵌入到程序集中？）我如何阅读它？我会认为我想做的是非常基本且明显的要求，但似乎很难做到。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:46:04.583

如果我正确理解您的问题，模型的 XML 就是模型文件 - 如果您右键单击模型并选择“打开方式 - XML 编辑器”，您可以看到它。

# iphone - 批量渲染以及我应该如何去做

> ID：11047288
> 
> 赞同：0
> 
> 时间：2012-06-15T08:41:29.320
> 
> 标签：iphone, ios, cocoa-touch, opengl-es

我有一个 iOS 2D 渲染引擎，能够从 spritesheet/纹理图集渲染单个帧。但是，它通过将 spritesheet 切割成每一帧的不同纹理来实现这一点。正如您所猜想的那样，即使在每帧仅绘制一个实体的情况下，在制作动画时也会非常慢，因为每帧都会调用 glBindTexture。

因此，我对其进行了更改，以便将 spritesheet 保持为一体，并在运行时将 spritesheet 纹理简单地剪辑到所需的帧。这是一段示例代码，我打算稍作修改，但具有我正在寻找的一般预期效果。

```
- (void) drawInRect:(CGRect)dest withClip:(CGRect)src withRotation:(CGFloat)rotation {
GLfloat 
    gx0 = src.origin.x/_width, gx1 = (src.origin.x+src.size.width)/_width,
    gy0 = src.origin.y/_height, gy1 = (src.origin.y+src.size.height)/_height;
GLfloat     coordinates[] = { 
    gx0,    gy1,
    gx1,    gy1,
    gx0,    gy0,
    gx1,    gy0 
};
GLfloat vertices[] = {  
    -dest.size.width/2,     -dest.size.height/2,    0.0,
    dest.size.width/2,      -dest.size.height/2,    0.0,
    -dest.size.width/2,     dest.size.height/2,     0.0,
    dest.size.width/2,      dest.size.height/2,     0.0 
};

glBindTexture(GL_TEXTURE_2D, _name);
glVertexPointer(3, GL_FLOAT, 0, vertices);
glTexCoordPointer(2, GL_FLOAT, 0, coordinates);

glPushMatrix();
glTranslatef(dest.origin.x+dest.size.width/2, dest.origin.y+dest.size.height/2, 0);
glRotatef(rotation, 0, 0, 1); //in degrees, about screen origin.
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
glPopMatrix();
} 
```

但是我想编辑它，以便我可以加载一个包含多个不同剪切矩形的数组（例如想要从一个精灵表中绘制多个项目的情况）。但是，据我了解，如果我只是将更多三角形加载到顶点数组中并开始将更多直角坐标粘贴到坐标数组中，那不会在纹理绑定的不同三角形之间的空间中导致一些讨厌的纹理拉伸到。如果是这样，我什至有办法将多个帧从同一个 spritesheet 批量渲染到屏幕的不同部分？

我理解我想要的结果是否不完全清楚。如果您需要我详细说明任何事情，请告诉我，我很乐意尽我所能更好地解释。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:05:38.890

具有批处理渲染的对象是在尽可能少的调用中将尽可能多的数据获取到 opengl。以此为指导原则，您可以采取的提高批处理效率的步骤是：

1.  使用 spritesheet 减少纹理绑定 - 纹理绑定相对昂贵，因此将它们最小化非常重要。
2.  不要一次绘制一个精灵 - 将几何图形批量化为一个大 VBO 并一次绘制。这意味着：
    *   您将无法使用 GL_TRIANGLE_STRIP，因为您的精灵不会在屏幕上全部连续，请尝试使用 GL_TRIANGLES 渲染索引缓冲区。
    *   您将无法使用 glTranslate 等 - 您必须自己计算

# mysql - 在 MySQL 中创建无模式（面向文档）表

> ID：11047297
> 
> 赞同：-2
> 
> 时间：2012-06-15T08:42:01.020
> 
> 标签：mysql, database-design, nosql, rdbms, object-oriented-database

我们正在开发基于 LAMP 的软件，以客户数据为中心单元。包含客户数据的表格由各种来源通过导入接口提供。问题是，表不能有固定的模式。可能 X 行有 5 列，Y 行有 20 列。

我们之前的解决方案如下：

```
CREATE TABLE `customers` (
  `id` int (10) unsigned NOT NULL auto_increment,
  `branch_id` int (10) unsigned NOT NULL,
  `type` tinyint (1) DEFAULT NULL,
  `visible` tinyint (1) DEFAULT NULL,
  `status` tinyint (1) NOT NULL DEFAULT '1',
  `2` varchar (255) NOT NULL,
  `3` varchar (255) NOT NULL,
  `4` varchar (255) NOT NULL,
  `5` varchar (255) NOT NULL,
  `6` varchar (255) NOT NULL,
  `7` varchar (255) NOT NULL,
  `8` varchar (255) NOT NULL,
  `9` varchar (255) NOT NULL,
  `10` varchar (255) NOT NULL,
  `11` varchar (255) NOT NULL,
  `12` varchar (255) NOT NULL,
  `13` varchar (255) NOT NULL,
  `14` varchar (255) NOT NULL,
  `15` varchar (255) NOT NULL,
  `17` varchar (255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `branch_id` (`branch_id`)
  FULLTEXT KEY `search` (`2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `10`, `11`, `12`, `13`, `14`, `15`)
) ENGINE = MyISAM DEFAULT CHARSET = utf8; 
```

这个表开销很大，因为我们不知道表中将存储什么样的数据，所以我们只需要创建 varchar(255) 列。这里没有看到第二个表，我们在其中存储了列的名称。这张表看起来像这样：

```
id   col   name
====================
1    2     firstname
2    8     zip 
```

如您所见，我们从仅包含基本列的表开始。然后，我们在每次导入或更新完成时检查是否添加了新列或不再需要列。如果是这种情况，我们已经删除了相应的列或添加了新列。此外，我们总是不得不调整附加表。

这个解决方案在速度、简单性和逻辑性方面对我们来说是一种妥协。在我们看来，最明显的解决方案是使用像 MongoDB 这样的面向文档的 DBMS。

不幸的是，我们被迫只使用 MySQL。是否有在 MySQL 中创建无模式表的解决方案？还是有其他更有用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:57:57.003

您应该探索[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model "维基百科上的 EAV 模型")模式。如果您使用的是 PHP，那么有一些工具包可以使您的编码更容易：

*   [http://code.google.com/p/zend-framework-eav/](http://code.google.com/p/zend-framework-eav/)
*   [http://eavframework.svn.sourceforge.net/](http://eavframework.svn.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:39:59.383

我不确定这是否对你有用，我只是在自己学习和探索这样做，所以我欢迎来自社区的任何更正：

鉴于此时我会考虑组合一些“无模式”表那就是

```
    创建表`客户`（
      `id` int (10) unsigned NOT NULL auto_increment,
      `branch_id` int (10) unsigned NOT NULL,
      `type` tinyint (1) 默认为空，
      `visible` tinyint (1) 默认为 NULL，
      `status` tinyint (1) NOT NULL DEFAULT '1',
       主键（`id`），
      KEY `branch_id` (`branch_id`)
      FULLTEXT KEY `search` (`2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, ​​`10`, `11`, `12`, `13`、`14`、`15`）
    ) 引擎 = MyISAM 默认字符集 = utf8；

    创建表 cust_info (
    id int(10) unsigned NOT NULL auto_increment,
    custid int(10) 无符号非空，
    名称 varchar(32) 非空，
    值 varchar(255),
    主键（`id`），
    KEY `custid` (`custid`)
    ) 引擎 = MyISAM 默认字符集 = utf8；

```

现在只需将“额外”信息存储在 cust_info 表中，并将其分配给正确的 custid。如果你希望你的表变得非常大，那么在 mysql 中查找无模式（google it），你可以找到一些关于如何正确实现它的好文章（而不是我上面的 hack）。这些文章讨论了构建索引表，以便您可以在数据库上执行索引维护，而不会使 mysql 进入非常缓慢的响应状态。

# iphone - 我的应用程序在上传数据时收到内存警告后崩溃

> ID：11047302
> 
> 赞同：0
> 
> 时间：2012-06-15T08:42:12.923
> 
> 标签：iphone, objective-c, cocoa-touch, cocoa, asihttprequest

每次我都会通过调用下面的方法上传一段2Mb左右的数据。

调用大约 30 次后，应用程序将收到内存警告，然后大约 20 次后，应用程序将崩溃而没有任何信息。我​​的代码有什么问题吗？我没有在我的代码中发现任何内存泄漏。

```
//connect to uploading server, upload one slice of data, and get the next slice uploading point.
-(void)uploadSlice
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSURL *baseUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gupload/upload_slice",_uploadServerIP]];
    NSData *sliceData = nil;  
    NSFileHandle *file = [NSFileHandle fileHandleForReadingAtPath:item.filePath];  
    if (file == nil)  
        NSLog(@"Failed to open file");  

    [file seekToFileOffset:_offset];  
    sliceData = [file readDataOfLength:_length];  
    [file closeFile];
    NSMutableData *data = [NSMutableData dataWithData:sliceData];
    NSDictionary *dic    = [[NSDictionary alloc]initWithObjectsAndKeys:
                            _uploadToken,                                  @"upload_token",
                            [NSString stringWithFormat:@"%d",_sliceTaskId],@"slice_task_id",
                            [NSString stringWithFormat:@"%lld",_offset],   @"offset",
                            [NSString stringWithFormat:@"%d",_length],     @"length",
                            nil];

    NSURL *finalUrl = [self generateURL:[baseUrl absoluteString] params:dic];
    NSLog(@"upload slice url = %@",finalUrl);
    ASIFormDataRequest *aRequest = [ASIFormDataRequest requestWithURL:finalUrl];
    [aRequest setPostBody:data];

    aRequest.requestMethod = @"POST";
    [self setPostUserInfo:aRequest withRequestType:kYoukuUploadSlice];
    [_networkQueue addOperation:aRequest];

    [dic release];
    [pool drain];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:13:18.863

您一次排队太多请求 - ASIHTTPRequest 会将您的数据保留在内存中，直到将其发送到服务器，因此内存不足也就不足为奇了。

尝试确保队列中未处理的请求不超过 3 或 4 个 - 即。队列 4 开始，然后在一个完成后排队另一个，依此类推。

# testing - 如何在 Symfony2 WebTestCase 中重定向后获取当前 URL？

> ID：11047305
> 
> 赞同：38
> 
> 时间：2012-06-15T08:42:25.080
> 
> 标签：testing, symfony

使用 Symfony2 WebTestCase，我有以下测试：

```
$client->request('GET', '/');
$this->assertTrue($client->getResponse() instanceof RedirectResponse);

$crawler = $client->followRedirect(); 
```

我想**在重定向**结束后测试新的 URL，`/login`但我没有找到访问新 URL 的方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T09:15:04.670

您可以使用 获取当前 URL ，并使用`$client->getResponse()->headers->get('location')`断言它以*/login*`assertRegExp()`结尾。

```
$this->assertRegExp('/\/login$/', $client->getResponse()->headers->get('location')); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-22T09:34:50.437

刚刚尝试了 Samy Dindane 解决方案但没有成功（也许从 2.0 开始有所改变）

无论如何，在 2.1 中，我能够在测试中检索当前 URL：

```
$client->getRequest()->getUri() 
```

然后，您可以使用 assertRegexp()。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-16T11:27:35.353

你也可以这样做（Symfony 2.3）

```
$client->getHistory()->current()->getUri() 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-22T20:33:29.933

`$client->getResponse()->getTargetUrl()`您可以在之前添加此行`$client->followRedirect()`以获取您将被重定向的 url

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-30T20:48:33.703

测试从 /sample 到 /target 的重定向（也可以是绝对 url）

```
$crawler = $client->request('GET', '/sample');

$this->assertTrue($client->getResponse() instanceof RedirectResponse);
$this->assertTrue($client->getResponse()->isRedirect('/target')); 
```

# jquery - 将id转换为grails中的数字

> ID：11047306
> 
> 赞同：0
> 
> 时间：2012-06-15T08:42:28.650
> 
> 标签：jquery, grails, count, html-table, element

在表格中列出项目的 id，如下所示：

`<g:sortableColumn style="width: 20px" property="id" title="${message(code: 'packet.id.label', default: 'Id')}" />`

```
<g:each in="${packetInstanceList}" status="i" var="packetInstance">
          <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">

             <td><g:link controller="packet" action="show"  id="${packetInstance.id}">${fieldValue(bean: packetInstance, field: "id")}
</g:link></td> 
```

显示来自域数据包的​​项目的 ID。

我想把它们变成一个计数，从 1 开始，独立于 id 号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:52:30.037

尝试：

```
<g:each in="${packetInstanceList}" status="i" var="packetInstance">
  <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">
    <td>
      <g:link controller="packet" action="show"  id="${packetInstance.id}">${i + 1}</g:link> 
    </td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:52:11.163

如果我对你的理解正确，你想输出你已经为每个循环设置的 i 增加 1 导致它基于 0

```
<g:link controller="packet" action="show" id="${packetInstance.id}">
    ${i+1}
</g:link> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:47:10.747

`var cnt = $("td [id!='']").length();`不行吗？

这是 jQuery 顺便说一句。

[.length()](http://api.jquery.com/length/)获取当前匹配的元素总数。.size() 方法将返回相同的值。

# python - 异步运行 Flask-Mail

> ID：11047307
> 
> 赞同：3
> 
> 时间：2012-06-15T08:42:30.493
> 
> 标签：python, email, flask

我正在使用 Flask-Mail 扩展从我的 Flask 应用程序发送电子邮件。它同步运行 send() 方法，我必须等到它发送消息。我怎样才能让它在后台运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-23T16:16:59.727

它没有那么复杂——你需要在另一个线程中发送邮件，所以你不会阻塞主线程。但是有一个技巧。

这是我的代码，它呈现模板，创建邮件正文，并允许同步和异步发送它：

**mail_sender.py**

```
import threading
from flask import render_template, copy_current_request_context, current_app
from flask_mail import Mail, Message

mail = Mail()

def create_massege(to_email, subject, template, from_email=None, **kwargs):
    if not from_email:
        from_email = current_app.config['ROBOT_EMAIL']
    if not to_email:
        raise ValueError('Target email not defined.')
    body = render_template(template, site_name=current_app.config['SITE_NAME'], **kwargs)
    subject = subject.encode('utf-8')
    body = body.encode('utf-8')
    return Message(subject, [to_email], body, sender=from_email)

def send(to_email, subject, template, from_email=None, **kwargs):
    message = create_massege(to_email, subject, template, from_email, **kwargs)
    mail.send(message)

def send_async(to_email, subject, template, from_email=None, **kwargs):
    message = create_massege(to_email, subject, template, from_email, **kwargs)

    @copy_current_request_context
    def send_message(message):
        mail.send(message)

    sender = threading.Thread(name='mail_sender', target=send_message, args=(message,))
    sender.start() 
```

注意`@copy_current_request_context`装饰器。这是必需的，因为 Flask-Mail 内部使用请求上下文。如果我们将在新线程中运行它，则会丢失上下文。`@copy_current_request_context`我们可以通过- Flask 将在调用函数时推送上下文来防止这个装饰函数。

要使用此代码，您还需要`mail`使用 Flask 应用程序初始化对象：

**运行.py**

```
app = Flask('app')
mail_sender.mail.init_app(app) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-13T05:16:08.480

使用[Flask-Executor](https://github.com/dchevell/flask-executor)。完全公开，我自己写了它来解决这个确切的问题。

为什么？

1.  使用 concurrent.futures 来设置线程池而不是手动管理线程可以防止创建任意数量的线程。相反，预定义的线程池用于运行从队列馈送的作业。
2.  Flask-Executor 为提交的任务提供当前请求上下文*和*当前应用程序上下文，因此您无需编写任何处理代码来管理它

这是它的样子：

```
from flask import Flask, current_app
from flask_executor import Executor
from flask_mail import Mail, Message

app = Flask(__name__)
# Set email server/auth configuration in app.config[]

executor = Executor(app)
mail = Mail(app)

def send_email(to, subject, message_text, message_html):
    msg = Message(subject, sender=current_app.config['MAIL_USERNAME'], recipients=[to])
    msg.body = message_text
    msg.html = message_html
    mail.send(msg)

@app.route('/signup')
def signup():
    # My signup form logic
    future = executor.submit(send_email, 'recipient@example.com', 'My subject', 'My text message', '<b>My HTML message</b>')
    print(future.result())
    return 'ok'

if __name__ == '__main__':
    app.run() 
```

基本上，您编写`send_email`函数就像运行常规内联逻辑一样，并将其提交给执行程序。无论您发送多少电子邮件，只会运行执行程序中定义的最大线程数（默认为 5* 数量的 CPU 内核），并且请求中的任何溢出`send_email`都会排队。

总体而言，您的代码保持简洁，您无需为要运行的每个异步函数编写一堆包装代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T16:37:36.213

我想简化 Marboni 的代码，所以看看这里。

```
import threading

from flask import copy_current_request_context
from flask_mail import Message
from app import app, mail

def create_message(recipient, subject, body):

    if not recipient:
        raise ValueError('Target email not defined.')

    subject = subject.encode('utf-8')
    body = body.encode('utf-8')

    return Message(subject, [recipient], body, sender=app.config['MAIL_USERNAME'] or "groundifly@gmail.com")

def send_async(recipient, subject, body):

    message = create_message(recipient, subject, body)

    @copy_current_request_context
    def send_message(message):
        mail.send(message)

    sender = threading.Thread(name='mail_sender', target=send_message, args=(message,))
    sender.start() 
```

# java - Spring 3 独立应用程序不会将输出写入文件

> ID：11047308
> 
> 赞同：1
> 
> 时间：2012-06-15T08:42:32.737
> 
> 标签：java, spring, log4j

我有一个 Spring 3 独立应用程序，并且正在使用 log4j 进行日志记录。Log4j 设置是下面粘贴的 xml 中的设置。我将日志输出写入控制台，但没有写入日志文件。

Log4j 在*Main*类中通过语句初始化：

```
DOMConfigurator.configure("abanol-loader-log4j.xml"); 
```

我已经尝试通过更改记录器级别值，更改记录器*文件中属性可**加性*的值，甚至删除它。我将输出写入控制台，但没有写入日志文件（但它已创建）。

 *我已经成功验证了 XML 文件，我已经用谷歌搜索了一个解决方案，但我什么也没得到。任何想法？

提前致谢。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" threshold="debug" debug="false">

   <appender name="console" class="org.apache.log4j.ConsoleAppender">
      <param name="Target" value="System.out"/>
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%-5p %c - %m%n"/>
      </layout>
   </appender>

   <appender name="file" class="org.apache.log4j.RollingFileAppender">
      <param name="File" value="abanol-loader.log"/>
      <param name="MaxFileSize" value="25MB"/>
      <param name="MaxBackupIndex" value="20"/>
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%5p-%d{ISO8601}-[%t]-%C.%M:%L(%c{1}) - %m%n"/>
      </layout>
   </appender>

   <logger name="es.pack1.mypackage" additivity="true">
      <level value="DEBUG"/>
      <appender-ref ref="file"/>
      <appender-ref ref="console"/>
   </logger>

   <logger name="org.springframework" additivity="true" >
      <level value="WARN"/>
      <appender-ref ref="file"/>
   </logger>

   <logger name="net.sf.jasperreports" additivity="false">
      <level value="DEBUG"/>
      <appender-ref ref="file"/>
   </logger>

   <root>
      <level value="DEBUG" />
      <appender-ref ref="console"/>
      <appender-ref ref="file"/>
   </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:06:34.300

您已经在 log4j.xml 中配置了“控制台 Appender”和“RollingFile Appender”

所以，Log4j 默认选择第一个。即，Console Appender 作为日志记录。

所以，它在控制台（System.out.println）中写日志报告

请删除Console Appender，然后它会自动将日志保存在文件中............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:28:49.767

我终于用属性文件替换了 log4j XML 配置。我认为它与我使用的 XML 相同，但它可以工作，而 XML 不能。我真的不知道为什么。

```
log4j.rootCategory=DEBUG, S, file

log4j.logger.es.bod.freenergy.abanol=DEBUG, file

log4j.appender.S = org.apache.log4j.ConsoleAppender
log4j.appender.S.layout = org.apache.log4j.PatternLayout
log4j.appender.S.layout.ConversionPattern =%5p-%d{ISO8601}-[%t]-%C.%M:%L(%c{1}) - %m%n

log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File =abanol-loader.log
log4j.appender.file.MaxFileSize = 10Mb
log4j.appender.file.MaxBackupIndex=25
log4j.appender.file.Append = false
log4j.appender.file.layout = org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%5p-%d{ISO8601}-[%t]-%C.%M:%L(%c{1}) - %m%n 
```

无论如何，感谢谁回答了我的问题。*

# sql - 为什么我得到空值，当尝试从表中获取最后一个标识值时

> ID：11047309
> 
> 赞同：-1
> 
> 时间：2012-06-15T08:42:35.623
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我在数据库中有一个表（日志表，它已作为 ssis 错误处理和日志记录的一部分创建）e。我在此表中插入一行并尝试使用 scope_identity() 从表中获取最后一个标识值但是我的 scope_identity?() 为**NULL**。请参阅 dml 语句和用作一个存储过程的一部分的 scope_identity() 语句

```
insert into logging.execution_log
            (ParentLogID, Description, PackageName, PackageGuid, MachineName, ExecutionGuid, LogicalDate, Operator, StartTime, EndTime, Status,FailureTask)
        select @ParentLogID, @Description, @PackageName, cast(@PackageGuid as uniqueidentifier), @MachineName, cast(@ExecutionGuid as uniqueidentifier),
                @logicalDate, @operator, getdate(), null, @status, null

**set @LogID = cast(scope_identity() as int)** 
```

但是当我尝试获取 @logid 的值时，它只返回 null

请注意，在logging.execution_log 表的**LogId列上已经有一个标识规范**

## 问候

***其他详细信息（我刚刚完成一些测试后才明白）** 作为测试的一部分，我手动插入了一些新行，如下所示插入 logging.execution_log（ParentLogID、描述、PackageName、PackageGuid、MachineName、ExecutionGuid、LogicalDate、Operator , StartTime, EndTime, Status,FailureTask)

```
 select 1, 2, 3, **NEWID()**,
     5, **NEWID()**,
            7, 8, getdate(), null, 0, null

select scope_identity()
select * from logging.execution_log 
```

然后它显示身份的最后一个值............很好，但问题是当我将 PackageGuid 作为**system::Packageid**（ssis 系统变量）和 ExecutionGuid 作为**system::executioninstanceGUID**然后它插入表中的行正确，但我无法使用 scope_identi 或 @@identity 或 ident_current 获取最后一个标识值（全部显示为空）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:49:06.637

使用输出到子句：

```
insert into logging.execution_log
            (ParentLogID, Description, PackageName, PackageGuid, MachineName, ExecutionGuid, LogicalDate, Operator, StartTime, EndTime, Status,FailureTask)
        output LogID into @LogID
        select @ParentLogID, @Description, @PackageName, cast(@PackageGuid as uniqueidentifier), @MachineName, cast(@ExecutionGuid as uniqueidentifier),
                @logicalDate, @operator, getdate(), null, @status, null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:06:27.297

```
begin try
    Set XACT_ABORT ON
    BEGIN TRAn
            INSERT into logging.execution_log
                (ParentLogID, Description, PackageName, PackageGuid, MachineName, 
                ExecutionGuid, LogicalDate, Operator, StartTime, EndTime, Status,FailureTask)
            Values(@ParentLogID, @Description, @PackageName, 
                cast(@PackageGuid as uniqueidentifier), @MachineName, 
                cast(@ExecutionGuid as uniqueidentifier),  @logicalDate, 
                @operator, getdate(), null, @status, null)

            Set @LogID = scope_identity()
    Commit Tran
End try

Begin Catch
    Select Error_Message();
    Rollback Tran
End Catch 
```

# javascript - 如何根据会话禁用href

> ID：11047320
> 
> 赞同：1
> 
> 时间：2012-06-15T08:43:10.353
> 
> 标签：javascript, asp.net, session, href

我陷入了无法找到任何解决方案的位置

我有一个链接和按钮，这是我将页面保存在 db 中的代码，所以我无法创建服务器控件，因为它不会呈现它

```
 <div id="DivCMS" runat="server"></div>// i use this in server side

//this code is saved in db table CMS_Pages//////begin
     <a href="User/Register.aspx" id="alinkRegister" >
    <img src="App_Themes/White/Images/getstarted.png" style="padding-left: 117px;" />
    </a>
//this code is saved in db table CMS_Pages//////end 
```

在页面加载时，我用 db 中的数据填充 div

```
if (!IsPostBack){
                var cp = new CMS_Pages();//Data Access block
                cp.LoadByPrimaryKey(12);// load data
                LiteralControl Ref = new LiteralControl(cp.PageHeader);
                Page.Header.Controls.Add(Ref);
                DivCMS.InnerHtml = cp.PageHtml;} 
```

我如何根据javascript中的会话禁用href，即

```
if (session["UserId"] !=null) then href=# <br>
else href="User/register.aspx" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:49:45.920

您可以将其替换为 # if has a session

```
if (session["UserId"] != null) 
{
    cp.PageHtml=cp.PageHtml.Replace("User/Register.aspx","#");
} 
```

# c# - 为什么这不起作用？不执行代码？

> ID：11047321
> 
> 赞同：0
> 
> 时间：2012-06-15T08:43:10.600
> 
> 标签：c#, stored-procedures, ado.net, autocomplete, sqldatareader

我正在尝试使用数据库中的值自动完成文本框。当我进行子弹测试时，代码将一直运行，直到`if`下面函数中的语句。有人可以告诉我为什么我的代码在那之后不会执行`if`吗？

我正在尝试运行以下命令，但它一直在之前跳出`if`：

```
public AutoCompleteStringCollection AutoCompleate(string dataBase, string procedure)
{
        AutoCompleteStringCollection namesCollection =
            new AutoCompleteStringCollection();

        SqlDataReader dReader;
        SqlCommand cmd = new SqlCommand(procedure, con);
        cmd.CommandType = CommandType.StoredProcedure;
        con.Open();
        dReader = cmd.ExecuteReader(); // This is the last place my bullet check 
                                       // gets before it hop's out!
        if (dReader.HasRows == true)
        {
            while (dReader.Read())
                namesCollection.Add(dReader["SystemUser"].ToString());
        }
        con.Close();
        dReader.Close();
        return namesCollection;
    } 
```

***附加信息，但请关注以上内容！***

* * *

*请询问您是否需要任何信息。:)*

* * *

**对上述的呼吁：**

```
textBoxUser.AutoCompleteMode = AutoCompleteMode.Suggest;
textBoxUser.AutoCompleteSource = AutoCompleteSource.CustomSource;
textBoxUser.AutoCompleteCustomSource = 
    DatabaseService.Instance.AutoCompleate("AuditIT", "AutoCompleate"); 
```

**存储过程：**

```
USE [AuditIT]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
--Allow textboxs to have a autocomplete
 ALTER procedure [dbo].[AutoCompleate] 
 as

 Select distinct SystemUser from SchemaAudit
             order by SystemUser asc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:48:41.380

尝试访问数据库时出现未处理的异常。尝试将代码重构为：

```
try{

if (dataBase.Length > 0) { procedure = dataBase + ".." + procedure; } //Set procedure to DBNAME..ProcedureName

SqlDataReader dReader;
            SqlCommand cmd = new SqlCommand(procedure, con);
            cmd.CommandType = CommandType.StoredProcedure;
            con.Open();
            dReader = cmd.ExecuteReader(); // This is the last place my bullet check gets before it hop's out!
            if (dReader.HasRows == true)
            {
                while (dReader.Read())
                    namesCollection.Add(dReader["SystemUser"].ToString());
            }
            con.Close();
            dReader.Close();
}
catch(Exception e)
{
    // handle the exception better than me :)
    Console.WriteLine(e.Message);
} 
```

在 console.WriteLine 上放置一个消息框或断点，看看会发生什么。

# sql - 如何仅返回 numberid 列中包含无效数字的 id？

> ID：11047334
> 
> 赞同：0
> 
> 时间：2012-06-15T08:44:23.783
> 
> 标签：sql, select, group-by, firebird

我有一个这样的数据集

```
id,  numberid  
1,   45  
1,   45  
1,   41  ->invalid number, should be 45  
2,   60  
2,   60  
2,   60  
3,   71  
3,   71  
3,   72  ->invalid number, should be 71 
```

每组行 (1,2,3) 也应包含相同的代码编号。第 1 组的编号无效（已标记），第 3 组的编号无效（已标记）。
如何仅返回包含无效数字的组 ID（如 1 和 3）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:38:49.063

这将向您显示组和不太受欢迎的 numberid

```
select 
    your_table.id, numberid
from your_table 
    inner join  (select id from your_table group by id having count(distinct numberid) >1) distinctitems 
        on your_table.id = distinctitems.id
    inner join 
        (
            select id, max(numbercount) as occurrencesofmostpopular
            from
            (
                select id, numberid, count(*) as numbercount
                from your_table 
                group by id, numberid
            ) a
            group by id
        ) mostpopular
        on your_table.id = mostpopular.id

group by your_table.id, your_table.numberid, occurrencesofmostpopular
having (count(*)<occurrencesofmostpopular) or (occurrencesofmostpopular=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:56:17.683

这个查询应该可以解决问题：

```
SELECT id FROM your_table GROUP BY id HAVING COUNT(numberid) > 1; 
```

如果您想知道什么特定值具有 invlid numberid，那么您将不需要复杂的查询，并且您必须定义“无效数字”是什么。无效数字是当前 ID 出现次数最少的数字吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:09:17.520

试试这个查询：

```
SELECT
  g.id,
  COUNT(g.id)
FROM
  (SELECT id, numberid FROM your_table GROUP BY 1, 2) g
GROUP BY
  1
HAVING
  COUNT(g.id) > 1 
```

# python - 如何使用子进程运行命令模块？

> ID：11047336
> 
> 赞同：1
> 
> 时间：2012-06-15T08:44:32.957
> 
> 标签：python, subprocess

我想在我的 python 代码中使用类似这样的 subprocess.call 调用模块avail 和模块laod。

```
 subprocess.call(['module avail calibre','&','module load calibre']) 
```

但是当我运行这段代码时，它会返回：

OSERROR (2, '没有这样的文件或目录')

关于子流程的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:13:20.833

如果您尝试运行此 shell 命令：

```
$ module avail calibre & module load calibre 
```

使用子进程尝试：

```
subprocess.call(['module','avail','calibre','&','module','load','calibre']) 
```

或者：

```
subprocess.call('module avail calibre & module load calibre',shell=True) 
```

# android - 小部件更新时出现数据库错误

> ID：11047338
> 
> 赞同：0
> 
> 时间：2012-06-15T08:44:36.747
> 
> 标签：android, database, widget, nullpointerexception

我的应用程序中有一个数据库，通常可以完美运行。
现在，我添加了一个带有更新功能的小部件，它也可以访问数据库。
偶尔，我会收到此错误，但仅来自小部件更新方法。

```
Caused by:java.lang.NullPointerException
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118) 
```

从小部件更新方法中访问数据库是否有某种限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:48:01.380

您不应该从小部件的广播接收器 ( `onUpdate()`) 执行任何磁盘 IO。启动一个获取数据并进行实际更新的服务。您可能想要使用 an，`IntentServcie`因为它默认启动一个工作线程。

# c# - 使用 WPF 在数据网格上放置控件

> ID：11047340
> 
> 赞同：0
> 
> 时间：2012-06-15T08:44:40.773
> 
> 标签：c#, wpf, custom-controls, wpfdatagrid

我需要一个自定义控件元素。我制作了它的原型，它在图片上。我认为这是不言自明的。谁能建议我如何组织它？我不是 WPF 专家，所以如果它是有效的解决方案，我会更好地使用它而不是自己做。

遗憾的是我不能发布图片，所以它在这里：http: [//imageshack.us/photo/my-images/521/control1.png/](http://imageshack.us/photo/my-images/521/control1.png/)

我应该使用带有自定义模板的数据网格吗？

1.  如果是这样，我的问题是如何使用自定义控件填充行单元格以及如何处理此控件上的事件以操作 RowId 编号？

2.  如何为任何单个单元格应用自定义模板？我发现模板仅适用于整个网格或列的文章。

如果有人可以提供帮助，我将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:59:09.180

我个人会使用`TreeView`. 如果您的类已经正确分组，则可以使用`HierarchicalDataTemplates`来定义`TreeView`每种类型的工作方式。这将涉及模板和触发器。实际上，这将主要是 xaml，几乎没有事件编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:07:11.383

我建议您在分组模式下使用[ListView](http://msdn.microsoft.com/en-us/library/ms750972%28v=vs.90%29.aspx)（带有样式和模板）来完成此操作。以下是一些与您想要实现的目标类似的示例 -

> [带分组的 ListView（在 GridView 模式下）](http://blogs.msdn.com/b/atc_avalon_team/archive/2006/03/15/551721.aspx)
> 
> [WPF ListView 中的空组](http://www.codeproject.com/Articles/33986/Empty-groups-in-WPF-ListView)
> 
> MSDN 也为此提供了一个示例 -
> 
> [ListView 分组示例](http://msdn.microsoft.com/en-us/library/ms771309%28v=vs.90%29.aspx)

# android - android中的网络连接检查

> ID：11047344
> 
> 赞同：4
> 
> 时间：2012-06-15T08:44:50.263
> 
> 标签：android, android-wifi

我正在尝试检查网络是否可用。
但在我的模拟器中它总是显示`connected`（在断开互联网后）

我的代码有什么错误吗？我正在使用**wifi**连接。

*代码：*

```
public class AndroidConnectivityActivity extends Activity
{
Button checkBtn;

/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
      checkBtn = (Button) findViewById(R.id.button1);

      checkBtn.setOnClickListener(new View.OnClickListener()
      {
       public void onClick(View v)
       {
        if(isInternetOn())
        {
         Toast.makeText(getBaseContext(), "Connected",
           Toast.LENGTH_SHORT).show();
        }
        else
        {
         Toast.makeText(getBaseContext(), "Not connected",
           Toast.LENGTH_SHORT).show();
        }
       }});
     }

     public final boolean isInternetOn()
     {
      ConnectivityManager connec = (ConnectivityManager) getSystemService
      (Context.CONNECTIVITY_SERVICE);

      if ((connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)
        ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING)
        ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING)
        ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED))
      {
       return true;
      }

      else if ((connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED)
        || (connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED))
      {
       return false;
      }

      return false;
     }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:47:55.020

使用下面的代码

```
public static boolean isInternetAvailable(Context context)
    {
        boolean isInternetAvailable = false;

        try
        {  
            ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

            if(networkInfo != null && (networkInfo.isConnected()))
            {
                isInternetAvailable  = true;
            }    
        }
        catch(Exception exception)
        {
            // Do Nothing
        }

        return isInternetAvailable;
    } 
```

并尝试在真实设备上

在 Activity onCreate 方法中使用代码，例如

```
if(isInternetAvailable(this))
{
Toast toast = Toast.makeText(this, "internet available", Toast.LENGTH_SHORT);
        toast.show();
}
else
{
Toast toast = Toast.makeText(this, "internet not available", Toast.LENGTH_SHORT);
        toast.show();
} 
```

所需的清单权限

```
<uses-permission
        android:name="android.permission.INTERNET" />

    <uses-permission
        android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:50:18.243

使用下面的方法

```
public static boolean isInternetAvailable(Context context) {
            ConnectivityManager cm =
                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {
                return true;
            }
            return false;
        } 
```

并在清单中设置权限为

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:55:21.467

用这个：

```
private boolean getOnlineState() {
        ConnectivityManager myConnectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo myNetworkInfo = myConnectivityManager
                .getActiveNetworkInfo();
        if (myNetworkInfo != null
                && myNetworkInfo.isConnectedOrConnecting())
            return true;
        return false;

    } 
```

顺便说一句：

```
if ((connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)
    ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING)
    ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING)
    ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED))
  {
   return true;
  }

  else if ((connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED)
    || (connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED))
  {
   return false;
  }

  return false;
 } 
```

是一样的：

```
 if ((connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)
    ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING)
    ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING)
    ||(connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED))
         return true;
         return false; 
```

你应该在真机而不是模拟器上尝试这样的硬件操作。

# backbone.js - 主干视图、初始化和渲染

> ID：11047346
> 
> 赞同：7
> 
> 时间：2012-06-15T08:44:53.207
> 
> 标签：backbone.js, backbone-views

我有一个加载子视图的主干视图。当我加载子视图时，我想在视图获取所需数据时显示加载器，并在视图准备好渲染时隐藏加载器。

我做了这样的事情：

```
var appView = Backbone.View.extend({
    showLoader: function() {
        // Code to show loader
    },

    hideLoader: function() {
        // Code to hide loader
    },

    loadSubView: function() {
        this.showLoader();
        var myView = new MySubView();
        this.$el.html(myView.render().el);
        this.hideLoader();
    }
}); 
```

现在，我的子视图加载一个集合并实现如下：

```
var mySubView = Backbone.View.extend({
    initialize: function() {
        this.myCollection.fetch({
            async: false
        });
    },

    render: function() {
        // Code to render
    }
}); 
```

我的子视图同步加载集合，因为它是我发现知道我的视图何时“准备好”渲染的唯一方法，但我认为这不是使用 Backbone 的最佳方法。

我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T12:46:22.810

有几种方法可以做到这一点。

1.  您可以显式使用 pubsub 模式。像这样的东西：

    ```
    var AppView = Backbone.View.extend({
        showLoader: function() {
            console.log('show the spinner');
        },

        hideLoader: function() {
            console.log('hide the spinner');
        },

        loadSubView: function() {
            this.showLoader();
            var subView = new SubView();
            subView.on('render', this.hideLoader);
            this.$el.html(subView.render().el);

        }
    });

    var SubView = Backbone.View.extend({       
        render: function() {
            console.log('a subView render');
            this.trigger('render');
            return this;
        }
    });

    var appView = new AppView({el: $('body')});
    appView.loadSubView(); 
    ```

    [http://jsfiddle.net/theotheo/qnVhy/](http://jsfiddle.net/theotheo/qnVhy/)

2.  您可以将函数附加到微调器本身的[ajaxStart](http://api.jquery.com/ajaxStart/) / [ajaxStop](http://api.jquery.com/ajaxStop/)事件：

    ```
    var AppView = Backbone.View.extend({
        initialize: function() {
            var _this = this;
            this.$('#spinner')
                .hide()
                .ajaxStart(_this.showLoader)
                .ajaxStop(_this.hideLoader);
        }
        ...
    } 
    ```

3.  或者您可以使用[`jQuery.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)：

    ```
     var AppView = Backbone.View.extend({
            initialize: function() {
                var _this = this;
                jQuery.ajaxSetup({
                     beforeSend: _this.showLoader,
                     complete: _this.hideLoader,
                     success: function() {}
                });
            }
        ...
      } 
    ```

# javascript - 这可以在使用 python 执行 javascript 后加载页面吗？

> ID：11047348
> 
> 赞同：8
> 
> 时间：2012-06-15T08:45:05.810
> 
> 标签：javascript, python-3.x, beautifulsoup

这是我阅读的页面：

```
<html>
<head>
<script type="text/javascript">
    document.write("Hello World")
</script>
</head>
<body>
</body>
</html> 
```

如您所见，使用 javascript 在 HTML 页面上添加了 ，当我`Hello World`使用 HTML 解析器时，就像`BeautifulSoup`解析它一样，它无法解析`Hello World`看....？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T05:08:13.370

我在用 python 编写网络爬虫时遇到了类似的问题，我发现[Selenium Web Driver](http://seleniumhq.org/)结合 BeautifulSoup 非常有用。代码最终看起来像这样：

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.yoursite.com")
soup = BeautifulSoup(browser.page_source, "html.parser")
... 
```

使用 Selenium WebDriver，在功能上还有“等待某个 DOM 元素加载完毕”的功能，这也使得 javascript 元素的计时变得更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T08:50:04.443

为了正确表示 DOM 在 javascript 操作后的样子，您必须实际执行 javascript。这必须通过具有 javascript 引擎和文档的 DOM（而不是文本/标记）表示的东西来完成 - 通常是浏览器。

# objective-c - 在 Objective-C 中完成受保护属性的解决方法

> ID：11047351
> 
> 赞同：39
> 
> 时间：2012-06-15T08:45:08.977
> 
> 标签：objective-c, properties, protected

我一直在尝试找到一种解决方法来在 Objective-C 中声明 @protected 属性，这样只有层次结构中的子类才能访问它们（只读，不能写）。我读到没有记录的方法可以做到这一点，所以我想到了这个解决方法，我想问问 StackOverflow 对此的看法。

层次结构顶部的每个自定义类都包含三个类，一个实现和两个接口。让我们为它们命名：

```
ClassA.h
ClassA_protected.h
ClassA.m 
```

那么这个 ClassA 的任何子类都会像往常一样：

```
ClassB.h
ClassB.m 
```

首先，我创建了接口**ClassA.h**，在其中声明了一个受保护的 int 变量，因此 ClassA 的任何子类都可以访问它：

```
@interface ClassA : NSObject{
    @protected
    int _myProtectedInt;
}
@end 
```

下一步是我正在谈论的解决方法。但是，一旦您阅读它，您会发现它非常简单。我声明了第二个名为**ClassA_protected.h**的接口，它实际上是 ClassA.h 的*扩展*，并允许我们将属性标记为`readonly`：

```
#import "ClassA.h"
@interface ClassA ()
@property (nonatomic , readonly) int myProtectedInt;
@end 
```

准备受保护层次结构的最后一步是在**ClassA.m**中声明它的实现，我们只合成我们的属性：

```
#import "ClassA_protected.h"
@implementation ClassA
@synthesize myProtectedInt = _ myProtectedInt;
@end 
```

这样，每个需要成为**ClassA.h**子类的类都将导入**ClassA_protected.h**。因此，像**ClassB.h**这样的孩子将如下所示：

```
#import "ClassA_protected.h"
@interface ClassB : ClassA
@end 
```

**以及从ClassB.m**的实现中访问此属性的示例：

```
@implementation ClassB
-(void) method {
    //edit protected variable 
    _myProtectedInt= 1;

    //normal access
    self.muProtectedInt;
}
@end 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T09:05:59.317

当然，这很好用。`UIGestureRecognizer`例如，Apple 在课堂上使用了相同的方法。子类必须导入附加`UIGestureRecognizerSubclass.h`文件并覆盖该文件中声明的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-10T08:00:26.493

对于简单的“属性”，只需使用 ivar 代替。这与所有实际用途的属性一样好。

此外，默认值已经受到保护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T09:06:18.163

如果你征求意见，这是我的：如果有人决定改变你的

`_myProtectedInt`

无论如何，他可能会成功，因为使用 Objective-C 运行时绝对有可能。除此之外，您的解决方案还可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-08T10:23:04.987

仅在实现中导入受保护的标头。例如

B类.h

```
#import "ClassA.h"
@interface ClassB : ClassA
@end 
```

B类.m

```
#import "ClassA_protected.h"
@implementation ClassB
@end 
```

在框架中，受保护的标头应标记为项目，因此它不包含在框架的公共标头中。Apple 通常使用后缀 _Internal.h 作为其受保护的方法。

对于初始化或覆盖延迟加载的 get 属性，您需要直接访问 @proteced ivar，但是对于您的使用，最好将属性重新声明为 readwrite，然后您可以利用 setter 的任何功能，例如原子性.

# c++ - 各种类型的编译器优化？

> ID：11047352
> 
> 赞同：-3
> 
> 时间：2012-06-15T08:45:21.030
> 
> 标签：c++, performance, optimization, compilation

我遇到过循环展开，但 C++ 代码还有哪些其他类型的编译器优化？

如果可能的话，我会特别对英特尔编译器和 GNU 编译器感兴趣。

如果我能获得一份清单，我可以在谷歌上搜索每种优化的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:51:38.240

如果您笼统地说，除了循环展开之外，还有基本的：

1.  从循环中删除不变的变量。
2.  优化未使用但已初始化的对象/变量/实例。（死代码删除）
3.  在线扩展函数调用，例如 strlen()；
4.  使用处理器特定的指令/命令。

那是我的头顶......我会回来一些科学的（维基百科大声笑）答案

继承人更多： 5\. 静态变量内联 6\. 复杂分支优化

好吧，累了，哈哈，这是一个不错的链接，我只是在看:)

[http://www.eetimes.com/electronics-products/embedded-tools/4086427/Advanced-Compiler-Optimization-Techniques](http://www.eetimes.com/electronics-products/embedded-tools/4086427/Advanced-Compiler-Optimization-Techniques)

# objective-c - NSString 内存管理问题：发送到已释放实例的消息

> ID：11047353
> 
> 赞同：2
> 
> 时间：2012-06-15T08:45:21.660
> 
> 标签：objective-c, foundation

我有一个这样声明的 NSString ：

**。H：**

```
@interface ViewController : UIViewController

{

        NSString * aString;

}
@property(nonatomic,copy)NSString *aString; 
```

**.m：**

```
@synthesize aString;

......

aString=[[NSString alloc]init];
aString=@"Hello World";

NSLog(@"%@",aString);//The app crashes here 
```

应用程序因此堆栈跟踪而崩溃：

```
-[CFString respondsToSelector:]: message sent to deallocated instance 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T08:49:30.680

删除行：

```
aString=[[NSString alloc]init]; 
```

并为属性设置值：

```
self.aString=@"Hello World"; 
```

Doing:`aString=@"Hello World";`意味着你正在为实例变量设置值，而不使用属性的访问器方法，那么你负责内存管理，它更复杂。通过以下方式获取值：`self.aString`也。
PS总是通过属性工作，几乎从不使用实例变量，（只有在dealloc方法中释放ivar，否则如果你不擅长内存管理你总是会遇到问题，但属性会为你做一切）

# web-services - 使用复杂对象作为参数和返回类型使用 JBossWS 创建 Web 服务和客户端

> ID：11047361
> 
> 赞同：0
> 
> 时间：2012-06-15T08:46:03.077
> 
> 标签：web-services, jboss, jboss5.x, webservice-client, jbossws

我正在使用 JBoss 5.1.0GA 为其开发 WebService 和 Client。JBossWs 堆栈已经预装了我下载的二进制文件，据我所知，它是 JBossWs 3.1.2GA

我已经使用此设置开发了一个 Web 服务，并且还成功创建了一个客户端。这就是我所拥有的。

部署为 war 文件的 pojo Web 服务。

```
@WebService
public class Service{
    @WebMethod
    public CompleObj getConfiguration() {
        CompleObj oConf = new CompleObj ();
        for (int i = 0; i < 10; i++) {
            NestObj oInst = new BOpRepoInstance("Val1", "Val2", "Val3", "Val4");
            oConf.addRepoInstance(oInst);
        }
        return oConf;
    }
} 
```

这里，

> CompleObj => 是一个具有 NestObj 类型列表的复杂对象。它的 getter/setter、toString 和其他一些方法。
> 
> NextObj => 有 4 个 String 类型的变量。它的getter/setter、toString、hashCode、equals等方法。

已成功部署此 Web 服务。

后来使用 eclipse 向导创建了一个客户端，用于使用 WSDL 文档生成 Web Service Client。它还创建了一个示例客户端文件，该文件将调用 Web 服务并获取返回值。这也很有效。

现在我的问题是，当 Eclipse 为客户端生成存根时，它为 CompleObj 和 NestObj 创建了类。这些类只有变量及其 getter/setter（这是有道理的，因为它们是从 WSDL 文档生成的）。因此，我放弃了许多其他方法，包括 toString、hasCode、equals 等，我也想在客户端使用这些方法。

现在如何直接使用WebService项目中定义的实际类文件，避免客户端使用生成的类文件。我可以为客户端项目提供类文件作为 .jar 二进制文件，我真的不知道如何实现这一点。

另一个问题是，Web 服务位置直接嵌入到存根中，我该怎么做才能将 Web 服务位置作为参数的一部分传递给调用代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:26:42.657

1.  在客户端生成的类只是占位符，它不是您自己的类的反序列化版本，当您调用用于将对象传送到服务器的服务时，JBOOSWS 将 JAXB 映射到实际类。所以你不能让你自己的类在客户端使用，尽管它们看起来一样。

2.  URL 将在存根代码中固定，因为在 Eclipse 中生成 WS 客户端时您必须提供的第一件事是 WSDL URL，然后 Eclipse 将相应地生成客户端代码，因此生成的代码特定于您提供的 WSDL。如果您想动态传递 WSDL，那么您需要拥有自己的代码，以使用任何 WSDLtoJAVA 或任何其他实用程序通过传递的 WSDL URL 生成客户端存根。

# javascript - 如何避免多次发送表单

> ID：11047370
> 
> 赞同：1
> 
> 时间：2012-06-15T08:46:34.700
> 
> 标签：javascript, jquery, ajax, jquery-dialog

我在 jquery 对话框中有一个表单，它没有提交按钮。相反，它是通过单击确定对话框按钮提交的。

因此，当单击“确定”时，会发生这种情况：

```
var data = $('#form').serialize();
$.post('page.php',data)
  .success( function(result) {

  // result might be description of an error or other problem, then I display error
  ...
  // or ok, then I hide form and change OK button, so now it closes the dialog
  ...
  myDialog.dialog( "option", "buttons", [{ text: ok, click: function() { $(this).dialog("close"); } }] );    

 }); 
```

它工作正常。表单的数据是行，它们随后显示在页面的表格中。但是我被报告了好几次，那个用户提交了 N 行并获得了 3xN 新行。所以看起来她在 OK 点击功能改变之前意外地发送了 3 次表单。

我不明白这怎么可能发生。我已经尝试了很多双击或三次单击确定按钮，结果是

*   数据发送一次
*   表格没有隐藏
*   即使表单没有隐藏，单击确定后对话框关闭并且没有再次发送

所以我需要你的建议。我可以做些什么来防止她再次发送相同的表格多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:59:28.447

我建议您在单击一次后从按钮中取消单击事件侦听器的绑定。这可能只是一个简单的解决方案，但我认为它会正常工作。

```
$('#submitButton').click(function(){

    $(this).unbind('click');

    var data = $('#form').serialize();

    $.post('page.php',data).success( function(result) {
        // result might be description of an error or other problem, then I display error
        ...
        // or ok, then I hide form and change OK button, so now it closes the dialog
        ...
        myDialog.dialog( "option", "buttons", [{ text: ok, click: function() {
        $(this).dialog("close"); } }] );    
    });
}); 
```

**编辑**

如果要在表单结果无效的情况下重新绑定点击功能：

```
$('#submitButton').click(function(){
    submitForm();
});

function submitForm();    
    $('#submitButton').unbind('click');

    var data = $('#form').serialize();

    $.post('page.php',data).success( function(result) {
        // result might be description of an error or other problem, then I display error

        // if result invalid rebind the click event
        if(resultInvalid){
            $('#submitButton').click(function(){
                submitForm();
            });
        }
        // or ok, then I hide form and change OK button, so now it closes the dialog
        ...
        myDialog.dialog( "option", "buttons", [{ text: ok, click: function() {
        $(this).dialog("close"); } }] );    
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:28:42.270

您可以使用 one() 代替。

```
$("#submitButton").one("click", function() {
  //ajax code here
}); 
```

# c# - 动态生成的按钮，点击时未执行

> ID：11047371
> 
> 赞同：0
> 
> 时间：2012-06-15T08:46:36.543
> 
> 标签：c#, asp.net

我需要生成一个动态的按钮列表，我已经这样做了，并附加了一个事件处理程序。

但是，事件处理程序没有被执行。

```
private void GetOptions(EcoBonusRequest request)
        {
            var ecobonuswworkflow = WorkflowFactory.CreateEcobonusWorkflow();
            ecobonuswworkflow.SetCurrentStep(request.CurrentStatus);
            var currentoptions = ecobonuswworkflow.GetCurrentOptions();
            foreach(var option in currentoptions)
            {
                var btn = new Button() {Text = option.OptionName};
                btn.Click +=new EventHandler(btn_Click);
                Buttons.Controls.Add(btn);
            }

        }

        void btn_Click(object sender, EventArgs e)
        {
            var btn = (Button) sender;
            string command = btn.Text;
            EcoBonusRequest request = this.GetDBRequest(RequestBaseId.Value);
            EcoBonusRequestBL.AddWorkflowHistoryItem(request, command,CurrentUser, command);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:53:58.207

您在页面中动态添加的控件必须在 Page_init 事件中添加，并且它们必须具有唯一的 Id。如果您要添加文本框或其他一些用户可以输入或更改值的控件，那么在重新添加这些控件时，它们必须具有相同的 ID。

# haskell - Haskell 随机生成

> ID：11047373
> 
> 赞同：6
> 
> 时间：2012-06-15T08:46:42.753
> 
> 标签：haskell, random

有人可以描述以下类型构造函数和函数是如何工作的吗？

```
type Rand a = State StdGen a  

getRandom :: (Random a) => Rand a
getRandom = get >>= (\r -> let (a,g) = random r in (put g) >> (return a))

runRand :: Int -> Rand a -> a
runRand n r = evalState r $ mkStdGen n

runRandIO :: Rand a -> IO a
runRandIO r = randomIO >>= (\rnd -> return $ runRand rnd r)

getRandoms :: (Random a) => Int -> Rand [a]
getRandoms n = mapM (\_ -> getRandom) [1..n] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T09:14:24.263

让我们从头开始：

```
type Rand a = State StdGen a 
```

这一行告诉您这`Rand a`是一个类型的类型同义词`State`，其状态由 给出`StdGen`，其最终值为 type `a`。这将用于在每个随机数请求之间存储随机数生成器的状态。

的代码`getRandom`可以转换为 do 表示法：

```
getRandom :: (Random a) => Rand a
getRandom = do
  r <- get                   -- get the current state of the generator
  let (a,g) = random r in do -- call the function random :: StdGen -> (a, StdGen)
    put g                    -- store the new state of the generator
    return a                 -- return the random number that was generated 
```

该`runRand`函数采用初始种子`n`和`r`类型值`Rand a`（请记住，它只是 的同义词`State StdGen a`）。它创建一个新的生成器`mkStdGen n`并将其提供给`evalState r`. 该函数`evalState`只计算`State s a`类型的返回值，忽略状态。

同样，我们可以转换`runRandIO`为`do`符号：

```
runRandIO :: Rand a -> IO a
runRandIO r = do
  rnd <- randomIO        -- generate a new random number using randomIO
  return (runRand rnd r) -- use that number as the initial seed for runRand 
```

最后，`getRandoms`取一个数字`n`，表示您要生成的随机值的数量。它构建一个列表`[1..n]`并应用于`getRandom`该列表。请注意，`[1..n]`未使用实际值（您可以知道，因为 lambda 函数以 开头`\_ -> ...`）。该列表只是为了包含正确数量的元素。由于`getRandom`返回一个单子值，我们使用`mapM`对列表进行映射，这会导致状态（即`StdGen`）通过对 的每个调用正确线程化`getRandom`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T09:17:41.277

基本思想很简单——要创建伪随机数，您需要在函数调用之间保持一些状态。因此，类型`Rand a`被定义为“`a`与随机性所需的状态一起”。

使用[`State`monad](http://www.haskell.org/haskellwiki/State_Monad)存储状态。这提供了两个主要的操作——`get`和`put`，它们完全按照它们听起来的样子。所以`getRandom`只需查找当前状态，然后调用该`random`函数。该函数返回两个值：随机值和新状态。然后你只是`put`新状态并包装结果值。

`runRand`让您解开给定种子的“随机”值。允许您在给定初始状态的情况下`evalState`执行有状态计算（即类型的值，`State s a`或者在本例中为），然后丢弃最终状态，只给您结果。`Rand a`因此，这使您可以`Rand a`使用给定的种子运行 a 并仅返回结果值。该值可以只有 type `a`，而不是`Rand a`因为它总是会给你相同的种子相同的结果。

`runRandomIO`只是做同样的事情，只是根据 IO 中的一些全局状态获取种子。

`getRandoms`只需`Rand a`通过调用列表中`getRandom`的每个元素`[1..n]`（忽略实际数字）来获取值列表。

# android - Android - 如何确定 GPS 是否已修复

> ID：11047375
> 
> 赞同：0
> 
> 时间：2012-06-15T08:46:57.510
> 
> 标签：android, gps, location

是否有任何简单的方法，如何确定是否已获取 GPS 信号？我正在计算所需位置和我当前位置之间的距离，如果没有 GPS 修复，我想显示错误消息。问题是 - 如何简单地检查我是否有位置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:57:15.253

像这样听修复：

```
 MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.runOnFirstFix(new Runnable() {
        public void run() {
        }
    }); 
```

这是我检查gps是否启用的方法。如果不是，用户会要求启用它。

```
private void checkGPS() {
    try {
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception e) {
        Log.d("GPS", "GPS koll misslyckades");
        e.printStackTrace();
    }

    if (!isGPSEnabled) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(getString(R.string.alert_start_gps_title))
                .setMessage(getString(R.string.alert_start_gps_message))
                .setCancelable(false)
                .setPositiveButton("Aktivera",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                // Sent user to GPS settings screen
                                final ComponentName toLaunch = new ComponentName(
                                        "com.android.settings",
                                        "com.android.settings.SecuritySettings");
                                final Intent intent = new Intent(
                                        Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                                intent.setComponent(toLaunch);
                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                startActivityForResult(intent, 1);

                                dialog.dismiss();
                                return;

                            }
                        })
                .setNegativeButton("Avbryt",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                                finish();
                                return;
                            }
                        });
        AlertDialog gpsAlert = builder.create();
        gpsAlert.show();
    }

} 
```

玩得开心！

# android - Libgdx 和 Leadbolt

> ID：11047377
> 
> 赞同：3
> 
> 时间：2012-06-15T08:47:08.930
> 
> 标签：android, libgdx, leadbolt, tapjoy

我正在考虑将 Leadbolt（或 Tapjoy）集成到我的 Libgdx 游戏中。我想根据点击的表格创建一个商店。更多点击 - 来自商店的更多内容供用户使用。我找到了 Leadbolt 和 Tapjoy。这些广告提供商正在为这些东西提供直接帮助。我查看了 Leadbolt 集成指南。我有一个问题。它需要我将上下文传递给 AdController。我不知道是否有可能以任何方式传递 AdController 的上下文，所以我想问你，如果可以的话，我该怎么做。（我还没有在 Libgdx 中尝试过，但是 superjumper 示例也有问题，当我想为某事传递上下文时，我认为因为 Libgdx 应用程序不扩展 Activity，它也会有问题。 )

以下是 Leadbolt 的示例代码：

```
AdController myControllerForm = new AdController(this, "MY_LB_ID", new AdListener() {
           public void onAdProgress() {}
           public void onAdLoaded() {
                     myControllerForm.hideAd();
           }
           public void onAdFailed() {
                     launchMain();
           }
           public void onAdCompleted() {
                     myControllerForm.hideAd();
                     launchMain();
           }
           public void onAdClosed() {
                     launchMain();
           }
           public void onAdClicked() {}
           public void onAdAlreadyCompleted() {
                     launchMain();
           }
           public void onAdHidden() {
                     launchMain();
           }
       });
           myControllerForm.setAsynchTask(true);
           myControllerForm.loadAd();
   }

public void launchMain()
           {
                 finish();
                 startActivity(new Intent(Splash.this, MainApp.class));
            }
} 
```

该类扩展了 Activity，方法在本例中的 onCreate() 方法中。

如果您已将 Leadbolt 或 Tapjoy 集成到您的 Libgdx 游戏中，那么您能否给我一个关于您是如何做到的代码？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:58:50.257

LibGDX 实际上扩展`AndroidActivity`（由`AndroidApplication`, 扩展`AndroidActivity`）。

如果您正确[设置了项目](http://code.google.com/p/libgdx/wiki/ProjectSetup "设置你的项目")，则可以从“Android starter”项目中访问它。这也是唯一可以玩广告的地方，因为“桌面启动器”绝不会扩展`AndroidActivity`。

这里还有[adMob 教程](http://code.google.com/p/libgdx/wiki/AdMobInLibgdx "adMob 教程")，您可能会发现它很有用（创建叠加视图）。

这是我可以给你的所有信息，因为我不知道你是想一直展示你的广告，随着时间的推移重新加载它们，还是在特定事件之后隐藏它们。在这种情况下，您可能希望实现自定义接口。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T17:26:35.417

查看有关 AdMob 的 libGDX 教程：[http ://code.google.com/p/libgdx/wiki/AdMobInLibgdx](http://code.google.com/p/libgdx/wiki/AdMobInLibgdx)

跳过顶部关于设置 AdMob 的内容，我认为您需要“控制”部分中的部分，该部分讨论从通用 libGDX 代码（也必须在桌面上运行）获取事件到您的 Android 特定代码（例如展示广告）。一般的方法是定义您自己的接口（参见`IActivityRequestHandler`AdMob 教程中的），并将实现该接口的对象传递到您的 libGDX 代码中。在桌面上这个对象不会做任何事情，而在 Android 端你可以使用所有标准的 Android 代码来做正确的事情。

# tridion - 演示文稿错误 - SmartTarget 页面

> ID：11047381
> 
> 赞同：4
> 
> 时间：2012-06-15T08:47:22.517
> 
> 标签：tridion, tridion-2011, smarttarget

当我打开配置了 SmartTarget 的网页时，我收到两个不同的错误：

## 错误 1

我第一次收到此错误：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------
com/tridion/marketingsolution/profile/Contact
================================================
Some configured classpath roots cannot be found
================================================
ClassPath           : C:\tridion\Publicationsites\TestRD\staging\bin\bin 
```

我不确定第 2 行是如何出现的，但是当我在已经存在的 bin 文件夹中添加另一个 bin 文件夹时，错误就出现了。任何配置文件有问题吗？

## 错误 2

当我在应用上述错误的解决方法后打开页面时，我收到以下错误

```
Unknown server tag 'smarttarget:Query'.
<smarttarget:Query View="lister" AllowDuplicates="true" Timeout="5000"
                  Publication="tcm:0-14-1" runat="server" Id="as"> 
Line 3: <smarttarget:Item runat="server" TemplateUri="tcm:14-1319-32"
                          ComponentUri="tcm:14-1321"></smarttarget:Item> 
```

我需要在哪里添加 smarttarget 标签？它应该在 web.config 文件中吗？你能分享一下语法吗？我试图准确地实现实时文档中提到的 ST。有什么地方需要重新检查吗？

## 问题 3

我在下面粘贴我的复合页面模板的屏幕截图： ![复合页面模板](../Images/2e17abc16c6dfca97d3e5eedc65a59ee.png)

当我发布此页面时，主页面设计 TBB 中的 HTML 标记根本没有发布。只有由 Add SmartTarget to Promotion TBB 生成的标记存在于 aspx 页面中。

```
<smarttarget:Query View="lister" AllowDuplicates="true" Timeout="5000"
                       Publication="tcm:0-14-1" runat="server" Id="as"> 
    <smarttarget:Item runat="server" TemplateUri="tcm:14-1319-32"
                              ComponentUri="tcm:14-1321"></smarttarget:Item> 

    <smarttarget:Promotions MaxItems="2" Region="sidebar" runat="server"> 
        <ItemTemplate> 
            <smarttarget:PromotionalItems runat="server"> 
                <ItemTemplate> 
                        <tridion:ComponentPresentation runat="server" 
                        PageURI="tcm:14-1119-64" 
                        ComponentURI="<%# Eval(&quot;ComponentUri&quot;) %>" 
                        TemplateURI="<%# Eval(&quot;TemplateUri&quot;) %>"/> 
                </ItemTemplate> 
            </smarttarget:PromotionalItems> 
        </ItemTemplate> 
        <FallbackContent> 
            <tridion:ComponentPresentation runat='server' 
                        ComponentUri='tcm:14-1322' 
                        TemplateUri='tcm:14-1323-32'/> 
        </FallbackContent> 
    </smarttarget:Promotions> 
</smarttarget:Query> 
```

我的实施正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:21:49.347

一篇文章中有很多问题，但我会在这里尝试回答。

1.  看起来您没有正确的 Tridion 主目录，它最终会检查当前目录下的“bin”。请参阅我关于如何解决这个问题的博客文章（以及如何解决它）：[Tridion Content Delivery 如何加载配置文件 (.NET)](http://www.tridiondeveloper.com/how-tridion-content-delivery-loads-configuration-files-in-dotnet)
2.  这是标准的 .NET 功能。您可以在同一页面中定义前缀，或者根据建议，在 web.config 中定义前缀。web.config 的确切标记是：`<add tagPrefix="smarttarget" namespace="Tridion.SmartTarget.Web.UI" assembly="Tridion.SmartTarget" />`
3.  包中只使用了一个“输出”项目（添加的最后一个）。因此，您当前拆分 Dreamweaver 模板的方式确实意味着您只能从“ST 页面区域”获得输出。我不知道它的意图是什么，所以除了摆脱它并将 tcdl:region 直接放在“Main Page Design TBB”中之外，我无法提出解决它的好方法。

祝你好运:)

# php - 如何存储（在 php 中）和使用（在 javascript 中）大量数据

> ID：11047383
> 
> 赞同：0
> 
> 时间：2012-06-15T08:47:37.353
> 
> 标签：php, javascript, xml

我将数据存储在隐藏`<input>`标签中，但这会导致性能下降。有一个大约 100 个项目的数组。这是其中之一：

```
<div class="data">
            <input type="HIDDEN" name="zold_0" value="0">
            <input type="HIDDEN" name="dpi_0" value="27x40">
            <input type="HIDDEN" name="minoseg_0" value="gyenge">

            <input type="HIDDEN" name="src_0_0" value="/_files/4/8/11307.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_0_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_0_1" value="/_files/4/8/11308.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_0_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_1" value="0">
            <input type="HIDDEN" name="dpi_1" value="27x36">
            <input type="HIDDEN" name="minoseg_1" value="gyenge">

            <input type="HIDDEN" name="src_1_0" value="/_files/4/8/11309.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_1_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_1_1" value="/_files/4/8/11310.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_1_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_2" value="0">
            <input type="HIDDEN" name="dpi_2" value="23x40">
            <input type="HIDDEN" name="minoseg_2" value="gyenge">

            <input type="HIDDEN" name="src_2_0" value="/_files/4/8/11311.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_2_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_2_1" value="/_files/4/8/11312.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_2_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_3" value="0">
            <input type="HIDDEN" name="dpi_3" value="23x34">
            <input type="HIDDEN" name="minoseg_3" value="gyenge">

            <input type="HIDDEN" name="src_3_0" value="/_files/4/8/11307.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_3_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_3_1" value="/_files/4/8/11308.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_3_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_4" value="0">
            <input type="HIDDEN" name="dpi_4" value="23x30">
            <input type="HIDDEN" name="minoseg_4" value="gyenge">

            <input type="HIDDEN" name="src_4_0" value="/_files/4/8/11309.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_4_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_4_1" value="/_files/4/8/11310.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_4_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_5" value="0">
            <input type="HIDDEN" name="dpi_5" value="20x27">
            <input type="HIDDEN" name="minoseg_5" value="gyenge">

            <input type="HIDDEN" name="src_5_0" value="/_files/4/8/11309.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_5_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_5_1" value="/_files/4/8/11310.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_5_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_6" value="0">
            <input type="HIDDEN" name="dpi_6" value="18x27">
            <input type="HIDDEN" name="minoseg_6" value="gyenge">

            <input type="HIDDEN" name="src_6_0" value="/_files/4/8/11307.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_6_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_6_1" value="/_files/4/8/11308.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_6_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_7" value="0">
            <input type="HIDDEN" name="dpi_7" value="15x27">
            <input type="HIDDEN" name="minoseg_7" value="gyenge">

            <input type="HIDDEN" name="src_7_0" value="/_files/4/8/11311.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_7_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_7_1" value="/_files/4/8/11312.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_7_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_8" value="0">
            <input type="HIDDEN" name="dpi_8" value="17x23">
            <input type="HIDDEN" name="minoseg_8" value="gyenge">

            <input type="HIDDEN" name="src_8_0" value="/_files/4/8/11309.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_8_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_8_1" value="/_files/4/8/11310.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_8_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_9" value="0">
            <input type="HIDDEN" name="dpi_9" value="16x23">
            <input type="HIDDEN" name="minoseg_9" value="gyenge">

            <input type="HIDDEN" name="src_9_0" value="/_files/4/8/11313.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_9_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_9_1" value="/_files/4/8/11314.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_9_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_10" value="0">
            <input type="HIDDEN" name="dpi_10" value="15x23">
            <input type="HIDDEN" name="minoseg_10" value="gyenge">

            <input type="HIDDEN" name="src_10_0" value="/_files/4/8/11307.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_10_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_10_1" value="/_files/4/8/11308.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_10_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_11" value="0">
            <input type="HIDDEN" name="dpi_11" value="12x16">
            <input type="HIDDEN" name="minoseg_11" value="gyenge">

            <input type="HIDDEN" name="src_11_0" value="/_files/4/8/11309.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_11_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_11_1" value="/_files/4/8/11310.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_11_1" value="A fill eljárás során a pirossal jelzett rész levágódik.">
            <input type="HIDDEN" name="zold_12" value="0">
            <input type="HIDDEN" name="dpi_12" value="12x16">
            <input type="HIDDEN" name="minoseg_12" value="gyenge">

            <input type="HIDDEN" name="src_12_0" value="/_files/4/8/11313.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_12_0" value="A képarányeltérésből eredő terület fehér lesz.">
            <input type="HIDDEN" name="src_12_1" value="/_files/4/8/11314.jpg">
            <input type="HIDDEN" name="szoveges_uzenet_12_1" value="A fill eljárás során a pirossal jelzett rész levágódik."></div> 
```

您建议如何存储这些数据？XML是为了这个？您能否提供一个在客户端和服务器端都使用它的基本示例？

* * *

我无法完全分离它（因为这些数据有时来自 ajax），但这不是目标。

现在看起来像这样：

```
<div class="data"><input name="data" type="hidden" value="{&quot;zold_0&quot;:0,&quot;dpi_0&quot;:&quot;27x40&quot;,&quot;minoseg_0&quot;:&quot;gyenge&quot;,&quot;src_0_0&quot;:&quot;\/_files\/4\/8\/8305.jpg&quot;,&quot;szoveges_uzenet_0_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_0_1&quot;:&quot;\/_files\/4\/8\/8306.jpg&quot;,&quot;szoveges_uzenet_0_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_1&quot;:0,&quot;dpi_1&quot;:&quot;27x36&quot;,&quot;minoseg_1&quot;:&quot;gyenge&quot;,&quot;src_1_0&quot;:&quot;\/_files\/4\/8\/8307.jpg&quot;,&quot;szoveges_uzenet_1_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_1_1&quot;:&quot;\/_files\/4\/8\/8308.jpg&quot;,&quot;szoveges_uzenet_1_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_2&quot;:0,&quot;dpi_2&quot;:&quot;23x40&quot;,&quot;minoseg_2&quot;:&quot;gyenge&quot;,&quot;src_2_0&quot;:&quot;\/_files\/4\/8\/8309.jpg&quot;,&quot;szoveges_uzenet_2_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_2_1&quot;:&quot;\/_files\/4\/8\/8310.jpg&quot;,&quot;szoveges_uzenet_2_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_3&quot;:0,&quot;dpi_3&quot;:&quot;23x34&quot;,&quot;minoseg_3&quot;:&quot;gyenge&quot;,&quot;src_3_0&quot;:&quot;\/_files\/4\/8\/8305.jpg&quot;,&quot;szoveges_uzenet_3_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_3_1&quot;:&quot;\/_files\/4\/8\/8306.jpg&quot;,&quot;szoveges_uzenet_3_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_4&quot;:0,&quot;dpi_4&quot;:&quot;23x30&quot;,&quot;minoseg_4&quot;:&quot;gyenge&quot;,&quot;src_4_0&quot;:&quot;\/_files\/4\/8\/8307.jpg&quot;,&quot;szoveges_uzenet_4_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_4_1&quot;:&quot;\/_files\/4\/8\/8308.jpg&quot;,&quot;szoveges_uzenet_4_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_5&quot;:0,&quot;dpi_5&quot;:&quot;20x27&quot;,&quot;minoseg_5&quot;:&quot;gyenge&quot;,&quot;src_5_0&quot;:&quot;\/_files\/4\/8\/8307.jpg&quot;,&quot;szoveges_uzenet_5_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_5_1&quot;:&quot;\/_files\/4\/8\/8308.jpg&quot;,&quot;szoveges_uzenet_5_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_6&quot;:0,&quot;dpi_6&quot;:&quot;18x27&quot;,&quot;minoseg_6&quot;:&quot;gyenge&quot;,&quot;src_6_0&quot;:&quot;\/_files\/4\/8\/8305.jpg&quot;,&quot;szoveges_uzenet_6_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_6_1&quot;:&quot;\/_files\/4\/8\/8306.jpg&quot;,&quot;szoveges_uzenet_6_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_7&quot;:0,&quot;dpi_7&quot;:&quot;15x27&quot;,&quot;minoseg_7&quot;:&quot;gyenge&quot;,&quot;src_7_0&quot;:&quot;\/_files\/4\/8\/8309.jpg&quot;,&quot;szoveges_uzenet_7_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_7_1&quot;:&quot;\/_files\/4\/8\/8310.jpg&quot;,&quot;szoveges_uzenet_7_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_8&quot;:0,&quot;dpi_8&quot;:&quot;17x23&quot;,&quot;minoseg_8&quot;:&quot;gyenge&quot;,&quot;src_8_0&quot;:&quot;\/_files\/4\/8\/8307.jpg&quot;,&quot;szoveges_uzenet_8_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_8_1&quot;:&quot;\/_files\/4\/8\/8308.jpg&quot;,&quot;szoveges_uzenet_8_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_9&quot;:0,&quot;dpi_9&quot;:&quot;16x23&quot;,&quot;minoseg_9&quot;:&quot;gyenge&quot;,&quot;src_9_0&quot;:&quot;\/_files\/4\/8\/8311.jpg&quot;,&quot;szoveges_uzenet_9_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_9_1&quot;:&quot;\/_files\/4\/8\/8312.jpg&quot;,&quot;szoveges_uzenet_9_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_10&quot;:0,&quot;dpi_10&quot;:&quot;15x23&quot;,&quot;minoseg_10&quot;:&quot;gyenge&quot;,&quot;src_10_0&quot;:&quot;\/_files\/4\/8\/8305.jpg&quot;,&quot;szoveges_uzenet_10_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_10_1&quot;:&quot;\/_files\/4\/8\/8306.jpg&quot;,&quot;szoveges_uzenet_10_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_11&quot;:0,&quot;dpi_11&quot;:&quot;12x16&quot;,&quot;minoseg_11&quot;:&quot;gyenge&quot;,&quot;src_11_0&quot;:&quot;\/_files\/4\/8\/8307.jpg&quot;,&quot;szoveges_uzenet_11_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_11_1&quot;:&quot;\/_files\/4\/8\/8308.jpg&quot;,&quot;szoveges_uzenet_11_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;,&quot;zold_12&quot;:0,&quot;dpi_12&quot;:&quot;12x16&quot;,&quot;minoseg_12&quot;:&quot;gyenge&quot;,&quot;src_12_0&quot;:&quot;\/_files\/4\/8\/8311.jpg&quot;,&quot;szoveges_uzenet_12_0&quot;:&quot;A k\u00e9par\u00e1nyelt\u00e9r\u00e9sb\u0151l ered\u0151 ter\u00fclet feh\u00e9r lesz.&quot;,&quot;src_12_1&quot;:&quot;\/_files\/4\/8\/8312.jpg&quot;,&quot;szoveges_uzenet_12_1&quot;:&quot;A fill elj\u00e1r\u00e1s sor\u00e1n a pirossal jelzett r\u00e9sz lev\u00e1g\u00f3dik.&quot;}"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:52:56.073

您可以以[JSON 格式](http://en.wikipedia.org/wiki/Json)存储数据。

```
<?php
$data = array(
 'zold_0' => '0',
 'dpi_0'  => '27x40',
 'minoseg_0' => 'gyenge',
 /* ... other items... */
);
?>

<script>
var data = <?php echo json_encode($data) ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:51:40.347

我建议您从与 HTML 页面分开的不同 PHP 模块中以 JSON 消息的形式发出该数据。

在您的 html 页面中，您安装了少量的 javascript，在页面加载后异步加载 JSON 消息。您可以使用 jquery 简单地做到这一点。有很多例子。

然后，从 javascript 逻辑中，您可以在客户端解析 JSON 文件并使用它做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:51:21.270

假设此页面/数据首先来自服务器。如果是这样，为什么不使用会话？如果您确实使用会话，则不需要将此数据扔给客户端，客户端也不需要将数据扔回服务器（它首先来自哪里）。

# javascript - 为什么这样的基本脚本不起作用

> ID：11047384
> 
> 赞同：-1
> 
> 时间：2012-06-15T08:47:48.770
> 
> 标签：javascript, jquery, jquery-ui

在这里，我正在做一个基本的触发器示例，但 jquery 无法执行它。我知道 jquery 对这种触发器有一些问题，但没有任何解决方案。

代码演示：[jsfiddle](http://jsfiddle.net/program_me/4eF2x/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:51:31.147

jQuery 或`trigger`.

为了让 jQuery 触发您的链接，**jQuery 需要知道您首先为您的链接分配了一个点击处理程序**：

```
$('#link').click(function(){
    window.location = this.href;
});
​ 
```

**[工作示例](http://jsfiddle.net/4eF2x/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:52:18.383

```
// you have to assign a click event handler for anchor tag

$('#link').on('click', function() {
   window.location = this.href;
});

$('#btn').click(function(){

    $('#link').trigger('click'); // or $('#link').click();
    alert("I am alerting but link is not triggered");

}); 
```

### 笔记

单击不是锚定标记的默认行为。因此，如果您想要执行某些操作，则必须先将单击事件处理程序分配给锚定，然后再触发该事件。一个重要的想法是，在 jquery 触发任何事件之前，jquery 应该通知该事件。

**[演示](http://jsfiddle.net/4eF2x/7/)**

## 要在新窗口中打开，请执行以下操作：

```
$('#link').on('click', function() {
  window.open(this.herf,this.target);
}); 
```

**[演示](http://jsfiddle.net/4eF2x/10/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:52:19.560

要触发点击对象，只需执行以下操作：

```
 $('#link').click(); 
```

这仅在 click() 函数已被 jQuery 绑定时才有效，但可能是您正在寻找的。

否则，如果您尝试使用 javascript 打开一个新窗口，请使用`window.open('url','_blank','width=100,height=100');`

与`window.location`其他人发布的不同，这不会在新的目标窗口中打开。

除了上面的示例之外`width`，您还可以为打开的窗口设置更多属性。`height`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T08:52:34.250

重要的是要记住 click() 不会触发链接上的默认行为，即使没有其他东西阻止它。因此，您不能单独使用 click() 来模拟用户单击链接并被带到另一个 url。

这就是为什么你需要附加一个事件处理程序来`link`处理点击事件

```
$('#link').click(function(){
    // navigate to page
}); 
```

# ruby-on-rails - 使用附加参数呈现“显示”模板会导致路由错误

> ID：11047386
> 
> 赞同：0
> 
> 时间：2012-06-15T08:47:51.783
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, routing

我有一个模板“groups/show.html.erb”我有一个链接，它通过将参数传递给控制器​​来呈现部分。然后控制器使用该参数来识别要进行哪个 JS 调用。

```
<%= link_to 'Add a Video', group_path(create_video: true), remote: true %> 
```

然后在控制器中

```
elsif params[:create_video]
  @video = Group.find(params[:id]).videos.build
  respond_to do |format|
    format.js {render action: 'create_video'}
  end 
```

这会产生一个部分表单，该表单使用 videos_controller 中的 create 方法创建视频。如果表单验证失败并且我尝试呈现“组/显示”，则会收到路由错误：

_create_video.html.erb

```
<%= form_for @video, :url => group_videos_path(@group) do |f| %>
    <%= f.text_field :name %>
    <%= f.submit %>
<% end %> 
```

没有路线匹配 {:action=>"show", :controller=>"groups", :create_video=>true}

为了完成这项工作，我认为您可以在 routes.rb 中明确匹配它，但有更好的方法吗？谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:54:19.100

你忘了给哪个组，你通常应该做类似的事情

```
group_path(@group, create_video: true) 
```

希望这可以帮助。

# sql - 引用多个表的外键

> ID：11047391
> 
> 赞同：2
> 
> 时间：2012-06-15T08:48:12.667
> 
> 标签：sql, database-design, foreign-keys, primary-key, vertical-partitioning

我有 4 张桌子

```
A(ida, name)
B(ida, B-specific stuff)
C(ida, C-specific stuff)
D(ida, D-specific stuff) 
```

我希望另一个表 E 可以仅引用 B OR C（而不是 D）。我可以在里面写什么

```
CREATE TABLE E 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:58:46.187

在我看来，您正在尝试使用某种超类型/子类型——而不是简单的垂直分区。如果是这样，请引入类型鉴别器。

因为这是通用示例（A、B、C、D ..），所以很难猜测什么与什么相关，所以这里有两个选项作为我的最佳猜测。

* * *

**选项1**

![在此处输入图像描述](../Images/6658c1e348ee0eb82230882b6898fa98.png)

* * *

**选项 2**

![在此处输入图像描述](../Images/d009592dc4682fed0d606c07000641cc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:49:44.793

您可以使用`check`约束来强制`D`仅引用`B`或`C`：

```
create table D
    (
    id int constraint PK_D primary key,
    idb int constraint FK_D_IDB foreign key references B(id),
    idc int constraint FK_D_IDC foreign key references C(id),
    constraint CHK_D_B_OR_C check 
        (
        case when idb is null then 0 else 1 end + 
        case when idc is null then 0 else 1 end = 1
        )
    ); 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/999e9/3/0)

# java - java中memcached中设置操作的IOException

> ID：11047393
> 
> 赞同：1
> 
> 时间：2012-06-15T08:48:29.403
> 
> 标签：java, windows-xp, memcached, spymemcached

当我尝试使用 windows xp 而不是 linux 在 memcache.im 中设置密钥时，我的 java 代码给出了 ioexception 和 memcache 服务器重新连接。

代码 ：

```
public class Memcache implements Serializable  {

    MemcachedClient client;

    public static final int EXP_TIME = 10;
    public static final String KEY = "spoon";

    public static void main(String[] args)throws IOException{
        Memcache temp=new Memcache();
        Dummy dummy= new Dummy("Hello World");

        try {
           temp.client = new MemcachedClient(new InetSocketAddress("localhost", 11211));
        } catch (IOException e) {
           e.printStackTrace();
           System.err.println("connection problem");
        }
        temp.obj=temp.client.getAvailableServers();
        System.out.println(temp.obj);
        temp.obj1=temp.client.getUnavailableServers();
        System.out.println(temp.obj1);
        temp.client.add(KEY, EXP_TIME, dummy);
        Object myObject=temp.client.get(KEY);
        System.out.println(myObject);
        temp.client.delete(KEY);
    }
} 
```

我调试了代码，但是当它到达设置操作时，它使 IOException n 断开连接。

假人的代码是：

```
import java.io.Serializable;

public class Dummy implements Serializable {
    String one;

    public Dummy(String one){
        this.one=one;
    }
} 
```

堆栈跟踪是：

```
2012-06-15 14:30:19.259 信息 net.spy.memcached.MemcachedConnection：添加 {QA sa=/10.2.200.104:11211，#Rops=0，#Wops=0，#iq=0，topRop=null， topWop=null, toWrite=0, Interest=0} 连接队列
2012-06-15 14:30:19.274 信息 net.spy.memcached.MemcachedConnection：sun.nio.ch.SelectionKeyImpl@7cbde6 的连接状态已更改
[/10.2.200.104:11211]
[]
2012-06-15 14:30:22.852 信息 net.spy.memcached.MemcachedConnection：由于 {QA sa=/10.2.200.104:11211, #Rops=1, #Wops=0, #iq=0, topRop=Cmd: set Key:spoon Flags: 1 Exp: 10 Data Length: 76, topWop=null, toWrite=0, Interest=1}
java.io.IOException：意外断开连接，将重新连接。
    在 net.spy.memcached.MemcachedConnection.handleReads(MemcachedConnection.java:452)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:380)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:242)
    在 net.spy.memcached.MemcachedConnection.run(MemcachedConnection.java:833)
2012-06-15 14:30:22.852 警告 net.spy.memcached.MemcachedConnection：关闭并重新打开 {QA sa=/10.2.200.104:11211，#Rops=1，#Wops=0，#iq=0，topRop =Cmd：设置键：勺子标志：1 Exp：10 数据长度：76，topWop=null，toWrite=0，interested=1}，尝试 0。
2012-06-15 14:30:22.852 警告 net.spy.memcached.protocol.ascii.AsciiMemcachedNodeImpl：丢弃部分完成的操作：Cmd：设置键：勺子标志：1 Exp：10 数据长度：76
2012-06-15 14:30:24.868 信息 net.spy.memcached.MemcachedConnection：重新连接 {QA sa=/10.2.200.104:11211，#Rops=0，#Wops=0，#iq=0，topRop=null， topWop=null，toWrite=0，有兴趣=0}
2012-06-15 14:30:24.868 INFO net.spy.memcached.MemcachedConnection：sun.nio.ch.SelectionKeyImpl@113beb5 的连接状态已更改
2012-06-15 14:30:31.665 信息 net.spy.memcached.MemcachedConnection：由于 {QA sa=/10.2.200.104:11211、#Rops=1、#Wops=0、#iq=0、 topRop=Cmd：获取键：spoon Exp：0，topWop=null，toWrite=0，interested=1}
java.io.IOException：意外断开连接，将重新连接。
    在 net.spy.memcached.MemcachedConnection.handleReads(MemcachedConnection.java:452)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:380)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:242)
    在 net.spy.memcached.MemcachedConnection.run(MemcachedConnection.java:833)
2012-06-15 14:30:31.665 警告 net.spy.memcached.MemcachedConnection：关闭并重新打开 {QA sa=/10.2.200.104:11211，#Rops=1，#Wops=0，#iq=0，topRop =Cmd: get Keys:spoon Exp: 0, topWop=null, toWrite=0, Interest=1},尝试0。
2012-06-15 14:30:31.665 警告 net.spy.memcached.protocol.ascii.AsciiMemcachedNodeImpl：丢弃部分完成的操作：Cmd：获取密钥：勺子 Exp：0
2012-06-15 14:30:33.680 信息 net.spy.memcached.MemcachedConnection：重新连接 {QA sa=/10.2.200.104:11211，#Rops=0，#Wops=0，#iq=0，topRop=null， topWop=null，toWrite=0，有兴趣=0}
2012-06-15 14:30:33.680 信息 net.spy.memcached.MemcachedConnection：sun.nio.ch.SelectionKeyImpl@edf389 的连接状态已更改
线程“主”java.lang.RuntimeException 中的异常：等待值的异常
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1001)
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1018)
    在 ballydev.Memcache.main(Memcache.java:39)
引起：java.util.concurrent.ExecutionException：java.lang.RuntimeException：已取消
    在 net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:103)
    在 net.spy.memcached.internal.GetFuture.get(GetFuture.java:62)
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:997)
    ... 2 更多
引起：java.lang.RuntimeException：已取消
    ... 5 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:47:02.440

要调试问题，请尝试从请求发起的服务器 telnet 到 memcached。如果 memcached 开始明确提及 IP 地址，则它可以拒绝与其他主机的连接。

# jquery - 如何从 html 文件中分离 jqote2 模板（使用自己的文件）

> ID：11047396
> 
> 赞同：0
> 
> 时间：2012-06-15T08:48:41.213
> 
> 标签：jquery, jqote

我想将我的模板分开，格式如下：

```
<script type="text/x-jqote-template" id="tpl-header">
<![CDATA[
    <div data-role="header">
        <h1>Just a demo</h1>
        <a href="/" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
    </div><!-- /header --> 
```

我想将模板移动到一个单独的文件（例如'base.tpls'）有两个原因：

1.  我想分别维护它们
2.  我想在不同的 *.html 中重用模板

我已经尝试使用带有源 base.tpls 的脚本标记，但它不起作用。

我需要用 javascript/jquery 加载“base.tpls”的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T19:33:05.987

这是我的处理程序的一个版本，它接收我从链接下载的数据。如果您仍在尝试解决此问题，这应该可以帮助您入门：

```
var _ = {
    templates: {},
    template: {
        compile: function(id, tmpl) {
            _.templates[id] = $.jqotec(tmpl, "*")
        },
        populate: function(id, data) {
            $.jqote(_.templates[id], data, "*")
        }
    }
}

$.get(
    link,
    function( tmpl ) {
        _.template.compile( id, tmpl )
    }
);

$( element ).append( _.template.populate( id, data ) ) 
```

# mysql - 在 django 中从单独的表格中提取项目图片的最佳方法

> ID：11047399
> 
> 赞同：1
> 
> 时间：2012-06-15T08:48:59.337
> 
> 标签：mysql, django, image

对于某个项目，我很难决定从单独的表格中提取图片的最佳方法是什么。

在 django 中，我有两个表：

```
class item(models.Model):
    title..
    descr..

class item_pic(models.Model):
    item=models.ForeignKey(item)
    pic=models.ImageField... 
```

我在一个 div 中显示 item.title 和 item.descr，在同一个 div 中我想拉图片。

到目前为止，我已经尝试创建一个模板过滤器，如 item|getPics，它返回该项目的图片列表。

```
{% for pic in item|getPics %} <img src="/uploads/{{pic.pic}}"> {%endfor%} 
```

最后我摆脱了这个，因为它触发了太多的 sql 查询

现在我通过ajax完成了图片的拉取，唯一的缺点是图片需要一些时间才能出现。而且我假设是相同数量的 sql 查询（只有 django 调试工具栏看不到它们，因为它们是在后台启动的）。

你会如何处理这个问题？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:11:23.157

您应该使用`select_related()`( [docs](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related) ) 将图像对象与项目一起获取。

它看起来像这样：

```
item = item.objects.select_related().get(...) 
```

这意味着当您检索`item_pics`.

最后一点，最好将类名大写，因为这是 Python/Django 中的约定。

# c++ - 选择远程过程调用 c++ 库

> ID：11047401
> 
> 赞同：3
> 
> 时间：2012-06-15T08:49:11.520
> 
> 标签：c++, protocols, rpc, asn.1

我必须以标准方式重写旧的“专有”客户端-服务器协议。
我正在寻找一种抽象符号来定义协议和跨平台实现库。

我很想使用 ASN.1，因为它是一个定义明确的标准，但它似乎缺乏免费实现，尽管有一些非常好的商业工具，如 Oss Nokava 和 Objective-System

现在我发现了免费的[NCBI C++ Toolk](http://www.ncbi.nlm.nih.gov/books/NBK7197/)，它看起来很有趣，因为它有一个 ASN.1“类生成器”及其实现。

我发现的其他解决方案是：

*   冰
*   节约
*   消息包
*   协议缓冲区

[在这里](http://distributedsenses.blogspot.it/2012/03/there-are-various-flavors-of-rpc.html)我找到了一个比较表。
这些有利有弊，所以我在这里询问是否有人有经验并可以给我一些建议。

问候，丹尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:12:47.767

您使用 ASN.1 的“诱惑”是一个很好的诱惑。除了您提到的商业工具外，还有几个免费的 ASN.1 工具。商业工具附带的技术支持的好处通常是物有所值的。但是，可从以下 URL 获得可用 ASN.1 工具（一些免费，一些商业）的优秀列表：[http ://www.itu.int/ITU-T/asn1/links/index.htm](http://www.itu.int/ITU-T/asn1/links/index.htm)

请注意，来自 OSS Nokalva 的 ASN.1 工具包括一个套接字内存管理器和客户端/服务器示例，它们可能对您的开发有所帮助。[您可以从http://www.oss.com/asn1/products/asn1-download.html](http://www.oss.com/asn1/products/asn1-download.html)下载免费试用版

# android - Android：硬编码数据的Sqlite插入

> ID：11047402
> 
> 赞同：0
> 
> 时间：2012-06-15T08:49:15.207
> 
> 标签：android, sqlite

我在表中插入了两个字段，即 truck_id 和 employee_id。

很抱歉问这个问题。但由于我是android新手，请帮帮我。

```
public void insert(String[] employeeName,int[] truck_id){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues vals = new ContentValues();

    vals.put(COLUMN_TRUCKID, "CM-3456");
    vals.put(COLUMN_NAME,"Sachin");
    //vals.put(KEY_PIN, "12345");

    vals.put(COLUMN_TRUCKID, "HR-6788");
    vals.put(COLUMN_NAME,"Sameer");
    //vals.put(KEY_PIN, "54321");

    vals.put(COLUMN_ID, "AM-6123");
    vals.put(COLUMN_NAME,"Sahu");
    //vals.put(KEY_PIN, "3452");

    db.insert("Login", "John",
            vals);
    db.insert("Login", "Sameer",
            vals);

    db.execSQL(COLUMN_NAME);

    //myDataBase.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:12:38.403

`ContentValues`是 a `Map`，因此每个列名一次只能包含一个条目。因此，您需要在设置其值后分别插入每个项目。

```
vals.put(COLUMN_TRUCKID, "CM-3456");
vals.put(COLUMN_NAME,"Sachin");
db.insert("Login", null, vals);

vals.put(COLUMN_TRUCKID, "HR-6788");
vals.put(COLUMN_NAME,"Sameer");
db.insert("Login", null, vals); 
```

删除这一行，否则会发生不好的事情：

```
db.execSQL(COLUMN_NAME); 
```

# c# - 使用 switch case 语句发出问题

> ID：11047403
> 
> 赞同：-9
> 
> 时间：2012-06-15T08:49:18.850
> 
> 标签：c#, .net, console, console-application

我的代码如下。基本上，我正在读取一个 excel 文件并将其内容存储到一个对象数组中。然后，我使用 switch case 语句来执行不同的操作。在下面检查我的代码：-

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data;
using System.Drawing;
using System.ComponentModel;
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.Office.Interop.Excel;
namespace Excel1
{
    class Program
    {
        public static void Main(string[] args)
        //public void ExcelOps()
        {
            //string str;
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/WebServiceTemplate.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;
            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;
            int numSheets = xlWorkbook.Sheets.Count;
            //
            // Iterate through the sheets. They are indexed starting at 1.
            //
            for (int sheetNum = 1; sheetNum <=1; sheetNum++)
            {
                Worksheet sheet = (Worksheet)xlWorkbook.Sheets[sheetNum];
                //
                // Take the used range of the sheet. Finally, get an object array of all
                // of the cells in the sheet (their values). 
                //
                object[,] valueArray = (object[,])xlRange.get_Value(XlRangeValueDataType.xlRangeValueDefault);

                //
                // Do something with the data in the array with a custom method.
                //                
                ProcessInput(valueArray);
            }
        }
        public static void ProcessInput(object[,] valueArray)
        {
            foreach (var value in valueArray)
            {
                switch ((string)value.ToString())
                {
                    case "ITemplate.GetAllTemplate":
                        {
                            //ITemplate.GetAllTemplate
                            break;
                        }
                    case "ITask.GetTaskInstanceFromTemplate":
                        {
                            //ITask.GetTaskInstanceFromTemplate
                            break;
                        }
                    case "CreateTask":
                        {
                            //CreateTask
                            break;
                        }
                    case "UpdateDatabase":
                        {
                            //UpdateDatabase
                            break;
                        }
                    case "GetTaskStatus":
                        {
                            //GetTaskStatus
                            break;
                        }
                    case "VerifyValue":
                        {
                            //VerifyValue
                        }
                        break;
                }
            }
        }
    }
} 
```

当我构建它时，我得到一个错误 **对象引用未设置为对象的实例。**
错误出现在 switch 语句中

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T08:51:39.563

错误消息是指 . 后面括号中的变量类型`switch`。在您的情况下，这是一个数组，因此显然不是（如错误消息所述）*bool、char、string、integral、enum 或相应的可空类型*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T08:51:06.580

`valueArray`根据您的参数定义，是一个多维对象数组。`switch`不支持。

1.  您不能也不会对值数组执行切换；`switch`对单个值进行操作。您可以使用`foreach`来展平数组，迭代每个值并应用开关，但是......
2.  如错误所示，`object`不能在`switch`语句中使用，只能键入错误消息中指示的那些。如果每个值都是整数，则将该值强制转换为`switch`.

**更新**好，现在它们又是字符串了。

例子：

```
foreach(var value in valueArray)
{
    switch(value as string)
    {
        case "ITemplate.GetAllTemplate":
                    break;
        case "ITask.GetTaskInstanceFromTemplate":
                    break;
        case "CreateTask":
                    break;
        case "UpdateDatabase":
                    break;
        case "GetTaskStatus":
                    break;
        case "VerifyValue":
                    break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T08:51:29.753

这是非常自我解释的：由于它的类型 ( ) ，您不能将`switch`语句与object 一起使用。`valueArray``object[,]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:01:43.830

Switch 不支持阵列。它需要一个参数，并且应该根据它定义案例。

前任：

```
 int num=3;
     switch(num)  //in case of integer type
         Case 1:
         Case 2:
         ...
     }

     char ch='a';
     switch(ch)  //in case of character type
     {
         Case 'a':
         Case 'b':
         Case '/':
         ...
     } 
```

# javascript - 多个国家/地区的 Google Places Autocomplete API 过滤器

> ID：11047408
> 
> 赞同：4
> 
> 时间：2012-06-15T08:49:27.710
> 
> 标签：javascript, google-places-api

正在寻找一种方法来过滤按 2 个国家（加拿大和美国）过滤的自动完成结果。

目前我只能使用这样的选项按一个或另一个过滤...

```
var options = {
  types: ['(cities)'],
  componentRestrictions: {country: 'us'}
}
var autocomplete = new google.maps.places.Autocomplete(input,options); 
```

...但我还没有看到任何解释如何将自动完成结果限制在 2 个国家/地区的文档。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T01:01:22.520

Google Places API 当前不支持此功能。如果您认为这将是一个有用的功能，您可以在[此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)提交“Places API - 功能请求” 。

**更新**

此功能于 2017 年 1 月在 Maps JavaScript API 3.27 版中引入：

> 您现在可以将自动完成预测限制为仅来自多个国家/地区的显示。您可以通过在 AutocompleteOptions 的 componentRestrictions 字段中指定最多 5 个国家来做到这一点。

[https://developers.google.com/maps/documentation/javascript/releases](https://developers.google.com/maps/documentation/javascript/releases) [https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions](https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions)

# postgresql - 在 Postgresql 的数据目录中构成 SQL 的原始文本文件

> ID：11047412
> 
> 赞同：2
> 
> 时间：2012-06-15T08:49:40.933
> 
> 标签：postgresql, raw-data

有没有办法有人可以获得构成数据库的文本文件，我的意思是你在转储数据库时获得的原始文本文件。？我在想这些文件必须在数据目录中的某个地方......我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:53:15.790

它们不是文本格式。如果您无法通过查看或阅读文档来确定原始数据文件的保存位置，那么您不太可能充分利用它们。

我认为这就是所谓的 XY 问题——试着问一个关于你想要达到的目标的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:44:46.707

杰夫，

您的答案取决于您是否有表空间。如果数据库有一个关联的表空间，那么这将决定物理文件的位置。表空间告诉[数据库在磁盘上存储物理文件的位置。](http://www.postgresql.org/docs/9.0/static/manage-ag-tablespaces.html)

数据库集群所需的所有数据都存储在集群的数据目录中，通常称为`PGDATA`（在可用于定义它的环境变量的名称之后）。PGD​​ATA 的常见位置是`/var/lib/pgsql/data`. 由不同的 postmaster 管理的多个集群可以存在于同一台机器上。

对于 Windows，包含指向表空间的符号链接的子目录位于：`C:\Program Files\PostgreSQL\9.0\data\pg_tblspc\`.

[您可以在此处的 PostgreSQL 在线文档](http://www.postgresql.org/docs/8.1/static/storage.html)中阅读有关数据库物理存储的更多信息。此处进一步讨论了数据库[文件布局](http://www.postgresql.org/docs/9.0/static/storage-file-layout.html)。

由于我们不确定您到底要做什么，因此在尝试在文件级别移动数据之前，您肯定需要阅读极其丰富的 PostgreSQL 在线文档。您还需要对 StackOverflow 进行进一步研究，因为您会找到[诸如此类](https://stackoverflow.com/a/3050104/212950)讨论传输 PostgreSQL 数据的答案。

另外，请查看[备份和还原文档](http://www.postgresql.org/docs/8.4/interactive/backup.html)。

享受！

# jpa-2.0 - 使用 jpa2 将列表作为查询参数传递时的错误值

> ID：11047414
> 
> 赞同：0
> 
> 时间：2012-06-15T08:49:45.183
> 
> 标签：jpa-2.0, parameter-passing, openjpa

我正在为我的查询使用条件对象。我使用的参数之一是字符串列表（例如 [10, 11, 15]）。

由于某种原因，当生成 SQL 查询时，这些值现在是 15、11、15。

从代码：

```
// I have method that receives a String[] types as parameter
// inside the method:

Criteria criteria = new Criteria();
List<String> listTypes = Arrays.asList(types);
criteria.setParameter("types", listTypes);

// and the query
select a from table a where a.types in (:types) 
```

有没有人有同样的问题？为什么价值观会改变？

# regex - 在 regx 中，是否可以准确提取 json 标量值？

> ID：11047424
> 
> 赞同：1
> 
> 时间：2012-06-15T08:50:23.913
> 
> 标签：regex, json

希望从 json 中提取标量值。

*   知道 JSON 使用双引号。

*   知道标量的数据类型：字符串、数字、日期、布尔值。

*   知道标量将在第一级，即不是嵌入对象的属性

    {“想要”：“字符串”} =>“字符串”

    {“想要”：123 } => 123

    {“不”：{“想要”：“错误”}，“想要”：“正确”} =>“正确

    { "nothing": 0 } => null / 未找到

不知道如何处理开/关引号，也不知道如何处理嵌入对象。

这可能吗？

* * *

这是迄今为止我想出的最好的：

```
// match `want` attribute
(?:"want"\s*:\s*)                                        

// string, number, boolean or null
(((?:")([^"]*)(?:"))|([-0-9][.eE0-9]*)|true|false|null)

// followed by comma or right bracket
(?:\s*(,|})) 
```

这很好，因为它

*   可以运行`postgres`

*   抓弦

*   抢号码

*   抓取布尔值和空值

这很糟糕，因为它

*   不确保`want`是一级属性

*   字符串值不能包含引号 (")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:43:35.917

这个表达式会让你到达那里的 50%：

```
(?<=:\s*)(".*?"(?<!\\")|\-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?)(?=\s*}) 
```

或者，当编写为多行正则表达式时：

```
(?x:
    (?<=:\s*)           # After : + space
    (

        ".*?"(?<!\\")   # String in double quotes

        |               # -or-

        \-?             # Optional leading -ve
        (0|[1-9]\d*)    # Number
        (\.\d+)?        # Optional fraction
        ([eE][+-]?\d+)? # Optional exponent

    )
    (?=\s*})            # space + }
) 
```

这与您的嵌套对象示例 ( `{ "not": { "want" ...`) 不匹配，或者更确切地说，它将匹配，但在错误的事情上。此外，您的最后一个示例 ( `{ "nothing": 0 } => null / not found`) 很困难，因为`0`它是一个有效数字。要解决此问题，我只需检查程序代码中的结果并将结果替换`0`为`null`.

嵌套对象问题是一个完全不同的球类游戏。它正在进入词法分析领域，而不是简单的标记化。那时，您不妨只使用 JSON 库，因为无论如何您都将编写完整的 JSON 解析器。幸运的是，JSON 是一种足够简单的语法，使用第三方库不会那么昂贵——当然不会比你自己做更多。

我认为简短的回答是：从一个简单的`{ "name" : <value> }`对象，是的，但从任何更复杂的，不。

*有关 JSON 语法的信息，请参阅[http://www.json.org/](http://www.json.org/)。*

# linux - 为什么 syslog 在编辑某些日志后停止写入日志？

> ID：11047428
> 
> 赞同：2
> 
> 时间：2012-06-15T08:50:44.297
> 
> 标签：linux, logging, messages, syslog

我使用centos5.8 我想知道为什么syslog 在某些日志编辑后停止写入日志。

例如，在切断 /var/log/messages 行后，syslog 不会写入新日志。只剩下旧日志。

但是如果我删除消息文件并重新启动系统，syslog 工作正常。

有什么办法，syslogd在编辑某些日志后不断写入新日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:00:41.877

好吧，这将取决于 syslogd 的工作方式。我应该提一下，顺便说一下，编辑系统日志文件可能*不是*一个好主意:-)

您可能已经被 UNIX 文件系统工作方式的一个特点所吸引。

如果进程 A 有一个文件打开并正在写入它，进程 B 可以去删除该文件（使用类似的东西，`rm`或者，在这里似乎很可能，在删除旧文件并重写新文件的编辑会话中）。

删除该原始文件不会*破坏*数据，它只会破坏文件名（目录条目）和该数据之间的链接。

打开原始文件的进程可以根据需要继续写入它，并且由于文件系统中没有它的条目，因此您无法（轻松）看到它。

可以购买具有该文件名的*新*文件，但进程 A 不会写入它，它将写入原始文件。新旧文件之间不会有任何联系。

当您的磁盘空间不足并决定删除大量文件以稍微清理它时，您有时会看到这种效果。如果进程打开了这些文件，则删除它们对您毫无帮助，因为空间仍在使用中（而且很可能使用量正在增加）。

您必须同时删除文件*并*以某种方式说服保持它们打开的那些进程放弃它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:59:57.267

这取决于文件的编辑方式。

请记住，`syslogd`保持文件打开以进行连续写入。`unlink()`如果您的编辑器在ing 或ing 旧文件之后使用旧名称写入新文件，则`rename()`该旧文件仍可用于 syslogd。但是，新文件保持不变。

它可以被告知要与`HUP`信号一起使用的新文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T10:32:17.910

如果您编辑了 /var/log/syslog 之后需要重新启动 syslog 服务，因为 syslogd 需要再次打开文件句柄。

# xquery - 我可以在 Marklogic Server 的 xquery 中声明一个全局变量吗？

> ID：11047432
> 
> 赞同：9
> 
> 时间：2012-06-15T08:51:00.040
> 
> 标签：xquery, marklogic

我想要一个可以在不同的 .xqy 页面中使用的全局变量。我可以在 Marklogic Server 的 xquery 中声明这样的变量吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T09:05:10.933

您可以在任何模块中声明变量。例如，它是 config.xqy。

```
declare variable $PRECISION as xs:integer := 4; 
```

要使用此变量，您需要在工作模块中导入此模块。

```
import module namespace config = "http://your-namespace" at "config.xqy"; 
```

并参考这个变量：

```
$config:PRECISION 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T16:50:11.947

如果您的应用程序在单个 E 节点上运行，您可以使用[服务器字段](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/AppServerBuiltins.xml&query=server-field&category=AppServerBuiltins&function=xdmp:set-server-field)，它们也是为此用例设计的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:37:36.253

如果您需要跨服务器访问值，Marklogic XQuery Commons 中有一个用于存储持久键/值对的库：

[https://github.com/marklogic/commons/blob/master/properties/properties.xqy](https://github.com/marklogic/commons/blob/master/properties/properties.xqy)

您可能已经考虑过这一点，但您也可以简单地将全局数据存储在数据库上的文档中，并使用 doc() 或 eval() 访问，如果您需要从不同的数据库中获取它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T23:47:09.597

你有几个选择。如果您需要一个全局常量变量，`config.xqy`@Andrew Orlov 的答案中提到的方法很棒，因为您避免了对`properties.xml`文件的并发访问的任何锁定。

如果您需要一个可以跨节点集群变异的变量，`property.xqy`@wst 链接的示例似乎使用全局分配的命名空间来嵌入可检索的键和值。相当聪明。但是，我不确定这对重大变化意味着多少。

@Eric Bloch的**E-node**特定变量很好，但也请注意，它不会在系统重新启动后继续存在。

我很想知道这些在性能方面是如何比较的。

# c# - 如何在数组中设置 (2) 级别的自定义定义类型？

> ID：11047435
> 
> 赞同：0
> 
> 时间：2012-06-15T08:51:13.280
> 
> 标签：c#, arrays, class

我对 c# 还是比较陌生，所以请对我温柔，谢谢。我正在尝试创建用户定义的 2 层数组类型，即。我的目标是得到类似的东西

```
 level1[i].level2[j].level3 = "abc"; 
```

我应该如何定义它？
我应该如何初始化它？

我有在 1 个级别上工作的代码，但我没有在 2 个级别上做到这一点。

你可以发布一些工作代码片段吗？我在互联网上找不到这样的东西。

提前致谢

编辑：我认为我的问题太笼统了，但是我的代码太长而无法全部发布，我的最终解决方案使用更多变量来保存我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:58:02.480

这样的事情也许可以解决您的问题：

```
Dictionary<iType, Dictionary<jType, TypeOfYourClassToStore>> dict; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:00:35.287

我想你想要一个二维数组。

```
String[,] x = new String[10, 10];
x[0, 0] = "a";
x[0, 1] = "b";
//... 
```

# c# - 用 sql 查询结果填充列表框

> ID：11047436
> 
> 赞同：-2
> 
> 时间：2012-06-15T08:51:13.783
> 
> 标签：c#, sql

我正在尝试构建一个将运行存储过程的 sql 查询。然后，我需要此查询的结果出现在用户可以从中选择所需结果的列表框中。

请有人先告诉我如何从头开始构建 SQL 查询，然后告诉我如何将此结果放入列表框中？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T08:53:12.617

[http://www.dotnetperls.com/sqldataadapter](http://www.dotnetperls.com/sqldataadapter)

```
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            FillData();
        }

        void FillData()
        {
            var connString = ConfigurationManager
                .ConnectionStrings[name].ConnectionString;

            using (SqlConnection c = new SqlConnection(connString))
            {
                c.Open();

                // use a SqlAdapter to execute the query
                using (SqlDataAdapter a = new SqlDataAdapter("SELECT * FROM EmployeeIDs", c))
                {            
                    // fill a data table
                    var t = new DataTable();
                    a.Fill(t);

                    // Bind the table to the list box
                    listBox1.DisplayMember = "NameOfColumnToBeDisplayed";
                    listBox1.ValueMember = "NameOfColumnToUseValueFrom";
                    listBox1.DataSource = t;
                }
            }
        }
    }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:58:02.857

这是一般的想法......

```
ListBox lb = new ListBox();
string connectionString = "your connection string here";
using (SqlConnection con = new SqlConnection(connectionString))
{
    con.Open();
    string query = "SELECT column FROM myitemstable";
    using (SqlCommand cmd = new SqlCommand(query, con))
    {
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read()) {
                lb.Items.Add(new ListItem((string)reader["column"]));
            }
        }
    }
} 
```

# android - 在三星手机中获取下一个警报值

> ID：11047438
> 
> 赞同：0
> 
> 时间：2012-06-15T08:51:15.920
> 
> 标签：android, samsung-mobile

```
Settings.System.getString(getContentResolver(), Settings.System.NEXT_ALARM_FORMATTED); 
```

上面的代码在 HTC 和索尼爱立信安卓手机中返回下一个系统警报值。但在三星手机的情况下，它不会返回下一个警报值。谁能给我替代代码或更改上面的代码，让我在三星设备中提供下一个警报值？

**编辑：**我已经挖掘出来，三星设备以 hh:mm aa 格式（例如 06:45 AM）给我们输出。
HTC 和索尼爱立信 android 设备以 EEE hh:mm aa 格式（例如 WED 06:45 AM）输出。
在三星设备中，我们无法确定警报是为哪个日期设置的。现在我的下一个挑战是找出给我工作日的方式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:37:40.100

我在三星设备上尝试了上述代码。它给了我 EEE hh:mm aa 格式（例如 WED 06:45 AM）。

那么你能更具体地说明哪款三星设备吗？我尝试使用三星 Galaxy Nexus 没有问题。

# jquery - 移除类后的 CSS 动画

> ID：11047446
> 
> 赞同：0
> 
> 时间：2012-06-15T08:51:32.543
> 
> 标签：jquery, css

我有一个具有淡入和淡出过渡的滑块。它基本上循环和切换我的`<li></li>`元素并将`.current`类添加到活动幻灯片。看起来像这样 `<li class="current"></li>`。

**您认为我的代码的解决方案是什么？** [http://jsbin.com/evayaw/](http://jsbin.com/evayaw/)

我刚刚添加了一个按钮以`.active`在幻灯片上添加一个类 ( ) 以模仿我的滑块行为。`.active`在父`<li>`容器上添加类时，每张幻灯片内的对象都会动画。它也应该在删除`.active`类后转换出来。转换通常会执行相反的属性，例如。从`opacity: 1;`它将去`opacity 0;`或从`left: 100;`到`left: 0;`。

**类似：** [http](http://tympanus.net/Development/ParallaxContentSlider/) ://tympanus.net/Development/ParallaxContentSlider/ - 这与我现有的滑块使用不同的方法，所以我不能使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:40:43.263

[http://jsbin.com/evayaw/35](http://jsbin.com/evayaw/35)

如果您单击 2，然后单击 3，然后单击 2，这就是您想要的吗？部分问题是当您删除 .active 时，它​​将不再具有 .active `z-index:9999;`。我添加了一个`.unActive`（也有`z-index:9998;`，并且还添加了一个`.delay'。

此外，使用您一直转到页面顶部的 href 标记，我删除了它们。（我想我本可以让他们停止默认行为，但我将`a`属性放入`li`，并且还提供`li`了鼠标指针属性。我也让你的点击使用 nth_of_type()，但你可以删除它，只是帮助我确保你的按钮没有不是问题。

**编辑：**此外，当您希望动画“反转”而不是`.object_#`放`.unActive .object_#`

# asp.net - webconfig 中的 Log4net 部分似乎被跳过

> ID：11047457
> 
> 赞同：1
> 
> 时间：2012-06-15T08:52:18.773
> 
> 标签：asp.net, asp.net-mvc-3, log4net

我尝试在我的项目中包含 log4net 并且遇到了非常奇怪的问题。

我的样子如下：

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821" />
    <section name="microsoft.identityModel" type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections> 
```

后来在 webconfig 中有：

```
 <log4net>
   (...)     
  </log4net> 
```

Log4net 不工作 - 没有创建错误文件。

现在，当我故意更改“microsoft.identityModel”的配置部分（做了一些错字）并尝试访问我的网站时 - 出现错误。但是当我故意更改“log4net”的配置部分时 - 网站运行良好 - 看起来像

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821" /> 
```

被跳过或无关紧要。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:57:03.230

确保您已在以下位置初始化记录器`Application_Start`：

```
protected void Application_Start()
{
    log4net.Config.XmlConfigurator.Configure();
    ...
} 
```

[或使用文档](http://logging.apache.org/log4net/release/manual/configuration.html)中所示的程序集级别属性：

```
[assembly: log4net.Config.XmlConfigurator()] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:03:26.160

把它放在你的 Global.asax 文件中：

```
void Application_Start(object sender, EventArgs e) 
{
   log4net.Config.XmlConfigurator.Configure();
} 
```

你需要告诉 log4net 它应该如何在某个地方配置自己。Global.asax 是一个很好的地方。

# macos - NSPrintInfo printSettings 不符合 KVO，尽管在标题中这样说

> ID：11047459
> 
> 赞同：2
> 
> 时间：2012-06-15T08:52:20.323
> 
> 标签：macos, cocoa, printing

背景：我将打印面板附件视图添加到打印对话框（使用`addAccessoryController:`），控件绑定到 NSPrintInfo printSettings 值，因此这些值保存在打印预设中。我无法观察 printSettings 的变化。我正在使用 SDK 10.6 构建，在 OS X 10.7 上进行测试。

这是一个在我的理解中应该起作用的代码示例，但从`observeValueForKeyPath:`未被调用：

```
- (void)testKVO
{
  NSPrintInfo *printInfo = [NSPrintInfo sharedPrintInfo];
  [printInfo addObserver:self forKeyPath:@"printSettings.foo" options:0 context:NULL];
  [printInfo setValue:@"bar" forKeyPath:@"printSettings.foo"]; // observeValueForKeyPath:ofObject:change:context: not called
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
  NSLog(@"%s %@ :: %@", _cmd, keyPath, object);
} 
```

我也试过直接观察 printSettings ，没有成功，也没有调用观察者方法（ NSPrintInfo 返回的 printSettings 实际上是 class `NSPrintInfoDictionaryProxy`）：

```
- (void)testKVO
{
  NSMutableDictionary *printSettings = [[NSPrintInfo sharedPrintInfo] printSettings];
  [printSettings addObserver:self forKeyPath:@"foo" options:0 context:NULL];
  [printSettings setValue:@"bar" forKey:@"foo"]; // observeValueForKeyPath:ofObject:change:context: not called
} 
```

我仔细检查了我的 KVO 系统是否在正常条件下工作并调用了观察者方法：

```
- (void)testKVO
{
  NSMutableDictionary *printSettings = [NSMutableDictionary dictionary];
  [printSettings addObserver:self forKeyPath:@"foo" options:0 context:NULL];
  [printSettings setValue:@"bar" forKey:@"foo"]; // observeValueForKeyPath:ofObject:change:context: called at last!
} 
```

所以问题是：如何观察 printSettings 的修改，尤其是知道用户何时选择了打印预设？

我还希望预览自动更新

```
- (NSSet *)keyPathsForValuesAffectingPreview
{
  return [NSSet setWithObjects:
          @"representedObject.printSettings.foo",
          nil];
} 
```

预览更新有一个简单的解决方法：通过直接在 NSViewController 本身上重新声明属性来添加间接级别。但是对于打印预设的更改，我一无所知。

最后，这是 NSPrintInfo.h 中的注释：

> `- (NSMutableDictionary *)printSettings;`
> 
> 打印信息的打印设置。您可以将值放入此字典中，以将它们存储在用户在使用打印面板编辑此打印信息时创建的任何预设中。此类值必须是属性列表对象。此类符合“printSettings”的键值编码 (KVC) 和键值观察 (KVO)，因此您通常可以将打印面板附件视图中的控件直接绑定到此字典中的条目。您还可以使用此字典来获取已由打印系统的其他部分设置的值，例如打印机驱动程序的打印对话框扩展（与 Ca​​rbon 打印管理器的 PMPrintSettingsGetValue() 函数返回的相同类型的值）。打印系统的其他部分通常使用诸如“com.apple.print.PrintSettings.PMColorSyncProfileID”之​​类的键字符串 但是像键字符串中的点不能很好地与 KVC 配合使用，因此这些点被替换为出现在此字典中的键中的下划线，如“com_apple_print_PrintSettings_PMColorSyncProfileID”。向此词典添加条目时应使用相同的约定。

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:46:25.667

好吧，我找到了一种方法。选择打印预设或更改纸张格式时会发送一个未记录的通知，您所要做的就是添加一个观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(printInfoDidChange:) name:@"NSPrintInfoDidChange" object:nil]; 
```

这不像绑定到 printSettings 键路径那么简单，而且我真的不喜欢使用未记录的通知（在可维护性方面几乎与使用私有 API 一样糟糕），但这是我能想出完成这项工作的唯一方法。

# java - 有谁知道如何使用带有 Lucene 3.6 的 Wordnet 扩展查询？

> ID：11047466
> 
> 赞同：2
> 
> 时间：2012-06-15T08:52:39.360
> 
> 标签：java, lucene, information-retrieval, wordnet

我在 org.apache.lucene.analysis.synonym 中找到了**WordnetSynonymParser**类，但在 API 和谷歌中都没有使用它的示例。有没有人有这方面的经验？

谢谢！

**编辑**：我知道曾经有[SynExpand](https://stackoverflow.com/questions/1248039/synonyms-using-lucene)类，但是在 3.6 版中它消失了......

我尝试：

```
 try {
                   FileReader rulesReader = new FileReader("wn/wn_s.pl");
               SynonymMap.Builder parser = null;
               parser = new WordnetSynonymParser(true, true, analyzer);
               ((WordnetSynonymParser)parser).add(rulesReader);          
               synonymMap = parser.build();
            } catch (Exception e) {
                            e.printStackTrace();
                            System.exit(1);
            } 
```

但我收到以下错误：

```
java.text.ParseException: Invalid synonym rule at line 109
        at org.apache.lucene.analysis.synonym.WordnetSynonymParser.add(WordnetSynonymParser.java:75)
        at pirServer.QueryClassifier.<init>(QueryClassifier.java:77)
        at pirServer.PIRServer.main(PIRServer.java:32)
Caused by: java.lang.IllegalArgumentException: term: course of action analyzed to a token with posinc != 1
        at org.apache.lucene.analysis.synonym.SynonymMap$Builder.analyze(SynonymMap.java:131)
        at org.apache.lucene.analysis.synonym.WordnetSynonymParser.parseSynonym(WordnetSynonymParser.java:92)
        at org.apache.lucene.analysis.synonym.WordnetSynonymParser.add(WordnetSynonymParser.java:67)
        ... 2 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-24T17:34:11.120

Edi Bice 的回答帮助我解决了这个问题。对于可能正在寻找的其他人，使用 lucene 4.0，使用空字符集初始化解析器

```
WordnetSynonymParser parse = new WordnetSynonymParser(true, true, new StandardAnalyzer(CharArraySet.EMPTY_SET)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:44:58.300

我正在做类似的事情，只是阅读了文档-因此 SynonymFilter 文档中的相关警告非常新鲜：

""此令牌流无法正确处理位置增量！= 1，即，您应该在过滤掉停用词之前放置此过滤器""

[http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/synonym/SynonymFilter.html](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/synonym/SynonymFilter.html)

您传递给 WordNetSynonymParser 的分析器（您未能在帖子中描述）可能会删除停用词（大多数情况下），导致：

java.lang.IllegalArgumentException: term: 用 posinc != 1 分析到令牌的行动过程

# r - 带 IRange 的负值

> ID：11047468
> 
> 赞同：2
> 
> 时间：2012-06-15T08:52:45.967
> 
> 标签：r, bioconductor

我正在使用**来自 Bioconductor 的 Gviz 库**，我正在尝试绘制从技术上从左到右绘制的表意文字，但我们的数据有一些负宽度，表明绘图应该从右到左。**如何使用 IRanges 输入宽度的负值？**

这是我们正在使用的一段代码：

```
library(Gviz)
library(IRanges)
gen <- "mm9"
chr <- "chr1"

itrack <- IdeogramTrack(genome = gen, chromosome = chr)
gtrack <- GenomeAxisTrack()

dat <- read.delim("C:/R/mydata.TXT", header = FALSE, sep ="\t")
s <- dat[[2]]
e <- dat[[3]]
l <- dat[[4]]

annot1 = IRanges(start = s, width = l)
Error.Call2("solve_user_SEW0", start, end, width, PACKAGE = "IRanges") : 
solving row 1: negative widths are not allowed

# Those logical following commands work well if no negative integer is passed to IRanges
atrack <- AnnotationTrack (annot1, chromosome = chr, genome = gen, name = "foo") 
plotTracks (list(itrack, gtrack, atrack)) 
```

谢谢 ：））））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:20:48.603

就像错误消息说的那样，IRanges 不能有负宽度——“开始”总是在最左边。也许使用 GRanges 对象`strand="-"`？

# php - 打开 jQuery ui 对话框并在表单提交后显示 PHP Post 响应

> ID：11047470
> 
> 赞同：0
> 
> 时间：2012-06-15T08:52:48.400
> 
> 标签：php, jquery, dialog, form-submit

我有一个基于 jQuery 的表单，它在表单中设置隐藏输入字段的值。我在使用 php 提交表单后检索此值： $_POST['myinputvar'] （它是生成的 url）。

这个检索到的 var 是我使用 SimpleXML 函数解析的 XML 文件的 url。

目标是在提交表单后在对话框中显示此结果并在此处执行我的 PHP 工作

编码 ：

jQuery 填充我的输入字段：

```
$('#myForm').submit(function() {
            $("input[name='field']").val(generatedUrl);
        }); 
```

的PHP：

```
if (isset($_POST['field']))
{
  $xml = simplexml_load_file($_POST['field']);
  print_r($xml);
} 
```

表格 ：

```
<form action="http://www.mysite.com/index.php" id="myForm" method="post">
<input name="field" type="hidden" value='' /> 
<input id="submit" type="submit" value="ok" />
</form> 
```

那么如何在提交后将我的 PHP 部分显示到对话框中呢？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:04:21.957

由于您似乎不使用 AJAX，因此您可以按照[文档中规定的](http://jqueryui.com/demos/dialog/)方式进行操作：

```
<script>
    $(function() {
        $( "#dialog" ).dialog();
    });
</script>

<div id="dialog" title="Basic dialog">
    <p><?php echo $xml;?></p>
</div> 
```

# php - 开源或付费搜索引擎 API

> ID：11047474
> 
> 赞同：1
> 
> 时间：2012-06-15T08:53:24.123
> 
> 标签：php, mysql, solr, full-text-search, search-engine

我有一个 MySQL 数据库，其中包含两个主表，其中包含我需要索引的数据。我正在寻找一种搜索引擎 API，它可以索引并返回适当的搜索结果——尽可能接近谷歌的质量——。该应用程序使用关键字并根据搜索结果创建页面。

我已经尝试过 SOLR，但不确定这是否是最好的。您可能遇到过任何其他付费或开源替代方案吗？该项目基于 LAMP。

谢谢，萨米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:30:20.800

Solr/Lucene 绝对是开源搜索世界的事实。我爱索尔。不！你不需要去任何“付费”:)。在我看来（如果你想去别的地方）你试试[Sphinx 搜索引擎](http://sphinxsearch.com/)，它绝对令人惊叹，与 LAMP 集成得非常好。事实上，它附带的 PHP API 非常好，您几乎可以立即开始使用 Sphinx 进行搜索。

# c# - 如何捕捉退出 Winforms 应用程序的事件？

> ID：11047475
> 
> 赞同：12
> 
> 时间：2012-06-15T08:53:30.547
> 
> 标签：c#, .net, winforms

如果用户想通过单击退出图标或按 ALT+F4 退出应用程序，我想制作一个对话框询问用户是否真的确定要退出。

如何在应用程序实际关闭之前捕获此事件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-15T08:55:00.820

查看表单的[OnClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onclosing.aspx)事件。

以下是该链接的摘录，实际检查文本字段的更改并提示保存：

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
   // Determine if text has changed in the textbox by comparing to original text.
   if (textBox1.Text != strMyOriginalText)
   {
      // Display a MsgBox asking the user to save changes or abort.
      if(MessageBox.Show("Do you want to save changes to your text?", "My Application",
         MessageBoxButtons.YesNo) ==  DialogResult.Yes)
      {
         // Cancel the Closing event from closing the form.
         e.Cancel = true;
         // Call method to save file...
      }
   }
} 
```

您可以更改文本以满足您的需要，然后我认为您可能希望根据您的文本切换`DialogResult.Yes`到。`DialogResult.No`

* * *

这是一些专门为您修改的代码：

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
   if(MessageBox.Show("Are you sure you want to quit?", "My Application", MessageBoxButtons.YesNo) ==  DialogResult.No)
   {
      e.Cancel = true;
   }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T08:56:05.837

您应该订阅 Form_Closing 事件
在那里发布一个对话框，如果用户中止关闭，请将 FormCloseEventArgs.Cancel 设置为 true。

例如在 Form_Load 或使用设计器，订阅事件

```
Form1.FormClosing += new FormClosingEventHandler(Form1_Closing);

....
private void Form1_FormClosing(Object sender, FormClosingEventArgs e) 
{
    DialogResult d = MessageBox.Show("Confirm closing", "AppTitle", MessageBoxButtons.YesNo );
    if(d == DialogResult.No)
        e.Cancel = true;
} 
```

视情况而定，用这种处理方式惹恼用户并不总是一件好事。
如果您有宝贵的**修改**数据并且不希望冒险丢失更改，那么这样做总是一件好事，但如果您仅将其用作关闭操作的确认，那么最好什么也不做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T08:55:48.497

您可以为此处理`Form_Closing`or`Form_Closed`事件。

在 Visual Studio 中，单击闪电图标并向下滚动到表单属性列表中的这些事件。双击您想要的，它将为您连接事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T08:55:00.227

阅读 msdn 示例：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.closing.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.closing.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T08:55:05.977

这只是一种形式吗？如果是这样，您可能想要使用[`FormClosing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)允许您取消它的事件（显示对话框，[`CancelEventArgs.Cancel`](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.cancel.aspx)如果用户选择取消关闭，则设置为 true）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T08:57:17.363

如果你在谈论`windows forms`，应该足以赶上你的**MainWindow 的**

[FormClosing](http://msdn.microsoft.com/it-it/library/system.windows.forms.form.closing.aspx)事件，如果您想*阻止*关闭，只需将事件处理程序的参数设置为`true`.

例子：

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{

      if(MessageBox.Show("Do you really want to exit?", "My Application",
         MessageBoxButtons.YesNo) ==  DialogResult.No){

                // SET TO TRUE, SO CLOSING OF THE MAIN FORM, 
                // SO THE APP ITSELF IS BLOCKED
                e.Cancel = true;            
      }
   }
} 
```

# wcf - 在 IIS 6.1 中将 WCF 应用程序添加为文件夹

> ID：11047479
> 
> 赞同：1
> 
> 时间：2012-06-15T08:53:51.827
> 
> 标签：wcf, iis

如何将 WCF 应用程序添加为 IIS 下的文件夹。我能够将 WCF 应用程序托管为虚拟目录。但客户要求是将其托管为一个简单的文件夹。我没有看到任何将应用程序添加为 IIS 中的文件夹的选项。我怎样才能做到这一点？![在此处输入图像描述](../Images/80229bc811ebcffb14ba944e65749c1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:00:12.180

您的客户使用模糊的术语。它是 IIS vdir 或 IIS 应用程序，差别很小。客户端可能已经设置了 vdir。在这种情况下，他可能希望您将 WCF 代码放入该 vdir 的子文件夹中。您将需要验证。如果是这种情况，那么您就没有必要进入 iis 管理器。只需在与他的 vdir 对应的物理目录中创建一个子文件夹，然后将文件放在那里。

# python - eval()是否比自我分析好？

> ID：11047480
> 
> 赞同：4
> 
> 时间：2012-06-15T08:53:52.723
> 
> 标签：python, eval

这是我的情况，我有一个字符串如下

```
'a':1 'b':2 'c':3 
```

我想把它变成一个字典，所以我有两个选择：

1.  拆分字符串，`' '`然后`':'`将这些对放入 a `dict`。

2.  替换`' '`为`','`、追加`'{'`和`'}'`到字符串并使用`eval()`来获取`dict`.

所以我的问题是哪个更快？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T08:57:53.063

我会这样做：

```
import ast
result = ast.literal_eval(''.join(["{", s.replace(" ", ", "), "}"])) 
```

您也可以这样做（尽管差异可能可以忽略不计）：

```
import ast
result = ast.literal_eval("{" + s.replace(" ", ", ") + "}") 
```

最好使用它，`ast.literal_eval`因为[它](http://docs.python.org/library/ast.html#ast.literal_eval "Python 文档")比使用更安全`eval()`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T09:25:31.587

好的，到目前为止，这是所有这些：

```
import ast, re, json

s = "'a':1 'b':2 'c':3"

def a_eval(s):
    s = s.replace(' ', ',')
    return eval('{%s}' % s)

def a_ast(s):
    s = s.replace(' ', ',')
    return ast.literal_eval('{%s}' % s)

def a_parse(s):
    d = {}
    for p in s.split():
        k, v = p.split(':')
        d[k.strip("'")] = int(v)
    return d

def a_re(s):
    d = []
    re.sub(r"'(\w+)':(\w+)", lambda m: d.append(m.groups()), s)
    return dict((a, int(b)) for a, b in d)

def a_json(s):
    s = s.replace(' ', ',')
    s = s.replace("'", '"')
    return json.loads('{%s}' % s)

#eof

import timeit    
setup = open(__file__).read().split('#eof')[0]
results = []

for p in dir():
    if p.startswith('a_'):
        results.append((timeit.timeit('%s(s)' % p, setup, number=10000), p))

for p in sorted(results):
    print '%.4f %s' % p 
```

结果：

```
0.0753 a_parse
0.1068 a_json
0.1455 a_re
0.2211 a_eval
0.3297 a_ast 
```

在更长的字符串`json`上，获胜者是：

```
long_s = ((s + ' ') * 100).strip()

for p in dir():
    if p.startswith('a_'):
        results.append((timeit.timeit('%s("%s")' % (p, long_s), setup, number=100), p))

for p in sorted(results):
    print '%.4f %s' % p 
```

结果：

```
0.0166 a_json
0.0528 a_parse
0.0565 a_re
0.0927 a_eval
0.1519 a_ast 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T09:14:17.413

`json.loads`比`ast.literal_eval`：

```
$ python -m timeit -s "s = '\'a\':1 \'b\':2';s = '{' + s.replace(' ', ', ') + '
}'; import json" "json.loads(s.replace('\'', '\"'))"
100000 loops, best of 3: 5.11 usec per loop

$ python -m timeit -s "s = '\'a\':1 \'b\':2';s = '{' + s.replace(' ', ', ') + '
}'; import ast" "ast.literal_eval(s)"
100000 loops, best of 3: 19.4 usec per loop 
```

# macos - 如何发布 NSSystemDefined NSEvent

> ID：11047488
> 
> 赞同：1
> 
> 时间：2012-06-15T08:54:27.083
> 
> 标签：macos, cocoa, quartz-graphics, nsevent

我创建了一个`NSEvent`，我想发布它。我怎样才能做到这一点？

它是一种`NSSystemDefined`类型，我想在全球范围内发布它。基本上是一些`IOHIDPostEvent`或`CGEventPost`等价的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:33:34.147

`CGEventPost(0, [ev CGEvent])`可以。

# css - 扩展 div 以填充页面

> ID：11047501
> 
> 赞同：-1
> 
> 时间：2012-06-15T08:55:22.160
> 
> 标签：css

我正在创建一个网页，内容 div 应该填满整个屏幕。目前它缩小到内容的数量。

页脚应该是“粘性的”并且位于屏幕底部（想象一下几乎没有任何内容）。

我已经对页脚进行了排序，我只是在为内容 div 的高度而苦苦挣扎。如何让内容 div 填满整个屏幕？

```
<html>
<head>

<style>
html, body {height:100%;margin:0;padding:0;}
#wrap {min-height:100%;}
header {
    height:100px;
    background:green;
}
#main {
    background:yellow;
    overflow:auto;
    padding-bottom:50px;
}
#main {
    font-size:28px;
    overflow:none;
}
footer {
    position:relative;
    margin-top:-50px;
    clear:both;
    height:50px;
    background:red;
}
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;
}
</style>
<!--[if !IE 7]>
    <style type="text/css">
        #wrap {display:table;height:100%}
    </style>
<![endif]-->
</head>
<body>

<div id="wrap">
    <header>
        This is the header
    </header>
    <div id="main">
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed a viverra mauris. Aenean eu facilisis enim. Cras laoreet diam at lorem euismod condimentum. Morbi diam nisi, eleifend id varius vitae, ultrices sed nunc. Aenean facilisis, arcu sed congue tempor, leo nisi convallis dolor, et malesuada velit tortor id neque. Nullam nec eros est, at hendrerit risus. Vivamus in sollicitudin elit. Vivamus id odio justo, eget condimentum elit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis mauris massa, iaculis eu laoreet sit amet, suscipit nec dolor. Ut rutrum porttitor viverra. Proin convallis, turpis id varius varius, nisi nulla vulputate dolor, vitae mattis neque quam ac nulla. Fusce accumsan, urna nec vulputate imperdiet, tortor erat fringilla massa, nec convallis ligula risus vitae mauris. Vivamus sagittis pulvinar ipsum, bibendum congue purus gravida posuere.</p>
<!--
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis non lorem id ante scelerisque malesuada id ut nibh. Duis massa erat, dictum hendrerit interdum ut, faucibus non lorem. Sed velit leo, pellentesque sit amet dapibus vel, vestibulum ac sem. Nulla a hendrerit risus. In sodales ultricies lorem at tempus. Fusce sed velit urna. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ut mi nunc, et tristique ipsum. Cras lobortis augue eget enim sodales et sollicitudin turpis feugiat. Morbi a interdum felis. Donec porttitor nibh ut metus commodo et pulvinar dui pretium. Fusce pellentesque felis in metus vehicula feugiat.</p>
<p>
Duis suscipit nibh non leo venenatis tempor. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce tincidunt sapien id purus tempus ac viverra sapien vulputate. Fusce eu tortor purus. Mauris sit amet diam a arcu hendrerit auctor. Mauris vel nunc nec leo gravida ullamcorper. Donec eu arcu nibh, eu feugiat lorem. Nunc euismod ligula nec est lobortis vehicula. Etiam feugiat lacus in nulla porttitor eu iaculis dui dictum. Nullam gravida enim in leo tempor euismod. Cras porttitor, neque at molestie egestas, metus nisl tincidunt lacus, non vestibulum metus sapien eu est. Mauris tempus mattis quam eu elementum. Curabitur tempor feugiat massa, sit amet tempor mauris fermentum ut. Nullam faucibus lobortis lectus, ac fermentum sapien venenatis eget.</p>
<p>
Nulla facilisi. Proin a lorem non justo gravida pharetra a at dolor. Phasellus vitae viverra purus. Nullam at tellus id orci ornare cursus. Maecenas velit ante, egestas eu auctor at, lacinia in massa. Morbi sit amet turpis a neque vestibulum pulvinar. Aliquam erat volutpat. Ut accumsan aliquet sodales. Praesent tortor turpis, vulputate quis bibendum eu, pharetra vestibulum nunc. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum convallis, lorem ac consectetur volutpat, diam sem bibendum lectus, vitae sagittis eros odio eget urna. Sed ipsum nulla, interdum nec accumsan at, faucibus at est. Vivamus faucibus condimentum erat, id varius metus cursus non. Vestibulum ut justo fringilla enim pellentesque auctor pretium eget quam.</p>
<p>
Ut in urna quis turpis placerat volutpat. Integer vel tincidunt sem. Pellentesque semper venenatis vestibulum. Pellentesque pretium volutpat neque eu dignissim. Aenean consectetur, magna in hendrerit sodales, mauris libero ullamcorper lectus, in imperdiet enim odio quis sem. Donec sed tellus urna, non sodales massa. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Phasellus rutrum dolor nec sem gravida dignissim. Curabitur in ante leo. </p>
-->
    </div>
</div>
<footer>
    This is the footer
</footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T17:47:02.903

似乎您可能已经知道这一点，但为了使元素适合视口的高度，它以及所有其他祖先元素都需要 100% 高度。

您已经为 body 和 html 完成了此操作（这很好），但您也需要为 #wrap 执行此操作。min-height 对此不起作用。然后，您还需要将标题设置为百分比高度，以便您可以让#main div 填充视口的其余部分。就像是：

```
#wrap  { height: 100%; }
header { height: 10%; }
#main  { height: 90%; } 
```

这应该负责填充视口，因为您的 html 和 body 已经设置为 height: 100%;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:30:01.630

尝试将页脚设置为

```
position: fixed
bottom: 0
left:0 
```

这应该可以将页脚固定在底部。但是，如果正文扩展到页脚之外，则可能会造成问题。

# javascript - 函数超时

> ID：11047505
> 
> 赞同：0
> 
> 时间：2012-06-15T08:55:36.147
> 
> 标签：javascript, jquery, css, class, function

我正在尝试编写一个代码，在有限的时间内向 div 添加一个类，然后将其删除。
我尝试使用 javascript 的 setTimeout 和 jQuery 的延迟，但没有任何效果。
该元素已设置但从未删除。

这是我想出的：

```
window.onload = function() {
    $(".button").click(handler);
}

function handler() {
    $(this).addClass("onclick");
    setTimeout(function() { $(this).removeClass("onclick"); }, 3000); // JS's setTimeout

    $(this).addClass("onclick").delay(3000).removeClass("onclick"); // jQuery's delay
} 
```

我不明白出了什么问题......我什至尝试为 setTimeout 函数编写第二个处理程序。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T08:58:53.633

您遇到的问题是`this`您传递给的函数内部与`setTimeout`外部函数不同。通常的解决方法是通过创建一个变量来保存它，并使用该变量来使用闭包：

```
function handler() {
    var $elm = $(this);

    $elm.addClass("onclick");
    setTimeout(function() {
        $elm.removeClass("onclick");
    }, 3000);
} 
```

在那里，我还使用 var 来缓存结果，`$(this)`因为不止一次这样做是没有意义的。

更多背景：

在 JavaScript 中，与一些看起来相似的语言不同，`this`它完全由*函数的调用*方式定义。当您使用`setTimeout`时，调用函数的方式将成为`this`全局对象（`window`浏览器上的 , ），这就是为什么`$(this).removeClass(...)`不起作用的原因。

`this`如果您有兴趣，请进一步了解：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:59:01.567

`this`setTimeout 调用内部不引用单击的元素。

将其更改为：

```
function handler() {
    var t = $(this);
    t.addClass("onclick");
    setTimeout(function() { t.removeClass("onclick"); }, 3000);
} 
```

工作示例 - [http://jsfiddle.net/5vakN/](http://jsfiddle.net/5vakN/)

`this`javascript中如何工作的参考- [http://bonsaiden.github.com/JavaScript-Garden/#function.this](http://bonsaiden.github.com/JavaScript-Garden/#function.this)

# css - 我还应该费心将所有 css 保存在一个文件中吗？

> ID：11047507
> 
> 赞同：6
> 
> 时间：2012-06-15T08:55:40.473
> 
> 标签：css, optimization

曾几何时，更高级的 Web 开发人员认为我应该避免管理多个 CSS 文件并坚持**每个项目一个**。在处理大量重叠的 CSS 规则时，它有助于提高页面加载速度并避免愚蠢的错误。

我的问题是 - 这种方法仍然有效吗？

现在，关于页面加载性能的争论似乎并不多，因为现在有了很棒的宽带互联网和聪明的网络浏览器，还有更强大的缓存功能。CSS 级联确实很容易出错，但是对于没有经验的开发人员并且拥有一个 CSS 样式表并不能真正使我们防弹。

我认为我更希望有一组由组件整齐分隔的默认样式表，然后通过 CSS 将它们连接到一个规则中`@import`。这也将允许我默认包含重置样式表。

有人和我在一起吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T08:58:56.677

这与带宽速度无关，而是关于 http 请求的数量，这对于移动连接很有意义。

但是，使用不同的 css 文件来保持项目模块化的方法是可靠的，因为它可以帮助您按照您想要的方式组织 css，而无需将所有代码仅放在一个文件中。然后，您可以利用 css 预处理器/压缩器将所有 css 文件连接并压缩到一个文件中以用于生产。

这篇文章[http://www.igvita.com/2012/06/14/debunking-responsive-css-performance-myths/](http://www.igvita.com/2012/06/14/debunking-responsive-css-performance-myths/)

有一段关于移动的文章很好地解释了为什么这是一个好的做法：

> 您最好一次性下载所有 CSS 内容，而不是最初的预热连接。通过这样做，您还将帮助用户延长电池寿命。如果要在这里进行一项优化，那么它很简单：连接和压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:00:00.740

是的，这种方法仍然有效。关于负载优化的文章有几十篇，但大致思路如下

> 更少的文件 = 更少的对服务器的 http 请求 = 更好的负载性能

随着时间的推移发生变化的主要事情是，现在有许多工具支持在运行时将多个文件合并为单个文件。因此，您有单独的样式表以更好地组织、在开发时进行调试，并且这些工具在生产时合并、缩小和设置正确的缓存标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:58:48.907

我同意你的观点，我发现没有理由再只保留一个 css 表了，现在，我完全按照你所说的去做，按组件分离，以及延迟加载:)（php if 语句等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-22T19:32:53.593

我将内容与评论分开。例如 div 转到 /* Divs start*/ div#somediv /* Divs end*/ /* Animations start*/ /* Animations end*/. 对我来说，这比完成项目后合并不同的 css 文件更容易

# jquery - jquery，窗口宽度变化时添加/删除类

> ID：11047514
> 
> 赞同：26
> 
> 时间：2012-06-15T08:56:14.977
> 
> 标签：jquery

我编写了一个非常基本的脚本来在加载或调整窗口大小时添加/删除一个类。

我只是想知道是否有更好的方法可以做到这一点，或者是否可以减少代码行。

基本上，我希望能够在较小的屏幕上查看网站时更改样式。我认为最好在html标签低于一定宽度时向它添加一个新类......

无论如何，这是我的代码。

```
<script type="text/javascript">
 $(document).ready( function() {
    /* Check width on page load*/
    if ( $(window).width() < 514) {
     $('html').addClass('mobile');
    }
    else {}
 });

 $(window).resize(function() {
    /*If browser resized, check width again */
    if ($(window).width() < 514) {
     $('html').addClass('mobile');
    }
    else {$('html').removeClass('mobile');}
 }); 
```

谢谢

阿娇

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-15T09:11:21.300

好吧，我知道我参加聚会迟到了，但我看到一些类似的事情`$(document).ready()`并不是真正必要的。

如果您一遍又一遍地调用它们，请尝试缓存您的选择器，`var $window = $(window);`这将有助于提高性能。我使用一个函数表达式来封装我不在全局范围内，但仍然可以访问我的`$window`和`$html`缓存的 jQuery 选定元素。

```
(function($) {
    var $window = $(window),
        $html = $('html');

    $window.resize(function resize(){
        if ($window.width() < 514) {
            return $html.addClass('mobile');
        }

        $html.removeClass('mobile');
    }).trigger('resize');
})(jQuery); 
```

[http://jsfiddle.net/userdude/rzdGJ/1](http://jsfiddle.net/userdude/rzdGJ/1)

可能更干净一点，更容易理解：

```
(function($) {
    var $window = $(window),
        $html = $('html');

    function resize() {
        if ($window.width() < 514) {
            return $html.addClass('mobile');
        }

        $html.removeClass('mobile');
    }

    $window
        .resize(resize)
        .trigger('resize');
})(jQuery); 
```

[http://jsfiddle.net/userdude/rzdGJ/2](http://jsfiddle.net/userdude/rzdGJ/2)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-15T09:03:50.717

使用媒体类

```
@media screen and (max-width: 900px) {
  .class {
    width:800px;

  }
}

@media screen and (max-width: 500px) {
      .class {
        width:450px;

  }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-15T09:05:20.027

首先，使用函数干燥（不要重复自己）您的代码：

```
function checkWidth(init)
{
    /*If browser resized, check width again */
    if ($(window).width() < 514) {
        $('html').addClass('mobile');
    }
    else {
        if (!init) {
            $('html').removeClass('mobile');
        }
    }
}

$(document).ready(function() {
    checkWidth(true);

    $(window).resize(function() {
        checkWidth(false);
    });
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-15T09:02:48.680

```
function resize() {
    if ($(window).width() < 514) {
     $('html').addClass('mobile');
    }
    else {$('html').removeClass('mobile');}
}

$(document).ready( function() {
    $(window).resize(resize);
    resize();
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-26T18:19:03.523

你也可以使用这种方法我认为它很清楚：

```
$(window).on('resize', function(){
      var win = $(this);
      if (win.width() < 514) { 

      $('html').addClass('mobile');

      }
    else
    {
        $('html').removeClass('mobile');
    }

}); 
```

[简单方法](http://jsfiddle.net/rzdGJ/231/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-09T00:56:08.827

这个问题实际上困扰了我一段时间。我通常有多种尺寸用于过渡。我写了这个我想分享的想法：

```
$(function() {
  var pageTransitions = [['full',1600],['mobile',800],['tiny',400],['micro',0]]; // number shows minimum size - must be from high to low
  function resize() {
    var target = 0,
        w = $(window).width(),
        h = $('html');
    $.each(pageTransitions, function(index, pageTransition) {
        if( w > pageTransition[1]) {
            target = index;
            return false;
        }
    });
    $.each(pageTransitions, function(index, pageTransition) {
        h.removeClass(pageTransition[0]);
    });
    h.addClass(pageTransitions[target][0]);
  }
  resize();
  jQuery(window).on('resize', function() {
    resize();
  });
}); 
```

[http://jsfiddle.net/mckinleymedia/ERZ3q/7/](http://jsfiddle.net/mckinleymedia/ERZ3q/7/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-25T17:12:51.323

尝试这个。这个对我有用

```
function resize() {
        if ($(window).width() < 514) {}
        else {}
    }

    $(document).ready( function() {
        $(window).resize(resize);
        resize();
    }); 
```

# python-3.x - 在 python 3.2 中录制声音？

> ID：11047518
> 
> 赞同：0
> 
> 时间：2012-06-15T08:56:38.993
> 
> 标签：python-3.x, audio-recording

我已经成功编写了一段代码，它将记录几秒钟的音频，并使用 pyaudio 将其保存在 python 2.7 中的选定目录中，如下所示：

```
import pyaudio
import wave
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5
WAVE_OUTPUT_FILENAME = "%d_%d.wav" % (self.get('subject_nr'),       self.get('count_inline_script'))

p = pyaudio.PyAudio()

stream = p.open(format = FORMAT,
            channels = CHANNELS,
            rate = RATE,
            input = True,
            frames_per_buffer = chunk) 
```

现在，我最近才开始使用 Python 3.2，我想知道是否有办法像旧版本一样录制声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:04:33.257

如果您在 Windows 上并且您的脚本仅使用`wave`并且`pyAudio`完全可以使用 py3k 运行它。
`wave`是官方发行版中的一个模块，Windows 二进制安装程序`pyAudio`可以从[这里获得](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

# html - 在 OpenERP 中显示谷歌地图

> ID：11047524
> 
> 赞同：3
> 
> 时间：2012-06-15T08:57:23.140
> 
> 标签：html, xml, iframe, google-maps-api-3, openerp

我想包含`Google maps`在`OpenERP`. 据我所知，在我使用`iframe`标签之前`HTML`我无法显示`Google maps`，`OpenERP`但`OpenERP`我只有两种文件，一种是`.xml`，另一种是`.py`。现在我应该如何添加`iframe`只有这两个文件。有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:26:37.210

openerp addons 中有一个名为**google_map 的**模块。安装该模块以在 openerp 中获取谷歌地图，如果需要，通过创建您自己的自定义模块进行必要的更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:41:09.913

你可以试试 Camptocamp 的 geoengine 插件。此插件旨在使用地图在自定义视图中显示来自 OpenERP 数据库的数据。它不使用 iframe 来嵌入 googlemap，afaik。

[https://launchpad.net/geospatial-addons](https://launchpad.net/geospatial-addons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T23:42:56.067

这是在新链接中打开地图的示例，其中包含 google 地图的 html 和 java 脚本代码的 html 文件位于 static/src/googlemaps/get_place_from_coords.html

在openerp界面点击open google map按钮会调用如下方法：

```
def button_open_google(self, cr, uid, ids, context=None):
        for place in self.browse(cr, uid, ids):
            url="/tms/static/src/googlemaps/get_place_from_coords.html?" + str(place.latitude) + ','+ str(place.longitude)
        return { 'type': 'ir.actions.act_url', 'url': url, 'nodestroy': True, 'target': 'new' } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:56:16.710

在 2012 OpenERP Days 中，其中一个演示演示了如何创建自定义 Webclient 小部件。使用的示例是一个地理小部件，它可以作为谷歌地图在 froam 视图中显示和寻址。代码可[在此处](http://bazaar.launchpad.net/~openerp-dev/+junk/geo/view/head:/README.rst)获得。

# spring-mvc - 基于注解的用户检索 Spring security

> ID：11047526
> 
> 赞同：0
> 
> 时间：2012-06-15T08:57:29.323
> 
> 标签：spring-mvc, spring-security, spring-annotations

我正在寻找如何接收活动/登录用户的正确方法。我将 Spring Security 3.1 与相同版本的 Spring MVC 一起使用。整个想法是基于这篇文章中更多评论的[这个主题：](https://stackoverflow.com/questions/8764545/best-practice-for-getting-active-users-userdetails)

[文章中的@ActiveUser 注释](http://blog.awnry.com/post/16187851956/spring-mvc-get-the-logged-in-userdetails-from-your)

我完全按照说明进行操作，但仍然出现这种错误：

```
No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.security.core.userdetails.User.<init>()] 
```

在我的 applicationContext.xml 我有这三个注释不是作者直接提出的

```
<context:annotation-config />
<context:component-scan base-package="my.package.*" />
<mvc:annotation-driven /> 
```

什么可能导致这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:24:13.107

在互联网上搜索了几个小时后，我发现了我应该如何解决这个问题。因为它可能对其他人有用，所以我提供了解决方案。

这类问题在 Spring 3.1（我使用）中的解决方案与 Spring 3.0（提到的教程）中的解决方案不同。此处介绍了有关该问题的精彩文章：在此处[输入链接描述](http://blog.42.nl/articles/leveraging-the-spring-mvc-3.1-handlermethodargumentresolver-interface)

# windows-phone-7 - 可清除的文本框

> ID：11047529
> 
> 赞同：0
> 
> 时间：2012-06-15T08:57:52.490
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在尝试创建一个没有可清除文本框的应用程序（一个内部带有“x”的文本框，单击“x”数据会在文本框中清除）。

我浏览了 2 个链接[这个](http://jacob4u2.blogspot.in/2010/07/clearable-textbox-for-win-phone-7.html)和[这个](http://silverscratch.blogspot.in/2010/03/watermarked-textbox-part-i.html)，它没有帮助。

任何人都可以帮助为它创建一个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:19:44.570

不确定您面临的确切问题。您可以通过在网格（相邻列）中有一个文本框和一个圆形按钮（coding4fun）来实现这一点

点击按钮清除文本框。你甚至可以为自己创建一个很好的用户控件，很好地包装代码，这样你就可以拥有多个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:20:21.947

类似的东西？

```
 public TextBox CreateTextBox(string defaultText)
        {
            var tb = new TextBox { Text = defaultText };
            tb.GotFocus += new RoutedEventHandler((object sender, RoutedEventArgs e) =>
            {
                if (tb.Text == defaultText)
                    tb.Text = "";
            });

            return tb;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:39:54.293

你错过了这个[链接](http://jacob4u2.blogspot.in/2010/07/clearable-textbox-custom-control.html)。它有一个自定义控件“ClearableTextbox”，可能适合您的要求。

您也可以下载包含 dll 文件的[源代码。](http://dl.dropbox.com/u/9590085/BlogFiles/ClearableTextBox.zip)

在您的项目中包含对该 dll 的引用，然后在 xaml 页面中添加以下行，

```
xmlns:clrtb="clr-namespace:ClearableTextBox;assembly=ClearableTextBox" 
```

然后你可以使用类似的文本框，

```
<clrtb:ClearableTextBox Width="300" Height="60" VerticalAlignment="Top"/> 
```

由于源代码可用，您可以对其进行一些修改，使其符合您的要求

**更新：**

或者，我发现这个很棒的控件可以让你的任务变得简单：

[SilverlightWP7 工具包](http://silverlight.codeplex.com/)中的[PhoneTextBox](http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-PhoneTextBox-in-depth)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:31:41.587

全面披露：我在 Telerik 工作，我们的 TextBox 内置了此功能： [http ://www.telerik.com/products/windows-phone/overview/all-controls.aspx](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx)

# c - 为什么这个烦人的波浪号 ~ 出现在我的 char* 字符串中？

> ID：11047531
> 
> 赞同：0
> 
> 时间：2012-06-15T08:57:57.730
> 
> 标签：c, linux, eclipse, file, ubuntu

我正在尝试使用`BFS`和递归查找文件，在给定目录和文件的情况下，算法需要检查给定目录或其所有子目录。

现在，当我检查目录时，有时会在字符串`~`末尾弹出一个恼人的波浪号。`char*`我已经检查了一些`printf-S`并得出结论，这`~`实际上是 file-name 的一部分。

怎么可能？是不是我做错了什么？

这是递归的一部分：

```
int scanner(char *dirname,char *entries , char * directory , char * file)
{

    struct stat st;

    /* scan the directory and store the entries in a buffer */
   DIR *dir;
   struct dirent *ent;
   int count=1;
   char name[256];

   if ((dir = opendir(dirname)) == NULL)
   {
     perror("Unable to open directory");
     return(0);
   }

   while ((ent = readdir(dir)) != NULL)
       count++;

   rewinddir(dir);

   // here we copy all the file-names from the directory into the buffer
   // we copy all the names using sprintf and strcpy

   while ((ent = readdir(dir)) != NULL)
   {

       strcpy(name,ent->d_name);

       if (strcmp(name , file) == 0 )

       {
           printf("\nFile was found  !!! in first IF\n");
           printf("\n-----------------------------------------------------------------------\n");

           if (stat(name, &st) < 0) {
                perror(name);
                putchar('\n');
                continue;
            }

           printfile(&st , name);
           printf("\nStringer 'name' is : %s" , name);
           printf("\nThe length of %s is %d" , name , strlen(name));
       }

       else // try
       {
           int length = strlen(name);
           char try[length+2];
           strcpy(try,name);
           try[length+1] = '~';
           try[length+2] = '\0';

           printf("\nThe 'name' is : %s" , name);
           printf("\nThe length of %s is %d" , name , strlen(name));
           printf("\nPrint try %s\n" , try);
           if (strcmp(try , file) == 0 )
               printf("\nFile was found  !!! in second IF\n");
       }

       sprintf(entries,"%s",name);
       entries = entries+strlen(name)+1;

       printf("\nStringer name :%s" , name);

       count++;
   }

   if (closedir(dir) != 0)
     perror("Unable to close directory");

     return(count);
} 
```

从`terminal`我打`./exer4 check david.txt`，得到：

```
The 'name' is : ..
The length of .. is 2
Print try ..

Stringer name :..
The 'name' is : .
The length of . is 1
Print try .

Stringer name :.
The 'name' is : insideCheck
The length of insideCheck is 11
Print try insideCheck

Stringer name :insideCheck
The 'name' is : david.txt~
The length of david.txt~ is 10
Print try david.txt~

Stringer name :david.txt~
The 'name' is : doc.txt~
The length of doc.txt~ is 8
Print try doc.txt~ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:01:17.550

以[波浪号 (~)](http://en.wikipedia.org/wiki/Tilde)作为后缀意味着该文件是自动备份，例如[Emacs 倾向于创建这些](http://www.gnu.org/software/emacs/manual/html_node/emacs/Backup-Names.html). 由于您的示例显示了波浪号后缀的文本 ( `.txt`) 文件，因此 Emacs 很可能是这里的罪魁祸首。

所以你的代码没有问题，任何工具都应该显示这些文件，因为它们实际上就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:01:27.543

您是在使用`vi`还是`Vim`作为编辑器？这些文件（其名称以 a 结尾`~`）是由`vi`.

# android - 检查资产在应用重新安装之间是否发生变化（Android）

> ID：11047539
> 
> 赞同：0
> 
> 时间：2012-06-15T08:58:44.470
> 
> 标签：android, assets

有没有办法查看资产文件在 Android 中重新安装应用程序之间是否发生了变化？整个资产文件夹上的 md5 或时间戳之类的东西（afaik 资产只是一个压缩文件，所以也许可以只检查这个文件是否有更改？）？

我们有一个应用程序，我们将配置 xml 存储在 assets 文件夹中，然后将它们解析为二进制形式。由于应用程序仍在开发中，xmls 有时会发生变化。我希望能够自动确定资产已更改，因此我可以将 xmls“重新加载”为二进制形式。总是这样，我们有相同数量的 xml 文件，它们的内容会稍微改变一点，所以只看文件列表是否改变是不够的。

我知道保留一个版本号是可能的，但如果可能的话，我想避免它，因为它容易出错并且需要每个程序员的一些纪律。

**编辑**

现在找到了这个答案：[Android 资产时间戳](https://stackoverflow.com/questions/9231823/android-assets-timestamp?rq=1)

正如这表明资产时间戳可能不是一个好主意，因为它不反映资产文件时间戳，而是反映构建时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:02:05.060

获取每个文件的哈希值并与文件名一起存储在共享首选项或文件中。还存储当前版本代码。在启动时，将应用程序的 versionCode 与磁盘上的进行比较，如果它发生了变化，请计算资产的哈希值并与磁盘上的进行比较。

# ruby - 如何执行程序并获得控制台的输出？

> ID：11047547
> 
> 赞同：-4
> 
> 时间：2012-06-15T08:59:09.287
> 
> 标签：ruby, unix, sinatra

> **可能重复：**
> [从显示和捕获输出的 Ruby 运行命令](https://stackoverflow.com/questions/10224481/running-a-command-from-ruby-displaying-and-capturing-the-output)

我必须在我的本地服务器上执行一个程序，并在一个变量中获取控制台的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:11:40.243

```
output = `echo "hello"`
puts output # => hello 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:07:08.077

```
$ irb
1.9.3p125 :001 > cal = %x[/usr/bin/cal]
1.9.3p125 :002 > puts cal
     June 2012        
Su Mo Tu We Th Fr Sa  
                1  2  
 3  4  5  6  7  8  9  
10 11 12 13 14 15 16  
17 18 19 20 21 22 23  
24 25 26 27 28 29 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:08:24.963

您可以使用 IO 重新打开重定向输出。

```
$stdout.reopen("stdout.txt", "w")
$stderr.reopen("stderr.txt", "w")

puts 'stdout redirect'
warn 'stderr redirect' 
```

# java - 在servlet中获取cookie

> ID：11047548
> 
> 赞同：15
> 
> 时间：2012-06-15T08:59:10.467
> 
> 标签：java, servlets, cookies

我正在尝试使用 servlet 获取 cookie

```
Cookie[] cookie = request.getCookies(); 
```

但`cookie`总是`null`。

所以我从另一个 servlet 设置它们，它们出现在浏览器首选项中。

```
Cookie cookie = new Cookie("color", "cyan");
cookie.setMaxAge(24*60*60);
cookie.setPath("/");
response.addCookie(cookie); 
```

我不明白怎么了？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T09:10:50.783

[根据文档](http://docs.oracle.com/javaee/1.2.1/api/javax/servlet/http/HttpServletRequest.html#getCookies%28%29) `getCookies()`返回一个数组，其中包含客户端随此请求发送的所有 Cookie 对象。如果没有发送 cookie，则此方法返回 null。

您是否正确添加了 cookie？如果是，您应该能够遍历返回的 cookie 列表

```
Cookie[] cookies = request.getCookies();

for (int i = 0; i < cookies.length; i++) {
  String name = cookies[i].getName();
  String value = cookies[i].getValue();
} 
```

如果不...

Cookie 是`addCookie(Cookie)`通过响应对象中的方法添加的！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-21T10:30:37.307

**设置饼干**

```
 Cookie cookie = new Cookie("cookiename", "cookievalue");
  response.addCookie(cookie); 
```

**获取饼干**

```
 Cookie[] cookies = request.getCookies();
  if(cookies != null) {
      for (int i = 0; i < cookies.length; i++) {
          cookie=cookies[i]
          String cookieName = cookie.getName();
          String cookieValue = cookie.getValue();
       }
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-04T13:20:24.157

你确定客户端支持cookies吗？因为如果将其配置为不接受 cookie，您将永远无法在以下请求中取回它们...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T16:15:31.580

我遇到了同样的问题，发现我的原因是我使用的是 Eclipse 内置的浏览器。这不接受cookies。当我从 chrome 访问相同的 JSP 时，它起作用了。也许你正在做和我一样的事情？

也可能是您使用的浏览器或您的互联网设置被设置为拒绝 cookie。希望这可以帮助您或遇到相同问题的任何其他访问者。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-15T09:21:39.807

首先，你应该创建一个cookie，然后添加到响应

```
Cookie cookie = new Cookie(name,value);
response.addCookie(cookie); 
```

# sql-server - TSQL计算众多字段的总和

> ID：11047551
> 
> 赞同：0
> 
> 时间：2012-06-15T08:59:25.797
> 
> 标签：sql-server, tsql, loops

我有这样的数据：

```
Date         Count1 Count2 Count3 ... Countxx
01-05-2012   1      0      1          2
01-05-2012   2      1      3          0
01-05-2012   2      3      3          1
02-05-2012   1      3      2          0
02-05-2012   5      2      0          0 
```

我需要计算按日期分组的各个字段（Count1 到 Countxx）的总和并编写以下 SQL：

```
select sum(count1), sum(count2), sum(count3), .. , sum(countxx) 
from table1 group by date 
```

我的第一个问题：SQL Server 中有没有办法自动执行此操作（不知道字段的数量，因为字段的名称和数量每次都会不同，因此手动编写 SQL 非常麻烦）。

其次，如何计算当前行减去上一行的值，以及前7行的平均值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:46:10.307

```
create procedure USP_FindSum @tablename varchar(100)                
as
begin
 create table #temp(id int identity(1,1),name varchar(100))
 declare @sqlcmd nvarchar(max)=''
 SET @sqlcmd= N'Insert into #temp select name from sys.columns col_table where        
 col_table.object_id=object_id('''+@tablename+''')'
 EXEC sp_executesql @sqlcmd
 declare @sqlseg varchar(max)=''
 declare @tempcount int
 declare @i int=1
 select @tempcount=COUNT(id) from #temp
 while(@i<=@tempcount)
 BEGIN
   declare @CName varchar(100)
   SELECT @CName= name from #temp where id=@i
   if(@i!=@tempcount)
    SET @sqlseg=+@sqlseg+'sum('+@CName+')'+',' 
   else
    SET @sqlseg =+@sqlseg+'sum('+@CName+')'
   SET @i=@i+1
 END
 SET @sqlcmd=N'select '+@sqlseg+' from '+@tablename
 EXEC sp_executesql @sqlcmd
 DROP TABLE #temp
END 
```

**假设表中的所有列都是 summable**。由于您的要求很奇怪，因此此解决方法也可能如此。

只需将表名作为参数传递并执行，

`Exec USP_FindSum '<tablename here>'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:06:14.970

无法对列的变量列表求和，您必须全部指定。

查找上一行的一种方法是`outer apply`，例如：

```
select  Date
,       cur.count1 - isnull(prev.count1,0) as Delta1
from    Table1 cur
outer apply
        (
        select  top 1 *
        from    Table1 prev
        where   prev.Date < cur.Date
        order by
                prev.Date desc
        ) prev 
```

另一种方法是加入基于以下的表`row_number()`：

```
; with  t1 as
        (
        select  row_number() over (order by Date) as rn
        ,       *
        from    Table1
        )
select  Date,
,       cur.count1 - isnull(prev.count1,0) as Delta
from    t1 cur
left join    
        t1 prev
on      cur.rn = prev.rn + 1 
```

# mysql - MYSQL 日期字段显示随机数，如何计算日期？

> ID：11047554
> 
> 赞同：0
> 
> 时间：2012-06-15T08:59:37.997
> 
> 标签：mysql, database

我已经导出了一个数据库（我需要报告的数据）我们有一个“开始日期”，它是每个项目的开始日期，但是在 MYSQL 中它没有显示日期而是显示一个随机数，它必须说以某种方式确定日期，因为任务似乎按顺序进行并且数字相应地发生变化。

谁能告诉我如何从数字中计算出日期，示例如下：

```
1337156712 
```

另一个：

```
1321443614 
```

任何帮助都会非常感谢！

好的，我正在使用这个 PHP 脚本来更改日期：

```
<?php

$TimeStamp = "1185422400"; 

$Time = date("m-d-Y", $TimeStamp);  

echo $Time;

?> 
```

有人可以帮我把它变成一个数组，这样我就可以包含大约 500 个日期并一次将它们全部转换吗？

谢谢

瑞奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:01:33.260

这些是unix时间戳。它们是自 1970 年 1 月 1 日以来过去的秒数。您可以使用各种函数调用将它们转换为日期 :)

我会马上回来用一种方法来做到这一点:)

`select from_unixtime(1321443614) as time`

啊！有人打败了我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:01:55.860

假设您的号码是 Unix 时间戳，[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)将为您提供可用于`DATETIME`字段的格式化日期：

```
mysql> SELECT FROM_UNIXTIME(1321443614) AS time;
+---------------------+
| time                |
+---------------------+
| 2011-11-16 11:40:14 |
+---------------------+
1 row in set (0.00 sec) 
```

还有很多其他时间功能可用，所有这些都在[此处](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)列出。

# iphone - iPhone SDK：使用应用程序一段时间后，视图之间的转换会失去动画

> ID：11047555
> 
> 赞同：1
> 
> 时间：2012-06-15T08:59:43.260
> 
> 标签：iphone, uiview, uiviewcontroller, uiviewanimation, uianimation

我的视图有一个不寻常的问题 - 在使用基于标签栏的应用程序一段时间后，我注意到视图之间的滑动过渡停止了，而视图只是改变了（根本没有动画）。我无法理解它是如何或为什么发生的，因为它是随机发生的——即它不会发生在特定视图上，它可能发生在使用应用程序的任何阶段。

以前有没有人遇到过这个问题，你是如何解决它/找到导致问题的代码的？

编辑：我认为此代码（用于转到视图，即我的主选项卡中的另一个选项卡）可能会导致问题。

```
self.tabBarController.selectedIndex = 1;

UINavigationController *firstNavController =
(UINavigationController *)[self.tabBarController selectedViewController];

[firstNavController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:04:29.860

// 尝试使用下面的代码。只是将动画 NO 更改为动画 YES。

self.tabBarController.selectedIndex = 1;

UINavigationController *firstNavController = (UINavigationController *)[self.tabBarController selectedViewController];

[firstNavController popToRootViewControllerAnimated:YES];

# wcf - 使用 Unity 在 WCF 中自定义 X509CertificateValidator 类中的依赖注入

> ID：11047558
> 
> 赞同：0
> 
> 时间：2012-06-15T08:59:53.843
> 
> 标签：wcf, dependency-injection, unity-container, x509certificate

我们将 WCF 服务与基于证书的身份验证与 wsHttpBinding 一起使用。

我已经编写了自定义类来进行身份验证。此类继承自 System.IdentityModel.Selectors.X509CertificateValidator。

```
 public class MyX509CertificateValidator : System.IdentityModel.Selectors.X509CertificateValidator
    {

        public override void Validate(X509Certificate2 certificate)
        {
            /// Custom code goes here
        }
    } 
```

此类在 web.config 中配置

```
 <behavior name="customBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceCredentials>
            <clientCertificate>
              <authentication certificateValidationMode="Custom"
                              customCertificateValidatorType="**SampleClass.MyX509CertificateValidator** ,SampleClass"
                              revocationMode="NoCheck"/>
            </clientCertificate>
            <serviceCertificate
              findValue="XXXXXXXXXXXXXXXX"
              x509FindType="FindByThumbprint"
              storeLocation="CurrentUser"
              storeName="My"/>
          </serviceCredentials> 
```

我正在使用 Unity.WCF nuget 包向 WCF 添加 DI 支持。我的问题是我无法在上面的类中注入依赖项。Unity 不提供此类服务。调用 WCF 时，WCF 运行时会自动调用它。

我们真的可以在上面的类中添加依赖注入支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:33:45.357

您仍然可以将依赖项注入自定义证书验证器：

您可以通过构造函数接受它：

```
public class CertificateValidator : X509CertificateValidator
{
    private IMyDependency _dependency;

    public CertificateValidator(IMyDependency dependency)
    {
        _dependency = dependency;
    }

    public override void Validate(X509Certificate2 certificate)
    {
        ... 
```

然后在配置服务主机时传递：

```
serviceHost.Credentials.ClientCertificate.Authentication.CustomCertificateValidator =
    new CertificateValidator(dependency); 
```

您可以使用 IOC 容器将依赖项提供给创建服务主机的程序部分。

# android - android中的XML Pull Parser异常

> ID：11047561
> 
> 赞同：2
> 
> 时间：2012-06-15T09:00:04.187
> 
> 标签：android, xml, soap, xml-parsing

我正在尝试通过 android 手机访问网络服务。Web 服务在 localhost 上发布。但现在我收到以下错误。有没有人有这方面的经验？

```
 06-15 14:27:03.969: WARN/System.err(277): org.xmlpull.v1.XmlPullParserException: attr value delimiter missing! (position:START_TAG <html dir='null'>@2:11 in java.io.InputStreamReader@44f4e7d0) 
    06-15 14:27:04.000: WARN/System.err(277):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
    06-15 14:27:04.000: WARN/System.err(277):     at org.kxml2.io.KXmlParser.error(KXmlParser.java:269)
    06-15 14:27:04.000: WARN/System.err(277):     at org.kxml2.io.KXmlParser.parseStartTag(KXmlParser.java:708)
    06-15 14:27:04.000: WARN/System.err(277):     at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:342)
    06-15 14:27:04.000: WARN/System.err(277):     at org.kxml2.io.KXmlParser.next(KXmlParser.java:1385)
    06-15 14:27:04.011: WARN/System.err(277):     at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1415)
    06-15 14:27:04.011: WARN/System.err(277):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
    06-15 14:27:04.011: WARN/System.err(277):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
    06-15 14:27:04.099: DEBUG/dalvikvm(277): GC_FOR_MALLOC freed 5747 objects / 296016 bytes in 90ms
    06-15 14:27:04.109: WARN/System.err(277):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
    06-15 14:27:04.109: WARN/System.err(277):     at com.psl.virtual.transport.HttpUtil.sendRequest(HttpUtil.java:41)
    06-15 14:27:04.109: WARN/System.err(277):     at com.psl.virtual.ui.VMLoginScreen.check(VMLoginScreen.java:98)
    06-15 14:27:04.109: WARN/System.err(277):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-15 14:27:04.109: WARN/System.err(277):     at java.lang.reflect.Method.invoke(Method.java:521)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.View$1.onClick(View.java:2067)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.View.performClick(View.java:2408)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.View.onKeyUp(View.java:4121)
    06-15 14:27:04.109: WARN/System.err(277):     at android.widget.TextView.onKeyUp(TextView.java:4431)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.View.dispatchKeyEvent(View.java:3740)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    06-15 14:27:04.109: WARN/System.err(277):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    06-15 14:27:04.120: WARN/System.err(277):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    06-15 14:27:04.120: WARN/System.err(277):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    06-15 14:27:04.120: WARN/System.err(277):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
    06-15 14:27:04.120: WARN/System.err(277):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
    06-15 14:27:04.120: WARN/System.err(277):     at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
    06-15 14:27:04.120: WARN/System.err(277):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
    06-15 14:27:04.120: WARN/System.err(277):     at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
    06-15 14:27:04.120: WARN/System.err(277):     at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
    06-15 14:27:04.130: WARN/System.err(277):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
    06-15 14:27:04.130: WARN/System.err(277):     at android.os.Handler.dispatchMessage(Handler.java:99)
    06-15 14:27:04.130: WARN/System.err(277):     at android.os.Looper.loop(Looper.java:123)
    06-15 14:27:04.130: WARN/System.err(277):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    06-15 14:27:04.130: WARN/System.err(277):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-15 14:27:04.130: WARN/System.err(277):     at java.lang.reflect.Method.invoke(Method.java:521)
    06-15 14:27:04.130: WARN/System.err(277):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    06-15 14:27:04.130: WARN/System.err(277):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    06-15 14:27:04.130: WARN/System.err(277):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-14T13:32:35.150

我发现了两种情况，其中 XmlPullParser 不喜欢解析 HTML - 在第一种情况下，HTML 是有效的，在第二种情况下，HTML 是无效的，但似乎很可能会发生：

1) 未引用的属性值，如：

```
<img class=logoimg ... 
```

然而[HTML (5.1)](https://www.w3.org/TR/html51/syntax.html#unquoted)规范允许它：

> 不带引号的属性值语法 属性名称，后跟零个或多个空格字符，后跟单个 U+003D 等号字符，后跟零个或多个空格字符，然后是属性值，除了上面给出的要求对于属性值，不得包含任何文字空格字符、任何 U+0022 引号字符 (")、U+0027 撇号字符 (')、U+003D 等号字符 (=)、U+003C 小于号字符(<)、U+003E GREATER-THAN SIGN 字符 (>) 或 U+0060 重音字符 (`)，并且不得为空字符串。
> 
> 在下面的示例中，value 属性使用不带引号的属性值语法给出：

```
<input value=yes> 
```

> 如果使用不带引号的属性语法的属性后跟另一个属性或上面开始标记语法的步骤 6 中允许的可选 U+002F SOLIDUS 字符 (/)，则必须有一个空格字符将两者分开。

2) 以逗号分隔的属性值，如：

```
<meta name=viewport content="width=device-width, initial-scale=1"> 
```

再次从规范：

> 如果使用双引号属性语法的属性后跟另一个属性，则必须用空格字符分隔两者。

简而言之，解析代码（即使用 XmlPullParser 的代码）需要容忍异常情况——特别是因为解析器似乎继续运行良好。

# iphone - NSMutableString 检查最后一个和倒数第二个字符

> ID：11047562
> 
> 赞同：0
> 
> 时间：2012-06-15T09:00:06.910
> 
> 标签：iphone, nsmutablestring

我有一个`NSMutableString`. 我需要检查最后一个字符是@“：”还是最后两个字符是@“：”

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:02:05.903

使用 的`hasSuffix:`方法`NSString`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:09:46.977

标识*最后一个 char*：

```
NSString *lastChar = [yourstr substringFromIndex: [yourstr length] - 1]; 
```

* * *

标识*最后两个字符*：

```
NSString *lastTwoChar = [yourstr substringFromIndex: [yourstr length] - 2]; 
```

# c# - 在 WPF 或 WinForms 中绘制矩阵的表面

> ID：11047568
> 
> 赞同：0
> 
> 时间：2012-06-15T09:00:41.400
> 
> 标签：c#, wpf, winforms

我有一个要在 WinForms 或 WPF 控件中绘制的数据矩阵（列代表时间，行代表频谱频率）。类似于 MATLAB 中的曲面图。

我看过 Microsoft Charting Controls，但它似乎不支持任何可以帮助我的东西。

你知道如何显示这些数据吗？最好是图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:04:50.973

在您的情况下，我通常会检查所有可用的付费控件，例如 Telerik、Infragistics、DevExpress 等，以找到适合我需要的东西。然后我考虑是否值得付出代价，以防不值得我自己实现自定义控件。

# forms - 如何将定制的 TinyMCE 表单元素添加到我的 Zend 项目？

> ID：11047574
> 
> 赞同：1
> 
> 时间：2012-06-15T09:00:55.187
> 
> 标签：forms, zend-framework, tinymce

我已经与 Zend 合作了几个月，现在我想使用 TinyMce 在我的表单中添加一些字段。我想要实现的是能够创建一个扩展 Zend_form 的表单并且能够说

$element = new TinyMce_Form_Element_Editor('element');

但我对如何实现这一点一无所知。在问这个问题之前，我当然一直在环顾四周，大多数消息来源只是将我指向[这个网站。](http://juriansluiman.nl/en/article/100/improved-tinymce-solution-for-the-zend-framework#heading1) Wich 似乎针对的是对 Zend 有很多经验的人。2 个月后，我没有达到预期的水平，这并不奇怪，因为我尝试按照给出的说明创建文件设置，如本文作者创建的 svn 存储库中所示。

除了从一个错误进入另一个错误之外，我也不了解代码到底在做什么，当我通过它运行时，我充其量只是一个模糊的猜测。

是否有任何易于理解的简单教程解释如何在 Zend 表单中启用 tinymce？

任何关于如何实现我的目标的建议或提示将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:14:17.457

不是最佳解决方案，但您可能会发现它很有用：

```
class My_Form_Element_Tinymce extends Zend_Form_Element_Textarea
{
    /**
     * Element CSS class name
     * @var string 
     */
    protected $class = 'tinyMCE';

    public function init() 
    {
        $this->getView()->headScript()->appendFile('path/to/tinymce.js');
        $this->getView()->headScript()->appendFile('path/to/tinymce_config.js');
    }
} 
```

并在您`tinymce_config.js`添加`tinyMCE`类名的选择器中

`tinymce_config.js`是您的 tinyMCE 配置文件，如果您从未使用过 tinyMCE，请转到[http://tinymce.com](http://tinymce.com)，您会找到许多您需要的示例。

# ajax - UTF-8 但仍未显示 ÆØÅ（丹麦字符）

> ID：11047575
> 
> 赞同：2
> 
> 时间：2012-06-15T09:01:05.970
> 
> 标签：ajax, encoding, utf-8, character-encoding

看看这个： [http ://thebekker.dk/_skole/GFeksamen/](http://thebekker.dk/_skole/GFeksamen/)

您可以看到第二个菜单项显示了一些奇怪的符号，而不是“Ø”

我在 meta 中设置了 utf-8，甚至尝试在 .htaccess 中使用 AddDefaultCharset UTF-8 ...

仍然没有结果，如果我更改为 ISO-8859-1 可以正常工作，但是当我开始对内容进行 ajax 调用时就会出现问题......

我不明白？我如何让它使用 UTF-8 并显示 ÆØÅ

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T09:12:00.897

如果您*声明*您的内容使用元标记或默认字符集以 UTF-8 编码，那么**您的内容实际上需要以 UTF-8 编码。**在声明您的内容以 ISO-8859 编码时正确显示的事实意味着您的内容*实际上*是以 ISO-8859 编码的。将您的源代码文件保存为 UTF-8 或以其他方式确保您的内容是 UTF-8 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T08:02:38.213

在 EditPlus 文本编辑器中将源文件保存在“西欧 (Windows)”中为我做了这件事 + 在 PHP 中我使用了 utf8_encode。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T09:21:16.167

您可以使用 unicode 设置此字符，例如 € 或其他许多字符。在我的公司，我们使用许多翻译和语言，例如法国，它们有许多特殊字符。

将您的网站编码类型设置为 utf-8 并在 php 中使用 utf8_encode 之类的编码

或手动：[http ://www.sql-und-xml.de/unicode-database/online-tools/](http://www.sql-und-xml.de/unicode-database/online-tools/)

# c# - 端点检查正确性

> ID：11047576
> 
> 赞同：0
> 
> 时间：2012-06-15T09:01:07.360
> 
> 标签：c#, .net, wcf, wcf-binding

我一直在搜索互联网，但无法找到解决我的问题的方法。

我希望能够通过传入的端点检查 WCF 服务的正确性和可用性。所以用户输入了一个端点（它改变了很多），我希望能够通过某种形式的 ping 或检查来确保它是有效的。

我一直在看[MSDN](http://msdn.microsoft.com/enus/library/system.servicemodel.discovery.discoveryservice.aspx)，但它似乎没有做我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:29:19.907

您可以将`OpenTimeout`您的客户绑定设置为合理的短时间并调用您的客户`Open()`方法。

如果服务不存在/应答，您将获得*System.ServiceModel.EndpointNotFoundException*。或者您的服务可以实现一种`"Ping()"`方法，该方法为您提供可以检查的合理结果，并在不先调用的情况下调用此“Ping()” `Open()`。因此，您可以通过一个电话检查可用性和正确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:27:22.793

您可以从 IDesign 网站（“Programming WCF Services”的作者）下载优秀的示例

这是链接：[iDesign](http://www.idesign.net/Downloads)

查看“临时发现”和“元数据资源管理器”

# android - Android：java.lang.VerifyError 因为泛型类

> ID：11047580
> 
> 赞同：2
> 
> 时间：2012-06-15T09:01:25.973
> 
> 标签：android, gson, generics

`java.lang.VerifyError`因此，我正在开发一个 Android 应用程序，并且在过去的几天里我一直在开发。
我在 stackoverflow 帖子中读到，这个错误是由于退货中的问题造成的（预期的回报不是它得到的回报）。

所以我相信这是由于一个泛型类被转换成一个字符串，我希望有人有一个解决方案！

**这是通用类：**

```
public class ProcessJson {
public enum MessageType{
    GetAppName,
    GetItemsList
}
public static Object ProcessResult(MessageType messageType, String result) throws MalformedJsonException{
    Gson gson = new Gson();
    Object returnValue = null;

    switch(messageType){
    case GetAppName :
        returnValue = gson.fromJson(result, String.class);
        return returnValue;
    case GetItemsList :
        returnValue = gson.fromJson(result, Item[].class);
        return returnValue;
    }

    return null;
}
} 
```

* * *

**这是我上课的地方：**

```
public void LoginBtn_OnClick(View v){
    ItemAdapter adapter = (ItemAdapter)this.itemListView.getAdapter();
    //Clearing the ListView
    if(adapter != null) {
        this.itemListView.setAdapter(null);
    }
    //Fetch the AplicationName
    String username = this.editTextUsername.getText().toString();
    String appName = RESTClient.connect("ip/DevTest/WcfApi/Api1.svc/api1/appName", username);

    try {
        appName = (String)ProcessJson.ProcessResult(MessageType.GetAppName, appName);
        appNameTextView.setText("Logged in as: " + appName);
    } catch (MalformedJsonException e) {
        e.printStackTrace();
        appNameTextView.setText("Cannot Login");
    }
    catch (JsonSyntaxException e){
        e.printStackTrace();
        appNameTextView.setText("Cannot Login");
    }

    //Fetch the itemList
    String itemList = RESTClient.connect("ip/DevTest/WcfApi/Api1.svc/api1/items", username);
    try{
        Item[] items = (Item[])ProcessJson.ProcessResult(MessageType.GetItemsList, itemList);
        //Binding itemList to UI
        //ItemAdapter itemAdapter = new ItemAdapter(this, R.layout.item_row, items);
        //this.itemListView.setAdapter(itemAdapter);

    } catch (MalformedJsonException e) {
        e.printStackTrace();
        appNameTextView.setText("Cannot Login");
    }
    catch (JsonSyntaxException e){
        e.printStackTrace();
        appNameTextView.setText("Cannot Login");
    }
} 
```

当我将两个 try/catch 块作为注释时，我设法避免了崩溃。这就是让我相信问题出在 ProcessJson 类的原因。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-01T13:57:06.903

试试[这个](https://github.com/aectann/android-verify-error-example)解决方法，它可能会解决你的问题。

# javascript - 使用 JQuery 进行弹出窗口/对话框的最佳方式？

> ID：11047584
> 
> 赞同：1
> 
> 时间：2012-06-15T09:01:35.380
> 
> 标签：javascript, jquery, html, css

我之前做了一些弹出窗口/对话框，现在我在 () 中有回归错误，并且想要重新编码以使用 JQuery 来处理 DIV/弹出窗口/对话框。迁移到 Jquery 将是一个优势，因为我们可以为对话框/弹出窗口启用重新定位和调整大小，如果弹出窗口只是一个将自身置于其他元素之上的 DIV，我们将无法做到这一点。

现在我想知道使弹出窗口/对话框/ DIV 出现在 JQuery 中的“最佳”方式是什么？我宁愿不添加插件，只包含基本的 JQuery 文件。你能告诉我怎么做吗？

当前页面制作类似于弹出窗口的内容，但不可重新定位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:17:50.333

我这样做的方法是创建一个`.popup`包含弹出窗口基本布局功能的类。然后将此类添加到`<div>`页面顶部的隐藏中。

然后，当需要弹出窗口时，将 jQuery 的`draggable`和`resizable`属性附加到它。之后，使用弹出内容`.get()`专用页面的请求加载弹出内容，然后加载`.show()`。

**例子**

CSS

```
.popup 
{
    display:none;
    position:absolute;
    // some other nice styling features
} 
```

HTML

```
<body>
<div class='popup'></div>
...
page content
...
</body> 
```

Javascript

```
function popup(){
    // for the draggable you may want to specify the drag handle like only the title of the popup
    var popup = $('.popup');

    popup.draggable();
    popup.resizable();

    $.get('/getPopup.php?action=theKindOfPopupRequested', function(data) {        
        popup.html(data);
        popup.show('fast');
    });
} 
```

资料来源：

[http://jqueryui.com/demos/resizable/](http://jqueryui.com/demos/resizable/)

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:18:23.750

这是一个基本的对话框插件：

[http://jsfiddle.net/pjUUQ/](http://jsfiddle.net/pjUUQ/)

```
(function($) {
    var dialogHTML = '<div class="dialog"></div>';

    $.openDialog = function(opts) {
        // Create the DIV for dialog without inserting into DO
        var dialog = $(dialogHTML);
        dialog.appendTo('body');

        // Give dialog some basic CSS
        dialog.css({
            position: 'absolute', // positioned
            'z-index': Math.pow(2,32) // make it sit on top
        });

        // Position the dialog on the screen
        var horizOffset = ($(window).width() - opts.width || dialog.outerWidht()) / 2;
        var vertOffset = ($(window).height() - opts.height || dialog.outerHeight()) / 2;
        dialog.css({
            left: horizOffset,
            right: horizOffset,
            top: vertOffset,
            bottom: vertOffset
        });

        // Return dialog object to make it chainable
        return dialog;            
    };        

}(jQuery));

$.openDialog({width: 200, height: 100}).append('hello world');
​ 
```

您当然可以添加很多内容，例如处理要在 Esc 上关闭的关键事件，添加带有按钮的标题栏。但是你可能已经知道如何做这些事情了。

创建对话框时需要注意的几点：

*   设置足够高的 z-index 以使对话框始终位于顶部
*   将对话框元素附加到`BODY`

根据我的经验，如果对话框 HTML 并不总是出现在页面上，性能会更好一些。这与优雅降级背道而驰，但 DOM 树越轻，应用程序似乎运行得越快。所以最好根据需要将对话框元素添加到树中。

**编辑：**请注意，我的对话框插件不希望您在页面上有预定义的 HTML。它只是让人联想到一个div。因此，您无需选择元素并将其*转换*为对话框。相反，您重新创建一个。

# php - jQuery.ajax - 将数据发布回同一页面后重复内容

> ID：11047585
> 
> 赞同：0
> 
> 时间：2012-06-15T09:01:36.403
> 
> 标签：php, javascript, jquery

**问题 1：**在我使用`jQuery.ajax()`. 我将数据发布回同一页面的原因是因为我需要将我的 JavaScript 值传递给 PHP 端。

**问题：**如何编辑我的代码，以便在将数据发布到同一页面之前和之后，我的内容只有 1 个副本？

* * *

**问题 2：**您可能已经注意到`$("#test").html(data);`我的宾果功能和`<span id="test"></span>`我的身体中有一个。如果不是将 Javascript 值传递到 PHP 端，我似乎无法删除它们，如我的`print_r()`.

**问题：**有什么方法可以删除它们，但仍然使用 将我的值从 JavaScript 传递到 PHP `jQuery.ajax()`？

* * *

**宾果游戏.php**

```
<html>
    <head>
            <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
            <?php
            if (!isset($_POST['varA']) && !isset($_POST['varB']))
            {
            ?>
                <script type="text/javascript">
                $(document).ready(bingo);

                function bingo()
                {
                    jQuery.ajax({
                        type: "POST",
                        data:  {varA: "123", varB: "456"},
                        success: function(data)
                        {
                            alert("POST to self is successful!");
                            $("#test").html(data);
                        }
                    });
                }
                </script>
                <?php
            }
            else
            {
                print_r($_POST['varA']);
                echo " - ";
                print_r($_POST['varB']);
            }
            ?>
    </head>
    <body>
        <input type="text" value="meow"/>
        <span id="test"></span>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:24:46.500

天哪，太乱了！无论如何尝试以下代码：

```
<?php 
if (isset($_POST['varA']) && isset($_POST['varB'])) {
    print_r($_POST['varA']);
    echo " - ";
    print_r($_POST['varB']);
} else {
?>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(bingo);

            function bingo()
            {
                jQuery.ajax({
                    type: "POST",
                    data:  {varA: "123", varB: "456", ajax: true},
                    success: function(data)
                    {
                        alert("POST to self is successful!");
                        $("#test").html(data);
                    }
                });
            }
        </script>
    </head>
    <body>
        <input type="text" value="meow"/>
        <span id="test"></span>
    </body>
</html>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:48:50.177

如果你想保持你`!`的条件，你也可以反过来做。

```
<?php 
if (!isset($_POST['varA']) && !isset($_POST['varB'])) {
?>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(bingo);

            function bingo()
            {
                jQuery.ajax({
                    type: "POST",
                    data:  {varA: "123", varB: "456"},
                    success: function(data)
                    {
                        alert("POST to self is successful!");
                        $("#test").html(data);
                    }
                });
            }
        </script>
    </head>
    <body>
        <input type="text" value="meow"/>
        <span id="test"></span>
    </body>
</html>
<?php
}
else {
    print_r($_POST['varA']);
    echo " - ";
    print_r($_POST['varB']);
}
?> 
```

# jquery - 通过 jquery 或 prototype.js 从 iframe 中删除内容？

> ID：11047586
> 
> 赞同：0
> 
> 时间：2012-06-15T09:01:37.013
> 
> 标签：jquery, prototypejs

我想通过单击链接在 ifrmae 中打开一个 url。我正在使用以下代码。

```
//Prototype Js code 
Event.observe(window,'load',function(){ 
    $('button').observe('click', function()  {
         $('login-slide').update('<iframe src="domian" />');    
         $('test').remove();
 ); 
```

但我只想展示 IFRAME 的一部分。我知道，通过删除功能，我可以删除内容。但它在 iframe 中不起作用。请指导我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:40:18.153

您没有正确关闭这些功能。只有当 IFRAME 内容位于同一个域中时，您才能修改它。

```
Event.observe(window,'load',function(){ 
    $('button').observe('click', function()  {
         $('login-slide').update('<iframe src="domian" />');    
         $('test').remove();
    });
}); 
```

# html - 带有em而不是px的文本阴影？

> ID：11047589
> 
> 赞同：3
> 
> 时间：2012-06-15T09:01:52.353
> 
> 标签：html, css

我有一个简单的

```
text-shadow: 0.05em 0.05em 0.05em black; 
```

我用谷歌浏览器打开，一点影子都没有！我把它改成

```
text-shadow: 1px 1px 1px black; 
```

它有效！有什么事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:06:30.363

`0.05em`值太小，您的阴影落在文本后面。尝试增加一点 - [http://jsfiddle.net/zd4qF/](http://jsfiddle.net/zd4qF/)

**更新**

您的代码`.05em`实际上可以在 FF 中使用，但不能在 Chrome 中使用。这是因为浏览器中的舍入逻辑 - FF 舍入小于`1px`to的任何东西`1px`，Chrome 将其舍入到`0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:07:26.717

如果您查看下面的链接，您可以看到**em**和**像素**之间的转换率 因为您要求的 0.05em 远小于 1px :)

[http://pxtoem.com/](http://pxtoem.com/)

例如。

**1px**应该在**0.063em**左右，这使得**0.05 em**小于**1px**，因此小于您可以显示的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:06:20.130

它不可见，因为值太低。`em`与字体大小成正比。字体越小，根据使用的字体声明的所有内容就越小`em`。

这是一个具有不同字体大小的示例。在这个例子中，当字体大小为 48pt 时可以看到 0.5em，但当它是 2 12 pt 时则看不到。见[http://jsfiddle.net/JwNbj/1/](http://jsfiddle.net/JwNbj/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:13:58.947

EM 是一个相对属性，取决于您在 body 元素中定义的字体大小，或者当您定义它时也是相对的，那么它取决于用户浏览器选项中定义的选项。当您的字体大小为 20px 时，1px 将为 0,05em。打招呼。

# java - Weblogic：Web Service Authentication by Username Token with Digest Password

> ID：11047590
> 
> 赞同：3
> 
> 时间：2012-06-15T09:01:52.267
> 
> 标签：java, authentication, weblogic

我正在尝试实现一个简单的 Web 服务，部署在 weblogic 上，通过用户名令牌和密码摘要进行身份验证。有很多使用明文的代码示例，但我找不到任何使用摘要密码的示例。

我试过使用这个网络服务：

```
@WebService
@Policies({ @Policy( uri = "../policy/usernametoken.xml" ) } )
public class Hello{

    public String sayHello(String name){
        return "Hello : " + name;
    }
} 
```

，使用此 WS 策略文件 usernametoken.xml：

```
<wsp:Policy
    xmlns:wsp="http://www.w3.org/ns/ws-policy"
    xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" >
    <sp:SupportingTokens>
        <wsp:Policy>
            <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/wssecuritypolicy/200702/IncludeToken/AlwaysToRecipient">
                <wsp:Policy>
                    <sp:WssUsernameToken10/>
                     <sp:HashPassword />
                </wsp:Policy>
            </sp:UsernameToken>
        </wsp:Policy>
    </sp:SupportingTokens>
</wsp:Policy> 
```

，和这个客户：

```
public static void main(String[] args)
{
    HelloService service = new HelloService();
    Hello port = service.getHelloPort();

    List<CredentialProvider> credProviders = new ArrayList<CredentialProvider>();
    String username = "weblogic";
    String password = "web1ogiC";

    CredentialProvider cp = new ClientUNTCredentialProvider(username.getBytes(), password.getBytes());
    credProviders.add(cp);

    Map<String, Object> rc = ((BindingProvider)port).getRequestContext();
    rc.put(WSSecurityContext.CREDENTIAL_PROVIDER_LIST, credProviders);
    String result = port.sayHello("xxx1");

    System.out.println("*************** RESULT from WebService ***************");
    System.out.println(result);
    System.out.println("******************************************************");
} 
```

，但它不起作用。

还尝试通过带有摘要密码的 SOAPUI 工具调用，但它也无法正常工作。

任何人都可以通过提供一个工作示例或修复我的示例来帮助我吗？

编辑：我使用 weblogic 12c

# bug-reporting - 收集的 memcachec 插件坏了？

> ID：11047593
> 
> 赞同：0
> 
> 时间：2012-06-15T09:01:56.220
> 
> 标签：bug-reporting, collectd

我正在尝试使用该`memcachec`插件从 memcached 中读取数据，但是当我使用此配置时：

```
<Plugin "memcachec">
  <Page "plugin_instance">
    Key "KEY1"
    Server "localhost"
    ...
  </Page>
</Plugin> 
```

我得到了`memcachec plugin: Option 'server' not allowed here.`，如果我删除我得到的服务器选项`memcachec plugin: 'Server' missing in 'Page' block.`。我检查了 memcachec 的来源并且有这个代码（memcachec.c，第 329 行）：

```
if (strcasecmp ("Server", child->key) == 0)
  status = cmc_config_add_string ("Server", &page->server, child);
if (strcasecmp ("Key", child->key) == 0)
  status = cmc_config_add_string ("Key", &page->key, child);
else if (strcasecmp ("Match", child->key) == 0)
  /* Be liberal with failing matches => don't set `status'. */
  cmc_config_add_match (page, child);
else
{
  WARNING ("memcachec plugin: Option `%s' not allowed here.", child->key);
  status = -1;
} 
```

似乎第二个`if`应该是`else if`插件工作。这是一个错误吗？我在哪里报告？在官方修复到来之前，在本地修复它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:49:54.630

我猜你很久以前就得到了答案，但似乎这个问题已经解决了。报告错误最好使用邮件列表（请参阅标签信息）或在 github 上打开问题（[https://github.com/collectd/collectd](https://github.com/collectd/collectd)）。

# c# - C#检查datagridview列是否为空

> ID：11047596
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:02:11.823
> 
> 标签：c#, datagridview

我想检查我在 datagridview 中的“多”列是否为空。

这是我的代码

```
 for (int i = 0; i < (gridx.Rows.Count - 1); i++)
        {
            col = gridx.Rows[i].Cells["code"].Value.ToString();
            col4 = gridx.Rows[i].Cells["many"].Value.ToString();                
        }

        if (col4 == "")
        {
            MessageBox.Show("Many is empty");
            this.Focus();
            return;
        } 
        else
        {
          //my code in here
        } 
```

但它不显示错误“很多是空的”

请帮助我..并在此之前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:13:11.507

由于您`col4`在 for 循环中分配了最后一个单元格值，因此您可以检查它是否为空。

```
for (int i = 0; i < (gridx.Rows.Count - 1); i++)
        {
            col = gridx.Rows[i].Cells["code"].Value.ToString();
            if(gridxRows[i].Cells["many"].Value == null ||       
               gridxRows[i].Cells["many"].Value == string.Empty)
             {
                col4 = gridx.Rows[i].Cells["many"].Value.ToString();
             }
         } 
```

您当前的代码只会检查最后一行是否`cell["many"]`为空。如果您想确保所有列都是空的，那么您可以尝试以下方法。

```
bool isColumnEmpty = true;
for (int i = 0; i < (gridx.Rows.Count - 1); i++)
        {
            col = gridx.Rows[i].Cells["code"].Value.ToString();
            if(gridxRows[i].Cells["many"].Value == null ||       
               gridxRows[i].Cells["many"].Value == string.Empty)
             {
                col4 = gridx.Rows[i].Cells["many"].Value.ToString();
                isColumnEmpty = false; // that means some thing is found against cell
             }
         } 
```

现在检查是否设置了 isColumnEmpty 标志；

```
if(isCoulmnEmpty)
{
            MessageBox.Show("Many is empty");
            this.Focus();
            return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:05:52.580

试试这个。

```
if(gridx.Rows[i].Cells["code"].Value == null)
{
// do something here...
} 
```

问候， 莎米拉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:09:05.720

如果您使用`databinding`to populate `datagrid`，我建议您“询问”有关您搜索的值（或者更好地不存在这些值）的数据。

如果您在 UI 上搜索，在*这种*情况下，根据您的帖子，如果永远不会运行，我会看到 2 个选项：

*   或者**有**一些价值，所以它不是空的
*   或值不是`""`（空字符串），而是`null`. 要检查这一点，这样写就足够了：

`if (col4 == null)`

只是建议：使用强大的调试工具，`Visual Studio`并会在几分钟内自己找出答案。

祝你好运。

# objective-c - RestKit：嵌套数据但没有关系

> ID：11047600
> 
> 赞同：0
> 
> 时间：2012-06-15T09:02:53.180
> 
> 标签：objective-c, ios, restkit

我正在尝试使用 RestKit 解析 GitHub API，特别是存储库的提交。
您可以在[他们的文档](http://developer.github.com/v3/repos/commits/)中看到嵌套属性，例如“提交”哈希。但是，属性是主要对象的一部分，我不想为此添加新模型和关系。

如何在此处向提交消息添加映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:28:42.920

这取决于您尝试获取的核心数据模型的类型，但据我了解，也许您可​​以展平 API 资源并将其设置`message`为对象的直接属性`commit`。

像这样的东西：

```
[commitMapping mapKeyPath:@"commit.message" toAttribute:@"commitMessage"]; 
```

# php - 使用 PHP 中的浮点数将 div 彼此相邻对齐

> ID：11047601
> 
> 赞同：0
> 
> 时间：2012-06-15T09:03:00.803
> 
> 标签：php, css-tables

**问题：**

我正在尝试使用彼此对齐 div，`float:left`但我无法让它工作。相反，它们彼此对齐。

**PHP代码：**

```
while ($row = mysql_fetch_assoc($result))
{
    $kriterium .= '<div style="float:left;">'.$i.'</div>';
    $betyg .= '<div style="float:left;">'.$row['RID'].'</div>';

    $mean += $row['RID'];

    $i++;
}

$meanvalue = round ($mean / ($i-1), 2);

$kriterium .= '<div style="float:left;"><b>Medelv&auml;rde</b></div>';
$betyg .= '<div style="float:left;"><b>'.$meanvalue.'</b></div>';

$html .= '
    <div class="table table-condensed table-bordered neutralize">
        <div>
            <b>Kriterium</b>'.$kriterium.'
        </div>
        <div>
            <b>Betyg</b>'.$betyg.'
        </div>
    </div>'; 
```

**期望的输出：**

![在此处输入图像描述](../Images/961c505d9327ed5db3774ac921058ddb.png)

**问题：**

需要修改的 CSS 代码有什么问题，以便 div 像彼此相邻的列一样对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:17:30.590

您需要为每个 div 设置一个宽度。第一个 div 的宽度将比其他 div 的宽度宽。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Kexx</title>
    <style type='text/css'>
    div.table-bordered > div  {
      width:420px;
    }
    div.table-bordered > div > div.c {
      width:94px;
    }
    div.table-bordered > div > div {
      float:left;
      width:24px;
    }
    div.table-bordered div {
      border:1px solid #333;
    }
    </style>
  </head>
  <body>
    <div class="table table-condensed table-bordered neutralize">
      <div>
        <div class='c'><b>Kriterium</b></div>
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <br style='clear:both;'/>
      </div>

      <div>
        <div class='c'> <b>Betyg</b></div>
        <div>A</div>
        <div>B</div>
        <div>C</div>
        <div>D</div>
        <br style='clear:both;'/>
      </div>
    </div>

  </body>
</html> 
```

[http://jsfiddle.net/Zv7Dp/](http://jsfiddle.net/Zv7Dp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:13:00.523

尝试将位置指定为相对，顺便说一句，如果你有一个单独的样式表，你可以定义一个类并将所有样式放在一个类下，无论如何我仍然更喜欢 html 表而不是这个，你可以找到尽可能多的 css 表样式通过谷歌搜索！

# overlay - gentoo不能使用覆盖

> ID：11047602
> 
> 赞同：0
> 
> 时间：2012-06-15T09:03:03.843
> 
> 标签：overlay, gentoo

我的操作系统是gentoo

我想从 lcd-filtering 覆盖更新 x11-libs/cairo，所以

```
#layman --version
1.4.1
#layman -a lcd-filtering 
```

接着

```
#echo 'source "/var/lib/layman/make.conf"' >> /etc/make.conf
#layman -l
* lcd-filtering    [Git       ] (git://gitorious.org/lcd-filtering/lcd-filtering.git 
```

现在我重新安装开罗

```
# emerge -pv x11-libs/cairo
[ebuild   R    ] x11-libs/cairo-1.10.2-r2  USE="X glib opengl svg xcb (-aqua) -debug -directfb -doc (-drm) (-gallium) (-openvg) (-qt4) -static-libs" 0 kB
Total: 1 package (1 reinstall), Size of downloads: 0 kB 
```

它不是从 lcd-filtering 覆盖安装的，我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:33:47.750

在这种情况下，我会尝试通过emerge -S 或运行eix-update（如果您安装了它）来找出提到的关键字，然后用eix 进行检查（无论如何这都很方便）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:58:53.827

我的猜测是，您正在使用稳定的 ACCEPT_KEYWORDS（即 amd64，而不是 ~amd64）运行 Gentoo。覆盖版本未标记为稳定。1.10.2-r2 是 Portage 树中最新的稳定版本。您不能专门强制覆盖优先，因此您有两个选择...

*   更改覆盖版本中的 KEYWORDS 以使其稳定。
*   将“x11-libs/cairo ~amd64”添加到 /etc/portage/package.keywords 并将“>=x11-libs/cairo-1.11”添加到 /etc/portage/package.mask。

# php - 根据数据库中的数据自动调整文本框的大小

> ID：11047603
> 
> 赞同：0
> 
> 时间：2012-06-15T09:03:12.337
> 
> 标签：php, mysql, html

我正在从 mysql 数据库中获取数据并从那些获取数据中获取数据——4 个字段

在文本框中。所以我想根据数据库中存在的总记录调整行的大小。我用过这段代码----

```
 <tr  bgcolor="#DFEFFF">

<td align="left" style="vertical-align:top;"><h3>Description</h3></td>

 <td align="left"><textarea name="feature" id="features" rows="5" cols="74" 

disabled style="background-color:#DFEFFF; border:none; color:#000; font-

family:Arial, Helvetica, sans-serif; font-size:14px;"><?php echo $results['des'];?

></textarea></td>

 </tr> 
```

如果我在 rows = "auto" 中使用 auto ，那么它甚至无法正常工作。请帮助文本区域中的自动显示。

我希望如果管理员使用复制粘贴方法插入数据而不是在前端，textarea 将自动调整大小并包含数据库中存在的所有数据。

我仍在寻找这个答案。请回复..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:11:30.977

更好的解决方案应该是根本不用担心服务器上的问题。

使用 javascript 根据 textarea 中的数据设置 textarea 的大小。

你可能喜欢这个 jquery 插件来[自动调整大小](http://www.jacklmoore.com/autosize)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:06:22.923

也许是这样的：

```
<textarea name="feature" rows="<?php echo $numRows; ?>" ...> 
```

首先`$numRows`根据您使用的数据库扩展名进行设置。

例如

`$numRows = $stmt->rowCount()`对于[PDO](http://php.net/manual/en/pdostatement.rowcount.php)。

或者：

`$result->num_row`对于[MySQLi](http://php.net/manual/en/mysqli-result.num-rows.php)。

# android - 如何在android库中支持本地化

> ID：11047604
> 
> 赞同：4
> 
> 时间：2012-06-15T09:03:14.843
> 
> 标签：android

我想构建一个 android 库（jar 文件）。jar 文件需要本地化。就像我有一堂课：

```
class MyMessageService
{
    //Needs to return different languages message according to locale
    String getMessage1(); 
} 
```

我试图打包`res/values/string.xml`并`R.class`放在罐子里。

但是在我引用 jar 的主应用程序中，我调用

```
 String s = this.getResources().getString(mylibrary.localize.R.string.hello); 
```

我得到了来自我的主要项目的“s”（资源 id 冲突）。

有没有办法创建一个支持本地化的android库？我不能让主应用程序导入我的图书馆资源，因为我的图书馆应该单独发货。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:32:43.227

你在 Android 上做 lib 的方式是错误的。我也遇到了像你一样在不同项目之间重用 UI 组件的问题只需给 Android Library Project 一个尝试（lib.jar.path 为包示例），构建 lib proj，现在你得到生成 R 类，将 lib proj 引用到您的应用程序 proj（在项目属性 Android 选项卡中），然后使用 lib.jar.path.R 查找您的字符串或其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T09:34:34.133

不幸的是，这不能用 jar 以标准方式完成。但是您可以自己实现本地化 - 当前用户区域设置可以通过 Locale.getDefault() 检索。之后，您可以构建一个开关并返回对应于语言环境字符串（它可以简单地保存在代码中或某些外部文件中）。

# git - Git 可以合并“使用” git blame -C 找到的信息吗

> ID：11047605
> 
> 赞同：5
> 
> 时间：2012-06-15T09:03:15.403
> 
> 标签：git, branching-and-merging, git-merge

读完这篇文章后，我想到了这个问题：[Git 真的可以跟踪单个函数从一个文件到另一个文件的移动吗？如果是这样，怎么做？](https://stackoverflow.com/questions/4908336/can-git-really-track-the-movement-of-a-single-function-from-1-file-to-another-i)

这是工作流程：

“很久以前”，我们将一个大文件拆分为`folder/file.py`多个文件 : `folder1/file.py`，`folder2/file.py`依此类推。

`git blame -C`当我们查看时正确地显示了该代码的历史记录`folder2/file.py`，我们看到一些提交是在此拆分之前进行的。

问题是我们继续维护仍然存在的旧版本代码，`folder/file.py`当我们将修复合并回“当前”版本时，git 不断重新创建文件夹`folder`，并且没有看到`folder/file.py`应该合并到的修复`folder1/file.py`或者`folder2/file.py`取决于这段代码现在所在的位置。

我快速查看，`git help merge`但没有找到任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:32:29.697

合并不能利用`git blame -C`，但`git merge`确实有重命名检测。从手册页：

```
 rename-threshold=<n>
   Controls the similarity threshold used for rename detection. See also git-diff(1) -M. 
```

Git 的重命名阈值可能太高而无法在合并期间检测到您的重命名。检测也可能[计算量太大。](http://thread.gmane.org/gmane.comp.version-control.git/195197/focus=195292)尝试使用较低的重命名阈值（例如 75）进行测试合并：

```
git merge -X rename-threshold=75 <branch> 
```

您可能需要玩一会儿才能找到正确的数字，如果 git 因为计算难度太大而退出，请尝试设置`git config merge.renamelimit 0`上面链接的线程中讨论的值。

[如果上述方法失败，这个答案也可能会有所帮助。](https://stackoverflow.com/a/5487775/877115)我没有尝试`-X ignore-space-change`或链接脚本，但它可能值得调查。

# jsf - java.lang.LinkageError：加载程序约束冲突：解析接口方法时 javax.servlet.jsp.JspApplicationContext.getExpressionFactory()

> ID：11047607
> 
> 赞同：0
> 
> 时间：2012-06-15T09:03:24.567
> 
> 标签：jsf, el

我正在尝试将 JSF 连接到数据库。

这是文件

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
     <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
id="WebApp_ID" version="2.5">

     <display-name>JavaServerFaces</display-name>

    <resource-ref>
 <description>MySQL Datasource example</description>
<res-ref-name>jdbc/mkyongdb</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
   </resource-ref>

   <!-- Change to "Production" when you are ready to deploy -->
   <context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
  </context-param>

  <!-- Welcome page -->
 <welcome-file-list>
  <welcome-file>default.xhtml</welcome-file>
 </welcome-file-list>

   <!-- JSF mapping -->
 <servlet>
 <servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
<load-on-startup>1</load-on-startup>
 </servlet>

 <!-- Map these files with JSF -->
 <servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.jsf</url-pattern>
</servlet-mapping>
 <servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

上下文.xml

```
 <Context>

    <Resource name="jdbc/mkyongdb" auth="Container" type="javax.sql.DataSource"
           maxActive="100" maxIdle="30" maxWait="10000"
           username="root" password="root" driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/mkyongdb"/>

   </Context> 
```

默认.xhtml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  >
<h:head>
    <h:outputStylesheet library="css" name="table-style.css"  />
</h:head>

<h:body>

    <h1>JSF 2.0 + JDBC Example</h1>

    <h:dataTable value="#{customer.getCustomerList()}" var="c"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"
        >

        <h:column>
            <f:facet name="header">
                Customer ID
            </f:facet>
                #{c.customerID}
        </h:column>

        <h:column>
            <f:facet name="header">
                Name
            </f:facet>
                #{c.name}
        </h:column>

        <h:column>
            <f:facet name="header">
                Address
            </f:facet>
                #{c.address}
        </h:column>

        <h:column>
            <f:facet name="header">
                Created Date
            </f:facet>
                #{c.created_date}
        </h:column>

    </h:dataTable>

    </h:body>

  </html> 
```

CustomerBean.java

```
 package com.mkyong;

   import java.io.Serializable;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
   import java.sql.ResultSet;
   import java.sql.SQLException;
   import java.util.ArrayList;
   import java.util.List;

  import javax.annotation.Resource;
  import javax.faces.bean.ManagedBean;
  import javax.faces.bean.SessionScoped;
  import javax.naming.Context;
  import javax.naming.InitialContext;
  import javax.naming.NamingException;
  import javax.sql.DataSource;

  import com.mkyong.customer.model.Customer;

  @ManagedBean(name="customer")
  @SessionScoped
  public class CustomerBean implements Serializable{

//resource injection
@Resource(name="jdbc/mkyongdb")
private DataSource ds;

//if resource inject is not support, you still can get it manually.
/*public CustomerBean(){
    try {
        Context ctx = new InitialContext();
        ds = (DataSource)ctx.lookup("java:comp/env/jdbc/mkyongdb");
    } catch (NamingException e) {
        e.printStackTrace();
    }

}*/

//connect to DB and get customer list
public List<Customer> getCustomerList() throws SQLException{

    if(ds==null)
        throw new SQLException("Can't get data source");

    //get database connection
    Connection con = ds.getConnection();

    if(con==null)
        throw new SQLException("Can't get database connection");

    PreparedStatement ps 
        = con.prepareStatement(
            "select customer_id, name, address, created_date from customer"); 

    //get customer data from database
    ResultSet result =  ps.executeQuery();

    List<Customer> list = new ArrayList<Customer>();

    while(result.next()){
        Customer cust = new Customer();

        cust.setCustomerID(result.getLong("customer_id"));
        cust.setName(result.getString("name"));
        cust.setAddress(result.getString("address"));
        cust.setCreated_date(result.getDate("created_date"));

        //store all data into a List
        list.add(cust);
    }

    return list;
}
    } 
```

客户.java

```
 package com.mkyong.customer.model;

     import java.util.Date;

      public class Customer{

public long customerID;
public String name;
public String address;
public Date created_date;

public long getCustomerID() {
    return customerID;
}
public void setCustomerID(long customerID) {
    this.customerID = customerID;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public Date getCreated_date() {
    return created_date;
}
public void setCreated_date(Date created_date) {
    this.created_date = created_date;
}
   } 
```

pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/maven-v4_0_0.xsd">

 <modelVersion>4.0.0</modelVersion>
 <groupId>com.mkyong.common</groupId>
 <artifactId>JavaServerFaces</artifactId>
  <packaging>war</packaging>
   <version>1.0-SNAPSHOT</version>
  <name>JavaServerFaces Maven Webapp</name>
  <url>http://maven.apache.org</url>

  <repositories>
<repository>
   <id>java.net.m2</id>
   <name>java.net m2 repo</name>
   <url>http://download.java.net/maven/2</url>
 </repository>
 </repositories>

   <dependencies>

<!-- MySQL database driver -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.9</version>
</dependency>

<!-- Spring framework --> 
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring</artifactId>
    <version>2.5.6</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>2.5.6</version>
</dependency>

<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.0.0-b13</version>
</dependency>

<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.0.0-b13</version>
</dependency>

<!-- EL 2.2 to support method parameter in EL -->
    <dependency>
  <groupId>org.glassfish.web</groupId>
  <artifactId>el-impl</artifactId>
  <version>2.2</version>
</dependency>

    <!-- http://repo1.maven.org/maven2/ -->
     <dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency>

     </dependencies>

    <build>
   <finalName>JavaServerFaces</finalName>

    <plugins>
     <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-compiler-plugin</artifactId>
       <version>2.3.1</version>
       <configuration>
           <source>1.6</source>
           <target>1.6</target>
       </configuration>
   </plugin>
   </plugins>
  </build>
 </project> 
```

如果我在 Tomcat7 中运行它，我会收到以下错误

```
 SEVERE: Exception sending context initialized event to listener instance                   of class com.sun.faces.config.ConfigureListener
       java.lang.LinkageError: loader constraint violation: when resolving interface method   "javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/sun/faces/config/ConfigureListener, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type javax/el/ExpressionFactory used in the signature
at com.sun.faces.config.ConfigureListener.registerELResolverAndListenerWithJsp(ConfigureListener.java:636)
at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:226)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)
    Jun 15, 2012 2:31:32 PM org.apache.catalina.core.StandardContext startInternal
  SEVERE: Error listenerStart
    Jun 15, 2012 2:31:32 PM org.apache.catalina.core.StandardContext startInternal
 SEVERE: Context [/JavaServerFaces] startup failed due to previous errors
   Jun 15, 2012 2:31:32 PM org.apache.catalina.loader.WebappClassLoader  clearReferencesJdbc
 SEVERE: The web application [/JavaServerFaces] registered the JDBC driver        [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped.       To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
 Jun 15, 2012 2:31:32 PM org.apache.coyote.AbstractProtocolHandler start
 INFO: Starting ProtocolHandler ["http-bio-8080"]
 Jun 15, 2012 2:31:32 PM org.apache.coyote.AbstractProtocolHandler start
  INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jun 15, 2012 2:31:32 PM org.apache.catalina.startup.Catalina start
 INFO: Server startup in 2341 ms 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:44:25.323

确保 JSF api 和实现 jar 可供容器 (tomcat) 加载。将库放在 WEB-INF/lib 中的 tomcat lib 文件夹中。

# sql-server-2005 - 列出最近 N 天内修改的所有表

> ID：11047612
> 
> 赞同：1
> 
> 时间：2012-06-15T09:03:57.953
> 
> 标签：sql-server-2005

如何获取最近*N*天修改的所有表的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:10:23.233

如果这是针对数据的，您可以使用如下查询：

```
exec sp_MSforeachtable 'SELECT OBJECT_NAME(OBJECT_ID) AS DatabaseName, last_user_update,*
FROM sys.dm_db_index_usage_stats
WHERE database_id = DB_ID(''<yourDataBaseNameHere>'')
AND OBJECT_ID=OBJECT_ID(''?'')' 
```

并过滤您感兴趣的日期范围的结果。请参阅 latt_user_updates 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:12:03.323

你也可以参考这个答案：

[http://blog.sqlauthority.com/2009/05/09/sql-server-find-last-date-time-updated-for-any-table/](http://blog.sqlauthority.com/2009/05/09/sql-server-find-last-date-time-updated-for-any-table/)

# python - 如何模块化 URL 处理函数？

> ID：11047613
> 
> 赞同：0
> 
> 时间：2012-06-15T09:04:12.253
> 
> 标签：python, python-2.7, flask, pyramid, webapp2

有了Flask、webapp2、Pyramid等Python web应用框架，每个route-handling-function怎么能有自己的py文件呢？我不希望所有这些函数都堆积在一个文件结构中。我该怎么做才能在 Flask、webapp2 和 Pyramid 中完成这项工作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:19:07.307

在烧瓶和金字塔（不知道 webapp2，但可能相同）中，路由处理函数（我们称它们为视图）只不过是函数，它们注册到应用程序注册表。

* * *

在烧瓶中，您可以将视图放在任何地方，只要您注册它：

应用程序.py：

```
from flask import Flask
app = Flask(__name__) 
```

视图.py：

```
from app import app
@app.route("/")
def hello():
    return "Hello World!" 
```

主.py：

```
from app import app
if __name__ == "__main__":
    app.run() 
```

* * *

金字塔也是一样。我不会详细介绍。注册过程不同，但思路是一样的。但它在任何地方，只要你注册它。有两种注册视图的方法：

*   using `add_view`：第一个参数是函数的虚线路径。把它放在任何地方，把正确的路径放在这里。
*   使用`scan`：第一个参数是一个经过扫描以查找视图的包。只要确保您的所有视图都在包及其子包中，一切都会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:15:59.803

如果 Python 需要特定位置的函数，那么您可以自己从其他文件中导入它们。

例如，如果 Web 框架从以下位置导入函数`code.py`：

```
def a():
    pass

def b():
    pass

def c():
    pass 
```

然后您可以`code.py`通过从其他地方导入函数来替换以下内容：

```
from mycode.somewhere import a, b
from mycode.some.other.place import c 
```

就 web 框架而言，您仍然`code.py`包含 function `a`，但是您的代码当然可以以不同的方式组织。`b``c`

# css - CSS：为什么要定义很长的 % 值？

> ID：11047617
> 
> 赞同：1
> 
> 时间：2012-06-15T09:04:24.950
> 
> 标签：css

我见过一些设计，其中开发人员定义了非常长的百分比值。我想知道写这么长的值的原因是什么，为什么不四舍五入呢？以及如何计算/转换这些值？

例如（取自 css 文件）：

```
.thumbnail { width: 68.08510638297872%; }
table { font-size: 0.9166666666666667em; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:07:21.947

他们很可能正在使用某种 CSS 模板引擎（如[Sass](http://sass-lang.com/download.html)）从代码生成样式表，并设置基于百分比计算的宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:09:14.767

在书中，`Responsive Web Design`Ethan Marcotte 实际上提倡在计算基于百分比的宽度时将所有数字保留在小数点后，以提供最大的准确性，即使开发人员自己使用计算器计算宽度也是如此。

编辑：我刚刚翻出了这本书的副本，这是 Marcotte 的推理：

> 现在，您可能会想将 0.45833333333333em 舍入到最接近合理的数字，例如，到 0.46em。但不要碰那个删除键！看着它可能会让你的眼睛流血，但 0.458333333333333 在比例方面完美地代表了我们想要的字体大小。更重要的是，浏览器非常擅长四舍五入那些多余的小数位，因为它们在内部将值转换为像素。所以给他们更多的信息，而不是更少，最终会让你获得更好的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T09:15:08.307

大多数客户希望在浏览器中拥有一个像素完美的网站，具有可缩放的字体大小和 Web 内容。开发人员使用了长百分比，以使其与布局完美匹配。

百分比和 em 是可缩放单位，不是像素相关单位，在某些分辨率或字体大小比例下，元素与布局不匹配，您可以使用更多小数位使其精确。

像 Chrome 或 Firefox 这样的新浏览器一次缩放字体和元素，不会发生这个问题，但是像 ie 6-7 这样的旧浏览器没有这个功能，必须用 em 或百分比单位来学习它。

我希望它能帮助你理解这个问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:07:13.717

在我看来，这些数字是通过程序生成的，而不是由人类直接生成的。没有苏格兰人会做这样的事。好吧，没有*真正的*苏格兰人:-)

可能它们来自一个所见即所得的布局编辑器，它不太关心可读性，从不指望任何人去手动编辑输出。

# ruby-on-rails - 在 Rails 应用程序中：错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据

> ID：11047619
> 
> 赞同：3
> 
> 时间：2012-06-15T09:04:35.107
> 
> 标签：ruby-on-rails, redirect, routing

在我的 Rails 应用程序中，我在搞乱路线等。

发生的事情是在我的创建和更新控制器中，我将重定向更改为其他内容，然后在 Chrome 中出现：

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending   
any data. 
```

在我点击刷新后，应用程序照常继续。为什么会这样？

提前致谢。

# forms - opa：贝宝和IPN

> ID：11047620
> 
> 赞同：2
> 
> 时间：2012-06-15T09:04:35.480
> 
> 标签：forms, post, paypal, opa

我想在我的 opa 网站上使用贝宝。为了验证付款，paypal 提出了将隐藏的 POST 表单数据发送到预定义页面的 IPN 机制。

如何使用 opa 获得那些 POST 值？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:36:22.297

你可以使用[HttpRequest.get_body()](http://doc.opalang.org/value/stdlib.core.web.request/HttpRequest/get_body)或[HttpRequest.get_form_data()](http://doc.opalang.org/value/stdlib.core.web.request/HttpRequest/get_form_data)

# python - 使用 os.environ.setdefault 安全吗？

> ID：11047621
> 
> 赞同：28
> 
> 时间：2012-06-15T09:04:36.730
> 
> 标签：python, dictionary, environment-variables, python-os

在我的 ipython shell 中，我在 os.environ 中看到了一个 setdefault 方法，但没有记录。[http://docs.python.org/library/os.html#os.environ](http://docs.python.org/library/os.html#os.environ)。它是否记录在其他地方？

```
def setdefault(self, key, failobj=None):
    if key not in self:
        self[key] = failobj
    return self[key] 
```

我可以使用这个函数或为这些行编写一个包装器吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-15T09:46:37.480

该[`os.environ`文档](http://docs.python.org/library/os.html#os.environ)确实声明它是一个映射：

> 表示字符串环境的映射对象。

因此，它的行为符合标准实现的 python映射文档[。](http://docs.python.org/library/stdtypes.html#mapping-types-dict)`dict`

`os.environ`因此，它的行为就像标准字典一样，它具有所有相同的方法：

```
>>> import os
>>> len(os.environ)
36
>>> 'USER' in os.environ
True
>>> os.environ.fromkeys
<bound method classobj.fromkeys of <class os._Environ at 0x107096ce8>> 
```

该[`.setdefault`方法](http://docs.python.org/library/stdtypes.html#dict.setdefault)与其他映射方法记录在同一页面上，您可以按原样使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:01:41.763

为了澄清——我不得不思考一下这个问题和答案的含义——os.environ 上的 Python.org 文档并没有提及映射类型的所有内置方法（例如 os.environ ，它基本上是一个字典，已经给出了额外的方法）。

相反，他们主要提到了他们为 os 中的对象提供的附加方法，命名为 environ 并从类型 dict 派生，超出了 dict 已经内置的方法。从我的一本关于 Python 的书中，任何字典类型的概要是 dict.setdefault(key, default=None)，解释是它类似于 get() 但如果 key 不在 dict 中，它会设置 dict[key]=default。

这里可能没有很好地选择 default 作为名称，因为它很容易与 somevariablename= defaultvalue 混淆，这是在函数声明中声明默认值的常规方式。也就是说，虽然 default=None 肯定设置了一个默认值，但不清楚 setdefault 在任何意义上本质上是如何设置一个默认值的，因为 default 可以被赋予任何值。

# java-me - Lwuit class not found 错误。请帮我解决它？

> ID：11047622
> 
> 赞同：1
> 
> 时间：2012-06-15T09:04:41.587
> 
> 标签：java-me, lwuit, mobile-application, midp-2.0, cldc

我对“J2ME”的“LWUIT”很陌生。我在我的系统中安装了eclipse pulsar。我还安装了sony ericsson j2me sdk。正常的 j2me 工作正常。

当我在我的 j2me 项目中使用 lwuit 时。然后它将无法正常工作。

我正在我的 Eclipse 脉冲星中创建新项目，即“lwuit2”。

然后我从项目或包资源管理器中选择我的项目，然后右键单击

然后我单击库选项卡，然后单击添加外部 jar 按钮，

然后我选择存储 lwuit.jar 的 lwuit 路径

然后我点击确定。这是成功。

以下是我的源代码

```
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

import com.sun.lwuit.Display;
import com.sun.lwuit.Form;

public class TestMidlet1 extends MIDlet {

    Form frm=null;

    public TestMidlet1() {
        // TODO Auto-generated constructor stub
    }

    protected void destroyApp(boolean arg0) throws MIDletStateChangeException {
        // TODO Auto-generated method stub

    }

    protected void pauseApp() {
        // TODO Auto-generated method stub

    }

    protected void startApp() throws MIDletStateChangeException {
        // TODO Auto-generated method stub

        Display.init(this);
        frm=new Form("Testing lwuit");
        frm.show();

    }
} 
```

当我输入上面的代码时，eclipse pulsar 没有显示任何编译时错误。但是当我运行它时，它会显示错误。我打印屏幕错误窗口并附上它，请参阅下面的附件。

![在此处输入图像描述](../Images/27c9e7ce67ec4cf24758906907e6b50e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T05:42:37.297

Pulsar 不会将 lwuit.jar 导出到 midlet 的 jar 中，除非您明确指示它。在项目的“Java Build Properties”的“Order and Export”选项卡上，选择 lwuit.jar，以便将其作为 midlet 的一部分导出。

# asp.net - Eval if else 语句中的 ASP.NET 控件？

> ID：11047624
> 
> 赞同：2
> 
> 时间：2012-06-15T09:04:50.043
> 
> 标签：asp.net, eval

我想根据 typeId 显示复选框或单选按钮。

```
<%# (Eval("TypeId").ToString() == "1") ? "CheckBox" : "RadioButton"%>
<asp:CheckBox ID="CheckBox" runat="server" Text='<%#Eval("OptionName")%>' />
<asp:RadioButton ID="RadioButton" runat="server" Text='<%#Eval("OptionName")%>' /> 
```

如果 typeId == 1 我想显示我的代码行中的复选框，否则我想显示单选按钮。我怎样才能做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:12:26.243

您可以使用该`Visible`属性：

```
<asp:CheckBox ID="CheckBox" runat="server" 
    Text='<%#Eval("OptionName")%>' 
    Visible='<%# Eval("TypeId").ToString() == "1" %>'
/>
<asp:RadioButton ID="RadioButton" runat="server" 
    Text='<%#Eval("OptionName")%>' 
    Visible='<%# Eval("TypeId").ToString() != "1" %>'
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:10:04.920

向数据源添加两个布尔属性，例如 ShowCheckBox 和 ShowRadioButton

```
public bool ShowCheckBox
{
    get
    {
         return TypeId.ToString() == "1";
    }
} 
```

并使用这些数据绑定到可见属性

```
<asp:CheckBox ID="CheckBox" runat="server" Visible='<%#Eval("ShowCheckBox")%>' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:10:43.657

尝试这个：

```
<asp:CheckBox ID="CheckBox" runat="server" Visible="<%# (Eval("TypeId").ToString() == "1") ? True : False %>" Text='<%#Eval("OptionName")%>' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:15:06.990

在 Repeater.ItemDatabound 事件中，在那里添加适当的控件。

# php - 将 URL 结构插入到小部件存档

> ID：11047631
> 
> 赞同：0
> 
> 时间：2012-06-15T09:05:06.650
> 
> 标签：php, wordpress, url

是否有关于如何将 URL 结构插入小部件存档的解决方案？

现在，URL 结构如下：-http://example.com/2012

我希望它是：-http://example.com/ **sub** /2012

该函数的文档是这样的：[http](http://codex.wordpress.org/Function_Reference/wp_get_archives) ://codex.wordpress.org/Function_Reference/wp_get_archives但没有找到更改 URL 结构的语句。也许有解决办法？

代码如下：

```
function set_widget_archives_type($args) {
    $args = array(
        'type' => 'yearly',
    );
    return $args;
}
add_filter('widget_archives_args','set_widget_archives_type'); 
```

# android - Android 2.3 上的 Twitter 集成效果很好，但在 3.2 上却不行……为什么？

> ID：11047632
> 
> 赞同：0
> 
> 时间：2012-06-15T09:05:09.827
> 
> 标签：android, android-3.0-honeycomb, android-twitter

我将 twitter 集成到我的 android 应用程序中。我使用[了这个](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)很棒的教程和[这个 twitter 集成源。](https://github.com/ddewaele/AndroidTwitterSample)

我从三月份开始开发安卓，所以我不是专业人士或其他什么，但我知道一件事。

如果您为 Android 2.3+ 和 Android 4+ 编写运行良好的代码，那么总会有 Android (3+) 的平板电脑版本 Os 通常会搞砸您的工作。我见过很多这样的情况...

我根据教程制作的 twitter 集成在 Android 2.3 和 4 上运行良好，但在 Android 3.2（Samsung Galaxy Tab）上做了一些错误的事情

这很奇怪，因为问题出在**OAUth 检索请求令牌**上，我不知道为什么......

当然，我在不同的 Android 上运行了相同的代码。在 2.3 上，OAuth 一切正常，推特登录，我可以发推文，从 3.1 开始出现错误，这里是 logcat：

```
06-19 02:15:21.760: W/DefaultRequestDirector(13255): Authentication error: Unable to respond to any of these challenges: {}
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255): Error during OAUth retrieve request token
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255): oauth.signpost.exception.OAuthNotAuthorizedException: Authorization failed (server replied with a 401). This can happen if the consumer key was not correct or the signatures did not match.
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:239)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at com.KeySoft.TwitterIntegration.OAuthRequestTokenTask.doInBackground(OAuthRequestTokenTask.java:70)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at com.KeySoft.TwitterIntegration.OAuthRequestTokenTask.doInBackground(OAuthRequestTokenTask.java:1)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at android.os.AsyncTask$2.call(AsyncTask.java:252)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
06-19 02:15:21.760: E/com.KeySoft.TwitterIntegration.OAuthRequestTokenTask(13255):  at java.lang.Thread.run(Thread.java:1020) 
```

所以请有人向我解释一下，为什么 Android 3+ 总是做与以前和未来版本不同的事情，因为在我看来这是一个身份验证问题，如果我**运行相同的代码，为什么我不能检索请求令牌，打电话具有相同密钥和**所需签名的相同 url-s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:53:59.610

确保在有问题的设备上相应地设置时区和日期...:-)

# ruby - Ruby / Watir-Webdriver - 下载后无法访问文件

> ID：11047633
> 
> 赞同：2
> 
> 时间：2012-06-15T09:05:10.270
> 
> 标签：ruby, watir-webdriver

我正在研究从网站下载文件并将其添加到文件夹的测试场景。对于下载部分，我使用的是 Watir 文档中[浏览器下载页面上描述的代码。](http://watir.github.io/docs/browser-downloads/)当我等待文件下载时，我的测试中遇到了主要问题：

```
 def verify_csv_file_exists
     path = Dir.getwd + "/downloads/"
     until File.exist?("#{path}*.csv") == true
      sleep 1
     end 
    end 
```

运行测试时，上面的过程永远不会停止，因为它看不到目录中的文件，尽管文件已下载。

有谁知道我如何处理这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T11:29:56.223

**您只需在下载文件之前**检查目录内容，然后等到有新文件添加到目录中（通过将当前内容与以前的内容进行比较）。这是获取新文件名的方式：

这应该做的工作：

```
require 'watir-webdriver'

file_name = nil
download_directory = "#{Dir.pwd}/downloads"
download_directory.gsub!("/", "\\") if Selenium::WebDriver::Platform.windows?
downloads_before = Dir.entries download_directory

profile = Selenium::WebDriver::Firefox::Profile.new
profile['browser.download.folderList'] = 2 # custom location
profile['browser.download.dir'] = download_directory
profile['browser.helperApps.neverAsk.saveToDisk'] = "text/csv,application/pdf"

b = Watir::Browser.new :firefox, :profile => profile

b.goto 'https://dl.dropbox.com/u/18859962/hello.csv'

30.times do
  difference = Dir.entries(download_directory) - downloads_before
  if difference.size == 1
    file_name = difference.first 
    break
  end  
  sleep 1
end
raise "Could not locate a new file in the directory '#{download_directory}' within 30 seconds" if not file_name
puts file_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:16:02.190

您不能将“glob”与`File.exists?`like一起使用`File.exists?("*.csv")`。它检查名为的文件是否`*.csv`存在，而不是任何名称以 . 结尾的文件`.csv`。您应该使用确切的文件名来检查文件是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:19:40.683

试试这样：

```
Dir.glob('downloads/*.csv').any? 
```

另外，睡一秒钟应该如何改变什么？这是一个多线程应用程序吗？

# silverlight - 将 Silverlight DataGrid 中的按键事件中继到 TextBox

> ID：11047635
> 
> 赞同：1
> 
> 时间：2012-06-15T09:05:13.347
> 
> 标签：silverlight, c#-4.0, silverlight-5.0

我有一个`DataGrid`控件，`TextBox`上面有一个过滤器。当`DataGrid`焦点集中，并且用户按下除某些特定键（例如箭头键）之外的任何键时，我想将它们中继到过滤文本框，就像用户按下那里的键一样。

`DataGrid`我可以过滤's事件中的特定键`KeyUp`，但我无法在过滤器上中继或以某种方式重复相同的按键`TextBox`。Silverlight 5有什么办法吗？

# javascript - 将 png 覆盖图像放在 textlink 上的鼠标悬停上

> ID：11047640
> 
> 赞同：0
> 
> 时间：2012-06-15T09:05:36.900
> 
> 标签：javascript, html, css, png, overlay

我有一个普通的 jpg-photo 和 2 个文本链接。当用户将鼠标悬停在 textlink 1 上时，我想在 jpg-photo 上显示一张透明的 png-photo，当用户将鼠标悬停在 textlink 2 上时，我想在 jpg 上显示另一张 png-photo。在 mouseout 上，png 应该会再次消失。

可能的？它可以单独使用 CSS 完成还是我需要 javascript 来完成？先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:09:00.490

您可以使用悬停 CSS 选择器来解决此类问题，具体取决于页面的 html 布局

```
#11:hover img {
display:inline:
Add other blocks 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:46:25.513

是的，可以使用 JQuery、JS 或 CSS，具体取决于您的要求。好的脚本在这里：

[http://cssglobe.com/post/1695/easyest-tooltip-and-image-preview-using-jquery](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:31:34.490

您可以使用 jQuery 的强大功能轻松完成您的请求 :) 我使用 jQuery 做了一些东西，您可以在这里找到它
[http://jsfiddle.net/xrmqq/](http://jsfiddle.net/xrmqq/)
它与您想要做的很接近。

# iphone - 更新应用程序时目录更改的可能性吗？

> ID：11047641
> 
> 赞同：2
> 
> 时间：2012-06-15T09:05:37.430
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

最近，将我的应用程序 v1.0 更新为 v1.0.1。
然后我们的一位测试人员说

> '丢失所有保存在应用程序中的图片'（不是照片库）

我发现使用 Xcode 安装 App 并在设备上更新 AppStore 版本会更改 App 的目录，因此会丢失数据。（但不是所有数据。一些文件被复制，在我的情况下是 .db 文件。这真的很奇怪）

前任）

> /var/mobile/Applications/D108B86A-27A8-4665-A490-F1CBB94CE04A/Documents/ /var/mobile/Applications/CCCD0C25-C33E-498F-8D24-9AF243E01A21/Documents/

但这不是正常的过程，可能会导致问题。

正常过程中是否有目录更改的可能性？（从appstore安装然后从appstore更新）

我想尝试“正常过程”，但没有旧版本的设备。所以不能再次在应用商店中出现“更新”按钮:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:03:51.197

我发现更新应用程序会导致目录更改。

所以不应该在数据库或文件中保存“完整路径”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:09:50.973

我遇到了同样的问题：应用程序的临时版本无法升级到应用商店版本。它只是删除临时并安装应用商店。但是在正常更新过程中应用商店-> 应用商店它只替换应用程序包，所以一切都应该可以正常工作。

# c# - 代码合同警告

> ID：11047642
> 
> 赞同：2
> 
> 时间：2012-06-15T09:05:38.933
> 
> 标签：c#, code-contracts

我有一个小的实用程序类：

```
public static class SerializationUtilities
{
    public static string ToXml<T>(T @object)
    {
        Contract.Requires<ArgumentNullException>(@object != null);
        Contract.Requires<ArgumentException>(typeof(T).IsSerializable);
        Contract.Ensures(!string.IsNullOrEmpty(Contract.Result<string>()));

        var xs = new XmlSerializer(typeof(T));
        var result = new StringBuilder();

        using (var sw = new StringWriter(result))
        {
            xs.Serialize(sw, @object);
        }
        return result.ToString();
    }

    public static T FromXml<T>(string xml)
    {
        Contract.Requires<ArgumentNullException>(!string.IsNullOrEmpty(xml));
        Contract.Ensures(!object.Equals(Contract.Result<T>(), default(T)));

        var xs = new XmlSerializer(typeof(T));
        using (var sr = new StringReader(xml))
        {
            return (T)xs.Deserialize(sr);
        }
    }
} 
```

这两种方法都按预期工作。

但是，代码合约静态检查器会抛出两个警告：

> 警告 30 CodeContracts：确保未经证实：!string.IsNullOrEmpty(Contract.Result())
> 
> 警告 28 CodeContracts：确保未经证实：!object.Equals(Contract.Result(), default(T))

为什么会发出这些警告？将我的方法合同化的正确（最佳？）方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:42:26.663

你`Contract.Ensures()`不能这么严格。

大多数框架方法都没有用契约修饰。您不能确定它`StringBuilder.ToString()`不会返回空字符串，因为没有关于`XmlSerializer.Serialize()`将要做什么的信息。反序列化也一样：没有信息可以断言`XmlSerializer.Deserialize()`不会返回`default(T)`对象。

正如@TrustMe-ImADoctor 在评论中指出的那样，您可能必须在代码中为该断言添加额外的检查，然后静态分析将看到该案例已处理且不可能。我想您不需要通过更多检查来污染您的代码，对于这种互操作情况，您可以只使用`Contract.Assume()`.

# php - 如何在我的 Zend_Mail_Transport_Smtp 适配器中使用 Amazon SES 密钥、密钥 + smtp 地址？

> ID：11047645
> 
> 赞同：1
> 
> 时间：2012-06-15T09:05:43.007
> 
> 标签：php, zend-framework, amazon-ec2, zend-mail, amazon-ses

如何在我的中使用 Amazon SES 密钥、密钥 + smtp 地址`Zend_Mail_Transport_Smtp`？它说：`Must issue a STARTTLS command first`在尝试跟随时。

```
 /*
    Reference in C#: http://sesblog.amazon.com/

    String username = "SMTP-USERNAME";  // Replace with your SMTP username.
    String password = "SMTP-PASSWORD";  // Replace with your SMTP password.
    String host = "email-smtp.us-east-1.amazonaws.com";
    int port = 25;

  */
  public static function sendEmail($to, $subject, $body) {
    $config = array(
        'aws_key' => 'yourkey',
        'aws_secret' => 'yourkeysecret',
    ));

    //
    //echo 0 > /selinux/enforce
    //$tr = new Zend_Mail_Transport_Smtp('smtp.belgacom.be');// works - for local
    //$tr = new Zend_Mail_Transport_Smtp('out.telenet.be' ); // works - for office
    //
    $tr = new Zend_Mail_Transport_Smtp(
                      'email-smtp.us-east-1.amazonaws.com'); // DOES not work
    Zend_Mail::setDefaultTransport($tr);

    $mail = new Zend_Mail();
    $html = self::setupEmail($body);
    $mail->setBodyHtml($html); 
    $mail->setFrom('support@memy.com', 'memy.com');
    $mail->addTo($to, 'EXAMPLE');
    $mail->setSubject($subject);
    $mail->send();
  } 
```

**跟进：**

```
// Wild guess
$config = array(
  'aws_key' => 'yourkey',
  'aws_secret' => 'yourkeysecret',
));
$tr = new Zend_Mail_Transport_Smtp('email-smtp.us-east-1.amazonaws.com', 
                                   $config); 
```

**最后跟进：**

*步骤 1)*要使用 Amazon SES SMTP 接口发送电子邮件，您将需要以下内容：

*   一个 AWS 账户。

*   Amazon SES 生产访问，如果您想发送大量电子邮件。有关详细信息，请参阅请求生产访问权限。

    -- 做完之后，他们允许`send 10000 emails per 24 hour period`

    -- 这会在不到 24 小时内快速激活

    -- 5 封电子邮件/秒

*   您已通过 Amazon SES 验证的电子邮件地址。有关详细信息，请参阅验证电子邮件地址。

    -- 这需要一段时间才能得到他们的验证

    -- 这仍然是 24 小时后尚未确认

*   SMTP 接口主机名和端口号。主机名是 email-smtp.us-east-1.amazonaws.com。端口号因连接方法而异。有关详细信息，请参阅连接到 SMTP 端点。

    -- 其他很重要，它失败了

*   您从 AWS 管理控制台获取的 SMTP 用户名和密码。有关详细信息，请参阅 SMTP 凭据。

*   可以使用 TLS（传输层安全）进行通信的客户端软件。

*第 2 步）*我已经完成了上述操作，在管理控制台中显示：

```
Status:
pending verification (resend)
Please check your inbox for an email to this address, and click on the link provided to complete verification. If you did not receive this email, please click resend.

Domain verification in AWS:

Status:
pending verification (resend)
Please check your inbox for an email to this address, and click on the link provided to complete verification. If you did not receive this email, please click resend. 
```

这意味着，他们将在 72 小时内做某事

*步骤 3)*修改 $config 而不使用外部适配器（不被 ZF 转移）

```
$config = array(
  'auth' => 'login',
  'username' => 'SES key',
  'password' => 'SES secret',
));
$tr = new Zend_Mail_Transport_Smtp('email-smtp.us-east-1.amazonaws.com', 
                                   $config); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:20:56.867

我想最简单的方法是使用这个插件：[Amazon-SES-Zend-Mail-Transport](https://github.com/christophervalles/Amazon-SES-Zend-Mail-Transport)。另一方面，如果您通过 Zend_Mail_Transport 挖掘自己，您可以自己编写它。

**编辑**

`Response: 530 Must issue a STARTTLS command first`意味着您需要在进行身份验证之前启用安全连接。

还请确保您在通过 SMTP 连接时使用的是[SES SMTP 凭据。](https://console.aws.amazon.com/ses/home#smtp-settings%3a)这些凭证不同于您的 AWS 凭证。从您发布的代码看来，您可能正在使用 AWS 凭证。

并检查 github 上提供的自述文件；）

**编辑 2**

尝试将此添加到您的配置中：

```
$config = array('ssl' => 'tls','port' => 25); 
```

**编辑 3**

`554 Message rejected: Email address is not verified`即使地址已验证，也会出现。为什么它不起作用的一些想法：

1.) 已验证的地址区分大小写，因此如果您在与您验证的不同的情况下使用它，您将遇到问题。这归结为对 rfc 的严格解释。**-> 检查这个**

2.) 我认为亚马逊不喜欢像 admin@yourdomain.com 这样的基于角色的地址**-> 检查这个**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:16:56.150

另一个跟进。

为了帮助其他人解决同样的问题，这是我最近用来使其正常工作的确切程序。

首先使用这个[https://github.com/christophervalles/Amazon-SES-Zend-Mail-Transport](https://github.com/christophervalles/Amazon-SES-Zend-Mail-Transport)

然后这个：

```
$mail = new Zend_Mail('utf-8');
$transport = new App_Mail_Transport_AmazonSES(
    array(
       'accessKey' => 'YOUR_ACCESS_KEY',
       'privateKey' => 'YOUR_PRIVATE_KEY'
    )
);
$mail->addTo('destination@example.com', 'Recipient')
    ->setFrom('your.verified.email@gmail.com', 'Webmaster')
    ->setSubject('Email subject line')
    ->setBodyText('Email body')
    ->send($transport); 
```

有关更多详细信息和可能的错误： [http ://shakyshane.com/blog/amazon_ses_zend_framework.html](http://shakyshane.com/blog/amazon_ses_zend_framework.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T20:04:38.107

我收到“554 消息被拒绝：电子邮件地址未验证”，但对 /etc/php.ini 的编辑为我修复了它：

sendmail_path = /usr/sbin/sendmail -t -i -f 某人@yourdomain.com

信用：[http ://www.petermac.com/php-mail-function-with-postfix/](http://www.petermac.com/php-mail-function-with-postfix/)

# java - 全局捕获异常

> ID：11047647
> 
> 赞同：2
> 
> 时间：2012-06-15T09:05:49.840
> 
> 标签：java, exception-handling

我正在开发一个大规模的应用程序。我小心翼翼地尝试处理所有异常（并尽可能提前阻止它们）。但由于应用规模较大，有时会抛出一些异常。在我的开发环境中工作时（即从 eclipse 启动应用程序），我可以看到应用程序出现在哪里，去那里，看看我能做些什么。问题是 - 在开发过程中 - 我已经让其他人（在公司内部）使用该应用程序“进行某种测试”。他们给了我很多反馈，我很喜欢。现在，如果在他们的应用程序中抛出异常，我无法判断这个异常是在哪里创建的。

我已经看到应用程序通过对话框向用户显示未捕获的异常。虽然我当然不希望在客户版本中发生这种情况，但如果我可以在调试版本中做到这一点，可能会有很大帮助。这可能吗？

简而言之：**是否可以捕获多线程 Java 应用程序的所有抛出和未捕获的异常？**

编辑：有人问我，代码是如何运行的。我在 Eclipse 中创建了一个可运行的 jar，其中包含所有库和类文件。[然后我使用Launch4j](http://launch4j.sourceforge.net/)将这个 jar 打包到一个可执行文件中。[然后使用这个可执行文件来运行应用程序（它与使用Innosetup](http://www.jrsoftware.org/isinfo.php)的资源文件一起打包到 setup.exe 中，但我想这不是那么重要）。

在代码方面，我有一个 ThreadManager 可以启动所有必要的类（包括 gui），但不必保留所有这些类的句柄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:13:20.910

用来`Thread.setDefaultUncaughtExceptionHandler()`处理所有未捕获`Exceptions`的。

看到[这个](http://www.javamex.com/tutorials/exceptions/exceptions_uncaught_handler.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:19:02.243

您应该有一个记录所有异常的日志。此外，如果您使用 log4j，您可以使用 org.apache.log4j.net.SMTPAppender，如果记录了错误，它将向您发送一封电子邮件。这样，每当应用程序中发生异常时，您都会收到一封电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:57:18.923

因此，您需要每个线程在死亡之前捕获所有 Throwable（不仅仅是异常）并将它们转储到日志中。

捕捉可以通过两种方式完成：

a) 覆盖 run() 与

```
try {
   super.run()
 } catch(Throwable ex) {
   ex.printStackTrace(logWriter);
 } 
```

b) 使用`Thread.setDefaultUncaughtExceptionHandler()`

如果您使用 ThreadManager，则创建您自己的 ThreadFactory，它创建以一种或另一种方式记录异常的线程。

# php - 管理员在不知道用户密码的情况下以用户身份登录？

> ID：11047649
> 
> 赞同：0
> 
> 时间：2012-06-15T09:05:57.970
> 
> 标签：php, mysql

我正在尝试提供管理员功能，管理员可以在不知道密码的情况下以其他用户身份登录。所有网站内容均受权限控制。我的问题是——

*   我应该在切换到用户帐户之前注销管理员用户吗？这是否意味着管理员必须重新登录？
*   如果我需要切换回管理员帐户 - 我该如何解决这个问题，因为“用户”没有管理员权限，但我之前以管理员身份登录？
*   还有什么我需要记住的吗？

你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:10:47.817

我不熟悉 CI，但这是一个通用的解决方案：

选择模拟用户时，您：

*   将*用户 id*存储在会话中作为*admin user id*。
*   *将会话中的用户 ID*替换为目标用户 ID（即在成功登录期间执行任何操作）

如果会话中存在*管理员用户 ID*，请在某处显示“结束模拟”链接。单击该链接时，您：

*   *将会话中的用户 id*替换为*admin 用户 id*。
*   从会话中删除*管理员用户 ID 。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:39:37.713

1.  不要破坏管理会话

2.  检查是否设置了管理会话

    ```
    if(isset($_SESSION['admin']))
    {
          //authenticate the user without checking the password,only check the uname 
    }
    else
    {
        //authenticate the user by checking both username and password
    } 
    ```

3.  请记住为用户和管理员保留两个单独的会话。

我希望那会做

# ipad - Titanium：无法在物理设备上安装应用程序

> ID：11047653
> 
> 赞同：0
> 
> 时间：2012-06-15T09:06:10.487
> 
> 标签：ipad, ios5, segmentation-fault, titanium, titanium-mobile

我有一个在 iOS 模拟器上运行良好的 Titanium 移动应用程序，但是当我尝试在物理设备上安装相同的应用程序时，它会在中间停止安装进度。我可以在管理器控制台中看到一些错误跟踪。这是错误跟踪

```
Jun 15 01:53:41 unknown misagent[147] <Error>: profile not valid: 0xe8008011
Jun 15 01:53:41 unknown lockdownd[21] <Error>: 001ff000 copy_phonenumber: CTSettingCopyMyPhoneNumber() returned NULL
Jun 15 01:53:41 unknown lockdownd[21] <Error>: 001ff000 copy_iccid: invalid ICCID from CT/no ICCID available
Jun 15 01:53:41 unknown lockdownd[21] <Error>: libMobileGestalt copyMobileEquipmentIdentifier: No MEID in CT mobile equipment info dictionary - <CFBasicHash 0xd611fe0 [0x3f209630]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0xd611f90 [0x3f209630]>{contents = "kCTMobileEquipmentInfoCurrentMobileId"} = <CFString 0xd611fc0 [0x3f209630]>{contents = "012804009362089"}
    4 : <CFString 0xd612010 [0x3f209630]>{contents = "kCTMobileEquipmentInfoICCID"} = <CFString 0x3f1fd9d0 [0x3f209630]>{contents = ""}
    11 : <CFString 0xd612780 [0x3f209630]>{contents = "kCTMobileEquipmentInfoIMEI"} = <CFString 0xd611fc0 [0x3f209630]>{contents = "012804009362089"}
}
Jun 15 01:53:41 unknown lockdownd[21] <Error>: 001ff000 copy_meid: MobileGestalt failed to provide an MEID but returned no error (?)
Jun 15 01:53:45 unknown ReportCrash[156] <Notice>: Formulating crash report for process installd[135]
Jun 15 01:53:45 unknown com.apple.itunesstored[133] <Notice>: receive_message: failure running async function: 1
Jun 15 01:53:45 unknown com.apple.itunesstored[133] <Notice>: call_and_response: Could not receive response from proxy
Jun 15 01:53:45 unknown com.apple.itunesstored[133] <Notice>: MobileInstallationInstall: failed with -1
Jun 15 01:53:45 unknown com.apple.launchd[1] <Warning>: (com.apple.mobile.installd) Job appears to have crashed: Segmentation fault: 11
Jun 15 01:53:45 unknown com.apple.launchd[1] <Warning>: (com.apple.mobile.installd) Throttling respawn: Will start in 2 seconds
Jun 15 01:53:45 unknown ReportCrash[156] <Error>: Saved crashreport to     /var/mobile/Library/Logs/CrashReporter/installd_2012-06-15-015345_EpocDev-iPad01.plist using     uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

证书和配置文件很好，因为 XCode 构建总是成功的。我不知道发生了什么。这是我的第四个钛应用程序。我也在钛论坛上发过，但是很久没有得到任何回复。我现在完全沮丧。非常感谢任何帮助。

下面是开发环境：

**应用类型**：手机

**钛 SDK** : 1.8.3 (05/29/12 16:47 427f3c5)

**平台和版本**：iOS 5.0

**设备**：物理 iPad 设备（使用 iOS 5.0.1 (9A405)）

**主机操作系统**：OSX 10.6.8

**钛工作室**：2.0.1

**X代码**：4.2

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:31:58.680

如果我没记错的话，我在使用 Xcode 版本和 SDK 时遇到了一些无法解释的问题。您可能想要做的是以下场景之一：

(1) 使用较旧的 SDK 版本，例如 1.7.x

(2) 升级到 XCode 4.3 和 SDK 2.x - 但请注意这会带来一些变化！！Xcode 位于不同的文件夹中（/Applications，您现在使用 Mac 的 App Store 下载它），因此需要进行一些重新配置。不记得我必须做什么，但至少问题可以解决。我现在使用 Ti SDK 2.0.2GA 运行 Xcode 4.3，两天前没有编译问题。

这对你有用吗？

# azure - 什么是默认的 Windows Azure 托管服务行为？

> ID：11047657
> 
> 赞同：0
> 
> 时间：2012-06-15T09:06:18.290
> 
> 标签：azure, cloud, load-balancing, failover, round-robin

将 Web 角色部署到 Windows Azure 云时，负载平衡方面的默认行为是什么？有吗？

我提出问题的原因是，我们有流量管理器，您可以在其中指定负载平衡、故障转移和循环。但是，如果我不启用此功能，那么 Azure 如何在幕后工作？

关于 SLA 的默认建议始终是至少两个实例；但这两个实例服务请求还是只有一个？因此，默认行为是故障转移？

提前感谢您对此事的任何澄清，因为我在 Google 上没有成功找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:49:20.600

默认值*应该*是循环，但并不总是 100% 保证。

可以肯定的一件事是，它不是故障转移负载平衡。这个想法是，您的所有实例都被同等加载，但不能一直 100% 保证。

**更新**

这个世界上没有什么是 100% 保证的 :) 甚至计算实例的 SLA 是 99.95% 而不是 100%。流量管理器与多实例部署无关。流量管理器仅在您跨地理区域进行部署时发生。

自从 2008 年第一个公共 CTP 以来，我一直在使用、探索、调整、开发、移植到 Windows Azure。我不记得我从哪里获得所有信息，但计算负载均衡器将使用循环或类似的算法（当然不是故障转移）将负载分散到您的实例中。更重要的是，如果我可以这么说，它是“无粘性的”。这意味着不能保证来自一个用户的请求会在下一次调用中命中同一个实例。

Windows Azure 上的一些资源（旧的和新的）：

[http://www.davidchappell.com/writing/white_papers/introducing_windows_azure_v1-chappell.pdf](http://www.davidchappell.com/writing/white_papers/introducing_windows_azure_v1-chappell.pdf)

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx)

此外，值得一提的是，在最新版本中，还有针对单实例角色的 SLA：http: [//www.windowsazure.com/en-us/support/legal/sla/](http://www.windowsazure.com/en-us/support/legal/sla/)

> 此外，我们将监控您的所有个人角色实例，并保证 99.9% 的时间我们将检测到角色实例的进程何时未运行并启动纠正措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:22:48.357

@astaykov 几乎涵盖了它。由于有关流量管理器和 100% SLA 的评论，我想对此进行扩展。

我从未听说过提供 100% SLA 的托管服务提供商。这意味着*一切*都不会出错：软件崩溃、操作系统更新、操作系统崩溃、硬件崩溃、网络中断、电源中断、DNS 中断……在*某些时候某些**事情*会导致服务器（或虚拟机）在一段时间内不可用。

 *Windows Azure 为云服务、存储、SQL 数据库、SQL 报告、服务总线、访问控制、缓存和 CDN 提供服务级别协议 (SLA)（请参阅[此处](http://www.windowsazure.com/en-us/support/legal/sla/)的所有 SLA 详细信息）。对于这个问题，云服务 SLA 是相关的，提供 99.95% 的可用性。

有时，给定的角色实例将不可用。你几乎可以向自己保证这一点。存在操作系统映像升级（客户操作系统和主机操作系统）、硬件故障等问题。此问题并非特定于 Windows Azure；任何云或托管服务都会出现这些类型的中断。

为了提高正常运行时间的可用性，应该部署多个实例。*然后将实例跨故障域*拆分，这意味着它们位于不同的硬件、不同的机架上，并且是隔离的，因此如果网络段或电源连接发生故障（想象服务器机架的网络面板短路），只有实例受到影响。负载均衡器将继续将流量分配给健康的实例（尽管容量会减少，直到替换实例上线）。

到流量管理器：这是一种跨地理区域分配流量的方法，用于故障转移或性能。在前一种情况下，您将在单独的数据中心中运行服务，这为您的应用程序提供了良好的“高可用性”故事（想象主数据中心由于某种原因离线）。在后一种情况下，当您的业务遍及全球时，您可以为客户提供更好的性能。*

# indexeddb - IndexedDB 什么时候“完成”？

> ID：11047664
> 
> 赞同：2
> 
> 时间：2012-06-15T09:06:44.533
> 
> 标签：indexeddb

在之前的 IndexedDB 规范 ( [http://www.w3.org/TR/2011/WD-IndexedDB-20111206](http://www.w3.org/TR/2011/WD-IndexedDB-20111206) ) 中，IDBDatabase 事务的模式值很短。在当前规范（2012 年 5 月 24 日）中，它现在是一个字符串。FF12 依然使用短片。模式值确定您想要只读事务还是读写事务。

有谁知道在哪里可以找到 IndexedDB 的进度（即什么时候完成，我们可以使用 window.indexedDB 而不是 window.mozIndexedDB/webkitIndexedDB/msIndexedDB）？不幸的是，规范没有说明这是一个提议的“最终”版本还是只是其中一个（有更多的重大变化）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T22:19:48.007

当我们将事务模式、光标方向等的数值从数值上进行更改时，其意图是这将是规范的最后一次“重大更改”。

与任何标准开发一样，如果我们在规范中发现真正致命的缺陷，事情仍然可能发生变化，比如它是否自相矛盾，或者如果实现它的每个方面都需要采取一些非常糟糕的性能惩罚。

然而，鉴于自 Firefox 11 以来我们已经实现了 Firefox 中的几乎所有功能（仅缺少一些小问题，例如 transaction.error），我们相信我们可以毫无问题地修复剩余的错误。

我们甚至希望删除 Firefox 16 中的“moz”前缀，尽管我们还没有做出任何承诺。

编辑：哦，规范的同步部分不会阻止完成异步部分。我们在最新版本的规范中将同步部分标记为“有风险”，因此如果我们觉得它阻碍了我们，我们可以将其删除以符合规范并将其添加到下一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:27:31.403

不会很快。

虽然我不知道规范何时会完全出炉，但我可以肯定地说它还没有接近。除了至少两个主要浏览器 FF 和 Chrome 之间的 API 不兼容之外，IE10 的实现还没有向公众发布。

此外，有人可能会争辩说 IndexedDB 在实现同步 API 以供 Web Worker 使用之前还没有“完成”，此时甚至没有浏览器供应商同意开始这方面的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:11:04.717

有关新功能的实施进度，请查看[caniuse.com](http://caniuse.com/#search=indexeddb)。

对于 IndexedDB，它目前仅列出 Firefox 和 Chrome 中的前缀支持。Ans 支持即将推出的 IE10。

与许多特性一样，在 w3c 标准被列为最终标准之前很久，它就会成为一个事实标准（因此只需稍作修改）。

# c - 为简单设备驱动程序编译内核模块时出错

> ID：11047666
> 
> 赞同：3
> 
> 时间：2012-06-15T09:06:52.297
> 
> 标签：c, device-driver, kernel-module

我有这样的功能：

```
void cleanup_module(void)
{
    /* 
     * Unregister the device 
     */
    if(unregister_chrdev(Major, DEVICE_NAME)<0) 
        printk(KERN_ALERT "Error in unregister_chrdev:\n");
} 
```

和错误：

```
/home/student/kernel/hello.c: In function ‘cleanup_module’:
/home/student/kernel/hello.c:39:2: error: void value not ignored as it ought to be 
```

这一行是带有 if 语句的行。你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:12:25.057

这意味着 that`unregister_chrdev`没有返回值（它是`void`），但您已将其放入 if 中。也就是说，您正在使用一个应该被忽略的 void 值。因此出现错误消息。

查看[这个问题](https://stackoverflow.com/questions/3237384/how-to-find-if-unregister-chrdev-call-was-successful)，它询问为什么返回值更改为 void。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:12:09.413

基于[此](http://lkml.indiana.edu/hypermail/linux/kernel/0706.3/2231.html) `unregister_chrdev()`，用于返回 an`int`但其返回类型更改为`void`，因为返回的值没有意义。`if`从发布的代码中完全删除：

```
unregister_chrdev(Major, DEVICE_NAME); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:12:44.293

该错误表明该`unregister_chrdev()`函数是一个`void`类型函数，即它不返回任何内容。但是，您正在使用运算符检查其返回值`<`。

# javascript - 从一个大的 HTML 字符串创建一个 jQuery 对象

> ID：11047670
> 
> 赞同：156
> 
> 时间：2012-06-15T09:07:03.787
> 
> 标签：javascript, jquery, html

我有一个包含多个子节点的大 HTML 字符串。

是否可以使用此字符串构造一个**jQuery** DOM 对象？

我试过`$(string)`了，但它只返回一个包含所有单个节点的数组。

我正在尝试获取一个我可以使用 .find() 函数的元素。

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-06-15T09:11:51.190

## 更新：

从 jQuery 1.8 开始，我们可以使用[$.parseHTML](https://api.jquery.com/jquery.parsehtml/)，它将 HTML 字符串解析为 DOM 节点数组。例如：

```
var dom_nodes = $($.parseHTML('<div><input type="text" value="val" /></div>'));

alert( dom_nodes.find('input').val() ); 
```

[**演示**](https://jsfiddle.net/Lmsan9fq/)

* * *

```
var string = '<div><input type="text" value="val" /></div>';

$('<div/>').html(string).contents(); 
```

**[演示](http://jsfiddle.net/QStkd/273/)**

### 这段代码发生了什么：

*   `$('<div/>')``<div>`是DOM 中不存在的假货
*   `$('<div/>').html(string)`附加`string`在那个假`<div>`的作为孩子
*   `.contents()`检索那个假的孩子`<div>`作为一个 jQuery 对象

### 如果你想`.find()`工作，那么试试这个：

```
var string = '<div><input type="text" value="val" /></div>',
    object = $('<div/>').html(string).contents();

alert( object.find('input').val() ); 
```

**[演示](http://jsfiddle.net/QStkd/276/)**

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2013-05-31T14:29:53.993

从 jQuery 1.8 开始，您可以使用 parseHtml 来创建您的 jQuery 对象：

```
var myString = "<div>Some stuff<div>Some more stuff<span id='theAnswer'>The stuff I am looking for</span></div></div>";
var $jQueryObject = $($.parseHTML(myString)); 
```

我创建了一个 JSFidle 来演示这一点：http: [//jsfiddle.net/MCSyr/2/](http://jsfiddle.net/MCSyr/2/)

它将任意 HTML 字符串解析为 jQuery 对象，并使用 find 在 div 中显示结果。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-15T09:09:30.600

```
var jQueryObject = $('<div></div>').html( string ).children(); 
```

这将创建一个虚拟 jQuery 对象，您可以将字符串作为 HTML 放入其中。然后，你只得到孩子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-16T02:03:39.317

还有一个很棒的库，叫做[cheerio](https://github.com/cheeriojs/cheerio)，专门为此设计的。

> 专为服务器设计的核心 jQuery 的快速、灵活和精简的实现。

```
var cheerio = require('cheerio'),
    $ = cheerio.load('<h2 class="title">Hello world</h2>');

$('h2.title').text('Hello there!');
$('h2').addClass('welcome');

$.html();
//=> <h2 class="title welcome">Hello there!</h2> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-30T13:29:00.090

我将以下内容用于我的 HTML 模板：

```
$(".main").empty();

var _template = '<p id="myelement">Your HTML Code</p>';
var template = $.parseHTML(_template);
var final = $(template).find("#myelement");

$(".main").append(final.html()); 
```

注意：假设您使用的是 jQuery

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-03T23:26:39.783

$(string) 不起作用的原因是 jquery 没有在 $() 之间找到 html 内容。因此，您需要先将其解析为 html。一旦你有一个变量，你已经在其中解析了 html。然后您可以使用 $(string) 并使用对象上可用的所有函数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-05T07:53:09.730

您可以尝试以下方法

```
$($.parseHTML(<<table html string variable here>>)).find("td:contains('<<some text to find>>')").first().prev().text(); 
```

# java - PathMatchingResourcePatternResolver (spring) 用法

> ID：11047672
> 
> 赞同：9
> 
> 时间：2012-06-15T09:07:09.193
> 
> 标签：java, spring, classpath, classloader

我正在使用 ：

```
PathMatchingResourcePatternResolver rr = new ...;
rr.getResources("classpath*:**/*.class") 
```

从由目录和 jar 组成的类路径中获取所有类。该调用仅返回目录中的类；JAR 文件被忽略。以下调用从 JAR 返回类：

```
rr.getResources("classpath*:org/**/*.class") 
```

是否可以在不知道基本包名称的情况下获取所有类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T09:35:14.407

[文档](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html)中提到，当使用“classpath*:”前缀和 ant 样式模式时，至少需要在模式开始之前提及一个根目录，这是 JDK 的 ClassLoader.getResources() 方法中的一个限制。如果未提及根目录，则它仅从扩展目录的根目录检索文件。

所以不幸的是，你在这里不走运。

# c# - 静态属性总和不正确

> ID：11047679
> 
> 赞同：4
> 
> 时间：2012-06-15T09:07:25.300
> 
> 标签：c#, properties, static

我有这个小班看起来像这样：

```
private static int field1 = - 1;
private static int field2 = field1 + 1;

public static void Sum()
{
    field1 = 10;
    Debug.WriteLine(field2);
} 
```

对 Sum() 的调用写入“0”。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T09:09:43.880

这些不是属性 - 它们是字段。`field2`仅在初始化*时*相关`field1`- 之后，它们是完全独立的字段。这不像每次读取或每次写入时`field1 + 1`都会重新评估表达式。`field2``field1`

如果您*只想* `field2`依赖 的值`field1`，则应将其设为属性：

```
// Note: I wouldn't actually call this Field2, of course...
private static int Field2 { get { return field1 + 1; } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:09:47.827

发生这种情况是因为您没有更新 prop2。您只是在开始时对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:20:11.697

```
private static int prop1 = - 1;
private static int prop2 = prop1 + 1;

public static string Sum()
{
    prop1 = 10;
    Debug.WriteLine(prop2);
} 
```

此代码从不返回 1，静态属性 prop2 由零初始化。您没有在 Sum() 函数中执行任何操作。所以它只会返回零“0”的初始化值

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T09:11:03.270

~~您无法控制静态变量初始化的顺序。如果你真的想要这个，你必须在一个静态构造函数中：~~

 ~~```
static class XYZ{

    private static int field1;
    private static int field2;

    static XYZ {
        field1 = - 1;
        field2 = field1 + 1;
    }    

    public static string Sum()
    {
        prop1 = 10;
        Debug.WriteLine(field2);
    }

} 
```~~  ~~正如乔恩所说，我的假设是错误的。~~

# c# - 创建时弹出用户控件未正确呈现

> ID：11047682
> 
> 赞同：0
> 
> 时间：2012-06-15T09:07:42.503
> 
> 标签：c#, winforms, controls, drawing

我有一个类可以处理一种用户控件弹出窗口，它通过从 System.Windows.Forms.ToolStripDropDown 继承来工作。这适用于我目前拥有的弹出类型，我将在下面详细说明；

首先，是我用来以弹出式样式保存用户控件的类；

```
 public class PopupWindow : System.Windows.Forms.ToolStripDropDown
{
    private System.Windows.Forms.Control _content;
    private System.Windows.Forms.ToolStripControlHost _host;

    public PopupWindow(System.Windows.Forms.Control content)
    {
        //Basic setup...
        this.AutoSize = false;
        this.DoubleBuffered = true;
        this.ResizeRedraw = true;
        this.BackColor = content.BackColor;

        this._content = content;
        this._host = new System.Windows.Forms.ToolStripControlHost(content);

        //Positioning and Sizing
        this.MinimumSize = content.MinimumSize;
        this.MaximumSize = content.Size;
        this.Size = content.Size;
        content.Location = Point.Empty;

        //Add the host to the list
        this.Items.Add(this._host);
    }
} 
```

正如我们在这里看到的，我只是将一个控件传递给它，并让它完成工作。当在“onclick”弹出窗口上使用它时，就像这样，它工作正常；

```
 public void Popup(object sender, MouseEventArgs e, other params)
    {

        DevicePopup popupDevice = new DevicePopup();

          //do stuff to the control here before displaying

        PopupWindow popup = new PopupWindow(popupDevice);
        popup.Show(Cursor.Position);

    } 
```

并这样称呼它；

```
 this.Controls[btnAdd.Name].MouseClick += (sender, e) =>
            {
                int index = temp;
                generatePopup.Popup(sender, e, mDevices[index], this);
            }; 
```

这样做可以按预期在我的鼠标单击时成功创建弹出用户控件。

但是，我现在正在尝试使用第二种类型的弹出窗口，它会在发生某些事情时产生。下面是我的新弹出类，并调用它；

```
public void AlarmNotificationPopup(IDeviceInterface device)
     {

         try
         {
             AlarmNotification ANotification = new AlarmNotification();

       //do stuff to the control again before displaying

             PopupWindow popup = new PopupWindow(ANotification);
             popup.Show(100, 100);

         }
         catch (Exception e)
         {
             MessageBox.Show(e.Message);
         }

     }

    AlarmNotificationPopup(device); 
```

但是，这个弹出窗口没有正确渲染/创建，看起来像这样；

![渲染问题](../Images/dc1b772cd67805907327fd66aabc77d4.png)

我不完全确定如何解决这个问题。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:33:09.620

有几件事可以尝试：

我认为您不需要“基本设置”，因此请注释掉。另外，尝试设置您的边距和填充：

```
public PopupWindow(Control content) {
  // Basic setup...
  // this.AutoSize = false;
  // this.DoubleBuffered = true;
  // this.ResizeRedraw = true;
  // this.BackColor = content.BackColor;

  this._content = content;
  this._host = new ToolStripControlHost(content);
  this._host.Margin = new Padding(0);
  this._host.Padding = new Padding(0);
  this.Padding = new Padding(0);
  this.Margin = new Padding(0);

  //Positioning and Sizing
  this.MinimumSize = content.MinimumSize;
  this.MaximumSize = content.Size;
  this.Size = content.Size;
  content.Location = Point.Empty;

  //Add the host to the list
  this.Items.Add(this._host);
} 
```

确保你`AlarmNotification`有它的`MinimumSize`属性集。

如果这无助于解决问题，那么您可能需要记录`AlarmNotification`班级正在做什么。

# xml - ASP.NET Web API：XMLFormatter 认为他可以编写 Json-objects

> ID：11047683
> 
> 赞同：2
> 
> 时间：2012-06-15T09:07:46.713
> 
> 标签：xml, json, asp.net-mvc-4, asp.net-web-api

我有这样的方法：

```
public JObject Get(int id)
        {
            return new JObject(new JProperty("Test", "Test"));
        } 
```

如果我请求 JSON，它可以正常工作，但是如果我请求 XML，我会从 web api 框架中得到一个 HTTP-Errorcode 500（也不例外）。XMLformatter 似乎很可能认为他可以编写 json。我可以通过以下方式对其进行测试：

```
bool test = GlobalConfiguration.Configuration.Formatters.XmlFormatter.CanWriteType(typeof(JArray));
            bool test2 = GlobalConfiguration.Configuration.Formatters.XmlFormatter.CanWriteType(typeof(JObject));
            bool test3 = GlobalConfiguration.Configuration.Formatters.XmlFormatter.CanWriteType(typeof(JProperty));
            bool test4 = GlobalConfiguration.Configuration.Formatters.XmlFormatter.CanWriteType(typeof(JValue)); 
```

它总是返回“真”。我不想删除 xmlformatter，但服务器抛出我不产生且无法解决的 HTTP 错误 500 是不可接受的。最好的是 XMLformatter 可以序列化对象......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T12:42:22.820

DataContractSerializer 不支持匿名/动态类型（甚至是通用“对象”）。这就是它没有被序列化为 XML 的原因。

如果要进行 XML 序列化，则必须使用强类型对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:10:41.117

为什么要从 Web API 方法返回 JObject？那是 JSON 特定的对象，它不是 XML 可序列化的。您不应该返回特定格式的对象，

只是普通的模型对象（或`HttpResponseMessage`）：

```
public object Get(int id)
{
    return new { Test = "Test" };
} 
```

或直接强类型对象：

```
public class MyModel
{
    public string Test { get; set; }
} 
```

进而：

```
public MyModel Get(int id)
{
    return new MyModel { Test = "Test" };
} 
```

并让配置的媒体格式化程序完成将此对象序列化为客户端请求的正确格式的工作。不要在您的 API 操作中使用任何序列化格式的特定对象。那不是他们的责任。

# c++ - 在 Eclipse 中编译 C++ 项目

> ID：11047684
> 
> 赞同：0
> 
> 时间：2012-06-15T09:07:55.217
> 
> 标签：c++, eclipse

我已经从[http://www.eclipse.org/downloads/index.php](http://www.eclipse.org/downloads/index.php)页面为 C++ 开发人员下载了 Eclipse IDE 。在 Eclipse 中编译和运行 C++ 项目还需要什么？可能是CDT？Windows7 64位在哪里可以下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:49:23.947

我认为你还需要像[http://www.mingw.org/](http://www.mingw.org/)这样的东西来编译和制作。它使用 Linux 也使用的 GNU c++ 编译器，并拥有它的所有标准库。在 google 中搜索 ecplise cdt mingw，你会发现我认为足够多的教程。

# java - 在数据库中存储和检索图像的过程

> ID：11047685
> 
> 赞同：0
> 
> 时间：2012-06-15T09:08:00.223
> 
> 标签：java, hibernate, struts

我以前从未在数据库中保存和检索图像。我写下了我猜想的过程。我只是想知道这是否正确：

> 保存图片：
> 
> 1.  从 jsp (Struts 2) 中选择并上传图像文件，这会将其保存为 .tmp 文件。
> 2.  将 .tmp 文件转换为 byte[] 数组（Java 服务器端）
> 3.  将 byte[] 数组作为 blob 存储在数据库中（Java 服务器端）
> 
> 获取图像：
> 
> 1.  从数据库中获取 byte[] 数组（Java 服务器端）
> 2.  将 byte[] 数组转换为图像文件（Java 服务器端）
> 3.  在某个位置创建文件（Java 服务器端）
> 4.  使用 img 标签显示文件（JSP 客户端）
> 5.  文件用完后删除？（Java 服务器端）

**我知道强烈建议不要在数据库中保存和检索图像。无论如何，我想知道该怎么做。**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:11:38.930

几乎正确。

动态创建文件然后删除它既昂贵又不太好。

是的，您将它作为原始字节存储在数据库中，但是检索它并将其显示给客户端计算机的方法是实现一个 Web 处理程序，该处理程序将响应的内容类型设置为适当的 MIME 类型，然后转储字节输出到响应流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:24:19.943

是的，你没看错。

保存图片 ：

保存图像的决定在很大程度上取决于进一步的使用。您可以选择将文件保存在文件系统上。保存文件的位置应保存在数据库表的元数据中。

获取图像：

您不必在任何临时位置上正确的文件数据。它只能从数据库中轻松呈现。只需从客户端发送一个请求并在空间设计的 Servlet 中拦截该请求。此 Servlet 将读取文件元数据和相应文件，如果成功，则将文件写回响应流上。

# php - 从mysql数据库中删除复杂的值

> ID：11047686
> 
> 赞同：0
> 
> 时间：2012-06-15T09:08:17.540
> 
> 标签：php, mysql

我在数据库中的表结构；

表“System_t”

```
id         |    Owner     |    System
===========================================
1          |    Joe       |    Registration
           |              |    Event             //contains new line
           |              |    Aims
-------------------------------------------
2          |    Rose      |    Ticket
           |              |    Elearning 
```

注意：数据字段“系统”是从 Textarea 框中保存的。

我的问题是如何从“系统”字段中只删除“事件”数据？

我的表在删除时应该是这样的；

```
id         |    Owner     |    System
===========================================
1          |    Joe       |    Registration
           |              |    Aims
-------------------------------------------
2          |    Rose      |    Ticket
           |              |    Elearning 
```

知道如何在不更改表结构的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:16:46.917

在这种情况下，带有 a的`UPDATE`语句`REPLACE`应该更好。

看看这篇文章，它可能会帮助你理解我在说什么：

[在MYSQL中删除部分字符串](https://stackoverflow.com/questions/6681910/deleting-part-of-a-string-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:13:00.927

您可以使用`delete`命令将其删除：

```
DELETE FROM table_name
WHERE some_column=some_value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:16:00.577

```
$searchQuery = "Event";

$query = mysql_query("SELECT `id`, `System` FROM `System_t` WHERE `System` LIKE '%" . $searchQuery . "%'");

if (mysql_num_rows($query) > 0) {
    while ($arr = mysql_fetch_row($query)) {
        $system = explode("\n", $arr[1]);
        $key = array_search($searchQuery, $system);
        if ($key !== false)
            unset($system[$key]);

        $system = implode("\n", $system);

        mysql_query("UPDATE `System_t` SET `System`='" . $system . "' WHERE `id`='" . $arr[0] . "'");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:23:21.237

试试这个：

```
 update System_t su
       set su.System = replace(su.System, "Event", "") 
        where su.System like "%Event%"; 
```

我没有考虑新行我把它留给你作为一个简单的练习:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:25:06.400

```
Update system_t SET system=REPLACE(system,'event','') WHERE system REGEXP '[[:<:]]event[[:>:]]'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T10:11:08.800

对于 PostgreSQL，你可以使用类似的东西（因为我相信在 MySQL 中没有直接替换功能）：

```
UPDATE "System_t"
SET "System" = overlay("System" placing '' 
               from (position('Events' in "System")) 
               for 6)
WHERE "System" LIKE '%Events%' 
```

您可以在此处查看叠加和位置功能的说明：[http ://www.postgresql.org/docs/8.0/static/functions-string.html](http://www.postgresql.org/docs/8.0/static/functions-string.html)

6 是您要删除的字符串的大小。

无论如何，我建议您使用例如 (id, system_id, system_type) 创建另一个表，其中 system_id 是指向另一个表的外键。这样，您将拥有更好的模型并避免很多不一致。

# c# - 如何在 C# 的 ComboBox 中仅显示项目的子字符串

> ID：11047688
> 
> 赞同：1
> 
> 时间：2012-06-15T09:08:29.847
> 
> 标签：c#, winforms, combobox

我有一些公司名称作为`ComboBox`这样的项目：

`123 SomeCompany`

始终为 100 到 999 之间的数字加上公司名称。

现在，如果用户选择一个项目，我希望 TextBox 只显示数字，而不是公司名称。只有当他下拉组合框时，他的公司名称才应该可见......

我尝试`ComboBox1.Text = ComboBox.Text.Substring(0, 3)`在 SelectedIndexChanged-Event 和 TextChanged-Event 中进行设置，但它没有做任何事情，ComboBox 中总是有一切......

`AutocompleteMode`设置为`none`。

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:18:38.013

要始终格式化值，您可以使用 Format 事件（FormattingEnabled = true）

```
 private void comboBox1_Format(object sender, ListControlConvertEventArgs e)
    {   
          e.Value = e.Value.ToString().Substring(0, 3);
    } 
```

但是，如果您希望在显示下拉列表时显示完整值，您可以暂时禁用格式设置：

```
 private void comboBox1_DropDown(object sender, EventArgs e)
    {
        comboBox1.FormattingEnabled = false;
    }

    private void comboBox1_DropDownClosed(object sender, EventArgs e)
    {
        comboBox1.FormattingEnabled = true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:25:41.937

试试这个

```
textbox1.Text = ComboBox1.SelectedItem.ToString().SubString(0, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:26:11.470

尝试这样的事情：

```
private void combox1_ SelectedIndexChanged(object sender,EventArgs e)
{
      string value = (combox1.selectedItem != null) ? 
          combox1.selectedItem.ToString().Substring(0, 3) : string.Empty;
} 
```

# javascript - 如果 JSON 响应已指定行，则 Javascript 警报

> ID：11047690
> 
> 赞同：0
> 
> 时间：2012-06-15T09:08:43.000
> 
> 标签：javascript, json, alert

我正在尝试构建一个从服务器获取 JSON 的应用程序，然后在 JSON 响应已指定行时显示 javascript 警报。我从服务器获得的 JSON 如下所示：

```
{
    "key": [
        {
            "IND": "406",
            "NUMBER": "9",
            "MESSAGE": "this is a test",
            "status": "ok"
        }
    ]
} 
```

这是我用来显示警报的代码：

```
function UpdateRecord(update_id) {
    var id = getUrlVars()["id"];
    jQuery.ajax({
        type: "POST",
        url: serviceURL + "test.php",
        data: 'id=' + id,
        cache: false,
        success: function(data) {
            if (data.status == 'ok') {
                alert(data.message);
            } else {
                alert("no");
            }
        }
    });
}​ 
```

但是即使 JSON 有一行，这段代码也会提示“否” `"status": "ok"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:10:53.453

尝试使用`if (data.key[0].status)`，然后替换`alert(data.message)`为`alert(data.key[0].MESSAGE)`。你必须小心大小写！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:12:42.550

你在你的 JSON 中定义了“密钥”，所以它不应该是

```
if(data.key[0].status == "ok") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:11:45.367

在成功处理程序中执行一个`console.log(data)`以查看数据是什么。您将看到没有`data.status`，但它会是`data.key[0].status`。

# pdf - grails renderpdf插件，它是如何工作的？

> ID：11047692
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:08:59.677
> 
> 标签：pdf, grails, button, render, connect

我正在尝试使用 renderpdf grails 插件渲染 PDF，但他们的文档很短。

我在我的 gsp 视图/文件中做了一个按钮

```
<button type="button">PDF Me!</button> 
```

和

`ByteArrayOutputStream bytes = pdfRenderingService.render(template: "/pdfs/report", model: [data: data])`

在绑定图像的视图中

`<rendering:inlinePng bytes="${imageBytes}" class="some-class" />`

模型数据是 domainInstance，我如何将按钮与这个 renderpdf 连接起来？

也许我应该更多地指定我的代码

```
def invoice ={
    def vermittlungInstance = Vermittlung.get(params.id)

    def aa = vermittlungInstance.lieferungen.id
    def lieferungInstance = Lieferung.get(aa)

    def bb = lieferungInstance.packete.id // .id
    def packetInstance = Packet.findAllByIdInList(bb)

    if (!vermittlungInstance & !lieferungInstance) {
        flash.message = "${message(code: 'default.not.found.message', args: [message(code: 'vermittlung.label', default: 'Vermittlung'), params.id])}"
        redirect(action: "list")
    }
    else {
        if(vermittlungInstance.rechnungen.id!=null || vermittlungInstance.lieferungen.id!=null || lieferungInstance.packete.id!=null ){
            def a = vermittlungInstance.rechnungen.id
            def rechnungList = Rechnung.findById(a)

            def b = vermittlungInstance.lieferungen.id
            def lieferungList = Lieferung.findById(b)

            def c = lieferungInstance.packete.id
            //println c
            def packetList = Packet.findAllByIdInList(c)//findById(c)

            def d = packetInstance.artikel.id//id
            def artikelList = Artikel.findAllByIdInList(d)//findById(d)

            def e = lieferungInstance.adressen.id
            def adresseList = Adresse.findById(e)

            [vermittlungInstance: vermittlungInstance,
                    rechnungInstanceList:rechnungList,
                    lieferungInstanceList:lieferungList,
                    packetInstanceList: packetList,
                    artikelInstanceList: artikelList,
                    adresseInstanceList: adresseList
            ]

            //System.out.println(c)

        }

        else{

            def rechnungList = Rechnung.all
            def lieferungList = Lieferung.all
            def packetList = Packet.all
            def artikelList = Artikel.all
            def adresseList = Adresse.all

            [vermittlungInstance: vermittlungInstance,
                    rechnungInstanceList:rechnungList,
                    lieferungInstanceList:lieferungList,
                    packetInstanceList: packetList,
                    artikelInstanceList: artikelList,
                    adresseInstanceList: adresseList
            ]
        }

    } 
```

}

这是我在控制器中的定义，我试图将这个 renderpdf 放在很多地方，但它不会呈现页面，实际上我正在更改 html（浏览器）中的一些值，所以它应该在 html 中呈现。

控制器似乎是渲染pdf的错误位置，但是.gsp没有渲染功能

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:51:50.037

添加一个新操作，生成发票的 pdf 版本并从您的视图中链接它们。

这是您的链接：

```
<g:link action="downloadInvoice" id="${yourInvoiceID}">Download invoice</g:link> 
```

在您的控件中添加以下内容：

```
def downloadInvoice = {
    def invoice = Invoice.get(params.id) //replace with your logic

   renderPdf(template: '/templates/pdf/invoice', model: [invoice: invoice], filename: "yourTitle")
} 
```

您的发票模板是一个简单的 gsp 视图，您可以在其中放置所有 HTML（包括图像）和 CSS：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Invoice</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="${resource(dir:'css',file:'your.css')}" />        
    </head>
    <body>
        <img src="${resource(dir:'images',file:'invoiceLogo.png')}" />
        <h1>Invoice: ${invoice.id}</h1>
         .
         .
         .
    </body>
</html> 
```

希望这个例子有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T10:38:14.263

如何将 unicode 字体添加到此插件？呈现的 pdf 中不显示 unicode 字符。生成的 pdf 包含空格代替 unicode 字符，尽管它们显示在其他 gsp 页面中。后来我尝试了下面的CSS。但没有奏效。

```
@font-face {
  font-family: 'Ubuntu';
  font-style: normal;
  font-weight: 400;
  src:url(http://themes.googleusercontent.com/static/fonts/ubuntu/v4/_xyN3apAT_yRRDeqB3sPRg.woff) format('woff');
  -fs-pdf-font-embed: embed;
  -fs-pdf-font-encoding: UTF-8;
}

body pre{
font-size: 14px;
font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
} 
```

谢谢，

# spring - 将 Spring 加载的配置属性传递给 JSF 世界的正确方法

> ID：11047694
> 
> 赞同：2
> 
> 时间：2012-06-15T09:09:08.617
> 
> 标签：spring, jsf

我在**WEB-INF**目录下有一个重复的配置文件，名为**configDEV.properties**和**configPRO.properties**（一个用于开发环境，另一个用于生产环境）。

由于这些 Spring 声明和这个 Tomcat 启动参数，我加载了正确的文件：

```
<context:property-placeholder 
        location="WEB-INF/config${project.environment}.properties" />

-Dproject.environment=PRO
(or –Dproject.environment=DEV) 
```

然后，在一个**servlet 侦听**器（称为 StartListener）中，我执行以下操作，以允许**JSF**在托管 bean 和 jsp 视图中访问这些属性。（具体来说，我们将使用一个名为*cfg.skin.richSelector*的属性）。

```
public class StartListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent sce) {
        //Environment properties
        Map<String, String> vblesEntorno = System.getenv();

        //Project properties
        String entorno = vblesEntorno.get("project.environment");
        String ficheroPropiedades = "/WEB-INF/config" + entorno + ".properties";
        try {
            Properties props = new Properties();
            props.load(sc.getResourceAsStream(ficheroPropiedades));

            setSkinRichSelector(sc, props.getProperty("cfg.skin.richSelector"));
        } catch (Exception e) {
            //...
        }
    }

    private void setSkinRichSelector(ServletContext sc, String skinRichSelector) {
        sc.setInitParameter("cfg.skin.richSelector", skinRichSelector); 
    }

    public void contextDestroyed(ServletContextEvent sce) {}

} 
```

在 JSF 托管 bean 中：

```
public class ThemeSwitcher implements Serializable {

    private boolean richSelector;

    public ThemeSwitcher() {

        richSelector = Boolean.parseBoolean(
            FacesContext.getCurrentInstance().getExternalContext().getInitParameter("cfg.skin.richSelector"));

        if (richSelector) {
            //do A
        } else {
            //do B
        }

    }

    //getters & setters

} 
```

在 xhtml 页面中：

```
<c:choose>
    <c:when test="#{themeSwitcher.richSelector}">
        <ui:include src="/app/comun/includes/themeSwitcherRich.xhtml"/>
    </c:when>
    <c:otherwise>
        <ui:include src="/app/comun/includes/themeSwitcher.xhtml"/>
    </c:otherwise>
</c:choose> 
```

所有这些都可以，但我想问专家这是否是最合适的方法，或者是否可以以某种方式简化？？？

提前感谢您的提示和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:21:53.923

这取决于您使用的 Spring 版本。如果它恰好是最新的 Spring 3.1，您可以利用`@Profile`：

[Springsource 博客](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)

[Springsource 参考](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#d0e1293)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:49:07.903

如果您在 spring bean 中使用它，请将属性占位符保留在 applicationContext.xml 中。

在 web.xml 中配置上下文初始化参数，如下所示：

```
 <context-param>
      <param-name>envProp</param-name>
      <param-value>${project.environment}</param-value>
   </context-param> 
```

还要在类路径中的某个包下移动属性文件（注意：由于此更改，您需要使用类路径*：前缀在应用程序上下文中定位资源）

然后你可以像这样在你的 JSF 页面中加载包：

```
<f:loadBundle basename="com.examples.config#{initParam['envProp']}" var="msgs"/> 
```

并使用这样的东西：

```
<h:outputText value="#{msgs.cfg.skin.richSelector}" /> 
```

[但是，不要像 Ryan Lubke 在他的博客](https://blogs.oracle.com/rlubke/entry/jsf_2_0_new_feature2)中提到的那样通过 JNDI 配置 ProjectStage 来设置系统属性，这样即使对于 javax.faces.PROJECT_STAGE 上下文参数，您也可以使用相同的属性。

# c++ - Xcode：C++ 头文件中的断点似乎被忽略了

> ID：11047701
> 
> 赞同：3
> 
> 时间：2012-06-15T09:09:32.907
> 
> 标签：c++, ios, xcode, xcode4, breakpoints

我在 Xcode 4.3.3 中运行一个带有一些 C++ 类的 iOS 项目。

当我在调试模式下运行它时，C++ 头文件中的断点似乎被忽略了。例如，此代码第三行的条形码不起作用：

```
 class myClass : public Reader {
    private:
        static const int INTEGER_MATH_SHIFT = 8; 
```

我期望代码在常量分配上中断，还是我错了？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:19:58.303

断点只能在可执行代码上设置。使用常量表达式初始化具有静态生命周期的对象不会生成任何可执行代码（当您提到赋值时，您发布的代码中没有赋值）。事实上，在整数类型常量的特殊情况下，除非您获取它的地址，否则该对象可能根本不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:11:33.967

AFAIK，断点只能在命令行上设置，而不是在分配上。如果您在实现文件中的赋值上设置断点，它将在下一个操作符行停止

# batch-file - 如何使用批处理文件复制目录及其子目录？

> ID：11047702
> 
> 赞同：0
> 
> 时间：2012-06-15T09:09:38.490
> 
> 标签：batch-file

我想将目录及其子目录从 C: 复制到 D: 具有相同的名称，但任何文件夹的名称都不得更改。

你能帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:13:09.350

在批处理文件中使用以下命令

```
XCOPY source [destination] /E 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:15:51.093

xcopy 可能会帮助你

```
xcopy /E c:\name d:\name 
```

# sql - 在 Sql Server 2005 中使用存储过程时在 sql 查询中格式化字符串

> ID：11047703
> 
> 赞同：1
> 
> 时间：2012-06-15T09:09:41.133
> 
> 标签：sql, sql-server-2005

我的存储过程中有一个查询：

```
IF @backup = 0
    BEGIN
       SELECT sql = 'BACKUP DATABASE MyDatabase TO DISK="'+@file+'"';
    END 
```

`@file`是`nvarchar(MAX)`和`backup`是`int`。

如果我执行如下存储过程：

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[usp_cp_backup_restore_db]
        @backup = 0,
        @file = N'C:\backupFiles\MyDatabase.bak' 
```

但结果变成： `BACKUP DATABASE ContentPlatform TO DISK="C:\backupFiles\MyDatabase.bak"`

我想出现`BACKUP DATABASE ContentPlatform TO DISK='C:\backupFiles\MyDatabase.bak'` ，因为正确的格式是

```
BACKUP
DATABASE MyDatabase TO
DISK='C:\MyDatabase.bak' 
```

因此与[http://dwhanalytics.wordpress.com/2011/03/15/sql-serverexclusive-access-could-not-be-obtained-because-the-database-is-in-usethe-tail-of-the-未备份的数据库日志/](http://dwhanalytics.wordpress.com/2011/03/15/sql-serverexclusive-access-could-not-be-obtained-because-the-database-is-in-usethe-tail-of-the-log-for-the-database-has-not-been-backed-up/)

有什么建议么 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:13:18.807

不要`"`在初始字符串中使用，`''`而是使用。SQL 知道，如果您将两个并排放置`'`，您的意思`'`是出现在字符串中*（而不是结束一个字符串并开始另一个字符串。）*

```
SELECT sql = 'BACKUP DATABASE MyDatabase TO DISK='''+@file+''''; 
```

当然，这看起来很奇怪，但它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:13:32.203

```
SELECT sql = 'BACKUP DATABASE MyDatabase TO DISK='''+@file+'''' 
```

# c# - C# 处理 JSON 数据

> ID：11047708
> 
> 赞同：17
> 
> 时间：2012-06-15T09:09:48.163
> 
> 标签：c#, json, json.net

我有一个“简单”的场景：读取一些 JSON 文件，过滤或更改一些值，然后在不更改原始格式的情况下将生成的 json 写回。

所以例如改变这个：

```
{
  "type": "FeatureCollection",
  "crs": {
    "type": "EPSG",
    "properties": {
      "code": 28992
    }
  },
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              149886.192,
              374554.705
            ],
            [
              149728.583,
              374473.112
            ],
            [
              149725.476,
              374478.215
            ]
          ]
        ]
      }
    }
  ]
} 
```

进入这个：

```
{
  "type": "FeatureCollection",
  "crs": {
    "type": "EPSG",
    "properties": {
      "code": 28992
    }
  },
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": 
            [
              149886.192,
              374554.705
            ]
      }
    }
  ]
} 
```

我已经尝试过 newtonsoft 的 JSON.Net，但我唯一能找到的是：

*   读入对象
*   将对象写入json

但我错过了“更改对象”步骤。有什么提示吗？

*更新*

这是我到目前为止所尝试的：

```
JToken contourManifest = JObject.Parse(input);

JToken features = contourManifest.SelectToken("features");

for (int i = 0; i < features.Count(); i++)
{
    JToken geometry = features[i].SelectToken("geometry");
    JToken geoType = geometry.SelectToken("type");
    JToken coordinates = geometry.SelectToken("coordinates");

    geoType = "Point";
} 
```

但这只会改变 geoType 变量的值。我也希望改变几何*内部的值。*我需要参考，而不是副本！这可能吗？

*更新*

我目前不在这个项目中，但我想向回答者提供我的反馈。虽然我喜欢 Shahin 的简单性，但我更喜欢 LB 更正式的方法。我个人不喜欢使用字符串值作为功能代码，但这只是我。如果我能接受这两个答案：我愿意。我猜沙欣将不得不“仅仅”投赞成票。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T10:30:38.047

```
dynamic contourManifest = JObject.Parse(input);
foreach (var feature in contourManifest.features)
{
    feature.geometry.Replace(
            JObject.FromObject(
                        new { 
                            type = "Point", 
                            coordinates = feature.geometry.coordinates[0][0] 
                        }));
}

var newJson = contourManifest.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-07T04:21:25.793

我知道这已经得到解答，但我认为我有一个其他人可能会觉得有趣的解决方案。

我从客户那里收到了一个非常大的字符串化 JSON 对象，需要在 C# 中进行操作，然后以字符串形式返回给调用应用程序。

对对象的每个方面进行建模是没有意义的，我不打算操作的许多部分经常发生变化，而且每次调用者修改我的 JSON 对象的部分时，我不能期望我更新我的应用程序'不被要求操纵。所以我尝试了这个，它有点难看，但效果很好：

1.  创建一个类 ( `myClass`)，只代表**您**要操作的部分。
2.  使用 Newtonsoft，创建字符串化 JSON 对象的动态版本：

    ```
    dynamic jsonObj = JsonConvert.DeserializeObject(stringifiedJsonObject); 
    ```

3.  使用您在上面创建的类 ( ) 构建您的替换对象`myClass`。然后使用序列化该对象

    ```
    string stringPartialJsonObj = JsonConvert.SerializeObject(myClass); 
    ```

4.  接下来，（这就是诀窍）反序列化您刚刚创建的对象。现在它与您的来源相同。

    ```
    dynamic partialJsonObj = JsonConvert.Deserialize(stringPartialJsonObj); 
    ```

5.  想象一下（为了演示）在原始 Json 对象中，我需要修改`obj.ConfigurationData.Configuration1.Data`. 这就是我的做法：

    ```
    jsonObj.ConfigurationData.Configuration1.Data = partialJsonObj; 
    ```

6.  最后，我将重新序列化整个内容并将其发送回用户：

    ```
    return JsonConvert.SerializeObject(jsonObj); 
    ```

这有点笨拙，但它确实有效。我的生活故事:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:32:43.307

如果您不想使用任何代表您的 JSON 的实体，您可以使用 json.net 反序列化为 Dictionary 并修改字典，然后使用 Json.net 将其序列化为 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:13:55.623

1.  使用`Json.net`你必须创建代表你的实体`json`

2.  反序列`json`化成那些实体，比如`Json.Convert<FeatureCollection>(json)`

3.  更改实体

4.  将其转换回`json`.

# php - 关于 MVC 中标头的问题

> ID：11047711
> 
> 赞同：4
> 
> 时间：2012-06-15T09:09:53.873
> 
> 标签：php, model-view-controller, header, mime

在 MVC 框架中，负责定义标头的是控制器还是视图？

想象一下下载文件的情况，会渲染内容，所以我想控制器会设置适当的标题来下载，对吗？

另一点是我对 mime 有疑问……默认情况下，我们使用`text / html; charset = UTF-8,`另一个是设置要下载的文件的 mime 类型，这是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:25:18.830

所有的表示逻辑都是 View 实例的责任。即使您使用 MVP 模式，这也适用，其中视图是被动实体视图（“被动”并不意味着“哑”或“只是模板”）。

控制器应该只负责改变模型层和当前视图的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:24:25.307

1.  正确，控制器应该“决定”哪个是适当的标题
2.  Content-type 是您要更改的标头。

# c# - Orchard 模块中的 DevExpress MVCxGridView - 回调不起作用

> ID：11047712
> 
> 赞同：1
> 
> 时间：2012-06-15T09:09:58.757
> 
> 标签：c#, asp.net-mvc, devexpress, orchardcms

我们想将 Orchard 用于网站。我们正在为该 cms 创建一个自定义模块/小部件，并且在该模块中，我们希望使用 DevExpress 的 GridView 来显示数据。我们得到了大部分工作，但我们无法让回调工作。我的意思是浏览页面、排序行和移动列。

如果我们查看控制台，我们可以看到 javascript 和 ajax 回调从未执行，我们无法弄清楚为什么会这样。我在 DevExpress 站点和这个站点上找到了一些关于将 DevExpress 与 Orchard 一起使用的主题，但我在这些站点中找不到任何有用的内容（对我而言）。我们还注意到，我们的控制器的方法从未被调用，但不知道为什么不被调用。

我发现有时 jQuery 会导致 DevExpress 控件出现问题，所以我尝试删除所有 jQuery 脚本，但这并没有什么不同。有人还建议在 te gridview 周围放置一个回调面板，但这也不起作用。我尝试了更多的东西（我大多已经忘记了），但到目前为止没有任何效果。

我还在[Orchard 论坛](http://orchard.codeplex.com/discussions/359431)结束的[DevExpress 网站](http://www.devexpress.com/Support/Center/Question/Details/Q408486)上问了同样的问题，但我在那里没有得到任何答案，所以我想我会在这里试试运气。

我已经做了一个示例项目，以防你想看看我在做什么。该文件是 40MB，因为我使用示例数据库将整个 cms 添加到它，包括我们的模块。该模块名为 GridViewTest 你可以在这里找到源代码：http://www.obec.nl/download/Orchard-DevExpress.zip。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:47:45.837

我终于找到了解决办法。结果证明是一个非常简单的（像往常一样），我想在这里分享它，以防其他人想将 DevExpress 与 Orchard 一起使用：

在您的 Orchard 模块中，您必须创建一个 Routes.cs 文件（在模块的根目录中）。在那里你必须添加这个：

```
using System.Collections.Generic;
using System.Web.Mvc;
using System.Web.Routing;
using Orchard.Mvc.Routes;

namespace CentralStationDataView
{
    public class Routes : IRouteProvider
    {
        public void GetRoutes(ICollection<RouteDescriptor> routes)
        {
            foreach (var routeDescriptor in this.GetRoutes())
            {
                routes.Add(routeDescriptor);
            }
        }

        public IEnumerable<RouteDescriptor> GetRoutes()
        {
            return new[] 
            {
                new RouteDescriptor 
                {
                    Priority = 5,
                    Route = new Route(
                        "AreaName",
                        new RouteValueDictionary
                        {
                            { "area", "AreaName" },
                            { "controller", "ControllerName" },
                            { "action", "ActionName" }
                        },
                        new RouteValueDictionary(),
                        new RouteValueDictionary 
                        {
                            { "area", "AreaName" }
                        },
                        new MvcRouteHandler())
                }
            };
        }
    }
} 
```

您可以根据自己的喜好制作 AreaName，（据我所知）您如何称呼它并不重要。确保不要将“Controller”后缀添加到 ControllerName。然后，在您的 GridView 设置中，您必须添加以下内容： settings.CallbackRouteValues = new { area = "AreaName", Controller = "ControllerName", Action = "ViewDataPartial" }; 这些值都必须与 Routes.cs 文件中的值完全相同。“区域”属性对我来说很重要，我已经有了 Routes.cs 文件和所有内容，但我没有将区域属性添加到 CallbackRouteValues。

解决方案的第二部分是您必须仅使用其中的 GridView 来制作部分视图，并且我只强调其中的 GridView。所以没有脚本，没有额外的 html 元素，没有文本，什么都没有。

# java - Ehcache 低内存行为

> ID：11047714
> 
> 赞同：5
> 
> 时间：2012-06-15T09:10:03.737
> 
> 标签：java, hibernate, ehcache, out-of-memory

我正在使用 ehcache 1.2.3。由于缓存大小是根据“元素”指定的，因此缓存占用的内存可能会有很大差异（ehcache 与 hibernate 一起使用，并且还保存标准查询缓存，其中查询返回的结果集大小可能会有所不同）。我的问题是：如果 JVM 内存不足会发生什么。阅读 ehcache 的更新日志给我的印象是，最初它使用的是软引用，但由于 java 1.4 正在积极地清理它们，软引用最终被删除了。因此，如果缓存变得太大，我只会得到 OutOfMemoryError？Ehcache 中没有任何东西试图阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:45:23.940

你是对的，如果你想用 ehcache 创建一个 OOM，你可以这样做。你有没有看过尺寸选项，虽然像 maxEntriesLocalHeap / maxBytesLocalHeap。使用这些可以有效地防止缓存使用超过分配的内存量。

参见例如[http://ehcache.org/documentation/configuration/cache-size](http://ehcache.org/documentation/configuration/cache-size)

# .net - Windows Phone 7 中的 Environment.NewLine

> ID：11047717
> 
> 赞同：0
> 
> 时间：2012-06-15T09:10:15.517
> 
> 标签：.net, windows-phone-7

我使用在 xaml 中设置的文本框作为

```
 <TextBox AcceptsReturn="True" x:Name="Message" Grid.Column="0"></TextBox> 
```

如果我输入带有换行符的文本并获取它使用“\r”作为换行符的文本。我假设 Environment.NewLine 的命名是它会给我“\r”，但它会给出“\r\n”？是 Windows Phone 中的文本框是特殊的还是 Environment.NewLine 在 Windows Phone 中不起作用？

编辑：澄清我的问题。我打算通过用“ `<br/>`”替换换行符将我的文本转换为 html，并认为我可以使用

```
var myFormatedText = Message.Text.Replace(Environment.NewLine,"<br/>") 
```

但是 Environment.NewLine 给出了错误的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:13:33.213

我使用 StringBuilder 将 System.Environment.NewLine 附加到 Textbox 的 Text 属性，我没有遇到问题。您是否尝试过而不是使用 \n\r ？

# html - 如何检测一串html代码中的文件路径

> ID：11047722
> 
> 赞同：1
> 
> 时间：2012-06-15T09:10:29.010
> 
> 标签：html, detect, filepath

我需要使用 ajax 读取一串 HTML 代码并重构在字符串中找到的每个文件路径。

例如：

我需要检测“../../images/home.jpg”并将其更改为“http://www.mywebsite.com/report/images/home.jpg”。

我实际上正在做一个仪表板。使用 iframe 在仪表板中显示内容会降低性能。为了不使用 iframe，我打算读取目标 URL 的 html 代码字符串。但这里唯一的因素是，如果任何图像、javascript 或 css 的文件路径不是绝对路径，我的仪表板将无法显示。

请就如何检测一串 html 代码中的文件路径或是否有任何您知道的现有库提出您的想法。

这是我正在阅读的一个简单的 html 代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><title>
    Web Report: Customer Complains
</title><link rel="stylesheet" type="text/css" href="../../../css/Concept1.css" /></head>
<style type="text/css">

</style>
<body>
        <div class="SectionTitleContainer1">
            <div style="text-align: left;" class="SectionTitle">
                Customer Complaints
            </div>
        </div>
    <table cellspacing="0" cellpadding="5" style="width: 100%;" border="0">

        <tr>
            <td width="1%" align="left">
                <a>
                Refund 

                    </a>
            </td>
            <td width="1%" style="text-align: right">139</td>
            <td align="left" style="">
                <img src="../../../images/tile-horiz-bar.png" style="height: 10px; width: 100px" />
            </td>
        </tr>

        <tr>
            <td width="1%" align="left">
                <a>
                Appointment Rescheduled/Delayed 

                    </a>
            </td>
            <td width="1%" style="text-align: right">96</td>
            <td align="left" style="">
                <img src="../../../images/tile-horiz-bar.png" style="height: 10px; width: 69px" />
            </td>
        </tr>                
    </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T01:35:58.933

经过长时间的探索，我了解到如果需要两个不同的系统显示相同的 UI，我们应该将图像文件（或任何其他脚本文件）放在服务器内的公共目录中。应授予 Web 应用程序访问服务器本地目录中文件的适当权限。保存图像文件的目录不应受到保护，也不应向公众公开（如有必要）。

# java - jsf页面上的颜色选择器

> ID：11047723
> 
> 赞同：0
> 
> 时间：2012-06-15T09:10:29.223
> 
> 标签：java, jsf, primefaces

我的页面上需要颜色选择器。首先，我放置了 Primefaces 的颜色选择器，但是当我尝试使用它时，我收到“IllegalArgumentException：text/xml 不是受支持的 mime 类型”。这可能是因为我使用了自己的 jquery 库，它没有颜色选择器元素，并且它覆盖了 Primefaces 的元素。

所以，我尝试了其他方式。我使用“jscolor”库将任何输入字段转换为颜色选择器。我得到了组件：

```
<h:inputText value="#{searchManagedBean.selectedColor}" class="color"/> 
```

它工作得很好，但是当我提交表单时，支持 bean 中的值不会更新。在支持 bean 中，我有这个字段的 getter 和 setter，所以我不知道这个问题的原因是什么。

您能帮我解决其中一个问题，或者提供另一种解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:29:35.070

我找到了解决方案。如果我更新其他元素中的值，则支持 bean 中的值也会更新。所以，现在我有这样的事情：

```
<h:inputText value="#{searchManagedBean.selectedColor}" class="color">
    <p:ajax event="change" update="outcolor"/>
</h:inputText>
<h:outputText style="display: none" id="outcolor" value="#searchManagedBean.selectedColor}"/> 
```

对我来说，这是非常奇怪的行为。我不知道为什么它有效，但它有效！

# html - 文档类型 html 5 上的 w3c 验证错误

> ID：11047725
> 
> 赞同：1
> 
> 时间：2012-06-15T09:10:40.710
> 
> 标签：html, w3c

我正在为网页使用 html 5。[当我在http://validator.w3.org/check](http://validator.w3.org/check)中验证我的网页时，它显示了以下错误。

```
Line 1, Column 10: delimiter ">" invalid: only name, "#IMPLIED" and parameter separators are allowed

<!DOCTYPE> 
```

如果我改变它，它会告诉我很多错误。我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:14:50.233

它应该是`<!doctype html>`

阅读此处了解如何在 W3C Validator 上验证 HTML5 页面 - [http://www.werockyourweb.com/html5-validator](http://www.werockyourweb.com/html5-validator)

# javascript - 使用原型进行正则表达式验证？

> ID：11047730
> 
> 赞同：0
> 
> 时间：2012-06-15T09:10:50.477
> 
> 标签：javascript, prototypejs, validation

我想验证表单字段（文本）输入。它应该只是 5 到 10 之间的一个数字。我知道有 validate-number 类，但这不会检查 numbe 范围。有没有办法用原型做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:20:58.990

我发现这个基于原型的验证脚本。还支持数字范围。 [原型验证脚本](http://tetlaw.id.au/view/javascript/really-easy-field-validation)

# c# - OptionWriteEmptyNodes 使用 HtmlAgilityPack 中断 XML 声明

> ID：11047739
> 
> 赞同：0
> 
> 时间：2012-06-15T09:11:20.837
> 
> 标签：c#, html-agility-pack, non-well-formed, xml-declaration, end-tag

这是我拥有的超级简单的代码：

```
HtmlDocument htmlDoc = new HtmlDocument();
htmlDoc.OptionWriteEmptyNodes = true;
htmlDoc.Load("sourcefilepath");
htmlDoc.Save("destfilepath", Encoding.UTF8); 
```

输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/>
    <link rel="stylesheet" href="main.css" type="text/css"/>
  </head>
  <body>lots of text here, obviously not relevant to this problem</body>
</html> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" />
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <link rel="stylesheet" href="main.css" type="text/css" />
  </head>
  <body>lots of text here, obviously not relevant to this problem</body>
</html> 
```

您可以看到在第一行有一个错误： /> 而不是 ?> 如果我将 OptionWriteEmptyNodes 设置为 true 值，则会发生这种情况。它已设置为 true，否则元/链接标签（以及文档正文中的其他一些标签）将不会被关闭。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:56:26.563

似乎是一个错误。您应该将其报告给[http://htmlagilitypack.codeplex.com](http://htmlagilitypack.codeplex.com)。

不过，您可以像这样解决该错误：

```
HtmlNode.ElementsFlags.Remove("meta");
HtmlNode.ElementsFlags.Remove("link");
HtmlDocument htmlDoc = new HtmlDocument();
htmlDoc.Load("sourcefilepath");
htmlDoc.Save("destfilepath", Encoding.UTF8); 
```

只需从`meta`&`link`标记中删除指示 Html Agility Pack 不要自动关闭它们的标志，并且不要设置`OptionWriteEmptyNodes`为`true`.

它将产生这个（注意这略有不同）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"></meta>
    <link rel="stylesheet" href="main.css" type="text/css"></link>
  </head>
  <body>lots of text here, obviously not relevant to this problem</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:39:18.710

设法做另一种解决这个问题的方法。在我的情况下，这比上面的情况要好一些。基本上我们正在替换 DocumentNode 的第一个子节点，即 xml 声明。（请注意，输入必须包含 xml 声明，在我的例子中是 100%）

```
HtmlDocument htmlDoc = new HtmlDocument();
htmlDoc.OptionWriteEmptyNodes = true;
htmlDoc.Load("sourcepath");

var newNodeStr = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
var newNode = HtmlNode.CreateNode(newNodeStr);

htmlDoc.DocumentNode.ReplaceChild(newNode, htmlDoc.DocumentNode.FirstChild);

htmlDoc.Save("destpath", Encoding.UTF8); 
```

请注意，Simon 的解决方法也有效，因此请选择更适合您的场景的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T23:11:41.943

我的页面中也有`<br/>`标签，并`htmlDoc.OptionWriteEmptyNodes = true;`通过将它们替换为`<br>`. 我找到了一种类似于 Alex 的答案的方法，但更通用一些，以便保留大部分原始值，并且不依赖于页面中始终存在 xml 标记：

```
HtmlDocument doc= new HtmlDocument();
doc.OptionWriteEmptyNodes = true;
doc.Load("pathToFile");
if (doc.DocumentNode.FirstChild.OriginalName.Equals("?xml"))
{
    var fixedOuterHtml = doc.DocumentNode.FirstChild.OuterHtml.Replace('/', '?');
    var newNode = HtmlNode.CreateNode(fixedOuterHtml);
    doc.DocumentNode.ReplaceChild(newNode, doc.DocumentNode.FirstChild);
} 
```

# codeigniter - HTML 净化器 Codeigniter

> ID：11047753
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:12:07.367
> 
> 标签：codeigniter, htmlpurifier

我发现有几篇帖子指出 xss_clean 不足以清理用户输入。他们中的许多人建议在 codeigniter 中使用 htmlpurifier。

我不知道 htmlpurifier 究竟做了什么以及它是如何做的。如何实现 html 净化器。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:06:14.813

xss_clean 实际上还不错，只是不要指望它是“我使用 xss_clean，现在我的整个网站是安全的”意义上的灵丹妙药。您仍然必须验证输入和转义输出。简而言之：您必须控制人们可以在您的网站中输入的内容，并且您不应该信任数据库中的任何内容，因此您在使用或显示数据之前对其进行转义。如果您使用 xss_clean 和表单验证来清理输入，并在对输出进行任何操作或显示之前转义输出，那么您应该没问题。

好读物： [Codeigniter xss_clean dilemma](https://stackoverflow.com/questions/10925720/codeigniter-xss-clean-dilemma) 和 [http://codeigniter.com/forums/viewthread/188698](http://codeigniter.com/forums/viewthread/188698)

# java - 获取与 int 值关联的枚举

> ID：11047756
> 
> 赞同：93
> 
> 时间：2012-06-15T09:12:17.213
> 
> 标签：java, enums

以前，我将 LegNo 枚举简单地定义为：

```
NO_LEG, LEG_ONE, LEG_TWO 
```

通过调用`return LegNo.values()[i];`，我能够获得与每个枚举关联的值。

但是现在我决定我希望`LegNo`枚举`NO_LEG`是 int -1 而不是 0 所以我决定使用私有构造函数来初始化并设置它的 int 值

```
NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

private LegNo(final int leg) { legNo = leg; } 
```

现在唯一的事情是，因为我是这样做的，所以该`values()`方法不适用于`NO_LEG`枚举。如何获取与 int 关联的枚举？除了使用 case switch 语句或 if-elseif-elseif 之外，还有其他有效的方法吗？

我可以看到很多与从枚举中获取 int 值有关的 SO 问题，但我追求的是相反的。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-06-15T09:15:18.633

## 编辑 2018 年 8 月

今天我将按如下方式实现

```
public enum LegNo {
    NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

    private final int value;

    LegNo(int value) {
        this.value = value;
    }

    public static Optional<LegNo> valueOf(int value) {
        return Arrays.stream(values())
            .filter(legNo -> legNo.value == value)
            .findFirst();
    }
} 
```

* * *

您必须在枚举中维护一个映射。

```
public enum LegNo {
    NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

    private int legNo;

    private static Map<Integer, LegNo> map = new HashMap<Integer, LegNo>();

    static {
        for (LegNo legEnum : LegNo.values()) {
            map.put(legEnum.legNo, legEnum);
        }
    }

    private LegNo(final int leg) { legNo = leg; }

    public static LegNo valueOf(int legNo) {
        return map.get(legNo);
    }
} 
```

静态块只会被调用一次，所以这里实际上没有性能问题。

编辑：将该方法重命名为，`valueOf`因为它与其他 Java 类更加内联。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-15T10:02:45.477

您还可以在枚举中包含一个静态方法，该方法遍历所有成员并返回正确的成员。

```
public enum LegNo {
   NO_LEG(-1),
   LEG_ONE(1),
   LEG_TWO(2);

   private int legIndex;

   private LegNo(int legIndex) { this.legIndex = legIndex; }

   public static LegNo getLeg(int legIndex) {
      for (LegNo l : LegNo.values()) {
          if (l.legIndex == legIndex) return l;
      }
      throw new IllegalArgumentException("Leg not found. Amputated?");
   }
} 
```

现在，如果您想通过整数获取 Enum 值，您只需使用：

```
int myLegIndex = 1; //expected : LEG_ONE
LegNo myLeg = LegNo.getLeg(myLegIndex); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-02-20T22:03:51.473

[adarshr 的答案](https://stackoverflow.com/a/11047810/629762)适用于 Java 8：

```
import static java.util.Arrays.stream;
import static java.util.stream.Collectors.toMap;

import java.util.Map;

public enum LegNo {
    NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

    private final int legNo;

    private final static Map<Integer, LegNo> map =
            stream(LegNo.values()).collect(toMap(leg -> leg.legNo, leg -> leg));

    private LegNo(final int leg) {
        legNo = leg;
    }

    public static LegNo valueOf(int legNo) {
        return map.get(legNo);
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-03-18T15:36:04.880

您还可以通过在枚举 LegNo 上调用 values() 方法来访问与给定整数值对应的枚举值。它返回 LegNo 枚举的字段： `LegNo.values()[0]; //returns LEG_NO LegNo.values()[1]; //returns LEG_ONE LegNo.values()[2]; //returns LEG_TWO`

不正是他正在寻找的东西，但非常接近并且确实非常简单。（虽然主题已经死了，但它可能对其他人有用。）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-21T11:43:36.963

具有默认值的 Java 8 方式：

```
public enum LegNo {
    NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

    private final int legNo;

    LegNo(int legNo) {
        this.legNo = legNo;
    }

    public static LegNo find(int legNo, Supplier<? extends LegNo> byDef) {
        return Arrays.asList(LegNo.values()).stream()
                .filter(e -> e.legNo == legNo).findFirst().orElseGet(byDef);
    }
} 
```

打电话：

```
LegNo res = LegNo.find(0, () -> LegNo.NO_LEG); 
```

或有例外：

```
LegNo res = LegNo.find(0, () -> {
    throw new RuntimeException("No found");
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-10T11:40:12.233

```
public enum LegNo {

  NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

  private final int code;

  LegNo(int code) {
    this.code = code;
    ReverseStorage.reverseMap.put(code, this);
  }

  public static Optional<LegNo> getByCode(int code) {
    return Optional.ofNullable(ReverseStorage.reverseMap.get(code));
  }

  private static final class ReverseStorage {
    private static final Map<Integer, LegNo> reverseMap = new LinkedHashMap<>();
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T09:21:31.587

由于您的枚举仅包含 3 个元素，因此最快的方法是使用一系列`if else`，就像您建议的那样。

编辑： adarshr 提供的答案更适合一般情况，其中有很多枚举值，但我认为这对您的问题来说是过度的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-16T04:07:53.100

```
public enum LegNo {
    NO_LEG(-1), LEG_ONE(1), LEG_TWO(2);

    private int legNo;

    private LegNo(int leg) { legNo = leg; }

    public static LegNo valueOf(int legNo) {
        for (LegNo leg : LegNo.values()) {
            if (leg.legNo == legNo) return leg;
        }   
    }
}

assert LegNo.valueOf(2) == LegNo.LEG_TWO
assert LegNo.valueOf(3) == null 
```

# grails - Grails 本地化，数字输入

> ID：11047757
> 
> 赞同：0
> 
> 时间：2012-06-15T09:12:17.807
> 
> 标签：grails, localization, number-formatting

我有一个在德语本地化机器上运行的 Grails Web 应用程序。

Grails 如何确定要使用的语言？从网络浏览器？从系统设置？这是否可以通过更改用于 ui 的语言来改变（例如，使用这个： http: [//grails.org/plugin/lang-selector](http://grails.org/plugin/lang-selector)）？如果不是，它是如何改变的？

原因是（很少）我有用户通过（英语）终端服务器访问 webapp。数字输入（逗号，点，...）有一些奇怪的行为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:21:34.177

来自[http://grails.org/doc/latest/guide/i18n.html](http://grails.org/doc/latest/guide/i18n.html)

> 默认情况下，用户区域设置是从传入的 Accept-Language 标头中检测到的。但是，您可以通过简单地将名为 lang 的参数作为请求参数传递给 Grails 来为用户提供切换语言环境的能力：
> 
> /book/list?lang=es
> 
> Grails 将自动切换用户的语言环境并将其存储在 cookie 中，以便后续请求将具有新的标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:53:13.400

您还可以按如下方式配置默认语言环境。地方

```
beans = {
    localeResolver(SessionLocaleResolver) {
        defaultLocale = new Locale("ru", "RU")
        java.util.Locale.setDefault(defaultLocale)
    }
} 
```

在 resources.groovvy 文件中

# javascript - 仅匹配给定字符串中单词序列中的字符

> ID：11047758
> 
> 赞同：1
> 
> 时间：2012-06-15T09:12:19.003
> 
> 标签：javascript, regex, string-matching, charsequence

我试图通过给出一个特定的字符串来找到一个单词的最接近匹配，例如：

所以我会：

```
"jonston" x "john"  => "jo" //only "jo" is the part that matches
"joshua" x "john" => "jo" 
"mark" x "marta"    => "mar" 
```

如您所见，我只想检索序列匹配中的字符，这就是为什么`joshua`并且`john`只有`jo`在公共序列中而不是`joh`因为两者都有字母`h`

我已经通过使用以下方法尝试使用正则表达式：

```
"john".match(/["joshua"]+/) //=> outputs ["joh"] and not ["jo"] 
```

有什么办法可以只匹配匹配的第一个字符吗？

我将使用 javascript 来实现

我希望这是有道理的

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:18:57.993

```
var a = "john";
var b = "joshua";
var x = "";

for (var i = 0; i < a.length; i++) {
    if (x == "" && i > 0) break;
    else if (a[i] == b[i]) x += a[i];
    else if (x != "") break;
}

console.log(x); 
```

**演示：http:** [//jsfiddle.net/jMuDm/](http://jsfiddle.net/jMuDm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:46:07.917

另一个解决方案：

```
if(typeof String.prototype.commonFirstChars !== 'function') {
    String.prototype.commonFirstChars = function(s) {
        var common = "";
        for(var i=0; i<this.length; i++) {
            if(this[i] !== s[i]) {
                return common;
            }
            common += this[i];           
        }
    };
} 
```

你可以像这样使用它：

```
var commonFirstChars = "john".commonFirstChars("joshua");
// "john".commonFirstChars("joshua") === "joshua".commonFirstChars("john") 
```

这将返回：

`jo`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:55:47.377

```
initLCS = function(a, b) {
    for (var i = 0; i < a.length && a[i] == b[i]; i++);
    return a.substr(0, i);
}

initLCS("jonston", "john") // jo
initLCS("jonston", "j111") // j
initLCS("xx", "yy") // "" 
```

如果你坚持使用正则表达式，它是这样的：

```
initLCS = function(a, b) {

    function makeRe(x) {
        return x.length ? "(" + x.shift() + makeRe(x) + ")?" : "";
    }

    var re = new RegExp('^' + makeRe(b.split("")), "g");
    return a.match(re)[0];
} 
```

这会`/^(j(o(h(n)?)?)?)?/g`从第二个字符串创建一个表达式，并将其应用于第一个字符串。并不是说它有多大意义，只是为了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:18:18.320

你不能用正则表达式真正做到这一点。为什么不直接遍历两个字符串并比较索引？您可以选择字符，直到您在同一索引处找到具有不同值的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:40:54.730

我会在这样的递归函数中执行此操作：

**编辑：**更新示例以使其更具可读性。

```
var testWords = [
    ['ted', 'terminator'],
    ['joe', 'john'],
    ['foo', 'bar']
];

var matches = testWords.map(function(wordPair) {
    return (function matchChars(word1, word2, matches) {
        if (word1[0] !== word2[0]) { 
            return [wordPair[0], wordPair[1], matches];
        }

        matches = matches || '';
        matches += word1[0];
        return matchChars(word1.slice(1), word2.slice(1), matches);
    }(wordPair[0], wordPair[1]));
});

console.log(matches.map(function(match) { return match.join(', '); }).join('\n'));
​ 
```

**小提琴（更新）：http:** [//jsfiddle.net/VU5QT/2/](http://jsfiddle.net/VU5QT/2/)

# javascript - jQuery .remove() 在 IE9 中返回错误

> ID：11047761
> 
> 赞同：0
> 
> 时间：2012-06-15T09:12:29.067
> 
> 标签：javascript, jquery, cross-browser, internet-explorer-9

我在 IE9 中运行 Firebug Lite 测试我的网站，由于某种原因，当我尝试运行一个简单的命令来删除一个 div 时，它返回错误“TypeError：Object expected”。这是我正在运行的内容：

```
$("#drag-hoverbox_you").remove(); 
```

这在 Firefox 和 Chrome 中完美运行。一个 id 为“drag-hoverbox_you”的 div 肯定存在...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:33:42.680

为避免再次遭到反对票轰炸，我首先使用 IE9 对此进行了测试。

将此添加到 CSS

```
.iefix {
display:none;
} 
```

并以这种方式删除您的 drop 功能

```
$("#drag-hoverbox_you").addClass("iefix").remove(); 
```

像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:10:05.053

问题是我使用的是旧版本的 jQuery-UI 来使我的窗口可拖动。正在返回错误，因为我试图删除的可拖动 DIV 中有一个 flash 对象。较新版本的 jQuery-UI 甚至不允许您使包含 Flash 对象的 DIV 可拖动。所以我现在可以删除 div 容器，但我无法使它们可拖动。感谢大家的帮助！

# c# - ListPicker Set Selected Index 在异步调用后不会刷新 WP7 中的 UI

> ID：11047772
> 
> 赞同：1
> 
> 时间：2012-06-15T09:13:10.973
> 
> 标签：c#, silverlight, windows-phone-7, xaml, silverlight-toolkit

我的 windows phone 7 中有两个 silverlight listpicker 控件。

这是我的 XAML。

// 国家名称的第一个列表选择器

```
 <toolkit:ListPicker x:Name="listPickerCountryLogin" SelectionChanged="listPickerCountryLogin_SelectionChanged" Height="72" HorizontalAlignment="Left" Margin="14,43,0,0" VerticalAlignment="Top" Width="436" FullModeHeader="Select Country" Background="White" BorderBrush="White" Foreground="{StaticResource listPickerBrush}">
                            <toolkit:ListPicker.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Country}" Width="250" />
                                    </StackPanel>
                                </DataTemplate>
                            </toolkit:ListPicker.ItemTemplate>
                            <toolkit:ListPicker.FullModeItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Country}" Width="300" Margin="0,0,0,20" FontSize="24"/>
                                    </StackPanel>
                                </DataTemplate>
                            </toolkit:ListPicker.FullModeItemTemplate>
                        </toolkit:ListPicker>

// and here is my second listpciker for country codes

                    <toolkit:ListPicker x:Name="listPickerCCLogin" SelectionChanged="listPickerCCLogin_SelectionChanged" Height="56.3" Width="80" HorizontalAlignment="Left" Margin="14,100,0,0"  VerticalAlignment="Top" FullModeHeader="Select Country" Background="White" BorderBrush="White" Foreground="{StaticResource listPickerBrush}">
                        <toolkit:ListPicker.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Name="lblCC" Text="{Binding CC}" Width="235" />
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ListPicker.ItemTemplate>
                        <toolkit:ListPicker.FullModeItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock  Text="{Binding Country}" Width="300" Margin="0,0,0,20" FontSize="24"/>
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ListPicker.FullModeItemTemplate>
                    </toolkit:ListPicker> 
```

现在的场景是如果用户选择国家名称，那么它将自动设置该国家的国家代码，反之亦然。

对于这件事，我对两个列表都使用了 listpicker 选择更改事件。

这是我的 C# 代码。

首先，我用这种方法将我的列表选择器与国家集合绑定。

```
/// <summary>
        /// Binding All Listpickers With Data
        /// </summary>
        protected void BindListPickers()
        {
            CountryListParser oCountryList = new CountryListParser();
            this.listPickerCountryLogin.ItemsSource = oCountryList.GetAllCountries();
            this.listPickerCCLogin.ItemsSource = oCountryList.GetAllCountries();
        } 
```

这是列表选择器选择更改事件。

```
 /// <summary>
        /// Country List Picker Of Login Selection Change Event
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void listPickerCountryLogin_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (listPickerCountryLogin.SelectedIndex >= 0 && listPickerCountryLogin.SelectedIndex < listPickerCCLogin.Items.Count)
                listPickerCCLogin.SelectedIndex = listPickerCountryLogin.SelectedIndex;
        }

/// <summary>
/// Country Code List Picker Of Login Selection Change Event
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void listPickerCCLogin_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (listPickerCCLogin.SelectedIndex >= 0 && listPickerCCLogin.SelectedIndex < listPickerCountryLogin.Items.Count)
        listPickerCountryLogin.SelectedIndex = listPickerCCLogin.SelectedIndex;
} 
```

我的代码仍然可以正常工作，没有任何错误。现在到了我被卡住的棘手和困难的部分。我正在调用一项 Google 服务并传递用户的经纬度，它返回我的用户国家/地区，我想将该国家/地区设置为我的列表选择器。

这是我的代码

```
protected void OnLocationServiceResponseRecieved(string response)
        {
            JObject o = JObject.Parse(response);
            string Country = (string)o["countryname"];

            Dispatcher.BeginInvoke(new System.Action(delegate()
            {
                CountryListParser oCountryList = new CountryListParser();
                int countrytIndex = oCountryList.CountryIndexByName(Country);
                this.listPickerCountryLogin.SelectedIndex = countrytIndex;
                this.listPickerCCLogin.SelectedIndex = countrytIndex;
            }));
        } 
```

仍然没有例外，一切顺利，它根据我的国家/地区设置我的列表选择器选择的索引，但它不会更新我的列表选择器的 UI 并将它们设为空白，或者您可以说为空。但是当我在后端点击我的列表选择器时，我想要的国家已经设置好了。但未更新或卡在 UI 线程中。

```
So problem is UI is not updated properly 
```

=== 更新 ===

[我的问题重现的示例代码](http://yaariyan.net/sample.rar)

当索引高于 38 时，我的发现在我的附加项目中以选定的索引方法。它将变为空白。我不知道为什么它的行为如此..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:20:27.033

我已经实现了你的整个代码（除了我用其他服务替换的谷歌服务），它运行良好，UI 更新正常。我没有在代码中看到任何问题。[在这里](http://pastebin.com/5AYj43F6)检查我的代码

所以。我建议您交叉检查您的“countryIndex”。创建另一个普通文本块并将这个 countryIndex 分配给该文本块及其值。

还将我的代码与您的代码进行比较，以便您获得一些线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:00:13.957

在我的全景应用程序中使用 ListPicker 时，我也遇到了类似的问题。

我有一个从 0 到 50 的项目列表。

```
<toolkit:ListPicker x:Name="MyListPicker"  ItemsSource="{Binding MyList}" Width="174" Margin="10, 10, 0, 0" ItemTemplate="{StaticResource MyTemplate}">
</toolkit:ListPicker>

<DataTemplate x:Name="MyTemplate">
        <TextBlock Text="{Binding}" FontFamily="Calibri" FontSize="50" />
    </DataTemplate> 
```

而且我注意到对于大于 38 或 40 的索引（就像您所做的那样），选择列表项后 UI 不会更新。它只是显示一个空白的 UI。

我也知道他们建议不要将 ListPicker 用于大型列表，但我猜 51 项是可以的（或者可能不是？）

因此，我相信这可能是 ListPicker 本身内部的一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:25:16.220

经过3天的努力，我已经解决了这个问题。早些时候我认为这是我的 UI 线程中的问题，它没有得到刷新。当我假设那是问题时，我专注于那部分。但是在第 3 天，我注意到这在列表选择器控件中可能是错误的。我研究的是codeplex。有些人也面临这个问题。但我如何纠正让我告诉你。我做了四个步骤

1.  我从我的项目中删除了 silverlight 工具包的所有引用并清理了解决方案。

2.  我从 pc 安装了 silverlight 工具包，然后安装了 2011 年 11 月的稳定版本并重新启动了 PC，并从这个新安装中引用了我的项目中的 dll。

3.  我也用我的 listpicker 控件绑定了选定的索引。

    ```
     <toolkit:ListPicker x:Name="listPickerCountryLogin" SelectionChanged="listPickerCountryLogin_SelectionChanged" Height="72" HorizontalAlignment="Left" Margin="14,43,0,0" VerticalAlignment="Top" Width="436" FullModeHeader="Select Country" Background="White" BorderBrush="White" Foreground="{StaticResource listPickerBrush}">
                    <toolkit:ListPicker.Resources>
                        <Style TargetType="toolkit:ListPickerItem">
                            <Setter Property="Padding" Value="8 6"/>
                        </Style>
                    </toolkit:ListPicker.Resources>
                    <toolkit:ListPicker.Style>
                        <StaticResource ResourceKey="ListPickerStyle"/>
                    </toolkit:ListPicker.Style>
                    <toolkit:ListPicker.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Country}" Width="250" />
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:ListPicker.ItemTemplate>
                    <toolkit:ListPicker.FullModeItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Country}" Width="300" Margin="0,0,0,20" FontSize="24"/>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:ListPicker.FullModeItemTemplate>
                </toolkit:ListPicker> 
    ```

# apache-flex - 将参数传递给自定义 CellRender

> ID：11047777
> 
> 赞同：0
> 
> 时间：2012-06-15T09:13:17.607
> 
> 标签：apache-flex, flex4, blackberry-playbook

我试图通过使用一个名为`TwoLabelCell`扩展的类创建两个标签标签字段来创建一个简单的两个标签列表，`AlternatingCellRenderer`如下所示：

```
package views
{
    import flash.text.TextFormat;

    import qnx.fuse.ui.listClasses.AlternatingCellRenderer;
    import qnx.fuse.ui.text.Label;

    public class TwoLabelCell extends AlternatingCellRenderer {
        private var description:Label;
        private var labelFormat:TextFormat;
        private var text:String;

        public function TwoLabelCell(labelText:String) {
            this.text = labelText;
        }

        override protected function init():void {
            super.init();

            labelFormat = new TextFormat();
            labelFormat.color = 0x777777;
            labelFormat.size = 17;

            description = new Label();
            description.x = 17;
            description.y = 33;
            description.format = labelFormat;
            description.text = text;

            this.addChild(description);
        }
    }
} 
```

请记住，当时这只是一个测试，所以我只使用一个标签（在我弄清楚这个问题后，我将添加另一个并使用相同的逻辑）。这里的主要思想是，当我调用它时，它将设置`text`变量，该变量将用于在创建列表时更改列表中标签的文本。现在，这里是主应用程序文件：

```
package {
    import flash.display.Sprite;

    import qnx.fuse.ui.events.ListEvent;
    import qnx.fuse.ui.listClasses.List;
    import qnx.fuse.ui.listClasses.ListSelectionMode;
    import qnx.fuse.ui.listClasses.ScrollDirection;
    import qnx.ui.data.DataProvider;

    import views.TwoLabelCell;

    [SWF(height="600", width="1024", frameRate="30", backgroundColor="#FFFFFF")]
    public class PackTrack extends Sprite {
        private var packList:List;

        public function PackTrack() {
            super();

            initializeUI();
        }

        private function initializeUI():void {
            packList = new List();
            packList.setPosition(0, 0);
            packList.width = 310;
            packList.height = 400;
            packList.rowHeight = 50;
            packList.selectionMode = ListSelectionMode.SINGLE;
            packList.scrollDirection = ScrollDirection.VERTICAL;

            var arrMonth:Array=[];
            arrMonth.push({label: "January"});
            arrMonth.push({label: "February"});
            arrMonth.push({label: "March"});
            arrMonth.push({label: "April"});
            arrMonth.push({label: "May"});
            arrMonth.push({label: "June"});
            arrMonth.push({label: "July"});
            arrMonth.push({label: "August"});
            arrMonth.push({label: "September"});
            arrMonth.push({label: "October"});
            arrMonth.push({label: "November"});
            arrMonth.push({label: "December"});

            packList.dataProvider = new DataProvider(arrMonth);
            packList.cellRenderer = TwoLabelCell("Testing Label");

            packList.addEventListener(ListEvent.ITEM_CLICKED, onListClick);

            this.addChild(packList);
        }

        private function onListClick(event:ListEvent):void {
            trace("Item clicked: " + event.data.label);
            trace("Index clicked: " + event.index);
        }
    }
} 
```

当我尝试运行时，我收到此错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert "Testing Label" to views.TwoLabelCell.
    at PackTrack/initializeUI()[/Users/Nathan/Documents/Adobe Flash Builder 4.6/AIRTest/src/PackTrack.as:46]
    at PackTrack()[/Users/Nathan/Documents/Adobe Flash Builder 4.6/AIRTest/src/PackTrack.as:19] 
```

关于如何解决这个问题的任何想法？

*PS：我正在学习 Flex（来自 Java）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:52:29.080

直接回答你的问题：你得到一个类转换错误，因为你试图将一个 String 转换为一个 TwoLabelCell at `packList.cellRenderer = TwoLabelCell("Testing Label")`。所以我猜你只是忘记了`new`关键字。

我可以告诉您来自 Java 背景：该代码看起来非常 Swingy ;)
所以我想我会向您展示如何以 Flex 方式执行此操作。我不知道您使用的这些 Blackberry 类，所以我必须坚持使用普通的旧 Flex 来演示它。

创建具有可绑定属性的模型类：

```
public class Pack {     
    [Bindable] public var label:String;
    [Bindable] public var description:String;       
} 
```

现在创建一个 ItemRenderer 类来呈现列表中的数据，我们称之为`PackRenderer.mxml`：

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                autoDrawBackground="true"
                height="50">

    <s:layout>
        <s:HorizontalLayout verticalAlign="middle" />
    </s:layout>

    <s:Label id="labelDisplay" />
    <s:Label text="{data.description}" color="0x777777" fontSize="17" />

</s:ItemRenderer> 
```

请注意，我将其设置`height`为与您使用`50`的效果相同。`rowHeight`ItemRenderer的`data`属性是它将表示的 Pack 模型实例。
带有 id 的标签`labelDisplay`将自动获取Flex 框架`data.label`分配给其属性的值。`text`对于另一个标签，我使用数据绑定 ( `{}`) 将模型`description`属性绑定到标签的`text`属性。

使用此 itemrenderer 创建列表：

```
<fx:Script>
    <![CDATA[
        protected function handleItemSelected():void {
            trace("Item selected: " + list.selectedItem.label);
            trace("Index selected: " + list.selectedIndex);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <s:ArrayCollection id="dp">
        <so:Pack label="Item A" description="description A" />
        <so:Pack label="Item B" description="description B" />
        <so:Pack label="Item C" description="description C" />
    </s:ArrayCollection>
</fx:Declarations>

<s:List id="list" dataProvider="{dp}" width="310" height="400"
        itemRenderer="net.riastar.PackItemRenderer"
        change="handleItemSelected()" /> 
```

我在这里创建了内联数据，但当然这个 ArrayCollection 也可以来自服务器。
List的布局默认是VerticalLayout，所以我就不定义了。
Spark List 没有`itemClick`事件处理程序，因此我使用`change`处理程序，只要列表的选定索引/项目发生更改，就会执行该处理程序。

# sql - 如何将 SQL 连接语法应用于旧式连接

> ID：11047791
> 
> 赞同：1
> 
> 时间：2012-06-15T09:14:02.900
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

当我将遗留连接语法重构为 ANSI 连接语法时遇到问题，因为我们数据库中的大多数过程都使用遗留连接。这是我需要更改它以使用 SQL 'JOIN' 语法而不是普通的旧版连接的代码。有人可以建议我怎么做吗？

```
 select 
          a.userkey, 
          a.username,
          c.monthd ,
          b.currencykey 
     from 
         #users a,
         #invoicedata b,
          #revdate c
     where 
         (a.userkey >= b.userkey or a.userkey <= b.userkey) 
          and b.idate between c.startdate and c.enddate
      group by 
           a.userkey,
           a.username,
           c.monthd,
           b.currencykey

       order by c.id,a.username,b.currencykey 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:19:59.557

这部分`(a.userkey >= b.userkey or a.userkey <= b.userkey)`似乎不正确，您不能`order by`列（至少没有`agregate`函数）不在`group by`.

所以，可能是这样的：

```
select 
      a.userkey, 
      a.username,
      c.monthd ,
      b.currencykey 
 from #users a
 inner join #invoicedata b on a.userkey = b.userkey
 inner join #revdate c on b.idate between c.startdate and c.enddate
 group by 
      a.userkey,
      a.username,
      c.monthd,
      b.currencykey 
```

我也用内部连接替换了嵌套连接，但这不是必需的:)

* * *

另一方面，您可能需要交叉连接：

```
select 
      a.userkey, 
      a.username,
      c.monthd ,
      b.currencykey 
 from #users a
 cross join #invoicedata b
 inner join #revdate c on b.idate between c.startdate and c.enddate
 group by 
      a.userkey,
      a.username,
      c.monthd,
      b.currencykey 
```

# forms - Symfony 1.4：检查表单类中是否有错误

> ID：11047792
> 
> 赞同：2
> 
> 时间：2012-06-15T09:14:16.093
> 
> 标签：forms, validation, symfony1, symfony-1.4

Symfony 1.4 中是否有一种简单的方法可以知道提交的表单在表单类中是否有任何错误？我熟悉`$form['some_field']->hasErrors()`for 模板，但在这种情况下，我只想在表单与标准验证器没有任何错误的情况下运行后验证器。我基本上是在追求类似的东西：

```
public function configure() {

  // widgets

  // standard validators

  if (!this->hasErrors()) {
    // run post-validator
  }

} 
```

API 文档和往常一样神秘。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:33:28.080

由于验证是在`bind`调用时执行的，因此我看不到其他地方可以*在错误时发布验证，*而不是在`bind`函数中。因此，在您的表单类中：

```
public function bind(array $taintedValues = null, array $taintedFiles = null)
{
  parent::bind($taintedValues, $taintedFiles);

  if ($this->hasErrors())
  {
    // do post validate
    // you can access values from your form using $taintedValues
  }
} 
```

但是您将不得不手动调用验证器，而不是仅仅定义一个新的验证器（因为绑定过程已经完成）。

# imagemagick - 具有灰度图像和 24 位深度的 Imagemagick

> ID：11047797
> 
> 赞同：0
> 
> 时间：2012-06-15T09:14:25.027
> 
> 标签：imagemagick, jpeg

我正在使用 Imagick 库在 PHP 中使用 ImageMagick。我首先从外部服务器读取（JPEG）图像：

```
$img = new Imagick();
$img->readImage($source); 
```

然后使用以下代码将其上传到我的 Amazon S3 存储桶：

```
$s3 = new AmazonS3();
$s3->create_object(BUCKET, $destination_path, array(
    'body' => $img->getImageBlob(),
    'length' => $img->getImageSize(),
    'acl' => AmazonS3::ACL_PUBLIC,
    'contentType' => 'image/jpeg'
)); 
```

一切似乎都运行良好，文件出现在我的存储桶中，我可以在浏览器中查看它们。但是，在处理灰度图像时，ImageMagick 会将图像从 24 位深度转换为 8 位深度。我希望他们保持 24 位深度，我怎么能做到这一点？我尝试了以下方法，但没有成功：

```
$img->setImageType(imagick::IMGTYPE_TRUECOLOR); 
```

对于彩色图像，一切正常，图像保持 24 位深度。

**编辑：**

似乎 ImageMagick 将图像类型从 6（真彩色）更改为 2（灰度）。尝试覆盖它不起作用，正如使用以下代码测试的那样：

```
$img = new Imagick();
$img->readImage($source);
$img->setImageType(6);
echo $img->getImageType(); 
```

输出 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:10:22.820

在加载图像之前使用 setType()。所以：

```
$img = new Imagick();
$img->setType(6); //or use imagick::IMGTYPE_TRUECOLOR instead of 6
$img->loadImage($source); 
```

这将输出真彩色图像，即使加载的图片仅使用灰色。

# python - 创建一个类似于 Tkinter 的表

> ID：11047803
> 
> 赞同：13
> 
> 时间：2012-06-15T09:14:59.927
> 
> 标签：python, tkinter

我希望在 Tkinter 中创建类似于表格的东西，但不一定必须是一个。

例如，我想创建标题“Name1”、“Name2”、“Value”，在每个标题下方我希望有几个空白行。

然后我希望稍后用我计算的值或名称的字符串值填充这些行（因此是标签）。

对于“Name2”，我实际上希望整个列成为一个下拉菜单。我已经自己创建了一个代码，但不知道如何将它合并到这个“表”中。

例如，是否可以在 Label 小部件周围创建边框，使其看起来像“表格”？

任何指向在这种情况下可能发生的事情都将非常感激。如果您需要我的任何代码来做某事，请问。谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-15T11:15:29.357

你有什么问题？简单的解决方案是使用`grid`. 您可以在每个单元格中放置您想要的任何类型的小部件。是的，标签可以有边框。不过，制作网格线的一种简单方法是在每个单元格周围使用填充，这样框架的颜色就会通过间隙显示出来。

在一个框架中执行此操作。如果您需要能够滚动表格，请将框架放在画布内并添加滚动条。网络上到处都有关于如何使用画布创建可滚动框架的示例。

这是一个非常简单的示例，它仅使用标签，不滚动。我将把你需要的确切实现作为练习留给读者。

```
import Tkinter as tk

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        t = SimpleTable(self, 10,2)
        t.pack(side="top", fill="x")
        t.set(0,0,"Hello, world")

class SimpleTable(tk.Frame):
    def __init__(self, parent, rows=10, columns=2):
        # use black background so it "peeks through" to 
        # form grid lines
        tk.Frame.__init__(self, parent, background="black")
        self._widgets = []
        for row in range(rows):
            current_row = []
            for column in range(columns):
                label = tk.Label(self, text="%s/%s" % (row, column), 
                                 borderwidth=0, width=10)
                label.grid(row=row, column=column, sticky="nsew", padx=1, pady=1)
                current_row.append(label)
            self._widgets.append(current_row)

        for column in range(columns):
            self.grid_columnconfigure(column, weight=1)

    def set(self, row, column, value):
        widget = self._widgets[row][column]
        widget.configure(text=value)

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-15T14:18:13.583

我发现了一个相当简单的无对象解决方案：

```
from Tkinter import *

rows = []
for i in range(5):
    cols = []
    for j in range(4):
        e = Entry(relief=RIDGE)
        e.grid(row=i, column=j, sticky=NSEW)
        e.insert(END, '%d.%d' % (i, j))
        cols.append(e)
    rows.append(cols)

def onPress():
    for row in rows:
        for col in row:
            print col.get(),
        print

Button(text='Fetch', command=onPress).grid()
mainloop() 
```

或者

```
# simple 2d table

from Tkinter import *

for i in range(5):
    for j in range(4):
        l = Label(text='%d.%d' % (i, j), relief=RIDGE)
        l.grid(row=i, column=j, sticky=NSEW)

mainloop() 
```

所有可在[http://www.java2s.com/Code/Python/GUI-Tk/](http://www.java2s.com/Code/Python/GUI-Tk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-04T12:51:20.847

如何从字典创建表：

```
my_dict = {
    1: {'Header1': 'Row1_Value1', 'Header2': 'Row1_Value2', 'Header3': 'Row1_Value3', },
    2: {'Header1': 'Row2_Value1', 'Header2': 'Row2_Value2', 'Header3': 'Row2_Value3', },

    }

# Create the header
for column, header in enumerate(my_dict[1]):
    Label(self, text=header).grid(row=0, column=0+column)

# Fill in the values
for row, element in enumerate(my_dict.values()):
    for column, (header, value) in enumerate(element.items()):
        Label(self, text=value).grid(row=1+row, column=0+column) 
```

# php - 如果 IIS 5.1 停止，错误消息？

> ID：11047811
> 
> 赞同：0
> 
> 时间：2012-06-15T09:15:28.803
> 
> 标签：php, asp.net, internet-explorer, iis

如果 IIS(5.1) 停止或不工作，有没有办法显示任何错误消息？我们在服务器 2000 上的网站很少，如果 IIS 由于任何原因没有响应，我们希望向最终用户显示一些消息。

我已经在测试服务器上测试了这个场景，我只是停止了 IIS，然后尝试访问其中一个网站，看看我是否从 IIS 收到任何错误消息，但我没有收到任何 IIS 错误消息（IE：Internet Explorer 不能显示网页）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:21:28.990

由于 IIS 是接收 HTTP 请求并对其进行响应*的 Web 服务器*，因此您需要运行*另一个*执行相同操作的 Web 服务器而不是 IIS。如果您运行的 Web 服务器可以响应 HTTP 请求并显示错误消息，那么您也可以使用它来运行您的网站。简而言之，除非您的实际 Web 服务器前面有另一个系统可以检测 Web 服务器何时关闭（例如，负载平衡器）......这是一个不切实际的提议。

# python - PyQt 相对于 PyGTK 的优势是什么，反之亦然？

> ID：11047821
> 
> 赞同：12
> 
> 时间：2012-06-15T09:16:24.317
> 
> 标签：python, user-interface, pygtk, pyqt4

我有一个应用程序，出于人体工程学的原因，它的 GUI 将被重新制作。它是用 PyGTK 编写的，我想知道我是否应该切换到 PyQt 以缓解未来的发展。

这个应用程序有一个带有按钮、工具栏、对话框等的经典 UI，但也有一些特定的要求：我当然需要创建一个基于 treeview/tableview 的自定义小部件（制作一个类似电子表格的小部件），这个应用程序有一个许多更新 GUI 的工作线程。

我正在就这两点寻求建议：

*   至于创建自定义小部件，PyQt 是否提供比 PyGTK 更好的机制，尤其是对现有小部件进行轻微修改。
*   在使用 PyGTK 时，我遇到了工作线程更新 GUI 的问题（即使正确使用threads_init（）和threads_enter（））。PyQt 在这一点上更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:43:57.413

我最喜欢 GTK+，因为（至少对我而言）它看起来更好。然而，PyQt 和变体（例如 PySide）确实有大量的附加功能，包括 WebKit 引擎、XML 解析器、SQL 支持等等。

如果你只想要外观，我会说 GTK+/PyGObject。如果您打算使用 PyQt 所拥有的任何东西，请使用 PyQt。

附带说明一下，如果您坚持使用 GTK+，我建议您升级到 PyGObject 和 GTK+ 3.0，因为 PyGtk+ 不再维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:35:07.407

我也从未使用过 PyGTK，但我认为 Qt 的两个非常好的特性是：[模型/视图](http://qt-project.org/doc/qt-4.8/model-view-programming.html)编程和[信号/插槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。如果您需要那种东西，我会说至少值得阅读有关它们的文档并在这方面比较这两个工具包。

设计师也很节省时间。[促销功能](http://harmattan-dev.nokia.com/docs/library/html/qt4/designer-using-custom-widgets.html)--- 您可以在设计器中将您的自定义小部件替换为类似的东西，例如，您已经使用您的功能实现了自定义树视图 --- 非常方便。您可以使用设计器显示常规树视图，但在导出时使用您的自定义类。

[文档](http://qt-project.org/doc/qt-4.8/)很棒。

编辑：您可以直接使用 Qt 文档。我一直在使用 PySide 在 python 中进行编程，并且只有少数情况下我实际上需要特定的文档。虽然[存在](http://srinikom.github.com/pyside-docs/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:59:23.877

我也没有使用 GTK 的经验，但可以提供一些答案：

*   Qt 从一开始就被设计为面向对象的；几乎其中的所有内容都对子类化有很好的支持。PyQt 也一样。

*   Qt 明确不支持除主 GUI 线程之外的任何线程修改 GUI。您可能会以这种方式导致崩溃。但是，正如 BlaXpirit 所提到的，有多种非常简单的线程间通信机制，例如信号传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T12:35:53.200

我无法比较，因为我不使用 GTK，但我建议使用 Qt。

Qt 肯定有您正在谈论的“treeview/tableview”，您可以将“单元格”作为您的自定义小部件（我现在正在研究这个主题）。Qt 对线程进行了很多思考，因此工作线程可以轻松使用信号/槽机制。是的，您可以通过应用样式表或子类化来修改现有的小部件。

现在关于 PyQt，由于许可问题，我不推荐它。PySide 对我来说似乎是一个更好的 Qt→Python 绑定：它可以在商业应用程序中自由使用，并且在 API 中有一些微小的优势（但除此之外它与 PyQt 完全兼容）。

Qt 是跨平台的，使用 cx_Freeze 部署 PySide 应用程序非常容易；您的应用程序的用户根本不需要安装任何东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T10:28:51.040

绝对是 PyQt……有很多高级应用程序在使用它……就我个人而言，我使用的是 KDE，所以，甚至我系统的 GUI 也使用 Qt！我也在创建一个电子表格应用程序，我发现它比我最初的想法要容易得多......但是，BiaXpirit 也是正确的：除非你正在开发一个开源应用程序，也许你应该使用 PySide 或其他东西别的...

# zend-framework - Zend 表单文件 - 文件“文件”超过了定义的 ini 大小

> ID：11047825
> 
> 赞同：1
> 
> 时间：2012-06-15T09:16:52.937
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-file

我在 Zend 中创建了一个上传表单，它与 uploadify 结合起来上传多个文件。

我不断收到的错误是；

```
File 'files' exceeds the defined ini size 
```

我在网上发现这个错误的原因是由于表单没有设置enctype。我已经将它设置为

```
enctype="multipart/form-data" 
```

但我仍然得到错误。最奇怪的是，即使我没有选择要上传的文件，我仍然会收到错误消息？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:32:16.023

使用 jQuery 表单插件 ( [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/) ) 上传文件时出现同样的错误并且没有选择文件。我不得不禁用此元素的验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:06:00.720

无论表单 enctype 是否为多部分，简单的 ajax 调用都不允许您将文件发送到服务器。有几天类似的问题，并试图寻找答案。正如 Andrey Ovcharov 提到的，提出了 jQuery Form Plugin。但仍然在验证过程中失败了。诀窍是向 ajaxSubmit 方法添加几个附加选项：

```
, iframe:true
, url:your_ajax_url 
```

此外，如果您希望文件元素是可选的 - 请确保您的元素是可选的。`$element->getFileName()`当使用多个文件时，在提交过程中准备表单通过循环这些项目并检查是否是有效字符串（保持简单`len > 0`，有时检查不是数组）来准备验证。`$element->setAllowEmpty(true);`我在测试时也离开了。不确定是否非常重要，但是当它最终工作时-离开，不会造成任何伤害:)

PS 我知道，问题是 2012 年，但我自己正在努力使用可选文件上传 + ajax 调用进行 zend 表单验证

# c# - 更换表格的最佳方法？

> ID：11047827
> 
> 赞同：2
> 
> 时间：2012-06-15T09:16:58.977
> 
> 标签：c#, .net, winforms

我正在尝试制作一个应用程序，用户可以在其中单击按钮以浏览不同的表单。IE：如果我点击网络状态，它会将主窗体替换为网络状态窗体，然后您可以通过单击“返回”返回主窗体。

这样做的最佳方法是什么？我正在考虑面板，但人们告诉我使用 usercontrol，我对它不太熟悉。我会很感激任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:19:21.410

看帖子看不出*有任何*理由不拥有另一个`Form`。

为什么不创建另一个功能齐全`Form`的，并隐藏“源” `Form`。

可以创建一些，某种`forms linked list`结构，你有（比方说）

```
public class MyAppForm : Form 
{
     MyAppForm _prev... 
     MyAppForm _next...
} 
```

通过这种方式（比如说）`Go to next`按钮单击，我们隐藏原始，选择和显示`_next`。

只是一个想法。您可以对其进行更改以使其更简单或更好地满足您的应用程序需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:23:35.933

您可以在需要时使用多种表格，`Show`并`Hide`根据需要使用它们。

您还可以考虑使用 MDI 表单之类的东西，您可以在其中拥有一个可以托管菜单、状态和其他栏的父表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:52:35.257

![在此处输入图像描述](../Images/50886f0ddb5ea63379fc8532ead45ad1.png)

你好，

假设您的要求如`storyboard`. 根据 UserControl 上的图片`UserControl of these many controls`有一个。`DOCKED`现在在空白区域中，您将不得不`show / hide`将`page / form / screen`.

我建议这段代码可以帮助您在导航时动态显示/隐藏表单。在您的导航位中有这个，即 Next / Prev 点击`Usercontrol`-

```
 form.Location = new Point(leftPaneControl.Width , BannerControl.Height);
        form.Size = new Size(this.Width - leftPaneControl.Width, this.Height - BannerControl.Height);
        form.Anchor = AnchorStyles.Bottom | AnchorStyles.Top | AnchorStyles.Left |
                                   AnchorStyles.Right;
        this.Controls.Add(form); 
```

在 Next 和 Prev clicks 上，您只需`Controls.RemoveByKey(...)`隐藏现有的表单，上面的代码将`add`在您实例化相同的表单后成为下一个相应的表单。`unique names`如果您已为所有`forms / screen / page`[无论您说什么] 定义，这是一个非常酷的功能，可以从集合中删除控件 [s ]。

> 这种方法/设计将允许您只专注于设计您的页面/屏幕，因为创建此用户控件是一次性活动。之后，您将只需要一一设计您的个人导航页面/屏幕。

# tridion - Tridion 2011 SP1 Hotfix Rollup 1 能否在不升级 CD 的情况下在 CM 上运行？

> ID：11047828
> 
> 赞同：8
> 
> 时间：2012-06-15T09:17:00.690
> 
> 标签：tridion

我们最近升级（非常成功）到 Tridion 2011 SP1。我想安装 Content Porter 2009 SP2，它需要应用 Hotfix Rollup 1。

Hotfix Rollup 1 分为 3 个部分：

*   数据库脚本
*   内容管理者
*   内容交付

是否可以安装 DB Script 和 Content Manager Hotfix 但不能安装 Content Delivery？我问是因为我们的 Content Delivery 文件的推出过程比 Content Manager 涉及更多（因此需要更多时间）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T09:55:33.700

HR1 的交付端提供了大约 10 个修复，其中没有一个看起来与发布方式相关，并且发布方式发生了变化。因此，您可以在不更新 CD 的情况下更新 CM。

但是，要保持完全支持，您应该确保 CM 和 CD 更新的差距最小并且必须完成（通常，这会被遗忘）。除非支持与您的升级过程达成（预先）协议，否则可能不支持出现的问题。

我还建议您首先在测试或开发环境中执行此操作，以确保当 CM 为 HR1 而 CD 不是时，CD 端的发布和渲染工作正常。

# axis2 - /repository/conf/axis2.xml 与 /samples/axis2Server/repository/conf/axis2.xml

> ID：11047833
> 
> 赞同：0
> 
> 时间：2012-06-15T09:17:25.957
> 
> 标签：axis2, wso2, synapse, wso2esb

我想知道这些与文件之间的基本区别是什么 - 在功能和使用方面。

我正在尝试运行此[示例](http://wso2.org/project/esb/java/4.0.3/docs/samples/transport_samples.html#Sample256)但我无法运行它我不知道我在哪里犯了错误。这是我得到的错误。

> [2012-06-15 14:42:03,557] 错误 - AxisEngine 找不到操作的端点引用 (EPR) 并且 WSA 操作 = null。如果此 EPR 以前可以访问，请联系服务器管理员。org.apache.axis2.AxisFault：未找到操作的端点引用 (EPR) 是并且 WSA 操作 = null。如果此 EPR 以前可以访问，请联系服务器管理员。在 org.apache.axis2.engine.DispatchPhase.checkPostConditions(DispatchPhase.java:102) 在 org.apache.axis2.engine.Phase.invoke(Phase.java:329) 在 org.apache.axis2.engine.AxisEngine.invoke (AxisEngine.java:262) 在 org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168) 在 org.apache.axis2.transport.base.AbstractTransportListener.handleIncomingMessage(AbstractTransportListener.java:328) 在 org. apache.axis2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:13:28.303

ESB_HOME/repository/conf/axis2.xml 是碳服务器使用的主要axis2配置。

ESB_HOME/samples/axis2serevr/repository/conf/axis2.xml 是示例axis2服务器使用的axis2配置，可在wso2ESB发行版中使用。错误表示在服务中找不到您的操作..您是否部署了simplestockquote如示例设置指南中所述，在您的示例 axis2server 上提供服务？

# php - 通过 3 方网站登录：使用什么 oauth 或 openid

> ID：11047836
> 
> 赞同：0
> 
> 时间：2012-06-15T09:17:40.427
> 
> 标签：php, oauth, openid

我需要开发一项服务，该服务将通过多个登录提供程序（google、facebook、twitter 和 yahoo）执行登录。此外，我需要从用户个人资料（登录、电子邮件、生日等）中获取数据。我仍然无法理解：为此使用 OAuth 或 OpenID（可能的地方）是否更好。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:01:07.623

如果您的要求是让用户使用各种提供商（例如 google、facebook 等）登录，并且您只需要获取电子邮件、全名、县、语言等个人资料信息，那么 OpenID 是最好且最简单的方法它。这是广泛看到的 OpenID 用例。但是，如果您愿意与这些提供商互动，例如在用户的 Facebook 墙上发帖等，那么请选择 OAuth。OAuth 允许您代表用户对这些提供程序执行操作。

# visual-studio-2010 - 从命令行编译原生 C/C++ 程序的路径设置

> ID：11047838
> 
> 赞同：0
> 
> 时间：2012-06-15T09:17:44.577
> 
> 标签：visual-studio-2010

第一次使用 VC++ 命令行。在为 cl.exe 和其他头文件设置正确路径时面临问题：

```
///simple.cpp, saved at **D:\Program Files\VC** 

#include <iostream>

int main()
{
    std::cout << "This is a native C++ program." << std::endl;
    return 0;
} 
```

键入命令时：

```
cl /EHsc simple.cpp 
```

返回错误

```
D:\Program Files\VC> cl /EHsc simple.cpp
'cl' is not recognized as an internal or external command,
operable program or batch file. 
```

**请注意我的 Visual Studio 安装在 D 盘中。**

作为解决方法，我移到了 cl.exe 所在的 bin 文件夹：

```
 D:\Program Files\VC\bin>cl /EHsc simple.cpp
 Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
 Copyright (C) Microsoft Corporation.  All rights reserved.

 simple.cpp
 simple.cpp(1) : fatal error C1083: Cannot open include file: 'iostream': No such
 file or directory 
```

正如您现在所看到的，它无法包含“iostream”，它位于 D:\Program Files\VC\include 下的包含文件夹中

请帮助我正确设置默认路径。

更新：

以下是目录的内容：

```
 Directory of D:\Program Files\VC

 06/15/2012  02:23 PM    <DIR>          .
 06/15/2012  02:23 PM    <DIR>          ..
 04/20/2012  12:24 PM    <DIR>          atlmfc
 06/15/2012  02:35 PM    <DIR>          bin
 04/20/2012  12:22 PM    <DIR>          crt
 04/20/2012  12:24 PM    <DIR>          include
 04/20/2012  12:24 PM    <DIR>          lib
 02/23/2012  05:16 PM             1,525 Notepad.lnk
 04/20/2012  12:23 PM    <DIR>          redist
 06/15/2012  02:31 PM               146 simple.cpp
 04/20/2012  12:22 PM    <DIR>          VCAddClass
 04/20/2012  12:21 PM    <DIR>          VCContextItems
 08/31/2009  02:46 AM               160 vcEmptyTestProject.vsz
 04/20/2012  12:21 PM    <DIR>          VCNewItems
 04/20/2012  12:22 PM    <DIR>          vcpackages
 04/20/2012  12:21 PM    <DIR>          VCProjectDefaults
 04/20/2012  12:25 PM    <DIR>          vcprojectitems
 04/20/2012  12:25 PM    <DIR>          vcprojects
 04/20/2012  12:22 PM    <DIR>          VCResourceTemplates
 09/30/2009  08:23 PM             1,237 vcvarsall.bat
 04/20/2012  12:25 PM    <DIR>          VCWizards
           4 File(s)          3,068 bytes
          17 Dir(s)   8,465,346,560 bytes free 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:20:19.613

打开 Visual Studio 命令提示符，它是一个命令提示符，路径中有相应的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:22:29.833

对于 Visual Studio 2008，有一个环境变量：您可以使用 VS90COMNTOOLS。可能与 VS2010 类似。

所以：直接从命令行，或从批处理文件：“%VS90COMNTOOLS%vsvars32.bat”

（包括引号！）

这应该适当地设置东西。

您需要将 %VS90COMNTOOLS% 替换为 2010 的适当环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:46:35.160

```
"d:\program files\bin\vcvars32.bat" 
```

该文件是在您安装编译器时为您创建的，因此它具有为您的安装定制的值。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx)。

# java - 如何为包名称添加前缀？

> ID：11047841
> 
> 赞同：0
> 
> 时间：2012-06-15T09:17:57.603
> 
> 标签：java, eclipse, import, package

我已经将 45 个 java 包导入到`src`Eclipse 的一个文件夹中。每个课程都有一个特定的名称，并包含许多 java 文件。问题是包类中的导入语句都引用了`package`具有初始前缀名称的各种包（包括行中的自身）。

因此，例如，如果包名称是 `snowman.image` java 文件中的开头`abc.snowman.image` 并引用另一个`snowball.hit`名为`abc.snowball.hit`. 不用说，Eclipse 抱怨代码中提到的这些包不存在。

我想我一定是做错了什么。我是否错误地导入了软件包？我可以更改一些属性，以便在包名称之前理解前缀。我宁愿不浏览数百个 java 文件并手动更改`package`和`import`名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:01:44.877

首先，您需要确保项目配置正确。右键单击项目，然后转到“属性”，然后在左侧的树中选择“java build path”。切换到“源”选项卡，并确保您将“您的项目/src”作为源文件夹。从“src”文件夹开始，您将拥有包名，就像汤姆对您的问题发表的评论一样。

eclipse还有一些不错的功能，比如“组织导入”——默认快捷键ctrl+shift+o——它将查看你的源文件并更新你的导入。这既适用于当前类的文本编辑器，也适用于整个“导航器/包资源管理器”视图。选定的项目。

请在尝试此操作之前备份您的项目，因为它会通过删除未使用并添加它在当前结构中找到的导入来自动更改您的文件，因此您最终可能会得到`snowball.hit`而不是您想要的`abc.snowball.hit`.

# java - 读取 JNLP 中使用 href 标记传递的属性

> ID：11047842
> 
> 赞同：1
> 
> 时间：2012-06-15T09:18:07.207
> 
> 标签：java, dynamic, jnlp, java-web-start

我在使用 jsp 动态生成的 jnlp 中传递带有 href 标记的动态值。

```
<jnlp spec="1.0+" codebase="http://10.40.42.134:8080/TestJNLP/" href="test.jnlp?arg1=<%=request.getParameter("arg1")%>&arg2=<%=request.getParameter("arg2")%>"> 
```

AFAIK，当用户下载并运行此 JNLP 时，它将根据代码库和 href 属性访问服务器，并获取 JNLP 和 jar，但如何读取`arg1`和`arg2`在我的服务器上存在的 JNLP。

我的 JNLP（存在于服务器上）的参数标签应该是什么样的，它们应该是格式`<argument>"$$arg1"</argument>` 还是表单`<argument><%=request.getParameter("arg1")%></argument>`或其他格式。

有人可以帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:47:39.967

在进一步探索选项时，我发现可以使用 JSP 制作动态 JNLP，而 JSP 又可以`request.getParameter(arg)`

JSP 结构看起来像

```
<argument><%=request.getParameter("arg1")%></argument> 
```

和响应类型为`application/x-java-jnlp-file`

# swing - 在 JPanel 中的不透明组件之上绘制自定义内容

> ID：11047847
> 
> 赞同：3
> 
> 时间：2012-06-15T09:18:21.613
> 
> 标签：swing, jpanel, paintcomponent

我有一个 JPanel 填充了几个不透明的自定义组件。现在我想通过覆盖 paintComponent() 方法在这些组件之上绘制一些东西。我的问题是涂漆的东西被放置在嵌入式组件的后面，并且由于它们是不透明的，因此被它们覆盖。

有什么办法可以让绘画出现在组件之上？

这是我正在尝试做的一个简短示例：

```
public class DrawOnTop {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame f = new JFrame("Draw on top");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(new MyPanel());
                f.pack();
                f.setVisible(true);
            }
        });
    }
}

class MyPanel extends JPanel {

    public MyPanel() {
        setLayout(new BorderLayout(3, 3));
        add(new JButton("Button 1"), BorderLayout.NORTH);
        add(new JButton("Button 2"), BorderLayout.CENTER);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.red);
        g.drawLine(0, 0, getVisibleRect().width, getVisibleRect().height);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:20:50.643

你的想法是正确的。唯一的问题是您应该`paintChildren()`像下面的代码一样覆盖该方法。这是因为该`paintComponent()`方法首先被调用，并且对组件本身（`MyPanel`）进行背景等绘制，然后被调用`paintBorders()`，最后`paintChildren()`调用它绘制调用它的组件内部的所有内容。

```
public class DrawOnTop {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Draw on top");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(new MyPanel());
                f.pack();
                f.setVisible(true);
            }
        });
    }
}

class MyPanel extends JPanel {

    public MyPanel() {
        setLayout(new BorderLayout(3, 3));
        JButton b1 = new JButton("Button 1");
        MouseListener ml = new MouseAdapter() {

            @Override
            public void mouseExited(MouseEvent e) {
                super.mouseExited(e);
                MyPanel.this.repaint();
            }
        };
        b1.addMouseListener(ml);
        JButton b2 = new JButton("Button 2");
        b2.addMouseListener(ml);
        add(b1, BorderLayout.NORTH);
        add(b2, BorderLayout.CENTER);
    }

    @Override
    protected void paintChildren(Graphics g) {
        super.paintChildren(g);
        g.setColor(Color.red);
        g.drawLine(0, 0, getVisibleRect().width, getVisibleRect().height);
    }
} 
```

**重要的是要注意**，在代码示例中，我还添加了一个`MouseListener`以在鼠标退出按钮时重新绘制面板，否则一旦鼠标进入其中一个按钮，按钮将始终停留在该线上。

但是，如果您想拥有始终位于组件顶部的自定义绘画，那么我建议您使用玻璃窗格。**此处提供了玻璃窗格使用**的示例：

1.  [简单的一个。](https://stackoverflow.com/a/5967811/613495)
2.  [一个更复杂的。](https://stackoverflow.com/a/10755889/613495)

# jquery - 如何在jquery的成功函数中执行回发

> ID：11047850
> 
> 赞同：0
> 
> 时间：2012-06-15T09:18:24.880
> 
> 标签：jquery, postback

我有带有属性的输入类型按钮，我在单击按钮时`id=btnok`调用函数`jQuery`

```
$("#btnok").click(function { 

}) 
```

并`ajax`在该函数内请求。

我想在该`ajax`请求的成功函数内部或在调用该函数之后发回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:24:42.437

如果您需要成功和失败的回调，您可以这样做：

```
$("#btnok").click(function {     
    $.ajax({
        type: "get",
        url: "url",
        success: function (data) {
            // all good
        },
        error: function (data) {
            // error
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:22:55.333

你可以在你的 .ajax 调用中这样做，或者在下面的这个例子中，你的`get()`调用，只是我`get()`对 ajax 请求的偏好：

```
 $("#btnok").click(function(){

      $.get(url,function(data){
        //your post back function goes here
      });

 }); 
```

# session - 会话在 Web 应用程序上下文中的确切含义

> ID：11047859
> 
> 赞同：6
> 
> 时间：2012-06-15T09:19:05.760
> 
> 标签：session

我在这里和那里做了一点网络编程，但我从来没有完全理解这个词的含义`Session`。

我在这里和那里搜索了一下，阅读了[维基百科](http://en.wikipedia.org/wiki/Session_%28computer_science%29)的文章，但永远无法完全理解它的含义。

那么，什么是会话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:28:53.437

Session 是一种在多个页面和请求中持久保存您的信息的方式。当您访问任何网站的登录页面并提供您的用户名和密码时，您无需在后续页面再次提供它们。

这是通过附加一个会话 id 来完成的，该 id 对您的请求是唯一的，并在您浏览页面时来回发送。

会话 ID 可以存储在 cookie（系统上的文件）中、作为查询字符串的一部分的 URL 或数据库中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:22:40.083

会话是为您网站的特定访问者存储数据的地方。

您可以将数据存储在该访问者的下一页请求中也可用。如果某些数据存储在“会话中”，则意味着数据存储在某个地方（可能在服务器的数据库或文件中），然后服务器可以使用这些数据构建网页。

访问者将收到一个临时 cookie，其中包含一个会话 ID，一个标识符，用于将该访问者与存储在 Web 服务器上的会话数据相关联。

会话 ID 随每个请求一起发送到服务器，服务器可以查找存储的会话数据（然后可用于构建网页）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T09:24:23.963

这是通过 HTTP 等固有的无状态协议保持状态的概念。

例如，如果您想跟踪登录的用户，以及可能与该用户相关的一些数据，您可以每次在服务器和客户端之间发送该数据，这当然是非常不安全的。或者您可以将它保存在服务器上的会话存储中，例如文件或数据库，并且只需在客户端和服务器之间交换存储位置的标识符。如今，这通常通过 cookie 完成，但也可以是 URL 中的参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:22:22.383

为了简单起见：

如果您第一次访问该站点，服务器会为客户端提供一个标识符。有了这个，服务器可以在从客户端到服务器的多个请求中识别客户端。该标识符在预设时间后被删除。

此标识符和标识符有效的时间范围的组合称为会话。

希望有帮助。:-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T09:32:06.007

**会话：**用户和服务器之间的交互，具有与之关联的 ID。这样服务器就可以根据用户的请求精确定位和服务用户。Cookie 主要用于存储会话信息，因为默认情况下 HTTP 是无状态的。

# c# - 显示启动画面后延迟导致问题

> ID：11047862
> 
> 赞同：0
> 
> 时间：2012-06-15T09:19:15.713
> 
> 标签：c#, wpf, animation

我有一个想要淡入的初始屏幕，而我的应用程序关闭并执行某些操作，然后一旦完成，如果经过一定时间，则关闭初始屏幕并加载主屏幕。

我遇到的问题是，当我循环检查时间是否已经过去时，它似乎没有处理我的故事板以淡入启动画面。

在阅读之后，我想我应该在不同的线程上启动启动画面？

继承人的代码：

```
public partial class App : Application
    {
        private void Application_Startup(object sender, StartupEventArgs e)
        {
            MySplashScreen splash = new MySplashScreen();
            splash.Show();
            Stopwatch sw = new Stopwatch();
            sw.Start();
            while (sw.Elapsed.TotalSeconds < 10)
            {
            }
            splash.Close();
            MainWindow mw = new MainWindow();
            mw.Show();

        }

    } 
```

问题是当我添加动画时。就像它没有将任何处理器应用于淡入淡出一样，因为它卡在了 while 循环中。

```
<Window x:Class="Splash_Demo.MySplashScreen"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="550" Width="900" ResizeMode="NoResize" WindowStartupLocation="CenterScreen" WindowStyle="None" ShowInTaskbar="False" Background="Transparent" AllowsTransparency="True" Opacity="0">
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Duration="00:00:03" Storyboard.TargetProperty="Opacity" To="1" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>
    <Canvas Height="498" Width="839">
        <Canvas.Background>
            <ImageBrush ImageSource="C:\Users\Ash\Downloads\XactSplash.png"/>
        </Canvas.Background>
        <Label Canvas.Left="291" FontFamily="Algerian" Canvas.Top="413" Name="Customer" Height="43" Width="185" HorizontalContentAlignment="Left" VerticalContentAlignment="Center"/>
        <Image Canvas.Left="500" Canvas.Top="165" Height="164" Name="image1" Stretch="Fill" Width="211" Source="C:\Users\Ash\Downloads\Zerix.bmp" />
        <Label Canvas.Left="191" Canvas.Top="376" FontSize="8" Content="Label" Height="19" Name="lblYear" Width="30" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
    </Canvas>

</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:22:25.027

您正忙于等待，导致 UI 线程阻塞，并在此过程中占用大量 CPU。相反，在 Application_Startup 中设置一个计时器，并在它到期时打开主窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:58:34.947

在您的“while”循环中，您无法运行任何动画，因为您的 UI 线程被阻塞（因此等待运行您的动画）。尝试`DispatcherTimer`改用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:08:09.177

最好的方法和使用 API 是

```
 SplashScreen splash = new SplashScreen("splashscreen.jpg");
  splash.Show(false);
  splash.Close(TimeSpan.FromMilliseconds(2));
  InitializeComponent(); 
```

# php - php：简单代码验证失败

> ID：11047871
> 
> 赞同：0
> 
> 时间：2012-06-15T09:19:51.487
> 
> 标签：php, symfony

我目前正在为框架 Symfony2 中的实体开发一个简单的 php 函数。该函数不断产生错误，尽管我看不出有什么问题。这是代码：

```
public function getForm(array $reqFields){
    var $formHelper = new FormHelper;
    var $fields = new array;

    if($reqFields == null){
        foreach ($this->getArray() as $k => $v) {
            array_push($fields, $formHelper->getTextField($v, $k));
        }
    }

    return $formHelper->getForm($fields);
} 
```

就此而言，我已经导入了 FormHelper，并且其中的函数存在。当我执行它时，我收到以下错误：

```
Parse error: syntax error, unexpected T_VAR 
```

有什么问题？

编辑：Netbeans 告诉我 $reqFields 应该被初始化（但它是一个参数：/），并且返回行上应该有一个标识符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:24:21.860

***我至少***注意到两件事：

*   数组不是对象。您不能像使用`new array`.
*   自 PHP 5.3 起，该`var`关键字已[弃用](https://stackoverflow.com/questions/1206105/what-does-php-keyword-var-do)。（而且你用错了）

所以你的代码：

```
var $formHelper = new FormHelper;
var $fields = new array; 
```

**应该变成：**

```
$formHelper = new FormHelper;
$fields = array(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:21:57.087

数组不是对象！
所以它是：

```
var $fields = array(); 
```

而且您必须在类头中而不是在函数中定义类变量。`var`所以你也应该在前面擦除。

像这样：

```
class Foo
{
   public $fields = array(); // var equals public (you should use public, because var is deprecated)

   public function bar()
   {
      print_r($this->fields); // => Array ( )
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:29:23.307

```
public function getForm(array $reqFields){ 
```

在php中你没有声明参数类型所以你应该把它转换成

```
public function getForm($reqFields){ 
```

或者

```
public function getForm($reqFields = array()){ 
```

如果您希望参数也是可选的

```
$formHelper = new FormHelper(); 
```

还

```
$fields = array(); 
```

还

```
foreach ($this->getArray() as $k => $v) { 
```

我假设 $this 是形式...如果不使用`$formHelper->getData();`

# iphone - 使用 TestFlight 分发版本？

> ID：11047874
> 
> 赞同：2
> 
> 时间：2012-06-15T09:20:08.343
> 
> 标签：iphone, testflight

我们公司拥有 iOS 企业开发人员许可证，并且即将分发内部开发的 iphone 应用程序。

我们已经使用 TestFlight 进行我们的 beta 测试，并且非常喜欢监控功能，因此我们也使用 TestFlight 分发了应用程序的发布版本。

您对此有任何技术或法律问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:22:58.473

是的，试飞允许您修改应用程序中的代码。如果没有他们的控制，Apple 不会喜欢你这样做，这就是审查过程的全部原因。我强烈建议不要这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:21:16.370

您应该考虑使用企业帐户。有了这个，您只需向他们发送一个 URL，就可以轻松地与其他人共享应用程序。这使您无需在 Apple 的开发者帐户中注册测试用户。

# postgresql - 选择与 Postgres 的关系作为列表

> ID：11047876
> 
> 赞同：0
> 
> 时间：2012-06-15T09:20:15.550
> 
> 标签：postgresql

我有一些表要加入到 Postgres (9) 的查询中。

但是，由于它是多对多关系，我得到了很多记录，其中我有表 A 的记录，然后是表 B 的项目（如预期的那样）。例如：

```
Car, Ford
Car, BMW
Car, VW
Bike, Yamaha
Bike, BMW
Bike, Honda 
```

我所追求的是将关系作为一个列表：

```
Car, "Ford, BMW, VW"
Bike, "Yamaha, BMW, Honda" 
```

在普通查询中使用 Postgres 可以做到这一点，还是我需要做一些更神奇的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:41:15.970

```
select a.type,
       string_agg(b.name, ',');
from a 
  join b on a.id = b.type_id 
```

您需要将列名和表名替换为真实名称（您没有提供，因此我无法在此处使用正确的名称）。

# c# - 从 FTP 下载文件以及如何提示用户在 ASP.NET C# 中保存/打开文件

> ID：11047879
> 
> 赞同：1
> 
> 时间：2012-06-15T09:20:35.813
> 
> 标签：c#, asp.net, .net, ftp, ftpwebrequest

当用户单击 ASP.NET C# 页面上的下载按钮时，我想从 FTP 下载文件并在用户的 Web 浏览器中打开下载/保存提示。

```
string strDownloadURL = System.Configuration.ConfigurationSettings.AppSettings["DownloadURL"];
string HostName = System.Configuration.ConfigurationSettings.AppSettings["HostName"];
string strUser = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationUser"];
string strPWD = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationPWD"];

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(HostName + strFile);
request.Method = WebRequestMethods.Ftp.DownloadFile;
request.Credentials = new NetworkCredential(strUser, strPWD);
request.UsePassive = true;
request.UseBinary = true;
request.KeepAlive = false;

FtpWebResponse response = (FtpWebResponse)request.GetResponse();
Stream responseStream = response.GetResponseStream();
string fileName = @"c:\temp\" + strFile + "";
Directory.CreateDirectory(Path.GetDirectoryName(fileName));
FileStream file = File.Create(fileName);
byte[] buffer = new byte[2 * 1024];
int read;
while ((read = responseStream.Read(buffer, 0, buffer.Length)) > 0) { file.Write(buffer, 0, read); }
file.Close();
responseStream.Close();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:23:57.407

因此，假设您正在将 FTP 请求的响应流写入 ASP.NET 响应流，并希望在浏览器中触发下载对话框，您需要`Content-Disposition`在响应中设置标头。

```
// note: since you are writing directly to client, I removed the `file` stream
// in your original code since we don't need to store the file locally...
// or so I am assuming
Response.AddHeader("content-disposition", "attachment;filename=" + strFile);

byte[] buffer = new byte[2 * 1024];
int read;
while ((read = responseStream.Read(buffer, 0, buffer.Length)) > 0) 
{ 
   Response.OutputStream.Write(buffer, 0, read);
}

responseStream.Close();
response.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-08T06:11:50.117

@moribvndvs 的答案是正确的。但是使用[`WebClient.OpenRead`](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.openread)and可以使代码更简单[`Stream.CopyTo`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto)：

```
var filename = "file.zip";
Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

var client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
var url = "ftp://ftp.example.com/remote/path/" + filename;
using (var ftpStream = client.OpenRead(url))
{
    ftpStream.CopyTo(Response.OutputStream);
} 
```

（[ASP.NET](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpresponse)`Response`在哪里）。[`HttpResponse`](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpresponse)

另请参阅[在 C#/.NET 中向/从 FTP 服务器上传和下载文件](https://stackoverflow.com/q/44606028/850848)。

# qt - 窗口焦点更改时丢失 Qt 键事件

> ID：11047880
> 
> 赞同：3
> 
> 时间：2012-06-15T09:20:36.187
> 
> 标签：qt

我已经安装了一个 QApplication 事件过滤器来处理 QKeyEvents。当某些按键被传递到一组（无父）窗口中的任何一个时，窗口失去焦点，使用 QWidget::setEnabled(false) 禁用，并打开另一个窗口。我看到的问题是在第一个窗口失去焦点之后但在第二个窗口获得焦点之前传递的关键事件丢失了，因为没有传递给事件过滤器。有谁知道失踪事件的去向？我正在使用 Qt 4.1.4

# python - 在 jinja2 中修改字典属性

> ID：11047886
> 
> 赞同：9
> 
> 时间：2012-06-15T09:21:04.297
> 
> 标签：python, dictionary, pyramid, jinja2

假设我将字典传递给我的 jinja2 模板。
在视图中我有类似的东西

```
d = {}
#set other template stuff into d
get_params['cri'] = 'time'
get_params['order'] = 'asc'
d['get_params'] = get_params
return d 
```

在模板中，我需要更改 get_params 的键值。合乎逻辑的事情

```
{% set get_params.cri='src' %} 
```

失败并出现错误

```
TemplateSyntaxError: expected token '=', got '.' 
```

我的问题是如何修改传递给 jinja2 字典的值

（这个问题已经在[这里](https://stackoverflow.com/questions/2703013/how-can-i-modify-merge-jinja2-dictionaries)问过了，但我发现答案令人困惑，它只回答了合并部分）

**回答编辑：**

Jinja2 提供了 'do' 扩展。要将该扩展名添加到金字塔，请在`__init__.py`文件中执行以下操作

```
#This line is alreadythere
config.include('pyramid_jinja2')
#Add this line
config.add_jinja2_extension('jinja2.ext.do') 
```

在模板中

```
{% do get_params.update({'cri':'src'}) %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:03:00.123

这个想法是你不能在 jinja2 中执行任务。但是，您可以做的（如您链接的另一篇文章中所建议的）是调用 do 块并执行更新操作（更新是 python 中任何 dict 的方法；[http ://docs.python.org/library/ stdtypes.html#dict.update](http://docs.python.org/library/stdtypes.html#dict.update)）。

# mongodb - MongoDB，分片问题：配置服务器崩溃后 mongos 进程失败

> ID：11047887
> 
> 赞同：1
> 
> 时间：2012-06-15T09:21:04.450
> 
> 标签：mongodb, replication, sharding

我在创建 mongoDB 分片集群时遇到了一些问题。我尝试使用 4 台服务器：3 台用于 mongo 数据库（host1、host2 和 host3），一台用于应用程序端（用于 mongos 进程）。在每台数据库服务器上，我启动 4 个进程：

```
$ mongod --configsvr --smallfiles --noprealloc --port 27020 --dbpath /mongodb/conf --logappend --logpath=/mongodb/logs/logsmongodcfg.log
$ mongod --shardsvr --smallfiles --noprealloc --replSet repl1 --port 27030 --dbpath /mongodb/repl1 --logappend --logpath=/mongodb/logs/mongod_shard1.log
$ mongod --shardsvr --smallfiles --noprealloc --replSet repl2 --port 27031 --dbpath /mongodb/repl2 --logappend --logpath=/mongodb/logs/mongod_shard2.log
$ mongod --shardsvr --smallfiles --noprealloc --replSet repl3 --port 27032 --dbpath /mongodb/repl3 --logappend --logpath=/mongodb/logs/mongod_shard3.log
```

正如您在集群中的每台服务器上看到的，我们有一个配置服务器和 3 个用于复制实现的 mongod 服务器。在应用服务器上，我只启动一个 mongos 进程：

```
mongos --configdb host1:27020,host2:27020,host3:27020 --port 27017 --logappend --logpath=/var/log/mongo/mongos.log
```

在此之后我尝试配置分片：

```
蒙戈 127.0.0.1:27017/admin
```

```
db.runCommand( { addShard : "repl1/host1:27030,host2:27030,host3:27030" } );
db.runCommand( { addShard : "repl2/host1:27031,host2:27031,host3:27031" } );
db.runCommand( { addShard : "repl3/host1:27032,host2:27032,host3:27032" } );
```

这个方案是有效的，但有一个大问题。如果我尝试关闭其中一台主机，mongos 将无法连接到其他主机和新的主复制。在 mongos 日志中，我得到这样的信息：

```
Thu Jun 14 21:10:37 [CheckConfigServers] DBClientCursor::init call() 失败
Thu Jun 14 21:10:37 [ReplicaSetMonitorWatcher] 尝试重新连接到 host1:27030
Thu Jun 14 21:10:42 [ReplicaSetMonitorWatcher] reconnect host1:27030 failed 无法连接到服务器 host1:27030
Thu Jun 14 21:10:42 [ReplicaSetMonitorWatcher] 尝试重新连接到 host1:27032
Thu Jun 14 21:10:47 [ReplicaSetMonitorWatcher] reconnect host1:27032 failed 无法连接到服务器 host1:27032
Thu Jun 14 21:10:56 [LockPinger] SyncClusterConnection 连接到 [host1:27020]
```

因此，如果 3 个配置服务器中的任何一个出现故障，mongos 就会出现连接异常。出了什么问题以及如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:24:07.210

所以，这里有几件事。首先，如果你没有运行 2.0.6，那么更新它 - 这里有几个相关的修复（比如[https://jira.mongodb.org/browse/SERVER-2988](https://jira.mongodb.org/browse/SERVER-2988)实际上在 2.0.5 中修复，但是有是 2.0.6 中的其他一些不错的功能），如果您在配置服务器关闭的情况下启动 mongos，它们会有所帮助。

接下来，如果您关闭配置服务器，您的集群元数据将变为只读状态，并且 mongos 无法做几件事（如平衡、拆分等），直到配置服务器重新联机。所以，它会抱怨一个在你恢复它之前已经关闭的事实。

副本集监控线程同样会继续 ping 已关闭且无法连接到它们的副本集成员（这实际上不是 ICMP ping，而是 TCP 连接尝试）。

基本上，这些日志消息是预期的，直到您恢复正常。

# android - android中的位图旋转问题

> ID：11047888
> 
> 赞同：1
> 
> 时间：2012-06-15T09:21:04.730
> 
> 标签：android, bitmap, image-rotation

我正在单击按钮旋转屏幕的背景图像。

```
Bitmap rotatedBitmap = null;
int curAngle = 0;

private Bitmap rotateImageBitmap(Bitmap org) {      

    if(rotatedBitmap != null  )
    {
        rotatedBitmap.recycle();
    }

    Matrix matrix = new Matrix();
    curAngle += 90;
    matrix.postRotate(curAngle);
    rotatedBitmap =  Bitmap.createBitmap(org, 0, 0,  org.getWidth(),  org.getHeight(), matrix, true);

    return rotatedBitmap;        
} 
```

应用程序在第 5 次单击按钮时强制关闭。（图像旋转 4 次）
Logcat：尝试使用回收的位图。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:37:00.390

这是来自开发人员指南....

1.  移动设备通常具有受限的系统资源。Android 设备可以为单个应用程序提供低至 16MB 的内存。

2.  位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），立即耗尽某些设备上的每个应用程序的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:26:38.020

最大角度为 360，当您点击第 5 次时，您的代码设置角度 = 450，这是无效的。因此，当角度达到 360 度时，请尝试重置您的角度。

# linux - 安装 yum php-devel 后，Centos 5 使用不同的 httpd.conf 重新启动 Apache 服务器

> ID：11047890
> 
> 赞同：0
> 
> 时间：2012-06-15T09:21:07.507
> 
> 标签：linux, centos

目前，我正在使用 Centos 5 运行 linux 服务器。

一天前，我在 ssh 上使用 'yum php-devel' 安装了 php-devel。

我尝试使用此命令重新启动 Apache 服务器

```
service httpd restart 
```

但是，apache 服务器读取不同的 httpd.conf 文件。

它假设读取位于“/usr/local/apache/conf/httpd.conf”文件的 httpd.conf 文件

但是，它现在显示为“/etc/httpd/conf/httpd.conf”。

因此，它会犯这个错误。

```
httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs 
```

你知道为什么会这样吗？

当 Apache 服务器重新启动时，有没有办法重置 httpd.conf 文件的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:31:17.630

我想出了这个。

问题是服务器使用了不同的 httpd.conf 文件。

所以我又检查了一次路由，把它改成了原来的 httpd.conf 路由。

# java - Quartz Scheduler：配置调度程序在交替周执行的表达式

> ID：11047891
> 
> 赞同：1
> 
> 时间：2012-06-15T09:21:07.840
> 
> 标签：java, quartz-scheduler

您能否提供表达式来配​​置调度程序以在替代星期天执行。

或者，我尝试使用表达式`0 0 6 ? * 1#2,1#4`在第 2 和第 4 个星期日运行，但未能触发

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:00:12.237

试试你的例子，

```
JobDetail job = newJob(SimpleJob.class)
        .withIdentity("job1", "group1")
        .build();

CronTrigger trigger = newTrigger()
        .withIdentity("trigger1", "group1")
        .withSchedule(cronSchedule("0 0 6 ? * 1#2,1#4"))
        .build();

Date ft = sched.scheduleJob(job, trigger);
sched.start();

Date nextFireTime = trigger.getNextFireTime();
System.out.println(nextFireTime); 
```

我得到以下异常：

```
Exception in thread "main" java.lang.RuntimeException: 
CronExpression '0 0 6 ? * 1#2,1#4' is invalid,.
at org.quartz.CronScheduleBuilder.cronSchedule(CronScheduleBuilder.java:105)
at org.quartz.examples.example3.CronTriggerExample.run(CronTriggerExample.java:66)
at org.quartz.examples.example3.CronTriggerExample.main(CronTriggerExample.java:110)
Caused by: java.text.ParseException: Support for specifying multiple "nth" days is not imlemented.
at org.quartz.CronExpression.buildExpression(CronExpression.java:483)
at org.quartz.CronExpression.<init>(CronExpression.java:276)
at org.quartz.CronScheduleBuilder.cronSchedule(CronScheduleBuilder.java:102)
... 2 more 
```

所以，它没有实现；是否修补 Quartz 以支持此用例，或者您可以使用 2 个不同的触发器，一个用于 1#2（第 2 个星期日），另一个用于 2#4（第 4 个星期日）

**注意：我使用了最新的石英，2.2**

# python - 使用python在xml中添加新元素

> ID：11047895
> 
> 赞同：0
> 
> 时间：2012-06-15T09:21:17.727
> 
> 标签：python, xml, python-2.7

有一个字符串列表，例如`list=[ name, age, sex, roll, cgpa ]`

在 python 中，如何将这些元素添加到 XML 中？

我已经写了

```
from xml.dom import minidom
doc = minidom.Document()
testElem = doc.createElement("test")
testElem.setAttribute('id', '1234')
i=len(list)
while i:
    testElem.setAttribute('testing',list[i])
    i=i-1
doc.appendChild(testElem)
print doc.toxml() 
```

当我运行上面的代码时，它在这一行中给出了错误：

```
testElem.setAttribute('testing',list[i]) 
```

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:43:26.300

您正在尝试访问 offset 处的元素`len(list)`。这不起作用，因为列表索引是从零开始的。改为开始`i=len(list)-1`并检查`i>=0`您的`while`

# iphone - 无法在 iOS 上加载自定义字体

> ID：11047900
> 
> 赞同：0
> 
> 时间：2012-06-15T09:21:39.910
> 
> 标签：iphone, objective-c, xcode, uifont

我在加载自定义字体时遇到问题。

.m 文件：

```
- (void)viewDidLoad
{
    [label setFont:[UIFont fontWithName:@"BIO.TTF" size:32]];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

我确实在 .plist 文件中输入了字体名称“BIO.TTF”。字体由应用程序提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:28:45.477

在 plist 中使用**文件名，在代码中使用****字体名称**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-12T22:42:55.047

接受的答案不正确。 **iOS 下的自定义字体名称并不总是对应于 finder 报告的内容。自定义字体使用后置脚本名称进行标识。**

* * *

说我的字体名称是“Museo Sans Rounded”，我想要 300 的重量。这些确实是一个系列，但您可以将它们视为单独的字体。

打开 Font Book，单击左上角的 info 选项卡，然后查看**PostScript 名称**。这是您在实际编码时将使用的名称。在示例照片中，您可以看到后记名称为“MuseoSansRounded-300”。 ![在此处输入图像描述](../Images/b113c6a378696bd3b9a901bfdf25e6f0.png)

* * *

然后编码

```
UIFont *myFont = [UIFont fontWithName:@"MuseoSansRounded-300" andSize:20]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T09:30:34.153

```
label.font = [UIFont fontWithName:@"MuseoSans-500" size:24.0]; 
```

您还必须编辑您的 plist 文件，ale 寻找系统字体名称，我的关闭文件名称为 MuseoSans500.otf 但系统名称是 MuseoSans 500 - 在字体名称中，空格是“-”符号，所以你必须使用 fontWithName MuseoSans -500。检查 BIO 的系统字体名称。

![在此处输入图像描述](../Images/530f69160f96eb181533f8a30626003b.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:26:04.637

可能是您使用的文件名“BIO.TTF”不是正确的文件名。

在字体册中打开这个 .ttf 文件并使用字体册中显示的名称，因为该名称是正确的名称，应该在代码中使用以加载字体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:31:44.603

您在 Mac 中安装的字体名称与您使用的不同。因此请检查字体应用程序中的名称并复制该名称。仅当您忘记添加到 plist 或您的字体名称与
安装的字体名称不同时才会发生这种情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-19T11:23:22.307

尝试从 Font Book App 中选择“i”按钮并使用字体的 PostScript 名称

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-24T06:10:52.157

另一件事可能是，如果您将字体文件放到项目中，它们实际上并不作为资源存在，因此您无法使用它们。您需要选择“目标会员”。

在 xcode 中选择字体，在右侧你有一堆选项和信息，有“目标会员”选择你的项目。

# html - 页面右侧溢出

> ID：11047902
> 
> 赞同：0
> 
> 时间：2012-06-15T09:21:56.057
> 
> 标签：html, css

我正在处理的这个页面有一些问题，我想我一直盯着这个问题看很久了.. 右侧以某种方式获得了额外的空间，我会大胆尝试摆脱它..任何帮助将不胜感激。

[在此处输入链接描述](http://33tpm.com/accente/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:59:54.563

感谢您的输入，我最终删除了“内容包装器” 为了使液体 div 居中，我在左侧 [column] div 上添加了左边距，在右侧 [column] div 上添加了右边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:26:35.977

您的元素 .content-wrapper 具有 100% 的宽度和额外的左右边距，并且比浏览器长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:25:24.870

因为您正在为内容包装器留出余地

```
<div id="content-wrapper"> while also providing width :100% of container 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:25:30.287

似乎您的内容包装器的宽度不是必需的。您将其设置为 100%（这是默认值），但这将添加到填充/边距。我认为，要么删除宽度或填充/边距，它应该可以工作。当然还要去掉边距！（至少在 chrome 中为我工作）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:25:40.563

content_wrapper 有`width: 100%,`，但`margin-right 8%,`实际宽度也有 108%。阅读模型框以及它如何使用边距和填充。

# java - 列表中的集合搜索

> ID：11047905
> 
> 赞同：0
> 
> 时间：2012-06-15T09:22:13.123
> 
> 标签：java, collections, core

我有两个清单

```
Collection<String> listOne = new ArrayList<String>();
Collection<String> listTwo = new ArrayList<String>();

for(PermissionDataObject permissionDataObject : selectedPermissions)
  listOne.add(permissionDataObject.getPermissionName());        

for(String selectedPermissions : selectedList)
  listTwo.add(selectedPermissions);

Collection<String> similarPermissions = new HashSet<String>(listOne);
Collection<String> differentPermissions = new HashSet<String>();

differentPermissions.addAll(listOne);
differentPermissions.addAll(listTwo);

similarPermissions.retainAll(listTwo);
differentPermissions.removeAll(similarPermissions);

System.out.printf("One:%s%nTwo:%s%nSimilar:%s%nDifferent:%s%n", listOne, listTwo, similarPermissions, differentPermissions); 
```

输出是

```
One:[MENU_CREATION, ROLE_CREATION]
Two:[CREATE_BRANCH, CREATE_COUNTRY, MENU_CREATION, ROLE_CREATION]
Similar:[ROLE_CREATION, MENU_CREATION]
Different:[CREATE_BRANCH, CREATE_COUNTRY] 
```

上面的代码完美运行我得到了不同的集合

但我想检查 listTwo 和 differentPermissions，如果不同并且 listTwo 等于 doSomething 如果不同并且 listTwo 不等于 doSomthing

我有下面的代码，当不同的有一个值时它的工作，如果不同的有更多的值，则循环被打破

```
for (Iterator<String> it = differentPermissions.iterator(); it.hasNext();){
    String diffString = it.next();
    String selectedString = selectedList.listIterator().next();

    log.info("---diffString---" + diffString);
    log.info("---selectedString---" + selectedString);

    if(diffString == selectedString){
         System.out.println("----permission added----" + diffString);
    }else{
         System.out.println("----permission deleted----" + diffString);
         }
    } 
```

任何想法，对我来说都很棒......

谢谢普拉迪普

**[编辑]** 我的代码中的小改动请参见下面的完整代码

```
Collection<String> listOne = Arrays.asList("MENU_CREATION", "ROLE_CREATION");
        Collection<String> listTwo = Arrays.asList("CREATE_BRANCH", "CREATE_COUNTRY", "MENU_CREATION", "ROLE_CREATION");

        Collection<String> similar = new HashSet<String>(listOne);
        Collection<String> different = new HashSet<String>();

        different.addAll(listOne);
        different.addAll(listTwo);

        similar.retainAll(listTwo);
        different.removeAll(similar);

         System.out.printf("One:%s%nTwo:%s%nSimilar:%s%nDifferent:%s%n", listOne, listTwo, similar, different);

        for (Iterator<String> it = different.iterator(); it.hasNext();) {

            String diffString = it.next();
            String selectedString = listTwo.iterator().next();

            if (diffString.equals(selectedString)) {
                System.out.println("----permission added----" + diffString);
            } else {
                System.out.println("----permission deleted----" + diffString);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:39:45.077

要找出集合中相同/不同的项目，我建议使用 Set 接口和标准集合操作，如联合、交集等。您可以使用 google Guava 库来帮助您：[http ://code.google.com/p/番石榴库/wiki/CollectionUtilitiesExplained](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained)

```
Set<String> wordsWithPrimeLength = ImmutableSet.of("one", "two", "three", "six", "seven", "eight");
Set<String> primes = ImmutableSet.of("two", "three", "five", "seven");

SetView<String> intersection = Sets.intersection(primes, wordsWithPrimeLength); // contains "two", "three", "seven"
// I can use intersection as a Set directly, but copying it can be more efficient if I use it a lot.
return intersection.immutableCopy(); 
```

您不必遍历您的集合项目来找出您需要的内容。希望对以后的实施有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:28:43.550

快速查看您的代码后，尝试使用`diffString.equals(selectedString)`而不是`diffString == selectedString`.

然后，对于你的问题，我真的不明白你想比较什么。您是否希望列表完美匹配，或者您想检查列表中具有相同索引的项目是否匹配？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:31:59.413

`==`比较对象的引用而不是它们的内容。用于`diffString.equals(selectedString)`比较`String`s。

# javascript - 在文本区域中显示页面行

> ID：11047914
> 
> 赞同：3
> 
> 时间：2012-06-15T09:22:41.110
> 
> 标签：javascript, html

我正在尝试构建一个 HTML5 iPad 应用程序，我想在其中为用户提供一个文本区域，该区域具有类似页面行的效果，可以输入他们的详细信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:29:10.377

实现这一点的最简单方法是创建一个包含水平线的简单 PNG 图像，并将其用作 textarea 上的重复背景。

**我创建了一个简单的例子**：http: [//jsfiddle.net/r4c2a/1/](http://jsfiddle.net/r4c2a/1/)

一步一步，你应该做的是：

1.  创建一个重复的图案图像。
2.  创建你的文本区域。
3.  使用 CSS 定义图像的行高并使其与您的图案一样高。
4.  ？？？
5.  利润

当然，这只是一个基本示例，您几乎可以按照您想要的任何方式对其进行样式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:28:55.070

`background-image`对于文本区域？例如：[http ://css-tricks.com/creating-a-nice-textarea/](http://css-tricks.com/creating-a-nice-textarea/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:29:45.620

此类问题已在 [如何在 texarea 中显示线条以使其看起来像记事本？](https://stackoverflow.com/questions/9289761/how-can-i-show-lines-in-a-texarea-to-make-it-look-like-notepad)

和 :: [CSS 样式文本区域，如 notebook-look](https://stackoverflow.com/questions/8304436/css-styling-text-areas-like-notebook-look)

请参考他们

# java - 无法启动新活动

> ID：11047916
> 
> 赞同：0
> 
> 时间：2012-06-15T09:22:44.077
> 
> 标签：java, android, android-activity

美好的一天，我尝试从另一个开始新的活动。但它总是崩溃。这里我的代码。它是 ListView 上的事件。

```
list.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                Student selected = (Student)list.getItemAtPosition(position);
                String selectedTitle = selected.FirstName;  //ideally this would probably be done with accessors
                int selectedId = selected.studentId;
                String selectedDescription = selected.LastName;

               Intent i = new Intent(view.getContext(), StudentInfoActivity.class);
               i.putExtra("studentId", selectedId);
               try{
                   startActivity(i);
               }catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }); 
```

A 向 Manifest 添加了一个活动

```
<activity
            android:name=".StudentInfoActivity"
            android:label="@string/app_name" >
        </activity> 
```

错误消息是

```
06-15 17:17:00.471: E/AndroidRuntime(602): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.marat.mutw/com.marat.mutw.StudentInfoActivity}: java.lang.NullPointerException: uriString 
```

所有以前的活动，我添加的那些都很好......

学生信息活动

```
public class StudentInfoActivity extends Activity {

    ImageView image;
    TextView firstLastName;
    TextView studentInfo;
    TextView addInfo;
    Student std;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sudentinfolayout);

        image = (ImageView)findViewById(R.id.avatar);
        firstLastName = (TextView)findViewById(R.id.firstNameLastName);
        studentInfo = (TextView)findViewById(R.id.studentinfo);
        addInfo = (TextView)findViewById(R.id.description);

        int studentId = getIntent().getExtras().getInt("studentId");
        JSONHandler handler = new JSONHandler(this.getApplicationContext());
        std = new Student();
        std = handler.GetStudentInfo(studentId);
        image.setImageURI(Uri.parse(std.imagePath));
        firstLastName.setText(std.FirstName+ "  "+std.LastName);

    }
    public void onClickApply(View view){

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:31:45.287

代替

```
Intent i = new Intent(view.getContext(), StudentInfoActivity.class); 
```

改成

```
Create static object of that activity 
```

例如 Activity actOne =null;

```
public static actOne a ;
a = this;

Intent i = new Intent(a, StudentInfoActivity.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:44:28.370

试试这个。

```
Intent i = new Intent(getApplicationContext(), StudentInfoActivity.class);
i.putExtra("studentId", selectedId);
startActivity(i); 
```

# linux - 在创建 tar 球时保留硬链接和符号链接，并在解压缩 tar 球时做同样的事情

> ID：11047919
> 
> 赞同：7
> 
> 时间：2012-06-15T09:22:55.143
> 
> 标签：linux, bash

任务：为远程升级系统或添加新功能提供便利。

**我应该做什么**创建目标机器当前环境的备份，如果升级在任何阶段失败，然后恢复到原始环境。

假设我的目录结构是这样的：

> /home/user/project1/..bla bla

项目 1 包含符号链接、硬链接、软件和固件的可执行文件等。

**我的困境**

我应该使用策略 1 还是 2？

1.  如果升级失败，我是否应该复制整个当前环境并恢复。

    > **示例**-> cp -p -r /home/user/project1/* /home/user/project1_backup/
    > 
    > **如果升级失败 -->**
    > 
    > mv /home/user/project1_backup/ /home/user/project1

2.  如果升级失败，我应该压缩整个环境并解压缩它。要创建 tar 球，我对保留符号链接和硬链接 .. 以及解压缩它时相同。

有人可以提供具体的答案，我应该遵循哪种方法，如果我使用 tar 球方法，bash 命令将是什么。

据我所知 `tar -cvfz`，创建 tar gunzip**不会**保留链接和权限，并且在解压缩 tar 球时同样如此。请放点光好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T16:52:11.177

我会使用第二个选项：创建一个 tarball；因为 tarball 有一些积极的方面：

*   您可以跨文件系统保留权限/特殊文件（当您将 ext* 文件夹备份到 NTFS 文件系统时很有用）
*   一个大文件的副本将比一千个小文件快
*   你可以压缩它。

这是命令：

```
tar --preserve-permissions --preserve-order -jc /path/to/your/folder > /path/to/your/backup_file.tar.bz2 
```

这将保留您的许可，您的符号链接。对于硬链接，我给你这个链接（[http://www.gnu.org/software/tar/manual/html_node/hard-links.html](http://www.gnu.org/software/tar/manual/html_node/hard-links.html)）

（但默认情况下，tar 保留硬链接）

**不要忘记在升级系统之前测试你的 tarball ！！**

（在未正确创建存档的情况下，您将避免几乎所有数据丢失）

# matlab - 将整个矩阵排序为一列

> ID：11047921
> 
> 赞同：1
> 
> 时间：2012-06-15T09:22:55.830
> 
> 标签：matlab, sorting, matrix

我有一个关于评分系统的小项目要做。我发现如果我使用 excel 来操作它，它肯定会占用我很多时间。我希望我能得到你们的帮助。

```
A = [10 20 30 40 ...]       % (1xm array)
B = [0.02; 0.04;...]        % (nx1 array)
F = A/B                     % F should be (n x m matrix)
Z = zero (size(nxm), 3)     % I'm trying to create a matrix with n x m row and 3 column) 
```

我想将 F 分类为 Z(1:end)，Z(1:end) 相应的 A 将在 Z(2:end) 中，相应的 B 将在 Z(3:end) 中。我可以知道我应该如何用matlab写吗？

例子：

```
 10      20    30    40    50 ...
0.02  500     1000  1500  2000   2500
0.04  250     500   750   1000   1250
0.06 166.67 333.33  500  666.67  833.33 
... 
```

输出 Z

```
166.67  10  0.06
250     10  0.04
333.33  20  0.06
.... 
```

希望这里的任何人都可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:11:34.350

您正在寻找的东西是`meshgrid`, 或`bsxfun`。网格解决方案：

```
A=[10 20 30 40];
B=[0.02 0.04 0.06 0.08];
[x,y]=meshgrid(A,B); % Generate 2 matrices having the elements to divide
F=x./y;              % Do elemnt-by-element divide
Z=[F(:),x(:),y(:)];  % put all values from the matrices together as columns,
                     % using linear indexing (:). 
```

bsxfun 解决方案更紧凑、更快，但可读性更差：

```
F=bsxfun(@rdivide,A',B); % Put the transpose at B if you want it 
                       % sorted along B.
x=bsxfun(@times,A,ones(size(B,2),1));  % a matric containing A as columns
y=bsxfun(@times,ones(1,size(A,2)),B'); % a matrix containing B repeated as rows
Z=[F(:),x(:),y(:)]; 
```

bsxfun 的诀窍在于它进行单例扩展。输入沿长度为 1 的每个维度重复，与匹配第二个操作数所需的一样多。

所以在上面的 4x4 案例中，你有（伪代码）：

```
[10 20 30 40] .* [0.01;
                  0.02;
                  0.04;
                  0.06] 
```

将扩展为（也是伪代码）：

```
[10 20 30 40;    [0.01 0.01 0.01 0.01;
 10 20 30 40; .*  0.02 0.02 0.02 0.02;
 10 20 30 40;     0.04 0.04 0.04 0.04;
 10 20 30 40]     0.06 0.06 0.06 0.06] 
```

您似乎希望按 F 对其进行排序：您可以使用以下方法轻松完成此操作

```
Z_sort = sortrows(Z,[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:23:59.950

这是使用`reshape`线性寻址的解决方案：

输入数据（`A`是行向量，`B`是列向量）：

```
A = [ 10, 20, 30, 40 ];
B = [ 0.02; 0.04; 0.06; 0.08 ]; 
```

这是代码：

```
F = bsxfun(@rdivide, A, B);
Fvector = reshape(F, 1, numel(F));

[SortedFvector, IX] = sort(Fvector);
Aindices = ceil(IX/size(B, 1));

Bindices = mod(IX, size(B, 1));
Bindices(Bindices == 0) = size(B, 1);

Z = [ SortedFvector', A(Aindices)', B(Bindices) ]; 
```

# java - 如何在java中按日期/时间比较和排序列表？

> ID：11047922
> 
> 赞同：0
> 
> 时间：2012-06-15T09:22:57.953
> 
> 标签：java, date, comparator

我如何实现一个可以对日期/时间字符串列表进行排序的java比较器类？

像例如

我有

```
2012-06-15T12:01:00.000+08:00
2012-06-25T12:15:00.000+08:00
2012-06-08T00:00:00.000Z 
```

然后它应该像这样排序

```
2012-06-08T00:00:00.000Z
2012-06-15T12:01:00.000+08:00
2012-06-25T12:15:00.000+08:00 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:26:39.910

这里有*两个*问题（因为直接解析字符串是行不通的）。

1.  将您的字符串转换为日期。有关详细信息和[DateFormat.parse()](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)方法，请参阅[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)
2.  [使用Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)对集合中的后续日期进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:24:52.730

将它们解析为`java.util.Date`. 日期已经实施`Comparable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:59:27.297

好吧，如果您想要一个快速的解决方案，如下所示。

[http://www.ltg.ed.ac.uk/NITE/nxt/apidoc/net/sourceforge/nite/util/SortedList.html](http://www.ltg.ed.ac.uk/NITE/nxt/apidoc/net/sourceforge/nite/util/SortedList.html)。

此外，如果您知道每个日期都会有所不同，那么请使用 TreeSet。您可以按如下方式使用它们。

制作一个新的 TreeSet 并继续在其中添加您的日期。它将自动排序，因为 TreeSet 对其包含的所有对象进行排序，如果它们实现了可比较（或提供了比较器）。

# jquery - 如何使 Fancybox Overlay 只影响某些元素

> ID：11047926
> 
> 赞同：1
> 
> 时间：2012-06-15T09:23:03.897
> 
> 标签：jquery, fancybox

标准 Fancybox 在整个身体上放置一个覆盖层。在fancybox JS或CSS中是否有一种方法可以让它只将叠加层放置在页面的某个元素上？

感谢：D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:42:29.277

`Fancybox.js`根据您的要求替换以下行

```
overlay.css('height', $(document).height()); 
```

到

```
 overlay.css('height', $("yourdiv").height());
 overlay.css('height', $("yourdiv").width()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:08:43.463

最后我重写了以下部分：

```
a.helpers.overlay = {
    overlay: null,
    update: function () {
        var a, c;
        this.overlay.width(0).height(0);
        e.browser.msie ? (a = Math.max(m.documentElement.scrollWidth, m.body.scrollWidth), c = Math.max(m.documentElement.offsetWidth, m.body.offsetWidth), a = a < c ? l.width() : a) : a = q.width();

        var w = $('#page-introduction').width();
        var h = $('#page-introduction').height();

        this.overlay.width(w).height(h)
        $('#fancybox-overlay').offset($('#page-introduction').offset())
    },
    beforeShow: function (b) {
        this.overlay || (b = e.extend(!0, {
            speedIn: "fast",
            closeClick: !0,
            opacity: 1,
            css: {
                background: "black"
            }
        },
        b), this.overlay = e('<div id="fancybox-overlay"></div>').css(b.css).appendTo("body"), this.update(), b.closeClick && this.overlay.bind("click.fb", a.close), l.bind("resize.fb", e.proxy(this.update, this)), this.overlay.fadeTo(b.speedIn, b.opacity))
    },
    onUpdate: function () {
        this.update()
    },
    afterClose: function (a) {
        this.overlay && this.overlay.fadeOut(a.speedOut || 0, function () {
            e(this).remove()
        });
        this.overlay = null
    }
}; 
```

其中 page-introduction 是我要叠加的元素，这个元素的偏移量是用来偏移叠加的。

罗伯特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:32:05.853

我想出了这个：

```
helpers:  {
            overlay : {
                    css : {
                        'height': $('.fancyboxwrapper').height(),
                        'width': $('.fancyboxwrapper').width(),
                        'top': $('.fancyboxwrapper').offset().top,
                        'left': $('.fancyboxwrapper').offset().left,
                        'overflow': 'hidden'
                    }
                }
           } 
```

这打开了包装器 div 内的叠加层，并将图像的大小调整为包装器的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-17T19:26:42.730

在 jquery.fancybox.js 中找到这一行并将 appendTo 更改为您选择的 div，如果要将其定位在该 div 中，则需要将 .fancybox-overlay 定位更改为绝对。

```
this.overlay = $('<div class="fancybox-overlay"></div>').appendTo( ".yourdiv" ); 
```

# c# - 序列化不接受我的 KnownTypeAttribute，为什么？

> ID：11047930
> 
> 赞同：1
> 
> 时间：2012-06-15T09:23:20.580
> 
> 标签：c#, .net, wcf, serialization

我遇到了一个序列化问题。我的 Silverlight 应用程序不希望我的属性之一在业务对象中，并且不知道如何处理它。以前我已经通过设置一个 KnownTypeAttribute 来解决这个问题，如下例所示，但在这种情况下它不起作用。

我曾经这样解决它：

```
[DataContract(Name = "baseClass")]
public class baseClass { }

[DataContract(Name = "busObj1")]
public class busObj1 : baseClass { }

[DataContract(Name = "busObj2")]
[KnownType(typeof(busObj1))]
public class busObj2 : baseClass
{
    public busObj1 myObj { get; set; }
} 
```

唯一知道的区别是我的结构略有不同，如下所示：

```
[DataContract(Name = "baseClass")]
public class baseClass { }

[DataContract(Name = "busObj1")]
public class busObj1 : baseClass { }

[DataContract(Name = "busObj2")]
[KnownType(typeof(busObj1))]
public class busObj2 : baseClass
{
    public busObj1 myObj { get; set; }
}

// This is the class that I want to send via WCF and that cannot be serialized
// because the serializer doesn't expect busObj1.
[DataContract(Name = "busObj3")]
public class busObj3 : busObj2 { } 
```

我非常感谢任何可能出错的想法！

问候， 克拉斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:27:45.290

您需要将已知类型属性放在基础对象上：

```
[DataContract(Name = "baseClass")]
[KnownType(typeof(busObj1))]
[KnownType(typeof(busObj2))]
[KnownType(typeof(busObj3))]
[KnownType(typeof(busObj4))]
public class baseClass { }

[DataContract(Name = "busObj1")]
public class busObj1 : baseClass { }

[DataContract(Name = "busObj2")]
public class busObj2 : baseClass { }

[DataContract(Name = "busObj3")]
public class busObj3 : busObj1
{
    public busObj2 myObj { get; set; }
}

[DataContract(Name = "busObj4")]
public class busObj4 : busObj3 { } 
```

或者，如果您不想用这些属性污染您的域模型，您也[可以在 web.config 中执行此操作，或使用`ServiceKnownType`Service Contract 上的属性](https://stackoverflow.com/a/3845788/29407)。

# tcl - upvar 命令在 TCL 中是如何工作的？

> ID：11047931
> 
> 赞同：13
> 
> 时间：2012-06-15T09:23:21.157
> 
> 标签：tcl, upvar

我对 TCL 中的 upvar 命令有疑问。使用 upvar 命令，我们可以在其他过程中引用全局变量或局部变量。我看到了以下代码：

```
proc tamp {name1 name2} {
    upvar $name1 Ronalod
    upvar $name2 Dom 
    set $Dom "Dom"
} 
```

这个过程被称为`tamp name1 name2`，并且没有在它之外定义全局变量 name1、name2，这个 upvar 在这种情况下是如何工作的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T13:07:53.323

当你调用 时`upvar 1 $foo bar`，它会在调用者的作用域中找到名称在变量中的`foo`变量，并将局部`bar`变量作为它的别名。如果变量不存在，则在未设置状态下*创建*它（即，变量记录存在但没有值。实际上，实现使用 a`NULL`来表示该信息，这就是为什么 Tcl 没有`NULL`等价物；`NULL`表示非-existence) 但仍会创建链接。（只有在局部作用域被破坏或 if`upvar`用于将局部变量指向其他东西时，它才会被拆除。）

所以让我们看看你的代码到底在*做*什么：

```
proc tamp {name1 name2} {
    upvar $name1 Ronalod
    upvar $name2 Dom 
    set $Dom "Dom"
} 
```

第一行说我们正在创建一个称为`tamp`过程的命令，该过程将有两个强制性的形式参数，并且这些参数称为`name1`和`name2`。

第二行说我们在调用者中绑定了一个变量名（`1`我之前解释中的级别指示器是可选的，但在惯用代码中强烈建议使用），它由`name1`变量（即过程的第一个参数）给出局部变量`Ronalod`。此后，对该局部变量的所有访问（直到堆栈帧的生命结束）实际上都将在调用者中的绑定变量上执行。

第三行几乎相同，除了`name2`（第二个参数）和`Dom`（局部变量）。

第四行实际上很时髦。它读取`Dom`变量以获取变量名（即，在过程调用的第二个参数中命名的变量）并将该命名变量设置为 value `Dom`。请记住，在 Tcl 中您使用从变量`$`中*读取*，而不是*谈论*变量。

过程调用的结果将是其主体中最后一个命令的结果（即，字面量`Dom`since`set`产生变量的内容作为其结果，它刚刚分配的值）。（最后一行完全没意思，因为它只是程序主体的结尾。）

调用这个命令的最终结果实际上几乎什么都没有，除非第二个参数命名一个包含`Ronalod`or的变量`Dom`。这很令人困惑。`set`当然，第一个参数的变量确实令人困惑。（这几乎总是一个坏主意；它是不良代码气味的一个指标。）如果您改用它，事情会更简单：

```
set Dom "Dom" 
```

在这种情况下，`Dom`耦合到的变量（即，由过程的第二个参数命名的变量）将设置为`Dom`; 这些变量实际上是通过引用传递的。额外的东西`$`有很大的不同！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T10:18:47.783

name1 和 name2 在调用范围内不存在 - 它们只是您的 proc 的参数。例如，您可以按如下方式调用 proc：

```
% set first "James"
James
% set last "Bond"
Bond
% tamp first last
Dom 
```

就目前而言，您的 proc 真的没有做任何事情。如果您将最后一行修改如下，那么它更有意义：

```
proc tamp {name1 name2} {
    upvar $name1 Ronalod
    upvar $name2 Dom 
    set Dom "Dom"
}
% tamp first last
Dom
% puts $first
James
% puts $last
Dom 
```

我见过的使用 upvar 和 uplevel 的最佳指南之一是 Rob Mayoff 的指南[http://www.dqd.com/~mayoff/notes/tcl/upvar.html](http://www.dqd.com/~mayoff/notes/tcl/upvar.html)

* * *

我正在添加另一个示例以帮助您了解 name1 和 name2 只是输入参数，不需要全局存在。在 tclsh 中运行这个例子，看看它是否更有意义。

```
% proc tamp {name1 name2} {
    upvar $name1 Ronalod
    upvar $name2 Dom
    puts "Ronalod=$Ronalod, Dom=$Dom"
    set Ronalod "Brian"
    set Dom "Fenton"
    puts "NOW: Ronalod=$Ronalod, Dom=$Dom"
}
%
% tamp name1 name2
can't read "Ronalod": no such variable
% set first "James"
James
% set last "Bond"
Bond
% tamp first last
Ronalod=James, Dom=Bond
NOW: Ronalod=Brian, Dom=Fenton
% puts $first
Brian
% puts $last
Fenton 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:19:48.890

当 Tcl 解释器进入一个用 Tcl 编写的过程时，它会创建一个特殊的变量表，其中包含该过程的局部变量，*同时它的代码正在执行。* 该表既可以包含“真实”局部变量，也可以包含到其他变量的特殊“链接”。只要涉及 Tcl 命令（例如 等），此类链接就无法与“真实”变量区分开`set`来`unset`。

这些链接由`upvar`命令创建，它能够创建指向任何堆栈帧（包括全局范围 - 帧 0）上的任何变量的链接。

由于 Tcl 是高度动态的，它的变量可以随时来来去去，因此链接到 by 的变量`upvar`在创建到它的链接时可能不存在，请注意：

```
% unset foo
can't unset "foo": no such variable
% proc test name { upvar 1 $name v; set v bar }
% test foo
bar
% set foo
bar 
```

请注意，我首先证明名为“foo”的变量不存在，然后将其设置在使用的过程中`upvar`（并且该变量是自动创建的），然后在过程退出后证明该变量存在。

另请注意，这`upvar`与访问全局变量无关——这通常使用`global`and`variable`命令来实现；相反，`upvar`用于处理*变量*而不是*值。* 当我们需要“就地”改变某些东西时，通常需要这样做；最好的例子之一是`lappend`接受包含列表的变量的名称并将一个或多个元素附加到该列表的命令，将其更改到位。为此，我们传递`lappend`一个变量的名称，而不仅仅是一个列表值本身。现在将此与`linsert`接受值而不是变量的命令进行比较，因此它需要一个列表并生成*另一个*列表。

另一件需要注意的事情是，默认情况下（以双参数形式），`upvar`链接到具有指定名称的变量*在堆栈上一层，*而不是全局变量。我的意思是，你可以这样做：

```
proc foo {name value} {
  upvar $name v
  set v $value
}

proc bar {} {
  set x ""
  foo x test
  puts $x ;# will print "test" 
```

}

在本例中，过程“foo”将变量局部变量更改为过程“bar”。

因此，为了使意图更清晰，许多人更喜欢总是指定堆栈帧的数量`upvar`应该“向上爬”，就像 in `upvar 1 $varName v`which 一样`upvar $varName v`但更清晰。

另一个有用的应用是引用*局部*变量，通过指定零堆栈级别来爬升——这个技巧有时对更方便地访问数组中的变量很有用：

```
proc foo {} {
   set a(some_long_name) test
   upvar 0 a(some_long_name) v
   puts $v ;# prints "test"
   upvar a(some_even_more_long_name) x
   if {![info exists x]} {
     set x bar
   }
} 
```

作为奖励，请注意，`upvar`它还可以理解使用“#”前缀指定的堆栈帧的绝对数量，而“#0”表示全局范围。 *这样，*您可以绑定到全局变量，而原始示例中的过程仅在全局范围内执行时才会绑定到全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:10:28.320

那么 tcl 中的 upvar 是用来定义 vars 将在 proc 执行后使用。例子：

```
proc tamp {name1 name2} {
    upvar 1 $name1 Ronalod
    upvar 1 $name2 Dom 
    set $Dom "Dom"
}

#Call the proc tamp

tamp $name1 $name2

#Now we can use the vars Ronalod and Dom

set all_string "${Ronalod}${Dom}" 
```

现在`1`跟随命令中的数字

```
upvar 1 $name2 Dom 
```

指示您可以使用变量的级别，例如，如果我们使用`2`

upvar 2 $name2 DOM

所以我可以这样做：

```
proc tamp_two {name1 name2} {
      # do something ...
      tamp $name1 $name2
}

proc tamp {name1 name2} {
    upvar 2 $name1 Ronalod
    upvar 2 $name2 Dom 
    set $Dom "Dom"
}

#Call the proc tamp_two

tamp_two $name1 $name2

#Now we can use the vars Ronalod and Dom

set all_string "${Ronalod}${Dom}" 
```

这可能与`upvar 2`，如果我们保持`upvar 1`，它不起作用。

我希望这对你有用。

# jquery - 一页中有多个jquery

> ID：11047939
> 
> 赞同：2
> 
> 时间：2012-06-15T09:23:46.413
> 
> 标签：jquery

我有一个 jquery 冲突，我无法解决主要是因为我不知道它，想知道是否有人可以为我照亮它？我有 2 个脚本正在运行，第一个请求 jquery.1.3.1 而第二个需要 jquery.1.7.1，当两者都存在时，第一个脚本不起作用，删除 1.7.1 会破坏第二个脚本，依此类推。

有没有办法让两者都在同一页面上很好地播放，我没有编写任何一个脚本，所以不确定如何更新第一个脚本以使用 1.7.1？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:27:03.030

你可以[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)使用：

```
<script src="jquery1.7.1"></script>
<script>
$j17 = jQuery.noConflict();
</script>
<script src="jquery1.3.1"></script> 
```

现在您可以使用或参考 jQuery 1.7.1`$j17`和旧版本。`$``jQuery`

*虽然你真的应该使用最新版本的 jQuery。*

# php - 使用 php 读取文本文件（特定行）

> ID：11047941
> 
> 赞同：0
> 
> 时间：2012-06-15T09:23:58.600
> 
> 标签：php, phpunit

我正在努力但做不到..任何 php 专家都在那里分享知识...（我真的很想知道 Facebook 是如何使用 PHP 构建的，如果我不能做这个简单的事情 :) 非常糟糕）

我有以下文本文件（sample.txt）

```
<Module>
title = "this is title" thumb ="http://www.example.com/thumb.jpg"
description ="this is the description of the title" 
screen ="http://www.example.com/screen.jpg"
<Content type="html" view="canvas">
<![CDATA[ 
<div>Hello world Canvas view</div>
<script type="text/javascript">

function goToView(dest) {
  var supported_views = gadgets.views.getSupportedViews();
  gadgets.views.requestNavigateTo(supported_views[dest]);
};
</script>
 <a href="javascript:goToView('home')" >Go to home view</a><br><br>
 ]]> 
 </Content>
 </Module> 
```

现在我想使用 php 读取上面的 sample.txt 文件并将其显示或存储在数据库中。

例如

```
this is title - should go in $title variable
http://www.example.com/thumb.jpg  - should go in $thumb variable 
i just want only these four variables (title, thumb, description & screen) 
```

这里的东西在 sample.txt 中，所有以上四个变量（标题、拇指、描述和屏幕）可以在单独的行中或在同一行中。

任何专家可以帮助我我尝试了很多但没有运气......

先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:27:36.073

如果您将变量保存在 ini 文件中，例如：`sample.ini`

```
title = "this is title" 
thumb = "http://www.example.com/thumb.jpg"
description = "this is the description of the title" 
screen = "http://www.example.com/screen.jpg" 
```

您可以使用[`parse_ini_file()`](http://php.net/parse_ini_file).

```
$vars = parse_ini_file('sample.ini');
echo $vars['title'];
echo $vars['thumb'];
// etc. 
```

# build-automation - TFS 构建自动化

> ID：11047943
> 
> 赞同：0
> 
> 时间：2012-06-15T09:24:13.530
> 
> 标签：build-automation

我有 TFS2010 构建一个项目解决方案，它是一个复印机。构建成功但什么也没做，即。不复制。

我将如何让触发的构建复制文件？

谢谢

我有 TFS 2010 和 VS 专业 2010

**编辑**

*更新*

复印机是正在建设的项目。我将 start copier.exe 添加到后期构建中，当我手动构建它时它可以工作，就像进入构建下拉菜单并单击构建复印机一样。但是，当我进行 TFS 构建时，它不会启动复印机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:41:41.097

如果您需要构建过程来调用程序，您需要编辑 TFS 构建过程模板。

网上有很多资源，其中一个很好的是[Ewald Hofman](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)。您还可以在[Wrox 的 TFS 2010 书中](http://www.amazon.co.uk/Professional-Team-Foundation-Server-Programmer/dp/0470943327)找到详细信息。

一旦您熟悉了流程模板，您将需要`InvokeProcess`在构建活动完成后添加一个活动。

另外，考虑添加一个`If`活动并设置一个参数，以便您可以控制哪些构建执行此操作，哪些不执行此操作 - 例如，您的 CI 构建是否需要此步骤？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:41:06.507

我无法编辑我们的构建定义模板，因为它们是公司范围的。

所以我用额外的后期构建步骤更改了项目文件。

只需在包含复印机的项目的后期构建步骤中添加一个步骤。您可以调用您的输出可执行文件。

我这样做是为了将我的 TFS 构建分发到不同的发布文件夹

添加这一步：

"$(TargetPath)" 到你的项目文件。

# hibernate - 如何用休眠解决 java.lang.reflect.InvocationTargetException struts2

> ID：11047944
> 
> 赞同：1
> 
> 时间：2012-06-15T09:24:15.930
> 
> 标签：hibernate, struts2

**如何解决 java.lang.reflect.InvocationTargetException struts2 with hibernate 当我调用 hibenate 方法时，我将 struts2 与 hibernate 一起使用，它显示错误请帮助我。当我在主类中对其进行测试时，此代码在 Tomcat 服务器 7.0 上无法正常工作**

我的操作方法代码在这里

```
public string add()
{
  Session session=null;
    try
    {
  SessionFactory sessionFactory = new  

   Configuration().configure().buildSessionFactory();
  session =sessionFactory.openSession();

    Contact contact=new Contact();
   contact.setFirstName("sanjeev");
  contact.setLastName("kumar");
    contact.setEmailId("pr@gmail.com");
   contact.setCellNo("4664564564");
    contact.setWebsite("www.roseindia.com");
  session.save(contact);
    session.beginTransaction().commit();

    }catch(Exception e)
    {
    System.out.println(e);
    }

  return SUCCESS;
} 
```

例外

```
 java.lang.reflect.InvocationTargetException
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434) 
```

根本原因

```
 java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V
net.sf.cglib.core.DebuggingClassWriter.<init>(DebuggingClassWriter.java:47)
net.sf.cglib.core.DefaultGeneratorStrategy.getClassWriter(DefaultGeneratorStrategy.java:30)
net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:24)
net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145)
net.sf.cglib.core.KeyFactory.create(KeyFactory.java:117)
net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxyFactory(CGLIBLazyInitializer.java:117)
org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.postInstantiate(CGLIBProxyFactory.java:43)
org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:162)
org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:135)
org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:55)
org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:56)
org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:295)
org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:434)
org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:109)
org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:55)
org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:226)
org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1294)
strutsaction.ContactAction.add(ContactAction.java:67)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434) 
```

# c++ - Boost 属性树：删除一个节点

> ID：11047950
> 
> 赞同：7
> 
> 时间：2012-06-15T09:24:31.297
> 
> 标签：c++, boost, boost-propertytree

你将如何从 boost xml 属性树中删除一个节点？

我有这样的文件：

```
<folders>
  <folder>some/folder</folder>
  <folder>some/folder</folder>
  <folder>some/folder</folder>
</folders> 
```

我知道如何迭代和打印所有文件夹，但是我将如何删除其中一项并将 xml 保存回来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:43:25.890

我可能会尝试：

```
boost::property_tree::ptree pt;

pt.erase(key); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:52:24.040

```
void Backups::removeGeneric(const std::string key, const std::string value)
{
    typedef boost::property_tree::ptree Tree;

    Tree pt;
    boost::property_tree::xml_parser::read_xml(Backups::getBackupFile(), pt);

    std::pair< Tree::assoc_iterator, Tree::assoc_iterator> range = pt.equal_range(key);
    if(range.first == pt.not_found())
    {  
        std::cout << "There is nothing to remove." << std::endl;
    }
    else
    {
        bool removed = false;

        do
        {  
            if(assoc_i->second.data() == value) {
                Tree::iterator i = pt.to_iterator(assoc_i);
                pt.erase(i);
                removed = true;
                // not sure if this is completely necessary - trying
                // to guard against invalidating the iterator
                // via erase - if removed, remember to ++i!
                range = pt.equal_range(key);
                i = range.first;
            }
            else
                ++i;
         } while(i != pt.not_found());

         if(removed)
         {
             boost::property_tree::xml_parser::write_xml(Backups::getBackupFile(), pt);
             std::cout << value << " was removed." << std::endl;
         }
         else
             std::cout << value << " is not added." << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:59:23.327

好吧，我是这样做的：

```
void Backups::removeGeneric(const std::string key, const std::string value)
{
    boost::property_tree::ptree pt;
    boost::property_tree::xml_parser::read_xml(Backups::getBackupFile(), pt);

    bool remove = true;

    try {
        pt.get_child(key);
    }
    catch(boost::exception &ex)
    {  
        std::cout << "There is nothing to remove." << std::endl;
        remove = false;
    }

    if(remove)
    {  
        bool exists = false;

        boost::property_tree::ptree newPt;

        BOOST_FOREACH(boost::property_tree::ptree::value_type &v, pt.get_child(key))
        {  
            if(v.second.data() != value)
                newPt.add("scheme", v.second.data());

            if(v.second.data() == value)
                exists = true;
        }

        if(exists)
        {  
            pt.put_child(key, newPt);
            boost::property_tree::xml_parser::write_xml(Backups::getBackupFile(), pt);

            std::cout << value << " was removed." << std::endl;
        }
        else
            std::cout << value << " is not added." << std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-03T05:29:35.697

```
 // Recursively erase nodes
   void prune_nodes(ptree& Prop_tree, const char* Node_name)
   {
        ptree::iterator Root = Prop_tree.begin(); // Node iterator
        ptree::iterator End = Prop_tree.end(); // Stop sentinel
        // Loop through current 'Root-Level'
        for(Root; Root != End; Root++) 
        {
            Root->second.erase(Node_name); // Erase nodes in current 'Root-Level' sub-tree
            prune_nodes(Root->second, Node_name); // Recurse using current sub-tree as next call's ptree
        }
   } 
```

# javascript - 针对 processingjs 可视化的 HTML5 Canvas 优化

> ID：11047954
> 
> 赞同：2
> 
> 时间：2012-06-15T09:24:42.500
> 
> 标签：javascript, html, optimization, canvas, processing.js

我编写了一个[processing.js](http://processingjs.org/)可视化，用于将成对信息显示为三角形图/热图。

![三角图](../Images/0e71ed0699636b33680bd17da3a16ae2.png)

这是一个有效的 jsfiddle 版本：http: [//jsfiddle.net/timeu/uK6SB/](http://jsfiddle.net/timeu/uK6SB/)

性能还是不错的，但我认为可能还有一些改进的空间。

基本上，在上面的示例中，我将 691 个成对信息（0 到 1 之间的 477481 个浮点值）显示为热图。
因为我只对某个范围感兴趣，所以我只对高于某个阈值（在我的例子中为 0.3）的颜色编码值。
过滤后，我最终得到大约 10 000 个浮点值，我必须为其显示彩色矩形。
当用户将鼠标移到一个数据点上时，它将使所有值变灰，仅突出显示选定的值，并在左侧的缩放器中显示成对值。

该图是使用以下步骤创建的：

1.  创建一个蓝色背景的矩形（对于低于阈值的所有值）
2.  为阈值以上的所有值创建彩色矩形（大约 10.000）
3.  旋转和平移屏幕以创建三角形效果

当用户将鼠标移动到数据点上方时，除了上述步骤之外，它还会执行以下步骤：

1.  在整个绘图上绘制一个半透明的灰色矩形（使所有其他值变灰）
2.  重绘数据点

在我的第一个天真的方法中，当我更改突出显示的数据点时，我会重新绘制整个图。但是性能真的很差。分析后我发现重绘 10.000 个矩形是瓶颈。
为了解决这个问题，我将初始绘图一次绘制到后备缓冲区中（在 processing.js 中，可以使用 PImage），然后在需要更新绘图时重新绘制后备缓冲区。这显着提高了性能。

但是，当我以非常高分辨率（超过 2000 像素）显示绘图时，性能会下降很多。分析后我发现`toImageData`（重新绘制后台缓冲区）需要大部分时间。
我对如何提高画布性能做了一些研究（[html5rocks](http://www.html5rocks.com/en/tutorials/canvas/performance/)、[msdn](http://blogs.msdn.com/b/eternalcoding/archive/2012/03/22/unleash-the-power-of-html-5-canvas-for-gaming-part-1.aspx)、[stackoverflow](https://stackoverflow.com/questions/8205828/html5-canvas-performance-and-optimization-tips-tricks-and-coding-best-practices)）

所以我想出了以下可能的改进：

*   由于我最多只显示 500 个点（-> 250.000 个浮点值），因此我可以只以 500x500 像素的分辨率渲染我的绘图，然后使用**硬件放大**来放大到原始分辨率。
*   我通过将画布的宽度除以点数来计算矩形的大小。大多数情况下，我最终会得到**浮点坐标**，这会导致亚像素渲染和性能不佳。但是，舍入不是一种选择，因为我需要用完所有可用空间（如果我四舍五入，我将看不到完整的情节，如果我将坐标放置在坐标上，则情节不会跨越整个画布）。有解决办法吗？
*   **当我突出显示不同的数据点时，我可以以某种方式使用clearRect**并重绘已更改的部分，而不是重绘整个后缓冲区。不知道这到底是怎么做到的。

对于任何反馈或其他性能建议，我将不胜感激。

# php - 在 IE 中保存 php 的 pdf 输出

> ID：11047961
> 
> 赞同：0
> 
> 时间：2012-06-15T09:25:08.733
> 
> 标签：php, tcpdf

我正在使用 tcpdf 通过 php 生成 pdf 文件，并相应地设置标题，以便在浏览器中打开 php 文件时，它显示为 pdf。

现在在另一个页面中，我有一个指向该 php 文件的超链接，而在 Firefox 中，当有人右键单击此链接并使用“另存为”时，该文件将另存为 pdf 文档。然而，在 IE 上，它使用包含垃圾值（pdf 编码内容）的 php 文件扩展名保存。IE 有没有办法将 php 识别为 pdf 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:27:35.040

确保您正在使用

```
header('Content-type: application/pdf') 
```

在你的输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:28:50.663

确保设置以下标题：

```
header("Content-type: application-download");
header("Content-Length: $size");
header("Content-Disposition: attachment; filename=MyPDF.pdf");
header("Content-Transfer-Encoding: binary"); 
```

# c++ - 继承：错误：聚合类型 A 的类型不完整，无法定义

> ID：11047962
> 
> 赞同：-2
> 
> 时间：2012-06-15T09:25:15.197
> 
> 标签：c++, inheritance

我正在尝试在基类方法中创建派生类对象。

我收到上述错误。下面是一个代码片段。

有什么帮助吗？

```
 ---- Voip_connection.hh ---- 

   #ifndef __VOIP_CONNECTION_HH
   #define __VOIP_CONNECTION_HH

 class VoipConnection {
 public:

VoipConnection();
VoipConnection (ConnectionState* cs);

void update_last_data_rcvd_time() { last_data_rcvd_time_ = msec_time(); }
uint64_t last_data_rcvd_time() { return last_data_rcvd_time_; }
void set_voip_proto(int proto) { voip_proto_ = proto;}

~VoipConnection()
{
    --nx_stat().act_connections;
    voip_idle_wait_timer_clear();
    sv_streaming_offset_ = 0;
    cl_streaming_offset_ = 0;
}

// Lots and Lots of Other stuff

  }

----Voip_sip.hh -----

#ifndef __VOIP_SIP_HH
#define __VOIP_SIP_HH
#include "voip_connection.hh"

class SipObj: public VoipConnection 
{

    /* stuff */
} 

--- Voip_connection.cc ----
#include "voip_connection.hh"

class SipObj; // Tried this in .hh file as well. 

VoipConnection::voip_process_pdu(bool from_client) 
{
 SipObj sip;
 sip.process(datap, &pdu_len);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:27:55.180

为了实例化一个类，你需要完整的类型。这

```
SipObj sip; 
```

需要 的完整定义`SipObj`。一个简单的前向声明是行不通的，您需要包含适当的标题。

一般来说，我会说让基类显式依赖于它的派生类型之一是一个非常糟糕的主意。

关于您报告的另一个错误，它只是说该类`VoipConnection`没有默认构造函数。所以你必须提供一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:35:20.443

第二个错误指​​出该类`VoipConnection`没有构造函数`SipObj`尝试调用的默认构造函数。

`SipObj`in的前向声明`Voip_connection.cc`看起来很奇怪。为什么基类的实现需要知道派生类的存在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:13:59.540

好的，这就是我所做的。我需要基类来实例化派生类。我在 voip_sip.hh 中进行了前向声明，并将 voip_sip.hh 文件包含在 voip_connection.hh 中

```
---- Voip_connection.hh ---- 

 #ifndef __VOIP_CONNECTION_HH
 #define __VOIP_CONNECTION_HH
 #include voip_sip.hh

class VoipConnection {

// Lots and Lots of Other stuff

}

----Voip_sip.hh -----

#ifndef __VOIP_SIP_HH
#define __VOIP_SIP_HH
class VoipConnection;

class SipObj: public VoipConnection 
{

/* stuff */
} 

--- Voip_connection.cc ----
#include "voip_connection.hh"
#include "voip_sip.hh"

VoipConnection::voip_process_pdu(bool from_client) 
{
 SipObj sip;
 sip.process(datap, &pdu_len);
 } 
```

# python - 来自 python 的 bash 的 pwd 扩展符号链接

> ID：11047965
> 
> 赞同：1
> 
> 时间：2012-06-15T09:25:18.990
> 
> 标签：python, bash, shell, interpreter, pwd

我有一个 shell，我使用 pwd 来显示我在哪个目录中。但是当我在它是符号链接的目录中时，它显示物理目录而不是符号链接

```
import subprocess as sub

def execv(command, path):
    p = sub.Popen(['/bin/bash', '-c', command],
                    stdout=sub.PIPE, stderr=sub.STDOUT, cwd=path)
    return p.stdout.read()[:-1] 
```

如果我有文件夹，它是我打电话时`/home/foo/mime`的符号链接`/usr/share/mime`

```
execv('pwd', '/home/foo/mime') 
```

我有 /usr/share/mime

我的 shell 代码如下所示：

```
 m = re.match(" *cd (.*)", form['command'])
    if m:
        path = m.group(1)
        if path[0] != '/':
            path = "%s/%s" % (form['path'], path)
        if os.path.exists(path):
            stdout.write(execv("pwd", path))
        else:
            stdout.write("false")
    else:
        try:
            stdout.write(execv(form['command'], form['path']))
        except OSError, e:
            stdout.write(e.args[1]) 
```

我有 JavaScript 客户端

（可能以 JSON 格式返回命令和新路径的结果会更好）。

有没有办法让`pwd`返回路径到符号链接而不是物理目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:19:21.520

只有当前的 shell 知道它正在使用符号链接来访问当前目录。此信息通常不会传递给子进程，因此它们仅通过其真实路径知道当前目录。

如果您希望子流程知道此信息，则需要定义一种传递它的方法，例如通过参数或环境变量。从 shell 中导出 PWD 可能会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:38:00.317

如果你想解析符号链接，你可能想使用`pwd -P`，下面是 ZSH 和 BASH 的示例（行为相同）。

```
ls -l /home/tom/music
lrwxr-xr-x  1 tom  tom  14  3 říj  2011 /home/tom/music -> /mnt/ftp/music

cd /home/tom/music

tom@hal3000 ~/music % pwd
/home/tom/music
tom@hal3000 ~/music % pwd -P
/mnt/ftp/music 
```

使用 FreeBSD 的 /bin/pwd 我得到了这个：

```
tom@hal3000 ~/music % /bin/pwd 
/mnt/ftp/music
tom@hal3000 ~/music % /bin/pwd -P
/mnt/ftp/music
tom@hal3000 ~/music % /bin/pwd -L
/home/tom/music 
```

因此，如果您希望符号链接未解析，也许您的 pwd(1) 也支持 -L ，因为此版本默认假定为 -P ？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T16:27:35.320

用于：`shell=True`_`Popen`

```
import os
from subprocess import Popen, PIPE

def shell_command(command, path, stdout = PIPE, stderr = PIPE):
  proc = Popen(command, stdout = stdout, stderr = stderr, shell = True, cwd = path)
  return proc.communicate() # returns (stdout output, stderr output)

print "Shell pwd:", shell_command("pwd", "/home/foo/mime")[0]

os.chdir("/home/foo/mime")
print "Python os.cwd:", os.getcwd() 
```

这输出：

```
Shell pwd: /home/foo/mime
Python os.cwd: /usr/share/mime 
```

`pwd`AFAIK，除了像上面那样实际询问外壳本身之外，没有办法在 python 中获取外壳。

# ios - 使用 Stackmob iOS SDK 进行不区分大小写的搜索

> ID：11047966
> 
> 赞同：1
> 
> 时间：2012-06-15T09:25:21.243
> 
> 标签：ios, stackmob

我正在使用 Stackmob iOS SDK [http://www.stackmob.com/devcenter/docs/Datastore-API](http://www.stackmob.com/devcenter/docs/Datastore-API)与我的应用程序的 Stackmob 后端进行通信。我需要在表中进行不区分大小写的搜索。我如何使用 Stackmob API 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:23:16.240

对于不区分大小写的搜索，您可以将值存储为小写，然后将搜索字符串小写以进行完全相等匹配。

如果您的值仍需要原始大小写，则可以将其存储在单独的字段中。

希望有帮助！

-Miles O'Connell，StackMob 工程师

# ubuntu - 如何在 ubuntu 上使用包含分号分隔符的 csv 文件更新 solr？

> ID：11047968
> 
> 赞同：0
> 
> 时间：2012-06-15T09:25:25.800
> 
> 标签：ubuntu, curl, csv, solr

我尝试使用 curl 语法：
curl http://localhost:8983/solr/update/csv?stream.file=/usr/local/src/apache-solr-3.6.0/example/exampledocs/my+file.csv&separator= ;&stream.contentType=text/plain;charset=utf-8
没有运气。
我得到：
-bash：意外标记';&'附近的语法错误

如果我尝试使用 %3b 对分号进行编码，它会显示：

[1] 16319
[2] 16320
-bash：stream.contentType=text/plain：没有这样的文件或目录
[2]+ 完成分隔符=%3b
管理员@主机：/usr/local/src/apache-solr-3.6。 0/example/exampledocs$

```
<html>  
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 400 undefined field: "field1;field2;field3;field4"</title>
</head>
<body><h2>HTTP ERROR 400</h2>
<p>Problem accessing /solr/update/csv. Reason:
<pre>    undefined field: "field1;field2;field3;field4"</pre></p><hr /><i><small>Powered by Jetty://</small></i><br/> 
```

如您所见，分隔符未解码，并且以下参数未正确解析。

**谁能帮我正确编码分号？
还是有另一种方法可以使用 ubuntu 上的 csv 文件更新 solr？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:42:50.563

实际上，**用双引号括起来**解决了这个问题：

curl "http://localhost:8983/solr/update/csv?stream.file=/usr/local/src/apache-solr-3.6.0/example/exampledocs/my+file.csv&separator=;&stream.contentType=文本/纯文本；字符集=utf-8"

奇怪的是为什么在双引号时它需要一个 + 来表示空白......

# windows - Windows 7 中的本地安全策略 - 仅提升已签名和验证的可执行文件

> ID：11047970
> 
> 赞同：0
> 
> 时间：2012-06-15T09:25:27.443
> 
> 标签：windows, security, winapi, windows-7, uac

我正在编写一个嵌入清单的 Windows 应用程序，考虑到 Windows 7 中的 UAC。在测试应用程序时，我发现，如果启用本地安全策略中的“仅提升已签名和验证的可执行文件”选项，则应用程序安装没有开始。

在这种情况下，我希望我的可执行文件得到签名。如何签署可执行文件？可执行文件是否应该通过 WHQL 认证？或者我可以使用自签名证书来签署我的可执行文件吗？微软在此说了什么？

> 即使启用了本地安全策略中的“仅提升已签名和验证的可执行文件”选项，还有哪些其他方法可以启动我的可执行文件。我可以通过任何清单选项来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:31:05.117

听起来您需要对二进制文件进行 Authenticode 签名。

[http://msdn.microsoft.com/en-us/library/ms537361%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537361%28v=vs.85%29.aspx)

使用自签名这样做是没有意义的，因为这在其他机器上不是受信任的证书（因此验证失败）。您需要从证书“敲诈者”（AKA 受信任的权威机构）购买证书。

# liferay - Liferay 6.1 本地暂存问题

> ID：11047978
> 
> 赞同：1
> 
> 时间：2012-06-15T09:26:01.830
> 
> 标签：liferay, liferay-6

我正在尝试从 staging 发布到某些页面，但我不知道为什么会出现此错误：

```
 com.liferay.portal.kernel.lar.PortletDataException: com.liferay.portlet.journal.StructureNameException
    at com.liferay.portal.kernel.lar.BasePortletDataHandler.importData(BasePortletDataHandler.java:82) 
```

或者

```
 com.liferay.portal.kernel.lar.PortletDataException:  com.liferay.portal.kernel.exception.SystemException: java.io.IOException: No such file or directory 
```

如果我有一些引用数据库的 portlet。实际上，当我尝试使用文档和库查看器发布页面时，缺少文件夹并且文件夹 ID 与暂存的不同。是否有一些使用文档和库或数据库配置暂存的最佳实践？现在我正在使用带有 InnoDB 表的 Mysql 5.0.77。

按照我的门户-ext.properties

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost/xxx?useUnicode=true&characterEncoding=UTF-   8&useFastDateParsing=false
jdbc.default.username=xxx
jdbc.default.password=yyy
journal.template.velocity.restricted.variables=
theme.css.fast.load=false
theme.images.fast.load=false

javascript.fast.load=true
javascript.log.enabled=false

layout.template.cache.enabled=false

browser.launcher.url=

combo.check.timestamp=true

freemarker.engine.cache.storage=soft:1
freemarker.engine.modification.check.interval=0
openoffice.cache.enabled=false

velocity.engine.resource.manager.cache.enabled=false

com.liferay.portal.servlet.filters.cache.CacheFilter=false

com.liferay.portal.servlet.filters.themepreview.ThemePreviewFilter=true

user.country=IT
user.language=it
locales=it_IT,en_US

resource.repositories.root=/mnt/hdb_disc/liferay-portal-6.1.0-ce-ga1
auto.deploy.deploy.dir=${resource.repositories.root}/deploy
lucene.dir=${resource.repositories.root}/data/lucene/
jcr.jackrabbit.repository.root=${resource.repositories.root}/data/jackrabbit
dl.hook.file.system.root.dir=${resource.repositories.root}/data/document_library 
```

# c# - 无法将值插入表中

> ID：11047988
> 
> 赞同：0
> 
> 时间：2012-06-15T09:26:46.860
> 
> 标签：c#, sql-server

我正在将值插入表中，下面是我的代码

```
 protected void Button4_Click(object sender, EventArgs e)
    {
        string conn = ConfigurationManager.ConnectionStrings["mineConnection"].ConnectionString;
        SqlConnection conn1=new SqlConnection(conn);
        conn1.Open();
       SqlCommand cmd1=new SqlCommand("insert into emp values(@empid,@name)",conn1);
      cmd1.Parameters.Add("@empid", TextBox11.Text);
      cmd1.Parameters.Add("@name", TextBox12.Text);
        SqlDataReader dr;
        SqlCommand cmd=new SqlCommand("select * from emp where empid='"+TextBox11.Text+"'",conn1);
        dr = cmd.ExecuteReader();
        if(dr.HasRows)
        {
         if(dr.Read())
         {
           if(TextBox11.Text==dr[0].ToString())
           {
             Response.Write("id already exists");
           }
         }

        }
        else
        {
          dr.Close();
            cmd.ExecuteNonQuery();
            Response.Write("values inserted");
        }
  }
    } 
```

但问题是我无法插入这些值，我也没有收到任何错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:27:48.770

因为您没有`cmd1`在代码中的任何地方执行 SqlCommand。

定义命令后

```
 SqlCommand cmd1=new SqlCommand("insert into emp values(@empid,@name)",conn1);
  cmd1.Parameters.Add("@empid", TextBox11.Text);
  cmd1.Parameters.Add("@name", TextBox12.Text); 
```

执行查询

```
cmd1.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:30:11.107

我没有在您的代码中看到您实际执行插入命令的行。

您定义了 cmd1 命令，但从未使用过它，因此您不会插入数据。

# c# - ASP.NET MVC3：将 cookie 传递给辅助方法

> ID：11047989
> 
> 赞同：0
> 
> 时间：2012-06-15T09:26:47.217
> 
> 标签：c#, asp.net, asp.net-mvc-3, cookies

我要做的基本上是设置 URL 以将您带到使用您最后已知参数的网页。

1.  您访问参数显示全部设置为 false 的页面，因此它显示非列表。

2.  然后，您将全部显示更改为 true。所以它显示在列表中。

3.  一小时后，您重新访问该页面。它知道你最后一次证明一切都是真的。：

MR 控制器 - 索引：

```
HttpCookie mr1 = new HttpCookie("MR1", "test");
Request.Cookies.Add(mr1); // Save all parameters used in cookies. (WORKING). 
```

使用按钮查看：

```
<input type="button" class="cancel" value="Cancel" onclick="location.href='@MyNS.Helpers.HtmlHelper.MRUrl(Request.Cookies)'"> 
```

MyNS.Helpers.HtmlHelper：

```
public static String MRUrl(COOKIES? myCookie)
    {
        //If not null, add to object array.
        myCookie["MR1"].Value;
        myCookie["MR2"].Value;

        return @Url.Action("Index", "MR"); // Plus non null variables as parameters.
    } 
```

我不能做的是通过我的助手访问任何 Cookie。我也不知道这是否是最好的方法。我只想取出使用参数的 cookie 信息，并使用它来构建所需的 URL。

将有 6-7 种不同的索引页变量存储方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:38:19.613

我认为您想要这样的 UrlHelper 扩展：

```
public static class UrlHelperExtensions
{
    private static string GetCookieOrDefault(HttpRequestBase request, string name)
    {
        return request.Cookies[name] == null ? "" : request.Cookies[name].Value;
    }

    public static string MRUrl(this UrlHelper url)
    {
        var request = url.RequestContext.HttpContext.Request;

        return url.Action("Index", "MR", new
        {
            mr1 = GetCookieOrDefault(request, "MR1"),
            mr2 = GetCookieOrDefault(request, "MR2"),
            mr3 = GetCookieOrDefault(request, "MR3")
        });
    }
} 
```

然后，您可以在任何视图中使用它，如下所示：

```
<a href="@Url.MRUrl()">link text</a> 
```

或者在你的按钮的情况下......

```
<input type="button" class="cancel" value="Cancel" onclick="location.href='@Url.MRUrl()';"> 
```

Edit: You'd need to import the namespace of the UrlHelperExtensions class before using the helper, obviously.

# ios5 - 故事板崩溃 - 编码兼容的关键场景视图控制器

> ID：11047991
> 
> 赞同：15
> 
> 时间：2012-06-15T09:26:54.887
> 
> 标签：ios5, uiviewcontroller, storyboard, key

我在 iOS 5 中使用 Storyboard 时遇到间歇性崩溃。当我尝试使用 Storyboard 中的视图控制器实例化一个新对象时，我经常会收到 SIGABRT。这似乎是一个非常普遍的错误，但我找不到其他人看到这个。谢谢你的帮助！

```
SectionLandscapeViewController *sectionViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"SectionLandscapeViewController"]; 
```

和崩溃...

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIProxyObject 0xa0fba20> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key sceneViewController.' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-11-13T14:58:29.430

尝试使用不同于真实 UIViewController 类名的情节提要 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T17:52:44.270

我可以通过在 iPhone 模拟器中执行“重置内容和设置”来解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:43:49.620

打开此控制器的 .xib 文件并右键单击“文件所有者”并检查是否连接了任何错误的属性或插座。如果是错误的，您会在插座右侧找到一个黄色的小图标。只需删除它并尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T22:42:26.183

**在模拟器中运行它：**

尝试`Simulator -> Reset Content and Settings`

**在设备上**

尝试删除并重新安装应用程序

# java - 强制重新加载 EntityManager

> ID：11047992
> 
> 赞同：0
> 
> 时间：2012-06-15T09:26:57.020
> 
> 标签：java, orm, weblogic, jpa-2.0, entitymanager

我的问题是`entityManager`我的数据库在缓存中。这是一个严重的问题，因为我正在为许多用户准备一个应用程序，但我无法显示实际数据。

```
public List<Tripulante> listxxx(String tip,
        String uni, String est, boolean val) {
    em.flush();
    Query q = em.createQuery("select");
    q.setParameter(dat1, uni);
    q.setParameter(dat2, est);
    q.setParameter(dat3, val);
    return q.getResultList();
} 
```

我试过用 em.clear 来。

我很迷茫，我不知道我在 jndi 中接触了 persistence.xml 或 weblogic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:47:59.763

我解决了这个问题：

在persistence.xml中，我说：

```
<property name="eclipselink.query-results-cache" value="false"/> 
```

在我不想在缓存中读取的查询中输入：

```
public List<Tripulante> listxxx(String tip,
    String uni, String est, boolean val) {
Query q = em.createQuery("select");
q.setHint("javax.persistence.cache.storeMode", "REFRESH");
q.setParameter(dat1, uni);
q.setParameter(dat2, est);
q.setParameter(dat3, val);
return q.getResultList(); 
```

}

# c++ - 不要在 C++ 中输出尾随零

> ID：11047994
> 
> 赞同：3
> 
> 时间：2012-06-15T09:27:03.340
> 
> 标签：c++, c

如果结果为整数，**则不**输出小数点。

如果结果是浮点数，**则不要**输出任何尾随零。

如何在`c`or中进行操作`c++`：

```
double result;
/*some operations on result */
printf("%g", result); 
```

上述方法是否正确？在我的情况下，我没有得到正确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:03:33.087

您可以使用`snprintf`将 double 值打印到 char 数组中，然后从末尾到头部，将 '0' 替换为 '\0'，最后得到一个没有尾零的数字。这是我的简单代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void
remove_zeroes(double number, char * result, int buf_len)
{ 
    char * pos;
    int len;

    snprintf(result, buf_len, "%lf", number);
    len = strlen(result);

    pos = result + len - 1;
 #if 0
/* according to Jon Cage suggestion, removing this part */
    while(*div != '.')
        div++;
#endif
    while(*pos == '0')
        *pos-- = '\0';

    if(*pos == '.')
        *pos = '\0';

}

int
main(void)
{
    double a;
    char test[81];

    a = 10.1;

    printf("before it is %lf\n", a);
    remove_zeroes(a, test, 81);
    printf("after it is %s\n", test);

    a = 100;
    printf("before it is %lf\n", a);
    remove_zeroes(a, test, 81);
    printf("after it is %s\n", test);

    return 0;
} 
```

输出是

```
before it is 10.100000
after it is 10.1
before it is 100.000000
after it is 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T09:46:48.550

我更喜欢可读的代码，这将起作用并且易于理解。不过它需要提升。

```
#include <boost/algorithm/string.hpp>

std::string value = std::to_string((double)12); //yields 12.000000
boost::trim_right_if(value, boost::is_any_of("0")); //turn 12.000000 -> 12.
boost::trim_right_if(value, boost::is_any_of(".")); //turn 12\. -> 12 
```

请注意，下面的代码适用于 12，不适用于 120 或 0。您必须将其修剪两步，以免删除小数点左侧的零。所以不要试图保存一行！

```
std::string value = std::to_string((double)120);
boost::trim_right_if(value, boost::is_any_of("0.")); //yields 12 not 120 
```

在评论中向我指出，6 位精度可能不够。然后试试这个：

```
#include <iostream>
#include <sstream>
#include <iomanip>
#include <boost/algorithm/string.hpp>

std::stringstream sStream;
sStream << std::fixed << std::setprecision( 16 ) << (double)12; //yields 12.0000000000000000
std::string value = sStream.str();
boost::trim_right_if(value, boost::is_any_of("0")); //turn 12.000000000000000 -> 12.
boost::trim_right_if(value, boost::is_any_of(".")); //turn 12\. -> 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:40:16.680

如果您知道结果是整数，则可以使用整数变量或简单地转换为整数：

```
double result;
/*some operations on result */
printf("%d", (int)result); 
```

**[编辑]**尝试这样的事情：

```
#include <stdio.h>
#include <math.h>
void VariablePrecisionPrinter( double num, double precision )
{
    if( fabs(num-int(num)) < precision )
    {
        printf("%d\n", (int) num);
    }
    else
    {
        printf("%g\n", num);
    }
}

void Test(  )
{
    const double Precision = 0.001;
    VariablePrecisionPrinter( 100.001, Precision );
    VariablePrecisionPrinter( 100.00001, Precision );
    VariablePrecisionPrinter( 0.00001, Precision );
    VariablePrecisionPrinter( 0.0, Precision );
    VariablePrecisionPrinter( 0.1, Precision );
} 
```

...这将打印：

```
100.001
100
0
0
0.1 
```

**[编辑2]**

这有点笨拙，但它可以满足您的要求：

```
#include <string>
#include <stdio.h>
#include <math.h>

using namespace std;

void VariablePrecisionPrinter( double num )
{
    // Convert the number to a string
    const int tmpSize = 128;
    char tmp[tmpSize] = {'\0'};
    sprintf(tmp, "%lf", num);
    string truncatedNum = tmp;

    // If the conversion ends with a 0, strip the extra parts.
    size_t p2 = truncatedNum.find_last_not_of( '0' );
    if( string::npos != p2 )
    {
        truncatedNum = truncatedNum.substr( 0, p2+1 );

        // Make sure we're not left with just a decimal point at the end
        size_t decimalPos = truncatedNum.find_last_of('.');
        if( decimalPos == truncatedNum.length()-1  )
        {
            truncatedNum = truncatedNum.substr( 0, truncatedNum.length()-1 );
        }
    }

    printf( "%s\n", truncatedNum.c_str() );
}

void Test(  )
{
    const double Precision = 0.001;
    VariablePrecisionPrinter( 100.001 );
    VariablePrecisionPrinter( 100.00001 );
    VariablePrecisionPrinter( 0.00001 );
    VariablePrecisionPrinter( 0.0 );
    VariablePrecisionPrinter( 0.1 );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:45:53.777

因为编译器`result`始终是双精度的，因为它是这样声明的。在内部，它具有与整数不同的内存布局。

要正确执行您想要实现的操作，请检查是否`result`足够接近自然数，并在打印前将其转换为适当的整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T20:28:51.623

```
string DoubleToString (double inValue)
{
   std::stringstream buildString;

   int i = 0;
   double valueWithPrecision = 0;

   do
   {
      buildString.str(std::string());
      buildString.clear();

      buildString << std::fixed << std::setprecision(i) << inValue;

      valueWithPrecision  = std::stod(buildString.str().c_str());

      i++;
   } while (valueWithPrecision  != inValue);

   return buildString.str();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-26T16:17:43.990

现在你应该只为操纵器插入一行：

```
cout << noshowpoint;
cout << 12.000000000000000 << endl; 
```

或者，如果它甚至不是默认值，则在您的输出（作为 oneliner）之前插入此操作。

如果您喜欢相反的方式，那么`showpoint`就是您的朋友。

# c# - 避免在过滤器中使用太多 if else

> ID：11047995
> 
> 赞同：2
> 
> 时间：2012-06-15T09:27:08.767
> 
> 标签：c#, design-patterns, c#-4.0

*我希望在myString*具有这些值 A、B、C 或 D时执行以下代码。现在我知道我有这 4 个值，但在不久的将来我可以在这个集合中有更多的值。我的代码：

```
var result = MyBlRepository.MyBLMethod(myString); 
```

拥有 n 个 if else 循环的简单方法，但当我有更多值时它会增长。处理这个问题的最佳方法是什么？哪种设计模式最适合它？

**编辑：**我不想在这里保留过滤器。我不想修改这个文件的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:33:18.437

如果您只是检查是否`myString`有一组常量值中的一个，您可以简单地使用`switch`：

```
bool result;
switch (myString) {
    case "A":
    case "B":
    case "C":
    case "D":
        result = true;
        break;
    default:
        result = false;
        break;
} 
```

请注意，这是此代码的一个特别长的版本：

*   如果您想根据比较结果返回一个值，您可以只写`return true;`/`return false;`并省略这些`break;`行。
*   如果您想检查该值并在它不在所需的一组值中时抛出异常（尽管`enum`在这种情况下类型可能更合适），您不需要该`result`变量，只需在这种`default`情况下抛出异常（并且`break;`在默认情况下不再需要）。

否则（如果在编译时尚未确定任何值），请按照其他答案中描述的方式使用`List<string>`/ `HashSet<string>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:40:24.957

您需要策略模式，如此[处所述](http://www.codeproject.com/Articles/52807/Design-Patterns-Part-1-The-Strategy-Pattern)

它允许您很好地处理多个 if 语句。在上面的链接中有一个简短的教程展示了如何处理多个 if 语句。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:29:33.557

```
var list = new List<string>
{
  "A", 
  "B", 
  "C",
  "D"
 };
 bool exists = list.Contains(myString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:17:29.810

我的 seggestion 是`Regex`与外部配置文件一起使用，您可以`app.cofing`使用`custom xml file`

您将这样的可能值存储`expression = "^(A|B|C|D)$"` 在您的程序中：

```
var expression = ReadFromConfigFile(); 
var regex = new Regex(expression);
if(regex.IsMatch(myString))
 // do work 
```

# javascript - 将 jQuery 对象与新的选择器结合起来

> ID：11047996
> 
> 赞同：0
> 
> 时间：2012-06-15T09:27:16.010
> 
> 标签：javascript, jquery

您将如何在此处[https://stackoverflow.com/a/7079032/1330629](https://stackoverflow.com/a/7079032/1330629)执行与 rsplak 的答案类似的功能，但在其中包含已定义的变量？例如，我定义了一个变量，这样我就不会重复查询 DOM，例如：`var $StartDateTime = $("#StartDateTime");`

并想将它包含在另一个选择器中，我没有将其定义为变量。

这可能吗？我的思路是这样的：

```
$($StartDateTime,link,#upload_link2,#upload_link3").each(function(){
    $(this).upload({
        //whateveryouwant
    });
}); 
```

但显然那是行不通的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:28:26.193

你应该使用`add`：

```
var $combined = $('#newElement').add($StartDateTime); 
```

或者这个重载：

```
var $combined = $StartDateTime.add('#newElement'); 
```

[`add`文档：](http://api.jquery.com/add/)

> 描述：将元素添加到匹配元素的集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:39:06.330

要么[`add`](http://api.jquery.com/add/)按照@gdoron 的建议使用

```
var $combined = $StartDateTime.add('#newElement'); 
```

或者（恕我直言，生成更优雅的代码）[`jQuery.merge`](http://api.jquery.com/jQuery.merge/)：

```
var $newElement = $('#newElement');
var $combined = $.merge($StartDateTime, $newElement); 
```

# python - 检查列表中是否存在多个单词并返回布尔值列表

> ID：11047999
> 
> 赞同：0
> 
> 时间：2012-06-15T09:27:19.707
> 
> 标签：python, list, boolean

我已经定义了一个函数来检查一个或多个单词是否在一个列表中，它工作正常，但现在我试图弄清楚我应该如何更改我的代码，所以我得到一个布尔值**列表**，具体取决于是否单词在列表中。这是我一直在摆弄的两个独立的功能：

**这是没有布尔值的那个，它可以完美地打印单词以及它们是否出现在文本中，但是该函数不输出布尔值（它只是打印，我知道这有点乱）**

```
def isword(file):
    wordlist=input("Which word(s) would you like to check for in the text? ")
    wordlist=wordlist()
    file=chopup(file) ##This is another function of mine that splits a string(file) into   a list
    for n in range(0,len(wordlist)):
        word=wordlist[n]
        n+=1
        word=word.lower() ##so case doesn't matter when the person enters the word(s)
        if word in file:
            print(word, ":TRUE")
            for i in range(0,len(file)):
                if file[i]==word:
                    print(i)
        else:
            print(word," :FALSE") 
```

**这个输出一个布尔值，但仅用于一个单词。我想知道如何组合它们，以便我得到一个布尔值列表作为输出，不打印**

```
def isword(file):
    a=True
    wordlist=input("Which word(s) would you like to check for in the text? ")
    wordlist=wordlist()
    file=chopup(file) ##This is another function of mine that splits a string(file) into a list
    for n in range(0,len(wordlist)):
        word=wordlist[n]
        n+=1
        word=word.lower()
        if word in file:
            a=a
        else:
            a=False
    return(a) 
```

**我最终得到了这个，它工作得很好（我的变量/函数名称在项目中实际上是法语，因为这是法国大学的家庭作业）**

```
def presmot(fichier):
    result=[]
    listemots=input("Entrez le/les mots dont vous voulez vérifier la présence : ")
    listemots=listemots.split()
    fichier=decoupage(fichier)
    for n in range(0,len(listemots)):
        mot=listemots[n]
        mot=mot.lower()
        def testemot(mot):
            a=True
            if mot in fichier:
                a=a
            else:
                a=False
            return(a)
    result=[(mot,testemot(mot)) for mot in listemots] 
    return(result) 
```

唯一烦人的是布尔值是英文的，哦，好吧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:40:59.707

获取输入存在错误。使用 raw_input 而不是输入。

```
def isword(file):
    wordlist= raw_input("Which word(s) would you like to check for in the text? ").split()
    file=chopup(file)
    return [word.lower() in file for word in wordlist] 
```

仅供参考，你不需要`n+=1`。for 循环自动递增 n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:41:17.087

我们来看一下：

*   您现在返回一个布尔值，但它需要是一个列表。所以你应该`result = []`在函数的开头和`return result`结尾都有某个地方。
*   剩下要做的就是为您正在考虑的每个单词附加`True`或添加到该列表中。`False`这应该不会太难，因为您已经在计算文件中是否有单词。