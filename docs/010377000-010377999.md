# StackOverflow 问答 10377000-10377999

# jquery - 哈希导航；使用 CSS3 动画过渡或禁用 CSS3 标签导航并使用 jQuery。但是怎么做？

> ID：10377001
> 
> 赞同：0
> 
> 时间：2012-04-29T23:45:34.330
> 
> 标签：jquery, css, transitions, hashtag

CSS3 和 jQuery 都可以实现哈希链接导航。但我无法使用 CSS3 进行动画转换。而且我不能在支持它的浏览器上关闭 CSS3 哈希链接，导致 jQuery 和 CSS3 都想要做这个动作，而 CSS3 十有八九获胜。

在这第一个 jsfiddle 中，我希望我的页面看起来像这样，导航是由浏览器自动完成的：

[http://jsfiddle.net/mg7Bw/2/](http://jsfiddle.net/mg7Bw/2/)

第二个 jsfiddle 包含相同的页面，但加载了 jQuery 以及一个简单的脚本，该脚本应该在按下链接时做一些花哨的动画，但大多数时候太慢了。但是，如果您单击的次数足够多，您将看到一次或两次动画。

[http://jsfiddle.net/XHSyV/](http://jsfiddle.net/XHSyV/)

在 jQuery 或 CSS3 中进行转换有其优点和缺点。大多数情况下，我想两者兼得。如果浏览器可以进行 CSS3 转换，发送更少的代码。如果浏览器不能，请发送 jQuery 代码。但最重要的是，我只想要一种行之有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:49:59.820

看一下[modernizr](http://modernizr.com/) - 它会将CSS 类添加到`html`标签中，以便您了解用户的浏览器是否支持CSS3 过渡。

沿着这些思路：

```
.csstransitions #someselector:hover {
    // do some fancy css3 transition here
}

$('.nocsstransitions #someselector').on('mouseover', function(){
    // do nifty jQuery animation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:11:13.973

我在这里得到了一个基于 jQuery 的解决方案：使用 localsscroll 库切换 hashchange 库并相应地修改源。看看闲置的 jsfiddle：

[http://jsfiddle.net/XHSyV/1/](http://jsfiddle.net/XHSyV/1/)

唯一需要添加的是主题标签的更新程序。

编辑：将 hash:true 添加到 localScroll 解决了这个问题：

[http://jsfiddle.net/XHSyV/2/](http://jsfiddle.net/XHSyV/2/)

# javascript - 如何在javascript中访问对象内部的对象

> ID：10377002
> 
> 赞同：-1
> 
> 时间：2012-04-29T23:45:42.033
> 
> 标签：javascript, jquery, ajax, .post

这是要返回的对象。

```
Object: 
    contributors_enabled: false
    created_at: "Sat Apr 18 02:20:51 +0000 2009"
    ...
    status: Object
    ...
    verified: false 
```

如您所见，有 2 个对象。父级，然后是内部称为“状态”的对象。

在 javascript 中，如何访问“状态”对象。

我试过`object.status`返回null。

真实代码：

```
function get_data( $id ) { 
    global $tmhOAuth; 
    $code = $tmhOAuth->request( 'POST', $tmhOAuth->url('1/users/lookup.json', ''), array( 'user_id' => $id ) );
    if ( $code == 200 ) {
        $data = json_decode($tmhOAuth->response['response'], true);
        return $data; 
    } else { 
        outputError($tmhOAuth);
    }   
} 

if ( !empty( $_POST ) && !is_null( $_POST ) ) { 
    extract( $_POST ); //imports $id; 
    $data = get_data($id); 
    exit(json_encode($data)); 
} 

$.post( 
    '/twitauth/app.php', 
    data, 
    function( response ) { 
        console.log( response ); 
    }, 
   'json'
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T23:49:46.617

您将需要发布实际代码，因为这两个中的任何一个都应该工作：

```
object.status
object["status"] 
```

如果这些不起作用，那么您以某种方式错误地定义了对象，或者对象中的对象是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:50:27.810

您可以使用运算符引用 n 层对象`.`，没问题。

这是一个[**例子**](http://jsfiddle.net/EcC7B/1/)

```
var myobj = {
    'a' : 1,
    'b' : 2
};

var foobar = {
    'foo' : 'bar',
    'status' : myobj    
    };

console.log(foobar.status.a); 
```

# objective-c - 为什么这个 NSArray 没有在 ARC 下被释放？

> ID：10377004
> 
> 赞同：0
> 
> 时间：2012-04-29T23:45:51.440
> 
> 标签：objective-c, automatic-ref-counting

我从我的主包中加载了一个静态属性列表。很简单。但是，在我将其设置为 nil 后，属性列表不会被释放。为什么是这样？分配的内存很容易监控，因为属性列表很大。

```
NSPropertyListFormat format = NSPropertyListBinaryFormat_v1_0; 
NSError *error = nil; 
NSArray *myArray = [NSPropertyListSerialization propertyListWithData:[NSData dataWithContentsOfFile:bundleFilePath] 
                                                                          options:NSPropertyListImmutable
                                                                           format:&format
                                                                            error:&error];

myArray = nil; 
// Still takes up allocated space (as seen in memory monitor via instruments). 
```

使用自动释放池：

```
- (void)someMethodCalledOnTheMainThread
{ 
    @autoreleasePool {
        NSString *bundleFilePath = @"..."; 
        NSPropertyListFormat format = NSPropertyListBinaryFormat_v1_0; 
        NSError *error = nil; 
        NSArray *myArray = [NSPropertyListSerialization propertyListWithData:[NSData dataWithContentsOfFile:bundleFilePath] 
                                                                          options:NSPropertyListImmutable
                                                                           format:&format
                                                                            error:&error];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:57:57.383

该阵列已自动释放。根据[内存管理指南](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html#//apple_ref/doc/uid/TP40008195-CH27-SW3)，该`propertyListWith...`方法将返回一个自动释放的对象，这意味着对该对象的引用将在将来的某个时间释放。您的代码基本上等同于这个（没有ARC）：

```
NSArray *myArray = [[NSPropertyListSerialization propertyListWith/*stuff*/] retain];
// 1 reference + 1 autoreleased reference
[myArray release]; myArray = nil;
// 1 autoreleased reference 
```

由于您没有耗尽包含该数组的自动释放池，因此仍然存在对它的引用。它将在将来的某个时候被释放，很可能是在当前运行循环结束或线程退出时。如果您想强制阵列尽快释放，您可以创建自己的自动释放池。

```
@autoreleasepool {
    NSArray *myArray = [[NSPropertyListSerialization propertyListWith/*stuff*/] retain];
    // 1 reference + 1 autoreleased reference
    [myArray release]; myArray = nil;
    // 1 autoreleased reference
} // no references. The array is deallocated 
```

现在，阵列在已知时间被释放。请注意，在池范围内创建的任何其他自动释放对象也将被释放，如果您不计划这样做可能会导致问题。这使您可以更明确地控制何时释放数组，但除非您在循环中创建此属性列表，否则很可能不会产生明显的差异，因为运行循环会在您返回后很快耗尽其自动释放池。

# php - 如何每 5 首歌曲播放播放列表中的 5 秒音频片段？

> ID：10377006
> 
> 赞同：-1
> 
> 时间：2012-04-29T23:46:38.647
> 
> 标签：php

这基本上是我的编程项目，正在查看我的朋友脚本，名为：Pickle Auto Playlist。现在该脚本正在使用 array_sort() = RND 进行随机...并且它生​​成或使用播放列表 txt 或 xml 文件，但它不像编辑 xml 列表那么容易。我需要寻找什么并遵循步骤来开始和完成这项工作？

这是我朋友发给我的脚本，如果有人知道的话。它打印一个播放列表和 xml

[http://pastebin.com/xN4jUVEe](http://pastebin.com/xN4jUVEe)

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:00:54.380

不敢相信，但我们小组 (azphp.org) 的 Brian 建议使用 mod (%) 和计数器将您需要的项目自动注入队列。

开始时：

```
$counter = 0; 
```

每次播放歌曲时：

```
$counter++;
if($counter % 5 == 0) { queue_the_ad(); $counter = 0; } 
```

# java - Java EE 在 scriptlet 中没有文本字段吗？

> ID：10377007
> 
> 赞同：0
> 
> 时间：2012-04-29T23:46:41.923
> 
> 标签：java, html, jakarta-ee

所以我一直在网上徘徊一段时间来寻找这个答案。有没有办法在 JSP 的 java scriptlet 中拥有文本字段？我知道在 C# 中你可以拥有

```
@Html.TextField(); 
```

这将创建一个文本字段供您用作 C# 代码。

为什么我想要这个，是我正在抓取一个会话并检查用户属性是否存储了用户名。如果是，我不希望它显示用户名文本框。尽管据我所知，我不能用 java scriptlet 做到这一点。

```
<%if(session.getAttribute("user") == null) %>
Username: <input type="text" name="name"><br/> 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:16:49.890

这将起作用，但最好使用[JavaServer Pages 标准标记库](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html) 和[表达式语言](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL3.html)
而不是 scriptlet。它往往会使 JSP 页面的维护复杂化。

您可以在 JSP 页面上设置作用域变量。以这种方式：

```
<c:set var="myVariable" scope="page" value="expression"/> 
```

借助带有 EL 的 JSTL，您的情况可以轻松解决：

```
<c:if test="${sessionScope.user eq null}">
   <c:out value="Username: ${myVariable}" />
</c:if> 
```

[如果您有更复杂的逻辑，那么创建自定义标签](http://docs.oracle.com/cd/E13222_01/wls/docs92/taglib/quickstart.html)是有意义的。

# python - Mercurial Hook - 在提交前更改提交消息

> ID：10377011
> 
> 赞同：8
> 
> 时间：2012-04-29T23:47:09.673
> 
> 标签：python, mercurial, mercurial-hook

**编辑**制作了这个基本钩子以防止分支名称和提交消息 bugID 不匹配。[https://gist.github.com/2583189](https://gist.github.com/2583189)

所以基本上这个想法是，如果分支名称类似于 bug_123 或 feature_123，则挂钩应将“BugID：xyz”附加到提交消息的末尾。但是，我在找出如何执行此操作时遇到问题，因为大多数 pretxncommit 示例人们不想改变变更集描述。

这就是我到目前为止所拥有的。它使用正确的消息更新 .hg/commit.save，但此消息永远不会传输到提交。但是，它会显示在下一次提交的默认消息框 (tortoisehg) 中。也许 pretxncommit 不是正确的钩子？

我可以使用 precommit 钩子，读取 commit.save 和 repo['tip'].branch() 文件并更改它，如果可以，我从哪里获取分支名称？

```
#
# Fogbugz automaticically add BugID:123 to commit messages based on branch names.
# Your branch name must be in the format feature_123_description or bug_123_description
#

import re
import mercurial, sys, os

_branch_regex = re.compile('(feature|bug|case|bugid|fogbugz)_(\d+)')
_commit_regex = re.compile(r'\b(?P<case>(review|case|bug[zs]?(\s| )*(id)?:?)s?(\s| )*([#:; ]| )+)((([ ,:;#]|and)*)(?P<bugid>\d+))+',re.I)

def pretxncommithook(ui, repo, **kwargs):
    ui.write('hook pretxncommithook running from fogbugz.py\n')
    """
    Checks a single commit message for adherence to commit message rules.

    To use add the following to your project .hg/hgrc for each
    project you want to check, or to your user hgrc to apply to all projects.

    [hooks]
    pretxncommit.fogbugz = python:fogbugz.pretxncommithook
    """
    hg_commit_message = repo['tip'].description()
    commit_has_bugid = _commit_regex.match(hg_commit_message) is not None

    match = _branch_regex.match(repo['tip'].branch())
    if match:
        hg_commit_message = hg_commit_message + ' BugID:'+ match.groups()[1]
            #hg_commit_message needs to be escaped for characters like >
        os.system('echo ' + hg_commit_message + ' > .hg/commit.save') 
```

在一个稍微不相关的注释中，如果 Fogbugz/Kiln 团队的任何人看到这个......请更新您的软件以读取分支名称，我不需要在每个该死的提交上放置 BugID:x。首先，它浪费了我的时间。其次，如果案例 ID 输入错误，它不会出现在错误上，而不会引起很多混乱。许多开发人员使用每个错误/功能系统的分支。这是我工作的公司政策。雾虫很烂。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T00:19:32.017

i think the problem here is that the `pretxncommit` hook is executed at a point where you can't really change anything anymore. And you can't really get the commit message at that point either, because it's not set on any context object accessible.

`repo['tip'].description()` doesn't refer to the changelog being committed but to old tip already committed, that would be `repo[None]`, but as some digging in the source revealed it's not the same context object that's being persisted, so it's no point in changing it.

the only way i could find would be to use an earlier hook - like `precommit` - and monkeypatch the `commitctx` method of the repository like this:

```
def precommit_hook(repo, **kwargs):

    # keep a copy of repo.commitctx
    commitctx = repo.commitctx

    def updatectx(ctx, error):

        # check if `ctx.branch()` matches ...

        # update commit text
        ctx._text += " ... additional text"

        # call original
        return commitctx(ctx, error)

    # monkeypatch the commit method
    repo.commitctx = updatectx 
```

this way cou can access the context object just before it's committed.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T14:56:19.663

mata 的回答很聪明，但是如果您愿意编写自己的扩展程序，实际上有一种内置的方法可以做到这一点（这[真的很容易](http://mercurial.selenic.com/wiki/WritingExtensions)，只不过是编写您想要编写的钩子功能而已）。

执行此操作的“正确”方法是在 中对存储库进行子类化`reposetup`，如`mercurial.extensions.wrapfunction`(因为事实证明`wrapfunction`这不是对 repos 执行此操作的正确方法：

> ```
> Wrapping methods of the repository object is not recommended since
> it conflicts with extensions that extend the repository by
> subclassing. All extensions that need to extend methods of
> localrepository should use this subclassing trick: namely,
> reposetup() should look like
> 
>   def reposetup(ui, repo):
>       class myrepo(repo.__class__):
>           def whatever(self, *args, **kwargs):
>               [...extension stuff...]
>               super(myrepo, self).whatever(*args, **kwargs)
>               [...extension stuff...]
> 
>       repo.__class__ = myrepo 
> ```

因此，例如，您的扩展程序看起来像这样（精简）：

```
#!/usr/bin/python
import re
import mercurial, sys, os

_branch_regex = re.compile('(feature|bug|case|bugid|fogbugz)_(\d+)')
_commit_regex = re.compile(r'\b(?P<case>(review|case|bug[zs]?(\s| )*(id)?:?)s?(\s| )*([#:; ]| )+)((([ ,:;#]|and)*)(?P<bugid>\d+))+',re.I)

#One of mercurial's callbacks for extensions. This is where you
# you want to subclass repo to add your functionality.
def reposetup(ui, repo):

    #Create a derived class that actually does what you want.
    class myrepo(repo.__class__):
        def commitctx(self, ctx, *args, **kwargs):
            match = _branch_regex.match(ctx.branch())
            if match:
                ctx._text += ' BugID:'+ match.groups()[1]

    #Make sure to actually use the new subclass.
    repo.__class__ = myrepo

### Finish off the extensions stuff

# We aren't adding any commands to hg.
cmdtables = {}

#List of known compatible versions of hg.
testedwith = '2.7.1' 
```

我已经对此进行了测试，并且效果很好。您可以通过将扩展名保存在 python 文件中来使用扩展名，例如`/some-path/fogbugz.py`，并将其添加到`extensions`hgrc 中的组下：

```
[extensions]
fogbugz = /some-path/fogbugz.py 
```

# php - 我想从 url 中获取价值

> ID：10377015
> 
> 赞同：-1
> 
> 时间：2012-04-29T23:47:59.010
> 
> 标签：php, jquery

我有灯箱，并且有这样的 php 循环

```
while ($row = mysql_fetch_object($something))
{
    echo '<a href="?id='.$row->id.'">'.$row->id.'</a>';
} 
```

我希望在单击链接灯框时出现并包含来自 mysql 的 id 值但链接不会更改为在 php 中使用 POST 取值任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:50:16.960

将 lightbox 的内容放在 PHP 文件中。

发送 Ajax 请求以获取

在灯箱 div 中显示响应文本

# ruby-on-rails-3 - 在 Rails 查询中获取数据库错误

> ID：10377020
> 
> 赞同：0
> 
> 时间：2012-04-29T23:49:38.520
> 
> 标签：ruby-on-rails-3, postgresql

在我试图完成的 rake 任务中，我在 PostgreSQL 中的查询中遇到错误。

```
 posts = Post.where("status IS ? AND publish_on < ?", 'queued', Time.now) 
```

这是错误：

```
PGError: ERROR:  syntax error at or near "'queued'"
    LINE 1: SELECT "posts".* FROM "posts"  WHERE (status IS 'queued' AND...
                                                            ^
    : SELECT "posts".* FROM "posts"  WHERE (status IS 'queued' AND publish_on < '2012-04-29 23:44:06.423516') 
```

起初我以为是引号，但更改它们不起作用。现在我认为这可能是我如何构建 and 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:53:16.000

`IS`仅用于与`TRUE`、`FALSE`或进行比较`NULL`。您可能想要`=`：

```
posts = Post.where("status = ? AND publish_on < ?", 'queued', Time.now) 
```

# c++ - boost::threads 基于队列算法

> ID：10377026
> 
> 赞同：4
> 
> 时间：2012-04-29T23:50:18.443
> 
> 标签：c++, multithreading, boost-thread, deque

假设有一个 std::deque 指向要执行的任务的指针队列，那么确保一次运行的线程数限制为 CPU 内核数的最佳方法是什么？即任务完成后，剩余的任务随后启动。

我为之前的帖子制作了以下代码，我现在遇到的问题是我不确定实施我所描述的最佳策略，并认为这可能值得征求意见。

请注意，我上面提到的“std::deque 指针队列”并不是指代码中的 deque mtasks。我不希望从这个双端队列中弹出任务，因为我正在使用它来存储以前完成的任务。

在程序类型中，*任务 p1 p2 p3 p4 p5*在提示符下，然后是*info*以检查每个任务的当前状态。请注意，目前所有 5 项任务大约在同一时间完成。但是，我真正想要的是前 2 个完成（双核机器），然后是接下来的 2 个，依此类推。

这样做的原因是在实践中这些任务可能需要几个小时，因此我想尽快获得第一批结果，以便我可以将它们加载到 MATLAB 或其他任何东西中。

我希望我清楚自己和示例代码。我猜 thread::hardware_concurrency() 涵盖了核心部分的数量....

谢谢。

```
#include <iostream>  
#include <string>
#include <sstream>
#include <boost/thread.hpp>  

using namespace std;

class task {
public:
    string mname;
    bool completed;
    void start()
    {
        int a = 0;
        for (int i=0 ; i<10000; i++)
        {
            for (int j=0 ; j<100000; j++)
            {
                a= i*2;
            }
        }
        this->completed = true;
    }
    task(string name)
    {
        mname = name;
        completed = false; 
    }
};

class taskManager{
    public:
        boost::thread_group threads;
        void startTask( string name )
        {
            //add new task to vector list           
            mtasks.push_back( task(name) );
            // execute start() on a new thread
            threads.create_thread( boost::bind( &task::start, &mtasks.back()) );
        }
        int tasksTotal()
        {
            return mtasks.size();
        }
        string taskInfo(int i)
        {
            string compstr("Not Completed");
            if ( mtasks.at(i).completed == true )
            {
                compstr = "Completed";
            }
            return mtasks.at(i).mname + " " + compstr; 
        }
    private:
        deque<task> mtasks; 
};

int main(int argc, char* argv[])  
{
    string cmd, temp;
    stringstream os;
    bool quit = false;
    taskManager mm;

    cout << "PROMPT>";

    while (quit == false)
    {
        //Wait for a valid command from user
        getline(cin,cmd);

        // Reset stringstream and assign new cmd string
        os.clear(); 
        os << "";
        os << cmd;
        //parse input string
        while (os >> temp) 
        {               
            if ( temp.compare("task") == 0 )
            {
                while (os >> temp) { mm.startTask( temp ); }                     
            }
            if ( temp.compare("info") == 0 )
            { 
                // Returns a list of all completed and not completed tasks
                for (int i = 0; i<mm.tasksTotal(); i++)
                {
                    cout << mm.taskInfo(i).c_str() << endl;
                }                           
            }
            if ( temp.compare("quit") == 0 ){ quit = true; }
        }

        cout << "PROMPT>";
    }

    mm.threads.join_all();      

    return 0;  
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:03:03.273

您所描述的是线程池模式，其中您有固定数量的线程和一组要使用这些线程执行的任务（#tasks > #threads）。

线程池模式的[维基百科](http://en.wikipedia.org/wiki/Thread_pool_pattern)条目有更多信息。您可以自己编写，也可以使用非官方的[boost threadpool library](http://threadpool.sourceforge.net/)之类的东西。

# javascript - 如果将 Div 放在 img 标签的顶部，则不会在 Div 上触发 Mousedown 事件 - 问题仅在 IE 中

> ID：10377027
> 
> 赞同：2
> 
> 时间：2012-04-29T23:50:20.990
> 
> 标签：javascript, jquery, html, internet-explorer

我在 img 标签上放置了一个 Div。在我的示例中，带有 cls 'justForClickCls' 的 Div 被放置在一个 img 的顶部，该 img 包装在另一个 div 'gameBoardElementGreyCls' 中。'justForClickCls' div 上的 mousedown 未在 IE 中触发。但是，它适用于所有其他浏览器。

这是代码。任何帮助深表感谢。顺便说一句，我正在测试它我 IE 9

```
<div class='gameBoardElementCls'>
    <div id='9' class='justForClickCls' style='z-index:10;position:absolute;margin:20px;width:80px;height:80px;'></div>
    <div class='gameBoardElementGreyCls'><img src='img/greygmelement.png' width='110px' height='110px'></img></div>
</div>

<script>
    $("div.justForClickCls").mousedown(function () {
        alert('clicked 1');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T02:57:21.920

在我的情况下，将不透明度设置为零不是一个有效的解决方案，因为 div 有其他将变得不可见的元素。这解决了问题。将以下内容添加到 div 样式中： background-image:url('.');

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:23:08.010

几个小时都被同样的问题困住了，user983327 的最后一条评论挽救了我的一天：IE 要求我为元素设置背景颜色才能工作。

将不透明度设置为 0 可以达到与透明背景相同的结果，并使整个东西跨浏览器兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:55:52.443

您应该修复的第一件事是 img 中的结束标签

```
<img src='img/greygmelement.png' width='110px' height='110px'></img> 
```

至

```
<img src='img/greygmelement.png' width='110px' height='110px' /> 
```

接下来，*mousedown*似乎没有必要，因为您试图捕获点击。简单使用`click`而不是`mousedown`.

现在检查这个你的编码[演示](http://jsfiddle.net/8zFzP/)，它**正在工作**

# java - Java 错误：应在名为的文件中声明

> ID：10377030
> 
> 赞同：6
> 
> 时间：2012-04-29T23:50:28.893
> 
> 标签：java

我对Java相当陌生，并试图弄清楚如何解决以下错误：

## 错误读取

```
CalculatorWithMemory.java:1: class Calculator is public, should be declared 
  in a file named Calculator.java
public class Calculator 
```

所以我的想法是，这意味着我必须保存 2 个不同的 .java 文件。然而，这是一个类，我只有一个提供的文本块来输入我的解决方案，所以我不能将它们保存为 .java 文件。关于解决方案的任何想法都会很棒。

提前致谢！

提供所有信息。我正在尝试解决以下问题。

## 问题

超类 Calculator 包含：

*   一个（受保护的）双精度实例变量，累加器，它包含计算器的当前值。

编写一个子类 CalculatorWithMemory，其中包含：

*   双实例变量，内存，初始化为 0
*   一种方法，保存，将累加器的值分配给内存
*   一种方法，recall，将内存的值分配给累加器
*   一种方法 clearMemory，将零分配给内存
*   一个方法，getMemory，它返回存储在内存中的值

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T23:52:06.603

As the error message implies, if you declare a class as `public`, it needs its own .java file. If you don't want to do that, then don't define it as `public`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T23:52:01.087

您需要命名包含该类的文件`Calculator.java`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-05T18:30:00.093

```
class Something {

} 
```

代替

```
public class Something {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-18T08:15:15.317

当给定 Java 程序的类名和文件名不匹配时，会发生此错误。例如，假设以下程序保存在名为 Foo.java 的文件中：

```
public class Bar {     
    public static void main(String[] args) {
        System.out.println("Hello, world!");
    }
}

1 error found:
File: Foo.java  [line: 1]
Error: class Bar is public, should be declared in a file named Bar.java 
```

由于 Foo 与 Bar 不匹配，因此代码无法编译。要修复此错误，请重命名文件或更改类名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T23:53:38.663

包含 main 的公共类的名称必须与文件名相同，在您的情况下，文件名应该是`Calculator.java`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-01T03:45:35.380

如果你想在同一个文件中有多个类，那么你应该只写一个与文件同名的公共类。

您可以定义为“class abc{}”或使用其他修饰符然后公开的所有其他类。

# mysql - 有什么方法可以在 MySQL 中创建用户特定的表“指针”？

> ID：10377031
> 
> 赞同：1
> 
> 时间：2012-04-29T23:50:36.230
> 
> 标签：mysql

# 问题：

有没有办法让`PERSON`用户的视图`jack`指向某个主要的人员表，让我们调用它`MAIN_PERSON`并`PERSON`为用户创建一个视图`jill`并让它指向同一个`MAIN_PERSON`表，不同之处在于，例如，`jack`只能访问男性，并且`jill`只能访问女性。

# 细节：

这是我想设置我的表/视图的方式

**人表：**

```
CREATE TABLE IF NOT EXISTS person
(
   id            INT NOT NULL auto_increment,
   male          BOOLEAN,

   PRIMARY KEY(id)
)
engine=innodb; 
```

**查看千斤顶：**

```
CREATE VIEW person_for_jacks_eyes_only
AS
SELECT * FROM person
WHERE
person.male = TRUE; 
```

**查看吉尔：**

```
CREATE VIEW person_for_jills_eyes_only
AS
SELECT * FROM person
WHERE
person.male = false; 
```

**创建用户并授予权限：**

```
GRANT SELECT ON DB.person_for_jacks_eyes_only TO jack@'localhost' IDENTIFIED BY '1234';
GRANT SELECT ON DB.person_for_jills_eyes_only TO jill@'localhost' IDENTIFIED BY '1234'; 
```

# 动机：

我想让不同的用户只访问**行**的一个子集。据我了解，这是视图的目的之一（另一个是将多个表组合在一起）。但是，我不想使用像 一样的晦涩的视图名称`person_for_jacks_eyes_only`，因此我想使用特定于用户的`local`名称。如果这是使用视图的错误方式，请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:02:54.180

不，那里没有。表和视图有一个全局命名空间；无法创建具有相同名称的多个视图。

但是，我相信您可以声明一个其输出取决于当前用户的视图：

```
CREATE VIEW limited_person AS
    SELECT * FROM person
    WHERE person.male = (USER() = 'jack@localhost') 
```

# asp.net-mvc-3 - 将通用接口类型连接到不同的实现

> ID：10377037
> 
> 赞同：0
> 
> 时间：2012-04-29T23:50:53.843
> 
> 标签：asp.net-mvc-3, c#-4.0, ninject-2

我试图让这个工作，我找不到一个好的解决方案。我知道 StructureMap 可以做到这一点，但我坚持使用 Ninject。

是）我有的：

```
public interface IFormHandler<T>
{
    void Handle(T form);
} 
```

我想实现多个像这样的类：

```
public class RegioDeleteModelFormHandler:IFormHandler<RegioDeleteModel>
{
    public void Handle(RegioDeleteModel form)
    {
    //implement method here
    }
} 
```

或者这个：

```
public class RegioUpdateModelFormHandler:IFormHandler<RegioUpdateModel>
{
    public void Handle(RegioUpdateModelform)
    {
    //implement method here
    }
} 
```

在代码的其他地方，我希望能够调用这样的东西：

```
var handler = DependencyResolver.Current.GetService<IFormHandler<T>>(); 
```

取回正确的 IFormhandler。

有没有办法做到这一点？如果 Ninject 无法做到这一点，是否有解决方法？目前，我只有 Ninject 的基本 nuGet 包。我可以从相关软件包之一中使用什么吗？

为了完整起见，这是我的 DependencyResolver 类：

公共类 NinjectDependencyResolver : IDependencyResolver { 私有 IKernel 内核；

```
public NinjectDependencyResolver() {
    kernel = new StandardKernel();
    AddBindings();
}

public object GetService(Type serviceType) {
    return kernel.TryGet(serviceType);
}

public IEnumerable<object> GetServices(Type serviceType) {
    return kernel.GetAll(serviceType);
}

public IBindingToSyntax<T> Bind<T>() {
    return kernel.Bind<T>();
}

public IKernel Kernel {
    get { return kernel; }
}

private void AddBindings() {
    Bind<IUnitOfWork>().To<UnitOfWork>();
} 
```

}

提前致谢！

**编辑我的编辑**：也许我应该补充一点，我在上面的 AddBindings 方法中尝试了这个并且它可以工作，但是如果我必须为所有可能的 IFormHandlers 做这件事，那就是很多代码：

```
Bind<IFormHandler<RegioDeleteModel>>().To<RegioDeleteModelFormHandler>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:20:55.870

使用约定：[https ://github.com/ninject/ninject.extensions.conventions/wiki/What-is-configuration-by-convention](https://github.com/ninject/ninject.extensions.conventions/wiki/What-is-configuration-by-convention)

# iphone - 在带有情节提要的 UINavigationViewController 中放置一个 UITabViewController

> ID：10377041
> 
> 赞同：0
> 
> 时间：2012-04-29T23:51:16.460
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, uistoryboard

我正在使用情节提要来布置我的应用程序，并且我想将 UINavigationController 作为我的根，然后将 UITabViewController 作为其根。我这样做的主要原因是为了节省内存并降低控制器树的复杂性。

那么，这是一个好的做法吗？与在每个选项卡中放置一个单独的导航控制器相比，这是否会产生一个更节省内存的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:17:20.760

根据苹果文档。在这种情况下，标签栏控制器应该始终是您的根控制器。这是一个关于如何将导航控制器放入标签栏控制器的[教程。](http://codenugget.org/how-to-embed-a-navigation-controller-inside-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:52:59.443

你的 UITabBarController 应该在层次结构中首先出现，然后是你的 UINavigationController，然后是你的视图。我不会非常担心这里的内存：当 iOS 内存不足时，你的应用程序应该已经做了正确的事情（释放你能做的；当用户请求时重建它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:08:54.763

好的，我找到了答案。

这个问题是关于在使用*storyboard*时组合选项卡和导航控制器。这是解决这种情况的教程。

[http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

# arrays - Flash AS2 - 对于每个返回奇数顺序数组的循环

> ID：10377042
> 
> 赞同：0
> 
> 时间：2012-04-29T23:51:47.760
> 
> 标签：arrays, actionscript, actionscript-2, reverse

这是我的代码

```
var inventory = new Array();
inventory[0] = "Potion";
inventory[1] = "Mana Potion";
inventory[2] = "Key";

for(s in inventory){
    trace(s);
} 
```

但是跟踪返回 2、1、0。然后我尝试添加`inventory.reverse();`，但我得到 2、0、1。为什么不是 0、1、2？我怎样才能解决这个问题？

另一方面，如何根据索引将这些变量中继到文本框？
我试过了

```
for(s in inventory){
    "item" + s = inventory[s];
} 
```

舞台上的文本框有(item1, item2, item3, etc...)的变量

但这不起作用，有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:57:35.937

遍历长度，而不是项目：

```
for (var i=0; i < inventory.length; i++) {
    trace(i);
} 
```

使用 将项目添加到数组中也不太具体`push()`，因此您无需事先知道其中已有多少项目。

```
inventory.push("Potion");
inventory.push("Mana Potion");
inventory.push("Key"); 
```

# android - 不愿EditText onTouchListener函数调用

> ID：10377049
> 
> 赞同：4
> 
> 时间：2012-04-29T23:53:03.610
> 
> 标签：android, android-edittext

> **可能重复：**
> [公共布尔 onKey() 调用了两次？](https://stackoverflow.com/questions/3802887/public-boolean-onkey-called-twice)

我有一个 EditText 字段，它调用带有单选按钮的弹出视图。PopUp 和 RadioGroup 的实现效果很好。但我只是意识到当按下或触摸到 EditText 时，onTouchListener 被调用了 2 次。我也只是意识到我[上一个问题](https://stackoverflow.com/questions/9833298/pop-up-does-not-dismiss)的原因是同一个问题。这是EditText；

```
etOdemeSekli = (EditText)findViewById(R.id.etOdemeSekli);
        etOdemeSekli.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                inflatePopUpOdemeSekli();
                Log.d("****","Inflate");                    
            return false;
            }
        }); 
```

这是 EditText 的 xml

```
<EditText
    android:layout_weight="1"                   
    android:id="@+id/etOdemeSekli"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/odemeSekliHint"
    android:focusableInTouchMode="false">
</EditText> 
```

由于这个双重调用，弹出窗口的行为很奇怪。dismiss() 调用无法正常工作。可能是什么原因？真的很烦，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T01:18:21.197

双重调用是因为触摸监听器触发了两次（至少！），一次是手指落在 EditText 上时（ACTION_DOWN），一次是当您抬起手指时（ACTION_UP）。要修复它，只需确保仅在一种情况下激活即可。或者，您可以只设置一个`onClick`侦听器。

```
 public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP) {
              inflatePopUpOdemeSekli();
            }

            return false;
      } 
```

# wpf - 仅在 XAML 中使用的程序集不会复制到 bin 文件夹

> ID：10377053
> 
> 赞同：11
> 
> 时间：2012-04-29T23:53:20.017
> 
> 标签：wpf, xaml, msbuild, copy-local

在 WPF 项目中，仅在 xaml 中使用的引用即使`CopyLocal`设置为 true 也不会复制到 bin 文件夹，正如[本文所述](http://social.msdn.microsoft.com/Forums/en/wpf/thread/d9594ea7-c345-464c-a87f-1eef22127f8e)。对于 MVVM 模式，通常使用 3rd 方控件而根本没有代码隐藏引用。

受[这篇文章的](https://stackoverflow.com/questions/4028460/visual-studio-reference-not-being-copied-over-in-multiple-project-environment)启发，我正在使用下面的解决方法。这很容易，但是，必须手动维护变量列表，使其与项目中 XAML 文件中实际使用的变量列表保持同步，这些变量列表会不断变化。我的问题是是否有真正的解决方案或更好的解决方法？（我知道使用构建后脚本的想法，恕我直言，它不太容易被发现并且更容易受到更改的影响。）

```
internal static class BuildTricker
{
    private static readonly RadTreeView radTreeView;
    static BuildTricker()
    {
        // Set and get once to avoid compiler optimization.
        radTreeView = null;
        if (radTreeView != null)
        {
            throw new InvalidOperationException("This should never happen.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-15T12:31:06.837

我使用的解决方法是确保项目具有在 XAML 中定义的名称。这会导致它在生成的代码后面（部分）类中为它创建一个实例。这足以让引用跟随系统检测到引用，并复制到依赖 dll 中。

例如：

```
<ts:HorizontalToggleSwitch IsChecked="{Binding ShowMyItemsOnly}"
                           CheckedContent="Show My Items Only"
                           UncheckedContent="Show All Items"
                           x:Name="NameRequiredForCopyLocal"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T12:28:35.523

这是 XAML 代码的一个已知问题。解析 XAML 代码时有些奇怪，因为 VisualStudio 知道使用了相应的 DLL。就我而言，它有助于从类后面的代码或项目中的任何类中的特定 DLL 创建任何对象的属性。（解决方法）

例如：

```
// This is only for the build process, to copy target assembly to output.
private RadTreeView _TreeViewForCompiler; 
```

# c# - 如何从语音文件中识别短语

> ID：10377054
> 
> 赞同：4
> 
> 时间：2012-04-29T23:53:28.430
> 
> 标签：c#, visual-studio-2010, speech-recognition

如何让引擎成功识别语音文件（wav/mp3/etc..）中的短语？

例如，如果我将一个语音文件和一个书面文本的上下文放在同一个文件中，那么要让它识别语音文件中的书面文字。

我尝试使用 SpeechRecognitionEngine，但到目前为止没有成功。

我会很感激想法，因为这是我第一次处理语音识别技术。

我已经看到使用字典的语音到文本的示例，但我不确定它在这里如何有用。我正在考虑将所有语音文件转换为文本，然后简单地在该文本中查找特定的短语，但我认为这不是正确的方法。将例如 5hrs 语音转换为文本似乎没有意义.... 或者将特定短语用作“字典”并在语音文件中查找此项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T06:22:23.623

看来您需要在长文件中查找特定单词。这种技术称为“关键字识别”，它与语音识别完全不同，效率更高。显然您不需要转录整个文件来搜索其中的单词，您可以快速浏览文件。Microsoft 语音识别引擎对关键字定位的支持非常有限。

[CMUSphinx](http://cmusphinx.sourceforge.net)等开源引擎可用于有效地实现关键字识别。[有关如何使用 pocketsphinx 实现唤醒监听](http://cmusphinx.sourceforge.net/wiki/faq#qhow_to_implement_hot_word_listening)的信息，请参阅更多参考资料。

有关底层算法的更多信息，请参阅[语音中的声学关键词识别与数据挖掘的应用](http://eprints.qut.edu.au/37254/1/Albert_Thambiratnam_Thesis.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:32:03.187

如果您尝试使用 Microsoft 语音引擎转换音频文件，则必须小心。首先，唯一支持的格式是 WAV（它可以编码为 PCM、ALaw 或 uLaw），但您必须验证您的文件是识别器支持的格式。您还必须验证采样率。识别器仅支持一组固定的采样率。在我的机器上，

*   每个样本 8 位
*   单声道单声道
*   每秒 22,050 个样本
*   PCM编码

效果很好。有关更多信息，请参阅[https://stackoverflow.com/a/6203533/90236 。](https://stackoverflow.com/a/6203533/90236)[您可能必须使用audacity](http://audacity.sourceforge.net/)之类的工具重新采样或重新编码 WAV 文件。请参阅[https://stackoverflow.com/a/9467044/90236](https://stackoverflow.com/a/9467044/90236)。

一个让您入门的简单示例是[SAPI 和 Windows 7 问题](https://stackoverflow.com/questions/4213035/sapi-and-windows-7-problem)。

最后，（我总是重复这一点，抱歉）有一篇很棒的文章关于 Windows .NET 中的编程识别。请参阅[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)，它有点过时，但很好的介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T00:18:13.533

根据 MSDN 文章[语音识别入门](http://msdn.microsoft.com/en-us/library/hh361683.aspx)。

您需要做的步骤是（来自文章）。注意创建识别语法的步骤。文章继续建议使用[GrammerBuilder](http://msdn.microsoft.com/en-us/library/system.speech.recognition.grammarbuilder.aspx)或[Choices](http://msdn.microsoft.com/en-us/library/system.speech.recognition.choices.aspx)类。

> 语音识别应用程序通常会执行以下基本操作：
> - 启动语音识别器。
> - 创建识别语法。
> - 将语法加载到语音识别器中。
> - 注册语音识别事件通知。
> - 为语音识别事件创建一个处理程序。

# javascript - 如何将外部库与嵌入式 JavaScript 一起使用？

> ID：10377059
> 
> 赞同：-1
> 
> 时间：2012-04-29T23:54:18.367
> 
> 标签：javascript, templates, ejs

假设我有一个非常简单的 lib.js

```
'use strict';

function getCommentText(numComments) {
    var text = " comment";
    if (1 == numComments) return numComments + text
    else return numComments + text + "s";
} 
```

我把它包括在脑袋里

```
<script type="text/javascript" src="/javascripts/lib.js"></script> 
```

在我的模板中，我尝试如下

```
<%= getCommentText(3) %> 
```

但我收到一条错误消息

```
53| var comment = post.comments[i]; getCommentText is not defined
48|
49|
>> 50|
<%= getCommentText(post.comments.length) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:30:00.580

你应该试试：

```
<%= 
  <script>
    getCommentText(3)
  </script>
 %> 
```

但无论如何，如果您尝试计算一个值，然后将其打印在屏幕上，我建议您使用`document.write`或设置具有计算结果的属性文本。当然，将此代码附加到事件（例如，在用户滚动页面时获取评论）会更好。

# javascript - jQuery 可以操作插入的元素吗？

> ID：10377060
> 
> 赞同：2
> 
> 时间：2012-04-29T23:54:30.470
> 
> 标签：javascript, jquery

我是 jQuery 的新手。我认为jQuery可以操作代码添加的元素是合理的，但我发现它现在不能。

```
$(function(){
    $("#addVideo").click(function(){
         $("#publisher").append("<div id='choseType'><input type='button' value='video'> <input value='music' type='button'> <input type='button' value='X'></div>");
    })      
    $("#choseType input:eq(0)").click(function(){
     $(this).addClass("selected");
    })
}) 
```

是 jquery 的限制还是我的代码的错？似乎如果我将第二个`click()`函数放入第一个函数中它会正确运行，但它只会运行一次（如果我删除附加`#choseType`并再次附加它，第二次点击将不起作用。）。那么我该如何操作添加的代码元素？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:56:22.043

将事件委托给非动态元素：

```
$(document).on('click', "#choseType input:eq(0)", function(){
    $(this).addClass("selected");
}); 
```

ID 是独一无二的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T23:56:31.117

```
$(function(){
    $("#addVideo").click(function(){

        //create new content, and append to publisher
        //also, reference the new content
        var newContent = $("<div><input type='button' value='video'> <input value='music' type='button'> <input type='button' value='X'></div>").appendTo('#publisher');

        //then add a handler to input in the context of the new content
        $("input:eq(0)", newContent).click(function(){
            $(this).addClass("selected");
        });
    })    
}) 
```

# ruby-on-rails - 收藏项目的数据库模型。

> ID：10377062
> 
> 赞同：0
> 
> 时间：2012-04-29T23:54:51.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, database-design, activerecord

我有一个包含用户、建议和搜索的 Rails 应用程序。用户和搜索之间存在多对多关联，因此每个用户可以进行多次搜索，并且每个搜索可以有多个用户（称为“搜索者”）。

用户可以对他们所属的每个搜索提出建议。因此，每个建议都属于一个用户和一个搜索。

```
class Suggestion < ActiveRecord::Base
  belongs_to :suggester, class_name: 'User'
  belongs_to :search
end

class Search < ActiveRecord::Base
  # ... user-search associations.

  has_many :suggestions
end

class User < ActiveRecord::Base
  # ... user-search associations.

  has_many :suggestions, foreign_key: :suggester_id
end 
```

现在，我正试图让用户收藏他们所属的搜索中的建议。障碍是用户可以喜欢队友提出的建议以及他们自己提出的建议。这意味着收藏不能通过一个简单的`favorite`属性 on来完成`Suggestion`。

我试图`Favorite`在用户和建议之间建立一个连接模型。

```
class Favorite < ActiveRecord::Base
  belongs_to :user
  belongs_to :suggestion
end 
```

但是，我无法从特定搜索中访问特定用户收藏的建议。例如：

```
class Search < ActiveRecord::Base
  has_many :suggestions

  def suggestions_favoured_by(user)
    # here I need to grab the search's suggestions and then scope them
    # down to only these that have an entry in the favorites table which
    # has user_id == user.id.
    # That seems ridiculously complicated.
  end
end 
```

我能想到解决这个问题的唯一方法是`search_id`在`Favorite`. 但是，这会使我的收藏夹表反规范化，因为收藏夹属于属于搜索的建议，而收藏夹也直接属于搜索。

我能想到的唯一其他想法（我还没有尝试实现这一点，我无法想象它会在我的脑海中引导我到哪里）是用户最喜欢的关联应该通过连接模型发生在 User 和 Search 之间，而不是分别在 User 和 Search 模型上（因为这会使表格反规范化）。

构建这个的最佳方法是什么？

对于这个问题的冗长性质，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:21:55.497

您可以使用范围来执行此操作，而无需实现`suggestions_favoured_by`手动进行过滤的方法。

```
class Suggestion < ActiveRecord::Base
  has_many :favorites
  scope :favoured_by, lambda { |user_id|
    joins(:favorites).
    where(:favorites => {:user_id => user_id})
  }
end 
```

然后访问用户对特定的最喜欢的建议`search`：

```
search.suggestions.favoured_by(user_id) 
```

Rails 将负责构建 SQL 查询，并且您的关联保持规范化。

# android - 在 Android 中使用 Google Calendar API 访问特定帐户的日历

> ID：10377068
> 
> 赞同：0
> 
> 时间：2012-04-29T23:56:31.237
> 
> 标签：android, google-api, google-calendar-api

我想知道是否有一种方法可以使用 Android 中的 Google Calendar API 而不是用户数据来访问特定日历的数据。我正在编写的应用程序会让用户添加事件/查看某个日历上是否有可用的时间段。到目前为止，我还没有找到任何关于如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:44:09.897

我开始使用 [Google API 的日历示例应用程序](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html?r=default)。我希望它对你有帮助。

# facebook - Facebook Open Graph，如何首先获取最近的评论数组？

> ID：10377070
> 
> 赞同：0
> 
> 时间：2012-04-29T23:57:22.753
> 
> 标签：facebook, facebook-graph-api

我在此 URL 上查询评论框：[https ://graph.facebook.com/comments/?ids=10150692213226360](https://graph.facebook.com/comments/?ids=10150692213226360)

我不太明白该数组包含哪些注释。它似乎没有包含所有内容。无论如何，我只需要最新的评论。其余的我不关心。那么我应该如何编写 URL 以便我首先在数组中获取它，或者只获取最后一条评论以便我能够使用 PHP 轻松解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:28:38.010

也许你可以使用[FQL](https://developers.facebook.com/docs/reference/fql/)

```
SELECT   id,
         username,
         fromid,
         time
FROM     comment
WHERE    object_id = 10150692213226360
ORDER BY time DESC; 
```

[样本](https://api.facebook.com/method/fql.query?query=select+text%2C+fromid+from+comment+where+object_id%3D10150692213226360&access_token=AAAEhdAxqE1EBAIZBcdUxGI6U47BgFKocZCYZCMUOInRvcrficRY4uuLfgmkYUNnmZCy3FSFLv0W0SsoX2zYx0i3LGv5QB8ZA8pPIG8tWBMaJGIjvKHOiL&format=json)

关于评论表中的**用户名**

> 用户发表评论时输入的用户名。在这些情况下，返回的 fromid 将为 0。请注意，此处不返回有效用户的用户名。

希望这可以帮助

# php - 将缺失的日期填充到数组中

> ID：10377074
> 
> 赞同：0
> 
> 时间：2012-04-29T23:57:52.463
> 
> 标签：php, arrays, time

```
function convertDates($timestamp) {
    return date('Y-m-d', $timestamp);
}
$days = array(); //storing databases php time();
$complete = array(); //storing the generated missing days
$occurrences = array(); //finding how many php time() are on same day
$zero = array(); //instead of storing occurrence as 1, store it as zero
$query = mysql_query("SELECT `login` FROM `statistics` ORDER BY `login` ASC");
while($rows = mysql_fetch_array($query)) {
    $days[] = $rows['login']; //filling array with times
}
$days[] = time(); //append current time
for($i = 0; $i < count($days); $i++) {
    $complete[] = convertDates($days[$i]);
    $difference = isset($days[$i+1]) ? $days[$i+1] - $days[$i] : 0;
    if($difference >= 86400) {
        $difference = ceil(abs($difference/86400));
        $fill = $days[$i];
        for($k = 0; $k < $difference; $k++) {
            $fill += 86400;
            $complete[] = convertDates($fill);
            $zero[] = convertDates($fill);
        }
    }
}
$occurrences = array_count_values($complete);
$complete = array_unique($complete);
$zero = array_unique($zero);
sort($complete);
echo "[";

for($i = 0; $i < count($zero); $i++) {
    echo "[\"".$zero[$i]."\",0], ";
}

for($i = 0; $i < count($occurrences); $i++) {
    if($i == count($occurrences)-1)
        echo "[\"".$complete[$i]."\",".$occurrences[$complete[$i]]."]";
    else {
        echo "[\"".$complete[$i]."\",".$occurrences[$complete[$i]]."], ";
    }
}
echo "]"; 
```

我正在将点绘制到 jqplot 图中，对于我需要定义用户未登录天数的统计数据。让我们称这些“差距”

用户于 2012 年 3 月 25 日登录，5 天后未重新登录。现在是 2012 年 3 月 30 日。我必须从这两个日期中生成那些缺失的日子。

我目前的算法似乎不起作用。我不知道出了什么问题。

数据库中的日期来自 php`time();`

我将所有值存储到一个数组中`$days`

这是脚本生成的登录表的输出。请注意，它是为 jqplot 编码的：

```
[["2012-04-01",0], ["2012-04-02",0], ["2012-04-03",0], ["2012-04-04",0], ["2012-04-05",0], ["2012-04-07",0], ["2012-04-08",0], ["2012-04-09",0], ["2012-04-10",0], ["2012-04-11",0], ["2012-04-12",0], ["2012-04-13",0], ["2012-04-14",0], ["2012-04-15",0], ["2012-04-16",0], ["2012-04-17",0], ["2012-04-18",0], ["2012-04-19",0], ["2012-04-20",0], ["2012-04-21",0], ["2012-04-22",0], ["2012-04-23",0], ["2012-04-24",0], ["2012-04-25",0], ["2012-04-26",0], ["2012-04-27",0], ["2012-04-28",0], ["2012-04-29",0], ["2012-04-30",0], ["2012-03-31",1], ["2012-04-01",2], ["2012-04-02",2], ["2012-04-03",1], ["2012-04-04",19], ["2012-04-05",13], ["2012-04-06",8], ["2012-04-07",1], ["2012-04-08",1], ["2012-04-09",4], ["2012-04-10",1], ["2012-04-11",1], ["2012-04-12",2], ["2012-04-13",1], ["2012-04-14",1], ["2012-04-15",1], ["2012-04-16",2], ["2012-04-17",10], ["2012-04-18",1], ["2012-04-19",1], ["2012-04-20",1], ["2012-04-21",1], ["2012-04-22",1], ["2012-04-23",1], ["2012-04-24",1], ["2012-04-25",1], ["2012-04-26",1], ["2012-04-27",1], ["2012-04-28",1], ["2012-04-29",1], ["2012-04-30",2]] 
```

我的脚本不工作。如何正确生成用户未登录的日期？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:00:06.357

使用循环遍历连续日期，使用如下函数：

```
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 day"); 
```

对于每个周期，应用您的查询结果。然后你会得到所有的日期。您仍将使用循环；但基础将是一天的进展，而不是您的查询结果。

**伪代码：**

```
for ($day_counter = 0; $day_counter < 365; $day_counter++) {

    $day_this = strtotime(date("Y-m-d", strtotime($day_this)) . " +1 day");
    $login_count = mysql_query("SELECT COUNT(DATE(login)) AS date_login 
                FROM statistics 
                WHERE date_login=".$day_this);

    array_push($days, array($day_this=>$login_count);

} 
```

不确定这部分的外观：

```
COUNT(DATE(login)) 
```

...但想法是您将日期时间值转换为简单日期，然后运行计数。

**更正：**

COUNT(DATE(login)) 错误。您必须将 COUNT() 函数应用于不同的记录字段（通常是主键），并在 WHERE 子句中使用将日期/时间折叠为简单日期的函数。我经常从我上面写的开始，然后弄清楚。:-)

# cocos2d-iphone - 比较来自 2 个不同数组的精灵

> ID：10377079
> 
> 赞同：0
> 
> 时间：2012-04-29T23:58:43.857
> 
> 标签：cocos2d-iphone

在我的游戏中，我有 25 种形状/颜色组合。这些形状将从屏幕顶部掉落。在底部我有 5 个目标形状。游戏的重点是击中与目标形状相匹配的下落形状。

话虽如此，我有 2 个数组。一个创建下降形状，一个创建目标形状。

我遇到的问题是在 CCTouchesBegan 方法中匹配它们。

从逻辑上讲，我认为用户会触摸精灵，获取该精灵的图像路径，然后将其与目标形状精灵的图像路径进行比较。但我不知道这是否也是最好的方法，或者如何获取触摸精灵的文件路径。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T05:36:55.873

在这种情况下，我会建议为您的形状创建一个自定义类，即实际上是 CCSprite 的子类。其中使用整数“类型”作为实例变量的 1，这是每个形状的唯一值。与实际形状相比，使用其类型比较此类对象要容易得多。希望这可以帮助。:)

# javascript - JS API 认证

> ID：10377085
> 
> 赞同：1
> 
> 时间：2012-04-29T23:59:07.070
> 
> 标签：javascript, ajax, json, api, authentication

我会试着解释这个问题。

有一些服务，其 API 完全在 JS (ajax/json) 中为站点合作伙伴构建。站点合作伙伴是与服务有某种合同的人。因此，对 API 的访问确实只有某些人（站点合作伙伴）。我要做的是为服务创建一些授权方式，以找出真正来自站点合作伙伴的请求。

复杂之处在于 API 完全用 JS 编写。这就是为什么 HTTP 身份验证、秘密 API 密钥、RSA 密钥交换都不适合这种类型的 API，因为服务需要一些身份验证参数来接收，唯一的方法是使用 JSON 通过 AJAX 传递它们格式。因此，每个知道如何查看页面源代码的人都可以简单地复制这些参数并以任何他们想要的方式使用它们。

具有 IP 限制的变体也不适合，至少因为站点合作伙伴可以托管在共享主机上。

我想使用一些带有一些不明确哈希的 API 密钥（仅对服务明确）+ 时间戳。但这种方法迟早会变得清晰。

无论如何，想到的一切都不完全合适。也许有人遇到过这个问题？将不胜感激任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:08:02.493

> 因为服务需要一些身份验证参数才能接收，而唯一的方法是使用 JSON 格式通过 AJAX 传递它们。

我认为您误解了 JSON 和 JavaScript 之间的区别。 [JSON](http://www.json.org/)是一种数据格式，类似于 XML 或 SOAP。您*不必使用 JavaScript 来阅读它*。PHP、Ruby、Java、Python 和其他语言对 JSON 有很好的支持。通常 JSON 通过 HTTP 传递。

> 因此，每个知道如何查看页面源代码的人都可以简单地复制这些参数并以任何他们想要的方式使用它们。

如果您的服务提供商要求您使用某种密钥，我真的怀疑他们是否希望您在浏览器中执行此操作。由于跨域限制，您甚至可能不会被允许发出请求（大多数浏览器不会让您发出请求（尤其是 POST）执行不是您请求的域）。

我的猜测是，您将需要在服务器端与您的提供商进行处理。如果您的提供商有文档，我会咨询它。否则，看看您是否可以让他们的开发人员之一来帮助您。

# html - html 文档子域网页

> ID：10377088
> 
> 赞同：1
> 
> 时间：2012-04-29T23:59:55.587
> 
> 标签：html, default-document

您可以在下面的屏幕截图中看到我在说什么。

基本上，我有一个子域（即 subdomain.website.com），我想要的只是一个要显示的 HTML 文档。HTML 文档在图像中的标题`home.php`应该是`home.html`，我稍后会更改。

当我`subscribe.website.com`在浏览器中打开时，我会看到第二张图片，并且必须单击文档链接才能显示它。有没有办法设置它，以便当我转到 时`subscribe.website.com`，`home.html`文档会自动加载？

![截屏](../Images/1e7df3cb21d10b63af4b18ee31cb7657.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:08:47.877

在您的 htaccess 中使用以下代码：

```
DirectoryIndex home.html 
```

您可以将其更改为您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:54:40.470

您想要实现的目标可以通过多种方式完成：

*   最简单的方法是将您的文件重命名为`index.html`这是因为大多数 Web 服务器默认配置为服务器 some `default document`，其中`index.html`一个，`index.php`如果您喜欢它也是如此。
*   另一种方法是添加`your-page-name.ext`到`default document`'s 列表中。但是这样做的方法取决于服务器。你似乎有一个 Linux 主机。在这种情况下，您可以通过添加到您的文件来使用[@Ethanh提供的解决方案。](https://stackoverflow.com/a/10377141/476786)如果这不起作用，则您的主机可能不允许您编辑文件。在这种情况下，您必须联系您的虚拟主机。`DirectoryIndex home.html``.htaccess``.htaccess`
*   如果您的服务器是基于 Windows 的计算机，则必须将相同的文档名称[`default document`添加](http://blogs.iis.net/nitashav/archive/2010/04/19/iis6-0-ui-vs-iis7-x-ui-series-default-document.aspx)到`IIS`
*   有更多的方法，每一种都在增加复杂性，对于这个答案的水平，我会保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T00:04:10.463

当文件为 html 格式时，它将自动加载网站，而不是在列表中显示文件

# ruby-on-rails-3 - 加入 ruby on rails 的麻烦

> ID：10377089
> 
> 赞同：1
> 
> 时间：2012-04-30T00:00:00.443
> 
> 标签：ruby-on-rails-3, join

在我的 rails 应用程序中，我有一个过滤器，它根据传递给我的范围的参数显示所有作业，这些参数都可以正常工作，但作为对此的扩展，我有一个 ajax 调用，它限制了您可以根据项目选择的作业和您在过滤器中选择的客户端。以下是我的人际关系：

一个客户有很多项目
一个项目属于一个客户，有很多工作
一个工作属于一个项目

我可以列出基于客户的所有项目和基于项目的所有工作，但我遇到的问题是仅在指定客户时列出所有工作，因此，获取该客户的所有项目，然后获取所有这些项目的所有工作。

我猜我必须使用连接才能使其正常工作，但是已经尝试了几天没有运气:(

如果有人能指出一个好的资源的方向，我可以看看尝试解决这个问题，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:01:36.333

在此功能起作用之前，模型如下所示 -

```
 class Client < ActiveRecord::Base
      has_many :projects

    end

    class Project < ActiveRecord::Base
      belongs_to :client
      has_many :jobs

    end

    class Job < ActiveRecord::Base
      belongs_to :project

    end 
```

为了仅基于客户端获取作业，必须在客户端模型中设置 has_many through 关系。

```
 class Client < ActiveRecord::Base
      has_many :projects
      has-many :jobs, :through => :projects

    end 
```

然后在您的控制器中，您可以使用这种新关系通过客户端 ID 获取所有作业 -

```
 @jobs = Client.find(params[:id]).jobs 
```

它将返回它找到的客户的所有工作。再次感谢 sarnold 提供指向该解决方案的指南的链接

# android - 如何正确地将 ResultReceiver 子类发送到服务？

> ID：10377093
> 
> 赞同：3
> 
> 时间：2012-04-30T00:00:22.207
> 
> 标签：android, android-service

我正在尝试绑定到自定义服务但没有成功。

**我的定制服务**

```
public class CustomService extends Service {
    private CustomReceiver mReceiver;
    private final CustomBinder mBinder = new CustomBinder();

    public class CustomBinder extends Binder implements ICustomService {
        // Implementation of the interface
    }

    public interface ICustomService {
        // Public interface to comunicate to the service
    }

@Override
public IBinder onBind(Intent intent) {
    Log.d("customservice", "Service bound.");
    mReceiver = intent.getParcelableExtra("receiver"); // ERROR HERE!
    return mBinder;
}

// Other methods 
```

**我的自定义接收器**

```
public class CustomReceiver extends ResultReceiver {    
    public interface IReceiver {
        public void onReceiveResult(int resultCode, Bundle resultData);
    }

    private IReceiver mReceiver;

    public CustomReceiver(Handler handler) {
        super(handler);
    }

    public void setReceiver(IReceiver receiver) {
        mReceiver = receiver;
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        if (mReceiver != null) {
            mReceiver.onReceiveResult(resultCode, resultData);
        }
    }
} 
```

**我的活动**

```
public class MainActivity extends Activity implements CustomReceiver.IReceiver {
    IRegressiveService mService;
    CustomReceiver mReceiver;
    boolean mBound = false;

    private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName name, IBinder service) {
            mService = (ICustomService) service;
            mBound = true;
        }

        public void onServiceDisconnected(ComponentName name) {
            mBound = false;
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        //...
        mReceiver = new CustomReceiver(new Handler());
        mReceiver.setReceiver(this);

        Intent bindServiceIntent = new Intent(this, CustomService.class);
        bindServiceIntent.putExtra("receiver", mReceiver);
        bindService(bindServiceIntent, mConnection, Context.BIND_AUTO_CREATE);
    }

    public void onReceiveResult(int resultCode, Bundle resultData) {
        //...
    }

    //...
} 
```

**堆栈跟踪（不完整）**

```
04-29 20:23:55.851: E/AndroidRuntime(690): FATAL EXCEPTION: main
04-29 20:23:55.851: E/AndroidRuntime(690): java.lang.RuntimeException: Unable to bind to service [package].CustomService@44f38cd8 with Intent { cmp=[package].CustomService (has extras) }: java.lang.ClassCastException: android.os.ResultReceiver
04-29 20:23:55.851: E/AndroidRuntime(690): at android.app.ActivityThread.handleBindService(ActivityThread.java:2996)
[...]
04-29 20:23:55.851: E/AndroidRuntime(690): Caused by: java.lang.ClassCastException: android.os.ResultReceiver
04-29 20:23:55.851: E/AndroidRuntime(690): at [package].CustomService.onBind(CustomService.java:37)
04-29 20:23:55.851: E/AndroidRuntime(690): at android.app.ActivityThread.handleBindService(ActivityThread.java:2983)
[...] 
```

**简而言之**

在活动中，我使用“接收者”键将`CustomReceiver`（子类）的实例传递给服务。`ResultReceiver`但是当我试图恢复这个对象时，在服务中，`ClassCastException`被提升了。为什么？我怎样才能解决这个问题？

我的目标是 API 级别 8。

而且我在任何其他 SO 问题中都找不到这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:36:08.533

我刚刚检查了我的代码。尝试`mReceiver`在您`Service`的基础上声明`ResultReceiver`如下...

```
public class CustomService extends Service {
    private ResultReceiver mReceiver;
    ...
} 
```

这就是我所做的，当我从（我的也是一个自定义的）获取接收器时，`ClassCastException`我没有得到一个。`Service``Intent``ResultReceiver`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-25T04:32:48.630

我遇到了完全相同的问题，`ClassCastException`这对我来说没有任何意义。我在这里看到了关于将 设置`mReceiver`为仅使用 a`ResultReceiver`而不是`CustomReceiver`在服务中的答案。我这样做了，但仍然遇到同样的错误，但我注意到我的`import`Statements 不一样。

在我的 MainActivity 我导入了语句：

```
import android.support.v4.os.ResultReceiver; 
```

但是在我的服务中，我已经导入了声明：

```
import android.os.ResultReceiver; 
```

我确保在我的服务和我的 MainActivity 中使用了以下内容：

```
import android.support.v4.os.ResultReceiver; 
```

它现在可以正常工作了！希望这对某人有帮助！

我也晚了几年。。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T00:18:36.330

A`BroadcastReceiver`是（默认情况下）不是`Parcelable`。所以你会期望得到一个 ClassCastException。如果您需要传递特定实例，请向您的 Service 添加一个 setter 方法，然后使用该对象从您的 ServiceConnection 实现中调用该方法。

# python - 在 numpy 数组中使用“或”的多个条件

> ID：10377096
> 
> 赞同：29
> 
> 时间：2012-04-30T00:01:03.247
> 
> 标签：python, numpy

所以我有这些条件：

> A = 0 到 10**或**40 到 60
> 
> B = 20 到 50

我有这个代码：

```
area1 = N.where((A>0) & (A<10)),1,0)
area2 = N.where((B>20) & (B<50)),1,0) 
```

我的问题是：我如何在 numpy 中执行“**或”条件？**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-30T00:11:00.827

`&`如果boolean 的numpy 重载，`and`您可以放心地假设它`|`是 boolean `or`。

```
area1 = N.where(((A>0) & (A<10)) | ((A>40) & (A<60))),1,0) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-30T00:13:22.990

有`numpy.logical_or`

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_or.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_or.html)

numpy`logical_and`并且`logical_or`是你想要的 ufunc（我认为）

注意`&`不是`logical and`，它是**按位** `and`的。这仍然适用于您，因为 (a>10) 与您的第二个条件一样返回一个逻辑数组（例如 1 和 0）。因此，在这种情况下，“逻辑与”和“按位与”是等价的（与逻辑和位相同`or`）。但在其他情况下，按位运算可能会产生令人惊讶的结果（主要是因为在这些上下文中，python`&`和`|`运算符的优先级低于预期）。

# ruby-on-rails - 在 has_many 关系中获取孩子的父母？

> ID：10377099
> 
> 赞同：0
> 
> 时间：2012-04-30T00:01:29.887
> 
> 标签：ruby-on-rails

我正在创建一个 RoR 应用程序来管理篮球联赛。我有两张桌子：`teams`& `games`。它的设置是每支球队都有很多场比赛。中的每一行`games`包含两个外键；一个给主队，一个给客队。我有以下代码来列出表中的数据`games`：

```
<% @games.each do |game| %>
  <tr>
    <td><%= game.home_team_id %></td>
    <td><%= game.away_team_id %></td>
    <td><%= game.home_team_score %></td>
    <td><%= game.away_team_score %></td>
    <td><%= game.date %></td>
  </tr>
<% end %> 
```

但是，前两部分不起作用，大概是因为调用对象子对象时使用了格式。但在这里，我试图打电话给孩子的父母（game.home_team_id）

怎么找孩子的家长？

这是我的游戏模型：

```
class Game < ActiveRecord::Base
  belongs_to :team, :foreign_key => "home_team"
  belongs_to :team, :foreign_key => "away_team"
  has_many :stats

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:11:07.173

如果列名与您在视图中指定的一样，您应该会看到 ID。

通常，在您的游戏模型中，您会这样做

```
belongs_to :home_team, :class_name=>"Team"
belongs_to :away_team, :class_name=>"Team" 
```

那么在你看来，你会做

```
<td><%= game.home_team.name %></td>
<td><%= game.away_team.name %></td> 
```

如果您没有按原样查看 ID，我会检查是否正在设置这些值。

在控制台中，只需执行以下操作：

```
Game.first.inspect 
```

如果 team id 为空，我们已经找到了这个错误的来源。这暗示了您的 create 方法中的问题。

# javascript - jQuery在JSON抓取后顺序淡入图像

> ID：10377102
> 
> 赞同：1
> 
> 时间：2012-04-30T00:01:43.227
> 
> 标签：javascript, jquery, image, timeout, fade

在从 Flickr 抓取这些图像并由 jQuery 组装之后，尝试按顺序（一个接一个）淡入这些图像。目前，代码将它们一起淡入淡出。

据我了解，`imageL`由于该功能，一次附加到 div `each`，所以我看到的是技术上它们一个接一个地消失，它只是完成得非常快。

那么，哪里是消磨时间的好地方呢？或者更好的是，不是在`each`函数中放置空间，而是如何构建它们，然后在附加它们后以 100 毫秒的延迟将它们一个接一个地淡入淡出？

谢谢！

jsFiddle：http: [//jsfiddle.net/danielredwood/RzkzY/16/](http://jsfiddle.net/danielredwood/RzkzY/16/)

```
function imgBuilder(data){
    $.each(data.photos.photo,function(i,rPhoto){
        var base   = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
        thumb  = base + '_m.jpg',
        large  = base + '_b.jpg',
        imageL = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>';

        $(imageL).appendTo("#test").animate({opacity:1},400);
    });
}

$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=e3571d0891d2ad7f6b2b44611b8126ee&user_id=26545877%40N04&tags=terminal+5&per_page=25&format=json&nojsoncallback=1&auth_token=72157629563488548-bdcd1a2ad2f288df&api_sig=92b8ac2a1dac669d39aa2170ec372012", imgBuilder); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:04:12.477

```
$(imageL).appendTo("#test").delay(400*i).animate({opacity:1},400); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:21:58.987

另一种解决方案是使用动画回调：

```
function imgBuilder(data){
    $.each(data.photos.photo,function(i,rPhoto){
        var base   = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
        thumb  = base + '_m.jpg',
        large  = base + '_b.jpg',
        imageL = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>';

        $(imageL).appendTo("#test").hide();
    });

    callback = function() {
        $(this).next().fadeIn(1000, callback);
    };
    $('#test a:first').fadeIn(1000, callback);
} 
```

我在这里使用了 fadeIn()，但如果你愿意，你也可以很容易地使用 animate()。

对于那里的提琴手：http: [//jsfiddle.net/luhn/hu76f/](http://jsfiddle.net/luhn/hu76f/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T00:25:41.740

或者使动画与[Frame.js 之](https://github.com/bishopZ/Frame.js)类的流控制库同步：

```
function imgBuilder(data){
    $.each(data.photos.photo,function(i,rPhoto){
        var base   = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
        thumb  = base + '_m.jpg',
        large  = base + '_b.jpg',
        imageL = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>';

        Frame(function(next){
            $(imageL).appendTo("#test").animate({opacity:1},400, next);
        });

    });
    Frame.start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T00:41:41.177

如果你真的想让它可靠地工作，你必须等到你的图像被加载后再尝试为它们设置动画。

否则，早期的将在实际加载之前开始制作动画，观众将看不到动画。不幸的是，这有点复杂。这是一种方法。创建图像时，使用 jQuery 的`.data()`. 然后，当 onload 处理程序触发时，将当前时间与所需的动画时间进行比较，动画要么立即启动，要么安排在未来的某个时间。您还应该注意，对这种情况进行适当的测试需要清除浏览器内存和磁盘缓存，以便在缓存图像之前查看第一次访问者的外观。

这是代码：

```
function imgBuilder(data){
    var now = new Date().getTime();
    $.each(data.photos.photo,function(i,rPhoto){
        var base = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
        thumb = base + '_m.jpg',
        large = base + '_b.jpg',
        link = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"></a>';

        /** something here **/
        var img = new Image();
        img.onload = function() {
            var this$ = $(this);
            var animationTime = this$.data("fadeTime");
            var now = new Date().getTime();
            // if overdue for the animation, start it now
            if (now >= animationTime) {
                this$.fadeTo(400, 1);
            } else {
                // schedule it for later
                setTimeout(function() {
                    this$.fadeTo(400, 1);
                }, animationTime - now);
            }
        };
        img.alt = rPhoto.title;
        var link$ = $(link);
        link$.append(img);
        $(img)
            .data("fadeTime", now + (i * 400))
            .css("opacity", 0)
            .attr("src", thumb);
        link$.appendTo("#test");
    });
}

$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=e3571d0891d2ad7f6b2b44611b8126ee&user_id=26545877%40N04&tags=terminal+5&per_page=25&format=json&nojsoncallback=1&auth_token=72157629563488548-bdcd1a2ad2f288df&api_sig=92b8ac2a1dac669d39aa2170ec372012", imgBuilder); 
```

还有一个工作的 jsFiddle：http: [//jsfiddle.net/jfriend00/JKAQm/](http://jsfiddle.net/jfriend00/JKAQm/)。

# c++ - 复合赋值和添加运算符重载

> ID：10377108
> 
> 赞同：0
> 
> 时间：2012-04-30T00:02:50.853
> 
> 标签：c++, string, operator-overloading, compound-assignment

我需要关于下面介绍的两个运算符重载函数的帮助。我不确定如何在不实际使用函数定义中的赋值的情况下实现这一点。

我的 .cpp 文件中运算符 + 的代码：

```
MyString& MyString::operator +(const MyString& rhs)
{
  delete [] String;
  String = new char[rhs.Size];
  Size = rhs.Size;
  // needs to be a loop for cascading + 
  // so that String1=String2+String3+String4 will work
  for(int i = 0; i < rhs.Size+1 ; i++)
  {
    //  String[i] + rhs.String[i]; ???
  }
  return *this;
} 
```

.cpp 文件中 += 运算符的代码：

```
MyString& MyString::operator+=(const MyString& rhs)
{
  delete [] String;
  String = new char[rhs.Size];
  String = String + rhs.String;
  return *this;
} 
```

从 main.cpp 调用：

```
 String1 = String2 + String3 + String4;
 String1.Print ();

 String2 += String3;
 String2.Print (); 
```

我知道我的 .cpp 文件代码是错误的，一些见解会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:50:57.397

惯用的方法是实现 in 中的功能`operator+=`，然后使用它来实现`operator+`. 假设对于初学者来说，你`operator+=`的实现是正确的，那么`operator+`作为一个自由函数可以很容易地实现：

```
MyString operator+( MyString lhs, MyString const & rhs ) {
   lhs += rhs;
   return lhs;
} 
```

注意：第一个参数是按值传递的，所以它是原始的*副本*，我们可以通过`operator+=`. [这里](http://definedbehavior.blogspot.com/2011/07/operator-overloading.html)还有一些您可能会发现有用的其他提示。

现在回到实现`operator+=`，首先你应该明白你需要执行的操作是：你需要分配一个更长的缓冲区，从旧缓冲区复制，附加`rhs`字符串，交换旧缓冲区和新缓冲区（包含结果）并释放旧缓冲区。操作的顺序很重要，如果您在复制之前释放旧内容（就像您正在做的那样），那么您不能再从中复制。

```
// Rough approach
MyString& operator+=( MyString const & rhs ) {
   char * new_buffer = new char[ Size + rhs.size + 1];       // [1]
   std::copy_n( String, Size, new_buffer );
   std::copy_n( rhs.String, rhs.Size + 1, new_buffer+Size ); // [2]
   swap(String, new_buffer);                                 // [3]
   Size = Size + rhs.Size;
   delete [] new_buffer;
   return *this;
} 
```

[1]：分配新的缓冲区并复制到它。请注意，在这种特殊情况下，代码是*正确*的，因为函数中的其余指令都不会引发异常。如果不是这种情况，则应通过 RAII 管理新缓冲区，以确保至少最小的异常安全性。

[2]：假设作为类型的不变量，`MyString`总是有一个空终止符。count 参数中的`Size+1`将复制所有元素和空终止符。

[3]：至此所有操作都已经执行完毕，我们可以交换新旧缓冲区，更新大小并释放`new_buffer`（其实是指旧缓冲区）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:11:58.343

首先，通常从 中返回一个新对象`operator+`，因为期望对对象调用 + 不会改变对象本身。

```
MyString MyString::operator+ (const MyString& rhs)  
{  
  // ...

  return MyString(...);  

} 
```

请注意返回类型中缺少的引用 ( `&`)：您是按副本返回新对象，而不是按引用。

其次，如果你`delete`在`String`开头，你将无法复制它的内容。考虑这个`operator+`：

```
char* tmp = new char[Size + rhs.Size + 1]; // +1 for the terminating '\0'      
for(int i = 0; i < Size ; i++)      
{
  // copy the contents of current object buffer, char-by-char
  tmp[i] = String[i]; 
}
for(int i = 0; i < rhs.Size+1; i++) // +1 to copy the terminating '\0' as well
{      
  // copy the contents of other object buffer, char-by-char
  tmp[i+Size] = rhs.String[i]; 
}
MyString result;
delete[] result.String;
result.String = tmp;
result.Size = Size+rhs.Size;      

return result; 
```

`operator+=`有点棘手，因为您需要操作当前对象的缓冲区：

```
char* tmp = new char[Size + rhs.Size + 1]; // +1 for the terminating '\0'      
for(int i = 0; i < Size ; i++)      
{      
  tmp[i] = String[i]; 
}
for(int i = 0; i < rhs.Size+1; i++) // +1 to copy the terminating '\0' as well
{      
  tmp[i+Size] = rhs.String[i]; 
}
delete[] String;
String = tmp;
Size += rhs.Size;      

return *this; 
```

更新：我假设你也调用`delete[]`了类析构函数——你应该这样做。也不难想象，你会想要从一个`MyString`对象到另一个对象进行关联。这将导致考虑[三个规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)：如果您需要解构函数、复制构造函数或赋值运算符中的任何一个，您很可能需要全部三个。

# java - Android - 重复计时器任务如何工作？

> ID：10377112
> 
> 赞同：0
> 
> 时间：2012-04-30T00:03:19.437
> 
> 标签：java, android, timer

我在 Android中使用`Timer`a以每 10 秒报告一次我的应用程序的“运行状况”。这个想法是每 10 秒检查一次，以确保应用程序没有挂起。计时器任务是一个很好的指标吗？我知道它是异步运行的，所以我不确定这是否可行。`TimerTask``Service``Timer`

是在每次执行后在主线程中重新安排一次重复`Timer`，还是在 VM 级别进行了一些处理？

# c# - asp.net 高负载短信/电子邮件调度架构

> ID：10377113
> 
> 赞同：1
> 
> 时间：2012-04-30T00:03:30.667
> 
> 标签：c#, asp.net, asp.net-mvc-3, architecture, sms-gateway

谁能回答我 - 短信/电子邮件门服务如何运作？

一般来说，我需要 asp.net mvc 3 web 应用程序，它应该支持高负载的短信/电子邮件 api（例如，每秒 100-500 个 api 请求）。在这种情况下应该使用什么架构/算法？

我的，我认为是错误的，解决方案（请纠正我，如果它很糟糕）： 1）我的服务有许多 Http（或肥皂等）请求。像“www.example.com/sms-api/send?blabla”。2) 在数据库中插入每个请求 3) Win 服务以状态 = NotInProcess 迭代数据库中的所有行（例如）。4）在一个新线程中处理每个项目（它是否正常/正确？）并执行它（例如，发送电子邮件，记录/等待来自另一个服务的回答等）。

我知道，我的问题应该存在任何“最佳实践”，但我没有找到它......有人可以帮助我解决我的架构问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T04:42:34.423

它可能比这更复杂一些，特别是处理故障以及您的全部要求是什么。我认为一旦你定义了它，架构可能会更清晰。您正在充当 SMS/电子邮件网关。这意味着无论您通过何种方式发送这些消息，都可能有其自身的故障。这对您的应用程序意味着什么？你自己会失败吗？是否要继续重试发送？

如果您的外部服务失败，并且您失败了，那么只需使用 WCF（或 ASP.NET MVC 4 和[WebAPI](http://www.asp.net/web-api)）执行普通的 REST API 就足够了。

如果您想代表您的客户端不断重试发送消息，那么您可能需要查看类似[Microsoft Azure Queues](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287%28v=vs.103%29.aspx)的内容，以及 WCF 中的 REST API（如上）。当客户端连接时，您将添加要发送到 Azure 队列的消息，并使用线程（或辅助角色）来监视新增内容。使用队列的好处是您可以在消息到来时对其进行处理，而且它是持久的。这意味着如果您的服务在尝试发送消息时出现故障，您不会丢失队列中的任何数据。它为您提供了更多的容错能力（假设您正确实施它）。

您可能还想看看的一件事是[Quartz.NET](http://quartznet.sourceforge.net/)。这将使您可以安排线程在特定的时间安排上重复执行。这对于缩放重试机制可能很有用。如果您的外部服务失败，请在 1 分钟后重试。如果再次失败，请在 15 分钟后重试（等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-15T16:06:04.307

这取决于解决方案的要求。

***性能***：如果排除持久性，您可以节省很多性能点。因为写入数据库非常昂贵。从数据库读取也很昂贵。

***可扩展性***：将所有传入消息分派到其他主机。一开始，您可以将这些主机放在同一台服务器（Web）上，随着负载的增加，您可以在自己身边添加额外的服务器和主机，或者使用付费云服务并并行发送消息。您还可以将消息发送到持久性和其他所需的主机（我相信您需要身份验证、授权、计费等）

***可用性***：如果某些主机宕机怎么办？您需要在主机存活后恢复传入数据并继续调度。

***可维护性***：您应该能够轻松删除/替换/添加新主机、处理、更高/更低负载等。

假设所有这些，我认为非常适合您的问题的架构是 SOA（**面向服务的架构**）。它可以基于 MSMQ 或 RabbitMQ 作为传输和 NServiceBus 作为框架。在这里阅读更多：http: [//particular.net/nservicebus](http://particular.net/nservicebus)

# google-app-engine - Appengine > Go > 映射数据存储结果

> ID：10377121
> 
> 赞同：2
> 
> 时间：2012-04-30T00:04:49.647
> 
> 标签：google-app-engine, map, go, datastore

我正在尝试映射由 query.GetAll() 检索的结果

我需要映射结果，因为模板需要与每个实体关联的数据存储“键”。

目前我正在做以下事情：

```
// Query
q := datastore.NewQuery("Article").Limit(10)
// Define array where the entities will be retreived
var a[] Article;
// Retreive entities
key, _ := q.GetAll(c, &a)
// Create an empty map
article := map[string] Article{}
// Build the map
for k := range a {
    article[key[k].Encode()] = a[k];
}
template.Execute(w, map[string]interface{} { "Articles" : article}) 
```

有没有更有效的方法来直接使用 query.GetAll() 构建地图，因为创建一个数组、一个地图并在数组上循环来构建地图似乎并不明智？

或者更有效的方法来获取与每个实体关联的数据存储密钥（编码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:01:44.577

也许最好的办法是将切片压缩成一个切片。沿着这些思路，

```
package main

import (
    "os"
    "text/template"
)

type pair struct {
    Key     string
    Article string
}

var tmpt = `Here's the list:{{range $p := .}}
    {{$p.Key}}: {{$p.Article}}{{end}}
`

func main() {
    list := template.Must(template.New("list").Parse(tmpt))
    // query
    key := []string{"banana", "donkey", "curious"}
    a := []string{"long fruit", "who needs one?", "human nature"}
    // zip
    pairs := make([]pair, len(key))
    for i, k := range key {
        pairs[i].Key = k
        pairs[i].Article = a[i]
    }
    // execute on zipped list
    if err := list.Execute(os.Stdout, pairs); err != nil {
        os.Stdout.WriteString(err.Error())
    }
} 
```

输出：

```
这是列表：
        香蕉：长果
        驴子：谁需要？
        好奇：人性

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:27:36.743

也许您可以`Key`将`Article`. 您仍然需要遍历文章和键，但至少您不必创建单独的地图。

```
type Article struct {
    // Add a key to the struct, but prevent it from being saved to the datastore.
    Key datastore.Key `datastore:"-"`
}

// Query
q := datastore.NewQuery("Article").Limit(10)
// Define array where the entities will be retreived
var a[] Article
// Retreive entities
key, _ := q.GetAll(c, &a)

// Loop through the articles adding the key as you go.
for i := range a {
    a[i].Key = key[i]
}
template.Execute(w, map[string]interface{} { "Articles" : a}) 
```

然后在你的模板中你会打电话`article.Key.Encode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:09:21.847

我认为你不需要地图。如果我理解的话，在 GetAll 之后，你有两个平行的切片，key 和 a。（我不知道 GAE，但 _ 引起了我的注意。您应该检查一下吗？）模板可以处理并行数组。在文档中查看范围操作如何返回两个结果，一个值和一个索引。您应该能够跨越一个切片并使用索引从另一个切片中获取相应的值。这将是一个更复杂的模板，但应该让您避免使用地图。

编辑：对不起，我以为我知道该怎么做，但是当我尝试编写示例时失败了。我会把它留在这里，以防其他人知道如何做到这一点，否则，投反对票......

# wordpress - 如何将类别构造为页面的子字段？

> ID：10377122
> 
> 赞同：0
> 
> 时间：2012-04-30T00:04:50.290
> 
> 标签：wordpress, organization, wp-list-categories

所以我有一个如下所示的页面结构：

*   餐厅
    *   餐厅名称 1
    *   餐厅名称 2
    *   餐厅名称 3
*   团队
*   工作

因此，团队基本上是一个类别存档页面，其中列出了标记为“团队”的帖子。有没有办法让每个团队帖子与餐厅 1、2 或 3 相关联，而无需手动将它们添加为子类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:44:51.307

您始终可以设置一个名为“相关餐厅”的自定义字段，然后使用您要关联的餐厅的名称或 ID 填写该值。然后你会从团队帖子中获取数据，如下所示：

```
<?php echo get_post_meta(get_the_ID(), 'Related Restaurant', true); ?> 
```

我不确定您究竟想如何利用这些数据，所以您如何处理这些数据完全取决于您自己。

# java - 我的递归有什么问题？

> ID：10377123
> 
> 赞同：0
> 
> 时间：2012-04-30T00:04:58.913
> 
> 标签：java, recursion

我需要对我正在尝试实现的方法使用递归。问题是这里的递归没有像我想象的那样工作。这是我拥有的代码，我将在下面进一步解释。

```
 public void printer(int level) { 
    System.out.println("A Car " + getId());
    for (int j=0; j< carTypes.size(); j++) {

        carTypes.get(j).printer( Index.get(j)+1);
        if (carTypes.get(j) instanceof Toyota) {
            level = 1;
        }
        else {
            level = 1;
            for (int i = 0; i <= j; i++){
                if (j == Index.size()-1) 
                    break;
                if (Index.get(i) == Index.get(j+1)) {
                    number++;
                }
            }
        }
        System.out.println("Is recursion working right?");

    }//End of for loop
} 
```

我遇到的问题是我希望 carTypes.get(j).printer(Index.get(j)+1); 将被忽略并且该方法将被循环。我知道如果发生这种情况，我将不得不找到另一个来处理我的 for 循环，但现在，我只想让递归工作。我不完全确定我提供的信息是否足够，所以如果您需要更多信息，我会很乐意提供更多信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:14:40.510

**递归：从自身调用方法。**

现在，`carTypes.get(j).printer( Index.get(j)+1);`这条线每次都调用打印机方法，但在不同的对象上。

所以，实际上你没有调用相同的`printer`方法，因此没有发生递归。

**编辑 ：**

> 我知道如果发生这种情况，我将不得不找到另一个来处理我的 for 循环，但现在，我只想让递归工作。

代替

```
carTypes.get(j).printer( Index.get(j)+1); 
```

和

```
printer( Index.get(j)+1); 
```

# perl - 如何在perl中用哈希剪切txt？

> ID：10377126
> 
> 赞同：-1
> 
> 时间：2012-04-30T00:05:56.863
> 
> 标签：perl, hash, text-files

我是 perl 的新手，我在处理 txt 文件时遇到问题，这让我担心了好几天。我希望有人能帮帮我。这是txt：

```
AA=a1.png,a2.png,a3.png,b1.png,b2.png,b3.png,fend.png
FF=k1.png,k2.png,k3.png,l1.png,l2.bmp,l3.png
OO=p1.png,y1.png,ul23.bmp
ZZ=i1.png,j1.png 
```

我希望它变成：

```
AA=a1.png,a2.png,a3.png
AA=b1.png,b2.png,b3.png
FF=k1.png,k2.png,k3.png
FF=l1.png,l2.bmp,l3.png
OO=p1.png
OO=y1.png
ZZ=i1.png
ZZ=j1.png 
```

也就是说，我需要截断最后一种图片，并将前两种图片保持为 1 对 1 格式。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:23:42.930

```
my $data = <<'EOD'
AA=a1.png,a2.png,a3.png,b1.png,b2.png,b3.png,fend.png
FF=k1.png,k2.png,k3.png,l1.png,l2.bmp,l3.png
OO=p1.png,y1.png,ul23.bmp
ZZ=i1.png,j1.png
EOD
;

my $last_letter = "";
my $newline = "";
foreach my $line (split(/\n/, $data)) {
    my ($var, $vals) = split("=", $line);
    foreach my $val (split(",", $vals)) {
        $val =~ /^(.)(\d+\..+)$/;
        next unless ($1 && $2);
        if ($last_letter eq $1) {
            print ",";
        } else {
            print "$newline$var=";
            $newline = "\n";
            $last_letter = $1;
        }
        print $val;
    }
}
print "\n"; 
```

结果：

```
AA=a1.png,a2.png,a3.png
AA=b1.png,b2.png,b3.png
FF=k1.png,k2.png,k3.png
FF=l1.png,l2.bmp,l3.png
OO=p1.png
OO=y1.png
ZZ=i1.png
ZZ=j1.png 
```

# swing - Windows XP 上 Java Swing 中弹出菜单上的助记符（带下划线的字母）

> ID：10377129
> 
> 赞同：3
> 
> 时间：2012-04-30T00:07:12.800
> 
> 标签：swing, contextmenu, popupmenu, jpopupmenu

在 Windows XP 上运行的 Java Swing 应用程序中，在上下文菜单上始终显示助记符时，我遇到了一些麻烦。

如果我右键单击鼠标，弹出菜单上不会出现下划线——这很好，因为这种行为与其他 Windows 应用程序一致。

但是，如果使用菜单键（通常在右侧 Windows 键旁边）调出弹出菜单，我的 Swing 应用程序不会显示下划线，而标准 Windows 应用程序（如写字板、资源管理器和控制面板）会显示下划线。

我可以让下划线显示的唯一方法是在右键单击鼠标时按住 Alt。这是无用的，因为如果有人已经将手放在鼠标上进行右键单击，他们将不想使用键盘在弹出窗口中选择某些内容。

当从菜单键调用上下文菜单时，是否可以在 Swing 中显示下划线？不编写我自己的 Look & Feel 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:02:54.427

好问题。我刚刚在 OS X 上试过这个，我也没有得到带下划线的字母。就像你一样，我通过点击 alt 按钮来获得它们（不是在单击期间，而是在显示我的弹出菜单时）。

但是，在 OS XI 上，无法记住任何包含下划线字母的弹出窗口。我刚刚检查了一些默认应用程序，它们都没有带有下划线项目的弹出菜单。一个快速的谷歌搜索[也表明了这一点](http://edovale.blogspot.com/2008/03/no-mnemonics-in-mac-os-x.html)。所以在这种情况下，外观与操作系统是一致的。

经过一番谷歌搜索后，我发现[以下主题](http://www.coderanch.com/t/346064/GUI/java/Mnemonic-Button-Windows-look-feel)表明，在 Windows 中，默认情况下有一个隐藏助记符的选项，并且仅在您按 alt 时显示它们（如果我没记错的话，您需要按任何方式使用助记符我的窗户日子）。您可能想尝试一下。

无论如何，这里有一个 SSCCE 允许 Windows 用户快速测试：

```
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPopupMenu;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

public class MnemonicTest {
  public static JFrame createUI(){
    JFrame testFrame = new JFrame(  );

    testFrame.add( createLabelWithPopupMenu() );

    testFrame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    testFrame.pack();
    return testFrame;
  }

  private static JLabel createLabelWithPopupMenu(){
    JLabel result = new JLabel( "Right-click me" );
    result.setComponentPopupMenu( createPopupMenu() );
    return result;
  }

  private static JPopupMenu createPopupMenu(){
    JPopupMenu popupMenu = new JPopupMenu(  );
    popupMenu.add( createAction() );
    return popupMenu;
  }

  private static Action createAction(){
    AbstractAction result = new AbstractAction() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        System.out.println( "MnemonicTest.actionPerformed" );
      }
    };
    result.putValue( Action.MNEMONIC_KEY, KeyEvent.VK_A );
    result.putValue( Action.NAME, "Action" );
    return result;
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        createUI().setVisible( true );
      }
    } );
  }
} 
```

# c# - 尝试绘制一个矩形在它应该向右时向左，在它应该向下时向上

> ID：10377130
> 
> 赞同：1
> 
> 时间：2012-04-30T00:07:15.707
> 
> 标签：c#, winforms, graphics, drawing, paint

我对该`DrawReversibleFrame()`方法的使用导致绘制了我的拖动操作的偏移和反转阴影。方法的名称`DrawReversibleFrame()`（但是，我想要相反的（而且似乎没有简单的`DrawFrame()`方法）。

我尝试了两个示例，这些示例是在我发布初始问题后指出的：[如何根据鼠标的移动绘制矩形？](https://stackoverflow.com/questions/10369704/how-do-i-draw-a-rectangle-based-on-the-movement-of-the-mouse)

这两个尝试可以在这里找到：

[Winforms 应用程序中的填充橡皮筋](https://stackoverflow.com/questions/2065162/filled-rubber-band-in-winforms-application)

..和这里：

[http://www.switchonthecode.com/tutorials/winforms-painting-on-top-of-child-controls](http://www.switchonthecode.com/tutorials/winforms-painting-on-top-of-child-controls)

...但没有一个对我有用。

首先，在这两个示例的事件中对 base.* 的调用在我运行它们时会导致 StackOverflows（没有双关语）（通常我什至不需要为 StackOverflows 做任何事情来炸毁我的应用程序）。

我能够从`DrawReversibleFrame()`示例（上面的第二个链接）改编的代码几乎可以正常工作。但是，当我用鼠标向右和向下（从左上角到右下角）拖动时，绘制的矩形从右下角开始向上到左上角（但我正在以相反的方式拖动 - 从左上角到右下角）——不过，移动的大小/数量似乎完全正确。

此外，绘制操作开始的点也不完全在正确的位置——它开始于我的初始点的左侧和上方。

注意：我正在使用`PointToScreen()`，因为拖动操作发生在 a 上`TableLayoutPanel`，它已放置在表单的顶部。如果我不使用它，我根本看不到任何绘图。

我的代码是：

```
public partial class Form1 : Form
{
    private bool _IsSelecting = false;
    private Point _StartPoint = Point.Empty;
    private Rectangle _FrameRect = Rectangle.Empty; //1

    public Form1()
    {
        InitializeComponent();
        // DoubleBuffered = true; //makes no apparent difference either way
    }

    private void tableLayoutPanel1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button != MouseButtons.Left)
            return;

        _IsSelecting = true;
        _StartPoint = PointToScreen(e.Location);
        _FrameRect = new Rectangle(_StartPoint, Size.Empty);
    }

    private void tableLayoutPanel1_MouseMove(object sender, MouseEventArgs e)
    {
        if (!_IsSelecting)
            return;

        ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);

        Point pt = PointToScreen(e.Location);
        _FrameRect.Width = _StartPoint.X - pt.X;
        _FrameRect.Height = _StartPoint.Y - pt.Y;

        ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);
    }

    private void tableLayoutPanel1_MouseUp(object sender, MouseEventArgs e)
    {
        if (!_IsSelecting)
            return;

        ControlPaint.DrawReversibleFrame(_FrameRect,
            Color.Black, FrameStyle.Dashed);

        _IsSelecting = false;
        _FrameRect = Rectangle.Empty;
        _StartPoint = Point.Empty;
    }
} 
```

## 更新

为了回应约翰的评论，我在这里颠倒了数学：

```
 _FrameRect.Width = pt.X - _StartPoint.X;
    _FrameRect.Height = pt.Y - _StartPoint.Y; 
```

...但这只会取笑我，因为它使它*几乎*可以工作，但是将对 PointToScreen() 的调用更改为 PointToClient() 会使情况变得更糟（更靠近左侧和顶部，有时矩形太大）。

这是现在的代码（矩形是完美的大小，但从鼠标的左侧和上方开始）：

```
private void tableLayoutPanel1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button != MouseButtons.Left)
        return;

    _IsSelecting = true;
    _StartPoint = PointToScreen(e.Location);
    //_StartPoint = PointToClient(e.Location); //<- this makes it way worse - the rectangle is way too big, and starts even further up and to the left
    _FrameRect = new Rectangle(_StartPoint, Size.Empty);
}

private void tableLayoutPanel1_MouseMove(object sender, MouseEventArgs e)
{
    if (!_IsSelecting)
        return;

    ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);
    Point pt = PointToScreen(e.Location);
    //Point pt = PointToClient(e.Location); //worse
    _FrameRect.Width = pt.X - _StartPoint.X;
    _FrameRect.Height = pt.Y - _StartPoint.Y;
    ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);
}

private void tableLayoutPanel1_MouseUp(object sender, MouseEventArgs e)
{
    if (!_IsSelecting)
        return;

    ControlPaint.DrawReversibleFrame(_FrameRect,
        Color.Black, FrameStyle.Dashed);
    _IsSelecting = false;
    _FrameRect = Rectangle.Empty;
    _StartPoint = Point.Empty;
} 
```

## 另一个更新

注意：我在动态创建的 TableLayoutPanel 上执行 mousedown，它位于表单上的面板上。

当我添加下面的代码时，值是 25，然后是 146。所以它似乎应该工作 - 当它将 Y 值转换为 146 时，它补偿了 TableLayoutPanel 上方有东西的事实。但这还不够，或者...？？？

```
log.Debug(String.Format("Mouse Down Location.Y = {0}", e.Location.Y));
_StartPoint = PointToScreen(e.Location);
log.Debug(String.Format("Mouse Down PointToScreen Location.Y = {0}",    _StartPoint.Y)); 
```

## 另一个更新

我终于能够在这里找到矩形下方的文本框以及我的问题的答案（我无法在 StackOverflow 上发布新问题，因为我已经超过了 30 天内 50 个问题的限制）：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/9039ab0c-a587-476c-a952-9f35c6ccba42/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/9039ab0c-a587-476c-a952-9f35c6ccba42/)

...但现在我有另一个问题：

代码（下面）现在确实找到了它下面的控件，因为它循环遍历面板上的*所有TextBox，并且它确实发现了绘制的矩形下面的正确数量的控件（如果我拖动超过 9 个 TextBox，它会找到 9 个）。*

但是，标记为找到的文本框不是正确的——它们不是我拖过的文本框，而是位于 TableLayoutPanel 中的几行下方！

绘制的 _FrameRect 是从 PointToScreen() 转换而来的，而 textBox.Bounds 是从 RectangleToScreen() 转换而来的，所以它们应该是同步的，但不知何故，它们不是……（如果我没有这些绝对位置到相对位置，根本没有发现任何文本框）。

```
private void HighlightAllTextBoxValsBetweenPoints() {
    foreach (Control ctrl in tableLayoutPanelGreatgooglyMoogly.Controls) {
        var tb = ctrl as TextBox;
        if (tb == null)
            continue;
        if (RectangleToScreen(tb.Bounds).IntersectsWith(_FrameRect)) {
            //MessageBox.Show(String.Format("{0}", tb.Name));
            tb.BackColor = PSEUDO_HIGHLIGHT_COLOR;
        }
    }
} 
```

同样，找到了正确数量的控件，并且它们被“突出显示”（backColor 属性已更改），但它们不是正确的。

## 最后更新

根据在此处上传的一只猫（或青蛙腿，我猜）的代码：

[http://www.c-sharpcorner.com/Forums/Thread/170813/](http://www.c-sharpcorner.com/Forums/Thread/170813/)

...我能够使控件的伪突出显示正常工作。这是相关的代码：

```
// Declare a rectangle and a point:
Rectangle describedRect;
Point startingPoint;
private bool _IsSelecting = false; // <- already had this

// In the MouseDown event:
_IsSelecting = true;
startingPoint = e.Location;

// In the MouseMove event:
if (!_IsSelecting)
    return;
describedRect = Rectangle.FromLTRB(startingPoint.X, startingPoint.Y, e.X, e.Y); 

// In the MouseUp event:
if (!_IsSelecting) 
    return;
HighlightAllTextBoxValsBetweenPoints();
_IsSelecting = false;

private void HighlightAllTextBoxValsBetweenPoints() {
    foreach (Control ctrl in tableLayoutPanelGreatGooglyMoogly.Controls) {
        var tb = ctrl as TextBox;
        if (tb == null)
            continue;

        if (describedRect.IntersectsWith(tb.Bounds)) {
            tb.BackColor = PSEUDO_HIGHLIGHT_COLOR;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:54:18.100

您需要使用您尝试使用`PointToScreen`的控件的方法：`TableLayoutPanel`

```
private void tableLayoutPanel1_MouseDown(object sender, MouseEventArgs e) {
  if (e.Button != MouseButtons.Left)
    return;

  _IsSelecting = true;
  _StartPoint = tableLayoutPanel1.PointToScreen(e.Location);
  _FrameRect = new Rectangle(_StartPoint, Size.Empty);
}

private void tableLayoutPanel1_MouseMove(object sender, MouseEventArgs e) {
  if (!_IsSelecting)
    return;

  ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);    
  Point pt = tableLayoutPanel1.PointToScreen(e.Location);
  _FrameRect.Width = pt.X - _StartPoint.X;
  _FrameRect.Height = pt.Y - _StartPoint.Y;
  ControlPaint.DrawReversibleFrame(_FrameRect, Color.Black, FrameStyle.Dashed);
} 
```

# python - openerp 中的按钮可见性

> ID：10377131
> 
> 赞同：1
> 
> 时间：2012-04-30T00:07:17.420
> 
> 标签：python, openerp

我正在使用 openerp 5.16 网络。

有什么方法可以根据登录用户隐藏按钮。

或者我如何根据用户组控制组的可见性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:33:54.893

*   取决于登录用户：您可以使用变量“uid”，但我认为您不能使用“uid.name”或“uid.groups_id”。所以更简单的方法将是第二种。
*   取决于组示例：我们有一些用户是经理，而其他用户不是，创建一个组“经理”（在 xml 文件中！！！）并将该组添加到经理。现在像这样更改 xml 中的字段：

    `<field name="name" string="this is the string" groups="my_module.my_reference_to_the_group"/>`

该字段仅对经理可见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:10:48.140

您必须创建一个新组，例如“Button Visible”。

然后在该组中添加要向其显示按钮的用户。

然后像这样在按钮上添加这个组：

```
<button name="xyz" groups="Button Visible" .../> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T23:21:34.537

根据用户组设置可见性是这样做的方法。将`groups`属性添加到要隐藏的任何控件。一个很好的例子是销售订单屏幕的[额外信息选项卡。](http://bazaar.launchpad.net/~openerp/openobject-addons/5.0/view/2935/sale/sale_view.xml#L157)仅当用户是扩展 UI 组的成员时才可见。

```
<page groups="base.group_extended" string="Extra Info">
    <field name="th_weight"/>
    <field name="address_allotment_id" select="2"/>
    <separator colspan="4" string="Properties"/>
    <field colspan="4" name="property_ids" nolabel="1"/>
</page> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:02:26.813

在 OpenERP 组中，几乎所有 XML 视图元素上的视图元素都具有更高级别的安全性，您会发现组属性，因此您可以使用相同的组属性。例如，如果在您的模块中，如果您正在定义一些组，那么您可以在视图中利用标签按钮的组属性，例如

```
<button name="name" type="object|workflow|action" string="" groups="<your_group_external_id>,<module.group_external_id>" /> 
```

其中 external_id 代表在记录标签上定义的唯一 XML。所以现在只有用户博客和接受分配的组只能在视图中看到按钮。

问候

# asp.net-web-api - HttpClient ReadAsAsync - 在完成时做一些事情

> ID：10377132
> 
> 赞同：1
> 
> 时间：2012-04-30T00:07:33.847
> 
> 标签：asp.net-web-api, dotnet-httpclient

我有从 ASP.NET Web API 读取响应的代码，如下所示：

```
HttpClient client = new HttpClient();
client.GetAsync(path.ToAbsoluteUrl()).ContinueWith(
                    (requestTask) =>
                    {
                        HttpResponseMessage response = requestTask.Result;
                        response.EnsureSuccessStatusCode();
                        response.Content.ReadAsAsync<DBResult>().ContinueWith(
                                                            (readTask) =>
                                                            {
                                                                result = readTask.Result;
                                                                lblMessage.Text = string.Format("{0} products were uploaded successfully. {1} failed.", result.Success, result.Failed);
                                                            });
                    }); 
```

当我得到响应/结果时，我试图显示某种消息。不过，似乎没有任何效果 - 我的标签没有更新。

显然，我做错了什么 - 收到响应后如何向用户显示消息？

TIA

**编辑**：

如下所示，我声明：

> TaskScheduler scheduler = TaskScheduler.FromCurrentSynchronizationContext();

并传入“调度程序”（尝试使用两个 ContinueWiths），但仍然似乎没有任何效果。实际上，现在我在 lblMessage.Text... 上的断点没有达到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T05:14:11.433

看起来您必须进入 UI 线程才能更新 UI。仅运行 ContinueWith 时，您最终可能会进入 eny 线程。解决这个问题的方法是使用

TaskScheduler.FromCurrentSynchronizationContext();

如 MSDN [1] 上的这篇文章中所述

否则你的代码看起来很好。

希望这可以帮助，

亨里克

[1] [http://msdn.microsoft.com/en-us/library/dd997394.aspx](http://msdn.microsoft.com/en-us/library/dd997394.aspx)

# c# - 在内存中模拟一个 LinqToSql 存储库以用于单元测试

> ID：10377135
> 
> 赞同：4
> 
> 时间：2012-04-30T00:07:55.397
> 
> 标签：c#, .net, unit-testing, linq-to-sql, mocking

我正在研究制作一个`DataContext`可以在单元测试中使用的可模拟对象。[这里](http://iridescence.no/post/Linq-to-Sql-Programming-Against-an-Interface-and-the-Repository-Pattern.aspx)描述了一种方法。但是，这种方法的问题在于，对存储库的更改会立即生效——在调用`Commit`（或任何其他等效于）之前。`SubmitChanges`

另一方面，包含正确的`SubmitChanges`行为将涉及从 复制大量复杂代码`DataContext`，并可能导致更多错误。

模拟内存存储库（不等待`SubmitChanges`）的天真实现对于使用单元测试是否可行？这通常是如何完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T04:02:55.970

如果我的理解是正确的，那么您还没有完全确定您的 SUT（被测对象）。

*   如果您想测试与数据库的连接性，那么我们正在谈论**集成测试**，您不应该模拟您的`DataContext`

*   如果你想测试调用的**逻辑**`DataContext`那么它是一个单元测试

无论如何，我建议您将调用包装`DataContext`在存储库中，存储库将负责*与*数据库通信，遵循这种方法将使您更轻松

我会用一个例子来说明它，最后我会推荐几个链接来帮助你编写**可测试的代码**。（我总是这么说，我会再说一遍，写测试很容易，真正的努力必须放在写干净的可测试代码上）

```
public interface IMyRepository
{
   void ChangeEmail(int employeeId, string newEmail);
}
public class MyRepository : IMyRepository
{
   private MyDataContext context;
   public MyRepository(MyDataContext context)
   {
      this.context = context;
   }
   public void ChangeEmail(int employeeId, string newEmail)
   {
      //save your email using your context
   }
} 
```

现在在您的消费者代码中，您将注入您的存储库：

```
public class MyCommand
{
   public MyCommand(IMyRepository myRepository)
   ...
   public void ChangeEmail(int employeeId, string newEmail)
   {
      //adding condition just to clarify how to test
      if(this.AllowChangeEmail(employeeId))
      {
         this.myRepository.ChangeEmail(employeeId, newEmail);
      }
      else
      {
         throw new DomainException("this should not happen");
      }
   }
   ...
} 
```

我们已经解耦了 的使用`DataContext`，从您的域代码的角度来看，`DataContext`不存在，域知道的唯一代码是`IMyRepository`并且因为它是一个接口，您可以轻松更改提供者更改应用程序的行为，而无需重构您的域代码

如果你注意到我还没有谈到测试，为什么？因为就像我说的，首先要做的是编写干净的可测试代码（不要误解，应该遵循 TDD，这意味着应该先编写测试，我遵循这种方法只是为了演示）现在我们有了[这段](http://fluentassertions.codeplex.com/)代码，[让](http://code.google.com/p/moq/)我们看看测试应用[程序](http://autofixture.codeplex.com/)的**逻辑**`IMyRepository`有多容易

```
public class MyFakeProvider : IMyRepository
{
   public void ChangeEmail(int employeeId, string newEmail)
   {
      //write some assert here indicating the method was called
   }
}

[Test]
public void MyTest()
{
   var myMock = new MyFakeProvider();
   var sut = new MyCommand(myMock);

   sut.Invoking(x => x.ChangeEmail(3, "my@email.com")).ShouldNotThrow();
} 
```

这些链接只关注一件事：编写可测试的代码：

[http://misko.hevery.com/code-reviewers-guide/](http://misko.hevery.com/code-reviewers-guide/)

[http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf](http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf)

[http://misko.hevery.com/presentations/](http://misko.hevery.com/presentations/)

[http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded](http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded)

[http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded](http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded)

[http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded](http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded)

[http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded](http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T01:55:08.013

被测试的类/组件是什么？如果您不直接测试存储库而只测试正在使用存储库的东西，那么模拟可以根据您的需要进行。

但是，如果您想在组件和存储库之间执行端到端集成测试，则需要另一种方法，例如。针对测试数据库运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T02:09:41.557

我创建了一个接口来表示存储库，其中有 SubmitChanges、InsertOnSubmit 等 DataContext 实现的东西。此外，您的表的 IQueryable 属性。然后，您的 DataContext 子类可以实现此接口，您无需执行任何操作。对于您的单元测试，您可以只创建一个模拟，并模仿 IQueryables 您可以创建列表并使用 AsQueryable 方法。

# visual-studio-2010 - 如何在一个程序中启动两个窗口窗体？

> ID：10377140
> 
> 赞同：1
> 
> 时间：2012-04-30T00:08:37.887
> 
> 标签：visual-studio-2010, c++-cli

我有两种形式。我想同时启动它们。在主程序中，我遵循 Md Kamruzzaman Pallob 的建议。以下代码是更新版本，但还是不行。

错误是错误 C3350：'System::Threading::ThreadStart'：委托构造函数需要 1 个参数

```
 #include "stdafx.h"
  #include "Form1.h"
  #include "Form3.h"
   using namespace MySearch;
   using namespace System;
   using namespace System::Threading;

 public ref class ThreadX{
 public: ThreadX(){}
 public: static void func1()
{
    Application::Run(gcnew Form1());
}

public: static void func2()
{
    Application::Run(gcnew Form3());
}

};

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
// Enabling Windows XP visual effects before any controls are created
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

// Create the main window and run it

    ThreadX^ o1 = gcnew ThreadX();
    ThreadX^ o2 = gcnew ThreadX();

    Thread^ th = gcnew Thread(gcnew ThreadStart(o1, &ThreadX::func1));
    Thread^ th1 = gcnew Thread(gcnew ThreadStart(o2, &ThreadX::func2));
    th->Start();
    th1->Start();

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:34:31.700

你为什么不像下面那样做一个 form1 加载事件？：

```
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
         Form2^ form2 = gcnew Form2;
         form2->Show();
     } 
```

然后每次打开 Form1，Form2 也会打开。它似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:01:23.417

您可以通过使用线程来做到这一点。我很抱歉，因为我不太了解 C++。但我可以用c#给你解决方案

```
 public static void func1()
    {
        Application.Run(new Form1());
    }

   public static void func2()
    {
        Application.Run(new Form2());
    }

    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Thread th = new Thread(func1);
        Thread th1 = new Thread(func2);
        th.Start();
        th1.Start();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:47:49.563

尝试 ：

```
Thread^ th = gcnew Thread(gcnew ThreadStart( &ThreadX::func1 ) );
Thread^ th1 = gcnew Thread(gcnew ThreadStart( &ThreadX::func2 ) ); 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx)

# layout - 如何在 cakephp2 的另一个视图中包含一个视图

> ID：10377142
> 
> 赞同：0
> 
> 时间：2012-04-30T00:08:57.323
> 
> 标签：layout, view, include, cakephp-2.0

我想将 login.ctp（用于登录的视图）放入 page.ctp，这是 May 应用程序的主视图，我被困在这里，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:59:19.247

您可以将登录视图创建为元素并将其呈现在 page.ctp 中。

# python - 错误：python 中的 json.load

> ID：10377151
> 
> 赞同：0
> 
> 时间：2012-04-30T00:11:52.440
> 
> 标签：python, json

为什么这是**真的**：

```
 import json
  json.loads('{"A":2}') 
```

但这是**错误**的：

```
 json.loads('{"A":2,}') 
```

**或者**

```
 json.loads("['A':2]") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:15:13.307

JSON 是 JavaScript 的子集。这意味着有效的 JavaScript 不一定是有效的 JSON。

*   `{"A":2,}`是有效的 JS（旧 IE 版本除外），但不是有效的 JSON
*   `['A':2}`甚至不是有效的 JS，因为大括号不匹配。如果它们匹配，它仍然是无效的 JSON，因为 JSON 总是使用`"`并且永远不会`'`引用字符串。

有关 JSON 规范，请参阅[http://json.org/](http://json.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:13:59.507

因为最后两个选项不是有效的[json](http://json.org/)

*   最后一个元素后不应有逗号
*   a`[`应该匹配一个`]`（数组）并且 a`{`应该匹配一个`}`（对象）

# java - 编译时多态？

> ID：10377153
> 
> 赞同：1
> 
> 时间：2012-04-30T00:12:08.443
> 
> 标签：java

我正在阅读的书说，当您覆盖子类中的方法时，这意味着运行时多态性。有没有像编译时多态性这样的东西？我认为简单的继承发生在编译时，然后多态性是运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:13:30.990

他们暗示方法*重载*，有时称为*编译时多态性*。

实际上，方法重载允许您根据作为参数传入的对象类型调用不同的代码段。重载在编译时解决，因此重载机制可以被认为是编译时多态性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:22:46.793

Lucca Cardelli 有一篇很棒的文章，名为[On Understanding Types, Data Abstraction and Polymorphism](http://lucacardelli.name/Papers/OnUnderstanding.A4.pdf)，非常详细地解释了您的问题的答案。

您在问题中提到的称为[临时多态性](http://en.wikipedia.org/wiki/Ad-hoc_polymorphism)，包括方法重载和类型内聚（如运算符重载中的那些），这两个发生在编译时。另一方面，为给定方法选择正确的实现发生在运行时，这是所谓的[参数或包含多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)的一部分。

但我很确定 Lucca Cardelli 会给你一个比我梦寐以求的更好的答案。

最近我在这个论坛上参加了[另一个类似的问题](https://stackoverflow.com/a/9901610/697630)，我提供了这两种多态性的一些例子。您可能想看一下，尽管我的印象是您可能已经知道了。

您可能还想阅读[面向对象编程语言中的多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

# python - 如何精确测量声音输出持续时间？

> ID：10377154
> 
> 赞同：1
> 
> 时间：2012-04-30T00:12:11.993
> 
> 标签：python, audio, precision, duration, measurement

我希望能够测量音频在我的系统上不同位置播放的时间长度（有时无法将文件与音频事件相关联）。没有锁定的文件类型，所以我只想能够找出声音事件并映射它的持续时间。我正在尝试将持续时间信息输出到日志文件或控制台中，你知道吗？

我不确定从哪里开始寻找，但我觉得 Python 是适合这项工作的语言。我已经能够获得像素颜色并读取验证码等，所以我认为它也应该能够做到这一点。不过，我想知道我是否需要了解更多的 VB，因为我在 Windows 系统上？

# arduino - 如何从传感器采样并同时进行 PWM？

> ID：10377156
> 
> 赞同：2
> 
> 时间：2012-04-30T00:12:51.830
> 
> 标签：arduino

我有一个关于 Arduino 的一般性问题，如何每秒使用 AnalogRead() 读取传感器值一定次数。说每秒 10 次，并且还连续向电机输出 PWM。

如果我尝试在我的 loop() 中延迟，它会影响我与 AnalogWrite() 一起使用的 PWM 到电机。有没有办法做到这两点？

另外，对于 AnalogRead() 我想控制采样频率，比如每秒 10 次或每秒 20 次，我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T04:29:21.823

您想查看 Arduino IDE 中的“立即闪烁”示例。

阅读示例草图后您会更好地理解的简短答案是，您根据 millis() 的最近和先前返回值之间的差异执行模拟读取 () 调用，并且您执行任何 PWM 更改，因为它们是需要。由于analogRead() 返回非常快，只要您不在任何地方使用delay()，它们就不会干扰PWM 操作。

请记住，millis() 的返回值是无符号的，因此如果您使用无符号变量存储来自 millis() 的返回值，则两个连续返回值之间的差值始终为正。由于一秒钟有 1,000 毫秒，每当连续两次调用 millis() 之间的差异大于 100 时，您就会再读取一次。为确保每秒保持接近 10 个值，请将“前一个”毫秒值增加 100，而不是用实际读数替换“前一个”值。

# perl - 使用 perl 将字符串转换为 UTF8

> ID：10377165
> 
> 赞同：1
> 
> 时间：2012-04-30T00:14:20.500
> 
> 标签：perl, utf-8

我有一些包含字符串的文件，需要使用 perl 将它们转换为 UTF8 是否有任何选项使用 perl 来运行这些文件并将每个字符串转换为 utf8，如果某些字符串是 utf8 编码以保持原样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T04:01:40.920

您说文件的某些部分使用 UTF-8 编码，而某些部分使用其他编码，但您没有指定其他编码，这很重要。

一般来说，不可能通过查看字符串来判断字符串的编码。但是，如果您处理的是 US-ASCII、iso-8859-1、cp1252 和 UTF-8 的混合体，那么您实际上很可能知道*，并且有人已经为您编写了该工具。

[Encoding::FixLatin](http://search.cpan.org/perldoc?Encoding::FixLatin)附带一个名为的脚本，该脚本`fix_latin`会将混合了上述编码的文件转换为 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:24:21.017

您可以使用[Encode](http://perldoc.perl.org/Encode.html)模块在编码之间进行转换。（无需安装任何东西；它是核心库的一部分。）请注意，“*将字符串转换为 UTF-8* ”要求您知道要转换的编码是什么；没有办法可靠地识别 8 位文本编码。

# c - 新观察者是否看到旧的未处理事件？

> ID：10377168
> 
> 赞同：0
> 
> 时间：2012-04-30T00:15:03.317
> 
> 标签：c, libev

如果我有一个套接字并且有人向它发送了我尚未处理的数据 via `read()`，现在我`ev_io`为它创建了一个观察者并运行它，回调会触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:53:10.857

我不知道你的问题的答案，因为我从未使用过`libev`. 但我可以建议在没有这些知识的情况下，您可以尝试模拟场景并看看会发生什么。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:34:31.887

它是水平触发的，而不是边缘触发的，因此回调将快速触发，直到读取所有待处理的数据。

# iphone - 为什么 iOS 上的 tan() 函数会出现这个问题？

> ID：10377170
> 
> 赞同：2
> 
> 时间：2012-04-30T00:15:52.877
> 
> 标签：iphone, ios, trigonometry

这是我第一次使用任何类型的高级数学构建 iOS 项目。我已经搜索了很长一段时间，但还没有找到任何东西来解决我的问题。我对iOS还是很陌生，所以任何帮助都将不胜感激。

我正在尝试使用一个基本`tan()`函数，该函数从文本字段中获取输入，将其转换为度数（因为 tan() 默认为弧度）并显示在标签中。如果我将 tan 30 输入到计算器中，它将返回 0.577，我得到 0.449，这很接近，但如果我输入 31，我会收到“2.356”的值？

这是我的代码的一部分：

```
-(IBAction)calculate {
float x = ([textField1.text intValue]);
float d = (x * 180) / M_PI;
float y = tan(d);

label.text = [[NSString alloc] initWithFormat:@"%2.3f", y];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:19:41.407

您使用的格式字符串 ( `%2.f`) 不适合数据 - 它指定不应显示小数位。尝试仅使用`%f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:34:13.650

试试这个

```
-(IBAction)calculate {
float x = textField1.text.doubleValue;
float d = (x * 180) / M_PI;
float y = tan(d);

label.text = [NSString stringWithFormat:@"%0.3f", y]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:13:04.050

你的“d”是一个浮点数。尝试使用 tanf() 而不是 tan()。

# html - 行内块元素具有不同的垂直对齐方式

> ID：10377171
> 
> 赞同：2
> 
> 时间：2012-04-30T00:15:57.993
> 
> 标签：html, css, vertical-alignment

我需要在链接后获取带有图标的链接。

例如：

```
Link [icon] 
```

我想要的行高是 30px。所以，我有这样一个标记：

```
<div class="phone-support">
   <a href="#">We'll call you</a><i class="icon"></i>
</div>

.phone-support a {
   display       : inline-block;
   line-height   : 30px;
   padding-right : 5px;
   height        : 30px;
}

.phone-support i.icon {
   display       : inline-block;
   height        : 30px;
   width         : 30px;
   background    : url('/path/to/sprite.png') -10px -10px;
} 
```

我认为它应该可以工作，但是高度`.phone-support`变成了 41px，但是为什么呢？并且元素没有垂直对齐。他们只是一个接一个地停留，为什么会发生这种情况？

PS我的浏览器是Chromium 18。不要注意没有ie-inline-block-fix等。CSS代码被简化只是为了指出问题。

![在此处输入图像描述](../Images/eed182db3179fe5cc4c70c3f7eab95ac.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T00:37:00.077

### *[jsBin 演示](http://jsbin.com/adugoz/1/edit)*

只要把你的`<i>`里面`<a>`。好处？您的图像将是可链接的。

```
<div class="phone-support">
   <a href="#">We'll call you  <i class="icon"></i> </a>
</div> 
```

比设置 a将您的图像设置在父`vertical-align:top;`级的顶部。`<a>`

```
.phone-support i.icon {
     display       : inline-block;
     vertical-align: top;
     height        : 30px;
     width         : 30px;
     background    : url(your url here);
     margin-left   : 10px;  /*add some space*/
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T00:23:51.070

尝试设置 CSS“垂直对齐”属性。对于大多数元素，它默认为“基线”，这可能是您唯一不想要的。我倾向于支持“垂直对齐：中间”。

“vertical-align:baseline”会发生什么情况是行内块元素在它们下方有一个间隙，大约是字母“g”的悬挂部分的大小，这可能是您看到的额外 3 个像素的高度。

# jquery - 当 ul li 与 float:left 一起使用时，iScroll 不会在 iPad 上向下滚动；

> ID：10377174
> 
> 赞同：0
> 
> 时间：2012-04-30T00:16:10.883
> 
> 标签：jquery, html, css, ipad, iscroll

我在要滚动的内容中向左浮动了一些 ul li 元素，但它一直移回顶部。我无法滚动屏幕的“折叠”。有人可以看看[http://ipad.veezo.co.uk](http://ipad.veezo.co.uk)上的代码并给我一些帮助吗？

谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Veezo</title>
<link href="style.css" rel="stylesheet" type="text/css" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<script type="application/javascript" src="js/cubiq-iscroll-712640b/src/iscroll.js"></script>

<script type="text/javascript">

var scrollContent,
    scrollNav;

function loaded() {
    scrollContent = new iScroll('contentScroller');
    scrollNav = new iScroll('navWrapper');
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

document.addEventListener('DOMContentLoaded', loaded, false);

</script>

</head>

<body>
<header id="status"><img src="images/ipad-status-name.jpg" alt="ipad" height="20px" width="auto" /><?php print date('H:i'); ?><img class="battery" src="images/ipad-status-battery.jpg" alt="ipad" height="20px" width="auto" /></header>
<header><img src="images/small-logo.png" alt="veezo" height="30px" width="auto" /></header>
<div id="page">
    <div id="sidebar">
        <nav id="navWrapper">
            <ul id="navScroller">
                <li>Home</li>
                <li>Movies</li>
                <li>TV Shows</li>
                <li>Music</li>
                <li>My Collection</li>
                <li>People</li>
            </ul>
        </nav>
    </div><!--end sidebar-->

    <div id="content">
        <article id="contentWrapper">
            <div id="contentScroller">
            <ul>
                <li><img src="images/content/drive.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
                <li><img src="images/content/tinker.jpg" /></li>
            </ul>                     
            </div><!--end contentScroller-->
        </article>
    </div><!--end content-->
</div> <!--end page-->

</body>
</html> 
```

和

```
html,body {
height:100%;
}

body,ul,li,header,nav,aside,section,article,p {
padding:0;
margin:0;
border:0;
 }

body {
font-size:12px;
-webkit-user-select:none;
-webkit-text-size-adjust:none;
font-family:helvetica;
background:#000;
}

p {
margin-bottom:1.5em;
line-height:150%;
 }

header,nav,aside,section,article {
display:block;
}

#page {
width:100%; height:100%;
position:relative;
display:-webkit-box;
display:-moz-box;
display:-o-box;
display:box;

-webkit-box-orient:horizontal;
-moz-box-orient:horizontal;
-o-box-orient:horizontal;
box-orient:horizontal;

background:#000;
}

#sidebar {
width:200px;
margin-right:1px;
}

#content {
-webkit-box-flex:1;
-moz-box-flex:1;
-o-box-flex:1;
box-flex:1;
}

#sidebar, #content {
position:relative;
height:100%;
}

header {
height:43px; line-height:43px;
border-bottom:1px solid #2a0e3c;
background-color:#000;
background-image:url(images/menubar-background.jpg);
background-size:46px;

color:#717880;
font-size:18px; font-weight:bold;
text-align:center;
text-shadow:0 1px 0 #fff;
-webkit-border-top-left-radius:4px;
-moz-border-top-left-radius:4px;
-o-border-top-left-radius:4px;
border-top-left-radius:4px;

-webkit-border-top-right-radius:4px;
-moz-border-top-right-radius:4px;
-o-border-top-right-radius:4px;
border-top-right-radius:4px;
}

header img{
margin-top:5px;
}

#status {
height:20px; line-height:20px;
background-color:#000;
background-image:none;
color:#999999;
font-size:13px;
text-align:center;
font-weight:bold;
text-shadow:none;
}

#status img{
margin:0;
float: left;
}

#status img.battery{
margin:0;
float: right;
}

#navScroller > li {
padding:0 10px;
border-bottom:1px solid #ccc;
height:60px; line-height:60px;
}

#contentScroller {
-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
-o-box-sizing:border-box;
box-sizing:border-box;
padding:0;
 }

#contentScroller ul li {
border:#FFF 15px solid;
width: 190px;
height: auto;
margin:40px 0 0 40px;
-webkit-box-shadow: 0 8px 6px -6px #333;
-moz-box-shadow: 0 8px 6px -6px #333;
box-shadow: 0 8px 6px -6px #333;
list-style:none;
float:left;
}

#contentScroller ul li img{
width: 100%;
height: auto;
}

nav {
position:absolute;
top:0; bottom:0; left:0; right:0;
font-size:15px;
background:#fff;

}

article {
position:absolute;
top:0; bottom:0; left:0; right:0;
font-size:15px;
background-image:url(images/background.jpg);
background-size:50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T15:25:13.977

我查看了您的页面，从我在 css 中看到的内容来看，您有

```
#contentScroller {
    padding-bottom: 1210px;
} 
```

我建议不要指定 padding-bottom 而是让您的 #contentScroller 浮动到左侧，如下所示：

```
#contentScroller {
    float: left;
} 
```

它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:01:29.123

试试下面的 CSS。它对我有用。

```
#navWrapper {
    position: absolute;
    z-index: 1;
    top: 55px;
    left: 0;
    width: 6%;
    bottom: 0px;
} 
```

在这里，`width`取决于`top`您的需求。

# php - 做一个简单的搜索

> ID：10377176
> 
> 赞同：0
> 
> 时间：2012-04-30T00:16:40.323
> 
> 标签：php, mysql

我正在做一个简单的搜索，以下查询是否正确？

```
mysql_query("SELECT * FROM products WHERE name LIKE'$searchquery' AND description LIKE'$searchquery'"); 
```

编辑：

`LIKE '$searchquery;`这部分需要一个空格，事实证明这是一个语法问题。我对第二种方式很感兴趣。正如@yes123 所建议的那样。

```
SELECT * FROM products WHERE MATCH(name,description) AGAINST ('$searchQuery') 
```

我这样做，我得到：

`Warning: mysql_numrows(): supplied argument is not a valid MySQL result resource in /home/search.php on line 62`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:19:51.150

对于搜索目的，您应该使用全文索引。那时您的查询将变为：

```
[...] WHERE MATCH(col1,col2) AGAINST ('your search') [...] 
```

请使用 PDO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:22:17.513

是的，语法是正确的，唯一的问题似乎是 LIKE 后有空格，因此尝试 `SELECT * FROM products WHERE NAME LIKE '$searchquery' AND description LIKE '$searchquery';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T00:22:42.067

这是正确的，但是，您需要在两个位置之间`LIKE`和`'$searchquery'`两个位置之间放置一个空格。

# ruby-on-rails - 允许用户上传视频的网络应用程序

> ID：10377177
> 
> 赞同：-2
> 
> 时间：2012-04-30T00:16:47.647
> 
> 标签：ruby-on-rails

我正在尝试在 ruby​​ on rails 上构建一个网络应用程序，但我不知道在哪里可以找到让用户登录并将他们的视频上传到应用程序墙的代码。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:25:23.563

您可以使用[CarrierWave](https://github.com/jnicklas/carrierwave)，大多数教程将指导您让用户上传照片，但 CW 几乎可以管理任何类型的文件上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:46:39.180

这是一个很棒的教程，可以遵循[http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)。

这取决于您的部署平台。如果您使用的是 Heroku（它有 30 秒的 http 请求超时），那么我建议您实施 Uploadify 或 Carrierwave-direct。

如果它们是小视频，那么只需使用上面建议的 CarrierWave，使用 Amazon S3 进行存储并[设计](https://github.com/plataformatec/devise)用于您的用户身份验证。

# visual-studio-2010 - Vs2010 尝试运行后显示此 0xc00000ba 错误

> ID：10377181
> 
> 赞同：2
> 
> 时间：2012-04-30T00:17:05.050
> 
> 标签：visual-studio-2010

这似乎是在我调试转储文件之后发生的。我该如何解决这个问题？（在我重新安装 IDE 甚至操作系统之前）

顺便说一句，我使用的是 Windows server 2008 R2

![错误消息框](../Images/87f238df433e5b3e8d3f2e458ce8462b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:52:26.503

以下是您在问题评论中提供的解决方案的一些额外信息（删除 IDE 目录中的所有 *.dll 和 *.pdb 文件夹）。

我今天早些时候在玩 Microsoft Symbol Server 设置。它必须将符号数据转储到我的 IDE 目录 (C:\Program Files\Microsoft Visual Studio\Common7\IDE)。我删除了所有 *.dll 和 *.pdb 文件夹。那成功了。他们都修改了相同的日期，所以我只是按该列排序以找到我需要删除的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:27:46.150

你试过这个：

[http://connect.microsoft.com/VisualStudio/feedback/details/333800/ide-wont-start-0xc00000ba-in-event-log-due-to-symbols-files-going-to-devenv-exe-dir](http://connect.microsoft.com/VisualStudio/feedback/details/333800/ide-wont-start-0xc00000ba-in-event-log-due-to-symbols-files-going-to-devenv-exe-dir)

看看，解决方案为提出问题的人解决了。也可以帮助你。

干杯，

# c++ - 如果包为空，是否对可变参数包类型执行替换？

> ID：10377183
> 
> 赞同：10
> 
> 时间：2012-04-30T00:18:09.740
> 
> 标签：c++, c++11, g++, clang, sfinae

考虑以下程序：

```
#include <type_traits>

enum class dummy {};
template <typename T>
using EnableIf = typename std::enable_if<T::value, dummy>::type;
template <typename T>
using DisableIf = typename std::enable_if<!T::value, dummy>::type;

template <typename T>
struct dependent_true_type : std::true_type {};

template <typename T,
          EnableIf<dependent_true_type<T>>...>
std::true_type f();
template <typename T,
          DisableIf<dependent_true_type<T>>...>
std::false_type f();

static_assert(decltype(f<int>())::value, "");

int main() {} 
```

GCC 4.7 高兴接受这个程序。我最近的 clang 3.1 版本声称调用`f`是模棱两可的。

```
test.c++:22:24: fatal error: call to 'f' is ambiguous
static_assert(decltype(f<int>())::value, "");
                       ^~~~~~
test.c++:17:16: note: candidate function [with T = int, $1 = <>]
std::true_type f();
               ^
test.c++:20:17: note: candidate function [with T = int, $1 = <>]
std::false_type f();
                ^
1 error generated. 
```

如果我写它确实接受程序`f<int, dummy{}>()`。

当包为空时，clang 似乎没有考虑参数包的类型，这导致不将其从候选集中删除。即使包为空，GCC 似乎也会对参数包类型执行替换，并且由于所述替换因一次重载而失败，因此没有歧义。

两者哪一个是正确的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T02:24:11.240

我相信我已经找到了相关的标准。§14.8.2p7 说：

> 替换发生在函数类型和模板参数声明中使用的所有类型和表达式中。

由于`EnableIf<dependent_true_type<T>>`在模板参数声明中使用，因此应该进行替换，这是[clang 中的一个错误](http://llvm.org/bugs/show_bug.cgi?id=11723)。

# java - 如何在 JEditorPane 中显示 html 文件

> ID：10377186
> 
> 赞同：0
> 
> 时间：2012-04-30T00:18:18.267
> 
> 标签：java, html, swing, file, jeditorpane

我正在尝试在 jeditorpane 中显示一个 html 文件。

该文件保存在项目文件夹中，由程序生成。这是一张名为 FredReceipt.html 的收据

我了解如何将 jeditorpane 用于 url，但是我无法理解如何通过教程等加载文件......我一直在从网上阅读。我想使用相对 url 加载文件。这就是我目前所拥有的，它不起作用（显然），它正在捕获 IOException。

```
public void showReceipt() {
    receiptPanel = new JPanel();
    receiptPanel.setVisible(true);
    receiptPanel.setBackground(new Color(250,251,253)); 
    String url = "FredReceipt.html";
    try {
      JEditorPane htmlPane = new JEditorPane("FredReceipt.html");
      htmlPane.setEditable(false);
      receiptPanel.add(new JScrollPane(htmlPane));
    } catch(IOException ioe) {
      System.err.println("Error displaying " + url);
    }

} 
```

我也尝试过使用这样的“setPage()”方法：

```
public void showReceipt() {
    receiptPanel = new JPanel();
    receiptPanel.setVisible(true);
    receiptPanel.setBackground(new Color(250,251,253)); 
    try {
      JEditorPane htmlPane = new JEditorPane();
      htmlPane.setPage(new URL("FredReceipt.html"));
      htmlPane.setEditable(false);
      receiptPanel.add(new JScrollPane(htmlPane));
    } catch(IOException ioe) {
      System.err.println("Error displaying file");
    }

} 
```

FredReceipt.html 显然不是 url，但我已经读过文件可以像 url 一样读取，我只是找不到正确的方法。

我希望我的问题不是太愚蠢，非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:42:36.153

该文件不应写入安装应用程序的同一目录中。由于此数据是由应用程序生成的，因此它似乎是暂时的。在这种情况下，最好将`java.io.tmpdir`, 作为一个[临时文件，并](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)[在退出](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#deleteOnExit%28%29)时请求删除。像这样的东西：

```
File tempDir = new File(System.getProperty("java.io.tempdir"));
File receiptFile = File.createTempFile("FredReceipt", "html", tempDir);
receiptFile.deleteOnExit();
// fill the file with mark-up
// ...
// end filling
editorPane.setPage(receiptFile.toURI().toURL()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T04:23:25.200

JEdi​​torPane 是一种花哨的文本区域，可以显示源自不同文件格式的文本。

以下链接可能对您有所帮助。
[JEdi​​torPane 中的 HTML](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)

# iphone - UILabel 有两种不同的 fontColor

> ID：10377188
> 
> 赞同：1
> 
> 时间：2012-04-30T00:18:54.917
> 
> 标签：iphone, objective-c, ios, ipad, uitextview

我怎样才能拥有一个具有两种不同字体颜色/类型的 UILabel？我认为这是不可能的，如果没有，那么最接近的方法是什么？我现在的解决方案是使用两个 UILabel，然后将一个 UILabel 放在另一个 UILabel 的顶部，并为第二个 UILabel 放置一个间距/缩进，以便文本开始。但是问题是缩进没有对齐。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:23:36.710

您可以使用[NSAttributedString](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)。查看[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:06:41.320

[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)可能是您想要的，但另一种可能性是将 a`UIWebView`与 HTML 和 CSS 一起使用。

# c# - 写入文件时发生 EncoderFallbackException

> ID：10377189
> 
> 赞同：0
> 
> 时间：2012-04-30T00:19:04.870
> 
> 标签：c#, debugging, encoding, character-encoding

我正在读取 MS Office Word 2010 文件 (.docx)，然后对其进行处理，然后将其写入新文件。我添加的唯一字符是大多数键盘上的字符（字母、数字、标点符号……），而且我还在稍微移动现有字符。

```
 StreamReader sr = new StreamReader(File.OpenRead("fs.docx"));
        string foo = sr.ReadToEnd();
        sr.Close();
        string foo2 = EncryptFile(foo);
        StreamWriter sw = new StreamWriter(File.Create("sal.docx"));
        sw.Write(foo2); // THIS IS WHERE THE EXCEPTION HAPPENS
        sw.Close();
        foo = DecryptFile(foo2);
        StreamWriter sww = new StreamWriter(File.Create("sal2.docx"));
        sww.Write(foo);
        sww.Close();

    public static string Salt(string Input)
    {
        Random rand = new Random();
        string Output = "";
        string BigSalt = "";
        int SaltIncrement = rand.Next(4, 8);
        for (int i = 0; i < 10; i++) {
            BigSalt += FindCipherPlainText.Substring(rand.Next(0, FindCipherPlainText.Length), 1);
        }
        Input = BigSalt + Input;

        for (int i = Input.Length; i >= 0; i--) {
            if ((decimal)i % SaltIncrement == 0) {
                Input = Input.Insert(i, FindCipherPlainText.Substring(rand.Next(0, FindCipherPlainText.Length), 1));
            }
        }
        Input += FindCipherPlainText.Substring(rand.Next(0, FindCipherPlainText.Length), 1);
        Input = ((SaltIncrement + 2) * 8).ToString().Substring(1, 1) + Input + ((SaltIncrement + 2) * 8).ToString().Substring(0, 1) + rand.Next(0, 10).ToString();
        return Input;
    }

    public static string Mix(string Input) {
        string Output = "";
        if (Input.Length > 1)
        {
            if (Input.Length % 2 == 0)
            {
                Output = Input.Substring(Input.Length / 2);
                Output += Input.Substring(0, Input.Length / 2);
            }
            else
            {
                Output = Input.Substring((Input.Length - 1) / 2);
                Output += Input.Substring(0, (Input.Length - 1) / 2);
            }
        }
        else {
            return Input;
        }
        return Output;
    }

    public static string Shift(string Input) {
        string Output = "";
        bool Found = false;
        for (int i = 0; i < Input.Length; i++) {
            Found = false;
            for (int ii = 0; ii < FindCipherPlainText.Length; ii++) {
                if (Input.Substring(i, 1) == FindCipherPlainText.Substring(ii, 1)) {
                    Output = Output.Insert(0, ReplaceCipherPlainText.Substring(ii, 1));
                    Found = true;
                    break;
                }
            }
            if (!Found) {
                Output = Output.Insert(0, Input.Substring(i, 1));
            }
        }
        return Output;
    }

    public static string EncryptFile(string Input) {
        return Mix(  Salt(  Shift(  Mix(  Input))));
    }

System.Text.EncoderFallbackException was unhandled
  Message=Unable to translate Unicode character \uDF23 at index 428 to specified code page.
  Source=mscorlib
  Index=428 
```

这是我的代码，以及一些异常细节，我在上面描述了 EncryptFile() 和 DecryptFile() 的作用，添加字符，移动它们......有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:14:16.423

此异常的原因是字符交换函数最终会生成一个带有无效[代理对](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2BD800_to_U.2BDFFF)的 UTF-16 字符串。也就是说，至少有一个代码为 [DC00-DFFF] 的字符前面没有代码为 [D800-DBFF] 的字符。此字符串无法写入文件，因为无法表示目标编码中的无效字符。

为了用一个更简单的例子来演示这个问题，下面是一段模拟相同情况的代码：

```
static void Main(string[] args)
{
    // A perfectly valid surrogate pair with 1st character in the D800-DBFF range,
    // and 2nd character in the DC00-DFFF range.
    string validSurrogate = "\uD801\uDC01";

    // Creating an invalid surrogate pair just by swapping the two characters in the first string.
    string invalidSurrogate = validSurrogate.Substring(1, 1) + validSurrogate[0];

    // This will work fine.
    File.WriteAllText("valid.txt", validSurrogate);

    // --! But this will crash !--
    File.WriteAllText("invalid.txt", invalidSurrogate);
} 
```

我会推荐以下内容：

*   在所有加密/解密函数中使用字节数组而不是字符串。然后将这些字节数组直接写入文件而不将它们视为文本。
*   如果这是一个“现实世界”应用程序而不是家庭作业或宠物项目，请使用加密标准（AES、3DES、...）进行加密，而不是设计自己的密码 :)

# objective-c - 为什么取消引用 null 不会使我的程序崩溃？

> ID：10377193
> 
> 赞同：4
> 
> 时间：2012-04-30T00:20:12.537
> 
> 标签：objective-c, macos, cocoa

我编写了以下代码来引发崩溃（我正在使用 CrashReporter测试一些[问题）：](https://stackoverflow.com/questions/10359966/crashreporter-dialog-doesnt-show-when-mac-app-crashes)

```
int *nullp = NULL;
int val = *nullp;    
NSLog(@"Hello world %d", val); 
```

在一个全新的项目中（我把它放在应用程序委托中`applicationDidFinishLaunching:`）它按预期崩溃。但是当我将它添加到我现有的项目之一时，它不会崩溃！事实上，它最终会在系统日志中打印“Hello world 0”。

这对我来说没有任何意义。为什么 null 取消引用不会导致崩溃？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T00:23:06.087

取消引用 NULL 具有未定义的行为，它不必导致崩溃。

话虽如此，如果您在两个项目中有不同的编译器选项，那么您很有可能在这些情况下获得不同的行为。请参阅有关未定义行为[的 LLVM 博客文章。](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:33:01.353

取消引用空指针是未定义的行为 - 即没有规则说它*必须*使您的应用程序崩溃。

不同的编译器会给出不同的结果——不同的编译器选项（例如发布与调试配置）也会影响事情。

如果您试图强制崩溃，您总是可以开始写入空指针......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T18:08:51.320

int *nullp = NULL; 或 int *nullp = 0 相同，这意味着指针 nullp 未指向内存位置。由于 NULL == 0 它正在打印零并且没有崩溃

# uml - 子类的“取决于”关系

> ID：10377195
> 
> 赞同：0
> 
> 时间：2012-04-30T00:20:36.457
> 
> 标签：uml

我有几个关于 UML 的问题：

1.  如果一个类（我们称之为*B*）是从*A*派生的，并且*A*类使用其他一些其他类（有关系），我是否也必须从*B*绘制箭头到所有使用的类？
2.  如果一个类使用一个`ArrayList<myclass>`，说这个类使用是正确的`myclass`吗？
3.  如果一个方法使用泛型（或模板），我对它们采用什么语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:58:58.080

1.  不，属性是隐式继承的，无需再次显式建模。

2.  是的，如果您的意思是 ArrayList 仅包含 myclass 的成员 - 只需为 myclass 绘制一个 to-n 关联。

3.  您可以使用 UML 模板进行参数化。看起来像[这样](http://etutorials.org/Programming/UML/Chapter+6.+Class+Diagrams+Advanced+Concepts/Parameterized+Class/)。但不要将它用于集合 - 使用 to-n 关联（如 2 中）更好。

# mysql - 如何获取所有学生的列表和作业与成绩的组合？

> ID：10377196
> 
> 赞同：0
> 
> 时间：2012-04-30T00:20:40.517
> 
> 标签：mysql, sql

我有三个表：成绩、作业、用户。我希望能够找到用户已经完成和尚未完成的任务。我知道我们在这里使用 OUTER 连接，但我似乎无法获得正确的 SQL 来复制我想要的内容。在我的表格中，1 名学生已完成 1 项作业（显示 1、3、1 名学生已完成 2 项作业，1 名学生已完成 3 项作业，请在下方发布完整表格

```
assignment table:

assignmentID |  assignmentType | totalScore |
-------------|-----------------|------------|
      1      |   Assignment    |    100     |
      2      |   Assignment    |    100     |
      3      |   Assignment    |    100     |
      4      |   Test          |    200     |

grade table:

gradeID  |  studentID  |  assignmentID  |  grade  |
---------|-------------|----------------|---------|
   1     |      3      |       1        |    100  | 
   2     |      3      |       2        |    100  |                
   3     |      3      |       3        |    100  |                
   4     |      2      |       1        |    100  |                
   5     |      2      |       2        |    100  |                
   6     |      1      |       1        |    100  | 

student table:

studentID  | studentName |
-----------|-------------|
     1     |     John    |     
     2     |     Jane    |
     3     |     Joe     | 
```

因此，在上述场景中，John 将完成 1 个作业，3 个未完成，Jane 将完成 2 个作业，2 个未完成作业，而 Joe 将完成 3 个作业，1 个未完成作业。

希望输出为：

```
studentID | achievementID | grade |
----------|---------------|-------|
    1     |       1       |  100  |
    1     |       2       |  NULL |
    1     |       3       |  NULL |
    1     |       4       |  NULL |
    2     |       1       |  100  |
    2     |       2       |  100  |
    2     |       3       |  NULL |
    2     |       4       |  NULL |
    3     |       1       |  100  |
    3     |       2       |  100  |
    3     |       3       |  100  |
    3     |       4       |  NULL | 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:44:25.687

这是实现它的一种方法。您可以`full outer join`在表之间执行 a `student`，`assignment`因为您希望它们之间的所有组合都包含在结果集中。在包含学生和作业的所有组合的派生输出表上，`LEFT OUTER JOIN`在表中添加一个成绩以获取成绩结果，

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/7566e/16)

*脚本*：

```
CREATE TABLE assignment
(
    assignmentid    INT         NOT NULL
  , assignmenttype  VARCHAR(20) NOT NULL
  , totalscore      INT         NOT NULL
);

CREATE TABLE grade
(
    gradeid         INT NOT NULL
  , studentid       INT NOT NULL
  , assignmentid    INT NOT NULL
  , grade           INT NOT NULL
);

CREATE TABLE student
(
    studentid   INT         NOT NULL
  , studentname VARCHAR(20) NOT NULL
);

INSERT INTO assignment (assignmentid, assignmenttype, totalscore) VALUES
    (1, 'Assignment', 100),
    (2, 'Assignment', 100),
    (3, 'Assignment', 100),
    (4, 'Test', 200);

INSERT INTO grade (gradeid, studentid, assignmentid, grade) VALUES
    (1, 3, 1, 100),
    (2, 3, 2, 100),
    (3, 3, 3, 100),
    (4, 2, 1, 100),
    (5, 2, 2, 100),
    (6, 1, 1, 100);

INSERT INTO student (studentid, studentname) VALUES
    (1, 'John'),
    (2, 'Jane'),
    (3, 'Joe'),
    (4, 'Jill');

SELECT  sa.studentid
    ,   sa.studentname
    ,   sa.assignmentid
    ,   g.grade
FROM
(
        SELECT  s.studentid
            ,   s.studentname
            ,   a.assignmentid 
        FROM    student     s
            ,   assignment  a
)               sa 
LEFT OUTER JOIN grade g
ON              sa.studentid    = g.studentid
AND             sa.assignmentid = g.assignmentid
ORDER BY        sa.studentid
            ,   sa.assignmentid; 
```

*输出*：

```
STUDENTID STUDENTNAME ASSIGNMENTID GRADE
--------- ----------- ------------ -----
     1    John              1       100
     1    John              2       
     1    John              3 
     1    John              4 
     2    Jane              1       100
     2    Jane              2       100
     2    Jane              3 
     2    Jane              4 
     3    Joe               1       100
     3    Joe               2       100
     3    Joe               3       100
     3    Joe               4 
     4    Jill              1 
     4    Jill              2 
     4    Jill              3 
     4    Jill              4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:48:09.593

试试这个：[http ://www.sqlfiddle.com/#!2/23408/15](http://www.sqlfiddle.com/#!2/23408/15)

```
select s.studentID, s.studentName,

    count(g.assignmentID) as completed,
    count(a.assignmentID) - count(g.assignmentID) as incomplete,

    count(a.assignmentID) as total

from student s
cross join assignment a

left join grade g 
on g.studentId = s.studentId
and g.assignmentID = a.assignmentID

group by s.studentId 
```

输出：

```
STUDENTID       STUDENTNAME     COMPLETED       INCOMPLETE      TOTAL
1               John            1               3               4
2               Jane            2               2               4
3               Joe             3               1               4 
```

样本数据：

```
CREATE TABLE assignment
    (assignmentID int, assignmentType varchar(10), totalScore int);

INSERT INTO assignment
    (assignmentID, assignmentType, totalScore)
VALUES
    (1, 'Assignment', 100),
    (2, 'Assignment', 100),
    (3, 'Assignment', 100),
    (4, 'Test', 200);

CREATE TABLE student
    (studentID int, studentName varchar(4));

INSERT INTO student
    (studentID, studentName)
VALUES
    (1, 'John'),
    (2, 'Jane'),
    (3, 'Joe');

CREATE TABLE grade
    (gradeID int, studentID int, assignmentID int, grade int);

INSERT INTO grade
    (gradeID, studentID, assignmentID, grade)
VALUES
    (1, 3, 1, 100),
    (2, 3, 2, 100),
    (3, 3, 3, 100),
    (4, 2, 1, 100),
    (5, 2, 2, 100),
    (6, 1, 1, 100); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T00:54:20.637

另一种方法可能更快，总分配的计算只完成一次：

[http://www.sqlfiddle.com/#!2/23408/17](http://www.sqlfiddle.com/#!2/23408/17)

```
select s.studentID, s.studentName,

    count(g.assignmentID) as completed,
    ta.total - count(g.assignmentID) as incomplete,

    ta.total

from student s
cross join (select count(*) as total from assignment) as ta

left join grade g 
on g.studentId = s.studentId

group by s.studentId 
```

但是，这需要成绩的 assignmentID 和 assignment 的 assignmentID 之间的外键保持一致，因为此查询*盲目地*计算学生的作业

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T04:07:06.270

您的新要求：[http ://www.sqlfiddle.com/#!2/23408/23](http://www.sqlfiddle.com/#!2/23408/23)

```
select s.studentID, 

    a.assignmentID as achievementID,
    g.grade

from student s
cross join assignment a

left join grade g 
on g.studentId = s.studentId
and g.assignmentID = a.assignmentID

order by s.studentID, achievementID 
```

输出：

```
STUDENTID    ACHIEVEMENTID    GRADE
1            1                100
1            2    
1            3    
1            4    
2            1                100
2            2                100
2            3    
2            4    
3            1                100
3            2                100
3            3                100
3            4 
```

sqlfiddle 不会在其输出中将 NULL 显示为 NULL。尽管如此，上述空等级的基础空值是 NULL

* * *

您也可以使用表格逗号表格，而不是使用CROSS JOIN；但这通常是不受欢迎的。使用逗号表很容易提交无意的笛卡尔积，想象一下使用逗号表的方法在三个或更多表上会产生多少行。这就是为什么在 SQL 中引入 JOIN (INNER,LEFT,CROSS,FULL,NATURAL) 关键字以使代码意图更加清晰

[http://www.sqlfiddle.com/#!2/23408/37](http://www.sqlfiddle.com/#!2/23408/37)

```
select s.studentID, 

    a.assignmentID as achievementID,
    g.grade

from (student s, assignment a)

left join grade g 
on g.studentId = s.studentId
and g.assignmentID = a.assignmentID

order by s.studentID, achievementID 
```

我宁愿使用 CROSS JOIN 关键字而不是使用表逗号表。CROSS JOIN 形式化了笛卡尔积的概念。JOIN 通常形式化了您想要在查询中实现的目标。对于逗号表，很难从查询中推断出您的表是否会以*inner-join-y*操作或*left-join-y*操作等结束。

# c#-4.0 - 如何扩展 MEF 以基于作为属性提供的工厂类型创建对象？

> ID：10377206
> 
> 赞同：3
> 
> 时间：2012-04-30T00:23:08.543
> 
> 标签：c#-4.0, mef

[考虑以下使用MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)组合的现有类`Consumer`。

```
public interface IProducer
{
    void Produce();
}

[Export(typeof(IProducer))]
public class Producer : IProducer
{
    public Producer()
    {
        // perform some initialization
    }

    public void Produce()
    {
        // produce something
    }
}

public class Consumer
{
    [Import]
    public IProducer Producer
    {
        get;
        set;
    }

    [ImportingConstructor]
    public Consumer(IProducer producer)
    {
        Producer = producer;
    }

    public void DoSomething()
    {
        // do something
        Producer.Produce();
    }
} 
```

但是，创建`Producer`已经变得足够复杂，无法再在构造函数中完成，默认行为也不再足够。

我想介绍一个工厂并使用生产者本身的自定义 FactoryAttribute 注册它。这就是我的想法：

```
[Export(typeof(IProducer))]
[Factory(typeof(ProducerFactory))]
public class Producer : IProducer
{
    public Producer()
    {
        // perform some initialization
    }

    public void Produce()
    {
        // produce something
    }
}

[Export]
public class ProducerFactory
{
    public Producer Create()
    {
        // Perform complex initialization
        return new Producer();
    }
}

public class FactoryAttribute : Attribute
{
    public Type ObjectType
    {
        get;
        private set;
    }

    public FactoryAttribute(Type objectType)
    {
        ObjectType = objectType;
    }
} 
```

如果我必须自己编写“新”代码，它可能看起来如下所示。它将使用工厂属性（如果存在）来创建零件，或者默认使用 MEF 来创建它。

```
public object Create(Type partType, CompositionContainer container)
{
    var attribute = (FactoryAttribute)partType.GetCustomAttributes(typeof (FactoryAttribute), true).FirstOrDefault();
    if (attribute == null)
    {
        var result = container.GetExports(partType, null, null).First();
        return result.Value;
    }
    else
    {
        var factoryExport = container.GetExports(attribute.ObjectType, null, null).First();
        var factory = factoryExport.Value;
        var method = factory.GetType().GetMethod("Create");
        var result = method.Invoke(factory, new object[0]);
        container.ComposeParts(result);
        return result;
    }
} 
```

有许多文章如何实现 ExportProvider，包括：

1.  [使用导出提供程序的 MEF + 对象工厂](http://pwlodek.blogspot.com/2010/10/mef-object-factories-using-export.html)
2.  [动态实例化](http://mef.codeplex.com/wikipage?title=PartCreator)

然而，这些例子并不理想，当

1.  应用程序没有依赖关系或知识`Producer`，只有`IProducer`. 创建时将无法注册工厂`CompositionContainer`。
2.  `Producer`被多个应用程序重用，开发人员可能会在`CompositionContainer`创建工厂时错误地忘记注册工厂。
3.  有大量类型需要自定义工厂，并且在`CompositionContainer`创建工厂时记住注册工厂可能会带来维护噩梦。

我开始创建一个 ExportProvider（假设这将提供使用工厂实现构造的方法）。

```
public class FactoryExportProvider : ExportProvider
{
    protected override IEnumerable<Export> GetExportsCore(ImportDefinition definition,
                                                          AtomicComposition atomicComposition)
    {
        // What to do here? 
    }
} 
```

但是，我无法理解如何告诉 MEF 使用 FactoryAttribute 中定义的工厂对象，如果不存在此类属性，则使用默认创建机制。

执行此操作的正确方法是什么？我正在使用[MEF 2 Preview 5](http://mef.codeplex.com/releases/view/79090)和 .NET 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T10:22:13.313

您可以使用**属性导出**：

```
public class ProducerExporter
{
   [Export]
   public IProducer MyProducer
   {
       get
       {
           var producer = new Producer();
           // complex initialization here
           return producer;
       }
   }
} 
```

请注意，*工厂*一词并不真正适合您的示例，我将保留该术语以用于进口商想要随意创建实例的情况，可能通过提供一个或多个参数。这可以通过**方法 export**来完成：

```
public class ProducerFactory
{
   [Export(typeof(Func<Type1,Type2,IProducer>)]
   public IProducer CreateProducer(Type1 arg1, Type2 arg2)
   {
       return new Producer(arg1, arg2);
   }
} 
```

在导入方面，您将导入一个`Func<Type1,Type2,IProducer>`您可以随意调用以创建新实例的实例。

# java - 如果字符串包含某些内容，如何不将字符串添加到文本区域 - Java

> ID：10377207
> 
> 赞同：0
> 
> 时间：2012-04-30T00:23:21.210
> 
> 标签：java, string, textarea, inputstream

我有以下内容：

```
InputStream inputFromServer
TextArea t
String display
String validation 
```

字符串显示保存来自输入流的数据，然后将其添加到文本区域。我想检查是否显示包含验证，然后不要将其写入文本区域。这是我目前拥有的代码：

```
while ((inputFromServer.read())!=-1)
{
    display = display + ((char)inputFromServer.read());
    t.setText(s);
} 
```

我想要类似的东西：

```
while ((inputFromServer.read())!=-1)
{
    display = display + ((char)inputFromServer.read());
    if display contains validation {
        THEN DONT WRITE IT TO THE TEXT AREA
    } 
    else{
        t.setText(s);
    }
} 
```

如果方法完全错误，那么有人可以指导我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:32:33.790

你可以这样做：

```
while ((inputFromServer.read())!=-1)
{
    display = display + ((char)inputFromServer.read());
    if (!display.contains(VALIDATION_STRING) {
        t.setText(s);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:37:34.740

好的，因为验证`String`可能未初始化，您可以检查一下

```
display += ((char)inputFroMServer.read());
if(validationString.equals("") || !display.contains(validationString)) {
      t.setText(display);
} 
```

或者就像我在评论中说的那样，你可以这样做：

```
!display.toLowerCase().contains(validationString.toLowerCase()) 
```

如果你不关心大小写

此外，如果您要多次编辑显示字符串，您应该考虑使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/)

# swt - 如何在 Eclipse 中查看/编辑向导对话框的源代码

> ID：10377208
> 
> 赞同：0
> 
> 时间：2012-04-30T00:23:21.763
> 
> 标签：swt, eclipse-rcp, jface, eclipse-plugin

我对 Eclipse 插件不太熟悉。我有一个关于在 Eclipse 中查看/编辑向导对话框的源代码的问题。

例如： 在 Eclipse 中，单击 File ->New->Class，出现“New Java Class”向导对话框。

我的问题是：

1.  如何查看此向导对话框的源代码？
2.  我可以修改此向导对话框的样式吗？例如，“超类”的默认值为`java.lang.Object`，我可以将默认值更改为另一个类（例如 com.myown.myaction）吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:32:32.790

要快速查看 UI 元素的来源，请使用 Plug-in Selection Spy 工具（在选定的 UI 元素上按 Alt+Shift+F1）。然后，如果您知道它源自的类和插件，您可以将其导入您的工作区并浏览。

# javascript - 从另一个 js 函数触发主干事件

> ID：10377211
> 
> 赞同：0
> 
> 时间：2012-04-30T00:23:36.033
> 
> 标签：javascript, backbone.js, backbone-events

环顾四周，但找不到任何有用的东西，所以..

我有一个带有联系人卡片视图的 Backbone.js 联系人模型。此视图有许多输入，您可以在其中编辑联系人信息。

我在页面上有许多其他表单不是主干模型，所以他们使用“保存按钮”来保存。我基本上希望这个保存按钮也能触发`Contacts.CardView.saveCard();`（可能是`FileApp.cardView.saveCard as well?`——我的一些代码在下面。

有没有办法做到这一点？我以为我可以使用以下内容，但似乎它不会将事件绑定到视图之外的任何内容？：

```
events: {
    "change input": "change",
    "click #save": "saveCard"
},
$('#save').click(function() {
    FileApp.cardView.saveCard;
    _SAVE.save();
}) 
```

卡片视图

```
window.Contacts.CardView = Backbone.View.extend({

    events: {
        "click #save": "saveCard" // doesnt work because #save is outside the view?
    },

    saveCard: function(e) {
        this.model.set({
            name:$('#name').val()
        });
        if (this.model.isNew()) {
            var self = this;
            FileApp.contactList.create(this.model, {
                success:function () {
                    FileApp.navigate('contacts/' + self.model.id, false);
                }
            });
        } else {
            this.model.save();
        }

        return false;
    }
} 
```

路由器：

```
var FileRouter = Backbone.Router.extend({
    contactCard:function (id) {
        if (this.contactList)  {
            this.cardList = new Contacts.CardCollection();
            var self = this;
            this.cardList.fetch({
                data: {
                    "id":id
                },
                success: function(collection, response) {
                    if (self.cardView) self.cardView.close();
                    self.cardView = new Contacts.CardView({
                        model: collection.models[0]
                    });
                    self.cardView.render();
                }
            });

        } else {
            CONTACT_ID = id;
            this.list();
        }
    }
});

var FileApp = new FileRouter(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T01:15:10.073

一种选择是为这种情况创建自己的事件对象：

```
// Before initializing views, etc.
var formProxy = {};
_.extend(formProxy, Backbone.Events);

// Add the listener in the initialize for the CardView
window.Contacts.CardView = Backbone.View.extend({
  initialize : function() {
    formProxy.on('save', this.saveCard, this);
  },
  saveCard: function() {
    this.model.set({
        name:$('#name').val()
    });
    if (this.model.isNew()) {
        var self = this;
        FileApp.contactList.create(this.model, {
            success:function () {
                FileApp.navigate('contacts/' + self.model.id, false);
            }
        });
    } else {
        this.model.save();
    }
    return false;
  }
}

// Save
$('#save').click(function() {
   formProxy.trigger('save');
}); 
```

请参阅：[http ://documentcloud.github.com/backbone/#Events](http://documentcloud.github.com/backbone/#Events)

# iphone - 在 iOS 中绘制 NSAttributedString？

> ID：10377218
> 
> 赞同：0
> 
> 时间：2012-04-30T00:25:07.300
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想画`NSAttributedString`一个矩形，就像我用一个普通的字符串一样：`[normalString drawInRect:rect];`但我不知道怎么做。我不想要任何子`UILabel`类，因为我正在实现`UITableView`没有视图的快速滚动，因此需要绘制它。[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/Tasks/DrawingAttrStrings.html#//apple_ref/doc/uid/20000163-CJBGBIBJ)显示绘图仅在 Mac 上可用。

在 iOS 上不能绘图`NSAttributedString`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:33:16.220

您必须使用[Core Text](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)在 iOS 上绘制属性字符串。

基本过程是`CTFramesetter`从字符串和矩形`CGPath`（或您可能想要的任何其他形状）创建一个，然后使用创建框架`CTFramesetterCreateFrame`并使用`CTFrameDraw`.

# python - 在运行时与 python 子进程通信

> ID：10377221
> 
> 赞同：3
> 
> 时间：2012-04-30T00:25:31.847
> 
> 标签：python, subprocess, nuke

我运行一个以“命令”模式运行软件的子进程。（这个软件是 The Foundy 的 Nuke，如果你知道那个软件的话）

在命令模式下，该软件正在等待用户输入。此模式允许在没有任何 UI 的情况下创建合成脚本。

我已经完成了启动进程的这段代码，找到应用程序何时启动，然后我尝试向进程发送一些命令，但标准输入似乎没有正确发送命令。

这是我为测试此过程所做的示例代码。

```
import subprocess

appPath = '/Applications/Nuke6.3v3/Nuke6.3v3.app/Nuke6.3v3' readyForCommand = False

commandAndArgs = [appPath, '-V', '-t'] 
commandAndArgs = ' '.join(commandAndArgs) 
process = subprocess.Popen(commandAndArgs, 
                           stdin=subprocess.PIPE, 
                           stdout=subprocess.PIPE, 
                           stderr=subprocess.STDOUT, 
                           shell=True, )

while True:
    if readyForCommand:
        print 'trying to send command to nuke...'
        process.stdin.write('import nuke')
        process.stdin.write('print nuke')
        process.stdin.write('quit()')
        print 'done sending commands'
        readyForCommand = False
    else:
        print 'Reading stdout ...'
        outLine = process.stdout.readline().rstrip()
        if outLine:
            print 'stdout:', outLine

            if outLine.endswith('getenv.tcl'):
                print 'setting ready for command'
                readyForCommand = True

    if outLine == '' and process.poll() != None:
        print 'in break!'
        break

print('return code: %d' % process.returncode) 
```

当我在 shell 中运行 nuke 并发送相同的命令时，我得到的是：

```
sylvain.berger core/$ nuke -V -t
[...]
Loading /Applications/Nuke6.3v3/Nuke6.3v3.app/Contents/MacOS/plugins/getenv.tcl
>>> import nuke
>>> print nuke
<module 'nuke' from '/Applications/Nuke6.3v3/Nuke6.3v3.app/Contents/MacOS/plugins/nuke/__init__.pyc'>
>>> quit()
sylvain.berger core/$ 
```

知道为什么标准输入没有正确发送命令吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:31:22.493

您的代码将发送文本

```
import nukeprint nukequit() 
```

没有换行符，因此 python 实例不会尝试执行任何东西，一切都只是坐在缓冲区中等待换行符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:31:29.250

该`subprocess`模块不适用于与进程的*交互式*通信。充其量，你可以给它一个预先计算好的标准输入字符串，然后读取它的标准输出和标准错误：

```
p = Popen(..., stdin=PIPE, stdout=PIPE, stderr=PIPE)
out, err = p.communicate(predefined_stdin) 
```

如果您确实需要交互，请考虑使用[pexpect](http://www.noah.org/wiki/pexpect)。

# c# - 抽象类与类

> ID：10377223
> 
> 赞同：-1
> 
> 时间：2012-04-30T00:25:40.167
> 
> 标签：c#, .net, abstract-class

```
abstract class ClassStupid
{
    public ClassStupid()
    {

    }
}

ClassStupid stupid = new ClassStupid(); //This is not possible. We can not create an Instance of Abstract Class. 
```

我的问题是`MAGIC`C# 编译器中有什么阻止程序创建抽象类的实例，尽管有一个构造函数。

来自我的维基

*在面向对象编程中，类中的构造函数（有时缩写为 ctor）是在创建对象时调用的一种特殊类型的子例程。它**准备新对象**以供使用，通常接受构造函数用于设置首次创建对象时所需的任何成员变量的参数。它被称为构造函数，因为它构造类的数据成员的值。*

抽象类构造函数与普通类构造函数有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:30:36.723

抽象类和非抽象类的构造函数没有区别；然而，这些类是不同的，编译器知道这一点。这就是禁止以您在帖子中显示的方式构造抽象类的原因：编译器只是检查`IsAbstract`标志，并在编译时禁止构造。

此外，CLR 还有一个运行时标志，表明一个类是抽象的。这就是为什么您无法在运行时通过*反射*实例化抽象类的原因。

# vim - 如何以自动格式将我自己的 CR 保存在 Vim 中？

> ID：10377226
> 
> 赞同：2
> 
> 时间：2012-04-30T00:26:24.450
> 
> 标签：vim

我`set fo+=a`在 Vim 中使用以在键入时启用自动格式。

使用该设置，`<CR>`如果当前行的长度小于 ，则当我继续键入时，我按下的将被删除`lw`，这不是我想要的。

我想要的是：

1.  如果行长于 ，仍然可以`<CR>`自动添加`lw`。

2.  `<CR>`当我在行长度小于时手动键入 a时`lw`，我不希望`<CR>`在继续键入时将其删除。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:06:44.020

你不能。格式选项“a”旨在在每次更改段落时重新格式化您的段落，因此关于 VIM 中“段落”的定义，您无法在段落内保留任何单行换行符。

如果您只需要在键入时能够换行，则不需要选项“a”。对于您的情况，选项“t”已经足够了。

```
t   Auto-wrap text using textwidth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:02:31.297

如果您可以使用尾随空格来指示段落继续（默认情况下它仅以空行结束），那么您也可以这样做

```
set fo+=w 
```

. 然后，为了防止 vim 加入行，你只需要用空格以外的东西结束它。

注意：这不会改变运动命令段落的含义（事实上，没有什么可以改变它）。

# c++ - 标准模板库列表 - 双重链接或循环链接？

> ID：10377228
> 
> 赞同：1
> 
> 时间：2012-04-30T00:27:04.350
> 
> 标签：c++, list, stl, iterator

我刚刚注意到关于`std::list`C++ 中的类的一些东西，我觉得很好奇。简而言之，它涉及列表迭代器的工作方式。考虑以下代码：

```
std::list<int> alist;
alist.push_back(0);
alist.push_back(1);
alist.push_back(2); 
```

显然，这会创建一个包含三个整数元素的列表。我可以在列表的开头定义一个迭代器，并使用它来打印第一个元素中包含的值，如下所示：

```
std::list<int>::iterator iter = alist.begin();
std::cout << *iter << std::endl;  // Prints "0" to stdout 
```

我觉得有点奇怪的是，如果我现在*减少*迭代器，它会“循环”并最终指向列表中的最后一个元素：

```
--iter;
std::cout << *iter << std::endl;  // Prints "2" to stdout 
```

对于应该作为双向链表实现的东西，这是合理的行为吗？*如果列表是循环*链接列表，我非常希望迭代器会出现类似的行为，但我觉得这很奇怪。

您过去使用过的这种迭代器行为有什么实际用途吗？我应该留意与此行为相关的任何问题吗？

（顺便说一句，这发生在 gcc 4.7.0 (MinGW) 上。我没有用任何其他版本或编译器测试过它。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T00:29:27.553

递减迭代器超出`begin`调用未定义的行为。您看到的行为很可能是巧合（实际上，请参阅[此处](http://ideone.com/hc7pP)使用不同的编译器会发生什么）。

如果你想确认这一点，你可以简单地看一下 GCC 的实现`list`；您通常可以在`/usr/include/c++/4.x.y/bits/stl_list.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:53:36.587

看着 stl_list.h，我注意到了这个评论：

```
 *
   *  Second, a %list conceptually represented as
   *  @code
   *    A <---> B <---> C <---> D
   *  @endcode
   *  is actually circular; a link exists between A and D.  The %list
   *  class holds (as its only data member) a private list::iterator
   *  pointing to @e D, not to @e A!  To get to the head of the %list,
   *  we start at the tail and move forward by one.  When this member 
```

这是在 4.2.1 gcc 中发现的。这不会改变@Oli 提供的答案，因为它恰好是在 gcc 4.2.1 中实现的答案。我会指望那个功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T00:46:38.253

我认为你得到的“2”是常数 2(in `alist.push_back(2);`)。我认为您的程序非常简短，对吗？

# c# - 如何使用 4 秒的 .wav 文件根据 c# 中的进度条值 [0-250] 范围在其中播放音调

> ID：10377229
> 
> 赞同：0
> 
> 时间：2012-04-30T00:27:11.847
> 
> 标签：c#, audio, wav

我有一个 5 秒的对角线声音的 .wav 文件 [0 秒 - 低音和 4 秒 - 高音]。我想从这个 .wav 文件中提取音调并播放它以提醒用户进行速度控制以及范围 [0 - 250] 值的进度条值。

因此，如果速度值 = 0，则进度条为空，来自 .wav 的音调应为低音调 [0 秒]。如果速度值 = 10，则进度条值为 10，来自 .wav 的音调音高应该稍高 [比如 0.10 秒]。如果速度值 = 20，则进度条值为 20，来自 .wav 的音调应该稍高[比如 0.20 秒]，依此类推，直到速度值 = 250，那么进度条值为 250，来自 .wav 的音调应该最高音高 [比如说 4 秒]

我不熟悉从 .wav 中提取音调的这种媒体提取，并根据进度条值在 c# 中播放它。请指导我完成整个过程。

我尝试使用 .wav 切割器将 .wav 文件转换为字节数组流。但是不理解根据进度条值连续播放它。请帮助我更好的实现逻辑。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:37:30.823

WAV 文件包含 PCM 音频，这意味着每个样本都是该时刻的压力水平测量值。假设您有 5 秒的 1kHz 正弦波，以 44.1kHz（CD 音频的标准采样率）采样，并且您希望将这 5 秒的播放时间延长到 10 秒。如果您只是放慢这些样本以使 WAV 文件持续更长时间，您可以有效地将可听音高降低一个八度，降至 500Hz，同时将采样率减半，降至 22.05kHz。以这个例子为例，想想你的频率扫描 WAV。即使您知道它必须提前播放多长时间，您所做的只是改变扫描的音高和长度。这不是你真正想要做的。

你要求保持音高不变，但改变时间。为此，您必须将 PCM 音频从时域转换为频域。傅立叶变换（在软件中作为 FFT 实现）可以做到这一点。这几乎就是 MP3 的工作方式。基本上，不是通过波峰和波谷来测量波形，而是测量各个频段的电平，然后在很短的时间内播放它们，通常是 8ms 左右。无论如何，这对于您需要做的事情来说可能是一个巨大的麻烦。

我建议您自己简单地生成频率扫描，因为进度条会上升。生成一个简单的正弦波，随着进度条的增加，您生成的正弦波的频率也会增加。简单得多。

# jquery-ui - 在对话框实现中需要一些指导

> ID：10377234
> 
> 赞同：0
> 
> 时间：2012-04-30T00:28:43.767
> 
> 标签：jquery-ui, cakephp, jquery, cakephp-1.3, cakephp-2.0

我有一个 cakephp 视图（index.ctp），其中有编辑按钮。在按钮编辑上，我希望打开 jquery 对话框，其中包含我在 edit.ctp 中的内容。（目前如果我去edit.ctp，它工作正常，但我正在尝试使用模型/对话框，以便用户留在同一页面上）

这就是我在 index.ctp 中的内容

```
 <td>

                <?php echo $this->Html->link($team['Company']['name'], array('action' => 'edit_reload','team_id'=>$team['Team']['id']), array('id'=>"dialog_link", 'class'=>"ui-state-default ui-corner-all"));?>

            </td>

<div id="dialog" title="Dialog Title">

</div> 
```

现在，当单击链接时，我想在此处显示 edit_reload.ctp 内容。我已经筋疲力尽了，所以任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T03:22:47.150

在一个单独的 JS 文件中编写以下代码并将您的值添加到变量中，并将 JS 文件包含在您的 .ctp 文件中。

```
$(document).ready(function() {
    $myWindow = $('#dialog');
    //instantiate the dialog
$myWindow.dialog({ height: 250,
        width: 200,
        modal: true,
        position: 'center',
        autoOpen:false,
        title:'',
        overlay: { opacity: 0.5, background: 'black'}
});
    $J("#dialog_link").click( showDialog );
    });// end (document).ready

  var showDialog = function() {
    var team_id = '';
    var url     = '/controller/action/' + team_id;//Apply path to controller, action
    $.post(url, function(res) {
    $myWindow.dialog({
    title:'Give Title'
});
    $('#dialog').html(res);
    $myWindow.show();
    });
  } 
```

在 .ctp 文件中使用如下链接-

```
echo $this->Html->link($team['Company']['name'],'#', array('id'=>"dialog_link", 'class'=>"ui-state-default ui-corner-all")); 
```

我给你展示了一个例子。你也可以在 .ctp 文件中编写 js 代码。

# objective-c - Google Docs API 使用批处理操作获取 ACL

> ID：10377235
> 
> 赞同：0
> 
> 时间：2012-04-30T00:28:46.607
> 
> 标签：objective-c, gdata-api, google-docs-api, google-drive-api

我正在开发一个 iPhone 应用程序，而不是使用 Google 应用程序 API。

我正在获取 Google Docs 中的所有文档，并希望获取每个文档的 ACL。我可以通过调用来做到这一点：

```
[service fetchFeedWithURL:entry.ACLFeedLink.URL completionHandler:^(GDataServiceTicket *ticket, GDataFeedBase *ACLFeed, NSError *error){            
}]; 
```

但是因为我想拥有每个文档的 ACL，这将需要很多请求。我可以使用批处理操作来代替吗？

我尝试了以下方法：

```
GDataFeedBase *batchFeed = [[GDataFeedBase alloc] init];
NSURL *batchUrl = [[feed batchLink] URL];

GDataBatchOperation *batchOperation = [GDataBatchOperation batchOperationWithType:kGDataBatchOperationQuery];
[batchFeed setBatchOperation:batchOperation];

GDataEntryBase *entryACL = [[GDataEntryBase alloc] init];
[entryACL setIdentifier:[[[[feed entries] objectAtIndex:0] ACLFeedLink] href]];
[batchFeed addEntryWithEntry:entryACL];

[service fetchFeedWithBatchFeed:batchFeed forBatchFeedURL:batchUrl completionHandler:^(GDataServiceTicket *ticket, GDataFeedBase *feed, NSError *error){
}]; 
```

但它不起作用。我只得到实际文件而不是 ACL 提要。

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:51:54.560

ACL 批处理只能针对单个资源上的多个 ACL 执行，因此这对您没有帮助。

一种对获取 ACL 更有用的方法是`expand-acl`在 GET 上使用查询参数，例如：

```
GET https://docs.google.com/feeds/default/private/full/?v=3&expand-acl=true 
```

# javascript - 如何同时启动多个音频标签？

> ID：10377237
> 
> 赞同：2
> 
> 时间：2012-04-30T00:29:17.253
> 
> 标签：javascript, html5-audio

我有一首歌曲的几首曲目，我想一起播放，并且能够将一些曲目静音并播放其他曲目。所以我需要能够同时启动它们。现在，它们都开始有点不同步：

```
// Start playing
for ( i = 0; i < 5; i++ ) {
    tracks[i].audio.play();
} 
```

即使这显然还不足以同时启动它们。

javascript中有什么方法可以保证HTML5音频标签将同时开始播放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:34:25.483

不确定您是否已经这样做了，但这里有一些用于预加载音频的示例代码。

```
var audios = [];
var loading = 0;
AddNote("2C");
AddNote("2E");
AddNote("2G");
AddNote("3C");

function AddNote(name) {
    loading++;
    var audio = document.createElement("audio");
    audio.loop = true;
    audio.addEventListener("canplaythrough", function () {
        loading--;
        if (loading == 0) // All files are preloaded
            StartPlayingAll();
        }, false);
    audio.src = "piano/" + name + ".mp3";
    audios.push(audio);
}

function StartPlayingAll() {
    for (var i = 0; i < audios.length; i++)
        audios[i].play();
    }
} 
```

您可以尝试的另一件事是`audio.currentTime`在每个轨道上设置手动同步音频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:28:35.160

您可以在开始的短暂延迟后使用 setTimeout 同步它们（尽管您可能希望等待所有音频对象加载）。

JSFiddle：http: [//jsfiddle.net/bmAYb/35/](http://jsfiddle.net/bmAYb/35/)

```
var au1 = document.getElementById('au1');
var au2 = document.getElementById('au2');
au1.volume = 1;
au2.volume = 0; //mute
au1.play();
au2.play();
var notfirstRun = false;
//sync for the first time
setTimeout(function() {
    au2.currentTime = au1.currentTime;
    au2.volume = 1;
}, 250); 
```

我最初的想法是使用 setInterval 每 x 毫秒同步一次，但是当你这样做时，如果`volume`设置为`1`（可听），音频就会弹出。

我的小提琴并不完全同步，但非常接近。您可以使其 100% 同步，但您需要将其他轨道上的音频静音或处理爆音。

代码（和小提琴中的音乐）来自[Hungry Media](http://hungry-media.com/2010/09/synchronizing-audio-with-html5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T19:44:20.567

我遇到了同样的问题，并找到了使用[Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)的解决方案。

问题是音频输出有几毫秒的延迟，所以不可能同时启动多个音频。[但是，您可以通过使用ChannelMergerNode](https://developer.mozilla.org/en-US/docs/Web/API/ChannelMergerNode)将音频源合并为一个来解决此问题。通过将[GainNode](https://developer.mozilla.org/en-US/docs/Web/API/GainNode)放在两者之间，您可以分别控制每个音频源的音量。

我为此编写了一个简单的 javascript 类。这是您可以使用它的方式：

```
var audioMerger = new AudioMerger(["file1.ogg", "file2.mp3", "file3.mp3",
                                   "file4.ogg", "file5.mp3"]);
audioMerger.onBuffered(() => audioMerger.play());

// Make sure it's always in sync (delay should be less than 50 ms)
setInterval(() => {
  if (audioMerger.getDelay() >= 0.05) {
    audioMerger.setTime(audioMerger.getTime());
  }
}, 200);

// Set volume of 3rd audio to 50%
audioMerger.setVolume(0.5, 2);

// When you want to turn it off:
audioMerger.pause(); 
```

此代码在我的 PC 上的 Firefox 中将音频之间的延迟减少到不到 10 毫秒。这种延迟是如此之小，你不会注意到它。不幸的是，它不适用于 Internet Explorer 等较旧的浏览器。

这是该课程的代码：

```
class AudioMerger {
  constructor(files) {
    this.files = files;
    this.audios = files.map(file => new Audio(file));

    var AudioContext = window.AudioContext || window.webkitAudioContext;
    var ctx = new AudioContext();
    this.merger = ctx.createChannelMerger(this.audios.length);
    this.merger.connect(ctx.destination);

    this.gains = this.audios.map(audio => {
      var gain = ctx.createGain();
      var source = ctx.createMediaElementSource(audio);
      source.connect(gain);
      gain.connect(this.merger);
      return gain;
    });

    this.buffered = false;

    var load = files.length;
    this.audios.forEach(audio => {
      audio.addEventListener("canplaythrough", () => {
        load--;
        if (load === 0) {
          this.buffered = true;
          if (this.bufferCallback != null) this.bufferCallback();
        }
      });
    });
  }

  onBuffered(callback) {
    if (this.buffered) callback();
    else this.bufferCallback = callback;
  }

  play() {
    this.audios.forEach(audio => audio.play());
  }

  pause() {
    this.audios.forEach(audio => audio.pause());
  }

  getTime() {
    return this.audios[0].currentTime;
  }

  setTime(time) {
    this.audios.forEach(audio => audio.currentTime = time);
  }

  getDelay() {
    var times = [];
    for (var i = 0; i < this.audios.length; i++) {
      times.push(this.audios[i].currentTime);
    }

    var minTime = Math.min.apply(Math, times);
    var maxTime = Math.max.apply(Math, times);
    return maxTime - minTime;
  }

  setVolume(volume, audioID) {
    this.gains[audioID].gain.value = volume;
  }
} 
```

# apache2 - Apache 2.4.2 (win32)，mod_fcgid - 找不到模块文件

> ID：10377238
> 
> 赞同：2
> 
> 时间：2012-04-30T00:29:19.707
> 
> 标签：apache2, mod-fcgid

（最新的 fcgid 模块） 操作系统：Windows Xp prof SP3

我将文件 mod_fcgid.so 放在目录（模块）中

// httpd.conf

```
 LoadModule fcgid_module modules/mod_fcgid.so 
```

但。当我尝试运行 http （从 cmd - 用于测试目的）我得到错误：

```
 httpd: Syntax error on line 515 of C:/Core/Apache24/conf/httpd.conf: Cannot load
    C:/Core/Apache24/modules/mod_fcgid.so into server: Nie mo\xbfna odnale\x9f\xe6
    okre\x9clonego modu\xb3u. 
```

路径正确。那么什么是坏的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:29:52.397

[此链接可能会有所帮助。](http://www.devside.net/guides/config/windows/httpd-conf)这是正确语法的示例：

```
IfDefine FCGI
    LoadModule fcgid_module modules/mod_fcgid.so
IfDefine 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T13:42:57.390

*   请访问[https://www.apachelounge.com/download/](https://www.apachelounge.com/download/)

*   下载名为**mod_fcgid 的zip 文件夹**

*   **将mod_fcgid.so**文件复制并粘贴到您的 apache 模块文件夹中

*   记得加载你的**httd.conf**文件 => ***LoadModule fcgid_module modules/mod_fcgid.so***

# php - 如果某人在移动设备上，我如何使用 php 或 JavaScript 将他们重定向到我的移动网站？

> ID：10377240
> 
> 赞同：0
> 
> 时间：2012-04-30T00:29:58.453
> 
> 标签：php, javascript, html, mobile

我有一个移动网站，但如果用户在移动设备上，我需要一个脚本将用户重定向到该网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:32:02.450

有几种方法可以做到这一点，但检测屏幕尺寸是一种很好的方法。请注意，屏幕宽度与浏览器窗口大小无关。

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
  document.location = "mobile.html";
}
//-->
</script> 
```

您还可以通过[User Agent 字符串](http://www.useragentstring.com/pages/Mobile%20Browserlist/)匹配特定设备，例如 iPhone 或 iPod 。

```
<script language=javascript>
<!--
if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
   location.replace("http://url-to-send-them/iphone.html");
}
-->
</script> 
```

**重要警告**

虽然这可行，但当您尝试访问特定页面时被重定向到移动网站的首页也*很烦人。*例如，当您点击 Facebook 的链接试图访问一篇文章时，如果该网站将您重定向到该网站移动版的首页，这会令人愤怒且非常无益！很有可能，他们永远不会努力去寻找内容。

paulsm4 是正确的，使用 CSS 在相同的 URL 上为您的网站提供移动布局而不是重定向是一种更理想的解决方案。但是，如果这不是一个选项，那么下一个最好的方法是重定向到网站移动版本的匹配 URL。

例如，如果您的移动网站只有一个不同的子域，那么您可以使用 Javascript 重定向到移动版本的正确页面：

```
<script type="text/javascript">
<!--
// Full URL:   http://example.com/articles/1
// Mobile URL: http://mobile.example.com/articles/1
if (screen.width <= 699) {
  // Redirect to the same page on the mobile site
  document.location.host = "mobile." + document.location.host;
}
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:33:56.363

您必须先检测浏览器。这是一个包含有关使用 javascript 进行浏览器检测信息的页面：[http://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp) 如果检测到的浏览器是移动浏览器之一，那么您将它们重定向到另一个页面。这是关于这个主题的一个非常有用的页面：[http](http://www.zytrax.com/tech/web/mobile_ids.html) ://www.zytrax.com/tech/web/mobile_ids.html 还包含用于浏览器检测的 php 代码

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T00:34:47.760

您的第一道防线应该是使用 CSS：

*   [http://www.alistapart.com/articles/return-of-the-mobile-stylesheet](http://www.alistapart.com/articles/return-of-the-mobile-stylesheet)

*   [http://perishablepress.com/the-5-minute-css-mobile-makeover/](http://perishablepress.com/the-5-minute-css-mobile-makeover/)

除此之外，这里有一些可以为您进行重定向的 Javascript：

*   [http://css-tricks.com/snippets/javascript/redirect-mobile-devices/](http://css-tricks.com/snippets/javascript/redirect-mobile-devices/)

    `<script type="text/javascript"> <!-- if (screen.width <= 699) { document.location = "mobile.html"; } //--> </script>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T00:44:22.717

您不必对 JS 执行此操作 -**浏览器实际上将代理字符串发送到 PHP，然后在 HTTP 标头中将任何内容发送回浏览器**。看看`$_SERVER['HTTP_USER_AGENT']`你就会明白我的意思。

CodeIgniter 有一个[用户代理类](http://codeigniter.com/user_guide/libraries/user_agent.html)可以帮助处理这种行为。它的来源在[这里](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/User_agent.php)，它与浏览器代理字符串一起使用的资源文件[在这里](https://github.com/EllisLab/CodeIgniter/blob/develop/application/config/user_agents.php)。

# go - 如何在 Go 中启动不是文件的进程（例如打开网页）

> ID：10377243
> 
> 赞同：9
> 
> 时间：2012-04-30T00:30:20.570
> 
> 标签：go

我想打开一个网络浏览器：

```
c, err := exec.Command("http://localhost:4001").Output()
if err != nil {
    fmt.Printf("ERROR: %v, %v\n",err,c)
} else {
    fmt.Printf("OK:%v\n",c)
} 
```

我得到了错误

```
ERROR: exec: "http://localhost:4001": file does not exist 
```

**编辑**：当你这样做时，我想要实现的与 Windows 和 C# 中的相同：

```
Process.Start("http://localhost:4001") 
```

使用它，您的默认浏览器的新实例将启动并显示 URL

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T08:53:27.447

`"http://localhost:4001/"`是一个 URL，它不能被执行，但是你可以执行一个 Web 浏览器（例如`firefox`）并将 URL 作为第一个参数传递。

在 Windows、OS X 和 Linux 上存在可用于启动默认 Web 浏览器的帮助程序。我想 FreeBSD 和 Android 也有类似的事情，但我不确定。以下代码段应该适用于 Windows、OS X 和大多数 Linux 发行版：

```
var err error
switch runtime.GOOS {
case "linux":
    err = exec.Command("xdg-open", "http://localhost:4001/").Start()
case "windows", "darwin":
    err = exec.Command("open", "http://localhost:4001/").Start()
default:
    err = fmt.Errorf("unsupported platform")
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-20T06:36:31.660

在 Windows 下使用：

```
exec.Command("cmd", "/c", "start", "http://localhost:4001/").Start() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T19:40:59.417

使用

```
exec.Command("open", "http://localhost:4001/").Start() 
```

在上面 tux21b 的回答中，在 Windows 上对我不起作用。然而，这样做：

```
exec.Command(`C:\Windows\System32\rundll32.exe`, "url.dll,FileProtocolHandler", "http://localhost:4001/").Start() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-29T22:08:24.057

[https://github.com/golang/go/blob/33ed35647520f2162c2fed1b0e5f19cec2c65de3/src/cmd/internal/browser/browser.go](https://github.com/golang/go/blob/33ed35647520f2162c2fed1b0e5f19cec2c65de3/src/cmd/internal/browser/browser.go)

```
// Commands returns a list of possible commands to use to open a url.
func Commands() [][]string {
    var cmds [][]string
    if exe := os.Getenv("BROWSER"); exe != "" {
        cmds = append(cmds, []string{exe})
    }
    switch runtime.GOOS {
    case "darwin":
        cmds = append(cmds, []string{"/usr/bin/open"})
    case "windows":
        cmds = append(cmds, []string{"cmd", "/c", "start"})
    default:
        cmds = append(cmds, []string{"xdg-open"})
    }
    cmds = append(cmds, []string{"chrome"}, []string{"google-chrome"}, []string{"firefox"})
    return cmds
}

// Open tries to open url in a browser and reports whether it succeeded.
func Open(url string) bool {
    for _, args := range Commands() {
        cmd := exec.Command(args[0], append(args[1:], url)...)
        if cmd.Start() == nil {
            return true
        }
    }
    return false
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T02:35:52.377

`"http://localhost:4001"`不是一个进程，也不是可执行文件，......它只是一个 URL。

您似乎正在尝试获取 URL。如果是这样，请考虑使用[net/http](http://golang.org/pkg/net/http/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-15T02:48:37.603

对于 Windows，创建如下文件：

```
//go:generate mkwinsyscall -output zweb.go web.go
//sys shellExecute(window int, verb string, file string, arg string, dir string, showCmd int) (err error) = shell32.ShellExecuteW
package main
const sw_shownormal = 1

func main() {
   shellExecute(0, "", "https://stackoverflow.com", "", "", sw_shownormal)
} 
```

然后构建：

```
go mod init web
go generate
go mod tidy
go build 
```

[https://pkg.go.dev/golang.org/x/sys/windows/mkwinsyscall](https://pkg.go.dev/golang.org/x/sys/windows/mkwinsyscall)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-11-23T08:10:33.667

起初，我喜欢@tux21b 提供的答案。但是这段代码有一个微妙的问题：用于选择平台特定代码的条件逻辑将嵌入到目标可执行二进制文件中。这意味着，逻辑将出现在“windows”、“linux”、“darwin”或任何目标平台中。在这个特定示例中，每个平台的代码只有一行。但是想象一下，当每个平台的代码超过 100 行时会发生什么？目标可执行文件将急剧增长。因此，与其为每个可能的平台都包含代码，不如在构建时只包含正确的代码。实际上 Go 支持称为*build tags*的功能，它可以对特定于平台的代码进行更细粒度的控制。

例如，如果文件包含此注释（在包声明之前）：

`// +build linux darwin`

go build 只会在为 Linux 或 Mac OS X 构建时编译它。这意味着目标可执行文件将不包含外星平台的代码。

[open-golang](https://github.com/skratchdot/open-golang)包提供了有问题的功能，但要考虑*构建标签*！

# youtube-api - 如何正确使用 oembed 从 youtube 拉拇指

> ID：10377244
> 
> 赞同：3
> 
> 时间：2012-04-30T00:30:25.047
> 
> 标签：youtube-api, thumbnails, oembed

我在我的主页上显示了很多来自 youtube 视频的大拇指。我正在使用下面的这个函数从一个运行速度很快的 youtube url 中获取拇指，但它不适用于像 youtu.be/JSHDLSKL 这样的缩短形式的 url。

```
function get_youtube_screen_link( $url = '', $type = 'default', $echo = true ) {
if( empty( $url ) )
    return false;

if( !isset( $type ) )
    $type = '';

$url = esc_url( $url );

preg_match("|[\\?&]v=([^&#]*)|",$url,$vid_id);

if( !isset( $vid_id[1] ) )
    return false;

$img_server_num =  'i'. rand(1,4);

switch( $type ) {
    case 'large':
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/0.jpg";
        break;
    case 'first':
        // Thumbnail of the first frame
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/1.jpg";
        break;
    case 'small':
        // Thumbnail of a later frame(i'm not sure how they determine this)
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/2.jpg";
        break;
    case 'default':
    case '':
    default:
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/default.jpg";
        break;
}
if( $echo )
    echo $img_link;
else
    return $img_link;

} 
```

所以我尝试使用 Oembed 来获取拇指，而不是适用于 youtube url 的所有变体，但它会检索 480px/360px 拇指，这会导致大量裁剪以将其缩小到我用来显示它们的 120px/90px 大小。另一个问题是它导致我的页面速度增加了 4 秒，我猜这是我实现它的方式的问题。这是我在循环中调用拇指的方式。

```
<?php 
 require_once(ABSPATH.'wp-includes/class-oembed.php');
 $oembed= new WP_oEmbed;
 $name = get_post_meta($post->ID,'video_code',true);
 $url = $name;
//As noted in the comments below, you can auto-detect the video provider with the following
 $provider = $oembed->discover($name);
//$provider = 'http://www.youtube.com/oembed';
 $video = $oembed->fetch($provider, $url, array('width' => 300, 'height' => 175));
 $thumb = $video->thumbnail_url; if ($thumb) { ?>
   <img src="<?php echo $thumb; ?>" width="120px" height="90px" />
<?php } ?> 
```

那么我应该如何做到这一点以最大限度地提高效率呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T17:05:52.230

I came across this page from youtube explaining their [oembed support](http://apiblog.youtube.com/2009/10/oembed-support.html), They mentioned that they output to json format so I made a function that gets the json data and then enables you to use it.

Feel free to ask if you need more help.

```
<?php

$youtube_url = 'http://youtu.be/oHg5SJYRHA0'; // url to youtube video

function getJson($youtube_url){

    $baseurl = 'http://www.youtube.com/oembed?url='; // youtube oembed base url
    $url = $baseurl . $youtube_url . '&format=json'; // combines the url with format json

    $json = json_decode(file_get_contents($url)); // gets url and decodes the json

    return $json;

}

$json = getJson($youtube_url);

// from this point on you have all your data placed in variables.

$provider_url = $json->{'provider_url'};
$thumbnail_url = $json->{'thumbnail_url'};
$title = $json->{'title'};
$html = $json->{'html'};
$author_name = $json->{'author_name'};
$height = $json->{'height'};
$thumbnail_width = $json->{'thumbnail_width'};
$thumbnail_height = $json->{'thumbnail_height'};
$width = $json->{'width'};
$version = $json->{'version'};
$author_url = $json->{'author_url'};
$provider_name = $json->{'provider_name'};
$type = $json->{'type'};

echo '<img src="'.$thumbnail_url.'" />'; // echo'ing out the thumbnail image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:10:11.190

好的，我从其他一些问题中想出了一个解决方案。首先，我们需要使用此函数从 youtube 具有的任何类型的 url 获取 id。

```
function getVideoId($url)
{
$parsedUrl = parse_url($url);
if ($parsedUrl === false)
    return false;

if (!empty($parsedUrl['query']))
{
    $query = array();
    parse_str($parsedUrl['query'], $query);
    if (!empty($query['v']))
        return $query['v'];
}

if (strtolower($parsedUrl['host']) == 'youtu.be')
    return trim($parsedUrl['path'], '/');

return false;
} 
```

现在我们可以使用 YouTube Data API 从视频 ID 中获取缩略图。看起来像这样。

```
<?php
  $vid_id = getVideoId($video_code);
  $json = json_decode(file_get_contents("http://gdata.youtube.com/feeds/api/videos/$vid_id?v=2&alt=jsonc"));
  echo '<img src="' . $json->data->thumbnail->sqDefault . '" width="176" height="126">'; 
?> 
```

问题是这会导致额外的 2 秒加载时间，所以我只需使用`$vid_id`并将其放置在`http://i3.ytimg.com/vi/<?php echo $vid_id; ?>/default.jpg`其中即可摆脱通过访问 youtube api 添加的 2 秒。

# c# - C# 静态顺序、成员变量、成员枚举

> ID：10377246
> 
> 赞同：0
> 
> 时间：2012-04-30T00:31:00.123
> 
> 标签：c#, class, static, enums, visibility

[MSDN 常见问题解答](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)和[其他](http://www.dotnetperls.com/static-method) [基本](http://csharp.net-tutorials.com/classes/static-members/) [指南](http://www.technical-recipes.com/2011/static-classes-in-csharp/)似乎忽略了四个关于静态变量的快速问题。

1.  是`public static`一样的`static public`吗？

    例如
    `public static class Globals {...}`

    与

    `static public class Globals {...}`

    相同？不同的？

2.  似乎 - 像函数一样 - in 中的变量`public static class`需要`C#`通过类的命名全局实例`public static`在其他类中看到状态。`static`为什么是这样？从幼稚的角度来看，这似乎是不直观的（它似乎`public static class`会提供 的单个`public`实例`class`，其中包含可用的任何公共变量）。显然情况并非如此，所以我想从`C#`专家那里获得一些观点，了解为什么必须在`static` `class`对象中创建成员变量`static`以提供访问权限。

    （**注意：** MSDN[常见问题解答](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)包含一个非成员变量的示例`static` `class`，`static`但没有讨论如果有任何差异有什么`static`拥有的成员`public static class`。）（即，如果双重`static`身份有任何后果怎么办？）

    例如
    `public static class Globals { public static Camera camera1; }//doubly static`

3.  是否存在过适合 a 中的`public` **非`static`**函数的`public static class`情况？我看你是不想暴露一些东西，但是`private`在这种情况下你不就是想把它们弄出来吗？（示例越简单越好，我是自学成才的，`C#`并且仍在尝试理解更复杂的主题，例如[反射](https://stackoverflow.com/questions/1859902/in-3-minutes-what-is-reflection)等）

4.  奇怪的是，通过命名的全局实例，在没有关键字的情况下，a`public enum`内部`public static class`也是可见的。`static`为什么`static`这里没有强制执行典型要求？`public enum`如果我使用可见而不是 a ，我应该担心什么`public static enum`吗？

    `public static class Globals { public enum Dummy { Everything=42}; }`
    `//Enum is visible w/out static!`

提前致谢。并为多个问题道歉，我在是否将其拆分为多个帖子时犹豫不决，但这都与`C#` `static`使用有关，所以我认为一个帖子是最合适的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:37:32.777

1.  根据[方法规范](http://msdn.microsoft.com/en-us/library/aa645760%28v=vs.71%29.aspx)：

> 方法声明可能包括一组属性（第 17 节）和四个访问修饰符（第 10.2.3 节）、新（第 10.2.2 节）、静态（第 10.5.2 节）、虚拟（第 10.5.2 节）的有效组合10.5.3)、override（第 10.5.4 节）、sealed（第 10.5.5 节）、abstract（第 10.5.6 节）和 extern（第 10.5.7 节）修饰符。

顺序无关紧要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:37:42.637

1.  是的，顺序并不重要。
2.  是的，静态类只能包含静态成员（#4 除外），但它们不必是公共的。
3.  是的，您可以拥有公共静态方法，但您的公共静态方法使用的私有静态方法
4.  嵌套类型声明不需要是静态的。

要记住的另一件事是 c# 中的“内部”可见性。在我的代码库中，我发现内部静态类有很多用途（大部分时间用于扩展方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T01:09:34.873

1：顺序无关紧要。为了提高可读性，有一些关于如何排序的标准，但是当编译器读取所有内容时 - 这根本不重要。

我个人认为最好将其写为“公共静态”，而不是“静态公共”。

如果您将 ReSharper 下载到您的 Visual Studio，它会预定义对修饰符的优先级，例如“static”、“public”、“readonly”等......并且会在您不遵循这些标准时建议您更正顺序的修饰符。如果您选择使用不同优先级的修饰符，您可以更改 ReSharper 的设置以适合您的首选顺序。

除此之外 - [ReSharper](http://www.jetbrains.com/resharper/)还创造了许多其他奇迹，强烈推荐。

* * *

2：静态类只能包含静态成员。类中的“静态”意味着该类可以没有实例，并且如您所说，被声明为某种存在。成员的“静态”意味着不同的东西：通常，成员将由实例拥有。然而，静态成员归类所有——在类的所有实例之间共享，并且在没有类的实际实例的情况下使用。

```
public static class Math
{
    public static readonly int ZERO = 0;
} 
```

在这里，您可以看到 ZERO 是静态的，这意味着它属于 Math 类。所以你可以这样做：

```
Math.ZERO 
```

即使 Math 类不是静态的，您仍然可以通过该类本身访问 ZERO 成员。ZERO 将不是 Math 实例的成员，因为它属于类，而不属于实例 - 因此是“静态成员”。

* * *

3: Number2 也回答了这个问题。非静态类意味着它可以拥有它的实例和属于这些实例的成员，但您也可以拥有属于该类本身的类成员（静态）。

例子：

```
public class Quiz
{
    public static readonly int FAIL_GRADE = 45;

    public int Grade;
    public string StudentName;
} 
```

所以每个测验都有一个成绩和一个与之相关的学生，但还有一个属于整个班级“测验”的常数，它表示什么成绩被认为是不及格成绩。

在上述情况下，您也可以简单地执行以下操作：

```
public const int FAIL_GRADE = 45; 
```

因此，从逻辑上讲，您可以了解到“const”的意思是“静态只读”。但在其他情况下，当您不能使用“const”时 - 您将不得不使用“static readonly”。“const”只能出现在基本类型之前，例如“int”、“float”、“bool”等...

这是一个“静态”成员不是只读的示例：

```
public static class Student
{
    public static int TestsTaken = 0;

    public string Name;

    public int DoQuiz(Quiz quiz, Answers answers)
    {
        TestsTaken++;

        // Some answers checking logic and grade returning
    }
} 
```

在上面的示例中，您可以看到 Student 类的静态成员被用作 Student 实例执行某个操作 (DoQuiz) 的次数的计数器。在这里使用它实际上并不是很好的编程，因为 TestsTaken 确实应该在 Quiz 或 School 课堂中使用。但是“静态”用法的示例仍然存在。

* * *

4：静态类中的枚举不需要“static”关键字，事实上你不能在任何地方声明一个静态枚举。枚举不被视为类的成员，而是它的子类型（可以是子类、接口、枚举等）。

在一个类中声明一个 Enum 的事实，仅仅意味着如果一个人想要使用 Enum，他也必须引用这个类。出于逻辑目的、抽象或封装的目的，它通常位于类中（在这种情况下将其声明为“私有”——因此它可以在类内使用，但不能在类外使用）。

例子：

```
public static class Math
{
    private enum SpecialSigns
    {
        Sigma,
        Alpha,
        Pi,
        etc
    }
} 
```

在上面的示例中，SpecialSigns 枚举可以在 Math 类中使用，但对外不可见。

您也可以将其声明为 public，因此当一个人使用 Math 类时，他也可以使用 SpecialSigns 枚举。在这种情况下，您还可以将 SpecialSigns 值作为方法的返回类型或公共成员的类型。当 SpecialSigns 是私有的时，您不能这样做，因为外部代码无法访问它 - 不知道它的存在 - 因此无法将其理解为返回值、成员类型等。

尽管如此，SpecialSigns 枚举不是该类的成员，但仅在其识别范围内定义。

# php - Zend 框架的会话持久性

> ID：10377250
> 
> 赞同：1
> 
> 时间：2012-04-30T00:31:31.563
> 
> 标签：php, zend-framework, session

我在将变量存储在变量中时遇到问题`$_SESSION`。我正在使用 Zend 框架并构建一个 3 步应用程序表单。现在，当第一步完成后，我将数据存储在 MySQL 数据库中，并将返回的插入 ID 存储在会话变量中。然后我将页面转发到另一个控制器（步骤 2）。当我转发请求时，一切正常，我可以从会话变量中读取 id。但是，当我提交第二个表单（它与第 2 步具有相同的控制器作为操作）时，会话丢失了。我尝试`var_dump`它，它返回`NULL`。

这是代码：

```
public function organizationAction()
{

    $this->view->vals="";
    $form=$this->getOrganizationForm();
    $this->aplid=$_SESSION['appid'];
    var_dump($_SESSION);
    $firsttime=$this->getRequest()->getParam('firsttime',0);

    //if(null==$this->aplid) $this->_forward('index','index');
    if ($this->getRequest()->isPost() && $firsttime==0) {
        if (!$form->isValid($_POST)) {
            // Failed validation; redisplay form
            $this->view->form = $form;
            return false;
        }
        var_dump($_SESSION);
        $values = $form->getValues();
        $db=new Util_Database();

        if($db->insertOrganization($values,$this->aplid))
            $this->_forward('final');
        else echo "An error occured while attempting to submit data. Please try agian";

    }

    $this->view->form=$form;
} 
```

这里有什么问题？我尝试将其存储`session_id`在表单中，然后将其设置在之前`session_start()`，但它会启动一个全新的会话。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:43:12.227

我不确定这是否会有所帮助，因为我不确定在第 2 步中是否会发生其他事情。但是这里有。
您可能无意中覆盖了会话数据。这是我想出的可能有助于提供一些想法的方法。

```
public function organizationAction() {

        $this->view->vals = "";
        $form = $this->getOrganizationForm();
        $db = new Util_Database();
        //This will only submit the form if the is post and firsttime == 0
        if ($this->getRequest()->isPost() && $this->getRequest()->getPost('firsttime') == 0) {
            //if form is valid set session and save to db
            if ($form->isValid($this->getRequest()->getPost())) {
                //We only want to initialize the session this time, if we do it
                //on the next pass we may overwrite the information.
                //initialize session namespace
                $session = new Zend_Session_Namespace('application');
                //get values from form, validated and filtered
                $values = $form->getValues();
                //assign form value appid to session namespace
                $session->appid = $form->getValue('appid');
                //assign session variable appid to property aplid
                $this->aplid = $session->appid;
                if ($db->insertOrganization($values, $this->aplid))
                    $this->_forward('final');
                else
                    echo "An error occured while attempting to submit data. Please try agian";
            } else {
                //if form is not vaild populate form for resubmission
                //validation errors will display of form page
                $form->populate($this->getRequest()->getPost());
            }
        }
        //if not post display form
        $this->view->form = $form;
    } 
```

PS如果你要去采埃孚……去采埃孚！:)

# paypal - 将 PayPal Express Checkout 与电子商务网站项目限制一起使用？

> ID：10377252
> 
> 赞同：0
> 
> 时间：2012-04-30T00:31:43.760
> 
> 标签：paypal

我正在将 PayPal Express Checkout 集成到电子商务网站中，我在 API 字段列表中遇到了这个问题-

> L_PAYMENTREQUEST_n_NAMEm L_NAMEn（已弃用）
> 
> 项目名。传递 L_PAYMENTREQUEST_n_ITEMCATEGORYm 时需要此字段。您最多可以指定 10 次付款，其中 n 是 0 到 9 之间的数字，包括 0 和 9，m 指定付款中的列表项；数字商品除外，仅支持单笔支付。这些参数必须从 0 开始按顺序排列（例如 L_PAYMENTREQUEST_n_NAME0、L_PAYMENTREQUEST_n_NAME1）。

这是否意味着结帐时我的购物篮中列出的商品不能超过 10 件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:29:28.143

我会检查是否有另一个选项可以将项目提交到结帐...我之所以这么说是因为它在它的末尾得到了（不推荐使用）..这意味着还有另一个选项可以使用它更流行。L_PAYMENTREQUEST_n_NAMEmL_NAMEn 仍然可用于向后兼容，但通常当某些东西被弃用时，他们已经实现了另一种处理该值的方法。抱歉没有太多帮助，但也许这会为你指明正确的方向。

# mysql - 如何找到与过滤条件中给定的每个值匹配的所有行？

> ID：10377264
> 
> 赞同：0
> 
> 时间：2012-04-30T00:33:03.570
> 
> 标签：mysql, sql

我有`user`和`user_role`桌子。

该`user_role`表有两列：

```
user_id
role_name 
```

我想查找同时具有多个角色的用户，例如“*管理员*”和“*主持人*”。

如何构建此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:58:38.160

以下查询用于`LEFT OUTER JOIN`连接表`user`并`user_role`查找属于管理员和版主的所有用户。然后，它*通过*在`role_name`. 如果添加另一个角色，则 HAVING 子句中使用的值 2 应相应更改。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/16a07/1)

*脚本*：

```
CREATE TABLE user
(
    user_id     INT         NOT NULL
  , user_name   VARCHAR(20) NOT NULL
);

CREATE TABLE user_role
(
    user_id     INT         NOT NULL
  , role_name   VARCHAR(20) NOT NULL
);

INSERT INTO user (user_id, user_name) VALUES
    (1, 'user 1'),
    (2, 'user 2'),
    (3, 'user 3'),
    (4, 'user 4'),
    (5, 'user 5'),
    (6, 'user 6');

INSERT INTO user_role (user_id, role_name) VALUES
    (1, 'admin'),
    (1, 'moderator'),
    (3, 'moderator'),
    (2, 'admin'),
    (5, 'admin'),
    (2, 'moderator'),
    (5, 'admin'),
    (4, 'moderator'),
    (4, 'moderator');

SELECT          u.user_id
            ,   u.user_name
FROM            user        u
LEFT OUTER JOIN user_role   ur
ON              ur.user_id  = u.user_id
WHERE           ur.role_name IN ('admin', 'moderator')
GROUP BY        u.user_id
HAVING          COUNT(DISTINCT ur.role_name) = 2; 
```

*输出*：

```
USER_ID USER_NAME 
------- ---------
   1    user 1
   2    user 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:36:02.687

您需要两个加入，一个用于过滤管理员，另一个用于版主：

```
SELECT user.*
FROM user
INNER JOIN user_role admins
ON admins.user_id = user.id
AND admins.role_name = 'admin'
INNER JOIN user_role mods
ON mods.user_id = user.id
AND mods.role_name = 'moderator' 
```

# android - 只能按一个按钮

> ID：10377270
> 
> 赞同：0
> 
> 时间：2012-04-30T00:33:23.600
> 
> 标签：android, button, options-menu

我使用这段代码来制作一个刽子手应用程序，但是如果我首先选择一种语言，如果我按下三个按钮（nyttSpillKnapp、omSpilletKnapp、avsluttKnapp），我不知道为什么。如果我没有在 OptionMenu 中选择语言，我可以玩游戏。

```
public class HangmanActivity extends Activity implements OnClickListener {
private static final String TAG = "Hangman";
SharedPreferences spraak;
String valgtSpraak = "uk";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    settSpraak("uk");
    setContentView(R.layout.main);
    Button nyttSpillKnapp = (Button) this.findViewById(R.id.nyttSpill);
    nyttSpillKnapp.setOnClickListener(this);

    Button omSpilletKnapp = (Button) this.findViewById(R.id.omSpillet);
    omSpilletKnapp.setOnClickListener(this);
    Button avsluttKnapp = (Button) this.findViewById(R.id.avslutt);
    avsluttKnapp.setOnClickListener(this);
}
public void settSpraak(String spraak) {
    valgtSpraak = spraak;
    Locale locale = new Locale(valgtSpraak);
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main);
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.nyttSpill:
        SavePreferences("", valgtSpraak);
        startActivity(new Intent(this, test.class));
        break;
    case R.id.omSpillet:
        //SavePreferences("", valgtSpraak);
        startActivity(new Intent(this, omSpillet.class));
        break;
    case R.id.avslutt:
        finish();
        break;
        default:
    }
}
public boolean onCreateOptionsMenu(Menu meny) {
    super.onCreateOptionsMenu(meny);
    meny.add(R.string.norsk);
    meny.add(R.string.engelsk);
    return true;
}
public boolean onOptionsItemSelected(MenuItem item){
    SavePreferences("", valgtSpraak);
    if (item.getTitle().equals(getResources().getString(R.string.norsk))){
        settSpraak("no");
    }
    if(item.getTitle().equals(getResources().getString(R.string.engelsk))){
        settSpraak("uk");
    }
    return true;
}
private void SavePreferences(String key, String value) {
    SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    SharedPreferences.Editor prefsEditor;
    prefsEditor = myPrefs.edit();
    prefsEditor.putString(key, value);
    prefsEditor.commit();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:05:37.463

我猜测 settSpraak(...) 方法在尝试设置语言环境时会静默失败。你检查过logcat吗？

我认为您没有正确的语言环境字符串，例如 UK 应该是 en_GB。分别为英国和挪威尝试以下...

```
Locale locale = new Locale("en", "GB");
Locale locale = new Locale("no", "NO"); 
```

请注意语言和国家/地区的大小写敏感。

# c - 16 KB 由 OS X 上的 getc 和 fprintf 分配

> ID：10377271
> 
> 赞同：2
> 
> 时间：2012-04-30T00:33:49.453
> 
> 标签：c, macos, memory-management, stdio

我的应用程序占用内存，但不会泄漏它。在分析过程中，我发现大部分分配的内存来自`getc`并`fprintf`调用谁做`malloc`（16kb）。不知道那些函数是在堆上分配内存的？特别是`fprintf`？我怎样才能释放它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:12:22.567

在关闭流之前，我忘记在流上调用 fflush ......（结果我的设置不允许 fflush 流，因为它们仍然被取消的线程阻塞......）。谢谢你的帮助！

# objective-c - 处理核心数据一对多关系

> ID：10377272
> 
> 赞同：0
> 
> 时间：2012-04-30T00:33:51.347
> 
> 标签：objective-c, ios, core-data, tableview

一段时间以来，我一直在努力解决这个问题，我最后的希望是 Stack Overflow。

这是应用程序的想法。我有两个在核心数据中建模的实体。该`Golfer`实体与 具有一对多的关系`FittingSession`，因此每个高尔夫球手都能够进行一次以上的试穿。由于我是新用户，因此无法发布数据模型的图像。但这里有详细信息：

实体：高尔夫球手的 GOLFER 和 FITTING SESSION 属性 - first_name、last_name、emailId、contactNum、picture 关系：NSSet * FittingSessions

拟合会话的属性 - session_number、日期、位置、注释。关系： Golfer * whoPlayed

我正在开发一个名为 ViewManager 的视图控制器（我所有类的基本视图），它`UIView`里面有 2-3 个 Custom 。每当我需要它们时，我都会为它们设置动画。

我从表格视图中获取我的 Golfers 列表集合，`NSFetchedResultsController`并通过使用`NSFetchedResultsController`. 我的问题是：我如何为特定的高尔夫球手获得特定的试衣时间？我必须在 Parent( Golfer )View 的 TableViewDidSelectRow 方法中写什么？我该如何处理这种一对多的关系？这是我的代码：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        if(tableView == mGolferTblView)
        {
            NSInteger count = [[self.fetchedResultsController sections] count];
            NSLog(@"count section GOLFER TABLE VIEW=%d", count);
            return count; 
        }

        else if(tableView == mFittingTblView)
        {
            return 1;
        }
        else {

        }

        return 0;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        if(tableView == mGolferTblView)
        {
            id<NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
            NSLog(@"count for array ROWS for GOLFERS =%d", [sectionInfo numberOfObjects]);
            return [sectionInfo numberOfObjects];
        }

        else if(tableView == mFittingTblView)
        {

 mFittingSessionArray = [mFittingSessionSet allObjects];

    NSLog(@"array here is=%@", mFittingSessionArray);

    NSLog(@"count for ROWS in FITTING SESSIONS table view=%d", [mFittingSessionArray count]);
    return [mFittingSessionArray count];

    //        id<NSFetchedResultsSectionInfo> sectionInfo = [[self.fittingFetchedResultsController sections] objectAtIndex:section];
    //        NSLog(@"count for array ROWS for FITTING SESSIONS =%d", [sectionInfo numberOfObjects]);
    //        return [sectionInfo numberOfObjects];

        }
        else {

        }

        return 0;

    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if(tableView == mGolferTblView)
        {
            static NSString *CellIdentifier = @"Cell";
            static NSInteger fullNameTag = 1;
            static NSInteger imageTag = 2;

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil)
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

                cell.selectionStyle = UITableViewCellSelectionStyleGray;

                UILabel *fakeLbl =[[UILabel alloc] initWithFrame:CGRectMake(100, 30, 100, 30)];
                fakeLbl.backgroundColor = [UIColor clearColor];
                fakeLbl.textColor = [UIColor grayColor];
                fakeLbl.text=@"3 days ago";
                [cell.contentView addSubview:fakeLbl];
                [fakeLbl release];

                UIImageView *btnImage =[[UIImageView alloc] initWithFrame:CGRectMake(250, 40, 25, 28)];
                btnImage.image = [UIImage imageNamed:@"badge_25x28.png"];
                btnImage.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:btnImage];
                [btnImage release];

                UILabel *fullNameLbl =[[UILabel alloc] initWithFrame:CGRectMake(100, 0, 300, 30)];
                fullNameLbl.backgroundColor = [UIColor clearColor];
                fullNameLbl.textColor = [UIColor whiteColor];
                fullNameLbl.numberOfLines = 1;
                fullNameLbl.adjustsFontSizeToFitWidth = YES;
                fullNameLbl.tag = fullNameTag;
                [cell.contentView addSubview:fullNameLbl];
                [fullNameLbl release];

                UIImageView *imageView =[[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 71, 91)];
                imageView.backgroundColor = [UIColor clearColor];
                imageView.tag = imageTag;
                [cell.contentView addSubview:imageView];
                [imageView release];
            }

            mGolfer = [self.fetchedResultsController objectAtIndexPath:indexPath];

            UILabel * fullNameLbl = (UILabel *) [cell.contentView viewWithTag:fullNameTag];
            fullNameLbl.text =  mGolfer.fullName;

            UIImageView * imgView = (UIImageView *) [cell.contentView viewWithTag:imageTag];
            imgView.image = mGolfer.picture;

            return  cell;
        }

        if(tableView == mFittingTblView)
        {        
            static NSString *CellIdentifier = @"Cell";
            static NSInteger locationTag = 1;
            static NSInteger notesTag = 2;

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil)
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

                cell.selectionStyle = UITableViewCellSelectionStyleGray;

                UIImageView *iconImage =[[UIImageView alloc] initWithFrame:CGRectMake(10, 40, 11, 18)];
                iconImage.image = [UIImage imageNamed:@"icon_locationmarker_11x18.png"];
                iconImage.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:iconImage];
                [iconImage release];

                UILabel *fakeDateLbl =[[UILabel alloc] initWithFrame:CGRectMake(180, 15, 100, 20)];
                fakeDateLbl.backgroundColor = [UIColor clearColor];
                fakeDateLbl.textColor = [UIColor grayColor];
                fakeDateLbl.text=@"apr.30.2012";
                [cell.contentView addSubview:fakeDateLbl];
                [fakeDateLbl release];

                UIImageView *fakeImage1 =[[UIImageView alloc] initWithFrame:CGRectMake(25, 90, 43, 43)];
                fakeImage1.image = [UIImage imageNamed:@"icon_catDriver_43x43.png"];
                fakeImage1.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:fakeImage1];
                [fakeImage1 release];

                UIImageView *fakeImage2 =[[UIImageView alloc] initWithFrame:CGRectMake(70, 90, 43, 43)];
                fakeImage2.image = [UIImage imageNamed:@"icon_catFairway_43x43.png"];
                fakeImage2.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:fakeImage2];
                [fakeImage2 release];

                UIImageView *fakeImage3 =[[UIImageView alloc] initWithFrame:CGRectMake(115, 90, 43, 43)];
                fakeImage3.image = [UIImage imageNamed:@"icon_catHybrid_43x43.png"];
                fakeImage3.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:fakeImage3];
                [fakeImage3 release];

                UIImageView *fakeImage4 =[[UIImageView alloc] initWithFrame:CGRectMake(160, 90, 43, 43)];
                fakeImage4.image = [UIImage imageNamed:@"icon_catIron_43x43.png"];
                fakeImage4.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:fakeImage4];
                [fakeImage4 release];

                UIImageView *fakeImage5 =[[UIImageView alloc] initWithFrame:CGRectMake(205, 90, 43, 43)];
                fakeImage5.image = [UIImage imageNamed:@"icon_catWedge_43x43.png"];
                fakeImage5.contentMode = UIViewContentModeScaleAspectFit;
                [cell.contentView addSubview:fakeImage5];
                [fakeImage5 release];

                UILabel *sessionLbl =[[UILabel alloc] initWithFrame:CGRectMake(10, 7, 150, 30)];
                sessionLbl.backgroundColor = [UIColor clearColor];
                sessionLbl.textColor = [UIColor redColor];
                sessionLbl.text = @"session";
                sessionLbl.font = [UIFont boldSystemFontOfSize:18];
                [cell.contentView addSubview:sessionLbl];
                [sessionLbl release];

                UILabel *locationLbl =[[UILabel alloc] initWithFrame:CGRectMake(30, 32, 270, 30)];
                locationLbl.backgroundColor = [UIColor clearColor];
                locationLbl.textColor = [UIColor whiteColor];
                locationLbl.tag = locationTag;
                [cell.contentView addSubview:locationLbl];
                [locationLbl release];

                UILabel *notesLbl =[[UILabel alloc] initWithFrame:CGRectMake(30, 54, 270, 30)];
                notesLbl.backgroundColor = [UIColor clearColor];
                notesLbl.textColor = [UIColor whiteColor];
                notesLbl.tag = notesTag;
                [cell.contentView addSubview:notesLbl];
                [notesLbl release];

            }

            mFittingSessionArray = [mFittingSessionSet allObjects];

            mFittingSession = [mFittingSessionArray objectAtIndex:indexPath.row];

            UILabel *locationLbl = (UILabel *)[cell.contentView viewWithTag:locationTag];
            locationLbl.text = mFittingSession.locationUppercase;
            NSLog(@"location=%@", mFittingSession.locationUppercase);

            UILabel *notesLbl = (UILabel *)[cell.contentView viewWithTag:notesTag];
            notesLbl.text = mFittingSession.notesInQuotes;

            return  cell;

        }
        return 0;
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {    
        if(tableView == mGolferTblView)
        {

            mGolfer = (Golfer *)[self.fetchedResultsController objectAtIndexPath:indexPath];

            mGolferNameLbl.text = mGolfer.fullName;
            mGolferHeaderPicture.image = mGolfer.picture;

            NSSet * fittingSessionSet = mGolfer.fittingSessions;

            mFittingSessionArray = [fittingSessionSet allObjects];

            NSLog(@"count for sessions=%d", [mFittingSessionArray count]);
            NSLog(@"fiting sessions for golfer %@ are= %@", mGolfer.first_name, mFittingSessionArray);
    }
    } 
```

此外，这也是我为特定高尔夫球手添加新试穿会话的方式：

```
 - (IBAction)addNewSession:(id)sender
    {

        AppDelegate * applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

        NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

        mFittingSession=(FittingSession*) [NSEntityDescription insertNewObjectForEntityForName:@"FittingSession" inManagedObjectContext:context];

        mFittingSession.location=mLocationTextField.text;
        mFittingSession.notes=mNotesTxtView.text;
        **mFittingSession.whoPlayed = self.golfer;** This is setting the relationship (whoPlayed is inverse relation to golfer provided by core data)
} 
```

请帮助我，因为我真的不知道如何处理核心数据中的关系。请提供一些代码或片段，以便我知道发生了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T00:44:20.243

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(tableView == mGolferTblView)
    {
        NSInteger count = [[self.fetchedResultsController sections] count];
        NSLog(@"count section GOLFER TABLE VIEW=%d", count);
        return count; 
    }

    else if(tableView == mFittingTblView)
    {
        NSInteger countOfSections = 1;
        NSLog(@"count section FITTING SESSION VIEW=%d", countOfSections);
        return countOfSections;
    }
    else {

    }

    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(tableView == mGolferTblView)
    {
        id<NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
        NSLog(@"count for ROWS in GOLFERS table view =%d", [sectionInfo numberOfObjects]);
        return [sectionInfo numberOfObjects];
    }

    else if(tableView == mFittingTblView)
    {
        mFittingSessionArray = [mFittingSessionSet allObjects];

        NSLog(@"array here is=%@", mFittingSessionArray);

        NSLog(@"count for ROWS in FITTING SESSIONS table view=%d", [mFittingSessionArray count]);
        return [mFittingSessionArray count];
    }
    else {

    }

    return 0;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(tableView == mGolferTblView)
    {
        static NSString *CellIdentifier = @"Cell";
        static NSInteger fullNameTag = 1;
        static NSInteger imageTag = 2;

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            cell.selectionStyle = UITableViewCellSelectionStyleGray;

            UILabel *fullNameLbl =[[UILabel alloc] initWithFrame:CGRectMake(100, 0, 300, 30)];
            fullNameLbl.backgroundColor = [UIColor clearColor];
            fullNameLbl.textColor = [UIColor whiteColor];
            fullNameLbl.numberOfLines = 1;
            fullNameLbl.adjustsFontSizeToFitWidth = YES;
            fullNameLbl.tag = fullNameTag;
            [cell.contentView addSubview:fullNameLbl];
            [fullNameLbl release];

            UIImageView *imageView =[[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 71, 91)];
            imageView.backgroundColor = [UIColor clearColor];
            imageView.tag = imageTag;
            [cell.contentView addSubview:imageView];
            [imageView release];
        }

        mGolfer = [self.fetchedResultsController objectAtIndexPath:indexPath];

        UILabel * fullNameLbl = (UILabel *) [cell.contentView viewWithTag:fullNameTag];
        fullNameLbl.text =  mGolfer.fullName;

        UIImageView * imgView = (UIImageView *) [cell.contentView viewWithTag:imageTag];
        imgView.image = mGolfer.picture;

        return  cell;
    }

    else if(tableView == mFittingTblView)
    {  
        **mFittingSessionArray = [mFittingSessionSet allObjects];** // Added this line

        static NSString *CellIdentifier = @"Cell";
        static NSInteger locationTag = 1;
        static NSInteger notesTag = 2;

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            cell.selectionStyle = UITableViewCellSelectionStyleGray;

            UILabel *locationLbl =[[UILabel alloc] initWithFrame:CGRectMake(30, 32, 270, 30)];
            locationLbl.backgroundColor = [UIColor clearColor];
            locationLbl.textColor = [UIColor whiteColor];
            locationLbl.tag = locationTag;
            [cell.contentView addSubview:locationLbl];
            [locationLbl release];

            UILabel *notesLbl =[[UILabel alloc] initWithFrame:CGRectMake(30, 54, 270, 30)];
            notesLbl.backgroundColor = [UIColor clearColor];
            notesLbl.textColor = [UIColor whiteColor];
            notesLbl.tag = notesTag;
            [cell.contentView addSubview:notesLbl];
            [notesLbl release];
        }

        mFittingSession = [mFittingSessionArray objectAtIndex:indexPath.row];

        UILabel *locationLbl = (UILabel *)[cell.contentView viewWithTag:locationTag];
        UILabel *notesLbl = (UILabel *)[cell.contentView viewWithTag:notesTag];

        locationLbl.text = mFittingSession.locationUppercase;
        notesLbl.text = mFittingSession.notesInQuotes;

        return  cell;

    }
    else {

    }
    return 0;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if(tableView == mGolferTblView)
    {
        if(self.editing)
        {
            [self.golferTblView deselectRowAtIndexPath:indexPath animated:YES];

            [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseOut

                             animations:^ {

                                 mEditGolfersView.hidden = NO;
                                 mEditGolfersView.frame = CGRectMake(305, mEditGolfersView.frame.origin.y, mEditGolfersView.frame.size.width, mEditGolfersView.frame.size.height);
                             }

                             completion:NULL];

            mGolfer = (Golfer *) [self.fetchedResultsController objectAtIndexPath:indexPath];

            mEditFirstName.text = mGolfer.first_name;
            mEditMiddleName.text = mGolfer.middle_name;
            mEditLastName.text = mGolfer.last_name;
            mEditEmailField.text = mGolfer.email_id;
            mEditContactNum.text = mGolfer.contactNumber;
            mEditPictureView.image = mGolfer.picture;

            mShowDataBtn.enabled = NO;

            return;
        }

        [self.golferTblView deselectRowAtIndexPath:indexPath animated:YES];

        [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseOut

                         animations:^ {

                             mGolfersView.frame = CGRectMake(-260, mGolfersView.frame.origin.y, mGolfersView.frame.size.width, mGolfersView.frame.size.height);
                         }

                         completion:^(BOOL finished){
                             mGolfersView.hidden = YES;
                         }];

        [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseIn

                         animations:^ {

                             mFittingSessionView.hidden = NO;
                             mFittingSessionView.frame = CGRectMake(-19, mFittingSessionView.frame.origin.y, mFittingSessionView.frame.size.width, mFittingSessionView.frame.size.height);
                         }

                         completion:NULL];

        mGolfer = (Golfer *)[self.fetchedResultsController objectAtIndexPath:indexPath];

        mGolferNameLbl.text = mGolfer.fullName;
        mGolferHeaderPicture.image = mGolfer.picture;
        mFittingSessionSet = mGolfer.fittingSessions;

        mFittingSessionArray = [mFittingSessionSet allObjects];

        NSLog(@"count for sessions=%d", [mFittingSessionArray count]);
        NSLog(@"fiting sessions for golfer %@ are= %@", mGolfer.first_name, mFittingSessionArray);

        **[mFittingTblView reloadData];** // Added this and this reloads the data for fitting view.

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:31:19.223

也许我没有正确理解您的问题，但是参加 Golfer's Fitting Session 真的很容易。因此，在第一个代码块中，您只需执行以下操作：

```
mGolfer = (Golfer *)[self.fetchedResultsController objectAtIndexPath:indexPath];
NSSet *fittingSession = mGolfer.fittingSessions; 
```

您可以像访问其他属性一样访问关系。

# r - tm 包错误：定义文档术语矩阵时出错

> ID：10377273
> 
> 赞同：3
> 
> 时间：2012-04-30T00:33:55.600
> 
> 标签：r, text-analysis, tm, reuters

我正在使用“tm”包分析 Reuters 21578 语料库，即 1987 年以来的所有路透社新闻文章。将 XML 文件导入 R 数据文件后，我清理文本——转换为纯文本、转换为小写、删除停用词等（如下所示）——然后我尝试将语料库转换为文档术语矩阵但收到一条错误消息：

UseMethod（“Content”，x）中的错误：没有适用于“内容”的方法应用于“字符”类的对象

在文档术语矩阵之前，所有预处理步骤都可以正常工作。

我创建了语料库的一个非随机子集（包含 4000 个文档），并且文档术语矩阵命令可以正常工作。

我的代码如下。谢谢您的帮助。

```
##Import
file <- "reut-full.xml" 
reuters <- Corpus(ReutersSource(file), readerControl = list(reader = readReut21578XML))

## Convert to Plain Text Documents
reuters <- tm_map(reuters, as.PlainTextDocument)

## Convert to Lower Case
reuters <- tm_map(reuters, tolower)

## Remove Stopwords
reuters <- tm_map(reuters, removeWords, stopwords("english"))

## Remove Punctuations
reuters <- tm_map(reuters, removePunctuation)

## Stemming
reuters <- tm_map(reuters, stemDocument)

## Remove Numbers
reuters <- tm_map(reuters, removeNumbers)

## Eliminating Extra White Spaces
reuters <- tm_map(reuters, stripWhitespace)

## create a term document matrix
dtm <- DocumentTermMatrix(reuters)

Error in UseMethod("Content", x) : 
  no applicable method for 'Content' applied to an object of class "character" 
```

# svn - 公共 Redmine 访问私有/本地颠覆服务器的可能解决方案？

> ID：10377288
> 
> 赞同：1
> 
> 时间：2012-04-30T00:37:30.577
> 
> 标签：svn, repository, redmine

我有一个 Subversion (Apache2 + mod_dav) 服务器在我的专用网络上的 Debian 服务器上运行。我还在 Internet 公开可用的服务器上运行了 Redmine 安装。这无法更改：Subversion 服务器必须保持本地/私有，Redmine 必须保持公开。

我想使用 Redmine 的 SVN 功能（将问题与提交链接），但我找不到 Redmine 访问 SVN 存储库的方法（对于 subversion 服务器没有 NAT/PAT-ing）。

我正在考虑一种*克隆*或*镜像*整个 Subversion（甚至是选择）存储库的方法，但这真的是一个好的解决方案吗？我想链接到 Redmine 的存储库大约需要 800MB，并且 Redmine 服务器上有足够的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:37:42.483

您可以尝试使用[http://pagekite.net/](http://pagekite.net/)将本地服务器直接公开到公共网络。（免责声明：我创建了 PageKite）

如果您深入研究这些选项，则可以通过密码或源 IP 限制访问，因此不一定会带来巨大的安全风险（不确定您是否担心）。如果您决定尝试一下并需要一些指导，请随时向我们发送电子邮件！

**注意：**我假设 Redmine 可以连接到远程存储库，这只是使其可访问的问题。快速谷歌暗示这应该是可能的，但由于我自己还没有做过，所以我不能 100% 确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:31:25.147

我终于设置了一个“提交后”钩子，对存储库进行 rsync。

*/var/svn/myproject/hooks/post-commit*：

```
REPOS="$1"
REV="$2"

#"$REPOS"/hooks/mailer.py commit "$REPOS" $REV "$REPOS"/mailer.conf

if [ $# -ge 1 ]; then
    /var/svn/.hooks/rsync-to-redmine "$REPOS" "$REV"
else
    echo "ERROR: No repository given"
fi 
```

*/var/svn/myproject/hooks/post-commit*：

```
#!/bin/bash

# Configuration
rsyncExecutable="/usr/bin/rsync"

localRepositoryBasePath="/var/svn/"

remoteUser="svnsync"
remoteHost="redmine.mycompany.com"
remoteRepositoryBasePath="/var/svn/"
privateKeyFilePath="/var/svn/.hooks/rsync-to-redmine-certFile"
# /Configuration

repositoryName=`basename "$1"`

if [ -z $repositoryName ]; then # No repository name given
        echo "ERROR: No repository name given"
else
        if [ -d "$localRepositoryBasePath$repositoryName/" ]; then # Given repository name seems to exists
                repositoryDirectoryRealpath=`realpath "$localRepositoryBasePath$repositoryName"`/ # Compute realpath to validate directory (to protect against $1 setted to ".")
                if [ "$repositoryDirectoryRealpath" != "$localRepositoryBasePath" ]; then # Directory is not the base path (otherwise we would rsync the entire $localRepositoryBasePath directory
                        #TODO: Check that $repositoryDirectoryRealpath is under $localRepositoryBasePath
                        $rsyncExecutable -rltgoDvz -e "ssh -i $privateKeyFilePath" "$repositoryDirectoryRealpath" "$remoteUser@$remoteHost:$remoteRepositoryBasePath$repositoryName"
                else
                        echo "ERROR: Trying to rsync the whole '$localRepositoryBasePath' base directory"
                fi
        else
                echo "ERROR: Directory '$localRepositoryBasePath$repositoryName' doesn't exists"
        fi
fi 
```

当有人在 SVN 存储库上提交时，rsync 程序会将 $remoteHost 上的修改推送到 $remoteRepositoryBasePath 目录中。

# html - 如何将 Facebook 和 Twitter 按钮并排放置？

> ID：10377293
> 
> 赞同：0
> 
> 时间：2012-04-30T00:38:43.707
> 
> 标签：html, css, facebook-like, twitter-bootstrap, haml

我已经尝试解决这个问题 5 个小时了，但我所做的似乎没有任何效果。我有一个 Facebook 喜欢按钮和一个 Twitter 关注按钮，我希望它们并排放置，但 Twitter 按钮不断出现在下面的行中。我正在使用 Twitter Boostrap。这是我的haml代码：

```
#social-media-container.container
%ul.social-media-buttons
    %span.span3.offset2
        %li.socialmedia
            %h3 Like us on Facebook
            .facebook-like-button
            %script{:src => "http://connect.facebook.net/en_US/all.js#xfbml=1"} 
            %fb:like{:layout => "button_count", :show_faces => "false", :width => "100"}
%ul.social-media-buttons
    %span.span3.offset6
        %li.socialmedia
            %h3 Follow us on Twitter
            %a.twitter-follow-button{"data-count" => "horizontal", :href => "https://twitter.com/..."}Follow ...
            %script{:src => "http://platform.twitter.com/widgets.js", :type => "text/javascript"} 
```

还有我的 CSS 代码：

```
.social-media-buttons{
float: left;
list-style: none;
margin: 5px 0 20px 0;
padding: 0;
width: 100%; 
```

}

```
ul.social-media-buttons li{
    display: block;
    float: left;
    margin-right: 10px;
}
twitter-follow-button{
    margin-top: 2px;
} 
```

知道如何解决这个问题吗？我还尝试了其他几种显示方式：内联；无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:45:45.870

您的 HAML 代码存在一些错误。对于初学者，您正在创建一个空的`div`. 我假设您希望 div 作为`.social-media-buttons`无序列表的包装器。在这种情况下，您的 HAML 应如下所示：

```
#social-media-container.container
    %ul.social-media-buttons
        %li.socialmedia
            %h3 Like us on Facebook
            .facebook-like-button
            %script{:src => "http://connect.facebook.net/en_US/all.js#xfbml=1"} 
            %fb:like{:layout => "button_count", :show_faces => "false", :width => "100"}
        %li.socialmedia
            %h3 Follow us on Twitter
            %a.twitter-follow-button{"data-count" => "horizontal", :href => "https://twitter.com/..."}Follow ...
            %script{:src => "http://platform.twitter.com/widgets.js", :type => "text/javascript"} 
```

它的作用是为**一个**无序列表创建`div`一个包装器。在您的 HAML 代码中，您有两个无序列表。一个用于 Facebook 点赞，另一个用于 Twitter。我还删除了包装. 对列表项进行换行是无效的 HTML。如果您想为列表项中的内容设置样式，那么我建议您在列表项中添加标题、div 或标签的样式。 **`social-media-buttons``span``li``span`**

 **试试这个代码，看看它是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:53:20.150

除了`span`包装您的列表项（它应该包装列表块）之外，您正在将您的 twitter 按钮偏移出与 facebook 按钮相同的行，因此只需删除该偏移量，两个按钮都应该排好。

Un-Haml'd 演示：http: [//jsfiddle.net/mJ3BV/1/](http://jsfiddle.net/mJ3BV/1/)**

# asp.net - 单击更新面板内的按钮时不显示更新进度？

> ID：10377297
> 
> 赞同：0
> 
> 时间：2012-04-30T00:41:02.997
> 
> 标签：asp.net

我正在使用 jquery 对话框...所以我需要将这一切保存在更新面板中。

我有以下内容：

```
 <asp:UpdatePanel ID="upNewUpdatePanel" UpdateMode="Conditional" ChildrenAsTriggers="true" runat="server">
        <ContentTemplate>
            <div id="search">
             <a href="#" onclick="return false;" class="info">Address type:<span>Select whether you want to search 'From' / 'To' type addresses.  Or select both to search all addresses.</span></a>
                <asp:RadioButtonList ID="rbSearchTypes" runat="server" 
                    RepeatDirection="Horizontal" RepeatLayout="Flow">
                    <asp:ListItem>From</asp:ListItem>
                    <asp:ListItem>To</asp:ListItem>
                    <asp:ListItem Selected="True">Both</asp:ListItem>
                </asp:RadioButtonList>
                 &nbsp;| <a href="#" onclick="return false;" class="info">Address created by:<span>Search for your addresses (addresses you have created) / search for any address in the system.</span></a>
                   <asp:RadioButtonList ID="rbSearchMyAddresses" runat="server" 
                    RepeatDirection="Horizontal" RepeatLayout="Flow">
                    <asp:ListItem Selected="True" Value="0">Anyone</asp:ListItem>
                    <asp:ListItem Value="1">Me</asp:ListItem>
                </asp:RadioButtonList>
                 <br />
                <asp:TextBox ID="txtFindSearch" runat="server" Font-Names="Arial" 
                    ToolTip="Enter a search term (ship to name / address / region, etc)."></asp:TextBox> 
                <asp:Button ID="btnFindSearch" runat="server" Text="Search" 
                    onclick="btnFindSearch_Click" BorderColor="#1367AD" BorderStyle="Solid" />
                <hr />
                <br />
                <asp:Label ID="lblRowsCount" runat="server" Text=""></asp:Label>
            </div>
            <div id="searchresults" style="">
                <asp:RadioButtonList ID="rbSearchResults" CssClass="rbsearch" runat="server" AutoPostBack="True" 
                    CellSpacing="10" RepeatColumns="4" RepeatDirection="Horizontal" 
                    ToolTip="Select an address." 
                    onselectedindexchanged="rbSearchResults_SelectedIndexChanged" Width="100%">
                </asp:RadioButtonList>
            </div>
             <div id="loading" style="width:100%;text-align:center;">
               <asp:UpdateProgress ID="UpdateProgress1" runat="server" Visible="True" DynamicLayout="True">
                        <ProgressTemplate>
                            <img style="border-style:none;" src="images/ajax-loader.gif" alt="loading" />
                        </ProgressTemplate>
               </asp:UpdateProgress>      
             </div>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

当我单击`btnFindSearch`时，我希望在查询我的数据库并提取记录时，我的更新进度条`UpdateProgress1`会显示我的 ajax 加载 gif。它没有:(...所以它给我的用户一种我的应用程序被卡住的印象，而实际上它实际上是在提取数据。在几秒钟内数据加载单选按钮列表...但我希望我的更新进度会出现。这是因为我单击了更新面板内的按钮吗？有什么办法可以让加载更新进度控件出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:22:31.427

我也有同样的问题我对我的代码所做的是，

```
 <asp:UpdateProgress DynamicLayout="false" ID="UpdateProgress1" runat="server">
    <ProgressTemplate>
        <div class="Progress">
            <img alt="loading" src="images/loading1.gif" />
            &nbsp;
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

这是从服务器检索数据时加载图像的代码，类的 css 代码`Progress`是这样的，

```
 .Progress
 {
   background-color:Transparent;
   color:White;
   width:26px;
 }

.Progress img {
   vertical-align:middle;
   margin:2px;
 } 
```

希望这对你有帮助，祝你好运！

# c# - 如何强制线程使用 C# 中的方法组

> ID：10377300
> 
> 赞同：2
> 
> 时间：2012-04-30T00:41:48.603
> 
> 标签：c#, multithreading

问题是：我已经说过每个线程应该按顺序使用的 5 种方法

方法1（）；然后方法2（）；然后 Method3(); 然后 Method4(); 然后 Method5();

我还运行了 5 个线程，编号从 1 到 5

我想实现以下场景：

我希望线程 1 开始使用 method1 然后移动到 method2 [并行我希望线程 2 开始使用现在未使用的 method1]

然后当线程 1 移动到方法 3，线程 2 继续到方法 2 时，线程 3 应该开始使用现在空闲的方法 1，依此类推。

```
public void Execute(object OPCounter)
{
    //Method 1
    lock (thisLock)
    {
    FetchedInstructionQueue[PCounter] = Stager.Stage1(InstructionsMemory);
    }

    //Method 2
    lock (thisLock)
    {
    DecordedInstructionQueue[PCounter] = Stager.Stage2(FetchedInstructionQueue, regMem);
    }

    //Method 3
    lock (thisLock)
    {
    ALUResultQueue[PCounter] = Stager.Stage3(DecordedInstructionQueue);
    }

    lock (thisLock)
    {
    MemoryQueue[PCounter] = Stager.Stage4(DecordedInstructionQueue, memory, ALUResultQueue);
    }

    lock (thisLock)
    {
    object obj = Stager.Stage5(DecordedInstructionQueue, ALUResultQueue, regMem, memory, MemoryQueue);
    InternalWriter(PCounter, obj);
    }

}

///This is the initiator of threads

private void ExecuteBtn_Click(object sender, EventArgs e)
{
    InstructionsMemory = InstructionsTextBox.Text.Split('\n');
    FetchedInstructionQueue = new string[InstructionsMemory.Length];
    DecordedInstructionQueue = new Instruction[InstructionsMemory.Length];
    ALUResultQueue = new int[InstructionsMemory.Length];
    MemoryQueue = new int[InstructionsMemory.Length];
    Thread[] threads = new Thread[InstructionsMemory.Length];

    for (APCounter = 0; APCounter < InstructionsMemory.Length; APCounter = 5 + APCounter)
    {
        if (APCounter + 5 < InstructionsMemory.Length)
        {
            object s1 = APCounter;
            object s2 = APCounter + 1;
            object s3 = APCounter + 2;
            object s4 = APCounter + 3;
            object s5 = APCounter + 4;

            threads[APCounter] = new Thread(new ParameterizedThreadStart(Execute));
            threads[APCounter + 1] = new Thread(new ParameterizedThreadStart(Execute));
            threads[APCounter + 2] = new Thread(new ParameterizedThreadStart(Execute));
            threads[APCounter + 3] = new Thread(new ParameterizedThreadStart(Execute));
            threads[APCounter + 4] = new Thread(new ParameterizedThreadStart(Execute));

            threads[APCounter].Start(s1);
            threads[APCounter + 1].Start(s2);
            threads[APCounter + 2].Start(s3);
            threads[APCounter + 3].Start(s4);
            threads[APCounter + 4].Start(s5);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T03:20:35.393

我将其写为答案，因为所需的说明不适合评论。

您似乎有一系列工作要做（在特定对象上，可能会或可能不会发生变异）。您还有许多线程来执行此管道。管道由 5 个阶段组成。

通常，对于管道，您希望管道中的每个步骤都有一个线程（即，步骤 1 一个线程，步骤 2 一个线程，步骤 3 一个线程，依此类推）。我们称之为选项 A。

您似乎想要设置它，以便线程跟随正在处理的对象。因此，线程 1 通过所有 5 个阶段覆盖对象 1，然后线程 2 覆盖对象 2，依此类推。目前尚不清楚您为什么要这样做，但无论如何让我们运行它。我们称之为选项 B。

为简单起见，我将展示使用 3 个线程和 3 个阶段的选项。

**选项 A：传统管道**

3 个阶段，每个阶段 1 个线程，对象在阶段之间移动。

```
void Main()
{
    var stage1Queue = new BlockingCollection<object>(new ConcurrentQueue<object>());
    var stage2Queue = new BlockingCollection<object>(new ConcurrentQueue<object>());
    var stage3Queue = new BlockingCollection<object>(new ConcurrentQueue<object>());

    var threads = new Thread[] {new Thread(() => Stage1Worker(stage1Queue, stage2Queue)),
                                new Thread(() => Stage2Worker(stage2Queue, stage3Queue)),
                                new Thread(() => Stage3Worker(stage3Queue))
                               };

    foreach (var thread in threads) thread.Start();

    stage1Queue.Add("*");
    stage1Queue.Add("*");
    stage1Queue.Add("*");

    Console.ReadKey();
}

public void Stage1Worker(BlockingCollection<object> queue, BlockingCollection<object> next)
{
    foreach (var task in queue.GetConsumingEnumerable())
    {
        Console.WriteLine(task); // do work here, even mutating task if needed
        next.TryAdd(task.ToString() + "*"); // will always succeed for a ConcurrentQueue
    }
}

public void Stage2Worker(BlockingCollection<object> queue, BlockingCollection<object> next)
{
    foreach (var task in queue.GetConsumingEnumerable())
    {
        Console.WriteLine(task); // do work here, even mutating task if needed
        next.TryAdd(task.ToString() + "*"); // will always succeed for a ConcurrentQueue
    }
}

public void Stage3Worker(BlockingCollection<object> queue)
{
    foreach (var task in queue.GetConsumingEnumerable())
    {
        Console.WriteLine(task); // do work here, even mutating task if needed
        // no more work!
    }
} 
```

**选项 B：同步方法访问管道**

这是一个很奇怪的问题，在不知道“为什么”的情况下很难找到合适的解决方案。下面保证单个任务由单个线程执行，线程等待对每个方法的访问。但是，它不能保证线程 1 执行任务 1，线程 2 执行任务 2 等等。无论哪个线程准备就绪，都会执行“下一个”任务。

```
object stage1Lock = new object();
object stage2Lock = new object();
object stage3Lock = new object();

void Main()
{
    var tasks = new BlockingCollection<object>(new ConcurrentQueue<object>());

    var threads = new Thread[] {new Thread(() => Worker(1, tasks)),
                                new Thread(() => Worker(2, tasks)),
                                new Thread(() => Worker(3, tasks))
                               };

    foreach (var thread in threads) thread.Start();

    tasks.Add("*");
    tasks.Add("**");
    tasks.Add("***");
    tasks.Add("****");
    tasks.Add("*****");

    LINQPad.Util.ReadLine();
}

public void Worker(int id, BlockingCollection<object> tasks)
{
    foreach (var task in tasks.GetConsumingEnumerable())
    {   
        Console.WriteLine(id + " got task: " + task);

        lock (stage1Lock){
            Console.WriteLine(id + " - Stage 1: " + task);
        }

        lock (stage2Lock){
            Console.WriteLine(id + " - Stage 2: " + task);
        }

        lock (stage3Lock){
            Console.WriteLine(id + " - Stage 3: " + task);
        }
    }
} 
```

# java - Spring Security + MVC：关于上下文定义和 bean 范围的问题

> ID：10377301
> 
> 赞同：5
> 
> 时间：2012-04-30T00:41:53.517
> 
> 标签：java, spring, spring-mvc, spring-security

我试图了解在 Spring-MVC 应用程序中定义 Spring Security 的推荐方式，其中 bean 定义被拆分为多个父/子上下文。

例如，我当前的应用程序`web.xml`如下所示，（我认为这是相当标准的）

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    classpath:applicationContext.xml
    /WEB-INF/securityContext.xml
    </param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<servlet>
    <servlet-name>spring-mvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring-mvc</servlet-name>
    <url-pattern>/app/*</url-pattern>
</servlet-mapping> 
```

所以，我在`ContextLoaderListener`定义了一个标准`/`，它加载我的全局配置 -`applicationContext.xml`和`securityContext.xml`. 我还在 处定义了 spring mvc `DispatcherServlet`，`/app/`它从`spring-mvc-servlet.xml`.

据我了解，`spring-mvc-servlet.xml`在任何一个顶级上下文文件中定义的配置中定义的配置都不可见。

那么，定义应用级安全概念的最佳位置在哪里？例如，我想添加以下过滤器。

```
<security:http pattern="/oauth/token" create-session="stateless" entry-point-ref="oauthAuthenticationEntryPoint">
    <security:custom-filter ref="clientCredentialsTokenEndpointFilter" before="BASIC_AUTH_FILTER" />
</security:http> 
```

这是为了让请求`/app/oauth/token`通过这个过滤器，并得到基本的身份验证处理。

因为这与 Spring-MVC 应用程序的关注点直接相关，所以我最初在其中定义了它`spring-mvc-context.xml`（这就是为什么`app`url 被排除在外的原因）。

但是，这意味着它对 中定义的安全配置不可见`securityContext.xml`，因此被忽略。

因此，我将其移至`securityContext.xml`，但这样做时，还必须移动所有依赖项。我很快最终将所有内容移至`applicationContext.xml`，这`spring-mvc-context.xml`几乎是空的。

这很常见吗？顶级上下文中定义的内容和子上下文中定义的内容之间的建议划分是什么？

鉴于 spring-mvc 定义了一系列控制器，我想将其标记为`@Secured`，如果控制器对安全上下文不可见，将如何处理这些控制器？

我需要将我`<mvc:annotation-driven />`的从 the移动`servlet.xml`到 global`applicationContext.xml`吗？我需要额外的配置`spring-mvc-servlet.xml`来告诉它参与 Spring 安全性吗？

我已经阅读了[Spring-MVC 上的文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-servlet)，但是关于如何配置它的细节很少。此外，[Spring OAuth 示例](https://github.com/SpringSource/spring-security-oauth/blob/master/samples/oauth2/sparklr/src/main/webapp/WEB-INF/spring-servlet.xml)似乎在单个配置文件中定义了所有内容，这似乎不是很真实，并且似乎与我读过的其他示例相矛盾。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T07:45:34.180

第一：在 () 中定义的 bean 不能访问在`applicationContext.xml`( `ContextLoaderListener`) 中`spring-mvc-servlet.xml`定义的bean，反之则不行`DispatcherServlet`。

您询问：

* * *

> 鉴于 spring-mvc 定义了一系列控制器，我想将其标记为@Secured，如果控制器对安全上下文不可见，将如何处理这些控制器？

所以这没有问题，因为控制器必须定义在 中`spring-mvc-servlet.xml`，所以他们“看到”定义的 Spring Security 东西`applicationContext.xml`

* * *

> 我需要将我的从 servlet.xml 移动到全局 applicationContext.xml 吗？

不

* * *

> 我是否需要在 spring-mvc-servlet.xml 中进行额外配置来告诉它参与 Spring 安全性？

不

* * *

> ...这使得 spring-mvc-context.xml 几乎是空的。这很常见吗？

`spring-mvc-context.xml`应该包含与 Web Stuff 相关的所有内容（除了 secrutiy）。所以常见的部分`spring-mvc-context.xml`是组件扫描，`@Controller`一些拦截器（`mvc:interceptors`）`mvc:resources`，，，，，，，，...`mvc:default-servlet-handler``mvc:view-controller``ReloadableResourceBundleMessageSource``CookieLocaleResolver``.SimpleMappingExceptionResolver`

*顺便说一句：如果您使用组件扫描，那么您需要其中两个，一个`applicationContext.xml`用于扫描`@Service` `@Repository`和`@Component`（但不是`@Controller`），另一个 `spring-mvc-context.xml`仅用于扫描`@Controller`！*

* * *

@另见这个问题：[ContextLoaderListener or not？](https://stackoverflow.com/questions/9016122/contextloaderlistener-or-not)它从另一个角度讨论主题。

# php - PostgreSQL 数据库 - 内部联接查询错误

> ID：10377302
> 
> 赞同：0
> 
> 时间：2012-04-30T00:42:20.320
> 
> 标签：php, sql, postgresql

在这个社区的帮助下，我能够使用内部联接生成查询，我认为这对我正在尝试做的事情有用。不幸的是，当我尝试运行下面找到的查询时，我收到了以下错误：

错误：多次指定表名“bue”

* * *

根据我在 Google 上阅读的内容，有人说不需要“FROM bue”，但是当我删除它时，我在下面发现了另一个错误：

错误：在字符 98 处或附近的“INNER”处出现语法错误

* * *

非常感谢您协助解决此问题。非常感谢你。

* * *

询问：

```
UPDATE
  bue
SET
  rgn_no = chapterassociation.rgn_no,
  chp_cd = chapterassociation.chp_cd
FROM
  bue
INNER JOIN
  chapterassociation
    ON  bue.work_state = chapterassociation.work_state
    AND bue.bgu_cd = chapterassociation.bgu_cd
WHERE
  bue.mbr_no IS NULL AND bue.chp_cd IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:49:20.047

在 PostgreSQL 中，指定要更新的表只需要在 UPDATE 子句中完成，例如`UPDATE bue`. FROM 子句仅适用于查询中引用的*其他*表。（如果您在 上进行自连接`bue`，您会在 FROM 子句中再次提及它，但您不是在这种情况下。）

您得到的第二个错误可能只是一个简单的语法错误。另一个棘手的问题是 JOIN/ON 语法不适合 FROM 子句，因此您必须将连接条件移至 WHERE 子句。尝试类似：

```
UPDATE
  bue
SET
  rgn_no = chapterassociation.rgn_no,
  chp_cd = chapterassociation.chp_cd
FROM
  chapterassociation
WHERE
  bue.mbr_no IS NULL AND bue.chp_cd IS NULL
  AND bue.work_state = chapterassociation.work_state
  AND bue.bgu_cd = chapterassociation.bgu_cd 
```

请参阅[http://www.postgresql.org/docs/current/interactive/sql-update.html](http://www.postgresql.org/docs/current/interactive/sql-update.html)。

（注意至少我不知道如何将 JOIN/ON 放入 UPDATE 语句中......我可能会遗漏一些东西。）

# ruby-on-rails - Mongodb：db_name 必须是字符串或符号

> ID：10377304
> 
> 赞同：2
> 
> 时间：2012-04-30T00:42:38.567
> 
> 标签：ruby-on-rails, mongodb, mongoid

在我的 Rails 3.0.10 应用程序中，使用 Mongoid 2.2.2，我在生产中遇到了这个错误（在开发中工作正常）：

```
.../gems/mongo-1.3.1/lib/mongo/util/support.rb:50:in `validate_db_name': db_name must be a string or symbol (TypeError) 
```

我已将此添加到我的 environment.rb 中：

```
require 'yaml'
YAML::ENGINE.yamler = 'syck' 
```

另外，我已经`defaults <<`从我的 mongoid.yml 文件中删除了这些行，并将它们替换为默认值。

当我使用 mongoid-2.2.6 时，应用程序启动，但是当我查询 db 时出现相同的错误。

我在看什么？

# 解决了

需要为主机指定 'localhost' 而不是`<%= ENV['MONGOID_HOST'] %>`，还需要指定`database:`名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:52:19.550

需要为主机指定 'localhost' 而不是 <%= ENV['MONGOID_HOST'] %>，并且还指定了数据库：名称。

# java - java spring中的部分托管，部分非托管类

> ID：10377313
> 
> 赞同：2
> 
> 时间：2012-04-30T00:45:04.900
> 
> 标签：java, spring

我在我的代码中创建了许多 MyClass 类的对象。

```
public class MyClass {

    private String a;
    private Integer b;
    private SomeObject c;

    public A(String a, Integer b, SomeObject c) {
        this.a = a; this.b = b; this.c = c;
    }

} 
```

当我创建 MyClass 的对象时，无论如何我可以使用 Spring 将 SomeObject 注入到这个类中。MyClass**不是**弹簧管理的，因为我需要以随机方式在我的代码中创建相同的对象。我如何尝试解决这个问题。

1.  我在我的主要方法中为 SomeObject 做了一个 getBean ，并在我创建它的对象时将它传递给 MyClass 。

2.  我创建了一个 SomeObjectSingleton，它是 ApplicationContextAware（它本身做一个 getBean 来获取 SomeObject）。我在 MyClass 构造函数中直接调用 SomeObjectSingleton.getImpl 。

您认为哪种方式似乎最合适，或者有没有其他更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:40:05.883

**弹簧管理的解决方案**

`MyClass`如果您对Spring 管理没有问题，那么[您可以将`singleton`属性设置为`false`](http://static.springsource.org/spring/docs/1.2.x/reference/beans.html#beans-factory-modes). 这样，每当您调用 时，都会实例化`context.getBean()`一个新的实例。`MyClass`

然后在您的上下文 XML 文件中，您可以`SomeObject`连接`MyClass`并保留其他两个属性 (`String a`和`Integer b`) 未设置。需要注意的是，您必须使用 setter 注入而不是构造函数注入，至少对于未在上下文 XML 文件中设置的属性。

**非弹簧管理解决方案**

如果由于某种原因您不需要`MyClass`受 Spring 管理，那么我推荐您的第一种方法，因为它在`SomeObject`和之间使用`MyClass`比第二种方法更弱的耦合。过度使用单例会导致代码混乱，因为它们本质上是一种隐藏依赖关系的全局变量。有关更详细的论点，请参见[此处。](http://misko.hevery.com/2008/08/17/singletons-are-pathological-liars/)

# excel - Excel VBA 2007 以只读模式保存工作簿

> ID：10377316
> 
> 赞同：0
> 
> 时间：2012-04-30T00:46:13.560
> 
> 标签：excel, vba

假设工作簿是可写的，但以只读方式打开（通过使用开关的只读快捷方式`/r`），并且由于有人将其以只读方式打开，因此它没有被修改。如何让他们在不重新打开的情况下保存 VBA for Excel 2007 中的更改？

我似乎能够在 2003 年做到这一点，但在 2007 年却不行。在 2003 年，这似乎奏效了：

```
ActiveWorkbook.ChangeFileAccess (Excel.XlFileAccess.xlReadWrite)
ActiveWorkbook.Save
ActiveWorkbook.ChangeFileAccess (Excel.XlFileAccess.xlReadOnly) 
```

但2007年不再。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:55:55.943

一些`ActiveWorkbook.SaveAs`临时文件名，然后`Kill`是旧文件，然后使用 将临时文件重命名为旧路径`Name`怎么样？

# android - 您如何处理 LicenseCheckerCallback.ERROR_NOT_MARKET_MANAGED 错误代码？

> ID：10377325
> 
> 赞同：16
> 
> 时间：2012-04-30T00:46:56.100
> 
> 标签：android, google-play, android-lvl

使用`com.android.vending.licensing`您可以检查您的应用程序是否获得许可。有一个回调，`applicationError()`它会告诉您是否有任何问题。今天我遇到了错误`ERROR_NOT_MARKET_MANAGED`，我不知道我应该如何处理它！

这是我所做的：

1.  在 Google Play 上，我将我的电子邮件地址添加为测试帐户。
2.  在 Google Play 上，我使用`versionCode="10"`.
3.  在我的机器上，我更改为`versionCode="11"`.
4.  许可证检查现在失败并出现错误代码`ERROR_NOT_MARKET_MANAGED`。

问题是; 我应该处理这个错误还是这是一个不切实际的场景？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T01:49:33.470

`ERROR_NOT_MARKET_MANAGED`：这个名字真的说明了一切，应用程序不是由 Android Market（现在称为 Google Play）管理的。更具体地说，您的应用程序版本 11 未在 Google Play 中上传或发布。

> 我应该处理这个错误还是这是一个不切实际的场景？

我认为这是一个不切实际的场景。只要您在 Google Play 中上传新的应用版本，您就不需要在代码中做任何特别的事情。ERROR_NOT_MARKET_MANAGED 更像是一个 LVL 开发警告，它帮助开发人员正确实施许可证检查代码，并在项目构建时按照正确的程序测试许可证检查。查看 LVL 示例代码中的注释：

```
private class MyLicenseCheckerCallback implements LicenseCheckerCallback {

    ... ...

    public void applicationError(ApplicationErrorCode errorCode) {
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        // This is a polite way of saying the developer made a mistake
        // while setting up or calling the license checker library.
        // Please examine the error code and fix the error.
        //String result = String.format(getString(R.string.application_error), errorCode);
        //String result = "Error";
        //handleLicensingResult(result);
    }
} 
```

将 LVL 集成到您的应用程序中的全部目的是使用 Google Play 发布您的应用程序，并使用 Google Play 客户端应用程序下载并安装您的应用程序（请参阅开发指南中的[要求和限制](http://developer.android.com/guide/market/licensing/overview.html#Reqs)部分）。如果出现以下情况，我看不到任何可能导致最终用户设备运行时出现此 applicationError 的点：

1.  开发人员按照正确的程序在 Google Play 中上传（用于测试 LVL）或发布（用于实际发布）。
2.  最终用户使用 Google Play 客户端应用程序购买、下载和安装应用程序。

如果最终用户以某种方式从其他渠道（不是通过 Google Play 购买）获得您的应用程序的副本（集成 LVL 并在 Google Play 中上传/发布）并尝试将其安装在他的设备上（其中安装了 Google Play 客户端应用程序） device)，在这种情况下，LicenseCheckerCallback 将转到 dontAllow() 而不是 applicationError(ApplicationErrorCode errorCode)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T18:52:48.973

不要在将应用程序上传到 Google Play 后立即对其进行测试。

在开始测试之前等待一段时间（15-20 分钟或更长时间）。Google play 需要一些时间来识别您的应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T08:15:01.420

7 月 29 日，我发现当我的应用程序处于 Alpha 或 Beta 测试时，我得到的只是错误 3 或 Error_Not_Market_Managed。这实际上是来自服务器的回复。所以这意味着我正在触摸服务器并且代码很好。无论在开发者控制台中设置什么作为回复，这是我得到的唯一回复。

我实际上已经等了 3 天，没有任何变化。所以没有可以接受的等待时间。我什至清除并重置了我的整个手机。我清除了 Google Play 缓存和所有其他魔术。他们都不是原因。

我使用新的 Google 许可证代码更新了我已经发布的应用程序之一，并得到了完全相同的响应。在我更改了版本代码然后将其上传以发布后，大约 4 小时后，该应用程序运行正常，并且 Google 许可证检查以良好的有效代码响应。现在，只要它完全发布，它就会响应我告诉它的任何代码。

所以答案是，在完全发布之前，Google 许可证将无法正常运行。如果您的应用程序处于 Alpha 或 Beta 版并且您收到错误 3，那么您可能很好。只需注释掉许可证检查方法，直到您准备好发布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T03:07:06.667

至于现在，2014 年 5 月，我必须发布测试应用程序（没有上传生产 APK），以便测试上传的 APK 和扩展 OBB 测试版。否则，我总是`ERROR_NOT_MARKET_MANAGED`在测试时得到`APKExpansionPolicy`. 并且发布后2小时（网页上的通知说“最多24小时”），我可以得到扩展文件信息。

除了测试人员之外，没有人可以看到已发布的应用程序 AFAIK。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-06T00:44:03.503

它也可能发生在旧设备中。我正在测试我的应用程序，但没有发布实际版本，它在我的 Galaxy S8 上运行良好，但我在 Galaxy S4 上收到此消息。这意味着说这也可能是谷歌的错误也是一种礼貌的方式。

# java - 如何在 Java 中的任何位置创建目录？

> ID：10377326
> 
> 赞同：1
> 
> 时间：2012-04-30T00:47:27.290
> 
> 标签：java, file, io, directory

如何使用 Java 在硬盘驱动器的任何位置创建目录？例如，我想在计算机的主文件夹中创建一个文件夹。如果我使用此代码：

```
File file = new File("~/test");
if (!file.exists()) {
  try {
    folder.mkdirs();
  } catch(Exception e) {
    JOptionPane.showMessageDialog(null, "There was an error: \n"+e, "Error!", 1);
  }
} 
```

它在我的项目所在的目录中创建一个文件夹名称“~”和一个名为“test”的文件夹。

如何让 Java 在我的主文件夹中创建文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T00:50:23.017

可以通过获取[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)“user.home”来获取用户目录路径

```
System.getProperty("user.home"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T00:49:28.167

`~`由shell（例如Bash）解决，而不是由Java（AFAIK）解决。您将需要使用`/home/xyz/test`.

# rss - 使用 coreylib 从 RSS 提要中选择特定的命名空间内容

> ID：10377328
> 
> 赞同：0
> 
> 时间：2012-04-30T00:48:15.153
> 
> 标签：rss, atom-feed

我正在尝试使用[coreylib](https://github.com/collegeman/coreylib)进行一些 RSS 提要解析。到目前为止，它对于我使用它的性能已经足够好（这还不错，考虑到我能找到的唯一文档是 github 页面上的内容......！）

然而，最近，我在解析[Metro News Toronto RSS 提要](http://metronews.ca/feed/)时遇到了问题。当我尝试解析每个`item`节点以检索其`title`节点中的文本时，我得到的是`media:title`标签中的文本，因为 coreylib 似乎忽略了命名空间。

有什么方法可以从提要中检索我需要的（实际`title`节点！）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:18:05.793

事实证明，coreylib 不支持命名空间的 XML 提要。

我硬着头皮用[SimpleXML](http://php.net/manual/en/book.simplexml.php)重写了我的整个解析器。

# mysql - 表的存储引擎不支持修复。InnoDB 还是 MyISAM？

> ID：10377334
> 
> 赞同：24
> 
> 时间：2012-04-30T00:49:22.380
> 
> 标签：mysql

修复我的数据库后，我收到以下错误：

```
scode_tracker.ap_visits
note     : The storage engine for the table doesn't support repair
scode_tracker.visit_length
note     : The storage engine for the table doesn't support repair 
```

我发现表的类型是 InnoDB。另一张表是MyISAM，修复成功。

在这里阅读了一些主题后，解决方案是将其更改为 MyISAM。我对 InnoDB 和 MyISAM 了解不多。我在创建表时没有指定类型。所以我的问题是我应该使用 MyISAM 而不是 InnoDB 吗？如果是，我怎样才能将它从 InnoDB 更改为 MyISAM？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T01:18:47.500

`MyISAM`首先是你必须了解和`InnoDB`引擎之间的区别。这在此[**链接**](https://web.archive.org/web/20120829150201/https://tapos.wordpress.com/2008/01/10/difference-between-innodb-and-myisam/)上已明确说明。如果*要将 InnoDB 转换为 MyISAM* ，可以使用此 sql 语句：

```
 ALTER TABLE t1 ENGINE=MyISAM; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T11:22:33.833

InnoDB 的工作方式与 MyISAM 略有不同，它们都是可行的选择。你应该使用你认为适合项目的东西。

一些关键点将是：

1.  InnoDB 执行符合 ACID 的事务。[http://en.wikipedia.org/wiki/ACID](http://en.wikipedia.org/wiki/ACID)
2.  InnoDB 做参照完整性（外键关系）[http://www.w3resource.com/sql/joins/joining-tables-through-referential-integrity.php](http://www.w3resource.com/sql/joins/joining-tables-through-referential-integrity.php)
3.  ~~MyIsam 进行全文搜索，InnoDB 没有~~
4.  有人告诉我 InnoDB 在执行写入时速度更快，但在读取时比 MyISAM 慢（我无法备份，也找不到任何分析此问题的文章，但是我确实有一个高度重视告诉我这一点的人），请随意忽略这一点或进行自己的研究。
5.  默认配置不能很好地为 InnoDB 工作，需要相应地调整，运行类似[http://mysqltuner.pl/mysqltuner.pl](http://mysqltuner.pl/mysqltuner.pl)的工具来帮助你。

笔记：

*   在我看来，第二点可能是 InnoDB 比 MyISAM 具有巨大优势。
*   ~~无法使用 InnoDB 进行全文搜索有点痛苦，~~您可以混合使用不同的存储引擎，但这样做时要小心。

注2： - 我正在阅读《高性能MySQL》这本书，作者说“InnoDB 加载数据和创建索引比MyISAM 慢”，这也可能是决定使用什么的一个非常重要的因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T13:20:36.343

您在命令上设置了错误的表。您应该在设置中使用以下内容：

```
ALTER TABLE scode_tracker.ap_visits ENGINE=MyISAM; 
```

# windows - Delphi DllMain DLL_PROCESS_DETACH 在 DLL_PROCESS_ATTACH 之前调用

> ID：10377343
> 
> 赞同：9
> 
> 时间：2012-04-30T00:51:48.287
> 
> 标签：windows, delphi, dll

我在处理用 Delphi 编写的 DLL 时遇到了很多麻烦。我已经使用库中的以下代码设置了 DllMain 函数：

```
begin
  DllProc := DllMain;
end. 
```

我的`DllMain`程序如下所示：

```
procedure DllMain(reason: Integer);
begin
  if reason = DLL_PROCESS_DETACH then
    OutputDebugString('DLL PROCESS DETACH')
  else if reason = DLL_PROCESS_ATTACH then
    OutputDebugString('DLL PROCESS ATTACH')
  else if reason = DLL_THREAD_ATTACH then
    OutputDebugString('DLL THREAD ATTACH')
  else if reason = DLL_THREAD_DETACH then
    OutputDebugString('DLL THREAD DETACH')
  else
    OutputDebugString('DllMain');
end; 
```

我发现 DETACH 似乎在调用 ATTACH 之前被调用者（我无法控制）调用（两次？！）。这甚至可能吗，还是我误解了这应该如何工作？我的期望是每个 ATTACH 调用都会得到一个匹配的 DETACH 调用，但情况似乎并非如此。

这是怎么回事？！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T01:19:05.893

不幸的是，当`begin`在您的 dll 代码中执行时，操作系统已经`DllMain`在您的库中调用。因此，当您的`DllProc := DllMain;`语句执行时，已经为时已晚。当 dll 附加到进程时，Delphi 编译器不允许执行用户代码。建议的解决方法（如果您可以称之为解决方法）是`DllMain`在单元初始化部分或库代码中自己调用您自己的函数：

```
begin
  DllProc := DllMain;
  DllMain(DLL_PROCESS_ATTACH);
end; 
```

相关[文件](http://docwiki.embarcadero.com/VCL/XE/en/System.DLLProc)：

> **注意**：仅当 DLL 的初始化代码调用该过程并将 DLL_PROCESS_ATTACH 指定为参数时，DLL_PROCESS_ATTACH 才会传递给该过程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-05T15:02:02.847

> 我发现 DETACH 似乎在调用 ATTACH 之前被调用者（我无法控制）调用（两次？！）。

根据 Petzold 的“Programming Windows 5th edition”。当应用程序启动和附加应用程序内的新线程启动时
`DLL_PROCESS_ATTACH`被调用。当附加到您的应用程序的应用程序退出时调用。当附加应用程序中的线程退出时调用。
`DLL_THREAD_ATTACH`
`DLL_PROCESS_DETACH`
`DLL_THREAD_DETACH`

请注意，可以`DLL_THREAD_DETACH`在没有对应的较早的情况下调用for `DLL_THREAD_ATTACH`。在应用程序链接到 dll**之前**
启动线程时会发生这种情况。 这主要发生在应用程序手动加载 dll 使用而不是在编译时静态链接时。 **`LoadLibrary`**

# c - C块划分c语言

> ID：10377344
> 
> 赞同：0
> 
> 时间：2012-04-30T00:52:15.400
> 
> 标签：c

我在理解指针方面有一些问题

我有矩阵然后我通过使用将它分成小块

```
 tiles_num = n /tile;
// Allocate blocked matrix
Ah = (REAL **) malloc( tiles_num *  tiles_num * sizeof(REAL *));
if (Ah == NULL) {
    printf("ALLOCATION ERROR (Ah)\n");
    exit(-1);
}

for (j = 0; j <  tiles_num *  tiles_num; j++) {
    Ah[j]=(REAL *) malloc(tile * tile * sizeof(REAL));
    if (Ah[ j ] == NULL) {
        printf("ALLOCATION ERROR (Ah[%d] )\n", j);
        exit(-1);
    }
} 
```

其中（tiles_num是小块的数量，n是矩阵的一维大小，tile是小块的大小）

之后我想给一个函数一个指向超级块开始的指针，然后函数将在小块之间移动，例如如果我有 N=12 和超级块=4 和小块=2。1-那么我怎样才能给出启动超级块的功能点，然后通过小块向内移动？

2-我想知道 A[k] 是否与 A+k 相同以引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:31:38.160

如果我正确理解了这个问题，您可以将 Ah 传递给您的函数，因为 Ah 是指向小块列表的指针。这是否回答你的问题？

关于第二个问题，A[k] 是地址 A+k 的值。所以 A[k] 实际上等价于 *(A+k)，或者相反，&(A[k]) 等价于 A+k。

# git - git，如何覆盖提交

> ID：10377348
> 
> 赞同：6
> 
> 时间：2012-04-30T00:53:03.120
> 
> 标签：git

我搞砸了我的应用程序，最后做了一个

```
git checkout <commit number> 
```

回到我想去的地方。

当我做一个 git status 时，它说

```
 Your branch is behind 'origin/master' by 5 commits, and can be fast-forwarded. 
```

我想我在最近提交的第 5 天。有没有办法让我最近提交的第 5 次提交成为我最近提交的第 5 次？几乎要覆盖或丢弃我前四次提交中的所有内容？

更新。

我做了一个

```
git reset --hard <commit number> 
```

但是我怎样才能推送到我的存储库？它说...

```
To prevent you from losing history, non-fast-forward updates were rejected 
```

我不想执行合并，我非常想清除我最近的 4 次提交

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:18:31.713

您始终可以使用以下`-f`选项强制推送：

```
git push -f origin master 
```

但当然要小心，因为这*会*破坏历史。

还要确保同时指定远程和分支名称，因为没有它，默认情况下 git 将尝试强制将*所有*分支推送到给定（或上游）远程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:55:22.903

```
git checkout ORIG_HEAD 
```

应该让您回到最近一次结帐后的位置。

如果这没有帮助，您也可以查看`git reflog`. 它会显示你最近的 rebase、checkout 等的列表，你可以找到你想要返回的提交的 SHA。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T00:57:52.027

```
git reset --hard <commit number> 
```

# c++ - 使用 boost::multi_index_container

> ID：10377357
> 
> 赞同：2
> 
> 时间：2012-04-30T00:54:52.657
> 
> 标签：c++, boost

我一直在尝试用它`boost::multi_index_container`来解决我遇到的问题。但是，`multi_index_container`即使声明也无法编译。错误在 MPL 函数中很深，我不知道故障在哪里。

```
boost::multi_index_container<
    NodeType,
    boost::multi_index::indexed_by<
        boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>, decltype(node_comparator)>,
        boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>
    >
> open_set(
    boost::make_tuple(node_comparator)
); 
```

在这种情况下，`node_comparator`是一个 lambda，并且`NodeType`它本身已经有一个`std::hash`特化。这是错误的文本：

```
1>d:\backups\code\boost_1_47_0\boost\multi_index\detail\node_type.hpp(56): error C2903: 'node_class' : symbol is neither a class template nor a function template
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply_wrap.hpp(49) : see reference to class template instantiation 'boost::multi_index::detail::index_node_applier::apply<IndexSpecifierIterator,Super>' being compiled
1>          with
1>          [
1>              IndexSpecifierIterator=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              Super=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\bind.hpp(207) : see reference to class template instantiation 'boost::mpl::apply_wrap2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::multi_index::detail::index_node_applier,
1>              T1=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              T2=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply_wrap.hpp(49) : see reference to class template instantiation 'boost::mpl::bind2<F,T1,T2>::apply<U1,U2>' being compiled
1>          with
1>          [
1>              F=boost::multi_index::detail::index_node_applier,
1>              T1=boost::mpl::_2,
1>              T2=boost::mpl::_1,
1>              U1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              U2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply.hpp(63) : see reference to class template instantiation 'boost::mpl::apply_wrap2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              T1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              T2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\reverse_iter_fold_impl.hpp(82) : see reference to class template instantiation 'boost::mpl::apply2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              T1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              T2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\reverse_iter_fold.hpp(43) : see reference to class template instantiation 'boost::mpl::aux::reverse_iter_fold_impl<N,First,Last,State,BackwardOp,ForwardOp>' being compiled
1>          with
1>          [
1>              N=2,
1>              First=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              Last=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,2>,
1>              State=boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>,
1>              BackwardOp=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              ForwardOp=boost::mpl::protect<boost::mpl::arg<1>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\multi_index\detail\node_type.hpp(70) : see reference to class template instantiation 'boost::mpl::reverse_iter_fold<Sequence,State,BackwardOp>' being compiled
1>          with
1>          [
1>              Sequence=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,
1>              State=boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>,
1>              BackwardOp=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\multi_index_container.hpp(75) : see reference to class template instantiation 'boost::multi_index::detail::multi_index_node_type<Value,IndexSpecifierList,Allocator>' being compiled
1>          with
1>          [
1>              Value=NodeType,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,
1>              Allocator=std::allocator<NodeType>
1>          ]
1>          c:\repo\render\render\sim\simcontext.cpp(264) : see reference to class template instantiation 'boost::multi_index::multi_index_container<Value,IndexSpecifierList>' being compiled
1>          with
1>          [
1>              Value=NodeType,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>
1>          ] 
```

关于原因有什么建议吗？

编辑：几乎没有上下文。但是，对于那些离不开 SSCCE 的人来说，这里有一个 SSCCE：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/hashed_index.hpp>

struct NodeType {
    int x, y, z;
    float g_score;
    NodeType(int ax, int ay, int az) {
        x = ax;
        y = ay;
        z = az;        
    }
    NodeType() {}
    bool operator==(const NodeType& other) const {
        return x == other.x && y == other.y && z == other.z;
    }
};

template<> struct std::hash<NodeType> : public std::unary_function<const NodeType&, std::size_t> {
    std::size_t operator()(const NodeType& node) const {
        return std::hash<int>()(node.x * 100000 + node.y * 1000 + node.z);
    }
};
template<> struct boost::hash<NodeType> : public std::unary_function<const NodeType&, std::size_t> {
    std::size_t operator()(const NodeType& node) const {
        return std::hash<int>()(node.x * 100000 + node.y * 1000 + node.z);
    }
};

int main() {
    auto h = [&](NodeType x) {
        return 5.0f; // details irrelevant
    };    
    auto node_comparator = [&](NodeType lhs, NodeType rhs) {
        return lhs.g_score + h(lhs) < rhs.g_score + h(rhs);
    };
    boost::multi_index_container<
        NodeType,
        boost::multi_index::indexed_by<
            boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>, decltype(node_comparator)>,
            boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>
        >
    > open_set(
        boost::make_tuple(node_comparator)
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:53:55.293

在您的 SSCCE 帖子之后：也许您忘记添加以下内容？

```
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/identity.hpp> 
```

除此之外，我无法在此处编译您的代码，因为我的环境是 C++11 之前的版本，但我确实设法使其工作，添加缺少的包含并用常规命名函数替换 lambdas。请注意，我必须更改构造参数，`open_set`如另一个答案中所述：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/identity.hpp>

struct NodeType {
    int x, y, z;
    float g_score;
    NodeType(int ax, int ay, int az) {
        x = ax;
        y = ay;
        z = az;        
    }
    NodeType() {}
    bool operator==(const NodeType& other) const {
        return x == other.x && y == other.y && z == other.z;
    }
};

template<> struct boost::hash<NodeType> : public std::unary_function<const NodeType&,     std::size_t> {
    std::size_t operator()(const NodeType& node) const {
        return boost::hash<int>()(node.x * 100000 + node.y * 1000 + node.z);
    }
};

double h(NodeType x) {
    return 5.0f;
}

bool node_comparator(NodeType lhs, NodeType rhs) {
    return lhs.g_score + h(lhs) < rhs.g_score + h(rhs);
}

int main() {
    typedef boost::multi_index_container<
        NodeType,
        boost::multi_index::indexed_by<
            boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>, bool (*)(NodeType,NodeType)>,
            boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>
        >
    > open_set_t;

    open_set_t open_set(
        boost::make_tuple(
            boost::make_tuple(
                boost::multi_index::identity<NodeType>(),
                &node_comparator
            ),
            open_set_t::nth_index<1>::type::ctor_args()
        )
    );
} 
```

附加说明：您的 lambda 函数`NodeType`按值取 s，我想如果他们接受他们的参数作为 s，他们会更有效率`const NodeType&`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:35:25.050

尝试在如此少的上下文中猜测问题是什么，这会是一种有趣的消遣，但会降低你得到有用答案的机会。理想情况下，您应该提供一个完整的测试用例（即一个简短的可编译程序）来显示该问题。无论如何，在黑暗中开枪：你说它`NodeType`有一个专门的`std::hash`专业，但 Boost.MultiIndex 使用`boost::hash`它作为它的默认哈希生成器。试试看那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:56:51.560

黑暗中的另一个镜头（我认为就是这样）：由于`decltype(node_comparator)`不是默认可构造的，因此您必须在构造`node_comparator`期间提供初始化值（本身）`open_set`。这似乎是你想要做的，但不正确：正确的方法如下（模潜在的错别字，更多细节[在这里](http://www.boost.org/libs/multi_index/doc/tutorial/creation.html#ctor_args_list)）：

```
typedef boost::multi_index_container<
  NodeType,
  ...
> open_set_t;

open_set_t open_set(
  boost::make_tuple(
    boost::make_tuple(
      boost::multi_index::identity<NodeType>(),
      node_comparator
    ),
    open_set_t::nth_index<1>::type::ctor_args()
  )
); 
```

考虑到这里使用 lambda 表达式所带来的冗长，我认为你最好编写一个使用定义的、默认可构造的比较器类而不是`node_comparator`.

# javascript - 正则表达式匹配不在字符串或正则表达式文字中的 JS 源

> ID：10377359
> 
> 赞同：1
> 
> 时间：2012-04-30T00:55:36.727
> 
> 标签：javascript, regex, macros, lexer

是否存在全面的正则表达式，当应用于 JavaScript 源代码时，将匹配所有有效的字符串文字（例如`"say \"Hello\""`）和正则表达式文字（例如`/and\/or/`）？表达式必须涵盖所有边缘情况，包括换行符和转义序列。

或者，是否有人知道用于匹配字符串和正则表达式文字*之外的模式的正则表达式？*

我的目标是实现一个简单的 JavaScript 语法扩展，它允许分隔符（例如`{{@foo.bar}}`或`#@foo.bar#`）中的宏被预处理器扩展。但是，我希望只在文字*之外处理宏。*

目前，我尝试仅使用字符串替换来完成此操作，而无需扩充现有的 JavaScript 词法分析器/解析器。

这个 JavaScript 预处理器本身将在 JavaScript 中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:15:56.190

这是我一直用来匹配带引号的字符串的正则表达式，它非常好，因为它几乎可以与所有引擎一起使用，因为它不需要回溯或反向引用或任何巫术。这将匹配所有文本 INSIDE 文字。

```
"(\\.|[^"])*" 
```

根据引擎，它可能支持非捕获组。在这种情况下，您可以使用

```
"(?:\\.|[^"])*" 
```

它应该更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:51:21.570

我可能会去做如下的事情。但是，对于某些可能的情况，它需要改进。

```
var str = '"aaa \"sss \\t bbb" sss #3 ss# ((t sdsds)) ff ';
str += '/gg sdfd \/dsds/ {aaa bbb} {{ss}} {#sdsd#}';

var repeating = ['"','\\\'','/','\\~','\\#'];
// "example" 'example' /example/ ~example~ #example#
var enclosing = [];
enclosing.push(['\\{','\\}']);
enclosing.push(['\\{\\{','\\}\\}']);
enclosing.push(['\\[','\\]']);
enclosing.push(['\\(\\(','\\)\\)']);
// {example} {{example}} [example] ((example))

for (var forEnclosing='',i = 0 ; i < enclosing.length; i++) {
    var e = enclosing[i];
    var r = e[0]+'(\\\\['+e[0]+e[1]+']|[^'+e[0]+e[1]+'])*'+e[1];
    forEnclosing += r + (i < enclosing.length-1 ? '|' : '');
}
for (var forRepeating='',i = 0; i < repeating.length; i++) {
    var e = repeating[i];
    var r = e+'(\\'+e+'|[^'+e+'])*'+e;
    forRepeating += r + (i < repeating.length-1 ? '|' : '');
}

var rx = new RegExp('('+forEnclosing+'|'+forRepeating+')','g');
var m = str.match(rx);
try { for (var i = 0; i < m.length; i++) console.log(m[i]) }
catch(e) {} 
```

输出：

```
"aaa "sss \t bbb"
#3 ss#
((t sdsds))
/gg sdfd /dsds/
{aaa bbb}
{{ss}}
{#sdsd#} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:51:17.047

与正则表达式最接近的是有一个正则表达式匹配字符串文字（单引号或双引号）或正则表达式或注释（或任何其他可能包含虚假匹配的内容）或您的宏事物之一：

```
"[^"\\]*(?:\\.[^"\\]*)*"
|
'[^'\\]*(?:\\.[^'\\]*)*'
|
/[^/\\]*(?:\\.[^/\\]*)*/[gim]*
|
/\*[^*]*(?:\*(?!/)[^*]*)*\*/
|
#@(\w+\.\w+)# 
```

如果第 1 组在比赛后包含任何内容，那么它一定是您要查找的内容。否则，忽略这场比赛并继续下一场比赛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T08:23:58.620

我认为这对于正则表达式来说太多了。

考虑`var foo = "//" // /"(?:\\.|[^"])*"/`。字符串、注释和正则表达式文字在哪里开始和结束？您需要编写一个完整的 JavaScript 解析器来涵盖所有边缘情况。当然，解析器将使用正则表达式......

# c - 获取位域的值

> ID：10377360
> 
> 赞同：1
> 
> 时间：2012-04-30T00:55:54.053
> 
> 标签：c, bit-fields

```
unsigned value( unsigned n, unsigned low, unsigned high ){
    if( !(low <= high && high <= 32) )  exit(EXIT_FAILURE);
    if( low == 0 && high == 32 )
        return n;
    else
        return n >> low & (1U << (high-low)) - 1;
} 
```

想象一下，我们有以下 n=11100011、low=2 和 high=7。

当我们到达退货声明时，我已经有了这个

00111000 & (00100000 - 00000001)

这将是

00111000 & 00011111

这将等于

00011000

但这不对吧？那是 24 而我想要 00111000 是 56

我在这里做错了什么？我在哪里搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:59:15.357

在减去 1 之前，您需要再左移一个位置。这会将`1`位串再向左扩展一个位置，即该`high`位所在的位置。

```
return (n >> low) & ((1U << (high-low+1)) - 1); 
```

想象一下极端情况， where`low = 0`和`high = 32`。忽略溢出，它是 的大小的伪影`long`，并进行计算：

```
(n >> 0) & ((1U << 33) - 1) 
```

左边的项是`n`，右边的项是一个 32`1`位的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:15:14.697

看起来像一个错误：

```
n >> low = 11100011 >> 2 = 111000 = 56 
```

然后为了屏蔽高位，你用一个 ANDing `high-low`：

```
111000 & (1 << 5)-1 
```

但是`(1 << 5)-1 = 11111`，但是您确实想要`111111`（否则您将与前导位相与，有效地从值中减去 32）。因此，请使用：

```
return n >> low & (1U << (high - low + 1)) - 1; 
```

# objective-c - 是否可以重新启动 ipad 应用程序？

> ID：10377364
> 
> 赞同：0
> 
> 时间：2012-04-30T00:56:39.357
> 
> 标签：objective-c, performance, ipad, memory, webview

我有一个主要与 uiwebview 一起使用的应用程序，因为我们有很多基于网站的工作，所以直接在 webview 上显示它而不需要重新编码会更快。webview的问题，它在内存上非常昂贵。UI 在从应用程序开始到应用程序结束并重复该过程的 10 次中运行良好。另一方面，当使用 Canvas 对象做一些 javascript 动画时，webview 开始变慢。当收到警告时，我已经输入了一些代码来删除 NSUrlCache。

我们的应用程序基于在堆叠页面中导航。当它结束时，用户基本上会回到开始。在我看来，当我知道应用程序开始运行缓慢时，我想重新启动应用程序。我知道这样做不是一个好主意，但我不知道回收内存的最佳方法是什么。我查看了我所有的代码并发布了我必须发布的内容。应用程序运行良好，没有问题，但只是 uiwebview 导致了性能。

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:14:36.077

简短的回答：不可能。您必须找到一种不同的方法来解决您的性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:00:24.437

如果 UIWebView 成为应用程序的瓶颈，那么解决方案是不使用 UIWebView。您不能简单地“重新启动”或“重置”您的应用程序。如果在使用您的应用程序时性能随着时间的推移而下降，那么这表明您可能没有正确管理内存或对象分配。您可以使用 Leaks 工具来调试您的应用程序并尝试寻找内存泄漏，您可以使用 Allocations 工具来分析您的对象分配。

# java - 早期绑定晚期绑定与运行时和编译时相同吗？

> ID：10377365
> 
> 赞同：0
> 
> 时间：2012-04-30T00:56:47.627
> 
> 标签：java

当我们在函数内创建对象时，该对象是在运行时创建的吗？

发生了什么事？创建？在编译时和运行时？

早期绑定和后期绑定是否也意味着编译时间和运行时？什么是动态链接静态链接？当我听到静态时认为编译时间是否正确？该死的我这么糊涂？

对不起，我知道我的英语不好，也请让你的答案和例子尽可能对初学者友好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:11:01.267

早期装订就像从冰箱里取出西红柿，然后在开始煮汤之前把它们放在桌子上。

后期装订是开始煮汤，当你需要西红柿时，你就去冰箱里拿。

煮汤是运行时间。

准备好刀、勺子和平底锅是编译时间。（它不涉及西红柿。）

* * *

好的，这是一个伪代码解释：

**后期绑定：**

```
... get : 
if (myvar is null) myvar = new object;
return myvar 
```

**早期绑定**

```
myvar = new object;
... get :
return myvar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:29:15.680

Java 中没有任何东西是静态**链接**的，但它是静态**绑定的**。“静态”是指编译器识别要调用的函数的确切描述：类名、方法名、参数类型。它不会确定它在内存中的地址。这就是静态绑定和静态链接之间的区别，这意味着在编译时仍然不知道调用静态方法时将执行什么代码。这取决于 JVM 在运行时加载的 .class 文件中的内容。Java 静态绑定所有对`static`方法的调用——因此是关键字。它还将静态绑定应用于`private`方法，因为它们不能被覆盖。类似的论点适用于`final`方法。

动态绑定意味着编译器决定一切，就像在静态情况下一样，**除了**包含该方法的类。确切的类是在调用方法之前的最后一刻确定的，相对于正在调用该方法的对象。`Object.equals`就是这样一个动态绑定的方法。这意味着**同一**行代码每次执行时都可以调用**不同的方法。**

早期绑定 == 静态绑定；后期绑定 == 动态绑定。这些是同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T02:30:27.350

> 当我们在函数内创建对象时，该对象是在运行时创建的吗？
> 
> 发生了什么事？创建？在编译时和运行时？

这取决于您所说的“对象”是什么意思。如果您的意思是类实例，那么是的，它将在运行时在堆栈或堆上创建。[静态分配](http://en.wikipedia.org/wiki/Static_variable)的对象，如明确声明为静态的字符串或类型，将在编译时在[数据段](http://en.wikipedia.org/wiki/Data_segment)中创建。静态变量在程序的整个生命周期中都存在。

> 早期绑定和后期绑定是否也意味着编译时间和运行时？

来自[维基百科](http://en.wikipedia.org/wiki/Early_binding)：

> 通过早期绑定，编译器静态验证是否存在一个或多个具有适当方法名称和签名的方法。这通常作为虚拟方法表（“v-table”）中的偏移量存储在已编译的程序中，并且非常有效。使用后期绑定，编译器没有足够的信息来验证该方法是否存在，更不用说绑定到 v-table 上的特定槽了。而是在运行时按名称查找该方法。

简而言之，在早期绑定中，编译器在符号表中查找方法及其偏移量，因此信息必须可用，而在后期绑定中则无法完成，运行时必须查找它。请注意，后期绑定与动态分派非常不同，尽管它们经常被用作同义词，因为后者指的是使用分派表或“vtable”来存储指向方法实现的指针，这可能会被覆盖。

> 什么是动态链接静态链接？

基本上，这是在最终可执行文件（静态）中包含引用文件或“库”与在运行时将它们放入程序映像之间的区别。显然，前者给可执行文件增加了不必要的大小，但是（1）你永远不必担心依赖问题和（2）程序启动效率更高。另一方面，动态链接 (1) 节省空间和 (2) 允许库更新发生在一个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T08:42:45.640

早期绑定是将值分配给设计时，而后期绑定是将值分配给运行时
。运行时和设计时之间只有区别，它必须显示分配的值。
例如：

```
//early binding 
myvar =new myvar();
// get
retutn myvar 
```

# javascript - jquery 使用对象作为过滤器

> ID：10377367
> 
> 赞同：14
> 
> 时间：2012-04-30T00:57:38.320
> 
> 标签：javascript, jquery

有什么方法可以通过对象选择 DOM 元素？

例如，我希望能够将对象与 DOM 元素相关联，如下所示：

```
var obj = { a: 1, b:2 };
$('a').click(function() { this.selectThing = obj }); 
```

而后来...

```
$.something(obj); 
```

甚至更好：

```
$('a|selectThing?=', obj); 
```

类似的东西。你可以看到我想将一个对象关联到一个 DOM 元素，这样我就可以用对象抓取元素。

我知道这可以通过该`filter()`方法来完成，我的问题是是否有更优雅的方式不`filter()`用于执行此操作。

编辑：

澄清一下，我希望能够使用一种类似于选择器的对象，所以我可以做*类似*的事情，这`$(obj)`显然是行不通的，但你明白了（我希望）

编辑＃2：

我希望能够做这样的事情：

```
var obj = { prop: 'prop' };
$('a').bindTo(obj);
$.retreive(obj) // should equal $('a') 
```

我不希望它以`obj`任何方式改变（`obj`应该仍然是`{prop: 'prop'}`唯一的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T01:12:16.100

## *[演示](http://jsbin.com/oqafoj/edit#javascript,html,live)*

```
var $div1 = $('.box1');
var $div2 = $('.box2');
var obj = { a: $div1, b: $div2 };

obj.a.css({background:'red'}); 
```

* * *

或者简短的方法：`var obj = { a: $('.box1'), b: $('.box2') };`

* * *

### *[演示 jsBin 2](http://jsbin.com/oqafoj/2/edit)*

```
var obj = $('.box1, .box2'); // store objects
obj.css({background:'red'}); // access collection 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T01:04:52.317

你正在寻找[`$.data`](http://docs.jquery.com/Data). 此方法将任何 JavaScript 对象或原语与 DOM 元素相关联。在底层，它不会将数据作为扩展添加到 DOM 元素或任何东西——相反，jQuery 维护自己的 DOM 元素和数据散列的对象缓存。但那是在幕后；关键是，我认为这正是您正在寻找的。

```
$('#example').data('foo', { bar: 'quux' }); // returns the jquery object containing '#example', like most jQuery methods 
```

然后，稍后：

```
console.log($('#example').data('foo')); // returns {bar: 'quux'} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T12:21:52.093

我不认为这很容易实现。让我澄清一下：

要实现您想要的，您需要一个允许对象位于键位置的哈希图。JavaScript （目前）不支持对象作为 hashmap 中的键。因此，例如，以下内容不起作用：

```
var key = {value: 'key'};
var data {value: 'data'};
var map = {};

map[key] = data; 
```

在当前的 javascript 实现中，还有其他解决方案可以实现这一点，例如。双重查找：

```
var key = {value: 'key'};
var data {value: 'data'};
var map = { keys: [], data: [], get: function (key) {
  var k = this.keys.indexOf(key);
  if (k >= 0) {
    return this.data[k];
  } else return undefined;
}, set: function (key, val) {
  var k = this.keys.indexOf(key);
  if (k < 0) {
    k = this.keys.push(k) - 1;
  }
  this.data[k] = val;
} };

map.set(key, data);
map.get(key).value; 
```

然而，这种实现的性能很糟糕。在 JavaScript Harmony 中有一个所谓的[WeakMap的提议。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/WeakMap)不过，我相信 Firefox 是目前唯一实现它们的浏览器。由于所需的功能没有广泛使用，而且变通方法的性能很差，我建议尝试找出一种不同的方法来实现你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T18:43:04.500

据我了解，您正在寻找某种糖方法来在 DOM 上运行多个命名搜索并将结果过滤到命名空间对象中。

如果是这样，我想下面的 jquery 扩展可能对你有帮助：

```
$.fn.seek = function (selectors) {
  var container = this,
    found = {};

  $.each(selectors, function (name) {
    if ($.isPlainObject(selectors[name])) {
      found[name] = $(container).seek(selectors[name]);
    }
    else if ($.type(selectors[name]) === 'string') {
      found[name] = $(container).find(selectors[name]);
    }
  });

  return found;
} 
```

以下是上述扩展如何适用于您的案例的示例：

```
var res = $('body').seek({
  links: 'a',
  headers: 'h1,h2,h3,h4,h5,h6'
});

$(res.links).css({ color: 'green' });
$(res.headers).css({ color: 'red' }); 
```

我希望这可以帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T18:55:48.933

不确定这是否是您正在寻找的。也许您可以编写一个基于 jquery 选择器的自定义选择器，它以您喜欢的方式处理具有选择器属性的对象。一个可选择的对象看起来像

```
var objSelector = {'selector' : '#select-me', 'a' : 'somestring', 'b' : 1243}; 
```

所以你可以像任何其他对象一样自由使用它，但你必须添加选择器属性。比您添加自定义选择器：

```
$$ = (function($) {
    return function(el, tag) {
        if (typeof el === 'object' && el.selector !== undefined) {
            return $(el.selector);                  
        }
        return $(el);
    }
}($)); 
```

现在你可以做类似的事情

```
$$(objSelector).css({'border':'1px solid red'}); 
```

请参阅[http://jsfiddle.net/JXcnJ/上的实现](http://jsfiddle.net/JXcnJ/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T22:02:27.800

如果我当时理解正确，我认为您需要定义一个属性并说`enumerable`为假。见下文，

**注意：**下面只是一个演示示例，并不完全是为了做这些事情，

[**演示**](http://jsfiddle.net/skram/HkDGr/)

```
$(function() {

    $.fn.bindTo = function(o) {
        var _that = this;

        Object.defineProperty(o, 'myFx', {
            value: function() { return $(_that); },
            writable: true,
            enumerable: false,
            configurable: true
        });
    }

    $.retrieve = function(obj) {
        return obj.myFx();
    }

    var obj = {
        prop: 'prop'
    };

    $('#test').bindTo(obj);

    $($.retrieve(obj)).html('Test');

   //below is for proof
    for (i in obj) {
        alert(obj[i]);
    }
}); 
```

**参考：http:** [//yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T22:43:54.433

使用三种方法扩展 jQuery：

```
jQuery.bindObj(data)
jQuery.unbindObj(data)
$.retrieve(data) 
```

您的代码如下所示：

```
$('a').bindObj({blorg: 'shmorg'});
console.log($.retrieve({blorg: 'shmorg'})); // logs live result of $('a'); 
```

完整来源：http: [//jsfiddle.net/nUUSV/6/](http://jsfiddle.net/nUUSV/6/)。

此解决方案的技巧是将基于 jQuery 构造函数的选择器/标识符存储在一个数组中，并将绑定到这些选择器/标识符的对象存储在另一个数组中，然后`$.inArray`在检索时使用该对象的索引并使用该索引来抓取绑定的 jQuery 集合。

# haskell - 从 Yesod OpenID 检索电子邮件地址

> ID：10377370
> 
> 赞同：3
> 
> 时间：2012-04-30T00:57:55.680
> 
> 标签：haskell, openid, yesod

在使用 Yesod 的 OpenId 实现进行身份验证后，有什么方法可以检索用户的电子邮件地址？

在我的测试应用程序中，重定向和身份验证正确发生，并且 mayAuthId 为我的数据库中的相应条目提供了一个 ID。但是，该身份存储为 URL。

我可以使用它，但如果其他 OpenId 包允许，还可以获取用于身份验证的实际电子邮件会很好。Yesod的OpenId可以做到这一点吗？我可以用 authOpenIdExtended 做些什么（不清楚如何使用它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:33:23.810

看看[GoogleEmail](http://hackage.haskell.org/packages/archive/yesod-auth/latest/doc/html/Yesod-Auth-GoogleEmail.html)模块。您需要记住的一件事是，您不一定信任所有的 OpenID 提供商。如果您将电子邮件地址用于任何重要的事情，恶意用户可以简单地设置一个 OpenID 提供程序，让他/她声明他/她想要的任何地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T01:56:01.417

再次查看后，我找到了答案：

首先，我们需要使用带有正确参数的 authOpenIdExtended：

```
authPlugins _ = [authOpenIdExtended [("openid.ns.ax", "http://openid.net/srv/ax/1.0"), 
                                     ("openid.ax.mode", "fetch_request"), 
                                     ("openid.ax.type.email", "http://axschema.org/contact/email"),
                                     ("openid.ax.required", "email")
                                     ]] 
```

我从这个页面找到了这些值：[https](https://developers.google.com/accounts/docs/OpenID) ://developers.google.com/accounts/docs/OpenID并验证它们可以与 Google 和 Yahoo 一起使用。

然后，为了使用我们检索到的电子邮件地址，我们在传递给 getAuthId 的 creds 参数上调用“credsExtra creds”。这为我们提供了一个包含来自 OpenId 提供者的响应的元组列表。当使用上面的参数来 authOpenIdExtended 时，我们会在键/值元组中找到我们的电子邮件，其值为“openid.ax.value.email”（对于 Yahoo）或“openid.ext1.value.email”（对于 Google）。我期待谷歌也使用“openid.ax.value.email”键，但足够接近。

我希望这可以帮助别人。

# ruby-on-rails - rails 初学者，在本地开发者上创建了 2 个 rails 应用程序

> ID：10377372
> 
> 赞同：0
> 
> 时间：2012-04-30T00:59:14.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 rails 新手，我能够安装 rails（3.2.3，ruby v1.9.3），然后创建了一个测试应用程序：

$ rails new 你好

然后我进入新目录'hello'并执行以下命令：

```
$ rails generate controller home index
$ rails s
$ rake routes, it gave me
home_index GET /home/index(.:format) home#index
     hello     /hello(.:format)      Hello#index 
```

然后我将浏览器指向：[http://localhost:3000/home/index](http://localhost:3000/home/index) - 它运行良好。

然后我想开始一个教程，它要求我创建一个新的 Rails 应用程序

所以我像以前一样做...

```
$ rails new TutorialApp
$ rails generate controller tutorial index
$ rails s
$ rake routes, it gave me

tutorial_index GET /tutorial/index(.:format) tutorial#index 
```

然后我将浏览器指向：[http://localhost:3000/tutorial/index](http://localhost:3000/tutorial/index)，它给了我一条消息

> 路由错误
> 
> 没有路线匹配 [GET] "/tutorial/index" 尝试运行 rake 路线以获取有关可用路线的更多信息。

所以我再次运行 rake 路由，它给了我和以前一样的输出

```
tutorial_index GET /tutorial/index(.:format) tutorial#index 
```

由于我创建了第一个 rails 应用程序“Hello”，我是否需要在启动新的 rails 应用程序“Tutorial”之前关闭该应用程序，或者它们可以同时运行？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:08:31.867

您可以使用不同的端口

```
rails server -p 3001 
```

它将在不同的端口运行。然后，只需指向[http://localhost:3001](http://localhost:3001)

But usually you will probably stop the server on one app and start the other one. It's up to you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T01:07:24.000

当您运行 rails server ("rails s") 时，您通常是在您当时所在的 rails 项目的上下文中运行它，所以在开始一个新项目之前，我会关闭当前服务器（CTRL C ）。此外，请确保您在文件夹中创建新的 rails 应用程序本身不是 rails 应用程序的根目录。看起来您可能已经在 Hello 应用的根目录中创建了教程应用。听起来这是让你绊倒的两个主要事情。

# wcf - Cassia 使用模拟和 wcf

> ID：10377377
> 
> 赞同：1
> 
> 时间：2012-04-30T00:59:59.617
> 
> 标签：wcf, impersonation, terminal-services

我正在尝试将[Cassia](http://code.google.com/p/cassia/)与 WCF Web 服务一起使用，但我不断收到“现有连接被远程主机强行关闭”。当我在测试控制台应用程序上尝试它时，它工作正常。这是我从我找到的示例中使用的代码。有人这样做过吗？

```
public List<ITerminalServicesSession> getTermminalServerSessions(string serverName)
    {
        ConnectionDetails connection = new ConnectionDetails();
        connection.Domain = "DOMAIN";
        connection.Server = serverName;
        connection.Username = "USER";
        connection.Password = "PASSWORD";
        using (ImpersonationHelper.Impersonate(connection))
        {
            using (var server = GetServer(connection.Server))
            {
                server.Open();
                return server.GetSessions().ToList();
            }
        }
    } 
```

# java - Java：线程池如何将线程映射到可运行对象

> ID：10377378
> 
> 赞同：2
> 
> 时间：2012-04-30T01:00:29.897
> 
> 标签：java, concurrency

试图围绕 Java 并发进行思考，并且很难理解线程池、线程和它们正在执行的可运行“任务”之间的关系。

如果我创建一个具有 10 个线程的线程池，那么我是否必须将相同的任务传递给池中的每个线程，或者池中的线程实际上只是与任务无关的“工作无人机”可用于执行任何任务？

无论哪种方式，Executor/ExecutorService 如何将正确的任务分配给正确的线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T01:07:52.190

通常，线程池是用一个生产者-消费者队列实现的，所有池线程都在等待任务。Executor 不必分配任务，它所要做的就是将它们推送到队列中。一些线程，一个“与任务无关的工作无人机”，将弹出任务，执行它的“run()”方法，完成后，循环循环以再次在队列中等待更多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T04:58:50.887

> If I create a thread pool with, say, 10 threads, then do I have to pass the same task to each thread in the pool, or are the pooled threads literally just task-agnostic "worker drones" available to execute any task?

More or less the latter. Any given task gets assigned to the next available thread.

> Either way, how does an Executor/ExecutorService assign the right task to the right thread?

There is no such thing as the "right" thread. The task (i.e. the `Runnable`) needs to be designed so that it doesn't matter which thread runs it. This is not normally an issue ... assuming that your application properly synchronizes access / updates to data that is potentially used by more than one threads.

# javascript - 如何将拆分元素放入数组中？

> ID：10377381
> 
> 赞同：0
> 
> 时间：2012-04-30T01:01:51.813
> 
> 标签：javascript, arrays, split

如果我有一串用逗号分隔的名称，如何将它们全部分隔并将它们作为单独的元素放置在新数组中？

例如 -

```
var str="How,are,you,doing,today?";
document.write(str.split(",")); 
```

我想将这些元素中的每一个直接放入一个数组中。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:02:53.737

拆分时只需将它们分配给一个变量：

```
var new_array = str.split(","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:15:38.697

如果您正在谈论如何将其声明为数组，您可以这样做：

```
var strArray = ["How","are","you","doing","today?"]; 
```

# java - 当需要 int 时，阻止程序接受双精度值

> ID：10377382
> 
> 赞同：0
> 
> 时间：2012-04-30T01:01:57.840
> 
> 标签：java, input, int, double

```
Scanner input = new Scanner( System.in );   
System.out.println("Input the minimum necessary word count in a single article!");
int minArticleLength1 = input.nextInt();
while (minArticleLength1<0){
    System.out.println("Input the minimum necessary word count in a single article!");
    minArticleLength1 = input.nextInt();
} 
```

正如您在这部分程序中看到的，您需要为 int 类型变量赋值。如果我输入 int 类型值，一切正常，但是如果我分配一个像 1.1 这样的值，程序会启动一个无限循环，直到我停止它。我应该在代码中更改什么以防止程序接受双精度值，即使 int 是必要的，这样如果我输入像 1.1 这样的双精度值，程序会要求再次输入该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:05:19.610

您可以在循环中使用`try...catch`语句来捕获无效输入。

```
while (minArticleLength1 < 0){
    System.out.println("Input the minimum necessary word count in a single article!");
    try {
        minArticleLength1 = input.nextInt();
    } catch (InputMismatchException imex) }
        System.out.println("Please enter a valid integer.");
        minArticleLength1.nextLine();
    }
} 
```

# ajax - 为什么在 WebSockets 可用时使用 AJAX？

> ID：10377384
> 
> 赞同：222
> 
> 时间：2012-04-30T01:02:25.270
> 
> 标签：ajax, node.js, performance, websocket

我已经使用 WebSockets 有一段时间了，我选择使用 Node 服务器和 WebSockets 为我在大学的最后一年项目创建一个敏捷项目管理工具。我发现使用 WebSockets 使我的应用程序每秒可以处理的请求数量增加了 624%。

然而，自从开始这个项目以来，我已经阅读了安全漏洞，并且一些浏览器选择默认禁用 WebSockets..

**这引出了我的问题：**

当 WebSockets 似乎在降低延迟和资源开销方面做得如此出色时，为什么要使用 AJAX，有什么 AJAX 比 WebSockets 做得更好吗？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-04-30T18:34:37.817

WebSockets 并非旨在取代 AJAX，严格来说甚至不能替代 Comet/long-poll（尽管在很多情况下这是有意义的）。

WebSockets 的目的是在浏览器和服务器之间提供低延迟、双向、全双工和长时间运行的连接。WebSockets 为浏览器应用程序打开了新的应用程序域，这些应用程序使用 HTTP 和 AJAX（交互式游戏、动态媒体流、桥接现有网络协议等）是不可能的。

但是，WebSockets 和 AJAX/Comet 之间的目的肯定有重叠。例如，当浏览器想要收到服务器事件的通知（即推送）时，Comet 技术和 WebSockets 无疑都是可行的选择。如果您的应用程序需要低延迟推送事件，那么这将是支持 WebSockets 的一个因素。另一方面，如果您需要与现有框架和部署的技术（OAuth、RESTful API、代理、负载均衡器）共存，那么这将是支持 Comet 技术的一个因素（目前）。

如果您不需要 WebSockets 提供的特定好处，那么坚持使用 AJAX 和 Comet 等现有技术可能是一个更好的主意，因为这允许您重用和集成现有的庞大的工具、技术、安全机制生态系统, 知识库（即 stackoverflow 上知道 HTTP/Ajax/Comet 的人比 WebSockets 多得多）等。

另一方面，如果您要创建的新应用程序在 HTTP/Ajax/Comet 的延迟和连接限制下无法正常工作，那么请考虑使用 WebSockets。

此外，一些答案表明 WebSockets 的缺点之一是有限/混合的服务器和浏览器支持。让我稍微分散一下。虽然 iOS（iPhone、iPad）仍然支持旧协议 (Hixie)，但大多数 WebSockets 服务器同时支持 Hixie 和 HyBi/ [IETF 6455](https://www.rfc-editor.org/rfc/rfc6455)版本。大多数其他平台（如果它们还没有内置支持）可以通过[web-socket-js](https://github.com/gimite/web-socket-js)（基于 Flash 的 polyfill）获得 WebSockets 支持。这涵盖了绝大多数网络用户。此外，如果您使用 Node 作为服务器后端，那么请考虑使用包含 web-socket-js 作为后备的[Socket.IO](http://socket.io)，如果即使它不可用（或禁用），那么它将回退到使用任何 Comet 技术可用于给定的浏览器。

**更新**：iOS 6 现在支持当前的 HyBi/IETF 6455 标准。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2017-12-22T18:40:12.797

快进到 2017 年 12 月，[（实际上）每个浏览器都支持 Websocket，](https://caniuse.com/#feat=websockets)并且它们的使用非常普遍。

然而，这并不意味着 Websockets 成功地取代了 AJAX，至少不是完全取代，尤其是在 HTTP/2 适配正在兴起的情况下。

简短的回答是 AJAX 仍然适用于大多数 REST 应用程序，即使在使用 Websockets 时也是如此。但上帝在细节中，所以......：

### AJAX 用于轮询？

[使用 AJAX 进行轮询（或长轮询）正在消亡](https://stackoverflow.com/questions/10028770/in-what-situations-would-ajax-long-short-polling-be-preferred-over-html5-websock)（而且应该如此），但出于两个充分的原因（主要用于较小的 Web 应用程序），它仍然在使用：

1.  对于许多开发人员来说，AJAX 更容易编码，尤其是在编码和设计后端时。

2.  使用 HTTP/2，与 AJAX（建立新连接）相关的最高成本被消除，从而使 AJAX 调用具有相当高的性能，尤其是在发布和上传数据时。

但是，[Websocket 推送远优于 AJAX](https://stackoverflow.com/a/44743650/4025095)（无需重新验证或重新发送标头，无需“无数据”往返等）。这[被讨论](https://stackoverflow.com/a/33796628/4025095)了很多次。

### 用于 REST 的 AJAX？

AJAX 的更好用途是 REST API 调用。这种使用简化了代码库并防止 Websocket 连接阻塞（尤其是在中等大小的数据上传时）。

有许多[令人信服的理由更喜欢 AJAX 进行 REST API 调用](https://stackoverflow.com/a/45464306/4025095)和数据上传：

1.  AJAX API 实际上是为 REST API 调用而设计的，非常适合。

2.  使用 AJAX 的 REST 调用和上传在客户端和后端都更容易编写代码。

3.  随着数据负载的增加，Websocket 连接可能会被阻塞，除非对消息分段/多路复用逻辑进行编码。

    如果在单个 Websocket`send`调用中执行上传，它可能会阻塞 Websocket 流，直到上传完成。这会降低性能，尤其是在速度较慢的客户端上。

一种常见的设计使用通过 Websocket 传输的小型双向消息，而 REST 和数据上传（客户端到服务器）利用 AJAX 的易用性来防止 Websocket 阻塞。

但是，在较大的项目中，Websockets 提供的灵活性以及代码复杂性和资源管理之间的平衡将使平衡倾向于 Websockets。

例如，基于 Websocket 的上传可以提供在连接断开并重新建立后恢复大型上传的能力（还记得您要上传的 5GB 电影吗？）。

通过编码上传碎片逻辑，很容易恢复中断的上传（困难的部分是编码）。

### HTTP/2 推送呢？

我可能应该补充一点，HTTP/2 推送功能不会（也可能不能）取代 Websockets。

这已经在[这里讨论](https://stackoverflow.com/a/32257946/4025095)过，但只要提到单个 HTTP/2 连接服务于整个浏览器（所有选项卡/窗口）就足够了，因此 HTTP/2 推送的数据不知道它属于哪个选项卡/窗口，消除了替代 Websocket 将数据直接推送到特定浏览器选项卡/窗口的能力。

虽然 Websockets 非常适合小型双向数据通信，但 AJAX 仍然具有许多优势 - 特别是在考虑更大的有效负载（上传等）时。

### 和安全？

好吧，一般来说，为程序员提供的信任和控制越多，工具就越强大......并且会出现更多的安全问题。

AJAX 本质上会占上风，因为它的安全性内置在浏览器的代码中（这有时是有问题的，但它仍然存在）。

另一方面，AJAX 调用更容易受到“中间人”攻击，而 Websockets 安全问题通常是应用程序代码中引入安全漏洞的错误（通常后端身份验证逻辑是您可以找到这些漏洞的地方）。

就我个人而言，我认为这并没有那么大的区别，如果有什么我认为 Websockets 稍微好一点的话，尤其是当你知道你在做什么的时候。

### 我的拙见

恕我直言，除了 REST API 调用，我会使用 Websockets。大数据上传我会尽可能分段并通过 Websockets 发送。

恕我直言，轮询应该被取缔，网络流量的成本是可怕的，而且即使对于新开发人员来说，Websocket 推送也很容易管理。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-04-30T09:20:18.840

除了旧浏览器的问题（包括 IE9，因为从 IE10 开始将支持 WebSockets），尚不支持 WebSockets 的网络中介仍然存在很大问题，包括透明代理、反向代理和负载平衡器。有一些移动运营商完全封锁了 WebSocket 流量（即在 HTTP UPGRADE 命令之后）。

随着岁月的流逝，WebSockets 将得到越来越多的支持，但与此同时，您应该始终拥有一种基于 HTTP 的备用方法来向浏览器发送数据。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-02-19T17:13:48.380

我读过的关于 websockets 和安全性的大部分抱怨来自 web 浏览器安全和防火墙安全工具的安全供应商。问题是他们不知道如何对 websockets 流量进行安全分析，因为一旦它完成了从 HTTP 到 websocket 二进制协议的升级，数据包内容及其含义是特定于应用程序的（基于您编写的任何内容）。对于这些以分析和分类所有互联网流量为生的公司来说，这显然是一场后勤噩梦。:)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-04-30T01:04:22.820

WebSockets 在较旧的 Web 浏览器中不起作用，并且[支持它的](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)浏览器通常具有不同的实现。这几乎是为什么它们没有一直用来代替 AJAX 的唯一充分理由。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-27T10:57:25.903

> 我认为我们不能对 Websockets 和 HTTP 做一个明确的比较，因为它们不是竞争对手，也不能解决相同的问题。

Websockets 是近乎实时地处理长期双向数据流的绝佳选择，而 REST 则非常适合偶尔的通信。使用 websockets 是一项相当大的投资，因此对于偶尔的连接来说它是一种过度杀伤力。

您可能会发现 Websocket 在高负载时表现更好，在某些情况下 HTTP 稍微快一些，因为它可以利用缓存。比较 REST 和 Websockets 就像比较苹果和橘子。

我们应该检查哪一个为我们的应用程序提供更好的解决方案，哪一个最适合我们的用例获胜。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-07T04:40:48.470

HTTP 和 Websockets 之间差异的示例，以客户端大小的库的形式可以处理 Websocket 端点（如 REST API）和 RESTful 端点（如客户端上的 Websockets）。 [https://github.com/mikedeshazer/sockrest](https://github.com/mikedeshazer/sockrest) 另外，对于那些试图在客户端使用 websocket API 或反之亦然的人来说。libs/sockrest.js 几乎清楚地说明了差异（或者说应该）。

# vb.net - 即使在应用程序退出后，SplashScreen 仍保持打开状态

> ID：10377386
> 
> 赞同：1
> 
> 时间：2012-04-30T01:02:36.233
> 
> 标签：vb.net, winforms

Windows 窗体 VB 应用程序。我在我的应用程序中添加了一个 splashScreen。它只闪烁了一秒钟然后就消失了，所以我在我的表单加载事件中添加了一个睡眠计时器......现在的问题是即使在应用程序退出后，splashScreen 仍然保持打开状态，而不是简单地在睡眠计时器结束时关闭......导致此问题的表单加载事件部分如下：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.Load

Threading.Thread.Sleep(5000)
Me.WindowState = FormWindowState.Maximized
Dim _year As String = System.DateTime.Now.Year.ToString 
```

我正在使用通过转到 myproject 创建的股票 Splashscreen。它的代码如下： Public NotInheritable Class SplashScreen1

```
'TODO: This form can easily be set as the splash screen for the application by going to the "Application" tab
'  of the Project Designer ("Properties" under the "Project" menu).

Private Sub SplashScreen1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    'Set up the dialog text at runtime according to the application's assembly information.  

    'TODO: Customize the application's assembly information in the "Application" pane of the project 
    '  properties dialog (under the "Project" menu).

    'Application title
    If My.Application.Info.Title <> "" Then

    Else
        'If the application title is missing, use the application name, without the extension
        'ApplicationTitle.Text = System.IO.Path.GetFileNameWithoutExtension(My.Application.Info.AssemblyName)
    End If

    'Format the version information using the text set into the Version control at design time as the
    '  formatting string.  This allows for effective localization if desired.
    '  Build and revision information could be included by using the following code and changing the 
    '  Version control's designtime text to "Version {0}.{1:00}.{2}.{3}" or something similar.  See
    '  String.Format() in Help for more information.
    '
    '    Version.Text = System.String.Format(Version.Text, My.Application.Info.Version.Major, My.Application.Info.Version.Minor, My.Application.Info.Version.Build, My.Application.Info.Version.Revision)

    Version.Text = System.String.Format(Version.Text, My.Application.Info.Version.Major, My.Application.Info.Version.Minor)

    'Copyright info
    Copyright.Text = My.Application.Info.Copyright

End Sub 
```

结束类

函数中没有更多与此相关的内容。其余部分用于填充表单标签和文本框...如果我删除 Threading.Thread.Sleep(5000) 行，则启动屏幕只会闪烁一秒钟，但完成后退出..有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:16:18.603

答案不是使用`Thread.Sleep`而是设置[MinimumSplashScreenDisplayTime](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.windowsformsapplicationbase.minimumsplashscreendisplaytime.aspx)（*显示初始屏幕的最小时间长度，以毫秒为单位。*）

要设置这个：

1.  选择`Project>[Your project name] Properties`
2.  `Application`标签
3.  单击`View Application Events`启动画面下拉菜单旁边的按钮
4.  `MyApplication`从对象选择下拉菜单中选择对象（左上角菜单）
5.  `OnCreateSplashScreen`从方法下拉菜单中选择方法声明（右上角菜单）
6.  `OnCreateSplashScreen`在方法中添加以下行`MinimumSplashScreenDisplayTime = 10000`

（如果您还没有这样做，您需要将启动屏幕表单设置为应用程序的启动屏幕，请参阅[如何指定启动屏幕](http://msdn.microsoft.com/en-us/library/bfkbc5a3%28v=vs.100%29.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:49:31.683

```
FormName.MinimumSplashScreenDisplayTime = 10000 
```

它将显示启动画面 10 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:32:17.683

非常感谢那个人的帮助......它现在正在工作..但我不得不发表评论

```
 Me.WindowState = FormWindowState.Maximized 
```

由于某种原因，它打破了最小飞溅时间..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T14:50:53.800

这发生在我身上，它是由表单 OnLoad 事件中的错误引起的。我清除了错误，启动画面开始正常运行。

顺便说一句，我将此表单设置为最大化，该设置对启动画面没有影响

# gcc - “go get”不只是获取文件然后 cgo+“go build”它们吗？显然不是

> ID：10377390
> 
> 赞同：1
> 
> 时间：2012-04-30T01:02:57.487
> 
> 标签：gcc, windows-7, mingw, go, cgo

我在构建一个相当简单的本地 CGO 项目时遇到问题。考虑[这个只有 3 个文件（glut.go、support.c 和 support.h 文件）的非常小的 CGO 包](https://github.com/zombiezen/Go-GLUT/tree/master/glut)——如果我只是**去获取**它，这些文件将下载到

```
C:\Go\src\pkg\github.com\zombiezen\Go-GLUT\glut 
```

然后发生了一些秘密魔法并**go get**构建以下输出文件：

```
C:\Go\pkg\windows_amd64\github.com\zombiezen\Go-GLUT\glut.a 
```

但是，如果我将三个源文件复制到 \mytmp，cd 到 \mytmp 并**go build -o glut.a glut.go**，我会收到一些 40-60 错误消息，如下所示：

```
C:\Users\roxor\AppData\Local\Temp\go-build191975110\command-line-arguments\_obj\glut.cgo2.o: In function `_cgo_b46885fb7c57_Cfunc_goCreateMenu':
./glut.go:195: undefined reference to `goCreateMenu' 
```

如果我使用**-x命令行参数运行****go get**，我可以看到*support.c*在构建过程中被拾取并提供给 gcc：

 ***```
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\support.o -c .\support.c 
```

但是，使用**go build -x**时，情况并非如此，support.c 被跳过。为什么？我如何调用**go build**像**go get**一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:45:21.193

只是做`go build`而不是`go build somefile.go`做。现在太明显了……</p>***

# mysql - 将一组 id 存储在一个 db 字段中 VS 分解为一个连接表 - 使用什么 sql？

> ID：10377391
> 
> 赞同：0
> 
> 时间：2012-04-30T01:03:16.837
> 
> 标签：mysql, arrays, join

我得出的结论是，我在单个数据库字段（1、5、48）中存储一组 id 的第一个快速修复可能不是最好的，但如果我将它们分解为“父项 id”（单数）的连接表，并且然后子相关的项目ID（多个）链接到单独的表会更好。

但现在我不确定使用什么 mysql 查询来获取匹配项。

因此，提交了一个搜索表单，其中“related_item”数组为“1,5,8”，而我的“parent_items”之一在连接表中具有“1”和“8”的相关项目匹配......

那么什么 mysql 查询会返回这些匹配项呢？

更新：

*   我有一张“公司”表，可能是 HSBC 和 TOPSHOP 作为示例记录。
*   有一个单独的“行业”表，可能是“银行”和“零售”
*   有一个连接表，它是 company_id 和 industry_id 将它们配对在一起

因此，如果有人提交了行业 = 'banking' 或 'retail' 的搜索表单，我将如何返回 'topshop' 和 'hsbc' 的公司记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:15:47.070

像这样的东西......如果你正在“寻找”孩子或父母，我不清楚你的描述。我认为您的意思是搜索孩子：

```
-- SEARCH CHILDREN --
SELECT p.*, c.* FROM child_table c
LEFT JOIN linking_table l ON (p.id = l.child_table_id)
LEFT JOIN parent_table p ON (l.parent_item_id = p.id)
WHERE c.id IN (1,5,4,8)
-- OPTIONAL AND CLAUSE for p.id = ? -- 
```

如果您的意思是搜索父母，那么您可以只修改订单，尽管您可以使用完全相同的查询，但您的 WHERE IN 子句将是 on`p.id`而不是`c.id`.

请注意，这将为孩子们每场比赛获得 1 行，因此您将多次拥有同一个父母。如果您不需要实际的子数据，那么您可以`DISTINCT`只返回一个实例。

# appharbor - AppHarbor 上的 Github 集成不起作用

> ID：10377392
> 
> 赞同：1
> 
> 时间：2012-04-30T01:03:25.903
> 
> 标签：appharbor

我似乎无法让 Github 集成与我在[AppHarbor](https://appharbor.com/)上的应用程序一起工作。我在构建详细信息中看不到任何错误，它只是详细信息中的一个空白 txt……它永远不会切换到活动状态，状态保持为红色无圆圈。

我按照说明在服务挂钩中使用 slug 和令牌配置我的 github 存储库。当我直接推送到 app Harbor git 时，应用程序部署良好。

有没有我可能忘记的技巧或陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:37:43.527

如果它是私有存储库，您必须`apphb`在 Github 上将用户添加为协作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:33:42.340

对于将来的参考，需要注意的另一件事是，它仅在提交代码时才推送代码。因此，如果您提交，然后设置 github，您将需要再次提交才能将其推送。

# linux - 在 CentOS 上永久安全地删除文件

> ID：10377393
> 
> 赞同：14
> 
> 时间：2012-04-30T01:03:30.693
> 
> 标签：linux, security, filesystems, centos

我想知道如何在 CentOS 上永久安全地删除文件。我现在遇到的问题是，文件系统是 ext3，当我想到使用`srm-`它时说类似

> “它应该适用于 ext2、基于 FAT 的文件系统和 BSDnative 文件系统。Ext3 用户应该特别小心，因为它也可以设置为日志数据，这是重建信息的明显途径。”

如果我不能使用`shred`or `srm`，并且安全删除也不是一个选项，那么我对如何安全和永久地删除数据一无所知。我要删除的文件未加密。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T06:07:13.273

只需使用粉碎：

```
shred -v -n 1 -z -u /path/to/your/file 
```

这将首先用随机数据覆盖给定文件，然后用 0x00（零）覆盖给定文件，然后删除文件；）快乐粉碎！

请注意，ext3/ext4（和所有日志 FS）可以用随机数据和零缓冲碎片，并且只会将零写入磁盘，当您有一个小文件时就是这种情况。对于一个小文件，请使用：

```
shred -v -n 1 /path/to/your/file #overwriting with random data
sync #forcing a sync of the buffers to the disk
shred -v -n 0 -z -u /path/to/your/file #overwriting with zeroes and remove the file 
```

对于 ext3，1MB 或更大应该足以写入磁盘（但我不确定，自从我使用 ext3 以来已经很长时间了！），对于 ext4，有一个巨大的缓冲区（最多半个 gig 或更多/更少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T03:46:29.940

`srm`自述文件只说 Ext3 用户应该特别小心，并不是说`srm`绝对不能在 Ext3 上工作。

特别是，Ext3 在默认情况下不启用数据日志，因此理论上，`srm`它应该可以在设计工作的范围内基本工作。您可能想查看[此链接](http://techthrob.com/2010/10/04/do-secure-delete-tools-work-with-journaled-filesystems/)，以便对基本问题有一个很好的概述。

# java - 如何让 Servlet 识别调用者 JSP 和会话

> ID：10377394
> 
> 赞同：0
> 
> 时间：2012-04-30T01:03:31.093
> 
> 标签：java, jsp, servlets, dygraphs

我正在使用 servlet 构建一个简单的 WebApplication。我是一个初学者，但已经尝试过学习这项技术的大部分内容。有件事我想不通。我的 servlet 之一是有用的 BalusC FileServlet

```
http://balusc.blogspot.mx/2007/07/fileservlet.html 
```

它使用所需文件响应 GET 请求，干净整洁。

我使用这个 FileServlet 为 Dygraph 提供 CSV 文件

```
http://dygraphs.com/ 
```

我有两种类型的用户：客人和管理员。客人应该能够看到图表，但不能下载 CSV 文件。管理员应该能够做到这两点。

fileServlet 对 URL 模式的响应为：file/*（* 是文件名），当 Dygraph 读取 URL 中指定的文件时，这非常方便。

在这个 web 应用程序中构建了一个 loginServlet，如果用户只是复制粘贴为 Dygraph 提供的 URL，我希望能够避免使用 fileservlet 来提供文件。FileServlet 已经能够从该会话中获取会话和登录用户，但我不知道如何检测调用 GET 方法的页面是什么。我希望 fileservlet 仅在从 JSP 代码中调用时才提供文件，而不是从浏览器的地址栏中调用。

让我解释一下：

我的意思是 - 作为来宾用户 - 以下 Javascript 代码应该显示图形（FileServlet 提供文件）

```
<div id="graphdiv2" style="width:640px; height:480px;">
<script type="text/javascript">
g2 = new Dygraph(
document.getElementById("graphdiv2"),
"${messages.rutacsv}", // path to CSV file
{
rollPeriod: 10,
showRoller: true
}
);
</script>            
</div> 
```

变量：“${messages.rutacsv}”被 servlet 替换，如下所示：

“文件/2012-04-20_1.csv”

所以 Dygraph 可以很好地加载文件并绘制线条。

但是，我希望 FileServlet 能够检测到用户何时在 ContextName 之后复制粘贴此 URL 并阻止它，因此只有 Dygraph 可以下载文件。

例如，如果用户在他的浏览器中键入：

```
http://localhost:8080/MyWebApp/file/2012-04-20_1.csv 
```

应该是不能下载的。只有管​​理员应该能够。

现在，我在想也许我应该实现 FileServlet，因此必须使用另一个 URL 模式或 POST 方法调用它，这样简单的用户复制意大利面就无法通过“origining-JSP”检查。

顺便说一句，我尝试使用 Struts2 回来了，这对于这个应用程序来说太复杂了。为了方便和易于使用简单的 servlet 和 JSP 进行开发，我放弃了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:17:39.230

使用[过滤器](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm)检查用户角色。也就是说，在进行任何重要操作之前，必须检查用户是否有权执行此操作。这是任务 servlet 过滤器。

您必须`doFilter()`在类扩展中实现该方法，`javax.servlet.Filter`如下所示：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws   IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) request;

    HttpSession session = req.getSession();

    String currentRole = (String) session.getAttribute("userRole");

    if ("admin".equals(currentRole)) {
         successRedirect(); 
    } else {
         failRedirect();
    }
    chain.doFilter(request, response);
} 
```

并且不要忘记将此过滤器映射到 web.xml 文件中所需的地址：

```
<filter>
    <filter-name>CheckRightAccessFilter</filter-name>
    <filter-class>yourproject.CheckRightAccessFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CheckRightAccessFilter</filter-name>
    <url-pattern>*.csv</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:44:18.460

使用 servlet 过滤器检查提交的 url，并根据会话对象识别用户角色。如果找到授权用户，则可以重定向到下载页面

# java - 扫描仪 nextline() 仅打印新行

> ID：10377397
> 
> 赞同：2
> 
> 时间：2012-04-30T01:04:41.723
> 
> 标签：java

我正在尝试使用扫描仪打印文本文件中的行，但它只打印第一行，然后只打印新行，直到 while 循环遍历文件。

```
String line;
File input = new File("text.txt");
Scanner scan = new Scanner(input);
while (scan.hasNext()) //also does not work with hasNextLine(), but additional error
{
line = scan.nextLine();
System.out.println(line);
//other code can see what is in the string line, but output from System.out.println(line); is just a new line
} 
```

如何让 System.out.println() 使用此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:18:24.713

这是 Javadoc[`nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

你想要[`next()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)：

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。此方法可能会在等待输入扫描时阻塞，即使先前调用 hasNext() 返回 true。

您的代码变为：

```
while (scan.hasNext())
{
  line = scan.next();
  System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:21:36.330

您可以使用**.next()**方法：

```
String line;
File input = new File("text.txt");
Scanner scan = new Scanner(input);
while (scan.hasNext()) //also does not work with hasNextLine(), but additional error
{
    line = scan.next();
    System.out.println(line);
} 
```

# opencv - OpenCV 输入数组/输出数组

> ID：10377400
> 
> 赞同：6
> 
> 时间：2012-04-30T01:05:18.277
> 
> 标签：opencv

我刚刚编译了 OpenCV 2.3 的最后一个版本。他们决定将所有 Matrix 输入/输出更改为 InputArray/OutputArray 将一切都搞砸了。在 OpenCV 2.2 下运行良好的同一段代码现在一文不值。

我会接受两种解决方案：

1.  告诉我在哪里可以下载适用于 Linux 的 OpenCV 2.2，包括所有模块，重要的是不要缺少拼接（我试图找到一个合适的，但总是缺少拼接！）。

2.  帮我解决我在下面描述的问题。

3.  OpenCV 2.4，即使仍然是测试版，已经修复了这个问题，我应该改用这个版本！

我有这个异常消息：

```
OpenCV Error: Assertion failed (k == STD_VECTOR_MAT) in getMat, file /home/widgg/opencv/trunk/modules/core/src/matrix.cpp, line 928
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/widgg/opencv/trunk/modules/core/src/matrix.cpp:928: error: (-215) k == STD_VECTOR_MAT in function getMat 
```

在 gdb 中，这是堆栈：

```
#0  0x00007ffff5df3445 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff5df6bab in __GI_abort () at abort.c:91
#2  0x00007ffff674169d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00007ffff673f846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#4  0x00007ffff673f873 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007ffff673f96e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#6  0x00007ffff77fca51 in cv::error(cv::Exception const&) () from /usr/local/lib/libopencv_core.so.2.3
#7  0x00007ffff791306d in cv::_InputArray::getMat(int) const () from /usr/local/lib/libopencv_core.so.2.3
#8  0x00007ffff796064c in cv::perspectiveTransform(cv::_InputArray const&, cv::_OutputArray const&, cv::_InputArray const&) () from /usr/local/lib/libopencv_core.so.2.3 
```

最后，这是我调用 cv::perspectiveTransform 时的代码：

```
std::vector<cv::Point2f> corners(4);

cv::Mat cur_image = imread("my_image.jpg");

std::vector<cv::Point2f> img_corners(4);

img_corners[0] = cv::Point2f(0, 0);

img_corners[1] = cv::Point2f(cur_image.cols, 0);

img_corners[2] = cv::Point2f(cur_image.cols, cur_image.rows);

img_corners[3] = cv::Point2f(0, cur_image.rows);

cur_image.release();

cv::perspectiveTransform(img_corners, corners, m_transf); 
```

而cv::Mat m_transf = (Mat_ < double > (3,3) << 1, 0, 0, 0, 1, 0, 0, 0, 1);，就是它第一次使用时的值，然后就崩溃了在那个地方！

我对 cv::FindHomography 也有类似的问题。问题是代码在昨天和现在正常执行，这个 InputArray/OutputArray 事情搞砸了一切。

很烦，求大神帮忙！

另外，我在这里找到了这份报告：[OpenCV 2.2 Vs。2.3](http://upstream-tracker.org/compat_reports/opencv/2.2.0_to_2.3.0/abi_compat_report.html "OpenCV 2.2 到 2.3 兼容性报告")，这不是一个好兆头！应该有一个解决方法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T07:52:36.757

您似乎安装了两个版本的 OpenCV，并且链接器尝试使用与用于编译代码的版本不同的版本进行链接。

最简单的方法是删除所有其他 OpenCV 版本，然后可能的错误库路径将更加明确（缺少 somelib.so）

或者，检查所有设置 PATH、链接器标志和包含文件夹，以确保您通过包含/编译/链接步骤使用相同的版本

# database - VB.net 数据库连接有点关闭

> ID：10377403
> 
> 赞同：1
> 
> 时间：2012-04-30T01:05:38.133
> 
> 标签：database, events, vb.net-2010

我希望这没有一个非常简单的解决方案，但我在互联网上找不到类似的问题。

我有一些禁用的文本框和一个连接到我的数据库的组合框，一切都很好。组合框选择我想要显示的 ID，其余的填满真的很好。我的问题是我无法找到与新​​重新填充的文本框一起用于计算的事件。

我有 3 个从数据库中提取的字段，ID、名称和价格。如果数量文本框中有一个数字，它会 calculateCost() 。当我更改包含我的 ID 的组合框时，我希望它再次转到 calculateCost()。_SelectedIndexChanged 在 ID 更新后，但在其余字段更新之前执行 calculateCost()，因此它使用以前 ID 的价格而不是新的价格。ID 或价格字段上的 _Validating 和 _Validated 永远不会触发，我猜数据库信息是允许的。我找不到解决此问题的方法。

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:02:12.337

一个快速而肮脏的解决方案，如果您找不到另一个，是添加一个调用您的计算成本函数的计时器，并将其设置为在您的组合框事件后不久触发。这不是一种优雅的方式，但它可以完成工作。

# sql-server-2008 - 如何为我的 Decimal(10,4) 字段显示完整的小数点

> ID：10377406
> 
> 赞同：0
> 
> 时间：2012-04-30T01:05:55.440
> 
> 标签：sql-server-2008, asp.net-mvc-views

我在我的 SQL Server 2008 中有一个 Decimal(10,4) 类型的数据库字段，但在我的 asp.met mvc 视图中，这些值只会显示为两个十进制数字，所以假设数据库中的值是`10.1234`它将仅显示在视图上`10.12`。 **那么我如何定义字段格式以显示存储在数据库中的所有小数点**

**更新：-** 首先实体框架为表创建一个模型类并将对象属性设置为：-

```
public decimal Result { get; set; } 
```

在视图上，结果显示如下：-

```
<div class="display-field">
        @Html.DisplayFor(modelitem => vlr.Result)
    </div>
    </td>
   <td>
    <div class="display-field">
        @Html.DisplayFor(modelitem => vlr.DateTaken)
    </div> 
```

即使`Result`数据库中的值是`12.1234`; 它将在视图上显示为`12.12`!!!!。BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:29:35.580

向模型添加 DataAnnotation：

```
[DisplayFormat(DataFormatString = "{0:#,###,##0.0000}", ApplyFormatInEditMode = true)]
public decimal Result { get; set; } 
```

# imagemagick - PHP 使用 IMAGEMAGICK 或 imagick 或 magicwand

> ID：10377408
> 
> 赞同：0
> 
> 时间：2012-04-30T01:06:00.460
> 
> 标签：imagemagick, imagick, magickwand

我使用 Imagemagick ( [www.imagemagick.org](http://www.imagemagick.org) )

因为我在 hostgator 上，所以我也安装了[imagick](http://www.php.net/manual/en/class.imagick.php)和 magickwand。

我可以使用 imagick 和 magickwand 进行简单的操作，但如果我想在 imagemagick.org 上复制高级教程，我会失败。

目标： **让这个工作[http://www.imagemagick.org/Usage/advanced/#jigsaw](http://www.imagemagick.org/Usage/advanced/#jigsaw)**

问题：

**我怎么能用imagick或magickwand做到这一点？**

**我还能以某种方式通过命令行与模块 imagemagick 进行通信，比如 exec(....)？**

感谢 4 简短的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:27:59.337

您可以使用[exec()](http://php.net/manual/en/function.exec.php)或[shell_exec()](http://php.net/manual/en/function.shell-exec.php)。

例如：

```
exec('/path/to/your/imagick/convert jigsaw_tmpl.png -edge .5 -blur 0x.5 jigsaw_edge.png'); 
```

再提醒一下，`exec()`在 PHP 安全模式下将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:27:30.890

好的。直接使用命令行命令的解决方案如下：

exec("/usr/lib/convert user/set/seinfeld/image/image/data/apple_cinema_30.jpg -edge .5 -blur 0x.5jaw_ege.png");

所以显然你必须知道模块的路径并正确设置图像的路径（a）。

如有必要，将使用 imagick/magickwand 的说明进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:13:30.533

我认为在 Imagick 中运行是很复杂的——并不是说它不可能——如上所述，最好的选择是 Imagemagick 命令行和 exec()。一次构建一个命令；您可以稍后组合命令。不要将 jpg 用于任何中间图像，因为您将开始降低质量。

这取决于您所追求的效果，因为 Anthony 有一个 Bash 脚本，您可以使用链接到页面该部分的底部。

您可以使用 exec 使用 php 运行它：将脚本上传到您的服务器 CHMOD 它到 755 或 777，具体取决于您的服务器设置

```
// Run the script 
exec("/FULL PATH TO JIGSAW/jigsaw options input.jpg mask.png output.png 2>&1", $array); 
//Display any errors 
echo "<br>".print_r($array)."<br></pre>"; 
```

我不知道这是否适用于 Hostgator 帐户，但我不明白为什么不这样做。

我也没有尝试过，你需要一个蒙版图像来配合你的输入图像。

我刚刚在我的服务器上尝试过这个并得到一个错误：/bin/bash^M: bad interpreter: No such file or directory 这对我来说没有任何意义！

使用 Anthony 的图像和带有 Imagemagick 命令行和 exec() 的代码制作拼图

```
exec("convert jigsaw_tmpl.png -edge .5 -blur 0x.5 jigsaw_edge.png");

$cmd = " holocaust_md.jpg \( jigsaw_edge.png -negate \) -geometry +365+96 ".
" -compose multiply -composite -crop 100x100+365+96 +repage ";

exec("convert $cmd jigsaw_outline.png");    

$cmd = " holocaust_md.jpg -crop 100x100+365+96! -background none -flatten ".
" +repage \( jigsaw_tmpl.png +matte \) -compose CopyOpacity -composite ".
" -rotate -20 -gravity center -crop 100x100+0+0 +repage ";          

exec("convert $cmd jigsaw_cutout.png");         

$cmd = " jigsaw_cutout.png \( +clone -channel A -separate +channel -negate ".
" -background black -virtual-pixel background -blur 0x2 -shade 120x21.78 ".
" -contrast-stretch 0% +sigmoidal-contrast 7x50%  -fill grey50 -colorize 10% ".
" +clone +swap -compose overlay -composite \) -compose In -composite ";

exec("convert $cmd jigsaw_bevel.png");            

$cmd = " jigsaw_bevel.png \( +clone -fill DarkSlateGrey -colorize 100% -repage +0+1 \) ".
" \( +clone -repage +1+2 \)  \( +clone -repage +1+3 \) \( +clone -repage +2+4 \) ".
" \( +clone -repage +2+5 \) -background none -compose DstOver -flatten";

exec("convert $cmd jigsaw_thickness.png");

$cmd = " jigsaw_thickness.png \( +clone -background Black -shadow 50x3+4+4 \) ".
" -background none -compose DstOver -flatten";

exec("convert $cmd jigsaw_shadow.png"); 
```

# mysql - 需要从两个表列中选择不重复的值

> ID：10377418
> 
> 赞同：1
> 
> 时间：2012-04-30T01:08:11.077
> 
> 标签：mysql

我有两张表，里面有城市名称。我想对照第二个表检查第一个表，如果第一个表在第二个表中不包含城市名称，则选择它进行显示。因此，如果两个表中都有城市，则不要显示它。

我知道我可以这样做来找到匹配的：

```
WHERE table1.city=table2.city 
```

但是当我尝试将它用于不匹配的东西时：

```
Where table1.city!=table2.city 
```

我仍然得到匹配的城市。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:11:58.210

```
SELECT `city_name` 
FROM `first_table`
WHERE `city_name` NOT IN (SELECT `city_name` FROM `second_table`) 
```

将从第一个表中选择不在第二个表中的城市名称。

# powershell - 从 cmd 调用 ps1

> ID：10377420
> 
> 赞同：0
> 
> 时间：2012-04-30T01:08:22.293
> 
> 标签：powershell

我想从命令行调用 ps1，同一个文件夹中有 2 个文件（非常简单）

`test.cmd`：

```
@set powershell=powershell.exe
echo ^^^&'%~dpn0.ps1' %*| "%powershell%" -ExecutionPolicy Bypass -Command -
exit /b %ERRORLEVEL% 
```

`test.ps1`：

```
ls>abc.txt 
```

问题是：当我从命令行调用 test.cmd 时，没有生成 abc.txt。但是当我从该文件夹中的 powershell ise 调用 test.ps1 时，会创建 abc.txt。我也可以从该文件夹中调用 powershell.exe。

我错过了什么？

> 这个问题已经整理好了。我的文件夹名称中有 '，一旦我删除它，它就可以正常工作。
> 
> 多谢你们！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:42:35.530

您确定`ls>test.txt`仅通过运行`test.ps1`脚本就可以工作吗？

你必须写`ls > test.txt`它才能工作，我已经确认这`test.cmd`也是有效的。

# ruby-on-rails - 我应该将想要在我的虚拟主机上的网页上显示的文件放在哪里？

> ID：10377422
> 
> 赞同：0
> 
> 时间：2012-04-30T01:08:32.973
> 
> 标签：ruby-on-rails, ruby, hosting, web-hosting, bluehost

所以我刚刚完成了 railstutorial.org twitter 克隆示例，我想通过我的网络托管服务提供商 bluehost 将它放到网上。现在我只有一个名为 sample_app 的文件，其中包含所有的 rails 内容。当我在 localhost:3000 上访问它时它工作正常。

所以我去我的 bluehost 文件管理器，那里有 9 个不同的文件夹，比如 public_html、public_ftp、rails_apps、www、tmp、access_logs 等。我已经将 sample_app 上传到这个整体目录和 public_html 目录本身。但是当我访问我的网站时，它只会在 public_html 目录中的 default.html 文件中显示 html。

究竟是什么告诉我的托管服务使用我服务器空间上其他地方的数百个不同文件和文件夹的 public_html/default.html？我如何找到这个东西并告诉它使用 sample_app 或 public_html/sample_app 然后处理其中的所有内容以显示我的 rails 应用程序？

我试过使用 bluehost 支持，他们给我发了电子邮件，说这将通过创建一个将 ~/rails_apps/NinetyNine/public 链接到 ~/public_html 的符号链接来完成。我不知道该怎么做，我在网上找到的指南都告诉我输入一系列命令。我不知道是在我的 ubuntu 系统上的终端还是 bluehost 提供的一些命令提示符中执行此操作。如果它在我系统的终端上，我应该在哪个目录中？我在我的系统上所做的任何尝试都导致没有这样的文件或目录错误。当我要求 bluehost 解释这一点时，他们说这超出了他们的支持范围，并且与 Web 开发而不是托管有关。他们不愿意解释自己对我的问题的反应，但无论如何，这让我感到很奇怪。

如果你们中的任何人可以帮助我或指出我正确的方向，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:34:51.063

1.  是什么告诉我的托管服务使用`public_html/default.html`？

    那将是设置 Web 服务器配置，可能是 Apache。

    在 Apache 的情况下，该`public_html`目录通常使用该 [`UserDir`](http://httpd.apache.org/docs/2.0/howto/public_html.html)指令启用。

    ,`default.html`也是一个 Apache 配置[DirectoryIndex](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)。

    回答这些是因为您问：但通常，全局 Apache 配置由您的提供商维护（尽管您通常有一些方法来自定义它的一部分）。

2.  创建从`public_html`到的符号链接

    他们喜欢给你一个命令（也许不完全是）

    ```
    $ ln -s ~/rails_apps/NinetyNine/public public_html 
    ```

    这是打算在您的虚拟主机上运行的东西，从命令提示符，在您的主目录顶部。

    在 bluehost 上查找文档以了解如何获取 SSH shell 访问权限。这就是您将输入命令的地方。

3.  但是，更一般地说，您要确保阅读有关您的提供商希望您如何上传应用程序的文档。Bluehost 似乎在这里有很好的文档：

    [https://my.bluehost.com/cgi/help/rails](https://my.bluehost.com/cgi/help/rails)

4.  为什么您提供的托管服务说它超出了范围。

    你是一个初学者，这在官方上是可以的。欢迎！

    但是，如果您问他们“我是在我的计算机上输入这些命令还是在您的计算机上输入这些命令”之类的问题，他们肯定会礼貌地回答这超出了范围；意思是——“我们不能通过这个牵着你”。如果你经营一个加油站，有人问你如何使用泵，你会告诉他们。但如果他们随后问“好的，但我是把油放在我的车里还是你的车里？” 您不愿意回答，因为缺少一些基本知识。

5.  那么我如何获得更多关于这些东西的指针和方向呢？

    很多方法。到目前为止，最好的办法是在自己的计算机上做尽可能多的事情。在您的情况下，您可以轻松设置自己的 Apache（Mac 和 Linux 经常附带它 - 很容易在 Windows 上安装），这将解决许多概念问题。

祝你好运！

# ibm-mq - MQ 客户端连接到 MQ 服务器

> ID：10377428
> 
> 赞同：0
> 
> 时间：2012-04-30T01:09:33.573
> 
> 标签：ibm-mq

我在我的计算机上安装了 MQ 客户端（7.0.1），并使用 c# 编写了一个应用程序来连接到远程 Websphere MQ 服务器。我在我的项目中引用了 amqmdnet.dll。下面是我的连接代码：

MQEnvironment.Host = ip 地址；

```
MQEnvironment.Channel = channel name;
MQEnvironment.Port = 1414;
MQQueueManager qmgr = new MQQueueManager("qm name"); 
```

但是当 new MQQueueManager() 时，为“IBM.WMO.MQ.QueueManager”抛出一个类型初始化器。我对这个例外感到非常困惑。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:12:58.923

你能给出异常的完整堆栈跟踪吗？当创建类实例失败时会发生类型初始化程序异常。这个异常基本上是一个内部异常的包装器。所以了解内部异常的细节是有帮助的。您可以将其`MQQueueManager qmgr = new MQQueueManager("qm name");`放在一个`try/catch`块中并打印完整的异常。

据我所知，如果未安装 WMQ 客户端库，通常会发生此异常。amqmdnet 程序集引用其他 WMQ 库，例如 amqxcs2.dll，如果未安装它们，则会引发此异常。

您可以使用 dspmqver -a 命令输出来检查已安装的内容。

# css - 中的 CSS 文本 没有按应有的方式扩展

> ID：10377431
> 
> 赞同：2
> 
> 时间：2012-04-30T01:10:06.953
> 
> 标签：css, width, expand

我在 div 中有一个段落，它不会扩展以适应其内容，而只会扩展到最长的单词。我没有设置包含 div 或段落的宽度，所以我不确定它为什么会这样？

有问题的网站是[http://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)鼠标悬停在绿色方块上

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:12:29.140

尝试使用

```
whitespace: nowrap; 
```

在那些`<p>`元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:18:23.710

你的包含`<div>`和你的`<p>`都设置为`position: absolute`. 两者都没有设置宽度，我认为这意味着它们“应该”在给定内容的情况下都变得尽可能窄，这就是您所看到的行为。（规范的相关部分是[10.3.7](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width)，尽管我不确定我是否理解它。）

（另一种方法是让他们保持静态定位时的宽度，即容器宽度的 100%。如果您绝对定位它们，很有可能会导致部分内容被定位 -屏幕。）

当你设置时`position: absolute`，你通常也应该设置一个宽度。如果您为 设置了一个值`left`，您可以尝试为`right`也设置一个值，而不是固定宽度。（我认为旧版本的 IE 可能会遇到问题。）

# android - 如何使用 PhoneGap 在内部数据库中读写？

> ID：10377436
> 
> 赞同：2
> 
> 时间：2012-04-30T01:10:51.330
> 
> 标签：android, html, sqlite, cordova

**我在“资产”**文件夹下有一个内部 SQLite 数据库，其中存储了 100 个用户名和相应的密码，我如何通过 phoneGap 访问它？
我读过了

*   [http://docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#Storage)

*   [从 Android 的 phonegap html 文件连接到 sqlite 数据库](https://stackoverflow.com/questions/9171662/connecting-to-sqlite-database-from-phonegap-html-file-for-android)

*   [http://wiki.phonegap.com/w/page/16494756/Adding-SQL-Database-support-to-your-iPhone-App](http://wiki.phonegap.com/w/page/16494756/Adding-SQL-Database-support-to-your-iPhone-App)

    我仍然无法弄清楚如何连接到已经创建的我的内部数据库，
    **dbname = userauth Tablename
    = reg
    parameters = usrnm，psw**
    ~~Any~~ Answer is高度鼓励

    **我在这里使用它**。
    ![登录屏幕](../Images/70f56bf8c7a4902129795c40eb180988.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T05:09:30.203

```
/**
 * Creates / Opens a connection to DB
 */
DB.openDB = function() {
    try {
        if (!window.openDatabase) {
            //alert('Cannot open database!');
        } else {
            var shortName = 'db_name';
            var version = '1.0';
            var displayName = 'DBNAME';
            var maxSize = (DEVICE_TYPE == DEVICE_ANDROID || DEVICE_TYPE == DEVICE_ANDROID_TAB) ? 5242880 : 1000000; ////819200; //65536; // in bytes // increased to support Android//163840; // 
            this.vocabDB = window.openDatabase(shortName, version, displayName, maxSize, this.DBCreated);
            this.DBSupported = true;
        }
    } catch(e) {
        //console.log("DB Error handling code goes here.");
        //console.log(e);
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:33:00.737

好吧，您可以对 assets 文件夹中的数据库执行 window.openDatabase()。您需要将其复制到正确的位置，以便 WebView 加载它。看看这个：

[http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence) )

发布为 Gaurav 为您提供了在 Android 和 iOS 上执行此操作的代码。

# complexity-theory - 上下文无关语言中的联合

> ID：10377438
> 
> 赞同：-1
> 
> 时间：2012-04-30T01:11:04.197
> 
> 标签：complexity-theory, automata, computation-theory, formal-languages

上下文无关语言集合的联合总是上下文无关的吗？证明你的答案......

我知道答案是肯定的，但我该如何证明呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:28:10.390

为了证明上下文无关语言的有限联合是上下文无关的，你只需要为联合语言构建一个上下文无关语法，就像你证明两种上下文无关语言的联合是上下文无关的一样.

如果 G1,...,GN 是您拥有的 N 种上下文无关语言的上下文无关文法，请重命名每个文法中的所有符号（添加下标以避免符号名称冲突），然后创建一个新文法 G包含来自 N 个语法的所有产生式，加上产生式：

S -> S1 | S2 | ... | 序列号

该语法生成​​联合语言，并且它是上下文无关的。

# iis - 如何通过 IIS 7.5 删除 HTTP ETag 标头？

> ID：10377450
> 
> 赞同：5
> 
> 时间：2012-04-30T01:15:06.657
> 
> 标签：iis, header, etag

我们希望删除 IIS 7.5 自动添加的 ETag 标头。没有任何在线建议对我们有用，这可能是由于 IIS 版本不同。

我们反复遇到的解决方案之一包括创建一个带有`""`as 值的新 ETag HTTP 响应标头。这种方法`, ""`改为在原始 ETag 之后添加。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T23:29:14.467

我已经能够使用[出站重写规则](http://thethoughtfulcoder.com/blog/70/How-to-remove-the-IIS-ETag-HTTP-header-in-IIS-7-75-75)删除 ETag HTTP 标头。

# html - 在 HTML5 中播放无限循环的视频加载

> ID：10377453
> 
> 赞同：112
> 
> 时间：2012-04-30T01:15:30.557
> 
> 标签：html, video, video-streaming, html5-video

我希望在 HTML5 页面中放置一个视频，该页面将在页面加载时开始播放，一旦完成，就会不间断地循环回到开头。视频也不应该有任何与之关联的控件，并且要么与所有“现代”浏览器兼容，要么可以选择 polyfill **。**

以前我会通过`Flash`and完成此操作`FLVPlayback`，但我更愿意避开`Flash`HTML5 领域。我在想我可以使用 javascript`setTimeout`来创建一个平滑的循环，但是我应该用什么来嵌入视频本身呢？有什么东西可以像这样流式传输视频`FLVPlayback`吗？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-05-02T13:55:36.987

**loop**属性应该这样做：

```
<video width="320" height="240" autoplay loop>
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

如果您对循环属性有问题（就像我们过去遇到的那样），请监听事件并在它触发时`videoEnd`调用该方法。`play()`

注 1：我不确定 Apple iPad/iPhone 上的行为，因为它们对`autoplay`.

注2：`loop="true"`并且 `autoplay="autoplay"`已弃用

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2018-11-12T08:57:48.930

截至 2018 年 4 月，Chrome（以及其他几个主要浏览器）现在也[需要](https://developers.google.com/web/updates/2017/09/autoplay-policy-changes)该`muted`属性。

因此，您应该使用

```
<video width="320" height="240" autoplay loop muted>
  <source src="movie.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-03-21T13:20:17.003

对于 iPhone，如果您还添加 playinline 则它可以工作：

```
<video width="320" height="240" autoplay loop muted playsinline>
  <source src="movie.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-24T17:39:52.357

您可以通过以下两种方式执行此操作：

1）`loop`在视频元素中使用属性（在第一个答案中提到）：

2）您可以使用`ended`媒体事件：

```
window.addEventListener('load', function(){
    var newVideo = document.getElementById('videoElementId');
    newVideo.addEventListener('ended', function() {
        this.currentTime = 0;
        this.play();
    }, false);

    newVideo.play();

}); 
```

# php - 我想用 jquery 从 url 中取值

> ID：10377458
> 
> 赞同：0
> 
> 时间：2012-04-30T01:16:06.720
> 
> 标签：php, jquery, mysql

我想从链接中获取 id 值，因为它不会改变：

```
<?php $se = mysql_query("select * from tee") or die(mysql_error());

while($row = mysql_fetch_object($se)){
echo'<a class="link" href="?id=" class="big-link" data-reveal-id="m'.$row->id.'">
    '.$row->id.'
</a>';  }                
?>

 <?php 

 $se1 = mysql_query("select * from tee") or die(mysql_error()); 
while($row1 = mysql_fetch_object($se1)) {
  echo '<div id="m'.$row1->id.'" class="reveal-modal">
    <h1>Reveal Modal Goodness</h1>
    <p>This is a default modal in all its glory, but any of the styles here can easily be changed in the CSS.</p>
    <a class="close-reveal-modal">&#215;</a>
</div>
';}?> 
```

第一个 div 是出现的数字，第二个 div 是灯箱内容

我想从链接中获取 id 值，因为它不会改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:32:20.873

如果要获取 html 数据属性值，可以使用以下内容：

```
$("a.big-link").data("reveal-id") 
```

# iphone - 使 UIBezierPath 的外边缘半透明

> ID：10377459
> 
> 赞同：1
> 
> 时间：2012-04-30T01:16:51.457
> 
> 标签：iphone, objective-c, transparent, uibezierpath, line-drawing

我目前正在 UIBezierPath 中绘制 UIImage，如下所示：

```
UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0);
UIBezierPath *polygonPath = [UIBezierPath bezierPath];

CGPoint curPoint = [self originalPoint:[[drawArray objectAtIndex:0]CGPointValue]];

// set the starting point for the lines
[polygonPath moveToPoint:curPoint];

// go through each point in drawArray and add it to polygonPath
for(NSInteger i = 1; i < [drawArray count]; i++) {
    curPoint = [self originalPoint:[[drawArray objectAtIndex:i]CGPointValue]];
    // scale point
    curPoint = CGPointMake(curPoint.x, curPoint.y);

    [polygonPath addLineToPoint:curPoint];
}

[polygonPath closePath];

[polygonPath addClip];

[image drawAtPoint:CGPointZero]; 
```

它效果很好，但是我希望图像具有“平滑边缘”，略微透明，因为我正在将它绘制在另一个图像之上......现在边缘非常粗糙。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:15:47.623

当您在图像上绘图时。所以我建议你使用下面的代码......

其中 YourImage 是您在其上绘制线条的 UIImage。

```
[[UIColor colorWithPatternImage:YourImage] set]; 
```

[有关更多信息，请访问此参考](http://www.apeth.com/iOSBook/ch15.html)

希望对你有帮助...

# linux - 如何以编程方式增加 LInux 上 UDP 套接字的每个套接字缓冲区？

> ID：10377460
> 
> 赞同：3
> 
> 时间：2012-04-30T01:16:54.113
> 
> 标签：linux, sockets, network-programming, udp

我试图了解在 Linux 上为我们的流式网络应用程序增加套接字缓冲区大小的正确方法。应用程序在多个 UDP 套接字上接收流向它的可变比特率数据。在流开始时数据量要大得多，我使用过：

```
# sar -n UDP 1 200 
```

表明 UDP 堆栈正在丢弃数据包，并且

```
# ss -un -pa 
```

表明每个套接字 Recv-Q 长度在`sysctl net.core.rmem_default`丢弃数据包之前增长到接近极限（124928\. from ）。这意味着应用程序根本无法跟上流的开始。在丢弃足够多的初始数据包后，数据速率会减慢，应用程序会赶上。Recv-Q 趋向于 0 并在此期间保持不变。

我可以通过大幅增加 rmem_default 值来解决数据包丢失问题，这会增加套接字缓冲区的大小，并让应用程序有时间从大的初始突发中恢复。我的理解是，这会更改系统上所有套接字的默认分配。我宁愿只增加特定 UDP 套接字的分配而不修改全局默认值。

我最初的策略是修改 rmem_max 并在每个单独的套接字上使用 setsockopt(SO_RCVBUF)。但是，这个[问题](https://stackoverflow.com/questions/2090850/specifying-udp-receive-buffer-size-at-runtime-in-linux)让我担心禁用所有套接字的 Linux 自动调整，而不仅仅是 UDP。

[udp(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/udp.7.html)描述了 udp_mem 设置，但我很困惑这些值如何与 rmem_default 和 rmem_max 值交互。它使用的语言是“所有套接字”，所以我怀疑这些设置适用于完整的 UDP 堆栈，而不是单个 UDP 套接字。

udp_rmem_min 是我正在寻找的设置吗？它似乎适用于单个套接字，但适用于系统上的所有 UDP 套接字。

有没有办法在不修改任何全局设置的情况下安全地增加我的应用程序中使用的特定 UDP 端口的套接字缓冲区长度？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:18:42.050

吉姆·盖蒂斯全副武装，为你而来。不要去睡觉。

网络数据包泛滥的解决方案几乎从不增加缓冲。为什么你的协议的排队策略没有退缩？如果您试图在流中发送如此多的数据（这是 TCP 的设计目的），为什么不能只使用 TCP。

# model-view-controller - UML MVC 模式 List 类使用

> ID：10377461
> 
> 赞同：0
> 
> 时间：2012-04-30T01:17:08.013
> 
> 标签：model-view-controller, uml, class-diagram

在为基于 MVC 模式的理论系统设计类图时，最好使用 List 类吗？

例如：

**使用列表类：**

![诊断 1](../Images/1767952165265374c6d077101a1662df.png)

**没有列表类：**

![诊断 2](../Images/bc43960267779976a60fe946223eab8f.png)

由于代码重复较少，我个人认为后者是一种更好的方法，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:14:39.023

我认为不需要列表类。您的控制器可以保存对模型的所有引用。

不管怎样，您的 UML 模型都有一个问题：在这两种情况下，您都有一个属性`customers:Customer[]`和一个组合链接。这意味着您有两个从控制器（或列表）到模型的引用。删除属性或链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T02:37:46.720

我建议您使用泳道，每个结构组件（模型/视图/控制器）一个泳道和一个单独的数据库泳道

一个示例示例如下所示

![在此处输入图像描述](../Images/8555331ed7d48df3c7d40a46239b0ddb.png)

# css - SASS：获取现有背景字符串的值并添加到它？

> ID：10377464
> 
> 赞同：0
> 
> 时间：2012-04-30T01:17:21.223
> 
> 标签：css, sass, compass-sass, mixins

我想在 SASS/Compass 中添加背景，不知道现有的背景字符串。我可以通过写入全局变量来完成，但这似乎很草率。

伪：

```
=mixin-add-icon
  // add a background icon
=mixin-add-gradient-from-color($color: blue !default)
  // add a background gradient
=mixin-add-texture-bg
  // add a bg texture

a
  background: blue
  +mixin-add-texture-bg
     // this should take the existing bg and add texture to it
  &.selected
    +mixin-add-gradient-from-color()
    +mixin-add-icon
       // these two should take the existing bgs strings from <a> and add to them 
```

我错过了一些明显的东西吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:27:27.453

目前没有办法通过 Sass 访问对象的属性，但 Sass 是一个开放项目，因此您可以随时询问开发人员是否可以在他们的[Github repo](https://github.com/nex3/sass/issues)上提供这样的功能。

# php - HTML - 按高度将图像拟合到表格单元格

> ID：10377468
> 
> 赞同：0
> 
> 时间：2012-04-30T01:18:02.863
> 
> 标签：php, html

好的，伙计们，我需要一些帮助...

我有一个表格单元格，需要用从 url 获取的图像填充。图像宽度/高度比与表格单元格之一不同 - 图像比单元格长。我需要以 100% 的高度将其放入，并修剪左右两端，使其适合宽度。

我是该网站的新手，所以我无法发布示例图片，但我希望我清楚自己的问题是什么......

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:28:19.937

最简单的解决方案是将其设置为表格单元格的背景图像，它将在视觉上自动裁剪。

如果要调整该背景图像的大小以使其完全覆盖表格单元格，同时保持其纵横比，则可以使用 css3 属性（有限的浏览器支持，IE ...）：

```
background-size: cover; 
```

完整代码：

```
background: url(/url/to/image) no-repeat center center;
background-size: cover;     // just for modern browsers 
```

# iphone - 尝试将 coredata 与对象类一起使用**不成功**

> ID：10377469
> 
> 赞同：0
> 
> 时间：2012-04-30T01:18:11.773
> 
> 标签：iphone, ios, core-data, nsobject

我在尝试设置要在我的 nsobject 类中使用的核心数据时完全迷失了方向。我正在将 coredata 添加到我现有的项目中，因此很难弄清楚这一切。因此，我开始使用 coredata 开始一个新项目，以获取在当前应用程序中实现 coredata 所需的示例代码。但是我想知道**我需要进行哪些更改才能将此 coredata 示例代码与对象类一起使用**而不是模板代码在做什么的视图控制器/表格视图？

为了帮助回答我的问题，我将解释我目前正在处理我的项目。

我有几个显示不同数据集的视图控制器，因为我有一个必须与之通信的自定义数据库引擎我有两个我制作的类。一个是一个请求类，它创建一个包含各种数据的数据包，这些数据使用 NSURLRequest/NSURLConnection 发送到 DBEngine。

我在我的自定义请求类中使用 NSURLRequest/NSURLConnection 委托，所以当我将我的请求发送到 DBEngine 时，我等到我在 connectionDidFinishLoading 委托方法中得到响应，然后我将响应数据传递给我的响应类，就像这样.. ..

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // depending on what sorta request is made will depend on how the data shuld be handled.
    if ([methodName isEqualToString:@"GetDBVersion"]) {
        //tbc
    }
    else if ([methodName isEqualToString:@"GetManuf"]) 
    { 
        [engineResponses GetManuf:receivedData];
    }
    else if ([methodName isEqualToString:@"GetNonM"]) 
    {
        [engineResponses GetNonM:receivedData RestrictionID:RestrictionID];
    }        
} 
```

通过这样做，我正在创建我的 engineResponses 类的一个新实例，这没关系，直到我尝试将应用程序委托的上下文传递给同一个类，从而创建另一个等于不工作的实例......

所以如上所述，我想知道如何编辑模板代码以对我有利......我希望我的解释很清楚我刚刚花了最后一个小时试图让这个问题完美，因为我已经花了最近两天追着我的尾巴试图弄清楚这些东西..这是我第一次使用coredata，我只是发现很难掌握它，因为我似乎以一种非常规的方式使用它......

任何帮助将不胜感激..如果您需要更多代码示例或更好的解释，请询问..我会尽我所能获得帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:04:37.807

好的，所以我发现问题在于声明同一个对象的多个实例。所以我所要做的就是使用单例设计模式来让它完美地工作。

很多人不喜欢单身，但我不知道如何解决这个问题？？？？任何建议将不胜感激。

我也知道这很有效，因为我已经通过在 appdelegate 中记录 storeURL 来检查数据库，然后将该目录复制粘贴到 goto 文件中 - 然后在 xcode 中打开 sqlite db ..所有值都在那里完美。

# javascript - 为什么在 Greasemonkey 示例中这个 jQuery 会触发 alert() 而不是 console.log()？

> ID：10377473
> 
> 赞同：1
> 
> 时间：2012-04-30T01:18:31.317
> 
> 标签：javascript, jquery, firefox, console, firebug

对于此测试 Greasemonkey UserScript，会弹出警报，但 Firebug 控制台不会记录任何内容。
这是 Firefox 12.0 中的 Greasemonkey 0.9.18 和 Firebug 1.9.1。

```
// ==UserScript==
// @name           test
// @namespace      tester12354
// @include        *
// @require        http://code.jquery.com/jquery-latest.min.js
// ==/UserScript==

(function($) {
    $.fn.tester1 = function(test) {
        alert(test);
        console.log(test);
    }
}(jQuery));

$.extend({
    tester2: function(test) {
        alert(test);
        console.log(test);
    }
});

alert($().jquery)
console.log($().jquery) 

$().tester1('from tester1');
$.tester2('from tester2'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:07:52.863

正如在[GreaseMonkey 手册](http://wiki.greasespot.net/UnsafeWindow)中所解释的那样，在 GreaseMonkey 脚本中，脚本的全局上下文不是浏览器的真实窗口对象（与在页面上执行的实际脚本不同），而是具有相同 API 的窗口对象的虚拟版本。

该`console`对象是真实窗口上的全局变量，因此无法从 GreaseMonkey（或至少从 GreaseMonkey 上的 jQuery）访问。

`console`有关GreaseMonkey 下的内容以及如何记录来自 GreaseMonkey 的消息的说明，请参阅此页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:20:18.817

如果页面本身没有任何`<script>`标签，可能是因为[Firebug 注入控制台对象的愚蠢方式](http://code.google.com/p/fbug/issues/detail?id=4978)。

# .net - Silverlight 5 AccessViolationException 重置文本框值时

> ID：10377477
> 
> 赞同：1
> 
> 时间：2012-04-30T01:19:33.733
> 
> 标签：.net, access-violation, silverlight-5.0

我基本上是在收集一个对象，并将其传递给一个方法，该方法使用该对象属性来填充文本框，并选择单选按钮、组合框项目和日期选择器日期......

我每隔三次或四次收到此错误并重新填充所有值：

AccessViolationException : 试图读取或写入受保护的内存。这通常表明其他内存已损坏。

有任何想法吗？

```
 Protected Sub PopulateForms(ByVal a As OMGService.OmgApp)

    Me.txtAppTitle.Text = a.Title

    Me.txtAppVersion.Text = a.Version

    Me.txtLicenseCount.Text = a.LicenseCount.ToString()

    Me.txtAppLocation.Text = a.AppLocation

    Me.txtDocLocation.Text = a.DocLocation

    Me.txtKey.Text = a.Key

    Me.txtAppNotes.Text = a.AppNotes

    Me.cBoxAppLicType.SelectedItem = Me.cBoxAppLicType.Items.Item(a.LicenseType)

    Me.radio64.IsChecked = a.IsX64

    Me.radio86.IsChecked = IIf(Me.radio64.IsChecked, False, True)

    Me.appInfoCreatedMsg.Text = String.Format("App Info Created: {0}", a.RecordCreated.ToString())

    Me.appInfoModifiedMsg.Text = String.Format("App Info Modified: {0}", a.LastModified.ToString())

    Me.txtOldPo.Text = a.OldCastlePO

    Me.txtAltTicket.Text = a.AltirisTicketNum

    Me.txtVendorName.Text = a.VendorName

    Me.txtRepName.Text = a.VendorRepName

    Me.txtRepPhone.Text = a.VendorRepPhone

    Me.txtVendorOrderNum.Text = a.VendorOrderNumber

    Me.txtTermsCond.Text = a.TermsConditions

    Me.DateOfPurchasePicker.SelectedDate = a.DateOfPurchase

    Me.OrderInfoCreatedMsg.Text = String.Format("Order Info Created: {0}", a.OrderRecordCreated)

    Me.OrderInfoModifiedMsg.Text = String.Format("Order Info Created: {0}", a.LastModified)

    Me.txtHiddenAppID.Text = a.AppID.ToString()

    Me.txtHiddenOrderId.Text = a.OrderID.ToString()

End Sub 
```

# string - NodeJS将字符串转换为变量

> ID：10377478
> 
> 赞同：1
> 
> 时间：2012-04-30T01:19:45.497
> 
> 标签：string, node.js, variables

我正在尝试使用字符串更新 nodejs 中变量的内容。在客户端javascript中，这是使用window[variable]完成的，但是因为nodejs中没有“window”。我尝试使用“this”和“module”，但是我得到的只是一个空对象。需要帮助谢谢

代码片段：

```
var myVariable = 'Hello';
var exchangeVariable = 'myVariable';

this[exchangeVariable] = 'Hello World';

/*
    myVariable should equal to 'Hello World!'
*/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T01:36:01.907

在我直接回答你的问题之前，这里有一些背景：

在 JavaScript 中，对象可以通过点符号 ( `someObj.property`) 进行索引，也可以像您在示例中所做的那样对它们进行索引 ( `someObj["property"]`)

在浏览器中，`window`是浏览器在其中评估您的代码的全局上下文。Node 使用一个[名为`global`](http://nodejs.org/docs/v0.6.15/api/globals.html#globals_global).

所以，如果你想引用一个全局定义的变量：

```
> var someGlobalVar = "hi";
> var myLookupKey = "someGlobalVar";
> global[myLookupKey]
'hi' 
```

**但是，这通常被认为是非常糟糕的做法**（在 Node 和浏览器中）。这有很多原因，但我只关注一个：

在 Node 中，模块（每个`require`d 文件）应该被视为不共享全局状态（并且在某些情况下，它们不能共享状态）。如果您尝试跨文件共享状态，我鼓励您通读节点文档的[模块部分。](http://nodejs.org/docs/v0.6.15/api/modules.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:31:31.310

您可以创建自己的变量散列或数组并自己分配变量。

```
var myVariable = "Hello";
var varArray = new Array()
    varArray["exchangeVariable"] = myVariable; 
```

# objective-c - 具有 UIPageControl 性能问题的自定义 UIScrollview

> ID：10377479
> 
> 赞同：0
> 
> 时间：2012-04-30T01:20:00.660
> 
> 标签：objective-c, ios

我有一个有 24 页的 UIPageControl。每个页面都有一个 UITableView。用户可以按下屏幕顶部的按钮来刷新数据（所有 24 页）。

在所有页面上调用 reloadData 会导致 3 秒延迟，但数据会刷新，并且它们可以滚动 UIPageControl 并查看新数据。在当前页面上调用 reloadData 速度很快，但只会更新相关页面。当用户转到下一页时，数据是旧的/错误的。

我的“修复”是实现一个系统，在用户滚动到页面之前，我在页面上调用 reloadData，一次一个，并跟踪哪些页面是新鲜的，哪些不是。

这是在具有相对大量页面的 UIPageControl 情况下的正确方法，还是我滥用 UIPageControl、使用不正确的方式刷新页面或其他方式。

我非常感谢您对解决此性能问题的建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:49:51.337

不要同时加载 24 个页面。由于用户一次只能看到一个页面，因此一次加载所有页面只是浪费资源。您应该检测用户所在的当前页面并仅重新加载该页面。如果您依赖 UIPageControl 来切换页面，请让您的代理监听事件

```
 UIControlEventValueChanged 
```

并加载您的下一页。如果您使用的是 UIScrollView，您还可以使用其委托方法来检测更改并重新加载相应的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:51:37.687

我不确定您所描述的是否是最佳实践，但我将假设您知道自己在做什么并且已经找到了可行的解决方案（不是每个人都会假设的）。

根据您的评论/问题，我不太确定，但是您似乎已经在尝试仅以惰性方式动态加载数据。如果是这样的话，我可能没什么可补充的，但这里有一些想法：

1.  在 Apple UIPageControl 示例中，每次 UIScrollView 委托调用其`scrollViewDidScroll:`方法时，它们都会加载当前页面、上一页和下一页（当然，处理第一页和最后一页的情况，其中上一页/下一页可能不存在）。也许您可以在这种方法中调用`[tableView reloadData]`.

2.  如果您发现每次页面加载时都必须加载所有 24 个页面，也许您可​​以`[tableView reloadData]`立即调用然后遍历其他页面，一次重新加载它们的数据，等待一个页面完成后再加载下一个页面。

数字 1 似​​乎是一种更快地准备好数据的优雅方式。
2 号对我来说就像一个非常笨拙的黑客，所以我真的想看看 1 号是否可行。

# php - 给定 unix 时间和时区名称，确定 DST 是否生效

> ID：10377480
> 
> 赞同：0
> 
> 时间：2012-04-30T01:20:17.027
> 
> 标签：php, timezone, dst

它说什么。语言是 PHP（在 Moodle 农场中）。时间戳可能在未来或过去。时区名称是一个标准的美国时区名称（如果它在美国以外的地方不起作用，我可以生存），可以使用 UTC 代替（同样，不需要在美国以外的地方工作）或类似的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:31:22.797

这应该会有所帮助：[PHP 日期 + 时间](http://www.php.net/manual/en/function.date.php)

# zend-framework - 发送保存的请求

> ID：10377481
> 
> 赞同：0
> 
> 时间：2012-04-30T01:20:24.977
> 
> 标签：zend-framework

我正在尝试在成功验证后发送保存的请求。

```
$this->getRequest()->setParams($requestObj->getUserParams())
                                                    ->setActionName($requestObj->getActionName())
                                                    ->setControllerName($requestObj->getControllerName())
                                                    ->setModuleName($requestObj->setModuleName())
                                                    ->setDispatched(false); 
```

我遇到的问题是布局的标题部分在渲染页面中出现了两次。我猜控制器动作助手已经为第一个请求分派了它们，然后又为第二个请求分派了它们。请帮助我如何避免这种情况出现两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:46:55.007

成功认证后，最好通过 http redirect 重定向用户。

```
$this->_helper->redirector('action','controller','module'); 
```

如果您愿意，可以通过执行禁用布局

```
Zend_Layout::getMvcInstance()->disableLayout(); 
```

# sql - SQL 命令的成本：选择与更新

> ID：10377482
> 
> 赞同：1
> 
> 时间：2012-04-30T01:20:25.310
> 
> 标签：sql

我正在编写一个访问数据库的程序，以确保值是最新的。例如（这不是我真正的问题），我有一个具有独特属性的对象。我想确保数据库保存了相同的唯一值。如果没有，我想更新数据库。这将在后台重复运行以确保值保持同步的脚本中发生。

所以我的问题是，选择值并比较然后更新是否更具成本效益。还是我应该自动更新？

我想 SELECT 和 compare 可能比一直更新更有效，但我不确定。

我应该和哪个一起去？

谢谢（如果这是一个愚蠢的问题，我深表歉意）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:23:17.197

我想您只需一个`UPDATE...WHERE`SQL 调用就可以做到这一点，而无需`SELECT`拨打电话。这是最快的方法。

```
UPDATE <table>
SET <data to update> 
WHERE <data is not up to date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T02:20:58.970

这是一个很好的问题。它需要对 SELECT 和 UPDATE 查询有充分的了解。

当您需要使用 WHERE 更新表中的现有记录时，使用 UPDATE 来指定需要更新的记录。所以最好使用 UPDATE 查询。

只要成本和时间有效，您可以使用不同的查询分析器来分析查询。

```
UPDATE table_name
SET value to update
WHERE some condition to update 
```

# asp.net - 将字典绑定到 GridView

> ID：10377486
> 
> 赞同：3
> 
> 时间：2012-04-30T01:21:31.940
> 
> 标签：asp.net, vb.net, data-binding, gridview, dictionary

参考这个线程：[计算同一时期发生的时间的算法](https://stackoverflow.com/questions/9975788/algorithm-to-count-the-time-that-occured-on-the-same-period)，如何将字典绑定到GridView？请看一下答案。

我试图添加一个 GridView 然后在代码隐藏上：`GV.DataSource = timeRangeCounts`并绑定它，但作为回报：

`The data source for GridView with id 'GV' did not have any properties or attributes from which to generate columns. Ensure that your data source has content.`

我怎样才能做到这一点？请看下面的代码：

* * *

第一个辅助类用于保存精确匹配和子范围匹配的计数：

```
Public Class TimeRangeCounter
    Property ExactRangeMatch as Integer
    Property SubRangeMatch as Integer
End Class 
```

第二个辅助类用于帮助字典了解一个键（类型`TimeRange`）与另一个键的不同之处：

```
Public Class TimeRangeEqualityComparer 
    Implements IEqualityComparer(Of TimeRange)

    Public Overloads Function Equals(left As TimeRange, right As TimeRange) _
            As Boolean Implements IEqualityComparer(Of TimeRange).Equals           

        Return left.ToString = right.ToString   
    End Function

    Public Overloads Function GetHashCode(range As TimeRange) _
            As Integer Implements IEqualityComparer(Of TimeRange).GetHashCode

        return range.ToString().GetHashCode()
    End Function

End Class 
```

第三个助手类存储范围的开始和结束时间：

```
Public Class TimeRange 
    Private readonly _start
    Private readonly _end

    Public Readonly Property Start 
        Get
           return _start
        End Get
    End Property

    Public Readonly Property [End] 
        Get
           return _end
        End Get
    End Property

    Public Sub New(start As String, [end] As string)
        Me._start = start
        Me._end = [end]
    End Sub

    Public Overrides Function ToString() as String
       Return String.Format("{0}-{1}", Start, [End])
    End Function

End Class 
```

所以使用上面我们应该可以写出这个算法：

```
Dim columnLength As Integer = 5
Dim timeStart() As String = {"08.00", "08.00", "10.00", "08.00", "08.00"}
Dim timeEnd() As String = {"08.50", "11.50", "11.00", "09.00", "08.50"}
Dim comparer As New TimeRangeEqualityComparer()
Dim timeRangeCounts As New Dictionary(Of TimeRange, TimeRangeCounter)(comparer)

'Count exact range matches while building dictionary
For i = 0 to columnLength - 1
  Dim key As TimeRange = New TimeRange(timeStart(i), timeEnd(i))

  If timeRangeCounts.ContainsKey(key)
      timeRangeCounts(key).ExactRangeMatch += 1
  Else
      Dim counter =  New TimeRangeCounter()
      counter.ExactRangeMatch = 1
      timeRangeCounts(key) = counter
  End If        

Next           

'Count sub ranges          
For Each kvp in timeRangeCounts
    For Each key in timeRangeCounts.Keys
        If kvp.key.Start >= key.Start AndAlso _ 
           kvp.Key.End <= key.End AndAlso _
           kvp.key.ToString <> key.ToString then           

            kvp.Value.SubRangeMatch += 1
        End If
    Next
Next

'Console.WriteLine(timeRangeCounts)
    GV.DataSource = timeRangeCounts
    GV.DataBind() 
```

网格视图：

```
<asp:GridView ID="GV" runat="server">
    <Columns>
        <asp:BoundField DataField="Key" HeaderText="Dictionary Key" />
        <asp:BoundField DataField="Value" HeaderText="Dictionary Value" />
    </Columns>
</asp:GridView> 
```

然后我尝试运行它，但结果如下：

```
Dictionary Key    Dictionary Value
08:00:00-08:50:00 TimeRangeCounter
08:00:00-09:40:00 TimeRangeCounter
10:00:00-11:40:00 TimeRangeCounter
...               ... 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T03:14:22.910

**这是一个网格视图**

```
 <asp:GridView ID="GV" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:BoundField DataField="Key" HeaderText="Dictionary Key" />
            <asp:BoundField DataField="Value" HeaderText="Dictionary Value" />
        </Columns>
    </asp:GridView> 
```

**这是将字典绑定到该 Gridview 的代码**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim D As New Dictionary(Of Integer, String)
    D.Add(1, "One")
    D.Add(2, "Two")
    D.Add(3, "Three")
    GV.DataSource = D
    GV.DataBind()
End Sub 
```

**这是输出**

![在此处输入图像描述](../Images/070f2728bb6b322cf5583899a3e1667c.png)

**如果我的某种类型的值是“MyClass”怎么办？**

Gridview 将执行每个“值”单元格的`ToString`功能。`MyClass`

在您的示例中，覆盖`ToString`此类上的函数

```
Public Class TimeRangeCounter
    Property ExactRangeMatch as Integer
    Property SubRangeMatch as Integer
End Class 
```

这是必要的，因为您的“价值”是时间`TimeRangeCounter`

**概括**

作者的代码有两个问题。

*   问题 1 产生了一个实际错误，并按照我的代码示例解决了
*   问题 2 是 Gridview 的“值”列中使用的自定义类缺少 ToString 函数

# c# - CellValueChanged 和复选框问题

> ID：10377491
> 
> 赞同：0
> 
> 时间：2012-04-30T01:23:14.087
> 
> 标签：c#, winforms

我正在使用下面的代码来检测单元格上的更改，然后进行更新，但我有一列用于删除的复选框。

问题是当我选中复选框时，这也意味着单元格值已更改。是否有解决方法，或者是否有停止/结束 cellvaluechanged 命令或仅针对某些单元格/行/列的 cellvaluechanged？

谢谢。

```
protected override void OnLoad(EventArgs e) 
    { 
        myDataGridView.CellValueChanged += new DataGridViewCellEventHandler( 
        myDataGridView_CellValueChanged); 
    } 

    private void myDataGridView_CellValueChanged( 
    object sender, DataGridViewCellEventArgs e) 
    { 
       //some very crude examples of actions you might want to perform when the event handler is triggered. 
       myObject.update(); 
       //or something else like 
       myObject.isUpdatable = true; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:39:50.100

您只需从 DataGridViewCellEventArgs 参数中检查 ColumnIndex。

[http://msdn.microsoft.com/fr-fr/library/system.windows.forms.datagridviewcelleventargs.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.datagridviewcelleventargs.aspx)

# php - 在 wp 插件中添加富文本编辑器

> ID：10377496
> 
> 赞同：1
> 
> 时间：2012-04-30T01:23:37.050
> 
> 标签：php, wordpress, plugins, tinymce, text-editor

我使用这些代码在我的 wp 插件中添加了一个 tinymce 文本编辑器：

```
add_action('admin_init', 'editor_admin_init');
add_action('admin_head', 'editor_admin_head');

function editor_admin_init(){
wp_enqueue_script('post');
wp_enqueue_script('word-count');
wp_enqueue_script('editor');
wp_enqueue_script('media-upload');
}

function editor_admin_head(){
wp_tiny_mce();
} 
```

并显示它：

```
the_editor("", "content", "", false); 
```

我的问题是，如果我在编辑器中输入一些东西。它在哪里保存数据？在哪张桌子上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:16:35.613

根据您设置插件的方式，这“可以”保存为一个选项，

IE：

```
<?php

// Grab our options, IF your using Options
// if not you can create and use your own tables to store data
$options = get_option('your_plugin_options');

// using a hidden field on the form called action with a value of 'save'    
if(isset($_POST['action']) && ($_POST['action']=='save')){

   $options['main_content'] = trim($_POST['content']);

   $newOptions = array( 'main_content' => $options['main_content'] );

   update_option('your_plugin_options', $newOptions );   
}
?> 
```

这将在 wordpress 表 wp_options 中创建一个选项

然后，如果您想引用该选项，您只需大声疾呼。

```
<?php
$options = get_option('your_plugin_options');
$new_content = $options['main_content'];

echo $options['main_content'];
//or
echo $new_content;
?> 
```

希望这会为您指明正确的方向。通读：

// 使用获取选项 [http://codex.wordpress.org/Function_Reference/get_option](http://codex.wordpress.org/Function_Reference/get_option)

// 更新选项 [http://codex.wordpress.org/Function_Reference/update_option](http://codex.wordpress.org/Function_Reference/update_option)

// 在你的插件中创建单独的表 [http://codex.wordpress.org/Creating_Tables_with_Plugins](http://codex.wordpress.org/Creating_Tables_with_Plugins)

祝马蒂好运

# magento - 为 Magento 配置 UPS 运输

> ID：10377497
> 
> 赞同：3
> 
> 时间：2012-04-30T01:23:40.730
> 
> 标签：magento, shipping, ups

有没有人在sales/orders/ship 下成功配置了ship UPS。我们正在尝试通过 UPS 的认证流程，您必须创建 5 个货件，其中一个货件会生成高价值报告？

取消任何四个 UPS 定义的“VOID”案例。

如果您正在制作 GIF 图像，请将以下 39 个文件连同您的 UPS 用户 ID 和访问密钥通过电子邮件发送至 uoltects@ups.com：

*   来自所有五个货件（20 个文件）的 ShipConfirm 和 ShipAccept XML 文档的请求和响应。
*   来自所有五批货物（5 个文件）的标签 GIF 图像。
*   至少一个货件的高价值报告的结果图像（1 个文件）。
*   包含所有五个货件（5 个文件）的标签缩放信息的 HTML 页面。
*   所有 Void XML 文档（8 个文件）的请求和响应。

如果您通过热敏打印机打印标签，则必须将标签发送到 UPS。请向 labelverify@ups.com 发送一封包含您的取件地址的电子邮件，通过 UPS 开发人员 API 支持小组提供的标签请求标签。至少包含一份带有热敏标签的货件的高价值报告。将以下 28 个文件连同您的 UPS 用户 ID 和访问密钥通过电子邮件发送至 uoltects@ups.com：

*   来自所有五个货件（20 个文件）的 ShipConfirm 和 ShipAccept XML 文档的请求和响应。
*   所有 Void XML 文档（8 个文件）的请求和响应。

UPS 将在 2 个工作日内通过电子邮件与您联系，通知您您的批准状态。授予后，将您的软件指向以下生产 URL，

**https://**预播以下链接

**onlinetools.ups.com/ups.app/xml/ShipConfirm**

**onlinetools.ups.com/ups.app/xml/ShipAccept**

**onlinetools.ups.com/ups.app/xml/Void**

**onlinetools.ups.com/ups.app/xml/LabelRecovery**

这显然不是非常用户友好，但 UPS 表示他们必须拥有这个才能继续。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:53:38.343

任何人都可以解释“所有 Void XML 文档（8 个文件）的请求和响应”是什么意思？我已经发送了所有列表点，但是……我不明白它们的含义。可能是取消请求/响应？它没有在 Magento 恕我直言中实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:05:59.060

我没有使用过这个扩展，但它声称从 Magento 中创建 UPS 标签：http: [//www.infomodus.com/ups-shipping-labels-manager-for-magento-advanced.html](http://www.infomodus.com/ups-shipping-labels-manager-for-magento-advanced.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:18:08.060

听起来您正在尝试通过 Magneto 中的 UPS 运输模块生成运输标签。您应该知道 Magento 附带的 UPS 运输模块只提供运费报价。它不允许创建标签。

如果您确实有一个允许您创建标签的扩展程序，您将必须创建适合 UPS 正在寻找的场景的订单，以便您可以获准创建可用标签（去掉 SAMPLE 中的单词条码）。

或者（UPS 可能不同意我的观点），您可以使用库来生成满足 UPS 要求的标签。只要知道这样做，您就可以绕过他们希望您首先进行测试的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T22:55:38.967

实际上，我和我的团队为我们正在构建的大型内部 Web 应用程序做了所有这些工作。

现在？使用 USB Mettler/Toledo 秤将 Shipworks3 和 UPS online world ship (UOLWS) 放在您发货区域的 Windows 计算机上，然后完成。UPS 会出来，安装它，将软件集成到您的计算机上，帮助您更便宜地购买电子秤，所有这些。如果你问他们，他们甚至会资助计算机系统。

Shipworks3 与在线 Magento 安装集成，可以自行打印标签。当 ShipWorks（或您在上面尝试）打印标签时，它们只是“包装”类型，并且没有一天结束。通过将 Shipworks 与 UOLWS 集成，您可以获得一天结束的报告，因此您的驾驶员只需进行一次扫描，然后您就可以使用 UOLWS 中的所有工具。

# javascript - 使用按钮 javascript 在 forloop 中创建 Cookie

> ID：10377504
> 
> 赞同：0
> 
> 时间：2012-04-30T01:25:16.970
> 
> 标签：javascript, button, cookies, for-loop

我正在尝试创建一个从 .js 数组加载产品的页面：

```
 var products= new Array( );

    products.push( {name: 'product01', photo: 'tshirt1', title: 'One Man Wolf Pack', price: '14.99', description: 'All Wolf Packs start with one'} );
    products.push( {name: 'product02', photo: 'tshirt2', title: 'Bear Arms', price: '14.99', description: 'Know your rights'} );
    products.push( {name: 'product03', photo: 'tshirt3', title: 'Accuracy', price: '19.99', description: 'The opposite of a fallacy'} );
    products.push( {name: 'product04', photo: 'tshirt4', title: 'HUMA', price: '19.99', description: 'A twist on sports'} );
    products.push( {name: 'product05', photo: 'tshirt5', title: 'Illuminati', price: '19.99', description: 'You went, now get the t-shirt'} );

    function get_product( name ) {
        for( var x = 0 ; x < products.length ; x++ ) {
            if( products[ x ].name == name ) {
                return products[ x ];
            }
        }
        return null;
    } 
```

我正在尝试使用 For 循环来逐步遍历每个项目以创建产品的简单布局

```
 window.onload = function ( ) {          
        load_page( );
    }

    function create_cookie( x, name1 ) {
        //if( this.onclick ){
            document.cookie = "details" + x + "=" + name1;
        //}
    }
    function load_page (  ){
        var holder = document.getElementById( "details" );
        for( var x = 0 ; x < products.length ; x++ ) {
            var li = document.createElement( "li" );

            var name1 = products[ x ].name;
            var href1 = document.createElement( "a" );
            href1.href = "details.html";    
            href1.id = products[ x ].name

            var image1 = document.createElement( "img" );
            image1.src = products[ x ].photo + ".jpg" ;

            var title1 = document.createTextNode( products[ x ].title );

            var bk1 = document.createElement( "br" );
            var bk2 = document.createElement( "br" );
            var hor = document.createElement( "hr" );

            href1.appendChild( image1 );    
            li.appendChild ( href1) ;
            li.appendChild( title1 );
            holder.appendChild( li );

            href1.onclick = create_cookie( x, name1 );

            alert(document.cookie);
        }   
    } 
```

我认为我的 onclick 事件会出现问题。如果我没有“If 语句”来检查“点击”事件，那么所有 cookie 都会自动加载。

也许我的按钮编码不正确。

任何有关如何使用按钮创建 cookie 正确创建此内容的见解将不胜感激。

谢谢！

~安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:30:23.120

您需要从这里更改您的点击处理程序代码行：

```
href1.onclick = create_cookie( x, name1 ); 
```

对此：

```
(function(x, name1) {
    href1.onclick = function() {create_cookie( x, name1 )};
}) (x, name1); 
```

你有两个不同的问题。首先，您为 onclick 分配了立即执行该`create_cookie(x, name1)`函数的结果，而不是对稍后在单击发生时调用的函数的引用。因此，cookie 将立即创建，点击时不会发生任何事情。

其次，当您在`for`循环中执行此类操作，但引用循环中正在更改的局部变量时`for`，它将不适用于稍后在 click 事件中执行的代码。那是因为`for`循环将在稍后完成，并且这些变量都将具有它们在`for`循环结束时的值。我推荐的代码通过在自执行函数闭包中捕获这些变量的值来解决这个问题，这样每个点击处理程序都有自己唯一的变量副本。还有其他方法可以解决此问题，但这是最简单的方法之一。

# iphone - iphone uiviewcontroller 不显示？

> ID：10377506
> 
> 赞同：0
> 
> 时间：2012-04-30T01:26:05.613
> 
> 标签：iphone, objective-c, xcode4.2

我是目标 C 和 XCode 4.2 的 iphone 开发新手。现在我成功地实例化了一个 UITableViewController，它可以遍历一个多级 json 数据树。但是，我在为叶页建立 UI 时遇到了麻烦。到目前为止，让我向您展示一段代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        int row = [indexPath row];
        NSString * currentrow = [NSString stringWithFormat:@"%d.",row];

        NSDictionary * item = [dataArray objectForKey:currentrow];
        NSDictionary * children = [item objectForKey:@"children"];
        if(children != nil)
        {
            uinavTableViewController *childView = [[uinavTableViewController alloc] init];
            childView.dataArray = children;
            [self.navigationController pushViewController:childView animated:YES]; 
        }
        else
        {
            uinavMenuItem * childView = [[uinavMenuItem alloc] init];
            //uinavSecondViewController * childView = [[uinavSecondViewController alloc] init];
            [self.navigationController pushViewController:childView animated:YES]; 
        }
} 
```

所以 if 语句的第一部分将检查是否有子节点，如果有则创建另一个 uinavTableViewController。这部分工作完美。

else 语句使用 uinavMenuItem 创建一个叶页。当我在模拟器中运行它时，叶子页面只是一个黑屏。我查看了我的 NSLog，可以确认 uinavMenuItem viewDidLoad 确实被解雇了。所以控制器代码工作正常，但我只是不知道如何链接到我在情节提要中绘制的视图。

我做错了什么导致 uinavMenuItem 无法显示我在 storyboardD 中绘制的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:36:27.357

当您想初始化在情节提要中制作的视图控制器时，请使用`UIStoryboard`'s `-instantiateViewControllerWithIdentifier`. 您在情节提要中视图控制器的属性下定义此标识符。您的视图已加载但为空，因为它没有加载情节提要中的内容。它可能正在调用`-loadView`，因为它找不到一个。

在此处输入标识符：

![在此处输入标识符](../Images/7aa919cf4d892122ecbc6fe9aae94fb8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:33:29.900

如果您使用的是故事板，则只需创建从 UITableViewController 到叶控制器的 segue 会更容易。您可以通过控制单击 table view 控制器然后将 push segue 拖到叶控制器来执行此操作。在 X-Code 侧边栏中，提供 segue 和标识符。

然后在您的代码中，`[self.navigationController pushViewController]`您可以使用：

```
if(children != nil)
{
    [self performSegueWithIdentifier: @"YourIdentifierHere" sender: self];
}
else
{ 
    [self [performSegueWithIdentifier: @"TheOtherIdentifier" sender: self];
} 
```

要将数据传递给 uinavTableViewController，请使用`prepareForSegue`执行 segue 的同一控制器中的方法：

```
- (void)prepareForSegue: (UIStoryboardSegue *)segue sender: (id)sender
{
    // Because you have two segues, you need to check the identifier
    if ([[segue identifier] isEqualToString: @"YourIdentifierHere"])
    {
        uinavTableViewController childView = (uinavTableViewController *)segue.destinationViewController;
        childView.dataArray = children;
    }
} 
```

# java - 如何将两个双精度值相加以形成另一个双精度值（强制转换）

> ID：10377507
> 
> 赞同：0
> 
> 时间：2012-04-30T01:26:39.920
> 
> 标签：java, eclipse, swing, logic

基本上，假设我有两个这样的双值：

```
 import javax.swing.JSpinner;
 import javax.swing.SpinnerNumberModel;

public class UI  {
    public static void main(String args[]){
        JSpinner stonesSpinnerImperial;
        JSpinner poundsSpinnerImperial;

        stonesSpinnerImperial = new JSpinner();
        poundsSpinnerImperial = new JSpinner();

        stonesSpinnerImperial.setModel(new SpinnerNumberModel(3, 3, 31, 1));
        poundsSpinnerImperial.setModel(new SpinnerNumberModel(0.0, 0.0, 13.0, 1.0));

        double imperial_stones = (double) stonesSpinnerImperial.getModel().getValue();
        double imperial_pounds = (double) poundsSpinnerImperial.getModel().getValue();
        double total_imperial_weight =  imperial_stones + imperial_pounds;

    }
} 
```

但是我收到以下错误： java.lang.Integer cannot be cast to java.lang.Double

我觉得我背后的逻辑是有缺陷的，对此问题的任何帮助将不胜感激。

编辑：我已经添加了我认为需要的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:42:13.920

为什么不简单地做：

```
 double imperial_stones = (Integer)stonesSpinnerImperial.getModel().getValue();
  double imperial_pounds = (Double) poundsSpinnerImperial.getModel().getValue();
  double total_imperial_weight = imperial_stones + imperial_pounds; 
```

请注意，您必须将返回的对象强制转换为数字包装类，而不是原始类，因此是 Double，而不是 double，以及 Integer，而不是 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T01:42:49.453

使用[`SpinnerNumberModel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SpinnerNumberModel.html#SpinnerNumberModel%28double,%20double,%20double,%20double%29)接受`double`值的 ；它在`Double`内部使用。例如，

```
new SpinnerNumberModel(3d, 3d, 31d, 1d) 
```

附录：根据您更新的代码，考虑转换为`Number`,

```
 double imperial_stones =
        ((Number)stonesSpinnerImperial.getModel().getValue()).doubleValue();
    double imperial_pounds =
        ((Number)poundsSpinnerImperial.getModel().getValue()).doubleValue(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T01:42:56.790

如果返回的动态类型`stonesSpinnerImperial.getModel().getValue()`是 an`Integer`并且您尝试将其强制转换为 a `Double`，您将得到 a `ClassCastException`。

> java.lang.Integer 不能转换为 java.lang.Double

在您的情况下，动态类型是一个，`Integer`因为您使用的是接受整数的构造函数。使用接受双精度的构造函数或将计算限制为整数算术。

# ios - MapView, MKAnnotation & Key-Value-Observing - 错误信息

> ID：10377508
> 
> 赞同：5
> 
> 时间：2012-04-30T01:26:44.947
> 
> 标签：ios, android-mapview, mkannotation, key-value-observing

今天我得到一个解释错误:)只有一个问题：我不明白:(那么当我得到这个错误时我做错了什么？

```
2012-04-30 03:04:35.737 Barz[21961:11903] An instance 0x7491960 of class BarAnnotation was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
    <NSKeyValueObservationInfo 0x74a18b0> (
    <NSKeyValueObservance 0x74a1700: Observer: 0x747f2b0, Key path: coordinate, Options: <New: NO, Old: NO, Prior: YES> Context: 0x0, Property: 0x74a11c0>
    ) 
```

并不是说我没有手动添加任何观察者，我只是在方法 viewWillAppear 中将“BarAnnotation”（我的自定义 MKAnnotation）删除并添加到我的 mapView？我也不太确定我是否理解谁在观察谁：我的 mapView 是否在观察所有的 MKAnnotations？还是我的 mapViewController（== mapView 的代表）在观察？如果我禁用拖动，为什么会这样？

希望有人可以帮助我并回答其中一些问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T02:41:29.450

我已经看到当注释的坐标无效时会发生这种情况。你检查过吗？

# java - 在 Java 中连续重绘

> ID：10377509
> 
> 赞同：1
> 
> 时间：2012-04-30T01:26:45.613
> 
> 标签：java, multithreading, swing, paint

我有一个使用线程的 Java 程序。在我的运行方法中，我有：

```
public void run() {
    while(thread != null){
        repaint();
        System.out.println("hi");
        try {  
            Thread.sleep(1000);  
        } catch (InterruptedException e) {  
            break;  
        }  
    }
}

public void paintComponent(Graphics g) {
    // painting stuff
} 
```

问题是执行了 run 方法，但`paintComponent`没有调用该部分。如果这不是继续重绘组件的正确方法，那么我应该如何重绘它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:56:21.267

Cal 从 Swing 重新绘制[`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。这不会阻塞 GUI，并且会在计时器中指定的任何时间间隔发生。当然，根据 Swing/AWT 绘画的性质，如果计时器设置的重复太快，则可能会合并对绘画的调用（实际上被忽略）。

此外，请确保该方法**是**一个覆盖使用：

```
@Override
public void paintComponent(Graphics g){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T01:28:33.817

您应该只在需要时（即更新它时）重新绘制组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T05:03:31.843

根据您在做什么，您可能也对此感兴趣。这取自Andrew Davison 的[**Killer Game Programming in Java**](http://fivedots.coe.psu.ac.th/~ad/jg/)。他谈到了*主动渲染*。您的游戏循环实际上是：

```
public void run()
{
  while (running)
  {
    gameUpdate();                             // game state is updated
    gameRender();                             // render to a buffer
    paintScreen();                            // draw buffer to screen

    try
    {
      Thread.sleep(20);
    }
    catch (InterruptedException e) {;}
  }
} 
```

而且，画屏的实现是（由 的子类定义`JComponent`）：

```
private void paintScreen()
{
  final Graphics2D g2d;

  try
  {
    g2d = (Graphics2D) this.getGraphics();
    if (g2d != null && (backbuffer != null))
    {
      g2d.drawImage(backbuffer, 0, 0, null);
    }

    Toolkit.getDefaultToolkit().sync();       // sync the display on some systems [1]
    g2d.dispose();
  }
  catch (Exception e)
  {
    ;
  }
} 
```

从书中：

> **[注 1]**调用`Tookkit.sync()`确保显示及时更新。这是 Linux 所必需的，它不会自动刷新其显示缓冲区。如果没有`sync()`调用，动画可能只会部分更新，从而产生“撕裂”效果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-01T03:05:36.410

对于 JFrame 等重量级容器，您必须调用 paint(g)。您为 JButton 之类的轻量级容器调用 paintComponent(g)。看看这是否有效。

# django - django - 检查过滤器是否返回查询集中的任何内容

> ID：10377510
> 
> 赞同：6
> 
> 时间：2012-04-30T01:26:59.410
> 
> 标签：django, django-errors

我是 Django 的新手。我需要检查查询集是否返回任何值，如果没有，则跳到循环中的下一项。我试过尝试.. 除了 ObjectDoesNotExist 并且那不起作用。如果过滤器没有找到任何东西，它会返回什么？我如何检查它？

这是现有的代码：

```
def assign_family_riders(leg):
    remaining_leg_riders = list(leg.riders.all())
    for car in CarAssignment.objects.filter(leg=leg):
        driver_family = car.driver.family
        try:
            riders = leg.riders.all().filter(family=driver_family)
        except ObjectDoesNotExist:
            continue
        for rider in riders:
            car.riders.add(rider)
            remaining_leg_riders.remove(rider)
    return remaining_leg_riders 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T01:35:00.120

您不需要专门检查。如果过滤器没有返回任何对象，将返回一个 EmptyQuerySet 并且永远不会进入 forloop。

```
riders = leg.riders.filter(family=driver_family)
for rider in riders:
    ... 
```

如果你真的想，你可以简单地做：

```
riders = leg.riders.filter(family=driver_family)
if riders:
    for rider in riders:
        ... 
```

仅当[`ObjectDoesNotExist`](https://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.DoesNotExist)您尝试使用以下方式检索特定记录时才会引发异常[`get()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get)：

```
try:
     rider = leg.riders.get(...)
except Rider.DoesNotExist:
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T02:00:19.447

正如蒂米在他的回答中所说，如果查询集没有返回任何内容，则不会进入您的循环。另一方面，如果您真的想知道过滤器将返回的记录数，您可以调用它的`count()`方法：`CarAssignment.objects.filter(leg=leg).count()` 这会在后台为您执行一个`SELECT COUNT(*)`而不检索任何记录。

请参阅[此处](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.count)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T21:47:06.297

最有效的方法是[`exists()`](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#exists)在迭代查询集之前使用查询集或执行任何其他可能与数据库执行更密集交互的操作。

文档中的一个例子；

> 查找具有唯一字段（例如**primary_key ）的模型是否是**[QuerySet](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#django.db.models.query.QuerySet)成员的最有效方法是：
> 
> ```
> entry = Entry.objects.get(pk=123)
> if some_queryset.filter(pk=entry.pk).exists():
>     print("Entry contained in queryset") 
> ```
> 
> 这将比以下需要评估和迭代整个查询集更快：
> 
> ```
> if entry in some_queryset:
>    print("Entry contained in QuerySet") 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T03:02:59.243

我很确定查询集什么都不返回。您可能可以使用`./manage.py shell`然后查看其中的内容来检查它`riders`。

# javascript - Mailto 标签将文本放入电子邮件的“收件人”字段，而不是移动设备上的主题

> ID：10377511
> 
> 赞同：0
> 
> 时间：2012-04-30T01:27:00.053
> 
> 标签：javascript, android

当我在我的桌面上使用我的移动应用程序 mailto 标签时，一切都很好，但是当我在我的 2.3 android 手机上访问我的应用程序时，我的电子邮件正文被塞进了“收件人”字段。移动浏览器和 mailto 标签有什么问题吗？我是否错误地设置了电子邮件？我已经确保电子邮件不能超过 1,000 个字符完全转义，我想不出还有什么会导致这种情况的。任何帮助将不胜感激。

```
document.location.href = "mailto:&body=" + escape(myMessage.replace(/[^\u0000-\u007F]/, "")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:33:05.440

我相信mailto标签正在做它应该做的事情并将它放在“To”字段中。有一个标签来指定主题行的内容。虽然我不知道语法我确定简单的谷歌搜索会为你找出正确的用法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:38:36.100

您可以选择先指定消息的收件人。

`mailto:recepient@gmail.com`

接下来，第一个参数必须在前面加上 a `?`：

`mailto:recepient@gmail.com?body=`

任何进一步的参数（如 to 或 subject）必须在前面加上`&`：

`mailto:recepient@gmail.com?body=yourbody&subject=example`

还必须是 URL 编码的`mailto:`，我假设您正在`escape()`函数中执行此操作。

更多信息在[About.com](http://email.about.com/od/mailtoemaillinks/a/mailto_elements.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:38:42.847

你需要类似的东西：

```
document.location.href = "mailto:?body=" + escape(myMessage.replace(/[^\u0000-\u007F]/, "")) 
```

注意问号。

# c++ - 布尔逻辑问题

> ID：10377519
> 
> 赞同：1
> 
> 时间：2012-04-30T01:28:11.427
> 
> 标签：c++, logic, boolean

我想知道是否有更短的写作方式

```
if (test != 'e' || test != 'd') 
```

我想像这样写

```
if (test != ('e' || 'd')) 
```

或类似的东西，所以我不必重复“测试！=”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:29:25.447

这就是语言的语法。您对此无能为力...如果您不喜欢它的外观，可以创建一个包含测试的布尔函数，然后调用该函数：

```
bool isEOrD(char test)
{
    return (test != 'e' || test != 'd')
}

...

if (isEOrD(test)) 
```

**编辑：**还有其他方法可以编写此代码（请参阅此答案的注释），但您的原始方式可能是最干净的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:32:12.293

您*可以*使用旧的 C 函数[`strchr`](http://www.cplusplus.com/reference/clibrary/cstring/strchr/)：

```
if (!strchr("de", test))
{
    // test is not 'd' or 'e'
} 
```

但我不知道这是否更好看……就我个人而言，我可能只有两个`!=`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:41:58.480

C 或 C++ 必须评估您以该语言的语法编写的表达式。表达式 ('e' 或 'd') 总是返回 true，因为 'or-ing' 是通过比较永远不会相同的值的位来完成的。编译器如何知道您想要什么，因为在 C/C++ 中，原始字符只是对整数的解释。这就是为什么你可以合法地写：

```
char aChar = 'a';
// or
char aChar = 0x41; // hex 41 = ascii 'a' 
```

并让他们都工作。

# web-crawler - Berkeley DB (JE) 越来越失控

> ID：10377526
> 
> 赞同：0
> 
> 时间：2012-04-30T01:29:45.700
> 
> 标签：web-crawler, berkeley-db, berkeley-db-je

我用 Java 编写了一个网络爬虫，我正在使用 Berkeley DB 来保存我爬取的页面（用于以后的索引等）。我将每个页面存储为一个网页对象，该对象具有以下实例字段：

```
@PrimaryKey
String url;
String docString;
Date lastVisited;
Date lastChecked;
ArrayList<String> stringLinks; 
```

最大的字段是 String docString，它是整个 HTML 内容（通常即使在大页面上也不超过 500KB），stringLinks 为页面上的每个出站链接保留一个 String。这不应该太大，最多是 100 个长度约 70 的字符串（甚至不是几 KB）。

我的爬行速度比每秒一页快一点，有时每秒 2 页，我看到伯克利数据库增长到每页大约 2-3MB，考虑到存储的数据，这绝对是疯狂的。数据库将网页存储在 EntityStore 中，我会定期同步它。无论我改变什么，我都无法让磁盘使用率下降！

这是一个相当大的问题，因为如果我运行多个爬虫实例（我已经将它构建为分布式），它们每个实例都会很快使用大量磁盘空间。如果这是线性增加，我可能会没事，但没有办法判断这个空间正在膨胀的函数是什么。我只知道它是实际数据空间的许多倍。

关于EntityStore，我有什么遗漏吗？

需要注意的一件事是，我既要从数据库中读取又要从数据库中写入，因此我无法设置任何标志以使其仅写入或其他内容。而且我不希望过多增加缓存大小，因为这是一个对堆空间敏感的环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:52:53.623

问题在于延迟写入。我必须启用延迟写入，然后在计时器上调用 env.sync() 以保持数据库处于检查状态，而不是在每次放置时调用 env.sync()。体积缩小了 30 多倍……

# javascript - 构建 WidgetCellSpan 时的 Axis 是什么

> ID：10377527
> 
> 赞同：0
> 
> 时间：2012-04-30T01:29:53.667
> 
> 标签：javascript, qooxdoo

构造 qx.ui.virtual.layer.WidgetCellSpan 时 qx.ui.virtual.core.Axis 的用途或用例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:05:10.490

Axis 负责将屏幕坐标映射到项目索引。只需查看“测试”演示： [http ://demo.qooxdoo.org/1.6/demobrowser/index.html?qxenv:demobrowser.withTests:true#virtual~CellSpan.html](http://demo.qooxdoo.org/1.6/demobrowser/index.html?qxenv:demobrowser.withTests:true#virtual~CellSpan.html)

但请记住，这是实验性代码，很可能会发生变化。

# java - 是否有类似于 .NET Microsoft Enterprise Library 的 Java 框架/程序集？

> ID：10377528
> 
> 赞同：2
> 
> 时间：2012-04-30T01:30:08.300
> 
> 标签：java, .net, sql-server, oracle, enterprise-library

我正在寻找一个类似于 Microsoft 编写的 Enterprise Library 程序集的 Java 程序集，其中包括加密、数据库、日志记录、安全性、验证和其他围绕 .NET 框架的应用程序块。它的主要目的是提高性能并提供一个 API，使构建应用程序变得更容易，因此应用程序开发人员不必重新发明核心库来执行常见任务。我主要是在寻找一个很好的程序集来连接到 Oracle 和 SQL Server（用于数据库），以及我上面提到的其他应用程序块。我将使用 Java 后端构建一堆报告工具，并希望有一个快速的开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:49:55.550

对于 Oracle 和 SQL Server，请为每一个查找 JDBC 驱动程序（此处为[SQL Server](http://msdn.microsoft.com/en-us/sqlserver/aa937724)和此处为[Oracle](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)）。

对于密码学，Java 已经捆绑了它，[单击此处获取文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)。

对于日志记录，有许多库：

*   [日志4j](http://logging.apache.org/log4j/)
*   [回溯](http://logback.qos.ch/)
*   [Java 日志记录 API](http://docs.oracle.com/javase/6/docs/api/java/util/logging/package-summary.html)

安全性和验证取决于您使用的应用程序类型，除了 Oracle 本身提供的选项之外，还有许多选项，您需要提供更多信息，您将构建什么样的应用程序，以便人们可以提供更好的答案。

此外，人们在社区中使用的大多数工具**都不是**由 Oracle 提供的（这是 Java 和 .Net 生态系统之间的主要区别），因此，您会发现开源项目中有很多针对相同问题的解决方案，而您将不得不思考，尝试并决定使用其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:44:11.357

我认为您在描述 Java EE。看：

*   [http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)

*   [http://www.oracle.com/technetwork/java/javaee/overview/index.html](http://www.oracle.com/technetwork/java/javaee/overview/index.html)

# facebook - Facebook OAuth 2.0 / 连接

> ID：10377530
> 
> 赞同：0
> 
> 时间：2012-04-30T01:30:27.603
> 
> 标签：facebook, facebook-graph-api

我开始在我的网站中实施 Facebook api..

我遇到麻烦的地方是理解 oauth api。也许这安装了正确的api？

基本上，我要做的是允许用户登录/注册 Facebook，并将该信息作为新用户存储在我的数据库中，因为我将以此创建个人资料。我还希望用户能够使用他的凭据登录或不使用 Facebook。我知道他必须在我的网站上创建一个密码。存储他的信息是否实用.. 姓名地址电子邮件和其他信息。

我对 api 很困惑，需要帮助。通读文档我找不到解释的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:10:48.907

查看**[如何](https://developers.facebook.com/docs/guides/web/#login)**在您的网站上使用 facebook 登录系统对用户进行身份验证

关于您关于存储电子邮件的问题，请查看此处提到的Facebook**[政策](https://developers.facebook.com/policy/)**

使用[图形 api](https://developers.facebook.com/docs/reference/api/)访问用户详细信息和其他内容

希望这可以帮助

# html - 网站在 Firefox 中看起来很糟糕，是因为我使用的是公共 Dropbox 网址吗？

> ID：10377531
> 
> 赞同：0
> 
> 时间：2012-04-30T01:30:44.883
> 
> 标签：html, firefox, web, stylesheet, dropbox

当我使用 Firefox 时，我很难理解为什么我的样式会如此扭曲。该网站是[http://shehunter.joshmu.com](http://shehunter.joshmu.com)

这是否与该网站目前正在通过公共保管箱 url 工作的事实有关？

字体、定位和背景透明度似乎都是错误的。

在 chrome 和 safari 中运行良好。

* * *

编辑-当我单击信息选项卡时，文本向左移动了很远...在“音乐”部分中出现了透明的蓝色背景...

* * *

更新-信息部分解决了位置：绝对欢呼@sarcastyx！但是在 Firefox 中仍然存在问题，它在网站的音乐部分接受谷歌网络字体和背景透明度问题。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:46:04.803

对我来说在Firefox中看起来不错。截屏： ![在此处输入图像描述](../Images/60857554da6d74a057937c18270a6fca.png)

# android - 如何阅读和理解堆栈跟踪？

> ID：10377532
> 
> 赞同：0
> 
> 时间：2012-04-30T01:30:59.313
> 
> 标签：android, nullpointerexception, stack-trace

我在市场上有一些应用程序，最近我收到了一些提供堆栈跟踪的错误报告。我不太明白如何阅读和理解它们，所以我实际上可以解决这个问题。

下面是其中的一条痕迹：

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.emsprotocols.nycemsprotocols/com.emsprotocols.nycemsprotocols.ConnectivitCheck}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at     com.emsprotocols.nycemsprotocols.ConnectivityCheck.onCreate(ConnectivityCheck.java:21)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
... 11 more 
```

我不确定这是 1 个错误还是 2 个甚至更多。而且我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:44:23.640

调试是为了找到原因，所以寻找这一行：

```
Caused by: java.lang.NullPointerException
at     com.emsprotocols.nycemsprotocols.ConnectivityCheck.onCreate(ConnectivityCheck.java:21) 
```

然后查看该文件的第 21 行。对于没有指针的语言，Java 肯定会出现很多空指针异常。通常发生的情况是，在底层实现中，对象变成了数据结构的指针。当您调用对象的方法时，即

```
myObject.spindle() 
```

VM 跟随跟踪 myObject 的指针，期望找到一个数据结构，并期望该结构中的一个整体将其引导至称为主轴（）的方法的代码。

问题是如果 myObject 为空，那么实际上没有数据结构可用于查找主轴（）方法。你已经要求它做不可能的事——没有异常处理，程序就无法继续。

最常见的是，一个对象为 null 的原因是您已经从其他东西中分配了您的对象，而该对象无法给您一个，因此返回 null。

解决您的问题通常遵循以下三个课程中的一个或多个：

*   找出为什么你的对象为空，并修复它
*   在您尝试调用其任何方法或访问其字段之前测试您的对象是否不为空
*   处理异常——即告诉程序在遇到这种情况时如何恢复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T01:34:55.007

`com.emsprotocols.nycemsprotocols.ConnectivitCheck`由于 NullPointerException ，应用程序无法加载活动：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.emsprotocols.nycemsprotocols/com.emsprotocols.nycemsprotocols.ConnectivitCheck}：java.lang.NullPointerException

在第 21 行的 onCreate 方法中引发了异常：

> 引起：
> com.emsprotocols.nycemsprotocols.ConnectivityCheck.onCreate(ConnectivityCheck.java:21)处的 java.lang.NullPointerException

这实际上是一个错误，它被另一个错误包裹（被`NullPointerException`包裹`RuntimeException`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T01:35:39.717

在之后找到你的包名`at`，这里是

```
at     com.emsprotocols.nycemsprotocols.ConnectivityCheck.onCreate(ConnectivityCheck.java:21) 
```

这意味着第 21 行`ConnectivityCheck.java`有问题，请尝试修复它并继续。

# gmail - Zend-mail 发送邮件连接超时错误

> ID：10377533
> 
> 赞同：0
> 
> 时间：2012-04-30T01:31:07.607
> 
> 标签：gmail, zend-mail

我正在尝试设置一个向新成员发送欢迎电子邮件的注册表单。该表单在我的本地主机上工作得很好，但是当尝试将其上传到远程服务器时，当使用提交按钮时，我在页面顶部收到“连接超时”错误。

我正在使用我老师的远程服务器，所以我只能有限地访问服务器。

```
$mailhost = 'smtp.gmail.com';
$mailconfig = array('auth'      => 'login',
                    'username'  => 'myemail@gmail.com',
                    'password'  => 'xxxxxxxx',
                    'ssl'       => 'ssl',
                    'port'      => '465');
$transport = new Zend_Mail_Transport_Smtp($mailhost, $mailconfig);
Zend_Mail::setDefaultTransport($transport);

$mail = new Zend_Mail('UTF-8');
      $mail->setBodyText($text, 'UTF-8');
      $mail->setBodyHtml($html, 'UTF-8');
      $mail->setFrom('myemail@gmail.com', 'from me');
      $mail->addTo($email, $name);
      $mail->setSubject('Welcome to the page');
      $success = $mail->send();
      if(!$success) {
        $errors = true;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:18:59.153

我发现我老师的服务器阻止了导致超时错误的 smtp。

# css - 表格仅使用 CSS 展开行

> ID：10377534
> 
> 赞同：2
> 
> 时间：2012-04-30T01:31:16.083
> 
> 标签：css, html-table

我有一些这样的标记：

```
<table>
    <thead>
        <tr>
            <th>Col1</th>
            <th>Col2</th>
        <tr>
    </thead>  

    <tbody>
        <tr class="main">
            <td>some content</td>
            <td>some content2</td>
        <tr>
        <tr class="more">
            <td colspan="2">
                <div class="more-link"><a tabindex="0" href="#">Show more info</a></div>
                <div class="more-info">
                    more info goes here
                </div>
            </td>
        <tr>
    </tbody>
</table> 
```

还有一些 CSS：

```
td, th{
    border: 1px solid red;
}

.main td{
    height: 50px;
    width: 300px;
    vertical-align: top;
}

.main td{
 border-bottom: 0;   
}

.more td{
    border-top: 0;
    height: 0;
}

.more-link{
    position: relative;
    top: -30px;
}

.more-link:focus + div, .more-link:active + div{
    height: auto;
} 
```

我想要做的是，当单击“显示更多信息”链接时，名为“更多”的表格行会展开。

问题：

*   如果我将`td`内部`more`的高度设置为 0，则没有效果；
*   `more-info`如果我将div 的高度设置为`0`, 或`display:none`，表格行仍然占用空间。

我想只用 CSS 来做到这一点，可以使用 javascript 来使它更好，但基础知识应该在没有 javascript 的情况下工作。

单击链接时，如何使我的`more`行展开`show more info`？

还有一个小提琴：http: [//jsfiddle.net/QJr2e/](http://jsfiddle.net/QJr2e/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:15:22.633

知道了！

我没有使用`position:relative`移动“显示更多信息”链接，而是给了它一个`float:left`. `margin`这使我可以在重新组织流程的同时将其移动到任何我想使用的地方。

我没有使用`height`，而是设置`more-info`为`display:none`，然后单击“显示更多信息”链接时：

```
.more-link:active + div, .more-link:focus + div{
    display: block;
} 
```

# c# - 根据另一个列表中的真实条件从通用列表中选择项目

> ID：10377536
> 
> 赞同：3
> 
> 时间：2012-04-30T01:31:26.880
> 
> 标签：c#, linq, lambda

我想知道下面的问题是否有任何 LINQ/Lambda 表达式解决方案。

我有 2 个通用列表

# 清单 1

```
public class Data
{
  public string ID { get; set;}
  public string Package { get; set;}
}

List<Data> listData = new List<Data>();

Data data1 =  new Data { ID = "1", Package = "Test" };
Data data2 =  new Data { ID = "2", Package = "Test2" };
Data data3 =  new Data { ID = "3", Package = "Test2" };
Data data4 =  new Data { ID = "4", Package = "Test4" };

listData.Add(data1);
listData.Add(data2);
listData.Add(data3);
listData.Add(data4); 
```

# 清单 2

```
List<int> listFilter =  List<int>();

listFilter.Add(1);
listFilter.Add(0);
listFilter.Add(0);
listFilter.Add(1); 
```

我想根据“listFilter”中的真实（1）标准过滤“listData”。对于上面的示例，我必须能够将 data1 和 data4 拉到一个新列表中。

目前，我正在使用 for 循环来实现这一点，如下所示。

```
List<Data> listResult =  new List<Data>();
for(int index=0; index<listData.Count; index++)
{
    if(listFilter[index]==1)
    {
       listResult.Add(listData[index]);
    }

} 
```

如果有人能告诉我使用 LINQ 或 Lambda 表达式来实现这一点，我将不胜感激。

谢谢

巴兰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T01:35:59.347

```
var results = listData.Where((item, index) => listFilter[index] == 1); 
```

请注意，如果 listData 比 listFilter 长，这将失败，与您的代码相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T01:35:06.960

在一般情况下，您可以执行以下操作：

```
var result = listData.Zip(listFilter, (data, filter) 
                          => new { Data = data, Filter = filter })
                     .Where(tuple => tuple.Filter == 1)
                     .Select(tuple => tuple.Data)
                     .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:38:32.190

```
var listResult = listData
    .Where((data, index) => listFilter[index] == 1)
    .ToList(); 
```

参考：

[http://msdn.microsoft.com/en-us/library/bb548547.aspx](http://msdn.microsoft.com/en-us/library/bb548547.aspx)

# matlab - How to use Linear Discriminant Analysis for projection in MatLab?

> ID：10377542
> 
> 赞同：2
> 
> 时间：2012-04-30T01:32:38.593
> 
> 标签：matlab, dimensionality-reduction

Is it possible to project a multidimensional data to a 2D map using LDA? It seems that the tool Matlab provided does not provide such functions...

Thanks for reply. My data now is having 6 classes, so does it mean that if I have 6 classes, I can only reduce it to 5 dimensions? Or can it be done in a similar way with PCA, which takes the top 2 eigenvalues, and use these 2 for projection? The PCA does not quite work for my problem as an unsupervised approach, so I am wondering if LDA might help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:45:04.527

LDA isn't really meant for dimensionality-reduction strictly speaking, especially in the cases where all your data belongs to one class. It's meant to come up with a single linear projection that is the most discriminative between between two classes. Thus, there's no real natural way to do this using LDA.

If your data all belongs to the same class, then you might be interested more in [PCA (Principcal Component Analysis)](http://en.wikipedia.org/wiki/Principal_component_analysis), which gives you the most important directions for the data ranked in order of importance. Other methods exist as well [like ISOMAP](http://en.wikipedia.org/wiki/Isomap) (as mentioned by EMS in the comments) or [self-organizing maps](http://en.wikipedia.org/wiki/Self-organizing_map).

As a side note, LDA can help you reduce dimensionality if you know that you have multi-class data. It can help you reduce dimensionality down to `k-1` dimensions if you have `k`-class data, but you didn't mention that this is the case.

EDIT: Credit goes to @EMS for helping to clarify this answer.

# c# - 表单设计器中的组件数组

> ID：10377543
> 
> 赞同：0
> 
> 时间：2012-04-30T01:32:50.810
> 
> 标签：c#, arrays, forms, components

Windows 窗体设计器中是否有任何好方法可以定义类似组件的数组（或其他集合）？您可以检查“GenerateMember”，它将在代码中为您提供一个唯一的命名成员以供参考，但是如果我希望该生成的成员成为某种列表之一，以便我可以轻松地遍历它们怎么办？我能想到的唯一方法是在加载时创建一个新列表，然后手动将所有已经生成的成员添加到该列表中，这既乏味又多余。我考虑过编辑生成这些组件的代码，但它在自动生成的“请勿修改”部分内，我担心我在那里所做的任何更改都会在我对表单进行其他更改时被覆盖。表单设计器是否没有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:10:59.327

如果我正确理解您的问题，您可以简单地将“this”（表单）转换为“Control”，然后检查它的“ControlCollection”属性 - 一个包含表单控件的集合。例如。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        var myControlList = ((Control)this).Controls;
    }
} 
```

除非我错过了什么……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:34:55.130

您可以将它们放在 Panel 中，然后遍历其控件。

# calculator - 将自定义键盘添加到文本字段

> ID：10377544
> 
> 赞同：0
> 
> 时间：2012-04-30T01:32:57.047
> 
> 标签：calculator, keypad

我需要弄清楚如何将自定义键盘添加到文本字段。我真正需要的是小数点和添加按钮以及普通数字和完成按钮。

任何线索任何人？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:36:33.653

看看这里：

[http://keith-wood.name/keypad.html](http://keith-wood.name/keypad.html)

它似乎非常灵活，并且允许本地化和自定义（不要忘记有些人使用十进制逗号而不是点）

![在此处输入图像描述](../Images/be8afad8a8cf430d0f30392b83355130.png)

# mongodb - Mongo DB：对象模式更改对文档设计的影响

> ID：10377556
> 
> 赞同：1
> 
> 时间：2012-04-30T01:34:55.367
> 
> 标签：mongodb

您如何处理 Mongo db 中的架构更改，例如，在重构后更改您的对象架构设计并影响文档架构。有没有办法更新文档架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T02:01:50.463

您可以在整个架构上运行更新，删除字段，或添加字段并将它们设置为计算值，如果这是您所得到的。

假设您有一个 x 字段，并且您想添加应设置为 x/2 的 ay 字段，您可以执行以下操作：

```
PRIMARY> db.test.insert({x:15});
PRIMARY> db.test.insert({x:30});
PRIMARY> db.test.insert({x:50}); 
PRIMARY> db.test.find();
{ "_id" : ObjectId("4f9df1ebed2b924eedb8cad9"), "x" : 15 }
{ "_id" : ObjectId("4f9df1eeed2b924eedb8cada"), "x" : 30 }
{ "_id" : ObjectId("4f9df1f1ed2b924eedb8cadb"), "x" : 50 }
PRIMARY> db.test.find().forEach(function(doc) { 
            doc.y = doc.x/2; 
            db.test.save(doc); 
         });
PRIMARY> db.test.find();
{ "_id" : ObjectId("4f9df1ebed2b924eedb8cad9"), "x" : 15, "y" : 7.5 }
{ "_id" : ObjectId("4f9df1eeed2b924eedb8cada"), "x" : 30, "y" : 15 }
{ "_id" : ObjectId("4f9df1f1ed2b924eedb8cadb"), "x" : 50, "y" : 25 } 
```

# android - 如何从移动图库中挑选图像到 android 应用程序中

> ID：10377557
> 
> 赞同：0
> 
> 时间：2012-04-30T01:34:58.610
> 
> 标签：android, android-layout

如何从图库中挑选图像到 android 应用程序中？

我需要从我的图库中浏览图像并为我的应用程序选择它们。如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:09:33.600

您需要对画廊使用意图（嗯，“画廊”）。

你可以在这里找到一个代码示例（我还没有这样做，但它看起来会起作用）： [http ://www.androidsnippets.com/get-file-path-of-gallery-image](http://www.androidsnippets.com/get-file-path-of-gallery-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:33:07.167

使用此代码：

```
fromGalleryButton.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            //takePhotoFromGallery = true;// edited

                            Intent intent = new Intent(); 
                            intent.setType("image/*"); 
                            intent.setAction(Intent.ACTION_GET_CONTENT);// 

                            startActivityForResult(Intent.createChooser(intent, "Select Picture"),10);

                        }
                    }); 
```

然后添加这个：

```
@Override 
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {     
        super.onActivityResult(requestCode, resultCode, data);     
        if (requestCode == 10 && resultCode == Activity.RESULT_OK) {             
            Uri contentUri = data.getData();          
            String[] proj = { MediaStore.Images.Media.DATA };         
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
            cursor.moveToFirst();         
            imagePath = cursor.getString(column_index);           

            tempBitmap = BitmapFactory.decodeFile(imagePath); // this is your image

        } 
} 
```

# javascript - jQuery 注入 click()

> ID：10377564
> 
> 赞同：0
> 
> 时间：2012-04-30T01:36:10.727
> 
> 标签：javascript, jquery, onclick, browser-extension

我目前正在构建一个浏览器扩展程序，将 javascript/jquery 注入某些页面，并且我遇到了一个奇怪的问题，强制`.click()`事件无法从我的注入代码中工作。奇怪的是，如果我从控制台 js 控制台进行调用，它完全可以正常工作。

我真的不明白问题是什么。看来我所有的其他电话都工作正常。我可以使用绑定到单击事件`.click(function(){...})`（很明显我的 jquery 已正确加载），并在单击内容时调用方法（很明显我的 jquery 已正确加载），但第二次我尝试强制单击，调用只是不通过。

任何人都可以解释发生了什么，或者我可以解决它的方法吗？

（我无法重新创建这个问题，因为这个问题显然与在扩展中注入 js 有关）

这是我能做的最好的娱乐：

```
//I have tried all of these separately 
console.log($("#this_is_an_id"))  //This returns the correct element

$("#this_is_an_id").click()       //This does not work at all

$("#this_is_an_id").trigger("click") //I have also tried this without success

$("#this_is_an_id").click(function(){ console.log("stuff") }) //This works fine. 
```

真的，在这一点上，我假设这不是我的错，而是浏览器注入脚本的方法有问题。我正在寻找解决此问题的真正hackey方法，我也尝试过`eval('$("#this_is_an_id").trigger("click")')`。有人有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:58:20.110

我终于在这里找到了一个非常好的答案/解决方法： [Trigger events from Firefox browser extension？](https://stackoverflow.com/questions/3042140/trigger-events-from-firefox-browser-extension)

来自用户[cms](https://stackoverflow.com/users/5445/cms)：

> 首先，对于点击事件，你需要创建一个MouseEvents类型的事件对象，而不是HTMLEvents，并且使用event.initMouseEvent而不是event.initEvent。
> 
> 要从 XUL 覆盖访问 Firefox 的当前选项卡的文档，您可以使用 content.document 属性，但由于您已经可以访问要单击的 DOM 元素，您可以使用 Node.ownerDocument 属性，它将引用此节点的顶级文档对象。
> 
> 我做了一个简单的函数来模拟 MouseEvents：

```
function triggerMouseEvent(element, eventName, userOptions) {
  var options = { // defaults
    clientX: 0, clientY: 0, button: 0,
    ctrlKey: false, altKey: false, shiftKey: false,
    metaKey: false, bubbles: true, cancelable: true
     // create event object:
  }, event = element.ownerDocument.createEvent("MouseEvents");

  if (!/^(?:click|mouse(?:down|up|over|move|out))$/.test(eventName)) {
    throw new Error("Only MouseEvents supported");
  }

  if (typeof userOptions != 'undefined'){ // set the userOptions
    for (var prop in userOptions) {
      if (userOptions.hasOwnProperty(prop))
        options[prop] = userOptions[prop];
    }
  }
  // initialize the event object
  event.initMouseEvent(eventName, options.bubbles, options.cancelable,
                       element.ownerDocument.defaultView,  options.button,
                       options.clientX, options.clientY, options.clientX,
                       options.clientY, options.ctrlKey, options.altKey,
                       options.shiftKey, options.metaKey, options.button,
                       element);
  // dispatch!
  element.dispatchEvent(event);
} 
```

> 用法： triggerMouseEvent(element, 'click');
> 
> 在此处检查测试用法。
> 
> 如果要更改事件对象属性的值，也可以将对象作为第三个参数传递。

非常感谢您的回答。O_O

# php - 如何使用 json_encode

> ID：10377570
> 
> 赞同：7
> 
> 时间：2012-04-30T01:36:44.120
> 
> 标签：php, jquery, json, highcharts

我正在处理带有动态数据（从数据库中检索到的值）的 highcharts。通过编写查询，我能够从表中检索以下数据

```
Item   2011   2012
pen     5      7
pencil  4      20
eraser  6      43 
```

我想将上述信息存储在以下结构中并将其传递到另一个页面

```
[{ name:'pen', data: [5,7]},{ name:'pencil', data: [4,20]},{ name:'eraser', data: [6,43]}]"; 
```

我想将上述数据推送到下钻高图。

有没有办法以这种格式生成？我试过使用 json_encode 但无法成功。我可以使用 json_encode 来实现吗？

**更新** 我已经尝试过这种方式

```
while($row = mysql_fetch_assoc($result))
  {
  $rows[]= $row;

  }
echo json_encode($rows); 
```

并得到

```
[{"Item":"pen","2011":"5","2012":"7"},{"Item":"pencil","2011":"4","2012":"20"},{"Item":"eraser","2011":"6","2012":"43"}] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T01:44:41.157

`json_encode`是一种将数组转换为 JSON 格式的便捷方法。要获得您提供的输出，您将需要一个数组数组。每个子数组都有键“name”和“data”，其中“name”是 Item 列，“data”是另一个包含 2011 和 2012 值的数组。

```
$results = mysql_query("...");
$arr = array();

while ($row = mysql_fetch_assoc($results))
{
    $name = $row['Item'];
    $data = array($row['2011'], $row['2012']);

    $arr[] = array('name' => $name, 'data' => $data);
}

echo json_encode($arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T01:38:17.167

1.  循环遍历数据库结果并将结果放入数组中
2.  JSON编码数组

# ruby-on-rails - 基于列中的值的 Rails 路由

> ID：10377571
> 
> 赞同：0
> 
> 时间：2012-04-30T01:36:48.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

导轨 3.1。我有一张桌子`places`。它有一个名为的列`type`，其具有诸如`cafe`、`restaurant`等的值。每行只有一个值。

在我的路线中，我将资源定义为：

```
resources :places 
```

网址是：

```
http://domain.com/places/123?type=cafe 
```

我总是`type`在我的 URL 中附加 ，因为我使用它来确定要突出显示的导航菜单。

现在，我想创建一个更友好的 URL。如何创建读取以下任一内容的 URL：

```
1\. http://domain.com/places/cafe/123
2\. http://domain.com/cafe/123 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:55:50.507

有两种类型的路线 - 资源丰富的和非资源丰富的。听起来您正试图在两者之间进行混合。不幸的是，资源丰富的路由 URL 无法像您尝试做的那样自定义 via `resources`，但您可以添加其他路由以匹配您尝试创建的 URL。

为此，您必须创建非资源性路由，例如：

```
resources :places, :only => [:create, :update, :destroy]
match 'places/:type/:id' => 'places#show'
match 'places/:type' => 'places#index'
match 'places/:type/new' => 'places#new'
match 'places/:type/edit' => 'places#edit' 
```

你不需要为创建、更新和销毁创建特殊的路由（尽管你可以）。无论如何，用户永远不会真正看到这些。只需将地点类型作为参数包含在表单中并删除链接，它就会在控制器中可用，就像它来自 URL 一样。

在控制器中，通过 访问类型`params[:type]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:02:30.137

为什么不使用`@place.type`, where 中存储的值`@place = Place.find params[:id]`来确定使用哪个导航？

# python - 从 sphinx autodoc 发出 reStructuredText？

> ID：10377576
> 
> 赞同：22
> 
> 时间：2012-04-30T01:37:48.630
> 
> 标签：python, python-sphinx, autodoc

CPython 的文档不使用自动文档——我们使用手写的散文。

对于 PEP 3144（ipaddress 模块），我想使用 sphinx-apidoc 生成初始参考文档。这意味着我想运行两次操作：

1.  使用 sphinx-apidoc 为依赖于 autodoc 的模块生成一个 Sphinx 项目

2.  运行创建新的 reStructuredText 源文件的 sphinx 构建器，所有 autodoc 指令被内联 reStructuredText 内容和产生相同输出的标记替换

第一步很简单，但我不知道如何进行第二步，甚至想不出好的方法来搜索任何现有的项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T09:37:33.170

我有同样的问题，有一次生成文档时我使用了非常丑陋的解决方案来修补 Sphinx，请参阅[Make Sphinx generate RST class documentation from pydoc](https://stackoverflow.com/questions/2668187/make-sphinx-generate-rst-class-documentation-from-pydoc)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:43:28.090

不是一个完整的答案，或多或少是一个起点：

`autodoc`将自动指令转换为 python 指令。因此可以使用自动文档事件来获取翻译后的 python 指令。

例如，如果您有以下内容`mymodule.py`：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
This is my module.
"""

def my_test_func(a, b=1):
    """This is my test function"""
    return a + b 

class MyClass(object):
    """This is my class"""

    def __init__(x, y='test'):
        """The init of my class"""
        self.x = float(x)
        self.y = y 

    def my_method(self, z): 
        """This is my method.

        :param z: a number
        :type z: float, int
        :returns: the sum of self.x and z
        :rtype: float
        """
        return self.x + z 
```

`sphinx-apidoc`将创建

```
mymodule Module
===============

.. automodule:: mymodule
    :members:
    :undoc-members:
    :show-inheritance: 
```

以下扩展名（或对 的补充`conf.py`）：

```
NAMES = []
DIRECTIVES = {}

def get_rst(app, what, name, obj, options, signature,
            return_annotation):
    doc_indent = '    '
    directive_indent = ''
    if what in ['method', 'attribute']:
        doc_indent += '    '
        directive_indent += '    '
    directive = '%s.. py:%s:: %s' % (directive_indent, what, name)
    if signature:  # modules, attributes, ... don't have a signature
        directive += signature
    NAMES.append(name)
    rst = directive + '\n\n' + doc_indent + obj.__doc__ + '\n'
    DIRECTIVES[name] = rst 

def write_new_docs(app, exception):
    txt = ['My module documentation']
    txt.append('-----------------------\n')
    for name in NAMES:
        txt.append(DIRECTIVES[name])
    print '\n'.join(txt)
    with open('../doc_new/generated.rst', 'w') as outfile:
        outfile.write('\n'.join(txt))

def setup(app):
    app.connect('autodoc-process-signature', get_rst)
    app.connect('build-finished', write_new_docs) 
```

会给你：

```
My module documentation
-----------------------

.. py:module:: mymodule

This is my module.

.. py:class:: mymodule.MyClass(x, y='test')

    This is my class

    .. py:method:: mymodule.MyClass.my_method(z)

        This is my method.

        :param z: a number
        :type z: float, int
        :returns: the sum of self.x and z
        :rtype: float

.. py:function:: mymodule.my_test_func(a, b=1)

    This is my test function 
```

然而`autodoc`，当翻译完成时不会发出任何事件，因此 autodoc 所做的进一步处理必须适应此处的文档字符串。

# php - 我应该使用哪个联接、联合或选择来处理多个表中的数据？

> ID：10377577
> 
> 赞同：1
> 
> 时间：2012-04-30T01:38:03.627
> 
> 标签：php, mysql, sql

我正在创建一个脚本，用于搜索数据库中的废弃购物车并将内容通过电子邮件发送给客户（产品名称、图像、数量等）。数据分布在许多表中，就获取信息和通过电子邮件发送信息而言——到目前为止一切都很好。但是，它会为客户放入购物车的每个产品发送一封电子邮件。因此，如果他们的购物车中有 5 件商品，它会发送 5 封电子邮件。我知道这是因为我的 join 和 while 语句，但我的 php/sql 知识不是很好。

所以我的问题是我应该使用哪个 join 或 union 声明，以便只向一个包含所有产品的客户发送一封电子邮件。

我读过的关于联接的教程总是有 1 个 id 或所有表之间通用的键，但是对于这个存储的数据库结构，一个表与另一个基于 1 个键的表相关，然后该表使用不同的键与另一个依赖表。

数据库结构如下所示。

```
ORDERS:
|   orderid    |   ordstatus   |   ordqty   |  ordcustid   |
|--------------|---------------|------------|--------------|
|    12637     |       0       |      1     |        0     |
|    12636     |      11       |      1     |     3531     |
|    12635     |      11       |      2     |     4192     |

ORDERPRODUCTS:
|  ordprodname  |  ordprodqty  |  orderorderid  |  orderprodid   |
|---------------|--------------|----------------|----------------|
|   product1    |      1       |      12637     |      1206      |
|   product2    |      1       |      12636     |       193      |
|   product3    |      1       |      12635     |      1712      |
|   product4    |      1       |      12635     |      1576      |

CUSTOMERS:
|  customerid  |  customeremail    |  firstname  |
|--------------|-------------------|-------------|
|     3531     | cust1@gmail.com   |  Customer1  |
|     4192     | cust2@gmail.com   |  Customer2  |

PRODUCTIMAGE:
|  imageid  |  imageprodid  |   imagethumb     |
|-----------|---------------|------------------|
| Product1  |      1206     | file/path/1.jpg  |
| Product2  |       193     | file/path/2.jpg  |
| Product3  |      1712     | file/path/3.jpg  |
| Product4  |      1576     | file/path/4.jpg  | 
```

到目前为止，我的脚本如下所示：

```
mysql_select_db("cartmail", $con);

$result = mysql_query("SELECT * 
            FROM    orders
                ,   orderproducts
                ,   productimage
                ,   customers
            WHERE   orders.orderid              = orderproducts.orderorderid
            AND     orderproducts.orderprodid   = productimage.imageprodid
            AND     orders.ordcustid            = customers.customerid
            AND     ordstatus = '11'
            LIMIT 0 , 30");

while($row = mysql_fetch_array($result))
{
    <My PHP mail script...>
}

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:11:11.187

以下查询使用 MySQL 中的 GROUP_CONCAT 来连接订单中的产品详细信息，并为每个客户提供单列值。结果集包含唯一的客户 ID、客户名称、客户电子邮件以及订单详细信息的串联列表。希望这能让您了解如何使用将发送给客户的电子邮件正文中的串联订单信息。

我不了解 PHP，但查询应该让您了解如何获取结果。

[**单击此处查看 SQL fiddle 中的演示。**](http://sqlfiddle.com/#!2/d032c/2)

*脚本*：

```
CREATE TABLE orders
(
    orderid INT NOT NULL
  , orderstatus INT NOT NULL
  , ordqty INT NOT NULL
  , ordcustid INT NOT NULL
);

CREATE TABLE orderproducts
(
    ordprodname     VARCHAR(30) NOT NULL
  , ordprodqty      INT         NOT NULL
  , orderorderid    INT         NOT NULL
  , orderprodid     INT         NOT NULL
);

CREATE TABLE customers
(
    customerid      INT         NOT NULL
  , customeremail   VARCHAR(30) NOT NULL
  , firstname       VARCHAR(30) NOT NULL
);

CREATE TABLE productimage
(
    imageid         VARCHAR(30)     NOT NULL
  , imageprodid     INT             NOT NULL
  , imagethumb      VARCHAR(30)     NOT NULL
);

INSERT INTO orders (orderid, orderstatus, ordqty, ordcustid) VALUES
   (12637, 0,   1, 0),
   (12636, 11,  1, 3531),
   (12635, 11,  2, 4192);

INSERT INTO orderproducts (ordprodname, ordprodqty, 
            orderorderid, orderprodid) VALUES
   ('product1', 1, 12637, 1206),
   ('product2', 1, 12636, 193),
   ('product3', 1, 12635, 1712),
   ('product4', 1, 12635, 1576);

INSERT INTO customers (customerid, customeremail, firstname) VALUES
   (3531, 'cust1@gmail.com', 'Customer1'),
   (4192, 'cust2@gmail.com', 'Customer2'),
   (1111, 'cust3@gmail.com', 'Customer3');

INSERT INTO productimage (imageid, imageprodid, imagethumb) VALUES
   ('Product1', 1206,   'file/path/1.jpg'),
   ('Product2', 193,    'file/path/2.jpg'),
   ('Product3', 1712,   'file/path/3.jpg'),
   ('Product4', 1576,   'file/path/4.jpg');

SELECT          c.customerid
            ,   c.firstname
            ,   c.customeremail,
                group_concat('Order Id: ', orderid, 
                    ' | Product name: ', ordprodname, 
                    ' | Quantity: ', ordprodqty, '<br>') AS ordered_items,
FROM            customers c
LEFT OUTER JOIN orders o
ON              o.ordcustid = c.customerid
LEFT OUTER JOIN orderproducts op
ON              op.orderorderid = o.orderid
LEFT OUTER JOIN productimage pi
ON              pi.imageprodid = op.orderprodid
GROUP BY        c.customerid
HAVING          COUNT(DISTINCT o.ordcustid) > 0; 
```

*输出*：

```
CUSTOMERID FIRSTNAME   CUSTOMEREMAIL     ORDERED_ITEMS
---------- ----------- ----------------  ------------------------------------
3531       Customer1   cust1@gmail.com   Order Id: 12636 | Product name: product2 | Quantity: 1<br>
4192       Customer2   cust2@gmail.com   Order Id: 12635 | Product name: product4 | Quantity: 1<br>,
                                         Order Id: 12635 | Product name: product3 | Quantity: 1<br> 
```

# jquery - 火狐上的 jQuery

> ID：10377584
> 
> 赞同：-1
> 
> 时间：2012-04-30T01:39:38.920
> 
> 标签：jquery

我是 jQuery 的新手。我正在学习 Javascript 和 jQuery，当我从课程中打开 jQuery 程序（不是我自己的程序，而是课程程序）时，我收到一个错误，它说 $ 没有从 ready 函数开始定义。

```
$(document).ready(function() { 
```

有任何想法吗？我是 jQuery 新手，所以我需要婴儿步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:44:44.310

1.  声明你的 jquery api
2.  您的声明必须在您的功能之前
3.  如果您使用其他库（如 mootools），可能会发生冲突
4.  此错误通常意味着您没有以正确的方式调用插件/jquery 使用本地保存文件（从[这里](http://jquery.com/)获取）或使用外部链接

    *   [谷歌上的外部库](https://developers.google.com/speed/libraries/devguide)
    *   [https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)用于 jquery 外部链接

您也可以按照以下示例进行操作：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function(){
        // content
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:41:34.743

这是解决方案。您已评论关闭标签。

你的代码

```
<script> 
$(document).ready(function() { 
$('#animate').click(function() {
    $(this).animate( { width: '400px', height: '400px' }, 1000, 'easeInBounce'); // end animate }); // end click }); // end ready 
</script> 
```

换成这个

```
<script type="text/javascript"> 
$(document).ready(function() { 
$('#animate').click(function() {
    $(this).animate( { width: '400px', height: '400px' }, 1000, 'easeInBounce'); // end animate }); // end click }); // end ready 
    });
});</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:42:11.890

您是否添加了正确版本的 jQuery 参考？如下图所示

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script> 
```

# android - 捕获来自 Web 服务的响应

> ID：10377585
> 
> 赞同：0
> 
> 时间：2012-04-30T01:39:41.177
> 
> 标签：android, httpresponse

我为我的应用程序创建了一个 Web 服务，我的响应是“SUCCESS”和“FAILURE”
，如果我的响应“SUCCESS”我做了某事，我想将我的服务的响应捕获到我的应用程序
中，但是如果“FAILURE”什么都不做
我尝试：**不**
`(request(response) != null && response.getStatusLine().getStatusCode() == 200)`
工作，因为它只是读取网络状态是否正常**..**我 该怎么做？ 这是我的完整代码：

 **```
public void getRequest(String Url) {

    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    try {
        HttpResponse response = client.execute(request);
        //Toast.makeText(this, "Tambah Data " + request(response) + " ",Toast.LENGTH_SHORT).show();
        if (request(response) != null && response.getStatusLine().getStatusCode() == 200) {
            if(response.getEntity().equals("SUCCESS")){
                Toast.makeText(this, "Inisialisasi sukses", Toast.LENGTH_LONG).show();
                /*helper.insertUser(noImei.getText().toString(),user.getText().toString(),password.getText().toString());
                startActivity(new Intent(UserForm.this,MenuUtama.class));
                user.setText("");
                password.setText("");*/
                System.out.println("sukses");
            }else if(response.getEntity().equals("FAILURE")){
                Toast.makeText(this, "gagal", Toast.LENGTH_LONG).show();
                System.out.println("GAGAL");
            }

        }/*else if(request(response) != null && response.getStatusLine().getStatusCode() == 408){
            Toast.makeText(this, "Request Timeout", Toast.LENGTH_LONG).show();
        }*/else if(request(response) != null && response.getStatusLine().equals("FAILURE"))
        {
            Toast.makeText(this, "Inisialisasi "+request(response), Toast.LENGTH_LONG).show();
            return;
        }
    } catch (Exception ex) {

        //Toast.makeText(this, "Tambah Data Gagal !", Toast.LENGTH_SHORT).show();
      }
}

public static String request(HttpResponse response) {

    String result = "";
    try {
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(
        new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {

            str.append(line + "\n");

        }
        in.close();
        result = str.toString();
        } catch (Exception ex) {
        result = "Error";
        }
        return result;

} 
```

谢谢你的反馈:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:55:19.277

我会做这样的事情。

当 HttpResponse 返回时，您只需要检查您是否收到响应以及响应是否为[HttpStatus.SC_OK](http://developer.android.com/reference/org/apache/http/HttpStatus.html#SC_OK) (200)。在你得到那个之后，你解析实体并检查“SUCCESS”或“FAILURE”。在您的代码中，您将实体对象与“SUCCESS”或“FAILURE”进行比较。

请注意我的缩进。我刚刚对您发布的原始代码进行了更改。

```
 public void getRequest(String Url) {

    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    try {
        HttpResponse response = client.execute(request);
        //Toast.makeText(this, "Tambah Data " + request(response) + " ",Toast.LENGTH_SHORT).show();
        if (response.getStatusLine().getStatusCode() == 200) {
            String res = request(response);
            if(res.equalsIgnoreCase("SUCCESS")){
                Toast.makeText(this, "Inisialisasi sukses", Toast.LENGTH_LONG).show();
                /*helper.insertUser(noImei.getText().toString(),user.getText().toString(),password.getText().toString());
                startActivity(new Intent(UserForm.this,MenuUtama.class));
                user.setText("");
                password.setText("");*/
                System.out.println("sukses");
            }else if(res.equalsIgnoreCase("FAILURE")){
                Toast.makeText(this, "gagal", Toast.LENGTH_LONG).show();
                System.out.println("GAGAL");
            }

        }/*else if(response.getStatusLine().getStatusCode() == 408){
            Toast.makeText(this, "Request Timeout", Toast.LENGTH_LONG).show();
        }*/else {
            Toast.makeText(this, "Inisialisasi "+response.getStatusLine(), Toast.LENGTH_LONG).show();
            return;
        }
    } catch (Exception ex) {
        //Toast.makeText(this, "Tambah Data Gagal !", Toast.LENGTH_SHORT).show();
    }
}

public static String request(HttpResponse response) {
    String result = "";
    try {
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(
        new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            str.append(line + "\n");
        }
        in.close();
        result = str.toString();
        } catch (Exception ex) {
        result = "Error";
        }
        return result;

}
} 
```**

# ruby-on-rails - Bundle install 安装 ffi 失败（由于 env 命令错误？）

> ID：10377589
> 
> 赞同：2
> 
> 时间：2012-04-30T01:40:13.447
> 
> 标签：ruby-on-rails, linux, macos, installation, bundle

即使 ffi gem（正确的版本 1.0.11）安装得很好，我的捆绑安装也无法在我的 Mac 上安装 ffi。运行“捆绑安装”时出现以下错误：

```
使用本机扩展安装 ffi (1.0.11)
Gem::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展。
...
创建 Makefile

制作
为 i386 配置 libffi
env: --disable-static: 没有这样的文件或目录
make[1]: *** 没有指定目标，也没有找到 makefile。停止。
为 x86_64 配置 libffi
env: --disable-static: 没有这样的文件或目录
make[1]: *** 没有指定目标，也没有找到 makefile。停止。
make: *** ["/mypath/clients/myapp/rails=2.3.5/ruby/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi"/.libs/libffi_convenience.a] 错误2
安装 ffi (1.0.11) 时出错，Bundler 无法继续。
在捆绑之前确保 `gem install ffi -v '1.0.11'` 成功。

```

我试过了

```
gem install ffi -v '1.0.11'
```

它通过就好了。然后我查看失败的 Makefile 并运行

```
使-n
```

看看发生了什么。原来make在命令上失败了：

```
cd "/mypath/clients/myapp/rails=2.3.5/ruby/1.8/gems/ffi-1.0.11/ext/ffi_c"/libffi-$arch && env CC="gcc" CFLAGS="-arch $arch " LDFLAGS="-arch $arch" "/mypath/clients/myapp/rails=2.3.5/ruby/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi"/configure --disable-static -- with-pic=yes --disable-dependency-tracking --host=$arch-apple-darwin > /dev/null;
```

具体来说，它失败了

```
env CC=" gcc" CFLAGS="-arch $arch " LDFLAGS="-arch $arch" "/mypath/clients/myapp/rails=2.3.5/ruby/1.8/gems/ffi-1.0.11/ext/ ffi_c/libffi"/configure --disable-static --with-pic=yes --disable-dependency-tracking --host=$arch-apple-darwin > /dev/null;
```

显然 env 命令认为该部分

```
“/mypath/clients/myapp/rails=2.3.5/ruby/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi”/configure
```

是设置一个环境变量，因为路径包含“=”。如果我手动将“=”更改为“_”，env 命令就可以正常工作。但是，这个路径是由“bundle install”自动生成的，过去一直有效。

我刚试过

```
捆绑安装 --path=rails_2.3.5
```

它通过了。但我仍然想知道过去路径 rails=2.3.5 是如何工作的。

那是因为我不小心更改了 Mac 上的某些设置吗？我可以让 env 认识到引号中的“=”不适用于环境变量吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T05:39:53.527

我也遇到了这个问题，当时我清理了所有已安装的 gem，然后再次打包，它正在工作。

我不确定它是否适合您，但您仍然可以尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T23:36:23.430

我有同样的问题（Mac OS X Lion）。就我而言，升级到 Mac OS X Lion 后，我丢失了 gcc 命令行工具。

这是安装命令行工具的方法；1.安装 Xcode 4 2.Xcode -> 首选项 -> 下载选项卡 -> 命令行工具

安装后，我的情况解决了。

# jquery-plugins - Jquery，每次单击按钮都会出现一个文本字段

> ID：10377591
> 
> 赞同：0
> 
> 时间：2012-04-30T01:40:18.547
> 
> 标签：jquery-plugins

使用 jquery 我想让多个文本字段出现.. 单击此文本时

```
<form>
<input  style="margin-top:20px;margin-right :50px; width:255px;height:23px;float:left;" type="text"  name="CrawlerField"id="CrawlerField"/>
<input style="margin-top: 15px; margin-right :50px; width:255px;height:23px;float:left;" type="text" name="CrawlerField1" id="CrawlerField1"/>
<input style="margin-top: 15px; margin-right :50px; width:255px;height:23px;float:left;" type="text" name="CrawlerField1" id="CrawlerField2"/>
<font id="jqueryAdd">Add button</font>
</form> 
```

这是单击时出现的新文本字段的文本....

```
<font id="jqueryAdd">Add button</font> 
```

脚本

一开始所有文本字段都被隐藏

```
$("#CrawlerField1").hide();
$("#CrawlerField2").hide(); 
```

当单击使用 jqueryAdd 定义的单词 Add 按钮时，检查上一个文本字段是否隐藏下一个文本字段出现

```
$("#jqueryAdd").click(function ( event ) {
      if($("#CrawlerField").is(":visible"))
      $("#CrawlerField1").show();
        return false;
});
$("#jqueryAdd").click(function ( event ) {
      if($("#CrawlerField1").is(":visible"))
      $("#CrawlerField2").show();
  return false;
}); 
```

此代码导致所有按钮在开始时出现！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:51:37.363

添加`class`到您的所有`<input>`标签中

```
 <input class ="in" style="margin-top:20px;margin-right :50px; width:255px;height:23px;float:left;" type="text"  name="CrawlerField"id="CrawlerField"/>
<input class ="in" style="margin-top: 15px; margin-right :50px; width:255px;height:23px;float:left;" type="text" name="CrawlerField1" id="CrawlerField1"/>
<input class ="in" style="margin-top: 15px; margin-right :50px; width:255px;height:23px;float:left;" type="text" name="CrawlerField1" id="CrawlerField2"/> 
```

并在 jquery 中添加此行以最初隐藏所有输入。

```
$(".in").hide(); 
```

# jquery - Jquery图像调整大小不能经常工作

> ID：10377592
> 
> 赞同：1
> 
> 时间：2012-04-30T01:40:25.053
> 
> 标签：jquery

我正在使用 jquery 来调整图像大小。它在触发宽度和高度零值的一段时间内工作正常。这是我的代码。你们知道为什么它的宽度和高度返回零吗？

这是我正在使用的 jquery 代码

```
//Image Popup viewer
    function imgViewerLoad() {
        $(".imageViewer").fadeIn("slow");
        var windowWidth = document.documentElement.clientWidth;
        var windowHeight = document.documentElement.clientHeight;
        var ivHeight = $(".imageViewer").height();
        var ivWidth = $(".imageViewer").width();
            $(".imageViewer").css({
                "position": "absolute",
                "width": ivWidth,
                "min-width": ivWidth,
                "height": ivHeight,
                "left": (windowWidth/2-ivWidth/2)-53,
                "top": windowHeight/2-ivHeight/2
            });
        //After Load the image
        $(".imageViewer .loading-big").show();
        $(".imgPreview").load(function() {
            $(".loading-big").hide();

            //Added resize function for large image
            //Set max image size 90% of the window
            var max_w1 = ($(window).width()*90)/100;
            var max_h1 = ($(window).height()*90)/100;

            var this_w1 = $(".imgPreview").width();
            var this_h1 =$(".imgPreview").height();
            if(this_w1==0){this_w1=500}//if width==0 then refer to window fit size
            if(this_w1==0){this_w1=500}//if width==0 then refer to window fit size

            //Set back to its original size if new size exceed its original size
            if(max_w1 > this_w1) max_w1 = this_w1;
            if(max_h1 > this_h1) max_h1 = this_h1;

            if (this_w1/this_h1 < max_w1/max_h1) {
            var h1 = max_h1;
            var w1 = Math.ceil(max_h1/this_h1 * this_w1);
            } else {
            var w1 = max_w1;
            var h1 = Math.ceil(max_w1/this_w1 * this_h1);
            }
            $(".imgPreview").css({ height: h1, width: w1 });
            //End resizing

            $(this).fadeIn('slow');
            $(".nav .right").hide();//Hide Main Nav next prev
            $(".nav .imgViewNav").show();//Show image viewer next prev
            //Center image viewer
            var ivHeight1 = $(".imgPreview").height();
            var ivWidth1 = $(".imgPreview").width();
            $(".imageViewer").css({
                "position": "absolute",
                "width": ivWidth1,
                "min-width": ivWidth1,
                "height": ivHeight1,
                "left": (windowWidth/2-ivWidth1/2)-53,
                "top": windowHeight/2-ivHeight1/2
            });
        });
        $(".overLay").stop().fadeTo('slow',0.55).height(windowHeight);
    }

    //Load light box when clicked on thumbnail
    $('.secondary .imgWrapper').on('click',function() {//Touchend is for touch screen like ipad
           $(".imgPreview").remove();//Remove image viewer if exist
           //$(".imageViewer").append('<img src="'+ colorPath+ 'large/' + num +'.jpg" id="'+ num + '"/>');
           getImgPath = $(this).children('.iColor').attr('src');
           imgId = $(this).children('.iColor').attr('id');
           //$(".imageViewer").append('<img src="'+ colorPath+ num +'.jpg" id="'+ num + '"/>');

           newUrl = getImgPath.substring(0, getImgPath.lastIndexOf("."));//Remove extension
           finalUrl = newUrl.replace(/[0-9]+/g,'');//Remove number

           $(".imageViewer").append('<img src="'+ finalUrl + 'large/' + imgId +'.jpg" id="'+ imgId +'" class="imgPreview" />');

            //Load Image viewer function
            imgViewerLoad();

        });

    $('.next').click(function() {

        var getImgSrc = $(".imgPreview").attr('src');
        var getImgId = $(".imgPreview").attr('id');
        nextId = getImgId+++1;
        remExt = getImgSrc.substring(0, getImgSrc.lastIndexOf("."));//Remove extension
        remNum = remExt.replace(/[0-9]+/g,'');//Remove number

        //Declear var for total images on each page
        if($(".port").hasClass('Active')) {
            lastImg = 61;
        } else if($(".advs").hasClass('Active')) {
            lastImg = 43;
        }
        if(getImgId < lastImg) {//Disable click if this is last image
            $(".imgPreview").remove();//Remove image viewer if exist
            $(".imageViewer").removeAttr('style');
            $(".imageViewer").append('<img src="'+ remNum+nextId +'.jpg" id="'+ nextId +'" class="imgPreview" />');

            //Load Image viewer function
            imgViewerLoad();
        }

    })
    $('.prev').click(function(e) {
        var getImgSrc = $(".imgPreview").attr('src');
        var getImgId = $(".imgPreview").attr('id');
        nextId = getImgId-1;
        remExt = getImgSrc.substring(0, getImgSrc.lastIndexOf("."));//Remove extension
        remNum = remExt.replace(/[0-9]+/g,'');//Remove number

        if(getImgId > 1) { //Disable click if this is first image
        //$(".imgPreview").attr({'src': remNum+nextId+ '.jpg', 'id': nextId }); 

        $(".imgPreview").remove();//Remove image viewer if exist
        $(".imageViewer").attr('style','');
        $(".imageViewer").append('<img src="'+ remNum+nextId +'.jpg" id="'+ nextId +'" class="imgPreview" />');

        //Load Image viewer function
            imgViewerLoad();
        }
    })

    function hideImageViewer() {
        $('div.nav').addClass('stayOn').removeClass('stayOff');//Add class to nav
        $('.overLay').stop().fadeTo('slow',0).delay(1000).hide();
        $("div.imageViewer").hide().attr('style','z-index: 299; display:none;');
        $(".nav .right").show();
        $(".nav .imgViewNav").hide();
    }

    //Close Image viewer
    $('.overLay').click(function() {
        hideImageViewer();
    })
    $('.close').click(function() {
        hideImageViewer();
    }); 
```

和html代码

# matplotlib - 如何删除函数不连续的连接线

> ID：10377593
> 
> 赞同：17
> 
> 时间：2012-04-30T01:40:36.963
> 
> 标签：matplotlib

我正在绘制一些具有几个不连续性的函数。每个函数都以列表的形式给出。我只想在函数连续的地方用线连接点。

这是情节正在做什么的简化示例。

```
x=linspace(0,1,100)    
y=zeros(100)
y[x<0.5] = x[x<0.5]
y[x>=0.5] = 1 + x[x>=0.5]
plot(x, y, '-o') 
```

在 x=0.5 处存在不连续性，但绘图将所有点与线连接起来。

我的功能当然不同。它们通常在不同的地方有几个不连续性。不连续性的标准很简单。比如说，如果函数跳跃超过 0.5，我认为它在这一点上是不连续的。

plot 中是否有一个选项可以告诉它删除函数不连续点之间的连接线？我记得使用 gnuplot 可以轻松做到这一点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-30T04:05:13.633

使用 nan 将线分成多个段：

```
import numpy as np
from pylab import *
x=linspace(0,1,100)    
y=zeros(100)
y[x<0.5] = x[x<0.5]
y[x>=0.5] = 1 + x[x>=0.5]

pos = np.where(np.abs(np.diff(y)) >= 0.5)[0]

x[pos] = np.nan
y[pos] = np.nan

plot(x, y, '-o') 
```

编辑：

在不连续处插入 nan：

```
pos = np.where(np.abs(np.diff(y)) >= 0.5)[0]+1
x = np.insert(x, pos, np.nan)
y = np.insert(y, pos, np.nan) 
```

![在此处输入图像描述](../Images/4370dd2de5280219dde2fc766aeef69e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T22:08:44.793

这是我绘制 tan(x) 的建议：

```
import matplotlib.pyplot as plt
from math import *
x_lim = 3*pi/2
y_lim = 5
n = 1000
X = []
Y = []
Z = []
for i in range(0,2*n):
    x = -x_lim + i*x_lim/n
    y = tan(x)
    if y<y_lim and y>-y_lim:
        X.append(x)
        Y.append(y)
    else:
        if len(X)>0 and len(Y)>0:
            Z.append([X,Y])
            del X,Y
            X = []
            Y = []
for i in range(0, len(Z)):
    plt.plot(Z[i][0],Z[i][1])
plt.grid(True)
plt.show() 
```

# regex - 将列表项附加到 Notepad++ 中的每一行

> ID：10377594
> 
> 赞同：1
> 
> 时间：2012-04-30T01:40:42.880
> 
> 标签：regex, notepad++

我有一个看起来像的项目列表：

```
White
Green
Blue
Yellow
Black 
```

我想将上面的每个项目附加到这些文本行中：

```
Line One:
Line Two:
Line Three:
Line Four:
Line Five: 
```

所以最后的结果是：

```
Line One: White
Line Two: Green
Line Three: Blue
Line Four: Yellow
Line Five: Black 
```

我的实际清单有几百行。有没有办法用正则表达式在 Notepad++ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:50:07.550

将列粘贴到任何旧电子表格中然后将其复制回文本编辑器可能会更快。

# mysql - 删除换行符后，大型 sql 查询会导致错误

> ID：10377595
> 
> 赞同：0
> 
> 时间：2012-04-30T01:40:49.853
> 
> 标签：mysql, node.js

我有一个从 Node.JS 进程运行的非常大且复杂的 MySQL 查询，但我遇到了一个奇怪的错误。

查询大约有 150 行 SQL 代码，所以我不打算包含它，但我知道它很好。它在 JS 源代码中写为变量，每行末尾带有 \ 以继续字符串。如果我从源中复制 SQL 并删除 \s 它运行完美。但是，当我通过应用程序运行它时，我会感到害怕：

```
MySQL: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

'' 在我查询的巨大单行中的任何位置 - 感谢 MySQL。

当我让应用程序将 SQL 输出到屏幕并复制并粘贴它时，我在 MySQL 中遇到了同样的错误。我决定通过 diff 运行 2 个查询（删除时的源和输出），唯一的区别是换行符 - 源有换行符，而输出没有。我还应该注意，这个应用程序中更简单的查询确实有效，所以这个查询中有一些东西导致了这种情况。

删除换行符后，MySQL 查询可能会发生什么变化？是否有一些我不知道的行或空格限制？我的理解是 MySQL 会忽略所有换行符和空格。这不是真的吗？有人能指出我正确的方向来解决这个问题吗？

我删除了一些评论，删除了一些空白行，我将制表符转换为空格..我没有想法。

谢谢，

白原子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:00:12.700

错过了查询中的评论。我使用的是 -- MySQL 注释语法，它注释到行尾。删除换行符后 - 查询在该注释处终止。

感谢收看；希望这对其他人有帮助。

# python - 如果迭代，DFT 会给出不同的结果

> ID：10377596
> 
> 赞同：1
> 
> 时间：2012-04-30T01:41:15.077
> 
> 标签：python, math, dft

我创建了一个简单的积分函数和 DFT 函数，可以将其与我编写的其他代码一起使用。

```
from math import sin,pi
from time import time
def aintegral(d,step):
    return sum(d)*step

def partialdft(d,step,w):
    i = 0
    x = d
    while i/step < len(d):
        x[int(i/step)]*=sin(w*pi*i)
        i+=step
    return aintegral(x,step)

x = []
y = 0
while y<100:
    x.append(5*sin(4*pi*y))
    y+=.01

print partialdft(x,.01,4) 
```

此代码给出的输出为 249.028500022，接近预期的 250 值。但是，当我迭代 DFT 时，我在 4 处得到一个完全不同的变换值。

```
from math import sin,pi
from time import time
def aintegral(d,step):
    return sum(d)*step

def partialdft(d,step,w):
    i = 0
    x = d
    while i/step < len(d):
        x[int(i/step)]*=sin(w*pi*i)
        i+=step
    return aintegral(x,step)

x = []
y = 0
while y<100:
    x.append(5*sin(4*pi*y))
    y+=.01

y = 0
while y<10.:
    print y,partialdft(x,.01,y)
    y+=.1 
```

此代码的输出为：0 0.0514628731431

0.1 0.0514628731431

0.2 0.0514628731431

. . . .

4.0 0.0514628731431

. . . .

9.8 0.0514628731431

9.9 0.0514628731431

10.0 0.0514628731431

谁能告诉我是什么导致了这个问题？提前致谢。

注意：此时我并不关心使用更高效的 fft 函数。样本量不大，所以没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:38:39.613

`partialdft`函数修改`x`。这是`x`第一个循环之后：

```
>>> x[0:10]
[0.0, 0.62666616782152129, 1.243449435824274, 1.8406227634233896, 2.4087683705085765, 2.9389262614623659, 3.4227355296434436, 3.852566213878946, 4.2216396275100756, 4.5241352623300983] 
```

`x`调用函数后如下：

```
>>> partialdft(x, 0.01, y)
0.051462873158853464
>>> x[0:10]
[0.0, -2.8072359998573911e-13, 1.114040042207106e-12, -2.4744131119314365e-12, 4.316161702819329e-12, -6.5865746141630883e-12, 9.202604511389696e-12, -1.2082375495190468e-11, 1.5129125329320302e-11, -8.1617793532956823e-23] 
```

为避免覆盖`x`，请复制：

```
def partialdft(d,step,w):
    i = 0
    x = d[:]
    #... 
```

# java - 创建一个有组织的 Java 库

> ID：10377602
> 
> 赞同：0
> 
> 时间：2012-04-30T01:42:27.337
> 
> 标签：java, class, jar

我想在 Java 中创建一个库（Jar 文件），其中包含我们使用的数据库的所有方法。那里有大约 60 种方法，所以我想让它更有条理。我想调用下面提供的示例中的方法。

```
db.accounts.add(username, password); or db.accounts().add(username, password);
db.names.delete(name); or db.names().delete(name); 
```

在 Java 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T01:49:36.143

您可以为自己省去很多麻烦并编写一个通用的 DAO：

```
package persistence;

public interface GenericDao<K, V> {
    V find(K id);
    List<V> find();
    K save(V value);
    void update(V value);
    void delete(V value);
} 
```

我会忘记编写自己的持久性类并使用经过验证的解决方案，例如 Spring JDBC 模板。

这个问题已经解决了很多次，很多方法。你希望做些什么来改进现有的东西？您将如何证明开发、测试和维护此功能的额外费用是合理的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:14:01.110

这是我用于连接数据库的自定义库的一些快照：

![在此处输入图像描述](../Images/92e61ec4077a3201ded2438ff11dd958.png)

**PostgreConnection.java**

```
public class PostgreConnection {

private static Connection conn;

public Connection makeConnection(String url, String db, String username, String password) {
    if (conn == null) {
        try {
            Class.forName(Constants.POSTGRES_DRIVER);

            conn = DriverManager.getConnection(Constants.POSTGRES_URL + url + "/" + db, username, password);
        } catch (SQLException | ClassNotFoundException ex) {
            Logger.getLogger(PostgreConnection.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    return conn;
} 
```

}

**常量.java**

```
public class Constants {

    public static String POSTGRES_URL = "jdbc:postgresql://";
    public static String POSTGRES_DRIVER = "org.postgresql.Driver";
} 
```

`org.ert.model`您可以根据数据库的表存储您需要的所有内容`Model`。

**NotifyCharts.java**

```
public class NotifyCharts {

private Integer Id;
private String revName;
private Date importDate;
private Integer pages;
private Boolean status;

public Integer getId() {
    return Id;
}

public void setId(Integer Id) {
    this.Id = Id;
}

public Date getImportDate() {
    return importDate;
}

public void setImportDate(Date importDate) {
    this.importDate = importDate;
}

public Integer getPages() {
    return pages;
}

public void setPages(Integer pages) {
    this.pages = pages;
}

public String getRevName() {
    return revName;
}

public void setRevName(String revName) {
    this.revName = revName;
}

public Boolean isStatus() {
    return status;
}

public void setStatus(Boolean status) {
    this.status = status;
}
} 
```

`SQLQuery`是`abstract class`一些基本方法的一种，例如`insert, update, delete, etc`.

**SQLQuery.java**

```
public abstract class SQLQuery<T> {
    protected void makeStatement(String url, String db, String username, String password) {
    PostgreConnection connect = new PostgreConnection();
    Connection con = connect.makeConnection(url, db, username, password);

    try {
        state = (Statement) con.createStatement();
    } catch (SQLException ex) {
        Logger.getLogger(SQLQuery.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public String arrayBuilder(Object[] obj, boolean val) {
    StringBuilder arr = new StringBuilder();

    arr.append("(");
    for (int i = 0; i < obj.length; i++) {
        if (i < obj.length - 1) {
            if (val) {
                arr.append("'");
            }
            arr.append(obj[i]);

            if (val) {
                arr.append("'");
            }

            arr.append(", ");
        } else {
            if (val) {
                arr.append("'");
            }
            arr.append(obj[i]);
            if (val) {
                arr.append("'");
            }
        }
    }
    arr.append(")");

    return arr.toString();
}

public int insertRecord() throws SQLException {
    StringBuilder query = new StringBuilder();

    query.append("INSERT INTO ").append(tableName).append(arrayBuilder(columns, false)).append(" VALUES ").append(arrayBuilder(values, true));

    return state.executeUpdate(query.toString());
}

public ResultSet getAll() throws SQLException {
    StringBuilder query = new StringBuilder();

    query.append("SELECT * FROM ").append(tableName);
    rSet = state.executeQuery(query.toString());

    return rSet;
}

public abstract void setColsAndVals(T t);
} 
```

`NotifyChartsSQL.java`是的实现`abstract class`，`org.ert.sql.impl`是`package`存储您需要的所有实现。

**NotifyChartsSQL.java**

```
public class NotifyChartsSQL extends SQLQuery<NotifyCharts> {

public NotifyChartsSQL(String url, String db, String username, String password, NotifyCharts notify) {
    makeStatement(url, db, username, password);
    setColsAndVals(notify);
}

@Override
public final void setColsAndVals(NotifyCharts notify) {
    Map<String, Object> objects = new HashMap<>();
    String[] columns;
    Object[] values;

    if(notify.getId() != null)
        objects.put("id", notify.getId());
    if(notify.getRevName() != null)
        objects.put("rev_name", notify.getRevName());
    if(notify.getImportDate() != null)
        objects.put("import_date", notify.getImportDate());
    if(notify.getPages() != null)
        objects.put("pages", notify.getPages());

    objects.put("status", notify.isStatus());

    columns = Arrays.copyOf(objects.keySet().toArray(), objects.size(), String[].class);
    values = objects.values().toArray();

    setColumns(columns);
    setValues(values);
    setTableName("notify_charts");
}

} 
```

最后是`test`测试您的自定义库以确保一切正常的包。

**TestMain.java**

```
public class TestMain {

public static void main(String[] args) {
    NotifyCharts notify = new NotifyCharts();
    try {

        notify.setRevName("Test456");
        notify.setImportDate(new Date());
        notify.setPages(10);
        notify.setStatus(false);

        NotifyChartsSQL notCharts = new NotifyChartsSQL("localhost:5432", "charts", "username", "password", notify);

        int status = notCharts.insertRecord();

        if (status == 1) {
            System.out.println("Success Insert");
        } else {
            System.out.println("Failed Insert");
        }
    } catch (SQLException ex) {
        Logger.getLogger(TestMain.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

}

如果您使用手册`JDBC`而不使用`ORM`诸如`Hibernate`. 因为在 Hibernate 中已经提供了你需要的所有方法，除了你想添加一些你可以像 duffymo 之前说的那样做的特殊方法。这种自定义库的想法来自于`DAO`和`Hibernate`结构。

感谢阅读，如果您想制作一些更有条理的自定义库，请学习一些[Java 设计模式。](http://www.javacamp.org/designPattern/)

# c - 有没有办法用 GNU binutils 取消隐藏隐藏的可见性符号？

> ID：10377608
> 
> 赞同：3
> 
> 时间：2012-04-30T01:43:12.600
> 
> 标签：c, gcc, visibility, binutils

我正在编写一个脚本，以使 uClibc 在现有的 glibc 目标 gcc/binutils 工具链上可用，我剩下的一个问题是`pthread_cancel`需要`dlopen` `libgcc_s.so.1`. 主机 gcc 提供的版本链接到依赖于 glibc，所以我改为使用`ld`'s`-u`选项来提取所需的符号（及其依赖项）`libgcc_eh.a`以进行替换`libgcc_s.so.1`：

```
gcc -specs uclibc.specs -Wl,-u,_Unwind_Resume -Wl,-u,__gcc_personality_v0 \
    -Wl,-u,_Unwind_ForcedUnwind -Wl,-u,_Unwind_GetCFA -shared -o libgcc_s.so.1 
```

原则上我会完成，但是其中的所有符号`libgcc_eh.a`都将其可见性设置为隐藏，因此在输出`.so`文件中，它们都变为本地并且不会添加到`.dynsym`符号表中。

我正在寻找一种在文件或原始文件`objcopy`上使用 binutils（也许？或链接器脚本？）的方法来取消隐藏这些符号。这可能吗？`.so``.o``libgcc_eh.a`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-12T22:52:34.173

`objcopy`似乎没有这个功能，但你可以使用[ELFkickers`rebind`工具](https://github.com/BR903/ELFkickers/tree/master/rebind)来做到这一点：

```
rebind --visibility default file.o SYMBOLS... 
```

这必须在原始 .o 文件上完成。如果您尝试在 .so 上执行此操作，则为时已晚，因为该`.dynsym`部分中将省略隐藏符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:31:02.457

我认为您应该可以`--globalize-symbol`在 objcopy 中使用。

例如

```
$ nm /usr/lib/gcc/i686-redhat-linux/4.6.3/libgcc_eh.a | grep emutls_alloc

00000000 t emutls_alloc
$ objcopy --globalize-symbol=emutls_alloc /usr/lib/gcc/i686-redhat-linux/4.6.3/libgcc_eh.a /tmp/libgcc_eh.a
$ nm /tmp/libgcc_eh.a |grep emutls_alloc
00000000 T emutls_alloc

```

您可以多次向 objcopy 提供 --globalize-symbol，但您需要明确提及要全球化的所有符号的完整符号名称。

~~虽然我不确定将 libgcc_eh.a 变成共享对象会发生什么样的破坏，因为 libgcc_eh.a 可能是在没有 -fpic/-fPIC 的情况下编译的。~~原来 libgcc_eh.a 被编译为与位置无关的代码。

# facebook - 我的应用程序显示 facebook 登录对话框并提示用户登录 - 他如何从该对话框中取消？

> ID：10377613
> 
> 赞同：1
> 
> 时间：2012-04-30T01:43:52.567
> 
> 标签：facebook, ios5

当用户单击我的应用程序中的“发布到 facebook”按钮时，他会看到 facebook 登录对话框。如果用户没有 facebook 帐户并且不想注册一个，那么我想让他选择从 facebook 登录对话框优雅地退出并返回我的应用程序。

问题是 facebook 登录对话框没有取消按钮。

提供“发布到 facebook”按钮的推荐方法是什么，但如果用户改变主意，可以安全地返回我的应用程序？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:22:10.847

如果您引用源而不是捆绑包，则需要包含 close.png。它在 FBDialog.bundle/images/close.png 中寻找它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:26:50.193

只是遇到了同样的问题，但 James Texter 的提示（不幸的是不太清楚）帮助了：

在目标的构建设置中，您需要在`Copy Bundle Resources`阶段添加 FBDialog.bundle。`fbDidNotLogin:`当您按下按钮时，您会收到一个回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:02:09.723

您必须明确将文件 FacebookSDKResources.bundle 导入 XCode 中的 Ressources 文件夹。（复制粘贴文件，然后将其拖放到 XCode 中，添加为组）

# windows - 有没有办法以编程方式将启动脚本添加到本地组策略？

> ID：10377617
> 
> 赞同：4
> 
> 时间：2012-04-30T01:44:31.297
> 
> 标签：windows, scripting, wmi, group-policy

我需要编写一个脚本，它可以将自身添加到本地组策略中的启动脚本中，以便即使没有用户登录也可以运行。这可以使用 gpedit.msc 并进入计算机配置 > Windows 设置 > 脚本来完成> 启动。但是，我还没有找到以编程方式执行此操作的方法。

我已经研究过简单地编辑注册表。我发现相关位置是`HKLM\Software\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Scripts\Startup`，但只是添加我自己的条目没有任何效果。该计算机不是域的一部分。

有谁知道如何做到这一点？有 WMI 方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:45:41.313

我认为您必须修改`%windir%\system32\GroupPolicy\gpt.ini`，附加`[{42B5FAAE-6536-11D2-AE5A-0000F87571E3}{40B6664F-4972-11D1-A7CA-0000F87571E3}]`到该`gPCMachineExtensionNames`行并将`Version`值加一。（[来源](http://www.hbgary.com/malware-using-local-group-policy "（资源）")）。

尝试通过组策略编辑器添加和删除脚本，您可以观察 gpt.ini 的变化。添加脚本时，您还可以将其中创建的结构`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\Scripts\Startup\0`用作模板。

对于遇到这个机器*是*域成员的线程的任何人，我注意到域定义的组策略出现在本地策略*之后的注册表中。*因此，如果您已经在 获得域策略`...\Scripts\Startup\0`，则应`...\Scripts\Startup\1`在创建本地计算机策略之前将其复制到。

无论如何，在以编程方式尝试之前，使用 GUI 过期并查看内容如何变化。

您还需要运行`gpupdate`以刷新组策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T08:21:56.813

我正在为此编写一个脚本，我的测试表明您根本不需要编辑注册表。请按照以下步骤操作，它将起作用

1.  在 scripts.ini 中找到最后一个脚本编号（每个脚本“0CmdLine=”和“0Parameters=”有两行。
2.  为要添加的每个脚本添加两行（例如“1CmdLine=myscript.vbs”和“1Parameters=”
3.  增加 gpt.ini 中的 "version=" 数字
4.  运行 Gpupdate 以应用它

编写解决方案脚本的重要说明：gpt.ini 使用 UTF-8 编码，scripts.ini 使用 Unicode。干杯 M$！

希望这对人们有所帮助。

肖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T19:25:04.213

只需在一台机器上手动配置它并运行 gpupdate /force。然后将 %systemroot%\System32\GroupPolicy 从源计算机复制到其余计算机上的 %systemroot%\System32\GroupPolicy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T10:36:06.550

即使这是一篇较旧的帖子，我认为人们可能仍在寻找相同的场景（就像我一样）。

请在下面找到我的一批用于扩展 scripts.ini。
您只需要 2 或 3 个参数，例如脚本末尾的示例。

另外，如果需要，请记住编辑 gpt.ini！
此处有关[gpt.ini](https://technet.microsoft.com/en-us/library/cc978247.aspx)
的更多信息 确定 GUID 的最简单方法是在 gpedit.msc 中进行编辑并观察更改。

请小心脚本并在生产环境中使用之前对其进行测试！

```
@echo off
setlocal enabledelayedexpansion

REM get parameter for scripts.ini changes
if not "%~1"=="" (
set type=%1
) else (
goto enderror
)
if not "%~2"=="" (
set cmd=%2
) else (
goto enderror
)
if not "%~3"=="" (
set params=%3
) else (
set params=
)

if not exist scripts.ini echo. 2>scripts.ini

if exist scripts.ini (
set ctr=0

for /f %%a in (scripts.ini) do (
    echo %%a | findstr /C:"[Logon]" 1>nul
    if not errorlevel 1 (
    set /a ctr+=1
    )
)
if !ctr!==0 (
    echo [Logon]>>scripts.ini
)

set ctr=0

for /f %%a in (scripts.ini) do (
    echo %%a | findstr /C:"[Logoff]" 1>nul
    if not errorlevel 1 (
    set /a ctr+=1
    )
)
if !ctr!==0 (
    echo [Logoff]>>scripts.ini
)
)

REM remove scripts-new.ini if exists
if exist scripts-new.ini (
del /F /Q scripts-new.ini
)

REM ctr = number at front for each cmd-param pair - subctr = counter for lines --> pairs - diff = change from Logon to Logoff or vice versa
set ctr=0
set subctr=0
set diff=0
set used=0

for /f %%a in (scripts.ini) do (
set line=%%a

echo !line! | findstr /C:"[Logoff]" 1>nul
if not errorlevel 1 (
    if !diff!==1 goto endlogon
)

echo !line! | findstr "CmdLine=!cmd!" 1>nul
if not errorlevel 1 (
    set /a used+=1
)

if !diff!==1 (
echo !ctr!!line:~1!>>scripts-new.ini
set /a subctr+=1
if !subctr!==2 (
    set /a ctr+=1
    set subctr=0
)
)

echo !line! | findstr /C:"[Logon]" 1>nul
if not errorlevel 1 (
    set diff=1
    echo !line!>>scripts-new.ini
)
)

:endlogon

if /I !type!==logon if !used!==0 (
    echo !ctr!CmdLine=!cmd!>>scripts-new.ini
    echo !ctr!Parameters=!params!>>scripts-new.ini
)

set ctr=0
set diff=0
set used=0

for /f %%a in (scripts.ini) do (
set line=%%a

echo !line! | findstr /C:"[Logon]" 1>nul
if not errorlevel 1 (
    if !diff!==1 goto endlogoff
)

echo !line! | findstr "CmdLine=!cmd!" 1>nul
if not errorlevel 1 (
    set /a used+=1
)

if !diff!==1 (
echo !ctr!!line:~1!>>scripts-new.ini
set /a subctr+=1
if !subctr!==2 (
    set /a ctr+=1
    set subctr=0
)
)

echo !line! | findstr /C:"[Logoff]" 1>nul
if not errorlevel 1 (
    set diff=1
    echo !line!>>scripts-new.ini
)
)

:endlogoff

if /I !type!==logoff if !used!==0 (
    echo !ctr!CmdLine=!cmd!>>scripts-new.ini
    echo !ctr!Parameters=!params!>>scripts-new.ini
)

goto end

:enderror
echo Usage: scripts-extender.bat [LOGON ^| LOGOFF] [Script Name] "[optional Parameters for Script - WITH QUOTES!]"
echo Example: scripts-externder.bat logon netlogon.bat "param1 param2"

:end
move /Y scripts.ini scripts-old.ini
move /Y scripts-new.ini scripts.ini 
```

# javascript - 如何在javascript中“唯一”重复一个函数n次？

> ID：10377618
> 
> 赞同：0
> 
> 时间：2012-04-30T01:44:39.817
> 
> 标签：javascript, jquery, function, raphael, repeat

所以我有一些绘制路径和圆圈的代码。每次启动该功能时，圆圈都会在路径上设置动画。我只想创建 10 条路径，每条路径都有自己的圆圈，在每条路径上都有动画。当我简单地执行该函数 10 次时，路径生成得很好，但是圆圈都沿着相同的单一路径进行动画处理。我在这里做错了什么？这里是创建 for(i=0) 循环的最佳方法吗？

[您可以在jfiddle](http://jsfiddle.net/VEdwG/4/)上查看我的代码，或在此处查看：

```
function commerce() {
Raphael("commercebounce", function () {
            var r = this;   
            function pathfade() {
            var pa = .1,
                pb = .4, 
                pc = [0, 2], 
                pd = [50, 300], 
                pe = [150, 800], 
                pf = [150, 350], 
                pg = pd[0] + Math.random() * (pd[1] - pd[0]), 
                ph = pe[0] + Math.random() * (pe[1] - pe[0]), 
                pi = pf[0] + Math.random() * (pf[1] - pf[0]),
                bd = .1,
                be = .9,
                pathspot = bd + Math.random() * (be - bd),
                colours = ["215,10,45", "115,115,115"],
                stroke = ["", "- "];
                opacity = pa + Math.random() * (pb - pa), colour = "rgb(" + colours[Math.round(Math.random())] + ")", strokeW = pc[Math.round(Math.random())];
                pj = r.path("M 0 " + pg + " C 0 " + pg + " " + (ph - 100) + " " + pg + " " + ph + " 400 M " + ph + " 400 C " + ph + " 400 " + (ph + 100) + " " + pg + " 960 " + pi).attr({stroke: colour,"stroke-dasharray": stroke[Math.round(Math.random())],"opacity": 0});
                bh = r.circle(0, 0, 7, 7).attr({"stroke-width": this.strokeW,stroke: colour,"stroke-opacity": this.opacity,fill: "none","fill-opacity": 0}).onAnimation(function() {
                var t = this.attr("transform")})
                leng = pj.getTotalLength();
                r.customAttributes.along1 = function (v) {
                    var point = pj.getPointAtLength(v * leng);
                    return {
                        transform: "t" + [point.x, point.y] + "r" + point.alpha
                       }
                };
                return bh.attr({along1:0}), bh.animate({along1:pathspot},300), pj.animate({opacity:opacity},300), pj, bh
             }
pathfade();//how do i repeat this function n times?               
    }); 
}
commerce(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:48:23.283

据我所知，一个简单的循环应该没问题。如果您有兴趣，这是在 JavaScript 中循环的最快方法：

```
var i = 10; while (i--) {
//Your code..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:48:03.383

```
var n = 5; //or however much you want
for (var i = 0; i < n; i++){
    pathfade();
} 
```

`for`循环方法是这里最简单的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T05:59:09.813

您需要将 pathfade() 函数分解为多个仅执行少数任务的简单函数。

有两个主要问题。首先，您在变量声明期间应放置逗号的位置放置一个分号。查看笔画变量。其次，当 javascript 只支持一个值时，pathfade 会返回多个值。请记住，一旦您从函数返回，其余的语句就不会被执行。

最后，使用 for、do-while 或 while 循环重复您的函数调用。

这是修复。对不起，我没有时间重构。

```
function commerce() {
    Raphael("commercebounce", function () {
        var r = this;
        function pathfade() {
            var pa = 0.5,
            pb = 0.9,
            pc = [0, 2],
            pd = [50, 300],
            pe = [150, 800],
            pf = [150, 350],
            pg = pd[0] + Math.random() * (pd[1] - pd[0]),
            ph = pe[0] + Math.random() * (pe[1] - pe[0]),
            pi = pf[0] + Math.random() * (pf[1] - pf[0]),
            bd = 0.1,
            be = 0.9,
            pathspot = bd + Math.random() * (be - bd),
            colours = ["215,10,45", "115,115,115"],
            stroke = ["", "- "],
            opacity = pa + Math.random() * (pb - pa),
            colour = "rgb(" + colours[Math.round(Math.random())] + ")",
            strokeW = pc[Math.round(Math.random())],
            pj = r.path("M 0 " + pg + " C 0 " + pg + " " + (ph - 100) + " " + pg + " " + ph + " 400 M " + ph + " 400 C " + ph + " 400 " + (ph + 100) + " " + pg + " 960 " + pi).attr({
                    stroke : colour,
                    "stroke-dasharray" : stroke[Math.round(Math.random())],
                    "opacity" : 0
                }),
            bh = r.circle(0, 0, 7, 7).attr({
                    "stroke-width" : this.strokeW,
                    stroke : colour,
                    "stroke-opacity" : this.opacity,
                    fill : "none",
                    "fill-opacity" : 0
                }).onAnimation(function () {
                    var t = this.attr("transform")
                }),
                leng = pj.getTotalLength();
            r.customAttributes.along1 = function (v) {
                var point = pj.getPointAtLength(v * leng);
                return {
                    transform : "t" + [point.x, point.y] + "r" + point.alpha
                }
            };
            bh.attr({
                along1 : 0
            });
            bh.animate({
                along1 : pathspot
            }, 300);
            pj.animate({
                opacity : opacity
            }, 300);
        }
        var i = 10;
        while( i-- ){
            pathfade();
        }
    });
}
commerce(); 
```

演示：http: [//jsfiddle.net/VEdwG/6/](http://jsfiddle.net/VEdwG/6/)

您应该阅读“C# 风格的元素”。

[http://www.amazon.com/The-Elements-Style-Kenneth-Baldwin/dp/0521671590/ref=cm_cr-mr-title](https://rads.stackoverflow.com/amzn/click/com/0521671590)

# iphone - RestKit 可达性 null

> ID：10377622
> 
> 赞同：0
> 
> 时间：2012-04-30T01:44:54.020
> 
> 标签：iphone, objective-c, ios, restkit, reachability

我的代码中有以下代码`AppDelegate.m`- 的结果`NSLog`总是`(null)`如此，因此永远不会触发无法访问的条件。我想知道为什么会发生这种情况/我做错了什么。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [IKRestKitManager configureRestKit];

    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];

    [self prepareForLogin];

    return YES;
}

#pragma mark - onstart

- (void)prepareForLogin {

    if ([[[RKClient sharedClient] reachabilityObserver] isReachabilityDetermined] && ![[RKClient sharedClient] isNetworkReachable]) {
        UIAlertView *reachAV = [[UIAlertView alloc] initWithTitle:@"Cannot connect to Internet" message:@"iK9 cannot reach the Internet. Please be sure that your device is connected to the Internet and try again." delegate:self cancelButtonTitle:@"Retry" otherButtonTitles:nil];
        reachAV.tag = 0;
        [reachAV show];
    }

    NSLog(@"%@",[[[RKClient sharedClient] reachabilityObserver] isReachabilityDetermined]);

    if (![IKUserController loggedInUser]) {
        IKLoginViewController *loginVC = [[IKLoginViewController alloc] init];
        loginVC.scenario = SCENARIO_NEW;
        [self.window.rootViewController presentModalViewController:loginVC animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T02:33:04.020

根据文档[`RKReachabilityObserver`](http://restkit.org/api/master/Classes/RKReachabilityObserver.html#//api/name/reachabilityDetermined)：

> 初始化时，RKReachabilityObserver 实例处于不确定状态，表明可达性状态尚未建立。在观察者处理完第一个回调后，观察者将对reachabilityDetermined 回答YES，并且networkStatus 将返回一个确定的响应。

在检查连接是否可用之前，您需要等到确定可达性状态。这就是为什么您的第一个 if 语句没有触发的原因。

要监视此更改，请设置通知观察者（来自[此 Stack Overflow 问题](https://stackoverflow.com/questions/8762710/best-way-to-implement-rkreachabilityobserver-in-restkit)）：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                      selector:@selector(reachabilityStatusChanged:) 
                                      name:RKReachabilityDidChangeNotification object:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T02:14:00.587

布尔值*不是*对象，因此 %@ 不是它们的字符串文字。它们实际上是无符号字符，但您使用 NSLog 记录它们：

```
NSLog([[[RKClient sharedClient] reachabilityObserver] isReachabilityDetermined] ? @"Yes" : @"No"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T10:19:30.530

这是 RestKit 0.20 及更高版本中的一些更改。可达性块的代码应如下所示：

```
 RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[RemoteTools serverUrl]];
[manager.HTTPClient setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {
    if (status == AFNetworkReachabilityStatusNotReachable) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No network connection"
                                                        message:@"You must be connected to the internet to use this app."
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
}] 
```

# tsql - SQL Server 2005 时间戳数据类型和触发器可能无法很好地混合

> ID：10377624
> 
> 赞同：2
> 
> 时间：2012-04-30T01:45:00.330
> 
> 标签：tsql, sql-server-2005, c#-4.0

我正在使用带有 SQL Server 2005 后端的 C# 4.0 编写的 Windows 桌面应用程序。应用程序使用 Timestamp 数据类型字段来处理数据并发。一切正常，直到我在数据表上放置了一些触发器来处理审计。现在，当我运行我的测试脚本时，我得到了错误的数据并发错误。就好像触发器正在更新我用来管理并发性的时间戳字段。
听起来对吗？如果是这样，我能做些什么吗？

如果您需要更多信息，这里简要描述了并发检查的工作原理。加载记录时，它会读取 Timestamp 数据类型值并将其与所有其他数据一起存储在类中。
当用户尝试保存数据时，该类开始一个事务，从数据库中读取记录并比较 Timestamp 字段。
如果它们匹配，则在同一个事务中继续保存，并使用看起来像“UPDATE ... ; SELECT @@DBTS”的 T-SQL 语句获取新的时间戳。
如果时间戳不匹配，则会引发数据并发异常。

在我添加审计触发器之前它按计划工作，但现在如果记录更新然后再次更新，它总是会引发数据并发异常。我的猜测是它在更新后获取了新的时间戳值，但触发器导致它在此之后再次更改。

以下是执行更新的代码：

```
// Begin Transaction
SqlConnection conn = new SqlConnection(DataGateway.ConnStr);
SqlTransaction trans;
conn.Open();
trans = conn.BeginTransaction();

// Read current record
DataTable dt = base.Select(conn, trans);

// Timestamps match?
DataRow row = dt.Rows[0];
if (RowversionsEqual(Rowversion, (byte[])row["Rowversion"]))    // Rowversion is a class property that holds the Timestamp obtained when data is initially read, Rowversions equal is a function that compares two Timestamp values
{
    // Timestamps match, update record
    SqlCommand cmd = new SqlCommand("UPDATE WrdImp SET Imp = @Imp, Note = @Note, EditDate = @EditTimestamp, EditBy = @EditBy WHERE BID = @BID AND WID = @WID; SELECT @@DBTS", conn, trans);
    // Code to insert parameter values
    Rowversion = (byte[])cmd.ExecuteScalar();
    trans.Commit();
}
else
{
    // Another user has made an interim change, notify user
    trans.Rollback();
    conn.Close();
    throw new ImpDataConcurrencyException(dt.Rows[0]["EditBy"].ToString(), (DateTime)dt.Rows[0]["EditDate"],MsgComponent.Title, dt.Rows[0]["Imp"].ToString(), dt.Rows[0]["Note"].ToString());
} 
```

这是更新触发器之一。它是由名为 APEX SQL Audit 的第三方产品自动生成的。

```
ALTER TRIGGER [dbo].[tr_u_AUDIT_WrdImp]
ON [dbo].[WrdImp]
FOR UPDATE
NOT FOR REPLICATION
As
BEGIN
DECLARE 
    @IDENTITY_SAVE          varchar(50),
    @AUDIT_LOG_TRANSACTION_ID   Int,
    @PRIM_KEY           nvarchar(4000),
    @Inserted               bit,
    --@TABLE_NAME               nvarchar(4000),
    @ROWS_COUNT             int

SET NOCOUNT ON

--Set @TABLE_NAME = '[dbo].[WrdImp]'
Select @ROWS_COUNT=count(*) from inserted
SET @IDENTITY_SAVE = CAST(IsNull(@@IDENTITY,1) AS varchar(50))

INSERT
INTO [PLIMS].dbo.AUDIT_LOG_TRANSACTIONS 
(
    TABLE_NAME,
    TABLE_SCHEMA,
    AUDIT_ACTION_ID,
    HOST_NAME,
    APP_NAME,
    MODIFIED_BY,
    MODIFIED_DATE,
    AFFECTED_ROWS,
    [DATABASE]
)
values(
    'WrdImp',
    'dbo',
    1,  --  ACTION ID For UPDATE
    CASE 
      WHEN LEN(HOST_NAME()) < 1 THEN ' '
      ELSE HOST_NAME()
    END,
    CASE 
      WHEN LEN(APP_NAME()) < 1 THEN ' '
      ELSE APP_NAME()
    END,
    SUSER_SNAME(),
    GETDATE(),
    @ROWS_COUNT,
    'PLIMS'
)

Set @AUDIT_LOG_TRANSACTION_ID = SCOPE_IDENTITY()

SET @Inserted = 0

If UPDATE([Imp])
BEGIN

    INSERT
    INTO [PLIMS].dbo.AUDIT_LOG_DATA 
    (
        AUDIT_LOG_TRANSACTION_ID,
        PRIMARY_KEY_DATA,
        COL_NAME,
        OLD_VALUE_LONG,
        NEW_VALUE_LONG,
        DATA_TYPE
        , KEY1, KEY2
    )
    SELECT
        @AUDIT_LOG_TRANSACTION_ID,
        convert(nvarchar(1500), IsNull('[WID]='+CONVERT(nvarchar(4000), IsNull(OLD.[WID], NEW.[WID]), 0), '[WID] Is Null')+' AND '+IsNull('[BID]='+CONVERT(nvarchar(4000), IsNull(OLD.[BID], NEW.[BID]), 0), '[BID] Is Null')),
        'Imp',
        CONVERT(nvarchar(4000), OLD.[Imp], 0),
        CONVERT(nvarchar(4000), NEW.[Imp], 0),
        'A'
        , IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[WID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[WID], 0))), IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[BID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[BID], 0)))

    FROM deleted OLD Inner Join inserted NEW On 
        (CONVERT(nvarchar(4000), NEW.[WID], 0)=CONVERT(nvarchar(4000), OLD.[WID], 0) or (NEW.[WID] Is Null and OLD.[WID] Is Null)) AND (CONVERT(nvarchar(4000), NEW.[BID], 0)=CONVERT(nvarchar(4000), OLD.[BID], 0) or (NEW.[BID] Is Null and OLD.[BID] Is Null))
        where (

            (
                NEW.[Imp] <>
                OLD.[Imp]
            ) Or

            (
                NEW.[Imp] Is Null And
                OLD.[Imp] Is Not Null
            ) Or
            (
                NEW.[Imp] Is Not Null And
                OLD.[Imp] Is Null
            )
            )

    SET @Inserted = CASE WHEN @@ROWCOUNT > 0 Then 1 Else @Inserted End
END

If UPDATE([Note])
BEGIN

    INSERT
    INTO [PLIMS].dbo.AUDIT_LOG_DATA 
    (
        AUDIT_LOG_TRANSACTION_ID,
        PRIMARY_KEY_DATA,
        COL_NAME,
        OLD_VALUE_LONG,
        NEW_VALUE_LONG,
        DATA_TYPE
        , KEY1, KEY2
    )
    SELECT
        @AUDIT_LOG_TRANSACTION_ID,
        convert(nvarchar(1500), IsNull('[WID]='+CONVERT(nvarchar(4000), IsNull(OLD.[WID], NEW.[WID]), 0), '[WID] Is Null')+' AND '+IsNull('[BID]='+CONVERT(nvarchar(4000), IsNull(OLD.[BID], NEW.[BID]), 0), '[BID] Is Null')),
        'Note',
        CONVERT(nvarchar(4000), OLD.[Note], 0),
        CONVERT(nvarchar(4000), NEW.[Note], 0),
        'A'
        , IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[WID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[WID], 0))), IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[BID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[BID], 0)))

    FROM deleted OLD Inner Join inserted NEW On 
        (CONVERT(nvarchar(4000), NEW.[WID], 0)=CONVERT(nvarchar(4000), OLD.[WID], 0) or (NEW.[WID] Is Null and OLD.[WID] Is Null)) AND (CONVERT(nvarchar(4000), NEW.[BID], 0)=CONVERT(nvarchar(4000), OLD.[BID], 0) or (NEW.[BID] Is Null and OLD.[BID] Is Null))
        where (

            (
                NEW.[Note] <>
                OLD.[Note]
            ) Or

            (
                NEW.[Note] Is Null And
                OLD.[Note] Is Not Null
            ) Or
            (
                NEW.[Note] Is Not Null And
                OLD.[Note] Is Null
            )
            )

    SET @Inserted = CASE WHEN @@ROWCOUNT > 0 Then 1 Else @Inserted End
END

If UPDATE([EditDate])
BEGIN

    INSERT
    INTO [PLIMS].dbo.AUDIT_LOG_DATA 
    (
        AUDIT_LOG_TRANSACTION_ID,
        PRIMARY_KEY_DATA,
        COL_NAME,
        OLD_VALUE_LONG,
        NEW_VALUE_LONG,
        DATA_TYPE
        , KEY1, KEY2
    )
    SELECT
        @AUDIT_LOG_TRANSACTION_ID,
        convert(nvarchar(1500), IsNull('[WID]='+CONVERT(nvarchar(4000), IsNull(OLD.[WID], NEW.[WID]), 0), '[WID] Is Null')+' AND '+IsNull('[BID]='+CONVERT(nvarchar(4000), IsNull(OLD.[BID], NEW.[BID]), 0), '[BID] Is Null')),
        'EditDate',
        CONVERT(nvarchar(4000), OLD.[EditDate], 121),
        CONVERT(nvarchar(4000), NEW.[EditDate], 121),
        'A'
        , IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[WID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[WID], 0))), IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[BID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[BID], 0)))

    FROM deleted OLD Inner Join inserted NEW On 
        (CONVERT(nvarchar(4000), NEW.[WID], 0)=CONVERT(nvarchar(4000), OLD.[WID], 0) or (NEW.[WID] Is Null and OLD.[WID] Is Null)) AND (CONVERT(nvarchar(4000), NEW.[BID], 0)=CONVERT(nvarchar(4000), OLD.[BID], 0) or (NEW.[BID] Is Null and OLD.[BID] Is Null))
        where (

            (
                NEW.[EditDate] <>
                OLD.[EditDate]
            ) Or

            (
                NEW.[EditDate] Is Null And
                OLD.[EditDate] Is Not Null
            ) Or
            (
                NEW.[EditDate] Is Not Null And
                OLD.[EditDate] Is Null
            )
            )

    SET @Inserted = CASE WHEN @@ROWCOUNT > 0 Then 1 Else @Inserted End
END

If UPDATE([EditBy])
BEGIN

    INSERT
    INTO [PLIMS].dbo.AUDIT_LOG_DATA 
    (
        AUDIT_LOG_TRANSACTION_ID,
        PRIMARY_KEY_DATA,
        COL_NAME,
        OLD_VALUE_LONG,
        NEW_VALUE_LONG,
        DATA_TYPE
        , KEY1, KEY2
    )
    SELECT
        @AUDIT_LOG_TRANSACTION_ID,
        convert(nvarchar(1500), IsNull('[WID]='+CONVERT(nvarchar(4000), IsNull(OLD.[WID], NEW.[WID]), 0), '[WID] Is Null')+' AND '+IsNull('[BID]='+CONVERT(nvarchar(4000), IsNull(OLD.[BID], NEW.[BID]), 0), '[BID] Is Null')),
        'EditBy',
        CONVERT(nvarchar(4000), OLD.[EditBy], 0),
        CONVERT(nvarchar(4000), NEW.[EditBy], 0),
        'A'
        , IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[WID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[WID], 0))), IsNULL( CONVERT(nvarchar(500), CONVERT(nvarchar(4000), OLD.[BID], 0)), CONVERT(nvarchar(500), CONVERT(nvarchar(4000), NEW.[BID], 0)))

    FROM deleted OLD Inner Join inserted NEW On 
        (CONVERT(nvarchar(4000), NEW.[WID], 0)=CONVERT(nvarchar(4000), OLD.[WID], 0) or (NEW.[WID] Is Null and OLD.[WID] Is Null)) AND (CONVERT(nvarchar(4000), NEW.[BID], 0)=CONVERT(nvarchar(4000), OLD.[BID], 0) or (NEW.[BID] Is Null and OLD.[BID] Is Null))
        where (

            (
                NEW.[EditBy] <>
                OLD.[EditBy]
            ) Or

            (
                NEW.[EditBy] Is Null And
                OLD.[EditBy] Is Not Null
            ) Or
            (
                NEW.[EditBy] Is Not Null And
                OLD.[EditBy] Is Null
            )
            )

    SET @Inserted = CASE WHEN @@ROWCOUNT > 0 Then 1 Else @Inserted End
END

-- Watch

-- Lookup

IF @Inserted = 0
BEGIN
    DELETE FROM [PLIMS].dbo.AUDIT_LOG_TRANSACTIONS WHERE AUDIT_LOG_TRANSACTION_ID = @AUDIT_LOG_TRANSACTION_ID
END
-- Restore @@IDENTITY Value  
DECLARE @maxprec AS varchar(2)
SET @maxprec=CAST(@@MAX_PRECISION as varchar(2))
EXEC('SELECT IDENTITY(decimal('+@maxprec+',0),'+@IDENTITY_SAVE+',1) id INTO #tmp')
End

GO
EXEC sp_settriggerorder @triggername=N'[dbo].[tr_u_AUDIT_WrdImp]', @order=N'Last',     @stmttype=N'UPDATE' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:23:06.677

[`@@DBTS`](http://msdn.microsoft.com/en-us/library/ms187366.aspx)为您提供整个数据库中的最新`rowversion`值 - 所以是的，如果触发器的任何部分触及另一个也有`rowversion`列的表，那么您将得到不同的答案。

你能改变你`UPDATE`的使用[`OUTPUT`条款](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.90%29.aspx)吗？

一个单一的声明，如：

```
UPDATE WrdImp
SET
    Imp = @Imp,
    Note = @Note,
    EditDate = @EditTimestamp,
    EditBy = @EditBy
OUTPUT
    inserted.rowversion
WHERE
    BID = @BID AND
    WID = @WID AND
    rowversion = @OldRowVersion; 
```

我在其中添加了旧`rowversion`值（因此 SQL 可以进行检查，我们不需要打开显式事务，也不需要`RowversionsEqual`），并返回新`rowversion`值。

因此，您执行上述语句，并且：a）返回零行 - 这意味着其他内容更新了该行，或 b）返回一行（假设`WHERE`子句的其余部分正确地将 限制`UPDATE`为一行），并且它保证包含该`rowversion`行中列的值，就像`UPDATE`完成时一样。

* * *

我忘记了限制 re: output 子句和触发器。我目前手头没有 2005 实例，但类似于：

```
DECLARE @RV table (RV binary(8));
UPDATE WrdImp
SET
    Imp = @Imp,
    Note = @Note,
    EditDate = @EditTimestamp,
    EditBy = @EditBy
OUTPUT
    inserted.rowversion INTO @RV(RV)
WHERE
    BID = @BID AND
    WID = @WID AND
    rowversion = @OldRowVersion;
SELECT RV from @RV; 
```

现在是 3 个语句而不是 1 个，但仍确保您`rowversion`从感兴趣的行捕获值，而不是数据库中任何位置的最新值。

# html - 放置一个指向pdf的链接并使用pdf作为图像

> ID：10377625
> 
> 赞同：0
> 
> 时间：2012-04-30T01:45:02.033
> 
> 标签：html

我有一个网页，上面有一本杂志。我有一个 img 标签，其中包含指向服务器上 pdf 的链接。当杂志更改时，我必须上传新杂志并上传新图片作为杂志的缩略图。有没有办法通过仅上传 pdf 来完成相同的任务，这样我就不必创建封面图像然后也上传它？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:48:30.687

一些浏览器原生支持嵌入 PDF 文件，但并非所有浏览器都支持。目前无法执行此操作，除非您的服务器上有一个 PDF 到 jpeg 的转换脚本来生成缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:28:10.100

你可以嵌入一个带有对象元素的pdf

# php - 将数组写入xml文件

> ID：10377627
> 
> 赞同：-1
> 
> 时间：2012-04-30T01:45:14.800
> 
> 标签：php, xml, arrays

```
//this is the code that creates the array and the output follows
while ($results_row = mysql_fetch_assoc($results)) {
        $returned_results[]= array(
                                    'partName'=>$results_row['partName'],
                                    'description'=>$results_row['description'],
                                    'price'=>$results_row['price']

//what is contained in the array is as follows
Array
(
[partName] => Cooler Master CM Storm Trooper Case
[description] => Armored appearance. Nicely placed handle at the top. At the front; ext
[price] => 36000
)
1

Array
(
[partName] => Cooler Master eXtreme Power Plus 500-Watt
[description] => Power Plus 500-Watt Power Supply,many SATA and peripheral connectors. 
[price] => 23000
)
1

Array
(
[partName] => Coolmax M-500B ATX Power Supply
[description] => The Coolmax M-500B ATX Power Supply has 5 SATA and 5 Peripheral, 8 pin
[price] => 20000
) 
```

**我需要将数组变量($returned_results[]) 中包含的数据写入 xml 文件。之后，我会将其显示在 xml 表中。但我认为我可以管理后者。你能帮我一个代码示例吗？求求你了，谢谢你！！**

xml 文件应包含如下所示的数组数据

```
<?xml version="1.0" encoding="utf-8"?>
     <results>
           <partName>Cooler Master CM Storm Trooper Case</partName>
           <description>Armored appearance. Nicely placed handle at the top. At the front; ext... </description>
           <price>36000</price>
     </results>
     <results>
            <partName>Cooler Master eXtreme Power Plus 500-Watt</partName>
            <description>Power Plus 500-Watt Power Supply,many SATA and peripheral connectors. ... </description>
             <price>23000</price>
    </results
    <results>
            <partName>Coolmax M-500B ATX Power Supply </partName>
            <description>The Coolmax M-500B ATX Power Supply has 5 SATA and 5 Peripheral, 8 pin..</description>
             <price>20000</price>
    </results> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:53:03.787

使用 fwrite()。前任：

```
$filecontents = file_get_contents ("file.xml");
$file = fopen(file.xml, w+);
//If you uncomment the next line, it will keep the current contents, if not it will overwrite it
//fwrite($file, $filecontents);
fwrite($file, $string/array-to-write);
fclose($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:32:07.090

您可以只使用 PHP 本身（而不是`echo`or`fwrite`等​​）来编写您的 XML。

```
ob_start();
?>
<?xml version="1.0" encoding="utf-8"?>
<?php
while ($results_row = mysql_fetch_assoc($results)) {
?>
<results>
    <partName><?php echo htmlspecialchars($results_row['partName']);?></partName>
</results>
<?php
}

file_put_contents('file.xml', ob_get_clean()); 
```

# c# - 使用 MongoDB 进行深度克隆

> ID：10377630
> 
> 赞同：0
> 
> 时间：2012-04-30T01:45:44.667
> 
> 标签：c#, mongodb

是否可以使用 MongoDB 深度克隆对象？在 C# 中像：

```
Object1 _object2 = new Object1();

BsonValue _bsonValue = _object2.ToBsonDocument().DeepClone()

//now _bsonValue to "Object1" - how to? 
```

如何将“_bsonValue”转换回“Object1”类？这并不是真正用于将对象保存到 MongoDB，只是深度克隆对象并在其他地方使用该对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:22:55.103

使用 ToBsonDocument() 将 _bsonValue 转换回 BsonDocument，然后由您将其转换回您的类。

# javascript - 如何动态应用 base64 编码的数据 uri？

> ID：10377635
> 
> 赞同：2
> 
> 时间：2012-04-30T01:46:15.067
> 
> 标签：javascript, css, dom, dhtml, data-uri

我有以下`z.js`方法可以将样式动态应用于 DOM 元素，如下所示：

```
z.Utils.applyStyle(element,'background-image:stamp.gif') 
```

功能在`z.Utils.applyStyle`这里：

```
z.Utils.applyStyle = function(elRef,style)
{
  if(typeof(elRef) == 'string')
  {
     elRef = document.getElementById(elRef);
  }
  if(elRef == null || style == null || elRef.style == null)
  {
     return null;
  }
  style=style.replace(/\_/g,'-').toLowerCase();
  var pairs = style.split(";");
  for(var ii =0; ii < pairs.length; ii++)
  {
      var kv = pairs[ii].split(":");
      // trim value
      if(!kv[1])
      {
         continue;
      }
      var value = kv[1].replace(/^\s*/,'').replace(/\s*$/,'');
      var key = "";
      for(var jj = 0; jj < kv[0].length; jj++){
          if(kv[0].charAt(jj) == "-")
          {
             jj++;
             if(jj < kv[0].length)
             {
                key += kv[0].charAt(jj).toUpperCase();
             }
             continue;
          }
          key += kv[0].charAt(jj);
      }
      switch(key)
      {
          case "float":
            key = "cssFloat";
            break;
          case "right":
            key="left";
            value=value-z.Utils.getElementOffset(elRef).width;
            break;
          case "bottom":
            key="top";
            value=value-z.Utils.getElementOffset(elRef).height;
            break;
      }
      try
      {
          elRef.style[key] = value;
      }
      catch(e)
      {
          //some error thrown;
      }
  }
  return true;
}; 
```

当我想使用上面的函数将数据 uri 应用为背景图像时该怎么办？就像是：

```
z.Utils.applyStyle(element,'background-image: url(data:image/gif;base64,[base64-code])'); 
```

我用 37K 图像完成了它，但它无法正常工作。
我做错了什么？
可能是，数据 uri 在动态分配中不可用？
可能大 30k+ 大小的 base64 数据是错误的？
有问题的css可以在这里查看：http:
[//bookingshare.fw.hu/data_uri_long.css](http://bookingshare.fw.hu/data_uri_long.css)

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:57:50.897

我认为问题在于这一行：

```
style=style.replace(/\_/g,'-').toLowerCase(); 
```

Base64 区分大小写。此行将使整个样式变为小写。大写的 URLS 也不起作用。

你为什么还要用这个`z.js`？您可以简单地使用 JS 设置样式。

```
element.style.backgroundImage="url('image.png')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:52:54.453

@Sachleen 你是对的。有些。 `style.replace(/\_/g,'-').toLowerCase()`混淆 base64 解码。但是之后代码不能很好地工作，因为`var pairs = style.split(";");` 当我尝试将一堆样式应用于一个元素时，也会在 applyStyle 方法的第 12 行之后混淆 base64 解码，例如

```
z.Utils.applyStyle(elem,'width:10px;'+
    background:transparent url(data:image/gif;base64,stg...) no-repeat;') 
```

由于`";"`背景样式声明中存在字符串`"url(data:image/gif;base64,"`，所以会在其中多出一个数组项`"url(data:image/gif"`，它本身肯定是没用的，因为它是背景声明的头部，所以样式声明被不必要地拆分，完全丢弃；

z.js 完全由我开发，用于教育目的，以消除使用 DOM 的 javascript 初学者对大小写敏感的混淆。 `z.Utils.applyStyle(elem,'Background-Image:url(stamp.gif)')`与 `z.Utils.applyStyle(elem,'background-Image:url(stamp.gif)')`和 等价`z.Utils.applyStyle(elem,'background-image:url(stamp.gif)')`。由于 css 错误不存在运行时，我发现与我的学生合作时这很有用。

无论如何，谢谢，让我专注于更改样式运行时以及 base64 编码图像的限制，这会带来更好的网络性能。

# svn - 什么是svn？以及如何在项目中使用它？

> ID：10377637
> 
> 赞同：4
> 
> 时间：2012-04-30T01:46:21.623
> 
> 标签：svn, ankhsvn

我不知道svn。什么是svn？我的朋友告诉我使用 Assembla，它只是一个存储库？还是svn？

如果我使用 svn 客户端，例如 AnkhSVN，我在哪里存储我的项目？在 AnkhSVN 中？还是汇编？如果存储在 Assembla 中，我必须怎么做才能将其连接到 AnkhSVN？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T01:54:55.593

svn 是[subversion](http://subversion.apache.org/)的缩写，是一种[版本控制](http://en.wikipedia.org/wiki/Revision_control)系统。版本控制是一个巨大的话题——简而言之，这些只是您从使用版本控制中获得的一些好处：

*   跟踪代码库的更改（即谁更改了什么），并回滚到以前的版本
*   通过让版本控制系统将您的更改与其他开发人员对同一文件所做的更改合并，与您的队友协作
*   创建代码的分支，允许您并行维护项目的不同版本

您可以直接从命令行使用 subversion，但也有 GUI 和 IDE 插件可以使 subversion 集成更容易。例如，AnkhSVN 是一个与 Visual Studio 集成的颠覆客户端。

我建议您阅读版本控制方面的内容，然后按照一些颠覆教程来帮助您入门：

*   [版本控制的可视化指南](http://betterexplained.com/articles/a-visual-guide-to-version-control/)
*   [颠覆 - 快速教程](http://aymanh.com/subversion-a-quick-tutorial)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T01:54:16.513

阅读（至少）[使用 Subversion](http://svnbook.red-bean.com/)进行版本控制的[前言](http://svnbook.red-bean.com/en/1.7/svn.intro.whatis.html)，这是 SVN 的权威指南。更好的是，通读引言和第一章。希望它能回答你所有的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T01:54:46.103

所以SVN是一个版本控制和修订控制系统。基本上，它允许团队管理共享代码库。

考虑没有这样一个系统的世界。您有两个程序员 A 和 B。还有两个文件 C 和 D。程序员 A 更改文件 C。然后程序员 B 更改文件 C。如果 B 在程序员 A 编辑之前更改了文件的版本，您就会遇到问题。现在您需要同步两者。你如何管理这个？这就是 SVN 所做的。

此外，很高兴能够说我在一年前进行了这 10 次编辑。让我们回滚到那个版本的代码库。

它是一个复杂的主题，但基本上 SVN、git、CVS、clearcase 等都是解决这些问题的版本控制系统。这里有一些维基文章可供阅读。

[http://en.wikipedia.org/wiki/Apache_Subversion](http://en.wikipedia.org/wiki/Apache_Subversion)

[http://en.wikipedia.org/wiki/Software_versioning](http://en.wikipedia.org/wiki/Software_versioning)

[http://en.wikipedia.org/wiki/Revision_control](http://en.wikipedia.org/wiki/Revision_control)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T01:58:24.270

SVN 只是一种用于存储和访问存储库的方法。诸如 Assembla 和 AnkhSVN 之类的东西只是用于管理存储库的客户端（我相信 Assembla 也会为您的文件托管一个服务器）。SVN 只是一个版本跟踪器。它允许您将文件更改发送到存档，以跟踪谁更改了每个文件版本中的内容。它使您可以轻松撤消某人所做的更改，同时保留其他更改。

我从未使用过 AnkhSVN，但应该可以使用 AnkhSVN 连接到 Assembla 存储库。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2016-01-21T06:21:49.607

SVN 是用于版本控制的 SubVersion 工具。它是用 Java 编写的开源代码。

*   软件开发人员使用 Subversion 来维护文件的当前和历史版本，例如源代码、网页和文档。

# objective-c - NSMutabel 二维数组不起作用

> ID：10377639
> 
> 赞同：0
> 
> 时间：2012-04-30T01:47:03.320
> 
> 标签：objective-c, ios, xcode

我正在从远程服务器中提取二维数组：

```
- (NSMutableArray*)qBlock{

NSURL *url = [NSURL URLWithString:@"http://wsome.php"];
NSError *error;
NSStringEncoding encoding;
NSString *response = [[NSString alloc] initWithContentsOfURL:url 
                                                usedEncoding:&encoding 
                                                       error:&error];
const char *convert = [response UTF8String];
NSString *responseString = [NSString stringWithUTF8String:convert];
NSMutableArray *sample = [responseString JSONValue];

return sample;
} 
```

并将它们放入：

```
NSMutableArray *qnBlock1 = [self qBlock];
NSString *answer1 = [NSString stringWithFormat:[[qnBlock1 objectAtIndex:0]objectAtIndex:1]];
answer = [[NSMutableDictionary alloc]init];
[answer setObject:answer1 forKey:@"1"];

question1.text = [[qnBlock1 objectAtIndex:0] objectAtIndex:0];
label1a.text = [[qnBlock1 objectAtIndex:0]objectAtIndex:2];
label1b.text = [[qnBlock1 objectAtIndex:0]objectAtIndex:3];
label1c.text = [[qnBlock1 objectAtIndex:0]objectAtIndex:4];
label1d.text = [[qnBlock1 objectAtIndex:0]objectAtIndex:5]; 
```

我在运行时收到此错误

```
-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x6c179502012-04-30 09:43:50.794 AppName[371:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x6c17950' 
```

这是由于二维数组的语法问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:53:16.517

你没有得到一个多维数组。您将返回一组 NSDictionary 对象。您收到的错误表明您正在尝试将消息发送`objectAtIndex:`到 NSDictionary 对象，该对象由于没有这样的选择器而失败。

* * *

**更新：**

在一旁聊天之后，很明显以下是真的：

1.  用户正在使用 SBJson 库来解析来自他的 php Web 服务的返回值。
2.  返回值***是***：
    *   一个 NSDictionary，每个键是它在列表中的（非索引）位置的文本表示（@“1”、@“2”等），每个值都是 NSString 对象的 NSArray，***或者***
    *   NSString 对象的 NSArray（似乎是单个“答案”返回的方式）

这是我提供的让他遍历他的返回值的代码：

```
NSURL *url = [NSURL URLWithString:@"{his url}"];
NSError *error;
NSStringEncoding encoding;
NSString *response = [[NSString alloc] initWithContentsOfURL:url usedEncoding:&encoding error:&error];
const char *convert = [response UTF8String];
NSString *responseString = [NSString stringWithUTF8String:convert];
NSLog(@"%@", responseString);
SBJsonParser *parser = [[SBJsonParser alloc] init];
id sample = [parser objectWithString:responseString];
if ([sample isKindOfClass:[NSDictionary class]]) {
    for (id item in sample) {
        NSLog(@"%@", [item description]);
        NSArray *subArray = [sample objectForKey:item]; // b/c I know it's an array
        for (NSString *str in subArray) {
            NSLog(@"item: %@", str);
        }
    }
} else if ([sample isKindOfClass:[NSArray class]]) {
    for (NSString *str in sample) {
        NSLog(@"item: %@", str);
    }
} 
```

希望有帮助，J！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:53:27.637

我认为从您的错误消息中，您正在将 objectAtIndex 发送到字典。NSDictionary 没有这样的方法。您应该改用 objectForKey。

# node.js - 节点应用程序中具有数据层的猫鼬最佳实践

> ID：10377641
> 
> 赞同：6
> 
> 时间：2012-04-30T01:47:34.307
> 
> 标签：node.js, data-access-layer, mongoose

使用 nodejs/express 和 mongoose 查看 nodejs 服务器堆栈

什么被认为是最佳实践解决方案？
(1) 创建一个 mongoose 数据模型模块，然后使用模型对象
(2) 创建一个将在内部使用 mongoose模型的包装数据层模块

**优点 (1)**
我真的很喜欢 mongoose 给我的 OOP 样式类，添加我自己的方法、我自己的 setter 和 getter，我可以添加验证和事件处理程序，并使用 DataModel 而无需在另一个模块中重新定义它。

**（2）的优点**
我应该能够用更简单的实现（测试等）来模拟数据层，或者在需要时切换数据库。

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:15:23.560

我通常从最简单和最不复杂的选项开始，只有在真正需要时才转向更复杂的选项。所以在这种情况下，我总是从选项 1 开始，但还没有找到一个我希望从选项 2 开始的实例。如果我真的需要更改数据库，我会先做这项工作，而不是预先做更多的工作我可能永远不需要。

请记住，这取决于项目有多大以及有多少人在做这个项目。如果它是一个小团队（或只有你），通常不需要额外的抽象层。如果它是一个拥有大型团队的大型项目，我会花一些时间来找出长期可维护性的最佳架构。

# python - 如何在 Django Admin 中使用 can_add_related

> ID：10377642
> 
> 赞同：11
> 
> 时间：2012-04-30T01:47:50.117
> 
> 标签：python, django, django-admin

我在这里阅读了有关 can_add_related 功能：[https ://code.djangoproject.com/ticket/9071](https://code.djangoproject.com/ticket/9071)

我尝试以这种方式使用它：

```
def get_form(self, request, obj=None, **kwargs):
    self.fields['person'].can_add_related = False
    return super(OperationAdmin, self).get_form(request, obj, **kwargs) 
```

但这会引发 TypeError，我不知道如何解决。

有人可以指出我正确的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-27T16:26:10.537

这可能来晚了。但供其他观众参考，

```
def get_form(self, request, obj=None, **kwargs):
    form = super(ProductAdmin, self).get_form(request, obj, **kwargs)
    form.base_fields['category'].widget.can_add_related = False
    return form 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T02:03:56.383

`can_add_related`似乎是[小部件上的一个属性](https://github.com/django/django/blob/master/django/contrib/admin/widgets.py#L224)，而不是字段，所以试试：

```
self.fields['person'].widget.can_add_related = False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-22T09:43:03.193

替代方法，通过更改小部件选项 *before* 实例化表单：

```
class MyAdmin(django.contrib.admin.ModelAdmin):

    def formfield_for_dbfield(self, *args, **kwargs):
        formfield = super().formfield_for_dbfield(*args, **kwargs)
        if hasattr(formfield, "widget"):
            formfield.widget.can_add_related = False
            formfield.widget.can_delete_related = False
            formfield.widget.can_change_related = False
        else:
            pass  # this relation doesn't have an admin page to add/delete/change

        return formfield 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-07T14:49:41.143

另一种方法，如果您要定义一个内联模型并在您的管理员中使用它，将[覆盖 get_formset](https://docs.djangoproject.com/en/3.2/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.get_formset)方法：

```
from django.contrib import admin

class MyModelInline(admin.TabularInline):
    model = MyModel
    extra = 0
    min_num = 1
    max_num = 10
    fields = [
        'some_field'
    ]

    def get_formset(self, request, obj=None, **kwargs):
        fs = super().get_formset(request, obj, **kwargs)
        fs.form.base_fields['some_field'].widget.can_add_related = False
        fs.form.base_fields['some_field'].widget.can_change_related = False
        fs.form.base_fields['some_field'].widget.can_delete_related = False
        return fs 
```

# java - 在 JSF Managed Bean 中检索 Web 应用程序根路径

> ID：10377643
> 
> 赞同：9
> 
> 时间：2012-04-30T01:47:51.283
> 
> 标签：java, jsf, managed-bean

我试图在 jsf 托管 bean 中访问**example/web**文件夹（见下图），但似乎无法找到一种方法来做到这一点

![我试图在 jsf 托管 bean 中访问 **example/web** 文件夹（见下图），但似乎找不到方法](../Images/e1cdbdf4432a18241928830332ceffb1.png)

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T01:58:25.437

尝试

```
FacesContext.getCurrentInstance().getExternalContext().getRequestContextPath() 
```

用于构建应用中资源的相对 URL。

如果你想要真正的路径......

```
ServletContext ctx = (ServletContext) FacesContext.getCurrentInstance()
            .getExternalContext().getContext();
String realPath = ctx.getRealPath("/"); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T17:59:31.100

`File`如果您出于某种原因想要获得它，那么您需要[`ExternalContext#getRealPath()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRealPath%28java.lang.String%29). 这会将相对 Web 路径转换为绝对磁盘文件系统。由于您需要网络的根文件夹，因此只需传入`/`：

```
String absoluteWebPath = externalContext.getRealPath("/");
File webRoot = new File(absoluteWebPath);
// ... 
```

* * *

**与具体问题无关**，无论您想到什么功能要求，您认为拥有指向 Web 文件夹的绝对本地磁盘文件系统路径是正确的解决方案，它肯定需要以不同的方式解决。事实上，根据您对另一个答案的评论，

> *因为我试图在文件夹中上传一些文件并使用相对路径*

你走错路了。如果您打算将上传的文件保存得比 webapp 的部署生命周期更长，则不应在其中存储上传的文件。每当您重新部署 webapp（以及在某些服务器配置上，即使您重新启动服务器），上传的文件都会完全丢失，因为它们没有包含在原始 WAR 文件中。更重要的是，一些重型服务器配置根本不会在磁盘上扩展 WAR，而是在内存中，`getRealPath()`然后总是返回`null`.

而是将其存储在服务器部署文件夹之外的**固定**磁盘文件系统路径中。依次将该路径添加为新的服务器上下文或 docroot，以便可以在不同的（虚拟）上下文路径上访问它。或者自制一个 servlet，`InputStream`它从磁盘获取其中的一个并将其写入`OutputStream`响应。另请参阅此相关答案：[上传的图片仅在刷新页面后可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T14:06:22.557

只是想感谢 Balus C。使用 JSP 编写 Java 代码，在 Tomcat/Tomee 服务器中，我使用以下代码：

```
private Boolean SaveUserItemImage(Part ui, String bid) throws IOException {

    Boolean fileCreate = false;
    OutputStream out = null;
    InputStream filecontent = null;
    ExternalContext ctx = context().getExternalContext();
    String absoluteWebPath = ctx.getRealPath("/");
    String resource_path = absoluteWebPath + "\\resources\\";
    String image_path = resource_path + "\\" + this.itemType + "_images\\";
    String buildFileName = image_path + bid + "_" + getFileName(ui);
    File files = null;

    try {
      files = new File(buildFileName);
      fileCreate = true;
    } catch (Exception ex) {
      System.out.println("Error in Creating New File");
      Logger.getLogger(ItemBean.class.getName()).log(Level.SEVERE, null, ex);
    }

    if (fileCreate == true) {
      if (files.exists()) {
        /// User may be using same image file name but has been editted
        files.delete();
      }

      try {
        out = new FileOutputStream(files);
        filecontent = ui.getInputStream();
        int read = 0;
        final byte[] bytes = new byte[1024];
        while ((read = filecontent.read(bytes)) != -1) {
          out.write(bytes, 0, read);
        }
        fileCreate = true;
      } catch (FileNotFoundException fne) {
        fileCreate = false;
        Logger.getLogger(ItemBean.class.getName()).log(Level.SEVERE, "SaveUserItemImage", fne);
      } finally {
        if (out != null) {
          out.close();
        }
        if (filecontent != null) {
          filecontent.close();
        }
        files = null;
      }
    }
    return fileCreate;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T10:34:08.773

尝试：

```
String relativePath="/resources/temp/";
String absolutePath=   FacesContext.getCurrentInstance.getExternalContext().getRealPath(relativePath);
File file = new File(absolutePath); 
```

获得真正的路径。

在 resources/temp/ 中创建一个 tmp 文件以避免任何异常。

# android - 安卓应用兼容性问题

> ID：10377644
> 
> 赞同：2
> 
> 时间：2012-04-30T01:47:53.513
> 
> 标签：android

我开发了一个安卓应用程序。它的清单非常简单，复制如下。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.siddjain.jainaartis"
    android:versionCode="1"
    android:versionName="1" >
    <uses-sdk android:minSdkVersion="7" />

    <uses-configuration android:reqFiveWayNav="true" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".DisplayForm"
            class=".Aarti" >
        </activity>
    </application>
</manifest> 
```

Play 商店报告此应用与许多设备不兼容。具体来说，它报告它与我的手机**三星 GT-S5570**不兼容。*我手动将应用程序安装到我的手机上，它可以工作。*

开发者控制台给出以下消息：
此应用程序仅适用于具有这些功能的设备，如您的应用程序清单中所定义。
屏幕布局：小 正常 大 XLARGE
所需设备功能
android.hardware.touchscreen
此应用程序可用于超过 266 台设备。

[设备可用性对话框](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&ctx=go&answer=1286017)将三星 GT-S5570 列为不兼容。
**如何解决兼容性问题？我的清单中有哪些内容导致该应用程序被归类为与三星 GT-S5570 不兼容？**如前所述，我已经检查了该应用程序在我的手机上的运行情况。

顺便说一句，手机的规格可以[在这里找到](http://www.gsmarena.com/samsung_galaxy_mini_s5570-3725.php)。它具有 240x320 像素的显示分辨率并具有 Froyo (android v2.2.1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T02:22:20.807

能够使用以下清单解决此问题（必须明确声明对小屏幕的支持）。该应用程序可用的设备数量从 266 增加到 1272。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.siddjain.jainaartis"
    android:versionCode="3"
    android:versionName="1" >
    <uses-sdk android:minSdkVersion="7" />
    <supports-screens android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".DisplayForm"
            class=".Aarti" >
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:16:13.850

可能是运营商限制。Play 商店通过有关您设备的已知信息（屏幕尺​​寸、操作系统、运营商）过滤应用程序，但不会过滤它是否可以安装和/或工作。如果您因为检查兼容性而无法安装，那将是开发（和非 Play 商店应用程序）的噩梦。您是多久前添加该应用程序的？如果您只是添加它，它需要几个小时才能传播并变得可用。

我看到它使用 5 路导航。您的应用程序是否使用它（我假设是这样）并且它是否在您的应用程序中工作？

# c# - 实体框架中更改跟踪的工作原理

> ID：10377647
> 
> 赞同：46
> 
> 时间：2012-04-30T01:48:10.923
> 
> 标签：c#, entity-framework-4, dbcontext, change-tracking

给定以下代码，EF/DbContext 如何知道对**客户**对象所做的更改：

```
class Program
{
    static void Main()
    {
        using(var shopContext = new ShopContext())
        {
            var customer = shopContext.Customers.Find(7);

            customer.City = "Marion";

            customer.State = "Indiana";

            shopContext.SaveChanges();
        }
    }
}

public class ShopContext : DbContext
{
    public DbSet<Customer> Customers { get; set; }
}

public class Customer
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string City { get; set; }
    public string State { get; set; }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-30T07:28:11.010

当您从上下文加载实体时，它会保留一个额外的数据结构 - 我们称之为条目。该条目包含两组值 - 原始值和当前值。当您执行`SaveChanges`操作时，EF 会遍历您的客户实体并更新条目中的当前值，以便它们与您的实体的真实状态相匹配 - 此操作称为*检测更改*。在 SQL 命令生成期间，EF 将比较当前值和原始值并构建 SQL 更新语句来修改数据库中更改的值。此操作称为**快照更改跟踪**- EF 在条目中保留快照。

有一种称为**动态更改跟踪**的替代方法，它将在您将值分配给实体属性的同时修改条目中的当前值。动态更改跟踪有特定的要求（就像实体中的所有属性 must be 一样`virtual`），因为它必须在运行时将您的类包装到动态代理中。这曾经是首选方式，但由于复杂场景中的一些性能问题，目前应该默认使用快照更改跟踪。

# windows-phone-7 - 在 Windows Phone 应用程序中处理图像 - 性能

> ID：10377651
> 
> 赞同：0
> 
> 时间：2012-04-30T01:48:30.917
> 
> 标签：windows-phone-7, image-processing

我有一个应用程序，允许用户拍照并将它们存储在隔离存储中。然后检索这些图像以将它们显示在列表中。当列表中有超过 30 张图像时，该应用程序会出现性能问题。从存储中检索这些图像并将它们绑定到列表需要很长时间。很多时候，应用程序只是被操作系统关闭，因为它需要太长时间。

此外，我认为随着市场上出现分辨率更高的设备，图像的尺寸越来越大，并且对性能的影响更大。

我需要一些关于如何解决这个问题的指导。我有几件事：1）我如何异步检索要从 IS 检索的每个图像，以便页面可以加载，但图像是以异步方式检索的。任何示例代码表示赞赏。2) 另一种方法是在存储原始照片的同时创建实际照片的缩略图照片（较小的尺寸和分辨率），然后使用此缩略图照片绑定到列表。如果应该这样做，那么我应该如何动态处理图像以创建原始照片的较小尺寸的缩略图版本。

任何其他想法也值得赞赏。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:30:20.700

不要将独立存储伪装成 SQL Server。会有很大的性能差异。如果要处理太多数据，请将它们发送到服务器。

但是，有一种获取缩略图的方法。你可以使用它：

[http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)

另外，请检查此答案：

[创建缩略图](https://stackoverflow.com/questions/2808887/create-thumbnail-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T21:49:11.153

如果可以的话，我建议使用[异步 CTP](http://www.microsoft.com/en-us/download/details.aspx?id=9983)并使从隔离存储中加载图像的代码异步。生成缩略图的方法也可以是异步的。

如果您不能这样做（将这些依赖项添加到您的项目中），请使用 BackgroundWorker。也许[这篇](http://wildermuth.com/2011/01/11/Architecting_WP7_-_Part_9_of_10_Threading)文章可以帮助您入门。

这将允许您的 UI 在后台线程上继续处理时做出响应。

# c# - 在另一个表单的文本框中附加文本？

> ID：10377659
> 
> 赞同：0
> 
> 时间：2012-04-30T01:50:01.843
> 
> 标签：c#, winforms, button, textbox

我有 2 个表格。在 上`Form2`，我有一个文本框和一个按钮。当我按下按钮时，我希望它将文本框中的文本附加到`Form1`. 这是我的代码：

开`Form2`：

```
private void button1_Click(object sender, EventArgs e)
{
    frm1.AppendTxt(textBox1.Text);
    this.Close();
} 
```

开`Form1`：

```
public void AppendTxt(string text)
{
    this.body.AppendText(text);
    MessageBox.Show(body.Text);
} 
```

由于某种原因，文本未显示在`Form1`. 但是，弹出的消息框显示了我输入的文本`Form2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:53:24.897

尝试`body.Text += " " + text;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:59:22.977

很可能您正在更改隐藏副本中的文本框`Form1`，而不是屏幕上显示的实例。

尝试将`Form1`句柄传递给`Form2`的构造函数，并将其保存在类成员变量（也称为*field*）中以在事件处理程序中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T02:06:27.033

我认为您必须为您的文本框创建 getter 和 setter，以便它将作为表单类的一部分公开，并且您可以将其作为表单对象首先访问

```
 public string sometext
    {
        get { return sometext.Text; }
        set { sometext.Text = value; }
    } 
```

第二种形式

```
Form1 form= new Form1();
 form.sometext = "some name"; 
```

这是我在 Form1 中找到的另一个简短解决方案，启动表单 2

```
Form2 form2 = new Form2();
form2.Owner = (Form)this;
form2.Show(); 
```

在 Form2 中

```
this.Owner.Controls.Find("TextBox1",true).First().Text="Hi!!!!" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T02:11:50.813

在表单之间传递值。

你可以试试这个。首先，您可以声明一个所有表单都可以像这样访问的变量，

```
string yourValue; 
```

PS：声明你的班级

从 form1，您可以将值传递给该类。像这样，

```
YourClass.yourValue = textbox1.text; 
```

一旦有了价值。把它传递给你的第二种形式。

```
textbox2.text = YourClass.yourValue; 
```

希望它可以帮助你。:D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T02:29:07.890

您有两种形式：form1 和 form2。两种形式正在开放。在 form2 中，您有一个文本框（txt2）和一个按钮（btn2）。在 form1 中，您有一个文本框（txt1）。当用户在 txt2 上键入内容并单击 btn2 时，txt2 中的文本将附加到 txt1。这就是你想要的？

如果是：在 form2 中，您应该创建一个委托：

```
// Declare a delegate
public delegate void GetValue(string value);
// Declare event with delegate
public event GetValue btn2_Clicked; 
```

然后，在 form2 中，您创建一个函数来处理该事件：函数名称与您刚刚声明的事件名称相同，并在其中添加前缀“On”。像这样：

```
public void Onbtn2_Clicked(string value)
{
    if (btn2_Clicked != null)
    {
        btn2_Clicked(value);
    }
} 
```

之后，在 btn2 点击事件中，提升你刚刚创建的事件：

```
private void btn2_Click(object sender, EventArgs e)
{
    Onbtn2_Clicked(txt2.Text);
} 
```

好的，这是在form2中完成的。复出 form1 完成：我假设当用户单击 form1 中的按钮（btn1）时打开了 form2，因此在 btn1 中单击事件：

```
private void btn1_Click(object sender, EventArgs e)
{
    // Create form2
    Form2 frm2 = new Form2();
    // Handle btn2 click
    frm2.btn2_Clicked += new Form2.GetValue(frm2_btn2_Clicked);
    // Show form2
    frm2.Show();

}

void frm2_btn2_Clicked(string value)
{
    // When btn2 is clicked, the text in txt2 will be assign to txt1
    txt1.Text = value;                
} 
```

并且文本将分配给form1中的txt1

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-18T13:33:21.940

将 Form2.designer.cs 中的 txtBox 从私有更改为公共如何？

```
private System.Windows.Forms.TextBox textBox1; 
```

至

```
public System.Windows.Forms.TextBox textBox1; 
```

这样你就可以在 Form2 中像这样发送它：

```
Form1 frm1 = new Form1();

private void button1_Click (object sender, EventArgs e)
frm1.textBox1.AppendText(textBox2); 
```

textBox2 是您在 Form2 中输入文本的地方

# apache - JAR 中的 Apache HttpClient 寻找 JBoss 参考？

> ID：10377665
> 
> 赞同：0
> 
> 时间：2012-04-30T01:51:19.750
> 
> 标签：apache, jboss, jar, pojo, apache-httpclient-4.x

我正在使用 Apache`HttpClient`库来处理我与 API 的通信。当我对分解的代码进行单元测试时，我的所有代码都会编译并运行而不会出错。但是，当我 JAR 源并在隔离的集成测试中测试代码时，我收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jboss/logmanager/Logger$AttachmentKey
    at org.slf4j.impl.Slf4jLoggerFactory.<clinit>(Slf4jLoggerFactory.java:31)
    at org.slf4j.impl.StaticLoggerBinder.getLoggerFactory(StaticLoggerBinder.java:33)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:240)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:208)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:155)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:131)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)
    at org.apache.http.impl.client.AbstractHttpClient.<init>(AbstractHttpClient.java:159)
    at org.apache.http.impl.client.DefaultHttpClient.<init>(DefaultHttpClient.java:178)
    at opart.api.client.trasnsport.Transport.get(Transport.java:81)
    at opart.api.client.dao.objects.ObjectsDao.getInterestingObjects(ObjectsDao.java:70)
    at opart.api.client.OpartApiClient.getInterestingObjects(OpartApiClient.java:79)
    at ApiTest.interesting(ApiTest.java:32)
    at ApiTest.main(ApiTest.java:21)
Caused by: java.lang.ClassNotFoundException: org.jboss.logmanager.Logger$AttachmentKey
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 14 more 
```

当我尝试实例化一个 DefaultHttpClient 对象时：

```
DefaultHttpClient defaultHttpClient = new DefaultHttpClient(); 
```

我在 JAR 中包含的库是：

*   番石榴-r09.jar
*   commons-logging-1.1.1.jar
*   httpclient-4.1.2.jar
*   httpcore-4.1.2.jar
*   gson-1.7.1.jar

关于它为什么尝试引用 JBoss 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:48:09.327

我找到的解决方案是使用`zipfileset`ant 目标，它可以安全地在 uber JAR 的根目录内爆炸 JARchives 的内容。

# android - 设置eclipse时出错

> ID：10377670
> 
> 赞同：1
> 
> 时间：2012-04-30T01:52:30.643
> 
> 标签：android, eclipse

尝试为 Eclipse 安装 ADT 插件时，我按照说明操作并在 Android SDK 管理器中收到这些错误：

```
Fetching https://dl-ssl.google.com/android/repository/addons_list-1.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/addons_list-1.xml, reason: Unknown Host https://dl-ssl.google.com/android/repository/repository.xml
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-6.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-6.xml, reason: https://dl-ssl.google.com/android/repository/repository.xml
Done loading packages. 
```

我想知道是否还有其他人也遇到过这些问题以及他们是如何解决的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:54:37.013

如果我将该 URL 粘贴到浏览器中，我会返回 XML：

[https://dl-ssl.google.com/android/repository/addons_list-1.xml](https://dl-ssl.google.com/android/repository/addons_list-1.xml)

这个也有效：

[https://dl-ssl.google.com/android/repository/repository.xml](https://dl-ssl.google.com/android/repository/repository.xml)

我不确定是什么问题，但我知道不是什么问题。这些 URL 是有效的。

更新：每当我遇到错误时，我的第一反应是将其粘贴到 Google 搜索中。我通常会发现我并不孤单。也许第一个链接可以帮助你：

[http://code.google.com/p/android/issues/detail?id=21359](http://code.google.com/p/android/issues/detail?id=21359)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:06:04.113

您可能会考虑重新下载 eclipse 并将其放在新的位置。Eclipse ......当它工作时很好，但当它不工作时它是一个摇摆和错过。否则，请确保您在 URL 中输入的所有内容都完全正确。我记得我曾经在我的 URL 中有一个空格，但它不会下载，我花了大约 20 分钟才弄清楚为什么我的复制/粘贴的 URL 不起作用。后来我觉得自己很傻。

# java - 如何将天数、周数、月数、年数转换为天数（就每日储蓄而言）

> ID：10377671
> 
> 赞同：1
> 
> 时间：2012-04-30T01:52:41.873
> 
> 标签：java, android, math

所以我正在为Android开发一个小储蓄应用程序。我需要处理三个值。我有一个每日储蓄金额的价值，另一个是每月储蓄金额，另一个是每年储蓄金额。然后我想放入一个要购买的对象。并输出您可以购买此物品的年数、月数、天数、周数。

我希望它被格式化为您将能够在 1 个月 2 周 3 天之内负担得起这个项目

```
double days_till;
 int years;
 int months;
 int weeks;

 days_till = price/ daily_savings;

 years = (int) (days_till/365);

 int new_days_till = (int) ((days_till - years) * 365);

 months = new_days_till/30;

 int new_days_till2 = new_days_till - months*30;

 weeks = new_days_till2/7;

 int new_days_till3 = new_days_till2 - 7 * weeks;

 String days_till_string = String.valueOf(years) + " years" + String.valueOf(months) + " months" + String.valueOf(weeks) + " weeks" + String.valueOf(new_days_till3) + "days"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T03:21:11.600

您可能会对此方法感兴趣：http: [//developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString(long, long, long, int)](http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28long,%20long,%20long,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:49:19.670

我不能告诉你如何在代码中做到这一点，但我会如何尝试解决这个问题。1.我会找到我需要保存多少天，然后我会通过将天数添加到开始日期来找到可以购买产品的日期。（startdate + n= enddate）这将给出我约会，例如 5 月 21 日。开始 endmounth - 如果 mounth 的日期在两者中相同（endmounth - startmount = numbersofmounths），则 startmount 会给 med 一些挂载以保存。进一步：如果我开始储蓄的日期少于 endmounth 的日期，那么我需要从 endmounth 的日期减去 startmonth 的日期以获得额外的天数。（startday - endday = 额外的天数）如果我开始为了节省比 endmounth 大的一天，我需要从坐骑数量中减去 1，然后找到额外的天数向用户显示)maxdayofmounth - startday)+endday = 额外天数。然后，您只需告知用户安装次数和计算的天数。

# c# - Windows 服务中的语音识别引擎未触发事件

> ID：10377673
> 
> 赞同：8
> 
> 时间：2012-04-30T01:53:11.433
> 
> 标签：c#, windows-services, speech-recognition

所以我有一个使用 system.speech 识别引擎实现语音识别的 Windows 服务。当我启动服务时，我的语音识别代码运行良好，但没有发生语音识别火灾的事件。奇怪的是，如果我运行完全相同的代码，但在控制台或 WPF 应用程序中，语音识别的事件触发就可以正常工作。
我已经在我的服务进程中附加了一个调试器，以检查幕后发生的事情。似乎语音识别引擎正确加载了语法，将其模式设置为连续收听，并正确设置了语音识别事件。没有抛出异常，所以我不太确定这里出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-28T21:14:41.170

SpeechRecognition 应该在单独的线程上运行，并且来自 SpeechRecognitionEngine OOTB，应该是这样的：

```
static ManualResetEvent _completed = null;
static void Main(string[] args)
{
     _completed = new ManualResetEvent(false);
     SpeechRecognitionEngine _recognizer = new SpeechRecognitionEngine();
     _recognizer.RequestRecognizerUpdate(); // request for recognizer update
     _recognizer.LoadGrammar(new Grammar(new GrammarBuilder("test")) Name = { "testGrammar" }); // load a grammar
     _recognizer.RequestRecognizerUpdate(); // request for recognizer update
     _recognizer.LoadGrammar(new Grammar(new GrammarBuilder("exit")) Name = { "exitGrammar" }); // load a "exit" grammar
     _recognizer.SpeechRecognized += _recognizer_SpeechRecognized; 
     _recognizer.SetInputToDefaultAudioDevice(); // set the input of the speech recognizer to the default audio device
     _recognizer.RecognizeAsync(RecognizeMode.Multiple); // recognize speech asynchronous
     _completed.WaitOne(); // wait until speech recognition is completed
     _recognizer.Dispose(); // dispose the speech recognition engine
} 
void _recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
     if (e.Result.Text == "test") // e.Result.Text contains the recognized text
     {
         Console.WriteLine("The test was successful!");
     } 
     else if (e.Result.Text == "exit")
     {
         _completed.Set();
     }
} 
```

当我使用 SpeechRecognition 而不是 SpeechRecognitionEngine 时也有类似的问题。以上是一个很好的用法示例+它在另一个线程中监听事件。ps：我从一篇很棒的文章中得到了参考： [Speech recognition, speech to text, text to Speech, and Speech synthesis in C#](http://www.codeproject.com/Articles/483347/Speech-recognition-speech-to-text-text-to-speech-a) have Fun :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T18:06:52.997

您是在使用麦克风还是在处理 WAV 文件？如果您尝试使用默认音频设备，我不确定音频管道将如何在服务中工作。如果您尝试从音频文件或流转换，请确保您使用的是 InProc 识别器。

如果您正在创建服务器应用程序，您可能应该考虑使用 Microsoft.Speech API 和服务器识别器。请参阅[System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re)和 Microsoft 语音平台 SDK - [http://www.microsoft.com/en-us/download/details.aspx?id=27226](http://www.microsoft.com/en-us/download/details.aspx?id=27226)

如果您尝试在没有您的应用程序在前台的情况下进行持续识别，我相信共享识别器可能能够满足您的需求。Windows 7 和 Vista 中附带的 Microsoft 桌面识别器可以在两种模式下工作：inproc 或 shared。共享识别器在使用语音命令控制任何打开的应用程序的桌面上很有用。在 System.Speech 中，您可以使用[SpeechRecognizer](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognizer.aspx)访问共享桌面识别器或[SpeechRecognitionEngine](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.aspx)为您的应用程序提供专用的 inproc 识别器。即使您的应用程序不在前台，您也可以使用共享识别器为您的应用程序提供持续识别。

几年前在[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)上发表了一篇非常好的文章。这可能是迄今为止我发现的最好的介绍性文章。它说：

> ...识别引擎可以在另一个名为 SAPISVR.EXE 的进程中实例化。这提供了一个可以被多个应用程序同时使用的共享识别引擎。这种设计有很多好处。首先，识别器通常比合成器需要更多的运行时资源，共享识别器是减少开销的有效方法。其次，Windows Vista 的内置语音功能也使用共享识别器。因此，使用共享识别器的应用程序可以从系统的麦克风和反馈 UI 中受益。无需编写额外的代码，也无需用户学习新的 UI。SAPI 5.3 的新功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T02:10:49.497

您是否尝试将服务设置为允许与桌面交互？

![图片](../Images/cbcdf83195c5f7c63a2909b3e1ca4f21.png)

我相信此设置涵盖了与麦克风等用户接口设备的交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-22T10:35:34.307

如果@Robocide 答案对您不起作用，就像我的情况一样，您所要做的就是在 Main 方法中将 SpeechRecognitionEngine 声明为字段而不是局部变量。

例子：

```
 private SpeechRecognitionEngine _recognizer = null; //make the speeach recognition engine a private field
     static void Main(string[] args)
    {
          _recognizer = new SpeechRecognitionEngine();
         _recognizer.RequestRecognizerUpdate(); // request for recognizer update
         _recognizer.LoadGrammar(new Grammar(new GrammarBuilder("test")) Name = { "testGrammar" }); // load a grammar
         _recognizer.RequestRecognizerUpdate(); // request for recognizer update
         _recognizer.LoadGrammar(new Grammar(new GrammarBuilder("exit")) Name = { "exitGrammar" }); // load a "exit" grammar
         _recognizer.SpeechRecognized += _recognizer_SpeechRecognized; 
         _recognizer.SetInputToDefaultAudioDevice(); // set the input of the speech recognizer to the default audio device
         _recognizer.RecognizeAsync(RecognizeMode.Multiple); // recognize speech asynchronous
         _recognizer.Dispose(); // dispose the speech recognition engine
    } 

void _recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
     if (e.Result.Text == "test") // e.Result.Text contains the recognized text
     {
         Console.WriteLine("The test was successful!");
     } 
} 
```

如果您注意到，我删除了 ManualResetEvent，因为如果语音未被识别，它不允许某些进程运行。

# http - HTTP代理、隧道、网关有什么区别？

> ID：10377679
> 
> 赞同：19
> 
> 时间：2012-04-30T01:54:04.980
> 
> 标签：http, proxy, gateway, tunnel

全部，我看到了 RFC 2616 中的条款。 [http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html#sec1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html#sec1)

但是我看不懂代理、隧道和网关的区别？谁能给我一个简单的解释？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T04:03:01.967

[下面的答案是根据RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html#sec1)中的定义解释的

代理和服务器具有使用单词**程序**的定义。然而，对于网关，它没有。这是您应该注意的区别之一。

尝试通过处理请求来比较代理和网关。对于代理：

> “请求在内部提供服务，或者通过 **可能的翻译**将它们传递给其他服务器。”

它本质上*可能会*改变通过它传递的请求或响应。

网关定义指定它：

> “充当其他服务器的中介。与代理不同，网关接收请求，就好像它是所请求资源的源服务器一样；请求客户端可能不知道它正在与网关通信。”

因此，在这种情况下，网关几乎可以接收和传递通过它的任何内容。

隧道就像一根管子，两端各有一个点。中间程序或服务器不知道此连接。此隧道可由 HTTP 请求启动。当任一端点决定丢弃隧道时，隧道将被删除。

# objective-c - 设置活动指示器，直到从服务器加载图像？

> ID：10377680
> 
> 赞同：2
> 
> 时间：2012-04-30T01:54:12.257
> 
> 标签：objective-c, ios, cocoa, ipad

我是 iOS 开发的新手，所以请多多包涵。我正在使用表格视图和滚动视图制作照片网格。我的问题是如何加载活动指示器，直到从服务器下载图像然后显示图像并删除活动指示器？

我试图远离第三方库，因为我想了解它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:23:32.573

在您的视图上放置一个活动指示器（通过 Interface Builder 或手动）。将属性设置为“不制作动画时隐藏”。

在进行服务器调用时，调用 [activityIndi​​cator startAnimating]（IBOutlet 属性）。当返回实际图像时，调用[activityIndi​​cator stopAnimating]。停止时会自动隐藏。

您还可以使用 iPhone/Pad 状态栏中的活动指示器。为此，请使用 [[UIApplication sharedApplication] setNetworkActivityIndi​​catorVisible:YES]; 设置为 NO 以隐藏它......（显然）

查看[下载图像异步](http://blog.sallarp.com/iphone-uiimage-asynchronously/)以获取图像的示例。您将在 didReceiveData 函数中停止活动指示器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T12:35:22.070

[https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCsQFjAA&url=https%3A%2F%2Fgithub.com%2Fjakemarsh%2FJMImageCache&ei=UEp7U_W2GoWB8gWShIGgBQ&usg= AFQjCNEc0a59K2wEOlZ2IbapWhVc87kHmg&bvm=bv.67229260,d.dGc](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCsQFjAA&url=https%3A%2F%2Fgithub.com%2Fjakemarsh%2FJMImageCache&ei=UEp7U_W2GoWB8gWShIGgBQ&usg=AFQjCNEc0a59K2wEOlZ2IbapWhVc87kHmg&bvm=bv.67229260,d.dGc)

在这里，您可以找到可用于下载图像的 JMImage 缓存文件。

你必须改变 UIImageView+JMImageCache.m 文件

```
 if(i) {
        dispatch_async(dispatch_get_main_queue(), ^{
            safeSelf.jm_imageURL = nil;

            safeSelf.image = i;

            [safeSelf setNeedsLayout];
            [safeSelf setNeedsDisplay];

            if (completionBlock) {
                completionBlock(i).
            }
        }); 
```

然后使用方法

```
enter code here 
```

{

[yourImageView setImageWithURL:[NSURL URLWithString:urlString] placeholder:[UIImage imageNamed:@"placeholder"] completionBlock:^(UIImage *image) { // 移除此处添加的活动指示器

```
}failureBlock:^(NSURLRequest *req,NSURLResponse *resp,NSError *error)
{
// show error message
}]; 
```

}

# php - 如何使用 .htaccess mod rewrite 将 php url 重定向为字符串？

> ID：10377681
> 
> 赞同：1
> 
> 时间：2012-04-30T01:54:12.267
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我一直在努力：

```
http://site.com/file.php?x=foo 
```

重定向到：

```
http://newsite.com/something/completely/different/ 
```

使用以下内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^file\.php?x=foo$ http://newsite.com/something/completely/different/ [R=301,NC,L]

</IfModule> 
```

但它什么也没做（只是加载相同的旧页面，就好像我从未接触过 htaccess 一样）。

有什么我想念的吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:56:17.943

`?`末尾的使`.php`最后一个`p`可选（所以`.phpx=foo`或`.phx=foo`将匹配）。它实际上并未被视为比赛中的角色。尝试转义`?`：`\?`

**编辑**：

对于那些想知道解决方案是什么的人：

查询字符串参数不会传递给`RewriteRule`匹配的字符串。所以你必须先创建一个`RewriteCond`，`QUERY_STRING`然后匹配没有参数的url。例如：

```
RewriteCond %{QUERY_STRING} x=foo
RewriteRule ^file\.php$ http://newsite.com/something/completely/different/ [R=301,NC,L] 
```

可能/希望有更好的方法来做到这一点（因为这`RewriteCond`会级联到其他规则，这很烦人）。

# php - php包含未终止的字符串文字消息

> ID：10377683
> 
> 赞同：1
> 
> 时间：2012-04-30T01:54:32.877
> 
> 标签：php, javascript

以下工作正常：

```
var sFirstText=<?php include("first2.html"); ?>; 
```

当 first2.html 看起来像这样包括双引号时：

```
"<p>sentence one</p><p>sentence two</p>" 
```

但是，如果 first2.html 看起来像：

```
"<p>sentence one</p>
<p>sentence two</p>" 
```

我收到一条未终止的字符串文字消息。我希望弄清楚如何在不删除回车/换行序列的情况下包含 html。

另外，如果我删除双引号并执行以下操作：

```
var sFirstText="<?php include("first2.html"); ?>"; 
```

那行不通，返回一条我还无法理解的消息。

基本上，我想将简单的 html 格式设置为字段，而无需删除 cr/lf 序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:59:01.593

尝试`\`在行尾使用 a 将字符串继续到下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:28:20.567

Javascript 无法处理这些换行符。您可能想打开文件，读取内容并将其替换为空格。

此外，在获取源内容时，您需要转义用于包装它的引用类型。

这就是我要做的。

```
function contents($file, $wrappingQuote='\'') {
    $fh = fopen($file,'r');
    $contents = fread($fh,filesize($file));
    fclose($fh);
    echo preg_replace('~\'~','\\'.$wrappingQuote,preg_replace('~\r?\n~','',$contents));
} 
```

（……）

```
var str = '<?php contents('first2.html') ?>';
// or
var str = "<?php contents('first2.html','"') ?>"; 
```

# php - php指定数组值？传递给 each() 的变量不是数组或对象

> ID：10377685
> 
> 赞同：1
> 
> 时间：2012-04-30T01:54:41.227
> 
> 标签：php, arrays

初学者 PHP 程序员在这里尝试使用 mailchimp API...

关于我在这里的第一行代码，我不断收到此 PHP 错误。如您所见，我正在从表单中发布一个值，但我不确定发生了什么。

错误：警告：传递给 each() 的变量不是第 24 行 xxxxxxx 中的数组或对象（这是第一行）

```
while (list($key, $val) = each($_POST['MCgroup'])) {
        $interest .= ($count>0 ? ", " : "");
        $interest .= $val;
        $count++;
    }

    echo $interest; //echos NOTHINGblank
    $mergeVars = array(
                       'INTERESTS'=>$interest
                        );

    echo $mergeVars; //echos the word ARRAY 
```

根据我的研究，显然我没有通过实际的 ARRAY ......而且从我发现的内容来看，我的语法似乎都是正确的。（但我可能会忽略一些东西）。

这是传递值的表单代码部分

```
 <input type="hidden" name="MCgroup" id="MCgroup" value="My Interest One" />
 <input type="hidden" name="MCgroup" id="MCgroup" value="My Interest Two" /> 
```

或者我可以将其更改为

```
<input type="hidden" name="MCgroup" id="MCgroup" value="My Interest One, My Interest Two" /> 
```

我只是不确定如何将它变成一个数组。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:40:20.037

将 HTML 名称更改为数组：

```
 <input type="hidden" name="MCgroup[]" id="MCgroup1" value="My Interest One" />
 <input type="hidden" name="MCgroup[]" id="MCgroup2" value="My Interest Two" />
 <input type="hidden" name="MCgroup[]" id="MCgroup3" value="And another sparkling interest" /> 
```

如果它是唯一的，也只使用 id 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:40:37.293

您可以`<input>`通过后缀设置您的数组名称`[]`，执行以下操作：

`<input type="hidden" name="MCgroup[]" id="MCgroup" value="My Interest One" />` `<input type="hidden" name="MCgroup[]" id="MCgroup" value="My Interest Two" />`

然后通过以下方式检查：

`print_r($_POST['MCgroup']);`

我假设您将表单方法设置为 POST。

# iphone - 闪电延迟 - Cocos2d

> ID：10377688
> 
> 赞同：1
> 
> 时间：2012-04-30T01:54:56.353
> 
> 标签：iphone, cocos2d-iphone

我有几个物体从屏幕顶部“落下”，当它们被轻敲时，闪电击中它们。我的问题是，当其中一个物体被轻敲并且闪电击中时，我的 FPS 下降并且游戏滞后。

有人可以帮我减少这种滞后或引导我走向正确的方向吗？我不知道如何解决它。我的游戏结束了，这是唯一让我退缩的东西......

这是闪电代码。

闪电.h

```
//
//  Lightning.h
//  Trundle
//
//  Created by Robert Blackwood on 12/1/09.
//  Copyright 2009 Mobile Bros. All rights reserved.
//

#import "cocos2d.h"

/*! This will draw lighting and return the midpoint */
CGPoint drawLightning(CGPoint pt1, CGPoint pt2, int displace, int minDisplace, unsigned long randSeed, float width);
void drawSmoothLine(CGPoint *pos1, CGPoint *pos2, float width);
void drawSmoothPointAt(CGPoint *pos, float width);
void fillSmoothRectangle(CGRect *r, float width);

@interface Lightning : CCNode <CCRGBAProtocol>
{
    CGPoint _strikePoint;
    CGPoint _strikePoint2;
    CGPoint _strikePoint3;

    ccColor3B   _color;
    GLubyte     _opacity;
    BOOL        _split;
    BOOL        _glow;

    int _displacement;
    int _minDisplacement;
    float _lighteningWidth;

    unsigned long _seed;
}

@property (readwrite, assign) CGPoint strikePoint;
@property (readwrite, assign) CGPoint strikePoint2;
@property (readwrite, assign) CGPoint strikePoint3;
@property (readwrite, assign) ccColor3B color;
@property (readwrite, assign) GLubyte opacity;
@property (readwrite, assign) BOOL split;
@property (readwrite, assign) BOOL glow;
@property (readwrite, assign) int displacement;
@property (readwrite, assign) int minDisplacement;
@property (readwrite, assign) float lighteningWidth;
@property (readwrite, assign) unsigned long seed;

+(id) lightningWithStrikePoint:(CGPoint)strikePoint strikePoint2:(CGPoint)strikePoint2;

-(id) initWithStrikePoint:(CGPoint)strikePoint strikePoint2:(CGPoint)strikePoint2;

-(void) strikeRandom;
-(void) fade;

@end 
```

闪电.m

```
//
//  Lightning.m
//  Trundle
//
//  Created by Robert Blackwood on 12/1/09.
//  Copyright 2009 Mobile Bros. All rights reserved.
//

#import "Lightning.h"

@implementation Lightning

@synthesize strikePoint = _strikePoint;
@synthesize strikePoint2 = _strikePoint2;
@synthesize strikePoint3 = _strikePoint3;
@synthesize color = _color;
@synthesize opacity = _opacity;
@synthesize displacement = _displacement;
@synthesize minDisplacement = _minDisplacement;
@synthesize lighteningWidth = _lighteningWidth;
@synthesize seed = _seed;
@synthesize split = _split;
@synthesize glow = _glow;

+(id) lightningWithStrikePoint:(CGPoint)strikePoint strikePoint2:(CGPoint)strikePoint2
{
    return [[[self alloc] initWithStrikePoint:strikePoint strikePoint2:strikePoint2] autorelease];
}

-(id) initWithStrikePoint:(CGPoint)strikePoint strikePoint2:(CGPoint)strikePoint2
{
    if ((self = [super init]))
    {
        _strikePoint = strikePoint;
        _strikePoint2 = ccp(0, 0);
        _strikePoint3 = strikePoint2;

        _color = ccc3(255, 190, 255);

        //random style
        _displacement = 100 + CCRANDOM_0_1() * 200;
        _minDisplacement = 4 + CCRANDOM_0_1() * 10;
        _lighteningWidth = 2.0f;
        _split = YES;
        _glow = YES;

        [self strikeRandom];
    }

    return self;
}

-(void) draw
{
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glColor4ub(_color.r, _color.g, _color.b, _opacity);

    drawLightning(_strikePoint3, _strikePoint, _displacement, _minDisplacement, _seed, _lighteningWidth);

    if (_glow)
    {
        glBlendFunc(GL_SRC_ALPHA, GL_ONE);
        glColor4ub(50, 0, 255, _opacity);
        drawLightning(_strikePoint3, _strikePoint, _displacement, _minDisplacement, _seed, 7);
    }

    if (_opacity != 255)
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    if (_opacity != 255)
        glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST);

    glColor4f(1.0, 1.0, 1.0, 1.0);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);
}

-(void) strikeRandom
{
    _glow = YES;
    _seed = rand();
    [self fade];
}

- (void) removeLightning {
    self.visible = NO;
}

- (void) fade
{
    self.visible = YES;
    self.opacity = 255;

    [self runAction:[CCSequence actions: 
                    // [DelayTime actionWithDuration:1.0],
                     [CCShow action],
                     [CCFadeOut actionWithDuration:0.5],
                     [CCCallFunc actionWithTarget:self selector:@selector(removeLightning)],
                     nil]];
}

-(void)dealloc
{
    [super dealloc];
}

@end

int getNextRandom(unsigned long *seed)
{
    //taken off a linux site (linux.die.net)
    (*seed) = (*seed) * 1103515245 + 12345;
    return ((unsigned)((*seed)/65536)%32768);
}

CGPoint drawLightning(CGPoint pt1, CGPoint pt2, int displace, int minDisplace, unsigned long randSeed, float width)
{   
    CGPoint mid = ccpMult(ccpAdd(pt1,pt2), 0.5f);

    if (displace < minDisplace)
    {
        //ccDrawLine(pt1, pt2);
        drawSmoothLine(&pt1, &pt2, width);
        drawSmoothPointAt(&mid, width);
    }
    else
    {
        int r = getNextRandom(&randSeed);
        mid.x += (((r % 101)/100.0)-.5)*displace;
        r = getNextRandom(&randSeed);
        mid.y += (((r % 101)/100.0)-.5)*displace;

        drawLightning(pt1,mid,displace/2,minDisplace,randSeed,width);
        drawLightning(pt2,mid,displace/2,minDisplace,randSeed,width);
    }

    return mid;
} 

void drawSmoothLine(CGPoint *pos1, CGPoint *pos2, float width)
{
    GLfloat lineVertices[12], currentColor[4]; 
    GLint   red, green, blue, alpha;
    CGPoint dir, tan;

    dir.x = pos2->x - pos1->x;
    dir.y = pos2->y - pos1->y;
    float len = sqrtf(dir.x * dir.x + dir.y * dir.y);
    if(len < 0.00001)
        return;
    dir.x = dir.x / len;
    dir.y = dir.y / len;
    tan.x = -width * dir.y;
    tan.y = width * dir.x;

    lineVertices[0] = pos1->x + tan.x;
    lineVertices[1] = pos1->y + tan.y;
    lineVertices[2] = pos2->x + tan.x;
    lineVertices[3] = pos2->y + tan.y;
    lineVertices[4] = pos1->x;
    lineVertices[5] = pos1->y;
    lineVertices[6] = pos2->x;
    lineVertices[7] = pos2->y;
    lineVertices[8] = pos1->x - tan.x;
    lineVertices[9] = pos1->y - tan.y;
    lineVertices[10] = pos2->x - tan.x;
    lineVertices[11] = pos2->y - tan.y;

    glGetFloatv(GL_CURRENT_COLOR, currentColor);
    red = 255.0 * currentColor[0];
    green = 255.0 * currentColor[1];
    blue = 255.0 * currentColor[2];
    alpha = 255.0 * currentColor[3];

    const GLubyte lineColors[] = {
        red, green, blue, 0,
        red, green, blue, 0,
        red, green, blue, alpha,
        red, green, blue, alpha,
        red, green, blue, 0,
        red, green, blue, 0,
    };

    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);

    glVertexPointer(2, GL_FLOAT, 0, lineVertices);
    glColorPointer(4, GL_UNSIGNED_BYTE, 0, lineColors);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 6);

    glDisableClientState(GL_COLOR_ARRAY);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);
}

void drawSmoothPointAt(CGPoint *position, float width)
{
    GLfloat pntVertices[2*6], currentColor[4]; 
    GLint   red, green, blue, alpha;

    pntVertices[0] = position->x;
    pntVertices[1] = position->y;
    pntVertices[2] = position->x - width;
    pntVertices[3] = position->y - width;
    pntVertices[4] = position->x - width;
    pntVertices[5] = position->y + width;
    pntVertices[6] = position->x + width;
    pntVertices[7] = position->y + width;
    pntVertices[8] = position->x + width;
    pntVertices[9] = position->y - width;
    pntVertices[10] = position->x - width;
    pntVertices[11] = position->y - width;

    glGetFloatv(GL_CURRENT_COLOR, currentColor);
    red = 255.0 * currentColor[0];
    green = 255.0 * currentColor[1];
    blue = 255.0 * currentColor[2];
    alpha = 255.0 * currentColor[3];

    const GLubyte pntColors[] = {
        red, green, blue, alpha,
        red, green, blue, 0,
        red, green, blue, 0,
        red, green, blue, 0,
        red, green, blue, 0,
        red, green, blue, 0,
    };

    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);

    glVertexPointer(2, GL_FLOAT, 0, pntVertices);
    glColorPointer(4, GL_UNSIGNED_BYTE, 0, pntColors);
    glDrawArrays(GL_TRIANGLE_FAN, 0, 6);

    glDisableClientState(GL_COLOR_ARRAY);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:17:24.850

你做了太多的计算来得到你想要的效果

我不想让你重写你的代码..但是通过点查看贝塞尔曲线

[这](http://jsdraw2d.jsfiction.com/demo/curvesbezier.htm)就是我的意思（将张力设置为 0.5 或 smth.. 以获得类似闪电的效果）

这样做..或者只是制作一堆或随机生成的图像（闪电），然后将它们放在图像顶部以获得闪电效果..您所做的对于小型设备来说太贵了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:10:16.757

如果您在批处理节点纹理中将闪电作为 PNG 图像导入，您的 FPS 将显着提高。假设您有多个闪电图像同时从不同方向发射，这只会导致对 OpenGL 的一次总调用，并且该调用将没有绘图逻辑，因为图像已经在应用程序外部创建。

# ios - 本地通知不会持续触发警报

> ID：10377689
> 
> 赞同：1
> 
> 时间：2012-04-30T01:54:58.440
> 
> 标签：ios, uilocalnotification

> 安排本地通知的传递
> 
> 通知是应用程序暂停、在后台或未运行以引起用户注意的一种方式。应用程序可以使用本地通知来显示警报、播放声音、标记应用程序的图标或三者的组合。

来自苹果文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

但根据我的经验，当应用程序处于后台或暂停时，localNotification 并不总是唤醒应用程序或播放警报/声音有没有人找到一种方法来始终通知用户？

# android - 通过模拟器设置温度

> ID：10377690
> 
> 赞同：2
> 
> 时间：2012-04-30T01:55:00.897
> 
> 标签：android, android-emulator

我在模拟器上运行此代码以读取温度变化，但它从未检测到温度变化`onSensorChanged()`。我使用这个命令通过 telnet 工具改变温度：

传感器设定温度 1:2:3

我做错什么了？

```
public class SensorActivity extends Activity implements SensorEventListener {
  private SensorManager mSensorManager;
  private Sensor mysensor;

  @Override
  public final void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mysensor = mSensorManager.getDefaultSensor(Sensor.TYPE_TEMPERATURE);

  }
    public void printText(String text)
    {

        EditText et=(EditText)findViewById(R.id.editText1);
        et.setText(text);

    }
  @Override
  public final void onAccuracyChanged(Sensor sensor, int accuracy) {
    // Do something here if sensor accuracy changes.
      String text=sensor.getName()+"accuracy = " + accuracy;
      printText(text);
  }

  @Override
  public final void onSensorChanged(SensorEvent event) {

    String text = "OnSensorChanged";
    printText(text);
  }

  @Override
  protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, mysensor, SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override
  protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:45:47.520

当你创建模拟器时，你给它硬件了吗？打开 AVD，查找硬件部分，单击“新建”并添加“温度支持”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:26:01.900

这对我有用：

```
package com.example.test_sensor;

import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity implements SensorEventListener {
    public void make_a_toast(String s)
    {
        Context context = getApplicationContext();
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, s, duration);
        toast.show();
    }

    private SensorManager mSensorManager;
    private Sensor mTemp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        mTemp = mSensorManager.getDefaultSensor(Sensor.TYPE_TEMPERATURE);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, mTemp, SensorManager.SENSOR_DELAY_FASTEST);
    }

    protected void onPause() {
        super.onPause();
        mSensorManager.unregisterListener(this);
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }

    public void onSensorChanged(SensorEvent event) {
        make_a_toast(Float.toString(event.values[0]));
    }
} 
```

作为注释，我说这`Sensor.TYPE_AMBIENT_TEMPERATURE`在我的 AVD 模拟器中不起作用。

例如，我按照[使用 Android 模拟器](http://developer.android.com/tools/devices/emulator.html)的说明更改温度`telnet localhost 5554`，然后`sensor set temperature -0.5`。

我没有特别许可，也没有找到贾斯汀丹尼尔森在他的[回答](https://stackoverflow.com/a/10377939/15485)中所说的“硬件部分” 。

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test_sensor"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test_sensor.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# javascript - jquery 做了我的第一个插件-当它太快时出现淡入/淡出问题

> ID：10377696
> 
> 赞同：1
> 
> 时间：2012-04-30T01:56:16.167
> 
> 标签：javascript, jquery

我制作了自己的小工具提示，但是当我走得太快时似乎出现了问题。

这是一个简单的工具提示，即鼠标输入，它会向您显示一个在顶部淡入并带有一些文本的气泡，鼠标离开气泡淡出。

当在几个不同的元素上非常快速地执行 mouseenter/mouseleave 时会出现问题......首先它开始只褪色到 0.6，然后最终不显示。

我猜这与排队有关。所以我尝试了 stop() 和 clearqueue() 但它仍然不起作用。

这是插件：

```
(function ($) {

    $.fn.tooltip = function (options) {

        var selector = $(this).selector;
        var defaults = {
            fadeInSpeed:350,
            fadeOutSpeed:200,
            delayIn: 350,
            delayOut: 300,
            popupId:'tooltip_popup',
            verticalOffset: 30
        };
        var settings = $.extend({}, defaults, options);

        $(document).delegate(selector, 'mouseenter', function (e) {
            var $this = $(this);
            var title = $this.attr('title');
            $this.attr('title', '');

            if (title !== '') {
                if ($('#' + settings.popupId).text() === '') {
                    $('<div />').attr('id', settings.popupId)
                        .appendTo('body')
                        .css({
                            position:'absolute',
                            backgroudColor: 'black',
                            zIndex: 5
                        })
                        .addClass('tooltip_style')
                        .hide();
                    $('<div />').appendTo('#' + settings.popupId).addClass('tooltip_arrow');
                    $('<span />').appendTo('#' + settings.popupId);
                } else {
                    $('#' + settings.popupId).hide().stop().clearQueue().hide();
                }

                var ele_x = $this.offset().left;
                var ele_y = $this.offset().top;

                $('#' + settings.popupId+' span').text(title);

                $('#' + settings.popupId)
                    .css({
                        top : ele_y - settings.verticalOffset,
                        left: ele_x
                    })
                    .delay(settings.delayIn)
                    .fadeIn(settings.fadeInSpeed);
            }

        });

        $(document).delegate(selector, 'mouseleave', function (e) {
            var $this = $(this);

            $('#' + settings.popupId)
                .delay(settings.delayOut)
                .fadeOut(settings.fadeOutSpeed);
            $this.attr('title', $('#' + settings.popupId+' span').text() );

        });

        return this;
    }

})(jQuery); 
```

您可能会注意到，我认为这一行是我需要修复的：

```
$('#' + settings.popupId).hide().stop().clearQueue().hide(); 
```

（这有点乱，因为我正在尝试一切......哈）。

我认为我不太了解排队的事情。

这是一个小提琴：http: [//jsfiddle.net/denislexic/7YMcu/2/](http://jsfiddle.net/denislexic/7YMcu/2/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:12:33.963

尝试使用`stop(true, true)`而不是`stop()`.

来自 jQuery 文档：

> `.stop( [clearQueue] [, jumpToEnd] )`
> 
> **clearQueue** 布尔值，指示是否也删除排队的动画。默认为假。
> 
> **jumpToEnd**布尔值，指示是否立即完成当前动画。默认为假。

设置为 true ，`clearQueue`您还可以取出 clearQueue() 调用。

**解释**

您遇到问题的原因是，当您停止动画时，您会使元素处于半过渡状态，下一个动画将其视为“正常”状态。如果你告诉一个半可见元素淡出，它将保存 50% 的可见状态，以供以后被告知淡入时使用。如果您告诉`stop`，`jumpToEnd`它将始终以 0% 或 100% 的可见性结束。

至于 clearQueue，我不相信它必须是真的。jumpToEnd 在这里很重要。您可以使用 clearQueue 值并查看最适合您的情况。

# jquery - 限制handlebars.js中每个的结果

> ID：10377700
> 
> 赞同：29
> 
> 时间：2012-04-30T01:56:41.517
> 
> 标签：jquery, html, handlebars.js

我写了一个显示推文的小插件。以下是循环和显示推文的代码。

```
 <script id="tweets-template" type="text/x-handlebars-template" >
        {{#each this}}
        <li>
        <p>{{tweet}}</p>
            <span id="author">{{author}}<span/>
        </li>
        {{/each}}
    </script> 
```

但我想做的是将推文的数量限制为 5 或 10。但循环列出了所有可用的推文。如何限制 for 循环中的推文。像

```
 for(i=0;i<5;i++){display the tweets} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-30T02:28:36.140

我认为你有两个选择：

1.  在将集合交给 Handlebars 之前限制集合的大小。
2.  编写您自己的块助手，让您指定一个限制。

实际的[`each`实现](https://github.com/wycats/handlebars.js/blob/master/lib/handlebars/base.js#L57)非常简单，因此调整它以包含上限非常简单：

```
// Warning: untested code
Handlebars.registerHelper('each_upto', function(ary, max, options) {
    if(!ary || ary.length == 0)
        return options.inverse(this);

    var result = [ ];
    for(var i = 0; i < max && i < ary.length; ++i)
        result.push(options.fn(ary[i]));
    return result.join('');
}); 
```

然后在您的模板中：

```
<script id="tweets-template" type="text/x-handlebars-template" >
    {{#each_upto this 5}}
        <li>
            <p>{{tweet}}</p>
            <span id="author">{{author}}<span/>
        </li>
    {{/each_upto}}
</script> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-27T07:30:41.247

[正如Dtipson](https://stackoverflow.com/a/21993334/1025458)所说，我同意复制`each`目前不是一个好主意。

他提出的使用`limit`助手的方法确实是 IMO 的最佳方法，这里是实现它所需的代码：

```
// limit an array to a maximum of elements (from the start)
Handlebars.registerHelper('limit', function (arr, limit) {
  if (!Array.isArray(arr)) { return []; }
  return arr.slice(0, limit);
}); 
```

然后在你的模板中（假设你的数组是`cart.products`）：

```
{{#each (limit cart.products 5)}}
  <li>Index is {{@index}} - element is {{this}}</li>
{{/each}} 
```

当然，您需要一个支持子表达式的最新车把版本才能正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-24T16:27:59.677

“每个”不再很简单：[https ://github.com/wycats/handlebars.js/blob/master/lib/handlebars/base.js#L99](https://github.com/wycats/handlebars.js/blob/master/lib/handlebars/base.js#L99)

那是因为每个现在都支持您可能仍然希望访问的大量循环信息。

因此，如果您不想重新实现更复杂的数据，那么尽早限制数据可能更可取。如果您使用的是最新版本的车把，您也可以尝试在每个中使用子表达式（即 {{#each (limit data 6)}}）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-13T17:41:15.627

只需查看该`{{@index}}`值并将其包装在一个`{{#if}}`块中即可。如果索引大于某个数字，则不呈现标记。

```
var collection = { ... tweets ... }

{{#each collection}}
    {{#if @index < 5}}
        <tweet markup>
    {{/if}}
{{/each}} 
```

# bash - 从文本文件中读取数据，对其进行解析并将其存储在 shell 脚本中的数组中

> ID：10377702
> 
> 赞同：1
> 
> 时间：2012-04-30T01:56:49.773
> 
> 标签：bash, parsing, shell

我有一个带有矩阵的文本文件

答：1、2、3、4

B：2、4、6、8；1、2、5、6

C：8、6、4、2；1、2、3、4；1、3、5、7

我想在 shell 脚本中读取这个文件，将这些矩阵存储在不同的数组中，然后使用这些数组进行进一步的计算（仅限加法和减法）。这是我的代码：

```
#! /bin/bash
R=`awk -F'[^0-9]+' '{$1=$1; print;}' testfile.txt`
echo $R; 
```

这给了我这种形式的输出：

1 2 3 4 2 4 6 8 1 2 5 6 8 6 4 2 1 2 3 4 1 3 5 7

我尝试使用循环将它们放在不同的数组中，但由于某种原因这不起作用。谁能帮我这个？

（我是 shell 脚本的新手，所以对您的代码解决方案进行一些解释会非常有帮助。谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:13:04.693

编程法则之一是解析输入通常比整个练习的其余部分更难。

首先，您可以尝试在每行上多次使用其中一个`cut`或[内部字段分隔符。](https://stackoverflow.com/questions/918886/split-string-based-on-delimiter-in-bash)

首先`:`用作分隔符将数组名称与值分开。
然后`;`用作分隔行的分隔符。
最后，`,`用作分隔符以获取各个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T10:09:16.830

这会将矩阵值存储在数组 A、B 和 C 中：

```
IFS+=,\;
eval `
while read name numbers
do  if [ $name ]
    then    echo "${name%:}=($numbers)"
    fi
done <testfile.txt
` 
```

这将输出不同的数组，仅用于检查目的：

```
echo ${A[*]}
echo ${B[*]}
echo ${C[*]} 
```

由于 bash 只提供一维数组，我们必须计算给定行大小的索引，例如

```
row=2; col=3
echo ${C[$row*4+$col]} 
```

# php - 打开 .gz 文件并读取/替换

> ID：10377703
> 
> 赞同：3
> 
> 时间：2012-04-30T01:57:05.763
> 
> 标签：php, gzip, fopen, fwrite

我找不到我需要的答案，所以我希望你明白我在追求什么。

我需要能够打开一个 tar.gz 文件（从远程网站），读取文件，并在我的网站上复制/替换这些文件。我一直在尝试这段代码（以及无数其他代码）：

```
$zipFile= 'http://awebsite.com/file.tar.gz';
$dir = 'myfolder';
$zp = @gzopen($zipFile, "r");
$fp = @fopen($dir, "w");
while(!@gzeof($zp)) {$string = @gzread($zp, 4096); @fwrite($fp, $string, strlen($string));}
@gzclose($zp);
@fclose($fp); 
```

所有人似乎都提出了不同类型的错误。我似乎能够读取 zip 文件，但实际上并没有将内容保存到我的网站。

感谢您提前提供任何帮助。

克里托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:27:15.193

除了解压，有效去除.gz后缀，还需要解析tar文件格式，有效去除.tar后缀。最简单的方法是简单地使用 tar 程序本身。将要拉取的内容通过管道传输到 tar，在要更新的目录中运行。Read the tar man page to see the appropriate options for how you want to update the files. （有很多选择。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T03:51:17.133

尝试这个：

```
<?php
$zipFile= 'http://awebsite.com/file.tar.gz';
$dir = 'myfolder';
$zp = @gzopen($zipFile, "r");
$fp = @fopen("temp.tar", "w");
while(!@gzeof($zp)) {$string = @gzread($zp, 4096); @fwrite($fp, $string, strlen($string));}
@gzclose($zp);
@fclose($fp);
exec('tar xf temp.tar --overwrite --directory='.$dir);
?> 
```

* * *

**更新：**

这是一个不使用临时文件并`tar`自行处理 gzip 解压缩的解决方案：

```
<?php
$zipFile= 'http://awebsite.com/file.tar.gz';
$dir = 'myfolder';
$zp = @fopen($zipFile, "r");
$fp=popen('tar xzf - --overwrite --directory='.$dir,'w');
while(!@feof($zp)) {$string = @fread($zp, 4096); @fwrite($fp, $string, strlen($string));}
@fclose($zp);
@fclose($fp);
?> 
```

# java - 双重代理接口时Spring AspectJ失败：无法生成类的CGLIB子类

> ID：10377704
> 
> 赞同：8
> 
> 时间：2012-04-30T01:57:14.323
> 
> 标签：java, spring, aspectj

我正在使用 Spring`<aop:aspectj-autoproxy />`代理一些[JPA 存储库](http://www.springsource.org/spring-data/jpa)接口。

但是，代理失败并显示以下内容`Cannot subclass final class class $Proxy80`：

> 无法生成类 [class $Proxy80] 的 CGLIB 子类：此问题的常见原因包括使用最终类或不可见类；嵌套异常是 java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy80

正如错误和快速谷歌所暗示的那样 - 当代理目标是最终类时会发生这种情况。然而，在这个链中，没有类——只有接口。Spring 在运行时生成所有实现。

这是失败的接口的定义：

```
public interface AuthorDAO extends
    CrossStoreJpaRepository<Author,Long>, CrossStoreQueryDslPredicateExecutor<Author> {

} 
```

注意我使用的是 spring 的[JpaRepository](http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html)和[QueryDslPredicateExecutor](http://static.springsource.org/spring-data/data-commons/docs/1.1.0.RELEASE/api/org/springframework/data/querydsl/QueryDslPredicateExecutor.html?is-external=true)的自定义子类，定义如下：

```
public interface CrossStoreJpaRepository<T, ID extends Serializable> extends JpaRepository<T, ID> {}
public interface CrossStoreQueryDslPredicateExecutor<T> extends QueryDslPredicateExecutor<T>{} 
```

在其他地方，我为这些接口上的方法定义了自定义方面：

```
@Aspect
@Component
public class DocumentLoadingAspect extends AbstractDocumentAspect {

    @Around("execution(* com.mangofactory.crossstore.repository.CrossStore*.find*(..))")
    public Object loadCrossStoreEntity(ProceedingJoinPoint pjp) throws Throwable
    {
         // implementation omitted
    } 
```

`@Aspect`我已经通过删除它们并重新运行应用程序来确认是这些定义导致了问题。

是什么导致了这个错误？由于某种原因，代理代理似乎失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T20:07:26.517

我的猜测是 Spring data JPA 将 repo 实现创建为**最终**的 Java 代理，然后`<aop:aspectj-autoproxy />`尝试使用不起作用的 cglib 子类化根据您的方面创建另一个代理。是否`proxy-target-class`设置为`true`autoproxy 元素？

# iphone - 如何解决警告：将 'ViewController *const __strong' 发送到不兼容类型 'id 的参数 ?

> ID：10377705
> 
> 赞同：40
> 
> 时间：2012-04-30T01:57:21.547
> 
> 标签：iphone, ios, avfoundation

以下代码给出了警告`Sending 'ViewController *const __strong' to parameter of incompatible type 'id<AVAudioPlayerDelegate>'`（它是以下代码中的第三行）：

```
NSURL *sound0URL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"0" ofType:@"aiff"]];

audioPlayer0 = [[AVAudioPlayer alloc] initWithContentsOfURL:sound0URL error:nil];

[audioPlayer0 setDelegate: self];   // <---   this line causes the warning
[audioPlayer0 prepareToPlay];

audioPlayer0.currentTime = 0;
[audioPlayer0 play]; 
```

如何修复？我在`ViewController`的实例方法中有这段代码`viewDidLoad`。还有另一个类似的问题，但那是一个类方法：[Incompatible pointer types assignmenting to 'id<AVAudioPlayerDelegate>' from 'Class'](https://stackoverflow.com/questions/7940477/incompatible-pointer-types-assigning-to-idavaudioplayerdelegate-from-class)

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-30T02:04:33.790

符合`AVAudioPlayerDelegate`头文件中的协议，警告就会消失。通过不声明一个类符合给定的协议，编译器不能保证（好吧，至少警告）你没有实现它所需的方法。下面的代码是一个更正的版本，它将抑制警告。

```
@interface ViewController : UIViewController <AVAudioPlayerDelegate>
@end 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-17T16:14:35.843

有趣的是，这对我没有用。我在头文件中定义了委托 -在**UITableViewController中使用****UIImagePickerControllerDelegate**。由于 setDelegate 方法需要一个 id，所以我将委托设置如下：

 **```
[myImagePicker setDelegate: (id)self]; 
```

但我想知道这里发生了什么？因为这通常不会在其他代码区域的其他委托示例中显示出来。有人能解释一下吗？

谢谢

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T02:06:01.527

你自己（你的班级）没有

```
@interface MyClassName: NSObject <AVAudioPlayerDelegate> 
```

在头文件中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-29T05:54:26.990

这是一个警告，告诉您错过在 .h 文件中定义您的委托

```
@interface ClassName : NSObject <YourDelegate> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T12:12:28.090

确保在 UIComponent 大括号内添加委托

例如：@interface DemoView : UIView < UITableViewDelegate>

而不是委托您正在创建的属性。

@property(retain)id < UITableViewDelegate> demoDelegate**

# sharepoint-2010 - SharePoint 2010 事件接收器、列表项事件、文档库、事件项添加未触发

> ID：10377707
> 
> 赞同：1
> 
> 时间：2012-04-30T01:58:07.723
> 
> 标签：sharepoint-2010

在 SharePoint Server 2010 中，我有一个文档库，我想在每次创建文件夹时创建子文件夹，我有一个代码片段但它不起作用，我尝试调试但事件也没有触发，谁能帮忙请告诉我，这是我的代码：

```
public class EventReceiver1 : SPItemEventReceiver
{
    /// <summary>
    /// An item was added.
    /// </summary>
    private string[] subFolders = new string[] { "sub-folder1", "sub-folder2", "sub  folder3" };
    public override void ItemAdded(SPItemEventProperties properties)
    {
        base.ItemAdded(properties);
        SPWeb web = properties.OpenWeb();
        SPDocumentLibrary ProductsLibrary = (SPDocumentLibrary)web.Lists[properties.ListId];
        if (properties.ListItem.ContentType.Name.ToLower() == "new content type" && properties.ListItem.Folder.ParentFolder.ToString() == ProductsLibrary.RootFolder.ToString())
        {
            string Url = properties.ListItem.ParentList.RootFolder.ServerRelativeUrl.ToString();
            SPFolder libFolder = ProductsLibrary.RootFolder.SubFolders[properties.ListItem.Name];
            string newFolderUrl = (web.Url + "/" + libFolder.ToString());
            foreach (string subfolder in subFolders)
            {
                SPListItem newSubFolder = ProductsLibrary.Items.Add(newFolderUrl, SPFileSystemObjectType.Folder, subfolder);
                newSubFolder.Update();
            }
        }
    }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:18:11.577

确保

1.  您已将此事件接收器添加为功能的一部分
2.  包含此事件接收器的功能已激活

如果您没有按照上述步骤操作，事件不会触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:20:33.980

解决方案是打开 elements.xml 并将其替换为，代码将完美运行。

# c# - wp7 - 如何检查图像是否已加载

> ID：10377708
> 
> 赞同：1
> 
> 时间：2012-04-30T01:58:15.373
> 
> 标签：c#, windows-phone-7, bitmapimage

我正在尝试将一些数据绑定到 wp7 列表框（带有自定义项目模板），其中包含每个条目的缩略图。问题是 - 我遇到了一个问题 - 当链接的图像重定向到 404 页面时 - 结果我得到一张空图像，坦率地说 - 我不知道如何检查加载的数据是否是正确的图像...这是我现在正在使用的代码：

```
<ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Grid Height="62"
                                  Width="62">
                                <Image Stretch="UniformToFill"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center">

                                    <Image.Source>
                                        <BitmapImage UriSource="{Binding MiniImage}"
                                                     CreateOptions="DelayCreation, BackgroundCreation" />
                                    </Image.Source>

                                </Image>
                            </Grid>
                            <StackPanel HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <TextBlock Text="{Binding Title}"
                                           Margin="12,4,0,0"
                                           FontSize="26"
                                           FontFamily="Segoe WP Bold" />
                                <TextBlock Text="{Binding PubDate}"
                                           Margin="12,0,0,9"
                                           FontSize="16"
                                           FontStyle="Italic"
                                           Padding="5,0,0,0"
                                           FontFamily="Segoe WP"
                                           Opacity="0.5" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate> 
```

这是背后的代码：

```
foreach (var item in RssFeedItems)
        {
            var inputString = item.Description;
            var tempImageList = new List<string>();
            var inputStringBuilt = new StringBuilder(item.Description);
            var temp = 1;

            while (temp > 0)
            {
                var img = inputString.IndexOf("<img", StringComparison.Ordinal);
                var src = inputString.IndexOf("src", img, StringComparison.Ordinal);
                var quot = inputString.IndexOf('"', src + 5);
                var len = quot - (src + 5);
                var sub = len > 0 ? inputString.Substring(src + 5, len) : null;
                tempImageList.Add(sub);
                var closingBracket = inputString.IndexOf(">", src, StringComparison.Ordinal);
                inputStringBuilt.Clear();
                inputStringBuilt.Append(inputString);
                inputStringBuilt.Remove(img, closingBracket - img);
                inputString = inputStringBuilt.ToString();
                temp = inputString.IndexOf("<img", StringComparison.Ordinal);
            }

            item.MiniImage = tempImageList[0] ?? "ApplicationIcon.png";

            var f = tempImageList.IndexOf(null) - 1;
            while (f >= 0)
            {
                PostImages.Add(tempImageList[f]);
                f--;
            }

            tempImageList.Clear();

            FirstListBox.Items.Add(item);

        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:07:12.123

您可能希望在后面的代码中发出 Web 请求，将结果传递到`PictureDecoder.DecodeJpeg`并绑定到从该代码`WriteableBitmap`返回的而不是 URL。通过这种方式，您可以检测 Web 请求中的错误情况并做出相应的反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:03:42.530

Image 元素有一个名为[ImageFailed](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.imagefailed%28v=vs.95%29.aspx)的事件，您将得到一个异常（包含在 ExceptionRoutedEventArgs 中）

您可以在加载图像时使用它来检测错误。

# sql - Oracle 警告：执行完成但有警告

> ID：10377711
> 
> 赞同：1
> 
> 时间：2012-04-30T01:58:25.987
> 
> 标签：sql, oracle, triggers

我正在尝试通过在触发器下方写入对 wokson_staff 表执行一些约束，但出现以下错误：

> PLS-00103：在预期以下之一时遇到符号“选择”：
> （-+case mpd mew mot null............）

谁能帮我弄清楚我的触发器出了什么问题？

谢谢

```
Create or replace trigger Emp_cons
Before Insert on WorksON_Staff
For each row          
begin
where exists( SELECT worksON_staff.AssignmentNo, worksON_staff.StaffNo,
               staff.stafftype
                   FROM worksON_Staff,staff,workassignment
                  WHERE worksON.assignmentNo=worksON_staff.assignmentNo
                  and staff.staffNo=worksON_staff.staffNo
                  and
                  staff.stafftype ='supervisor'
                       INTERSECT 
                 SELECT worksON_staff.AssignmentNo,        worksON_staff.StaffNo,staff.stafftype
                   FROM worksON_Staff,staff,workassignment
                  WHERE
                  worksON.assignmentNo=worksON_staff.assignmentNo
                  and staff.staffNo=worksON_staff.staffNo
                  and
                  staff.stafftype ='authorizer') 
                  Then raise_error('71001', 'blahblablah');

end Emp_cons; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:55:15.237

你可以做这样的事情

```
 Create or replace trigger Emp_cons
    Before Insert on WorksON_Staff
    For each row
    declare  
    x number;            
    begin
    select count(*) into x from ( 
              SELECT :new.AssignmentNo,:new.StaffNo, staff.stafftype
              FROM staff,workassignment worksON
              WHERE worksON.assignmentNo=:new.assignmentNo
              and staff.staffNo=:new.staffNo
              and
              staff.stafftype ='supervisor'
                   INTERSECT 
              SELECT :new.AssignmentNo,:new.StaffNo,staff.stafftype
              FROM staff,workassignment worksON
              WHERE worksON.assignmentNo=:new.assignmentNo
              and staff.staffNo=:new.staffNo
              and
              staff.stafftype ='authorizer');

if (x>0) then
  --do your raise error procedure
end if; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:03:29.380

从 where exists 开始，您的触发器在语法上是错误的

在此之前您是否缺少选择语句？

# android - 使用适配器在 PC 上查看手机屏幕

> ID：10377716
> 
> 赞同：2
> 
> 时间：2012-04-30T01:59:28.340
> 
> 标签：android, adapter, hdmi

我需要在 Windows PC 上查看我的 Android 手机的实时屏幕。我的 Android 手机有一个 mini-HDMI 输出。**是否有任何适配器/软件可以帮助我实现这一目标？**我搜索后发现的应用程序需要设备root才能控制它。我不想远程控制设备。我只需要从手机上获取实时信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:26:32.740

实际上，市场上有[一些相对实惠的 HDMI-DVI 适配器](https://rads.stackoverflow.com/amzn/click/com/B002HZWEIC)。将它们与[迷你 HDMI 连接到完整的 HDMI 电缆](https://rads.stackoverflow.com/amzn/click/com/B003ES5ZR8)，您就拥有了一个不错的硬件设置。

一些注意事项：

*   HDMI 传输音频和视频，而 DVI 仅传输视频。但是，[两者在视频质量上没有区别](http://www.ecoustics.com/electronics/products/articles/122868.html)，并且使用相同的编码。
*   正如 Mgamerz 所说，到目前为止，Android 手机对 HDMI 输出的支持一直很糟糕。您的手机可能有该端口，但您的 ROM 可能不支持它。此外，有些应用程序甚至不会承认 HDMI 的存在，因为很少有手机拥有它们。

从硬件和编码的角度来看，这是完全可能的，但从软件的角度来看，这可能是不可能的。如果你弄清楚如何做你正在尝试的事情，一定要告诉尽可能多的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:02:01.147

您将需要 HDMI 镜像，这意味着您将需要一个高端设备（很可能是双核），并且必须将对它的支持内置到 rom 中。我拥有一台 atrix，开发人员已经苦苦挣扎了几个月才能在其上进行 HDMI 镜像，但只取得了一些进展。否则，除非您的设备支持，否则您将无法执行此操作。它也依赖于硬件。

编辑：可能有一些应用程序可以做到这一点，但我怀疑它们会实现你所寻求的。HDMI 镜像通常也不会超过 20fps（在双核 1Ghz 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T02:10:21.240

要使用 HDMI 端口，您需要可以接受 HDMI 输入的设备。

很少有计算机可以这样做（可能除了一些智能电视类型的盒子）。

但是，连接到计算机的显示器很有可能可以。它甚至可能有备用输入。

换句话说，在显示器上“在窗口中”显示手机的输出是非常困难的。但是通过按下按钮或交换电缆，您很可能能够在整个显示器上显示手机的输出，而不是计算机的输出。

实际上，如果您需要在窗口中使用它，或者设备没有 HDMI 输出，最常见的解决方案似乎是固定装置中的高端网络摄像头将其对准设备。我看到了一个以这种方式呈现的演示文稿，在非常大的平板电视上显示，甚至没有意识到幻灯片来自一个 Android 平板电脑，从头顶摄像头看到，直到演示者拿起平板电脑并将手机滑入这是地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:01:31.127

[http://mymobile.com/?cat=3](http://mymobiler.com/?cat=3)

从 mymobile 试试这个应用程序。它适用于基于 android 2.3.6 的 motorola atrx 2。该站点仅列出了一些受支持的模型，但似乎也适用于其他模型。

您可以在 Windows 应用程序窗口中获得对移动屏幕的完全访问权限。它还可以捕获屏幕截图并拍摄屏幕上的动作视频。

# android - 从收音机列表视图中获取选定的项目。安卓

> ID：10377718
> 
> 赞同：2
> 
> 时间：2012-04-30T02:00:12.393
> 
> 标签：android, listview, radio, selected

我正在尝试从单个选择列表视图中获取所选值，但它不会让我使用`setOnItemClickListener`任何想法？

```
final ListView lv = (ListView) findViewById(R.id.listView1);

    ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_single_choice, values);
    lv.setAdapter(arrayAdapter); 

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
          String selectedFromList = (lv.getItemAtPosition(myItemInt));
        }                 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:55:09.107

modify like this: String selectedFromList = (String) (lv.getItemAtPosition(myItemInt));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T11:26:49.980

不需要绑定“onItemClickListener”，只要使用“getCheckedItemPosition”就可以得到选中的位置。然后从您的数据源中获取所选项目。

# jquery - 试图触发影响子元素的函数，有点像

> ID：10377721
> 
> 赞同：3
> 
> 时间：2012-04-30T02:01:01.850
> 
> 标签：jquery

我正在尝试创建一个类似于博客功能的手风琴，首先您会看到一组行（准确地说是 100 像素），当您单击博客标题时，博客文章会扩展到其全高。

这是我到目前为止所拥有的：

HTML：

```
 <ul class="blog">

                        <li class="list-item">
                            <div class="list-item-left">
                                <h2 class="expand">Project Eden</h2>

                                <time>07.08.2012</time>
                            </div>
                            <div class="list-item-right">
                                <p>"Sed ut perspiciatis unde </p>                                   
                            </div>
                            <div class="list-item-whitespace"></div>
                        </li>

                        <li class="list-item">
                            <div class="list-item-left">
                                <h2>Project Eden</h2>

                                <time>07.08.2012</time>
                            </div>
                            <div class="list-item-right">
                                <p>"Sed ut perspiciatis unde</p>
                            </div>
                            <div class="list-item-whitespace"></div>
                        </li>

</ul> 
```

jQuery：

```
var $listItems = $('.list-item');
var closedHeight = 100;
var slideSpeed = 1000;

$(".list-item").click(function() {
  if($(".list-item:animated").length) 
    return false;
}).toggle(function() { 
        var openHeight = $(this).parents("div:first").find(".list-item-right").height();
    $(this).animate({height:openHeight}, slideSpeed,"easeOutExpo");
    $(this).children('.list-item-whitespace').css({'display':'none'});
}, function(){
        $(this).animate({height:100}, slideSpeed,"easeOutExpo");
        $(this).children('.list-item-whitespace').css({'display':'block'});  
}); 
```

所以基本上我们正在做的事情（据我了解，我是 jQuery 的新手！）：

我们在变量中存储了一些信息，然后我们定义了一个函数，它将 .list-item 扩展到 .list-item-right 的实际高度，当我们再次单击它时，它将恢复为“关闭" 100 像素的高度。

现在，我想做的是在单击 .list-item 时不触发 .toggle 事件或 .click 事件。

相反，我希望它仅在您单击 .expand 类或 .list-item-left h2 （如果您愿意）时触发。

如果这对任何人有任何意义，请告诉我我在哪里不知所措。

最好的问候，K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:24:53.953

我就是这样做的。它需要稍微重构您的 html。您将列表项内容包含在父 div 中。您可以使用它来找出未溢出的高度是多少。

当您展开列表项时，您会添加一个开放或封闭的类，以便您了解状态。

我还摆脱了我想象中的清除 div，并给了容器 div `overflow: auto`，它导致包含的元素自我清除。

[http://jsfiddle.net/WZVb6/1/](http://jsfiddle.net/WZVb6/1/)

```
//set all blog posts to 100px to start
$('li.list-item h2').click(function() {
    $this = $(this);
    var nheight = $this.closest('.naturalheight').height();

    if ($this.hasClass('open')) {
        $this.closest('li').animate({
            height: 100
        });
        $this.removeClass('open');
    }
    else {
        $this.closest('li').animate({
            height: nheight
        });
        $this.addClass('open');
    }

});​ 
```

# javascript - 最成熟的原生 Node.js MySQL 驱动？

> ID：10377722
> 
> 赞同：15
> 
> 时间：2012-04-30T02:01:50.477
> 
> 标签：javascript, node.js, towerjs

我将 MySQL 用于 Rails 应用程序，并希望能够将此数据库用于 Node.js 应用程序（特别是 Tower.js）。目前可用的最成熟和/或性能最好的驱动程序是什么？

* * *

由于下面@ryan 的出色输入，我对Felix[的“`node-mysql`](https://github.com/felixge/node-mysql) 有一个绝对**优秀**的播客”进行了更多研究`node-mysql`适合你：http: [//ia600804.us.archive.org/3/items/NodeupEleven/NodeupEleven.mp3](http://ia600804.us.archive.org/3/items/NodeupEleven/NodeupEleven.mp3)

在对圆桌讨论进行快速聆听之后，我非常有信心这是任何人现在都可以采取的正确道路。此外，作为 Node.js 中数据库支持的一般状态，周围的其他讨论很有趣。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T02:21:54.307

[这是](https://github.com/joyent/node/wiki/modules#wiki-db-mysql)Node.js GitHub Wiki 上所有 MySQL 模块的链接。

[node-mysql](https://github.com/felixge/node-mysql)似乎是您正在寻找的。到目前为止，它拥有最多的观察者，并且发展看起来非常活跃。

但是，Wiki 页面上有很多选择，您可能想先看看那里，看看是否有更适合您需求的东西。

# javascript - Javascript 中的 Visual Studio 和 XML 注释使“公共”方法在智能感知中消失

> ID：10377731
> 
> 赞同：1
> 
> 时间：2012-04-30T02:03:51.647
> 
> 标签：javascript, visual-studio, xml-comments

我很高兴地发现我可以在我的 javascript (ie) 中使用 XML 注释：

```
/// <summary>Determines the area of a circle based on a radius parameter.</summary>
/// <param name="Name" type="String">Give this dude a NAME!</param>
/// <returns type="Nothing">The area.</returns> 
```

直到我意识到在我这样做之后，我的“公共”方法不再列在智能感知中...... :-(

```
 this.greet = function (greeting) {
        alert(greeting + " " + this);
    } 
```

当我实例化 var thePlayer = new player('bob'); ... 玩家。<--greet 将被列出，直到我输入上述 XML 注释。

有没有人有这方面的经验和解决方法？能够将 javascript 注释到智能感知中会非常好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:28:31.527

我认为如果您从返回中删除 (type="Nothing") 它应该显示玩家的成员。

# php - 在 PHP 中解析传入的请求

> ID：10377734
> 
> 赞同：1
> 
> 时间：2012-04-30T02:04:09.590
> 
> 标签：php

如果传入的 PHP 可能的请求可以是以下

1)http://www.test.com/api.php?device_id=xxxx&user_name=xxxx&pass_word=xxxx&num_request=xxxx&num_site=xxxx;

如何在我的 api.php 代码中从上面提取 user_name 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:05:16.930

这些值通过标准 GET 请求传递，如下所示：

```
$deviceid = $_GET['device_id']; 
```

请注意，此值未经清理，并且可以由用户修改，最终可能导致 SQL 注入，具体取决于您对该值的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T02:05:32.600

您可以使用`$_GET`超全局来访问查询字符串值

```
$user_name = $_GET['user_name']; 
```

# php - CakePHP ACL 教程 group_id

> ID：10377739
> 
> 赞同：3
> 
> 时间：2012-04-30T02:05:08.313
> 
> 标签：php, cakephp

我正在关注 [http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)教程，我在你的位置添加组和用户帐户...

但是，当我访问添加新用户时，该组的下拉列表是空的......可能有什么问题？

这是 User.php 模型的样子

```
<?php
App::uses('AppModel', 'Model');
/**
 * User Model
 *
 * @property Group $Group
 * @property Image $Image
 */
App::uses('AuthComponent', 'Controller/Component');
class User extends AppModel {
/**
 * Display field
 *
 * @var string
 */
    //The Associations below have been created with all possible keys, those that are not needed can be removed

    public $actsAs = array('Acl' => array('type' => 'requester'));

    public function beforeSave() {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        return true;
    }   
    public function bindNode($user) {
            return array('model' => 'Group', 'foreign_key' => $user['User']['group_id']);
    }   

    public function parentNode() {
        if (!$this->id && empty($this->data)) {
            return null;
        }   
        if (isset($this->data['User']['group_id'])) {
            $groupId = $this->data['User']['group_id'];
        } else {
            $groupId = $this->field('group_id');

       }
        if (!$groupId) {
            return null;
        } else {
            return array('Group' => array('id' => $groupId));
        }
    }
      public $belongsTo = array(
        'Group' => array(
            'className' => 'Group',
            'foreignKey' => 'group_id',
            'conditions' => '', 
            'fields' => '', 
            'order' => ''
            )   
        );  

    public $hasMany = array(
            'Image' => array(
                'className' => 'Image',
                'foreignKey' => 'user_id',
                'dependent' => false,
                'conditions' => '',
                'fields' => '',
                'order' => '',
                'limit' => '',
                'offset' => '',
                'exclusive' => '',
                'finderQuery' => '',
                'counterQuery' => ''
                )
            );

} 
```

这是 Group.php 模型的样子

```
<?php
App::uses('AppModel', 'Model');
/**
 * Group Model
 *
 * @property User $User
 */
class Group extends AppModel {
/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'name';
/**
 * Validation rules
 *
 * @var array
 */
        //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * hasMany associations
 *
 * @var array
 */
    public $actsAs = array('Acl' => array('type' => 'requester'));

    public function parentNode() {
        return null;
    }   
    public $hasMany = array(
            'User' => array(
                'className' => 'User',
                'foreignKey' => 'group_id',
           'dependent' => false,
                'conditions' => '',
                'fields' => '',
                'order' => '',
                'limit' => '',
                'offset' => '',
                'exclusive' => '',
                'finderQuery' => '',
                'counterQuery' => ''
                )
            );

} 
```

我的表看起来像这个“用户”表

```
>     > Field   Type    Null    Key Default Extra
>     > id  int(11) NO  PRI NULL    auto_increment
>     > username    varchar(64) NO  UNI NULL      password  varchar(82) NO      NULL     
>     > first_name  varchar(64) NO      NULL      last_name varchar(64) NO      NULL     
>     > created datetime    YES     NULL      group_id  int(11) NO      NULL 
```

“组”表

```
Field   Type    Null    Key Default Extra
id  int(11) NO  PRI NULL    auto_increment
name    varchar(100)    NO      NULL     
created datetime    YES     NULL     
modified    datetime    YES     NULL 
```

查看/Users/add.ctp 代码

```
<div class="users form">
<?php echo $this->Form->create('User');?>
    <fieldset>
        <legend><?php echo __('Add User'); ?></legend>
    <?php
        echo $this->Form->input('username');
        echo $this->Form->input('password');
        echo $this->Form->input('first_name');
        echo $this->Form->input('last_name');
        echo $this->Form->input('group_id');
    ?>  
    </fieldset>
<?php echo $this->Form->end(__('Submit'));?>
</div>
<div class="actions">
    <h3><?php echo __('Actions'); ?></h3>
    <ul>

        <li><?php echo $this->Html->link(__('List Users'), array('action' => 'index'));?></li>
        <li><?php echo $this->Html->link(__('List Groups'), array('controller' => 'groups', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Group'), array('controller' => 'groups', 'action' => 'add')); ?> </li>
        <li><?php echo $this->Html->link(__('List Images'), array('controller' => 'images', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Image'), array('controller' => 'images', 'action' => 'add')); ?> </li>
    </ul>
</div> 
```

我创建了 2 个组。一个是“visitors”，一个是“admin”..这是`aros`表格现在的样子

```
id  parent_id   model   foreign_key alias   lft rght
        2   NULL    Group   4       1   2
        3   NULL    Group   5       3   4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:34:03.437

有没有先加群？首先，您必须添加组，然后尝试添加用户。

请验证您在用户模型中设置了 belongsTo 关系`User.php`

```
public $belongsTo = array(
    'Group' => array(
        'className' => 'Group',
        'foreignKey' => 'group_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

检查您的 UserController Add 方法是否有以下代码
请验证该`$groups = $this->User->Group->find('list'); $this->set(compact('groups'));`部分

```
 public function add() {
    if ($this->request->is('post')) {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }
    $groups = $this->User->Group->find('list');
    $this->set(compact('groups'));
} 
```

# iphone - CGAffineRotation 扭曲图像照片

> ID：10377745
> 
> 赞同：1
> 
> 时间：2012-04-30T02:06:07.753
> 
> 标签：iphone, objective-c, ios, uideviceorientation, avcapture

我的 iOS 已通过 注册了设备方向更改通知`NSNotificationCenter`，并且具有响应不同方向更改的方法。将手机旋转到“横向左”时，调用以下代码来更改视图的方向和位置。

```
camAngle = [(NSNumber *)[_cameraToggleButton valueForKeyPath:@"layer.transform.rotation.z"] floatValue];
            camDegrees = (RADIANS_TO_DEGREES(camAngle));
            if (!(camDegrees == 90)) {
                _cameraToggleButton.alpha = 0.0;
                _cameraToggleButton.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(90));
                _cameraToggleButton.frame = CGRectMake(274, 350, 66, 54);
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.4];
                [UIView setAnimationCurve:UIViewAnimationCurveLinear];
                _cameraToggleButton.alpha = 1.0;
                [UIView commitAnimations];
            } 
```

还有我转换弧度和度数的方程式：

```
#define RADIANS_TO_DEGREES(radians) ((radians) * (180.0 / M_PI))
#define DEGREES_TO_RADIANS(angle) ((angle) / 180.0 * M_PI) 
```

视图正确旋转并在屏幕上呈现正确的位置，但图像的两侧突然被压扁，使图像看起来很紧凑。这只发生在将手机旋转到横向位置（左或右）时。旋转到倒置或回到纵向可以很好地平移和旋转视图，代码基本相同。什么可能导致横向位置的图像倾斜？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:47:45.593

设置旋转变换后，不应设置 的`frame`。`_cameraToggleButton`要在设置旋转后重新定位 _cameraToggleButton，您应该`center`像这样进行更改：

```
_cameraToggleButton.center = CGPointMake(274, 350); 
```

另外，正如其他人建议的那样，使用`UIViewContentModeScaleAspectFit`代替`UIViewContentModeScaleToFill`.

# php - 检查数组是否只包含一个键/值

> ID：10377747
> 
> 赞同：12
> 
> 时间：2012-04-30T02:06:39.793
> 
> 标签：php, arrays

```
$foo = array('one');
$foofoo = array('onekey' => 'onevalue'); 
```

你如何检查一个数组是否只包含一个键？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T02:08:08.633

`count()`会告诉你数组中有多少元素

```
if (count($foo) === 1) {
    echo 'This array contains one value';
} 
```

# c# - 如何突出显示列表视图中的项目？

> ID：10377749
> 
> 赞同：4
> 
> 时间：2012-04-30T02:06:42.993
> 
> 标签：c#, winforms, listview, highlight

我正在尝试从 listView1 拖放并放在 listLocal**上，它们都是 ListView**
这是客户端和服务器之间的文件传输应用程序，该应用程序显示小型本地文件资源管理器**listLocal**和远程文件资源管理器**listView1**。
因此，当我将项目从**listView1**拖放到**listLocal**并且指针指向项目 [ **Folder** ] 时，它应该被突出显示`item.Selected = true`。
但它不起作用，我尝试做但`listLocal.Focus`仍然`listLocal.Select`不起作用，我怎样才能让它起作用？

注意：当我使用它时`item.BackColor = Color.RoyalBlue;`它有效，但它没有突出显示图标。

```
 private void listLocal_DragOver(object sender, DragEventArgs e)
   {
      if (!e.Data.GetDataPresent(typeof(ListViewItem))) return;
      Point p = listLocal.PointToClient(MousePosition);
      ListViewItem targetItem = listLocal.GetItemAt(p.X, p.Y);
      if (targetItem != null)               //if dropping on a target item
      {
        targetItem.Selected = true;
        if (targetItem.SubItems.Count > 1) e.Effect = DragDropEffects.None;//if IsFile
        else e.Effect = DragDropEffects.Copy;
        return;
      }
      foreach (ListViewItem item in listLocal.Items) item.Selected = false; //if dragging into current address
      e.Effect = DragDropEffects.Copy;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:31:20.580

将 HideSelection 属性设置为 False

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T03:26:43.350

您可以尝试处理 DragOver 方法。或者看看微软的例子：[MSDN](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.insertionmark(v=vs.110).aspx)

# php - PHP opendir问题

> ID：10377750
> 
> 赞同：2
> 
> 时间：2012-04-30T02:07:06.737
> 
> 标签：php, opendir

即使目录存在，为什么我会收到此错误？如果我以父目录为目标，它工作正常，我也尝试使用 %20 而不是空间，并尝试删除最后一个 / 但没有任何效果！

**警告：** opendir(/home/xxxx/user_files/users/xxxx/test directory/) [function.opendir]: failed to open dir: No such file or directory in **/home/xxxx/public_html/beta/stream._pages/file ._list._i.php**在第 54 行

（注：**xxxx**只是我审查用户名）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:22:41.273

创建一个名为 test.php 的文件并将其放在您的测试目录中。在该文件中，输入以下代码：

```
<? echo dirname(__FILE__);?> 
```

然后，在您的 Web 浏览器中访问 test directory/test.php，复制并粘贴 test.php 中给出的路径，并尝试在 opendir 中使用该确切路径。

另一个问题可能是你的目录权限不对，试试 chmodding 到 777

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T09:24:31.887

对于任何试图在 public_html 文件夹之外查找文件夹的人。

此代码由 php.net 提供用于该[`opendir()`](http://nl3.php.net/manual/en/function.readdir.php "打开一个目录")功能：

```
if ( $handle = opendir('../../../../') )
{
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    /* This is the correct way to loop over the directory. */
    while ( false !== ( $entry = readdir( $handle ) ) )
    {
        echo "$entry\n";
    }

    /* This is the WRONG way to loop over the directory. */
    while ($entry = readdir($handle))
    {
        echo "$entry\n";
    }

    closedir( $handle );
} 
```

**解决方案**

我`$handle`开始检查`'../'`尽可能多地添加 ../ 直到你发现自己在你需要的文件夹中。从那里你带我猜。

对我来说`'../../../../'`足以到达那里，每台服务器都不同。

# php - PHP 两个问题

> ID：10377753
> 
> 赞同：0
> 
> 时间：2012-04-30T02:07:24.580
> 
> 标签：php

1.  我想在没有前面的 0 的情况下获取月份的日期。
    例如，这个月是四月。`Date(m)`表示 April 为 04，而不是 4。有什么办法吗？
2.  是否可以将数组设置为 String 本身？

例如，

```
$arrYear[0]=2012;
$arrYear[1]=2013;
$arrYear[2]=2014; 
```

我知道当您获取数组 [1] 的结果时，它将是 2012 年，而不是 2012 年。我希望将其设置为当您检索数组的结果时，它将是 2012 年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:09:13.783

您可以在[此处](http://us2.php.net/manual/en/function.date.php)`date()`查看格式。在您的情况下，您将使用.`'n'`

是的，你可以设置这样的数组值（如果我理解你的问题......我认为你有一个错字“它将是 2012 年，而不是 2012 年”。

# ruby - 如何获取 `/var` 及其子目录中的所有文件并忽略列出文件夹名称？

> ID：10377758
> 
> 赞同：2
> 
> 时间：2012-04-30T02:09:53.617
> 
> 标签：ruby, file

如何获取其中的所有文件`/var`及其子目录，但同时忽略列出子目录文件夹名称？

我已经尝试过`Dir["/var/*"]`，但它没有列出子目录中的所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T02:23:23.947

```
Dir["/var/**/*"] 
```

此`**`模式中出现的 匹配零个或多个嵌套目录的任何路径片段，但不匹配文件。

让我们分解一下：

当你有`/var/somefile.txt`（你的系统上可能不存在，因为`/var`很可能只有目录）时，这就是你的 glob 的每个部分将匹配的内容：

```
Part of pattern     Part of directory path
     /var                 /var
     **                   (nothing)
     *                    somefile.txt 
```

对于文件`/var/run/NetworkManager.pid`：

```
Part of pattern     Part of directory path
     /var                 /var
     **                   run
     *                    NetworkManager.pid 
```

对于文件`/var/spool/mail/news`：

```
Part of pattern     Part of directory path
     /var                 /var
     **                   spool/mail
     *                    news 
```

我不确定`Dir['/var/**']`它自己会做什么。我认为要使其按您期望的方式工作，您总是需要在`**`.

# asp.net - 使用 WebClient 从 ASP.NET Web 服务错误中下载字符串

> ID：10377760
> 
> 赞同：1
> 
> 时间：2012-04-30T02:10:08.127
> 
> 标签：asp.net, silverlight, web-services, webclient

我有一个简单的 ASP.NET Web 服务：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;
using System.Web.Script.Serialization;
using System.Web.UI.WebControls;
using System.Web.UI;

namespace WebService1
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [ScriptService]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string Get()
        {
            member mem = new member();
            mem.hello = "hello hello hello";
            mem.kalon = "fafasdf";
            mem.name = "wfasdfawe";
            return new JavaScriptSerializer().Serialize(mem);
        }

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }
    }

    public class member
    {
        public string hello { get; set; }
        public string name { get; set; }
        public string kalon { get; set; }
    }
} 
```

我在使用 WebClient 从 SilverLight 检索字符串时遇到问题。你能启发我吗？我使用下面的代码从 WebService 获取字符串。

```
WebClient wc = new WebClient();

public MainPage()
{
    InitializeComponent();
    wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    Uri uri = new Uri("http://www.MyWeb.com/Service1.axms/Get");
    wc.DownloadStringAsync(uri);
}

void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    MessageBox.Show(e.Error.ToString());
    MessageBox.Show(e.Result);
} 
```

我收到错误：

System.Security.SecurityException ---> System.Security.SecurityException：安全错误。在 System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.BrowserHttpWebRequest.<>c_ *DisplayClass5.b* _4(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass4.b* _1 (Object sendState) --- 内部异常堆栈跟踪结束 --- 在 System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System. System.Net.WebClient.DownloadBitsResponseCallback（IAsyncResult 结果）处的 Net.WebClient.GetWebResponse（WebRequest 请求，IAsyncResult 结果）

我也试过了，还是一样的错误：

```
Uri uri = new Uri("http://www.MyWeb.com/Service1.axms?op=Get");
wc.DownloadStringAsync(uri); 
```

还有 1 个问题：这样的 url 是否正确获取字符串？

```
http://www.MyWeb.com/Service1.axms?op=Get

http://www.MyWeb.com/Service1.axms/Get 
```

# objective-c - 将专有二进制图像文件加载到 NSImage 的推荐方法？

> ID：10377761
> 
> 赞同：5
> 
> 时间：2012-04-30T02:10:21.040
> 
> 标签：objective-c, cocoa

我有一堆要加载到 NSImages 中的专有二进制格式的图像文件。该格式不是简单的位图，而是一种混合了透明度和其他附加信息的 RLE 表示。

为了在 Cocoa 应用程序中显示这些图像之一，我需要一种逐字节解析图像文件并从中“计算”位图的方法，然后将其放入 NSImage 中。

在 Objective-C/Cocoa 中这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T02:38:54.060

解释图像数据的任务由图像的表示对象处理。要使用专有格式，您有几个选择：(a) 创建自定义表示类，(b)`NSCustomImageRep`与自定义委托一起使用，或 (c) 使用自定义对象将图像转换为支持的格式，例如原始位图。

如果您选择创建自定义表示类，您将创建一个子类，`NSImageRep`如[创建新图像表示类](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208-BCIFJBGC)中所述。这基本上要求您的类注册自己并能够绘制图像数据。除此之外，您可以重写方法以返回有关图像的信息，并且您将能够使用常规`NSImage`方法实例化您的图像。这种方法需要最多的工作。

使用[`NSCustomImageRep`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSCustomImageRep_Class/Reference/Reference.html#//apple_ref/occ/cl/NSCustomImageRep)比创建自定义实现需要更少的工作。您的委托对象只需要能够在固定位置绘制图像。但是，您无法返回有关图像的其他信息，并且您需要`NSCustomImageRep`在创建`NSImage`.

将图像转换为不同的格式也比创建自定义表示更简单。它可以像创建`NSImage`适当大小的空白并在其中绘制一样简单。创建图像仍然更加复杂，因为您需要调用您的翻译方法，这将影响效率（未来的绘制时间和内存使用），因为您正在更改格式，这可能是好是坏。您还将失去图像对象与其源之间的任何关联。

# math - 如何围绕 x 轴旋转 2D (x,y) 像素？

> ID：10377768
> 
> 赞同：0
> 
> 时间：2012-04-30T02:11:11.810
> 
> 标签：math, opengl, graphics, matrix, rotation

我应该使用哪个矩阵？

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

[http://www.songho.ca/opengl/gl_anglestoaxes.html](http://www.songho.ca/opengl/gl_anglestoaxes.html)

底部有派生矩阵`Axis Rotations`，这些矩阵的用途是什么。我无法理解那些的区别，什么时候使用什么？

为什么要计算派生矩阵？

或者什么时候用这个？

![图像](../Images/d3251cf80f2591cbe32185fe902cd6e4.png)

什么时候用这个？

![img2](../Images/33c5d9099ff20e5ffc1de9e188d8aaa8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:27:00.133

在 2D 中，您使用的是 X 和 Y 轴。要在 2D 中进行旋转，您需要在 Z 轴上旋转，以便您的点在 X 和 Y 轴上移动。使用 Z 轴旋转矩阵。

X、Y 和 Z 轴旋转矩阵只是另一个方程的简化形式，它涉及更多的三角函数。如果您查看那个并为两个变量中的任何一个插入 0，您会看到它简化为三轴特定版本之一。

编辑：使用带有 Z 的那个。第三个更简单的版本。

# jasper-reports - 如何为每个组生成单独的页面？

> ID：10377769
> 
> 赞同：2
> 
> 时间：2012-04-30T02:11:12.460
> 
> 标签：jasper-reports

故事：两个领域对象：

```
class JasperProject {
    private String ...
}

class JasperProjectGroup {
    private String ...
    private List<JasperProject> ...
} 
```

贾斯珀的代码：

```
 Map<String, Object> parameters = new HashMap<String, Object>();
        List<JasperProjectGroup> groups = buildGroups();
        parameters.put("groups", groups);

        InputStream jasperReportInputStream = ProjectStatusReportGenerator.class.getClassLoader().getResourceAsStream(
                        PROJECT_STATUS_JASPER_REPORT_FILENAME);

        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReportInputStream, parameters,
                        new JREmptyDataSource());

        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

        JasperExportManager.exportReportToPdfStream(jasperPrint, outputStream);

        return outputStream.toByteArray(); 
```

**我想创建一个 pdf 报告，其中每个单独的页面上的每个组表（例如第 1 页上的第 1 组表，第 2 页上第 2 组的表）。但是，当我将组作为参数传递给 Jasper 模板时，它只显示一个表格，其中包含 pdf 报告中的所有组。**

jrxml 的 XML 代码

第一个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="timesheets" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="groups" class="java.util.Collection"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <detail>
        <band height="800" splitType="Stretch">
            <subreport runToBottom="true">
                <reportElement x="0" y="0" width="515" height="800"/>
                <dataSourceExpression><![CDATA[(new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{groups}))]]></dataSourceExpression>
                <subreportExpression><![CDATA[net.sf.jasperreports.engine.data.JRBeanCollectionDataSource.class.getClassLoader().getResourceAsStream("projectgroup.jasper")]]></subreportExpression>
            </subreport>
        </band>
    </detail>
</jasperReport> 
```

第二个模板（projectgroup.jrxml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="projectgroup" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <subDataset name="TableDataset1">
        <field name="projectName" class="java.lang.String"/>
        <field name="bookedHours" class="java.lang.String"/>
        <field name="predictedHours" class="java.lang.String"/>
        <field name="burnedHours" class="java.lang.String"/>
        <field name="percentageComplete" class="java.lang.String"/>
        <field name="bookedHoursBurned" class="java.lang.String"/>
    </subDataset>
    <field name="jasperProjectStatusReports" class="java.util.List"/>
    <detail>
        <band height="50" splitType="Stretch">
            <subreport>
                <reportElement x="0" y="0" width="515" height="50"/>
                <dataSourceExpression><![CDATA[(new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{jasperProjectStatusReports}))]]></dataSourceExpression>
                <subreportExpression><![CDATA[net.sf.jasperreports.engine.data.JRBeanCollectionDataSource.class.getClassLoader().getResourceAsStream("projectgroup_table.jasper")]]></subreportExpression>
            </subreport>
        </band>
    </detail>
</jasperReport> 
```

第三个模板 xml (projectgroup_table.jasper)：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="projectgroup_table" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <field name="groupName" class="java.lang.String"/>
    <field name="projectName" class="java.lang.String"/>
    <field name="bookedHours" class="java.lang.String"/>
    <field name="predictedHours" class="java.lang.String"/>
    <field name="burnedHours" class="java.lang.String"/>
    <field name="percentageComplete" class="java.lang.String"/>
    <field name="bookedHoursBurned" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement mode="Opaque" x="0" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{groupName}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement mode="Opaque" x="100" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Booked]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="200" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Predicted]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="300" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Burned]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="400" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Complete]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="500" y="0" width="95" height="20" forecolor="#FFFFFF" backcolor="#006700"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Booked Burned]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="21" splitType="Stretch">
            <textField isBlankWhenNull="true">
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{projectName}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="0" rightPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{bookedHours}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="200" y="0" width="100" height="20"/>
                <box leftPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{predictedHours}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="300" y="0" width="100" height="20"/>
                <box leftPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{burnedHours}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="400" y="0" width="100" height="20"/>
                <box leftPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{percentageComplete}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="500" y="1" width="95" height="20"/>
                <box leftPadding="5">
                    <pen lineWidth="1.0"/>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{bookedHoursBurned}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

对此有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:11:31.130

是的，这是可以做到的。如果您使用 ireprt... 扩展详细信息字段，则当您的一个组被打印时，其他组将没有空间，因此下一组将在下一页上。

它的碧玉报告的内置功能。

# javascript - JQuery：图像 src 变量清理

> ID：10377776
> 
> 赞同：0
> 
> 时间：2012-04-30T02:13:17.420
> 
> 标签：javascript, jquery, jquery-ui

过去几天我一直在自学如何使用 jquery，并没有使用太多，我仍然坚持旧方式（回到 10 年前哈哈）开始我从 JQuery Desktop 下载了 JQuery [Desktop - Nathan Smith](http://desktop.sonspring.com/)，为了避免重复使用图像 src 链接不可避免地使文件大于它需要的大小。因此，在使参考变量基本上开始再次使用相同的东西时...我尝试查看如何压缩它或清理它，但我一直在尝试做的事情陷入死胡同...如果有人碰巧知道我能做什么，那会很棒。

**代码**

```
enter code here
            /*  SAVES DATA SPACE ALSO CREATES QUICK REFFERENCE/VARIABLE */
            var healthVar= 'assets/img/icons/health.png';
            var emailVar = 'assets/img/icons/email.png';
            var linkVar = 'assets/img/icons/link.png';
            var noteVar = 'assets/img/icons/note2.png';
            var videoVar = 'assets/img/icons/video1.png';
            var xxxVar = 'assets/img/icons/xxx.png';
            var socialVar = 'assets/img/icons/social.png';
            var webdesktopVar = 'assets/img/icons/webdesktop.png';
            var androidVar = 'assets/img/icons/android.png';
            var devVar = 'assets/img/icons/development.png';
            var secureVar = 'assets/img/icons/secure.png';
            var signalVar = 'assets/img/icons/signal.png';
            var setVar = 'assets/img/icons/settings.png';
            var spamVar = 'assets/img/icons/spam.png';
            var feedbackVar = 'assets/img/icons/feedback.png';

            $("#health_Pic").attr("src", healthVar);$("#health_PicB").attr("src", healthVar);$("#health_PicC").attr("src", healthVar);
            $("#email_Pic").attr("src", emailVar);$("#email_PicB").attr("src", emailVar);$("#email_PicC").attr("src", emailVar);
            $("#link_Pic").attr("src", linkVar);$("#link_PicB").attr("src", linkVar);$("#link_PicC").attr("src", linkVar);
            $("#note_Pic").attr("src", noteVar);$("#note_PicB").attr("src", noteVar);$("#note_PicC").attr("src", noteVar);
            $("#video_Pic").attr("src", videoVar);$("#video_PicB").attr("src", videoVar);$("#video_PicC").attr("src", videoVar);
            $("#social_Pic").attr("src",socialVar);$("#social_PicB").attr("src", socialVar);$("#social_PicC").attr("src", socialVar);
            $("#webdesktop_Pic").attr("src",webdesktopVar);$("#webdesktop_PicB").attr("src",webdesktopVar);$("#webdesktop_PicC").attr("src",webdesktopVar);
            $("#android_Pic").attr("src",androidVar);$("#android_PicB").attr("src",androidVar);$("#android_PicC").attr("src",androidVar);
            $("#dev_Pic").attr("src",devVar);$("#dev_PicB").attr("src",devVar);$("#dev_PicC").attr("src",devVar);
            $("#secure_Pic").attr("src",secureVar);$("#secure_PicB").attr("src", secureVar);$("#secure_PicC").attr("src", secureVar);
            $("#signal_Pic").attr("src", signalVar);$("#signal_PicB").attr("src", signalVar);$("#signal_PicC").attr("src", signalVar);
            $("#settings_Pic").attr("src", setVar);$("#settings_PicB").attr("src", setVar);$("#settings_PicC").attr("src", setVar);
            $("#spam_Pic").attr("src",spamVar);$("#spam_PicB").attr("src", spamVar);$("#spam_PicC").attr("src", spamVar);
            $("#feedback_Pic").attr("src", feedbackVar);$("#feedback_PicB").attr("src", feedbackVar);$("#feedback_PicC").attr("src", feedbackVar) 
```

我试图这样做：

```
$("#health_Pic","#health_PicB","#health_PicC").attr("src", healthVar); 
```

运气不好，感谢您提供任何信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:26:41.120

尝试：

```
$("#health_Pic,#health_PicB,#health_PicC").attr("src", healthVar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:23:07.300

jQuery attr 函数只接受选择器获得的第一个元素。

```
Get the value of an attribute for the 
first element in the set of matched elements. 
```

使用循环更改多个图像 src。

编辑：在检查文档并自己尝试之后，我发现使用 .attr 作为设置器确实为所有元素设置了值。感谢 j08691 指出这一点。

# .htaccess - .htaccess 重定向有查询字符串，但错过了文件

> ID：10377777
> 
> 赞同：0
> 
> 时间：2012-04-30T02:13:29.473
> 
> 标签：.htaccess, mod-rewrite, redirect, subdomain

我正在努力将我的所有链接从[http://www.example.com/forum/](http://www.example.com/forum/)永久重定向到[http://forum.example.com/](http://forum.example.com/)。问题是只使用了查询字符串，而不是要加载的实际文件。

从我的以下示例中可以看出，新链接在 url 中缺少文件，但具有查询字符串。

**示例 1：（失败）**

链接来自：[http ://example.com/forum/memberlist.php?mode=viewprofile&u=1](http://example.com/forum/memberlist.php?mode=viewprofile&u=1)

发送至： http: [//forum.example.com/?mode=viewprofile &u=258](http://forum.example.com/?mode=viewprofile&u=258)

**示例 2：（失败）**

链接来自：[http ://example.com/forum/viewtopic.php?f=1&t=1&start=1](http://example.com/forum/viewtopic.php?f=1&t=1&start=1)

发送至： http: [//forum.example.com/?f=1 &t=1&start=1](http://forum.example.com/?f=1&t=1&start=1)

**这是我的 .htaccess 文件（位于 www/forum/ 内）**

```
RedirectMatch 301 ^/forum/.*$ http://forum.example.com 
```

子文件夹 /forum/ 是唯一应该重定向的链接。我们只是将论坛移动到一个新的子域。我不熟悉 htaccess，所以如果您需要更多信息，请见谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:35:24.777

这对我来说很好：

```
RedirectMatch 301 ^/forum/(.*) http://forum.domain.com/$1 
```

我不知道它为什么起作用，但我发现使用了好的旧线索和错误。

# sql - 在 SQL Select 语句上返回布尔值

> ID：10377781
> 
> 赞同：181
> 
> 时间：2012-04-30T02:14:08.297
> 
> 标签：sql, select, boolean

如何在 SQL Select 语句中返回布尔值？

我试过这段代码：

```
SELECT CAST(1 AS BIT) AS Expr1
FROM [User]
WHERE (UserID = 20070022) 
```

并且仅`TRUE`当`UserID`存在于表上时才返回。`FALSE`如果`UserID`桌子上不存在，我希望它返回。

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2012-04-30T02:17:07.243

如果用户不存在，您所拥有的将根本不返回任何行。这是您需要的：

```
SELECT CASE WHEN EXISTS (
    SELECT *
    FROM [User]
    WHERE UserID = 20070022
)
THEN CAST(1 AS BIT)
ELSE CAST(0 AS BIT) END 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-30T02:20:58.607

可能是这样的：

```
SELECT CAST(CASE WHEN COUNT(*) > 0 THEN 1 ELSE 0 END AS BIT)
FROM dummy WHERE id = 1; 
```

[http://sqlfiddle.com/#!3/5e555/1](http://sqlfiddle.com/#!3/5e555/1)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-08-15T22:28:46.473

鉴于通常`1 = true`and `0 = false`，您需要做的就是计算行数，然后转换为 a `boolean`。

因此，您发布的代码只需要`COUNT()`添加一个函数：

```
SELECT CAST(COUNT(1) AS BIT) AS Expr1
FROM [User]
WHERE (UserID = 20070022) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-05-10T10:22:26.637

使用返回 0 或 1 的“存在​​”。

查询将如下所示：

```
SELECT EXISTS(SELECT * FROM USER WHERE UserID = 20070022) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-07T12:25:31.477

```
select CAST(COUNT(*) AS BIT) FROM [User] WHERE (UserID = 20070022) 
```

如果 count(*) = 0 返回 false。如果 count(*) > 0 返回真。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-03-02T22:47:38.243

我这样做：

```
SELECT 1 FROM [dbo].[User] WHERE UserID = 20070022 
```

看到一个布尔值永远不能为空（至少在.NET中），它应该默认为false，或者如果它默认为true，你可以自己设置它。然而 1 = true，所以 null = false，并且没有额外的语法。

注意：我使用 Dapper 作为我的 micro orm，我想 ADO 应该也可以这样工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-29T23:56:49.910

对于那些有兴趣获得添加自定义列名称的值的人，这对我有用：

```
CAST(
    CASE WHEN EXISTS ( 
           SELECT * 
           FROM mytable 
           WHERE mytable.id = 1
    ) 
    THEN TRUE 
    ELSE FALSE 
    END AS bool) 
AS "nameOfMyColumn" 
```

如果您对保持名称的大小写不感兴趣（在某些客户端中），您可以跳过列名称中的双引号。

我为此稍微调整了@Chad 的答案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-11T12:07:00.523

请注意另一个等效问题：创建一个 SQL 查询，如果条件满足则返回 (1)，否则返回空结果。请注意，此问题的解决方案更通用，可以轻松地与上述答案一起使用，以实现您提出的问题。由于这个问题更普遍，除了上面针对您的问题提出的漂亮解决方案之外，我还证明了它的解决方案。

```
SELECT DISTINCT 1 AS Expr1
FROM [User]
WHERE (UserID = 20070022) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-23T07:34:49.730

```
DECLARE @isAvailable      BIT = 0;

IF EXISTS(SELECT 1  FROM [User] WHERE (UserID = 20070022))
BEGIN
 SET @isAvailable = 1
END 
```

最初 isAvailable 布尔值设置为 0

# android - 从相机拍摄时图片/图像质量低

> ID：10377783
> 
> 赞同：48
> 
> 时间：2012-04-30T02:14:24.217
> 
> 标签：android, android-camera-intent

我有一个问题。当我尝试从相机获取图片时，质量非常低。首先，使用相机捕获图片，然后保存到目录中，同时获取该图片并显示在我的应用程序中。保存在目录中的图片质量很好，但是当我从目录中获取时，质量很低。下面是我的示例代码：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {

    if (requestCode == CAMERA_PIC_REQUEST) {  

        Bitmap thumbnail = (Bitmap) intent.getExtras().get("data");

        if (g==1)
        {
            ImageView myImage = (ImageView) findViewById(R.id.img5);
            myImage.setImageBitmap(thumbnail);

            View a = findViewById(R.id.img5);
            a.setVisibility(View.VISIBLE);

            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            thumbnail.compress(Bitmap.CompressFormat.JPEG, 100, stream);

            byteArray1 = stream.toByteArray();
        }
} 
```

任何解决方案/建议？谢谢 ：）

**解决了**

当我按照下面的[Antrromet给出的代码时，问题解决了](https://stackoverflow.com/users/451951/antrromet)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-04-30T10:33:47.160

我使用了以下代码，这对我来说非常好。

```
 values = new ContentValues();
            values.put(MediaStore.Images.Media.TITLE, "New Picture");
            values.put(MediaStore.Images.Media.DESCRIPTION, "From your Camera");
            imageUri = getContentResolver().insert(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
            startActivityForResult(intent, PICTURE_RESULT); 
```

并且

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {

        case PICTURE_RESULT:
            if (requestCode == PICTURE_RESULT)
                if (resultCode == Activity.RESULT_OK) {
                    try {
                        thumbnail = MediaStore.Images.Media.getBitmap(
                                getContentResolver(), imageUri);
                        imgView.setImageBitmap(thumbnail);
                        imageurl = getRealPathFromURI(imageUri);    
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                }
        }
    } 
```

和

```
public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-20T16:30:21.453

我会给你一些对我有用的东西。我也问过！

[将图片保存在特定文件夹中而不会丢失质量的解决方案](https://stackoverflow.com/questions/36730189/how-can-i-save-a-picture-in-environment-getexternalstoragedirectory-without-lo)

**我找到了解决方案：**

//**新建文件夹代码：**

```
 String path = String.valueOf(Environment.getExternalStorageDirectory()) + "/your_name_folder";
            try {
                File ruta_sd = new File(path);
                File folder = new File(ruta_sd.getAbsolutePath(), nameFol);
                boolean success = true;
                if (!folder.exists()) {
                    success = folder.mkdir();
                }
                if (success) {
                    Toast.makeText(MainActivity.this, "Carpeta Creada...", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception ex) {
                Log.e("Carpetas", "Error al crear Carpeta a tarjeta SD");
            }

            Intent i = new Intent(MainActivity.this, MainActivity.class);
            startActivity(i);
            finish();//agregue este 
```

//**拍照方法**

```
public void clickFoto(View view) {
        takePic();
    } 
```

//***拍摄图片（）***

```
 private void takePic() {
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        *File file = new File(Environment.getExternalStorageDirectory(), "/your_name_folder/a" + "/photo_" + timeStamp + ".png");*
        imageUri = Uri.fromFile(file);

        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
        startActivityForResult(intent, PICTURE_RESULT);
    } 
```

// ***onActivityResult***

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {

            case PICTURE_RESULT:
                if (requestCode == PICTURE_RESULT)
                    if (resultCode == Activity.RESULT_OK) {
                        try {
                            Bitmap thumbnail = MediaStore.Images.Media.getBitmap(
                                    getContentResolver(), imageUri);
                            imgFoto.setImageBitmap(thumbnail);
                            imageurl = getRealPathFromURI(imageUri);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }
        }
    } 
```

// ***getRealPathFromUri***

```
public String getRealPathFromURI(Uri contentUri) {
        String[] proj = {MediaStore.Images.Media.DATA};
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-14T05:10:43.767

**将照片添加到图库** 。.

```
private void galleryAddPic() {
    Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    File f = new File(currentPhotoPath);
    Uri contentUri = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    this.sendBroadcast(mediaScanIntent);
} 
```

更多细节：[https ://developer.android.com/training/camera/photobasics.html](https://developer.android.com/training/camera/photobasics.html)

# ruby-on-rails - Rails 每天只保留许多记录中的 1 条。保留最后，删除其余部分

> ID：10377784
> 
> 赞同：4
> 
> 时间：2012-04-30T02:14:50.753
> 
> 标签：ruby-on-rails, ruby, activerecord

Rails 3.1、Ruby 1.9.2、AR/MySQL。

如果同一类型的结果在此期间有很多结果，我正在寻找有关如何在每个时间段（天）仅保留 1 个结果的建议。一个例子可能是跟踪股票价格。最初，我们将每 15 分钟保存一次价格，但只需要将每个价格点存储 1 周。第一周后，我们每天只需要 1 个价格（最后记录，收盘价）。

这是一个简单的第一次尝试，它确实有效，但效率非常低：

```
# stock has many prices, price has one stock
# get all prices for single stock older than 1 week
prices = stock.prices.where("created_at < ? ", Time.now-1.week)  
prices.group_by{ |price| price.created_at.to_date }.each do |k,v| # group by day
  if v.count > 1  # if many price points that day
    (v[0]..v[v.size-2]).each {|r| r.delete} # delete all but last record in day
  end
end 
```

提前感谢您的任何帮助/建议。我会在完成工作时尝试更新，希望它能帮助某人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:37:12.503

您可以通过在 SQL 中完成所有操作并将范围限制为上次运行的时间来提高效率。此外，如果您添加一列以将较旧的日终条目标记为“已归档”，那么它会使查询变得更加简单。存档价格是您在一周后不会删除的价格。

```
rails generate migration add_archived_to_prices archived:boolean 
```

在迁移之前，将迁移修改为 created_at 列上的索引。

```
class AddArchivedToPrices < ActiveRecord::Migration
  def self.up
    add_column :prices, :archived, :boolean
    add_index :prices, :created_at
  end

  def self.down
    remove_index :prices, :created_at
    remove_column :prices, :archived
  end
end 
```

工作流程将是这样的：

```
# Find the last entry for each day for each stock using SQL (more efficient than finding these in Ruby)
keepers =
  Price.group('stock_id, DATE(created_at)').
        having('created_at = MAX(created_at)').
        select(:id).
        where('created_at > ?', last_run) # Keep track of the last run time to speed up subsequent runs

# Mark them as archived
Price.where('id IN (?)', keepers.map(&:id)).update_all(:archived => true)

# Delete everything but archived prices that are older than a week
Price.where('archived != ?', true).
      where('created_at < ?", Time.now - 1.week).
      where('created_at > ?', last_run). # Keep track of the last run time to speed up subsequent runs
      delete_all 
```

最后一点，请务必不要将 和 结合`group()`起来`update_all()`。`group()`被忽略`update_all()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:49:14.563

而不是在每个喜欢上调用 delete

```
 (v[0]..v[v.size-2]).each {|r| r.delete} 
```

做 delete_all 但不是最后一个

```
price_ids_to_keep = []
if v.count > 1  # if many price points that day
  price_ids_to_keep << v[-1].id # get the last
else
  price_ids_to_keep << v[0].id
end

prices.where('id not in (?)',price_ids_to_keep).delete_all 
```

我从来没有这样做过，但我很确定它应该可以工作

* * *

这更好，因为它会减少 DELETE 查询，但应该有一种方法可以在一个大查询中完成所有这些

* * *

从商业角度来看，您或您的团队应该更好地考虑这一点。现在的存储很便宜，这样的信息对于未来的数据挖掘和类似的东西来说可能是宝贵的。

# windows - Delphi TForm OnCreate 被多次调用

> ID：10377786
> 
> 赞同：2
> 
> 时间：2012-04-30T02:15:29.013
> 
> 标签：windows, delphi, dll

我希望我能体面地解释这个问题！

我正在尝试将 ReWire 音频设备实现为 Delphi .dll。如果您不知道 ReWire 是什么，请不要担心。重要的是我的代码编译成 .dll，我从 ReWire 系统调用我的 .dll 来打开显示器，检查显示器是否打开，然后再次关闭它。

当我接到启动电话时，我会执行以下操作：

```
 if not Assigned(form) then
    form := TMyForm.Create(nil);
  form.Show; 
```

我的 Delphi 库`form`中的*全局变量*在哪里（可能有问题？）。我已经连接了`MyForm`'s `OnCreate`event 来做一些有趣的事情，比如准备一系列我想要使用的东西。

到目前为止一切都很好。我的表单中有一个小按钮，可以打开`TOpenDialog`. 我发现，一旦该对话框关闭，`OnCreate`事件就会以某种方式再次以我的形式触发！

我已经检查过`OnDestroy`没有被调用，所以我不知道为什么`OnCreate`会再次被调用。

不幸的是，我不太确定哪些信息是相关的，但这是第一次调用堆栈（首次设置表单时）：

![第一个调用栈](../Images/32c0341ea1596229d11967ab8850ba89.png)

正如预期的那样，ReWire 正在调用我的 .dll 以启动 Panel 应用程序，因此我创建了我的表单。太好了，情况看起来不错。

然后在我的表单中，我打开一个小对话框，选择一个文件，然后进行一些操作。在左侧字段之外，`OnCreate`再次调用，这是当时的调用堆栈：

![第二个调用栈](../Images/4d40bf63ff4502f888da80c6493d95e9.png)

这是一个疯狂的电话聚会！Reaper（在底部）是我用来测试我的应用程序的 ReWire 主机，但我不知道堆栈跟踪内部发生了什么，因为它都不是我的代码。突然，当我认为不应该调用该事件时，该事件就被调用了，因为`OnDestroy`甚至没有调用该事件。

我能想到的唯一另一件重要的事情是，如果我打印出 的地址，`Sender`每次都*不同*，所以它会以某种方式再次创建或其他什么，但我已经检查过我只调用了 MyForm.Create 一次。

关于这种事情如何发生的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T04:30:15.623

在第一个堆栈跟踪中，`OnCreate`调用之前是对 的调用`TCustomForm.Create()`，这是正确的行为。在第二个堆栈跟踪中，`OnCreate`调用之前是调用，`TObject.Create()`而不是正确的行为。这使我认为您的按钮`OnClick`事件处理程序中的某些内容要么正在构造具有错误 VMT 的对象，要么通常会破坏内存并导致错误地跳转到恰好被您的`TForm`类占用的代码中。无论哪种方式，请仔细检查您的`OnClick`逻辑是否存在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:50:48.667

检查（任何）将表单变量设置为零的位置。可能是它被设置为 nil 而没有释放它指向的表单，所以下次调用你的启动代码时，它会创建表单的另一个实例。

# perl - '\' 在这个 perl 脚本的上下文中是什么意思

> ID：10377788
> 
> 赞同：0
> 
> 时间：2012-04-30T02:15:53.367
> 
> 标签：perl

我需要解释为什么这个 perl 代码的输出是错误的，但我不明白 '\' 在 perl 中是什么意思。 **这是学校作业**

```
#!/user/bin/perl
$x=5;
$y=\$x;
print "$x , $y, $$y \n";
$x=6;
print "$x , $y, $$y \n";
$y=4;
print "$x , $y, $$y\n"; 
```

这也是它给出的输出。

```
5 , SCALAR(0x8daaa0), 5 
6 , SCALAR(0x8daaa0), 6 
6 , 4, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T02:24:59.787

`\`是参考运算符。`$y`现在拥有对`$x`. `$$y`也是如此`$x`。

您可以参考[perldoc perlreftut](http://perldoc.perl.org/perlreftut.html)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T02:22:17.873

查看解释参考的[perldoc perlref 。](http://perldoc.perl.org/perlref.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T02:23:41.093

`\`引用它后面的变量。

要显示[警告](http://p3rl.org/lexwarn)，请添加：

```
use warnings; 
```

# c# - 如何将 C# 代码中创建的按钮的单击事件与方法相关联？

> ID：10377790
> 
> 赞同：3
> 
> 时间：2012-04-30T02:16:17.170
> 
> 标签：c#, windows-phone-7, event-handling

我正在构建一个 Windows Phone 应用程序，但无法将动态创建的 Button 与其事件处理程序关联。

我正在使用的代码是：

```
public partial class MainPage : PhoneApplicationPage
{
    Button AddButton

    public MainPage()
    {
        CreateInterestEntry();
    }

    private void CreateInterestEntry()
    {
        EntrySegment = getEntrySegment();
        ContentPanel.Children.Add(EntrySegment);
    }

    private void AddButton_Click(Object sender, RoutedEventArgs e)
    {
        //Stuff to do when button is clicked
    }

    private Grid getEntrySegment()
    {
        Grid EntrySegment = new Grid();

       //Creating the grid goes here

        AddButton = new Button();
        AddButton.Content = "Add";
        AddButton.Click += new EventHandler(AddButton_Click);

        return EntrySegment;
    }
} 
```

}

使用此代码，它抱怨 AddButton_Click 的重载与委托“System.EventHandler”不匹配。

它几乎与 msdn 上的示例下的代码相同，[除了](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)我已将 AddButton_Click 中的参数类型从 EventArgs 更改为 RoutedEventArgs，否则 Visual Studio 告诉我它无法从 System.EventHandler 隐式转换为 System.RoutedEventHandler。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:35:22.913

尝试这个：

```
AddButton.Click += new RoutedEventHandler(AddButton_Click); 
```

和 Click 事件处理程序：

```
void AddButton_Click(object sender, RoutedEventArgs e)
{
} 
```

# html - 对齐html输入和提交

> ID：10377791
> 
> 赞同：2
> 
> 时间：2012-04-30T02:16:47.440
> 
> 标签：html, css, positioning

我遇到了一个荒谬的问题，我的输入文本字段和提交按钮没有对齐，我真的想不出一个优雅的解决方案来解决它。如下图所示，输入文本字段（右上角标有“输入关键字”）比“搜索”提交按钮高 2px：

![输入字段在提交按钮上方 2px](../Images/7c1d20082027610e8e8a5521f04e0885.png)

这是HTML：

```
<div id="search">
    <form action="#" method="POST" id="search_form">
        <div id="search_inputs">
            <input type="text" placeholder="Enter Keywords" name="keywords" />
            <input class="button" type="submit" name="search" value="SEARCH" />
        </div>
    </form>
</div> 
```

这是css代码：

```
#search_form .button {
    background: black;
    color: white;
    padding: 3px 15px;
    border: none;
    font-size: 7pt;
    height: 18px;
}

#search_form input[name="keywords"] {
    width: 175px;
}

#search {
    margin-top: 7px;
    float: right;
} 
```

我很确定将字体大小设置为 7pt 会搞砸，但我不知道为什么，也不知道如何处理，因为这是我在该区域中其他按钮的字体大小。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T02:26:14.057

`float: left;`在样式中添加 a可以`#search_form input[name="keywords"]`正确对齐他们的上衣，然后添加一些`margin-right`应该可以让您顺利进行。

[小提琴](http://jsfiddle.net/vQkTJ/)

问题源于`float: right`搜索按钮。输入框有一种自然`display: inline-block`的感觉，这导致了轻微的下降。通常，当您向右浮动时，解决此问题的方法是将该元素在 DOM 中向上移动。这在这种情况下不起作用。通过将输入更改为浮动元素，您也将其强制为`display: inline`.

虽然我不确定为什么你不能只添加一个`display: inline`元素。

# jquery - 将多维数组保存到 Cookie 以回调显示？

> ID：10377797
> 
> 赞同：0
> 
> 时间：2012-04-30T02:17:48.750
> 
> 标签：jquery, forms, cookies, multidimensional-array, onload

我有一个表单，可以将项目推送到多维数组中，但我不知道如何将其保存到 cookie 中，以便稍后在重新加载页面时再次调用。

```
function addit(form) {
    upperlimit = upperlimit + 1
original[original.length++] =  new input(form.Title.value, form.Artist.value, form.Ddate.value, form.Genre.value, form.Picsrc.value)
alert("your entry has been added")
saveIt()
clearform()
} 
```

饼干功能？

```
function saveIt() {
var x = original;//this is a multi-dimensional array
    $.cookie("data",original);
    alert($.cookie("data"));} 
```

需要以某种方式回调并将 cookie 加载到数组中才能进行显示：

```
$("#info").html(original[currentrecord].Title+"<br /><h2>"+original[currentrecord].Artist+"</h2>"+original[currentrecord].Ddate+"<br />"+original[currentrecord].Genre) ; 
```

顺便说一句，当我只是对数组（ alert(original) ）发出警报时，如果这会影响保存到 cookie 的内容，它会显示为 [object Object] 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:52:38.427

在将您的对象写入 coockie 之前（它是一个对象，而不是数组），只需执行此操作

```
var x = JSON.stringify(original); 
```

再次将其用作对象：

```
var back2orig = JSON.parse($.cookie('data')); 
```

这就是它的全部......谷歌JSON，你会喜欢它的:)

# javascript - 在 Node 中设置基于文件系统的路由

> ID：10377799
> 
> 赞同：1
> 
> 时间：2012-04-30T02:17:59.797
> 
> 标签：javascript, node.js, url-routing

我真的很喜欢 PHP 在服务页面中提供的简单性，一切都基于文件系统。我想对 Node 做同样的事情。我尝试了一种像这样用于视图的路由设置，但破坏了我的公用文件夹：

```
//using express:
app.get('*', function(req, res) {
  file = req.params[0].substr(1, req.params[0].length);
  console.log('requesting: ' + file);
  res.render(file, {locals: {
    req: req,
    params: req.query
  }});
}); 
```

*所以...*

### 在 Node 中设置基于文件系统的/php 样式路由的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:02:29.907

我认为我构建的正是您正在寻找的东西。我用它来提供`.jade`文件，显然你可以根据你的用例调整它。

```
var url = require('url');
var express = require('express');
var app = express.createServer();
var fs = require('fs');

app.set("view engine", "jade");

app.use(app.router);
app.use(express.static(__dirname + '/public'));

/**
 * Generic "get" attempts to route to known JADE files.
 * If no known JADE files, then we pass routing to next() (should be static).
 */
app.get('*', function(req, res, next) {

  var pathname = url.parse(req.url).pathname.toLowerCase(); // make matching case insenstive

  // First case: with no path name, render the default index.jade
  if(!pathname) {
    res.render('index', {});
  }
  // Second case: path ending in '/' points to a folder, use index.jade from that folder
  else if (pathname === '/' || pathname.charAt(pathname.length-1) === '/' ){
    res.render(__dirname + '/views' + pathname + 'index.jade', {});
  }
  // Third case: looks like an actual file, attempt to render
  else {
    // Attempt to find the referenced jade file and render that. Note 'views' is default path.
    fs.stat( (__dirname + "/views" + pathname + '.jade'), function(err, stats){
      // There was an error, the file does not exist pass control to the static handler
      if(err || !stats) {
        next();
      }
      // We found the file, render it.
      else{
        res.render(pathname.substring(1), {});
      }
    });

  }
});

app.listen(port); 
```

请注意，那里应该有更多`app.use()`用于处理 cookie、解析正文等的语句。此外，第二个参数`render`始终为空。`{layout: xyz}`您可能希望使用需要进入呈现页面的内容或通用变量来填写此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:07:38.470

您可以使用 express.static()

举些例子：

```
app.configure(function(){
  app.use(express.static(__dirname + '/public'));
});

app.configure(function(){
  app.use('/uploads', express.static(PATH_TO_UPLOAD_FOLDER));
}); 
```

# php - 用户在用户创建的内容中创建内容

> ID：10377801
> 
> 赞同：0
> 
> 时间：2012-04-30T02:18:26.353
> 
> 标签：php, sql, mysqli, posts, forums

所以我要问的本质上是我如何创建一个线程，然后让用户在该线程中发布。我认为这将是一个简单的外键和其他神奇的东西，我会工作，但事实并非如此。

[http://vidyasocks.com/testin/forum.php](http://vidyasocks.com/testin/forum.php)

我该怎么办？我很确定我有逻辑部分。也就是说，当您在线程中创建帖子时，它会为帖子提供帖子 ID。然后我从数据库中选择与帖子 ID 匹配的线程 ID，然后它就可以工作了。

我该怎么做？>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:23:14.770

创建两个表，一个线程，一个回复。回复表有一个对应于线程 id 的线程 id 列。然后你在回复表中查找回复使用`WHERE threadid = '$threadid'`

# entity-framework-4 - 强制 EF 返回视图中所有行的最佳方法是什么？

> ID：10377803
> 
> 赞同：0
> 
> 时间：2012-04-30T02:19:00.673
> 
> 标签：entity-framework-4

我有一个视图，其中一个连接列可以为空，但通常是两行之间唯一的区别项。我看到 EF 从视图中的所有不可为空的项目中构建了一个主键。我注意到当我从视图中拉出时，这个可为空的列并不总是正确返回，我读到它与它映射到键的方式有关，如果它看到键将返回同一行已经存在。

理想情况下，最好的解决方案是让我的列不可为空，但我不能这样做而不引起更大的问题。

另一个想法是用来`ROW_NUMBER()`制作主键。我不确定这是否会导致类似的问题（如果在调用之间没有刷新上下文，它会完全关闭还是足够聪明地意识到查询是不同的？）我也担心需要一个`ORDER BY`for函数以及这将如何影响行的动态排序。

确保我的所有行都完全按照它们通过 SQL 查询出现的方式返回，并且对性能的影响最小的最佳方法是什么？

谢谢..

**例子：**

```
view: A int, B int, C int?

SQL Results:
1, 2, null
1, 3, 10
1, 3, 11 
```

EF 将返回如下内容：

```
1, 2, null
1, 3, 10
1, 3, 10 
```

我也需要得到那个11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:50:26.087

这是由于身份映射模式而发生的。默认情况下，EF 跟踪已加载的实体（由实体键标识） - 如果结果集包含重复的实体键 EF 认为它与已加载的实体相同，并且不会为这些实体创建新的实体实例重复记录 - 相反，它使用为具有该键的第一条记录创建的实例。这对于更改跟踪和将更改保存回数据库的能力是必要的。

在您的情况下，您很可能不想将更改保存回数据库，因为这些记录没有为您提供必要的信息来做到这一点。因此，在没有更改跟踪的情况下加载记录，它应该跳过身份映射模式并为结果集中的每条记录生成新的实体实例：

```
context.YourEntitySet.MergeOption = MergeOption.NoTracking; 
// Now execute your query 
```

# facebook - 共享按钮不显示共享链接中的图像

> ID：10377805
> 
> 赞同：4
> 
> 时间：2012-04-30T02:19:18.860
> 
> 标签：facebook, shared

我确实在网站上配置了“喜欢和分享”按钮，但是共享链接时出现的图像与链接中的图像不同，它是来自网站的一些随机图像

所以看到另一个图像，但只有当用户点击链接时才会显示正确的图像。

我该如何解决？任何参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T03:15:31.667

使用调试工具检查 Facebook 在您的页面上检测到的内容：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

如果您共享的链接上缺少任何 Open Graph 元标记，Facebook 必须猜测标题/描述/图像/等，它不一定是第一个/最大/最突出的图像或文本在页面上

# extjs - extjs.apply 更改配置的不同行为

> ID：10377808
> 
> 赞同：0
> 
> 时间：2012-04-30T02:19:33.737
> 
> 标签：extjs

```
Ext.define('extjs.example.mypanel',{
    extend:'Ext.panel.Panel',
    layout: {
        type: 'vbox',
        align : 'stretch',
        pack  : 'start',
     },
    initComponent: function(config) {
        Ext.apply(this.subpanel,{
        html:'panel changed',
        listeners:{
                click: function(){alert('hi');},
                element: 'body'
        }
    } 
        );
        Ext.apply(this,{
            items: [
                this.subpanel,
                {html:'panel 2', height:150},
                {html:'panel 3', height:150}
            ]
        } 
        );
        this.callParent(arguments);
    },
    subpanel:Ext.create('Ext.panel.Panel',{
        html:'panel 1', 
        height:150
    }) 
```

});

```
Ext.onReady(function() {
Ext.create('extjs.example.mypanel', {
    renderTo: Ext.getBody(),
    height:500,
    width: 500
}); 
```

});

这是代码。我想研究如何使用 Ext.apply。在这里，我通过这种方法更改了两个配置。一个是html，另一个是监听器。但我发现 html 改变了作品。但听众没有。

我的问题是：1）我的问题是什么？我做错了或者某些配置不能被 Ext.apply 更改？2）如果我做错了，如何纠正？ 3）如果某些配置不能使用Ext.apply？有什么规则或文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:39:06.340

`Ext.apply`不分配听众。它只是将 config 的所有属性复制到指定的对象。在您的示例`this.subpanel`中是实例，`Ext.panel.Panel`您可以做的是传递一个配置对象：

```
subpanel: {
    xtype: 'panel',
    html: 'panel 1',
    height: 150
} 
```

# regex - PowerShell 隔离部分字符串

> ID：10377809
> 
> 赞同：1
> 
> 时间：2012-04-30T02:19:45.063
> 
> 标签：regex, powershell

我没有使用正则表达式的经验，并且希望就删除 csv 文件中包含的部分文件名的可能解决方案提供一些帮助和建议。

问题：

导出的文件名列表包含我需要隔离的随机唯一标识符。唯一标识符没有可预测的模式，但是需要删除的方面可以。每个文件名都以下列变体之一结尾：

*V、-V 或 %20V 后跟带有可能空格的随机数序列、附加的“-”、“* ”并以 .PDF 结尾

例子：

GTD-LVOE-43-0021 V10 0.PDF GTD-LVOE-43-0021-V34-2.PDF GTD-LVOE-43-0021_V02_9.PDF GTD-LVOE-43-0021 V49.9.PDF

解决方案：

我的计划是编写一个脚本，从字符串末尾选择第一次出现的 V，然后删除它以及它右侧的所有内容。然后可以通过删除出现在字符串末尾的任何“-”或“_”和空格来清理文件名。

问题：

我怎样才能用正则表达式做到这一点，我的思路是否接近解决这个问题的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:42:54.157

正则表达式： `[\s\-_]V.*?\.PDF`

可能会奏效。您仍然需要替换任何前导 - 和 _，但希望它能让您走上正轨。

这将如下所示..

以`whitespace`, `-`OR开头，`_`后跟`V`. 然后拿走所有东西，直到你到达第一个`.PDF`

# c# - 在对 SOAP 请求进行数字签名时指定 #Body 的引用 URI - 使用 WCF

> ID：10377811
> 
> 赞同：5
> 
> 时间：2012-04-30T02:20:24.593
> 
> 标签：c#, wcf, soap

我正在使用 WCF 客户端与非 WCF Web 服务通信。

此 Web 服务要求对 SOAP 消息的主体进行签名，但是，我无法生成有效的 SOAP 请求。

我已经实现了一个继承自 IClientMessageInspector 的 ClientMessageInspector，我在此修改 BeforeSendRequest 方法中的消息以添加 XML 数字签名。我使用 SignedXML 类来执行此操作。

我正在使用 IBM Web Services Validation Tool for WSDL and SOAP 来检查我的数字签名是否经过验证。

我的问题是，当我在引用 URI 中指定一个完整的命名空间引用时，我使用的 IBM 工具说我有一个有效的签名。根据 XML 数字签名规范，我应该只能引用属性，而无需命名空间，但是，当我这样做时，我没有得到有效的数字签名。

这是我当前正在生成的 SOAP 请求，我的工具说它有一个有效的签名，但是 Web 服务不喜欢它：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" 
            xmlns:s="http://www.w3.org/2003/05/soap-envelope" 
            xmlns:soapsec="http://schemas.xmlsoap.org/soap/security/2000-12" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <s:Header>
    <soapsec:Signature>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" />
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
          <Reference URI="http://schemas.xmlsoap.org/soap/security/2000-12#Body">
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
            <DigestValue>4mt5wluUTu5tpR2d5UemVSLvqTs=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>UZ7HzfE3GxIY9hg...</SignatureValue>
        <KeyInfo>
          <X509Data>
            <X509Certificate>MIIEkTCCA3mgAwIBAgIQCu...</X509Certificate>
          </X509Data>
          <KeyValue>
            <RSAKeyValue>
              <Modulus>0C3e9HDx5Yq6FLUxIgjJ...</Modulus>
              <Exponent>AQAB</Exponent>
            </RSAKeyValue>
          </KeyValue>
        </KeyInfo>
      </Signature>
    </soapsec:Signature>
  </s:Header>
  <s:Body soapsec:id="Body">
    .... SOAP Body Here ...
  </s:Body>
</s:Envelope> 
```

这是我要生成的 SOAP 请求，但我的工具说它的签名无效，并且 Web 服务还告诉我签名无效：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" 
            xmlns:s="http://www.w3.org/2003/05/soap-envelope" 
            xmlns:soapsec="http://schemas.xmlsoap.org/soap/security/2000-12" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <s:Header>
    <soapsec:Signature>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" />
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
          <Reference URI="#Body">
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
            <DigestValue>4mt5wluUTu5tpR2d5UemVSLvqTs=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>UZ7HzfE3GxIY9hg...</SignatureValue>
        <KeyInfo>
          <X509Data>
            <X509Certificate>MIIEkTCCA3mgAwIBAgIQCu...</X509Certificate>
          </X509Data>
          <KeyValue>
            <RSAKeyValue>
              <Modulus>0C3e9HDx5Yq6FLUxIgjJ...</Modulus>
              <Exponent>AQAB</Exponent>
            </RSAKeyValue>
          </KeyValue>
        </KeyInfo>
      </Signature>
    </soapsec:Signature>
  </s:Header>
  <s:Body soapsec:id="Body">
    .... SOAP Body Here ...
  </s:Body>
</s:Envelope> 
```

这是我在 BeforeSendRequest 中创建签名并相应地修改消息的代码：

```
 public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
    {
        XmlDocument doc = new XmlDocument();
        doc.PreserveWhitespace = true;
        doc.LoadXml(request.ToString());

        // Add the required namespaces to the SOAP Envelope element, if I don't do this, the web service I'm calling returns an error
        string soapSecNS = "http://schemas.xmlsoap.org/soap/security/2000-12";
        string soapEnvNS = "http://www.w3.org/2003/05/soap-envelope";

        //Get the header element, so that we can add the digital signature to it
        XmlNode headerNode = doc.GetElementsByTagName("Header", soapEnvNS)[0];

        // Set the ID attribute on the body element, so that we can reference it later
        XmlNode bodyNode = doc.GetElementsByTagName("Body", soapEnvNS)[0];

        ((XmlElement)bodyNode).RemoveAllAttributes();
        ((XmlElement)bodyNode).SetAttribute("id", soapSecNS, "Body");

        XmlWriterSettings settings2 = new XmlWriterSettings();
        settings2.Encoding = new System.Text.UTF8Encoding(false);

        // Load the certificate we want to use for signing
        SignedXmlWithId signedXml = new SignedXmlWithId(doc);
        X509Certificate2 cert = new X509Certificate2("C:\\myCertificate.pfx", "myPassword");

        signedXml.SigningKey = cert.PrivateKey;

        //Populate the KeyInfo element correctly, with the public cert and public key
        Signature sigElement = signedXml.Signature;
        KeyInfoX509Data x509Data = new KeyInfoX509Data(cert);
        sigElement.KeyInfo.AddClause(x509Data);

        RSAKeyValue rsaKeyValue = new RSAKeyValue((RSA)cert.PublicKey.Key);
        sigElement.KeyInfo.AddClause(rsaKeyValue);

        // Create a reference to be signed, only sign the body of the SOAP request, which we have given an 
        // ID attribute to, in order to reference it correctly here
        Reference reference = new Reference();
        reference.Uri = soapSecNS + "#Body";

        // Add the reference to the SignedXml object.
        signedXml.AddReference(reference);

        // Compute the signature.
        signedXml.ComputeSignature();

        // Get the XML representation of the signature and save
        // it to an XmlElement object.
        XmlElement xmlDigitalSignature = signedXml.GetXml();

        XmlElement soapSignature = doc.CreateElement("Signature", soapSecNS);
        soapSignature.Prefix = "soapsec";
        soapSignature.AppendChild(xmlDigitalSignature);

        headerNode.AppendChild(soapSignature);

        // Make sure the byte order mark doesn't get written out
        XmlDictionaryReaderQuotas quotas = new XmlDictionaryReaderQuotas();
        Encoding encoderWithoutBOM = new System.Text.UTF8Encoding(false);

        System.IO.MemoryStream ms = new System.IO.MemoryStream(encoderWithoutBOM.GetBytes(doc.InnerXml));

        XmlDictionaryReader xdr = XmlDictionaryReader.CreateTextReader(ms, encoderWithoutBOM, quotas, null);

        //Create the new message, that has the digital signature in the header
        Message newMessage = Message.CreateMessage(xdr, System.Int32.MaxValue, request.Version);
        request = newMessage;

        return null;
    } 
```

有人知道我如何将参考 URI 设置为#Body，而且还具有有效的 XML 签名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:59:30.583

因为我试图为 SOAP 请求生成签名，所以我通过继承 SignedXml 来解决这个问题，覆盖 GetIdElement，这样我就可以返回我正在寻找的任何元素。在这种情况下，id 元素将属于命名空间[http://schemas.xmlsoap.org/soap/security/2000-12](http://schemas.xmlsoap.org/soap/security/2000-12)

```
public class SignedXmlWithId : SignedXml
{
    public SignedXmlWithId(XmlDocument xml)
        : base(xml)
    {
    }

    public SignedXmlWithId(XmlElement xmlElement)
        : base(xmlElement)
    {
    }

    public override XmlElement GetIdElement(XmlDocument doc, string id)
    {
        // check to see if it's a standard ID reference
        XmlElement idElem = base.GetIdElement(doc, id);

        if (idElem == null)
        {
            // I've just hardcoded it for the time being, but should be using an XPath expression here, and the id that is passed in
            idElem = (XmlElement)doc.GetElementsByTagName("Body", "http://schemas.xmlsoap.org/soap/security/2000-12")[0];
        }

        return idElem;
    }
} 
```

我还意识到使用 IBM Web Services Validation Tool for WSDL 和 SOAP 等工具来验证 SOAP 请求的数字签名是行不通的。相反，我使用以下方法来验证签名：

```
 public static bool verifyDigitalSignatureForString(string msgAsString)
    {
        XmlDocument verifyDoc = new XmlDocument();
        verifyDoc.PreserveWhitespace = true;
        verifyDoc.LoadXml(msgAsString);

        SignedXmlWithId verifyXml = new SignedXmlWithId(verifyDoc);
        // Find the "Signature" node and create a new
        // XmlNodeList object.
        XmlNodeList nodeList = verifyDoc.GetElementsByTagName("Signature");

        // Load the signature node.
        verifyXml.LoadXml((XmlElement)nodeList[0]);

        if (verifyXml.CheckSignature())
        {
            Console.WriteLine("Digital signature is valid");
            return true;
        }
        else
        {
            Console.WriteLine("Digital signature is not valid");
            return false;
        }
    } 
```

# java - 如何使用 JSpinner 分别更改小时、分钟和秒？

> ID：10377814
> 
> 赞同：2
> 
> 时间：2012-04-30T02:21:34.523
> 
> 标签：java, swing, time, jspinner

有人可以告诉我如何`hh:mm:ss,msms`在`JSpinner`. 如何设置微调器以允许独立调整小时、分钟和秒？

```
Start_time_jSpinner = new javax.swing.JSpinner(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T02:59:08.527

最简单的可能是创建 3 个单独的微调器，其中第一个的值为 0-23（小时），另外 2 个的值为 0-59（分钟和秒）。

请参阅此处的 API 文档... [http://docs.oracle.com/javase/6/docs/api/javax/swing/JSpinner.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JSpinner.html)

或者这里有一个教程可能会帮助你...... [http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

您应该尝试实现您的微调器，如果您仍然需要帮助，请在此处发布一些代码，我们将能够提供更好的帮助。

# asp.net-mvc-3 - 如何将查询字符串参数传递给我的 [Remote] 数据注释验证

> ID：10377817
> 
> 赞同：0
> 
> 时间：2012-04-30T02:21:47.693
> 
> 标签：asp.net-mvc-3, data-annotations

我有一个名为的对象`VisitLabResult`，它不应该有两条相同的记录`LabTestID and VisitID`，所以为了强制进行此验证，我`[remote]`在 LabTestID 属性上创建了一个验证，如下所示：-

```
 [Required]
        [Remote("checkexsistence", "VisitLabResult",AdditionalFields= "VisitID")]
        public int LabTestID { get; set; } 
```

这将调用以下操作方法：-

```
public JsonResult checkexsistence(int LabTestID, int VisitID)
        {

    var result = repository.checkexsistence(LabTestID, VisitID);
    if (result == null)
    {

        var type = true;
        return Json(type, JsonRequestBehavior.AllowGet);

    }
    else {
        var type = false;
        return Json(type, JsonRequestBehavior.AllowGet);
    }
} 
```

并且存储库方法是：-

```
 public VisitLabResult checkexsistence(int labtestid, int visitid =20)
            {
                return (from vlr in entities.VisitLabResults
                       where (vlr.VisitID == visitid && vlr.LabTestID == labtestid)
                       select vlr).FirstOrDefault();} 
```

目前，在数据注释内部提到的`visitid`参数是在查询字符串中找到的，用于调用 CreateGet 操作方法，查询字符串看起来像。`AdditionalFields= "VisitID"``Remote``/VisitLabResult/Create?visitid=20`

**但是以上根本不起作用；如果visitid 和labtestid 已经存在，则不会显示错误，那么我该如何解决？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:27:34.553

DataAnnotations 更多的是确保数据本身可能有效。您不应该尝试使用 DataAnnotation 确定数据库中其余项目的唯一性。如果您真的想走这条路，我建议您考虑制作[自定义验证器](http://haacked.com/archive/2009/11/18/aspnetmvc2-custom-validation.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T15:01:44.237

字段 VisitID 是模型类的一部分（属性）吗？附加字段必须是您的模型类的一部分。例如，如果字段 Id 在您的模型中（LabTestID 属性在哪里），那么您可以像这样喊注 LabTestID 远程：

```
[Remote("checkexsistence", "VisitLabResult",AdditionalFields= "Id")] 
```

# gnu-screen - 如何创建嵌套屏幕会话？

> ID：10377823
> 
> 赞同：3
> 
> 时间：2012-04-30T02:22:43.480
> 
> 标签：gnu-screen

我需要在我的 .screenrc 中添加什么以便创建嵌套会话（即：屏幕中的屏幕）？

目前，如果我`screen`从打开的屏幕选项卡中再次运行，而不是在该选项卡中打开新的屏幕会话，它只会打开一个新选项卡（即：与我按下 -C 的效果相同）

我想获得一个外屏会话和一个内屏会话 - 请问我该怎么做？

我的 .screenrc 是空的，除了以下单行来显示打开的选项卡列表：

```
hardstatus alwayslastline "%{=w}%{G} %{b}%w" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T14:54:26.613

这是一个非常古老的问题，但供参考：

启动主屏幕会话：

```
screen -S main 
```

开始第二个会话（分离）：

```
screen -dmS SomeName 
```

从您想要嵌套会话的选项卡中：

```
screen -r SomeName 
```

使用和额外`a`的命令来嵌套屏幕，即`^a-a-c`在嵌套屏幕中创建一个选项卡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T16:49:22.587

不知道你的意思是从你的screenrc开始一些嵌套会话还是在你的screenrc中设置一些东西，这样你就可以从冒号提示符开始嵌套会话。

首先，我使用一个单独的 screenrc 文件 .screenrc.main，其中包含

```
source ~/.screenrc
screen -t <window name> screen -S <nested session name> -e^jj <command> 
```

我认为“新会话名称”部分对于获得新会话是必要的。我对嵌套会话使用不同的命令字符。另外我使用了一个单独的文件，因为我不希望为嵌套会话执行该命令。然后从命令行我做

```
DISPLAY= screen -S <top session name> -c .screenrc.main 
```

启动外部会话。

其次，我只需在冒号提示符中输入上面的 screen -t 行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-17T16:00:04.347

从我在您的问题中读到的内容，您似乎对如何操作嵌套会话感到困惑？

```
CTRL+a c will create a new 'tab' in the outer screen session.
CTRL+a a c will create a new 'tab' in the session 1 deeper than the previous
CTRL+a a a c creates a new tab in the session 1 deeper than the previous 
```

我有 3 层的情况，我 SSH 进入我的工作框，然后从那里进入代理，然后从那里进入我想要工作的服务器，每次打开一个屏幕会话以便稍后恢复。

如果没有显示完整主机名的 hardstatus，很容易迷路，确实很容易！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T17:04:44.913

我不知道如何编辑您的 screenrc 文件，但对我有用的是 ssh 进入同一台计算机，然后启动一个新的屏幕实例。黑客的解决方法，但它确实有效......

```
screen
ssh 127.0.0.1
screen 
```

# c++ - 重载级联插入运算符

> ID：10377830
> 
> 赞同：0
> 
> 时间：2012-04-30T02:24:07.090
> 
> 标签：c++, string, operator-overloading, insertion

以下是逐字说明：

> 字符串插入/提取运算符（<< 和 >>）需要在 MyString 对象中重载。这些运算符还需要能够进行级联操作（即，cout << String1 << String2 或 cin >> String1 >> String2）。字符串插入运算符 (>>) 将读取以行尾字符 (\n) 或 256 个字符长结尾的整行字符。超过 256 个字符的输入行将仅限于前 256 个字符。

有了这个，这是我到目前为止得到的代码：

在我的 .cpp 文件中：

```
 istream& MyString::operator>>(istream& input, MyString& rhs)
{

    char* temp;
    int size(256);
    temp = new char[size];
    input.get(temp,size);
    rhs = MyString(temp);
    delete [] temp;

    return input;

 } 
```

在我的 .h 文件中：

istream& 运算符>>(istream& 输入, MyString& rhs);

从 main.cpp 文件调用：

```
 MyString String1;
  const MyString ConstString("Target string");          //Test of alternate constructor
  MyString SearchString;        //Test of default constructor that should set "Hello World"
  MyString TargetString (String1); //Test of copy constructor

  cout << "Please enter two strings. ";
  cout << "Each string needs to be shorter than 256 characters or terminated by
  /.\n" << endl;
 cout << "The first string will be searched to see whether it contains exactly the second string. " << endl;

 cin >> SearchString >> TargetString; // Test of cascaded string-extraction operator<< 
```

我得到的错误是：istream& MyString::operator>>(std::istream&, MyString&)â 必须只接受一个参数

我该如何纠正？我对如何在没有 rhs 和输入的情况下做到这一点感到非常困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:31:13.903

您必须将其创建`operator>>`为非成员函数。

就像现在一样，您的函数需要三个参数：隐式调用对象、`istream&`和`MyString& rhs`。但是，因为`operator>>`是二元运算符（它正好需要两个参数），所以这是行不通的。

这样做的方法是使其成为非成员函数：

```
// prototype, OUTSIDE the class definition
istream& operator>>(istream&, MyString&);

// implementation
istream& operator>>(istream& lhs, MyString& rhs) {
    // logic

    return lhs;
} 
```

这样做（非成员函数）是您必须在您希望您的类位于右侧的所有运算符以及您无法在左侧修改的类的方式。

另请注意，如果您想拥有该函数访问权限`private`或对象成员，则必须在类定义`protected`中声明它。`friend`

# c# - ASP.NET MVC 3，代码优先 EF：OriginalValues？

> ID：10377832
> 
> 赞同：2
> 
> 时间：2012-04-30T02:24:19.830
> 
> 标签：c#, asp.net-mvc-3, ef-code-first

我的代码看起来很简单：

```
bool rv = false;
var results = from user in Users
            where user.userName.Equals(newUser.userName)
            select user;
if (results.Count() == 0)
{
    this.context.Users.Add(newUser);
    this.context.SaveChanges();
    rv = true;
}
return rv; 
```

但这会导致`DbEntityValidationException`带有内部异常值的 a 表示： `OriginalValues cannot be used for entities in the Added state.`

...那有什么意思？我能想到的唯一一件事是即使它有一个私有设置器并且作为主键，它也`newUser`显示值为 0 ，并且应该是数据库生成的。但如果*这*是问题所在，就不可能简单地将对象插入到任何 EF 数据库中。所以我很困惑。`userID``userID`*`Add()`*

 *提前感谢任何可以帮助阐明这一点的人。

ETA:`newUser`由我的控制器中的以下代码创建：

```
[HttpPost]
public ActionResult CreateRegistration(FormVMRegistration newRegistration)
{
    //draw info from form and add a new user to repository
    User newUser = new User();
    newUser.userName = newRegistration.userName;
    newUser.screenName = newRegistration.screenName;
    newUser.password = newRegistration.usersPW;

    bool addSuccess = userRep.Add(newUser);
    ...
} 
```

`FormVMRegistration`只是一个只有字符串属性的 ViewModel，用于将数据从注册表单传送到控制器。 `userRep`是我的用户存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:11:02.047

尽可能确定，问题似乎源于对对象的“深度”引用，或对引用的引用。IOW，类 Foo 引用了类 Bar 引用了类 Baz 引用了类 Foo ......显然 EF 不太喜欢这个，因为它不容易验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:05:57.290

我认为这是因为您在保存之前使用了 newUser 对象。尝试更改此行

```
bool addSuccess = userRep.Add(newUser); 
```

至

```
bool addSuccess = userRep.Add(newUser, newRegistration.userName); 
```

然后（给定 passUserName 是上面传递的名称）将您的 linq 查询更改为：

```
var results = from user in Users
        where user.userName.Equals(passedUserName)
        select user; 
```

祝你好运！*

# c++ - C++ Pimpl vs 纯虚拟接口性能

> ID：10377833
> 
> 赞同：3
> 
> 时间：2012-04-30T02:24:27.140
> 
> 标签：c++, performance, cross-platform, virtual-functions, pimpl-idiom

我意识到有很多关于这个主题的帖子，但我很难找到这个确切问题的答案。

对于函数调用，哪个更快，是纯虚拟接口还是 pimpl？

乍一看，在我看来纯虚拟接口会更快，因为使用 pimpl 会花费两个函数调用而不是一个......或者在这种情况下会采用某种聪明的编译器技巧吗？

编辑：我正在尝试决定我应该使用其中的哪一个来抽象出一些对象的系统相关部分，这些对象可能最终不得不非常频繁地大量生成。

**编辑：**
我想在这一点上值得一说，我的问题的根源是我误认为抽象工厂设计模式是一种使我的代码在多个平台上工作的方法，而它的真正目的是切换给定接口的实现在**运行时。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T02:29:33.763

这两个选项不是等价的，它们不应该在性能上进行比较，因为重点不同。即使它们是等效的，在大多数情况下，性能差异也会很小甚至不重要。如果您在极少数情况下*知道*调度是一个问题，那么您有工具可以自己衡量差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:38:48.050

你为什么要问？这个问题似乎没有意义。

人们通常在需要多态性时使用虚函数：当您希望它们在派生类中被覆盖时。

当想要从头文件中删除实现细节时，通常使用 pimpl。

两者确实不能互换。在我的脑海中，我想不出任何合理的情况，你会使用一个并考虑用另一个替换它。

* * *

无论如何，也就是说，对于典型的虚函数实现，函数调用包括读取对象以找到虚函数表指针，然后读取虚函数表以找到函数指针，最后调用函数指针。

对于通过 pimpl 实现的类，强制调用一个函数，但它绝对可以是“幕后”的任何东西。尽管您提出了建议，但范式并未暗示第二个函数调用。

* * *

最后，不要忘记通常的优化准则适用：您必须实际实施和衡量。试图“想”出答案往往会导致糟糕的结果，即使是在这类事情上有经验的人也是如此。

当然，最重要的优化规则是：在花费大量时间尝试优化之前，先确保某件事很重要。否则，你最终会浪费大量的时间和精力。

# sqlite - 如何使用 SQLite 查询从表中删除前几条记录？

> ID：10377834
> 
> 赞同：4
> 
> 时间：2012-04-30T02:24:48.310
> 
> 标签：sqlite

如果记录数为 110，我想从我的 SQLite 表中删除前 10 条记录（即记录 1 到 10）。我的表中只有 100 条记录。如果记录数超过 100，则应删除这些记录，因此，如果我添加新记录，则也应仅存在 100 条记录。怎么可能使用 SQLite 查询，请提供您的建议。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T10:05:08.667

我收集到您希望通过在每次表超过 100 行时删除前“X”行来维护表中的 100 行。这是您可以执行的操作：

```
Delete from table_name where rowid IN (Select rowid from table_name limit X); 
```

当您的 SQLite 表增长时，这将继续删除前“X”行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:34:05.187

首先，您必须执行一个返回表中最后 100 条记录的选择，然后使用 delete 命令删除结果中没有的所有 id，如下所示：

```
DELETE FROM tbl_name WHERE NOT EXISTS in (SELECT id FROM tbl_name ORDER BY id LIMIT 100 ); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-30T02:30:15.017

`DELETE FROM {{ table }} LIMIT 0, 10`

我不完全确定这是否正确，我目前无法检查。

# java - UNO纸牌游戏从手上移除卡片

> ID：10377839
> 
> 赞同：0
> 
> 时间：2012-04-30T02:25:37.690
> 
> 标签：java, arrays, playing-cards, indexoutofboundsexception

尝试在 java 中创建纸牌游戏“UNO”。当玩家打出一张牌时，应将其从手中移走，而其他元素则向左移动。它以一个 int n 作为参数，它指的是被丢弃的卡片。该方法应该更改我指定为类字段的卡片数组。它是一组对象，即卡片或玩家手牌。运行时，它会产生一个 nullPointerException。我知道为什么会发生错误，我只是不知道如何解决它。我也试图避免使用数组列表。它还会返回被丢弃的卡片，以便打印。谢谢。

```
public Card removeCardFromHand(int n)
{
    Card c = cards[n];
    Card[] tempCards = new Card[cards.length - 1];
    for(int i = 0; i < n; i++)
    {
        tempCards[i] = cards[i];
    }
    for(int i = n; i < cards.length; i--)
    {
        tempCards[n] = cards[n + 1];
    }
    cards = tempCards;
    return c;
} 
```

错误代码：

> java.lang.ArrayIndexOutOfBoundsException：7

```
at Player.removeCardFromHand(Player.java:86)
at BUno.executeOnePlay(BUno.java:112)
at BUno.play(BUno.java:70)
at BUno.main(BUno.java:186)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:271) 
```

这是因为，在这种情况下，玩家有 7 张牌。当第 7 个被删除时，第 7 个索引为空。当玩家必须抽一张牌时，我写了一个类似的方法来添加一张牌，它完美无缺。我正在为即将到来的考试练习，该考试不包括数组列表或向量，因此对我来说使用它们是没有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:37:09.660

```
for(int i = n; i < cards.length; i--)
{
    tempCards[n] = cards[n + 1];
} 
```

那是什么*？*:-)

三个迫在眉睫的问题。第一个是您在`n`循环内的数组索引中使用，而不是正确的`i`.

第二个是，即使你解决了这个问题，你也会超出数组的末尾。

第三是你应该增加`i`而不是减少它。递减它意味着循环将永远运行，因为`i`总是小于`cards.length`。而且，永远，我的意思是直到你开始尝试做某事的地步`cards[-1]`:-)

相反，您应该尝试：

```
for (int i = n; i < cards.length - 1; i++)
    tempCards[i] = cards[i + 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:37:33.653

您的第二个`for`循环没有按照您的预期进行。当您不断递减时，您只是`tempCards[n] = cards[n+1]`一遍又一遍地重新分配`i`。

```
for(int i = n; i < cards.length; i--) 
    { 
        tempCards[n] = cards[n + 1]; 
    } 
```

看起来像一个示例`i`以类似 3 的值开始，这将小于cards.length，然后您递减`i`到 2、1、0、-1、-2 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T02:46:41.583

您可以使用[LinkedList](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)而不是依赖数组。将物品 (a `Card`) 移除和添加到玩家手上会更快。

我发现您发布的代码存在两个问题。第一个是潜在的并发访问（但您可能会在更高级别处理它）：同时，当一张卡片的移除没有完全完成时，是否有可能添加一张卡片？

第二个在这里：

```
for(int i = n; i < cards.length; i--) 
{ 
   tempCards[n] = cards[n + 1]; 
} 
```

您应该在另一个方向 ( `i++`) 进行复制，否则您的 tempCard 将包含类似 {Card1, Card2, ..., Card n-1, Card n+1, Card n, Card n -1 ... Card 2,卡 1} 或如果您尝试删除索引 > card.lengh / 2 的卡，则会因 ArrayIndexOutOfBound 崩溃

# javascript - 制作/查找 html5 验证器小书签

> ID：10377840
> 
> 赞同：5
> 
> 时间：2012-04-30T02:25:45.897
> 
> 标签：javascript, html, bookmarklet, validation, w3c-validation

我想找到或制作一个书签，它将使用 W3C HTML 5 验证器验证当前查看的页面的 html 内容。

我找到了两个书签，并试图让一个的行为有点像一个，有点像另一个，但是我不知道该怎么做。

Chris Coyier 有一个[HTML5 验证书签](http://css-tricks.com/snippets/javascript/validate-html-bookmarklet/)，除了它使用页面 URI 之外，它运行良好，因此不适用于本地测试的站点：

```
javascript:(function(){%20function%20fixFileUrl(u)%20{%20var%20windows,u;%20windows%20=%20(navigator.platform.indexOf("Win")%20!=%20-1);%20%20/*%20chop%20off%20file:///,%20unescape%20each%20%hh,%20convert%20/%20to%20\%20and%20|%20to%20:%20*/%20%20u%20=%20u.substr(windows%20?%208%20:%207);%20u%20=%20unescape(u);%20if(windows)%20{%20u%20=%20u.replace(/\//g,"\");%20u%20=%20u.replace(/\|/g,":");%20}%20return%20u;%20}%20/*%20bookmarklet%20body%20*/%20var%20loc,fileloc;%20loc%20=%20document.location.href;%20if%20(loc.length%20>%209%20&&%20loc.substr(0,8)=="file:///")%20{%20fileloc%20=%20fixFileUrl(loc);%20if%20(prompt("Copy%20filename%20to%20clipboard,%20press%20enter,%20paste%20into%20validator%20form",%20fileloc)%20!=%20null)%20{%20document.location.href%20=%20"http://validator.w3.org/file-upload.html"%20}%20}%20else%20document.location.href%20=%20"http://validator.w3.org/check?uri="%20+%20escape(document.location.href);%20void(0);%20})(); 
```

我还找到了这个，它通过抓取当前页面的 html 来工作，但我不知道如何让它做 html5 ......代码中有对 doctype 的引用，我尝试将其更改为 html5， html500 等，并完全删除它希望它会自动检测..但无济于事：

```
javascript:(function(){var h=document;var b=h.doctype;var e="<!DOCTYPE "+b.name.toLowerCase()+' PUBLIC "'+b.publicId+'" "'+b.systemId+'">\n';var g=h.documentElement.outerHTML;var f="http://validator.w3.org/check";var i={prefill_doctype:"html401",prefill:0,doctype:"inline",group:0,ss:1,st:1,outline:1,verbose:1,fragment:e+g};var a=h.createElement("form");a.setAttribute("method","post");a.setAttribute("target","_blank");a.setAttribute("action",f);for(var j in i){var c=h.createElement("input");c.setAttribute("type","hidden");c.setAttribute("name",j);c.setAttribute("value",i[j]);a.appendChild(c)}if(navigator.appCodeName=="Mozilla"){h.body.appendChild(a)}a.submit()})(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T19:29:55.853

首先，您需要一份准确的 HTML 文档副本（包括 Doctype 等）。为此，[我编写](https://stackoverflow.com/a/10162291/938089?open-a-new-google-chrome-tab-and-get-the-source)了以下函数：

```
function DOMtoString(document_root) {
    var html = '',
        node = document_root.firstChild;
    while (node) {
        switch (node.nodeType) {
            case Node.ELEMENT_NODE:
                html += node.outerHTML;
            break;
            case Node.TEXT_NODE:
                html += node.nodeValue;
            break;
            case Node.CDATA_SECTION_NODE:
                html += '<![CDATA[' + node.nodeValue + ']]>';
            break;
            case Node.COMMENT_NODE:
                html += '<!--' + node.nodeValue + '-->';
            break;
            case Node.DOCUMENT_TYPE_NODE:
                // (X)HTML documents are identified by public identifiers
                html += "<!DOCTYPE "
                     + node.name
                     + (node.publicId ? ' PUBLIC "' + node.publicId + '"' : '')
                     + (!node.publicId && node.systemId ? ' SYSTEM' : '') 
                     + (node.systemId ? ' "' + node.systemId + '"' : '')
                     + '>\n';
            break;
        }
        node = node.nextSibling;
    }
    return html;
} 
```

然后，必须创建并提交一个表单。在检查到[http://validator.w3.org/check](http://validator.w3.org/check)的表单提交后，我创建了以下函数，它提交了重要的键值对：

```
javascript:(function() {
    var html_to_validate = DOMtoString(document);

    /* Paste the DOMtoString function here */

    function append(key, value) {
        var input = document.createElement('textarea');
        input.name = key;
        input.value = value;
        form.appendChild(input);
    }
    var form = document.createElement('form');
    form.method = 'POST';
    form.action = 'http://validator.w3.org/check';
    form.enctype = 'multipart/form-data';         // Required for this validator
    form.target = '_blank';                       // Open in new tab
    append('fragment', html_to_validate);         // <-- Code to validate
    append('doctype', 'HTML5');                   // Validate as HTML 5
    append('group', '0');
    document.body.appendChild(form);
    form.submit();
})(); 
```

## 书签

将前两个块复制到[Google 的闭包编译器](http://closure-compiler.appspot.com/home)。不要忘记**`javascript:`**再次添加前缀。

```
javascript:(function(){function c(a,b){var c=document.createElement("textarea");c.name=a;c.value=b;d.appendChild(c)}var e=function(a){for(var b="",a=a.firstChild;a;){switch(a.nodeType){case Node.ELEMENT_NODE:b+=a.outerHTML;break;case Node.TEXT_NODE:b+=a.nodeValue;break;case Node.CDATA_SECTION_NODE:b+="<![CDATA["+a.nodeValue+"]]\>";break;case Node.COMMENT_NODE:b+="<\!--"+a.nodeValue+"--\>";break;case Node.DOCUMENT_TYPE_NODE:b+="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId? " SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">\n"}a=a.nextSibling}return b}(document),d=document.createElement("form");d.method="POST";d.action="http://validator.w3.org/check";d.enctype="multipart/form-data";d.target="_blank";c("fragment",e);c("doctype","HTML5");c("group","0");document.body.appendChild(d);d.submit()})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:58:18.010

我也得到了'对不起！无法检查此文件。错误，通过在表单属性中添加一个接受字符集“utf-8”来解决它。

在创建表单元素的函数中添加以下行：form.acceptCharset = "utf-8";

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T15:57:04.927

玛塔的回答帮助了我。这是更新的书签。

```
javascript:(function(){function c(a,b){var c=document.createElement("textarea");c.name=a;c.value=b;d.appendChild(c)}var e=function(a){for(var b="",a=a.firstChild;a;){switch(a.nodeType){case Node.ELEMENT_NODE:b+=a.outerHTML;break;case Node.TEXT_NODE:b+=a.nodeValue;break;case Node.CDATA_SECTION_NODE:b+="<![CDATA["+a.nodeValue+"]]\>";break;case Node.COMMENT_NODE:b+="<\!--"+a.nodeValue+"--\>";break;case Node.DOCUMENT_TYPE_NODE:b+="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId? " SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">\n"}a=a.nextSibling}return b}(document),d=document.createElement("form");d.method="POST";d.action="http://validator.w3.org/check";d.enctype="multipart/form-data";d.target="_blank";d.acceptCharset="utf-8";c("fragment",e);c("doctype","HTML5");c("group","0");document.body.appendChild(d);d.submit()})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-16T19:39:24.973

以前的答案对我不起作用。我在[https://validator.w3.org/nu/about.html](https://validator.w3.org/nu/about.html)使用“检查当前页面的序列化 DOM”书签。这似乎工作得很好，可以获取动态生成的 HTML。

# hibernate - Hibernate：多对多关联为空

> ID：10377842
> 
> 赞同：0
> 
> 时间：2012-04-30T02:26:09.207
> 
> 标签：hibernate, many-to-many, associations, hbm

我的应用有联赛，每个联赛可以有任意数量的比赛。我使用 .hbm.xml 文件来建立联赛和比赛之间的关联。我已将其配置如下：

```
<set name="competitions" table="leagueCompetitions" lazy="false">
    <meta attribute="property-type"><![CDATA[Set< Competition >]]></meta>
    <meta attribute="default-value"><![CDATA[new HashSet< Competition >()]]></meta>
    <key column="leagueId"/>
    <many-to-many column="competitionId"
            unique="true"
            lazy="false"
            class="com.example.model.Competition"/>
</set> 
```

我有一个 DAO 方法可以检索基本上归结为的联赛列表

```
Query query = session.createQuery( "from League" );
return query.list(); 
```

我写了一些代码来计算比赛，它很简单

```
if ( league.getCompetitions().size() > 0 ) { ... blahditty blah ... } 
```

但它失败了，因为 getCompetitions() 总是一个空集。

**问题**：当我使用 LeagueDAO.list() 获取联赛列表时，不应该每个联赛都加载所有的比赛吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:58:33.453

添加级联=“全部”

```
<set name="competitions" table="leagueCompetitions" lazy="false" cascade="all">
<meta attribute="property-type"><![CDATA[Set< Competition >]]></meta>
<meta attribute="default-value"><![CDATA[new HashSet< Competition >()]]></meta>
<key column="leagueId"/>
<many-to-many column="competitionId"
        unique="true"
        lazy="false"
        class="com.example.model.Competition"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:55:21.023

原来我的 hbm.xml 配置无效。我在一张桌子上有一个多对多的配置，在关联的另一边有一个多对一的配置。结果只是一团糟。

# mongodb - Meteor Collection Object_Id 可以像 Mongo BSON ObjectId 一样用于优化技术吗？

> ID：10377845
> 
> 赞同：0
> 
> 时间：2012-04-30T02:26:24.880
> 
> 标签：mongodb, meteor

Meteor Collection Object_Id 似乎不是 Mongo BSON Object_Id。[根据 IRC 和https://github.com/meteor/meteor/blob/master/packages/uuid/uuid.js](https://github.com/meteor/meteor/blob/master/packages/uuid/uuid.js)中的对话，这似乎是真的

所以，还能不能用...

1.  用于升序？
2.  用于提取插入时间？
3.  按升序排序，在性质上与#1 和#2 相似，但在查询范围上相结合。

我相信对于许多正在考虑构建需要优化并根据 Mongo 文档进行设计的应用程序的人来说，这是一个重要的问题。有关详细信息，请参阅[http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:56:07.570

这是当前的实现：

```
// RFC 4122 v4 UUID.
LocalCollection.uuid = function () {
  var s = [];
  var hexDigits = "0123456789abcdef";
  for (var i = 0; i < 36; i++) {
    s[i] = hexDigits.substr(Math.floor(LocalCollection.random() * 0x10), 1);
  }
  s[14] = "4";
  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
  s[8] = s[13] = s[18] = s[23] = "-";

  var uuid = s.join("");
  return uuid;
} 
```

来自：[https ://github.com/meteor/meteor/blob/bf46f04024251dea7a547c48d01d8032b7838d10/packages/minimongo/uuid.js](https://github.com/meteor/meteor/blob/bf46f04024251dea7a547c48d01d8032b7838d10/packages/minimongo/uuid.js)

所以答案是，不。这主要是随机的。

# c# - 在设计中访问 MasterPage 公共属性

> ID：10377852
> 
> 赞同：0
> 
> 时间：2012-04-30T02:28:07.587
> 
> 标签：c#, asp.net, master-pages

我正在为我的 web.config 文件中的图像设置 PATH。在每一页上，我都设置了一个公共属性，例如：

> ```
>  public string ImgPath
>     {
>         get { return Config.CDNImages; }
>     } 
> ```

然后在我使用的设计页面中

```
<img src='<%#ImgPath%>/products/<%#Eval("prodID")%>.jpg'/></a> 
```

它可以工作，但现在我想在 MasterPage 上添加这个公共属性，这样我就可以在每个页面上访问 ImgPath。

当属性在 MasterPage 上时，我似乎无法让 <%#ImgPath%> 工作。我已经尝试过 <%#Master.Page.ImgPath%> .. 和许多其他变体，但我似乎无法让它工作。

如何使用内联请求/绑定在设计页面上的 MasterPage 中获取公共属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:37:32.550

我认为这行不通：

```
<%#Master.Page.ImgPath%>
 or
<%#Page.Master.ImgPath%> 
```

因为返回一个基类，而不是母版页的特定类，这意味着如果不强制转换对象`Page.Master`，ImgPath 属性将不可用。`Page.Master`每次这样做都会变得非常乏味。

您是否考虑过这样做，而不是将属性添加到您的母版页？

```
public abstract class YourPage : Page
{
    public string ImgPath
    {
        get { return Config.CDNImages; }
    }
} 
```

现在更改您的页面，使其继承自 `YourPage`而不是`Page`，您应该可以访问每个页面上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:40:42.203

您可以使用 MasterType 指令。

[http://dotnet.dzone.com/news/back-basics-%E2%80%93-using-mastertype](http://dotnet.dzone.com/news/back-basics-%E2%80%93-using-mastertype)

# java - 滚动到网页的另一部分

> ID：10377859
> 
> 赞同：1
> 
> 时间：2012-04-30T02:30:00.467
> 
> 标签：java, scroll, swingutilities, lobo-cobra

我正在渲染一个网页并尝试滚动到其中的某个位置。但是，滚动不起作用。

这是我的代码...

```
import org.lobobrowser.html.*;
import org.lobobrowser.html.gui.HtmlPanel;
import org.lobobrowser.html.parser.*;
import org.lobobrowser.html.test.*;
import org.w3c.dom.*;
import org.xml.sax.*;

public class finall {

    Node goTo;

    public void show(URL url,Node theFinalNode) throws MalformedURLException, IOException, SAXException {
        goTo = theFinalNode;
        String uri=url.toString(); 

        URLConnection connection = url.openConnection();
        InputStream in = connection.getInputStream();
        Reader reader = new InputStreamReader(in);
        InputSource is = new InputSourceImpl(reader, uri);
        UserAgentContext uAgent=new SimpleUserAgentContext();

        final HtmlPanel htmlPanel = new HtmlPanel();
        HtmlRendererContext rendererContext = (HtmlRendererContext) new LocalHtmlRendererContext(htmlPanel, uAgent);
        DocumentBuilderImpl builder = new DocumentBuilderImpl(uAgent, rendererContext);
        Document document = builder.parse(is);

        JFrame frame = new JFrame();
        frame.getContentPane().add(htmlPanel);
        htmlPanel.setDocument(document, rendererContext);
        frame.setSize(300, 450);
        frame.setVisible(true);

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
            htmlPanel.scrollTo(goTo);
        }
    });

} 
```

有人可以帮我理解为什么滚动不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:06:55.723

在我看来，好像您传递给 show 方法的节点不在 HtmlPanel 正在查看的文档中。在您的代码中，您使用以下方法构建文档：

```
Document document = builder.parse(is); 
```

这将创建一个新文档和许多与之关联的新节点。参数 theFinalNode 不会是该文档的一部分，因为它是在创建文档之前创建的。您需要通过调用文档对象上的方法或使用 XPath 之类的方法从新文档中提取所需的节点：

[http://www.roseindia.net/tutorials/xPath/java-xpath.shtml](http://www.roseindia.net/tutorials/xPath/java-xpath.shtml)

一旦您拥有一个实际上是所查看文档的一部分的节点，那么 scrollTo 方法应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:38:24.003

我认为它可能没有滚动，因为您`HtmlPanel`没有在`JScrollPane`. 尝试更改以下代码...

```
JFrame frame = new JFrame();
frame.add(new JScrollPane(htmlPanel)); // CHANGED LINE HERE
htmlPanel.setDocument(document, rendererContext);
// Set the size of the JFrame when the root
// component does not have a preferred size.
frame.setSize(300, 450);
frame.setVisible(true); 
```

现在，当您`htmlPanel.scrollTo(goTo);`稍后执行时，它应该能够滚动到该位置。

# django - 管理员上的 Django 国际化

> ID：10377862
> 
> 赞同：0
> 
> 时间：2012-04-30T02:30:27.737
> 
> 标签：django, internationalization, django-admin

我正在编写一个最终管理员可能不会说英语的应用程序，因此最好以非英语语言呈现管理界面。

我已经阅读了 i18n 文档，但没有提到如何更改“添加”按钮的文本和页面标题（在管理界面中）。我怎样才能做到这一点，或者我需要阅读哪些文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:29:11.293

当然，[官方文档](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/)是最好的文档。如果您想要特定语言的管理站点 - 只需`LANGUAGE_CODE`在设置中正确设置即可。

# c# - WP7将值从子数组传递到新页面

> ID：10377864
> 
> 赞同：1
> 
> 时间：2012-04-30T02:30:35.100
> 
> 标签：c#, windows-phone-7, loops

我将一些值从一页传递到下一页。其中一个值位于子数组中。因为`Artist`数组中可能有多个值，我想说如果计数大于一，则传递“各种艺术家”，否则传递单个艺术家值。这是我到目前为止所拥有的。

这是我的课

```
public class RootObject
{
   //public MetadataRelease metadata { get; set; }
    public Results results = new Results();

    public IEnumerator<Results> GetEnumerator()
    {
        return this.results.GetEnumerator();
    }
}
public class Results
{
    public Release release { get; set; }
    public List<Track> tracks { get; set; }
    //public List<UsersAlsoBought2> usersAlsoBought { get; set; }
    //public List<LatestFromLabel2> latestFromLabel { get; set; }

    internal IEnumerator<Results> GetEnumerator()
    {
        throw new NotImplementedException();
    }
}
public class Track
{
    public int id { get; set; }
    public bool selected { get; set; }
    public string type { get; set; }
    public string name { get; set; }
    public bool active { get; set; }
    public string mixName { get; set; }
    public string title { get; set; }
    public string slug { get; set; }
    public string isrc { get; set; }
    public string releaseDate { get; set; }
    public string publishDate { get; set; }
    public string sampleUrl { get; set; }
    public string rtmpStreamUrl { get; set; }
    public bool exclusive { get; set; }
    public Price2 price { get; set; }
    public AudioFormatFee2 audioFormatFee { get; set; }
    public string currentStatus { get; set; }
    public string length { get; set; }
    public int bpm { get; set; }
    public Key key { get; set; }
    public string saleType { get; set; }
    public List<Artist2> artists { get; set; } 
    public List<Genre2> genres { get; set; }
    public List<object> subGenres { get; set; }
    public List<object> charts { get; set; }
    public Release2 release { get; set; }
    public Label2 label { get; set; }
    public Images2 images { get; set; }
    public DynamicImages2 dynamicImages { get; set; }
}
public class Artist2
{
    public int id { get; set; }
    public string name { get; set; }
    public string slug { get; set; }
    public string type { get; set; }
} 
```

从选定项目中提取数据的代码。

```
 public void musicSampleSelectedHandler(object sender, RoutedEventArgs e)
    {
        Track selectedTrack = (sender as Image).DataContext as Track;
        ListBoxItem pressedItem = this.listReleaseMain.ItemContainerGenerator.ContainerFromItem(selectedTrack) as ListBoxItem;

        if (pressedItem != null)
        {
            string _rN = selectedTrack.release.name;
            string _rT = selectedTrack.title;
            string _rS = selectedTrack.sampleUrl;
            string _rI = selectedTrack.images.large.url;
            string _rA;

            if (selectedTrack.artists.Count > 1)
            {
                _rA = "Various Artists";
            }
            else
            {
                for (int i = 0; i <= selectedTrack.artists.Count - 1; i++)
                    _rA += "," + selectedTrack.artists[i].name;
            }

            this.NavigationService.Navigate(new Uri("/Pages/MediaPage.xaml?releaseUrl=" + _rS + "&releaseTrack=" + _rT + "&releaseImg=" + _rI + "&releaseName=" + _rN + "&releaseArtist=" + _rA, UriKind.Relative));
        }
    } 
```

**更新**

我现在`_ra`在 for 循环中得到“使用未分配的局部变量”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:39:31.023

这是因为您在“if/else”语句中声明了 _rA。您应该在 if/else 之外声明 _rA 以及其他声明。

几个问题...

不`string _rA = selectedTrack.artists.name`应该`string _rA = selectedTrack.artists[i].name`吗？

```
if (selectedTrack.artists.Count > 1) 
            { 
                string _rA = "Various Artists"; 
            } 
            else 
            { 
                for (int i = 0; i <= selectedTrack.artists.Count; i++) 
                { 
                    string _rA = selectedTrack.artists.name; //Unable to access name vaule here 
                } 
            } 
```

以上不应该是：

```
string _rA;

if (selectedTrack.artists.Count > 1) 

{ 

    for (int i = 0; i <= selectedTrack.artists.Count; i++)
        _rA += "," + selectedTrack.artists[i].name; 
}
else
{
_rA = "Various Artists"; 

} 
```

# prolog - PROLOG——条目的逻辑基础到条目列表

> ID：10377866
> 
> 赞同：0
> 
> 时间：2012-04-30T02:30:38.443
> 
> 标签：prolog

在`PROLOG`我有一个条目的逻辑库（存储在内存中），我必须将其转换为条目列表。

例子：

```
| ?- rule(A,B).

A = member(_h209,[_h209|_h212])
B = true;

A = member(_h209,[_h211|_h212])
B = member(_h209,_h212); 
```

至

```
[member(_h209,[_h209|_h212]),true,member(_h209,[_h211|_h212]),member(_h209,_h212);] 
```

任何人都可以让我知道我怎样才能得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T04:55:36.313

something close to your expected result (except the semicolon at end) could be:

```
rule_list(Rules) :-
     findall([A, B], rule(A, B), L),
     flatten(L, Rules). 
```

A note on _h209, occurring at first position of member: I'm not sure you know the meaning of such symbols. These are **variables**, and if you interested in mantaining the identities these express, my suggestion isn't correct. Use bagof in such case.

# javascript - 使用 JQuery 表单插件在文件上传中触发提交

> ID：10377872
> 
> 赞同：0
> 
> 时间：2012-04-30T02:31:23.403
> 
> 标签：javascript, jquery, forms, file-upload, submit

我正在使用 JQuery 表单插件进行文件上传。

现在，目前我正在使用常规提交按钮，但我更希望让 div 触发提交。

我试过这个...

```
$(document).on('click', '#settings_changeprofilepic_dialog1_submit', function(event){
        $(document).find('#UploadNewImage').submit();
}); 
```

（'#settings_changeprofilepic_dialog1_submit' 是我的新提交 div）

（'#UploadNewImage' 是我的表格）

但就是不会开火...

有人可以帮我弄这个吗？我试过用谷歌搜索这个问题，但 JQuery、Form、Submit、File Upload 等术语似乎太含糊，无法得到我正在寻找的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:45:03.253

根据您提供的内容，很难确定问题的原因。让我们尝试一些简单的调试来了解可能发生的情况。

我可能会先尝试将表单记录到控制台，以确保 jQuery 确实找到了表单。像这样：`console.log( $(document).find('#UploadNewImage') );`

如果您仍然遇到问题，我们可以看到代码会很棒。给我们一个链接到它的托管位置或使用像[jsbin](http://jsfiddle.net/)或[jsfiddle](http://jsbin.com)这样的网站。

# php - 解析错误：语法错误，第 20 行 C:\Program Files (x86)\EasyPHP-5.3.9\www\Inventory\addavaya.php 中的意外 T_VARIABLE

> ID：10377873
> 
> 赞同：0
> 
> 时间：2012-04-30T02:31:30.103
> 
> 标签：php

我是 PHP 新手，在第 20 行收到消息 Parse error: syntax error, unexpected T_VARIABLE in ..。如果有人能帮助我解决这个错误，我将不胜感激，因为它真的开始让我感到压力。一直在dreamweaver上，它说错误，它说 $Username=... 但我似乎无法修复它

```
<?php
    $host="localhost"; // Host name 
    $username="xxx"; // Mysql username 
    $password="xxx"; // Mysql password 
    $db_name="xxx"; // Database name 
    $tbl_name="avaya"; // Table name

    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
    mysql_select_db("inventory", $con)

    $addavaya="INSERT INTO avaya_pabx(critical_spare_id, serial_no, ,comcode, version, circuit_pack, classification, location, availability, date, client)
    VALUES ('$_POST[critical_spare_id]', '$_POST[serial_no]', '$_POST[comcode]', '$_POST[version]', '$_POST[circuit_pack]', 
    '$_POST[classification]', '$_POST[location]' , '$_POST[availability]', '$_POST[date]', '$_POST[client]')";

    mysql_query($addavaya,$con)

    if (!mysql_query($addavaya,$con))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";

    mysql_close($con);

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:35:04.890

您缺少分号：

```
mysql_select_db("inventory", $con);
                                  ^ 
```

您应该连接查询：

```
$addavaya="INSERT INTO avaya_pabx(critical_spare_id, serial_no, ,comcode, version, circuit_pack, classification, location, availability, date, client)
    VALUES ('". $_POST['critical_spare_id'] . "', '" . $_POST['serial_no']. "', etc... 
```

也请停止使用旧`mysql_*`功能。使用其中一个`mysqli_*`或 PDO。mysql_* 函数将在未来被弃用。

[请](http://en.wikipedia.org/wiki/SQL_injection)**在查询数据库[**之前**](http://en.wikipedia.org/wiki/SQL_injection)清理输入！**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:35:57.960

`;`在末尾添加一个`mysql_select_db("inventory", $con)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T02:35:34.970

`$_POST`是一个关联数组，因此您需要使用单引号来访问它，例如：

```
$_POST['critical_spare_id'] instead of $_POST[critical_spare_id] 
```

这意味着您必须在查询中使用连接运算符。

```
$addavaya="INSERT INTO avaya_pabx(critical_spare_id, serial_no, ,comcode, version, circuit_pack, classification, location, availability, date, client)
    VALUES ('" . $_POST['critical_spare_id'] . "', ... 
```

或者（为了您自己的利益），您可以使用带有[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)的参数化查询。**

# objective-c - 为什么我们在 iOS 中测试时要指定“弱”？

> ID：10377874
> 
> 赞同：4
> 
> 时间：2012-04-30T02:31:36.303
> 
> 标签：objective-c, ios

我注意到在 XCode 中使用 Sencha 测试来测试视图控制器的推荐方法是通过实例化它

```
@property (nonatomic, readwrite, weak) MyMainViewController* mainViewController; 
```

为什么不只是

```
@property (nonatomic, strong) MyMainViewController* mainViewController; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:43:07.890

readwrite 不是绝对必要的，因为它是默认设置。至于强与弱，使用弱的主要原因是为了避免引用循环（即两个对象相互具有强引用，因此它们永远不会被释放）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T03:41:00.717

正如@borrrden 提到的，弱引用在尝试避免保留循环时很有用。

如果您正在研究弱引用，我强烈建议您阅读Mike Ash 的[这篇文章](http://mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html)。理解归零弱引用和非归零弱引用之间的区别很重要。

# xcode4 - 在 Prefix.pch 中包含一个 constants.h 文件会中断代码完成、语法高亮

> ID：10377876
> 
> 赞同：3
> 
> 时间：2012-04-30T02:32:06.553
> 
> 标签：xcode4, constants, syntax-highlighting, code-completion, pch

我的应用程序有许多常量（kvo 键、枚举等），几乎每个类都使用它们。我有一个包含所有这些的 constants.h 文件。我想将此文件包含在 Prefix.pch 文件中，如下所示：

```
#ifdef __OBJC__
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import "AppConstants.h"
#endif 
```

但是，当我以这种方式包含文件时，Xcode 4 的语法高亮和代码完成功能将停止工作。如果我在每个使用它们的类的头文件中手动包含常量文件，并从 pch 文件中删除包含，则会返回语法突出显示和代码完成。

这是预期的行为吗？如何在不使用 pch 文件的情况下在每个文件中包含常量文件？是否因为 pch 文件而将“AppConstants.h”文件本身包含在内的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T07:37:45.687

看看这个[问题](https://stackoverflow.com/questions/2138047/xcode-code-loses-syntax-coloring)。我和你有完全相同的问题。如果第一个答案没有为您解决问题，请在他们提到的页面下方将 Precompile Prefix Header 选项设置为 NO，这就是为我解决的问题。

希望有帮助。

# html - 部分网页被截断？

> ID：10377879
> 
> 赞同：0
> 
> 时间：2012-04-30T02:32:19.730
> 
> 标签：html

我有一个具有这些属性的全局容器 div

```
#global
{
    width:1020px;
    height:100%;
    position:relative;
    margin:auto;
} 
```

在该 div 内部，我有多个其他 div，其中一个具有以下样式：

```
#example
{
    width:550px;
    height:362px;
    position:absolute;
    top:150px;
    left:10px;
    overflow:hidden;
    background-color:rgba(89,89,89,0.01);
} 
```

这在普通屏幕上效果很好，但在低分辨率屏幕（或小窗口）上，我的“示例”div 的左侧被切断了......

这是可以修复的吗？

问题站点：[http ://spectech.webatu.com](http://spectech.webatu.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:42:00.347

您在将宽度设置为像素时使用的是固定大小，您可以将其调整为标准的固定大小，例如 800px 或使用可缩放的 em 单位。你在这里有一个很好的教程：http: [//kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:42:26.103

我想知道你为什么不使用 margin: auto 方法，就像你对“headerBack” div 所做的那样。我的一般规则是绝对定位应该保留用于任何类型的静态定位都不起作用的情况。在这种情况下，您已经使用过的 set-width margin: auto 方法当然就足够了，它可以纠正您的内容在小屏幕上超出页面的错误。

编辑：我注意到您在此处为“全局”提供的 CSS 与您网站上的实际 CSS 不同。您应该使用您在此处发布的 CSS 设置，它可能会正常工作。

# jquery - 动画中的jQuery连字符

> ID：10377880
> 
> 赞同：0
> 
> 时间：2012-04-30T02:32:34.740
> 
> 标签：jquery

```
$this.animate(  {
                width: +=50,
                height: +=50,
                padding-right:50px
                } 
```

连同 webkit/moz 边框属性，我无法使用任何带连字符的 css 属性。将它放在引号中*（“padding-right”）*并完全删除连字符*（“paddingRight”）*并没有解决它，除了后者不能使用 webkit/moz 属性。

我在 Chrome 的检查工具中遇到的错误是：

```
Uncaught SyntaxError: Unexpected token - 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T02:39:49.133

**[现场演示](http://jsfiddle.net/XGp26/)**

当你有一个连字符时，你需要将它用引号引起来，否则它不会正确解析给你一个语法错误。请注意，这不仅限于 jQuery 属性，通常是对象属性。

```
$this.animate(  {
                width: '+=50',
                height: '+=50',
                'padding-right':50
                } ); 
```

j08692 在评论中也是正确的，`paddingRight`也会起作用。[http://docs.jquery.com/index.php?title=Effects/animate&redirect=no](http://docs.jquery.com/index.php?title=Effects/animate&redirect=no)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:48:54.187

JavaScript 变量名中不允许使用连字符。为了解决这个问题，jQuery 对 CSS 属性名称使用驼峰式大小写。

例如，`padding-right`您可以使用`paddingRight`.

现在已经解决了，您还有另一个问题。`width: +=50`并且`height: +=50`是不正确的。您试图增加 50，但没有变量可以增加。我可以看到您正在尝试做什么，以下可能是您需要的。

```
$this.animate({
  width: $this.width() + 50,
  height: $this.height() + 50,
  paddingRight: 50
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:21:29.453

```
$(this).animate({
  width: // set the width to what you want it to end//
  height: //set the height to what you want in the end
  paddingRight: "50px", // use quotes and commas
}); 
```

# android - 我需要将一堆数据存储在表数据库中并从我的 android 应用程序中提取

> ID：10377883
> 
> 赞同：0
> 
> 时间：2012-04-30T02:33:16.203
> 
> 标签：android, database, sqlite, metadata

好的，我是整个 android 平台的新手，我正在尝试将我需要的所有信息基本上放入数据库表中，然后将信息拉入我的活动中，基本上就像....每一行代表一个项目（让我们说是 100 个）然后有一列用于描述、食物、位置、名称，如果可能的话，还有图像。目前我只是手动将所有信息添加到单独的 xml 布局中，这似乎比我可以从数据库中提取信息要耗时和困难得多，对吧？

我目前在做什么：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:orientation="vertical" >

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="center"
    android:text="@string/bluefish"
    android:textColor="@color/black"
    android:textSize="30dp"
    android:textStyle="bold" />

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/bluefish"
    android:src="@drawable/bluefish" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="@string/desc"
    android:textColor="@color/black"
    android:textSize="14dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="text here"
    android:textColor="@color/black"
    android:textSize="12dp" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="@string/food"
    android:textColor="@color/black"
    android:textSize="14dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="text here"
    android:textColor="@color/black"
    android:textSize="12dp" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="@string/loc"
    android:textColor="@color/black"
    android:textSize="14dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="left"
    android:text="text here"
    android:textColor="@color/black"
    android:textSize="12dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:23:27.943

使用以下代码创建 Db 这将创建新的 DB SaveImage

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.Toast;

public class DbHelper extends SQLiteOpenHelper {

    public static final int DB_VERSION = 1;
    public static final String DB_NAME = "SaveImage";

public DbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    String tblSaveImage =  "CREATE  TABLE tblSaveImage (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , Image BLOB);";

    db.execSQL(tblSaveImage);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}
} 
```

将图像保存到数据库中：

如果您不想使用 SQL 查询，您还可以使用内容值将数据插入数据库。

```
import java.io.ByteArrayOutputStream;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class SaveImage extends Activity {

SQLiteDatabase Db;

TextView txt;
Button btnImage,btnSaveimage;
ImageView imageView;

byte[] byteArray;

private static final int PICK_FROM_FILE = 2;
private Uri mImageCaptureUri;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Initialize();

    //btnSaveImage Handler Save Byte Array to DB and Navigate to ShowImage Activity

    btnSaveimage.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                ContentValues cv = new ContentValues();
                cv.put("Image", byteArray);
                Db.insert("tblSaveImage", null, cv);

                startActivity(new Intent(getApplicationContext(),ShowImage.class));
            } catch (Exception e) {
                // TODO: handle exception
                txt.setText(e.toString());
            }
        }
    });

    //btnImage Handler Access to Gallery of Device and Display all Images save in Device.

    btnImage.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent();

               intent.setType("image/*");
               intent.setAction(Intent.ACTION_GET_CONTENT);

               startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
        }
    });

}

// To Initialize all the Components.

private void Initialize() {
    // TODO Auto-generated method stub
    txt = (TextView)findViewById(R.id.txt);
    btnImage = (Button)findViewById(R.id.btnImage);
    imageView = (ImageView)findViewById(R.id.imageView);
    btnSaveimage = (Button)findViewById(R.id.btnSaveImage);

    DbHelper h = new DbHelper(this);
    try {
        Db = h.getWritableDatabase();   
    } catch (SQLException e) {
        // TODO: handle exception
        Db = h.getReadableDatabase();
    }

}

// OnActivityResult PICK_IMAGE_FROM_FILE
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    mImageCaptureUri = data.getData();
    imageView.setImageURI(mImageCaptureUri);
    imageView.buildDrawingCache();
    Bitmap bmp = imageView.getDrawingCache();

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byteArray = stream.toByteArray();
    super.onActivityResult(requestCode, resultCode, data);
}
} 
```

显示保存在 DB 中的图像：

```
import android.app.Activity;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class ShowImage extends Activity {

ImageView showImage;

SQLiteDatabase Db;
Cursor result;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);

    showImage = (ImageView)findViewById(R.id.showImage);

   DbHelper h = new DbHelper(this);

   try {
    Db = h.getWritableDatabase();
} catch (SQLException e) {
    // TODO: handle exception
    Db = h.getReadableDatabase();
}

result = Db.rawQuery("Select Image from tblSaveImage", null);

if (result.moveToLast()) {

    byte[] byteArray = result.getBlob(0);
    Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

    showImage.setImageBitmap(bmp);
}

}

} 
```

# android - android从一个活动导航到另一个活动

> ID：10377885
> 
> 赞同：0
> 
> 时间：2012-04-30T02:33:48.537
> 
> 标签：android, android-activity

伙计们。

我正在尝试在 Android 中创建一个基本的 UI，仅用于原型设计。我有一个活动，它基本上提供了一个带有 TextFiels 的登录屏幕，用于输入用户名和密码。一旦验证了这些，我想展示另一个活动，该活动为经过身份验证的用户提供执行某些任务。你能给我一个关于如何做到这一点的线索吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:37:35.880

这将启动另一个活动，并传递一个变量 Text

```
Intent myIntent = new Intent(getBaseContext(), mynewActivity.class);
myIntent.putExtra("Text", txtString);
startActivityForResult(myIntent,101); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:46:15.737

将 onClick 添加到按钮，并在 onCreate 中获取用户名和密码字段

```
public void Login(View v)
{
    if(checkLogin(username, password))
    {
        Intent i = new Intent(this, SecondActivity.class);
        Bundle b = new Bundle();
        b.putString("USERNAME", username);
        i.putExtras(b);
        this.startActivity(i);
    }
    else
    {
        Toast.makeText(this, "Username or password incorrect", Toast.LENGH_SHORT).show();
    }
} 
```

# c# - 如何在保持可读性的同时使用多个构造函数来删除重复的代码？

> ID：10377888
> 
> 赞同：48
> 
> 时间：2012-04-30T02:34:31.280
> 
> 标签：c#, parameters, constructor, this, code-duplication

```
int a, b, c;

Constructor()
{
    a = 5;
    b = 10;
    c = 15;
    //do stuff
}
Constructor(int x, int y)
{
    a = x;
    b = y;
    c = 15;
    //do stuff
}
Constructor(int x, int y, int z)
{
    a = x;
    b = y;
    c = z;
    //do stuff
} 
```

为了防止“东西”和一些任务的重复，我尝试了类似的东西：

```
int a, b, c;

Constructor(): this(5, 10, 15)
{
}
Constructor(int x, int y): this(x, y, 15)
{
}
Constructor(int x, int y, int z)
{
    a = x;
    b = y;
    c = z;
    //do stuff
} 
```

这适用于我想做的事情，但有时我需要使用一些冗长的代码来创建新对象或进行一些计算：

```
int a, b, c;

Constructor(): this(new Something(new AnotherThing(param1, param2, param3),
    10, 15).CollectionOfStuff.Count, new SomethingElse("some string", "another
    string").GetValue(), (int)Math.Floor(533 / 39.384))
{
}
Constructor(int x, int y): this(x, y, (int)Math.Floor(533 / 39.384))
{
}
Constructor(int x, int y, int z)
{
    a = x;
    b = y;
    c = z;
    //do stuff
} 
```

这段代码和以前几乎一样，只是传递的参数不是很可读。我宁愿做这样的事情：

```
int a, b, c;

Constructor(): this(x, y, z) //compile error, variables do not exist in context
{
    AnotherThing at = new AnotherThing(param1, param2, param3);
    Something st = new Something(aThing, 10, 15)
    SomethingElse ste = new SomethingElse("some string", "another string");

    int x = thing.CollectionOfStuff.Count;
    int y = ste.GetValue();
    int z = (int)Math.Floor(533 / 39.384);

    //In Java, I think you can call this(x, y, z) at this point.
    this(x, y, z); //compile error, method name expected
}
Constructor(int x, int y): this(x, y, z) //compile error
{
    int z = (int)Math.Floor(533 / 39.384);
}
Constructor(int x, int y, int z)
{
    a = x;
    b = y;
    c = z;
    //do stuff
} 
```

基本上我在构造函数体内构建参数。然后我试图将这些内置参数传递给另一个构造函数。我想我记得在使用 Java 编码时，能够在另一个构造函数的主体内使用“this”和“super”关键字来调用构造函数。在 C# 中似乎不可能。

有没有办法轻松做到这一点？我做错了什么吗？如果这是不可能的，我应该坚持使用不可读的代码吗？

我想我总是可以将重复的代码完全剪切到构造函数之外的另一种方法中。然后每个构造函数只做自己的事情并调用其他构造函数共享的代码。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-30T03:04:25.527

作为从所有构造函数（这会阻止您使用字段）或工厂方法（当您拥有派生类时会引入额外的复杂性）调用初始化方法的替代方法`readonly`，您可以使用[参数对象](http://c2.com/cgi/wiki?ParameterObject)：

```
int a, b, c;

public Constructor()
    : this(new ConstructorParameters())
{
}

public Constructor(int x, int y)
    : this(new ConstructorParameters(x, y))
{
}

public Constructor(int x, int y, int z)
{
    a = x;
    b = y;
    c = z;
    //do stuff 
} 

private Constructor(ConstructorParameters parameters)
    : this(parameters.X, parameters.Y, parameters.Z)
{
}

private class ConstructorParameters
{
    public int X;
    public int Y;
    public int Z;

    public ConstructorParameters()
    {
        AnotherThing at = new AnotherThing(param1, param2, param3); 
        Something st = new Something(at, 10, 15) 
        SomethingElse ste = new SomethingElse("some string", "another string"); 

        X = st.CollectionOfStuff.Count; 
        Y = ste.GetValue(); 
        Z = (int)Math.Floor(533 / 39.384); 
    }

    public ConstructorParameters(int x, int y)
    {
        X = x;
        Y = y;
        Z = (int)Math.Floor(533 / 39.384);
    }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-30T02:38:20.177

你可以做

```
Constructor() : this(5, 10, 15)
{
}
Constructor(int x, int y) : this(x, y, 15)
{
}
Constructor(int x, int y, int z)
{
  int a = x;
  int b = y;
  int c = z;
  //do stuff
} 
```

但是，如果您需要根据参数执行一些奇特的逻辑，我会使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)：

```
public class myclass
{
  private myclass(int x, int y, int z)
  {
    int a = x;
    int b = y;
    int c = z;
    //do stuff
  }
  public static myclass Create()
  {
    AnotherThing at = new AnotherThing(param1, param2, param3);
    Something st = new Something(aThing, 10, 15)
    SomethingElse ste = new SomethingElse("some string", "another string");

    int x = thing.CollectionOfStuff.Count;
    int y = ste.GetValue();
    int z = (int)Math.Floor(533 / 39.384);

    return new myclass(x, y ,z);
  }
  public static myclass Create(int x, int y)
  {
    if (x = 1)
      return new myclass(x, y, 2)
    else 
      return new myclass(x, y, 15);
  }
  public static myclass Create(int x, int y, int z)
  {
    //so on and so forth
    return new myclass(x, y, z);
  }
} 
```

虽然您*不需要*工厂模式，但它绝对让您的构造函数逻辑可读。

# c# - Google AuthenticatorFactory 替换？

> ID：10377889
> 
> 赞同：2
> 
> 时间：2012-04-30T02:34:35.290
> 
> 标签：c#, oauth-2.0, google-calendar-api

Google Calendar API 的“第一个应用程序”教程在向 Google 验证应用程序时使用 AuthenticatorFactory。根据[此链接](http://code.google.com/p/google-api-dotnet-client/source/detail?r=1569975f1615a5a2a01eaf9153ad21997c0c05b1&path=/Src/GoogleApis.Tools.CodeGen/Decorator/ServiceDecorator/StandardConstructServiceDecorator.cs)，AuthenticatorFactory 已于 2011 年 8 月 8 日从 API 中删除。谁能指出我的方向，以找到通过 Google 对我的应用程序进行身份验证的“新”方法？

编辑：刚刚意识到我没有包含我正在使用的语言 - 我正在寻找有关如何验证/授权已安装的 C# 应用程序的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:49:57.593

很抱歉打开一个老话题，但我遇到了同样的问题，我花了很长时间才找到解决方案。所以对于所有有同样问题的人：

AuthenticatorFactory 不起作用，您需要使用以下代码创建服务：

```
var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthentication);

// Create the service.
var service = new CalendarService(new BaseClientService.Initializer
{
     Authenticator = auth
}); 
```

祝你好运！

# html - 从视图中检查某个元素是否存在

> ID：10377892
> 
> 赞同：0
> 
> 时间：2012-04-30T02:35:08.690
> 
> 标签：html, ruby-on-rails, jquery-selectors, haml

我正在使用简单的表单和 HAML 来制作视图，我想这样做：

```
- if ".nested-fields" in page
     # do something
- else
     # do anything 
```

如果页面中有该类的元素`.nested-fields`，请执行操作。如何从视图中验证元素的存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T02:40:13.947

在 jQuery 中，您可以执行以下操作：

```
if ($(".nested-fields").length > 0){
  // do something here
} 
```

# hibernate - 带有 where 子句的 ManyToOne

> ID：10377899
> 
> 赞同：8
> 
> 时间：2012-04-30T02:36:56.197
> 
> 标签：hibernate, jpa

我有一些逻辑删除的记录（即`active=false`）导致我的`@ManyToOne`映射出现问题，因为连接列返回了多个结果。

我只需要包含`active=true`我认为可以通过以下方式实现的记录：

```
@ManyToOne
@NotFound(action = NotFoundAction.IGNORE)
@JoinColumn(name = "site_id", referencedColumnName = "site_id", insertable = false, updatable = false)
@WhereJoinTable(clause = "active=true")
private Site site; 
```

但是，hibernate 似乎`WhereJoinTable`没有使用 （也许它只对`OneToMany`? 有效），因为`active=true`没有出现在生成的 SQL（日志）中并且问题仍然存在。

是否可以包含用于连接 a 的 where 子句`ManyToOne`以及如何连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T02:46:00.777

@ManyToOne 不支持 @WhereJoinTable。自五年以来，关于主题开放的错误[HHH-4335 。](https://hibernate.atlassian.net/browse/HHH-4335)我不知道任何解决方法，除了使用错误报告中提到的视图（在只读访问的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-20T01:14:50.040

[@JoinColumnOrFormula](http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#mapping-JoinColumnOrFormula)注释是一种合适的解决方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T13:35:54.397

对我有用的解决方案是在类的顶部添加 @where 注释，请参见下一个示例：

```
@Where(clause = "state_.idCity=0")
@SuppressWarnings("serial")
@Entity
@Table(name="city", schema="catalog")
@SequenceGenerator(name = "default_gen", sequenceName = "IDSERIEINVALIDO", allocationSize = 1)
public class Citye implements Serializable{

    @Id 
    private Long id;
} 
```

# php - PHP 中类似 Disqus 的评论线程逻辑

> ID：10377909
> 
> 赞同：1
> 
> 时间：2012-04-30T02:38:25.910
> 
> 标签：php, mysql, if-statement, foreach

我正在尝试像 Disqus 一样创建一个评论线程。我无法在 PHP 中设置逻辑以显示评论，以便可以回复每条评论，然后这些评论将保持相互关联。

这是我的 MySQL 评论表：

```
comment_id  comment  item_id  replied_to_id  time
 1           hello1    1          1         1:00pm
 2           hello2    1          1         2:00pm
 3           hello3    1          3         3:00pm
 4           hello4    2          4         4:00pm
 5           hello5    1          2         2:00pm
 6           hello6    1          3         6:00pm 
```

`item_id`是一列，指示评论正在讨论的父项。

如果我从我的数据库中提取所有带有 的评论`item_id=1`，那么我不确定如何将它们串起来以使`comment_id`and`replied_to_id`得到适当的匹配。例如，`comment_id=2`应该匹配到`comment_id=1`.

这是我的PHP：

```
<?foreach($comments as $row){
  if($row->comment_id==$row->replied_to_id){
    echo $row->comment."-".$row->time; //desired output: hello1-1:00pm    
      foreach($comments as $sub_row){
        if($row->comment_id!=$sub_row->replied_to_id){
           echo $sub_row->comment."-".$sub_row->time;// desired output: hello2-2:00pm
             foreach($comments as $sub_sub_row){
                if($row->comment_id!=$sub_sub_row->replied_to_id){
                  echo $sub_sub_row->comment."-".$sub_sub_row->time;// desired output: hello5-5:00pm  
                }
             } 
        }
     }          
  }
  else{
    echo $row->comment."-".$row->time;   // desired output: hello3-3:00pm
  }
} 
```

这看起来不对。必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:04:36.150

简单的演示，不一定是最佳的，但可以工作：

```
function displayComments(array $comments, $parentId = null) {
    foreach ($comments as $comment) {
        if ($comment['replied_to_id'] == $parentId) {
            echo $comment['comment'];
            displayComments($comments, $comment['id']);
        }
    }
} 
```

这假设顶级注释没有`replied_to_id`( `null`)。您的评论`1`回复示例`1`没有多大意义。

# ubuntu - 使用 GUI 界面连接到我的 Ubuntu AWS 实例

> ID：10377911
> 
> 赞同：1
> 
> 时间：2012-04-30T02:38:41.313
> 
> 标签：ubuntu, amazon-web-services, winscp

我需要将文件从本地桌面系统（运行 ubuntu 11）传输到运行 Ubuntu 11 的 aws 实例。命令行对我来说很好，但是，我需要一个 GUI 解决方案。

我已经看过这个问题和回复，

[是否有任何适用于 Linux 的 WinSCP？](https://stackoverflow.com/questions/299412/is-there-any-winscp-equivalent-for-linux)

但是，访问 aws 实例的不同之处在于我不通过密码路由，而是通过身份文件 (abcd.pem)

尝试在 ubuntu 中使用文件 -> 连接到服务器方法，但它没有应用身份文件的选项。还有其他想法吗？蜱虫？工具 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T03:31:25.927

有点乱，但请尝试在您的 .ssh/config 文件中创建一个自定义部分，以指定要使用的身份文件。这将如下所示：

```
Host {alias}
HostName {hostname or IP address}
User {username to log in with}
IdentityFile {path to abcd.pem} 
```

然后尝试使用您在配置文件中指定的别名连接到服务器。看看有没有效果？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:45:47.027

您可以使用 sshfs 在本地挂载远程目录，然后只使用您的本机文件管理器。

这样的事情会做到这一点：

```
sudo apt-get install sshfs
mkdir /mnt/your_server_name
sshfs -o ssh_command="ssh -i $HOME/.ssh/your_identity.pem" ubuntu@your_server_name:/path/on/the/server /mnt/your_server_name 
```

然后打开您的本机文件管理器并复制/移动/删除/等，就像您将其复制到本地工作站上的任何其他位置一样。唯一的区别是 /mnt/your_server_name 中的操作将在远程服务器上运行。

# c++ - 复制到向量给出段错误

> ID：10377917
> 
> 赞同：4
> 
> 时间：2012-04-30T02:40:05.017
> 
> 标签：c++

我正在尝试将矢量数据从以下复制`sample`到`Y`

```
std::map<std::string, std::vector<double > >sample;
std::map<std::string, std::vector<double > >::iterator it1=sample.begin(), end1=sample.end();
std::vector<double> Y; 
```

并使用以下代码：

```
 while (it1 != end1) {
  std::copy(it1->second.begin(), it1->second.end(), std::ostream_iterator<double>(std::cout, " "));
++it1;
} 
```

它可以打印输出，但是当我用下面的内容替换上面的 std::copy 块时，我得到了一个段错误。

```
 while (it1 != end1) {
std::copy(it1->second.begin(), it1->second.end(), Y.end());
++it1;
} 
```

我只想将it1->second 的内容复制到Y。为什么它不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T02:45:28.030

显然，您想将对象插入向量中。但是，`std::copy()`只需要传递的迭代器并写入它们。`begin()`和迭代器获得的`end()`迭代器不做任何插入。你想使用的是这样的：

```
std::copy(it1->second.begin(), it1->second.end(), std::back_inserter(Y)); 
```

`std::back_inserter()`函数模板是迭代器的工厂函数，它使用其`push_back()`参数来附加对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T03:17:25.820

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
    // your code goes here
    vector<int> vec;
    vector<int> test;
    vec.push_back(1);
    //test.push_back(0);
    copy(vec.begin(),vec.begin()+1,test.begin());
    cout << *(test.begin());
    return 0;
} 
```

**输出：运行时错误时间：0 内存：3424 信号：11**

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
    // your code goes here
    vector<int> vec;
    vector<int> test;
    vec.push_back(1);
    test.push_back(0);
    copy(vec.begin(),vec.begin()+1,test.begin());
    cout << *(test.begin());
    return 0;
} 
```

**输出：** **成功时间：0 内存：3428 信号：0* *

**1**

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
    // your code goes here
    vector<int> vec;
    vector<int> test(5);
    vec.push_back(1);
    //test.push_back(0);
    copy(vec.begin(),vec.begin()+1,test.begin());
    cout << *(test.begin());
    return 0;
} 
```

**成功时间：0 内存：3428 信号：0**

**1**

所以原因是你没有初始化向量，vector.begin() 指向某个受限的地方！当您使用 back_inserter(vector) 时，它会返回一个 back_insert_interator，它在内部使用 vector.push_back 而不是 *(deference) 操作。所以 back_inserter 有效！

# java - 使用 ScaleDrawable() 时的语法错误

> ID：10377919
> 
> 赞同：0
> 
> 时间：2012-04-30T02:40:17.210
> 
> 标签：java, android, android-layout, android-widget, custom-controls

使用 ScaleDrawable() 时出现语法错误。我一定做错了什么。有任何想法吗？

2个错误我无法完全修复。

这就是我目前所拥有的：

```
protected class testbuttonBackgroundDrawable extends LayerDrawable {
/** my aim - the image used as background for the custom view is increased in
 *size by 25percent and then a yellow color filter is attached to it.
 *This yellow image then has the original background image layered on top of it
 *to create the effect of the image having a glow around it
 *I want to use this later on for when the custom button has focus
 */     
    ColorFilter colourFilter = new LightingColorFilter(Color.YELLOW, 1);

    ScaleDrawable resizedImage = new ScaleDrawable(background, 0, 1.25f, 1.25f);* 
```

*此处的错误是 - 标记“;”上的语法错误，{ 预期在此标记之后

```
 nD = resizedImage.getDrawable();
    nD.setColorFilter(colourFilter);

    Drawable[] aD = new Drawable[2];
    aD[0] = nD;
    aD[1] = background;
    LayerDrawable _highlightedDrawable = new LayerDrawable(aD);

//This will make the background image fade if the button is set to disabled
    protected int _disabledAlpha = 100;
/**This is another scale drawable, this time used to shrink the background image of
 *the custom button when it is pressed
 */
    protected ScaleDrawable _pressedDrawable = new ScaleDrawable(background, 0, 0.75f, 0.75f);* 
```

*这里的错误是-“语法错误，插入“}”以完成块”

```
 public testbuttonBackgroundDrawable(Drawable d) {
          super(new Drawable[] { d });
    }

    @Override
    protected boolean onStateChange(int[] states) {
      boolean enabled = false;
      boolean highlighted = false;
      boolean pressed = false;

      for (int state : states) {
        if (state == android.R.attr.state_enabled)
            enabled = true;
        else if (state == android.R.attr.state_selected)
            highlighted = true;
        else if (state == android.R.attr.state_pressed)
            pressed = true;
      }

      mutate();
      if (enabled && highlighted) {
        setBackgroundDrawable(_highlightedDrawable); // buttons need transparent backgrounds
      } else if (!enabled) {
        setColorFilter(null);
        setAlpha(_disabledAlpha);
      } else if (enabled && pressed){
        setBackgroundDrawable(_pressedDrawable);
      } else {
        setColorFilter(null);
      }

      invalidateSelf();

      return super.onStateChange(states);
    }

}

} 
```

任何有关修复错误的帮助将不胜感激。

我想我没有正确使用 ScaleDrawable 构造函数。

我该如何正确地做到这一点？

如果这不是问题，那么任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:42:21.520

修复！

问题是我正在为图层可绘制类的错误部分中的按钮状态进行计算。这是固定的：

```
protected class CustomImageButtonBackgroundDrawable extends LayerDrawable { 

    protected Drawable lowerlayer;
    protected Drawable _highlightedDrawable;

    protected int _disabledAlpha = 100;
    protected Drawable _pressedDrawable;

    public CustomImageButtonBackgroundDrawable(Drawable d) {
          super(new Drawable[] { d });
    }

    @Override
    protected boolean onStateChange(int[] states) {
      boolean enabled = false;
      boolean highlighted = false;
      boolean pressed = false;

      for (int state : states) {
        if (state == android.R.attr.state_enabled)
            enabled = true;
        else if (state == android.R.attr.state_selected)
            highlighted = true;
        else if (state == android.R.attr.state_pressed)
            pressed = true;
      }

      mutate();
      if (enabled && highlighted) {
        ColorFilter colourFilter = new LightingColorFilter(Color.YELLOW, 1);
        ScaleDrawable resizedImage = new ScaleDrawable(background, 0, 1.25f, 1.25f);

        lowerlayer = resizedImage.getDrawable();
        lowerlayer.setColorFilter(colourFilter);

        Drawable[] aD = new Drawable[2];
        aD[0] = lowerlayer;
        aD[1] = background;
        LayerDrawable _highlightedDrawable = new LayerDrawable(aD);

        setBackgroundDrawable(_highlightedDrawable); // buttons need transparent backgrounds

      } else if (!enabled) {
        setColorFilter(null);
        setAlpha(_disabledAlpha);

      } else if (enabled && pressed){
        ScaleDrawable smaller = new ScaleDrawable(background, 0, 0.75f, 0.75f);

        setBackgroundDrawable(smaller.getDrawable());

      } else {
        setColorFilter(null);
      }

      invalidateSelf();

      return super.onStateChange(states);
    }

} 
```

# jquery - 单击时增加/减小图像大小保留纵横比

> ID：10377921
> 
> 赞同：3
> 
> 时间：2012-04-30T02:40:33.477
> 
> 标签：jquery

我希望能够增加（放大）和减少（缩小）图像并保持纵横比。

我创建了一个简单的示例，但不知道如何保持纵横比。

减少时是否也可以设置最小尺寸？

谢谢

**HTML**

```
<div id="image-container">
     <img src="Image.jpg" alt=""/>
</div>
<div id="image-controls">
     <input id="zoom-in" value="+" type="submit" />
     <input id="zoom-out" value="-" type="submit" />
</div> 
```

**jQuery**

```
$(document).ready(function() {

var img = $('#image-container img');
var zoomWidthIncrement = img.width() * 1/3;
var zoomHeightIncrement = img.height() * 1/3;

$("#zoom-in").click(function (e){
    img.css({width: img.width() + zoomWidthIncrement, height: img.height() + zoomHeightIncrement});
e.preventDefault();
});

$("#zoom-out").click(function (e){
    img.css({width: img.width(function(i, w) { return w - zoomWidthIncrement; }), height: img.height(function(i, w) { return w - zoomWidthIncrement; })
});
e.preventDefault();
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:45:02.540

只需更改宽度或高度，而不是两者。浏览器会自动按比例缩放图像。

**[jsFiddle 示例](http://jsfiddle.net/j08691/KcGF3/)**。

# gcc - 使用 MinGW64 gcc 构建 GLFW -- 入口符号警告和链接器错误

> ID：10377930
> 
> 赞同：3
> 
> 时间：2012-04-30T02:43:06.143
> 
> 标签：gcc, 64-bit, mingw, msys, glfw

这是一个相当新鲜的香草 Win7 64 位安装和最新的 MinGW64，在一个干净的（新提取的）GLFW 2.7.5 源目录中调用他们的**make win32-msys**命令。

**[A] 构建库**

#1 -- gcc -c -I 处的警告。-I.. -Wall -mwin32 -O2 -o win32_init.o win32_init.c:

```
win32_init.c: In function '_glfwPlatformTerminate':
win32_init.c:353:27: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

#2 -- gcc -c -I 处的警告。-I.. -Wall -mwin32 -O2 -mdll -DGLFW_BUILD_DLL -D_GLFW_NO_DLOAD_GDI32 -D_GLFW_NO_DLOAD_WINMM -o win32_init_dll.o win32_init.c：

```
win32_init.c: In function '_glfwPlatformTerminate':
win32_init.c:353:27: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

但相关的输出文件*确实*在 .\lib\win32 中创建：glfw.dll、libglfwdll.a 和 libglfw.a。但是我担心这些可能已损坏，因为我以后不可能通过 gcc 链接到它们——与本文中最后一个问题相同的问题进一步描述。

**[B] 构建示例**

#3 -- 在 triangle.exe、pong3d.exe、splitview.exe、mipmaps.exe、gears.exe、boing.exe、wave.exe、heightmap.exe 处发出警告：

```
c:/mingw64/x86_64-w64-mingw32/bin/ld.exe: warning: cannot find entry symbol _mainCRTStartup; defaulting to 0000000000401000 
```

但是对于构建良好的 listmodes.exe、mthello.exe、mtbench.exe 和particles.exe 而言并非如此。事实上，这 4 个是唯一在此之后正常运行的，其他的只是立即退出而没有输出或错误（自然，因为它们没有有效的入口点）。

**[C] 构建测试**

1.  在 accuracy.exe、dynamic.exe 处发出警告：

    ```
    c:/mingw64/x86_64-w64-mingw32/bin/ld.exe: warning: cannot find entry symbol _mainCRTStartup; defaulting to 0000000000401000 
    ```

defaults.exe 没有这样的问题。对于 dynamic.exe，它会继续出现以下错误：

```
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x1c): undefined reference to `__imp_glfwGetVersion'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x62): undefined reference to `__imp_glfwInit'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0xcf): undefined reference to `__imp_glfwOpenWindow'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x10b): undefined reference to `__imp_glfwSetWindowTitle'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x118): undefined reference to `__imp_glfwSetWindowSizeCallback'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x123): undefined reference to `__imp_glfwSwapInterval'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x14a): undefined reference to `__imp_glfwGetWindowParam'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x151): undefined reference to `__imp_glfwSwapBuffers'
C:\Users\roxor\AppData\Local\Temp\cc8hsorn.o:dynamic.c:(.text.startup+0x174): undefined reference to `__imp_glfwTerminate'
collect2: ld returned 1 exit status
make[1]: *** [dynamic.exe] Error 1
make[1]: Leaving directory `/c/glfw64/tests'
make: *** [win32-msys] Error 2 
```

现在后一个是加载DLL的测试程序。您可能认为这只是在正确的位置缺少必要的库（.a 和 .dll），但请注意此时我确实拥有所有必要的包含和库（来自早期的 GLFW 制作*，*与以上，相同的版本，相同的警告，相同的输出文件）在正确的地方：

*   \MinGW64\x86_64-w64-mingw32\lib 中的 libglfwdll.a（在 libglu32.a、libopengl32.a 旁边）
*   \MinGW64\x86_64-w64-mingw32\include\GL 中的 glfw.h（gl.h、glaux.h、glu.h 旁边）
*   \windows 和 \windows\system32 中的 glfw.dll（在 opengl32.dll、glu32.dll 旁边）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:48:15.417

我也遇到了同样的错误。通过更改文件解决`glfw-2.7.5\tests\Makefile.win32.mingw`：12 从

```
SOLIB     = ../lib/win32/libglfwdll.a 
```

至

```
SOLIB     = ../lib/win32/glfw.dll 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:52:49.517

问题**A**是无害的，但我添加了一个额外的演员来删除警告。问题**B**和**C**是由于 GLFW 中的两个错误造成的。它们现在已经得到修复，部分归功于这个线程。感谢您将其发布到 GLFW 错误跟踪器，让我注意到它们。修复程序将包含在 2.7.6 版本中。在此之前，您可以从[GLFW Subversion 存储库](https://sourceforge.net/scm/?type=svn&group_id=72569)中获取主干。

问题**C**非常棘手，以至于有人可能会发现总结很有用。

32 位的正确链接需要一个带有`__stdcall`修饰符号的 .def 文件，但该文件不能用于 64 位。解决方案是让 GCC 为给定架构生成正确的 .def 文件。

这是通过链接 DLL 两次来完成的。首先，它被链接为导出`__stdcall`修饰符号（默认）并生成 .def 文件（使用`-Wl,--output-def,file.def`），然后在没有装饰的情况下再次链接（使用`--kill-at`）以生成最终的 DLL。然后可以像往常一样使用这个生成的 .def 文件`dlltool`来生成导入库。

我在研究这个时发现的最有用的资源[是 MSVC 和 MinGW 的 Stdcall 和 DLL 工具](http://www.willus.com/mingw/yongweiwu_stdcall.html)，其中概述了这种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T19:46:15.740

我遇到了完全相同的问题，在研究错误和警告时，我找到了“找不到条目符号错误”警告的修复方法：

在示例/Makefile.win32.msys 和测试/Makefile.win32.msys 中更改该行

`WINDOWS = -mwindows -e _mainCRTStartup`

至

`WINDOWS = -mwindows`

Kabie 的修复有助于解决动态链接错误

我不是 100% 确定这是一个正确的解决方案，因为我首先不完全理解备用入口点名称的原因，但至少测试似乎有效并且示例运行。

# linux - 如何删除雷鸟中的工具提示提示？

> ID：10377932
> 
> 赞同：1
> 
> 时间：2012-04-30T02:43:17.070
> 
> 标签：linux, thunderbird

我在 Linux 上使用**ThunderBird 11.0.1 。**如何删除工具提示消息？我根本不想要工具提示提示。我查看了偏好，但那里什么也没看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:30:46.827

转到**选项**→**高级**→**配置编辑器**。然后设置`browser.chrome.toolbar_tips`为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:49:44.060

您可以获取源代码，删除工具提示，编译您自己的版本。好吧，我的回答有点颠倒。但至少这是可能的。

你试过这个链接吗？[雷鸟设置](http://kb.mozillazine.org/Modify_Thunderbird_settings)

可能值得在 prefs.js 中尝试 FireFox 的设置...远射但是...如果您想要它值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T17:21:33.673

配置编辑器很简单！在 MacOS 下是 Preferences -> Config Editor...

# excel - 将包含数据透视表的工作表分离到只有值的单个工作簿中

> ID：10377937
> 
> 赞同：0
> 
> 时间：2012-04-30T02:45:41.200
> 
> 标签：excel, vba, copy-paste, pivot-table

我有一个带有多个工作表的大型 Excel 工作簿，其中包含链接到大型 PowerPivot 源的数据透视表。我想将每个工作表分别保存到工作簿中，仅作为值。

我设法在没有数据透视表的工作簿上做到了这一点。但是我收到了这个项目的以下消息。我不想为每个保存复制嵌入的数据，因为它非常慢。任何提示或帮助？

```
Option Explicit

Sub JhSeparateSave()
    Dim ws As Worksheet
    Dim NewName As String

    If MsgBox("Copy specific sheets to a new workbook" & vbCr & _
    "New sheets will be pasted as values, named ranges removed" _
    , vbYesNo, "NewCopy") = vbNo Then Exit Sub

    '       Input box to name new file
    NewName = InputBox("Please Specify the name of your new workbook", "New Copy")

    With Application
        .ScreenUpdating = False

        For Each ws In ThisWorkbook.Worksheets
            If ws.Visible = xlSheetVisible Then
                MsgBox ("Copy step 1")
                ws.Copy

                With ActiveWorkbook.Sheets(1).UsedRange
                    .Cells.Copy
                    .Cells.PasteSpecial xlPasteValues
                    .Cells(1).Select
                End With

                ActiveWorkbook.SaveAs ThisWorkbook.Path & "\" & NewName & "-" & ws.Name
                ActiveWorkbook.Close
                MsgBox ("Saved sheet: " & ws.Name)
            End If
        Next ws

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:39:19.223

请参阅此示例（**TESTED AND TRIED**）。

```
Option Explicit

Sub JhSeparateSave()
    Dim wbTemp As Workbook
    Dim ws As Worksheet
    Dim NewName As String

    If MsgBox("Copy specific sheets to a new workbook" & vbCr & _
    "New sheets will be pasted as values, named ranges removed" _
    , vbYesNo, "NewCopy") = vbNo Then Exit Sub

    '~~> Input box to name new file
    NewName = InputBox("Please Specify the name of your new workbook", "New Copy")

    With Application
        .ScreenUpdating = False

        For Each ws In ThisWorkbook.Worksheets
            If ws.Visible = xlSheetVisible Then
                MsgBox ("Copy step 1")
                ws.Copy

                ActiveWorkbook.SaveAs Filename:=ThisWorkbook.Path & "\" & NewName & ".csv", _
                FileFormat:=xlCSV, CreateBackup:=False

                ActiveWorkbook.Close savechanges:=False

                Set wbTemp = Workbooks.Open(ThisWorkbook.Path & "\" & NewName & ".csv")

                wbTemp.SaveAs Filename:=ThisWorkbook.Path & "\" & NewName & "-" & ws.Name, _
                FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False

                wbTemp.Close savechanges:=False

                Kill ThisWorkbook.Path & "\" & NewName & ".csv"

                MsgBox ("Saved sheet: " & ws.Name)
            End If
        Next ws

    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:14:53.857

我最终使用的是：

```
Option Explicit

Sub Copier()

Dim ws As Worksheet
Dim wsNew As Worksheet
Dim NewName As String
Dim wsOriginalName As String

'On Error GoTo Errorcatch

If MsgBox("1\. Copy to new sheet. 2\. Change to values. 3\. Move to new workbook" & vbCr & _
"New sheets will be pasted as values, named ranges removed" _
, vbYesNo, "NewCopy") = vbNo Then Exit Sub

'       Input box to name new file
NewName = InputBox("Please Specify the month name of your new workbook", "New Copy")

With Application
    .ScreenUpdating = False
    .DisplayAlerts = False

    'iterate through all worksheets
    For Each ws In ThisWorkbook.Worksheets

        'ignore hidden worksheets
        If ws.Visible = xlSheetVisible Then

            'copy sheet within original workbook
            wsOriginalName = ws.Name
            ws.Copy After:=Sheets("FAQ")

            'switch to copied sheet
            Set wsNew = ActiveSheet

            'convert to values and format
            With wsNew.UsedRange
                .Copy
                .PasteSpecial xlPasteValuesAndNumberFormats
                .PasteSpecial xlPasteFormats
                .Cells(1, 1).Select
            End With

            'save into new workbook
            wsNew.Copy
            ActiveWorkbook.SaveAs ThisWorkbook.Path & "\" & "MIS-FY2013-" & NewName & "-" & wsOriginalName
            ActiveWorkbook.Close

            'MsgBox ("going to try to delete: " & wsNew.Name)
            'delete copied sheet
            wsNew.Delete

         End If
     Next ws

End With 
```

结束子

# jquery - 脚本适用于 jsfiddle，而不是本地机器

> ID：10377942
> 
> 赞同：1
> 
> 时间：2012-04-30T02:46:06.783
> 
> 标签：jquery, xampp, jsfiddle

我对 jquery 真的很陌生，在我的本地机器上运行它时遇到了一些麻烦。

[http://jsfiddle.net/ze8kn/](http://jsfiddle.net/ze8kn/)

**HTML**：

```
<div id="callus">
    <div class="def">location 0</div>
    <div class='num1'>location 1</div>
    <div class='num2'>location 2</div>
    <div class='num3'>location 3</div>
    <div class='num4'>location 4</div>
    <div class="numnames numname1">1234</div>
    <div class="numnames numname2">5678</div>
    <div class="numnames numname3">1234</div>
    <div class="numnames numname4">5678</div>
</div> 
```

**jQuery** :

```
$(function() {
    $(document).ready(function() {
        $('.numnames').hover(function() {
            $(".def").toggle();
        });
        $('.num1').hide();
        $('.numname1').hover(function() {
            $('.num1').toggle();
            return false;
        });
        $('.num2').hide();
        $('.numname2').hover(function() {
            $('.num2').toggle();
            return false;
        });
        $('.num3').hide();
        $('.numname3').hover(function() {
            $('.num3').toggle();
            return false;
        });
        $('.num4').hide();
        $('.numname4').hover(function() {
            $('.num4').toggle();
            return false;
        });
    });
}); 
```

它很笨重，我知道，但至少它做了我想要的。它在 jsfiddle 上完美运行，但是当我在本地服务器上测试它时它什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:48:36.463

删除`$(function() {`最后一行。

# string - MATLAB - 存储字符串

> ID：10377948
> 
> 赞同：0
> 
> 时间：2012-04-30T02:46:55.003
> 
> 标签：string, matlab, matrix, cell

我想创建一些东西来存储字符串，例如：

```
for x = 1:3

fruit = strcat('orange', num2str(x));

A = {fruit}; 
```

如何输出 1x3 矩阵

```
A = 
orange1
orange2
orange3 
```

我尝试了几件事，但没有任何效果。

我不认为这很复杂，但我似乎并没有完全理解它。

在我完成这个之后，我是否能够将一个普通的数值矩阵与 A 结合起来，这样：

```
N = [1 2; 3 4; 5 6];

FINAL = [N A];

>>output of FINAL would look like
FINAL = 
1 2 orange1
3 4 orange2
5 6 orange3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T04:02:38.413

在 MatLab 中，数值数组只能与数值数组连接。如果要创建具有不同数据类型的数组，则需要使用元胞数组。

要回答您的第一个问题，我建议您首先将水果声明为单元格数组，然后用所需的数据填充它：

```
fruit = cell(3,1);
for i =1:3
    fruit{i} = strcat('orange',num2str(i));
end
fruit 
```

这应该会产生所需的输出。

对于第二个问题，如果要将数值数组与元胞数组连接起来，首先需要使用 num2cell 将其转换为元胞数组，例如：

```
N = [1 2;3 4;5 6];
FINAL = [num2cell(N),fruit] 
```

在这种情况下，FINAL 将是一个包含 9 个单元格的数组，您可以像 FINAL{1,3} = orange1 一样访问它们。要使用单元格编写紧凑的代码，您应该查看 cellfun 和 deal，这是两个有用的函数。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:03:56.683

```
for x = 1:3
    fruit = ['orange', num2str(x)];
    A{x,1} = fruit;
end

N = [1 2; 3 4; 5 6];
N_as_cell = num2cell(N);

FINAL = cat(2, N_as_cell, A); 
```

# c++ - 如何获取（向上）与给定函数之外的 C 闭包关联的值？

> ID：10377950
> 
> 赞同：2
> 
> 时间：2012-04-30T02:47:52.083
> 
> 标签：c++, c, pointers, lua

在 Lua 5.2 手册中，我们可以找到[以下文本](http://www.lua.org/manual/5.2/manual.html#4.4)：

> 创建 C 函数时，可以将一些值与其关联，从而创建 C 闭包（参见 lua_pushcclosure）；这些值被称为 upvalues 并且在函数被调用时可以访问。
> 
> 每当调用 C 函数时，它的上值都位于特定的伪索引处。这些伪索引由宏 lua_upvalueindex 生成。与函数关联的第一个值位于 lua_upvalueindex(1) 位置，依此类推。任何对 lua_upvalueindex(n) 的访问，其中 n 大于当前函数的上值数（但不大于 256），都会产生一个可接受的（但无效的）索引。

因此，我创建了一个与使用“new”创建的对象指针关联的回调函数。

```
lua_pushstring(L,"myCallbackFunc");
Foo* ideleg = new Foo()
lua_pushlightuserdata (L, (Foo*)ideleg);
lua_pushcclosure(L, LuaCall<Tr,C,Args...>::LuaCallback,1);
lua_settable(L,-3); 
```

所有的机制都运行得很好……但是现在是清理的时候了，当我取消注册回调函数或退出程序时，我无法取回指针，因此我可以删除它。

我确实使用以下代码段找到了表条目：

```
lua_pushnil(L);
while (lua_next(L, -2) != 0)
{
    if (lua_isstring(L, -2) && lua_tostring(L,-2) == "myCallBackFunc" ) 
    {
        // get the pointer back and delete it!
    }
} 
```

（我可以使用`lua_getfield(L, -1, "myCallBackFunc");`吗？）

但是我无法在函数外部获得与 cclosure 关联的上`LuaCall<Tr,C,Args...>::LuaCallback()`值（实际上在这个 close 函数内部我可以简单地使用`lua_upvalueindex(1)`，但在这种情况下我在 close 函数之外......）

有没有办法获得这个值，这样我就可以在不再需要指针时删除它？

* * *

编辑：我确实找到了应该做我需要的[lua_getupvalue](http://www.lua.org/manual/5.2/manual.html#lua_getupvalue)函数，但目前我不知道如何获取 cclosure 堆栈索引。所以它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T03:20:58.000

是的，你可以在 Lua 中做到这一点。但我*强烈*建议不要这样做。

如果您可以访问该回调，如果它在 Lua 堆栈上，那么完全有可能某些 Lua 代码也可以访问它。这意味着即使你*认为*它会被销毁，但实际上直到 Lua 完成它才会被销毁。破坏你的闭包会使其进入非工作状态。然而，因为 Lua 可能仍然可以访问它，所以在你销毁它的 upvalue*之后，可能会调用闭包。*

坏事接踵而至。

最好将指针放入完整的用户数据并使用元方法将元表附加到它`__gc`以进行清理。这样，您可以确定它在真正不再使用时会被清理干净。

但是，如果您坚持按自己的方式进行操作，则始终可以使用[`lua_getupvalue`](http://www.lua.org/manual/5.2/manual.html#lua_getupvalue).

# c# - 如何将整数参数的字符串表示形式返回为基数为 16 的无符号整数

> ID：10377952
> 
> 赞同：1
> 
> 时间：2012-04-30T02:48:06.343
> 
> 标签：c#, java

Java 中 Integer.toHexString() 的 C# 等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:54:02.687

使用`String.Format("{0:x}", x)`静态方法或`Int32.ToString("x")`方法。

看例子：

```
using System;
using System.Globalization;

class Program
{
static void Main()
{
    int x = 4067;
    string s = x.ToString("x");
    Console.WriteLine(s);      // fe3

    s = String.Format("{0:x}", x);
    Console.WriteLine(s);      // fe3

    s = String.Format("{0:X}", x);
    Console.WriteLine(s);      // FE3

    s = String.Format("{0:x6}", x);
    Console.WriteLine(s);      // 000fe3
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:51:01.470

以下转换为十六进制

```
int myInt = 222;
string hexString = myInt.ToString("x") 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#XFormatString)

# iphone - 在 iPad 上，为什么 AVAudioSessionCategoryAmbient 会停止 iPod 中的音乐播放？

> ID：10377959
> 
> 赞同：3
> 
> 时间：2012-04-30T02:49:20.650
> 
> 标签：iphone, ios, avfoundation

以下代码应该播放声音并且不会停止 iPad 的 Music/iPod 播放的音乐。（在 iOS 5.1 上，iPod 应用程序变成了音乐应用程序）。

它正在使用`AVAudioSessionCategoryAmbient`而不是`AVAudioSessionCategorySoloAmbient`. 但无论哪种情况，它实际上都停止了音乐。使用有什么问题`AVAudioSessionCategoryAmbient`吗？

```
NSURL *sound0URL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"0" ofType:@"aiff"]];

audioPlayer0 = [[AVAudioPlayer alloc] initWithContentsOfURL:sound0URL error:nil];

audioPlayer0.delegate = self;
[audioPlayer0 prepareToPlay];

NSError *setCategoryErr = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:&setCategoryErr];

NSLog(@"%@", setCategoryErr);

audioPlayer0.currentTime = 0;
[audioPlayer0 play]; 
```

已`setCategoryErr`打印，`(null)`因此应该没有错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T03:03:32.110

正如我在评论中所说，似乎解决方案是在调用`prepareToPlay`AVAudioPlayer 之前设置 AVAudioSession 类别。

# android - 给定 X 和 Y 的对话框的缩放和平移动画

> ID：10377961
> 
> 赞同：3
> 
> 时间：2012-04-30T02:49:33.660
> 
> 标签：android, dialog, scale, translate-animation

我正在尝试通过以下方式在 MapView 上设置对话框进入和退出动画：用户在 MapView 的 OverlayItem 上执行 longPress 后，对话框应该缩放并从 longPress 的 X 和 Y 坐标转换到中心的屏幕。同样，当用户关闭 Dialog 时，它应该缩放并转换为它最初来自的 X 和 Y 坐标。

我最大的问题是我找不到为给定 X 和 Y 启动动画的方法（我也不确定是否可以这样做）。

任何帮助表示赞赏。

# android - 可滚动片段

> ID：10377963
> 
> 赞同：0
> 
> 时间：2012-04-30T02:49:48.310
> 
> 标签：android, android-fragments

在我的平板电脑应用程序中，我想创建一个基于列表片段单击显示信息的片段，该片段具有不同的选项卡，我想使用视图寻呼机在这些选项卡之间滚动。但问题是你不能在一个片段中做一个片段，所以我怎样才能实现我想做的事情，或者甚至可以做我想做的事情？

基本上我在他左边有一个持久列表片段，选择一个项目会显示某种视图，我可以在选项卡之间滚动。我试图避免创建一个完整的单独活动，因为我做了很多基于此列表视图单击此活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:17:02.080

如果我理解正确，那么我想到的唯一结构是使用 ViewPager 作为最高级别并将 listadapter 放在每个视图的左侧，通过按下 listView 中的项目在视图之间切换。

只需创建一个通用 xml 基础文件，并在每个视图的 xml 文件中包含每个视图的细节。这样你就可以在 xml 文件中有一个层次结构，使开发更容易

# c++ - 如何导入 std::less 作为类型名？

> ID：10377964
> 
> 赞同：1
> 
> 时间：2012-04-30T02:50:15.397
> 
> 标签：c++, templates, functor

我在 Sol.h 中有以下代码，由于学校规定，大部分代码被省略：

```
template <typename T,int promote = 1, typename compare = std::less<T>() >
class Sol{
private:
  struct node{
    T data;
    struct node *next;
    struct node *previous;
  };
node *head, *tail;
public:
  typedef unsigned int size_type;
  typedef T key_type;
  typedef T value_type;
  size_type count;
  Sol() : head(0), tail(0) {
    count=0;
  } 
```

基本上它是一个类似于矢量的容器，但它做了一些我们需要模板化的事情。我似乎无法得到“typename compare = std::less< T>” - 忽略空格。

当我用测试代码编译时，我从 Sol.h 得到两个错误，其余的都与它们有关。

```
>temple> g++ -Wall -Wextra -ansi -pedantic Sol.h main.cc
Sol.h:6:61: error: expected type-specifier
Sol.h:6:61: error: expected '>'
main.cc: In function 'int main()':
main.cc:19:19: error: template argument 3 is invalid
main.cc:19:24: error: invalid type in declaration before '(' token
main.cc:19:48: error: expression list treated as compound expression in initializer [-fpermissive]
main.cc:19:48: warning: left operand of comma operator has no effect [-Wunused-value]
main.cc:19:48: error: invalid conversion from 'char*' to 'int' [-fpermissive]
main.cc:20:19: error: template argument 3 is invalid
main.cc:20:31: error: expected initializer before 'it'
main.cc:22:13: error: request for member 'erase' in 'foo', which is of non-class type 'int'
main.cc:24:9: error: 'it' was not declared in this scope
main.cc:24:18: error: request for member 'find' in 'foo', which is of non-class type 'int'
main.cc:25:9: error: request for member 'end' in 'foo', which is of non-class type 'int'
main.cc:28:13: error: request for member 'find' in 'foo', which is of non-class type 'int'
main.cc:30:13: error: request for member 'find' in 'foo', which is of non-class type 'int'
main.cc: In function 'std::string cat(const T&) [with T = int, std::string = std::basic_string<char>]':
main.cc:23:24:   instantiated from here
main.cc:12:35: error: 'int' is not a class, struct, or union type
main.cc:12:50: error: request for member 'end' in 'con', which is of non-class type 'const int'
main.cc:12:35: error: 'int' is not a class, struct, or union type
main.cc:12:35: error: 'int' is not a class, struct, or union type
main.cc:12:35: error: 'int' is not a class, struct, or union type 
```

要明确第 6 行是模板行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:53:06.590

改变

```
typename compare = std::less<T>() 
```

到

```
typename compare = std::less<T> 
```

你想要一个类型，而不是一个对象。

你也必须这样做，`#include <functional>`因为这`std::less`是定义的地方。

# ruby-on-rails - 如何实现“直接”作用于对象属性的方法？

> ID：10377967
> 
> 赞同：3
> 
> 时间：2012-04-30T02:50:43.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, methods, attributes

我正在使用 Ruby on Rails v3.2.2，我想在实例属性上“直接”调用方法，而不是在它们的接收器对象上调用方法。也就是说，如果我有一个`User`实例`@user`

```
@user.name
# => "Leonardo da Vinci" 
```

我将能够实现对`name`属性“直接”起作用的方法，以便我可以编写类似的东西

```
# Note: 'is_correct?' and 'has_char?' are just sample methods.
@user.name.is_correct?
@user.surname.has_char?('V') 
```

**可能吗？如果是这样，我该怎么做？**

*注意*：我正在尝试实现一个插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:09:06.630

为了做到这一点，您必须为每个属性使用一种特殊类型的类，恕我直言，假设您的原因纯粹是出于对视觉风格的关注，这将是非常过分的。

例如，由于`@user.name`返回 a ，默认情况下`String`您只能在其上调用属于该类的方法。`String`如果要在其上调用其他方法，则要么要使用 的子类`String`，要么要向 的特定实例添加一些单例方法`String`。我认为这会令人困惑和不一致，并且可能会阻碍真正的进展。

一个更好的解决方案是问类似的问题：

```
@user.valid?(:name) 
```

至于`has_char?('V')`，您已经可以使用以下实例来做到这一点`String`：

```
@user.surname.include?('V') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:26:57.273

我刚刚玩了一个 lil 并在普通类中使用单例方法让它工作，我不确定是否可以在你的情况下做同样的事情。我对此表示怀疑！但仍然是我得到的:)

```
class Bar

  def initialize foo
    @foo = foo
    def @foo.bar 
      p "baaaaaaar"
    end
  end

  def foo
    @foo
  end

  def foo=(foo)
    @foo = foo
    def @foo.bar 
      p "baaaaaaar"
    end
  end
end

a = Bar.new "foo"
p a.foo
p a.foo.bar
a.foo = "bar"
p a.foo.bar
# >> "foo"
# >> "baaaaaaar"
# >> "baaaaaaar"
# >> "baaaaaaar"
# >> "baaaaaaar" 
```

# ios - UINavigation 栏后退按钮没有响应

> ID：10377974
> 
> 赞同：1
> 
> 时间：2012-04-30T02:52:28.917
> 
> 标签：ios, uitableview, uinavigationbar

我有一个cameraview，我正在使用TableViewController 推送另一个视图。我可以使用导航栏控制器从我的主视图中推送第二个视图。但是第二个视图（表格视图）的后退按钮没有响应。我不知道为什么。

提前致谢。

@WrightCS 感谢您的即时回复。

在我的应用程序委托中。

```
ViewController *vc= [[ViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc]    initWithRootViewController:vc];
[self.window setRootViewController :navController];
[self.window makeKeyAndVisible];
return YES; 
```

现在我正在使用一个临时按钮来推送视图。

```
-(IBAction)testButtonPressed {
    TableView *tableVC = [[TableView alloc] initWithStyle:UITableViewStylePlain];
    [self.navigationController pushViewController:tableVC animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T04:21:58.810

```
 -(IBAction)testButtonPressed {
        TableView *tableVC = [[TableView alloc] initWithStyle:UITableViewStylePlain];

        UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
        self.navigationItem.backBarButtonItem = backBarButtonItem;
        [backBarButtonItem release];

        [self.navigationController pushViewController:tableVC animated:YES];
    } 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:34:03.313

```
- (void)viewDidLoad
{      
    UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:self  action:@selector(backButtonDidClicked:)];
    self.navigationItem.backBarButtonItem = backBarButtonItem;
    [backBarButtonItem release];
}

-(void)backButtonDidClicked :(id)sender
{  
    [self.navigationController popViewControllerAnimated:YES];
} 
```

它应该适合你！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:52:07.643

您的后退按钮可能不起作用的原因有几个：

*   您正在使用自定义 UIButton 并且框架/边界不正确，您可以使用`[yourButtonName sizeToFit]` 它来正确调整其大小。

*   您正在以编程方式添加按钮，而不是添加点击事件：

    [yourButtonName addTarget:self action:@selector(yourButtonNameTapped:) forControlEvents: UIControlEventTouchUpInside];

不要忘记您的活动。

```
...
-(void)yourButtonNamedTapped:(id)sender
{
...
} 
```

文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

如果您使用的是 UINavigationController，则在您使用 [self.navigationController pushViewController:viewControllerName] 时会自动显示 back。

# ruby-on-rails - where NOT IN() 就一个join？

> ID：10377975
> 
> 赞同：1
> 
> 时间：2012-04-30T02:52:33.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我在 Rails 模型中有以下范围。

```
class Suggestion < ActiveRecord::Base
  has_many :favourites

  def self.favoured_by(user)
    joins(:favourites).where(favourites: { user_id: user.id })
  end
end 
```

这完美无缺。它将返回特定用户收藏的所有建议。

如何检索所有根本不喜欢的建议或该特定用户不喜欢但不喜欢的建议？

```
def self.not_favoured_by(user)
  # ...
end 
```

我的`Favourite`模型如下所示：

```
class Favourite < ActiveRecord::Base
  belongs_to :suggestion
  belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T03:02:37.000

```
favorited_suggestions_ids = joins(:favourites).where(favourites: { user_id: user.id }).map(&:id)
return scoped if favorited_suggestion_ids.empty?
where('id not in (?)',favorited_suggestions_ids) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:01:31.380

这个怎么样：

```
def self.not_favoured_by(user)
  sql = <<-SQL
    SELECT suggestions.* FROM suggestions 
    WHERE NOT EXISTS 
      (SELECT id FROM favourites WHERE user_id = #{user.id} AND favourites.suggestion_id = suggestions.id);
  SQL
  find_by_sql(sql)
end 
```

# eclipse - 为什么有时在eclipse上调试java代码时没有详细信息？

> ID：10377980
> 
> 赞同：2
> 
> 时间：2012-04-30T02:53:58.197
> 
> 标签：eclipse, spring-roo

有时当我在 Eclipse 中调试时，将鼠标移到参数上，没有调试信息，如值和其他显示，但参数描述如下：

示例是我调试的 aspectJ .aj 源代码。谁能告诉我为什么有时没有详细信息以及如何解决？

![在eclipse中调试.aj文件](../Images/2a56bf59c71ba1f0b1c1a1a0bfe2779e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T19:59:59.117

我想我找到了解决方案。每当您遇到此问题时，请转到调试透视图。您将看到线程将被选为父进程。更改线程选择。将它分配给显示 Suspended 的线程，因为它具有您的断点行号。通过这样做，您将取回所有调试值和调试命令，例如 step into 、 step over 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:16:32.393

这可能是 AspectJ 特定问题：尝试安装[AspectJ Development Tools](http://www.eclipse.org/ajdt/) for Eclipse 并查看是否有帮助。

# cmake - CMake：如何以跨平台的方式构建项目？

> ID：10377985
> 
> 赞同：1
> 
> 时间：2012-04-30T02:55:16.887
> 
> 标签：cmake

我正在尝试以跨平台的方式构建一个项目。

我正在使用 CMake 即时生成项目文件，但不清楚如何以跨平台方式编译这些项目文件。我发现`try_compile`但不清楚这是否会做我想要的。有任何想法吗？

例如，假设我对 project 使用 Visual Studio 2010 `foo`。我期待 CMake 生成`foo.sln`，然后构建它（生成二进制文件）。我知道如何自动化第一部分，但我如何自动化第二部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:12:47.140

来自[CMake 文档](http://www.cmake.org/cmake/help/cmake-2-8-docs.html#section_Description)：

> “CMake 是一个跨平台的构建系统生成器。”

所以换句话说，一旦 CMake 生成了项目文件，它的工作就真的完成了。

`--build`您可以使用标志通过 CMake 调用本机构建工具，例如

```
cmake --build . --config Release --target install -- /M:4 
```

请参阅[此处](http://www.cmake.org/cmake/help/cmake-2-8-docs.html#opt%3a--builddir)了解更多信息。

# google-maps - Google Maps API v3 getPanoramaByLocation (StreetView)

> ID：10377987
> 
> 赞同：1
> 
> 时间：2012-04-30T02:55:48.590
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我正在开展一个项目，该项目在全球范围内随机选择位置，并且需要 Google Street View 的一些功能。我正在使用 Google Maps 的 API v3。我的问题是 getPanoramaByLocation 方法。根据谷歌文档，getPanoramaByLocation 是：

“在给定 LatLng 的给定半径内检索全景的 StreetViewPanoramaData。StreetViewPanoramaData 被传递给提供的回调。如果半径小于 50 米，将返回最近的全景。”

我感兴趣的部分是它说“小于 50 米，返回最近的全景图”。因此，例如，如果我输入刚果中部某处的坐标（那里没有数英里的街景），它应该返回最近的可用街景的全景图。但事实并非如此，它每次都返回 null 。

它看起来有多远有限制吗？

这是我的小提琴：

[http://jsfiddle.net/nrJBP/1/](http://jsfiddle.net/nrJBP/1/)

谢谢大家，希望这对将来的任何人都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:53:52.087

如文档所述，该服务在您提供的半径范围内进行搜索。您指定最大半径。

该服务可以找到半径内的*任何*全景数据，除非您指定 50m，否则它总是会找到最近的（在 50m 内）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T14:50:56.193

您可以使用`google.maps.StreetViewStatus`. 如果请求成功，它将返回`OK`。如果附近没有全景图，它将返回`ZERO_RESULTS`。

# xslt - XSL：基于分隔符拆分文本属性

> ID：10377991
> 
> 赞同：2
> 
> 时间：2012-04-30T02:56:21.947
> 
> 标签：xslt

我有以下代码。

```
<xsl:template match="Rel/SPFMarkupFile">
<xsl:for-each select="./SPFReportItem">
    <tr>
        <td>X</td>
        <td><xsl:value-of select='../../../SPFReportItem/ReportAttribute[@AttrName="Name"]/@AttrValue' /></td>
        <td colspan="4" indent="yes">
            <xsl:value-of select='ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue' />
        </td>   
        <td><xsl:value-of select='ReportAttribute[@AttrName="CreationUser"]/@AttrValue' /></td>
        <td colspan="2">N/A</td>
        <td><xsl:value-of select='ReportAttribute[@AttrName="SPFMarkupType"]/@AttrValue' /></td>
    </tr>
</xsl:for-each> 
```

为了`<xsl:value-of select='ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue' />`

例如值可以是 test123~test2~test4~test1 分隔符是 ~

我想拆分该值并将其放入不同的行中。所以我希望它像

测试123

测试2

测试4

测试1

对于其他列，它将是相同的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:48:42.793

> 例如值可以是 test123~test2~test4~test1 分隔符是 ~
> 
> 我想拆分该值并将其放入不同的行中。

**使用**：

```
translate(., '~', '&#xA;') 
```

这个 XPath 表达式的求值从当前节点的字符串值产生另一个字符串，其中每个出现的`~`字符都被一个 NL（换行）字符替换。

**演示**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
     <xsl:value-of select="translate(., '~', '&#xA;')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于此 XML 文档时：**

```
<t>test123~test2~test4~test1 </t> 
```

**产生了想要的正确结果：**

```
test123
test2
test4
test1 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
     <xsl:value-of select="tokenize(., '~')" separator="&#xA;"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，会产生所需的正确结果：**

```
test123
test2
test4
test1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:23:33.680

在 XSLT 2.0 中使用 tokenize 函数将值拆分为多个部分，或者使用 Martin Honnen 对我在使用 XSLT 1.0 时的一个问题的非常好的回答：[如何使 XSLT Javascript 扩展函数返回节点集？](https://stackoverflow.com/questions/10222750/how-have-an-xslt-javascript-extension-function-return-a-node-set/10225835).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:14:06.457

条件语句列表应该适合您

```
<xsl:if test="'ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue'='Test123'">
</xsl:if>
<xsl:if test="'ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue'='Test1'">
</xsl:if>
<xsl:if test="'ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue'='Test2'">
</xsl:if>
<xsl:if test="'ReportAttribute[@AttrName="SPFMarkupText"]/@AttrValue'='Test3'">
</xsl:if> 
```

# c++ - 声明指向整数数组 C++ 的指针

> ID：10377992
> 
> 赞同：0
> 
> 时间：2012-04-30T02:56:30.400
> 
> 标签：c++, arrays, pointers

我想在我的类的头文件中声明一个指向整数数组的指针。我有

```
private:
 int *theName; 
```

然后在构造函数中

```
theName = new int[10]; 
```

这行得通吗？有没有另一种方法可以做到这一点，所以你有一个指向数组的指针？

我认为 int *theName 创建了一个指向整数而不是整数数组的指针，如果这创建了一个指向整数数组的指针，你如何创建一个指向整数的指针？

我也可以在析构函数中调用

```
delete theName; theName = NULL; 
```

那会删除 theName 整数数组对象，然后将 theName 指向内存中的 null 吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T03:01:02.017

四件事：

*   一，是的，这就是你如何制作指向数组的指针。请注意，指向整数的指针和指向整数*数组*的指针之间没有区别；您可以将整数视为一个元素的数组。您仍然可以使用`x[0]`if`x`是指向整数的指针，您仍然可以使用`*x`if`x`是指向数组的指针，它们的工作方式相同。

*   其次，你必须使用`delete[] theName`，**而不是** `delete theName`。用在哪里就得用`new`，用`delete`在哪里就得`new[]`用`delete[]`。另外，不需要设置，因为在析构函数运行后，您无论如何`theName = NULL`都无法访问。`theName`

*   第三，在编写管理资源的类时，需要编写复制构造函数、移动构造函数、复制赋值运算符和移动赋值运算符。

*   第四，除非您只是将其作为教学练习，否则您应该真正使用`std::vector`. 它有很多优点，没有真正的缺点。如果您使用`vector`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T03:41:36.557

我完全犹豫要不要发布这个，但我希望它不会造成问题。

迂腐：大多数其他答案都是错误的：您创建的*不是*指向数组的指针。它是一个指向`int`数组初始元素的指针。

我犹豫是否要发布它，原因很简单，这几乎可以肯定只是在您的问题中使用了错误的措辞——指向`int`几乎可以肯定是您认为想要的指针，而这正是您真正得到的。

但是，有诸如指向数组的指针之类的东西。它很少有用，因为当/如果你对它进行指针数学运算（包括下标），指向数组的指针会增加它指向的数组的大小。在您的情况下，您分配 10`int`秒。您可以使用指针的下标来引用`int`数组中的 s，因此`theName[0]`引用第一个`int`、`theName[1]`第二个`int`等等——这正是您通常想要的。

如果您正在使用（例如）一个数组数组，并且想要一个指针一次遍历整行，那么您*可能*能够真正使用指向数组的指针，`ptr[0]`第一行也是如此，`ptr[1]`第二行，以此类推。例如：

```
#include <iostream>

static const int x = 20;
static const int y = 10;

int main() {
    char data[y][x];

    auto ptr_array = &data[0];
    char *ptr_char = &data[0][0];

    std::cout << "Address of entire array: " << (void *)data << "\n";

    std::cout << "char *[0] = " << (void *)ptr_char << "\n";
    std::cout << "char *[1] = " << (void *)(ptr_char+1) << "\n";

    std::cout << "array *[0] = " << (void *)ptr_array << "\n";
    std::cout << "array *[1] = " << (void *)(ptr_array+1) << "\n";
    return 0;
} 
```

`char`我已将其更改为与( 而不是)的数组一起使用，`int`以使数学更加明显—— `sizeof(char) == 1`（根据定义），因此计算数学变得更容易一些。当我在我的机器上运行这段代码时，我得到的地址是：

```
Address of entire array: 0047FD2C
char *[0] = 0047FD2C
char *[1] = 0047FD2D
array *[0] = 0047FD2C
array *[1] = 0047FD40 
```

如您所见，`ptr[0]`无论哪种方式，都将数组的地址作为一个整体保存。但是，使用指向 的指针`char`，`ptr[1]`拥有一个更大的地址。然而，指向数组的指针拥有一个大于 0x40 - 0x2C = 0x14 = 20 的地址——这符合我们给数组 (20) 的 X 维度。换句话说，我们确实有一个指向数组的指针，并且该指针上的指针算术（或等效地，下标）一次就整个数组起作用。

不过我会重复一遍：至少如果我们忽略了您几乎可以肯定*应该*使用 an的事实，那么`std::vector`您想要的类型和您获得的类型都是`pointer to int`. 有这样的类型`pointer to array`，但几乎可以肯定它*不是*你真正想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T03:01:59.983

是的，这会奏效。

你需要写`delete[] theName`——如果你分配了，`new TYPE[]`那么你必须用`delete[]`操作员删除。

设置`theName`为 null 是一种很好的形式，尽管在析构函数中是多余的，因为整个对象（因此`theName`）很快就会不复存在。

更好的 C++ 方法可能是使用`std::vector<int>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T03:02:04.567

是的，这就是初始化指针的方式。不过你有一些问题：

1.  你需要调用`delete []`你分配的任何东西`new[]`。您的代码无法按预期工作并导致 UB。

2.  您需要实现一个复制构造函数和赋值运算符。如果该指针被复制到您类型的另一个实例会发生什么？你最终会调用`delete []`它两次。

3.  术语挑剔：

> 那会删除 theName 整数数组对象，然后*指向`theName`内存中的 null 吗？*

不，它设置`theName`为`NULL`。 `theName`是一个变量，就像任何其他有值的变量一样。这个变量恰好是一个地址，所以当这样使用时，是的，它的值将是 的数值`NULL`，无论它可能是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T03:02:56.743

> 有没有另一种方法可以做到这一点，所以你有一个指向数组的指针？

你可以使用`std::vector`. 这 [在大多数情况下] 可以插入到您使用数组的任何位置，并提供以下好处：

1.  无需担心内存管理
2.  需要时自动调整大小
3.  可以继续使用`array[index]`语法
4.  可以使用方法执行边界检查`.at()`。

如果你想要一个指向第一个元素的指针（给 C 风格的 API 等），你可以使用：

```
std::vector<int> vec(10);

SomeCFunction(&vec[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T03:15:42.840

是的，delete[] 和 vector 和其他东西的答案非常好，但请记住这一点：int* p 是“指向 int 的指针”类型。它确实是一个指向单个整数的指针。但是，如果您像这样取消引用它 p[5] 这与说 *(p + 5) 相同。这也是数组访问的工作原理。（以及为什么可以将数组隐式转换为指向其第一个元素的指针。）但是，有一个指向数组类型的指针。int (*p)[10] 是“指向大小为 10 的 int 数组的指针”。然而，这不是你想要的。因为如果现在你会说 p[5] 这意味着 *(p + 5) 将访问地址 p + sizeof *p * 5。但是 sizeof *p 是 sizeof int[10]，所以你有乱七八糟的地方。（当然，p[5] 的类型是 int[10]，因为 p 是指向 int[10] 的指针）；-)

# ios - 在父表视图的同级详细视图之间导航

> ID：10377994
> 
> 赞同：4
> 
> 时间：2012-04-30T02:56:47.343
> 
> 标签：ios, uitableview, uinavigationcontroller

当我点击一个项目时，我有一个表格视图导航到详细视图。我要做的是从详细视图导航到同级详细视图（对于表中的另一个项目）而不返回父表视图。

例如，如果 table view 屏幕有许多属于这些类型的菜：

*   三明治
*   汤
*   沙拉

当我选择一个火腿三明治时，我会转到这道菜的详细视图。在这里我看到喜欢火腿三明治的人也喜欢鸡汤面和凯撒沙拉。

我想从火腿三明治转到鸡肉面条汤或凯撒沙拉的详细视图，而不用动画返回到表格视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:10:05.687

当您想要导航到下一个/上一个详细视图（我们称它们为同级详细视图）时，您只需弹出并推送新的控制器，并将动画标志设置为 FALSE

```
 - (void)gotoAnotherDetailView
{
    // Just remove the current 
    [self.navigationController popViewControllerAnimated:FALSE];

    // Create a new 
    DetailViewController* newcontroller = [DetailViewController alloc] initWithDishType:anotherDish];
    [self.navigationController pushViewController:newcontroller animated:FALSE];
} 
```

在此示例中，DetailViewController 只是一个虚拟控制器，您应该将其替换为您在代码中实例化的控制器。

正如我的旁注，Apple 建议使用委托模式来控制控制器的推送/弹出。这意味着控制器不会将自己弹出导航堆栈，而是会向父 tableview 控制器发送消息，并且该控制器将弹出并推送新的详细视图（一次调用）。

# python - 如何遍历给定目录中的文件？

> ID：10377998
> 
> 赞同：793
> 
> 时间：2012-04-30T02:58:01.280
> 
> 标签：python, iterator, directory

我需要遍历`.asm`给定目录中的所有文件并对它们执行一些操作。

如何以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：1090
> 
> 时间：2012-04-30T03:01:13.150

上述答案的 Python 3.6 版本，使用[`os`](https://docs.python.org/3.6/library/os.html)- 假设您将目录路径作为一个`str`名为的变量中的对象`directory_in_str`：

```
import os

directory = os.fsencode(directory_in_str)

for file in os.listdir(directory):
     filename = os.fsdecode(file)
     if filename.endswith(".asm") or filename.endswith(".py"): 
         # print(os.path.join(directory, filename))
         continue
     else:
         continue 
```

或递归地，使用[`pathlib`](https://docs.python.org/3.6/library/pathlib.html)：

```
from pathlib import Path

pathlist = Path(directory_in_str).glob('**/*.asm')
for path in pathlist:
     # because path is object not string
     path_in_str = str(path)
     # print(path_in_str) 
```

*   用于[`rglob`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.rglob)替换`glob('**/*.asm')`_`rglob('*.asm')`
    *   *这就像在给定的相对模式之前调用[`Path.glob()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob)with `'**/'`added：*

```
from pathlib import Path

pathlist = Path(directory_in_str).rglob('*.asm')
for path in pathlist:
     # because path is object not string
     path_in_str = str(path)
     # print(path_in_str) 
```

* * *

原答案：

```
import os

for filename in os.listdir("/path/to/dir/"):
    if filename.endswith(".asm") or filename.endswith(".py"): 
         # print(os.path.join(directory, filename))
        continue
    else:
        continue 
```

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2015-05-15T08:51:39.993

这将遍历所有后代文件，而不仅仅是目录的直接子文件：

```
import os

for subdir, dirs, files in os.walk(rootdir):
    for file in files:
        #print os.path.join(subdir, file)
        filepath = subdir + os.sep + file

        if filepath.endswith(".asm"):
            print (filepath) 
```

* * *

## 回答 #3

> 赞同：167
> 
> 时间：2012-04-30T03:06:20.340

您可以尝试使用[glob](https://docs.python.org/3/library/glob.html)模块：

```
import glob

for filepath in glob.iglob('my_dir/*.asm'):
    print(filepath) 
```

从 Python 3.5 开始，您还可以搜索子目录：

```
glob.glob('**/*.txt', recursive=True) # => ['2.txt', 'sub/3.txt'] 
```

从文档：

> glob 模块根据 Unix shell 使用的规则查找与指定模式匹配的所有路径名，尽管结果以任意顺序返回。不进行波浪号扩展，但 *、? 和用 [] 表示的字符范围将正确匹配。

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2019-06-06T01:31:56.537

从 Python 3.5 开始，使用[os.scandir(](https://docs.python.org/3/library/os.html#os.scandir) ) 和 2-20 倍的速度（[源代码](https://www.python.org/dev/peps/pep-0471/)）变得更加容易：

```
with os.scandir(path) as it:
    for entry in it:
        if entry.name.endswith(".asm") and entry.is_file():
            print(entry.name, entry.path) 
```

> 使用 scandir() 代替 listdir() 可以显着提高还需要文件类型或文件属性信息的代码的性能，因为如果操作系统在扫描目录时提供了这些信息，os.DirEntry 对象就会公开这些信息。所有 os.DirEntry 方法都可以执行系统调用，但 is_dir() 和 is_file() 通常只需要对符号链接进行系统调用；os.DirEntry.stat() 在 Unix 上总是需要一个系统调用，但在 Windows 上只需要一个用于符号链接。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-11-17T13:21:18.317

Python 3.4 及更高版本在标准库中提供了[pathlib 。](https://docs.python.org/3/library/pathlib.html)你可以这样做：

```
from pathlib import Path

asm_pths = [pth for pth in Path.cwd().iterdir()
            if pth.suffix == '.asm'] 
```

或者，如果您不喜欢列表推导：

```
asm_paths = []
for pth in Path.cwd().iterdir():
    if pth.suffix == '.asm':
        asm_pths.append(pth) 
```

`Path`对象可以很容易地转换为字符串。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-08-14T21:34:08.953

这是我在 Python 中遍历文件的方法：

```
import os

path = 'the/name/of/your/path'

folder = os.fsencode(path)

filenames = []

for file in os.listdir(folder):
    filename = os.fsdecode(file)
    if filename.endswith( ('.jpeg', '.png', '.gif') ): # whatever file types you're using...
        filenames.append(filename)

filenames.sort() # now you have the filenames and can do something with them 
```

***这些技术都不能保证任何迭代顺序***

是的，超级不可预测。请注意，我对文件名进行了排序，如果文件的顺序很重要，例如视频帧或时间相关的数据收集，这很重要。一定要在你的文件名中加入索引！

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-06-25T05:20:15.533

您可以使用[glob](https://docs.python.org/3/library/glob.html)来引用目录和列表：

```
import glob
import os

#to get the current working directory name
cwd = os.getcwd()
#Load the images from images folder.
for f in glob.glob('images\*.jpg'):   
    dir_name = get_dir_name(f)
    image_file_name = dir_name + '.jpg'
    #To print the file name with path (path will be in string)
    print (image_file_name) 
```

要获取数组中所有目录的列表，您可以使用[os](https://docs.python.org/3/library/os.html)：

```
os.listdir(directory) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-09-02T15:49:27.020

我对这个实现还不是很满意，我想要一个自定义构造函数，`DirectoryIndex._make(next(os.walk(input_path)))`这样你就可以传递你想要的文件列表的路径。欢迎编辑！

```
import collections
import os

DirectoryIndex = collections.namedtuple('DirectoryIndex', ['root', 'dirs', 'files'])

for file_name in DirectoryIndex(*next(os.walk('.'))).files:
    file_path = os.path.join(path, file_name) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-06-18T16:27:38.903

我真的很喜欢使用库`scandir`中内置的指令`os`。这是一个工作示例：

```
import os

i = 0
with os.scandir('/usr/local/bin') as root_dir:
    for path in root_dir:
        if path.is_file():
            i += 1
            print(f"Full path is: {path} and just the name is: {path.name}")
print(f"{i} files scanned successfully.") 
```