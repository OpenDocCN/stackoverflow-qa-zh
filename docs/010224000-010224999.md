# StackOverflow 问答 10224000-10224999

# .net - 与新程序集相同的公钥

> ID：10224001
> 
> 赞同：1
> 
> 时间：2012-04-19T08:06:18.260
> 
> 标签：.net, assemblies, public-key

是否可以为新程序集生成与先前占用的程序集相同的公钥？我们有一组控件需要迁移到 Visual Studio 2010，并且从 2008 年到 2010 年的升级过程不断中断，所以正在考虑重新编写程序集，但我们需要保留公钥令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:37:59.023

是的，这是可能的（在构建过程中使用相同的 key.snk）。这是个好主意吗？据我了解，只有当您对共享相同安全上下文的两个程序集感到满意时，您才应该共享相同的公钥。

# excel - Excel 或 Powerpoint 2007/2010 中的滚动图表

> ID：10224002
> 
> 赞同：3
> 
> 时间：2012-04-19T08:06:29.170
> 
> 标签：excel, vba, powerpoint, activex

我有一张图表，它在 X 轴上有大量点。（例如 ECG）。

如何将此图表作为Powerpoint 2007/2010中的**水平滚动对象？**如果我只是粘贴它，它会调整大小以适应宽度并变得不可读。

我想通过包含图表的水平滚动条来保持高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:02:16.227

我**不确定**这是否可以做到。话虽如此，我可以给你一个有趣的选择。:)

假设我们的图表在 Excel 中看起来像这样

![在此处输入图像描述](../Images/a75148e41fc637f6bf095d179afa10f3.png)

右键单击图表并单击`Copy`。打开 Ms Paint 并粘贴该图片。保存那张照片，说成`C:\MyChart.Jpg`

接下来打开 MS Powerpoint 并导航到`Developer`选项卡。（**请参阅快照**）在开发人员选项卡中，单击附加控件按钮并选择“Microsoft Web 浏览器”并将该控件插入相应的幻灯片中。相应地调整大小。还要放置一个命令按钮。命名它`Show Chart`或您认为正确的任何其他内容:)

![在此处输入图像描述](../Images/65908c92c2f499219629e507f07c98a4.png)

双击命令按钮并将此代码粘贴到那里

```
Private Sub CommandButton1_Click()
    WebBrowser1.Navigate "C:\MyChart.jpg"
End Sub 
```

现在按`F5`运行演示文稿。您的屏幕将如下所示。

![在此处输入图像描述](../Images/09fba6ae56cfaeeb0257c39cd3803709.png)

当你按下命令按钮时，你会得到你想要的:)

![在此处输入图像描述](../Images/d411d31bfc4ae70b7415c1d438d8c508.png)

**这种方法的缺点**

1) 您不能在 MS Powerpoint 中编辑图表。您必须在 Excel 中执行此操作并重复整个过程以将其保存为图像。

2) 你不能分发你的PPT。您必须将图像与 PPT 分开发送，并且您必须将命令按钮代码（*假设 PPT 和图像位于同一文件夹中*）更改为

```
Private Sub CommandButton1_Click()
    WebBrowser1.Navigate ActivePresentation.Path & "\MyChart.jpg"
End Sub 
```

**或者**

您必须在 ppt 中嵌入 xls 文件并编写复杂的代码以从 excel 文件中提取图表并将其保存给用户`temp directory`。然后，您可以在`Webbrowser1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T20:54:27.820

由于这从不同的角度解决了问题，因此我发布了一个全新的答案:)

此方法跟进我的最后一条评论

> > > 您必须在 ppt 中嵌入 xls 文件并编写复杂的代码以从 excel 文件中提取图表并将其保存到用户临时目录。然后您可以在 Webbrowser1 中使用该图像

**跟进**

> > > @Siddharth Rout：谢谢！但是，重新分配正是我想要的。而且我不可能将图像作为单独的文件（我要把它交给我的客户）。

你的担心不应该再让你担心了；）

**设计模式**

在 powerpoint 幻灯片中插入具有图表的 Excel 对象。你的幻灯片应该是这样的

![在此处输入图像描述](../Images/ce473b3cddffb413d79b941b7dc53f15.png)

现在如我的其他答案所示，插入“Microsoft Web Browser”和“Command Button”。将 Web 浏览器放在 Excel 对象上方以隐藏它。

你的屏幕现在应该是这样的。

![在此处输入图像描述](../Images/b025ceb66bdad94584fb2e32857fb3d4.png)

粘贴此代码并运行您的演示文稿......就是这样......真的;）

**代码**

```
Option Explicit

Private Declare Function GetTempPath Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

Dim ImageFile As String

Private Sub CommandButton1_Click()
    ExtractToTemp
    WebBrowser1.Navigate ImageFile
End Sub

Sub ExtractToTemp()
    Dim oSl As PowerPoint.Slide
    Dim oSh As PowerPoint.Shape

    Dim oXLApp As Object, oXLWB As Object, oXLSht As Object
    Dim mychart As Object

    Set oSl = ActivePresentation.Slides(1)

    Set oSh = oSl.Shapes(1)

    With oSh.OLEFormat.Object.Sheets(1)
        .Shapes(1).Copy
    End With

    '~~> Establish an EXCEL application object
    On Error Resume Next
    Set oXLApp = GetObject(, "Excel.Application")

    If Err.Number <> 0 Then
        Set oXLApp = CreateObject("Excel.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oXLApp.Visible = False

    '~~> Open the relevant file
    Set oXLWB = oXLApp.Workbooks.Add
    Set oXLSht = oXLWB.Worksheets(1)

    oXLSht.Paste

    '~~> Save Picture Object
    ImageFile = TempPath & "Tester.jpg"

    If Len(Dir(ImageFile)) > 0 Then Kill ImageFile

    Set mychart = oXLSht.ChartObjects(1).Chart
    mychart.Export FileName:=ImageFile, FilterName:="jpg"

    '~~> Wait till the file is saved
    Do
        If FileExists(ImageFile) = True Then Exit Do
        DoEvents
    Loop

    '~~> Clean Up And Close Excel
    oXLWB.Close SaveChanges:=False
    oXLApp.Quit

    Set oXLWB = Nothing
    Set oXLApp = Nothing
End Sub

'~~> Get User's TempPath
Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function

'~~> Function tot check if file exists
Public Function FileExists(strFullPath As String) As Boolean
    On Error GoTo Whoa
    If Not Dir(strFullPath, vbDirectory) = vbNullString Then FileExists = True
Whoa:
    On Error GoTo 0
End Function 
```

**测试示例文件**：请下载此文件并运行演示文稿。如果您在单击按钮后看到图表，则表示它有效:)

[https://skydrive.live.com/redir.aspx?cid=cdd3f8abe20bbe3b&resid=CDD3F8ABE20BBE3B!162&parid=root](https://skydrive.live.com/redir.aspx?cid=cdd3f8abe20bbe3b&resid=CDD3F8ABE20BBE3B!162&parid=root)

# backbone.js - 为什么我的 Backbone.js 应用程序无法识别“this.$el”？

> ID：10224004
> 
> 赞同：2
> 
> 时间：2012-04-19T08:06:33.960
> 
> 标签：backbone.js

当我`this.$el`在我的backbone.js 应用程序中使用时，firebug 总是告诉我`this.$el`没有定义。我必须切换到`$(this.el)`引用 jquery 元素。这两种方法有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:30:03.323

（我假设您指的是对象上的`$el`属性`Backbone.View`）

我有一个类似的问题，因为我使用的是旧版本的 Backbone，它不支持对象的[`$el`](http://documentcloud.github.com/backbone/#View-%24el)属性`Backbone.View`。尝试[将 Backbone.js 升级](http://documentcloud.github.com/backbone/#upgrading)到 0.9 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:29:58.467

`this.$el`是`$(this.el)` [检查文档](http://documentcloud.github.com/backbone/#View-%24el)的缓存版本，它应该在正常情况下工作，对我来说从来没有失败过。[Backbone 它自己多次使用它](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1183)。

我认为您在其他地方遇到了问题。

# android - Android 模拟器阿拉伯语支持

> ID：10224007
> 
> 赞同：2
> 
> 时间：2012-04-19T08:06:47.817
> 
> 标签：android, sdk, android-emulator, arabic

我在我的模拟器（2.2，2.33）中遇到了一个问题。我的问题是，即使我将语言设置下的输入语言设置为阿拉伯语并将我的 windows 语言设置为阿拉伯语，我也无法在我的编辑文本中写任何阿拉伯字母，模拟器仍然用英语书写。我非常需要它来填充我的数据库以准备发布。非常感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:59:08.767

好的，现在你的问题更好了。问题是 Android 默认键盘根本不支持阿拉伯语输入。您将无法使用默认的 Android 键盘输入阿拉伯字符。解决它的唯一方法是安装自定义键盘。

这并不太难，但也不是很直接，因为您无法从模拟器访问 Market（抱歉，Google Play）。这是你需要做的。

1.  在实际手机上安装支持阿拉伯语输入的键盘 - 以及相应的阿拉伯语扩展包。我建议[AnysoftKeyboard](https://play.google.com/store/apps/details?id=com.menny.android.anysoftkeyboard&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5tZW5ueS5hbmRyb2lkLmFueXNvZnRrZXlib2FyZCJd)及其[阿拉伯语包](https://play.google.com/store/apps/details?id=com.anysoftkeyboard.languagepack.arabic&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5hbnlzb2Z0a2V5Ym9hcmQubGFuZ3VhZ2VwYWNrLmFyYWJpYyJd)

2.  使用 USB 数据线将手机连接到 PC，然后将键盘和扩展包的 .apk 文件复制到 PC。您需要为此使用`adb pull`命令：`adb -d pull /data/app/com.menny.android.anysoftkeyboard.apk`和`adb -d pull /data/app/com.anysoftkeyboard.languagepack.arabic.apk`

3.  （您现在可以断开手机了）。启动模拟器并将这些 .apk 文件安装到模拟器上： `adb -e intall com.menny.android.anysoftkeyboard.apk`和`adb -e install com.anysoftkeyboard.languagepack.arabic.apk`

4.  现在在模拟器中导航到“设置->语言和键盘设置”，删除所有设备旁边的复选标记，然后向下滚动到“AnySoftKeyboard”并将复选标记放在它旁边（在对话框上按“确定”）。在其下方，选择“AnySoftKeyboard 设置”，然后选择“键盘”。确保选中“英语”和“阿拉伯语”，然后退出设置。

5.  最后，您可以启动您的应用程序，选择您的编辑文本 - 键盘将弹出 - 它看起来与您习惯的不同。点击键盘右上角的“->ABC->”按钮切换语言。如果您安装了阿拉伯字体，您现在应该可以输入阿拉伯字符了。

祝你好运！（请注意，我根本不懂阿拉伯语，所以截图中的字符是我随机敲击键盘上的键以演示输入的结果。

![在此处输入图像描述](../Images/795bf41cb8f1b077e1873e9dc37ec263.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:19:26.937

在 Honeycomb (3.0) 之前，我认为没有对阿拉伯语文本的原生支持。但是我读过如果你使用一些阿拉伯字体，那么它可以实现。读[这个](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android/7962813#7962813)

# html - 如何使位置在顶部而不是底部的css文件中关闭X

> ID：10224008
> 
> 赞同：1
> 
> 时间：2012-04-19T08:06:48.313
> 
> 标签：html, css

我正在为灯箱使用 css 文件，它在图像底部显示关闭 X 十字我希望在顶部如何执行此操作

belwo 是我的 css 文件

```
 /* line 112, ../sass/lightbox.sass */

 .lb-data .lb-close {
 width: 35px;
 float: right;
 padding-bottom: 0.7em;
  outline: none;
}

/* line 117, ../sass/lightbox.sass */

.lb-data .lb-close:hover {
 cursor: pointer;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:00:29.623

嘿，我想你想要这样

首先认为你应该定义你的主容器位置相对并给出关闭按钮位置绝对并根据你的布局定义左上右下角......

**CSS**

```
.lb-data{
width:200px;
    height:200px;
    background:red;
    margin:100px 0 0 100px;
    position:relative;
}

.lb-data .lb-close {
 width: 35px;
    height:25px;
  position: absolute;
 padding-bottom: 0.7em;
  outline: none;
    top:-36px;
    right:-13px;
    background:green;
    color:white;
    font-weight:bold;
}

/* line 117, ../sass/lightbox.sass */

.lb-data .lb-close:hover {
 cursor: pointer;
 } 
```

**HTML**

```
<div class="lb-data">

    <div class="lb-close">XX</div>

</div> 
```

现场演示[http://jsfiddle.net/rohitazad/GgGzm/](http://jsfiddle.net/rohitazad/GgGzm/)

# c# - WCF 自定义身份验证 - 令牌

> ID：10224011
> 
> 赞同：0
> 
> 时间：2012-04-19T08:07:14.030
> 
> 标签：c#, wcf, security, wcf-security, token

我正在尝试在 WCF 中为以下场景找到标准解决方案：

我有 2 项服务。Service1 想要向 service2 发送请求。我希望 service1 在 service2 响应他的请求之前发送凭据以便进行身份验证。

我不想使用 ssl 或在所有网络服务之间复制证书。

这是我的解决方案：

我将创建一个“安全服务”。

Service1 将针对安全服务进行身份验证。

成功验证后，此安全服务将为 service1 提供由安全服务签名的自定义令牌。

Service1 会将此令牌附加到它的每个请求中。

Service2 将验证此令牌，如果成功，将处理请求。

答案是 C# (WCF) 中是否有实现此机制的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:37:16.423

Microsoft 为此类声明基础授权提供 WIF（Windows 身份基础）。看看这篇文章：

[http://msdn.microsoft.com/en-us/magazine/ee335707.aspx](http://msdn.microsoft.com/en-us/magazine/ee335707.aspx)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:07:18.903

如果您在谈论 WCF 服务，请查看[WCF 支持](http://msdn.microsoft.com/library/ff405740.aspx)的安全类型。它是无，传输，消息，TransportWithMessageCredential，TransportCredentialOnly，两者。你说你对运输安全不感兴趣。因此，列表中仍然存在消息安全性。

```
WCF supports the following credential types when you are using message level security:

Windows. The client uses a Windows token representing the logged in user’s Windows identity. The service uses the credentials of the process identity or an SSL certificate. You will use this in the sample application that demonstrates the first scenario (internal self-hosted service).
UserName. The client passes a user name and password to the service. Typically, the user will enter the user name and password in a login dialog box. The service can validate the user name and password using a Windows account or the ASP.NET membership provider. You will use this in the sample application that demonstrates the third scenario (public Web-hosted service).
Certificate. The client uses an X.509 certificate and the service uses either that certificate or an SSL certificate.
IssueToken. The client and service use the Secure Token Service, which issues tokens the client and service trust. Windows CardSpace uses the Secure Token Service.
None. The service does not validate the client. 
```

接下来你没有说什么，但确定身份验证类型很重要，这就是你将如何托管你的服务，尤其是服务 2。Windows 身份验证适用于内部自托管服务，但我不确定这是你的情况. 因此，如果您的服务将托管在 IIS 上，则用户名适合您。您需要的是[摘要式身份验证](http://advosys.ca/papers/web/63-http-digest-authentication.html)的支持。阅读[WCF REST 服务上的摘要式身份验证](http://www.codeproject.com/Articles/162726/Digest-Authentication-on-a-WCF-REST-Service)。如果它不是 IIS 托管服务或者您需要替代解决方案，则可能是使用[安全令牌服务](http://msdn.microsoft.com/en-us/library/ff650503.aspx)。但是最新的更好的解决方案是基于声明的身份验证，您可以在其他答案中找到链接。

# jquery - 如何使用 jquery 从 ajax responsetext（或任何 html 文本字符串）中获取任何元素？

> ID：10224012
> 
> 赞同：2
> 
> 时间：2012-04-19T08:07:20.193
> 
> 标签：jquery, ajax

哪种方法最好用于查找 html 文本字符串中的任何元素？使用 find 方法，您需要有一个包装元素才能实际找到该子元素。filter 似乎给了我 size() 0 的对象。任何其他可以从任何父标签（html、head、body）获取任何元素的方法？

```
<html>

<head>

<link rel="stylesheet" href="http://localhost/p1_page/style_sheets/p1.css" />

<script type="text/javascript" src="http://localhost/p1_page/scripts/s1.js" />

</head>

<body>

<div id="content_wrapper">

<table><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td>ala</td></tr><tr><td></td><td><span id="button_wrapper"><span id="button_on" ><input type="hidden" name="" value="1" /></span></span></td></tr><tr><td></td><td></td></tr></table></div>

</body>

</html> 
```

那是 html 响应（我不得不删除元素可读内容）。

```
Tryed $(response).find('body') returns object with size() 0;  
Tryed $(response).filter('body') returns object of size() 0;  
Tryed $('body', response) returns object of size() 0;  
But $(response) returns an object os size() 7; I don't get it 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:10:08.040

你可以利用

```
var html = $(htmlString); 
```

然后你拿：

```
var body = html.find("body"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:06:17.923

```
$(function(){
    var htmlStr='<html><head><title>My Title X</title></head><body><div class="NewDiv">Data in the DIV in html string</div></body></html>';
    $htmlStr=$(htmlStr);
    console.log($htmlStr.find('title').text());//null
    console.log($htmlStr.closest('title').text());//My Title X
    console.log($htmlStr.find('div').hasClass('NewDiv'));//prints false
    console.log($htmlStr.closest('div').hasClass('NewDiv'));//prints true}); 
```

选择“head”以外的元素时，jquery最接近返回预期元素。

您可以尝试使用 Jquery 1.5+ 将内容解析为 XML

```
var xmlObj=$.parseXML(htmlStr);
    console.log($.parseXML(htmlStr).getElementsByTagName('head')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:13:21.917

```
var htmlObj = $(string); 
```

Then,

```
htmObj.find(); 
```

OR

```
htmlObj.filter(); etc.. 
```

For example:

To get `html` tag contents:

```
htmlObj.find('html').something()..  
//Or
$('html', htmlObj).something().... 
```

To get `head` tag contents:

```
htmlObj.find('head').something()..  
//Or
$('head', htmlObj).something().... 
```

To get `body` tag contents:

```
htmlObj.find('body').something()..  
//Or
$('body', htmlObj).something().... 
```

AND SO ON....

# objective-c - 具有多个存储的 CoreData：配置问题

> ID：10224016
> 
> 赞同：11
> 
> 时间：2012-04-19T08:07:43.290
> 
> 标签：objective-c, ios, core-data, ios5, multiple-databases

我有一个带有大型预加载数据库和小型用户数据库（两个 CoreData SQLite 存储）的 iOS 项目。以前的问题建议使用配置来控制哪些实体与哪个商店一起使用。我很难让它发挥作用。这是我一直在尝试的...

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) return _managedObjectModel;
    // set up the model for the preloaded data
    NSURL *itemURL = [[NSBundle mainBundle] URLForResource:@"FlagDB" withExtension:@"momd"];
    NSManagedObjectModel *itemModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:itemURL];
    // set up the model for the user data
    NSURL *userDataURL = [[NSBundle mainBundle] URLForResource:@"UserData" withExtension:@"momd"];
    NSManagedObjectModel *userDataModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:userDataURL];
    // merge the models
    _managedObjectModel = [NSManagedObjectModel modelByMergingModels:[NSArray arrayWithObjects:itemModel, userDataModel, nil]];
    // define configurations based on what was in each model
WRONG [_managedObjectModel setEntities:itemModel.entities forConfiguration:@"ItemData"];
WRONG [_managedObjectModel setEntities:userDataModel.entities forConfiguration:@"UserData"];
    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) return _persistentStoreCoordinator;
    // preloaded data is inside the bundle
    NSURL *itemURL = [[[NSBundle mainBundle] bundleURL] URLByAppendingPathComponent:@"FlagDB.sqlite"];
    // user data is in the application directory
    NSURL *userDataURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"UserData.sqlite"];

    NSManagedObjectModel *mom = self.managedObjectModel;
    NSError *error = nil;
    NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];

    if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:@"ItemData"  URL:itemURL options:nil error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    ... 
```

这将中止“用于打开商店的模型与用于创建商店的模型不兼容”。对照商店中的哈希检查模型中的哈希表明它们对于 ItemData 配置中的实体是相同的。

如果我尝试进行轻量级迁移，如下所示：

```
 NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

   NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
   if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:@"ItemData"  URL:itemURL options:options error:&error]) 
```

它因“NSInvalidArgumentException”而失败，原因是：“模型不包含配置“ItemData”。我认为这是因为轻量级迁移过程正在创建一个新模型，并且它不包含我的配置。

根据其他线程中的一些建议，我尝试在没有配置的情况下进行轻量级迁移，然后使用配置创建新的协调器。这种工作，但它添加表到我的预加载 .sqlite 文件对应于用户数据实体（不属于那里），并在新创建的用户数据存储中创建预加载的数据表和用户数据表. 最终结果是获取失败，似乎是因为他们在错误的商店中寻找。

```
NSDictionary *migrationOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

// make a temp persistent store coordinator to handle the migration
NSPersistentStoreCoordinator *tempPsc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
// migrate the stores
if (![tempPsc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:itemURL options:migrationOptions error:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}
if (![tempPsc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:userDataURL options:migrationOptions error:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

// make a permanent store coordinator
NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];

NSDictionary *readOnlyOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSReadOnlyPersistentStoreOption, nil];
if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:@"ItemData"  URL:itemURL options:readOnlyOptions error:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

/*if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:@"UserData" URL:userDataURL options:nil error:&error])
 {
 NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
 abort();
 }*/ 
```

然后后来...

```
 OSAppDelegate *delegate = [UIApplication sharedApplication].delegate;
    NSManagedObjectContext *context = delegate.managedObjectContext;
    // sanity check
    for (NSPersistentStore *store in context.persistentStoreCoordinator.persistentStores) {
        NSLog(@"store %@ -> %@", store.configurationName, store.URL);
        NSMutableArray *entityNames = [[NSMutableArray alloc] init];
        for (NSEntityDescription *entity in [context.persistentStoreCoordinator.managedObjectModel entitiesForConfiguration:store.configurationName]) {
            [entityNames addObject:entity.name];
        }
        NSLog(@"entities: %@", entityNames);
    }

    NSFetchRequest *categoryFetchRequest = [[NSFetchRequest alloc] init];
    categoryFetchRequest.entity = [NSEntityDescription entityForName:@"Category" inManagedObjectContext:context];
    categoryFetchRequest.predicate = [NSPredicate predicateWithFormat:@"name == %@", categoryName];
    NSError *error = nil;
    Category *category = [[delegate.managedObjectContext executeFetchRequest:categoryFetchRequest error:&error] lastObject]; 
```

这工作正常，返回适当命名的 Category 对象，直到我取消注释添加第二个商店。如果我这样做，则获取结果会返回为空。诊断 NSLog 消息完全符合我的预期。每个商店都与正确的配置相关联，并且每个配置都有相应的实体。

谁能指出我在多个商店设置中的源代码，或者让我知道我做错了什么？提前致谢！

* * *

*已解决*：问题的症结在于第一个代码清单中标记为 WRONG 的两行。我试图以编程方式创建配置，但这似乎还不够。如果您在执行此操作后查询 ManagedObjectModel 的配置，您**确实**会在列表中看到配置，并且正确的实体与这些配置相关联。但是，似乎还需要做一些其他事情才能使 PersistentStoreCoordinator 能够正确使用它们。在 Xcode 中创建配置使它们工作。

* * *

*跟进*：有一个额外的障碍。在设置最终的 Persistent Store Coordinator 之前运行单独的迁移通道的解决方案效果很好......在模拟器中。在实际设备上，权限更严格。如果您尝试执行该迁移，则会失败，因为 App 包中的存储是只读的。除非您整合模型，否则迁移似乎是必要的。如果您只有一个模型，并且 App 包中的商店与其兼容，则不需要迁移，并且使用 Xcode 中定义的配置进行访问是可行的。

另一种选择可能是在尝试迁移之前将数据移动到 Documents 目录中。我还没有验证这种方法是否有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:25:57.927

您是否尝试过在同一个模型（即同一个 momd）中定义这两种配置？您可以通过在编辑其中一个数据模型时选择“编辑器->添加配置”轻松完成此操作。将 UserData 和 ItemData 的实体拖到适当的配置中。以这种方式指定的配置是 Core Data 所尊重的；这与文件/URL 名称无关。完成上述操作后，请简化上面的 _managedObjectModel 以在调用时查找单个 momd 文件/URL。

或者，如果您决定保留两个单独的 momd 文件，请确保您已在模型定义文件中分别名为“UserData”和“ItemData”的配置中实际定义了模型。

我最初的建议是保留一个模型文件。除非有这些配置不能驻留在同一个对象模型中的原因，否则使用多个文件使事情复杂化是没有意义的。我认为将 Core Data 巧妙地用于执行您在上面尝试执行的操作将非常困难。尝试简化代码的建模部分。

# vb.net - 如何使用 Visual Studio 在 VB.net 中清除/刷新 DataBind

> ID：10224017
> 
> 赞同：1
> 
> 时间：2012-04-19T08:07:45.557
> 
> 标签：vb.net

在这里，我使用此代码绘制表数据绑定：-

```
Dim ds As DataSet = New DataSet()
ds.ReadXml(mypath)

VisaDG.DataSource = ds
VisaDG.DataBind() 
```

显示后如何清除VisaDG表？..任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:12:57.330

如果要清除gridview。你可以这样做：

```
VisaDG.DataSource = nothing
VisaDG.DataBind() 
```

**编辑**

你试过这个吗？

```
VisaDG.DataSource=New DataSet()
VisaDG.DataBind() 
```

# ios5 - ios 5 twitter集成字符长度不断变化

> ID：10224018
> 
> 赞同：1
> 
> 时间：2012-04-19T08:07:46.677
> 
> 标签：ios5, twitter, character, sharekit

目前使用 Sharekit 框架在我的应用程序中进行了 ios5 twitter 集成，但我遇到了一些随机最大值的棘手问题。twitter 窗口中显示的字符长度。

有时我可以看到最大字符长度为 106，有时是 95，有时是 87。这很奇怪。

我知道，如果我们添加图像，则大约需要 21 个字符 + 如果我们自己添加 URL，则它会减少 21 个字符。所以最后我可以使用的字符长度应该是 140-21-21 = 98。

但它不是。任何解决方案为什么它显示不同的最大字符长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:25:08.297

iOS 5 中的 twitter 框架可以识别 URL，并且知道它们将被缩短为 20 个字符。因此，图像和 url 会留下 140 - 21 - 20 = 99 个字符。但是如果一个 URL 已经短于 20 个字符，它不会被包装成 20 个字符，所以[http://apple.com](http://apple.com)将只有 16 个字符，而推文将是 (140 - 21 - 16 =) 103 个字符！

除此之外，您确定这些变化不是由 iOS < 5 和 iOS5 的差异引起的吗？Sharekit 不知道[twitter 正在包装所有超过 20 个字符](https://dev.twitter.com/docs/tco-link-wrapper/faq)的 URL，因此它会告诉您 URL 需要全部字符：140 - 21 - URL_LENGTH = 更长。

# php - PHP Basic 电子邮件表单所有消息都来自（未知），尽管回复工作正常

> ID：10224019
> 
> 赞同：2
> 
> 时间：2012-04-19T08:07:53.297
> 
> 标签：php, html, forms, email

[链接到 PHP 文件](http://www.richie.id.au/TAFE/form/php/form1_send.php) [链接到 HTML 文件](http://www.richie.id.au/TAFE/form/form.html)

好的，所以我正在做我的第一个 php 表单，我尝试过用谷歌搜索，但没有任何运气（如果有人知道任何关于基本 php 或 php 表单的好教程，我已经看过很多它们并且可以使用一个好的）。

无论如何，基本上我无法弄清楚为什么我的电子邮件是通过 Hotmail 中的 ( Unknown ) 发送的，即使当我去回复时，我收到了正确的电子邮件。

这是HTML页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Basic Form</title>
</head>

<style type="text/css">
</style>

<!-- Form Opening Tage -->
<table width="600">
<tr><td>
<form method="post" name="form1" action="http://www.richie.id.au/TAFE/form        /php/form1_send.php"><br /><br />
<table width="600" border="5" bordercolor="#990000">

<!-- Name Field -->
<tr><td>Name:</td></tr>
<tr><td><input type="text" name="name" size="40" /></td></tr>

<!-- email Field -->
<tr><td>Email:<br /></td></tr>
<tr><td><input type="text" name="email" size="40" /><br /><br /></td></tr>

<!-- Message Field -->
<tr><td>Message: <br /></td></tr>
<tr><td><textarea name="message" width="100%" rows="12" cols="60" style="resize:none;">    </textarea><br /><br /></td></tr>

<!-- Sbumit Button -->
<tr><td><input type="submit" name="submit" /><br /><br /></td></tr>

</table>
</form>
</td>
</tr>
</table>

<body>
</body>
</html> 
```

这是PHP页面

```
<?PHP

// $name variable declared as name that was inputed into text field
$name = $_POST['name'];

// $email variable declared as email that was inputed into text field
$visitor_email = $_POST['email'];

// Email to show the message as coming from
$email_from = $_POST["$visitor_email"];

// Message text asigned to variable message
$message = $_POST['message'];

// Email subject
$subject = 'New form submission from richie.id.au';

// Email Body
$email_body = "New message from: $name.\n\n Message:\n\n $message\n";

// Email address to send form submission email to
$to = "richie_hayward_01@hotmail.com";

// headers
$headers = "From: $email_from \r\n";
$headers .= "Reply-To: $visitor_email \r\n";

// Function that actually sends the mail
mail($to,$subject,$email_body,$headers);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:11:06.120

`$email_from = $_POST["$visitor_email"];`应该只是`$email_from = $visitor_email;`或`$email_from = $_POST['email'];`

虽然，为什么你有两个 PHP 变量用于同一件事，但我不知道。你甚至可以这样做：

`$email_from = "$name <$visitor_email>";`

尽管您可能希望根据[RFC 5322 第 3.4 节](https://www.rfc-editor.org/rfc/rfc5322#section-3.4)`$name`清理和`$visitor_email`变量以确保它们有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:16:32.547

问题在您的 php 代码的下面一行

```
// Email to show the message as coming from
$email_from = $_POST["$visitor_email"]; 
```

$email_from 是空白的，这就是未知发件人的原因。

# objective-c - objC 的 vCard 解析器

> ID：10224021
> 
> 赞同：0
> 
> 时间：2012-04-19T08:08:03.563
> 
> 标签：objective-c, parsing, vcf-vcard

Objective C 是否有一个好的 vCard 解析器。

我只在 github 上找到[了 VCardImporter](https://github.com/itok/VCardImporter)和[AddressBookVcardImport](https://github.com/aussiegeek/AddressBookVcardImport)，但它们还没有处于最终发布状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:34:47.190

看看这个来源：[http](http://altoshstock.blogspot.com/2010/11/iphone-os-generate-vcard.html) ://altoshstock.blogspot.com/2010/11/iphone-os-generate-vcard.html - 你会发现一个链接“*下载源代码*”。请务必阅读评论以避免一些错误。

# objective-c - SQLITE3 约束失败

> ID：10224023
> 
> 赞同：2
> 
> 时间：2012-04-19T08:08:17.627
> 
> 标签：objective-c, sqlite, prepared-statement

我关于stackoverflow的第一个问题，我真的希望你们能帮助我。

我一直在努力让准备好的语句在目标 C 中运行，到目前为止一切都很好。但是现在，当我尝试添加曲目时，我的数据库中不断出现“约束失败”。

我已经删除了数据库并再次创建了它，但错误仍然存​​在。此外，我一直在研究重复键，但我没有看到我在任何地方添加重复键。位置表添加得很好，并且它的构建方式相同。

我的数据库：

```
CREATE TABLE locations
    (LocationID INTEGER PRIMARY KEY AUTOINCREMENT,
    TimestampGPS DATE NOT NULL,
    Longitude REAL NOT NULL,
    Latitude REAL NOT NULL,
    Altitude REAL NOT NULL,
    Accuracy REAL NOT NULL,
    Bearing REAL NOT NULL,
    Speed REAL NOT NULL,
    TimestampDevice DATE NOT NULL);

CREATE TABLE tracks
    (TrackID INTEGER PRIMARY KEY AUTOINCREMENT,
    Title VARCHAR,
    Description VARCHAR,
    StartTrackDeviceTime DATE NOT NULL,
    EndTrackDeviceTime DATE NOT NULL);

CREATE TABLE track_locations
    (TrackID INTEGER NOT NULL REFERENCES tracks(TrackID), 
    LocationID INTEGER NOT NULL REFERENCES locations(LocationID),
    PRIMARY KEY (TrackID, LocationID)); 
```

我添加曲目的代码。（我有代码来添加一个类似的位置，并且工作得很好）

```
const char *sqlTrack = "INSERT INTO tracks(Title, Description, StartTrackDeviceTime, EndTrackDeviceTime) VALUES(?, ?, ?, ?)";
if(sqlite3_prepare_v2(db.dataBase, sqlTrack, -1, &addTrackStatement, NULL) != SQLITE_OK) {
    NSLog(@"Error: %s", sqlite3_errmsg(db.dataBase));
}

sqlite3_bind_text(addTrackStatement, 1, [track.title UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addTrackStatement, 2, [track.description UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addLocationStatement, 3, [[dateFormatter stringFromDate:track.startTime] UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addTrackStatement, 4, [[dateFormatter stringFromDate:track.endTime] UTF8String], -1, SQLITE_TRANSIENT);

NSLog(@"Going to execute the statement");
if(SQLITE_DONE != sqlite3_step(addTrackStatement)) {
    NSLog(@"First step failed");
    NSLog(@"Error: %s", sqlite3_errmsg(db.dataBase));
    return NO;
}
else {
    long insertedTrack = sqlite3_last_insert_rowid(db.dataBase);
    NSLog(@"Inserted id on TRACK: %ld", insertedTrack);

    //HERE I ALSO ADD LOCATIONS

    sqlite3_clear_bindings(addTrackStatement);
    sqlite3_reset(addTrackStatement);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:57:55.583

这行应该：

```
sqlite3_bind_text(addLocationStatement, 3, [[dateFormatter stringFromDate:track.startTime] UTF8String], -1, SQLITE_TRANSIENT); 
```

读：

```
sqlite3_bind_text(addTrackStatement, 3, [[dateFormatter stringFromDate:track.startTime] UTF8String], -1, SQLITE_TRANSIENT); 
```

# google-maps-api-3 - 谷歌地图视口标记管理器 - 标记过多 - JS API v3

> ID：10224026
> 
> 赞同：0
> 
> 时间：2012-04-19T08:08:22.720
> 
> 标签：google-maps-api-3, viewport, marker

我想在 Google 地图上显示超过 10,000 个位置。下面的代码有效，但加载所有 10,000 个位置需要很长时间。[请帮助我使用此天气图示例](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/examples.html)更改此代码以使用 Viewport Marker Manager

```
 <!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body>
  <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
    var locations = [
      ['Bondi Beach', -33.890542, 151.274856, 4],
      ['Coogee Beach', -33.923036, 151.259052, 5],
      ['Cronulla Beach', -34.028249, 151.157507, 3],
      ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
      ['Maroubra Beach', -33.950198, 151.259302, 1]
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

        var infowindow = new google.maps.InfoWindow();  

    var marker, i;

        for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:25:36.760

我不确定 Marker Manager 是否能完成您需要的工作。尝试[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:06:07.360

另一种方法可能是[Fusion Tables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)。它旨在处理大量标记。

# c++ - 寻找一种在 std::map 上自定义迭代器的方法

> ID：10224027
> 
> 赞同：1
> 
> 时间：2012-04-19T08:08:29.523
> 
> 标签：c++, iterator

我在代码中使用 std::map 来存储数据。使用地图的迭代器访问和/或修改元素非常容易，但因为我确实需要抑制一些操作（如 ++、[] 等），我不知道这是否属实，但似乎很少文章建议不要直接继承 std::map ，所以我正在编写一个包装器。

```
class MyContainer
{
  private:
    std::map<int, int> data;

  public:
    int &operator[](int); // here we write the interface to control the behavior of accessing the data element
    void &operator++();
    void &operator--();
}; 
```

但这会引起另一个问题。实际上，我在代码中的任何地方都使用迭代器来访问/修改元素。但是map移到自定义类之后，我就不能再使用主程序中的迭代器来处理数据了。有人建议编写我自己的迭代器，但在阅读了几篇文章后，似乎人们建议通过继承 std::iterator 来自定义我们自己的迭代器。这似乎很简单，但对我来说仍然太抽象了。我有两个疑问

1）我要迭代地图，但我的包装器并不是真正的容器。为了控制地图元素上以下操作（++、-、[]）的行为，我应该让自定义迭代器引用 MyContainer 而不是 map。这似乎让我感到困惑，因为我们需要推进 map 但迭代器却引用了包装器。我不知道如何使它工作，有没有类似案例可以参考的例子？谢谢。

2) 我不希望代码直接访问 map 元素，因此，我将包装器中的运算符定义为

```
int &operator[](int) 
```

在上面的函数中，返回的引用取决于输入参数，也就是说，在某些情况下，它可以返回 NULL 引用而不是引用元素的东西。但如果返回 NULL，则以下调用不再有效

```
data[3]++; 
```

因为 data[3] 可以返回一个空引用。但是如何在更新元素之前检查返回的引用是否为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:26:20.793

我认为为元素的`++`操作符等实现特殊行为是矫枉过正的。对于迭代器上的递增和递减操作也是如此。我认为一个好的解决方案是简单地向访问器添加边界检查，`[]`并在必要时抛出越界异常。因此，使用地图的`begin()`和`end()`方法，并将边界检查添加到`[]`：

```
class MyContainer
{
  private:
    std::map<int, int> data;
  public:
    typedef std::map<int, int> MapType;
    typedef MapType::iterator iterator;
    typedef MapType::const_iterator const_iterator;
    typedef MapType::reference reference;
  public:
    iterator begin() {return data.begin();}
    const_iterator begin() const { return data.begin();}
    // and so on ...
    reference operator[](size_t i) {
      if (data.size()<=i) { /* raise exception here */ }
      return data[i];
    }
    const reference operator[](int) const { /* same as above */}

}; 
```

这样做的好处是返回类型与标准库容器的返回类型相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:54:30.913

如果您需要对其进行迭代，您可以将“地图”公开。否则，不提供迭代的接口，在里面做所有事情（需要迭代）。

# maven - 复制 Tycho 工件 P2 依赖项

> ID：10224032
> 
> 赞同：1
> 
> 时间：2012-04-19T08:09:07.603
> 
> 标签：maven, p2, tycho

我有一个 Tycho 构建，它为 Xtext DSL 功能生成 eclipse 插件。我现在想制作一个可以处理 DSL 文件的 maven 插件。问题是将 DSL 插件依赖的工件放入 maven 插件中，因为它们不在 Maven 存储库中。此外，我希望 maven 插件自动依赖于 DSL 插件所依赖的相同工件。

我认为创建一个带有依赖项的 über-jar 将是最好的方法。问题是检索 DSL 插件的依赖项并将它们复制到一个目录中，这样我就可以构建这个 über-jar。

有没有人找到解决这个问题的方法？我的搜索只是找到了相反问题的解决方案；将 maven 依赖项作为 (P2) 依赖项导入 Tycho。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:20:35.557

使用打包类型[eclipse-repository](http://wiki.eclipse.org/Tycho/Packaging_Types#eclipse-repository)并将`includeAllDependencies`开关设置为 true，您可以让 Tycho 聚合您的插件及其所有传递依赖项。构建结果是一个 jar 压缩包（和一些 p2 元数据），您应该能够使用 maven-assembly-plugin 将其转换为 uber-jar。

另一个注意事项：您不能直接（还）在 eclipse-repository 中包含捆绑包，因此您需要通过一项功能包含您的捆绑包。

# java - Java Swing中背景的六色是什么？

> ID：10224035
> 
> 赞同：2
> 
> 时间：2012-04-19T08:09:13.947
> 
> 标签：java, swing, colors, hex

我通过从节点的邻居中删除边缘来生成迷宫。通过移除，我的意思是将移除边缘绘制为面板的原始颜色。我目前必须将其设置为，`Color.white`但它看起来很奇怪。那么有人知道Java Swing中背景颜色的十六进制代码吗？

![在此处输入图像描述](../Images/dfc16da28ba98ab468d8c311b431b8c2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T09:39:05.383

为了避免创建毫无意义的 JPanel（只是为了从中检索背景颜色），请使用包含默认面板背景颜色的 UI 常量：

```
Color bg = UIManager.getColor ( "Panel.background" ); 
```

这将返回具有不同 UI 设置的不同颜色。

使用各种常量，您还可以通过这种方式检索许多其他默认值（不仅仅是颜色）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T08:16:55.930

原始背景颜色为 RGB(238,238,238) 或 Hex EEEEEE

**编辑**：正如@GuillaumePolet 指出的那样，并非所有平台都是这种情况 - 所以最安全的方法是在您首次创建`JPanel`使用代码时，如下所示：

```
 JPanel jp = new JPanel();

    Color bg = jp.getBackground();

    int r = bg.getRed();
    int g = bg.getGreen();
    int b = bg.getBlue();

    System.out.println(r);
    System.out.println(g);
    System.out.println(b); 
```

这就是我得到 238,238,238 的方式，我在 Java 1.7 上使用 Windows

# debugging - 崩溃转储和挂起转储之间的区别？

> ID：10224038
> 
> 赞同：3
> 
> 时间：2012-04-19T08:09:21.457
> 
> 标签：debugging, windbg, sos

崩溃转储和挂起转储有什么区别？

假设如果我编写一个实用程序来在单击它时创建进程的转储，我将如何提示该实用程序来创建适当的转储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:35:08.430

不确定您的意思，它们都是应用程序/内核状态（内存）的不同细节级别的转储。应用程序是否挂起或崩溃与转储的构成无关，请参阅此[文档](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CEcQFjAF&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2Fb%2F8%2Fb%2Fb8b36faf-00f1-460f-b32b-98a20102da4e%2FMemoryDumpFileConceptsandProcesses.doc&ei=dsyPT9j8AYav8gPO_piEBA&usg=AFQjCNFbCO3eeSS8bLexdHaxEEekZ_UwMg&sig2=xBk6hKldDr--YtTD43eFFQ)和此处[http://www.debuginfo.com/articles/easywindbg2.html#savedumps](http://www.debuginfo.com/articles/easywindbg2.html#savedumps)崩溃转储将具有的异常记录崩溃本身。

MiniDumpWriteDump：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)

不同类型的转储：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680519%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680519%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:37:32.403

转储只是该过程的快照。

崩溃情况更易于监控。应用程序引发了一些未处理的异常，并且监控进程拍摄了故障进程的快照。如果您不设置任何监控，Windows 操作系统最终会为您生成一个小型转储。

挂起情况（或 100% CPU 占用）是特定于应用程序的，因此更难以监控。如果应用程序没有响应或 CPU 密集型，可能是因为它正忙于处理一些数字？也许它适用于一些网络数据？也许应用程序 GUI 是响应式的，但是两个后台工作线程陷入僵局？

通常，我建议手动生成挂起转储。当最终用户/QA 工程师确定有问题时。可以自动执行挂起转储，但何时生成它们的决定是特定于应用程序的。

# asp.net - 放大 Telerik 图表时如何获取价值？

> ID：10224049
> 
> 赞同：2
> 
> 时间：2012-04-19T08:10:02.377
> 
> 标签：asp.net, charts, telerik, zooming

我正在尝试在 Asp.net 中使用图表缩放事件。如何从 Chart Zoom 事件 args 获取 xy 值？

首先，在用户缩放后，我将数据绑定到我的图表，根据缩放参数，由于性能问题，我想将另一个数据源绑定到图表。我该如何管理我的计划？

tnx。

# java - 将我的树对象写入 java 中的文件？

> ID：10224052
> 
> 赞同：1
> 
> 时间：2012-04-19T08:10:14.000
> 
> 标签：java, file

我想将我的类的一个对象写入文件并稍后使用它我应该怎么做？例如我想将 t4 写入文件：

```
 BinaryTree t1 = new BinaryTree( 1 );
        BinaryTree t3 = new BinaryTree( 3 );
        BinaryTree t5 = new BinaryTree( 5 );
        BinaryTree t7 = new BinaryTree( 7 );
        BinaryTree t2 = new BinaryTree( );
        BinaryTree t4 = new BinaryTree( );
        BinaryTree t6 = new BinaryTree( );
        BinaryTree t8 = new BinaryTree( );
        BinaryTree t9 = new BinaryTree( );

        t2.merge( 2, t1, t3 );
        t6.merge( 6, t5, t7 );
        t4.merge(4, t2, t6); 
```

请说出该文件的写入方式和读取方式（使用Java NeatBeans）thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:21:35.967

让您实现 Serializable 接口。然后您可以使用以下命令保存对象：

```
OutputStream file = new FileOutputStream( "tree.bin" );
OutputStream buffer = new BufferedOutputStream( file );
ObjectOutput output = new ObjectOutputStream( buffer );

output.writeObject(tree); 
```

要从文件加载，您将使用以下内容：

```
InputStream file = new FileInputStream( "quarks.ser" );
InputStream buffer = new BufferedInputStream( file );
ObjectInput input = new ObjectInputStream ( buffer );

BinaryTree tree = (BinaryTree)input.readObject(); 
```

有关更多信息，请查看以下[链接](http://www.javapractices.com/topic/TopicAction.do?Id=57)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:14:13.103

您应该阅读有关[序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)的信息。看看这里：[http ://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)

# facebook - 强制 Facebook Like Button 使用移动登录页面

> ID：10224057
> 
> 赞同：0
> 
> 时间：2012-04-19T08:10:32.047
> 
> 标签：facebook

是否可以让 Facebook Like 按钮使用 Facebook 登录页面的移动版，而不是桌面版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:51:12.803

不，这是不可能的。Facebook 将检测用户的浏览器并显示相应的登录页面。

目前，从移动设备上的“赞”按钮打开登录视图存在错误：[在移动视图中单击“赞”按钮](http://developers.facebook.com/bugs/239652176102303)（已分配但尚未修复）。我不知道是否每个移动客户端都受到它的影响。

# c# - 需要帮助在 C# 中实现多线程

> ID：10224060
> 
> 赞同：1
> 
> 时间：2012-04-19T08:10:36.897
> 
> 标签：c#, .net, multithreading

我正在制作一个应用程序，由于某种原因，当我单击一个按钮时，我必须启动一个新表单，同时在谷歌文档中创建一个新文档。我已经成功实现了上述内容，但是当应用程序忙于在谷歌文档上创建一个新文档时，新加载的表单的 UI 冻结了。我在某处读到，如果我使用多线程可以避免这种情况。所以现在我想问我是否应该创建两个线程，在其中一个线程中我应该放置用于创建新表单的代码，在另一个线程中我应该放置在 google doc 中创建文档的代码。或者我应该只在线程上创建，我应该在其中放置代码来创建新的谷歌文档，并让新的表单创建代码在主进程中？另外在已经编写的代码中实现线程的最简单方法是什么？如果可能，请提供一些参考阅读材料。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:33:29.037

你实际上有很多选择。

(1)**背景工作者。**如果您真的想要在 WinForms 中进行异步工作的最简单的编程模型，那就是这个。它通常用于执行一些异步任务并报告进度，但如果您不需要，则不必报告进度。

(2)**基于事件的异步模式。**如果您想制作一个完整的组件来执行一些异步任务，完全控制报告进度和您自己的自定义事件，那么这是一种方法。这也比 BackgroundWorker 更能帮助你理解线程。因为我是一个视觉型的人，[所以我创建了一个完整的视频演示，介绍如何使用 WinForms 做到这一点](http://www.youtube.com/watch?v=3sUZJQKuCkU)。

(3)**任务并行库。**您可以将 TPL 与 WinForms 一起使用，我[在此处写了一篇关于如何做到这一点的非常详细的博客文章](http://danderson.io/posts/writing-thread-safe-event-handlers-with-the-task-parallel-library-in-net-4-0/)。

(4)**异步和等待**。请注意，这需要 .NET 4.5、C# 5.0 和仅包含在 Visual Studio 11 中的 C# 5.0 编译器，目前仅在 BETA 中。[但是，我也有一篇关于如何做到这一点的完整博客文章](http://danderson.io/posts/async-and-await-ui-synchronization-with-c-5-net-4-5-and-winforms/)。

(5)**带线程的ISynchronizedInvoke。**这是另一种选择，[我也有一个关于](http://danderson.io/posts/using-isynchronizeinvoke-to-update-your-ui-safely-from-another-thread/).

这完全取决于您选择哪种方法。我的建议是简要地看一下每一个，然后根据你对主题的先进程度选择一种方法，或者哪种方法最能满足你的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:22:09.960

您可以使用多种技术来完成您的要求，但我会为此推荐任务并行库 (TPL) (或 a [`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx))。

创建/启动新表单的开销很小（在大多数情况下），因此我认为您应该在 UI 线程上启动表单，并在后台线程上创建 Google Doc。所以使用 TPL 你会有类似的东西（非常基本的例子）

```
// In click event.
MyForm newForm = new MyForm();
newForm.Show();

Task googleDocTask = Task.Factory.StartNew(() =>
{
    // Do your stuff with Google Docs.
    // Note you cannot access the UI thread from within this delegate.
}); 
```

有关 C# 中线程的精彩讨论，请参阅[Joseph Albahari 的线程页面](http://www.albahari.com/threading/)。

有关 TPL 的更多信息和相当完整的介绍，请参见[此处](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T08:27:27.203

只需创建一个线程。我建议使用 BackgroundWorker。他们非常直截了当。

把它放在你班级的顶部：

```
private BackgroundWorker googleDocWorker = new BackgroundWorker(); 
```

把它放在你的构造函数中：

```
googleDocWorker.DoWork += new DoWorkEventHandler(googleDocWorker_DoWork);
googleDocWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(googleDocWorker_RunWorkerCompleted); 
```

将这些方法放在您的类中：

```
void googleDocWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // You can use this to alert you that the google doc is created.
}

void googleDocWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // Create google doc here.
} 
```

调用它开始创建谷歌文档：

```
googleDocWorker.RunWorkerAsync(); 
```

现在，如果您需要将一些数据传递到 BackgroundWorker，您可以传递任何您真正想要的数据。您可以使用对象数组传入一个字符串，甚至是多个不同类型的对象。这是一个发送多个对象的示例：

```
googleDocWorker.RunWorkerAsync(new object[] { "doc name", contents }); 
```

现在，这意味着它们必须在 _DoWork 方法中处理：

```
void googleDocWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // Create google doc here.
    object[] args = (object[])e.Argument;
    String docName = (string)args[0];
    SomeClass contents = (SomeClass)args[1];
} 
```

假设，在创建文档后，您想将 URL 发送回刚刚创建的文档，您只需将其从 _DoWork 方法传回 _RunWorkerCompleted 方法：

```
void googleDocWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // Create google doc here.

    ...

    e.Result = myURL;
} 
```

在 RunWorkerCompleted 方法中获取 URL，它与 DoWork 方法几乎相同。

```
void googleDocWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // You can use this to alert you that the google doc is created.
    String docURL = (String)e.Result;
} 
```

希望有帮助！（：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:18:44.893

恕我直言。您应该只创建一个用于制作 google doc 的线程（因此您将拥有两个线程）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T08:25:19.217

最简单的方法是使用 BackgroundWorker 或使用 ThreadPool。如果您的主 UI 不关心其他任务何时完成，线程池会更简单。

# java - java编码在jsp中获取多个注释

> ID：10224063
> 
> 赞同：0
> 
> 时间：2012-04-19T08:11:05.450
> 
> 标签：java, jsp, servlets, arraylist

我只收到一条评论，并且在发布新评论时它会更新，但我想查看发布的所有评论，我错在哪里？

评论小服务程序

```
 String comment=request.getParameter("myTextarea");  //i stored myTextarea in string  comment            
   ArrayList<String> al1 = new ArrayList<String>();
    ArrayList emp_list =new ArrayList();                                     
     al1.add(comment);                     
      emp_list.add(al1);                                         
      request.setAttribute("empList",emp_list);        
      String nextJSP = "/result.jsp";//goes to result.jsp
     RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
    dispatcher.forward(request,response); 
```

结果.jsp

```
 <%
     try{
      int i=0;
      if(request.getAttribute("empList")!=null)
       {
       ArrayList al3 = (ArrayList)request.getAttribute("empList");
        Iterator itr = al3.iterator();
        while(itr.hasNext()){
        ArrayList empList = (ArrayList)itr.next();
         String newcomment="";
          try{
          newcomment=(String)empList.get(i++);
          }
         catch(Exception e){
          }   
        try{
      out.println(newcomment);// i am getting only one comment here
         }
     catch(Exception e){
     }   
     }
    }
  }//end of try block
    catch(Exception e){
   out.println(e); 
   }
   %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:41:21.737

首先，在您的 java 中，您似乎只在 中添加了一条评论`empList`，这就是为什么您只看到一条评论的原因。

假设网址看起来像`www.some.url/resource?myTextarea=somestring`......

```
String comment=request.getParameter("myTextarea"); 
//so now comment equals to "somestring"

ArrayList<String> al1 = new ArrayList<String>();
ArrayList emp_list =new ArrayList();                                     
al1.add(comment);
//now al1 equals ["somestring"]                     

emp_list.add(al1);
//now emp_list equals [["somestring"]] 
```

看，您在 emp_list 中只有一条评论，因此您将在您的 jsp 中获得一条评论。

再者，你用jsp写的代码很奇怪，你为什么有 `newcomment=(String)empList.get(i++);`？我很确定你很快就会用这段代码得到一个 OutOfIndexException ，除非你有一些特殊的数据结构来存储评论。现在看起来你的数据结构有一个列表列表，列表中的每个列表都包含一个这样的评论？ `[["comment1"], ["comment2"], ["comment3"], ...]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:19:41.833

你不使用jstl是错误的:)

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<c:forEach items = "${empList}" var = "comment">
  <c:out value = "${comment}"/>
</c:forEach> 
```

尽管我可以看到我的代码在您的示例中不起作用，但我的问题是，为什么您在列表中有一个列表只是为了列出评论？

# javascript - 如何以一定的时间间隔刷新 EXT JS 窗口？

> ID：10224066
> 
> 赞同：0
> 
> 时间：2012-04-19T08:11:10.857
> 
> 标签：javascript, extjs

```
 var xmlhttp=new XMLHttpRequest(); 
    xmlhttp.open("GET",urls,false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML; 
    var t = xmlDoc.getElementsByTagName("FeatureCollection");
    var store = new Ext.data.SimpleStore({
                                    fields: [
                                       'vendor'                                                            
                                    ]
                                });

    var reload = function() {                 
              store.loadData(t);
            }
            setInterval(reload , 5000); 
```

现在将此数据添加到 Ext Js 窗口：

```
var window =  new Ext.Window({
                    title: "",
                    width: 200,
                    height:200,
                    layout: "fit",
                    collapsible: true,
                    autoScroll:true,
                    maximizable: true,
                    items: [
                        {
                                id:'legend-panel', 
                                xtype: "grid",
                                ref: "capsGrid", // makes the grid available as app.capsGrid
                                title: "Sites",
                                region: "north",
                                height: 100,
                                viewConfig: {forceFit: true},
                                store: store,
                                columns: [
                                        {header: 'Vendor', width: 200, sortable: true, dataIndex: 'vendor'}                                         
                                    ]
                            }
                        ]
                }); 
```

现在，我将如何只刷新窗口而不是在特定时间间隔页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:17:31.497

试试这个：

```
var reload = function() {
  store.loadData(t);
}
setInterval(reload, 1000); 
```

# java - 从 EXE 和 DLL 访问 Singleton 对象中的成员变量

> ID：10224067
> 
> 赞同：2
> 
> 时间：2012-04-19T08:11:28.897
> 
> 标签：java, c++, logging, mfc, singleton

我正在为我的 exe 和 dll 编写具有日志记录级别的单例记录器。

记录器.h：

```
#define LOG CLogger::GetInstance().Log
#define LOG_PATH _T(".\\LogFile\\Logger.log")
enum eLogLevel { NONE=0, ERR, WARNING, USER, SYSTEM, DEVELOPER };  

class CLogger  
{
public:
    //Construcor & Destructor
                    CLogger();
    virtual             ~CLogger();
    //Singleton 
    static CLogger&     GetInstance();          
    //For logging level preference
    //Example: WARNING -> Log only ERR & WARNING messages
    //Default = NONE
    virtual void        SetLogLevel(eLogLevel eLevel);  
    //Logging
    virtual void        Log(eLogLevel eLevelType, CString szText);  

protected:
    //Open & Close the log after used
    virtual void        CloseLog();
    virtual BOOL        OpenLog();

    CStdioFile      m_File;
    CString         m_szFile;
    eLogLevel       m_eLevel;
    BOOL            m_bFileOpened;
}; 
```

思路是，EXE项目需要包含Logger.cpp & Logger.h，负责设置日志级别。

同时，DLL工程需要包含Logger.cpp & Logger.h，但不需要设置日志级别，它会跟随EXE工程的日志级别。

预计 EXE 和 DLL 都能够将任何内容写入同一个日志文件。

现在的结果是，我需要向 DLL 项目请求 SetLogLevel() 以便 DLL 项目能够写入日志文件。

任何人都可以在上面的 Logger.h 上发现问题吗？单例不会共享一个对象实例，包括成员变量，因为 EXE 和 DLL 将在同一个进程/线程上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:01:40.557

为了在 VC++ 中跨 DLL 边界共享实体（函数、对象等），您需要`__declspec(dllexport)`在导出它们`__declspec(dllimport)`的 DLL 和导入它们的 DLL 中声明它们。这通常是通过某个地方的条件定义宏来完成的：编译和链接导出器时，您将`LOGGER_DLL`在编译器选项的行中添加预处理器定义，并在 DLL 的通用头文件中添加，例如：

```
#ifdef LOGGER_DLL
#define LOGGER_EXPORTS __declspec(dllexport)
#else
#define LOGGER_EXPORTS __declspec(dllimport)
#endif 
```

然后在类定义中：

```
class LOGGER_EXPORTS Logger
{
    // ...
}; 
```

（还有另外两个简短的评论：`C`名称的单个大写前缀是 Microsoft 约定，表示该类是在 Microsoft 库中定义的，不应在用户代码中使用；这种前缀的目的之一是避免名称冲突。并且 C++ 中的布尔类型是拼写`bool`的，而不是`BOOL`. `BOOL`是，我认为，微软宏，在该语言具有布尔类型之前的日子提供，并且仅出于向后兼容性的原因而存在。它应该'不能在新代码中使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:55:59.240

对于本例中的单例对象，它将在 EXE 和 DLL 中实例化两次。

它们都是在不同的内存地址中创建的，因此它们共享不同的成员变量。它表明它们都存在而不知道彼此。

现在，解决这个问题大概有两种方法：
1）通过将Logger类包装到DLL中来实例化唯一的ONE记录器
2）EXE和DLL分别创建实例，他们需要在EXE和DLL设置日志级别

# java - 在 JAVA 中转换和比较两种日期格式

> ID：10224074
> 
> 赞同：4
> 
> 时间：2012-04-19T08:12:29.233
> 
> 标签：java, date, simpledateformat

在我的应用程序中，我有两种不同类型的日期格式。一个给出**Thu Apr 19 12:10:26 GMT+05:30 2012**作为输出，另一个给出**1334654035000**作为输出。

我可以将第一种格式更改为第二种类型（只有数字）吗？原因是，我必须比较两个不同的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:14:57.380

如果要比较两个格式不同的日期，

*   使用适当的日期格式解析第一个字符串以将字符串转换为日期
*   使用适当的日期格式解析第二个字符串以将字符串转换为日期
*   比较日期对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:16:43.637

使用 java.text.SimpleDateFormat 的 parse 方法应该做你想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:17:52.920

是的。你可以做到这一点。如果我们假设日期在同一时区，则使用 SimpleDateFormat 类将日期转换为 Calendar，然后调用 Calendar 对象上的方法来比较日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T06:10:15.987

解析日期并比较日期

```
 if(!sToDate[Integer.valueOf(sChecked[i])].equalsIgnoreCase("")&&!sFromDate[Integer.valueOf(sChecked[i])].equalsIgnoreCase("")) 
```

if(sToDate[Integer.parseInt(sChecked[i])].compareTo(sFromDate[Integer.parseInt(sChecked[i])])<0)

# jquery - Insert text at the cursor position to a CKEditor using jQuery

> ID：10224075
> 
> 赞同：31
> 
> 时间：2012-04-19T08:12:29.380
> 
> 标签：jquery, ckeditor

I'm trying to add a piece of text to an existing CKEditor using jQuery. This needs to be done when a link is clicked.

I tried this solution, which works for regular textareas, but not for CKEditor:

```
jQuery.fn.extend({
  insertAtCaret: function(myValue) {
    return this.each(function(i) {
      if (document.selection) {
        //For browsers like Internet Explorer
        this.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
        this.focus();
      } else if (this.selectionStart || this.selectionStart == '0') {
        //For browsers like Firefox and Webkit based
        var startPos = this.selectionStart;
        var endPos = this.selectionEnd;
        var scrollTop = this.scrollTop;
        this.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);
        this.focus();
        this.selectionStart = startPos + myValue.length;
        this.selectionEnd = startPos + myValue.length;
        this.scrollTop = scrollTop;
      } else {
        this.value += myValue;
        this.focus();
      }
    })
  }
}); 
```

There is also an option to use: `$('#editor').val()`, but this appends the text at the end or the beginning and not at the cursor.

So, is there a way to accomplish this?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-19T08:22:56.520

你应该使用这个

```
$.fn.insertAtCaret = function (myValue) {
    myValue = myValue.trim();
    CKEDITOR.instances['idofeditor'].insertText(myValue);
}; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T08:18:05.743

CKEditor 本身具有插入文本的机制。如果您`textarea`直接更新，您实际上绕过了 CKEditor 必须跟踪输入的文本的一些机制。尝试这个：

```
CKEDITOR.instances.IDofEditor.insertText('some text here'); 
```

[更多信息在这里](http://cksource.com/forums/viewtopic.php?t=15555)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-14T16:41:45.590

我想我应该提一下，如果您使用 ckeditor 的 jQuery 适配器，您可以使用 jQuery 插入文本，这样看起来更干净一些。

```
$('textarea#id_body').ckeditor().editor.insertText('some text here'); 
```

或者如果您要插入 HTML

```
$('textarea#id_body').ckeditor().editor.insertHtml('<a href="#">text</a>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T13:39:06.633

我需要类似的东西。我正在使用 CKEditor 3.6（由于预算）、JQuery 和 Bootstrap。我想要一个按钮列表，当单击 CKeditor 的主体时会插入一些文本。我从我的数据元素创建了一个按钮列表，然后添加了一个点击事件。我的对象是一个带有数据属性的输入按钮，我读取该属性以获取要粘贴的 val。

.insertText("texthere") 将为您提供将值放在光标所在位置所需的操作。

```
$(function () {
  $(".dataelement").click(function () {
          InsertDataElement($(this).data("valtxt"));
      });
});
function InsertDataElement(valtxt) {
    CKEDITOR.instances['FullDescription'].insertText(valtxt);
}
```

# java - Setting source and data path in java

> ID：10224076
> 
> 赞同：0
> 
> 时间：2012-04-19T08:12:30.000
> 
> 标签：java, design-patterns, path, filenotfoundexception

I am little bit new in java. I have java source in workspace /src.I created a directory /data in the same project.It means /project/src and /project/data are two directory. I would like to put same directory rather than long absolute path. How would i do it?

```
BufferedReader buffR1 = new BufferedReader(new FileReader(new File("../data/rural.train.txt"))); 
```

I did like this. But this is not working. I am finding file not found exception.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:14:32.797

创建运行配置后，对其进行编辑，然后在参数下，将当前目录设置为您的数据文件夹。那么你甚至不需要`..`在你的路径开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:18:16.240

两个选择：

1.  使路径成为程序中传递的参数
2.  在您的类路径中添加 /data 目录，然后您不再需要指定路径。

# .htaccess - 在 .htaccess 中重写 hashbang

> ID：10224083
> 
> 赞同：0
> 
> 时间：2012-04-19T08:12:50.847
> 
> 标签：.htaccess, mod-rewrite

我有这样的网址

[http://www.mysite.com/one/two/nearly_anything#!0lJ_PghzRwHtOyL3BkSouCFVh61mV_I0ZUPSipZDKPFW9xc](http://www.mysite.com/one/two/nearly_anything#!0lJ_PghzRwHtOyL3BkSouCFVh61mV_I0ZUPSipZDKPFW9xc)

我需要通过 .htaccess 文件从中获取 hasbang 以便将其重写为

[http://www.mysite.com/index.php?dbid=0lJ_PghzRwHtOyL3BkSouCFVh61mV_I0ZUPSipZDKPFW9xc](http://www.mysite.com/index.php?dbid=0lJ_PghzRwHtOyL3BkSouCFVh61mV_I0ZUPSipZDKPFW9xc)

这就是我的 .htaccess 中的内容：

```
RewriteRule one/two/[a-zA-ZÄÜÖäüö\-\+]+#!(.*)$ /index.php?dbid=$1 [QSA] 
```

如果我调用第一个 URL，我会得到 404 未找到。当我将编码的 dbid 放入 index.php?dbid=0lJ_PghzRwHtOyL3BkSouCFVh61mV_I0ZUPSipZDKPFW9xc 的直接调用中时，脚本会按预期运行。因此错误必须在我的 .htaccess 重写中，但我看不到它...... :-(

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:15:00.623

片段不发送到服务器；它必须由 JavaScript 等客户端语言处理。

# stanford-nlp - 是否有从斯坦福解析器获取每句处理时间的选项？

> ID：10224085
> 
> 赞同：3
> 
> 时间：2012-04-19T08:13:02.013
> 
> 标签：stanford-nlp

我目前正在使用以下命令解析阿拉伯语文本：

```
java -mx1500m edu.stanford.nlp.parser.lexparser.LexicalizedParser \
  -cp "$scriptdir/*:" -sentences newline -outputFormat "penn,wordsAndTags" \
  edu/stanford/nlp/models/lexparser/arabicFactored.ser.gz $FILE 
```

这将输出标记、标签和解析树，以及与此输出类似的处理速度的全局概览：

```
Parsed 280 words in 10 sentences (1.95 wds/sec; 0.07 sents/sec). 
```

是否有选项或命令行开关来触发*每个句子*级别的处理时间输出？还是我必须自己将其添加到代码中？

在常见问题解答和斯坦福 NLP 网站上都没有找到这样的选项，所以如果有人能澄清这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:44:31.367

不，目前没有。您需要自己添加代码。

# deployment - What cloud platform supports playframework 2.x deployments?

> ID：10224087
> 
> 赞同：4
> 
> 时间：2012-04-19T08:13:02.963
> 
> 标签：deployment, playframework, cloud, playframework-2.0, cloud-hosting

I know many platforms that currently support play 1.x but did any one have tried any that support play 2.x.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T10:48:22.627

我会推荐 Heroku 作为 The One（大写字母）。他们很棒，并且为 Play 提供了出色的支持。

**但！**我们知道（除非我上周错过了什么）他们仍然不支持 WebSockets，这可以说是 Play 2.0 的主要改进之一。因此，如果您的应用程序需要 WebSocket，请使用 Amazon EC2。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T08:48:40.300

据我所知，你有：

*   Heroku
*   云铸造

编辑：我将添加一些有关 Play 的信息！云平台。[Zenexity](http://zenexity.com)是 Play 背后的公司，它为 Play 的 1.x 版本提供了一个云平台！:[游戏应用程序](http://www.playapps.net/)。他们最近宣布（2012 年 5 月 1 日）他们将关闭该平台。但他们建议所有游戏应用都迁移到[Heroku](http://heroku.com)。以及 1.x 和 2.x 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T06:14:55.273

开班

[https://github.com/opensas/play2-openshift-quickstart](https://github.com/opensas/play2-openshift-quickstart)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T21:17:14.817

还有[dotCloud](https://github.com/mchv/play2-on-dotcloud)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-04T11:39:10.380

Jelastic 是一股清新的空气。

这是一个教程：[http ://blog.jelastic.com/2013/07/02/play-2-web-application-deployment-tutorial/](http://blog.jelastic.com/2013/07/02/play-2-web-application-deployment-tutorial/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T01:17:52.393

我会推荐 openshift，这是一个截屏视频，展示了如何做到这一点 [http://playlatam.wordpress.com/2012/05/21/deploying-play-framework-2-apps-with-java-and-scala-to-openshift /](http://playlatam.wordpress.com/2012/05/21/deploying-play-framework-2-apps-with-java-and-scala-to-openshift/)

和 red hat 的一篇文章

[https://openshift.redhat.com/community/blogs/supporting-play-framework-on-openshift-with-the-diy-application-type](https://openshift.redhat.com/community/blogs/supporting-play-framework-on-openshift-with-the-diy-application-type)

# android - Handling unix signals in Android

> ID：10224088
> 
> 赞同：6
> 
> 时间：2012-04-19T08:13:06.853
> 
> 标签：android, unix, signals, pipe

I am writing a Java application that talks to a C++ application using named pipes. When the C++ application dies, the Java gets SIGPIPE and the Java application dies.

On C/C++ I know how to catch that signal and ignore it. Is it possible to do something similar on Android/Java?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:51:42.730

这似乎是不可能的。可用的最佳解决方案是添加一个关闭挂钩并“优雅地”重新启动应用程序，如下所述：

**编辑：**

我需要这个，因为（当时）我有 JNI 代码，我在上面打开了一个 FD 和 r/w 到它。FD 被打开到一个命名的套接字（一个 Unix 管道），当管道的远程端（在我的例子中是一个守护进程，或 Android C/服务）关闭连接（或死亡）时，你的一方将收到一个信号。这并不总是很好。恕我直言，最好的处理方法应该是使用来自好的旧纯 C 代码的信号处理程序，然后将其吞下（否则 - 您应该通知应用程序的 Java 端）。

~~http://stackoverflow.com/questions/2541597/how-to-gracefully-handle-the-sigkill-signal-in-java~~

# qt - 如何在 Qt 中即时翻译语言

> ID：10224101
> 
> 赞同：4
> 
> 时间：2012-04-19T08:14:11.653
> 
> 标签：qt, qt4, symbian

我正在使用 Translator 和 linguist 在 Qt symbain 中的应用程序中翻译语言，但我想即时执行此操作（在运行时），我尝试了开发人员网络提供的解决方案，但它不适用于我

```
 #include "languagetranslator.h"
 #include "constants.h"
 #include <QSettings>
 #include <HelperClasses/Strings.h>
 #include <QTranslator>
#include <AppStatus/appstatus.h>
#include <QApplication>

QTranslator* LanguageTranslator::current = 0;

LanguageTranslator::LanguageTranslator(int& argc, char* argv[]) : QApplication(argc, argv)
{

}

LanguageTranslator::~LanguageTranslator()
{
}

void LanguageTranslator::loadTranslation()
{
    QString language;
    language = AppStatus::getCurrentLanguage();
    loadTranslation(language);
    qDebug("language from laodtranslation = %s",language.toLatin1().data());
    //qDebug(language.toLatin1());
}

void LanguageTranslator::loadTranslation(QString language)
{
    //QApplication app;
    QTranslator* translator = new QTranslator(instance());
    translator->load(language);
    installTranslator(&translator);

    //exec();

} 
```

它仅在我在 main.cpp 中声明并重新启动应用程序时才有效，我也在选择新语言后调用此方法是否有任何我遗漏的东西。我正在关注以下链接[http://www.qtcentre.org/wiki/index.php?title=Dynamic_translation_in_Qt4_applications](http://www.qtcentre.org/wiki/index.php?title=Dynamic_translation_in_Qt4_applications)

设置新语言时是否必须调用 void MainWindow::changeEvent(QEvent *event)

这是我在 mainWindow 中声明的 changeEvent() 方法，我正在调用 setLanguage();

```
void MainWindow::changeEvent(QEvent *event)
{
    if(event->type() == QEvent::LanguageChange)
    {
        ui->retranslateUi(this);
       // retranslate();
        setLanguage();
    }
    QMainWindow::changeEvent(event);
}

void MainWindow::setLanguage()
{
    QString myLanguage;
    int iIndex =  AppStatus::getSettingsData().at(3);
    switch(iIndex)
    {
    case ENGLISH:
        myLanguage = "language_en";
        break;
    case SPANISH:
        myLanguage = "language_es";
        break;
    }
    AppStatus::saveCurrentLanguage(myLanguage);

LanguageTranslator::loadTranslation(myLanguage);
} 
```

从 setLangauge() 我打电话给 languageTranslator() 有什么我遗漏的吗？这是我的主要课程

```
int main(int argc, char *argv[])
{

    LanguageTranslator app(argc, argv);
    QString lang = AppStatus::getCurrentLanguage();
    app.installTranslator(&translator);
    MainWindow mainWindow;
    mainWindow.setOrientation(MainWindow::ScreenOrientationLockPortrait);

    //About mainWindow;

#if defined(Q_OS_SYMBIAN)
    mainWindow.showMaximized();
#else
    mainWindow.show();

#endif

   // mainWindow.showFullScreen();
    app.connect(&app,SIGNAL(lastWindowClosed()),&app,SLOT(quit()));
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T08:46:00.103

您提供的链接指出：

> 但是，基本原则是在每个必须知道动态语言更改的小部件中覆盖 QWidget::changeEvent()。

这是必需的，因为`installTranslator()`将创建一个更改事件，该事件将发送到每个小部件。这意味着，如果您希望重新翻译 MainWindow，您必须执行以下操作：

```
void MainWindow::changeEvent(QEvent* event)
{
    if (event->type() == QEvent::LanguageChange)
    {
        // retranslate designer form (single inheritance approach)
        ui.retranslateUi(this);
    }

    // remember to call base class implementation
    QMainWindow::changeEvent(event);
} 
```

您必须为每个具有可翻译 GUI 的小部件执行此操作

[编辑 - 添加评论，因为它是问题的实际答案]

Don't call setLanguage() from within changeEvent()! You should call setLanguage() from wherever you can change the language. setLanguage() calls LanguageTranslator::loadTranslation() which calls QApplication::installTranslator() which creates a LanguageChange Event which is then caught in MainWindow::changeEvent

# c# - 由于带有关键字“using”的未知命名空间，运行转换失败

> ID：10224104
> 
> 赞同：4
> 
> 时间：2012-04-19T08:14:13.093
> 
> 标签：c#, entity-framework, t4, edmx, csdl

我想在我的 *.csdl 中使用“Using”元素来导入其他命名空间，并使用 POCO 来转换对象。

我使用的 CSDL 看起来像这样：

```
<Schema xmlns="http://schemas.microsoft.com/ado/2008/09/edm"
          xmlns:cg="http://schemas.microsoft.com/ado/2006/04/codegeneration"
          xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator"
          Namespace="BooksModel" Alias="Self">

    <Using Namespace="BooksModel.Extended" Alias="BMExt" />

    <EntityContainer Name="BooksContainer" >
      <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
    </EntityContainer>

    <EntityType Name="Publisher">
      <Key>
        <PropertyRef Name="Id" />
      </Key>
      <Property Type="Int32" Name="Id" Nullable="false" />
      <Property Type="String" Name="Name" Nullable="false" />
      <Property Type="BMExt.Address" Name="Address" Nullable="false" />
    </EntityType>

</Schema> 
```

(http://msdn.microsoft.com/en-us/library/bb738545.aspx)

但是，当我使用模板 (POCO) 来转换我的 CSDL 时，运行工具会引发转换错误：

> 运行转换：没有遇到“BooksModel.Extended”命名空间的架构。确保命名空间正确或指定了定义命名空间的架构。
> 
> 运行转换：未知命名空间或别名 (BooksModel.Extended)。

我像这样加载我的 CSDL：

```
var inputFile = @"CSDL_NAME.csdl";
var ItemCollection = loader.CreateEdmItemCollection(inputFile); 
```

如何修改模板以包含未知名称空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:16:10.147

错误背后的问题是您没有加载 EdmItemCollection 中的其他 CSDL 文件。解决方案是将带有必要 CSDL 文件（包括具有导入命名空间的文件）的路径的 String[] 加载到 EdmItemCollection。

在代码中，它看起来像这样：

```
List<string> lstCsdlPaths = new List<string>();
lstCsdlPaths.Add(@"path\CSDLBase.csdl");
lstCsdlPaths.Add(@"path\CSDLImports.csdl");
var ItemCollection = new EdmItemCollection(lstCsdlPaths.ToArray()); 
```

# android - 使用 getChildAt 的 Android 焦点

> ID：10224117
> 
> 赞同：0
> 
> 时间：2012-04-19T08:15:17.473
> 
> 标签：android, listview, android-edittext

我正面临 listView、editText 和 adjustResize 的问题。我试图用一个侦听器来解决它，该侦听器检测软键盘何时弹出，然后我做焦点。

但问题是当我尝试用getChildAt聚焦我的listView的editText时，不需要滚动也没关系，但是如果有滚动条，我想聚焦的editText不再在listView的子列表中.

我读了一些关于 getChild 函数的东西，它只保留显示的内容。所以我尝试使用 setSelection() 移动 listView 的可见部分，但我的 editText 仍然不在 getChild 列表中。

这是活动的一些代码：

```
currentListView.setSelection(currentListView.getChildCount());

                    for ( int i = 0; i < currentListView.getChildCount(); i ++){
                        System.out.println(currentListView.getChildAt(i)+"");
                    } 
```

这当然是最有趣的部分，我认为我缺少 android 知识。但当然你可以要求更多的解释或代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:32:31.793

```
@Override
public void onItemClick(AdapterView<?> adapter, View v, int pos, long id) {
    // TODO Auto-generated method stub
    // play with items clicked .... u will get position of item in pos
} 
```

使用列表视图的项目单击事件，例如，

```
listView.setOnItemClickListener(this); 
```

您可以使用在此事件中点击的您的项目。并且还可以在int pos中获取被点击的item的位置。

# c# - 通过 MemberExpression 获取属性类型

> ID：10224119
> 
> 赞同：18
> 
> 时间：2012-04-19T08:15:25.237
> 
> 标签：c#, c#-4.0, properties, expression

[我在这里](https://stackoverflow.com/questions/10222783/get-property-name-and-type-by-pass-it-directly)问类似的问题 ，假设这种类型：

```
 public class Product {

public string Name { get; set; }
public string Title { get; set; }
public string Category { get; set; }
public bool IsAllowed { get; set; }

} 
```

而这个使用`MemberExpression`：

```
public class HelperClass<T> {

    public static void Property<TProp>(Expression<Func<T, TProp>> expression) {

        var body = expression.Body as MemberExpression;

        if(body == null) throw new ArgumentException("'expression' should be a member expression");

        string propName = body.Member.Name;
        Type proptype = null;

    }

} 
```

我这样使用它：

```
HelperClass<Product>.Property(p => p.IsAllowed); 
```

在`HelperClass`我只需要属性名称（在本例中`IsAllowed`）和属性类型（在本例中`Boolean`）所以我可以获取属性名称但我无法获取属性类型。我在调试中看到属性类型如下图所示：

![在此处输入图像描述](../Images/d7143658f5ef513b59043246c49673fe.png)

那么您对获取属性类型有什么建议？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-19T08:20:35.680

尝试投射`body.Member`到`PropertyInfo`

```
public class HelperClass<T>
{
    public static void Property<TProp>(Expression<Func<T, TProp>> expression)
    {
        var body = expression.Body as MemberExpression;

        if (body == null)
        {
            throw new ArgumentException("'expression' should be a member expression");
        }

        var propertyInfo = (PropertyInfo)body.Member;

        var propertyType = propertyInfo.PropertyType;
        var propertyName = propertyInfo.Name;
    }
} 
```

# javascript - 请求后是否可以在下一个代码行中获得 Ajax 响应？

> ID：10224120
> 
> 赞同：0
> 
> 时间：2012-04-19T08:15:27.347
> 
> 标签：javascript, ajax

少年的问题，我知道。但是有没有办法在函数中间进行 Ajax 调用，然后在 The Same Function 中处理响应？

没有任何简单的解决方案，但如果你能提出任何复杂的解决方案，那将是非常好的。

代码示例：

```
function getSomeAjax(){ 
    var params = prepareRequestParams();
    //do some ajax magic here and get ajaxResponseData
    return ajaxResponseData;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:17:39.377

并非没有摆脱 Ajax 中的 A。您可以使用同步请求而不是异步请求（将第三个参数设置为[`xhr.open()`](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)to `false`），但这会锁定所有 JS 处理，直到响应返回，所以这是一个糟糕的主意。

只需使用回调方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:17:50.313

使用回调函数：

```
function test(){
    //ajaxcall here, with a callback function to callback()
}

function callback(){
    // do the thing you want here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:21:37.223

您没有提到是否要使用同步。或同步。打电话。
使用异步。可能导致您在尝试返回 ajaxReponseData 后会从服务器获得答案，因此使用同步。打电话是最简单的方法。

当然，我必须警告你，同步。调用 Ajax 会导致客户端浏览器在等待应答时冻结，因此如果您认为必须使用同步，则应重新考虑设计。版本。

# php - 如何在 Symfony 中获取所有会话数据？

> ID：10224121
> 
> 赞同：1
> 
> 时间：2012-04-19T08:15:41.000
> 
> 标签：php, session, symfony1, symfony-1.4

如何在 Symfony 中获取所有会话数据？

是`$this->getUser()->getAttributeHolder()`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:29:47.460

试一试：

```
$this->getUser()->getAttributeHolder()->getAll(); 
```

参考：[sfUser.class.php](https://github.com/FriendsOfSymfony1/symfony1/blob/master/lib/user/sfUser.class.php#L268) & [sfNamespacedParameterHolder.class.php](https://github.com/FriendsOfSymfony1/symfony1/blob/master/lib/util/sfNamespacedParameterHolder.class.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:18:52.100

所有会话变量的默认命名空间是 'symfony/user/sfUser/attributes'。您可以像这样获取所有会话数据：

```
$this->getUser()->getAttributeHolder()->getAll('symfony/user/sfUser/attributes'); 
```

# java - Java - getManifest() 问题：不是第一个条目

> ID：10224123
> 
> 赞同：1
> 
> 时间：2012-04-19T08:15:45.283
> 
> 标签：java, jar, manifest, manifest.mf

我想以编程方式在java中生成一个jar文件。当输入 jar 文件没有被混淆时，这很有效。当我在上面使用混淆器时，第一个条目不再是清单，所以我无法生成新文件......

这是我的代码：

```
JarInputStream input = new JarInputStream(getClass().getResourceAsStream("/obfuscated_jar.jar"));
JarOutputStream output = new JarOutputStream(new FileOutputStream("generated_jar.jar"), input.getManifest()); 
```

该行`input.getManifest()`返回 null 因为清单不在首位。

我已经对其进行了一些搜索，它看起来是一个已知问题`JarInputStream`。所以这是我的问题：是否有可能解决它？比如写我自己的 getManifest 方法之类的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:29:16.947

最后，我找到了一种方法。

我将文件保存`MANIFEST.MF`到我的主 jar 中并使用该代码替换`input.getManifest()`

```
Manifest mf = new Manifest();
mf.read(getClass().getResourceAsStream("/lib/manifest.mf")); 
```

在这种情况下，我提取了`manifest.mf`from`obfuscated_jar.jar`并将其粘贴到我的主 jar 文件的 lib 文件夹中。

这可能不是最好的方法，但它有效！

我希望这可以帮助某人。

# r - R中的变量和函数（ ls ）的同名

> ID：10224126
> 
> 赞同：1
> 
> 时间：2012-04-19T08:15:52.000
> 
> 标签：r

偶然我创建了一个名为 ls 的变量，我使用 ls() 发现了它。所以存在一个函数 ls() 和一个同名的变量。我不知道它是什么类型的变量，也不知道内容，因为所有尝试都未能访问该变量。

```
ls 
```

返回 ls() 函数的主体。

```
get("ls") 
```

get(ls) 中返回错误：第一个参数无效

```
get("ls", mode="numeric") 
```

找不到模式“数字”的对象“ls”

```
get("ls", mode=!"function") 
```

不是一个有效的论点。那么如何访问变量呢？我也尝试了 class(ls) 和 str(ls) 但都将 ls 称为函数。

我找不到正确的问题。但我确信我以前读过这方面的内容。因此，如果这是重复的帖子，我很抱歉。帮助和链接将不胜感激。

编辑：输出`dput(ls()[grep("^ls$", ls())])`是：

```
"ls" 
```

编辑：输出`dput(ls())`是：

```
c("bplo.anno", "c", "combinations.formula", "combo.form", "df", "df.group.unique", "df.test", "dir.work", "form.compl", "fun.boot.lm.stepAIC.4", "fun.boot.lm.stepAIC.5", "fun.CoerceListOfVectorToMatrix", "fun.data.preparation", "fun.dcor.DataFrame", "fun.expand.complete.interaction", "fun.g.ellipse.orig", "fun.K_fold", "fun.lappend", "fun.lm.subset", "fun.lm_AIC", "fun.lst.powerset", "fun.MaxToMinModel.adjrsq", "fun.MaxToMinModel.rsq", "fun.plot.circle", "fun.results", "fun.rs.dcor", "fun.vectorcoerce", "group", "height", "i", "j", "k", "ls", "ls.boot", "ls1", "lst.boot.result", "oldwd", "regressor.names", "response.name", "result.df", "rs.dcor", "source.filename", "tbl.bt", "tbl.nm") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:40:08.087

一种可能性是您复制了该功能`ls()`，即

```
ls = ls 
```

这会重现您的“问题”所以

```
get("ls") 
```

返回一个函数。您会收到相同的错误消息：

```
R> get("ls", mode="numeric")
Error in get("ls", mode = "numeric") : 
  object 'ls' of mode 'numeric' was not found
R> get("ls", mode=!"function")
Error in !"function" : invalid argument type 
```

并且`dput`给出了相同的结果：

```
R> dput(ls()[grep("^ls$", ls())]) 
"ls" 
```

# security - “openssl 编程介绍。” 文章。过期证书

> ID：10224127
> 
> 赞同：4
> 
> 时间：2012-04-19T08:15:52.933
> 
> 标签：security, openssl, ssl-certificate, x509

我是 openSSL 库和 PKI 的新手。我对 openSSL 专家有一个简单的问题。

有谁知道如何在 Eric Rescorla 撰写的本文“OpenSSL 编程简介（第一部分/第二部分）”中为代码示例创建证书

www.rtfm.com/openssl-examples/part1.pdf

www.rtfm.com/openssl-examples/part2.pdf

我从[http://www.rtfm.com/openssl-examples](http://www.rtfm.com/openssl-examples)下载了源代码 问题是证书已过期，我不知道如何创建新的根证书。

如何创建根证书？如何为客户端和服务器应用程序创建证书？我应该使用哪种加密算法？据我了解，我应该执行以下操作：

*   创建密钥对。密钥和公钥。
*   创建证书请求（p10 格式）。
*   创建自签名根证书（x509 格式）。

文章中的细节不清楚。

这就是我尝试创建证书的方式：

1）创建CA私钥和证书请求： openssl req -newkey rsa -keyout ./ca_key.pem out.pem -out ./ca_req.pem -days 1095 -passin pass:"password" -subj "some information about CA" -扩展 v3_ca

2) 创建自签名 CA 证书 openssl ca -create_serial -in ca_req.pem -out root.pem -days 1095 -passin pass:"password" -selfsign -extension v3_ca

3）生成服务器私钥并请求证书 openssl req -newkey rsa -keyout server_key.pem out server_req.pem -days 1095 -passin pass:"password" -subj "some information about server"

4）创建服务器证书（此证书不是自签名的。此证书由 CA 私钥签名） openssl ca -in server_req.pem -out server.pem -passin pass:"password"

5）生成用户私钥并请求证书 openssl req -newkey rsa -keyout user_key.pem out user_req.pem -days 1095 -passin pass:"password" -subj "some information about client"

6）创建用户证书（此证书不是自签名的。此证书由 CA 私钥签名） openssl ca -in user_req.pem -out client.pem -passin pass:"password"

我不确定这里的“rsa”算法。可能是我应该使用其他算法。

所以我有root.pem、server.pem、client.pem 我把客户端密钥和证书放到client.pem 和server.pem 一样。（与文章样本证书中的方式相同。）

但是，当我尝试使用这些新生成的证书启动服务器时，出现错误：“无法打开 DH 文件。”

当我将旧 DH 文件放入当前文件夹并启动服务器时。（dh1024.pem 是什么？）

下一步。我启动客户端并收到另一条错误消息：“证书未验证。”

错误代码为 20。x509_vfy.h 中代码 20 的说明为“无法在本地获取颁发者证书”

所有这些都意味着我错误地创建了证书。我不知道如何正确地做到这一点。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:48:24.360

这就是解决方案。可能它不是最佳的，但它有效。与问题解决方案的唯一区别是选项：“-des3 1024”

```
#!/bin/sh

alg="rsa"

ossl="openssl"

passwd="password"

#certificate autority folder
caFolder="./demoCA"

#delete old certificates, CA folder and keys 
rm -rf *.pem

rm -rf $caFolder

#create folder structure
mkdir $caFolder
mkdir "$caFolder/private"
mkdir "$caFolder/newcerts"

#generate RSA private key for CA
$ossl genrsa -out ca_key.pem 1024

#Creating certificate request:
$ossl req -new -key ca_key.pem -out ./ca_req.pem -days 1095 -passin pass:$passwd  -passout pass:$passwd \
-subj /C=RU/ST=Moscow/L=Moscow/O=company/OU=TestCAs/CN=TestCA/emailAddress=TestCA@company.ru -extensions v3_ca

cp ca_key.pem "$caFolder/private/cakey.pem" 

touch "$caFolder/index.txt"

#Create self signed CA certificate 
$ossl ca -create_serial -in ca_req.pem -out ca_cert.pem -days 1095 -passin pass:$passwd -selfsign -extensions v3_ca -notext
cp ca_cert.pem "$caFolder/cacert.pem"

#generate SERVER private key and request for certificate 
$ossl genrsa -out server_key.pem -passout pass:$passwd -des3 1024

$ossl req -new -key server_key.pem  -passin pass:$passwd \
-passout pass:$passwd -out server_req.pem -days 1095 \
-subj /C=RU/ST=Moscow/L=Moscow/O=company/OU=SSLServers/CN=localhost/emailAddress=SSLServer@company.ru  

#create SERVER certifiate (this certificate is not self signed. This certificate signed by CA private key)
$ossl ca -in server_req.pem -out server_cert.pem -passin pass:$passwd -notext

#generate RSA private key for client
$ossl genrsa -out user_key.pem -passout pass:$passwd -des3 1024

#generate request certificate for client
$ossl req -new -key user_key.pem -out user_req.pem -days 1095 \
-passin pass:$passwd -passout pass:$passwd \
-subj /C=RU/ST=Moscow/L=Moscow/O=company/OU=Clients/CN=Client/emailAddress=Client@company.ru 

#create user certifiate (this certificate is not self signed. This certificate signed by CA private key) 
$ossl ca -in user_req.pem -out user_cert.pem -passin pass:$passwd -notext

#generate  DH   param
$ossl dhparam -out dh1024.pem 1024

cat ./user_key.pem ./user_cert.pem > client.pem  

cat ./server_key.pem  ./server_cert.pem  > server.pem

cp ./ca_cert.pem root.pem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:09:09.003

错误代码为 20 “无法在本地获取颁发者证书”是因为没有 CA 证书 Present 引起的。客户端和服务器证书都需要由公共 CA 签名。

# java - mongodb中_id的长度有限制吗

> ID：10224128
> 
> 赞同：12
> 
> 时间：2012-04-19T08:15:54.230
> 
> 标签：java, mongodb

**背景：**我~~正在~~接管一个应用程序（原始工程师离开），它充当一些相对较慢的后端服务的缓存层。因为它是 RESTful 风格的 URL，所以每个 URL 都是唯一的。应用程序使用 MongoDb 作为缓存的存储，并使用哈希值作为缓存。虽然哈希码应该是相当独特的，但它不是唯一的。

**问题：**有人告诉我使用哈希码（而不是 url）的原因是因为 MongoDb 的 _id 字段有长度限制，但我找不到任何文档。我在 MongoDb 文档中只能找到“_id 字段可以是数组以外的任何内容，只要它是唯一的”。MongoDb 的 _id 字段是否有长度限制？如果是这样，限制大小是多少？

该应用程序是用 Java 编写的。哦，我是 MongoDb 的新手。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T08:27:54.963

要索引的字段的长度有一个限制，即 1024 字节。这是对索引条目大小的限制，而不是限制在 ~16MB（完整文档的最大大小）的文档字段大小。

出于性能原因，您并不真正需要索引字段的大字段值，因为与这些大值的比较要慢得多。还要记住，每个索引都维护被索引的值的副本，因此它需要大量的内存。这反过来意味着更频繁的磁盘访问以在内存中交换虚拟内存页面，这再次对性能产生负面影响。

所以是的，限制为 800 字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-01T12:34:24.950

如果您使用具有足够长的散列值的良好散列函数，散列冲突应该很少见。例如，如果你的哈希输出一个 128 位的值，你通常会在产生 2^64 个哈希后发生冲突——所以如果你每秒产生一百万个哈希，你会在大约 600,000 年后发生冲突。这对于大多数用途来说可能已经足够了。

# php - 谷歌翻译，我网站上的一些标题翻译错了。我可以“强制”一个新的翻译吗？

> ID：10224129
> 
> 赞同：2
> 
> 时间：2012-04-19T08:15:59.500
> 
> 标签：php, google-translate

我发现我网站上的一些读者使用谷歌翻译将我的网站翻译成英文。作为回应，我在我的网站上安装了谷歌翻译功能，读者可以点击英文标志，然后将网站翻译成英文。一种简单有效的方法。

但是现在我发现有些标题被翻译错了，以至于标题背后的含义完全不同。有没有什么办法可以让我用真正的标题“帮助”谷歌翻译，这样每个人都能得到正确的翻译？

我尝试在 translate.google.com 上输入我的 URL，然后我可以选择“建议更好的翻译”，但即使我输入了正确的标题翻译，它也只是一个“建议”，不确定这个翻译是否会从旧的接管。

我可以“强制”谷歌将我网站的特定部分翻译成正确的翻译吗？

真诚
- Mestika

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:19:39.907

不，您最好自己翻译网站，然后提供语言切换。

这很容易做到，腿的工作就是把所有的文字都放进去。

查看[http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html](http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html)以获得很好的教程。

# asp-classic - 在经典 ASP 中设置 HTTP_X_FORWARDED_FOR 服务器变量

> ID：10224133
> 
> 赞同：1
> 
> 时间：2012-04-19T08:16:12.400
> 
> 标签：asp-classic, fiddler, server-variables, request.servervariables

我需要在 Request.ServerVariables 集合中设置 HTTP_X_FORWARDED_FOR 值。我正在尝试使用 Fiddler（请参阅[本文](https://stackoverflow.com/questions/3211854/how-to-set-value-for-http-x-forwarded-for-manually)）。

所以我设置了一个自定义的 HTTP 请求：

```
GET http://myhost/ HTTP/1.1 http_x_forwarded_for: my.fake.ip.1, my.fake.ip.2 Host: myhost. 
```

请求被正确执行。

但是当我调试代码时， Request.ServerVariables("HTTP_X_FORWARDED_FOR") 是空的。我哪里错了？Fiddler 是正确的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:54:44.700

您发送的标头应该是`x-forwarded-for`. 这`Request.ServerVariables`正是它所说 的**服务器变量**。它不仅包含请求中发送的 http 标头。

*将标头值放入服务器变量时，IIS 会根据*标头名称为变量创建一个名称，但不是逐字逐句的名称。它将所有字符转换为大写，全部替换`-`为`_`并添加前缀`HTTP_`到标题名称以创建服务器变量名称。添加前缀以防止任意标头为其他固定服务器变量名称起别名。

# jquery - 将 EditorFor 的值添加到 Jquery 函数中的 Ajax 调用

> ID：10224135
> 
> 赞同：0
> 
> 时间：2012-04-19T08:16:30.487
> 
> 标签：jquery, asp.net-mvc-3

我有以下jquery函数：

```
function SaveMail() {
    subject = $("#MailMsgSubject").val();
    message = $("#MailMsgMessage").val();
    to = To;
    cc = Cc;

    $.ajax({
        type: "POST",
        data: JSON.stringify({ subject: subject, message: message, listTo: to, listCc: cc }),
        url: '@Url.Action("SaveNewMail", "Mail")',
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            $("#SuccesDiv").html("<b>Your message has been succesfully sent</b>");
        }
    });
} 
```

我有以下观点：

```
<div style="float: left">
    Subject :
</div>
<div style="float: left; width: 30.5%">
    @Html.TextBoxFor(modelItem => Model.Subject, new { id = "MailMsgSubject", @style = "width:99%" })
</div>
<div style="clear: both" />

<div style="float: left">
    Priority :@Html.EditorFor(modelItem => Model.Priority, new { id = "MailMsgPriority" })
</div>
<div style="float: left">
    Return Receipt :@Html.EditorFor(modelItem => Model.ReturnReceipt, new { id = "MailMsgRR" })
</div>
<div style="float: left">
    Patient :@Html.TextBoxFor(modelItem => Model.Priority, new { id = "MailMsgPatient" })
</div>
<div style="clear: both" />

<div style="float: left">
    Message :
</div>
<div style="clear: both" />

<div style="float: left; width: 35%">
    @Html.TextBoxFor(modelItem => Model.Message, new { id = "MailMsgMessage", @style = "height: 220px; width:100%" })
</div>
<p style="text-align: right">
    <input type="button" id="btnSaveMailMessage" />
</p> 
```

我的问题是将此处的 2 个复选框（优先级和回执）的值传递给我的 JQuery 函数。EditorFor 正如我最近发现的那样（艰难的方式）在接受一组 ID 时有问题 有
任何解决方案吗？提前致谢 ！

如何将这些值传递给我的 Ajax，称为控制器方法“SaveNewMail”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:06:29.073

如果您需要 SaveMail 函数（控制器）中的两个复选框值，您可以通过重构 URL 在 Url.Action 中传递它们。

```
//read the checkboxvalues 
var yourPriorityCheckBoxValue = ?
var yourSendReceiptCheckBoxValue = ?

var urlAction = urlAction + '?priority=__VAR1__&returnReceipt=__VAR2__';
urlAction = urlAction.replace('__VAR1__',yourPriorityCheckBoxValue);
urlACtion = urlAction.replace('__VAR2__',yourSendReceiptCheckBoxValue); 
```

现在，在您的控制器 SaveMail 函数中，读取查询字符串值。

希望这可以帮助。可能有比这更优雅的解决方案。

# c - 在C中的字符串数组中搜索字符串的有效方法。（不区分大小写）

> ID：10224137
> 
> 赞同：1
> 
> 时间：2012-04-19T08:16:37.257
> 
> 标签：c, string, search

我正在做一个项目（用 C 语言实现），我们需要维护一个功能或关键字列表。用户输入一个字符串。我们需要在存储的字符串数组中对该字符串进行不区分大小写的搜索。该列表目前包含 100 个字符串，并且可能会添加新字符串（一年左右 5 个字符串）。

我想知道存储这个数组并提高搜索效率的最佳方式。

当前实现的解决方案如下：（我没有编译这段代码。这只是一个代码片段。）

```
 char **applist={ asdf , adgh, eftg , egty, ...} 
    char *user_input; // this string contains user entered string
    int id;
    switch(user_input[0])
    {
     case 'a':
     case 'A':
     switch(user_input[1]
     {
     case 's':
     case 'S':
     id=0
     break;

     case 'd':
     case 'D':
     id=1
     break;
     }
     break;
     case'e':
     case'E':
     switch(user_input[1])
     {
     case 'f':
     case 'F':
     id=2
     break;

     case 'g':
     case 'G':
     id=3
     break;
     }
     break;
     }
    if(stricmp(user_input,applist[id]))
    return id;
    else 
    return -1; 
```

在实际代码中 applist 没有排序。随着新字符串被添加到 applist，我需要一种有效的方法来存储这个数组。

如果我存储按字母顺序排序的字符串，那么每次添加新字符串时，我都必须手动找到新字符串的正确位置。（不是在运行时编译代码之前将新字符串添加到 applist 中）

建议一种有效的方法来做到这一点。

**编辑：**我目前的方法导致代码更长，但效率更高。但是这段代码不容易维护。我需要的是一种数据结构，它可以以与此相同的效率进行搜索，但代码更小。您建议的数据结构不应有额外的开销。唯一的要求是高效搜索。以及一种在编译时轻松向数据结构添加元素的方法。在运行时排序不是我的要求，因为在编译时添加了新字符串（这是为了避免限制用户将任何新字符串添加到列表中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:21:01.997

一个好的数据结构可能是 TRIE：

[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

看起来这就是您已经开始在代码中实现的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:35:06.483

听起来这不是代码的性能关键位，在这种情况下，我建议使用 strcasestr 进行字符串比较。像这样存储关键字

```
char *applist[] = {"abc", "def", "geh"} 
```

然后遍历它们并像这样将用户输入与 strcasestr 进行比较

```
if (strlen(applist[id]) == strlen(user_input) && 
            strcasestr(applist[id], user_input) != NULL)
    return id; 
```

这种方法比使用复杂的数据结构更简洁和可维护。如果您确实关心性能，请首先实现此方法，进行一些时序测试，然后您可以决定是否需要更快的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:24:21.450

在搜索字符串时，您可以使用的最佳数据结构是 BST - 二进制搜索树 - [http://en.wikipedia.org/wiki/Binary_search_tree](http://en.wikipedia.org/wiki/Binary_search_tree)。最坏情况的搜索时间将仅`O(log n)`与`O(n)`使用`arrays`or时进行比较`lists`。

这是一个带有数字的示例代码（您可能必须用字符串更改它并使用`strcmp`）：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <limits.h>

typedef struct node {
        int data;
        struct node *left;
        struct node *right;
} NODE;

NODE * newnode (int data) 
{
    NODE * n = NULL;
    if (n = (NODE *) malloc (sizeof (NODE))) {
        n->data = data;
        n->right = n->left = NULL;
    } else {
        printf("Error: unable to allocate memory \n");
    }

    return n;
}

NODE * insert (NODE * head, int data)
{
    NODE * n;

    if (head == NULL)
        return newnode(data);

    if (head->data == data) {
        printf("Info: attempting to add duplicate element : %d\n", data);
        return head;
    }

    if (head->data < data)
        head->right = insert(head->right, data);
    else
        head->left = insert(head->left, data);

    return head;
}    

void inorder(NODE * node)
{
        if (node == NULL) 
                return;

        inorder(node->left);
        printf("%d ", node->data);
        inorder(node->right);
        return;
}

int lookup(NODE * head, int data)
{
    if (head == NULL)
        return 0;

    if (head->data == data)
        return 1;

    if (head->data < data)
        return lookup(head->right, data);
    else
        return lookup(head->left, data);
}

void search(NODE * head, int data)
{
    if (lookup(head, data)) {
        printf("found : %d \n", data);
    } else {
        printf("not found : %d \n", data);
    }

    return;
}

int main()
{
    int sum = 35;
    NODE * root = NULL;

    root = insert(root, 20); 
    root = insert(root, 10); 
    root = insert(root, 22); 
    root = insert(root, 23); 
    root = insert(root, 24); 
    root = insert(root, 25); 
    root = insert(root, 10); 
    root = insert(root, 20); 
    root = insert(root, 30); 
    root = insert(root, 40); 
    root = insert(root, 50); 
    root = insert(root, 60); 
    inorder(root);  printf("\n");

    search(root, 10);
    search(root, 11);
    search(root, 13);
    search(root, 14);

    return 0;
} 
```

OTOH，hast 表将为您提供恒定的搜索时间 O(1) - [http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

# objective-c - 如何正确处理 Cocoa 应用程序终止？

> ID：10224141
> 
> 赞同：2
> 
> 时间：2012-04-19T08:16:45.907
> 
> 标签：objective-c, cocoa, terminate, nsapplication, nsapplication-delegate

所以，这是我的情况：

我正在开发一个非标准的基于文档的应用程序，并且我想处理在任何文档中仍有未保存的更改时中止终止的情况。

**我最初的想法是：**

*   用户尝试退出应用程序（通过`"Quit XXXXX"`菜单项或单击`"X"`按钮）
*   有修改过的文件吗？
*   如果否：退出
*   如果是：通知用户有未修改的文档。如果他想继续，那就退出。否则取消终止。

因此，我决定以委托方式进行。

**在我的应用程序委托**中，我实现了：

*   `-windowToClose:`（触发`NSWindowWillCloseNotification`）
*   `applicationShouldTerminate:`
*   `applicationShouldTerminateAfterLastWindowClosed:`

现在，这就是我的想法。在`applicationShouldTerminate:`方法中：

*   `NSTerminateNow`如果不存在修改过的文档则返回
*   `NSTerminateCancel`如果有修改过的文档则返回。在这种情况下，弹出一个警告表或类似的东西，如果用户确认他想退出，然后调用`[NSApp terminate:nil];`

这是正确的方法吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:21:58.737

这确实是如何做到的。但是在您的`applicationShouldTerminate`实现中，您应该在此处弹出警报，`NSTerminateNow`如果用户没有单击取消则返回；`NSTerminateCancel`除此以外。以后无需手动终止应用程序。

编辑：将警报显示为工作表但将其作为模式对话框运行，调用`beginSheetModalForWindow`警报，然后调用`[NSApp runModalForWindow:alert]`. 此外，在您传递的 end 选择器中`beginSheetModalForWindow`，您需要调用`[NSApp stopModal]`以退出模态循环。

但是，在这种情况下，最好将警报作为窗口的工作表运行，然后`NSTerminateLater`在您的`applicationShouldTerminate`实现中返回。然后，在警报的最后选择器中，调用`[NSApp replyToApplicationShouldTerminate:]`. 这就是 Apple 建议您执行此操作的方式。

# android - Android 2.3 中 getSystemService() 的性能优化技巧

> ID：10224145
> 
> 赞同：2
> 
> 时间：2012-04-19T08:16:54.370
> 
> 标签：android, performance, optimization, android-service, android-2.3-gingerbread

在我的应用程序中，我经常在许多课程中访问 Android 的系统服务，所以我开始想知道访问 Android 系统服务的最佳方法是什么。

我目前将返回的系统服务存储在一个单例对象中。这是优化系统服务访问的正确方法吗？如果在应用程序中经常引用它，那么访问系统服务的最佳方法是什么？

通过单例访问 AudioManager 系统服务的示例类：

```
public enum Audio
{
    INSTANCE;

    private AudioManager mAudioManager;

    public void set(Context context)
    {
        mAudioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    }

    public AudioManager getAudioManager()
    {
        return mAudioManager;
    }
} 
```

谢谢。

# java - JNI 代码中的 LD_PRELOAD 变量

> ID：10224150
> 
> 赞同：2
> 
> 时间：2012-04-19T08:17:14.713
> 
> 标签：java, c++, java-native-interface, ld-preload

我的 java 代码通过 JNI 调用来自共享库（例如 libtest.so）的一些 C++ 代码。该代码带有一些特殊的调试符号，这些符号存在于 libdebug.so 中。当我打电话

> LD_PRELOAD=/usr/lib/libdebug.so java com.test.myMain

执行停止`Exception in thread "main" java.lang.UnsatisfiedLinkError`

因为 libdebug.so 中的符号未加载（为什么？）。

我想知道是否可以修改我的代码以便在我的 java 代码中预加载库。（当然我不想用libdebug.so编译java...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:20:08.067

[`System.load`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#load%28java.lang.String%29)可用于加载任何共享库，因此您可以尝试使用`System.load`（在加载 JNI 库之前）在静态块中加载调试库。`System.loadLibary("debug")`或者在您的 JNI 库之前尝试。

# objective-c - 从 ipad 发送 POST 通知

> ID：10224151
> 
> 赞同：0
> 
> 时间：2012-04-19T08:17:24.963
> 
> 标签：objective-c, ipad, apple-push-notifications

我开发了一个使用 APNS 的聊天工具，以便将消息发送给登录的用户。

为此，我在 c# 中使用了 MoonAPNS dll，并开发了一个 ASP Web 服务来存储在数据库中并发送通知。

我已经测试了服务器中的每种方法，直接从 IE 连接。并且工作正常。所有数据都存储在数据库中，并且通知会正确发送到注册设备。

为了在设备上使用，objective-c 中的实现工作正常。调用服务并执行 DB 中的每个步骤，与 IE 中的测试相同。设备中未收到通知除外。

任何人都知道从设备调用服务时是否有任何问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:58:51.907

冬青妈妈！

最后我发现了问题。

MoonAPNS dll 允许在通知正文中添加带有信息的额外标签。

我一直在使用此功能来添加用户的额外信息，以便在收到通知时使用。

昨天我做的最后一项更改是添加一个图标 URL 作为用户标签。此 URL 作为额外字段注入到通知中。

好吧，正如墨菲定律所说...一旦我删除了最后一分钟的更改，一切正常。

现在的问题是：APNS 会阻止带有嵌入 URL 作为字段的消息吗？

谢谢。

# sitecore - 是否可以将 sitecore 网站转移到 umbraco

> ID：10224152
> 
> 赞同：2
> 
> 时间：2012-04-19T08:17:26.380
> 
> 标签：sitecore, umbraco, transfer

我有客户在他们的网站上使用 sitecore。它过于臃肿，远远超出了他们的需要。我正在用 wordpress 重新设计他们的网站，没问题。但是他们有某些他们想要保留的“工具”设置，所以我想知道我是否可以将它们转移到 Umbraco 或任何没有高额许可费的 CMS！

sitecore 许可证将再续订一年，我试图找到一个权宜之计，这样我们就不必付费了……你能轻松地将整个网站转移到 umbraco 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:58:57.520

您可能能够获得的最好的结果是站点的原始内容，即 XML。然后，您可以通过一些 XSLT 运行它来为 Umbraco 生成输入 XML 格式。

或者，使用`wget`爬取网站并生成整个 HTML 负载，然后将其复制/粘贴回新的 CMS。听起来很痛苦，但这通常是这些迁移中需要的（我已经为几个客户求助过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:27:58.657

我做过一次。实施伙伴转换了所有模板并给了我一个 xml 输出。然后我使用[CMSImport](http://our.umbraco.org/projects/developer-tools/cmsimport)（免责声明：我是该软件包的作者，不需要使用它，但它非常方便）让 Umbraco 导入数据。

# nsuserdefaults - NSUserDefaults 在执行时总是做 IO 吗？

> ID：10224161
> 
> 赞同：1
> 
> 时间：2012-04-19T08:17:59.160
> 
> 标签：nsuserdefaults

NSUserDefaults 是持久的，对吗？如果我们关闭应用程序，它仍然存在。所以是IO。

这是否意味着我们每次做

`– setObject:forKey:`我们做IO？

每次我们这样做时，iPhone都会读写磁盘吗

```
[[NSUserDefaults standardUserDefaults] setObject:trimmedSearchLocation forKey:SEARCHNEAR]; 
```

或者那种东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:21:06.147

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)：

> 在运行时，您使用 NSUserDefaults 对象从用户的默认数据库中读取应用程序使用的默认值。NSUserDefaults 缓存信息以避免每次需要默认值时都必须打开用户的默认数据库。同步方法会定期自动调用，它使内存中的缓存与用户的默认数据库保持同步。

所以只有当`synchronize`调用你的磁盘上有 IO 时！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:30:37.940

系统会定期同步设置。您很少需要明确同步它们。

# javascript - 使用 jQuery 的相对图像源路径返回 null

> ID：10224174
> 
> 赞同：0
> 
> 时间：2012-04-19T08:19:08.660
> 
> 标签：javascript, jquery, html, image, relative-path

我有一个问题需要帮助。

我正在尝试使用 jQuery 创建鼠标悬停动画，以便当用户将鼠标悬停在图像上时，它会显示图像的突出显示版本。我知道我可以用 CSS 做到这一点，但问题是需要管理内容。所以我想编写一个与图像文件名的一部分匹配的函数，并对文件名的其余部分使用通配符。

这是 HTML：除非用户将鼠标悬停在图像上，否则该图像将始终显示。

```
<img class="imgPath" src="<?php echo PATH_SITE. 'uploads/folder/bgr_img.jpg' ?>" alt="First Image" /> 
```

当用户将鼠标悬停在图像上时，我想更改 src：

```
<img class="imgPath" src="<?php echo PATH_SITE. 'uploads/folder/hvr_image.jpg' ?>" alt="First Image" /> 
```

在 mouseout 上，我希望 src 返回到之前的状态“bgr_image.jpg”

这是我目前使用的 jQuery：

```
$(function() {
    $(".imgPath")
        .mouseover(function() { 
            var src = $(this).attr("src").match("http://domain.com/path/to/img/hvr_image.jpg");
            $(this).attr("src", src);
        })
        .mouseout(function() {
            var src = $(this).attr("src").replace("http://domain.com/path/to/img/hvr_image.jpg", "http://domain.com/path/to/img/bgr_image.jpg");
            $(this).attr("src", src);
        });
}); 
```

如果我现在将鼠标悬停在图像上，它会将 src 更改为“null”。我尝试使用不包含域的路径名，但它返回相同的值。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:24:16.347

为什么你匹配你的 src 或替换它？只需更改它：

```
$(function() { 
    $(".imgPath").hover(
        function() { $(this).attr("src", "http://domain.com/path/to/img/hvr_image.jpg"); },
        function() { $(this).attr("src", "http://domain.com/path/to/img/bgr_image.jpg"); }
    ); 
}); 
```

**编辑：**

match() 返回匹配的数组：使用 [0] 访问您的 src

```
$(function() { 
    $(".imgPath") 
        .mouseover(function() {  
            var src = $(this).attr("src").match("http://domain.com/path/to/img/hvr_image.jpg"); 
            $(this).attr("src", src[0]); 
        }) 
        .mouseout(function() { 
            var src = $(this).attr("src").replace("http://domain.com/path/to/img/hvr_image.jpg", "http://domain.com/path/to/img/bgr_image.jpg"); 
            $(this).attr("src", src); 
        }); 
}); 
```

**编辑2：**

```
<img class="imgPath" onmouseover="changeImgSrc(this, '<?php echo PATH_SITE. 'uploads/folder/hvr_image.jpg' ) ?>'" onmouseout="changeImgSrc(this, '<?php echo PATH_SITE. 'uploads/folder/bgr_image.jpg' ) ?>'" src="<?php echo PATH_SITE. 'uploads/folder/bgr_image.jpg' ?>" alt="FirstImage" />

<script>
    function changeImgSrc(img, imgsrc) {
        $(img).attr('src', imgsrc);
    }
</script> 
```

或者：

```
<img class="imgPath" onmouseover="this.src = '<?php echo PATH_SITE. 'uploads/folder/hvr_image.jpg' ) ?>'" onmouseout="this.src = '<?php echo PATH_SITE. 'uploads/folder/bgr_image.jpg' ) ?>'" src="<?php echo PATH_SITE. 'uploads/folder/bgr_image.jpg' ?>" alt="FirstImage" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:23:07.237

“match”函数返回一个布尔值，而不是一个字符串（在 mouseover 函数中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:32:07.700

此任务无需使用**match()**和**replace()**函数

**执行以下操作。**

```
$(function() {
    $(".imgPath")
        .mouseover(function() { 

            $(this).attr("src", "http://domain.com/path/to/img/bgr_image.jpg");

        })
        .mouseout(function() {
            $(this).attr("src", "http://domain.com/path/to/img/hvr_image.jpg");

        });
}); 
```

**编辑：**

假设您对多个图像有这种情况：

```
<div class="imgPath"><img src="1.jpg" /> </div>
<div class="imgPath"><img src="2.jpg"  /></div>
<div class="imgPath"><img src="3.jpg" /> </div>
<div class="imgPath"><img src="4.jpg"  /></div> 
```

所以我们可以用下面的代码来管理它：

```
$('.imgPath img').hover(
    function(){
        $('.imgPath img').each(
            function(){
                $(this).attr("src", "http://domain.com/path/to/img/bgr_image.jpg");
            });
    },
    function(){
        $('.imgPath img').each(
            function(){
              $(this).attr("src", "http://domain.com/path/to/img/hvr_image.jpg");
            });
    }

); 
```

我想这会对你有更多帮助。

谢谢。

# build - 什么是 EEAP 构建？

> ID：10224176
> 
> 赞同：1
> 
> 时间：2012-04-19T08:19:21.123
> 
> 标签：build, windows-8

我阅读了有关[Microsoft Windows 8](http://www.winextra.com/tech/software/microsoft-setting-traps-for-leakers-with-newest-tester-build-of-windows-8/)构建的信息。

什么是 EEAP 构建？EEAP 的缩写代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:45:31.980

是一个“MS签名版本”，与非签名内部测试相反，类似的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-25T20:26:08.557

生态系统参与访问计划：向 NDA 合作伙伴（OEM、IHV、ISV）发布高频率（每周？）操作系统版本

# asp.net - 查找请求是否从防火墙转发到 IIS

> ID：10224179
> 
> 赞同：2
> 
> 时间：2012-04-19T08:19:30.943
> 
> 标签：asp.net, iis

我希望这不是太奇怪的问题。我在 IIS 服务器上运行 Web 服务，可以通过端口转发从内部网络或外部（即 Internet）访问该服务。

外部：例如，如果我使用[http://my_public_domain_name](http://my_public_domain_name)从 Internet 连接到我的服务器，那么防火墙会将端口 80 转发到我的服务器。

内部：假设我的服务器在本地网络中有 ip 10.50.1.1 并且我的 PC 在 10.60.1.1 （相同的 itranet，不同的子网）中，而不是我可以通过[http://10.50.1.1](http://10.50.1.1)访问它。

当我在 IIS (ASP.NET) 中收到请求时，我需要知道该请求是由防火墙转发还是在内部到达。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:26:33.240

曾经在一个 Servlet 中，我只想从 LAN 获得管理员访问权限，所以我使用了我正在使用的内部 IP 范围，并创建了一个简单的规则，用于以管理员身份登录，检查我的 IP 是否在该范围内。

在 Java 中，我使用了 HttpServletRequest.getRemoteAddr() 和 getRemoteHost()。

查看此页面[http://www.geekpedia.com/tutorial45_How-to-get-IP-address-of-client.html](http://www.geekpedia.com/tutorial45_How-to-get-IP-address-of-client.html)，看起来等效的 ASP 是：

Request.ServerVariables("REMOTE_ADDR")

类似此页面的内容将帮助您确定它是否是私有（内部）IP 范围：[https](https://en.wikipedia.org/wiki/Private_network) ://en.wikipedia.org/wiki/Private_network （不确定它是否对 IPv6 IP 有帮助）

# applet - XUL 中的 Java 小程序

> ID：10224187
> 
> 赞同：1
> 
> 时间：2012-04-19T08:19:54.923
> 
> 标签：applet, xul, xulrunner

我有一个加载 java 小程序的 html 文件。如果直接在 Mozilla 中打开它可以完美运行，但是，当我尝试在 XUL iframe 中加载它时，什么也没有发生。

谁能告诉我可能是什么问题？

提前致谢，

PS：我正在测试的 XUL 应用程序安装在 mozilla 用户 chrome 中，html 文件 (applet.html) 内容就是这样：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
        "http://www.w3.org/TR/html4/frameset.dtd";>
      <html>
        <head>
        <meta http-equiv="Expires" content="0">
        <title>Protein Viewer (Webmol)</title>
        </head>
        <body id="PDBViewerBody" bgcolor="#ffffff" leftmargin="0"
        topmargin="0" marginwidth="0" marginheight="0">

        <applet code="proteinViewer.class"
        codebase="proteinViewer.jar";
        width="700" height="500">

        <param name="PROTEIN" value="example">
        <param name="PATH" value="">
        <param name="URL" value="http://decsai.ugr.es/~jrgonzalez/test-webmol/";>
        <param name="EXT" value="pdb">
        <param name="PDB_STRING" value="">
        </applet>
       </body>
    </html> 
```

这里是 xul

```
<?xml version="1.0"?>

<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>

<window id="main" title="My App" width="315" height="370"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <iframe id="abc" src="chrome://myapp/content/applet.html" flex="1" />

</window> 
```

我正在研究 xulrunner 1.9.2 和 Mac OS lion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:00:07.143

我发现对于 firefox >= 4 xulrunner >=2 需要使用 java applet。因此，我使用了 xulrunner 2，现在 java 小程序可以正常运行。

# ruby - 来自 Ruby 的带有内联注释的系统调用

> ID：10224191
> 
> 赞同：0
> 
> 时间：2012-04-19T08:20:08.060
> 
> 标签：ruby, bash, system, exec

我想运行带有内联注释的命令，例如

```
sleep 1 # first sync call
sleep 1 # second sync call
# etc 
```

但我不能将它传递给`exec`Ruby

```
fork{  exec "sleep 1 # first async call" }
fork{  exec "sleep 1 # second async call" } 
```

它跟踪警告。

那么我怎样才能将一些评论传递给系统调用`exec`。

*我需要它来记录*

PS：作为一个变体：`fork{ exec "sh -c 'sleep 1' # first async" }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:33:33.710

当您使用``command ...``or`exec "command ..."`时，第一个单词之后的所有内容都用作命令的参数，因此您的注释不会被解释为注释。

无论如何，您的日志记录将无法捕捉到这一点，因为它只是一条评论——相反，您可能只想`puts`在调用`exec`.

# javascript - Openlayers如何仅在鼠标悬停时显示多边形，并在鼠标悬停时隐藏？

> ID：10224194
> 
> 赞同：1
> 
> 时间：2012-04-19T08:20:19.813
> 
> 标签：javascript, openlayers

关于如何仅在鼠标悬停时显示多边形的任何建议？我认为必须可以在样式对象上将初始 fillOpacity 和 strokeOpacity 设置为 0。

然后将 mouseover 和 mouseout 侦听器附加到多边形本身，并在调用侦听器时修改 fillOpacity 和 strokeOpacity 样式？

但是，我实际上有点坚持如何开始。

任何指导和帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:03:38.363

使用以下方法解决了它：

```
 new OpenLayers.Control.SelectFeature(this.layer,{
                clickout: true, toggle: false,
                multiple: true, hover: true,
                callbacks: {
                    'over':function(feature){

                    },
                    'out':function(feature){

                    },
                    'click':function(feature){

                    }
                }
            }) 
```

# python - 安装了 python 2.7.3，我所有的库都在 python 2.6 上。

> ID：10224195
> 
> 赞同：3
> 
> 时间：2012-04-19T08:20:30.600
> 
> 标签：python, path

我安装了 2.7.3 版，每当我输入：

```
import numpy 
```

我收到一条错误消息，说我没有安装它。但是当我运行 python 2.6 时，它会很好地导入它。我以前的所有库都发生了同样的情况：scipy、numpy、cv、cv2、networkx。我认为这与为新的默认版本切换 python 库路径有关。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:47:45.227

您必须为每个 python 版本单独安装库。这些库不是共享的，也不应该在不同版本的 python 之间共享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T08:48:50.720

Python`sys.path`将保存导入库时需要查找的路径列表，如果您确信安装在其中的库可以在其中`python2.6`工作，则每次加载解释器时都`python2.7`需要更新。`sys.path`

如果您使用的是 GNU/Linux，您可以将导出添加`PATH=/path/to/py2.6/library:$PATH`到 ~/.bashrc。

`pip`建议在 python2.7中使用和安装所有库。

[http://www.pip-installer.org/en/latest/index.html](http://www.pip-installer.org/en/latest/index.html)

由于`python2.7`和`python2.6`已安装，请在安装库时小心使用它们。

`[EDIT]`

`$ curl -O https://raw.github.com/pypa/pip/master/contrib/get-pip.py
$ python get-pip.py`

并开始使用`pip-2.7`或`pip`相应地。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T04:59:33.130

如果您将 numpy 源代码、untar 和 cd 下载到 numpy 目录，然后键入（以 root 身份）

```
python2.7 setup.py install 
```

python 2.7 将在自己的区域安装 numpy。同样应该适用于您提到的其他模块。

问题是大多数安装程序只会查找`python`，它与您的 Ubuntu 安装默认使用的任何内容相关联。理论上你可以做类似的事情

```
sudo cp -f $(which python2.7) $(which python) 
```

覆盖这个链接，但是覆盖你的系统默认 python 安装是一个**非常**糟糕的主意，几乎肯定会破坏一些东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-17T22:28:20.163

我在 CentOS 6 上遇到了这个问题，因为它使用 python 2.6 作为系统并且 Yum 依赖于它。我的解决方法是暂时将`/usr/bin/python`二进制文件重命名为其他名称（例如，`/usr/bin/orig-python`）。然后我做了一个python 2.7安装的链接：

```
ln -s /usr/local/bin/python2.7 /usr/bin/python 
```

瞧，它工作得很好。

这适用于您有一个顽固的程序不会接受您的设置的情况，`$PATH`因为通常如果在您的路径中配置了正确的 python，您应该能够执行它。

# haskell - Haskell 中的字数统计程序

> ID：10224199
> 
> 赞同：4
> 
> 时间：2012-04-19T08:20:45.583
> 
> 标签：haskell

我正在复习过去的考试，为即将到来的考试做准备，在完成了几个问题后，我遇到了一个我无法解决的问题。

它需要一个函数，该函数将接受一个字符串（或 [Char]）并返回字符串中英语单词数量的 Int。它说 isWord 是一个假设函数，它接受一个字符串并根据单词是真还是假返回一个布尔值。单词必须排成一行，从左到右。给出的例子是“目录”。所以“cat”、“at”、“catalog”、“ogre”和“log”，函数应该返回 5。

```
wordsInString :: [Char] -> Int
wordsInString [] = 0
wordsInString x
    | isWord (take 1 x)
    | isWord (take 2 x) 
```

保险杠只是显示了我的想法，显然它不会起作用。

这就是我开始的方式，我在想我可以使用该`take`函数并一次增加每个字母，然后将起始字母向下移动直到`[]`，但我不确定如何正确实现该递归。如果有人有任何想法或可以告诉我一个方法，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:37:05.233

如果您知道如何区分单词和非单词，您可以使用[`inits`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-List.html#v%3ainits)并[`tails`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-List.html#v%3atails)获取所有可能候选者的列表：

```
> :m +Data.List
> concatMap inits $ tails "catalogre"
["","c","ca","cat","cata","catal","catalo","catalog","catalogr","catalogre","","a","at","ata","atal","atalo","atalog","atalogr","atalogre","","t","ta","tal","talo","talog","talogr","talogre","","a","al","alo","alog","alogr","alogre","","l","lo","log","logr","logre","","o","og","ogr","ogre","","g","gr","gre","","r","re","","e",""] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T08:59:19.700

这个问题陈述有点模糊。我将做一些没有明确说明的假设——一个词可以是另一个词的前缀，并且每次都计算重复的词。

然后，要解决这样的问题，请将其分解为多个部分。你已经做了一点，但你似乎没有跟进它的代码。Haskell 的一个强大功能是您的代码结构通常会遵循您的思想结构。

因此，您已经明确决定要生成所有适当的子字符串进行测试，然后计算结果。让我们首先将其放入代码中。

```
wordCount :: String -> Int
wordCount = length . findWords

findWords :: String -> [String]
findWords = filter isWord . makeSubstrings

makeSubstrings :: String -> [String]
makeSubstrings xs = undefined -- hmm, this isn't clear yet 
```

好的。这是一个起点。它触及问题的核心。您将如何提出所有候选子字符串进行测试？

好吧，您的问题已经表明了必要的想法。只需将它们分解成足够小的碎片，您就可以看到如何制作它们。你提到想要从字符串中的每个起始位置做一些事情。那么如何编写一个从每个位置开始返回字符串并一直到结尾的函数呢？这似乎是合乎逻辑的第一步。

```
-- for the input "foo", this should return the list ["foo", "oo", "o", ""]
tails :: String -> [String]
tails = undefined -- I'll leave this one up to you 
```

名称的选择不是任意的。已经有一个函数可以做到这一点`Data.List`，但你应该自己实现它，看看它是如何完成的。

但是您清楚地也看到，您需要查看这些前缀的所有前缀，并根据您的想法进行分解。因此，编写另一个函数来生成字符串的所有前缀。这也存在于`Data.List`as 中`inits`，但再次尝试自己编写。

```
-- for the input "foo", this should return the list ["", "f", "fo", "foo"]
inits :: String -> [String]
inits = undefined - again, this is up to you 
```

并且，使用`map`and `concat`，这些加起来就是您需要实施的部分`makeSubstrings`，正如其他答案所示。希望我能够真正传达一种感觉，即如何推理必要的步骤，以及如何使用这些步骤来构建代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T08:32:03.613

~~[`subsequences`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3asubsequences)您正在从 Data.List中寻找函数。~~

通读[GHC 附带的库是](http://www.haskell.org/ghc/docs/latest/html/libraries/index.html)个好主意，尤其是 base。即使您不允许在考试中使用这些功能，阅读源代码仍然很有用，有时也很有启发性（点击类型签名右侧的“源”链接）。

* * *

编辑：评论是正确的，Matvey 的回答也是正确的。您可以不接受我的回答而接受 Matvey 的回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T08:50:51.610

```
allWordsInString :: [Char] -> [[Char]]
allWordsInString = filter isWord . concat . map tails . inits
--                                 ^^^^^^^^^^^^^^^^^^ or, concatMap tails

wordsInString :: [Char] -> Int
wordsInString = length . allWordsInString 
```

我会建议这样的事情，因为知道给定字符串中哪些是英文单词可能会很有趣。

`(.)`是功能组合。`concat :: [[a]] -> [a]`展平列表，例如`concat [[1,2], [], [3] == [1,2,3]`. `inits`返回给定列表的所有可能的初始前缀，`tails`后缀也是如此。`filter :: (a -> Bool) -> [a] -> [a]`finally 接受一个谓词，一个列表，并返回一个仅包含满足谓词的元素的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:09:52.723

这是另一个解决方案，它不使用任何花哨的 Haskell 功能，除了连接列表、计算列表的长度、获取列表的尾部 - 和递归。

这个想法是这样的：

1.  首先编写一个`candidatesWithLength :: Int -> String -> [String]`给定项目长度和一些字符串的函数，然后生成一个包含该长度的所有项目的列表，因此它的行为如下：

    ```
    > candidatesWithLength 3 "Foo"
    ["Foo"]
    > candidatesWithLength 2 "Foo"
    ["Fo", "oo"]
    > candidatesWithLength 1 "Foo"
    ["F", "o", "o"] 
    ```

2.  然后，使用上面的`candidatesWithLength`函数，编写一个`candidates :: String -> [String]`为给定字符串产生所有“候选”（潜在词）的函数。该函数只是构建一个长列表，其中所有长度为 1 的候选者插入长度为 2 的候选者，再加上长度为 3 的候选者，依此类推。它的行为如下：

    ```
    > candidates "Foo"
    ["Foo", "Fo", "oo", "F, "o", "o"] 
    ```

3.  如果你有这个，你可以使用[`filter`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afilter)返回列表中的现有函数，这样你就可以跳过所有给定`isWord`函数产生错误的东西，如下所示：

    ```
    > filter isWord (candidates "catalogre")
    ["catalog", "ogre", "cat", "log", "at"] 
    ```

这是这两种方法的实现，`candidatesWithLength`它`candidates`没有使用太多花哨的功能：

```
candidatesWithLength :: Int -> String -> [String]
candidatesWithLength len s
    | len > (length s) = []
    | otherwise        = go s (length s - len + 1)
    where go _ 0 = []
          go s' movesLeft = take len s' : go (tail s') (movesLeft - 1)

candidates :: String -> [String]
candidates s = go (length s)
    where go 0 = []
          go itemLength = candidatesWithLength itemLength s ++ go (itemLength - 1) 
```

# css - 图像链接中的意外填充/边距

> ID：10224205
> 
> 赞同：0
> 
> 时间：2012-04-19T08:21:03.823
> 
> 标签：css, page-flow

在此处的主要产品图片下方：[http](http://www.ivault.sg/shop/audio/speakers/bowers-wilkins-mm1-speakers) ://www.ivault.sg/shop/audio/speakers/bowers-wilkins-mm1-speakers 线条和图片之间有一个空格，该空格未在 CSS 中指定。

使用 firefox 检查元素不会显示任何会产生该空间的 css 填充/边距。

哪个css属性导致了这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:33:25.423

`img`这是显示属性设置为`inline`（默认情况下）的副作用。

添加此规则：

```
#image {
    display: block;
} 
```

它会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:23:22.057

嘿，你刚刚在你的 CSS 中定义

```
a img {
    border: 0 none;
    vertical-align: top;
} 
```

# c# - 使用加密狗/硬锁保护连接到我的 C# 程序的数据库

> ID：10224208
> 
> 赞同：0
> 
> 时间：2012-04-19T08:21:08.573
> 
> 标签：c#, database, dongle

我用 C# 实现了一个软件。对于特定功能，它使用数据库。现在我只想在有人购买了加密狗/硬件锁的情况下才允许访问数据库。是否可以将数据库（已解密）存储在加密狗上并使用 C# 再次访问数据？（因为数据库包含有价值的数据。）

我也想知道，我必须自己编程多少，或者是否有可以购买的解决方案。

在此先感谢您的帮助！

# jms - JMS 事务读取

> ID：10224212
> 
> 赞同：0
> 
> 时间：2012-04-19T08:21:33.550
> 
> 标签：jms, transactional

我怎样才能实现事务性读取（即使用 MessageConsumer.receiveNoWait() 读取 JMS 消息作为事务的一部分，如果事务失败，则消息应保留在队列中）？

我正在考虑使用 JmsXA connectionFactory 和 XA 连接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:06:22.010

消息重新传递是将消息发送回在处理过程中失败的队列。

它可以使用可以不同定义的事务读取，例如 - 事务处理 - 消息驱动 Bean（可以在容器级别和基于配置）

消息确认发生在会话级别，如果您提交会话，它将保存读取，并且在回滚消息/未确认的消息束将返回到队列（@Broker）。详情请浏览[http://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html](http://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html)。

# imagemap - 如何获取地图/图像地图的坐标

> ID：10224217
> 
> 赞同：1
> 
> 时间：2012-04-19T08:21:42.637
> 
> 标签：imagemap, coords

我正在寻找一种可以获取图像或地图坐标的方法（程序化）或软件，例如关于州边界（边缘）的美国州或德国省。已知国家/地区将存在此功能，但我需要其他国家/地区，我将在其中上传图像或对其进行迭代并获取 html 图像地图的区域坐标。请有任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:37:21.327

我一直在寻找同样的东西，我在谷歌搜索时发现了这个

它应该有帮助

[http://www.sbrady.com/hotsource/html/imgmaps.html](http://www.sbrady.com/hotsource/html/imgmaps.html)

# android - 带有由 LoaderManager 管理的自定义适配器的 AlphabetIndexer

> ID：10224233
> 
> 赞同：11
> 
> 时间：2012-04-19T08:22:56.830
> 
> 标签：android, adapter, simplecursoradapter, android-cursorloader, android-loadermanager

我正在尝试`AlphabetIndexer`使用这样的自定义适配器来实现

[带有自定义适配器的 AlphabetIndexer](https://stackoverflow.com/questions/4115920/alphabetindexer-with-custom-adapter)

我的 ContactsCursorAdapter 类扩展`SimpleCursorAdapter`和实现`SectionIndexer` ，我正在使用 a`LoaderManager`来管理我的适配器的光标，所以我已经覆盖了`swapCursor()`上面示例的第二个答案所示的方法。

```
public class ContactsCursorAdapter extends SimpleCursorAdapter 
    implements SectionIndexer{

    private LayoutInflater mInflater;
    private Context mContext; 

    private AlphabetIndexer mAlphaIndexer;

    public ContactsCursorAdapter(Context context, int layout, Cursor c,
        String[] from, int[] to) {
        super(context, layout, c, from, to);

        mInflater = LayoutInflater.from(context);
        mContext = context;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        ...
    }

    @Override
    public int getPositionForSection(int section) {
        return mAlphaIndexer.getPositionForSection(section);
    }

    @Override
    public int getSectionForPosition(int position) {
        return mAlphaIndexer.getSectionForPosition(position);
    }

    @Override
    public Object[] getSections() {
        return mAlphaIndexer.getSections();
    }

    public Cursor swapCursor(Cursor c) {
        // Create our indexer
        if (c != null) {
            mAlphaIndexer = new AlphabetIndexer(c, c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME),
                " ABCDEFGHIJKLMNOPQRSTUVWXYZ");
        }
        return super.swapCursor(c);
    }
} 
```

但是，如果我将列表视图设置为 fastScrollEnabled = true，则会出现此错误

getListView().setFastScrollEnabled(true);

在我的类 ContactsCursorLoaderListFragment 中，它扩展`ListFragment`并实现了 LoaderManager.LoaderCallbacks 。

这是堆栈跟踪：

```
04-25 01:37:23.280: E/AndroidRuntime(711): FATAL EXCEPTION: main
04-25 01:37:23.280: E/AndroidRuntime(711): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sendit/com.sendit.ContactManager}: java.lang.NullPointerException
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.os.Looper.loop(Looper.java:137)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-25 01:37:23.280: E/AndroidRuntime(711):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 01:37:23.280: E/AndroidRuntime(711):  at java.lang.reflect.Method.invoke(Method.java:511)
04-25 01:37:23.280: E/AndroidRuntime(711):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-25 01:37:23.280: E/AndroidRuntime(711):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-25 01:37:23.280: E/AndroidRuntime(711):  at dalvik.system.NativeStart.main(Native Method)
04-25 01:37:23.280: E/AndroidRuntime(711): Caused by: java.lang.NullPointerException
04-25 01:37:23.280: E/AndroidRuntime(711):  at com.sendit.ContactsCursorAdapter.getSections(ContactsCursorAdapter.java:222)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.widget.FastScroller.getSectionsFromIndexer(FastScroller.java:507)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.widget.FastScroller.init(FastScroller.java:269)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.widget.FastScroller.<init>(FastScroller.java:155)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.widget.AbsListView.setFastScrollEnabled(AbsListView.java:1144)
04-25 01:37:23.280: E/AndroidRuntime(711):  at com.sendit.LoaderCursor$ContactsCursorLoaderListFragment.onActivityCreated(LoaderCursor.java:107)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:847)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.BackStackRecord.run(BackStackRecord.java:622)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.Activity.performStart(Activity.java:4474)
04-25 01:37:23.280: E/AndroidRuntime(711):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929)
04-25 01:37:23.280: E/AndroidRuntime(711):  ... 11 more 
```

在调用该`setFastScrollEnabled()`方法后，它会调用自定义适配器的`getSections()`方法，这是它崩溃的地方。

```
public class LoaderCursor extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        FragmentManager fm = getFragmentManager();

        // Create the list fragment and add it as our sole content.
        if (fm.findFragmentById(android.R.id.content) == null) {
            ContactsCursorLoaderListFragment list = new ContactsCursorLoaderListFragment();
            fm.beginTransaction().add(android.R.id.content, list).commit();
        }
    }

    public static class ContactsCursorLoaderListFragment extends ListFragment
        implements LoaderManager.LoaderCallbacks<Cursor> {

        ContactsCursorAdapter mAdapter;
        Cursor mCursor;
        String mCurFilter;

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            populateContactList();

            // Prepare the loader. Either re-connect with an existing one,
            // or start a new one.
            getLoaderManager().initLoader(0, null, this);

            ListView lv = getListView();
            lv.setFastScrollEnabled(true);
            //lv.setScrollingCacheEnabled(true);
            lv.setDivider(getResources().getDrawable(R.drawable.list_divider));

        }       

        // These are the Contacts rows that we will retrieve.
        final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts.PHOTO_ID, };

        public Loader<Cursor> onCreateLoader(int id, Bundle args) {
            // This is called when a new Loader needs to be created. This
            // sample only has one Loader, so we don't care about the ID.
            // First, pick the base URI to use depending on whether we are
            // currently filtering.
            Uri baseUri;
            if (mCurFilter != null) {
                baseUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI,Uri.encode(mCurFilter));
            } else {
                baseUri = ContactsContract.Contacts.CONTENT_URI;
            }

            // Now create and return a CursorLoader that will take care of
            // creating a Cursor for the data being displayed.
            String selection = "((" + ContactsContract.Contacts.DISPLAY_NAME + 
                " NOTNULL) AND (" + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1) 
                AND (" + ContactsContract.Contacts.DISPLAY_NAME + " != '' ))";
            String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";

            return new CursorLoader(getActivity(), baseUri,
                CONTACTS_SUMMARY_PROJECTION, selection, null, sortOrder);

        }

        public void onLoadFinished(Loader<Cursor> loader, Cursor data) { 
            // Swap the new cursor in.  (The framework will take care of closing the
            // old cursor once we return.)
            mAdapter.swapCursor(data);
        }

        public void onLoaderReset(Loader<Cursor> loader) {
            // This is called when the last Cursor provided to onLoadFinished()
            // above is about to be closed. We need to make sure we are no
            // longer using it.
            mAdapter.swapCursor(null);
        }

        /**
        * Populate the contact list
        */
        private void populateContactList() {

            // start mappings
            String[] from = new String[] { ContactsContract.Contacts.DISPLAY_NAME };
            int[] to = new int[] { R.id.contactInfo };

            // Create an empty adapter we will use to display the loaded data.
            mAdapter = new ContactsCursorAdapter(getActivity().getApplicationContext(),    
                R.layout.contact_manager, null, from, to);
            setListAdapter(mAdapter);
        }   

    }
} 
```

如果我评论这个`setFastScrollEnabled()`电话，那么它不会出错，但我没有看到`AlphabetIndexer`工作。

这是否需要以不同的方式实现，因为我的自定义适配器设置在 a`ListFragment`而不是 a中`ListActivity`？

有没有人有关于如何使这一切工作的建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T18:19:09.860

所以我终于得到了这个工作。我是这样做的：

我补充说：

```
ListView lv = getListView();
lv.setFastScrollEnabled(true);
lv.setScrollingCacheEnabled(true); 
```

`onLoadFinished()`像这样交换新光标后的方法

```
public void onLoadFinished(Loader<Cursor> loader, Cursor data) { 
 // Swap the new cursor in.  (The framework will take care of closing the
 // old cursor once we return.)
 mAdapter.swapCursor(data);

 ListView lv = getListView();
 lv.setFastScrollEnabled(true);
 lv.setScrollingCacheEnabled(true);

} 
```

因此，这三个语句从`onActivityCreated()`我的自定义方法中删除`ListFragment`。

# c++ - C++ 应用程序中的 SSL 错误 SSL_ERROR_SYSCALL

> ID：10224235
> 
> 赞同：1
> 
> 时间：2012-04-19T08:23:08.250
> 
> 标签：c++, networking, ssl, openssl

在我的 c++ 应用程序中，我在我的网络功能中使用了 open ssl。我在成功连接到套接字后立即看到，在使用 SSL_read: SSL_ERROR_SYS_CALL 的接收函数中出现错误。根据 SSL 文档，这就是它的意思：

> 发生了一些 I/O 错误。OpenSSL 错误队列可能包含有关错误的更多信息。如果错误队列为空（即 ERR_get_error() 返回 0），则可以使用 ret 来查找有关错误的更多信息：如果 ret == 0，则观察到违反协议的 EOF。如果 ret == -1，则底层 BIO 报告 I/O 错误（对于 Unix 系统上的套接字 I/O，请参阅 errno 了解详细信息）。

在我的例子中，ERR_get_error() 返回 0 并且 ret == 0。这意味着“

> 观察到违反协议的 EOF。

你知道这是什么意思吗？我不明白。为了解决这个问题，我需要检查或做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-12T18:56:39.257

雷米的回答是正确的，但让我澄清一下并扩展一下。

, `SSL_do_handshake()`, `SSL_connect()`, `SSL_accept()`,或在调用返回后返回 0`SSL_write()`且实际为0 的情况意味着对等方关闭了 TCP 连接，例如通过调用而没有正确关闭 SSL。这是一种完全正常且常见的情况，但就 TLS/SSL 而言，它并不是一种优雅的断开连接。因此，违反 SSL 协议的是 EOF。`SSL_read()``SSL_shutdown()``SSL_get_error()``SSL_ERROR_SYSCALL``errno``close()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T08:50:26.827

这意味着您连接到一个端没有使用 SSL 的对等套接字。`connect()`仅使用套接字并立即开始调用是不够的`SSL_read()`。您必须先调用`SSL_connect()`after`connect()`执行 SSL 握手，然后才能使用`SSL_read()`and `SSL_write()`。此外，请确保您连接到正确的端口。一些服务器使用单独的端口进行 SSL 和非 SSL 连接。

# c# - 使用 WCF（或其他解决方案）保护双工通信的最佳方法

> ID：10224236
> 
> 赞同：2
> 
> 时间：2012-04-19T08:23:09.857
> 
> 标签：c#, wcf, nservicebus, duplex

我需要允许多个客户端（winforms 应用程序）通过互联网（在远程位置）连接到服务器，并启动双工通信，有时会发送大量流量。

目前，我们正在使用带有 WCF 的 netTcpBinding 上的双工通信，使用我们自己的证书在传输层上进行保护。虽然这可行，但我担心一些事情：

*   设置起来很痛苦 - 我们为每个客户端创建一个证书以在服务器上识别它，并且需要在客户端机器和服务器上为每个客户端注册证书
*   因为我们在某个端口上使用 tcp，所以我们依赖于在客户端打开该部分，以便它可以通过 tcp 启动通信。一些客户位置不喜欢这样。
*   我们需要能够保证理想的交付

作为替代方案，我想知道是否使用 wsDualHttpBinding，使用单个 SSL 证书来保护它，并让每个客户端发送某种标识符来标识自己。这会解决防火墙问题吗？它在 http 而不是 tcp 上的性能是否足够？据我所知，如果您使用 http（因为 http 不支持双向通信），WCF 将创建 2 个通道而不是一个通道 - 所以这听起来可能会导致一些性能问题..

我的问题是，这个解决方案是否更好，或者是否有其他解决方案（例如 NServiceBus）可以使这更容易并解决这些问题？

*编辑*

从那以后，我了解到 wsDualHttpBinding 不是我的选择，因为：`This binding requires that the client has a public URI that provides a callback endpoint for the service`. 这对我来说是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:27:08.440

让我分别解决每个问题：

1.  为什么不使用 TransportWithMessageCredential 并使用用户名和密码 - 这意味着您只需要在客户端管理用户名和密码，您的客户端证书问题就会消失

2.  使用 NetTcpBinding，服务器需要为入站流量打开端口 - 客户端只需要允许客户端连接到该端口，它们不需要允许在您的特定端口上进行入站连接。他们是否有允许出站连接到您的自定义端口的问题？

3.  NetTcpBinding 使用 Tcp，假设您在拓扑中没有 SOAP 中介，它可以保证交付。您是否试图保证交付或处理？

WSDualHttpBinding 将强制您的客户端为*入站*连接打开一个端口，因此几乎可以肯定是不可接受的。不久前我写了一篇关于双工的[博客文章](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,b891610a-6b78-4b54-b9a6-4ec81c82b7c0.aspx)，这可能有助于澄清问题

您可能还想看看为这种场景设计的[SignalR ，尽管它是为 Web 应用程序设计的，但它也有一个 .NET 客户端](http://signalr.net/)

# ruby - 使用 rails 和 mongodb 重新索引 solr 时出错

> ID：10224245
> 
> 赞同：2
> 
> 时间：2012-04-19T08:23:42.423
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongoid, sunspot

我目前`mongodb`在我的 Rails 应用程序中使用。我`mongoid`用作 ODM，我使用`sunspot_mongo`. 当我尝试重新索引时，我收到以下错误。

```
>rake sunspot:reindex
 rake aborted!
 undefined method 'find_in_batches' for Article:Class 
```

即使我使用`mongo_mapper`而不是，我也面临同样的问题`mongoid`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:04:10.530

利用：

```
rake sunspot:mongo:reindex 
```

这样可行。但是在 sunspot 中使用 mongoid 的重新索引 API 略有损坏。

# hibernate - 实体 onetomany ..annotation 异常

> ID：10224247
> 
> 赞同：1
> 
> 时间：2012-04-19T08:23:52.500
> 
> 标签：hibernate, entity, one-to-many, many-to-one

我有两个类映射 OneToMany、ManyToOne，但我得到了异常：

org.hibernate.AnnotationException：mappedBy 引用了一个未知的目标实体属性：entity_package.UserEntity.ownedTickets 中的 entity_package.TicketEntity.ownerEntity

这是代码：

公共类 UserEntity 实现 Serializable {

```
@OneToMany(mappedBy="ownerEntity")
public List<TicketEntity> getOwnedTickets() {
    return tickets;
}
public void setOwnedTickets(List<TicketEntity> tickets) {
    this.tickets = tickets;
} 
```

和 ...

公共类 TicketEntity 实现 Serializable {

```
private UserEntity ownerEntity;

@ManyToOne
@JoinColumn(name="owner_id")
public UserEntity getOwner() {
    return ownerEntity;
}
public void setOwner(UserEntity owner) {
    this.ownerEntity = owner;
} 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:35:55.233

属性名称`owner`由带注释的 getter 定义。采用：

```
@OneToMany(mappedBy="owner")
public List<TicketEntity> getOwnedTickets() { 
```

# ios - 在 iOS 上使用单独的线程联网

> ID：10224251
> 
> 赞同：3
> 
> 时间：2012-04-19T08:24:24.147
> 
> 标签：ios, multithreading, networking

我开发的应用程序是一个与 OS X 服务器通信的 iOS 客户端。这个应用程序的当前版本在主线程上完成了所有的网络逻辑，这对于我想做的事情来说很好。

但是，在下一个版本中，我希望网络逻辑更加灵活。为此，我想专门为其创建一个单独的线程，但我不太确定哪种解决方案适合我的需求。

起初，GCD 看起来是一个不错的候选者，但它似乎只适合在单独的线程上执行大块工作。我想做的是将所有网络逻辑放在一个单独的线程上。iOS 客户端和 OS X 服务器之间的连接是持久的，所有数据流和处理都应该发生在那个单独的线程上。

问题归结为，哪种方法最适合这种情况？

编辑：为了消除任何混淆，我使用的连接使用套接字和 NSStream 实例。我不是在处理连接到远程 Web 服务器的问题。换句话说，AFNetworking 和 ASIHttpRequest 不是我的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T10:25:46.743

1.  您可以使用 runloop（我们称之为 NetworkThread）创建一个线程，运行以下代码：

    ```
    while (!self.isCancelled) {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        [pool release];
    } 
    ```

2.  然后您可以使用`- (void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(id)arg waitUntilDone:(BOOL)wait`在 NetworkThread 上执行您的网络请求选择器。

3.  所有网络回调将在 NetworkThread 上调用，然后在 NetworkThread 上处理您的响应数据，将最终数据推送到主线程，更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:51:06.603

AFNetworking 很棒。使用块和 GCD。我编写了一个 NetworkClient 类，它使得调用它变得相当简单。随意使用它或定制它，但我不保证任何东西:)

如果 API 密钥不符合您的需要，可以将其删除。我将它添加为一种为我的所有网络请求增加安全性的方法。我的 Web 服务在返回任何内容之前检查传入的 APIKey 的有效性。

此外，您可以相当灵活地完成您想要的事情。您可以执行同步或异步请求、不警告用户失败的请求等。

基本示例用法：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"GetAllParkingLots", @"Command",
                                nil];

        [NetworkClient processURLRequestWithURL:nil andParams:params block:^(id obj) {
            // I check to see what kind of object is passed back, in this case I was expecting an Array
            if ([obj isKindOfClass:[NSArray class]]) {
                // Do something with the Array
                [self processNetworkRequestWithArray:(NSArray *)obj];
            }
        }]; 
```

网络客户端.h：

```
//
//  NetworkClient.h
//
//  Created by LJ Wilson on 2/18/12.
//  Copyright (c) 2012 LJ Wilson All rights reserved.
//

#import <Foundation/Foundation.h>

extern NSString * const APIKey;

@interface NetworkClient : NSObject

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block;

+(void)handleNetworkErrorWithError:(NSError *)error;

+(void)handleNoAccessWithReason:(NSString *)reason;

@end 
```

网络客户端.m：

```
//
//  NetworkClient.m
//
//  Created by LJ Wilson on 2/18/12.
//  Copyright (c) 2012 LJ Wilson All rights reserved.
//

#import "NetworkClient.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "SBJson.h"

#warning Set APIKey or set to nil
NSString * const APIKey = @"YourAPIKEYGoesHere";

@implementation NetworkClient

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block {

    [self processURLRequestWithURL:url andParams:params syncRequest:NO alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block {
    [self processURLRequestWithURL:url andParams:params syncRequest:syncRequest alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block {

#warning Fix default url
    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"YourDefaultURLGoesHere";
    }

    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:params];
    [dict setValue:APIKey forKey:@"APIKey"];

    NSDictionary *newParams = [[NSDictionary alloc] initWithDictionary:dict];

    NSURL *requestURL;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:requestURL];

    NSMutableURLRequest *theRequest = [httpClient requestWithMethod:@"POST" path:url parameters:newParams];

    __block NSString *responseString = @"";

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:theRequest];
    __weak AFHTTPRequestOperation *operation = _operation;

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);
    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                          if (alertUserOnFailure) {
                                              // Let the user know something went wrong
                                              [self handleNetworkErrorWithError:operation.error];
                                          }

                                      }];

    [operation start];

    if (syncRequest) {
        // Process the request syncronously
        [operation waitUntilFinished];
    } 

}

+(void)handleNetworkErrorWithError:(NSError *)error {
    NSString *errorString = [NSString stringWithFormat:@"[Error]:%@",error];

    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"Connection Error" 
                            message:errorString 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

+(void)handleNoAccessWithReason:(NSString *)reason {
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"No Access" 
                            message:reason 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

@end 
```

# jquery - 我的 html 没有按照我的 jquery 对话框中的假设注入

> ID：10224253
> 
> 赞同：-1
> 
> 时间：2012-04-19T08:24:32.020
> 
> 标签：jquery

我有以下jQuery：

```
$.ajax({
        url: href,
        context: document.body,
        success: function (data) {
            alert(data);
            // Prepare & show dialog
            $(dialogDiv).find('.modal-body p.body').html(data);
            ... 
```

我在“数据”中有一些 html。我确定是因为我将其显示在警报框中。我尝试在上面脚本的最后一行注入这个 html。当我检查 DOM 时，我没有在其中看到我的 html。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:41:42.683

如果您`dialogDiv`在 ajax 调用之前定义（这意味着它将在响应方法中是全局的）那么为什么您不只是使用

`dialogDiv.find('.modal-body p.body').html(data);`

代替

`$(dialogDiv).find('.modal-body p.body').html(data);`

还要确保在显示弹出窗口**之前**`.modal-body p.body`确实存在。我猜，您的对话框在您显示（或初始​​化）它时会创建它的标记。在这里，您尝试将 html 注入到不存在的元素中。尝试进行更多调查，希望对您有所帮助。

 **要快速检查，请先尝试显示您的对话框，然后插入 html 并查看它是否已插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:28:33.957

将`dataType`参数添加到[`ajax()`](http://api.jquery.com/jQuery.ajax/)调用中。根据我的经验，jQuery 的智能数据类型猜测并不是 100% 完美的。

```
$.ajax({
    url: href,
    context: document.body,
    dataType: 'html',
    success: function (data) {},
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:30:40.380

如果您确定数据是 html，请尝试 appendTo。

```
var $modal=$(dialogDiv).find('.modal-body p.body');
$(data).appendTo($modal); 
```**

# linux - 简单的 bash 脚本，我怎样才能使它更短更好？

> ID：10224254
> 
> 赞同：0
> 
> 时间：2012-04-19T08:24:45.677
> 
> 标签：linux, bash

我想要一个 bash 命令移动到一个目录，然后为每个条目显示 2 个文件的内容，我制作了这个脚本：

```
cd /sys/class/net
for i in *; do echo $i; cat $i/{address,operstate}; done 
```

有没有办法做得更短更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:56:30.063

不需要`cd`. 尝试以下操作：

`for i in /sys/class/net/*; do echo "${i##/*/}:"; cat $i/{address,operstate}; done`

这应该会给你这样的输出：

```
eth2: 
0f:ed:37:1f:6c:c7
up
lo: 
00:00:00:00:00:00
unknown
wlan0: 
94:58:29:b6:07:3e
down 
```

上面使用 bash 参数替换删除了前导路径元素，`echo`以使输出更漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:39:20.447

grep 和 sort 可以给出类似的答案

```
(cd /sys/class/net/;grep -T '' */{addre,o}*|sort) 
```

示例输出

```
eth0/address   :10:9a:dd:6e:66:33
eth0/operstate :down
lo/address     :00:00:00:00:00:00
lo/operstate   :unknown
wlan0/address  :e0:f8:47:20:b3:92
wlan0/operstate:up 
```

我真的很喜欢使用tail的答案，但不幸的是它使地址和操作状态彼此相邻。使用 grep，我可以通过排序解决这个问题。但这不是一个命令，抱歉。

grep 的 -T 选项进行对齐（使用制表符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:35:16.387

我刚刚发现tail可以做得更简单，

```
 tail /sys/class/net/*/{address,operstate} 
```

这只是一个命令，没有点数和复合 shell 语句。:) – flutter 刚刚编辑

# java-me - j2ME 的 MQTT 客户端

> ID：10224256
> 
> 赞同：1
> 
> 时间：2012-04-19T08:24:47.673
> 
> 标签：java-me, mqtt

我想将 MQTT 客户端与 J2ME 应用程序一起使用。[我在http://mqtt.org/software](http://mqtt.org/software)中找不到任何可用的客户端。如果有任何可用于 J2Me 的开源客户端，请告诉我。如果不是如何前进。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:28:42.393

Paho MQTT 客户端当前不支持 J2ME。在 paho-dev 邮件列表上有一个关于此的最近线程，包括提示它应该相当简单地移植：

[http://dev.eclipse.org/mhonarc/lists/paho-dev/threads.html#00059](http://dev.eclipse.org/mhonarc/lists/paho-dev/threads.html#00059)

# iphone - 在 UIViewController 内部集成 UIView 和 GLKView

> ID：10224257
> 
> 赞同：2
> 
> 时间：2012-04-19T08:24:49.770
> 
> 标签：iphone, ios, uiviewcontroller, glkit

我将 Xcode 4.3.2 与 iOS SDK 5.1 一起使用。

我想在我的故事板中创建一个视图控制器，其中包含半屏上的 GLKView 和另一半上的 Buttons + Text。

我尝试将两者都放在 UIViewController 中，但可以让它工作。

有任何想法吗？文章？教程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T02:49:29.547

在 UIViewController 中创建 GLKViewController 的实例，现在将 GLKViewController 添加为子视图控制器，并将 GLKView 作为子视图添加到 UIViewController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:43:32.220

我将遵循的方法是：

1.  像往常一样创建你的`GLKView`/ ；`GLKViewController`

2.  将`UIView`包含按钮和文本的您作为子视图添加到`GLKView`.

`GLKViewController`我会在's`viewDidLoad`方法中以编程方式执行第二步。

# java - 从 SQLiteDatabase.execSQL 获取生成的查询

> ID：10224266
> 
> 赞同：1
> 
> 时间：2012-04-19T08:25:21.650
> 
> 标签：java, android, debugging, sqlite

我有这行代码：

```
String insertSQL = "INSERT INTO " + BOOK_NAME
        + " (id, title, date, type, excerpt, content, category_id, category_name"
        + " ,permalink, guid, time, reporter) VALUES(?,?,?,?,?,?,?,?,?,?,?,?)";
database.execSQL(
        insertSQL,
        new Object[] { 
                book.getNewsID(), 
                book.getTitle(),
                book.getDate(),
                book.getType(),
                book.getExcerpt(),
                book.getContent(),
                book.getCategoryID(),
                book.getCategoryName(),
                book.getPermalink(),
                book.getGUID(),
                book.getTime(),
                book.getReporter()
                }); 
```

我的问题是，有没有办法从这种方法中获取原始查询？我有很多这样的代码，我想调试什么是实际查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:18:34.280

> 我的问题是，有没有办法从这种方法中获取原始查询？

没有“原始查询”。查询是一个`SELECT`语句，或返回结果集的其他内容。这是一个`INSERT`声明。

如果您的意思是“原始 SQL 语句”，那么不，那是不可用的。我什至不确定是否会生成完整的 SQL 语句——这些`?`东西可能在 SQLite 本身内部处理。

# android - Android Froyo Phone 应用程序源

> ID：10224268
> 
> 赞同：2
> 
> 时间：2012-04-19T08:25:34.257
> 
> 标签：android, android-2.2-froyo

我想从 Android Froyo 手机应用程序中学习一些东西。[我从github](https://github.com/android/platform_packages_apps_phone)下载了源代码，但那个是用于 ICS 而不是 Froyo 的。

有谁知道我怎样才能只下载电话应用程序而不是下载 Froyo 图像。如果那不可能，请指导我下载 android Froyo 源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:16:16.573

> 我从 github 下载了源代码，但那个是用于 ICS 而不是 Froyo，

您链接到的 GitHub 存储库有 froyo 和其他版本的分支。

# ajax - 响应中的 200 而不是 304

> ID：10224275
> 
> 赞同：2
> 
> 时间：2012-04-19T08:25:46.557
> 
> 标签：ajax, gwt, http-status-codes, http-status-code-304, http-status-code-200

简单的问题：

`onResponseReceive getStatusCode`返回 200 而不是 304。Fiddler 告诉我响应状态码是 304。

我该怎么做：我不断地轮询服务器以获取新数据（每 10 秒）。如果数据没有改变，它会响应 304，否则会响应 200 和整个数据。在 onResponseReceived 方法中，状态码始终为 200，数据始终存在。

如何获得 304 的任何提示。我阅读了一些关于 If-Modified-Since 的内容，这会导致整个数据重新发送（使用代码 200），但我实际上想要 304。我也不想通过以下方式比较数据手，看看有没有变化。

GWT 代码：

```
RequestBuilder requestBuilder = new RequestBuilder(RequestBuilder.GET,
                dataUrl);

        requestBuilder.setHeader("_____", "none");
        requestBuilder.setHeader("_______", "_________");
        requestBuilder.setCallback(new RequestCallback() {

            @Override
            public void onResponseReceived(Request request, Response response) {
                PrintResponse.printResponse(response, "EntryPoints");
            if (response.getStatusCode() == 200) {.....}  

            }

            @Override
            public void onError(Request request, Throwable exception) {

            }
        });

        try {
            requestBuilder.send();
        } catch (RequestException e) {
            e.printStackTrace();
        } 
```

回复：

```
HTTP/1.1 304
Content-Type: application/json
Cache-Control: max-age=0
Content-Length: 0
Date: Thu, 19 Apr 2012 10:49:10 GMT
Server: ________
Connection: Keep-Alive
Keep-Alive: timeout=60 
```

最好的问候，斯特凡

# if-statement - Virtuemart Accordion 仅在某些页面上

> ID：10224276
> 
> 赞同：1
> 
> 时间：2012-04-19T08:25:49.130
> 
> 标签：if-statement, joomla, virtuemart

我将 Virtuemart 2.0.4 与 Joomla 2.5 一起使用。我不是 Joomla 的明星！

我还使用手风琴模块来显示 Virtuemart 类别。现在，我只想在加载 Virtuemart 时显示手风琴，换句话说：当您在 Webshop 页面、categorylist 和特定产品页面时。

我已经设法为首页制作了 if else 语句，如下所示：

```
// IF IS HOMEPAGE 
   $menu = JSite::getMenu(); if ($menu->getActive() == $menu->getDefault()) {
} else {

} 
```

我想如果加载了 mercurialt，我可以做同样的事情，比如：

```
if ( $pageoption != 'com_virtuemart' )   { ?>
    DONT LOAD ACCORDION MENU
<?php } else { ?>
    LOAD ACCORDION MENU
<?php } ?> 
```

但这似乎不起作用。

你们知道如何完成这样的事情吗？泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:59:57.947

一个很好的解决方案是使用[MetaMod](http://extensions.joomla.org/extensions/style-a-design/modules-management/3391)。它具有用于检测不同 VM 页面类型的内置功能，并且可以使用它来触发（或不触发）其他模块。您不必更改模板，因为它适用于任何模板。然后逻辑进入 MetaMod，它决定何时包含其他模块。

您可以使用放入 MetaMod 的 PHP 代码片段来完成此操作，返回您要显示的模块的模块 ID。

例如检测 VM 中的任何页面，并显示模块：

```
if ($option == 'com_virtuemart') return XXX;
// replace XXX with the module id of the module to show. 
```

您还可以像这样检测特定的 VM 页面类型：

```
$vm = JomGenius("virtuemart");
if ($vm->check("pagetype = shop.product_details")) return XXX;
// shop.product_details is for VM1.x. Use "productdetails" for VM2.x.
if ($vm->check("pagetype startswith checkout")) return XXX;
// e.g. checkout.index#1-4, checkout.result, etc 
```

[您可以在JomGenius 页面](http://www.metamodpro.com/jomgenius/parameters#vm1x)上找到所有页面类型，以及您可以查询的许多其他内容，例如检测某物所在的类别、以前的购买历史、制造商、所显示产品的特定详细信息、购物车内容等。[这里](http://www.metamodpro.com/metamod/recipes/36-component-specific/76-control-modules-on-virtuemart-pages)有更多的例子。

# php - ubuntu htaccess 不工作

> ID：10224279
> 
> 赞同：2
> 
> 时间：2012-04-19T08:25:54.870
> 
> 标签：php, .htaccess, codeigniter, ubuntu, lamp

我在一个云服务器上使用`ubuntu`我安装了一个灯组并添加了我的服务器文件等......

但是当我尝试访问像 1.2.3.4/page 这样的页面时，它会返回 404 page not found 错误...

我正在使用`Codeigniter`框架。

我尝试编辑`site-available/default`文件并`AllowOverride`从更改为`No`，`All`但随后会显示 500 服务器错误

```
AllowOverride None 
```

到

```
AllowOverride All 
```

……有什么线索吗？？

**我的 htaccess 文件：**

```
RewriteEngine On

#RewriteCond %{HTTP_HOST} !^www\.
#RewriteRule (.*) http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_URI} ^/system.*
RewriteRule ^(.*)$ index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:28:21.033

如果您收到 500 服务器错误，则问题与访问限制无关。检查 Web 服务器日志以查找错误跟踪！

500 server error 表示您的请求已被处理（因此没有限制问题）但发生了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:44:50.253

您是否按照此处的说明进行操作：http: [//codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)第 4 节有 500 个错误的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T17:09:20.593

***更新***

如果您在`500`尝试查看您的站点时遇到错误，这是因为出于安全原因，默认情况下未启用重写模块。

`rewrite.conf`在文件中创建一个新文件，`/etc/apache2/mods-enabled` 将这一行`LoadModule rewrite_module /usr/lib/apache2/modules/mod_rewrite.so`

重新加载一次服务器。

# symfony - 如何在 SonataAdmin 中创建自定义 DataGrid 过滤器

> ID：10224280
> 
> 赞同：6
> 
> 时间：2012-04-19T08:25:56.573
> 
> 标签：symfony, symfony-sonata

我有一个带有许多状态代码的实体事务。我希望用户能够在 SonataAdmin 中将这些状态代码视为字符串。用户还应该能够根据这些状态代码进行过滤。

```
Entity Transaction 
{
    const TRANSACTION_STATUS_WAITING = 1;
    const TRANSACTION_STATUS_PENDING = 2;
    const TRANSACTION_STATUS_CONFIRMED = 3;

   /**
     * Set status
     *
     * @param smallint $status
     */
    public function setStatus($status)
    {
        $this->status = $status;
    }

    /**
     * Get status
     *
     * @return smallint 
     */
    public function getStatus()
    {
        return $this->status;
    }

    public function getStatusAsString()
    {
        switch($this->status){
            case(self::TRANSACTION_STATUS_WAITING): return "Waiting for Merchant";
            case(self::TRANSACTION_STATUS_PENDING): return "Pending Confirmation";
            case(self::TRANSACTION_STATUS_CONFIRMED): return "Confirmed";
        }
    }
} 
```

我已经像这样配置了我的奏鸣曲列表映射器：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('id')
        ->add('statusAsString', null, array('sortable' => true, 'label' => 'Status'))
} 
```

效果很好：

但是我无法使用与过滤器相同的过滤器。

如果我试试这个：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ->add('user')
        ->add('status') // Works well 
        ->add('statusAsString', null, array('label' => 'Status')) // Doesn't work: 
    ;
} 
```

这行不通。它给出了以下错误->

```
Notice: Undefined index: statusAsString in ..../Sonata\DoctrineORMAdminBundle\Guesser\FilterTypeGuesser.php 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T06:08:35.930

这对我来说是一个临时解决方案。如果有人有更好的解决方案，请分享。

```
$datagridMapper
       ->add('status', 'doctrine_orm_string', array(),
             'choice', array('choices' => Transaction::getStatusList())
       ); 
```

在实体

```
public static function getStatusList()
    {
        return array(
            self::TRANSACTION_STATUS_WAITING => "Waiting",
            self::TRANSACTION_STATUS_PENDING_CONFIRMATION => "Pending Confirmation",
            self::TRANSACTION_STATUS_CONFIRMED => "Confirmed",
            self::TRANSACTION_STATUS_PAYMENT_REQUESTED => "Payment Requested",);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T08:16:31.627

类似的东西

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ->add('codes', 'doctrine_orm_callback', array(
            'label'         => 'Код',
            'callback'      => array($this, 'getCodesFilter'),
            'field_type'    => 'genemu_jquerychosen',
            'field_options' => array(
                'class'     => 'Mtools\ClientBundle\Entity\Client',
                'widget'    => 'entity',
                'multiple'  => false,
            )
        );
}

public function getCodesFilter($queryBuilder, $alias, $field, $value)
{
    if (!$value) {
        return;
    }
    $queryBuilder->leftJoin(sprintf('%s.codes', $alias), 'c');
    $queryBuilder->andWhere('c.code = :code');
    $queryBuilder->setParameter('code', $value['value']);
} 
```

# ios - iOS 开发者计划

> ID：10224281
> 
> 赞同：2
> 
> 时间：2012-04-19T08:25:57.923
> 
> 标签：ios, iphone-developer-program

我们的场景是：

*   我们将开发 10 多个应用程序，每个应用程序都带有我们客户的徽标和服务器连接 URL。

*   我们将为每个客户端（公司）将这 10 个应用程序部署到 10 个不同的 Web 服务器上

*   每个公司的注册最终用户将从他们的网络服务器下载应用程序。

我的问题是：1\. 我们可以使用具有临时分发的 iOS 开发者企业计划来做到这一点吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:54:57.887

你似乎把事情搞混了一点。

AdHoc 分发仅限于 100 台设备，并且仅适用于标准开发人员计划。标准开发程序也是唯一允许您通过 iTunes 分发应用程序的程序。

企业分发的设备数量不受限制。这些设备甚至不必在配置文件中注册。但是您不得在公司之外分发任何东西——即使是出于测试目的。

来自 Apple 自己的[支持页面](https://developer.apple.com/support/ios/enterprise.html)：

> 标准、企业和大学课程之间的主要区别是什么？
> 
> 标准个人和标准公司计划适用于创建免费和收费 iOS 应用程序以在 App Store 上分发的开发人员。
> 
> iOS 开发者企业计划适用于创建专有的内部 iOS 应用程序以仅在公司内部部署的公司。注册计划需要有效的 Dun & Bradstreet (DUNS) 编号。
> 
> iOS 开发者大学计划是一项免费计划，专为希望引入开发 iOS 应用程序的高等教育机构而设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:31:12.743

我认为这可能会有所帮助。我刚刚遇到它
[http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:31:24.597

是的，企业许可证将解决您的问题。但由于该应用程序正在为 10 家不同的公司部署，因此每家公司都应该使用他们的一个证书和配置文件来构建应用程序。

# java - 如何在 Hibernate 上比较同一实体的延迟加载对象？

> ID：10224282
> 
> 赞同：0
> 
> 时间：2012-04-19T08:25:58.833
> 
> 标签：java, hibernate, lazy-loading

在 Hibernate 上比较同一实体的延迟加载对象的最佳方法是什么？

```
//instanceC and instanceD are different objects of different classes

instanceC.getA().equals(instanceD.getA()) // false

instanceC.getA().getId() == insttanceD.getA().getId() // false! 
```

所以我最后要做的是：

```
int idA=instanceC.getA().getId();
int idB=instanceD.getA().getId();

a==b // true 
```

当然，它看起来非常弯曲。所以我最后决定是重写该`equals()`方法并隐藏这个烂摊子。

有没有更好（或正确）的解决方案？

注意：我检查了堆栈溢出问题*[Lazy-loaded NHibernate properties in Equals 和 GetHashCode](https://stackoverflow.com/questions/5002670)*等等。我不是要求解决方法。我想提出这个问题，以便提出更好或更准确的解决方案（如果存在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:42:33.583

比较 id 是正确的方法（但前提是数据库中 id 列上存在唯一索引）。唯一索引确保它是同一个实体。（一个例外是，如果您想比较两个实例以查看是否有修改，例如您想保存 - 那么您必须比较所有成员变量。）

返回什么`instanceA.getId()`？

如果`int`那时

```
instanceC.instanceA.getId()==insttanceD.instanceB.getId() 
```

应该运作良好。

如果`Integer`那么你必须使用

```
instanceC.instanceA.getId().equals(insttanceD.instanceB.getId()) 
```

可能是你的问题；如果不是，我不知道为什么 id 的比较不起作用。我总是比较 ids——即使是延迟加载——而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:07:23.473

要比较一个实体，您总是比较识别属性（在大多数情况下，一个名为 Id 的字段）。这是使它成为一个实体的重要组成部分。

id 当然永远不会延迟加载，所以这不是问题。您的实体的等号和哈希码必须以这样一种方式实现，即它们只考虑 id 和 id。我相信hibernate甚至期望它能够正常执行。

正常的（如果你问我的话，也是最好的）方法是：

```
equals(Object other){
        if (this == o) return true;
        if (o==null) return false;
        if (!Entity.class.isAssignableFrom(other.getClass()) return false;
        Entity otherEntity = (Entity) other;

        if (otherEntity.getId() == getId()) return true;
        if (otherEntity.getId() == null) return false;
        return otherEntity.getId().equals(getId());
}

hashCode(){
   if (getId()) == null return super.hashCode();
   return getId().hashCode();
} 
```

# python - 解析 HTML 表格的内容 - 但 iframe 是问题的根源

> ID：10224287
> 
> 赞同：-2
> 
> 时间：2012-04-19T08:26:27.173
> 
> 标签：python, html, parsing, iframe, beautifulsoup

今天的最后一个问题。我正在尝试找到一种方法来解析此页面表格的内容：[http](http://www7.pearsonvue.com/Dispatcher?application=VTCLocator&action=actStartApp&v=W2L&cid=445) ://www7.pearsonvue.com/Dispatcher?application=VTCLocator&action=actStartApp&v=W2L&cid=445 in a var，用于将其放入 Excel文件。

用 BeautifulSoup 解析后将数据放入 excel 没有问题。

但是（总是有一个“但是”）源代码很奇怪，里面有一个 iframe。

```
#!/usr/bin/python
# -- coding: utf-8 --

import xlwt
import urllib2
import sys
import re
from bs4 import BeautifulSoup as soup
import urllib

print("TEST FOR PTE TESTS CENTERS")

url = 'http://www6.pearsonvue.com/Dispatcher?application=VTCLocator&action=actStartApp&v=W2L&cid=445'
values = {
        'sortColumn' : 2,
        'sortDirection' : 1,
        'distanceUnits' : 0,
        'proximitySearchLimit'  : 20,
        'countryCode'  : 'GBR', # WE TRY FOR NOW WITH A SPECIFIC COUNTRY

            }

user_agent = 'Mozilla/5 (Solaris 10) Gecko'
headers = { 'User-Agent' : user_agent }

data = urllib.urlencode(values)
req = urllib2.Request(url, data, headers)
response = urllib2.urlopen(req)
thePage = response.read()
the_page = soup(thePage)

result = the_page.find('frame', attrs={'name' : 'VTCLocatorPageFrame'})
print result # We have now the FRAME link in the result var 
```

所以请在上面找到我正在尝试工作的脚本的来源。

运行脚本后，我们在结果 var 中有这个：

如果您有任何想法，它可能会非常有帮助:)

在此先感谢并通过 python ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:33:08.723

很抱歉这个问题不是很清楚。我试图找到一个解决方案，这是我使用的脚本：

```
#!/usr/bin/python
# -- coding: utf-8 --

import xlwt
import urllib2
import sys
import re
from bs4 import BeautifulSoup as soup
import urllib
liste_countries = ['USA','AFG','ALA','ALB','DZA','ASM','AND','AGO','AIA','ATA','ATG','ARG','ARM','ABW','AUS','AUT','AZE','BHS','BHR','BGD','BRB','BLR','BEL','BLZ','BEN','BMU','BTN','BOL','BES','BIH','BWA','BVT','BRA','IOT','BRN','BGR','BFA','BDI','BDI','KHM','CMR','CAN','CPV','CYM','CAF','TCD','CHL','CHN','CXR','CCK','COL','COM','COG','COD','COK','CRI','CIV','HRV','CUW','CYP','CZE','DNK','DJI','DMA','DOM','ECU','EGY','SLV','GNQ','ERI','EST','ETH','FLK','FRO','FJI','FIN','FRA','GUF','PYF','ATF','GAB','GMB','GEO','DEU','GHA','GIB','GRC','GRL','GRD','GLP','GUM','GTM','GGY','GIN','GNB','GUY','HTI','HMD','HND','HKG','HUN','ISL','IND','IDN','IRN','IRQ','IRL','IMN','ISR','ITA','JAM','JPN','JEY','JOR','KAZ','KEN','KIR','PRK','KOR','KWT','KGZ','LAO','LVA','LBN','LSO','LBR','LBY','LIE','LTU','LUX','MAC','MKD','MDG','MWI','MYS','MDV','MLI','MLT','MHL','MTQ','MRT','MUS','MYT','MEX','FSM','MDA','MCO','MNG','MNE','MSR','MAR','MOZ','MMR','NAM','NRU','NPL','NLD','NCL','NZL','NIC','NER','NGA','NIU','NFK','MNP','NOR','OMN','PAK','PLW','PSE','PAN','PNG','PRY','PER','PHL','PCN','POL','PRT','PRI','QAT','REU','ROU','RUS','RWA','BLM','KNA','LCA','MAF','WSM','SMR','STP','SAU','SEN','SRB','SYC','SLE','SGP','SXM','SVK','SVN','SLB','SOM','ZAF','SGS','SSD','ESP','LKA','SHN','SPM','VCT','SDN','SUR','SJM','SWZ','SWE','CHE','TWN','TJK','TZA','THA','TLS','TKL','TON','TTO','TUN','TUR','TKM','TCA','TUV','UGA','UKR','ARE','GBR','URY','UMI','UZB','VUT','VAT','VEN','VNM','VGB','VIR','WLF','ESH','YEM','ZMB','ZWE']

name_doc_out = raw_input("What do you want for name for the Excel output document ? >>> ")
wb = xlwt.Workbook(encoding='utf-8')
ws = wb.add_sheet("PTE_TC")
x = 0
y = 0
numero = 0
total = len(liste_countries)
total_city = len(villes_us)
number_city = 0
for liste in liste_countries:
            if 0 == 1:
                        print("THIS IF IS JUST FOR TEST")
            else:
                        print("Fetching country number %s on %s" % (numero, total))
                        numero = numero + 1
                        url = 'http://www6.pearsonvue.com/Dispatcher?v=W2L&application=VTCLocator&HasXSes=Y&layerPath=ROOT.VTCLocator.SelTestCenterPage&wscid=199372577&layer=SelTestCenterPage&action=actDisplay&bfp=top.VTCLocatorPageFrame&bfpapp=top&wsid=1334887910891'
                        values = {
                                'sortColumn' : 2,
                                'sortDirection' : 1,
                                'distanceUnits' : 0,
                                'proximitySearchLimit'  : 20,
                                'countryCode'  : liste,

                                    }

                        user_agent = 'Mozilla/5 (Solaris 10) Gecko'
                        headers = { 'User-Agent' : user_agent }

                        data = urllib.urlencode(values)
                        req = urllib2.Request(url, data, headers)
                        response = urllib2.urlopen(req)
                        thePage = response.read()
                        the_page = soup(thePage)

                        #print the_page
                        tableau = the_page.find('table', attrs={'id' : 'apptable'})
                        print tableau
                        try:
                                    rows = tableau.findAll('tr')
                                    for tr in rows:
                                                cols = tr.findAll('td')
                                                # del / remove les td qui faut pas
                                                y = 0
                                                x = x + 1
                                                for td in cols:
                                                            print td.text
                                                            ws.write(x,y,td.text.strip())
                                                            wb.save("%s.xls" % name_doc_out)
                                                            y = y + 1
                        except (IndexError, AttributeError):
                                    pass 
```

我认为问题来自我使用的 URL。我猜 id 正在从请求更改为另一个... *http://www6.pearsonvue.com/Dispatcher?v=W2L&application=VTCLocator&HasXSes=Y&layerPath=ROOT.VTCLocator.SelTestCenterPage&wscid=199372577&layer=SelTestCenterPage&action=actDisplay&bfp=top.VTCLocatorPageFrame&bfpapp =顶部&wsid=1334887910891*

它已经工作了一个小时，现在不行了！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T11:28:53.377

如果您必须过滤/解析 iframe，代码在这里...

```
from bs4 import BeautifulSoup
import urllib2

page = urllib2.urlopen("put_ur_url")
soup = BeautifulSoup(page)
    for link in soup.findAll('iframe'):
        if link['src'].startswith('start_of_path'):
            print(link) 
```

# asp.net - executereader 中受影响的行 -1 - 类似查询

> ID：10224291
> 
> 赞同：0
> 
> 时间：2012-04-19T08:26:42.523
> 
> 标签：asp.net, c#-4.0

我正在使用一个类似的查询，它在调试时给我受影响的行为-1，而当我在 sql server 中运行相同的查询时返回我 1 个受影响的行

```
 public ResultClass fn_GetUserMasterSearch(UserMasterClass objusmspass)
    {
        UserMasterClass objusms = null;
        eslist<UserMasterClass> objusList = null;

        try
        {
            objConnection = new SqlConnection(ConfigurationManager.AppSettings["connectionstring"].ToString());
            objConnection.Open();
            StringBuilder strquery = new StringBuilder();
            StringBuilder strWhere = new StringBuilder();
            objCommand = new SqlCommand();
            strquery.Append("select user_id,user_name,user_type,default_company_code,created_by,created_on,updated_on from user_master where");

            if (objusmspass.struser_name != "")
            {
                strWhere.Append(" user_name like @user_name ");
                objCommand.Parameters.AddWithValue("@user_name", objusmspass.struser_name);
            }
            if (objusmspass.struser_type != "")
            {
                if (strWhere.ToString() != null)
                    strWhere.Append(" and ");
                strWhere.Append(" user_type like @user_type ");
                objCommand.Parameters.AddWithValue("@user_type", objusmspass.struser_type);
            }
            if (objusmspass.strcompany_code != "")
            {
                if (strWhere.ToString() != null)
                    strWhere.Append(" and ");
                strWhere.Append(" company_code like @company_code ");
                objCommand.Parameters.AddWithValue("@company_code", objusmspass.strcompany_code);
            }

            if (objusmspass.icreated_by != 0)
            {
                if (strWhere.ToString() != null)
                    strWhere.Append(" and ");
                strWhere.Append(" created_by like @created_by ");
                objCommand.Parameters.AddWithValue("@created_by", objusmspass.icreated_by);
            }
            if (objusmspass.dtcreated_on != null)
            {
                if (strWhere.ToString() != null)
                    strWhere.Append(" and ");
                strWhere.Append(" created_on like @created_on ");
                objCommand.Parameters.AddWithValue("@created_on", objusmspass.dtcreated_on);
            }
            if (objusmspass.dtupdated_on != null)
            {
                if (strWhere.ToString() != null)
                    strWhere.Append(" and ");
                strWhere.Append(" updated_on like @updated_on ");
                objCommand.Parameters.AddWithValue("@updated_on", objusmspass.dtupdated_on);
            }
            objCommand.CommandText = strquery.ToString() + strWhere.ToString();
            objCommand.Connection = objConnection;           
            objReader = objCommand.ExecuteReader();

            objusList = new eslist<UserMasterClass>();

            while(objReader.Read())
            {
                objusms = new UserMasterClass();
                objusms.iuser_id = Convert.ToInt32(objReader["user_id"].ToString().Trim());
                objusms.struser_name = objReader["user_name"].ToString().Trim();
                objusms.struser_type = objReader["user_type"].ToString().Trim();
                objusms.strcompany_code = objReader["default_company_code"].ToString().Trim();
                objusms.icreated_by = Convert.ToInt32(objReader["created_by"].ToString().Trim());
                objusms.dtcreated_on = objReader["created_on"]==DBNull.Value?DateTime.Now:Convert.ToDateTime(objReader["created_on"].ToString().Trim());
                objusms.dtupdated_on = objReader["updated_on"]==DBNull.Value?DateTime.Now:Convert.ToDateTime(objReader["updated_on"].ToString().Trim());
                objusList.Add(objusms);

            }

            return new ResultClass(true, "User Exist", objusList, int.Parse(objReader["user_id"].ToString()), null);
        } 
```

我在这条线上收到错误

```
while(objReader.Read()) 
```

调试结果显示受影响的行为 -1。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:19:30.987

尝试以下操作：

而不是使用：

```
objCommand.Parameters.AddWithValue("@user_name", objusmspass.struser_name); 
```

利用：

```
objCommand.Parameters.Add(new SqlParameter("@user_name", DbType.Int){ Value = objusmspass.struser_name})); 
```

可能是字段类型的问题。您必须通过正确类型的数据库字段替换示例中的 DbType.Int。

# java - 更改接口中定义的常量

> ID：10224294
> 
> 赞同：-4
> 
> 时间：2012-04-19T08:26:56.450
> 
> 标签：java, interface, constants

我有托管应用程序所需常量的接口。我希望能够在运行时进行更改，因为它们取决于各种条件。我创建了一个小类，它将有处理常量的方法。在这个类中，我用常量实现了接口，我可以访问它们，但我不能改变它们的内容。我知道常量应该是稳定的而不改变，但是，有什么办法可以改变它们吗？

谢谢

**编辑：**

当然这不是我的想法，我需要更改现成的库，这应该取决于 Android 制造商。我在问是否有其他方法然后重新实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:31:45.323

“变化”和“恒定”这两个词并不能很好地相互配合。因此，术语“变量”（可以*变化*的事物）。;-)

您可以使用[`final`variables](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)来实现您正在寻找的东西。这些是只能分配*一次*的变量。你不能把它们放在一个 上`interface`，但你可以让它们成为一个单例的成员，这个单例被初始化并将决赛设置为适当的运行时值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:28:59.887

常数正是他们在锡上所说的！

您可能想尝试不使用 contants 并阅读静态、私有、公共等！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:28:16.537

编译器通常内联编译时知道的常量。这意味着即使您使用反射更改值，它也不会总是更改使用常量的位置。

解决此问题的方法是使您的“常量”动态化。例如

```
interface Constants {
    int MAX_VALUE = Integer.getInteger("max.value", Integer.MAX_VALUE);
    String USER_HOME = System.getProperty("user.home");
} 
```

# ruby-on-rails - 在可安装导轨的引擎中添加资产路径？

> ID：10224296
> 
> 赞同：12
> 
> 时间：2012-04-19T08:27:00.987
> 
> 标签：ruby-on-rails, rails-engines

如何添加`vendor/assets/javascripts/mymountableengine`或添加`vendor/assets/stylesheets/mymountableengine`到我的可安装引擎的资产路径？我希望能够在我的可挂载引擎的 application.js/application.css 文件中使用链轮从这些文件夹中获取文件。

导轨 3.2.2

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:09:27.680

原来他们已经加载了！只需将它们放在错误的目录中：`engine/vendor/assets/javascripts/engine`- 将它们放入`engine/vendor/assets/javascripts`使它们成为必需。对于其他人，只需检查`Rails.application.config.assets.paths`加载了哪些路径，我相信引擎使用父母 Sprockets 环境，所以添加路径只需使用`Rails.application.config.assets.paths << "path/here"`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-30T10:00:37.680

我喜欢这样：

```
module MyEngine
  class Engine < ::Rails::Engine

    config.assets.paths << File.expand_path("../../assets/stylesheets", __FILE__)
    config.assets.paths << File.expand_path("../../assets/javascripts", __FILE__)
    config.assets.precompile += %w( my_engine.css )

  end
end 
```

# c# - XML 运行时错误/对象引用未设置为对象的实例。（使用 C#）

> ID：10224299
> 
> 赞同：0
> 
> 时间：2012-04-19T08:27:18.677
> 
> 标签：c#, xml, runtime-error, object-reference

我正在寻找一个聪明的向导来指引我正确的方向。我正在使用 XML 和 C# 制作一个模拟漫画数据库。除了我的编辑页面外，一切都非常出色。在我的本地主机上，我得到一个对象引用错误，在我的主机上，我得到一个运行时错误。

直播页面在这里：（登录用户名是Administrator，密码是adminpass！）
[http://www.lmabee.com/test/XMLProject/Admin/comicsEdit.aspx?id=2](http://www.lmabee.com/test/XMLProject/Admin/comicsEdit.aspx?id=2)

我的代码如下：

comicsEdit.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Admin/adminMaster.master" AutoEventWireup="true" CodeFile="comicsEdit.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content2" ContentPlaceHolderID="center" Runat="Server">
<asp:Label ID="lblOutput" runat="server"  Visible="true" />
<asp:Panel ID="pnlEdit" runat="server" Visible="false">
    <h1>
        Edit Comic Database
    </h1>

    <div id="divMessage">
    <asp:Label ID="lblMessage" runat="server"></asp:Label></div>
    <table>
        <tr>
            <td >
                <asp:Label ID="lblTitle" runat="server" Text="Label">Title:</asp:Label>
            </td>
            <td>
                <asp:TextBox ID="txtTitle" runat="server" Width="200px"></asp:TextBox>
                <asp:RequiredFieldValidator ID="val1" runat="server" ErrorMessage="Please enter a title"
                    Display="Dynamic" ControlToValidate="txtTitle"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td >
                <asp:Label ID="lblIssue" runat="server" Text="Label">Issue:</asp:Label>
            </td>
            <td>
                <asp:TextBox ID="txtIssue" runat="server" Width="200px"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="Please enter a Issue"
                    Display="Dynamic" ControlToValidate="txtIssue"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td >
                <asp:Label ID="lblDesc" runat="server" Text="Label">Description:</asp:Label>
            </td>
            <td>
                <asp:TextBox ID="txtDesc" runat="server"  Width="200px" Height="200px" TextMode="MultiLine"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="Please enter a Description"
                    Display="Dynamic" ControlToValidate="txtDesc"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td  colspan="2">
                <asp:Button ID="btnEdit" OnClick="btnEdit_Click" runat="server" Text="Update Comic">
                </asp:Button>
            </td>
        </tr>
    </table>
</asp:Panel>
</asp:Content> 
```

我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml;

public partial class _Default : System.Web.UI.Page
{
int intComicID;
XmlDocument myXmlDocument = new XmlDocument();
XmlNode rootNode;
XmlNode GrabComic;

public void Page_Load(object Src, EventArgs E)
{
    if (!Page.IsPostBack)
    {

        intComicID = Convert.ToInt32(Request.QueryString["id"]);

        if (intComicID == null || intComicID.ToString() == "0")
        {// doesn't include id parameter 
            lblOutput.Visible = true;
            lblOutput.Text = "no item selected.";
        }

        else
        {// id has value
            myXmlDocument.Load(Request.PhysicalApplicationPath + @"comic.xml");
            XmlNode rootNode = myXmlDocument.DocumentElement;
            GrabComic = rootNode.ChildNodes[intComicID - 1];

            if (GrabComic == null)
            {// invalid id
                lblOutput.Visible = true;
                lblOutput.Text = "item doesn't exist.";
            }
            else
            {// valid id
                pnlEdit.Visible = true;
                txtTitle.Text = GrabComic.ChildNodes[0].InnerText;
                txtIssue.Text = GrabComic.ChildNodes[1].InnerText;
                txtDesc.Text = GrabComic.ChildNodes[2].InnerText;
            }
        }
    }

}

public void btnEdit_Click(object sender, EventArgs e)
{
    GrabComic.ChildNodes[0].InnerText = txtTitle.Text;
    GrabComic.ChildNodes[1].InnerText = txtIssue.Text;
    GrabComic.ChildNodes[2].InnerText = txtDesc.Text;

    myXmlDocument.Save(Request.PhysicalApplicationPath + @"comic.xml");

    lblMessage.Text = "You have successfully updated the Database";
}
} 
```

我受够了，我现在从头开始写这个文件 6 次。有人愿意为这个悲伤的树液阐明这个问题吗？我会真的，真的很感激。在过去的 48 天里，我目前正在为 3 小时的睡眠工作，所以老实说，我会亲吻你的脚。

最好的！劳拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:40:03.610

`myXmlDocument`调用时可能未加载问题`btnEdit_Click`

```
string file = Path.Combine(Request.PhysicalApplicationPath, "comic.xml");
if(File.Exists(file))
{
    myXmlDocument.Load(file);
    XmlNode rootNode = myXmlDocument.DocumentElement;
    if(rootNode !=null && rootNode.ChildNodes.Count> intComicID)
    {
       GrabComic = rootNode.ChildNodes[intComicID - 1];
            if (GrabComic == null)
            {// invalid id
                lblOutput.Visible = true;
                lblOutput.Text = "item doesn't exist.";
            }
            else
            {// valid id
                pnlEdit.Visible = true;
                txtTitle.Text = GrabComic.ChildNodes[0].InnerText;
                txtIssue.Text = GrabComic.ChildNodes[1].InnerText;
                txtDesc.Text = GrabComic.ChildNodes[2].InnerText;
            }
    }

} 
```

在您的 btnEdit_Click 方法中

```
public void btnEdit_Click(object sender, EventArgs e)
{
    if(myXmlDocument != null && GrabComic != null && GrabComic.ChildNodes.Count >3){

        GrabComic.ChildNodes[0].InnerText = txtTitle.Text; 
        GrabComic.ChildNodes[1].InnerText = txtIssue.Text;
        GrabComic.ChildNodes[2].InnerText = txtDesc.Text;
        myXmlDocument.Save(Path.Combine(Request.PhysicalApplicationPath, "comic.xml"));

        lblMessage.Text = "You have successfully updated the Database";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:41:06.967

为什么你只是看不到堆栈跟踪？我猜您的 ChildNodes[0] 之一或全部为空。或者只是在您的方法上设置一个断点并确保您的对象不为空。

# ios - 如何更改 UISegmented 控件标题颜色

> ID：10224303
> 
> 赞同：1
> 
> 时间：2012-04-19T08:27:29.030
> 
> 标签：ios, title, uisegmentedcontrol

xib文件中有一个UISegmentedControl，我想在选中时更改标题颜色，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:43:47.193

在（iOS 5 及更高版本）中执行此操作的最简单方法是使用`-setTitleTextAttributes: forState:`.

例子： `[segmentedControl setTitleTextAttributes:@{ UITextAttributeTextColor : [UIColor lightGrayColor] } forState:UIControlStateSelected];`

文档：[UISegmentedControl 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/doc/uid/TP40006807)

# android - Android 中 Google APIS 的向后兼容性

> ID：10224305
> 
> 赞同：0
> 
> 时间：2012-04-19T08:27:34.560
> 
> 标签：android, google-api, build-target

我正在尝试导入示例代码

**构建目标：Google APIS 1.6**

**最小SDK：4**

我已经下载了 Android API 4，但我在 SDK Manager 上找到的最低 Google APIS 版本是 8。

Eclipse 创建一个没有类的空白项目并抛出`AndroidManifest.xml file missing!`

有几点我不明白：

当我使用 Google APIS 创建项目时，只有 Google APIS 版本很重要吗？我忘记了Android API？

Google APIS 版本是否向后兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:38:47.837

Google API SDK 应该从 1.6 及更高版本开始提供。它们包含该版本的基本 SDK，以及 C2DM 等其他 API。不知道你的意思是向后兼容性。一个 2.2 版本的 SDK 应该可以使用 1.6。API 调用。

# java - 位图解码的 3001616 字节分配错误导致内存不足

> ID：10224306
> 
> 赞同：0
> 
> 时间：2012-04-19T08:27:36.287
> 
> 标签：java, android

我实际上在方法 Load image inside 上遇到了这个错误我正在做
我将选项大小设置为：

`bmOptions.inSampleSize = 1`;

错误点线的方法`decodeStream()`..

```
private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();

        } catch (IOException e1) {

            return null;
        }
        return bitmap;

    } 
```

> ```
> E/dalvikvm-heap(8627): Out of memory on a 3001616-byte allocation.
> at decodeStream()
> at loadImage() 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:32:16.157

以下是将文件解码为指定比例的代码。

```
 File f = new File(StringfileName);
    Bitmap bm = decodeFile(f);

    private static Bitmap decodeFile(File f) {
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // The new size we want to scale to
        final int REQUIRED_SIZE = 150;

        // Find the correct scale value. It should be the power of 2.
        int scale = 1;
        while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                && o.outHeight / scale / 2 >= REQUIRED_SIZE)
            scale *= 2;

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        o.inJustDecodeBounds = false;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:35:26.980

此类以内存有效的方式将图像缩放到精确的大小，它还进行一些自动旋转，您可能想要禁用它或传递角度。基于此处的帖子：http: [//zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/](http://zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/)

```
import java.io.IOException;

import java.io.InputStream;

import android.content.ContentResolver;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.net.Uri;

/**
 * http://zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/
 * 
 */
public final class 

BitmapScaler {

    /**
     * 
     * @param uri
     * @param context
     * @param newWidth
     *            Image will not exceed this width
     * @param newHeight
     *            Image will not exceed this height
     * @return
     * @throws IOException
     */
    public static Bitmap ScaleBitmap(Uri uri, Context context,
            int newWidth, int newHeight, int targetWidth, int targetHeight)
            throws IOException {
        final ContentResolver contentResolver = context.getContentResolver();
        int sample = 1;
        {
            InputStream is = contentResolver.openInputStream(uri);
            try {
                sample = getRoughSize(is, newWidth, newHeight);
            } finally {
                is.close();
            }
        }
        {
            InputStream is = contentResolver.openInputStream(uri);
            try {
                Bitmap temp = roughScaleImage(is, sample);
                try {
                    return scaleImage(temp, newWidth, newHeight, targetWidth,
                            targetHeight);
                } finally {
                    temp.recycle();
                }
            } finally {
                is.close();
            }
        }
    }

    private static Bitmap scaleImage(final Bitmap source, final int maxWidth,
            final int maxHeight, final int targetWidth, final int targetHeight) {

        int newWidth = maxWidth;
        int newHeight = maxHeight;

        final int sourceHeight = source.getHeight();
        final int sourceWidth = source.getWidth();
        final int angle = sourceHeight > sourceWidth ? -90 : 0;
        final boolean rotate = angle != 0;
        final boolean nintey = (angle == 90) || (angle == -90);
        final int width = nintey ? sourceHeight : sourceWidth;
        final int height = nintey ? sourceWidth : sourceHeight;

        final float scaleByWidth = ((float) newWidth / width);
        int testNewHeight = (int) (height * scaleByWidth);

        float scale;

        if (testNewHeight > newHeight) { // then we must scale to match
                                            // newHeight instead of new width
            final float scaleByHeight = ((float) newHeight / height);
            newWidth = (int) (width * scaleByHeight);
            scale = scaleByHeight;
        } else {
            // accept the scale
            newHeight = testNewHeight;
            scale = scaleByWidth;
        }

        Matrix matrix = new Matrix();
        matrix.postScale(scale, scale);
        if (rotate) {
            matrix.postRotate(angle);
            matrix.postTranslate(0, newHeight);
        }
        matrix.postTranslate((maxWidth - newWidth) / 2,
                (maxHeight - newHeight) / 2);

        Bitmap b = Bitmap.createBitmap(targetWidth, targetHeight,
                Bitmap.Config.ARGB_8888);
        Paint p = new Paint(Paint.FILTER_BITMAP_FLAG);
        Canvas c = new Canvas(b);
        c.drawBitmap(source, matrix, p);
        return b;
    }

    private static Bitmap roughScaleImage(InputStream is, int sample) {
        BitmapFactory.Options scaledOpts = new BitmapFactory.Options();
        scaledOpts.inSampleSize = sample;
        return BitmapFactory.decodeStream(is, null, scaledOpts);
    }

    private static int getRoughSize(InputStream is, int newWidth, int newHeight) {
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(is, null, o);

        return getRoughSize(o.outWidth, o.outHeight, newWidth, newHeight);
    }

    private static int getRoughSize(int width, int height, int newWidth,
            int newHeight) {
        int sample = 1;

        while (true) {
            if (width / 2 < newWidth || height / 2 < newHeight) {
                break;
            }
            width /= 2;
            height /= 2;
            sample *= 2;
        }
        return sample;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:56:34.087

看看这个文档[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。我之前也有同样的问题。

# variables - 在 JMeter 的变量中引用变量

> ID：10224307
> 
> 赞同：19
> 
> 时间：2012-04-19T08:27:52.960
> 
> 标签：variables, jmeter

我正在使用 JMeter。我想使用用户定义的变量指定测试主机，如下所示：

```
variable name       value  
localhost           localhost  
test                192.168.0.1
hostname            ${localhost} 
```

执行测试，我看到主机名值没有被替换，显然测试失败了。我知道我可以使用属性并从命令行传递主机名，或者只是更改主机名值。有可能像我解释的那样吗？
谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T09:02:53.833

我设法解决了我的问题。我已将主机名变量值更改为：`${__evalVar(${localhost})}`，但出现此错误：

> ERRROR jmeter.functions.EvalVarFunction：尚未定义变量

因此，我将主机名变量声明移到了 Sampler 节点的“用户定义变量”子节点中。那解决了它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-24T18:24:31.957

要解决这个问题，你应该使用 hostname = ${__eval(${localhost})}
[http://jmeter.apache.org/usermanual/functions.html#__eval](http://jmeter.apache.org/usermanual/functions.html#__eval)
卡洛斯的回答有一个错误（我不能评论由于to rep) 因为它使用 evalVar，所以这需要一个纯字符串作为参数：

> 这有效：${__evalVar(localhost)})
> 这有效：${__eval(${localhost})}
> 这无效（当前答案）：${__evalVar(${localhost})} [http://jmeter .apache.org/usermanual/functions.html#__evalVar](http://jmeter.apache.org/usermanual/functions.html#__evalVar)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-27T06:44:45.917

查看这个论坛： [来自 Blazemeter](https://www.blazemeter.com/blog/here%E2%80%99s-what-do-combine-multiple-jmeter-variables/)

例如：获取变量“listid_XXX”的值，其中 XXX 编号来自索引变量：

```
${__V(listid_${idx1})} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T09:04:17.090

新的较新版本（从 2.2 开始），您可以使用`${__V(${...})}/`.

前任：`${__V(${SERVER_CONTEXT})}/rest`

正如@Alies Belik 提到的，如果你得到

```
ERRROR jmeter.functions.EvalVarFunction: Variables have not yet been defined 
```

然后在下一个其他 UDV（用户定义变量）节点中定义第二个变量。

# jquery - 选择标签上的jquery .change事件在chrome上工作很奇怪

> ID：10224308
> 
> 赞同：0
> 
> 时间：2012-04-19T08:27:53.807
> 
> 标签：jquery, google-chrome

我有一个 AJAX 系统设置，可以帮助用户选择一个州，然后选择相应的城市和邮政编码。

问题是`.change()`事件无法在 chrome 上运行。只要我使用鼠标并进行任何工作，一切都很好，但是当我切换到键盘时，它就死了。`.change()`每次点击键盘都会触发该事件。

相同的脚本在 Firefox 中运行良好。在这里工作的鼠标与 chrome 相同。但是当我使用键盘时，它不会触发`.change()`事件。它会在模糊或按下回车键时触发它。

我正在寻找 chrome 的解决方法，以便它开始以与 Firefox 相同的方式工作。

我还没有测试过其他浏览器。

编辑：
我不愿意使用`.blur()`或`.click()`事件，因为这对普通用户来说会更痛苦，因为如果他们错误地单击或跳过选择标签而不更改值，ajax 将再次被触发。

我的代码都很好。

```
$('#state').change(function(event) {}); 
```

这条线应该适用于更改事件，直到我在 chrome 上使用我的键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:48:45.227

为什么不绑定更改和按键事件，这应该让你在所有浏览器上工作.. 从而定义你的回调函数而不是匿名的。

```
function changeCallback(){}

$("#state").change(changeCallback).keypress(changeCallback); 
```

# jquery - 检测附加到元素的插件

> ID：10224313
> 
> 赞同：0
> 
> 时间：2012-04-19T08:28:07.507
> 
> 标签：jquery

我想检测与一个元素关联的所有插件，例如如果循环插件与 id 为循环的 div 相关联，那么我想访问循环插件。

我这样做是因为在我的网站上我使用了很多插件，比如循环、fancybox、colorbox，并且我正在向用户提供图库和幻灯片编辑工具，所以当用户添加任何图像时，我会检测到插件并重新初始化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:14:24.407

我怀疑你会找到一种适用于任何插件的方法。您必须了解如何单独检测每个插件（请参阅[如何检查 jQuery UI 插件是否附加到元素？](https://stackoverflow.com/questions/1679051/how-to-check-if-a-jquery-ui-plugin-is-attached-to-an-element)例如）并编写一个执行每个检查的函数。

# asp.net-mvc - 如何始终在 mvc 应用程序中获得正确的子域？

> ID：10224318
> 
> 赞同：0
> 
> 时间：2012-04-19T08:28:21.603
> 
> 标签：asp.net-mvc

我有一些 MVC 应用程序。它们设置在我本地机器上的虚拟目录中。在现场，它们是在根网站安装上设置的。

这意味着这两种情况下的图像都将是......

当地的

```
/mysite/images/image1.jpg 
```

开发者

```
/images/image1.jpg 
```

我看过`@Url`助手，但看不到我应该用它做什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:09:11.303

在 ASP.NET MVC 中生成 url 时，应始终使用 url 助手。例如，而不是：

```
<img src="/images/image1.jpg" /> 
```

你应该写：

```
<img src="@Url.Content("~/images/image1.jpg")" /> 
```

# javascript - 阻止用户查看我的 JavaScript 源文件

> ID：10224320
> 
> 赞同：3
> 
> 时间：2012-04-19T08:28:30.203
> 
> 标签：javascript, protection

如何阻止用户查看我的网站源代码和打开我的 JavaScript 源文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:33:55.543

用户代理需要查看和解释 javascript 的内容。因此，除非您的脚本属于服务器端程序（如 node.js），否则您无法阻止用户代理访问脚本并导致用户打开 javascript 源文件。

但是，您可以做的是使用混淆工具，这会使您的 javascript 代码难以被人类阅读。有了足够的持久性，即使这也可以进行逆向工程。这种混淆工具的一个例子是[闭包编译器](https://developers.google.com/closure/compiler/)。

因此，您可以维护两个版本。一个版本不为调试目的而混淆，一个版本用于发布模式。此外，注意这些混淆工具中的错误可能会导致调试噩梦。

# javascript - PartialView 返回时将 Javascript 绑定到 DOM 元素

> ID：10224327
> 
> 赞同：1
> 
> 时间：2012-04-19T08:29:03.510
> 
> 标签：javascript, asp.net-mvc-3

尽管我已经有一些经验，但我对 ASP.NET MVC 3 的世界还是很陌生。我正在尝试实现如下功能：

1.  对一些返回 HTML 片段的 MVC 控制器进行 AJAX 调用
2.  返回该片段时，我想将一些 JavaScript (jQuery) 事件绑定到它的元素

我看到它的方式我有一些选择来解决它：

1.  返回一个将这些元素绑定到事件的脚本块：我不想使用，因为我想将所有脚本块标签放在一个中心位置。
2.  编写一个 JavaScript 函数，并在 AJAX 调用成功返回后调用它。虽然这可能很干净，但如果我在代码的不同位置进行相同的 AJAX 调用，我必须在每次调用中写下该函数的名称（对我来说似乎很愚蠢..）

为了完善第二个选项，我可能会使用一个 HTML 助手来生成 AJAX 调用。

我在这里缺少一些最佳实践吗？

如果还有什么不清楚的地方，请发表评论，我会尽力澄清。

谢谢。

# sql - 使用 sql 创建重复项

> ID：10224328
> 
> 赞同：3
> 
> 时间：2012-04-19T08:29:06.527
> 
> 标签：sql, sql-server, tsql

起初这听起来有点令人困惑。但是我有一个包含数据的表，我想创建该表中所有行的副本。所以，如果我这样做：

```
SELECT *
FROM the_table 
```

它列出了该表中的所有数据。现在，我想创建所有返回结果的副本，除了我想更改一列（日期）的数据。这将使新行独一无二。

我想这样做的原因是因为我想在这个表中得到更多的数据，因为我用它来构建统计数据用于测试目的。所以，如果我有这个：

```
**Column1   Column2   Column3**
abc       aaa         bbb
abcd      aaaa        bbbb
abcde     aaaaa       bbbbb

The table will now contain:
**Column1   Column2   Column3**
abc       aaa         bbb
abcd      aaaa        bbbb
abcde     aaaaa       bbbbb
abc       aaa         bbb_new
abcd      aaaa        bbbb_new
abcde     aaaaa       bbbbb_new 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:31:58.633

```
insert into your_table
   select col1, col2, concat(col3, '_new') from your_table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T08:36:14.143

考虑在您的表上进行[笛卡尔联接。](http://c2.com/cgi/wiki?CartesianJoin)这将快速为您提供更多数据:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T08:31:57.103

```
INSERT INTO TABLEDUPLICATES
SELECT * FROM the_table

SELECT * FROM TABLEDUPLICATES UNION 
SELECT * FROM the_table 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T08:46:47.530

假设有一个标识列 (ID)，您可能会像这样生成日期 (A_Date)：

```
insert into the_table (Column1, Column2, A_Date)
select Column1, Column2, A_Date + (rand(ID) - 0.5) * 100
  from the_table 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T08:54:35.130

要复制行（所有列），您只需使用

```
insert into tblname
select * from tblname 
```

将一列可以修改为

```
insert into tblname
select column1, column2, 'fixedvalueforcolumn3' from tblname 
```

但是您需要第 3 列的唯一值，因此您必须将 'fixedvalueforcolumn3' 更改为将为第 3 列生成一些随机（唯一）值（在您的情况下为日期）的函数

```
insert into tblname
    select column1, column2, generateRandomValue() from tblname 
```

希望对你有帮助

# iphone - 仅在一个特定的视图控制器中隐藏拆分视图

> ID：10224329
> 
> 赞同：0
> 
> 时间：2012-04-19T08:29:08.893
> 
> 标签：iphone, objective-c, ios

我有一个在 Application Delegate 类中设置的 SplitView 控制器。现在我想这样做，我只想在一个特定的视图控制器中隐藏拆分视图，否则它将被显示。我知道隐藏拆分视图的方法，但它将被隐藏或显示在所有视图控制器中我如何才能为特定的一个视图控制器做到这一点。

- 提前感谢

# iphone - 通过推送通知管理 iphone 徽章

> ID：10224337
> 
> 赞同：0
> 
> 时间：2012-04-19T08:30:02.193
> 
> 标签：iphone, badge

我们需要 iphone 在不初始化应用程序的情况下增加推送通知到达时的徽章数值。fe 标记值为 1 的通知到达并显示在应用程序图标上。然后另一个标记值为 2 的通知到达。2 代替了徽章上的 1，但我们想让它成为 1+2=3。服务器端的解决方法是解决这个问题的唯一方法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:35:55.070

是的，服务器端工作是唯一的方法..

您将从服务器发送的值将设置为图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:49:11.747

无论您发送给应用程序的值是什么，该值都将显示在应用程序图标的顶部，该值可能是 4 或 90 或 100 .. 如果您想做 1+2=3 之类的操作，只需动态增加徽章编号IE `Present badge number = Present badge number+2;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:37:47.013

只需将“**徽章：+2** ”传递给APP，数量就会增加

# iphone - 使用drawRect绘图：对性能很重？

> ID：10224339
> 
> 赞同：1
> 
> 时间：2012-04-19T08:30:05.940
> 
> 标签：iphone, performance, drawrect

我正在编写一个数学应用程序，用户可以在其中绘制几个数学图形，如圆形、正方形、线条等……我正在使用当前图形上下文、Quartz 2D、UIView 和`drawRect:`方法直接在屏幕上绘制。

我不确定我在问什么，但是这种绘图方式是否`drawRect:`每次都使用沉重的性能（iPhone电池）？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:40:09.017

为了回答您的问题，您需要使用 Instruments 分析您的应用在恶劣条件下的执行情况。它可能很重，也可能很好。由于多种原因，复杂性可能会有很大差异。如果界面明显滞后/缓慢，则*可能*表明您的绘图花费了太多时间。如果您怀疑由于复杂性而成为问题，请经常采样，以便在引入问题时发现并纠正问题。

# iphone - CGSize sizeWithFont 没有返回正确的高度

> ID：10224348
> 
> 赞同：3
> 
> 时间：2012-04-19T08:30:44.097
> 
> 标签：iphone, objective-c, uilabel

如果我强制它的框架高度足够高，我有一个正确自动换行的 UILabel。但是，我希望它动态地找到合适的高度，而该`sizeWithFont`方法并没有这样做；该方法只会在我的标签中创建一行：

```
CGSize subtitleSize=[subtitle sizeWithFont:subtitleFont forWidth:maxwidth lineBreakMode:UILineBreakModeWordWrap]; 
```

然后我使用这个函数中相同的文本、字体和大小：

```
 UILabel *subLabel=[[[UILabel alloc] initWithFrame:CGRectMake(0, 0, maxwidth, subtitleSize.height)]autorelease];
        subLabel.font=subtitleFont;
        subLabel.text=subtitle;
        subLabel.numberOfLines=0;
        subLabel.lineBreakMode=UILineBreakModeWordWrap; 
```

看起来它应该都可以工作并给我一个我然后使用的尺寸。但是尺寸的高度始终只是标签的一行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:33:25.940

你可以用这个

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode; 
```

将 constrainedToSize 中的大小最大化

```
CGSize size = CGSizeMake(maxwidth, CGFLOAT_MAX); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:35:37.090

首先，检查**subtitle**变量中的文本是否符合您的预期。然后尝试使用这种方法来计算文本大小：

```
CGSize subtitleSize = [subtitle sizeWithFont:subtitleFont constrainedToSize:CGSizeMake(maxwidth, 1000000) lineBreakMode:UILineBreakModeWordWrap]; 
```

在此代码中，您将文本大小计算为最大宽度和“无限”高度。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T12:36:18.793

您可以手动提供一种更大的字体大小，这对我有用。

# android - 安卓的bug？#000 在 ICS 设备上显示为白色

> ID：10224351
> 
> 赞同：1
> 
> 时间：2012-04-19T08:30:52.540
> 
> 标签：android, background

好吧，这真的很奇怪：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.somelayout);
        super.onCreate(savedInstanceState);
        //doStuff();
    } 
```

这是我的 onCreate，没有其他代码正在执行！

一些布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg"
    android:orientation="vertical" >     
    <RelativeLayout
        android:id="@+id/prevnext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000001">

        <ImageView
            android:id="@+id/prev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="prev"
            android:padding="10dp"
            android:src="@drawable/leftbtn" />

        <ImageView
            android:id="@+id/next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:onClick="next"
            android:padding="10dp"
            android:src="@drawable/rightbtn" />

        <TextView
            android:id="@+id/group"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:gravity="center"
            android:text="text"
            android:textColor="#FFF"
            android:textSize="18dp" />
    </RelativeLayout>
    ...
</LinearLayout> 
```

root ('bg.png') 的背景是正确显示的深色背景，prevnext 的背景非常奇怪：

背景 = #000 -- 错误：显示为白色

背景 = #000000 - 错误：显示为白色

背景 = #F00 -- 正确

背景 = #0F0 -- 正确

背景 = #000001 -- 正确

# django - Django1.4：在模板中设置语言链接以使用 i18n_patterns 的通用方法？

> ID：10224357
> 
> 赞同：8
> 
> 时间：2012-04-19T08:31:12.460
> 
> 标签：django, localization, internationalization, url-pattern, django-1.4

我开始在 Django 1.4 中使用新的 i18n_patterns。基本上，我想在我的所有模板标题上都有我支持的每种语言的语言链接。我已将我的标题实现为一个单独的模板，该模板包含在其他模板中。

有没有办法让我的标题保持通用并解决这个问题，而无需在模板上下文中传递当前视图名称或当前 url？我想这是一个问题，我如何以通用方式从模板内部检索当前视图或 url。

顺便说一句，我发现我之前使用 set_lang 视图使用引用者更改活动语言的方法将被 url_patterns 破坏，因为在更改语言后，它会在重定向到被引用视图时将其改回。

任何帮助找出在模板中设置语言链接以以通用方式与 url_patterns 一起使用的通用方法将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:29:50.410

基本上，有两种不同的方法来设置语言。您可以使用`i18n_patterns`语言代码自动为您的 url 添加前缀，或者您可以使用`django.views.i18n.set_language`视图更改用户会话中语言代码的值（或 cookie，如果您的项目不支持会话）。

值得注意的是该算法`LocaleMiddleware`用于确定语言：

*   首先，它在请求的 URL 中查找语言前缀。仅当您在根 URLconf 中使用 i18n_patterns 函数时才会执行此操作。有关语言前缀以及如何国际化 URL 模式的更多信息，请参阅国际化：在 URL 模式中。

*   否则，它会在当前用户的会话中查找 django_language 键。

*   否则，它会查找 cookie。使用的 cookie 的名称由 LANGUAGE_COOKIE_NAME 设置设置。（默认名称是 django_language。）

*   如果做不到这一点，它会查看 Accept-Language HTTP 标头。此标头由您的浏览器发送，并按优先级告诉服务器您喜欢哪种语言。Django 会尝试标题中的每种语言，直到找到具有可用翻译的语言。

*   否则，它将使用全局 LANGUAGE_CODE 设置。

您可能遇到的问题是您不能使用`set_language`从已经使用语言前缀提供的 url 重定向，除非您`next`在 POST 数据中专门传递参数。这是因为`set_language`将默认重定向到引用者，其中将包括以前的语言前缀，`LocaleMiddleware`然后它将以旧语言查看和提供内容（因为它会在检查`django_language`会话变量之前在 url 中查找语言前缀）。

一个例子，为了清楚起见：

1.  您的用户在 /en/news/article/1000 上，并单击将“language=es”发布到`set_language`.

2.  `set_language`看到'language=es'，检查'es'是否可用，然后将'django_language'会话变量（或cookie）设置为'es'

3.  由于你没有设置'next'，它重定向到reqeuest.META['HTTP_REFERRER']的值，即/en/news/article/1000

4.  `LocaleMiddleware`( [source](https://github.com/django/django/blob/master/django/middleware/locale.py#L11) ) 在 url 中看到 'en' 前缀，并激活 'en' 语言并设置`request.LANGUAGE_CODE`为 'en'

我看到两种可能的解决方案：

1.  编写您自己的视图（请参阅[此处](https://github.com/django/django/blob/master/django/views/i18n.py)`set_language`的原始源代码），它将检查引用者（使用）中的语言前缀，并将其更改为新选择的语言的前缀，然后再重定向回它。`django.utils.translation.get_language_from_path`

2.  使用javascript在客户端做同样的操作，并设置`next`POST参数。真的，这有点傻；仅使用 javascript 将所有 url 动态添加到用户的首选语言代码之前可能会更简单，而完全忘记`set_language`。

看来这个新`set_language`视图应该是 Django 的默认行为了。[提出了一张票](https://code.djangoproject.com/ticket/17569)，其中包括一个提议的实施，但没有真正描述问题，随后被关闭。我建议开一张新票，更好地描述您的用例、现有实现引起的问题`set_language`以及您提出的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-12T01:51:36.827

实际上，没有必要摆弄你的观点。Django 有一个方便的切片标签，因此您可以将`{{ request.path|slice:'3:' }}`其用作链接 URL。这将关闭语言代码前缀，因此语言由 set_lang 函数设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-08T14:02:05.203

今天在使用 Django 1.7 时遇到了同样的问题，我设计了这个解决方案 - 不是很干燥，但它似乎工作正常（而且我所有的测试都通过了，所以......）。我没有使用内置的 set_language 视图，而是复制了它并做了一个微小的调整——结果如下：

```
def set_language(request):
"""
Redirect to a given url while setting the chosen language in the
session or cookie. The url and the language code need to be
specified in the request parameters.

Since this view changes how the user will see the rest of the site, it must
only be accessed as a POST request. If called as a GET request, it will
redirect to the page in the request (the 'next' parameter) without changing
any state.
"""
next = request.POST.get('next', request.GET.get('next'))
if not is_safe_url(url=next, host=request.get_host()):
    next = request.META.get('HTTP_REFERER')
    if not is_safe_url(url=next, host=request.get_host()):
        next = '/'
lang_code = request.POST.get('language', None)
# Start changed part
next = urlparse(next).path  # Failsafe when next is take from HTTP_REFERER
# We need to be able to filter out the language prefix from the next URL
current_language = translation.get_language_from_path(next)
translation.activate(current_language)
next_data = resolve(next)
translation.activate(lang_code)  # this should ensure we get the right URL for the next page
next = reverse(next_data.view_name, args=next_data.args, kwargs=next_data.kwargs)
# End changed part
response = http.HttpResponseRedirect(next)
if request.method == 'POST':
    if lang_code and check_for_language(lang_code):
        if hasattr(request, 'session'):
            request.session[LANGUAGE_SESSION_KEY] = lang_code
        else:
            response.set_cookie(settings.LANGUAGE_COOKIE_NAME, lang_code,
                                max_age=settings.LANGUAGE_COOKIE_AGE,
                                path=settings.LANGUAGE_COOKIE_PATH,
                                domain=settings.LANGUAGE_COOKIE_DOMAIN)
return response 
```

总结一下，我 resolve() next 的视图参数，然后在激活新语言后将数据传递给 reverse()。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T21:15:07.700

我对长时间的延误表示歉意。谢谢大家的答案。

首先评论一下 Chris 的两个解决方案选项：自定义 set_language 和 javascript 都不适合此目的，因为 url 模式的整体美感是 SEO 友好的。

此外，简单地替换 URL 中的前缀语言不能被视为基于 urlpattern 的 url 的完整解决方案，因为整个 URL 也可能是可翻译的。例如：`/en/profile/`英语和`/fr/profil/`法语。为了解决这样一个问题，需要捕获 viewfunc 和参数，以便为不同的语言反转它。

对我来说幸运的是，我的项目目前不使用可翻译的 URL，我采用了以下方法。

1.  添加`django.core.context_processors.request`到`TEMPLATE_CONTEXT_PROCESSORS`以便该请求在模板呈现上下文中可用。

2.  `RequestContext`渲染视图时在视图中使用。这对我来说总是与主题无关。

3.  编写一个非常简单`templatetag`的程序，它需要上下文并接受一个语言代码作为参数以返回给定语言的当前 URL。它基本上确保当前 URL 具有有效的语言代码前缀，并简单地返回另一个字符串，该字符串与替换语言代码的当前 URL 相同。

前任：

```
from django import template
register = template.Library()

@register.simple_tag(takes_context=True)
def get_current_url_for_lang(context, lang_code):
    request=context.get('request',False)
    if not request:
        return None

    request=context['request']
    curr_url=request.path
    if len(curr_url) < 4 or curr_url[0] != '/' or curr_url[3] != '/':
        return curr_url

    if context.get('LANGUAGES',False):
        codes = []
        for code,name in context['LANGUAGES']:
            codes.append(code)

        curr_langcode = curr_url[1:3]
        if lang_code not in codes or curr_langcode not in codes:
            return curr_url

    changed_url = '/'+lang_code+curr_url[3:]
    return changed_url 
```

此外，如果一个人不喜欢将完整的请求注入到上下文中，那么编写自己的 context_processor 将非常简单，例如简单地推送`request.path`as`current_url_path`并在您的`templatetag`.

一如既往地欢迎您的意见！

# java - 使用 MongoDB 在 Java 中计算距离

> ID：10224364
> 
> 赞同：2
> 
> 时间：2012-04-19T08:31:38.590
> 
> 标签：java, jakarta-ee, mongodb, geospatial

我正在研究 Java 和 MongoDB 中的位置计算。我将纬度和经度传递给方法，并从提供的输入中找到最近的位置。我可以从我的主表中获取位置名称，我的所有地标都包含经度和纬度。

我的要求是我想使用 MongoDB 获得距离的位置 - 比如 XYZ 的 4Km 。MongoDB 有地理空间查询，我正在研究它。我可以通过使用 db.runCommand({ geoNear : "data", near : [-73.9000, 40.7000],spherical : true, maxDistance : 2500/6378137, distanceMultiplier: 6378137}) 在命令提示符下运行来获得提到的输入。

我正在寻找Java中的等效代码，所以我只能通过纬度和经度并获得距离最近的位置。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:27:51.640

您可以使用 Java 驱动程序中 DB 对象的“命令”方法执行命令。API 文档可以在这里找到：http: [//api.mongodb.org/java/current/com/mongodb/DB.html#command%28com.mongodb.DBObject%29](http://api.mongodb.org/java/current/com/mongodb/DB.html#command%28com.mongodb.DBObject%29)

以下是使用 Java 驱动程序执行命令的方式：

```
BasicDBObject myCmd = new BasicDBObject();
myCmd.append("geoNear", "data");
double[] loc = {-73.9000, 40.7000};
myCmd.append("near", loc);
myCmd.append("spherical", true);
myCmd.append("maxDistance", (double)2500/6378137);
myCmd.append("distanceMultiplier", 6378137);
System.out.println(myCmd);
CommandResult myResult = db.command(myCmd);
System.out.println(myResult.toString()); 
```

我添加了一些 System.out.println 语句，因此您可以看到命令文档的外观，以及返回的结果的字符串表示形式。
您可以在命令文档中添加 num : 1 以将结果限制为 1。

```
myCmd.append("num", 1); 
```

这在 geoNear 文档中有所说明： [http ://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand)

希望这会让你开始。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:35:02.597

有一个可用的[Java API 可](http://www.mongodb.org/display/DOCS/Java+Tutorial)让您与之交互。[驱动程序](http://api.mongodb.org/java/current/)有一个“命令[”](http://api.mongodb.org/java/current/com/mongodb/DB.html#command%28com.mongodb.DBObject%29)方法可以做你想要的。

请务必阅读已发布的有关 Java 驱动程序以及如何将 shell 命令转换为 Java 的教程。

# c# - 在按钮内处理错误

> ID：10224365
> 
> 赞同：1
> 
> 时间：2012-04-19T08:31:42.053
> 
> 标签：c#, button, error-handling

我有一个 Windows 窗体，其中包含用信息填写文本框，然后单击连接。如果任何文本框为空，我会弹出错误消息，但是当我点击确定时，程序会继续运行，但由于信息不足，我最终会收到运行时错误，并且程序崩溃。我想要的是让程序回到我点击“连接”之前的点，只要任何文本框没有正确填写。

这是代码：

```
private void cmdConnect_Click(object sender, EventArgs e)
    {

        if (cmdConnect.Text == "Connect")
        {
            if (txtGroup.Text == "")
            {
                txtGroup.Text = "_Group01";
            }

            if (txtItemID.Text == "")
            {
                MessageBox.Show("Please enter ItemID.", "Connect Error", MessageBoxButtons.OK, MessageBoxIcon.Error);

            }
                switch (cboServer.Text)
                {
                    case "":
                        MessageBox.Show("Please select and OPC server", "Connect Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                        break;

                    case "RSLinx Remote OPC Server":
                        if (txtMachine.Text == "")
                        {
                            MessageBox.Show("Please enter a machine name for remote connection", "Connect Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                            break;
                        }
                        else
                        {
                            oOpcServer.Connect(cboServer.Text, txtMachine.Text);
                        }
                        break;

                    case "RSLinx OPC Server":
                        oOpcServer.Connect(cboServer.Text);
                        break;

                    default:
                        if (txtMachine.Text == "")
                        {
                            oOpcServer.Connect(cboServer.Text);
                        }
                        else
                        {
                            oOpcServer.Connect(cboServer.Text, txtMachine.Text);

                        }
                        break;
            }
            oOpcGroup = oOpcServer.OPCGroups.Add(txtGroup.Text);
            oOpcGroup.IsSubscribed = true;
            oOpcGroup.IsActive = false;
            oOpcGroup.UpdateRate = 1000;

            ClHandle = 1;
            oOpcGroup.OPCItems.DefaultAccessPath = txtAccessPath.Text;
            oOpcGroup.OPCItems.AddItem(txtItemID.Text, ClHandle);

            cmdItemWrite.Enabled = true;
            cmdItemRead.Enabled = true;
            cmdSyncWrite.Enabled = true;
            cmdSyncRead.Enabled = true;
            cmdAsyncWrite.Enabled = true;
            cmdAsyncRead.Enabled = true;
            cmdAdvise.Enabled = true;
            txtSubValue.Enabled = true;
            cboServer.Enabled = false;
            txtMachine.Enabled = false;
            txtGroup.Enabled = false;
            txtAccessPath.Enabled = false;
            txtItemID.Enabled = false;

            cmdConnect.Text = "Disconnect";
        }
        else
        {
            oOpcServer.OPCGroups.RemoveAll();
            oOpcGroup = null;
            oOpcServer.Disconnect();

            cmdConnect.Text = "Connect";
            cmdItemWrite.Enabled = false;
            cmdItemRead.Enabled = false;
            cmdSyncWrite.Enabled = false;
            cmdSyncRead.Enabled = false;
            cmdAsyncWrite.Enabled = false;
            cmdAsyncRead.Enabled = false;
            cmdAdvise.Enabled = false;
            txtSubValue.Enabled = false;
            cboServer.Enabled = true;
            txtMachine.Enabled = true;
            txtGroup.Enabled = true;
            txtAccessPath.Enabled = true;
            txtItemID.Enabled = true;
        }
        oOpcGroup.DataChange += new RsiOPCAuto.DIOPCGroupEvent_DataChangeEventHandler(oOpcGroup_DataChange);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:35:29.930

在每个消息框之后添加一个`return`语句可以解决问题并导致方法退出而不做最后的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:24:04.637

正如 Dervall 提到的，最简单的解决方案是在每次调用`return`后添加语句。`MessageBox.Show`但更优雅的解决方案是在执行连接逻辑之前使用验证和错误提供程序来突出显示不正确的输入数据。

无论如何，这里有一些关于重构代码的想法。

```
private void cmdConnect_Click(object sender, EventArgs e)
{
    if (cmdConnect.Text == "Disconnect") 
    {
        Disconnect();
        SetControlsToDisconnectedState();
        return;
    }

    if (String.IsNullOrWhiteSpace(txtGroup.Text))
        txtGroup.Text = "_Group01";

    if (String.IsNullOrWhiteSpace(txtItemID.Text))
    {
        ShowErrorMessage("Connect Error", "Please enter ItemID.");
        return;
    }

    if (String.IsNullOrWhiteSpace(cboServer.Text))
    {
        ShowErrorMessage("Connect Error", "Please select and OPC server");
        return;
    }

    Connect(cboServer.Text, txtMachine.Text);
    DoSomethingWithGroup(txtGroup.Text, txtAccessPath.Text, txtItemID.Text);
    SetControlsToConnectedState();
} 
```

发生了什么变化：

*   当您验证按钮上的哪些文本时，它更具可读性，然后它没有
*   方法 ShowErrorMessage 完全按照它所说的那样做
*   验证文本，`IsNullOrWhiteSpace`因为它可能充满空格
*   控制状态更改移动到单独的代码
*   连接/断开连接现在与 UI 分离

这里还有其他方法：

```
private void ShowErrorMessage(string title, string message)
{
    MessageBox.Show(message, title, MessageBoxButtons.OK, MessageBoxIcon.Error);
}

private void SetControlsToConnectedState()
{
    UpdateControls(true);
}

private void SetControlsToDisconnectedState()
{
    UpdateControls(false);
}

private void UpdateControls(bool isConnected)
{
    cmdConnect.Text = isConnected ? "Disconnect" : "Connect";
    cmdItemWrite.Enabled = isConnected;
    cmdItemRead.Enabled = isConnected;
    cmdSyncWrite.Enabled = isConnected;
    cmdSyncRead.Enabled = isConnected;
    cmdAsyncWrite.Enabled = isConnected;
    cmdAsyncRead.Enabled = isConnected;
    cmdAdvise.Enabled = isConnected;
    txtSubValue.Enabled = isConnected;
    cboServer.Enabled = !isConnected;
    txtMachine.Enabled = !isConnected;
    txtGroup.Enabled = !isConnected;
    txtAccessPath.Enabled = !isConnected;
    txtItemID.Enabled = !isConnected;      
}

private void Disconnect()
{
    oOpcServer.OPCGroups.RemoveAll();
    oOpcGroup = null;
    oOpcServer.Disconnect();            
}

private void Connect(string serverName, string machineName)
{
    switch (serverName)
    {
        case "RSLinx Remote OPC Server":
            if (String.IsNullOrWhiteSpace(machineName))
            {
                ShowErrorMessage("Connect Error", "Please enter a machine name for remote connection");
                return;
            }

            oOpcServer.Connect(serverName, machineName);                    
            break;

        case "RSLinx OPC Server":
            oOpcServer.Connect(serverName);
            break;

        default:
            if (String.IsNullOrWhiteSpace(machineName))            
                oOpcServer.Connect(serverName);            
            else            
                oOpcServer.Connect(serverName, machineName);            
            break;
    }           
}

private void DoSomethingWithGroup(string groupName, string accessPath, string itemID)
{
    oOpcGroup = oOpcServer.OPCGroups.Add(groupName);
    oOpcGroup.IsSubscribed = true;
    oOpcGroup.IsActive = false;
    oOpcGroup.UpdateRate = 1000;

    ClHandle = 1;
    oOpcGroup.OPCItems.DefaultAccessPath = accessPath;
    oOpcGroup.OPCItems.AddItem(itemID, ClHandle);

    oOpcGroup.DataChange += new RsiOPCAuto.DIOPCGroupEvent_DataChangeEventHandler(oOpcGroup_DataChange);
} 
```

# xslt - XSL 转换和 XPath

> ID：10224372
> 
> 赞同：1
> 
> 时间：2012-04-19T08:32:01.460
> 
> 标签：xslt, xpath

我在运行下一个 XSL 样式表时遇到问题：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="Blokea">
    <xsl:param name="Handiena" select="Blokea/Bl2">
       <xsl:if test="Blokea/Bl1>Blokea/Bl2">
    <xsl:param name="Handiena" select="Blokea/Bl1">
         <xsl:value-of select="$Handiena"/>
      </xsl:if>
</xsl:template>
</xsl:stylesheet> 
```

在下一个 XML 上：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Erroa>
    <Blokea>
        <Bl1>20</Bl1>
        <Bl2>10</Bl2>
    </Blokea>
</Erroa> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:42:27.813

我认为你想要做的是：

```
<xsl:template match="Blokea">
  <xsl:param name="Handiena">
     <xsl:choose>
       <xsl:when test="./Bl1 &gt; ./Bl2">
         <xsl:value-of select="./Bl1"/>
       </xsl:when>
       <xsl:otherwise>
         <xsl:value-of select="./Bl2"/> 
       </xsl:otherwise>
    </xsl:choose>
 </xsl:param>
 <xsl:value-of select="$Handiena"/>
</xsl:template> 
```

如我错了请纠正我。

# wpf - 根据视图模型状态更改默认按钮 (IsDefault)

> ID：10224374
> 
> 赞同：0
> 
> 时间：2012-04-19T08:32:05.690
> 
> 标签：wpf, mvvm

我有一个带有一个查询文本框和四个按钮的对话框。根据查询的结果，启用一个或多个按钮。TextBox 绑定到 VM 上的属性，每个按钮都绑定到 VM 上的命令

Command.IsEnabled 根据 QueryResult 更改

```
class ViewModel
{
  public string Query {get;set;}
  public QueryResult QueryResult {get;set;}
  public ICommand FooCommand {get;set;}
  public ICommand BarCommand {get;set;}
  public ICommand BazCommand {get;set;}
  public ICommand QuxCommand {get;set;}
}

<TextBox Text="{Binding Query, UpdateSourceTrigger=PropertyChanged}"/>
<Button Command="{Binding FooCommand}" Content="Foo"/>
<Button Command="{Binding BarCommand}" Content="Bar"/>
<Button Command="{Binding BazCommand}" Content="Baz"/>
<Button Command="{Binding QuxCommand}" Content="Qux"/> 
```

有额外的逻辑来确定哪些启用的按钮应该是默认的（按下回车键时明显突出显示并激活）

（Foo 始终启用，如果 QueryResult.A 为非 null 则启用 Bar，如果 QueryResult.B 为非 null 则启用 Baz 等。可以启用多个命令，但是有一个固定的优先级优先顺序来确定默认值行动）

酒吧 > Baz > Foo > Qux

我的问题是如何在按钮上绑定 Button.IsDefault 以反映哪个应该是默认的。

我想到了以下选项-似乎都不正确

1.  在 VM 上创建枚举属性 {btn1,btn2,btn3,btn4} DefaultButton。使用转换器将每个按钮的 IsDefault 属性绑定到此，该转换器将其参数与当前值进行比较

2.  在 VM IsButton1Default 等上创建四个布尔属性...并绑定到这些

3.  带有样式+数据触发器的东西，但这使我的 XAML 难以理解。

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:46:05.370

我会选择 2 号，因为我不喜欢这种逻辑的转换器。它也易于单元测试，更易于理解和实现:)

# c# - 在不同的查询 SQL 中插入和选择

> ID：10224379
> 
> 赞同：3
> 
> 时间：2012-04-19T08:32:22.147
> 
> 标签：c#, sql, sql-server-2008, ado.net

我有一个服务器和许多客户端，我的应用程序在客户端和服务器上的数据库，我有一个表

```
Table -->  Id --> int Auto-increment,   
Name --> nvarchar(50), 
```

因此，每当我使用查询从客户端插入新行时

```
Insert into Table Name Values('NameValue') 
```

它插入行并且 sql 自动生成 Id 字段。因此，要获取其 ID，我使用以下查询

```
Select max(Id) as maxId from Table 
```

但两个查询都在不同的连接上

当一次只有一个客户端运行时，它运行良好，但是当多个客户端运行时，客户端请求了许多插入查询，然后我才能请求“getMaxId”查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:36:27.353

您可以使用以下内容：

```
SELECT SCOPE_IDENTITY() 
```

这将选择最后插入的身份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:36:51.130

尝试这个：

```
DECLARE @a TABLE (
    Id int IDENTITY (1, 1),
    b VARCHAR(1000)
)

DECLARE @b TABLE (
    Id INT
)

INSERT @a (b)
OUTPUT INSERTED.Id INTO @b
SELECT NAME 
FROM sys.objects

SELECT * FROM @a
SELECT * FROM @b 
```

或者，您始终可以使用它来检索最新的标识：

```
SELECT IDENT_CURRENT('TABLE_NAME') 
```

或使用

```
SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T08:37:29.663

最好的方法是运行命令来获取最近插入的值。

您可以运行三个命令来执行此操作。

[这个](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)链接将解释它们

最好的是

```
SELECT SCOPE_IDENTITY() 
```

因为如果您有一个调用触发器的表 A 并且此触发器在表 B 上插入数据，则此命令将为您获取表 A 的 ID，而 @@IDENTITY 将为您获取表 B 的 ID

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T08:36:16.867

而是使用：

```
select @@identity 
```

代替`select max(id)...`

它将返回当前连接的最后生成的标识。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T08:41:18.120

使用这个，但它适用于 PHP

> $id = mysql_insert_id();

对于 c#

> Int32 newId = (Int32) myCommand.ExecuteScalar();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T08:42:16.353

在 sql 中创建函数，您将在其中添加行并通过 SELECT SCOPE_IDENTITY() 获取 ID。当您调用函数时，您将获得完全添加的 ID。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T08:38:31.240

在插入而不是 Max(id) 选择后添加以下内容。

```
SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T09:46:35.933

试试这个希望它可以帮助你

```
 declare @table1 table(id int identity,name varchar(50))
    insert into @table1 (name) output inserted.id  values('abc') 
    insert into @table1 (name) output inserted.id values('xyz')
    insert into @table1 (name) output inserted.id values('pqr') 
```

[更多请看这里](https://stackoverflow.com/questions/8583106/get-last-deleted-id-in-mysql/8601728#8601728)

# ios - 在设备上使用 Monotouch 上传 xml 失败

> ID：10224382
> 
> 赞同：1
> 
> 时间：2012-04-19T08:32:28.997
> 
> 标签：ios, xamarin.ios, webclient

我正在尝试通过 Monotouch 上的 Web 客户端发送 XML。尽管一切都在 iOS 模拟器上运行，但当应用程序在设备上运行时出现异常。这是代码。

```
try
{
   Byte[] sendData = System.Text.Encoding.UTF8.GetBytes(someXML) ;
   WebClient client = new WebClient();
   Byte[] forResp;
   client.Headers.Add("Content-Type","text/xml");

   bresp = wc.UploadData(URL, sendData);
   string resp = System.Text.Encoding.ASCII.GetString(forResp);
   XmlDocument xresp = new XmlDocument();
   xresp.LoadXml(resp);
   return xresp;
}
catch
{
    // error
} 
```

我尝试了 WebClient，因为我遇到了与 HttpWebRequest 相同的问题。

例外：

```
The request timed out
System.Net.WebException: The request timed out
  at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00065] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:830 
  at System.Net.HttpWebRequest.GetResponse () [0x0000e] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:836 
  at System.Net.WebClient.GetWebResponse (System.Net.WebRequest request) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebClient.cs:1433 
  at System.Net.WebClient.ReadAll (System.Net.WebRequest request, System.Object userToken) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebClient.cs:866 
  at System.Net.WebClient.UploadDataCore (System.Uri address, System.String method, System.Byte[] data, System.Object userToken) [0x00038] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebClient.cs:462 
  at System.Net.WebClient.UploadData (System.Uri address, System.String method, System.Byte[] data) [0x00035] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebClient.cs:441 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:53:26.437

堆栈跟踪告诉我们超时发生在`WebClient`尝试从服务器获取响应时（而不是在将数据上传到服务器时）。这意味着访问服务器不是问题（以及为什么堆栈跟踪非常有用;-)

接下来的步骤取决于您是否可以控制服务器。如果您控制服务器，则检查它的日志以查找请求并查看它是如何处理的。如果可能，还要确保您在模拟器和设备之间以相同的方式接收/解码数据。

如果您不控制服务器，那么就很难知道其中发生了什么。例如，它可能不喜欢该请求（即服务器代码可以根据任何条件决定不回答，包括用户代理）。

在这种情况下，使用诸如 之类的工具`wireshark`通常是您最好的选择。比较来自 iOS 模拟器和设备的会话。

*   请求是否相同？例如，您上传的数据可能因其他原因而有所不同；

*   服务器是否在为设备应答？具有相同的状态码？在同一时间范围内？

如果一切都相同，那么您可能发现了一个错误。请将其（连同上述信息和文件）报告给[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)

否则，您应该有更准确的线索来调试问题和/或将问题更新为更具体:-)

# java - python导入在Java中是等效的吗？

> ID：10224384
> 
> 赞同：1
> 
> 时间：2012-04-19T08:32:51.307
> 
> 标签：java, python

我有一堆 idl 文件，它们会自动创建四个包，其中包含很多 java 文件。我需要在 com.bla 中插入这些 java 文件。包架构。

例如，在我生成的文件中，我导入了 UCO.State，它不适合我的新包架构。

所以问题是：是否有一个相当于'import com.bla as bla'的java？

我看到的唯一其他选择是导入 UCO 包并直接通过 State 重命名所有 UCO.State 和其他。但这意味着重构数百个文件 o_O。

任何的想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:35:07.633

在 Eclipse 中导入所有文件。如果您设法使用 IDE 的重构功能编译代码，它将为您省去所有麻烦。

没有向 java 中的导入添加同义词的功能，但即使有这样的功能对您有什么帮助？您仍然需要更改所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:48:33.447

我找到了解决方案，位于我的 idlj 生成工具的文档中。

[http://docs.oracle.com/javase/1.4.2/docs/guide/rmi-iiop/toJavaPortableUG.html](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi-iiop/toJavaPortableUG.html)

您应该在 pkgTranslate 和 pkgPrefix 选项中搜索信息 :) 这样，该工具会自动更改 foo => com.bla.foo

问题解决了 ！

# vb.net - 合并两个项目并获得一个 .sln 文件

> ID：10224386
> 
> 赞同：0
> 
> 时间：2012-04-19T08:33:05.777
> 
> 标签：vb.net, visual-studio-2008

我想将两个项目合并为一个，即图像和音频隐写术与单个 .sln 文件。我如何连接它们？我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:43:11.440

另一个人关于打开一个解决方案并添加现有项目的说法听起来不错。如果由于某种原因您打开项目并且在解决方案资源管理器中看不到解决方案，您始终可以创建一个空白解决方案：

![空白解决方案](../Images/ef614b99326be45b497121191da21111.png)

然后将项目添加到其中。转到文件->添加->现有项目。

![添加现有项目](../Images/3d5c05b4e878745c3e1a32dd6b0a83bb.png)

选择一个项目。

![项目1](../Images/4622dcc458224c62547ff4f978d87ba2.png)

选择另一个项目。

![项目2](../Images/64ff21154bd19e742313a075302f1fc9.png)

您的新解决方案：

![新解决方案](../Images/462bdec4b55fce5d4e84d8383565c777.png)

**请记住：**如果您要合并具有网站或 Web 服务的项目，则需要选择“添加现有网站”并选择网站/Web 服务所在的文件夹。（：

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:39:39.133

你可以在这里找到答案：

[如何合并两个不同的 Visual Studio 解决方案？](https://stackoverflow.com/questions/603744/how-do-i-merge-two-different-visual-studio-solutions)

或者只需右键单击解决方案添加现有项目（或添加现有项目）并选择要合并的解决方案

# php - 使用 php 将事件插入 Google 日历

> ID：10224387
> 
> 赞同：1
> 
> 时间：2012-04-19T08:33:15.637
> 
> 标签：php, authentication, curl, google-calendar-api, http-request

我正在尝试使用[他们的指南](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)向 google calendar api 执行 cURL 请求，上面写着：

```
POST https://www.googleapis.com/calendar/v3/calendars/{name_of_my_calendar}/events?sendNotifications=true&pp=1&key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  OAuth 1/SuypHO0rNsURWvMXQ559Mfm9Vbd4zWvVQ8UIR76nlJ0
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "start": {
  "dateTime": "2012-06-03T10:00:00.000-07:00"
 },
 "end": {
  "dateTime": "2012-06-03T10:20:00.000-07:00"
 },
 "summary": "my_summary",
 "description": "my_description"
} 
```

我应该如何在 php 中做到这一点？我想知道我应该发送哪些参数以及应该使用哪些常量。我目前正在做：

```
 $url = "https://www.googleapis.com/calendar/v3/calendars/".urlencode('{name_of_my_calendar}')."/events?sendNotifications=true&pp=1&key={my_api_key}";  

        $post_data = array(  
            "start" => array("dateTime" => "2012-06-01T10:00:00.000-07:00"),  
            "end" => array("dateTime" => "2012-06-01T10:40:00.000-07:00"),  
            "summary" => "my_summary",
            "description" => "my_description"
        );

        $ch = curl_init();  
        curl_setopt($ch, CURLOPT_URL, $url);  
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
        curl_setopt($ch, CURLOPT_POST, 1);  
        // adding the post variables to the request  
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);  

        $output = curl_exec($ch);  

        curl_close($ch); 
```

但回应是：

```
{
    error: {
        errors: [
        {
            domain: "global",
            reason: "required",
            message: "Login Required",
            locationType: "header",
            location: "Authorization"
        }
        ],
        code: 401,
        message: "Login Required"
    }
} 
```

我应该如何格式化我的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T08:51:40.283

我注意到这个问题是很久以前提出的，但是在一段时间后弄清楚后参数问题后，我认为它可能对其他人有用。首先在“$post_data”中，我切换了“开始”和“结束”：

```
$post_data = array(
    "end" => array("dateTime" => "2012-06-01T10:40:00.000-07:00"),
    "start" => array("dateTime" => "2012-06-01T10:00:00.000-07:00"),  
    "summary" => "my_summary",
    "description" => "my_description"
); 
```

其次，我认为 Google Calendar API 期望数据是 json，所以在 curl_setopt 中：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($post_data)); 
```

这对我来说非常有效，希望对其他人也有用！

# c++ - 推导类型，当使用成员函数指针作为模板参数时

> ID：10224392
> 
> 赞同：3
> 
> 时间：2012-04-19T08:33:30.120
> 
> 标签：c++, templates

当我想将成员函数作为模板参数时，有没有办法在不提供`Caller`类型的情况下对其进行模板化？

```
struct Foo
{
    template <typename Caller, void (Caller::*Func)(int)>
    void call(Caller * c) { (c->*Func)(6); }
};

struct Bar
{
    void start() 
    {
        Foo f;
        f.call<Bar, &Bar::printNumber>(this);
               ^^^^  
    }

    void printNumber(int i) { std::cout << i; }
};

int main ()
{
    Bar b;
    b.start();
    return 0;
} 
```

当我尝试

```
template <void (Caller::*Func)(int), typename Caller>
void call(Caller * c) { (c->*Func)(6); } 
```

并称它为

```
f.call<&Bar::printNumber>(this); 
```

我收到`Caller is not class...`错误。

那么，有没有办法让编译器推断调用者类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:46:56.030

不，不是你想要的。`Caller`可以推断如果

1.  指向成员函数的指针是一个参数，而不是模板参数。例如：

    ```
    template <class Caller>
    void call(Caller * c, void (Caller::*Func)(int)) { (c->*Func)(6); } 
    ```

2.  这是事先知道的。例如，您可以使调用如下所示：

    ```
    f.arg(this).call<&Bar::printNumber>(); 
    ```

    该`call`函数看起来类似于：

    ```
    template <class Arg>
    struct Binder
    {
      template<void (Arg::*Func)(int)>
      void operator()() const {
        ...
      }
    }; 
    ```

    该`arg`函数很容易编写（在您的情况下，它将返回`Binder<Bar>`，`Bar`从 推导出来`this`）。

    不是很方便，恕我直言。

# javascript - jquery 在 $.(one,two).html() 中有两个内容；

> ID：10224396
> 
> 赞同：0
> 
> 时间：2012-04-19T08:33:46.360
> 
> 标签：javascript, jquery

我不知道该怎么称呼它们，我通常只遇到single`$.(one).html()`而不是`$.(one,two).html();`在jQuery中。

```
var handler = function(data) {
    $('.content').html($('.content', data).html()).parent().show();
    $.address.title(/>([^<]*)<\/title/.exec(data)[1]);
}; 
```

你们*能帮*我理解这段代码的作用吗？我从来没有遇到过这样的代码。这些是我无法理解的具体部分，这些行是如何工作的？

```
$('.content', data).html();

$.address.title(/>([^<]*)<\/title/.exec(data)[1]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:40:07.650

第一个是[选择器和上下文](http://api.jquery.com/jQuery/)。它正在搜索`.content`内`data`。jQuery 然后返回具有该`.html()`方法的 jQuery 对象。

第二个是[正则表达式模式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。它使用`/>([^<]*)<\/title/`正则表达式来搜索`data`可能是为了找到`title`标签的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:54:46.380

```
$('.content', data).html(); 
```

`content`这是在`data`变量中寻找具有类的元素。这称为上下文选择器。`data`变量可以是字符串、DOM 元素或 jQuery 对象。

例如：

```
var data = '<div><p class="content">Lorem ipsum</p></div>';
var html = $('.content', data).html(); // = 'Lorem ipsum' 
```

无论您的页面中有多少其他元素，该`html`变量都将始终包含。`Lorem ipsum``.content`

* * *

```
$.address.title(/>([^<]*)<\/title/.exec(data)[1]); 
```

这是对`data`变量执行正则表达式。这是逆向方法`data.match(/>([^<]*)<\/title/);`

它将返回一个包含每个匹配项的数组，如果没有找到则返回 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:39:52.537

这是一个正则表达式，它检查模式。

([^<]*) 表示“所有来自 <”。

基本上，它在字符串中搜索以 开头`<title>`和结尾的内容`</title>`，并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:22:38.120

$ 函数的第二个参数只是一个上下文。它说 jQuery 在该上下文元素中查找元素。下面的表达式在行为上是相等的。我希望这将澄清第二个论点的含义。

```
$(one,two).html(); = $(two).filter(one).html(); 
```

# css - JSF commandLink 与图像

> ID：10224398
> 
> 赞同：2
> 
> 时间：2012-04-19T08:33:53.423
> 
> 标签：css, jsf, primefaces

我有问题`<p:commandLink>`。我想制作悬停效果，但我无法`<p:graphicImage>`通过 CSS 加载图像。

CSS：

```
.accountEditBtn {
    background-image:
    url('#{request.contextPath}/resources/image/pencil_black.png');
} 
```

JSF：

```
<p:commandLink
    update="@form"
    actionListener="#{someBean.someListener}">
    <h:graphicImage styleClass="accountEditBtn" />
</p:commandLink> 
```

我看到带边框的空矩形。

但是当我将alt添加到graphicImage时，我会从alt中获取图像而不是文本......

我的错在哪里？谢谢你。ps 输入错误 - classType -> styleClass

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:44:31.307

尝试使用 styleClass 而不是`<h:graphicImage>`

```
<p:commandLink 
   styleClass="accountEditBtn"
   update="@form"
   actionListener="#{someBean.someListener}"/> 
```

试试这门课

```
.accountEditBtn { background-image: url('../resources/image/pencil_black.png'); } 
```

顺便提一句

不是应该是图像吗？或者它是图像（文件夹名称）

也看看这个..如果你想要带有图像的命令按钮：[PrimeFaces 图标](https://stackoverflow.com/q/10152012/617373)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:09:02.153

你为什么不使用

```
<p:commandButton ... icon="yourbuttonstyleclass"/> 
```

在CSS中

```
.yourbuttonstyleclass {  
background-image: url('../images/yourimage.png') !important;
} 
```

# hibernate - grails load() 方法不返回代理实例

> ID：10224399
> 
> 赞同：0
> 
> 时间：2012-04-19T08:33:54.017
> 
> 标签：hibernate, grails, proxy

环境：**grails 2.0.1**

我有一个简单的域实体：

```
class Author {
 String name

 static hasMany = [books : Book] 
```

}

我正在尝试加载 id 1 的代理

```
def auth = Author.load(1) 
```

但是，正如我从控制台 sql 日志中看到的那样，执行了一个查询来获取 Author 的非代理实例！为什么它会这样工作？以及如何加载代理实例？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T09:01:34.700

怎么样

```
def author = Author.get(1) 
```

或只读实例：

```
def author = Aughor.read(1) 
```

# android - getFromLocationName，无法显示该点

> ID：10224401
> 
> 赞同：1
> 
> 时间：2012-04-19T08:34:02.613
> 
> 标签：android, overlay, reverse-geocoding, itemizedoverlay

所以首先我检查了是否存在 Goecoder 服务......然后我使用这个服务并检查 getFromLocationName 的结果，然后我指出它添加到我的叠加层并显示它......但由于某种原因，它不显示任何内容。

```
 private  void convert_Points() throws IOException {

    // initialization of overlays
    mapOverlays = mapV.getOverlays();
    drawable = this.getResources().getDrawable(R.drawable.pin);
    itemizedoverlay = new ItemizedOverlay(drawable);

    // check if getFromLocationName is present or not
    if (!Geocoder.isPresent()){
        Toast.makeText(getBaseContext(),"Sorry! Geocoder service not Present.",     Toast.LENGTH_LONG).show();
    }

    else{

    // make OverlayItem by creating a GeoPoint that defines our map coordinates
    Geocoder geocoder = new Geocoder(this);
    List<Address> geoResults = geocoder.getFromLocationName("Empire State  Building", 5,-44.00, 111.00, -12.0, 155.0);
    Address location = geoResults.get(0);
    location.getLatitude();
    location.getLongitude();

String s=Double.toString(geoResults.get(0).getLatitude());
         Toast.makeText(getBaseContext(),s, Toast.LENGTH_LONG).show();

        GeoPoint point= new GeoPoint( (int) (location.getLatitude() * 1E6), (int) (location.getLongitude() * 1E6));

        OverlayItem overlayitem = new OverlayItem(point, "", "");
    //  add this OverlayItem to a collection in the ItemizedOverlay

        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);

    } 
```

}

# javascript - 如何使用 Javascript 动态创建和删除 HTML 元素

> ID：10224402
> 
> 赞同：-4
> 
> 时间：2012-04-19T08:34:03.987
> 
> 标签：javascript

如何使用 Java 脚本动态创建和删除 HTML 元素..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:36:37.233

您可以使用 jQuery 更轻松地使用 HTML DOM

```
.remove();
.append('</div>'); 
```

所有文档都在这里：[http ://api.jquery.com/](http://api.jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:36:49.663

和`appendChild`,`removeChild`分别

[https://developer.mozilla.org/en/DOM/element.appendChild](https://developer.mozilla.org/en/DOM/element.appendChild)
[https://developer.mozilla.org/En/DOM/Node.removeChild](https://developer.mozilla.org/En/DOM/Node.removeChild)

你也可以使用

*   [innerHTML](https://web.archive.org/web/20120305003651/https://developer.mozilla.org/en/DOM:element.innerHTML)追加/删除元素（[在某些情况](http://jsperf.com/fragment-vs-appendchild-vs-innerhtml/6)下可能更适合，特别是对于大节点插入）
*   [createDocumentFragment](https://web.archive.org/web/20120521042046/https://developer.mozilla.org/en/DOM/document.createDocumentFragment)对于附加带有子嵌套元素的 DOM 结构非常有用

# python - 如何在 Eclipse 中为 Python 设置远程开发？（“远程”部分）

> ID：10224404
> 
> 赞同：11
> 
> 时间：2012-04-19T08:34:23.863
> 
> 标签：python, eclipse, remote-debugging

我是 Eclipse 新手，我想将其设置为在 Python 中进行远程开发。我在 Win7 上使用 Eclipse，源代码位于 Linux 机器上（并希望从那里运行）。

[我使用了优秀的指南来为远程开发](http://www.patrickjwaters.com/blog/2011-07-24/how-setup-eclipse-php-pdt-remote-system-explorer-theme-manager-and-drupal-plugins/35)和[PyDEV](http://www.rose-hulman.edu/class/csse/resources/Eclipse/eclipse-python-configuration.htm)设置Eclipse，现在我有了：

*   带有 PyDEV 的 Eclipse 工作副本
*   从 Eclipse 中通过 sftp 访问我的远程文件

我现在缺少的是远程实际运行文件的能力，即。我不知道这样做有什么魔力，所以当我从 Eclipse 执行文件时，它们在 Linux 机器上通过 /usr/bin/python 运行，输出由 Eclipse 很好地管理（至少这是梦想的部分:)） .

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:52:48.597

我必须说我没有对此进行测试，但据我所知，您应该能够按照以下说明远程启动文件：[https ://serverfault.com/questions/36419/using-ssh-to-remotely-start -一个过程](https://serverfault.com/questions/36419/using-ssh-to-remotely-start-a-process)对吗？

现在，如果您已经完成了该步骤，您可以创建一个 python 脚本（即：launch_my_project_remotely.py）并使其调用该命令行**或**创建一个外部启动器（运行 > 外部工具）。

请注意，您可以在窗口 > 首选项 > 常规 > 键中将键绑定与“运行上次启动的外部工具”相关联。

ps：请注意，在这种情况下，您可能还对远程调试感兴趣。为此，请参阅： http: [//pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)

ps2：就个人而言，我不太喜欢这样的设置，更喜欢完全远程（即： http: [//nomachine.com/](http://nomachine.com/)）或者只是在本地做所有事情并拥有一个[http://jenkins-ci.org/](http://jenkins-ci.org/)服务器以持续集成我在不同环境中提交的内容。

# sql - 使用的 SQL Server 版本不支持数据类型 datetime2？

> ID：10224406
> 
> 赞同：27
> 
> 时间：2012-04-19T08:34:25.967
> 
> 标签：sql, sql-server, entity-framework, entity-framework-4, linq-to-entities

```
An error occurred while executing the command definition. See the inner exception for details. bbbbInnerException:aaaa System.ArgumentException: The version of SQL Server in use does not support datatype 'datetime2'.

   at System.Data.SqlClient.TdsParser.TdsExecuteRPC(_SqlRPC[] rpcArray, Int32 timeout, Boolean inSchema, SqlNotificationRequest notificationRequest, TdsParserStateObject stateObj, Boolean isCommandProc)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)

   at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavioR 
```

我有一个使用实体框架的网站。几个月前，我添加了一个新表，并在现有表中添加了一些列；一切正常。

今天我更新了 EDMX 的映射，以便可以使用新表和新列，并将 WebMethods 添加到我的 services.asmx 文件中。从那以后，我无法运行我的网站，因为我遇到了我无法理解的错误。如果您理解，请向我解释，并告诉我我的错误在哪里。

我没有在任何地方使用过**datetime2**。在我的新表中没有这样的数据类型，在我添加到现有表中的列中也没有。

我PC上的SQL版本是SQL2008 R2，服务器上我有SQL2008。我没有将服务器升级到 R2 的选项。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-19T09:18:21.137

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T09:47:03.460

In addition to @Mithrandir answer validate that your database is running in compatibility level set to 100 (SQL 2008).

You don't have to use `DATETIME2` in your database to get this error. This error happens usually once you add required (`NOT NULL`) `DATETIME` column to existing table and you don't set the value prior to saving the entity to database. In such case .NET will send default value which is 1.1.0001 and this value doesn't fit into `DATETIME` range. This (or something similar) will be source of your problem.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-15T13:52:09.650

Open your EDMX in a file editor (or “open with…” in Visual Studio and select XML Editor). At the top you will find the storage model and it has an attribute ProviderManifestToken. This has should have the value 2008\. Change that to 2005, recompile and everything works.

NOTE: You'll have to do this every time you update the model from database.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-24T16:09:23.970

The other solutions worked for me but I needed a more permanent solution that would not be reverted every time the edmx was updated from the database. So I created a "Pre-build event" to modify the ProviderManifestToken automatically.

Link to original answer: [https://stackoverflow.com/a/8764394/810850](https://stackoverflow.com/a/8764394/810850)

The prebuild step looks like this:

```
$(SolutionDir)Artifacts\SetEdmxVer\SetEdmxSqlVersion $(ProjectDir)MyModel.edmx 2005 
```

The code is here:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace SetEdmxSqlVersion
{
    class Program
    {
        static void Main(string[] args)
        {
            if (2 != args.Length)
            {
                Console.WriteLine("usage: SetEdmxSqlVersion <edmxFile> <sqlVer>");
                return;
            }
            string edmxFilename = args[0];
            string ver = args[1];
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(edmxFilename);

            XmlNamespaceManager mgr = new XmlNamespaceManager(xmlDoc.NameTable);
            mgr.AddNamespace("edmx", "http://schemas.microsoft.com/ado/2008/10/edmx");
            mgr.AddNamespace("ssdl", "http://schemas.microsoft.com/ado/2009/02/edm/ssdl");
            XmlNode node = xmlDoc.DocumentElement.SelectSingleNode("/edmx:Edmx/edmx:Runtime/edmx:StorageModels/ssdl:Schema", mgr);
            if (node == null)
            {
                Console.WriteLine("Could not find Schema node");
            }
            else
            {
                Console.WriteLine("Setting EDMX version to {0} in file {1}", ver, edmxFilename);
                node.Attributes["ProviderManifestToken"].Value = ver;
                xmlDoc.Save(edmxFilename);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-07T17:00:40.743

# Code First workaround.

I got this error while running a linq select query, and changing the EDMX isn't an option for me (Code First has no EDMX), and I didn't want to implement this [How to configure ProviderManifestToken for EF Code First](https://stackoverflow.com/questions/4741499/how-to-configure-providermanifesttoken-for-ef-code-first) for a Linqpad query that wasn't going into production code:

```
// [dbo].[People].[Birthday] is nullable

DateTime minBirthday = DateTime.Now.AddYears(-18);

var query =
    from c in context.People
    where c.Birthday > birthday
    select c;

var adults = query.ToList(); 
```

I fixed it by changing `query` to null check first:

```
var query =
    from c in context.People
    where (c.Birthday.HasValue && (c.Birthday > birthDay) )
    select c; 
```

# asp.net - 打开一个新窗口并将参数传递给它 vb.net asp

> ID：10224407
> 
> 赞同：1
> 
> 时间：2012-04-19T08:34:26.890
> 
> 标签：asp.net, vb.net, reporting

嗨，我有一个 Web 应用程序，其中包含特定用户的所有可用报告的列表框。我想在单击一行时打开一个新页面“ReportViewerPane”并将报告名称和一些参数传递给 reportviewer.aspx 然后我需要将 ReportViewer 控件 .reportpath 设置为正确的（通过）值并设置参数值（也通过）。

我在父页面中有这个的那一刻。'PassParmString' 是主窗体上的一个文本框：

```
function open_win()
{
   var Parms = document.getElementById('<%=PassParmString.ClientID %>');
   window.open("ViewerPane.aspx?prm=" + Parms,"_blank","left=20,top=20,width=1000,height=1140,toolbar=0,resizable=1");
}
</script> 
```

但不知道如何访问`'Parms'`我在 ReportViewer.aspx 表单中传递的参数。

请帮忙。

我不擅长这个。并且真的试图理解这些帖子，所以请耐心等待。

非常感谢

苹果电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:55:47.037

你正在传递元素，而不是它的值，你可以做这样的事情：

```
Parms = document.getElementById('PassParmString').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:41:38.133

您可以使用`ViewerPane.aspx`页面中的常规请求查询字符串集合来获取它

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) 
    If NOT IsPostBack
        If Not String.IsNullOrEmpty(Request.QueryString("prm"))
           string querystringvalue = Request.QueryString("prm").ToString()
        End If
    End If
End Sub 
```

尝试将您的 javascript 更改为此

```
<script>
function open_win()
{
   var Parms = document.getElementById('<%=PassParmString.ClientID %>');
   window.open("ViewerPane.aspx?prm=" + Parms.value,"_blank","left=20,top=20,width=1000,height=1140,toolbar=0,resizable=1");
}
</script> 
```

看看这是否有帮助:)

# spring - 为什么 SessionFixationProtectionStrategy 不迁移会话属性？

> ID：10224409
> 
> 赞同：2
> 
> 时间：2012-04-19T08:34:37.883
> 
> 标签：spring, http, session, attributes, spring-security

```
rg.springframework.security.web.authentication.session.SessionFixationProtectionStrategy       - Invalidating session with Id '1Xih9jabIqjCtnNqIt1e6w__.node1' and migrating attributes.
2012-04-17 16:32:41,481 INFO  [STDOUT] (http-0.0.0.0-8080-11) SESSION DESTROYED:   1Xih9jabIqjCtnNqIt1e6w__.node1
2012-04-17 16:32:41,482 INFO  [STDOUT] (http-0.0.0.0-8080-11) NEW SESSION CREATED:    Mo0vId0MsOE6HS0+TQpZ6Q__.node1 of 3 
```

有什么方法可以关闭这个 SessionFixationProtectionStrategy 或修复属性迁移，因为它没有迁移会话属性，这会破坏很多东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:56:38.237

可以使用以下方法关闭会话固定保护：

```
<http [...]>
    [...]
    <session-management session-fixation-protection="none"/>
    [...]
</http> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T23:24:52.973

或者..如果您仍然需要保护自己免受固定问题的影响：

```
<bean id="concurrentSessionControlStrategy"
  class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy"
  c:sessionRegistry-ref="sessionRegistry"
  p:maximumSessions="5"
  p:alwaysCreateSession="true"
  p:migrateSessionAttributes="true"
  p:exceptionIfMaximumExceeded="false"/> 
```

# asp.net - asp.net 问题中的基于文件的 FoxPro 数据库

> ID：10224411
> 
> 赞同：1
> 
> 时间：2012-04-19T08:34:53.957
> 
> 标签：asp.net, sql-server-2008, foxpro, app-data

我有一组数据存储在本地系统的 FoxPro 数据库中。我想在我的网站上使用这些数据。现在我不知道使用它的最佳方法是什么。

1-将数据库本身放在 app_data 中并使用 VFP Oledb 提供程序从中提取数据？2-或者将它用作与我当前的 sql server 的链接服务器？3-或创建一个上传 VFP 数据库的页面，然后将其记录导出到具有相同架构的 sql server 数据库？

我无法回答这些问题，因为：我不知道放置在 app_data 中的数据库的安全性和可扩展性 / FoxPro 数据库作为网站后端数据存储是否是一个不错的选择 / 通过代码将数据从 VPF 导出到 Sql 数据库不是错误证明（我不确定我是否丢失了记录和 FK）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:50:28.097

数据多久更改一次？你需要实时吗？如果是，请尝试使用链接服务器：

[http://support.microsoft.com/kb/199​​131](http://support.microsoft.com/kb/199131)

如果您可以有 X 小时\分钟的延迟（这将取决于您的数据大小），如何构建 SSIS 包以定期运行以从 FoxPro 获取数据并插入到 SQl Server 数据库中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:51:09.260

Visual FoxPro 也有一个升迁向导，它将完成将 Visual Foxpro 数据库转换为 SQL Server 的繁重工作，包括表结构和数据。

# javascript - 使用 json 数据填充现有数组

> ID：10224415
> 
> 赞同：1
> 
> 时间：2012-04-19T08:35:02.267
> 
> 标签：javascript, arrays, json, function

我在用 json 返回的数据填充现有数组时几乎没有问题。这是我所拥有的

```
myarr=[];
function fillarr()
    {
    $.getJSON("test.php?c=10",function(data)
            {
            $.each(data, function(key, val)
                    {
                    myarr.push(data[val]);
                    }
                    });
            });
    } 
```

我的问题是，数组在函数之外是空的。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:36:46.657

```
myarr=[];
function fillarr()
    {
    $.getJSON("test.php?c=10",function(data)
            {
            $.each(data, function(key, val)
                    {
                        myarr.push(val);
                        console.log(myarr); // you will myarr here, not out side
                    }
                    });
            });
      console.log(myarr); // wont get
    } 
```

`myarr`在 ajax 请求完成后获取其内容并且需要时间。所以`console`在请求完成之前在 $.getJSON 之外执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:45:19.243

```
myarr=[];
function fillarr()
{
    $.getJSON("test.php?c=10", function(data) {
        $.each(data, function(key, val) {
            myarr.push(val);
        });
        doSomethingNowThatTheArrayIsActuallyPopulated();
    });
}

fillarr();

console.log(myarr); // This will print an empty array, it hasn't been populated yet.

function doSomethingNowThatTheArrayIsActuallyPopulated() {
    console.log(myarr); // This will print the array which now contains the json values
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:46:17.273

[如果返回数据是一个对象，那么使用 jQuery.each](http://api.jquery.com/jQuery.each/)将每个值推送到数组中会更容易。

```
function fillarr(){
    $.getJSON("test.php?c=10",function(data){
        $.each(data, function(key, val){
            myarr.push(val);
        });
    });
} 
```

如果返回数据是一个数组，[Array concat](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)会更快

```
function fillarr(){
    $.getJSON("test.php?c=10",function(data){
        myarr = myarr.concat(data);
    });
} 
```

# php - 字符串查询中的 PHP Yii MongoDB

> ID：10224421
> 
> 赞同：0
> 
> 时间：2012-04-19T08:35:10.090
> 
> 标签：php, mongodb, yii

我需要在字符串中找到包含某个电子邮件地址的所有学校

此时，我正在向我的数据库发送查询以获取这样的学校列表

```
$aSchools = School::model()->findAllByAttributes(array(
    'finished' => School::SCHOOL_CREATED,
)); 
```

之后，我遍历所有学校以检查它们是否包含这样的邮件地址：

```
$aFoundSChools = array();
    foreach($aSchools as $oSchool)
    {
        if (strpos($oSchool->mailAddress, Yii::app()->user->mailAddress))
        {
            $aFoundSChools [] = $oSchool;
        }
    } 
```

但我猜这可能更干净，对吧？我可以在单个函数中执行此操作，例如 sql 中的“LIKE”查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:51:40.423

MongoDB 支持正则表达式形式的“like”查询。请注意，这不能使用索引。从普通的 PHP 开始，你可以这样构造它：

```
$query = array(
    'finished' => School::SCHOOL_CREATED,
    'mailAddress' => new MongoRegexp( '/' . addslashes( Yii::app()->user->mailAddress ) . '/' ),
); 
```

如果您认为您的邮件地址可能包含`/`.

我不太了解 Yii，但我希望您可以`$query`像这样使用，只需将您已经存在的测试替换为“完成”：

```
$aSchools = School::model()->findAllByAttributes( $query ); 
```

# android - Android Activity 选择

> ID：10224426
> 
> 赞同：0
> 
> 时间：2012-04-19T08:35:43.613
> 
> 标签：android, android-activity

我需要根据授权选择是否应该运行一项活动或另一项活动。如果您在 AccountManager 中没有帐户，我想在其他情况下显示 RegistrationAcitivity，我想显示 LoginActivity。这样做的最佳模式是什么？我需要把正在检查的代码放在哪里？在其中一项活动中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:47:57.763

您可以检查条件是用户已经注册然后移动到**AccountManager**。

```
Intent intent = new Intent(this,AccountManager.class);
startActivity(intent); 
```

如果没有，则将他重定向到**RegistrationAcitivity**

```
Intent intent = new Intent(this,RegistrationActivity.class);
startActivity(intent); 
```

为此，您可以设置标志。

或将数据存储在**SharedPreferences**或**数据库中**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:18:55.837

您可以将代码放入注册活动中，检查那里的帐户，如果可用，将他重定向到登录活动

# php - 用于检测超链接的正则表达式 (PHP)

> ID：10224431
> 
> 赞同：-4
> 
> 时间：2012-04-19T08:36:05.543
> 
> 标签：php, regex, hyperlink

> **可能重复：**
> [从内容中提取所有 <a> 标签](https://stackoverflow.com/questions/6568917/extract-all-a-tags-from-content)

我正在使用 curl (PHP) 获取网站内容，然后检查它是否包含字符串。我想检查这个字符串是否是超链接。有人知道执行此操作的正确正则表达式/代码吗？

非常感谢，

Ĵ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:39:20.413

您想使用 PHP 的[filter_var](http://php.net/manual/en/function.filter-var.php)函数。例如：`filter_var('http://example.com', FILTER_VALIDATE_URL, FILTER_FLAG_PATH_REQUIRED)`

# java - 接口，如果不是所有实现都使用所有方法怎么办？

> ID：10224440
> 
> 赞同：7
> 
> 时间：2012-04-19T08:36:37.800
> 
> 标签：java, interface, implementation

我对接口编程相当陌生，并试图将其作为开发测试驱动的主要工具。

目前我们有很多管理器类都实现了一个`CRUD`接口。然而，有些经理还没有进行更新，有些没有删除，有些可能永远不会这样做。

* * *

**未实现异常？**

可以吗，只是

```
throw new NotImplementedException() 
```

直到该方法被实施，或者如果它从未实施，甚至一直如此？

（很明显，源代码注释告诉程序员“不应该使用这种方法，例如‘男性’‘女性’这样的类型永远不会被删除）？

* * *

**分裂？**

还是应该将我的 CRUD 界面拆分为可创建、可读取（可搜索）、可更新和可删除？这不会弄乱我的班级定义吗？

```
PersonManager implements Creatable<Person>, Updateable<Person>, Deletable<Person>, Searchable<Person> 
```

* * *

**拆分和合并？**

或者我应该将所有 4 之类的一些接口组合到 CRUD 中，也许还有一些其他组合，例如读取 + 更新？

也许这也会创建大量接口，其中一个必须单击一个大的继承路径以找出哪个接口实现了当前情况下所有所需的原子接口（我需要读取和创建，那么哪一个只实现了这两个？这会很快变得复杂得多）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:42:49.037

IMO，对于中间阶段-可以使用`NotImplementedException`，直到您完成实施为止。

但是，**作为一种永久性解决方案-我认为**[在大多数情况下]这是一种不好的做法。

相反，我会创建一个包含**所有**实现类共有的行为的接口，并**使用子接口**将它们聚集起来以实现更具体的行为。

这个想法类似于 java 标准**[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)**，它扩展了 a **[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)**- 我们不想将其`Set`视为`SortedSet`s 并为这种类型的变量赋予 值`HashSet`，而是`SortedSet`为此目的使用子接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T08:43:08.463

通常你想抛出`UnsupportedOperationException`一个运行时异常，明确提到不支持请求的操作。

拥有大量接口会导致文件过多，并且如果有人试图查看它们，他们会感到困惑。在这种情况下，Java 文档也没有多大帮助。

如果一个接口的操作太多，并且并非所有操作在逻辑上绑定在一起，那么拆分接口是有意义的。

对于数据库操作，这种情况很少见，因为您将进行一些基本操作，这在大多数情况下都是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:45:55.120

NotImplementedException 并不意味着该类不支持此操作。这意味着它没有实施，但它将在未来实施。

从逻辑的角度来看，所有接口方法都必须实现，并且必须运行良好。但是如果你离开它，只为自己编写一个应用程序，那么你就会记住这个限制。另一方面，我会很生气一些开发人员实现了接口并且没有实现它。因此，我认为您不能只为将来的开发而保留未实现的接口方法。

我的建议是修改接口，然后在实现的方法中使用异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:27:35.313

在支持协变和逆变的框架中，拆分接口然后定义一些复合接口可能非常有用。对于不提供此类支持的框架（甚至有时在提供此类支持的框架上），有时让接口包含各个实现可能支持或不支持的方法会更有帮助（当尝试不受支持的操作时，实现应该抛出异常）；如果要这样做，则应包含方法或属性，外部代码可以通过这些方法或属性询问支持哪些操作，而无需使用任何会引发异常的代码。

然而，即使在使用对动作的支持是可选的接口时，有时定义额外的接口来保证某些动作可用也可能会有所帮助。拥有在不添加新成员的情况下继承其他接口的接口可能是实现此目的的好方法。如果做得正确，代表实现所需的唯一额外工作是确保它们将自己声明为最具体的适用类型。客户的情况稍微复杂一点：如果客户的需求可以在类型系统中充分表达，客户可以通过要求特定类型来避免运行时类型检查的需要。另一方面，在客户端之间传递实例的例程可能会因某些客户端而变得复杂。

# objective-c - 了解 NSZombie 消息

> ID：10224444
> 
> 赞同：0
> 
> 时间：2012-04-19T08:36:49.050
> 
> 标签：objective-c, xcode

我在 xcode 4.2 中启用了 nszombie。（来自产品->editScheme）

我收到了这条消息：

```
-[buttons respondsToSelector:]: message sent to deallocated instance 0x48ae50 
```

我确实有按钮类，但我看不出这条消息的确切问题。

我可以从 NSZombie 获得更多信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:39:45.013

**问题是按钮**类型的对象被释放，然后它的**respondsToSelector:**方法被调用，该对象位于地址 0x48ae50。

如果你在没有 NSZombies 的情况下运行，你的应用程序就会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:39:36.020

此特定消息的含义是`buttons`实例 (at `0x48ae50`) 已被释放 (aka `release`d)。因此，通过尝试将`respondsToSelector:`消息发送到`nothing`（记住实例已被解除分配），它会引发错误。

尝试在它被触发的地方附近设置一个断点，看看为什么......（现在，你的`buttons`对象最喜欢的地址是`0x0`）

在大多数（如果不是全部）情况下，这与一些错误的内存管理有关；一个对象被释放得太快，在它必须的时候没有保留，等等...... ;-)

# qt - QML：如何在图像源之间做出漂亮的过渡效果（一个淡入另一个）？

> ID：10224447
> 
> 赞同：7
> 
> 时间：2012-04-19T08:36:57.930
> 
> 标签：qt, qml

我想知道如何在 QML 中的图像源之间进行平滑过渡，我尝试

```
import QtQuick 1.1
Image {
   id: rect
   source:  "quit.png"
   smooth: true
   MouseArea {
       id: mouseArea
       anchors.fill: parent
       anchors.margins: -10
       hoverEnabled: true         //this line will enable mouseArea.containsMouse
       onClicked: Qt.quit()
   }

    states: State {
        name: "mouse-over"; when: mouseArea.containsMouse
        PropertyChanges { target: rect; scale: 0.8; source :"quit2.png" }
    }

    transitions: Transition {
        NumberAnimation { properties: "scale, source"; easing.type: Easing.InOutQuad; duration: 1000  }
    }
} 
```

但是它不能像最终状态更改一样在源上作为过渡起作用..所以我想知道如何使一个图像源淡入andothe并返回？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T11:52:02.550

您希望第一张图像淡出到另一张图像中吗？如果您将两个`Image`对象放在一起，然后为`opacity`属性设置动画效果如何？

编辑：这对我有用（我正在使用 QtQuick 1.0，因为我的 Qt Creator 安装有点过时）：

```
import QtQuick 1.0
Rectangle {
Image {
   id: rect
   source:  "quit.png"
   smooth: true
   opacity: 1
   MouseArea {
       id: mouseArea
       anchors.fill: parent
       anchors.margins: -10
       hoverEnabled: true         //this line will enable mouseArea.containsMouse
       onClicked: Qt.quit()
   }

    states: State {
        name: "mouse-over"; when: mouseArea.containsMouse
        PropertyChanges { target: rect; scale: 0.8; opacity: 0}
        PropertyChanges { target: rect2; scale: 0.8; opacity: 1}
    }

    transitions: Transition {
        NumberAnimation { properties: "scale, opacity"; easing.type: Easing.InOutQuad; duration: 1000  }
    }
}

Image {
   id: rect2
   source:  "quit2.png"
   smooth: true
   opacity: 0
   anchors.fill: rect

  }
} 
```

对于您评论中的问题：您可以通过复制锚点将图像完全放在另一个之上`anchors.fill: rect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T17:04:03.570

这也是图像之间的简单滚动过渡：

```
import QtQuick 2.6
import QtQuick.Controls 1.4
import QtQuick.Window 2.2

Window {
  visible: true
  width: 640
  height: 480
  title: qsTr("Hello World")

  Rectangle {
    id: imageRect

    anchors.centerIn: parent
    width: 240
    height: 320
    clip: true

    property int currentIndex: 0
    property var imageSources: [ "imageLeft.jpg", "imageCenter.jpg" ]

    Repeater {
      model: imageRect.imageSources

      Image {
        id: image

        width: parent.width
        height: parent.height

        x: index * parent.width - imageRect.currentIndex * parent.width
        fillMode: Image.PreserveAspectFit
        source: imageRect.imageSources[index]
        Behavior on x { SpringAnimation { spring: 2; damping: 0.2 } }
      }
    }
  }

  Button {
    id: leftButton
    anchors.bottom: parent.bottom
    text: "left"
    onClicked: if(imageRect.currentIndex > 0) imageRect.currentIndex--
  }

  Button {
    id: rightButton
    anchors.bottom: parent.bottom
    anchors.left: leftButton.right
    text: "right"
    onClicked: if(imageRect.currentIndex < imageRect.imageSources.length - 1) imageRect.currentIndex++
  }

  Button {
    id: addButton
    anchors.bottom: parent.bottom
    anchors.left: rightButton.right
    text: "+"
    onClicked: imageRect.imageSources = [ "imageLeft.jpg", "imageCenter.jpg" , "imageRight.jpg" ]
  }
} 
```

# r - R 和带有 AR(q) 误差的模型的更正

> ID：10224449
> 
> 赞同：2
> 
> 时间：2012-04-19T08:37:07.650
> 
> 标签：r

有谁知道是否有一个包来估计错误过程为 AR(q) 的校正模型，这是一种更通用的 Prais-Winsten 方法？

# session - 没有 cookie 的 Scalatra 会话

> ID：10224453
> 
> 赞同：5
> 
> 时间：2012-04-19T08:37:17.293
> 
> 标签：session, scala, scalatra

我正在使用 Scalatra 框架来构建 Web 应用程序。该应用程序依赖于会话，但我不能使用会话 cookie（因为从技术上讲，只有一个用户，同时运行多个会话）。

每个会话都有一个唯一的会话密钥，我想将其用作标识符。我希望将此密钥作为 GET 或 POST 参数而不是 cookie 标头发送。

我现在的问题是：*如何在没有 cookie 而只是作为标识符的参数的 Scalatra servlet 中存储会话信息（即状态）？*

到目前为止，我尝试使用文件系统来存储所有会话信息，但这太慢且没有必要，因为会话仅持续几秒钟。

（安全不是问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T18:18:13.227

我想出了我该怎么做。

在每个 Scalatra servlet 中，我都可以访问`servletContext`实现`javax.servlet.ServletContext`接口的全局。我可以使用它的两种方法`setAttribute(x: String, y: Any)`来`getAttribute(x : String)`存储关于我的会话的信息，其中 x 是我的唯一标识符，y 是编码为 case class 的会话信息`Session`。

实际上，我有以下内容：

```
def storeSession(key : String, session : Session) {
    servletContext.setAttribute(attributePrefix + key, session)
}

def loadSession(key : String) : Session = {
    val session = servletContext.getAttribute(attributePrefix + key)
    if (session != null) {
        session match {
            case s : Session => s
            case _ => null
        }
    } else {
        null
    }
} 
```

通过这种方式，我可以在服务器上保持状态，而无需使用 cookie，只需客户端必须提供一个唯一标识符作为 GET 值。

我想这种技术可以应用于 Java 和 Scala 中的任何 servlet，它提供了一个 的实例`ServletContext`，而不仅仅是 Scalatra。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:10:49.120

好问题。

与其将状态存储到磁盘和由此带来的性能损失，不如将 Redis 存储在内存中怎么样？

debasishg有一个[Scala 实现，它是 Scala 社区中的一个重量级人物，它可能符合要求。](https://github.com/debasishg/scala-redis)

在栅栏的无状态方面，例如在 Spray 中，这被建议作为维护状态服务器端的替代方法；即将客户端cookie标识符存储到内存缓存与依赖HttpSession

# nhibernate - NHibernate 引用 NotFound.Ignore() 正在运行太多查询

> ID：10224458
> 
> 赞同：2
> 
> 时间：2012-04-19T08:37:35.607
> 
> 标签：nhibernate, fluent-nhibernate

在我使用表 H 的映射中

`References(x => x.E).Column("E_Code").Nullable().NotFound.Ignore()`;

从一个表 (H) 到另一个表 (E)，为了给我一个多对一的关系，我得到一个查询，每个实例的 H 表中的 E_Code 在 E 表中不存在。如果没有匹配项，如何减少查询数量但仍将 E 设置为 null？

# jquery - 我的 nextAll() 不会起作用

> ID：10224460
> 
> 赞同：0
> 
> 时间：2012-04-19T08:37:50.273
> 
> 标签：jquery, html, traversal

我知道这已经受到质疑，但我的代码无法达到我想要的效果。

```
<table id="dataTable" style="width: 450px;">
    <tr>
        <td><INPUT type="checkbox" name="chk[]" id="chk[]" /></td>
        <td>
            <table>
                <tr>
                    <td><INPUT type="text" style="text-align:right;width:50px;" name="qty[]" id="qty[]" /></td>
                    <td><INPUT type="text" onchange="display_details(this, this.value, 'item')" name="bar[]" id="bar[]" /></td>
                    <td><INPUT type="text" readonly="1" id="item[]" /></td>
                </tr>
                <tr>
                    <td colspan="3" align="left"><div style="border:1px solid #000;width:425px;float:left">asdasdasdasd</div></td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

此代码块位于一个容器内，该容器将在调用该函数时显示。
这是我的js代码：

```
function display_details(er, bar,ex){  
    var id = $(er).nextAll('input').css('background-color', 'red');
} 
```

上面的这段代码不起作用。我也试过这段代码：

```
var id = $(er).css('background-color', 'red'); 
```

这工作得很好。

这是我也尝试运行的代码。

```
var id = $(er).nextAll('div:first').css('background-color', 'red');
var id = $(er).nextAll('input:first').css('background-color', 'red');
var id = $(er).nextAll('input').first().css('background-color', 'red');
var id = $(er).nextAll('div').first().css('background-color', 'red'); 
```

他们都没有做任何事情。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:44:21.020

`.nextAll()`适用于当前元素的兄弟姐妹。您的输入没有任何兄弟姐妹，所以什么也没有发生。

您需要使用后移到树上`.parent()`，然后从那里找到要更新的元素。

这适用于下一个输入：

```
function display_details(er, bar,ex){  
   var id = $(er).parent().nextAll('td').find('input').css('background-color', 'red');
} 
```

工作示例 - [http://jsfiddle.net/jMwyG/1/](http://jsfiddle.net/jMwyG/1/)

# c# - 解析 CoDeSys .pro 文件

> ID：10224462
> 
> 赞同：2
> 
> 时间：2012-04-19T08:37:59.443
> 
> 标签：c#, parsing, codesys

我正在尝试解析 .pro 文件，但文件中出现奇怪的字符。

```
 public List<string> GetTextBlocks(int minBlockSize = 10)
    {
        if (_TextBlocks != null && _TextBlocksMinBlockSize == minBlockSize)
            return _TextBlocks;

        StreamReader pro = new StreamReader(_FileName, Encoding.ASCII);
        List<string> Blocks = new List<string>(); 

        string Content = pro.ReadToEnd();
        StringBuilder CurrentBlock = new StringBuilder();

        for (int n = 0; n < Content.Length; n++)
        {
            int c = Content[n];
            if (char.IsControl((char)c) && c != 10 && c != 13 && c != 9)
            {
                if (CurrentBlock.Length >= minBlockSize)
                    Blocks.Add(CurrentBlock.ToString());
                CurrentBlock.Clear();
            }
            else
                CurrentBlock.Append((char)c);
        }

        _TextBlocks = Blocks;
        _TextBlocksMinBlockSize = minBlockSize;

        return Blocks;//TODO: Comment
    } 
```

以前有人试过吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:42:03.127

你必须使用：

```
Encoding.UTF7 
```

# c# - 如何创建 .rdlc 文件？

> ID：10224465
> 
> 赞同：2
> 
> 时间：2012-04-19T08:38:10.320
> 
> 标签：c#, asp.net

我正在使用 Visual Studio 2010 使用报表查看器生成报表......因为我对此完全陌生，我不知道如何创建 RDLC 文件以及如何使用它......另外，请告诉我连接在报告查看器和 rdlc 之间

请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:42:37.003

要添加 RDLC 报告，请执行`Project > Add New Item... > Reporting > Report`. 您还可以使用同一屏幕上的报告向导。RDLC 拥有大量您需要了解的信息，因此您需要[开始深入研究文档](http://msdn.microsoft.com/en-us/library/ms252067%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T19:24:05.020

**创建客户端报告定义 (.rdlc) 文件**

这是答案[http://msdn.microsoft.com/en-us/library/ms252067.aspx](http://msdn.microsoft.com/en-us/library/ms252067.aspx)

向项目添加新报告

1.  在项目或网站菜单中，选择添加新项目。

2.  在“添加新项”对话框的“已安装模板”窗格中，选择 Visual Basic 或 Visual C#。

3.  在模板窗格中，选择报告或报告向导。

如果您选择报告，则会将一个空白 .rdlc 文件添加到项目中。有关如何在报表设计器中设计报表的详细信息，请参阅 SQL Server 联机丛书中的 Reporting Services 报表。如果您选择报告向导，则报告向导将启动以指导您完成创建报告的步骤。有关报表向导的详细信息，请参阅使用 Visual Studio 报表向导创建客户端报表定义。

# salesforce - 显示机会阶段名称选项列表只读基于用户角色

> ID：10224466
> 
> 赞同：1
> 
> 时间：2012-04-19T08:38:15.047
> 
> 标签：salesforce

我是 Salesforce 的新手，需要一个想法，假设我有一个名为“ABC”的用户。
当“ABC”用户以可编辑的形式登录时，我不想显示机会`StageName`选项列表，或者只想`StageName`在文本字段或其他任何内容中显示值。

我试图在设置下设置权限，但没有达到我想要的。我刚刚知道公式字段或公式将用于此，因为我是 Salesforce 的新手，所以我无法创建公式字段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:02:52.080

为此，您应该尝试字段级别的安全设置： [https ://login.salesforce.com/help/doc/en/admin_fls.htm](https://login.salesforce.com/help/doc/en/admin_fls.htm)

您可以为每个字段/配置文件组合选择哪些字段是可见的，哪些是可编辑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:57:52.003

您不能在系统必填字段上应用 FLS，也不能在页面布局上将它们设为只读。您也不能从页面布局中删除此类字段。简而言之，您将永远被这个领域所困！

我希望 Stage 不是必填字段。

米特什

# regex - 用于编译指示的 ReSharper To-Do Explorer 正则表达式模式

> ID：10224467
> 
> 赞同：2
> 
> 时间：2012-04-19T08:38:23.470
> 
> 标签：regex, resharper

在我们的代码库中，有放置警告 pragma 以指示某些代码片段（例如待办事项、备注等）的惯例：

```
#warning PMO 2012/04/19 Some remark here
    var t = 1;
    // and other pieces of code... 
```

有没有办法让 ReSharper 的 To-Do Explorer 找到这些编译指示？我添加了一个带有此搜索表达式的项目：

```
(?<=\W|^)(?<TAG>PMO)(\W|$)(.*) 
```

这将只搜索我的项目（我的首字母是“PMO”）。我也试过：

```
(?<=\W|^)(?<TAG>warning)(\W|$)(.*) 
```

和

```
(?<=\W|^)(?<TAG>#warning)(\W|$)(.*) 
```

我已经尝试了“在评论中”、“在字符串中”和“在标识符中”选项的几种组合，但没有找到任何东西。

我的正则表达式是否错误（尽管我基于现有的正则表达式，并且将“PMO”放在正常代码中的某个地方不是问题）？还是 ReSharper 忽略了编译指示？我猜是后者。如果是这样，有没有人有一个不错的选择（除了“寻找解决方案”）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:30:54.723

ReSharper 目前不为其待办事项管理器解析预处理器指令，因此您现在尝试实现的目标很可能是不可能的。有一个[功能请求](http://youtrack.jetbrains.com/issue/RSRP-71440)来实现这个，所以你可能想投票和观看。

# java - 如果字符串池的大小超过了怎么办？

> ID：10224476
> 
> 赞同：10
> 
> 时间：2012-04-19T08:39:10.960
> 
> 标签：java, string

在 Java 中，

字符串常量池中的字符串文字不会被垃圾收集，因为它们是从由运行时实例创建的引用表中引用的，以优化空间。

**如果字符串字面量池的大小超过那么，由于字符串字面量池中的每个字符串都有引用，因此它将不符合 GC 的条件。JVM如何处理它？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T09:45:38.283

在[JavaRanch](http://www.coderanch.com/t/236271/java-programmer-SCJP/certification/String-Pool-Redux)上对真实的代码示例进行了长时间的讨论。

一般输出如下：

1.  如果在 RUNTIME 使用 String.intern() 将字符串添加到常量池，则**可以在**不再使用后对它进行垃圾收集。最有可能的是，字符串池只保留对添加字符串的软引用，从而允许对它们进行垃圾收集（不能确定，因为 String.intern() 是本机方法）。
2.  如果一个字符串是一个COMPILE时间常数，则将其添加到相应类的常数池中。因此，只有在类卸载后才能对其进行垃圾回收。

您的问题的答案是：由于 String 常量而获得 OutOfMemoryError 的唯一方法是加载大量具有在编译时计算的许多字符串文字的类。然后你最终可以超过 PermGen 空间的最大大小。但这会在您将类加载到内存时发生（例如，启动应用程序、将项目部署到 WebServer、动态加载新库等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:09:21.710

当不再需要字符串文字时，可以收集它们。通常，如果它们出现在类中，这不是问题，因为如果您尝试加载大量类，例如 Maximum Perm Gen，您可能会达到其他限制。

一般来说，开发人员足够聪明，不会过度使用字符串字面量池，而是使用数据库或文件来加载大量数据（如果其大小不一）。

如果您大量使用 String.intern() 来尝试优化系统空间，则可能会引入问题。String.intern() 不是免费的，如果你在其中添加大量（数百万）字符串，它会变得越来越昂贵。如果这是一个性能问题，那么对于开发人员来说应该是相当明显的。

# ruby - 合并数组而不丢失原始顺序，红宝石

> ID：10224477
> 
> 赞同：1
> 
> 时间：2012-04-19T08:39:11.740
> 
> 标签：ruby, arrays, merge

我有一个看起来像这样的数组结构：

```
a=[
  [['a','A'],['b','B'],['c','C']],
  [['d','D'],['e','E'],['f','F']]
] 
```

如何合并内部两个数组，使新结构成为数组数组

```
[
 ['a','A'],['b','B'],['c','C'],['d','D'],['e','E'],['f','F']
] 
```

试过了

```
a.inject([]){|k,v| v | k} # but order gets changed
=> [["d", "D"], ["e", "E"], ["f", "F"], ["a", "A"], ["b", "B"], ["c", "C"]] 
```

我怎样才能在不丢失订单的情况下获得理想的结果。

提示，意见，建议，好吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:51:33.317

`array.flatten`接受一个参数：

```
a.flatten(1) #[["a", "A"], ["b", "B"], ["c", "C"], ["d", "D"], ["e", "E"], ["f", "F"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:45:18.520

试试这个：

```
a.inject([]){|k,v| k|v} 
```

# php - 在网站上显示 facebook 页面新闻提要

> ID：10224480
> 
> 赞同：1
> 
> 时间：2012-04-19T08:39:28.773
> 
> 标签：php, facebook

我使用了在 facebook 开发者网站上找到的 javascript。它曾经在网站上显示我的页面newfeed，并有一个赞按钮供人们加入页面，直到他们更改页面布局时（大约1个月前），它一直运行良好，不幸的是它破坏了它。

我使用的脚本是[http://static.ak.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US](http://static.ak.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US)

你可以看到它在行动： http: [//fullmount.co.nz/index.php?main_page=news](http://fullmount.co.nz/index.php?main_page=news)

我想知道是否有一些简单的东西可以改变他的脚本以使其再次工作，或者是否有另一个我可以使用的脚本来代替适用于较新页面格式的脚本？

我是一个 php 向导，但是一个 js 业余爱好者，所以我什至没有真正看过代码，我只知道它曾经可以工作。

# ruby - 从 Ruby 运行命令，显示和捕获输出

> ID：10224481
> 
> 赞同：48
> 
> 时间：2012-04-19T08:39:29.977
> 
> 标签：ruby

是否有某种方法可以从 Ruby 显示运行（shell）命令，但也可以捕获输出？也许在一些宝石的帮助下？

我所说的显示不是在最后打印它，而是当它出现时，用户会在运行慢命令时获得正在发生的事情的反馈。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-19T08:49:21.697

您可以像这样运行系统调用：

```
`sleep --help` 
```

或者像这样

```
system "sleep --help" 
```

或者

```
%x{ sleep --help } 
```

如果`system`它会打印输出并返回`true`or `nil`，其他两种方法将返回输出

**PS**哦。它是关于实时显示的。

所以。你可以使用这样的东西：

```
system("ruby", "-e 100.times{|i| p i; sleep 1}", out: $stdout, err: :out) 
```

要实时打印数据并将其存储在变量中：

```
output = []
r, io = IO.pipe
fork do
  system("ruby", "-e 3.times{|i| p i; sleep 1}", out: io, err: :out)
end
io.close
r.each_line{|l| puts l; output << l.chomp}
#=> 0
#=> 1
#=> 2
p output
#=> ['0', '1', '2'] 
```

或使用`popen`

```
output = []
IO.popen("ruby -e '3.times{|i| p i; sleep 1}'").each do |line|
  p line.chomp
  output << line.chomp
end
#=> '0'
#=> '1'
#=> '2'
p output
#=> ['0', '1', '2'] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-19T08:51:59.013

您可以重定向输出

```
system 'uptime > results.log' 
```

或保存结果。

```
result = `uptime`
result = %x[uptime] 
```

看[这里](http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html)。[实时](https://stackoverflow.com/questions/1973771/how-do-i-print-output-of-exec-in-realtime)获取进度信息或输出比较复杂，我怀疑是否有简单的解决方案。也许可以使用诸如[Open3.popen3 之类的高级](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html)[进程管理功能](http://whynotwiki.com/Ruby_/_Process_management)。您还可以尝试使用[带有 pty 的伪终端](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pty/rdoc/index.html)并[在那里获取输出](https://stackoverflow.com/questions/1154846/continuously-read-from-stdout-of-external-process-in-ruby)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-03-22T09:08:02.577

我曾经`open3`从 ruby​​ 代码中捕获执行的 shell 命令的输出。

```
require 'open3'

stdout, stdeerr, status = Open3.capture3("ls")

puts stdout 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-10T18:12:22.163

如果您愿意探索标准库之外的解决方案，您也可以使用[`Mixlib::ShellOut`](https://github.com/chef/mixlib-shellout)流输出和捕获它：

```
require 'mixlib/shellout'
cmd = 'while true; do date; sleep 2; done'
so = Mixlib::ShellOut.new(cmd)
so.live_stream = $stdout
so.run_command
out = so.stdout 
```

# windows - 从二进制文件中剥离符号（Windows）

> ID：10224482
> 
> 赞同：1
> 
> 时间：2012-04-19T08:39:30.030
> 
> 标签：windows, security, binaryfiles, strip

我们公司创建了一个可在 Mac 和 Windows 上运行的应用程序。在 Mac 中，出于安全原因以及减轻文件大小，我们使用“strip”命令从二进制文件中删除符号。

我们可以在 Windows/MSVC 中使用并行命令吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:23:50.583

在发布模式下编译并且不分发符号 (pdb) 文件

# java - 如何从字符串数组列表中获取公共元素

> ID：10224483
> 
> 赞同：0
> 
> 时间：2012-04-19T08:39:31.817
> 
> 标签：java

我有 3 个名为 Cname、cnamedb、Pname 的字符串列表。这3个列表有一个通过查询SQL database.cname 和Pname 结果是从查询excel 数据库得到的结果。cnamedb 结果来自查询 SQL 数据库。

我像这样声明并存储到数组中。

```
 List Cname = new  ArrayList();
 List Pname =new ArrayList();
 List cnamedb=new  ArrayList();

  Cname.add(rs.getString("Cname"));
  Pname.add(rs.getString("Pname"));
  cnamedb.add(res.getString("Cname")); 
```

我试过这样

```
 boolean hasCommonName = Cname.retainAll(Cnamedb);
         if(hasCommonName){
          out.println(Cname+"<br>");
         out.println(hasCommonName);
      }
       boolean haspname=Pname.retainAll(Cnamedb);
      if(haspname){
     out.println(haspname);
     } 
```

这只是给了我第一个 if 语句的答案，但不打印列表元素。对于第二个 if 语句没有结果。

我需要找出数据库和 excel 中存在的公共元素，首先我需要从 Cname 和 Cnamedb 中获取公共元素，然后从 Pname 和 Cnamedb 中获取。我如何获得通用元素。请提供代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:26:52.450

下面给出的片段对我有用。

```
 List<String> commonToCnameAndCnamedb = new ArrayList<String>(Cname);

    List<String> commonToPnameAndCnamedb = new ArrayList<String>(Pname);

    boolean hasCommonName = commonToCnameAndCnamedb.retainAll(cnamedb);
    if (hasCommonName) {
        System.out.println(commonToCnameAndCnamedb + "<br>");
        System.out.println(hasCommonName);
    }
    boolean haspname = commonToPnameAndCnamedb.retainAll(cnamedb);
    if (haspname) {
        System.out.println(commonToPnameAndCnamedb + "<br>");
        System.out.println(haspname);
    } 
```

# python - 用于录制在线直播视频的python脚本

> ID：10224488
> 
> 赞同：8
> 
> 时间：2012-04-19T08:39:45.787
> 
> 标签：python, video, stream, video-streaming

我正在开发一个脚本来下载在线直播视频。

## 我的脚本：

```
print "Recording video..."
response = urllib2.urlopen("streaming online video url")
filename = time.strftime("%Y%m%d%H%M%S",time.localtime())+".avi"
f = open(filename, 'wb')

video_file_size_start = 0  
video_file_size_end = 1048576 * 7  # end in 7 mb 
block_size = 1024

while True:
    try:
        buffer = response.read(block_size)
        if not buffer:
            break
        video_file_size_start += len(buffer)
        if video_file_size_start > video_file_size_end:
            break
        f.write(buffer)

    except Exception, e:
        logger.exception(e)
f.close() 
```

上面的脚本可以很好地从实时流媒体内容中下载 7Mb 的视频并将其存储到 *.avi 文件中。

但是，无论文件大小如何，我都想只下载 10 秒的视频并将其存储在 avi 文件中。

我尝试了不同的可能性，但没有成功。

任何人都可以在这里分享您的知识来解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:16:47.123

如果不不断分析视频，我认为没有任何方法可以做到这一点，这将是一种代价高昂的方式。所以你可以猜测你需要多少MB，一旦完成检查它是否足够长。如果它太长，只需剪掉它。除了猜测之外，您还可以建立一些关于您需要检索多少的统计数据。您还可以将 while True 替换为：

```
start_time_in_seconds = time.time()
time_limit = 10
while time.time() - start_time_in_seconds < time_limit:
    ... 
```

这应该为您提供至少 10 秒的视频，除非连接需要太多时间（然后少于 10 秒）或服务器发送更多用于缓冲（但这不太可能用于实时流）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T04:08:23.033

您可以使用“Content-Length”标头来检索视频文件大小（如果存在）。

```
video_file_size_end = response.info().getheader('Content-Length') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T05:22:27.573

*response.read()*不起作用。*response.iter_content()*似乎可以解决问题。

```
import time
import requests

print("Recording video...")
filename = time.strftime("/tmp/" + "%Y%m%d%H%M%S",time.localtime())+".avi"
file_handle = open(filename, 'wb')
chunk_size = 1024

start_time_in_seconds = time.time()

time_limit = 10 # time in seconds, for recording
time_elapsed = 0
url = "http://demo.codesamplez.com/html5/video/sample"
with requests.Session() as session:
    response = session.get(url, stream=True)
    for chunk in response.iter_content(chunk_size=chunk_size):
        if time_elapsed > time_limit:
            break
        # to print time elapsed   
        if int(time.time() - start_time_in_seconds)- time_elapsed > 0 :
            time_elapsed = int(time.time() - start_time_in_seconds)
            print(time_elapsed, end='\r', flush=True)
        if chunk:
            file_handle.write(chunk)

    file_handle.close() 
```

# android - 安卓图像处理

> ID：10224492
> 
> 赞同：1
> 
> 时间：2012-04-19T08:39:59.663
> 
> 标签：android, image-processing

在我的应用程序中，我想捕获图像并将其与存储的图像进行比较，以了解它们是否相似。我可以使用哪些 API/技术/第三方应用程序来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:05:18.383

您可以使用 OpenCV 库：http: [//sourceforge.net/projects/opencvlibrary/](http://sourceforge.net/projects/opencvlibrary/)

看看这个答案，了解如何解决您的问题： [Simple and fast method to compare images forsimilarity](https://stackoverflow.com/questions/4196453/simple-and-fast-method-to-compare-images-for-similarity)

# java - 如果我在同一个项目中有 JPA 和 CMP，会发生什么？

> ID：10224497
> 
> 赞同：0
> 
> 时间：2012-04-19T08:40:10.117
> 
> 标签：java, jakarta-ee, jpa, ejb, cmp

可以在同一个项目中拥有`EJB 2.X`和类。`EJB 3.X`它们不应该在同一个 EJB-jar 中。这意味着我可以同时拥有 ContainerMansgedPersistency(EJB2.x) 和 JPA。

这是个问题吗？如果我在同一个事务中同时使用它们会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:35:04.000

应该没问题，两者之间几乎没有共同点，所以它们不应该冲突。

# c# - NUnit 向测试添加信息

> ID：10224504
> 
> 赞同：0
> 
> 时间：2012-04-19T08:40:37.613
> 
> 标签：c#, .net, nunit

如果我想在测试期间显示一些附加信息，我应该怎么做？

假设我测试了一个算法，该算法试图在给定的间隔上找到函数的根，并且我希望测试也显示它所做的迭代次数。

我可以添加`Assert.Inconclusive(_iterations.ToString())`到每个测试的末尾，但这看起来不太好/绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:50:51.210

使用`Trace.WriteLine()`. 这会显示在您的构建日志中。

但是，您说“假设**我测试**了一个算法，该算法试图在给定的间隔上找到函数的根，**并且我希望测试**也显示它所做的迭代次数。”

这意味着您正在测试两件事。无论您是否希望在一两个测试中使用这两个断言，如果这是您的目标，您仍然应该 -test- 它们，而不是使用`Trace.WriteLine()`. （你在暗中测试！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:46:18.350

根据您的测试运行程序，您可以使用`Console.WriteLine()`. 如果您从命令行 (nunit-console) 运行测试，这将使它在使用 ReSharper 时看起来很混乱。

# java - 如何检测用户是使用 ipad 还是机器访问网站？

> ID：10224505
> 
> 赞同：0
> 
> 时间：2012-04-19T08:40:40.880
> 
> 标签：java, ipad, struts2, detection

我需要为用户编写两个单独的视图部分；一种适用于使用 iPad 访问网站的用户和其他访问网站的用户。

我知道这在 JavaScript 中是可能的，但我需要使用 Java 识别设备。

我在我的项目中使用 struts2 和 hibernate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:42:30.660

您可以阅读客户端发送的“User-Agent”标头。

# c# - Microsoft Speech API (SAPI) SpVoice 一种停止功能的方法

> ID：10224506
> 
> 赞同：7
> 
> 时间：2012-04-19T08:40:46.947
> 
> 标签：c#, com, text-to-speech

我正在使用 Microsoft 的 Speech Platform Run time，我正在使用`SpVoice`界面让运行时说出我想要的句子。

为了停止演讲中的句子，我创建了这样的函数

```
public void StopSpeak()
{
    try
    {
      Speaker.Speak("", SpeechVoiceSpeakFlags.SVSFPurgeBeforeSpeak);
    }
    catch (COMException ex)
    {

    }
} 
```

但是当我在语音平台说话时运行它时，我得到了这个 com 错误：

```
Exception from HRESULT: 0x80045006 
```

我通过微软查了一下，这意味着 wave 设备很忙，我现在意识到每次语音平台忙于说一个句子时我都会收到这个错误。

是否有其他方法可以使用 SpVoice 或 Speech Platform Runtime 附带的任何其他接口或类来停止语音中间句子？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T19:17:35.620

要停止 Speech 而不必处理异常，请使用`Skip`on 方法`SpVoice`。文档[在这里](http://msdn.microsoft.com/en-us/library/ms723608%28v=vs.85%29.aspx)。

这应该有效，因为它会跳过`int.MaxValue`句子：

```
public void StopSpeak()
{
    Speaker.Skip("Sentence", int.MaxValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T07:46:13.263

首先，您必须将 SpeechVoiceSpeakFlags 设置为 Asyncronous。这样你就可以减少句号或标点符号的发言。通过暂停方法。

Speaker.Speak("这里有长文本", SpeechLib.SpeechVoiceSpeakFlags.SVSFlagsAsync);

扬声器.Pause();

但它会再次完成它开始阅读的句子，然后如果有标点符号，它将停止。所以没有切割序列。

一种苛刻的方法是将其设置为 null ；扬声器=空；恢复后，您必须再次设置它，它停止的位置和继续的位置。

# jquery - 有一个 ORDERBY 链接以使用数据库中的 AJAX jQuery 对结果进行排序

> ID：10224507
> 
> 赞同：0
> 
> 时间：2012-04-19T08:40:49.680
> 
> 标签：jquery, ajax, pagination

我有一个分页系统来处理大量的数据库查询结果。这使用 jQuery AJAX 与页面通信，该页面通过查询等加载所有数据。然后将结果返回到页面。

```
if($pageType == 'prizeHome'){

        $my_query = new WP_Query('post_type=prizes&showposts='.$per_page.'&meta_key=pointsvalue&orderby=meta_value_num&order=asc&paged='.$page);
        while ($my_query->have_posts()) : $my_query->the_post(); $do_not_duplicate = $post->ID; $my_meta = get_post_meta($post->ID,'_my_meta',TRUE); 
```

这是我的代码片段。它使用 wordpress 查询来提取数据并按元值排序。我的问题是，如果用户选择了另一个参数说“按点或按字母顺序对结果进行排序”，那么当用户单击以转到下一页时，这如何保持真实？

我可能对如何去做这件事有点困惑，也许我需要使用某种 jQuery cookie 以便网站记住用户选择的顺序？

我会很感激任何意见，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:47:44.013

我建议您使用查询参数来保存所选的排序字段（以允许书签、后退/前进等）。例如`www.site.com/page?sortBy=name`

要记住设置，下一页的链接也应该包含查询参数。

# vba - 将代码分配给动态创建的按钮

> ID：10224511
> 
> 赞同：21
> 
> 时间：2012-04-19T08:41:11.590
> 
> 标签：vba, excel

我正在尝试获取我在 excel 用户窗体表单上动态创建的按钮，以运行`transfer`我在`Module 1`项目的“模块”部分中编写的宏。

下面我粘贴了到目前为止我在用户窗体中编写的代码，它实际上设法`Transfer to Sheet`在框架中创建按钮（*我也动态创建了*）但是由于某种原因，当我运行 VBA 时，我收到一条`438 error`消息说`Object doesn't support this property or method`.

谁能告诉我如何解决这个问题？

这是代码：

```
Dim framecontrol1 As Control

Set workitemframe = Controls.Add("Forms.Frame.1")
With workitemframe
    .Width = 400
    .Height = 400
    .Top = 160
    .Left = 2
    .ZOrder (1)
    .Visible = True
End With

workitemframe.Caption = "Test"
Set framecontrol1 = workitemframe.Controls.Add("Forms.commandbutton.1")

With framecontrol1
    .Width = 100
    .Top = 70
    .Left = 10
    .ZOrder (1)
    .Visible = True
    .Caption = "Transfer to Sheet"
End With
framecontrol1.OnAction = "transfer" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T09:13:25.293

这是一个例子。请修改它以满足您的需要:)

此示例将创建一个命令按钮并为其分配代码，以便在按下它时显示“Hello World”。

将此代码粘贴到命令按钮的单击事件中，这将动态创建一个新的命令按钮并为其分配代码。

```
Option Explicit

Dim cmdArray() As New Class1

Private Sub CommandButton1_Click()
    Dim ctl_Command As Control
    Dim i As Long

    i = 1

    Set ctl_Command = Me.Controls.Add("Forms.CommandButton.1", "CmdXYZ" & i, False)

    With ctl_Command
        .Left = 100
        .Top = 100
        .Width = 255
        .Caption = "Click Me " & CStr(i)
        .Visible = True
    End With

    ReDim Preserve cmdArray(1 To i)
    Set cmdArray(i).CmdEvents = ctl_Command

    Set ctl_Command = Nothing

End Sub 
```

并将此代码粘贴到类模块中

```
Option Explicit

Public WithEvents CmdEvents As MSForms.CommandButton

Private Sub CmdEvents_Click()

    MsgBox "Hello Word"

End Sub 
```

**快照**

![在此处输入图像描述](../Images/2560fa31296ad59cf4781974e11312ba.png) ![在此处输入图像描述](../Images/1488b2e71fc403f3d54e439022318556.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T11:14:34.553

您需要以编程方式将代码添加到用户窗体。我使用这篇[vbax 文章](http://www.vbaexpress.com/kb/getarticle.php?kb_id=224)中的代码作为参考

下面的代码：

1.  从普通模块运行
2.  将按钮添加到名为*UserForm1的用户窗体*
3.  将此代码添加到单击事件的用户窗体中

    ```
    Private Sub CommandButton1_Click()
    Call Transfer
    End Sub 
    ```

**来自普通模块的 VBA**

```
 Sub AddToForm()
    Dim UF As Object
    Dim frameCOntrol1 As Object
    Set UF = ActiveWorkbook.VBProject.VBComponents("UserForm1")
    Set frameCOntrol1 = UF.designer.Controls.Add("Forms.CommandButton.1")
    With frameCOntrol1
        .Width = 100
        .Top = 70
        .Left = 10
        .ZOrder (1)
        .Visible = True
        .Caption = "Transfer to Sheet"
    End With

    With UF.CodeModule
        .InsertLines 2, _
                     "Private Sub " & frameCOntrol1.Name & "_Click()" & Chr(13) & _
                     "Call Transfer" & Chr(13) & _
                     "End Sub"
    End With

End Sub 
```

# ruby-on-rails - tinymce-rails 设置 content_css

> ID：10224515
> 
> 赞同：2
> 
> 时间：2012-04-19T08:41:26.497
> 
> 标签：ruby-on-rails, css, ruby, tinymce

我正在开发一个 Rails 应用程序并使用 tinymce-rails gem。在 TinyMce 配置中，我通常可以设置`content.css`编辑器使用的主文件，因此它看起来像编辑时的结果。

对于我的生产环境，我可以将`content_css`参数设置为，`application.css`因为这是之后唯一的 css 文件`asset:precompile`，是否有任何技巧可以在我的开发环境中获得相同的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:00:47.133

这对你有用吗？`content_css: '<%= asset_path 'application.css' %>'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-17T08:17:24.890

这对我有用...

在我的视图中实例化 TinyMCE 时，我将`content_css`作为选项传入该`tinymce`方法：

```
<%= tinymce content_css: asset_path('application.css') %> 
```

# javascript - 允许在没有 {{#open_tag}} 和 {{#close_tag}} 的情况下包装内容的客户端/服务器模板系统？

> ID：10224518
> 
> 赞同：2
> 
> 时间：2012-04-19T08:41:45.427
> 
> 标签：javascript, templates, mustache, handlebars.js

我的 Web 应用程序当前使用 Tapestry 5.2.6。我想编写一个具有以下要求的新功能：

*   用户可以单击图库中的项目以查看显示详细视图的灯箱，包括描述、评论、卖家控制（如果他们拥有正确的凭据）以及无需离开页面即可购买的能力。
*   应该更新 url 以反映它们是在画廊视图还是在详细信息视图中。
*   在支持 HTML5 pushState 的浏览器中，URL 更改应该是动态的。在旧版浏览器中可以接受整页刷新。
*   图库页面和详细信息页面都必须是可抓取的 - 没有 Javascript 的用户应该看到一个完全标记的页面。
*   速度 - 需要比我对 Tapestry 的预期要快得多。

我的计划是选择并实现一种模板语言，它可以在服务器或客户端上进行同样的评估。对于初始页面加载，我可以在服务器上呈现模板。对于后续更新，我可以将项目的 viewmodel 对象作为 JSON 传递给客户端并在那里评估模板。

到现在为止还挺好。问题是我看过的所有模板语言都没有强大到足以让我对未来的发展感到满意。作为案例研究，请从以下方面考虑：

*   胡子
*   灰尘
*   霍根
*   车把

似乎没有人有能力进行这样的“包装”转换：

```
# base template
{>widget}
    <span class="content">Hello world</span>
{/widget}

# widget template
<div class="widget">
    {>widget_body/}
</div>

# rendered output
<div class="widget">
    <span class="content">Hello world</span>
</div> 
```

请注意，包装的内容取自基本模板，小部件模板的输出在两侧围绕它。我知道在上述语言中实现这一点的唯一方法是一个类似的模板：

```
{>open_widget/}
    {>widget_body/}
{>close_widget/} 
```

这意味着每个组件都有两个模板，一个开启者和一个关闭者，都包含未封闭的标签。（公平地说，dust 可以使用块和内联部分优雅地做到这一点，但因为内联部分对模板是全局的，所以每个模板只能使用一次小部件。）

我对模板的问题是：

*   我知道像 LinkedIn 和 Twitter 这样的行业领导者正在使用这些技术并且做得很好。我要求太多了吗？如果您使用过其中一种，您是如何处理“包装问题”的？
*   我研究过的一些解决方案似乎支持它：jquery-tmpl，它不再被官方维护；underscore 和 ejs，作为嵌入式代码的长期解决方案让我感到紧张；和闭包模板。目前 Closure 在我看来是最好的，令我惊讶的是！如果您使用过其中任何一种，您的发现是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:50:26.470

我不确定外面的东西是否符合你所说的。我需要类似的东西，并认为编写一个简单的文本替换脚本会比比较现有解决方案和学习使用一个更快。

该脚本尚未准备好生产（应该进行更多测试，并且 API 很奇怪），但它应该让您了解一种可以完成的方法。

这是它的设置方式：

* * *

**在文档中存储模板**

模板文本存储在具有`type`“text/javascript”以外的属性的脚本标记中。每个模板都有一个唯一的 id 属性。

```
<script id="some_template" type="text/plain">

    a valid template

</script> 
```

浏览器不应该呈现这些。允许使用任何字符（除了`</script>`），无需转义。

* * *

**占位符**

占位符如下所示：`{@some_identifier}`.

```
<script id="image_template" type="text/plain">

    <a href="{@img_url}"><img src="{@img_url}"></a>

</script> 
```

每个占位符将替换为：

*   从另一个模板传入的值，
*   获取模板副本时传递给 JavaScript 函数的参数，或
*   如果没有找到替换值，则为空字符串。

* * *

**在另一个模板中包含一个模板**

“`@@`伪标签”包括当前模板中另一个模板的内容。

```
<script id="photo_template" type="text/plain">

    <@@ image_template></@@>

    <div class="photo-caption">{@caption}</div>

</script> 
```

`photo_template`包括 `image_template`. 所有包含替换发生在任何占位符替换之前，`photo_template`和`{@img_url}`占位符也是如此`{@caption}`。

* * *

**包含占位符替换**

这就是“包装”的来源。理想情况下，占位符几乎总是被其他模板中的内容替换，而不是在获取模板副本时传入的值。

```
<script id="missing_photo_template" type="text/plain">

    <@@ photo_template>
        <@ img_url>notfound.png</@>
    </@@>

</script> 
```

`missing_photo_template`包括`photo_template`，为它提供一个替代品`{@img_url}`，所以`missing_photo_template`只有`{@caption}`占位符。

* * *

**JavaScript**

API 现在很烂，但基本上主命名空间`at`有两个函数，`txt`和`node`. 第一个获取模板副本作为文本，第二个获取副本作为元素（这意味着它应该有一个根节点，与我上面的一些示例不同）。

这里是：

```
/**

    Atrocious Templates

*/
var at = (function(){

  var rTemplate = /<@@\s*(.*?)>((?:[\w\W](?!<@@))*?)<\/@@>/gm,
      rOption = /<@\s*(.*?)>([\w\W]*?)<\/@>/gm,
      rValue = /\{@(.*?)\}/g,
      rTag = /<(\w+)/i,
      rSpace = /\s+/,
      templates = {},
      doc = document.implementation.createHTMLDocument('');

  /** 

      Inlcude inner templates.

      @private

      @param {string} m0
          The full inclusion text.

      @param {string} m1
          The ID of the included template.

      @param {string} m2
          Values passed to included template.

      @return {string} 

  */
  function includeTemplates(m0, m1, m2) {
    var opts = {};
    m2.replace(rOption, function(m0, m1, m2) { opts[m1] = m2; });
    return txt(m1, opts, true);
  }

  /** 

      Get text contents of a template.

      @private

      @param {string} id
          The ID of the template.

      @return {string} 

  */
  function get(id) {
    if (templates[id]) return templates[id];
    var last, t = document.getElementById(id).innerHTML;
    while (last != t && (last = t)) t = t.replace(rTemplate, includeTemplates);
    return (templates[id] = t);
  }

  /** 

      Get a text copy of a template.

      @param {string} id
          The ID of the template.

      @param {Object.<string|function ():string>} options
          Properties of this object will replace placeholder tokens.
          Each property can be either a string, or a function which 
          returns a string.

      @param {boolean=} noStrip
          By default, placeholders for which no replacement text is 
          found are removed. Setting this to `true` overrides that
          behavior, leaving non-replaced placeholders intact. 

      @return {string} 

  */
  function txt(id, options, noStrip) {
    if (!options) options = {};
    return get(id).replace(rValue, function(m0, m1) {
      var v = options[m1];
      return noStrip && !v && m0 || v && (v.call ? v() : v) || '';
    });
  }

  /** 

      Get a node copy of a template.

      @param {string} id
          The ID of the template.

      @param {Object.<string|function ():string>} options
          Properties of this object will replace placeholder tokens.

      @return {string} 

  */
  function node(id, options) {
    var text = txt(id, options),
        root = text.match(rTag)[1];
    doc.open; doc.write(text); doc.close();
    return doc.getElementsByTagName(root)[0];
  }

  // exports

  return { txt: txt, node: node };

}()); 
```

同样，我不建议您在生产中使用它，因为它没有经过太多测试（尽管它似乎工作正常），但希望这会给您一些关于如何实现您想要的想法的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:51:51.617

尝试查看 handlebarjs.com - 我在服务器和客户端上都使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-18T20:15:27.880

也许这个问题很老了，但是 Mustache 不支持*partials*吗？

[http://mustache.github.io/mustache.5.html](http://mustache.github.io/mustache.5.html)

> ...通过这种方式，您可能希望将部分视为包含或模板扩展，即使它不是字面上正确的。
> 
> 例如，这个模板和部分：
> 
> **base.mustache**：
> 
> ```
> <h2>Names</h2> {{#names}}   {{> user}} {{/names}} 
> ```
> 
> **user.mustache**：
> 
> ```
> <strong>{{name}}</strong> 
> ```
> 
> 可以被认为是一个单一的、扩展的模板：
> 
> ```
> <h2>Names</h2> {{#names}}   <strong>{{name}}</strong> {{/names}} 
> ```

# java - 加载文件后如何刷新 ChartPanel 类中的图表？

> ID：10224524
> 
> 赞同：0
> 
> 时间：2012-04-19T08:42:08.150
> 
> 标签：java, swing, jfreechart, jfilechooser

我有四个类： - ChartService - CSVReader - FileChooser - ChartPanel

我的问题是，在 FileChooser 类中加载文件后，我不知道如何刷新 ChartPanel 类中的图表。我尝试了不同的方式，但图表没有出现。

请帮忙 ！！！

图表服务类：

```
 public void initializeChart() {
        final CombinedDomainXYPlot plot = new CombinedDomainXYPlot(new DateAxis("Time"));
        this.datasets = new TimeSeriesCollection[SUBPLOT_COUNT];

        for (int i = 0; i < SUBPLOT_COUNT; i++) {
            final TimeSeries series = sensorXseries;

            this.datasets[i] = new TimeSeriesCollection(series);
            final NumberAxis rangeAxis = new NumberAxis(Y_AXIS_TITLES[i]);
            rangeAxis.setAutoRangeIncludesZero(false);
            final XYPlot subplot = new XYPlot(
                    this.datasets[i], null, rangeAxis, new StandardXYItemRenderer()
            );

            subplot.setBackgroundPaint(Color.lightGray);
            subplot.setDomainGridlinePaint(Color.white);
            subplot.setRangeGridlinePaint(Color.white);
            plot.add(subplot);
        }

        final JFreeChart chart = new JFreeChart("Charts", plot);

        chart.setBorderPaint(Color.black);
        chart.setBorderVisible(true);
        chart.setBackgroundPaint(Color.white);

        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);

        final ValueAxis axis =  plot.getDomainAxis();
        axis.setAutoRange(false);

        chartPanel = new ChartPanel(chart);

        chartPanel.setPreferredSize(new java.awt.Dimension(790, 620));
        chartPanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        this.add(chartPanel);
    }
    public TimeSeries createFirstDataSet(ArrayList<DataObject> data) {
        sensorXseries = new TimeSeries("Acceleration X");
        for(int i=0; i < data.size(); i++) {
            sensorXseries.add(new Millisecond(convertToTimestamp(data.get(i).getStoper())), data.get(i).getAccelerationX());
        }
        return sensorXseries;
    }

    public TimeSeries createSecondDataSet(ArrayList<DataObject> data) {
        TimeSeries sensorYseries = new TimeSeries("Acceleration Y");
        for(int i=0; i < data.size(); i++) {
            sensorYseries.add(new Millisecond(convertToTimestamp(data.get(i).getStoper())), data.get(i).getAccelerationY());
        }
        return sensorYseries;
    }

    public TimeSeries createThirdDataSet(ArrayList<DataObject> data) {
        TimeSeries sensorZseries = new TimeSeries("Acceleration Z");
        for(int i=0; i < data.size(); i++) {
            sensorZseries.add(new Millisecond(convertToTimestamp(data.get(i).getStoper())), data.get(i).getAccelerationZ());
        }
        return sensorZseries;
    }

    public void refreshChartPanel() {
        chartPanel.repaint();
    } 
```

FileChooser 类：

```
public void loadFile() throws Exception {
    fileChooser = new JFileChooser();
    fileChooser.addChoosableFileFilter(new FileNameExtensionFilter("CSV Files", "csv"));

    int returnVal = fileChooser.showOpenDialog(this);

    if (returnVal == JFileChooser.APPROVE_OPTION) {
        File file = fileChooser.getSelectedFile();
        fileName= file.getAbsolutePath();
        CSVReader csvReader = new CSVReader(fileName);
        chartService = new ChartService();
        chartService.createFirstDataSet(csvReader.getLinesFromFile());
    }

} 
```

CSVReader 类：

```
public CSVReader(String fileName) {
        this.fileName = fileName;
    }

    public ArrayList getLinesFromFile() throws Exception {
        inFile = new CsvBeanReader(new FileReader(fileName), CsvPreference.EXCEL_PREFERENCE);
        final String[] header = inFile.getCSVHeader(true);

        CellProcessor [] processors = {null, new ParseDouble(), new ParseDouble(), new ParseDouble(), new ParseInt(), new ParseInt()};

        dataObjectArray = new ArrayList<DataObject>();
        while((dataObject = inFile.read(DataObject.class, header, processors)) != null) {
            dataObjectArray.add(dataObject);
        }
        return dataObjectArray;
    } 
```

图表面板类：

```
public ChartPanel() {
         initializeChartPanel();
    }

    private void initializeChartPanel() {

        setBorder(BorderFactory.createTitledBorder("Chart:"));
        setPreferredSize(new Dimension(824, 0));
        ChartService chartService = new ChartService();
        chartService.initializeChart();

        this.add(chartService);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:36:44.973

将您的图表添加到[`org.jfree.chart.ChartPanel`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html)，它扩展`JPanel`并“注册到图表以接收图表任何组件更改的通知”。如本[例所示](https://stackoverflow.com/a/5048863/230513)，数据集通常在更新时默认提供此通知。您`ChartPanel`似乎根本没有注册任何听众。

# regex - 需要正则表达式 (q1 - q170)

> ID：10224526
> 
> 赞同：1
> 
> 时间：2012-04-19T08:42:13.203
> 
> 标签：regex

我需要一个正则表达式来匹配 q1 到 q170（例如 q1、q2、q3...q170）而不是 q0 或 q180 等等。请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:50:30.260

```
^q([1-9]|[1-9][0-9]|1[0-6][0-9]|170)$ 
```

这也将排除 q0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:44:39.390

你可以试试：

```
^q(?:[1-9][0-9]?|1[0-6][0-9]|170)$ 
```

[看见](http://www.rubular.com/r/rghgL9gbs5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:48:04.347

**试试这个 ：**

```
q(170|[0-1][0-6]\d|\d{2}|[1-9])(?!\d) 
```

**演示：**

[http://regexr.com?30mp9](http://regexr.com?30mp9)

# android - 是否可以将一些数据写入 Android 2.2 平板设备的内部存储器？

> ID：10224537
> 
> 赞同：0
> 
> 时间：2012-04-19T08:42:42.783
> 
> 标签：android

在我的项目中，我试图在内存中保存许多文件，例如图像、视频和音频。我用过`Environment.getExternalStorageDirectory()`。对于手机，它在 SD 卡支持下运行良好。但是对于像android 2.2 版本的平板电脑这样具有更高内存的设备，我们实际上可以避免使用SD 卡。但我无法将数据写入内部存储器。我在没有 SD 卡的三星 P6200 Galaxy Tab 7.0 Plus 中检查过它。它保存在里面`/mnt/sdcard/Android/data/navya.android.sample/files/myDir/sampleVideo.mp3`

是否可以将一些数据写入 Android 2.2 平板设备的内部存储器？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:12:25.370

> 是否可以将一些数据写入 Android 2.2 平板设备的内部存储器？

它应该是。该设备可能存在一些严重的兼容性缺陷。

> 有什么建议么？

阅读：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# java - 如何从 JAVA 中的日期时间格式获取星期几？

> ID：10224538
> 
> 赞同：1
> 
> 时间：2012-04-19T08:42:43.280
> 
> 标签：java, dayofweek

我有这种格式的日期时间信息：

```
String reportDate="2012-04-19 12:32:24"; 
```

我想作为一周中的输出日（星期四或 4 反正结果是好的）。如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:47:12.770

`Calendar`解析字符串后使用：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:SS");
Date d = sdf.parse(reportDate);
Calendar cal = Calendar.getInstance();
cal.setTime(d);
return cal.get(Calendar.DAY_OF_WEEK); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:46:20.767

使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)解析`String`然后你有一个`Date`对象可以得到星期几。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:45:57.833

将您的日期解析为实际`Date`对象，然后将其传递给[日历](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)实例（通过[setTime(Date date)](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#setTime%28java.util.Date%29)）。然后，您可以使用[DAY_OF_WEEK](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_WEEK)获取表示一周中的天数的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:02:20.127

尝试，

```
System.out.println(new SimpleDateFormat("E").format(new SimpleDateFormat("yyyy-MM-dd").parse(reportDate)));
System.out.println(new SimpleDateFormat("F").format(new SimpleDateFormat("yyyy-MM-dd").parse(reportDate))); 
```

# transactions - 更正 JMS ConnectionFactory 以用于事务性读取

> ID：10224543
> 
> 赞同：0
> 
> 时间：2012-04-19T08:42:58.283
> 
> 标签：transactions, jboss, jms

如果想要进行事务性读取，正确的 JMS connectionFactory 是什么？

我希望在成功的事务中，将从消息队列中读取 JMS 消息，并且在失败的情况下（异常），消息将在队列中可用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:40:22.133

我假设您提到的失败场景是关于您的应用程序而不是消息传递提供程序。如果您的应用程序中有一些异常，那么您希望消息不要从队列中删除，并且稍后可以接收相同的消息。

如果是这种情况，请使用队列连接工厂，然后创建事务处理会话。如果您的应用程序成功处理了消息，则发出 session.commit() 否则执行 session.rollback()。

# css - @font-face 和汉字……怎么做？

> ID：10224544
> 
> 赞同：1
> 
> 时间：2012-04-19T08:42:59.023
> 
> 标签：css, font-face

在[http://goo.gl/NNMZp](http://goo.gl/NNMZp)我发现了一个带有中文字符的@font-face 工具包......所有需要的文件和 css 代码都在服务器上。但我仍然得到拉丁字符......'DHG'> [http://www.centrumvoorchinesegeneeswijzen.nl/txp/](http://www.centrumvoorchinesegeneeswijzen.nl/txp/)

我该怎么做才能让它工作？

```
<h1><span>DGH</span><txp:site_name /></h1>

h1 span {
    font: 1em/100% DFXingShuMedium1B;
    padding-right: 40px;
}

@font-face {
    font-family:'DFXingShuMedium1B';
    src:url('DFXSM1B.eot?') format('eot'),
        url('DFXSM1B.woff') format('woff'),
        url('DFXSM1B.ttf') format('truetype'),
        url('DFXSM1B.svg#DFXingShuMedium1B') format('svg');
    font-weight:normal;
    font-style:normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:52:31.987

据我所知，现在在（该）服务器上使用中文字体会带来很多麻烦。它们中的大多数都很重（超过 3 MB）并且不可能找到一个生成器（Font Squirrel 只允许上传 2 MB）来生成所有必要的文件（.ttf、eot、woff、...）

所以我必须做一个图像......

# powershell - Powershell：'完全限定的文件名必须少于 260 个字符'

> ID：10224545
> 
> 赞同：4
> 
> 时间：2012-04-19T08:42:59.867
> 
> 标签：powershell, xcopy, file-copying, copy-item, max-path

我尝试使用 powershell 命令将一个磁盘`copy-item`的`xcopy`内容复制到另一个磁盘。

```
copy-item -Path h:\* -Destination g:\ -Recurse -Force 
```

但是，我遇到了以下错误：

> Copy-Item ：指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。

这些错误足以阻止手动搜索和复制具有长路径的文件或文件夹。避免此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:02:40.463

据我所知`robocopy`，它会自动处理（至少您必须明确禁用对长路径的支持）。所以你可以使用

```
robocopy h:\ g:\ /E 
```

如果您不太反对原生命令而不是纯 PowerShell 解决方案。

通常，您可以`\\?\`在路径前添加允许处理最多 32k 个字符的路径，但这很可能对 .NET 没有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T11:36:12.607

在 Codeplex 上，Microsoft 托管了一个[***实验性***的长路径包装器](http://bcl.codeplex.com/wikipage?title=Long%20Path&referringTitle=Home)，它提供的功能可以更轻松地处理超过 System.IO 命名空间当前 259 个字符限制的路径。

如何在 Powershell 中使用此包装器复制文件的示例：

```
[reflection.assembly]::loadfile("C:\Users\stackoverflow\Desktop\Microsoft.Experimental.IO.dll")
[microsoft.experimental.io.longpathfile]::Copy((gi .\myversion.txt).fullname, "C:\users\stackoverflow\desktop\aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",$true) 
```

其他样品可以在[这里](http://bcl.codeplex.com/wikipage?title=Long%20Path%20Samples&referringTitle=Long%20Path)找到。

# android - android - 在两个不同应用程序中的两个不同服务之间发送意图

> ID：10224548
> 
> 赞同：0
> 
> 时间：2012-04-19T08:43:10.607
> 
> 标签：android, service, android-intent, broadcastreceiver

我正在尝试在 app1 中的两个不同应用程序服务 A 和 app2 中的服务 B 中的两个服务之间传递数据（字符串 \ int）。说我想从应用程序 1 -> 2 传递，所以我在应用程序 2 的清单中定义了一个自定义接收器，带有一个带有操作字符串的意图过滤器

```
 <receiver android:name=".blaReceiver">
        <intent-filter>
        <action android:name="com.bla.blabla.RANDOM_ACTION" />
        </intent-filter>
    </receiver> 
```

但我如何从应用程序 1 发送意图？没有活动只有服务，我从 app1 想到了 startService，但我无法定义它以将意图发送到 app2

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:26:04.507

使用广播接收器。从应用 A 发送广播 [具有唯一操作名称]，并在应用 B 中注册广播接收器。[广播将在系统范围内发送]。在您的应用 B 中接收广播并通过操作名称进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:21:09.050

您可以使用 sendBroadcast(intent); 在您的服务中。它肯定有效。

# c - 创建没有 malloc 的内存缓冲区

> ID：10224555
> 
> 赞同：2
> 
> 时间：2012-04-19T08:43:41.697
> 
> 标签：c

我正在开发一个嵌入式系统（ARM Cortex M3），我无法访问任何类型的“标准库”。特别是，我无法访问`malloc`.

我有一个函数`void doStuff(uint8_t *buffer)`接受指向 512 位缓冲区的指针。我尝试过执行以下操作：

```
uint8_t buffer[64] = {0};
doStuff((uint8_t *) &buffer)); 
```

但我没有得到预期的结果。难道我做错了什么？有没有替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T09:00:15.897

`doStuff(buffer)`应该没问题，因为`buffer` **已经**是`uint8_t*`.

`&buffer`除此之外，在您的示例之后，您关闭了一个括号太多。

* * *

如果`buffer`是可变大小，你也应该传递大小`doStuff`，如果它是恒定大小，我也会传递大小，以防你有一天改变大小。

话虽这么说，你应该这样做：

```
uint8_t buffer[64] = {0};
int     len        = 64;
doStuff(buffer, len); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:15:49.903

一个 simplemalloc(): 有一个 char mem[MAXMEM]; 和一个结构自由表。然后编写自己的 simplemalloc()，在 freetable 中找到足够大的内存垃圾，并将偏移量返回到 mem。simplefree() 然后会调整 freetable。

伊迪丝：

如果你需要很多 malloc()s，你甚至可以将你的静态内存分成不同的块用于不同的任务（一个块用于正好 100 字节的分配，一个用于你最喜欢的结构的大小，等等）这将加快查找速度免费内存。

如果你缺少内存，你应该在 simplemalloc() 中实现一个 bestmatch()，它的副作用是会减慢执行速度。

如果你有足够的内存，你可以实现一个调试版本，它“分配”更多的内存，并将 XXX 放在 simplemalloc() ed mem 的开始之前和结束之后。在 free() 上，您可以检查此 XXX 是否损坏，因此您知道您有一些缓冲区溢出或下溢，您可以意识到这一点。

# c# - 如何在新表单中编辑数据集？

> ID：10224556
> 
> 赞同：2
> 
> 时间：2012-04-19T08:43:43.403
> 
> 标签：c#, winforms, data-binding

我是 .NET 和 C# 的初学者，所以我遇到了一个可能很容易解决的问题（？）。

我有一个 Xml 文件作为数据源。我设法在 DataGridView 中显示该数据。双击时，我打开一个用作编辑掩码的新表单。但是，当我在编辑表单中点击“确定”按钮时，如何将 DataSet 条目传递给编辑表单并将其同步回底层 DataSource 的 DataGridViews？

这是我到目前为止所拥有的：

主要形式：

```
public partial class Main : Form
{
    private DataSet dataSet;
    private EditForm editForm;

    public Main()
    {
        InitializeComponent();
    }

    private void readXmlFile(object sender, EventArgs e)
    {
        // bind DataGridView to Xml file data
        this.dataSet = new DataSet();
        this.dataSet.ReadXml("data.xml");

        DataTableCollection tables = this.dataSet.Tables;
        DataView view1 = new DataView(tables[0]);

        BindingSource source1 = new BindingSource();
        source1.DataSource = view1;
            source1.Filter = "type = 'editable'";
        gridView.DataSource = source1;
    }

    private void gridView_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        DataGridView grid = (DataGridView)sender;
        DataRow row = ((DataRowView)grid.Rows[e.RowIndex].DataBoundItem).Row;

        this.editForm = new EditForm(row);
        editForm.ShowDialog();
    }
} 
```

这是我的编辑表格：

```
public partial class EditForm : Form
{
    DataRow dataRow;

    public EditForm(DataRow dataRow)
    {
        InitializeComponent();

        this.dataRow = dataRow;
            textBoxHeadline.DataBindings.Add("Text", this.dataRow, "headline");
    }

    private void buttonOk_Click(object sender, EventArgs e)
    {
        // update DataGridView and DataSet?
    }
} 
```

# unit-testing - 调用一些 testAction 会使测试崩溃

> ID：10224557
> 
> 赞同：1
> 
> 时间：2012-04-19T08:43:47.057
> 
> 标签：unit-testing, cakephp, testing, crash, cakephp-2.0

有时我在测试时遇到问题。测试已执行，我什至可以获得操作的结果，但测试没有显示绿色或红色消息，告诉我测试是否成功运行。（28/28 测试方法完成：28 次通过，0 次失败，95 次断言和 0 次异常......），时间，峰值内存......等。

例如。只有当我尝试执行此测试时它才会崩溃：

```
public function testGetHotVideo() {
    $result = $this->testAction("/posts/getHotVideo/");     
    $this->assertEquals($result, 'GoG_Tv5G17M');
} 
```

它调用这个方法：

```
public function getHotVideo(){
    $video = $this->Post->getHotVideo();
    return $video[0][0]['video'];
} 
```

它会正确返回视频字符串。所以它甚至可以打印在测试变量 $result 上。

这里发生了什么？

# 更新

我还注意到，当我调用重定向到某个视图的方法时，它也会发生同样的情况。在这种情况下，使用 Cake Bake 创建的默认删除：

```
public function delete($id = null){ 
        $this->Comment->id = $id;
        if (!$this->Comment->exists()) {
            throw new NotFoundException(__('Invalid comment'));
        }
        if ($this->Comment->delete()) {         
            $this->Session->setFlash(__('Comment deleted'));
            return $this->redirect(array('controller' => 'posts', 'action' => 'index'));
        }
        $this->Session->setFlash(__('Comment was not deleted'));
        return $this->redirect(array('controller' => 'posts', 'action' => 'index'));        
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:02:12.537

这是 SimpleTest (cakephp <= 1.3) 还是 PHPUnit (>1.3)？

万一它的 SimpleTest 你必须在你的控制器测试中处理重定向（[阅读关于控制器测试的 Mark Storys 文章](http://mark-story.com/posts/view/testing-cakephp-controllers-the-hard-way)）。基本上，您构建一个测试类，它继承自您正在测试的控制器类，然后覆盖重定向和其他一些方法（这里有一些来自文章）：

```
class TestPostsController extends PostsController {
    ...     
    function redirect($url, $status = null, $exit = true) {
        $this->redirectUrl = $url;
    }   
    ...
} 
```

比你在测试用例中使用这个修改过的控制器。

对于 CakePHP 2 和 PHPUnit，我什至在某些布局中调用 header() 函数时遇到了一些问题，这破坏了 html 结构和测试端的 css。

# reporting-services - 如何为分组列创建总计行

> ID：10224560
> 
> 赞同：8
> 
> 时间：2012-04-19T08:43:56.667
> 
> 标签：reporting-services, ssrs-2008, rdlc, rdl, report-viewer2010

如果有一个 rdlc 报告，其中包含 tablix（表）中的分组列。我想添加一个跨越所有动态创建的列的页脚行，并一起显示所有列的总数。如何告诉单元格它应该跨越该组创建的所有创建的列？

```
|-------|-------|-------|
| col 1 | col 2 | col 3 |
|-------|-------|-------|
|   Column-Group Total  |
|-----------------------| 
```

*请注意，计算总数不是我的问题。我只是在寻找一种方法来告诉报表查看器合并通过特定行的列组自动创建的单元格。*

**更新**
遗憾的是，到目前为止，我还没有找到解决方案。此外，我在报告中也遇到了同样的问题，我必须在合并列中添加行组的总数。

```
|------|-------|
|row 1 |       |
|------| Row-  |
|row 2 | Group |
|------| Total |
|row 3 |       |
|------|-------| 
```

我发现这是一种很常见的显示总数的方式。**这是不可能的，还是我错过了一些明显的东西？**

**Update2**
这是我的意思的截图：

![跨越类别总计](../Images/c01fc88c441bf7052e46fbf935a61e0e.png)

中间有一团。这会在运行时创建 n 列。我想要做的是跨越所有动态创建的列的“跨越类别总数”。这意味着，单元格的柱跨度为`n`。只有一个单元格，在这个单元格中，我将显示所有类别的总数。它与在组顶部自动创建的报表查看器几乎相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:59:23.780

不知道你是否已经找到了这个问题的答案，但如果没有......

通常，按列分组的数据的最后一列和按行分组的数据的最后一行预期总计...

但是，根据范围和您拥有的分组级别，您可以通过将 Tablix 嵌入到外部 Tablix 中，然后向外部 Tablix 添加一行来汇总那里的数据，从而实现您想要的效果。

我在矩形和列表中使用了多个数据区域来操作各种布局。如果这些范围不合作，您只需要使用范围，并可能调整您的输出数据（存储过程中的组的总和/平均值）。让我知道它是否能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:28:38.303

据我所知，rdlc 是您在 Report Wizard 或 Visual Studio 上编辑的报告文件，而 rdl 是在 BIDS 上开发的报告文件。

我不知道这是否适用于 rdlc 文件，因为我只使用 BIDS，但我认为值得一试：

1.  在行组选项卡（左下角）上右键单击您的组并选择添加总计 -> 之后，它将添加一个总计行。
2.  暂时将总和单元格（总数）复制到报告上的其他位置（因为如果不这样做，下一步将删除它）
3.  使用 SHIFT，逐个选择要合并的行上的单元格（不要选择行本身）
4.  右键单击它并选择合并单元格
5.  粘贴您在步骤 2 中复制的总和单元格

结果（希望你能看到）：

![在此处输入图像描述](../Images/65003e5e9361a25182689d764ccaca30.png)

编辑：

回答您的问题，是的，我确信可以完成，因为我做了几次，而且您在打印屏幕上也看到了。我正在为我的行粘贴 XML，我认为秘密就在`<ColSpan>8</ColSpan>`标签上。我的报告确实有 8 列。

```
<TablixRow>
<Height>0.25in</Height>
<TablixCells>
  <TablixCell>
    <CellContents>
      <Textbox Name="textbox18">
        <CanGrow>true</CanGrow>
        <KeepTogether>true</KeepTogether>
        <Paragraphs>
          <Paragraph>
            <TextRuns>
              <TextRun>
                <Value>=Sum(Fields!myField.Value)</Value>
                <Style>
                  <FontFamily>Tahoma</FontFamily>
                  <FontSize>9pt</FontSize>
                  <Format>'$'#,0.00;('$'#,0.00)</Format>
                </Style>
              </TextRun>
            </TextRuns>
            <Style>
              <TextAlign>Right</TextAlign>
            </Style>
          </Paragraph>
        </Paragraphs>
        <rd:DefaultName>textbox16</rd:DefaultName>
        <Style>
          <Border>
            <Color>LightGrey</Color>
            <Style>Solid</Style>
          </Border>
          <BackgroundColor>White</BackgroundColor>
          <PaddingLeft>2pt</PaddingLeft>
          <PaddingRight>2pt</PaddingRight>
          <PaddingTop>2pt</PaddingTop>
          <PaddingBottom>2pt</PaddingBottom>
        </Style>
      </Textbox>
      <ColSpan>8</ColSpan>
      <rd:Selected>true</rd:Selected>
    </CellContents>
  </TablixCell>
  <TablixCell />
  <TablixCell />
  <TablixCell />
  <TablixCell />
  <TablixCell />
  <TablixCell />
  <TablixCell />
</TablixCells>
</TablixRow> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T14:59:22.307

由于看起来您有一个动态列组，因此您可能会放入列中：

字段！ColHeading.Value |总
字段！DataValue.Value | =SUM（字段！数据值。值）

如果您更喜欢图形界面，请右键单击总计的值字段，然后单击表达式。在弹出窗口中，展开 Common Functions 并单击 Aggregate，然后在 Item 窗口中双击 Sum。输入或单击数据字段，您将得到如下内容：![填写的表达式窗口](../Images/ff2aad708d787672c8c38fbd5de686e6.png)。

点击确定，您就可以开始了！

# haskell - Text.ParserCombinators

> ID：10224561
> 
> 赞同：0
> 
> 时间：2012-04-19T08:43:56.870
> 
> 标签：haskell

我想为 Haskell 中的正则表达式制作一个解析器组合器。所以我定义了自己的数据类型，并为这个类型做了一个匹配函数。我最近发现了 Text.ParserCombinators。如果我使用`parseTest`函数，结果类型是`IO`. 那么如何使用 Text.ParserCombinators 来返回我创建的数据的类型呢？下面是我的代码。

```
data Reg = Eps
        |Sym Char --caracter
        |Alt Reg Reg --a sau b a|b
        |Seq Reg Reg -- secventa ab  sau chiar paranteza
        |Rep (Int, Maybe Int) Reg   --Star repet on or more time
        |Dif Reg    --not
deriving (Show)
--match function
accept :: Reg -> String ->Bool

accept ( parse term "abcd") "abcd"
ERROR - Type error in application
*** Expression     : accept (parse term "abcd") "abcd"
*** Term           : parse term "abcd"
*** Type           : [Char] -> Either ParseError Reg
*** Does not match : Reg
--term is the Parser function where the grammars is defined
term :: Parser Reg
term = buildExpressionParser ops atom where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:55:16.420

正如评论中的 sdcvvc 所指出的，`parse`它没有应用于足够的参数。

# silverlight - 结合主动和被动联合

> ID：10224562
> 
> 赞同：0
> 
> 时间：2012-04-19T08:43:57.900
> 
> 标签：silverlight, wif

WIF中是否可以结合主动和被动联邦？我们目前有多个 Silverlight 客户端与 1 个或多个 WCF 服务进行通信。问题是其中一些服务托管在不同的域上。这意味着，当我们使用被动联合时，当用户尚未登录该域时，对这些服务的调用将失败（WIF 将尝试重定向调用）。那么是否可以在登录网站/Silverlight 客户端时使用被动联合，在与服务通信时使用主动联合？有没有人这样做过（使用 Silverlight ...）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:59:27.120

您说 WIF 将重定向您的 WCF 服务调用。这似乎与这个 StackOverflow 问题中的问题完全相同：[Passing SAML Token to WCF service from Asp.Net](https://stackoverflow.com/q/9882283/223837)，因此[我对该问题的回答也](https://stackoverflow.com/a/9883946/223837)可能适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:33:07.803

您的场景听起来像这样：您有一个网站，该网站使用被动联合对用户进行身份验证以获取令牌。您持有已发行的令牌，并将其传递给您的 silverlight 客户端。silverlight 客户端使用该令牌与您的后端 WCF 服务进行主动联合。

我见过的最常见的实现方式是通过 RIA 服务。我发现[这篇文章](http://hashtagfail.com/post/5441929717/ria-services-active-federation)很好地介绍了这一点。此外，[身份开发人员培训工具包](http://www.microsoft.com/download/en/details.aspx?id=14347)具有端到端示例。查找标题为“开发身份驱动的 Silverlight 应用程序”的文章。

# optimization - 在 x86 中对齐 16 字节边界是什么意思

> ID：10224564
> 
> 赞同：9
> 
> 时间：2012-04-19T08:43:59.867
> 
> 标签：optimization, x86, memory-alignment

[英特尔的官方优化指南](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)有一章是关于从 MMX 命令转换为 SSE 的，其中说明了闲置声明：

> 使用可能未与 16 字节边界对齐的内存操作数的计算指令必须替换为未对齐的 128 位加载 (MOVDQU)，然后执行使用寄存器操作数的相同计算操作。

（第 5.8 章从 64 位转换为 128 位 SIMD 整数，第 5-43 页）

我无法理解“可能未与 16 字节边界对齐”是什么意思，请您澄清一下并举一些例子吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T09:29:40.850

某些对多个数据执行相同指令的[SIMD](http://en.wikipedia.org/wiki/SIMD)指令要求该数据的内存地址与某个字节边界对齐。这实际上意味着您的数据所在的内存地址需要被指令所需的字节数整除。

因此，在您的情况下，对齐是 16 个字节（128 位），这意味着您的数据的内存地址需要是 16 的倍数。例如 0x00010 将是 16 字节对齐，而 0x00011 不会。

如何对齐数据取决于您使用的编程语言（有时是编译器）。大多数具有内存地址概念的语言也会为您提供指定对齐方式的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:40:26.093

我在这里猜测，但是“可能未与 16 字节边界对齐”是否意味着此内存位置之前已对齐到较小的值（4 或 8 字节）用于其他目的，现在执行您需要将此内存上的 SSE 指令显式加载到寄存器中吗？

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-19T08:48:07.060

在 16 字节边界上对齐的数据将具有一个偶数的内存地址——严格来说，是 2 的倍数。每个字节为 8 位，因此要在 16 字节边界上对齐，您需要对齐每组两个字节。

类似地，在 32 位（4 字节）边界上对齐的内存的内存地址是四的倍数，因为您将四个字节组合在一起形成一个 32 位字。

# java - 在运行时一种布局优于另一种布局？

> ID：10224566
> 
> 赞同：0
> 
> 时间：2012-04-19T08:44:08.257
> 
> 标签：java, android, eclipse

我的游戏应用程序有许多复杂的图形元素，我担心在屏幕上连续显示横幅广告会过多地影响游戏。我的计划是，用户将能够在没有任何广告的情况下使用全屏播放游戏中的每个“关卡”，但在完成每个关卡后，广告会滑入屏幕顶部。大概这意味着我必须以某种方式以编程方式创建一个布局，该布局将出现在现有屏幕布局的顶部。这可以做到吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:54:27.300

可以办到。Afaik 你只需要创建一个 android:backgroundcolor="transparent" 的布局。否则您可以这样做，以便您在每个级别完成时开始一项新活动？

# c# - 启动后将焦点设置在winform上

> ID：10224567
> 
> 赞同：8
> 
> 时间：2012-04-19T08:44:09.817
> 
> 标签：c#, .net, winforms, focus, setfocus

我发现了一些关于此的主题，但这些都不能帮助我解决我的问题，我想在它启动后将焦点设置在新创建的 winform 窗口上。

我在自己的新线程中开始表单：

```
application.Run(new InvisibleForm()); 
```

并出现窗体，但焦点仍设置在 windows 中最后一个选定的窗口上。这个表单没有标题栏，不在任务面板中看到，它还有一个 TransparencyKey 集：

```
this.AutoScaleDimensions = new SizeF(6F, 13F);
this.AutoScaleMode = AutoScaleMode.Font;
this.BackColor = SystemColors.AppWorkspace;
this.ClientSize = new Size(992, 992);
this.ControlBox = false;
this.MaximizeBox = false;
this.MinimizeBox = false;
this.Name = "InvisibleForm";
this.Opacity = 0.5;
this.ShowInTaskbar = false;
this.TransparencyKey = SystemColors.AppWorkspace;
this.Load += new EventHandler(this.InvisibleForm_Load); 
```

现在我尝试了一些方法，但这些方法都没有让我专注于表单，或者可以将表单设置在所有其他窗口的前景/顶部：

```
this.TopMost = true;
this.Focus();
this.BringToFront();
this.Activate(); 
```

有没有办法以编程方式将点击/焦点事件触发到表单，以便它将自己设置为焦点事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T18:00:21.477

`Activate()`在表单的“显示”状态下使用该方法很重要，因此[为显示的事件创建一个侦听器](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)并在那里使用您的焦点/前端方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T02:03:50.137

你可以试试这段代码

```
this.ShowDialog(); 
```

上面的代码与 MessageBox 相同，请注意。所以最后出现的表单必须关闭，并且可以再次访问另一个表单。

# php - Google Calendar API php 客户端库的文档

> ID：10224571
> 
> 赞同：3
> 
> 时间：2012-04-19T08:44:23.533
> 
> 标签：php, api, documentation, google-calendar-api, google-api-php-client

我想使用 Google Calendar API php 客户端库，它似乎适用于[可用的基本示例，](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php)但我在任何地方都找不到任何文档/类列表/方法/api-explanation。

有什么可用的还是我必须挖掘源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T19:30:06.717

谷歌的文档似乎已经过时了......

为了获得最佳机会，您应该前往[http://amazewebs.com](http://amazewebs.com)

AmazeWebs 拥有足够多的信息来帮助您理解和编写自己的 Google API 日历脚本。使用 PHP 并跟随演示视频；您可以在几分钟内“启动并运行”一个脚本！...包括示例脚本、教学视频、PDF 帮助指南（常见调试）、一对一支持等...

看一个简单脚本的演示：http: [//amazewebs.com/demo](http://amazewebs.com/demo)

在此处下载 API 客户端库 v3 的工作副本：http: [//amazewebs.com/downloads/google-api.zip](http://amazewebs.com/downloads/google-api.zip)

在此处查看实际演示：[https ://www.youtube.com/watch?v=x6aurr7TDMI](https://www.youtube.com/watch?v=x6aurr7TDMI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T10:19:18.423

Google Apps API 客户端：[https ://developers.google.com/google-apps/calendar/setup](https://developers.google.com/google-apps/calendar/setup)

日历 V3 API 文档：[https ://developers.google.com/google-apps/calendar/v3/reference/](https://developers.google.com/google-apps/calendar/v3/reference/)

示例：[https ://developers.google.com/google-apps/calendar/recurringevents](https://developers.google.com/google-apps/calendar/recurringevents)

那是你所期望的吗？

# ruby - 将长文件名转换为短文件名 (8.3)

> ID：10224572
> 
> 赞同：3
> 
> 时间：2012-04-19T08:44:24.043
> 
> 标签：ruby, windows, command-line, long-filenames, short-filenames

我想将长文件名/路径转换为短文件名（8.3）。我正在开发一个脚本，它调用只接受短文件名的命令行工具。

所以我需要转换

`C:\Ruby193\bin\test\New Text Document.txt`

到

`C:\Ruby193\bin\test\NEWTEX~1.TXT`

到目前为止，我找到[了如何从 ARGV 获取长文件名，](https://stackoverflow.com/questions/8128863/how-to-get-long-filename-from-argv)它使用 WIN32API 将短文件名转换为长文件名（与我想要实现的相反）。

有没有办法在 Ruby 中获取短文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:30:54.143

您可以使用[FFI](https://github.com/ffi/ffi/)执行此操作；实际上，在[他们的 wiki](https://github.com/ffi/ffi/wiki/Windows-Examples)标题“将路径转换为 ​​8.3 样式路径名”下，有一个示例涵盖了您的确切场景：

```
require 'ffi'

module Win
  extend FFI::Library
  ffi_lib 'kernel32'
  ffi_convention :stdcall

  attach_function :path_to_8_3, :GetShortPathNameA, [:pointer, :pointer, :uint], :uint
end
out = FFI::MemoryPointer.new 256 # bytes
Win.path_to_8_3("c:\\program files", out, out.length)
p out.get_string # be careful, the path/file you convert to 8.3 must exist or this will be empty 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:28:21.327

此 ruby​​ 代码使用*getShortPathName*并且不需要安装其他模块。

```
def get_short_win32_filename(long_name)
    require 'win32api'
    win_func = Win32API.new("kernel32","GetShortPathName","PPL"," L")
    buf = 0.chr * 256
    buf[0..long_name.length-1] = long_name
    win_func.call(long_name, buf, buf.length)
    return buf.split(0.chr).first
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:39:01.747

您需要的 windows 功能是[GetShortPathName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364989%28v=vs.85%29.aspx)。您可以按照链接帖子中描述的相同方式使用它。

编辑：GetShortPathName 的示例用法（仅作为一个简单示例）-短名称将包含“C:\LONGFO~1\LONGFI~1.TXT”，返回值为 24。

```
TCHAR* longname = "C:\\long folder name\\long file name.txt";
TCHAR* shortname = new TCHAR[256];
GetShortPathName(longname,shortname,256); 
```

# git - jenkins/hudson 无法连接到 github repo

> ID：10224574
> 
> 赞同：21
> 
> 时间：2012-04-19T08:44:37.580
> 
> 标签：git, github, hudson, jenkins

我在 Ec2 上使用基本的 amazon ami linux-我已经安装了 jenkins，但是当我从 github 中提取 repo 时，出现以下错误：

```
Building in workspace /var/lib/jenkins/workspace/build social
Checkout:build social / /var/lib/jenkins/workspace/build social - hudson.remoting.LocalChannel@5c7b21b
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin
ERROR: Error cloning remote repo 'origin' : Could not clone git@github.com:adulion/.git
hudson.plugins.git.GitException: Could not clone git@github.com:adulion/.git
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:245)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1117)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1059)
    at hudson.FilePath.act(FilePath.java:832)
    at hudson.FilePath.act(FilePath.java:814)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1059)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:581)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:470)
    at hudson.model.Run.run(Run.java:1421)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238)
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@github.com:adulion/.git /var/lib/jenkins/workspace/build social" returned status code 128:
stdout: Cloning into /var/lib/jenkins/workspace/build social...

stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

我已经为安装 jenkins 的当前用户生成了一个密钥，并设法使用 git 命令行克隆了 repo，但 jenkins 不能。

我已将 ~/.ssh 文件复制到 /var/lib/jenkins/.ssh

我已将 github 添加到已知主机，但我已经用完了可以尝试的解决方案。有人知道我哪里出错了吗？有没有办法让詹金斯显示它正在使用的公钥，如果它使用正确的公钥我可以调试？

**我删除了 repo 的名称，因为它是一个私人 repo**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-19T22:08:06.897

错误似乎是：主机密钥验证失败。

您应该以 Jenkins 用户身份登录到您的 Jenkins 主机并运行：

```
ssh git@github.com 
```

然后对有关主机密钥的提示回答“是”。这只需要执行一次。

或者，您可以将“StrictHostKeyChecking no”添加到 ~jenkins/.ssh/config。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T00:58:48.783

1）将用户切换到您的詹金斯帐户

```
su jenkins 
```

2）创建没有密码的密钥

3) ssh git@github.com

这对我来说非常有效。

您可能需要为 jenkins 帐户创建密码，如果需要，请使用`sudo passwd jenkins`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T09:03:44.223

我正在使用一台 jenkins 机器来检查多个 github 存储库，并且在设置时遇到了类似的问题。我最终做的是为 jenkins 配置 SSH 配置文件，以便 SSH 自动知道与每个存储库关联的 id 文件。

/var/lib/jenkins/.ssh/config：

```
Host github-ABC
  HostName github.com
  User git
  IdentityFile /var/lib/jenkins/.ssh/id_rsa_ABC 
```

在源代码管理下的 Jenkins 项目配置中，我将其用作存储库名称：

```
git@github-ABC:user/repo.git 
```

最后，我使用 SSH 公钥作为 github 存储库中的部署密钥。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-09T12:31:04.193

他以下帮助了我：

在 Jenkins 下登录

```
sudo su jenkins 
```

将您的 github 密钥复制到 Jenkins .ssh 文件夹

```
cp ~/.ssh/id_rsa_github* /var/lib/jenkins/.ssh/ 
```

重命名键

```
mv id_rsa_github id_rsa
mv id_rsa_github.pub id_rsa.pub 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-12T22:35:12.080

如果您以 jenkins 身份登录，您可以这样做

ssh -i ~/.ssh/id_rsa git@github.com

其中 ~/.ssh/id_rsa 是路径/to/your/ssh/key，它将提示输入密码并添加到 known_hosts 文件

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-18T18:18:46.447

您需要将 jenkins 的 ssh 密钥添加到您的 github 用户。

[生成 ssh 密钥](https://help.github.com/articles/generating-ssh-keys/)

去：

`Github->Settings(Top right)->SSH Keys(Left Pane)->Add SSH Key`

# javascript - Jquery 追加一个 div 并删除一个 div

> ID：10224583
> 
> 赞同：1
> 
> 时间：2012-04-19T08:45:19.620
> 
> 标签：javascript, jquery

这是我的问题，

我有一个选择框，我需要验证 val() 是否变为 0，然后附加一个文本插入一个带有类错误的跨度，说明“请选择一个值”。否则需要删除该div。当我单击提交按钮时会发生这些情况。这是我的代码，

```
if ($('.combo option:selected[value==0]')) {
    var error_span = $("div.info-cont ul.map-list li span.right")
        .append("<br>Please select an appropriate value")
        .addClass('error');
} else {

} 
```

现在的问题是，如果在选择框中选择了一个值，我的附加跨度应该被删除。任何帮助。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:49:13.223

> ```
> if($('.combo option:selected[value==0]')){
> $("div.info-cont ul.map-list li span.right").append("<br>Please select an appropriate value").addClass('error');
> } else {
> 
> $("div.info-cont ul.map-list li span.right").html("");
> $("div.info-cont ul.map-list li span.right").removeClass('error');
> 
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:55:07.467

我只是想解释一下：

```
if ($('.combo option:selected[value==0]')) 
```

要检查下拉列表中的选定项目是否为 0，您可以使用以下命令：

```
if ($('.combo').val() == '0') // simpler and more readable :-) 
```

然后，如果您已经将错误消息放在文档中的某个位置，它会更简单。您需要做的就是显示/隐藏它。例如：

```
<select id="dropdown-1" class="combo">
  <option value="0">-</option>
  <option value="1">Lorem</option>
  <option value="2">Ipsum</option>
</select>

<span id="error-dropdown-1" class="error" style="display: none">Please select a value!</span> <!-- hidden by default. can also use CSS instead of style="display: none" -->

<input type="button" id="demo-button" value="Demo" /> 
```

和javascript（+ jquery）：

```
$('#demo-button').click(function() {
  if ($('.combo').val() == '0') {
    $('#error-dropdown-1').show();
  } else {
    $('#error-dropdown-1').hide();
  }
}); 
```

这是另一个例子。如果您避免使用 ID（也许您已经动态生成了 dorpdowns），则很有用：

```
<script type="text/javascript">
$(function() {
    $('#demo-button').click(function() {
        $('.combo').each(function() {
            var div = $(this).parents('div').get(0); // get the wrapper
            if ($(this).val() == '0') {
                $(div).find('.error').show(); // show <span class=".error"> inside the wrapper
            } else {
                $(div).find('.error').hide(); // hide <span class=".error"> inside the wrapper
            }
        });
    });
});
</script>

<div> <!-- wrapper for 1st combo + 1st error message -->
    <select class="combo">
        <option value="0">-</option>
        <option value="1">Lorem</option>
        <option value="2">Ipsum</option>
    </select>
    <span class="error" style="display: none">Please select a value!</span>
</div>

<div> <!-- wrapper for 2nd combo + 2nd error message -->
    <select class="combo">
        <option value="0">-</option>
        <option value="1">Dolor</option>
        <option value="2">Sit</option>
        <option value="3">Amet</option>
    </select>
    <span class="error" style="display: none">Please select a value!</span>
</div>

<div> <!-- wrapper for 3rd combo + 3rd error message -->
    <select class="combo">
        <option value="0">-</option>
        <option value="1">Consectetuer</option>
        <option value="2">Adipiscing</option>
        <option value="3">Elit</option>
    </select>
    <span class="error" style="display: none">Please select a value!</span>
</div>

<input type="button" id="demo-button" value="Demo" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:46:47.343

看看[jquery 验证器](http://goo.gl/Ret4)，它会为你做这一切

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:52:43.137

如果您的 span (span.right) 包含除错误消息之外的任何其他内容（我认为它基于 br-tag 的使用），则此方法会将该内容保留在原处。

```
var $select = $(".combo"),
    $span = $("div.info-cont ul.map-list li span.right");

if ($select.val() === 0) {
    $span.append(
        $("<span/>")
            .addClass("error")
            .html("Please select an appropriate value")
    );
} else {
    $span.children("error").remove();
} 
```

我没有测试过这段代码，但类似的东西应该可以解决问题。

# wpf - loadFromRemoteSources enabled="true" // XAML 设计器 // VS 11 beta 和 2012 RC

> ID：10224585
> 
> 赞同：6
> 
> 时间：2012-04-19T08:45:31.597
> 
> 标签：wpf, visual-studio, dll, cas

我经常被这个刺痛，当然总是在最糟糕的时刻。当我编辑 xaml 文件时，我收到此错误

```
(System.NotSupportedException: An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework. This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous. If this load is not intended to sandbox the assembly, please enable the loadFromRemoteSources switch. See http://go.microsoft.com/fwlink/?LinkId=155569 for more information.) 
```

我在 devenv.exe.config 中 添加了[推荐的元素](http://www.damirscorner.com/CodeAccessSecurityStrikesBackInNET4.aspx)

```
<configuration>
  <runtime>
    <loadFromRemoteSources enabled="true" />
  </runtime>
</configuration> 
```

这应该摆脱它，但对我不起作用。我应该在别处添加这个吗？系统如何首先知道这是从 Internet 下载的？我怎样才能摆脱那个警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T02:19:50.587

我也将 XML 添加到其他配置文件（XDesProc.exe.config 和 XDesProc.exe.appx.config）中，它为我解决了这个问题：

1.  转到 C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE

2.  使用文本编辑器打开文件 XDesProc.exe.config、devenv.exe.config 和 XDesProc.exe.appx.config（可能需要管理员模式）

3.  找到 </runtime> 并在它之前添加 <loadFromRemoteSources enabled="true"/> （如果您复制/粘贴，请确保双引号以 ASCII 或 VS 的形式出现）

（来源：[http](http://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/) ://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/ ）

（类似问题：[WPF 设计器无法在 VS 11 beta 中加载](https://stackoverflow.com/questions/9692055)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T21:50:56.500

当您从不安全的来源（互联网）粘贴文件时，这可能是我偶尔遇到的情况。您加载的任何资源都可能被阻止。在 Windows 资源管理器中，`Properties`从这些程序集或文件的上下文菜单中进行选择。在此对话框的底部，单击`Unblock`可用的按钮。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:56:02.497

我能够使用以下步骤解决此问题：

1.  在 Windows 资源管理器中转到此路径：C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE
2.  在记事本或您选择的任何编辑器中打开 devenv.exe.config 文件。
3.  在文件中搜索此元素结束标记：
4.  在此元素结束标记之前，复制并粘贴以下配置开关
5.  保存并关闭配置文件

这些步骤取自这里： [http ://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/](http://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/)

# php - 如何创建具有初始支付金额的贝宝定期付款？

> ID：10224588
> 
> 赞同：2
> 
> 时间：2012-04-19T08:45:55.723
> 
> 标签：php, paypal

我目前正在创建具有定期支持的贝宝付款。我希望以这样的方式进行初始付款。

例子 ：

*   30 美元 - 首期付款
*   10 美元 - 每月定期付款

首付款在结帐时收取。我正在使用 html 标准集成过程。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:12:55.057

使用适用于 PHP 的 paypal NVP API，您可以像这样将初始付款发送到 paypal。

```
$nvpstr="&AMT=10&CREDITCARDTYPE=$creditCardType&ACCT=$creditCardNumber&EXPDATE=".         $padDateMonth.$expDateYear."&CVV2=$cvv2Number&FIRSTNAME=$firstName&LASTNAME=$lastName&STREET=$address1&CITY=$city&STATE=$state".
"&ZIP=$zip&COUNTRYCODE=US&CURRENCYCODE=$currencyCode&PROFILESTARTDATE=$profileStartDate&DESC=$profileDesc&BILLINGPERIOD=$billingPeriod&BILLINGFREQUENCY=$billingFrequency&TOTALBILLINGCYCLES=$totalBillingCycles&INITAMT=30.00";

$resArray=hash_call("CreateRecurringPaymentsProfile",$nvpstr); 
```

参数`INITAMT`指定初始支付金额

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:50:23.827

是的，这可以通过网站支付标准（我假设您使用的“HTML 标准集成流程”）实现。只需在订阅中包含试用期，然后在订阅结束后 X 天开始收费。

在此处查看[订阅变量](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI00JQU)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:00:02.573

I too switched from website payment's pro to html integration and unfortunately initial amount option is not available in HTML version. If you can switch website payments pro and use API then you can have the option of initial amount (I had to switch because API is not allowed on Israel paypal accounts) otherwise the only option you have in HTML is trial periods.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-03T05:00:37.497

但在下面的链接中，INTAMT 不是扣除首期付款 [Paypal 定期付款的正确方法](https://stackoverflow.com/questions/16918129/paypal-recrurring-payments)

所以请说出你的想法。

# android - 如何从 HTML WebView 中的标签获取信息？

> ID：10224594
> 
> 赞同：2
> 
> 时间：2012-04-19T08:46:08.867
> 
> 标签：android, html, webview

我想知道如何在 HTML 的标签中获取信息。我不知道我是否做得对，因为它不返回任何信息。我向您展示我的android代码，看看您是否可以帮助我。

代码类：

```
 public class WebView1 extends Activity {
        /** Called when the activity is first created. */   
WebView browse;         
        @Override
        protected void onCreate(Bundle savedInstanceState)      {

            super.onCreate(savedInstanceState);

            setContentView(R.layout.webview1);
         browse = (WebView) findViewById(R.id.webview1);                     

         browse.setWebChromeClient(new WebChromeClient());

         browse.setWebViewClient(new WebViewClient() {
                @Override  
                public void onPageFinished(WebView view, String url) {
                    File input = new File("file:///android_asset/ejemploWebview.html");
                    Document doc = null;
                    try {
                        doc = Jsoup.parse(input, "UTF-8");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    //http://jsoup.org/cookbook/input/load-document-from-url
                    //Document doc = Jsoup.connect("http://example.com/").get();

                    Element content = doc.getElementById("div");
                    Elements links = content.getElementsByTag("id");
                    String linkId = links.attr("manolo");
                    System.out.print(linkId); //I need that it return Hiiii!
                    }
            });     } } 
```

代码HTML：

```
 <html>
    <head>
    </head>
    <div id="james">hellooo!</div>
    <div id="paco">byeee!</div>
    <div id="manolo">Hiii!</div>
    </html> 
```

我希望我解释正确！谢谢！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:54:54.793

就个人而言，在使用选择器时，我总是从 JSoup 获得更好的结果，详见[此处](http://jsoup.org/cookbook/extracting-data/selector-syntax)。

从您给出的示例中，您似乎想通过它们的 ID 检索 div 值，您可以使用它：

> el#id：带有ID的元素，例如div#logo

因此，要么使用上述 3 次，要么只选择 div 并迭代它们，做任何你需要做的事情。

希望这可以帮助。

PS，我发现的最简单的事情是在你调用之后放置一个断点`doc = Jsoup.parse(input, "UTF-8");`，然后使用你的 IDE 的表达式构建器来确定哪个选择器可以满足你的需求:)

# java - java线程：生产者-消费者

> ID：10224597
> 
> 赞同：1
> 
> 时间：2012-04-19T08:46:14.230
> 
> 标签：java, multithreading, design-patterns

我有一些开发工作要做，我试着看看是否有一个设计模式可以使用。问题很简单：

我有一个启动许多踏板的主线程。主线程必须等待每个线程完成，然后执行其他操作。现有的代码有点难看。我有一个 while 循环来检查线程组以查看是否正在运行：

```
//launch threads
.....
//wait for threads to finish
while (ThreadRepository.getInstance().isActiveThreadGroup(myGroupId)) {
    Thread.sleep(5000);
}

//doing something else 
```

因此，如您所见，while 循环一直运行，直到没有线程运行。

我在考虑模式生产者-消费者，我想做这样的事情：

例如，使用一些 BlockingQueue，每个线程都会在其中放入（或获取）一些东西。而不是有时间和睡眠，我想有一些东西， `myQueue.take()`但有一些东西可以等待队列为空。为空时，表示没有线程在运行。

我尝试在 Internet 上搜索，但没有找到与我的问题相符的内容。

有谁知道最有效地解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:54:26.017

有两种简单的方法可以让一个线程等待 N 个线程完成：

1.  使主线程在所有其他线程上调用 join()。join() 在线程完成或已经完成时返回
2.  创建一个初始化为 N 的 CountDownLatch，将此锁存器传递给所有线程，`countDown()`在锁存器完成后让每个线程调用锁存器，并在锁存器上进行主线程调用`await()`。第二种技术比第一种更难，但也更灵活和可重用，并且允许在延迟后唤醒，即使 N 个线程还没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:25:42.403

您可以按如下方式使用 BlockingQueue：

*   每个子线程在完成后将一条消息放入队列

*   主线程从队列中获取消息并计算它们。当消息数等于线程数时，所有线程都已完成。

# c# - WM_IME_KEYDOWN 不捕获箭头键

> ID：10224606
> 
> 赞同：0
> 
> 时间：2012-04-19T08:46:43.793
> 
> 标签：c#, ime

我试图在使用 IME 时捕获箭头键，但是 WM_IME_KEYDOWN 似乎没有捕获箭头。我尝试使用 WM_IME_COMPOSITION，这在按下箭头时确实会发生，但我看不到按下了哪个箭头。

```
protected override void WndProc(ref Message m){
    if (m.Msg == WM_IME_KEYDOWN) {
        DoStuff();
    }
} 
```

知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:28:21.703

您可以改用低级键盘挂钩。

看看[这里](http://support.microsoft.com/default.aspx?scid=kb;en-us;318804)。

# .net - 使用 cmis 将 .net 应用程序与 alfresco 集成

> ID：10224614
> 
> 赞同：1
> 
> 时间：2012-04-19T08:47:01.720
> 
> 标签：.net, alfresco, cmis, dotcmis

如何将 .net 应用程序与 alfresco 集成？如何使用 cam cmis 来做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:22:05.087

您可以使用[Apache Chemistry DotCMIS](http://chemistry.apache.org/dotnet/dotcmis.html)从您的 .net 代码执行 CMIS 请求。该 API 与 Java OpenCMIS API 非常相似，因此您可以找到有关使用 OpenCMIS 与 Alfresco 对话的教程，并使用 DotCMIS 做大致相同的事情。

如果您是 CMIS 的新手，那么[Apache Chemistry](http://chemistry.apache.org)在他们的网站上提供了一个[非常方便的概述。](http://chemistry.apache.org/project/cmis.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:18:26.057

[http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/remote-api/source/sample/WcfCmisTest/](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/remote-api/source/sample/WcfCmisTest/)上的示例应该让您开始使用 C#、CMIS 和 Alfresco。

# fortran - 是否可以禁用命名参数调用？

> ID：10224615
> 
> 赞同：0
> 
> 时间：2012-04-19T08:47:07.317
> 
> 标签：fortran, fortran90

我有两个例程，它们的区别仅在于参数的顺序，但我想通过接口使用它们，以便在调用时根据参数的顺序调用正确的例程。编译器抱怨它无法区分它们，我的猜测是因为如果我在调用时使用命名参数的语法，它将不知道要调用哪个。一种解决方法是为参数使用不同的名称，但我想知道是否有一种方法可以禁用命名参数调用样式。

例如，这是我要处理的情况

```
module Foo

    interface Bar
        module procedure Bar1
        module procedure Bar2
    end interface

contains
    subroutine Bar1(i,r)
        integer, intent(in) :: i
        real, intent(in) :: r
        print *, "bar1"
    end subroutine
    subroutine Bar2(r,i)
        real, intent(in) :: r
        integer, intent(in) :: i
        print *, "bar2"
    end subroutine

end module

program fuux
    use Foo
    integer :: i
    real :: r

    r = 5.0
    i = 3

    call Bar(i,r) ! note that if I call Bar(i=i, r=r) the compiler cannot disambiguate
                  ! so it will complain at the interface statement
end program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:52:01.213

我不知道有什么方法可以按照您的建议去做，或者更确切地说是按照我认为您在“禁用命名参数调用样式”这句话中所建议的去做。如果这个答案以任何方式激怒、失望或不快，请发布一些代码，我们（所以我的意思是，我没有太多的架子和优雅，很少使用皇室的“我们”）可能会提出一个狡猾的把戏，这会取悦你。

**编辑**

没有直接的方法可以做你想做的事。我想到的第一个解决方法是定义一个名为的子例程`bar`，它以规范的顺序获取一系列参数，并以适当的顺序简单地调用`bar1`, （以及您想要定义的`bar2`任何其他婴儿）。`bars`

# javascript - 获取链接href并将其应用于另一个链接jQuery

> ID：10224616
> 
> 赞同：0
> 
> 时间：2012-04-19T08:47:07.973
> 
> 标签：javascript, jquery

我有一组 DIV，每个 DIV 都包含一个带有空锚标记的图像

```
<a href="#"> Image is here </a> 
```

然后在 div 关闭之前我有一个***“继续阅读”链接***

```
<a href="?p=453">Continue reading <span class="meta-nav">→&lt;/span></a> 
```

jQuery有没有办法在页面加载时，我可以确定***继续阅读***`href`按钮的位置并应用包裹在我的图像周围的空锚？

 ****演示：http:*** [//jsfiddle.net/2hu66/1/](http://jsfiddle.net/2hu66/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:50:36.817

```
$('.card-prod').each(function() {
    var cr = $(this).find('a:last');
    $(this).find('.cardclick').attr('href', cr.attr('href'));
}); 
```

例如小提琴：http: [//jsfiddle.net/2hu66/4/](http://jsfiddle.net/2hu66/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:51:02.297

这是可能的，但这不是一个好主意。使用 js 创建的链接对于谷歌爬虫是不可见的。这样做的正确方法是创建一个真正的链接而不是“#”。

做正确的事情并不有趣；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:54:10.390

根据您的 HTML，您可以执行以下操作：

```
​$(function(){
    $('.card-prod').each(function(){                         //for each item
        var theLink = $('a[href^="?p"]',this).attr('href');  //get the link
        $('a.cardclick',this).attr({'href':theLink});        //set to img link
    });
})​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:54:25.460

您可以遍历“继续阅读”链接并复制它们的 href，可能是这样的：

```
​$(​"div.card-prod a:contains('Continue reading')")​​​​​​​​​​​​​​​​​​​​​​​​​​.each(function() {
    var $this = $(this);
    $this.closest("div.card-prod")
         .find("a.cardclick")
         .attr("href", $this.attr("href"));
});​ 
```

更新演示：http: [//jsfiddle.net/2hu66/3/](http://jsfiddle.net/2hu66/3/)

我上面使用的[`:contains`选择器](http://api.jquery.com/contains-selector/)不会是最有效的方法，但它确实有效。如果它是我的 html，我可能会给那些“继续阅读”锚元素一个公共类并选择它。或者您可以选择“元导航”跨度，然后选择它们的父级。（真的有很多选择。）*

# sql - INSTEAD OF 触发器和 CASCADE 路径

> ID：10224619
> 
> 赞同：11
> 
> 时间：2012-04-19T08:47:18.257
> 
> 标签：sql, sql-server, triggers, cascade, referential-integrity

假设我在一个层次结构中有 3 个表：

```
TableA -> TableB -> TableC 
```

`TableC`与 有外键关系`TableB`，与`TableB`有外键关系`TableA`。

如果我在 中删除一条记录`TableA`，它应该通过层次结构级联删除。使用`ON DELETE CASCADE`会很好。

但是，假设我需要`INSTEAD OF`在`TableC`. 我的理解是`INSTEAD OF`触发器不能放在有删除级联的表上。取自 MSDN：

> 对于 INSTEAD OF 触发器，在具有指定级联操作 ON DELETE 的引用关系的表上不允许使用 DELETE 选项。

如果我必须关闭级联删除`TableB->TableC`，我需要使用`INSTEAD OF`触发器来强制执行参照完整性，然后我会遇到同样的问题`TableB->TableA`。这是一个简单的例子，但想象级联路径要大得多。它似乎很容易在一条长长的级联路径中滚雪球。

那么处理这种情况的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:29:34.940

假设您必须使用 INSTEAD OF 触发器，并且 AFTER 触发器不是一个选项，最好的方法是 a) 严格控制架构，以便您可以 b) 以常规方式编写 INSTEAD OF 触发器以实现 CASCADE DELETE 和其他您需要的其他操作。

像以前一样创建 FK 约束，但没有任何级联行为。在 FK 名称中，使用一些约定来指示应该发生什么样的级联行为和自定义行为，例如：

*   FK_UC_DC_Table1_Table2 -- 更新级联，删除级联
*   FK_UC_DN_Table1_Table3 -- 更新级联，删除集空

使用任何有意义的东西，但一定要创建 FK，它们是代码生成的有用元数据，您可以使用 FK 名称来记录代码生成器的指令。

然后我会更进一步，将这些表隔离在它们自己的模式中。它们的行为方式与其他表不同，并且在您测试和微调代码生成时，它们一开始会出现更多错误。最好将所有这些隔离起来，并通过一个通用容器轻松识别。

专用模式还将通知修改数据的任何人应用不同的规则和行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T13:20:39.940

标准的最佳实践是在*视图*上定义 INSTEAD OF 触发器，而不是在*表*上。

如果您必须在 FK 更新/删除上使用触发器，您最好使用 AFTER，因为它将始终执行。

如果要取消级联动作但保留 FK，只需将 FK 动作设置为 NO ACTION。

# dom - ExtJS 4 在 grid.Panel 中使用 itemclick 函数

> ID：10224620
> 
> 赞同：0
> 
> 时间：2012-04-19T08:47:18.757
> 
> 标签：dom, extjs

我在用着

> itemclick：函数（网格、记录、项目、索引、e）

在我的

> Ext.create('Ext.grid.Panel', {..

我在谷歌上搜索了将近 2 个小时，我发现越来越多的方法可以选择一件事或做另一件事。例如

> console.log(grid.getSelectionModel());

你得到了一些东西，但是我可以在哪里找到所有可用的方法以及如何将它们与另一个连接以获得我想要的效果。我只是感到迷失在这里，不知道从哪里开始。我想这是在 DOM 中导航的 ExtJS 方式，但是是否有一个地方可以描述所有方法以及它们的用途以及导航所有这些的方式 - 只是我错过的 smoe 标准 JavaScript 或其他东西ExtJS 特定...

谢谢

勒龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:16:07.497

希望你现在已经找到了，但是 API 文档在[**这里**](http://docs.sencha.com/ext-js/4-0/)。每个 ExtJS 对象都列在带有齿轮外观图标的选项卡下。单击一个将打开该对象的选项卡及其所有配置选项、属性和方法。

# jquery - 在某些页面调用js

> ID：10224624
> 
> 赞同：1
> 
> 时间：2012-04-19T08:47:53.153
> 
> 标签：jquery, scripting, include

我有很多js函数

```
mysitename.Nav();
mysitename.Tabs();
mysitename.Overlay();
mysitename.AnimateIntro(); 
```

现在其中一些是在某些页面上触发的。如何在特定页面上包含某些功能？当然，我可以在标题中使用不同的脚本，但想知道是否有人有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:59:21.743

最简单的方法是包含所有函数，检查[window.location](https://developer.mozilla.org/en/DOM/window.location)并在此基础上调用相关函数。

更复杂的替代方法是检查`window.location`，将`<script type="text/javascript" src="my_js.js"></script>`标签添加到您的 DOM，并在加载后调用该函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T08:49:14.457

单独的 JS 执行不同的文件，并且只包含您需要的文件。

# mysql - 将 EAV 数据视为 3NF 的 SQL 查询？（Drupal 6 配置文件值）

> ID：10224626
> 
> 赞同：1
> 
> 时间：2012-04-19T08:48:01.000
> 
> 标签：mysql, database, drupal, entity-attribute-value, 3nf

我根据实体-属性-值模式 (EAV) 将数据存储在 MySQL 数据库中，特别是来自 Drupal 6 的用户配置文件值。我需要一个 SQL 查询或视图才能将数据作为普通关系表获取。这些表具有以下布局：

```
Table: users
user_id   username 
---------------------
1         steve
2         michelle

Table: profile_fields
field_id   field_name
------------------------
1          first_name
2          last_name

Table: profile_values
field_id   user_id   value
---------------------------
1          1         Steve
2          1         Smith
1          2         Michelle
2          2         Addams 
```

我需要以某种方式从查询中获得以下结果：

```
user_id    first_name    last_name
-----------------------------------
1          Steve         Smith
2          Michelle      Addams 
```

我知道在一般情况下，在单个 SQL 查询中这是不可能做到的。但这不是一般情况，我有两个优点：

*   我知道“profile_fields”表的内容，并且我 100% 确定在使用此查询的时间段内该数据不会改变。
*   它不必在单个查询中 - 它可以是一个查询、一些用于分析结果的 PHP 代码，然后是另一个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:40:16.807

这可以在使用列子查询的 sql 查询中完成，如下所示：

```
SELECT 
  u.user_id, 
  (select value from profile_values f1 WHERE f1.field_id=1 and u.user_id=f1.user_id) AS first_name, 
  (select value from profile_values f2 WHERE f2.field_id=2 and u.user_id=f2.user_id) AS last_name
  FROM users u 
```

# android - 无法在 supportInvalidateOptionsMenu() 上实例化类；

> ID：10224629
> 
> 赞同：1
> 
> 时间：2012-04-19T08:48:07.577
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，我希望每次单击项目时都重建 ActionBar。对于那个我使用

```
supportInvalidateOptionsMenu(); 
```

每次调用它时，我都会收到警告（用 MenuInflater 标记）

```
Cannot instantiate class: @16974108
java.lang.ClassNotFoundException: @16974108 in loader dalvik.system.PathClassLoader[/data/app/de.abc.android.reader-1.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
    at com.actionbarsherlock.view.MenuInflater$MenuState.newInstance(MenuInflater.java:463)
    at com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:366)
    at com.actionbarsherlock.view.MenuInflater.parseMenu(MenuInflater.java:147)
    at com.actionbarsherlock.view.MenuInflater.inflate(MenuInflater.java:97)
    at de.abc.android.reader.ui.PaperPlayer.onCreateOptionsMenu(PaperPlayer.java:102)
    at com.actionbarsherlock.app.SherlockFragmentActivity.onCreatePanelMenu(SherlockFragmentActivity.java:231)
    at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:543)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:463)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:269)
    at com.actionbarsherlock.app.SherlockFragmentActivity.invalidateOptionsMenu(SherlockFragmentActivity.java:138)
    at com.actionbarsherlock.app.SherlockFragmentActivity.supportInvalidateOptionsMenu(SherlockFragmentActivity.java:144)
    at de.abc.android.reader.ui.PaperPlayer.setFontSizeUp(PaperPlayer.java:251)
    at de.abc.android.reader.ui.PaperPlayer.onOptionsItemSelected(PaperPlayer.java:118)
    at com.actionbarsherlock.app.SherlockFragmentActivity.onMenuItemSelected(SherlockFragmentActivity.java:279)
    at com.actionbarsherlock.ActionBarSherlock.callbackOptionsItemSelected(ActionBarSherlock.java:587)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.onMenuItemSelected(ActionBarSherlockCompat.java:513)
    at com.actionbarsherlock.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:738)
    at com.actionbarsherlock.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:148)
    at com.actionbarsherlock.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:879)
    at com.actionbarsherlock.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:510)
    at com.actionbarsherlock.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:145)
    at android.view.View.performClick(View.java:3110)
    at android.view.View$PerformClick.run(View.java:11934)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:132)
    at android.app.ActivityThread.main(ActivityThread.java:4135)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method) 
```

这里是构建 ActionBar 的方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.paperplayer, menu);
    if (isBiggestFontsize(getCurrentFontsize())) menu.findItem(R.id.ic_action_textup).setEnabled(false);
    if (isSmallestFontsize(getCurrentFontsize())) menu.findItem(R.id.ic_action_textdown).setEnabled(false);     
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // app icon in action bar clicked; go home
        Intent intent = new Intent(this, Library.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
    case R.id.ic_action_textup:
        setFontSizeUp();
        return true;
    case R.id.ic_action_textdown:
        setFontSizeDown();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

它运作良好，但我总是收到这个警告，这让我思考......

感谢帮助！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-25T11:16:07.087

你试试这种类型的菜单使用

快速下降，您添加 Actionbar libeler 项目并在扩展 SherlockFragmentActivity 中调用您的活动

```
public boolean onCreateOptionsMenu(Menu menu) {

        menu.add(0, menuHome, 1, getString(R.string.home))
                .setIcon(R.drawable.home)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        menu.add(0, menuAction, 1, getString(R.string.action))
                .setIcon(R.drawable.action)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        SubMenu subMenuAdd = menu.addSubMenu(0, menuAdd, 1,
                getString(R.string.add)).setIcon(R.drawable.add);
        subMenuAdd.add(0, menuAaddFence, 1, getString(R.string.add_fence));
        subMenuAdd.add(0, menuEditFence, 1, getString(R.string.edit_fence));
        subMenuAdd.add(0, menuDeleteFence, 1, getString(R.string.delete_fence));
        subMenuAdd.add(0, menuShowAllFence, 1, getString(R.string.show_all_fence));
        MenuItem menuItem = subMenuAdd.getItem();
        menuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS
                | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return super.onCreateOptionsMenu(menu);
    }

    /** Perform selected functionality in to the menu **/
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case menuHome:

            Intent refresh = new Intent(this, HomeActivity.class);
            startActivity(refresh);
            this.finish();

            break;

        case menuAction:
            intent = new Intent(HomeActivity.this, Actionactivity.class);
            startActivity(intent);
            break;

        case menuAaddFence:
            AddShowDialog();
            break;

        case menuDeleteFence:
            DeleteFenceDialog();

            break;

        case menuShowAllFence:
            intent = new Intent(HomeActivity.this, ShowAllFenceActivity.class);
            startActivity(intent);

            break;

        case menuEditFence:
            EditFenceDialog();
            break;

        default:
            break;
        }
        return super.onOptionsItemSelected(item);
    } 
```

# java - 如何使用 Maven 创建具有完整依赖项的独立应用程序？

> ID：10224631
> 
> 赞同：10
> 
> 时间：2012-04-19T08:48:26.070
> 
> 标签：java, maven, maven-assembly-plugin, maven-jar-plugin

我有一个使用 Maven 2 构建的桌面 Java 应用程序（但如果有帮助，我可以升级到 Maven 3），并带有许多开源依赖项。我现在正在尝试将其打包为独立的，以使其可供最终用户使用，而无需安装 maven 或其他任何东西。

我已经成功地使用 maven-assembly-plugin 构建了一个包含所有依赖项的 jar，但这并不是我真正想要的，因为在使用 LGPL 库时，您打算将您正在使用的库作为单独的 jar 重新分发。

我希望 Maven 构建一个 zip，其中包含一个带有我的代码的 jar 和一个`MANIFEST.MF`引用我需要的其他 jar 以及其他 jar 的 jar。这似乎是标准做法，但我不知道该怎么做。

这是我的 pom 的摘录

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <encoding>UTF-8</encoding>
                    <compilerVersion>1.6</compilerVersion>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <argLine>-Dfile.encoding=UTF-8</argLine>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>com.company.widget.Main</mainClass>
                            <packageName>com.company.widget</packageName>
                            <addClasspath>true</addClasspath>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <mainClass>com.company.widget.Main</mainClass>
                            <packageName>com.company.widget</packageName>
                            <addClasspath>true</addClasspath>
                        </manifest>
                    </archive>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

编辑：采用 Kals 的想法

创建了一个名为descriptor.xml的文件

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>distribution</id>
    <formats>
        <format>zip</format>
    </formats>
    <dependencySets>
        <dependencySet>
            <scope>runtime</scope>
            <outputDirectory>lib</outputDirectory>
            <unpack>false</unpack>
        </dependencySet>
    </dependencySets>
</assembly> 
```

和 pom 包含：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <descriptors>
            <descriptor>assembly.xml</descriptor>
        </descriptors>
        <archive>
            <manifest>
                <mainClass>com.company.widget.cmdline.Main</mainClass>
                <packageName>com.company.widget</packageName>
                <addClasspath>true</addClasspath>
            </manifest>
        </archive>
    </configuration>
    <executions>
        <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

现在维护jar并将它们全部放在lib文件夹中，包括我自己的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:21:46.497

您应该查看[Maven Appassembler 插件](http://www.mojohaus.org/appassembler/appassembler-maven-plugin/)。使用它可以获得比滚动自己的程序集更强大的包。

它为 Unix 和 Windows 生成有用的启动脚本，允许您设置预定义的 JAVA VM 选项、命令行参数和类路径。

它还有一个配置目录的概念，您可以在其中复制用户以后可以更改的默认配置。您还可以将配置目录设置为在类路径上可用。

依赖项可以保存在 Maven 样式的“repo”中，或者您可以使用平面样式的“lib”目录。

您仍然需要程序集插件来创建 zip 或 tar 存档。

这是一个示例 appassembler 配置：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>appassembler-maven-plugin</artifactId>
    <version>1.2.2</version>
    <configuration>
        <programs>
            <program>
                <mainClass>com.mytools.ReportTool</mainClass>
                <name>ReportTool</name>
            </program>
        </programs>
        <assembleDirectory>${project.build.directory}/ReportTool</assembleDirectory>
        <repositoryName>lib</repositoryName>
        <repositoryLayout>flat</repositoryLayout>
    </configuration>
    <executions>
        <execution>
            <id>assembly</id>
            <phase>package</phase>
            <goals>
                <goal>assemble</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

要获取 zip 存档，我使用以下程序集：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>bin</id>
    <formats>
        <format>zip</format>
    </formats>
    <fileSets>
        <fileSet>
            <directory>${project.build.directory}/ReportTool</directory>
            <outputDirectory>/</outputDirectory>
            <includes>
                <include>/**</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:00:38.483

尝试创建一个自定义程序集描述符并添加一个dependencySet，并确保您指定，解压缩为false。

使用它作为程序集描述符，

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>distribution</id>
    <formats>
        <format>zip</format>
    </formats>
    <dependencySets>
        <dependencySet>
            <scope>runtime</scope>
            <outputDirectory>lib</outputDirectory>
                        <useProjectArtifact>false</useProjectArtifact>
            <unpack>false</unpack>
        </dependencySet>
    </dependencySets>
</assembly> 
```

将此文件存储为 src/main/assembly/assembly.xml 并像这样在 pom.xml 中更新您的程序集插件配置。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <id>assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>attached</goal>
                    </goals>
                    <configuration>
                           <descriptor>${basedir}/src/main/assembly/assembly.xml</descriptor>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

如果您需要更多内容，这里是程序集描述符参考

[http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:02:34.527

据我所知，只要不受影响，也可以将 LGPL 库重新分发到您自己的包中。maven 程序集插件创建一个 jar，其中包含存档的 lib 文件夹中的原始 jar。到目前为止，您正在履行 LGPL。

也许[这个问题](https://softwareengineering.stackexchange.com/questions/128455/about-lgpl-open-source-license)提供了有关该主题的更多信息。

（免责声明：我不是律师，所以请交叉检查此信息；））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:27:04.060

在 pom.xml 中添加以下插件。检查 mainClass、classpathPrefix、addClasspath 标记处的值。

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>org.apache.camel.spring.Main</mainClass>
                        <classpathPrefix>lib/</classpathPrefix>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <descriptors>
                    <descriptor>src/assembly/some-assembly.xml</descriptor>
                </descriptors>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

在 src/assembly 下创建 some-assembly.xml，如下所示。

```
<assembly
xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
<id>distribution</id>
<formats>
    <format>zip</format>
</formats>
<includeBaseDirectory>true</includeBaseDirectory>
<fileSets>
    <fileSet>
        <directory>${project.build.directory}</directory>
        <outputDirectory>/</outputDirectory>
        <includes>
            <include>*.jar</include>
        </includes>
    </fileSet>
</fileSets>
<dependencySets>
    <dependencySet>
        <scope>runtime</scope>
        <outputDirectory>/lib</outputDirectory>
        <useProjectArtifact>false</useProjectArtifact>
        <unpack>false</unpack>
    </dependencySet>
</dependencySets> 
```

注意useProjectArtifact 标志为false，unpack 标志为false。如果不需要 zip 文件中的根文件夹，则可以将 includeBaseDirectory 设置为 false。

这将创建 name-version-distribution.zip 文件。在 zip 文件中，会有文件夹名称-版本。在此文件夹中，将存在包含所有依赖项 jar 的可执行 jar 和 lib 文件夹。检查可执行 jar 的 manifest.MF 文件。它包含主类和类路径信息。

# c# - 我如何在 C# 中做到这一点？

> ID：10224633
> 
> 赞同：0
> 
> 时间：2012-04-19T08:48:27.933
> 
> 标签：c#, xml, vb.net, xml-literals

以下单元测试在 VB.Net 中通过

```
<Test()> _
Public Sub VB_XMLLiteral_SyntaxRocks_Test()
    Dim XML = <Doc>
                  <Level1>
                      <Item id="1"/>
                      <Item id="2"/>
                  </Level1>
                  <Level1>
                      <Item id="3"/>
                      <Item id="4"/>
                  </Level1>
              </Doc>
    Assert.AreEqual(4, XML.<Level1>.<Item>.Count)
End Sub 
```

**我如何在 C# 中断言同样的事情？**

为了澄清，我想知道如何表达......

```
XML.<Level1>.<Item> 
```

...在 C# 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:52:02.217

```
Assert.AreEqual(4, XML.Elements("Level1").Elements("Item").Count()); 
```

当然`XML`需要是一个`XElement`（这也是VB文字产生的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:03:27.310

使用 LINQ to XML：

```
var XML = new XElement("Doc",
    new XElement("Level1",
        new XElement("Item", 
            new XAttribute("Id", 1)),
        new XElement("Item", 
            new XAttribute("Id", 2))),
    new XElement("Level1",
        new XElement("Item", 
            new XAttribute("Id", 3)),
        new XElement("Item", 
            new XAttribute("Id", 4))));

Assert.AreEqual(4, 
   (from element in XML.Elements("Level1").Elements("Item")
    select element).Count()); 
```

# ios - 如何将额外的参数传递给自定义 segue？

> ID：10224638
> 
> 赞同：4
> 
> 时间：2012-04-19T08:48:47.210
> 
> 标签：ios, xcode, segue

我一直在使用 iOS 中的自定义 segues，并尝试尽可能多地使用它们，以便在我的故事板中可视化应用程序的完整工作流程。当我创建一个popover segue时，它知道触发segue的视图（它必须为了定位popover），但是当我创建一个自定义segue时，我找不到做同样的方法。有没有办法访问在自定义 segue 中启动 segue 的视图？此外，有没有一种方法可以将自定义参数从 Interface Builder 传递给 segue，就像您可以将运行时参数传递给视图控制器一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:24:30.050

您可以通过实现以下方法访问已触发自定义 segue 的视图：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

...在您的视图控制器上。

在该方法中，如果您使用 Interface Builder 链接它，则 sender 的值将是触发 segue 的视图。实现该方法时，建议通过以下方式查询触发了什么segue：

```
if ([[segue identifier] isEqualToString:@"segueid"]) 
```

...其中“segueid”将是您在 Interface Builder 中为您的 segue 提供的标识符。

关于你的第二个问题，我不知道有什么方法可以在 Interface Builder 中为 segue 指定参数，但你可以使用相同的“prepareForSegue”方法，在运行时从视图控制器传递它们。

假设您的自定义 segue 有一个名为**animationStyle的属性**

如果是**perform**方法，你可以有以下内容：

```
- (void)perform
{
    switch (self.animationStyle) {
        case 0:
            // TODO Perform animation type 0
        case 1:
            // TODO Perform animation type 1
    }
} 
```

然后，假设您有几个 View Controller 想要在其中使用该自定义 segue。在第一个中，您可以实现 performSegue 方法，例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"yourCustomSegueID"]) {
        ((YourCustomSegueClass *)segue).animationStyle = 0;
    }
} 
```

在第二个视图控制器中，您可以像这样实现它：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"yourCustomSegueID"]) {
        ((YourCustomSegueClass *)segue).animationStyle = 1;
    }
} 
```

...如此有效，您正在重用相同的自定义 segue 类以获得不同的效果。IB 确实不会让您直接配置 segue，但据我所知，这是没有办法的。

# jquery - jQuery - ajax 调用和动画

> ID：10224640
> 
> 赞同：0
> 
> 时间：2012-04-19T08:48:53.247
> 
> 标签：jquery, ajax

我试图在 ajax 调用后对 div 产生一些影响。这是我用于 ajax 的 jQuery，ajax 效果很好，但我没有尝试从脚本中引入任何效果。我怎样才能使它成为可能？我希望新数据显示在具有 slideDown 效果的 div 中。

```
function item_submit(){
    $('#item_item_button').click(function() {
        $.ajax({
            type: 'POST',
            url: "/item/create",
            data: $('#create_item').serialize(),
            error: function(){  },
            success: function(data) {
                $("#item_form").hide();
                $('#view_item').html(data);
            },
            complete: function() {
                $('#view_item').slideDown();
            }
        });
        return false;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:09:06.327

试试下面的代码：

```
function item_submit(){
    $('#item_item_button').click(function() {
        $.ajax({
            type: 'POST',
            url: "/item/create",
            data: $('#create_item').serialize(),
            error: function(){  },
            success: function(data) {
               $('#item_form').before(data);
               $('#view_item').hide().slideDown('slow');

            }

    });
    return false;
}); 
```

}

# jenkins - 为 Jenkins 使用的 .NET 解决方案配置构建文件

> ID：10224641
> 
> 赞同：0
> 
> 时间：2012-04-19T08:48:53.950
> 
> 标签：jenkins

我正在尝试为将由 Jenkins 构建的解决方案配置 .build 文件。解决方案可以正确构建，但 Jenkins 需要花费很长时间才能为其创建安装程序。这是当前使用的文件：

```
<?xml version="1.0"?>
<project name="SampleApp" default="Install"      xmlns="http://nant.sf.net/schemas/nant.xsd" >
<property name="basename" value="SampleApp"/>
<property name ="jenkinshome" value ="C:\Program Files\Jenkins\jobs\" />
<property name="OutputPath" value="bin/Release"/>
<property name="Release" value="true"/>
<property name="SampleApp.exe.config" value="Release" />
<property name="SolutionFileName" value = "SampleApp.sln" />
<property name="TargetFramework" value="${framework::get-target-framework()}" />
<target name="clean">
<delete>
  <fileset>
    <include name="${OutputPath}/${basename}.exe"/>
    <include name="${OutputPath}/${basename}.pdb"/>
  </fileset>
 </delete>
</target>

<target name="build" >
<mkdir dir="${OutputPath}" />
<echo message= "${framework::get-assembly-directory(TargetFramework)}" />
<exec program="C:\WINDOWS\Microsoft.NET\Framework\v3.5\msbuild.exe"
          commandline=''
            workingdir="." />
</target>

<target name ="Install" depends="build">
<exec program="C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe">
  <arg value ="C:\Program Files\Jenkins\jobs\Legacy Data         Adapter\workspace\SampleApp\SampleApp.vdproj /rebuild Release">
  </arg>
</exec>

</target>

</project> 
```

我是 Jenkins 和 CI 的整个概念的新手。感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:03:16.913

从这里得到了很多帮助[构建文件的解剖](http://mutelight.org/articles/the-anatomy-of-a-nant-build-file)

解决了。

问候。

# android - 更改项目的位置

> ID：10224642
> 
> 赞同：0
> 
> 时间：2012-04-19T08:49:11.183
> 
> 标签：android, layout

我的 xml 文件列出了左侧的项目，我想将它们的位置更改为右侧。我试过了`android:layout_gravity="right"`，但是没有用！，我还有 item.xml 和 list_item.xml。下面的代码是 list.xml

```
 <ScrollView android:id="@+id/edit_layout"
        android:layout_width="fill_parent" 
          android:layout_height="fill_parent"
        android:visibility="gone"
        >       
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingTop="5sp"
            android:paddingLeft="10sp"
            android:paddingRight="15sp"
            >
            <TextView
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:text="@string/list_descption_label"
                android:gravity="left"
            />

            <TextView
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:text="@string/list_username_label"
                android:gravity="left"
            />

            <TextView
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:text="@string/list_password_label"
                android:gravity="left"
            />
                        </LinearLayout>
    </ScrollView>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:55:47.440

复制此代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/edit_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="10sp"
        android:paddingRight="15sp"
        android:gravity="right"
        android:paddingTop="5sp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:text="hello" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:text="hai" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:text="nams" />
    </LinearLayout>
</ScrollView>

<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

</FrameLayout>

</RelativeLayout> 
```

# port - 在安装过程中使用 Inno Setup 打开端口

> ID：10224646
> 
> 赞同：0
> 
> 时间：2012-04-19T08:49:13.473
> 
> 标签：port, inno-setup

如何从 innosetup 安装打开和设置 Windows 防火墙中的端口？

我喜欢避免手动操作。

如果相关，它的 PORT:2508 应该是“TCP”

谢谢

# mysql - Mysql时间戳默认值

> ID：10224647
> 
> 赞同：4
> 
> 时间：2012-04-19T08:49:14.277
> 
> 标签：mysql, database

我对 Mysql 真的很陌生。是否可以以某种方式执行以下操作？Mysql 会按预期抛出语法错误，但是我应该更改哪些内容才能使其正常工作？

```
CREATE TABLE tracksession(ID INT NOT NULL AUTO_INCREMENT,
             user_id INT DEFAULT NULL,
             leave_mode ENUM('loggedout', 'timedout') DEFAULT NULL,
             login TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
             logout TIMESTAMP DEFAULT ADDDATE(CURRENT_TIMESTAMP, INTERVAL 20 MINUTE),
             PRIMARY KEY(ID)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:52:54.710

不，你不能这样做

```
DEFAULT ADDDATE(CURRENT_TIMESTAMP, INTERVAL 20 MINUTE), 
```

[手册中的解释](http://dev.mysql.com/doc/refman/5.1/en/data-type-defaults.html)：

> 数据类型规范中的 DEFAULT value 子句指示列的默认值。除了一个例外，默认值必须是一个常量；它不能是函数或表达式。

必须是常数而不是函数...

# templates - Virtuemart 产品详情页面与主页相同

> ID：10224653
> 
> 赞同：0
> 
> 时间：2012-04-19T08:49:55.850
> 
> 标签：templates, joomla, virtuemart

我是 Joomla 和 Virtuemart 的新手，但我进展顺利。一个问题认为，我的产品详细信息页面被视为主页。换句话说，我只想为主页使用不同的模板，但它也适用于产品详细信息页面。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:14:33.533

You can use different templates for different sections in your website. To do that you have to choose a default template and assign a different one to a menu item.

Go to Site --> Template Manager. You will see here a list with your templates.

You can make the Template1 default for example. To do that click the radio button on the left of the Template1\. On the top click "Default". This template will be the default template. When a user will enter your site will see the Template1.

Now you can assign the Template2 to your homepage. Click the radio button on the left of the Template2\. From the top click "Assign". You will see a list of your menu items. Select your homepage menu item from the list. Click "Save". Now your "Home" will show the Template1.

You can use this method with many templates.

In your example, the default template will be the one you cant to use for product details and you should assign another on to the homepage.

# asp.net - 使用 XML 绑定下拉列表

> ID：10224655
> 
> 赞同：0
> 
> 时间：2012-04-19T08:50:07.450
> 
> 标签：asp.net, xml, linq, drop-down-menu, data-binding

我是 ASP.NET 的新手，

我正在制作国家，州下拉列表。

例如：对于特定国家，我将从 XML 文件中读取该国家的状态。

这是我的代码片段`XMLFile.xml`

```
<?xml version="1.0" encoding="utf-8" ?>
<countrys>

  <country>India</country>
  <state>
    <text>Maharashtra</text>
    <text>Kashmir</text>
    <text>Goa</text>   
  </state>

  <country>Sri Lanka</country>
  <state>
    <text>Kanady</text>
    <text>Colombo</text>
    <text>Galle</text> 
  </state>

  <country>Australia</country>
  <state>
    <text>Sydney</text>
    <text>Perth</text>
    <text>Melbourne</text>
  </state>

  <country>South Africa</country>
  <state>
    <text>Capetown</text>
    <text>Johanusburg</text>
    <text>Durban</text>
  </state>
</countrys> 
```

和代码`Country.aspx.cs`

```
 public partial class Country : System.Web.UI.Page
   {
       protected void Page_Load(object sender, EventArgs e)
       {

            if (!IsPostBack)
            {
                LoadDropdown();
            }
     }

    protected void LoadDropdown()
    {
            DataSet ds = new DataSet();
            ds.ReadXml (Server.MapPath("XMLFile.xml"));

            DropDownListCountry.DataTextField = "country";

            DropDownListCountry.DataSource = ds;
            DropDownListCountry.DataBind();
            DropDownListCountry.Items.Insert(0,new ListItem(" Select ","0"));
        }
     }

    protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
    {
            string  st = (DropDownListCountry.SelectedIndex).ToString();

             XDocument main = XDocument.Load(@"XMLFile.xml");

        var query = from user in main.Descendants("country_text")
                where st == user.Element("state").Value
                select user;

        DropDownListState.DataSource = query;
        DropDownListState.DataBind();     
    }
} 
```

**错误：** DataBinding：“System.Data.DataRowView”不包含名为“country”的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:56:52.283

将其绑定到 country_text

```
DropDownListCountry.DataTextField = "country_text"; 
```

您的数据集中有三个表。国家、州和文本。数据集中保存国家值的字段是 country_text 这就是你应该绑定的

# objective-c - 无法使用自定义图像进行 MKAnnotationView 动画放置

> ID：10224661
> 
> 赞同：1
> 
> 时间：2012-04-19T08:50:36.477
> 
> 标签：objective-c, mkmapview, mkannotationview

我已成功更改 MKAnnotationView 以将我的自定义图像与以下代码片段一起使用。但是，我的问题是，一旦我使用启用默认图钉动画

```
 annotationView.animatesDrop = YES; 
```

自定义图像消失了，使用了默认的红色图钉。有没有什么办法解决这一问题？谢谢

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(MyAnnotation  *)annotation
 {
    if  ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;
// try to dequeue an existing pin view first
static NSString* identifier = @"AnnotationIdentifier";

MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if (annotationView == nil) {
    annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    //!!!!!!!annotationView.animatesDrop = YES;!!!!!!!!!!
} else {
    annotationView.annotation = annotation;
}

  annotationView.image = [UIImage imageNamed:@"bla.png"];
 return annotationView;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:14:25.860

像这样尝试：

```
- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    self.view.backgroundColor = [UIColor grayColor];
    [self.view setClipsToBounds:YES];

    MKMapView *mapView = [[MKMapView alloc] initWithFrame:CGRectMake(10, 10, self.view.frame.size.width - 20, self.view.frame.size.height - 20)];
    mapView.delegate = self;
    [mapView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    mapView.mapType = MKMapTypeStandard;
    [self.view addSubview:mapView];
}

#pragma mark - MKMapView Delegate Implementation

- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views {   
    for (MKAnnotationView *pin in views) {
        //UIButton *detailsButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        //[detailsButton addTarget:self action:@selector(detailsButtonAct:) forControlEvents:UIControlEventTouchUpInside];

        pin.canShowCallout = YES;
        //pin.rightCalloutAccessoryView = detailsButton;
        CGRect endFrame = pin.frame;
        pin.frame = CGRectOffset(pin.frame, 0, -230);

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.45f];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        pin.frame = endFrame;

        [UIView commitAnimations];
    }
}
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation {
    static NSString *AnnotationViewID = @"annotationViewID";
    MKAnnotationView *annotationView = (MKAnnotationView *)[map dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil)
        annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID] autorelease];

    annotationView.image = [UIImage imageNamed:@"map_pin.png"];
    annotationView.annotation = annotation;

    [annotationView addObserver:self forKeyPath:@"selected" options:NSKeyValueObservingOptionNew context:@"pinSelected"];
    [annotationView setEnabled:YES];

    return annotationView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:13:25.187

如果有人想以基于块的方式而不是开始/提交方式来执行此操作（从 IOS 4 开始推荐）：

```
...
[UIView animateWithDuration:0.5f
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{
                         [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                         pin.frame = endFrame;
                     }
                     completion:^(BOOL finished){
                         if (finished) {
                             // Do some action upon completion of animation
                         }
                     }]; 
```

感谢大魔的回答，真的很有帮助

# javascript - Backbone.js 和 mod 重写

> ID：10224664
> 
> 赞同：8
> 
> 时间：2012-04-19T08:50:37.693
> 
> 标签：javascript, apache, mod-rewrite, backbone.js, pushstate

因此，我正在玩骨干，并且已经到达了加载使用 pushState 的直接页面无法正常工作的地方。如果我尝试访问 my.url.com/login，它会给我一个未找到的页面，因为它直接不存在。我有以下重写规则：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule (.*) index.html [L,QSA] 
```

但是这似乎不起作用（认为我收到了一个错误的请求而不是找不到）。如何通过 mod rewrite 正确加载 pushState url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:52:48.390

这实际上是我第一次阅读新的历史 API 以及 Backbone 如何使用它——非常酷的东西。

要解决您的错误请求问题，您需要做的就是在前面加上一个`/`before `index.html`。就我而言，它在内部正确重定向并按照您的预期传递查询字符串。

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.html [L,QSA] 
```

# matrix - 在matlab / octave中的矩阵的每2个元素之间添加零

> ID：10224673
> 
> 赞同：3
> 
> 时间：2012-04-19T08:51:07.020
> 
> 标签：matrix, octave

我对如何在矩阵中添加零的行和列感兴趣，使其看起来像这样：

```
 1 0 2 0 3
1 2 3         0 0 0 0 0
2 3 4  =>     2 0 3 0 4
5 4 3         0 0 0 0 0
              5 0 4 0 3 
```

实际上，我对如何有效地做到这一点很感兴趣，因为如果您使用大矩阵，则遍历矩阵并添加零会花费大量时间。

更新：

非常感谢你。

现在我试图用他们的邻居的总和替换零：

```
 1 0 2 0 3     1 3 2 5 3
1 2 3         0 0 0 0 0     3 8 5 12... and so on
2 3 4  =>     2 0 3 0 4 =>
5 4 3         0 0 0 0 0
              5 0 4 0 3 
```

如您所见，我正在考虑一个元素的所有 8 个邻居，但是再次使用 for 和遍历矩阵会使我的速度减慢很多，有没有更快的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:58:52.087

让你的小矩阵被调用`m1`。然后：

```
m2 = zeros(5)

m2(1:2:end,1:2:end) = m1(:,:) 
```

显然，这与您的示例紧密相关，我将把它留给您进行概括。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T07:54:56.353

这里有两种方法可以完成问题的第 2 部分。第一个明确地进行移位，第二个使用 conv2。第二种方式应该更快。

```
M=[1 2 3; 2 3 4 ; 5 4 3];

% this matrix (M expanded) has zeros inserted, but also an extra row and column of zeros
Mex = kron(M,[1 0 ; 0 0 ]); 

% The sum matrix is built from shifts of the original matrix
Msum = Mex + circshift(Mex,[1 0]) + ...
             circshift(Mex,[-1 0]) +...
             circshift(Mex,[0 -1]) + ...
             circshift(Mex,[0 1]) + ...
             circshift(Mex,[1 1]) + ...
             circshift(Mex,[-1 1]) + ...
             circshift(Mex,[1 -1]) + ...
             circshift(Mex,[-1 -1]);

% trim the extra line
Msum = Msum(1:end-1,1:end-1)

% another version, a bit more fancy:
MexTrimmed = Mex(1:end-1,1:end-1);
MsumV2 = conv2(MexTrimmed,ones(3),'same') 
```

输出：

```
Msum =

1    3    2    5    3
3    8    5   12    7
2    5    3    7    4
7   14    7   14    7
5    9    4    7    3

MsumV2 =

1    3    2    5    3
3    8    5   12    7
2    5    3    7    4
7   14    7   14    7
5    9    4    7    3 
```

# c - 在 cgi 中调用 route -n

> ID：10224674
> 
> 赞同：1
> 
> 时间：2012-04-19T08:51:08.480
> 
> 标签：c, cgi, routes

我试图在 cgic 代码中调用 route -n 但 popen 返回 null。我尝试了一个简单的 C 代码，它可以工作，但是当我把它放在 cgi 中时它返回 null。

```
 printf("Content-type: text/html\r\n");
       printf("\r\n"); 
        ....
        ..
        stream = popen("route -n", "r");
        while ( fgets(buffer, 100, stream) != NULL )
        {........} 
```

它不会进入while循环。我可以调用“cat”“netstat”等，但 route -n 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:05:46.347

如果我正在查看我的 linux 框，我看到它`route`位于下面`/sbin/route`，因此不是`$PATH`标准用户的一部分（虽然它在我的系统上对他们来说是可执行的）。

`cat`并且`netstat`位于下方`/bin/`，因此是`$PATH`.

```
popen("/sbin/route -n", "r"); 
```

将提出该过程。

如果这不是选项，请添加`/sbin/`到您的路径中，它也适用于您的示例。

# java - 在类层次结构中混合 Java 1.4 和 1.6 字节码

> ID：10224677
> 
> 赞同：1
> 
> 时间：2012-04-19T08:51:17.180
> 
> 标签：java, bytecode

先说问题，故事如下：

在类层次结构中混合不同的字节码版本是否安全？有哪些风险？

对于一个案例，C类扩展B，B类扩展A类。A类实现接口I。我的问题将涉及以下示例场景：

*   Class A 编译为 Java 1.6 字节码，并具有泛型等 1.6 特性。继承者 B 和 C 被编译为 1.4 字节码。
*   接口我编译为1.6，而实现器编译为1.4。
*   其他涉及不同版本字节码的奇异继承场景。

我已经尝试了我能想象到的许多场景，它似乎运行得很好。但是我仍然有想在这里提问的冲动，因为我只了解表面上的 Java；我知道如何编写和调整 Java，但并不真正知道幕后发生了什么。

现在对于那些无法自拔的人来说，“你为什么需要这样做？？？”。

我在一个项目中评估通过 RMI 连接到 EJB 2 的传统 Java 1.4 Swing 应用程序迁移到连接到在 1.6 之上运行的较新版本的 App Server 的 Java 1.6 Swing。J2EE 平台仍将是 1.4 (EJB 2)。

迁移不会“将所有内容重新编译到 1.6”，而是“将新功能编码并编译到 1.6”。他们做事的方式是这样的：他们在 CVS 中只有一条路径，每个人都在那里提交。没有任何标签/分支来获取生产代码。每当需要添加新功能时，他们从生产服务器获取 JAR，分解它们，根据需要替换或添加新类，重新打包 jar，将它们放回服务器。因此，如果他们将使用 Java 6 编译并使用上述方法进行部署，将会有很多 1.4 和 1.6 字节码的奇异混合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:56:24.867

您可以使用 Java 6 进行编译，但使用编译器设置以 1.4 为目标。我们曾经为一个迁移项目这样做过。如果/当 1.4 消失时，您将再次更改编译器设置并以 1.6 为目标。

保持目标版本明确还意味着您可以升级您的 SDK，而不必担心您的 JAR 文件对旧版 JVM 不可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:01:56.937

Java 1.0 和 Java 6 之间的 JVM 字节码没有显着差异。在 Java 7 中，它们添加了一条新指令。呜呼。

字节码的工作方式几乎没有变化

*   JVM 不支持嵌套类访问外部类的私有成员，这通过生成的代码来工作。
*   JVM 不支持对泛型的运行时检查，例如，您不能`new T()`在 T 是泛型的情况下进行检查。

基本上，它们使 JVM 更智能、更快，但直到最近才不惜一切代价避免改变字节码工作方式的模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T09:09:46.187

我正在使用 Sun JVM 1.5 在 Tomcat 上维护一个混合了 1.4（旧库 jar）和 1.5（我的修复和东西）类的环境，它运行良好。

但是，对于 RMI，如果客户端和服务器具有不同的类版本，您可能会遇到麻烦，因为服务器可能会检查类版本（我遇到了这个问题）。

找出答案的最佳方法是在小规模上进行概念验证类型的项目。

一个友好的提醒，你在这里为自己挖了一个很大的洞:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T03:04:48.723

只要您不使用反射，不同字节码版本可能遇到的唯一主要问题就是`ACC_SUPER`标志。

在非常早期的版本中，未正确处理超类方法的调用。当他们修复它时，他们在类文件格式中添加了一个新标志来`ACC_SUPER`启用它，这样依赖于旧的、损坏的行为的应用程序就不会受到影响。自然，使用不包含此标志的类可能会导致问题。

然而，这是古老的历史。在 1.4 和更高版本中编译的每个类都会有标志，所以这不是问题。字节码方面，1.4 和 1.6 之间唯一的主要区别是添加了可选属性，用于存储有关内部类、泛型、注释等的元数据。

然而，这些并不直接影响字节码的执行。这些产生影响的唯一方法是通过反射访问它们。例如，`java.lang.Class.getDeclaredClasses()`将从可选属性返回信息`InnerClasses`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T09:25:55.757

这些链接似乎相关。他们记录了可能破坏[1.4 和 1.5](http://java.sun.com/j2se/1.5.0/compatibility.html)以及[1.5 和 1.6 之间](http://www.oracle.com/technetwork/java/javase/compatibility-137541.html)兼容性的少数极端情况。

我能想到的可能导致问题的最大区别是 enum 成为了一个关键字，但这只会在加载较旧的类文件时影响 1.5+ JVM（这似乎不是您将要执行的操作）。另一件事是注释。上面的链接似乎表明一切都会好起来的，但我会警惕如果旧的 JVM 加载带有运行时注释的类会发生什么。

除此之外，我认为 java 的第一个版本和 java 6 之间没有任何字节码更改。这意味着您应该遇到的唯一问题是 API 功能的更改或弃用（在上面的链接中列出）。

# php - 从打印 CSS 中删除 JS

> ID：10224684
> 
> 赞同：3
> 
> 时间：2012-04-19T08:52:04.033
> 
> 标签：php, javascript, css, printing

所以我在一个网站上工作，我只是在做最后的润色，我在这上面使用了很多 javascript，它一直在网站的打印版本中显示......即使我把它注释掉，我只是想知道是否有人知道从网站的打印版本中轻松删除 javascript 的方法，如果有任何帮助，该网站是用 PHP 编写的。

谢谢阅读。

编辑：javascript 本身没有运行，它直接显示代码本身，而不是运行它，如果可能的话，我想完全删除所有 javascript 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:25:10.453

你可以试试这个PHP代码：

```
$str = file_get_contents("http://stackoverflow.com");
$pattern = '#\<script.*?\>(.*?)\<\/script\>#si'; 
$str = preg_replace($pattern, '', $str);
die($str); 
```

它从内部删除所有脚本标签。现在可以打印了...

# android - Android 平板中类似 Eclipse 的 Java 开发环境

> ID：10224685
> 
> 赞同：4
> 
> 时间：2012-04-19T08:52:08.787
> 
> 标签：android, eclipse, ide

谁能说出平板电脑的 Android 操作系统是否会像 Java 开发环境一样支持 Eclipse？请帮助....提前谢谢。

# python - zed shaw的练习15开启功能

> ID：10224688
> 
> 赞同：1
> 
> 时间：2012-04-19T08:52:39.173
> 
> 标签：python

我对 zed shaw 的练习 15 有点坚持。实际上我对原始程序没有任何问题，但问题是当我尝试额外的功劳时，他要求我们使用原始输入而不是 argv。

所以，这是我使用的代码

```
filename=raw_input("enter filename :")
print "here's your file %r" % filename
txt=open(filename)
print txt.read() 
```

当它询问文件名时，我给出路径 e:\python\ex15_sample.txt 我在这一行中收到以下错误-> txt = open(filename) 并且它进一步说没有这样的文件或目录

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:00:26.613

你的代码很好。输入文件名时出错。检查该文件是否确实存在。

```
>>> filename=raw_input('enter filename :')
enter filename :c:\Users\All Users\Autodesk\Revit\Addins\2012\RevitLookup.addin
>>> txt = open(filename)
>>> print txt.read()
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<RevitAddIns>
  <AddIn Type="Application">
    <Assembly>C:\Program Files (x86)\Revit 2012 SDK\RevitLookup\CS\bin\Debug\RevitLookup.dll</Assembly>
    <ClientId>356CDA5A-E6C5-4c2f-A9EF-B3222116B8C8</ClientId>
    <FullClassName>RevitLookup.App</FullClassName>
    <Name>Revit Lookup</Name>
    <VendorId>ADSK</VendorId>
    <VendorDescription>Autodesk, www.autodesk.com</VendorDescription>
  </AddIn>
</RevitAddIns> 
```

（呃，这只是我碰巧在我的电脑上放着的一些文件......）

确保在输入文件时不要使用引号 - 或在之后去掉它们！这样做`argv`可能会起作用，但绝对不是`raw_input`。

**编辑**：我认为这就是问题所在：您正在输入带引号的文件名（例如当您在资源管理器中右键单击“复制为路径”时得到的）。对于`sys.argv`，这些被（Python？OS？我认为是 Python ......）删除，但不是`raw_input`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:07:58.887

由于您使用的是 Windows，因此您可以尝试`/`在输入文件名时使用（正斜杠）或使用双反斜杠作为 path-seperator `\\`。

要输入您的文件名，您可以尝试`e:/python/ex15_sample.txt`或`e:\\python\\ex15_sample.txt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-05T01:59:11.717

我使用以下程序最终让它工作：

```
print "Type your filename:"

filename = raw_input(">")

txt = open(filename)

print txt.read() 
```

我有点困惑为什么 OP 使用 %r 格式化程序。我没有使用它，我的程序仍然有效。有什么我想念的吗？谢谢。

# javascript - 输出多维数组

> ID：10224691
> 
> 赞同：0
> 
> 时间：2012-04-19T08:52:43.910
> 
> 标签：javascript, arrays, multidimensional-array

我目前设置了以下数组：

```
var TicketInfo =
    {
        t1: {
            1: [7, 12, 35,39,41, 43],
            2: [7, 15, 20,34,45, 48],
            3: [3, 7, 10, 13, 22, 43],
            4: [2, 4, 5,23,27, 33]
        },
        t2: {
            1: [10, 12, 17,44,48, 49],
            2: [13, 15, 17, 18, 32, 39],
            3: [16, 17, 20, 45, 48, 49],
            4: [6, 16, 18, 21, 32, 40]
        }
        } 
```

我想要做的是遍历这些以带回下面的数组。

作为测试，我尝试过这样的事情：

```
for(t in TicketInfo["t1"])
{
    i++;
        Write(t.i);
} 
```

但它显然没有按照我想要的方式工作。

有任何想法吗？

我希望能够输出像这样的数组`[7, 12, 35,39,41, 43]`

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T09:00:56.067

```
var TicketInfo =
{
    t1: {
        1: [7, 12, 35,39,41, 43],
        2: [7, 15, 20,34,45, 48],
        3: [3, 7, 10, 13, 22, 43],
        4: [2, 4, 5,23,27, 33]
    },
    t2: {
        1: [10, 12, 17,44,48, 49],
        2: [13, 15, 17, 18, 32, 39],
        3: [16, 17, 20, 45, 48, 49],
        4: [6, 16, 18, 21, 32, 40]
    }
}

for(var j in TicketInfo )
{
    for(var p in TicketInfo[j] )
    {
        for(var i = 0; i < TicketInfo[j][p].length; i++ )
        {
             console.log(TicketInfo[j][p][i]);
        }
    }
}​ 
```

[http://jsfiddle.net/J6rTj/](http://jsfiddle.net/J6rTj/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-09T18:50:19.867

如果您从 google 来到这里，试图找到一种方法来进行快速打印以进行调试，那么这里有一个适合您的方法：

```
console.log(myArray.join("\n")) 
```

例子：

```
var myArray = [[1,2,3],[4,5,6],[7,8,9]];
console.log(myArray.join("\n")); 
```

输出：

```
1,2,3
4,5,6
7,8,9 
```

带有正确括号的示例：

```
var myArray = [[1,2,3],[4,5,6],[7,8,9]];
console.log("[[" + myArray.join("],\n[") + "]]"); 
```

输出：

```
[[1,2,3],
[4,5,6],
[7,8,9]] 
```

回答OP的问题：

```
obj =  {
    1: [7, 12, 35,39,41, 43],
    2: [7, 15, 20,34,45, 48],
    3: [3, 7, 10, 13, 22, 43],
    4: [2, 4, 5,23,27, 33],
}
var keys = Object.keys(obj);
keys.sort();
console.log(keys);
var listFromObj = []
for (var i = 0; i < keys.length; i++) {
    if (obj.hasOwnProperty(keys[i])) listFromObj.push(obj[keys[i]]);
}
console.log("[" + listFromObj.join("]\n[") + "]"); 
```

输出：

```
[7,12,35,39,41,43]
[7,15,20,34,45,48]
[3,7,10,13,22,43]
[2,4,5,23,27,33] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:01:38.673

语法是`TicketInfo["t1"]["1"][0]`.

这个例子会给你`7`。

`TicketInfo["t1"]["1"]`将在您的问题的基础上为您提供您所追求的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:02:47.453

在您的代码`t`中仅代表密钥。

试试下面的代码：

```
var TicketInfo =
    {
        t1: {
            1: [7, 12, 35,39,41, 43],
            2: [7, 15, 20,34,45, 48],
            3: [3, 7, 10, 13, 22, 43],
            4: [2, 4, 5,23,27, 33]
        },
        t2: {
            1: [10, 12, 17,44,48, 49],
            2: [13, 15, 17, 18, 32, 39],
            3: [16, 17, 20, 45, 48, 49],
            4: [6, 16, 18, 21, 32, 40]
        }
}

for(t in TicketInfo["t1"])
{
    i++;
        console.log(TicketInfo["t1"][t]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:29:04.733

我知道您想按顺序输出整个表格吗？由于您在 t1/t2 级别使用对象，因此您必须为此执行额外的步骤。

首先，看看你是否可以简单地用真实数组替换对象：

```
var TicketInfoArrays = {
    t1: [
        [7, 12, 35,39,41, 43],
        [7, 15, 20,34,45, 48],
        [3, 7, 10, 13, 22, 43],
        [2, 4, 5,23,27, 33]
    ]
}

var t1 = TicketInfoArrays.t1

for(var idx = 0, len = t1.length; idx<len; idx++){
    var line = idx+": ["
    var nested = t1[idx]
    for(var idx2 = 0, len2 = nested.length; idx2<len2; idx2++){
        line += ((idx2 > 0 ? ', ':'') + nested[idx2])
    }
    console.log(line + ']')
} 
```

如果这在某种程度上是不可能的，但你确定这些对象中的键总是从某个特定的数字开始并且没有间隙地递增，你可以简单地迭代属性，直到你点击空元素：

```
var TicketInfo = {
    t1: {
        1: [7, 12, 35,39,41, 43],
        2: [7, 15, 20,34,45, 48],
        3: [3, 7, 10, 13, 22, 43],
        4: [2, 4, 5,23,27, 33]
    }
}

var t1 =  TicketInfo.t1

var idx = 1
var nested
while(nested = t1[idx]){
    var line = idx+": ["
    var nested = t1[idx]
    for(var idx2 = 0, len2 = nested.length; idx2<len2; idx2++){
        line += ((idx2 > 0 ? ', ':'') + nested[idx2])
    }
    console.log(line + ']')
    idx++
} 
```

最后，如果你不能保证，你将不得不手动收集所有的键，对它们进行排序，然后遍历这个排序列表。

```
var TicketInfoUnordered = {
    t1: {
        8: [7, 12, 35,39,41, 43],
        20: [7, 15, 20,34,45, 48],
        45: [3, 7, 10, 13, 22, 43],
        3: [2, 4, 5,23,27, 33]
    }
}

var t1 = TicketInfoUnordered.t1

var keys = []
for(key in t1){
    if(t1.hasOwnProperty(key)){ keys.push(key) }
}
keys.sort(function(a, b){ return a - b })

for(var idx = 0, len = keys.length; idx<len; idx++){
    var line = keys[idx]+": ["
    var nested = t1[keys[idx]]
    for(var idx2 = 0, len2 = nested.length; idx2<len2; idx2++){
        line += ((idx2 > 0 ? ', ':'') + nested[idx2])
    }
    console.log(line + ']')
} 
```

# excel - 将行与上面的行相乘并获得平均值

> ID：10224694
> 
> 赞同：2
> 
> 时间：2012-04-19T08:52:49.700
> 
> 标签：excel, excel-formula

我有一个 excel 表，可以说 500 列和 2 行。我想将第二行中的每个单元格与第一行中的上面的单元格相乘。然后得到总和的平均值。

例子：

```
3 4 1 2 5
1 3 3 5 1 
```

解决方案是： (3*1 + 4*3 + 1*3 + 2*5 + 5*1) / 列数

该命令在 Excel 中会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:45:47.473

对于第 1 行和第 2 行中的数据，请使用

```
=SUMPRODUCT(1:1,2:2)/COUNT(1:1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:04:24.393

这是我要做的：

1) 在第三行第一列输入“=A1+A2”。将其复制/粘贴到整行以传播。

2) 在另一列的某处输入“AVERAGE(C1:C500)”。

＃2中的那个单元格应该会给你答案。

# security - 我怎么可能在多台计算机上使用 LastPass？

> ID：10224697
> 
> 赞同：0
> 
> 时间：2012-04-19T08:53:05.720
> 
> 标签：security, cryptography

如果我错了，请告诉我：LastPass 永远看不到我的密码，因为它们是用留在我自己计算机中的密钥加密的？

那我怎么可能在另一台电脑上使用我的密码呢？

我唯一的猜测是，密钥是我用来登录 LastPass 的密码，或者至少它是基于它生成的，所以它在某种程度上是相关的。因此，当我从另一台计算机登录 LastPass 时，他们会在该计算机中创建相同的密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:30:53.270

密钥源自您输入的密码。他们根据他们的[网站](http://helpdesk.lastpass.com/security-options/password-iterations-pbkdf2/)使用 PBKDF2 和用户定义的迭代次数。

# sql-server-2008 - 使用 rss 脚本在报告服务器中发布 .rds 文件

> ID：10224698
> 
> 赞同：1
> 
> 时间：2012-04-19T08:53:11.997
> 
> 标签：sql-server-2008, reporting-services, reporting, ssrs-2008

我有几个使用共享数据源的 rdl 文件，这些数据源在 sample.rds 文件中定义。现在，当我尝试使用 rss scipt 发布 .rdl 文件时，出现以下错误，

> ```
> The dataset `Sample' refers to the shared data source `Sample', which is not published  on the report server.  The shared data source `Sample' must be published before this report can run. 
> ```

它清楚地表明 rdl 文件中引用的“示例”数据源未发布。

所以在尝试发布 rdl 文件之前，我需要发布 sample.rds 文件。怎么做？如何使用 rss 脚本发布 .rds 文件？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T00:03:26.590

手动创建它对我有用：

1.  浏览至`http://localhost/Reports_SQL2008`
2.  点击新建数据源，添加`Name="Sample", connectionstring="Data Source=.\sql2008; Initial Catalog=yourDB;"`
3.  使用 Windows 凭据
4.  节省

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:52:56.780

您可以访问 BIDS 吗？如果是，您可以打开您的项目，右键单击它并部署。

所有数据源都将部署到项目配置中指定的文件夹

# mysql - 论坛中的blob与文本

> ID：10224699
> 
> 赞同：5
> 
> 时间：2012-04-19T08:53:13.090
> 
> 标签：mysql, text, blob, forum, image-uploading

我正在写一个论坛网站，但我在设计数据库来保存帖子时遇到了问题。根据我的阅读，phpBB 3 将用户发布的数据存储为 BLOB，一些存储数据为文本。一个人比另一个人有优势吗？如果要将数据存储为文本，那么最大字符数呢？我从来没有从数据库中检索 BLOB 数据并将其解析为文本（或任何数据），但我认为学习如何使用它会很有趣。

帖子的文本数据将采用 utf8 编码。我正在使用 MySQL 数据库。

此外，您将如何允许为论坛上传图片，并且应该将图片存储为数据库的一部分，例如在 BLOB 中，是否应该将其存储为单独的文件？

欢迎任何建议/建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T09:29:38.113

text 和 blob 几乎相同，主要区别在于使用 blob 时您必须自己关心编码。另一方面，您将被迫使用文本字段的编码......在数据库中存储文件有一些优点和缺点：

优点：

*   备份和切换到另一台服务器更容易实现
*   无需添加其他方法来访问数据库旁边的文件

缺点：

*   访问图像意味着检索它的字节，并可能将其存储为临时本地文件，并且可能更复杂
*   由于开销较低，文件系统速度更快

决定权在你，目前我听到的意见最多的是将图片存储为文件；但这是意见，请尝试根据您的项目需求做出决定。

# udp - netty 的 udp 是在单线程模式下运行的吗？

> ID：10224701
> 
> 赞同：1
> 
> 时间：2012-04-19T08:53:19.370
> 
> 标签：udp, netty, single-threaded

netty 的 udp 是在单线程模式下运行的吗？

我已经配置了 NioDatagramChannelFactory，如下所示：

新的 NioDatagramChannelFactory(Executors.newFixedThreadPool(4), 4));

但是，当我将代码作为服务器运行时，午餐 20 多个客户端连续向其发送 udp 包时，服务器仍然只使用一个工作线程。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:19:52.513

通常它应该在这里使用 4 个工作线程。那么你怎么看它只使用一个线程？您是否检查过 jstack 以查看有多少工作线程正在运行？

您还应该使用

`new NioDatagramChannelFactory(Executors.newCachedThreadPool(), 4));`

这应该照顾到最大。4 个工作线程。

# nhibernate - 将复合键映射到两个外键

> ID：10224705
> 
> 赞同：3
> 
> 时间：2012-04-19T08:53:30.873
> 
> 标签：nhibernate, foreign-keys, composite

我有以下两个表：

```
Jobs
--------
JobNo
DivisionID

NCRs
--------
ID
JobNo
SpoilageJobNo
DivisionID 
```

JobNo 和 DivisionID 构成 Jobs 表中的复合键（我知道，但不幸的是它必须是复合键，因为它实际上是从 4 个不同数据库中提取数据的视图），我需要将此键加入 NCR JobNo 和 SpoilageJobNo 上的表。

我尝试了以下映射：

```
<class name="Job" table="v_Jobs">
    <composite-id name="Key">
        <key-property name="JobNo"></key-property>
        <key-many-to-one name="Division" class="Division" column="DivisionID"/>
    </composite-id>

    <bag name="NCRs">
        <key>
            <column name="JobNo"></column>
            <column name="DivisionID"></column>
        </key>
        <one-to-many class="NCR"/>
    </bag>

    <bag name="SpoilageNCRs">
        <key>
            <column name="SpoilageJobNo"></column>
            <column name="DivisionID"></column>
        </key>
        <one-to-many class="NCR"/>
    </bag>
</class>

<class name="NCR" table="NCRs">
    <id name="ID">
        <generator class="identity"></generator>
    </id>

    <many-to-one name="Division"
                 class="Division"
                 column="DivisionID">
    </many-to-one>

    <many-to-one name="Job"
                 class="Job"
                 column="JobNo">
    </many-to-one>

    <many-to-one name="SpoilageJob"
                 class="Job"
                 column="SpoilageJobNo">
    </many-to-one>
</class> 
```

但我只是得到错误`Foreign key (FK480F1031931B2CA4:NCRs [JobNo])) must have same number of columns as the referenced primary key (v_Jobs [JobNo, DivisionID])`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-22T19:48:54.983

[这是汤姆对他的问题的回答：]

啊哈，我想我明白了。我已经用这个更新了我的 NCR 映射：

```
<many-to-one name="Job" class="Job">
    <column name="JobNo"></column>
    <column name="DivisionID"></column>
</many-to-one>

<many-to-one name="SpoilageJob" class="Job">
    <column name="SpoilageJobNo"></column>
    <column name="DivisionID"></column>
</many-to-one> 
```

# objective-c - NSMutableArray：删除所有对象或初始化新的 NSMutableArray 是否更快？

> ID：10224706
> 
> 赞同：7
> 
> 时间：2012-04-19T08:53:36.817
> 
> 标签：objective-c, cocoa, nsmutablearray

尽管现在这对我的代码影响很小，但我想了解一个操作是否比另一个操作成本更高:-)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:55:55.377

删除所有对象更快。NSMutableArray 的代价是在容量不足时扩展它的内部列表。

看看这篇[博文](http://cocoawithlove.com/2008/08/nsarray-or-nsset-nsdictionary-or.html)。

# android - 当手机开机并且不允许在后台运行其他任何东西时，如何使android应用程序启动？

> ID：10224708
> 
> 赞同：1
> 
> 时间：2012-04-19T08:53:52.540
> 
> 标签：android

我想在 android 中创建一个简单的电话锁应用程序。为此，我希望当手机打开时，我的应用程序首先运行，并且在输入锁定密码之前不允许其他任何操作。我该怎么做。我在互联网上搜索了它，但没有得到任何明确而简单的答案......请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:59:54.647

这是一件棘手的事情，需要大量的研究和努力才能实现。一个应用程序是[幼儿锁](http://www.toddlerlock.com/)

# c - C 中具有连续声明的可用内存

> ID：10224710
> 
> 赞同：1
> 
> 时间：2012-04-19T08:53:53.683
> 
> 标签：c, linux

如果在循环中声明了一个变量，之前的声明会变成垃圾吗？例如，在下面：

```
loop{

    int array[10];

    array[i]=......

} 
```

`array`为每个循环迭代声明。新声明时，数组分配的新内存位置是否与旧位置相同？如果不是，那么旧的声明是否会变成垃圾，因为分配的区域没有被释放？最后，如果数组像上面的例子一样是静态的，如何在不退出循环的情况下释放它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:57:01.387

你实际上并没有分配任何东西。这在堆栈上进行，堆栈帧的大小由编译器在编译时计算。该数组将在每次迭代时重用相同数量的堆栈空间。在`int array[10]`运行时实际上什么都不做。

这样做有很大的不同：

```
for (...) {
   int a[10];
   a[0] = x;
} 
```

并这样做：

```
for (...) {
  int* a = (int*)malloc(sizeof(int)*10);
  a[0] = x;
  free(a);
} 
```

第一个“分配”的大小是固定的，不会花费您任何费用。第二个可以是可变大小的，并且将是一个堆分配的数组，您需要手动释放它。C 没有垃圾收集的概念，所以没有什么东西真的会变成垃圾。但是您需要释放使用该`malloc`函数分配的任何内容。如果您从不使用该功能，您将永远不需要`free`任何东西。编译器会为你处理这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:03:03.203

这是编译器自动处理的自动变量。

您只需要处理使用`new`或分配给自己的存储空间`malloc`。剩下的就交给你了。

`array`每次进入循环时都会进入范围，并在每个循环结束时再次销毁。编译器很可能每次都重用相同的空间，但这不是由语言定义的。无论如何都不会有垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:12:56.230

您可以假设，对于循环的每次迭代，都会创建一个新数组，并在迭代结束时将其销毁。这意味着新创建的数组的内容是未定义的。（可能是垃圾 - 它包含相同数据的可能性更大，因为它可能在堆栈中占据相同的位置）

但是，在内部，它们不会是*Dervall*`int array[10]`所指出的任何分配或释放

# string - 几个字符后的 xsl 子字符串但不删减单词

> ID：10224712
> 
> 赞同：5
> 
> 时间：2012-04-19T08:53:55.787
> 
> 标签：string, xslt

我想调用一些我添加到病毒的子字符串文本

```
<xsl:variable name="substringbreakText">
          <xsl:call-template name="insertBreaks"> 
               <xsl:with-param name="subject" select="substring(PublicProfile/AboutMe,1,550)"/> 
              </xsl:call-template>
    </xsl:variable> 
```

并且喜欢在此文本上使用 backwords，直到我得到空白或中断。所以我的意思是返回少于 550 个字符的字符串，但要让它看起来很复杂

示例：那是我的 550 个字符：“您看到的图像旨在描绘 Graham Bverly，他是英国加州大学安格利亚大学研究支持部门的学术发展名誉教授。他为研究生和其他学者研究并举办关于写作的研讨会.

但是这幅画像向读者暗示了什么信息？巴德利自称是一位博学的思想家？他寻求真理之光？他向左倾斜？他可能被这种自负逗乐了？他怀疑吗？也许。因为“人如是，他所见”（威廉·布莱尔）。

嗯”

我想剪切空格和“Eme”或剪切 \r\n 或
在此字符串中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T10:10:56.980

```
<xsl:value-of select="substring(@Description, 1, 500 + string-length(substring-before(substring(@Description, 501),' ')))" /> 
```

这可以更改为匹配句号或任何适合您需要的内容:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:34:38.243

如果您在 XSLT 1.0 中，查找第 550 个字符之前的最后一个空格将涉及递归。编写一个给定字符串的模板：

(a) 测试字符串的最后一个字符（使用 substring(s, string-length(s), 1)）

(b) 如果是空格，则返回字符串

(c) 否则，调用自身传递 substring(s, 1, string-length(s)-1) 作为参数。

传递此模板 substring(in, 1, 500) 它将返回一个字符串，该字符串以提供的输入中的最后一个空格结尾。

# php - PHP 中的可选包含

> ID：10224730
> 
> 赞同：2
> 
> 时间：2012-04-19T08:54:45.493
> 
> 标签：php, include, optional

我有一个具有一般配置的配置文件（在 git 存储库中），以及一个覆盖配置属性的本地配置文件（在存储库中被忽略）。现在本地配置文件包含在配置文件的开头：

```
include_once 'local_config.php'; 
```

但我希望包含是有条件的：只有在文件 local_config.php 实际存在时才这样做。我可以在这里毫无问题地[输入链接描述，但首先我需要检查文件是否存在。](https://stackoverflow.com/questions/9138444/using-php-include-during-conditional-statements "有条件的包括")所以我尝试了 get_include_path() 但它返回一个路径列表，我必须解析这个列表并检查每一个。

另一种选择是只调用 include_once() 并抑制警告，但它甚至更混乱。有没有更简单的方法在 PHP 中做一个真正的可选包含？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:57:30.997

像这样使用`file_exists()`预定义的 PHP 函数：

```
// Test if the file exists
if(file_exists('local_config.php')){
    // Include the file
    include('local_config.php');
}else{
    // Otherwise include the global config
    include('global_config.php');
} 
```

此处的文档：http: [//php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:57:37.593

你可以只使用 file_exists()

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-03T02:48:08.830

`stream_resolve_include_path($filename)`如果您的 PHP 版本高于 5.3.2，则可以使用

[http://php.net/stream_resolve_include_path](http://php.net/stream_resolve_include_path)

# linux - 如何设置 QTWEBKIT_PLUGIN_PATH

> ID：10224734
> 
> 赞同：0
> 
> 时间：2012-04-19T08:54:57.933
> 
> 标签：linux, flash, webkit, gtk

在Linux平台上，WebKit可以通过设置环境变量QTWEBKIT_PLUGIN_PATH来设置Flash插件程序的位置读取*. 所以目录中的文件。我想知道如何设置QTWEBKIT_PLUGIN_PATH？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:36:18.807

from shell export QTWEBKIT_PLUGIN_PATH="/home/xyz..." 用你的插件目录替换 xyz

# java - 基于非容器的java远程处理？

> ID：10224736
> 
> 赞同：0
> 
> 时间：2012-04-19T08:55:08.370
> 
> 标签：java, web-services, rmi, hessian

我们正在尝试为我们的应用程序设计一个新的补充。基本上，我们需要向通过 Internet 访问且不由我们拥有或控制的各种远程数据库提交非常基本的查询。

我们的建议是在每个外部系统上安装一个小型客户端应用程序，分为 2 个基本层，第 1 层是针对与其交谈的特定数据库量身定制的，以处理 SQL 或其他方式中的实际查询，另一层将是通信层来处理传入的请求并发送回响应。该通信接口在所有外部系统上都是相同的，即所有请求和响应都具有相同的结构。

就 java 远程处理而言，我猜这个小型客户端应用程序将是“服务器”，而我们的 Web 应用程序（通常称为服务器）是“客户端”。

我查看了各种 java 远程处理解决方案（Hessian、Burlap、RMI、SOAP/REST WebServices）。但是，我认为所有这些“服务器”必须在容器中运行，即在 tomcat/jetty 等实例中运行，我是否正确？

我真的希望避免与控制外国系统的所有 IT 部门进行斗争，以使它们安装得非常好。整个想法是它的薄/小/易于安装/无痛。是否有不需要在容器/网络服务器中运行的解决方案？

通信确实是这个设计中最小的部分，不超过 10 个字符串输入参数（除了对 db 没有任何意义）和一个真/假输出。不需要复杂的对象模型。唯一的复杂性来自安全/加密等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:02:44.257

我非常推荐一些基于 Jetty 的嵌入式 HTTP 服务器。您将一个带有依赖项 JAR 的简单可运行 JAR 打包到一个 ZIP 文件中，添加一个启动脚本，然后您就拥有了您的产品。例如，请参见[此处](http://caprazzi.net/posts/simple-webserver-and-rest-with-jetty-and-no-xml/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:12:01.530

我经常在我的项目中使用 Sprint-Remoting，在这里你可以找到如何在没有容器的情况下使用的描述。这家伙正在从他的应用程序中启动码头：

[http://forum.springsource.org/showthread.php?12852-HttpInvoker-without-web-container](http://forum.springsource.org/showthread.php?12852-HttpInvoker-without-web-container)

[http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html](http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html)

问候，

博斯科普

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:15:53.890

是的，它们中的大多数都运行标准的 servlet 容器。但是像 Jetty 这样的容器占用空间非常小，您可以[完全在代码之外配置和运行 Jetty，](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)同时保持 servlet 标准。

不要不估计随着时间的推移随着项目增强而增长的初始最低要求。然后拥有一个标准容器会使事情变得更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:07:40.390

正如您用 [rmi] 标记了这个问题，RMI 不需要任何形式的容器。您只需要打开适当的 TCP 端口即可。

# java - 在 XPage 中使用托管 Java Bean - 如何切换到读取模式？

> ID：10224738
> 
> 赞同：0
> 
> 时间：2012-04-19T08:55:11.587
> 
> 标签：java, javabeans, xpages

我和我的同事正在重新设计我们的应用程序，以便它使用 java bean 而不是 domino 文档作为数据源。文档完全在 java 类中处理，我们只引用 XPage 和自定义控件中的 bean。

我们可以很好地创建和编辑文档，但如果我们只想显示数据，就会出现问题：XPage 中包含 bean 属性的所有字段都处于编辑模式，但出于安全原因，我们需要它们处于读取模式。

现在，使用 domino 文档，我们可以轻松地在这些模式之间切换，因为文档“知道”它们处于哪种模式，但是对于 java bean 似乎没有这样的事情——至少在 XPages 中（文档很少或无论如何，这方面的例子——据我所知）。

我在 JSF 方面没有太多经验，所以我有点卡在这里。

问候，莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:27:24.023

可能的解决方案是添加用于控制 bean 的“模式”的 viewScope 变量。然后，在您的控件中，您可以基于此 viewscope var 切换“只读”属性。

另一种解决方案是将此属性添加到您的 bean (isEditable()) 并让只读属性由 bean 本身的此属性管理。

# java - 在 Android 和 Apple 平板电脑上阻止访问

> ID：10224739
> 
> 赞同：-1
> 
> 时间：2012-04-19T08:55:12.490
> 
> 标签：java, android, objective-c, ipad, mobile

我有一个客户的以下项目：

我需要完全撤销对 Android 系统的访问权限，显示一个登录屏幕，用于重新获得对系统的访问权限。

详细地：

# 工作流程

必须打开计时器。在此计时器达到一定时间后，例如 1 小时，Android 将被自动阻止，仅显示登录屏幕，没有其他内容。在此登录屏幕上，用户将能够输入密码以在一定时间内重新获得对系统的访问权限，之后，访问权限将再次被撤销，重新开始整个过程​​。

基本上是这样的：

[ 1 ] ---> [ 2 ] ---> [ 3 ] ^ | |-------------------------|

1 - 定时器已设置。2 - 定时器已结束。设备被锁定。3 - 输入密码。设备已解锁，正在设置新计时器 (1)。

# 加

我必须能够通过在线发送消息来远程阻止和解除阻止此 Android 平板电脑。至于密码，我还需要一种方法来生成密码并让 Android 平板电脑验证有效密码以恢复对平板电脑的访问权限。

PS.：我可以用苹果平板电脑（ipad、1,2 和 3）做同样的事情吗？如果是，如何？一定要越狱吗？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:56:03.297

是的，我想你可以使用[这个包](http://developer.android.com/reference/android/app/admin/package-summary.html)来做到这一点。给你更多的特权，例如。你甚至可以阻止市场和东西。

抱歉，我没有机会使用它来进一步指导您，并且不知道 Iphone。

# c# - C# - Windows CE：独立于操作系统文化设置的表单翻译

> ID：10224740
> 
> 赞同：2
> 
> 时间：2012-04-19T08:55:16.780
> 
> 标签：c#, localization, windows-ce, translation

我正在用 C# 为 Windows CE 设备编写程序，并希望根据应用程序本身的语言设置来翻译应用程序。

我已经阅读了一些关于使用资源文件进行本地化和使用“可本地化”和“语言”属性翻译表单的文章。根据我的阅读，我了解到这种类型的表单翻译适用于操作系统语言设置（如果我错了，请纠正我）。

现在我正在寻找一种方法来根据我自己的程序内语言设置进行表单翻译，最好使用资源文件。

我已经考虑过在每个表单的 Load 事件中进行此翻译，但也许还有其他解决方案或最佳实践。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:13:12.657

如果您要将其放入 Load 事件中，请考虑制作模板表单。在模板表单的某处，添加您的本地化检查。然后，让您的其他表单继承模板，它们将默认获取 Load 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:32:05.867

如果使用 Language.resx、Language.[language]-[country].resx 的本地化方式，生成的类 Language 将具有一个名为 Culture 的属性，可以设置该属性以覆盖当前的系统文化。

```
Language.Culture = new CultureInfo("sv-SE");
label1.Text = Language.my_language_string; 
```

如果你想使用 ResourceManager 类，它有一个成员 GetResourceSet()，它接受一个参数 CultureInfo。我自己没有尝试过使用 GetResourceSet，但听起来你可以使用它。

```
ResourceManager CultureResourceManager = new ResourceManager("My.Language.Assembly", System.Reflection.Assembly.GetExecutingAssembly());
ResourceSet resourceSet = CultureResourceManager.GetResourceSet("sv-SE", true, true);
resourceSet.GetString("my_language_resource"); 
```

MSDN 链接： http: [//msdn.microsoft.com/en-us/library/system.resources.resourcemanager.getresourceset (v=vs.80).aspxo](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.getresourceset(v=vs.80).aspxo)

# speech-recognition - 我正在为我的母语改编 CMU Sphinx，并想编写一个只使用几个单词的演示。有什么办法吗？

> ID：10224741
> 
> 赞同：0
> 
> 时间：2012-04-19T08:55:17.330
> 
> 标签：speech-recognition

不写一个引擎，而是使用现有的引擎并训练它，比如，我的母语中的 5 个单词怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:05:46.213

您可以使用 CMUSphinx 语音识别引擎来做到这一点。例如，您可以使用音位映射使现有的英语模型适应您的语言单词。它工作得很好。详情见

[http://cmusphinx.sourceforge.net/wiki/tutorialadapt](http://cmusphinx.sourceforge.net/wiki/tutorialadapt)

# android - 纯和更新定时器

> ID：10224745
> 
> 赞同：1
> 
> 时间：2012-04-19T08:55:40.220
> 
> 标签：android, timer

我尝试更新在我的 Android 应用程序中预先设置的计时器。

定时器代码：

```
timer.purge();

Data.Log.i("Next update : "+time * 60 * 1000);

timer.scheduleAtFixedRate(new TimerTask() 
{
    @Override
    public void run() 
    {
        handler.post(new Runnable() {
            @Override
            public void run() {
                wp.StartUpdate();
            }
        });
    }
}, 0, time * 60 * 1000); 
```

所以我不能更新我的计时器。当我每 2 分钟将其设置为“time = 2”时，即使我将其更改为 60，计时器也会执行。

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:23:13.543

一旦定时器被初始化，它就会存储初始化时间的间隔值，`time * 60 * 1000`如果 ，它等于 2 分钟`time = 2`。所以这个值存储在计时器对象中。计时器在运行时不检查这个值，而是使用它自己在初始化时提供的本地存储的间隔值。

如果您更改`time = x`或任何其他值，计时器将不会更改其内部间隔值。因此，如果您想稍后更改计时器的间隔值，您必须使用新的间隔值启动另一个计时器对象。

# spring - Spring URL映射冲突

> ID：10224746
> 
> 赞同：1
> 
> 时间：2012-04-19T08:55:44.490
> 
> 标签：spring, model-view-controller, url, url-rewriting, mapping

目前，我正忙于为我们的网店实现一个新的 url 结构。新的 url 结构应该更适合搜索引擎。我们还希望我们的旧结构仍然有效，并将使用 301 重定向到新结构。

问题是：新结构有时会与旧网址冲突。

旧网址映射示例：

```
@RequestMapping(value = "/brand/{categoryCode}/{categoryName}/{brandGroup}.do", method = RequestMethod.GET) 
```

新结构：

```
@RequestMapping(value = "/brand/{brandGroup}/{superCategoryName}/{categoryName}.do", method = RequestMethod.GET) 
```

如您所见，url 具有相同数量的值，因此旧映射将捕获新映射，反之亦然。

解决此问题的最佳方法是什么？使用 url 过滤器将旧的重写为新的 url 结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:15:19.510

[您可以在 Spring MVC 中](https://github.com/bclozel/springmvc-router)使用URL 路由器；您可以在您的应用程序中定义冲突路由并使用路由优先级处理它们（匹配请求的第一个路由获胜）并优化请求匹配。

您的路线配置文件可能如下所示：

```
GET /brand/{<[0-9]+>categoryCode}/{categoryName}/{brandGroup}.do oldcontroller.oldAction
GET /brand/{<[a-zA-Z]+>brandGroup}/{superCategoryName}/{categoryName}.do newController.newAction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-22T18:41:20.460

在 Spring Boot 中，映射 时可以使用正则表达式`@PathVariable`，这对于解决 url 冲突很有用：

```
@RestController
public class TestController {

    @PutMapping("/test/{id:^[1-9][0-9]*}") // id must be a number greater that 1
    public void method1(@PathVariable long id, @RequestBody DataDto1 data) {
    }

    @PutMapping("/test/foo")
    public void method1(@Valid @RequestBody DataDto2 data) {
    }
} 
```

# java - 如何使用 eToken 在客户端加密数据

> ID：10224749
> 
> 赞同：0
> 
> 时间：2012-04-19T08:55:49.453
> 
> 标签：java, javascript, encryption, cryptography, e-token

我将使用 Spring 框架和 JSP 开发一个应用程序，如下所示：

1）当客户端输入任何文本并按下*加密*按钮时，数据应在客户端加密，但应使用 eToken 进行加密。

2）当客户端上传任何文件时，它应该以加密格式存储在数据库中。

为此，我在谷歌上搜索但没有找到任何有用的资源。我们正在使用包含使用 RSA 算法的密钥对的 eToken。我的问题是如何使用 eToken 在客户端加密和解密数据和文件？

我被困在这里，请尽快帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:46:39.053

假设您想通过浏览器执行此操作，您将需要一个 ActiveX 或 Java 小程序来完成这项工作。使用客户端 javascript 无法完成该任务。

我们在 SecureBlackbox 产品中开发了类似的解决方案，尽管它目前适用于签名（我们无法想象需要加密的现实用例）。

JFYI：要进行*加密*，您不需要私钥，只需要公钥。公钥可以从令牌导出到计算机。

# mysql - 连接范围内的 MySQL 查询（速度问题）

> ID：10224750
> 
> 赞同：0
> 
> 时间：2012-04-19T08:55:51.147
> 
> 标签：mysql, query-optimization

我正在尝试运行以下查询：

```
SELECT formatted_journeys.*, MAX(speed) 
FROM formatted_journeys 
JOIN tracker.g_log 
   ON imeiid = vehicle 
   AND g_logid BETWEEN start_g_log AND end_g_log 
GROUP BY id 
```

但是，它似乎非常缓慢。这是该查询的解释。

```
+----+-------------+--------------------+------+-------------------------------+-------+---------+-----------------------------------+------+----------+---------------------------------+
| id | select_type | table              | type | possible_keys                 | key   | key_len | ref                               | rows | filtered | Extra                           |
+----+-------------+--------------------+------+-------------------------------+-------+---------+-----------------------------------+------+----------+---------------------------------+
|  1 | SIMPLE      | formatted_journeys | ALL  | vehicle,start_g_log,end_g_log | NULL  | NULL    | NULL                              |  824 |   100.00 | Using temporary; Using filesort |
|  1 | SIMPLE      | g_log              | ref  | PRIMARY,Dupes                 | Dupes | 4       | motrak.formatted_journeys.vehicle | 1985 |   100.00 | Using where                     |
+----+-------------+--------------------+------+-------------------------------+-------+---------+-----------------------------------+------+----------+---------------------------------+
2 rows in set, 1 warning (0.02 sec) 
```

表格如下：

格式化_旅程：

```
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| start_g_log     | int(11)          | YES  | MUL | NULL    |                |
| end_g_log       | int(11)          | YES  | MUL | NULL    |                |
| start_latitude  | decimal(18,12)   | YES  |     | NULL    |                |
| start_longitude | decimal(18,12)   | YES  |     | NULL    |                |
| end_latitude    | decimal(18,12)   | YES  |     | NULL    |                |
| end_longitude   | decimal(18,12)   | YES  |     | NULL    |                |
| start_location  | text             | YES  |     | NULL    |                |
| end_location    | text             | YES  |     | NULL    |                |
| distance        | decimal(10,5)    | YES  |     | NULL    |                |
| start_date      | datetime         | YES  |     | NULL    |                |
| end_date        | datetime         | YES  |     | NULL    |                |
| vehicle         | int(11)          | YES  | MUL | NULL    |                |
| private         | bit(1)           | NO   |     | b'0'    |                |
+-----------------+------------------+------+-----+---------+----------------+ 
```

指数：

```
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table              | Non_unique | Key_name    | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| formatted_journeys |          0 | PRIMARY     |            1 | id          | A         |         830 |     NULL | NULL   |      | BTREE      |         |
| formatted_journeys |          1 | vehicle     |            1 | vehicle     | A         |           4 |     NULL | NULL   | YES  | BTREE      |         |
| formatted_journeys |          1 | start_g_log |            1 | start_g_log | A         |         830 |     NULL | NULL   | YES  | BTREE      |         |
| formatted_journeys |          1 | end_g_log   |            1 | end_g_log   | A         |         830 |     NULL | NULL   | YES  | BTREE      |         |
+--------------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

tracker.g_log：

```
+-----------+------------------+------+-----+---------+----------------+
| Field     | Type             | Null | Key | Default | Extra          |
+-----------+------------------+------+-----+---------+----------------+
| g_logid   | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| imeiid    | int(10) unsigned | NO   | MUL | NULL    |                |
| latitude  | decimal(18,12)   | YES  |     | NULL    |                |
| longitude | decimal(18,12)   | YES  |     | NULL    |                |
| speed     | int(4)           | YES  | MUL | NULL    |                |
| bearing   | int(4)           | YES  |     | NULL    |                |
| distance  | decimal(10,5)    | YES  |     | NULL    |                |
| eventcode | int(10)          | YES  |     | NULL    |                |
| status    | int(10)          | YES  |     | NULL    |                |
| date      | datetime         | YES  |     | NULL    |                |
+-----------+------------------+------+-----+---------+----------------+ 
```

指数：

```
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| g_log |          0 | PRIMARY  |            1 | g_logid     | A         |       31760 |     NULL | NULL   |      | BTREE      |         |
| g_log |          0 | Dupes    |            1 | imeiid      | A         |          16 |     NULL | NULL   |      | BTREE      |         |
| g_log |          0 | Dupes    |            2 | date        | A         |       31760 |     NULL | NULL   | YES  | BTREE      |         |
| g_log |          0 | Dupes    |            3 | eventcode   | A         |       31760 |     NULL | NULL   | YES  | BTREE      |         |
| g_log |          1 | speed    |            1 | speed       | A         |         423 |     NULL | NULL   | YES  | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

现在我知道文件排序不是一件好事，但我该如何摆脱它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:58:47.490

您几乎不会摆脱`Using temporary; Using filesort`，但查询可能会更快。

首先，尝试将查询重写为：

```
SELECT *
FROM (
  SELECT id, MAX(speed) as max_speed
  FROM formatted_journeys 
  JOIN tracker.g_log 
    ON imeiid = vehicle 
      AND g_logid BETWEEN start_g_log AND end_g_log 
  GROUP BY id) as maxspeeds
JOIN formatted_journeys USING (id); 
```

然后，您可以尝试强制查询使用覆盖索引，尽管这对查询来说并不容易。

第一次尝试：添加一个复合索引`(vehicle, start_g_log, end_g_log)`并查看是否使用它（你应该在那里看到“使用索引”）

# ruby-on-rails - 使用 FasterCSV / Rails 3.1 / Ruby 1.8.7 导入

> ID：10224754
> 
> 赞同：0
> 
> 时间：2012-04-19T08:56:11.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, fastercsv

我正在尝试使用 FasterCSV 导入制表符分隔的文件。我尝试了各种各样的事情并得到了不同的错误。在当前状态下，我收到“未定义的方法 `tempfile'”错误。

我已在我的创建操作中添加了 fastercsv 代码，因为批量导入是将数据添加到此模型的唯一方式。

这是我的代码。有人可以帮忙吗？任何帮助将不胜感激！

我的模型：

```
class AppleSale < ActiveRecord::Base
end 
```

我的控制器：

```
require 'fastercsv'
require 'tempfile'

class AppleSalesController < ApplicationController

  def new
    @apple_sale = AppleSale.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @apple_sale }
    end
  end

 def create
   file = params[:tsv_file] 
   FasterCSV.new(file.tempfile, {:headers => true, :quote_char=>'"', :col_sep =>"\t"}) do |row_data|

        new_record = AppleSale.first_or_new(
            'provider' =>  row_data['provider'],
            'provider_country' => row_data['provider_country'],
            'vendor_identifier' => row_data['vendor_identifier'],
            'upc' => row_data['upc'],
            'isrc' => row_data['isrc'],
            'artist_show' => row_data['artist_show'],
            'title' => row_data['title'],
            'label_studio_network' => row_data['label_studio_network'],
            'product_type_identifier' => row_data['product_type_identifier'],
            'units' => row_data['units'],
            'royalty_price' => row_data['royalty_price'],                    
            'download_date' => row_data['download_date'],
            'order_id' => row_data['order_id'],
            'postal_code' => row_data['postal_code'],
            'customer_identifier' => row_data['customer_identifier'],
            'report_date' => row_data['report_date'],
            'sale_return' => row_data['sale_return'],
            'customer_currency' => row_data['customer_currency'],
            'country_code' => row_data['country_code'],
            'royalty_currency' => row_data['royalty_currency'],
            'preorder' => row_data['preorder'],
            'isan' => row_data['isan'],
            'customer_price' => row_data['customer_price'],
            'apple_identifier' => row_data['apple_identifier'],
            'cma' => row_data['cma'],
            'asset_content_flavor' => row_data['asset_content_flavor'],
            'vendor_order_code' => row_data['vendor_order_code'],
            'grid' => row_data['grid'],
            'promo_code' => row_data['promo_code'],
            'parent_identifier' => row_data['parent_identifier'],
            'apple_identifier' => row_data['apple_identifier']                 
        )
        new_record.save
    end
  end
end 
```

我的表单视图：

```
<%= form_for(@apple_sale, :multipart => true) do |f| -%>
<%= f.file_field :tsv_file %>
<%= f.submit "Upload >>", :class => "submit"  %>
<% end %> 
```

我的 Gemfile 包含：

```
gem 'fastercsv' 
```

提前致谢！！

对于其他可能需要的更新，我还不能回答我自己的问题：

这一切都在控制器中，已更改为以下内容。这似乎完美无缺。

```
def create
   uploaded_io = params[:apple_sale][:tsv_file] 
   File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'w') do |file|
   file.write(uploaded_io.read)
  end

   FasterCSV.foreach(uploaded_io.original_filename, {:headers => true, :col_sep =>"\t"}) do |row_data|

        new_record = AppleSale.new(
            'provider' =>  row_data[0],
            'provider_country' => row_data[1],
            'vendor_identifier' => row_data[2],
            'upc' => row_data[3],
            'isrc' => row_data[4],
            'artist_show' => row_data[5],
            'title' => row_data[6],
            'label_studio_network' => row_data[7],
            'product_type_identifier' => row_data[8],
            'units' => row_data[9],
            'royalty_price' => row_data[10],                    
            'download_date' => row_data[11],
            'order_id' => row_data[12],
            'postal_code' => row_data[13],
            'customer_identifier' => row_data[14],
            'report_date' => row_data[15],
            'sale_return' => row_data[16],
            'customer_currency' => row_data[17],
            'country_code' => row_data[18],
            'royalty_currency' => row_data[19],
            'preorder' => row_data[20],
            'isan' => row_data[21],
            'customer_price' => row_data[22],
            'apple_identifier' => row_data[23],
            'cma' => row_data[24],
            'asset_content_flavor' => row_data[25],
            'vendor_order_code' => row_data[26],
            'grid' => row_data[27],
            'promo_code' => row_data[28],
            'parent_identifier' => row_data[29]

        )
        new_record.save
    end

        respond_to do |format|
          format.html { redirect_to apple_sales_path, :notice => "Successfully imported sales." }   
        end

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:26:31.330

**1**：我不认为 FasterCSV 接受带有`new`.

**2**：根据 Rails 3.1 文档 - 当您实现文件上传表单时：http:
[//guides.rubyonrails.org/form_helpers.html#uploading-files](http://guides.rubyonrails.org/form_helpers.html#uploading-files)

...结果`param`是一个`IO`对象，它**不一定是一个普通文件**。

查看 FasterCSV 源，它看起来像`parse`接受一个`IO`对象 + 一个块，所以我认为应该这样做：

```
FasterCSV.parse(file, ...) do |row_data|
  ...
end 
```

# .net - WPF MVVM Prism 应用程序中的内存泄漏

> ID：10224757
> 
> 赞同：2
> 
> 时间：2012-04-19T08:56:37.797
> 
> 标签：.net, wpf, memory-leaks, garbage-collection, prism-4

我有一个使用 MVVM Prism 编写的 WPF 应用程序。它有很多标签。这些选项卡每个消耗大约 2..3 MB 的内存。客户抱怨说，在打开和关闭几十个选项卡后，应用程序消耗的内存比一开始时要多得多。此外，打开新标签需要更多内存，因此应用程序不会使用旧标签而是创建新标签。

所以很明显旧标签不是垃圾收集的。显然是因为有一些链接指向它们。

我如何以任何方式收集它们？我应该只实现 IDisposable，并删除所有可能的引用吗？并确保在析构函数中也调用了 Dispose 方法？我不确定是否可以删除所有不需要的引用。

也许我可以使用一个很好的工具来帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:51:01.333

这显然是一个加载的问题。内存消耗可能不仅是由内存泄漏引起的！每个应用程序都是不同的，并且没有灵丹妙药，所以这里有一些可能会有所帮助的想法。

1.  获取 ANTS 分析器，它有 2 周的试用期 + 很棒的教程。它会为您指出很多东西，例如僵尸对象等。

2.  WPF 是一头猪，因此您打开的选项卡越多（不会消失的控件），它将占用更多的内存。看看你的 XAML，你能把它修整一下。例如，使用 TextBlock 代替标签。删除额外的嵌套控件，例如 StackPanel 中的 StackPanel 或 Grid 中的 Grid，在 stackpanel 中 - 将所有这些控件放在一个网格中，并使用行/列.. 如果您有一个项目模板，其中每个项目都执行某些操作它很复杂，尝试改变它。例如，如果在焦点上它会在项目周围画一个边框并做一些花哨的事情，问一个问题，我可以从每个项目中删除它，并创建一个控件来计算它的位置并适当地放置自己。

3.  每个选项卡是否有相同类型的视图（用户控件或控件），只是不同的实例？如果是这样，您可以回收它们吗？一年多以前，我在一个项目中，我们有一些菜单为一些标准创建一个选项卡，然后是另一个，另一个。标准不同，但视图类型相同。它只是被注入了不同的信息——Prism 正在为每个选项卡创建一个新的视图控件，这显然很昂贵。我们最终做的是创建不同的 ViewModel，但保留该昂贵视图的相同实例（通过在需要时删除/添加回该区域来回收）。为此，每个 ViewModel 都会在导航上（示例）

    ```
    //detaching from Prism region allows for recycling
    public override void OnNavigatedFrom (NavigationContext navigationContext)
    {
     var view = _container.Resolve (typeof (Object), "NameOfTheView");
     if (view != null)
        navigationContext.NavigationService.Region.Remove (view);
    }
    //similarly you can readd it where your think it is nedded..

    public override void OnNavigatedTo (NavigationContext navigationContext)
    {
        base.OnNavigatedTo (navigationContext);
        RestoreDataState (_state); 
    ```

    }

    此链接可能很有用：http: [//blogs.msdn.com/b/dphill/archive/2011/01/23/closable-tabbed-views-in-prism.aspx](http://blogs.msdn.com/b/dphill/archive/2011/01/23/closable-tabbed-views-in-prism.aspx)

4.  垃圾收集注意事项：.NET 垃圾收集器的全部目的是代表我们管理内存。但是，在一些非常罕见的情况下，使用 GC.Collect() 以编程方式强制垃圾收集可能是有益的。

    具体来说：

    a.当您的应用程序即将进入您不希望被可能的垃圾收集中断的代码块时。

    b.当您的应用程序刚刚完成分配大量对象并且您希望尽快删除尽可能多的获取内存时。（我的项目就是这种情况）

    C。也：http: [//blogs.msdn.com/b/ricom/archive/2004/11/29/271829.aspx](http://blogs.msdn.com/b/ricom/archive/2004/11/29/271829.aspx)

我肯定会在每个 ViewModel 上实现 Dispose 方法，我会将所有大的东西都设置为 null，不要忘记取消订阅事件以及计时器之类的东西。你可以调用 GC.Collect (); 但请阅读上面的注释。不要忘记清理复杂对象，不要只是将它们设置为空。例如，在我的 Dispose 中，我们有类似的内容：

```
ClearDisplayGrid (); 
```

反过来又这样做了：

```
private void ClearDisplayGrid ()
    {
        foreach (var r in DisplayGrid.MyItems.SelectMany (it => it.SubItems))
        {
            r.IsSelectedChanged -= ReadingIsSelectedChanged;
            r.InEditChanged -= ReadingInEditChanged;
            r.PropertyChanged -= ReadingPropertyChanged;
        }
    } 
```

# c# - NUnit 测试夹具层次结构

> ID：10224759
> 
> 赞同：2
> 
> 时间：2012-04-19T08:56:39.133
> 
> 标签：c#, .net, tdd, nunit

我正在尝试创建某种与实现无关的装置。

假设我有以下界面。

```
public interface ISearchAlgorithm
{
    // methods
} 
```

而且我确切地知道它应该如何表现，所以我想为每个派生类运行相同的测试集：

```
public class RootSearchAlgorithmsTests
{
    private readonly ISearchAlgorithm _searchAlgorithm;

    public RootSearchAlgorithmsTests(ISearchAlgorithm algorithm)
    {
        _searchAlgorithm = algorithm;
    }

    [Test]
    public void TestCosFound()
    {
        // arrange
        // act with _searchAlgorithm
        // assert
    }

    [Test]
    public void TestCosNotFound()
    {
        // arrange
        // act with _searchAlgorithm
        // assert
    } 
    // etc 
```

然后我为每个派生类创建以下固定装置：

```
[TestFixture]
public class BinarySearchTests : RootSearchAlgorithmsTests
{
    public BinarySearchTests(): base(new BinarySearchAlgorithm()) {}
}

[TestFixture]
public class NewtonSearchTests : RootSearchAlgorithmsTests
{
    public NewtonSearchTests(): base(new NewtonSearchAlgorithm()) {}
} 
```

它运行良好，除了 R# 测试运行器和 NUnit GUI 都显示基类测试，当然它们会失败，因为没有合适的构造函数。

如果它没有标记，为什么它甚至会运行`[TestFixture]`？我猜是因为具有`[Test]`属性的方法？

如何防止基类及其方法出现在结果中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T09:13:33.767

您可以使用NUnit 中的[通用测试装置来实现您想要的。](http://www.nunit.org/index.php?p=testFixture&r=2.5)

```
[TestFixture(typeof(Implementation1))]
[TestFixture(typeof(Implementation2))]
public class RootSearchAlgorithmsTests<T> where T : ISearchAlgorithm, new()
{
    private readonly ISearchAlgorithm _searchAlgorithm;

    [SetUp]
    public void SetUp()
    {
        _searchAlgorithm = new T();
    }

    [Test]
    public void TestCosFound()
    {
        // arrange
        // act with _searchAlgorithm
        // assert
    }

    [Test]
    public void TestCosNotFound()
    {
        // arrange
        // act with _searchAlgorithm
        // assert
    } 
    // etc
} 
```

# jquery - 如何在 MVC Telerik Upload Control 中一次异步发送所有上传的文件？

> ID：10224760
> 
> 赞同：1
> 
> 时间：2012-04-19T08:56:43.287
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, telerik, telerik-mvc

我正在为我的 MVC3 应用程序使用 Telerik 文件上传控件。我正在使用它的异步功能来上传文件。下面是我正在使用的代码。

```
@(Html.Telerik().Upload()
        .Name("files")
        .ShowFileList(true)    
        .Multiple(true)                                    
        .Async(
                async => async
                .Save("Save", "MyController")
                .AutoUpload(false)
                .Remove("Remove", "MyController")                            
            )
    )

[HttpPost]
        public ActionResult Save(IEnumerable<HttpPostedFileBase> files)
        {            
            foreach (var file in files)
            {
                // Some browsers send file names with full path. We only care about the file name.
                var fileName = Path.GetFileName(file.FileName);
                var destinationPath = Path.Combine(Server.MapPath("~/App_Data"), fileName);

                file.SaveAs(destinationPath);
            }
            return Content("");
        } 
```

上面的代码将生成两个按钮，即。“选择”和“上传文件”。选择 4 个文件并按下“上传文件”按钮后，telerik 异步调用操作方法 4 次（这很糟糕）。我想要的是该方法应该只调用一次，并且所有 4 个文件都应该一次发送到该方法（因为我正在接受文件列表）。

那么，如何在 Html.Telerik().Upload() 控件中实现这一点？

此外，我将在我的 Html.Telerik().Window() 中显示此控件，因此我需要将上传的数据发送到我的父页面。任何帮助如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:32:18.277

作为建议，如果您要将文件作为具有其他值的表单帖子的一部分进行处理，则可以考虑让文件异步上传。为此，我使用隐藏的表单字段将 ID 与上传的文件相关联，并将该值包含在 onUpload(e) 客户端事件的 e.data 参数中。这样，您可以在文件保存在临时位置时验证表单，并处理表单发布以及与您的 ID 关联的文件。

否则，如果您绝对想要同步，根据 Telerik 的文档，您应该可以毫无问题地进行多次同步上传。

[http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-synchronous-upload.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-synchronous-upload.html)

# java - 在 Java 中分叉一个进程，有效地重定向输入/输出/错误流

> ID：10224761
> 
> 赞同：1
> 
> 时间：2012-04-19T08:56:48.487
> 
> 标签：java, process, io, fork, nio

在 bash 脚本中，如果我执行“内联”执行的外部程序（即“bash”）。我的意思是该进程不在后台跨越，并且子进程的 stdin/stdout/stderr 与 bash 脚本本身的一个一致。

所以如果我的 bash 脚本包含

```
#!/bin/sh
bash 
```

发生的情况是用户可以运行我的脚本，并且当执行 bash 时，他将能够在 bash 的标准输入中键入命令，并在 stdout/stderr 上查看命令的结果。

这就是我的意思是子进程是“内联”运行的。

在 java 中，进程在后台跨越，因此 Process.getOutputStream()/Process.getInputStream()/Process.getErrorStream 不是 System.in/System.out/System.err 的“内联”。

我想要在我的 java 程序中做的是重现当我执行一个进程时发生的行为，如上面的 bash 脚本示例所示。

经过一些谷歌搜索后，我得出了这个

```
public static void main(String[] args) throws IOException,
        InterruptedException {
    String[] cmdarray = {"bash"};
    Process proc = Runtime.getRuntime().exec(cmdarray);

    StreamGobbler errorGobbler = new StreamGobbler(proc.getErrorStream(),
            System.err);

    StreamGobbler outputGobbler = new StreamGobbler(proc.getInputStream(),
            System.out);

    StreamGobbler inputGobbler = new StreamGobbler(System.in,
            proc.getOutputStream());

    errorGobbler.start();
    outputGobbler.start();
    inputGobbler.start();

    int exitVal = proc.waitFor();
    errorGobbler.join(); // Handle condition where the
    outputGobbler.join(); // process ends before the threads finish
    System.exit(exitVal);
}

class StreamGobbler extends Thread {
    InputStream is;
    OutputStream os;

    StreamGobbler(InputStream is, OutputStream os) {
        this.is = is;
        this.os = os;
    }

    public void run() {
        try {
            int c;
            while ((c = is.read()) != -1) {
                os.write(c);
                os.flush();
            }
        } catch (IOException x) {
            throw new RuntimeException(x);
        }
    }
} 
```

但是，嘿，有 3 个线程！加上执行进程跨越的线程！

一定会有更好的办法。就像是：

```
Runtime.execForeground("bash", System.in, System.out, System.err); 
```

要不就：

```
Runtime.execForeground("bash"); 
```

它执行“内联”过程，因为它适用于许多脚本语言。

也许另一种可能性是使用非阻塞 I/O 在单个线程中将 stdin/stdout/stderr 复制到 System.in/out/err？有什么例子吗？

# ios - 如何在Objective C中初始化一个空的可变数组

> ID：10224762
> 
> 赞同：21
> 
> 时间：2012-04-19T08:56:48.753
> 
> 标签：ios, arrays, cocoa, object

我有一个对象（卡车）列表，其中包含填充 tableview 的各种属性。当您点击它们时，它们会转到单独的卡车页面。有一个添加按钮，可以将它们添加到另一个 tableview 中的收藏夹列表中。如何在 Cocoa 中初始化一个空的可变数组？

我有以下代码：

```
-(IBAction)addTruckToFavorites:(id)sender:(FavoritesViewController *)controller
{
    [controller.listOfTrucks addObject: ((Truck_Tracker_AppAppDelegate *)[UIApplication sharedApplication].delegate).selectedTruck];

} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-19T10:06:16.937

**更新：**

使用新语法，您可以使用：

```
NSMutableArray *myArray = [NSMutableArray new]; 
```

**原答案：**

例如：

```
NSMutableArray *myArray = [[NSMutableArray alloc] init]; 
```

[在这里](https://stackoverflow.com/questions/5423211/difference-between-nsmutablearray-array-vs-nsmutablearray-alloc-init)您可以找到原因（类和实例方法之间的区别）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-06T16:35:20.970

基本上，有三种选择：

**第一的**

```
NSMutableArray *myMutableArray = [[NSMutableArray alloc] init]; 
```

**第二**

```
NSMutableArray *myMutableArray = [NSMutableArray new]; 
```

**第三**

```
NSMutableArray *myMutableArray = [NSMutableArray array]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-05T09:27:40.533

也可以这样初始化

除了@NSSam 的答案之外， **Objective C**的另一种方法

```
NSMutableArray *myMutableArray = [@[] mutableCopy]; 
```

**对于斯威夫特**

```
let myArray = NSMutableArray() 
```

或者

```
let myArray = [].mutableCopy() as! NSMutableArray; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T08:57:28.930

```
NSMutableArray *arr = [NSMutableArray array]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-01T11:01:36.867

我使用这种方式在Objective C中初始化一个空的可变数组：

```
NSMutableArray * array = [NSMutableArray arrayWithCapacity:0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T08:57:39.023

`listOfTrucks = [NSMutableArray array];`给你一个新的可变数组。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-07-02T09:22:44.483

在现代 Objective-C 中，它可能更短：

```
NSArray *array = @[]; 
```

# php - 如何获取时区信息

> ID：10224768
> 
> 赞同：1
> 
> 时间：2012-04-19T08:57:05.350
> 
> 标签：php, mysql, datetime, localization, timezone

我有一个登录脚本，用于检查某个时间段是否已过。意识到我有一个时间戳，我用 strtotime 从我的数据库中获取，这样我就可以轻松地向这个时间/字符串添加一个秒值来检查这个特定的日期/时间是否已经过去。

昨天我更新到 php 5.3。现在我收到一条错误消息：

```
Warning: strtotime() [function.strtotime]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Europe/Berlin' for 'CEST/2.0/DST' instead in /xxx/xxx/xxxx/xxx/login.php on line xx 
```

这在这条线上实现：

```
$DOA = strtotime($row->DOA); 
```

问题是，我该如何使用：

```
date.timezone = "Europe/Berlin"
date.default_latitude = 52.5194
date.default_longitude = 13.4067 
```

转换时间戳

```
$row->DOA 
```

我必须得到一个字符串。或者是这样的：

```
date.timezone = "Europe/Berlin"
date.default_latitude = 52.5194
date.default_longitude = 13.4067 
```

只是我应该添加的信息，因为据说

```
We selected 'Europe/Berlin' for 'CEST/2.0/DST' instead... 
```

用来。

如果有人可以给我建议来解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:16:31.687

我认为它只是没有设置 PHP 时区。因此，您可以在 php.ini 中执行此操作或在您的 php 文件中声明它。

```
date_default_timezone_set('Europe/Berlin');
$DOA = strtotime($row->DOA); 
```

看看这是否消除了你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:18:07.540

您可以使用以下代码：

```
$timestamp = '1334826954';
$dateTime = new DateTime();
$dateTime->setTimezone(new DateTimeZone('Europe/Berlin'));
$dateTime->setTimestamp($timestamp);
echo $dateTime->format('Y-m-d H:i:s'); 
```

输出

```
2012-04-19 11:15:54 
```

# c# - 通过 WCF 同步本地 SQL Express 数据库

> ID：10224769
> 
> 赞同：2
> 
> 时间：2012-04-19T08:57:08.697
> 
> 标签：c#, wcf, sql-server-2008, microsoft-sync-framework

我知道有很多关于这个主题的材料，但不知何故，我真的找不到任何不过时且满足我需求的东西。

我需要的。

我有一个本地 SQL Express 2008 R2 数据库

我需要通过 WCF 将此数据库与服务器数据库（SQL 2008 R2）同步，我只需要一种方式“下载”同步，即客户端数据库始终被服务器覆盖。

我怎样才能做到这一点？

我尝试了几天让它与 Microsoft Sync Framework 2.1 一起工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:27:07.237

如果您真的不需要任何数据从客户端返回到您的服务器数据库，那么使用 MSF2.1 对您的需要来说是多余的。构建（或查找）一个为数据库中的每个表创建“插入或更新”存储过程的工具可能会更快、更容易。有了这些以及每个表中的正确时间戳和删除标志，您应该能够以比实现同步框架更少的开销来完成它。

此外，如果您还没有查看它，请查看 Web 同步复制选项：http: [//msdn.microsoft.com/en-us/library/ms151763.aspx](http://msdn.microsoft.com/en-us/library/ms151763.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:28:36.187

你看过这个样本吗？

[数据库同步：SQL Server 和 SQL Express N-Tier with WCF](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)

# selenium - selenium firefox 配置文件异常

> ID：10224780
> 
> 赞同：1
> 
> 时间：2012-04-19T08:57:57.127
> 
> 标签：selenium, webdriver

java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme。(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V 在 org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:64) 在 org.openqa.selenium.remote .internal.HttpClientFactory.(HttpClientFactory.java:50) 在 org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:111) 在 org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:78) ) 在 org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:93) 在 org.openqa.selenium.FirefoxDriver.startClient(FirefoxDriver.java:187) 在 org.openqa.selenium.firefox.FirefoxDriver.( FirefoxDriver.java：

```
 this is my ivy.xml file .
   <dependencies>
    <dependency org="antlr" name="antlr" rev="2.7.6"/>
    <dependency org="aopalliance" name="aopalliance" rev="1.0"/>
     <dependency org="bouncycastle" name="bcmail-jdk14" rev="139"/>
     <dependency org="commons-collections" name="commons-collections" rev="3.1"/>
     <dependency org="commons-dbcp" name="commons-dbcp" rev="1.4"/>
     <dependency org="commons-httpclient" name="commons-httpclient" rev="3.1"/>
               <dependency org="commons-logging" name="commons-logging" rev="1.1.1"/>
               <dependency org="commons-pool" name="commons-pool" rev="1.6"/>
               <dependency org="dom4j" name="dom4j" rev="1.6.1"/>
               <dependency org="org.hibernate" name="ejb3-persistence" rev="1.0.2.GA"/>
               <dependency org="org.apache.pdfbox" name="fontbox" rev="1.6.0"/>
               <dependency org="jtidy" name="jtidy" rev="4aug2000r7-dev"/>
               <dependency org="org.seleniumhq.selenium" name="selenium-java" rev="2.20.0"/>
                <dependency org="javax.inject" name="javax.inject" rev="1"/>
               <dependency org="javax.transaction" name="jta" rev="1.1"/>
               <dependency org="org.hibernate" name="hibernate-validator" rev="4.0.2.GA"/>
               <dependency org="org.hibernate" name="hibernate-cglib-repack" rev="2.1_3"/>
               <dependency org="org.hibernate" name="hibernate-annotations" rev="3.5.6-Final"/>
               <dependency org="org.slf4j" name="slf4j-api" rev="1.6.0"/>
               <dependency org="org.slf4j" name="slf4j-jcl" rev="1.6.0"/>
               <dependency org="org.slf4j" name="slf4j-log4j12" rev="1.6.0"/>
               <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.0"/>  
               <dependency org="mysql" name="mysql-connector-java" rev="5.1.18"/>
               <dependency org="pdfbox" name="pdfbox" rev="0.7.3"/>
               <dependency org="jaxen" name="jaxen" rev="1.1.1"/>
               <dependency org="org.seleniumhq.webdriver" name="webdriver-firefox" rev="0.9.7376"/>
               <dependency org="org.seleniumhq.webdriver" name="webdriver-common" rev="0.9.7376"/>
               <dependency org="javassist" name="javassist" rev="3.4.GA"/>
               <dependency org="net.sf.hibernate4gwt" name="hibernate4gwt" rev="1.0.4"/>
               <dependency org="org.seleniumhq.selenium" name="selenium-server" rev="2.20.0"/>
                </dependencies>

  getting above exception.. dont know which jar is missing... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:30:11.387

嗨，这些是我使用 selenium 时为我下载的所有 jars

*   selenium-java-2.20.0.jar
*   selenium-android-driver-2.20.0.jar
*   selenium-remote-driver-2.20.0.jar
*   cglib-nodep-2.1_3.jar
*   json-20080701.jar
*   番石榴-11.0.1.jar jsr305-1.3.9.jar
*   selenium-chrome-driver-2.20.0.jar
*   selenium-htmlunit-driver-2.20.0.jar
*   selenium-api-2.20.0.jar
*   htmlunit-2.9.jar xalan-2.7.1.jar
*   序列化程序-2.7.1.jar
*   commons-collections-3.2.1.jar
*   commons-lang-2.6.jar
*   httpmime-4.1.2.jar
*   commons-codec-1.4.jar
*   htmlunit-core-js-2.9.jar
*   xercesImpl-2.9.1.jar
*   xml-apis-1.3.04.jar
*   nekohtml-1.9.15.jar
*   cssparser-0.9.5.jar
*   sac-1.3.jar
*   commons-logging-1.1.1.jar
*   httpclient-4.1.2.jar
*   httpcore-4.1.2.jar
*   selenium-firefox-driver-2.20.0.jar
*   commons-io-2.0.1.jar
*   commons-exec-1.1.jar
*   selenium-ie-driver-2.20.0.jar
*   jna-3.4.0.jar
*   平台-3.4.0.jar
*   selenium-iphone-driver-2.20.0.jar
*   selenium-support-2.20.0.jar

我建议你把它们全部拿下来，然后开始一个一个地删除，直到你找到它真正需要的东西。

# java - junit 附加文件到报告

> ID：10224781
> 
> 赞同：0
> 
> 时间：2012-04-19T08:57:57.183
> 
> 标签：java, junit, surefire

我有一个用 JUnit 编写的测试。如果失败，我想在报告中附加一个文件。

我的想法：我只需要获取路径和报告名称，这样我就可以在它旁边放一个自定义文件，这样就可以很容易地找到它。

如何获取该报告文件或路径名？

附加信息：这些测试通过 Eclipse 或 Jenkins 运行。

**更新：** 名称可以这样找到：[Get name of current execution test in JUnit 4](https://stackoverflow.com/questions/473401/get-name-of-currently-executing-test-in-junit-4)

这条路似乎是一个万无一失的话题......

# ruby - 红宝石中的并行性

> ID：10224787
> 
> 赞同：2
> 
> 时间：2012-04-19T08:58:18.133
> 
> 标签：ruby, multithreading

我的 ruby​​ 构建脚本中有一个循环，它遍历每个项目并调用 msbuild 并执行各种其他操作，例如缩小 css/js。

每个循环迭代都独立于其他循环迭代，所以我想并行化它。

我该怎么做呢？

我试过了：

```
myarray.each{|item|
    Thread.start {

        # do stuff

     }
}
puts "foo" 
```

但 ruby​​ 似乎立即退出（打印“foo”）。也就是说，它在循环上运行，启动了一个线程负载，但是因为在 之后没有任何东西`each`，ruby 退出杀死其他线程:(

我知道我可以做到`thread.join`，但如果我在循环内这样做，那么它不再是并行的。

我错过了什么？

我知道[http://peach.rubyforge.org/](http://peach.rubyforge.org/)但是使用它我会得到各种奇怪的行为，这些行为看起来像我不知道如何解决的变量范围问题:(

**编辑：**如果我可以在放置“foo”之前等待所有子线程执行，或者至少是主 ruby​​ 线程退出，那将很有用。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:10:38.597

将所有线程存储在一个数组中，并通过数组调用 join 循环：

```
threads = myarray.map do |item|
  Thread.start do
    # do stuff
  end
end
threads.each { |thread| thread.join }
puts "foo" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:15:52.773

在这里使用[em-synchrony](https://github.com/igrigorik/em-synchrony) :)。纤维很可爱。

```
require "em-synchrony"
require "em-synchrony/fiber_iterator"

# if you realy need to get a Fiber per each item
# in real life you could set concurrency to, for example, 10 and it could even improve performance
# it depends on amount of IO in your job
concurrency = myarray.size
EM.synchrony do
  EM::Synchrony::FiberIterator.new(myarray, concurrency).each do |url|
    # do some job here
  end
  EM.stop
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:03:59.543

考虑到 ruby​​ 线程是绿色线程，所以你没有原生的真正并行性。如果这是你想要的，我建议你看看 JRuby 和 Rubinius：

[http://www.engineyard.com/blog/2011/concurrency-in-jruby/](http://www.engineyard.com/blog/2011/concurrency-in-jruby/)

# mysql - mySQL - 连胜

> ID：10224788
> 
> 赞同：3
> 
> 时间：2012-04-19T08:58:25.910
> 
> 标签：mysql

嗨，我正在尝试找出一种方法来为我桌上的每个成员找到最大的连胜纪录。当桌子建成时，这从未在计划中发生，所以我寻求帮助以了解如何实现这一目标。

我的结构如下：

```
id  player_id   opponant_id     won     loss    timestamp 
```

如果是个人游戏，玩家 id 就是他们的 id。如果他们被某人挑战，他们的 id 是对手的 id，而获胜的损失（1 或 0）与 player_id 相关。

我想为每个用户找到最大的连胜纪录。

任何人都对如何使用当前表结构执行此操作有任何想法。

问候

编辑

这是一些测试数据，其中 id 3 是有问题的玩家：

```
id  player_id   won     loss    timestamp
1   6           0       1       2012-03-14 13:31:00
13  3           0       1       2012-03-15 13:10:40
17  3           0       1       2012-03-15 13:29:56
19  4           0       1       2012-03-15 13:37:36
51  3           1       0       2012-03-16 13:20:05
53  6           0       1       2012-03-16 13:32:38
81  3           0       1       2012-03-21 13:14:49
89  4           1       0       2012-03-21 14:01:28
91  5           0       1       2012-03-22 13:14:20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:24:08.627

试试这个。 **编辑考虑损失行**

```
SELECT 
    d.player_id,
    MAX(d.winStreak) AS maxWinStreak
FROM (
    SELECT
        @cUser := 0,
        @winStreak := 0
) v, (

    SELECT
        player_id,
        won,
        timestamp,
        @winStreak := IF(won=1,IF(@cUser=player_id,@winStreak+1,1),0) AS winStreak,
        @cUser := player_id
    FROM (
        (
            -- Get results where player == player_id
            SELECT
                player_id,
                won,
                timestamp
            FROM matchTable
        ) UNION (
            -- Get results where player == opponent_id (loss=1 is good)
            SELECT
                opponent_id,
                loss,
                timestamp
            FROM matchtable
        )
    ) m
    ORDER BY 
        player_id ASC,
        timestamp ASC
) d
GROUP BY d.player_id 
```

这通过选择所有赢/输并计算连续获胜来实现。然后子查询按 player_id 分组，并且在循环通过时计算的最大 winStreak 是每个玩家的输出。

无论如何，它似乎对我的测试数据集很有效:)

为了更有效地做到这一点，我会重组，即

```
matches (
    matchID,
    winningPlayerID,
    timeStamp
)

players (
    playerID
    -- player name etc
)

matchesHasPlayers (
    matchID,
    playerID
) 
```

这将导致内部查询

```
SELECT
    matches.matchID,
    matchesHasPlayers.playerID,
    IF(matches.winningPlayerID=matchesHasPlayers.playerID,1,0) AS won
    matches.timestamp
FROM matches
INNER JOIN matchesHasPlayers
ORDER BY matches.timestamp 
```

导致

```
SELECT 
    d.player_id,
    MAX(d.winStreak) AS maxWinStreak
FROM (
    SELECT
        @cUser := 0,
        @winStreak := 0
) v, (
    SELECT
        matchesHasPlayers.playerID,
        matches.timestamp,
        @winStreak := IF(matches.winningPlayerID=matchesHasPlayers.playerID,IF(@cUser=matchesHasPlayers.playerID,@winStreak+1,1),0) AS winStreak,
        @cUser := matchesHasPlayers.playerID
    FROM matches
    INNER JOIN matchesHasPlayers
    ORDER BY 
        matchesHasPlayers.playerID ASC,
        matches.timestamp ASC
) d
GROUP BY d.player_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:12:03.337

```
SELECT * FROM
(
    SELECT player_id, won, loss, timestamp
    FROM games
    WHERE player_id = 123
    UNION
    SELECT opponant_id as player_id, loss as won, won as loss, timestamp
    FROM games
    WHERE opponant_id = 123
)
ORDER BY timestamp 
```

这将为您提供按时间戳排序的一名玩家的所有结果。然后您需要循环这些结果并计算获胜记录，或者将它们全部连接成一个字符串，然后使用字符串函数在该字符串中找到您的最高 11111 集。该代码将根据您要使用的语言而有所不同，但从逻辑上讲，这是两种选择。

# java - Android游戏高分实现

> ID：10224790
> 
> 赞同：-1
> 
> 时间：2012-04-19T08:58:43.057
> 
> 标签：java, android, sqlite, opengl-es

我正在为我的最后一年项目制作太空射击游戏，并认为包含本地分数/高分屏幕会很酷。我不知道该怎么做，如果有人能指出我正确的方向，我将不胜感激，我在网上找到的所有示例对我来说都非常复杂。我还希望分数显示在使用 opengl es 渲染的游戏屏幕上。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T09:58:38.307

我刚刚为我目前正在开发的 OpenGL ES 游戏创建了一个高分板。因为这是*你*最后一年的项目，我不会把它用作粘贴箱，而是给你一些指示。在我的应用程序中，分数被发送到我的 PHP 脚本，该脚本将值存储在 MySQL 中。

# 我用了什么：

*   处理所有与高分有关的新课程
*   AlertDialog "alertName" - 询问玩家姓名
*   使用 alertName.setView(input) 将 EditText "input" 添加到对话框中；
*   使用 AsyncTask 将分数提交到服务器
    *   *这可以替换为其他[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)选项，内部、外部或 SQLlite db*

当游戏结束时（所有生命都消失了，计时器到了等），我使用了一行代码，与此不太相似：

```
HighScore hs = new HighScore(context, score, level); 
```

上下文是必需的，因此可以创建 AlertDialogs 和 Toasts。构造函数调用函数 submit()，该函数显示 AlertDialog 询问玩家姓名，然后将数据发送到服务器。

我的课程包含这行代码，让玩家知道他们在收到来自服务器的响应后是否进入了前 100 名：

```
Toast.makeText(mContext, "You didn't make the score board", 
        Toast.LENGTH_SHORT).show(); 
```

高分列表存储在一个 ArrayList 中

```
private ArrayList<String> highscores = new ArrayList<String>(); 
```

并且数据使用 String.format 以类似的方式填充：

```
highscore_headers = String.format("%7s","rank") + 
        String.format("%11s","name") + 
        String.format("%10s","score") + 
        String.format("%5s","lvl"); 
```

# 接着：

在您的渲染器的 onDrawFrame 中，您可以构建高分类，这样您就可以调用类似下面的一个衬里，其中将包含您的翻译、缩放 pushMatrix 和 popMatrix 调用以将高分数据绘制到屏幕上。

```
hs.draw(gl); 
```

其中包含一个循环，与此不太相似：

```
for(int i=0; i<highscores.size(); i++){
    text.drawText(gl, highscore.get(i).toString());
    gl.glTranslatef(0f, -0.8f, 0f);
} 
```

> 注意：Text 是我编写的一个类，用于根据每个字符的 char 值在屏幕上绘制各种纹理，然后将其转换为与我的字符映射图像文件相关的一组 x,y 坐标。

*希望这有助于将您推向正确的方向，并祝您的项目好运*

* * *

**使用 OpenGL ES 渲染的我的 android 应用程序高分状态的屏幕截图** ![使用 OpenGL ES 渲染的我的 android 应用程序高分状态的屏幕截图](../Images/bef57828dc3a6cb335707ff02ded77de.png)

* * *

# 编辑：将分数发送到 PHP

这不会是我的源代码的精确复制和粘贴，但希望这里有足够的信息可以让您大致了解这一切。我的最终代码还为设备提供了一个 uniqid，用户可以在该设备上跟踪存储在数据库中的所有分数 - 但这是另一回事。

**php 文件：** 我确实搞砸了签名请求、散列分数，但为了我的测试版和更快地发布游戏，我选择了纯文本条目。下面的代码也没有详细突出玩家提交的分数，或者根据时间获得排名。

```
if(isset($_POST['name']) && isset($_POST['score'])){
    $sql = "INSERT INTO highscores(name, score) VALUES (:name, :score)";
    $data = array(":name"=>$_POST['name'], ":score"=>$_POST['score']);
    $db->run($sql, $data);
    echo display();
}
function display(){
    $sql = "SELECT name, score FROM highscores ORDER BY score DESC";
    $result = $db->run($sql, array());
    return json_encode($result);
} 
```

*需要注意的是 $db 对象是我为包装 PDO 方法 prepare 和 execute 制作的一个小类，它以关联数组的形式返回结果*

**HighScore Android 类：** 同样，我不会复制/粘贴，但这将说明如何将数据发布到服务器，接收 JSON 字符串，然后填充字符串并将其添加到 highscores ArrayList。下面的代码是 HighScore 类的构造函数，它要求用户输入。

```
List<NameValuePair>nameValuePairs = new ArraList<NameValuePair>(2);
AlertDialog alertName;
DefaultHttpClient client = new DefaultHttpClient();
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String response = "";

HighScore(Context context, int score){
    nameValuePairs.add(new BasicNameValuePair("score", + score.toString()));
    alertName = new AlertDialog(context).create();
    EditText input = new EditText(context);
    alertName.setTitle('Enter Your Name');
    alertName.setButton(AlertDialog.BUTTON_POSITIVE, "OK", 
        new DialogInterface.OnClickListener(){
            @Override
            public void onClick(DialogInterface dialog, int which){
                nameValuePairs.add(
                new BasicNameValuePair("name", input.getText().toString())
                );
                SubmitAsync sa = new SubmitAsync();
                sa.execute();
            }
    });
    alertName.show();
} 
```

SubmitAsync 类是 HighScore 类的子类，它将设置 http 客户端发送数据，并添加接收到的数据。数据被消化为 JSON 并如前所述填充字符串，然后添加到高分 ArrayList

```
class SubmitAsync extends AsyncTask<String, Void, Void>{
    @Override
    protected Void doInBackground(String... params){
        HttpPost postMethod = new HttpPost("http://address-of-script.php");
        postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        response = client.execute(postMethod, responseHandler);
        JSONArray jsonArray  = new JSONArray(response);
        for(int i=0; i<jsonArray.length(); i++){
            JSONObject j = jsonArray.getJSONObject(i);
            String name = String.format("%11s", j.get("name"));
            String score = String.format("%10s", j.get("score"));
            highscores.add(name + score);
        }
    }
} 
```

这是非常基础的代码，而且比我任何时候都想在这里输入的代码要多得多，而且绝对是我有史以来最长的帖子。我会认真考虑@Dan 的评论，并通过基于服务器的方法研究本地存储以获得高分板

> > *如果复制和粘贴这些代码片段可能不起作用。所以请尝试理解它们并自己编写代码:)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:55:30.633

我已经在同一个项目中这样做了，我做了一个对象列表。这个对象代表一个高分。如果我需要存储 High Scoren 的列表，我会序列化列表，如果我需要显示它，我会反序列化这个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:03:42.803

好吧，以您想要的任何格式（如名称、分数、日期等）编写一个包含高分的文件，以便您稍后解析。然后，每次你想写一个新的分数时，继续编辑它。盲目地阅读并展示它。

# macos - 以编程方式切换 Mac OS X 上的键盘查看器

> ID：10224791
> 
> 赞同：1
> 
> 时间：2012-04-19T08:58:45.583
> 
> 标签：macos, cocoa, keyboard, viewer

我创建了一个可可应用程序，它有一个带有文本字段的窗口来获取用户输入，一个小的键盘图标按钮可以调出键盘查看器。当用户单击确定或取消按钮完成时，我想隐藏键盘查看器。我所做的如下：

```
//action for keyboard-icon button
-(IBAction)input:(id)sender
{
    [self toggleKeyboard:YES];
}

//action for Cancel button
-(IBAction)cancel:(id)sender
{
    [self toggleKeyboard:NO];
    [NSApp abortModal];
    [[self window] orderOut: self];
}

//action for OK button
-(IBAction)ok:(id)sender
{
    [self toggleKeyboard:NO];
    [NSApp stopModal];
    [[self window] orderOut: self];
}

-(void)toggleKeyboard:(BOOL)show
{
    NSDictionary *property = [NSDictionary dictionaryWithObject:(NSString*)kTISTypeKeyboardViewer
                                                  forKey:(NSString*)kTISPropertyInputSourceType];
    NSArray *sources = (NSArray*)TISCreateInputSourceList((CFDictionaryRef)property, false);

    TISInputSourceRef keyboardViewer = (TISInputSourceRef)[sources objectAtIndex:0];
    if (show == YES)
    {
        TISSelectInputSource(keyboardViewer);
    }
    else 
    {
        TISDeselectInputSource(keyboardViewer);
    }

    CFRelease((CFTypeRef)sources);

} 
```

我可以成功启动键盘查看器，但 TISDeselectInputSource 无法始终隐藏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T22:59:11.230

可以以编程方式隐藏键盘查看器。不久前，我为我的媒体中心制作了一个 AppleScript，它将切换它。我不会包含显示它的部分，部分原因是您已经弄清楚了，但主要是因为我这样做的方式是调用一些我不记得从哪里得到它的可执行文件。

无论如何，这是 AppleScript：

```
tell application "System Events"
    if exists (process "Keyboard Viewer") then
        click (process "Keyboard Viewer"'s window 1's buttons whose subrole is "AXCloseButton")
    end if
end tell 
```

这使用辅助功能，因此您需要打开“启用辅助设备的访问权限”才能使其工作。

请注意，同样的事情可以在 Objective-C / C++ 应用程序中使用 Accessibility API 来完成，您可以使用它来避免在应用程序中调用 AppleScript。

# php - 查看编译的 PHP 文件

> ID：10224798
> 
> 赞同：0
> 
> 时间：2012-04-19T08:59:45.450
> 
> 标签：php

嗨，我得到了一个我认为已编译的 php 文件

来源看起来像这样 ![在此处输入图像描述](../Images/c99c73c037be1c1d0f2b8a72148ebd75.png)

我可以反编译这个文件来查看源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:17:17.540

未编译 PHP 文件。它们在执行期间得到解释。看起来您的文件以某种方式损坏。尝试重新下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:23:21.640

您可能正在查看使用混淆器编译的 PHP 文件，例如，`ZendGuard`或者`IonCube`通过图片上的代码外观，我不认为代码结构是其中任何一个的一部分。

也可能是一个简单的损坏文件，但不排除第 3 方混淆器。

您是否尝试过在服务器上执行脚本？如果服务器本身不存在用于解码脚本的服务器模块，大多数混淆器实际上会抱怨缺少服务器模块。但并非所有混淆器都是如此。

# svn - 在线服务下载 SVN 存储库/文件夹？

> ID：10224799
> 
> 赞同：23
> 
> 时间：2012-04-19T08:59:48.057
> 
> 标签：svn, download, firewall

我需要访问在线可用的 SVN 存储库，但不幸的是，我位于不允许`svn checkout ...`等的防火墙后面。是否有可以提供存储库 URL 的服务，它会为我下载文件并提供 ZIP 文件或某物？

相关问题：[下载 SVN 存储库？](https://stackoverflow.com/questions/8386894/download-an-svn-repository)但是，答案对我的情况没有帮助（我绝对不能使用本地 SVN 客户端）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-19T10:24:54.653

由于[http://svndownload.eu5.org/](http://svndownload.eu5.org/)似乎不再起作用，我建议按照[您链接到的问题的答案中的](https://stackoverflow.com/a/9349920/299756)`wget`说明使用。

如果您在 Windows 机器上并且需要，`wget`我可以推荐[GOW（Windows 上的 Gnu）](https://github.com/bmatzelle/gow)作为 Windows 的 unix 命令的轻量级集合。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-13T08:47:53.557

[kalyfe](https://stackoverflow.com/a/16102481/1099452)告诉我的网络对我不起作用，我最终下载了一个损坏的`.zip`文件。但是，如果您可以使用 HTTP(s) 浏览代码，则可以使用[此客户端应用程序](http://downloadsvn.codeplex.com/)。

**2016.03 更新**：再次测试该站点，我们的新公司防火墙显示该站点是恶意的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-23T11:46:38.220

然而，有一个轻量级的工具，适用于 Windows。

它可以下载 Git 和 SVN 存储库

[https://downloadsvn.codeplex.com/](https://downloadsvn.codeplex.com/)

# delphi - Delphi TWebBrowser 内存泄漏

> ID：10224801
> 
> 赞同：4
> 
> 时间：2012-04-19T09:00:02.627
> 
> 标签：delphi, delphi-2009, twebbrowser

我的应用程序使用加载网页的 TWebBrowser。问题是，关闭包含 TWebBrowser 的表单后，使用的内存没有被释放。如果我打开和关闭表单，内存就会不断增加。

看到一些关于调用 SetProcessWorkingSetSize() 或 CoFreeUnusedLibrariesEx() 来解决这个问题的帖子，但我不确定这些是否是正确的解决方案。

知道如何释放 TWebBrowser 使用的内存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-30T20:22:53.340

[QC#106829](http://qc.embarcadero.com/wc/qcmain.aspx?d=106829)描述了 TWebBrowser 内存泄漏的一种可能原因。访问（以及通过或`Document`实现的任何其他属性）会导致泄漏，因为它调用 AddRef 而不调用 Release。作为一种解决方法，您可以手动调用 Release，或者您可以修补 VCL（[请参阅此处](http://marc.durdin.net/2012/07/understanding-and-correcting-interface-reference-leaks-in-delphis-vcl-olectrls-pas/)），或者您可以避免有问题的属性（例如，通过使用而不是）。`TOleControl.GetIDispatchProp``TOleControl.GetIUnknownProp``browser.DefaultInterface.Document``browser.Document`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:04:57.133

使用 TWebBrowser 在幕后做了很多工作，与 Internet Explorer 的完整实例所做的大部分工作相同。它对你隐藏，但它仍然存在，我们可能无法强制从记忆中删除它。检查页面加载前后的内存使用情况，并测试调用`Navigate('about:blank');`. 还要检查你的析构函数是否被正确调用，并考虑`Navigate('about:blank');`从 OnClose 或 OnCloseQuery 调用。我发现这确实有助于记忆情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-16T16:25:27.003

最好的解决方案是停止使用 TWebbrowser。

CEF4Delphi 是一个使用 Chrome 代替 Internet Explorer 的免费库。始终保持最新且非常高效：

[https://github.com/salvadordf/CEF4Delphi](https://github.com/salvadordf/CEF4Delphi)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-16T03:18:12.930

```
Uses Winapi.PsAPI;
 ...
{$IFDEF WIN32}
procedure TForm1.MemoryFree;
var
  HandleCaptureProcessus: THandle;
  UnProcessus: TProcessEntry32;
  PIDProcessus: THandle;
  HandleProcessus: THandle;
  NameOfProcess: string;
begin
  PIDProcessus := 4294967295;
  NameOfProcess := ExtractFileName(Application.ExeName);

  HandleCaptureProcessus := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
  UnProcessus.dwSize := SizeOf(TProcessEntry32);

  Process32First(HandleCaptureProcessus, UnProcessus);
  repeat
    if UnProcessus.szExeFile = NameOfProcess then
    begin
      PIDProcessus := UnProcessus.th32ProcessID;
      Break;
    end;
  until not Process32Next(HandleCaptureProcessus, UnProcessus);

  if PIDProcessus = 4294967295 then
  begin
    CloseHandle(HandleCaptureProcessus);
    exit;
  end;

  HandleProcessus := OpenProcess(PROCESS_ALL_ACCESS, False, PIDProcessus);

  EmptyWorkingSet(HandleProcessus);

  CloseHandle(HandleProcessus);
end;
{$ELSE}
procedure TForm1.MemoryFree;
begin
  //**
end;
{$ENDIF} 
```

为了清除内存，我使用了这个功能，在论坛的某个地方找到。它比 SetProcessWorkingSetSize() 方法清除“工作集”要好得多，但调用起来更困难，它是在 Winapi.PsAPI 单元中注册的。但是，我注意到这两个函数都清理了“工作集”。而如果你查看任务管理器中的“分配的内存”一栏，可以看到这个参数没有被清除。清理后我的应用程序的“工作集”可以减少到 10 MB，但所有分配的内存将保持等于 1.5 GB。而且，在我看来，这就是导致“内存不足”错误的原因。如果您长时间查看繁重的网站，此错误仍然会出现。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-09T12:22:36.610

要释放内存，只需初始化新文档：

```
(WebBrowser.Document as IPersistStreamInit).InitNew; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-10-02T21:54:40.110

```
procedure TForm1.FreeMemory;
begin
    if Win32Platform = VER_PLATFORM_WIN32_NT then
    SetProcessWorkingSetSize(GetCurrentProcess, $FFFFFFFF, $FFFFFFFF);
end; 
```

并时不时地调用它

```
FreeMemory; 
```

# plone - plone.outputfilters 和collective.easytemplate

> ID：10224803
> 
> 赞同：0
> 
> 时间：2012-04-19T09:00:08.110
> 
> 标签：plone

我正在使用 plone.outputfilters (1.1) 替换由 CKEditor 生成的 resolveuid 链接（或任何配置为生成 resolveuid 链接的 Plone 编辑器）。这在普通页面中工作正常。但是它不适用于由 easytemplate (0.7.9) 生成的模板化文档。plone.outputfilters 是否仅限于替换普通页面上的链接？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:09:07.920

collective.easytemplate 不使用与普通页面相同的 HTML 转换

*   Easy Template 是在 plone.outputfilters 之前创建的

*   Easy Template 设计用于输出原始 HTML，之前出现过安全 HTML 等过滤器损坏原始 HTML 输出的问题

支持 Easy Template 的 plone.outputfilters 功能将是一个功能请求，您可以在此处填写：

[http://plone.org/products/easy-template/issues/](http://plone.org/products/easy-template/issues/)

请为您的功能请求找到赞助商，Plone 社区可以指导您如何修补产品。

# r - 如何在R中的公式中选择公式的一部分？

> ID：10224805
> 
> 赞同：7
> 
> 时间：2012-04-19T09:00:17.547
> 
> 标签：r, parsing, formula

假设我有以下公式：

```
fr <- formula(y~myfun(x)+z) 
```

给定对象`fr`R 中是否有返回的函数`myfun(x)`？我已经编写了自己的函数（下面的代码），它基本上可以满足我的需要，但也许有一些标准的方法可以做到这一点？

我的功能的代码：

```
selectmds <- function(expr,funcn) {
    if(length(expr)>2) {
        a <- expr[[2]]
        b <- expr[[3]]
        if(length(a)>1) {
            if(as.name(a[[1]])==funcn) {
                if(length(grep(funcn,all.names(b)))>0) {
                    return(list(a,selectmds(b,funcn)))
                }
                else return(list(a))
            }
        }
        if(length(b)>1) {
            if(as.name(b[[1]])==funcn) {
                if(length(grep(funcn,all.names(a)))>0) {
                    return(list(b,selectmds(a,funcn)))
                }
                else return(list(b))
            }
        }
        for(i in 2:length(expr)) {
            if(length(grep(funcn,all.names(expr[[i]])))>0)return(selectmds(expr[[i]],funcn))
        }
    }
    return(NULL)
} 
```

这里有几个例子：

```
> selectmds(formula(y~myfun(x)+z),"myfun")
[[1]]
myfun(x)

> unlist(selectmds(formula(y~myfun(x)+z+myfun(zz)),"myfun"))
[[1]]
myfun(zz)

[[2]]
myfun(x) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T09:21:18.507

不确定这是最好的，但您可以通过以下方式做到：

```
f <- function(fm, fun) {
  l <- as.list(attr(terms(fm), "variables"))[-1]
  l[grep(fun, l)]
} 
```

然后，

```
> f(formula(y~myfun(x)+z),"myfun")
[[1]]
myfun(x)

> f(formula(y~myfun(x)+z+myfun(zz)),"myfun")
[[1]]
myfun(x)

[[2]]
myfun(zz) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T19:42:01.730

有一个`specials`参数`terms`允许您在公式中标记命名函数以按位置提取。

所以，你可以写

```
selectmds<-function(form,fn) {
  tt<-terms(form,specials=fn);
  idx<-attr(tt,"specials");
  v<-as.list(attr(tt,"variables"))[-1];
  unlist(lapply(idx,function(i) v[i]))
} 
```

然后你的测试用例给出

```
> selectmds(formula(y~myfun(x)+z),"myfun")
$myfun
myfun(x)

> selectmds(formula(y~myfun(x)+z+myfun(zz)),"myfun")
$myfun1
myfun(x)

$myfun2
myfun(zz) 
```

但是，你也可以这样做

```
> selectmds(formula(y~myfun(x)+myfun(x2)+z+yourfun(zz)),c("myfun","yourfun"))
$myfun1
myfun(x)

$myfun2
myfun(x2)

$yourfun
yourfun(zz) 
```

您可以在哪里敲击`unlist`以将其嵌套在命名函数中。

# php - 如何将 DNS 服务器设置为 dns_get_record 功能？

> ID：10224808
> 
> 赞同：1
> 
> 时间：2012-04-19T09:00:29.090
> 
> 标签：php, dns

我正在研究[http://www.php.net/manual/en/function.dns-get-record.php](http://www.php.net/manual/en/function.dns-get-record.php)似乎没有设置自定义 DNS 服务器的选项。PHP中是否有任何替代函数可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:44:31.453

查看 PEAR 的库 Net_DNS2：[http ://pear.php.net/package/Net_DNS2](http://pear.php.net/package/Net_DNS2)

您可以指定要查询的名称服务器。

# android - 如何限制仅适用于 10.1 平板电脑的应用程序？

> ID：10224815
> 
> 赞同：-4
> 
> 时间：2012-04-19T09:00:50.793
> 
> 标签：android

我正在制作一个我只想为 10.1 平板电脑运行的应用程序。

你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:09:43.987

尝试将此添加到您的清单中。

```
<supports-screens
    android:xlargeScreens="true"
    android:largeScreens="false"
    android:normalScreens="false"
    android:smallScreens="false" >
</supports-screens> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:25:40.873

此 [android.os.build](http://developer.android.com/reference/android/os/Build.html)
包含您感兴趣的属性。Build.MODEL、Build.PRODUCT 和 Build.MANUFACTURER 应该为您提供所需的信息。它们都是 String 对象。

而且，在安装之前您无法检测到设备型号，但在安装应用程序后，您可以使用 Build.Model 属性检测设备型号并相应地运行您的应用程序..

你也可以这样做

```
 String Screen_resolution="Screen Resolution : "+width_pixel+"*"+height_pixel+"\n\n";
        String os_version="Operating System Version : " + android.os.Build.VERSION.RELEASE+"\n\n";
        String os_api_level="API Level : " + android.os.Build.VERSION.SDK+"\n\n";
        String Model_number=" Model : "+android.os.Build.MODEL+"\n\n";
        String product=" Product : " + android.os.Build.PRODUCT;

tv.setText(Screen_resolution);
        tv.append(os_version);
        tv.append(os_api_level);
        tv.append(Model_number);
        tv.append(product); 
```

它会帮助你

# nlp - Wordnet 编辑树结构

> ID：10224818
> 
> 赞同：6
> 
> 时间：2012-04-19T09:01:02.140
> 
> 标签：nlp, wordnet

我正在开发一个使用 Wordnet 概念层次结构进行操作的应用程序。我发现数据库中缺少一些我需要的单词。是否有 API 或工具，或者我可以插入新词、编辑结构等的任何其他方式？（我使用的是 Wordnet 3.0。）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:08:09.193

如果您使用[Wordnet 的 RDF 版本，](http://semanticweb.cs.vu.nl/lod/wn30/)很容易添加新的同义词集、关系、单词等。

# wordpress - 显示来自谷歌分析的顶级子域

> ID：10224820
> 
> 赞同：0
> 
> 时间：2012-04-19T09:01:23.040
> 
> 标签：wordpress, google-analytics, google-analytics-api, wpmu

如何在我的网站侧边栏中从我的谷歌分析帐户中输出前 20 个子域的列表？

原因：我正在使用 WPMU，并希望按访问者编号创建博客的顶级列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:05:46.403

我不知道 Google Analytics Management Api 提供了多少功能，但您似乎可以从您的帐户中提取一些数据......

[分析管理 API](https://developers.google.com/analytics/devguides/config/mgmt/v3/)

[Analytics Management API 休息服务](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtRest)

# facebook - 代表我的雇主获取应用 ID

> ID：10224821
> 
> 赞同：0
> 
> 时间：2012-04-19T09:01:23.607
> 
> 标签：facebook, oauth-2.0

我是一家公司雇用的程序员，负责开发该公司拥有的网络应用程序。我们允许用户使用 Twitter 登录。我们希望允许用户使用 Facebook 登录。为此，我们需要将令牌插入 OAuth 2。

问题是，据我所知，Facebook 要求应用程序归 Facebook 用户所有，并且 Facebook 用户必须唯一标识一个自然人。我不想使用我现有的 Facebook ID 注册；我的工作身份与朋友和家人无关，而且我不会无限期地成为公司的员工。我还没有找到任何信息表明我可以将应用程序的所有权交给另一个开发人员，尽管我认为这样一个过程在逻辑上是必需的。我可以违反 Facebook 条款并创建一个新 ID 来注册应用程序，或者我可以尝试通过注册应用程序的过程来指导公司的 CEO（他不是程序员）。由于我什至无法通过第 1 步，因此我无法排练该过程，这将使这变得复杂。

所以我的编程问题是，有没有一种方法我还没有发现 Facebook 允许公司委托注册应用程序的琐事？如果做不到这一点，是否有人通过 Facebook 的开发者迷宫发布了一条路线，以最少的步骤获取 OAuth 密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:14:24.197

您最初可以使用您的 Facebook 帐户创建应用程序，然后您可以创建一个名为“我的应用程序管理员”之类的 Facebook 群组 - 然后让公司中重要的任何人加入该 Facebook 群组（包括您自己）然后在应用程序中设置，将该组设置为应用程序的管理员。（您还可以为见解用户、开发人员和测试人员创建单独的组）

该组中的任何人现在都将成为管理员。这样，公司可以通过在该组中添加或删除人员来控制对应用程序的访问。

这不是一个理想的解决方案。Facebook 希望能够将应用程序开发人员帐户链接到真实的人——这是防止垃圾邮件等的一种方式。

希望这会有所帮助。

# jquery - Jquery 选择的更改在 IE9 上不起作用？

> ID：10224822
> 
> 赞同：1
> 
> 时间：2012-04-19T09:01:27.530
> 
> 标签：jquery, asp.net, internet-explorer

嗨，这是我的点击功能。它适用于 chrome 和 firefox，但可以在 IE9 上执行任何操作

当我单击下拉框时，不要在 IE9 上运行单击功能。

**脚本：**

```
$('.lstKuralTipleri option').click(function() {

    switch ($('.lstKuralTipleri :selected').index()) {
    case 0:
        $('.SartliFormatDegereGore').slideDown();
        $('.SartliFormatTariheGore').slideUp();
        break;
    case 1:
        $('.SartliFormatTariheGore').slideDown();
        $('.SartliFormatDegereGore').slideUp();
        break;
    }
});​ 
```

**象素**

```
<asp:ListBox style="padding-top:3px" runat="server" ID="lstKuralTipleri" CssClass="lstKuralTipleri" Width="805px">
     <asp:ListItem Text="> Kolon değerine göre" Selected="True"/>
     <asp:ListItem Text="> Tarihe göre"/>
 </asp:ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:10:29.767

`click`on 事件`<option>`不是标准的，因此并非所有浏览器都支持。
您应该使用`onchange`事件而不是`onclick`.

[您可以阅读此搜索](https://stackoverflow.com/search?q=click%20event%20option%20%5Bjavascript%5D)中的所有问答，这是所有人的主题...

**更新代码：**

```
$('select.lstKuralTipleri').change(function() {
    switch ($(this).index.index()) {
    case 0:
        $('.SartliFormatDegereGore').slideDown();
        $('.SartliFormatTariheGore').slideUp();
        break;
    case 1:
        $('.SartliFormatTariheGore').slideDown();
        $('.SartliFormatDegereGore').slideUp();
        break;
    }
});​ 
```

# jquery - 对 jQuery TreeTable 的节点进行排序

> ID：10224827
> 
> 赞同：1
> 
> 时间：2012-04-19T09:01:40.310
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jQuery [TreeTable](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/)插件来显示表格数据树，效果非常好。使用 jQuery UI 的 draggable & droppable 允许将节点拖放到父节点上，就像在TreeTable的[示例中一样。](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/#example-1)这使用了 TreeTable 的`appendBranchTo`方法。

这一切都很好，除了它不允许对项目进行排序。对单个项目进行排序应该（我希望）相对容易，因为这只是意味着重新排序一些`tr`元素。但是，我不知道如何对包含其他项目的项目/文件夹执行此操作：所有子项也需要移动。

实现这种行为的最佳方法是什么，或者以前有没有其他人这样做过？为树视图使用不同的插件（也允许重新排序）也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:21:11.380

回答我自己的问题：我无法使用 TreeTable 来解决这个问题。我最终使用了 [nestedSortable](http://mjsarfatti.com/sandbox/nestedSortable/)，并使用了一些 CSS 来伪造`<li>`元素内的表格布局

# jquery - 在父元素上保持 mouseenter/mouseleave

> ID：10224831
> 
> 赞同：0
> 
> 时间：2012-04-19T09:01:45.083
> 
> 标签：jquery, mouseevent, mouseover, mouseleave

我有这个 HTML：

```
<div id="content">
    <div class='sub_menu a'></div>
    <div class='sub_menu b'></div>
    <div class='sub_menu c'></div>
    <ul>
        <li class='a'>link a</li>
        <li class='b'>link b</li>
        <li class='c'>link c</li>
    </ul>
</div> 
```

```
$('li').mouseleave(function(e) {
    var cl = $(this).attr('class');
    $(".sub_menu." + cl).show();
}).mouseleave(function() {
    var cl = $(this).attr('class');
    $(".sub_menu." + cl).hide(); //
}); 
```

在每个具有相同类（a、b 或 c）`<li>` 的 div上的 mouseenter`sub_menu`将显示。我需要当鼠标`<li>`离开但在打开的 div 上时，这个 div 将保持打开状态。

现在，当我将鼠标悬停在 sub_menu 上时，它将关闭。我希望你明白我想要做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:05:16.967

```
$('li').hover(function() {
   $(".sub_menu").hide();

   var cl = $(this).attr('class');
   $(".sub_menu." + cl).show();
});​ 
```

代码：http: [//jsfiddle.net/8y5Zh/1/](http://jsfiddle.net/8y5Zh/1/)

# java - 如何为两个 String ararylist 应用 binarySearch 集合

> ID：10224834
> 
> 赞同：0
> 
> 时间：2012-04-19T09:02:02.120
> 
> 标签：java

我有称为 A 和 B 的字符串列表。我想使用 binarySearch 集合搜索这两个数组列表之间的公共元素。如何对这两个字符串数组列表使用 binarySearch，以便我应该能够打印列表中的公共元素。

我能够应用这个集合来找到像这样的单个元素

```
 int index = Collections.binarySearch(arrayList,"4");

System.out.println("Element found at : " + index); 
```

但是我如何将 binarySearch 集合应用于两个字符串列表以获取公共元素？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:18:03.903

除非有特定的使用要求，否则`binarySearch`我建议您`java.util.Set`用于此类操作：

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

public class SetTest {

    public static void main(String[] args) {
        Set<String> a = new HashSet<String>(Arrays.asList("a", "b", "c"));
        Set<String> b = new HashSet<String>(Arrays.asList("b", "c", "d"));
        a.retainAll(b);
        System.out.println(a);
    }
} 
```

输出：

```
[b, c] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:04:15.160

您需要使用循环。

```
System.out.println("Common elements");
for(String s: list1)
    if(Collections.binarySearch(list2, s) >=0)
       System.out.println(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:05:44.423

像这样的东西应该工作：

```
List<String> a = new ArrayList<String>();

List<String> b = new ArrayList<String>();
Collections.sort(b);

for (String str : a)
{
    index = Collections.binarySearch(b, str);
    if (index > 0)
    {
        System.out.println("Duplicate Item " + str + " found at index " + index);
    }
} 
```

# php - 无法在发送帧中使用 CKeditor 搜索浏览器选项

> ID：10224836
> 
> 赞同：1
> 
> 时间：2012-04-19T09:02:07.053
> 
> 标签：php, zend-framework, .htaccess, zend-route

我在基于 zend 的网页中使用 CK 编辑器。如果我将在 CK 编辑器图像类型中打开**浏览服务器**选项。它给出以下错误。

> 错误：指定的控制器无效（phpdocs）

我的 .htaccess 文件具有以下配置

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} -s [OR] 
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php/ [NC,L]
AddDefaultCharset utf-8 
```

请求参数：

```
array ('controller'      => 'phpdocs',
       'action'          => 'ptest',
       'public'          => 'js',
       'admin'           => 'ckfinder',
       'module'          => 'default',
       'type'            => 'Images',  
       'CKEditor'        => 'page_content', 
       'CKEditorFuncNum' => '2', 
       'langCode'        => 'en', ) 
```

是否可以更改 url 重定向。请指导我如何重写网址。

# php - 如何处理两个 Symony2 包之间的公用表？

> ID：10224843
> 
> 赞同：0
> 
> 时间：2012-04-19T09:02:25.100
> 
> 标签：php, mysql, symfony, doctrine-orm

我正在使用 Symfony2.0.12 和 Doctrine2.1.6。

如果你有一个数据库表“Address”，两个 Symfony2 捆绑包“UserB”和“CompanyB”，两个数据库表“UserT”和“CompanyT”，（每个都有一个外键引用表“Address”），

处理这个问题的最佳方法是什么？

*   在UserB（或CompanyB）中任意插入Address实体，只使用一个Address.orm.yml？
*   创建另一个捆绑包 AddressBundle
*   还有什么？

# asp.net-mvc-3 - MVC3 DDL Autopostback 选择像

> ID：10224848
> 
> 赞同：0
> 
> 时间：2012-04-19T09:02:52.120
> 
> 标签：asp.net-mvc-3, ddl, autopostback

我知道 MVC 没有 autoposback 功能，这需要使用 JS/JQuery 来完成，这就是我的问题开始的时候......还不知道该怎么做。

这就是我填充我的 ddl 的方式：

```
@Html.DropDownListFor(x => x.CurrentCountry,
                  new SelectList(Model.Countries.ToList(), "Code", "Name")) 
```

我的网址有这种格式：

```
localhost/Products/?country=US&currency=USD&category=17&page=2 
```

如何添加回发功能以获取所选国家/地区？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:10:18.800

> 我知道 MVC 没有 autoposback 功能，需要使用 JS/JQuery 来完成

没有必要。您可以将下拉列表放在 HTML 中`<form>`，当用户提交此表单时，所选值将被发送到服务器。

另一方面，如果您想在用户更改选择时传输所选值，那么您需要使用 javascript 并订阅 onchange 事件。例如，如果您使用 jQuery：

```
$(function() {
    // subscribe to the change event of the dropdown
    $('#CurrentCountry').change(function() {
        // find the containing form and submit it
        $(this).closest('form').submit();
    });
}); 
```

# android - Android WebView中的JavaScript警报仅在第一次工作

> ID：10224851
> 
> 赞同：1
> 
> 时间：2012-04-19T09:02:54.287
> 
> 标签：android, android-webview

我是 Stack Exchange 和 Andorid 开发的新手。

我正在研究Android webview。我的活动课程中有以下代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView wv;
    WebSettings ws;

    try {
      wv = (WebView) findViewById(R.id.webview);
      ws = wv.getSettings();

      ws.setJavaScriptCanOpenWindowsAutomatically(true);
      ws.setJavaScriptEnabled(true);

      wv.clearCache(true);
      wv.loadUrl("http://<ip address>:<port>/<context>");
    } catch (Exception e) {
      e.printStackTrace();
    }
} 
```

在 layout-main.xml 中：

```
<WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    /> 
```

在 AndroidManifest.xml 中：

```
<uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".POCActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

在网址中，我有 index.html 和以下代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>
    <script type="text/javascript">
        alert("Start");
    </script>
  </head>
  <body>
    <p>Database 1</p>
    <div id="test"></div>
  </body>
</html> 
```

工作环境： - Eclipse indigo - Android SDK 最低版本 10 - Build Target 2.3.3

但是 android 代码只工作一次，即当我创建一个新的 android 项目并运行相同的项目时，我可以看到出现 javascript 警报。从下次开始不再显示 javascript 警报。即使是html页面中的任何文本更改（比如我将“数据库1”修改为“数据库2”）也不会显示。

我尝试了以下方法： - 清除 appcache - 卸载应用程序，然后再次运行项目 - 清除

请让我知道我在这里做错了什么。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:16:11.323

```
webView.setWebViewClient(new WebViewClient());
webView.setWebChromeClient(new WebChromeClient()); 
```

Used these on my code and then my alert() worked pefectly

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-17T05:07:06.250

这是一个非常古老的问题，但我最近遇到了同样的问题，并想与以后遇到此问题的任何人分享解决方案。

您需要将自定义 WebChromeClient 分配给您的 WebView 以处理警报。

```
mWebView.webChromeClient = object : WebChromeClient() {
    override fun onJsAlert(view: WebView?, url: String?, message: String?, result: JsResult?): Boolean {
        val alertDialog = AlertDialog.Builder(context)
                    .setMessage(message)
                    .setPositiveButton("OK") { dialogInterface, _ ->
                        dialogInterface.dismiss()
                        result?.confirm()
                    }
                    .setOnCancelListener { result?.cancel() }
                    .setCancelable(true)
                    .create()
        alertDialog.setCanceledOnTouchOutside(true)
        alertDialog.show()

        //Here AlertDialog is just an example. You can also simply show a Toast.
        //But remember to call JsResult.confirm() or JsResult.cancel()

        return true
    }
} 
```

您需要调用`JsResult.confirm()`或`JsResult.cancel()`通知您的 WebView 用户是否确认或取消了警报对话框。否则，WebView 将假定警报对话框仍在显示（阻止 UI）并且不允许显示新对话框。

# jquery - (Jquery) 为什么 .find 或 .filter 为 ajax html 文档响应返回 0 size() 对象？

> ID：10224854
> 
> 赞同：0
> 
> 时间：2012-04-19T09:03:07.513
> 
> 标签：jquery, ajax

如何从 AJAX responsetext (html doc) 获取正文或头部或整个 html？

这是回应：

```
<html>
    <head>
        <link rel="stylesheet" href="http://localhost/p1_page/style_sheets/p1.css" />
        <script type="text/javascript" src="http://localhost/p1_page/scripts/s1.js" />
    </head>

    <body>
        <div id="content_wrapper">
            <table><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td>ala</td></tr><tr><td></td><td><span id="button_wrapper"><span id="button_on" ><input type="hidden" name="" value="1" /></span></span></td></tr><tr><td></td><td></td></tr></table>
        </div>
    </body>
</html> 
```

我试过了：

```
$(response).find('body') // returns object with size() 0;  
$(response).filter('body') // returns object of size() 0;  
$('body', response) // returns object of size() 0; 
```

但这会返回一个 size() 7 的对象 - 我不明白吗？

```
$(response) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:48:55.043

您可以使用`$.parseXML()`转换`string`为`Document`对象：

```
var html = '<html><body>hello, world</body></html>'
$($.parseXML(html)).find('body') 
```

# jquery - 滑块下的 jQuery UI 滑块标签

> ID：10224856
> 
> 赞同：37
> 
> 时间：2012-04-19T09:03:11.043
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我仅限于使用 jQuery 1.4.2 和 jQuery ui 1.8.5（这不是自愿的，请不要要求我升级到最新版本）。我创建了一个在滑动条上方显示当前值的滑块，但我现在需要的是一种在滑动条下方填充与滑块距离相同的图例的方法（即，如果滑块为 100px 宽并且有五个值滑块将每 20px 捕捉一次。在此示例中，我希望图例中的值以 20px 的间隔放置）。

这是我想要的一个例子：

![滑块](../Images/2a999d5bd87c308887a368d55a4aaabe.png)

这是我拥有的 jQuery（来自 ui 滑块演示页面）：

```
//select element with 5 - 20 options
var el = $('.select');

//add slider
var slider = $( '<div class="slider"></div>' ).insertAfter( el ).slider({
    min: 1,
    max: el.options.length,
    range: 'min',
    value: el.selectedIndex + 1,
    slide: function( event, ui ) {
      el.selectedIndex = ui.value - 1;
      slider.find("a").text(el.options[el.selectedIndex].label);
    },
    stop: function() {
      $(el).change();
    }
});

slider.find("a").text(el.options[el.selectedIndex].label); //pre-populate value into slider handle. 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-06-01T21:58:11.513

发布的解决方案是完全可行的，但这是另一个不需要额外插件并产生这个的解决方案（见[fiddle](http://jsfiddle.net/6zqFq/305/)）：

![带有简单标签的滑块](../Images/209e9bad1f8b5cd0be93a88585f86793.png)

这是如何做到的：

1.  启动滑块。

2.  对于每个可能的值，附加一个`label`元素`position: absolute`（滑块已经是`position: relative`，因此标签将相对于滑块定位）。

3.  对于每个`label`，将`left`属性设置为百分比。

## CSS

```
#slider label {
  position: absolute;
  width: 20px;
  margin-top: 20px;
  margin-left: -10px;
  text-align: center;
} 
```

## JS

```
// A slider with a step of 1
$("#slider").slider({
    value: 4,
    min: 1,
    max: 7,
    step: 1
})
.each(function() {

    // Add labels to slider whose values 
    // are specified by min, max

    // Get the options for this slider (specified above)
    var opt = $(this).data().uiSlider.options;

    // Get the number of possible values
    var vals = opt.max - opt.min;

    // Position the labels
    for (var i = 0; i <= vals; i++) {

        // Create a new element and position it with percentages
        var el = $('<label>' + (i + opt.min) + '</label>').css('left', (i/vals*100) + '%');

        // Add the element inside #slider
        $("#slider").append(el);

    }

}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-19T09:26:23.420

要创建图例，我们需要知道滑块的宽度和元素的数量，然后将一个与另一个相除：

```
//store our select options in an array so we can call join(delimiter) on them
var options = [];
for each(var option in el.options)
{
  options.push(option.label);
}

//how far apart each option label should appear
var width = slider.width() / (options.length - 1);

//after the slider create a containing div with p tags of a set width.
slider.after('<div class="ui-slider-legend"><p style="width:' + width + 'px;">' + options.join('</p><p style="width:' + width + 'px;">') +'</p></div>'); 
```

p 标签需要具有“display:inline-block”样式才能正确渲染，否则每个标签将占一行，或者标签将彼此相邻堆叠。

我创建了一篇解释问题和解决方案的帖子：[jQuery UI Slider Legend Under Slider](http://richard.parnaby-king.co.uk/2012/04/jquery-ui-slider-legend-under-slider/)其中包含此工作的现场演示。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-28T09:48:58.407

一直在寻找同样的东西并最终使用了*filamentgroup 的 jQuery UI Slider*（它的工作原理就像一个魅力并且看起来很稳定）我认为它计划及时合并到 jQuery UI 组件中......

这里是文章和示例的参考 + 我所做的最小化 jsfiddle

[来自 Select 元素的 jQuery UI 滑块 - 现在支持 ARIA](http://www.filamentgroup.com/lab/update_jquery_ui_slider_from_a_select_element_now_with_aria_support/)

[这是来自细丝组实验室文章的示例](http://www.filamentgroup.com/examples/slider_v2/index3.php)

[工作最小化的 jsfiddle 示例 -**更新和工作**](http://jsfiddle.net/vSxtz/136/)

顺便说一句，如果想使用更简单的滑块（无范围），只需删除第二个`select`元素

* * *

另一个很好的插件可以完成这项工作：[jslider](http://egorkhmelev.github.io/jslider/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-18T19:28:45.460

另一种具有自定义标签且没有固定标签尺寸的解决方案。

[JS斌](http://jsbin.com/ijekix/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-02T15:15:04.573

对于仅使用 jquery 的带有标签的滑块，我有一个简单的解决方案。

[![在此处输入图像描述](../Images/6f6aca2ea8876909c248b4d534e05cde.png)](https://i.stack.imgur.com/B8IQP.png)

您只需将 div 设置在您希望滑块移动的位置

```
<div class="sliderWithLabels" id="mySlider1"></div> 
```

然后调用 setup 方法将标签添加到相关索引处的滑块。

```
// setupSlider(divId, labelArray, initialIndex);
setupSlider('mySlider3', ["label1", "label2", "label3", "label3"], 3); 
```

请参阅下面的代码笔以获取完整代码

[https://codepen.io/larnott/pen/WNeErqE](https://codepen.io/larnott/pen/WNeErqE)

# jquery - 使用jQuery展示广告

> ID：10224857
> 
> 赞同：1
> 
> 时间：2012-04-19T09:03:24.630
> 
> 标签：jquery, ads

我有一个快速的服务器，但广告确实可以使页面停止运行。有时广告甚至可以打破页面，如果那是顶部广告，那么......

所以，我想知道是否有人在页面加载后使用 jQuery 加载广告？从理论上讲，这听起来很棒。我可以快速加载页面，然后加载广告。

虽然我可以翻几页来测试这个理论，但我更担心广告商不喜欢这种做法的长期影响。例如，有些人不喜欢将广告加载到 iframe 中。他们会得到他们想要的所有推荐人信息吗？

我意识到广告是一个讨厌的话题，所以我为此道歉。

[更新]

我创建了一个通过 ajax 加载广告的测试页面。广告是 javascript，但它用广告替换了我的整个页面。

```
$.ajax({ type: "GET", url: "test.php", data: "ad=1", dataType: "script", success: function(response){ $('#advert').html(response); } });
<div id="advert"></div> 
```

我也使用 dataType: html 没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:47:10.463

使用以下方法之一：

*   [$.getScript](https://stackoverflow.com/questions/5085132/)

*   [iframe 附加](https://stackoverflow.com/questions/6107821/)

*   [脚本追加](http://www.sitepoint.com/insert-in-place-without-documentwrite/)

# php - 准备好的语句while循环错误php

> ID：10224858
> 
> 赞同：1
> 
> 时间：2012-04-19T09:03:24.787
> 
> 标签：php, mysqli

```
public function suggest(){
$SQL = "SELECT CategoryName FROM tb_category WHERE CategoryName LIKE CONCAT('%', ?, '%')";
$stmt = $this->_db->mysqli->prepare($SQL);
$stmt->bind_param("s", $this->querystring);
$stmt->execute();
$meta = $stmt->result_metadata();  
while($field = $meta->fetch_field())
    {     
     $parameters[] = &$row[$field->name];
     //print_r($parameters); 
    } 
```

在我的`while`-loop 中，它一次又一次地给出 on 的东西，只是检查 db 中的单行而不是整个表我猜这里的 like 运算符没有任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:21:42.193

只是为了确保我理解得很好：

```
while($field = $meta->fetch_field())
{     
 $parameters[] = &$row[$field->name];
 //print_r($parameters); 
} 
```

假设您查询返回 10 行，这会执行 10 次吗？

尝试`$row[$field->name];`代替`&$row[$field->name];`（没有`&`）

最后`fetch_field()`返回您使用查询检索到的列的定义。当您仅选择`CategoryName`时，您仅打印`CategoryName`列定义

# jquery - 对近乎完美的 Jquery 滑块的微小修改

> ID：10224863
> 
> 赞同：0
> 
> 时间：2012-04-19T09:03:51.693
> 
> 标签：jquery, html, css, slider

今天早些时候，我找到了一个经过修改的滑块，以满足我正在从事的网页设计项目的需求。

我有一个关于这个滑块的简单问题，我无法修改脚本以在图像滑动时居中图像，以便主图像出现在屏幕中间，在滑动之前和滑动之后（向左或向左）正确的）。

这是 JSFiddle（如果我做错了，请原谅这是我第一次使用它）：http: [//jsfiddle.net/6CfbC/](http://jsfiddle.net/6CfbC/)

任何建议都会有很大帮助，如果可能的话，无论如何我可以让它循环吗？到最后一张幻灯片的一部分显示在第一张幻灯片的左侧，当我一直滑动到任一侧的末端时，它会循环播放？

提前谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:16:07.650

据我所知，它看起来是在我更正 HTML 之后。

您的元素在很多地方`<li>`都缺少开头：`<`

```
>li> 
```

这是一个更新的小提琴，对我来说似乎很好：

[http://jsfiddle.net/6CfbC/1/](http://jsfiddle.net/6CfbC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:20:57.507

我认为您最好使用可滚动的-它有一个称为循环的循环插件：http: [//jquerytools.org/documentation/scrollable/index.html](http://jquerytools.org/documentation/scrollable/index.html)

~~这些半起始幻灯片主要是动画功能中的错误或围绕滑块的包装器中的 css 错误（它是否足够宽以容纳所有幻灯片？（是的！））~~

你破碎的html

```
</li>li> 
```

照别人说的做了

但是将所有幻灯片复制 4 次并且仍然不循环很奇怪....

# java - 如何移植eclipse 2 maven

> ID：10224869
> 
> 赞同：2
> 
> 时间：2012-04-19T09:03:59.920
> 
> 标签：java, eclipse, maven, pom.xml

我用eclipse写了一个java项目。现在我想在maven下管理它。移植的方法是我用m2eclipse新建一个maven项目，把所有java和用过的jar复制到对应的目录下，也就是说我把java文件放到src/main/java，jar文件放到src/main/resource .

问题是：当我用 maven 构建这个项目时，结果 jar 中的清单文件包含没有类路径信息。

我发现我可以使用本地 maven repo，但我认为这对我来说不是一个好的解决方案。

我想使用 src/main/resource 目录中的 jar，并且我想将 jar 名称写入清单文件。

我该怎么做？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:23:52.093

首先，如果您想将现有项目转换为 Maven，可以使用*m2eclipse*向导来执行此操作。在Eclipse Indigo 的*m2e*中，可以在*Maven > Enable Maven Nature*下找到它。

要将类路径信息添加到 Manifest，您可以使用*maven-jar-plugin*配置，如下所示：

```
 <plugin>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
      <archive>
        <manifest>
          <addClasspath>true</addClasspath>
          <classpathPrefix>lib</classpathPrefix>
        </manifest>
      </archive>
    </configuration>
  </plugin> 
```

这会将类路径条目添加到清单中，并将引用名为*lib*的目录中的每个 jar 文件。

在您的运行时环境中，您只需确保*lib*目录存在（在可执行 jar 文件旁边）并包含所需的库。如果你想自动化这个，你可以使用*Maven Assembly Plugin*：[http ://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)

# ruby-on-rails - 关于 Rails 前端和 Scala 后端之间通信的建议

> ID：10224870
> 
> 赞同：4
> 
> 时间：2012-04-19T09:04:02.637
> 
> 标签：ruby-on-rails, scala, rest, message-queue, backend

我们正在开发以下设置：

rails webapp 允许用户对传递给 Scala 后端的任务发出请求以完成，这可能需要 10 秒或更长时间。发生这种情况时，用户用来发出请求的页面会使用 AJAX 定期轮询 rails 以查看任务是否完成，如果完成则返回结果。

从用户的角度来看，请求是同步的，除了他们的浏览器没有冻结而且他们得到了一个很好的旋转的东西。

后端需要的输入数据很大，结构复杂，输出也一样。我最初的计划是简单地让两个应用程序共享同一个数据库（将是 MongoDB），因此 rails 应用程序可以简单地将一个 id 写入一个“作业”表，该表将由作为守护进程运行的 scala 后端拾取，但我想得越多，我就越担心这种方法可能有很多潜在的陷阱。

最让我担心的两件事是模型代码的重复，使用两种不同的语言，需要保持同步，以及在部署时处理这个增加的复杂性。在评估这种方法时，我还应该考虑哪些其他可能的问题？

我正在研究的其他一些可能性是 1）使 Scala 后端成为 RESTful 服务或 2）实现消息队列。但是，我并不完全相信这两种选择，因为它们都需要更多的开发工作，而且在我看来，在这两种情况下，模型代码无论如何都会被有效地复制，无论是作为 RESTful API 的一部分还是作为消息的消息队列 - 我错了吗？如果这些选项中的一个更好，那么有什么好的方法可以解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:11:02.940

我已经多次使用[resque](https://github.com/blog/542-introducing-resque)来解决类似的问题，而且我一直对它非常满意，它为您提供了实现作业队列所需的一切，并支持 redis。我强烈建议你看看它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:54:19.207

不要误会我的意思，但是，对于这个项目，Rails 提供了哪些 Scala 没有的功能？

换句话说，你可以完全不用 Scala 而全部在 Rails 中完成吗？显然是的，但是您在 Scala 中开发后端是有原因的，对吧？现在，Scala 提供了什么 Rails 没有？

我并不是说你应该做其中一个，但维护重复的代码是在自找麻烦/复杂化。

如果您已经在该项目中投入了大量的 Ruby 代码，那么您将致力于 Rails，除非进行完整的 Twitter 式大修（听起来既不是一种选择，也不是所希望的）。

无论如何，不​​确定您将如何解决模型重复问题。使用 Mongo 后端确实可以为您购买 BSON 结果集，您可以将其与[Spray](https://github.com/spray/spray/wiki)结合，它们对 Akka 的出色实现、开箱即用的 REST 和 JSON 实用程序。

棘手的问题，听起来你陷入了两种范式之间！

# java - 覆盖java类加载器

> ID：10224876
> 
> 赞同：2
> 
> 时间：2012-04-19T09:04:45.267
> 
> 标签：java, classloader

我有以下示例

```
public class Tester
{

    /**
     * @param args
     * @throws ClassNotFoundException
     */
    public static void main(String[] args) throws ClassNotFoundException
    {

        new Tester().execute();

    }

    private void execute() throws ClassNotFoundException
    {
        //Java Class Loader
        ClassLoader baseClassLoader = Thread.currentThread().getContextClassLoader();

        //Java custom Class Loader
        ClassLoader customClassLoader = new CustomClassLoader();
        Class<?> customClass = Class.forName("a.b.c.d.class", true, customClassLoader);

        //Java custom Class Loader
        ClassLoader customClassLoader = customClass.getClassLoader();

        Thread.currentThread().setContextClassLoader(customClassLoader);

        //Java custom Class Loader
        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();

        //Java Class Loader?????
        ClassLoader classLoader = this.getClass().getClassLoader();
    }
} 
```

为什么调用后

```
Thread.currentThread().setContextClassLoader(customClassLoader); 
```

一旦我执行

```
this.getClass().getClassLoader(); 
```

我仍然得到 java 类加载器，而不是我的自定义类加载器。

我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:14:40.833

`Thread.setContextClassLoader`只需在`Thread`. 链接类仍然是从每个类的类加载器完成的。它当然不会更改任何已加载类的类加载器。它所改变的只是由`Thread.getContextClassLoader`.

我建议远离线程上下文类加载器和其他线程全局变量。

# c# - 对象创建中的条件运算符

> ID：10224881
> 
> 赞同：0
> 
> 时间：2012-04-19T09:04:57.903
> 
> 标签：c#, c#-4.0

我有这个代码：

```
private MyClass CreateObject(MyOtherClass myOtherClass)
{
    return new MyClass
    {
        Name = myOtherClass.Name,
        ValidationDate = (DateTime)myOtherClass.ValidationDate  //ValidationDate is nullable
    };
} 
```

如果我这样做，我有一个编译错误：

> 无法确定条件表达式的类型，因为`'<null>'`和之间没有隐式转换`'System.DateTime'`

```
private MyClass CreateObject(MyOtherClass myOtherClass)
{
    return new MyClass
    {
        Name = myOtherClass.Name,
        ValidationDate = (myOtherClass.VALIDATION_DATE == null) ? null : DateTime.Now  //ValidationDate is nullable
    };
} 
```

如果我这样做，没问题：

```
MyClass myClass = new MyClass();
if (myClass.ValidationDate == null)
    myClass.ValidationDate = null; 
```

问题是为什么？和解决方案？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:06:51.577

第一个代码块中的问题是您试图将一个可为空的 DateTime 值转换为 DateTime。

尝试将其转换为可为空的 DateTime ( `DateTime?`) ：

```
ValidationDate = (DateTime?)myOtherClass.ValidationDate 
```

因为您毕竟试图填充一个可为空的 DateTime 字段。

如果您尝试在`myOtherClass.ValidationDate`为 null 的情况下提供默认值，请使用合并运算符（无需强制转换）：

```
ValidationDate = myOtherClass.ValidationDate ?? DateTime.Now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:07:55.437

投射`null`到 a `DateTime?`：

```
ValidationDate = (myOtherClass.VALIDATION_DATE == null) ? 
                                                  (DateTime?)null : DateTime.Now; 
```

条件运算符要求两个结果分支具有相同的类型或可以隐式转换的类型。

由于`null`其本身不对应于任何类型，因此您需要强制转换该分支 - 上述工作是因为分支之间存在隐式`DateTime`转换。`DateTime?``DateTime.Now`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:09:17.263

空合并运算符实际上`??`不会出现在您的代码中的任何位置 - 您使用的是三元运算符。我相信为了使它起作用，两个可能的结果（在这种情况下`null`和`DateTime.Now`）需要可转换为相同的类型（它们不是）。

尝试将行更改为简单的：

```
ValidationDate = myOtherClass.VALIDATION_DATE ?? DateTime.Now; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:09:30.497

如果 MyOtherClass 中的 ValidationDate 是可为空的 DateTime，并且 MyClass 中的 ValidationDate 是 DateTime（不可为空），那么您可以这样做：

```
ValidationDate = myOtherClass.ValidationDate?? DateTime.Now 
```

# single-sign-on - 单点登录解决方案

> ID：10224886
> 
> 赞同：0
> 
> 时间：2012-04-19T09:05:20.167
> 
> 标签：single-sign-on, cas

嗨，我正在使用**CAS**进行 SSO。但问题是我想重置密码，在**CAS**登录屏幕上注册新用户。
**CAS 提供这些服务还是我必须实施？**
或者存在任何其他满足我要求的 SSO 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:48:27.050

CAS 只是您现有身份管理解决方案（数据库、LDAP 等）的 SSO 前端。它本身不包括任何身份管理功能（创建用户帐户、重置密码等）。我最近一直在使用[Cloudseal](http://www.cloudseal.com)平台，它是一个完整的身份管理解决方案，到目前为止我印象非常深刻。我相信 Atlassians [Crowd](http://www.atlassian.com/software/crowd/overview)也包含这个，虽然我没有使用过。那里可能还有其他产品。

这两个都是商业产品，尽管它们对前 50 个用户都是免费的。Crowd 是一个传统的独立平台，您可以下载、安装和配置，但 Cloudseal 是托管服务，因此无需安装且配置较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T08:38:15.470

您当然可以修改 spring 博客和登录页面以允许您当然必须实现的功能。您还应该在@cas-user 邮件列表上提出问题，以查看社区中的类似需求是否已被您可以利用的其他用户实现。我记得最近有人向列表中提出了相同的问题，并且对开发和集成此功能有点兴趣。您可能需要重新访问邮件列表中的主题。

希望这可以帮助。

# java - Java：一维数组在内存中是否总是连续的？

> ID：10224888
> 
> 赞同：35
> 
> 时间：2012-04-19T09:05:26.410
> 
> 标签：java, arrays

我读过的关于这个主题的许多书籍/文章，以及我使用“不安全”编写的一个小程序，都表明 Java 中的一维数组在内存中总是连续的。那么它是由 JLS 规定的，还是一种实现约定？询问该问题以确认该指示。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-19T09:09:27.000

不，JVM 规范没有任何此类保证： [http ://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#16446](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#16446)

在实践中可能是这种情况，但您也不能保证字的大小。

Unsafe 不是标准的 Java 类，所以如果你的程序使用它，那么它无论如何都不能移植......

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-25T08:50:17.593

我想用[Java 语言规范、Java SE 8 版 (JLS)](https://docs.oracle.com/javase/specs/jls/se8/html/index.html)和[Java 虚拟机规范、Java SE 8 版 (JVMS)](https://docs.oracle.com/javase/specs/jvms/se8/html/index.html)的说法来刷新这个问题。

我们必须选择回答这个问题：

1.  对 JVM 实现施加了哪些限制。这是最可靠的方法，因为任何规范的实现固有地假定*“所有不被禁止的东西都是允许的”*原则。
2.  大多数 JVM 实现的建议是合理的。

我将指出规范约束。

如果我们查看*第 10 章*JLS 的数组（以及 JLS 和 JVMS 中与数组相关的任何其他章节），我们找不到任何关于强加给数组的内存布局约束的内容。因此，这绝对意味着数组可能不连续。

此外，JLS 说数组是对象：

> *第 10 章数组。*
> 
> 在 Java 编程语言中，数组是对象（第 4.3.1 节），是动态创建的，并且可以分配给 Object 类型的变量（第 4.3.2 节）。Object 类的所有方法都可以在数组上调用。...
> 
> *4.3.1。对象。*
> 
> 对象是类实例或数组。（并且数组是对象）

同时 JVMS 说对象和数组存储在堆上：

> *2.5.3\. 堆*
> 
> Java 虚拟机有一个在所有 Java 虚拟机线程之间共享的堆。堆是为所有类实例和数组分配内存的运行时数据区域。

但是 JVMS 并不强制堆内存是连续的：

> *2.5.3\. 堆*
> 
> ...堆的内存不需要是连续的。

由于所有数组都存储在堆中并且堆可能不连续，因此数组也可能不连续。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-19T09:09:22.020

由于在 Java 中没有与内存地址交互的真正方法，因此规范中也没有定义对象在内存中的布局如何。

请注意，`Unsafe`几乎自动使用意味着您在规范范围之外漫步。

话虽如此，我敢肯定大多数 JVM 实现实际上*确实*对（一维）数组使用了线性布局。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-19T09:14:35.607

鉴于许多 JVM 要求堆在内存中是连续的，我认为他们不太可能将一维基元数组放置在内存中的不同位置。

Object[] 引用的对象在内存中不太可能是连续的，即使它们是连续的，也可以在没有警告的情况下重新排列。

注意：使用 Unsafe，您可以将数组中的引用作为`int`值读取，以查看它们在 GC 之前和之后是什么。一些 JVM 使用需要很长的 64 位引用，但大多数使用 32-bti 引用（即使对于 64 位 JVM）

# c - 识别 RTP 流中的帧边界

> ID：10224893
> 
> 赞同：2
> 
> 时间：2012-04-19T09:05:50.603
> 
> 标签：c, stream, frame, rtp, pcap

我对 RTP 数据包中的帧边界几乎没有疑问。
首先，如果设置了标记位，是否表示新帧已经开始（这是我从 RFC 3551 中理解的）？
其次，根据我读到的内容，一帧以 I 帧开头，然后是 P、B 帧。现在，哪个字段表明了这一点？I 帧是否设置了标记位？
第三，如果我需要找到一帧的开始和结束，检查标记位就足够了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:52:39.543

[Wireshark Wiki 上](http://wiki.wireshark.org/RTP)的RTP 条目提供了大量信息，包括（**编辑**）[示例捕获](http://wiki.wireshark.org/SampleCaptures#SIP_and_RTP)。你可以探索它，它可能会回答你的一些问题。如果您要编写代码以使用 RTP，Wireshark 可用于监控/调试。

**编辑**对于您关于标记位的第一个问题，此[常见问题解答](http://www.cs.columbia.edu/~hgs/rtp/faq.html#marker)可能会有所帮助。此外，找到帧（I、P、B）取决于有效载荷。这里还有另一个[问题](https://stackoverflow.com/questions/1957427/detect-mpeg4-h264-i-frame-idr-in-rtp-stream)，它的答案显示了如何为 MPEG 找到 I、P、B。[h263-over-rtp.pcap](http://wiki.wireshark.org/SampleCaptures?action=AttachFile&do=view&target=h263-over-rtp.pcap)包含 H.263的I 和 P 帧示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-31T18:37:28.753

这是一个老问题，但我认为这是一个很好的问题。

正如您提到的 I、P 和 B 帧，在 2012 年您可能指的是 H.264 over RTP。

根据[ [rfc6184](https://datatracker.ietf.org/doc/html/rfc6184) ] [1](https://datatracker.ietf.org/doc/html/rfc6184)，标记位设置在帧的最后一个数据包上，因此标记位确实可以用作一帧结束的指示符，并且顺序中的下一个数据包将是下一个数据包的开始。框架。

根据这个 rfc，一个帧的所有数据包也具有相同的 RTPTIME，因此 RTPTIME 的变化是前一帧结束和新帧开始的另一个指标。

当您丢失数据包时，事情会变得更加棘手。例如，假设您丢失了数据包 5 和 6，它们是第 1 帧的最后一个数据包和第 2 帧的第一个数据包。您知道要丢弃第 1 帧，因为您从未收到带有该帧标记位的数据包，但是你怎么知道第 2 帧是否完整。也许 2 个丢失的数据包都是第 1 帧的一部分，或者第二个数据包可能是第 2 帧的一部分？

rfc6184 定义了分段 NAL 单元的第一个数据包中存在的起始位。如果 NAL 单元没有分段，那么根据定义，如果我们得到了数据包，我们就会得到整个 NAL 单元。这意味着我们可以知道我们是否获得了完整的 NAL 单元。不幸的是，这并不能保证我们拥有完整的帧，因为一个帧可能包含多个 NAL 单元（例如多个切片），并且我们可能丢失了第一个。我没有解决这个问题的方法，但也许 somone 会在未来 10 年的某个时候提供。

# monomac - monomac - 单击按钮时如何调用新表单

> ID：10224899
> 
> 赞同：1
> 
> 时间：2012-04-19T09:06:26.767
> 
> 标签：monomac

我的 Monomac 项目有 2 个表单（表单/视图）：`Mainwindow`和`form2`. （我创建`form2`使用：New -> monomac -> 带有控制器的 Cocoa View > 名称是：form2）

在`MainWindow`表单上我有一个按钮。`form2`单击该按钮时，我想显示/可见。

单击按钮时的操作是：`a1`。这是我的代码：

```
partial void a1 (NSObject sender) 
{ 
    Console.WriteLine ("a1 call form2");
    var f1 = new form2Controller();
    f1.LoadView();

} 
```

我想`form2`在视图加载后显示，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:25:55.027

如果你已经创建了一个“带有控制器的 Cocoa**窗口**”，那么你想要这样做来显示窗口：

```
f1.Window.MakeKeyAndOrderFront(); 
```

如果你创建了一个“带有控制器的 Cocoa**视图**”，那么你必须将你添加到 xib 的窗口连接到一个插座，然后像这样调用它：

```
f1.MyOutletForTheWindow.MakeKeyAndOrderFront(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T17:37:02.717

要使窗口可见，您需要调用视图控制器的 ShowWindow 方法。

```
partial void a1 (NSObject sender)
{
    Console.WriteLine ("a1 call form2");
    Form2Controller form = new Form2Controller();
    form.ShowWindow(this);
} 
```

# cordova - 尝试录制音频时出现 PhoneGap 错误

> ID：10224900
> 
> 赞同：2
> 
> 时间：2012-04-19T09:06:27.000
> 
> 标签：cordova

我是 Phonegap 的新手，我正在尝试使用它录制音频。我遵循了 PhoneGap API 给出的代码，但它在控制台中抛出了以下异常：

```
04-19 08:59:55.934: E/Web Console(4197): TypeError: Result of expression
'navigator.device' [undefined] is not an object. 
at file:///android_asset/www/index.html:31
code at line 31 is navigator.device.capture.captureVideo(captureSuccess, captureError, {limit: 2}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:01:33.157

这是**PhoneGap 1.5**中的错误。您应该使用**PhoneGap 1.6.1**。

您可以从 PhoneGap API 复制代码并根据您的要求进行更改。

# php - 避免从不同位置多次登录帐户

> ID：10224903
> 
> 赞同：4
> 
> 时间：2012-04-19T09:06:42.480
> 
> 标签：php

我想限制同一用户从不同位置多次登录。如何识别用户在同一时间/最近时间从不同位置进行的多次登录？我认为在表格中检查一些标志和 IP 可能是一个可能的解决方案，但有没有更好的解决方案？

更新：我认为会话或 cookie 对于单台机器可能会有所帮助。就像用户第一次登录时创建一个激活密钥并存储它一样，当用户每隔一次登录到那台机器时，检查 cookie 值。同样地。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:38:05.110

我会通过在用户表中创建一个 activeKey 列来解决类似的问题。每次用户登录时，activeKey 都会更改（简单的方法 subchar(md5(time().$username), 0, 16)），并将其存储在会话中。每次刷新/输入网页时都会检查密钥。如果不匹配，则使用信息注销。在正确的注销键将被设置为 NULL，所以当它可以给出一个标志。

这个方法可以和IP地址结合，但是只能欺骗IP地址，和MAC一样，以此类推。

这是一个主要思想。可能还有其他数据，例如上次登录日期、IP 上次登录日期等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:10:42.247

您可以有一个包含当前登录用户的 ID 和 IP 地址的表。每次有人登录时检查此表即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T22:13:00.963

这是一个**不需要**持续**数据库访问**即可工作的解决方案...

（这将避免每次请求/刷新页面时根据数据库值检查 session_id() 的要求，从而减轻数据库/服务器压力）...

**1.**登录时，为该用户获取存储在数据库中的预先存在的 session_id 并执行以下操作：

```
session_id("the pre-existing session id in the database goes here");
session_start();
session_destroy(); 
```

**2.**然后开始一个新的会话，并将这个新的 session_id 保存到数据库中，覆盖之前的。如果有一个活动的，这将注销该用户的上一个会话（有效地注销使用此帐户的其他人）。

试一试，让我知道这是否有效！

注意：这是“理论上的”，因为我还没有尝试过。它基于这个[公认的 stackoverflow 答案](https://stackoverflow.com/a/6704315/1110941)。而且您可能应该根据每个用户独有的内容[手动创建 session_id](https://stackoverflow.com/a/7068971/1110941)，这样您就不会清除其他人正在使用的会话，而该会话恰好与您正在检查的用户上次使用的会话相同为了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T09:16:10.180

我认为，每个用户只需要额外的 2 列——用户表中的“LastLoginTime”和“IPAddress”。如果持续时间太短并且 IPAddress 变化，那么您可以向用户发出警告。此外，您还可以告知用户登录的城市和国家。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:27:45.363

我会在 users 表中添加一个 ipAddress 列、一个 LastLogin 日期列、带有布尔值的 LogStatus 列（实际上 MySQL 使用 1/0 作为布尔值）来检查用户是否登录，一个 Country 列（尽管这可能是通过使用代理绕过），以及一个blockedStatus列，再次使用1/0值，将检查用户是否被阻止。

然后在登录页面，您将检查用户是否已登录然后他无法登录，如果他最近登录，并且国家/地区不同，那么发生了一些事情，您需要阻止该帐户并发送如果合法用户是登录的用户，则一封带有解锁帐户链接的电子邮件。

# ios - libobjc.A.dylib 在 objc_msgSend:15 崩溃

> ID：10224908
> 
> 赞同：2
> 
> 时间：2012-04-19T09:06:55.907
> 
> 标签：ios, objective-c, crash

任何人都对导致以下崩溃的原因有任何见解？

> 班级：
> 
> 信号
> 
> 文件：
> 
> libobjc.A.dylib 在 objc_msgSend:15
> 
> IOS：
> 
> 5.1

```
0libobjc.A.dylib 0x30f7ef78 objc_msgSend 15
1libobjc.A.dylib 0x30f80175 _objc_rootRelease 36
2UIKit 0x3713542d -[UILayoutContainerView _endFastMode] 132
3UIKit 0x37135279 -[UILayoutContainerView setUseFastMode:] 68
4UIKit 0x37090129 -[UIView(FastModeAdditions) _setContainerLayoutViewForFastMode:] 104
5UIKit 0x36ef637b -[UIView dealloc] 574
6UIKit 0x371e0491 -[UIDropShadowView dealloc] 92
7libobjc.A.dylib 0x30f80175 _objc_rootRelease 36
8CoreFoundation 0x36b9c2e7 CFRelease 94
9CoreFoundation 0x36c18b37 __CFDictionaryStandardReleaseValue 70
10CoreFoundation 0x36c6c3bc __CFBasicHashDrain 264
11CoreFoundation 0x36b9c39b CFRelease 274
12libobjc.A.dylib 0x30f81e57 objc_release 38
13libobjc.A.dylib 0x30f80ead _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv 224
14libobjc.A.dylib 0x30f80dc9 _objc_autoreleasePoolPop 12
15CoreFoundation 0x36ba3cff _CFAutoreleasePoolPop 18
16CoreFoundation 0x36c262b3 __CFRunLoopRun 1274
17CoreFoundation 0x36ba94a5 CFRunLoopRunSpecific 300
18CoreFoundation 0x36ba936d CFRunLoopRunInMode 104
19GraphicsServices 0x30c8b439 GSEventRunModal 136
20UIKit 0x36efae7d UIApplicationMain 1080 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-24T01:49:47.090

我怀疑您正在释放一个已经释放的对象（隐式在自动释放池中）。您需要启用僵尸并在`objc_exception_throw`等上添加断点。

^(来源：[木马评论](https://stackoverflow.com/questions/10224908/libobjc-a-dylib-at-objc-msgsend15-crash/39113200#comment13135629_10224908))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T01:48:15.550

这个崩溃听起来像是在[UIKit 框架](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKit_Framework/)`objc_msgSend`中使用函数（Objective-C 的一部分）发送消息时发生的。

您应该使用调试符号编译源代码并生成另一个更详细的回溯。还可以使用 dtrace/dtruss 等调试器来进一步检查代码问题。

这可能是一个带有滚动的 iOS 错误，如下所述：[App crash when Back button tapped while scrolling table view](https://stackoverflow.com/q/10146660/55075)。

另请参阅：[objc_msg 发送](http://ridiculousfish.com/blog/posts/objc_msgsend.html)到荒谬的鱼

# c - 使用 SID 或 LUID 检查帐户是否为本地帐户

> ID：10224912
> 
> 赞同：2
> 
> 时间：2012-04-19T09:07:27.240
> 
> 标签：c, winapi, wmi, sid

WMI 中的`Win32_Account`类具有`LocalAccount`布尔属性。不幸的是，`SECURITY_LOGON_SESSION_DATA`通过调用获得的结构`LsaGetLogonSessionData`没有。验证帐户是否像 WMI 中的本地帐户，具有*安全标识符*SID 和*登录标识符*LUID 的最佳方法是什么？

# java - 为什么我的代码挂起？

> ID：10224917
> 
> 赞同：2
> 
> 时间：2012-04-19T09:07:54.680
> 
> 标签：java, multithreading, java-me, synchronized

我对这件事很好奇。我有一些代码，在一个同步块中，
它调用一个 SDK 方法，但它挂起。

```
synchronized(someObject) {
   someSDKobj.someMethd();
} 
```

如果我从未同步的块中进行相同的调用，它会正确执行。

```
//synchronized(someObject) 
{
   someSDKobj.someMethd();
} 
```

挂起的一个原因是，如果 sdk 方法在不同的线程上调用另一个在同一个“someObject”上同步的方法，但事实并非如此。

还有什么可能导致这种奇怪的现象？为什么被调用的方法会受到从同步块调用的事实的影响？如果重要的话，这是在 Java-ME 上运行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:11:03.377

它挂起是因为您创建了一个称为“死锁”的条件。问题是同步方法一次只能由一个线程访问。因此，您的方法正在访问此同步方法，并调用另一个线程来访问相同的方法，该方法已锁定。因此，第二个线程正在等待另一个线程释放该函数，而这永远不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:44:18.097

挂起时获取线程转储。这应该可以肯定地告诉您 JVM 的每个线程中发生了什么，包括指出任何锁争用。

# scala - 在 Map 对象上应用方法？

> ID：10224920
> 
> 赞同：4
> 
> 时间：2012-04-19T09:08:02.070
> 
> 标签：scala, map

首先，让我提前为我在堆栈溢出上发布的第一个问题道歉，而且可能是一个非常愚蠢的问题。

由于 scala 中的 Map 是使用以下语法实例化的：

```
val myMap=Map(1->”value1”,2->”value2”) 
```

我期待 Map 对象`scala.collection.immutable`提供一个`apply`带有大致如下签名的方法：

```
def apply[A,B](entries :(A,B)*):Map[A,B] 
```

明明应该是瞎了眼，却找不到这样的方法。它在哪里定义？

此外，有人可以给我有关对象中定义的`Map1`, `Map2`, `Map3`,`Map4`类的用途的信息吗？`Map`它们应该由开发人员使用还是仅由语言和/或编译器在内部使用？它们是否与我在上面询问的地图实例化方案有关？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:24:44.560

`apply`看起来它是在`scala.collection.generic.GenMapFactory`的超类上定义的`scala.collection.immutable.Map`。出于某种原因，Scaladoc 在 2.9.2 中简单地忽略了这个方法。（正如 Rogach 所说，它存在于[2.9.1](http://www.scala-lang.org/api/2.9.1/index.html#scala.collection.immutable.Map$)中。）

`Map1`…<code>Map4（与`EmptyMap`私有的 一起）只是优化。这些是在[Map.scala](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/Map.scala)中定义的，实际上最多直接保存四个键和值，没有任何进一步的间接。如果尝试添加到 a `Map4`，`HashMap`将自动创建 a 。

您通常不需要`Map[1-4]`手动创建：

```
scala> Map('a -> 1)
res0: scala.collection.immutable.Map[Symbol,Int] = Map('a -> 1)

scala> res0.isInstanceOf[scala.collection.immutable.Map.Map1[_,_]]
res1: Boolean = true 
```

# shell - 如何以安全的方式使用便携式外壳创建临时文件？

> ID：10224921
> 
> 赞同：13
> 
> 时间：2012-04-19T09:08:02.857
> 
> 标签：shell, posix, portability, temporary-files, secure-coding

我想在 POSIX shell ( `/bin/sh`) 中创建一个临时文件。

我发现`mktemp(1)`我的 AIX 机器上不存在它，并且根据[mktemp(1) 的便携性如何？](https://stackoverflow.com/questions/2792675/how-portable-is-mktemp1)，无论如何它都不是那么便携和/或安全。

那么，我应该改用什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T19:30:22.837

为什么不使用`/dev/random`？

使用 perl 可能会更整洁，但 od 和 awk 会这样做，例如：

```
tempfile=XXX-$(od -N4 -tu /dev/random | awk 'NR==1 {print $2} {}') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T12:10:28.907

您没有准确定义“安全”，但其中一个要素可能是自己清理。

```
trap "rm -f \"$tmpfile\"" 0 1 2 3 15 
```

您可能`man 3 signal`可以查看是否有其他信号会导致您的临时文件被擦除。零信号意味着“在干净的出口上”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-03T03:35:52.847

从谷歌那里得到便携式 mktemp。我的需求不如 OP 安全，所以我最终只使用了脚本的 PID：

```
tempx=/tmp/mytemp.$$ 
```

# webdriver - 与 webdriver 的独特浏览器会话

> ID：10224925
> 
> 赞同：0
> 
> 时间：2012-04-19T09:08:20.820
> 
> 标签：webdriver

当与多个线程（即并行多个测试）一起使用时，webdriver 默认情况下是否维护唯一的浏览器会话？如果没有，那么我如何让它保持独特的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:59:01.107

您可以使用网格配置；这正是您所需要的。请参见此处的[并行测试运行示例](http://qtp-help.blogspot.co.at/2011/09/selenium-grid-with-webdriver.html)。网格可以支持多个会话。您可以在将节点注册到集线器时进行配置，使用参数 : `-maxSession x -browser browserName=firefox,maxInstances=x`，其中 x 表示所需的会话数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:24:32.110

我更接近“否” - 如果我在 Selenium Grid 中运行我的测试并且某些浏览器窗口“死”（意外挂起，因为我是糟糕的程序员），重新启动测试会导致我的 webapp 告诉我“另一个用户与同一用户姓名已登录”

但是在正常的 Selenium Webdriver 中，调用`driver = new FirefoxDriver();`会导致新的会话。总是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:49:08.817

通过使用 TestNG ，我们可以打开多个浏览器会话（firefox）并运行测试。

# linux - 如何在 Bash 中运行超时的进程？

> ID：10224939
> 
> 赞同：116
> 
> 时间：2012-04-19T09:09:33.050
> 
> 标签：linux, shell, timeout

> **可能重复：**
> [在给定超时后杀死子进程的 Bash 脚本](https://stackoverflow.com/questions/5161193/bash-script-that-kills-a-child-process-after-a-given-timeout)

有没有办法编写一个 shell 脚本来执行某个命令 15 秒，然后终止该命令？

我尝试过睡眠、等待和 ping，但也许我用错了。

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-04-19T09:17:34.637

使用`timeout`命令：

```
timeout 15s command 
```

注意：在某些需要安装的系统上`coreutils`，在其他系统上它丢失或具有不同的命令行参数。请参阅@ArjunShankar 发布的替代解决方案。基于它，您可以封装该样板代码并创建自己的可移植`timeout`脚本或小型 C 应用程序来做同样的事情。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-04-19T09:16:35.967

有些机器没有`timeout`安装/可用。在这种情况下，您可以后台处理该过程；然后它的 PID 被存储为`$!`; 然后休眠所需的时间，然后将其杀死：

```
some_command arg1 arg2 &
TASK_PID=$!
sleep 15
kill $TASK_PID 
```

在[这个 URL](http://mywiki.wooledge.org/BashFAQ/068)上，我发现提到了不止一种解决方案来实现这一点。

# c++ - 如何避免来自继承的属性冗余

> ID：10224942
> 
> 赞同：1
> 
> 时间：2012-04-19T09:09:49.970
> 
> 标签：c++, class, inheritance, attributes

说我有这个例子：

```
class A1
{
    private:
    string name;
}

class A
{
    private:
    A1* field;
}
class B1 : public A1
{
    private:
    int id;
}
class B : public A
{
    private:
    B1* field;
} 
```

所以在这种情况下，我会在我的 B 课上：

1.  B1 类的 id 属性
2.  name 属性来自类 A 的继承。
3.  另一个名称属性来自于从类 A1 继承的 B1 类。

那么我应该怎么做才能避免这种冗余呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:24:52.963

我在这里看不到任何冗余。让我们将这些类重命名为更有用的名称：

```
class Animal // A1
{
    private:
    string name;
}

class Person // A
{
    private:
    Animal* housePet;
}
class Dog : public Animal // B1
{
    private:
    int breedId;
}
class DogTrainer : public Person // B
{
    private:
    Dog* trainee;
} 
```

你看，没有一个领域可以安全地消除。the`trainee`和 the 不一样`housePet`，它们每个都需要一个单独的`name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:12:43.403

不，你没有任何冗余。

`B`类没有从其基类继承任何成员，因为它们已被声明为私有（然后只能从它们声明的类中可见和可访问）。

例如：

```
class A
{
 private:
  int _privateMember;

 protected:
  int _protectedMember;

 public:
  int _publicMember;
};

class B : public A
{
 void test()
 {
  // This doesn't work, this field is private to the class
  // where it has been declared (A)
  _privateMember = 1;

  // This works, a protected member is accessible inside the class
  // where it's declared and derived classes.
  _protectedMember = 1;

  // This works, a public member is always visible and accessible.
  _publicMember = 1;
 }
};

void test()
{
 A a;

 // This doesn't work, a private field isn't accessible outside the class
 // where it has been declared
 a._privateMember = 1;

 // This doesn't work, a protected member is accessible only inside the class
 // where it has been declared and its derived classes
 a._protectedMember = 1;

 // This works, a public member is always visible.
 a._publicMember = 1;
} 
```

事情可能比这更复杂，你不需要总是使用公共继承，例如：

```
class C : protected A
{
};

void test()
{
 C c;

 // This doesn't work! Field is public for its class but C has inherited from A
 // in a protected way (so only derived classes know that it derives from A).
 c._publicMember = 1;
} 
```

此外，您可以使用声明使一个类的所有私有成员对另一个类或函数可见`friend`：

```
class D
{
 private:
  int _privateMember;

 public:
  int _publicMember;

  friend class DFriend;
};

class DFriend
{
  void test()
  {
   D d;

   // This works, public members are accessible
   d._publicMember = 1;

   // This works too, this class is a friend of D
   d._privateMember = 1;
  }
}; 
```

也就是说，请记住，当您从基类派生时，您会说“*派生类* **属于***基类*类型”。例如，您有一个基类来描述具有某些属性的行星（为简单起见建模为公共字段）：

```
class Planet
{
 public:
  int Diameter;
}; 
```

然后突然你发现你必须使它更通用，你添加了一个更通用的基类，称为 CelestialBody：

```
class CelestialBody
{
 public:
  bool canCapture(CelestialBody anotherBody)
  {
   // Some calculations
  }

 private:
  vector<CelestialBody> _capturedBodies;
};

class Planet : public CelestialBody
{
 public:
  int Diameter;
}; 
```

现在你**这样说**：

*   一个天体是可以*捕捉*另一个天体的东西；
*   天体保留一份捕获天体的私有列表，因为它们可能会改变它的某些属性。
*   行星**是**天体。
*   行星有一个公共（整数）属性来描述它的直径，单位为公里。

的私有成员`CelestialBody`在它之外是不可见的（一种实现细节）。世界知道 a`Planet`是 a `CelestialBody`（因为公共继承），那么一切都是公开的，`CelestialBody`也是公开的`Planet`。

如果你不想*这么说*，那么你不应该简单地使用继承。看看这篇文章：

*   [组合和继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)：何时从另一个对象继承以及何时将另一个对象包含为字段。
*   [封装](http://en.wikipedia.org/wiki/Information_hiding)：类内信息的封装。

# c# - 具有动态大小的窗口以在加载后保持其当前大小

> ID：10224943
> 
> 赞同：0
> 
> 时间：2012-04-19T09:09:50.750
> 
> 标签：c#, wpf, xaml

我有一个具有动态宽度和高度的窗口以及作为内容的用户控件。

根据我的视图模型中的几个条件，我的用户控件的几个控件可见或不可见。

很好地使用`SizeToContent.WidthAndHeight`WPF 使我的窗口以正确的尺寸完美显示，以适应根据`Loaded`我的用户控件事件期间生效的绑定必须可见的所有内容。

我的问题是我的`TextBox`宽度没有定义，如果用户输入太多字符，它会强制我的窗口宽度变大，我不希望这样！

有没有一种方法可以避免这种情况而无需编写大量代码并且不会丢失如果用户调整窗口大小，那里的所有内容都会自动更改以适应新大小的功能？

我想要的是每个控件（或窗口本身）都将保持其当前大小并且不会超出当前窗口的范围。

我希望我能弄清楚我的问题，并提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:35:50.117

我认为您正在搜索 TextBox 的 MaxWidth 属性，尝试将其绑定到 Textbox-es 父控件 Width ，然后如果您键入更长的文本，那么它不应该变大。

# python - 使用 Python 进行 MongoDB 查询

> ID：10224944
> 
> 赞同：1
> 
> 时间：2012-04-19T09:09:51.077
> 
> 标签：python, mongodb

我正在尝试基于 python 的字典构建 mongoDB 查询。密钥在dicts中应该是唯一的问题。看例子

MongoDB数据：

```
{
        "_id" : ObjectId("4dcd3ebc9278000000005158"),
        col1 : 'foo'
}
{
        "_id" : ObjectId("4dcd3ebc9278000000005159"),
        col1 : 'bar'
} 
```

Python代码：

```
dict = {'col1': 'foo'}
dict.update({'col1': 'bar'})

db.test.find(dict) 
```

仅显示一行`col1=='bar'`

```
>>> dict
{'col1': 'bar'} 
```

如何使用不需要唯一键的字典（或任何东西）构建正确的 MongoDB 查询。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:25:33.103

您是否正在寻找“col1”为“foo”或“bar”的文档？

如果是这样，那么你想要`db.test.find({'col1': {'$in': ['foo', 'bar']}});`

解释一下，该查询匹配值为`col1`list`in`的文档`['foo', 'bar']`。

此处记录了高级 mongodb 查询：[http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:34:00.450

我认为您的解决方案只是一种简单的方法，您应该将每个对象推送到一个字典中并将它们存储在一个数组中：

```
dict = []
your_obj = {'col1': 'foo'}
dict.append(your_obj)
dict.append({'col1': 'bar'})
for o in dict:
    db.test.find(o) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-01T03:31:47.803

另一种方法是`$exists`在 mongodb 中使用运算符。

```
query = {'col1': {'$exists': 'true'}}
db.test.find(dict) 
```

这样您就不必指定*col1*可以采用的值。

# android - 处理来电的应用程序/服务

> ID：10224946
> 
> 赞同：0
> 
> 时间：2012-04-19T09:09:53.657
> 
> 标签：android, phone-call

哪个 android OS 应用程序/服务正在处理来电。我假设来电会收到一些硬件中断。但最终必须有一个软件可以被调用并启动屏幕来接听电话。

我假设这是一些服务。但是当我看到正在运行的服务时，我看不到任何可以处理的。请解释android如何处理来电。

# google-chrome - tab.create 改变了吗？如何避免 chrome 弹出扩展关闭

> ID：10224947
> 
> 赞同：0
> 
> 时间：2012-04-19T09:09:57.153
> 
> 标签：google-chrome, google-chrome-extension

在我的扩展程序中，有一个选项可以在单击 URL 时关闭或取消关闭弹出窗口。

```
 chrome.tabs.create( {
        url : turl
    });
    if (!settings.get("lockPopover")) {
        window.close();
    } 
```

在最新版本的 chrome v20 中，它不起作用。popover一直关闭。如何避免这种情况。

# c - 数据传输时禁用 ARP

> ID：10224952
> 
> 赞同：0
> 
> 时间：2012-04-19T09:10:08.153
> 
> 标签：c, linux, network-programming, linux-kernel, arp

我通过 PC1 向 PC2 发送数据，它们都是 Linux 2.6 内核机器。此转移将需要几个小时。PC1 中的 ARP 缓存失效超时设置为 50 秒。所以在数据传输过程中，PC1 每 50 秒向 PC2 发送一次 ARP 请求（因为 PC1 中的 arp 缓存过期）。但理论上，由于数据传输正在进行，因此不需要向 PC2 发送 ARP 请求（因为 PC1 知道 PC2 仍然存在）。

如何禁用 PC1 内 PC2 的 ARP 条目的到期（如果到 PC2 的数据传输仍在进行中）？

注意：我想在传输到 PC2 期间仅为 PC2 ARP 缓存条目禁用 arp-cache 到期。传输后让 ARP 条目过期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:03:56.393

换个新开关。

真的。不要试图通过在内核中鬼混来解决硬件问题。

如果你真的坚持让这个工作，只需设置静态 ARP 条目。他们不会超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:47:11.680

一般来说，ARP 到期会提高连接可靠性，反之则不然。
假设 PC2 出于某种原因更改了它的 MAC 地址。在网段内它可能没有多大意义，但在更复杂的网络中它确实如此。使用 ARP，PC1 将很快了解新的 MAC 并继续。没有它，它仍然会尝试与旧 MAC 对话。

这就是说，静态 ARP `arp -s`（

# colors - 进入缓冲区时的配色方案

> ID：10224953
> 
> 赞同：2
> 
> 时间：2012-04-19T09:10:13.643
> 
> 标签：colors, buffer, vim

我的***.vimrc***中有这个：

```
augroup filetype_colorscheme
        au BufEnter *
        \ if !exists('b:colors_name')
            \ | if &ft == "vim"
                \ | let b:colors_name = 'color_dark'
            \ | else
                \ | let b:colors_name = 'color_light'
            \ | endif
        \ | endif
        \ | exe 'colorscheme' b:colors_name
augroup END 
```

*它的作用*：
当我打开一个**.vim 页面**时，它会打开我的**深色方案**“color_dark.vim”
，而当我打开任何**其他页面**时，它会打开我的**浅色方案**“color_light.vim”

这非常好，但在拆分窗口中不是很好。
每次当我单击带有文本文件的拆分窗口时，所有拆分窗口都会使用浅色方案（甚至是 .vim 文件）变成浅色。
当我在拆分窗口中切换到 vim 文件时，其他拆分窗口中的所有其他文件也会变暗。

是否可以在拆分窗口中保留每个文件类型他自己的颜色方案？
我必须在上面的代码中更改什么？

**编辑**
如果这是不可能的，当我进入拆分窗口时，是否可以禁用上述代码？（为了让我自己选择配色方案，所有拆分窗口都一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:19:43.077

配色方案将始终影响整个 vim 实例。每个拆分窗口不可能有不同的配色方案。

编辑 1：要在编辑中回答您的第二个问题，您可能可以添加`&& winnr('$') == 1`到第一个`if`以阻止在打开多个拆分窗口时发生这种情况。

编辑2：哎呀，上面的编辑不起作用，但是我认为应该将所有内容包装在另一个中`if`。

编辑3：错过了几个管道。

```
augroup filetype_colorscheme
        au BufEnter *
        \ | if winnr('$') == 1
                \ if !exists('b:colors_name')
                    \ | if &ft == "vim"
                        \ | let b:colors_name = 'color_dark'
                    \ | else
                        \ | let b:colors_name = 'color_light'
                    \ | endif
                \ | endif
                \ | exe 'colorscheme' b:colors_name
        \ | endif
augroup END 
```

# magento - 在 Magento 菜单中添加链接

> ID：10224956
> 
> 赞同：0
> 
> 时间：2012-04-19T09:10:22.243
> 
> 标签：magento, magento-1.4

我正在尝试在我的菜单中手动添加一个链接，但它不起作用。这是我尝试过的：我在主题文件夹中编辑了navigation/top.phtml，但它不会改变任何东西。我还尝试在我的“base”文件夹中编辑 navigation/top.phtml，但没有成功。知道我必须编辑正确的文件才能使用此菜单吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:02:00.687

我希望下面的链接对你有帮助。

[http://www.webdosh.net/2011/03/adding-links-to-top-menu-of-magento.html](http://www.webdosh.net/2011/03/adding-links-to-top-menu-of-magento.html)

# jquery - JQuery Mobile + Phonegap：页面在设备准备好之前显示

> ID：10224962
> 
> 赞同：2
> 
> 时间：2012-04-19T09:10:53.993
> 
> 标签：jquery, mobile, cordova

我正在开发一个带有 phonegap 的 iOS 应用程序。我遇到了一个问题。似乎在触发页面（和其他 AJAX 函数）*之后触发了事件设备就绪。*

示例代码：

```
Global.init = function() {alert("ready");}
$(function(){
    document.addEventListener("deviceready", Global.init, false);
});
$('#landing').live('pageshow', function(){alert('pageshow')}); 
```

我将在警报“准备好”（几秒钟）之前看到警报“pageshow”。无论如何确保在设备准备好*后*执行所有 JQuery 移动代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T20:17:31.990

一旦在 deviceready 事件处理程序中委派了“pageshow”功能，您必须触发“pageshow”事件：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    $("#details_page").on("pageshow", function() {
        console.log("Hello world!");
    });
    $("#details_page").trigger("pageshow");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T09:11:25.977

[从这里](https://stackoverflow.com/questions/13840982/livepageshow-not-working-on-phonegap-jquery-mobile)回答

请注意，您只能在触发 deviceready 事件后运行代码。

因此，对于设备就绪事件，它会是这样的：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    $(document).delegate("#details_page", "pageshow", function() {
        console.log("Hello world!");
    });
} 
```

请注意，如果 #detalis_page 是要加载的第一个页面，则不会调用第一个“pageshow”，因为它在设备准备好之前出现，请将您的初始代码放在 onDeviceReady() 函数中，并将每个 pageshow 的重复代码放入委托中功能。

# android - 在 ICS 环境中开发的应用程序的姜饼兼容性

> ID：10224963
> 
> 赞同：0
> 
> 时间：2012-04-19T09:10:54.190
> 
> 标签：android

假设我在 ICS 环境中开发一个应用程序，并且在清单中我将 minSdkVersion 作为姜饼，我可以使用片段吗？我了解片段仅从 Honeycomb 开始。我可以使用 Fragment api 还是会因为我的 minSdkVersion 而被弃用？如果我们支持它，那么我将如何在 2.3 设备上查看它？简而言之，我如何确保在 ICS 中开发的应用程序也可以在 Gingerbread 上运行？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:15:30.037

如果要在 v11 之前使用片段，则需要使用兼容性库。

[所有博客条目的片段](http://android-developers.blogspot.com/2011/03/fragments-for-all.html)

# c++ - SSE 优化的 64 位整数仿真

> ID：10224966
> 
> 赞同：10
> 
> 时间：2012-04-19T09:11:09.460
> 
> 标签：c++, optimization, x86, 64-bit, sse

对于我正在做的一个爱好项目，我需要在 x86 CPU 上模拟某些 64 位整数运算，并且它需要*快速*。

目前，我正在通过 MMX 指令执行此操作，但这真的很痛苦，因为我必须一直刷新 fp 寄存器状态（而且因为大多数 MMX 指令处理有*符号*整数，我需要无符号行为）。

所以我想知道这里的 SSE/优化专家是否可以使用 SSE 提出更好的实现。

我需要的操作如下（非常具体）：

```
uint64_t X, Y;

X = 0;
X = 1;
X << 1;
X != Y;
X + 1;
X & 0x1 // get lsb
X | 0x1 // set lsb
X > Y; 
```

具体来说，我不需要通用的加法或移位，例如，只需加一和左移一。真的，只是这里显示的*确切*操作。

当然，除了在 x86 上，`uint64_t`它是通过使用两个 32 位标量来模拟的，这很慢（而且，在我的情况下，根本不起作用，因为我需要加载/存储是原子的，它们不会是加载/存储两个单独的寄存器时）。

因此，我需要一个 SIMD 解决方案。其中一些操作很简单，SSE2 已经支持。其他（`!=`和`<`）需要更多的工作。

建议？SSE 和 SSE2 都很好。允许 SSE3 需要一些说服力，而 SSE4 可能是不可能的（支持 SSE4 的 CPU*无论如何*都可能运行 64 位，所以我不需要这些解决方法）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T09:43:04.360

SSE2 直接支持一些 64 位整数运算：

**将两个元素都设置为 0：**

```
__m128i z = _mm_setzero_si128(); 
```

**将两个元素都设置为 1：**

```
__m128i z = _mm_set1_epi64x(1);      // also works for variables.
__m128i z = _mm_set_epi64x(hi, lo);  // elements can be different

__m128i z = _mm_set_epi32(0,1,0,1);  // if any compilers refuse int64_t in 32-bit mode.  (None of the major ones do.) 
```

**设置/加载低 64 位，零扩展至 __m128i**

```
// supported even in 32-bit mode, and listed as an intrinsic for MOVQ
// so it should be atomic on aligned integers.
_mm_loadl_epi64((const __m128i*)p);     // movq or movsd 64-bit load

_mm_cvtsi64x_si128(a);      // only ICC, others refuse in 32-bit mode
_mm_loadl_epi64((const __m128i*)&a);  // portable for a value instead of pointer 
```

基于的东西`_mm_set_epi32`可能会被某些编译器编译成一团糟，因此`_mm_loadl_epi64`似乎是跨 MSVC 和 ICC 以及 gcc/clang 的最佳选择，实际上应该是安全的，可以满足您在 32 位模式下对原子 64 位加载的要求. [在 Godbolt 编译器资源管理器](https://godbolt.org/z/FAP2QZ)上查看

**垂直加/减每个 64 位整数：**

```
__m128i z = _mm_add_epi64(x,y)
__m128i z = _mm_sub_epi64(x,y) 
```

[http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_integer_arithmetic.htm#intref_sse2_integer_arithmetic](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_integer_arithmetic.htm#intref_sse2_integer_arithmetic)

**左移：**

```
__m128i z = _mm_slli_epi64(x,i)   // i must be an immediate 
```

[http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_int_shift.htm](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_int_shift.htm)

**位运算符：**

```
__m128i z = _mm_and_si128(x,y)
__m128i z = _mm_or_si128(x,y) 
```

[http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_integer_logical.htm](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_integer_logical.htm)

SSE 没有增量，因此您必须使用带有`1`.

* * *

[`pcmpeqq`](https://www.felixcloutier.com/x86/pcmpeqq)比较更难，因为在 SSE4.1和 SSE4.2之前没有 64 位支持[`pcmpgtq`](https://www.felixcloutier.com/x86/pcmpgtq)

**这是平等的：**

```
__m128i t = _mm_cmpeq_epi32(a,b);
__m128i z = _mm_and_si128(t,_mm_shuffle_epi32(t,177)); 
```

这会将每个 64 位元素设置为`0xffffffffffff`（也就是`-1)`如果它们相等。如果你想要它作为 a`0`或`1`in an ，你可以使用和 add`int`将其拉出。（但有时你可以这样做而不是转换和添加。）`_mm_cvtsi32_si128()``1``total -= cmp_result;`

**小于：（**未完全测试）

```
a = _mm_xor_si128(a,_mm_set1_epi32(0x80000000));
b = _mm_xor_si128(b,_mm_set1_epi32(0x80000000));
__m128i t = _mm_cmplt_epi32(a,b);
__m128i u = _mm_cmpgt_epi32(a,b);
__m128i z = _mm_or_si128(t,_mm_shuffle_epi32(t,177));
z = _mm_andnot_si128(_mm_shuffle_epi32(u,245),z); 
```

`0xffffffffffff`如果 in 中的对应元素`a`小于 ，这会将每个 64 位元素设置为`b`。

* * *

这是返回布尔值的“等于”和“小于”的版本。它们返回底部 64 位整数的比较结果。

```
inline bool equals(__m128i a,__m128i b){
    __m128i t = _mm_cmpeq_epi32(a,b);
    __m128i z = _mm_and_si128(t,_mm_shuffle_epi32(t,177));
    return _mm_cvtsi128_si32(z) & 1;
}
inline bool lessthan(__m128i a,__m128i b){
    a = _mm_xor_si128(a,_mm_set1_epi32(0x80000000));
    b = _mm_xor_si128(b,_mm_set1_epi32(0x80000000));
    __m128i t = _mm_cmplt_epi32(a,b);
    __m128i u = _mm_cmpgt_epi32(a,b);
    __m128i z = _mm_or_si128(t,_mm_shuffle_epi32(t,177));
    z = _mm_andnot_si128(_mm_shuffle_epi32(u,245),z);
    return _mm_cvtsi128_si32(z) & 1;
} 
```

# symfony - 在 symfony2 config.yml 文件中导入 yml 配置

> ID：10224967
> 
> 赞同：3
> 
> 时间：2012-04-19T09:11:10.447
> 
> 标签：symfony, yaml

在我的 Symfony2 config.yml 文件中，我想导入一些我希望收集在单独的 yml 文件中的配置。

我用了：

```
imports:
- { resource: parameters.yml }
- { resource: sso_accounts.yml } 
```

在我的 sso_accounts.yml 文件中，我基本上有：

```
sso_accounts:
  company:
    publickey:  publickey
    secret:     privatekey
    users:      [ user1@email.com, user2@email.com ] 
```

但是（总是有一个但是......）我收到了这个错误：

```
Whoops, looks like something went wrong.

2/2 FileLoaderLoadException: Cannot import resource "/Users/mycomp/Sites/myapp/app/config/sso_accounts.yml" from "/Users/mycomp/Sites/myapp/app/config/config.yml".

1/2 InvalidArgumentException: There is no extension able to load the configuration for "sso_accounts" (in /Users/mycomp/Sites/myapp/app/config/sso_accounts.yml). Looked for namespace "sso_accounts", found "framework", "security", "twig", "monolog", "swiftmailer", "doctrine", "assetic", "sensio_framework_extra", "jms_security_extra", "problematic_acl_manager", "twig_js", "fos_js_routing" 
```

我的导入有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:32:54.360

来自 config.yml 的配置由扩展加载。您的 sso_accounts 有一个吗？看来你没有。

你可以在这里阅读它是如何工作的：http: [//symfony.com/doc/current/cookbook/bundles/extension.html](http://symfony.com/doc/current/cookbook/bundles/extension.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T20:58:26.307

如果上面的答案不起作用，试试这个（Symfony 2.3.4）：

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    - { resource: @FolderYourBundleName/Resources/config/config.yml } 
```

然后，配置文件必须位于 src/Folder/YourBundleName/Resources/config/config.yml

我对 Smyfony2 相当陌生，所以我不知道这是否是一个好方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-30T08:38:08.063

如果您不使用捆绑包（因此它没有注册，并且@MyBundleName/Resources 无法访问......）您也可以这样做

//config.yml

`- { resource: '../../src/Some/Where/Configuration/settings.yml' }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T22:11:20.950

不是对OP的直接回答。但是，这是另一个简单的选项，可以帮助您管理捆绑包中的配置：

```
namespace Acme\DemoBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class AcmeDemoExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
        $loader->load('otherstuff.yml');
        $loader->load('stillotherstuff.yml');
    }
} 
```

# git - 如何安装/设置 TortoiseGit 以使用 GitHub

> ID：10224972
> 
> 赞同：31
> 
> 时间：2012-04-19T09:11:27.030
> 
> 标签：git, github, cygwin, tortoisegit

我刚刚安装了[Git For Windows](http://msysgit.github.com/)，并通过 Cygwin 使用 SSH 创建了我的 SSH 密钥。它似乎是从命令行和 Git For Windows GUI 工作的，但现在我想使用 TortoiseGit。TortoiseGit 默认使用类似 Putty 的 SSH 客户端，但显然 GitHub 只接受（打开）SSH，我真的不知道如何继续。我将进行干净的 TortoiseGit 安装，我已经安装了 Cygwin 和 Git for Windows。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-28T17:30:58.613

对于希望更改现有 TortoiseGit 安装以使用[PuTTY](http://en.wikipedia.org/wiki/PuTTY)而不是[OpenSSH](http://en.wikipedia.org/wiki/OpenSSH)的任何人，只需右键单击 -> *TortoiseGit* -> *Settings* -> *Network*，然后将 'ssh.exe' 更改为 'tortoiseplink.exe'。从那时起，如果您还运行了 Pageant，则应该使用 Pageant（以及您在那里设置的任何键）进行推/拉。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T09:43:54.503

最简单的方法是先安装 TortoiseGit，然后安装 msysgit，并将 SSH 客户端设置为 TortoisePLink。使用 TortoiseGit Puttykey 生成器创建一个新的密钥对，将您的公钥添加到 GitHub。

克隆/创建一个新的存储库。在您的 Tortoise 存储库设置中，设置您的全名和电子邮件。然后在 Git 配置菜单下的远程菜单中输入您的克隆 URL 并选择您的 PuTTY 密钥。GitHub 与 PuTTY 键配合得很好。我有朋友用过，我自己也用过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T17:51:46.203

## 1) 赛格温

使用文章*[Working with SSH key passphrases](https://help.github.com/articles/working-with-ssh-key-passphrases)*中描述的方法。

在 Cygwin 会话启动时将只要求输入一次密码。！！！在退出 Cygwin 会话之前不要忘记终止 ssh-agent 进程（使用 ps 查找进程 PID 并 kill -9）。

我们为 Cygwin 使用了一种单独的方法，因为 Cygwin 出于某种原因看不到在 Windows 环境中从外部启动的进程。

## 2, 3) MsysGit, TortoiseGit

有用的链接： [http ://dogbiscuit.org/mdub/weblog/Tech/WindowsSshAgent](http://dogbiscuit.org/mdub/weblog/Tech/WindowsSshAgent)

安装 MsysGit。安装 TortoiseGit（在安装过程中检查 openssh 而不是 plink）。！！！检查系统变量。如果存在 GIT_SSH 变量 - 将其删除。

转到*TortoiseGit* ->*设置*->*常规*。

将 Git EXE 路径设置为 <MsysGitHome>/bin。将外部 DLL 路径设置为 <MsysGitHome>/mingw/bin。

转到*TortoiseGit* ->*设置*->*网络*。将 SSH 客户端属性设置为 <MsysGitHome>/bin/ssh.exe

定义系统变量 SSH_AUTH_SOCKS=C:\temp.ssh-socket

启动 cmd.exe 并执行以下命令（因为我们安装了 MsysGit，所以可以在 cmd 中访问以下所有命令 - <MsysGit>/bin 已添加到系统 PATH 变量中）：

```
# The following command is required to execute for avoiding an address already bind message when ssh-agen is not started yet but .ssh-socket exists after previous agent session
rm "%SSH_AUTH_SOCK%"

# Starting ssh-agent
ssh-agent -a "%SSH_AUTH_SOCK%"

# Adding our openssh key
ssh-add "%USERPROFILE%\.ssh\id_rsa"

# Type password for your key 
```

就是这样。从那一刻起，您可以在没有提示密码的情况下从 TortoiseGit 和 MsysGit执行`git push`, 。`git pull`

当不再需要 ssh-agent 时，您可以通过 Windows [Task Manager](http://en.wikipedia.org/wiki/Windows_Task_Manager)将其杀死。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-31T10:57:28.350

[Anmol Jain 的这个解决方案](https://community.atlassian.com/t5/Sourcetree-questions/SourceTree-to-GitHub-Enterprise/qaq-p/1073288#M38541)非常适合我。他已经发布了适用于乌龟 git 的源代码树的解决方案。

脚步：

1.  从 github 企业只需复制 https 链接即可克隆
2.  在本地机器中的 tortoise git --> git clone --> 在 URL 中制作如下 http://@git.example.com/BTS/fp-pro-license.git/ORG1/spring-project.git 所以你将能够克隆

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T16:53:00.067

Ed Goad 的[这段视频帮助了我。](https://www.youtube.com/watch?v=kHkQnuYzwoo)它展示了如何设置 PAS 令牌并为 git.exe 和 TortoiseGit 配置它。

视频中的步骤包括：

1.  从 GitHub 配置文件设置创建 PAS | 开发者设置 | 个人访问令牌。
2.  复制你的考绩
3.  运行一些命令：
4.  `git config --global user.name 'yourUser'`
5.  `git config --global user.email 'youremail@domain.com'`
6.  `git clone https://location/of/repo`
7.  “https://github.com”的用户名：`yourUser`
8.  'https://yourUser@github.com' 的密码：`Paste in your PAS here instead of your real password.`

# c++-cli - 创建具有 long/size_t 长度的托管数组

> ID：10224974
> 
> 赞同：3
> 
> 时间：2012-04-19T09:11:41.467
> 
> 标签：c++-cli

直接跳到代码，这就是我想做的：

```
size_t len = obj->someLengthFunctionThatReturnsTypeSizeT();
array<int>^ a = gcnew array<int>(len); 
```

当我尝试这个时，我得到了错误

> 从 size_t 到 int 的转换，可能会丢失数据

有没有一种方法可以在不显式转换为 int 的情况下编译此代码？我发现我无法将数组初始化为这个大小很奇怪，特别是因为有一个 LongLength 属性（如果你只能将一个长度初始化为一个 int，你怎么能得到一个 long 的长度 - 比 int 大？ ）。

谢谢！

PS：我确实发现[这篇文章](https://stackoverflow.com/questions/3918384/declaring-the-largest-array-using-size-t)说分配一个真正 size_t 的数组可能是不切实际的，但我不认为这是一个问题。关键是我想初始化的长度存储在 size_t 变量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:01:34.793

托管数组被实现为`Int32`用作索引，没有办法解决这个问题。您不能分配大于`Int32.MaxValue`.

您可以使用静态方法[`Array::CreateInstance`](http://msdn.microsoft.com/en-us/library/1z8w3at5.aspx#Y0)（采用 a`Type`和数组的重载`Int64`），然后将结果`System::Array`转换为适当的实际数组类型（例如`array<int>^`）。请注意，传递的值不得大于`Int32.MaxValue`。而且你仍然需要投射。

所以你至少有两个选择。要么铸造：

```
// Would truncate the value if it is too large
array<int>^ a = gcnew array<int>((int)len); 
```

或者这个（不需要转换 len，而是 的结果`CreateInstance`）：

```
// Throws an ArgumentOutOfRangeException if len is too large
array<int>^ a = (array<int>^)Array::CreateInstance(int::typeid, len); 
```

就个人而言，我觉得第一个更好。您仍然可能需要检查 len 的实际大小，以免遇到任何上述错误。

# android - 自定义锁定屏幕有时会被股票锁定屏幕覆盖

> ID：10224975
> 
> 赞同：0
> 
> 时间：2012-04-19T09:11:46.247
> 
> 标签：android, lockscreen

我开发了一个自定义锁屏应用程序。基本上当屏幕关闭时，应用程序将启动并解锁股票锁定屏幕，然后当屏幕打开时，用户将看到我的自定义锁定屏幕。到目前为止工作得很好，直到最近我发现有时当我按下主页按钮时，屏幕会非常快地闪烁一次，当这种情况发生时，我的自定义锁定屏幕会失败。股票锁定屏幕将在屏幕开启时出现，我的自定义锁定屏幕只会在用户解锁股票锁定屏幕后显示。有人对这个问题有线索吗？或任何建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:04:34.947

Go to settings > security > screen lock and select 'none'. Now it should always show only your custom lock screen.

# c# - C# Forms - 标签文本随点击事件而变化

> ID：10224976
> 
> 赞同：0
> 
> 时间：2012-04-19T09:11:54.297
> 
> 标签：c#, forms, text, edit, labels

在 C# 表单应用程序中，我完成了以下操作：

```
Label Some; string S;
private void Something()
{
  Some.text = S;
  Some.Location = new Point(100, 100);
  Some.Size = new Size(300, 300);
  this.Controls.AddRange(new System.Windows.Forms.Control[] { Some });
} 
```

然后我用点击事件定义了 S：

```
private void YARR_click(object sender, System.EventArgs e)
{
  S="Some random text";
} 
```

还有一个：

```
private void HARR_click(object sender, System.EventArgs e)
{
  S="Some other random text";
} 
```

创建标签“Some”后，当我单击这些东西时，它的文本不会更改为“S”值……我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:17:32.703

如果您单击的内容与您要更改文本的标签在同一个表单中，您只需要做

```
private void YARR_click(object sender, System.EventArgs e)
{
  Some.Text="Some random text";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:15:49.567

请更改标签文本，不要为字符串赋值。

`do Some.text = "Some random Text"` 点击事件或点击事件中的调用`Something()`函数。

# vb.net - 将数据表序列化为 JSON 问题 vb.net

> ID：10224986
> 
> 赞同：0
> 
> 时间：2012-04-19T09:12:52.340
> 
> 标签：vb.net, json, serialization, datatable, javascriptserializer

好的，我正在尝试序列化 vb.net 中的数据表：

```
Dim dt As New System.Data.DataTable 
```

对于序列化程序：

```
Dim js As JavaScriptSerializer = New JavaScriptSerializer()
dim jsonString as string
jsonString=js.serialize(dt) 
```

当它序列化最后一行的数据表时，出现错误：

> System.Web.Extensions.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：在序列化“System.Globalization.CultureInfo”类型的对象时检测到循环引用

我什至制作了只有 1 列和 1 行的最简单的数据表，但它不会序列化它，

我知道这种问题得到了回答：[在这里](https://stackoverflow.com/questions/2307605/vb-net-problem-converting-datatable-to-json)

但我不知道如何实现答案（创建一个新课程），或者也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:58:21.507

据我所知，DataTable 对象没有开箱即用的序列化程序。我最终选择了一个完整的自定义序列化。另一种方法可能是首先将您的 DataTable 转换为 IEnumerable<>，然后进行序列化。

但是，此链接可能会有所帮助：[JSV](http://www.servicestack.net/mythz_blog/?p=176)

# java - 如何向 Eclipse Indigo 添加 Metro Web 服务支持

> ID：10224996
> 
> 赞同：1
> 
> 时间：2012-04-19T09:13:35.810
> 
> 标签：java, eclipse, web-services, glassfish, jax-ws

[Arun Gupta 有一个很好的教程](http://blog.arungupta.me/2009/08/totd-98-create-a-metro-jax-ws-web-service-using-glassfish-tools-bundle-for-eclipse/)，他可以在其中从 Web 服务运行时列表中选择 Metro。我在此列表中没有该选项，因此无法使用向导创建 Metro Web 服务：

![Web 服务运行时](../Images/1f94d7d53fa2fef7cd3756bf23d6d0c9.png)

我已经安装了 Oracle GlassFish Server Tools。有人做过吗？如果是，如何？如果您有一些最佳实践或建议，请随时分享！

**编辑**我找到了有关如何正确安装 GlassFish 插件的[说明](http://ajax.java.net/eclipse/)`https://ajax.dev.java.net/eclipse`，但更新站点已失效。

[重新安装了此处](http://glassfishplugins.java.net/eclipse36/index.html#getting)介绍的插件，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:51:00.467

对于 Eclipse 靛蓝。

创建 Java 项目

```
import javax.jws.WebService;
@WebService
public class WSResponse {
    public String getMessage(String name){
    return "Hello "+name;
    }
}
//Create build.xml
<project default="wsgen">
<target name="wsgen" >
<exec executable="wsgen">
<arg line="-cp ./bin -keep -s ./src -d ./bin com.ws.service.example.WSResponse"/>
</exec>
</target>
</project> 
```

执行 Ant build.xml 文件

最后写：WS-发布类

```
import javax.xml.ws.Endpoint;
public class RunWSService {
public static void main(String[] args) {
    System.out.println("Startring Web Service started.");
    Endpoint.publish("http://localhost:8080/WSExample", new WSResponse());
}
} 
```

使用 Web 服务资源管理器对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:03:06.910

看看这个

[http://www.myeclipseide.com/documentation/quickstarts/webservices_jaxws/](http://www.myeclipseide.com/documentation/quickstarts/webservices_jaxws/)

这是 jax-ws Metro 库，您不需要 GlassFish。Tomcat会做。

他们添加了 Metro JAX-WS 运行时库。

我已经尝试过了，它有效。

# ruby-on-rails - 使用“记住我”选项注销用户时设计使用 record=nil 调用的 before_logout 钩子

> ID：10224998
> 
> 赞同：1
> 
> 时间：2012-04-19T09:13:38.877
> 
> 标签：ruby-on-rails, devise, neo4j, warden

我正在使用 Devise 2.0.4（带有 devise-neo4j）、Warden 1.1.1、Rails 3.2.3。
当我在未选中记住我选项的情况下登录时，我可以毫无问题地退出。
但是，当我使用记住我选项登录时，我无法退出。
挖掘代码我发现`devise-2.0.4/lib/devise/hooks/forgetable.rb`( `Warden::Manager.before_logout do |record, warden, options|`) 中的 before_logout 钩子是用`record => nil`.
我不确定是 Devise 的 bug，Warden 的还是我的……</p>

堆栈跟踪如下：

```
devise-2.0.4/lib/devise/hooks/forgetable.rb:7:in `(root)'
org/jruby/RubyProc.java:258:in `call'
warden-1.1.1/lib/warden/hooks.rb:14:in `_run_callbacks'
org/jruby/RubyArray.java:1615:in `each'
warden-1.1.1/lib/warden/hooks.rb:9:in `_run_callbacks'
warden-1.1.1/lib/warden/manager.rb:53:in `_run_callbacks'
warden-1.1.1/lib/warden/proxy.rb:243:in `logout'
org/jruby/RubyArray.java:1615:in `each'
warden-1.1.1/lib/warden/proxy.rb:241:in `logout'
devise-2.0.4/lib/devise/controllers/helpers.rb:159:in `sign_out_all_scopes'
devise-2.0.4/lib/devise/controllers/helpers.rb:139:in `sign_out'
devise-2.0.4/app/controllers/devise/sessions_controller.rb:23:in `destroy' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T17:18:44.503

该问题与 Torquebox 和会话存储配置（config/initializers/session_store.rb）有关。当使用默认的 Rails 配置或 Torquebox 注释掉（出于某种原因）时，就会出现此问题。