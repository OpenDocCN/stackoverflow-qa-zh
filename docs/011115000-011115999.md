# StackOverflow 问答 11115000-11115999

# bash - 为什么我无法指定包含 bash 数组变量长度的序列？

> ID：11115000
> 
> 赞同：3
> 
> 时间：2012-06-20T07:45:16.423
> 
> 标签：bash, shell

我正在编写一个脚本，该脚本在一系列目录中查找文件是否存在，并在找到时通过`pushd`. 该`dirs`命令非常令人讨厌，我偶然发现了它的内容的 bash 变量形式，`$DIRSTACK`

`$DIRSTACK`是堆栈中的目录数组。始终保证有 1 个条目，即当前工作目录，然后是推送的目录。

我正在尝试遍历目录列表，但似乎无法让 for 循环接受我尝试自动生成的序列长度：

```
for i in {1..${#DIRSTACK[*]}}; do
  echo ${DIRSTACK[$i]}
done 
```

执行时，bash 失败并出现以下错误：

```
line 72: {1..2}: syntax error: operand expected (error token is "{1..2}") 
```

老实说，我很难过，因为我已经`for i in {1..5}`多次手动编写脚本没有问题，并且给出错误消息，看起来数组项扩展的数量完全按照我的意愿工作。

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:51:51.473

如果您在其中有参数，大括号扩展将无法正常工作。这是因为在这种情况下，参数 ,直到大括号展开**后**`DIRSTACK`才会展开。

 **从 bash 手册页：

> 大括号扩展在任何其他扩展之前执行，并且任何其他扩展的特殊字符都保留在结果中。它是严格的文本。Bash 不对扩展的上下文或大括号之间的文本应用任何句法解释。

如果您只是想遍历数组，为什么不使用以下内容？

```
for i in "${DIRSTACK[@]}"
do
    echo $i
done 
```

或者，如果您想显式使用数组的长度：

```
for (( i = 0 ; i < ${#DIRSTACK[@]} ; i++ ))
do
    echo ${DIRSTACK[$i]}
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:09:16.243

*与序列表达式*类似的构造是使用`seq(1)`命令。

对于您的具体情况，您可以使用：

```
for i in $(seq ${#DIRSTACK[*]}); do
  echo ${DIRSTACK[$i]}
done 
```

但是，鉴于您对@dogbane 的回答的评论，这仍然不会做您想要的，因为您仍在迭代数组中的元素数量，但索引超过末尾。

*通过使用 bash 的substring expansion*可以轻松实现您想要的，它也适用于数组。

```
for dir in "${DIRSTACK[@]:1}" ; do
  echo $dir
done 
```**

# asp.net-mvc - 为按钮添加多个 ActionName

> ID：11115001
> 
> 赞同：0
> 
> 时间：2012-06-20T07:45:25.677
> 
> 标签：asp.net-mvc

我有一个控制器，我有保存按钮单击事件。我使用相同的控制器和视图来添加和编辑目的。我的代码如下

```
[HttpPost]
            [Button(ButtonName = "Save")]
            [ActionName("Create")]
            [ValidateAntiForgeryToken(Salt = "PostData")]
            public ActionResult Save(Ntegra m_Ntegra,FormCollection form)
            {} 
```

由于我在这里使用 ActionName("Create")，所以按钮不能用于 ActionName("Edit")。谁能告诉我如何才能达到我的要求！！感谢帮助...... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:14:27.933

和 并不是真的需要两个控制器动作`create`，`edit`你可以有一个动作而不用`ActionName`属性装饰。

在单个控制器操作中，您必须检查`id`要保存的实体的，如果有一些值，那么它将被编辑否则创建。

```
[HttpPost]
public ActionResult Save(Ntegra m_Ntegra)
{
  if(m_Ntegra.Id == 0)
  {
    // create
  }
  else
  {
    // edit
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:03:29.667

您可以使用名为 Save 的操作方法并传递模型。在操作方法中，您可以检查模型中是否存在 ID。如果有预定义的 ID，您可以更新记录，否则您可以创建新记录。在你为 FormCollection 中，在渲染表单时使用隐藏字段来存储 Id 字段。

```
public ActionResult Save(FormCollection form)
            {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:55:22.593

您可以使用一个视图，即`Edit or Create`，但您需要编写 2 个不同的控制器操作（创建、编辑）。

请参考[`MVC Music store CodePlex project`](http://mvcmusicstore.codeplex.com/)哪个可以让您了解使用哪些约定并编写标准 MVC 代码

# z3 - Z3 4.0：获取完整模型

> ID：11115004
> 
> 赞同：2
> 
> 时间：2012-06-20T07:45:30.133
> 
> 标签：z3

我需要一个完整的 SMTLIB2 公式模型：

[http://pastebin.com/KiwFJTrK](http://pastebin.com/KiwFJTrK)

Z3（版本 3.2 和 4.0）返回所有变量的值，但不返回*var4*的值。我尝试了一些配置设置，例如

```
MODEL_COMPLETION = true 
```

但它似乎没有用。有人有建议吗？相比之下，CVC3 返回一个模型（包括 var4），因此这不是 SMTLIB 或我的示例的问题。

我需要这个的原因[在这里详细](https://stackoverflow.com/questions/11049918/z3-4-0-z3-parse-smtlib2-string)解释。简而言之：我想使用 C API 进行增量求解。出于这个原因，我必须多次使用函数**Z3_parse_smtlib2_string 。**此函数需要先前声明的函数和常量作为参数。我无法通过**Z3_get_smtlib_decl**获取此信息，因为此类函数仅在调用**z3_parse_smtlib_string**时才起作用，而不是**Z3_parse_smtlib2_string**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:04:55.533

您可以通过在脚本开头添加以下选项来避免此问题。

```
(set-option :auto-config false) 
```

我会在下一个版本中修复它。这是对正在发生的事情的简短解释。Z3 有一个 0-1 整数问题的求解器。预处理后，您的脚本被 Z3 标记为 0-1 整数问题。当问题被视为 0-1 问题时，的值`var4`是“无关紧要”，但当问题被视为整数问题时，它不是“无关紧要”（`var4`必须为 0 或 1） . 默认情况下，Z3 不会显示“无关”变量的值。

当您请求模型中未包含的常量的值时，这`MODEL_COMPLETION=true`将完成模型。例如，如果我们执行`(eval var4)`，Z3 将产生对 的解释`var4`。

# iphone - UIDatePicker，在 UITextView 中用作字符串时相差 +/- 1 天

> ID：11115005
> 
> 赞同：0
> 
> 时间：2012-06-20T07:45:33.307
> 
> 标签：iphone, xcode, nsdateformatter, uidatepicker, nsdatecomponents

我有 2 个日期选择器，每个选择器都遵循以太（280 天），选择器正确更改，但是`mydatepicker.date`当 NSlog 或将其放入`UITextfield`日期时变为日期 - 1 天或日期 + 1 天

这是我的代码：

第一个选择器：

```
int daysToAdd = -280;  
// set up date components
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
[components setDay:daysToAdd];
// create a calendar
NSCalendar *addingdays = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDate *newDate = [addingdays dateByAddingComponents:components toDate:dueDatePickerView.date options:0];
lastPerPickerView.date = newDate;
 NSLog(@"%@",newDate); 
```

第二个：

```
int daysToAdd2 = 280;  
// set up date components
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
[components setDay:daysToAdd2];
// create a calendar
NSCalendar *addingdays2 = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDate *newDate2 = [addingdays2 dateByAddingComponents:components toDate:lastPerPickerView.date options:0];
dueDatePickerView.date = newDate2;
NSLog(@"%@",newDate2); 
```

如果第一个选择器的日期是 12-12-2012，则输出是 11-12-2012

在我的代码中，我给了他们以下属性

```
 lastPerPickerView.datePickerMode = UIDatePickerModeDate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:11:10.737

尝试将此行添加到您的代码中，

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]]; 
```

或者

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:44:39.763

您得到的输出在逻辑上是正确的。但是，如果您想要根据您的要求输出，我认为您应该将值 280 更改为 279。

# postgresql - 在 postgresql 中查询

> ID：11115006
> 
> 赞同：0
> 
> 时间：2012-06-20T07:45:37.877
> 
> 标签：postgresql

我有两个表 t1 和 t2 如下

**t1**

```
A    B    C    D   E
1    2    c    d    e
3    1    d    e    f
4    2    f    g    h 
```

**t2**

```
A    B    
1    2    
8    6   
4    2 
```

这里 A,B,C,D,E 是 t1 的列，A,B 是 t2 的列，其中 A 和 B 是公共列。
**到目前为止**
我所做的我写了以下查询

```
WITH temp as (
    select * 
    from t2
) 
select tab1.* 
from t1 tab1, temp tab2 
where (tab1.A!=tab2.A OR tab1.B!=tab2.B) 
```

我**想要**这个输出

```
A    B    C    D    E
3    1    d    e    f 
```

但我**得到**这个输出

```
A    B    C    D    E
1    2    c    d    e
1    2    c    d    e
3    1    d    e    f
3    1    d    e    f
3    1    d    e    f
4    2    f    g    h
4    2    f    g    h 
```

我应该使用什么查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:57:33.407

如果我对您的理解正确，您会喜欢 T1 中在 T2 中没有相应行的那些行。我认为最简单的方法是`LEFT OUTER JOIN`：

```
psql=> select * from t1;
 a | b | c | d | e 
---+---+---+---+---
 1 | 2 | c | d | e
 3 | 1 | d | e | f
 4 | 2 | f | g | h
(3 rows)

psql=> select * from t2;
 a | b 
---+---
 1 | 2
 8 | 6
 4 | 2
(3 rows)

psql=> select t1.a, t1.b, t1.c, t1.d, t1.e from t1 left outer join t2 on (t1.a = t2.a and t1.b = t2.b) where t2.a is null;
 a | b | c | d | e 
---+---+---+---+---
 3 | 1 | d | e | f
(1 row) 
```

编辑：这是没有 where 子句的选择，添加了来自 t2 的行（否则它就像 a `select * from t1`）。如您所见，第一行包含`NULL`s`t2_a`和`t2_b`：

```
psql=> select t1.a, t1.b, t1.c, t1.d, t1.e, t2.a as t2_a, t2.b as t2_b from t1 left outer join t2 on (t1.a = t2.a and t1.b = t2.b);
 a | b | c | d | e | t2_a | t2_b 
---+---+---+---+---+------+------
 3 | 1 | d | e | f |      |     
 1 | 2 | c | d | e |    1 |    2
 4 | 2 | f | g | h |    4 |    2
(3 rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:24:13.097

怎么样：

```
SELECT * FROM t1 WHERE (a,b) NOT IN (SELECT a,b FROM t2); 
```

# javascript - Javascript，隐藏复选框未选中的div时的功能，记住页面刷新

> ID：11115011
> 
> 赞同：0
> 
> 时间：2012-06-20T07:46:14.643
> 
> 标签：javascript, jquery, html, ruby-on-rails, checkbox

我仍然有问题，我不知道如何解决它。感谢给出的答案，我知道它的外观，但我不知道如何让它工作。

* * *

我的 javascript 复选框代码有问题。

我有一个隐藏 div 的功能（我的另一篇文章：[javascript，当右 div 被隐藏时，左 div 必须为 100% 宽度](https://stackoverflow.com/questions/11015286/javascript-when-right-div-is-hidden-left-div-has-to-be-100-width)）

但是当我刷新页面时，复选框将再次被选中，我阅读了一些关于 cookie 的内容，但我不知道如何实现这一点。

我的 JavaScript 代码：

```
$(function() {
    $("#foo").on("click",function() {
        if ($(this).is(':checked')) $('#checked-a').show('fast',function() {
            $('#checked-b').css("width","60%");
            $('#checked-a').css("width","38%");
        }) ;
        else $('#checked-a').show('fast',function(){
           $('#checked-b').css("width","100%").show();         
           $('#checked-a').css("width","0%").hide();

        });
    });
}); 
```

我的复选框的html代码：

```
<input type="checkbox" checked="checked" name="foo" id="foo" /> 
```

我的分区：

```
 <div class="content1" id="checked-b">
    <%= button_to "Zoek", search_index_path, :method => :get, :class => 'contentlinks' %>
    <%= button_to "Print", root_url, :class => 'contentlinks' %>
    <%= button_to "Edit", root_url, :class => 'contentlinks' %>
    <%= button_to "Add", root_url, :class => 'contentlinks' %>
<br>    

<div class="spacing">
    <%= yield %>
</div>

</div>

<div class="content2" id="checked-a"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:35:15.493

刷新页面后，您的 jQuery 片段不会执行，因为它取决于“单击”操作。

Web 浏览器会看到checked="checked"，它会检查您的复选框。

您应该使用变量来帮助网络浏览器记住您的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:56:11.093

我会在您的网址中使用哈希来实现这一点。

请看这段代码：

```
// set the state of your div as hash
window.location.hash = "#hide-div"; 

// now on document ready check the following
if(window.location.hash == '#hide-div') {
    // do something to hide your div and uncheck your checkbox
} 

if(window.location.hash == '#show-div') {
    // do something to show your div and ucheck your checkbox
} 
```

还有文档：[https ://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

编辑：

```
$(function() {
    $("#foo").on("click",function() {
        if ($(this).is(':checked')) $('#checked-a').show('fast',function() {
            $('#checked-b').css("width","60%");
            $('#checked-a').css("width","38%");
            window.location.hash = "#show-div"; 
        }) ;
        else $('#checked-a').show('fast',function(){
           $('#checked-b').css("width","100%").show();         
           $('#checked-a').css("width","0%").hide();
           window.location.hash = "#hide-div";     
        });
    });

    if(window.location.hash == '#show-div') {
        // do something to hide your div and uncheck your checkbox
        $("#foo").trigger('click');
    } 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:24:07.947

如果您不希望默认选中复选框，请使用

```
<input type="checkbox" name="foo" id="foo" /> 
```

代替

```
<input type="checkbox" checked="checked" name="foo" id="foo" /> 
```

如果您想在页面首次加载时检查复选框的状态，请添加这段 JavaScript。

```
$(document).ready(function(){
    if ($("#foo").is(':checked')){
        $('#checked-b').css("width","60%");
        $('#checked-a').css("width","38%");
    } else {
        $('#checked-b').css("width","100%");
        $('#checked-a').css("width","0%").hide();
    }
}); 
```

如果您希望用户的浏览器在每次用户访问您的网站时记住“foo”复选框的状态，您可能需要阅读 cookie。[这是 w3schools 的 JS Cookies 指南](http://www.w3schools.com/js/js_cookies.asp)

* * *

**编辑**

我不会声称这是有效的，因为我没有尝试过，我自己也没有使用过 cookie（但我确实重新发现谷歌基本上可以解决所有问题。当你给它半个时，这真的很容易努力）

```
$(document).ready(function(){
    if (get_cookie( "fooIsChecked" ) == 1){
        $('#foo').prop("checked", true);
        $('#checked-b').css("width","60%");
        $('#checked-a').css("width","38%");
    } else {
        $('#foo').prop("checked", false);
        $('#checked-b').css("width","100%");
        $('#checked-a').css("width","0%").hide();
    }
    $("#foo").on("click",function() {
        if ($(this).is(':checked')){
            set_cookie( "fooIsChecked", "1", 30 );
            $('#checked-a').show('fast',function() {
                $('#checked-b').css("width","60%");
                $('#checked-a').css("width","38%");
            }) ;
        } else {
            set_cookie( "fooIsChecked", "0", 30 );
            $('#checked-a').show('fast',function(){
                $('#checked-b').css("width","100%").show();         
                $('#checked-a').css("width","0%").hide();
            });
        }
    });
});

function set_cookie ( cookie_name, cookie_value, lifespan_in_days, valid_domain ){
    var domain_string = valid_domain ? ("; domain=" + valid_domain) : '' ;
    document.cookie = cookie_name +
        "=" + encodeURIComponent( cookie_value ) +
        "; max-age=" + 60 * 60 * 24 * lifespan_in_days +
        "; path=/" + domain_string;
}

function get_cookie ( cookie_name ){
    var cookie_string = document.cookie;
    if (cookie_string.length != 0) {
        var cookie_value = cookie_string.match (
            '(^|;)[\s]*' + cookie_name + '=([^;]*)' );
        return decodeURIComponent ( cookie_value[2] ) ;
    }
    return '' ;
} 
```

[从站点向导](http://www.thesitewizard.com/javascripts/cookies.shtml)修改的代码

# .net - HttpWebRequest 的内部服务器错误 (500)

> ID：11115012
> 
> 赞同：0
> 
> 时间：2012-06-20T07:46:22.290
> 
> 标签：.net, vb.net, http, httpwebrequest

我正在尝试通过连接到远程服务器（来自我们的客户），[`HttpWebRequest.GetResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)但在登录页面上我总是遇到异常：

> “远程服务器返回错误：（500）内部服务器错误。”

在响应流中，我看到我被重定向到错误页面。

到目前为止，代码（[HTTP 状态](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)200）与旧的 ASP 网站一起工作，但它们很快就会迁移到 ASP.NET。如果我手动浏览到 URL，则没有错误。

这是（简化的）代码：

```
Try
    Dim URL As String = "https://Domain.com/Modules/LoginPage.aspx"
    ' the old URL was similar: https://www.Domain.com/login.asp '  
    Dim req As System.Net.HttpWebRequest = CType(System.Net.WebRequest.Create(URL), System.Net.HttpWebRequest)
    req.Headers.Clear()
    req.AllowAutoRedirect = True
    req.Timeout = 1000 * 30
    req.PreAuthenticate = True
    req.UserAgent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"
    req.Accept = "*/*"
    req.CookieContainer = New System.Net.CookieContainer
    ' following will result in an HTTP 500 Error
    Dim response As System.Net.HttpWebResponse = CType(req.GetResponse(), System.Net.HttpWebResponse)
Catch ex As System.Net.WebException
    ' ex.Response.ResponseUri shows the redirected ErrorPage.aspx
End Try 
```

尽管这里有很多类似的问题，但我还没有找到对我有帮助的问题。

**问：**您有什么提示或想法可以帮助我找到原因吗？他们是否有可能以某种方式阻止我以编程方式连接？

我还使用[Fiddler2](http://www.fiddler2.com/fiddler2/)和[ieHTTPHeaders](http://www.blunck.info/iehttpheaders.html) 来分析新旧站点之间是否有任何区别，但我必须承认我不确定必须注意什么。标题似乎*相似*：

旧的“工作” ASP 站点：

```
GET /login.asp HTTP/1.1
Accept: */*
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Host: www.domain.blah.com
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: ASPSESSIONIDCSSTADCS=CJDLHKLANAELOKNOJOPCLCDG

HTTP/1.1 200 OK
Date: Wed, 20 Jun 2012 07:36:11 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Content-Length: 3744
Content-Type: text/html
Cache-control: private

GET /StyleSheets/IE/FormStyle.css HTTP/1.1
Accept: */*
Referer: https://www.domain.blah.com/login.asp
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Host: www.domain.blah.com
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: ASPSESSIONIDCSSTADCS=CJDLHKLANAELOKNOJOPCLCDG

HTTP/1.1 200 OK
Content-Length: 1116
Content-Type: text/css
Last-Modified: Thu, 11 Jul 2002 16:05:52 GMT
Accept-Ranges: bytes
ETag: "03060d4f428c21:31d"
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:11 GMT

GET /JScripts/common.js HTTP/1.1
Accept: */*
Referer: https://www.domain.blah.com/login.asp
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Host: www.domain.blah.com
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: ASPSESSIONIDCSSTADCS=CJDLHKLANAELOKNOJOPCLCDG

HTTP/1.1 200 OK
Content-Length: 16068
Content-Type: application/x-javascript
Last-Modified: Mon, 24 Jan 2011 10:37:53 GMT
Accept-Ranges: bytes
ETag: "8d4371c1b2bbcb1:31d"
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:11 GMT 
```

新的 ASP.NET 站点 (HTTP 500)

```
GET /Modules/Authorization/LoginPage.aspx HTTP/1.1
Accept: image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-shockwave-flash, application/xaml+xml, application/vnd.ms-xpsdocument, application/x-ms-xbap, application/x-ms-application, application/x-silverlight, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Host: mo.domain.blah.com
Connection: Keep-Alive

HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
Set-Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i; path=/; secure; HttpOnly
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT
Content-Length: 19363

GET /JQuery/css/smoothness/jquery-ui-1.8.18.custom.css HTTP/1.1
Accept: */*
Referer: https://mo.domain.blah.com/Modules/Authorization/LoginPage.aspx
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
If-Modified-Since: Wed, 29 Feb 2012 21:52:34 GMT
If-None-Match: "07d65712cf7cc1:0"
Host: mo.domain.blah.com
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i

HTTP/1.1 304 Not Modified
Last-Modified: Wed, 29 Feb 2012 21:52:34 GMT
Accept-Ranges: bytes
ETag: "07d65712cf7cc1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT

GET /App_Themes/domain/Site.css HTTP/1.1
Accept: */*
Referer: https://mo.domain.blah.com/Modules/Authorization/LoginPage.aspx
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
If-Modified-Since: Wed, 30 May 2012 12:03:02 GMT
If-None-Match: "0dfa1295c3ecd1:0"
Host: mo.domain.blah.com
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i

HTTP/1.1 304 Not Modified
Last-Modified: Wed, 30 May 2012 12:03:02 GMT
Accept-Ranges: bytes
ETag: "0dfa1295c3ecd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT

GET /CommonControls/Common.js HTTP/1.1
Accept: */*
Referer: https://mo.domain.blah.com/Modules/Authorization/LoginPage.aspx
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
If-Modified-Since: Wed, 18 Apr 2012 12:19:12 GMT
If-None-Match: "0a072765d1dcd1:0"
Host: mo.domain.blah.com
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i

HTTP/1.1 304 Not Modified
Last-Modified: Wed, 18 Apr 2012 12:19:12 GMT
Accept-Ranges: bytes
ETag: "0a072765d1dcd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT

GET /App_Themes/domain/images/Gray-white-gradient-vertical.gif HTTP/1.1
Accept: */*
Referer: https://mo.domain.blah.com/Modules/Authorization/LoginPage.aspx
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
If-Modified-Since: Fri, 27 Jan 2012 13:47:28 GMT
If-None-Match: "0983c35fadccc1:0"
Host: mo.domain.blah.com
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i

HTTP/1.1 200 OK
Cache-Control: public
Content-Type: text/javascript
Content-Encoding: gzip
Expires: Thu, 20 Jun 2013 07:36:55 GMT
Last-Modified: Wed, 20 Jun 2012 07:36:55 GMT
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT
Content-Length: 1929

HTTP/1.1 304 Not Modified
Last-Modified: Fri, 27 Jan 2012 13:47:28 GMT
Accept-Ranges: bytes
ETag: "0983c35fadccc1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:55 GMT

GET /App_Themes/domain/images/customername-Logo_148x38.png HTTP/1.1
Accept: */*
Referer: https://mo.domain.blah.com/Modules/Authorization/LoginPage.aspx
Accept-Language: de
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; DWE40; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; OfficeLiveConnector.1.4; OfficeLivePatch.1.3; InfoPath.3; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
If-Modified-Since: Sun, 26 Feb 2012 10:13:52 GMT
If-None-Match: "0b0b2566ff4cc1:0"
Host: mo.domain.blah.com
Connection: Keep-Alive
Cookie: ASP.NET_SessionId=if3igvajwackerbutp2ad21i

HTTP/1.1 304 Not Modified
Last-Modified: Sun, 26 Feb 2012 10:13:52 GMT
Accept-Ranges: bytes
ETag: "0b0b2566ff4cc1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:56 GMT

HTTP/1.1 304 Not Modified
Last-Modified: Fri, 24 Feb 2012 11:19:44 GMT
Accept-Ranges: bytes
ETag: "0887235e6f2cc1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 07:36:56 GMT 
```

**编辑**：根据要求，这里是`HttpWebRequest` Fiddler 监控的标头。奇怪的是 -**没有**HTTP 500 错误，为什么我还是会得到异常？

```
CONNECT mo.domain.blah.com:443 HTTP/1.1
Host: mo.domain.blah.com

HTTP/1.1 200 Connection Established
FiddlerGateway: Direct
StartTime: 10:20:32.948
Connection: close

This is a CONNECT tunnel, through which encrypted HTTPS traffic flows.
To view the encrypted sessions inside this tunnel, enable the Tools > Fiddler Options > HTTPS > Decrypt HTTPS traffic option.

A SSLv3-compatible ServerHello handshake was found. Fiddler extracted the parameters below.

No Proxy-Authorization Header is present.
No Authorization Header is present.

This request did not send any cookie data. 
```

如果我禁用重定向，我会得到带有*“对象已移动”的*[HTTP 302](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)：

 *```
req.AllowAutoRedirect = False 
```

结果：

```
HTTP/1.1 302 Found
Cache-Control: private
Content-Type: text/html; charset=utf-8
Location: https://mo.domain.blah.com/ErrorPage.aspx?aspxerrorpath=/Modules/Authorization/LoginPage.aspx
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 10:56:25 GMT
Content-Length: 216

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="https://mo.domain.blah.com/ErrorPage.aspx?aspxerrorpath=/Modules/Authorization/LoginPage.aspx">here</a>.</h2>
</body></html> 
```

在 fiddler 中启用解密 HTTPS 流量选项后，我可以“看到”默认的 ASP.NET 错误页面：

```
HTTP/1.1 500 Internal Server Error
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 20 Jun 2012 10:49:29 GMT
Content-Length: 3030

<html>
    <head>
        <title>Runtime Error</title>
        <style>
         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
         p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
         pre {font-family:"Lucida Console";font-size: .9em}
         .marker {font-weight: bold; color: black;text-decoration: none;}
         .version {color: gray;}
         .error {margin-bottom: 10px;}
         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }
        </style>
    </head>

    <body bgcolor="white">

            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>Runtime Error</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.
            <br><br>

            <b>Details:</b> To enable the details of this specific error message to be viewable on remote machines, please create a &lt;customErrors&gt; tag within a &quot;web.config&quot; configuration file located in the root directory of the current web application. This &lt;customErrors&gt; tag should then have its &quot;mode&quot; attribute set to &quot;Off&quot;.<br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code><pre>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;
    &lt;system.web&gt;
        &lt;customErrors mode=&quot;Off&quot;/&gt;
    &lt;/system.web&gt;
&lt;/configuration&gt;</pre></code>

                  </td>
               </tr>
            </table>

            <br>

            <b>Notes:</b> The current error page you are seeing can be replaced by a custom error page by modifying the &quot;defaultRedirect&quot; attribute of the application&#39;s &lt;customErrors&gt; configuration tag to point to a custom error page URL.<br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code><pre>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;
    &lt;system.web&gt;
        &lt;customErrors mode=&quot;RemoteOnly&quot; defaultRedirect=&quot;mycustompage.htm&quot;/&gt;
    &lt;/system.web&gt;
&lt;/configuration&gt;</pre></code>

                  </td>
               </tr>
            </table>

            <br>

    </body>
</html> 
```

非常感谢任何形式的帮助，因为我的想法已经不多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:19:48.253

您的 ASP 脚本中出现运行时错误。修好它就会好的。

设置此项以启用详细的错误消息（根据您的错误页面）

```
<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```*

# php - 使用 PDO 更新数据为什么它不起作用

> ID：11115013
> 
> 赞同：-1
> 
> 时间：2012-06-20T07:46:42.237
> 
> 标签：php, mysql, sql, pdo

```
<?php
$sTable = "mytable";    

$colUpdate = $_GET['field'];// database field name
$valUpdate = $_GET['val']; // the long string ,can be non-English   
$rowID = $_GET['id']; //number

    $pdo = PDO2::getInstance();
    $pdo->exec('SET NAMES utf8'); // for utf-8

    $sql = "UPDATE $sTable
            SET $colUpdate =:valUpdate
            WHERE id =:rowID ";      
    $req = $pdo->prepare($sql);
    $req->bindValue(":valUpdate",  $valUpdate);
    $req->bindValue(":rowID",  $rowID);

    $req->execute();
    $req->closeCursor();        
   ?> 
```

我在这里做错了什么？因为如果我这样做的话它会起作用：

```
 <?php
    $sTable = "mytable";
    $pdo = PDO2::getInstance();
    $colUpdate = $_GET['field'];
    $valUpdate = $_GET['val'];      
    $rowID = $_GET['id'];

    $sQuery = " UPDATE $sTable SET  $colUpdate = '$valUpdate' WHERE  id = $rowID";
    $req = $pdo->prepare($sQuery);
    $req->execute();
    $req->closeCursor();    
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:16:16.777

您的代码中有几个问题：

1.  您正在使用单例
2.  你没有检查错误
3.  您直接传递 GET 变量。

让我们解决每个问题，好吗？

## 1.您使用的是单例

**[单例是邪恶的](https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what)**，它们被设置在全局空间中，这使您的应用程序不稳定、不可靠和不可测试。此外，如果您需要**另一个数据库连接**，您会怎么做？

### 解决方案

使用新的 PDO 实例。

## 2\. 你没有检查错误

您的代码中没有任何错误检查，因此如果确实出现错误，它会被静默忽略。

### 解决方案

在 PDO 的构造函数中设置`PDO::ATTR_ERRMODE`为或使用. 它还有助于设置为.`PDO::ERRMODE_EXCEPTION``setAttribute``PDO::EMULATE_PREPARES``false`

## 3\. 您将 GET 变量直接传递到您的查询中

您`$colUpdate`直接在查询中传递，即使您正在准备语句，直接传递到查询字符串的变量也不会转义。

### 解决方案

将其传递到占位符中，并绑定该值。此外，如果您需要用户输入来确定要更新的**列**，那么您的结构很可能存在缺陷。

在所有这些之后，我来到以下代码：

```
<?php
/*
 * Variable Initialization
 */
/** @var $table_name string Name of the table to insert */
$table_name = "mytable";

/**
 * @var $field_to_update string Name of field to update
 * @deprecated Should not be used! Database restructuring needed!
 */
$field_to_update = mysql_real_escape_string($_GET['field']); //At least escape it!

/** @var $value_to_insert string */
$value_to_insert = $_GET['val'];

/** @var $row_id integer */
$row_id = $_GET['id'];

$pdo = new PDO("mysql:host=localhost;dbname=database_name", "user", "password");
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$pdo->exec('SET NAMES utf8'); // for utf-8

$sql = <<<MySQL
UPDATE $table_name
    SET $field_to_update = :valUpdate
    WHERE id = :rowID
MySQL;

$req = $pdo->prepare($sql);
$req->bindValue(":valUpdate", $value_to_insert, PDO::PARAM_STR);
$req->bindValue(":rowID", $row_id, PDO::PARAM_INT);

$req->execute(); 
```

# json - 未使用 WCF Rest 获取 JSON 格式的根名称

> ID：11115024
> 
> 赞同：0
> 
> 时间：2012-06-20T07:47:49.930
> 
> 标签：json, wcf, rest

我没有得到任何 Json 格式的根值。我收到如下回复：

```
[{"Username":"demo","UserID":8,"Password":"demo","EmaiID":"demo@gmail.com"}] 
```

我想要格式如下

```
{UserList: [[{"Username":"demo","UserID":8,"Password":"demo","EmaiID":"demo@gmail.com"}]} 
```

服务声明：

```
public interface IDemo
{  
    [OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Json,ResponseFormat =
    WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "/Validate", Method = "POST")]
    Stream ValidateUser(Login obj);

}

[DataContract]
public class Login
{

    public Login()
    {
    }

    [DataMember]
    public string Username { get; set; }
    [DataMember]
    public string Password { get; set; }
} 
```

服务定义：

```
public class Demo: IDemo
{
    string Json = string.Empty;

    JavaScriptSerializer obj1 = new JavaScriptSerializer();

    public Stream ValidateUser(Login obj)
    {

        UserList objUserList = new UserList();
        Users objUser = new Users();
        objUser.Username = obj.Username;
        objUser.Password = obj.Password;

        objUserList = LoginDataService.ValidateUser(objUser.Username,objUser.Password) ;

        if (objUserList.Count > 0)
        {
            Json = obj1.Serialize(objUserList);
            WebOperationContext.Current.OutgoingResponse.ContentType =  
            "application/json; charset=utf-8"; 
        }
        else
        {
            UserError objError = new UserError();

            objError.ErrMsg = "LoginFailed";objError.Username = objUser.Username ;

            Json = obj1.Serialize(objError);

            WebOperationContext.Current.OutgoingResponse.ContentType = 
            "application/json; charset=utf-8";
        }

        return new MemoryStream(Encoding.UTF8.GetBytes(Json));  
    }
} 
```

谁能帮我用根元素得到结果，让我知道我犯了什么样的错误。

谢谢和问候，维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:28:50.857

由于您将集合序列化为 JSON，因此您将获得类似的格式。您可以返回一个将列表包装为属性的类，然后您将获得所需的内容。

例如。你可以像这样创建一个类

```
public class UserListResponse
{
   public UserList UserList{get; set;}
} 
```

现在你得到了你所期望的 JSON，比如

```
{UserList:[..]} 
```

我不明白你为什么要返回一个 Stream 并自己做所有的序列化框架，基本上这一切都是由框架完成的。您所要做的就是`UserListResponse`从服务方法返回包装类。

```
public class Demo: IDemo
{
   public UserListResponse ValidateUser(Login obj)
   {
      ...
      return new UserListResponse{ UserList = objUserList};
   }
} 
```

WCF 将负责将结构返回到 JSON 或 XML 中，您无需担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:44:55.800

虽然上述解决方案非常有效，但您也可以尝试在您的方法上使用参数 BodyStyle=WebMessageBodyStyle.WrappedResponse 的 WebInvoke 属性。

这将值包装在类型名称中。

# email - Amazon SES：发送电子邮件标头

> ID：11115025
> 
> 赞同：9
> 
> 时间：2012-06-20T07:48:13.237
> 
> 标签：email, amazon, amazon-ses

我正在使用来自[http://sourceforge.net/projects/php-aws-ses/的 Wrapper](http://sourceforge.net/projects/php-aws-ses/)

我无法发送电子邮件标头

```
From: Name <email@example.com> 
```

有什么方法可以使用 amazon ses 发送标头。您推荐的任何其他 PHP Wrapper 允许我们这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T12:04:42.530

将 FROM 变量更改为类似这样

```
$m->setFrom(" Name <info@gitgrow.com>"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-07T12:27:13.147

对于新的 API SDK (v2)，您可以使用：

```
$client->sendMail( array(
                   'source' => 'Name <a@b.c>', 
                    ....
                     )
         ); 
```

基本上，如果您想包含名称，源必须有名称后跟电子邮件 ID，重要的是，电子邮件 ID 必须包含在`<`和`>`

# java - 这个arraylist可以等于null吗？

> ID：11115032
> 
> 赞同：0
> 
> 时间：2012-06-20T07:48:47.777
> 
> 标签：java, arraylist, null

我只是想知道是否需要在下面的 A 点检查 null。那时它会为空吗？或者它只会是空的/非空的？

提前谢谢您的帮助！

```
List myList = new ArrayList();
PreparedStatement ps = null;
ResultSet rs = null;
String sql ="SELECT * FROM XXXXX"; 

ps = getDBConnection.prepareStatement(sql);
rs = ps.executeQuery();

while (rs.next()) {
 //Add the row to myList using myList.add...
}

if (myList != null){ //POINT A
//Implement some logic
}

.. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:51:11.630

你`ArrayList`的只是一个参考。当然，它原则上可以指向`null`。但是，在您的示例中，您直接将其分配给 a`new ArrayList()`并且两者之间没有任何变化`myList`，因此，不，它永远不能为空

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:51:02.557

由于您在第一行 ( `List myList = new ArrayList();`) 创建它，因此它不能为 null，除非您明确地将 null 分配给它。

如果你希望它为空，你将不得不这样做：`myList = null`

此外，当您创建一个对象时，如果构造函数抛出异常，该对象仍然可以为 null：

```
MyObject obj = null;
try {
      obj = new MyObject(); // If an exception is thrown, the assignment is not done
}
catch (Exception e) {
  // Do something
}

// Here obj is null if an exception has been thrown 
```

但现在你的代码就是这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:02:18.343

如果您想确保它永远不会为空，请像这样声明它：

```
 final List myList = new ArrayList(); 
```

无论哪种方式，只有`null`当此方法中的某些代码（在声明之后）显式分配 a`null`给它时才可能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T07:54:32.470

您已经初始化`myList`，`myList = new ArrayList()`因此它不会再为空，除非您执行类似的操作`myList = null;`

`myList.add`此外，如果您在上面的循环中调用它，它不能为空，否则您将得到一个`NullPointerException`. 因此，如果您在任何地方检查 null，它应该在 while 循环之上。

# jquery-validate - 密码确认不起作用 - jquery 验证插件

> ID：11115034
> 
> 赞同：0
> 
> 时间：2012-06-20T07:48:49.477
> 
> 标签：jquery-validate

我不明白为什么相同的代码不起作用。我正在使用设计 gem，所以所有输入名称都是相同的。

我的密码确认在其他项目中不起作用。

这是js代码：

```
 $('.sign_up').validate({

    rules: {                    
        'user[password]': {
            required: true,
            minlength: 6
        },
        'user[password_confirmation]': {
            required: true,
            minlength: 6,
            equalTo: "#user_password"
        }
    } 
```

我的html代码：

```
 <label for="user_password">Password</label>
       <input id="user_password" type="password" size="30" name="user[password]">

        <label for="user_password_confirmation">Re-Type Password</label>
   <input id="user_password_confirmation" type="password" size="30" name="user[password_confirmation]"> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:45:46.377

尽量不要使用''

```
$('.sign_up').validate({

rules: {                    
    user[password]: {
        required: true,
        minlength: 6
    },
    user[password_confirmation]: {
        required: true,
        minlength: 6,
        equalTo: "#user_password"
    }
} 
```

并对输入的 id 和 name 使用相同的词。

# java - 转换为unixtime：相同的输入，不同的输出

> ID：11115040
> 
> 赞同：1
> 
> 时间：2012-06-20T07:48:55.647
> 
> 标签：java, apache-commons, unix-timestamp, datetime-conversion

也许这是一个反复出现的问题，但我需要解释我的问题。

我必须将日期+小时转换为 Unix 时间格式。我使用 Apache Commons Lang 库，DateUtils 类：

```
Date date = DateUtils.parseDate(strStartDateTime, new String[] { "ddMMyyyyHHmmss" });
Long dateLong = new Long(date.getTime()); 
```

也许 Java Date 类对此很旧，但它似乎工作正常。

但最近，我检测到相同的输入，以正确的预期格式，在不同的执行中返回不同的输出。

我一直在寻找类似的问题，并且我读过 Java Date 是旧的，推荐使用 joda-time 库等。

使用 joda-time 转换很容易，但是，为什么会发生这种情况？上面的代码可靠吗？我很可能没有考虑到某些事情。

任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T05:34:20.763

对不起，但最后我发现了错误。存在错误的属性定义。这是我的编程错误；与时间转换无关。谢谢

# c# - 为 Web 浏览器控件创建 OnScroll 事件处理程序

> ID：11115043
> 
> 赞同：4
> 
> 时间：2012-06-20T07:49:03.807
> 
> 标签：c#, events, event-handling, scroll

有没有人成功地将鼠标滚动事件捕获到网络浏览器组件中？

我有两个想要同时滚动的网络浏览器控件。

但是网络浏览器没有滚动事件。

**我想在下面创建一个类似这样的事件？有没有人做过或见过这个？**

```
 private void webCompareSQL_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
                Document.Window.AttachEventHandler("OnScroll");            
        } 
```

在这里，我将调用我的事件并继续执行代码。

```
private void windowEvents_OnScroll()
{
int nPos = GetScrollPos(webCompareSQL.Handle, (int)ScrollBarType.SbVert); 
nPos <<= 16;
uint wParam = (uint)ScrollBarCommands.SB_THUMBPOSITION | (uint)nPos;
SendMessage(WebPrevSQL.Handle, (int)Message.WM_VSCROLL, new IntPtr(wParam), new IntPtr(0));        
} 
```

我找到了这段代码，但不知道如何使用它。它是一个事件。

```
webCompareSQL.Document.Window.Scroll 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:47:29.920

我能够让这个工作如下。此示例假定两个 Web 浏览器控件都导航到同一个 Url。除了垂直之外，我还同步水平滚动条 - 如果不需要，可以省略它。

```
webBrowser1.DocumentCompleted
    += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
webBrowser2.DocumentCompleted
    += new WebBrowserDocumentCompletedEventHandler(webBrowser2_DocumentCompleted);

NavigateToPage("www.google.com");

....

private void NavigateToPage(string url)
{
    webBrowser1.Navigate(url);
    webBrowser2.Navigate(url);
}

private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    webBrowser1.Document.Window.AttachEventHandler("onscroll", OnScrollEventHandler1);
}

private void webBrowser2_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    webBrowser2.Document.Window.AttachEventHandler("onscroll", OnScrollEventHandler2);
}

public void OnScrollEventHandler1(object sender, EventArgs e)
{           
    webBrowser2.Document.GetElementsByTagName("HTML")[0].ScrollTop
        = webBrowser1.Document.GetElementsByTagName("HTML")[0].ScrollTop;
    webBrowser2.Document.GetElementsByTagName("HTML")[0].ScrollLeft
        = webBrowser1.Document.GetElementsByTagName("HTML")[0].ScrollLeft;
}

public void OnScrollEventHandler2(object sender, EventArgs e)
{
    webBrowser1.Document.GetElementsByTagName("HTML")[0].ScrollTop
        = webBrowser2.Document.GetElementsByTagName("HTML")[0].ScrollTop;
    webBrowser1.Document.GetElementsByTagName("HTML")[0].ScrollLeft
        = webBrowser2.Document.GetElementsByTagName("HTML")[0].ScrollLeft;
} 
```

我注意到您在[How to retrieve the scrollbar position of the webbrowser control in .NET](https://stackoverflow.com/questions/1277691/how-to-retrieve-the-scrollbar-position-of-the-webbrowser-control-in-net)中与此操作相关的评论

```
webBrowser1.Document.GetElementsByTagName("HTML")[0].ScrollTop 
```

不工作。我可以确认这绝对适用于我的机器，所以如果这段代码在你的机器上不起作用，我可以寻找替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:41:07.600

真正的事件名称是“onscroll”而不是“OnScroll”。MSDN：http://msdn.microsoft.com/en-us/library/ie/ms536966(v=vs.85).aspx

以下代码在事件发生时触发该方法。

```
 private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            webBrowser1.Document.Window.AttachEventHandler("onscroll", OnScrollEventHandler);
        }

        public void OnScrollEventHandler(object sender, EventArgs e)
        {

        } 
```

# mysql - 选择所有年龄最大的人？

> ID：11115044
> 
> 赞同：3
> 
> 时间：2012-06-20T07:49:03.737
> 
> 标签：mysql, sql, max

我想从具有最大特定值的行中获取值（在本例中，最旧的成员）

```
Select * from members where age=max(age) 
```

这行得通吗？

如果有超过 1 个年龄最大的成员同龄，会发生什么？

（我不必担心，因为我使用 auto_increment，但我只是好奇）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:53:46.417

```
select * 
from members 
where age = (select max(age) as max_age from members); 
```

如果有超过 1 个成员具有相同的最大年龄，您将获得多个结果。要从中选择一个：

```
select * 
from members 
where age = (select max(age) as max_age from members);
limit 1 
```

`order by`如果您喜欢任何特定数据而不是随机数据，则可以选择添加一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:51:05.293

不。

你要

```
 Select * from Members 
 where Age = (Select Max(Age) from Members) 
```

如果按照您提到的自动增量的建议，您正在查找表中最后插入的 ID，您想要

```
 Select LAST_INSERT_ID() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:51:22.653

这不起作用，因为这是`Invalid use of group function`更好的使用`SELECT * FROM members ORDER BY age DESC LIMIT 1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-19T11:43:47.357

如果您使用**GROUP BY**和**@variable**来查找和存储什么是最小/最大值并过滤匹配最后的**HAVING** ，则可以使用单个**SELECT**语句来完成。

 ******假设您有一个至少包含两列的表**成员：** **id**和**age**，那么您可以使用如下语句：

```
SELECT id, age, @max:= IF(@max > age, @max, age) FROM members GROUP BY id HAVING(age = @max); 
```

或者

```
SELECT id, age, @min:= IF(@min < age, @min, age) FROM members GROUP BY id HAVING(age = @min); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T07:55:13.377

这将只返回一行 - 即使多个成员具有相同的最大年龄：

```
SELECT *
FROM members
ORDER BY age DESC
LIMIT 1 ; 
```

这（和@podiluska 的回答）将返回所有这些：

```
SELECT m.*
FROM members AS m
  JOIN
    ( SELECT MAX(age) AS max_age
      FROM members
    ) AS allm
    ON allm.max_age = m.age ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T03:19:58.490

还有一种更人为的方式来做同样的事情：

```
SELECT * FROM members m
WHERE NOT EXISTS (
    SELECT 1 FROM members m2
    WHERE m1.age < m2.age ) 
```

此查询可移植到大多数数据库，适用于自动增加的 PK，也适用于具有相同年龄的多人。另外，至少在 SQL Server 中，大多数情况下会比使用子查询的版本更快（尤其是如果 [members] 在 [age] 列上有索引）。******

# visual-studio-2010 - Azure 1.7、Visual Studio 和 UAC 提示

> ID：11115045
> 
> 赞同：0
> 
> 时间：2012-06-20T07:49:06.700
> 
> 标签：visual-studio-2010, azure, uac

在 Win7 x64 上运行 Visual Studio Ultimate 2010。我刚刚安装了最新的 Azure SDK 并升级了一个 Web 角色。当我从 Visual Studio 进入调试器时，我需要在站点出现之前单击两个 UAC 提示。我相信这些适用于计算和存储模拟器。我该如何防止这种情况发生？我已经以管理员身份运行 Visual Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:29:32.950

在我的开发机器上，我倾向于完全禁用 UAC：

*   控制面板
*   用户帐户
*   用户帐户（再次）
*   更改用户帐户控制设置
*   将滑块拖到底部：**从不通知**

# c# - Parallel.ForEach 同时保持顺序

> ID：11115049
> 
> 赞同：9
> 
> 时间：2012-06-20T07:49:11.957
> 
> 标签：c#, collections, asynchronous, concurrency, parallel-processing

我有一个`List<byte[]>`并且我喜欢将每个反序列`byte[]`化为 Foo。List 是有序的，我喜欢编写一个并行循环，其中结果`List<Foo>`包含与原始 Foo 相同的顺序的所有 Foo `byte[]`。该列表非常大，以使并行操作值得。有没有内置的方法来实现这一点？

如果没有，有什么想法可以通过同步运行来实现加速？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T10:07:50.920

根据您提供的信息，我知道您想要一个 Foo 的输出数组，其大小等于输入的字节数组？它是否正确？

如果是这样，是的，操作很简单。不要为锁定或同步结构而烦恼，这些会侵蚀并行化为您提供的所有速度。

相反，如果你遵守这个简单的规则，任何算法都可以在没有锁定或同步的情况下并行化：

> 对于每个处理的输入元素 X[i]，您可以从任何输入元素 X[j] 中读取，但只能写入输出元素 Y[i]

![在此处输入图像描述](../Images/3083d59b7aab3c0b7af83b4e91ef8b4f.png)

查找 Scatter/Gather，这种类型的操作称为聚集，因为只有一个输出元素被写入。

如果您可以使用上述原则，那么您希望预先创建输出数组 Foo[]，并在输入数组上使用 Parallel.For 而不是 ForEach。

例如

```
 List<byte[]> inputArray = new List<byte[]>();
        int[] outputArray = new int[inputArray.Count];

        var waitHandle = new ManualResetEvent(false);
        int counter = 0;

        Parallel.For(0, inputArray.Count, index =>
            {
                // Pass index to for loop, do long running operation 
                // on input items
                // writing to only a single output item
                outputArray[index] = DoOperation(inputArray[index]);

                if(Interlocked.Increment(ref counter) == inputArray.Count -1)
                {
                    waitHandle.Set();
                }
            });

        waitHandler.WaitOne();

        // Optional conversion back to list if you wanted this
        var outputList = outputArray.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:54:25.863

您可以使用带有索引 int 键的线程安全字典来存储来自 foo 的结果，因此最后您将拥有字典中的所有数据排序器

# php - 在jquery中调用php函数

> ID：11115055
> 
> 赞同：0
> 
> 时间：2012-06-20T07:49:43.717
> 
> 标签：php, jquery

我有一个文件 json.js 和一个 php 函数在 php 文件 .in json.js 我想检查 php 函数返回的值，如果函数返回的值为 0 jquery 应该执行：$(':input').prop('禁用'，真）；否则什么都没有——</p>

```
function loadJson (table, id) {

    $.get("json-object.php", {'table': table, 'id':id}, function (data) {

        console.log(data);

        $.each(data, function (k, v) {
            if ($('input[name="'+k+'"]').is('input[type="text"]')) {
                $('input[name="'+k+'"]').val(v);
            } 
            if($('select[name="'+k+'"]').val(v)){
                get_input_value(k,v);   

            } 

            if ($('input[name="'+k+'"]').is('input[type="checkbox"]')) {
                get_input_value(k,v);
            } 
         console.log(k+' ==> '+v);

        // Here I want to check condition of php function if value returned by fucntion is 0 it should perform :$(':input').prop('disabled', true); otherwise nothing //
        });
    }, 'json');
} 
```

我的php函数：

```
function ronly($id) {

    //$id=$_POST['noces'];
    $sql = "SELECT COUNT(noces) FROM alterdetail WHERE noces = '$id'";
    $sql.=';';
    //echo "QUERY <br/>";
    //echo $sql;
    $res = mysql_query($sql);
    $row = mysql_fetch_array($res);

           if($row['COUNT(noces)'] > 0)
                { echo "you can not alter data";
                return 0;
                }
                else
                {
                    echo "   data new  ";
                return 1;
                }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:55:56.413

你不能，因为 Javascript 是客户端执行的，而 PHP 是服务器端执行的......

“解决方案”是将 Javascript 变量分配到您将读入 Javascript 文件的 PHP 文件中，因为变量是全局的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:59:16.723

Use jQuery if possible.

```
$('#result').load('ajax/test.php', function() {
    alert('Function called');
}); 
```

Or try JQuery forms. Use a form to submit any data, and it'll give you the response as a text or JSon object.

[http://jquery.malsup.com/form/#ajaxSubmit](http://jquery.malsup.com/form/#ajaxSubmit)

Here is an example for you:

```
$('#anyForm').ajaxForm({
    url: "process.php?proc=7",
    dataType:  'html', 

    success: function(responseText) {
        if(responseText == "0") { 
            $(':input').prop('disabled', true); 
        }
    } 
}); 
```

# java - 将 Android Web 应用程序部署为 .JAR 的框架

> ID：11115056
> 
> 赞同：1
> 
> 时间：2012-06-20T07:49:48.277
> 
> 标签：java, web-applications, cordova, frameworks, web

我知道PhoneGap 框架可以将Web 应用程序分发为.apk，但我需要将应用程序分发为.JAR。

有什么解决办法吗？我知道 Java 有 ScriptEngine 和 Webview，但我想要一个类似于 PhoneGap 的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:21:22.640

如果我正确理解您的问题，请查看[Vaadin](https://vaadin.com/home)和[Vaadin touch](https://vaadin.com/add-ons/touchkit)

# excel - SSRS 导出到 Excel - 列太多

> ID：11115058
> 
> 赞同：1
> 
> 时间：2012-06-20T07:50:16.447
> 
> 标签：excel, reporting-services, export

我有一个在 SSRS2000 上运行的 RDL 报告。

今天，我正在尝试将报告导出到 excel，但错误消息是：

```
Excel found unreadable content in 'filename.xls'. Do you want to recover the contents of this workbook? If you trust the source of this workbook, click Yes. 
```

我注意到有很多列，所以我修改了报告以减少列，它在 Excel 中打开没问题。

用户有什么方法可以在excel中导出数据并且没有问题？

（所有列都是必需的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:05:51.690

Excel 的旧版本（截至 2003 年）[最多支持 256 列和 65536 行](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)。这与 Reporting Services 无关，您无法更改。我能想到的唯一选择：

*   确保报告不会超过 256 列的限制（包括渲染器生成的列，例如用于 tablix 之间的空白）
*   导出为 XML 或 CSV 并在 Excel 2007 中打开/导入，可以处理[16,384 列](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx)。

# asp-classic - asp标签 - 文本更改

> ID：11115064
> 
> 赞同：1
> 
> 时间：2012-06-20T07:50:26.073
> 
> 标签：asp-classic

```
<label id="ButtonTestResultLabel" style="color:Black; font-size:large"  title="Success" visible=true>Please Press Left Button</label> 
    <% if scanner.ExecuteButtonTest(sessionid, CInt(1)) then
        upbuttonresult = true
    end if %>
    <% ButtonTestResultLabel.Text = "Please Press Down Button"
    if scanner.ExecuteButtonTest(sessionid, CInt(2)) then
        downbuttonresult = true
    end if %> 
```

我想更改标签文本，但出现错误：

> 脚本中的解析错误
> Microsoft VBScript 运行时错误：'800a01a8'
> 描述：所需对象：'ButtonTestResultLabel'
> 
> 在文件中：/prod/buttonstest.asp
> 在线：57

如何更改标签文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:36:14.897

我认为您将 ASP 静态内容与 ASP.NET runat="Server" 控件混淆了。`ButtonTestResultLabel`在您的 ASP 脚本中没有 ID 为 的此类对象。尽管请注意您的代码片段没有多大意义，但您的目标已经实现，因此我已经编造了一些逻辑来演示。

```
<%

    Function ButtonState()
        For i = 1 to 4
            If scanner.ExecuteButtonTest(sessionid, CInt(i)) then
                ButtonState = i
                Exit For 
            End If
        Next
    End Function

    Function ButtonTestResultLabelText()

         Select Case ButtonState
           Case 1
               ButtonTestResultLabelText = "Please Press Down Button" 
           Case 2
               ButtonTestResultLabelText = "Please Press Up Button"
           Case 3
               ButtonTestResultLabelText = "Please Press Right Button" 
           Case Else
               ButtonTestResultLabelText = "Please Press Left Button"
        End Select
    End Function

 %>

<label id="ButtonTestResultLabel" style="color:Black; font-size:large"  title="Success" visible=true><%=ButtonTestResultLabelText%></label> 
```

这里的关键是将`<%=...%>`语法嵌入到您希望动态内容出现的 html 中。

# heroku - Bundler.with_clean_env 找不到 JavaScript 运行时

> ID：11115067
> 
> 赞同：1
> 
> 时间：2012-06-20T07:50:30.967
> 
> 标签：heroku, bundler

我尝试创建一个简单的**heroku**应用程序，它克隆一个 git 存储库，调用`bundle install`一个`rake dist`任务，然后将创建的文件上传到 GitHub 存储库。克隆存储库的构建任务使用*Rake Pipeline*，它使用`execjs`gem 来构建二进制文件。

我在[https://github.com/pangratz/github-uploader-test](https://github.com/pangratz/github-uploader-test)创建了一个示例应用程序，它说明了这个问题。应用程序的目录结构如下：

```
/upload.rb
/project
   Rakefile
   Assetfile
   Gemfile
   Gemfile.lock 
```

该应用程序本身是一个带有路由的简单*sinatra*`get '/'`应用程序，如下所示：

*上传.rb*

```
get '/' do
  Dir.chdir "project" do
    Bundler.with_clean_env do
      system "bundle install"
      system "bundle exec rake dist"
    end
  end
end 
```

出于演示目的，该`project`文件夹模拟了克隆的 git 存储库。它包含一个`Rakefile`、`Assetfile`和。`Gemfile``Gemfile.lock`

*项目/耙文件*

```
desc "Build"
task :dist do
  Rake::Pipeline::Project.new("Assetfile").invoke
end 
```

*项目/资产文件*

```
require "rake-pipeline-web-filters"
require "json"
require "uglifier"
require "execjs"

puts ExecJS.eval "'red yellow blue'.split(' ')" 
```

*项目/Gemfile*

```
source "http://rubygems.org"

gem "rake-pipeline", :git => "https://github.com/livingsocial/rake-pipeline.git"
gem "rake-pipeline-web-filters", :git => "https://github.com/wycats/rake-pipeline-web-filters.git"
gem "colored"
gem "uglifier", :git => "https://github.com/lautis/uglifier.git"

group :development do
  gem "rack"
  gem "rest-client"
  gem "github_api"
  gem "ember-docs", :git => "https://github.com/emberjs/docs-generator.git"
  gem "kicker"
end 
```

的调用`bundle install`似乎有效。问题是`rake dist`由于错误而失败`Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.`。

heroku 应用程序本身是使用选项创建的`--stack cedar`。

我还创建了一个使用的路由'/test'`Execjs`并且这不会失败。因此，似乎`Bundler.with_clean_env`没有找到已安装的 JavaScript Runtime 存在问题...

*上传.rb*

```
get '/test' do
  puts ExecJS.eval "'red yellow blue'.split(' ')"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:50:03.360

您也可以尝试设置`ENV['BUNDLE_GEMFILE']=/path/to/project/Gemfile`. 那应该确保 install 和 exec 找到正确的 Gemfile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:04:56.243

我在 Heroku 上打开了一个问题，我可以解决这个问题。问题是与`Dir.chdir("project")`结合`Bundler.with_clean_env`导致无效`PATH`，这是定位 JavaScript 运行时所需的。长话短说，这是可行的解决方案：

```
get '/' do
  Dir.chdir "project" do
    Bundler.with_clean_env do
      ENV["PATH"] = "/app/bin:#{ENV['PATH']}"
      system "bundle install --without WATWAT"
      system "bundle exec rake dist"
    end
  end
end 
```

关于解决方案的说明：`--without WATWAT`因为 Heroku 使用`bundle install --without development`. 由于`--without`连续调用会记住 ，并且在`development`中需要 group的 gem，`Assetfile`因此必须覆盖此选项。使用`--without ''`某种方式不起作用，所以我使用不存在的组`WATWAT`将所有组包含在`Gemfile`.

# sencha-touch-2 - 在 Sencha Touch 2 中显示倒数计时器

> ID：11115068
> 
> 赞同：0
> 
> 时间：2012-06-20T07:50:34.780
> 
> 标签：sencha-touch-2

我需要显示一个倒数计时器，使用延迟任务实现它。代码如下：

```
var task = Ext.create('Ext.util.DelayedTask', function() {

if (sec < 1 && min > 0) {
    min--;
    sec = 60;
}
if (min == 0 && sec == 1) {
    task.cancel();
}
sec--;
Ext.getCmp('minute').setHtml(min);
Ext.getCmp('second').setHtml(sec);
console.log('minute is' + min + 'second is' + sec);

task.delay(1000);

}, this);

task.delay(1000); 
```

通过上面的实现，函数只被调用一次。看看这个线程 [Auto Refresh the List in Sencha Touch Application](https://stackoverflow.com/questions/9697434/auto-refresh-the-list-in-sencha-touch-application)的讨论，上面的代码应该可以工作。但是，它不起作用。我的代码可能有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:41:15.953

据我所知， Ext.util.DelayedTask 用于延迟任务而不执行它。[正如您在文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.util.DelayedTask)中看到的那样，这对于延迟表单上的 Ajax 调用很有用：

> 此方法对于检测用户是否已在文本字段中完成输入等事情特别有用。[..]您可以使用此类将按键事件缓冲一定的毫秒数，并且仅在它们停止该时间量时才执行。

为什么不直接使用常规的 setTimeout？像[http://jsfiddle.net/EreaP/](http://jsfiddle.net/EreaP/)这样的东西可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T19:26:44.827

迟到的回应：

```
Ext.define('MyApp.view.TimerClock', {
    extend: 'Ext.Container',
    xtype: 'timerClock',
    duration: 3 * 60 * 60, //default to 3 hour
    paused: false,
    clockIntervalHook: undefined,
    config: {
        listeners: {
            initialize: function () {
                this.start();
            }
        }
    },
    start: function () {
        var me = this,
            duration = me.duration,
            updateClock = function () {
                if (me.isPaused()) {
                    return;
                }
                me.setHtml(me.formatTime(duration--));
                if (duration <= 0) {
                    me.stop();
                }
            };
        me.clockIntervalHook = setInterval(updateClock, 1000);
        return me;
    },

    pause: function () {
        this.paused = true;
        return this;
    },

    isPaused: function () {
        return this.paused == true
    },

    resume: function () {
        this.paused = false;
    },

    restart: function () {
        this.stop();
        this.start();
    },

    stop: function () {
        clearInterval(this.clockIntervalHook);
        return this;
    },

    //format the given seconds into "HH:MM:SS" format
    //override this if you need custom behavior
    formatTime: function (seconds) {
        var hours = Math.floor(seconds / 3600);
        hours = hours <= 9 ? "0" + hours : hours;
        seconds %= 3600;
        var minutes = Math.floor(seconds / 60);
        minutes = minutes <= 9 ? "0" + minutes : minutes;
        seconds %= 60;
        seconds = seconds <= 9 ? "0" + seconds : seconds;
        return hours + ":" + minutes + ":" + seconds
    }
}); 
```

任何其他视图，只需使用添加计时器

```
{ xtype : 'timerClock' } 
```

# php - 页面顶部的PHP回显

> ID：11115073
> 
> 赞同：2
> 
> 时间：2012-06-20T07:50:55.107
> 
> 标签：php, mysql, sql, if-statement, echo

我正在尝试做的是在页面顶部回显某些内容，同时在底部捕获某些内容。

这是我的脚本：

```
 <html>
<head>
  <title>Westpop</title>
  <link rel="stylesheet" href="opmaak.css">
</head>
<body>
<div id="header"><a href="Index.php"></a></div>

 <?php 

    $host = "localhost";
    $gebruikersnaam = "root";
    $wachtwoord = "";
    mysql_connect($host, $gebruikersnaam, $wachtwoord);

    $demooistedatabase = "c5g4westpopintranet";
    mysql_select_db($demooistedatabase);

    $achternaam = $_POST["achternaam"];
    $voornaam = $_POST["voornaam"];
    $gbdatum = $_POST["geboortedatum"];
    $email = $_POST["email"];
    $geslacht = $_POST["geslacht"];
    $wachtwoord = $_POST["wachtwoord"];
    $woonplaats = $_POST["woonplaats"];
    $adres = $_POST["adres"];
    $telefoonnummer = $_POST["telefoonnummer"];
    $functie = $_POST["functie"];

    $achternaam = stripslashes($achternaam);
    $voornaam = stripslashes($voornaam);
    $gbdatum = stripslashes($gbdatum);
    $email = stripslashes($email);
    $geslacht = stripslashes($geslacht);
    $wachtwoord = stripslashes($wachtwoord);
    $woonplaats = stripslashes($woonplaats);
    $adres = stripslashes($adres);
    $telefoonnummer = stripslashes($telefoonnummer);
    $functie = stripslashes($functie);

    $query ="INSERT INTO vrijwilliger (voornaam, achternaam, gbdatum, geslacht, wachtwoord, woonplaats, adres, telefoonnummer, functie, activiteitID, groepID, email)
                VALUES('$voornaam','$achternaam','$gbdatum','$geslacht','$wachtwoord','$woonplaats','$adres','$telefoonnummer','$functie',null,null,'$email')";

?>
<div id="registreer">
<center>
<br><br>
<?php

 $foutloos=true;

if(preg_match("/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $wachtwoord) === 0)
{
echo '<fblack>Wachtwoord moet minstens 8 tekens lang zijn, een kleine letter, grote letter én cijfer bevatten.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[0-9]{10}+$/", $telefoonnummer) === 0)
{
echo '<fblack>Het telefoonnummer moet 10 cijfers bevatten.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $gbdatum) === 0)
{
echo '<fblack>Geboorte datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i", $email) === 0)
{
echo '<fblack>Email moet hier op lijken: email@provider.com<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $voornaam) === 0)
{
echo '<fblack>Voornaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $achternaam) === 0)
{
echo '<fblack>Achternaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
$foutloos = false; 
}

if ($geslacht == '') 
{
echo '<fblack>U heeft uw geslacht niet aangegeven.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-zA-Z]+\ +[0-9]+$/", $adres) === 0)
{
echo '<fblack>Het adres is verkeerd ingevoerd.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-zA-Z\s]+$/", $woonplaats) === 0)
{
echo '<fblack>De woonplaats is verkeerd ingevoerd.<br><fblack>';
$foutloos = false; 
}

if ($foutloos == true)
{
mysql_query($query)
or die('<fblack>U staat al in ons systeem<A HREF="javascript:javascript:history.go(-1)"><br><br>Klik hier om terug te gaan</A><fblack>');
echo "<fblack>Uw registratie is succesvol verwerkt!<br>Log <a href='login.php' MEDIA=screen>hier</a> in<fblack>";
}
else
{

echo '<fblack><br><A HREF="javascript:javascript:history.go(-1)">Klik hier om terug te gaan</A><fblack>';
}

?>
</center>
</div>
<?php
include ("html_end.php");
?> 
```

现在在页面顶部，我想显示一条错误消息。那么我如何在顶部回显某些内容，同时它在 IF 中捕获它？

```
if ($foutloos == true)
{
mysql_query($query)
or die('<fblack>U staat al in ons systeem<A HREF="javascript:javascript:history.go(-1)"><br><br>Klik hier om terug te gaan</A><fblack>');
echo "<fblack>Uw registratie is succesvol verwerkt!<br>Log <a href='login.php' MEDIA=screen>hier</a> in<fblack>";
}
else
{
ECHO SOMETHING THAT HAS TO GO ABOVE THE PAGE
echo '<fblack><br><A HREF="javascript:javascript:history.go(-1)">Klik hier om terug te gaan</A><fblack>';
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:01:47.813

您想将您的逻辑与您的视图分开。因此，将您的 PHP 放在顶部，然后将 HTML 放在底部，例如：

```
//This goes at the top, only PHP here!
$host = "localhost";
$gebruikersnaam = "root";
$wachtwoord = "";
mysql_connect($host, $gebruikersnaam, $wachtwoord);
//etc
 $query ="INSERT INTO vrijwilliger (voornaam, achternaam, gbdatum, geslacht, wachtwoord, woonplaats, adres, telefoonnummer, functie, activiteitID, groepID, email)                VALUES('$voornaam','$achternaam','$gbdatum','$geslacht','$wachtwoord','$woonplaats','$adres','$telefoonnummer','$functie',null,null,'$email')";
$foutmelding = false; //Start without error obviously, we check later if this value has been changed at all.

if(preg_match("/^[0-9]{10}+$/", $telefoonnummer) === 0) //Something is not right
{
    $foutmelding = "Je telefoon nummer klopt niet!"; //By setting this to a string it will evaluate to `true` later on, thus showing the error message.
}
//More error checking etc... 
```

然后在您的视图中一直向下，例如 HTML；

```
<?php if($foutmelding) { ?>
   Er is een fout opgetreden; <?php echo $foutmelding; ?>
<?php } else { ?> 
   Alles is goed gegaan, dankjewel!
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:09:35.440

使用 PHP 缓冲区。在到达 php 文件的末尾之前，不要发送缓冲区的内容。

[http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

```
<?php
// Open buffer #1
ob_start();
print "Line 1\n";

// Open buffer #2
ob_start();
print "Line 2\n";

// Grab the contents of buffer #2
$buf2 = ob_get_contents();

// Close buffer #2
ob_end_clean();
print "Line 3\n";

// Grab the contents of buffer #1
$buf1 = ob_get_contents();

// Close buffer #1
ob_end_clean();

// Output the buffer contents
print $buf1;
print $buf2;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:02:01.310

您至少有两种方法可以做到这一点：

*   服务器端 - 开始使用一些模板引擎，如 smarty 并按照 F. Calderan 的建议将您的表示层与业务层分开
*   客户端 - 向您的 php 脚本生成的 HTML 添加一些 javascript 代码。使其在页面末尾执行并修改 HTML 的 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:12:22.880

如果您不想将项目重写为 mvc，这只是一个快速的解决方案..：使用[ob_start](http://php.net/manual/en/function.ob-start.php)

# java - 从 byte[] 创建 StringBuilder

> ID：11115082
> 
> 赞同：7
> 
> 时间：2012-06-20T07:51:15.637
> 
> 标签：java, memory

有没有办法`StringBuilder`从 a创建一个`byte[]`？

我想提高内存使用率，`StringBuilder`但我首先是 a `byte[]`，所以我必须从 the 创建 a`String`然后从 the`byte[]`创建`StringBuilder`，`String`我不认为这个解决方案是最佳的。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T08:11:46.733

基本上，您最好的选择似乎是直接使用[CharsetDecoder](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetDecoder.html)。

就是这样：

```
byte[] srcBytes = getYourSrcBytes();

//Whatever charset your bytes are endoded in
Charset charset = Charset.forName("UTF-8");
CharsetDecoder decoder = charset.newDecoder();

//ByteBuffer.wrap simply wraps the byte array, it does not allocate new memory for it
ByteBuffer srcBuffer = ByteBuffer.wrap(srcBytes);
//Now, we decode our srcBuffer into a new CharBuffer (yes, new memory allocated here, no can do)
CharBuffer resBuffer = decoder.decode(srcBuffer);

//CharBuffer implements CharSequence interface, which StringBuilder fully support in it's methods
StringBuilder yourStringBuilder = new StringBuilder(resBuffer); 
```

**添加：**

经过一些测试，似乎简单`new String(bytes)`的速度要快得多，而且似乎没有比这更快的简单方法了。这是我运行的测试：

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.charset.CharacterCodingException;
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;
import java.text.ParseException;

public class ConsoleMain {
    public static void main(String[] args) throws IOException, ParseException {
        StringBuilder sb1 = new StringBuilder("abcdefghijklmnopqrstuvwxyz");
        for (int i=0;i<19;i++) {
            sb1.append(sb1);
        }
        System.out.println("Size of buffer: "+sb1.length());
        byte[] src = sb1.toString().getBytes("UTF-8");
        StringBuilder res;

        long startTime = System.currentTimeMillis();
        res = testStringConvert(src);
        System.out.println("Conversion using String time (msec): "+(System.currentTimeMillis()-startTime));
        if (!res.toString().equals(sb1.toString())) {
            System.err.println("Conversion error");
        }

        startTime = System.currentTimeMillis();
        res = testCBConvert(src);
        System.out.println("Conversion using CharBuffer time (msec): "+(System.currentTimeMillis()-startTime));
        if (!res.toString().equals(sb1.toString())) {
            System.err.println("Conversion error");
        }
    }

    private static StringBuilder testStringConvert(byte[] src) throws UnsupportedEncodingException {
        String s = new String(src, "UTF-8");
        StringBuilder b = new StringBuilder(s);
        return b;
    }

    private static StringBuilder testCBConvert(byte[] src) throws CharacterCodingException {
        Charset charset = Charset.forName("UTF-8");
        CharsetDecoder decoder = charset.newDecoder();
        ByteBuffer srcBuffer = ByteBuffer.wrap(src);
        CharBuffer resBuffer = decoder.decode(srcBuffer);
        StringBuilder b = new StringBuilder(resBuffer);
        return b;
    }
} 
```

结果：

```
Size of buffer: 13631488
Conversion using String time (msec): 91
Conversion using CharBuffer time (msec): 252 
```

以及 IDEONE 上的修改（内存消耗更少）版本：[Here](http://ideone.com/jIY7V)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:56:24.567

如果它是您想要的简短语句，那么就没有办法绕过中间的 String 步骤。String 构造函数在一个非常常见的情况下为了方便而混合了转换和对象构造，但 StringBuilder 没有这种方便的构造函数。

如果您感兴趣的是性能，那么您可以通过使用以下方法来避免中间 String 对象：

```
new StringBuilder(Charset.forName(charsetName).decode(ByteBuffer.wrap(inBytes))) 
```

如果您希望能够微调性能，您可以自己控制解码过程。例如，您可能希望通过使用 averageCharsPerByte 作为对需要多少内存的估计来避免使用过多的内存。如果估计值太短，您可以使用生成的 StringBuilder 来累积所有部分，而不是调整缓冲区的大小。

```
CharsetDecoder cd = Charset.forName(charsetName).newDecoder();
cd.onMalformedInput(CodingErrorAction.REPLACE);
cd.onUnmappableCharacter(CodingErrorAction.REPLACE);
int lengthEstimate = Math.ceil(cd.averageCharsPerByte()*inBytes.length) + 1;
ByteBuffer inBuf = ByteBuffer.wrap(inBytes);
CharBuffer outBuf = CharBuffer.allocate(lengthEstimate);
StringBuilder out = new StringBuilder(lengthEstimate);
CoderResult cr;
while (true) {
    cr = cd.decode(inBuf, outBuf, true);
    out.append(outBuf);
    outBuf.clear();
    if (cr.isUnderflow()) break;
    if (!cr.isOverflow()) cr.throwException();
}
cr = cd.flush(outBuf);
if (!cr.isUnderflow()) cr.throwException();
out.append(outBuf); 
```

不过，我怀疑上述代码在大多数应用程序中是否值得付出努力。如果应用程序对性能感兴趣，它可能也不应该处理 StringBuilder，而是在缓冲区级别处理所有内容。

# php - 如果用户的积分超过 10,000，他们会获得 5 级，但他们会获得 1 级吗？mysql逻辑错误？

> ID：11115083
> 
> 赞同：0
> 
> 时间：2012-06-20T07:51:18.110
> 
> 标签：php, mysql

我的 mysql 查询语法有一个奇怪的问题。我制作了一个系统，当用户获得一定数量的积分时，它会向他们显示特定的排名。

例如
当他们有1000或更多积分时，他们是1级
3000或更多积分，他们是2级
5000或更多积分，他们是3级
8000或更多积分，他们是4级
9000或更多积分，他们是5级。

Mysql 表结构：
表名：rank 结构： pts , rankname

mysql查询如下：

```
$result = mysql_query("SELECT * FROM rank WHERE pts <= '$userpts' ORDER BY pts DESC LIMIT 1")
or die(mysql_error()); 
$row = mysql_fetch_array($result);
if($row){
  $rank = $row['rankname'];
  echo $rank;
} 
```

但是出现了一个奇怪的问题，当用户积分超过 10,000 点时，他们应该获得 5 级的排名，**但他们获得了 1 级的排名**（1000-2999 点之间的用户获得）
不知道发生了什么，他们应该获得 5 级.
（P/S 当用户有 8500 点时，他们会获得 4 级，这意味着低于 10k 的点可以很好地获得排名）

我的查询逻辑有什么问题吗？我自己也很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:55:47.427

确保该`pts`字段是[数字字段](https://dev.mysql.com/doc/refman/5.6/en/integer-types.html)，*而不是* CHAR 或 VARCHAR 字段。

10000 作为一个数字大于 1000 和 9000。然而，字符串是根据它们的字典排序顺序（即字母顺序）进行比较的，所以你得到这个顺序：

```
1000
10000
9000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:52:32.260

您的列是文本数据类型（例如 VARCHAR）而不是数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:57:18.263

首先，如果您在数字比较中使用字段，就像使用 pts (<=) 一样，请不要将其与字符串进行比较。删除 $userpts 周围的引号。

此外，将 PHP 变量直接嵌入到 SQL 语句中可能会使您容易受到 SQL 注入的攻击（取决于代码的其余部分）。

# exception-handling - Symfony 异常 - 在渲染模板期间抛出异常（“找不到实体。”）

> ID：11115088
> 
> 赞同：2
> 
> 时间：2012-06-20T07:51:29.800
> 
> 标签：exception-handling, symfony, doctrine

发生这种情况是因为表 A 中有一个 ID，当映射到表 B 时，它找不到该记录，因为它根本不存在。

我的问题是：

无论如何我们可以在 symfony 中捕获这个**异常**，以便我可以使用 try catch 块来处理这个错误？

> 框架：Symfony
> 
> 异常：EntityNotFoundException：找不到实体

# asp.net-mvc - ASP.NET MVC - 忽略特定路由

> ID：11115090
> 
> 赞同：1
> 
> 时间：2012-06-20T07:51:47.320
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我需要忽略匹配此架构的路由

```
/{controller}/edit/undefined 
```

{controller} - 可以是任何控制器

顺便说一句，我想知道何时使用 Ignore 以及何时使用 IgnoreRoute。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:58:22.423

您可以在路由定义的开头添加以下内容：

```
routes.IgnoreRoute("{controller}/edit/undefined"); 
```

> 顺便说一句，我想知道何时使用 Ignore 以及何时使用 IgnoreRoute。

这是同一件事。`IgnoreRoute`是一种扩展方法，与`Ignore`.

# android - 执行 RunKeeper 的获取请求

> ID：11115091
> 
> 赞同：2
> 
> 时间：2012-06-20T07:51:47.557
> 
> 标签：android, http-get

我正在尝试向[RunKeeper API](http://developer.runkeeper.com/healthgraph/example-api-calls#example-get-retrieving-user-info)发出此请求：

> GET /user HTTP/1.1
> 主机：api.runkeeper.com
> 授权：Bearer xxxxxxxxxxxxxxxx
> 接受：application/vnd.com.runkeeper.User+json

我的代码：

```
private static final String BASEURL = "http://api.runkeeper.com";  

public HttpResponse getUserInformation() throws IOException {
    DefaultHttpClient client = new DefaultHttpClient();
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, "UTF_8");
    HttpProtocolParams.setUseExpectContinue(params, false);

    client.setParams(params);
    HttpGet get = new HttpGet(BASEURL.concat("/user"));
    String credentials = getCredentials();
    get.addHeader("Authorization", "Basic " + credentials);
    get.addHeader("Accept", "application/vnd.com.runkeeper.User+json");
    return client.execute(get);
}

private String getCredentials() {
    String source = "Authorization" + ":" + "Bearer " + getAccessToken();
    String ret = Base64.encodeToString(source.getBytes(), Base64.URL_SAFE | Base64.NO_WRAP);
    return ret;
} 
```

但我不断得到：

> HTTP 状态 500 - 服务器遇到内部错误 () 阻止它完成此请求。

我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:55:29.450

您使用的网址不正确。你应该`/user`只请求。

用这个添加一个接受头：

```
get.addHeader("Accept", "application/vnd.com.runkeeper.User+json"); 
```

你确定你正确地添加了你的凭据信息吗？文档说明 Authorization 标头应该看起来像`Bearer xxxxxxxxxxxxxxxx`，而您的则是`Basic ...`。无需进一步研究，也许这可能是解决方案：

```
get.addHeader("Authorization", "Bearer " + getAccessToken()); 
```

如果它仍然无法正常工作，[此](http://developer.runkeeper.com/healthgraph/response-codes)页面指出如果您收到内部服务器错误，您应该联系他们以解决问题。我想这可以在[这个 Google Group](https://groups.google.com/forum/?fromgroups#!forum/HealthGraph)中完成。

# php - 在来自数据库的回显上显示 textarea 格式

> ID：11115097
> 
> 赞同：5
> 
> 时间：2012-06-20T07:52:18.787
> 
> 标签：php, mysql, format, echo

我创建了一个表格

```
<form name="form1" method="post">
    <textarea rows="5" cols="20" name="ta1"></textarea>
    <input type="submit" name="submit" />
    <textarea rows="5" cols="20"><?php echo $_POST['ta1']; ?></textarea>
</form> 
```

和一个 PHP 代码

```
<?php
    if ($_POST['submit']) {
        $llo = $_POST['ta1'];
        $con1 = mysql_connect("localhost", "FreeUser", "123456");
        mysql_select_db("database", $con1);
        mysql_query("insert into test (ttta) values ('$llo')");
        $q1 = mysql_query("select * from test");
        $res = mysql_fetch_array($q1);
        echo $res['ttta'];
    }
?> 
```

数据库表测试

```
id Auto_Increment
ttta mediumtext 500 
```

表中只有两个字段

现在，当我在 textarea 中输入如下格式的内容时

```
Rafee
Web Developer
XYZ Company
New York 
```

当我按下提交按钮时，具有相同格式结构的相同内容存储/显示在数据库表/文本框中

但是当我`echo`这个值时，它以单行显示，没有任何格式。我们怎样才能做到这一点。

我添加了一张图片以便更好地理解

![在此处输入图像描述](../Images/8a89abe31337842a579c96ce8c901215.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T07:53:59.207

采用

```
echo nl2br($res['ttta']); 
```

这将转换`\n`为 HTML 标记`<br />`

在 HTML 中，可见换行符需要使用 HTML 标签`<br />`，但在你的 PHP 中，存储的数据是`"Rafee\nWeb Developer\nXYZ Company\nNew York\n"`，所以你需要将函数`"\n"`转为`"<br />"`.

参考： http: [//php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# mobile - svg 未在 Safari 移动设备中显示

> ID：11115098
> 
> 赞同：0
> 
> 时间：2012-06-20T07:52:20.233
> 
> 标签：mobile, safari, svg

我正在试验 svg 的 javascript 动画并将它们排队显示，第一次尝试在这里：[链接](http://www.stretchsketch.com)它在 FOCS（firefox、chrome、opera、safari）浏览器中运行，但不在 Safari 移动设备（ipad/iphone）中运行我知道[这个](https://stackoverflow.com/questions/4504942/mobile-safari-svg-problem)问题， 但到目前为止它对我没有帮助（命名空间已经在不同的 svg 文件中，我尝试了 doc 类型）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T12:48:31.887

这与 svg 渲染无关，但我使用的是相对新的 js 函数`.bind()`，它会导致错误。与此同时，我学会了如何打开移动 safari 的调试控制台，这有助于我查明问题所在。[这是解决方案！](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

# c# - 如何获得一个内部带有 Rectangle 的 ScrollViewer 以在到达矩形末尾时停止滚动？

> ID：11115101
> 
> 赞同：9
> 
> 时间：2012-06-20T07:52:32.500
> 
> 标签：c#, windows-phone-7, xaml

我在这样的 ScrollViewer 中创建了一个 Rectangle

```
<ScrollViewer ManipulationMode="Control" x:Name="songScrollViewer"  HorizontalScrollBarVisibility="Visible"  VerticalScrollBarVisibility="Disabled" Height="270" VerticalAlignment="Center" Width="728" Canvas.Top="20" d:LayoutOverrides="HorizontalMargin"   >
  <Rectangle x:Name="musicBG" Fill="#FF0692FD"/>
</ScrollViewer> 
```

在应用程序的使用过程中，MusicBg 的大小会发生变化，有时会变为 3,000 像素左右的宽度。

```
musicBG.Width = _songLength*PixelsPerSecond 
```

但是，在滚动 scrollViewer 时，它允许我将矩形一直滚动到屏幕外。

例如，当我将矩形移动到想要移动的距离时，这行代码给了我以下值。

```
if (songScrollViewer.HorizontalOffset > songScrollViewer.ScrollableWidth) 
```

Horizo​​ntalOffset 的值约为 1200，而 ScrollableWidth 的值约为 2900。

如何才能正确完成此操作，以使矩形不会完全滚出屏幕？

我希望大约 1200 的 Horizo​​ntalOffset 只会将矩形推到它的目的地的一半左右，而不是让它开始离开屏幕。

**回答：**

**经过一番挫折，我能够通过使用 Canvas 而不是 Border 或 Rectangle 来解决这个问题。如果有人能解释为什么会发生这个问题，并且如果有一个比画布更好的处理器密集型控件，我会奖励积分。**

编辑：屏幕截图：

错误代码：

```
<ScrollViewer ManipulationMode="Control" x:Name="songScrollViewer" Width="720"  HorizontalScrollBarVisibility="Visible"  VerticalScrollBarVisibility="Disabled" Height="270" VerticalAlignment="Top" Canvas.Top="20" HorizontalAlignment="Left"   >
                                    <Border x:Name="musicBG"   Background="#FF0692FD" VerticalAlignment="Top" HorizontalAlignment="Left" Height="270" />

            </ScrollViewer> 
```

错误代码的错误滚动图像： ![坏卷轴](../Images/4a5b0d3ed6b730f0992e614cf686ed7c.png)

良好的工作代码：

```
<ScrollViewer ManipulationMode="Control" x:Name="songScrollViewer" Width="720"  HorizontalScrollBarVisibility="Visible"  VerticalScrollBarVisibility="Disabled" Height="270" VerticalAlignment="Top" Canvas.Top="20" HorizontalAlignment="Left"   >
                <Canvas x:Name="musicBG"  Background ="#FF0692FD" Height="270" >
                    <Border   Background="#FF0692FD" VerticalAlignment="Top" HorizontalAlignment="Left" Height="270" />
                </Canvas>
            </ScrollViewer> 
```

好卷轴：注意右下角显示的是 170 秒，而不是坏卷轴中较小的 118 秒。 ![好卷轴](../Images/4ea416da09085b2b8c9d220e19c76dd6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:20:30.073

我相信你的权利，wp7 不会渲染大于 2048 像素的形状。所以它滚动页面的原因是因为它把它当作大于 2048 来对待，但你只能看到 2048px 的宽度，它只是滚动到矩形的“幽灵”部分。

我不确定你是否可以覆盖它，但我能想出的最好的解决方案（不覆盖）是将你的矩形分成小于 2000 的夹头（为了安全起见），然后在水平方向上无缝显示它们滚动查看器内的堆栈面板。问题在于，根据您的编码方式，该解决方案可能难以实施；但是您可能只能在显示时将其拆分到 ViewModel 中，并且您的逻辑只会将其视为一大块。

# javascript - 三个点 - 溢出：省略号

> ID：11115102
> 
> 赞同：2
> 
> 时间：2012-06-20T07:52:34.880
> 
> 标签：javascript, jquery, css

我的问题是，为什么“文本溢出：省略号；” 不适合我吗？我的页面上有表格，我想缩短单元格（td）内的一些文本。如您所见，我在 css 中没有宽度参数。我从 json 得到这个值，然后用 jquery 设置它。也许这就是问题所在？如果是这样，我该如何解决？

```
#myTable2 td{
    white-space: nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    min-width:47px;
    border-top: solid 1px #ebebeb;
    border-spacing:none;
    cellpadding: 0;
    cellspacing: 0;
    font-family:arial;
    font-size: 8pt;
    color: #3D3D3D;
    padding: 4px;
} 
```

我在 Chrome 19、最新的 Firefox 和 IE9 中测试它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:06:55.753

您需要表格的宽度和表格布局：固定；

[http://jsfiddle.net/CagPK/](http://jsfiddle.net/CagPK/)

```
#myTable2 td{
    white-space: nowrap;
    overflow: hidden;
    text-overflow:ellipsis;
}
#myTable2 
{
    table-layout:fixed;
    width: 100px;
}
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:16:14.377

`text-overflow`适用于`display: block`元素，而表格单元格是`display: table-cell`元素。将您的文本包含在 a 中`<div>` [应该可以工作](http://jsfiddle.net/rAtY7/)（当您单击文本时，小提琴会设置宽度）。

# loops - 每次为 ul 项目运行两次

> ID：11115103
> 
> 赞同：0
> 
> 时间：2012-06-20T07:52:37.650
> 
> 标签：loops, jquery

我`$.each`用来计算 ul items (li tags) 的宽度。在这个示例中`$.each`工作没有任何问题，但是当我在我的代码中使用`$.each`运行两次（我的意思是，如果我有 4 个项目，`$.each`将运行 8 次）

我可以`for`用来创建一个循环来检查 li 宽度吗？

代码是：http: [//jsfiddle.net/rmsvf ​​/](http://jsfiddle.net/rmsvf/)

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:03:40.697

代码对我来说似乎很好。我的猜测也可能是您的实际代码中可能有更多 li 元素。
给*你想要计算*一个类的 li 元素`<li class="ClassName">Li Element</li>`并像这样调用你的每个函数只是为了测试：

`$('.ClassName').each(`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:56:08.747

您的代码非常好。`8 li * 200px = 1600px`

# iis - 从 IIS 重定向到 tomcat？

> ID：11115115
> 
> 赞同：1
> 
> 时间：2012-06-20T07:53:17.923
> 
> 标签：iis, jakarta-ee, tomcat, dns, hosting

我在 vps 中有一个托管空间。停放许多域名的地方。我的域名是 mywebsite.com 它存在于文件夹内的 c:\uname\mywebsite.com 中有 default.aspx 文件。当我输入网址为 www.mywebsite.com 时，我可以看到 default.aspx 页面。如果我用任何其他页面 index.jsp 替换，我将得到 IIS 服务器抛出的错误。所以，我安装了tomcat、java并部署了war文件。我什至在指定主机名的标记中也对 server.xml 进行了更改...如何将传入请求重定向到 tomcat 服务器？请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:48:17.827

您需要安装一个连接器。我会尝试 BonCode：tomcatiis.riaforge.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:00:39.843

HTTP 默认使用端口 80 进行连接。

每个 IP 上的一个网络端口（在这种情况下是 TCP 80 或`http://example.com:{port}`）只能被一个应用程序监听。

IIS 当前正在使用您的。首先，您需要检查 Tomcat 使用的端口（请参阅[此处](http://www.digizol.com/2008/06/tomcat-how-to-change-port-8080.html)）。

然后您应该尝试浏览一下`http://example.com:{port in tomcat server.xml}`，看看您是否可以正确查看 Tomcat 欢迎页面，或者您的应用程序。

在您确认 Tomcat 工作正常后，您可以决定将 Tomcat 端口号更改为您想要的任何端口号，如果您想在 80 上运行它，请确保 IIS 已关闭。

另一种选择是在端口 80 上安装 Apache 作为连接 Tomcat 端口 8080 的代理，如果您将来需要扩展基础架构，这将提供安全性和灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:53:58.607

标准方法是访问 tomcat.apache.org，并下载 ISAPI 重定向器。这通过 AJP 进行通信，您可以将其设置为将各种 url 重定向到 tomcat。

# c# - 将空控件绑定到 gridview 并检索它们的值

> ID：11115117
> 
> 赞同：1
> 
> 时间：2012-06-20T07:53:23.663
> 
> 标签：c#, gridview

**我使用列表绑定了一个gridview**

```
private void BindEntirePropertyGrid()
{
    List<Tbl_RoomMaster> items = new List<Tbl_RoomMaster>();
    for (int i = 0; i < Convert.ToInt32(bedrooms.Text); i++)
    {
        items.Add(objRoomMaster);
    }
    ViewState["GridView1"] = items;
    GridView1.DataSource = items;
    GridView1.DataBind();

} 
```

**现在我试图检索值，但显示错误**

```
if (ViewState["GridView1"] != null)
        {
            DataTable dtCurrentTable = (DataTable)ViewState["GridView1"];
            if (dtCurrentTable.Rows.Count > 0)
            {
                for (int i = 1; i <= dtCurrentTable.Rows.Count; i++)
                {
                    //extract the TextBox values
                    Label box1 = (Label)GridView1.Rows[rowIndex].Cells[1].FindControl("lblbedroom");
                    DropDownList box2 = (DropDownList)GridView1.Rows[rowIndex].Cells[1].FindControl("ddpAccomodates");
                    DropDownList box3 = (DropDownList)GridView1.Rows[rowIndex].Cells[1].FindControl("ddpBathroom");
                    DropDownList box4 = (DropDownList)GridView1.Rows[rowIndex].Cells[1].FindControl("ddpBedType");
                    //get the values from the TextBoxes
                    //then add it to the collections with a comma "," as the delimited values
                    sc.Add("BedRoom" + box1.Text + "," + box2.SelectedItem.Value + "," + box3.SelectedItem.Value + "," + box4.SelectedItem.Value);
                    rowIndex++;
                }
                //Call the method for executing inserts
                InsertRoomDetails(sc, propIDreturnedOnSave);
            }
        } 
```

**有没有其他方法可以将空控件绑定到 gridview 并检索值？**

**此行中的错误** ：

DataTable dtCurrentTable = (DataTable)ViewState["GridView1"];

```
Unable to cast object of type 'System.Collections.Generic.List`1[CT.Bussiness.Tbl_RoomMaster]' to type 'System.Data.DataTable'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:03:52.150

ViewState["GridView1"] 的内容不是 DataTable。

改变

```
DataTable dtCurrentTable = (DataTable)ViewState["GridView1"]; 
```

到

```
List<Tbl_RoomMaster> dtCurrentTable = (List<Tbl_RoomMaster>)ViewState["GridView1"]; 
```

你也必须改变

```
if (dtCurrentTable.Rows.Count > 0)
        {
            for (int i = 1; i <= dtCurrentTable.Rows.Count; i++) 
```

到

```
if (dtCurrentTable.Count > 0)
        {
            for (int i = 1; i <= dtCurrentTable.Count; i++) 
```

# javascript - 在 div 内的链接上停止 javascript 操作

> ID：11115124
> 
> 赞同：0
> 
> 时间：2012-06-20T07:53:49.197
> 
> 标签：javascript, jquery, html

我有一个 div 列表，其中包含与之关联的 onclick 操作。每个 div 内部都有一个正常的链接。当我单击链接时，将执行 javascript（速度很快），然后与链接关联的新页面开始加载（几分之一秒后）。

我可以对链接做些什么以使其不执行 javascript - 尽管它位于脚本中定义的 div 内？有没有办法将它从关联中排除，或者告诉它停止所有 javascript onclick？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:55:27.193

您可以停止`div`元素内链接的事件传播，如下所示

```
$('div a').on('click', function(evt) {
   evt.stopPropagation()
   /* do something */ 
}); 
```

这样做，当您单击链接时，与元素`click`事件关联的处理程序`div`将不会被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:56:23.360

试试这个 ，

```
 $("#yourlinkId").click(function(event) {
     event.preventDefault();
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:58:06.147

让链接的 onclick 处理程序返回 false，例如：

```
<a href="http://foo/bar" onclick="return false"> 
```

或者，在 jQuery 表示法中：

```
$('div a').on('click', function(e) { return false; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:58:31.560

或者您可以通过以下方式阻止默认操作

```
$('div a').on('click', function(event) {
   event.preventDefault();
}); 
```

我认为停止传播会阻止由单击链接引起的任何进一步事件，而阻止默认值只会停止实际的链接单击？

# jsp - 获取 HTTPS 的 JSP 页面的服务器名称和端口号

> ID：11115128
> 
> 赞同：0
> 
> 时间：2012-06-20T07:54:18.663
> 
> 标签：jsp, jakarta-ee, servlets, spring-mvc, jstl

我需要为我的表单操作创建 URL，但表单应在`https`当前运行在 9002 端口上的 HTTPS 底层系统下提交。我无法在我的 JSP 页面中使用以下选项

```
<form:form action="${request.contextPath}/springSecurity/login"
method="post" commandName="loginForm" target="guestFrame"> 
```

因为在 HTTP 中，上下文路径以 HTTP 形式出现，系统将抛出异常，因为表单应由 HTTPS 提交。我无法将操作 URL 硬编码为当前正在开发的主机名`localhost`，即使 HTTPS 端口也是可配置的，因此它甚至无法硬编码。

有什么方法可以使用 JSTL 或任何其他方式在我的 JSP 中创建 URL，以便我可以在 HTTPS 下提交表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:19:52.863

`HttpServletRequest.getServerName()`将给出服务器名称。但是，没有办法获得`https`端口。`443`如果你想在你的方法中修复它，你应该使用默认值。

但好的解决方案是使用`Security Transport Guarantee`登录 url，这样服务器会自动将`springSecurity/login`页面重定向到`https`.

**将此条目添加到`web.xml`将自动重定向`springSecurity/login`到`https`。**

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>secure</web-resource-name>
        <url-pattern>/springSecurity/login</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

# javascript - Javascript代码中的脚本标签问题

> ID：11115132
> 
> 赞同：-4
> 
> 时间：2012-06-20T07:55:06.103
> 
> 标签：javascript, html, adsense, geoip

[此页面](http://101greatgoals.com/geoip-test.php)应显示 Google 广告。

我尝试了一切，但它不起作用。我认为问题在于结束脚本标签 -`</script>.`

能否请您复制源代码并测试它？

直到现在我真的无法让广告出现，即使它在 JavaScript 代码之外工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:08:45.550

您`</script>`在 JavaScript 字符串文字中嵌入了一个`<script>`，浏览器将其解释为标记的结尾。有一些简单的解决方法，最简单的方法是使用符号拆分`</script>`字符串文字中的任何存在：`+`

```
<script type="text/javascript">
var a = "</scr" + "ipt>";
</script> 
```

但是，查看您的页面，我怀疑上述更改是否足够。而不是使用`.innerText`：

1.  用于`document.createElement`创建 div（和脚本）元素
2.  用于`element.appendChild`将该 div 附加到另一个元素中

# winforms - 如何在winform treeview拖放的上方/下方显示图标

> ID：11115133
> 
> 赞同：0
> 
> 时间：2012-06-20T07:55:06.477
> 
> 标签：winforms, drag-and-drop, treeview

我想在放置目标位置突出显示（显示图标）。类似于在目标节点上方或下方显示图标的第三方控件，以显示目标位置的预览。

![附上一个示例屏幕截图，它在目标节点下方显示了一条线：](../Images/818b3e6a20bc543abfcb4be1cd6f5b33.png)

是否有任何示例或想法如何在 winform 树视图中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:32:14.357

我找不到我正在寻找的确切内容，意味着无法在目标节点上方或下方显示图标，但是，我设法允许用户使用以下解决方案在目标节点上方或下方添加节点：

Treeview 放置事件提供信息是放置在目标节点的图像还是文本部分，可用于决定是在上方还是下方添加放置的节点。

```
Dim hTest As TreeViewHitTestInfo
Private Sub TreeView1_DragOver(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles TreeView1.DragOver

     Dim pt As Point = CType(sender, TreeView).PointToClient(New Point(e.X, e.Y))
     hTest = TreeView1.HitTest(pt)

End Sub

Private Sub TreeView1_DragDrop(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles TreeView1.DragDrop

    If hTest IsNot Nothing AndAlso hTest.Location = TreeViewHitTestLocations.Image Then
    'Add Above
    Else
    'Add Below
    End If

End Sub 
```

# python - 强制pythons zipfile中文件的特定时间戳

> ID：11115140
> 
> 赞同：10
> 
> 时间：2012-06-20T07:55:30.410
> 
> 标签：python, zipfile

将文件添加到 zipfile 时是否可以强制使用特定的时间戳？

这些方面的东西：

```
with ZipFile('spam.zip', 'w') as myzip:
  myzip.write('eggs.txt', date_time=(1752, 9, 9, 15, 0, 0)) 
```

我可以更改 zipfile 成员的 ZipInfo 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-09-03T18:31:48.460

查看[CPython 3.7中](https://github.com/python/cpython/blob/3.7/Lib/zipfile.py#L1701)[的源代码`ZipFile.write()`](https://github.com/python/cpython/blob/3.7/Lib/zipfile.py#L1701)，该方法总是`ZipInfo`通过检查磁盘上的文件来获取它——包括一堆元数据，如修改时间和特定于操作系统的属性（参见[源`ZipInfo.from_file()`代码](https://github.com/python/cpython/blob/ea21389dda401457198fb214aa2c981a45ed9528/Lib/zipfile.py#L495)）。

因此，为了解决这个限制，您需要`ZipInfo`在写入文件时提供自己的文件——这意味着使用[`ZipFile.writestr()`](https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.writestr)并提供 a`ZipInfo`和从磁盘读取的文件数据，如下所示：

```
from zipfile import ZipFile, ZipInfo
with ZipFile('spam.zip', 'w') as myzip, open('eggs.txt') as txt_to_write:
    info = ZipInfo(filename='eggs.txt',
                   # Note that dates prior to 1 January 1980 are not supported
                   date_time=(1980, 1, 1, 0, 0, 0))
    myzip.writestr(info, txt_to_write.read()) 
```

或者，如果您*只想*修改`ZipInfo`的日期，您可以从中获取`ZipInfo.from_file()`并重置其`date_time`字段：

```
info = ZipInfo.from_file('eggs.txt')
info.date_time = (1980, 1, 1, 0, 0, 0) 
```

在您仍然希望保留特殊操作系统属性的一般情况下，这会更好。

# unix - 应用程序无法在 UNIX 中创建日志文件？

> ID：11115141
> 
> 赞同：0
> 
> 时间：2012-06-20T07:55:32.043
> 
> 标签：unix, logging, log4j

我开发了一个网络项目。使用 log4j 生成日志文件。但是相同的应用程序部署在 UNIX 中，它也无法创建日志文件。
我是 unix 新手。为什么它不创建日志文件？这是代码....

```
log4j.rootLogger = 信息，CA，FA

#Console 附加程序
log4j.appender.CA = org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout = org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern = %d %5p %c{1}:%L - %m%n

#文件附加器
log4j.appender.FA = org.apache.log4j.FileAppender
log4j.appender.FA.File =correspondence.log
log4j.appender.FA.layout = org.apache.log4j.PatternLayout
log4j.appender.FA.layout.ConversionPattern = %d %5p [%t] - %m%n

```

它正在服务器安装文件夹中创建日志文件。但不是在 UNIX 中创建。我需要做任何更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:59:21.700

尝试换行：

```
log4j.appender.FA.File =correspondence.log 
```

到：

```
log4j.appender.FA.File = /tmp/correspondence.log 
```

如果可行，则在运行应用程序服务器的用户的主目录中创建一个日志目录，将其 chmod 至少为所有者可执行和可写，然后将日志放在该目录中。

# image-processing - 是否可以通过在场景中捕获的两张图像获得深度信息？

> ID：11115144
> 
> 赞同：1
> 
> 时间：2012-06-20T07:55:35.493
> 
> 标签：image-processing, 3d, 2d, computer-vision

我在同一个场景中拍摄了两张照片。这两个图像是由两个水平排列的相机拍摄的，它们之间的距离很短，但拍摄到相同的焦点。这里有一个问题：是否可以用两张图像的信息来计算相机到图像的距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:14:44.877

如果您设法计算出正确的视差图（这是计算机立体视觉的主要挑战之一），并且物体足够近，立体视觉可以发现物体到相机的距离。相机的焦距无关紧要，只要它足以计算视差图即可。

# performance - 从不同计算机查询时 SNMP 性能发生变化

> ID：11115152
> 
> 赞同：1
> 
> 时间：2012-06-20T07:56:00.767
> 
> 标签：performance, snmp, net-snmp

我正在从事一个当然涉及[SNMP](http://net-snmp.sourceforge.net/)的审计项目。在查询不同的设备时，我注意到从两台不同的计算机查询机器时存在巨大的性能差异。让我们举个例子。*当我从 Debian snmpwalk*查询我的 Cisco 2960G 交换机时，它真的很慢，慢的意思是每次*获取*都需要几秒钟才能完成。而使用 SUSE Enterprise，*snmpwalk*会像往常一样快速，并且*get*操作几乎是即时的。Debian 运行 NET-SNMP 5.4.3，而 SUSE 运行 NET-SNMP 5.4.2.1。请注意，这种性能差异仅发生在某些设备上，例如 Cisco 交换机和某些打印机（通常是 Lexmark）。造成这种巨大差距的原因是什么？

编辑：我刚刚将 Debian 上的 NET-SNMP 更新到[5.7.2](https://sourceforge.net/projects/net-snmp/files/net-snmp/5.7.2-pre-releases/)版，但性能和以前一样慢。

# qr-code - 如何计算插入 QRCode 的徽标的最大尺寸

> ID：11115156
> 
> 赞同：1
> 
> 时间：2012-06-20T07:56:13.733
> 
> 标签：qr-code

可以将图像覆盖在 QRCode 上并对其进行扫描，因为存在一些冗余。

但是我如何计算我可以隐藏的模块的最大数量以及我仍然拥有哪些冗余？

我看到大多数人只是用 Photoshop 调整他们的代码并尝试使用他们的阅读器：我想动态生成 QRCode 并添加一些任意图像，所以这种手动调整对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:42:26.647

从维基百科，四个纠错级别启用以下近似级别的纠错恢​​复：

```
Level L (Low)   7% of codewords can be restored.
Level M (Medium)    15% of codewords can be restored.
Level Q (Quartile)  25% of codewords can be restored.
Level H (High)  30% of codewords can be restored. 
```

对于确切的数字，您需要参考 QR 码规范 (ISO 18004)。

它比这复杂一点。例如，EC 数字不适用于角落的取景器图案。虽然您可以稍微扭曲它们，但对于确切的数量没有硬性限制。

同样，EC 未涵盖 QR 码数据的某些区域，因为它们本身包含 EC 级别和版本信息。这些是右上角和左下角代码周围的区域。他们有不同的 EC 方案并且有一些冗余，但是很难准确地解释你可以破坏多少。

最后，请记住，对于您的徽标所涵盖的任何模块，徽标的明暗度与底层模块匹配的可能性约为 50%（嗯，取决于您的徽标）。所以它不会引入错误。因此，您的徽标损坏的代码字的确切数量取决于徽标和底层二维码模块！

您最好的选择是使用 H 级纠错。然后创建一些失真度越来越高的测试二维码。使用带有调试器的 zxing 之类的库来检测您的样本由于 EC 限制而开始失败的点。然后回退到那个大小的 75%。

对于几乎所有实际情况，这应该是足够的缓冲。

# android - 从代码更改活动背景

> ID：11115158
> 
> 赞同：8
> 
> 时间：2012-06-20T07:56:14.807
> 
> 标签：android, user-interface, xamarin.android, android-activity

我有一个背景活动：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:minWidth="25px"
android:minHeight="25px"
android:background="@drawable/background_fingerboard" /> 
```

如何从代码更改背景图像？我实际上使用单声道，但 Java 示例也会有所帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T08:01:33.427

首先在布局 xml 中添加 LinearLayout id：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/linearLayoutid" 
android:minWidth="25px"
android:minHeight="25px"
android:background="@drawable/background_fingerboard" 
```

并在代码部分设置背景为::

```
LinearLayout  linearLayout = (LinearLayout) findViewById(R.id.linearLayoutid);
 linearLayout.setBackgroundResource(R.drawable.background_fingerboard); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T08:00:36.567

在java中我们这样做

将 id 分配给 LinearLayout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id=@+id/parentLayout 
```

然后在代码中

```
LinearLayout layout=(LinearLayout)findViewById(R.id.parentLayout);

layout.setBackgroundColor(Color.BLUE);  Or
layout.setBackgroundDrawable(d); Or
layout.setBackgroundResource(resid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:00:50.250

```
LinearLayout  vi = (LinearLayout ) findViewById(<id>)
vi.setBackgroundResource(R.drawable.<id2>); 
```

您还需要在 XML 中向您的 LinearLayout 提供 id ......

# flash - 如何创建 WebView Flex 项目

> ID：11115162
> 
> 赞同：0
> 
> 时间：2012-06-20T07:56:41.843
> 
> 标签：flash, apache-flex

我对 flex 很陌生，想用 flex 项目开发基于窗口的浏览器应用程序。只想在窗口使用。无论是手机还是linux。

应用程序非常简单，将包括 URL 地址栏和转到按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:57:59.853

嗯.. 您正在寻找的只不过是一个 AIR 应用程序。它是基于 Windows 的应用程序，可以安装并可以访问 Internet。休息，您必须为其中的网页渲染编写代码。

# opencv - 我可以在微控制器上使用眼睛检测 opencv 代码吗？

> ID：11115165
> 
> 赞同：1
> 
> 时间：2012-06-20T07:57:00.797
> 
> 标签：opencv, microcontroller

我想做一个使用眼动追踪的项目，是否可以在微控制器上移植开放的 cv 代码。

我是opencv和微控制器的新手，所以任何人都可以告诉我是否有可能制作一个像这个视频一样工作的代码。

[http://www.youtube.com/watch?feature=endscreen&v=eBtpKAja-m0&NR=1](http://www.youtube.com/watch?feature=endscreen&v=eBtpKAja-m0&NR=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:16:35.617

**问：我可以在微控制器上使用眼睛检测 opencv 代码吗？**

答：是的，你可以

**问：是否可以在微控制器上移植开放的 cv 代码**

A：OpenCV 已经在 Unix 和 Android 平台上。因此，最简单的方法是使用一些带有 ARM 的嵌入式设备。“OpenCV-ARM”组合有很多帮助。

Beagleboard 和 RasberryPi 是价格低于 150 美元的最便宜的嵌入式 ARM 设备。有时它们预装了 Unix 引导系统和 opencv2.0。因此，运行您在计算机系统中创建的可执行文件将非常容易。

注意处理器的速度。如果您的算法是计算密集型的，那么您将不会对在低端嵌入式设备中获得的输出感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:27:50.643

如果某些 ARM 嵌入式 Linux 板可以符合您对微控制器的定义，那么就没有什么可移植的了。 [http://www.google.com/search?q=opencv+arm](http://www.google.com/search?q=opencv+arm)

# ruby-on-rails - 守卫/聆听 gem 在控制台上工作

> ID：11115166
> 
> 赞同：2
> 
> 时间：2012-06-20T07:57:01.030
> 
> 标签：ruby-on-rails, ruby, multithreading, guard, listen

当我运行 rails server 时，guard/listen gem 可以完美运行 - 它会监听文件中的更改并在发生更改时运行各种脚本。但是 - 当我运行 rails 控制台时它不起作用。

这是 config/initializers/listen.rb 中的代码：

```
Thread.new do
    puts "listening to changes in db/data directory"
    File.open("db/data/test.txt", 'a+'){ |f| f.puts "hello"} 
    Listen.to("db/data", :filter => /\.yml$/, :ignore => %r{ignored/path/}) do |modified, added, removed|
        File.open("db/data/test.txt", 'a+'){ |f| f.puts "file changed"} 
        puts "file changed"
    end
end 
```

当我运行 rails 控制台时，它会打印“监听 db/data 目录中的更改”行并停止。

我认为这与多线程和阻塞有关。

有没有办法用控制台运行监听？

谢谢，米哈尔·亚什佩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-03T15:20:26.853

我知道这是一个老问题，但我会为任何寻找这个的人提供答案。它会停止还是退出？无论如何，它应该退出......

当您启动 Rails 应用程序时，它不会退出，这就是它起作用的原因，正如 Matt 所说，listen gem 在调用 Listen.to 之后调用该块。当您从 rails 控制台启动脚本时，它会简单地执行所有内容然后退出。您需要在末尾添加 a`sleep`或 a`gets`以确保您的脚本永远不会退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:40:57.413

List.to 块不会被调用，直到在调用 Listen.to*之后*进行更改。您尝试在 Listen 触发更改事件之前和之后更改文件。

将“文件已更改”移出 Thread.new 的一侧

```
 Thread.new do
      puts "listening to changes in db/data directory"

      Listen.to("db/data", :filter => /\.yml$/) do |modified, added, removed|
        File.open("db/data/test.txt", 'a+'){ |f| f.puts "file changed"} 
        puts "file changed"
      end
  end
File.open("db/data/test.txt", 'w+'){ |f| f.puts "changed now"} 
```

也尝试回调方法并删除线程：[https ://github.com/guard/listen#changes-callback](https://github.com/guard/listen#changes-callback)

# arrays - mongoDB - eBay 风格类别

> ID：11115169
> 
> 赞同：0
> 
> 时间：2012-06-20T07:57:03.370
> 
> 标签：arrays, json, mongodb, categories

我想知道您将如何在 mongoDB 中存储类别和子类别的列表，以供人们出售物品。

这就是我打算这样做的方式，但是当我想到它时，它不会起作用。

这就是为什么

```
{"category":"Fashion",
"Sub-Categories":
[{
   "subcat_name":"Female Clothing",
    "Sub-categories":[{"subcat-name":"Dresses"},{"subcat-name":"Shirts"},{"subcat-name":"Business"}]
}]
} 
```

如您所见，有两个级别的子类别，这意味着更新可能会令人困惑。

有人能告诉我在 mongoDB 中做类别列表的最佳方法，比如 ebay 和 gumtree

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:04:24.240

我建议你让你的数组像一个链表，你必须有一个父类别的列。

父类别列指向（显然）父类别的索引，我想你明白我的意思。

现在您可以使用递归检索此信息

这是你的样本数组

```
index    name               parent
  1      fashion   
  2      female clothing      1
  3      dresses              2
  3      shirts               2 
```

所以通过这个你可以创建一个结构简单的动态类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:12:18.627

定义集合（因此，描述存在哪些类别和子类别的集合）的结构应如下所示：

```
db.categories {
_id: <Category ID, unique code or ObjectId>,
name : <Human readable category name>,
subCategories : [
    {
        subCategoryCode : <Sub category ID, local unique code>,
        name : <Human readable sub category name>,
        <additional sub category data>
    }
],
<additional category data>
} 
```

还有你的物品：

```
db.items {

_id : <Item id>
name : <Human readable item name>
category : {
    categoryId : <Category ID>,
    categoryName : <Human readable category name>,
    subCategoryId : <Sub category ID>,
    subCategoryName : <Human readable sub category name>,
},
<additional item data>
} 
```

在所有常见用例中运行此模式，您会发现您很少需要查询两个集合以进行单个常见操作。数据重复是故意的，需要进行管理（这意味着如果您更新类别名称，则必须批量更新某个类别中的项目）。如果您出于性能或实用性原因无法忍受，您只能存储名称并在应用程序中维护应用程序本地 id->name 缓存，以便在不查询数据库的情况下进行类别查找。

问题？评论

# php - Facebook SDK cURL 和 SSL 错误

> ID：11115174
> 
> 赞同：0
> 
> 时间：2012-06-20T07:57:19.850
> 
> 标签：php, facebook

我尝试为我的网站使用 facebook API。但我得到一些像这样的错误

> 致命错误：未捕获的 CurlException：1：在第 887 行的 /home/batav1/public_html/permaisuri/include/fbsdk/src/base_facebook.php 中抛出的 libcurl 中不支持或禁用协议 https

我通过输入 phpinfo() 检查了 curl 配置，结果如下

```
cURL support enabled
cURL Information libcurl/7.21.0 zlib/1.2.3 libidn/0.6.5 
```

我应该怎么办？这是我的代码：

```
<?php
require 'include/fbsdk/src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => '33025497038xxxx',
  'secret' => '87be6ab5175a9be7c7d48be74dd5xxxx',
));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
    <style>
      body {
        font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
      }
      h1 a {
        text-decoration: none;
        color: #3b5998;
      }
      h1 a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

    <h3>Public profile of Naitik</h3>
    <img src="https://graph.facebook.com/naitik/picture">
    <?php echo $naitik['name']; ?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T08:03:04.430

问题是 curl 扩展没有编译 ssl 支持。您应该使用选项 --with-curl 和 --with-openssl 重新编译 PHP。

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T07:59:59.127

看来您的 php 设置似乎不支持`https`包装器

要允许 https 包装器：-`php_openssl`扩展必须存在并启用 -`allow_url_include`必须设置为 on

如果不存在，则在 php.ini 文件中添加以下行：

```
extension=php_openssl.dll

allow_url_include = On 
```

# javascript - jquery .ready 和元素的高度

> ID：11115179
> 
> 赞同：13
> 
> 时间：2012-06-20T07:57:43.587
> 
> 标签：javascript, jquery, html

可能看起来像一个微不足道的问题，但我在使用 jQuery 时遇到了一个问题。当我尝试获取 .ready 中元素的高度时，我总是得到零。

```
$(function() {
  $('#my-elem').height() // Always gives me zero.
}); 
```

如果我在高度检查周围使用 setTimeout() 延迟代码（例如 0.5 秒），那么高度会正确报告给我。我猜这是因为样式还没有机会应用？

我发现这个问题的唯一解决方案是使用间隔来轮询元素的高度，直到它变为非零，但这对我来说似乎有点过分了。有没有更好的办法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T09:31:02.197

该`document.ready`事件表明 HTML DOM 已准备好通过 Javascript 访问，但这**并不意味着元素已经呈现**。

事实上，这就是背后的全部内容：它是一种让您*无需等待页面完成加载*`ready`即可开始操作文档的 HTML DOM的方法。可以安全地假设，您的元素尚未显示在页面上。*`document.ready`*

 *现在，有一个警告：如果元素还没有渲染，浏览器/Javascript怎么知道它的解析高度是多少？`.height()`因此可能会给出零`document.ready`。最好等到`load`而不是`ready`从布局中提取框尺寸。*

# php - 从动态创建的对象中获取文本值

> ID：11115180
> 
> 赞同：-1
> 
> 时间：2012-06-20T07:57:46.270
> 
> 标签：php, jquery

我仍在寻找从动态创建的对象中获取值的解决方案。

以下代码从 zip2.php 生成动态对象

 ````
$(document).ready(function() { 
    $("#submit").click(function(e) {
      e.preventDefault();

      var q = $("#k").val();

      $.ajax({
          type: "POST",
          url: "zips.php",
          data: "q="+ q,
          dataType: "html",
          success: function(res) {
               $("#result").html(res); $('#result').trigger('create');  
        },
      });

    });       

}); 
````  ````
<div data-role="content">

 <div id="result"></div>

</div> 
```

它创建了这种格式的对象。（zips.php的内容）

```
<? echo " <div><ul id='zips' data-role='listview' data-inset='true' data-theme='c'>";
while($row = mysql_fetch_array($result)) {
$out .= "
 <li>
 <a name='submit_button' href='#mainPage'><span class='zip1'>$zip1</span>-
 <span class='zip2'>$zip2</span><br />
 <span class='address'>$row[zp_sido] $row[zp_gugun] $row[zp_dong] $row[zp_bunji]   </span></a>
</li> \n";
}
  echo $out."</ul>"; 
```

?>

此脚本从动态对象中获取 text() 值并将其插入到表单中。

```
 <script>
$(document).ready(function() {
$('a[name=submit_button]').click(function(){
                                         var inputVal1 = $('.zip1, this).text(); 
 var inputVal2 = $('.zip2', this).text(); 
 var inputVal3 = $('.address', this).text();

     $('div input[name=zip_code1]').val(inputVal1);  
$('div input[name=zip_code2]').val(inputVal2); 
$('div input[name=address1]').val(inputVal3); 

   </script>

   <div>
    <form>
      <input type="text" id='zip_code1' name="zip_code1" > - <input type="text" id='zip_code2 name="zip_code2"><br />
      <input type="text" id='address1' name="address1">
    </form
   </div> 
```

问题是“var inputVal1 = $('.zip1, this).text();” 从动态对象类名“zip1”中获取 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:08:27.533

代替

```
$('a[name=submit_button]').click(function(){.. 
```

用这个：

```
$('#result').on('click', 'a[name=submit_button]', function(){.. 
```

当您`a[name=submit_button]`在页面加载后附加到 DOM 时，通过 ajax 请求动态地附加，因此您需要委托事件处理程序，普通的事件绑定在这里不起作用。

阅读更多关于**[`.on()`](http://api.jquery.com/on)**

* * *

### 笔记

对于一般的绑定语法`.on()`是这样的：

```
$(target).on(eventName, handlerFunction) 
```

但对于委托事件系统税是

```
$(container).on(eventName, target, handlerFunction) 
```

这`container`是`Static-element`在页面加载时属于 DOM 并包含`target`两者`container`并且`target`都是有效的 jQuery 选择器。`

# c# - WinJS 脚本中的异常处理

> ID：11115181
> 
> 赞同：1
> 
> 时间：2012-06-20T07:57:52.743
> 
> 标签：c#, windows-8, winjs

我正在从我的 JavaScript（在我的 Windows 8 应用程序中）调用 C# 代码中的一个函数，该函数从服务中获取一些值并将其返回给 JavaScript。我需要在我的 JavaScript 调用方法中处理 C# 代码引发的错误。如果可能，请告诉我。一个代码示例会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:17:32.263

调用外部库时 WinJS 中的异常以“JavaScript”方式处理。一个例子是：

```
try {
    //Run some code here
    TestClassLibrary.Class1.runMe();
}
catch (err) {
    //Handle errors here
    console.log(err.message);
} 
```

对于简单的 C# 类：

```
namespace TestClassLibrary
{
   sealed public class  Class1
    {
        public static void RunMe()
        {
            throw new Exception("something is wrong!!");
        }
    }
} 
```

您将在控制台中收到以下消息：

```
System.Exception: something is wrong!!
   at TestClassLibrary.Class1.RunMe() 
```

注意：确保您的 Class 被标记为**seal**，并且您的项目输出是**WinMD**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:25:24.233

您还可以查看在**Windows.Networking.Sockets**命名空间中实现的错误策略。

他们有一个**SocketError 类**，它有一个静态**方法 getStatus(hresult)**并返回一个**SocketErrorStatus 枚举**。

您可以使用自定义 HRESULT 代码实现自定义异常（但必须为负），例如：

```
public class TestException : Exception
{
 /// <summary>
 /// Constructs the exception from a string message
 /// </summary>
 /// <param name="message">error description</param>
 public TestException(String message)
 : base(message)
 {
   base.HResult = -1001;
 }
} 
```

您还将提供一个类 TestError ，根据 hresult 将返回您的 TestErrorStatus 枚举的成员，该成员可能如下所示：

```
namespace TestClassLibrary
{
    public enum TestErrorStatus
    {
        TestError = -1001
    }
} 
```

在您的 WinJS 代码中，您将检查：

```
function (error) {
 var errorStatus = TestClassLibrary.TestError.getStatus(error.number);
 if (errorStatus == TestClassLibrary.TestErrorStatus.TestError) {
  // error is TestException
 } 
} 
```**

# wordpress - 可以使用 WP-Less 进行 LESS 字符串外推吗？

> ID：11115187
> 
> 赞同：0
> 
> 时间：2012-06-20T07:58:22.563
> 
> 标签：wordpress, less, mixins

我正在尝试使用Wordpress 中的[WP-Less在 LESS 中编译 Twitter Bootstrap。](http://wordpress.org/extend/plugins/wp-less/)编译时，当我面对[此链接中描述的字符串外推时，我得到一个解析错误](http://lesscss.org/#-mixins)

是这样描述的：

**字符串插值**

*变量可以以类似于 ruby​​ 或 PHP 的方式嵌入到字符串中，使用 @{name} 构造：*

```
@base-url: "http://assets.fnord.com";
background-image: url("@{base-url}/images/bg.png"); 
```

在 mixins.less 中，我的错误来自：

```
 (~".span@{index}") { .span(@index); } 
```

我已经在支持部分发布了一个问题。但我希望看到不支持字符串外推。

你有什么主意吗 ？？

最好的祝福

S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:37:14.017

我发现了一些有趣的东西..

WP-Less 基于lessphp.. 但插件包括lessphp **v0.3.1**。

通过lessphp **v0.3.5**（[下载页面](http://leafo.net/lessphp/#download)）更改它，不再有错误消息。

我并不是说每个人都可以在 Wordpress 中添加 Twitter Bootstrap LESS 版本，但我的调查正在进行中。

对我来说是封闭的话题。

最好的祝福

S。

# c# - WPFToolkit.Extended - 工具在哪里？

> ID：11115189
> 
> 赞同：32
> 
> 时间：2012-06-20T07:58:30.920
> 
> 标签：c#, wpf, visual-studio

我采取的步骤：

1.  我正在使用 .NET 4.0
2.  我必须进行[codeplex](http://wpftoolkit.codeplex.com/releases/view/84227)并下载第一个“扩展 WPF 工具包二进制文件”。
3.  2 号将此文件“ExtendedWPFToolkit_Binaries.zip”添加到此处：C:\Users\myName\Downloads\
4.  然后我提取了 .dll 文件并将其放在这里：C:\downloads\WPFToolkit.Extended.dll
5.  在我浏览的 WPF 项目中（即第 4 步中的 dll）以获得额外的参考，现在它有一个额外的参考“WPFToolkit.Extended
6.  在 MainWindow.xaml.cs 文件中，我添加了这个“使用 Xceed.Wpf.Toolkit；”
7.  在 App.xaml 文件中，我添加了这个“xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"

第7步可以吗？

我还需要做什么才能查看工具箱中的工具？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-20T08:16:44.673

转到工具箱选项卡 (ctrl+alt+x)，右键单击它并“添加选项卡”，键入您想要的名称（例如：“WPF 扩展工具包”）。

然后再次右键单击它并“选择项目..”。浏览找到刚刚下载的dll，点击确定
![选择工具箱项对话框](../Images/160ea13b076e9b3d1aba701d0100f3d8.png)

而且..就是这样。

![扩展的 WPF 工具包工具箱选项卡](../Images/a90febf2de1aca99477631e055bd0516.png)

# jquery - 如何在highchart中以编程方式更改柱形图的工具提示

> ID：11115194
> 
> 赞同：2
> 
> 时间：2012-06-20T07:58:44.773
> 
> 标签：jquery, highcharts, jquery-events

我有一个向下钻取图表，其中前三个级别是柱形图，第四级是饼图，我希望在每个级别都应该更改工具提示。我无法以编程方式更改它。是否有任何功能可以更改工具提示。这是代码 -

```
var chartLevel = 0; //gloabal variable
function drawYearlyChart(val)
{
  var arr = val.toString().split("\n");
  var chart;
  var colors = Highcharts.getOptions().colors,
      categories = eval(arr[0].toString()),
      name = 'Yearly Report',
      data = eval(arr[1].toString());

  function setChart(name, categories, data, color,type) {
    chart.xAxis[0].setCategories(categories);
    chart.series[0].remove();
    chart.setTitle();
    if(chartLevel==1)
    {
      chart.yAxis[0].axisTitle.attr({text: 'Number of question'});

      //Here i want some function to change the tooltip of column chart
    }
    chart.addSeries({
      name: name,
      data: data,
      color: color || colors[0],
      type: type || 'column'
    });
    if(chartLevel==3)
    {
      chartLevel = 0;
      chart.yAxis[0].axisTitle.attr({text: 'Number of sessions'});
    }
    else
      chartLevel++;
  }

  chart = new Highcharts.Chart({
    chart: {
      renderTo: 'chart',
      type: 'column'
    },
    title: {
      text: 'Your yearly report till now'
    },
    subtitle: {
      text: 'Click the columns to view report for that particular period.'
    },
    xAxis: {
      categories: categories
    },
    yAxis: {
      title: {
        text: 'Number of session'
      },
      allowDecimals: false,
      id: 'yXis'
    },
    plotOptions: {
      column: {
        cursor: 'pointer',
        point: {
          events: {
            click: function() {
              var drilldown = this.drilldown;
              if (drilldown) { // drill down
                setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color,drilldown.type);
              } else { // restore
                setChart(name, categories, data);
              }
            }
          }
        },
        dataLabels: {
          enabled: true,
          color: colors[0],
          style: {
            fontWeight: 'bold'
          },
          formatter: function() {
            return this.y +'';
          }
        },
        tooltip: {
          pointFormat: '<span style="color:{series.color}">{point.name}</span>: <b>{point.y}</b><br/>Click to view {point.name} report',
          valueSuffix: ' Sessions'
        }
      },
      pie: {
        showInLegend: true,
        dataLabels: {
          enabled: true,
          formatter: function(){
            return (this.y+' Questions<br>'+this.percentage+'%');
          }
        },
        tooltip:{
          pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/> Click to return to yearly report',
          valueSuffix: ' quesitons'
        },
        events: {
          click: function(){
            var drilldown = this.drilldown;
            if (drilldown) { // drill down
              setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color,drilldown.type);
            } else { // restore
              setChart(name, categories, data);
            }
          }
        }
      }
    },
    series: [{
      name: name,
      data: data,
      color: '#4572A7'
    }],
    exporting: {
      enabled: false
    }
  });
} 
```

任何建议或解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:11:34.883

您可以使用工具提示格式化程序功能更改工具提示的内容。有关详细信息和示例，请参阅文档：http: [//api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

此函数在其上下文 ( `this.myProp`) 中获取多个属性，您可以使用它们在任何图表系列上创建所需的输出。

# c# - c# does 1.09:00:00 timespan mean 9am tomorrow?

> ID：11115195
> 
> 赞同：1
> 
> 时间：2012-06-20T07:58:48.983
> 
> 标签：c#, datetime, timer, timespan

I have a routine which is suppose to run at 9am everyday....

```
protected override void OnStart(string[] args)
{
   log.Info("Info - Service Start");
   string timeToRunStr = "09:00";
   var timeStrArray = timeToRunStr.Split(';');
   foreach (var strTime in timeStrArray)
   {
        timeToRun.Add(TimeSpan.Parse(strTime));
   }
    ResetTimer();
}

void ResetTimer()
{
   log.Info("Info - Reset Timer");
   try
   {
       TimeSpan currentTime = DateTime.Now.TimeOfDay;
       TimeSpan nextRunTime = timeToRun[0];
       foreach (TimeSpan runTime in timeToRun)
       {
           if (currentTime < runTime)
           {
               nextRunTime = runTime;
               // log.Info("Info - in loop");
               _timer = new Timer((nextRunTime - currentTime).TotalSeconds * 1000);
               break;
           }
           else {
             TimeSpan test = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 16, 51, 0).AddDays(1).Subtract(DateTime.Now);
             nextRunTime = test;
              _timer = new Timer((nextRunTime).TotalSeconds * 1000);
            }
        }               
        log.Info("Info - Timer : " + (nextRunTime - currentTime).TotalSeconds * 1000);
        log.Info("Info - nextRuntime : " + nextRunTime);
        log.Info("Info - currentTime : " + currentTime);
        _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        _timer.Start();
    }
    catch (Exception ex)
    {
        log.Error("This is my timer error - ", ex);
    }
} 
```

it runs at 9am then next run time it says 1.09:00:00 does this mean 9am tomorrow?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T08:02:58.170

1.09:00:00 表示时间跨度为 1 天 9 小时

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:18:08.093

从[MSDN 文档：](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

> TimeSpan 值可以表示为 [-]d.hh:mm:ss.ff，其中可选的减号表示负时间间隔，d 分量是天，hh 是按 24 小时制测量的小时数，mm是分钟，ss 是秒，ff 是秒的分数。也就是说，时间间隔由正数或负数的天数组成，没有一天中的时间，或者包含一天中的时间的天数，或者只有一天中的时间。

在您的实例中，TimeSpan 为 1 天 9 小时 0 分钟和 0 秒。

回答您的实际问题：

> 它在上午 9 点运行，然后下一个运行时间显示 1.09:00:00 这是否意味着明天上午 9 点？

这取决于 - 如果您将时间跨度添加到当前时间（即当前批次完成时），它将为您提供第二天下午 6 点左右的时间。您需要使用 DateTime.Now.Date （给定日期的午夜）并将时间跨度添加到第二天早上 9 点。

但是，那里有很多[调度](http://quartznet.sourceforge.net/) [组件](http://code.google.com/p/ncron/)，您可能会发现它们更易于使用（或至少阅读其代码）——这取决于您对准确性和恢复的要求。

在您的原始方法中，您可能会发现更简单：

```
protected override void OnStart(string[] args)
{
   log.Info("Info - Service Start");
   DateTime startTime = DateTime.Date.AddHours(9); //9AM Today
   timeToRun.Add(startTime); 
   CreateTimer();
}

void CreateTimer()
{
   log.Info("Info - Reset Timer");
   try
   {
      if(_timer == null){
         _timer = new Timer(3600 * 1000); //once an hour
         _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
         _timer.Start();
      }
    }
    catch (Exception ex)
    {
        log.Error("This is my timer error - ", ex);
    }
} 
```

然后，在您的 timer_elapsed 事件中，您只需执行以下操作（请原谅事件签名，它来自内存）：

```
void timer_Elapsed(object sender, ElapsedEventArgs e)
{
   if(DateTime.Now > timeToRun[0])
   {
      //Code to run the job
      //Then we reset the timer - can do this here or at the end of the job code
      timeToRun[0] = DateTime.Date.AddDays(1).AddHours(9); //9AM tomorrow.
    }

 } 
```

你的重置计时器太复杂了——你不需要所有的代码。您只需创建一个计时器，让它每小时检查一次，如果现在时间大于作业运行时间，则运行作业，并将下一个运行时间移至明天上午 9 点。对于像这样的简单计时器，这就是您需要做的一切。

这种方法的问题包括它不是细粒度的。这项工作可能不会在上午 9 点开始，所以如果这**很**重要，最好调查我提到的链接调度库之一。

# facebook - 如何检查 facebook 用户是否是我页面的粉丝？

> ID：11115203
> 
> 赞同：0
> 
> 时间：2012-06-20T07:59:32.470
> 
> 标签：facebook, facebook-graph-api, facebook-like

我创建了一个 Facebook 应用程序，我想检查当前的 facebook 用户是否是我的 facebook 页面的粉丝（使用 Javascript）。此验证必须在 facebook 应用程序中完成。

最好的祝福

* * *

我正在尝试代码：

```
function isEmptyObj(obj) {
for(var prop in obj) {
    alert(prop);
    if(obj.hasOwnProperty(prop))
        return false;
}

return true; 
```

}

```
window.fbAsyncInit = function() {

          FB.init({
            appId      : 'APP_ID',
            status     : true, 
            cookie     : true,
            xfbml      : true,
            oauth      : true,
          });
          var page_id = "PAGE_ID";

              FB.api('/me/likes/' + page_id,function(response) {

                if( response.data ) {
                    if( !isEmptyObj(response.data) )
                        alert('You are a fan!');
                    else
                        alert('Not a fan!');
                } else {
                    alert('ERROR!');
                }
            });

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:13:04.463

为了`like`使用 JavaScript SDK 检查用户的状态，您需要让用户使用`user_likes`权限登录到您的应用程序。

另一种方法（不需要用户登录或请求权限）是使用服务器端语言来解析[`Signed Request`](https://developers.facebook.com/docs/authentication/signed_request/)Facebook 传递给 Facebook 内部运行的任何应用程序的信息。解析的签名请求将包含一个布尔值，指示用户是否喜欢该页面。只有当您使用的应用程序已作为页面选项卡应用程序嵌入页面时，该值才会出现。

# objective-c - 如何分配卡片，直到整个卡片堆/包根据洗牌/随机数字分配，只需单击一个按钮？

> ID：11115205
> 
> 赞同：0
> 
> 时间：2012-06-20T07:59:40.067
> 
> 标签：objective-c, random, shuffle, arc4random, playing-cards

我正在创建我的第一个纸牌游戏，需要洗牌。因此，对于初学者，我为包含 4 个值的示例堆栈创建了一个随机播放按钮，其中包含以下行：

```
int i = arc4random() % 4;
NSLog(@"%d", i); 
```

洗牌效果很好，但我希望这个按钮允许用户分发随机牌，直到堆栈中没有更多牌为止。每次单击此示例按钮时，我都需要`NSLoged`结果类似于 3，然后是 1，然后是 0，然后是 2，然后是“没有更多卡片”，例如（而不是四个随机数的列表和一条消息）。

是否有一种简单的方法可以在每次单击按钮时随机“分配一个数字”？

另外，会`arc4random`生成实随机数还是伪随机数？我已经阅读了很多关于它的主题，但似乎并不那么清楚。随机化数字的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:49:35.453

您可以创建一个包含随机空间中所有可能元素的数组，例如：

```
NSMutableArray *randomNumber = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithInt:0], [NSNumber numberWithInt:1],[NSNumber numberWithInt:2],[NSNumber numberWithInt:3], nil]; 
```

然后，您随机获取数组的元素，然后在以下情况下删除它们：

```
for (int i = 0; i < 4; i++){

int randIndex = arc4random()%[randomNumber count];
NSLog(@" %d %d", randIndex, [[randomNumber objectAtIndex:randIndex] intValue]);
[randomNumber removeObjectAtIndex:randIndex];
} 
```

# store - 将查询结果存储在文件中

> ID：11115207
> 
> 赞同：0
> 
> 时间：2012-06-20T07:59:59.500
> 
> 标签：store, elasticsearch

无论如何将Elasticsearch输出存储在文件中？例如，在 .txt 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:06:25.287

如果您从事 .Net 项目，XML 文件将是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:29:23.917

您必须使用[滚动](http://www.elasticsearch.org/guide/reference/api/search/scroll.html)和[JAVA Api](http://www.elasticsearch.org/guide/reference/java-api/search.html)来从 ES 中获取所有文档。然后，您可以直接将这些 JSON 字符串写入 txt 文件，也可以解析它们并以 csv 或其他格式存储。

# dijkstra - 使用 Gremlin 的 Dijkstra 算法

> ID：11115210
> 
> 赞同：2
> 
> 时间：2012-06-20T08:00:15.473
> 
> 标签：dijkstra, orientdb, gremlin

我想在 Gremlin 中实现 Dijkstra 的算法，以创建一个仅包含最短路径的全网格图。

我在 OrientDB 数据库之上使用 Gremlin。由于Furnace中的最短路径算法还没有实现，所以需要自己实现。我了解 Gremlin 的基本工作原理，但我目前坚持使用它。

我也可以用 Java 编写它，但我需要 Gremlin 解决方案的灵活性。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:41:13.133

查看[https://github.com/tinkerpop/rexster/issues/144](https://github.com/tinkerpop/rexster/issues/144)。它使用 Neo4J 但 OrientDB 实现了相同的 API，所以它是相同的。

# c - 参数类型之间的区别

> ID：11115211
> 
> 赞同：5
> 
> 时间：2012-06-20T08:00:18.203
> 
> 标签：c

以下两个函数定义有什么区别？
二维数组作为参数传递。

```
void fun(int a[][3])
{
   //do some task
}

void fun(int (*a)[3])
{
   //do some task
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T08:01:33.650

没什么，`[]`只是指针的语法糖。

这是一个简单的测试用例，表明索引甚至没有区别：

```
#include <stdio.h>

void fun1(int a[][3]) { printf("%d\n", a[2][2]); }
void fun2(int (*a)[3]){ printf("%d\n", a[2][2]); }

void main() {
  int a[3][3] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
  fun1(a);  // prints 9
  fun2(a);  // prints 9
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T08:03:49.920

没什么，两者都是一样的。只是为了我们的说服目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:07:49.573

以上两者没有区别。**在 C 中，当数组表示法用于函数参数时，它会自动转换为指针声明**。

# c# - 在 html 中插入分页符以在某些元素之后同步融合 pdf 报告

> ID：11115215
> 
> 赞同：1
> 
> 时间：2012-06-20T08:00:33.817
> 
> 标签：c#, asp.net, c#-3.0, syncfusion, html-to-pdf

我试图在使用此代码的某些元素后打破页面

```
 <p style=\"page-break-after:always\"> 
```

我正在使用 syncfusion pdf 报告生成器

因此，在内容中，我有几条记录要在 PDF 中显示。

现在我希望这些单独的记录显示在同一页面中，这意味着我不想显示相关内容出现在两个页面上。

如果当前页面没有足够的空间，则整个内容将转移到下一页，而不是分成两页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:25:30.773

You can turn on or off detection of page breaks in HTML using the AutoDetectPageBreak property.

```
using (HtmlConverter html = new HtmlConverter())
{
 // Enable auto detect page break.
 html.AutoDetectPageBreak = true;

 // Convert here
} 
```

If set to false, the converter will split the pages based on the size of PdfPage.

# javascript - jquery对话框中的ckeditor实例

> ID：11115221
> 
> 赞同：1
> 
> 时间：2012-06-20T08:01:14.940
> 
> 标签：javascript, jquery, ckeditor, jquery-ui-dialog

我的问题是当我在查询对话框中创建 ckeditor 时，我无法编辑或添加文本（它没有获得焦点）。

我尝试了相关问题中的所有解决方案，例如在对话框打开时创建 ckeditor 的实例，我还尝试删除所有显示和隐藏对话框的效果......仍然存在问题。您认为解决方案可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:37:11.257

在测试了所有可能性之后，我从对话框中删除了效果，然后在头部添加了一个补丁 js 文件，该文件包含在此[链接](http://bugs.jqueryui.com/attachment/ticket/4727/dialog-patch.js)中的 jquery bugs 中。

# css - 如何正确包含 symfony 的样式表？

> ID：11115222
> 
> 赞同：1
> 
> 时间：2012-06-20T08:01:23.557
> 
> 标签：css, symfony1, symfony-1.4

我有一个简单的模板（layout.php），我使用 Propel 作为 ORM。

当我在函数中包含样式表（到 layout.php 中）时：`include_stylesheets()`我变成了 2 个 css：

> /sfPropelORMPlugin/css/global.css
> 
> /sfPropelORMPlugin/css/default.css

为什么？

当我查看我的 view.yml 实际上我只有这个：

```
default:
  http_metas:
    content-type: text/html
  stylesheets:
  has_layout:     true
  layout:         layout 
```

我没有配置样式表，但我在我的 Head Tag 中看到了 Propel css！

我的**generator.yml**：

```
generator:
 class: sfPropelGenerator
 param:

 ##CONFIG##

config:
  actions: ~
  fields:  ~
  list:    ~
  filter:  ~
  form:    ~
  edit:    ~
  new:     ~ 
```

这是一个错误吗？还是只是配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:14:24.377

这主要是因为当您使用管理模板时会自动加载（[请参阅此文件](https://github.com/propelorm/sfPropelORMPlugin/blob/master/data/generator/sfPropelModule/admin/template/templates/_assets.php)）：

```
<?php if (isset($this->params['css']) && ($this->params['css'] !== false)): ?>
  [?php use_stylesheet('<?php echo $this->params['css'] ?>', 'first') ?]
<?php elseif(!isset($this->params['css'])): ?>
  [?php use_stylesheet('<?php echo sfConfig::get('sf_admin_module_web_dir').'/css/global.css' ?>', 'first') ?]
  [?php use_stylesheet('<?php echo sfConfig::get('sf_admin_module_web_dir').'/css/default.css' ?>', 'first') ?]
<?php endif; ?> 
```

这意味着您可以在中定义自己的 css `generator.yml`（并且它不会加载默认的 css），例如：

```
generator:
  class: sfPropelGenerator
  param:
    css:          /css/my_css.css 
```

或删除它们：

```
generator:
  class: sfPropelGenerator
  param:
    css:          false 
```

**编辑：**

最后，您可以将它们从`view.yml`：

```
default:
  http_metas:
    content-type: text/html
  stylesheets:
    - -/sfPropelORMPlugin/css/global.css
    - -/sfPropelORMPlugin/css/default.css
  has_layout:     true
  layout:         layout 
```

# android - 如何解析具有多个节点的 XML？

> ID：11115224
> 
> 赞同：-5
> 
> 时间：2012-06-20T08:01:29.250
> 
> 标签：android

我想简单地使用任何解析方法来解析 XML；我有以下格式的 XML。

下面是我的 XML 示例。我已经使用 DOM Parser 进行了尝试，但没有成功：

```
 <Main>
      <name> 
          <firstname>ABC</firstname>
          <lastname>XYZ</lastname>
     </name>
   <address>
      <homeaddress>
              <pobox>PQR</pobox>
               <city>MNQ</city>
       </homeaddress>
       <officeaddress>      
               <pobox>JKL</pobox>
               <city>URI</city>
            </officeaddress>
     </address>
  <Main> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:23:11.347

我正在向您展示我解析数据的方式；希望你能在你的实现。

**allClientParser.java**

```
import java.io.IOException;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class allClientParser {

    public Client parseByDOM(String response)
            throws ParserConfigurationException, SAXException, IOException {

        Client c = new Client();

        try {

            DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();

            Document doc = dBuilder.parse(new InputSource(new StringReader(
                    response)));
            doc.getDocumentElement().normalize();
            NodeList nList = doc.getElementsByTagName("row");

            c.length = nList.getLength();
            for (int temp = 0; temp < nList.getLength(); temp++) {
                Node nNode = nList.item(temp);

                if (nNode.getNodeType() == Node.ELEMENT_NODE) {
                    Element eElement = (Element) nNode;
                    c.clientdata[temp][1] = getTagValue("client_id", eElement);
                    c.clientdata[temp][2] = getTagValue("name", eElement);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return c;
    }

    private static String getTagValue(String sTag, Element eElement) {
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0)
                .getChildNodes();

        Node nValue = (Node) nlList.item(0);

        return nValue.getNodeValue();
    }
} 
```

**客户端.java**

```
public class Client {

    public int length;
    public String clientdata[][] = new String[500][500];
} 
```

`XML`现在从 main 方法中，我们只需要通过像这样 传递你的字符串来调用它::

```
Client abc;
allClientParser cl=new allClientParser();
abc=cl.parseByDOM(pass your xml as String here); 
```

现在您可以像这样访问您的数据::

```
String name=abc.clientdata[x][y]; 
```

# c# - 从抽象类反映实现的私有方法？

> ID：11115229
> 
> 赞同：2
> 
> 时间：2012-06-20T08:01:40.390
> 
> 标签：c#, reflection

如何将私有方法称为一个类的基础？

这是我的结构的基本示例（该代码包含在参考中）：

```
public abstract class Something {
}
internal class ImplBase : Something {
    private void CallMe(string s) {}
}
internal class RealImpl : ImplBase {
} 
```

到目前为止，我有一个`RealImpl`可见的实例`Something`。如何访问该方法`CallMe`？

我在这里尝试这段代码：

```
Type type = obj.GetType(); // returns RealImpl
bool supported = false;
// a loop to be a little more flexible
for(Type t = type; t.Name != "Object"; t = t.BaseType) {
    if(t.Name == "ImplBase") {
        supported = true;
        type = t;
        break;
    }
}
if(supported) {
    var callme = type.GetMethod("CallMe", BindingFlags.NonPublic | BindingFlags.Instance, null, new Type[] { typeof(string) }, new ParameterModifier[] {});
    callme.Invoke(obj, new object[] { "hi" });
} else {
    throw new NotSupportedException("The type " + type.Name + " is not supported.");
} 
```

如果我注释掉，`type = t;`我会得到`callme`一个`null`价值。如果我使用像这里这样的代码，我会得到一个关于 internal 的异常大喊大叫`NullReferenceException`。

* * *

`NullReferenceException`到目前为止，我的hack 我在 lib 内部生成了一个我的错。上面的代码现在已经修复（简化时有 3 个错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:05:58.440

如果您需要子类调用其基类的方法，您需要将这些方法声明为，`protected`或者您需要基类中的某种其他方法作为私有方法的代理。

```
public abstract class Something {
}
internal class ImplBase : Something {
    protected void callMe(string s) {}
}
internal class RealImpl : ImplBase {
} 
```

或者

```
public abstract class Something {
}
internal class ImplBase : Something {
    private void callMe(string s) {}
    public void CallMe(string s) { this.callMe(s);}
}
internal class RealImpl : ImplBase {
} 
```

据我所知，反射仅适用于公共成员/方法/等。反正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:18:37.840

您的方法名为`callMe`，而不是`CallMe`，因此将其更改为：

```
var callme = type.GetMethod("callMe"... 
```

也调用它`obj`（不确定是什么`self`）：

```
callme.Invoke(obj, new object[] { "hi" }); 
```

此外，您不需要所有代码来确定是否`obj`是`ImplBase`：

```
if(obj is ImplBase) 
{
    var callme = type.GetMethod("callMe", BindingFlags.NonPublic | BindingFlags.Instance, null, new Type[] { typeof(string) }, new ParameterModifier[] {});
    callme.Invoke(obj, new object[] { "hi" });
} 
```

# c# - 如果类在 Protobuf-net 中没有属性，有没有办法只序列化公共字段？

> ID：11115230
> 
> 赞同：2
> 
> 时间：2012-06-20T08:01:42.163
> 
> 标签：c#, .net, protobuf-net

Protobuf-net 可以选择序列化类的公共字段

```
[ProtoContract(ImplicitFields = ImplicitFields.AllPublic)]
public class Customer
{

} 
```

为了使 ProtoBuf 能够适用于大多数 DTO，我必须将此属性添加到每个类。有没有办法全局设置它，所以如果被序列化的类没有任何属性，如 ProtoContract 或 DataContract，它会默认使用“ImplicitFields.AllPublic”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:18:34.567

不，目前不支持。但是，在 v2 中，您*可以*通过以下方式在运行时告诉它类型

```
RuntimeTypeModel.Default.Add(typeof(Customer), false).Add({fields}); 
```

但目前没有一个可以接受的选项`ImplicitFields`（这只是一个疏忽，将在未来的构建中添加）。

我还与一些人讨论过添加一个在第一次看到新类型时触发的事件，这将允许您通过订阅事件来做到这一点。不过，这还没有写出来。

# algorithm - 当集合太多时，例如 2^n 集合，集合覆盖中是否有任何近似算法？

> ID：11115240
> 
> 赞同：2
> 
> 时间：2012-06-20T08:02:48.300
> 
> 标签：algorithm, set-cover

我最近正在研究一个我认为是集合封面问题的分支的问题。但是，我的问题中的集合数高达 2^n。而且我发现的近似算法似乎只有在没有太多集合的情况下才有效。我想知道是否存在适合 2^n 组的算法？

谢谢你的回答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:24:13.380

不，没有比对数更好的近似值了。见[维基](http://en.wikipedia.org/wiki/Set_cover_problem#Inapproximability_results)：

> 不可近似性结果表明，在合理的复杂性假设下，贪心算法本质上是集合覆盖的最佳可能多项式时间逼近算法。Lund & Yannakakis (1994) 表明集合覆盖不能在多项式时间内逼近到 0.72 ln(n) 的因子内，除非 NP 具有准多项式时间算法。

# vim - vim中项目列表的智能硬包装

> ID：11115248
> 
> 赞同：2
> 
> 时间：2012-06-20T08:03:20.980
> 
> 标签：vim

我喜欢 vim，而且我真的很喜欢在编写文本时对它们进行硬包装。Tim Pope 的 markdown 插件很棒，它的构建使得当我尝试硬包装一个项目列表时，它可以正确地完成工作。好的，这就是我正确完成工作的意思：

```
- here I write a long long long line that is longer than the 80 caracters of a line and therefore should be wrapped.
- This is a short line
- here I write another long long long line that is longer than the 80 caracters of a line and therefore should be wrapped. 
```

应该变成（应用gqap之后）：

```
- here I write a long long long line that is longer than the 80 caracters
  of a line and therefore should be wrapped.
- This is a short line
- here I write another long long long line that is longer than the 80 caracters
  of a line and therefore should be wrapped. 
```

现在，对于具有 tex 文件类型的文本，同一命令的行为并不那么聪明：

```
\begin{itemize}
\item here I write a long long long line that is longer than the 80 caracters I fixed and therefore should be wrapped.
\item This is a short line
\item here I write another long long long line that is longer than the 80 caracters I fixed and therefore should be wrapped.
\end{itemize} 
```

变为（仍然在 gqap 之后）：

```
\begin{itemize} \item here I write a long long long line that is longer than
        the 80 caracters I fixed and therefore should be wrapped.  \item This
        is a short line \item here I write another long long long line that is
        longer than the 80 caracters I fixed and therefore should be wrapped.
\end{itemize} 
```

如何使 LateX 中项目列表的包装表现得像降价列表？

在我看来，我应该重新定义语法文件，但我不知道如何（markdown 的工作方式是使用为 HTML 定义的元素）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T08:35:53.457

### 配置

```
:set fo+=n
:let &flp='^\s*\\\w*\s*' 
```

* * *

### 输入

```
\begin{itemize}
    \item here I write a long long long line that is longer than the 80 caracters I fixed and therefore should be wrapped.
    \item This is a short line
    \item here I write another long long long line that is longer than the 80 caracters I fixed and therefore should be wrapped.
\end{itemize} 
```

* * *

### 类型

`gggqG`.

* * *

### 输出

```
\begin{itemize}
    \item here I write a long long long line that is longer than the 80
          caracters I fixed and therefore should be wrapped.
    \item This is a short line
    \item here I write another long long long line that is longer than the 80
          caracters I fixed and therefore should be wrapped.
\end{itemize} 
```

# php - 使用 PHP 在 Excel 中添加换行符/（回车？）返回

> ID：11115250
> 
> 赞同：0
> 
> 时间：2012-06-20T08:03:23.477
> 
> 标签：php, excel, special-characters

我正在使用 将某些内容从 PHP 导出到 Excel `BIFFWriter`，但我很难在一个 Excel 单元格中获得多行。我正在将纯数据转换为 Excel，但某些行应在其中一个单元格中包含多行。例如：用户列表和他们连接的组。所有组都应该在一个单元格中的某种“列表”中。

我尝试输入换行符 ( `\n`) 和`chr(10)`，但效果不佳。在本例中，所有组都出现在 1 行。*但是*，当我单击单元格时，单元格神奇地添加了换行符，问题似乎得到了解决。

是否有任何字符会“强制”Excel 立即“打开”单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:16:08.447

尝试使用这个：“hello” & Chr(10) & “how” & Chr(10) & “are...”

您必须保持文字自动换行，然后自动调整高度，以便所有内容都可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:15:59.253

Mark Ba​​ker 给出了正确的解决方案：将“文本换行”选项/属性设置为 1。

# string - 如何在 WP7 Silverlight 中使字符串中的每个单词都以大写字母开头？

> ID：11115251
> 
> 赞同：0
> 
> 时间：2012-06-20T08:03:24.083
> 
> 标签：string, silverlight, windows-phone-7

我试过一些代码，比如

```
string s = "this is example";
txt1TextBlock.Text = Thread.CurrentCulture.TextInfo.ToTitleCase(s); 
```

但似乎 WP7 Silverlight 它是不同的..

有什么办法吗？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:06:08.820

试试下面的，

```
String s = "this is example";
string result = "";
string[] words = s.Split(' ');
for (int i = 0, l = words.Length; i < l; ++i)
{
     result = result + words[i][0].ToString().ToUpper() + words[i].Substring(1) + " ";
}
MessageBox.Show("Old Value: "+s+" New Value: "+result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:43:50.820

因为我们在 Silverlight windows phone 的 String 类中没有 Split 方法。您应该使用基本的字符串函数，如 SubString()、Append()、Replace()、ToUpper() 和 ToLower()。

请参考以下教程..

[http://www.c-sharpcorner.com/UploadFile/stephenarmbrust/FunctiontoChangeaBlockofTextofTitleCase11232005231948PM/FunctiontoChangeaBlockofTextofTitleCase.aspx](http://www.c-sharpcorner.com/UploadFile/stephenarmbrust/FunctiontoChangeaBlockofTextofTitleCase11232005231948PM/FunctiontoChangeaBlockofTextofTitleCase.aspx)

# mysql - 使用 MySQL 数据库自动安装 .net 项目

> ID：11115253
> 
> 赞同：2
> 
> 时间：2012-06-20T08:03:31.650
> 
> 标签：mysql, visual-studio-2010, installation

对于我的 uni 项目，我制作了一个使用 MySQL 数据库的 C# 程序。现在来看，我认为选择 MySQL 并不是最好的解决方案……至少从用户的角度来看……是的，会有这个程序的实际用户（为我欢呼！），但是安装过程是有点问题，因为用户必须安装所有依赖项（C++ 运行时、.net 环境、MySQL、ODBC 连接器、MySQL 和数据库）。虽然我创建了一个[小手册](https://docs.google.com/viewer?authuser=0&srcid=0B_L8BtHAY1E8MWptTUczWi13ZE0&pid=explorer&a=v&chrome=false&embedded=true)，但我更愿意介绍一些更简单的东西。虽然我找到[了自动安装程序](http://www.softpedia.com/get/Authoring-tools/Setup-creators/Auto-Installer.shtml)，它所做的只是复制文件。iExpress.exe 似乎只运行一个文件......而且仍然存在安装数据库而不在 MySQL 工作台中打开 mwb 的问题（我确实有某个 .sql 文件实际上用于将其转发到数据库） . 你们能给我一些指示吗？

编辑：我已经开始在 VS [http://support.microsoft.com/kb/307353](http://support.microsoft.com/kb/307353)中创建安装包我不认为我可以在那里设置订单并且仍然没有解决数据库安装的问题

EDIT2：似乎 MySQL 在这里是一条死胡同……是否有一种简单的方法可以将我当前的数据库移动到 SqlLite 或我可以嵌入的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:55:52.470

根据我们上面的评论线程：

在每个客户端上都有一个 MySQL 服务器实例有点矫枉过正。这种方法有几个问题。

1.  安装和配置将是一场噩梦。
2.  数据库服务器的维护也会有问题。服务器的备份、安全性和维护现在需要 DBA 前往客户端。

您需要查看嵌入式解决方案。一些解决方案可能是 SQLLite、SQL CE 甚至是旧的 Berkley DB。如果存储在客户端上的信息本质上不是那么相关，并且您不需要符合 ACID 的数据库，您可能希望将其存储在普通的旧文本文件甚至 XML 文件中。

本质上，您正在处理断开连接的记录集模型。应用程序工作不需要连接到服务器的地方。C# 确实允许您将记录集存储在 XML 文件中。例如，您可能有一个中央 MySQL 服务器将记录下载到客户端应用程序，并让客户端在本地处理记录。

当客户端完成其工作时，您可以（如果网络可用）将这些更改发布回 MySQL 服务器。

坏消息是，这将需要付出努力。这不会是重大的返工，但也不会是次要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:54:44.203

您可以从 mysql.com 下载 ODBC 的 mysql 驱动程序，并将应用程序配置为使用 ODBC 连接作为替代方案。

[http://dev.mysql.com/downloads/connector/](http://dev.mysql.com/downloads/connector/)

如果您不使用客户端-服务器架构，当然，您不应该使用客户端-服务器 DBMS。使用 sqlite 或 sql server CE

# android - textView中的java空指针错误

> ID：11115254
> 
> 赞同：0
> 
> 时间：2012-06-20T08:03:32.773
> 
> 标签：android, tabs, textview

我有这个代码：

```
public class InfoActions extends ActivityGroup{

TabHost tabHost;
TabSpec first;
TabSpec second;

View indicatorview1;
View indicatorview2;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    // ToDo add your GUI initialization code here
    setContentView(R.layout.infoactions);

    tabHost=(TabHost)findViewById(R.id.tabhostsynchronisation);
    tabHost.setup(getLocalActivityManager());
    tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);

    indicatorview1 = android.view.LayoutInflater.from(this).inflate(R.layout.tabs_bg_styled, null);

    first=tabHost.newTabSpec("Tab 1");
    ((TextView)indicatorview1.findViewById(R.id.tabsText)).setText("");
    first.setIndicator(indicatorview1);
    Intent in1 = new Intent(this, com.Orange.PrepareVisits.RoadmapsOnDevice.class);
    first.setContent(in1);

    indicatorview2 = android.view.LayoutInflater.from(this).inflate(R.layout.tabs_bg_styled, null);

    second=tabHost.newTabSpec("Tab 2");
    ((TextView)indicatorview2.findViewById(R.id.tabsText)).setText("Informations");
    second.setIndicator(indicatorview2);
    Intent in2 = new Intent(this, com.Orange.Information.Informations.class);
    second.setContent(in2);

    tabHost.addTab(first);
    tabHost.addTab(second); 
```

}

这是我的`tabs_bg_styled.xml`

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/tab_bg_selector"
    android:padding="10dp"
    android:gravity="center"
    android:orientation="vertical"
>
    <TextView
        android:id="@+id/tabsText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title"
        android:textSize="10dp"
        android:textStyle="bold"
        android:textColor="@drawable/tab_text_selector"
        android:gravity="center"
    />
</LinearLayout> 
```

这是日志：

```
ERROR   AndroidRuntime      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:130)
ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:3701)
ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:507)
ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
ERROR   AndroidRuntime  Caused by: java.lang.NullPointerException
ERROR   AndroidRuntime      at com.Orange.Information.InfoActions.onCreate(InfoActions.java:45)
ERROR   AndroidRuntime      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
ERROR   AndroidRuntime      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 
```

这是我得到错误的行：

```
 ((TextView)indicatorview1.findViewById(R.id.tabsText)).setText(""); 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:14:15.423

也许尽量不要在一行上完成所有工作（至少在它工作之前）。调试起来会更容易，并尝试像这样使用充气机（我总是这样使用它）：

```
LayoutInflater inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View vi = inflater.inflate(R.layout.tabs_bg_styled, null);
TextView tv = (TextView)vi.findViewById(R.id.tabsText); 
```

# c# - 如何从同一解决方案检查另一个项目的版本

> ID：11115256
> 
> 赞同：1
> 
> 时间：2012-06-20T08:03:47.300
> 
> 标签：c#, .net, reflection

我有一个 C# 解决方案，比方说`MySolution`，在这里面我有 2 个项目，比方说`ProjectA`和`ProjectB`. `ProjectA`用作 的参考`ProjectB`。

我怎样才能`ProjectB`从里面获取类里面的版本`ProjectA`？

我可以使用以下语法获取`ProjectB`代码内部的版本：`ProjectB`

`System.Reflection.Assembly.GetExecutingAssembly().GetName().Version`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T08:06:16.563

```
Type.GetType(assemblyQualifiedNameFromProjectB).Assembly.GetName().Version 
```

`instance.GetType().Assembly`或来自 ProjectB 的任何其他实例（通过）或某种类型。您还可以显式加载程序集，然后获取该程序集的版本。

# c++ - Clang、std::shared_ptr 和 std::less/operator<

> ID：11115265
> 
> 赞同：8
> 
> 时间：2012-06-20T08:04:25.550
> 
> 标签：c++, c++11, clang

有以下代码

```
#include <memory>

int main() {
    std::shared_ptr<int> ptr0( new int );
    std::shared_ptr<int> ptr1( new int );

    bool result = ptr0 < ptr1;
} 
```

使用 clang (version 3.1, LLVM 3.1, Debian GNU/Linux Sid) 编译时产生以下错误

```
/usr/bin/../lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/shared_ptr.h:364:14: error: no matching function for call to object of type 'std::less<_CT>'
      return std::less<_CT>()(__a.get(), __b.get());
             ^~~~~~~~~~~~~~~~
foo.cpp:9:21: note: in instantiation of function template specialization 'std::operator<<int, int>' requested here
        bool result = ptr0 < ptr1;
                           ^
/usr/bin/../lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_function.h:236:7: note: candidate function not viable: no known conversion from 'int *' to 'int *&&&' for
      1st argument;
      operator()(const _Tp& __x, const _Tp& __y) const
      ^ 
```

使用 GCC（4.7.0 版）编译相同的代码不会抛出任何错误消息。为什么 operator<() 不适用于 clang 中的共享指针，有什么原因吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T08:14:33.787

clang++ 和 libstdc++ 还不完全匹配。您可以执行以下操作之一：

*   切换到 libc++（使用`clang++ -stdlib=libc++ -std=c++11 ...`）
*   将以下补丁应用于`/usr/include/c++/4.7.0/type_traits`（如[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)中所述）：

    ```
    Index: include/std/type_traits
    ===================================================================
    --- include/std/type_traits (revision 185724)
    +++ include/std/type_traits (working copy)
    @@ -1746,7 +1746,7 @@

       template<typename _Tp, typename _Up>
         struct common_type<_Tp, _Up>
    -    { typedef decltype(true ? declval<_Tp>() : declval<_Up>()) type; };
    +    { typedef typename decay<decltype(true ? declval<_Tp>() : declval<_Up>())>::type type; };

       template<typename _Tp, typename _Up, typename... _Vp>
         struct common_type<_Tp, _Up, _Vp...> 
    ```

如果您检查`bits/shared_ptr.h`确实找到了 a `std::common_type`，并且clang 开发人员声称[它实际上是 libstdc++ 的错误](http://llvm.org/bugs/show_bug.cgi?id=12893#c1)，尽管我不相信仅 libstdc++ 的错误会导致出现不存在的类型`int*&&&`。

# ruby-on-rails - rails：防止闪烁消息显示两次

> ID：11115268
> 
> 赞同：38
> 
> 时间：2012-06-20T08:04:57.470
> 
> 标签：ruby-on-rails

为当前视图设置闪存消息但不为下一个请求显示它的正确方法是什么。换句话说，通常您设置 Flash 消息和重定向，并且 Flash 消息会显示在重定向上。我不想重定向，所以我需要确保 Flash 消息不会显示两次。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-20T08:07:19.750

```
flash.now[:notice] = 'message' 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-20T08:10:16.643

如果要“渲染”页面，请使用`flash.now[:notice]`，当您要“重定向”时，请使用`flash[:notice]`

# jquery - 为什么我的 Dynamics CRM On-Line jQuery oData 查询不起作用？

> ID：11115269
> 
> 赞同：0
> 
> 时间：2012-06-20T08:04:58.313
> 
> 标签：jquery, dynamics-crm-2011

我有一个网页需要使用 jQuery 从 Dynamics CRM2011 在线获取信息。作为测试，我刚刚尝试从测试系统中检索所有帐户。我使用了一些我在 CRM 产品中测试过的代码，它可以工作。

当我尝试在不在 CRM 域上的单独网页中运行相同的 jQuery 代码时，它不起作用（没有传输），所以我添加了 $.support.cors = true 行以允许跨站点脚本。现在，当它运行时，它会弹出一个对话框，询问凭据。但是，当我在线输入我的 CRM 凭据时，它不接受它们。经过三次尝试，我得到了错误，“未经授权”。

任何人都可以帮忙吗？

这是代码：

```
$(document).ready(function()
{

var request = "https://myorganisation.crm4.dynamics.com/XRMServices/2011/OrganizationData.svc/AccountSet";
$.support.cors = true;

$.ajax({
    type: "GET",
    contentType: "application/json; charset=utf-8",
    datatype: "json",
    url: request,
    async: false,
    beforeSend: 
        function (XMLHttpRequest) 
        { 
            XMLHttpRequest.setRequestHeader("Accept", "application/json"); 
        },
    success: 
        function (data, textStatus, XmlHttpRequest) 
        {
            var result = data.d.results[0];
            alert('Success');
            alert(result);
            alert(result.Name);
        },
    error: 
        function (XmlHttpRequest, textStatus, errorThrown) 
        { 
            alert(textStatus); 
            alert(errorThrown); 
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:29:36.600

oData 端点不支持跨站点请求。它旨在仅支持使用 Silverlight 或 JavaScript Web 资源在 CRM 应用程序中进行身份验证。

查看此[MSDN 文章](http://msdn.microsoft.com/en-us/library/gg334279.aspx)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:21:09.200

我想我前段时间遇到过类似的情况，该函数工作正常，但请求无法立即使用成功函数更新变量的值

这就是为什么我使用`always()`函数而不是成功来用接收到的值更新变量

新的 always 函数 = 请求完成后触发的旧函数

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> 从此页面：弃用通知：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

# mysql - 跨 4 个表的 MySQL 多对多选择

> ID：11115270
> 
> 赞同：0
> 
> 时间：2012-06-20T08:05:10.513
> 
> 标签：mysql, many-to-many, one-to-many

我需要一个 SELECT 查询适用于多对多和一对多关系。这就是我的意思：

我有 5 张桌子。

```
-Groups-
groupId | groupName
12 | Some Group

-users-
userId | userName
5 | SomeGuy
6 | SomeoneElse

-linker-
groupId | userID
12 | 5
12 | 6

-votes-
userid | votingUser | groupId
6 | 5 | 12

-comments-
commentId | groupId | userId | commentValue
45 | 12 | 5 | "SomeGuy said something" 
```

我正在尝试选择所有组、所有用户、计票并选择 2 条最新评论。

基本上，这个想法是用户可以对组中的用户进行投票，也可以对组发表评论。我有一种感觉，这比我做的要简单，但目前我发现它有点压倒性。

也许最好将其简单地拆分为多个查询？

我很感激任何建议。谢谢。

# opencv - CvMat 和 Imread 与 IpImage 和 CvLoadImage

> ID：11115272
> 
> 赞同：9
> 
> 时间：2012-06-20T08:05:13.120
> 
> 标签：opencv, opencvdotnet

**使用 OpenCv 2.4**

我有两个加载图像的选项：

```
 1- CvMat and Imread

  2- IpImage and CvLoadImage 
```

哪个更好用？我尝试将两者混合并最终出现段错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T08:38:04.550

`imread`返回 a `Mat`，而不是`CvMat`。它们是两个不同的接口（`Mat`/`imread`用于 C++ 和 Ipl... 和 Cv.. 用于 C 接口）。

C++ 接口更好、更安全、更易于使用。它会自动为您处理内存，并允许您为同一任务编写更少的代码。OpenCV 家伙提倡使用 C++，除非某些非常具体的项目要求迫使您使用 C。

示例 (C++)

```
cv::Mat image = imread("path/to/myimage.jpg")
if(image.empty())
    return;

cv::imshow("Image", image);

cv::Mat bw = image > 128; // threshold image
cv::Mat crop = image(cv::Rect(0, 0, 100, 100)); // a 100px x 100px crop
crop= 0; // set image to 0

cv::waitKey();
// end code here 
```

请注意，如果没有另外说明，所有矩阵分配都引用相同的数据。在上面的示例中，`crop`矩阵指向`image`，并将其设置为零会将 的特定部分设置`image`为 0。

要创建数据的新副本，请使用 Mat::copyTo 或 Mat::clone()；

和C接口

```
IplImage* pImg = CvLoadImage("path/to/myimage.jpg");
if(pImg == NULL)
    return;

// ... big bloat to do the same operations with IplImage    

CvShowImage("Image", pImg);
cvWaitKey();
CvReleaseImage(&pImg); // Do not forget to release memory.
// end code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:23:32.990

IplImage 和 Mat 都是可相互转换的。

我建议你使用 Mat 和 imread()，因为从 Mat 中获取数据非常容易。

Mat::data 返回一个指向一维实际矩阵数据的指针，并且这些值很容易访问。[http://opencv.itseez.com/modules/core/doc/old_basic_structures.html?highlight=mat#union%20data](http://opencv.itseez.com/modules/core/doc/old_basic_structures.html?highlight=mat#union%20data)

如果您想在 OpenCV 中为各种跟踪算法（例如 OpenTLD）添加机器学习概念，您可以使用 Mat.data 轻松访问数据以获取指向实际矩阵的指针。

OpenCV 的许多实用程序（例如 CalcOpticalFlowPyrLK 等）都需要 Mat。我建议你使用Mat。IplImage 现在是老东西了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:09:35.390

这取决于您对指针的舒适程度。在 IplImage 中，您可以访问数据为

```
 data[i*widthstep+j*nchannels +k] 
```

其中 i,j,k 是一些整数，这是非常简单的方法。在 3 维的普通矩阵中，访问数据并不容易。对于普通矩阵数据访问是针对 a[i][j]

```
 *(*(a + i) + j) is the value of jth element of ith row in matrix a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T23:03:48.527

来自 OpenCV_2 食谱：

此结构继承自 IPL 库（即英特尔图像处理库），现在与 IPP 库（英特尔集成性能原语库）集成。如果您使用使用旧 C 接口创建的代码和库，则可能需要操作这些 IplImage 结构。幸运的是，有一种方便的方法可以将 IplImage 转换为 cv::Mat 对象。

IplImage* iplImage = cvLoadImage("c:\img.jpg"); cv::Mat image4(iplImage,false);

函数 cvLoadImage 是用于加载图像的 C 接口函数。cv::Mat 对象的构造函数中的第二个参数表示数据不会被复制（如果需要新的副本，请将其设置为 true，而 false 是默认值，因此可以省略），即两者IplImage 和 image4 将共享相同的图像数据。您需要注意不要创建悬空指针。为此，将 IplImage 指针封装到 OpenCV 2 提供的引用计数指针类中会更安全：

cv::Ptr iplImage = cvLoadImage("c:\img.jpg");

否则，如果需要释放 IplImage 结构指向的内存，则需要显式执行： cvReleaseImage(&iplImage); 请记住，您应该避免使用这种过时的数据结构。相反，始终使用 cv::Mat。

# r - Kmeans 和 SAS：proc fastclus 如何超越、收敛和严格

> ID：11115273
> 
> 赞同：1
> 
> 时间：2012-06-20T08:05:13.770
> 
> 标签：r, statistics, cluster-analysis, k-means

这是我想在 R 中复制的 sas 代码，

```
proc fastclus data = in.stores_standard
maxclusters = 20
outseed= in.out_seed
maxiter = 1000
converge = 0 
strict=5.0; 
var storesize sales_per_sqft sales_per_visits tothhsinta;
id store_nbr;
run; 
```

我的尝试：

```
library(amap)
set.seed(1)
kmeans_object=Kmeans(stores_standard, 20, iter.max = 1000, nstart = 1, method = c("euclidean"))
p=do.call(rbind, kmeans_object) 
```

无法实现的目标：1) 仅对这些参数运行 kmeans：storesize、sales_per_sqft、sales_per_visits、tothhsinta

2) store_nbr 上的 id

3) R 中的种子函数

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:12:16.773

1）很容易：

```
want <- c("storesize", "sales_per_sqft", "sales_per_visits", "tothhsinta")
Kmeans(stores_standard[, want], 20, iter.max = 1000, nstart = 1,
       method = c("euclidean")) 
```

对于 2)

```
 ## a 2-dimensional example from ?Kmeans
 x <- rbind(matrix(rnorm(100, sd = 0.3), ncol = 2),
            matrix(rnorm(100, mean = 1, sd = 0.3), ncol = 2))
 colnames(x) <- c("x", "y")
 cl <- Kmeans(x, 2) 
```

现在看看`cl`：

```
R> str(cl)
List of 4
 $ cluster : int [1:100] 2 2 2 2 2 2 2 2 2 2 ...
 $ centers : num [1:2, 1:2] 1.0245 -0.017 1.0346 0.0375
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:2] "1" "2"
  .. ..$ : chr [1:2] "x" "y"
 $ withinss: num [1:2] 0.00847 0.22549
 $ size    : int [1:2] 50 50
 - attr(*, "class")= chr "kmeans" 
```

列表的`cluster`组成部分包含分配的集群 ID。这些与输入数据中的样本顺序相同。如果您想将`cluster`组件分配为输入数据中的列，我们将执行以下操作：

```
R> x <- cbind(x, Cluster = cl$cluster)
R> head(x)
               x            y Cluster
[1,] -0.24251497  0.532012889       2
[2,]  0.10957740  0.225168920       2
[3,] -0.35563544 -0.428798979       2
[4,] -0.41251306  0.529953489       2
[5,] -0.61212001 -0.003443993       2
[6,]  0.04435213  0.086595025       2 
```

对于您的数据，请执行以下操作：

```
stores_standard <- cbind(stores_standard, Cluster = kmeans_object$cluster) 
```

至于 3，这`kmeans()`在标准 R 和`Kmeans()`包**amap**中都不可能出现。

# image-processing - HDR是如何工作的，如何制作HDR效果

> ID：11115278
> 
> 赞同：0
> 
> 时间：2012-06-20T08:05:57.093
> 
> 标签：image-processing, hdrimages, hdr

我读过一篇博客[Histogram Equalization for Image Enhancement](http://www.cromwell-intl.com/3d/histogram/)，其中提供了将普通图像转换为 HDR 图像的 7 个步骤（如下）。据说可以使用 Open Computer Vision Library 或 OpenCV 轻松编写用于直方图均衡的 C/C++ 程序。该计划的主要步骤包括：

1.  读取输入图像。多亏了 OpenCV，这几乎可以是任何图像格式。此输入图像包含`n`像素：`n = height × width`

2.  从 RGB（奇怪地被 OpenCV 以蓝色、绿色、红色的顺序存储）转换为 HSV：色调、饱和度和值。

3.  计算输入图像的直方图。这是一个 256 值数组，其中`H[x]`包含具有 value 的像素数`x`。

4.  计算直方图的累积密度函数。这是一个 256 值数组，其中`cdf[x]`包含具有值`x`或更少的像素数： `cdf[x] = H[0] + H[1] + H[2] + ... + H[x]`

5.  循环遍历`n`整个图像中的像素并替换每个`i`'th 点的值：`V[i] <-- floor(255*(cdf[V[i]] - cdf[0])/(n - cdf[0]))`

6.  将图像从 HSV 转换回 RGB。

7.  以所需的格式和文件名保存图像。

在第 3 步，我不明白`H[x]`是什么？`x`是指 R、G、B 还是 H、S 或 V 值？另外，在第 5 步，值的含义是什么`i`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:22:59.057

**第一个问题：**

H(x) 是图像的直方图。

强度水平在 [0, 255] 范围内的数字图像的直方图是离散函数 h(r_k) = n_k，其中 r_k 是第 k 个强度值，n_k 是图像中强度为 r_k 的像素数。

来自：Gonzalez / Woods 的数字图像处理第三版，第 120 页

**第二个问题：我是什么？**

i 是在图片上循环的变量。

# mysql - 比较MySQL中的两个数据表

> ID：11115285
> 
> 赞同：0
> 
> 时间：2012-06-20T08:06:32.523
> 
> 标签：mysql, sql

有两张桌子

```
Table A
id column_a
01 abc
01 abc
02 abc
02 abc
02 abc
03 abc
03 abc
04 abc 
```

表 B

```
id column_b
01 abc
02 abc
02 abc
03 abc
04 abc 
```

我想比较上面的这两个表，并在表 a 中而不是在表 b 中得到结果，例如：

```
id column_a
01 abc
01 abc
02 abc
03 abc 
```

我怎么能在 MySQL 中做到这一点？

非常感谢！

更新

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:08:55.787

```
SELECT A.* FROM A
LEFT JOIN B ON A.column_a = B.column_b AND A.id = B.id
WHERE B.id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:21:40.740

尝试

```
SELECT A.* FROM A
LEFT JOIN B ON A.ID=B.ID AND A.column_a=B.column_b
WHERE B.ID IS NULL 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:25:04.273

试试这个：

```
select a.id,a.column_a
from (select count(*) as a_num, id,column_a 
from table_a group by id having count(*) > 1) as a 
left join (select count(*) as b_num, id from table_b group by id having count(*) > 1) as b 
on a.a_num > b.b_num; 
```

# delphi - delphi中如何使用.sys驱动函数

> ID：11115286
> 
> 赞同：1
> 
> 时间：2012-06-20T08:06:33.757
> 
> 标签：delphi, delphi-7

我有一个特定的驱动程序（防火墙驱动程序），我设法用 delphi 加载它，但我不知道如何在我的程序中调用他的函数。驱动程序上此功能的规范如下： 可以使用 DeviceIoControl (DDoSflt) IoControl 代码调用防火墙功能（DeviceIoControl 需要）如下：

```
0x2220c0 = IOCTL_START
Input:  none
Output: none 
```

加载驱动后，调用该函数安装防火墙钩子。

```
0x2220c4 = IOCTL_STOP
Input:  none
Output: none 
```

调用此函数可禁用防火墙而不卸载它。

```
0x2220c8 = IOCTL_DDOSADDIP
Input:  a DWORD containing an IP address
Output: none 
```

此功能通知防火墙正在进行 DDoS 攻击并将 IP 添加到 DDoS 过滤器。在调用 IOCTL_DDOSSTOP 之前，将过滤来自 DDoS 过滤器中的 IP 的所有流量。

```
0x2220cc = IOCTL_DDOSSTOP
Input:  none
Output: none 
```

此功能通知防火墙 DDoS 攻击已停止，该功能将删除 DDoS 过滤器。

```
0x2220d0 = IOCTL_BAN0
Input:  two DWORDs containing an IP range
Output: none 
```

此函数设置 IP 范围的禁令。

```
0x2220d4 = IOCTL_GETFLT
Input:  none
Output: DWORD 
```

此函数返回从 DDoS 过滤器中找到的 IP 发送的过滤 TCP/SYN 数据包的数量。2.防火墙使用的结构

2.1。防火墙参数信息

```
typedef struct _FirewallParametersInfo{
    WORD    pcapFlags;  // bit 0 = WinPCap is enabled, bit 1 = detection of adapters was completed (this WORD is not used by version 1.03 of DDoSflt)
    WORD    pcapAdapters;   // mask of enabled / disabled adapters used by WinPCap procedures (this WORD is not used by version 1.03 of DDoSflt)
    DWORD   pcapTimer;  // timeout for capturing packets using WinPCap procedures (not used by version 1.03 of DDoSflt)
    BYTE    pcapSyn;    // maximum number of TCP/SYN packets per second allowed from one IP
    BYTE    pcapUdp;    // maximum number of UDP packets per second allowed from one IP
    BYTE    pcapIcmp;   // maximum number of ICMP packets per second allowed from one IP
    BYTE    firewallFlags;  // bit 0 = firewall is registered
                // bit 1 = firewall is started
                // bit 2 = maximum SYN/second on hub's registered ports will be checked
                // bit 3 = maximum SYN/second on unregistered ports will be checked
                // bit 4 = ICMP traffic will be blocked
                // bit 5 = TCP/RST packets will not be sent (will be filtered)
                // bit 6 = if flood is detected, the application will call the firewall to set a _ban0_ (not used by firewall)
                // bit 7 = if flood is detected, a notification message will be sent in opchat (not used by firewall)
    WORD    hubSyn;     // maximum SYN rate allowed for one of registered hub's ports
    WORD    otherSyn;   // maximum SYN rate allowed for non-registered ports
} FirewallParametersInfo; 
```

2.2\. 端口信息

```
typedef struct _port_info{
    WORD    port;       // port value in network byte order
    int synRate;    // maximum number of TCP/SYN packets per second allowed from all users
} port_info; 
```

* * *

这是 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:28:48.387

您需要使用 CreateFile API 打开驱动程序的句柄，然后您将能够使用 DeviceIoControl 向驱动程序发送命令。

```
 function InstallAndStartDriver(DriverPath,DriverName: WideString; out DriverDevice : THandle): Boolean;
    var
      hSCManager, hService: THandle;
      lpServiceArgVectors: PWideChar;
    begin
      Result := False;
      hSCManager := 0;
      hSCManager := OpenSCManagerW(nil, nil, SC_MANAGER_ALL_ACCESS);
      if hSCManager <> 0 then
      begin
        try
          hService := 0;
          hService := CreateServiceW(hSCManager, DriverName, DriverName, SERVICE_ALL_ACCESS, SERVICE_KERNEL_DRIVER, SERVICE_DEMAND_START, SERVICE_ERROR_NORMAL, PWideChar(DriverPath), nil, nil, nil, nil, nil);
          hService := 0;
          lpServiceArgVectors := nil;
          hService := OpenServiceW(hSCManager, DriverName, SERVICE_ALL_ACCESS);
          if hService <> 0 then
          begin
            try
              if StartServiceW(hService, 0, PWideChar(lpServiceArgVectors)) then
              begin
                Result := True;
              end;
            finally
              CloseServiceHandle(hService);
            end;
          end;
        finally
          CloseServiceHandle(hSCManager);
        end;
      end;
      if Result then
      begin
      DriverDevice := CreateFileW(PWideChar('\\.\' + DriverName), GENERIC_READ or GENERIC_WRITE, 0, PSECURITY_DESCRIPTOR(nil), OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);
      Result := GetLastError() = ERROR_SUCCESS;
      end;
    end;

procedure TForm1.Button2Click(Sender: TObject);
var
  driver : THandle;
begin
  if InstallAndStartDriver('D:\mydriver.sys','Firewall',driver) then
    DeviceIoControl(...)
end; 
```

# tcl - 自动将命令分配给 Tcl/Tk 中的按钮

> ID：11115288
> 
> 赞同：0
> 
> 时间：2012-06-20T08:06:45.143
> 
> 标签：tcl, tk

我有一个代码，其中标签是从列表中自动创建的。我想将标签更改为按钮，并根据它们的类型分配给每个命令，并带有一些参数。我尝试这样做：

```
proc create_prop_menu {{inst ""}} {

    set wdth 90
    set w 20

    if {$inst == ""} {
        puts "please select a block first , then Propertires info "
    return
    }

    set cell [get_cell $inst]
    set cell_name [cell_get_name $cell]
    set inst_name [inst_get_name $inst]
    catch {destroy .prop_menu} 
    toplevel .prop_menu
    # Main Frame
    frame       .prop_menu.main_frame -relief "groove" -bd 2
    pack        .prop_menu.main_frame

    set lbl  [label .prop_menu.main_frame.cell_name_lbl -relief flat -text "Cell Name:" -width $w]
    set lbl2 [entry  .prop_menu.main_frame.cell_name -relief flat -width $wdth]
    $lbl2 insert 0 $cell_name
    $lbl2 configure -state readonly
    grid $lbl   -row 1  -column 1   -sticky nse
    grid $lbl2  -row 1  -column 2   -sticky nsw

    set r 2

    foreach fd [get_all_properties $cell] {
        set n [property_get_name $fd]
        if [cequal $n "value"] {
          set v [get_property $inst value]
        } else {
          set v [get_value_on_object $fd [get_id $cell]]
        }

        if ![cequal "NONE" $v] {
            set cmd ""
            if {[cequal $n "type"]} {
                set l "Type:"
                set t $v
            } elseif {[cequal $n "signals"]} {
                set l "Signals:"
                set t [qb_compress_names $v 1]
                set cmd [list "chose_net_from_prop" $n]
            } elseif {[cequal $n "clocks"]} {
                set l "Clocks:"
                set t [qb_compress_names $v 1]
                set cmd [list "chose_net_from_prop" $n]
            } elseif {[cequal $n "ref_supply"]} {
                set l "Reference Suply:"
                set t [qb_compress_names $v 1]
                set cmd [list "chose_net_from_prop" $n]
            } elseif {[cequal $n "stackup_file"]} {
                set l "Stackup File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "doe_file"]} {
                set l "DOE File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "lay_file"]} {
                set l "LAY File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "prs_file"]} {
                set l "PRS File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "netlist_file"]} {
                set l "NetList File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "ckt_file"]} {
                set l "CKT File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "sparam_file"]} {
                set l "S-Param File:"
                set t $v
                set cmd [list "chose_file_from_prop" $n]
            } elseif {[cequal $n "type_order"]} {
                set l "Type Order:"
                set t $v
                set cmd "chose_type_order_from_prop"
            } else {
                set l "NONE"
                    set t $v
            }
            #puts "$n -> $l -> $v"
            if {![cequal "NONE" $l]} {
                lappend cmd $inst
                if [cequal $l "Type:"] {
                    set lbl  [label  .prop_menu.main_frame.lbl_$n -relief flat -text $l -width $w]
                } else {
                    set lbl  [button .prop_menu.main_frame.lbl_$n -text $l -width $w -command "\{$cmd\}"]

                }
                set lbl2 [entry  .prop_menu.main_frame.val_$n -relief flat -width $wdth]
                $lbl2 insert 0 $t
                $lbl2 configure -state readonly
                grid $lbl  -row $r -column 1 -sticky nse
                grid $lbl2 -row $r -column 2 -sticky nsw

                set r [expr $r + 1]
            }
        }
    }
    set in "Instance_Name"
    set sep  [ttk::separator    .prop_menu.main_frame.sep       -orient horizontal]
    set lbl  [label .prop_menu.main_frame.inst_name_lbl -relief flat -text "Instance Name:" -width $w]
    set lbl2 [entry .prop_menu.main_frame.inst_name     -relief flat -width $wdth]
    $lbl2 insert 0 $inst_name
    $lbl2 configure -state readonly
    grid $sep   -row $r -columnspan 2
    grid $lbl   -row [expr $r+1] -column 1  -sticky nse
    grid $lbl2  -row [expr $r+1] -column 2  -sticky nsw 

    set ok_btn [button .prop_menu.main_frame.ok_b -text "OK" -command {prop_menu_ok_button}]
    grid $ok_btn -row [expr $r+2] -column 1 -columnspan 2 -sticky nsew

    grab release .
    grab set .prop_menu
    center_the_toplevel .prop_menu
    bind .prop_menu <Key-Return> {prop_menu_ok_button}
} 
```

但它不起作用。它所做的不是运行`chose_file_from_prop`带有参数的函数`lay_file $inst`，而是尝试运行一个被调用的函数`chose_file_from_prop lay_file $inst`并告诉我它不存在。

有没有办法克服它而不为每个可能的标签创建不同的函数并且不`$inst`进入全局变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:03:04.827

如果您使用 生成了命令`list`，则可以将其与 一起使用`-command`而无需进一步包装。不要把`{`/放在`}`它周围。

* * *

也就是说，而不是这样：

```
set lbl [button .prop_menu.main_frame.lbl_$n -text $l -width $w -command "\{$cmd\}"] 
```

写这个：

```
set lbl [button .prop_menu.main_frame.lbl_$n -text $l -width $w -command $cmd] 
```

# iphone - 表格中的按钮索引，iPhone

> ID：11115295
> 
> 赞同：0
> 
> 时间：2012-06-20T08:07:17.190
> 
> 标签：iphone, ipad, tableview

我`UIButtons`在每一行都有一个`UITableView`. 如何检测按钮索引（就像我们可以通过`didSelectRowIndexAtIndexPath`方法检测表中的行索引）？

例如：我有一个`UITableView`with custom `UITableViewCells`。在 10 行中，有 6 行具有`UIButtons`.

在按钮点击时，我将用户带到下一个视图（详细视图）。但我无法获得`UIButton`（行）索引。因为，我不是通过`didSelectRowIndexAtIndexPath`方法让用户点击按钮，所以我无法获得行索引。

我怎么能得到那个？

建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:18:31.057

这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //other code
  // your button reference here
  // if custom cell then use cell.yourbutton
  [button addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
  [button setTag:indexPath.row];
  //other code
} 
```

现在按钮选择器将如下所示：

```
- (void)buttonPressedAction:(id)sender
{
   UIButton *button = (UIButton *)sender;
   int row = button.tag;
} 
```

# unity-container - 将同一类型注册到多个接口

> ID：11115298
> 
> 赞同：12
> 
> 时间：2012-06-20T08:07:28.430
> 
> 标签：unity-container

可以将一种类型注册到多个接口吗？

我有实现两个接口的类

```
MyService : IService1, IServier2 {} 
```

我想为这两个接口注册这种类型。

```
container.RegisterType<IService1, MyService>(CreateLifetime());
container.RegisterType<IService2, MyService>(CreateLifetime()); 
```

不幸的是，在解决后我有两个不同的实例。我尝试使用共同的生命周期，但后来我收到了我不能使用的消息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T06:33:10.567

我通常这样写：

```
 .RegisterType<MyService>(CreateLifeTime())
      .RegisterType<IService1, MyService>()
      .RegisterType<IService2, MyService>(); 
```

当然，使用 TransientLifetimeManager，您仍然会获得两个不同的 MyService 实例。

上面的代码适用于`PerResolveLifetimeManager`, `PerResolveLifetimeManager`, `PerThreadLifetimeManager`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T02:08:32.053

您也可以通过配置执行此操作：

```
<register type="MyService" name="MyServiceName">
    <lifetime type="singleton" />
</register>
<register type="IService1" mapTo="MyService" />
<register type="IService2" mapTo="MyService" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T03:05:27.320

我的回答基于[@StephenTunney 的回答](https://stackoverflow.com/a/33684835/1733377)，但我无法让他工作。

您也可以通过配置执行此操作：

```
<register type="MyService" name="MyServiceName">
    <lifetime type="singleton" />
</register>
<register type="IService1" mapTo="MyService">
    <lifetime type="singleton" />
</register>
<register type="IService2" mapTo="MyService">
    <lifetime type="singleton" />
</register> 
```

请注意，这`name="MyServiceName"`是可选的，仅当您计划执行[命名实例](https://msdn.microsoft.com/en-us/library/ff660853(v=pandp.20).aspx)时才需要。

# c# - 数据网格视图多查询字符串问题

> ID：11115299
> 
> 赞同：3
> 
> 时间：2012-06-20T08:07:29.017
> 
> 标签：c#, asp.net, sql, sql-server-2008

我只得到`ItemID`来自`querystring`in 的 `gridview`内容。但我想在中显示链接`querystring`。

**`gridview`特性：**

*   `DataNavigateUrlFields`: `ItemID`, `Link`.
*   `DataNavigateUrlFormatString`: `OpenLink.aspx?itemid={0}&link={1}`.

这 `ItemID`是表的*pk*和自动生成的字段`Item`，只要将数据保存在数据库中，它就会升级。

`Link`column 是 Item Table 中该数据的 http 链接，它是 中的超链接模板，`gridview`它显示 中的数据标题`hyperlinkfield`。

我的主要目标是获取 的值`ItemID`和链接，`querystring`以便我可以将其显示到另一个 .aspx 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:08:30.867

我只是做了一个快速演示并尝试了你描述的内容。显然*HyperLink 列*无法*从**DataNavigateUrlFields*对您的给定链接进行编码。所以我创建了一个**templateField**和一个**自定义方法**，瞧

```
// code behind
public string createUrl(object itemName, object link)
{
     return string.Format("showItem.aspx?itemID={0}&link={1}",
         itemName.ToString(),
         HttpUtility.UrlEncode(link.ToString()));
} 
```

结合...

![ASPX 页面设计视图](../Images/7376c2d57d18a195b2d33cde0175729f.png)

结果是 ...

![ASPX 页面的 Chrome 视图](../Images/5c7851bd4b8abb56949991bcdd67b9fa.png)

如您所见，您所描述的行为发生在仅使用**DataNavigateUrlXXX**时。上面几行你可以看到我的代码。

无论如何，请注意任何类型的 queryString 操作，并在 showItem.aspx**检查**您给定的**queryString**值。您可以查看[保护 queryStrings](http://www.codeproject.com/Articles/33350/Encrypting-Query-Strings)或[此示例](http://www.blackbeltcoder.com/Articles/security/encrypting-query-arguments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:32:58.310

我为我的一个项目做了类似的事情。代码如下。我希望它有所帮助。

```
<asp:TemplateField>
  <ItemTemplate>
    <asp:HyperLink ID="lnkViewRequest" runat="server" NavigateUrl='<%# "./ViewRequest.aspx?Database=" & Request.QueryString("Database") & "&RequestNumber=" & Eval("Request") %>' Text="View"></asp:HyperLink>
  </ItemTemplate>
</asp:TemplateField> 
```

在这里，我使用了从 QueryString 传入的值，然后从 gridrow 添加了一个值，以将第二个查询字符串添加到传出 URL。

# jquery - jquery 滑动列表 - 创建一个的最佳方法？

> ID：11115306
> 
> 赞同：0
> 
> 时间：2012-06-20T08:08:24.130
> 
> 标签：jquery, html, css

我为一个项目写了一个滑动列表。这是： [http ://study-wise.appspot.com/test/left_right.html](http://study-wise.appspot.com/test/left_right.html)

我一直在想，有没有更好的方法来做到这一点？就像 jquery-ui 内置的东西一样 谢谢我想知道用于学习目的，如果没有的话，我想把它贴在某个地方以便它可以使用。

```
<html>
    <head>
        <title>
            test
        </title> 
```

CSS

```
 <style type="text/css">
            *{
                margin: 0px;
                padding: 0px;
            }
            a.move {
                z-index: 2;
                position: absolute;
                height: 28px;
                width: 28px;
                display: inline-block;
                border: 1px #aaa solid;
                border-radius: 5px;
                background-color: white;
                text-align: center;
                text-decoration:  none;
                color: black;
            }
            a.move:hover {
                background-color: #aaa;
            }
            a.move.left {
                top: 0;
                left: 0;
            }
            a.move.right {
                top: 0;
                left: 370px;
            }
            ul#shifting li {
                display: inline-block;
                height: 30px;
                width: 335px;
                border-right: 1px #aaa solid;
                margin-left: 35px;
            }

            div.slidingList_outer{
                z-index: 1;
                position: relative;
                width: 741px;
                height: 30px;
                border: 4px #24a solid;
                overflow: hidden;
            }
            div.slidingList_inner{
                position: relative;
                width: 1200px;
                height: 30px;
            }

        </style> 
```

查询

```
 <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            var current = 0;
            var total = 0;
            var wait = 0;
            var width = 335;
            var margin = 35;
            function next(){
                if(wait || current == total - 1) return;
                wait=1;
                $('li:eq(' + (current + 2) + ')').show();
                $('li:eq(' + (current + 0) + ')').animate({
                    marginLeft: "-" + (width) + "px"
                  }, 1000, function(){update(+1);});
            }
            function prev(){
                if(wait || current == 0) return;
                wait=1;
                $('li:eq(' + (current - 1) + ')').css({marginLeft: "-" + (width) + "px"}).show().animate({
                    marginLeft: "" + (margin) + "px"
                  }, 1000, function(){update(-1);});
            }
            function update(delta){
                if(delta == 1){
                    $('li:eq(' + (current + 0) + ')').hide();
                    $('li:eq(' + (current + 0) + ')').css({marginLeft: "" + (margin) + "px"});
                } else if(delta == -1){
                    $('li:eq(' + (current + 1) + ')').hide();
                }
                current+=delta;
                wait=0;
                $('p').text('current: ' + current);
            }
            function init(){
                total = $('li').size();
                $('ul').append('<li>End of lecture</li>');
                $('li').hide();
                $('li:eq(' + (current + 0) + ')').show();
                $('li:eq(' + (current + 1) + ')').show();
            }
            $(function(){
                init();
                /*bind events*/
                $('a.move.left').click(function(e){
                    e.preventDefault();
                    prev();
                });
                $('a.move.right').click(function(e){

                    e.preventDefault();
                    next();
                });
            });
        </script>
    </head> 
```

HTML

```
 <body>
        <p> ... </p>
        <div class="slidingList_outer">
            <div class="slidingList_inner">
                <a class="move left" href="a">&lt;</a><a class="move right" href="b">&gt;</a>
                <ul id="shifting">
                    <li>123</li><!--
                    --><li>456</li><!--
                    --><li>789</li><!--
                    --><li>abc</li><!--

                    --><li>edf</li><!--
                    --><li>ghj</li><!--
                    --><li>!@#</li><!--
                    --><li>$%^</li><!--
                    --><li>ABC</li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:11:40.043

如果它可以满足您的需求，我建议您使用[jQuery Tools Scrollable 。](http://jquerytools.org/demos/scrollable/index.html)

# sql-server-2008 - 将列的数据类型从 bigint 更改为 uniqueidentifier

> ID：11115311
> 
> 赞同：17
> 
> 时间：2012-06-20T08:08:54.030
> 
> 标签：sql-server-2008, type-conversion

我想更改 sql server 中表中列的数据类型。我使用了以下语句：

```
ALTER TABLE dbo.tbltest  
ALTER COLUMN ID uniqueidentifier 
```

但它会抛出错误

> 操作数类型冲突：bigint 与 uniqueidentifier 不兼容

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-20T08:19:48.733

您不能从整数转换为`uniqueidentifier`. 但是你可以这样做。

1.  首先从表中删除旧数据。

2.  将列更改为某种文本格式（例如`VARCHAR(200)`）。

    ```
    ALTER TABLE dbo.tbltest  
    ALTER COLUMN ID VARCHAR(200) 
    ```

3.  现在又

    ```
    ALTER TABLE dbo.tbltest  
    ALTER COLUMN ID uniqueidentifier 
    ```

需要明确的是，您不能将列从 numeric直接转换为`uniqueidentifier`，但可以转换`numeric`为。`varchar``uniqueidentifier`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:15:38.793

您需要先添加列（可能使用默认值或可为空，以便该列可以成功添加到具有现有数据的行），将其更新为您想要或需要的值，更改任何键（如果它是主键更改它到新列，然后还更改此表的任何外键），然后删除旧列并根据需要更改新列（例如设置标识种子，删除可为空等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-29T04:54:02.997

**使用 Entity Framework 的人请注意：**
显然，如果您有一个具有复杂关系的大型数据库，则删除所有关系和 ID 列并重新添加它们是一项巨大的考验。

更新生成的模型 (.edmx) 要容易*得多。*

是的，Visual Studio 允许您更新数据类型而不会抱怨。实际上，当您保存 .edmx 文件时，将验证关系；您可能错过的任何字段都将显示为错误。

完成后，您可以从模型中重新生成数据库。砰，完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-14T21:12:55.143

如果 Singh 的回答不起作用，那么您可能必须删除该表并重新创建它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-26T01:42:49.533

我不同意其他答案，即如果不删除数据就无法做到这一点。事实上，@Lucero 在他的评论中已经避开了正确的方法来做到这一点。

您当然可以将 BigInt 转换为 UniqueIdentifier（如果您愿意，可以再转换回来。）您不需要删除表、截断数据或执行任何更激进的操作，然后运行一些命令。它需要两个步骤：

```
ALTER TABLE dbo.tbltest ALTER COLUMN [ID] VARBINARY(8)
ALTER TABLE dbo.tbltest ALTER COLUMN [ID] UNIQUEIDENTIFIER 
```

现在请记住，只有生成的 GUID 的前半部分是非零值，因为 BitInt 值是 8 个字节，而 UniqueIdentifier 是 16 个字节，所以您最终会得到如下所示的 Guid：

> E38E4965-8DFC-4FF3-0000-000000000000

# php - 类的单一初始化

> ID：11115315
> 
> 赞同：2
> 
> 时间：2012-06-20T08:09:06.343
> 
> 标签：php, oop, class, initialization

我已经将一个类的实例存储在一个类内的一个属性中以进行 void 多重初始化，（希望这是有道理的）。

看起来像这样：

```
class baseClass
{
    public $db;

    public function __construct()
    {
         $this->db =  new dbClass(); // this class is just a query class
    }   

}

class page  extends baseClass {

   public function __construct()
   {
           parent::__construct();
       }

       public function index()
       {
         // this works very fine and return result what i want //
         $user = $this->db->query('blah blah');

         // my problem is when i use the same property ($this->db) which 
         //contains the dbClass()

         $mesg = $this->db->query('blah blah');

         // the result of both query merge together
         // i think i figured out whats the problem here but i dont know what to do
         // i think i need to reset or the destroy the instance of $this->db 
         // and back it to null values

         // or when i put print_r($this->db) after my first query (the  $users )
         // it display the previous property i set (ofcourse)
         // what i want is.. every time i use the $this->db, i want 
         // it like the first time i use it, or fresh.
         // is there any way ? 
         // thanks for the help experts ;) 

       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:23:36.813

问题在于您的`dbClass`实施。似乎它不能使这两个查询彼此分开。

您应该阅读代码`dbClass`并了解如何分别运行两个查询；如果这是不可能的，您应该至少能够在开始另一个查询结果之前完成一个查询结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:13:26.670

这是单例（反）设计模式的经典示例。

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

[http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:12:19.540

普遍的共识是不使用单例模式，并且它是一种反模式，但是当您查看 stackoverflow 时，有许多相关问题，最高投票的答案涉及单例设计模式。

这就是我更喜欢使用依赖注入的方式，如果一个类需要数据库连接，则通过构造函数将连接传递给该类。

由于页面类扩展了 baseClass，因此无需调用 parent::__construct，因为解释器向后工作并将 baseClass 的构造包含到页面类中。

所以：

```
<?php 
//Your abstract baseClass this class will be invoked by any clas that 
//extends it
Abstract Class baseClass {
    protected $db;

    function __construct(PDO $db) {
        $this->db = $db;
        //do your inital setup
    }

    //all controllers must contain an index method
    abstract function index();
}

//Your page controller class that is invoked by your router
class page extends baseClass {

    //The parents class's __construct is inherited

    public function index(){
        $this->user = $this->db->query('SELECT username FROM testing')->fetchAll(PDO::FETCH_ASSOC);
        $this->other = $this->db->query('SELECT somthing FROM testing')->fetchAll(PDO::FETCH_ASSOC);
    }
}

try{
    $pdo = new PDO("mysql:host=localhost;dbname=test_db", 'root', 'password');
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}catch (Exception $e){
    die('Cannot connect to mySQL server.');
}

//This below will be controlled by your router class

//Pass the PDO object to the constructor of baseClass
$page = new page($pdo);
$page->index();

print_r($page);
/*page Object
(
    [db:protected] => PDO Object
        (
        )

    [user] => Array
        (
            [0] => Array
                (
                    [username] => test
                )

            [1] => Array
                (
                    [username] => dasdadsa
                )

        )

    [other] => Array
        (
            [0] => Array
                (
                    [somthing] => test
                )

            [1] => Array
                (
                    [somthing] => eqweqwe
                )

        )

)*/

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:14:59.260

您在寻找[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)吗？

* * *

编辑

如果要为 dbClass 实现 Singleton，**请不要**调用`new dbClass()`. 而是将 dbClass 构造函数设为私有或受保护，并使用静态方法`dbClass::get()`（或类似方法）检查​​您是否已经拥有实例。

# java - 在 JSP 中生成 liferay-ui 元素

> ID：11115317
> 
> 赞同：3
> 
> 时间：2012-06-20T08:09:19.427
> 
> 标签：java, jsp, liferay, liferay-6

我需要生成几个`<liferay-ui:panel>`s。这个想法是有一个看起来像这样的 JSP：

```
<liferay-ui:panel-container extended="true">
    <%=MyJavaClass.generatePanel() %>
</liferay-ui:panel-container> 
```

和 Java 代码如下：

```
class MyJavaClass {
    public static String generatePanel() {
        String result="<liferay-ui:panel collapsible=\"false\" extended=\"true\" title=\"Some Title\">Some Content</liferay-ui:panel>";
        return result;
    }
} 
```

Liferay 不会转换`<liferay-ui panel...>`. 我猜这是因为它只在执行 java 代码*之前*这样做，所以我没有得到任何面板。

在我生成面板*后*，有什么方法可以让 Liferay 通过 JSP ？还是我错过了更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:37:23.270

将该行`<liferay-ui:panel collapsible=\"false\" extended=\"true\" title=\"Some Title\">Some Content</liferay-ui:panel>"`移至位于 的 jsp 标记`WEB-INF/tags/liferay-panel.tag`。

并将标签包含在所需的jsp中。

以下是相同的解决方案：

**liferay-panel.tag**

```
<liferay-ui:panel collapsible=\"false\" extended=\"true\" title=\"Some Title\">
    Some Content
</liferay-ui:panel> 
```

**并包括这样的标签：**

```
<%@taglib prefix="tags" tagdir="/WEB-INF/tags"% >
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>
<liferay-ui:panel-container extended="true">
     <c:forEach var="i" begin="1" end="20" step="1">
        <tags:liferay-panel/>
     </c:forEach>
</liferay-ui:panel-container> 
```

# xaml - 如何从 ImageSource 保存图像而无需再次下载？

> ID：11115320
> 
> 赞同：0
> 
> 时间：2012-06-20T08:09:33.983
> 
> 标签：xaml, windows-8, microsoft-metro

这是我之前的问题的扩展，[metro 应用程序应该如何缓存图像以进行墓碑（并且应该）？](https://stackoverflow.com/questions/11101771/how-should-a-metro-app-cache-images-for-tombstoning-and-should-it)

我一直在寻找的解决方案是使用 HttpClient，但这会导致 Web 服务器上的每个文件不必要的第二次命中。

有没有办法从 Image/ImageSource 中保存现有的图像/流（使用 ImageOpened 事件来确保它可用）？

解决方案必须与当前的 RP API 配合使用，因为这是一个从 CP 进行大量更改的领域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:34:44.133

首先请注意，在没有做任何自定义（即使用 URI 作为 Image.Source）的情况下，已经实现了某种缓存，就好像您在应用程序旁边运行了 Fiddler，您会看到发出请求一次而不是每次显示一个项目。

话虽这么说，如果您想要某种持久缓存，您可以创建一个转换器来检查所需的图像是否在应用程序的临时目录中，如果不是，则下载它。

这是一种方法：

```
public sealed class UriToCachedImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        Uri uri = value as Uri;
        if (uri == null)
            return null;

        // Don't let user know those are images, yet keep a unique and consistent name.
        string fileName = Path.GetFileName(uri.AbsolutePath);
        StorageFile file = null;
        try
        {
            Task<StorageFile> task = ApplicationData.Current.TemporaryFolder.GetFileAsync(fileName).AsTask<StorageFile>();
            task.Wait();
            file = task.Result;
        }
        catch (AggregateException ex)
        {
            if (ex.InnerException is FileNotFoundException)
            {
                // http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1eb71a80-c59c-4146-aeb6-fefd69f4b4bb/
            }
            else
            {
                throw;
            }
        }

        if (file == null)
        {
            // File isn't present in cache => download it.

            // This creates a file in the app's INetCache
            // but we can't retrieve its path or know its name for sure
            // hence we're not using this file as our cache file.
            Task<StorageFile> streamTask = StorageFile.CreateStreamedFileFromUriAsync(fileName, uri, RandomAccessStreamReference.CreateFromUri(uri)).AsTask<StorageFile>();
            streamTask.Wait();
            StorageFile storageFile = streamTask.Result;

            // Copy file to our temporary directory (can't move as we don't have write access on the initial file).
            Task<StorageFile> copyTask = storageFile.CopyAsync(ApplicationData.Current.TemporaryFolder, fileName, NameCollisionOption.ReplaceExisting).AsTask<StorageFile>();
            copyTask.Wait();
            file = copyTask.Result;
        }

        Task<IRandomAccessStreamWithContentType> openTask = file.OpenReadAsync().AsTask<IRandomAccessStreamWithContentType>();
        openTask.Wait();
        IRandomAccessStreamWithContentType randomAccessStream = openTask.Result;

        BitmapImage bitmapImage = new BitmapImage();
        bitmapImage.SetSource(randomAccessStream);
        return bitmapImage;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

注意：此代码片段还说明了如何从同步方法调用异步方法；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:04:54.623

我无法从 ImageOpened 事件中看到我需要的方法，但我找到了一个工作模型。

而不是将图像uri绑定到图像源并让metro下载图像，而是绑定到图像的标签，然后在数据绑定完成后循环遍历xaml中的每个图像并将图像下载为RandomAccessStream，保存流并将 Image Source 设置为从流中创建的 BitmapImage。

```
RandomAccessStreamReference rasf = RandomAccessStreamReference.CreateFromUri(new Uri(MyImage.Tag as string));
BitmapImage bitmapImage = new BitmapImage();
var ras = await rasf.OpenReadAsync();
bitmapImage.SetSource(ras);
MyImage.Source = bitmapImage; 
```

我还通过将代码放入转换器和视图模型属性来研究自动化过程，但由于异步调用，这两者都不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T17:19:23.373

您还可以使用 FFImageLoading ( [https://github.com/molinch/FFImageLoading/](https://github.com/molinch/FFImageLoading/) ) 或查看其来源以了解其实现方式 ( [https://github.com/molinch/FFImageLoading/tree/master/FFImageLoading.Windows](https://github.com/molinch/FFImageLoading/tree/master/FFImageLoading.Windows) )

## 特征

*   Xamarin.iOS（最低 iOS 7）、Xamarin.Android（最低 Android 4）、Xamarin.Forms 和 Windows（WinRT、UWP）支持
*   可配置的磁盘和内存缓存
*   类似下载/加载请求的重复数据删除
*   错误和加载占位符支持
*   图像可以自动下采样到指定大小（更少的内存使用）
*   WebP 支持
*   图像加载淡入动画支持
*   可以重试图片下载（RetryCount、RetryDelay）
*   默认情况下禁用 Android 透明度（可配置）。节省 50% 的内存
*   转换支持
    *   模糊变换
    *   CircleTransformation、RoundedTransformation、CornersTransformation
    *   颜色空间变换、灰度变换、棕褐色变换
    *   翻转变换
    *   支持自定义转换（本机平台 ITransformation 实现）

这很简单：

```
<ff:FFImage Name="image"
    VerticalAlignment="Stretch" 
    HorizontalAlignment="Stretch"
    LoadingPlaceholder="loading.png"
    ErrorPlaceholder="error.png"
    CacheDuration="30"
    RetryCount="3"
    RetryDelay="250"
    DownsampleHeight="300"
    Source="http://lorempixel.com/output/city-q-c-600-600-5.jpg">
</ff:FFImage> 
```

此处的示例项目：[https ://github.com/molinch/FFImageLoading/tree/master/samples/Simple.WinPhone.Sample](https://github.com/molinch/FFImageLoading/tree/master/samples/Simple.WinPhone.Sample)

# javascript - 如何使从 DB 中获取的 Ruby 代码在 JS 中工作？

> ID：11115322
> 
> 赞同：1
> 
> 时间：2012-06-20T08:09:38.530
> 
> 标签：javascript, ruby-on-rails, ruby

我正在使用 Rails 代码将一些 html 和 JS 代码填充到 mysql DB 中。然后从数据库中获取代码并在可配置页面上呈现。在 HAML 文件中，当我在 JS 警报中使用 ruby​​ 代码时，它可以正常工作：

警报（“#{user.id}”）

显示 id 是因为我将用户对象传递到此页面。现在，当我将这一行 alert("#{user.id}") 保存在 DB 中并呈现 JS 代码时，它会将 #{user.id} 作为字符串发出警报。我如何让它意识到来自 DB 的字符串不仅仅是一个字符串，它是一些 ruby​​ 代码，当我在那里获取用户对象时需要在页面上进行解释。所以它应该显示像 5 或 6 这样的实际 id，而不是显示一个简单的字符串“#{user.id}”

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:05:32.937

如果可以更改语法（类似`alert("<%= user.id %>")`），您可以使用 ERB 或其他类似的模板引擎。

这是使用 ERB 的方法。

```
require 'erb'
user_id = 23
str = 'alert("<%= user_id %>")' # get these from the database
ERB.new(str).result(binding) 
```

**请注意，这是危险的，因为这意味着用户实际上可以从 ERB 中运行代码。**

为了解决这个问题，我建议使用另一种模板语言。

以下是一些选项：

*   [http://mustache.github.com/](http://mustache.github.com/)
*   [http://liquidmarkup.org/](http://liquidmarkup.org/)
*   [http://slim-lang.com/](http://slim-lang.com/)
*   [https://github.com/cowboyd/handlebars.rb](https://github.com/cowboyd/handlebars.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:23:28.123

有几种方法可以将数据从 Rails 传递到 JS，请参见此处的视频：

[http://railscasts.com/episodes/324-passing-data-to-javascript?view=comments](http://railscasts.com/episodes/324-passing-data-to-javascript?view=comments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:54:00.950

就个人而言，我将数据存储在视图中的隐藏字段中，然后使用 jQuery 处理它。

```
=form_for :user do |f|
  =f.hidden_field :id 
```

然后在javascript中

```
$('document').ready ->
  alert $('#user_id').val() 
```

# magento - Magento 如何将快速访问链接设为下拉列表

> ID：11115327
> 
> 赞同：2
> 
> 时间：2012-06-20T08:10:03.350
> 
> 标签：magento, drop-down-menu

我想将静态`quick access`链接替换`(myaccount, login, Checkout, links)`为下拉列表。就像我的帐户应该可见一样，如果用户单击我的帐户，它应该将所有剩余的链接显示为下拉列表......

有人试过这个吗？请给我你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:48:01.847

没有快速的方法。您绝对可以修改`template/page/template/links.phtml`and`template/page/template/linksblock.phtml`来显示`<select>`and`<option>`而不是`<ul>`and`<li>`但这会将链接列表更改为下拉列表，以用于所有`<block type="page/template" ../>`已经是页脚链接的实例。

# objective-c - AVAssetWriter 完成写入失败，制作只能观看 50% 的视频

> ID：11115334
> 
> 赞同：1
> 
> 时间：2012-06-20T08:10:40.310
> 
> 标签：objective-c, ios, avfoundation

我目前正在使用 AVCaptureSession 捕获视频和音频，并已设置管道以使用 AVAssetWriter 将数据写入磁盘。对于短视频，这完全没有问题。

但是，如果录制媒体的长度超过了任意时间，通常约为 2 分钟，则完成写入的调用会失败，但仍会设法生成仅播放大约 50% 内容的视频文件。我在写入过程中不断调用 isReadyForMoreMediaData 和 appendSampleBuffer ，它们总是返回 true。在完成调用之前，我似乎没有收到任何出现问题的通知。

在失败的 finishWriting 调用后 AVAssetWriters 错误设置为以下

```
Capture failed to end with status 3 and error Error Domain=AVFoundationErrorDomain Code=-11800 "The operation could not be completed" UserInfo=0x210b7880 {NSLocalizedFailureReason=An unknown error occurred (268451843), NSUnderlyingError=0x210b1ee0 "The operation couldn‚Äôt be completed. (OSStatus error 268451843.)", NSLocalizedDescription=The operation could not be completed} 
```

不是世界上最有用的错误...

紧随其后的是对我设置的 AVCaptureSessionRuntimeErrorNotification 侦听器的调用，其中包含错误

```
Error Domain=AVFoundationErrorDomain Code=-11819 "Cannot Complete Action" UserInfo=0x21011940 {NSLocalizedRecoverySuggestion=Try again later., NSLocalizedDescription=Cannot Complete Action} 
```

再次不是很有帮助......

这是我用来为音频配置 AVAssetWriter 输入的代码

```
 //\Configure Audio Writer Input
AudioChannelLayout acl;
bzero(&acl, sizeof(acl));
acl.mChannelLayoutTag = kAudioChannelLayoutTag_Stereo;

NSDictionary*  audioOutputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                      [ NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                      [ NSNumber numberWithInt: 2 ], AVNumberOfChannelsKey,
                                      [ NSNumber numberWithFloat: 44100.0 ], AVSampleRateKey,
                                      [ NSData dataWithBytes: &acl length: sizeof( AudioChannelLayout ) ], AVChannelLayoutKey,
                                      [ NSNumber numberWithInt: 64000 ], AVEncoderBitRateKey,
                                      nil];

m_audioWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio outputSettings:audioOutputSettings] retain]; 
```

这是我用来为视频配置 AVAssetWriterInput 的代码

```
 videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                     AVVideoCodecH264, AVVideoCodecKey,
                     [NSNumber numberWithInt:640], AVVideoWidthKey,
                     [NSNumber numberWithInt:480], AVVideoHeightKey,
                     nil];

m_videoWriterInput = [[AVAssetWriterInput
                       assetWriterInputWithMediaType:AVMediaTypeVideo
                       outputSettings:videoSettings] retain];

m_videoWriterInput.expectsMediaDataInRealTime = YES; 
```

这是我用来初始化 AVAssetWriter 的代码

```
 m_audioAndVideoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:outputPath] fileType:AVFileTypeQuickTimeMovie error:&error];

m_audioAndVideoWriter.shouldOptimizeForNetworkUse = YES;
[m_audioAndVideoWriter addInput:m_videoWriterInput];
[m_audioAndVideoWriter addInput:m_audioWriterInput]; 
```

有没有人遇到过类似的问题？或者知道可能导致此问题的 finishWriting 调用中发生了什么？或者也许有人知道调试这个问题的一些新方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:53:44.647

奇怪的是，设置`m_audioAndVideoWriter` `shouldOptimizeForNetworkUse = NO`会解决这个问题。实际上，如果您从文件中获取编码帧然后流式传输它们，我会确保您`shouldOptimizeForNetworkUse`将`YES`. 我让它工作了，所以我很确定你可以让它工作。

容器生成的最后一步包括编写几个重要的容器原子，例如为编码帧`AVCC`指定的容器原子，以及其他非常重要的元数据。`SPS/PPS`

几个想法：

1.  您在测试 ios 设备上创建了多大的文件？确保您没有用完空间 - 这会使`.mov`文件创建的最后一步失败。如果文件变得太大太快，我只会调整视频的大小。另外，我会根据您的质量需求使用其中一种预设来`AVCaptureSession`设置（`captureSession.sessionPreset` 到 `AVCaptureSessionPresetLow`或）。`AVCaptureSessionPresetMedium`另外两个设置`AVVideoMaxKeyFrameIntervalKey`也`AVVideoAverageBitRateKey`可以帮助您减小文件大小。我可以给你更多信息，但让我们首先确保文件大小是一个问题:)

2.  您是否尝试过生成`.mp4`文件？对于您的assetWriter，只需指定 fileType:`kUTTypeMPEG4`选项。如果这有什么不同，我会很好奇。

# java - Java中的椭圆曲线密码算法

> ID：11115336
> 
> 赞同：6
> 
> 时间：2012-06-20T08:10:43.940
> 
> 标签：java, cryptography, elliptic-curve

我们是密码学的几个业余爱好者。我们必须在 Java 中实现与**椭圆曲线密码学相关的不同算法。**到目前为止，我们已经能够从关于椭圆曲线密码学的维基百科页面中识别出一些关键算法，例如`ECDH`、`ECIES`、 。`ECDSA``ECMQV`

现在，我们在试图了解如何以及从何处开始实施这些算法时不知所措。此外，Java 是否已经在其架构中提供了这些算法？或者我们是否必须使用一些 API `BouncyCastle`（我们在这个网站上到处都可以看到它！）？或者我们可以简单地使用标准代码自己实现算法吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:45:32.653

是的，您始终可以依靠 Bouncy Castle 库来实现最需要的算法，当然包括椭圆曲线加密。无需自己实现；如果您发现任何问题，请尝试修复 Bouncy。

Oracle 的 OpenJDK 7 和 Java 7 SE[也实现了 Elliptic Curve cryptography](http://openjdk.java.net/projects/jdk7/features/#f73)，早期版本仅包含[Elliptic Curve cryptography 的综合 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/spec/EllipticCurve.html)，但您需要 JCE 提供程序（如[Bouncy Castle](http://www.bouncycastle.org/java.html)）来提供实际实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T17:10:24.977

这将描述简单的椭圆曲线密码学 [http://javaconceptzz.blogspot.com/2013/08/java-eliptic-curve-cryptography.html](http://javaconceptzz.blogspot.com/2013/08/java-eliptic-curve-cryptography.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:19:12.413

您可以观看 OpenSource 项目 TextSecure，它是一个适用于 android 的 SMS/texto 应用程序，它可以使用与 OpenPGP 相同的想法，但使用 ECDH 和 ECDSA 在 GSM 电话网络上发送加密文本消息。所有这些都已通过 BouncyCastle 实现到该应用程序中。

[https://github.com/WhisperSystems/TextSecure/tree/master/src/org/bouncycastle](https://github.com/WhisperSystems/TextSecure/tree/master/src/org/bouncycastle)

# ruby-on-rails - 我的 Rails 应用程序和 Postgres DB 在生产中需要多少内存？

> ID：11115337
> 
> 赞同：1
> 
> 时间：2012-06-20T08:10:44.217
> 
> 标签：ruby-on-rails, postgresql, amazon-ec2

是否有一个工具可以分析我的 rails 应用程序，并告诉我它需要在生产中运行多少 Ram（考虑到 db 和 imagemagick）。

我问的原因是我有一个小型 Rails 应用程序，它在 Heroku 的免费层上运行，我想将它移动到 EC2 或 Rackspace，但想知道在我决定是否它之前我会花多少钱值得花时间做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:47:00.070

没有。如果有，我不会相信它。解决这个问题的最好方法是进行负载测试。如果是我，我会启动一个中型或小型实例并开始猛击应用程序，看看它在什么时候死掉。然后对应用程序、Web 服务器、缓存层、数据库、实例大小、ebs 卷大小等进行调整。

负载测试显然有很多内容，超出了这个答案的范围。

# jquery - 无法更改默认错误消息（jquery-validation 插件）

> ID：11115341
> 
> 赞同：1
> 
> 时间：2012-06-20T08:10:58.610
> 
> 标签：jquery, jquery-validate

我正在使用这篇文章 - [jQuery 验证：更改默认错误消息](https://stackoverflow.com/questions/2457032/jquery-validation-change-default-error-message)

这是我添加到 jquer.validate.min.js 的 js 代码

```
jQuery.extend(jQuery.validator.messages, {
required: "",
remote: "1",
email: ""
}); 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:49:46.610

这是我发现的：

```
 jQuery.extend(jQuery.validator.messages, {
     required: 'bla bla bla',
     remote: 'bla bla bla'
     }); 
```

# java - java：输出包含图片和文本的报告

> ID：11115342
> 
> 赞同：0
> 
> 时间：2012-06-20T08:11:04.710
> 
> 标签：java, pdf-generation

我目前正在开发一个系统来生成包含文本和图片（最好是 .pdf 格式）的摘要报告。有没有图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:15:53.987

[我认为您可以从Google](http://www.google.com)找到很多 API 或开源库。似乎 IBM[推荐](http://www.ibm.com/developerworks/opensource/library/os-javapdf/) [iText](http://itextpdf.com/itext.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:18:50.393

我肯定会选择[iText](http://itextpdf.com)。它的开发非常活跃，提供 AGPL 和商业[许可证](http://itextpdf.com/terms-of-use/index.php)，附带[大量](http://itextpdf.com/themes/keywords.php)[示例](http://itextpdf.com/book/examples.php)，它的作者 (Bruno Lowagie) 甚至写了一[本书](http://itextpdf.com/book/)。

最新版本（[iText 5.3.0](http://itextpdf.com/history/?branch=53&node=530)）于今天（2012 年 6 月 20 日）发布。

此外，[itext](/questions/tagged/itext "显示标记为“itext”的问题")社区在 Stack Overflow 上相当活跃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:12:54.720

你可以试试 Jasper 报告

[http://jasperforge.org/projects/jasperreports](http://jasperforge.org/projects/jasperreports)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:19:11.943

文本很好。 [JODReports](http://jodreports.sourceforge.net/)和[Docmosis](http://www.docmosis.com)可以生成 PDF 和其他格式，与 iText 有不同的开发重点。

# cuda - CUDA nvcc慢主机代码

> ID：11115343
> 
> 赞同：3
> 
> 时间：2012-06-20T08:11:07.237
> 
> 标签：cuda, nvcc

我在使用 nvcc 编译器时遇到问题。我发现使用 nvcc 4.2 编译的主机代码的运行速度比使用 g++ 4.4.6 编译的相同代码慢 5 倍。我正在使用 NVIDIA SDK Makefile 模板来编译发布配置中的代码。在这两种情况下，都使用了 -O2 优化。这怎么可能，因为 nvcc 应该将主机代码传递给主机编译器。有任何想法吗？

这是我的生成文件：

```
# Add source files here
EXECUTABLE  := App
verbose=1
# C/C++ source files (compiled with gcc / c++)
CCFILES     := \
    cmdl.cpp main.cpp
# Cuda source files (compiled with cudacc)
CUFILES_sm_30       := AppCuda.cu AppHost.cpp 

# Do not link with CUTIL
OMIT_CUTIL_LIB := 1

################################################################################
# Rules and targets
ROOTDIR=/home/snpsyn/NVIDIA_GPU_Computing_SDK/C/common
include $(ROOTDIR)/../common/common.mk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:48:50.203

用 nvcc 或 g++ 编译 c++ 代码应该没有区别（[CUDA 编译器驱动程序](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/nvcc.pdf)）

但是尝试直接用 g++ 编译所有 c++ 代码。在您给出的示例中，AppHost.cpp 文件被传递给 nvcc 而不是 g++。

如果你能提供源代码和makefile，那将有很大帮助。

# java - 获取日志记录的类名

> ID：11115344
> 
> 赞同：12
> 
> 时间：2012-06-20T08:11:20.737
> 
> 标签：java, logging

要记录给定类的错误，我正在访问类名，如下所示：这是将类名作为字符串返回的“好”方式，因此可用于记录吗？

```
private static final String CLASS_NAME = MyClass.class.getName();
logger.error("Error occurred in "+CLASS_NAME); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-09-06T12:36:10.073

# Java 8 解决方案

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.lang.invoke.MethodHandles;
...

private final static Logger LOG = 
                     LoggerFactory.getLogger(MethodHandles.lookup().lookupClass()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T08:19:18.587

如果您以这种方式初始化记录器：

```
private static Logger logger = Logger.getLogger(MyClass.class.getName())> 
```

那么类的名称将出现在每个日志事件中，您不需要在每个日志调用中显式地放置它：

```
logger.error("Error occured while doing this and that"); 
```

您可以配置日志服务（如果是 ，则在logging.properties*中*，如果使用 Apache log4j，则在 log4j.properties 中）以在每条日志消息中包含类名*。*`java.util.logging`

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T08:14:29.823

您可以在 log4j.xml 本身中设置您的日志记录参数。

对于经验 -

```
<appender name="swcd-web" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="Threshold" value="DEBUG"/>
    <param name="Append" value="true"/>
    <param name="File" value="${catalina.home}/logs/swcd-web.log"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n"/>
    </layout>
</appender> 
```

它会在 swcd-web.log 文件中记录这样的异常 -

```
2012-05-23 16:34:51,632 [main] ERROR com.idc.sage.sso.dynamo.SsoDbStorage - cannot get configuration for max SSO age 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T08:17:26.903

我会这样做：

```
logger.error("Error occured in " + this.getClass().getName()); 
```

如果发生变化，维护起来会更容易，但还有其他方法可以做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T08:20:42.783

由于您没有说明您使用的是哪个日志库，我建议使用**slf4j**。我认为这是你能得到的最简单的。您只需像这样从 slf4j 请求 Logger 对象`LoggerFactory`：

```
private static final Logger LOGGER = LoggerFactory.getLogger(YouerClass.class); 
```

现在您可以使用 LOGGER 对象进行日志记录。

例如，记录错误如下所示：

```
LOGGER.error(yourMessage, throwable); 
```

您可以发送简单的字符串消息或整个异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-28T21:06:54.390

我看到很多人使用外部库，比如 log4j、slf4j、jboss.logger 等等......

我更喜欢旧的方式，使用一个简单的

```
java.util.logging.Logger 
```

它是标准的，您不需要导入库。

您可以将其初始化为：

```
private static final Logger LOG = Logger.getLogger(A.class.getName()); 
```

然后每次记录器在流上写入时都知道您使用了*A*类：

```
String errorcode = "ABC123";
LOG.log(Level.SEVERE,"This is a very important error with code {0}", new Object[]{errorcode}); 
```

无论你是什么标准流，例如控制台或日志文件，它都会写如下内容：

```
[date]     [hour]        [level] [class]       [description]
2020-01-01 00:00:10.123  SEVERE  my.package.A  This is a very important error with code AAA123 
```

如果要自定义日志，可以使用[java.util.logging.Handler](https://docs.oracle.com/javase/7/docs/api/java/util/logging/Handler.html)。

在此[链接](https://www.logicbig.com/tutorials/core-java-tutorial/logging/custom-handler.html)中，您可以找到 Handler 的示例。*

# bash - 是否可以在一个操作中应用两个匹配的模式转换？

> ID：11115347
> 
> 赞同：7
> 
> 时间：2012-06-20T08:11:46.313
> 
> 标签：bash, shell

我有一个填充了文件名和路径的 bash 变量：

```
SONG="~/Music/Mine/Cool Title Bro.flac" 
```

为了使标记变得更加容易，我对变量进行了一些转换以隔离标题：

```
echo "${SONG#\~/Music/Mine/}" # which prints: Cool Title Bro.flac 
```

我知道也可以删除后缀`${SONG%%.flac}`.

但是是否可以在一次操作中同时删除前缀和后缀？

这个：

```
${SONG#\~/Music/Mine/%%.flac} 
```

可能不起作用，因为它试图将文字`%%.flac`作为前缀的一部分进行匹配。反过来不行（`%%.flac#~/[...]`），我什至发疯了，尝试

```
${${SONG#~/Music/Mine/}%%.flac} 
```

这也不起作用。

这可能是我过度设计的一个典型例子，但如果有办法做到这一点，那就太好了，我只是还没有弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:31:18.517

在某些情况下，`bash`的扩展模式足够灵活，可以完成您想要的。首先，您必须打开它们：

```
shopt -s extglob 
```

然后，您可以指定应使用参数扩展删除的模式列表：

```
echo ${SONG//@(*\/|.*)} 
```

扩展模式`@(*\/|.*)`匹配*到*/ 之前的所有内容（必须对其进行转义，以避免将其与部分参数替换语法混淆），*或者*匹配句点及其后面的所有内容。`//`表示每次出现的模式都应该被替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T08:30:09.803

```
echo "1:"
if [[ "$SONG" =~ \~/Music/Mine/(.*)\.flac ]] ; then SONG=${BASH_REMATCH[1]} ; fi
echo $SONG

echo "2:"
[[ "$SONG" =~ \~/Music/Mine/(.*)\.flac ]] && SONG=${BASH_REMATCH[1]}
echo $SONG 
```

1 和 2 使用 bash 正则表达式。`else`如果您的字符串与预期的格式不匹配，第一个示例具有能够中断分支的额外优势。*第二个示例更清晰。在这两种情况下，如果`${SONG}`与模式不匹配，则保持不变。

但是使用 awk 或 sed 可能更容易理解。例如：

```
echo "3:"
SONG=$(echo "$SONG" | sed -r 's:~/Music/Mine/(.*)\.flac:\1:')
echo $SONG 
```

[*]*请参阅下面 DennisWilliamson 关于使用`||`获取`else`分支的说明。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:29:26.477

不，不可能。使用两个操作。

```
tmp="${SONG#\~/Music/Mine/}"; echo "${tmp%.flac}" 
```

好吧，如果你疯了，这是可能的。

```
a="~/Music/Mine/Cool Title Bro.flac"
echo "${a:b=$(b=${a%${a#\~/Music/Mine/}};echo ${#b}):$(c=${a%.flac};echo ${#c})-b}" 
```

您还可以在支持它的外壳中使用正则表达式分组。[jedwards 答案](https://stackoverflow.com/a/11115624/495451)中的示例

也可以使用 ksh93 模式分组来完成。

```
song='~/Music/Mine/Cool Title Bro.flac'; echo "${song/'~/Music/Mine/'+(*).flac/\1}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:52:33.217

希望我没有误解你的问题。你想隔离“酷标题兄弟”吗？如果是这样，那么

```
$ echo "~/Music/Mine/Cool Title Bro.flac"
~/Music/Mine/Cool Title Bro.flac
$ echo "~/Music/Mine/Cool Title Bro.flac"|sed 's/.*\/\(.*\).flac/\1/'
Cool Title Bro 
```

没有什么是一点正则表达式无法管理的。或者，

```
$ echo "~/Music/Mine/Cool Title Bro.flac"|sed 's/.*\/\(.*\)\..*/\1/'
Cool Title Bro 
```

使用任何文件扩展名。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T08:49:01.070

如果我应该只用一行来做，而且我不在乎易读性，我会使用

```
echo "${SONG:13:${#SONG} - 18}" 
```

在哪里

*   13 是字符串“~/Music/Mine/”的长度
*   18 是字符串“~/Music/Mine/”的长度加上“.flac”的长度

这种字符串操作在 bash 中的一个更简单的应用是：

```
$ TEST="1234567890"
$ echo ${TEST:3}
4567890
$ echo ${TEST:3:4}
4567 
```

# android - 安卓手机上网锁

> ID：11115350
> 
> 赞同：0
> 
> 时间：2012-06-20T08:11:52.037
> 
> 标签：android, android-wifi, android-internet

我目前正在为需要通过 wi-fi 或 3G 移动互联网持续访问互联网的客户开发应用程序。

我发现有一个“Wi-Fi Lock”，可以让 Wi-Fi 收音机保持打开状态，但是我没有找到任何类似的移动互联网。有没有类似的东西？或者您根本不必为移动互联网获取锁定，即使在手机空闲时它也可以工作？（很遗憾我无法测试，因为我现在没有移动互联网）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:15:53.177

您无法阻止用户手动禁用 WiFi 或移动网络数据。但是，有些手机设置为在手机休眠时自动禁用 WiFi，此时您可以使用 WiFi 锁来保持 WiFi 持续运行，只要您需要它，只要记住在您不再需要它时释放锁即可。

手机休眠时移动网络数据不会断开，因此您不需要为此锁定。

# localization - 如何翻译动态标题属性

> ID：11115351
> 
> 赞同：2
> 
> 时间：2012-06-20T08:11:55.457
> 
> 标签：localization, internationalization, plone

我有这样的翻译：

```
<a tal:attributes="href troncon/url; 
                   title string:Cette etape fait partie du troncon ${troncon/nom}"
   tal:content="troncon/nom">Canal du centre</a> 
```

您会看到我有一个动态标题属性，我希望它是可翻译的。

我试过这样：

```
<a tal:attributes="href troncon/url; 
                   title string:Cette etape fait partie du troncon ${troncon/nom}"
   tal:content="troncon/nom" 
   i18n:attributes="title">Canal du centre</a> 
```

像这样：

```
<a tal:attributes="href troncon/url; 
                   title string:Cette etape fait partie du troncon ${troncon/nom}"
   tal:content="troncon/nom" 
   i18n:attributes="title" 
   title="Cette etape fait partie du troncon ${nom}">Canal du centre</a> 
```

但这不起作用（当然）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:43:20.307

调用的结果按`tal:attributes`字面意思传递给翻译机器。`i18n:attributes`将它的键与`tal:attributes`生成的内容进行匹配，如果匹配，则忽略元素上的原始属性（请参阅[Zope 3 wiki 上的这篇 I18N 文章](http://wiki.zope.org/zope3/ZPTInternationalizationSupport)。

这意味着将*查找*“Cette etape fait partie du troncon ${troncon/nom}”的结果进行翻译，要求您为句子的每个变体提供翻译，这些变体可以使用`troncon/nom`.

要在此字符串中获得对适当占位符的支持，您最好在生成`troncon`结构的代码中创建一个消息 id 并在那里翻译它，大概在您的视图中。你需要：

*   带有占位符的消息 ID
*   将`nom`值附加到消息 ID
*   将此消息翻译成当前选择的语言
*   将结果包含在您的`troncon`结构中

我一般这样做是一步：

```
from zope.i18n import translate
from zope.i18nmessageid import MessageFactory

_ = MessageFactory('yourdomain')

troncon = dict(
    ...
    nom=nom,
    nomtitre=translate(
        _(u'troncon_nomtitre', default=u'Cette etape fait partie du troncon ${nom}',
            mapping=dict(nom=nom)),
        context=self.request)
) 
```

请注意，您需要请求翻译功能才能选择正确的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:40:20.203

您可以随时强制翻译`context.translate()`：

```
 tal:attributes="foobar python:context.translate(string, domain='translationdomain')" 
```

[http://collective-docs.readthedocs.org/en/latest/i18n/internationalisation.html#manually-translated-message-ids](http://collective-docs.readthedocs.org/en/latest/i18n/internationalisation.html#manually-translated-message-ids)

但是，这可能违反所有最佳实践。

# android - Android 应用程序和网站

> ID：11115353
> 
> 赞同：0
> 
> 时间：2012-06-20T08:11:58.153
> 
> 标签：android, web-services, web

我对网站有一个想法，我想建立它，但我认为在网站旁边添加 android 应用程序会非常有帮助......我想知道：如何做到这一点？我应该使用哪些编程语言？我可能会面临什么样的困难？

我考虑过网络服务，但我不知道这是否适用于我......你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:15:25.267

要在 Android 应用程序和 Web 之间进行交互，您最好使用 JSON 协议，因为 JSON 是轻量级的，并且提供了一种以有意义的方式组织数据的方式。

Android 原生有 JSON 编码解码 APIS

对于网络，如果您更喜欢开源，我个人建议使用 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:22:33.860

如果您只需要一个类似于 WebApp 的 Android 应用程序，那么：首先您应该真正考虑是否需要它。如果该应用程序只不过是一个网站，那么问题是，该用户会下载您的应用程序，然后通常会有点难过，它只不过是一个网站。所以你应该考虑通过移动技术增加一些价值，比如定位服务、离线存储等等。

如果您的应用程序添加了一些移动设备，但通常您的 UI 就像一个 Web 应用程序，并且您不想花太多精力来构建原生 UI，那么您可以使用 HTML5 到原生框架，如[PhoneGap](http://phonegap.com/)和[Appaccelerator](http://www.appcelerator.com/)。它们还可以让您很好地为多个平台编译它。

但是，如果你真的想要一个真正的原生体验，真的想使用传感器给人们一个良好的移动体验，比如后台同步等等，你可能应该写一个原生应用程序/原生应用程序。

采用的技术是适用于 Android 的 Java 和适用于 iOS 的 Cocoa。正如 Pete 已经指出的那样，两者都可以很好地与 JSON API 配合使用，所以如果你提供那很好。几乎所有服务器端语言都提供了创建这些的可能性。因此，您不仅限于 PHP，而是您喜欢的任何东西。

这是一个粗略的概述，请随时询问详细信息。

干杯，乔尔格

# php - 如何在 Symfony 2 中创建自定义表单

> ID：11115354
> 
> 赞同：4
> 
> 时间：2012-06-20T08:12:16.253
> 
> 标签：php, symfony

我有三个实体：服务、组、代理。

**服务**=> oneToMany =>**组**=> oneToMany =>**代理**

这些实体中的每一个都已经有一个表格。顺便说一句，我想创建一个自定义合并表单，其中将包含一个选择字段**服务**来选择和一个选择字段**Groupe**，以便合并其中的一些实体。Symfony 2 官方食谱正在维护中，所以我想知道如何创建自定义表单，在该表单中我将能够选择一个服务（从所有现有服务中）并选择一个组（从所有现有组中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:52:46.773

您正在寻找的可能是[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)。这将允许您在表单中嵌入指向外部实体的选择字段。这主要用于小型集合。

当您开始处理大型集合，并发现需要/希望使用 Javascript 加载实体时（例如，集合太大以证明在页面加载时加载所有内容是合理的），您必须查看[Symfony2 文档：如何嵌入表格集合](http://symfony.com/doc/current/cookbook/form/form_collections.html)。

还值得注意的是，Symfony 2.2有一个[拉取请求，它应该使处理这种类型的表单更容易。](https://github.com/symfony/symfony/pull/1951)

# asp.net - ASP.NET Wep API 中的版本控制

> ID：11115357
> 
> 赞同：1
> 
> 时间：2012-06-20T08:12:21.497
> 
> 标签：asp.net, asp.net-web-api

如何在我的 ASP.NET Web-Api 项目中处理版本控制？我需要特定的功能版本：

例子：

```
/v1/people
/v2/people/friends 
```

如何在 Web-API 中实现这一点？我是否使用不同的控制器或动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:55:40.317

简单的说：你需要创建一个自定义的IHttpControllerSelector，并通过HttpConfiguration.Services进行注册。IHttpControllerSelector 负责根据请求选择控制器。

实际上有一个库可以用于它： [https://github.com/Sebazzz/SDammann.WebApi.Versioning](https://github.com/Sebazzz/SDammann.WebApi.Versioning) [http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api](http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api)

# clickonce - ClickOnce 部署性能

> ID：11115359
> 
> 赞同：0
> 
> 时间：2012-06-20T08:12:25.353
> 
> 标签：clickonce

我们正在为应用程序选择部署策略。ClickOnce 提供了巨大的好处，但我找不到任何数据表明它可以很好地扩展到大型用户群。

所以我的问题基本上是：有关于这方面的任何信息，或者是否有人对通过 ClickOnce 的部署性能有任何经验？例如：期望 1,000 名近乎同时的用户淹没在网络共享（例如 10Mb 应用程序）上托管 ClickOnce 包的普通（入门级）Windows 2008 服务器是否合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:34:00.790

这不是 ClickOnce 问题。您只想知道在为 1000 个用户提供 10MB 文件时 Windows 2008 服务器的性能如何。如果它们是 ClickOnce 文件、msi 文件或文本文件，则无关紧要。对于这样的问题，您可能想尝试一下[ServerFault](http://serverfault.com)。

如果您选择 ClickOnce，请确保查看[压缩部署文件](https://stackoverflow.com/a/516187/1321)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:00:39.927

我们将 ClickOnce 部署用于我们的桌面应用程序和 Office 加载项，并且我们拥有数千名用户。我们确实在 Akamai CDN 上托管我们的 CDN，以获得我们可以获得的最快性能。请注意，您还可以[以极低的成本将其托管在 Azure Blob 存储中，](http://robindotnet.wordpress.com/2011/07/18/host-your-clickonce-deployment-in-azure-for-pennies-per-month/)并且绝对能够处理大量客户。

（我们不使用http压缩，所以我不能说。）

# javascript - 检查 DOM 元素是否为复选框

> ID：11115363
> 
> 赞同：29
> 
> 时间：2012-06-20T08:12:41.710
> 
> 标签：javascript, jquery, dom

如何检查给定的 DOM 元素是否为复选框。

设想：

我有一组文本框和复选框，其中的值是动态分配的。我无法确定 DOM 元素是复选框还是文本框。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-20T08:15:24.423

只使用 vanilla javascript 你可以做

```
if (el.type && el.type === 'checkbox') {
   ...
} 
```

甚至更短

```
if ((el || {}).type === 'checkbox') {
   ...
} 
```

或者在现代浏览器中你可以使用`matches()`

```
if (el.matches('[type="checkbox"]') {
    ...
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-20T08:15:42.020

如果你使用 jQuery，你可以使用[`:checkbox`](http://api.jquery.com/checkbox-selector/)伪类选择器和[`is`](http://api.jquery.com/is/)方法：

```
if($("#that-particular-input").is(":checkbox")) {
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-20T08:28:15.177

检查任何东西

```
function isCheckbox (element) {
   return element instanceof HTMLInputElement 
      && element.getAttribute('type') == 'checkbox'
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-20T08:17:49.057

```
if( $(element)[0].type == "checkbox" ) {

} 
```

或者

```
if( $(element).is(':checkbox') ) {

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T08:15:16.283

看看[复选框选择器](http://api.jquery.com/checkbox-selector/)。

```
var checkboxes = $("form input:checkbox"); 
```

你可以知道输入的类型是这样的：

```
if ($(".your-input").is(":text"))
{
    // Textbox
}
else if ($(".your-input").is(":checkbox"))
{
    // Checkbox
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-20T08:15:56.410

```
if (<DOMNode>.type === "checkbox") {
    // ...
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-20T08:15:41.090

尝试这个;

```
 $(element).is(':checkbox'); 
```

这`element`是您的选择器`element`

```
if(  $(element).is(':checkbox') ) {
  // do something
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-20T08:16:04.210

jQuery `is()`:

```
if ($el.is(':checkbox')) { ... } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-20T08:16:24.150

您可以使用伪选择器 :checkbox 调用 jQuery 的 is 函数：

`$('#myinput').is(':checkbox')`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-20T09:17:13.957

您应该有一个体面的命名约定，它可以让您仅通过查看元素的 id 或名称就知道元素是否是复选框。例如“chkMyCheckbox”

# mqtt - MQTT messageId 实际实现

> ID：11115364
> 
> 赞同：13
> 
> 时间：2012-06-20T08:12:44.313
> 
> 标签：mqtt

我工作的公司评估了 MQTT，并决定将其用作大型系统的核心消息传递平台。主要原因是协议的紧凑程度以及实际实现的容易程度。不过，我对 MQTT 有一个问题，我正在寻找以下问题的答案：

QoS1 和 QoS2 消息需要客户端确认。在接收 PUBACK、PUBREC、PUBREL 和 PUBCOMP 时，我对消息（识别它）的唯一了解是 messageId 和 clientId。消息 id 是一个无符号的 int16，因此最大值是 65535。对于长时间运行的客户端来说，它似乎不够大，比如一年，每小时发送 15 条 QoS2 消息。

我不太确定是否还有其他方法可以识别消息？我希望尽可能符合标准。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T16:15:34.593

可能要明确的第一点是消息 ID 是在每个客户端和每个方向的基础上处理的。也就是说，代理将为每个连接的客户端创建一个 QoS>0 的传出消息的消息 ID，并且这些消息 ID 将完全独立于用于发布到其他客户端的同一消息的任何其他消息 ID。同样，每个客户端都会为其发送的消息生成自己的消息 ID。

消息 ID 不必是唯一的，因此您的客户端每小时发送 15 条 QoS 级别 2 的消息会在某个时候简单地溢出。真正的限制是每个方向一次最多只能有 65535 条消息“在飞行中”（即，在消息握手的过程中）。一旦具有给定 ID 的消息被完全处理，那么该消息 ID 就可以被重用。

另一种看待它的方法是考虑如果您的客户一次只有一条消息在传输中，它将如何工作，无论是因为消息传输的速率还是您处理消息的方式的设计。在这种情况下，您可以将每条消息的消息 ID 设置为 1，因为永远不会有重复的机会。

如果您希望支持同时发送多条消息，则在分配新消息之前检查是否有消息 ID 重复是相对简单的。

因为消息 ID 是每个客户端的，所以如果您向 >65535 个客户端发送单个消息，则不会有消息 ID 冲突的机会。如果您一次向每个客户端发送 >65535 条消息并且消息流不完整，那么就会出现问题。

回答评论“我注意到每个 MQTT 代理倾向于只传递最后一个 QoS1/2 消息”：

代理只会向它知道的客户端发送消息。如果您是第一次连接，则无法获取过去的消息，但有一个例外：保留消息。如果将消息设置为保留，则它是“最后一次正确”的值。当新客户端订阅时，它将立即发送保留消息，这对于不经常更新的内容非常有用。我怀疑这就是你所指的。如果您希望客户端在未连接时将消息排队，那么您必须禁用“干净会话”选项以使客户端持久连接。您还必须使用 QoS>0 订阅和 QoS>0 发布。当您的客户端重新连接时（干净会话仍设置为禁用），排队的消息将被传递。您通常可以在代理中以这种方式配置要排队的消息数量，其中任何进一步的消息都将被丢弃。重要的一点是，设计不支持为先前未连接的客户端排队消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T11:04:38.797

为了在 QOS1 或 QOS2 上传递更多消息，您应该使用持久内存的概念。在这种情况下，当订阅者不可用时，消息将存储在持久内存中，并在订阅者连接后传递。您也可以在配置 mosquitto.conf 文件后在 QOS0 上执行此操作。

# c# - asp.net 将值从 JS/jquery 传递到 c# 后面的代码

> ID：11115365
> 
> 赞同：2
> 
> 时间：2012-06-20T08:12:44.693
> 
> 标签：c#, javascript, jquery, asp.net, code-behind

我已经尝试了“所有”可能的方式将 screen.width vlaue 从 aspx 页面上的 JS 脚本发送到后面代码中的 c#，虽然我可以看到 screen.width 被正确分配，但它永远不会被分配给我的隐藏字段价值。

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

   <asp:HiddenField ID="hiddenfield" runat="server" />

   <script type="text/javascript" language="javascript">
       $(function(){ 
       $('#hiddenfield').val(screen.width); 
    });
    </script>

other content

</asp:Content> 
```

以及背后的代码：

```
protected void btnChartGo_Click(object sender, EventArgs e)
{
   string s = hiddenfield.Value;
} 
```

无论我尝试什么，s总是“”

上面有问题，每个人似乎都在这样做并且它有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:17:02.787

呈现的隐藏字段的 ID 不是“hiddenfield”——它将类似于 ctl00_bodycontent_hiddenfield。

尝试使用

```
$('[id$="hiddenfield"]') 
```

作为选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:20:39.403

```
<asp:HiddenField ID="hiddenfield" runat="server" ClientIDMode="Static">
</asp:HiddenField > 
```

如果您使用 ASP.NET 4 或使用，请确保隐藏字段的客户端 ID 模式是静态的

```
$('#<%= hiddenfield.ClientID %>').val(screen.width); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:17:55.193

这应该得到正确的选择器：

```
$('#<%= hiddenfield.ClientID %>').val(screen.width); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:19:59.960

检查页面的视图源并找出元素的正确ID，然后在其上使用jquery选择器，然后在页面加载检查request.form集合以检查隐藏变量是否进入发布请求

# c# - Datagrid 无法使用 Dataset 填充 - 输入字符串格式不正确

> ID：11115367
> 
> 赞同：1
> 
> 时间：2012-06-20T08:12:51.057
> 
> 标签：c#, datagrid, dataset, sqldataadapter

我有一个数据网格视图，我在其中设置了这样的值

```
string query = "select CustomerId,CustomerName from tbl_Customer where flag=0";
SqlDataAdapter daCustomer = new SqlDataAdapter(query, con);

daCustomer.Fill(ds, "Customer");

cmbCustomerName.DisplayMember = "CustomerName";
cmbCustomerName.ValueMember = "CustomerId";
cmbCustomerName.DataSource = ds.Tables["Customer"];
cmbCustomerName.ResetText(); 
```

但它在这一行之后给了我这个错误

```
 cmbCustomerName.DataSource = ds.Tables["Customer"]; 
```

当我设置数据源时。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:50:15.437

尝试这个 ：

```
 DataTable dt = new DataTable();
daCustomer.Fill(dt);
cmbCustomerName.DataSource = dt; 
```

# nservicebus - NServiceBus + Common.Logging + NLog

> ID：11115376
> 
> 赞同：2
> 
> 时间：2012-06-20T08:13:29.637
> 
> 标签：nservicebus, nlog, common.logging

我试图弄清楚如何将 NServiceBus 与 Common.Logging 结合使用。我只是无法让它运行。我尝试开发一个仅用于教育目的的小型演示应用程序。

我所做的是：

1）创建一个简单的控制台应用程序并导入Common.Logging和Common,Logging.NLog，添加一些Info消息并添加一个App.Config文件：

```
<configuration>
  <configSections>
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
  </configSections>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.Simple.ConsoleOutLoggerFactoryAdapter, Common.Logging">
        <arg key="level" value="DEBUG" />
        <arg key="showLogName" value="true" />
        <arg key="showDataTime" value="true" />
        <arg key="dateTimeFormat" value="yyyy/MM/dd HH:mm:ss:fff" />
      </factoryAdapter>
    </logging>
  </common>
</configuration> 
```

那工作得很好。但是当我包含 NServiceBus 时：

```
var bus = Configure.With().DefaultBuilder()
                             .XmlSerializer()
                             .MsmqTransport()
                             .IsTransactional( true )
                             .UnicastBus()
                             .MsmqSubscriptionStorage()
                             .CreateBus()
                             .Start( () => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install() ); 
```

我得到这个例外：

```
System.TypeInitializationException was unhandled
  Message=The type initializer for 'NServiceBus.Configure' threw an exception.
  Source=NServiceBus.Core
  TypeName=NServiceBus.Configure
  StackTrace:
       at NServiceBus.Configure.With()
       at ConsoleApplication1.Program.Main(String[] args) in D:\Development\katas\ConsoleApplication1\ConsoleApplication1\Program.cs:line 17
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: Common.Logging.ConfigurationException
       Message=ConfigurationReader Common.Logging.Configuration.DefaultConfigurationReader returned unknown settings instance of type Common.Logging.Configuration.LogSetting
       Source=NServiceBus.Core
       StackTrace:
            at Common.Logging.Configuration.ArgUtils.Guard[T](Function`1 function, String messageFormat, Object[] args)
            at Common.Logging.Configuration.ArgUtils.Guard(Action action, String messageFormat, Object[] args)
            at Common.Logging.LogManager.BuildLoggerFactoryAdapter()
            at Common.Logging.LogManager.get_Adapter()
            at Common.Logging.LogManager.GetLogger(String name)
            at NServiceBus.Configure..cctor()
       InnerException: System.ArgumentOutOfRangeException
            Message=Type 'Common.Logging.Configuration.LogSetting, Common.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e' of parameter 'sectionResult' is not assignable to target type 'Common.Logging.Configuration.LogSetting, NServiceBus.Core, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c'
Parameter name: sectionResult
Actual value was Common.Logging.Configuration.LogSetting.
            Source=NServiceBus.Core
            ParamName=sectionResult
            StackTrace:
                 at Common.Logging.Configuration.ArgUtils.AssertIsAssignable[T](String paramName, Type valType, String messageFormat, Object[] args)
                 at Common.Logging.Configuration.ArgUtils.AssertIsAssignable[T](String paramName, Type valType)
                 at Common.Logging.LogManager.<>c__DisplayClass3.<BuildLoggerFactoryAdapter>b__1()
                 at Common.Logging.Configuration.ArgUtils.<>c__DisplayClass13.<Guard>b__12()
                 at Common.Logging.Configuration.ArgUtils.Guard[T](Function`1 function, String messageFormat, Object[] args)
            InnerException: 
```

我已经尝试了 StackOverflow 和其他小组中建议的几件事，但我就是无法让它发挥作用。任何人都可以就如何解决这个问题提供一些建议吗？或者提供一个简单的例子？

这个设置不应该是花哨的，对吧？我现在什至不需要记录 NServiceBus 部分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:50:16.190

NServiceBus 有它自己的 Common.Logging 版本，它被合并并内化到 Core dll 中，它用来配置它自己的日志记录（使用 log4net）。当它启动时，它会发现 app.config 中的配置部分并尝试加载它。但是，您的配置部分（称为“日志记录”）指向外部 Common.Logging dll：

```
<section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" /> 
```

NSB 希望它看起来像：

```
<section name="logging" type="Common.Logging.ConfigurationSectionHandler, NServiceBus.Core" /> 
```

因此，NSB 会引发错误。这肯定是 NSB 中的一个错误。我建议你在他们的 github 项目上创建一个问题。

虽然在您的情况下可能不是最佳解决方案，但解决它的最快方法是删除 app.config 中的日志记录部分并在代码中配置 Common.Logging。或者，完全跳过使用 Common.Logging 并直接使用 NLog。

我可能会补充一点，在不再使用 Common.Logging 的 NSB 4.0 中，这个问题将消失。

# objective-c - 基于 NSArray 键的 NSPredicate 'OR' 过滤

> ID：11115377
> 
> 赞同：8
> 
> 时间：2012-06-20T08:13:54.300
> 
> 标签：objective-c, nsarray, nspredicate, foundation

考虑以下 NSArray：

```
NSArray *dataSet = [[NSArray alloc] initWithObjects:
                 [NSDictionary dictionaryWithObjectsAndKeys:@"abc", @"key1", @"def", @"key2", @"hij", @"key3", nil], 
                 [NSDictionary dictionaryWithObjectsAndKeys:@"klm", @"key1", @"nop", @"key2", nil], 
                 [NSDictionary dictionaryWithObjectsAndKeys:@"qrs", @"key2", @"tuv", @"key4", nil], 
                 [NSDictionary dictionaryWithObjectsAndKeys:@"wxy", @"key3", nil], 
                 nil]; 
```

我能够过滤此数组以查找包含*键的字典对象* `key1`

```
// Filter our dataSet to only contain dictionary objects with a key of 'key1'
NSString *key = @"key1";
NSPredicate *key1Predicate = [NSPredicate predicateWithFormat:@"%@ IN self.@allKeys", key];
NSArray *filteretSet1 = [dataSet filteredArrayUsingPredicate:key1Predicate];
NSLog(@"filteretSet1: %@",filteretSet1); 
```

哪个适当地返回：

```
filteretSet1: (
        {
        key1 = abc;
        key2 = def;
        key3 = hij;
    },
        {
        key1 = klm;
        key2 = nop;
    }
) 
```

现在，我想过滤包含NSArray 中*任何键的字典对象的数据集。*

例如，使用数组：`NSArray *keySet = [NSArray arrayWithObjects:@"key1", @"key3", nil];`我想创建一个谓词，该谓词返回包含“key1”*或“key3”的**任何*字典对象的数组 （即在此示例中，将返回除第三个对象之外的所有字典对象 - 如它不包含“key1”*或*“key3”）。

 **关于我将如何实现这一目标的任何想法？我必须使用复合谓词吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T09:00:11.227

的`ANY`运营商`NSPredicate`涵盖了这一点：

```
NSSet *keys = [NSSet setWithObjects:@"key1", @"key3", nil];

NSPredicate *key1Predicate = [NSPredicate predicateWithFormat:@"any self.@allKeys in %@", keys]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:58:46.387

做这个：

```
 NSString *key = @"key1";
   NSString *key1 = @"key3";
   NSPredicate *key1Predicate = [NSPredicate predicateWithFormat:@"%@ IN self.@allKeys OR %@ IN self.@allKeys",key,key1];
   NSArray *filteretSet1 = [dataSet filteredArrayUsingPredicate:key1Predicate];
   NSLog(@"filteretSet1: %@",filteretSet1); 
```

非常适合我。希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:24:06.563

尽管已经回答了问题，但您还可以使用 block 来获得更多粒度：

```
NSArray *filter = [NSArray arrayWithObjects:@"key1", @"key3",nil];

NSPredicate *filterBlock = [NSPredicate predicateWithBlock: ^BOOL(id obj, NSDictionary *bind){        
    NSDictionary *data = (NSDictionary*)obj;

    // use 'filter' and implement your logic and return YES or NO
}];

[dataSet filteredArrayUsingPredicate:filterBlock]; 
```

可以根据需要重新排列，也许在它自己的方法中。**

# osgi - WSO2 作为 SCA：有可能吗？

> ID：11115380
> 
> 赞同：1
> 
> 时间：2012-06-20T08:14:00.933
> 
> 标签：osgi, soa, wso2, sca, soa-suite

你好，WSO2 社区。

我的最后一个关于我研究架构的问题不是技术问题，而是面向未来的问题。

我在考虑 Suite 的 OSGi 方法，这是我发现的关于 SOA 和 WSO2 最有趣的抽象事物之一。OSGi 肯定是一个令人费解的难题。

考虑连接在一起的部分让我想起了服务组件架构：一种更容易将所有部分视为一个整体的方法。

好吧，我的问题，我的想法，是：“**为什么不为 WSO2 启用 SCA，当所有部分都以 Carbon 作为共同点时？** ” Carbon 似乎是 SCA 的一个不错的候选者。

该架构下面只能有一个 Carbon 实例，上面只有一个 WSO2 组件。用户应该能够仅通过一个界面与 Carbon 交互，并查看所有部件及其安装的功能。

可能吗？如果不是，为什么？

我希望我一路走来对我有所帮助，我感谢你陪我走到了旅程的尽头！

我希望有机会再次合作或简单地分享想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:44:10.600

它在概念上类似于它在 Carbon App 模型中对 OSGi 和端点引用所做的事情。可能可以将 SCA 组装视为替代接线模型。

# java - 无法从 Google Play Android Developer API 获取订阅信息

> ID：11115381
> 
> 赞同：26
> 
> 时间：2012-06-20T08:14:03.880
> 
> 标签：java, android, google-api, subscription, google-play

我正在尝试使用适用于 Java 的 Google API 客户端库来获取有关在我的 android 应用中购买的用户订阅的信息。这是我现在的做法：

```
HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
JsonFactory JSON_FACTORY = new JacksonFactory();

GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                    .setJsonFactory(JSON_FACTORY)
                    .setServiceAccountId(GOOGLE_CLIENT_MAIL)
                    .setServiceAccountScopes("https://www.googleapis.com/auth/androidpublisher")
                    .setServiceAccountPrivateKeyFromP12File(new File(GOOGLE_KEY_FILE_PATH))
                    .build();

Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).
                    setApplicationName(GOOGLE_PRODUCT_NAME).
                    build();

Androidpublisher.Purchases purchases = publisher.purchases();
Get get = purchases.get("XXXXX", subscriptionId, token);
SubscriptionPurchase subscripcion = get.execute(); //Exception returned here 
```

`GOOGLE_CLIENT_MAIL`是来自 Google 控制台的 API 访问的电子邮件地址。 `GOOGLE_KEY_FILE_PATH`是从API Access下载的p12文件。
`GOOGLE_PRODUCT_NAME`是品牌信息中的产品名称。
在 Google APIS 控制台中，“Google Play Android Developer API”服务已启用。

我得到的是：

```
{
  "code" : 401,
  "errors" : [ {
    "domain" : "androidpublisher",
    "message" : "This developer account does not own the application.",
    "reason" : "developerDoesNotOwnApplication"
  } ],
  "message" : "This developer account does not own the application."
} 
```

我真的很感谢你对这个问题的帮助......

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-03T14:42:29.643

我让它工作了！我遵循的步骤：

## 先决条件

在开始之前，我们需要生成一个刷新令牌。首先，我们必须创建一个 API 控制台项目：

1.  转到[API 控制台](https://code.google.com/apis/console)并使用您的 Android 开发者帐户（与[Android 开发者控制台](https://play.google.com/apps/publish/Home)中用于上传 APK 的帐户相同）登录。
2.  选择创建项目。
3.  转到左侧导航面板中的服务。
4.  打开*Google Play Android Developer API*。
5.  接受服务条款。
6.  转到左侧导航面板中的 API 访问。
7.  选择创建 OAuth 2.0 客户端 ID：
    *   在第一页，您需要填写产品名称，但不需要徽标。
    *   在第二个页面上，选择**Web 应用程序**并设置**重定向 URI** 和 Javascript 来源。稍后我们将使用它作为重定向 URI。
8.  选择创建客户端 ID。请记住**Client ID**和**Client secret**，稍后我们将使用它们。

所以，现在我们可以生成刷新令牌：

1.  转到以下 URI（请注意，重定向 URI 必须与客户端 ID 中输入的值完全匹配，包括任何尾部反斜杠）：

[https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&redirect_uri=REDIRECT_URI&client_id=CLIENT_ID](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&redirect_uri=REDIRECT_URI&client_id=CLIENT_ID)

1.  出现提示时选择允许访问。
2.  浏览器将使用**代码**参数重定向到您的重定向 URI，该参数类似于 4/eWdxD7b-YSQ5CNNb-c2iI83KQx19.wp6198ti5Zc7dJ3UXOl0T3aRLxQmbwI。复制此值。

创建一个主类：

```
public static String getRefreshToken(String code)
{

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
    try 
    {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
        nameValuePairs.add(new BasicNameValuePair("grant_type",    "authorization_code"));
        nameValuePairs.add(new BasicNameValuePair("client_id",     GOOGLE_CLIENT_ID));
        nameValuePairs.add(new BasicNameValuePair("client_secret", GOOGLE_CLIENT_SECRET));
        nameValuePairs.add(new BasicNameValuePair("code", code));
        nameValuePairs.add(new BasicNameValuePair("redirect_uri", GOOGLE_REDIRECT_URI));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        org.apache.http.HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer buffer = new StringBuffer();
        for (String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        String refreshToken = json.getString("refresh_token");                      
        return refreshToken;
    }
    catch (Exception e) { e.printStackTrace(); }

    return null;
} 
```

`GOOGLE_CLIENT_ID`，`GOOGLE_CLIENT_SECRET`并且`GOOGLE_REDIRECT_URI`是以前的值。

最后，我们有了刷新令牌！该值不会过期，因此我们可以存储在某个站点中，例如属性文件。

## 访问 Google Play Android Developer API

1.  获取访问令牌。我们将需要我们之前的刷新令牌：

    ```
    private static String getAccessToken(String refreshToken){

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
    try 
    {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
        nameValuePairs.add(new BasicNameValuePair("grant_type",    "refresh_token"));
        nameValuePairs.add(new BasicNameValuePair("client_id",     GOOGLE_CLIENT_ID));
        nameValuePairs.add(new BasicNameValuePair("client_secret", GOOGLE_CLIENT_SECRET));
        nameValuePairs.add(new BasicNameValuePair("refresh_token", refreshToken));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        org.apache.http.HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer buffer = new StringBuffer();
        for (String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        String accessToken = json.getString("access_token");

        return accessToken;

    }
    catch (IOException e) { e.printStackTrace(); }

    return null; 
    ```

    }

2.  现在，我们可以访问 Android API。我对订阅的到期时间很感兴趣，所以：

    ```
    private static HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
    private static JsonFactory JSON_FACTORY = new com.google.api.client.json.jackson2.JacksonFactory();

    private static Long getSubscriptionExpire(String accessToken, String refreshToken, String subscriptionId, String purchaseToken){

    try{

        TokenResponse tokenResponse = new TokenResponse();
        tokenResponse.setAccessToken(accessToken);
        tokenResponse.setRefreshToken(refreshToken);
        tokenResponse.setExpiresInSeconds(3600L);
        tokenResponse.setScope("https://www.googleapis.com/auth/androidpublisher");
        tokenResponse.setTokenType("Bearer");

        HttpRequestInitializer credential =  new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setClientSecrets(GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)
                .build()
                .setFromTokenResponse(tokenResponse);

        Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).
                setApplicationName(GOOGLE_PRODUCT_NAME).
                build();

        Androidpublisher.Purchases purchases = publisher.purchases();
        Get get = purchases.get(GOOGLE_PACKAGE_NAME, subscriptionId, purchaseToken);
        SubscriptionPurchase subscripcion = get.execute();

        return subscripcion.getValidUntilTimestampMsec();

    }
    catch (IOException e) { e.printStackTrace(); }
    return null; 
    ```

    }

就这样！

一些步骤来自[https://developers.google.com/android-publisher/authorization](https://developers.google.com/android-publisher/authorization)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-17T13:08:39.847

您可以使用`com.google.api-client`和`google-api-services-androidpublisher`库。

首先去谷歌开发者控制台上的项目（[https://console.developers.google.com](https://console.developers.google.com)）

*   APIs & Auth -> APIs
*   启用“Google Play Android 开发者 API”
*   转到凭据 -> 创建新的客户端 ID
*   选择服务帐号
*   创建客户 ID
*   将 p12 文件保存在安全的地方

然后将刚刚为服务帐户生成的电子邮件地址添加到您的 google play 开发者控制台 ( [https://play.google.com/apps/publish/](https://play.google.com/apps/publish/) )

*   设置 -> 用户和权限 -> 邀请新用户
*   粘贴`@developer.gserviceaccount.com`电子邮件帐户
*   选择“查看财务报告”
*   发送邀请

现在到代码。将以下依赖项添加到您的 pom.xml 文件中：

```
<dependency>
    <groupId>com.google.api-client</groupId>
    <artifactId>google-api-client</artifactId>
    <version>1.18.0-rc</version>
</dependency>
<dependency>
    <groupId>com.google.http-client</groupId>
    <artifactId>google-http-client-jackson2</artifactId>
    <version>1.18.0-rc</version>
</dependency>
<dependency>
    <groupId>com.google.apis</groupId>
    <artifactId>google-api-services-androidpublisher</artifactId>
    <version>v1.1-rev25-1.18.0-rc</version>
</dependency> 
```

然后首先验证签名：

```
byte[] decoded = BASE64DecoderStream.decode(KEY.getBytes());
KeyFactory keyFactory = KeyFactory.getInstance("RSA");
PublicKey publicKey = keyFactory.generatePublic(new X509EncodedKeySpec(decoded));
Signature sig = Signature.getInstance("SHA1withRSA");
sig.initVerify(publicKey);
sig.update(signedData.getBytes());
if (sig.verify(BASE64DecoderStream.decode(signature.getBytes())))
{
    // Valid
} 
```

如果签名验证获取订阅详细信息：

```
// fetch signature details from google
HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();
JsonFactory jsonFactory = JacksonFactory.getDefaultInstance();
GoogleCredential credential = new GoogleCredential.Builder()
    .setTransport(httpTransport)
    .setJsonFactory(jsonFactory)
    .setServiceAccountId(ACCOUNT_ID)
    .setServiceAccountScopes(Collections.singleton("https://www.googleapis.com/auth/androidpublisher"))
    .setServiceAccountPrivateKeyFromP12File(new File("key.p12"))
    .build();

AndroidPublisher pub = new AndroidPublisher.Builder(httpTransport, jsonFactory, credential)
    .setApplicationName(APPLICATION_NAME)
    .build();
AndroidPublisher.Purchases.Get get = pub.purchases().get(
    APPLICATION_NAME,
    PRODUCT_ID,
    token);
SubscriptionPurchase subscription = get.execute();
System.out.println(subscription.toPrettyString()); 
```

这将通过生成 JWT 令牌来处理所有令牌问题，因此您不必自己处理它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-19T10:50:21.763

对于那些想要使用 Java 在 Google 的 AppEngine 上检查订阅状态的人，这里是我基于 SO 上的许多代码的工作示例。我花了几天时间解决了许多由于缺乏经验而导致的错误。我看到很多建议检查服务器上的订阅状态，但我在 AppEngine 上做起来并不容易。如果没有在 SO 上找到答案，我无法想出这个。

**步骤1**

首先，我们需要通过 Jonathan Naguin 的答案中的“先决条件”部分，直到您从 Web 浏览器获取**代码。**现在你有；

*   客户编号
*   客户端密码
*   重定向 URI
*   代码

准备好。

请注意，我们在 AppEngine 上运行下面显示的所有代码。我像这样使用记录器。

```
static final Logger log = Logger.getLogger(MyClassName.class.getName()); 
```

**第2步**

我们需要获取刷新令牌。将 [YOUR CLIENT ID]、[YOUR CLIENT SECRET]、[YOUR CODE]、[YOUR REDIRECT URI] 替换为您的字符串后运行如下所示的代码。

```
private String getRefreshToken()
{
    try
    {
        Map<String,Object> params = new LinkedHashMap<>();
        params.put("grant_type","authorization_code");
        params.put("client_id",[YOUR CLIENT ID]);
        params.put("client_secret",[YOUR CLIENT SECRET]);
        params.put("code",[YOUR CODE]);
        params.put("redirect_uri",[YOUR REDIRECT URI]);

        StringBuilder postData = new StringBuilder();
        for(Map.Entry<String,Object> param : params.entrySet())
        {
            if(postData.length() != 0)
            {
                postData.append('&');
            }
            postData.append(URLEncoder.encode(param.getKey(),"UTF-8"));
            postData.append('=');
            postData.append(URLEncoder.encode(String.valueOf(param.getValue()),"UTF-8"));
        }
        byte[] postDataBytes = postData.toString().getBytes("UTF-8");

        URL url = new URL("https://accounts.google.com/o/oauth2/token");
        HttpURLConnection conn = (HttpURLConnection)url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.getOutputStream().write(postDataBytes);

        BufferedReader  reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuffer buffer = new StringBuffer();
        for (String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        String refreshToken = json.getString("refresh_token");
        return refreshToken;
    }
    catch (Exception ex)
    {
        log.severe("oops! " + ex.getMessage());
    }
    return null;
} 
```

由于刷新令牌不会过期，我们可以将它保存在某个地方，或者只是在我们的代码中硬编码。（我们只需要运行一次上述代码即可获得刷新令牌。）

**第 3 步**

我们需要获取访问令牌。用您的字符串替换 [YOUR CLIENT ID]、[YOUR CLIENT SECRET]、[YOUR REFRESH TOKEN] 后运行如下所示的代码。

```
private String getAccessToken()
{
    try
    {
        Map<String,Object> params = new LinkedHashMap<>();
        params.put("grant_type","refresh_token");
        params.put("client_id",[YOUR CLIENT ID]);
        params.put("client_secret",[YOUR CLIENT SECRET]);
        params.put("refresh_token",[YOUR REFRESH TOKEN]);

        StringBuilder postData = new StringBuilder();
        for(Map.Entry<String,Object> param : params.entrySet())
        {
            if(postData.length() != 0)
            {
                postData.append('&');
            }
            postData.append(URLEncoder.encode(param.getKey(),"UTF-8"));
            postData.append('=');
            postData.append(URLEncoder.encode(String.valueOf(param.getValue()),"UTF-8"));
        }
        byte[] postDataBytes = postData.toString().getBytes("UTF-8");

        URL url = new URL("https://accounts.google.com/o/oauth2/token");
        HttpURLConnection conn = (HttpURLConnection)url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.getOutputStream().write(postDataBytes);

        BufferedReader  reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuffer buffer = new StringBuffer();
        for (String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        String accessToken = json.getString("access_token");
        return accessToken;
    }
    catch (Exception ex)
    {
        log.severe("oops! " + ex.getMessage());
    }
    return null;
} 
```

**第4步**

我想知道的只是订阅的 UTC 过期时间。下面显示的代码返回过期 UTC，发现错误时返回 0。您需要提供您的包名称、产品 ID（=订阅 ID）、您在第 3 步中获得的访问令牌以及在您的购买数据中找到的购买令牌。

```
private long getExpireDate(String packageName,String productId,String accessToken,String purchaseToken)
{
    try
    {
        String charset = "UTF-8";
        String query = String.format("access_token=%s",URLEncoder.encode(accessToken,charset));

        String path = String.format("https://www.googleapis.com/androidpublisher/v1/applications/%s/subscriptions/%s/purchases/%s",packageName,productId,purchaseToken);
        URL url = new URL(path + "?" + query);
        HttpURLConnection connection = (HttpURLConnection)url.openConnection();
        connection.setRequestProperty("Accept-Charset",charset);
        connection.setRequestMethod("GET");

        BufferedReader  reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        StringBuffer buffer = new StringBuffer();
        for(String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        return json.optLong("validUntilTimestampMsec");
    }
    catch (Exception ex)
    {
        log.severe("oops! " + ex.getMessage());
    }
    return 0;
} 
```

注意产品 ID 或订阅 ID 是在开发者控制台上找到的字符串。您的订阅项目出现在名称/id 列中。它看起来像这样。

```
Description of item(product id) 
```

**最后一步（有趣的部分）**

现在我们有所有组件来验证订阅是否有效。我确实喜欢这个。您需要将 [YOUR PACKAGE NAME]、[YOUR PRODUCT ID] 替换为您的。

您需要提供可以通过 iabHelper 代码中的 Purchase#getOriginalJson() 获得的购买数据。

```
private boolean checkValidSubscription(String purchaseData)
{
    String purchaseToken;
    JSONObject json;
    try
    {
        json = new JSONObject(purchaseData);
    }
    catch (JSONException e)
    {
        log.severe("purchaseData is corrupted");
        return true;    // false positive
    }
    purchaseToken = json.optString("purchaseToken");
    if(purchaseToken.length() == 0)
    {
        log.severe("no purchase token found");
        return true;    // false positive
    }
    String accessToken = getAccessToken();
    if(accessToken == null)
    {
        return true;    // false positive
    }
    long expireDate = getExpireDate([YOUR PACKAGE NAME],[YOUR PRODUCT ID],accessToken,purchaseToken);
    if(expireDate == 0)
    {
        log.severe("no expire date found");
        return true;    // false positive
    }
    expireDate += 86400000l;    // add one day to avoid mis judge
    if(expireDate  < System.currentTimeMillis())
    {
        log.severe("subscription is expired");
        return false;
    }
    // just for log output
    long leftDays = (expireDate - System.currentTimeMillis()) / 86400000l;
    log.info(leftDays + " days left");
    return true;
} 
```

**调试注意事项**

Google 返回 JSON 字符串作为响应。如果代码无法按预期工作，记录 JSON 字符串可能有助于了解问题所在。

我希望这可以帮助别人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-04T20:23:42.603

为了搭载 Jonathan Naguin 的出色答案，这是获取刷新和访问令牌的 nodejs 版本：

```
//This script is to retreive a refresh token and an access token from Google API. 
//NOTE: The refresh token will only appear the first time your client credentials are used. 
//      I had to delete my client id within api console and create a new one to get the refresh token again.

//This is the downloaded json object from Google API Console. Just copy and paste over the template below.
var googleJson = {"web":{"auth_uri":"","client_secret":"","token_uri":"","client_email":"","redirect_uris":[""],"client_x509_cert_url":"","client_id":"","auth_provider_x509_cert_url":"","javascript_origins":[""]}};

//Retrieved from OAuth
var code            = ''; // Retrieved from the response of the URL generated by printGoogleAuthUrl(). You will need to be logged in as your publisher. Copy and paste the generated url. Copy the code parameter into this variable.
var refreshToken    = ''; // Retrieved from the printRefreshToken() function call. Requires the code variable to be filled out.
var accessToken     = ''; // Retrieved from the printAccessToken() function call. Requires the refreshToken variable to be filled out.

var querystring = require('querystring');
var https = require('https');
var fs = require('fs');

function printGoogleAuthUrl()
{
    console.log("https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&redirect_uri=" + googleJson.web.redirect_uris[0] + "&client_id=" + googleJson.web.client_id);
}

function printRefreshToken()
{
    var post_data = querystring.stringify({
        'grant_type'    : 'authorization_code',
        'client_id'     : googleJson.web.client_id,
        'client_secret' : googleJson.web.client_secret,
        'code'          : code,
        'redirect_uri'  : googleJson.web.redirect_uris[0]
    });

    var post_options = {
      host: 'accounts.google.com',
      port: '443',
      path: '/o/oauth2/token',
      method: 'POST',
      headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Content-Length': post_data.length
        }
    };

    var post_req = https.request(post_options, function(res) {
        res.setEncoding('utf8');
        var data = "";
        res.on('data', function (chunk) {
            data += chunk;
        });

        res.on('end', function(){
            var obj = JSON.parse(data);
            if(obj.refresh_token)
            {
                refreshToken = obj.refresh_token;
            }
            else
            {
                console.log("No refresh token found. I had to clear the web client id in Google Api Console and create a new one. There might be a better way here.");
            }   

            console.log(data);

        });
    });

    post_req.write(post_data);
    post_req.end();
}

function printAccessToken()
{
    var post_data = querystring.stringify({
        'grant_type'    : 'refresh_token',
        'client_id'     : googleJson.web.client_id,
        'client_secret' : googleJson.web.client_secret,
        'refresh_token' : refreshToken
    });

    var post_options = {
      host: 'accounts.google.com',
      port: '443',
      path: '/o/oauth2/token',
      method: 'POST',
      headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Content-Length': post_data.length
        }
    };

    var post_req = https.request(post_options, function(res) {
        res.setEncoding('utf8');
        var data = "";
        res.on('data', function (chunk) {
            data += chunk;
        });

        res.on('end', function(){
            var obj = JSON.parse(data);
            if(obj.access_token)
                accessToken = obj.access_token;
            else
                console.log("No access token found.");

            console.log(data);

        });
    });

    post_req.write(post_data);
    post_req.end();
}

printGoogleAuthUrl();
//printRefreshToken();  
//printAccessToken(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-08T15:39:25.610

对于那些寻找 AndroidPublisher v3 的最新答案的人，请看这里：[https](https://stackoverflow.com/a/57943483/1028256) ://stackoverflow.com/a/57943483/1028256 。

无需处理 refreshToken 和 accessToken，只需几行代码。

对于 Android 客户端，我发现了这个“官方”示例代码：[https ://github.com/googlesamples/android-play-publisher-api/blob/master/v3/java/src/com/google/play/developerapi/samples/ AndroidPublisherHelper.java](https://github.com/googlesamples/android-play-publisher-api/blob/master/v3/java/src/com/google/play/developerapi/samples/AndroidPublisherHelper.java)并且有一些选项可以使用 .p12 文件或应用程序凭据来获取 AndroidPublisher。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-04T21:24:30.943

我很确定您必须使用您的客户 ID，而不是电子邮件地址。它看起来像这样：37382847321922.apps.googleusercontent.com

请参阅[https://developers.google.com/android-publisher/authorization](https://developers.google.com/android-publisher/authorization)

```
client_id=<the client ID token created in the APIs Console> 
```

而且我很确定您不需要 P12 文件。你只需要

```
client_secret=<the client secret corresponding to the client ID> 
```

尝试首先从命令行手动执行此操作，使用“wget”。

# python - 在相似度矩阵中找到不在对角线上的最高值

> ID：11115383
> 
> 赞同：1
> 
> 时间：2012-06-20T08:14:17.810
> 
> 标签：python, matrix, numpy

假设我有以下[相似度矩阵](http://en.wikipedia.org/wiki/Similarity_matrix)：

```
matrix = [[100.0, 66.666666666666671, 61.539999999999999, 59.260000000000005, 59.260000000000005, 82.61333333333333, 61.539999999999999, 61.539999999999999, 61.539999999999999, 78.259999999999991],
[66.666666666666671, 100.0, 91.306666666666672, 87.5, 87.5, 69.233333333333334, 91.306666666666672, 91.306666666666672, 91.306666666666672, 65.386666666666656],
[61.539999999999999, 91.306666666666672, 100.0, 88.0, 88.0, 70.373333333333335, 91.666666666666671, 91.666666666666671, 100.0, 66.666666666666671],
[59.260000000000005, 87.5, 88.0, 100.0, 84.620000000000005, 74.079999999999998, 95.833333333333329, 95.833333333333329, 88.0, 64.286666666666662],
[59.260000000000005, 87.5, 88.0, 84.620000000000005, 100.0, 67.859999999999999, 88.0, 88.0, 88.0, 64.286666666666662],
[82.61333333333333, 69.233333333333334, 70.373333333333335, 74.079999999999998, 67.859999999999999, 100.0, 76.926666666666662, 76.926666666666662, 76.926666666666662, 87.5],
[61.539999999999999, 91.306666666666672, 91.666666666666671, 95.833333333333329, 88.0, 76.926666666666662, 100.0, 100.0, 91.666666666666671, 66.666666666666671],
[61.539999999999999, 91.306666666666672, 91.666666666666671, 95.833333333333329, 88.0, 76.926666666666662, 100.0, 100.0, 91.666666666666671, 66.666666666666671],
[61.539999999999999, 91.306666666666672, 100.0, 88.0, 88.0, 76.926666666666662, 91.666666666666671, 91.666666666666671, 100.0, 66.666666666666671],
[78.259999999999991, 65.386666666666656, 66.666666666666671, 64.286666666666662, 64.286666666666662, 87.5, 66.666666666666671, 66.666666666666671, 66.666666666666671, 100.0]] 
```

请注意，对角线上的值都等于 100.0，上三角等于下三角。

我想找到不在对角线上的五个不同最大值的索引。

目前我这样做蛮力的方式：

```
from collections import defaultdict
d = defaultdict(list)
for i in range(len(matrix)):
    for j in range(len(matrix[i])):
      d[matrix[i][j]].append((i,j))

for value in sorted(d.keys(), reverse=True)[1:6]:
    print value, d[value] 
```

这使：

```
95.8333333333 [(3, 6), (3, 7), (6, 3), (7, 3)]
91.6666666667 [(2, 6), (2, 7), (6, 2), (6, 8), (7, 2), (7, 8), (8, 6), (8, 7)]
91.3066666667 [(1, 2), (1, 6), (1, 7), (1, 8), (2, 1), (6, 1), (7, 1), (8, 1)]
88.0 [(2, 3), (2, 4), (3, 2), (3, 8), (4, 2), (4, 6), (4, 7), (4, 8), (6, 4), (7, 4), (8, 3), (8, 4)]
87.5 [(1, 3), (1, 4), (3, 1), (4, 1), (5, 9), (9, 5)] 
```

但这是低效的，因为我遍历整个矩阵，而我只需要遍历一半矩阵：对于最高值`95.8333333333`，我只关心索引`(3,6)`和`(3,7)`.

有没有更有效的方法来做到这一点，也许使用 numpy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:28:20.507

Numpy 会更快。

```
import numpy as np

m = np.array(matrix) * np.diag(len(matrix)) # set the upper triangle to zero
for top_value in sorted((np.unique(m)), reverse=True)[1:6]:
    print top_value, zip(*np.where(m == top_value)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:29:20.460

```
from heapq import nlargest
from collections import defaultdict

d = defaultdict(list)

for i in xrange(len(matrix)):
    for j in xrange(i):
      d[matrix[i][j]].append((i, j))

for value, positions in nlargest(5, d.items(), key=lambda item: item[0]):
    print value, positions 
```

*   使用 xrange 代替 range
*   仅将 j 循环到 i - 1（如果 i = 0，则永远不会运行内部循环...）
*   为了有效使用，不要对列表进行排序，而是使用 heapq 中的 nlargest，因为它为此使用了堆数据结构。这对于大型矩阵应该很重要。

# qt - Qt：如何在模型更改时更新 GUI？

> ID：11115384
> 
> 赞同：0
> 
> 时间：2012-06-20T08:14:20.360
> 
> 标签：qt, signals-slots, updates

我在我的 GUI 中使用复选框来切换控制由信号/插槽连接的机器的类中的位。

我还需要相反的方向，因为如果机器的某些命令切换相同的位，我的 GUI 应该反映这些更改。

我的问题是：当我单击复选框时，发送信号时其状态尚未更新。所以第一个信号到达机器，位被切换，机器用第二个信号响应并到达 GUI 处理程序方法“updateCheckBoxXYZ”。现在我想弄清楚是否需要更新复选框。

如果整个链是由用户启动的，最后会自动更新复选框。如果内部命令直接切换该位，则需要选中复选框以反映内部更改。

因为复选框还没有被选中，所以我不能要求'isChecked()'。

我应该怎么做才能不陷入无限循环？

**更新：** 我刚刚尝试了以下代码：

```
// slot called by toggled(bool)

void DialogXY::checkBoxXYChanged(bool bState)
{
    if (bState != m_bGuiStateXY)
    {
        m_bGuiStateXY = bState; 
        emit GuiXYChanged(bState);
        // optional: .. do some GUI related things ..
    }
}

// slot called on signal 'GuiXYChanged(bState)'

void Machine::changeXY(int iModul, bool bState)
{
    if (bState != m_bMachineStateXY)
    {
        emit MachineXYChanged(bState);
    }
    // .. change machine configuration ..
}

// slot called on signal 'MachineXYChanged(bState)'

void DialogXY::updateCheckBoxXY(bool bState)
{    
    if (bState != m_bStateXY)
    {
        ui.checkBoxXY->setChecked(bState);
        // will signal toggled()
    }
} 
```

但是我需要为每个 GUI 项目提供额外的变量，然后我必须正确初始化，等等。

我更喜欢更优雅的东西。

# android - 键盘记录器或了解 Android 应用程序（Eclipse）中最常按下的按钮

> ID：11115390
> 
> 赞同：0
> 
> 时间：2012-06-20T08:14:40.327
> 
> 标签：android, eclipse

我想开发一个我有按键日志的 Android 应用程序。用外行语言，我想跟踪我在我的 Android 应用程序上按下的所有按钮，以便我可以制作 FAVORITE 列。在 FAVORITE 中，它存储了所有最常用按钮的数据。

例如，在 YouTube.com 上也有一个单独的收藏选项卡，用于跟踪最常观看的视频或相关视频。如果有人可以帮助我，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:30:48.177

就您而言，我只会制作单例类，在其中保存某种计数器列表（更好的哈希图，`Button`键在哪里`int`，按下的值在哪里）。然后在每个单击侦听器中增加该单例中的计数器。然后在收藏夹屏幕中，您可以找到哪个按钮的次数最多（点击次数）

PS这是用于临时存储。如果您想要永久存储，请使用 sqlite 数据库

# java - 如何在 Java 中返回 Android 的 WebService 中的文件

> ID：11115393
> 
> 赞同：0
> 
> 时间：2012-06-20T08:14:51.803
> 
> 标签：java, android, web-services, ksoap2

我在 java 中创建了一个 web 服务，它应该返回我电脑中文件夹的内容。我想用文件名填写一个列表，当用户点击一个时，它将被我的应用程序打开。对于测试，我只想至少获得文件名。我使用了以下代码：

简单网络服务：

```
@WebService
@SOAPBinding(style=Style.RPC)
public interface SimpleService {
   @WebMethod
   File getFiles();
} 
```

SimpleWebServiceImpl：

```
@WebService(endpointInterface="com.medex.webServiceMegXsoft.SimpleService")
public class SimpleServiceImpl implements SimpleService{
    public File getFiles() {
        File directory = new 
            File("C:\\Users\\student\\Desktop\\MegXsoftMobile\\");
        return directory;
    }
} 
```

简单服务发布者：

```
public class SimpleServicePublisher {
    public static void main(String[] args) {
        Endpoint.publish("http://192.168.0.58:9000/simple",
                new SimpleServiceImpl());
    }
} 
```

我的接收器：

```
public class Receiver {

private final String NAME_SPACE = "http://192.168.0.71:9000/";
private final String URL = "http://192.168.0.71:9000/simple?wsdl";
private final String SOAP_ACTION = "\"getFiles\"";
private final String METHOD_NAME = "getFiles";
private Object resultsRequestSOAP;

public File getFilesFromXML() {
    SoapObject request = new SoapObject(NAME_SPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);
    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
    try
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        resultsRequestSOAP =  envelope.getResponse();
    } catch (SoapFault e) {
        e.printStackTrace();
    }catch (XmlPullParserException e){
        e.printStackTrace();
    }catch (IOException e) {
        e.printStackTrace();
    }catch (Exception e){
        e.printStackTrace();
    }

    return (File)resultsRequestSOAP;
} 
```

}

最后是活动：

```
ArrayList<String> stringTable;
File files = null;
ProgressDialog dialog;
Thread thread;
Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this;
    dialog = ProgressDialog.show(this, null, "loading", true, false);

    thread = new Thread(new Runnable() {
        public void run() {
            Receiver receiver = new Receiver();
            files = receiver.getFilesFromXML();
            dialog.dismiss();
        }
    });
    thread.start();

    final Handler h = new Handler();
    h.postDelayed(new Runnable() {

        public void run() {
            if (thread.getState() == Thread.State.TERMINATED) {
                int i = 0;

                stringTable = new ArrayList<String>();

                for (File file : files.listFiles()) {
                    stringTable.add(i, file.getName());
                    i++;
                }
                final ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                        context, R.layout.item, stringTable);
                ListView listView = getListView();
                listView.setAdapter(adapter);

                listView.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> parent,
                            View view, int position, long id) {
                        System.out.println(stringTable.get(position));
                    }
                });

            }
            h.postDelayed(this, 1000);
        }
    }, 1000);
} 
```

它似乎发布了一些东西，就像我去的时候我`http://192.168.0.58:9000/simple?wsdl`在 XML 中有一些行。但我觉得我无法`File`在我的 android 中收到。我收到了这个错误：

> 06-20 13:55:55.759：W/System.err(13370)：org.xmlpull.v1.XmlPullParserException：预期：END_TAG {http://schemas.xmlsoap.org/soap/envelope/}正文（位置：END_TAG @1:290 在 java.io.InputStreamReader@4053a7f0)

如果有人知道如何更轻松地获取文件列表，欢迎您:) 我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:56:10.517

嗯，不确定，但我不相信有一种真正的方法来支持 SOAP 中的“文件”构造，但您可能能够构造带有 mime 编码附件的消息。[这个关于 PHP 服务器的类似问题的链接](https://stackoverflow.com/questions/10429353/how-to-send-and-mime-attachment-using-pear-soap)导致[This description on how to do it in Java and Jax/RPC](http://www.ibm.com/developerworks/xml/library/ws-tip-soapjax.html)

祝你好运！

# c# - 如何创建受密码保护的项目 Visual Studio 2010

> ID：11115394
> 
> 赞同：4
> 
> 时间：2012-06-20T08:14:53.333
> 
> 标签：c#, visual-studio-2010

我正在尝试在 Visual Studio 2010 中创建一个受密码保护的项目。Visual Studio 中是否有一个选项可以保护项目文件夹在没有密码或其他东西的情况下被访问？

我需要这个来保护我的项目免受其他爱管闲事的人或某种外部程序的影响。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:18:04.100

据我所知，没有这样的选择。

无论如何，用密码保护文件夹是一个非常糟糕的主意，因为暴力破解它可能真的很容易。

我建议你使用[TrueCrypt](https://www.truecrypt.org/)来创建一个受保护的存储，并像容器一样使用它，在你需要时安装它，当你不坐在你的电脑前时卸载它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T08:18:59.730

你不能在 Visual Studio 中这样做，但如果我**正确**理解你的问题是使用源代码控制，你*可以*做的*可能的解决方案。*

 **将您的代码推入一些`source control`（其中有很多免费的），即使出现问题（出于 1000 种可能的原因），您也始终有可能调查问题历史并将不必要的更改回滚。

相反，提交`source control` **可以**受您的密码保护。

希望这可以帮助。**

# c# - 用于简单 WCF Web 服务的 Web.config

> ID：11115395
> 
> 赞同：1
> 
> 时间：2012-06-20T08:14:53.853
> 
> 标签：c#, .net, wcf, web-services, c#-4.0

我已经创建了简单的 Web 服务。代码：

```
[ServiceContract]
public interface ITsdxService
{
    [OperationContract]
    void DoWork();

    [OperationContract]
    string Test();
}

public class TsdxService : ITsdxService
{
    public void DoWork()
    {
    }

    public string Test()
    {
        return "Hello World!";
    }
} 
```

网络配置：

```
<system.serviceModel>
<services>
  <service name="Test.TSDX.UI.TsdxService">
    <endpoint 
        address="Tsdx"
        binding="wsHttpBinding"
        bindingConfiguration="TestBinding"
        contract="Test.TSDX.UI.ITsdxService" />
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding name="TestBinding" />
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

当我从 Visual Studio 运行时，我输入 localhost:50517/TsdxService.svc?wsdl 一切正常 - 我可以看到 wsdl，但是当我输入 localhost:50517/TsdxService.svc/Tsdx/Test 或 localhost:50517/TsdxService.svc/ Tsdx/DoWork 我什么也没看到。Fiddler 告诉我我收到 400 错误。断点（在 Test 和 DoWork 方法上）不起作用。为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:24:24.033

将*[WebGet](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.aspx)*属性添加到您的服务操作。

```
[WebGet]
public string Test() 
{
    ...
} 
```

为此，您还需要将[WebScriptEnablingBehavior](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.webhttpbehavior.aspx)添加到服务配置中。另外，使用*webHttpBinding*。这些都是让服务作为 AJAX 服务工作所必需的。

*定义：*

```
<endpointBehaviors>
    <behavior name="EndpointBehavior">
        <enableWebScript />
    </behavior>
</endpointBehaviors> 
```

*参考：*

```
<endpoint behaviorConfiguration="EndpointBehavior"
    binding="webHttpBinding"
    ...
/> 
```

# javascript - 如何使用 JavaScript 刷新 RadGrid 控件？

> ID：11115404
> 
> 赞同：0
> 
> 时间：2012-06-20T08:15:26.997
> 
> 标签：javascript, asp.net, radgrid

此函数给出错误：

```
function RefreshGrid(){
    window.location.href="Form_ElameMamoreBazdid.aspx";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:18:12.043

** Java 脚本 **

```
function refreshGrid() {                   
    $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest();                  
} 
```

** C＃ **

```
protected void RadAjaxManager1_AjaxRequest(object sender, AjaxRequestEventArgs e)
{        
        Shomare_Darkhast = Convert.ToDecimal(Request.QueryString["Shomare_Darkhast"]);
        Grid_Bazdid.DataSource = Ent.ShowBazdid(Shomare_Darkhast);
        Grid_Bazdid.DataBind();

}
public ObjectQuery ShowBazdid(decimal Shomare_Darkhast)
{
   var List = from b in TBL_Bazdid
               where (b.Shomare_Darkhast == Shomare_Darkhast)
               join k in TBL_Karshenas on b.Code_Karshenas equals k.Code_Karshenas
               select new
               {
                   Radif = b.Radif,
                   Code_Karshenas = b.Code_Karshenas,
                   NameNameKhanevadegie_Karshenas = k.NameNameKhanevadegie_Karshenas,
                   Tarikh = b.Tarikh,
                   SaateShoro = b.SaateShoro,
               };
    return (ObjectQuery)List;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:19:03.490

```
function RefreshGrid()
{
  var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
  masterTable.rebind();
} 
```

请看一下上面的代码。

通过对网格使用客户端绑定，[请查看此帮助文档](http://www.telerik.com/help/aspnet-ajax/grid-client-side-binding-specifics.html "Telerik 的帮助文档")！

# slickgrid - SlickGrid 中的额外列

> ID：11115409
> 
> 赞同：4
> 
> 时间：2012-06-20T08:15:50.340
> 
> 标签：slickgrid

SlickGrid 总是在标题的最右侧保留一点空间，即使没有垂直滚动条。这个额外的空间似乎是一个额外的列。我不想要这个额外的空间。

我没有找到任何暴露的 SlickGrid 组件的 API 来删除它。我在SlickGrid 实现的 autosizeColumns **()**方法中看到可用宽度是由**availWidth = (options.autoHeight ? viewportW : viewportW - scrollbarDimensions.width)**逻辑计算的。当我从逻辑中避免**scrollbarDimensions.width**时，那里没有额外的空间。

但是，当垂直滚动条存在时，这会导致**forceFitColumns功能出现问题，还会呈现不必要的水平滚动条。**

有什么办法可以避免这个额外的空间？

嗨，锡，

我想删除我之前描述的 SlickGrid 的额外空间。我已经检查过 SlickGrid 中没有 API 或属性来执行此操作。这就是我修改 SlickGrid 实现的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T13:01:22.323

我使用 v2.1，当我设置时：

```
options = {
    forceFitColumns: true
};
slickgrid.setOptions(options); 
```

不需要垂直滚动时没有额外的列。

# javascript - string.search() 忽略重音字符？

> ID：11115417
> 
> 赞同：1
> 
> 时间：2012-06-20T08:16:19.747
> 
> 标签：javascript, regex

我需要将重音字符视为与非重音字符相同。这是我的代码：

```
var re = new RegExp(string, 'i');
if(target.search(re) == 0) { } 
```

它目前忽略了字符的大小写，如果字符有重音，我如何也忽略？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:26:51.267

我认为您必须先删除重音，然后再执行 RegExp。
你可以使用我在[这里](http://scripterlative.com/files/noaccent.htm)找到的这个功能：

```
function stripVowelAccent(str)
{
 var rExps=[
 {re:/[\xC0-\xC6]/g, ch:'A'},
 {re:/[\xE0-\xE6]/g, ch:'a'},
 {re:/[\xC8-\xCB]/g, ch:'E'},
 {re:/[\xE8-\xEB]/g, ch:'e'},
 {re:/[\xCC-\xCF]/g, ch:'I'},
 {re:/[\xEC-\xEF]/g, ch:'i'},
 {re:/[\xD2-\xD6]/g, ch:'O'},
 {re:/[\xF2-\xF6]/g, ch:'o'},
 {re:/[\xD9-\xDC]/g, ch:'U'},
 {re:/[\xF9-\xFC]/g, ch:'u'},
 {re:/[\xD1]/g, ch:'N'},
 {re:/[\xF1]/g, ch:'n'} ];

 for(var i=0, len=rExps.length; i<len; i++)
  str=str.replace(rExps[i].re, rExps[i].ch);

 return str;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T08:20:57.970

使用库 semplice

[http://semplicewebsites.com/removing-accents-javascript](http://semplicewebsites.com/removing-accents-javascript)

```
var latin_map = {
  'Á': 'A', // LATIN CAPITAL LETTER A WITH ACUTE
  'Ă': 'A', // LATIN CAPITAL LETTER A WITH BREVE
...
  'ᵥ': 'v', // LATIN SUBSCRIPT SMALL LETTER V
  'ₓ': 'x', // LATIN SUBSCRIPT SMALL LETTER X
};

String.prototype.latinise = function() {
   return this.replace(/[^A-Za-z0-9]/g, function(x) { return latin_map[x] || x; })
}; 
```

# java - 排队网络和均值分析

> ID：11115430
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:17:12.100
> 
> 标签：java, queueing

1）我正在尝试使用“近似MVA”（平均值分析）对多类工作的“居住时间”计算进行编码。

2）我有一个带有“Exact MVA”的程序。我正在使用 2 个班级和 2 个车站。问题是每个类的吞吐量几乎是我们使用单类 MVa 计算时得到的吞吐量的一半。这是可以的还是程序给出了错误的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:24:43.997

尝试多线程应用程序但发现性能没有更好或更差是很常见的。常见的原因是；

*   使用已经达到极限并且是单线程的资源，例如一个 CPU、一个磁盘、一个网络、一个锁或您的 CPU 到内存的带宽。
*   开销超过了收益。尤其是短期任务。

# c++ - 使用抽象类的继承和多态

> ID：11115432
> 
> 赞同：0
> 
> 时间：2012-06-20T08:17:27.823
> 
> 标签：c++, inheritance

我有一个抽象类型`A`和两个派生类型`A1`和`A2`.
我想向 A 类添加一个方法 M，它采用 A 类型的参数。但是，我需要临时多态性。

确实，我需要 3 个实现：`A1::M(A1 a)`,`A1::M(A2 a)`和`A2::(A1 a)`, `A2::M(A2 a)`。但是我想要一种抽象的方式来调用带有类型 A 的指针的方法 M。

我可以将所有签名声明放在 class 中`A`，但这很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:27:37.683

使用[模拟双重调度](http://en.wikipedia.org/wiki/Double_dispatch#Double_dispatch_in_C.2B.2B)。

```
class A {
public:
    virtual void M(A &) = 0;
    virtual void M(A1 &) = 0;
    virtual void M(A2 &) = 0;
};

class A1 : public A {
public:
    virtual void M(A &a) { a.M(*this); }
    virtual void M(A1 &a) { std::cout << "A1 <- A1\n"; }
    virtual void M(A2 &a) { std::cout << "A2 <- A1\n"; }
};

class A2 : public A {
public:
    virtual void M(A &a) { a.M(*this); }
    virtual void M(A1 &a) { std::cout << "A1 <- A2\n"; }
    virtual void M(A2 &a) { std::cout << "A2 <- A2\n"; }
}; 
```

（参见例如[http://ideone.com/nycls](http://ideone.com/nycls)。）

我认为没有办法避免基类中的多个重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:25:08.183

为什么不这样做呢？

```
void A1::M( A a )
{
    if( dynamic_cast< A1* >( &a ) )
    {
        // do your A1::M1(A1 a) stuff
    }
    else
    if( dynamic_cast< A2* >( &a ) )
    {
        // do your A1::M2(A2 a) stuff
    }
    else
    {
        throw std::logic_error( "Unsupported A type." );
    }
} 
```

并为 A2::M 做同样的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:20:10.260

如果您想要多态行为 - 那么您所需要的只是基类 A 中的一个方法。然后您可以在 A1、A2 中重新实现该方法。

之后你可以写：

```
A *a1 = new A1();
A *a2 = new A2();

a1->M(a2); //polymorphic behavior 
```

如果你做这样的事情：

```
struct A
{
    virtual void M(A *a) {}
};

struct A1 : public A
{
    virtual void M(A1 *a) {cout << "A1" << endl;}
    virtual void M(A *a) {cout << "A" << endl;}
}; 
```

然后：

```
A1 * a1 = new A1();
a1->M(a1); //prints "A1"
A  * a = a1;
a->M(a1); //prints "A" 
```

我不认为这是你想要的行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:44:56.360

这是双重派送。当你写：

```
A* p1;
A* p2;
p1->M(*p2); 
```

应该同时调度 of`*p1`的类型和类型`*p2`。

在开始之前，您必须意识到这意味着不同派生类型`n^2`的函数 。`n`并且在某个地方，必须有人知道所有派生类型（除非您可以为未知的类型对定义某种“默认”实现）。

有两种实现方式。最简单的，如果层次结构是封闭的（即客户端代码不能引入新的派生类）确实在基类中使用了许多虚函数——通常是受保护的，因为它们不是为了在层次结构之外调用而设计的：

```
//  Forward references needed for all derived classes...
class A1;
class A2;
//  ...

class A
{
protectd:
    virtual void doM(A1* arg) = 0;
    virtual void doM(A2* arg) = 0;
    //  ...

public:
    virtual void M(A& arg) = 0;
}; 
```

在派生类中，实现`M`总是相同的：

```
void A1::M(A& arg)
{
    arg.doM( this );
} 
```

这很简单，而且相对有效，但是每次添加新的派生类时都需要更改抽象基类*和所有派生类（必须实现新的虚函数）。*但是，它对于封闭的层次结构很有用；我已经在使用策略模式的类中将其用于部分行为，其中各种策略都在源文件中定义，并且不暴露给客户端（并且策略的抽象基础仅在标头中前向声明，因此如果我添加策略，则无需更改标题）。

更通用的解决方案将涉及`std::map`带有一对 `typeid`as 索引的 , 。您不能`typeid`直接使用，因为它不可复制。C++11 提供了一个`type_index`包装它；如果您使用的是较旧的编译器，那么自己实现一个相当简单。基本原则类似于（可能在 A 本身）：

```
typedef std::pair<std::type_index, std::type_index> TypePairKey;
typedef void (*FuncPtr)( M* arg1, M* arg2 );
typedef std::unordered_map<TypePairKey, FuncPtr> DispatchMap;

static DispatchMap ourDispatchMap; 
```

和：

```
void M( A& arg )        //  NOT virtual !!!
{
    DispatchMap::iterator entry
        = ourDispatchMap.find(
                DispatchMap::value_type( typeid( *this ), typeid( arg ) ) );
    assert( entry != ourDispatchMap.end() );
        //  Or some default handling, maybe throw NotYetImplemented()
    (*entry->second)( this, &arg );
} 
```

真正的问题在于编写每个单独的函数并将它们的地址插入到地图中（在第一次使用之前）。当然，函数本身可以使用`dynamic_cast`，甚至`static_cast`，如果您可以确定它们只会从这里被调用，并且它们可以是所涉及的类的朋友，但仍然有 *n ²*的他们。（一种常见的解决方案是使它们成为其中一个类的静态成员，并让每个派生类定义一个类型的静态成员，该类型负责注册其负责的所有函数。）

# php - 如何获取另一个域中的 xml 返回？

> ID：11115434
> 
> 赞同：-2
> 
> 时间：2012-06-20T08:17:35.857
> 
> 标签：php, xml

抱歉，但我不熟悉从另一个域访问返回。我有这个 url，如果你查看它的源代码，你会看到返回的 xml。如何在 php 中获得这些 xml 返回？

因为稍后我将解析这些 xml。但现在我坚持这一点。T_T

链接： http://ib.sand-08.adnxs.net/ptv?id= [610860](http://ib.sand-08.adnxs.net/ptv?id=610860)

我应该使用卷曲吗？或者只是 file_get_contents 或 fopen 可以解决问题？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:20:45.543

[SimpleXML](http://uk.php.net/manual/en/book.simplexml.php)库允许您这样做。

```
$xmlObj = simplexml_load_file('http://ib.sand-08.adnxs.net/ptv?id=610860'); 
```

这将获取外部 XML 并将其加载到 SimpleXML 对象中。从那里您可以根据需要使用该对象来操作 XML 数据。

您无需自己编写传输层代码，除非您需要对 HTTP 请求进行特殊控制。正如戈登指出的那样，`libxml_set_streams_context`可以给你一些控制，但不会给你控制的程度`cURL`。

# html - 带有销售人员的 HTML 5

> ID：11115437
> 
> 赞同：-4
> 
> 时间：2012-06-20T08:17:56.173
> 
> 标签：html, salesforce, apex-code

我是 HTML 5 的新手。我想在 salesforce 中使用 HTML 5。我想看看 salesforec 如何支持 HTML5。

有没有人知道如何使用。请帮我解决这个问题。

谢谢阿努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:20:37.650

我相信，从 API v23 开始，您可以在 Visualforce 页面中设置 HTML5 DOCTYPE。这将导致在生成 Visualforce 页面时使用 HTML5 Doctype：

```
 <!DOCTYPE html> 
```

假设您有一个名为“Movies”的静态资源，其中包含两个视频文件，这是利用 Visualforce 中的 HTML5 使用原生 HTML5 视频组件显示视频的一种可能方法：

```
 <apex:page docType="html-5.0">
       <video width="320" height="240" controls="controls">
           <source src="{!URLFOR($Resource.Movies,'movie.mp4')}" type="video/mp4" />
           <source src="{!URLFOR($Resource.Movies,'movie.ogg')}" type="video/ogg" />
           Your browser does not support the video tag.
       </video>
  </apex:page> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:42:51.317

您的问题含糊不清，需要更具体。但是，一般而言，Salesforce.com 更关心浏览器支持。它目前支持 IE7+，以及最新版本的 Firefox、Chrome 和 Safari。没有 HTML5 支持的概念，因为这更多的是浏览器而不是应用程序的问题。

作为标准视觉力开发的最佳实践，向网站添加功能，您不应该关心 HTML5 与否。您应该专注于使用提供的本机组件，以便继承浏览器支持。

如果您正在使用站点技术编写自定义站点，则可以将 doctype 指定为 apex:page 标记的属性。但除此之外，您还需要以用户使用的浏览器支持的方式自行开发网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:39:06.247

不要使用销售人员！如果有任何不这样做的选项，请不要这样做！

# zend-framework - 通过交换服务器通过zend服务器发送电子邮件

> ID：11115439
> 
> 赞同：1
> 
> 时间：2012-06-20T08:17:59.837
> 
> 标签：zend-framework, email, zend-form, zend-studio

我想通过交换服务器发送本地电子邮件，但 zend 给我这个消息

> “连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。”

这是我的代码

```
$mailTransport = 
   new Zend_Mail_Transport_Smtp('smtpserver.edu.com', array(
            'auth'     => 'login',
            'username' => 'dummy.edu.com',
            'password' => '123456',
            'port'     => '25',
        ));           

        Zend_Mail::setDefaultTransport($mailTransport);

        $mail = new Zend_Mail();
        $mail->setFrom('dummy.edu.com');//anas.azmeh@ucti.edu.my');
        $mail->setBodyHtml('some message - it may be html formatted text');
        $mail->addTo('dummy.edu.com', 'recipient');
        $mail->setSubject('subject');
        $mail->send(); 
```

我在 gmail 配置中尝试了相同的代码，它运行良好，请尽快帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T10:36:38.957

```
$mail = new Mail\Message();
$mail->setBody("Send Mail");
$mail->setFrom('test@gmail.com', 'Test Site');
$mail->addTo($email_id, 'Test Site');
$mail->setSubject('Your connection is not stablish');

$transport = new Mail\Transport\Sendmail();
$transport->send($mail); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:21:58.080

我认为端口 25、23 和 587 已被阻止，因为我试图 telnet 它们但它给了我失败，所以问题可能来自这些阻塞

# mysql - 使用 PHP、Java 从 PDF 或 Word 中提取数据

> ID：11115447
> 
> 赞同：0
> 
> 时间：2012-06-20T08:18:35.567
> 
> 标签：mysql, pdf, ms-word

我需要这方面的帮助……尤其是因为我不知道从哪里开始……我是一名 IT 本科生，现在和我的同事一起在一家公司接受在职培训。

场景：公司要求我们创建一个程序来生成报告并将其存储在数据库中。将使用的数据库是 MySQL。至于用什么语言，我们在考虑VB.Net、Java、PHP。

该程序必须能够：

1.  生成将通过电子邮件发送到办公室的报告
2.  存储在数据库中
3.  收集所有报告，整理这些报告
4.  生成一份新报告，然后将其发送到他们的主要办公室
5.  然后将其存储在自己的数据库中...

目前，我们仍在尝试确定程序将如何运行以及将使用哪种语言能够从文本文件（可以是 word 文档或 PDF 文件）中读取和提取数据。

该公司还希望该程序能够在线为未来的扩展做好准备。

现在，我们的问题是

1.  有没有办法使用 Java、PHP、VB 从 PDF 或 Word 文件中提取数据，然后将其存储在 MySQL DB 中？
    *   如果有，是否可以在不使用任何第三方软件的情况下实施？
    *   我们选择使用 PDF 或 Word 文件类型的原因是，该文件应可打印以用于存档目的。
2.  我们可以轻松使用哪种编程语言来解决上述问题？

    如果我提供的信息有点混乱，我想道歉。一旦我们本周能够与该公司交谈，我将提供更多信息。

    如果我发布的方式有问题，请原谅我。我只是尽我所能为您提供最好的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:26:49.383

我会回答 Java，因为它是我在工作中使用的。

[您可以轻松地从 Word 文件中提取文本或使用Apache POI](http://poi.apache.org/)构建新的 Word 文件

至于 PDF，[iText](http://itextpdf.com/)或[PDFBox](http://pdfbox.apache.org/)都做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:29:47.740

为什么不能使用第三方软件？如果可以的话，我会推荐类似[How to read PDF files using Java?](https://stackoverflow.com/questions/4784825/how-read-pdf-using-java) .

或者，读取 .doc 文件：[http ://www.roseindia.net/tutorial/java/poi/readDocFile.html](http://www.roseindia.net/tutorial/java/poi/readDocFile.html)

* * *

无论如何，如果您不能使用 3rd 方工具，为什么不阅读规范并弄清楚如何从 PDF、DOC 和 DOCX 文件中提取文本呢？

在这里您可以找到 DOC 规范：http: [//msdn.microsoft.com/en-us/library/cc313118.aspx](http://msdn.microsoft.com/en-us/library/cc313118.aspx)

在这里您可以找到 PDF 格式规范： http: [//www.adobe.com/devnet/pdf/pdf_reference.html](http://www.adobe.com/devnet/pdf/pdf_reference.html)

祝你好运！

# javascript - 当它位于两个 ASPxPageControl 选项卡页中时，我无法访问 ASPxComboBox 组件

> ID：11115457
> 
> 赞同：2
> 
> 时间：2012-06-20T08:19:12.257
> 
> 标签：javascript, asp.net, devexpress, aspxcombobox

当它在 ASPxPageControl 两个标签页中时，我无法访问 ASPxComboBox 组件。所以我用string.Format将此函数添加到ClientSideEvents：

```
function(s, e) {{ 
    if (window['{1}']) {{ 
        {0}.SetSelectedItem(
            {0}.FindItemByText(
                {2}.GetText()
            )
        ); 
        {0}.Focus(); 
        {3}.PerformCallback(
            {0}.GetSelectedItem().value
        ); 
    }} 
}} 
```

并首先在一个标签页然后在另一页触发此功能，我收到错误：

```
Microsoft JScript runtime error: Unable to get value of the property 'SetSelectedItem': object is null or undefined 
```

为什么会这样？切换标签后我可以以某种方式访问​​该组合框吗？
顺便说一句，ASPxPopupControl 出现在两个选项卡上，然后打开..

更多背景：

```
0 is ASPxClientControl.GetControlCollection().Get('<%=ASPxComboBox_Views.ClientID%>'), (compiles to ctl00_ctl00_ASPxSplitter_Main_ContentPlaceHolderMain_ContentProgramMain_ASPxRoundPanelMain_ASPxPageControl_Main_ASPxCallbackPanel_Redagavimas_ASPxCallbackPanel_RedagavimasGrid_GridLayout_Redagavimas_ASPxPopupControl_Layout_ASPxCallbackPanel_Views_ASPxComboBox_Views )
1 is ASPxClientControl.GetControlCollection().Get('<%=ASPxComboBox_Views.ClientInstanceName%>'), (compiles to cbViews )
2 is ASPxClientControl.GetControlCollection().Get('<%=GetClientStr(ASPxHyperLink_Desc.ClientID%>'), (compiles to ctl00_ctl00_ASPxSplitter_Main_ContentPlaceHolderMain_ContentProgramMain_ASPxRoundPanelMain_ASPxPageControl_Main_ASPxCallbackPanel_Redagavimas_ASPxCallbackPanel_RedagavimasGrid_GridLayout_Redagavimas_ASPxHyperLink_Desc )
3 is ASPxClientControl.GetControlCollection().Get('<%=ASPxCallbackPanel_Menu.ClientID%>'), (compiles to ctl00_ctl00_ASPxSplitter_Main_ContentPlaceHolderMain_ContentProgramMain_ASPxRoundPanelMain_ASPxPageControl_Main_ASPxCallbackPanel_Redagavimas_ASPxCallbackPanel_RedagavimasGrid_GridLayout_Redagavimas_ASPxPopupControl_Layout_ASPxCallbackPanel_Menu ) 
```

如果 ASPxComboBox_Views 位于 ASPxPageControl 选项卡中，则它不起作用。准确地说，我的页面如下所示：

```
<..>
<dx:ASPxPageControl ID="ASPxPageControl_Main">
    <TabPages>
        <dx:TabPage><..>
            <dx:ASPxGridView ID="ASPxGridView_Naudojimas">
            //From here starts partial page which is one for both tabpages
            <dx:ASPxPopupControl ID="ASPxPopupControl_Layout">
                <ContentCollection>
                    <dx:PopupControlContentControl ID="PopupControlContentControl_Layout">
                        <div><table><tr><td align="left" width="100%">
                            <dx:ASPxCallbackPanel ID="ASPxCallbackPanel_Views">
                                <PanelCollection>
                                    <dx:PanelContent ID="PanelContent1">
                                            <dx:ASPxComboBox ID="ASPxComboBox_Views" runat="server" ...>
        </dx:TabPage>
        <dx:TabPage><..>
            <dx:ASPxGridView ID="ASPxGridView_Redagavimas">
            //From here starts partial page which is one for both tabpages
            <dx:ASPxPopupControl ID="ASPxPopupControl_Layout">
                <ContentCollection>
                    <dx:PopupControlContentControl ID="PopupControlContentControl_Layout">
                        <div><table><tr><td align="left" width="100%">
                            <dx:ASPxCallbackPanel ID="ASPxCallbackPanel_Views">
                                <PanelCollection>
                                    <dx:PanelContent ID="PanelContent1">
                                            <dx:ASPxComboBox ID="ASPxComboBox_Views" runat="server" TextField="Description" ValueField="FullName" ClientInstanceName="cbViews" TextFormatString="{0}">
(deleted some properties just to be easier to read here) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:34:27.717

您应该设置您在客户端使用的所有控件的 ClientInstanceName。

```
<dx:ASPxCallbackPanel ClientInstanceName="cbPanel1" ...>
<dx:ASPxHyperLink ClientInstanceName="hyperlink1" ..../> 
```

进而：

```
function(s, e) {{ 
    if (window.{0}) {{ 
        {0}.SetSelectedItem(
            {0}.FindItemByText(
                {1}.GetText()
            )
        ); 
        {0}.Focus(); 
        {2}.PerformCallback(
            {0}.GetSelectedItem().value
        ); 
    }} 
}} 
```

其中：
0 - 组合框 ClientInstanceName
1 - 超链接 ClientInstanceName
2 - 回调面板 ClientInstanceName

你真的应该访问 Niranjan 发布的链接。

# ruby-on-rails - Rails - 单击登录链接时页面上出现错误的用户名/密码通知

> ID：11115461
> 
> 赞同：1
> 
> 时间：2012-06-20T08:19:39.507
> 
> 标签：ruby-on-rails, login, notice

我在不应该出现通知时遇到问题。当我单击应用程序中的链接进行登录时，它会闪烁“无效的用户名/密码组合”通知，即使我没有输入任何内容。我明白为什么我会收到该消息 - 这是因为当我单击链接时，我没有输入匹配的用户名和密码，所以会触发错误。但我不确定如何解决这个问题。我希望在用户输入错误组合时出现错误，而*不是*在页面首次出现时出现。

在代码中，“用户”是指管理员，客户是客户。我为这两种类型的人使用相同的登录页面。

另外，我真正想要的是，当用户确实输入了错误的组合时，他们的电子邮件地址将保留在该字段中，这样他们就不必再次输入。我该怎么做呢？

谢谢！！

这是更新的控制器代码：

```
class SessionsController < ApplicationController
  skip_before_filter :authorize
  def new
  end

 def create
    user = User.find_by_email(params[:email])
    customer = Customer.find_by_email(params[:email])

  if user and user.authenticate(params[:password])
    session[:user_id] = user.id
    redirect_to admin_url

  elsif customer and customer.authenticate(params[:password])
    session[:customer_id] = customer.id
    redirect_to customer_path(session[:customer_id]) 

  else
    render :new, notice: "Invalid email/password combination"
  end
 end

  def destroy
    session[:user_id] = nil
    session[:customer_id] = nil
    redirect_to store_url, notice: "Logged out"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:26:04.417

仅在与请求一起发送登录参数时设置闪烁通知：

```
# ...
else
  flash[:notice] = "Invalid username/password combination" if params[:email] || params[:password]
  redirect_to login_url
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:05:47.317

尝试用这个替换你的最后一个 else 语句：

```
else
  if params[:email] || params[:password]
    flash[:notice] = "Invalid username/password combination"
    redirect_to login_url
  end
end 
```

这应该够了吧。关于您在用户输入错误密码时有关在字段中保留的电子邮件地址的问题，请查看此链接：[这里](https://stackoverflow.com/questions/2916995/keep-form-fields-filled-after-an-error-ror/ "这里")

该解决方案的一般要点是使用`'render'`而不是`'redirect_to'`在您的代码中重新加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:37:27.330

我建议您将所有内容包装`if params`并重新`render`查看，而不是重定向以保留电子邮件。

```
if params
  if user ...
    ...
  elsif ...
    ...
  else
    render :new 
```

# eclipse - eclipse 抱怨 play 2.0.1 的编译错误

> ID：11115464
> 
> 赞同：4
> 
> 时间：2012-06-20T08:19:49.043
> 
> 标签：eclipse, playframework, playframework-2.0

eclipse 抱怨 play 2.0.1 出现以下编译错误

```
 The type play.api.templates.Html cannot be resolved. It is 
indirectly referenced from required .class files 
```

但是在play console中，它可以成功编译。

我的环境有什么问题吗？有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:31:52.797

得到了解决方案，我需要把 target/scala-2.9.1/src_managed/main 放到源文件夹

# c# - 防止服务器端方法多次运行

> ID：11115470
> 
> 赞同：0
> 
> 时间：2012-06-20T08:20:13.160
> 
> 标签：c#, asp.net, semaphore

我有一个带有回发按钮的网页，连接到外部数据库以下载一些数据并执行一些数据库更新。我遇到的问题是两个或更多人同时运行此下载或在功能仍在运行时运行此下载的可能性，这可能会导致问题。

如何创建某种形式的信号量，以便在第二个人单击按钮时，他会收到一条消息，说它当前正在更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:24:12.333

在您的外部数据库上使用适当的事务并根据需要在那里应用行锁定；数据库系统应该可以很好地处理并发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:28:11.773

乍一看，我会使用一个包含在 lock 语句中的 ASP.NET 应用程序变量来检查并在需要时更新它。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!GetSem_SomeoneIsDownloading())
    {
        PerformDownload();
        ClearSem_SomeoneIsDownloading();
    }
    else
    {
        DisplayMessageSomeoneIsDownloadingAlready();
    }
}

bool GetSem_SomeoneIsDownloading()
{
    bool isSomeoneDownloading;
    Application.Lock();

    isSomeoneDownloading = (bool)(Application["SomeoneIsDownloading"] ?? false);
    if (!isSomeoneDownloading)
        Application["SomeoneIsDownloading"] = true;

    Application.UnLock();
    return isSomeoneDownloading;
}

void ClearSem_SomeoneIsDownloading()
{
    Application.Lock();
    Application["SomeoneIsDownloading"] = false;
    Application.UnLock();
} 
```

# javascript - 在异步加载 Google 地图时处理网络断开连接

> ID：11115471
> 
> 赞同：1
> 
> 时间：2012-06-20T08:20:17.730
> 
> 标签：javascript, google-maps, google-maps-api-3

尝试异步加载 Google 地图，以便更快地启动 HTML 页面。

已使用链接中提到的以下代码：[https](https://developers.google.com/maps/documentation/javascript/tutorial#asynch) ://developers.google.com/maps/documentation/javascript/tutorial#asynch 。部分：异步加载 API。

```
function initialize() {
  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

**问题：**

1.  `loadScript()`调用函数后网络断开时。目前我们找不到任何方法来检查网络连接是否已终止并进行适当的错误处理。

2.  即使网络有时可用，`initialize()`也不会调用回调函数''。

3.  即使在 3G 网络上，在移动设备上加载谷歌地图也很慢。

    `loadScript()`在上述两种情况下，我们都会在调用后立即启动加载图标。由于`initialize()`没有被回调，它会在加载图标中无限期地被阻塞。

请提供一些指针来处理网络断开和回调函数未调用问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:40.437

Maps API 没有本地方式来处理这个问题。值得庆幸的是 HTML5 做到了。监听 document.online / document.offline 事件非常有效，我已经用它来解决这个问题。

请参阅[https://developer.mozilla.org/en/DOM/document#Event_handlers](https://developer.mozilla.org/en/DOM/document#Event_handlers)

这至少在 iOS 5 和 Android 2.3 中受支持。

您还可以使用 setTimeout 来检查 API 回调是否发生，如果没有发生则适当处理。

# model-view-controller - Extjs4如何调用带参数的函数？

> ID：11115472
> 
> 赞同：0
> 
> 时间：2012-06-20T08:20:23.457
> 
> 标签：model-view-controller, function, extjs

这段代码不能正常工作：我调用一个传递变量的函数这样做的正确方法是什么？有什么建议吗？

```
Ext.define('DigitalPaper.view.DirTree' ,{
    extend: 'Ext.TreePanel',
    requires: ['Ext.window.MessageBox'],
    id: "DirTree",
    store: 'DirTree',
    alias : 'widget.DirTree',
    title : 'Cartelle',
    rootVisible: true,
    useArrows: true,
    scope: this,
    selectNode: undefined,

initComponent: function() {
    //HERE: 
    this.assocFolderColumnset(id);

    this.callParent(arguments);
}

,assocFolderColumnset: function (id){
    console.log(id);
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:24:34.357

更正代码

```
this.assocFolderColumnset(this.id); 
```

并在 assocFolderColumnset

```
,assocFolderColumnset: function (id){
    this.id = id;
    console.log(id);
} 
```

# ios - object-c 中的块函数和内存问题

> ID：11115473
> 
> 赞同：0
> 
> 时间：2012-06-20T08:20:24.610
> 
> 标签：ios, memory, exc-bad-access, objective-c-blocks

我想测试块函数和上下文的值。测试代码为：

//xxx.h

```
@interface textObj :  NSObject 
@property (nonatomic, retain) NSNumber * num;
@end

typedef void (^ returnHandle)(NSNumber * res);

@interface BlockTest : NSObject

- (void) textBlock:(textObj *)num completionHandler:(void (^)(NSNumber * res))handler;

@end 
```

//xxx.m

```
@implementation textObj
@synthesize num;

@end

@interface BlockTest (){
    returnHandle rt;
}

- (void)toggleChromeDisplay;

@end

@implementation BlockTest

- (void) dealloc{
    Block_release(rt);
    [super dealloc];
}

- (void)toggleChromeDisplay
{
    NSNumber *ret = [NSNumber numberWithInt:111];
    rt(ret);
}

void (^handle)(NSNumber * res, NSError *error);

- (void) textBlock:(textObj *)g1 completionHandler:(void (^)(NSNumber * res))handler
{
    rt = Block_copy(handler);
    [self performSelector:@selector(toggleChromeDisplay) withObject:nil afterDelay:0.5];
    return;
}

@end 
```

测试示例调用代码是：

```
//first sample code...
- (void)viewDidLoad
{
    [super viewDidLoad];

    test = [[BlockTest alloc]init];
    textObj * g1;
    g1 = [[textObj alloc] init];
    [g1 setNum:[NSNumber numberWithInt:10]];
    NSLog(@"main 0 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    [test textBlock:g1 completionHandler:^(NSNumber *res) {
        NSLog(@"value=%@", [g1 num]);
        [g1 setNum:[NSNumber numberWithInt:20]];
        NSLog(@"main 1 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    } ];
    NSLog(@"main 2 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    [g1 release];
    NSLog(@"main 3 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);  
} 
```

在块功能中，我可以更改 g1 值。没关系。但是当我将 g1 声明为测试的公共值时，它会在块函数中出错。g1 无法访问。**它输出 EXC_BAD_ACCESS(code=2, address=0x26) 错误**。

```
//second sample code...
@interface UIMainViewController (){
@public
    textObj * g1;
}
@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    test = [[BlockTest alloc]init];
    //textObj * g1;
    g1 = [[textObj alloc] init];
    [g1 setNum:[NSNumber numberWithInt:10]];
    NSLog(@"main 0 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    [test textBlock:g1 completionHandler:^(NSNumber *res) {
        NSLog(@"value=%@", [g1 num]);
        [g1 setNum:[NSNumber numberWithInt:20]];
        NSLog(@"main 1 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    } ];
    NSLog(@"main 2 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);
    [g1 release];
    NSLog(@"main 3 g1 num=%@ count=%d", [g1 num], [g1 retainCount]);  
} 
```

我混淆了两个不同的示例代码，为什么第二个测试代码会遇到崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:41:18.187

保留计数是无用的。不要叫它。永远不会。

根据定义，retainCount 不能返回零。您正在向一个已释放对象发送消息，该对象是未定义的，通常是崩溃的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:27:19.210

主要问题是，正如@H2CO3 指出的那样，您在`g1`执行块之前释放。它在一种情况下起作用而不在另一种情况下起作用的原因是[块保留了它们在复制时引用的任何局部对象变量](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)。

在您的第一个示例中，`g1`是方法范围的本地变量，因此块保留它。

在您的第二个示例中，`g1`是一个 ivar（有效`self->g1`），因此该块保留`self`. 但是您`g1`在声明块后立即释放，因此当块调用时`self->g1`，它会获得一个无效指针，因为`g1`已被释放。

# c - 对 Linkfloat 的使用感到困惑

> ID：11115474
> 
> 赞同：4
> 
> 时间：2012-06-20T08:20:33.630
> 
> 标签：c

今天，我正在阅读 Let Us C 中的结构（在[Goodreads](https://www.goodreads.com/book/show/2522685.Let_Us_C)上）。我对`linkfloat()`. 如果不使用它，我可以在具有浮点类型数据成员的结构上编写程序。

我正在使用 ideone 在线编译器进行编程。

```
int main()
{
    struct book
    {
            char name;
            float price;
    };
    struct book b;
    scanf("%c %f",&b.name,&b.price);

    printf("%c %f",b.name,b.price);
    return 0;
}

/*linkfloat()
{
    float a=0,*b;
    b=&a; //cause emulator to be linked
    a=*b; //suppress the warning: variable not found
}*/ 
```

这是链接：http:
[//ideone.com/peL5q](http://ideone.com/peL5q)

即使不使用`linkfloat`，程序也能正确编译和输出。那么它有什么作用呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T08:33:58.473

`linkfloat`与 Turbo C 时代相比，早期的英特尔 CPU 没有硬件浮点支持（1980 年代），而是依赖于需要链接到任何需要浮点支持的可执行文件的软件浮点库，这是一个不合时宜的时代。对于任何现代的 x86 CPU 和 C 编译器（过去 20 年左右的任何东西），您都不需要这种不合时宜的东西。我建议你放弃任何仍然提到这些东西的糟糕/过时的教科书或课程材料（一些印度大学仍在使用的 Kanetkar 的书在这方面特别糟糕）

# gwt - 测试 GWT 本地化的最佳方法？

> ID：11115475
> 
> 赞同：2
> 
> 时间：2012-06-20T08:20:33.983
> 
> 标签：gwt, uibinder

我有一组 GWT UI，一些直接用 Java 创建，另一些使用 UI Binder ui.xml 文件创建。

我按照官方 GWT 指南对它们进行了本地化（例如，创建扩展消息接口的接口）。

我现在想知道是否有一种简单的方法可以编写单元测试来验证消息键是否被属性文件中的相应值替换？

我想我可以使用 GWTTestCase 来做到这一点，但实际上我不需要浏览器来呈现页面。相反，获取原始字符串输出并使用一些正则表达式检查消息是否存在就足够了。

那可能吗？或者在使用 Selenium 之类的运行应用程序中测试这些东西会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:42:15.220

只是一个注释。除了您要验证的重要事项外，我的项目在消息本地化测试期间的关键点之一是查看：翻译的文本是否适合分配的空间。如果它是一个固定大小的盒子，重叠的文本看起来不太好。这不能通过单元测试来检查。这就是为什么当添加新的语言环境或更改某些标签/消息时，手动审查会出现在待办事项列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:47:00.637

我推荐硒。检查消息是否存在可能会很棘手，因为在这种情况下，您应该知道标签所在的位置，哪些标签。在我看来，在测试控制器的行为时，使用 GWTTestCase 是有意义的。简单的按值搜索只保证存在而不保证正确放置。

我认为，在测试中使用这些翻译属性也很有意义，因此字符串在测试中不会重复。

# objective-c - 如何让 UIKit 按钮打开另一个视图？

> ID：11115476
> 
> 赞同：0
> 
> 时间：2012-06-20T08:20:37.883
> 
> 标签：objective-c, ios, xcode

我在一页中有一个按钮网格。我希望按钮在单击时会导致另一个视图。我应该在以下操作中添加什么来更改视图？

```
-(void)buttonPressed:(UIButton *)button {
    NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
} 
```

按钮网格是通过以下方式创建的：

```
{
    int rows = 13, columns = 4;
    UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 80*columns, 32*rows)];
    int currentTag = 0;

    for (int y = 0; y < rows; y++) {
        for (int x = 0; x < columns; x++) {

            UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
            //  [button.layer setBorderWidth:1.0]; 
            //  [button.layer setBorderColor:UIColor blackColor]];
            button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
            button.tag = currentTag;
            currentTag++;
            [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
            [button.layer setBorderWidth: 1.0];
            [button setTitle:[NSString stringWithFormat:@"%d",currentTag] forState:UIControlStateNormal];
            button.frame = CGRectMake(80*x, 32*y, 80, 32); 
            [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
            [buttonView addSubview: button];

        }
    }

    // Center the view which contains your buttons
    CGPoint centerPoint = buttonView.center;
    centerPoint.x = self.view.center.x;
    buttonView.center = centerPoint;
    [self.view addSubview:buttonView];    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:54:39.457

Rinju 的回答会起作用，但需要更多解释。我不确定你为什么要创建这个按钮网格（更多信息会很好），但如果你希望每个按钮显示一个新视图，那么标签很重要！

如果您想打开同一个视图，但在该视图上显示不同的属性，您需要创建一个新的视图控制器类。让我们称之为`DetailViewController`.

现在，在您的`buttonPressed:`方法中，您将需要实例化此视图控制器并设置它的属性！

```
@interface DetailViewController : UIViewController
@property (nonatomic, assign) int buttonTag;
...
//other methods, properties, etc. here
...
@end 
```

现在，在按钮所在的视图控制器中，您可以执行此操作（为了简单起见，我假设您使用的是故事板。如果没有，它仍然可以像 Rinju 所做的那样轻松完成）。

```
-(void)buttonPressed:(UIButton*)button {
    [self performSegueWithIdentifier:@"DetailView" sender:button];
} 
```

现在，您可以实现`prepareForSegue`在 segue 触发之前调用的方法：

```
-(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender {
    if( [[segue identifier] isEqualToString:@"DetailView"] ) {
        DetailViewController *detailView = [segue destinationViewController];
        detailView.buttonTag = ((UIButton*)sender).tag;
    }
} 
```

既然为新的详细视图控制器设置了标签，您可能可以使用`viewDidLoad:`DetailViewController 中的 switch 语句（或者更好的是，传递此 buttonTag 的模型对象）在那里设置 UI。基本上我们正在做的是使用按钮的标签来区分哪个按钮被按下，并在此基础上创建一个新视图！

您可能想要做的是创建一个`typedef enum`结构来为标签命名，而不是使用原始整数。这将增加您的代码的可读性，也将帮助您不感到困惑；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:28:15.703

也许你想连接一个动作？

```
[button addTarget:self 
         selector:@selector(buttonPressed:) 
 forControlEvents:UIControlEventTouchUpInside]; 
```

（检查语法，这是凭记忆...）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-20T08:26:13.700

```
-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
Cart *crtObj=[[Cart alloc]initWithNibName:@"Cart" bundle:nil];
[self.navigationController pushViewController:crtObj animated:YES];
[crtObj release];
} 
```

# jquery - jqm listview上的onclick事件不起作用？

> ID：11115483
> 
> 赞同：1
> 
> 时间：2012-06-20T08:20:57.623
> 
> 标签：jquery, jquery-mobile, cordova, phonegap-plugins

在我的Phonegap android应用程序中，动态地将列表项添加到jqm listview中，点击一个项目，获取项目索引并将其传递到另一个页面以显示基于单击项目的相关信息。它与jqm v1.0a3一起工作正常，但现在我更新到 jqm v1.1.0，现在 onclick 事件不起作用。有帮助吗？

```
for(var i=0;i<result.length;i++)
{
 var li=document.createElement("li");
  li.innerHTML="<a onclick='getIndexOfClickedListItem("+i+");'></a><p><b>CustName</b>"+result[i].fields.NAME+</p>";
 ul.appendChild(li);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:59:17.600

```
 var items=new Array();          
      for(i=0;i<data.resulrset.length-1;i++)
      {
         items.push("<li onclick='getvalue(\""+data.resulrset[i].city_name+"\")'><a href='#'>"+ data.resulrset[i].city_name + "</a></li>")              
      }
      var liinner_html=items.join('');      
      $("#list").html(liinner_html);
      $(list).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:27:20.067

嗨，请看这里（因为我看不到您的完整代码） **使用 JQM 列表视图的工作演示** [http://jsfiddle.net/3RyXz/](http://jsfiddle.net/3RyXz/)

这将添加新的 li 以及您可以在页面之间导航。

这应该会有所帮助，如果我遗漏了什么，请告诉我。

> **更新的演示**

这里有索引警报[http://jsfiddle.net/RTpqd/14/](http://jsfiddle.net/RTpqd/14/)（我已经添加了您需要的类似功能 - `getIndexOfClickedListItem`:)

行为： 1st - 单击`Add Item`链接，然后单击，`foo1` `li`您将看到正确的索引值弹出。

**代码**

```
$('.add').click( function(){
    $('#1, #2').append('<li><a onclick="getIndexOfClickedListItem('+count+');"> foo' + count + '</a></li>');

    $(this).closest('.ui-content').find('.ui-listview').listview('refresh');

    count++;
}); 
```

**getIndexOfClickedListItem 函数在这里**休息演示会更清楚

```
//adding click on new list item for index
function getIndexOfClickedListItem(str){

     alert("The clicked list index is ==>" + str);
} 
```

**添加 li 的部分代码**

```
$('.add').click( function(){
    $('#1, #2').append('<li>' + count + '</li>');

    $(this).closest('.ui-content').find('.ui-listview').listview('refresh');

    count++;
}); 
```

# c++ - C++ 方法调用和类型范围解析歧义

> ID：11115484
> 
> 赞同：17
> 
> 时间：2012-06-20T08:21:02.773
> 
> 标签：c++, types, scope, ambiguity, method-call

我希望标题实际上描述了我想问的...

我写了一段代码，用 gcc 编译并按我的预期工作。但是，它不能使用 llvm 编译，并且使用 icc 编译时代码的执行方式不同！
这是问题的一个例子：

```
#include <iostream>

using std::cout; using std::endl;

class A {
public:
  virtual void foo() { cout << "A::foo()" << endl; }
};

class B : public A {
public:
  typedef A  base;
  virtual void foo() { cout << "B::foo()" << endl; }
};

int main() {
  typedef B  base;
  base* bp = new B();
  bp->base::foo(); 
} 
```

gcc 输出：A::foo()
icc 输出：B::foo()

有人能解释一下标准对这个案子有什么看法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T09:04:34.853

从 C++11，§3.4.5/4 开始：

> 如果类成员访问中的 id-expression 是以下形式的限定 id
> 
> ```
>     类名或命名空间名::...
> 
> ```
> 
> . 后面的类名或命名空间名。或 -> 运算符首先在对象表达式的类中查找，如果找到，则使用名称。否则在整个后缀表达式的上下文中查找它。

我不认为它可以更清楚。这找到了`B::base`，所以输出应该是`A::foo()`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T08:50:18.643

我认为标准的这一部分是相关的：

> 3.4.3.1 类成员 [class.qual]
> 
> 1) 如果限定标识的嵌套名称说明符指定了一个类，则在该类的范围内查找嵌套名称说明符之后指定的名称 (10.2)，但下面列出的情况除外。该名称应代表该类或其基类之一的一个或多个成员（第 10 条）。[注意：可以在其潜在范围（3.3.7）中的任何点使用限定ID来引用类成员。—尾注] 上述名称查找规则的例外情况如下：
> 
> — 按照 3.4.3 中的规定查找析构函数名称；
> 
> — 以与类成员访问中的转换类型 ID 相同的方式查找转换函数 ID 的转换类型 ID（见 3.4.5）；
> 
> — 在整个后缀表达式出现的上下文中查找模板 ID 的模板参数中的名称。
> 
> — 在 using-declaration (7.3.3) 中指定的名称的查找也找到隐藏在同一范围内的类或枚举名称 (3.3.10)。

`base::`在这种情况下，似乎“提名”了一个班级，因此查找是在班级范围内完成的。我看不出任何异常情况如何适用，所以它是类的范围，因此`base`相当于`A`.

（5.1.1-8 表示在这种情况下它是一个限定 ID，并且适用 3.4.3.1）

# android - 当电子邮件客户端尝试下载时捕获并加密附件

> ID：11115485
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:21:04.170
> 
> 标签：android, android-intent

我想开发一个可以识别公司电子邮件帐户的应用程序，当用户尝试下载附件时，我想在将其保存在设备中之前对其进行加密？

是否可以？

如果任何机构有任何方法可以做到这一点或有任何线索可以做到这一点，请提供帮助。如果任何机构有任何代码片段将被aapreciated

非常感谢提前！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:00:45.817

> 是否可以？

仅当您编写自己的具有此功能的电子邮件客户端时。

# php - 回声一些字母

> ID：11115487
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:21:12.363
> 
> 标签：php

您好，我试图只回显 50 个字母，但我的代码中的某些内容不正常，有人可以看看有什么问题吗？

```
<?php       
$id=18;         
$result=mysql_query("select * from article where id='$id'");        
$row=mysql_fetch_array($result);
$row = substr($row, 0,50);  
?>

<?php echo $row['info_en']; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:22:35.543

代码中存在逻辑错误，请使用以下代码

```
<?php       
$id=18;         
$result=mysql_query("select * from article where id='$id'");        
$row=mysql_fetch_array($result);
$row['info_en']= substr($row['info_en'], 0,50);  
?>

<?php echo $row['info_en']; 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:22:34.000

你想要`substr`一个数组做什么？你可能的意思是

```
$row['info_en'] = substr($row['info_en'], 0,50); 
```

如果您尝试`substr`使用 Array ，您将获得 string `"Array"`，那么如果您尝试将其称为 Array ，您可能得不到任何有意义的东西。

# groovy - 在 Groovy 中将字符串 XML 片段转换为文档节点

> ID：11115491
> 
> 赞同：2
> 
> 时间：2012-06-20T08:21:37.383
> 
> 标签：groovy, soapui, xmlnode

我正在尝试通过 SOAPUI Groovy 向请求添加一个新节点我有 String XMl 片段，但我无法使用 Groovy for SOAPUI 创建节点。

例如

```
<entityProps>
  <candidate> <id>1</id><key></key> </candidate>
  <candidate> <id>2</id><key></key> </candidate>
  <candidate> <id>3</id><key></key> </candidate>
  <candidate> <id>4</id><key></key> </candidate>
</entityProps> 
```

我想向`<candidate></candidate>`这个请求添加新节点。我已经有了字符串，但我需要将其转换为 Document 节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:39:17.497

鉴于您当前拥有的 xml：

```
String doc = '''<entityProps>
               |  <candidate> <id>1</id><key></key> </candidate>
               |  <candidate> <id>2</id><key></key> </candidate>
               |  <candidate> <id>3</id><key></key> </candidate>
               |  <candidate> <id>4</id><key></key> </candidate>
               |</entityProps>'''.stripMargin() 
```

还有一个片段字符串：

```
String frag = '<candidate> <id>5</id><key></key> </candidate>' 
```

您可以解析文档：

```
def xml = new XmlSlurper().parseText( doc ) 
```

和片段：

```
def fragxml = new XmlSlurper().parseText( frag ) 
```

然后，将片段附加到文档的根节点：

```
xml.appendNode( fragxml ) 
```

并将此文档流式传输回字符串：

```
String newDoc = new groovy.xml.StreamingMarkupBuilder().bind { mkp.yield xml }
println newDoc 
```

打印：

```
<entityProps>
  <candidate><id>1</id><key></key></candidate>
  <candidate><id>2</id><key></key></candidate>
  <candidate><id>3</id><key></key></candidate>
  <candidate><id>4</id><key></key></candidate>
  <candidate><id>5</id><key></key></candidate>
</entityProps> 
```

（我自己添加了换行符以使其更易于阅读......你得到的实际字符串都在一行上）

# c# - 获得整洁的上传演示进度条工作

> ID：11115496
> 
> 赞同：0
> 
> 时间：2012-06-20T08:22:14.157
> 
> 标签：c#, asp.net, visual-studio-2010, file-upload, neatupload

我想从我的 web 应用程序上的 codeplex 获得这个名为 NeatUpload 的控件。

我已经下载了最新的二进制文件和源代码。

我已经配置了 web.config

我已经从演示页面文件和代码隐藏文件中复制粘贴了代码。

它编译并运行，它确实发布到服务器，但不显示进度条。

我正在使用带有框架 v4.0 的 vs2010。

有没有人有类似的问题并得到这个工作？

提前感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:43:20.987

我刚刚花了一个上午的时间来完成一个简单的单个文件上传工作，所以我很欣赏基本文档中存在一些差距。好吧，也许不是差距，模棱两可。:o)

这是我所做的：

1.  从 Codeplex 下载 bin 版本

2.  将 NeatUpload 文件夹从该文件夹复制到您的应用程序根目录*[1]*

3.  更改 web.config 以在 system.web/httpModules 条目中添加：

    `<add name="UploadHttpModule" type="Brettle.Web.NeatUpload.UploadHttpModule, Brettle.Web.NeatUpload"/>`

4.  和 system.webServer/modules 条目：

    `<add name="UploadHttpModule" type="Brettle.Web.NeatUpload.UploadHttpModule, Brettle.Web.NeatUpload" preCondition="managedHandler"/>`

然后我有一个非常简单的用户控件来设置上传：

```
<%@ Register TagPrefix="nup" Namespace="Brettle.Web.NeatUpload" Assembly="Brettle.Web.NeatUpload" %>
<div class="control_container cc_document_upload">
<nup:InputFile id="FileUploader" runat="server" />
<br/>
<nup:ProgressBar id="UploadProgress" Url="~/NeatUpload/Progress.aspx" Triggers="UploadButton" Inline="true" runat="server" />
<br/>
<asp:Button id="UploadButton" Text="Upload" runat="server" />
</div> 
```

这对我有用。

*[1]* 2：这是我在将其复制到插件子文件夹以保持整洁时出错的地方。它必须是应用程序根；快速浏览源代码会发现看起来像一些硬编码的路径。在将其移至根目录之前，我的行为与您相同-发布，但没有进展。

# grails - 如何从自定义插件访问域类到另一个？

> ID：11115500
> 
> 赞同：1
> 
> 时间：2012-06-20T08:22:32.427
> 
> 标签：grails, groovy

我目前正在从事 grails 项目。我创建了八个不同的插件。每个都有一组域类和其他东西。现在，从我的一个插件中，某个域类需要从另一个插件访问域类。我将如何做到这一点？我是否必须从其他插件导入域类？如果是这样，怎么做？或者我应该在 BuildConfig.groovy 中这样做吗？

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T09:13:17.987

在 buildconfig 中简单地使需要其他插件域的插件依赖于它

```
//buildConfig of plugins need other plugin domains

grails.project.dependency.plugins{
   ...
   compile ':<other-plugin-name>:<other-plugin-version>'
   ...
} 
```

只需在您需要的地方导入正确的包。

如果你一直在处理依赖的插件并且你不想经常重新打包它，你可以使用 grails.plugin.location 而不是 grails.project.dependency.plugins 来连接它。

在 buildConfig 添加

```
grails.plugin.location.'other-plugin-name' = "/path/to/other/plugin/folder" 
```

# javascript - 在 Node.js 中，我如何与客户端 JavaScript 进行通信？

> ID：11115508
> 
> 赞同：12
> 
> 时间：2012-06-20T08:22:51.117
> 
> 标签：javascript, node.js

例如假设客户端我有一个 JavaScript 函数

```
function getLocation() {
    var latitude = ...;
    var longitude = ...;
} 
```

使用对 Google 或类似的函数调用来检索坐标。如何将此信息传输到我的 Node.js 服务器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T20:29:05.817

最简单的方法？设置[Express](http://expressjs.com/)并让您的客户端代码通过 Ajax 进行通信（例如，使用 jQuery）。

```
(function() {
  var app, express;

  express = require("express");

  app = express.createServer();

  app.configure(function() {
    app.use(express.bodyParser());
    return app.use(app.router);
  });

  app.configure("development", function() {
    return app.use(express.errorHandler({
      dumpExceptions: true,
      showStack: true
    }));
  });

  app.post("/locations", function(request, response) {
    var latitude, longitude;
    latitude = request.body.latitude;
    longitude = request.body.longitude;
    return response.json({}, 200);
  });

  app.listen(80);

}).call(this); 
```

在客户端，您可以这样称呼它：

```
var latitude = 0
  , longitude = 0; // Set from form

$.post({
  url: "http://localhost/locations",
  data: {latitude: latitude, longitude: longitude},
  success: function (data) {
    console.log("Success");
  },
  dataType: "json"
}); 
```

请注意，此代码只是一个示例；您必须解决错误处理等问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T08:25:03.063

通过发出 HTTP 请求，就像在 Web 应用程序中处理任何其他服务器端程序一样。

您可以使用[XMLHttpRequest 对象](http://www.w3.org/TR/XMLHttpRequest/)，或通过生成一个`<form>`然后提交它，或各种其他方法来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:26:06.367

如果您需要（软）实时功能，我建议使用[Socket.io 库](http://socket.io/)。使用套接字，节点还可以将数据推送到您的客户端脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T08:29:08.963

我认为[NowJS](http://nowjs.com/)将非常适合您。例子：

```
// On the Node.JS server

var nowjs = require("now");
var everyone = nowjs.initialize(httpServer);

everyone.now.getServerInfo = function(callback){
  db.doQuery(callback);
}

// In the browser

<script>

now.getServerInfo(function(data){
  // data contains the query results
});

</script> 
```

您可以将变量和函数放在一个公共名称空间（即`now`对象）中，从客户端到服务器，反之亦然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:09:28.950

我认为您需要[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)。[节点模块部分还有一个涵盖 RPC 的](https://github.com/joyent/node/wiki/Modules#wiki-rpc)部分。我认为你应该看看[DNode](https://github.com/substack/dnode)。看看[浏览器部分的 DNode](https://github.com/substack/dnode#dnode-on-the-browser)。

# javascript - 如何控制jquery动画速度

> ID：11115509
> 
> 赞同：2
> 
> 时间：2012-06-20T08:22:53.130
> 
> 标签：javascript, animation

我正在使用 jquery 为 div 设置动画。我想控制移动速度。我玩了很多。但我希望有人能告诉我如何控制速度。这是代码示例。

```
$(document).ready(function(){
    $('#block').css({'left':'-617px','top':'-300px'});
    $('#Cont').show();
    $('#block').animate({'left':'17px','top':'10px'},'slow',function(){

    });
}); 
```

我想知道如何控制动画的速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:23:27.947

只需`slow`以毫秒为单位更改时间，例如 1,2 秒即可

```
$('#block').animate({'left':'17px','top':'10px'},  1200, function() {
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:48:06.313

默认持续时间为 400 毫秒。字符串 'fast' 和 'slow' 分别对应 200 和 600 毫秒。

```
$('#block').animate({'left':'17px','top':'10px'},'slow',function(){

        }); 
```

# c# - 如何在 C# 中通过指纹查找证书

> ID：11115511
> 
> 赞同：90
> 
> 时间：2012-06-20T08:23:07.180
> 
> 标签：c#, x509certificate

我正在使用此代码通过其指纹查找证书。证书存在于个人证书存储的证书管理器中，但此代码未找到该证书。

请告诉我我在哪里做错了。

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string certThumbPrint = "‎‎fe14593dd66b2406c5269d742d04b6e1ab03adb1";
            X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);
            // Try to open the store.

            certStore.Open(OpenFlags.ReadOnly);
            // Find the certificate that matches the thumbprint.
            X509Certificate2Collection certCollection = certStore.Certificates.Find(
                X509FindType.FindByThumbprint, certThumbPrint, false);
            certStore.Close();

            // Check to see if our certificate was added to the collection. If no, 
            // throw an error, if yes, create a certificate using it.
            if (0 == certCollection.Count)
            {
                Console.WriteLine("Error: No certificate found containing thumbprint " );
            }
            Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-02-13T11:40:23.047

在谷歌搜索同一问题时偶然发现了这个问题，并在[此处](https://stackoverflow.com/questions/8448147/problems-with-x509store-certificates-find-findbythumbprint)找到了答案：如果像我一样，您通过突出显示指纹并将其复制到剪贴板从 MMC 获得了“源”指纹，那么您几乎肯定已经抓住了屏幕开头的不可见字符，因此：

> 字符串 certThumbPrint = "‎‎fe14593dd66b2406c5269d742d04b6e1ab03adb1";

实际上是

> string certThumbPrint = "‎‎<strong>INVISIBLECHARACTERfe14593dd66b2406c5269d742d04b6e1ab03adb1";

如果你删除了这个不可见的字符（当你按下退格键或删除它时，你可以告诉它在那里，似乎什么都没有发生），或者只是手动重新输入指纹，你的代码应该可以正常工作。现在，如果只有 Visual Studio 有一个“显示不可见字符”选项......

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-02T01:28:39.073

包含您的指纹的字符串文字在开头有一个[从左到右的标记。](http://en.wikipedia.org/wiki/Left-to-right_mark)当 MMC 列出证书属性时，它会在指纹值之前加上此字符，这样即使在文本通常从右到左呈现的区域设置中，十六进制字节也会从左到右列出。

很可能，这是某人采用的捷径，因为将字符添加到属性列表中的某个值比编写一些代码来动态更新编辑控件的样式更容易。也许这是在本地化测试期间对错误报告的快速修复。

在 MMC 中，从左到右的标记具有非零宽度，您可以通过观察光标在箭头上的移动来观察这一点，并且我注意到第一行十六进制字节与第二行。

在 Visual Studio 等其他编辑器中，从左到右的标记没有宽度，但您仍然可以通过注意当您用箭头穿过 is 时光标没有移动来观察它。正如 KenD 所回答的，删除此字符可以解决问题。

**快速识别隐形字符：**使用键盘选择隐形字符；然后将其粘贴到一些普通字符之间的Word中。在Word中选择它；然后单击插入 > 符号 > 更多符号。查看“Unicode 名称”下的左下角。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-03T15:08:55.630

要确保从指纹字符串中删除那些 LTR "\u200e" 和 RTL "\u200f" 字符，请执行以下操作

```
thumbprint = thumbprint.Replace("\u200e", string.Empty).Replace("\u200f", string.Empty).Replace(" ",string.Empty); 
```

删除空格的最后一个字符串替换不是完全必要的，因为它发现我的证书有或没有它们。

其他麻烦的 unicode 字符可以在这里找到

[UTF-8 编码表和 Unicode 字符](http://utf8-chartable.de/unicode-utf8-table.pl?start=8192&number=128&utf8=dec)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-20T09:04:40.357

我的两分钱：我复制了 MMC 中的值并将其粘贴到 VS 中并启用了空格。

开头什么都没有，但结尾有一个空格：“1e 52 73 0d 00 29 e6 85 7b e6 23 e2 fa c7 a5 08 ac 36 5e 57”

现在，在 web.config 文件中，我粘贴了保持内部所有空格的值，删除了最后的空格：“1e 52 73 0d 00 29 e6 85 7b e6 23 e2 fa c7 a5 08 ac 36 5e 57”

这工作正常。

如果我使用“1e52730d0029e6857be623e2fac7a508ac365e57”，删除我在其他帖子中看到的内部空间，不起作用......

希望这可以帮助;）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-21T02:09:39.120

我运行这个 powershell 脚本来获取所有指纹并将输出重定向到一个文本文件并从那里复制指纹。

```
Get-ChildItem -path cert:\LocalMachine\My 
```

要将输出重定向到文本文件，请使用以下命令：

```
Get-ChildItem -path cert:\LocalMachine\My > thumbprints.txt 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-14T05:07:19.327

我做了以下操作来删除多余的字符，并删除其他任何无效的十六进制（以及 ToUpper 它）：

```
 thumbprint = Regex.Replace(thumbprint.ToUpper(), @"[^0-9A-F]+", string.Empty); 
```

这使我可以直接从证书管理器对话框中复制指纹并将其直接粘贴到我的使用中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-08T20:33:41.567

我能够通过编写一个控制台应用程序来解决问题，该应用程序检索证书上的所有证书并输出指纹 ID。我复制了控制台输出并准确插入了指纹。没有问题。即使数据看起来相似，似乎从 MMC 控制台复制也会导致问题。我使用这个站点作为阅读所有证书的起点。

[https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint(v=vs.110).aspx)

# clearcase-ucm - UCM Clearcase：特征流和推荐基线

> ID：11115513
> 
> 赞同：1
> 
> 时间：2012-06-20T08:23:11.767
> 
> 标签：clearcase-ucm

我昨天创建了一个功能流。

> 主流（美国大师）
> 
> |
> 
> |----FeatureStream(美国大师)
> 
> ```
>  |
> 
>              |---FeatureStreamIndia(India Mastership)
> 
>              |
> 
>              |---FeatureStreamIndia(Germany Mastership) 
> ```

我忘了推荐基线。我没有在上述任何流中这样做。另一个更有经验的人告诉我，创建的结构是无用的（由于未执行推荐基线），应该删除并创建新结构。

他没有做的是正确地转移他的知识或让我相信他的逻辑。

我想知道的是：

> 为什么创建上述结构后我不能推荐基线？
> 
> 为什么我需要创建一个新结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:33:21.420

除非 ClearCase（多站点）在您尝试推荐基线时出现错误消息`MainStream`（以便`FeatureStream`使用正确的基线自动初始化），否则您应该能够在创建这些流之后定义一个推荐的基线。

如果真的不可能，那么只有在没有视图且没有活动附加到所述流的情况下才能删除/重新创建这些流，所以不要让这种情况无人看管太久。

（并且不要忘记多站点的 CCRC 替代方案；）[您可以推荐使用远程客户端的基线](http://www-304.ibm.com/support/docview.wss?uid=swg21233090&aid=1)）

# svn - 我可以为我的版本号更改或添加一个属性到 svn 存储库吗？

> ID：11115522
> 
> 赞同：2
> 
> 时间：2012-06-20T08:23:47.900
> 
> 标签：svn, svn-client, svn-propset

Svn 正在为修订生成自动编号。

```
RevNo  Date         Desc
1      2012-01-01   Initial directories are created 
2      2012-01-02   Something added 
3      2012-03-10   something changed
4      2012-03-18   Ready for Release_1.0 and tags/Release_1.0 is ok
5      2012-03-19   Bug fixed
6      2012-03-18   Release_1.0.1 
```

我可以将 revNo 4 更改为 1.0 吗？我可以添加一些可以携带版本号的属性，例如：

```
ReleaseNo RevNo  Date         Desc
0          1      2012-01-01   Initial directories are created 
0          2      2012-01-02   Something added 
0          3      2012-03-10   something changed
1.0        4      2012-03-18   Ready for Release_1.0 and tags/Release_1.0 is ok
0          5      2012-03-19   Bug fixed
1.0.1      6      2012-03-18   Release_1.0.1 
```

如果我可以添加属性，我如何使用 by 检索`svn.exe`？比如： `c:\Projects\Test\trunk\>svn.exe info`我应该用什么样的参数运行？

提前感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:21:53.097

您无法更改修订号，但可以使用`svn propset <PROPNAME> --revprop -r <REV> <PROPVAL> [TARGET]`. 您还可以在提交期间设置修订属性，例如：

```
svn commit -m "Commit message" --with-revprop "release-version=2.0.1" 
```

要检索修订属性，请使用`svn propget <PROPNAME> --revprop -r <REV> [TARGET]`. 有关属性的更多信息，请参阅[使用 Subversion 进行版本控制。](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html)

*注意：*通常默认情况下，修订属性的设置完全禁用或仅允许用于`svn:log`属性。您需要修改`pre-revprop-change`钩子（或联系您的 SVN 管理员为您修改）。

您还可以**标记**您的代码。请参阅[使用 Subversion 进行版本控制](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.html)。标记的优点是您可以在同一标记中使用来自不同修订版的代码（例如，一个组件可以来自不同的修订版，包括不同的分支）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:29:03.490

**参考资料**： http: [//tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html) [http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html) [http:// johnbokma.com/mexit/2008/09/30/subversion-svn-keywords-property.html](http://johnbokma.com/mexit/2008/09/30/subversion-svn-keywords-property.html) [http://svnbook.red-bean.com/en/1.0/re23.html](http://svnbook.red-bean.com/en/1.0/re23.html)

我用乌龟来实现它。

![将设置 SVN 属性](../Images/067170cfe230637a22e5c67f7ac6fbd8.png)

属性名称：ReleaseNo 默认值：0.0 在此文件夹中，每个新文件/文件夹都将具有默认值为 0.0 的 ReleaseNo 属性。当我创建每个标签时，我将能够设置 RleaseNo 属性。Propset 和 propget 将用于设置和获取 ReleaseNo。我想在 Tortoise 的分支/标签形式中添加新的文本框以快速输入正确的 ReleaseNo，但这需要很长时间。 ![在标签文件夹下 ReleaseNo 属性已创建](../Images/cc947d6a49fd8cb627739923a308abd0.png)

![文件夹使用设置的版本号设置](../Images/f72e4f952414b86b94331b808e8b57e3.png)

![通过提交更改正在提交到存储库](../Images/6bbc06f90bf181cf600aaef1ff7d150b.png)

![结果](../Images/c0cba2089a8d58af258645e39ae47667.png)

# memory-leaks - 单调增加redis服务器的内存使用

> ID：11115524
> 
> 赞同：2
> 
> 时间：2012-06-20T08:23:51.863
> 
> 标签：memory-leaks, redis

我为 redis 制作了一个简单的基准代码，如下伪代码。

```
for 10~100 redis sessions:
  for n time:
    key = some_random_string(key_size) # about 100 byte
    data = some_random_string(data_size) # about 100k~1m
    session.command("SET %s %s", key, data)
    session.command("GET %s", key)
    session.command("DEL %s", key) 
```

当基准程序启动时，redis-server 进程的内存使用量单调增加，直到达到物理内存限制 (8gb) 并在会话结束时释放。由于 key 的并发数受限于 session 数，因此数据集的峰值大小不应该那么大。

这是设计的故意行为吗？还是我滥用了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:57:03.140

假设最大值是 1 MB，那么每个连接最多应该有 3 MB：1 个用于输入缓冲区 (SET)，1 个用于存储在 Redis 中的值，1 个用于输出缓冲区 (GET)。输入和输出缓冲区附加到连接。您可以检查 INFO 命令返回的 client_biggest_input_buf。

注意：Redis 并不是真正为存储大字符串对象而设计的。

也就是说，使用简短的 C 程序、Redis 2.5.11 和 270 个连接，我无法重现您描述的行为。

您确定没有同时运行 MONITOR 命令、导致 Redis 累积所有流量的 SLOWLOG 配置，或者网络链路无法处理流量的从属实例吗？

# date - 经典 ASP 随机日期

> ID：11115525
> 
> 赞同：1
> 
> 时间：2012-06-20T08:23:53.813
> 
> 标签：date, asp-classic, random, vbscript

我已经尝试了很长时间来寻找有关经典 ASP 中随机日期的帮助。我想在两个日期之间创建一个随机日期。

例如：我的随机日期必须在 2010-04-05 和 2012-04-05 之间。

感谢您的帮助！

最好的问候莱纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:11:35.163

实际上它在 VBScript 中要容易得多。

```
Randomize
Function RandomDate(dtmStart, dtmEnd)
    Dim dblDate
    dblDate = (CDbl(dtmStart) - CDbl(dtmEnd)) * Rnd + CDbl(dtmEnd)
    'dblDate = Int(dblDate) ' w/o time part, just date
    RandomDate = CDate(dblDate)
End Function

Response.Write RandomDate(#1985/06/10#, Now()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:04:04.180

你可以使用 DateDiff 函数和 Rnd 函数。Rnd 函数生成一个随机数，然后 datediff 来区分天数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:54:30.593

试试这个：

```
<%
Dim DDmax,DDmin,MMmax,MMmin,YYYYmax,YYYYmin

 MMmin=1
 MMmax=12

 DDmin=1
 DDmax=28

 YYYYmin=2010
 YYYYmax=2012

 Randomize

dim strTmpDate,strTmpDateYEAR,strTmpDateMONTH,strTmpDateDAY

 strTmpDateYEAR=Int((YYYYmax-YYYYmin+1)*Rnd+YYYYmin)
 strTmpDateMONTH=Int((MMmax-MMmin+1)*Rnd+MMmin)
 strTmpDateDAY=Int((DDmax-DDmin+1)*Rnd+DDmin)

 if Len(strTmpDateMONTH)=1 then
 strTmpDateMONTH="0" & strTmpDateMONTH
 end if

 if Len(strTmpDateDAY)=1 then
 strTmpDateDAY="0" & strTmpDateDAY
 end if

 strTmpDate=strTmpDateYEAR & strTmpDateMONTH & strTmpDateDAY

 if strTmpDate > "20100405" and strTmpDate < "20120405" then

 strTmpDateYEAR=Int((YYYYmax-YYYYmin+1)*Rnd+YYYYmin)
 strTmpDateMONTH=Int((MMmax-MMmin+1)*Rnd+MMmin)
 strTmpDateDAY=Int((DDmax-DDmin+1)*Rnd+DDmin)

 if Len(strTmpDateMONTH)=1 then
 strTmpDateMONTH="0" & strTmpDateMONTH
 end if

 if Len(strTmpDateDAY)=1 then
 strTmpDateDAY="0" & strTmpDateDAY
 end if

 strTmpDate=strTmpDateYEAR & strTmpDateMONTH & strTmpDateDAY

 end if
Response.write "Example A: " & strTmpDate & "<BR>"
Response.write "Example B: " & Left(strTmpDate,4) & "-" & Mid(strTmpDate,5,2) & "-" & Right(strTmpDate,2)
%> 
```

# php - PHP file_put_contents 和 UTF-8

> ID：11115533
> 
> 赞同：6
> 
> 时间：2012-06-20T08:24:27.340
> 
> 标签：php

我有读取远程文件内容并将其写入本地服务器的脚本。文件包含字符：ąčęėįšųūž。数据插入本地文件后，UTF-8 编码丢失。我的脚本代码：

```
<?php 

$data = file_get_contents('remote_file_address');

echo $data; //encoding is ok

$file = dirname(__FILE__) . '/../downloads/data.csv';

file_put_contents($file,$data); //invalid encoding in data.csv file

?> 
```

我也按照这篇文章的说明进行了操作（[如何以 UTF-8 格式编写文件？](https://stackoverflow.com/questions/4839402/how-to-write-file-in-utf-8-format)），但还是不行。

那么这有什么问题呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T10:03:34.040

问题是使用 windows-1257 编码的远程文件。我在[这里](https://stackoverflow.com/questions/2547259/how-convert-php-value-from-windows-1257-to-utf-8)找到了解决方案。

所以正确的代码应该是这样的：

```
<?php 

$data = file_get_contents('remote_file_address');

$data = iconv("CP1257","UTF-8", $data);

$file = dirname(__FILE__) . '/../downloads/data.csv';

file_put_contents($file,$data);

?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T08:44:09.510

PHP 不知道编码。PHP 中的字符串只是存储原始字节的字节数组。从某处读取字符串时，文本以原始字节读取并存储在原始字节中。写入文件时，PHP 将原始字节写入文件。**PHP 在任何时候都不会自行转换编码。**您在任何时候都不需要做任何特别的事情，您需要做的就是*不要*自己弄乱编码。如果一开始的编码是 UTF-8，如果你不碰它，它仍然是 UTF-8。

如果在其他程序中打开最终文件时编码很奇怪，很可能是其他程序误解了编码。该文件很好，只是没有正确显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:35:54.690

确保您的脚本和远程文件以 UTF-8 编码，并确保您用于读取 data.csv 的软件以 UTF-8 读取它。我个人使用 Notepad++ 来检查这一点。如果你所有的东西都是 UTF-8，你不需要任何 *utf8_(en|de)code 函数。如果您的远程文件未以 UTF-8 编码，则必须使用它们

# c# - 使用 Crystal Report 在表/网格中显示记录详细信息

> ID：11115536
> 
> 赞同：4
> 
> 时间：2012-06-20T08:24:44.560
> 
> 标签：c#, .net, visual-studio-2010, crystal-reports

我目前正在使用 C# 使用 Crystal Report 13 (Visual Studio 2010)，我想显示如下记录详细信息：

![产品详情](../Images/4b2357b57a9632f68605a02f6bb97e7f.png)

我希望每个数据都能自动增长，因此我将属性“Can Grow”设置为 True。问题是它们相互重叠。最好，如果可能的话，我想在表格/网格中显示数据，因为这不能通过使用 Line Object 来实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:44:33.440

右键单击该部分，然后单击下面的部分。

在主要细节部分之后插入 3 个子部分

![水晶报表网格视图](../Images/c14130621741b82b3027969e45acd923.png)

试试这个它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:31:41.260

右键单击右侧的部分，然后单击**下面的插入部分**。然后将每个字段放在单独的部分中。使用画线绘制表格、行和列的边界。您的表格单元格将能够增长并且不会与线条边框重叠。我做这样的桌子，它对我有用。

或者，您可以尝试使用交叉表。

![在此处输入图像描述](../Images/afa9719c7b8fe3c485e23341f3f468d4.png)

# jquery - 每个列表项的增量

> ID：11115537
> 
> 赞同：0
> 
> 时间：2012-06-20T08:24:46.763
> 
> 标签：jquery, html

我正在尝试增加`z-index`每个列表项的。

这是我到目前为止所尝试的：

```
 var photos = $('ul');
  photos.each(function () {

      var photos = $(this).children();
      var photosLen = photos.length;
      if (photosLen > 1) {
          photos.parent().addClass('album');
          var i = 0;
          while (i < photosLen) {

              $(this).children().css({
                  'z-index': i
              });
          }
      }

  }); 
```

我预计每个列表项都会从`z-index: 1;`到 ，`z-index: 3;`但它没有那样做。只需将数组的长度添加到每个列表项。

HTML：（代码仅适用于第一个无序列表）

```
<ul>

    <li><img src="http://i.imgur.com/PuwwFs.jpg" alt=""></li>
    <li><img src="http://i.imgur.com/cjAGks.jpg" alt=""></li>
    <li><img src="http://i.imgur.com/zA4lCs.jpg" alt=""></li>

  </ul>
    <ul>

        <li><img src="http://i.imgur.com/PuwwFs.jpg" alt=""></li>

    </ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:28:17.240

由于您已经在使用 jQuery，因此代码可能很简单

```
 if (photosLen > 1) {
      photos.each(function(i) {
          $(this).css('zIndex', i);
      })
      .parent()
      .addClass('album');
  } 
```

注意属性的`each()`和驼峰式语法`z-index`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:29:14.557

您忘记增加`i`代码中的值：

```
 while (i < photosLen) {

          $(this).children().css({
              'z-index': i
          });
          i++; 
      } 
```

# python - 产生溢出错误的十进制数的幂

> ID：11115538
> 
> 赞同：1
> 
> 时间：2012-06-20T08:24:47.337
> 
> 标签：python, numpy

我有一个返回**log10**值的函数。在将它们转换为正常数字时，我得到一个溢出错误。

> 溢出错误：（34，'数值结果超出范围'）

我检查了日志值，例如**508.038057662**发生此错误。

我认为虽然python很容易执行**10**509**，但这个错误一定是由于小数点溢出了寄存器。因此我尝试像这样使用 numpy.float64 ，

```
result = np.array([ (10**multiplicity(timeseries,om,ph,bins,pos_arr)) for ph in np.linspace(0,twopi,num = bins+1)], dtype = np.float64) 
```

错误是一样的。我是在声明**float64**错误吗？

这里*multiplicity()*是返回**log10**值的函数。我需要一个值的“列表”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T08:36:39.573

> 我认为虽然python很容易执行10**509，但这个错误一定是由于小数点溢出寄存器。

问题不在于“小数点溢出”，而是由您使用的数据类型引起的。

Python 可以愉快地计算 10**509 ，`long`因为[它们具有*无限的精度*](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)：

```
>>> type(10**509)
<type 'long'> 
```

但是，此结果太大而无法存储在 a 中`float`：

```
>>> float(10**509)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: long int too large to convert to float 
```

我们可以`float`很容易地检查最大值：

```
>>> import sys
>>> sys.float_info.max
1.7976931348623157e+308 
```

看[这个问题](https://stackoverflow.com/questions/1658714/range-of-valid-numpy-values)似乎 Numpy`float64`具有与标准相同的值范围，`float`因此使用它并不能解决您的问题。

相反，您必须使用提供任意精度浮点数的第三方模块之一，例如[mpmath](http://code.google.com/p/mpmath/)或[bigfloat](http://packages.python.org/bigfloat/)。

# java - 使用 JMS 会话从读取消息中创建新消息

> ID：11115541
> 
> 赞同：2
> 
> 时间：2012-06-20T08:25:09.613
> 
> 标签：java, jms, activemq

我有一个实现 SessionAwareMessageListener 的消息侦听器（使用 ActiveMQ）。当调用 onMessage(Message,Session) 方法时，我解析消息并将其处理传递给处理器，以及用于执行回滚/提交的会话。

我需要创建一条新消息，用于放置到外部队列中。我可以使用现有的会话来创建消息（我目前正在这样做），还是我实际上应该创建一个新的会话来创建它？我对 JMS 会话的工作方式有点模糊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:30:53.887

会话共享一个连接，通常是一个 TCP 连接。不同的连接可以到不同的服务器或使用不同的 TCP 连接。

会话是单线程的。这意味着您在会话中接收或发送的消息将按可预测的顺序排列。如果您在两个不同的会话上发送两条消息，它们可以按任何顺序到达。（有时这是更可取的）

在最简单的用例中，您将通过一个会话建立一个连接。

# php - 我的 php app 目录结构是一个迷宫

> ID：11115543
> 
> 赞同：0
> 
> 时间：2012-06-20T08:25:13.873
> 
> 标签：php, refactoring, directory-structure

我正在开发一个旧的 php web 应用程序。

问题是所有文件的组织或多或少是随机的。我最喜欢的是在一个级别上既有一个“包含”文件夹，也有一个“包含”文件夹。

重新排列所有文件的主要障碍是大多数 require 和 include 语句是原始字符串文件路径，有些是变量。

我目前的计划是这样的：

1.  创建一个 super_require($path) 函数来检查路径是否在它应该在的位置，如果不是，则在整个代码树中搜索结束文件名，直到找到它。

2.  使用 super_require() 搜索替换所有需要和包含。

3.  重新排列所有文件，让我心满意足。

4.  想知道它是如何工作的，因为这个计划似乎很容易出错。

所以我想我的问题是，有没有人知道在这种情况下有更好的计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:28:04.980

1.  在工作站本地重新排列文件
2.  修复所有包含
3.  在登台或开发服务器上测试它
4.  将工作代码传播到生产环境

这个`super_require`想法是一个滑坡。您将开始将哪些其他语言结构和库函数包装在魔术函数中？几年后你将如何保持这种状态？

尝试通过每次重构使代码和程序结构*更好。*

* * *

PHP 本身有一段魔法解决方案的黑暗历史。他们通常最终会产生更多的问题，然后才能解决。

[注册全局变量](http://php.net/manual/en/security.globals.php)会自动导入 GET 和 POST 变量作为全局范围内的常规变量。这使得外部人员可以通过将变量值添加到请求中来定义变量值，从而产生大量安全漏洞。

但最类似的例子是[魔术引号](http://php.net/manual/en/security.magicquotes.php)，它自动将 SQL 转义添加到*所有*GET 和 POST 变量中，这让开发人员在获得不打算用于数据库查询的数据时非常头疼。多年来的解决方案是添加代码来*反转*魔术引用，这比最初添加它更难也更容易忘记。

这里的共同教训是，代码应该以一种确定性的方式完全按照您的意愿去做，而不是试图比开发人员更聪明。所以花点时间用正确的方式解决您的问题，避免未来的麻烦。

# java - Glassfish、PostgreSQL 和封闭连接

> ID：11115547
> 
> 赞同：3
> 
> 时间：2012-06-20T08:25:40.633
> 
> 标签：java, postgresql, glassfish, database-connection, connection-pooling

我们有一个使用 JPA (Hibernate) 在 Glassfish 上使用 MySQL 的应用程序，它运行良好。

然后我们切换到 PostgreSQL，几乎一切正常。我们唯一的问题是，应用程序在一段时间后停止响应并抛出异常，因为与数据库的连接已关闭：

```
[#|2012-06-19T21:51:22.050+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=38;_ThreadName=Thread-2;|4816089 [p: thread-pool-1; w: 21] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 08006
[#|2012-06-19T21:51:22.050+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=38;_ThreadName=Thread-2;|4816089 [p: thread-pool-1; w: 21] ERROR org.hibernate.util.JDBCExceptionReporter - An I/O error occured while sending to the backend.
[#|2012-06-19T21:51:22.052+0200|SEVERE|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.resource|_ThreadID=38;_ThreadName=Thread-2;|RAR5031:System Exception
javax.resource.spi.LocalTransactionException: This connection has been closed.
        at com.sun.gjc.spi.LocalTransactionImpl.rollback(LocalTransactionImpl.java:134)
        at com.sun.enterprise.resource.ConnectorXAResource.rollback(ConnectorXAResource.java:213)
        at com.sun.enterprise.transaction.JavaEETransactionImpl.rollback(JavaEETransactionImpl.java:571)
        at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.rollback(JavaEETransactionManagerSimplified.java:893)
        at com.sun.enterprise.transaction.UserTransactionImpl.rollback(UserTransactionImpl.java:234)
        at ch.ethz.id.wai.lakshmi.engine.common.TransactionHelper.rollbackTransaction(TransactionHelper.java:43)
        at ch.ethz.id.wai.lakshmi.stdcmp.tracking.StandardTracking.updateStatus(StandardTracking.java:50)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.updateTrackingStatus(LakshmiServerBean.java:992)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.executeNextWorkflowStep(LakshmiServerBean.java:771)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.executeNextWorkflowStep(LakshmiServerBean.java:683)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.continueWorkflow(LakshmiServerBean.java:602)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.processSubmitOrderRequest(LakshmiServerBean.java:487)
        at ch.ethz.id.wai.lakshmi.engine.ejb.LakshmiServerBean.onMessage(LakshmiServerBean.java:360)
        at sun.reflect.GeneratedMethodAccessor133.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
        at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
        at com.sun.ejb.containers.BaseContainer.invokeTargetBeanMethod(BaseContainer.java:4180)
        at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5368)
        at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
        at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1099)
        at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
        at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
        at $Proxy264.onMessage(Unknown Source)
        at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
        at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
        at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
        at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
        at org.postgresql.jdbc2.AbstractJdbc2Connection.checkClosed(AbstractJdbc2Connection.java:714)
        at org.postgresql.jdbc2.AbstractJdbc2Connection.rollback(AbstractJdbc2Connection.java:731)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.postgresql.ds.jdbc23.AbstractJdbc23PooledConnection$ConnectionHandler.invoke(AbstractJdbc23PooledConnection.java:352)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.postgresql.ds.jdbc23.AbstractJdbc23PooledConnection$ConnectionHandler.invoke(AbstractJdbc23PooledConnection.java:352)
        at $Proxy161.rollback(Unknown Source)
        at com.sun.gjc.spi.LocalTransactionImpl.rollback(LocalTransactionImpl.java:128)
        ... 28 more 
```

我们以同样的方式为 MySQL 和 PostgreSQL 创建连接池：

```
asadmin create-jdbc-connection-pool \
    --restype javax.sql.DataSource \
    --datasourceclassname org.postgresql.jdbc2.optional.PoolingDataSource \
    --property URL='jdbc:postgresql://127.0.0.1:5432/doi':serverName=localhost:databaseName=doi:user=doi:password=******** doi 
```

和

```
asadmin create-jdbc-connection-pool \
    --restype javax.sql.DataSource \
    --datasourceclassname com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource \
    --property serverName=127.0.0.1:dataBaseName=doi:user=doi:********=doi:schema=doi doi 
```

如何配置数据池以关闭空闲连接或使其保持活动状态并避免关闭连接错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T00:00:24.833

Pg 连接应无限期保持有效，只要：

*   数据库服务器未停止或重新启动
*   数据库服务器的 IP 不会改变
*   客户端和服务器之间没有连接跟踪或 NAT 路由器

后两者不是问题，因为您连接到本地主机，因此您不需要任何特殊措施来保持连接有效。

我有点怀疑你正在使用`org.postgresql.ds.PGSimpleDataSource`. Glassfish 有自己的池，您可能应该使用该计划`org.postgresql.datasource.Datasource`。您很可能正在进行两层池化，结果可能令人困惑。您会注意到[PgJDBC 文档](http://jdbc.postgresql.org/documentation/80/ds-ds.html)中的声明：

> 这里提供的池化数据源实现并不是世界上功能最丰富的。除此之外，在池本身关闭之前，连接永远不会关闭；没有办法缩小池。同样，为默认配置用户以外的用户请求的连接不会被汇集。它的错误处理有时无法从池中删除断开的连接。通常不建议使用 PostgreSQL™ 提供的连接池。检查您的应用程序服务器或查看优秀的 jakarta commons DBCP 项目。

请切换到使用`org.postgresql.ds.PGSimpleDataSource`，看看是否能解决您的问题。

# ruby-on-rails - 读取活动记录时Rails nil

> ID：11115548
> 
> 赞同：1
> 
> 时间：2012-06-20T08:25:44.720
> 
> 标签：ruby-on-rails, ruby, activerecord, null

我的模板中有这个

```
<% @clients.each do |client| %>
<li><%= link_to client.name, :controller => "client", :action => "show", :id => client.id %></li>
<%=YAML::dump(client.lastfull)%>
<% end %> 
```

客户端看起来像这样：

```
class Client < ActiveRecord::Base
        set_table_name 'client'
        alias_attribute :id, :clientid
        set_primary_key :clientid

        has_many :jobs, :foreign_key => 'clientid', :order => 'starttime DESC'

        def lastfull
                jobs.first
        end
end 
```

这有效，这是输出：

```
--- !ruby/object:Job attributes: jobid: "81" name: dobrak comment: "" endtime: 2012-06-20 10:15:04 
```

但是当我尝试读取任何属性时，我得到错误：

```
undefined method `jobid' for nil:NilClass 
```

职位类别：

```
class Job < ActiveRecord::Base
        attr_accessor :jobid

        set_table_name 'job'
        belongs_to :client

        has_one :status, :primary_key => 'jobstatus', :foreign_key => 'jobstatus'
end 
```

我尝试添加返回属性的方法jobid并添加attr_accessor，但对我没有任何帮助。有什么建议么？谢谢你。

导轨 2.3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:55:02.470

看起来有些客户没有任何工作。如果将行更改为类似的内容会发生什么`<%= client.lastfull.present? ? YAML::dump(client.lastfull.jobid) : 'client has no jobs' %>`？你也可以看看[`Object#try`](http://apidock.com/rails/Object/try)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:57:14.533

在输出 client#lastfull 的结果之前添加条件，如下所示：

```
<% if client.lastfull %>
  output job info here like <%= lastfull.jobid %> etc.
<% else %>
  no jobs available
<% end %> 
```

# c# - HttpWebRequest GetResponse 没有这个方法

> ID：11115550
> 
> 赞同：0
> 
> 时间：2012-06-20T08:25:58.213
> 
> 标签：c#, windows-phone-7, servlets

忙于使用适用于 Windows 手机的 Visual Studio 2010 Express，并且想要调用从我的一个类返回 json 的 servlet。

到目前为止，我有以下方法：

```
public Login(string userName, string password){

   string servletUrl = "http://172.12.5.35:8080/SomeService/login?u="+userName+"&p="+password;
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(servletUrl);
   HttpWebResponse response = (HttpWebResponse)request.GetResponse();

} 
```

但是由于某种原因，我在“”方法调用中得到一个错误，`GetResponse()`说没有这样的方法？有人有什么想法吗？我环顾四周，我的代码对我来说似乎是正确的？

已编辑---------------

```
public Login(string userName, string password){

   string servletUrl = "http://172.12.5.35:8080/SomeService/login?u="+userName+"&p="+password;
   using(var client = (IDisposable)new WebClient(servletUrl))
   {
        string result = client.DownloadString(servletUrl);

   {

} 
```

但是好像没有`DownloadString`WebClient的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:35:54.323

Windows Phone 7（和一般的 Silverlight）不支持同步 IO。如果您查看[Silverlight API 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.95%29.aspx)，您会发现编译器是完全正确的 -没有*方法*`GetResponse`。您需要改用异步[`BeginGetResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse%28v=vs.95%29.aspx)方法。

或者，使用`WebClient`which 使异步部分更简单 - 当然 C# 5 的异步支持通常会使异步更容易。

编辑：如评论中所述 -`DownloadString`仍然是同步的，因此 Silverlight 不支持。您想要异步 API，例如`DownloadStringAsync`.

# garbage-collection - 适合 GC 的内存堆数据结构？

> ID：11115558
> 
> 赞同：0
> 
> 时间：2012-06-20T08:26:13.623
> 
> 标签：garbage-collection, language-agnostic, heap-memory

我一直在阅读有关垃圾收集的内容，但所有描述都假定您已经实现了堆持有、分配和记忆对象。

我发现很难找到关于托管堆的经文。有人可以提几个算法、数据结构和其他资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:45:13.393

我不太确定你在这里问什么——堆的管理与实际的垃圾收集算法密切相关，所以我有点惊讶你提到的参考资料没有解释堆是如何的管理。如果您能指出您已阅读的描述，这可能会有所帮助。

我想您问题的根源可能是内存管理器实际上如何跟踪已分配的所有对象，以便它可以找到不再被引用的对象。最简单的方法是通过分配对象的链表——为指向列表中下一个对象的指针分配额外的空间，每个对象都分配了空间。

非垃圾回收内存管理器通常还会保留已释放对象的列表，但垃圾回收内存管理器通常能够避免这种情况，因为它可以识别指向特定对象的所有引用，从而允许它通过在内存中移动对象来压缩内存。因此它可以假设它总是有一个连续的空闲内存块可用，并简单地保留一个指向空闲内存开头的基指针。

[本文](http://msdn.microsoft.com/en-us/library/f144e03t.aspx)是一个有用的起点，它解释了 .NET 中内存管理的一般原则。

# java - 安卓界面部分

> ID：11115561
> 
> 赞同：0
> 
> 时间：2012-06-20T08:26:20.960
> 
> 标签：java, android, interface

那是什么以及如何在我的应用程序中执行它？也许一些有用的链接？![界面](../Images/ad2892860c8f56bf2bba5d1ceaaa3c0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:29:44.590

这是**快速操作对话框**找到下面的教程我们如何在我们的应用程序中使用快速操作对话框

[如何在 Android 中创建 QuickAction 对话框](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

# c# - linq-To-Sql：使用枚举（标志）过滤

> ID：11115565
> 
> 赞同：4
> 
> 时间：2012-06-20T08:26:43.247
> 
> 标签：c#, linq, linq-to-sql

我有一个枚举：

```
[Flags]
public enum EmailType
{
    PasswordRecovery = 1,
    Activation = 2,
    SendTicket = 4
} 
```

例如，在一个表中，我们的值等于 3，这意味着 - `PasswordRecovery`, `Activation`。这是我的查询：

```
var emailType = EmailType.PasswordRecovery;
return Database.EmailSettings.FirstOrDefault(es => es.EmailType ==  (int)emailType); 
```

当然这个查询不能正常工作：`3 == 1 => false`. 如何正确过滤？
谢谢。

**更新：** 我正在使用`Flags`属性，因为还有一个使用 XAF（devexpress 框架）编写的应用程序，并且我在 UI 中有一个需要`Flags`属性的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:31:59.973

```
int emailType = (int)EmailType.PasswordRecovery;
return Database.EmailSettings.FirstOrDefault(es => (es.EmailType & emailType) == emailType); 
```

**编辑：**我添加了一个演员表，因为`es.EmailType`is 和`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:34:29.233

```
Database.EmailSettings.FirstOrDefault(
    es => es.EmailType.HasFlag(EmailType.PasswordRecovery)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:35:41.760

I think `EmailType == 3` is one of your conditions? Maybe you can get the results using other conditions first, and then filter with this condition in C# code using [Enum.HasFlag](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx) method. If this is the only condition you want to query, maybe you can store "1,2" instead of "3" in DB.

# sql-server - SQL Server 中数据库名称的常量

> ID：11115566
> 
> 赞同：1
> 
> 时间：2012-06-20T08:26:44.903
> 
> 标签：sql-server, sql-server-2008-r2

在我的数据库创建脚本中，我有很多行，例如

```
ALTER DATABASE [database_name_value] SET... 
```

因为经常需要创建几个具有不同名称的实例，所以我经常需要在文本编辑器中替换 database_name，这很容易出错，我想通过声明一些常量（如 database_name_constant）并为其分配数据库名称来更正确地完成此操作跨脚本使用它。

在 SQL Server 2008 中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:29:49.767

您可以在脚本中创建一个变量，然后在 SQLCMD 模式下运行脚本

```
:setvar DatabaseName "MyDBName" 
```

然后使用

```
ALTER DATABASE [$(DatabaseName)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:33:31.913

如果您从要修改的数据库中的查询执行操作，*那么*[`CURRENT`](http://msdn.microsoft.com/en-us/library/bb522682.aspx)您正在寻找的选项。

```
ALTER DATABASE CURRENT SET ... 
```

# android - 使用 ICS Holo 样式动态创建 EditText

> ID：11115570
> 
> 赞同：1
> 
> 时间：2012-06-20T08:26:54.573
> 
> 标签：android, android-edittext, android-4.0-ice-cream-sandwich, dynamically-generated

这是我的问题：我正在使用 HoloTheme 为 ICS 创建一个应用程序。因此，默认情况下，我在 .xml-layout 中实现的所有 EditText 视图如下所示：![在此处输入图像描述](../Images/a1bd9f8d643271c4805529f5b739d9d4.png)

但是当我尝试动态创建相同的 EditText 时，它们看起来都像 Android 2.3 等中的 EditText（只是带边框的白色矩形）。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:54:29.010

你确定你动态创建它们是正确的吗？

```
LinearLayout l = new LinearLayout(this);

EditText et = new EditText(this);

//this would create a 100x50 editText
l.addView(et, new LinearLayout.LayoutParams(100, 50));

//and this one would create an editText with relative width and fix height
l.addView(et, new LinearLayout.LayoutParams(50, LayoutParams.WRAP_CONTENT)); 
```

如果正如您在此处所说的那样，EditText 的样式不是 ICS 的样式，则问题可能是：

*   您实际上并没有在 ICS api 中编程（在项目中，您可以在属性-> Android 中轻松设置）
*   在 androidManifest 中检查 minimum-sdk 为 13 (4.0.3)：

    ```
    <uses-sdk android:minSdkVersion="13"> 
    ```

*   确保安装了正确的模拟器（使用您想要的 api）。

我希望您可以通过该检查解决您的问题。

# java - 从 sup 标签中检索文本

> ID：11115571
> 
> 赞同：1
> 
> 时间：2012-06-20T08:27:05.800
> 
> 标签：java, html, jsoup

我必须从给定的代码中提取 a href 值

```
<table>
<tr>
<td class="left ">
<a href="reference" >Refer</a>see this
<sup class="super"><a href=​"#src1" onclick=​"dosomething;​" title=​"1" >​1​&lt;/a>​&lt;/sup>
</td>
<td class="td_right2" style="padding-top: .25em"></td>
</tr>
..

</table> 
```

我的代码是

```
 for(Element info: div3.select("tr")){
 Elements aqInfo= companyB.select("td") 
 String href=aqInfo.text(); 
 } 
```

href 只给我标签内的文本以外的文本

如何获取 sup 标签内的 text 和 href 标签？

编辑：我意识到页面源看起来像这样

```
<tr><td class="left "><a href="reference" ">Reference</a>see this <sup class="super_src"></sup></td><td class="right" style="padding-top: .25em"></td></tr> 
```

Firefox 中的“检查元素”显示了`<a>`内部`<sup>`，我需要 this 的内容`<a>`。如果我错了，请纠正我，但我认为这`Jsoup.connect(url).get();`给出了源文档，而 Inspect 元素给出了当前加载的页面。有没有办法在页面完全加载后检索页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:05:45.463

试试这个：

```
Element mySup= doc.select("sup.super").first();
String linkHref = mySup.child(0).attr("href");
String linkVal = mySup.child(0).text(); 
```

解释：

选择带有`sup`标签和`super`类的元素访问它的第一个子`a`标签，然后访问它的`href`属性

得到你应该做`href`的`text inside the a`一切`a`

```
Elements links = doc.select("a[href]");
for (Element link : links) {
  String linkHref = link.attr("href");
  String linkText = link.text();
} 
```

# c - 分配一维二维数组并返回

> ID：11115572
> 
> 赞同：0
> 
> 时间：2012-06-20T08:27:08.397
> 
> 标签：c, arrays

我尝试动态分配二维数组的一维。数组声明如下：

```
uint16_t coord[][2]; 
```

我只需要分配行数，坐标数。通过谷歌，我找到了足够的代码来分配这两个维度，从：

```
uint16_t **coord; 
```

我不确定我是否仍然可以像上面那样声明数组。我需要做：

```
uint16_t *coord[2]; 
```

或不？

我还需要从分配函数返回数组（指向它的指针），以便其他函数可以像这样访问数组：

```
foo = coord[4][0];
bar = coord[4][1]; 
```

返回分配的数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:37:18.097

根据[顺时针/螺旋规则](http://c-faq.com/decl/spiral.anderson.html)，声明如下：

```
uint16_t *coord[2]; 
```

是一个由两个指针组成的数组，这似乎不是你想要的。但是，您可以改用它：

```
uint16_t (*coord)[2]; 
```

您可以像这样为其分配内存：

```
coord = malloc(num_entries * sizeof(uint16_t[2])); 
```

现在您可以将其作为普通的多维数组访问：

```
coord[0][0] = 1;
coord[0][1] = 2;
coord[1][0] = 3;
coord[1][1] = 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:38:04.333

您正在混合数组和指针，这些不一样。

```
uint16_t coord[][2]; 
```

是不完整的类型，因为您没有定义一个维度。您将通过使用初始化程序来修复该维度。似乎您并不真正熟悉该概念，因此最好先使用一维概念进行热身：

```
uint16_t line[] = { 1, 2, 3 }; 
```

会给它三个元素。

# c++ - WaitForSingleObject 等待超时

> ID：11115581
> 
> 赞同：0
> 
> 时间：2012-06-20T08:27:48.107
> 
> 标签：c++, winapi, waitformultipleobjects

我正在使用`WaitForMultipleObject`带有 waitForAll 参数 = true 的函数。这里使用一个 `std::vector`句柄对象来等待。如果此函数超时，那么我如何识别等待哪个句柄超时？

```
if(WAIT_OBJECT != WaitForMultipleObject(vector.size(), vector.data(), true, 16000))
{
//get the event that causes the wait to time out(assume that only one object is timed out.others are successfully set.)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:35:39.503

根据MSDN的[`WaitForMultipleObjects`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)函数定义：

> 返回值减`WAIT_OBJECT_0`表示满足等待的对象的**数组索引**。如果在调用期间有多个对象发出信号，则这是所有已发出信号对象中索引值最小的已发出信号对象的数组索引。

因此，您只需要检查：函数是否成功 - 一切正常，如果没有，则检查数组中有哪些类型的句柄，哪些没有。因此，您可以找出有问题的句柄。

另外，我建议您看一下该[`SignalObjectAndWait`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686293%28v=vs.85%29.aspx)功能。它的行为是不同的，但也许你会发现它在某些情况下很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:32:24.447

您说您正在使用 WaitForMultipleObject，但您的代码显示的是 WaitForSingleObject。假设您正在使用 WaitForMultipleObject 并且如果您对参数说真，则意味着当向量中所有对象的状态都发出信号时，该函数将返回。

因此，在您的情况下，如果超时，则不会向您的任何对象发出信号。

# android - 如何通过 zxing 扫描意图请求扫描图像？

> ID：11115584
> 
> 赞同：2
> 
> 时间：2012-06-20T08:27:54.340
> 
> 标签：android, barcode, zxing

我尝试制作一个需要条形码扫描仪的应用程序，我已经可以通过 zxing 条形码扫描仪通过意图获取条形码，但是我可以获取从条形码扫描仪捕获的图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:59:38.203

不，这不是通过`Intent`.

# jquery - jQuery追加多个到 HTML 表中的最后一行，然后作为数组发送到 PHP 我想知道如何使用 ADD 按钮“即时”创建下面的 <select>，然后能够将值作为数组作为 POST 发送到 PHP 文件 HTML</select> <option value="1">第一个选项值</option> <option value="2">第二个选项值</option>

> ID：11115585
> 
> 赞同：0
> 
> 时间：2012-06-20T08:27:57.963
> 
> 标签：jquery, select, add

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:36:46.577

也许像这样？

```
$("#mytable:last-child").after('<select>....bla bla bla...</select>'); 
```

编辑：

在我看到您的编辑“刚刚抱歉”之后，我想您的问题出在“引号”上

当你添加选择

```
$("whatever").append('<select id="">......</select>'); 
```

你必须 1- 注意引用“一个好的编辑可以解决这个问题” 2- 把它放在`<td> here </td>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:33:01.547

使用下面的伪代码创建一个选择选项

```
var outerselect  = $('<select><option value='1'>First option value</option>
  <option value='2'>Second option value</option>
  <option value='3'>Third option value</option>
</select>')

$("tablecellelector").append(outerselect) 
```

# java - 在java中查找二维矩阵中的峰值

> ID：11115586
> 
> 赞同：2
> 
> 时间：2012-06-20T08:27:58.457
> 
> 标签：java, fft, analysis, scientific-computing, spectrum

我花了几天时间寻找解决问题的方法。我在一个大矩阵（大约 1400 x 2700）中找到峰值时遇到问题。我需要找到主峰和两个较小的峰 - 换句话说，图片中的三个最大的峰。该矩阵是一个拟合图像的两个 FFT 的结果。主要问题是找到主峰的大小。我设法找到了中心峰的最大值，但由于噪音，我找不到它的尽头。有没有人有任何想法或代码示例我可以查看以找到解决方案？

**更新：还有一个相关的问题：如何有效地确定矩阵中的阈值（噪声）？如果我能成功地做到这一点，找到峰值会很容易吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:33:46.710

如果您不关心峰值的大小，您可以尝试先在矩阵上应用移动平均滤波器。这样，您一方面会降低峰的高度，但另一方面会消除噪音。

应用移动平均滤波器后，您可能会查看矩阵的梯度，以识别峰值。

# mysql - 在 MySQL 表中查找“exotic”值

> ID：11115590
> 
> 赞同：5
> 
> 时间：2012-06-20T08:28:13.107
> 
> 标签：mysql, sql, count

我有一个名为`accounts`. 此表中有一个名为 的字段`salesmanager_id`。99% 的情况下，此字段中的值对于特定客户的所有帐户（用 指定`customer_id`）始终相同。

我想要做的是`customer_id`为客户分配给多个销售经理的客户。例如：

```
+------------------------------------+
| id | customer_id | salesmanager_id |
|------------------------------------|
| 1  | 12          | 4               |
| 2  | 12          | 4               |
| 3  | 14          | 3               | <-- I want this customer_id
| 4  | 14          | 4               |
+------------------------------------+ 
```

在上面的示例中，`customer_id`14 同时`salesmanager_id`分配了 3 和 4。我想`customer_id`为我的列表检索它。

我尝试了以下查询，但返回一个空结果（虽然我确信至少存在一些差异）。

```
SELECT `name`, `customer_id` AS `customer`, `salesmanager_id` FROM `accounts`
WHERE `salesmanager_id` NOT IN (
    SELECT `salesmanager_id` FROM `accounts` a
    LEFT JOIN `customers` c ON (a.customer_id = c.id)
    WHERE a.customer_id=c.id
) GROUP BY `customer`; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T08:37:46.677

```
SELECT 
    customer_id
FROM 
    accounts
GROUP BY 
    customer_id
HAVING 
    COUNT(DISTINCT salesmanager_id) > 1 
```

这基本上得到了`salesmanager_id`每个的所有 s ，`customer_id`如果有多个唯一`salesmanager_id`值，`customer_id`则返回 。

# ios - 查看过渡

> ID：11115596
> 
> 赞同：1
> 
> 时间：2012-06-20T08:28:35.650
> 
> 标签：ios, view, transition

在 modalTransitionStyle 目前有 4 种现有样式，我想知道如何编写自己的过渡？

我看过这个名为 Flipboard 的应用程序，它有这个惊人的过渡，任何帮助将不胜感激

一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:39:02.393

您可以以任何您喜欢的方式在 viewDidAppear/viewWillDisappear 方法中以编程方式为过渡设置动画。但是，您应该使用自定义转换为每个视图执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:51:48.267

**我建议您查看[本教程](http://maniacdev.com/2010/09/tutorial-creating-a-custom-transition-with-core-animation/)和[此 stackoverflow 问题的答案](https://stackoverflow.com/questions/1060551/getting-started-creating-custom-view-transitions)。**

# jquery - 我错过了什么？简单的 HTML 和 jQuery

> ID：11115599
> 
> 赞同：0
> 
> 时间：2012-06-20T08:28:46.730
> 
> 标签：jquery, html

为什么这个简单的 HTML 文档不能正常工作？我错过了什么？我在另一个线程中得到了这个解决方案，但我无法抓住提交它的人。我所做的只是复制了他给我的部分：http: [//jsfiddle.net/UnQMU/](http://jsfiddle.net/UnQMU/)

```
<html>
<head>
    <title></title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        function cancelBubleEv(e)
        {
             e = e||event;
             e.stopPropagation? e.stopPropagation() : e.cancelBubble = true;

        }

        $(document).ready(function () {
            $(document).click(function () {

                $("#exampleDiv").hide();

            });
            $(".testColor").click(function (e) {
                $("#exampleDiv").toggle();
                cancelBubleEv(e);
            });
           $("#exampleDiv").click(function (e) {
                cancelBubleEv(e);
            });

        });​

    </script>

    <style type="text/css">

        #exampleDiv 
        {
            position: absolute;
            top:22px;
            left: 0px;
            width:198px;
            height:150px;
            overflow-y: scroll;
            overflow-x: hidden;
            border: 1px solid #7F9DB9;
            display: none;
        }

    </style>

</head>
<body>

    <div style="position:relative;">
        <div ID="DropDownList1" runat="server" width="200" class="testColor">
            Choose Multiple
        </div>
        <div id="exampleDiv">
            <input type="checkbox" ID="CheckBox2"/>
            <br />
            <input type="checkbox" ID="CheckBox3"/>
            <br />
            <input type="checkbox" ID="CheckBox4"/>
            <br />
            <input type="checkbox" ID="CheckBox5"/>
            <br />
            <input type="checkbox" ID="CheckBox6" runat="server" />
            <br />
            <input type="checkbox" ID="CheckBox7"/>
            <br />
            <input type="checkbox" ID="CheckBox8"/>
            <br />
            <input type="checkbox" ID="CheckBox9"/>
            <br />
            <input type="checkbox" ID="CheckBox10"/>
            <br />
            <input type="checkbox" ID="CheckBox11"/>
            <br />
            <input type="checkbox" ID="CheckBox12"/>
            <br />
        </div>
    </div>​

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:07:07.677

问题似乎是 jsFiddle 在源代码中添加了一些不明显的字符。如果它们被删除，则代码有效。请注意，`cancelBubleEv`jQuery 不需要该功能，为什么不使用最新版本。也没有`</html>`。

```
<html>
<head>
    <title></title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            $(document).click(function () {
                $("#exampleDiv").hide();
            });

            $(".testColor").click(function (e) {
                $("#exampleDiv").toggle();
                e.stopPropagation();
            });

            $("#exampleDiv").click(function (e) {
                e.stopPropagation();
            });
        });
    </script>

    <style>
        #exampleDiv
        {
            position: absolute;
            top:22px;
            left: 0px;
            width:198px;
            height:150px;
            overflow-y: scroll;
            overflow-x: hidden;
            border: 1px solid #7F9DB9;
            display: none;
        }
    </style>

</head>
<body>

    <div style="position:relative;">
        <div ID="DropDownList1" runat="server" width="200" class="testColor">
            Choose Multiple
        </div>
        <div id="exampleDiv">
            <input type="checkbox" ID="CheckBox2"/>
            <br />
            <input type="checkbox" ID="CheckBox3"/>
            <br />
            <input type="checkbox" ID="CheckBox4"/>
            <br />
            <input type="checkbox" ID="CheckBox5"/>
            <br />
            <input type="checkbox" ID="CheckBox6" runat="server" />
            <br />
            <input type="checkbox" ID="CheckBox7"/>
            <br />
            <input type="checkbox" ID="CheckBox8"/>
            <br />
            <input type="checkbox" ID="CheckBox9"/>
            <br />
            <input type="checkbox" ID="CheckBox10"/>
            <br />
            <input type="checkbox" ID="CheckBox11"/>
            <br />
            <input type="checkbox" ID="CheckBox12"/>
            <br />
        </div>
    </div>

</body>
</html> 
```

# iphone - 如何将我的代码更改为横向？

> ID：11115610
> 
> 赞同：0
> 
> 时间：2012-06-20T08:29:25.577
> 
> 标签：iphone, ipad, ios5, screen-orientation

我已经编写了一些用于显示下拉列表的代码，但是当我使用时，下面的代码不起作用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{} 
```

在 iPad 上。

有谁知道我可以如何解决这个问题？

我的代码：

```
- (void)dropDownCellSelected:(NSInteger)returnIndex{
    [button setTitle:[arrayData objectAtIndex:returnIndex] forState:UIControlStateNormal];
}   

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if (UIInterfaceOrientationIsLandscape(interfaceOrientation)){
        return YES;
    } else {
        return NO;
    }
} 
```

帮我解决 iPhone 上的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:45:53.587

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO]; 
```

# winapi - 如何检查 IShellFolder 是否是驱动器？

> ID：11115613
> 
> 赞同：0
> 
> 时间：2012-06-20T08:29:32.647
> 
> 标签：winapi, visual-c++, com, windows-shell

我正在尝试过滤 SHBrowseForFolder 中显示的文件夹并将其限制为驱动器。我正在通过 IFilterFolder 接口对其进行过滤，这使我可以访问使用 IShellFolder 接口显示的文件夹。

有没有办法检查给定的 IShellFolder 是否是驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:55:06.367

IShellFolder 的 GetAttributesOf() 成员函数可用于获取列表中顶级驱动器项为零的属性。我目前找不到任何其他替代方案。

# java - 使用两个单独的过滤条件，使用 Lambdaj

> ID：11115614
> 
> 赞同：2
> 
> 时间：2012-06-20T08:29:42.373
> 
> 标签：java, functional-programming, filtering, lambdaj

使用 Lambdaj，我试图从列表中分离出满足 2 个单独标准的对象。以下两项都将实现我的目标。一个）

```
 List<SomeObject> someObjectsWithMatchingSomeObjectIds = select(foo.getSomeParentObject().getSomeObjects(), having(on(
            SomeObject.class).getId(), equalTo(123)));
    SomeObject someObject = selectFirst(someObjectsWithMatchingSomeObjectIds, having(on(SomeObject.class).getLoanTerm(),
            notNullValue())); 
```

二）

```
 SomeObject someObject = selectFirst(select(foo.getSomeParentObject().getSomeObjects(), having(on(SomeObject.class)
            .getId(), equalTo(123))), having(on(SomeObject.class).getLoanTerm(), notNullValue())); 
```

第一个似乎更具可读性，特别是对于不熟悉 API 的人。第二个似乎利用了 lambdaj 的函数式编程方面，哪个最好？

我想可读性获胜。但是，我想知道，在使用 LambdaJ 过滤集合时，是否有更简洁的方法来处理两个单独的条件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T07:58:29.410

删除中间定义并不是什么“更符合精神”，而且通常会损害可读性。有一个中间定义有助于使程序的每一行更易于阅读，并且当您可以为标识符提供一个有意义的名称时，它可以是一个很好的可读性帮助 - 不确定您的代码中是否真的如此。

我认为，您可以通过不应用两个过滤操作，`select`然后`selectFirst`只使用一个将两个匹配条件与一个`and`（注意，代码未测试）结合起来的操作来获得可读性胜利：

```
SomeObject someObject = selectFirst(foo.getSomeParentObject().getSomeObjects(),
                                    and(having(on(SomeObject.class).getId(), equalTo(123)),
                                        having(on(SomeObject.class).getLoanTerm(), notNullValue())); 
```

# playframework - 如何通过布尔值在播放视图模板中呈现不同的 html 元素？

> ID：11115616
> 
> 赞同：1
> 
> 时间：2012-06-20T08:29:46.570
> 
> 标签：playframework, playframework-1.x

如果我将布尔值传递给视图，例如“选中”，如何根据选中的值（即真或假）显示不同的 html 元素？

```
#{if ${checked}}
     <p>aaa</p>
#{/if}
#{else}
     <p>bbb</p>
#{/else} 
```

我尝试上面的代码但失败了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:40:21.120

```
#{if checked}
     <p>aaa</p>
#{/if}
#{else}
     <p>bbb</p>
#{/else} 
```

${} 语法仅用于将值打印到模板中。在 #{if } 标签内，playframework 需要 groovy 语法。

此外，请查看[#{if} 标签的文档](http://www.playframework.org/documentation/1.2.4/tags#if)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:16:07.273

除了带有内联 if 的@aaberg 响应：

```
<input type="checkbox" ${checked ? 'checked="checked"' : ''} />
<span>The previous checkbox is ${checked ? "checked" : "not checked"} !</span> 
```

# python - 如何在 Python 2.7 旁边的 Mac 上添加 Python 3.1 的路径？

> ID：11115619
> 
> 赞同：1
> 
> 时间：2012-06-20T08:29:54.647
> 
> 标签：python, macos, python-3.x, terminal, pythonpath

我是一个试图学习 Python 的 17 岁男孩。我使用 CBT Nuggets 作为我的教程，但是我遇到了一个问题。我刚切换到 Macintosh，我不知道如何在终端上运行 python 3.1 代码并阻止它尝试使用 Python 2.7 运行它（这是内置的，我相信最好不要搞砸。）

提前致谢！

# javascript - 散点图实现的固定轴

> ID：11115621
> 
> 赞同：1
> 
> 时间：2012-06-20T08:29:57.720
> 
> 标签：javascript, d3.js

我正在玩 d3 来构建一些散点图。出于某种原因，我无法为我的绘图获得合适的 X 轴 - 该轴总是有一些重叠的文本。此外，这些点似乎与轴重叠。我怎样才能解决这个问题看起来更好？

我已经尝试过[jsfiddle](http://jsfiddle.net/Legend/bZY9e/2/)。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:07:33.273

您可以使用[axis.ticks](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)来减少刻度数；`xAxis.ticks(5)`似乎在这里工作得很好。

要阻止点与轴重叠，您有几个选择。一种是您可以增加[tickSize](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickSize)或[tickPadding](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickPadding)。圆圈仍会与刻度线重叠，但不会与刻度线标签重叠。另一种选择是您可以增加域以强制在圆圈和轴之间留出额外的空间。

通常，您使用[d3.extent](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_extent)（或仅[d3.min](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_min)和[d3.max](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_max)）自动计算域。以下是如何将域每边扩展 10% 的示例：

```
// First set the domain automatically from the data.
var x = d3.scale.linear().domain(d3.extent(numbers));

// Then extend the domain using invert (with the default range [0, 1]).
x.domain([-.1, 1.1].map(x.invert));

// Lastly set the desired range.
x.range([0, width]); 
```

在您的情况下，由于您正在对域进行硬编码，因此您可以将硬编码的内容更改为更广泛的值。

# android - 使用 ActionBarSherlock 看不到我的片段

> ID：11115622
> 
> 赞同：2
> 
> 时间：2012-06-20T08:30:02.763
> 
> 标签：android, listview, android-fragments

我正在尝试使用 ActionBarSherlock 根据当前正在查看的选项卡显示不同的列表片段。到目前为止，尽管我什至无法通过尝试显示我的片段。我可以看到它正在被实例化和创建，但它根本没有显示在视图中。

这是我实现 SherlockFragmentActivity 的活动：

```
public class MyListView extends SherlockFragmentActivity implements ActionBar.TabListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(com.actionbarsherlock.R.style.Theme_Sherlock); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);

        MyListFrag listFrag = (MyListFrag) getSupportFragmentManager()
                .findFragmentById(R.id.fragment1);          
        listFrag.update(ViewActivity.livePoints);

        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        fragmentTransaction.add(R.id.fragment1, listFrag);
        fragmentTransaction.commit();

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 3; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);

            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }

} 
```

您可以看到我尝试使用片段管理器将片段添加到活动中，但我也尝试通过 xml 添加它，这对我来说目前也不起作用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="20dip">

<fragment
    android:name="core.MyListFrag"
    android:id="@+id/fragment1"
    android:layout_weight="1"
    android:layout_width="0px"
    android:layout_height="match_parent" 
    />

</LinearLayout> 
```

最后，这是我正在使用的 listfragment 类。我想要做的是使用我通过扩展 baseadapter 创建的自定义适配器填充列表，但我不确定我是否正确地执行此操作，这可能是问题的一部分。

```
public class MyListFrag extends SherlockListFragment{

MarkItemAdapter mia;

@Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  mia = new MarkItemAdapter(this.getActivity(), MyViewActivity.livePoints);
  setListAdapter(mia);
  Toast.makeText(getSherlockActivity(), "frag started"+MyViewActivity.livePoints.size(), Toast.LENGTH_LONG).show();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.list_frag_layout, container, false);

}

public void updateUrl(List<Points> newList) {
    if(mia!=null){
        mia.points.clear();
        mia.points = newList;
        mia.notifyDataSetChanged();
    }else{
        mia.points = newList;
        mia.notifyDataSetChanged();
    }
}

class MarkItemAdapter extends BaseAdapter{
    List<Points> points = null;
    Context cntx = null;
    LayoutInflater myInflater;
    int itemPosition =0;
    ViewHolder holder;

    public MarkItemAdapter(Context cntx,List<Points> points){

        this.points = points;
        this.cntx = cntx;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return marks.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        itemPosition = position;

        if (convertView==null) {
            convertView = myInflater.inflate(R.layout.point_row_item, null);
            holder = new ViewHolder();
            holder.description = (TextView) convertView.findViewById(R.id.point_description);
            holder.distance = (TextView) convertView.findViewById(R.id.point_distance);
            holder.point_image = (ImageView) convertView.findViewById(R.id.point_image);
            holder.view_point = (ImageButton) convertView.findViewById(R.id.view_mark);
            holder.rate_point = (RatingBar) convertView.findViewById(R.id.rate_point);
            convertView.setTag(holder);
        }else{
            holder = (ViewHolder) convertView.getTag();
        }

        holder.description.setText(points.get(itemPosition).title);
        holder.distance.setText(points.get(itemPosition).getDistanceString());
        holder.view_point.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                //do stuff
            }

        });

    //add logic for rating bar

        return convertView;
    }

}

private class MyViewHolder{
    ImageView mark_image;
    TextView description;
    TextView distance;
    ImageButton view_mark;
    RatingBar rate_mark;
}

} 
```

如果这有助于任何人帮助我，我可以添加其他 XML 布局，但我将它们排除在外，因为我很确定这是我的 Java 问题而不是布局。当你第一次使用片段时，它们肯定不是很简单。我不确定我是否必须使用`onAttach()`或其他东西，查看Android文档并查看所有其他教程让我现在完全困惑。在我知道我已经接近之前开始玩片段，所以我不想把十个教程放在一堆乱七八糟的代码中，只是为了让一个科学怪人片段继续下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T09:58:58.073

我假设您发布的 xml 文件是**R.layout.tab_navigation**看起来还可以

如果您没有“找不到类...”或“错误膨胀布局...”之类的错误，那很好

使用片段的想法是拥有作为**容器**的活动（SherlockFragmentActivity） ，以及在旋转屏幕或使用平板电脑时可以**添加/替换**的子项（片段），以便拥有灵活的界面。

这种方式也可以用来有主/明细流如**albumList->imageList->slideShow**

所以你有你的 MyListView 扮演**容器**的角色并膨胀你发布的 xml **R.layout.tab_navigation**。MyListFrag 类将替换应答器**片段**并自身膨胀**R.layout.list_frag_layout**

现在使用片段时，您应该考虑使用**替换**而不是**添加**

一个问题，你想用片段做什么（在这种情况下）？

# javascript - .each() 函数仅在数组中输出最后一个结果

> ID：11115623
> 
> 赞同：3
> 
> 时间：2012-06-20T08:30:03.950
> 
> 标签：javascript, jquery, html

我有字符串。然后我将字符串拆分为一个数组。

我曾经`.each()`希望一个接一个地遍历数组并产生特定的输出。

但是，当我尝试这样做时，我只得到了输出数组中的值。

怎么会？

我已经设置了一个 jsfiddle 来演示我到目前为止所尝试的内容以及我得到的结果：

[http://jsfiddle.net/S7Z6K/2/](http://jsfiddle.net/S7Z6K/2/)

```
var string = 'this is a string';
stringArray = string.split('');

$.each(stringArray, function(index, value){
    $('#output').text(index + ' : ' + value);
});​ 
```

我试图在用户输入文本、点击提交并将输入返回给他们的地方实现它，但每次他们点击提交时，它都会替换当前输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T08:33:07.193

**见这里** [http://jsfiddle.net/S7Z6K/4/](http://jsfiddle.net/S7Z6K/4/) **或** [http://jsfiddle.net/S7Z6K/6/](http://jsfiddle.net/S7Z6K/6/)

您正在覆盖旧的结果集`.text`

在代码中，您可以看到我将旧结果集附加到新结果集，因此一切看起来都很好。

希望这可以帮助！

**代码**

```
var string = 'this is a string';
    stringArray = string.split('');
    var hulkfoo = "";
    $.each(stringArray, function(index, value){
        hulkfoo += index + ' : ' + value + " -- "; 
        $('#output').text(hulkfoo);
    });​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:32:45.863

您反复将输出元素的值设置为每个连续的数组值，而您将看到的唯一一个是设置的最后一个值，这确实正是您的 jsFiddle 所显示的。

`.text()`用新内容替换当前内容。它不会向已经存在的内容添加内容。

如果您描述了您要解决的实际问题，我们可以更好地建议使用什么代码而不是。我怀疑您是否真的想使用`.append()`，因为将字符串拆分为多个片段然后一次将它们全部附加到一个字符是很愚蠢的。你一定想做一些比这更有趣的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T08:32:53.343

您在这里所做的只是在每次迭代`.text()`中覆盖 的值。`#output`

您应该尝试使用该`.append()`功能。

```
$.each(stringArray, function(index, value){
    $('#output').append(index + ' : ' + value);
});​ 
```

或者，为了解释的缘故，你也可以做这样的事情 -

```
var element = $('#output') // use cache to improve performance
element.text( element.text() + index + ' : ' + value); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-20T08:33:20.907

尝试这个....

```
var string = 'this is a string',
    stringArray = string.split('');

$.each(stringArray, function(index, value){
    $('#output').append(index + ' : ' + value);
});​ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T08:41:16.250

```
var string = 'this is a string';
    stringArray = string.split(/\s/);

    $.each(stringArray, function(index, value){
        $('#output').text(function(i, oldText) {
           return oldText += index + ' : ' + value;
        });
    }); 
```

**[演示](http://jsfiddle.net/S7Z6K/11/)**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-20T08:32:58.810

您不断更新#output，唯一保留的是最后一次迭代中的val。

尝试 .append() 而不是文本更新演示：http: [//jsfiddle.net/epinapala/S7Z6K/5/](http://jsfiddle.net/epinapala/S7Z6K/5/)

```
var string = 'this is a string';
    stringArray = string.split('');
    alert(stringArray);
    $.each(stringArray, function(index, value){
        $('#output').append(index + ' : ' + value);
    });​ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-20T08:33:58.987

这是因为该`text()`函数将在每次调用它时替换元素的内部文本。您可以简单地将文本替换`append()`为以附加文本，尽管这不会被格式化。

如果你想格式化你的输出，你可以做这样的事情； [http://jsfiddle.net/S7Z6K/8/](http://jsfiddle.net/S7Z6K/8/)

```
var string= 'this is a string';
stringArray = string.split('');

$.each(stringArray, function(index, value){
    var div = $('<div></div>').text(index + ' : ' + value)
    $('#output').append(div);
}); 
```

要在每次按下按钮时清除输出并更新，以便每次单击提交时都会替换当前输出，您可以执行以下操作；[http://jsfiddle.net/S7Z6K/15/](http://jsfiddle.net/S7Z6K/15/)

```
$('#submit').click(function(){

    var value = $('#value').val();
    var array = value.split('');
    var output = $('#output');
    output.empty(); 
    $.each(array, function(index, value){
        output.append('<div>' + index + ' : ' + value + '</div>');
    });
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-20T08:35:45.687

`text()`函数不会附加文本，`output`所以你看到的是最后替换的结果

# java - 在多个独立的 hashMap 对象中搜索特定键

> ID：11115628
> 
> 赞同：0
> 
> 时间：2012-06-20T08:30:26.180
> 
> 标签：java, hashmap, key

在我开始进一步编写我的解决方案之前，我有一个稍微有点理论性的问题要弄清楚......

背景。我需要在 2 个（或可能更多）MS Access 文件之间进行比较。

每个文件都应包含在其他文件中找到的数据。

由于我在使用 JDBC 和连接到 Access 结果集时遇到的“限制”（它们只能向前滚动！），我创建了对结果集结构进行建模的“java 对象”（类）。

本质上，我有一个对象，它模拟结果集中的单个记录行（让我们称之为 rowSet） 一个 resSet 对象然后有一个 rowSet 的“数组”。

但是，为了“加快速度”，我捕获了键和索引列中的值，并为相关的 rowSet 对象创建了一个“key_Index”的 hashMap。

我比较然后执行以下操作。

获取第一个 resSet 对象（用作主对象），从中收集各个 Key_Index 哈希图（我们称其为“aKey”....

现在使用这个“aKey”对象搜索其他可用的 resSet 对象，看看是否有任何包含与“aKey”中的值匹配的 key_Index 值。

然而，我刚刚有一个相当烦人的想法。

如果我在我的其他 resSet 对象之一上使用代码 resSet.get(aKey) 我会遇到问题，因为“aKey”对象显然不是同一个对象 - 尽管它的内容应该是相同的（即可比较的）。

我不得不说，当我阅读我的问题时，我认为它的措辞不好......所以我想我将包括我创建的课程的副本......

重要部分：

成员：挑战 - “结果集”类型对象的数组列表。

方法：runChallenge()

```
package KWhite;

/**
 * the RScomparator is designed for the instance of comparing a double entry database system, as
 * often occurs in localy run medical trials data.
 * 
 * The double entry is to ensure that there are no errors made during input, the entry is performed
 * in separate independant instances. The RScolmparator object is specifically able to take any
 * number of result sets as its input (ie queries from multiple independantly created databases)
 * 
 * It should be recognised that this object should probably be called as part of a DBcomparator
 * object.
 * 
 */
//imports here

//import of logger class and required dependencies...
import java.util.ArrayList;
import java.util.HashMap;

import org.apache.log4j.PropertyConfigurator;

import MrBlue.DB_Table;
import TawuaiLogger.tawuaiLogger;

public class RScomparator {

//Static variables

//the logger instance
private static final TawuaiLogger.tawuaiLogger errLog = new tawuaiLogger("RScomparator");

//class member variables

/** this is a selection of ResSet objects that are going to have thier data challenged */
private ArrayList<ResSet_KW> challenge;
/**the name of the current table being challenged*/
private String tableName;
/**a 'table' object for meta data reference purposes, this can be used for getting column types etc */
private DB_Table table;

//These are our report objects
/**a report array for challenge failures */
private ArrayList<report_KW> fail;
/**a report array for errors, ie no challenger able to be made, no equivalent value found */
private ArrayList<report_KW> errors;
/**a report array for the good values */
private ArrayList<report_KW> success;

/** this is either the main class or the constructor
 * 
 * If it is a constructor rename to reflect the name of the class
 * @param args
 */
public RScomparator(DB_Table t) //TODO add arguments as required
{
    PropertyConfigurator.configure("Log4j.properties");
    // TODO Auto-generated method stub
    challenge = new ArrayList<ResSet_KW>();
    //initialise our report objects for this challenge scenario
    fail =  new ArrayList<report_KW>();
    errors = new ArrayList<report_KW>();
    success = new ArrayList<report_KW>();
    table = t;
    tableName = t.getTblName();
}

//class methods go here

/**
 * add a result set object into this comparator
 * 
 * @param r the result set object being inserted into this challenge.
 * 
 */
public void addChallenger(ResSet_KW r)
{
this.challenge.add(r);  
}

/**
 * this runs the comparison process...
 * Although no details in of itself are returned it calls other methods that do return a value
 *
 */

public void runChallenge()
{
//TODO finish this method, creating a report object on the way

    //these are the 2 result set objects that will be compared
    ResSet_KW gold = new ResSet_KW  ();
    ResSet_KW silver = new ResSet_KW ();

    //ensure the challenger list has objects in it.
    if(challenge.size() < 2)
    {
        //it must have 2 objects..
        errLog.add(3, "there are no results available for comparison of table " + this.tableName);
        //either way we should create report object.
        this.errors.add( new report_KW(tableName));
        //break out of the method.
        return;
    }

    //get the first row of data

    gold = challenge.get(0);//the first result set.

    //for each column in the result set, perform a search for the same key in the others..
    for(HashMap<String, String> c : gold.getRS().keySet())
    {//c is the key value in the map
        //cycle over the challenge object
        for (int i=1; i<challenge.size(); i++)//we don't want to use the first element, so start from 1 not zero
        {
            silver = challenge.get(i);
            if (silver.hasKey(c))
            {
                //a temp object for meta data referencing

                //only get the actual result values if there is a match
                Column_KW a = gold.getRS().get(c);
                Column_KW b = silver.getRS().get(c);
                //make the comparison
                a.compareTo(b, this.table);
                //get the reports from the comparison
                for(report_KW k :a.getFailure())
                    {
                    this.fail.add(k);
                    }
                for(report_KW k :a.getPassed())
                {
                    this.success.add(k);
                }
                for(report_KW k :a.getPassed())
                {
                this.errors.add(k);
                }
            }
            else
            {
                break;//return to the next item in the for loop
            }
        }
    }

}

/**
 *a helper method to create the error message creator
 *@ param m the extra message if any, 
 *@return s the full message
 */
private String getErrMessage(String m) {
    //the third element in the current stact trace should be the calling method
    StackTraceElement caller = Thread.currentThread().getStackTrace()[3];
    String s = m + "\ncalled from line " + caller.getLineNumber()
            + "\nmethod: " + this.getClass() + "." + caller.getMethodName();
        return s;
    }
}//end class 
```

附言。欢迎对我的代码发表任何评论或更多评论

提前致谢

大卫

编辑：我刚刚发现这个问题，[嵌套映射或java](https://stackoverflow.com/questions/8167543/nested-maps-or-combined-keys-in-java)中的组合键这将成为我的解决方案，创建一个'自定义'key_Index对象，然后为它定义一个hashcode（）和equals对象。但是，我已经为我的 key_index 对象使用了“hashMap”，所以这会在我没有注意到的地方自动执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:35:53.243

你说 ：

> 如果我在我的其他 resSet 对象之一上使用代码 resSet.get(aKey) 我会遇到问题，因为“aKey”对象显然不是同一个对象 -**尽管它的内容应该是相同的**（即可比较的）。

您必须分别实施`equals()`和`hashcode()`。实现是不够的`equals()`，`hashcode()`对象相等就必须一致。

例子：

```
import java.util.HashMap;
import java.util.Map;

class A {
    String name;
    Integer number;

    public A(String name, Integer number) {
    super();
    this.name = name;
    this.number = number;
    }

}

class B {
    String name;
    Integer number;

    public B(String name, Integer number) {
    super();
    this.name = name;
    this.number = number;
    }

    @Override
    public boolean equals(Object obj) {
    if (obj instanceof B) {
        return obj == this || (name.equals(((B) obj).name) && number.equals(((B) obj).number));
    }
    return false;
    }

    @Override
    public int hashCode() {
    return name.hashCode() + number.hashCode();
    }
}

public class TestHashMap {

    public static void main(String... args) {
        A a1 = new A("a", 1);
        A anotherA1 = new A("a", 1);

        Map<A, String> as = new HashMap<A, String>();

        as.put(a1, "a1");

        System.out.println(as.get(anotherA1)); // prints null

        B b1 = new B("b", 1);
        B anotherB1 = new B("b", 1);

        Map<B, String> bs = new HashMap<B, String>();

        bs.put(b1, "b1");

        System.out.println(bs.get(anotherB1)); // prints b1

    }

} 
```

# java - Android：尝试向我的应用程序添加另一种语言后出现膨胀异常

> ID：11115631
> 
> 赞同：0
> 
> 时间：2012-06-20T08:30:40.163
> 
> 标签：java, android, xml, logcat, inflate

我的 Android 应用程序使用英语运行，我也必须为用户提供阿拉伯语版本。我做了以下，

1.  添加了一个 layout-ar 文件夹并将我的布局文件放在那里。
2.  添加了一个 drawable-ar 文件夹并将我的图像放在那里。
3.  添加了 values-ar 文件夹并在 strings.xml 中翻译了我的字符串资源
4.  将我的模拟器中的语言设置更改为阿拉伯语进行测试

尽管我的应用程序的英文版本运行良好，但我的阿拉伯语版本现在崩溃并出现以下日志跟踪

```
06-20 10:08:13.153: E/AndroidRuntime(623): FATAL EXCEPTION: main
06-20 10:08:13.153: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.digitalhealthagency.elaj.gui/org.digitalhealthagency.elaj.gui.SplashScreen}: android.view.InflateException: Binary XML file line #7: Error inflating class android.widget.ImageView
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-20 10:08:13.153: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
06-20 10:08:13.153: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511)
06-20 10:08:13.153: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-20 10:08:13.153: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-20 10:08:13.153: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method)
06-20 10:08:13.153: E/AndroidRuntime(623): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class android.widget.ImageView
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
06-20 10:08:13.153: E/AndroidRuntime(623):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-20 10:08:13.153: E/AndroidRuntime(623):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.Activity.setContentView(Activity.java:1835)
06-20 10:08:13.153: E/AndroidRuntime(623):  at org.digitalhealthagency.elaj.gui.SplashScreen.onCreate(SplashScreen.java:16)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.Activity.performCreate(Activity.java:4465)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-20 10:08:13.153: E/AndroidRuntime(623):  ... 11 more
06-20 10:08:13.153: E/AndroidRuntime(623): Caused by: java.lang.reflect.InvocationTargetException
06-20 10:08:13.153: E/AndroidRuntime(623):  at java.lang.reflect.Constructor.constructNative(Native Method)
06-20 10:08:13.153: E/AndroidRuntime(623):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
06-20 10:08:13.153: E/AndroidRuntime(623):  ... 24 more
06-20 10:08:13.153: E/AndroidRuntime(623): Caused by: java.lang.OutOfMemoryError
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.Bitmap.nativeCreate(Native Method)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.widget.ImageView.<init>(ImageView.java:119)
06-20 10:08:13.153: E/AndroidRuntime(623):  at android.widget.ImageView.<init>(ImageView.java:109)
06-20 10:08:13.153: E/AndroidRuntime(623):  ... 27 more 
```

错误日志引用了我的 SplashScreen java 文件中的第 16 行，该文件设置了内容视图`setContentView(R.layout.splash_screen);`

而我的 splash_screen.xml 文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/splash_screen"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:src="@drawable/splash_screen" />

</LinearLayout> 
```

这个问题和我的 Android 很相似[：How to track down the origin of a InflateException?](https://stackoverflow.com/questions/2605999/android-how-to-track-down-the-origin-of-a-inflateexception) 但修复风格并不能解决问题。

先感谢您！

**编辑**

在按照 Aleks G 的建议减小图像的大小后，图像加载正常，但现在我在不同的地方遇到了类似的错误。

```
06-20 14:27:22.157: E/AndroidRuntime(623): FATAL EXCEPTION: main
06-20 14:27:22.157: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.digitalhealthagency.elaj.gui/org.digitalhealthagency.elaj.gui.AppointmentReservationActivity}: android.view.InflateException: Binary XML file line #99: Error inflating class <unknown>
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-20 14:27:22.157: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
06-20 14:27:22.157: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511)
06-20 14:27:22.157: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-20 14:27:22.157: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-20 14:27:22.157: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method)
06-20 14:27:22.157: E/AndroidRuntime(623): Caused by: android.view.InflateException: Binary XML file line #99: Error inflating class <unknown>
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
06-20 14:27:22.157: E/AndroidRuntime(623):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-20 14:27:22.157: E/AndroidRuntime(623):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.Activity.setContentView(Activity.java:1835)
06-20 14:27:22.157: E/AndroidRuntime(623):  at org.digitalhealthagency.elaj.gui.AppointmentReservationActivity.onCreate(AppointmentReservationActivity.java:88)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.Activity.performCreate(Activity.java:4465)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-20 14:27:22.157: E/AndroidRuntime(623):  ... 11 more
06-20 14:27:22.157: E/AndroidRuntime(623): Caused by: java.lang.reflect.InvocationTargetException
06-20 14:27:22.157: E/AndroidRuntime(623):  at java.lang.reflect.Constructor.constructNative(Native Method)
06-20 14:27:22.157: E/AndroidRuntime(623):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
06-20 14:27:22.157: E/AndroidRuntime(623):  ... 24 more
06-20 14:27:22.157: E/AndroidRuntime(623): Caused by: java.lang.OutOfMemoryError
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.Bitmap.nativeCreate(Native Method)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.content.res.Resources.getDrawable(Resources.java:664)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:867)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:804)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.content.res.Resources.loadDrawable(Resources.java:1920)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.view.View.<init>(View.java:2785)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.widget.TextView.<init>(TextView.java:449)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.widget.Button.<init>(Button.java:108)
06-20 14:27:22.157: E/AndroidRuntime(623):  at android.widget.Button.<init>(Button.java:104)
06-20 14:27:22.157: E/AndroidRuntime(623):  ... 27 more 
```

日志跟踪引用的第 88 行是

```
setContentView(R.layout.appointment_reservation); 
```

在约会_reservation.xml 中的第 99 行是

```
 <Button android:id="@+id/reserve_button"
        android:text="@string/reserve_button"
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:paddingRight="15dp"
        android:layout_gravity="left"
        style="@style/buttonStyle"
        android:background="@drawable/button_selector" /> 
```

我给按钮一个 button_selector xml 文件，该文件放在我的可绘制文件夹中。选择器在两个图像之间切换（总大小 6kb）。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:10:33.153

如果您查看日志的底部，您会发现问题的根本原因是：

```
Caused by: java.lang.OutOfMemoryError
 at android.graphics.Bitmap.nativeCreate(Native Method)
 at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
 at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
 at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
 at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
 at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
 at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
 at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
 at android.content.res.Resources.loadDrawable(Resources.java:1935)
 at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
 at android.widget.ImageView.<init>(ImageView.java:119)
 at android.widget.ImageView.<init>(ImageView.java:109)
 ... 27 more 
```

由于这发生在您的初始屏幕上，我猜测您正在加载的图像太大。比较英文版和阿拉伯文版的图像大小，看看阿拉伯文文件是否比英文大得多。尝试优化图像，也许，缩小它以减小尺寸......

**编辑：**关于第二个错误：

同样，这是一个 OutOfMemory 错误。当您遇到此类错误时，请始终查看最底部的`Caused by`部分。在这种情况下，您有：

```
Caused by: java.lang.OutOfMemoryError
 at android.graphics.Bitmap.nativeCreate(Native Method)
 at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
 at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
 at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
 at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
 at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
 at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
 at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
 at android.content.res.Resources.loadDrawable(Resources.java:1935)
 at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
 at android.widget.ImageView.<init>(ImageView.java:119)
 at android.widget.ImageView.<init>(ImageView.java:109)
 ... 27 more 
```

如果您按照您的指示减小了图像的大小，则意味着某处还有另一个大图像。

请注意，重要的不是 JPG 或 PNG 文件的文件大小，而是在内部解码该图像文件需要多少内存。估计内部解码图像文件大约需要多少内存的一种方法是在图像编辑器中打开该文件并将其保存为未压缩的 TIFF 文件。TIFF 文件的大小大约是在运行的 Android 应用程序中解码图像需要多少内存。作为测试，我刚刚将 750KB 的 JPG 保存为 TIFF - 结果是 5.8 MB。

# android - getText 被不停地调用

> ID：11115632
> 
> 赞同：0
> 
> 时间：2012-06-20T08:30:44.277
> 
> 标签：android, android-edittext

我有一个类，我已将其定义为 EditText 的扩展/我用它来解决我们一直遇到的问题，因为没有出现右对齐提示。因此，我编写了自己的代码，在内部实现了提示。

其中，我重写了 getText 方法，以便在值等于提示的情况下返回 null。问题是 getText 被不停地调用。它不是递归调用的。我在那里放了一个计数器，它肯定会在执行下一个呼叫之前退出一个呼叫。

```
 @Override
public Editable getText(){
    depth++;
    calls++;
    Log.d("RightJustifiedEditText","getText  - start. Depth =  " + depth + "   calls = " + calls);
    Editable result = (isEmpty?Editable.Factory.getInstance().newEditable(hint):super.getText());
    depth--;
    Log.d("RightJustifiedEditText","getText  - return: " + result + "    Depth = " + depth);
    return result;
} 
```

当我运行它时，“深度”的值每次显示为 1，然后显示为 0。“电话”的价值不断上升。

如果我删除“super.getText（）”并在其位置放置一个常量，那么它似乎没问题。

从我在调试跟踪中可以看到，它是从布局中调用的：

```
RightJustifiedEditText.getText() line: 115  
RightJustifiedEditText(EditText).getText() line: 48 
RightJustifiedEditText(TextView).getSelectionStart() line: 5892 
RightJustifiedEditText(TextView).onDraw(Canvas) line: 4057  
RightJustifiedEditText(View).draw(Canvas) line: 6880    
RelativeLayout(ViewGroup).drawChild(Canvas, View, long) line: 1646  
RelativeLayout(ViewGroup).dispatchDraw(Canvas) line: 1373   
TextFieldElement(ViewGroup).drawChild(Canvas, View, long) line: 1644    
TextFieldElement(ViewGroup).dispatchDraw(Canvas) line: 1373 
LinearLayout(ViewGroup).drawChild(Canvas, View, long) line: 1644    
LinearLayout(ViewGroup).dispatchDraw(Canvas) line: 1373 
DoctorSearchElement(ViewGroup).drawChild(Canvas, View, long) line: 1644 
DoctorSearchElement(ViewGroup).dispatchDraw(Canvas) line: 1373  
LinearLayout(ViewGroup).drawChild(Canvas, View, long) line: 1644    
LinearLayout(ViewGroup).dispatchDraw(Canvas) line: 1373 
ScrollView(ViewGroup).drawChild(Canvas, View, long) line: 1644  
ScrollView(ViewGroup).dispatchDraw(Canvas) line: 1373   
ScrollView(View).draw(Canvas) line: 6986    
ScrollView(FrameLayout).draw(Canvas) line: 357  
ScrollView.draw(Canvas) line: 1409  
RelativeLayout(ViewGroup).drawChild(Canvas, View, long) line: 1646  
RelativeLayout(ViewGroup).dispatchDraw(Canvas) line: 1373   
RelativeLayout(View).draw(Canvas) line: 6883    
FrameLayout(ViewGroup).drawChild(Canvas, View, long) line: 1646 
FrameLayout(ViewGroup).dispatchDraw(Canvas) line: 1373  
FrameLayout(View).draw(Canvas) line: 6883   
FrameLayout.draw(Canvas) line: 357  
LinearLayout(ViewGroup).drawChild(Canvas, View, long) line: 1646    
LinearLayout(ViewGroup).dispatchDraw(Canvas) line: 1373 
PhoneWindow$DecorView(ViewGroup).drawChild(Canvas, View, long) line: 1644   
PhoneWindow$DecorView(ViewGroup).dispatchDraw(Canvas) line: 1373    
PhoneWindow$DecorView(View).draw(Canvas) line: 6883 
PhoneWindow$DecorView(FrameLayout).draw(Canvas) line: 357   
PhoneWindow$DecorView.draw(Canvas) line: 1862   
ViewRoot.draw(boolean) line: 1522   
ViewRoot.performTraversals() line: 1258 
ViewRoot.handleMessage(Message) line: 1859  
ViewRoot(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 3683    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 839  
ZygoteInit.main(String[]) line: 597 
NativeStart.main(String[]) line: not available [native method] 
```

这是直接包含它的布局：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<com.applicat.meuchedet.views.RightJustifiedEditText
    android:id="@+id/text_field_element_text_field"
    android:layout_width="170dip"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:textColor="@color/text_field_color"
    android:textSize="14sp"
    android:layout_marginRight="5dip"
    android:paddingLeft="15dip"
    android:paddingRight="15dip"
    android:gravity="right|center_vertical"
    android:inputType="text"
    android:lines="1"
    android:scrollHorizontally="true"
    android:ellipsize="end"
    android:background="@drawable/text_field_bg"
    />
<TextView
    android:id="@+id/text_field_element_prompt"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:gravity="center_vertical|right"
    android:layout_centerVertical="true"
    android:textSize="16sp"
    android:singleLine="true"
    /> 
```

# performance - Magento 的 index_event 表是什么

> ID：11115637
> 
> 赞同：10
> 
> 时间：2012-06-20T08:31:20.500
> 
> 标签：performance, magento, indexing

我在保存类别期间尝试提高性能，我发现一旦通过 Magenti API 或后端更新类别，就会调用以下更新查询

```
SQL: UPDATE `index_event` SET `event_id` = ?, `type` = ?, `entity` = ?, `entity_pk` = ?, `created_at` = ?, `old_data` = ?, `new_data` = ? WHERE (event_id='13066')
BIND: Array
(
    [0] => 13066
    [1] => save
    [2] => catalog_category
    [3] => 2867
    [4] => 2011-09-22 13:50:54
    [5] => a:4:{s:30:"Mage_Catalog_Model_Indexer_Url";N;s:40:"Mage_Catalog_Model_Category_Indexer_Flat";N;s:43:"Mage_Catalog_Model_Category_Indexer_Product";N;s:41:"Mage_CatalogSearch_Model_Indexer_Fulltext";N;}
    [6] => a:11:{s:35:"cataloginventory_stock_match_result";b:0;s:34:"catalog_product_price_match_result";b:0;s:24:"catalog_url_match_result";b:1;s:30:"Mage_Catalog_Model_Indexer_Url";N;s:33:"catalog_product_flat_match_result";b:0;s:34:"catalog_category_flat_match_result";b:1;s:40:"Mage_Catalog_Model_Category_Indexer_Flat";N;s:37:"catalog_category_product_match_result";b:1;s:43:"Mage_Catalog_Model_Category_Indexer_Product";N;s:35:"catalogsearch_fulltext_match_result";b:1;s:41:"Mage_CatalogSearch_Model_Indexer_Fulltext";N;} 
```

谁能告诉我这是什么意思以及会发生什么？看起来一些索引操作被推送到队列，但它什么时候执行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T16:16:15.597

您的假设*“看起来某些索引操作被推送到队列”*是正确的。

回答你的问题*“但它什么时候执行？”* ：

一些 Magento 模型，例如

```
Mage_Core_Model_Store
Mage_Catalog_Model_Product
Mage_Catalog_Model_Category
Mage_CatalogInventory_Model_Stock_Item
Mage_Tag_Model_Tag
Mage_Tag_Model_Tag_Relation 
```

例如，队列索引事件。主要是在删除之前和/或提交之后。

他们通过调用类的`logEvent()`或`processEntityAction()`方法来做到这一点`Mage_Index_Model_Indexer`。

*   如果他们`logEvent()`直接调用，索引事件将仅排队。甚至不会尝试重新索引。

*   如果他们调用`processEntityAction()`，也会有一个索引事件排队，但 Magento 会在排队后立即尝试处理这个索引事件。

`Mage_Index_Model_Indexer::indexEvents()`某些模块还调用了第三种方法。与前两者的不同之处在于，它`indexEvents()`不会*对*任何索引事件进行排队，而只会尝试立即重新索引。

请注意，`processEntityAction()`只有`indexEvents()`在相应索引类型的进程模式为`Mage_Index_Model_Process::MODE_REAL_TIME`.

您可以通过`System -> Index Management`. 如果该`Mode`列显示*Update on save*，则该索引设置为`MODE_REAL_TIME`。

如果它改为*手动更新*，则设置为`Mage_Index_Model_Process::MODE_MANUAL`，这意味着永远不会发生自动重新索引。

在后一种情况下，您需要手动触发重新索引过程以重新索引数据。这可以使用多种方法来实现，例如通过在命令行上使用`System -> Index Management -> Index -> Reindex data -> Submit`或使用 Magento `shell/indexer.php`，或者通过编写由 cron 作业启动的自己的索引器进程集合处理脚本。

# java - 增加来自网站的 AJAX 调用次数

> ID：11115639
> 
> 赞同：0
> 
> 时间：2012-06-20T08:31:21.760
> 
> 标签：java, ajax, http, jakarta-ee, servlets

我想增加我的网站对运行 Java Servlet 的服务器进行的 ajax 调用次数。
我计划向 a 发送一个请求`MainServlet`，然后该 servlet 向`OtherServlets`.
我想要的是，他们应该直接发送给客户，而不是`OtherServlets`返回他们。 可能吗？`response``MainServlet``response`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:36:31.427

一种方法是使用 javascript/Ajax 创建许多调用。您始终可以创建循环以使用 Ajax 对 Servlet 进行重复调用。不确定你的目标是什么。您想对其他东西的 servlet 进行负载测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:32:38.967

只是从到`forward`的请求`MainServlet``OtherServlet`

# c# - SQL Server CE 3.5 SP2 .dbml 创建失败，但没有错误消息

> ID：11115640
> 
> 赞同：2
> 
> 时间：2012-06-20T08:31:28.097
> 
> 标签：c#, sql-server, database, sql-server-ce

首先，我在 VS2010 命令提示符处输入

```
1:prompt x
2:xcd C:\Users\Me\Desktop\Test\Test
3:xsqlmetal /dbml:TestMe.dbml /namespace:Test Database2.sdf 
```

结果：

```
Error : Database can't be found. 
```

然后我想，“好吧，我会在第 3 行写这个”

```
3:xsqlmetal /dbml:TestMe.dbml /namespace:Test C:\Users\Me\Desktop\Test\Test\Database2.sdf 
```

结果：

它显示没有错误。但是当我查看 C:\Users\Me\Desktop\Test\Test 时，没有 .dbml 文件。

==================================================== ======

我试过的： 1\. 重新输入命令。2\. 重启电脑，再次输入。3.也试过：

```
3:xsqlmetal /dbml:TestMe.dbml C:\Users\Me\Desktop\Test\Test\Database2.sdf

3:xsqlmetal /dbml:TestMe.dbml Database2.sdf 
```

....但没有一个工作。

其他信息：

1.  操作系统：Windows 7 32 位
2.  VS : VS2010 专业版 SP1
3.  数据库：SQL Server CE 3.5 SP2
4.  FW：32 位的 .NET Framework 4.0 运行时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T05:02:14.653

要使用 Visual Studio 2010 将 SDF 文件创建到 DBML，请在 Visual Studio 2010 命令提示符下写下一行，然后输入并执行它。

```
 SqlMetal.exe "EnterFilePath\CloudKase.sdf" /dbml:"EnterFilePath\CloudKase.dbml" 
```

此 SDF 和 DBML 文件也用于 Visual Studio 2012 易于访问和实现代码。

快乐编码:)

# java - android中的正确静态变量

> ID：11115645
> 
> 赞同：0
> 
> 时间：2012-06-20T08:31:52.940
> 
> 标签：java, android, static

我有一堂课：

```
public class Vars {

    public static final String NAME = "Alex";
    public static final String RANK = "COLONEL";

} 
```

在我的活动中，我做：

```
doSomething(Vars.NAME);

doSomething(Vars.RANK); 
```

这是对的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:33:38.610

是的，它应该。通常还建议将所有常量放在一个类中，因为这样可以更轻松地维护所有常量，更不用说减少跨类的常量复制了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:34:31.797

如果您询问从另一个类访问公共静态变量，**是**的，您正在 100% 编写代码。

您可以使用直接访问公共静态变量**`className.variableName`**

# jquery - Grails 多个 JQgrid

> ID：11115647
> 
> 赞同：1
> 
> 时间：2012-06-20T08:32:03.107
> 
> 标签：jquery, json, grails, jqgrid

我有这个 Grails 应用程序，我在其中安装了 JQuery、JQuery-UI 和 JQGrid 插件。我有这个 GSP，我需要在其中显示多个 JQGrid。

这是页面的示例脚本。

```
<jq:resources />
<jqui:resources />
<jqgrid:resources />
<script type="text/javascript"> 
$(document).ready(function() { 
   <jqgrid:grid id="type1List" 
      url="'${createLink(action: 'listType1', controller:'draft', params:[selectionDate: selectionDate])}'"
      ...
      datatype="'json'"> 
   </jqgrid:grid>
   <jqgrid:grid id="type3List" 
      url="'${createLink(action: 'listType3', controller:'draft', params:[selectionDate: selectionDate])}'"
      ...
      datatype="'json'"> 
   </jqgrid:grid>                
});
</script> 
```

这是body标签内部的包装

```
<p>Type 1</p>
<jqgrid:wrapper id="type1List" />
<p>Type 3</p>
<jqgrid:wrapper id="type3List" /> 
```

并且`DraftController`引用两个 jqgrid 的地方包含两种方法：`listType1()`和`listType3()`. 这两种方法都有这个结束语句，`render jsonData as JSON`其中 jsonData 遵循[此处](http://grails.org/plugin/jqgrid)提供的格式。

不幸的是，我无法正确显示两个 JQGrid。我只能显示`type1List`必须删除有关`type3List`. 文档准备好或加载后如何正确显示两个 JQGrid？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:41:35.360

我认为您会受益于不理会插件并直接使用 jqgrid。这真的就像学习使用插件标签一样简单，如果您开始想要使用网格执行更复杂的任务，从长远来看，这将使您的生活更加轻松。

检查我写的 Grails & JQGrid 教程，看看我的意思：[http ://www.grailsforum.co.uk/showthread.php/3-Grails-jQuery-amp-the-jQuery-Grid-Part-One](http://www.grailsforum.co.uk/showthread.php/3-Grails-jQuery-amp-the-jQuery-Grid-Part-One)

# php - arra_multisort 同时使用参数

> ID：11115649
> 
> 赞同：0
> 
> 时间：2012-06-20T08:32:14.470
> 
> 标签：php, arrays, multidimensional-array

我有以下 PHP 数组，我想先按年份排序，然后按类型排序：

```
$array = array(
        'note' => array('test', 'test1', 'test2', 'test3', 'test4'),
        'year' => array('2011','2010', '2012', '2009', '2010'),
        'type' => array('conference', 'journal', 'conference', 'conference','conference'),
    ); 
```

直到现在我做到了：（[codepad](http://codepad.org/Iexn2us2)）它是按类型排序的，而不是按年份排序的。

```
<?php
/**
 * @param array $array
 * @param string|int $by key/offset
 * @param array $order
 * @return array
 */
function array_multisort_by_order(array $array, $by, array $order)
{
     $max = max(array_map('count',$array));
    //or, alternatively, depending on input (if there are no 'complete' subarrays):
    //$max = max(array_map(function($arr){return max(array_keys($arr));},$array))+1;
    foreach($array as &$sub){
        $addin = array_diff_key(array_fill(0,$max,null),$sub);
        $sub = $addin + $sub;
        ksort($sub);
    }
    $order = array_flip($order);
    $params[] = $array[$by];
    foreach($params[0] as &$v) $v = $order[$v];
    foreach($array as &$v) $params[] = &$v; unset($v);
    call_user_func_array('array_multisort', $params);
    //no closeures here:
     //foreach($array as &$sub) $sub = array_filter(function($a){return   !is_null($a);},$sub);
    $filter = create_function('$a','return !is_null($a);');
    foreach($array as &$sub) $sub = array_filter($sub,$filter);
    return $array;
}
$array = array(
        'note' => array('test', 'test1', 'test2', 'test3', 'test4'),
        'year' => array('2011','2010', '2012', '2009', '2010'),
        'type' => array('conference', 'journal', 'conference', 'conference','conference'),
    );

print_r($array);

// Usage:
$array = array_multisort_by_order($array, 'type', array('conference', 'journal'));

print_r($array);
?> 
```

结果是：

```
Array
(
[note] => Array
    (
        [0] => test
        [1] => test2
        [2] => test3
        [3] => test4
        [4] => test1
    )

[year] => Array
    (
        [0] => 2011
        [1] => 2012
        [2] => 2009
        [3] => 2010
        [4] => 2010
    )

[type] => Array
    (
        [0] => conference
        [1] => conference
        [2] => conference
        [3] => conference
        [4] => journal
    )

) 
```

期望的输出：（按类型和年份排序。）

```
Array
(
[note] => Array
    (
        [0] => test2
        [1] => test
        [2] => test4
        [3] => test3
        [4] => test1
    )

[year] => Array
    (
        [0] => 2012
        [1] => 2011
        [2] => 2010
        [3] => 2009
        [4] => 2010
    )

[type] => Array
    (
        [0] => conference
        [1] => conference
        [2] => conference
        [3] => conference
        [4] => journal
    )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:37:03.870

您可以使用以下代码对您提到的方式进行排序。

```
<?

$array = array(
        'note' => array('test', 'test1', 'test2', 'test3', 'test4'),
        'year' => array('2011','2010', '2012', '2009', '2010'),
        'type' => array('conference', 'journal', 'conference', 'conference','conference'),
);

// Storing the original keys
$original_keys = array_keys($array);

$temp_array = array();

// Restructuring the array for sorting
foreach($array as $items){
   $index = 0;
        foreach($items as $item){
            $temp_array[$index++][] = $item;
       }
}

array_multisort($array['type'], SORT_ASC, SORT_STRING, $array['year'], SORT_DESC, $temp_array);

// Restoring the temp array in original format
$array = array();
foreach($temp_array as $items){
    $index = 0;
    foreach($original_keys as $key){
       $array[$key][] = $items[$index++];
    }
}
print_r($array); 
```

工作演示： [http ://codepad.org/GMPf7pFt](http://codepad.org/GMpf7pFt)

# jquery - 拆分选项值并添加到字段

> ID：11115650
> 
> 赞同：0
> 
> 时间：2012-06-20T08:32:17.127
> 
> 标签：jquery, select, split

我有

```
<select id="symb" class="big" name="symb">
  <option value="1#10#6">Basic Personal</option>
  <option value="2#20#6">Basic Family</option>
  <option value="10#90#12">Advanced Personal</option>
  <option value="11#120#12">Advanced Family</option>
</select> 
```

我需要拆分所选值并将中间数字添加到字段#cost。

同一表单上还有其他控件会添加它们的值#cost，因此我必须考虑到我需要保留初始值并在 #symb 的 onblur/onchange 事件上添加选项值。

您也可以查看我的[其他问题](https://stackoverflow.com/questions/11113875/get-selected-checkboxes-and-add-to-total)，以便了解更大的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:37:02.213

```
$("#symb").change(function(){
   $("#cost ").val($("option:selected", this).val().split("#")[1])
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:38:12.130

```
$("#symb").change(function(){
        $("#cost").val(parseInt($("option:selected").val().split('#')[1])+parseInt(document.getElementById("cost").defaultValue))
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:26:49.823

在有人遇到麻烦的帮助和我自己的一点运气的帮助下，我找到了我正在寻找的解决方案。我把它贴在这里以供将来参考。

```
var initial; 
    $("#symb").focus(function () {
        initial = parseInt($("#cost").val()); // assign the initial value before change
    }).change(function() {
        var symb =  parseInt($("option:selected").val().split('#')[1]);
        $("#cost").val(parseInt(initial+(symb-initial))); 
    }); 
```

# php - Php Zip 存档复选框数组

> ID：11115651
> 
> 赞同：1
> 
> 时间：2012-06-20T08:32:17.943
> 
> 标签：php

我正在尝试制作一个表格，用户可以在其中选择他们想要的 PDF 小册子，并将其压缩为文件名“Brochures.zip”供他们下载。

我在解决这个问题时遇到了问题。任何人都可以强调哪里出了问题？谢谢！

形式 ：

```
<label><input type="checkbox" name="brochure[]" value="file1">file1</label>
<label><input type="checkbox" name="brochure[]" value="file2">file2</label>
<label><input type="checkbox" name="brochure[]" value="file3">file3</label>
<label><input type="checkbox" name="brochure[]" value="file4">file4</label> 
```

下载.php

```
$brochure = $_POST['brochure'] ;
$send = true;
if($send) {
    $zip = new ZipArchive();
    $res = $zip->open('download.zip', ZipArchive::CREATE);
    if ($res === TRUE) {
        foreach ($brochure as $file => $val) {
            $filename = '../pdf/' . $val . '.pdf';
            $zip->addFile($filename);
        }
        $zip->close();

        header('Content-type: application/zip');
        header('Content-Disposition: attachment; filename="download.zip"');
        readfile('download.zip');

    }else {
        echo 'failed';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:49:28.620

如果文件未添加到存档中，您可以添加一个简单的检查：

```
if (!file_exists($filename)) { die("Cannot find $filename"); } 
```

您还可以向上报告错误：

```
error_reporting(-1);
ini_set('display_errors', 'On'); 
```

然后`exit;`紧随其后`$zip->close();`。`$zip->addFile()`如果出现任何问题，应该返回`false`，所以希望它也会显示一些警告/错误。

您也可以尝试`addFromString()`改用`file_get_contents()`，看看是否有帮助。我的猜测是其中的相对路径`..`会抛出 Zip 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:46:25.773

我设法通过使用[这里](http://www.9lessons.info/2012/06/creating-zip-file-with-php.html)的脚本来解决问题。另外，我意识到我需要将文件夹设置为 757 才能生成 zip 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:10:43.120

这是目录结构..

*   PDF格式

    -- 文件1.pdf

    -- 文件2.pdf

    -- 文件3.pdf

*   压缩

    -- 创建.php

    -- 下载.php

以下是与您相同的代码...

创建.php

```
<form action="download.php" method="post">
<label><input type="checkbox" name="brochure[]" value="file1">file1</label>
<label><input type="checkbox" name="brochure[]" value="file2">file2</label>
<label><input type="checkbox" name="brochure[]" value="file3">file3</label>
<label><input type="checkbox" name="brochure[]" value="file4">file4</label>
<input type="submit">
</form> 
```

download.php 与上面的代码相同。确保您具有正确的目录结构。正如我所说，我尝试了您的代码及其按预期工作创建带有选定文件（如 file1.pdf、file2.pdf 等）的 download.zip 文件......

# css - 如何在两行中对齐图像 avec 文本，这在 IE7 中有效？

> ID：11115652
> 
> 赞同：0
> 
> 时间：2012-06-20T08:32:18.363
> 
> 标签：css, internet-explorer-7

我尝试将图像（徽标）与两行文本（网站标题和简短描述）对齐。

我尝试执行此 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr-FR" lang="fr-FR">
    <head>
        <link type="text/css" rel="stylesheet" href="style.css" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
        <div id="site">
            <div id="header">
                <a title="Retour à l'accueil" href="#"><img width="40" height="40" title="mon logo" alt="mon logo" src="images/logo.png"/></a>
                <div class="title">
                    <h1>Mon site</h1>
                    <div>mon sous-titre avec des g et des p</div>
                </div>
                <div class="switchlanguage right">
                    <a href="#" title="english site"><strong>english</strong></a>
                </div>
                <div class="clear"></div>
            </div>
            <div id="content">
                <p>homepage</p>
            </div>
        </div>
    </body>
</html> 
```

使用这个 style.css ：

```
/**********
 * RESET *
 **********/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
/*table, caption, tbody, tfoot, thead, tr, th, td,*/
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font: inherit;
    vertical-align: baseline;
}

/* HTML5 display-role reset for older browsers */

article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
html {
    overflow:auto;
    font-size: 62.5%;
}
body {
    line-height: 1;
    color: #000;/*#656565;*/
}
ol, ul {
    list-style-type: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

 /**********
 * COMMON *
 **********/
body {
    font-family:Arial;
    color:#333333;
}

.left {
    float:left;
}
.right {
    float:right;
}
.clear {
    clear:both;
    height:0;
}
#site strong {
    font-weight:700;
}
#header, #content, #footer {
    width: 990px;
    margin-left: auto;
    margin-right: auto;
    padding-left:20px;
    padding-right:20px;
}

 /**********
 * HEADER *
 **********/

 #header {
    padding-top:20px;
    padding-bottom:20px;
    background-color: #FFF;
 }

 #header img {
    float: left;
    margin:0;
    padding:0;
    border: none;
 }

 #header div.title {
    float: left;
    padding-left:20px;
 }

 #header div.title h1 {
    font-size:2.6em;
    line-height:0.904em;
    height:0.904em;
 }

 #header div.title div {
    font-size:1.8em;
    line-height:0.917em;    
    height:1em;
 }
 #header .switchlanguage {
    font-size:1.1em;
 }
 #header .switchlanguage a {
    background-image:url('images/icn_langage.png');
    background-repeat:no-repeat;
    background-position:left center;
    padding-left:20px;
    color:#333333;
    text-decoration:none;
 }
 /**********
 * CONTENT *
 **********/

 #content {
    background-image:url('images/bg_body_repeat.jpg');
    background-repeat:repeat;
    min-height:400px;
    padding-top:10px;
    padding-bottom:20px;
    border-top:1px solid #ccc;
    border-bottom:1px dotted #909090;
 } 
```

但在 IE7 中，字母 p 和 g 被裁剪。

[你可以在这里看到结果](http://www.cedricescarment.com/template)

在两行中对齐图像和文本的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:48:52.253

在您的CSS中：

```
#header div.title div {
    font-size: 1.8em;
    line-height: 0.917em;
    height: 1em;
} 
```

增加你的`line-height`- 这应该可以解决它。确切的值需要进行一些测试并取决于您的设计。

您可能还希望将文本包装在`<p>`标签而不是`<div>`标签中，就像您在代码中的其他地方所做的那样 - 只是为了语义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:39:33.613

将 HTML 更改为

```
 <div class="title">
                <h1>Mon site</h1>
                <div class="tagline">mon sous-titre avec des g et des p</div>
            </div> 
```

和 CSS 到

```
.title .tagline{
   padding:0 0 2px 0;
} 
```

如果您知道标题 div 内将有 1 个 div，则可以将样式更改为

```
.title div{ padding:0 0 2px 0;} 
```

而不是像上面那样做一个单独的类（.tagline）

# entity-framework-4 - 自我跟踪实体和神秘的 ChangeTracker_ChangeTrackingEnabled 数据表列

> ID：11115653
> 
> 赞同：0
> 
> 时间：2012-06-20T08:32:19.567
> 
> 标签：entity-framework-4, ef-code-first, self-tracking-entities

我正在使用实现 IObjectWithChangeTracker 的自我跟踪实体，最后一个实体框架 RC 可用作 Nuget。目标数据库是 PostgreSQL。我还使用 Code First fluent API 来构建模型和 LINQ to Entity 来查询数据库。

令我惊讶的是，对实体的简单 SELECT 查询会生成一个 SQL 查询，其中包含一个在数据表中不存在的神秘列**ChangeTracker_ChangeTrackingEnabled ！**我不理解这种行为，因为在我看来 EntityTypeConfiguration 派生类将实体属性映射到其构造函数中的数据表列。

有没有办法禁用这种行为，或者至少告诉更改跟踪器应该映射哪一列？

为此，**Context.Configuration.AutoDetectChangesEnabled = false**或在 EntityTypeConfiguration 派生对象中调用**IsConcurrencyToken()**映射无济于事。

任何帮助表示赞赏。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:05:41.473

`NotMapped`您必须通过使用属性标记属性或使用`Ignore`流式 API来告知 EF 您希望在映射中避免的每个公共属性。

顺便提一句。据我所知，STE 并非设计为与代码优先或 DbContext API 一起使用。

# regex - 处理具有 2 个排除项的正则表达式

> ID：11115660
> 
> 赞同：2
> 
> 时间：2012-06-20T08:32:41.490
> 
> 标签：regex, regex-negation

我有一个正则表达式，它处理一个包含所有字母数字字符的 URL，包括`-`and `_`。我想添加一个例外，所以它不会处理 URL`/basic`和`/advance`

```
/?([a-zA-Z0-9_-]+)?/?([a-zA-Z0-9_-]+)?/?([0-9_-]+)? 
```

它应该处理上面的所有内容，除了“基本”和“高级”这两个词。

如何在上面的正则表达式中添加异常。

我试图在下面做一些事情，但没有奏效。

```
/?([a-zA-Z0-9_-]+^(?!basic) ^(?!advance))?/?([a-zA-Z0-9_-]+)?/?([0-9_-]+)? 
```

有任何想法吗？

我使用以下链接作为指南。

[使用正则表达式的字符串否定 正则](https://stackoverflow.com/questions/1153856/string-negation-using-regular-expressions)
[表达式和否定整个字符组](https://stackoverflow.com/questions/977251/regular-expressions-and-negating-a-whole-character-group)
[什么是非捕获组？问号后跟冒号 (?:) 是什么意思？](https://stackoverflow.com/questions/3512471/non-capturing-group)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:30:25.853

`/\/(?!basic\/)(?!advance\/)([a-zA-Z0-9_-]+)?\/([a-zA-Z0-9_-]+)?\/([0-9_-]+)?/`如果“基本”或“高级”只能站在序列的开头，则应该完成这项工作。我认为您不需要 ^ 在负前瞻组件之前的符号，也不需要中间的空格。

这是一个测试它的脚本：

```
<?PHP
    $ptn = "/\/(?!basic\/)(?!advance\/)([a-zA-Z0-9_-]+)?\/([a-zA-Z0-9_-]+)?\/([0-9_-]+)?/";
    $str = '/basic/asdasd/123'; 
    preg_match($ptn, $str, $match1);
    print_r($match1);
    $str = '/bazic/asdasd/123';
    preg_match($ptn, $str, $match2);
    print_r($match2);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T14:48:40.860

检查这个，但无论如何其他非字母数字字符也匹配！

```
/?([a-zA-Z0-9_-]+)?/?(?!.*(?:begin|advance))([a-zA-Z0-9_-]+)?/?([0-9_-]+)? 
```

[调试演示](https://www.debuggex.com/r/TapgMwRQXJnbOELy)

# android - Android 中的 WebViewTransport 是什么？

> ID：11115677
> 
> 赞同：5
> 
> 时间：2012-06-20T08:33:29.657
> 
> 标签：android, webview

[WebViewTransport](http://developer.android.com/reference/android/webkit/WebView.WebViewTransport.html)到底是什么，它的用途是什么？

# powershell - get Current user context

> ID：11115686
> 
> 赞同：7
> 
> 时间：2012-06-20T08:33:50.920
> 
> 标签：powershell, powershell-2.0, impersonation

I've got problems with running a powershellscript from different locations (c# application, webservice...). I think it is a user context problem, so now I'm trying to find out under which user context powershell script is running.

**Is there any possibility log the current usercontext of the powershellscript?**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T08:43:15.067

You could use the [WindowsIdentity class](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.aspx) to get the current thread user:

```
[Security.Principal.WindowsIdentity]::GetCurrent() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T08:44:15.657

If you need to know the actual user:

```
[reflection.assembly]::LoadWithPartialName("System.DirectoryServices.AccountManagement")
[System.DirectoryServices.AccountManagement.UserPrincipal]::Current 
```

Use:

```
[System.DirectoryServices.AccountManagement.UserPrincipal]::Current | gm 
```

to know available properties/methods of `UserPrincipal`.

# php - 如何使用 php 接收、解析来自 DVR 的 RTP 数据包？（RTSP 流媒体）

> ID：11115687
> 
> 赞同：2
> 
> 时间：2012-06-20T08:33:51.247
> 
> 标签：php

所以我的目标是能够接收和解释来自数字录像机（DVR）的 rtp 流。我的 RTSP 初始 tcp 消息和响应如下：

```
OPTIONS:

RTSP/1.0 200 OK
CSeq: 1
Keep-Alive: timeout=10, max=1000
Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, SET_PARAMETER
Connection: Keep-Alive

DESCRIBE:

RTSP/1.0 200 OK
CSeq: 1
Content-Base: rtsp://192.168.0.99:554/live/mpeg4/
Content-Type: application/sdp
Content-Length: 225

v=0
o=- 1 1 IN IP4 127.0.0.1
s=Test
a=type:broadcast
t=0 0
c=IN IP4 0.0.0.0
m=video 0 RTP/AVP 96
a=rtpmap:96 MP4V-ES/90000
a=fmtp:96 profile-level-id=3;config=00000100000001200086C4007B0C581120518F
a=control:track0

SETUP:

RTSP/1.0 200 OK
CSeq: 3
Transport: RTP/AVP;unicast;client_port=6970-6971;server_port=58132-58133
Session: 53A2D8BBA38F6D61979B8C323CB4A1

PLAY:

RTSP/1.0 200 OK
CSeq: 4
Session: 53A2D8BBA38F6D61979B8C323CB4A1
Range: npt=now-
RTP-Info: url=rtsp://192.168.0.99:554/live/mpeg4/track0;seq=58938;rtptime=388948125 
```

在此成功的初始步骤之后，DVR 应通过 RTP 协议启用比特流，但在 Wireshark 中我看不到任何 rtp 消息（过滤器：rtp）

如何使用 php 接收和解释 rtp 流？此外，我应该能够从给定的时间间隔获取图像。如果您能提供一些想法，我将不胜感激。

# cakephp - CakePHP Recaptcha 插件被调用两次

> ID：11115694
> 
> 赞同：1
> 
> 时间：2012-06-20T08:34:02.713
> 
> 标签：cakephp, captcha, recaptcha

好吧，我已经为此苦苦挣扎了将近一天......但我无法弄清楚为什么我的 recaptcha 插件被调用了两次。我怀疑，我的贝宝插件肯定也被调用了两次。我真的不知道为什么我的组件被调用两次，因为我知道如果加载两次插件操作就不可能被调用两次。任何输入/想法将不胜感激。请帮忙。我讨厌那些没有给我太多关于首先看哪里的线索的问题。谢谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:33:08.607

我有同样的问题。我注意到 reCAPTCHA 始终未能通过验证，并确定它被调用了两次，而第二次总是失败，我认为是因为 reCAPTCHA 库仅设计为允许对给定的挑战进行一次验证。

就我而言，它被调用了两次，因为我之前手动调用`Model::validate()`过`Model::save()`，除非被告知不这样做，否则它也会验证。我通过关闭调用 save ( `Model::save(null, false)`) 中的验证来解决此问题。

# asp.net - 这些东西还在asp.net中使用吗？

> ID：11115695
> 
> 赞同：0
> 
> 时间：2012-06-20T08:34:07.193
> 
> 标签：asp.net

我正在 asp.net 中接受培训，这些天在那里教授的主题是中继器和数据列表控制。我想知道这些东西在公司中是否经常使用。我想知道的另一件事是我应该深入学习哪些主题才能找到工作。我不想讨论过时的话题。

我不知道在 asp.net 工作领域最需要什么。请指导我完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:40:59.483

数据 GridView、用户数据验证，并学习一些基础知识，如绑定数据、xml 解析器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:44:04.597

是的，谈到 Asp.net，所有服务器控件都已使用并将被使用..
然而，Asp.net 本身对于学习网站制作并不是很好，因为它抽象了 Web 的底层漂亮的 http 请求/响应架构。
因此，如果您正在学习 asp.net，请对 ViewState 施加很大的压力，这也将帮助您最终构建基础知识。

有了它，ajax 的缓存和更新面板也很重要。如果可能的话，使用 jquerys ajax 可以告诉你很多关于 AJAX 的事情，也可以节省你的时间。（我记得我只是在更新面板上撞了几个小时试图弄清楚出了什么问题）。

然后在 c# 语言本身中有一些特性，比如 linq，它们对于连接到你应该强调的任何类型的数据库非常有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:44:56.123

asp框架中的每个控制组都很重要。这取决于您的应用程序的要求。成为优秀的开发人员

1.)清除与框架相关的所有基础知识。

2.)您必须了解所有控件。

3.) 你必须知道你如何处理数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:08:31.737

是的，它们仍在使用中。但是，如果您是 Asp.net 的新手，您可能会花更多的精力学习 ASP.NET MVC 而不是 Webforms。

MVC 是一种更现代的方法，具有清晰的关注点分离。你也没有得到 webforms 的视图状态/抽象。在此处了解更多信息：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

但是，许多网站仍在使用 webforms 方法，并且做得很好。将时间投入到控件、Linq 和实体框架中，

# google-maps - Gmaps 问题：呈现 KML 文件的巨大图标

> ID：11115696
> 
> 赞同：0
> 
> 时间：2012-06-20T08:34:07.470
> 
> 标签：google-maps, google-maps-api-3

今天，我渲染 kml 文件的每个站点都带有巨大的点图标。我正在使用自定义图标。

图标分辨率为32x32，gmaps绘制的图标尺寸大于300x300

这个网站多年来一直运行良好，我什么也没改变。

[http://mirador.dipusevilla.es/](http://mirador.dipusevilla.es/)

[http://tripcaddy.es/mapa](http://tripcaddy.es/mapa)

这是今天出现的谷歌地图问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:57:28.257

在我看来，`<scale>`里面的元素`<IconStyle>`已经打开了。您的 PNG 文件非常小，但您`30`在某些情况下指定了比例（KML 非常密集且不易解析）。

虽然在过去可能会被忽略，但在[规范](https://developers.google.com/kml/documentation/kmlreference#iconstyle)中，图像按`<scale>`. 如果是`1`你可能不会注意到。

# android - 我的应用在我的安卓智能手机上显示错误

> ID：11115707
> 
> 赞同：0
> 
> 时间：2012-06-20T08:35:14.443
> 
> 标签：android

编码-

```
package myusic.app.activity;
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MyusicActivity extends Activity {
    ArrayList<String> listItems=new ArrayList<String>();

    ArrayAdapter<String> adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        adapter=new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,
                listItems);
        ListView myList=(ListView)findViewById(android.R.id.list);
        myList.setAdapter(adapter);
    }

    public void addItems(View v) {
         listItems.add("Clicked");
         adapter.notifyDataSetChanged();
        }
} 
```

XML 布局代码-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Myusic player"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/b1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add" 
        android:onClick="addItems"
        />

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        >
    </ListView>

</LinearLayout> 
```

我在手机上运行它时显示的错误是：

```
The application Myusic(process myusic.app.activity) has stopped unexpectedly. Please try again. 
```

我认为错误在该行中，`myList.setAdapter(adapter)`因为我已经尝试删除该行，并且它没有显示任何错误，但显然当我按下按钮时它确实如此。请帮我解决这个问题。提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:46:09.613

错误是您`ListView`在 Layout XML 上的 id 为 : `@+id/list`，并且您尝试`onCreate()`使用另一个 id 在您的方法中找到它；

所以改变你的代码行以获得这样的listView：

```
ListView myList=(ListView)findViewById(R.id.list); 
```

或将布局上的 ListView 的 id 更改为如下所示：

```
<ListView
        android:id="@+android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        /> 
```

# clojure - 从 Java 执行 Clojure 脚本。无法解析类名、脚本依赖项

> ID：11115711
> 
> 赞同：1
> 
> 时间：2012-06-20T08:35:32.163
> 
> 标签：clojure

我需要编写一个 Clojure 脚本来从 Java 中执行，如下所示：

```
 try{
        RT.loadResourceScript("clojure/pdm-reader.clj");
        Var foo = RT.var("clojure.pdm-reader", "hello");
        result = foo.invoke("message");
        System.out.println(result.getClass().getName());

    }catch (IOException e){} 
```

在 Clojure 脚本中，我需要使用 HSSF POI。如何解决这种依赖关系？正在做

```
(:import [org.apache.poi.hssf.usermodel HSSFWorkbook]) 
```

抛出异常：

```
java.lang.IllegalArgumentException: Unable to resolve classname: HSSFWorkbook. 
```

我读过可以创建一个 .clojure 文件来插入脚本依赖项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:26:08.310

实际上，它就像在脚本所在的同一位置添加一个 .clojure 文件一样简单，然后添加以冒号分隔的 jar 文件。

# android - 编辑：从浏览器回调启动新应用程序而不是返回旧应用程序

> ID：11115721
> 
> 赞同：1
> 
> 时间：2012-06-20T08:35:58.620
> 
> 标签：android, android-asynctask, oncreate

编辑：事实证明问题比最初预期的要深。我刚刚检查了我的进程*，结果发现当 Web 浏览器“返回”时，它并没有返回到原始应用程序进程，而是创建了一个新进程。结果是我的应用程序的两个实例同时运行。我该如何解决这个问题？这是我清单中的意图过滤器，我必须处理回调*

```
<activity
       android:name=".LoginActivity"
       android:label="@string/app_name" >

       <intent-filter>
            <action android:name="android.intent.action.VIEW"/> 
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:host="whodunit" android:scheme="callback"></data>

            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
</activity> 
```

这是我的 onResume ：

```
@Override
protected void onResume() {  
    super.onResume();  
    if (this.getIntent()!=null && this.getIntent().getData()!=null){  
        Uri uri = this.getIntent().getData();  
        if (uri != null && uri.toString().startsWith("callback://whodunit")) 
        {
            Verifier verifier = new Verifier ( uri.getQueryParameter("oauth_verifier") );

            new OnCallBackTask(verifier).execute();
        } 

    }
    else
        new LoginTask().execute();

} 
```

# java - javacv中opencv pyrDown()的equal方法是什么？

> ID：11115723
> 
> 赞同：3
> 
> 时间：2012-06-20T08:36:13.993
> 
> 标签：java, c++, opencv, javacv

请有人解释 pyrDown() 方法的 javacv 方法。我正在尝试将[opencv代码](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/cpp/squares.cpp)转换为javacv，在那里我找到了这个方法。这是代码段

```
51    Mat pyr, timg, gray0(image.size(), CV_8U), gray;
52
53    // down-scale and upscale the image to filter out the noise
54    pyrDown(image, pyr, Size(image.cols/2, image.rows/2)); 
```

请有人解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:46:34.860

你可以这样做

```
CvSize sz = cvSize(src.width() & -2, src.height() & -2); 
```

并且您尝试做的工作已经完成，所以我相信这对于为正方形检测提供 javacv 代码可能会有很大帮助。这是链接。

[http://pastie.org/3959600](http://pastie.org/3959600)

尝试通过这个。

# javascript - 使用 Colorbox 在弹出窗口中加载外部网站

> ID：11115727
> 
> 赞同：0
> 
> 时间：2012-06-20T08:36:37.940
> 
> 标签：javascript, jquery, colorbox

在官方网站 [http://www.jacklmoore.com/colorbox/example2/提供的示例中](http://www.jacklmoore.com/colorbox/example2/)

该网站[http://threadless.com](http://threadless.com)在弹出窗口中成功打开。

我成功实现了这个例子，但我无法加载任何其他页面。

例如

```
<link rel="stylesheet" href="colorbox.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
        });
    </script>
<body>
    <p><a class='iframe' href="http://threadless.com">Outside Webpage (Iframe)</a></p>
</body> 
```

这段代码运行良好，但是当我用 google.com、facebook.com 或任何其他网站替换 threadless.com 时，会出现一个空白弹出窗口。有人可以帮我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:55:19.773

您可以使用 google 搜索框和您需要的任何其他内容创建一个简单的页面，然后在 iFrame 而不是 google.com 中打开它...

您希望搜索结果显示在 iFrame 还是新窗口中？

# xpath - 如何在节点对象的vala中使用xpath

> ID：11115729
> 
> 赞同：0
> 
> 时间：2012-06-20T08:36:42.963
> 
> 标签：xpath, libxml2, vala

如何在 Vala 中的 Xml.Node 对象上使用 XPath？

我能找到的唯一例子是一个 Context 是从一个 Doc 对象创建的，但我没有一个 Xml.Doc 对象开始。有没有办法可以将 Xml.Node 转换为 Xml.Doc？还是有其他方法？

我正在查看的示例是：[https ://live.gnome.org/Vala/XmlSample](https://live.gnome.org/Vala/XmlSample)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T00:48:33.090

Xml.Node 类有一个[Xml.Doc 文档](http://valadoc.org/libxml-2.0/Xml.Node.doc.html)成员。您应该能够使用它来获取节点的相关 Xml.Doc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:31:18.897

我也会对此感兴趣，这是我到目前为止一直在做的事情（我只是在学习 Vala）

```
 // Get the node's name
    string node_name = iter->name;

    switch (node_name){
            case "host":
                    this.host = (string) iter->get_content ();
                break;   
            case "username":
                    this.username = (string) iter->get_content ();
                break;   
            case "password":
                    this.password = (string) iter->get_content ();
                break;   
            case "database":
                    this.database = (string) iter->get_content ();
                break;   
             case "port":
                    this.port = (int)iter->get_content ();
                break;   

 } 
```

但是由于显而易见的原因，这适用于非常小而简单的 xml，但是当您使用更复杂和更大的 xml 时，您的性能将受到很大影响。

# c - 返回一个空的 char* 数组

> ID：11115730
> 
> 赞同：-2
> 
> 时间：2012-06-20T08:36:44.323
> 
> 标签：c, arrays, string

如果我想返回一个空的`char*`，我可以这样做

```
char* Fun1(void) {
 return "";
} 
```

现在想象一下同样的问题`char**`，我想返回一个空数组`char*`。

有没有更短的方法来写这个而不使用临时变量？

```
char** Fun2(void) {
 char* temp[1] = {""}; 
 return temp;
 // return {""}; // syntax error !
} 
```

`NULL`目标是隐藏字符串可以是指针的事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:46:38.717

相当于你对字符串文字所做的事情是这样的：

```
char const* const* Fun2(void) {
    static char const* const tmp[] = {""};
    return tmp;
} 
```

但正如我在对该问题的评论中所说，您可能需要重新考虑“空”的含义。

*您还需要考虑如果在某些情况下退货不为*空，您将要做什么。如果调用者应该释放返回的指针，那么返回指向字符串文字和/或静态数组的指针就不行了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:45:02.083

首先，从刚刚分配的函数返回指针不是一个好主意。问题是用户必须释放该内存，因此您强制他们使用与您相同的内存管理功能。

考虑到这一点，您想在此处分配 2 位内存：一个用于指向字符的指针，另一个用于字符本身。

```
char** p = malloc(sizeof(*p));
*p = malloc(sizeof(**p));
**p = '\0';
return p; 
```

然后记住用户必须这样做：

```
free(*p);
free(p); 
```

但我再说一遍，你做的不是好的编程。您最好编写接受空指针的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:49:53.470

不要使用临时变量，因为它会在返回时超出范围。如果您有多个函数返回相同的空数组，它们可以返回指向同一个“空数组”的指针。

```
char* EmptyArray[1] = {""}; 

char** Fun2(void) 
{
  return EmptyArray;
} 
```

此外，这使得通过比较指针可以很容易地检测函数是否专门返回空：-

```
char **arr =  Fun2(); 

if (arr == EmptyArray)
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:38:35.957

你不能只返回 null，因为 null 是空指针吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T08:42:38.727

`{""}`only 可用于在其定义处初始化变量。但不能作为表达式，也就是说，你不能像这样使用它

```
char* temp[1];
temp = {""}; // invalid 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T08:49:30.540

第一种情况很好，`""`从函数返回的字符串文字是安全的。对于第二种情况，您需要一个长度为 1 的数组，其中包含一个指向空字符串的指针，您可以做一些诡计：

```
char ** array_empty_if_null(const char **array)
{
  static char *empty[] = { "" };

  return (array == NULL || array[0] == NULL) ? empty : array;
} 
```

我认为这符合您对所需内容的描述。

# extjs - extjs 网格排序大小写不敏感

> ID：11115731
> 
> 赞同：1
> 
> 时间：2012-06-20T08:36:45.140
> 
> 标签：extjs

在 extjs 网格中，我们可以看到列可以是升序排序或降序排序。但在这种情况下，它们排序为区分大小写。如何将其更改为不区分大小写？前任。现在ti的作品为111、123、苹果、无题、无题01、苹果、qqq

我怎样才能将其更改为

111, 123, 苹果, 苹果, 无题, 无题 01,aqq

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:52:56.123

文档中对此进行了介绍：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.SortTypes](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.SortTypes) http://docs.sencha.com/ext-js/4-1/#!/api /Ext.data.Field

# python - 在网页文件中使用不止一种脚本语言

> ID：11115735
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:36:57.863
> 
> 标签：python, apache, web, webserver

是否可以在网页的单个文件中使用多种脚本语言？例如，我想在我的网页中使用 python 和 ether php？有没有可能？我的意思是，有 python 一个模块来解析这样的文件吗？或其他网络服务器上的任何可能性？像这样的东西：

***[文件 Erfankam.ppp]***

```
<php script part>
    Some thing in php
</php script part>

<html part>
    something in html
<html part>

<python script part>
    Some thing in python
</python script part>

<html part>
    something in html
<html part>

<perl script part>
    Some thing in perl
</perl script part> 
```

我希望我没有错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T22:44:14.313

您可以使用 Python 返回一个响应，该响应是一个 PHP 脚本，然后由 PHP 处理器进一步处理。但这始终是一个连续的过程。因此，每个阶段都将由不同的口译员处理。

我想不出这样做的充分理由。

另一方面，您当然可以为包含 PHP 和 Python 脚本的站点提供服务。对不同资产的请求可以由 Python 或 PHP 处理。在配置 Web 服务器时，这很容易实现。

可以编写某种解析器来查找特定标签，然后使用正确的解释器处理这些标签内的代码。但再次不确定您为什么要这样做。一些实际用例可能很有趣。

有关如何从 PHP 脚本中启动 Python/Ruby 的示例，请参见此处的答案 -[如何从 PHP 传递和接收参数中运行 Ruby/Python 脚本？](https://stackoverflow.com/questions/4619996/how-to-run-ruby-python-scripts-from-inside-php-passing-and-receiving-parameters)

# perl - Perl 并行编程

> ID：11115736
> 
> 赞同：1
> 
> 时间：2012-06-20T08:37:00.967
> 
> 标签：perl, parallel-processing, fork, wait, children

我对 Perl 不是很熟悉，所以我更愿意问你。我必须启动两个当代进程并等待它们，我已经这样做了：

```
use Parallel::ForkManager;

for ($i=0; $i<2; $i++)
{
  $pm->start and next;
  @args = ("python", "myprogram");
  push(@args,split(/ +/, $param)); 
  system(@args) == 0 or die "system @args failed: $?";
  $pm->finish;
}

$pm->wait_all_children; 
```

这是正确的还是有更好的方法来做到这一点？`system`并行使用是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:40:16.000

P::FM 的预期用途是限制孩子的数量，但在这里它确实很适合你。一些挑剔：

1.  您的错误报告中有一个小错误。具体来说，它可能会给你无用的信息。改变

    ```
    die "system @args failed: $?"; 
    ```

    到

    ```
    die "system @args failed: ".($? == -1 ? $! : $?)."\n"; 
    ```

2.  不必要地使用过于复杂的 C 风格的 for 循环。我会改变

    ```
    for ($i=0; $i<2; $i++) 
    ```

    到

    ```
    for my $i (0..1) 
    ```

3.  看起来您正在尝试解析命令行以避免调用 shell，而您可以简单地调用 shell。

    ```
    @args = ("python", "myprogram");
    push(@args,split(/ +/, $param)); 
    system(@args) 
    ```

    可以写成

    ```
    system("python myprogram $param") 
    ```

# asp.net-mvc-3 - 存储库模式和 Azure 表存储（？？？）

> ID：11115747
> 
> 赞同：4
> 
> 时间：2012-06-20T08:37:40.263
> 
> 标签：asp.net-mvc-3, azure-storage, azure-table-storage

在做以下简单示例时，我发现了以下困难正如标题所说，我打算在将数据存储在 Azure 表存储中时使用存储库模式。现在我有几个类，Repository.cs，IRepository.cs 、DataContext.cs 和Controller。

在阅读过程中，我发现了一些信息，并一直在做以下事情。IRepository.cs

```
public interface IRepository<T> where T: TableServiceEntity
{

    T GetById(int Id);

    IQueryable<T> GetAll();

} 
```

和 DataContext.cs

```
public class DataContext<T>:TableServiceContext where T:TableServiceEntity
{

   public DataContext(CloudStorageAccount storageaccount, StorageCredentials credentials)
        : base(storageaccount.TableEndpoint.AbsoluteUri, credentials) 
    {
       // _storageAccount = storageaccount;

       var  storageAccount =        CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(KEY_STORAGE));
        storageAccount.CreateCloudTableClient().CreateTableIfNotExist(tableName);

    }

   public IQueryable<T> DeviceTable
   {
       get { return CreateQuery<T>(tableName); }
   }

} 
```

加上控制器的某些部分（我之前创建的表中已经有数据）

```
public class DeviceMeController : Controller
{

    private IRepository<Entity>_repository;

    public Controller() : this(new Repository<Entity>()) 
    {
    }
    public Controller(IRepository<Entity> repository) 
    {
        _repository = repository;
    }
    public ActionResult Index()
    {
        var List = _repository.GetAll();

        return View(deviceList);
    } 
```

和接口 Reposistory.cs 的实现，这里是我有一个错误并在某个地方迷路的地方

```
 public class Repository<T>:IRepository<T> where T:TableServiceEntity
   {
  private  DataContext<T> _serviceContext;
    // here get tablename as pararameter;
    // so the Enities call this function 
    public Repository()
    {

        // the same context for multiple tables ? 
    }
    // perhaps it should take the table Name
    public void Add(T item)
    {

        _serviceContext.AddObject(TableName,item);
        _serviceContext.SaveChangesWithRetries();
    }
  public IQueryable<T> GetAll()
    {
       var results = from c in _serviceContext.Table
                      select c;

        return results; 
```

错误是关于空引用，调试器显示变量结果为空？

最后，我需要知道一些事情。

我应该在 Repository.cs 构造函数中做什么？我相信 Datacontext.cs 类必须在一个单独的类中......

这里有任何提示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:09:59.787

嗨，

首先，我假设您遗漏了一些代码，因为我看不到您如何在存储库中获取上下文。但是假设您正确设置它，（注入？）考虑到您设计数据上下文的方式，存储库不需要知道表名，因为它是在以下代码行中设置的：

```
 public IQueryable<T> DeviceTable 
 { 
     get { return CreateQuery<T>(Constants.DeviceTableName); } 
 } 
```

因此，当您基于 IQueryable DeviceTable 创建查询时，表名已经设置好了。

问题是我看不到您的上下文类的需要，特别是因为它只能带来单个实体类型（它是通用的并且基于实体）。我的 Azure 表存储库的基本布局是：

```
public abstract class CloudRepository<TEntity> : ICloudRepository<TEntity>
{
    private TableServiceContext _tableServiceContext;
    private string _tableName;

    public string TableName
    {
        get { return _tableName ?? ( _tableName = typeof(TEntity).Name.Replace("Entity", string.Empty).ToLower()); }
    }

    public CloudStorageAccount StorageAccount
    {
        get
        {
            return CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));
        }
    }

    public CloudTableClient TableClient
    {
        get
        {
            CloudTableClient cloudTableClient = StorageAccount.CreateCloudTableClient();
            cloudTableClient.CreateTableIfNotExist(TableName);
            return cloudTableClient;
        }
    }

    public TableServiceContext ServiceContext
    {
        get
        {
            return _tableServiceContext ?? (_tableServiceContext = TableClient.GetDataServiceContext());
        }
    }

    public IEnumerable<TEntity> FindAll()
    {
        return ServiceContext.CreateQuery<TEntity>(TableName).ToList();
    }

} 
```

希望这对您有所帮助。

# jboss - 不能满足任何备选政策 例外

> ID：11115756
> 
> 赞同：1
> 
> 时间：2012-06-20T08:38:06.580
> 
> 标签：jboss, cxf, webservice-client, ws-security, policy

我已经尝试了之前的消息/论坛中提到的许多选项。它们似乎都不起作用。

请在这方面帮助我。请注意，我只需要编写一个客户端，因为该服务已经由不同的供应商托管：

问题：

我在 JAVA 1.5 和 Apache CXF 2.6 上使用 jboss-4.2.3GA。（使用 ANT 作为构建工具）

我有一个需要 WssUsername Token.(PasswordText) 机制的 Web 服务。

a)我已经确定 cxf-rt-core-2.2.7.jar,cxf-ws-addr-2.2.7.jar,cxf-rt-ws-policy-2.2.7.jar,cxf-rt-ws- security-2.2.7.jar 都在类路径中。

b) 还导入了以下 XML：

```
<import resource="classpath:META-INF/cxf/cxf.xml"/>
  <import resource="classpath:META-INF/cxf/cxf-extension-ws-security.xml" />
   <import resource="classpath:META-INF/cxf/cxf-extension-policy.xml" />  
   <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
   <import resource="classpath:META-INF/cxf/cxf-extension-addr.xml" /> 
```

c) 将我的策略配置如下：

```
<cxf:bus>
      <cxf:features>
      <p:policies/>
         <cxf:logging/>
      </cxf:features>
      <cxf:inInterceptors>
            <ref bean="logInbound"/>
        </cxf:inInterceptors>
        <cxf:outInterceptors>
            <ref bean="logOutbound"/>
        </cxf:outInterceptors>
        <cxf:outFaultInterceptors>
            <ref bean="logOutbound"/>
        </cxf:outFaultInterceptors>
        <cxf:inFaultInterceptors>
            <ref bean="logInbound"/>
        </cxf:inFaultInterceptors>  
   </cxf:bus>

  <bean id="logInbound" class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
    <bean id="logOutbound" class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>

   <jaxws:client name="{namespace of the WSDL}<name attribute of the desired wsdl:port elementname   createdFromAPI="true"> 
        <jaxws:properties>
        <entry key="ws-security.username" value="myusername"/>
        <entry key="ws-security.password" value="mypassword"/>        
        </jaxws:properties>
  </jaxws:client> 
```

我的堆栈跟踪：

```
org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94) 
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) 
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122) 
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) 
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) 
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:115) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) 
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182) 
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) 
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) 
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
        at com.redhat.jboss.support.ConfigureSessionCookieValve.invoke(ConfigureSessionCookieValve.java:20) 
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) 
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 
        at java.lang.Thread.run(Thread.java:595) 
Caused by: javax.xml.ws.soap.SOAPFaultException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156) 
        at $Proxy190.mymethod(Unknown Source) 
        at com.rest.test.MyClass.MyMethod(MyClass.java:123) 
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
        at java.lang.reflect.Method.invoke(Method.java:585) 
        at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) 
        ... 33 more 
Caused by: org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.chooseAlternative(EndpointPolicyImpl.java:165) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.finalizeConfig(EndpointPolicyImpl.java:145) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.initialize(EndpointPolicyImpl.java:141) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.createEndpointPolicyInfo(PolicyEngineImpl.java:549) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getEndpointPolicy(PolicyEngineImpl.java:295) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getClientEndpointPolicy(PolicyEngineImpl.java:278) 
        at org.apache.cxf.ws.policy.PolicyDataEngineImpl.getClientEndpointPolicy(PolicyDataEngineImpl.java:61) 
        at org.apache.cxf.transport.http.HTTPConduit.updateClientPolicy(HTTPConduit.java:318) 
        at org.apache.cxf.transport.http.HTTPConduit.<init>(HTTPConduit.java:303) 
        at org.apache.cxf.transport.http.HTTPTransportFactory.getConduit(HTTPTransportFactory.java:250) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:228) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:235) 
        at org.apache.cxf.endpoint.AbstractConduitSelector.getSelectedConduit(AbstractConduitSelector.java:103) 
        at org.apache.cxf.endpoint.UpfrontConduitSelector.prepare(UpfrontConduitSelector.java:63) 
        at org.apache.cxf.endpoint.ClientImpl.prepareConduitSelector(ClientImpl.java:846) 
        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:527) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320) 
        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89) 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134) 
        ... 41 more 
12:14:01,513 ERROR [STDERR] Jun 20, 2012 12:14:01 PM org.apache.cxf.phase.PhaseInterceptorChain unwind 
WARNING: Exception in handleFault on interceptor org.apache.cxf.binding.xml.interceptor.XMLFaultOutInterceptor@cfdc01 
org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94) 
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) 
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122) 
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) 
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) 
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:115) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) 
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182) 
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) 
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) 
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
        at com.redhat.jboss.support.ConfigureSessionCookieValve.invoke(ConfigureSessionCookieValve.java:20) 
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) 
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 
        at java.lang.Thread.run(Thread.java:595) 
Caused by: javax.xml.ws.soap.SOAPFaultException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156) 
        at $Proxy190.MyMethod(Unknown Source) 
        at com.rest.test.MyCass.MyMethod(MyClass.java:123) 
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
        at java.lang.reflect.Method.invoke(Method.java:585) 
        at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) 
        ... 33 more 
Caused by: org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.chooseAlternative(EndpointPolicyImpl.java:165) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.finalizeConfig(EndpointPolicyImpl.java:145) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.initialize(EndpointPolicyImpl.java:141) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.createEndpointPolicyInfo(PolicyEngineImpl.java:549) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getEndpointPolicy(PolicyEngineImpl.java:295) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getClientEndpointPolicy(PolicyEngineImpl.java:278) 
        at org.apache.cxf.ws.policy.PolicyDataEngineImpl.getClientEndpointPolicy(PolicyDataEngineImpl.java:61) 
        at org.apache.cxf.transport.http.HTTPConduit.updateClientPolicy(HTTPConduit.java:318) 
        at org.apache.cxf.transport.http.HTTPConduit.<init>(HTTPConduit.java:303) 
        at org.apache.cxf.transport.http.HTTPTransportFactory.getConduit(HTTPTransportFactory.java:250) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:228) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:235) 
        at org.apache.cxf.endpoint.AbstractConduitSelector.getSelectedConduit(AbstractConduitSelector.java:103) 
        at org.apache.cxf.endpoint.UpfrontConduitSelector.prepare(UpfrontConduitSelector.java:63) 
        at org.apache.cxf.endpoint.ClientImpl.prepareConduitSelector(ClientImpl.java:846) 
        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:527) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320) 
        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89) 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134) 
        ... 41 more 
12:14:01,786 ERROR [STDERR] Jun 20, 2012 12:14:01 PM org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver onMessage 
SEVERE: Error occurred during error handling, give up! 
org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94) 
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) 
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122) 
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) 
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) 
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:115) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) 
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182) 
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) 
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) 
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
        at com.redhat.jboss.support.ConfigureSessionCookieValve.invoke(ConfigureSessionCookieValve.java:20) 
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) 
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 
        at java.lang.Thread.run(Thread.java:595) 
Caused by: javax.xml.ws.soap.SOAPFaultException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156) 
        at $Proxy190.MyMethod(Unknown Source) 
        at com.rest.test.MyClass.MyMethod(MyClass.java:123) 
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
        at java.lang.reflect.Method.invoke(Method.java:585) 
        at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) 
        ... 33 more 
Caused by: org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.chooseAlternative(EndpointPolicyImpl.java:165) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.finalizeConfig(EndpointPolicyImpl.java:145) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.initialize(EndpointPolicyImpl.java:141) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.createEndpointPolicyInfo(PolicyEngineImpl.java:549) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getEndpointPolicy(PolicyEngineImpl.java:295) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getClientEndpointPolicy(PolicyEngineImpl.java:278) 
        at org.apache.cxf.ws.policy.PolicyDataEngineImpl.getClientEndpointPolicy(PolicyDataEngineImpl.java:61) 
        at org.apache.cxf.transport.http.HTTPConduit.updateClientPolicy(HTTPConduit.java:318) 
        at org.apache.cxf.transport.http.HTTPConduit.<init>(HTTPConduit.java:303) 
        at org.apache.cxf.transport.http.HTTPTransportFactory.getConduit(HTTPTransportFactory.java:250) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:228) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:235) 
        at org.apache.cxf.endpoint.AbstractConduitSelector.getSelectedConduit(AbstractConduitSelector.java:103) 
        at org.apache.cxf.endpoint.UpfrontConduitSelector.prepare(UpfrontConduitSelector.java:63) 
        at org.apache.cxf.endpoint.ClientImpl.prepareConduitSelector(ClientImpl.java:846) 
        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:527) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320) 
        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89) 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134) 
        ... 41 more 
12:14:01,935 ERROR [[CXFServlet]] Servlet.service() for servlet CXFServlet threw exception 
java.lang.RuntimeException: org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:116) 
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:322) 
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122) 
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) 
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) 
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:115) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) 
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182) 
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) 
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) 
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
        at com.redhat.jboss.support.ConfigureSessionCookieValve.invoke(ConfigureSessionCookieValve.java:20) 
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) 
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 
        at java.lang.Thread.run(Thread.java:595) 
Caused by: org.apache.cxf.interceptor.Fault: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167) 
        at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) 
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94) 
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) 
        ... 28 more 
Caused by: javax.xml.ws.soap.SOAPFaultException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156) 
        at $Proxy190.MyMethod(Unknown Source) 
        at com.rest.test.MyClass.MyMethod(FirstCXF.java:123) 
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
        at java.lang.reflect.Method.invoke(Method.java:585) 
        at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) 
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) 
        ... 33 more 
Caused by: org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied. 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.chooseAlternative(EndpointPolicyImpl.java:165) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.finalizeConfig(EndpointPolicyImpl.java:145) 
        at org.apache.cxf.ws.policy.EndpointPolicyImpl.initialize(EndpointPolicyImpl.java:141) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.createEndpointPolicyInfo(PolicyEngineImpl.java:549) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getEndpointPolicy(PolicyEngineImpl.java:295) 
        at org.apache.cxf.ws.policy.PolicyEngineImpl.getClientEndpointPolicy(PolicyEngineImpl.java:278) 
        at org.apache.cxf.ws.policy.PolicyDataEngineImpl.getClientEndpointPolicy(PolicyDataEngineImpl.java:61) 
        at org.apache.cxf.transport.http.HTTPConduit.updateClientPolicy(HTTPConduit.java:318) 
        at org.apache.cxf.transport.http.HTTPConduit.<init>(HTTPConduit.java:303) 
        at org.apache.cxf.transport.http.HTTPTransportFactory.getConduit(HTTPTransportFactory.java:250) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:228) 
        at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:235) 
        at org.apache.cxf.endpoint.AbstractConduitSelector.getSelectedConduit(AbstractConduitSelector.java:103) 
        at org.apache.cxf.endpoint.UpfrontConduitSelector.prepare(UpfrontConduitSelector.java:63) 
        at org.apache.cxf.endpoint.ClientImpl.prepareConduitSelector(ClientImpl.java:846) 
        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:527) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367) 
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320) 
        at org.apache.cx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:40:27.587

我发现问题出在 jaxws:client 中的名称空间和端口详细信息错误。

我也使用了 WSS4JOutInterceptor 而不是 ws-security 标记。

# android - 如何在 Android 应用程序中使用 edsdk.lib 文件？

> ID：11115757
> 
> 赞同：0
> 
> 时间：2012-06-20T08:38:06.357
> 
> 标签：android, android-ndk, canon-sdk

我正在制作一个应用程序，我需要使用 edsdk.lib 文件通过 Android NDK 实现佳能 sdk 集成。我已经放置了 EDSDk.lib 文件 jni 文件夹，我通过 Android-ndk 编译了应用程序。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := sample
LOCAL_SRC_FILES := sample.c

include $(BUILD_STATIC_LIBRARY)
/*LOCAL_LDLIBS := EDSDK.lib*/
LOCAL_STATIC_LIBRARIES := EDSDK.lib
include $(BUILD_SHARED_LIBRARY) 
```

它给了我以下o/p

```
Compile thumb : sample <= sample.c
SharedLibrary  : libsample.so
Install        : libsample.so => libs/armeabi/libsample.so 
```

我如何通过 Android ndk 编译 EDSDk.lib 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:03:39.563

你试图做的事情是不可能的。
您无法编译 lib 文件。
佳能尚未发布其 SDK 的 Android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:42:51.973

NDK 库的扩展名为 .a，而不是 .lib。“lib”扩展来自 Microsoft Visual C++ 库。如果该 EDSDK.lib 文件未针对 Android NDK 编译，则您将无法链接它。您必须有专门为 Android 编译的源代码才能与 NDK 一起使用。

# javascript - 点击时显示隐藏 youtube 视频

> ID：11115759
> 
> 赞同：2
> 
> 时间：2012-06-20T08:38:21.747
> 
> 标签：javascript, jquery, css, xhtml

**Q1)**在页面加载时是否可以使用 Jquery 检查图像的文件名，然后设置 css 以将其定位在页面上？

**Q2）**管理这个最简单的方法是什么，用户不会在 div.icon 中嵌入 iframe 代码

我有一个播放按钮图标，它将出现在电子商务网站的产品描述中。当用户点击播放时，它将在产品图像 div 框内显示 youtube 视频。该图标将位于图像导航图标旁边，因此用户可以选择在浏览图片时查看视频。

我的代码似乎很好用：

**HTML：**

```
<div class="container">
    <div class="product-image"><img src=
    "http://www.skriftlig.com/konfliktmegling/wp-content/uploads/2010/02/Photoxpress_2658886-480x220.jpg"
    alt=
    "http://www.skriftlig.com/konfliktmegling/wp-content/uploads/2010/02/Photoxpress_2658886-480x220.jpg" /></div>

    <div class="image-nav"></div>

    <div class="icon">
      <iframe width="480" height="220" src=
      "http://www.youtube-nocookie.com/embed/jvTv_oatLA0?rel=0" frameborder="0"
      allowfullscreen=""></iframe>
    </div>
  </div> 
```

**CSS：**

```
div.container
{
    margin:10px 10px auto;
    border:1px solid orange;
}

div.product-image
{
    height:220px;
    width:480px;
    border:1px solid red;
    margin:30px;      
}

div.image-nav
{
    border:1px solid black;
    width:500px;
    height:100px;
    margin:30px;
}

div.icon
{
    background-image: url("http://i46.tinypic.com/zmmbo8.png");
    background-repeat: no-repeat;
    height: 50px;
    left: 540px;
    position: relative;
    top: -104px;
    width: 50px;
    cursor:pointer;
}

div.icon iframe
{
    display:none;
    position:relative;
    top:30px;
}

div.product-image iframe
{
    position: absolute;
    top: 42px;
    left:42px;
} 
```

**JQ:**

```
var $video=$('div.icon iframe');
var $productImage=$('.product-image');
var $icon=$('.icon');
$icon.on('click',function()
{
    $('.product-image').append($video);
}); 
```

**jsfiddle：http:** [//jsfiddle.net/t7qMF/2/](http://jsfiddle.net/t7qMF/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:19:13.143

对于 Q1 Ishan 是正确的，您可以使用：

```
$('img[src="images/test.png"]').css("position","absolute"); 
```

对于 Q2：youtube 嵌入代码如下所示：

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0"> 
```

You can try using the iframe class to select it:

```
var $video=$('iframe.youtube-player');
var $productImage=$('.product-image');
var $icon=$('.icon');
$icon.on('click',function()
{
    $('.product-image').append($video);
}); 
```

Then on the onload event you have to add some jquery thats gonne wrap every youtube iframe with your icon div. I'm not sure but this could be something like:

```
$(function() {
     $('iframe.youtube-player').each(function(){
         var $iconDiv = $(this).parent().append('<div class="icon"></div>');
         $(this).prependTo($iconDiv);
     });
}); 
```

Hope this help's

# python - 测试在循环内不会改变的条件

> ID：11115765
> 
> 赞同：6
> 
> 时间：2012-06-20T08:38:47.437
> 
> 标签：python, optimization, loops

有时我必须检查一些在循环内不会改变的条件，这意味着在每次迭代中都会评估测试，但我认为这不是正确的方法。

我想既然条件在循环内没有改变，我应该只在循环外测试一次，但是我将不得不“重复自己”并且可能不止一次地编写同一个循环。这是显示我的意思的代码：

```
#!/usr/bin/python

x = True      #this won't be modified  inside the loop
n = 10000000

def inside():
    for a in xrange(n):
        if x:    #test is evaluated n times
            pass
        else:
            pass

def outside():
    if x:        #test is evaluated only once
        for a in xrange(n):  
            pass
    else:
        for a in xrange(n):
            pass

if __name__ == '__main__':
    outside()
    inside() 
```

在前面的代码上运行`cProfile`会得到以下输出：

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.542    0.542    0.542    0.542 testloop.py:5(inside)
        1    0.261    0.261    0.261    0.261 testloop.py:12(outside)
        1    0.000    0.000    0.803    0.803 testloop.py:3(<module>) 
```

这表明，显然，在循环外测试一次可以提供更好的性能，但是我必须编写两次相同的循环（如果有一些`elif`s 可能会更多）。

我知道在大多数情况下这种性能并不重要，但我需要知道编写这种代码的最佳方式是什么。例如，有没有办法告诉 python 只评估一次测试？

任何帮助表示赞赏，谢谢。

### 编辑：

实际上，在进行了一些测试之后，我现在确信性能差异主要受循环中执行的其他代码的影响，而不是受测试评估的影响。所以现在我坚持使用第一种形式，它更易读，更适合以后调试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:49:46.033

首先，您的示例之间的性能差异的一个主要组成部分是查找全局所需的时间。如果我们将其捕获到局部变量中：

```
def inside_local():
    local_x = x
    for a in xrange(n):
        if local_x:
            pass
        else:
            pass

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.258    0.258    0.258    0.258 testloop.py:13(outside)
    1    0.314    0.314    0.314    0.314 testloop.py:21(inside_local)
    1    0.421    0.421    0.421    0.421 testloop.py:6(inside) 
```

大多数性能差异消失了。

一般来说，只要你有公共代码，你应该尝试封装它。如果除了循环之外，它们的分支`if`没有任何共同之处，那么尝试将循环迭代器封装到一个生成器中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T09:05:49.687

这就是我通常在这种情况下所做的。

```
def inside():
    def x_true(a):
        pass

    def x_false(a):
        pass

    if x:
        fn = x_true
    else:
        fn = x_false

    for a in xrange(n):
        fn(a) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T09:36:08.380

python 有诸如闭包、lambda 函数之类的东西，为函数和许多许多内置函数提供一流的状态，它们确实可以帮助我们删除重复的代码，例如，假设您需要将函数应用于一系列值，您可以做到这边走

```
def outside():              
    if x:        # x is a flag or it could the function itself, or ...
        fun = sum # calc the sum, using pythons, sum function
    else:
        fun = lambda values: sum(values)/float(len(values)) # calc avg using our own function

    result = fun(xrange(101)) 
```

如果您给我们一个确切的场景，我们可以帮助您优化它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T08:49:37.380

我知道没有解释性语言在该方向上提供支持，编译语言可能只进行一次比较（循环不变优化），但如果 x 的评估很简单，这将无济于事。显然，代替 pass 语句的代码不能完全相同，因为“if”将没有用处。通常，人们会编写一个在两个地方都调用的过程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T09:54:39.173

```
def outside():
    def true_fn(a):
        pass
    def false_fn(a):
        pass

    fn = true_fn if x else false_fn
    for a in xrange(n):
        fn(a) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T08:41:25.020

在您的情况下，这取决于您想要什么：可读性或性能。

如果您正在执行的任务是某种过滤器，您也可以使用 a`list_comprehension`来运行循环：

```
[e for e in xrange(n) if x] 
```

如果您显示更多代码，我可以提出一些建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T18:44:46.260

根据您最初的问题，您想在不花费大量系统资源的情况下测试 x 的值，您已经接受了一个涉及将全局 x 的值复制到局部变量的答案。

现在，如果返回 x 的值涉及多步函数，但您可以保证 x 的结果始终相同，那么我会考虑记忆该函数。这是关于该主题的非常好的stackoverflow[链接](https://stackoverflow.com/questions/1988804/what-is-memoization-and-how-can-i-use-it-in-python)

# ms-word - AppleScript：如何删除 Microsoft Word for Mac 中的所有英文段落？

> ID：11115767
> 
> 赞同：0
> 
> 时间：2012-06-20T08:38:52.677
> 
> 标签：ms-word, applescript

我有这样的文件：

```
English English English English

中文中文中文中文中文

English English English English

中文中文中文中文 
```

英文段落和中文段落依次显示。

那么，有没有办法让我**删除**所有英文段落？

我知道`grep`并且我知道如何使用`regex`以及诸如`awk` `sed`.. 但我想在 Microsoft Word 中进行操作，所以：

如何通过 AppleScript 解决这个问题？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:36:15.693

这不是很漂亮，但它应该可以完成工作。

```
property english : "abcdefghijklmnopqrstuvwxyz"
set deleteMe to {}

tell application "Microsoft Word"
    tell active document
        set pCount to count of paragraphs
        repeat with i from 1 to pCount
            set cCount to count of characters in characters of paragraph i
            repeat with j from 1 to cCount
                tell paragraph i
                    if content of character j is in english then
                        set end of deleteMe to i
                        exit repeat
                    end if
                end tell
            end repeat
        end repeat

        set dCount to -(count of deleteMe)
        repeat with k from -1 to dCount by -1
            set content of text object of paragraph (item k of deleteMe) to "" -- delete paragraph
        end repeat
    end tell
end tell 
```

# windows - 文件夹名称翻译在国际 Windows 7 版本中如何工作？

> ID：11115770
> 
> 赞同：5
> 
> 时间：2012-06-20T08:38:58.137
> 
> 标签：windows, windows-7, internationalization, language-translation

我正在运行意大利语版本的 Windows 7。当我从目录 运行并执行操作时，某些文件夹（例如`C:\Users`）会出现。但是，当我使用 Windows 资源管理器时，此*Users* 文件夹显示为*Utenti*。此外，当安装脚本安装到 C:\Users 并且我转到 Windows 资源管理器时，我可以单击 并仍然查看这些内容。`C:\Users``cmd``ls``C:`**`C:\Utenti`**

 **谁能解释一下这个翻译是在哪里配置的以及它是如何在更深层次上工作的，因为系统上的大多数文件夹都会发生这种情况，而这些文件夹在意大利语版的 Window 7 中似乎最终有两个名称？

感谢您提供有关此类机制特性的任何指示或更深入的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:45:16.347

本地化文件夹实际上是指向其英文对应部分的[符号链接。](http://en.wikipedia.org/wiki/Symbolic_link)原来的英文文件夹是隐藏的系统文件。这样，用户只能以他们的语言看到文件夹，但仍然可以使用他们的英文名称访问它们。这是 Windows Vista/7 的一大优点，因为之前如果脚本访问`C:\Program Files`它在非英语版本的 Windows 下是不可用的。

如果你去`tools -> folder options -> show system files`（或类似的东西，我不知道），你可以显示隐藏的原始英文文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-28T13:53:09.133

正如 Felix Dombek 在他的[评论](https://stackoverflow.com/questions/11115770/how-does-folder-name-translation-work-in-international-windows-7-versions#comment72956410_11115868)中提到的，这是由于[desktop.ini](https://docs.microsoft.com/en-us/windows/win32/shell/how-to-customize-folders-with-desktop-ini)，它可以在您的用户文件夹（以及其他文件夹）中找到。

文件资源管理器和 Shell 使用此文件来自定义文件夹的外观。[LocalizedResourceName](https://docs.microsoft.com/en-us/previous-versions/windows/embedded/ms906608(v=msdn.10)?redirectedfrom=MSDN)条目负责显示的文件夹名称，用于确定正确的 DLL 和 stringID，应从中加载文件夹名称。**

# c# - 无法在 TextChanged 中使用撤消

> ID：11115777
> 
> 赞同：10
> 
> 时间：2012-06-20T08:39:37.220
> 
> 标签：c#, wpf, undo

当使用 textbox.Undo(); 我收到以下错误：

> 撤消单元打开时无法撤消或重做。

现在我明白为什么会出现这种情况（因为它是一个活动的可撤销事件），但是如果用户输入了无效字符，我可以通过什么事件对文本框执行验证并撤消更改？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-22T18:02:59.603

回答 simbay 的方法，我认为它被驳回了。

您不能在 TextChanged 中调用 Undo，因为 TextBox 仍在准备撤消操作。它似乎有时有效，有时无效，因此这表明在发出事件信号和完成撤消准备之间存在竞争条件。

然而，在 Dispatcher 上调用 Undo 将允许文本框完成其撤消准备。您可以验证文本更改的结果，然后决定是否要保留或撤消更改。这可能不是最好的方法，但我尝试了它并将一堆文本更改和粘贴到文本框中，并且无法重现异常。

仅当您想防止输入或粘贴无效字符时，“接受的答案”才很棒，但总的来说，我经常对 TextBox 输入进行更多涉及的验证并希望验证最终文本值。从预览事件中辨别最终文本并不容易，因为就控件而言，还没有发生任何事情。

要回答 Terribad 的问题，simbay 的回答在更多情况下更好更简洁。

```
tb.TextChanged += ( sender, args ) =>
{
    if(! MeetsMyExpectations( tb.Text ) )
        Dispatcher.BeginInvoke(new Action(() => tb.Undo()));
}; 
```

我已经阅读了很多关于文本框验证的狂野冒险，这和我发现的一样简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T10:03:18.317

您应该使用`PreviewTextInput`and`DataObject.Pasting`事件，而不是使用 Undo 和 TextChanged。在`PreviewTextInput`事件处理程序中，`e.Handled`如果键入的文本是无效字符，则设置为 true。在`Pasting`事件处理程序中，`e.CancelCommand()`如果粘贴的文本无效，则调用。

以下是仅接受数字 0 和 1 的文本框的示例：

XAML：

```
<Window x:Class="BinaryTextBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="133" Width="329">
    <StackPanel>
        <TextBox x:Name="txtBinary" Width="100" Height="24"
                 PreviewTextInput="txtBinary_PreviewTextInput"
                 DataObject.Pasting="txtBinary_Pasting"/>
    </StackPanel>
</Window> 
```

后面的代码：

```
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Input;

namespace BinaryTextBox
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void txtBinary_PreviewTextInput(object sender,
                 TextCompositionEventArgs e)
        {
            e.Handled = e.Text != "0" && e.Text != "1";
        }

        private void txtBinary_Pasting(object sender, DataObjectPastingEventArgs e)
        {
            if (!Regex.IsMatch(e.DataObject.GetData(typeof(string)).ToString(), "^[01]+$"))
            {
                e.CancelCommand();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-19T12:14:48.383

从来自 TextChanged 事件处理程序中异步调用撤消：

```
Dispatcher.BeginInvoke(new Action(() => tb.Undo())) 
```

# html - 推特引导下拉菜单不起作用

> ID：11115781
> 
> 赞同：1
> 
> 时间：2012-06-20T08:39:42.710
> 
> 标签：html, css, twitter-bootstrap

我有一个正在处理的项目，由于某种原因，我无法让下拉菜单在我的菜单上工作。我已经包含了正确的文件，这让我相信这是我的代码中的一个问题。

这是我的页面：[https](https://git.jobud9.com/) ://git.jobud9.com/ （尝试菜单右侧的下拉菜单。也不要介意浏览器发出的提示，因为我的证书批准仍在等待中。）

这是驱动它的代码：

```
<li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        Account
        <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
        <li>hi</li>
    </ul>
</li> 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:49:54.407

您的 html 代码是正确的。也许你忘了附上脚本？看看这个[下拉js](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

# c++ - QT keyPressedEvent 太慢？

> ID：11115783
> 
> 赞同：1
> 
> 时间：2012-06-20T08:40:01.930
> 
> 标签：c++, performance, qt, qgraphicsscene

我正在用 qt creator 开发一个射击游戏，我的问题是与`keyPressEvent`我的场景功能的链接：

```
void Scene::keyPressEvent(QKeyEvent *event){
    liste_event << event->key();

    if (liste_event.contains(Qt::Key_Left)) {
        vaisseau->MoveX(-1);
    }

    if (liste_event.contains(Qt::Key_Right)) {
        vaisseau->MoveX(1);
    }
} 
```

它可以编译，但我的精灵（vasisseau）移动得很慢。如何改进代码以使其运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:45:16.510

Well, **the problem is that you are leaving the animation of the game to the `keyPressEvent`**, which is not triggered as often as you would like.

To solve this problem I suggest you use the traditional approach, which involves having an function to `draw()` the scene (and it's objects). The idea is that this function is called every X miliseconds, and the drawing will work independently of a key being pressed or not.

So in this case, inside `keyPressEvent` you would just store the key that was pressed, and in `Scene::draw()` you will implement the logic that will call `MoveX()` with the appropriate parameter, based on the stored key.

# sql - find_by_sql 呈现一个数组

> ID：11115785
> 
> 赞同：3
> 
> 时间：2012-06-20T08:40:04.643
> 
> 标签：sql, ruby-on-rails, activerecord, count

我在这里遇到了一些问题，我无法发出 find_by_sql 请求来呈现 ActiveRecord 关系。事实上，我需要一个 activerecord 关系来提出一个新的请求：

```
@searches = @searches.find_by_sql('SELECT *, COUNT( follower_id ) FROM follows GROUP BY followable_id LIMIT 0 , 3') if params[:only_famous_projects]
@project_pages = @project_pages.where(:project_id => @searches.pluck(:'followable.id')) if params[:only_famous_projects] 
```

如果没有 activerecord 关系，我就不能使用“pluck”。因此，我想我必须将我的 sql 请求转换为 Activerecord 请求。但是，一旦我在 ActiveRecord 上使用“count”，我就有一个大问题：我最后没有 ActiveRecord 关系，而是 FixNum！

我不知道在哪里可以找到答案，如果您能帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:03:37.213

`find_by_sql`仅当您使用 调用它时才会返回一个 ActiveRecord 对象`YourModel.find_by_sql`。

为什么不使用 ActiveRecord 查询接口。它在计算方面做得很好。

**更新**

```
@searches = @searches.group(:followable_id).limit(3).offset(0).count(:follower_id) if params[:only_famous_projects] 
```

请注意，它将为您提供一个包含每个 Hash 的计数`followable_id`。

不`LIMIT 0, 3`等于`LIMIT 3`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:09:08.300

`COUNT`将始终返回一个 FixNUM，因为您要求数据库计算行数。

您真的应该尝试将`find_by_sql`其用作最后的手段，因为它只是为了绕过 ActiveRecord 无法完成的事情。即使对于 ActiveRecord 不支持的东西，您也可以随时查看是否可以使用[Squeel](https://github.com/ernie/squeel)或[Valium](https://github.com/ernie/valium) gem 来处理边缘情况。

不使用的另一个原因`find_by_sql`是，例如，使用 MySQL 的特定术语会阻止您将来使用其他数据库。

# visual-studio-2010 - 安装 VS2010 Web 发布更新后无法加载 WiX 项目

> ID：11115787
> 
> 赞同：1
> 
> 时间：2012-06-20T08:40:11.073
> 
> 标签：visual-studio-2010, msbuild, wix, publishing

我昨天安装了 VS2010 网络发布更新，现在每当我尝试加载 WiX 设置项目（在解决方案资源管理器中都显示为已卸载）时，我都会收到错误消息：

未找到导入的项目“PROJECTNAME.wpp.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。C:\Program Files\MSBuild\Microsoft\VisualStudio\v10.5\Web\Microsoft.Web.Publishing.targets

其中 PROJECTNAME 是我的设置 wixproj 文件的路径，没有 .wixproj 扩展名。我已经检查了项目文件，并且在任何地方都没有对 wpp.targets 文件的引用。我决定尝试在该位置创建一个空白目标文件，因此添加了一个包含以下内容的文件：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
</Project> 
```

但是得到了完全相同的错误 - 尽管文件在那里，但未找到异常！

然后我深入研究了 Microsoft.Web.Publishing.targets 文件并查看了任何“.wpp.targets”文本，这给了我这个：

```
<PropertyGroup Condition="'$(EnableWebPublishProfileFile)'=='true' And 
    '$(WebPublishProfileFile)' != '' And Exists($(WebPublishProfileFile)) ">
  <WebPublishProfileCustomizeTargetFile Condition="'$(WebPublishProfileCustomizeTargetFile)'==''">
    $([System.IO.Path]::ChangeExtension($(WebPublishProfileFile), '.wpp.targets'))
  </WebPublishProfileCustomizeTargetFile>
  ... 
```

因此，这看起来是在设置 PROJECTNAME.wpp.targets 的文件名，但前提是 EnableWebPublishProfileFile 属性设置为 true。我将此添加到我的 wixproj 文件的主要属性组中：

```
<EnableWebPublishProfileFile>False</EnableWebPublishProfileFile> 
```

但同样，它对错误没有任何影响。我现在没有想法了！

**进一步更新**

我一直试图在一个空白项目上回购这个（到目前为止没有成功），并且混乱已经将错误缩小到 Microsoft.Web.Publishing.targets 文件中的这一行（186）：

```
<Import Project="$(WebPublishPipelineCustomizeTargetFile)" 
Condition="'$(WebPublishPipelineCustomizeTargetFile)' != ''"/> 
```

这是在文件顶部设置的：

```
<WebPublishPipelineCustomizeTargetFile
    Condition="'$(WebPublishPipelineCustomizeTargetFile)'==''">
  $(WebPublishPipelineProjectDirectory)\*.wpp.targets
</WebPublishPipelineCustomizeTargetFile> 
```

我不确定这是如何更改为 PROJECTNAME.wpp.targets 的？

我尝试在我的项目文件中覆盖它，但再一次，它根本没有区别。

接下来，我在目标文件的行中添加了一个 Exists() 条件，现在一些项目正在运行，而另一些则没有，而是失败（在构建时）并出现错误：

*“ImportParametersFile”任务不支持“DisableEscapeMSBuildVariable”参数。验证该参数是否存在于任务中，并且它是一个可设置的公共实例属性。*

我的旅程还在继续……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T08:44:53.753

我在尝试打开标准 Web 项目时遇到了同样的问题。

proj 文件引用了 v10.0 目标的以下导入，但在提到 v10.5 目标的问题中引发了导入错误。

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets" /> 
```

当我引用硬编码路径时也是如此 - 我仍然收到 v10.5 错误

我的解决方案是简单地备份并删除位于以下位置的那个版本：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\10.5 
```

我真的不确定哪些其他程序和项目需要这个版本，或者为什么不遵循导入路径，但它让这个项目对我开放，似乎回到了正确的版本。

# c# - c# - DataContract 序列化 - 基类、继承和覆盖

> ID：11115788
> 
> 赞同：9
> 
> 时间：2012-06-20T08:40:13.257
> 
> 标签：c#, inheritance, serialization, overriding, datacontract

今天是个好日子，

我是一名独立游戏开发者，过去主要与 XNA 合作，而在另一个极端，我主要与商业工具集合作。然而，XNA 的范围非常有限，我正在构建一个跨平台抽象层来针对多个平台。

长话短说，我需要比 [Serializable] 更广泛地访问的 xml 序列化，并且有人指出我需要数据契约。我一直在做很多研究，但找不到任何关于系统基础知识的好信息，与继承和覆盖有关。

我的问题的关键是...

```
[DataContract]
public class Node
{
    private string name;

    public string Name { get { return name; } set { name = value; } }
    public virtual float Rotation { get { return 0f; } set { } }
}

[DataContract]
public class FancyNode : Node
{
    private float rotation;

    public override float Rotation { get { return rotation; } set { rotation = value; } }
} 
```

如果我序列化一个'FancyNode'，'Rotation'会被正确序列化，'Name'会被序列化吗？

**追问：** 本来想早点问的，当时想不起来。序列化程序处理程序如何覆盖 [IgnoreDataMember] 属性？例如...

```
[DataContract]
public class Simple
{
    [IgnoreDataMember]
    public virtual string Value { get { return ""; } set { } }
}

[DataContract]
public class Complex : Simple
{
    private string value;

    public override string Value { get { return value; } set { this.value = value; } }
} 
```

“复杂”中的“价值”会被序列化吗？一些答案表明，如果不使用 [DataMember] 标记，则所有属性都将被序列化。如果是这样，基类的 [IgnoreDataMember] 属性是否有任何影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T08:47:31.773

据我所知，DataContract 是一种“选择加入”的序列化方法，即除非你装饰它（告诉序列化程序你想序列化它），否则它不会序列化

因此，对于上面的示例，您需要将 [DataMember] 添加到要序列化的属性中

使用标准的 Serializable 属性，序列化程序会查看所有字段并仅忽略您标记为 NonSerialized 的字段

这里有一些例子：

[http://jamescbender.azurewebsites.net/?p=651](http://jamescbender.azurewebsites.net/?p=651)

查看注释部分以获取有关序列化内容的信息以及所发生情况的粗略概述：

[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

编辑：我也看不出任何曾经标记为 [DataMember] 的字段无法正确序列化的任何原因。序列化的 DataContract 方法还可以处理循环引用——其他序列化有时会遇到问题：

[http://msdn.microsoft.com/en-us/library/hh241056.aspx](http://msdn.microsoft.com/en-us/library/hh241056.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-05T05:16:29.020

一些答案中提出的一些想法不清楚。请让我把它们清理干净。首先，使用 DataContract 的序列化器可用于序列化未使用 DataContract 修饰的类型。您只需要通知 serailizer 即可。

例如，DataContractJsonSerializer 类会将一个类型序列化为一个 JSON 对象（通常是一个字符串）。您只需要告诉它您正在序列化的对象的类型，然后是它可能引用的任何其他类型：

```
var serializer = new System.Runtime.Serialization.Json.DataContractJsonSerializer(typeof(MyClass), new Type[] { Type1, Type2, Type3 }); 
```

序列化器将自动序列化该类型的每个公共字段和属性。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/ms733127](http://msdn.microsoft.com/en-us/ms733127)

## DataContractAttribute 标记类型

使用 标记类型后`DataContractAttribute`，您将该类型转换为自动已知的类型（您不需要将其作为子类型提供），然后将其转换为属性，并将字段转换为选择加入模式。

因此，您必须使用`DataMemberAttribute`. 这意味着`IgnoreDataMemberAttribute`是无用的。是的，序列化程序不会查找它，因为任何未标记的`DataMemberAttribute`内容都会被自动忽略。

## 未标记的 DataContractAttribute 类型

在序列化未应用 DataContractAttribute 的类型时，如前所述，每个公共属性或字段都将被序列化。因此，`IgnoreDataMemberAttribute`这里使用 来防止属性或字段被序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:46:53.333

您应该`[DataMember]`在应由合同公开的属性中包含该属性。

```
[DataContract]
public class FancyNode : Node
{
    private float rotation;

    [DataMember]
    public override float Rotation { get { return rotation; } set { rotation = value; } }
} 
```

请注意，Windows Communication Foundation (WCF) 使用 Data Contract Serializer 来序列化和反序列化数据（将其转换为 XML 或从 XML 转换）。所以实际上你仍在使用 Xml 序列化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:07:38.190

不，由于选择加入方法，它不会序列化，您必须将 DataMember 显式应用于您的基类。如果您在子类中继承，数据序列化不会自动工作

# c# - NuGet 以代码 -1 退出 - 结果构建失败

> ID：11115790
> 
> 赞同：24
> 
> 时间：2012-06-20T08:40:20.447
> 
> 标签：c#, asp.net-mvc-2, build, nuget, dotless

我已经通过 VS2012 中的包管理器将 dotless 安装到现有的混合 C# 解决方案（类库和 MVC2 应用程序）中，但是现在当我构建它时（F5）我收到以下两个错误：

> 命令 ""C:\@GitRepos\EBS\SolutionFiles\.nuget\nuget.exe" 安装 "C:\@GitRepos\EBS\\packages.config" -source "" -o "C:\@GitRepos\EBS \SolutionFiles\packages"" 以代码 -1 退出。

和

> 该系统找不到指定的路径。

将 dotless 添加到解决方案后，添加了带有“NuGet.exe”和“NuGet.targets”的“.nuget”文件夹。

我还尝试将 dotless 添加到新的 MVC2 项目中，除了必须向 web.config 添加 mime 类型之外，它都运行良好。但是没有“.nuget”文件夹。

我还注意到，如果我创建一个新的 NServiceBus 解决方案（安装后），也会发生同样的情况。消息中的路径发生了变化，但错误是相同的。

如果我拿

> "C:\@GitRepos\EBS\SolutionFiles\.nuget\nuget.exe" 安装 "C:\@GitRepos\EBS\\packages.config" -source "" -o "C:\@GitRepos\EBS\SolutionFiles\包”

并通过命令提示符运行它，然后我得到：

> packages.config 中列出的所有软件包都已安装。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-15T14:09:06.433

所以在放弃这个之后，几天后再次查看它，我找到了答案。我遇到了 david-martos.blogspot.co.uk。打开我的命令提示符并找到它后，我还说`"The system cannot find the path specified"`我去注册表中查找。我发现`"HKEY_CURRENT_USER\Software\Microsoft\Command Processor"`有一个 AutoRun 键用于`"c:\ansi140\x64\ansicon.exe -p "`. 删除它并再次尝试我的 NserviceBus 解决方案之一后，我发现它构建得很好。我希望这对其他人有帮助。

这是[David Martos 帖子](http://david-martos.blogspot.co.uk/2012/06/como-que-system-cannot-find-path.html)的直接链接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T03:29:44.657

这也可能是您必须设置的 nuget 包恢复同意。[http://blog.nuget.org/20120518/package-restore-and-consent.html](http://blog.nuget.org/20120518/package-restore-and-consent.html)

对于想要永久接受同意的任何人，请查看安装[http://nuget.org/packages/NuGetEnablePackageRestore](http://nuget.org/packages/NuGetEnablePackageRestore) - 它会自动在所有机器上被接受。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-31T12:57:25.503

我通过打开包管理器控制台并单击弹出警告上的“恢复”按钮解决了这个问题。这是它的外观。这与其他解决方案类似，但角度不同。

[![在此处输入图像描述](../Images/ab6d814cb0593b9eb02c8fd96d96332e.png)](https://i.stack.imgur.com/j3Gij.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-08T06:12:58.723

只需从 NuGet 包管理器控制台执行以下命令。它对我有用：

```
PM> Install-Package NuGetEnablePackageRestore 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-07T16:57:08.077

我有同样的错误：

> "命令 "" 以代码 -1 退出。" 和“系统找不到指定的路径。”

我测试了我找到的所有可能的解决方案，但没有任何效果，最后我所做的是从另一个项目中获取 NuGet.exe，并将其替换到 .nuget 文件夹内的项目中，该文件夹正在生成错误并且现在正在工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-17T17:59:56.277

对我来说，我不小心从项目目录的根目录中删除了 NuGet.Config 文件。幸运的是，我可以使用源代码控制来恢复它。

如果有人和我犯了同样的错误并且没有备份，这是我文件的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <config>
    <add key="repositorypath" value="NuGet Packages" />
    <add key="globalPackagesFolder" value="NuGet Packages" />
  </config>  
  <packageRestore>
    <add key="enabled" value="True" />
  </packageRestore>  
</configuration> 
```

# c - 错误 #92：标识符列表参数只能在函数定义中使用

> ID：11115795
> 
> 赞同：0
> 
> 时间：2012-06-20T08:40:37.223
> 
> 标签：c

我正在尝试编译一些代码，但遇到了一些我似乎无法弄清楚的问题。最初，我有三个错误，但我已将其缩小到一个似乎无法解决的错误。我现在正在使用三个文件：voltcon.c、mss_ace.c 和 mss_ace.h。我在下面粘贴了相关代码：

在 mss_ace.c 中

```
 void ACE_init( void )
    {
    /* Initialize driver's internal data. */
        ace_init_flags();

    /* Initialize the data structures used by conversion functions. */
    ace_init_convert();
    }

    void ACE_configure_sdd
    (
sdd_id_t            sdd_id,
sdd_resolution_t    resolution,
    uint8_t             mode,
    sdd_update_method_t sync_update
    )
    {
    ...
    } 
```

在 mss_ace.h 中

```
 typedef enum
    {
        SDD0_OUT = 0,    /*!< Analog Module 0 Sigma Delta DAC */
        SDD1_OUT = 1,    /*!< Analog Module 1 Sigma Delta DAC */
        SDD2_OUT = 2,    /*!< Analog Module 2 Sigma Delta DAC */
        NB_OF_SDD = 3
    } sdd_id_t;

    typedef enum
    {
        SDD_8_BITS = 0,
        SDD_16_BITS = 4,
        SDD_24_BITS = 8
    } sdd_resolution_t;

    #define SDD_CURRENT_MODE    1
    #define SDD_VOLTAGE_MODE    0
    #define SDD_RETURN_TO_ZERO  0
    #define SDD_NON_RTZ         2

    typedef enum
    {
        INDIVIDUAL_UPDATE = 0,
        SYNC_UPDATE = 1
    } sdd_update_method_t;

    void ACE_init(void);

    void ACE_configure_sdd(sdd_id_t sdd_id, sdd_resolution_t resolution, uint8_t mode, sdd_update_method_t sync_update); 
```

在 voltcon.c 内

```
 #include <stdint.h>
    #include <math.h>
    #include <string.h>
    #include <stdio.h>
    #include "../../N3V2_hardware/biarri/firmware/drivers/mss_ace/mss_ace.h"

    sdd_id_t this_sdd_id = SDD0_OUT;
    sdd_resolution_t this_sdd_resolution = SDD_16_BITS;
    uint8_t this_mode = SDD_VOLTAGE_MODE;
    sdd_update_method_t this_sdd_update_method = INDIVIDUAL_UPDATE;

    void ACE_init();

    void ACE_configure_sdd(this_sdd_id, this_sdd_resolution, this_mode, this_sdd_update_method); 
```

我得到的错误如下：

> voltcon.c：错误：#92：标识符列表参数只能在函数定义中使用

这个错误对我说的是它可能与我的函数的第三个参数有关。

---Update--- 错误是由代码的最后一行引起的（void ACE_configure_sdd 之一）。对此我深表歉意。#92 只是一个代码，它并不指代实际的代码行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:45:57.483

尝试删除`ACE_configure_sdd`from的声明`voltcon.c`。因为它已经存在于`mss_ace.h`.

似乎您正在尝试从中调用`ACE_configure_sdd`，`voltcon.c`但`c`您只能从另一个函数内部调用一个函数。

您可以尝试这样做`voltcon.c`：

```
void func1()
{
ACE_configure_sdd(this_sdd_id, this_sdd_resolution, this_mode, this_sdd_update_method);
} 
```

现在 func1 可以从代码中的其他函数或 main() 本身调用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-04T08:34:37.987

voltcon.c 中的最后一行似乎是函数 ACE_configure_sdd 的声明，但它缺少变量的类型声明。这就是错误“错误：#92”出现的原因。

# vb.net - 在多个空格上拆分一个字符串，但不是一个？

> ID：11115797
> 
> 赞同：0
> 
> 时间：2012-06-20T08:40:44.707
> 
> 标签：vb.net, string, split

我有一个字符串需要在有 2 个或更多空格的地方拆分，但我不想在单个空格上拆分它。

例如，一个字符串可能看起来像这样：

> “某事物名称“五空格” 其他事物名称“三空格”等”

我需要拆分为：

*   某物的名称
*   别的东西的名字
*   等等

我希望你能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:10:15.420

正如您所说，您可以使用 RegEx 来完成此操作，但这有点矫枉过正。String.Split 方法有一个重载，它接受一个字符串数组作为分隔符：

```
line.Split(New String() {"  "}, StringSplitOptions.None) 
```

# android - Android：NinePatch 和 LayerList

> ID：11115799
> 
> 赞同：1
> 
> 时间：2012-06-20T08:40:59.620
> 
> 标签：android, overlay, nine-patch

所以我试图用一个透明的 Ninepatch Drawable 使用图层列表覆盖地图图像。像这样：

[目标 http://f.cl.ly/items/2b1x3c3o0w3t1z0b2o2s/Screen%20Shot%202012-06-20%20at%2010.34.18%20AM.png](http://f.cl.ly/items/2b1x3c3o0w3t1z0b2o2s/Screen%20Shot%202012-06-20%20at%2010.34.18%20AM.png)

但我得到的只是这个（注意地图图像被九边形的边缘裁剪，即使它应该是透明的）：

[问题 http://f.cl.ly/items/380j3E2w452Y2D2d1K0a/Screen%20Shot%202012-06-20%20at%2010.29.45%20AM.png](http://f.cl.ly/items/380j3E2w452Y2D2d1K0a/Screen%20Shot%202012-06-20%20at%2010.29.45%20AM.png)

这是我的图层列表代码：

```
<?xml version="1.0" encoding="utf-8"?>
  <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
      <nine-patch android:src="@drawable/myninepatch" />
    </item>
    <item android:drawable="@drawable/detail_map"/>
  </layer-list> 
```

这是我的布局 ImageView：

```
 <ImageView
        android:layout_width="298dp"
        android:layout_height="106dp"
        android:layout_gravity="center"
        android:layout_marginBottom="11dp"
        android:src="@drawable/detail_map_overlay" /> 
```

**编辑：**这是 Ninepatch .png：

[Ninepatch http://f.cl.ly/items/0X3N0d331Q15380D093n/myninepatch.9.png](http://f.cl.ly/items/0X3N0d331Q15380D093n/myninepatch.9.png)

任何想法如何实现这一目标？不一定使用 Ninepatch，但我想根据图像的大小使其可拉伸。或者如果你有一个想法如何做内发光，那也会膨胀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:55:12.477

*回顾评论并使其更清晰以供进一步阅读*

您的 9 补丁无效：

*   顶部和左侧部分仅定义可拉伸区域。
*   底部和右侧，内容的位置。

用你的例子，它会做这样的事情（基于你但没有无用的部分）：

![9 补丁修正](../Images/92a97acbaab35bb71743ab42f2fafc8a.png)

然后将其设置为 ImageView 的背景：

```
<ImageView
    android:layout_width="298dp"
    android:layout_height="106dp"
    android:layout_gravity="center"
    android:layout_marginBottom="11dp"
    android:src="@drawable/detail_map"
    android:background="@drawable/myninepatch">
</ImageView> 
```

像这样你可以摆脱图层列表

# hadoop - pig如何输入多参数

> ID：11115802
> 
> 赞同：0
> 
> 时间：2012-06-20T08:41:03.257
> 
> 标签：hadoop, apache-pig

我有3个表要批量输入，如何在pig中指定参数？

例如，tmp/001.csv,tmp/002.csv,tmp/003.csv，在 pig 脚本中，我如何编写 -param 和 LOAD 语句来一次性输入这些表？

有人给我一个例子

```
pig -param nums="'001','002','003'" test.pig 
```

在猪脚本中，

```
LOAD 'tmp/{nums}.csv' AS ... 
```

但看起来猪只读取了 001.csv 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:32:43.190

您很可能也需要将其移至`/tmp`参数：

```
pig -param ins=/tmp/001.csv,/tmp/002.csv,/tmp/003.csv test.pig

LOAD '${ins}' AS ... 
```

显然，如果您有许多文件要列出（并且它们都可以匹配一个简单的 glob），那么这可以进一步减少：

```
pig -param ins=/tmp/*.csv test.pig 
```

# android - 单击按钮时重新加载自定义视图

> ID：11115809
> 
> 赞同：2
> 
> 时间：2012-06-20T08:41:33.550
> 
> 标签：android, custom-view

我试图在单击按钮时刷新屏幕所以我想知道我应该在 OnClick() 方法中写什么以便自定义视图即 TouchEventView 将重新加载或刷新这里是我的 TouchEventView.java 代码

```
public class TouchEventView extends View {
    private Paint paint = new Paint();
    private Path path = new Path();

    public TouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);

        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(5f);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);

            return true;
        case MotionEvent.ACTION_MOVE:
            path.lineTo(eventX, eventY);
            break;
        case MotionEvent.ACTION_UP:
            // nothing to do
            break;
        default:
            return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
    }
}
` 
```

这是 main.xml 文件 ``

```
 <de.vogella.android.touch.TouchEventView
        android:id="@+id/mydrawview1"
        android:layout_width="wrap_content"
        android:layout_height="328dp"
        android:layout_weight="0.91" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/reset"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Reset" />
    </LinearLayout>

</LinearLayout>` 
```

这里是活动课`

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button res = (Button) findViewById(R.id.reset);
    res.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            TouchEventView touchView = (TouchEventView) findViewById(R.id.mydrawview1);
            touchView.clear();

        }
    });
} 
```

}`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:07:08.117

只需将此方法添加到您的`TouchEventView`：

```
public void clear ()
{
    path = new Path();
    invalidate();
} 
```

然后从以下位置调用它`onClick()`：

```
@Override
public void onClick(View v) {
    TouchEventView touchView = (TouchEventView) findViewById(R.id.mydrawview1);
    touchView.clear();
} 
```

# android - Intent.action_call 在 Galaxy S3 上的 BroadcastReceiver 中不起作用

> ID：11115812
> 
> 赞同：1
> 
> 时间：2012-06-20T08:41:41.817
> 
> 标签：android, broadcastreceiver, galaxy

我有拨号应用程序，当用户拨打号码以 + 开头时，它将挂断然后呼叫特定号码。我在 BroadcastReceiver 的 onReceive 中执行此操作，代码如下。

```
public void onReceive(Context context, Intent intent) {
    to = intent.getStringExtra("android.intent.extra.PHONE_NUMBER");
    if (to == null)
        return;

    if (to.startsWith("+")) {
        setResultData(null);

        Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:123456789"));
                callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(callIntent);

        Toast toast = Toast.makeText(context, "Call trap and Redirect", Toast.LENGTH_LONG);
        toast.show();
        return;
    }

} 
```

此代码在其他型号上运行良好，但在 Galaxy S3 上却不行。Toast 消息显示但 intent.action_call 未拨出？？？只是安静，logcat 没有错误。

仅当从广播接收器内部启动意图时才会发生这种情况，从活动启动时，intent.action_call 将正常工作。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:01:28.013

我面临与 Galaxy S3（GT-I9300）相同的问题。我尝试启动新活动而不是触发 ACTION_CALL（我的代码最初也触发 ACTION_CALL，但修改为调试）。在这种情况下，它可以与调试器一起使用，但如果没有调试器附件则无法使用。

# perl - Perl & MongoDB 二进制数据

> ID：11115814
> 
> 赞同：8
> 
> 时间：2012-06-20T08:41:48.653
> 
> 标签：perl, mongodb

从[MongoDB](https://metacpan.org/module/MongoDB%3a%3aDataTypes)手册：

> 默认情况下，所有数据库字符串都是 UTF8。要保存图像、二进制文件和其他非 UTF8 数据，您可以将字符串作为引用传递给数据库。

我正在获取页面并希望存储内容以供以后处理。

*   我不能依赖元字符集，因为许多页面都有 utf8 内容但错误地声明了 iso-8859-1 或类似的
*   所以不能使用`Encode`（不知道原始字符集）
*   因此，我想简单地存储内容`as flow of bytes`（二进制数据）以供以后处理

我的代码片段：

```
sub save {
    my ($self, $ok, $url, $fetchtime, $request ) = @_;

    my $rawhead = $request->headers_as_string;
    my $rawbody = $request->content;

    $self->db->content->insert(
        { "url" => $url, "rhead" => \$rawhead, "rbody" => \$rawbody } ) #using references here
      if $ok;

    $self->db->links->update(
        { "url" => $url },
        {
            '$set' => {
                'status'       => $request->code,
                'valid'        => $ok,
                'last_checked' => time(),
                'fetchtime'    => $fetchtime,
            }
        }
    );
} 
```

但得到错误：

> /opt/local/lib/perl5/site_perl/5.14.2/darwin-multi-2level/MongoDB/Collection.pm 第 296 行的子例程条目中的宽字符。

这是我存储数据的唯一地方。

问题：在 MondoDB 中存储二进制数据的唯一方法是使用 base64 对它们进行编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:53:42.520

看起来又是一个关于`_utf8_`flag的悲伤故事……

我可能错了，但似乎HTTP::Message`headers_as_string`和`content`方法将它们的字符串作为字符序列返回。但是 MongoDB 驱动程序希望作为“二进制文件”显式传递给它的字符串是一个八位字节序列——因此是警告剧。

一个相当丑陋的解决方法是`utf8`在你的代码中取消 $rawhead 和 $rawbody 上的标志（我想知道它不应该由 MongoDB 驱动程序本身完成吗？），通过这样的东西......

```
_utf8_off $rawhead; 
_utf8_off $rawbody; # ugh 
```

另一种方法是使用`encode('utf8', $rawhead)`- 但是你应该`decode`在从数据库中提取值时使用，我怀疑它并不丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:37:46.990

您的数据是字符，而不是八位字节。您的假设似乎是您只是将事物作为八位字节传递，但您必须在早些时候通过解码传入的文本数据以某种方式违反了该假设，甚至可能在您没有注意到的情况下。

所以根本不解码，数据保持八位字节，存储到数据库中不会失败。

# android - 在自定义视图中设置背景图像

> ID：11115820
> 
> 赞同：2
> 
> 时间：2012-06-20T08:42:01.480
> 
> 标签：android, view, background-image

我创建了一个扩展 View 类的类。

```
public class SplashScreen extends View 
```

我通过设置 contentview 来使用它

```
View splash = new SplashScreen(this);
setContentView(splash); 
```

我需要设置背景图像，但我不能使用布局。我想我需要做画布绘图，但我不知道该怎么做。

```
protected void onDraw(Canvas canvas) {
  ballBounds.set(ballX-ballRadius, ballY-ballRadius, ballX+ballRadius, ballY+ballRadius);
  paint.setColor(Color.LTGRAY);
  // canvas.drawImage(R.drawable.background_image); (Ps: I know there is no function such as drawImage)"
  canvas.drawOval(ballBounds, paint);} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:04:52.093

如果你只想设置背景，你可以做

```
public SplashScreen(Context context, AttributeSet attrs) {
    super(context, attrs);
    setBackgroundResource(R.drawable.background);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:46:58.147

您可以在画布上添加图像：

```
 Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pic180);  
        Matrix matrix=new Matrix();
        matrix.postScale(0.8f, 0.8f);
        matrix.postRotate(45);
        Bitmap dstbmp=Bitmap.createBitmap(bmp,0,0,bmp.getWidth(),
        bmp.getHeight(),matrix,true);
        canvas.drawColor(Color.BLACK); 
        canvas.drawBitmap(dstbmp, 10, 10, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:57:45.043

你不只是想改变`SplachScreen`类型`activity`吗？然后`setContentView`更改为您的任何`layout`内容，如果您希望该启动屏幕出现在您的应用程序之前，请使其首先进入`Manifest`并`splashscreen`最终，销毁`activity`并启动您的应用程序菜单活动。那么你就不需要 View 课，也不需要更少的工作来寻找问题所在

# alfresco - 如何在 Alfresco 中自定义文档列表？

> ID：11115822
> 
> 赞同：2
> 
> 时间：2012-06-20T08:42:33.427
> 
> 标签：alfresco

在存储库中会有不同的文档列表。即会有数据字典、用户主页、访客主页等。当我将视图更改为“详细视图”时，它会显示收藏夹、喜欢、评论链接。如果我不想显示它们，我必须在哪里修改。你能告诉我必须在哪个文件中评论不显示这些链接的代码吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-01T14:49:01.723

我想要这个问题的“模块化”答案，这个答案是为了展示我是如何处理这个问题的。

**上下文：** Alfresco 4.2.f，来自`org.alfresco.maven.archetype:alfresco-amp-archetype:1.1.1`原型的 Maven 项目，我尽可能将所有内容都放在嵌入式 JAR 中。

为共享创建一个模块扩展（有关更多详细信息，请参阅[此博客](http://blogs.alfresco.com/wp/developer/2013/09/04/customizing-the-share-header-menu-part-1/)）。这是我的扩展文件：

*src/main/resources/alfresco/site-data/extensions/my-custom-extension.xml*

```
<extension>
  <modules>
    <module>
      <id>Main module of my custom extension</id>
      <version>${project.version}</version>
      <auto-deploy>true</auto-deploy>
      <customizations>
        <customization>
          <!-- Order matters here! target before source, always! -->
          <targetPackageRoot>org.alfresco</targetPackageRoot>
          <sourcePackageRoot>my-custom.main</sourcePackageRoot>
        </customization>
      </customizations>
    </module>
  </modules>
</extension> 
```

在`documentlibrary`模块包的组件中，创建此 FTL 以声明 javascript：

*src/main/resources/alfresco/site-webscripts/my-custom/main/components/documentlibrary/documentlist-v2.get.html.ftl*

```
<#-- Add a Javascript declaration -->
<@markup id="my-custom-js"  target="js" action="after">
  <@script type="text/javascript" group="documentlibrary"
      src="${url.context}/res/my-custom/main/components/documentlibrary/documentlist.js"/>
</@> 
```

在资源 (META-INF) 中的`documentlibrary`组件下，创建 Javascript：

*src/main/resources/META-INF/my-custom/main/components/documentlibrary/documentlist.js*

```
YAHOO.lang.augmentObject(Alfresco.DocumentList.prototype, {

  // Possible values: i18nLabel, lockBanner, syncFailed, syncTransientError
  // date, size, name, version, description, tags, categories
  myCustomDisabledRenderers: ["description", "version", "tags"],

  // Possible values: favourites, likes, comments, quickShare
  myCustomDisabledSocials: ["favourites", "comments", "likes", "quickShare"],

  myCustomIsSocialDisabled: function(propertyName) {
    return Alfresco.util.arrayContains(
        this.myCustomDisabledSocials, propertyName);
  },

  myCustomIsRendererDisabled: function(propertyName) {
    if (Alfresco.util.arrayContains(
        this.myCustomDisabledRenderers, propertyName)) {
      return true;
    }
    // Disable the social renderer when all the social features are
    // disabled
    if (propertyName === "social" && this.myCustomDisabledSocials.length == 4) {
      return true;
    }
    return false;
  },

  /** Helper function to disable socials
   * propertyName must be one of "favourites", "comments", "likes", "quickShare"
   */
  myCustomDisableSocial: function(propertyName) {
    if (!Alfresco.util.arrayContains(
        this.myCustomDisabledSocials, propertyName)) {
      this.myCustomDisabledSocials.push(propertyName);
    }
  },

  // Custom registerRenderer for social features, originally defined in:
  // webapps/share/components/documentlibrary/documentlist.js:2134
  myCustomSocialRegisterRenderer: function(record) {
    var jsNode = record.jsNode;
    var html = "";
    // Current usage of the separator variable allow to change the order
    // of the different social features (the 'if' blocks below) without 
    // changing their content
    var separator = "";
    /* Favourite / Likes / Comments */
    if (!this.myCustomIsSocialDisabled("favourites")) {
      html += '<span class="item item-social' + separator + '">' + 
          Alfresco.DocumentList.generateFavourite(this, record) + 
          '</span>';
      separator = " item-separator";
    }
    if (!this.myCustomIsSocialDisabled("likes")) {
      html += '<span class="item item-social' + separator + '">' + 
          Alfresco.DocumentList.generateLikes(this, record) + 
          '</span>';
      separator = " item-separator";
    }
    if (!this.myCustomIsSocialDisabled("comments") && 
        jsNode.permissions.user.CreateChildren) {
      html += '<span class="item item-social' + separator + '">' + 
          Alfresco.DocumentList.generateComments(this, record) + 
          '</span>';
      separator = " item-separator";
    }
    if (!this.myCustomIsSocialDisabled("quickShare") && !record.node.isContainer && 
        Alfresco.constants.QUICKSHARE_URL) {
      html += '<span class="item' + separator + '">' + 
          Alfresco.DocumentList.generateQuickShare(this, record) + 
          '</span>';
      separator = " item-separator";
    }

    return html;
  },

  // Overwrite registerRenderer which was originally defined in:
  // webapps/share/components/documentlibrary/documentlist.js:1789
  registerRenderer: function DL_registerRenderer(propertyName, renderer) {
    if (Alfresco.util.isValueSet(propertyName) && 
        Alfresco.util.isValueSet(renderer) && 
        !this.myCustomIsRendererDisabled(propertyName)) {
      if (propertyName === "social") {
        this.renderers[propertyName] = this.myCustomSocialRegisterRenderer;
      } else {
        this.renderers[propertyName] = renderer;
      }
      return true;
    }
    return false;
  }

}, true); 
```

`myCustomDisabledRenderers`然后你可以通过更新和/或禁用链接`mySocialDisabledRenderers`。

这种方式还允许您创建一个模块，只需 6 个简单的步骤即可独立禁用（例如）“对文档的评论”或“对文档的喜欢”功能！

**示例，如何制作一个仅通过 6 个步骤禁用文档评论的模块**

1.  `documentlist.js`重要提示：首先从主模块中删除“评论禁用” 。

    ```
    myCustomDisabledSocials: ["favourites", "likes", "quickShare"], 
    ```

2.  创建一个具有相同结构的新模块“my-custom.nocomment”。

    ```
    <extension>
      <modules>
        <module>
          <id>Main module of my custom extension</id>
          [...]
        </module>
        <module>
          <id>No comment module of my custom extension</id>
          <version>${project.version}</version>
          <customizations>
            <customization>
              <targetPackageRoot>org.alfresco</targetPackageRoot>
              <sourcePackageRoot>my-custom.nocomment</sourcePackageRoot>
            </customization>
          </customizations>
        </module>
      </modules>
    </extension> 
    ```

3.  添加 FTL...

    *src/main/resources/alfresco/site-webscripts/my-custom/nocomment/components/documentlibrary/documentlist-v2.get.html.ftl*

    ```
    <#-- Add a Javascript declaration -->
    <@markup id="my-custom-js"  target="js" action="after">
      <@script type="text/javascript" group="documentlibrary"
          src="${url.context}/res/my-custom/nocomment/components/documentlibrary/documentlist.js"/>
    </@> 
    ```

4.  然后是Javascript...

    *src/main/resources/META-INF/my-custom/nocomment/components/documentlibrary/documentlist.js*

    ```
    Alfresco.DocumentList.prototype.myCustomDisableSocial("comment"); 
    ```

5.  然后我很高兴，如果您觉得一切顺利，请鼓掌！

6.  笔记：

    *   `nocomment`模块依赖于模块`main`。
    *   在模块（in ）**之后**`nocomment`加载模块很重要。**`main``http://localhost:8080/share/page/modules/deploy`**
    ***   为了使`nocomment`模块完整，您还需要从文档详细信息页面禁用评论，见下文。**

 ****从文档详细信息页面禁用评论**

即使这个在其他地方有记录，这几天我花了很多时间搜索，我觉得我需要尽可能全面。

*src/main/resources/alfresco/site-data/extensions/my-custom-extension.xml*

将此添加到您的`my-custom.nocomment`模块声明中，您将摆脱文档详细信息页面中的评论表单和列表。

```
[...]
<module>
  <id>No comment module of my custom extension</id>
  [...]
  <components>
    <component>
      <region-id>comments</region-id>
      <source-id>document-details</source-id>
      <scope>template</scope>
      <sub-components>
        <sub-component id="default">
          <evaluations>
            <evaluation id="guaranteedToHide">
              <render>false</render>
            </evaluation>
          </evaluations>
        </sub-component>
      </sub-components>
    </component>
  </components>
</module>
[...] 
```

src/main/resources/alfresco/site-webscripts/my-custom/nocomment/components/node-details/node-header.get.js

这是为了禁用文档详细信息页面标题上的按钮。

```
// Disable comments
for (var i = 0; i < model.widgets.length; i++) {
  if (model.widgets[i].id == "NodeHeader") {
    model.widgets[i].options.showComments = false;
  }
}
// And since it does not work, disable comments this way too
model.showComments = "false"; 
```

**注意：**我没有测试这些片段，它们是在“匿名化”之后从我的项目中获取的（基本上是重命名模块）。如果您发现错误，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T17:13:39.607

您正在寻找的内容很可能是由客户端 JavaScript 生成的。您应该使用 share-config-custom.xml 将 Share 设置为开发模式，如下所示：

```
<alfresco-config>
    <!-- Put Share Client in debug mode -->
    <config replace="true">
        <flags>
            <client-debug>true</client-debug>
            <client-debug-autologging>false</client-debug-autologging>
        </flags>
    </config>
</alfresco-config> 
```

然后，使用 firebug 或浏览器的开发者控制台来单步执行客户端 JavaScript。您应该能够找到呈现文档库元素的点。

您可以使用自己的组件覆盖 Alfresco 的客户端 JavaScript 组件。请将它们放在您自己的命名空间中以避免与 Alfresco 的冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T10:13:18.637

我通过在 share/src/alfresco/share-document-config 中的文件 share-documentlibrary-config.xml 中注释 {social} 行来做到这一点

```
...
<metadata-templates>
   <!-- Default (fallback) -->
     <template id="default">
        <line index="10" id="date">{date}{size}</line>
        <line index="20" id="description" view="detailed">{description}</line>
        <line index="30" id="tags" view="detailed">{tags}</line>
        <line index="40" id="categories" view="detailed" evaluator="evaluator.doclib.metadata.hasCategories">{categories}</line> -->
   <!-- <line index="50" id="social" view="detailed">{social}</line> -->
     </template>
... 
```

有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:20:27.320

看起来所有内容都在： \opt\alfresco-4.0.d\tomcat\webapps\share\components\documentlibrary\documentlist.js 我认为诀窍在于 this.registerRenderer("social"...) 返回1981 行之前的 html （在喜欢之前的收藏之后）假设你想至少保留 faorite

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T22:03:00.713

我不确定我是否理解你的问题 - 你试图在露天资源管理器的特定视图中隐藏一些列？如果是这样，您需要编辑 /jsp/browse/browse.jsp 文件，但我认为这不是一个好主意。也许实现你自己的 NodePropertyResolver 应该是更好的方法，看看我关于这个主题的旧博文：http: [//www.shmoula.cz/adding-columns-to-custom-browse-jsp/](http://www.shmoula.cz/adding-columns-to-custom-browse-jsp/)**

# jquery - 根据百分比将项目拖动到包含元素

> ID：11115824
> 
> 赞同：16
> 
> 时间：2012-06-20T08:42:40.977
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

这是它的样子；

```
$( "#box ul li" ).draggable({
    helper: "clone"
});
$( ".item" ).draggable({containment: ".door"});

$( ".door" ).droppable({
    accept: ":not(.ui-sortable-helper, .item)",
    drop: function( event, ui ) {
       $( "<div class='item'></div>" ).html(ui.draggable.find("img")).appendTo(this);
    }
}); 
```

用户拖动 $("#box ul li") 元素并将其放在 $(".door") 元素上。它使用 $(".item") 选择器将其附加到 $(".door") 元素。

我正在使用 jquery UI - Draggable 拖放项目。那里没有问题。

**这是实际的问题；**

但是当您开始拖动元素时，该函数会更改元素的左侧和顶部位置，例如；**顶部：10 像素 左侧：10 像素**。但我想根据百分比将项目拖动到包含元素。应该是 **top:10%；左：10%**。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T10:11:03.210

我找到了解决方案；

```
$( ".item" ).draggable({
  containment: ".door",
  stop: function( event, ui ) {
   $(this).css("left",parseInt($(this).css("left")) / ($(".door").width() / 100)+"%");
   $(this).css("top",parseInt($(this).css("top")) / ($(".door").height() / 100)+"%");
  }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-15T08:51:17.070

试试这个代码：

```
$( ".element" ).draggable({

    stop: function (){
     var l = ( 100 * parseFloat($(this).css("left")) / parseFloat($(this).parent().css("width")) )+ "%" ;
     var t = ( 100 * parseFloat($(this).css("top")) / parseFloat($(this).parent().css("height")) )+ "%" ;
     $(this).css("left" , l);
     $(this).css("top" , t);
     }

}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-15T20:45:02.603

以上所有内容的一点点更新版本：

```
$('.element').draggable({
    containment: 'parent',
    stop: function( event, ui ) {
        var $elm = $(this);
        var pos = $elm.position(),
            parentSizes = {
                height: $elm.parent().height(),
                width: $elm.parent().width()
            };

        $elm.css('top', ((pos.top/parentSizes.height) * 100) + '%').css('left', ((pos.left/parentSizes.width) * 100) + '%');
}}); 
```

# bash - SED：将多行中的选择字段合并为一行

> ID：11115828
> 
> 赞同：0
> 
> 时间：2012-06-20T08:42:59.600
> 
> 标签：bash, scripting, sed, awk

我有以下形式的文件：

```
random stuff  
more random stuff, etc  
more random stuff, etc   
05201206 field1 field2 field3 field4 field5  
05201212 field1 field2 field3 field4 field5  
05201218 field1 field2 field3 field4 field5 
```

字段是纬度和经度

我想要做的是找到所有以“05”开头的行并从每个字段中获取字段1、3，然后按照找到的顺序将结果全部打印到一行上，例如：（尝试编写KML代码）

```
field1, field3, 0 field1, field3, 0 field1, field3, 0  field1, field3, 0 
```

另外，相关问题 - 数学可以在 sed 中完成吗？理想情况下，在打印结果之前，每个 lats 和 lons 都应该除以 10.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:03:48.573

你不能在`sed`. `awk`是标记和处理字段的正确工具。

```
awk '/^05/{ $4/=10.0;$2/=10.0;out=out$2","$4","}END{print out }' inputFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:50:03.077

`awk`显然是适合这项工作的工具，但您当然可以`sed`用于部分任务。过滤器是一个强大的想法：

```
<input sed -n /^05/p                    | # print only lines starting "05" 
  awk '{print 0, $2/10", " $4/10", "}'  | # print scaled columns 2 and 4
  sed '1s/^0 //'                        | # Remove leading "0 "
  tr -d '\n'                            ; # Remove all newlines
  echo " 0"                             # append trailing "0" and newline 
```

请注意，这里的 seds 完全是多余的（第一个肯定会被第一个 awk 上的模式匹配替换）；关键是您可以通过构建简单的工具来完成每项任务并将它们一起运行，从而非常轻松地构建您想要的那种处理方式。

# git - 如何永久防止文件的特定部分在 git 中提交？

> ID：11115829
> 
> 赞同：13
> 
> 时间：2012-06-20T08:43:02.363
> 
> 标签：git, git-svn, gitignore

我已经用 git-svn 克隆了一个远程 SVN 存储库。我以代码编译的方式修改了这个克隆的 repo 中的 pom.xml 文件。这个设置是我独有的。因此，我不想将更改推送回远程仓库。

有没有办法防止文件的这种（部分）更改被提交到 repo 中？我知道我可以使用个人分支，但这意味着一定的合并开销。还有其他方法吗？

我已经研究过这个[问题](https://stackoverflow.com/questions/655243/ignore-modified-but-not-committed-files-in-git)和这个[问题](https://stackoverflow.com/questions/10220063/git-how-to-prevent-committing-files-that-were-modified-just-for-debugging-purpo)，但它们是为了相当暂时的变化。

更新：我也知道 .gitignore 的可能性，但这意味着完全排除该文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:52:49.593

编辑：你问的是不可能的，我没有看到“部分”部分。我知道您只能提交部分文件，但不能忽略文件的某些部分。您将需要使用 update-index 技巧来避免将其置于“状态”中，并且每次从远程变基/合并时都需要存储该文件，然后取消存储您的修改并使用更新忽略您的修改-指数。我不知道你是否可以为一系列 git 命令创建一个 git 别名，所以使用一个命令你可以执行所有这 3 个命令以避免麻烦

使用 .gitignore 文件，也不要将其推送到远程仓库：[忽略 .gitignore 文件本身](https://stackoverflow.com/questions/767147/how-do-i-tell-git-to-ignore-gitignore)

在你的 .gitignore 中，你应该有

```
 .gitignore
 path/to/pom.xml 
```

.gitignore 文件可以位于工作树的根目录，也可以位于您想要/需要的任何子目录中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-24T09:23:10.717

可能有过滤器的可能性。但这需要进一步探索。

起点：为此过滤器实施涂抹/清洁：

```
git config --global filter.versionUpdate.smudge 'sed "s/<version>14.5.0<\/version>/<version>14.5.FEATURE-15<\/version>/"'
git config --global filter.versionUpdate.clean 'sed "s/<version>FEATURE-15<\/version>/<version>14.5.0<\/version>/"' 
```

这样，在比较时文件总是相同的，因为应用了过滤器。

问题：它仍然需要调查如何找到过滤后的文件。这在工作目录中并不明显。

[![涂抹清洁过滤器](../Images/7e4536cd83ae7969b4297b97dad3779e.png)](https://i.stack.imgur.com/j3nnt.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-28T04:59:08.850

在 git 之外解决您的问题可能更容易。您可以在 pom.xml 中定义一个具有默认值的属性，每个人都使用该属性。对于您的独家设置，您只需`${user.home}/.m2/settings.xml`使用`-Dproperty=value`. 或者类似地，您可以创建另一个配置文件并根据您在 ~/.bashrc 中导出的环境变量激活它。

对于 git 解决方案，我正在通过一些纪律正确地遵循工作流程来完成您想要的事情：

1.  对 pom.xml（或其他文件）进行特定于设置的更改。
2.  将更改提交到 git（仅限本地）。在提交标题/消息中说明更改仅供本地使用，例如“LOCAL ONLY. DO NOT DCOMMIT: rest of the title”。
3.  从 svn 拉取更改，进行本地 git 提交等。
4.  一旦将您的更改提交回 svn，请执行
    1.  `git svn rebase`从 SVN 拉取新的提交，解决冲突。
    2.  `git rebase -i svn/trunk`（或者你的 svn 远程分支）（这将在 SVN 之上启动所有本地更改的交互式变基）
    3.  在交互式 rebase 待办事项编辑器中，将仅本地提交移至底部。
    4.  保存待办事项并退出变基待办事项编辑器。
    5.  解决任何冲突（除非您在其他本地提交中触及 pom.xml（或其他仅本地文件）的相同部分，否则应该没有冲突）。
5.  运行`git svn dcommit --dry-run @~1`（或`git svn dcommit --dry-run HEAD~1`在旧版 git 中）以查看将推送到 SVN 存储库的内容；确保您的本地提交不在列表中。
6.  运行`git svn dcommit @~1`（或`git svn dcommit HEAD~1`）最终将您的更改推送到 SVN 存储库。
7.  `git svn rebase`从 SVN 中提取新的提交。

这听起来可能很复杂，但是一旦你习惯了它就会非常简单。基本上，你有一个（或多个）本地提交，你永远不会推送到 SVN。一年多来，我没有错误地推送提交，使用这个工作流和多个提交和存储库。例如，它对于进行一些仅限本地调试的更改非常有用（尽管为此引入环境变量或一些设置文件会更好）。

此外，这可以通过 git 中的 pre-dcommit 挂钩来增强，这将确保不会对本地更改进行 dcommit'ed。不幸的是，我没有看到一个标准的 git-svn 钩子，但是可以使用[git-svn-hooks](https://github.com/rkitover/git-svn-hooks)来实现这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-28T08:35:17.300

共享这种配置文件的一种通用方法是：

1.  提交一个模板文件（例如`pom.xml.template`：）
2.  忽略文件本身（例如：添加`pom.xml`到`.gitignore`文件）
3.  让每个用户自定义此文件以满足他的需要

实施步骤 3 的一些方法是：

*   让用户手动编辑复制模板文件并进行编辑
*   有一些脚本，它在模板文件上应用替换并将输出写入预期的目标

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-30T02:25:50.970

在我看来，这听起来像是**pre-commit hook**的有力案例。在您的 .git 文件夹中，您应该有一个 hooks 文件夹。它可能有一些样本，但它们被忽略了，因为它们有一个 .sample 扩展名。如果您添加一个名为“ **pre-commit** ”（无扩展名）的文件，其中包含以下脚本，则该脚本将在您每次提交时运行。不要忘记通过运行“ **chmod ug+x pre-commit** ”使脚本可执行。

我添加了一些注释来解释每一行的作用，但基本上你将如何使用它是你将' **#start** '放在你不想包含在你的git提交中的代码之上，然后' **#end** '在该代码下方。您可以在 sed 命令中使用不同的开始和结束标志，只要确保您使用的任何语言的注释语法，编译器都会忽略它们。当您最终执行提交时，将发生以下情况：

1.  中间的代码（包括#start 和#end 标志）将被删除
2.  该文件将在没有代码和标志的情况下提交
3.  然后代码和标志将返回到文件的本地副本

由于这一切都包含在预提交挂钩中，因此这一切都会在您每次提交时自动发生。

**预提交**

```
#!/usr/bin/env bash

echo "Running pre-commit hook..."

set -e
export PATH=$PATH:/usr/local/bin
exit_status=0

echo "Removing supercomments..."
# Get a list of files part of this commit
files=$(git diff --cached --name-status)

# Loop through each file
for f in $(echo $files | awk '{ print $2}')
do
        # Create a temp copy of the file
        cp ${f} ${f}.temp
        # Remove all chunks between '#start' and '#end'
        sed -i '/#start/,/#end/d' ${f}
        # Add the file with chunks removed
        git add ${f}
        # Replace file with temp file containing code you didn't want to comm
it
        cp ${f}.temp ${f}
done

echo "Hook completed!"

exit $exit_status 
```

**示例用法：**

**测试.txt**

```
This is a file
It's really just a test file

#start
This code is only relevant to me
When I eventually commit this file...
...please don't inclue all of this!
#end

This part of the file is important,
make sure it's included in my next commit. 
```

**添加并提交 test.txt：**

```
git add test.txt
#

git commit -m "A great commit message."
# Running pre-commit hook...
# Removing supercomments...
# Hook completed!
# [master commit_id_1234] A great commit message. 
```

**test.txt（*在 commit_id_1234 中*）**

```
This is a file
It's really just a test file

This part of the file is important,
make sure it's included in my next commit. 
```

**test.txt（*提交后的本地副本*）**

```
This is a file
It's really just a test file

#start
This code is only relevant to me
When I eventually commit this file...
...please don't inclue all of this!
#end

This part of the file is important,
make sure it's included in my next commit. 
```

**注意：** 您的问题需要考虑一些细微差别。听起来你有一组你想在你的文件中包含的代码，但只有在本地编译时（我假设你主要在本地开发和测试你的代码），但是你希望能够提交该开发代码和在提交之前自动删除您的“ *only-locally-relevant-code ”。*虽然上面的钩子应该做到这一点，但请记住“ *only-locally-relevant-code ”的部分*" 没有被版本控制，因为当您最终推送时它永远不会访问您的远程存储库。这可能很明显，但请确保您对此感到满意。如果您的本地副本发生问题，所有这些代码，即使它只是相关的对您来说，可能会丢失，并且无法通过简单地重新克隆存储库来恢复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-30T09:22:00.047

已经提出了好的想法。Prehooks 似乎最合适。其他一些需要考虑的途径可能是： - 分叉 repo 并提交所有更改 - 在同一个 repo 上提交一个单独的分支并提交 - 有一个本地分支，仅包含您在签出时选择的私有差异，并在检查之前反转在？- 应用补丁文件 - 再次可以在签入之前反转（虽然有问题）

# javascript - IE 与 FireFox 中的 Java 脚本错误？

> ID：11115831
> 
> 赞同：2
> 
> 时间：2012-06-20T08:43:07.107
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

我使用以下脚本从 HTML 表中获取值。如果我使用 **innerText**，它将在 IE 和 Chrome Fine 上运行。但 FireFox 显示**错误：row.cells[0].innerText is undefined Source**。如果我使用**textContent**它将在 Chrome 和 FireFox 中正常工作。但 IE 显示以下错误**cells.0.textContent' 为空或不是对象**。如何更改此脚本在**IE、Chrome、FireFox**上正常工作？我使用 c= row.cells[0].innerText.strip(); **或**c=row.cells[0].textContent.strip();

```
 function a()
        {

            var table = getServerObject("b");
            var row,c;
            for (var i = 2; i < table.rows.length - 1; i++)
            {
                row = table.rows[i]; 
                if(row.cells.length==1)continue;
                c= row.cells[0].innerText.strip(); //It was work in chrome and IE (or)
                c=row.cells[0].textContent.strip();//It was work in chrome and FF
                if(c==0)
               {
                //Something
               }

            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:48:51.697

只需在使用该属性之前进行测试，该属性可用：

```
var contentEnabled = document.textContent === null; 
```

稍后您可以决定是否使用哪个属性

```
if ( contentEnabled ) {
  c= row.cells[0].textContent.strip(); // It was work in chrome and FF
} else {
  c= row.cells[0].innerText.strip(); // It was work in chrome and IE
} 
```

或更短，如@RobW 建议的那样

```
c = row.cells[0][contentEnabled ? 'textContent' : 'innerText'].strip(); 
```

对于两个属性之间的细微差别，请注意[MDN 文档中的以下内容`textContent`](https://developer.mozilla.org/en/DOM/Node.textContent)：

> **与 innerText 的区别**
> 
> Internet Explorer 推出`element.innerText`。意图几乎相同，但有几个不同之处：
> 
> 请注意，虽然`textContent`获取所有元素的内容，包括`<script>`和`<style>`元素，但大多数等效的 IE 特定属性 ,`innerText`没有。 `innerText`也知道样式，不会返回隐藏元素的文本，而`textContent`会。由于`innerText`知道 CSS 样式，它会触发重排，而`textContent`不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:10:31.137

If you truly want a cross-browser way (IE<9), use jQuery. Seriously, you will spend a lot less time with these quirks.

Based on its inspiration, you can do it like it does: use `nodeValue`, the only cross-browser way. However, `nodeValue` doesn't work on elements, but it does work on `textNodes` ([full list](https://developer.mozilla.org/en/nodeValue) on which elements it works).

```
function getText( el ) {
    var text = '';

    // Recursively get the text
    ( function recur( el ) {

        // If it's a textNode or a CDATA node
        if ( el.nodeType === 3 || el.nodeType === 4 ) {
            text += el.nodeValue;
        }

        // If it has childNodes, recursively get their nodeValue
        if ( el.hasChildNodes() ) {
            for ( var i = 0, l = el.childNodes; i < l; i++ ) {
                recur( el.childNodes[ i ] );
            }
        }
    } () );
    return text;
} 
```

Usage:

```
getText( row.cells[0] ); 
```

If you don't care about the differences (`innerText` and `textContent` don't return the same output, not to mention which elements it gets, there are also textNodes differences) and just want a quick solution, use this:

```
function getText( el ) {
    if ( 'textContent' in el ) return el.textContent;
    else return el.innerText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:46:51.517

```
function a()
        {

            var table = getServerObject("b");
            var row,c;
            for (var i = 2; i < table.rows.length - 1; i++)
            {
                row = table.rows[i]; 
                if(row.cells.length==1)continue;
                   if(typeof (row.cells[0]) != "undefined"){
                c= row.cells[0].innerText.strip(); //It was work in chrome and IE (or)
                c=row.cells[0].textContent.strip();//It was work in chrome and FF
                if(c==0)
               {
                //Something
               }
                 }
            }
        } 
```

# c++ - 如何检查可执行文件或 DLL 是否以发布或调试模式 (C++) 构建

> ID：11115832
> 
> 赞同：19
> 
> 时间：2012-06-20T08:43:14.690
> 
> 标签：c++, dll, exe, debug-symbols, portable-executable

我需要找到模式 EXE/DLL 正在构建查看其标题。（仅使用 C++，无需任何外部工具）

关于如何确定 DLL 是在 Release 还是 Debug 模式下构建的，有一个古老的讨论。 [http://forums.codeguru.com/archive/index.php/t-485996.html](http://forums.codeguru.com/archive/index.php/t-485996.html)

但不幸的是，我没有找到任何明确的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T09:49:23.740

> I need to find the mode exe/dll was build looking at its headers.

If by "headers" you mean PE sections or resources (headers won't tell you anything, and programs are not usually shipped with their development headers!), this is *kind of* possible, within limits, and unreliably. Otherwise, this is an entirely impossible endeavour unless you wrote the program yourself.

Generally, it is hard to do such a thing in a reliable way, even more so as "debug build" is a Microsoft Visual Studio simplification that does not exist as such under most compilers. For example, with GCC it is perfectly allowable to have an *optimized build* that nevertheless contains debug symbols. It is even possible to turn optimizations on and off with `#pragma` (and change the optimization level and even the target machine!) and thus have optimized functions (or groups of functions) in an unoptimized build, and vice versa.

The presence of debug symbols is your best guess for a program that you didn't write. It is not possible (not realistically, in a simple, automated way, anyway) to tell from a generated binary whether it has been optimized or not.

The sections `.debug$S` and `.debug$T` contain debug symbols and debug types, respectively. There are some other sections starting with `.debug` as well, but they're deprecated. A program that has been built in "debug mode" and that has not afterwards been stripped will contain some or all of these sections.
Using C++ with no external tools, you will want to skip over the DOS "MZ" stub and the PE header. After this come the section headers, which you can parse. Complete documenation of the file format can be downloaded [here](http://msdn.microsoft.com/library/windows/hardware/gg463125).
Most probably, reading the file in and doing a string match for `.debug` will be just as good.

Similarly, you can look at VERSIONINFO or the manifest file (they also allow to specify whether a program is a debug build), but these are not mandatory. You can write pretty much anything you want into these. Insofar, they're even less reliable than looking for debug symbols.

Another hint, unreliable again, would be to check what versions of system libraries a program was linked with. If it's the debug version, chances are it was a debug build. However, one could do a release build and still link with debug libraries, nothing can prevent you from doing that.

The next best guess would be the absence of calls to the CRT `assert` function (which you could do with a simple string match), since the `assert` macro (from which it's normally called) is entirely stripped out in a build with `NDEBUG` defined. No use of that symbol, no string present in the binary.
Unluckily, a program that *doesn't have* any asserts would be falsely identified as "release build" regardless of its actual build, and it is entirely possible to redefine the `assert` macro to do something completely different (such as `printf` a text and continue). And lastly, you don't know wheter some static 3rd party library that you link with (which obviously has already passed the preprocessor) contains calls to `assert` that you don't know about.

If you want to check a program that you wrote yourself, you can exploit the fact that the optimizer will completely remove things that are provably unreachable or not used. It may take 2-3 attempts to get it just right, but basically it should be as simple as defining a variable (or an exported function if your compiler/linker doesn't export symbols that aren't used) and writing two or three magic values to it from a program location that is not reachable. An optimizing compiler will at least collapse those several redundant moves into one, or more likely entirely eleminate them all.
You can then just do a binary string search for the magic values. If they're not present, it's an optimized build.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:23:53.880

这个问题非常好，并且如前所述，没有真正明显（独特）的指标来标记图像是否已调试或已发布。

正如这里和[这里所](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)[解释](https://stackoverflow.com/questions/11100855/debug-in-vs-c-with-dll-pdb-files-and-source/11103192#11103192)的，调试目录的存在并不代表图像是否已在发布模式下构建。**已发布的映像**带有调试支持是很常见的。事实上，几乎所有的 Windows 操作系统映像文件都带有调试支持（否则，不可能将这些已发布的映像与来自 Microsoft 符号服务器的符号文件链接起来）。即使这些图像是发布图像！

 **即使存在 .debug 部分（实际上，部分名称在 PE 规范中不起作用，部分的名称可以根据需要更改和设置 - 加载器不关心它！）不是发布与调试图像的指标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-21T02:32:49.130

有一个旧的反转工具叫做 LordPE。它将允许您打开两个文件并区分标题。我在 VS2008 中以 Release 和 Debug 模式编译了一个“hello world”程序并进行了比较。和其他海报一样，我没有看到任何可以作为指标的东西。

但我确实发现作为指标的是二进制文件 .text 部分中的填充。在 Debug 版本的 .text 部分中的最后一个代码字节之后，有一百多个字节的值为 0xCC。在 Release 版本中，没有 0xCC 字节。0xCC 字节将在调试器中显示为 int3 或断点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:08:27.933

当您在 Visual Studio 中创建 C++ 项目时，它会为您生成两个配置。这些配置的名称是**Debug**和**Release**。Debug 配置包括调试信息的生成、较少的优化和对 Edit&Continue 的支持。

但这只是一个起点。您可以创建任意配置，甚至可以将所有调试信息添加到发布配置。所以没有明确的 Debug 或 Release 构建。

您可以尝试识别是否`_DEBUG`定义了预处理器符号。这很少更改，并且在版本资源中使用。FILEFLAGES 字段的位 0 通常表示在编译资源时定义了符号 _DEBUG。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T10:37:37.357

由于我必须检查数百个 dll 和 exe，我尝试了 Smerlin 的建议，方法是在控制台模式下运行depends.exe（2.2 版）并在depends 生成的输出文件中搜索“MSVCRTD”。

```
Process p = new Process();
dllWalkerPath = "\""+ dllWalkerPath + "\"";
binaryFilePath = Path.GetFullPath(binaryFilePath); //path to folder containing the dll's to be verified
string exePath = Assembly.GetEntryAssembly().Location;
string outputFilePath = Path.GetDirectoryName(exePath) + dependsOutputName;
p.StartInfo = new ProcessStartInfo(dllWalkerPath, @"/c /oc:" + outputFilePath + " " + binaryFilePath) //dllWalkerPath contains the path to depends.exe 2.2
{
    UseShellExecute = false
};
p.Start();
p.WaitForExit(); 
```**

# java - 将字符串压缩成文本文件 (AES) 后解密失败

> ID：11115834
> 
> 赞同：0
> 
> 时间：2012-06-20T08:43:16.840
> 
> 标签：java, encryption, compression, zip, aes

第一次发布这个所以不要对我太苛刻（虽然我已经阅读这个论坛有一段时间了）

我在 Java 中使用 AES 遇到的问题是这样的。

首先，我需要加密一个字符串并将其写入一个文本文件然后压缩它，这没问题。我正在使用 AES 加密，并且我定义了自己的密钥，例如“123”

其次，我需要解压缩文件（或提取它？）并使用我在第一步中使用的相同密钥对其进行解密。

这里发生的是：第一步很好，但第二步解密文件失败，即使字符串结果相同，总字符，单词等

这是编写文件的代码

```
private static void inputKeFile(String input) throws IOException
{
    FileWriter fstream = new FileWriter("C:/Users/Sactio/Desktop/tyo/txtToZip.txt",false);
    BufferedWriter out = new BufferedWriter(fstream);
    out.write(input);
    //Close the output stream
    out.close();
} 
```

压缩文件

```
private static void doZip() {
        try {

            String filename ="C:/Users/Sactio/Desktop/tyo/txtToZip.txt";
            String zipfilename="C:/Users/Sactio/Desktop/OutputZipWrite";
            File file = new File(filename);
            FileInputStream fis = new FileInputStream(file);
            long length = file.length();
            byte[] buf = new byte[(int)length];
            fis.read(buf,0,buf.length);

            CRC32 crc = new CRC32();
            ZipOutputStream s = new ZipOutputStream(new FileOutputStream(zipfilename));

            s.setLevel(9);

            ZipEntry entry = new ZipEntry(filename);
            entry.setSize((long)buf.length);
            crc.reset();
            crc.update(buf);
            entry.setCrc( crc.getValue());
            s.putNextEntry(entry);
            s.write(buf, 0, buf.length);
            s.finish();
            s.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

这就是加密

```
import javax.crypto.Cipher;  
import javax.crypto.SecretKey;  
import javax.crypto.spec.SecretKeySpec;  

public class JcaTest {  
private Cipher ecipher;  
private Cipher dcipher;  

JcaTest(SecretKey key) {  
    try {  
        ecipher = Cipher.getInstance("AES");  
        dcipher = Cipher.getInstance("AES");  
        ecipher.init(Cipher.ENCRYPT_MODE, key);  
        dcipher.init(Cipher.DECRYPT_MODE, key);  
    } catch (Exception e) {  
        System.out.println("Failed in initialization");  
    }  
}  

public String encrypt(String str) {  
    try {  
        byte[] utf8 = str.getBytes("UTF-8");  
        byte[] enc = ecipher.doFinal(utf8);  

        return new sun.misc.BASE64Encoder().encode(enc);  
    } catch (Exception e) {  
        System.out.println("Failed in Encryption");  
    }  
    return null;  
}  

public String decrypt(String str) {  
    try {  
        byte[] dec = new sun.misc.BASE64Decoder().decodeBuffer(str);  

        byte[] utf8 = dcipher.doFinal(dec);  

        return new String(utf8, "UTF-8");  
    } catch (Exception e) {  
        System.out.println("Failed in Decryption");  
    }  
    return null;  
} 
```

最后是 zip 的提取器

```
private static void bacaZip(String zipfilename) throws IOException
{

    ZipInputStream zinstream = new ZipInputStream(
     new FileInputStream(zipfilename));

    File file = new File(zipfilename);
    FileInputStream fis = new FileInputStream(file);
    long length = file.length();
    byte[] buf = new byte[(int)length];

    ZipEntry zentry = zinstream.getNextEntry();
    System.out.println("Name of current Zip Entry : " + zentry + "\n");
    while (zentry != null) {
      String entryName = zentry.getName();
      System.out.println("Name of  Zip Entry : " + entryName);
      FileOutputStream outstream = new FileOutputStream("C:/Users/Sactio/Desktop/OutputZipWrite.txt");
      int n;

      while ((n = zinstream.read(buf, 0, buf.length)) > -1) {
        outstream.write(buf, 0, n);

      }
      System.out.println("Successfully Extracted File Name : "
          + entryName);
      outstream.close();

      zinstream.closeEntry();
      zentry = zinstream.getNextEntry();

    }
}

private static void extractZip(String jsonString) throws FileNotFoundException
{

    try {
        bacaZip(jsonString);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        System.err.println("Exception: "+e1);
    }
    StringBuffer contents = new StringBuffer();
    BufferedReader reader = null;

    try {
        reader = new BufferedReader(new FileReader("C:/Users/Sactio/Desktop/OutputZipWrite.txt"));
        String text = null;

        // repeat until all lines is read
        while ((text = reader.readLine()) != null) {
            contents.append(text)
                    .append(System.getProperty(
                            "line.separator"));
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (reader != null) {
                reader.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // show file contents here
    System.out.println("HASIL: "+contents.toString());
} 
```

如果我跳过压缩和文件步骤，AES 工作得很好，但如果我将字符串发送到文件中并压缩它，AES 加密会由于某种原因失败。有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:39.627

您解密的文件必须逐字节地与加密过程的输出相同。您说“即使字符串结果相同，总字符、单词等”对我来说表明您将加密文件视为文本“字符”。它**不是**文本，它是字节。将其视为文本会导致灾难，因为字符可以通过多种不同的方式表示为字节。您需要逐字节检查身份，并始终将密文视为字节，而不是字符。

正如@Thilo 指出的那样，压缩加密数据是没有用的。使用顺序压缩 -> 加密 -> 解密 -> 展开。

# wpf - 像枚举一样公开子列表

> ID：11115835
> 
> 赞同：0
> 
> 时间：2012-06-20T08:43:28.073
> 
> 标签：wpf, list

我有一个 List> itemListList 类型的列表，它在我的自定义控件中包含 ObservableCollection。

我在我的自定义控件中将这些列表公开为静态。

下面是说明我的场景的代码：

```
public static List<ObservableCollection<IItem>> itemListList;

    // 3 Panel Lists of type ObservableCollection

    public static ObservableCollection<IItem> iItemsList0;
    public static ObservableCollection<IItem> iItemsList1;
    public static ObservableCollection<IItem> iItemsList2; 
```

在客户端，这些项目将被添加到这些列表中：

```
 UI.itemListList = new List<ObservableCollection<IItem>>();

            // Adding Items to the List

        /*First Collection */

            UI.iItemsList0 = new ObservableCollection<IItem>();

            UI.iItemsList0.Add(new UC());
            UI.iItemsList0.Add(new UC());
            UI.iItemsList0.Add(new UC());

            /*Second Collections */
            UI.iItemsList1 = new ObservableCollection<IItem>();

            UI.iItemsList1.Add(new UC());
            UI.iItemsList1.Add(new UC());
            UI.iItemsList1.Add(new UC());
            UI.iItemsList1.Add(new UC());

            /*Third Collection */
            UI.iItemsList2 = new ObservableCollection<IItem>();

            UI.iItemsList2.Add(new UC());
            UI.iItemsList2.Add(new UC());
            UI.iItemsList2.Add(new UC());
            UI.iItemsList2.Add(new UC()); 
```

在控制端，

我会将这些子列表添加到 List> 类型中。

```
 UI.itemListList.Add(iItemsList0);
    UI.itemListList.Add(iItemsList1);
    UI.itemListList.Add(iItemsList2); 
```

这很好用。项目被添加到列表中，但如果您是用户，您将不知道哪些是暴露的子列表。我想修改此代码的方式是我可以告诉用户 MainList itemListList 被公开，但从那里他应该能够访问子列表。

像枚举这样的东西。我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:50:58.103

您可以使用一个`Dictionary`集合，键是枚举，值是可观察的集合：

```
public enum ListType
{
    MyFirstList,
    MySecondList
}

public static Dictionary<ListType, ObservableCollection<IItem>> Lists;

// Instantiate and populate Lists

// Get an observable collection by key
var observableCollection = UI.Lists[ListType.MyFirstList]; 
```

不过，这似乎不是一个特别好的设计，因此您可能需要重新考虑您要解决的问题。

# php - 更改了弹性 IP，现在相同的链接重定向到不同的 Amazon 实例

> ID：11115836
> 
> 赞同：0
> 
> 时间：2012-06-20T08:43:29.180
> 
> 标签：php, amazon-ec2, amazon-web-services, dns, ip

我正在运行 3 个 Amazon 实例。其中两个是免费的， type `t1.Micro`。

另一个是`m1.small`实例。

**我让我的网站在其中一个`t1.Micro`实例**上运行，并决定今天更改为那个`m1.small`。

因为我用 goDaddy 购买了我的域名，所以我这样做了：

*   我打开了我的亚马逊控制台并为我的 m1.small 实例分配了一个新的 IP 地址
*   然后我打开了我的 goDaddy 帐户并将**旧的弹性 IP 更改为新的**（在显示“A（主机）”的表中，找到 Host =“@”的条目）

问题是，现在每次我点击我网站的链接时**，我都会被重定向到新** `m1.small`实例（这很好，这是应该发生的，但是我的一个朋友，访问相同的链接会被重定向到旧实例。

为什么是这样？我还发现，如果我键入这样的链接`www.myaddress.com`而不是这样的“”，`myaddress.com`我会被重定向到一个或另一个实例

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:24:36.287

除了您的**浏览器**缓存记录外，**操作系统**还会缓存它们以及任何上游**DNS**服务器。这发生在前一个 DNS 记录的“生存时间”值之前。与此相比，更改弹性 IP 几乎是瞬时的，在我的测试中，弹性 IP 在解除关联/关联后继续路由到旧实例约 10 秒，然后在 10 秒内不可用，之后它将被路由到新实例.

我建议您使用出色的 Amazon Route53 DNS 服务，而不是依赖 GoDaddy 及其 DNS 服务器。它还可以很好地与负载均衡器和其他类似的东西配合使用。也就是说，您首先在 Route 53 中注册 myaddress.com，从 Amazon 获取 4 个名称服务器的列表，然后在 GoDaddy 中配置为名称服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:54:52.883

除了 DNS 缓存（将在几个小时后到期）之外，您真的应该让 www.yourdomain.com 成为 yourdomain.com 的别名。最初，它们很可能是指向同一个 IP 地址的两条单独的 A 记录，而现在只有一条发生了变化。

# android - proguard 后我的应用程序无法运行

> ID：11115840
> 
> 赞同：2
> 
> 时间：2012-06-20T08:43:36.613
> 
> 标签：android, proguard

我是proguard的新手，并且正在开发android应用程序，在使用默认的android proguard配置文件（来自sdk）构建之后，没有任何效果，我的假设与在运行时在R文件上查找资源的代码有关（是的丑陋扫描文件并搜索资源 ID）。我无法从 proguard 文档中了解如何防止文件被 progurad 处理。

我认为了解为什么我的应用程序失败的最佳方法是让 proguard 开始时什么都不做，然后让它一一缩小特定的东西。

所以我想知道的是如何告诉 proguard 保留我的所有课程（甚至是无法访问的代码）（这甚至可能吗？）。

然后（希望我的应用程序能正常工作）告诉他缩小和混淆特定的类。

我得到的错误是尝试动态加载 R$id 文件时找不到文件异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:09:31.530

在您的 `proguard.cfg`中，您可以强制 Proguard 保留某些类：

```
-keep class com.myapp.SomeClass { *; } 
```

甚至是整个包裹：

```
-keep class com.myapp.** { *; } 
```

对于仅从 XML 文件引用的类，您当然必须这样做。

# javascript - 在yui中获取窗口滚动或scrollY位置

> ID：11115841
> 
> 赞同：5
> 
> 时间：2012-06-20T08:43:44.423
> 
> 标签：javascript, yui

在 YUI 中，我有以下代码用于鼠标滚轮。我如何使它适用于滚动条？

```
Y.on('mousewheel', function(e) {
     var dir = e.wheelDelta > 0 ? 'Up' : 'Down';
     console.log(dir);
}); 
```

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T14:46:16.733

这是一个简单的解决方案

```
Y.on('scroll', function(e) {     
     console.log(window.scrollY);
}); 
```

# mysql - 从无 localhost 连接到 mysql 服务器

> ID：11115844
> 
> 赞同：0
> 
> 时间：2012-06-20T08:43:53.897
> 
> 标签：mysql, linux, mysqli, centos

我想从非本地主机服务器连接到 mysql 数据库。但我做不到。

我谷歌发现我应该编辑 /etc/mysql/my.cnf 但 mysql 目录在 etc 目录下不存在。

/etc 目录下只存在 mysql_mmm 并且它包含以下文件。

```
mmm_agent.conf mmm_mon.conf mmm_tools.conf    
mmm_common.conf mmm_mon_log.conf  
```

现在我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:29:47.703

检查 PS -ef | grep mysql --> 检查它使用的是哪个默认文件。您可以通过删除绑定地址来编辑该文件以实现远程访问

# symfony - Symfony2 UniqueConstraint 和 UniqueEntity（违反完整性）

> ID：11115849
> 
> 赞同：8
> 
> 时间：2012-06-20T08:44:11.930
> 
> 标签：symfony, doctrine, entity, unique, unique-constraint

几天来，我在 Doctrine 实体上遇到了一些小问题。我在两个字段上使用 UniqueConstraint 定义了它，之后在这两个字段上使用 UniqueEntity Validation。但是在通过添加已经在基础中的实体来验证我的表单之后，无法在我的表单中获取我的错误消息。

只是来自 Symfony 的一条错误消息：

> SQLSTATE [23000]：完整性约束违规：1062 键 'SIRET' 的重复条目 '339057986-00012'

这是我的实体声明，对我来说一切都很好，但也许我忘记或误解了什么？

```
<?php

namespace Proetco\FrontBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Proetco\FrontBundle\Entity\Entreprise
 *
 * @ORM\Table(name="entreprise", uniqueConstraints={@ORM\UniqueConstraint(name="SIRET", columns={"SIREN", "NIC"})}) 
 * @ORM\Entity(repositoryClass="Proetco\FrontBundle\Entity\EntrepriseRepository")
 * @UniqueEntity(fields={"SIREN","NIC"}, message="Cette entreprise est déjà enregistrée")
 */
class Entreprise {

protected $Siret;

/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $SIREN
 *
 * @ORM\Column(name="SIREN", type="string", length=9)
 */
private $SIREN;

/**
 * @var string $NIC
 *
 * @ORM\Column(name="NIC", type="string", length=5)
 */
private $NIC;

/**
 * @var string $RS
 *
 * @ORM\Column(name="RS", type="string", length=45, nullable=true)
 */
private $RS;

/**
 * @var string $NCOM
 *
 * @ORM\Column(name="NCOM", type="string", length=45, nullable=true)
 */
private $NCOM;

/**
 * @var string $CPOS
 *
 * @ORM\Column(name="CPOS", type="string", length=5, nullable=true)
 */
private $CPOS;

/**
 * @var string $LCOM
 *
 * @ORM\Column(name="LCOM", type="string", length=45, nullable=true)
 */
private $LCOM;

/**
 * @var string $INSEE
 *
 * @ORM\Column(name="INSEE", type="string", length=5, nullable=true, nullable=true)
 */
private $INSEE;

/**
 * @var string $DEP
 *
 * @ORM\Column(name="DEP", type="string", length=2)
 */
private $DEP;

/**
 * @var string $ARR
 *
 * @ORM\Column(name="ARR", type="string", length=1, nullable=true)
 */
private $ARR;

/**
 * @var string $CAN
 *
 * @ORM\Column(name="CAN", type="string", length=2, nullable=true)
 */
private $CAN;

public function getSiret()
{
    return $this->Siret;
}

public function setSiret($Siret)
{
    $this->Siret = $Siret;
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set SIREN
 *
 * @param string $sIREN
 */
public function setSIREN($sIREN)
{
    $this->SIREN = $sIREN;
}

/**
 * Get SIREN
 *
 * @return string 
 */
public function getSIREN()
{
    return $this->SIREN;
}

/**
 * Set NIC
 *
 * @param string $nIC
 */
public function setNIC($nIC)
{
    $this->NIC = $nIC;
}

/**
 * Get NIC
 *
 * @return string 
 */
public function getNIC()
{
    return $this->NIC;
}

/**
 * Set RS
 *
 * @param string $rS
 */
public function setRS($rS)
{
    $this->RS = $rS;
}

/**
 * Get RS
 *
 * @return string 
 */
public function getRS()
{
    return $this->RS;
}

/**
 * Set NCOM
 *
 * @param string $nCOM
 */
public function setNCOM($nCOM)
{
    $this->NCOM = $nCOM;
}

/**
 * Get NCOM
 *
 * @return string 
 */
public function getNCOM()
{
    return $this->NCOM;
}

/**
 * Set CPOS
 *
 * @param string $cPOS
 */
public function setCPOS($cPOS)
{
    $this->CPOS = $cPOS;
}

/**
 * Get CPOS
 *
 * @return string 
 */
public function getCPOS()
{
    return $this->CPOS;
}

/**
 * Set LCOM
 *
 * @param string $lCOM
 */
public function setLCOM($lCOM)
{
    $this->LCOM = $lCOM;
}

/**
 * Get LCOM
 *
 * @return string 
 */
public function getLCOM()
{
    return $this->LCOM;
}

/**
 * Set INSEE
 *
 * @param string $iNSEE
 */
public function setINSEE($iNSEE)
{
    $this->INSEE = $iNSEE;
}

/**
 * Get INSEE
 *
 * @return string 
 */
public function getINSEE()
{
    return $this->INSEE;
}

/**
 * Set DEP
 *
 * @param string $dEP
 */
public function setDEP($dEP)
{
    if (!isset($this->DEP))
        $this->DEP = '02';
    $this->DEP = $dEP;
}

/**
 * Get DEP
 *
 * @return string 
 */
public function getDEP()
{
    if (!isset($this->DEP))
        $this->DEP = '02';
    return $this->DEP;
}

/**
 * Set ARR
 *
 * @param string $aRR
 */
public function setARR($aRR)
{
    $this->ARR = $aRR;
}

/**
 * Get ARR
 *
 * @return string 
 */
public function getARR()
{
    return $this->ARR;
}

/**
 * Set CAN
 *
 * @param string $cAN
 */
public function setCAN($cAN)
{
    $this->CAN = $cAN;
}

/**
 * Get CAN
 *
 * @return string 
 */
public function getCAN()
{
    return $this->CAN;
}

public function retrieveSiren($siret)
{
    return substr($siret, 0, 9);
}

public function retrieveNic($siret)
{
    return substr($siret, -5, 5);
}

//contraintes de validation
//TODO : valider les champs avec Regex

public function isSIREN()
{

}

public function isNIC()
{

}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-06T09:13:58.577

在这里回复为时已晚，但仍然回复，以便可以帮助遇到同样问题的其他人。

## 两件事情

*   除非您想从您的实体生成架构更改查询，否则不需要[UniqueConstraint 。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#uniqueconstraint)
*   [UniqueEntity](https://symfony.com/doc/current/reference/constraints/UniqueEntity.html)是您所需要的。

* * *

## 简答

问题中的实体定义看起来不错，我认为可能存在以下两个问题。

*   您添加了`fields={"SIREN","NIC"}`这意味着它们将共同唯一，但您可能希望它们单独唯一
*   或者您可能没有验证实体，我认为这不太可能，但我仍然想接受检查 `https://symfony.com/doc/current/validation.html#using-the-validator-service`

## 下面详细解释

请注意，我摆脱了`, uniqueConstraints={@ORM\UniqueConstraint(name="SIRET", columns={"SIREN", "NIC"})}`注释`@ORM/Table`（因为除非您想从实体中生成模式定义，否则不需要 UniqueConstraint）

```
<?php

namespace Proetco\FrontBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Proetco\FrontBundle\Entity\Entreprise
 *
 * @ORM\Table(name="entreprise") 
 * @ORM\Entity(repositoryClass="Proetco\FrontBundle\Entity\EntrepriseRepository")
 * @UniqueEntity(fields={"SIREN","NIC"}, message="Cette entreprise est déjà enregistrée")
 */
class Entreprise {
    /**
     * Body of entity
     */
} 
```

* * *

这也`fields={"SIREN","NIC"}`意味着您希望这两个列一起是唯一的如果您希望它们中的每一个都是唯一的，那么您将需要两个`UniqueEntity`

像下面的东西

```
/**
 * @ORM\Table(name="entreprise") 
 * @ORM\Entity(repositoryClass="Proetco\FrontBundle\Entity\EntrepriseRepository")
 * @UniqueEntity(fields={"SIREN"}, message="Cette entreprise est déjà enregistrée")
 * @UniqueEntity(fields={"NIC"}, message="Cette entreprise est déjà enregistrée")
 */ 
```

* * *

完成上述设置后，您需要验证实体并处理表单中的错误

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T15:34:33.163

Why not putting `unique=true`?
Like that :

```
/**
 * @var string $SIREN
 *
 * @ORM\Column(name="SIREN", type="string", length=9,unique=true)
 */
private $SIREN;

/**
 * @var string $NIC
 *
 * @ORM\Column(name="NIC", type="string", length=5,unique=true)
 */
private $NIC; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-18T11:11:15.997

并且添加“unique=true”不允许正确捕获错误。我有同样的问题。如果我找到原因，我会回来告诉它。也许它会帮助某人......

**编辑：（**现在是答案）。我看到了很多帖子，但我没有找到任何好的解决方案。这似乎是一个错误：[https ://groups.google.com/forum/#!topic/symfony2/veb6Leph2_w](https://groups.google.com/forum/#!topic/symfony2/veb6Leph2_w)

所以我使用了相同的解决方案：try/catch。我只需要假设数据库抛出的唯一异常是违反唯一约束...

```
// ...
try {
 $this->persistAndFlush($user);

 return $this->redirect($this->generateUrl('publish'));
}
catch (\PDOException $e) {
 $error = $this->trans('user.username.notUnique',array(),'validators');
}
// ... 
```

这并不令人满意，但它确实有效。今天我为此浪费了足够的时间。

**对 vegemite4me 的回答：**抱歉，我不熟悉 Stackoverflow。我没有找到“评论”按钮，而现在，我唯一能看到的就是回复你的那个。但它不起作用......要么我不走运，要么我是一个菜鸟，或者表格做得非常非常糟糕。应该是这三个

# animation - 具有全高/全宽的跨浏览器三角形 div

> ID：11115852
> 
> 赞同：1
> 
> 时间：2012-06-20T08:44:18.527
> 
> 标签：animation, html, rotation, transform

有什么方法可以在下面的 img 上显示 [http://img338.imageshack.us/img338/6953/rotanim1.gif](http://img338.imageshack.us/img338/6953/rotanim1.gif)

两个全高 div 和 50% 宽。在中心 div 上是边界上的一些半径。文本覆盖在每个 div 上。当我单击链接 1 时，我想制作 jquery 动画技巧，整个右侧的白色边在左侧：0px。黑色左侧也是如此 - 然后一切都完全正确。

我尝试制作一些 -webkit-transform: (XXdeg) 但随后 div 内的整个文本也被旋转了。我尝试使用 css 边框技巧，但我认为这不是一个好主意。

这个案子有什么解决办法吗？对不起我的英语不好。希望你能理解我的想法：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:46:54.410

有许多技巧可以在 css 中使用倾斜形状（例如，参见[this](http://css-tricks.com/examples/ShapesOfCSS/)）。

因此，您可能可以使用 css+js 构建一个具有类似效果的解决方案，但事实是这将难以维护并且不支持轻微的进化。

在您的情况下，我建议您使用[SVG](https://developer.mozilla.org/en/SVG)或[canvas](https://developer.mozilla.org/en/HTML/Canvas)。您可以使用 javascript 轻松准确地控制这两种解决方案。如果需要，您可以使用 z-index 在其上显示其他 html/css 元素。

# asp.net - ASP.Net Webservice 500 - 内部服务器错误

> ID：11115857
> 
> 赞同：0
> 
> 时间：2012-06-20T08:44:54.597
> 
> 标签：asp.net, web-services, asmx

我已经创建了一个 Web 服务，并且我在本地机器上的 IIS7 中进行了托管，它可以正常工作并且可以在 LAN 中使用。然后我将它托管在付费的 Microsoft 网络服务器中，但是一旦我在浏览器上打开 .asmx 或任何其他页面，它就会给出以下错误消息

500内部服务器错误。您要查找的资源有问题，无法显示。

我的 web.config 如下所示。

```
<?xml version="1.0"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
    <appSettings>
    </appSettings>
    <connectionStrings/>
    <system.web>
        <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
        <compilation debug="true" targetFramework="4.0">
        </compilation>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows"/>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/></system.web>
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:55:20.167

好的，我们必须看看是什么问题或导致错误的原因。所以要开始添加这一行

```
<customErrors mode="Off"/> 
```

在下面

```
<authentication mode="Windows"/> 
```

在您的 web.config 文件中。

然后尝试加载您的页面，它应该会生成详细的错误消息以及错误发生的确切位置，即哪一行代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T07:37:53.970

在代码的 ajax 部分检查您的 url（网络服务地址）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:51:34.160

5xx 错误是内部错误，通常与您的代码或服务器中的某些配置缺失有关，因为它是付费主机我想您的代码有问题，请尝试启用详细的错误页面。将此添加到您的 web.config

```
 <system.web>
    <customErrors mode="Off">
   </system.web> 
```

请记住在完成调试后更改此选项

# redis - Redis 客户端广播问题（在 Socket.IO 的上下文中）

> ID：11115863
> 
> 赞同：2
> 
> 时间：2012-06-20T08:45:10.977
> 
> 标签：redis, socket.io, scalability, publish-subscribe, disconnect

所以我读过一些关于缩放 Socket.IO 的文章。由于各种原因，我不想使用内置的 Socket.IO 缩放机制（主要是它似乎效率低下，因为它向 Redis 发布了更多的东西，然后从我的角度来看需要）。

所以我想出了这个简单的想法：

每个 Socket.IO 服务器创建 Redis 发布/订阅/存储客户端，连接到 Redis 并订阅一个频道。现在，当我想广播数据时，我只需将其发布到 Redis，所有其他 Socket.IO 服务器都会获取它并将其推送给用户。

但是有一个问题（我认为这也是 Socket.IO 内置机制的问题）。假设我想知道所有连接用户的数量。至少有两种方法可以做到这一点：

1.  服务器 A 发布`give_me_clients`到 Redis。然后每个 Socket.IO 服务器计算连接数并发布`number_of_clients`。服务器 A 抓取这些数据，将其组合起来并发送给客户端。

2.  每当用户连接/断开服务器时，Redis 中的每个服务器都会更新`number_of_clients_for::ID_HERE`。然后服务器 A 只是获取数据并组合它。可能效率更高。

但是，这些解决方案存在问题：

1.  服务器 A 不知道其他服务器。所以他不知道什么时候该停止听`number_of_clients`。可以通过让服务器 A 了解其他服务器来修复它：每当服务器连接到 Redis 时，他就会发布`new_server`（服务器 A 抓取数据并将其存储在内存中）。但是，当 Redis - Socket.IO 连接中断时该怎么办？Redis 有没有办法通知客户端其中一个客户端已断开连接？

2.  其实和上面一样。当 Socket.IO 服务器崩溃时如何清除`number_of_clients`数据？

所以真正的问题是：Redis 是否可以通知（发布到 chanel）客户端与其中一个的连接刚刚结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:02:50.197

经过大量测试，Redis 似乎没有这样的功能。我还发现，扩展 Socket.IO 真的很痛苦。

所以我已经从 Socket.IO 切换到 WS（见[这个链接](https://github.com/einaros/ws)）。它是低级的（但非常适合我的使用），它只支持 WebSockets（在所有主要版本中）。但话又说回来，我只想支持 WebSockets 和 FlashSocket（我必须手动实现，但这很好）。

优点是我可以很容易地用这样的服务器创建集群。HAProxy 几乎可以开箱即用地与此类服务器一起使用（一些小的调整）。服务器可以轻松地在本地网络上进行通信（如果集群很大，则使用 UDP 或中央 TCP 服务器）。

缺点是必须手动实现一些很酷的功能，如心跳、广播、房间等。你也想要长轮询后备，但在我的情况下这很好。缩放仍然更重要，恕我直言。

# jquery - jQuery live 方法有什么问题？

> ID：11115864
> 
> 赞同：30
> 
> 时间：2012-06-20T08:45:10.787
> 
> 标签：jquery

该[`live()`](http://api.jquery.com/live/)方法在 jQuery 1.7 中已弃用。jQuery 文档现在推荐

> 用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.

我了解如何`on`和`delegate`工作，但我不明白为什么它们更好。`live()`更简单，更易于使用。

`live`是否有被弃用的原因？其他方法如何更好？如果我继续使用会不会有什么不好的事情发生`live`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-20T08:49:23.363

请参阅此处的一些解释：

> ~~[http://www.ultimatewebtips.com/why-jquery-live-is-a-bad-option-to-use/](http://www.ultimatewebtips.com/why-jquery-live-is-a-bad-option-to-use/)~~（网站似乎已关闭）

**引用：**

1.  您不能`.live()`用于可重复使用的小部件。

2.  `.stopPropagation()`不适用于直播。

3.  `.live()`速度较慢。

4.  `.live()`不可链接。

**进一步**的美妙之`.on()`处在于它很好地简化了所有事件：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

D'uh 你知道 api 链接，看看是如何`.on()`工作的 :)

**引用：**

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T08:54:37.213

`live()`效率低下有两个原因：

*   在构造`$('selector').live()`中，jQuery 首先必须选择所有元素。但是，在调用 时`live()`，它只需要 jQuery 对象的选择器（存储在 中`.selector`），实际上并不使用任何被选择的元素。因此，先选择所有匹配的元素然后不使用它们有点浪费。`on()`并将`delegate()`目标选择器作为*参数*，这意味着没有预先选择目标元素，并且仅在触发事件时才进行测试。
*   `live()`默认情况下绑定在`document`级别，因此所有事件都需要通过整个 DOM 冒泡。您*可以*通过使用 指定上下文来缩小范围`$(selector, context).live()`，但最好使用`on()`或`delegate()`。

编写新代码时，强烈建议使用 latest 和 best`on()`而不是`delegate()`deprecated `live()`。但是，我认为不会`live()`很快放弃对 的支持（如果有的话），因为很多脚本都依赖它。`live()`此外，使用over并没有真正的缺点`on()`，因为 jQuery 源代码本身`live()`定义为：

```
live: function( types, data, fn ) {
    jQuery( this.context ).on( types, this.selector, data, fn );
    return this;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T08:59:22.577

该方法有两个主要问题`live`：

1.  它在文档级别附加所有事件处理程序，因此任何冒泡到文档的事件都必须与所有实时事件的事件类型和选择器相匹配。如果你有很多事件，页面会很慢。您应该使用`delegate`或`on`限制检查事件的范围。

2.  对于选择器如何与库中的其他方法一起使用，该方法的使用并不典型。您只能在使用选择器创建的 jQuery 对象上使用它。当您向方法提供选择器时， `delegate`and`on`方法使这很自然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T08:47:32.383

我很确定这是由于`.live()`. 这很方便，但使用它是一种不好的做法，因为它会迫使您的浏览器在大多数情况下搜索比需要更多的事件。

默认情况下，不是在整个文档中搜索某个事件，而是搜索特定容器的数据效率更高。

`live()`确实使用起来很方便，而且大多数 os uf 从未注意到使用它的任何缺陷。`bind()`在我看来，这基本上是一种改善。

但在很多时候，我们必须适应并更清楚我们的代码需要执行什么。

这就像问自己为什么必须导入东西，为什么不是在开始时导入所有东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T08:49:30.850

`live()`将处理程序附加到文档，这基本上会导致拦截给定类型的*所有*事件，从而产生搜索与选择器匹配的元素的成本。使用`delegate()`和`on()`，建议您附加到更靠近预期目标的位置（如果可能，在其直接父级中），从而缩小处理事件的数量，并分别搜索匹配的目标。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T08:50:02.207

这是[Paul Irish](http://paulirish.com/2010/on-jquery-live/)关于 live() 性能和限制的详细文章。

如果您继续使用`live`，如果您升级项目中的 jQuery 库，您的代码迟早将无法工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T08:51:03.620

`$('some selector').live(' ... ', handler)`

是相同的

`$(document).on(' ... ', 'some selector', handler)`

因此，当您使用时，`live`您实际上将所有处理程序分配给 DOM 树的根。这样做有两个缺点：

1.  将处理程序附加到 DOM 根会增加事件在冒泡时必须遍历的路径。这将以不好的方式影响性能。
2.  最后的其他处理程序`return false`会阻止`live`处理程序触发的风险增加。

# c++ - 如何使用 C++ 在 QT 中添加搜索菜单？

> ID：11115866
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:45:14.940
> 
> 标签：c++, qt

在文件菜单旁边，我想添加一个搜索菜单，其中有一个空格，我们将在其中输入 ID，然后按 Enter 后，它将返回行号或突出显示输入 ID 所在的行。此功能可能看起来相似ctrl+f 的作用，但唯一的事情是我想将此功能添加为菜单，以便人们可以在其中输入 ID。***我正在谈论的行是一个表，因为我正在创建一个包含两列 ID 和消息的表，我只想根据第 1 列（即 ID）从中搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:16:19.450

懒惰问题的懒惰答案。

您可以尝试调整[文本查找器示例](http://qt-project.org/doc/qt-4.8/uitools-textfinder.html)以使用您的表单。

# c# - 我想创建一个事件处理程序

> ID：11115871
> 
> 赞同：0
> 
> 时间：2012-06-20T08:45:32.117
> 
> 标签：c#, event-handling

> **可能重复：**
> [为 Web 浏览器控件创建 OnScroll 事件处理程序](https://stackoverflow.com/questions/11115043/create-event-handler-for-onscroll-for-web-browser-control)

我想为 web 浏览器控件**滚动**创建一个事件处理程序。

```
webCompareSQL.Document.Window.Scroll 
```

有人可以告诉我如何创建事件处理程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:49:41.723

在类中添加一个委托和一个事件，通常是一个简单的内部方法，用于检查 null 并调用事件：

```
public delegate void ScrollHandler();
public event ScrollHandler Scrolled;
internal void OnScrolled()
{
    if (this.Scrolled != null)
        this.Scrolled();
} 
```

然后在实际代码中，您将使用以下方法为事件注册一个方法：

```
MyClass.Scrolled += new ScrollHandler(MyMethod);

void MyMethod()
{
    Console.WriteLine("It was scrolled.");
} 
```

# extjs - 如何使用 getById？(ExtJS 4.1)

> ID：11115873
> 
> 赞同：0
> 
> 时间：2012-06-20T08:45:54.717
> 
> 标签：extjs, extjs4.1

我想通过查找它的[id](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.AbstractElement-method-getById)来获取数字字段的原始值。这里原始值是 4，numberfield 的 id是[satirSayisi](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Number-cfg-id)。

![尝试通过查找 numberfield 的 id 从不同位置获取 number 字段的值](../Images/9e9eaf2c5edaf3470d225a947a4418d8.png)

我尝试了几种组合，但没有奏效。

```
grid.header.getById('satirSayisi').getRawValue() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:43:33.007

```
Ext.getCmp('satirSayisi').getRawValue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:24:12.097

你的例子有点缺乏细节，但我想我已经明白了。您有一个网格，并且您想要 1) 获取选择，2) 从此选择中获取模型，以便您可以 3) 获取数字字段 (satirSayisi) 的值。我假设 satirSayisi 是模型中的列名，而不一定是 id 或 itemId 属性。

假设您在网格上有一个句柄，您可以从选择中获取一个模型，如下所示：

```
var model = grid.getSelectionModel().getSelection(); 
```

现在您有一个模型实例（它应该以某种方式对应于您的数据库列）。要从 satirSayisi 获得价值，您会说：

```
var stuff = model.get('satirSayisi'); 
```

不再推荐在 ExtJS 中通过 Id 访问组件。他们建议使用 itemId 而不是 id。访问对象的更好方法是 ComponentQuery，例如...

```
component = Ext.ComponentQuery.query('button#Save')[0]; 
```

此示例将为您提供应用程序中第一个按钮类型对象的句柄，其中 itemId 为 Save。它总是会抓取数组中的东西，即使只有一个结果。

祝你好运！

# git - hudson 的 poll scm 支持 git 吗？

> ID：11115877
> 
> 赞同：2
> 
> 时间：2012-06-20T08:46:11.007
> 
> 标签：git, hudson

我在 hudson 中配置了一个作业以使用“poll scm”方法触发构建，但是，它似乎不起作用。

有没有人遇到过这样的问题？我在哪里可以获得有关此类问题的相关日志？

谁能告诉我如何诊断这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:18:34.493

查看作业时，边栏中有一个“Git Polling Log”链接：

![Jenkins 中的 Git 轮询日志](../Images/2d3375f1d48fd86cc8b41d1422984b99.png)

如果出现问题，这通常会显示有用的错误（或指示轮询是否没有像您期望的那样定期发生 - 检查时间戳）

“一切正常”的日志如下所示：

```
Started on Jun 20, 2012 10:11:27 PM
Using strategy: Default
[poll] Last Build : #1
[poll] Last Built Revision: Revision c5d36c91be40b9dbeed44d6649a3535ad0a524ac (origin/master)
Fetching changes from the remote Git repositories
Fetching upstream changes from https://example/repo.git
Polling for changes in
Done. Took 1.2 sec
No changes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:53:39.727

您必须指定时间表才能使其正常工作。例如我正在使用

```
* * * * * 
```

这样，当我将新提交推送到分支时，构建就开始了

![在此处输入图像描述](../Images/6e8919f926b94a24743e5be1c53b933f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:13:43.507

请注意，对于不工作的“轮询 SCM”选项，存在未决（或已关闭的“非复制”）错误：

*   Hudson：“ [5677：git scm 未检测到上游仓库主分支上的更改](http://issues.hudson-ci.org/browse/HUDSON-5677)”
*   詹金斯：“ [5677：git scm 未检测到上游仓库主分支上的更改](https://issues.jenkins-ci.org/browse/JENKINS-5677)”

两者之间的评论略有不同，有以下线索：

> 我已经解决了这个问题；似乎当插件尝试调用“ `git tag -l master`”时，如果 git 版本 1.5.2.5 上没有标签，它将以非零状态退出
> 
> 我已经将我们的 git 版本升级到 1.7.5-rc1，并且当没有名为 master 的标签时它不再失败。
> 
> 也许不应该检查“”的退出状态`git tag -l master`，或者应该强制执行特定的 git 版本（它在文档中吗？很抱歉我没有阅读它们......）

# iphone - 如何将 ARCHS_STANDARD_32_BIT 更改为 i386？

> ID：11115882
> 
> 赞同：0
> 
> 时间：2012-06-20T08:46:26.140
> 
> 标签：iphone, cpu-architecture

为 iOS 设备构建应用程序，因此需要将架构从 armv7、armv6 更改为 i386。

如何改变它？

或者

如何为 i386 架构构建应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:02:00.897

您可以在架构下的构建设置中更改架构（您可能还需要修改有效架构？）。请注意，如果您正在为 iOS 设备构建，那么您需要为 armv6 和 armv7 而​​不是 i386 构建。您可以为每个目标以及整个项目（在项目下）设置不同的架构类型。

![建筑学](../Images/b1a9544625fd6bb4fbced6e759ddffd8.png)

# java - 想写动态域验证...是否可以动态声明注释@not null？

> ID：11115883
> 
> 赞同：1
> 
> 时间：2012-06-20T08:46:29.700
> 
> 标签：java, spring, annotations

我正在 spring mvc 中编写一个模型类。我想做域验证。

在域类中，我有 3 个变量，比如 isABCApplicable、a​​bcValue1、abcValue2：

```
private Boolean isABCApplicable;

private BigDecimal abcValue1;

private BigDecimal abcValue2; 
```

.......吸气剂和二传手......

**现在我的目标是**：

如果 isABCApplicable 为真，那么我想将 abcValue1 设为

```
@NotNull
 abcValue1 
```

和

```
@NotNull 
abcValue2 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:00:34.560

我相信这可以通过**字节码检测**来实现。ASM 就是这样一种工具，您可以使用它来操作 Java 字节码。看看[http://asm.ow2.org/index.html](http://asm.ow2.org/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:05:07.197

为什么要使用注释？
为您的模型对象创建自己的 DataBinder 并在对象构造函数中进行所有验证。
或者，如果您真的想要注释，您可以编写自己的约束，例如 @NotNullIfApplicable，有关详细信息，请参阅[使用 Hibernate Validator (JSR 303)](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)进行跨字段验证。

# iphone - 运行时警告

> ID：11115888
> 
> 赞同：0
> 
> 时间：2012-06-20T08:46:37.047
> 
> 标签：iphone, objective-c, xcode

我正在为我工​​作的公司开发一个他们可以使用的框架，如果他们说将错误的参数传递给我制作的方法，我希望能够将一些运行时警告打印到控制台，比如如果当他们应该通过 self 时，他们通过 nil。我知道我可以做 NSLog() 和预处理器#warning。但是我还能做些什么来警告用户，因为#warning 将始终显示在编辑器中，除非我将它放在某个预处理器 if 语句中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:45:34.660

你应该使用`NSAssert`这个。如果在调试模式下，它将停止执行，在没有调试器的情况下运行时，它会将错误打印到设备日志中。

```
- (void)someSelector:(id)param)
{
    NSAssert(param != nil, @"Parameter should always be non-nil");
    // do stuff with param
} 
```

如果您愿意，您也可以使用 编译发布`NS_BLOCK_ASSERTIONS`，那么根本不会出现任何断言（不会打印任何内容，甚至不会编译测试）。这样您就可以避免在最终产品中检查它的开销。

# c# - 运行时的 Xtra Grid 排序数据？

> ID：11115891
> 
> 赞同：2
> 
> 时间：2012-06-20T08:46:45.750
> 
> 标签：c#, .net, xtragrid

我的表格上有一个`xtragrid`（比如说`myXtraGrid`）

我绑定一个`datatable`：

```
myXtraGrid.DataSource = dtMyDataTable;

myXtraGrid.BestFitColumns(); 
```

假设我只有一个命名`column`，它具有以下三个数据：`datatable``"My Column"``rows`

```
My Column
------
3
1
2 
```

比上`grid (on runtime)`，我点击`column header (My Column)`并排序数据

```
(3 1 2) ascending: (1 2 3) 
```

我的问题是；如何获得排序后的数据，`Datatable`如下所示？

```
My Column
------
1
2
3 
```

我`runtime`必须得到排序的数据并处理它。

谢谢朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:55:04.747

你可以制作一个`DataView`.

```
myDataView dvMyView = new DataView(myDataTable); 
```

这`DataView`可以通过以下方式排序：

```
dvMyView.Sort = " MyColumn ASC "; 
```

所以你有一个排序的`DataView`，你可以很容易地`DataTable`再次转换为：

```
myDataTable = dvMyView.toTable(); 
```

现在你有一个排序的`DataSource`:-)

PS 在我看来，最佳实践是创建一个`objectlist (List<myClass>)`. 这`Objectlist`可以排序。另一个优点是 Grid 中更改的值会直接更改 List 中的对象！

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:55:28.823

您可以使用`DefaultView`和`Datatable`排序视图，稍后可以转换为表格

```
if (dtMyDataTable.Rows.Count > 0)
{
DataView dv = dtMyDataTable.DefaultView;
dv.Sort = "cy_column ASC";
dtMyDataTable= dv.ToTable();
} 
```

# android - 如何在android中记录屏幕导航？

> ID：11115897
> 
> 赞同：2
> 
> 时间：2012-06-20T08:47:01.843
> 
> 标签：android, record, screens

我正在开发一个应用程序，它可以捕获屏幕截图并将屏幕记录为视频，而无需植根设备。

我尝试了以下链接中给出的 ASL 演示

[http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)

它仅用于截取屏幕截图。如何在android中录制屏幕？

提前致谢。

# android - 由于模拟器超时，安装失败

> ID：11115899
> 
> 赞同：32
> 
> 时间：2012-06-20T08:47:11.210
> 
> 标签：android, android-emulator, timeout

尝试从 Eclipse 安装 .apk 时，无论是安装到 android 模拟器还是物理设备（通过 USB），我都会收到“无法在设备 '*' 上安装 *.apk：超时”错误。在模拟器或物理设备（三星 Galaxy S2，已植根）上找不到 .apk。

如果我避免使用 Eclipse，而只使用命令行，我也无法安装 .apk。

# 为什么要在这方面发新帖？

还有其他几个 stackoverflow 帖子引用了“无法安装...”错误。我创建了一个新帖子有几个原因：

*   其他大部分帖子都不详细。
*   突出的相关帖子，[Android 错误：无法在设备上安装 *.apk *: timeout](https://stackoverflow.com/questions/4775603/android-error-failed-to-install-apk-on-device-timeout)，对于原始海报，仅适用于物理设备连接。所以这是一个不同的情况，尽管有相似的症状。
*   我已经尝试过该帖子中的所有候选解决方案以及其他几个解决方案。这些在“我尝试过的候选解决方案”下列出。

这篇文章很长，因为我采取的步骤很长，正如错误所保证的那样。如果您不想阅读或至少扫描此帖子，请不要发表评论。

# 我的环境

主机操作系统：Windows XP SP3

JAVA：Java SDK 版本 1.6.0_32

WINDOWS 环境变量：

`JAVA_HOME=C:\Program Files\Java\jdk1.6.0_33;`

`PATH=...;%JAVA_HOME%\bin\;C:\android\android-sdk\tools;C:\android\android-sdk\platform-tools\;...;C:\Program Files\apache-ant-1.8.2\bin;...;`

IDE：Eclipse（安装经典）Indigo。版本 3.7.2

安卓 SDK

*   Android SDK 工具修订版：20。（主要使用修订版 19 进行测试）。
*   Android SDK 平台工具：11。
*   ADT 插件（“Android 开发工具包”，Eclipse 插件）版本：20.0.0.v201206010423-369331（也与之前的版本 18.0.0.v201203301501-306762）。
*   您的项目所针对的平台和在模拟器中运行的平台版本。尝试了每一个：
    *   安卓 4.0.3 (API 15)
    *   安卓 2.2 (API 8)
    *   安卓 2.1 (API 7)

移动设备：运行 Android Ice Cream Sandwhich (ICS) 4.0.3 的三星 Galaxy S2

蚂蚁：1.8.2

# 我经历的产生错误的步骤。

使用 Eclipse 尝试将 .apk 安装到模拟器：

*   打开 Eclipse（它加载了我的工作区，其中包含一个 android 应用程序）。
*   使用之前配置的运行配置运行我的 android 应用程序。
*   “Android 设备选择器”启动（我已将运行配置设置为手动启动）。
*   在 Android 设备选择器中，我选择我的 avd（针对 Android 2.2），然后单击确定。
*   模拟器以“5554:jlbavd2_2”打开。我的 AVD 名称是“jlbavd2_2”。
*   我让模拟器保持打开状态。在 Eclipse 中，我打开 DDMS 视图。在“设备”窗格中，单击白色三角形并选择“重置 adb”。

在 Eclipse 控制台，Android 视图中，我得到

```
[2012-06-19 19:20:52 - MyApp] Starting full Post Compiler.
[2012-06-19 19:20:52 - MyApp] ------------------------------
[2012-06-19 19:20:52 - MyApp] Android Launch!
[2012-06-19 19:20:52 - MyApp] adb is running normally.
[2012-06-19 19:20:52 - MyApp] Performing au.com.myorg.myapp.MyAppActivity activity launch
[2012-06-19 19:20:52 - MyApp] Refreshing resource folders.
[2012-06-19 19:20:52 - MyApp] Starting incremental Pre Compiler: Checking resource changes.
[2012-06-19 19:20:52 - MyApp] Nothing to pre compile!
[2012-06-19 19:20:53 - MyApp] Starting incremental Package build: Checking resource changes.
[2012-06-19 19:20:53 - MyApp] Skipping over Post Compiler.
[2012-06-19 19:20:59 - MyApp] Launching a new emulator with Virtual Device 'jlbavd'
[2012-06-19 19:22:29 - MyApp] New emulator found: emulator-5554
[2012-06-19 19:22:29 - MyApp] Waiting for HOME ('android.process.acore') to be launched...
[2012-06-19 19:22:44 - MyApp] HOME is up on device 'emulator-5554'
[2012-06-19 19:22:44 - MyApp] Uploading MyApp.apk onto device 'emulator-5554'
[2012-06-19 19:22:49 - MyApp] Failed to install MyApp.apk on device 'emulator-5554': timeout
[2012-06-19 19:22:49 - MyApp] Launch canceled! 
```

在 Eclipse 控制台的 DDMS 输出中，我得到：

```
...
[2012-06-19 19:22:44 - ddm-hello] handling HELO
[2012-06-19 19:22:44 - ddm-hello] HELO: v=1, pid=150, vm='Dalvik v1.2.0', app='android.process.acore'
[2012-06-19 19:22:44 - MyApp.apk] Uploading MyApp.apk onto device 'emulator-5554'
[2012-06-19 19:22:44 - Device] Uploading file onto device 'emulator-5554'
[2012-06-19 19:22:49 - ddms] write: timeout
[2012-06-19 19:22:49 - Device] Error during Sync: timeout.
[2012-06-19 19:22:49 - ddms] Removing req 0x4000002d from set 
```

有时（也许我做的步骤略有不同）我得到：

```
[2012-06-16 14:20:02 - MyFirstApp02] Starting full Post Compiler.
[2012-06-16 14:20:02 - MyFirstApp02] ------------------------------
[2012-06-16 14:20:02 - MyFirstApp02] Android Launch!
[2012-06-16 14:20:02 - MyFirstApp02] adb is running normally.
[2012-06-16 14:20:02 - MyFirstApp02] Performing au.com.myorg.MyFirstApp02Activity activity launch
[2012-06-16 14:20:08 - MyFirstApp02] Launching a new emulator with Virtual Device 'jlbavd2_2'
[2012-06-16 14:20:17 - Emulator] bind: Unknown error
[2012-06-16 14:20:17 - MyFirstApp02] New emulator found: emulator-5556
[2012-06-16 14:20:17 - MyFirstApp02] Waiting for HOME ('android.process.acore') to be launched...
[2012-06-16 14:20:38 - MyFirstApp02] HOME is up on device 'emulator-5556'
[2012-06-16 14:20:38 - MyFirstApp02] Uploading MyFirstApp02.apk onto device 'emulator-5556'
[2012-06-16 14:20:50 - MyFirstApp02] Failed to install MyFirstApp02.apk on device 'emulator-5556': timeout
[2012-06-16 14:20:50 - MyFirstApp02] Launch canceled! 
```

注意“绑定：未知错误”。有时会发生此错误，有时不会。

如果我将以太网电缆拔出到我的硬件路由器，我会得到以下信息：

```
[2012-06-19 23:27:29 - MyApp] Android Launch!
[2012-06-19 23:27:29 - MyApp] adb is running normally.
[2012-06-19 23:27:29 - MyApp] Performing au.com.softmake.myapp.MyAppActivity activity launch
[2012-06-19 23:27:29 - MyApp] Refreshing resource folders.
[2012-06-19 23:27:29 - MyApp] Starting incremental Pre Compiler: Checking resource changes.
[2012-06-19 23:27:29 - MyApp] Nothing to pre compile!
[2012-06-19 23:27:33 - MyApp] Launching a new emulator with Virtual Device 'jlbavd'
[2012-06-19 23:27:40 - Emulator] Warning: No DNS servers found
[2012-06-19 23:27:44 - Emulator] emulator: emulator window was out of view and was recentered
[2012-06-19 23:27:44 - Emulator]
[2012-06-19 23:28:29 - MyApp] New emulator found: emulator-5554
[2012-06-19 23:28:29 - MyApp] Waiting for HOME ('android.process.acore') to be launched...
[2012-06-19 23:28:36 - MyApp] HOME is up on device 'emulator-5554'
[2012-06-19 23:28:36 - MyApp] Uploading MyApp.apk onto device 'emulator-5554'
[2012-06-19 23:28:42 - MyApp] Failed to install MyApp.apk on device 'emulator-5554': timeout
[2012-06-19 23:28:42 - MyApp] Launch canceled! 
```

请注意“警告：未找到 DNS 服务器”

使用 Eclipse 尝试将 .apk 安装到物理设备（根三星 Galaxy S2。4.0.3 并启用 USB 调试），在完成与上述类似的步骤后，我进入 Eclipse 控制台，Android 输出：

```
[2012-06-15 22:40:34 - MyFirstApp] Starting full Post Compiler.
[2012-06-15 22:40:34 - MyFirstApp] ------------------------------
[2012-06-15 22:40:34 - MyFirstApp] Android Launch!
[2012-06-15 22:40:34 - MyFirstApp] adb is running normally.
[2012-06-15 22:40:34 - MyFirstApp] Performing
    au.com.myorg.myfirstapp.MyFirstAppActivity activity launch
[2012-06-15 22:40:39 - MyFirstApp] Uploading MyFirstApp.apk onto device '0019adf659f24e'
[2012-06-15 22:40:51 - MyFirstApp] Failed to install MyFirstApp.apk on device '0019adf659f24e': timeout
[2012-06-15 22:40:51 - MyFirstApp] Launch canceled! 
```

与尝试安装到模拟器时出现的错误相同。

当仅使用命令行并因此避免使用 Eclipse 时，我将执行以下步骤：

*   在我的工作目录中打开一个 Windows 命令提示符（我使用的是 C:\Data\Sda\Code\Mobile\Android\Examples>"）。

    > android 列表目标。

*   我获得了我的目标 ID（我选择 Android 2.2）。

    > android 创建项目 --target 3 --name MyAppCmd --path ./MyAppCmd --activity MyAppCmdActivity --package au.com.myorg.myappcmd

*   我得到一系列看起来很健康的输出“创建的项目目录......”，“添加的文件......”

*   在 Windows 中，我双击“AVD Manager.exe”。
*   我启动了我的 avd（针对 Android 2.2）
*   返回我的命令窗口

    > cd MyAppCmd
    > 
    > 蚂蚁调试

*   在输出列表之后，我得到“BUILD SUCCESSFUL ...”（以前我必须编辑 C:\android\android-sdk\platform-tools\dx.bat 以将“set defaultXmx=-Xmx1024M”更改为“设置 defaultMx=-Xmx512M" 以使构建成功）。我观察到 bin/MyAppCmd-debug.apk 存在。

*   我尝试安装

    > adb install bin/MyAppCmd-debug.apk

*   输出：

    ```
    * daemon not running. starting it now on port 5037 *
    * daemon started successfully *
    error: device offline 
    ```

    > 亚行设备

    ```
    List of devices attached
    emulator-5554   device 
    ```

    > adb install bin/MyAppCmd-debug.apk

*   命令窗口中没有进一步的输出。没有错误信息。只是一个闪烁的光标，没有错误或成功消息，也没有返回命令提示符“>”。

*   我关闭了命令行并打开了一个新的。

*   如果我尝试推送命令（以前在我的 Windows 系统上创建了 temp.txt），我会得到相同的结果（闪烁的光标等）......

    > adb push temp.txt /sdcard/temp.txt

# 我尝试过的候选解决方案

Eclipse 相关：

*   遵循[Eclipse 中的步骤没有与模拟器交谈](http://developer.android.com/resources/faq/troubleshooting.html#eclipse)
*   增加了 ADB 连接超时。Eclipse > Window > Preferences > Android > DDMS > " ADB connection time out(ms):" = 10000（我也试过 60000）。
*   运行应用程序两次（并再次选择当前运行的模拟器或手机）。
*   清理了我的项目：Eclipse > Project > Clean ...
*   重新启动 Eclipse。
*   将 Eclipse 从 Indigo (2.7.x) 降级到 Helios (2.6.x)。

安卓相关：

*   以多种方式重置 adb： 从 Eclipse DDMS 角度（从设备窗口三角形）中的“重置 ADB”命令；带有“adb kill-server”和“adb start-server”的命令行；并使用 Windows 任务管理器杀死 adb.exe。
*   重新安装我的三星 OEM USB 驱动程序（通过使用 KIES > 工具 > 连接错误疑难解答）。
*   将我的 Android SDK 安装到路径中没有空格的目录中。即 C:\Android\android-sdk。这需要重新安装 SDK，以前位于 C:\Program files\Android\android-sdk
*   我的 Android 项目安装在路径中没有空格的目录中。
*   删除和重新创建 avd（从 Android AVD 管理器和使用 Windows 资源管理器）。
*   使用针对不同平台（Android 2.2 和 Android 4.0.3）的不同 AVD。
*   就在模拟器打开之后但超时之前：解锁手机 V 等到手机锁定（在模拟器中）超时。
*   已验证我的 AndroidManifest.xml 中有：

    ```
     <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" /> 
    ```

环境相关（PC和电话）：

*   重新启动了我的手机。
*   重新启动我的开发PC。
*   关闭我的软件和硬件防火墙。
*   开启 MS Security Essentials 实时保护。
*   禁用了我的主机列表。
*   重新安装Java。
*   引导进入 Windows 安全模式并运行 Eclipse。
*   通过查看[Sysinternals TCPView](http://technet.microsoft.com/en-gb/sysinternals/bb897437)中可用的内容，手动终止大多数其他应用程序 TCP/IP 进程（例如 GoogleDesk.exe、Apache Server PunkBuster 等） 。
*   断开以太网电缆与我的 PC 的连接。

# 其他信息

一些 adb 命令有效。

例如，以下内容使模拟器屏幕跳舞（如预期的那样）。

> adb shell 猴子 -v 100

我可以列出设备，并正确检索它们的状态

> 亚行设备。

因此 adb 客户端和 adb 守护进程之间存在部分通信（通过 adb 服务器）。

我对 Android 开发比较陌生。但是，大约 6 个月前，我已经成功地将 .apks 安装到了模拟器和我的设备上（从我现在正在尝试工作的 WinXP PC 上）。从那以后我就忽略了Android。当我最近回到它时，我在构建我的 .apks 时遇到了一些问题，这是通过删除我的 debug.key 并允许 eclipse 生成一个新的来解决的。

在这 6 个月的时间里，我的开发机器发生了各种各样的变化。安装新的服务器和应用程序，更改防火墙设置等。所以很可能有一些我忽略的变化。

我还有一台 Win7 笔记本电脑，我已经成功地将 .apks 安装到模拟器和 USB 连接的物理设备上。也就是说，我在Win7机器上安装了一份Android SDK、Eclipse、JAVA等。所以我知道我对正确设置它的正确程序有一个大致的了解。

我可以通过 ES File Explorer 从我的手机（无线连接到我的开发机器）双击文件来手动安装 .apk。

# 最后的想法

似乎 adb 客户端、adb 服务器或 adb 守护程序在完全相互通信方面存在问题。

我有三个假设：

*   这是我的错。存在某种 TCP/IP 冲突，它破坏了 adb 客户端、adb 服务器或 adb 守护程序之间的某些连接。这是由于我的 PC 上的一些怪异设置（就像任何开发人员一样，我一直在更改系统上的各种设置）。但是，我尝试禁用安全性和其他可能冲突的 TCP/IP 进程（据我所知）。
*   我一直忽略一些简单的问题。
*   这是谷歌/安卓的错。也就是说，Android adb 中有一个 bug，需要更新 android SDK 平台工具。我认为这不太可能，因为我希望它现在已经浮出水面。

# 要发布的更新

2012-06-22 18:55 (UTC):

完全重新安装（再次）Java、Eclipse 和 Android SDK，在安装过程中有一些变化（例如，将 Java 安装到 root；Android SDK 安装到默认的“Program Files\”；并在安装过程中关闭所有安全软件）。

我注意到错误“停止 ADB 服务器失败（代码 -1）”。在 Android SDK Manager Log 期间和安装平台/工具的各个部分（通过 Manager）。

2012-06-30 06:15 (UTC):

重新调整了“我的环境”规范以反映最新的测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:53:30.193

如果它的超时那么可能是与 Eclipse 的 ADB 连接将需要更多的超时限制。所以试试这个：

`Prefrences>android>DDMS and you will see ADB connection timeout extend it to 20000`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T01:23:34.120

当我们在物理设备上发生这种情况时，我们通常会尝试通过拔下电源、切换设备上的“android 调试模式”并重新连接来修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T02:27:02.347

确保您在 ADMIN ACCOUNT 上工作。这个问题也让我很沮丧，但是当我切换到管理员帐户（在 Windows Vista 上）时，adb 似乎在设备上正确安装了 apk。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T23:11:08.300

我遇到过同样的问题; 通过将 *.apk 复制到手机内存并将其直接安装在设备上（通过 Myfiles 并选择 *.apk），它工作正常。我怀疑 USB 连接有问题（错误太多，Eclipse 由于其他进程使用 USB 太慢等）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T11:04:29.067

我的简单方法是重新启动模拟器（不是 Eclipse）。它无需我发送任何 adb 命令即可工作。虽然很少发生在物理设备上。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-09T06:16:37.470

几个月后，我通过升级到全新的环境解决了这个问题。具体来说，是一台全新安装 Windows 8 的新机器。我也避免安装 Comodo 套件（我不知道这是导致问题的原因）。

因此，虽然这不是问题的直接解决方案（仍然不清楚是什么原因造成的），但也许它可以作为另一个例子，其中解决问题的方法或横向解决方案有时是一个很好的最后选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-30T08:39:54.220

尝试更改 ADB 连接超时。我认为它默认为 5000 毫秒，我将我的更改为 10000 毫秒以摆脱这个问题。

如果您在 Eclipse 中，则可以通过

Window-> Preferences -> Android -> DDMS -> ADB Connection Timeout (ms)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-30T06:40:38.983

试试这些...

*   关闭你的日食。
*   转到cmd并输入：（我希望你已经在你的路径中设置了android工具文件夹的路径）

`adb kill-server`
`adb start-server`

输出将是：

```
daemon not running. starting it now on port 5037 
daemon started successfully 
```

*   启动你的 Eclipse。

*   启动您的模拟器，如果您在物理设备上，请查看您的电缆是否松动并正确连接

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-20T18:30:39.613

只需拔下和插入电话（物理）即可。当手机连接时间过长并且什么也没做时，这确实发生在我身上（太多次）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-21T14:59:25.750

**我的行为与您的问题中提到的相同，并尝试了您列出的所有解决方案。试试这个：更改 USB 端口。对我来说，我总共有 4 个 USB 端口（两个在我的桌面前面，另外两个在后面）。无论我做什么，前面的两个都给了我[超时安装]。我试过的第一个在后面已经奏效了。我想知道这可能是与 USB 端口版本或主板嵌入式 USB 相关的一些问题。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-26T06:10:23.510

你可以试试这个：

1.  打开“ *Android 虚拟设备管理器*”
2.  *从那里列出*的设备中选择一个并运行它。
3.  右键您的 Android*应用程序 -> 运行方式 -> Android 应用程序*

它对我有用。我在eclipse中的模拟器上试过这个。应用程序运行需要一段时间。对我来说，它花了 33 秒。等到控制台中的消息显示*“成功！”*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-26T16:51:19.370

发生这种情况时，我在 Win7 64 位系统上执行以下操作：

1.  关闭日食
2.  从任务管理器中杀死 adb.exe 和 emulator-arm.exe 的所有副本
3.  打开日食
4.  更改为 DDMS 视图并确保您可以看到设备
5.  打开窗口/ADV 管理器
6.  选择所需的模拟器并按开始
7.  观察 DDMS 中的设备面板，看看模拟器是否显示。如果在开始窗口进度条完成之前它没有显示，那么模拟器这次不会加载，所以关闭模拟器。
8.  然后从 6 开始重复。

对我来说，模拟器永远不会第一次启动，但 10 次中有 9 次将在第二次尝试时成功启动。

希望他们能解决这个问题！标记

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-28T04:18:00.833

如果您不是管理员帐户，请确保已关闭家长控制。它对我有用。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-07-17T05:12:09.930

首先您必须更新系统的所有驱动程序，然后以基本方式安装android studio，然后错误就会解决。先试试，因为我也多次遇到这个问题......

# java - 如何在纯 java 中或使用 iText RTF 从 RTF 文件中删除页脚

> ID：11115905
> 
> 赞同：1
> 
> 时间：2012-06-20T08:47:35.513
> 
> 标签：java, itext, rtf

我想读取一个 RTF 文件并删除页面页脚中的日期。我想仅使用 Java 或 iText RTF 之类的任何库来执行此操作。我的文件也可能包含一些图像，我不想更改其中的任何内容。

# ios - 签署 Apple MDM 配置文件

> ID：11115906
> 
> 赞同：1
> 
> 时间：2012-06-20T08:47:37.310
> 
> 标签：ios, x509certificate, mdm

我正在使用 Apple MDM 服务器，实际上它运行良好。我有一个签名问题，这让客户抱怨证书，所以现在我对其他人如何签署他们的配置文件感兴趣。

我使用 java，但欢迎任何形式的帮助，因为这不是关于如何在 java 中实现代码的特定问题，而是更多关于如何正确签署配置文件的问题。

这就是我们目前的做法：

```
byte[] data = ...
X509Certificate cert = ...
KeyPair keyPair = ...
CMSSignedDataGenerator gen = new CMSSignedDataGenerator();          
gen.addSigner(keyPair.getPrivate(), cert, CMSSignedGenerator.DIGEST_SHA1, new AttributeTable(new Hashtable<DERObjectIdentifier, Attribute>()), null);
CMSSignedData signedData = gen.generate(new CMSProcessableByteArray(data), true, "BC");

response.setContentType("application/x-apple-aspen-config");
response.getOutputStream().write(signedData.getEncoded()); 
```

我们正在使用使用算法 SHA1withRSA 创建的自签名证书，密钥使用 RSA，大小为 2048。

有没有人看到这种方式有问题，或者你只是用不同的方式来做这件事？

并且请随时以 Java 以外的其他语言发布代码 - 它可能仍然有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:18:49.787

我做了两件事来解决这个问题。首先，我将证书更改为 x509 v3 - 它是 v1。然后我添加了 KeyUsage 和 BasicConstraints 以使 iOS 接受它为受信任的。我做的第二件事是将证书本身添加为 CertStore。这两个步骤使证书类似于 iPhone 配置实用程序使用的证书。

# sql - 从两个表中写选择

> ID：11115907
> 
> 赞同：1
> 
> 时间：2012-06-20T08:47:50.213
> 
> 标签：sql, oracle

我有 2 张桌子。

```
1\. Table events: event_date, name, event
2\. Table locations: loc_date, name, location 
```

**我需要从表事件中获取所有行，并从loc_date 最后在 event_date 之前**的表位置获取位置。

 ****更新我需要从表****events**中为每一行获取一个位置。例如：

```
events
event_date | name | event
13:53      | test1| 0
14:20      | test2| 1
18:00      | test3| 5

locations
location_date | name | location
13:20         | a    | Moscow
13:40         | b    | New-York
14:00         | c    | London
17:24         | d    | Tokio
18:00         | e    | Berlin 
```

我想要的结果是：

```
event_date | name  | event | location
13:53      | test1 | 0     | New-York
14:20      | test2 | 1     | London
18:00      | test3 | 5     | Berlin 
```

我试过这样的事情：

```
select e.*
from events e
left join locations l on l.loc_date < e.event_date 
```

但是此查询返回许多行，其中包含来自事件的相同数据和来自位置的不同数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:49:53.917

Prolly 是这样的：

```
select e.* from events e
inner join location l on l.loc_date < e.event_date 
```

但这不是一个好的模式，您应该有一些东西可以正确链接两个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:50:31.850

您可以为此使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm) [first_value()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions066.htm#SQLRF00642)：

```
select distinct e.event_date, e.name, e.event,
    first_value(l.location)
        over (partition by e.event_date, e.name, e.event
            order by l.loc_date desc) as location
from events e
left join locations l on l.loc_date < e.event_date
order by e.event_date, e.name, e.event;

EVENT NAME       EVENT LOCATION
----- ----- ---------- --------
13:53 test1          0 New-York
14:20 test2          1 London
18:00 test3          5 Tokio 
```

请注意，该`test3`位置是东京，而不是您预期结果中的柏林；那是因为您指定了 'loc_date *last before* event_date'，而 Berlin`loc_date`的`event_date`. 如果您确实希望它与之匹配，则需要使用`<=`而不是`<`.

执行此操作的非分析方法是使用相关子查询，该子查询必须命中表两次；我更喜欢分析方法，但这可能更容易理解：

```
select e.event_date, e.name, e.event, l.location
from events e
join locations l on l.loc_date = (
    select max(loc_date) from locations
    where loc_date < e.event_date
)
order by e.event_date, e.name, e.event; 
```**

# iphone - 使用核心图形绘制线的问题：显示气泡

> ID：11115909
> 
> 赞同：10
> 
> 时间：2012-06-20T08:47:58.573
> 
> 标签：iphone, objective-c, ios5, core-graphics

使用核心图形，我正在尝试画一条线，因为当我尝试添加阴影时，会在线条内创建 lin 和气泡，查看图像，我无法解决问题。请在下面找到我的代码

```
-(void)drawRect:(CGRect)rect
{

    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextSetShadow(context, CGSizeMake(-16.00, -5.0f), 5.0f);

    CGContextStrokePath(context);

    [super drawRect:rect];

    [curImage release];

} 
```

下面是`touchesMoved`方法。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch  = [touches anyObject];

    previousPoint2  = previousPoint1;
    previousPoint1  = [touch previousLocationInView:self];
    currentPoint    = [touch locationInView:self];

    // calculate mid point
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    CGRect drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    curImage = UIGraphicsGetImageFromCurrentImageContext();
    [curImage retain];
    UIGraphicsEndImageContext();
   [self setNeedsDisplayInRect:drawBox];

}

CGPoint midPoint(CGPoint p1, CGPoint p2)
{
    return CGPointMake((p1.x + p2.x) * 0.5, (p1.y + p2.y) * 0.5);
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch previousLocationInView:self];
    previousPoint2 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    [self touchesMoved:touches withEvent:event];
} 
```

当我尝试添加该行时，问题就来了

```
CGContextSetShadow(context, CGSizeMake(-16.00, -5.0f), 5.0f); 
```

![问题图片](../Images/e2e5f17c9a89b0c7860cb7f85abe0bd2.png)

请帮我解决这个问题，在此先感谢。请参阅方法编辑问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T05:25:56.167

您似乎正在将一系列线段绘制为四边形曲线。气泡将是前一段和当前段重叠的地方。由于您的分段线是纯红色，您不会注意到重叠，但它在阴影中显示为较暗的区域。

尝试将您的描边颜色设置为具有 0.5 的 alpha（或一些这样的半透明）。我认为（知道）你会看到重叠的部分也会显示出与阴影类似的效果。

为了解决这个问题，您需要将线段绘制为每条线的连续路径。我猜你正在使用`touchesBegan:withEvent:`//来获取线条的点`touchesMoved:withEvent`？`touchesEnded:withEvent:`

在这种情况下，当`touchesBegan:withEvent:`被调用时，开始你的新路径。在`touchesMoved:withEvent`当前图像上渲染新路径期间。将路径提交到`UIImage`in `touchesEnded:withEvent:`。此时，您可以丢弃路径，直到`touchesBegan:withEvent:`下一次笔划再次调用。

**更新**

在您的代码片段中，您最终会在每个运行循环中渲染整个视图三次。这是很多绘图开销。我很快整理了一些代码来演示我上面所说的内容。它不是经过测试的代码，但它应该是正确的：

**更新 2**

根据我最近的两条评论，我有一些时间来编写和测试一些代码，这些代码可以满足您的需求。这段代码来自视图控制器而不是视图本身，但稍作修改，您可以根据需要在视图中移动。因此，我将一个`UIImageView`作为子视图添加到泛型`UIView`中以保存和显示图像（并在视图控制器中维护对的引用），并使视图控制器成为第一响应者以接收触摸事件。在集成到您自己的项目中时，您可以清理许多硬编码值：

```
static
UIImage *CreateImage( CGRect rect, NSArray *paths )
{
    UIGraphicsBeginImageContextWithOptions(rect.size, NO, 1.0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGFloat colorComponents[4] = {0.0,0.0,0.0,0.0};
    CGContextSetFillColor(context, colorComponents);
    CGContextFillRect(context, rect);

    for ( id obj in paths ) {
        CGPathRef path = (CGPathRef)obj;
        CGContextAddPath(context, path);
    }    
    CGContextSetStrokeColorWithColor(context, [[UIColor redColor] CGColor]);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, 5.0);
    CGContextSetShadow(context, (CGSize){-8.0,40}, 5.0);
    CGContextBeginTransparencyLayer(context, NULL);

    CGContextDrawPath(context, kCGPathStroke);

    CGContextEndTransparencyLayer(context);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

static
CGPoint MidPoint( CGPoint pt1, CGPoint pt2 )
{
    return (CGPoint){(pt1.x+pt2.x)/2.0,(pt1.y+pt2.y)/2.0};
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    CGPoint location = [[touches anyObject] locationInView:self.view];
    myPath = CGPathCreateMutable();
    CGPathMoveToPoint(myPath, NULL, location.x, location.y);

    [self.paths addObject:(id)myPath];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    UITouch *touch = [touches anyObject];
    CGPoint previousLocation = [touch previousLocationInView:self.view];
    CGPoint location = [touch locationInView:self.view];
    CGPoint midPoint = MidPoint(previousLocation, location);
    CGPathAddQuadCurveToPoint(myPath, NULL, midPoint.x, midPoint.y, location.x, location.y);

    self.imageView.image = CreateImage(self.view.bounds, self.paths);
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];
    UITouch *touch = [touches anyObject];
    CGPoint previousLocation = [touch previousLocationInView:self.view];
    CGPoint location = [touch locationInView:self.view];
    CGPoint midPoint = MidPoint(previousLocation, location);
    CGPathAddQuadCurveToPoint(myPath, NULL, midPoint.x, midPoint.y, location.x, location.y);

    self.imageView.image = CreateImage(self.view.bounds, self.paths);

    CGPathRelease(myPath);
    myPath = nil;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T12:45:47.293

问题是你有多条相互重叠的线。所以两者的阴影重叠，你会得到更深的颜色。

对于像线条图这样简单的东西，您可以简单地复制整个绘图代码并使用不同的颜色和视图像素偏移（而不是阴影）重绘。例如，您将曲线保存到一个数组中，然后分别绘制它们。

编辑：
好的@gschandler 也很好地描述了这个问题。

但您可能还想查看[透明层](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_trans_layers/dq_trans_layers.html)文档。将元素组合在一起并为组应用阴影。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T12:04:53.533

另一种解决方法是在触摸移动事件上创建一个点数组，然后绘制它们。

创建一个点数组：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
[pointArray release]; pointArray = nil;
pointArray=[[NSMutableArray alloc] init];
UITouch *touch = [touches anyObject];
[bufferArray removeAllObjects];

previousPoint1 = [touch previousLocationInView:self];
previousPoint2 = [touch previousLocationInView:self];
currentPoint = [touch locationInView:self];

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
previousPoint2 = previousPoint1;
previousPoint1 = [touch previousLocationInView:self];
currentPoint = [touch locationInView:self];
[pointArray addObject: [NSValue valueWithCGPoint:previousPoint2]];
[pointArray addObject:[NSValue valueWithCGPoint:previousPoint1]];   
[pointArray addObject:[NSValue valueWithCGPoint:currentPoint]];
[self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{   

}

-(void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext(); 
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, self.lineWidth);
CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

CGContextSetShadow(context, CGSizeMake(-16.00, -5.0f), 5.0f);

for(int i = 1 ; i < [pointArray count]-1;i++)
{
CGPoint mid1 = midPoint([pointArray objectAtIndex:i+1], [pointArray objectAtIndex:i]); 
CGPoint mid2 = midPoint([pointArray objectAtIndex:i+2], [pointArray objectAtIndex:i+1]);

CGContextMoveToPoint(context, mid1.x, mid1.y);
CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
i+=2;
}
CGContextStrokePath(context);

} 
```

您可以使用多维数组管理多行:)

# paypal - 如何设置与我的包裹网站的 PayPal 连接

> ID：11115911
> 
> 赞同：0
> 
> 时间：2012-06-20T08:48:12.203
> 
> 标签：paypal, e-commerce, cart

我有一个带有虚拟货币系统的网站。我需要用户购买一些虚拟货币，我打算通过 PayPal API 来购买。用户应该选择一个套餐，然后付款，然后在他的网站帐户中获得虚拟货币。它与电子商务网站非常相似。
有没有人知道或有关于这个主题的信息的链接？
最好
的乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:28:57.010

[这是 API 的网址](https://www.x.com/developers/paypal/documentation-tools/api)。只需选择您的用例..

# iphone - 我的自定义视图控制器委托不工作

> ID：11115913
> 
> 赞同：3
> 
> 时间：2012-06-20T08:48:23.300
> 
> 标签：iphone, objective-c, ios, delegates, storyboard

我正在尝试使用委托将一个简单的字符串从一个视图控制器发送到另一个视图控制器，但我的委托不起作用。我正在使用情节提要，不想使用 segue 传递数据。这是我的简单代码

ViewControllerA.h

```
#import <UIKit/UIKit.h>

@class ViewControllerA;

@protocol viewControllerADelegate <NSObject>

-(void) addItem: (ViewControllerA *)controller data:(NSString *)item;

@end

@interface ViewControllerA : UIViewController{
 __weak id <viewControllerADelegate> delegate;
}
- (IBAction)buttonPressed:(id)sender;

@property (weak) id<viewControllerADelegate> delegate;
@end 
```

视图控制器A.m

```
#import "ViewControllerA.h"

@interface ViewControllerA ()

@end

@implementation ViewControllerA
@synthesize delegate;

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }

 - (IBAction)buttonPressed:(id)sender {
[self.delegate addItem:self data:@"this is data"];

 }
 @end 
```

视图控制器B.h

```
#import <UIKit/UIKit.h>
#import "ViewControllerA.h"

@interface ViewControllerB : UIViewController<viewControllerADelegate>

@end 
```

视图控制器B.m

```
#import "ViewControllerB.h"
#import "ViewControllerA.h"

@interface ViewControllerB ()

@end

@implementation ViewControllerB

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

 - (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

ViewControllerA *vca = [storyboard instantiateViewControllerWithIdentifier:@"A"];
[vca setDelegate:self];

 }

- (void)viewDidUnload
 {
[super viewDidUnload];
// Release any retained subviews of the main view.
 }

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
-(void) addItem: (ViewControllerA *)controller data:(NSString *)item{
NSLog(@"delegate function called");
 }

 @end 
```

我错过了什么愚蠢的东西吗？`-(void) addItem: (ViewControllerA *)controller data:(NSString *)item`未触发委托方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:53:10.990

您设计中的缺陷是尝试将数据与委托一起发送到您自己创建的对象。您当然不需要委托，因为您可以使用简单的属性来做到这一点。`myViewControllerBObject.dataProperty = @"some data"];`就够了。委托通常用于将数据发送回创建当前对象的控制器或应用程序中的任何其他控制器。

例如，将委托代码移入并`ViewControllerA`添加`ViewControllerB`a`UIButton`和 an`IBAction`将`ViewControllerB`数据发送**回**. `ViewControllerA`它是这样的：

视图控制器B.h

```
#import <UIKit/UIKit.h>

@class ViewControllerB;

@protocol viewControllerBDelegate <NSObject>

-(void) sendDataBack: (ViewControllerB *)controller data:(NSString *)item;

@end

@interface ViewControllerB : UIViewController
{
   __unsafe_unretained id <viewControllerBDelegate> delegate;
}

@property (nonatomic, assign) id<viewControllerBDelegate> delegate;
- (IBAction)buttonTouch:(id)sender;

@end 
```

视图控制器B.m

```
#import "ViewControllerB.h"

@interface ViewControllerB ()

@end

@implementation ViewControllerB
@synthesize delegate;
....
- (IBAction)buttonTouch:(id)sender {
    [self.delegate sendDataBack:self data:@"my data"];
}
@end 
```

在 中`ViewControllerA`，您首先需要`ViewControllerB`通过 segues 获取该推送对象。然后实现委托方法。

ViewControllerA.h

```
#import <UIKit/UIKit.h>
#import "ViewControllerB.h"

@interface ViewControllerA : UIViewController <viewControllerBDelegate>
- (IBAction)buttonPressed:(id)sender;

@end 
```

视图控制器A.m

```
#import "ViewControllerA.h"

@interface ViewControllerA ()

@end

@implementation ViewControllerA
......
- (IBAction)buttonPressed:(id)sender {

}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"id %@", [segue destinationViewController]);
    ViewControllerB *vcb = (ViewControllerB *)[segue destinationViewController];
    vcb.delegate = self;  //key point
}
- (void)sendDataBack:(ViewControllerB *)controller data:(NSString *)item
{
    NSLog(@"Here is the data %@ and the controller it comes from %@", item, controller);
}
@end 
```

希望这将帮助您更好地了解与代表的沟通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:50:00.730

制作委托变量（强，非原子）而不是（__weak）。

# css - IE7（和 6）浮动清除问题

> ID：11115915
> 
> 赞同：0
> 
> 时间：2012-06-20T08:48:41.523
> 
> 标签：css, internet-explorer-7

我有一个列表，我试图通过浮动剩下的所有内容然后清除第一列来分成三列。

在 IE8、FF 等中没有问题，但 IE7 将第二列踢出。

请参阅：http: [//jsfiddle.net/EVMzj/3/](http://jsfiddle.net/EVMzj/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:49:53.173

您是否尝试过使用 CSS 属性 box-sizing？

如果您使用`box-sizing: border-box`您应用的框，它将具有您在样式中应用的宽度和高度，而不会出现对框大小产生不良影响的边距和填充问题。

# jasmine - Jasmine 无头 webkit 中更好的故障报告

> ID：11115916
> 
> 赞同：9
> 
> 时间：2012-06-20T08:48:46.937
> 
> 标签：jasmine, error-reporting, headless

在 Jasmine 无头 webkit 中运行测试时，我遇到了一个简单的`TypeError: 'undefined' is not an object`失败。但是没有提示错误发生在哪个文件或行中。有没有办法获得更清晰的失败信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T18:40:30.917

您可以使用 --runner-out 标志来保存测试中的 HTML。在浏览器中打开它，您将看到完整的堆栈跟踪。

```
jasmine-headless-webkit --runner-out ~/Desktop/jasmine-out.html 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-20T17:39:04.537

尝试在 Firebug (Firefox) 或 Google Chrome 中调试。只需按 F12 并转到脚本窗格。我建议萤火虫。如果这没有帮助，您可以在此处发布您的代码，或者更好的是，在[http://jsfiddle.net](http://jsfiddle.net)

# git - 我的应用程序源代码在 heroku 上的安全性如何？

> ID：11115918
> 
> 赞同：15
> 
> 时间：2012-06-20T08:48:48.607
> 
> 标签：git, heroku, repository, cloud, cloud-foundry

我想将我的 webapp 从 cloudfoundry 迁移到 heroku。但是我仍然对一件事感到困惑。

每次您想将应用程序部署到 heroku 时，您都必须将源代码推送到他们的 git 存储库。这个存储库有多安全？如果我不想把我的源代码交给别人怎么办？

你对此有何看法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T10:24:21.887

### 问题

您不了解解释语言或托管服务提供商的工作方式。如果您使用 Ruby 之类的解释型语言，则需要在服务平台上提供源代码。即使您的代码被压缩、混淆或字节编译，它也必须在服务平台上才能提供服务，所以这对于*任何*语言或托管服务提供商来说都是一个问题。

您也不了解字节码的本质。字节码解释器可以读取您的文件。此外，还有 Java 反编译器可以将字节码转换回源代码。搜索 Stack Overflow 将显示[讨论 Java 反编译器的帖子](https://stackoverflow.com/a/272595/1301972)。除非你认为“通过默默无闻的安全”是有用的，否则你应该停止认为你的字节码以任何有意义的方式是安全的。

### 解决方案

1.  构建好的软件，经营好的业务，不要因为担心有人抄袭你的 for 循环而失眠。这可能是您最简单的解决方案。
2.  如果您不信任托管服务提供商或托管设施，那么您将不得不在内部托管自己的文件。即使那样，您也必须信任*某人*来维护系统，除非您打算自己做这一切。
3.  考虑一些锡箔小百货。

Herku 上的 Git 存储库不像您在 GitHub 上找到的公共存储库。它与通过任何其他方式传输文件一样“安全”，并且肯定比许多服务平台上通常的 FTP 上传更安全。

安全始终是一种权衡。这绝对很重要，但除非您定义了比一般不信任更好的威胁模型，否则您将无法开发足够的控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T08:48:52.277

## 这取决于

衡量“安全”的原因，您必须考虑可能的“风险”。从这样的平台窃取源代码的调查值得吗？那么，人们可以从您的源代码中获得多少价值？

我认为没有人通过简单地窃取源代码而真正成功。*它更多的是关于窃取想法。*维护和扩展您没有编写的代码是很困难的。您将需要时间来熟悉源代码（月/年，取决于代码库）。浪费了所有的时间和精力。学得快的高手也可以从零开始，说不定最终会得到更好的结果。

*   Facebook 发布战略、论文和技术见解。那里有很多 Facebook 模仿者，没人在意。

*   您的业​​务取得成功不仅与软件有关。重要的部分是对产品的品牌忠诚度/信任度、用户体验和可见的整体成功。

*   与在 Heroku 上运行的数千个应用程序相比，为什么您的源代码如此特别。甚至很难在所有这些好东西之间找到你的存储库。成功的事情和失败的事情，没有人知道。

但是，如果一些单一的技术算法*是*您的核心业务（加密软件、图形驱动程序算法......）并且它们很容易被采用，那么窃取它可能是值得的。

## 数据与代码

您可以担心的事情：在哪里存储敏感的客户信息？大多数人对出售有关您的业务和客户的电子邮件地址、电话号码、姓名、财务信息有更大的兴趣。但是，……如果你没有足够的敏感数据，你就没有兴趣。那么，您的应用程序是否包含 1 亿个 Sony Network 信用卡帐户？;)

好的，如果应用程序包含 iPhone 5 和 6 的所有蓝图、数据、秘密想法和设计，它可能也会很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:56:02.127

您正在使用某人的服务来运行您的应用程序。无论您使用什么服务，如果不将您的代码提供给他们，就无法做到这一点。即使您忘记了云并托管自己的服务器，它仍将掌握在运行您的数据中心的人员手中。

# c++ - 为什么我的 strcmp 实现没有返回正确的值？

> ID：11115922
> 
> 赞同：5
> 
> 时间：2012-06-20T08:48:56.263
> 
> 标签：c++, c

为什么当它在 strcmp 函数内部时，它在 main 中打印出 0 而在 6 中打印出来？

```
 7 int main()
  8 {
  9 char* str = "test string";
 10 char* str2 = "test strong";
 11 //printf("string length = %d\n",strlen(str));
 12 
 13 int num = strcmp(str,str2);
 14 
 15 printf("num = %d\n",num);
 16 }

 29 int strcmp(char* str, char* str2)
 30 {
 31   if(*str == '\0' && *str2 == '\0')
 32     return 0;
 33   if(*str2 - *str == 0)
 34   {
 35     strcmp(str+1,str2+1);
 36   }
 37   else
 38   {
 39     int num = *str2 - *str;
 40     cout << "num = " <<num<<endl;
 41     return num;
 42     }
 43 } 
```

输出是：

数 = 6 数 = 0

为什么当它显然应该返回的值是 6 时打印 0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T08:51:31.123

您忘记添加`return`声明了吗？

```
 33 if(*str2 - *str == 0)
 34   {
 35     return strcmp(str+1,str2+1);
 36   } 
```

否则，代码将跳过`if`语句的其余部分并到达函数的末尾，什么都不返回（或者`0`在你的情况下，但那是幸运的）。

仅当两个字符串的第一个字符彼此不同时，您的代码才有效。或者如果两个字符串都为空。

你的编译器应该警告你这一点；`void`从`non void`函数返回。如果没有，你应该编译`-Wall`:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:51:32.923

这就是问题：

```
if(*str2 - *str == 0)
{ 
    strcmp(str+1,str2+1); /* no return here. */
} 
```

意味着代码将一直到结束，没有`return`，这是未定义的行为：

*   从C99 标准的第*6.9.1 节功能定义：*

> 如果到达终止函数的 }，并且调用者使用了函数调用的值，则行为未定义。

*   从第6.6.3 节C++03 标准*的 return 语句：*

> 从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

由于行为未定义，任何事情都可能发生。在这种情况下`0`被退回。

改成：

```
if(*str2 - *str == 0)
{ 
    return strcmp(str+1,str2+1);
} 
```

# html - 使用行跨度“规范化”HTML 表格

> ID：11115928
> 
> 赞同：16
> 
> 时间：2012-06-20T08:49:28.883
> 
> 标签：html, html-table

有没有办法确定或计算 HTML 表格是否以及如何使用行跨度进行标准化？或者，如果有一个 JavaScript 库可以做到这一点。

例如，这张表：

```
+-----------+---------+
| Apple     | Red     |
| Apple     | Green   |
| Apple     | Yellow  |
| Sun       | Yellow  |
| Sun       | Hot     |
| Charizard | Hot     |
| Charizard | Pokémon |
+-----------+---------+ 
```

会变成这样：

```
+-----------+---------+
| Apple     | Red     |
|           | Green   |
|           |---------|
|-----------| Yellow  |
| Sun       |-------- |
|-----------| Hot     |
|           |---------|
| Charizard | Pokémon |
+-----------+---------+ 
```

看看这个小提琴，看看我的意思：http: [//jsfiddle.net/scorch/LZKkQ/](http://jsfiddle.net/scorch/LZKkQ/)

其中一些组合很容易手动计算，但有些可能非常复杂。我想尽可能地最小化表格，并确保没有其他组合可以进一步最小化它。即，最好只有表中的唯一值。

**编辑**：不要介意小提琴中的额外列。似乎 Firefox 在最右边一列的行跨度方面存在一些问题，所以我不得不添加另一个以达到预期的效果。

**编辑 2**：

下面提到的 DataTables 插件`fnMultiRowspan`并没有真正得到预期的结果。`fnFakeRowspan`两个插件都需要事先以正确的方式对表格进行排序才能工作；`fnFakeRowspan`仅适用于一列并`fnMultiRowspan`给出以下结果（热和黄色在第二列中重复）：

```
+-----------+---------+
|           | Red     |
| Apple     | Green   |
|           | Yellow  |
|-----------+---------|
| Charizard | Hot     |
|           | Pokémon |
|-----------+---------|
| Sun       | Yellow  |
|           | Hot     |
+-----------+---------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:52:01.827

[正如上面在评论中提到的@MahmoudGamal，有一个名为DataTables](http://datatables.net/)的 jQuery 插件可能有用。查看[fnFakeRowspan](http://datatables.net/plug-ins/api#fnFakeRowspan)函数：

> 当一行中有两个或多个具有相同内容的单元格时，在列中创建行跨单元格，有效地将它们在视觉上分组在一起。注意 - 此插件目前只能在服务器端处理中正确运行。

根据快速阅读代码，您似乎指定了一个列，然后它会查找重复项，并根据需要组合单元格。（注意：我自己没有尝试过这段代码。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:01:32.420

如果您对 JavaScript 足够了解，那么您自己编写它会很简单。您需要做的就是检查下一个字符串是否与当前字符串相同，然后只增加一个字符串的高度而不是打印两次。

编辑：所以你希望它最终像

```
+-----------+---------+
| Apple     | Red     |
| Pokémon   | Green   |
| Sun       | Yellow  |
| Charizard | Hot     |
+-----------+---------+ 
```

# c# - 更改 Outlook MailItem 图标

> ID：11115934
> 
> 赞同：7
> 
> 时间：2012-06-20T08:49:37.313
> 
> 标签：c#, outlook, outlook-addin, outlook-2010, outlook-form

我正在开发一个 Outlook 2010 插件，当用户单击菜单中的按钮时，它将电子邮件导出到特定位置。

`MailItem`这部分没有问题，但如果导出成功，我还需要更改图标-象形图。我试图寻找解决方案，但我只知道我需要使用[表单区域](https://i.stack.imgur.com/YUrVX.jpg)，但我没有找到真正有用的解决方案。

任何想法我应该如何使用这个表单区域？！

* * *

我完成了加载项，从 VS 2010 调试时一切似乎都很完美。我还创建了一个安装程序，但在安装应用程序后，Outlook 不会像我想要的那样显示我的图标。它没有显示您在上面看到的内容，而是更改了图标，但显示了默认图标-不是我的。图标位于我使用的 FormRegion 的 resx 文件中（我使用 dor 默认并从清单中读取图标），我也尝试将它们移动到通用资源文件（Properties.Resource），但结果是相同的。有人可以帮我弄这个吗？

* * *

因此，我还使用 Replacement 和 ReplaceAll 添加了一个 FormRegion，在清单的默认图标上添加了我的图标，并将其命名为 IPM.Note.MyExportedItem。

在 ThisAddin.cs 我有以下代码：

MailItem mailItem = (selectedItem as MailItem);

```
 itemGuid = mailItem.EntryID;
                    string name = mailItem.Subject + ".msg";

                    name = "C:\\" + name.Replace(":", "");
                    try
                    {
                        mailItem.SaveAs(name, OlSaveAsType.olMSG);
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.ToString());
                    }
                    mailItem.MessageClass = "IPM.Note.MyExportedItem";
                    mailItem.Display(true);

                    ........ 
```

但这并没有将收件箱中的mailItem（电子邮件）图标更改为我的图标，例如当我按照我想要的方式导出它们时，我能看到的唯一变化是当我调用 Display(true) 并打开邮件消息时。此外，如果我按新项目，选择表单并打开我的表单区域，它会打开一个撰写消息窗口，如果我向我发送电子邮件，那么它将有我的图标......奇怪......你可以在图片中看到:-) 你知道我做错了什么吗？

![这是它的样子](../Images/fe79ed57fc9daff5c689edf8fd61b461.png)

问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T14:05:13.323

### 以下是在 Outlook 中使用自定义图标所需的步骤：

1.  您需要为导出的项目分配一个自定义[`MailItem.MessageClass`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.messageclass.aspx)( [**IPM.Note.MyCompany.MyExportedItem )。**](http://msdn.microsoft.com/it-it/library/bb157886.aspx)
2.  [创建一个](http://msdn.microsoft.com/en-us/library/bb851471.aspx)匹配的替换表单区域`MessageClass`
3.  [在窗体区域设计器的属性窗格中](http://my.safaribooksonline.com/book/software-engineering-and-development/ide/9780321577856/working-with-outlook-form-regions/768)分配图标。
4.  使用自定义表单区域[重新部署您的 VSTO 加载项。](http://msdn.microsoft.com/en-us/library/ff937654.aspx)

此[MSDN 论坛帖子还描述了该过程](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/011c686b-6947-450e-b97d-70408448c826/)。

# iphone - 使用 HTML5 在 UIWebView 中播放嵌入的视频

> ID：11115937
> 
> 赞同：0
> 
> 时间：2012-06-20T08:49:42.910
> 
> 标签：iphone, cocoa, html, ios5, uiwebview

我实际上是在尝试使用 HTLM5 将本地视频播放到 UIWebView 中。

我实际上做的是这样的：

```
NSString *embedHTML = [NSString stringWithFormat:@"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
< src=\"%@\"  \
</embed>\
</body></html>", [[NSBundle mainBundle] pathForResource:@"ash(1).mov" ofType:nil]];

[webView setOpaque:NO];
NSString *html = [NSString stringWithFormat:embedHTML, webView.frame.size.width, webView.frame.size.height];
[webView loadHTMLString:html baseURL:nil]; 
```

我的故事板上有一个名为 webView 的 UIWebView 具有弱/非原子属性

```
@property (weak, nonatomic) IBOutlet UIWebView *webView; 
```

当我启动应用程序时，什么也没有发生：屏幕仍然是白色的，没有视频正在播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:34:46.103

用这个：

```
NSString *embedHTML = [NSString stringWithFormat:@"<html><style></style></head><body><video src=\"%@ controls autoplay height=\"400 width=\"320></video><ul></body></html>",  [[NSBundle mainBundle] pathForResource:@"ash(1)" ofType:@"mov"]];

[webView setOpaque:NO];
//NSString *html = [NSString stringWithFormat:embedHTML, webView.frame.size.width,  webView.frame.size.height];
 NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"ash(1)" ofType:@"mov"]];
[webView loadHTMLString:embedHTML baseURL:url]; 
```

更多地参考[如何](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGoQFjAC&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fsafari%2Fdocumentation%2FAudioVideo%2FConceptual%2FUsing_HTML5_Audio_Video%2FUsing_HTML5_Audio_Video.pdf&ei=9lS2T6XaFMnOrQfs75nyBw&usg=AFQjCNGTllf153t5fQ517jtZg0m0p07tcQ)使用 html5 播放视频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:47:54.623

只需将基本网址更改为

```
NSString *videoPath =[[NSBundle mainBundle] pathForResource:@"xxx" ofType:@"mov"];

NSString *htmlString=[NSString stringWithFormat:@"<body> <video src=\"%@\" controls autoplay height=\"400\" width=\"300\" > </video> </body>", videoPath];

NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];
[xwebview loadHTMLString:htmlString baseURL:baseURL]; 
```

# c#-4.0 - 连接到 FTP 服务器并将文件从 FTP 下载到本地计算机

> ID：11115940
> 
> 赞同：1
> 
> 时间：2012-06-20T08:49:51.147
> 
> 标签：c#-4.0

我需要知道一种连接到 FTP 站点的方法，但我找不到使用 C# 执行程序的示例。我需要编写可以连接的代码，并在不使用第三方组件的情况下从 FTP 服务器下载文件。

我怎样才能做到这一点 ？帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:05:57.950

.Net 4 中有 FtpWebRequest 类

[http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)

文末有例子。下面是一个取自 msdn 的示例：

```
public static bool DisplayFileFromServer(Uri serverUri)
{
    // The serverUri parameter should start with the ftp:// scheme.
    if (serverUri.Scheme != Uri.UriSchemeFtp)
    {
        return false;
    }
    // Get the object used to communicate with the server.
    WebClient request = new WebClient();

    // This example assumes the FTP site uses anonymous logon.
    request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");
    try 
    {
        byte [] newFileData = request.DownloadData (serverUri.ToString());
        string fileString = System.Text.Encoding.UTF8.GetString(newFileData);
        Console.WriteLine(fileString);
    }
    catch (WebException e)
    {
        Console.WriteLine(e.ToString());
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:52:33.213

这不是一个具体的问题。

您需要在 .NET 框架中使用套接字类： [MSDN - System.Net.Sockets](http://msdn.microsoft.com/en-us/library/system.net.sockets.aspx)

我之前使用的一个很好的例子是： [www.dreamincode.net - 创建一个 ftp 类库](http://www.dreamincode.net/forums/topic/35902-create-an-ftp-class-library-in-c#/)

# java - xpath：写入文件

> ID：11115941
> 
> 赞同：-1
> 
> 时间：2012-06-20T08:49:52.783
> 
> 标签：java, file, xpath

我正在开发 Java 代码以从网站获取数据并将其存储在文件中。我想将 xpath 的结果存储到文件中。有没有办法保存xpath的输出？如有错误请见谅；这是我的第一个问题。

```
public class TestScrapping {

public static void main(String[] args) throws MalformedURLException, IOException, XPatherException {

    // URL to be fetched in the below url u can replace s=cantabil with company of ur choice
    String url_fetch = "http://www.yahoo.com";

    //create tagnode object to traverse XML using xpath
    TagNode node;
    String info = null;

    //XPath of the data to be fetched.....use firefox's firepath addon or use firebug to fetch the required XPath.
    //the below XPath will display the title of the company u have queried for
    String name_xpath = "//div[1]/div[2]/div[2]/div[1]/div/div/div/div/table/tbody/tr[1]/td[2]/text()";

     // declarations related to the api
    HtmlCleaner cleaner = new HtmlCleaner();
    CleanerProperties props = new CleanerProperties();
    props.setAllowHtmlInsideAttributes(true);
    props.setAllowMultiWordAttributes(true);
    props.setRecognizeUnicodeChars(true);
    props.setOmitComments(true);

    //creating url object
    URL url = new URL(url_fetch);
    URLConnection conn = url.openConnection(); //opening connection
    node = cleaner.clean(new InputStreamReader(conn.getInputStream()));//reading input stream

    //storing the nodes belonging to the given xpath
    Object[] info_nodes = node.evaluateXPath(name_xpath);
   // String li= node.getAttributeByName(name_xpath);

//checking if something returned or not....if XPath invalid info_nodes.length=0
    if (info_nodes.length > 0) {

        //info_nodes[0] will return string buffer
        StringBuffer str = new StringBuffer();
        {
            for(int i=0;i<info_nodes.length;i++)
                System.out.println(info_nodes[i]);
        }
        /*str.append(info_nodes[0]);
        System.out.println(str);
 */
     }

 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T22:33:23.240

您可以“简单地”将节点作为字符串打印到控制台/或文件中——Perl 中的示例：

```
my $all = $XML_OBJ->find('/');    # selecting all nodes from root
foreach my $node ($all->get_nodelist()) {
    print XML::XPath::XMLParser::as_string($node);
} 
```

注意：此输出可能不是很好的 xml 格式/缩进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:54:30.193

Java 中 XPath 的输出是一个节点集，所以是的，一旦你有了一个节点集，你就可以用它做任何你想做的事情，将它保存到一个文件中，再对其进行一些处理。

将其保存到文件将涉及 java 中与将其他任何内容保存到文件所涉及的相同的步骤，这与任何其他数据之间没有区别。选择节点集，遍历它，从中获取所需的部分并将它们写入某种文件流。

但是，如果您的意思是有一个 Nodeset.SaveToFile()，那么没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:00:22.657

我建议您使用 NodeSet，它是节点的集合，对其进行迭代，并将其添加到创建的 DOM 文档对象中。
在此之后，您可以使用[TransformerFactory](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/TransformerFactory.html)获取一个 Transformer 对象，并使用它的 transform 方法。您应该从[DOMSource](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/dom/DOMSource.html)转换为可以基于 FileOutputStream 创建的[StreamResult对象。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/stream/StreamResult.html)

# c# - 为所有控件触发事件处理程序，而不是单独触发

> ID：11115946
> 
> 赞同：1
> 
> 时间：2012-06-20T08:50:00.220
> 
> 标签：c#, .net, events, geckofx

我在使用 Gecko Webbrowser 控件时遇到了一个相当奇怪的问题，我创建了自己的类，它继承了 Gecko Webcontrol，并且在它的构造函数中我设置了一个事件：

```
class fooGeckoClass: Gecko.GeckoWebBrowser
{
  public fooGeckoClass()
  {
    this.DomClick += new EventHandler<Gecko.GeckoDomEventArgs>(fooEventFunction);
  }

  private static void fooEventFunction(Object sender, Gecko.GeckoDomEventArgs e)
  {
    ((Gecko.GeckoWebBrowser)sender).Navigate("www.foo.com");
  }
} 
```

我在手动创建的 UserControl 中使用了其中三个控件，这些控件在启动时从配置文件动态加载并添加了 UserControl 控件集合。当单击三个控件中的任何一个时，所有三个控件都将导航到远离原始站点的“www.foo.com”。我看了看：

```
e.StopPropagation(); 
```

它指定它在事件流期间停止事件的进一步传播，但是它也指定它将处理当前流中的所有事件，我相信在这有机会阻止它之前必须已经将事件提供给控件因为这三个控件仍然会触发事件。我也试过 e.Handled = true 无济于事。以前有没有人遇到过这个问题并且有任何解决方案让它只在被点击的控件上触发？

编辑：

可能值得展示控件是如何添加到表单中的，因为这一定是问题发生的地方（如果控件只是放在小型测试应用程序的用户控件中，则不会发生）。

```
private void fooUserControl_Load(object sender, EventArgs e)
{
  if (!this.DesignMode)
  {
    for (int iControls = 0; iControls < geckObs.Count(); iControls ++)
    {
          fooGeckoClass geckControl = new fooGeckoClass();
          this.Controls.Add(geckControl );
          break;
    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:05:58.627

奇怪的答案，但我似乎已经解决了这个问题，DomClick 在第一次运行时被调用，更改为 DomMouseClick 或 DomMouseUp 已经完全解决了这个问题。我假设 DomClick 本身必须是一个事件，因为它也不使用 GeckoDomMouseEventArgs，而是使用常规的 GeckoEventArgs。

编辑：

除此之外，我要访问的站点实际上是在完成加载后调用 DomClick，因此在所有三个浏览器启动时都会调用它。

# php - Amazon DynamoDB 是否比 Amazon RDS (php) 慢？

> ID：11115948
> 
> 赞同：3
> 
> 时间：2012-06-20T08:50:10.740
> 
> 标签：php, mysql, amazon-ec2, amazon-rds, amazon-dynamodb

我们使用了一系列托管在新加坡地区的 AWS 服务。我们有几个 EC2 实例和一个 RDS 实例。我们计划将我们的一些数据迁移到 Amazon DynamoDB，这将有助于我们的应用程序数据设计。

不幸的是，DynamoDB 总是比 RDS 慢。我在与我们的 EC2 实例在同一区域中创建的表中写了一行。使用 AmazonAWS SDK for php 读取这一行需要超过 1 秒的时间，使用 mysql 从 RDS 中获取一行需要的时间比这少 10 倍以上。

我们可以做些什么来优化它吗？我禁用了 SSL，但我认为它没有太大的不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:49:26.263

查看您之前的评论，我会说扫描是您的问题。您真的只想在绝对必要时使用它，即将数据输入 map reduce 以进行分析或类似的东西。据我所知，scan 实际上会遍历每条记录并查找与您的条件匹配的项目（sloooowwwww），其中 get/query 使用索引良好的哈希/范围键。

如果可能的话，您应该结构化您的数据，以便您可以查询散列/范围键，如果这不可行，您可以考虑将元数据/查询字段放入 cloudsearch，使用它返回 id，然后直接获取项目来自迪纳摩。您还可以设置一些去特征化的表（在不同的表中重组相同的数据，以便您有不同的范围键）

您不应该看到使用 PHP SDK 的 get 和 query 命令的那些大延迟时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T14:47:41.230

可能。DynamoDB 具有相当大的延迟，并且运行在比 RDS 托管数据库（MySQL、SQL Server、Oracle）更厚的应用程序堆栈之上。

然而，IMO DynamoDB（以及大多数 NoSQL 数据库）的主要优势在于延迟是可靠的。如果您在记录检索时看到 400 毫秒的延迟，您可以指望 1 个会话或 100,000 个会话的 400 毫秒延迟。

[注意：1 秒似乎很长——在大多数情况下，我们能够获得多条记录 < 秒，但我并没有真正将 DynamoDB 方法用于 PHP 特定的 SDK（只是 .Net）。我想知道是否还有其他东西可能成为瓶颈。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:34:42.547

如果您将 DynamoDB 与适用于 PHP 的 AWS 开发工具包一起使用，则应确保与您使用的开发工具包版本保持同步。具体来说，您需要使用 1.5.9+ 版本才能获得 DynamoDB 操作的最佳性能。最近解决了一些问题，这些问题为某些请求增加了额外的延迟，因此这可能会对您有很大帮助。

此外，DynamoDB 最近添加了对 AWS SignatureV4 签名请求的支持，这消除了 SDK 之前为您检索和缓存的 STS 凭证的需要。这也应该有助于更好的性能。

# objective-c - CGDisplayRegisterReconfigurationCallback：未调用回调

> ID：11115951
> 
> 赞同：1
> 
> 时间：2012-06-20T08:50:34.127
> 
> 标签：objective-c, screen

为什么`displayChanged`在下面的代码中函数没有被触发？

```
#import <Cocoa/Cocoa.h>

static void displayChanged(CGDirectDisplayID displayID, CGDisplayChangeSummaryFlags flags, void *userInfo) {
    NSLog(@"%@, %@", displayID, flags); 
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        CGDisplayRegisterReconfigurationCallback(displayChanged, NULL);

        CFRunLoopRun();
    }
    return 0;
} 
```

我在物理上移除（并插入）我的外部显示器，但该功能从未运行。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-01T05:07:32.387

刚刚找到了[其他问题的解决方案](https://stackoverflow.com/questions/3205442/register-for-windowserver-cgscreenrefreshcallback-cgscreenupdatemovecallback-in)

在调用 CFRunLoopRun 之前，您必须调用 NSApplicationLoad 来建立与窗口服务器的连接。这是原始问题的固定代码：

```
#import <Cocoa/Cocoa.h>

static void displayChanged(CGDirectDisplayID displayID, CGDisplayChangeSummaryFlags flags, void *userInfo) {
    NSLog(@"%u, %u", displayID, flags); 
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        CGDisplayRegisterReconfigurationCallback(displayChanged, NULL);

        NSApplicationLoad();  // establish a connection to the window server. In <Cocoa/Cocoa.h>
        CFRunLoopRun();       // run the event loop
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:53:49.303

我无法`CGDisplayRegisterReconfigurationCallback`上班，所以我使用了分布式通知：

```
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        [[NSDistributedNotificationCenter defaultCenter] addObserverForName:@"com.apple.BezelServices.BMDisplayHWReconfiguredEvent" object:nil queue:nil usingBlock:^(NSNotification *notification) {
            NSLog(@"Displays changed!");
        }];

        CFRunLoopRun();
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:22:30.053

如果您正在使用 AppKit（并且有一个正在运行的`NSApplication`事件循环），您可以监听`NSApplicationDidChangeScreenParametersNotification`通知。或者，您可以`-applicationDidChangeScreenParameters:`在应用程序委托中实现该方法，这相当于同一件事。

# android - 获取窗口/屏幕上的视图/视图组

> ID：11115960
> 
> 赞同：0
> 
> 时间：2012-06-20T08:51:12.737
> 
> 标签：android

有什么方法可以在特定位置的屏幕上获取视图/视图组，比如黑莓提供 getFieldAtLocation(x, y) 来获取 x,y 位置的字段。

# datetime - 仅在我的 xpages 上的午夜为用户调整日期

> ID：11115961
> 
> 赞同：2
> 
> 时间：2012-06-20T08:51:14.317
> 
> 标签：datetime, timezone, xpages, lotus-domino

我们在 xpages 中有一个关于日期的非常奇怪的问题，我们拥有的 Notes 文档包含一个日期字段，并且该值只是一个日期，没有时间部分。

在 xpage 中，我指定将日期显示为日期/时间值。日期在网页上正确显示，但我们现在从夜间（午夜左右）登录的用户那里获得报告，并看到日期调整了一天。如果同一个人在白天登录，则日期是正确的，所以这似乎只发生在午夜左右

我试图将我的客户端上的时钟更改为午夜左右，但这并没有重现它，所以我认为这是一个服务器问题。

多米诺服务器有正确的日期/时间，我们使用的是最新版本的 Domino

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:56:28.327

我们最近遇到了同样的问题，我相信，找到了一个非常好的解决方案。

系统将纯日期视为 UTC 时区的日期。日期值会自动转换为服务器的时区。那么问题是如何防止转换？

此代码防止转换：

```
<xp:this.converter>
    <xp:convertDateTime 
        type="date" 
        ignoreUserTimeZone="true" 
        dateStyle="long" 
        timeZone="UTC">
    </xp:convertDateTime>
</xp:this.converter> 
```

注意“timeZone”属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:29:25.160

该问题与未在日期/时间字段中指定时区有关。我们昨天遇到了这个问题。如果您没有指定 TZ，它似乎假定为 UTC 并会相应调整。包括时区，您的字段将停止错误调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:15:57.943

也许与此有关？ [http://www-304.ibm.com/support/docview.wss?uid=swg21508734](http://www-304.ibm.com/support/docview.wss?uid=swg21508734)

我看过一些关于 XPages 日期和时区问题的报告

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T16:46:09.450

我怀疑您的 Domino 版本是 8.5.3，因为有 2 个 APAR，LO72278 和 LO67745，与 8.5.3 有类似问题。Fixpack 3 解决了这些问题。

根本原因是 Lotus Notes 允许您保存没有时间或区域的“日期”，并且 Notes 服务器有一个默认的时区设置来解释这些不完整的东西，称为日期。XPages 不遵循相同的规则，它的主 Java 想知道您正在使用哪个区域，并从系统中寻找一些线索，并且通常会在某个 TZ 中使用午夜来指代“日期”。Stack Overflow 上有一个关于“如何存储/表示日期”主题的整个区域 - [datetime] - 因为语言和 DBMS 都有自己的方法。

很好的关于它的遗留 Notes 文章。 [http://www-10.lotus.com/ldd/ddwiki.nsf/dx/05022009100728PMAGU5MB.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/05022009100728PMAGU5MB.htm)

关于它的 XPages 文章 [http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPagesTimeZones.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPagesTimeZones.htm)

太糟糕了，他们并不完全在同一页面上，我认为每个版本都会更接近。

# gnuplot - gnuplot安装错误未定义参考

> ID：11115963
> 
> 赞同：0
> 
> 时间：2012-06-20T08:51:22.960
> 
> 标签：gnuplot

我正在尝试在 fedora2 机器上安装 gnuplot4.6.tar.gz。我正在执行以下操作： tar -xvzf gnuplot4.6.tar.gz cd gnuplot 4.6.0 ./configure make make install

但是，运行 'make' 会出现以下错误： ./term/gd.trm:717: undefined reference to `gdFontGetTiny' term.o(.text+0x200a7):../term/gd.trm:724: undefined reference to`gdFontGetSmall ' term.o(.text+0x200ae):../term/gd.trm:731: undefined reference to `gdFontGetMediu mBold' term.o(.text+0x200b5):../term/gd.trm:738: undefined reference to`gdFontGetLarge ' term.o(.text+0x200bc):../term/gd.trm:745: undefined reference to `gdFontGetGiant ' term.o(.text+0x21fca): In function`PNG_set_font': ../term/gd.trm:1840: undefined reference to `gdFontGetTiny' term.o(.text+0x21fd9):../term/gd.trm:1838: undefined reference to`gdFontGetGian t' term.o( .text+0x21fe0):../term/gd.trm:1836: 未定义引用`gdFontGetLarg e' term.o(.text+0x21fe7):../term/gd.trm:1834: undefined reference to`gdFontGetMedi umBold' term.o(.text+0x21fee):../term/gd.trm:1832: 未定义引用`gdFontGetSmal l' collect2: ld returned 1 exit status make[3]: *** [gnuplot] Error 1 make[3]: Leaving directory`/home/ sayantika/gnuplot/gnuplot-4.6.0/src' make[2]: *** [all-recursive] 错误 1 ​​make[2]: 离开目录`/home/sayantika/gnuplot/gnuplot-4.6.0/src' make[1]: *** [all-recursive] Error 1 make[1]: Leaving directory`/home/sayantika/gnuplot/gnuplot-4.6.0' make: *** [all ] 错误 2

目前机器有gnuplot 3.7 和机器的架构有关系吗？

cat /proc/cpuinfo 给出以下输出： cat /proc/cpuinfo 处理器：0 vendor_id：GenuineIntel cpu 系列：15 型号：2 型号名称：Intel(R) Celeron(R) CPU 2.00GHz 步进：7 cpu MHz：1999.412 缓存大小：128 KB fdiv_bug：没有 hlt_bug：没有 f00f_bug：没有 coma_bug：没有 fpu：是 fpu_exception：是 cpuid 级别：2 wp：是 标志：fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe cid bogomips : 3956.73

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:46:50.060

我在 src/term.h 中注释了以下几行。这解决了问题并安装了 gnuplot 4.6。

```
 #if defined(HAVE_GD_PNG) || defined(HAVE_GD_JPEG) || defined(HAVE_GD_GIF)
 #include "gd.trm"
 #endif 
```

# javascript - 用于移动设备的 Html5 - 滑动滚动

> ID：11115964
> 
> 赞同：1
> 
> 时间：2012-06-20T08:51:23.987
> 
> 标签：javascript, android, ios, html, mobile

我正在开发一些 html5 屏幕，这些屏幕将嵌入本机移动应用程序（适用于 ios 和 android）。

我显然不想在这里重新发明东西，而是想在 javascript 方面使用一个稳定的框架。
我尝试使用 JQuery Mobile，但它比我需要的要多，而且它们有点强迫你按照他们的方式做事。

我所需要的只是拥有一个可以通过滑动（没有可见的滚动条）（垂直）滚动的元素，但我无法找到如何使用 JQM 轻松完成（没有它们的所有小部件、主题和默认值）。

我也尝试[了 jGestures](http://jgestures.codeplex.com/)，但它根本不起作用。

任何想法什么是最好的方法？
谢谢。

**更新**

我发现这个 jquery 插件可以满足我的需要：[https ://github.com/ifightcrime/touch-scroll](https://github.com/ifightcrime/touch-scroll)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:57:41.973

您可以使用`-webkit-overflow-scrolling: touch;`它使用手机内置的本机惯性滚动。效果很好。有一个滚动条，但我相信一些巧妙的定位可以解决这个问题。

更多信息在这里：http: [//johanbrook.com/browsers/native-momentum-scrolling-ios-5/](http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/)
在这里：http: [//fioravengi.blogspot.co.uk/2011/06/implications-of-ios-5 -webkit-overflow.html](http://fioravengi.blogspot.co.uk/2011/06/implications-of-ios-5-webkit-overflow.html)

希望有帮助:)

**编辑：**对不起，刚刚意识到你需要它在 android 上工作。我怀疑这样做。对于 iOS，虽然这是一种享受。所以，半个答案！

# performance - 登录时Wordpress 3.3狗慢

> ID：11115969
> 
> 赞同：1
> 
> 时间：2012-06-20T08:51:32.957
> 
> 标签：performance, wordpress, authentication

**EDIT3**
大道主题确实是罪魁祸首。更新通知服务在登录用户的每个页面请求上运行（希望只针对管理员），由于某种原因，在页面突然加载之前需要 @10 秒的limbo-nothing-happening。这当然会影响管理员和面向公众的屏幕中的登录用户。删除了文件，瞧，页面加载迅速。

咆哮：浪费了一整天，第三方软件的损失和收益，arggghhh ;-)

**EDIT2**
也不是 MySQL，Boulevard 主题似乎是罪魁祸首。如何解决，我不确定。客户为主题付费并想使用它，但管理网站是一场噩梦；即永远等待管理屏幕加载...

**编辑**
好的，我确认初始 http 请求会立即到达防火墙，无论是否登录。但是，在防火墙层发生进一步活动之前，会有 10 多秒的延迟。我假设 WP 会发送会话 cookie，然后由于待定原因，验证远程用户是否登录存在延迟。

我现在将检查 MySQL，假设 CPU/内存使用率低，这不会是资源问题，但也许这是一个缓慢的查询......

**原创**
这里有什么交易？

WP新手，未登录时性能很好；但是，加载公共或管理屏幕需要 10 多秒。

linux top 没有显示出什么惊人的事情发生（没有尖峰的 cpu、内存使用），那么在这 10 秒毫无意义的时间内 WP 到底在做什么呢？啊 ;-)

ajax 请求很活泼，因此正常的同步 http 请求正在发生一些事情，这使得 WP 狗变慢（等待屏幕加载很难完成很多工作，比等待应用程序编译更糟糕，至少在你做一些有用的事情时等待！）

我的半解决方法是打开 Chrome 浏览器窗口，而不是登录 WP。我可以立即查看公共页面。然后，在 Firefox 中登录管理面板玩等待游戏；-(

线索受到赞赏，WP给人留下了深刻的印象（外观和感觉），但在这方面并没有那么多，疯狂......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:00:00.800

一些实现缓存的 Wordpress 插件会为登录的用户关闭缓存。Wordpress 也以使用大量内存而闻名。它会降低 Web 服务器的全局性能。

[您可以使用Memory Viewer](http://www.inmotionhosting.com/support/edu/wordpress/316-memory-viewer-wordpress-plugin)监控 Wordpress 为每个页面使用的内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:28:40.937

更新：我刚刚在 update-notifier.php 中找到了这段代码

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_TIMEOUT, 1);
            $cache = curl_exec($ch);
            curl_close($ch); 
```

TIMEOUT 设置为 10 （我猜是秒），如上编辑为 1 秒，现在登录时一切正常...... 10 秒只是一个很大的价值

# console-application - Delphi 5 WriteLn 到控制台和文本文件

> ID：11115971
> 
> 赞同：0
> 
> 时间：2012-06-20T08:51:42.947
> 
> 标签：console-application, shellexecute, delphi-5

我制作了一个控制台应用程序 (A)，它每天独立运行以下载文件并用于`WriteLn('text')`在控制台中显示进度。然后我有另一个 GUI 应用程序 (B)，它在表中显示该数据，但也可以使用 ShellExecute 调用第一个程序 (A)。

我需要 (A) 将日志写入文本文件并显示其进度，所以我有两个问题：

*   除了使用 AssignFile(F,log.txt) 然后查找/替换每个 WriteLn 之外，是否有更快/不那么繁琐的输出到文本文件和控制台的方法：

    WriteLn('我的输出文本'); WriteLn(F,'我的输出文本');

*   我的 GUI 应用程序 (B) 有没有办法从文本文件中实时显示 (A) 的输出，或者至少知道 (A) 何时完成。目前，我显示一条消息“请等待外部导入完成并按 OK”，然后刷新表格。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:56:58.247

您应该能够将输出从 A 重定向到 B，然后在 B 中显示并在 B 中记录。自从我使用 Delphi 以来已经有很长时间了，但是如果 B 是一个 .net 应用程序，这里有一篇不错的文章：[how重定向标准输出](http://www.codeproject.com/Articles/18577/How-to-redirect-Standard-Input-Output-of-an-applic)

# c++ - 使用 std::unique_copy 从向量中提取唯一的、不区分大小写的字符串

> ID：11115973
> 
> 赞同：1
> 
> 时间：2012-06-20T08:51:59.867
> 
> 标签：c++, boost, stl

**问题**

考虑以下向量：

```
std::vector<std::string> extensions;

extensions.push_back(".cpp");
extensions.push_back(".CPP");
extensions.push_back(".h");
extensions.push_back(".H");

std::vector<std::string> caselessUniqueExtensions; 
```

将扩展的内容复制到 caselessUniqueExtensions，但丢弃所有唯一的扩展，忽略大小写。（即结果应该有两个元素 - 一个`.cpp`或`.CPP`，以及一个 和 之一`.h`。`.H`）

**问题**

显然有很多方法可以做到这一点，有些比其他更有效，有些比其他更具可读性。我认为可能有效的一种方法如下：

```
#include <boost/algorithm/string/compare.hpp>

...

std::unique_copy(
  extensions.begin(), extensions.end(),
  caselessUniqueExts.begin(),
  boost::is_iequal()); 
```

但是，它无法使用 MSVS2010 进行编译：

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(626): error C2440: 'type cast' : cannot convert from 'unsigned char' to 'std::basic_string<_Elem,_Traits,_Ax>'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(2211) : see reference to function template instantiation '_Elem std::_Maklocchr<_Elem>(char,_Elem *,const std::_Locinfo::_Cvtvec &)' being compiled
1>          with
1>          [
1>              _Elem=std::basic_string<char,std::char_traits<char>,std::allocator<char>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(2210) : while compiling class template member function 'std::basic_string<_Elem,_Traits,_Ax> std::ctype<std::basic_string<_Elem,_Traits,_Ax>>::do_widen(char) const'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\locale(261) : see reference to class template instantiation 'std::ctype<_Elem>' being compiled
1>          with
1>          [
1>              _Elem=std::basic_string<char,std::char_traits<char>,std::allocator<char>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\locale(259) : see reference to function template instantiation '_Elem std::toupper<T1>(_Elem,const std::locale &)' being compiled
1>          with
1>          [
1>              _Elem=std::basic_string<char,std::char_traits<char>,std::allocator<char>>,
1>              T1=std::basic_string<char,std::char_traits<char>,std::allocator<char>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm(2042) : see reference to function template instantiation 'bool boost::algorithm::is_iequal::operator ()<std::basic_string<_Elem,_Traits,_Ax>,std::basic_string<_Elem,_Traits,_Ax>>(const T1 &,const T2 &) const' being compiled
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>,
1>              T1=std::basic_string<char,std::char_traits<char>,std::allocator<char>>,
1>              T2=std::basic_string<char,std::char_traits<char>,std::allocator<char>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm(2070) : see reference to function template instantiation '_OutIt std::_Unique_copy<_InIt,_OutIt,_Pr>(_FwdIt,_FwdIt,_OutIt,_Pr,std::forward_iterator_tag)' being compiled
1>          with
1>          [
1>              _OutIt=std::_Vector_iterator<std::_Vector_val<std::string,std::allocator<std::string>>>,
1>              _InIt=std::basic_string<char,std::char_traits<char>,std::allocator<char>> *,
1>              _Pr=boost::algorithm::is_iequal,
1>              _FwdIt=std::basic_string<char,std::char_traits<char>,std::allocator<char>> *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm(2094) : see reference to function template instantiation '_OutIt std::_Unique_copy1<std::basic_string<_Elem,_Traits,_Ax>*,_OutIt,_Pr>(_InIt,_InIt,_OutIt,_Pr,std::tr1::true_type)' being compiled
1>          with
1>          [
1>              _OutIt=std::_Vector_iterator<std::_Vector_val<std::string,std::allocator<std::string>>>,
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>,
1>              _Pr=boost::algorithm::is_iequal,
1>              _InIt=std::basic_string<char,std::char_traits<char>,std::allocator<char>> *
1>          ]
1>          c:\users\stv04463\documents\visual studio 2010\projects\pgp sandbox\pgp sandbox\main.cpp(64) : see reference to function template instantiation '_OutIt std::unique_copy<std::_Vector_iterator<_Myvec>,std::_Vector_iterator<_Myvec>,boost::algorithm::is_iequal>(_InIt,_InIt,_OutIt,_Pr)' being compiled
1>          with
1>          [
1>              _OutIt=std::_Vector_iterator<std::_Vector_val<std::string,std::allocator<std::string>>>,
1>              _Myvec=std::_Vector_val<std::string,std::allocator<std::string>>,
1>              _InIt=std::_Vector_iterator<std::_Vector_val<std::string,std::allocator<std::string>>>,
1>              _Pr=boost::algorithm::is_iequal
1>          ]
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(593): error C2440: 'type cast' : cannot convert from 'std::basic_string<_Elem,_Traits,_Ax>' to 'unsigned char'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(2229) : see reference to function template instantiation 'char std::_Maklocbyte<std::basic_string<_Elem,_Traits,_Ax>>(std::basic_string<_Elem,_Traits,_Ax>,const std::_Locinfo::_Cvtvec &)' being compiled
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(2225) : while compiling class template member function 'char std::ctype<_Elem>::_Donarrow(_Elem,char) const'
1>          with
1>          [
1>              _Elem=std::basic_string<char,std::char_traits<char>,std::allocator<char>>
1>          ] 
```

我在这里错过了一些基本的了解，还是不能与`std::unique_copy`结合`boost::is_iequal`？

我知道替代方案 - 我想知道为什么会出现此编译器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:09:19.577

`boost::is_iequal`谓词旨在用于单个字符，而不是像您正在做的整个字符串。

不幸的是，Boost String Algorithms 文档不是最好的，但您可以[在此处](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.compare_hpp)看到这一点：“定义元素比较谓词”，其中“元素”指的是字符串字符。

在内部，`boost::is_iequal`调用`std::toupper`它的参数，这只能对字符起作用。

# scala - Netty SslHandler 头疼

> ID：11115978
> 
> 赞同：6
> 
> 时间：2012-06-20T08:52:51.117
> 
> 标签：scala, netty

我现在已经浪费了几天时间试图追踪新添加的 Akka 传输加密中的一个间歇性错误。

注意：我已经尝试在服务器和客户端中的一个或两个上设置 setIssueHandshake(true) ，但它根本没有帮助。

我们的密码规范测试了来自不同套件的几个不同密码，以确保我们支持的设置确实有效。但是，测试有时可以通过 10 次，然后每隔一个测试就开始失败，这确实是*SecureRandomly*失败；-) 请注意，即使在 SHA1PRNG 上测试也会失败，因此它显然与我们提供的其他密码无关。

创建 SslHandler 的代码：[https ://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/main/scala/akka/remote/netty/ NettySSLSupport.scala](https://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/main/scala/akka/remote/netty/NettySSLSupport.scala)

构建管道的代码：[https ://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/main/scala/akka/remote/netty/ NettyRemoteSupport.scala#L66](https://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/main/scala/akka/remote/netty/NettyRemoteSupport.scala#L66)

测试：[https ://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/test/scala/akka/remote/Ticket1978CommunicationSpec.scala](https://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/test/scala/akka/remote/Ticket1978CommunicationSpec.scala)

后备配置（上面的测试没有覆盖）：[https ://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/主要/资源/reference.conf](https://github.com/akka/akka/blob/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/main/resources/reference.conf)

用于测试的密钥库和信任库：[https ://github.com/akka/akka/tree/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/test/resources](https://github.com/akka/akka/tree/wip-ssl-unbroken-%E2%88%9A/akka-remote/src/test/resources)

未能通过测试的根异常是：

```
**java.security.InvalidKeyException: No installed provider supports this key: (null)**
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at com.sun.net.ssl.internal.ssl.CipherBox.<init>(CipherBox.java:88)
    at com.sun.net.ssl.internal.ssl.CipherBox.newCipherBox(CipherBox.java:119)
    at com.sun.net.ssl.internal.ssl.CipherSuite$BulkCipher.newCipher(CipherSuite.java:369)
    at com.sun.net.ssl.internal.ssl.Handshaker.newReadCipher(Handshaker.java:410)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.changeReadCiphers(SSLEngineImpl.java:550)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1051)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:845)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:721)
    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:607)
    at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:969)
    at org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:670)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:333)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:214)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

而“完整”的是：

```
[ERROR] [06/20/2012 10:38:33.670] [remote-sys-4] [ActorSystem(remote-sys)] RemoteServerError@akka://remote-sys@localhost:59104] Error[
javax.net.ssl.SSLException: Algorithm missing:  
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.changeReadCiphers(SSLEngineImpl.java:554)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1051)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:845)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:721)
    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:607)
    at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:969)
    at org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:670)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:333)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:214)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.security.NoSuchAlgorithmException: Could not create cipher AES/128
    at com.sun.net.ssl.internal.ssl.CipherBox.<init>(CipherBox.java:99)
    at com.sun.net.ssl.internal.ssl.CipherBox.newCipherBox(CipherBox.java:119)
    at com.sun.net.ssl.internal.ssl.CipherSuite$BulkCipher.newCipher(CipherSuite.java:369)
    at com.sun.net.ssl.internal.ssl.Handshaker.newReadCipher(Handshaker.java:410)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.changeReadCiphers(SSLEngineImpl.java:550)
    ... 17 more
Caused by: java.security.InvalidKeyException: No installed provider supports this key: (null)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at com.sun.net.ssl.internal.ssl.CipherBox.<init>(CipherBox.java:88)
    ... 21 more
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:16:12.860

不是 Netty 中的错误，在应用程序级握手和 SSL 握手之间有一个不幸的写竞争。值得注意的是， setIssueHandshake(true) 似乎并没有透明地处理握手，因为您需要手动退出写入，直到握手完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:02:59.570

虽然我没有确切地看到这个异常，但肯定是 a`javax.crypto.Cipher`不是线程安全的；我有一个应用程序，我终于找到了一个通过同步密码解决的错误：

```
cipher synchronized { cipher doFinal encryptedBytes } 
```

抱歉，如果这不是解决方案，但您发布了很多代码！（这可能与堆栈跟踪表明问题甚至是获取实例并不完全相同`Cipher`——但这是否也需要同步？）

# jquery - 如何在 jquery UI datepicker 中禁用今天之前的日期？

> ID：11115981
> 
> 赞同：13
> 
> 时间：2012-06-20T08:53:00.337
> 
> 标签：jquery, jquery-validate, datepicker, jquery-ui-datepicker

我正在制作酒店预订系统，我必须在 jQuery UI datepicker 中禁用过去的日期，这是代码

调用 .cs

```
 public class CheckLookup
        {
            [DataType(DataType.Date)]
            public DateTime checkindate { get; set; }
            [DataType(DataType.Date)]
            public DateTime checkoutdate { get; set; }
        } 
```

这是javascript

```
 $(document).ready(function () {
        function getDateYymmdd(value) {
            if (value == null)
                return null;
            return $.datepicker.parseDate("yy-mm-dd", value);
        }
        $('.date').each(function () {
            var minDdate = getDateYymmdd($(this).data(""));
            var maxDate = getDateYymmdd($(this).data("val-rangedate-max"));
            $(this).datepicker({
                dateFormat: "dd-mm-yy", 
                minDate: minDate,
                maxDate: maxDate
            });
        });
    }); 
```

告诉我要在此代码中进行的修改。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-20T08:54:47.747

你可以试试这个：

```
$('.date').datepicker({ minDate: 0 }); 
```

对于你的情况：

```
$('.date').each(function () {
   var maxDate = getDateYymmdd($(this).data("val-rangedate-max"));
   $(this).datepicker({
         dateFormat: "dd-mm-yy", 
         minDate: 0,
         maxDate: maxDate
   });
}); 
```

# maven - 将使用 Makefile 创建的报告迁移到 Maven 站点报告

> ID：11115983
> 
> 赞同：0
> 
> 时间：2012-06-20T08:53:19.837
> 
> 标签：maven, maven-2, makefile, maven-plugin, maven-site-plugin

我对 maven 很陌生，但要求将我当前由子目录中的 Makefile 创建的报告移动`make all`到`mvn site`报告中。

我将报告中的所有非 Java 内容放入一个`legacy-report`目录中。所以当前的树大致是这样的：

```
pom.xml
legacy-report/
    Makefile
    www/           # <<< created by 'make all'
       index.html 
subtree-1/
    pom.xml
    src/
subtree-2/
    pom.xml
    src/ 
```

所以我`mvn site`为我的法律报告启用的问题是

*   我应该使用什么 Maven（报告）插件？
*   我应该如何更改目录布局？
*   我如何将其整合到 main 中`pom.xml`？
*   `pom.xml`我的目录中是否需要一个`legacy-reporting`，它看起来像什么（大致）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:57:20.717

因此，在清除您真正在谈论的内容之后，您应该在这里查看插件：

[http://graphviz-maven-plugin.bryon.us/index.html](http://graphviz-maven-plugin.bryon.us/index.html)

这将使您有机会通过 Maven 创建 graphivz 图形。问题是是否有办法创建它的 index.html。

# php - PHP ActiveRecord 似乎没有使用我的自定义属性

> ID：11115984
> 
> 赞同：2
> 
> 时间：2012-06-20T08:53:22.103
> 
> 标签：php, activerecord, phpactiverecord

我有一个定义如下的模型：

```
class User extends ActiveRecord\Model {
  function get_name() {
    return $this->first_name . " " . $this->surname;
  }
} 
```

但是，当我显示时`$item->attributes();`，名称不会出现。我在这里是白痴吗？如果是这样，我如何将我的自定义属性放入模型中？

谢谢，加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:46:10.690

attributes() 方法确实只会返回模型表列的值（没有别名）。

但 `$item->name`应该给你预期的结果。您还可以添加设置器。

要获取所有属性的数组，可以将此方法添加到模型中：

```
public function all_attributes() {
    $custom_attr = [];
    foreach (static::$getters as $getter) {
        $key = substr($getter, 4);
        $custom_attr[$key] = $this->$key;
    }
    return $custom_attr + $this->attributes();
} 
```

（不要忘记将你的 getter 添加到 $getters 数组中，ActiveRecord 模型*将*使用它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:03:43.417

这是我的简单解决方案。我已经覆盖了属性方法并添加了任何以“get_attribute_”开头的方法，这样我就可以在序列化过程中使用它们：

```
class BaseModel extends ActiveRecord\Model
{
    public function attributes()
    {
        $attrs = parent::attributes();
        $modelReflector = new ReflectionClass(get_class($this));
        $methods = $modelReflector->getMethods(~ReflectionMethod::IS_STATIC & ReflectionMethod::IS_PUBLIC);
        foreach ($methods as $method)
        {
            if (preg_match("/^get_attribute_/", $method->getName()))
            {
                $attrs[str_replace('get_attribute_', '', $method->getName())] = $method->invoke($this);
            }   
        }
        return $attrs;
    }
} 
```

使用它的结果模型如下所示：

```
class User extends BaseModel
{
    public $loginSessionId;

    function get_attribute_loginSessionId(){
        return $this->loginSessionId;
    }
} 
```

通过这种方式，我可以手动添加 loginSessionId（或我想要的任何其他内容）并将其显示在序列化值中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:00:31.707

您必须检查属性函数的作用。您可能需要覆盖它以考虑您的自定义属性，或者您可能必须将自定义属性添加到祖先中的某些 _properties 属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:03:21.987

你能告诉我们你是如何创建$item的吗？PHPActiveRecord 需要您在构造函数调用（`new User($attributes)`）或直接在属性（`$user->first_name = 'Gareth'`）上设置属性。

* * *

编辑

我不确定 attributes() 方法是否会选择自定义 getter。似乎它只是返回模型的属性属性。

[https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L566](https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L566)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T12:31:51.823

我解决了这个问题：

创建一个派生自`ActiveRecord\Model`并包含此函数的类：

```
public function properties()
{
  $attrs = $this->attributes();
  $modelReflector = new ReflectionClass(get_class($this));
  $methods = $modelReflector->getMethods(~ReflectionMethod::IS_STATIC & ReflectionMethod::IS_PUBLIC);
  foreach ($methods as $method)
  {
    if (preg_match("/^get_/", $method->getName()))
    {
      $attrs[str_replace('get_', '', $method->getName())] = $method->invoke($this);
    }
  }
  return $attrs;
} 
```

只要我从正确的类（不是`ActiveRecord\Model`）派生模型，这就会返回所有属性，无论是自定义的还是其他的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T12:08:14.780

实际上，它很容易像这样实现@将其添加到[https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L520](https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L520)：

```
// check for attribute as getter
if ( method_exists( $this, "get_{$name}" ) ){
  $method = "get_{$name}";
  $var = $this->$method();
  return $var;
} 
```

但我更喜欢这样做（更清洁/优化的代码）：

SomeModel.php：

```
 /** 
   * gets templatefile of outputplugin, wrapper function for template comfortability 
   * 
   * NOTE 2: never implement functions in model, try redirecting
   * to manager class (=lowmemory footprint, imagine xxxxx models with xxxx similar functions)
   *
   * @param string $varname variable description 
   * @return string 
   */ 
  public function get( $varname )
  { 
    switch( $varname ){
      case "foo" : return SomeModel::getManager()->getFoo(); break;
      default: return "";
    }
  } 
```

将此添加到[https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L520](https://github.com/kla/php-activerecord/blob/master/lib/Model.php#L520)：

```
// check for attribute as getter
if ( method_exists( $this, "get" ) && $this->get( $name ) ){ 
  $var = $this->get( $name );
  return $var;
} 
```

# zend-framework - 如何使用 zend 框架读取 excel 文件？

> ID：11115987
> 
> 赞同：1
> 
> 时间：2012-06-20T08:53:30.100
> 
> 标签：zend-framework, phpexcel

如何使用 Zend 框架从控制器读取 xls/xlsx 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:07:27.370

我用过[PHPExcel](http://www.phpexcel.net/)。对我来说效果很好。

# php - 屏幕输出到 PHP

> ID：11115992
> 
> 赞同：3
> 
> 时间：2012-06-20T08:53:55.490
> 
> 标签：php, unix, ubuntu, shell-exec

我有一个 PHP 文件，其中 shell 命令通过屏幕运行，这些命令运行良好，但我想知道是否有办法让它输出到 PHP，而无需写入另一个文件并在 PHP 端读取它。

PHP - trace() 只是一个花哨的 print_r()

```
$cmd = 'ls -h /';
trace(shell_exec('screen -S output -p 0 -X stuff "`echo '.$cmd.'\'\r\n\'`"')); 
```

网页输出

```
NULL 
```

画面输出

```
www-data@:/home/ubuntu$ ls -h /
bin   build  etc   initrd.img      lib         media  opt   root  selinux  sys  usr  vmlinuz
boot  dev    home  initrd.img.old  lost+found  mnt    proc  sbin  srv      tmp  var  vmlinuz.old 
```

有什么建议么？

- 编辑 -

某些命令没有直接输出，这是我使用 screen 的原因之一

PHP

```
$cmd = 's3ls';
trace(shell_exec('screen -S output -p 0 -X stuff "`echo '.$cmd.'\'\r\n\'`"'));
trace(shell_exec($cmd)); 
```

网页输出

```
trace:NULL
trace:NULL 
```

屏幕

```
www-data@:/home/ubuntu$ s3ls
+---------------+--------------------------+
|     Name      |       CreationDate       |
+---------------+--------------------------+
| bucket        | 2012-05-31T13:08:51.000Z |
| bucket        | 2012-01-17T16:51:58.000Z |
| bucket        | 2012-03-31T11:19:54.000Z |
+---------------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:53:04.560

[void passthru (string $command [, int &$return_var])](http://au.php.net/manual/en/function.passthru.php)

> passthru() 函数类似于 exec() 函数，因为它执行一个命令。当 Unix 命令的输出是需要直接传回浏览器的二进制数据时，应使用此函数代替 exec() 或 system()。这样做的一个常见用途是执行类似于 pbmplus 实用程序的东西，它可以直接输出图像流。通过将 Content-type 设置为 image/gif，然后调用 pbmplus 程序输出 gif，您可以创建直接输出图像的 PHP 脚本。

虽然显然它可能有点片状。

# windows - 更改从 Windows 传输到 linux 框的文件的权限

> ID：11115994
> 
> 赞同：1
> 
> 时间：2012-06-20T08:54:01.440
> 
> 标签：windows, linux, batch-file, putty

我正在通过批处理脚本和批处理脚本将文件从 Windows 远程传输到 linux 框中我正在使用 putty cmd 并通过 plink.exe 执行它我面临的问题是当它实际被传输到 linux 框时它无法执行为它不包含可执行文件权限。

我的问题是如何远程将文件权限更改为 755 或 777？

谢谢和reagrds，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:57:45.063

与本地相同的方式：

```
chmod 755 /path/to/file 
```

`plink`您也可以使用运行此命令

# php - 将php打包为android应用程序？

> ID：11115996
> 
> 赞同：0
> 
> 时间：2012-06-20T08:54:13.443
> 
> 标签：php, android, web-applications, package

我正在开发一个 Android 应用程序，由于时间关系，我开始使用**PHP**开发项目，以及**MySQL**后端。是否可以打包`the project folder`为可以在平板电脑中打开的**APK ？**

我了解 Android 应用程序是用**Java**编写的，我已经签出：

[http://phpforandroid.net/](http://phpforandroid.net/)

但它没有回答是否可以将完整的 PHP 项目打包为 APK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:05:43.517

不，因为 PHP 是一种服务器端语言，你必须在设备上运行一个网络服务器***和***一个 MySQL 服务器（就像@deceze 说的那样）。

由于您已经开始使用 PHP 进行开发，我的建议是开发一个基于 Web 的应用程序，并让您的用户从 Android 设备上的一个非常轻量级的客户端访问它。您可以使用[**PhoneGap**](http://phonegap.com/)或[**AppCelerator 之**](http://www.appcelerator.com)类的东西来开发前端客户端应用程序，因为我猜您的才能在于 Web 开发 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:08:11.443

“当你只有一把锤子时，你就会开始像对待钉子一样对待每一个问题”

您为这项工作使用了错误的工具。PHP 不是用来编写交互式 GUI 应用程序的，它是用来运行服务器端脚本或命令行脚本的。即使您可以轻松地在 Android 手机上运行 PHP（您不能），这也是手机应用程序语言的错误选择。

你有两个选择

1）扔掉你迄今为止所做的工作，用更适合手头任务的语言重做

2) 将您的应用程序部署到可公开访问的网络服务器并通过手机的网络浏览器运行它。

如果您考虑一下，您需要将 Web 服务器、PHP 核心、应用程序使用的任何扩展以及 MySQL 服务器压缩到手持设备上。这是严重的矫枉过正。

为什么是 MySQL？Android 提供 SQLite 数据库支持。

# javascript - 有没有办法使用 classList 在一条指令中添加/删除多个类？

> ID：11115998
> 
> 赞同：251
> 
> 时间：2012-06-20T08:54:28.647
> 
> 标签：javascript, html

到目前为止，我必须这样做：

```
elem.classList.add("first");
elem.classList.add("second");
elem.classList.add("third"); 
```

虽然这在 jQuery 中是可行的，但像这样

```
$(elem).addClass("first second third"); 
```

我想知道是否有任何本地方式来添加或删除。

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2013-01-21T03:37:08.637

```
elem.classList.add("first");
elem.classList.add("second");
elem.classList.add("third"); 
```

是平等的

```
elem.classList.add("first","second","third"); 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2016-04-07T20:34:38.567

新的[扩展运算符](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)使将多个 CSS 类应用为数组变得更加容易：

```
const list = ['first', 'second', 'third'];
element.classList.add(...list); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2020-01-16T13:41:13.767

你可以像下面这样

**添加**

```
elem.classList.add("first", "second", "third"); 
```

**消除**

```
elem.classList.remove("first", "second", "third"); 
```

[参考](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)

**TLDR；**

在直截了当的情况下，上述删除应该可以工作。但是在删除的情况下，您应该在删除它们之前确保类存在

```
const classes = ["first","second","third"];
classes.forEach(c => {
  if (elem.classList.contains(c)) {
     element.classList.remove(c);
  }
}) 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-06-20T09:17:02.987

该`classList`属性确保不会将重复的类不必要地添加到元素中。为了保留这个功能，如果你不喜欢手写版本或 jQuery 版本，我建议添加一个`addMany`函数和`removeMany`to `DOMTokenList`（类型`classList`）：

```
DOMTokenList.prototype.addMany = function(classes) {
    var array = classes.split(' ');
    for (var i = 0, length = array.length; i < length; i++) {
      this.add(array[i]);
    }
}

DOMTokenList.prototype.removeMany = function(classes) {
    var array = classes.split(' ');
    for (var i = 0, length = array.length; i < length; i++) {
      this.remove(array[i]);
    }
} 
```

这些将可以像这样使用：

```
elem.classList.addMany("first second third");
elem.classList.removeMany("first third"); 
```

**更新**

根据您的评论，如果您只想在未定义它们的情况下为它们编写自定义方法，请尝试以下操作：

```
DOMTokenList.prototype.addMany = DOMTokenList.prototype.addMany || function(classes) {...}
DOMTokenList.prototype.removeMany = DOMTokenList.prototype.removeMany || function(classes) {...} 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-02-26T00:52:54.283

由于 just 中的`add()`方法`classList`允许传递单独的参数而不是单个数组，因此您需要`add()`使用 apply 进行调用。对于第一个参数，您需要`classList`从同一个 DOM 节点传递引用，第二个参数是您要添加的类数组：

```
element.classList.add.apply(
  element.classList,
  ['class-0', 'class-1', 'class-2']
); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-06-29T21:33:34.573

这是针对 IE 10 和 11 用户的解决方法，看起来非常简单。

```
var elem = document.getElementById('elem');

['first','second','third'].forEach(item => elem.classList.add(item));
```

```
<div id="elem">Hello World!</div>
```

或者

```
var elem = document.getElementById('elem'),
    classes = ['first','second','third'];

classes.forEach(function(item) {
    elem.classList.add(item);
});
```

```
<div id="elem">Hello World!</div>
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-06-20T08:56:59.570

向元素添加类

```
document.querySelector(elem).className+=' first second third'; 
```

> 更新：

删除一个类

```
document.querySelector(elem).className=document.querySelector(elem).className.split(class_to_be_removed).join(" "); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-04-26T21:22:13.140

较新版本的[DOMTokenList 规范](http://dom.spec.whatwg.org/#interface-domtokenlist)允许 and 的多个参数`add()`，`remove()`以及`toggle()`强制状态的第二个参数。

在撰写本文时，Chrome 支持 and 的多个参数`add()`，`remove()`但其他浏览器都不支持。IE 10 及更低版本、Firefox 23 及更低版本、Chrome 23 及更低版本等浏览器不支持`toggle()`.

我写了以下小的 polyfill 来帮助我渡过难关，直到支持扩展：

```
(function () {
    /*global DOMTokenList */
    var dummy  = document.createElement('div'),
        dtp    = DOMTokenList.prototype,
        toggle = dtp.toggle,
        add    = dtp.add,
        rem    = dtp.remove;

    dummy.classList.add('class1', 'class2');

    // Older versions of the HTMLElement.classList spec didn't allow multiple
    // arguments, easy to test for
    if (!dummy.classList.contains('class2')) {
        dtp.add    = function () {
            Array.prototype.forEach.call(arguments, add.bind(this));
        };
        dtp.remove = function () {
            Array.prototype.forEach.call(arguments, rem.bind(this));
        };
    }

    // Older versions of the spec didn't have a forcedState argument for
    // `toggle` either, test by checking the return value after forcing
    if (!dummy.classList.toggle('class1', true)) {
        dtp.toggle = function (cls, forcedState) {
            if (forcedState === undefined)
                return toggle.call(this, cls);

            (forcedState ? add : rem).call(this, cls);
            return !!forcedState;
        };
    }
})(); 
```

符合 ES5 标准的现代浏览器，`DOMTokenList`是预期的，但我在几个特定目标环境中使用这个 polyfill，所以它对我来说非常有用，但它可能需要调整将在旧浏览器环境（如 IE 8 和更低版本）中运行的脚本.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-12T20:24:50.040

我不得不相信一个非常简单、非花哨但可行的解决方案是跨浏览器：

创建这个函数

```
function removeAddClasses(classList,removeCollection,addCollection){
    for (var i=0;i<removeCollection.length;i++){ 
        classList.remove(removeCollection[i]); 
    }
    for (var i=0;i<addCollection.length;i++){ 
        classList.add(addCollection[i]); 
    }
}
```

像这样调用它：removeAddClasses(node.classList,arrayToRemove,arrayToAdd);

...其中 arrayToRemove 是要删除的类名数组： ['myClass1','myClass2'] 等等

...并且 arrayToAdd 是要添加的类名数组： ['myClass3','myClass4'] 等等

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-20T09:55:28.430

标准定义只允许添加或删除单个类。几个小的包装函数可以满足您的要求：

```
function addClasses (el, classes) {
  classes = Array.prototype.slice.call (arguments, 1);
  console.log (classes);
  for (var i = classes.length; i--;) {
    classes[i] = classes[i].trim ().split (/\s*,\s*|\s+/);
    for (var j = classes[i].length; j--;)
      el.classList.add (classes[i][j]);
  }
}

function removeClasses (el, classes) {
  classes = Array.prototype.slice.call (arguments, 1);
  for (var i = classes.length; i--;) {
    classes[i] = classes[i].trim ().split (/\s*,\s*|\s+/);
    for (var j = classes[i].length; j--;)
      el.classList.remove (classes[i][j]);
  }
} 
```

这些包装器允许您将类列表指定为单独的参数、带有空格或逗号分隔项的字符串或组合。有关示例，请参见[http://jsfiddle.net/jstoolsmith/eCqy7](http://jsfiddle.net/jstoolsmith/eCqy7)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-23T08:06:11.653

假设您有一个要添加的类数组，您可以使用 ES6 扩展语法：

`let classes = ['first', 'second', 'third']; elem.classList.add(...classes);`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-05T12:53:21.757

在字符串中添加由空格分隔的多个类的更好方法是将[Spread_syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)与[split](https://www.w3schools.com/jsref/jsref_split.asp)一起使用：

```
element.classList.add(...classesStr.split(" ")); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-19T14:56:27.893

我喜欢@rich.kelly 的回答，但我想使用与`classList.add()`（逗号分隔的字符串）相同的命名法，所以略有偏差。

```
DOMTokenList.prototype.addMany = DOMTokenList.prototype.addMany || function() {
  for (var i = 0; i < arguments.length; i++) {
    this.add(arguments[i]);
  }
}
DOMTokenList.prototype.removeMany = DOMTokenList.prototype.removeMany || function() {
  for (var i = 0; i < arguments.length; i++) {
    this.remove(arguments[i]);
  }
} 
```

所以你可以使用：

```
document.body.classList.addMany('class-one','class-two','class-three'); 
```

我需要测试所有浏览器，但这适用于 Chrome。
我们应该检查比存在更具体的东西`DOMTokenList.prototype.addMany`吗？究竟是什么原因导致`classList.add()`IE11 失败？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-08T12:33:25.963

我找到了一种非常简单的方法，它更现代、更优雅。

```
 const el = document.querySelector('.m-element');

// To toggle
['class1', 'class2'].map((e) => el.classList.toggle(e));

// To add
['class1', 'class2'].map((e) => el.classList.add(e));

// To remove
['class1', 'class2'].map((e) => el.classList.remove(e)); 
```

好消息是您可以扩展类数组或轻松使用任何来自 API 的数组。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-16T17:25:15.713

另一个 polyfill`element.classList`在[这里](https://github.com/eligrey/classList.js/)。我是通过[MDN](https://developer.mozilla.org/en/docs/Web/API/Element/classList)找到的。

我包含该脚本并按`element.classList.add("first","second","third")`预期使用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-17T02:47:52.380

最好的**解决方案**之一是检查元素是否存在，然后继续添加或可能删除，最重要的是如果**元素为空**，则**删除**它。

```
/**
 * @description detect if obj is an element
 * @param {*} obj
 * @returns {Boolean}
 * @example
 * see below
 */
function isElement(obj) {
  if (typeof obj !== 'object') {
    return false
  }
  let prototypeStr, prototype
  do {
    prototype = Object.getPrototypeOf(obj)
    // to work in iframe
    prototypeStr = Object.prototype.toString.call(prototype)
    // '[object Document]' is used to detect document
    if (
      prototypeStr === '[object Element]' ||
      prototypeStr === '[object Document]'
    ) {
      return true
    }
    obj = prototype
    // null is the terminal of object
  } while (prototype !== null)
    return false
}

/*
 * Add multiple class
 * addClasses(element,['class1','class2','class3'])
 * el: element | document.querySelector(".mydiv");
 * classes: passing:: array or string : [] | 'cl1,cl2' | 'cl1 cl2' | 'cl1|cl2'
 */
function addClasses(el, classes) {
  classes = Array.prototype.slice.call(arguments, 1);
  if ( isElement(el) ){ //if (document.body.contains(el)
    for (var i = classes.length; i--;) {
      classes[i] = Array.isArray(classes[i]) ? classes[i]: classes[i].trim().split(/\s*,\s*|\s+/);
      for (var j = classes[i].length; j--;)
        el.classList.add(classes[i][j]);
    }
  }
}

/*
 * Remove multiple class
 * Remove attribute class is empty
 * addClasses(element,['class1','class2','class3'])
 * el: element | document.querySelector(".mydiv");
 * classes: passing:: array or string : [] | 'cl1,cl2' | 'cl1 cl2' | 'cl1|cl2'
 */
function removeClasses(el, classes) {
  classes = Array.prototype.slice.call(arguments, 1);
  if ( isElement(el) ) {
    for (var i = classes.length; i--;) {
      classes[i] = Array.isArray(classes[i]) ? classes[i]: classes[i].trim().split(/\s*,\s*|\s+/);
      for (var j = classes[i].length; j--;)
        el.classList.remove(classes[i][j]);
        let cl = el.className.trim();
        if (!cl){
          el.removeAttribute('class');
        }
    }
  }
}

var div = document.createElement("div");
div.id = 'test'; // div.setAttribute("id", "test");
div.textContent = 'The World';
//div.className = 'class';
// possible use: afterend, beforeend
document.body.insertAdjacentElement('beforeend', div); 

// Everything written above you can do so:
//document.body.insertAdjacentHTML('beforeend', '<div id="text"></div>');

var el = document.querySelector("#test");
addClasses(el,'one,two,three,four');
removeClasses(el,'two,two,never,other');
el.innerHTML = 'I found: '+el.className;
// return : I found: four three one
```

```
#test {
  display: inline-block;
  border: 1px solid silver;
  padding: 10px;
}
```