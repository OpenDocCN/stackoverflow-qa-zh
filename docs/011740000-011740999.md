# StackOverflow 问答 11740000-11740999

# sql - 检查文件是否存在于sql server中？

> ID：11740000
> 
> 赞同：56
> 
> 时间：2012-07-31T12:24:56.737
> 
> 标签：sql, sql-server, sql-server-2008

解决方案：[http ://www.tech-recipes.com/rx/30527/sql-server-how-to-check-if-a-file-exists-in-a-directory/](http://www.tech-recipes.com/rx/30527/sql-server-how-to-check-if-a-file-exists-in-a-directory/)

使用stackoverflow问题发表了一篇关于这个问题的帖子来帮助其他人。

```
id  filepath

1   C:\vishwanath\21776656.docx
2   C:\vishwanath\vish\s_srv_req_2009.txt
3   C:\Users\dalvi\DW\DW20SharedAmd64.exe
4   C:\Users\dalvi\1.txt 
```

我在我的数据库服务器中创建了这样的表，我已经在它的文件路径列中存储了文件路径，现在我必须使用 sql 检查文件是否存在于我的机器中，如果它存在我需要在我的表显示是，如果存在，不，它不存在。

我编写了适用于 1 个文件的代码，但我不知道如何将它用于我的表格。

```
DECLARE @isExists INT
exec master.dbo.xp_fileexist 'C:\vishwanath\21776656.docx', 
@isExists OUTPUT
SELECT case @isExists 
when 1 then 'Yes' 
else 'No' 
end as isExists 
```

最终输出应该是这样的

```
id  filepath                                 Isexists

1   C:\vishwanath\21776656.docx               Yes
2   C:\vishwanath\vish\s_srv_req_2009.txt     Yes
3   C:\Users\dalvi\DW\DW20SharedAmd64.exe     Yes
4   C:\Users\dalvi\1.txt                      No 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-07-31T12:45:52.680

像这样创建一个函数：

```
CREATE FUNCTION dbo.fn_FileExists(@path varchar(512))
RETURNS BIT
AS
BEGIN
     DECLARE @result INT
     EXEC master.dbo.xp_fileexist @path, @result OUTPUT
     RETURN cast(@result as bit)
END;
GO 
```

编辑您的表并添加一个计算列 (IsExists BIT)。将表达式设置为：

```
dbo.fn_FileExists(filepath) 
```

然后只需选择：

```
SELECT * FROM dbo.MyTable where IsExists = 1 
```

***更新***：

要在计算列之外使用函数：

```
select id, filename, dbo.fn_FileExists(filename) as IsExists
from dbo.MyTable 
```

***更新***：

如果函数为已知文件返回 0，则可能存在权限问题。确保 SQL Server 的帐户具有足够的权限来访问文件夹和文件。只读应该足够了。

是的，默认情况下，“网络服务”帐户没有足够的权限进入大多数文件夹。右键单击有问题的文件夹并选择“属性”，然后单击“安全”选项卡。单击“编辑”并添加“网络服务”。单击“应用”并重新测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:43:11.267

未经测试，但你可以尝试这样的事情：

```
Declare @count as int
Set @count=1
Declare @inputFile varchar(max)
Declare @Sample Table
(id int,filepath varchar(max) ,Isexists char(3))

while @count<(select max(id) from yourTable)
BEGIN
Set @inputFile =(Select filepath from yourTable where id=@count)
DECLARE @isExists INT
exec master.dbo.xp_fileexist @inputFile , 
@isExists OUTPUT
insert into @Sample
Select @count,@inputFile ,case @isExists 
when 1 then 'Yes' 
else 'No' 
end as isExists
set @count=@count+1
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:58:46.640

尝试以下代码来验证文件是否存在。您可以创建用户函数并在存储过程中使用它。根据需要修改它：

```
Set NOCOUNT ON

 DECLARE @Filename NVARCHAR(50)
 DECLARE @fileFullPath NVARCHAR(100)

 SELECT @Filename = N'LogiSetup.log'
 SELECT @fileFullPath = N'C:\LogiSetup.log'

create table #dir

(output varchar(2000))

 DECLARE @cmd NVARCHAR(100)
SELECT @cmd = 'dir ' + @fileFullPath     

insert into #dir    

exec master.dbo.xp_cmdshell @cmd

--Select * from #dir

-- This is risky, as the fle path itself might contain the filename
if exists (Select * from #dir where output like '%'+ @Filename +'%')

       begin    
              Print 'File found'    
              --Add code you want to run if file exists    
       end    
else    
       begin    
              Print 'No File Found'    
              --Add code you want to run if file does not exists    
       end

drop table #dir 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T04:11:02.057

您可以使用游标实现此目的，但性能比 whileloop 慢得多。这是代码：

```
set nocount on
declare cur cursor local fast_forward for
    (select filepath from Directory)
open cur;
declare @fullpath varchar(250);
declare @isExists int;

fetch from cur into @fullpath
while @@FETCH_STATUS = 0
    begin
        exec xp_fileexist @fullpath, @isExists out
        if @isExists = 1            
            print @fullpath + char(9) + char(9) + 'file exists'
        else            
            print @fullpath + char(9) + char(9) + 'file does not exists'
        fetch from cur into @fullpath
    end
close cur
deallocate cur 
```

或者如果你想将它集成到你的前端，你可以把它放在一个 tempTable 中。

```
create proc GetFileStatus as
begin
    set nocount on
    create table #tempFileStatus(FilePath varchar(300),FileStatus varchar(30))
    declare cur cursor local fast_forward for
        (select filepath from Directory)
    open cur;
    declare @fullpath varchar(250);
    declare @isExists int;

    fetch from cur into @fullpath
    while @@FETCH_STATUS = 0
        begin
            exec xp_fileexist @fullpath, @isExists out
            if @isExists = 1                
                insert into #tempFileStatus values(@fullpath,'File exist')
            else
                insert into #tempFileStatus values(@fullpath,'File does not exists')
            fetch from cur into @fullpath
        end
    close cur
    deallocate cur
    select * from #tempFileStatus
    drop table #tempFileStatus
end 
```

然后使用以下方法调用它：

```
exec GetFileStatus 
```

# java - 如何使用 JScrollBar 缩放图像？

> ID：11740002
> 
> 赞同：0
> 
> 时间：2012-07-31T12:24:59.593
> 
> 标签：java, image, swing, zooming, jscrollbar

我想用来`JScrollBar`放大和缩小图像，但它不起作用。我的代码有什么问题？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

 public class piczoominandout extends JFrame
{
  public JScrollBar scroll;
  public JLabel lbl;
  public Image image;
  public int x, y, width, height;

  public piczoominandout()
 {
   super("picture zoom");
   Toolkit toolkit = Toolkit.getDefaultToolkit();
   image = toolkit.getImage("Snake.jpg");
   Container c = getContentPane();
   ImagePanel imagePane = new ImagePanel(image);

   c.setLayout(new BorderLayout());
   lbl = new JLabel("0");
   c.add(lbl, BorderLayout.SOUTH);
   scroll = new JScrollBar(
           JScrollBar.HORIZONTAL,50,10,0,100);
   scroll.addAdjustmentListener(new AdjustmentListener() {
     public void adjustmentValueChanged(
                         AdjustmentEvent evt) {
        JScrollBar s = (JScrollBar)evt.getSource();
        if ( !s.getValueIsAdjusting() ) {
           int v = (int)s.getValue();
           width +=v;
           height +=v;

           repaint();
           lbl.setText(Integer.toString(v));
        }
     } });
    c.add(imagePane,BorderLayout.CENTER );

    c.add(scroll, BorderLayout.NORTH);
 }
 class ImagePanel extends JPanel
 {
  public ImagePanel(Image img) { image = img;}
  public void paintComponent(Graphics g)
  {
   Insets ins = getInsets();
   super.paintComponent(g);
   width = image.getWidth(this);
   height = image.getHeight(this);
   x = ins.left+5; y = ins.top+5;
   g.drawImage(image,x,y,width,height,this);
  }
 }

  public static void main(String[] args)
  {
   SwingUtilities.invokeLater(new Runnable() {
     public void run()
     {
      piczoominandout frame = new piczoominandout();
      frame.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
      frame.setSize(600,300);
      frame.setVisible(true);

       }
     });
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:28:45.110

您的代码中有很多错误。它需要普遍的重新思考。

我只会给你一些基本的提示：

*   您使用`ImagePanel`不设置侦听器的构造函数（注意`NullPointerException`）；
*   您没有缩放图像-`paintComponent`您只是按原样绘制图像；
*   您正在添加到`width`侦听器`height`滚动值并尝试将它们重置`paintComponent`- 这不是您应该做的。提示：有一个`Graphics`类方法：`g.drawImage(image, x, y, width, height, this);`;
*   每个 Swing 组件都必须在 EDT 上创建和更改：

* * *

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JFrame frame = new JFrame();
            //etc.
        }
    });
} 
```

# objective-c - 使用 Objective C 在 Xcode 中制作一个带有项目符号的文本视图

> ID：11740009
> 
> 赞同：0
> 
> 时间：2012-07-31T12:25:17.137
> 
> 标签：objective-c, ios, textview, bulletedlist

我正在尝试制作一个严格标有项目符号的文本视图。因此，当您开始打字时，它会变成子弹。当你点击进入时，它会制造一个子弹。我发现了一些代码可以创建一个项目符号列表，但它最初只将一些文本写入文本视图：

```
myTextView.text = @"\u2022"; 
```

这是一个文本视图而不是一个文本字段（不要认为这会有所不同），它适用于 ios，但有人知道你会怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:49:12.170

这个 textView 代表是你的朋友：

*   (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)范围替换Text:(NSString *)text

所以当人们输入文本时会发生什么，你会得到这个委托方法，如果你返回 YES，你可以看到将被添加的文本。现在您无法更改替换文本，但您可以向 UITextView 询问所有当前文本，根据需要进行修改，然后返回 NO。

# java - Clojure/Java - 弹出窗口

> ID：11740012
> 
> 赞同：4
> 
> 时间：2012-07-31T12:25:24.600
> 
> 标签：java, clojure

有时在 Clojure 中使用外部库时，会打开这个奇怪的窗口。它被称为`clojure.main`。它看起来像一个新的应用程序，它有一个可爱的小咖啡杯作为图标。

请原谅我对 Java 领域的无知——我意识到这可能是一个愚蠢的问题，但我在 Internet 和 Google 上的任何地方都找不到它。

这个应用程序在做什么？为什么以及何时出现？

**编辑**：运行 leiningen 2、Clojure 1.3 和 Noir 1.2.1。这是在 OSX 上。

据我所知，触发它的代码是以下函数：

```
(defn make-thumbnail [filename new-filename width]
    (let [img (javax.imageio.ImageIO/read (as-file filename))
            imgtype (java.awt.image.BufferedImage/TYPE_INT_ARGB)
            width (min (.getWidth img) width)
            height (* (/ width (.getWidth img)) (.getHeight img))
            simg (java.awt.image.BufferedImage. width height imgtype)
            g (.createGraphics simg)]
        (.drawImage g img 0 0 width height nil)
        (.dispose g)
        (javax.imageio.ImageIO/write simg "png" (as-file new-filename)))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:12:07.563

这可能与[AWT 未在无头模式下运行有关](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/)。您是否尝试将`java.awt.headless`系统属性设置为`true`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T14:48:08.100

如前所述，在 project.clj 中`Honza Pokorny`添加`"-Djava.awt.headless=true"`：`jvm-opts`

它应该如下所示：

```
:jvm-opts ["-Xmx1g" "-Djava.awt.headless=true"] 
```

# java - 在 for 循环中重新创建 ArrayList 的最快方法

> ID：11740013
> 
> 赞同：6
> 
> 时间：2012-07-31T12:25:29.390
> 
> 标签：java, arraylist

在 Java 中，对一个巨大的矩阵 X 使用以下函数来打印其列不同的元素：

```
// create the list of distinct values
List<Integer> values = new ArrayList<Integer>();

// X is n * m int[][] matrix
for (int j = 0, x; j < m; j++) {
    values.clear();
    for (int i = 0; i < n; i++) {
        x = X[i][j];
        if (values.contains(x)) continue;
        System.out.println(x);
        values.add(x);
    }
} 
```

首先，我按列（索引 j）和行（索引 i）在内部进行迭代。

对于不同的矩阵，这个函数会被调用数百万次，所以应该优化代码以满足性能要求。我想知道值数组。`values = new ArrayList<Integer>();`使用或`values = null`代替会更快`values.clear()`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T12:27:39.560

更有效的是使用[Set](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)而不是列表，例如[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)实现。contains 方法将在 O(1) 中运行，而不是在 O(n) 中运行一个列表。您可以通过仅调用 add 方法来节省一次调用。

至于您的具体问题，我只会在每个循环中创建一个新 Set - 对象创建并不那么昂贵，可能比清除集合要少（正如底部的基准所证实的那样 - 请参阅编辑 2 中最有效的版本）：

```
for (int j = 0, x; j < m; j++) {
    Set<Integer> values = new HashSet<Integer>();
    for (int i = 0; i < n; i++) {
        x = X[i][j];
        if (!values.add(x)) continue; //value.add returns true if the element was NOT in the set before
        System.out.println(x);
    }
} 
```

但是，知道哪个更快（新对象与清除）的唯一方法是分析代码的那部分并检查两个版本的性能。

**编辑**

我运行了一个快速基准测试，清晰的版本似乎比在每个循环中创建一个集合要快一些（大约 20%）。您仍然应该检查您的数据集/用例，哪个更好。使用我的数据集更快的代码：

```
Set<Integer> values = new HashSet<Integer>();
for (int j = 0, x; j < m; j++) {
    for (int i = 0; i < n; i++) {
        x = X[i][j];
        if (!values.add(x)) continue; //value.add returns true if the element was NOT in the set before
        System.out.println(x);
    }
    values.clear();
} 
```

**编辑 2**

通过在每个循环中创建一组大小合适的新代码，可以获得实际上更快的代码版本：

```
for (int j = 0, x; j < m; j++) {
    Set<Integer> values = new HashSet<Integer>(n, 1); //right size from the beginning
    for (int i = 0; i < n; i++) {
        x = X[i][j];
        if (!values.add(x)) continue; //value.add returns true if the element was NOT in the set before
        System.out.println(x);
    }
} 
```

**结果总结**

JVM 预热 + JIT 后：

```
Set<Integer> values = new HashSet<Integer>(n, 1); =====> 280 ms
values.clear();                                   =====> 380 ms
Set<Integer> values = new HashSet<Integer>();     =====> 450 ms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:33:37.353

*（自 2015 年 9 月 4 日起更正以包括可重复的基准和结论）*

*   ~~当然`values.clear()`比创建新对象更快（只需将最后一项索引设置为零）。~~ 几乎可以肯定 a**`values.clear()`**会比创建一个新对象**更快。**在**`ArrayList`**您最初使用的情况下，它只会将插入索引设置为零。

*   正如我在 PD#1 中评论的那样，对于这种元素是整数的情况， **BitSet**可能是**最快的方法**（假设值的范围不是太宽。但这可能对任何其他类型的元素都没有用。

*   还~~正如所说~~ *正如我与* [Assylias 的回答](https://stackoverflow.com/a/11740055/1117429)不谋而合， **HashSet 是比 ArrayList 更好的选择**（*假设`hashCode()`提供了一个不错的分布，不会导致我们达到 O(N) 性能*）。

    在这种`HashSet`情况下，直觉还表明`clear()`（基本上将`HashSet#table`“鸽洞”数组设置为空）比构建一个全新的集合（在任何情况下都需要将同一个表初始化/重置为零）更快。但在这种特殊情况下，事情会反过来发生。Assylias 发表了他的研究结果。不幸的是，我不得不自己编写我的基准测试代码，以了解这怎么会发生。我在 PD#3 中讨论了这个问题

    无论如何，主要的事情是，因为为每次迭代创建一个全新的 HashSet 并没有实质性的损失，这样做是有意义的（因为它更简单），除非我们必须更加关心性能和资源。

*   关于性能的另一个问题是**I/O**。`System.out.println()`示例代码中的那一行可能会自动`flush()`将**瓶颈转移到 console/stdout**。一种解决方法可能是添加到`StringBuffer`. 除非有一个阅读器进程热切地等待该输出，否则将写入延迟到循环结束可能是有意义的。

这将是我的尝试：

```
Set<Integer> values = new HashSet<Integer>();
// (PD 1) Or new BitSet(max_x - min_x + 1);
// (PD 2) Or new HashSet((int)Math.ceil(n/0.75));
StringBuffer sb = new StringBuffer(); // appends row values for printing together.

for (int j = 0, x; j < m; j++) {
    values.clear();
    sb.setLength(0);
    for (int i = 0; i < n; i++) {
         x = X[i][j];
         if (! values.contains(x)){
             sb.append(x+"\n");
             values.add(x);
         }
    }
    System.out.print(sb);
} 
```

* * *

PD1。另外，如果您可能考虑使用**[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)**. 它具有**O(1)**访问性能（即使在最坏的情况下，因为**没有冲突**）。它最适合范围从 0 开始的整数（否则可能需要转换）和在可能分布中足够密集的实际值群体。

*   例如，如果您检查 Unicode 代码点的出现，您将需要一个 139,264 字节长的数组 (17 (planes) * 2 ^(16) (codepoints/plane) / 8)，其中可能您在 100 个字符长中仅使用 40 个不同的字符短信，可能有点过头了。但是，如果您仅限于 ISO-Latin-1 中的 256 个可能值。（8 字节位集），这实际上是一个完美的选择。

~~PD2。此外，正如 Assylias 所说，为 HashSet 设置初始大小可能会有所帮助。作为`threshold = (int)(capacity * loadFactor)`，您可能希望`initialCapacity=(int)Math.ceil(n/0.75)`确保没有调整大小。~~ *这个问题属于 Assylias 的帖子（我没有为自己使用），以这种方式讨论是不合适的*

* * *

**PD3（2015 年 9 月：3 年后）**我碰巧重新审视了这个问题，我对 Assylas 结果非常感兴趣，我编写了自己的微基准（我包括在内，因此任何人都可以复制）。这些是我的结论：

*   我提出的**`BitSet`**（注意：不适合非整数和非常稀疏的分布）明显优于 HashSet 的所有风格（在密集分布中大约快 4 倍）
*   对大小为 1000的**高度填充集**的测试显示有利于创建**新**集合（7.7" vs 9.8"）的轻微**优势。**但是，vs的“试运行”会产生相反的结果（9.5" vs 7.5"）。我的猜测是，这是因为重置时缓存无效的惩罚（设置它不是）。**`HashSet#clear()``new HashSet()``HashSet.table``null``null`**
***   **事先知道最佳尺寸**也是一个很大的优势（这可能并不总是可行）。该**`HashSet.clear()`方法更具适应性**，并且可以更好地低估大小。高估不会意味着太大的差异，但如果内存是一个问题，则可能不是一个好策略。*   结果清楚地表明，如今**创建对象和分配内存并不是一个大问题**（参见[Programmers.SE](https://softwareengineering.stackexchange.com/questions/149563/should-we-avoid-object-creation-in-java)）。**但是，重用**对象**仍然**应该是一个需要考虑**的选项。**参见[drmirror](http://drmirror.net/2013/06/06/object-creation/)中的示例， 即使在 JDK 1.6 演进之后，重用实例 (CharBuffer) 也会使性能翻倍。*   我还想知道 Assylias 使用 a 的影响是什么**`loadFactor==1.0f`**（HashSet 不会调整大小直到`size > table.length*loadFactor`，这与我建议他的不同，但如果没有冲突就完美了）。大约`loadFactor==0.75f`需要 1.33 倍的表空间以换取避免 25% 的冲突。我的测试没有显示这种情况下默认设置的任何优势。**

 **这是我用于测试的课程。抱歉，如果它可能在某些方面过冲而在其他方面缺乏（没有热身，只需执行足够长的时间，以便实现有机会窒息他自己的垃圾）。

```
/**
 * Messing around this StackOverflow question:   https://stackoverflow.com/questions/11740013/fastest-way-to-recreate-the-arraylist-in-a-for-loop/ .
 * Quite surprisingly new HashSet() (which should imply actual memory initialization) is faster than HashSet.clear() in the given scenario.
 * Primary goal is to test this phenomenon (new vs clear) under different scenarios.
 * Secondarily a bit about the BitSet and the HashSet loadFactor is tested.
 * @author Javier
 */
public class TestSetClear2 {

public static interface MicroBenchmark {
    public String getName();
    /**
     * 
     * @param dataSet Data set to insert in the collection
     * @param initialSize Initial size for the collection. Can try to be optimal or try to fool.
     * @param iterations Number of times to go through the dataSet over and over
     */
    public void run(int[] dataSet, int initialSize, int iterations);
}

/** Bad initial case. Based in question code */
public static class MBList implements MicroBenchmark {
    @Override public String getName() { return "ArrayList.clear()"; }
    @Override public void run(int[] data, int initialSize, int n) {
        // Not taking initial size into account may result in a resizing penalty in the first iteration
        // But will have an adequate size in following iterations, and wont be fooled by bad estimations. 
        List<Integer> values = new ArrayList<Integer>();
        for (int iter = 0; iter < n; iter++) {
            values.clear();
            for (int i = 0; i < data.length; i++) {
                int x = data[i];
                if (values.contains(x)) continue;
                values.add(x);
            }
        }
    }
}

/** new HashSet(N,1) for every iteration. Reported as best by assylias. */
public static class MBNewHashSetN1 implements MicroBenchmark {
    @Override public String getName() { return "new HashSet(N,1)"; }
    @Override public void run(int[] data, int initialSize,  int n) {
        for (int iter = 0; iter < n; iter++) {
            Set<Integer> values = new HashSet<>(initialSize, 1.0f); // 1.0 loadfactor optimal if no collisions.
            for (int i = 0; i < data.length; i++) {
                int x = data[i];
                if (values.contains(x)) continue;
                values.add(x);
            }
        }
    }
}

// No need to implement raw new HashSet() (reported as worse). Will be enough fooling to initialize to 16 so it succumbs to resizing.

/** HashsetClear for every iteration. Attempted by Assylias and Javier. Clear() does not perform as well as expected under basic tests. */
public static class MBHashSetClear implements MicroBenchmark {
    private float loadFactor; // Allow loadFactor to check how much 1.0 factor affects if there are collisions.
    private String name;
    public MBHashSetClear(float loadFactor) {
        this.loadFactor = loadFactor;
        name = String.format(Locale.ENGLISH, "HashSet(N,%f).clear()", loadFactor);
    }
    @Override public String getName() { return name; }
    @Override public void run(int[] data, int initialSize, int n) {
        HashSet<Integer> values = new HashSet<>((int)Math.ceil(initialSize/loadFactor), loadFactor);// Just the size for loadfactor so it wont resize.
        for (int iter = 0; iter < n; iter++) {
            values.clear();
            for (int i = 0; i < data.length; i++) {
                int x = data[i];
                if (values.contains(x)) continue;
                values.add(x);
            }
        }
    }
}

/** Javier BitSet. Might clearly outperform HashSet, but only on the very specific constraints of the test (non negative integers, not hugely big). */
public static class MBBitSet implements MicroBenchmark {
    @Override public String getName() { return "BitSet.clear()"; }
    @Override public void run(int[] data, int distributionSize, int n) {
        BitSet values = new BitSet(distributionSize);
        for (int iter = 0; iter < n; iter++) {
            values.clear();
            for (int i = 0; i < data.length; i++) {
                int x = data[i];
                if (values.get(x)) continue;
                values.set(x);
            }
        }
    }
}

public static void main(String[] args) {
    final MicroBenchmark mbNew = new MBNewHashSetN1();
    // Create with same loadFactor as MBNewHashSetN1\. So we compare apples with apples (same size of handled table, same collisions).
    final MicroBenchmark mbClear = new MBHashSetClear(1.0f);
    final MicroBenchmark mbClear075 = new MBHashSetClear(0.75f);
    final MicroBenchmark mbBitset = new MBBitSet();
    final MicroBenchmark mbList = new MBList(); // Will have a taste of O(N) with a not too bit dataset.

    // warmup. trigger the cpu high performance mode? Fill the heap with garbage?
    //mbNew.run(dataSetE3xE3, 1000, (int)1e5); // Using new HS might give a bit advantage?

    int timePerTest = 10000;
    int distributionSize, initialCapacity, datasetLength;

    // 1000 long and values 0..999 (1e3 x 1e3). Optimal initial capacity
    distributionSize = 1000; datasetLength = 1000; initialCapacity = 1000;
    final int[] dataSetE3xE3 = generateRandomSet(1000,1000);
    runBenchmark("E3xE3", dataSetE3xE3, distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear, mbClear075, mbBitset);
    // repeat with underestimated initial size. Will incur in resizing penalty
    initialCapacity = 16; // Default initial
    runBenchmark("E3xE3+underSize", dataSetE3xE3, distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear, mbBitset);
    // repeat with overestimated initial size. larger garbage and clearing.
    initialCapacity = 100000; // oversized will force to handle large tables filled with 0 / null.
    runBenchmark("E3xE3+overSize", dataSetE3xE3, distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear, mbBitset);
    // Dry run (not rum). what if we focus on the new and clear operations. Just 1 item so clear() is forced to traverse the table.
    datasetLength = 1; distributionSize = 1000; initialCapacity = 1000;
    runBenchmark("E3xE3-DryRun", generateRandomSet(datasetLength, distributionSize),
            distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear);

    // check for * 100 and / 100 sizes.
    distributionSize = datasetLength = initialCapacity = 10;
    runBenchmark("E1xE1", 
            generateRandomSet(datasetLength, distributionSize),
            distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear, mbList);
    distributionSize = datasetLength = initialCapacity = 100000;
    runBenchmark("E5xE5", generateRandomSet(datasetLength, distributionSize),
            distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear);

    // Concentrated distributions might behave as with oversized?
    datasetLength=10000; distributionSize=10; initialCapacity=Math.min(datasetLength, distributionSize);
    runBenchmark("E4xE1", 
            generateRandomSet(datasetLength, distributionSize),
            distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear);

    // Sparse distributions might allow mild collision. Also adverse for BitSet.
    // TODO Generate a greater/known amount of collisions
    datasetLength=10000; distributionSize=(int)1e6; initialCapacity=Math.min(datasetLength, distributionSize);
    runBenchmark("E4xE6", 
            generateRandomSet(datasetLength, distributionSize),
            distributionSize, timePerTest, initialCapacity,
            mbNew, mbClear, mbClear075);

}

private static void runBenchmark(String testName, int[] dataSet, int distributionSize, int timePerTest
        , int initialCapacity, MicroBenchmark ... testees /* not testes */) {
    // How many iterations? Will use first testee to callibrate.
    MicroBenchmark curTest = testees[0];
    long t0 = System.nanoTime();
    long ellapsed = 0L;
    final long minToCallibrate = (long)0.5e9; // half second
    int iterations = 1;
    while (ellapsed < minToCallibrate) {
        curTest.run(dataSet, initialCapacity, iterations);

        iterations *= 2; // same as <<= 1
        ellapsed = System.nanoTime() - t0;
    }
    // calculation is not laser-sharp precise (actually executed iterations -1, and some extra initializations).
    final int nIterations = (int) ((double)iterations * timePerTest  * 1e6 /* nanos/millis */ / ellapsed);

    // Do actual benchmark
    System.out.printf(Locale.ENGLISH, "dataset:{name=%s,length:%d,distrib:%d,capacity0:%d,iterations:%d}\n",
            testName, dataSet.length, distributionSize, initialCapacity, nIterations);

    for (MicroBenchmark testee : testees) {
        t0 = System.nanoTime();
        testee.run(dataSet, initialCapacity, nIterations);
        ellapsed = System.nanoTime() - t0;
        System.out.printf(Locale.ENGLISH, "%s : %5.3f\n", testee.getName(), ellapsed/1e9 );

    }

}

private static int[] generateRandomSet(int lengthOfSet, int distributionSize) {
    Random r = new Random();
    int[] result = new int[lengthOfSet];
    for (int i = 0; i < lengthOfSet; i++) {
        result[i] = r.nextInt(distributionSize);
    }
    return result;
}
} 
```

这是我的结果（使用 JDK 1.8.0_31 - 64 bits - Windows 7 ）

```
dataset:{name=E3xE3,length:1000,distrib:1000,capacity0:1000,iterations:514241}
new HashSet(N,1) : 7.688
HashSet(N,1.000000).clear() : 9.796
HashSet(N,0.750000).clear() : 9.923
BitSet.clear() : 1.990
dataset:{name=E3xE3+underSize,length:1000,distrib:1000,capacity0:16,iterations:420572}
new HashSet(N,1) : 9.735
HashSet(N,1.000000).clear() : 6.637
BitSet.clear() : 1.611
dataset:{name=E3xE3+overSize,length:1000,distrib:1000,capacity0:100000,iterations:143032}
new HashSet(N,1) : 9.948
HashSet(N,1.000000).clear() : 10.377
BitSet.clear() : 0.447
dataset:{name=E3xE3-DryRun,length:1,distrib:1000,capacity0:1000,iterations:18511486}
new HashSet(N,1) : 9.583
HashSet(N,1.000000).clear() : 7.523
dataset:{name=E1xE1,length:10,distrib:10,capacity0:10,iterations:76177852}
new HashSet(N,1) : 9.988
HashSet(N,1.000000).clear() : 10.521
ArrayList.clear() : 7.915
dataset:{name=E5xE5,length:100000,distrib:100000,capacity0:100000,iterations:2892}
new HashSet(N,1) : 9.764
HashSet(N,1.000000).clear() : 9.615
dataset:{name=E4xE1,length:10000,distrib:10,capacity0:10,iterations:170386}
new HashSet(N,1) : 9.843
HashSet(N,1.000000).clear() : 9.708
dataset:{name=E4xE6,length:10000,distrib:1000000,capacity0:10000,iterations:36497}
new HashSet(N,1) : 9.686
HashSet(N,1.000000).clear() : 10.079
HashSet(N,0.750000).clear() : 10.008 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:28:06.247

您可以`ArrayList.clear();`在内存中使用此保持地址 ArrayList，而不会对该地址产生垃圾收集器的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:34:02.077

你应该使用 .clear() 方法，使用它你不需要一次又一次地为你的变量分配内存。**

# asp.net-mvc-3 - 在本地主机上运行 MVC3 应用程序时如何禁用 NLog 发送电子邮件

> ID：11740014
> 
> 赞同：1
> 
> 时间：2012-07-31T12:25:29.683
> 
> 标签：asp.net-mvc-3, nlog

有谁知道在本地主机上的 MVC3 应用程序上运行测试时如何禁用 NLog 应用程序发送电子邮件？我希望 NLog 仅在应用程序部署到网络服务器时出错时才发送电子邮件。为了实现这一点，我必须写什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:49:54.273

您可以尝试通过更改邮件设置来“禁用”邮件发送：

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="SpecifiedPickupDirectory">
                <specifiedPickupDirectory pickupDirectoryLocation="c:\whateverfolder"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

这会将电子邮件放在您计算机上的一个文件夹中。这并不能真正阻止邮件，但会阻止它们被发送。

如果您正在运行手动或自动测试，还可以更轻松地验证电子邮件是否正在“发送”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:34:20.490

您可以为此使用[过滤器](http://nlog-project.org/wiki/Filters)。如果服务器名称是 localhost，您可以使用[when-filter](http://nlog-project.org/wiki/When_filter)过滤邮件目标的消息。这假设您使用 localhost 请求站点。但是，您可以为条件使用任何[布局渲染器](http://nlog-project.org/wiki/Layout_renderers)。

请参阅下面的示例配置，它适用于我。

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <targets>
  <target xsi:type="Mail" name="m" layout="${message}" subject="Log" 
          to="mail@domain.com" from="app@domain.com" body="${message}"
          smtpServer="localhost">
  </target>
 </targets>
 <rules>
  <logger name="*" minlevel="Fatal" writeTo="m" >
    <filters>
      <when condition="equals('${aspnet-request:serverVariable=SERVER_NAME}','localhost')" action="Ignore" />
    </filters>
  </logger>
 </rules>
</nlog> 
```

# ruby-on-rails-3 - 在创建期间在一个事务中将记录添加到多个模型

> ID：11740018
> 
> 赞同：0
> 
> 时间：2012-07-31T12:25:38.243
> 
> 标签：ruby-on-rails-3, transactions

我有以下新的和创建的动作。它们用于在多租户应用程序中创建新帐户。它工作正常，但即使是新手，我也知道这是不正确的。这是我的问题，我怎样才能使创建操作更精简，以便遵循最佳实践？而且，我怎样才能使所有查询在一笔交易下提交？

这是我的方法：

```
 def new
    @account = Account.new
    @user = @account.users.build()
    @account.accounts_users.build()
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @account }
    end
  end

  def create
    @account = Account.new(params[:account])
    respond_to do |format|
      if @account.save
         @user = User.find_by_email(params[:account][:users_attributes]["0"][:email])
        Profile.create(:user_id => @user.id)
        @group = @account.groups.create(:name => 'Default', :user_id => @user)
        @group.members.create(:account_id => @account, :user_id => @user)
        Role.all.each do |role|
          @user.roles_users.create(:role_id => role.id, :account_id => @account)
        end

        flash[:domain] = @account.subdomain
        format.html { redirect_to thanks_url }
        format.json { render json: @account, status: :created, location: @account }
      else
        format.html { render action: "new" }
        format.json { render json: @account.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我的模型是：

*   帐户（has_many :users; :through account_users）
*   用户（has_one :profile）
*   Accounts_User（belongs_to :account；belongs_to :user）
*   组（has_many：members，as：membership；belongs_to：user）
*   成员（belongs_to :membership, :polymorphic => true）
*   个人资料（belongs_to :user）
*   角色（has_many :roles_users; has_many :users :through => :roles_users; has_many :accounts, :through => :roles_users）
*   RolesUser（belongs_to :user；belongs_to :account；belongs_to :role）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:06:06.673

在我看来，将`create`控制器中的所有语句分组到一个事务块中将是一个好主意。查看[ActiveRecord Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)文档以了解更多信息。可以在[Rails 3 ActiveRecord Transactions](https://stackoverflow.com/questions/5560731/rails-3-activerecord-transactions)中找到一个示例。

# c - PIC 16F628A 扬声器声音

> ID：11740020
> 
> 赞同：0
> 
> 时间：2012-07-31T12:25:46.877
> 
> 标签：c, pic

我试图理解[这段代码](http://pastebin.com/BvZ3TWe3)：

```
#include <pic.h>
#include  "delay.h"

#define brisi_flag timer_flag=0

unsigned char timer;
unsigned char impuls;
unsigned char ton_koji_ne_svira;
static bit disable @ (unsigned)&PORTA*8+4;
static bit izlaz @ (unsigned)&PORTA*8+1;
static bit izlaz_inv @ (unsigned)&PORTA*8+0;
static unsigned char stanja @ 0x2e;
static bit stanje_izlaza @ (unsigned)&stanja*8+1;
static bit  timer_flag @ (unsigned)&INTCON*8+2; 

void
DelayMs_2(unsigned char cnt)
{
    unsigned char   i;
    do { asm("CLRWDT");
      if(ton_1)
         return;
        i = 4;
        do {
            DelayUs(250);
        } while(--i);
    } while(--cnt);
}

void
DelayMs(unsigned char cnt)
{
    unsigned char   i;
    do { asm("CLRWDT");
        i = 4;
        do {
            DelayUs(250);
        } while(--i);
    } while(--cnt);
}

void ton_1_2(unsigned char onaj_drugi_ton)
{
     izlaz=0;
     izlaz_inv=1;
     stanje_izlaza=0;
     TMR0=timer; 
ton_1_2_start:
     brisi_flag;
     disable=0;
ton_1_2_sviranje:
     while(timer_flag==0)
          {
        if((TMR0-timer)>=impuls)
             {izlaz=0;
              izlaz_inv=0;
             }
          }
     brisi_flag;
     TMR0=timer;
     if(stanje_izlaza==0)
        izlaz_inv=1;
     else   
        izlaz=1;
     stanje_izlaza=stanje_izlaza+1;   
     if((PORTA&0x0c)==onaj_drugi_ton)
        return;
     asm("CLRWDT");
     goto ton_1_2_sviranje;                 
}

void main()
{
    CMCON=0x07;//portA su normalni ulazi (za 16F628A)
    TRISA=0x0c;
    TRISB=0xff;
     disable=1;
    OPTION=0x81;   //WDT na 18 msec, preset TMR0 sa 4   

    izlaz=0;
    izlaz_inv=0;

    timer=107;
        impuls=0x1d;

    ton_1_2(ton_koji_ne_svira);
} 
```

该程序在扬声器上产生**800 Hz的声音。**我不明白如何计算频率（它必须是带有变量`impuls`和的东西`timer`）。此代码用于`PIC16F628A`，它具有设置为**4Mhz**的外部振荡器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:47:55.040

这是我理解代码的方式。

定时器从 107 开始。由于溢出时触发定时器中断，周期为 256-107 = 149 个滴答。在每个周期中，输出在 IMPULS=29 个滴答后关闭。因此，您的占空比为 29/149=19%。此外，脉冲在两个引脚之间交替。

OPTION=0x81 为定时器设置一个 1:4 的预分频器。因此，如果时钟以 4MHz（周期 0.25µs）运行，则定时器以 1MHz（周期 1µs）计时。因此，149 个滴答的周期应等于 149µs 并对应于 6711Hz 的频率。每次实际频率稍低时，添加启动计时器所需的时间。

你确定频率是800Hz吗？你量过吗？也许处理器真的以 500Hz 运行，或者某处有一个全局 1:8 预分频器。

# javascript - 在 jquery 中使用 self.location 和 url 页面值

> ID：11740030
> 
> 赞同：0
> 
> 时间：2012-07-31T12:26:26.713
> 
> 标签：javascript, jquery

我目前有以下内容：

```
$ul.append('<li>' + 
'<a href="setlocale.aspx?returnURL=default.aspx&localesetting=' + 
this.slice(0) + '">' + this.slice(3) + '</a>'); 
```

假设我的网址以：`/c-577-camping.aspx`

如何在我的 jquery 中使用这个值？它应该更改`default.aspx`为`c-577-camping.aspx`，如果网站是，`www.site.com/c-517-cookers.aspx`那么它应该附加：

`http://www.site.com/c-517-cookers.aspx?setlocale.aspx?returnURL=c-517-cookers.aspx&localesetting=fr-FR`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:30:26.060

要获取路径，可以使用 window.location.pathname：

```
$(document).ready(function() {
  var pathname = window.location.pathname;

  $ul.append('<li>' + '<a href="setlocale.aspx?returnURL=' + pathname + '&localesetting=' + this.slice(0) + '">' + this.slice(3) + '</a>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:42:07.207

`location.pathname`包括斜线，所以试试：

```
'<a href="setlocale.aspx?returnURL='+ location.pathname.replace(/\//g,'') +'&localesetting=' +.... 
```

如果路径名有可能已经包含一些获取参数，您将需要使用`encodeURI(location.pathname.replace(/^\//,'')`，仅替换第一个斜杠或使用`location.pathname.replace(/\//g,'').split('?')[0]`来切断参数。

PS：不要用`window.location.pathname`，没必要。实际上，不使用会稍微快一点`window`，因为它是对全局（无名）对象的循环引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:30:06.437

怎么用

```
window.location.pathname 
```

?

所以完整的代码：

```
$ul.append('<li>' + '<a href="setlocale.aspx?returnURL=' + window.location.pathname + '&localesetting=' + this.slice(0) + '">' + this.slice(3) + '</a>'); 
```

# java - 我应该使用哪个连接池？

> ID：11740038
> 
> 赞同：0
> 
> 时间：2012-07-31T12:26:38.497
> 
> 标签：java, mysql, connection

我有为移动应用程序设计的网络服务。此 Web 服务访问 MySQL 数据库。

可能有许多运行移动应用程序的用户说 100000 并发。

对于 JDBC 中的 MySQL 数据库连接应该使用哪个连接池，我非常困惑。请大家建议我使用可靠、更快、更容易和高效的连接池。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:38:52.907

10 万并发移动应用程序用户通常并不意味着 10 万并发数据库连接。事实上，对于 Web 服务来说，几乎从来没有这种情况。拥有池的原因是可以在用户/会话之间（或对数据库的多个服务请求之间）有效地共享连接。

通常，应用程序服务器内置的数据库连接池是最简单且通常足够的解决方案。在 Tomcat 6/7 的情况下，这将是更新的“ [Tomcat JDBC 连接池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)”。

著名的独立选项包括[Commons-DBCP](http://commons.apache.org/dbcp/)和[c3p0](http://sourceforge.net/projects/c3p0/)。但是，这两个库都存在问题。这些天来，如果您需要一个独立的连接池库，我建议您尝试“ [Tomcat JDBC 连接池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)”。

# java - 制作 Java Web 应用程序和使用数据库的概念

> ID：11740041
> 
> 赞同：0
> 
> 时间：2012-07-31T12:26:48.780
> 
> 标签：java, jsp, web-applications, netbeans

我对java有点陌生，首先我开始制作普通的java类，然后我使用netbeans拖放制作了一些程序，我已经连接到数据库并查询了一些ActionListeners，现在我决定制作一个webapp，并且我有一些 HTML、CSS、JavaScript 方面的经验，所以当我创建 index.jsp 文件时，我做了一个好看的页面，里面有一个登录表单，在正常的 Web 编程中，这个表单的动作应该是另一个 PHP 页面，这将进行服务器端验证，连接到数据库，然后用户将登录，但是对于这个用netbeans制作的.jsp文件，我认为我们不使用PHP，只有java，所以我创建了一个名为Login的普通类.java，这个类做普通简单的事情来连接到本地数据库，`"select id,password from users where id="+id`，当我测试这个类时它工作得很好，但现在我的问题是我应该如何在我的 .jsp webapp 中使用这个类。

我试过了：

1st - 表单的动作设置为 action="response.jsp"，所以我创建了一个名为 response 的新 .jsp 页面，与 netbeans.org 制作的指南完全相同，我使用 beans 来读取输入的值字段。

```
<jsp:useBean id="loginBean" scope="session" class="test.Login" />
        <jsp:setProperty name="loginBean" property="id" />
        <jsp:setProperty name="loginBean" property="password" /> 
```

但是现在我在将这些值作为参数添加到 Login.java 类时遇到了问题，然后我迷失了 Login 类如何显示他的返回值，以及我将如何回到我的第一个 index.jsp 页面，并且如果登录不成功，我`<span id="passError"></span>`在index.jsp页面里写了一些空白，我希望他们像`<span id="passError">Invalid Password</span>`登录失败时一样，所以这里很乱......（我是jsp新手，我不知道如何在网页之间进行通信）

第二 - 我将表单的值更改为一些 java 代码，`action="<% Login m=new Login(); m.login(); %>"`但是我在添加值时遇到了问题，表单会将我带到相同的索引页面，这就是我想要的，我希望一切都保持不变页。我遇到的其他问题是我遇到了很多 SQLException 错误，这些错误在我测试 Login 类时没有出现，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:34:16.120

每个表单都指定了当用户单击提交按钮时要调用的页面的 URI。它在`<form>`标签的 action 属性中指定：

```
<form action="mypage.html" method="get">
 ...
</form> 
```

`action`URI 可以是您希望的任何内容，包括同一页面。所以你可以在`action`属性中放一个JSP，甚至是同一个JSP。然后在 JSP 中，处理传递给标题中年龄的值，就像处理任何 HTML 页面一样。

# .htaccess - htaccess mod rewrite - 我可以将我的 URL 转发到另一个带有井号标签的 URL 吗？

> ID：11740047
> 
> 赞同：2
> 
> 时间：2012-07-31T12:27:01.560
> 
> 标签：.htaccess

在 mod_rewrite 上，这里有一个小但令人困惑的 htaccess 问题。我们需要转发： [http](http://www.mydomain.com/ladies-boots/?shoesize=43&calfwidth=K) ://www.mydomain.com/ladies-boots/?shoesize=43&calfwidth=K 到 [http://www.mydomain.com/ladies-boots/#nogo&somevar=1&shoesize=43&calfwidth=K](http://www.mydomain.com/ladies-boots/#nogo&somevar=1&shoesize=43&calfwidth=K)

我们的代码（感谢另一个 Stackoverflow 帖子）是：

```
RewriteCond %{QUERY_STRING} ^shoesize=([0-9]+)\&calfwidth=([A-Z])$ 
RewriteRule ^ladies-boots/$ http://www.mydomain.com/ladies-boots/#nogo&somevar=1&shoesize=%1&calfwidth=%2? [R=301,L] 
```

上面的方法很好，除了哈希 # 标记被 Apache 转义，它将 URL 写入为 %23 而不是 #。

有什么办法可以解决这个问题吗？对于某些 Javascript/非 SE 友好的功能，我确实需要哈希标记，并且如果没有有效的哈希标记，上述 URL 将无法使用。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:13:23.707

> 上面的方法很好，除了哈希 # 标记被 Apache 转义，它将 URL 写入为 %23 而不是 #。

如果您`NE`在方括号内使用标志，则可以使井号标签不转义：`[R=301,L,NE]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:31:55.363

不，没有办法。URL 只能包含字母、数字和符号 / ？&。

# views - 在 AsyncTask 中动态添加视图

> ID：11740051
> 
> 赞同：3
> 
> 时间：2012-07-31T12:27:28.867
> 
> 标签：views, android-asynctask, add

我在循环中创建一些文本和图像视图，并从另一个类接收一些数据，我如何创建这些文本和图像视图并在 AsyncTask 中使用 addview 方法？

我在 doInBackground 方法中使用 addview ，它不起作用.. 另外，我不知道这是否是动态添加视图的最佳方法，欢迎提出建议！

```
class syncTask extends AsyncTask<Void, Void, Void> {
     private ProgressDialog pd;
     int increment=0;
     RelativeLayout layout;
     public syncTask(RelativeLayout layout) {
        // TODO Auto-generated constructor stub
         this.layout = layout;
    }

    @Override
     protected void onPreExecute() {
        pd = new ProgressDialog(main.this);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setProgress(0);
        pd.setMax(0);
        pd.setMessage("Loading friends");
        pd.show();
     }

    @Override
     protected Void doInBackground(Void... v) {
        try
        {
            Set<User> users = LFMRestConnection.getFriendsNowListening(user, 1440);
            for (User u : users) {
                pd.setMax(max);
                //album picture
                    album_pic = loadBitmap(u.getImageURL().getImageURL(ImageURL.Size.LARGE));
                    resized_a_p = android.graphics.Bitmap.createScaledBitmap(album_pic, (width/3), (width/3), true);
                    iv_album = new ImageView(main.this);
                    iv_album.setImageBitmap(resized_a_p);
                    iv_album.layout(0, 0, 0, 0);
                    iv_album.setPadding(width-resized_a_p.getWidth()-5, t_img, 5, 0);
                //profile picture
                    user_pic = loadBitmap(u.getImageURL().getImageURL(ImageURL.Size.LARGE));
                    resized_u_p = android.graphics.Bitmap.createScaledBitmap(user_pic, ((width/4)-10)/2, ((width/4)-10)/2, true);
                    iv_user = new ImageView(main.this);
                    iv_user.setImageBitmap(resized_u_p);
                    iv_user.setLayoutParams(params_2);
                    iv_user.layout(0, 0, 0, 0);
                    iv_user.setPadding(0, (t_img+resized_a_p.getHeight())-resized_u_p.getHeight(), resized_a_p.getWidth()+10, 0);
                //shapes
                    //shapes = new shapes(this, (t_img+resized_a_p.getHeight()), resized_a_p.getWidth()+10);
                //username text position
                    tv_user = new TextView(main.this);
                    tv_user.layout(0, 0, 0, 0);
                    tv_user.setTextSize(12);
                    tv_user.setPadding(0, (t_img+resized_a_p.getHeight())-resized_u_p.getHeight()+14, (resized_a_p.getWidth()+resized_u_p.getWidth())+15, 0);
                    tv_user.setGravity(Gravity.RIGHT);
                    tv_user.setLayoutParams(params_1);
                //artist text position
                    tv_artist = new TextView(main.this);
                    tv_artist.layout(0, 0, 0, 0);
                    tv_artist.setTextSize(20);
                    tv_artist.setPadding(5, t_img-10, 0, 0);
                    tv_artist.setGravity(Gravity.LEFT);
                //track text position
                    tv_info = new TextView(main.this);
                    tv_info.setTextSize(12);
                    tv_info.layout(0, 0, 0, 0);
                    tv_info.setPadding(5, t_img+12, 0, 0);
                    tv_info.setGravity(Gravity.LEFT);

                //artist
                    tv_artist.setTypeface(null, Typeface.BOLD);
                    tv_artist.setText(u.getLastTrack().getArtistName());
                //username 
                    tv_user.setTypeface(null, Typeface.NORMAL);
                    tv_user.setText(u.getUserName()+"\n");
                    tv_user.append(u.getRealName());
                //track
                    tv_info.setTypeface(null, Typeface.NORMAL);
                    tv_info.append("\n" + u.getLastTrack().getTrackName());
                    tv_info.append("\n" + u.getLastTrack().getAlbumName());

                //move position
                    t_img+=(width/3)+20;

                increment++;
                pd.incrementProgressBy(increment);
                //views
                layout.addView(iv_album);
                layout.addView(iv_user);
                layout.addView(tv_info);
                layout.addView(tv_user);
                layout.addView(tv_artist);
            }
        }
        catch(Exception e)
        {
            //startActivity(i);
            System.out.println("Error");
            //finish();     
        }

        return null;

     }
     @Override
        protected void onPostExecute(Void result) {

         pd.dismiss();
     } 
```

# php - 向 Magento 中的 links.phtml 列表的 UL 添加一个类

> ID：11740052
> 
> 赞同：1
> 
> 时间：2012-07-31T12:27:28.680
> 
> 标签：php, css, zend-framework, magento, magento-1.7

我希望能够向列表的 UL 元素添加一个类，这些列表使用`type="page/template_links"`使用模板 page/template/links.phtml 的块输出（例如：顶部链接、页脚链接）。

有没有办法通过 XML 添加一个类？上的一个属性`<block />`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:18:31.407

这可以通过对`page/template/links.phtml`您希望添加类的每个链接块进行轻微修改并随后创建一小块布局 xml 来实现。

首先，如果您还没有这样做，请复制`page/template/links.phtml`到您的主题并在 ul 标签的 class 属性中添加以下内容：

```
<?php echo $this->getClass() ?> 
```

然后，以页脚链接块为例，布局片段将如下所示（显然将 'test-class' 替换为您希望应用于 ul 的类）：

```
<reference name="footer_links">
    <action method="setClass"><class>test-class</class></action>
</reference> 
```

# java - finally 捕获或返回实例或空引用

> ID：11740054
> 
> 赞同：0
> 
> 时间：2012-07-31T12:27:38.887
> 
> 标签：java, exception, exception-handling, error-handling, jakarta-mail

使用[GNU NNTP](http://www.gnu.org/software/classpathx/javamail/)，我怎样才能`getMessage(String newsgroup, int i)`以真正的`javax.mail.Message`或 null 这样的方式返回`Message`？

```
init:
Deleting: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
Deleted 1 out of date files in 0 seconds
Compiling 2 source files to /home/thufir/NetBeansProjects/USENET/build/classes
warning: Supported source version 'RELEASE_6' from annotation processor 'org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor' less than -source '1.7'
warning: The following options were not recognized by any processor: '[eclipselink.canonicalmodel.use_static_factory]'
1 warning
Copying 1 file to /home/thufir/NetBeansProjects/USENET/build/classes
compile:
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 6 groups in 31ms
[EL Info]: 2012-07-31 05:21:51.235--ServerSession(1478593)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-07-31 05:21:52.523--ServerSession(1478593)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
[EL Warning]: 2012-07-31 05:21:52.672--ServerSession(1478593)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'usenet.HEADERFIELD' doesn't exist
Error Code: 1146
Call: ALTER TABLE HEADERFIELD DROP FOREIGN KEY FK_HEADERFIELD_ARTICLE_ID
Query: DataModifyQuery(sql="ALTER TABLE HEADERFIELD DROP FOREIGN KEY FK_HEADERFIELD_ARTICLE_ID")
[EL Warning]: 2012-07-31 05:21:52.687--ServerSession(1478593)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'ARTICLE'
Error Code: 1051
Call: DROP TABLE ARTICLE
Query: DataModifyQuery(sql="DROP TABLE ARTICLE")
[EL Warning]: 2012-07-31 05:21:52.797--ServerSession(1478593)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'HEADERFIELD'
Error Code: 1051
Call: DROP TABLE HEADERFIELD
Query: DataModifyQuery(sql="DROP TABLE HEADERFIELD")
Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: [gwene.ca.craigslist.vancouver.labour.general, gwene.com.androidcentral, gwene.com.blogspot.emacsworld, gwene.com.blogspot.googlecode, gwene.com.blogspot.googlereader, gwene.com.economist]
Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 5
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 6
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 7
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 8
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 9
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 10
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 9
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

Jul 31, 2012 5:21:53 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 10
    at gnu.mail.providers.nntp.NNTPFolder.getMessage(NNTPFolder.java:330)
    at net.bounceme.dur.usenet.model.Usenet.getMessage(Usenet.java:72)
    at net.bounceme.dur.usenet.driver.FetchBean.<init>(FetchBean.java:40)
    at net.bounceme.dur.usenet.driver.FetchBean.main(FetchBean.java:24)

BUILD SUCCESSFUL (total time: 10 seconds) 
```

枚举：

```
package net.bounceme.dur.usenet.model;

import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.*;

public enum Usenet {

    INSTANCE;
    private final Logger LOG = Logger.getLogger(Usenet.class.getName());
    private Properties props = new Properties();
    private Folder root = null;
    private Store store = null;
    private List<Folder> folders = new ArrayList<>();
    private Folder folder = null;

    Usenet() {
        LOG.fine("controller..");
        props = PropertiesReader.getProps();
        try {
            connect();
        } catch (Exception ex) {
            Logger.getLogger(Usenet.class.getName()).log(Level.SEVERE, "FAILED TO LOAD MESSAGES", ex);
        }
    }

    private void connect() throws Exception {
        LOG.fine("Usenet.connect..");
        Session session = Session.getDefaultInstance(props);
        session.setDebug(true);
        store = session.getStore(new URLName(props.getProperty("nntp.host")));
        store.connect();
        root = store.getDefaultFolder();
        setFolders(Arrays.asList(root.listSubscribed()));
    }

    public void foo(String ng) throws Exception {
        folder = root.getFolder(ng);
        LOG.fine("opened the folder!!!!!");
        folder.open(Folder.READ_ONLY);
    }

    public List<Message> getMessages(String newsgroup) throws Exception {
        LOG.fine("fetching.." + newsgroup);
        folder = root.getFolder(newsgroup);
        LOG.fine("opened the folder!!!!!");
        folder.open(Folder.READ_ONLY);
        LOG.fine("opened: " + folder.getFullName());
        LOG.fine("opened: " + folder.getFullName());
        LOG.fine("opened: " + folder.getFullName());
        List<Message> messages = Arrays.asList(folder.getMessages());
        LOG.fine("..fetched " + folder);
        return messages;
    }

    public List<Folder> getFolders() {
        LOG.fine("folders " + folders);
        return Collections.unmodifiableList(folders);
    }

    private void setFolders(List<Folder> folders) {
        this.folders = folders;
    }

    public Message getMessage(String newsgroup, int i) {
        Message message = null;
        try {
            LOG.fine("fetching.." + newsgroup);
            folder = root.getFolder(newsgroup);
            folder.open(Folder.READ_ONLY);
            return folder.getMessage(i);
        } catch (MessagingException ex) {
            Logger.getLogger(Usenet.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            return message;//crummy
        }
    }
} 
```

如何处理此异常以使程序不会崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:43:59.950

在尝试处理它之前进行简单的布尔检查：

```
if(!message.isExpunged)  
{  
     //process your message here  
}    
else{
    //log a message about it being expunged  
} 
```

[API](http://docs.oracle.com/javaee/5/api/javax/mail/Message.html#isExpunged%28%29)

公共布尔 isExpunged()

检查此消息是否已被删除。除 getMessageNumber() 之外的所有其他方法在已删除的 Message 对象上均无效。

由于对包含文件夹的显式 expunge() 请求而被删除的消息会立即从该文件夹中删除。被另一个来源从外部删除的消息被标记为“已删除”并为 isExpunged() 方法返回 true，但在对文件夹执行显式 expunge() 之前，它们不会从文件夹中删除。

有关删除处理的更多详细信息，请参阅 expunge() 的描述。

# jquery-datatables - 将图像添加到数据表 jquery 插件

> ID：11740056
> 
> 赞同：2
> 
> 时间：2012-07-31T12:27:43.550
> 
> 标签：jquery-datatables, tabletools

我正在使用以下数据表插件： 数据表并使用以下从数据[表表](http://datatables.net/index)[工具](http://datatables.net/extras/tabletools/) 中导出数据

我需要在数据表的某些单元格中有图像。我插入图像的方式是我在该单元格的 html 中给出。

但是当我导出数据时。包含图像的单元格以空字符串的形式出现。是否可以在导出的 csv 中获取图像 url？

# iphone - 启动时在视图控制器之间传递数据

> ID：11740058
> 
> 赞同：0
> 
> 时间：2012-07-31T12:27:51.997
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个侧面菜单应用程序。

我有2`ViewController`和.`RearViewController``FrontViewController`

在`RearViewController`我有一个`tableView`并且我希望应用程序开始`FrontViewController`加载该表中的第一个元素时。

我试过添加

```
frontViewController.category = [rearViewController.fetchedResultsController objectAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]]; 
```

in `AppDelegate`，但它得到的只是一个 nil 对象。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:43:34.163

![在此处输入图像描述](../Images/c028f0ec4f0a5b70f567c84eb7256056.png)

在这种情况下，我使用协议。

```
@protocol CommonDataSource
- (TheType *)dataSource;
@end

@interface AppDelegate : NSObject <UIAppDelegate, CommonDataSource>
@end

@implementation AppDelegate
- (TheType *)dataSource
{
   ...
}
@end

@interface TheAViewController : UIViewController
@property (...) id<CommonDataSource> commonDataSource;
@end

@interface TheBViewController : UIViewController
@property (...) id<CommonDataSource> commonDataSource;
@end

- (IBAction)theActionA:(id)sender
{
   TheAViewController *aaa = ...;
   a.commonDataSource = (AppDelegate*)...;
}

- (IBAction)theActionB:(id)sender
{
   TheAViewController *aaa = ...;
   a.commonDataSource = (AppDelegate*)...;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:33:12.360

数据不会像这样从一个视图控制器发送到另一个视图控制器......你必须推送它......使用 pushViewController 在`RearViewController`写......

```
[self.navigationController pushViewController:FirstViewController animated:YES]; 
```

# java - 在 Java 中删除子字符串

> ID：11740060
> 
> 赞同：0
> 
> 时间：2012-07-31T12:27:56.580
> 
> 标签：java, xml, string, xml-parsing

我正在尝试从原始字符串（这是一个 xml 文件）中删除搜索到的字符串。为此，我使用了 replaceAll 函数。但是我得到了空的换行符，因为我使用 "" 作为要替换的字符串。还有另一种方法可以删除字符串吗？

```
 start =str.indexOf("<opts>");
        end =str.indexOf("</opts>");
        String removeStr = str.substring(start -6, end + 7);
        str = str.replaceAll(removeStr, ""); 
```

试过：

```
 System.out.println("InitialString :="+str);
    int start = str.indexOf("<opts>");
    int end = str.lastIndexOf("</opts>"); //if \n is added, indent of tag<nos> changes
    str = str.substring(0, start ) + str.substring(end + 7, str.length());
    System.out.println("FinalString :="+str); 
```

初始输入字符串：=

```
<data>
    <param>2</param>
    <unit>1</unit>
    <opts>
        <name>abc</name>
        <venue>arena0</venue>
    </opts>
    <opts>
        <name>xyz</name>
        <venue>arena1</venue>
    </opts>
    <nos>100</nos>
</data> 
```

最终输出字符串：=

```
<data>
    <param>2</param>
    <unit>1</unit>

    <nos>100</nos>
</data> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:30:36.197

你可以这样做；

```
int start = str.indexOf("<opts>");
int end = str.indexOf("</opts>\n");
str = str.substring(0, start - 6) + str.substring(end + 8, str.length()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:30:41.617

您没有在`</opts>`. 当您执行 an 时，`end + 7`您将其限制到结束，`</opts>`但之后可能有 a`\n`或 / 和`\r`。

如果您不想将其作为 XML 内容使用（将其解析为 DOM`Document`并删除应该删除的每个子项，`removeChild`并将其存储在一个将再次缩进您的 XML 的过程中），您可以进行后处理和字符串替换后清除空行。

* * *

为了使用 XML Document 方法，您可以尝试：

```
TransformerFactory transFactory = TransformerFactory.newInstance();
Transformer        transformer  = transFactory.newTransformer();

// set some options on the transformer
transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8");
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");

// get a transformer and supporting classes
StringWriter writer = new StringWriter();
StreamResult result = new StreamResult(writer);
DOMSource    source = new DOMSource(xmlDoc);

// transform the xml document into a string
transformer.transform(source, result);

System.out.println(writer.toString()); 
```

样本来自：[http ://techxplorer.com/2010/05/20/indenting-xml-output-in-java/](http://techxplorer.com/2010/05/20/indenting-xml-output-in-java/)

# ruby-on-rails-3.2 - rspec 测试因“意外参数”而失败，同时显式使用 ArgumentMatcher“anything()”

> ID：11740064
> 
> 赞同：0
> 
> 时间：2012-07-31T12:28:00.610
> 
> 标签：ruby-on-rails-3.2, rspec2

在使用 RSpec (2.10.0)、机械师 (2.0)、rspec-rails (2.10.1) 和 rails (2.3.6) 时，我在使用 RSpec::Mocks::ArgumentMatcher 时遇到问题`anything`：

我有两个`it`使用匹配器的块，第一个成功，但第二个引发以下错误：

```
Failure/Error: Post.make!(:community => @community)
<Notification::Delayed (class)> received :create with unexpected arguments
expected: (#<RSpec::Mocks::ArgumentMatchers::AnyArgMatcher:0x00000104eff8f8>, #<User ...> , "event", "interval")
got: (#<Post>, <User...>, "event", "interval") 
```

这些是 it 块（我已经改变了它们的顺序，它们的优先级，独立启动它们并且每个都在一次测试运行中），但仍然 1 号通过，2 号失败：

```
it "should create a delayed notification per default" do
  Notification::Email.should_not_receive(:notification)
  Notification::Delayed.should_receive(:create).with(anything, user, "event", "interval")
  Post.make!(:community => @community)
end

it "should create a delayed notification on user request" do
  NotificationSetting.make! :user => user, :event => 'event', :role => 'community,moderators', :interval => 'interval'
  Notification::Email.should_not_receive(:notification)
  Notification::Delayed.should_receive(:create).with(anything, user, 'event', 'interval')
  Post.make!(:community => @community)
end 
```

为简单起见，我省略了为什么使用这个 any() 方法：这是因为作为第一个参数提交的对象可以是 Post 或 Post 的子类。考虑到这一点，我经历了所有其他 ArgumentMatchers (:duck_type, :kind_of? ...) 都没有运气。

我完全被卡住了，怎么会发生这种错误呢？[“参数匹配器”部分中](http://rubydoc.info/gems/rspec-mocks/frames)的文档不是说“参数可以是任何东西” - 那么怎么会有这样的错误？接下来让我毛骨悚然的是我对错误出现的无动于衷在第二种情况下不是在第一种情况下。至少不应该在两者上都失败吗？

很感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:08:44.097

你可以测试：

```
Notification::Delayed.should_receive(:create).with(kind_of(Post), user, 'event', 'interval') 
```

Post 的子类也是 Post 的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:53:17.773

我无法解释，但我的 spec_helper 似乎有问题。在不同的项目中重现错误是不可能的。

对不起，打扰你。当我最终发现问题时，我会发布答案。

# android - 如何从android中的sdcard获取图像？

> ID：11740065
> 
> 赞同：6
> 
> 时间：2012-07-31T12:27:59.700
> 
> 标签：android, imageview

我想创建一个简单的应用程序，我想从 sdcard 获取图像但不能成功。我的代码在下面

```
File myFile = new File("/sdcard/photo.jpg");
ImageView jpgView = (ImageView)findViewById(R.id.imageView);
BitmapDrawable d = new BitmapDrawable(getResources(), myFile.getAbsolutePath());
jpgView.setImageDrawable(d); 
```

但无法获取图像。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T12:50:47.827

使用下面的代码而不是您的代码。

```
File f = new File("/mnt/sdcard/photo.jpg");
ImageView mImgView1 = (ImageView)findViewById(R.id.imageView);
Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath());
mImgView1.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T10:25:18.513

```
package com.example.facebook;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class Facebookhome extends Activity {
    Button share;
    Uri screenshotUri;
    private static final int SELECT_PICTURE = 1;
    private String selectedImagePath;

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_facebookhome);
        share = (Button) findViewById(R.id.button1);
        img = (ImageView) findViewById(R.id.imageView1);

        share.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        SELECT_PICTURE);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                System.out.println("Image Path : " + selectedImagePath);
                img.setImageURI(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T12:30:49.493

尝试这个...

```
Bitmap bitmap = BitmapFactory.decodeFile(myFile.getAbsolutePath());
jpgView.setImageBitmap(bitmap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T06:43:46.587

我想肯定会帮助你是更简单的方法

**Java版本：**

```
import static android.app.Activity.RESULT_OK;

private Bitmap bitmap;
private Uri filePath;

private void showFileChooser() {
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
    photoPickerIntent.setType("image/*");
    startActivityForResult(photoPickerIntent, GET_IMAGE);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == GET_IMAGE && resultCode == RESULT_OK && data != null && data.getData() != null) {

        filePath = data.getData();
        try {
            bitmap = MediaStore.Images.Media.getBitmap(getActivity().getContentResolver(), filePath);
            imageView1.setImageBitmap(bitmap);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

**科特林版本：**

```
import android.app.Activity.RESULT_OK

private val GET_IMAGE = 1
private lateinit var filePath : Uri
private lateinit var bitmap : Bitmap

private fun selectImage() {
    var photoPickerIntent : Intent = Intent(Intent.ACTION_PICK)
    photoPickerIntent.setType("image/*")
    startActivityForResult(photoPickerIntent, GET_IMAGE)
}

override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    if(requestCode == GET_IMAGE && resultCode == RESULT_OK && data != null){
        filePath = data.data

        try{
            bitmap = MediaStore.Images.Media.getBitmap(activity!!.contentResolver, filePath)
            imageView!!.setImageBitmap(bitmap)
        }catch (exception : IOException){
            Toast.makeText(activity,"Error Loading Image!!!", Toast.LENGTH_SHORT).show()
        }
    }
} 
```

# php - 使用 php 简化可以有多个输入选项的 MySQL 查询

> ID：11740066
> 
> 赞同：0
> 
> 时间：2012-07-31T12:28:01.323
> 
> 标签：php, mysql

我有一个脚本可以查询我的数据库，并且需要能够使用四个选项中的一个或全部进行查询。选项是开始 sku、结束 sku（这是一个选项，因为必须有一个搜索范围）、创建者和创建日期。我知道我可以使用许多 if..elseif 语句来做到这一点，但我必须认为有更好更简单的方法。到目前为止，这是我的代码：

```
$start =mysql_real_escape_string ($_POST['skuStart']);
$end = mysql_real_escape_string($_POST['skuEnd']);
$source = mysql_real_escape_string($_POST['source']);
$processDate = mysql_real_escape_string($_POST['processDate']);

if(!empty($start) && !empty($end) && empty($source) && empty($processDate)){
$result = $conn->query("Select * from inventory where sku >= $start and sku <= $end");

 } elseif (empty($start) && empty($end) && !empty($source) && empty($processDate)){
$result = $conn->query("Select * from inventory where created_by = '$source'");

 } elseif (empty($start) && empty($end) && empty($source) && !empty($processDate)) {
$result = $conn->query("Select * from inventory where date_process = '$processDate'");

} elseif(!empty($start) && !empty($end) && !empty($source) && empty($processDate)){
$result = $conn->query("Select * from inventory where sku >= $start and sku <= $end and created_by = '$source'");

} else {
$result = $conn->query("Select * from inventory where sku >= '$start' and sku <= '$end' and created_by = '$source' and date_process = '$processDate'");
}

while($row = $result->fetch_assoc())
    {

        $skuArray[$x] = $row['sku'];
        $isbnArray[$x] = $row['isbn13'];
        $qtyArray[$x] = $row['quantity'];
        $defectArray[$x] = $row['defect_id'];
        $sourceArray[$x] = $row['source_id'];
        $featureArray[$x] = $row['feature_id'];
        $locationArray[$x] = $row['location_id'];
        $processDateArray[$x] = $row['date_process'];
        $bookTypeArray[$x] = $row['book_type_id'];
        $createdByArray[$x] = $row['created_by'];
        $modifiedByArray[$x] = $row['modified_by'];

        $x++; 
```

这种非常粗略的形式正在起作用，但是有没有办法简化 if elseif ？

注意：我知道我应该使用 PDO 来防止 sql 注入，但我还没有完全了解这一点，所以我正在使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:39:03.213

```
<?php
$db = new PDO('mysql:host=localhost;dbname=my_db', 'user', 'passwd');

$sql = "SELECT * FROM INVENTORY ";

$where  = array ();
$params = array ();
if (! empty($start) && ! empty($end) {
    $where[] = " sku >= :start AND sku <= :end ";
    $params['start'] = $start;
    $params['end']   = $end;
}
if (! empty($source)) {
    $where[] = " created_by = :source ";
    $params['source'] = $source;
}
if (! empty($processDate)) {
    $where[] = " date_process = :date_process ";
    $params['date_process'] = $processDate;
}

if (! empty($where)) {
    $sql .= ' WHERE ' . join (' AND ', $where);
}

$statement = $db->prepare($sql);
$statement->execute($params);

while ($row = $statement->fetch(PDO::FETCH_ASSOC)) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:36:34.423

抛开您已经知道的问题 - 切换到 PDO 并使用绑定参数 - 您可以使用以下内容使您的代码更清晰一些：

```
<?php

$start          = mysql_real_escape_string ($_POST['skuStart']);
$end            = mysql_real_escape_string($_POST['skuEnd']);
$source         = mysql_real_escape_string($_POST['source']);
$processDate    = mysql_real_escape_string($_POST['processDate']);
$where          = array();

if(!empty($start))
{
    $where[] = 'sku >= ' . $start;
}

if(!empty($end))
{
    $where[] = 'sku <= ' . $end;
}

if(!empty($source))
{
    $where[] = 'created_by = \''.$source .'\'';
}

if(!empty($processDate))
{
    $where[] = 'date_process = \''.$processDate .'\'';
}

$query = 'SELECT * FROM inventory';

if(count($where))
{
    $query .= ' WHERE ' . implode(' AND ', $where);
}

$result = $conn->query($query);

while($row = $result->fetch_assoc())
    {

        $skuArray[$x] = $row['sku'];
        $isbnArray[$x] = $row['isbn13'];
        $qtyArray[$x] = $row['quantity'];
        $defectArray[$x] = $row['defect_id'];
        $sourceArray[$x] = $row['source_id'];
        $featureArray[$x] = $row['feature_id'];
        $locationArray[$x] = $row['location_id'];
        $processDateArray[$x] = $row['date_process'];
        $bookTypeArray[$x] = $row['book_type_id'];
        $createdByArray[$x] = $row['created_by'];
        $modifiedByArray[$x] = $row['modified_by'];

        $x++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:33:12.937

```
$q = array();
if (!empty($start))
  $q[] = "sku >= '$start'";
if (!empty($end))
  $q[] = "sku <= '$end'";
#...
$q = join(') AND (', $q);
$q = "SELECT * FROM inventory WHERE ($q)"; 
```

或者你可以更进一步：

```
$params = array(
   'skuStart' => "sku >= '##'",
   'skuEnd' => "'sku <= '##'",
   #...
);

$q = array();
foreach($params as $k=>$sql) {
   $v = mysql_real_escape_string($_POST[$k]);
   if (!empty($v)) {
     $sql = tr_replace('##', $v, $sql);
     $q[] = $sql;
   }
}
$q = join(') AND (', $q); 
```

然后您可以添加用于验证的类型，以及其他可以增强元数据并构建您的小型框架的东西......

每当您觉得自己在重复自己时，您应该检查现有的解决方案（库/框架）或构建您的解决方案... [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:40:08.190

您可以使用查询生成器。如果您不使用任何框架，例如[https://github.com/jstayton/QueryBuilder （最初创建于 google）。](https://github.com/jstayton/QueryBuilder)

# ruby-on-rails - 如何从检索或缓存的数据库中检查查询

> ID：11740069
> 
> 赞同：1
> 
> 时间：2012-07-31T12:28:05.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有来自 rails 日志的以下查询

1.  调用数据库

    ```
     Userdetail Load (0.1ms)  SELECT `userdetails`.* FROM `userdetails` WHERE `userdetails`.`user_id` IN (3, 4) 
    ```

2.  调用缓存

    ```
    CACHE (0.0ms)  SELECT `userdetails`.* FROM `userdetails` WHERE `userdetails`.`user_id` = 3 LIMIT 1 
    ```

3.  未知

    ```
    (0.1ms)  SELECT COUNT(*) FROM `votes` WHERE `votes`.`voter_id` = 3 AND `votes`.`voter_type` = 'User' AND `votes`.`votable_id` = 5690 AND `votes`.`votable_type` = 'Post' 
    ```

没有指示存储在类型 3 中的 LOAD 或 CACHE 字

我怎么知道这个查询是在哪里执行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:31:58.757

我想这是因为你在数数。`CACHE`如果它被发送到缓存，无论如何都会被写入，我的猜测是它是在数据库上执行的。

为了验证这一点，您可以尝试连续多次执行查询，后续调用应标记为`CACHE`

# vim - 如何在 NetBeans+jVi 中使用命令“gd”？

> ID：11740071
> 
> 赞同：0
> 
> 时间：2012-07-31T12:28:10.727
> 
> 标签：vim, netbeans

您可能知道，`gd`命令在 Vim 中非常有用且高效。但是在将 jVi 安装到 NetBeans 之后，我发现它`gd`不可用。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:50:54.447

对于 gd，您可以使用 Ctrl-] 。

```
map gd <C-]> 
```

应该做你想做的。虽然 Ctrl-] 可能更容易

Ctrl-] 命令由 NetBeans 处理，而不是使用标记文件。这将是准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:54:42.473

NetBeans 是一个功能强大的 IDE，无论“跳转到声明”主题的变化如何，它总是比 Vim 的更智能、更准确。

`<C-b>`NetBeans 与 Vim 的`gd`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:48:24.990

它对我也不起作用。您可能需要检查`g#`，它会在您的文件中向后搜索。（`g*`向前搜索）
Netbeans 本身也可以向您显示声明。你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:19:26.053

我找到了解决方案！NetBeans 支持 g# 或 g*，但不支持 gd。但是，键入 gd 更方便。但如下所述，gd 与 g* 的含义不同，所以也许我可以使用另一个自定义名称 gs（转到相同的单词）

所以转到 NetBeans -> 工具 -> 选项 -> jVi 配置 -> 映射命令，并添加以下项目：

```
map gs g* 
```

而已。

# android - Android 动态单选按钮 id

> ID：11740072
> 
> 赞同：0
> 
> 时间：2012-07-31T12:28:13.237
> 
> 标签：android, user-interface, dynamic, radio-button

我正在创建一个`RadioButton`s 的数字（计数）。我不能使用`RadioGroup`，因为我需要 1 `RadioButton`，旁边的 a `Button`，在每个`TableRow`。然而，与所有`RadioButton`s 一样，一次只能选择一个。我想我可以设置 id 并在 上阅读它`onCheckedChanged`以更改所有内容，但您单击的那个为 false。

```
rb = new RadioButton[count];

For-loop....
     rb[i]  = new RadioButton(this);
     rb[i].setId(5000 + i);
     rb[i].setOnCheckedChangeListener(this); 
```

和`onCheckedChanged`：

```
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
{       
    for (int i = 0; i < count; i++)
    {
        if (buttonView.getId() == 5000 + i)
        {
            // Its the one
        }
        else
        {
            // Its not the one
            RadioButton rb = (RadioButton) findViewById((5000 + count));
            rb.setChecked(false);
        }
    }
} 
```

我确实抓住了正确`RadioButton`的 s，但是当我尝试它时，`.setChecked(false)`它给了我一个`NullPointerException`，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:56:39.050

您正在为`RadioButtons`from `5000`to设置 id `5000 + (count - 1)`（`RadioButton`数组的大小为，`count`但 id 为直到，`count - 1`因为您从`0`(?!?) 开始循环）。在该`else`子句中，您查找布局中不存在`RadioButton`的 id ，因此您最终得到一个空引用。`5000 + count`

编辑 ：

模拟 a 的代码`RadioGroup`应该是这样的：

在`for`循环中，您是否构建了`RadioButtons`：

```
rb[i].setOnCheckedChangeListener(checkListener);
//... 
```

`checkListener`侦听器实例在哪里：

```
private OnCheckedChangeListener checkListener = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            for (int i = 0; i < count; i++) {
                if (buttonView.getId() == 5000 + i) {
                    Log.e("XXX", "Position " + i);
                } else {                                       
                    RadioButton rb = (RadioButton) findViewById((5000 + i));
                    rb.setOnCheckedChangeListener(null);
                    rb.setChecked(false);
                    rb.setOnCheckedChangeListener(checkListener);
                }
            }
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:59:32.403

这向您显示 NullPointerException，因为它没有获取已检查 RadioButton 的 id。而不是使用 isCheked() 方法来检查天气单选按钮是否已选中。试试这个

```
 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
 {       
    for (int i = 0; i < count; i++)
  {
    if (buttonView.isChecked())
    {
        // perform your task here
    }
    else
    {
        // Do something here.........
    }
} 
```

}

希望这可以帮助 ：）

# actionscript-3 - 火花移动列表上的选择仅适用于 4 次中的 3 次

> ID：11740074
> 
> 赞同：2
> 
> 时间：2012-07-31T12:28:14.297
> 
> 标签：actionscript-3, apache-flex, air, flex4, flash-builder

我在 Flex 移动应用程序（部署在 iOS 和 Android 上）中实现 Spark 列表时遇到了一个非常严重的问题。问题是，当一个项目被触摸时，列表选择并不总是有效。实际上，有时`down`状态已设置，但该项目从未被选中，而是先前选择的项目保持选中状态。

通过`List`and`ListBase`类，我发现我的列表确实收到了鼠标/触摸事件。`List`'s确实被解雇了，实际上对于`item_mouseDownHandler`正确提交的选择和没有正确提交的选择表现相同。到目前为止，我发现的不同之处在于，对于不成功的选择，永远不会调用该`commitProperties`方法（属于），因此，也不会调用's ，从而导致选择不会改变。`ListBase``List``commitSelection`

有没有人更深入地了解为什么这不起作用？我会非常感谢任何帮助，因为我没有看到我自己解决这个问题。

对于想要重现该问题的任何人，请设置一个 Flex 移动项目并添加一个列表以使用简单的内联渲染器和一些通用对象进行查看，如下所示：

```
<s:List id="myList" width="100%" height="100%">
    <s:dataProvider>
        <s:ArrayCollection>
            <fx:Object label="Item1" />
                         .....
            <fx:Object label="Item30" />
        </s:ArrayCollection>
    </s:dataProvider>
</s:List> 
```

然后用手指在设备上随机选择项目，看看会发生什么，即使你触摸屏幕也没有选择项目，有时会出现向下的颜色。

编辑：哦，不要专注于 3 outta 4，你必须多尝试 4 次才能看到问题，但我猜大约 75% 是一个不错的估计。

Edit2：由于其他人显然遇到了同样的问题，我在 Flex Jira 中提交了一个错误报告： [https ://issues.apache.org/jira/browse/FLEX-33169](https://issues.apache.org/jira/browse/FLEX-33169)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:02:49.913

我在 Apache Flex JIRA 上发布了我认为是这个随机问题的真正原因，并认为您可能会感兴趣。

[https://issues.apache.org/jira/browse/FLEX-33169?focusedCommentId=13557088&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13557088](https://issues.apache.org/jira/browse/FLEX-33169?focusedCommentId=13557088&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13557088)

请让我知道你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T03:16:12.130

我在提交的错误（https://issues.apache.org/jira/browse/FLEX-33169）上发布了这个，但我想我也会在这里发布这个信息：

我不太确定这是一个错误。

在带有鼠标的桌面上，列表选择鼠标按下时的项目。但是，在处于触摸交互模式的设备上，列表会在鼠标向上时选择项目。主要原因是用户可能想要滚动而不是实际选择项目（例如，选择项目可能会转换到新屏幕）。Down 与 selected 不同，一个 item 可能处于 down 状态，然后进入 downAndSelected 状态（然后是 selected 状态），也可能回到正常状态。down 和 selected 之间的区别是微妙的，但 down 是为了向用户显示他们在他们可能选择的东西之上，但 selected 意味着他们实际上已经选择了它。

在鼠标按下时，List 会跟踪单击了哪个项目，如果尚未开始滚动，则在鼠标向上时，该项目将被选中。您可以通过在 List.removeMouseHandlersForDragStart() 和 List.touchInteractionStartHandler() 中放置断点来查看发生了什么。如果滚动被触发，您将看到 List.touchInteractionStartHandler() 被调用。

如果这确实是问题，有办法阻止滚动发生。滚动不会立即开始，但它会等待确保用户已经移动了一定量的手指，然后再确定它确实是滚动。该逻辑在 TouchScrollHelper.sbRoot_mouseMoveHandler() 中。滚动所需的量可以通过 Scroller.mx_internal::minSlopInches 控制。您还可以通过在“touchInteractionStarting”(TouchInteractionEvent.TOUCH_INTERACTION_STARTING) 事件上调用 event.preventDefault() 来停止所有滚动。

如果这不是问题，我希望这会给你一些起点来调试正在发生的事情。

在旧的 Adob​​e wiki 上曾经有一个文档描述了其中一些行为（尽管没有那么多代码细节），但不幸的是，这似乎丢失了。希望 Adob​​e 的某个人可以抽出时间来复活它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T22:58:48.530

这个问题让我非常沮丧：它很严重，对用户体验的影响非常糟糕。（对于无法复制该问题的问题，请在 iPhone 或 Android 智能手机上进行测试，因为它似乎不会在 iPad 上发生）。所以在稍微调整之后......我希望我找到了一个解决方案，但我邀请大家进行更深入的测试。您必须使用以这种方式扩展的列表：

```
package com.panurge.mobile
{
    import flash.events.MouseEvent;

    import mx.core.IVisualElement;
    import mx.core.mx_internal;
    import mx.events.TouchInteractionEvent;

    import spark.components.List;
    import spark.events.IndexChangeEvent;
    import spark.events.RendererExistenceEvent;

    public class ListSelectionFix extends List
    {

        protected var itemMouseDown:Object;
        protected var changeEventDispatched:Boolean = false;

        use namespace mx_internal;

        public function ListSelectionFix()
        {
            super();
            // we need this to cancel previous selection if a scroll action occurs
            this.addEventListener(TouchInteractionEvent.TOUCH_INTERACTION_START, onInteractionStart);
            // we need this to preventing dispatch change event twice
            this.addEventListener(IndexChangeEvent.CHANGE, onIndexChange);
        }

        protected function onIndexChange(event:IndexChangeEvent):void
        {
            //trace("onIndexChanging", itemMouseDown, changeEventDispatched);
            if (itemMouseDown != null){

                if (changeEventDispatched){
                    changeEventDispatched = false;
                    event.preventDefault();
                }
            }
        }

        override protected function dataGroup_rendererAddHandler(event:RendererExistenceEvent):void
        {
            super.dataGroup_rendererAddHandler(event);

            var renderer:IVisualElement = event.renderer;

            if (!renderer)
                return;

            renderer.addEventListener(MouseEvent.MOUSE_UP, item_mouseUpHandler);
        }

        override protected function dataGroup_rendererRemoveHandler(event:RendererExistenceEvent):void
        {
            super.dataGroup_rendererRemoveHandler(event);

            var renderer:IVisualElement = event.renderer;

            if (!renderer)
                return;

            renderer.removeEventListener(MouseEvent.MOUSE_UP, item_mouseUpHandler);
        }

        override protected function item_mouseDownHandler(event:MouseEvent):void
        {

            itemMouseDown = event.currentTarget;

            //trace("item_mouseDownHandler");
            super.item_mouseDownHandler(event);
        }

        protected function onInteractionStart(event:TouchInteractionEvent):void
        {
            //trace("onInteractionStart");
            // set this to null when the scroll is starting again to avoid dispatch on item_mouseUpHandler
            itemMouseDown = null;

        }

        protected function item_mouseUpHandler(event:MouseEvent):void
        {
            if (itemMouseDown == null || event.isDefaultPrevented())
                return;

            //trace("item_mouseUpHandler");

            // if we are in the same item renderer then we can safely select the item touched
            if (event.currentTarget == itemMouseDown){

                var _selectedIndex:int = this.dataProvider.getItemIndex(event.currentTarget.data);
                setSelectedIndex(_selectedIndex, true);
                changeEventDispatched = true;
                itemMouseDown.selected = true;
                //event.stopImmediatePropagation();
                event.preventDefault();
                // is dispatch by setSelectedIndex()
                //dispatchEvent(new IndexChangeEvent(IndexChangeEvent.CHANGE));

            }
        }
    } 
```

我希望它能解决。让我知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T13:01:48.980

我有同样的问题。我想清楚：

*   问题是：通过触摸从列表中选择项目，有时选择不会改变；发生这种情况时，您应该触摸 2 或 3 次才能更改选择；
*   它只发生在 iPad 和 iPhone 设备上，不在模拟器中；
*   难以重现，因为不容易理解受影响的情况；
*   我可以假设它是在滚动动作之后特别发生的，并且肯定是轻触（但触摸发生了，所以“轻”不是问题......）

我没有解决方案，但我想与您分享，以强调这是一个影响用户体验的真正严重错误（我在应用商店也有负面评论...）。

再见

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:59:56.000

好的，初步解决方案（虽然我认为这更像是一种黑客攻击，因为我还不知道它是否不会引起其他问题）如下；

子类化火花列表，覆盖`item_mouseDownHandler`并专门设置选定的索引。

```
 override protected function item_mouseDownHandler(event:MouseEvent):void {
     setSelectedIndex((event.currentTarget as IItemRenderer).itemIndex);
 } 
```

同样，这确实有效，但当然需要测试。会持续更新的！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T11:35:01.683

我将代码（如下所示）与“默认”Flex 4.6 一起使用。我相信 Flex 4.6 自带 AIR 3.1，而不是你所说的 3.3

我无法复制所描述的问题。我在摩托罗拉 Xoom (Android 3)、HTC Evo 3D (Android 4)、第一代 iPad 和第三代 iPad 上进行了测试。

我确实注意到，有时在 iPad 上，如果我的手指按得太快或者如果我触摸了列表行之间的线，则不会选择一个项目；但是很难重现这一点。在这些情况下，从不设置停机状态；所以就好像媒体没有注册一样。我想这是因为在这种情况下我的触摸太轻了。

我的结论是其中之一：

1.  AIR 3.3 中存在一个在 AIR 3.1 中没有表现出来的错误
2.  iPad 2 上发生了一些奇怪的事情，而其他设备上没有发生
3.  Flex 4.6 和 AIR 3.3 的自定义合并有问题。

我在测试中使用的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:List id="myList" width="100%" height="100%">
        <s:dataProvider>
            <s:ArrayCollection>
                <fx:Object label="Item1" />
                <fx:Object label="Item2" />
                <fx:Object label="Item3" />
                <fx:Object label="Item4" />
                <fx:Object label="Item5" />
                <fx:Object label="Item6" />
                <fx:Object label="Item7" />
                <fx:Object label="Item8" />
                <fx:Object label="Item9" />
                <fx:Object label="Item10" />
                <fx:Object label="Item11" />
                <fx:Object label="Item12" />
                <fx:Object label="Item13" />
                <fx:Object label="Item14" />
                <fx:Object label="Item15" />
                <fx:Object label="Item16" />
                <fx:Object label="Item17" />
                <fx:Object label="Item18" />
                <fx:Object label="Item19" />
                <fx:Object label="Item20" />
                <fx:Object label="Item21" />
                <fx:Object label="Item22" />
                <fx:Object label="Item23" />
                <fx:Object label="Item24" />
                <fx:Object label="Item25" />
                <fx:Object label="Item26" />
                <fx:Object label="Item27" />
                <fx:Object label="Item28" />
                <fx:Object label="Item29" />
                <fx:Object label="Item30" />
            </s:ArrayCollection>
        </s:dataProvider>
    </s:List>

</s:Application> 
```

# git - Gitolite - 添加新的公钥 - 无法符号链接

> ID：11740081
> 
> 赞同：1
> 
> 时间：2012-07-31T12:28:45.407
> 
> 标签：git, ubuntu, symlink, gitolite

我在 Ubuntu 上安装了最新版本的 gitolite：

我在跑

```
gitolite setup -pk user2.pub 
```

我得到的错误是：

```
FATAL: could not symlink /home/git/.gitolite/hooks/common/update to MyRepository.
git/hooks
  at /home/git/gitolite/src/lib/Gitolite/Conf/Store.pm line 330 
```

有什么想法吗？

* * *

编辑：好的 - 所以目录

```
MyRepository.git/hooks 
```

不存在。只有

```
MyRepository.git/.git/hooks/ 
```

gitolite是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:32:51.037

其中[`store_common()`](https://github.com/sitaramc/gitolite/blob/b2a3509e63a834f8bff3f45de74fcd58baf2c6a5/src/lib/Gitolite/Conf/Store.pm#L326)包括：

```
# override/propagate gitolite defined hooks for all repos
ln_sf( "$rc{GL_ADMIN_BASE}/hooks/common", "*", "$repo.git/hooks" ); 
```

这反过来又会调用[`ln_sf()`](https://github.com/sitaramc/gitolite/blob/b2a3509e63a834f8bff3f45de74fcd58baf2c6a5/src/lib/Gitolite/Common.pm#L162)

```
sub ln_sf {
    trace( 3, @_ );
    my ( $srcdir, $glob, $dstdir ) = @_;
    for my $hook ( glob("$srcdir/$glob") ) {
        $hook =~ s/$srcdir\///;
        unlink "$dstdir/$hook";
        symlink "$srcdir/$hook", "$dstdir/$hook" or croak "could not symlink $srcdir/$hook to $dstdir\n";
    }
} 
```

`dstdir`这里似乎不完整。应该是`/home/git/repositories/MyRepository.git/hooks`。

这可能是因为初始设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T13:01:23.560

我在尝试将旧存储库导入 gitolite 时看到了上述错误。

gitolite 存储库目录包含“裸”存储库的“.git”文件夹。这意味着如果想将存储库导入 gitolite，他应​​该执行以下操作：
-- 确保 oldrepo 是一个裸 git 存储库
-- 以 gtolite 用户身份运行以下代码

```
cd $HOME
cp -R oldrepo/.git repositories/oldrepo.git
gitolite setup 
```

我的错误是将旧存储库作为包含“.git”的目录。我发现这是错误的。

例如我的旧存储库：

```
os-HP /home/gitrepo/repositories $ ll scripts/.git/
total 52
drwxrwsrwx   8 gitrepo gitrepo 4096 Jan 25 10:59 .
drwxrwsrwx   3 gitrepo gitrepo 4096 Jul 26 15:48 ..
drwxrwsrwx   2 gitrepo gitrepo 4096 Jan 25 10:49 branches
-rwxrwxrwx   1 gitrepo gitrepo    8 Jan 25 10:53 COMMIT_EDITMSG
-rw-rw-r--   1 gitrepo gitrepo   91 Jan 25 10:59 config
-rwxrwxrwx   1 gitrepo gitrepo   73 Jan 25 10:49 description
-rwxrwxrwx   1 gitrepo gitrepo   23 Jan 25 10:49 HEAD
drwxrwsrwx   2 gitrepo gitrepo 4096 Jan 25 10:49 hooks
-rwxrwxrwx   1 gitrepo gitrepo  264 Jan 25 10:53 index
drwxrwsrwx   2 gitrepo gitrepo 4096 Jan 25 10:49 info
drwxrwsrwx   3 gitrepo gitrepo 4096 Jan 25 10:52 logs
drwxrwsrwx 133 gitrepo gitrepo 4096 Jun 28 08:50 objects
drwxrwsrwx   4 gitrepo gitrepo 4096 Jan 25 10:49 refs 
```

与 gitolite 附带的测试存储库相比：

```
ey ~/repositories $ ll testing.git/
total 40
drwx------  7 gitrepo gitrepo 4096 Jul 26 02:37 .
drwx------  5 gitrepo gitrepo 4096 Jul 26 08:46 ..
drwx------  2 gitrepo gitrepo 4096 Jul 26 02:37 branches
-rw-------  1 gitrepo gitrepo   66 Jul 26 02:37 config
-rw-------  1 gitrepo gitrepo    0 Jul 26 05:16 git-daemon-export-ok
-rw-------  1 gitrepo gitrepo  120 Jul 26 05:16 gl-conf
-rw-------  1 gitrepo gitrepo   23 Jul 26 02:37 HEAD
drwx------  2 gitrepo gitrepo 4096 Jul 26 05:13 hooks
drwx------  2 gitrepo gitrepo 4096 Jul 26 02:37 info
drwx------ 10 gitrepo gitrepo 4096 Jul 26 03:05 objects
drwx------  4 gitrepo gitrepo 4096 Jul 26 02:37 refs 
```

# android - 在多个设备上测试应用内购买

> ID：11740084
> 
> 赞同：3
> 
> 时间：2012-07-31T12:29:04.580
> 
> 标签：android, in-app-purchase, in-app-billing, google-play

我已按照谷歌说明实施应用内购买服务。

作为受邀用户，我获得了访问 Google Play 开发者控制台的权限。我从中获取了私钥，并将我的谷歌帐户添加到带有测试帐户的输入字段中。之后，我创建了 APK 文件并使用有效证书对其进行了签名。然后将应用程序上传到 Google Play 但没有发布。之后，我创建了所需的应用内购买并发布了它们。然后在我的设备上安装了相同的签名 apk 文件。

在发布应用内购买后不久，我的应用程序给了我类似“未找到”的消息，但一段时间后它变得可用。现在我可以从应用程序中购买所有项目，但没有其他安装相同 APK 文件的人不能。我试图将他们的电子邮件地址添加到个人资料中的测试帐户列表中 - 不走运，即使是 Google Play 帐户的用户所有者也无法购买任何东西。他们不断收到诸如“您选择的项目不可购买”之类的消息当他们尝试购买测试购买项目（文档中描述的项目）时，他们可以成功获得“android.test.purchased: PURCHASED”

**我的问题是：**如何测试来自不同设备和帐户的未发布应用的应用内购买

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T13:29:23.517

为了使这项工作发挥作用，测试用户正在使用的构建版本代码需要与 Google Play 中应用的版本代码相匹配，即使它仅在测试版中发布而不在生产中发布。

如果在 Google Play 中最后上传的 apk 是版本代码 X，并且您的用户正在使用另一个版本代码执行一个应用程序，他们将收到该错误消息。

此外，您的测试人员正在执行的应用程序必须使用除调试之外的密钥库进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T09:35:24.563

现在您可以直接从商店测试您的应用程序，您可以“发布” alpha 和 beta 版本。为此，您必须按照以下步骤操作：

1.  创建一个包含您想要测试应用程序的所有人的 Google 群组
2.  在Play商店上传，你要测试的apk，和普通的apk一样，在右边的tab里上传
3.  在 Alpha/Beta 选项卡上，单击高级选项（右上角）
4.  单击管理测试人员列表
5.  在此处添加您的 Google 群组，因此现在群组中的人可以继续链接并接受成为您的测试人员
6.  现在你的应用程序，对于测试者来说，就像一个普通的应用程序，所以你可以在不同的设备和不同的帐户上下载

确实是这样，因为您只需将 apk 推广到生产环境即可发布它，并且您正在 Play 商店中测试您的 apk

（也许标签的名称不正确，因为我是意大利人，我只是尝试翻译）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:47:43.927

我认为它只允许从一个帐户购买。以下是他们的文档：

> 要对应用内结算执行端到端测试，您设备上的主帐户必须是您在 Google Play 网站上注册的测试帐户之一。如果您设备上的主要帐户不是测试帐户，您必须将设备恢复出厂设置，然后使用您的一个测试帐户登录。要执行恢复出厂设置，请执行以下操作： 打开设备上的设置。轻触隐私。触摸恢复出厂数据。轻触重置手机。手机重置后，请务必在设备设置过程中使用您的测试帐户之一登录。

[http://developer.android.com/guide/google/play/billing/billing_testing.html](http://developer.android.com/guide/google/play/billing/billing_testing.html)

# java - 如何找到上次运行的循环？

> ID：11740086
> 
> 赞同：4
> 
> 时间：2012-07-31T12:29:13.663
> 
> 标签：java, jsp

我正在`c:forEach`循环生成标记。如何确定此循环上次是否正在运行，以便我可以根据我的要求生成一些额外的标记？

```
<c:forEach items="${sessionScope.leadListIs}" var="leadList">
    <li>Test</li>
    <!-- if this loop running final time then -->
    <li>Last</li>
    <!-- end-if -->
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:39:01.783

尝试

```
<c:forEach items="${sessionScope.leadListIs}" var="leadList" varStatus="status">
     ${status.last ? '<li>Last</li>' : '<li>Test</li>'}
</c:forEach> 
```

问候

# linux - 讲解mkmakefile生成的Makefile（Linux内核、buildroot、busybox）

> ID：11740096
> 
> 赞同：0
> 
> 时间：2012-07-31T12:30:01.227
> 
> 标签：linux, linux-kernel, makefile, gnu-make, buildroot

脚本 mkmakefile 在 builddir 中生成以下 Makefile。

如果调用，所有目标都将传递给 srcdir Makefile。

谁能解释为什么？魔法在哪里？

```
lastword = $(word $(words $(1)),$(1))
makedir := $(dir $(call lastword,\$(MAKEFILE_LIST)))

MAKEARGS := -C path_to_srcdir
MAKEARGS += O=$(if $(patsubst /%,,$(makedir)),$(CURDIR)/)$(patsubst %/,%,$(makedir))

MAKEFLAGS += --no-print-directory

.PHONY：全部 $(MAKECMDGOALS)

all := $(filter-out all Makefile,$(MAKECMDGOALS))

全部：
    $(制作) $(制作) $(全部)

生成文件：；

$（全部）：全部
    @:

％/： 全部
    @:

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:41:36.013

让我们分解一下。首先，`all`同时用作目标名称和变量名称是令人讨厌的，这是新手编码器或代码生成器会做的事情。让我们重命名变量`all_targs`并假设我们正在调用`make Makefile foo bar baz`. 如果我们抓一些与问题无关的部分，我们会得到

```
MAKEARGS := -C path_to_srcdir

.PHONY: all $(MAKECMDGOALS)

all_targs := $(filter-out all Makefile,$(MAKECMDGOALS)) # foo bar baz

all:
    $(MAKE) $(MAKEARGS) $(all_targs)

Makefile:;

$(all_targs): all
    @: # do nothing 
```

所以我们什么都不做`Makefile`，`all_targs`是的`foo bar baz`，对于这三个目标，我们什么也不做，只是我们需要`all`。`all`运行命令的规则

```
make -C path_to_srcdir foo bar baz 
```

（还有一些曲折，但这是它的核心。）

# css - 使用可变兄弟将子 DIV 高度限制为父 DIV 高度

> ID：11740100
> 
> 赞同：7
> 
> 时间：2012-07-31T12:30:16.543
> 
> 标签：css, height, percentage

我有一个`<div>`具有指定高度的容器，其中包含另外两个 DIV，用于不同的介绍性副本（由客户输入），另一个用于列出各种功能。

我希望这些功能`<div>`自动填充父项中的剩余空间，然后滚动溢出。

我怎么做？

**CSS：**

```
#article {
    width:940px;
    height:500px
}

#article-content {
    margin: 20px 0;
}

#article-features {
    height:100%;
    overflow-x: auto;
} 
```

[**jsFiddle**](http://jsfiddle.net/tylonius/Dw9EZ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:40:01.800

除了依靠 javascript 根据计算（parent_height - 兄弟高度）动态更改底部 div 的高度之外，没有其他方法可以使用 HTML4。

你可以看看这个：[CSS HTML - DIV 高度填充剩余空间](https://stackoverflow.com/questions/5059021/css-html-div-height-fill-remaining-space)

使用 HTML5，您可以使用 Flexbox 来使用剩余空间。请注意，有一些限制，但它可以满足您的要求。请参阅[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)。

# permissions - wkhtmltopdf 用户权限

> ID：11740101
> 
> 赞同：2
> 
> 时间：2012-07-31T12:30:22.797
> 
> 标签：permissions, wkhtmltopdf

我似乎无法`wkhtmltopdf`在用户帐户上工作。

作为根用户：

```
wkhtmltopdf -V
wkhtmltopdf http://google.com google.pdf 
```

上述两项工作。但作为普通用户，我收到一个错误：

```
wkhtmltopdf -V
wkhtmltopdf: error while loading shared libraries: libQtWebKit.so.4: cannot open shared     object file: No such file or directory 
```

显然，`wkhtmltopdf`它工作和安装正确，因为它适用于 root 用户，但不适用于所有用户。

我试过设置权限：

```
[root@server ~]# chmod 755 /root/wkqt/
[root@server ~]# chmod 755 /root/wkqt/lib/
[root@server ~]# chmod 755 /root/wkhtmltopdf-qt/
[root@server ~]# chmod 755 /root/wkhtmltopdf-qt/lib/
[root@server ~]# chmod 644 /root/wkqt/lib/*so*
[root@server ~]# chmod 644 /root/wkhtmltopdf-qt/lib/*so* 
```

我也尝试添加到`visudo`：

```
motorconne localhost=/bin/wkhtmltopdf
motorconne localhost=/root/wkhtmltopdf-qt/lib/libQtWebKit.so.4 
```

但仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T11:19:58.393

我遇到了完全相同的问题。

您可能遵循 wkhtmltopdf wiki 上的安装步骤。

原来它`libQtWebKit.so.4`位于`/root/wkqt/lib/`目录中。这意味着您的用户必须被授权才能进入此目录。

但是，很有可能当您键入 时`cd /root`，您将被拒绝访问该`root`文件夹。

快速而肮脏的解决方案是向任何人授予对根文件夹的访问权限（是的，我说“快速而肮脏”）。例如：

```
sudo chmod a+rx /root 
```

显然，这远非完美。在完美的世界中，您不会在目录中安装`wkqt`lib 。`root`反而`/opt/wkqt`会更合适。您可以通过`configure`在构建时更改命令行来做到这一点`wkhtmltopdf-qt`。例如：

```
./configure -nomake tools,examples,demos,docs,translations -opensource -prefix "/opt/wkqt" 
```

希望这可以帮助！

# spring - Spring Social - facebook登录时出现404错误

> ID：11740105
> 
> 赞同：6
> 
> 时间：2012-07-31T12:30:33.120
> 
> 标签：spring, spring-mvc, spring-security, facebook-oauth, spring-social

我的应用程序中有 spring 3.1 和 spring 安全登录。我正在尝试使用 spring social 添加 facebook 登录。它进入 facebook 登录页面，但登录后会引发 404 错误。我在网址中有这个：

```
http://localhost:8080/TestProject/signin?error=provider#_=_ 
```

这是我的春季社交配置：

```
<bean class="org.springframework.social.connect.web.ProviderSignInController">
<!-- relies on by-type autowiring for the constructor-args -->    
<constructor-arg ref="signInAdapter" />
</bean>

<bean id="connectionFactoryLocator" 
  class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
<property name="connectionFactories">
    <list>
        <bean class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
            <constructor-arg value="${fb.id}" />
            <constructor-arg value="${fb.passwrd}" />               
        </bean>
    </list>
</property>
</bean>

<bean id="connectionRepository" factory-method="createConnectionRepository" 
  factory-bean="usersConnectionRepository" scope="request">
<constructor-arg value="#{request.userPrincipal.name}" />
<aop:scoped-proxy proxy-target-class="false" />
</bean>

<bean id="signInAdapter" class="com.Test.social.SimpleSignInAdapter"/>

<bean id="usersConnectionRepository" 
  class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
<constructor-arg ref="dataSource" />
<constructor-arg ref="connectionFactoryLocator" />
<constructor-arg ref="textEncryptor" />
</bean>

<bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" 
        factory-method="noOpText" />
 </beans> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:48:33.937

我也只是突然碰巧重定向到`signin?error=provider#_=_`.

原因是在此“错误消息”反复发生之前，我更新了本地 JDK 安装。通过这个新的 JDK 安装，对我的 Java 安装安全设置的任何更改都被重置为“全新安装默认值”。特别是，我手动安装的[***UnlimitedJCEPolicy***](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)不再可用。***重新安装 UnlimitedJCEPolicy 解决了我的问题***。

在我的特殊情况下，我没有使用 a `noOpText() TextEncryptor`，而是 a `queryableText(..) TextEncryptor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:13:10.147

What spring social version you are using? (must be 1.0.X)

Did you create a facebook application? (you need to provide application key/secret in FacebookConnectionFactory constructor). It seems you are using your facebook user/password.

# javascript - Javascript - 多维数组排序 - 字符串和整数 - 按整数排序

> ID：11740112
> 
> 赞同：0
> 
> 时间：2012-07-31T12:30:45.350
> 
> 标签：javascript, arrays, sorting

在我的javascript应用程序中拖动div之后......我想为所有div分配一个数字类，按位置排序。我已经研究了很多，并建立了下一个......但它只是不起作用。（内部 HTML 不变）

```
var ele = document.getElementsByTagName("div");
var i = 0;
var MyDrags = [];

while(ele[i]) {
    if(ele[i].id.substr(0, 4)=="drag") {
        MyDrags["distance"]=parseInt(document.getElementById(ele[i].id).style.top,10);
        MyDrags["id"]=ele[i].id;
    }
    i++;
}
MyDrags.sort(function(a,b) {
    return a.distance - b.distance;
});
i = 0;
while(MyDrags["distance"][i]) {
    document.getElementById(MyDrags["id"][i]).innerHTML=MyDrags["distance"][i];
    i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:34:23.733

这是因为您正在覆盖以前的值，您需要在每次迭代中分配一个新对象，以使您的代码正常工作，它应该如下所示：

```
var ele = document.getElementsByTagName('div');
var i = 0;
var MyDrags = [], dst;

while (ele[i]) {
    if (ele[i].id.substr(0, 4) === 'drag') {
        MyDrags.push({
            distance: parseInt(document.getElementById(ele[i].id).style.top, 10),
            id: ele[i].id
        });
    }
    i++;
}

MyDrags.sort(function(a, b) {
    return a.distance - b.distance;
});

i = 0; 
while(MyDrags[i]) {
    if (dst = MyDrags[i]['distance']) {
        document.getElementById(MyDrags[i]['id']).style.top = dst + 'px';
        document.getElementById(MyDrags[i++]['id']).innerHTML = dst;
    }
} 
```

# java - 为什么我收到 NullPointerException 错误？

> ID：11740115
> 
> 赞同：0
> 
> 时间：2012-07-31T12:30:52.210
> 
> 标签：java, jsp, servlets

我试图弄清楚我的错误是什么，但我的代码找不到任何被称为空指针的东西。

这是 StackTrace (1)：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at daftoor.Database.connect(Database.java:92)
    at daftoor.DoSignIn.checkSignin(DoSignIn.java:86)
    at daftoor.DoSignIn.processRequest(DoSignIn.java:40)
    at daftoor.DoSignIn.doGet(DoSignIn.java:122)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

以下是 StackTrace 日志 (2)：

```
Jul 31, 2012 4:07:41 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [DoSignIn] in context with path [/Daftoor] threw exception
java.lang.NullPointerException
    at daftoor.Database.createStatement(Database.java:105)
    at daftoor.DoSignIn.checkSignin(DoSignIn.java:91)
    at daftoor.DoSignIn.processRequest(DoSignIn.java:40)
    at daftoor.DoSignIn.doGet(DoSignIn.java:122)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这是错误页面：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.NullPointerException
    myproject.Database.createStatement(Database.java:101)
    myproject.DoSignIn.checkSignin(DoSignIn.java:91)
    myproject.DoSignIn.processRequest(DoSignIn.java:40)
    myproject.DoSignIn.doGet(DoSignIn.java:127)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.22 logs.
Apache Tomcat/7.0.22 
```

这是我的代码：

数据库类：

```
package somePackage;

import java.io.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.HashMap;
import java.util.Properties;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author mih1406
 */
public class Database {
    private HashMap dbConfig;
    private Connection dbConnection;

    // debugging
    HttpServletRequest request;
    HttpServletResponse response;

    public Database(HttpServletRequest request, HttpServletResponse respnse) {
        this.request = request;
        this.response = response;
        setDatabaseConfig();

    }

    public void setDatabaseConfig() {
        Properties config = new Properties();
        InputStream configFile;

        try {
            configFile = this.getClass().getResourceAsStream("config.properties");
            config.load(configFile);
        } catch(FileNotFoundException fnfe) {
            // TODO properties file not found error
        } catch(IOException ioe) {
            // TODO i/o Exception
        }

        String dbHost = config.getProperty("dbHost");
        String dbPort = config.getProperty("dbPort");
        String dbUsername = config.getProperty("dbUsername");
        String dbPassword = config.getProperty("dbPassword");
        String dbName = config.getProperty("dbName");
        String dbPrefix = config.getProperty("dbPrefix");

        setDatabaseConfig(dbHost, dbPort, dbUsername, dbPassword,
                dbName, dbPrefix);
    }

    public void setDatabaseConfig(String dbHost, String dbPort, String dbUsername,
            String dbPassword, String dbName, String dbPrefix) {
        dbConfig = new HashMap();

        dbConfig.put("dbHost", dbHost);
        dbConfig.put("dbPort", dbPort);
        dbConfig.put("dbUsername", dbUsername);
        dbConfig.put("dbPassword", dbPassword);
        dbConfig.put("dbName", dbName);
        dbConfig.put("dbPrefix", dbPrefix);
    }

    public void connect() {
        String dbHost = (String)dbConfig.get("dbHost") + "/";
        String dbPort = (String)dbConfig.get("dbPort");
        String dbUsername = (String)dbConfig.get("dbUsername");
        String dbPassword = (String)dbConfig.get("dbPassword");
        String dbName = (String)dbConfig.get("dbName");
        String dbPrefix = (String)dbConfig.get("dbPrefix");

        String dbDriver = "com.mysql.jdbc.Driver";
        String dbURL = "jdbc:mysql://" + dbHost + ":" + dbPort + "/";

        try {
            Class.forName(dbDriver);
            dbConnection = DriverManager.getConnection(dbURL, dbURL, dbPassword);
        } catch (ClassNotFoundException cnfe) {
            // TODO Class Exception
        } catch (SQLException sqle) {
            // TODO SQL Exception
        }
    }

    public Statement createStatement() {
        try {
            return dbConnection.createStatement();
        } catch(SQLException sqle) {
            // TODO SQL Exception
        }

        return null;
    }

    public PreparedStatement prepareStatement(String sql) {
        PreparedStatement pstmt = null;
        try {
            pstmt = dbConnection.prepareStatement(sql);
        } catch(SQLException sqle) {
            // TODO SQL Exception
        }

        return pstmt;
    }

    public void close() {
        try {
            if(dbConnection.isClosed()) {
                return;
            }

            dbConnection.close();
        } catch(SQLException sqle) {
            // TODO SQL Exception
        }
    }

    public String getPrefix() {
        return (String)dbConfig.get("dbPrefix");
    }

    public String getName() {
        return (String)dbConfig.get("dbName");
    }

    public String getHost() {
        return (String)dbConfig.get("dbHost");
    }

    public String getPort() {
        return (String)dbConfig.get("dbPort");
    }

    public String getUsername() {
        return (String)dbConfig.get("dbUsername");
    }

    public String getPassword() {
        return (String)dbConfig.get("dbPassword");
    }
} 
```

DoSingin 类：

```
package somePackage;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 *
 * @author mih1406
 */
@WebServlet(name = "DoSignIn", urlPatterns = {"/DoSignIn"})
public class DoSignIn extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        checkValues(request, response);
        checkSignin(request, response);

    }

    private void checkValues(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        String adminUsername = request.getParameter("adminUsername");
        String adminPassword = request.getParameter("adminPassword");

        boolean someEmpty = false;

        if((adminUsername.equals("") || adminUsername == null)) {
            someEmpty = true;
            request.setAttribute("emptyEmail", "Required");
        } else {
            request.setAttribute("adminUsername",
                    request.getParameter("adminUsername"));
        }

        if((adminPassword.equals("") || adminPassword == null)) {
            someEmpty = true;
            request.setAttribute("emptyPassword", "Required");
        }

        if(someEmpty) {
            String url = "signin.jsp";
            forwardToPage(request, response, url);
        }
    }

    private void forwardToPage(HttpServletRequest request,
            HttpServletResponse response, String url)
            throws ServletException, IOException {
        RequestDispatcher dispatcher = request.getRequestDispatcher(url);
        dispatcher.forward(request, response);
    }

    private void checkSignin(HttpServletRequest request, HttpServletResponse response)
        throws ServletException,IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String adminUsername = request.getParameter("adminUsername");
        String adminPassword = request.getParameter("adminPassword");

        out.println("<br />HereDBCreation!!");
        Database db = new Database(request, response);
        db.connect();
        out.println("<br />HereDBConnectionDone!!");
        String query = "SELECT adminUsername, adminPassword FROM " +
                db.getPrefix() + db.getName() + " WHERE adminUsername = '" +
                adminUsername + "' AND adminPassword = '" + adminPassword + "'";
        Statement stmt = db.createStatement();
        ResultSet result = null;
if(stmt == null)         out.println("<br />HereDBStmtDone!!");

        try {
            result = stmt.executeQuery(query);
            result.beforeFirst();
            out.println("Here!!");
            if(result.next()){
                    HttpSession session = request.getSession(true);
                    session.setMaxInactiveInterval(21*60); // 21 minutes
                    session.setAttribute("JSESSIONID", adminUsername);

                    out.println("Correct!!");
            } else {
                out.println("Invalid!!");
            }
        } catch(SQLException sqle) {
            // TODO SQL Exception
            System.out.println(sqle.getMessage());
        }
    }
} 
```

signin.jsp JSP 文件：

```
<%--
    Document   : login
    Created on : Jul 19, 2012, 3:36:48 PM
    Author     : mih1406
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Administration</title>
    </head>
    <body>
        <form action="DoSignIn" method="get" name="adminSignInForm">
            <table>
                <tr>
                    <td colspan="2">Administration<td>
                        <br />
                </tr>
                <tr>
                    <td><label for="adminUsername">Email:</label></td>
                    <td><input type="text" value="${adminUsername}" name="adminUsername" />${emptyEmail}</td>
                </tr>

                <tr>
                    <td><label for="adminPassword">Password:</label></td>
                    <td><input type="password" value="" name="adminPassword" />${emptyPassword}</td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="checkbox" value="yes" checked="checked" name="persistentCookie" />
                        <label for="persistentCookie">Stay signed in</label>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" value="Sign in" /></td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:33:48.423

就是这些检查

`(adminUsername.equals("") || adminUsername == null)`

您的输入可以作为 null 输入，并且您已经考虑到了这一点，但如果确实如此，它将尝试首先执行此语句`adminUsername.equals("")`并抛出 NPE。只需颠倒他们的顺序，它应该可以解决您的问题。

`( adminUsername == null || adminUsername.equals(""))`

@ftom2 也是正确的，它可能是`dbConnection.createStatement();`行，但是如果没有堆栈跟踪，我们真的无法分辨。您应该进行这些更改以适应 null 的可能性，以便以后不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:41:24.333

问题出在`Database.createStatement()`，这一行：

```
return dbConnection.createStatement(); 
```

抛出错误，这意味着`dbConnection`为空。

在您的`connect()`方法中，您有以下几行：

```
try {
            Class.forName(dbDriver);
            dbConnection = DriverManager.getConnection(dbURL, dbURL, dbPassword);
        } catch (ClassNotFoundException cnfe) {
            // TODO Class Exception
        } catch (SQLException sqle) {
            // TODO SQL Exception
        } 
```

因此，即使连接失败，您也不会知道它，因为您在 catch 块中什么都不做。

我建议您将其更改为：

```
try {
            Class.forName(dbDriver);
            dbConnection = DriverManager.getConnection(dbURL, dbURL, dbPassword);
        } catch (ClassNotFoundException cnfe) {
           cnfe.printStacktrace();
        } catch (SQLException sqle) {
            sqle.printStacktrace();
        } 
```

我敢打赌，你会发现那里有问题。

# jquery - 如何将单词与数组中的任何元素进行比较

> ID：11740119
> 
> 赞同：0
> 
> 时间：2012-07-31T12:30:59.193
> 
> 标签：jquery, xcode, html

我正在尝试从文本文件（字典）中找到一个单词（玩家会用随机字母组成）

```
var words = [];

$(document).ready(function()
              {
              $.get("dictionary.txt", function(txt)
                    {                           
                        words = txt.split("\n"); //get array of all words                      
                    });
              });

$(function()
{
$("#playButton").on("click",function()
                  {
                     for(var k = 0; k < words.length; k++)
                     {
                       if(completedWord == words[k])
                       {
                          alert("hi");
                       }

                     }

                     if($.inArray(completedWord,words) > -1)
                     {
                        alert(completedWord + " is in array");
                     }

                  });

}); 
```

我遇到问题的部分是只有当我在数组/文本文件中输入最后一个单词时才会显示警报。

文本文件包含“一”、“二”和“三”（出于示例目的），当我输入“三”时，会显示警报，但不会显示“一”和“二”。

有什么方法可以输入任何一个选项并显示警报。

谢谢你。

//////////////////////////

这是我用于选择字母的按钮之一的代码

```
var chosenWord = new Array();
var orderLetterChosen = 0;

var enterLetter7 = function()
{
    if(enterLetterOnce7 == false)
    {
        chosenWord[orderLetterChosen] = dice7[randomNumber7] ;//enter letter from dice into empty array
        orderLetterChosen++; //chosenWord moves to next element
        enterLetterOnce7 = true; //only click it once
    }
}; 
```

我还有七个这样的人。

```
completedWord = "";
for(var i = 0; i < chosenWord.length; i++)
{
    completedWord = completedWord + chosenWord[i];
} 
```

以上是我的主要功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:43:39.123

您的代码正在运行。问题可能是您在哪里/如何/何时获得`completedWord`变量的值。

看看这个 jsFiddle：http: [//jsfiddle.net/JMuSB/](http://jsfiddle.net/JMuSB/)

我正在读取`completedWord`click 事件内部的值：

```
$("#playButton").on("click", function() {
     var completedWord = $("#completed").val();
     ...
}); 
```

它工作正常。

# c# - 当我的 Web 应用程序收到 HttpRequest 时，我在哪里设置 cookie？

> ID：11740121
> 
> 赞同：0
> 
> 时间：2012-07-31T12:31:09.013
> 
> 标签：c#, post, cookies, httpwebrequest, set

我需要在我的 C# 代码中的什么位置放置设置 cookie 的代码？当我登录系统时，Firefox 显示三个 cookie。

**登录页面**

`system.local/interface/Login.php`

```
POST /interface/Login.php HTTP/1.1
Host: system.local
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://system.local/interface/Login.php
Cookie: language=en_US.UTF-8; StationID=06ae3ed4d72a33dd951572df84a13725
Content-Type: application/x-www-form-urlencoded
Content-Length: 71
user_name=user&password=password123456&language=en&action%3Asubmit=Submit 
```

**登录时从 index.php 获取响应**

`http://system.local/interface/index.php`

```
GET /interface/index.php HTTP/1.1
Host: system.local
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: system.local/interface/Login.php  
Cookie: language=en_US.UTF-8; StationID=06ae3ed4d72a33dd951572df84a13725; SessionID=3783a8fea972fb99779f7dd3078ed53c 
```

**将 cookie 放在此代码中的什么位置？**

```
string url;
string cookieHeader;
string formparam;
HttpWebRequest request;
HttpWebResponse response;
byte[] bytes;

url = "http://system.local/interface/Login.php";
formparam = string.Format("user_name=" + textBox1.Text + "&password=" + textBox2.Text + "&language=en&action%3Asubmit=Submit");
request = (HttpWebRequest)HttpWebRequest.Create(url);
var cookies = new CookieContainer();
request.ContentType = "Content-Type: application/x-www-form-urlencoded";
request.Method = "POST";
bytes = Encoding.ASCII.GetBytes(formparam);
request.ContentLength = bytes.Length;
request.KeepAlive = true;

using (Stream os = request.GetRequestStream())
{
    os.Write(bytes, 0, bytes.Length);
}

response = (HttpWebResponse)request.GetResponse();
cookieHeader = response.Headers["Set-Cookie"];

request = (HttpWebRequest)WebRequest.Create("http://system.local/interface/Login.php");
request.CookieContainer = new CookieContainer();
request.CookieContainer.Add(response.Cookies);
request.Headers.Add("Cookie", cookieHeader);

response = (HttpWebResponse)request.GetResponse();
using (StreamReader reader = new StreamReader(response.GetResponseStream()))
{
    //richTextBox1.Text = reader.ReadToEnd().Trim();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:00:54.830

在 every 上设置该`CookieContainer`字段`request`，它应该会自动从标题中添加 cookie。`CookieContainer`每次都使用同一个实例，它将在多个请求中保持其状态。您不需要弄乱`Cookie`或`set-cookie`标头值，因为`CookieContainer`如果将其分配给请求 cookie 容器，则会自动处理。

```
var cookies = new CookieContainer();

request.CookieContainer = cookies;
...
response = (HttpWebResponse)request.GetResponse();
// no need to manually read Cookie header, CookieContainer handles that.

request = ...
request.CookieContainer = cookies;
// no need to manually set/populate CookieContainer, just use the same instance.
...
response = (HttpWebResponse)request.GetResponse();
// etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:17:01.027

我现在解决了我的问题。
我刚写了新的，它的工作很奇怪。

# visual-studio-2010 - Visual Studio 2010 安装项目 - 卸载

> ID：11740125
> 
> 赞同：0
> 
> 时间：2012-07-31T12:31:32.660
> 
> 标签：visual-studio-2010, setup-project

我有一个 Outlook 加载项设置。第一个用户使用“Just me”选项安装它。另一个用户在同一台​​机器上登录并使用“Just me”选项安装了相同的加载项。当第二个用户卸载插件时，“程序文件”目录中的文件将被删除，第一个用户将无法使用插件。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:24:11.917

这是一篇可能有帮助的文章： http: [//setupanddeployment.com/installation-environment/peruser-permachine/](http://setupanddeployment.com/installation-environment/peruser-permachine/)

基本上，每用户安装应该使用每用户位置，每机器安装应该使用每机器位置。Program Files 是每台机器的位置，因此不应由每用户安装使用。

您可以为每台机器制作安装程序（没有每用户选项），或者根据所选安装类型（每用户或每台机器）动态更改安装路径。

# javascript - 如何在 IE 中完全删除 flash 组件？

> ID：11740127
> 
> 赞同：0
> 
> 时间：2012-07-31T12:31:45.817
> 
> 标签：javascript, jquery, apache-flex, internet-explorer, internet-explorer-8

我们正在开发一个 flex 组件，它只有在用户登录后才会出现。现在问题是正在使用

```
if ($('#flashComponentId').length > 0) 
    $('#flashComponentId').remove(); 
```

从页面中完全删除 Flash 组件。这在所有浏览器中都运行良好`except IE`。我无法删除 flash 组件的父 div，因为它包含其他子 div。那么如何在 IE 中完全删除组件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:46:53.303

你可以这样做：

```
$("#containingDiv embed").remove();
$("#containingDiv object").remove(); 
```

JSFiddle：http: [//jsfiddle.net/DRxW4/](http://jsfiddle.net/DRxW4/)

# wpf - 刷新查找列表的数据源

> ID：11740138
> 
> 赞同：0
> 
> 时间：2012-07-31T12:32:51.257
> 
> 标签：wpf, data-binding, wpf-controls

我将简化事情以使一切尽可能清晰。假设我有当前模型：

```
public class Product
{
    public int Id {get;set;}
    public string Name {get;set;}
    public int GroupId {get;set;}
    public Group Group {get;set;}
}

public class Group
{
    public int Id {get;set;}
    public string Name {get;set;}
} 
```

假设我有类似这样的 xaml：（Source 是通过 ViewModel 公开的 Product 类型的公共属性，GroupList 是 Group 的 ObservableCollection，也通过 ViewModel 公开）：

```
<TextBlock Text="Id" />
<TextBox Grid.Column="1" Text="{Binding Source.Id}" />
<TextBlock Grid.Row="1" Text="Name" />
<TextBox Grid.Column="1" Grid.Row="1" Text="{Binding Source.Name}" />
<TextBlock Grid.Row="2" Text="Group" />
<ComboBox Grid.Column="1" Grid.Row="2"
          DisplayMemberPath="Name"
          ItemsSource="{Binding GroupList}"
          SelectedValue="{Binding Source.GroupId}"
          SelectedValuePath="Id"
          /> 
```

这一切都很好。但是，想象一下，出于某种原因，我需要刷新 GroupList 中的项目。调用 ViewModel 上的 ICommand，获取数据，并将 GroupList 设置为新列表。似乎刷新 GroupList 导致重置当前产品的 GroupId，将其设置为 NULL。

为什么会发生这种情况，除了在刷新列表后手动将其设置为之外，最好的处理方法是什么？GroupId 属性被更改的事实并不好，因为该属性的 PropertyChanged 可能有一些操作。出于这个原因，我还需要引入一个私有布尔变量_isRefreshing Groups，这样我就可以在根本不需要的时候阻止一些操作，而这一切都会“污染”代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:16:19.317

抱歉，您必须在刷新收藏后手动设置 GroupId。使用指示集合是否正在刷新的属性的想法是一个很好的想法（IsBusy 或 IsRefreshing 是我的建议）。

# google-maps-api-3 - Google 地图 API：如何在搜索和地址之间进行选择

> ID：11740144
> 
> 赞同：2
> 
> 时间：2012-07-31T12:33:29.710
> 
> 标签：google-maps-api-3, geocoding, google-places-api, google-geocoding-api

我正在实施地理编码和放置 Google API。第一个从地址返回一些点（纬度/经度）。第二个从搜索条目中返回一些兴趣点。

作为 iphone Map 原生应用程序，我想确定用户是否在搜索栏中输入了地址，或者只是一些关键字。

例如，如果我输入：

```
9 bicycle Street, New York => address, use Geocoding API
9 bicycle Street => Geocoding API
bicycle street   => Geocoding API
bicycle        => Place API
bicycle shop   => Place API 
```

我尝试始终调用地理编码 API，如果没有结果，则调用 Place API。但总会有结果。

我应该检测一些关键字，例如`street`, `highway`, ... 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:01:25.923

我终于找到了答案。

iPhone Map 本机应用程序无法确定用户是否键入了地址或仅键入了一些关键字。[它使用Text Search Requests](https://developers.google.com/places/documentation/search#TextSearchRequests)调用相当于 place API 。

文本搜索请求比地方搜索请求更灵活、更强大，但在您的有限配额中消耗的请求数是 10 倍：

> Google Place Search 和 Google Places Text Search 服务共享相同的使用限制；但是，文本搜索服务需要 10 倍的乘数。也就是说，您发出的每个文本搜索请求都将计为 10 个请求，而不是您的配额。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T12:48:57.380

您在帖子最后一行提出的问题让我感到畏缩，因为无法保证用户会在地址中输入这些后缀（它们完全是可选的，格式差异很大）。我以前见过很多，检测关键字不是要走的路。（另外，叫“自行车街”的店呢？）

我鼓励您在这里查看[我的答案，我在这里](https://stackoverflow.com/questions/11160192/how-to-parse-freeform-street-postal-address-into-components)讨论识别或解析地址的难度。有一些例子显示了一些看起来很疯狂的地址仍然是有效的地址，而不是地名。

此外，[这里有一篇简短的文章](http://smartystreets.com/how-to/regex-street-address)，描述了使用正则表达式（或常见模式）来识别和提取地址的困难——类似于您正在寻求做的事情。

谷歌的地理编码 API 总是给你一个结果的原因是因为它确实地址*近似*- 如果地址不存在，谷歌会做它最擅长的事情：它会搜索一些东西来显示给你，你正在寻找的东西. 如果您键入一个不存在的地址，它仍然会显示结果，因为它会插入和组成数据，因此您仍然可以继续进行操作。这有时很有用，但在这里它会咬你。

我建议寻找仅对*有效*地址进行地理编码的服务，如果没有结果，则使用 places API。例如，[SmartyStreets](http://smartystreets.com/products/liveaddress-api)（我工作的地方）的 LiveAddress API 只有在地址可以解析并且实际存在的情况下才会返回结果。查看一些[演示](http://smartystreets.com/products/liveaddress-api/demo)以了解我的意思。

这应该做你想要完成的事情。

# php - PHP Setter/Getter 和构造函数

> ID：11740145
> 
> 赞同：8
> 
> 时间：2012-07-31T12:33:32.203
> 
> 标签：php, constructor, architecture, setter, getter

我一直在网上搜索这个，但我似乎找不到足够清晰的东西让我理解。我在这里看到了关于 Java 的“类似”问题。

```
class animal{
    private $name;

    // traditional setters and getters
    public function setName($name){
        $this->name = $name;
    }

    public function getName(){
        return $this->name;
    }

    // animal constructors
    function __construct(){
       // some code here
    }

    // vs

    function __construct($name){
        $this->name = $name;
        echo $this->name;
    }
}

$dog = new animal();
$dog->setName("spot");
echo $dog->getName();

// vs

$dog = new animal("spot"); 
```

1.  我应该通过 setter 和 getter 还是通过构造函数声明和访问我的私有字段？
2.  哪一个是最佳实践？
3.  我了解构造函数的目的（也许不是），但是如果我可以通过 setter 和 getter 声明和访问我的私有字段，那么拥有构造函数的意义何在？

请注意...这是我第一次将 OOP 与 Web 开发和 PHP 一起使用，我正在尝试通过编写一些代码来“弄脏”我的双手来学习，以便我理解 OOP 中的某些内容。请保持简单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:44:45.667

这更多的是语义问题，而不是每个说的最佳实践。

在您的示例中，您的业务逻辑可能会确定动物始终需要名称。所以用名字来构造对象是有意义的。如果您不想允许更改动物的名称，则不要编写 setter。

IE

```
class Animal 
{
    private $name;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }
} 
```

您可能具有动物不需要的其他属性，例如您只为它编写 getter/setter 的所有者

```
class Animal
{
    private $name;
    private $owner;

    public function __construct($name)
    {    
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setOwner($owner)
    {
        $this->owner = $owner
    }
} 
```

但是如果你发现你总是在同时创建一个动物和一个主人，你可能想把它放在承包商签名中以方便起见

```
class Animal
{
    private $name;
    private $owner;

    public function __construct($name, $owner = null)
    {    
        $this->name = $name;
        $this->owner = $owner;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setOwner(Owner $owner)
    {
        $this->owner = $owner
    }

    public function getOwner()
    {
        return $this->owner;
    }
} 
```

如果所有者是您的应用程序中的另一个类，您可以键入提示您的构造函数需要特定类型（类）的所有者。所有这些都是为了让您或其他开发人员更容易理解代码背后的一些要求/逻辑 - 以及可能在这里或那里发现错误

```
class Owner 
{
    private $name;

    public function __construct($name)
    {    
        $this->name = $name;
    }
}

class Animal
{
    private $name;
    private $owner;

    public function __construct($name, Owner $owner = null)
    {    
        $this->name = $name;
        $this->owner = $owner;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setOwner(Owner $owner)
    {
        $this->owner = $owner
    }

    public function getOwner()
    {
        return $this->owner;
    }
}

// Create a new owner!
$dave = new Owner('Farmer Dave');

// a standard php empty object
$otherObj = new \stdClass();

// Create a new animal
$daisy = new Animal('Daisy');

// Farmer dave owns Daisy
$daisy->setOwner($dave);

// Throws an error, because this isn't an instance of Owner
$daisy->setOwner($otherObj);

// Set up Maude, with Dave as the owner, a bit less code than before!
$maude = new Animal('Maude', $dave); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-01T18:39:33.217

> 我应该通过 setter 和 getter 还是通过构造函数声明和访问我的私有字段？

在这种情况下，我问自己：

*   为什么我要创建一个方法来保存一个单行函数？（+构造函数）

*   重构两个、三个、四个、五个或更多 getter/setter 与一个构造函数相比会有多痛苦？（+构造函数）

*   与一个构造函数相比，记录两个、三个、四个、五个或更多的 getter/setter 有多难？（+构造函数）

*   是否会有记录的默认值？（+构造函数）

*   我喜欢文档并希望人们阅读吗？（+构造函数）

*   初始值会不确定吗？(+Setter)

*   是否有一组等效形式（速记、国际、昵称）都可以被接受为所需参数的语法正确？（+二传手）

*   是否有一组具有默认值的可选参数？（+二传手）

*   是否普遍需要对初始值进行字符串化和解析？（+二传手）

*   我不喜欢文档并期望人们进行实验吗？（+二传手）

> 哪一个是最佳实践？

该`Date`对象似乎是大多数语言中最复杂的类，因此它的 PHP 实现将是最佳实践的一个很好的参考。

> 如果我可以通过 setter 和 getter 声明和访问我的私有字段，那么拥有构造函数有什么意义？

在对象实例化时隐式调用构造函数，以封装其类型的结果数据结构的默认状态。

[![CDD：上下文驱动开发角色 - 创建者、对象、行为](../Images/0167c89d4ed1807bdff1e314d2232d78.png)](https://i.stack.imgur.com/zl4oZ.png)

**参考**

*   [日期时间::__构造](http://www.php.net/manual/en/datetime.construct.php)

*   [日期创建](http://www.php.net/manual/en/function.date-create.php)

*   [日期时间类](http://www.php.net/manual/en/class.datetime.php)

*   [date_default_timezone_get](http://php.net/manual/en/function.date-default-timezone-get.php)

*   [date_default_timezone_set](http://php.net/manual/en/function.date-default-timezone-set.php)

*   [PHP 日期时间支持的变化](http://php.net/manual/en/migration52.datetime.php)

*   [PHP OOP：访问器和析构器方法](http://coursesweb.net/php-mysql/php-oop-accessor-destructor)

*   [并发，第 4 部分：比较不同语言的 Promise 框架 – SLaks.Blog](http://blog.slaks.net/2015-01-08/comparing-different-languages-promises-frameworks/)

*   [CDD：上下文驱动的开发](http://cdd.tengstrand.nu/index.php/Main_Page)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:37:34.707

1.  依靠。通常有人说：如果是*必需*的依赖项，则使用构造函数，如果是可选的，则使用 getter/setter。
2.  没有偏爱或反对其中之一。
3.  构造函数包含在对象创建后立即执行的代码，它应该使对象处于稳定和可用的状态。这就是构造函数背后的想法，它在任何情况下都不起作用，但它应该给你一个想法，应该包含什么。

请注意，您甚至可以为同一属性同时实现构造函数参数和设置器，例如，如果您想允许稍后替换属性。

```
$bingo = new Dog;
echo $bingo->getName(); // DogHasNoNameException <-- maybe better as constructor argument?

$bingo = new Dog('Bingo');
echo $bingo->getName(); // "Bingo"
$spike = new Dog; // Missing argument 

$bingo->setName('Spike'); // Or maybe "rename()" ;)
echo bingo->getName(); // "Spike" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T12:40:21.153

> 我应该通过 setter 和 getter 还是通过构造函数声明和访问我的私有字段？哪一个是最佳实践？

两个都。这取决于您的需求。如果在某些字段中需要一个值，您可以向 `__construct()`-Method 添加一个参数来执行此操作。或者你也可以添加一个可选的参数`__construct`给用户设置属性的选项

> 我了解构造函数的目的（也许不是），但是如果我可以通过 setter 和 getter 声明和访问我的私有字段，那么拥有构造函数的意义何在？

构造函数应该初始化你需要初始化的属性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T12:41:20.597

在我看来，写 setter's & getter's 更正确，从那时起，属性的数量只会增加。然后 __construct 可以获取键名（property => value）的属性数组，并将它们设置为属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T12:50:57.160

1 > 那是你的选择：如果需要依赖，最好使用构造函数，否则，使用 getter。

2 > 最佳实践是第一位的，

实际上，你有一个名字，你的动物，但如果你添加一个类型和性别？并且你想分别调用 type、sexe 或 name，第一种方法比第二种方法好。

```
class animal{
private $name, $type, $sex;

// traditional setters and getters
public function setName($name){
    $this->name = $name;
}

public function setSex($sex){
    $this->sex = $sex;
}

public function setType($type){
    $this->type = $type;
}

public function getName(){
    return $this->name;
}

public function getSex(){
    return $this->sex;
}

public function getType(){
    return $this->type;
}

// animal constructors
function __construct(){
   // some code here
}

}

$dog = new animal();
$dog->setName("spot");
$dog->setSexe("male");
$dog->setType("dog");
echo $dog->getName().' is a '.$dog->getType().'('.dog->getSex().')'; 
```

3 > 这取决于第一个问题......但在全球范围内，我们总是需要一个依赖项，例如：

```
class animal{
private $name, $type, $sex;

// traditional setters and getters
public function setName($name){
    $this->name = $name;
}

public function setSex($sex){
    $this->sex = $sex;
}

private function setType($type){
    // if type is string ( cat, dog, lion ) and you want
    // to linked string in an id in your database (1, 2, 3...). 
    // you want to call your database connection ( declared in you constructor) 
    // and search type id here. 
    $this->type = $type;
}

public function getName(){
    return $this->name;
}

public function getSex(){
    return $this->sex;
}

public function getType(){
    return $this->type;
}

// animal constructors
public function __construct($type){
    // for sample you want to open your database here
    this->setType($type);
}

public function __destruct(){
    // and you want to close your connection here.
}

} 
```

# extjs - 如何在 Ext JS 的编辑器网格面板中添加“保存”按钮？

> ID：11740154
> 
> 赞同：0
> 
> 时间：2012-07-31T12:34:03.043
> 
> 标签：extjs

我需要在我的编辑器网格面板中添加一个“保存”按钮。我尝试过的一切都不起作用。谢谢你的帮助。这是我的代码。

```
var iLineItemGrid = new Ext.grid.EditorGridPanel({
    id: 'iLineItemStore',
    store: iLineItemStore,
    cm: iLineItemCM,
    cls: 'iLineItemGrid',
    width: 'auto',
    height: 'auto',
    frame: true,
    //title:'Edit Plants?',
    //plugins:checkColumn,
    clicksToEdit:1,
    viewConfig: {
        //forceFit: true
        autoFit:true
    },        
    tbar:  [{
        text: 'Add',
        tooltip:'Add the line item',
        handler : function(){
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope:iLineItemGrid
    }, {
        text: 'Delete',
        tooltip:'Remove the selected line item',
        handler: function(){
            iLineItemGrid.stopEditing();
            var r = iLineItemGrid.getSelectionModel().getSelectedCell();
            iLineItemStore.removeAt(r[1]);
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope:iLineItemGrid
    }],
    //MIKE SAVE BUTTON
    buttons: [{
        text: 'Save',
        tooltip: 'Click to save all changes to the database',
        handler: function() {
            iLineItemStore.each(function(record) {
                Ext.Ajax.request({
                    url: 'UpdateInvoiceDataAction.do',
                    //ADD AN ALERT TEXT HERE TO TEST IT
                    success: function() {
                        iLineItemGrid = false;
                        Ext.MessageBox.hide();
                        Ext.MessageBox.alert('Success', 'This record has been saved');
                    },
                    failure: function() {
                        iLineItemGrid.isLoaded = false;
                        cmh.display(action.result);
                    },
                    callback: function(records, options, success) {
                        //SOMEWHERE IN HERE POPULATE THE 'AMOUNT DUE' textfield
                        //How do I set this value?
                        Ext.getCmp('iAmountDue').setValue(Toa.Application.invId)
                    },
                    params: record.data
                });
            }
            )
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope:iLineItemGrid
    }]            
}); 
```

# linux - 强制 ld 绑定到未版本化的 .so 文件

> ID：11740155
> 
> 赞同：1
> 
> 时间：2012-07-31T12:34:04.333
> 
> 标签：linux, ld

我可以强制`ld`链接到未版本化的 .so 文件吗？

在 linux 下，当我将 C++ 程序链接到共享库时，它将绑定到版本化的 .so 文件，这通常是一个非常好的主意。例如，如果我用

```
g++ main.cxx -l somelib 
```

然后检查

```
ldd ./a.out 
```

它会打印出类似的东西

```
libsomelib.so.1 => /xxxx/somelib/libsomelib.so.1 
```

由于其他地方的系统损坏，此文件安装在目标中，`libsomelib.so`而不是像通常那样`libsomelib.so.1`使用符号链接。我无法更改此设置，因此作为一种解决方法，我想更改我的 makefile 以链接到未版本化的 .so 文件。（二进制兼容性在这里不是问题，因为一切都在受控环境中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-05T14:56:51.227

通过阅读 ld 手册，这似乎是不可能的。我建议在事后使用 patchelf 来修复它，例如`patchelf --replace-needed libsomelib.so.1 libsomelib.so a.out`. 请注意，最新发布的 patchelf 0.9 版本存在错误，您需要从源代码编译 patchelf master 以获得`--replace-needed`.

# c# - 视觉 Web 开发人员 Web 服务调试 HTTP/1.1 400 错误请求

> ID：11740156
> 
> 赞同：5
> 
> 时间：2012-07-31T12:34:11.947
> 
> 标签：c#, android, .net, web-services, visual-web-developer-2010

我有一个 .net c# mvc3 web 服务应用程序开发 wirh visual web developer 2010。我正在从一个 android 移动应用程序调用 web 服务。我想从 Eclipse 模拟器测试 Web 服务。当我通过从 Web 浏览器调用服务来调试 Web 服务应用程序时，一切正常，但是当我使用模拟器从 android 应用程序调用时，会得到“HTTP/1.1 400 错误请求”。

奇怪的是，如果我在本地 IIS 7 上发布 Web 服务应用程序，一切都很好，尽管我无法调试服务。

当我使用可视化 Web 开发人员对服务进行调试时，会出现一个带有如下地址的网页：

“http://localhost:1627/myservice.asmx/myMethod”

在我的 android 应用程序上，我使用这样的 url 调用服务：

“http://10.0.2.2:1627/myservice.asmx/myMethod”

但后来我得到“HTTP/1.1 400 错误请求”

我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:09:13.413

根据[无法通过 IP 地址连接 ASP.NET 开发服务器（VS2010）](https://stackoverflow.com/questions/6683267/cannot-connect-asp-net-development-server-vs2010-via-ip-address)

ASP.NET 开发服务器将为本地计算机上的浏览器请求提供页面。它不会将页面提供给另一台计算机。此外，它不会提供应用程序范围之外的文件。ASP.NET 开发服务器提供了一种在将页面发布到运行 IIS 的生产服务器之前在本地测试页面的有效方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T10:52:48.037

对于 Visual Studio 2010，我一直使用 inetd，它是一个端口转发工具。从 Visual Studio 2012 开始，我也遇到了这个问题。问题是在开发服务器中只允许本地调用，即使代理调用也不起作用，除非您更改请求标头。我对在 GitHub 上找到的现有简单代理服务器进行了一些修改。它将请求 url 中的 IP 地址更改为`localhost。[在此处](http://opensource.oxyva.nl/simple-development-proxy)下载代码。

* * *

我找到了更好的解决方案。在您的计算机上安装 IIS Express 后，在项目目录的 IIS 中创建一个新应用程序并为其指定一个别名。请注意，设置了正确的应用程序池，您将能够通过`http://localhost/YourProject/`当您无法从其他计算机连接时浏览您的站点，这可能是防火墙问题。

# sphinx - SphinxQL 数据对于列来说太长了

> ID：11740157
> 
> 赞同：1
> 
> 时间：2012-07-31T12:34:12.073
> 
> 标签：sphinx, sphinxql

我正在使用 SphinxQL 将数据插入到 Sphinx RT 索引中，它工作正常。只是偶尔我在我的数据集中得到非常大的值并且我得到以下错误：

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'title' at row 1
 at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3564) 
```

有没有办法延长字段的长度？或我可以使用的其他列类型？如果做不到这一点，*该*字段的长度是多少，所以我可以截断我的数据？

这是我的索引的样子：

```
index example
{
      type              = rt
      path              = /var/sphinxsearch/example
      rt_field          = title
      rt_attr_timestamp = timestamp
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:19:39.003

我将上述评论放入答案中：

您使用的是什么版本的 MySQL？什么版本的狮身人面像？也许您正面临与[此类](https://stackoverflow.com/questions/73109/mysql-data-truncation-error)似的 Unicode 编码问题？

也许您可以捕获异常，记录有问题的 SQL 查询。一旦您看到查询，问题可能就会变得明显。

# cassandra - 这些 Cassandra 警告是什么意思：Unable to lock JVM memory 和 MemoryMeter uninitialized

> ID：11740163
> 
> 赞同：5
> 
> 时间：2012-07-31T12:34:26.703
> 
> 标签：cassandra

我在[Cassandra](http://en.wikipedia.org/wiki/Apache_Cassandra)上收到以下警告- 这是什么意思？这是一个问题吗？我该如何解决这个问题？

> WARN 15:32:06,772 无法锁定 JVM 内存 (ENOMEM)。这可能导致部分 JVM 被换出，尤其是在启用 mmapped I/O 的情况下。增加 RLIMIT_MEMLOCK 或以 root 身份运行 Cassandra。
> 
> WARN 15:33:20,860 MemoryMeter 未初始化（jamm 未指定为 java 代理）；假设 liveRatio 为 10.0。通常这意味着 cassandra-env.sh 禁用了 jamm，因为您使用的是错误的 JRE；改为升级到 Sun JRE

我正在使用 Cassandra 1.1.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:59:51.540

ENOMEM 是[`Out Of Memory`](http://wlug.org.nz/ENOMEM). Cassandra 已使用其所有虚拟内存，因此 JVM 无法从虚拟内存中锁定额外的内存资源。

[`Jamm`](https://github.com/jbellis/jamm/)(Java Agent for Memory Management) 提供了 MemoryMeter。我看到的是您没有安装 MemoryMeter 并将其设置为代理，因此 Cassandra 禁用了 MemoryMeter。此外，MemoryMeter 可能仅适用于~~Sun~~ Oracle JRE，如果您希望 MemoryMeter 成功运行，Cassandra 更喜欢它。

* * *

要添加`Jamm`到 Java 代理，请将以下参数添加到 java 进程（示例）：

```
-javaagent:bin/../lib/jamm-0.2.5.jar 
```

（其中路径是 jar 所在的路径）。

# c# - 如何使用 SharpZipLib 提取或访问 gzip 中特定文件的流？

> ID：11740164
> 
> 赞同：2
> 
> 时间：2012-07-31T12:34:31.740
> 
> 标签：c#, compact-framework

如何使用 SharpZipLib 从 tar.gz（tar 文件和文件夹，然后压缩）中提取特定文件（或具有流式访问）？或者也许有人在 .NET cf 3.5 中有一些类似的库可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T13:04:42.203

```
using ( FileStream inputStream = File.OpenRead ( aPackage ) )
{
    using ( GzipInputStream gzStream = new GzipInputStream ( inputStream ) )
    {
        using ( TarInputStream tarStream = new TarInputStream ( gzStream ) )
        {
            TarEntry entry = tarStream.GetNextEntry();
            while ( entry != null )
            {
                if ( entry == theOneIWant )
                {
                    tarStream.CopyEntryContents (outputStream );
                    break;
                }
                entry = tarStream.GetNextEntry();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:01:38.007

这应该为你做。

```
public static void Main(string[ args)
{
    TarInputStream tarIn = new TarInputStream(new FileStream(@args[0], FileMode.Open, FileAccess.Read));
    TarEntry curEntry = tarIn.GetNextEntry();
    while (curEntry != null)
    {
        if (curEntry.Name.EndsWith("foo.txt", StringComparison.CurrentCultureIgnoreCase))
        {
            byte[] outBuffer = new byte[curEntry.Size];
            FileStream fs = new FileStream(@"foo.txt", FileMode.Create, FileAccess.Write);
            BinaryWriter bw = new BinaryWriter(fs);
            tarIn.Read(outBuffer, 0, (int)curEntry.Size);
            bw.Write(outBuffer,0,outBuffer.Length);
            bw.Close();
        }
        curEntry = tarIn.GetNextEntry();
    }
    tarIn.Close();
} 
```

# django - django 1.4 时区未以 UTC 格式存储在 db 中 - 为什么？

> ID：11740165
> 
> 赞同：0
> 
> 时间：2012-07-31T12:34:36.093
> 
> 标签：django, timezone

我的设置文件有 USE_TZ = True 和 TIME_ZONE = 'GMT'。我有中间件来检查用户的时区并将其设置为当前时区，它工作正常。但是，当我从表单中获取日期时间字段并将其存储在数据库中时，存储的时间是美国/东部时间而不是 UTC。例如，如果我有一个时区为美国/中部的用户，他们填写了一个包含日期时间字段的表单并选择上午 8:00，它在数据库中存储为上午 9:00。它应该在数据库中存储为 13:00（下午 1 点），因为考虑到夏令时，现在从美国/中部到 UTC 的偏移量是 5 小时。相反，它仅偏移 1 小时，这表明美国/东部。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:54:27.293

我刚刚发现它实际上工作正常，但是 django 管理员中显示的时间是相对于我的本地时间的，因此造成了混乱。存储在数据库中的时间实际上是正确地偏移 UTC。菜鸟的错误，但我是菜鸟。

# php - phpmyadmin 显示 utf8 但网站没有

> ID：11740167
> 
> 赞同：1
> 
> 时间：2012-07-31T12:34:52.767
> 
> 标签：php, mysql, utf-8, character-encoding, phpmyadmin

我用 utf-8_bin 排序创建了一个名为“items”的表，当我继续插入数据时，我将它插入到 devnagari 中，对于尼泊尔语，一切顺利，当显示记录时，所有 devnagari 字体将显示为问号，例如如果我写了निश्चल，那么它会显示为??????? 但它在 phpmyadmin 中正确显示，我已经声明在我的页面上也使用 utf-8，这是我页面的标题部分。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta charset="utf-8" />
</head>
<?php
$sql="SELECT * FROM `swyamsewika`.`items`";
mysql_connect("localhost","root","");
$query=mysql_query($sql);
$a=mysql_fetch_array($query);
var_dump($a);
?> 
```

如果我在页面中键入 निश्चल 那么它会正确显示。当我输入数据库然后使用 php 检索时，它会进入 ????? 请尽快帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:36:58.910

可以在 my.ini(mysql) 中设置

```
character-set-server = utf8 

init-connect = "set names utf8" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:44:35.627

在*phpmyadmin*中，转到**Options 选项**卡并向下滚动到**Collat​​ion**并为您的语言选择适当的排序规则。

有关字符集的进一步阅读，请转到[https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

# php - PHamlP 不缩进输出

> ID：11740169
> 
> 赞同：2
> 
> 时间：2012-07-31T12:34:57.310
> 
> 标签：php, web-applications, yii, haml, yii-extensions

我已经为 Yii 安装了[haml-and-sass](http://www.yiiframework.com/extension/haml-and-sass/)，除了一个细节之外，一切都很好：输出没有识别。

例如（注意缩进是`tab`）

```
!!!
%html(xmlns="http://www.w3.org/1999/xhtml",xml:lang="en",lang="en")
    %head
        %title="title"
    /head
    %body
        #main
            #banner
                banner
            /banner
            #menu
                menu
            /menu
            #content
                content
            /content
            #footer
                footer
            /footer
    /body
/html 
```

输出

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>
title
</title></head><!--head  -->
<body>
<div id="main">
<div id="banner">
banner
</div><!--banner  -->
<div id="menu">
menu
</div><!--menu  -->
<div id="content">
content
</div><!--content  -->
<div id="footer">
footer
</div><!--footer  -->
</div></body><!--body  -->
</html><!--html  --> 
```

PHamlP 的配置表明`ugly=false`

```
'viewRenderer'=>array(
 'class'=>'ext.phamlp.Haml',
 // delete options below in production
 'ugly' => false,
 'style' => 'nested',
 'debug' => 0,
 'cache' => false,
), 
```

我已经看到[其他用户](http://code.google.com/p/phamlp/wiki/HamlOptions#commentlist)也有这个问题，但在任何地方都没有解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:50:05.233

在文件 HamlNestedRenderer.php 你需要改变这个

```
private function getIndent($node) {
  return str_repeat(' ', 2 * $node->line['indentLevel']);
} 
```

对此

```
private function getIndent($node) {
  return str_repeat(' ', 2 * $node->level);
} 
```

之后我稍微更改了代码，因为我仍然觉得它很难看。所以这是我的 HamlNestedRenderer。注释行用于测试，您可以删除它们。

```
class HamlNestedRenderer extends HamlRenderer {
  /**
  * Renders the opening tag of an element
  */
  public function renderOpeningTag($node) {
    // set default
    $rot = '<!--default -->';
    // check whitespaceControl outer
    if($node->whitespaceControl['outer'] == true){

      if (stripos(parent::renderOpeningTag($node), "html") !== false) {
        $rot = '';
      }else{
        $rot = "\n";
      }        
    }else{
      $rot = $this->getIndent($node);
    };
    // add indent
    $rot .= $this->getIndent($node) ;
    $rot .= parent::renderOpeningTag($node) ;
    // check whitespaceControl inner
    if($node->whitespaceControl['inner'] == true){
      // $rot .= '<!-- ROT 1.3 -->';
    }else{
      // check if isSelfClosing
      if($node->isSelfClosing == true && $node->whitespaceControl['outer'] == true){
        // $rot .= '<!-- ROT 1.4 -->';
      }else{
        // $rot .= '<!-- ROT 1.5 -->';
      }
    };
    // return var
    return $rot;
  }

  /**
  * Renders the closing tag of an element
  */
  public function renderClosingTag($node) {
    $rct = '<!-- default rct -->';
    if($node->isSelfClosing){
      $rct = '';
    }else{
      if($node->whitespaceControl['inner']){
        $rct = '';
      }else{
        // $rct = '<!-- RCT 1.3 -->';
        $rct = parent::renderClosingTag($node) ;

        if($node->whitespaceControl['outer']){
          $rct .= "\n"  . substr($this->getIndent($node), 0, -2);
        }else{
          $rct .= "\n" ;
        }
      }
    };
    return $rct;    
  }

  /**
  * Renders content.
  * @param HamlNode the node being rendered
  * @return string the rendered content
  */
  public function renderContent($node) {
    return parent::renderContent($node);
  }

  /**
  * Renders the opening of a comment
  */
  public function renderOpenComment($node) {
    return parent::renderOpenComment($node) . (empty($node->content) ? "\n" : '');
  }

  /**
  * Renders the closing of a comment
  */
  public function renderCloseComment($node) {
    return parent::renderCloseComment($node) . "\n";
  }

  /**
  * Renders the start of a code block
  */
  public function renderStartCodeBlock($node) {
    return $this->getIndent($node) . parent::renderStartCodeBlock($node) . "\n";
  }

  /**
  * Renders the end of a code block
  */
  public function renderEndCodeBlock($node) {
    return $this->getIndent($node) . parent::renderEndCodeBlock($node) . "\n";
  }

  private function getIndent($node) {
    return str_repeat(' ', 2 * $node->level);
  }
} 
```

# css - html5：css样式： 对比 对于链接列

> ID：11740173
> 
> 赞同：1
> 
> 时间：2012-07-31T12:35:01.417
> 
> 标签：css, html, html-lists, semantics

页脚中有 4 列链接，每列宽度为 25%。每列的 css 样式是相同的（它们属于同一个类）。第一列如下所示：

**第 1 列的标题**

链接11

链接12

链接13

我认为可以使用 `<ul><li>`标签或`<p>`标签来达到目标​​。哪种方式更好，使用`<ul>, <li>` or `<p>`？

**添加到问题中：** PSI 刚刚检查了链接[http://www.w3schools.com/html5/tag_nav.asp](http://www.w3schools.com/html5/tag_nav.asp)，他们使用`<!DOCTYPE html>`（据我了解，html5），但如果您检查他们如何包装链接列（我的问题），他们只是使用`<br/>`而不是`<p>`或`<li>`（请参阅左栏的视图源）。使用`<br/>`比`<ul><li>`or更好`<p>`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:46:07.147

如果您想在语义上正确，您将根据您的内容编写 html。当您显示“链接列表”时，“ul”是要走的路。

并且（作为奖励）如果您想在使用它时使其符合 HTML5，请将列表包装在“nav”标签中。

```
<nav>
<ul>
<li><a href="#">link 1</a></li>
<li><a href="#">link 2</a></li>
<li><a href="#">link 3</a></li>
</ul>
</nav> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:45:22.713

您应该同时使用 nav 和 ul 标签来实现这一点。

```
<nav>
    <h1>Title of Column 1</h1>
    <ul>
        <li>link11</li>
        <li>link12</li>
        <li>link13</li>
    </ul>
</nav> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:40:45.380

我认为最好使用列表并通过 css 使 ul none 的列表样式类型。

# c# - C# 随机化多个图片框中的多个图像

> ID：11740174
> 
> 赞同：0
> 
> 时间：2012-07-31T12:35:02.187
> 
> 标签：c#, image, random, picturebox

嗨，伙计们，我正在尝试制作纸牌游戏，但在将 32 张纸牌图像分布在 32 个图片框中时遇到了一些问题，但我无法编写有关如何按名称制作图像列表的代码。我已经尝试将我的代码使用按钮作为卡片并将它们随机分发给玩家，这是成功的，但是当我尝试这样做以防图像出现时，我无法正确地在这里发布我的两个代码。

```
class CardsDeck
{
    public static Random r = new Random();

    private static List<string> cards = new List<string>{ "♣ King", "♣ Queen", "♣ Jack", " ♣", "♣ 7", "♣ 8", "♣ 9", "♣ 10",
                                                          "♦ King", "♦ Queen", "♦ Jack", " ♦", "♦ 7", "♦ 8", "♦ 9", "♦ 10",
                                                          "♥ King", "♥ Queen", "♥ Jack", " ♥", "♥ 7", "♥ 8", "♥ 9", "♥ 10",
                                                          "♠ King", "♠ Queen", "♠ Jack", " ♠", "♠ 7", "♠ 8", "♠ 9", "♠ 10" };
    public string ReceiveCards()
    {
        if (cards.Count > 0)
        {
            int index = r.Next(cards.Count);
            var card = cards[index];
            cards.RemoveAt(index);
            return card;
        }
        else
        {
            return "";
        }
    }
} 
```

在主窗体中

```
public partial class mainForm : Form
{
    public mainForm()
    {
        InitializeComponent();

        CardsDeck cd = new CardsDeck();

        btnA1.Text = cd.ReceiveCards();
        btnA2.Text = cd.ReceiveCards();
        btnA3.Text = cd.ReceiveCards();
        btnA4.Text = cd.ReceiveCards();

        btnB1.Text = cd.ReceiveCards();
        btnB2.Text = cd.ReceiveCards();
        btnB3.Text = cd.ReceiveCards();
        btnB4.Text = cd.ReceiveCards();

        btnC1.Text = cd.ReceiveCards();
        btnC2.Text = cd.ReceiveCards();
        btnC3.Text = cd.ReceiveCards();
        btnC4.Text = cd.ReceiveCards();

        btnD1.Text = cd.ReceiveCards();
        btnD2.Text = cd.ReceiveCards();
        btnD3.Text = cd.ReceiveCards();
        btnD4.Text = cd.ReceiveCards();

    }

    private void btnTrump_Click(object sender, EventArgs e)
    {
        CardsDeck cd = new CardsDeck();

        btnA5.Text = cd.ReceiveCards();
        btnA6.Text = cd.ReceiveCards();
        btnA7.Text = cd.ReceiveCards();
        btnA8.Text = cd.ReceiveCards();

        btnB5.Text = cd.ReceiveCards();
        btnB6.Text = cd.ReceiveCards();
        btnB7.Text = cd.ReceiveCards();
        btnB8.Text = cd.ReceiveCards();

        btnC5.Text = cd.ReceiveCards();
        btnC6.Text = cd.ReceiveCards();
        btnC7.Text = cd.ReceiveCards();
        btnC8.Text = cd.ReceiveCards();

        btnD5.Text = cd.ReceiveCards();
        btnD6.Text = cd.ReceiveCards();
        btnD7.Text = cd.ReceiveCards();
        btnD8.Text = cd.ReceiveCards();
    }
} 
```

现在在这种情况下，我试图用图像而不是用字符串来做这件事，但我不能让我的代码正确。谁能在这方面帮助我

```
 class Card
{
    public static Random r = new Random();

    PictureBox[] picBox = new PictureBox[32]

    public static Bitmap[] pictures = new Bitmap[32];
    // What should i write here??

    bool[] usedPictures = new bool[pictures.Length];

}
public string ReceiveCards()
{
    int ICount = 0;
    while (iCount < pictures.Length)
    {
         int attempt = random.Next(0, pictures.Length);

         //Ensures you will only use an available picture
        if (usedPictures[attempt] == false)
        {            
             picBox[attempt].Image= pictures[iCount];
             doorUsed[attempt] = true;
             iCount++;
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:44:11.493

可以使用ImageList，按照List cars的顺序在ImageList中添加Images

```
`private static List<string> cards = new List<string>{ "♣ King", "♣ Queen", "♣ Jack", " ♣", "♣ 7", "♣ 8", "♣ 9", "♣ 10",
                                                      "♦ King", "♦ Queen", "♦ Jack", " ♦", "♦ 7", "♦ 8", "♦ 9", "♦ 10",
                                                      "♥ King", "♥ Queen", "♥ Jack", " ♥", "♥ 7", "♥ 8", "♥ 9", "♥ 10",
                                                      "♠ King", "♠ Queen", "♠ Jack", " ♠", "♠ 7", "♠ 8", "♠ 9", "♠ 10" }; 
```

比您可以使用卡片在 ImageList 中获取需要的索引。

[您可以在http://msdn.microsoft.com/ru-ru/library/system.windows.forms.imagelist.aspx](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.imagelist.aspx)查看如何使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:19:07.720

似乎您的方法将从面向对象的角度受益。为什么不创建一个 PlayingCard 对象；一个具有“CardImage”属性的？这样，您无需维护两个单独的列表（一个卡片值，一个卡片图像），只需维护一个 PlayingCards 列表，您就可以访问 .CardImage 属性？

```
public class PlayingCard
{
    public enum Suit { Spades, Hearts, Diamonds, Clubs }
    public enum Rank {King =13, Queen = 12, Jack = 11, Seven = 7, Eight = 8, Nine = 9 }

    public Suit CardSuit;
    public Rank CardRank;

    public Bitmap CardImage;
} 
```

然后在您的构造函数中解析 Suit 和 Rank 以确定图像。

将您的收藏创建为 List<PlayingCard>

# bash - Bash 脚本帮助/评估

> ID：11740175
> 
> 赞同：2
> 
> 时间：2012-07-30T14:29:36.783
> 
> 标签：bash

我正在尝试学习一些脚本，但是我找不到一个功能的解决方案。

基本上我想要求评估我的脚本，因为它可能会降低复杂性和行数。

此脚本的目的是从 Amazon S3 下载随机、加密的 MySQL 备份、恢复转储并运行一些随机 MySQL 查询。

我不确定如何通过电子邮件发送`printf`语句的输出 - 一个用于标题，第二个用于实际数据。我尝试格式化输出，使其如下所示，但我必须从以下内容中排除标题`loop`：

```
Database:   Table:          Entries:                      

database1   random_table        0                             
database2   random_table        0                             
database3   random_table        0
database4   random_table        0 
```

我想将此输出包含在电子邮件中，并根据脚本的成功/失败更改电子邮件主题。

我可能使用了很多`if`循环，而 MySQL 查询可能很复杂。

脚本：

```
#!/usr/bin/env bash

# DB Details:
db_user="user"
db_pass="password"
db_host="localhost"

# Date
date_stamp=$(date +%d%m%Y)

# Initial Setup
data_dir="/tmp/backup"

# Checks
if [ ! -e /usr/bin/s3cmd ]; then
    echo "Required package (http://s3tools.org/s3cmd)"
    exit 2
fi
if [ -e /usr/bin/gpg ]; then

gpg_key=$(gpg -K | tr -d "{<,>}" | awk '/an@example.com/ { print $4 }')

if [ "$gpg_key" != "an@example.com" ]; then
    echo "No GPG key"
    exit 2
fi

else
    echo "No GPG package"
    exit 2
fi

if [ -d $data_dir ]; then
    rm -rf $data_dir/* && chmod 700 $data_dir
else
    mkdir $data_dir && chmod 700 $data_dir
fi

# S3 buckets
bucket_1=s3://test/

# Download backup

for backup in $(s3cmd ls s3://test/ | awk '{ print $2 }')
do
latest=$(s3cmd ls $backup | awk '{ print $2 }'  | sed -n '$p')
random=$(s3cmd ls $latest | shuf | awk '{ print $4 }' | sed -n '1p')
        s3cmd get $random $data_dir >/dev/null 2>&1
done

# Decrypting Files
for file in $(ls -A $data_dir)
do
filename=$(echo $file | sed 's/\.e//')
    gpg --out $data_dir/$filename --decrypt $data_dir/$file >/dev/null 2>&1 && rm -f $data_dir/$file
if [ $? -eq 0 ]; then

# Decompressing Files
bzip2 -d $data_dir/$filename
if [ $? -ne 0 ]; then
    echo "Decompression Failed!"
fi
else
    echo "Decryption Failed!"
exit 2
fi
done

# MySQL Restore

printf "%-40s%-30s%-30s\n\n" Database: Table: Entries:

for dump in $(ls -A $data_dir)
do
    mysql -h $db_host -u $db_user -p$db_pass < $data_dir/$dump
if [ $? -eq 0 ]; then

# Random DBs query
db=$(echo $dump | sed 's/\.sql//')
random_table=$(mysql -h $db_host -u $db_user -p$db_pass $db -e "SHOW TABLES" | grep -v 'Tables' | shuf | sed -n '1p')
db_entries=$(mysql -h $db_host -u $db_user -p$db_pass $db -e "SELECT * FROM $random_table" | grep -v 'id' | wc -l)

printf "%-40s%-30s%-30s\n" $db $random_table $db_entries

    mysql -h $db_host -u $db_user -p$db_pass -e "DROP DATABASE $db"     
else
    echo "The system was unable to restore backups!"
    rm -rf $data_dir
exit 2
fi
done

#Remove backups
    rm -rf $data_dir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:53:21.183

如果您提出具体问题（而不是“请查看我的代码”），并且如果您将每个帖子限制为一个问题，您将获得最佳答案。关于通过电子邮件发送 printf 语句的输出：

您可以将语句分组到一个块中，然后将一个块的输出通过管道传输到另一个程序中。例如：

```
{
  echo "This is a header"
  echo

  for x in {1..10}; do
    echo "This is row $x"
  done
} | mail -s "Here is my output" lars@example.com 
```

如果您想让电子邮件主题以脚本中其他地方的成功或失败为条件，您可以 (a) 将输出保存到文件中，然后 (b) 在构建主题行后通过电子邮件发送文件：

```
{
  echo "This is a header"
  echo

  for x in {1..10}; do
    echo "This is row $x"
  done
} > output

if is_success; then
  subject="SUCCESS: Here is your output"
else
  subject="FAILURE: Here are your errors"
fi

mail -s "$subject" lars@example.com < output 
```

# php - Symfony2：关于根据公司权限为每个用户实施角色的建议

> ID：11740178
> 
> 赞同：2
> 
> 时间：2012-07-31T12:35:08.507
> 
> 标签：php, symfony

我正在为一个新建项目评估 Symfony2。核心要求之一是；一个用户可以与许多公司相关联，并且这些关联中的每一个都可以具有由角色标识的一组不同的权限。

有没有人体验过实现类似的东西或对如何使用 Symfony2 的 ACL 系统实现这一点的看法？

将感激地接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T14:58:53.170

我玩游戏太晚了，但也许这对其他人有帮助？

[http://brentertainment.com/2012/02/28/contextualizing-your-symfony2-application-with-the-service-container/](http://brentertainment.com/2012/02/28/contextualizing-your-symfony2-application-with-the-service-container/)

简而言之，您可以使用自定义投票器，然后利用您可以传递给投票器的第二个对象并使用它来将您的安全检查上下文化，如下所示

```
public function vote(TokenInterface $token, $object, array $attributes)
     {
         if ($this->supportsClass($object) && $company = $this->container->get('context.company')) {
             foreach ($attributes as $attribute) {
                 if ($this->supportsAttribute($attribute)) {
                     if ($company == $object->getCompany()) {
                         return VoterInterface::ACCESS_GRANTED;
                     }
                     return VoterInterface::ACCESS_DENIED;
                 }
             }
         }

         return VoterInterface::ACCESS_ABSTAIN;
     }
 } 
```

# java - FTP连接性能java

> ID：11740181
> 
> 赞同：0
> 
> 时间：2012-07-31T12:35:27.970
> 
> 标签：java, ftp

我想通过打开一次FTP连接来优化性能。可以吗？

我正在做，

```
public void method1()
{
  for(loop)
  {
    List li = someList;
    method2(li); //Here I am calling this method in loop. This method has code for FTP connection. So for every iteration it is opening FTP connection in method2().
  }
}

public void method2(List li)
{
 open FTP connection // FTP connect code here
 once FTP connection obtained ....do some other stuff...
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:40:50.823

你没有向我们解释你想要做什么优化。你想重用一个连接吗？不可能以多线程方式使用连接（想象在文件传输时发送流命令：这是不可能的）。

唯一的优化是在两组命令之间保持连接打开（您避免了关闭和重新打开连接的成本，这是相当昂贵的）。

对静态的东西要非常小心：问题通常发生在多线程环境（例如应用程序服务器）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:38:21.013

您可以使用像这样创建一次的静态（或实际上是实例）变量；

```
private static FTPConnection myFTPCon = openFTPConnection();

private static FTPConnection openFTPConnection()
{
    //open ftp connection here and return it
}

public void method1()
{
    for(loop)
    {
        List li = someList;
        method2(li);
    }
}

public synchronized void method2(List li)
{
     //use myFTPCon here
} 
```

* * *

**编辑以回应评论**

```
public class MyFTPClass {

    private FTPConnection myFTPCon;

    public MyFTPClass(String host, String user, String password) {
        //connect to the ftp server and assign a value to myFTPCon
    }

    public synchronized void method() {
        //use the myFTPCon object here
    }
} 
```

`MyFTPClass`然后，您将从主程序流构造一个对象，并从那里使用它。每个新`MyFTPClass`实例都指向一个不同的 FTP 服务器连接，因此您可以拥有任意数量的实例。

# java - JAXB 更新字符串列表

> ID：11740188
> 
> 赞同：0
> 
> 时间：2012-07-31T12:36:05.500
> 
> 标签：java, string, reference, jaxb

我必须使用包含以下 XSD 元素的 JAXB 类型（名为“运行时”）：

```
<xsd:element name="scripts" minOccurs="1" maxOccurs="1">
<xsd:simpleType>
<xsd:list itemType="xsd:string" />
</xsd:simpleType>
</xsd:element> 
```

因此我有如下代码：

```
runtime.getScripts() 
```

有什么方法可以更新脚本值吗？以下不起作用：

```
for (String aScript : runtime.getScripts()) {
final String updatedScript = "dummy";
                aScript = updatedScript; // ?
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:21:30.243

您可以使用`set`on 方法`List`更新值：

**演示**

```
import java.util.*;

public class Demo {

    public static void main(String[] args) {
        List<String> scripts = new ArrayList<String>();
        scripts.add("foo");
        scripts.add("bar");

        for(int x=0,size=scripts.size(); x<size; x++) {
            scripts.set(x, "dummy");
        }

        for(String script : scripts) {
            System.out.println(script);
        }
    }

} 
```

**输出**

```
dummy
dummy 
```

# xml - 在 groovy 中读取 xml 值

> ID：11740189
> 
> 赞同：0
> 
> 时间：2012-07-31T12:36:09.023
> 
> 标签：xml, groovy

我已经检查了该站点，尽管许多人都在寻找类似的解决方案，但尚未发布针对我的特定问题的解决方案，也没有提出类似的问题。

我有一个看起来像这样的 XML：

```
<root>
 <item1>TEXT A</item1>
 <item2>TEXT B</item2>
 <subs>
  <sub1>
   <thing property1='valueA' property2='valueB'>
    <foo>fooA</foo>
  </sub1>
  <sub2>
   <thing property1='valueC' property2='valueD'>
    <foo>fooA</foo>
  </sub2>
 </subs>
</root> 
```

我想得到“TEXT B”

我在想

```
def xml = new XmlParser().parseText(MY_XML_FILE) 
```

但现在我如何访问“TEXT B”？

```
xml.root.item2.text 
```

不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:03:05.423

这里发生了一些事情：

1.  Groovy 的 XmlParser 和 XmlSlurper（我推荐后者）采用包装在根元素中的 XML 文档（格式良好的 XML 始终存在于根元素中）。Groovy 不需要您指定根元素，因此

    xml.root.item1

可以变成

```
xml.item1 
```

如果您有很多 item1，则需要将它们作为数组访问。

```
xml.item1[0] 
```

1.  您的 XML 格式不正确。您缺少两个结束标签。

2.  要获取节点的内部文本，请使用 text() 而不是 text（这是一种方法）。

这里有一些关于[XmlParser](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlParser)和[XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)的优秀资源。

# jquery - Visual Studio 2012 RC + jQuery UI = 错误？

> ID：11740195
> 
> 赞同：-1
> 
> 时间：2012-07-31T12:36:17.507
> 
> 标签：jquery, jquery-ui, button, visual-studio-2012

我已经束手无策了！我正在尝试做一些（我相信）是一个非常简单的 jQuery UI 过程，但我无法让它工作。我不确定将什么确定为导致问题的变量。

它可能是：

1.  我的代码
2.  视觉工作室 2012 RC
3.  jQuery UI 1.8.22

我想要做的是创建一个 jQuery 按钮并在其上放置一个图标。我想要的图标就是`plus-thick`图标。

这是页面的`css`和`js`“导入”（它们的顺序不正确？？？）：

```
<link rel="stylesheet" type="text/css" href="Content/Default.css" />
<link rel="stylesheet" type="text/css" href="Content/themes/cupertino/jquery-ui-1.8.22.custom.css" />
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="Scripts/jquery-ui-1.8.22.custom.min.js"></script> 
```

这是我用来尝试执行此操作的代码：

```
$('.headerButtonsDiv > a')
.button()
.button("option", "icons", { primary: 'ui-icon-plus-thick' })
.click(function () {
    var text = $(this).text();
    alert(text + ' clicked!');
    return false;
}); 
```

这是我的第一次尝试（顺便说一下，结果与上面相同）：

```
$('.headerButtonsDiv > a')
.button( { icons: { primary: 'ui-icon-plus-thick' } } )
.click(function () {
    var text = $(this).text();
    alert(text + ' clicked!');
    return false;
}); 
```

此代码影响三个按钮。

结果如下：

1.  元素被`<a>`正确地转换为 jQuery 按钮。
2.  每个按钮正确地在按钮的左侧都有一个图标。
3.  每个按钮错误地都有`carat-1-n`图标而不是`plus-thick`。

当我进入页面检查器（使用 IE 和/或 Chrome）时，我深入到`button`（转换后的`<a>`元素）并查看它及其 2`<span>`个子元素。虽然`<span>`图标的元素**确实**应用了`ui-icon-plus-thick`类，但它**没有**应用任何类`background-position`。

因此，尽管该课程**存在**，但实际上并未应用。当我手动添加`background-position`属性 ( `background-position: -32px -128px;`) 时，*“神奇地”*出现了正确的图标 ;-)。

我想我可以找到一个解决方法，我创建按钮，然后尝试选择正确的`<span>`子元素，然后“手动”应用`background-position`自己，但这不*正是*jQuery 库应该做的吗？

无论如何，如果有人能看到我出轨的地方，我将不胜感激！这确实是一个小问题，但如果我不能让**这个**工作，我对更复杂的问题没有信心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:48:03.257

我很高兴在其他人指出我的愚蠢之前看到了这个答案！！！！

我**真正**想要的课程是：`ui-icon-plusthick`.

我**使用**的是：`ui-icon-plus-thick`.

我盯着这个看了 2 个小时，从来没有注意到一个破折号（“-”）的区别。

啊啊啊啊啊啊！！！！！！

# cordova - 使用 sencha Touch2 运行黑莓时在黑莓模拟器上出现白屏

> ID：11740196
> 
> 赞同：0
> 
> 时间：2012-07-31T12:36:19.707
> 
> 标签：cordova, sencha-touch-2, blackberry-webworks

我正在使用 sencha touch 开发一个 blackberry webworks 应用程序。并且在构建后仅获得白屏。

这是我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    
   "http://www.w3.org/TR/html4/loose.dtd">
 <html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="viewport" id="viewport" content="height=device-height,width=device-
    width,user-scalable=no" />
   <title>Insert title here</title>
  <script type="text/javascript" src="www/sencha-touch-all.js"></script>
    <script type="text/javascript" src="www/sencha-touch.js"></script>
 <script type="text/javascript">
 new Ext.Application({ 
launch: function() { 
    new Ext.Panel({ 
        fullscreen: true, 
        dockedItems: [{xtype:'toolbar', title:'My First App'}], 
        layout: 'fit', 
        styleHtmlContent: true, 
        html: '<h2>Hello World!</h2>I did it!' 
     }); 
 } 
  </script>
  </head>
 <body>
 <p>Hello World</p>
</body>
</html> 
```

谁能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:47:56.643

包括其中之一 :) sencha-touch-all.js 是 sencha-touch.js 的调试版本

第二个看起来你错过了包含 css 文件。

干杯，奥列格

# azure - Azure：工作角色写入 c:\ 或本地存储

> ID：11740197
> 
> 赞同：2
> 
> 时间：2012-07-31T12:36:20.020
> 
> 标签：azure, azure-worker-roles

我很怀疑。

我有一个代码，它创建一个文件“foo.txt”，然后使用 UploadFile() 将它复制到一个 blob。
如果我不了解天蓝色的概念，我不能在 "c:\" 中创建这个文件吗？
我必须在我的 ServiceDefinition.csdef 中使用本地存储，并在 azureLocalResource.RootPath 中创建它。

但是有 ac:\ 用于写入的驱动器（ad:\ 用于操作系统，ae:\ 用于代码），不是吗？
它有什么用？
我们可以在启动任务中使用它吗？

我问是因为我相信今天的代码是用 c:\ util 运行的。
而且我找不到为什么类似的代码在新的工人角色中不起作用。
（这是文件和目录问题，而不仅仅是文件）

**[Answer]**
我可以在 c: 中创建这个文件，但强烈建议使用本地存储 API，因为驱动器号并不总是相同的（例如重新启动后）。
本地存储只是使用当前实例的读写驱动器的捷径。
在启动任务的特定情况下，我们可以通过 2 种方式访问​​此存储：使用 ac# 程序/脚本中的 azure API（请参阅[本主题](http://blog.smarx.com/posts/using-a-local-storage-resource-from-a-startup-task)）或使用环境变量（请参阅[本主题](http://msdn.microsoft.com/en-us/library/windowsazure/hh974419.aspx)）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:54:06.113

您不想将自己束缚在固定的驱动器字母上。确实，C:\ 大部分时间是数据磁盘，D:\ 大部分时间是操作系统，E:\ 大部分时间是您的代码所在的位置。

但你不能指望这一点，这就是我大部分时间说的原因。就像 Ryan[在此处](https://stackoverflow.com/a/8262363/384546)解释的那样，您的应用程序磁盘可能会在重新启动后从 E:\ 更改为 F:\，同样的事情**也可能**适用于您的数据磁盘。只有**LocalResource**可以告诉您可以将文件保存在哪里，所以我建议您使用它。

如果您有需要处理文件的启动任务，您还应该使用 LocalResources。这可以通过使用 PowerShell：http: [//blog.smarx.com/posts/using-a-local-storage-resource-from-a-startup-task](http://blog.smarx.com/posts/using-a-local-storage-resource-from-a-startup-task)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:54:46.450

我建议您使用 LocalStorage，它旨在用于此目的，并且通过使用 api，您可以检索路径/驱动器，而不是对特定驱动器位置进行硬编码依赖。这也有助于避免任何权限问题，因为 LocalStorage 将听命于运行您的角色的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:18:54.533

您不能将文件创建到文件流然后上传文件吗？还请考虑在多个实例上运行辅助角色的影响，因为对保存到 C:\ 的文件的引用可能不存在，具体取决于角色所在的实例。LocalResource 最适合这个例子。

启动任务通常用于执行批处理文件，因此您可能会运行一个使用[cerebrata cmdlet](http://cerebrata.com/Products/AzureManagementCmdlets/)上传文本文件的 powershell 脚本。

# c# - C# 使用只有一次返回的递归

> ID：11740198
> 
> 赞同：0
> 
> 时间：2012-07-31T12:36:21.833
> 
> 标签：c#, recursion, factorial

我有以下递归函数

```
public int Factorial(int number_to_calculate)
{
    if (StackChanged != null)
    {
        StackChanged(new CustomEventArgs(StackValue, Result));
    }

    System.Threading.Thread.Sleep(wait_time);
    if (number_to_calculate == 0)
    {
        StackValue--;
        return 1;
    }
    else
    {
        StackValue++;
        Result = (number_to_calculate * Factorial(number_to_calculate - 1));
    }

    if (StackChanged != null)
    {
        StackChanged(new CustomEventArgs(StackValue, Result));
    }
    StackValue--;
    System.Threading.Thread.Sleep(wait_time);
    return Result;
} 
```

显然，我的主管不同意我有 2 个返回，但希望函数是递归的。所以我只需要一个回报。我已经尝试使用带有 goto 开头的累加器，以便只有一个返回，但是我需要在每次函数调用自身时增加 StackValue 并在递归结束时减少它。这样我就不知道什么时候出来了。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:41:08.593

使函数具有单个 return 语句的最简单方法是将要返回的值存储在一个变量中，然后在最后返回它。因此，您将转换如下内容：

```
int myFunc() {
    if (cond)
        return x;
    else
        return y;
} 
```

变成这样：

```
int myFunc() {
    int returnValue;
    if (cond)
        returnValue = x;
    else
        returnValue = y;
    return returnValue;
} 
```

这个原则可以普遍应用于任何方法，只要你注意当你将 return 语句更改为变量赋值时，你已经设置了条件，因此跳过了其余代码。

然而，这样的要求是相当随意的。一般来说，递归预计会有多个返回语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:41:19.193

代替

```
if (number_to_calculate == 0)
    {

        StackValue--;

        return 1;

    }... 
```

做

```
if (number_to_calculate == 0)
    {

       result = 1;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:01:23.943

```
int Factorial(int number) 
        {
            int result = 1;
            StackValue++;
            if (StackChanged != null)
                StackChanged(new CustomEventArgs(StackValue, Result));

            if (number > 1) 
            {       
                System.Threading.Thread.Sleep(wait_time); 
                result = number * Factorial(number - 1);
            }

            StackValue--;
            if (StackChanged != null)
                StackChanged(new CustomEventArgs(StackValue, Result));

            return result;
        } 
```

# c# - 当使用实体框架使用“包含”语句引用关联表时，将被完全解析

> ID：11740199
> 
> 赞同：0
> 
> 时间：2012-07-31T12:36:21.840
> 
> 标签：c#, entity-framework, entity-framework-4

从实体框架中提取数据时，我遇到了包含问题。[我昨天在这里](https://stackoverflow.com/questions/11727534)发布了一个非常相似的问题，它与我将要使用的示例相同。我正在使用实体框架 v4.0。

我有以下简单模型，一个包含页面表单列表（~200）的表格。每个表单都有一个或多个字段（总共约 4000 个），每个字段可能有一些参数（总共约 16000 个）。

![实体模型](../Images/ed132e238d7fd7477700faf77f9dcd23.png)

我使用以下代码提取数据：

```
EntityConnection myConnection = new EntityConnection("name=myModel");

if(conn.State != ConnectionState.Open) {
    conn.Open();
}
ObjectContext context = new ObjectContext("name=myModel");
context.ContextOptions.LazyLoadingEnabled = false;

ObjectQuery<PageForm> myObjectSet = context.CreateObjectSet<PageForm>()
                                           .Include("FormFields.FormFieldParameters");

IQueryable<PageForm> myFilteredObjectSet = myObjectSet.Where(c => c.FormID == 1);

List<PageForm> myReturnValue = myFilteredObjectSet.toList(); 
```

生成以下sql查询

```
SELECT 
[Project1].[FormID] AS [FormID], 
[Project1].[FormName] AS [FormName], 
[Project1].[C2] AS [C1], 
[Project1].[FormID1] AS [FormID1], 
[Project1].[FieldID] AS [FieldID], 
[Project1].[FieldName] AS [FieldName], 
[Project1].[C1] AS [C2], 
[Project1].[FieldParamID] AS [FieldParamID], 
[Project1].[Value] AS [Value], 
[Project1].[FieldID1] AS [FieldID1]
FROM ( 
    SELECT 
    [Extent1].[FormID] AS [FormID], 
    [Extent1].[FormName] AS [FormName], 
    [Join1].[FieldID] AS [FieldID], 
    [Join1].[FieldName] AS [FieldName], 
    [Join1].[FormID] AS [FormID1], 
    [Join1].[FieldParamID] AS [FieldParamID], 
    [Join1].[Value] AS [Value], 
    [Join1].[FieldID1] AS [FieldID1], 
    CASE WHEN ([Join1].[FieldID] IS NULL) THEN CAST(NULL AS int) WHEN ([Join1].[FieldParamID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
    CASE WHEN ([Join1].[FieldID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]
    FROM  [dbo].[PageForm] AS [Extent1]
    LEFT OUTER JOIN (
        SELECT 
        [Extent2].[FieldID] AS [FieldID], 
        [Extent2].[FieldName] AS [FieldName], 
        [Extent2].[FormID] AS [FormID], 
        [Extent3].[FieldParamID] AS [FieldParamID], 
        [Extent3].[Value] AS [Value], 
        [Extent3].[FieldID] AS [FieldID1]
        FROM  [dbo].[FormField] AS [Extent2]
        LEFT OUTER JOIN [dbo].[FormFieldParameter] AS [Extent3] ON [Extent2].[FieldID] = [Extent3].[FieldID] 
    ) AS [Join1] ON [Extent1].[FormID] = [Join1].[FormID]
    WHERE 1 = [Extent1].[FormID]
) AS [Project1]
ORDER BY [Project1].[FormID] ASC, [Project1].[C2] ASC, [Project1].[FieldID] ASC, [Project1].[C1] ASC 
```

现在我对查询的这一部分感兴趣：

```
LEFT OUTER JOIN (
    SELECT 
    /**/
    FROM  [dbo].[FormField] AS [Extent2]
    LEFT OUTER JOIN [dbo].[FormFieldParameter] AS [Extent3] ON [Extent2].[FieldID] = [Extent3].[FieldID] 
) AS [Join1] ON [Extent1].[FormID] = [Join1].[FormID] 
```

这似乎查询了整个 FormField 和 FormFieldParameter 表，没有应用过滤。所以，我认为正在发生的是，使用`.Include("FormField.FormFieldParameter")`类似于说 - “并在结果查询中从这些表中返回所有数据”。我真正想要的是“只返回这些表中与过滤后的 PageForm 表相关的数据”。

有没有办法做到这一点？抱歉，如果这个问题听起来太简单，或者与我之前的问题相似，但我真的很难理解 Entity Framework 的内部结构。

编辑1：

如果我将上述示例更改为包含 where 子句的以下示例，则查询速度要快几个数量级（大约快 10 倍）。

```
LEFT OUTER JOIN (
    SELECT 
    /**/
    FROM  [dbo].[FormField] AS [Extent2]
    LEFT OUTER JOIN [dbo].[FormFieldParameter] AS [Extent3] ON [Extent2].[FieldID] = [Extent3].[FieldID] 
    WHERE 1 = [Extent2].[FormID]
) AS [Join1] ON [Extent1].[FormID] = [Join1].[FormID] 
```

编辑2：

更多信息。我发现如果我在初始查询中添加一些时髦的过滤，我可以强制运行更有效的查询。

```
IQueryable<PageForm> myFilteredObjectSet = myObjectSet
                                          .Where(c => c.FormID == 1)
                                          .Where(a => a.FormFields
                                                       .Where(c => c.FormFieldParameters
                                                                    .Any(d => d.FieldID == c.FieldID))
                                                       .Any(b => b.FormID == 1)
                                           ); 
```

这会导致查询正确过滤，并且运行得更快。但是，我确信这不是解决此问题的最佳方法，因为当您拥有多个 Include 时，嵌套的 Where/Any 语句很快就会变成一场噩梦。一定会有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:47:10.700

应用过滤 - 您的查询包含`WHERE 1 = [Extent1].[FormID]`. 它实际上只加载您请求的日期。数据库中的查询引擎将正确评估您的查询，并将使用一些优化技术来有效地过滤记录。

# bash - 用于不带扩展名的 shell 脚本的 ctags

> ID：11740202
> 
> 赞同：7
> 
> 时间：2012-07-31T12:36:34.507
> 
> 标签：bash, vim, file-extension, ctags

我正在开发一个 Bash 脚本，该脚本旨在“作为工具”运行，因此其名称不带扩展名，`#!/usr/bin/bash`顶部有一行。

我的脚本有许多功能，所以如果我可以使用 Vim 的标记支持来跳转代码，那就太好了，但我无法使用 ctags 来标记文件。`ctags mytool`生成一个空白的标签文件，除了顶部的注释部分。

如果我将文件重命名为 mytool.sh，则`ctags mytool.sh`可以完美运行。

有没有办法强制 ctags 标记没有扩展名的文件？我尝试了许多在[ctags 手册](http://ctags.sourceforge.net/ctags.html#OPTIONS)中找到的选项，这些选项似乎与文件扩展名有关，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:48:18.467

如果您使用“ [Exuberant Ctags](http://ctags.sourceforge.net/) ”，您可以使用以下`--language-force`选项：

```
ctags --language-force=sh mytool 
```

这在手册页中明确记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-19T06:27:38.953

我使用以下命令在整个 shell 源目录树中的所有文件上创建标签文件

```
ctags -R --language-force=sh 
```

# c# - 如何从自定义类中访问另一个类/控件的属性？

> ID：11740211
> 
> 赞同：1
> 
> 时间：2012-07-31T12:36:59.713
> 
> 标签：c#, windows-phone-7, class, xaml, toolkit

我正在尝试复制 Windows Phone 的消息传递系统，但使用另一项服务。我正在使用[Coding4Fun Toolkit for Windows Phone](http://coding4fun.codeplex.com/)中的 Chat Bubble 控件来执行此操作。

（聊天气泡控件的屏幕截图）：

![在此处输入图像描述](../Images/36457644bb7859948f373d221d989395.png)

我在下面提出的代码工作正常，但是我的数据模板中的 ChatBubbleDirection 属性在数据绑定时会产生错误。这是因为我不知道如何使用另一个类的属性（如果这有意义？）。这将如何完成？我就是想不通...

XAML 属性应如下所示：

```
ChatBubbleDirection="LowerLeft" 
```

您可以猜到，这将确定 ChatBubble 小箭头的方向。

这是消息类的代码：

```
using Coding4Fun.Phone.Controls.Toolkit.Common;

public class Message : Coding4Fun.Phone.Controls.ChatBubble
{
    public string Text { get; set; }
    public string SendingDate { get; set; }
    //public Coding4Fun.Phone.Controls.ChatBubble { get; set; }
} 
```

这是按钮单击事件的代码：

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        LBmessages.ItemsSource = messages;
        Message m = new Message();
        m.SendingDate = "Today";
        m.Text = "This is a message";
        //m.direction = (Coding4Fun.Phone.Controls.ChatBubble).ChatBubbleDirectionProperty???
        messages.Add(m);
    } 
```

这是 XAML：

```
 <StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer Height="369" Name="scrollviewer1" Width="500">
            <ListBox Name="LBmessages" Height="250">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Width="456">
                            <cc:ChatBubble Width="500" Margin="0,0,0,20"  ChatBubbleDirection="{Binding direction}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"></RowDefinition>
                                    <RowDefinition Height="40"></RowDefinition>
                                </Grid.RowDefinitions>
                                <TextBlock Text="{Binding Text}" TextWrapping="Wrap" Width="430"></TextBlock>
                                <TextBlock Grid.Row="1" HorizontalAlignment="Right" Text="{Binding SendingDate}"></TextBlock>
                            </Grid>
                        </cc:ChatBubble>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
       </ScrollViewer>
    </StackPanel> 
```

有人知道我应该在 Message 类中写什么吗？我真的不知道如何进一步解释我的问题。我尝试在我的 Message 类中扩展 ChatBubble 类（如您所见），但无济于事。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:51:26.690

您的 Message 类扩展了 ChatBubble 类，因此它已经具有父类的 ChatBubbleDirection 属性。你只需要写：

```
Message m = new Message();
m.ChatBubbleDirection = ChatBubbleDirection.LowerRight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:52:21.683

您的消息类需要有一个名为 Direction 的公开属性，您将绑定到 ChatBubble 的 ChatBubbleDirection。

```
private string direction;

public string Direction
{
    get { return direction; }
    set { direction = value; }
} 
```

ChatBubbleDirection 可以是以下之一

*   右上方
*   左上
*   右下
*   左下

我认为这应该可行。

可以在[WindowsPhoneGeek](http://www.windowsphonegeek.com/articles/Getting-Started-with-the-Coding4Fun-Toolkit-ChatBubbleTextBox-Control-for-Windows-Phone)上找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T20:42:38.143

在班上

```
 public ChatBubbleDirection _Direction;

    public ChatBubbleDirection Direction
    {
        get
        {
            return _Direction;
        }
        set
        {
            if (value != _Direction)
            {
                _Direction = value;
                NotifyPropertyChanged("Direction");
            }
        }
    } 
```

在主代码中

```
BBChat.Items.Add(new BMessage()
{
Direction = ChatBubbleDirection.UpperLeft,
} 
```

# python - 在 Ubuntu 12.04 上安装 Python 3.2

> ID：11740218
> 
> 赞同：6
> 
> 时间：2012-07-31T12:37:21.493
> 
> 标签：python, ubuntu-12.04, failed-installation, python-3.2

我正在尝试在我的 ubuntu 机器上安装 python 3.2.3，即 12.04，但我不想打扰当前的 2.7 安装。在互联网上搜索后，我在[这里](http://www.unixmen.com/howto-install-python-3-x-in-ubuntu-debian-fedora-centos/)找到了参考。我按照说明进行操作，但是在尝试运行时

`sudo apt-get install build-essential libncursesw5-dev libreadline5-dev libssl-dev libgdbm-dev libc6-dev libsqlite3-dev tk-dev`

我收到一条错误消息

> E: 软件包“libreadline5-dev”没有安装候选。

我错过了什么？有没有其他方法可以在 ubuntu 上安装 python 3.2？如果我使用`apt-get`，它会干扰当前的安装吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T12:50:38.733

您可以根据需要安装任意数量的 Python 版本。`python`将执行来自 shell的调用`python2.7`（您可以通过执行来检查`ls -l /usr/bin/python`），python 3.2 也可以调用为`python3`.

如果您有更多版本，可以直接使用它们的编号`python2.6`等访问这些版本。出于兼容性原因，我个人安装了 2.5、2.6、2.7 和 3.2 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:38:13.547

libreadline5-dev 显然已被 libreadline6 取代。您应该能够通过安装 libreadline-dev 并让包管理器解决它来获得它：

```
roger@roger-HP-Z800 ~/Downloads $ sudo apt-get install libreadline-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  libreadline6-dev libtinfo-dev
The following NEW packages will be installed:
  libreadline-dev libreadline6-dev libtinfo-dev
0 upgraded, 3 newly installed, 0 to remove and 262 not upgraded.
Need to get 370 kB of archives.
After this operation, 1,241 kB of additional disk space will be used.
Do you want to continue [Y/n]? Y 
```

# php - PHP json_encode 不适用于对象数组

> ID：11740221
> 
> 赞同：4
> 
> 时间：2012-07-31T12:37:27.800
> 
> 标签：php, arrays, serialization, json

我正在开发 php 应用程序，我在其中查询数据库并将生成的结果发送回 html 客户端。

目前我正在使用 php 函数 json_encode 获取我在 JSON 中编码的对象数组。

但是在编码之后，我的结果中得到了空数组。

以下结构是在编码为 JSON 之前

```
 array(2) {
  [0]=>   
      object(ProductComment)#6 (2) {
    ["_productId":"ProductComment":private]=>
    string(1) "1"
    ["_commentArray":"ProductComment":private]=>
    array(2) {
      [0]=>
      array(3) {
        ["comment"]=>
        string(9) "comment 1"
        ["creationDate"]=>
        string(19) "2000-02-02 00:00:00"
        ["userName"]=>
        string(8) "Ashutosh"
      }
      [1]=>
      array(3) {
        ["comment"]=>
        string(13) "comment1 text"
        ["creationDate"]=>
        string(19) "2012-07-31 10:20:27"
        ["userName"]=>
        string(8) "Ashutosh"
      }
    }
  }
  [1]=>
  object(ProductComment)#5 (2) {
    ["_productId":"ProductComment":private]=>
    string(1) "2"
    ["_commentArray":"ProductComment":private]=>
    array(2) {
      [0]=>
      array(3) {
        ["comment"]=>
        string(22) "comment2 product2 text"
        ["creationDate"]=>
        string(19) "2012-07-31 10:48:06"
        ["userName"]=>
        string(8) "Ashutosh"
      }
      [1]=>
      array(3) {
        ["comment"]=>
        string(22) "comment2 product4 text"
        ["creationDate"]=>
        string(19) "2012-07-31 10:48:14"
        ["userName"]=>
        string(8) "Ashutosh"
      }
    }
  }
} 
```

在编码后显示 null 而不是 JSON。我需要序列化它吗？任何建议都将是可观的。感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T12:43:41.703

看起来“ProductComment”的所有属性都是私有的，所以当涉及到 JSON 编码时，你会得到：

```
[{}, {}] 
```

这基本上是一个数组，里面有两个空对象。

您需要做的是告诉 PHP 在序列化（或 json 编码）时可以并且应该保留哪些属性。为此，您想将`__sleep()`魔术方法添加到您的课程中：（[http://uk.php.net/__sleep](http://uk.php.net/__sleep)）

# php - curl请求通过localhost调用时不返回数据

> ID：11740223
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:33.247
> 
> 标签：php, rest, curl

我正在使用 php curl POST 请求从远程服务器调用 API。

问题是当我使用 localhost 发送请求时，它不会返回任何数据。但是当我将它上传到我的服务器然后发送请求时。它工作得很好。你知道为什么会发生吗，我在本地机器上运行 wamp，在网络服务器上运行 LAMP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:52:52.070

我认为你应该打印 phpinfo() 并检查你的 LAMP 上是否真的有 curl

# javascript - 如何从多个嵌套的 iframe 源中获取“src”属性

> ID：11740225
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:33.593
> 
> 标签：javascript, jquery

我想从嵌套的 iframe 中获取一些图像“src”。基本上是 iframe 中的 iframe。在我的本地项目中，我不知何故能够从我的项目中访问 iframe，但在下面的演示中，在定位嵌套 iframe 时出现了问题，可能是因为 jsbin 将我的 iframe 嵌套在了一些 iframe 中。

我的主要问题实际上是获取每个图像“src”属性并将基本 url 重命名为稍后我将声明的内容。

目标：

1.  从嵌套的 iframe('box1') 中获取所有图像“src”（来源：http://jsbin.com/oqeduf）
2.  稍后将基本网址替换为某些内容。
3.  将所有图像位置附加到正文上。

问题演示可以在这里找到：http: [//jsbin.com/arijuy/](http://jsbin.com/arijuy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:48:05.343

这应该让你开始......

```
jQuery("#box2").contents().find("#box1").contents().find("img").each(function() {
    // Do what you want to the image here using jQuery(this)
    jQuery("body").append(this);
}); 
```

# django - 如何在没有值的模板中显示 django 表单字段？

> ID：11740227
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:35.750
> 
> 标签：django, django-forms

我有一个 django 表单，其值已初始化。但我不希望将值显示给用户。我在模板中使用 {{formobject.fieldname}} 但它也显示值。是否有任何选项可以隐藏该字段单看价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:58:41.263

在您的视图中初始化第二个未绑定的表单，

```
blank_form = MyForm() 
```

然后使用此表单在模板中呈现您的空白字段。

```
{{ blank_form.fieldname }} 
```

# c# - 时间：2019-05-10 标签：c#unit-test with signed-assemblies

> ID：11740229
> 
> 赞同：2
> 
> 时间：2012-07-31T12:37:36.660
> 
> 标签：c#, unit-testing

我对创建的单元测试有疑问。我有2个项目。一个是“真正的”项目，另一个是单元测试项目。在我单击实际项目中的方法并选择“创建单元测试”后。然后我在 testproject 中得到了单元测试的代码。

现在，编译后我收到以下错误消息：

> 朋友程序集引用“ASSEMBLYNAME”无效。强名称签名的程序集必须在其 InternalsVisibleTo 声明中指定一个公钥。

然后我在实际项目的 AssemblyInfo.cs 中的 InternalsVisibleTo-Declaration 中添加了一个公钥。但是现在我得到了实际项目中每个类的编译错误，它是内部的和密封的。消息是：

> “CLASSNAME”因其保护级别而无法访问

我能做些什么来解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:28:15.187

输入程序集的名称，然后是逗号和您的 PublicKey。将公钥粘贴到 AssemblyInfo 文件中时，请记住删除公钥中的任何换行符等

```
[assembly: InternalsVisibleTo("AssemblyName, PublicKey=xxx")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:04:05.503

是的，我添加了公钥令牌。它如下所示：

```
[assembly: InternalsVisibleTo("NAMESPACE, PublicKey=00240000048000009 40000000602000000240000525341310004000001000100354f0966de4a992baa1ed0f2 faf643f86fd2c74aee8b9dc6c0321f9d658166658ec154aaed70ab4b92a21a3c1e7e53 200232043c0d0b791496fd0201d21f18433ee9507022f2a72829d1dd32b106f86c68e 620d2a39f02f3a8b82aa23196ef7f7f4880020dd340dd2dfecdd1b3051b1e659c9e18c 8e21cc90bc33de306712b86")] 
```

# php - JQuery 上传不适用于使用重写 url 的页面

> ID：11740230
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:36.763
> 
> 标签：php, jquery, ajax, mod-rewrite

我找到了一个带有进度条的 php jquery 上传脚本，它实际上可以工作。

问题是，如果我使用 apache mod rewrite 将 URL 从[http://www.mysite.com/upload.php](http://www.mysite.com/upload.php)重写为[http://www.mysite.com/uploads/upload.php](http://www.mysite.com/uploads/upload.php)，它不起作用但如果我使用未重写的网址，它会起作用

jquery 不会在重写的 url 上运行有什么原因吗？

它不使用 jquery 表单来 ajax 上传，而只是进行正常的上传。

这是upload.php的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ajax Upload and Resize with jQuery and PHP</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
 <script> 
        $(document).ready(function() { 
        //elements
        var progressbox     = $('#progressbox');
        var progressbar     = $('#progressbar');
        var statustxt       = $('#statustxt');
        var submitbutton    = $("#SubmitButton");
        var myform          = $("#UploadForm");
        var output          = $("#output");
        var completed       = '0%';

                $(myform).ajaxForm({
                    beforeSend: function() { //brfore sending form
                        submitbutton.attr('disabled', ''); // disable upload button
                        statustxt.empty();
                        progressbox.slideDown(); //show progressbar
                        progressbar.width(completed); //initial value 0% of progressbar
                        statustxt.html(completed); //set status text
                        statustxt.css('color','#000'); //initial color of status text
                    },
                    uploadProgress: function(event, position, total, percentComplete) { //on progress
                        progressbar.width(percentComplete + '%') //update progressbar percent complete
                        statustxt.html(percentComplete + '%'); //update status text
                        if(percentComplete>50)
                            {
                                statustxt.css('color','#fff'); //change status text to white after 50%
                            }
                        },
                    complete: function(response) { // on complete
                        output.html(response.responseText); //update element with received data
                        myform.resetForm();  // reset form
                        submitbutton.removeAttr('disabled'); //enable submit button
                        progressbox.slideUp(); // hide progressbar
                    }
            });
        }); 

    </script> 
 <link href="style/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<form action="processupload.php" method="post" enctype="multipart/form-data" id="UploadForm">
<table width="500" border="0">
  <tr>
    <td>File : </td>
    <td><input name="ImageFile" type="file" /></td>
  </tr>

  <tr>
    <td>&nbsp;</td>
    <td><input type="submit"  id="SubmitButton" value="Upload" /></td>
  </tr>
</table>
</form>

<div id="progressbox"><div id="progressbar"></div ><div id="statustxt">0%</div ></div>
<div id="output"></div>

</body>
</html> 
```

编辑：

htaccess 附加（精简版）

```
Options +FollowSymLinks
Options +Indexes
RewriteEngine on
RewriteBase /

RewriteRule ^admin$ admin/ [R,L]

# Admin rewrite rules
RewriteRule ^/?admin/$ admin/index.php [NC,L]
RewriteRule ^/?admin/news$ /admin/news.php [NC,L]
RewriteRule ^/?admin/uploads/upload$ /admin/upload.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:09:54.290

我的猜测是罪魁祸首是缺少目标页面（`<form>`动作指向的页面。

`uploads/processupload.php`它可能在（使用重写时）和不时寻找它`processupload.php`。

您可能忘记为 重写，但在您发布文件`processupload.php`之前我无法确定。`.htaccess`

# php - 如何连接PHP变量名？

> ID：11740231
> 
> 赞同：23
> 
> 时间：2012-07-31T12:37:41.650
> 
> 标签：php, variables, append, concatenation

我有一个 PHP for 循环：

```
for ($counter=0,$counter<=67,$counter++){

echo $counter;
$check="some value";

} 
```

我想要实现的是使用 for 循环变量并将其附加到另一个变量的名称。

基本上，我希望每行的 PHP 输出如下

```
1
$check1="some value"

2
$check2="some value"

3
$check3="some value"

4
$check4="some value"

etc etc 
```

我试过`$check.$counter="some value"`了，但这失败了。

我怎样才能做到这一点？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-31T12:39:50.363

[变量变量](http://php.net/manual/en/language.variables.variable.php)的正确语法是：

```
${"check" . $counter} = "some value"; 
```

但是，我**强烈反对**这种做法。您尝试完成的工作很可能可以通过使用[arrays](http://php.net/manual/en/language.types.array.php)更优雅地解决。示例用法：

```
// Setting values
$check = array();
for ($counter = 0; $counter <= 67; $counter++){
    echo $counter;
    $check[] = "some value";
}

// Iterating through the values
foreach($check as $value) {
    echo $value;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-09T18:39:16.977

这在某些情况下是可用的。例如，如果您的应用在 DB 中有 2 个语言条目。

```
echo $this->{'article_title_'.$language}; 
```

这比例如这个更有用；

```
if($language == 'mylanguage1')
    echo $this->article_title_mylanguage1;
else
    echo $this->article_title_mylanguage2; 
```

显然，这是您在多语言应用程序中不应该做的事情，但我见过这样的案例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T12:43:53.140

您应该使用 ${'varname'} 语法：

```
for ($counter=0,$counter<=67,$counter++){
    echo $counter;
    ${'check' . $counter} ="some value";
} 
```

这会起作用，但为什么不只使用数组呢？

```
$check[$counter] = "some value"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:42:28.117

一个数组可以完成这个。

```
$check = array();

for($counter = 0; $counter <= 67; $counter++) {
    $check[] = "some value";
    var_dump($check[$counter]);
} 
```

# javascript - 使用 API V3 设计/主题化 Google 地图

> ID：11740233
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:47.190
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2

我正在尝试为我的网站设置 Google 地图的样式，如下所示：[http](http://www.sidewalkprophets.com/shows) ://www.sidewalkprophets.com/shows 他们只显示美国，不幸的是该网站使用 API V2。

使用 Google Maps API V3 也可以吗？有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:41:47.863

我有一个简单的表格给你，不需要太多的脚本等。

您可以使用 gmap3.net 工具，它可以简单地编辑您的地图。

检查此链接：

[Gmap3 编辑器工具](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

[教程](http://gmap3.net/api/set-styled-map.html)

要锁定您可以使用的位置，`map.Options{ draggable: false};`以便用户无法拖动地图，您可以设置所需的纬度和经度以及缩放级别。这是一个简单的例子：

```
var mapDiv = document.getElementById('mappy');

var mapOptions = {
zoom: 12, //select the zoom that you want
draggable: false, //this will lock the draggable option
center: new google.maps.LatLng(-23.563594, -46.654239), //change here the latitude and longitude 
mapTypeId : google.maps.MapTypeId.ROADMAP
}
pode ser ROADMAP, SATELLITE, HYBRID, TERRAIN
map = new google.maps.Map( mapDiv, mapOptions ); //this will include the variables in one to create the map with the options 
```

祝你好运=)！

# iphone - http GET 限制 (iPhone)

> ID：11740234
> 
> 赞同：0
> 
> 时间：2012-07-31T12:37:47.777
> 
> 标签：iphone, objective-c, ios, http, get

我知道 http GET 可能会受到浏览器的限制，但是如果您使用的是 iPhone 怎么办？如果我做这样的事情有什么限制？

```
 NSString *urlString = [NSString stringWithFormat:@"http://www.hdsjskdjas.com/urlPop.php?vID=%@&pop=%d&tId=%@",videoId,pushPull,[objectSaver openWithKey:@"userId"]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
NSURLConnection *connect = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if(connect) {
  //success;
} else {
    //failure;
} 
```

使用这种方法向我的服务器发送信息 url 中的字符数限制是多少？

我希望能够向我的服务器发送超过**24,000 个字符...**

如果这是无法实现的，另一种选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:45:35.243

要发送大量数据，您应该使用 POST 而不是 GET。以下是如何使用它的示例：

```
NSArray *keys = [NSArray arrayWithObjects:@"Content-Type", @"Accept", @"Authorization", nil]; 
NSArray *objects = [NSArray arrayWithObjects:@"application/json", @"application/json", mytoken, nil];
NSDictionary *headerFieldsDict = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSData *bodyData = [body dataUsingEncoding: NSUTF8StringEncoding];

NSMutableURLRequest *theRequest = [[[NSMutableURLRequest alloc] init] autorelease];
[theRequest setURL:[NSURL URLWithString:url]];
[theRequest setHTTPMethod:@"POST"];
[theRequest setTimeoutInterval:timeout];
[theRequest setAllHTTPHeaderFields:headerFieldsDict];
[theRequest setHTTPBody:bodyData]; 

NSLog(@"userSendURL URL: %@ \n",url);

self.conn = [[[NSURLConnection alloc] initWithRequest:theRequest delegate:self] autorelease]; 
```

在这种情况下，body 是一个简单的 NSString 对象，但它可以是您可以插入到 NSData 对象中的任何内容

# asp.net - ASP.NET Membership 作为用户登录

> ID：11740236
> 
> 赞同：3
> 
> 时间：2012-07-31T12:37:56.120
> 
> 标签：asp.net, .net, login, asp.net-membership, admin

我有一个具有不同角色（客户和管理员）的 ASP.NET 会员站点。

当我以管理员身份登录时，是否可以以客户身份登录？如何？

我无法访问密码，所以我不知道它是否可能或如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:41:42.043

内置的 ASP.NET Membership Provider 没有这样的功能，我称之为“模拟”。

要实现它，您需要继承[SqlMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)并对其进行扩展。

也可以看看：

*   [使用 ASP.NET 成员资格提供程序进行模拟](https://stackoverflow.com/questions/1833810/asp-net-membership-provider-impersonation)
*   [在 ASP.NET 中模拟成员资格用户](https://stackoverflow.com/questions/7836837/impersonate-a-membership-user-in-asp-net)
*   [https://www.google.com/search?q=impersonation+asp.net+memebship](https://www.google.com/search?q=impersonation+asp.net+memebship)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:42:43.047

如果我们谈论角色*admin*和*customer*，您可以将这两个角色分配给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:53:23.320

如果我对您的理解正确，那么这可能是一个选项[表单身份验证用户模拟](http://www.codeproject.com/Articles/43724/ASP-NET-Forms-authentication-user-impersonation)- 我已经在生产站点中实现了它并且工作得很好。

# java - Mac Safari 不会运行大小为零的小程序

> ID：11740238
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:00.013
> 
> 标签：java, css, macos, safari, applet

在一个`<applet>`标签中，`width=0`并且`height=0`小程序代码无法加载。我试图将小程序放在一个隐藏的 div 中，但它再次不会加载小程序。现在我有一个解决方法，它可以通过设置`width=1`和`height=1`.

有什么办法可以隐藏小程序并让它继续工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:49:02.580

> 有什么办法可以隐藏小程序并让它继续工作？

是的，它通常出现在样式中。我希望您当前使用错误的 CSS 来隐藏它。

## 不正确

**[显示：无](http://www.w3.org/TR/CSS21/visuren.html#propdef-display)**

> 该值导致元素不出现在格式化结构中（即，在视觉媒体中，元素不生成框并且对布局没有影响）。后代元素也不生成任何框；**元素及其内容完全从格式化结构中删除**。..

## 正确的

**[可见性：隐藏](http://www.w3.org/TR/CSS21/visufx.html#visibility)**

> 生成的框是**不可见的（完全透明，没有绘制任何内容），但仍然影响布局。**此外，如果元素的后代具有“可见性：可见”，则它们将是可见的。

# c# - HTTPS解码、SSL解密

> ID：11740241
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:08.083
> 
> 标签：c#, ssl, https

我有一个场景，其中 TcpListner 充当客户端和服务器之间的代理。代理需要记录所有互联网流量。SSL 加密所有的 html 内容。

我可以从流中获取密钥来解密 SSL 内容吗？如果没有，我可以充当 SSL 服务器。但切入点在哪里？当服务器告诉客户端使用 ssl 时？通过将来自服务器的流编码为 ASCII，我什至看不到 html 文本只是标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:52:44.200

SSL 旨在防止中间人攻击，因此您将无法提取密钥来解密流量。如果您的应用程序充当代理，那么您可能收到的唯一明文将是初始`CONNECT`请求。

一种选择是像许多商业防火墙一样允许 SSL 检查，即模拟与客户端连接的远程端，为每个防火墙建立单独的 SSL 流。为此，您需要做很多事情，并且***只有***在您能够在所有将使用您的代理的客户端上安装您自己的受信任的根证书（例如，使用 Windows 组策略）时，它才会起作用。如果你不能做到这一点，你还不如放弃，因为这会让你试图做的事情变得不可能。

1.  从请求中确定客户端连接的服务器的名称`CONNECT`。
2.  生成一个证书，其中 CN 设置为步骤 1 中建立的服务器名称，由客户端信任的根证书签名。
3.  建立到目标主机的网络连接，并使用 .NET`SslStream`包装连接并调用`AuthenticateAsClient(...)`.
4.  再次使用`SslStream`，包装客户端的传入网络流，并`AuthenticateAsServer()`使用步骤 2 中生成的证书进行调用。
5.  在两个连接之间转发数据，根据需要记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:52:31.653

从您的问题来看，您似乎有一个客户端、一个中间代理和一个服务器。客户端和服务器使用 SSL 进行通信，并且您希望代理解密客户端和服务器之间的 SSL 加密消息。

那么第一个问题，服务器是你的吗？如果不是，那么这正是 SSL 应该防止的。下次您使用信用卡在 Internet 上购买商品时，请考虑一下您的 ISP 会做什么，如果您的要求是可能的——他们可以在您和网上商店之间设置代理并解密您的信用卡号，然后您我永远不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:46:26.163

如果您有私钥，您*只能解密 SSL 数据包。*如果您想检查或记录 Internet 流量，请查看[wireshark ，或者使用](https://www.wireshark.org)[fiddler](http://www.fiddler2.com/fiddler2/version.asp)了解 HTTPS 解密的实用方法。

# c# - SSH，连接和执行mysql查询

> ID：11740242
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:14.853
> 
> 标签：c#, mysql, unix, ssh

我正在使用mysql客户端

```
using MySql.Data.MySqlClient; 
```

我如何在 SSH 隧道上运行连接？

* * *

我创建 ssh 连接使用`SharpSsh`

```
SshExec exec = new SshExec("host", "user");
exec.Password = "pass";

Console.Write("Connect...");
exec.Connect(22);
Console.WriteLine("OK");
string output = exec.RunCommand("mysql -p pass -u user db -h host;");
if (output == "")
   Console.WriteLine("error");
Console.WriteLine(output); 
```

但是为什么我写了很多代码可以，通过客户端可以立即建立ssh连接，对吧？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:43:40.497

您应该只使用端口转发，而不是通过 SSH 打开 shell。按照SharpSSH 主页上的[端口转发示例进行操作。](http://www.tamirgal.com/home/SourceView.aspx?Item=SharpSSH&File=PortForwardingL.cs)根本不需要`mysql`在远程服务器上运行命令。

示例中的魔术线是这样的：

```
session.setPortForwardingL(lport, rhost, rport); 
```

它将创建一个从`lport`本地机器上的端口到端口`rport`的隧道`rhost`。隧道启动后，只需使用*localhost*和*lport*`MySqlClient`连接字符串即可。即使您连接到本地机器，连接也会通过隧道转发到远程端。

# javascript - jquery获取div的内容

> ID：11740243
> 
> 赞同：0
> 
> 时间：2012-07-31T12:38:16.993
> 
> 标签：javascript, jquery, html

`<div>`单击链接时如何获取a的内容

例如：

有两个`div`标签

```
<div id="1" > This Is First Div </div>
<div id="2" > This Is Second Div </div>
<a href="#" id="click" >Click Here</a> 
```

单击链接时，我需要将内容获取为：

> 这是拳头分区
> 这是第二分区

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:39:59.313

如果我很好理解

```
$('a').on('click', function(ev) {
   ev.preventDefault();
   $($(this).prevAll('div').get().reverse()).each(function() {
     alert ($(this).text())
   })
}); 
```

作为旁注，`id`您选择的属性无效（它们不能以数字开头）

小提琴示例：http: [//jsfiddle.net/533qX/](http://jsfiddle.net/533qX/)

编辑。一个警报

```
$('a').on('click', function(ev) {
   var text = "";
   ev.preventDefault();
   $($(this).prevAll('div').get().reverse()).each(function() {
     text += $(this).text() + "\n";
   })
   alert(text);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:51:15.987

```
function alertDiv(divId){
    $('#click').on('click', function(e){
       alert ($(divId).text());
       e.preventDefault();
    });
}

alertDiv('#one');
alertDiv('#two'); 
```

[http://jsbin.com/ebowim/2/edit](http://jsbin.com/ebowim/2/edit)

# clearcase - 如何从“签出但已删除”状态恢复文件？

> ID：11740244
> 
> 赞同：8
> 
> 时间：2012-07-31T12:38:16.880
> 
> 标签：clearcase

我试图签出一个文件，它进入“签出但已删除”状态。

我无法撤消它，也不知道接下来需要做什么。

当我为此上网时，我发现了一篇文章[IBM 站点 Checkout But removed state](http://www-01.ibm.com/support/docview.wss?uid=swg21232033)

但是我没有尝试重命名文章中提到的文件名，但仍然出现错误。

我正在使用 Clearcase 7.0.1.0 版本。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T13:22:40.047

您应该通过 GUI 撤消结帐：

*   查找结帐
*   选择签出的文件并右键单击：撤消签出

即使该文件在磁盘上不可见，“查找签出”GUI 也会将其列为已签出。

![查找结帐](../Images/e364330862366e8e2cfb2b38505b5e3b.png)

* * *

另一种解决方案是从另一个视图复制文件，例如具有相同配置规范的动态视图（易于创建，并提供对同一文件的快速访问）。

如果您将其复制到快照视图中，该文件将被列为“已签出”（但尚未修改），您可以继续处理它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T16:17:17.723

解决此问题的最简单方法是创建一个具有相同名称的新文件。然后文件不再丢失，您可以撤消签出，然后再次签出以重新开始。在命令行上：

```
$ cleartool ls your_file.c
your_file.c: Checkout but removed
your_file.c@@
$ touch your_file.c
$ cleartool ls your_file.c
your_file.c@@/main/branch1/branch2/14   Rule: ...whatever...
$ cleartool unco -nc your_file.c
$ cleartool co -nc your_file.c
Checked out your_file.c
$ 
```

我无法再访问 clearcase，所以以上只是（旧）记忆，但你明白了。如果您不使用命令行，只需将任何文件复制到 your_file.c，撤消签出然后签出。

# javascript - 更改 jqGrid 中的导航栏图标

> ID：11740246
> 
> 赞同：2
> 
> 时间：2012-07-31T12:38:18.980
> 
> 标签：javascript, jquery, jqgrid, navigation, pager

我想更改[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)中添加、更新和删除按钮的导航按钮图标的顺序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:44:27.317

您可以通过使用[jQuery.insertBefore](http://api.jquery.com/insertBefore/)、[jQuery.before](http://api.jquery.com/before/)、[jQuery.insertAfter](http://api.jquery.com/insertAfter/)或[jQuery.after](http://api.jquery.com/after/)等函数重新排列导航按钮。了解用于标准按钮的单元格的 ID 很重要。id 将从前缀“add_”、“del_”、“search_”、“refresh_”、“edit_”和网格的 id 构建。例如，如果您有 id="list" 的网格，则删除按钮的单元格具有`id="del_list"`.

[该演示](http://www.ok-soft-gmbh.com/jqGrid/ReorderButtons.htm)使用以下代码

```
$("#del_list").insertBefore("#add_list");
$("#search_list").insertBefore("#del_list");
$("#refresh_list").insertBefore("#search_list"); 
```

将导航器按钮重新排序为以下内容：

![在此处输入图像描述](../Images/1badb97664a5c73ed70b8cf6bae3c8e8.png)

# android - 当应用程序进程被杀死时，AndroidManifest 中注册的 BroadcastReceiver 可以接收意图吗？

> ID：11740247
> 
> 赞同：3
> 
> 时间：2012-07-31T12:38:18.757
> 
> 标签：android, broadcastreceiver

我有一个注册的接收器`AndroidManifest`，但是当应用程序被杀死时它似乎无法接收意图，假设我对 Android 进程生命周期有一些误解？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:10:54.133

如果用户进入设置并强制停止您的应用程序，在 Android 3.1 及更高版本上，您`BroadcastReceivers`将不再工作。当您的应用程序首次安装时，您将返回到相同的状态——必须手动运行组件（例如，用户从主屏幕启动一个活动），然后您`BroadcastReceivers`才能再次工作。

# iphone - 是否可以在服务器的 nsstring 中包含引号？

> ID：11740249
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:22.207
> 
> 标签：iphone, sql, sqlite, nsstring

我有一个显示英寸的标签。我想用英制符号 (") 或引号显示数字。我可以用 nsstring 执行此操作吗？谢谢！

我知道这行得通

NSString *someString = @"这是一个引号：\""; NSLog(@"%@", someString );

但我从这样的服务器获取数据 -
视频（焦虑）：[http ://www.youtube.com/watch?v=Ii2FHbtVJzc&sns=em](http://www.youtube.com/watch?v=Ii2FHbtVJzc&sns=em)

所以当我尝试将这些数据保存在 sql lite 中时，更新失败是因为服务器响应中的“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:51:15.747

您当然可以在字符串中包含引号。只要您正确使用此类字符串，就应该没有问题。当您将带引号的字符串传递给对其有特殊解释的方法时，您会遇到问题，例如将字符串转发到 SQL 解析器的方法。在这些情况下，需要隐藏引号，例如通过使用参数化 SQL 语句。

但是，看起来您在字符串中包含引号并不是出于好的目的：以英寸为单位显示测量值是一个显示问题，绝对不需要在服务器响应或写入的数据中包含引号到数据库。相反，您应该以其本机形式（整数或浮点数）传递度量，并在即将向用户显示字符串的最后时刻添加引号。

例如，您可以这样做：

```
int measurement = 42;
NSString *measurementDisplay = [NSString stringWithFormat:@"%d\"", measurement]; 
```

# javascript - JavaScript 属性与标签？

> ID：11740250
> 
> 赞同：0
> 
> 时间：2012-07-31T12:38:29.590
> 
> 标签：javascript

如果我用 Javascript 编写：

```
var o= { aaa :s }; 
```

他怎么知道区分

1) 标签命名`aaa`

![在此处输入图像描述](../Images/8fe5a3efc4e0f06a40f232b14465ba24.png)

2）属性命名`aaa`（恕我直言，属性*可以*不使用`"`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:41:13.383

简单地说：

*   一个属性（像那样）只能出现在对象文字中。
*   标签不能出现在对象文字内。

…并且JavaScript解析器知道它在代码中的任何给定点解析什么。

当您（例如）将函数作为属性的值时，它会变得有点复杂，但它基本上归结为解析模式。那时，被解析的堆栈将在顶部有一个函数，在它下面有一个对象字面量。在函数完成之前，对象文字解析不会再次变为“活动”。

[HTML 5 规范](http://www.w3.org/TR/html5/parsing.html#parsing)中提供了如何解析 HTML 的详细示例。JavaScript 的原理基本相同。

# android - 对齐控件

> ID：11740252
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:36.087
> 
> 标签：android, android-layout, css-position, android-relativelayout

我只是在浪费时间，因为我不知道如何正确地做到这一点。基本上，我想要一个自定义输入视图，用户可以在其中用他/她的手指绘制他想要的任何东西，并且在它下面，我想放置 2 个（或更多）按钮，我不想在上面重叠自定义视图的顶部。因为我试图避免硬编码宽度和高度，有没有办法指定按钮应该包装到它们的内容并且自定义视图应该占据剩余的高度？由于我希望所有按钮都具有相同的高度，我想以其中一个按钮的高度作为参考应该以某种方式工作......

这是我目前的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.example.myapp.DrawView
        android:id="@+id/drawView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <Button
        android:id="@+id/buttonSave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="@string/save" />

    <Button
        android:id="@+id/buttonQuery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/query" />

</RelativeLayout> 
```

实际上是否有可能轻松实现我想要的，而不必以讨厌的方式破解它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:42:12.837

将自定义视图放在`Buttons`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

   <Button
        android:id="@+id/buttonSave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="@string/save" />

    <Button
        android:id="@+id/buttonQuery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/query" />

    <com.example.myapp.DrawView
        android:id="@+id/drawView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" 
        android:layout_above="@id/buttonSave" />

</RelativeLayout> 
```

如果您不确定`Buttons`相等的高度，则必须将它们包装在另一个布局中（例如`LinearLayout`），然后将自定义放置在`View`该包装器上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:46:38.797

在一些布局上放置按钮：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<com.example.myapp.DrawView
    android:id="@+id/drawView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" />

    <RelativeLayout android:id="@+id/button_layout"
              ........  
              android:layout_alignParentBottom="true"
    >
              ....
              your buttons
              .....
    </RelativeLayout>  
</RelativeLayout> 
```

# sql - 重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出

> ID：11740256
> 
> 赞同：38
> 
> 时间：2012-07-31T12:38:51.403
> 
> 标签：sql, database, postgresql, plpgsql, dynamic-sql

我编写了一个函数，它`SELECT`以文本形式输出格式良好的 PostgreSQL 查询。现在我不想再输出文本了，但实际上`SELECT`对数据库运行生成的语句并返回结果 - 就像查询本身一样。

### 到目前为止我所拥有的：

```
CREATE OR REPLACE FUNCTION data_of(integer)
  RETURNS text AS
$BODY$
DECLARE
   sensors varchar(100);   -- holds list of column names
   type    varchar(100);   -- holds name of table
   result  text;           -- holds SQL query
       -- declare more variables

BEGIN
      -- do some crazy stuff

      result := 'SELECT\r\nDatahora,' || sensors ||
      '\r\n\r\nFROM\r\n' || type ||
      '\r\n\r\nWHERE\r\id=' || $1 ||'\r\n\r\nORDER BY Datahora;';

      RETURN result;
END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE;
ALTER FUNCTION data_of(integer) OWNER TO postgres; 
```

`sensors`保存表的列名列表`type`。这些是在函数的过程中声明和填充的。最终，他们持有如下价值观：

*   `sensors`:`'column1, column2, column3'`
    除了`Datahora`( `timestamp`) 所有列都是类型`double precision`。

*   `type`:`'myTable'`
    可以是四个表之一的名称。每个都有不同的列，除了 common column `Datahora`。

[**基础表的定义**。](http://pastebin.com/A2tZ9K3Q)

该变量`sensors`将保存此处显示的*所有*列，用于 中的相应表`type`。例如：如果`type`是`pcdmet`那么`sensors`将是`'datahora,dirvento,precipitacao,pressaoatm,radsolacum,tempar,umidrel,velvento'`

这些变量用于构建`SELECT`存储在`result`. 像：

```
SELECT Datahora, column1, column2, column3
FROM   myTable
WHERE  id=20
ORDER  BY Datahora; 
```

现在，我的函数将此语句返回为`text`. 我复制粘贴并在 pgAdmin 中或通过 psql 执行它。我想自动化这个，自动运行查询并返回结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-01T01:51:13.627

## 动态 SQL 和`RETURN`类型

^(（我把最好的留到最后，继续阅读！）)
你想执行**动态 SQL**。原则上，在 plpgsql 的帮助下，这很简单[**`EXECUTE`**](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。你*不需要*光标。事实上，大多数情况下，没有显式游标会更好。

您遇到的问题：您想要**返回尚未定义类型的记录**。函数需要在[**`RETURNS`**](https://www.postgresql.org/docs/current/sql-createfunction.html)子句中声明其返回类型（或使用`OUT`或`INOUT`参数）。在您的情况下，您将不得不回退到匿名记录，因为*number*，*names*和返回列的*类型各不相同。*像：

```
CREATE FUNCTION data_of(integer)
  RETURNS SETOF record AS ... 
```

然而，这并不是特别有用。您必须在每次调用时提供列定义列表。像：

```
SELECT * FROM data_of(17)
AS foo (colum_name1 integer
      , colum_name2 text
      , colum_name3 real); 
```

但是，当您事先不知道列时，您将如何做到这一点？
您可以使用结构较少的文档数据类型，如`json`,或. 看：`jsonb``hstore``xml`

*   [如何在数据库中存储数据表？](https://stackoverflow.com/questions/27065244/how-to-store-a-data-table-or-listkeyvaluepairint-object-or-dictionary-in/27066058#27066058)

但是，出于这个问题的目的，我们假设您希望尽可能多地返回单独的、正确键入和命名的列。

## 具有固定返回类型的简单解决方案

该列`datahora`似乎是给定的，我将假设数据类型`timestamp`，并且总是有另外两列具有不同的名称和数据类型。

*我们将在返回类型中放弃名称以支持通用名称*。*
*我们也将放弃类型*，并将所有类型转换为，`text`因为*每种*数据类型都可以转换为`text`.*

 *```
CREATE OR REPLACE FUNCTION data_of(_id integer)
  RETURNS TABLE (datahora timestamp, col2 text, col3 text)
  LANGUAGE plpgsql AS
$func$
DECLARE
   _sensors text := 'col1::text, col2::text';  -- cast each col to text
   _type    text := 'foo';
BEGIN
   RETURN QUERY EXECUTE '
      SELECT datahora, ' || _sensors || '
      FROM   ' || quote_ident(_type) || '
      WHERE  id = $1
      ORDER  BY datahora'
   USING  _id;
END
$func$; 
```

变量`_sensors`和`_type`可以是输入参数。

注意[`RETURNS TABLE`](https://www.postgresql.org/docs/current/sql-createfunction.html)子句。

注意使用[`RETURN QUERY EXECUTE`](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#AEN54103). 这是从动态查询返回行的更优雅的方法之一。

我使用函数参数的名称，只是为了使`USING`子句`RETURN QUERY EXECUTE`不那么混乱。`$1`SQL 字符串中的不是指函数参数，而是指与`USING`子句一起传递的值。（在这个简单的例子中，两者恰好都`$1`在各自的范围内。）

请注意以下示例值`_sensors`：每列都被强制转换为 type `text`。

这种代码很容易受到[**SQL 注入**](https://en.wikipedia.org/wiki/Sql_injection)的影响。我[`quote_ident()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)用来防止它。将变量中的几个列名集中在一起会`_sensors`阻止使用`quote_ident()`（通常是一个坏主意！）。确保没有坏东西可以通过其他方式出现，例如通过单独运行列名`quote_ident()`。`VARIADIC`想到一个参数...

### 自 PostgreSQL 9.1 起更简单

使用 9.1 或更高版本，您可以[`format()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)进一步简化：

```
RETURN QUERY EXECUTE format('
   SELECT datahora, %s  -- identifier passed as unescaped string
   FROM   %I            -- assuming the name is provided by user
   WHERE  id = $1
   ORDER  BY datahora'
  ,_sensors, _type)
USING  _id; 
```

同样，单个列名可以正确转义，这将是一种干净的方式。

## 共享相同类型的可变列数

在您的问题更新后，您的返回类型看起来像

*   可变*数量*的列
*   *但相同类型* 的所有列`double precision`（别名`float8`）

在这种情况下使用`ARRAY`类型来嵌套可变数量的值。此外，我返回一个包含列名的数组：

```
CREATE OR REPLACE FUNCTION data_of(_id integer)
  RETURNS TABLE (datahora timestamp, names text[], values float8[])
  LANGUAGE plpgsql AS
$func$
DECLARE
   _sensors text := 'col1, col2, col3';  -- plain list of column names
   _type    text := 'foo';
BEGIN
   RETURN QUERY EXECUTE format('
      SELECT datahora
           , string_to_array($1)  -- AS names
           , ARRAY[%s]            -- AS values
      FROM   %s
      WHERE  id = $2
      ORDER  BY datahora'
    , _sensors, _type)
   USING  _sensors, _id;
END
$func$; 
```

# 各种完整的表类型

要实际返回**table 的所有列，有一个使用**[**多态类型**](https://www.postgresql.org/docs/current/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC)的简单而强大的解决方案：

```
CREATE OR REPLACE FUNCTION data_of(_tbl_type anyelement, _id int)
  RETURNS SETOF anyelement
  LANGUAGE plpgsql AS
$func$
BEGIN
   RETURN QUERY EXECUTE format('
      SELECT *
      FROM   %s  -- pg_typeof returns regtype, quoted automatically
      WHERE  id = $1
      ORDER  BY datahora'
    , pg_typeof(_tbl_type))
   USING  _id;
END
$func$; 
```

致电（重要！）：

```
SELECT * FROM data_of(NULL::pcdmet, 17); 
```

在调用中替换`pcdmet`为任何其他表名。

### 这是如何运作的？

`anyelement`是伪数据类型，多态类型，任何非数组数据类型的占位符。函数中所有出现的`anyelement`都评估为运行时提供的相同类型。通过提供一个定义类型的值作为函数的参数，我们隐式地定义了返回类型。

PostgreSQL 自动为每个创建的表定义一个行类型（一种复合数据类型），因此每个表都有一个定义良好的类型。这包括临时表，便于临时使用。

任何类型都可以`NULL`。提交一个`NULL`值，强制转换为表格类型：**`NULL::pcdmet`**.

现在该函数返回一个定义明确的行类型，我们可以使用它`SELECT * FROM data_of()`来分解行并获取各个列。

[**`pg_typeof(_tbl_type)`**](https://www.postgresql.org/docs/current/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)返回表的名称作为[对象标识符类型`regtype`](https://www.postgresql.org/docs/current/datatype-oid.html)。当自动转换为 时，如果需要`text`，标识符会**自动被双引号和模式限定**，从而自动防御 SQL 注入。这甚至可以处理`quote_ident()`会失败的模式限定表名。看：

*   [表名作为 PostgreSQL 函数参数](https://stackoverflow.com/questions/10705616/table-name-as-a-postgresql-function-parameter/10711349#10711349)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T12:52:40.607

您可能想要返回一个[cursor](http://www.postgresql.org/docs/8.1/static/plpgsql-cursors.html)。尝试这样的事情（我还没有尝试过）：

```
CREATE OR REPLACE FUNCTION data_of(integer)
  RETURNS refcursor AS
$BODY$
DECLARE
      --Declaring variables
      ref refcursor;
BEGIN
      -- make sure `sensors`, `type`, $1 variable has valid value
      OPEN ref FOR 'SELECT Datahora,' || sensors ||
      ' FROM ' || type ||
      ' WHERE nomepcd=' || $1 ||' ORDER BY Datahora;';
      RETURN ref;
END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE;
ALTER FUNCTION data_of(integer) OWNER TO postgres; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:01:35.640

我很抱歉地说，但你的问题很不清楚。但是，您将在下面找到一个自包含示例，如何创建和使用返回游标变量的函数。希望能帮助到你 ！

```
begin;

create table test (id serial, data1 text, data2 text);

insert into test(data1, data2) values('one', 'un');
insert into test(data1, data2) values('two', 'deux');
insert into test(data1, data2) values('three', 'trois');

create function generate_query(query_name refcursor, columns text[])
returns refcursor 
as $$
begin
  open query_name for execute 
    'select id, ' || array_to_string(columns, ',') || ' from test order by id';
  return query_name;
end;
$$ language plpgsql;

select generate_query('english', array['data1']);
fetch all in english;

select generate_query('french', array['data2']);
fetch all in french;
move absolute 0 from french; -- do it again !
fetch all in french;

select generate_query('all_langs', array['data1','data2']);
fetch all in all_langs;

-- this will raise in runtime as there is no data3 column in the test table
select generate_query('broken', array['data3']);

rollback; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-07T20:34:07.360

```
# copy paste me into bash shell directly
clear; IFS='' read -r -d '' sql_code << 'EOF_SQL_CODE'
CREATE OR REPLACE FUNCTION func_get_all_users_roles()
  -- define the return type of the result set as table
  -- those datatypes must match the ones in the src
  RETURNS TABLE (
                 id           bigint
               , email        varchar(200)
               , password     varchar(200)
               , roles        varchar(100)) AS
$func$
BEGIN
   RETURN QUERY 
   -- start the select clause
   SELECT users.id, users.email, users.password, roles.name as roles
   FROM user_roles
   LEFT JOIN roles ON (roles.guid = user_roles.roles_guid)
   LEFT JOIN users ON (users.guid = user_roles.users_guid)
   -- stop the select clause
;
END
$func$  LANGUAGE plpgsql;
EOF_SQL_CODE
# create the function
psql -d db_name -c "$sql_code"; 

# call the function 
psql -d db_name -c "select * from func_get_all_users_roles() " 
```*

# php - Mysql - 1:n 关系

> ID：11740258
> 
> 赞同：1
> 
> 时间：2012-07-31T12:38:56.037
> 
> 标签：php, mysql

```
A table : id, name
B table : id, a_id, name 
```

1A：NB

我想选择 A 中的记录和 B 中的相关信息，结果如下

```
array( 
    0 => aID_1, 
    aName_1, 
    array (
       bName_1, 
       bName2 , .v.v.v
    ),
  ... 
  ...
) 
```

我可以只做查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:44:07.970

```
$qry = mysql_query ("SELECT a.id, a.name, b.name as b_name FROM A LEFT JOIN B on A.id = B.a_id");
$data = array ();
while ($r = mysql_fetch_rows($qry))
{
    if (!array_key_exists($r["id"], $data)
    {
        $data[$r["id"]] = array (
            "id" => $r["id"],
            "name" => $r["name"],
            "b" => array ()
        );
    }

    $data[$r["id"]]["b"][] = $r["b_name"];
} 
```

现在您可以通过 foreach 进行迭代：

```
foreach ($data as $d)
{
    print_r($d);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:45:02.453

像这样的东西：

```
SELECT * FROM tableA as a LEFT JOIN tableB as b ON a.id = b.a_id; 
```

# java - 优化原生 Android 代码 - 编译器标志

> ID：11740262
> 
> 赞同：0
> 
> 时间：2012-07-31T12:39:06.130
> 
> 标签：java, android, eclipse, optimization, java-native-interface

我正在开发一个使用带有 ndk 的原生 c++ 代码的 Android 应用程序。

这段代码尽可能快速高效地运行是非常重要的。这里有什么提示吗？有没有办法在 Android.mk 文件中设置 -o3 标志？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:48:02.353

是的，只需为 C/C++ 代码添加 LOCAL_CFLAGS := -O2

或 LOCAL_CPPFLAGS 用于 C++ 代码。这些在我们的 Android.mk 文件中。

# ios - iphone上传图片到facebook相册并附上评论

> ID：11740267
> 
> 赞同：0
> 
> 时间：2012-07-31T12:39:23.520
> 
> 标签：ios, facebook, comments

我想将 iphone 的照片库中的照片上传到 Facebook 上的用户相册以及用户添加的评论。所有这些都应该在我的 iphone 应用程序中发生。是否可以使用带有图形 API 的 iOS facebook SDK？我会非常感谢你们的任何相关帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:27:02.810

试试这个[https://stackoverflow.com/a/12486932/665823](https://stackoverflow.com/a/12486932/665823)它应该会给你一张上传的带有标题消息的照片。

**- - - - 编辑 - - -**

如果您尝试使用 SDK3.1 在应用程序相册上发布，请查看我的帖子[https://stackoverflow.com/a/13583440/665823](https://stackoverflow.com/a/13583440/665823) 。

**- - - - 编辑 - - -**

# php - 调试 Varnish 的 hit_for_pass 对象

> ID：11740270
> 
> 赞同：1
> 
> 时间：2012-07-31T12:39:34.187
> 
> 标签：php, caching, varnish

我是 Varnish 的新手，我很难理解为什么这么多请求是 a`miss`或`hit_for_pass`.

我已经添加`unset req.http.Cookie;`到`vcl_recv`（如果我是对的）有效地忽略所有 cookie 并缓存而不考虑 cookie？这是正确的吗？

但尽管如此，我仍然没有`hits`。所以这种 cookie 方法要么是错误的，要么是完全不同的原因导致它不起作用。

关于这个的任何想法，或者有没有办法确切地了解我为什么经常得到`hit_for_pass`或`miss`如此频繁。

谢谢杰克

**编辑**

更多谷歌搜索，我发现了这个

```
sub vcl_fetch {
    unset beresp.http.set-cookie; 
} 
```

所以我想这会从响应对象中删除 cookie，有人可以解释为什么现在可以工作以及我做了什么来让它工作吗？

**编辑2**

再看一遍，`varnishstat`这并没有像我预期的那样工作，而且我仍然有很多失误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:04:15.257

很有可能，如果你有很多`hit_for_pass`决定，缓存本身也很少，因此会失败。

`hit_for_pass`我相信，它只是从方法中抛出的`vcl_fetch`，所以值得看看你的服务器返回了什么。需要考虑的事项包括：

*   `remove beresp.http.Cache-Control;`并`remove beresp.http.Pragma;` 阻止您的后端应用程序阻止缓存。

*   `remove beresp.http.Expires;`以避免现在/过去的到期日期（您可能希望将其更改为远期到期，具体取决于您所服务的内容）。

*   如果您的应用不提供 cookie，那么`remove beresp.http.Set-Cookie;`将对您的 hit_for_pass 率产生很大影响。

*   确保您设置了适当的`beresp.ttl`值。

I'd also recommend that you read [this article about the 'Accept-Encoding' header](https://www.varnish-cache.org/trac/wiki/FAQ/Compression#Ithoughtyousaidthiswascomplicated "this article about the 'Accept-Encoding' header") (the code in the example goes in the `vcl_recv` method).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:54:24.463

For others who may have this issue, this was useful.

[https://www.varnish-cache.org/trac/wiki/VCLExampleHitMissHeader](https://www.varnish-cache.org/trac/wiki/VCLExampleHitMissHeader)

Setting headers to show what is and is not cached and why.

# java - Java Year in date 可以用里面的字母来解析

> ID：11740273
> 
> 赞同：0
> 
> 时间：2012-07-31T12:39:40.927
> 
> 标签：java, spring

我已经编写了扩展 CustomDateEditor 的 NotLenientDateEditor

```
public NotLenientDateEditor(DateFormat dateFormat, boolean allowEmpty, int exactDateLength) {
    super(dateFormat, allowEmpty, exactDateLength);
    dateFormat.setLenient(false); 
```

现在我需要再添加一项功能，因为当我启用 javascript 时，日期 12.1.20asa21 不可解析，但当禁用 javascript 时，此日期可解析为 12.1.20。

你能帮我吗，如何添加不解析年份的功能包含字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:38:10.140

这有效，但它能够文件 12.1.2a （它从这个文件 12.2.02，这是我的问题）。我以这种方式初始化 NotLenientEditor

```
public void initBinder(WebDataBinder binder) {
    SimpleDateFormat format = new SimpleDateFormat("dd.MM.yyyy");
    NotLenientDateEdtor editor = new NotLenientDateEdtor(format, false, 10);
    binder.registerCustomEditor(Date.class, editor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:59:58.887

有了这个实现似乎工作：

```
package net.orique.stackoverflow.question11740273;

import java.text.DateFormat;

import org.springframework.beans.propertyeditors.CustomDateEditor;

public class NotLenientDateEditor extends CustomDateEditor {

    public NotLenientDateEditor(DateFormat dateFormat, boolean allowEmpty,
            int exactDateLength) {
        super(dateFormat, allowEmpty, exactDateLength);
        dateFormat.setLenient(false);
    }

} 
```

类与`main`方法：

```
package net.orique.stackoverflow.question11740273;

import java.text.SimpleDateFormat;

public class Main {

    public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("dd.m.yy");
        NotLenientDateEditor n = new NotLenientDateEditor(sdf, false, 7);

        n.setAsText("12.1.20"); // Ok
        n.setAsText("12.1.20asa21"); // Throws java.lang.IllegalArgumentException
    }

} 
```

笔记：

你如何实例化`NotLenientDateEditor`？您为 DateFormat 设置了哪种格式？请注意构造函数参数的`month`和`7`的单个数字。`exactDateLength`

# c# - Kinect 操纵骨架数据

> ID：11740275
> 
> 赞同：5
> 
> 时间：2012-07-31T12:39:44.773
> 
> 标签：c#, .net, kinect

我有一个`Skeleton skeleton`来自该`SkeletonFrameReady`事件的内容。我有一个在窗户上画骷髅的功能，

```
void DrawSkeleton(Skeleton s), 
```

它将骨架作为输入并将骨架的 2D 图像绘制到我的窗口。

现在，我想更改例如右手的 x 和 y 值，并使用相同的函数将其绘制在窗口上，`void DrawSkeleton(Skeleton s)`.

但是，当我尝试执行以下操作时：

```
skeleton.Joints[JointType.HandRight].Position.X = 3; 
```

它不允许我这样做：

> 无法修改“Microsoft.Kinect.Joint.Position”的返回值，因为它不是变量。

这可能是因为`Position`不是变量，是属性。

**问题：**

如何复制`Skeleton`对象并更改该对象上 s的`Position`值。`Joint`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T12:58:19.587

是的你可以。

您只需创建一个新的 Position 对象并覆盖您喜欢的 Position。

```
var movedPosition = new SkeletonPoint
{
    X = (float)(mouseJoint.Position.X - 0.4),
    Y = (float)(mouseJoint.Position.Y - 0.3)
};

var movedJoint = new Joint
{
    Position = movedPosition
}; 
```

*这是一个实际项目中的示例，我们希望在不实际修改骨架的情况下纠正手的位置以调整鼠标*

# objective-c - 防止可怕的 NSBrowserCell 工具提示

> ID：11740281
> 
> 赞同：1
> 
> 时间：2012-07-31T12:40:01.270
> 
> 标签：objective-c, cocoa, nsbrowser

我正在`NSBrowser`使用以下代码设置矩阵单元的工具提示：

```
- (void) browser:(NSBrowser *)sender willDisplayCell:(id)cell atRow:(int)row column:(int)column  {  
    NSMatrix *matrix = [sender matrixInColumn:column];
    NSLog(@"'%@'", [cell title]);
    [matrix setToolTip:[cell title] forCell:[matrix cellAtRow:row column:column]];    
} 
```

大多数情况下，这会产生出色的工具提示。

然而，当悬停某些单元格时，工具提示会扩大到一个怪诞的宽度，将原本令人愉快的体验变成一种既可怕又令人困惑的体验。下面的屏幕截图显示了这种可怕的行为。

![宽负载](../Images/981155daee6c1f4b005533697b393510.png)

触发上图令人发指的工具提示的单元格的输出是：

```
'gnome-1.1-tb-linux.jar' 
```

是什么导致了这些看似随机的暴行——我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:27:23.107

在这种情况下对我有用的解决方案是`- (NSRect)expansionFrameWithFrame:(NSRect)cellFrame inView:(NSView *)view`在我的`NSBrowserCell`子类中实现如下：

```
- (NSRect)expansionFrameWithFrame:(NSRect)cellFrame inView:(NSView *)view {
    NSSize size = [self.tooltipText sizeWithAttributes:@{
                       NSFontAttributeName: [NSFont systemFontOfSize:[NSFont systemFontSize]]
                   }];
    // Expansion frame displays below and indented to the right in relation to the cellFrame
    NSRect rect = NSMakeRect(cellFrame.origin.x + 10, cellFrame.origin.y + size.height, size.width, size.height);
    return rect;
} 
```

# javascript - AngularJS：装饰 $http

> ID：11740289
> 
> 赞同：6
> 
> 时间：2012-07-31T12:40:24.757
> 
> 标签：javascript, ajax, angularjs

我有一个简单的控制器，例如：

```
function MyController($scope, $http) {
    ...
    $http.post(url).success(function(data) {
            console.log(data)
         });
}
MyController.$inject = ['$scope', '$http']; 
```

一切都按预期工作，但我有一个问题。出于安全原因，返回的 JSON 带有 /** */ 注释。使用 jQuery，我扩展了 $.ajax 对象以删除此注释，然后解析结果。我想用 AngularJS 实现同样的效果，并以某种方式告诉 $http 也从每个响应中删除评论。我想为我的整个应用程序执行此操作，并避免输入总是相同的。

任何想法我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:11:59.150

您将要转换所有`$http`响应。我以前没有这样做过，但相关文档如下。

> **转换请求和响应**
> 
> 请求和响应都可以使用转换函数进行转换。默认情况下，Angular 应用这些转换：
> 
> **请求转换：**
> 
> *   如果请求配置对象的 data 属性包含对象，则将其序列化为 JSON 格式。
> 
> **响应转换：**
> 
> *   如果检测到 XSRF 前缀，则将其剥离（请参阅下面的安全注意事项部分）
> *   如果检测到 json 响应，则使用 JSON 解析器对其进行反序列化
> 
> 要在本地覆盖这些转换，请将转换函数指定为配置对象的 transformRequest 和/或 transformResponse 属性。要全局覆盖默认转换，请覆盖 $httpProvider 的 $httpProvider.defaults.transformRequest 和 $httpProvider.defaults.transformResponse 属性。

在[`$http`服务文档中阅读更多信息。](http://docs.angularjs.org/api/ng.%24http)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:08:46.580

您可能希望从将 JSON 响应包装`/** */`为已由`$http`. 相反，在您的 JSON 响应前加上`)]}',\n`.

例如，如果您的 JSON 响应是：

```
['one','two'] 
```

然后，而不是返回：

```
/**['one','two']*/ 
```

只需返回：

```
)]}',
['one','two'] 
```

有关详细信息，请参阅[http://docs.angularjs.org/api/ng.$http中的](http://docs.angularjs.org/api/ng.%24http)*JSON 漏洞保护*部分。

# grails - 无法将 spock 安装到 grails 1.3.7 项目

> ID：11740290
> 
> 赞同：3
> 
> 时间：2012-07-31T12:40:25.070
> 
> 标签：grails, grails-plugin, spock

我使用 Grails 1.3.7 创建了一个简单的 hello world grails 应用程序：

```
grails create-app hello
grails create-controller hello 
```

然后我尝试使用以下方法安装 spock 插件：

```
grails install-plugin spock 
```

我得到以下信息：

```
Error loading event script from file [/Users/wholladay/.grails/1.3.7/projects/hello/plugins/spock-0.6/scripts/_Events.groovy] startup failed:
Could not instantiate global transform class org.spockframework.compiler.SpockTransform specified at jar:file:/Users/wholladay/.ivy2/cache/org.spockframework/spock-core/jars/spock-core-0.6-groovy-1.8.jar!/META-INF/services/org.codehaus.groovy.transform.ASTTransformation  because of exception org.spockframework.util.IncompatibleGroovyVersionException: The Spock compiler plugin cannot execute because Spock 0.6.0-groovy-1.8 is not compatible with Groovy 1.7.8\. For more information, see http://versioninfo.spockframework.org
Spock location: file:/Users/wholladay/.ivy2/cache/org.spockframework/spock-core/jars/spock-core-0.6-groovy-1.8.jar
Groovy location: file:/usr/local/Cellar/grails/current/lib/groovy-all-1.7.8.jar 
```

所以我去了：http: [//versioninfo.spockframework.org](http://versioninfo.spockframework.org)并注意到 spock 有一个 0.6-groovy-1.7 版本。所以我尝试了：

```
grails install-plugin spock 0.6-groovy-1.7 
```

但后来我收到以下错误：

```
Error resolving plugin [name:spock, group:org.grails.plugins, version:0.6-groovy-1.7]. 
```

未找到名称 [spock] 和版本 [0.6-groovy-1.7] 的插件

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:43:43.400

我认为你犯了一个简单的错误。你想要的是：

```
grails install-plugin spock 0.6-groovy-1.7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:04:08.340

[您是否尝试过使用插件页面](http://grails.org/plugin/spock)上的依赖解析安装说明？ 在您的 BuildConfig.groovy 中：

```
grails.project.dependency.resolution = {
  repositories {
    grailsCentral()
    mavenCentral()
  }
  dependencies {
    test "org.spockframework:spock-grails-support:0.6-groovy-1.7"
  }
  plugins {
    test(":spock:0.6") {
      exclude "spock-grails-support"
    }
  }
} 
```

# c - 从c中的资源解压缩多个文件

> ID：11740299
> 
> 赞同：1
> 
> 时间：2012-07-31T12:40:58.107
> 
> 标签：c, windows, archive, compression

我有一个visual c项目，我想在一个目录结构中包含一个包含多个文件的存档我想以编程方式将它提取到磁盘上的某个地方，使用一个最好的小型库（在small下我的意思是几个.c和.h 文件 - 大小并不重要），但我似乎只找到直接解压缩或压缩数据的库（我查看了 lzo-lzop-minilzo，但我似乎没有找到任何说它可以解压整个目录树的东西虽然我已经使用 lzop 来压缩包含文件的存档）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:32:14.470

zlib and accompanying (in the `contrib`) minizip library support .zip format decompression.

You can pack the .zip file as a resource in your executable. To get the raw data from .exe use the `FindResource`, `SizeofResource`, `LoadResource`, `LockResource` APIs.

Then see minizip's samples to see how to decompress and read zlib's documentation to overload the I/O callbacks.

Disclaimer: I did this for [Linderdaum Engine's](http://www.linderdaum.com) virtual file system and there is now support for .zip, .tar, .rar (uncompressed) and .tar.gz formats. The code for VFS is in Src/Linderdaum/Core/VFS and it is under MIT license for non-commercial use. It's C++, but the I/O wrappers for zlib use C-style API and the code is pretty straightforward.

# wordpress - 在主题中包含多个文件

> ID：11740300
> 
> 赞同：0
> 
> 时间：2012-07-31T12:41:06.643
> 
> 标签：wordpress

我希望我的主题包含以下文件：about.php、contact.php、blabla.php 等。

我希望这些页面可以通过 wordpress 管理界面进行编辑，我应该如何继续执行此操作？（我希望页面在选择我的主题后立即存在，也就是说我想要一个已经预定义的页面数量可定制）。

我的意思是，只创建指向这些页面的链接并让它们使用 wordpress 页眉和页脚是没有问题的，但是我怎样才能使它们的内容像 wordpress 管理面板中的“页面”一样可编辑？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:04:37.083

您可以使用自定义页面模板以获取有关自定义页面模板的更多信息.. [http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

# java - 声音数据格式

> ID：11740304
> 
> 赞同：0
> 
> 时间：2012-07-31T12:41:09.343
> 
> 标签：java, audio, recording, audioformat

从 Java 中的流中读取声音数据的低级实际格式是什么？例如，使用以下具有 44.1khz 采样率、16 位采样深度、2 个通道、有符号数据、bigEndian 格式的数据线。

TargetDataLine tdLine = new TargetDataLine(new AudioFormat(44100,16,2,true,true));

我知道它每秒采样 44100 次，每个采样是 16 位。我不明白 16 位或 16 位中的每一个代表什么。另外，每个通道都有自己的 16 位采样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:48:01.637

您应该了解[数字音频基础知识](http://en.wikipedia.org/wiki/Digital_audio)（Wiki 为您提供了入门和大量链接以及进一步阅读的内容）。在那之后**44.1khz 采样率、16 位采样深度、2 个通道、签名数据、bigEndian 格式**应该立即告诉您低级格式。

在这种情况下，这意味着 44100 个样本/秒，代表每个样本的 16 位有*符号*整数，最后*字节序*决定了 16 位 int 的字节以何种顺序放入流中（大端 = 最高有效字节在前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:51:59.150

我先从你的最后一个问题开始，是的，每个通道每秒都有自己的 16 位样本，用于 44100 个样本中的每一个。

至于您的第一个问题，您必须了解扬声器内部的硬件。有隔膜和电磁铁。隔膜是一个大的圆形部分，如果你取下盖子，你可以看到。当电磁铁充电时，它会拉动或推动连接在隔膜上的铁板，使其移动。那个动作变成了声音。

每个样本的值是发送到扬声器的电量。因此，当样本为零时，隔膜处于静止状态。当它为正时，它被推向一个方向，当它为负时，它被推向另一个方向。样品越大，隔膜移动得越多。

如果您将数据中的所有样本绘制成图表，您将获得扬声器随时间移动的图表。

# android - 用于删除的 Android 确认消息

> ID：11740311
> 
> 赞同：7
> 
> 时间：2012-07-31T12:41:24.460
> 
> 标签：android, android-layout

我想添加一个删除确认消息框。

如何在android中做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-31T12:43:55.573

```
private AlertDialog AskOption()
{
    AlertDialog myQuittingDialogBox = new AlertDialog.Builder(this) 
        // set message, title, and icon
        .setTitle("Delete") 
        .setMessage("Do you want to Delete") 
        .setIcon(R.drawable.delete)

        .setPositiveButton("Delete", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) { 
                //your deleting code
                dialog.dismiss();
            }   

        })
        .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

                dialog.dismiss();

            }
        })
        .create();

    return myQuittingDialogBox;         
} 
```

**打电话**

```
AlertDialog diaBox = AskOption();
diaBox.show(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T12:44:08.577

你应该用[AlertDialog做到这一点](http://developer.android.com/reference/android/app/AlertDialog.html)

```
DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which){
        case DialogInterface.BUTTON_POSITIVE:
            //Do your Yes progress
            break;

        case DialogInterface.BUTTON_NEGATIVE:
            //Do your No progress
            break;
        }
    }
};
AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setMessage("Are you sure to delete?").setPositiveButton("Yes", dialogClickListener)
        .setNegativeButton("No", dialogClickListener).show(); 
```

# c# - javascript 按钮点击

> ID：11740315
> 
> 赞同：0
> 
> 时间：2012-07-31T12:41:34.870
> 
> 标签：c#, javascript, asp.net, input

我有以下JS：

```
<script>
   function SetContent(link) {
            document.getElementById('lowerContent').innerHTML =
         "<iframe frameborder='0' src='" + link + "' width=100%' height='" + (screen.height - 100) + "px'";
        } 
</script> 
```

像这样调用它：

```
<a href="javascript:SetContent('http://urlhere);" title="URL">URL</a> 
```

如何`<a>`在按钮单击时执行？或者如何分配`"javascript:SetContent('http://urlhere);"`给`<input type=button>`

不需要回发。点击只是重置主 div 并使用提供的 URL 添加一个 iframe。适用于`<a>`但不确定如何将其移动到按钮。

onclick 只会导致回发，没有别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:45:01.343

将 javascript 分配给按钮点击的工作方式如下：

```
<input type="button" onclick="javascript:SetContent('http://urlhere);" value="Click me at your own risk!"> 
```

相应地调整属性（id 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:45:27.797

```
<input type="button" onclick="SetContent('http://urlhere');" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:07:31.710

在您设置的脚本中返回 false。因此，它返回 true 并调用回发。您不需要在 href 上添加 javascript。您可以按如下方式添加 onclick：

```
<input type="button" onclick="SetContent('http://urlhere');" />

<script>
    function SetContent(link) 
    {
        document.getElementById('lowerContent').innerHTML = "<iframe frameborder='0' src='" + link + "' width=100%' height='" + (screen.height - 100) + "px'";
        return false;
    } 
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:44:50.310

尝试这个。使用 onclick 代替 href。

```
<a href="#" onclick="javascript:return SetContent('http://www.google.com');" title="URL">URL</a> 
```

或者

```
<a href="javascript:void(0);" onclick="javascript:return SetContent('http://www.google.com');" title="URL">URL</a> 
```

# android - Traceview — 滚动不起作用

> ID：11740319
> 
> 赞同：1
> 
> 时间：2012-07-31T12:41:46.527
> 
> 标签：android, scroll, android-traceview

`Traceview`从命令行运行时，会出现一个 java UI。

我的问题是我无法滚动视图。

我看到橙色滚动指示器，但无法单击它来移动它（没有出现更大的箭头框，因此我无法触摸它并滚动视图）。

也许这与 Ubuntu (11.10) 的滚动条有关？

也许这与 Swing 有关系？

也许它是 Swing 和 Ubuntu 相对较新的滚动条的组合？

# jakarta-ee - CDI 注入在 Servlet 中不起作用

> ID：11740322
> 
> 赞同：8
> 
> 时间：2012-07-31T12:42:05.923
> 
> 标签：jakarta-ee, servlets, jetty, cdi, jboss-weld

我真的需要你的帮助。我正在研究这个问题数周或数月。我为这篇长文道歉，但我想尽可能准确地解释问题和我的设置。

我的 JAVA EE 6 Web 应用程序主要包含 3 个 Servlet：一个**javax.faces.webapp.FacesServlet 、一个扩展****javax.servlet.http.HttpServlet**的 StreamingServlet和一个扩展**org.eclipse.jetty.websocket.WebSocketServlet**的 ClientServlet 。我想将 CDI 与这些 Servlet 一起使用，但它仅适用于 FacesServlet，更准确地说，适用于 JSF 操作路由到的 Bean。CDI 注入不适用于其他 2 个 Servlet。

我的项目的设置如下：Maven 3.0.4、Jetty 8.1.4 (jetty-maven-plugin)、MyFaces 2.1.6、Weld 1.1.8。

文件**pom.xml**包含 CDI 的依赖项：

```
...
<dependency>
    <groupId>javax.enterprise</groupId>
    <artifactId>cdi-api</artifactId>
    <version>1.1.EDR1.2</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.annotation</groupId>
    <artifactId>jsr250-api</artifactId>
    <version>1.0</version>
</dependency>
<dependency>
    <groupId>org.jboss.weld.servlet</groupId>
    <artifactId>weld-servlet</artifactId>
    <version>${weld.version}</version>
    <scope>runtime</scope>
</dependency>
... 
```

文件**src/main/webapp/WEB-INF/beans.xml**仅包含一个用于激活 CDI 的空 beans 元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

文件**scr/main/webapp/WEB-INF/jetty-env.xml**包含用于通过 JNDI 获取 bean 管理器的 Jetty 特定配置：

```
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure id="webAppCtx" class="org.eclipse.jetty.webapp.WebAppContext">
    <New id="BeanManager" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg>
            <Ref id="webAppCtx" />
        </Arg>
        <Arg>BeanManager</Arg>
        <Arg>
            <New class="javax.naming.Reference">
                <Arg>javax.enterprise.inject.spi.BeanManager</Arg>
                <Arg>org.jboss.weld.resources.ManagerObjectFactory</Arg>
                <Arg />
            </New>
        </Arg>
    </New>
</Configure> 
```

文件**src/main/webapp/WEB-INF/web.xml**包含 servlet 侦听器和用于引导 CDI 的 BeanManager 参考：

```
...
<listener>
    <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
</listener>

<resource-env-ref>
    <description>Object factory for the CDI Bean Manager</description>
    <resource-env-ref-name>BeanManager</resource-env-ref-name>
    <resource-env-ref-type>javax.enterprise.inject.spi.BeanManager</resource-env-ref-type>
</resource-env-ref>
... 
```

**使用这些设置，我在使用mvn jetty:run**运行应用程序时总是遇到以下错误（第一行是最重要的）：

```
2012-07-31 11:09:33,546 [main] ERROR org.jboss.weld.environment.jetty.JettyPost72Container - Unable to create JettyWeldInjector. CDI injection will not be available in Servlets, Filters or Listeners
java.lang.IllegalArgumentException: Cannot load class for org.jboss.weld.environment.jetty.WeldDecorator
    at org.jboss.weld.environment.servlet.util.Reflections.classForName(Reflections.java:58)
    at org.jboss.weld.environment.jetty.JettyPost72Container.initialize(JettyPost72Container.java:66)
    at org.jboss.weld.environment.servlet.Listener.contextInitialized(Listener.java:162)
    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:764)
    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:406)
    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:756)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:242)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1234)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:262)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:516)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/servlet/ServletContextHandler$Decorator
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    at org.jboss.weld.environment.servlet.util.Reflections.classForName(Reflections.java:51)
    ... 44 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.servlet.ServletContextHandler$Decorator
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    ... 56 more 
```

应用程序正在运行，但异常消息指出：CDI 注入在 Servlet 中不可用。

几天前，我发现文章[使用 Weld-Servlet 和 Jetty 插件从 Maven 启动 CDI webapp](http://agorava.org/news/2012/07/10/Starting-a-CDI-webapp-from-Maven-with-Weld-servlet-and-jetty-plugin/)，尤其是**允许在 servlets 中注入的最后技巧**部分。作者解释说 Weld 需要装饰一些 Jetty 内部类，以便在 servlet 中使用 @Inject 注解，并且我们必须告诉 Jetty 类加载器在哪里可以找到此类以便让 Weld servlet 装饰它。

我等了这么久才得到这个特别的信息。所以我添加了文件**src/main/webapp/WEB-INF/jetty-context.xml**：

```
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure id="webAppCtx" class="org.eclipse.jetty.webapp.WebAppContext">
    <Set name="serverClasses">
        <Array type="java.lang.String">
            <Item>org.eclipse.jetty.servlet.ServletContextHandler.Decorator</Item>
        </Array>
    </Set>
</Configure> 
```

我还更新了**pom.xml**以合并文件 jetty-context.xml（最后一行）：

```
...
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>${jetty.version}</version>
    <configuration>
        <webApp>
            <contextPath>/${project.build.finalName}</contextPath>
        </webApp>
        <jettyEnvXml>src/main/webapp/WEB-INF/jetty-env.xml</jettyEnvXml>
        <contextXml>src/main/webapp/WEB-INF/jetty-context.xml</contextXml>
        ... 
```

现在上述错误消失了。在那短暂的一刻我很高兴:)

在 src/main/resources/log4j.properties 我增加了 Weld 的日志级别：

```
...
log4j.logger.org.jboss.weld=DEBUG, stdout
log4j.additivity.org.jboss.weld=false
... 
```

启动应用程序时，我收到以下焊接日志消息：

```
...
2012-07-31 12:00:08,968 [main] INFO  org.jboss.weld.Bootstrap - WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
2012-07-31 12:00:09,109 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000103 Enabled alternatives for Manager
Enabled alternatives: [] []
Registered contexts: [interface javax.enterprise.context.SessionScoped, interface javax.enterprise.context.ApplicationScoped, interface javax.enterprise.context.Dependent, interface javax.enterprise.context.RequestScoped, interface javax.enterprise.context.ConversationScoped, interface javax.inject.Singleton]
Registered beans: 0
: [] []
2012-07-31 12:00:09,109 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000104 Enabled decorator types for Manager
Enabled alternatives: [] []
Registered contexts: [interface javax.enterprise.context.SessionScoped, interface javax.enterprise.context.ApplicationScoped, interface javax.enterprise.context.Dependent, interface javax.enterprise.context.RequestScoped, interface javax.enterprise.context.ConversationScoped, interface javax.inject.Singleton]
Registered beans: 0
: []
2012-07-31 12:00:09,109 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000105 Enabled interceptor types for Manager
Enabled alternatives: [] []
Registered contexts: [interface javax.enterprise.context.SessionScoped, interface javax.enterprise.context.ApplicationScoped, interface javax.enterprise.context.Dependent, interface javax.enterprise.context.RequestScoped, interface javax.enterprise.context.ConversationScoped, interface javax.inject.Singleton]
Registered beans: 0
: []
2012-07-31 12:00:09,171 [main] INFO  org.jboss.weld.environment.jetty.JettyPost72Container - Jetty7 detected, JSR-299 injection will be available in Listeners, Servlets and Filters.
2012-07-31 12:00:09,265 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Implicit Bean [javax.enterprise.inject.spi.InjectionPoint] with qualifiers [@Default]
2012-07-31 12:00:09,265 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.DependentContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.util.MediaType] with qualifiers [@Any @Default]
2012-07-31 12:00:09,281 [main] WARN  org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
2012-07-31 12:00:09,281 [main] WARN  org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.web.LoginBean] with qualifiers [@Any @Default]
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.http.HttpRequestContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.http.HttpSessionContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.web.CustomerBean] with qualifiers [@Any @Default @Named]
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.bound.BoundConversationContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.ApplicationContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.util.LocaleBean] with qualifiers [@Any @Default @Named]
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.bound.BoundRequestContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.SingletonContext
2012-07-31 12:00:09,281 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Implicit Bean [javax.enterprise.inject.Instance] with qualifiers [@Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.DataReader] with qualifiers [@Any @Default @Named]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.SessionBean] with qualifiers [@Any @Default @Named]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.ConnectionTable] with qualifiers [@Any @Default @Named]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.http.HttpConversationContext
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.servlet.ClientServlet] with qualifiers [@Any @Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.RequestContext
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-javax.enterprise.context.Conversation
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Implicit Bean [javax.enterprise.event.Event] with qualifiers [@Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.CustomerListBean] with qualifiers [@Any @Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.Customer] with qualifiers [@Any @Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.servlet.StreamingServlet] with qualifiers [@Any @Default]
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: org.jboss.weld.bean-flat-Built-in-org.jboss.weld.context.bound.BoundSessionContext
2012-07-31 12:00:09,296 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000106 Bean: Managed Bean [class de.telexiom.cardiom.SessionInfo] with qualifiers [@Any @Default]
2012-07-31 12:00:09,312 [main] DEBUG org.jboss.weld.Reflection - WELD-000601 interface javax.inject.Named is missing @Target. Weld will use this annotation, however this may make the application unportable.
2012-07-31 12:00:09,312 [main] DEBUG org.jboss.weld.Bootstrap - WELD-000100 Weld initialized. Validating beans
... 
```

我使用**Servlet 3.0 API**，StreamingServlet 和 ClientServlet 是通过注解配置的。问题是应用程序范围的 bean **connectionTable**和**dataReader**没有被注入：

```
@WebServlet(value = "/stream", initParams = @WebInitParam(name = "maxIdleTime", value = "0"))
public class StreamingServlet extends HttpServlet
{
    @Inject
    private ConnectionTable connectionTable;
    ...

@WebServlet(value = "/push", loadOnStartup = 1, initParams = @WebInitParam(name = "maxIdleTime", value = "0"))
public class ClientServlet extends WebSocketServlet
{
    @Inject
    private ConnectionTable connectionTable;

    @Inject
    private DataReader dataReader;
    ... 
```

调用（未）注入的属性，我总是得到 NullPointerExceptions。通过 web.xml 配置 Servlet 时，问题也仍然存在。我对自己做错了什么没有更多的想法。阅读所有关于 CDI 与 Jetty 和 Maven 结合的文章，我想知道我是否是唯一一个遇到这些注入问题的人。

在我的 JSF bean 类**UserBean.java**中，注入有效，我不必使用 setter 方法来初始化属性 connectionTable 和 dataReader。

在 DataReader 构造函数（以及 ConnectionTable 类）中使用下面的输出语句

```
@ApplicationScoped
public class DataReader implements Serializable
{
    ...
    public DataReader()
    {
        System.out.println("DataReader.DataReader(): " + this);
    }
    ... 
```

我想知道标准输出上显示的 2 个 DataReader 实例：

```
...
2012-07-31 14:03:04,843 [qtp5435124-17] DEBUG org.jboss.weld.JSF - WELD-000504 Resuming conversation with id null
31.07.2012 14:03:05 org.apache.myfaces.util.ExternalSpecifications isUnifiedELAvailable
INFO: MyFaces Unified EL support enabled
DataReader.DataReader(): DataReader$Proxy$_$$_WeldClientProxy@506e6d
ConnectionTable.ConnectionTable(): ConnectionTable$Proxy$_$$_WeldClientProxy@93b16c

2012-07-31 14:03:19,093 [qtp5435124-16] DEBUG org.jboss.weld.JSF - WELD-000504 Resuming conversation with id null
DataReader.DataReader(): DataReader@1cbd382 
```

前 5 行在基于表单的身份验证后打印，最后 2 行在第一次处理我的 JSF 操作时出现，其中使用了注入的 dataReader 属性。由于 bean 是应用程序范围的，我真的很想知道 2 个构造函数传递。但是从应用程序的行为来看，我认为它没有任何问题。

我的最后一个假设是 servlet 以某种方式存在于分离的、独立的上下文或容器或类似的东西中。因为在其他 2 个 Servlet 中也无法获取 FacesContext：**FacesContext.getCurrentInstance()**给出**null**。但我不知道这在某种程度上是否重要。

我希望任何人都可以帮助我找出问题所在。先感谢您

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-03T05:11:47.107

错误很明显：

```
java.lang.NoClassDefFoundError: org/eclipse/jetty/servlet/ServletContextHandler$Decorator 
```

Weld 找不到上面的 Jetty 服务器类。找不到这个类的原因是Jetty的类加载机制。Jetty 的 WebAppClassloader 有一个默认的服务器类列表，它不会加载：请参阅[http://wiki.eclipse.org/Jetty/Reference/Jetty_Classloading](http://wiki.eclipse.org/Jetty/Reference/Jetty_Classloading)

```
Server Classes
-org.eclipse.jetty.continuation.             don't hide continuation classes
-org.eclipse.jetty.jndi.                     don't hide naming classes
-org.eclipse.jetty.plus.jaas.                don't hide jaas classes
-org.eclipse.jetty.websocket.                don't hide websocket extension
-org.eclipse.jetty.servlet.DefaultServlet    don't hide default servlet
org.eclipse.jetty.                           hide all other jetty classes 
```

要让 Jetty 加载此类，您需要添加“-org.eclipse.jetty.servlet”。到 jetty-web.xml 中的服务器类列表。

```
 <Configure class="org.eclipse.jetty.webapp.WebAppContext">
   <Call name="prependServerClass"><Arg>-org.eclipse.jetty.servlet.</Arg></Call>
 </Configure> 
```

如果您使用的是嵌入式码头，或者调用以下方法：

```
 context.prependServerClass("-org.eclipse.jetty.servlet."); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T17:03:56.683

嗯...你的配置看起来和我的很相似。我不知道的是这个'java-web-api' maven artefact。我在一个新项目中检查了这个，瞧……它有效。然后我又陆续添加了对JSF和WebSocket的支持，还是不行。最后，我弄清楚了错误是什么：我将“jetty-server”人工制品作为依赖项添加到我的 pom.xml 中，但我没有设置范围。所以我使用了错误的服务器库或类似的东西。现在使用“提供”范围时

```
<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-server</artifactId>
    <version>${jetty.version}</version>
    <scope>provided</scope>
</dependency> 
```

一切似乎都正常，依赖注入也在 servlet 中工作。

关于你的 pom，我还有两个问题：

1.  不需要设置 Jetty Maven 插件的 <jettyEnvXml> 元素吗？

2.  再次在 Jetty Maven 插件中使用 <webAppConfig> 元素。我使用的是 <webApp> 元素，因为 Eclipse 代码完成知道这一点。这些元素中的一个是否被弃用而有利于另一个？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T13:51:05.220

对于任何试图应用@Roosevelt Lai 建议的人，我将 jetty-web.xml 中调用的方法的名称更改为，`<Call name="addServerClass"><Arg>-org.eclipse.jetty.servlet.</Arg></Call>`因为我遇到了`NoSuchMethod`异常。

[这在此处的文档](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/webapp/WebAppContext.html#addServerClass(java.lang.String))中有所指示

码头(8.1.14.v20131031)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-23T08:56:12.057

我对这个确切错误消息的 3 天体验，

> java.lang.NoClassDefFoundError: javax/enterprise/inject/spi/InjectionTarget

是`cdi-api.jar`文件`asinstall/glassfish/modules`名为`cdi-api-1.2.jar`. 改了名字，`cdi-api.jar`错误就消失了。

眼镜：

*   Glassfish 4.1（下载为 zip 文件），
*   jdk1.8.0_45,
*   OS X 10.7.5

# php - memcached 服务器迁移

> ID：11740328
> 
> 赞同：0
> 
> 时间：2012-07-31T12:42:34.060
> 
> 标签：php, memcached

我们正在将我们的 memcached 移动到不同的服务器集群，我需要复制现有的 memcached 数据或执行类似影子写入的操作，在此我慢慢地同时填充两个 memcached，直到它们匹配。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:03:37.903

## 两个想法浮现在脑海：

*   创建一个预热脚本，该脚本可以识别需要放入新 Memcached 的每个资源并将其放在那里。然后切换生产环境。到新的 Memcached 服务器 IP。

*   创建一个新的 Memcached 池，将脚本更改为始终写入两个池。等待几个小时，直到脚本无意中将所有数据写入两个池。然后切换生产环境。到新的 Memcached 池并禁用双写脚本和旧池。

## 理由：

*   如果您正在缓存图像/完整的 html 页面/sql 结果集，则第一种情况很有用，您可以轻松编写脚本来获取这些结果集，并且可以预测所有可能的参数 - 方便地它们应该是一些不多的参数。
*   如果您正在缓存非常依赖于应用程序流和不可预测参数的数据，则第二种情况很有用。

Memcached 复制和 Memcached 备份有一些商业解决方案。我不知道任何名字，也许还有一些开源解决方案。

# c# - 消息框的问题

> ID：11740331
> 
> 赞同：2
> 
> 时间：2012-07-31T12:42:55.667
> 
> 标签：c#

我有一些 MessageBox 的代码，但是在代码下方以及在使用 System.Windows.Forms 的课程的开头也出现了一条红线！？

添加使用 System.Windows.Forms 来显示 MessageBox 还不够吗？或者我可能错过了什么？提示很重要！谢谢！

编辑：

错误消息：错误 1 ​​命名空间“系统”中不存在类型或命名空间名称“Windows”（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T12:44:31.250

您应该添加对以下内容的引用`System.Windows.Forms`：

你可以这样做：

1.  右键单击项目
2.  点击“添加参考”
3.  在打开的窗口中转到“.net”选项卡
4.  查找`System.Windows.Forms`并按 OK（或双击它）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:46:50.477

System.Windows.MessageBox 和 System.Windows.Forms.MessageBox 之间可能存在歧义

所以也许为简单起见，只需将其声明为`System.Windows.MessageBox.Show()`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T12:45:14.770

试试这篇文章

[http://msdn.microsoft.com/fr-fr/library/system.windows.forms.messagebox.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.messagebox.aspx)

```
 const string message =
        "message";
    const string caption = "your test";
    var result = MessageBox.Show(message, caption,
                                 MessageBoxButtons.YesNo,
                                 MessageBoxIcon.Question);

    // If the no button was pressed ...
    if (result == DialogResult.No)
    {
        // cancel the closure of the form.
        e.Cancel = true;
    } 
```

# iphone - iOS 中类方法的使用

> ID：11740332
> 
> 赞同：0
> 
> 时间：2012-07-31T12:42:56.300
> 
> 标签：iphone, ios, ipad, class-method

我知道类方法和对象方法之间的区别，但我不清楚为什么我们在 iOS 中使用类方法？谁能给我举个例子，这样我就可以理解了..??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:49:19.353

类方法是类句柄的方法，实例方法是单个实例上的方法。

类方法的一个常见用例是像`NSString`'s这样的便利分配器`+stringWithFormat:`。它与使用相同（添加了自动释放，如果您不使用 ARC），`[[NSString alloc] initWithFormat:]` 但可以节省大量时间。

另一个例子是`MFMailComposeViewController`'`+canSendMail`方法。不需要先创建一个实例来看看是否支持发送邮件。该类对此更了解，因此该方法是类方法而不是实例方法。

[类似的问题](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:00:57.850

我经常使用类方法来创建一个程序，该程序使用一种称为“单例”的设计模式。例如，如果我有一个处理来自其他类的请求的类，我只需要请求处理类的 1 个实例，并且我希望我的整个程序都使用同一个。在请求处理类中，我放置了一个静态变量来保存实例化。

```
static MyRequestHandler *requestHandler; 
```

并且用一个类的方法来获取，如果还不存在的话，我先制作然后保存。

```
+ (MyRequestHandler *) getRequestHandler {
     if (requestHandler == nil) {
         requestHandler = [[MyRequestHandler alloc]init];
     }
     return requestHandler;
} 
```

其他类可以在这样的代码中达到这个实例化

```
MyRequestHandler *requestHandler = [MyRequestHandler getRequestHandler]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:51:29.320

Stackoverflow 是你的朋友。

[类方法和实例方法有什么区别？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

类方法通常是方便的方法，例如 NSString 的 +stringWithFormat: 即你不需要实例化一个类来使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T12:52:59.033

类方法和对象方法。

```
@interface TheClassA : NSObject
+ (TypeA)classMethod;
- (TypeB)objectMethod;
@end

@implementation TheClassA

+ (TypeA)classMethod
{
}

- (TypeB)objectMethod
{
}

@end

main()
{
   [TheClassA classMethod]; // Correct!!!
   [TheClassA objectMethod]; // Wrong!!!

   TheClassA *obj = [[TheClassA alloc] init];
   [obj classMethod]; // Wrong;
   [obj objectMethod]; // Correct;
   [obj.class classMethod]; // Correct
   [obj.class objectMethod]; // Wrong
} 
```

类方法具有类似于通用 C 语言函数的范围。这是全局方法。但是……对象方法只给对象有效……类方法不能改变它的类属性，不能向对象发送消息。但是对象方法可以向对象发送消息并可以更改属性。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:48:05.147

类方法用于库例程。要访问这些方法，不必创建它的对象。

例如，有时它为您提供了简单的初始化程序来创建对象。

```
NSArray *arr = [NSArray array]; 
```

# powershell - 如何保持 24/7 全天候运行的 powershell 脚本

> ID：11740333
> 
> 赞同：1
> 
> 时间：2012-07-31T12:42:58.390
> 
> 标签：powershell

我有一个 PowerShell 脚本，无论出于何种原因，无论是崩溃、自动退出还是系统重启后，它都需要重新启动...

我怎样才能从 bat 或其他 powershell 脚本中确保如果它没有运行，它将再次启动......

即我怎样才能知道它是否已经从另一个脚本运行？

我知道我可以让一个 powershell 脚本启动活动脚本，只要它不退出并出现特定错误，只需让它循环一个新的开始......但是需要看到那个脚本：D 所以我们回到原始问题，我如何保持该脚本 24/7 运行？

```
do 
{
  $date = Get-Date -format "yyyy-MM-ddTHH:mm:ss"
  "$($date) Repeat : Restarting Worker, LastExitCode $($LastExitCode)." | Out-File D:\IDM\Worker\Worker.LOG -width 180 -append
  powershell -File "D:\IDM\Scripts\Worker.ps1"
  sleep 10
} 
while ($LastExitCode -ne $null) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:21:46.320

我只会使用计划任务。那里有很多选择可以帮助你做你想做的事。您可以每五分钟运行一次脚本并让它执行足够的循环以占用该时间并退出：

```
$now = Get-Date
while ($now.AddMinutes(5) -lt (Get-Date)){
    ...work...
} 
```

或者你甚至可以让它在每次循环工作时写入一个标志文件，并让任何新进程检查该文件以查看它是否没有活动。如果没有活动：

```
$workFlag = Get-Item C:\work.flg
$cutOff = (Get-Date).AddMinutes(-5)
if ($workFlag.LastWriteTime -gt $cutOff){
    New-Item -force -path C:\work.flg
    ...work loop..
} 
```

# php - Cake PHP：未定义的偏移错误

> ID：11740337
> 
> 赞同：1
> 
> 时间：2012-07-31T12:43:11.097
> 
> 标签：php, debugging, cakephp

我是 Cake PHP 的新手。我正在尝试运行我最近下载的应用程序，但它不起作用。

我的 debug.log 文件说： 2012-07-31 12:31:47 调试：注意 (8)：未定义的偏移量：0 在 [C:\wamp\www\app\models\vwbrowse.php，第 78 行]

而我的 error.log 文件：2012-07-31 12:31:47 警告：警告（2）：array_keys() 期望参数 1 为数组，在 [C:\wamp\www\app\models\vwbrowse 中给出 null .php，第 78 行]

最后这是导致问题的功能：

```
function afterFind($results, $primary)
{
    if(!$primary) return $results;

    $ret = array();

    //we are primary and not part of an associated find
    if(!is_array($results)) //find first
    {
        $tables = array_keys($results);
        $record = array();
        foreach($tables as $table){
            $record = array_merge($record,$result[$table]);
        }
        $ret['Vwbrowse'] = $record;

    }else{ //merge all arrays if separated
        $tables = array_keys($results[0]);
        foreach($results as $result){
            $record['Vwbrowse'] = array();
            foreach($tables as $table){
                $record['Vwbrowse'] = array_merge($record['Vwbrowse'],$result[$table]);
            }
            $ret[] = $record;
        }
    }

    return $ret;
} 
```

**这是第 78 行：$tables = array_keys($results[0]); **

怎么了？提前感谢您的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:45:26.350

`$results` *您正在检查IS NOT*是否是一个数组，然后告诉您的脚本对其执行`array_keys()`。不计算。

此外，您尝试在`$results[0]`未确认`0`th 索引存在的情况下进行访问。

先试试这个：

```
if (array_key_exists(0, $results)) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:45:27.380

`undefined index`错误是说明数组的索引，在你的情况下是`[0]`未定义的。

您正在检查是否`$results`是一个带有 的数组`if (!is_array($results))`，但不是它是否有任何数据。尝试将其更改为`if (!is_array($results) || (count($results) == 0))`.

# android - 在 Android 内部保存数据会弄乱我的数据

> ID：11740339
> 
> 赞同：1
> 
> 时间：2012-07-31T12:43:35.083
> 
> 标签：android, storage, hashtable, internal, gomoku

我目前正在开发一款游戏，我需要为我的 AI 创建一个转置表。我实现[`Hashtable`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)了`key`Hashtable 是一个正在考虑的状态，它对应`value`的是最优的下一步。

但是，当我将 Hashtable 保存在 Android 的内部存储中并下次恢复时，它似乎有一些保存的数据，但`keys`（即游戏状态）与`keys`我在上一个实例中保存的不同。

以下是我保存和恢复数据的方法：

```
 private void readTranspositionTableFromFile() {
        FileInputStream fis = openFileInput(FILENAME);
        ObjectInputStream ois = new ObjectInputStream(fis);
        transpositionTable = (Hashtable<BoardState, NextMove>) ois.readObject();
        ois.close();
        deleteFile(FILENAME);
    }

    private void writeTranspositionTableToFile() {
        FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(transpositionTable);
        oos.close();
    } 
```

我认为我的`hashCode()`实现没有问题，因为它一遍又一遍地为相同的状态返回相同的值。

我怀疑保存/恢复转置表会弄乱我的数据，因为我记录了 2 个运行时，并且在第一个运行时我必须`hashCode()`为要添加到表中的 2 个状态返回 3964 和 3029。但是，在从文件中读取表时，`hashCode()`返回 9119 两次。

保存/恢复数据有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:16:54.327

我的序列化和散列完全没问题。我的程序是这样的：

1.  添加新的键值对到`transpositionTable`
2.  下一个动作
3.  保存`transpositionTable`到内部存储

但是，经过细致的记录后，我发现我`transpositionTable`在第 2 步之后发生了变化）。这是因为在步骤 1) 中，我使用了

`BoardState newKey = currentData.getBoardState();`

并将其保存到我的`transpositionTable`. 然后在步骤 2）中，当我`currentData`改变时，我`transpositionTable`相应地改变。我尝试使用

`BoardState newKey = currentData.getBoardState().clone();`

但这也没有用。最后我不得不手动分配每个字段，这很有效`currentData.getBoardState()`。`newKey`

# apache-flex - Flex Vgroup 组件的绝对定位

> ID：11740343
> 
> 赞同：0
> 
> 时间：2012-07-31T12:43:43.383
> 
> 标签：apache-flex, adobe, alignment, flex4.6

我有一个 Vgroup，其中一些组件与其布局属性（垂直）对齐。我需要在绝对 X、Y 位置再添加一个组件，覆盖对齐。我尝试了 includeinlayout=false，但组件随后变得不可见。flex可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:04:43.993

这不可能！但是您始终可以获得所需 DisplayObject 的全局坐标，并在该目标附近显示一些 PopUp 或其他组件。

MXML：

```
<s:VGroup x="50" y="50">
    <s:Button width="250" height="250" id="b1"/>
    <s:Button width="250" height="250" id="b2"/>
</s:VGroup>

<s:Button id="addon"/> 
```

作为：

```
var rect:Rectangle = b2.getBounds(this);        
addon.x = rect.x + rect.width - addon.width;
addon.y = rect.y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:23:43.257

不，这是不可能的。VGroup 将忽略 X 和 Y 等属性。如果组件可见，则 includeInLayout 也会被忽略。

您必须在 VGroup 之外布局您的额外组件，或者切换到一个 Group 并绝对布局所有内容。

# jquery - jQuery Flot 插件 0.7 版的 line fill 属性导致图表结果无效

> ID：11740344
> 
> 赞同：1
> 
> 时间：2012-07-31T12:43:47.227
> 
> 标签：jquery, flot

我之前在网页中使用了 jquery flot v0.6，它可以正常工作，但此版本与 IE 9 不兼容。所以我将库升级到 0.7 版，但“行填充属性”不起作用并导致无效结果。

```
 datasets = {
            "total": {
                label: "total",
                data:total,
                *lines: { show:true,fill:true },*
                color:"rgb(255, 128,0)"

            }
            } 
```

v0.6 中的图表预览：

![它工作正常](../Images/ce3f27564a7eb267c1a1f9240a4d4b39.png)

v0.7中的问题是这样的（使用相同的数据）：

![填充时显示直线：true](../Images/644cc2d1e99faed87f73454c445600a3.png)

但是当我设置 fill:false 它工作得很好，但我想填充曲线下的空间![填充：假](../Images/a78c0d12553a14ecc2c9be1ab65db62b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:10:04.107

问题实际上在于比例，而不是填充本身。在 0.7 Flot 中总是从零开始填充。由于您的数据间隔非常紧密（~26850 到 26920），因此最终看起来像一条直线。

不幸的是，没有简单的解决方案。在 0.7 中，您唯一真正的选择是迭代数据以手动计算最小值，并将其设置为绘图的最小值。

展望未来，即将合并到主分支中的更改将恢复旧功能并提供在零或自动最小值之间切换的选项。

# android - 在 SimpleCursorAdapter 中使用哪个标志？

> ID：11740357
> 
> 赞同：10
> 
> 时间：2012-07-31T12:44:14.450
> 
> 标签：android, sqlite, flags, simplecursoradapter, android-cursor

我`SimpleCursorAdapter`用来将读取的数据发送`database`到`ListView`.

`SimpleCursorAdapter`有 2 个标志，其中一个已弃用。

我应该一直使用`FLAG_CONTENT_OBSERVER`吗？

还是使用其他东西而不是更好`SimpleCursorAdapter`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:58:02.423

阅读有关这些标志的[文档。](http://developer.android.com/reference/android/widget/CursorAdapter.html)`FLAG_AUTO_REQUERY`已弃用，因为游标查询经常在 UI 线程中执行。您应该尝试改用 CursorLoader。[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)可以在后台线程中自动重新查询和传递数据。 `FLAG_REGISTER_CONTENT_OBSERVER`只是在光标上注册一个内容观察者，这样您就可以收到有关新数据的通知。

# javascript - 按钮单击时更改颜色/清除画布的画布问题

> ID：11740358
> 
> 赞同：0
> 
> 时间：2012-07-31T12:44:15.113
> 
> 标签：javascript, html, button, canvas, user-interaction

我的代码正在使用一个画布，它允许人们绘制他们想要的任何东西，我想要实现的是改变按钮点击时的颜色，默认颜色是黑色我有两个按钮可以改变红色和绿色，还有一个清晰的画布按钮，但是这些似乎都不能在按钮单击时起作用。

```
<h3>Draw Something</h3>
<!DOCTYPE html>

<html lang="en">
<head>
   <meta charset="utf-8">
   <title>Paint Canvas</title>
   <style type="text/css">
   <!--
     #container { position: relative; }
     #imageView { border: 1px solid #000; }
   -->
   </style>

</head>

<body>

    <div id="container">
        <canvas id="imageView" width="600" height="300">
               </p>
        </canvas>
    </div>

    <script type="text/javascript" src=".js"></script>

</html>

<body >
    <input type= "button" value= "Green" id= "green" onclick= "GreenRect()" />

    <input type= "button" value= "Red" id= "red" onclick= "RedRect()" />

        <input type= "button" value= "clear canvas" 
                 id= "clear" onclick= "ImgClr()" />

        <button id="howdy">Howdy!</button><br>
</body>
    function GreenRect () {
        context.strokeStyle= 'green';
        context.stroke();
        }

        function RedRect () {
        context.strokeStyle= 'red';
        context.stroke();
        }

        function ImgClr () {
        context.clearRect(0,0, 600, 300);  
        }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:59:56.710

您确实有很多格式错误的 html，例如第二个`<body>`标签以及代码的`</html>`一半，正如您通过 Firefox 理解您的代码的崇高尝试所看到的那样，其中任何一个都会完全混淆浏览器：

```
<html lang="en"><head></head><body><h3>Draw Something</h3>
   <meta charset="utf-8">
   <title>Paint Canvas</title>
   <style type="text/css">
   <!--
     #container { position: relative; }
     #imageView { border: 1px solid #000; }
   -->
   </style>
    <div id="container">
        <canvas id="imageView" width="600" height="300">
               <p></p>
        </canvas>
    </div>
    <script type="text/javascript" src=".js"></script>

    <input type="button" value="Green" id="green" onclick="GreenRect()">
    <input type="button" value="Red" id="red" onclick="RedRect()">
    <input type="button" value="clear canvas" id="clear" onclick="ImgClr()">
    <button id="howdy">Howdy!</button><br>

    function GreenRect () {
        context.strokeStyle= 'green';
        context.stroke();
    }

    function RedRect () {
        context.strokeStyle= 'red';
        context.stroke();
    }

    function ImgClr () {
        context.clearRect(0,0, 600, 300);  
    }
</body></html> 
```

还有：

1.  `<h3>`标签之外的`<body>`标签
2.  原始代码底部的 javascript 在`<body>`and`<head>`标记之外，并且缺少开始`<script>`标记。
3.  `<p></p>`画布标签中的标签似乎没有做任何事情。

我强烈建议不要查看下面的代码，而是首先尝试根据我对它的评论来清理你的 html。我想你会从为自己做这件事中得到很多。

```
<!DOCTYPE html>

<html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Paint Canvas</title>

      <script type="text/javascript">
        //declare global namespace
        this.DGN = {
            prep: undefined,
            context: undefined,
            greenRect: undefined,
            redRect: undefined,
            imgClear: undefined,
            smileyFace: undefined
        };

        DGN.prep = function(){
        if(typeof DGN.context === "undefined") {
            var canvas = document.getElementById('imageView');

                if (canvas.getContext){
                    DGN.context = canvas.getContext('2d');
              } 
           }
        };

        DGN.greenRect = function  () {
            DGN.prep();

            DGN.context.strokeStyle = 'green';
            DGN.context.stroke();
        };

        DGN.redRect = function  () {
            DGN.prep();

            DGN.context.strokeStyle = 'red';
            DGN.context.stroke();
        };

        DGN.imgClear = function () {
            DGN.prep();

            DGN.context.clearRect(0, 0, 600, 300);  
        };

        DGN.smileyFace = function () {
            DGN.prep();

            console.log(DGN.context);
            DGN.context.beginPath();  
            DGN.context.arc(75,75,50,0,Math.PI*2,true); // Outer circle  
            DGN.context.moveTo(110,75);  
            DGN.context.arc(75,75,35,0,Math.PI,false);   // Mouth (clockwise)  
            DGN.context.moveTo(65,65);  
            DGN.context.arc(60,65,5,0,Math.PI*2,true);  // Left eye  
            DGN.context.moveTo(95,65);  
            DGN.context.arc(90,65,5,0,Math.PI*2,true);  // Right eye  
            DGN.context.stroke();
        };

        </script>

    </head>
    <body>
        <h3>Draw Something</h3>
        <div id="container">
            <canvas id="imageView" width="600" height="300">
            </canvas>
        </div>

        <input type="button" value="Green"        id="green"      onclick= "DGN.greenRect()" />
        <input type="button" value="Red"          id="red"        onclick= "DGN.redRect()" />
        <input type="button" value="clear canvas" id="clear"      onclick= "DGN.imgClear()" />
        <input type="button" value="Smiley Face"  id="smileyFace" onclick= "DGN.smileyFace()" />

    </body>
</html> 
```

# android - 在android中合并两个位图

> ID：11740362
> 
> 赞同：12
> 
> 时间：2012-07-31T12:44:19.263
> 
> 标签：android, canvas, bitmap, merge

我想合并两个位图，这是我的代码

```
// Camera arg conversion to Bitmap
                    Bitmap cameraBitmap = BitmapFactory.decodeByteArray(arg0, 0,
                            arg0.length);
                    Bitmap back = Bitmap.createBitmap(cameraBitmap.getWidth(),
                        cameraBitmap.getHeight(), Bitmap.Config.ARGB_8888);
                    Canvas cam = new Canvas(back);
                    cam.drawBitmap(cameraBitmap, matrix, null);

                    // FrameLayout to Bitmap
                    FrameLayout mainLayout = (FrameLayout) findViewById(R.id.frame);
                    Bitmap foreground = Bitmap.createBitmap(mainLayout.getWidth(),
                            mainLayout.getHeight(), Bitmap.Config.ARGB_8888);
                    Canvas c = new Canvas(foreground);
                    mainLayout.draw(c);

                    Bitmap cs = null;
                    cs = Bitmap.createBitmap(foreground.getWidth(), cameraBitmap.getHeight(), Bitmap.Config.ARGB_8888); 

                    Canvas comboImage = new Canvas(cs); 
                    comboImage.drawBitmap(cameraBitmap, 0f, 0f, null); 
                    comboImage.drawBitmap(foreground, 0f, cameraBitmap.getHeight(), null); 

                    FileOutputStream fos = null;
                    try {
                        fos = new FileOutputStream(file);
                        if (fos != null) {
                            cs.compress(Bitmap.CompressFormat.PNG, 90, fos);
                            fos.close();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    } 
```

相机图像应成为背景，前景为顶部图像。我已经尝试 [使用 Canvas 在 Android 中组合 2 个图像，](http://www.jondev.net/articles/Combining_2_Images_in_Android_using_Canvas) 但它没有帮助我。任何的想法。？谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-31T12:59:23.467

在您的示例中，您忘记添加下一行：

```
 comboImage.drawBitmap(c, 0f, 0f, null); 
 comboImage.drawBitmap(s, 0f, c.getHeight(), null); 
```

在上面的示例中，您没有在画布中绘制图像，这就是问题所在。你可以认为你的画布就是你的速写本。现在你什么都没画，你问自己，我看不到任何颜色。

因此，根据我的建议，首先创建两个位图，然后执行以下操作：

```
c.drawBitmap(cameraBitmap, top point, left point, null);
c.drawBitmap(foreground, top point, left point, null); 
```

你也可以通过首先从你的位图中创建可绘制对象来做到这一点，就像在下面的代码中一样：

```
Drawable cameraBitmap = BitmapDrawable(cameraBitmap);
Drawable foreground= BitmapDrawable(foreground); 
```

然后，当您拥有可绘制对象时，您可以设置它们的边界，这样您就可以设置要在哪里显示该图像。

```
cameraBitmap.setBounds(left, top, right, bottom);
foreground.setBounds(left, top, right, bottom); 
```

最后在画布上绘制：

```
cameraBitmap.draw(canvas);
foreground.draw(canvas); 
```

**编辑：**

这是一个示例，使用它来了解您的实现：

```
 Bitmap bitmap = null;
    try {

        bitmap = Bitmap.createBitmap(500, 500, Config.ARGB_8888);
        Canvas c = new Canvas(bitmap);
        Resources res = getResources();

        Bitmap bitmap1 = BitmapFactory.decodeResource(res, R.drawable.test1); //blue

        Bitmap bitmap2 = BitmapFactory.decodeResource(res, R.drawable.test2); //green
        Drawable drawable1 = new BitmapDrawable(bitmap1);
        Drawable drawable2 = new BitmapDrawable(bitmap2);

        drawable1.setBounds(100, 100, 400, 400);
        drawable2.setBounds(150, 150, 350, 350);
        drawable1.draw(c);
        drawable2.draw(c);

    } catch (Exception e) {
    }
    return bitmap; 
```

这是我从上面的代码中得到的：

![在此处输入图像描述](../Images/efae01f602c63b076c7051297b534601.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-07T13:13:33.623

一个大，一个小，垂直合并两个位图
按照这个方法

```
 public Bitmap finalcombieimage(Bitmap c, Bitmap s) {
    Bitmap cs = null;
    DisplayMetrics metrics = getBaseContext().getResources().getDisplayMetrics();
    int width = metrics.widthPixels;
    int height = metrics.heightPixels;
    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas comboImage = new Canvas(cs);
    Rect dest1 = new Rect(0, 0, width, height); // left,top,right,bottom
    comboImage.drawBitmap(c, null, dest1, null);
    Rect dest2 = new Rect(0, height-400 / 2, width, height);
    comboImage.drawBitmap(s, null, dest2, null);
    return cs;
} 
```

[![在此处输入图像描述](../Images/c279a7102471f94766d4c377d15b712d.png)](https://i.stack.imgur.com/tDAvq.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T07:24:08.537

请注意，BitmapDrawable(Bitmap) 已被弃用。Kinldy 检查[此](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)替代方案。

`BitmapDrawable(Bitmap bitmap)` 此构造函数在 API 级别 4 中已弃用。`BitmapDrawable(Resources, Bitmap)`用于确保可绘制对象已正确设置其目标密度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T11:12:16.897

将水印图像调整为与原始图像相同的大小

```
Uri bmpUri1 = getLocalBitmapUri(ivImage);
Uri bmpUri2 = getLocalBitmapUri(watermark_imageview);

try {
    bm1 = BitmapFactory.decodeStream(
            getContentResolver().openInputStream(bmpUri1));
    bm2 = BitmapFactory.decodeStream(
            getContentResolver().openInputStream(bmpUri2));

    Bitmap bmOverlay = Bitmap.createBitmap(bm1.getWidth(), bm1.getHeight(), bm1.getConfig());
    bm2 = Bitmap.createScaledBitmap(bm2, bm1.getWidth(), bm1.getHeight(),
            true);

    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bm1, 0,0, null);
    canvas.drawBitmap(bm2, 0,0, null);
    watermarkimage.setVisibility(View.GONE);
    im =new ImageView(ImageClick.this);
    im.setImageBitmap(bmOverlay);
    bmpUri = getLocalBitmapUri(im);
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

private Uri getLocalBitmapUri(ImageView imageView) {
    Drawable drawable = imageView.getDrawable();
    Bitmap bmp = null;
    if (drawable instanceof BitmapDrawable){
        bmp = ((BitmapDrawable) imageView.getDrawable()).getBitmap();
    } else {
        return null;
    }
    // Store image to default external storage directory
    Uri bmpUri = null;
    try {
        File file =  new File(Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_DOWNLOADS), "share_image_" + System.currentTimeMillis() + ".png");
        file.getParentFile().mkdirs();
        FileOutputStream out = new FileOutputStream(file);
        bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
        out.close();
        bmpUri = Uri.fromFile(file);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return bmpUri;
} 
```

# android - android中微调器项目选择的弹出窗口

> ID：11740364
> 
> 赞同：0
> 
> 时间：2012-07-31T12:44:26.753
> 
> 标签：android, popup

我有一个奇怪的问题。我在选择它的项目时使用微调器我正在打开一个弹出窗口但问题是第一次选择任何项目时弹出窗口打开但如果再次选择该项目弹出不会打开直到任何在再次选择该项目之前选择了其他项目？我应该怎么办 ？？请帮助下面是我的代码

```
 @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {
        // TODO Auto-generated method stub
        switch (position) {
        case 0:

            break;
        case 1:
            pool_type_value=0;
            option_selected=2;
            calculation();
            break;

        case 2:
            pool_type_value=1;
            option_selected=2;
            System.out.println("pop up case 2");
            openPopupWindow(pool_legend);

            break;

        case 3:
            pool_type_value=2;
            option_selected=2;
            openPopupWindow(pool_legend);

            break;
        case 4:
            pool_type_value=0;
            option_selected=1;
            calculation();
            break;

        default:
            break;
        }

    }

          private void openPopupWindow(Spinner spinner) {
        // TODO Auto-generated method stub
        int h = 0;
        View popupView = null;
         Button btnDismiss = null;
        LayoutInflater layoutInflater 
         = (LayoutInflater)getBaseContext()
          .getSystemService(LAYOUT_INFLATER_SERVICE); 
         System.out.println("pop up ");
        if(width>240 && height>320)
          {
            h=350;

          }
        else if(width<=240 && height<=320){
            h=200;
        }
        if(pool_type_value==1){
         popupView = layoutInflater.inflate(R.layout.popup_rectangle_extension, null);
         btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
         ed_width_single_extension=(EditText)popupView.findViewById(R.id.editText_singleextension_width);
         ed_length_single_extension=(EditText)popupView.findViewById(R.id.editText_singleextension_lenght);

         System.out.println("pop up 1");
         if(!hashmap.get("single_width").equals("0")){
             ed_width_single_extension.setText(""+hashmap.get("single_width"));
             }
            if(!hashmap.get("single_length").equals("0")){
             ed_length_single_extension.setText(""+hashmap.get("single_length"));
             }

        }else if(pool_type_value==2){
         popupView = layoutInflater.inflate(R.layout.popup_rectangle_plus_extension, null);
         System.out.println("pop up 2");
         btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
        }
                 popupWindow = new PopupWindow(popupView, LayoutParams.FILL_PARENT,h);
                 popupWindow.setTouchable(true);
                 popupWindow.setFocusable(true);

                 btnDismiss.setOnClickListener(new Button.OnClickListener(){

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        hashmap.put("single_width", ed_width_single_extension.getText().toString());
                        hashmap.put("single_length", ed_length_single_extension.getText().toString());
                        calculation();

                        popupWindow.dismiss();
                        // setDatabase();
                    }

});

                popupWindow.showAtLocation( spinner, Gravity.CENTER, 0, 10);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:02:18.520

链接
[https://stackoverflow.com/a/6450043/1514187](https://stackoverflow.com/a/6450043/1514187)
说当您再次单击当前选定的项目时，它不会触发任何事件。因此，您无法捕获 setOnItemSelectedListener 以使微调器响应。摘自

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:05:17.443

尝试这个

```
public class NoDefaultSpinner extends Spinner {

    private int lastSelected = 0;
    private static Method s_pSelectionChangedMethod = null;

    static {        
        try {
            Class noparams[] = {};
            Class targetClass = AdapterView.class;

            s_pSelectionChangedMethod = targetClass.getDeclaredMethod("selectionChanged", noparams);            
            if (s_pSelectionChangedMethod != null) {
                s_pSelectionChangedMethod.setAccessible(true);              
            }

        } catch( Exception e ) {
            Log.e("Custom spinner, reflection bug:", e.getMessage());
            throw new RuntimeException(e);
        }
    }

    public NoDefaultSpinner(Context context) {
        super(context);
    }

    public NoDefaultSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public NoDefaultSpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void testReflectionForSelectionChanged() {
        try {
            Class noparams[] = {};          
            s_pSelectionChangedMethod.invoke(this, noparams);
        } catch (Exception e) {
            Log.e("Custom spinner, reflection bug: ", e.getMessage());
            e.printStackTrace();                
        }
    } 

    @Override
    public void onClick(DialogInterface dialog, int which) {    
        super.onClick(dialog, which);
            if(lastSelected == which)
                testReflectionForSelectionChanged();

            lastSelected = which;
    }
} 
```

# objective-c - Objective-c 线程和 CPU 性能

> ID：11740365
> 
> 赞同：1
> 
> 时间：2012-07-31T12:44:27.390
> 
> 标签：objective-c, multithreading, macos, cpu-usage

我有一个应用程序可以在几个线程中从服务器下载一些文件。问题是它给 CPU 带来了沉重的负载（达到 80%）。可以做些什么来让它变得更好？我用 C# 在 Windows 上制作了类似的应用程序，cpu 使用率从未超过 5%。

编辑：在得到以下一些建议后，此代码已更改。现在的问题是，当我设置 [queue setMaxConcurrentOperationCount:6] 时，下载永远不会达到 100%。如果我将异步 NSURLConnection 改回 sendSynchronous 调用它可以工作，当我将上面的 OperationCount 更改为 1 时，它也可以工作。

这就是我将 NSOperations 添加到队列中的方式（可能很大，比如 800）。

```
int chunkId = 0;
for (DownloadFile *downloadFile in [download filesInTheDownload])
{
    chunkId = 0;
    for (DownloadChunk *downloadChunk in [downloadFile chunksInTheFile])
    {
        DownloadChunkOperation *operation = [[DownloadChunkOperation alloc]  initWithDownloadObject:download
      downloadFile:downloadFile                                                                                                    downloadChunk:downloadChunk                                                                                                           andChunkId:chunkId];
    [queue addOperation:operation];
    chunkId++;
    }
}

#import "DownloadChunkOperation.h"
#import "Download.h"
#import "DownloadFile.h"
#import "DownloadChunk.h"

@interface DownloadChunkOperation()
@property(assign) BOOL isExecuting;
@property(assign) BOOL isFinished;
@end

@implementation DownloadChunkOperation

@synthesize download = _download;
@synthesize downloadFile = _downloadFile;
@synthesize downloadChunk = _downloadChunk;

@synthesize isFinished = _isFinished;
@synthesize isExecuting = _isExecuting;

- (id) initWithDownloadObject:(Download *)download downloadFile:(DownloadFile *)downloadFile downloadChunk:(DownloadChunk *)downloadChunk andChunkId:(uint32_t)chunkId
{
    self = [super init];

    if (self) {
        self.download = download;
        self.downloadFile = downloadFile;
        self.downloadChunk = downloadChunk;
        self.chunkId = chunkId;
    }

    return self;
}

- (void) start
{
    if ([self isCancelled]) {
        [self setIsFinished:YES];
        [self setIsExecuting:NO];
        return;
    }

    [self setIsExecuting:YES];
    [self setIsFinished:NO];
    [self.downloadChunk setChunkState:cDownloading];

    downloadPath = [[NSString stringWithFormat:@"%@/%@", [self.download downloadFolder], [self.download escapedTitle]] stringByExpandingTildeInPath];

    NSURL *fileURL = [[NSURL alloc] initWithString:[self.downloadFile filePath]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:fileURL];
    NSString *range = [NSString stringWithFormat:@"bytes=%lli-%lli", [self.downloadChunk startingByte], [self.downloadChunk endingByte]];
    [request setValue:range forHTTPHeaderField:@"Range"];
    connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
    // IMPORTANT! The next line is what keeps the NSOperation alive for the during of the NSURLConnection!
    [connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [connection start];

    if (connection) {
        NSLog(@"connection established!");
        do {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        } while (!self.isFinished);
    } else {
        NSLog(@"couldn't establish connection for: %@", fileURL);
    }
}

- (BOOL) isConcurrent
{
    return YES;
}

- (void) connection:(NSURLConnection *)_connection didReceiveResponse:(NSURLResponse *)response
{
    receivedData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Not cancelled, receive data.
    if (![self isCancelled]) {
        [receivedData appendData:data];
        self.download.downloadedBytes += [data length];
        return;
    }

    // Cancelled, tear down connection.
    [self setIsExecuting:NO];
    [self setIsFinished:YES];
    [self.downloadChunk setChunkState:cConnecting];
    [self->connection cancel];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [self setIsExecuting:NO];
    [self setIsFinished:YES];
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *chunkPath = [downloadPath stringByAppendingFormat:@"/%@.%i", [self.downloadFile fileName], self.chunkId];
    NSError *saveError = nil;
    [receivedData writeToFile:chunkPath options:NSDataWritingAtomic error:&saveError];
    if (saveError != nil) {
        NSLog(@"Download save failed! Error: %@", [saveError description]);
    }
    else {
        NSLog(@"file has been saved!: %@", chunkPath);
    }
    [self setIsExecuting:NO];
    [self setIsFinished:YES];
    [self.downloadChunk setChunkState:cFinished];

    if ([self.download downloadedBytes] == [self.download size])
        [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadFinished" object:self.download];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:58:34.757

您不应该自己创建线程。为此目的直接使用像 NSOperationQueue 甚至 GCD 这样的专用 API。他们更了解硬件限制、虚拟内核等，并支持优先级设置。

你也不应该使用`+sendSynchronousRequest:`。按照 charith 的建议将您的`-downloadChunk`方法包装在调度调用中不会帮助您提高性能，因为会`+sendSynchronousRequest:`阻塞线程，直到新数据进入并强制 GCD 产生新线程。

`NSURLConnection`使用委托回调的异步 API 。您还可以将 NSURLConnection 代码包装在`NSOperation`子类中并用于`NSOperationQueue`管理下载：[Using NSURLConnections](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

如果您不想`NSOperation`自己编写子类，也可以使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)之类的 3rd 方框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:54:17.410

尝试使用 GCD 块和全局队列。这是苹果现在推荐的并发方式：

```
dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(globalQueue, ^{

        [self downloadChunk:objDownload];
    }); 
```

# javascript - 如何使用 Meteor 创建多页应用程序？

> ID：11740368
> 
> 赞同：55
> 
> 时间：2012-07-31T12:44:30.840
> 
> 标签：javascript, url-routing, meteor

我是 Javascript 新手，只是出于好奇才开始摆弄 Meteor。真正让我吃惊的是，似乎所有 HTML 内容都合并到一个页面中。

我怀疑有一种方法可以对指向特殊页面的 URL 进行一些处理。似乎“待办事项”示例能够通过某种类来做到这一点`Router`。这是 URL 处理的“规范”方式吗？

假设我可以处理 URL，我将如何构建我的 HTML 代码以显示单独的页面？就我而言，它们每个都可以拥有完全独立的数据集，因此根本不需要共享 HTML 代码。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-17T23:39:15.710

Jon Gold 的回答曾经是正确的，但从[Meteor 0.5.4 开始](https://github.com/tmeasday/meteor-router#note)：

> 工作现已转移到 Iron Router。请考虑在新项目中使用 IR 而不是路由器！

因此，当前执行此操作的“规范”方法可能是使用[IronRouter](https://github.com/EventedMind/iron-router)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-31T13:40:49.367

据我所知，目前没有开箱即用的方法来做到这一点。

我建议做的是使用 Backbone.js 智能包。Backbone.js 带有推送状态路由器，如果用户的浏览器不支持它，它将回退到哈希 URL。

在你的流星应用目录中输入这个`meteor add backbone`。

然后在您的客户端代码中的某个位置创建一个 Backbone.js 路由器，如下所示：

```
var Router = Backbone.Router.extend({
  routes: {
    "":                 "main", //this will be http://your_domain/
    "help":             "help"  // http://your_domain/help
  },

  main: function() {
    // Your homepage code
    // for example: Session.set('currentPage', 'homePage');
  },

  help: function() {
    // Help page
  }
});
var app = new Router;
Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

然后在您的 Handlebars 模板中的某处，您可以创建一个助手，该助手将根据 Session 的“currentPage”中设置的值呈现页面。

您可以在此处找到有关backbone.js 路由器的更多信息：http: [//backbonejs.org/#Router](http://backbonejs.org/#Router)

还有关于如何在 Metoer 中创建 Handlebars 辅助方法的相关信息：http: [//docs.meteor.com/#templates](http://docs.meteor.com/#templates)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-02T14:15:59.670

[Meteor-Router](https://github.com/tmeasday/meteor-router)让这一切变得非常简单。我一直在使用 Telescope 构建的一些应用程序中使用它作为一个很好的参考。看看 Telescope 的[router.js](https://github.com/SachaG/Telescope/blob/master/client/lib/router.js)

要使用它……</p>

`mrt add router`

在客户端/router.js 中：

```
Meteor.Router.add({
  '/news': 'news', // renders template 'news'

  '/about': function() {
    if (Session.get('aboutUs')) {
      return 'aboutUs'; //renders template 'aboutUs'
    } else {
      return 'aboutThem'; //renders template 'aboutThem'
    }
  },

  '*': 'not_found'
}); 
```

在您的模板中……</p>

```
<body>{{renderPage}}</body> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-26T10:38:43.820

我发现了同样的问题。当代码变大时，很难保持代码干净。

这是我解决这个问题的方法：

我将不同的 html 页面分开，就像我对另一个 Web 框架所做的那样。有一个`index.html`我存储根 html 页面的位置。然后对于每个重要的功能部分，我创建一个不同的模板并将其放置在一个不同的 html 中。Meteor 然后将它们全部合并。最后我创建了一个会话变量`operation`，我在其中定义了每次显示的内容。

这是一个简单的例子

**索引.html**

```
<head>
  <title>My app name</title>
</head>

<body>
 {{> splash}}
 {{> user}}
 {{> debates}}
</body> 
```

然后在**splash.html**

```
<template name="splash">
    {{#if showSplash}}
      ... your splash html code goes here...
    {{/if}}
</template> 
```

然后在**user.html**

```
<template name="user">
    {{#if showUser}}
      ... your user html code goes here...
    {{/if}}
</template> 
```

等等 ...

在 javascript 代码中，我检查何时使用 Session 变量打印每个模板，如下所示：

```
Template.splash.showSplash = function(){
    return Session.get("operation") == 'showSplash';
} 
```

最后，骨干路由器管理这个会话变量

```
var DebateRouter = Backbone.Router.extend({

  routes: {
    "": "showSplash",
    "user/:userId": "showUser",
    "showDebates": "showDebates",
    // ...
  },
  splash: function () {
   Session.set('operation', 'showSplash');
   this.navigate('/');
  },
  user: function (userId) {
   Session.set('operation', 'showUser');
   this.navigate('user/'+userId);
  },
  // etc...
}); 
```

我希望这种模式对其他 Meteor 开发人员有所帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-31T22:21:14.453

这是我对路由的 hacky 解决方案： [https ://gist.github.com/3221138](https://gist.github.com/3221138)

只需将页面名称作为模板名称导航到 /{name}

# mysql - 存储过程不返回任何结果作为输出，但查询工作正常

> ID：11740373
> 
> 赞同：0
> 
> 时间：2012-07-31T12:44:42.120
> 
> 标签：mysql, stored-procedures

为什么这个存储过程不返回任何结果

```
CREATE PROCEDURE `sp_location_selectAllByTermAutoComplete`(
IN _term VARCHAR(99))
BEGIN

    SELECT
        `title` AS `value`,
        `keyword` AS `label`,
        `city_id`,
        `id` AS `locationtitle_id`
    FROM `locationtitle`
    WHERE
        MATCH(`keyword`) AGAINST(_term  IN BOOLEAN MODE)
    ORDER BY MATCH(`keyword`) AGAINST(_term  IN BOOLEAN MODE) DESC
    LIMIT 0, 10
;END// 
```

但是这个回来了

```
 SELECT
        `title` AS `value`,
        `keyword` AS `label`,
        `city_id`,
        `id` AS `locationtitle_id`
    FROM `locationtitle`
    WHERE
        MATCH(`keyword`) AGAINST('+NEW*'  IN BOOLEAN MODE)
    ORDER BY MATCH(`keyword`) AGAINST('+NEW*'  IN BOOLEAN MODE) DESC
    LIMIT 0, 10 
```

两个输入参数与其他参数相同。

我有其他存储过程，它们工作正常。

我`PDO`用来执行我的存储过程。

我从未`OUT`在我的存储过程中使用过，也没有经验如何使用它。

我已经在本地主机中测试了存储过程并且工作正常，但我不知道为什么它在我的服务器上不起作用？

**更新**

我发现我的问题是什么。

当我调用具有`VARCHAR`作为输入参数的过程时，字符串字符变为`?`（问号）。

我的数据库排序规则是**UTF-8**，任何表也是

我添加了 pdo utf-8 驱动程序，但我不知道为什么它不起作用

即使我不能在 phpMyAdmin 中调用存储过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:52:55.590

很难说，但我会尝试检查数据类型、引号等是否与您期望的一样：

```
CREATE PROCEDURE `sp_location_selectAllByTermAutoComplete`(
IN _term VARCHAR(99))
BEGIN

    SELECT
        _term as my_param,
        MATCH(`keyword`) AGAINST(_term  IN BOOLEAN MODE) as my_param_result,
        `title` AS `value`,
        `keyword` AS `label`,
        `city_id`,
        `id` AS `locationtitle_id`
    FROM `locationtitle`
    WHERE
        MATCH(`keyword`) AGAINST('+NEW*'  IN BOOLEAN MODE)
    ORDER BY MATCH(`keyword`) AGAINST('+NEW*'  IN BOOLEAN MODE) DESC
    LIMIT 0, 10
;END// 
```

然后传入

> '+新*

' 作为你的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:21:28.210

我必须在导入或插入任何字符之前设置数据库排序规则 utf8。

现在，我将我的数据库排序规则设置为 utf8，然后再次导入我的数据。问题解决了。

# c# - System.Data.SqlClient.SqlException：不允许从数据类型 sql_variant 到 uniqueidentifier 的隐式转换。

> ID：11740378
> 
> 赞同：1
> 
> 时间：2012-07-31T12:44:52.933
> 
> 标签：c#, asp.net, sql

当我尝试在 ListView 中编辑我的文本并随后在数据库中更新它时，我遇到了这个错误。当我单击 ListView 中的更新按钮时，会显示此错误消息。由于我的 UserID 是唯一标识符，因此无法将其更新到我的数据库中。但我真的不知道要对我的代码进行哪些更改。

我的错误信息显示：

```
Implicit conversion from data type sql_variant to uniqueidentifier is not allowed. Use the CONVERT function to run this query. 
```

我在 .cs 中的 SQL 语句：

```
protected void updateComment(object sender, ListViewUpdateEventArgs e)
{

    MembershipUser currentUser = Membership.GetUser();
    Guid currentUserId = (Guid)currentUser.ProviderUserKey;

    var ID= ListView1.DataKeys[e.ItemIndex].Value.ToString();

    string connectionString = ConfigurationManager.ConnectionStrings["ASPNETConnectionString"].ConnectionString;
    SqlConnection myConnect = new SqlConnection(connectionString);

    string updateSql = "UPDATE Review set ContentRev =@ContentRev WHERE ID = @ID";

    using (SqlConnection myConnection = new SqlConnection(connectionString))
    {
        myConnection.Open();

        SqlCommand myCommand = new SqlCommand(updateSql, myConnection);
        myCommand.Parameters.AddWithValue("@ID", ID);
        myCommand.Parameters.AddWithValue("@ContentRev ", TextBox1.Text.Trim());

        myCommand.ExecuteNonQuery();

        myConnection.Close();

        ListView1.DataBind();
        } 
```

我的 Userid 数据类型是 Object，ContentRev 是 String。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:47:19.610

这是你的问题：

```
var ID = ListView1.DataKeys[e.ItemIndex].Value.ToString(); 
```

如果这是一个 uniqueIdentifier（或 GUID），它应该是：

```
Guid ID = new Guid(ListView1.DataKeys[e.ItemIndex].Value.ToString()); 
```

我实际上认为`var ID`只要右侧是 GUID 就可以了。

# xslt - xslt, fn:subsequance, java 转换

> ID：11740382
> 
> 赞同：1
> 
> 时间：2012-07-31T12:45:12.387
> 
> 标签：xslt, transform

我有 XML 数据

```
 <logData>
      <log>
         <id>1</id>
      </log> 
      <log>
         <id>2</id>
      </log> 
      <log>
         <id>3</id>
      </log> 
      <log>
         <id>4</id>
      </log> 
   </logData> 
```

我只想使用 fn:subsequence 函数使用 xslt 转换获取部分日志

这是我的 xslt

```
<?xml version="1.0" encoding="UTF-8"?> 
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:fn="http://www.w3.org/2006/xpath-functions" version="1.0" >
       <xsl:output method="xml" indent="yes" />     
       <xsl:strip-space elements="*"/>

       <xsl:template match="/logData" >
          <xsl:element name="log">
             <xsl:copy-of select="fn:subsequence(./log, 2, 3)"/>
          </xsl:element>
       </xsl:template>
    </xsl:stylesheet> 
```

我得到

```
ERROR:  'The first argument to the non-static Java function 'subsequence' is not a valid object reference.' 
```

我正在使用 Java 转换 API，它是 Java SE 1.6 的一部分。
你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:06:49.793

```
<xsl:copy-of select="fn:subsequence(./log, 2, 3)"/> 
```

该函数`subsequence()`在 XPath 2.0 中定义，并且仅在 XSLT 2.0 处理器中可用。

**在 XSLT 1.0 中使用**：

```
<xsl:copy-of select="log[position() > 1 and not(position() > 4)]"/> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy-of select="log[position() > 1 and not(position() > 4)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当这应用于提供的 XML 文档时：**

```
<logData>
    <log>
        <id>1</id>
    </log>
    <log>
        <id>2</id>
    </log>
    <log>
        <id>3</id>
    </log>
    <log>
        <id>4</id>
    </log>
</logData> 
```

**产生了想要的正确结果：**

```
<log>
   <id>2</id>
</log>
<log>
   <id>3</id>
</log>
<log>
   <id>4</id>
</log> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:56:46.117

由于您使用的是 Java，因此您需要做的就是确保您的代码加载 XSLT 2.0 处理器而不是 XSLT 1.0。JDK 中的默认 XSLT 处理器仅支持 XSLT 1.0。

下载 Saxon-HE，并设置系统属性

-Djavax.xml.transform.TransformerFactory=net.sf.saxon.TransformerFactoryImpl

你的代码应该可以工作。

（当然，正如 Dimitre 所展示的，这种转换在 XSLT 1.0 中可以很容易地完成。但是坚持使用 XSLT 1.0，您会尝试将脚绑在脚踝处移动。XSLT 2.0 更强大且更易于使用，并且它在您的环境中可用，因此请使用它。）

# android - 如何在android中制作多行edittext

> ID：11740384
> 
> 赞同：8
> 
> 时间：2012-07-31T12:45:14.917
> 
> 标签：android, android-edittext, multiline

我尝试使用 LayoutParams.MATCHPARENT 为其宽度和高度动态创建一个编辑文本。我已经尝试了以下代码，但它仍然无法正常工作。

```
EditText editor = ....;
LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 1);
editor.setLayoutParams(params);
editor.setGravity(Gravity.LEFT | Gravity.TOP);
editor.setBackgroundColor(Color.WHITE);
editor.setImeOptions(EditorInfo.IME_FLAG_NO_EXTRACT_UI);
editor.setTextColor(Color.BLACK);
//editor.setSingleLine(false);
editor.setFocusableInTouchMode(true);
editor.setInputType(EditorInfo.TYPE_CLASS_TEXT | EditorInfo.TYPE_TEXT_FLAG_MULTI_LINE | EditorInfo.TYPE_TEXT_FLAG_IME_MULTI_LINE);
editor.setMaxLines(Integer.MAX_VALUE);
editor.setHorizontallyScrolling(false);
editor.setTransformationMethod(null); 
```

上面的代码让我输入了几行，键盘上会显示一个“ENTER”按钮，但是当我在编辑文本上键入时，如果宽度不足以显示文本，编辑文本会水平滚动。有人可以帮我如何制作edittext多行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:52:36.957

试试下面的代码

```
editor.setSingleLine(false);
editor.setHorizontalScrollBarEnabled(false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-27T08:15:52.787

试试这个代码

```
 txt.setSingleLine(false);
    txt.setLines(14);
    txt.setMinLines(13);
    txt.setMaxLines(15);
    txt.setGravity(Gravity.LEFT | Gravity.TOP); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:48:48.517

尝试

```
android:scrollHorizontally="false" 
```

对于编辑文本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T12:55:49.557

将以下行添加到您的代码中，它可能会对您有所帮助。

```
editor.setSingleLine(false); 
```

# c++ - `std::vector` 调整其内存大小时避免任何自动变量

> ID：11740386
> 
> 赞同：0
> 
> 时间：2012-07-31T12:45:21.323
> 
> 标签：c++, stl, vector

我有一个`std::vector<SomeType>`, 而`SomeType`是`struct`从各种模板参数实例化的。

最终在我的具体情况下，它变成了一个大型结构（大约 1MB）。在堆栈上分配这样的结构（即使用这种类型的自动变量）会立即导致堆栈溢出。但是由于`std::vector`在堆上分配内存-*应该*没有问题。

令人惊讶的是，这有**一个**问题。具体来说，问题在于初始化。我执行以下操作：

```
std::vector<SomeType> myVec;
// ...
myVec.resize(N);
for (size_t i = 0; i < N; i++)
{
    SomeType& x = myVec[i];
    // initialize it
} 
```

我在`myVec.resize()`. 使用调试器进入内部`resize()`显示，如果`resize()`导致`vector`增长 - 除了分配内存之外，它还通过“默认值”初始化新元素。

“默认值”是通过创建给定类型的**自动**变量、使用默认（即空）构造函数并将新元素分配给它来获得的。

我想知道是否有办法克服这个问题。我的意思是，告诉`std::vector`不要初始化新元素。但我想在**不生成不需要的代码**的情况下实现这一点。

我可以考虑使用一个`vector`（智能/共享/作用域/唯一）指针来输入。或者使用`push_back`while 每个新元素都分配在堆上。但是所有这些不可避免的都涉及额外的代码。这是不合理的。

有没有办法实现我所需要的？然而：

*   仍在使用`std::vector<SomeType>`
*   没有多余的堆分配

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:54:39.747

在 C++03 中这是不可能的：

*   向量不能包含未初始化的元素
*   向量*只*知道如何通过复制来初始化元素

因此，您需要一个从中复制的元素。它不适合堆栈（排除默认参数）并且您不想明确地将其放在其他地方，所以您不走运。

在 C++11 中，有一些新方法可以初始化容器中的元素，例如`size_t`构造函数不再需要额外的默认参数。相反，它对每个元素进行值初始化，这可能是您想要的。

所以在 C++11 中，答案是`std::vector<SomeType> myVec(N);`. 也许您可以检查您的编译器是否具有可用于编译代码的 C++11 模式。当然，迁移到 C++11 并不是一件容易的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:49:40.663

使用reserve，然后push_back。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:02:45.697

最好的解决方案是进行更改`SomeType`以使其更小。但是在不使用堆栈或堆的情况下调整向量的大小是可能的。只需使用静态局部变量：

```
static SomeType intialValue;
myVec.resize(N, initialValue); 
```

请注意，此类功能不可重入。

# types - 具有扩展名的泛型类型的特殊情况

> ID：11740389
> 
> 赞同：1
> 
> 时间：2012-07-31T12:45:23.880
> 
> 标签：types, f#

我正在尝试对泛型类型进行一种专业化。

问题是以通用方式制作 AVL 树，在键 k 和数据项 d 之间制作自定义映射。我想尽可能多地使用通用方法，但提供自定义查找：如果 AVL 树类型具有“DateRange”类型的键，那么我可以询问它是否包含 DateTime，它将返回第一个节点DateRange 包含该日期时间。

一般来说，我有：

```
type AvlTree<'k,'d when 'k:comparison and 'd:equality> 
    (
        tree : tree<'k,'d>
    )=

    member this.Contains(k) = contains k tree

let rec contains k = function // appears above. Moved here for clarity of exposition
    | Nil -> None
    | Node(_, l, (kx,dx), r) ->
        if k = kx then Some(dx)
        else
            if k < kx then contains k l
            else contains k r 
```

（我使用[http://en.wikibooks.org/wiki/F_Sharp_Programming/Advanced_Data_Structures#AVL_Trees](http://en.wikibooks.org/wiki/F_Sharp_Programming/Advanced_Data_Structures#AVL_Trees)作为模板）

我正在尝试像这样扩展它：

```
type AvlTree<'k,'d when 'k :> DateRange and 'd:equality> with
    member this.Contains(k:DateTime) = splcontains k **tree** 
```

所以想法是，如果树类型本身具有 DateRange 键类型，并且我们正在对 DateTime 进行查找，那么我们使用特殊的“包含”函数。

这甚至可能吗？如果是这样，我该怎么做。

我的编译器目前在上面突出显示的部分告诉我“未定义值或构造函数“树”。我不明白这一点，因为基本相同的代码在主类型定义中工作正常。您是否不允许访问“with”构造中的数据成员？

# uitableview - 修改 UITableView 自定义单元格内的插座

> ID：11740392
> 
> 赞同：0
> 
> 时间：2012-07-31T12:45:25.987
> 
> 标签：uitableview, iboutlet

我有一个自定义 UITableViewCell，它有 2 个 UITextFields 和一个`UIButton`. 文本字段在`cell:ForRow:AtIndexPath:`方法中设置。我需要的是`UIButton`动态改变它的不透明度，而不必重新加载整个表格视图。我在想类似的东西`cellForRowAtIndexPath:`，但是如何访问这个单元格中的插座？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:51:16.753

当您在 cellForRowAtIndexPath: 中创建单元格时，只需在代码中维护一个指向它的指针。如果该按钮位于每个单元格上，那么您只需创建一组按钮，以便您可以轻松访问所需单元格的按钮。

```
UIButton *cellButton = [[UIButton alloc] init];
[allCellButtons addObject:cellButton]; 
```

# javascript - Primefaces 布局组件未在 jQuery 就绪功能上完成

> ID：11740405
> 
> 赞同：1
> 
> 时间：2012-07-31T12:46:13.590
> 
> 标签：javascript, jquery, jsf-2, primefaces, facelets

我正在尝试使用 primefaces 布局组件来布局我的视图，但是当我使用 jQuery 就绪功能时，布局仍未创建，我无法确定布局中心的实际大小。布局组件是否提供了我可以在 javascript 中捕获的任何事件？不会引发调整大小事件。

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:32:07.097

将您的脚本放在布局组件之后。

# php - Soundcloud API (PHP) 客户端 ID 验证

> ID：11740407
> 
> 赞同：1
> 
> 时间：2012-07-31T12:46:21.790
> 
> 标签：php, api, soundcloud, clientid

这可能是一个非常简单的答案，但我不熟悉 Soundcloud API，所以任何帮助将不胜感激。

我正在尝试使用 PHP 访问 Soundcloud API 以访问用户详细信息。我通过我的个人soundcloud帐户激活我的应用程序获得了soundcloud CLIENT_ID，但在访问其他公共用户信息时似乎不起作用。

**每个用户的 CLIENT_ID 是否会发生变化？**

**应用程序是否需要被每个用户验证/接受才能访问歌曲列表等信息……（或者可以验证一次）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:55:49.527

`CLIENT_ID`标识您的应用程序。包含 a 的请求`CLIENT_ID`可以读取任何公共信息。用户信息的子集仅通过`CLIENT_ID`. 例如，`URI`：

```
http://api.soundcloud.com/users/12840173.json?client_id=A_CLIENT_ID 
```

将返回以下 JSON：

```
{
  id: 12840173
  kind: user
  permalink: paultest
  username: paultest
  uri: http://api.soundcloud.com/users/12840173
  permalink_url: http://soundcloud.com/paultest
  avatar_url: http://i1.sndcdn.com/avatars-000015469869-jcyh92-large.jpg?330b92d
  country: Canada
  full_name: Paul Osman
  description: null
  city: Toronto
  discogs_name: null
  myspace_name: null
  website: null
  website_title: null
  online: true
  track_count: 17
  playlist_count: 4
  public_favorites_count: 1
  followers_count: 1
  followings_count: 1
} 
```

为了访问非公开信息（例如私人曲目、帐户计划等），您必须让用户授权您的应用程序。有关我们的 OAuth 实施的更多信息，请参阅[授权服务器端 Web 应用程序的文档](http://developers.soundcloud.com/docs#server-side)。

希望有帮助！

# android - android中的日期检索

> ID：11740408
> 
> 赞同：0
> 
> 时间：2012-07-31T12:46:23.020
> 
> 标签：android, date

在我的应用程序中，我有 3 个文本视图水平排列，第一个上一个图像，第二个日期，第三个下一个图像。现在，当我单击第一个文本视图时，我应该显示上个月，（它的打印）当我再次单击时意味着它应该转到本月的前第二个月，这应该继续..但是当我点击第二次时，它是上个月的第一个月，它不会倒退..请帮助我。提前谢谢..

这是我的代码：

```
prvmon.setOnClickListener(new View.OnClickListener() 
    {       
        @Override
        public void onClick(View arg0) 
        {
            // TODO Auto-generated method stub
            System.out.println("Inside left");
            TextView date=(TextView)findViewById(R.id.date);
            Calendar cal= Calendar.getInstance();
            cal.add(cal.MONTH,-1);
            Date date1=cal.getTime();
            System.out.println("sssssss="+date1);
            cal.setTime(date1);
            SimpleDateFormat month_date = new SimpleDateFormat("MMMMM yyyy");
            String month_name = month_date.format(cal.getTime());  
            date.setText(month_name);   
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:56:05.233

原因是您每次都在初始化 Calender 实例。因此，它采用当前日期/时间实例。因此，最好一次性初始化并再次使用它。全局声明它并在`onCreate()`.

```
Calendar calendar = null;

protected void onCreate(Bundle savedInstanceState){

calendar = Calendar.getInstance();
...
} 
```

`onClick()`现在，在您的活动中使用此日历实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:51:27.910

```
Date date1=cal.getTime(); 
```

您总是将其设置为相同的时间并“回到过去的一个月”。因此，在onClick 之外定义您的Date date1=cal.getTime() 或跟踪您需要减去多少个月，例如在onClick() 的末尾增加一些值。

编辑：

好的，让我们再看看你的代码

```
final int clicks = 0; //we'll use this to track clicks
prvmon.setOnClickListener(new View.OnClickListener() 
{       
    @Override
    public void onClick(View arg0) 
    {
        int monthsToGo = --clicks;
        // TODO Auto-generated method stub
        System.out.println("Inside left");
        TextView date=(TextView)findViewById(R.id.date);
        Calendar cal= Calendar.getInstance();
        cal.add(cal.MONTH, monthsToGo); //now it'll deduce -1 then -2 etc...
        Date date1=cal.getTime();
        System.out.println("sssssss="+date1);
        cal.setTime(date1);
        SimpleDateFormat month_date = new SimpleDateFormat("MMMMM yyyy");
        String month_name = month_date.format(cal.getTime());  
        date.setText(month_name);   
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:08:31.643

可能是一个完整的例子会有所帮助：

```
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MonthActivity extends Activity {

    private Calendar calendar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.test);

        calendar = Calendar.getInstance();
        calendar.setTime(new Date());

        final TextView textView = (TextView) findViewById(R.id.dateTextView);
        updateTextView(textView);

        Button prev = (Button) findViewById(R.id.prevCmd);
        prev.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                calendar.add(Calendar.MONTH, -1);
                updateTextView(textView);

            }
        });

        Button next = (Button) findViewById(R.id.nextCmd);
        next.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                calendar.add(Calendar.MONTH, 1);
                updateTextView(textView);

            }
        });
    }

    private void updateTextView(TextView textView) {
        textView.setText(""
                + calendar.getDisplayName(Calendar.MONTH, Calendar.SHORT,
                        Locale.getDefault()));

    }
} 
```

和布局 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout12"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/prevCmd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text=" &lt; " />

    <TextView
        android:id="@+id/dateTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/nextCmd"
        android:layout_toRightOf="@+id/prevCmd"
        android:gravity="center_vertical|center_horizontal"
        android:paddingTop="8dp"
        android:text="Jul"
        android:textColor="#ffffff"
        android:textSize="20dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/nextCmd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text=" > " />

</RelativeLayout> 
```

# javascript - 类似于 C++ 的 javascript 承诺和期货

> ID：11740410
> 
> 赞同：0
> 
> 时间：2012-07-31T12:46:32.357
> 
> 标签：javascript, html, web-worker, future

是否有任何 JavaScript 库提供语法上类似于 C++ 的承诺和期货。基本上我们想在 webworkers 中使用它们，我不想要回调接口。我希望网络工作者阻止未来并在 UI 线程设置未来的值时继续。我已经查看了每一个可能的承诺和未来的库，但每件事都需要回调，我们的代码已经是一团糟，我们不想让它进一步复杂化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:32:39.043

[http://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/ses-promise.js](http://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/ses-promise.js)

> 实现 SES/ES5 的承诺。将 Q 导出到全局范围。
> 
> 主要取自 Tyler Close 的 ref_send 实现，并添加了一个商标表来支持函数的承诺。

顺便说一句，Mark Miller 正在编写 JavaScript 的并发模型，并为该语言的未来版本添加带有语法糖的最终发送语义。来自[http://wiki.ecmascript.org/doku.php?id=strawman:concurrency](http://wiki.ecmascript.org/doku.php?id=strawman:concurrency)

> 1.  现实：将 JavaScript 的事实上的并发模型编码和形式化为法理模型。
> 2.  Promises：一种对`(Q(p).post(), Q(p).get())`可能无法同步访问的对象（例如远程对象）进行异步请求的方法。 `(Q(p).when())`通过将回调注册为第一类值的能力，减轻本地事件循环编程的负担。 `(Q.async, yield:)`用于隐式注册承诺的浅层延续。
> 3.  语法糖。中缀“！” 运算符：“.”的最终模拟，用于使最终请求看起来更像即时请求。
> 4.  `(Q.makePromise())`Promise 扩展机制，以便 Promise 处理程序可以将本地 Promise 操作转换为远程消息。传输独立性：使用远程对象消息作为对称抽象层，隐藏上面列出的各种传输以及服务器到服务器 TCP 和 UDP 传输之间令人讨厌的差异。
> 5.  `(Vat())`一种事件循环生成机制，用于生成与生成它的事件循环同时运行的新事件循环。Worker 独立性：使用 Vat API 作为抽象层，围绕在浏览器上生成 worker 或在服务器上生成进程。
> 6.  `(Vat.evalLater(), where())`将 JavaScript 本身用作移动代码，因此事件循环可以安全地将新行为注入到其他事件循环中。Async-PGAS：为异步分区全局地址空间模型的表达提供分布式模拟。

# eclipse - STS 是否支持本地 Groovy 安装？

> ID：11740411
> 
> 赞同：3
> 
> 时间：2012-07-31T12:46:33.090
> 
> 标签：eclipse, grails, groovy, ide

到目前为止，我一直在使用 Notepad++ 使用 Groovy+Grails 编写应用程序。我不喜欢 IDE 挡住我的路，特别是因为显然 STS 确信它必须在包含电池的情况下做所有事情，这意味着通过 Groovy-Eclipse 插件捆绑它自己的 Groovy 安装。我正在处理的一个项目现在变得如此之大，因此最好切换到 IDE，但如果我可以让 STS 指向我的本地 Groovy 安装，就像使用 Grails 插件一样，那将是一个更大的优势。

如何让 STS 使用本地 Groovy 编译器而不是其内置编译器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:45:24.717

Groovy-Eclipse 与 Eclipse 的 Java 编译器以及 Groovy 的编译器有很深的挂钩。事实上，它附带了两者的补丁版本。这是您可以获得增量编译、急切解析、内容辅助、联合编译（不使用存根编译器）等的方式。因此，Groovy-Eclipse 不支持外部编译器。

# c++ - 有没有办法获取有关 boost::flyweight 内部容器的信息？

> ID：11740412
> 
> 赞同：2
> 
> 时间：2012-07-31T12:46:33.823
> 
> 标签：c++, boost, boost-flyweight

使用 boost::flyweight 应该可以帮助我节省内存。我正在寻找对解决方案的有效性进行定量测量的方法。

有没有办法获取内部容器的 size() ？如果它是基于散列的享元，有没有办法获取有关存储桶状态的信息？哈希冲突等？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:06:26.070

我之前的回答没有提供足够的细节，解决方案真的没有那么简单。这是一个完整的片段，展示了如何做到这一点：

```
#include <boost/flyweight/factory_tag.hpp>
#include <boost/flyweight/hashed_factory_fwd.hpp>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/mpl/aux_/lambda_support.hpp>
#include <boost/mpl/if.hpp>

class bucket_query
{
public:
  typedef std::size_t size_type;

  virtual size_type bucket_count()const=0;
  virtual size_type max_bucket_count()const=0;
  virtual size_type bucket_size(size_type n)const=0;
};

static bucket_query* bucket_query_ptr=0;

template<
  typename Entry,typename Key,
  typename Hash=boost::mpl::na,typename Pred=boost::mpl::na,
  typename Allocator=boost::mpl::na
>
class accessible_hashed_factory_class:
  public boost::flyweights::factory_marker,
  public bucket_query
{
  struct index_list:
    boost::mpl::vector1<
      boost::multi_index::hashed_unique<
        boost::multi_index::identity<Entry>,
        typename boost::mpl::if_<
          boost::mpl::is_na<Hash>,
          boost::hash<Key>,
          Hash
        >::type,
        typename boost::mpl::if_<
          boost::mpl::is_na<Pred>,
          std::equal_to<Key>,
          Pred
        >::type
      >
    >
  {};

  typedef boost::multi_index::multi_index_container<
    Entry,
    index_list,
    typename boost::mpl::if_<
      boost::mpl::is_na<Allocator>,
      std::allocator<Entry>,
      Allocator
    >::type
  > container_type;

public:
  typedef const Entry* handle_type;

  accessible_hashed_factory_class(){bucket_query_ptr=this;}

  handle_type insert(const Entry& x)
  {
    return &*cont.insert(x).first;
  }

  void erase(handle_type h)
  {
    cont.erase(cont.iterator_to(*h));
  }

  static const Entry& entry(handle_type h){return *h;}

  typedef std::size_t size_type;

  virtual size_type bucket_count()const{return cont.bucket_count();}
  virtual size_type max_bucket_count()const{return cont.max_bucket_count();}
  virtual size_type bucket_size(size_type n)const{return cont.bucket_size(n);}

private:  
  container_type cont;

public:
  typedef accessible_hashed_factory_class type;
  BOOST_MPL_AUX_LAMBDA_SUPPORT(
    5,accessible_hashed_factory_class,(Entry,Key,Hash,Pred,Allocator))
};

template<
  typename Hash=boost::mpl::na,typename Pred=boost::mpl::na,
  typename Allocator=boost::mpl::na
  BOOST_FLYWEIGHT_NOT_A_PLACEHOLDER_EXPRESSION
>
struct accessible_hashed_factory:boost::flyweights::factory_marker
{
  template<typename Entry,typename Key>
  struct apply:
    boost::mpl::apply2<
      accessible_hashed_factory_class<
        boost::mpl::_1,boost::mpl::_2,Hash,Pred,Allocator
      >,
      Entry,Key
    >
  {};
};

/* testing */

#include <boost/flyweight.hpp>
#include <iostream>
#include <string>

int main()
{
  typedef boost::flyweight<std::string,accessible_hashed_factory<> > string_fw;

  string_fw s1("hello"),s2("hello"),s3("bye");

  std::cout<<"number of buckets: "<<bucket_query_ptr->bucket_count()<<std::endl;
} 
```

这个想法是：`accessible_hashed_factory_class`通过`bucket_query_ptr`公开一个用于咨询存储桶计数等的接口来自动注册自己。（`bucket_query`）您可以根据需要进行调整和扩展。该解决方案远非优雅，但可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:07:21.047

查看[源代码](http://www.boost.org/boost/flyweight/hashed_factory.hpp)：`boost::flyweight::hashed_factory_class`您可以克隆代码以派生您自己的用户定义工厂并提供`const`对内部容器的公共（首选）访问。

# biztalk - 在 biztalk 2010 中调试编排

> ID：11740419
> 
> 赞同：3
> 
> 时间：2012-07-31T12:46:51.040
> 
> 标签：biztalk, biztalk-2010, biztalk-orchestrations

我正在编排将数据从一个 SQL Server 数据库发送到另一个数据库。我能够接收数据但无法将其发送到另一个数据库。我做了一个发送端口来测试我得到的输入。我知道我没有从源模式中获取正确的数据。我已经从 Visual Studio 2010 测试了地图，它工作正常。但是我在事件查看器中遇到以下错误：

```
The adapter "SQL" raised an error message. Details "HRESULT="0x80040e14"     
Description="SQLOLEDB Error Description: Empty update, no updatable rows found  Transaction aborted "

 <Root xmlns:ns00="urn:schemas-microsoft-com:xml-updategram">
      <?MSSQLError HResult="0x80040e14" Source="Microsoft OLE DB Provider for SQL Server" Description="SQLOLEDB Error Description: Empty update, no updatable rows found  Transaction aborted "?>
 </Root>". 
```

我想调试编排。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:25:25.537

通过管理控制台，您可以查看暂停的编排并设置断点。编排的未来运行将在断点处保持，并再次通过管理控制台，您可以附加到编排并查看消息内容等信息。

# mysql - 为输出链接的两个存储过程

> ID：11740428
> 
> 赞同：0
> 
> 时间：2012-07-31T12:47:36.747
> 
> 标签：mysql

我有两个程序 p1 和 p2。我的 p1 给了我 4 列输出。我希望 p1 中的单个列在 where 条件下的选择查询输出中的 p2 过程中使用。我正在使用mysql，请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:51:33.477

运行第一个存储过程。

从结果中获取所需的列值并将其存储在变量中。

如果变量中有可用的有效值，则在调用第二个存储过程时使用该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:52:34.177

用这个：

```
$i=0;
while($row = mysql_fetch_array($result))
{
$smt[i]=$row['column_name'];
i++;
} 
```

现在该列存储在数组 $smt 中。

# android - Android中活动之间的3D“立方体”动画

> ID：11740429
> 
> 赞同：3
> 
> 时间：2012-07-31T12:47:38.267
> 
> 标签：android, animation

我需要 Android 活动之间的动画。我试过一些例子，但找不到这样的东西：

![在此处输入图像描述](../Images/63efe3d11e2b1de6888c3dde579147e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T09:14:38.030

导入[此](https://github.com/jfeinstein10/JazzyViewPager)项目并在项目属性中标记为库并将其添加到您的项目中

像这样创建您的活动：

```
package com.example.testcube;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;

import com.jfeinstein.jazzyviewpager.JazzyViewPager;
import com.jfeinstein.jazzyviewpager.JazzyViewPager.TransitionEffect;

public class MainActivity extends Activity {

    private JazzyViewPager vpage;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Set window fullscreen and remove title bar, and force landscape orientation
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);
        setupJazziness(TransitionEffect.CubeOut);
    }

    private void setupJazziness(TransitionEffect effect) {
        vpage = (JazzyViewPager) findViewById(R.id.jazzy_pager);
        vpage.setTransitionEffect(effect);
        vpage.setAdapter(new MainAdapter());
        vpage.setPageMargin(0);
    }

    private class MainAdapter extends PagerAdapter {
        @Override
        public Object instantiateItem(ViewGroup container, final int position) {
            TextView text = new TextView(MainActivity.this);
            text.setGravity(Gravity.CENTER);
            text.setTextSize(30);
            text.setTextColor(Color.WHITE);
            text.setText("Page " + position);
            text.setPadding(30, 30, 30, 30);
            int bg = Color.rgb((int) Math.floor(Math.random()*128)+64, 
                    (int) Math.floor(Math.random()*128)+64,
                    (int) Math.floor(Math.random()*128)+64);
            text.setBackgroundColor(bg);
            container.addView(text, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
            vpage.setObjectForPosition(text, position);
            return text;
        }
        @Override
        public void destroyItem(ViewGroup container, int position, Object obj) {
            container.removeView((View) obj);
        }
        @Override
        public int getCount() {
            return 10;
        }
        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == arg1;
        }       
    }

} 
```

在您的活动中，XML 应该是

```
<com.jfeinstein.jazzyviewpager.JazzyViewPager
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:id="@+id/jazzy_pager"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

![图片](../Images/fbcd4e71390669a1ce330650ef7f3667.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:22:19.247

[`overridePendingTransition()`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)您可以使用该方法实现自己的 3D 立方体动画。请参阅[Android 中的 3D 立方体过渡](https://stackoverflow.com/questions/5339907/3d-cube-transition-in-android)。

`Transition3d`调用的API 演示中有两个演示`Rotate3dAnimation`，可以作为参考来了解如何实现此动画效果。以下博客有一个基于这些 APi 演示的 3D Activity 转换示例：[Android startActivity 旋转 3d 动画：ActivitySwitcher](http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher/)。

# linux - Inotify 兼容的Shell 脚本监控shell 某个目录

> ID：11740430
> 
> 赞同：0
> 
> 时间：2012-07-31T12:47:40.780
> 
> 标签：linux, shell, monitor, inotify

这是堆栈溢出中的第一个问题。需要一个 inotify 兼容的脚本编写来监视某个目录，如果在其中创建了任何新文件/文件夹，请将这些文件复制到另一个文件夹。我需要脚本来不断监控变化，而不是定期运行。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:07:29.230

您可以`inotifywait`从`inotify-tools`页面中使用 来构建类似的东西。一个典型的用途：

```
inotifywait -m /tmp | while read path events name; do
  echo "Now I am going to do something with $name in directory $path."
done 
```

有很多选项可以控制`inotifywait`操作方式；有关详细信息，请参阅手册页。

# jquery - 根据动态内容动态调整 iframe 高度

> ID：11740435
> 
> 赞同：3
> 
> 时间：2012-07-31T12:47:54.463
> 
> 标签：jquery, ajax, iframe, dynamic, height

首先，我会给你我的页面结构：

```
<html>
<body>
    <div>
    <iframe>
        <div id="div1">
        </div>
    </iframe>
    </div>
</body>
</html> 
```

如果我事先知道 的大小`div1`，这里就没有问题了。但是，我正在`div1`使用 jquery ajax 动态添加内容，所以我无法预先设置`<iframe>`'s 的高度。

我已经尝试了在其他线程中找到的解决方案，方法是在其中添加一些脚本，`onload`但`<iframe>`它没有用，因为内容是动态变化的，无需重新加载页面。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T17:45:13.137

在您的子页面中，在动态生成的代码完成加载后，插入以下代码：

```
// Rsize containing iframe to proper height
parent.parent.resizeIframe($('html').height()); 
```

然后，在父页面中，包含这个函数：

```
function resizeIframe(newHgt)
{
    $('#iframeid').height((parseInt(newHgt)+75)+'px');
} 
```

这将使您到达您需要的位置，但我要解决的问题是如何在动态生成的代码完成加载*后确定 iframe 内容的大小......“全部来自父页面”。*

无论如何，希望这对你有帮助。

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:22:56.153

我不确定你为什么要在这里使用 iframe。但也许你可以尝试使用

[http://sonspring.com/journal/jquery-iframe-sizing](http://sonspring.com/journal/jquery-iframe-sizing)

# python - 在目录树中分层替换所有文件中的一个字符的所有实例

> ID：11740438
> 
> 赞同：0
> 
> 时间：2012-07-31T12:47:58.683
> 
> 标签：python

所以命令行看起来像：

./replace.py

当前目录可能是 /home/user before = "\" after = '/"

这意味着在所有文件中用 / 正斜杠替换反斜杠。现在唯一发生这种替换的地方是 LINE 包含文本“路径”

这是我所拥有的，它实际上确实替换了文本，但不是 / 或 \

```
#!/usr/bin/python
import os
import re
import sys

#print f.readline().replace('\\','/')
#replace_extensions = []
replace_extensions = [".tst"]

def try_to_replace(fname):
    if replace_extensions:
        return fname.lower().endswith(replace_extensions)
    return True

def file_replace(fname, pat, s_after):
    with open(fname) as f:
        if not any(re.search(pat, line) for line in f):
            return

    with open(fname) as f:
        out_fname = fname + ".tmp"
        out = open(out_fname, "w")
        for line in f:
            out.write(re.sub(pat, s_after, line))
        out.close()
        os.rename(out_fname, fname)

def mass_replace(dir_name, s_before, s_after):
    pat = re.compile(s_before)
    for dirpath, dirnames, filenames in os.walk(dir_name):
        for fname in filenames:
            if try_to_replace(fname):
                fullname = os.path.join(dirpath, fname)
                file_replace(fullname, pat, s_after)

if len(sys.argv) != 4:
    u = "Usage: mass_replace <dir_name> <string_before> <string_after>\n"
    sys.stderr.write(u)
    sys.exit(1)

mass_replace(sys.argv[1], sys.argv[2], sys.argv[3]) 
```

我得到错误：

```
./mass_replace.py test1 '\\' '/'
Traceback (most recent call last):
  File "./mass_replace.py", line 43, in <module>
    mass_replace(sys.argv[1], sys.argv[2], sys.argv[3])
  File "./mass_replace.py", line 34, in mass_replace
    if try_to_replace(fname):
  File "./mass_replace.py", line 12, in try_to_replace
    return fname.lower().endswith(replace_extensions)
TypeError: expected a character buffer object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:43:13.237

问题是`str.endswith`需要一个字符串；你正在传递一个列表。尝试

```
return any(fname.lower().endswith(extension) for extension in replace_extensions) 
```

实际上，最好使用[`os.path.splitext`](http://docs.python.org/library/os.path.html#os.path.splitext)：

```
return os.path.splitext(fname.lower())[1] in replace_extensions 
```

否则，您的代码看起来不错，尽管您最好也`with`为输出文件使用表达式：

```
 with open(out_fname, "w") as out:
        for line in f:
            out.write(re.sub(pat, s_after, line)) 
```

# ruby - 在 Ruby 中读取 CSV 时如何跳过标题行？

> ID：11740439
> 
> 赞同：28
> 
> 时间：2012-07-31T12:47:59.327
> 
> 标签：ruby, csv

Ruby 的[`CSV`](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-foreach)类使得遍历每一行变得非常容易：

```
CSV.foreach(file) { |row| puts row } 
```

但是，这总是包括标题行，所以我会得到输出：

```
header1, header2
foo, bar
baz, yak 
```

我不想要标题。现在，当我打电话时……</p>

```
CSV.foreach(file, :headers => true) 
```

我得到这个结果：

```
#<CSV::Row:0x10112e510
    @header_row = false,
    attr_reader :row = [
        [0] [
            [0] "header1",
            [1] "foo"
        ],
        [1] [
            [0] "header2",
            [1] "bar"
        ]
    ]
> 
```

当然，因为文档说：

> 此设置导致 #shift 以 CSV::Row 对象而不是数组的形式返回行

但是，**如何跳过标题行，将该行作为简单数组返回？**我不希望`CSV::Row`返回复杂的对象。

我绝对不想这样做：

```
first = true
CSV.foreach(file) do |row|
  if first
    puts row
    first = false
  else
    # code for other rows
  end
end 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T12:57:04.220

查看 CSV 类中的[**#shift**](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-i-shift)：

*包装字符串和 IO 的主要读取方法，从数据源中提取单行，解析并作为字段数组返回（如果不使用标题行）*

一个例子：

```
require 'csv'

# CSV FILE
# name, surname, location
# Mark, Needham, Sydney
# David, Smith, London

def parse_csv_file_for_names(path_to_csv)
  names = []  
  csv_contents = CSV.read(path_to_csv)
  csv_contents.shift
  csv_contents.each do |row|
    names << row[0]
  end
  return names
end 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-31T21:08:21.640

您可能需要考虑`CSV.parse(csv_file, { :headers => false })`并传递一个块，如此[处所述](https://stackoverflow.com/questions/5936204/ignore-header-line-when-parsing-csv-file)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-16T23:30:50.217

忽略标题的一种很酷的方法是将其作为数组读取并忽略第一行：

```
data = CSV.read("dataset.csv")[1 .. -1]
# => [["first_row", "with data"],
      ["second_row", "and more data"],
      ...
      ["last_row", "finally"]] 
```

该`:headers => false`方法的问题是`CSV`不会尝试将第一行作为标题读取，而是将其视为数据的一部分。所以，基本上，你有一个无用的第一行。

# database - 使用 C# 和 MS Access Oledb 在 Windows 窗体中将表从一个数据库复制到另一个数据库

> ID：11740448
> 
> 赞同：1
> 
> 时间：2012-07-31T12:48:05.067
> 
> 标签：database, ms-access, datatable, copy, oledb

如何将表从一个数据库复制到另一个，我正在.NET 中使用 c# 开发一个 Windows 应用程序。复制必须由应用程序完成。从database1中的填充表中提取数据到数据库2中的一个空表中。我正在使用access db，Oledbconnection。我虽然找到了一些关于 sql server 的答案，但并没有真正的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:53:29.540

您可以参考 SQL 中的第二个 DB 并针对与第一个 mdb/accdb 的连接执行：

联系

```
using System.Data.OleDb;
<...>
string ConnString =
     @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Z:\Docs\first.accdb";
OleDbConnection conn = new OleDbConnection(ConnString); 
```

SQL

```
INSERT INTO Contacts ( ID, [A Text] ) IN 'z:\docs\New.accdb'
SELECT Contacts.ID, Contacts.[A Text]
FROM Contacts; 
```

或者

```
INSERT INTO [;DATABASE=Z:\Docs\new.accdb].Contacts ( ID, [A Text] )
SELECT Contacts.ID, Contacts.[A Text]
FROM Contacts; 
```

或者创建一个表：

```
SELECT Contacts.ID, Contacts.[A Text] INTO Contacts IN 'z:\docs\New.accdb'
FROM Contacts; 
```

# c# - 如何通过其 Uri 在浏览器中打开 html 文档

> ID：11740457
> 
> 赞同：1
> 
> 时间：2012-07-31T12:48:28.063
> 
> 标签：c#, azure, azure-storage

我在 windows azure blob 中保存了一个 html 文档。现在我试图通过将其 URI 放在地址栏中来打开该文档。但是浏览器将我重定向到轨道下载器以下载该文档。我如何通过它的 blob uri 打开它？我的文档 blob uri：

```
https://xxxxxx.blob.core.windows.net/user/name.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:57:26.517

您需要将该文件的内容类型更改为**html**。这可以使用[Azure 存储资源管理器](http://davidpallmann.blogspot.be/2011/10/cloud-gourmet-30-minute-meal-static-web.html)等工具（参见第 3D 点）或使用[SDK](http://msdn.microsoft.com/en-us/library/windowsazure/hh225342.aspx) /REST API。

# sql - Sql，在转义 where 条件时获取组的平均值

> ID：11740458
> 
> 赞同：4
> 
> 时间：2012-07-31T12:48:35.427
> 
> 标签：sql, group-by, average

请原谅我的英语，但没有人能用法语回答;-)

我正在做这个请求：

```
SELECT AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt_id_p, 
       catalog.id_marchand, catalog.id_product, catalog.price AS c_price,
       catalog.img_src, tyd.login AS tyd_l
  FROM catalog 
 INNER JOIN tyd ON catalog.id_marchand = tyd.id_marchand 
               AND catalog.id_product = tyd.id_product
 WHERE tyd.login = "user1@tyd.fr"
   AND tyd.step = "0"
 GROUP BY catalog.id_product, catalog.id_marchand 
```

但是当然 AVG & COUNT 函数不起作用，因为我的条件只有一行。

我想做的仍然是获得我独特的线路，但让 AVG 和 COUNT 功能正常工作。我可以用两个查询来做，但我更喜欢做一个。

我希望你能帮助我。

谢谢。

PS：我在答案3中提出了另一个问题。我生气了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:50:11.650

尝试

```
SELECT 
    AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt_id_p,
    catalog.id_marchand, catalog.id_product, catalog.price AS c_price, 
    catalog.img_src, tyd.login AS tyd_l
FROM catalog 
INNER JOIN tyd ON catalog.id_marchand = tyd.id_marchand 
              AND catalog.id_product =   tyd.id_product
              AND tyd.step = "0" 
GROUP BY catalog.id_product, catalog.id_marchand
HAVING tyd.login = "user1@tyd.fr" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:06:26.947

您应该在 GROUP BY 子句中包含所有不属于聚合函数的列。

```
SELECT AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt_id_p,  
       catalog.id_marchand, catalog.id_product, catalog.price AS c_price, 
       catalog.img_src, tyd.login AS tyd_l 
  FROM catalog  
 INNER JOIN tyd ON catalog.id_marchand = tyd.id_marchand  
               AND catalog.id_product = tyd.id_product 
 WHERE tyd.login = "user1@tyd.fr" 
   AND tyd.step = "0" 
 GROUP BY catalog.id_marchand, catalog.id_product, catalog.price AS c_price, 
       catalog.img_src, tyd.login 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:27:31.930

很抱歉再问，但我使用相同的请求加入另一个表，如下所示：

```
 SELECT AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt, tyd.id_marchand, tyd.id_product, catalog.price AS c_price, tyd.price AS t_price, tyd.amount AS t_am, pro_tyd.amount AS p_am, pro_tyd.price AS p_price, catalog.img_src,  tyd.step, tyd.login AS tyd_l
    FROM catalog 
    INNER JOIN tyd
    ON catalog.id_marchand = tyd.id_marchand 
    AND catalog.id_product =   tyd.id_product
    AND tyd.step = "1" 
    INNER JOIN pro_tyd 
    ON tyd.id_marchand = pro_tyd.id_marchand 
    AND tyd.id_product = pro_tyd.id_product
    GROUP BY catalog.id_product, catalog.id_marchand
    HAVING tyd.login = "user1@tyd.fr" 
```

并且它仅在 tyd.login = "user3@tyd.fr" 这是较低的 id 时有效。不适用于 user1 或 user2...我只是不知道为什么...！

这是表格：

id / id_marchand / id_product / login / price / amount / delay / step / time

29 / 1 / 1 / user3@tyd.fr / 344 / 1 / 0 / 1 / 1343297500

120 / 1 / 1 /user2@tyd.fr / 54 / 1 / 0 / 1 / 1343297504

109 / 1 / 1 / user10@tyd.fr / 34 / 1 / 0 / 1 / 1343298598

当 HAVING tyd.login = "user3@tyd.fr" 它工作得很好。当 user1 或 user2 我得到 0 行。

# vba - VBA：Application.OnTime 的可靠计时？

> ID：11740461
> 
> 赞同：2
> 
> 时间：2012-07-31T12:48:57.567
> 
> 标签：vba, timer, ontime

我需要每秒运行一个大程序（RunLargeSub），这个程序大约需要0.5s才能完成。我目前正在使用 Application.OnTime，但这不会导致 RunLargeSub 每 ~1.5s 被调用一次吗？是否可以将其修复为 1.0s？

```
Sub Update()
    RunLargeSub
    NextTick = Now + TimeValue("00:00:01")
    Application.OnTime NextTick, "Update"
End Sub

Sub Stop()
    On Error Resume Next
    Application.OnTime NextTick, "UpdateClock", , False
    On Error GoTo 0
End Sub 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:02:42.000

在 RunLargeSub 之后声明 NextTick。这就是为什么它需要1.5s。如果您在 RunLargeSub 之前声明它，则将需要 1 秒。但是，如果 RunLargeSub 花费超过 1 秒，您就会遇到问题，因为主子程序将停止执行。我不确定 onTime 是否接受几分之一秒，但你可以这样做：

```
Sub Update()
    RunLargeSub
    NextTick = Now + TimeValue("00:00:01")/2
    Application.OnTime NextTick, "Update"
End Sub 
```

它应该运行 RunLargeSub 并在半秒内再次调用 sub。

# c++ - 当你通过引用返回对象时，你什么时候需要担心对象会被破坏？

> ID：11740463
> 
> 赞同：1
> 
> 时间：2012-07-31T12:49:02.200
> 
> 标签：c++

您有以下内容：

```
Person& getPersonByName(string name); 
```

在什么情况下，您需要担心 getPersonByName 的返回人员会在方法结束后立即被破坏，因此调用方方法将处理被破坏的数据？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:51:11.277

你应该。

例如`dangling reference`：

```
Person &getPerson()
{
    Person p;
    return p;
} //p is destroyed here 
```

但这没关系：

```
Person &getPerson()
{
    static Person p;
    return p;
} 
```

您还可以将 a 返回`reference`到 an 的某个内部变量，并且可以在销毁`object`之前使用它：`object`

```
class Foo
{
public:
    int & getA() {return a;}

private:
    int a;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:51:55.423

如果`Person`函数返回时不会被销毁。例子包括

*   静态存储持续时间变量
*   返回函数是其方法的类的成员变量。

# asp.net-mvc - ASP MVC 3：ViewModels 中的依赖注入是个好主意吗？

> ID：11740466
> 
> 赞同：3
> 
> 时间：2012-07-31T12:49:06.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3, design-patterns

我正面临 mvc 3 应用程序的设计问题。我有一个具有类别列表的视图模型 ProductCreateModel。

现在我在控制器中设置类别列表，但我想在 ProductCreateModel 构造函数中检测数据源是否是个好主意。

你认为视图模型应该是胖模型，也知道从数据源读取依赖数据吗？...或者这是一个控制器的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T12:52:24.587

我更喜欢对数据层一无所知的苗条视图模型。它们更容易管理（根据我的经验）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T12:54:01.217

我认为视图模型应该是轻型模型，它们读取相关数据的唯一方法应该是“父”对象上的属性，即它们实际包装的模型。

大多数时候，我的视图模型只是具有属性的类，所有逻辑都在控制器或服务类中（如果我们正在谈论很多本来会放在控制器中的逻辑）。所有这一切都是为了更容易测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-06T18:18:07.500

当我学习 MVC 时，我被告知“经验法则”是 Skinny Controllers、Fat Models、Dumb Views。许多 MVC 开发人员犯的一个错误是胖控制器（太多逻辑）、瘦模型（基本上是用于保存数据的 POCO 类）和智能视图（一堆带有 If this、Else that 等的 Razor 语法）

多年来，我一直坚持使用 Skinny Controllers、Fat Models、Dumb 视图方法，它对我来说效果很好。现在，考虑到这与模型而不是视图模型有关。通常你的模型应该在一个完全不同的层（即项目或文件夹）。另一方面，ViewModel 应该相当简单。这使它们更容易测试，并且更可重用。如果您发现需要某种服务、repo 或其他依赖项来构建您的 ViewModel，那么您可能应该将该逻辑抽象为某种 Composer 类。过去，如果需要，我使用了一个实现 IViewModelManager 的 ViewModelManager 来组合我的 ViewModel。通过这种方式，您可以将 IViewModelManager 注入您的控制器，并使用它来构建您的 ViewModel。然后，在您的 ViewModelManager 实现中，

这种方法肯定需要更多的代码和更多的类，但它会给您提供良好的粒度和分离度，并支持 DRY 原则和单一职责。

快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T18:32:01.673

作为一般规则，我认为您不想这样做。

作为该规则的一个例外，我在创建下拉菜单时开始在我的编辑器模板中使用一点服务定位器。我已经经历了多种填充下拉列表的方法（通常，将集合添加到视图模型或视图数据中的某种形式）。我看到一个视频，其中在编辑器模板中使用了 SL 来获取数据，然后转换为选择列表。我最初的反应是“啊，真的吗？”，但是，我越想越觉得有道理。

# javascript - 如何使用模块模式在 javascript 中扩展事件委托？

> ID：11740467
> 
> 赞同：1
> 
> 时间：2012-07-31T12:49:07.580
> 
> 标签：javascript, model-view-controller, event-delegation, module-pattern

我在 JavaScript 中使用模块模式。我有一个文件说 controller.js 处理事件。问题是我想使用子模块。但是由于事件是在 controller.js 中处理的，如果出现任何事件，我将如何处理子模块中的事件？
我调度了一个`PAGE_DISPLAYED`从另一个文件中调用的自定义事件，比如 view.js。此事件由 controller.js 侦听，并根据显示的页面执行其他操作，例如绑定特定于该特定页面的附加事件处理程序。如何使用子模块做到这一点。

示例代码：

```
window.KDJ || (window.KDJ = {});    //namespace
KDJ.controller = (function () {
    $(document).off('PAGE_DISPLAYED');
    $(document).on('PAGE_DISPLAYED', function (e, data) {
    switch(data.pageId) {
    case "page1":
        // do something..
        break;
    case "page2":
        // do something..
        break;
    }
    });

    return {
        // exported methods and props..
    };
})(); 
```

如何扩展上述代码和事件委托？或者代码架构是否存在任何限制。

我正在使用 jQuery Mobile 并`PAGE_DISPLAYED`通过监听事件来调度`pagechange`事件：

```
window.KDJ || (window.KDJ = {});    //namespace
KDJ.view = (function () {  
    // ...
    $(document).off('pagechange');
    $(document).on('pagechange', function (e, ui) {
        //...
        $(document).trigger(PAGE_DISPLAYED, {'pageId': loadedPageId, 'key': key});
    });
})(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:01:32.850

好的，我提出了一些可能性，但就可读性而言，我最喜欢的是：

```
window.KDJ || (window.KDJ = {});    //namespace
KDJ.controller = (function () {
    $(document).off('PAGE_DISPLAYED');
    $(document).on('PAGE_DISPLAYED', function (e, data) {

        //Use the Id if it exsits, if not, try to execute the function
        switch(data.pageId) {
            case "page1":
                // do something..
                break;
            case "page2":
                // do something..
                break;
            default: 
                if(data.customFunction)
                    data.customFunction();
                break;
        }

    });

    return {
        // exported methods and props..
    };
})();

KDJ.view = (function () {  
    // ...
    $(document).off('pagechange');

    $(document).on('pagechange', function (e, ui) {

        //the function will be executed
        $(document).trigger(PAGE_DISPLAYED, {
            customFunction = function(ui) {
                console.log("I'm doing something awesome with the ui!");
            }
        });

    });

    $(document).on('pagechange', function (e, ui) {

        //here I'll use the switch
        $(document).trigger(PAGE_DISPLAYED,  {
            'pageId': loadedPageId, 
            'key': key
        });

    });
})(); 
```

[在这里](http://pastebin.com/FFk5wM2s)，您有另一个选项，没有默认值。告诉我是否适合您的需求:)

# android - 如何拦截对 ActionBarSherlock 中“向上”（主页按钮）按钮的单击？

> ID：11740473
> 
> 赞同：2
> 
> 时间：2012-07-31T12:49:21.730
> 
> 标签：android, android-actionbar, actionbarsherlock, android-menu

**我已经使用ActionBar Sherlock**为我的一个项目实现了搜索功能。所以现在我在 ActionBar 上有了搜索编辑文本，就像官方 AB sherlock 项目 repo（在 github 上）的示例中一样：[Collapsible action items](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/CollapsibleActionItem.java)

我的搜索编辑文本正在过滤活动中的 ListView。当用户开始输入某些字符时，ListView 会被过滤。我通过在搜索中添加一个 textWatcher 来做到这一点 编辑文本是这样的：

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(Menu.NONE, SEARCH_ACTION_MENU, 0, "Search")
        .setIcon(R.drawable.ic_search)
        .setActionView(R.layout.search_edittext)
        .setShowAsAction(
            MenuItem.SHOW_AS_ACTION_ALWAYS
                | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    /** We get a reference to the search edit */
    MenuItemWrapper menuItemWrapper = (MenuItemWrapper) menu.getItem(0);
    final EditText searchEdit = (EditText) menuItemWrapper.getActionView();
    /** We add a listener search filter listener */
    searchEdit.addTextChangedListener(filterWatcher); // filterwatcher is a textWatcher
    return true;
  } 
```

当我单击搜索图标时，将显示搜索编辑文本，用户可以开始输入内容。此外，主页按钮显示为“向上主页按钮”（带有左箭头）。

单击此箭头将使搜索文本视图消失，但如果用户已经开始输入内容，则列表视图将被过滤，并且在用户单击主页“向上”后搜索文本视图不再可见时不会重置“ 按钮。

**我的问题是**：如何拦截单击**“向上”**按钮以重置我的列表视图？我认为这是我可以重置列表的唯一方法。

我已经尝试过：

```
@Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case android.R.id.home:
        Log.d(Constants.LOG_TAG, "Home button clicked");
        return true;

      default:
        return super.onOptionsItemSelected(item);
    }
  } 
```

当“主页按钮”显示为“向上”按钮时，它不起作用。

任何帮助，将不胜感激。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:11:28.677

您需要`CollapsibleActionView`在视图上实现才能接收`onActionViewCollapsed()`回调。

您还应该升级到`dev`分支上的 ActionBarSherlock 版本，因为它对在本机操作栏上使用时的可折叠操作项进行了重要修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:55:01.000

它应该与`onOptionsItemSelected`.

确保您正在使用`com.actionbarsherlock.view.MenuItem`.

你也可以`onMenuItemSelected(int featureId, MenuItem item)`以同样的方式使用。

# xml - 查询 xpath, xml

> ID：11740474
> 
> 赞同：1
> 
> 时间：2012-07-31T12:49:23.860
> 
> 标签：xml, xslt, xslt-2.0

我有**输入 XML**文件。如下。

```
<maindocument>
<first>
    <testing>random text</testing>
    <checking>random test</checking>
</first>
<testing>
<testing>sample</testing>
<checking>welcome</checking>
</testing>
<import>
    <downloading>valuable text</downloading>
</import>
</maindocument> 
```

这是我想要的**输出 XML**

```
<maindocument>
<import>
    <doctype>Valuable</doctype>
    <docint>text</docint>
</import>
</maindocument> 
```

当我在 Google 中搜索时，我得到的结果为`XSL:Copy`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:14:34.823

尝试 ...

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy> 
   <xsl:apply-templates select="@*|node()" />
 </xsl:copy> 
</xsl:template>

<xsl:template match="first|testing|checking" />

<xsl:template match="import">
 <xsl:copy> 
  <doctype><xsl:value-of select="substring-before(.,' ')" /></doctype>
  <docint><xsl:value-of select="substring-after(.,' ')" /></docint>  
 </xsl:copy> 
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:21:34.410

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="import">
     <maindocument>
      <xsl:copy>
       <doctype><xsl:value-of select="substring-before(*, ' ')"/></doctype>
       <docint><xsl:value-of select="substring-after(*, ' ')"/></docint>
      </xsl:copy>
     </maindocument>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<maindocument>
    <first>
        <testing>random text</testing>
        <checking>random test</checking>
    </first>
    <testing>
        <testing>sample</testing>
        <checking>welcome</checking>
    </testing>
    <import>
        <downloading>valuable text</downloading>
    </import>
</maindocument> 
```

**产生想要的正确结果：**

```
<maindocument>
   <import>
      <doctype>valuable</doctype>
      <docint>text</docint>
   </import>
</maindocument> 
```

# django - 从标签 django 中解析一个字符串

> ID：11740475
> 
> 赞同：3
> 
> 时间：2012-07-31T12:49:23.867
> 
> 标签：django, parsing, django-templates

我有一个自定义模板标签

```
{% perpage 10 20 30 40 50 %} 
```

用户可以编写自己的数字而不是 10,20 等。此外，这些数字的数量由用户定义。如何解析此标签并读取此数字？我想使用“for”指令

更新：

```
@register.inclusion_tag('pagination/perpageselect.html')
def perpageselect (parser, token):
    """
    Splits the arguments to the perpageselect tag and formats them correctly.
    """
    split = token.split_contents()
    choices = None
    x = 1
    for x in split:
        choices = int(split[x])
    return {'choices': choices} 
```

所以，我有这个功能。我需要从模板标签中获取参数（数字），并将它们转换为整数。然后，我需要制作一个提交表单，以便将 GET 参数等选项传递给 URL`(...&perpage=10)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:56:27.597

从 Django 1.4 开始，您可以定义一个带有位置或关键字参数的[简单标记](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)。您可以在模板中循环浏览这些内容。

```
@register.simple_tag
def perpage(*args):
    for x in args:
        number = int(x)
        # do something with x
    ...
    return "output string" 
```

当您`perpage`在模板中使用标签时，

```
{% perpage 10 20 30 %} 
```

模板标记函数将`perpage`使用位置参数调用`"10", "20", "30"`。这相当于在视图中调用以下内容：

```
 per_page("10", "20", "30") 
```

在`perpage`我上面写的示例函数中，`args`是`("10", "20", "30")`. 您可以循环`args`，将字符串转换为整数，然后对数字做任何您想做的事情。最后，您的函数应该返回您希望在模板中显示的输出字符串。

## 更新

对于包含标签，您不需要解析令牌。包含标签会为您执行此操作，并将它们作为位置参数提供。在下面的示例中，我已将数字转换为整数，您可以根据需要进行更改。我已经定义了一个`PerPageForm`并覆盖了`__init__`设置选项的方法。

```
from django import forms
class PerPageForm(forms.Form):
    perpage = forms.ChoiceField(choices=())

    def __init__(self, choices, *args, **kwargs):
        super(PerPageForm, self).__init__(*args, **kwargs)
        self.fields['perpage'].choices = [(str(x), str(x)) for x in choices]

@register.inclusion_tag('pagination/perpageselect.html')
def perpage (*args):
    """
    Splits the arguments to the perpageselect tag and formats them correctly.
    """
    choices = [int(x) for x in args]
    perpage_form = PerPageForm(choices=choices)
    return {'perpage_form': perpage_form} 
```

然后在您的模板中，显示表单字段`{{ perpage_form.perpage }}`

# java - 如何检查客户端是否在Java中是本地的

> ID：11740476
> 
> 赞同：0
> 
> 时间：2012-07-31T12:49:29.140
> 
> 标签：java, spring, tomcat

我有一个运行 Apache Tomcat 并使用 Spring 开发的服务器端应用程序。我需要阻止某些用户访问本地网络之外的应用程序。我一直在寻找一段时间，但我找不到解决这个问题的方法。Spring 是否提供了基于用户权限限制用户内部/外部访问的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:32:48.103

servlet 规范允许您查看远程 IP 地址，`ServletRequest#getRemoteAddr()`. 通过 IP 地址限制访问的传统方法是使用**servlet 过滤器**将 IP 地址范围列入白名单或黑名单。您可以搜索可以添加到 spring 应用程序的 servlet 过滤器实现。你只需要配置它。但是......确保您选择的实施方案考虑到以下内容。如果你找不到一个可以解释这个的，考虑写你自己的。

需要注意的主要一点是，您的服务器看到的“*远程地址”根本***不能保证识别客户端计算机**。这是一个网络问题，而不是 Spring/servlet 问题。您的服务器看到的远程地址，甚至可能是您自己内部网络上的负载平衡器或其他网络设备的 IP。

阅读 HTTP 标头[X-Forwarded-For](http://en.wikipedia.org/wiki/X-forwarded-for)。如果您的内部网络上的反向代理或某些配置中的负载平衡器在 TCP/IP 堆栈（例如 HTTP）中的应用程序层转发请求，并因此更改您的服务器所看到的原始 IP，在 HTTP 的情况下该设备通常会在此标头中包含或添加原始 IP。事实上，这个标头可以包含原始 IP 地址*列表*，以防请求在到达您自己的网络之前通过原始组织中的*多个NAT 或代理或 Internet 上的路径。*

我建议将*允许*的地址列入保守的白名单，而不是将禁止的地址列入黑名单。如果您的网络架构发生了变化，这可能会更加健壮，但是如果在内部网络上重新分配 IP，您仍然需要小心。

您的 servlet 过滤器可以结合使用`ServletRequest#getRemoteAddr()`并解析`X-Forwarded-For`标头。

还要记住在您的设计和白名单或黑名单中包含任何 IPv6 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:59:25.877

我对 Spring 一无所知，但是，假设您可以访问 Tomcat 的配置文件，您可以`Valve`在 Tomcat 本身或特定 webapps 的配置文件中设置一个以根据 IP 地址过滤访问。

[http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Remote_Address_Filter](http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Remote_Address_Filter) [http://vicker313.wordpress.com/2010/11/05/restrict-ip-coming-to-tomcat-service /](http://vicker313.wordpress.com/2010/11/05/restrict-ip-coming-to-tomcat-service/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:55:12.977

`hasIpAddress(String)`是的，您可以在使用 XML 表达式时使用 Web 安全异常

[链接：15.2 Web 安全表达式](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-access-web)

# javascript - 当您在javascript中更改另一个输入时更改一个输入

> ID：11740487
> 
> 赞同：1
> 
> 时间：2012-07-31T12:50:02.867
> 
> 标签：javascript, input, key-events

我有两个输入字段。
例如：一个输入颜色，另一个输入颜色代码。

像这样：`|Green| |#008000|`

我不想学习如何找到颜色代码，而是如何将一个值或变量与另一个匹配。这只是一个例子。

我想知道的是，当我填写第二个字段时，我如何以最佳方式自动生成其中一个字段。当我在第一个字段中键入“绿色”时，我希望代码自动出现在第二个字段中，反之亦然。我只想为几种颜色做。

```
<html>
<head>
  <script type="text/javascript">

var inputA = document.getElementById("color");
var inputB = document.getElementById("code");

inputA.onkeyup = function() {
   var v = this.value.toLowerCase();
    if (colormapping.color2code[v]){
       inputB.value = colormapping.color2code[v];
    } else {
        inputB.value = '';
    }
   }
inputB.onkeyup = function() {
   var v = this.value.toUpperCase();
    if (colormapping.code2color[v]){
        inputA.value = colormapping.code2color[v];
    } else {
        inputA.value = '';
    }
}
colormapping = {
    color2code:{
       green : '#008000',
       red   : '#FF0000'
    },
    code2color:{
       '#008000':'green',
       '#FF0000':'red'
    }
}
</script>
</head>

<body>
Name:<br />
<input id="color"><br />
Code:<br />
<input id="code">

</body>
</html> 
```

这就是我已经走了多远。问题可能是我的标签。为什么它不起作用？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:12:13.907

请尝试以下操作：**[示例](http://jsfiddle.net/poikl/GRLhW/)**

基本上，您需要一个比较对象，您可以检查。

```
colormapping = {
    color2code:{
       green : '#008000',
       red   : '#FF0000'
    },
    code2color:{
       '#008000':'green',
       '#FF0000':'red'
    }
}​ 
```

然后是相应的事件监听器：

```
inputA.onkeyup = function() {
   var v = this.value.toLowerCase();
   (colormapping.color2code[v])?
       inputB.value = colormapping.color2code[v]:
       inputB.value = '';
} 
```

对于输入B，反之亦然：

```
inputB.onkeyup = function() {
   var v = this.value.toUpperCase();
    if (colormapping.code2color[v]){
        inputA.value = colormapping.code2color[v];
    } else {
        inputA.value = '';
    }   
} 
```

两者具有基本相同的代码 - 第一个使用[三元 if 运算符](http://en.wikipedia.org/wiki/%3F%3a)而不是经典的 if。

（非常高级：如果你想让它变得更好，请将其包装在一个匿名函数中以保护映射不被更改并避免全局命名空间污染。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:58:19.607

不确定这是否会有所帮助。我能理解的是，当输入 A 的值发生变化时，您想要更改输入 B 的值。如果是：

```
var inputA = document.getElementById("inputA");
var inputB = document.getElementById("inputB");
inputA.onkeyup = function() {
   inputB.value = inputA.value
} 
```

检查 jsFiddle 如何做到这一点。如果这不是您想要的，请随时投反对票。

[http://jsfiddle.net/9xeXC/](http://jsfiddle.net/9xeXC/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T13:24:40.000

您可以将 onchange 事件用于 javascript。

HTML：

`<input type="text" id="input1" onchange="input1_changed">`
`<input type="text" id="input2" onchange="input2_changed">`

并在 javascript 函数中使用 switch 语句根据更改后输入的值更改其他输入

Javascript：

```
function input1_changed() {
  var value = document.getElementById("input1").value;
  switch (value) {
    case "Green":
      document.getElementById("input2").value = "#00FF00";
      break;
    // continue for other colors
  }
}

function input2_changed() {
  var value = document.getElementById("input2").value;
  switch (value) {
    case "#00FF00":
      document.getElementById("input1").value = "Green";
      break;
    // continue for other values
  }
} 
```

# python - Python GUI 创建

> ID：11740489
> 
> 赞同：3
> 
> 时间：2012-07-31T12:50:08.823
> 
> 标签：python, user-interface, vim, command-line-interface

我已经阅读了一些关于控制台 Python 应用程序的教程。我正在使用 vim 并使用 Windows 命令提示符来运行我的相同应用程序。我正在转向在 wxPython 中创建 GUI。我实际上是在尝试重新创建谷歌金融图表，但使用来自一些温度传感器的数据。

但是，每当我从命令行运行程序时，我的示例应用程序的窗口就会闪烁并立即消失。当我通过 IDLE 运行它时，我发现我的代码中有一个错误。当我从命令行运行它时，有没有办法查看错误，因为我对 vim 更熟悉？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:21:07.997

您可以使用 cmd 提示符“Python.exe filename.py”中的命令运行代码，因为它不应在执行代码时退出 cmd 提示符。

或者你可以在 vim 中编写程序并通过 IDLE 运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:57:33.370

最后通过 raw_input() 告诉程序从控制台请求输入应该会导致它在关闭控制台之前暂停。

# java - 通过 Java 小程序将 JTable 发送到打印机

> ID：11740491
> 
> 赞同：0
> 
> 时间：2012-07-31T12:50:11.253
> 
> 标签：java, swing

我需要有关如何将 java 小程序中的表发送到连接到系统的打印机的指导。它不应该涉及互联网。Java swing 有可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:32:06.573

[http://www.gamedev.net/topic/563757-printing-from-java-applet/](http://www.gamedev.net/topic/563757-printing-from-java-applet/) 你的小程序签名了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:52:47.750

利用

```
myJTableInstance.print(); 
```

打开一个对话框，让您选择您的打印机。

# java - 将图像上传到服务器 URL

> ID：11740493
> 
> 赞同：-1
> 
> 时间：2012-07-31T12:50:17.597
> 
> 标签：java, servlets

我必须使用 servlet 在服务器位置上传图像，但 url 格式存在一些问题。我可以在本地机器上上传图片，但是当它被部署在服务器上时，它有一些像[http://domain.com/folder](http://domain.com/folder)这样的 URL，那么它就会出现一些问题。它是servlet读取位置的代码的一部分。

```
<context-param>
 <description>Location to store uploaded file</description>
 <param-name>file-upload</param-name>
  <param-value>
        F://Servers//Images//
  </param-value> 
```

它是我用来上传到服务器的代码的一部分..

```
if( fileName.lastIndexOf("\\") >= 0 ){
           file = new File( filePath + fileName.substring( fileName.lastIndexOf("\\"))) ;
        }else{
           file = new File( filePath + fileName.substring(fileName.lastIndexOf("\\")+1)) ;
        }
        fi.write( file ) ; 
```

当更改为[http://domain.com/folder](http://domain.com/folder)然后它无法写入该位置，因为**http:// 更改为 http:/**

请帮助解决问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:20:31.260

您可以在此处阅读有关如何使用 servlet 上传文件或图像的更多信息

[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

# javascript - jquery 上的方法不适用于窗口或文档

> ID：11740497
> 
> 赞同：-1
> 
> 时间：2012-07-31T12:50:34.743
> 
> 标签：javascript, jquery

很简单的代码：

html:

```
<div id="wrap" style="background-color:gray; height:2000px;">

</div> 
```

js：

```
<script type="text/javascript">

    $(document).ready(function(){

    $(document).on('mouseup', function(e) {
         console.log(" mouse up \n");

        })  

    }); 
    </script> 
```

我替换`$(document)` 为`$(window)`但没有效果。

浏览器：FF 13.0

如何使它工作？

**编辑：**

**OMG**，我使用滚动而不是单击鼠标来获取“mouseup”事件。多么愚蠢的错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:52:35.210

您应该在`document.body`.
`document`并且`window`不是 DOM 元素并且不接收正常事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:54:32.900

我在这里工作正常[http://jsfiddle.net/GXrPp/2/](http://jsfiddle.net/GXrPp/2/)

您的 JQuery 引用是否正确加载？

**编辑：**这是我的结果（在 FF14 中） ![结果](../Images/b61a4a7c98a4dbb5be213948935ba25d.png)

# oauth - 使用 Salesforce OAuth 的安全方式

> ID：11740499
> 
> 赞同：0
> 
> 时间：2012-07-31T12:50:46.043
> 
> 标签：oauth, salesforce

我即将开始开发基于 Salesforce API 的 Chrome 扩展。我在客户端和 Salesforce 之间有一个服务器作为代理。服务器保存用户的访问令牌和刷新令牌。

那安全吗？

攻击者能否获取client_id并启动他/她自己的隐式身份验证流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:50:23.250

好主意。去吧。它非常安全。攻击者将找不到您的客户端 ID。您正在使用 OAuth 2.O。所以要安全。

# jenkins - 无法启动 Grails：java.lang.reflect.InvocationTargetException

> ID：11740502
> 
> 赞同：1
> 
> 时间：2012-07-31T12:50:53.613
> 
> 标签：jenkins

我在从 Jenkins Server 启动 Grails 时遇到问题。它执行从 SVN 存储库获取内容到最终编译和构建 WAR 文件的所有步骤......但最后它给了我错误日志中指定的以下错误。供您参考，我为您提供每种产品的版本：-

1.  Groovy (grails.1.3.7)
2.  蚂蚁 (apache-ant-1.6.5)
3.  常春藤常春藤2.2.0
4.  JDK 1.6（构建 31）

错误日志

BUILD FAILED /appl/instances/jkshome/workspace/$$JOBNAME/foldername/build.xml:112：执行此行时出现以下错误：/appl/instances/jkshome/workspace/$$JOBNAME/build/foldername/build .xml:49：无法启动 Grails：java.lang.reflect.InvocationTargetException

我花了大约一周的时间来解决这个问题，但没有这样做。您的帮助将不胜感激。预先感谢....

# database - 如何在查询中创建父子关系？

> ID：11740506
> 
> 赞同：-3
> 
> 时间：2012-07-31T12:50:59.060
> 
> 标签：database, oracle, oracle11g

> **可能重复：**
> [分层 SQL 问题](https://stackoverflow.com/questions/1336318/hierarchical-sql-question)

我有以下记录要维护。它有父子关系。我有一张桌子，我将从那张桌子上构建动态菜单......所以它有以下类型的记录。就像一棵树..一个父级有两个子菜单，两个子菜单包含两个或三个菜单......那么如何通过内联查询来管理它？

这是我的表结构

```
***ColumnName***
ID
MenuName
ParentID
URL 
```

这将是数据

```
 ID                ParentID
    1                      0
    2                      0
    3                      0
    4                      0
    5                      1
    6                      1
    7                      5
    8                      5
    9                      2 
```

如何创建选择查询以获取父子关系？如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:01:38.363

可能是这个

```
select t.id
      ,t.ParentID
  from table_name t
 start with t.ParentID = 0
connect by prior t.id = t.ParentID 
```

# linux - 带有调制解调器的 PCM 接口的 Alsa

> ID：11740507
> 
> 赞同：4
> 
> 时间：2012-07-31T12:51:02.743
> 
> 标签：linux, kernel, driver, embedded-linux, alsa

我有一个基于 imx28 CPU 的定制板。CPU 的串行端口连接到调制解调器的 PCM 输出。我必须为调制解调器的 PCM 接口开发一个驱动程序才能成为 ALSA SoC 的一部分。您能否指出内核树​​中与我的设置重新组合的一些驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T22:52:58.243

请参阅`Documentation/sound/alsa/soc`Linux 源代码中的目录。它解释了 ASoC 驱动程序如何分为三类：

*   编解码器驱动程序：这些定义了音频控制、接口功能、DAPM 定义和编解码器 I/O 功能。在这种情况下，您的调制解调器被视为“编解码器”。在这种情况下，您的 CODEC 驱动程序可能会非常小，只需定义 PCM 采样率（假设它是固定的，例如 8000 个样本/秒）和数据格式（例如 16 位线性）。
    *   查看源代码`sound/soc/codecs`
        *   如果您有 i.MX28 EVK（评估套件），请特别查看`sgtl5000.c`，`mxs_spdif.c`因为 i.MX28 EVK 具有这两个 CODEC，您可以看到驱动程序如何使它们工作。
*   平台驱动程序：平台的音频 DMA 引擎和音频接口驱动程序（特别是 PCM），该平台是飞思卡尔 MXS 芯片系列。
*   机器驱动程序：任何机器特定的控件和音频事件。

对于平台和机器驱动程序，请参阅`sound/soc/mxs`. 我不太清楚哪些被认为是“平台驱动程序”，哪些是“机器驱动程序”，因为它们没有明确说明。

*   `mxs-spdif.c`和`mxs-spdif-dai.c`，它们用于 S/PDIF 编解码器的 S/PDIF 接口（仅输出）。
*   `mxs-devb.c`和`mxs-dai.c`，它们用于 SGTL5000 CODEC 的 SAIF 接口。
*   `mxs-pcm.c`我认为处理 DMA 的东西。

但我不知道 i.MX28 上是否有同步串行端口 (SSP) 外设的示例代码，这是您感兴趣的。

# android - 如何在启动 Asynctask 10 秒后显示 toast

> ID：11740508
> 
> 赞同：1
> 
> 时间：2012-07-31T12:51:06.407
> 
> 标签：android, android-asynctask, task, execute, toast

请建议我如何在 AsyncTask 开始 10 秒后执行某些操作。我将 AsyncTask 用于不同的目的。但是，现在我想在 10 秒后更新我的 UI。或在特定时间后表示敬酒。

我实际上想在 10 秒后执行一些其他任务，而原始任务正在运行

请让我知道该怎么做。？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:08:21.717

只需在异步任务的 onPreExecute 方法中使用任何视图而不是处理程序，例如：

```
 protected void onPreExecute() {
        view.postDelayed(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

            }
        }, 10000);
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:53:39.670

`onPreExecute`您可以在AsyncTask上使用 Android 的 CountdownTimer ：http: [//developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

并将倒数计时器设置为 10 秒（10000 毫秒）。它易于使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:57:06.187

[您可以使用Handler.postDelayed(Runnable runnable, long delayMillis)](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)在您的 UI 线程和 Toast 中设置一个处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:54:32.543

去做定时器任务。TimerTask 类表示要在指定时间运行的任务。该任务可以运行一次或重复运行。这是链接：- [http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

# c++ - Boost.Spirit 解析字符串的语义动作不起作用

> ID：11740518
> 
> 赞同：0
> 
> 时间：2012-07-31T12:51:21.373
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我尝试编写一个 Boost.Spirit 解析器来解析一个字符串，该字符串应该代表一个简单的命令，如“print foo.txt”。每次输入满足语法时，都应调用语义动作。

这是代码：

```
template<class Iterator>
struct my_parser : qi::grammar<Iterator, void(), qi::ascii::space_type>
{
    void test(std::string const & s) const
    {
        std::cerr << s << std::endl;
    }

    my_parser() : my_parser::base_type(print)
    {
        using qi::_1;
        using qi::char_;

        filename =
            *qi::char_("a-zA-Z_0-9./ ")
            ;

        print =
            qi::lit("print")
            >> filename [ boost::bind(&my_parser::test, this, _1) ]
            ;
    }

    qi::rule<Iterator, std::string()> filename;
    qi::rule<Iterator, void(), qi::ascii::space_type> print;
}; 
```

如果我尝试编译它，我会得到类似的东西：

```
no match for call to ‘(const boost::_mfi::cmf1<void, parser::my_parser<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> > >, const std::basic_string<char>&>) (parser::my_parser<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> > >* const&, const boost::phoenix::actor<boost::spirit::argument<0> >&)’ 
```

例如，如果我将 _1 替换为*“abc” ，则代码会编译，但对于输入**“print foo.txt”*，phrase_parse() 会返回 false 。如果我用 true 注释掉*[ boost:bind(...) ]* phrase_parse() 返回。

有谁知道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:07:11.750

我相信您的问题是您试图将精神占位符传递给`boost::bind`，它通常仅适用于其内置占位符（您已将其隐藏`using qi::_1`）。我会尝试添加 define `BOOST_SPIRIT_USE_PHOENIX_V3`， add`#include "boost/phoenix.hpp"`然后`boost::phoenix::bind(&my_parser::test, this, _1 )`改为。

# php - Codeigniter，打开和编辑网页上的视图文件

> ID：11740523
> 
> 赞同：3
> 
> 时间：2012-07-31T12:51:35.723
> 
> 标签：php, codeigniter

我正在尝试在 codeigniter 中创建一个基本的 CMS，并希望能够在 CMS 的后端（即网页上）打开视图文件。这样做的好处是能够直接从代码编辑器/ftp 客户端上传视图，但如果此选项不可用，则可以使用 CMS 修改它们。我知道我可以使用数据库来完成，但需要能够直接 FTP 视图。

我试过用谷歌搜索各种东西，但关键词似乎得到了完全不同的结果。

所以它基本上是打开文件，将其内容放入表单/文本区域框中，然后在保存时再次直接保存到文件中，但我找不到任何示例！

提前致谢！

C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:54:32.550

**列出文件**

使用[目录迭代器](http://php.net/manual/en/class.directoryiterator.php)，您可以列出文件夹的所有文件。（在您的情况下，所有 .php 文件的列表都放入 views 文件夹）

* * *

**获取/设置文件内容**

然后使用[file_get_contents 您](http://php.net/manual/en/function.file-get-contents.php)可以检索文件的内容。

并使用[file_put_contents](http://www.php.net/manual/en/function.file-put-contents.php)您可以设置文件的内容。

你也可以检查

*   [开放](http://www.php.net/manual/en/function.fopen.php)
*   [恐惧](http://ca3.php.net/manual/en/function.fread.php)
*   [写](http://ca3.php.net/manual/en/function.fwrite.php)
*   [关闭](http://ca3.php.net/manual/en/function.fclose.php)

这与 file_get_contents 和 file_put_contents 相同...

* * *

**至于验证**

如果文件[is_readable ，您可以在获取文件内容之前检查](http://php.net/manual/en/function.is-readable.php)

[如果文件is_writable](http://www.php.net/manual/en/function.is-writable.php)，您可能还想在设置内容之前检查

* * *

**补充**

另外，如果我是你，我会为你的 cms 添加一个语法荧光笔，你可能想检查一些大鱼使用的语法荧光笔，比如：Apache、Aptana、Mozilla、Yahoo、Wordpress，...

[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:11:55.340

这是很久以前的（我认为是）可行的解决方案，我可以说它在过去有效，但我不保证它仍然与您当前的系统兼容。

特征

*   密码登录（不是很安全，但会远离普通用户）
*   防止您点击后退按钮并用旧代码覆盖您的更改（可能会更新 $rand 以使用时间戳而不是随机的）

您可能可以对此进行很多更新。

这主要是一个快速而肮脏的解决方案，只是为了让某些东西正常工作

如果您还需要它来列出文件，您可以尝试将 readdir 或 scandir 的结果（为了快速）输出到 div 中。或者，@Hipny 对如何构建自己的想法有正确的想法

代码：

```
<?
$rand = mt_rand(0, 65535);
setcookie("check", $rand);
if ($_POST['pass'] != ""){
setCookie ("auth", hash("sha512", $_POST['pass']));
echo "<meta http-equiv='refresh' content='0;" . $_SERVER["SCRIPT_NAME"] . "'>";
}
if ($_GET['logout'] == "1"){
setCookie("auth","");
echo "<meta http-equiv='refresh' content='0;" . $_SERVER["SCRIPT_NAME"] . "'>";
}
if ($_COOKIE['auth'] != "!!!! INSERT YOUR OWN SHA512 HASH HERE !!!!"){
echo "<center><h1>Authentication required</h1><br /><form action='" . $_SERVER["SCRIPT_NAME"]. "?" . $_SERVER["QUERY_STRING"] . "' method='post'><input type='password' name='pass'><input type='submit' value='Authenticate'></form></center>";
die();
}
$rand = mt_rand(0, 65535);
setcookie("check", $rand);
?>
<html>
    <head>
        <script language="javascript" type="text/javascript">
        function reloadFile(){
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            var redir = "?";
            for (var i=0;i<vars.length;i++){
                if (vars[i].indexOf("file=") == -1 && vars[i].indexOf("save=1") == -1){
                    if (redir == "") redir = "?" + vars[i];
                    else redir += "&" + vars[i];
                }
            }
            while (redir.indexOf("&&") != -1) redir = redir.replace("&&", "&");
            document.location.href = document.location.href.substring(0, document.location.href.indexOf("?")) + redir + "&file=" + document.getElementById("newfile").value;
        }
        </script>
<title>Editing file: <? echo $_GET['file']; ?></title>
    </head>
    <body>
<table cellspacing="0" cellpadding="0">
<tr>
<td colspan=2">
<input id="newfile" type="text" size="135" onkeydown="if (event.keyCode == 13) document.getElementById('load').click()"><input id="load" type="button" value="Load" onClick="if (confirm('Discard changes?')) reloadFile();">
</td>
</tr>
<tr>
<td colspan="2">
<?php
function ex($message){
throw new Exception($message);
}
function read($file){
try{
@$handle = fopen($file, "rb") or ex("Read Error!");
$contents = stream_get_contents($handle);
fclose($handle);
return htmlspecialchars($contents);
} catch (Exception $e) {
return "Creating new file.";
}
}
function save(){
$data = htmlspecialchars_decode($_POST['data']);
if($_GET['file'] != "") {
      $fp=fopen($_GET['file'], "w");
      fwrite($fp, $_POST['data']);
      fclose($fp);
}
}
//echo strlen ($_POST['data']);
if ($_POST['data'] != "" && $_COOKIE['check'] == $_POST['checksum']) save();
else if ($_GET['save'] == 1) echo "<div id='abort'><h1><font color='FF0000'>Save checksum did not match: save aborted!</font> <a href=\"javascript:void(document.getElementById('abort').style.display = 'none')\" style='color: #000000;text-decoration:none;'>X</a></h1></div>";
?>
        <form name="dataform" id="dataform" method="post" action="<? echo $_SERVER["SCRIPT_NAME"] . "?" . $_SERVER['QUERY_STRING']; if (strpos($_SERVER['QUERY_STRING'],"&save=1") === false) echo "&save=1"; ?>" onSubmit="return confirm('Do you want to save?');">
        <textarea name="data" wrap="off" id="data"<? if ($_POST['h'] != "") echo " rows='" . $_POST['h'] . "'"; else if ($_GET['h'] != "") echo " rows='" . $_GET['h'] . "'"; 
<?
    if ($_GET['file'] != "") echo read($_GET['file']);
?></textarea><br />
<input type="hidden" value="<? echo $rand ?>" id="checksum" name="checksum">
<script language="javascript" type="text/javascript">

</script>
</td>
</tr>
<tr>
<td>
<input type="submit" Value="Save">
<input type="button" Value="Revert" onClick="if (confirm('Are you sure you want to revert?')) document.location.href = document.location.href;">
<input type="button" Value="Logout" onClick="if (confirm('Are you sure you want to logout?')) document.location.href = '<? echo $_SERVER["SCRIPT_NAME"] ?>?logout=1';">
</td>
<td align="right">
<input name="h" id="h" onKeyUp='document.getElementById("data").rows = this.value'> x <input name="w" id="w" onKeyUp='document.getElementById("data").cols = this.value'>
<script language="javascript" type="text/javascript">
document.getElementById("data").style.width = document.body.clientWidth * .9;
document.getElementById("data").style.height = document.body.clientHeight * .8;
</script>
</td>
</tr>
</table>
</form>
</body>
</html> 
```

# php - 机架空间和进度条

> ID：11740533
> 
> 赞同：0
> 
> 时间：2012-07-31T12:52:09.703
> 
> 标签：php, ajax, rackspace-cloud

我正在使用 Rackspace API 和他们的 FormPost，它允许客户直接在云上上传文件。所以表单的目标是他们提供的链接（我无法控制这个）。我还希望有一个上传文件的进度条（目前有效）。但是，rackspace 的链接默认会在上传完成时进行重定向，其中包含链接中的一些参数（错误代码和错误消息）。问题是，由于我使用 AJAX 作为进度条，重定向不起作用，使我无法获取这些参数。

你有什么好主意吗？我正在使用 PHP。

# html - 困惑，定位正确，身体比视口更宽？

> ID：11740534
> 
> 赞同：2
> 
> 时间：2012-07-31T12:52:13.243
> 
> 标签：html, css, cross-browser, position, positioning

我遇到了一个让我目瞪口呆的问题...我尝试使用 css 'right: 0px' 将元素定位在页面的绝对右侧。但似乎我的元素实际上被放置在比预期更右几个像素的位置，我丢失了其中的一部分。

为了解决这个问题，我将我的案例简化为下面的 HTML。

看起来宽度为 100% 的元素（也是主体！）实际上比视口更宽（但正在触发 scollbars）。我傻眼了..我在这里俯瞰什么？

```
<!DOCTYPE html>
<HTML>
<head>
    <STYLE>

        body{
            overflow: auto;
        }

        #div1{
            position:       absolute;
            top:            50px;
            left:           0px;
            width:          100px;
            height:         145px;
            background-color:   red;
        }

        #div2{
            position:       absolute;
            top:            250px;
            left:           0px;
            width:          100%;
            height:         145px;
            background-color:   red;
        }

        .block{
            position:       absolute;
            width:          30px;
            height:         20px;
            background-color:   yellow;
        }

        .sub0{top:0px; right:0px;}
        .sub1{top:25px; right:1px;}
        .sub2{top:50px; right:2px;}
        .sub3{top:75px; right:3px;}
        .sub4{top:100px; right:4px;}
        .sub5{top:125px; right:5px;}

    </STYLE>

<body>

    <div ID="div1"> 

        <div class="block sub0">0PX</div>
        <div class="block sub1">1PX</div>
        <div class="block sub2">2PX</div>
        <div class="block sub3">3PX</div>
        <div class="block sub4">4PX</div>
        <div class="block sub5">5PX</div>

    </div>

    <div ID="div2"> 

        <div class="block sub0">0PX</div>
        <div class="block sub1">1PX</div>
        <div class="block sub2">2PX</div>
        <div class="block sub3">3PX</div>
        <div class="block sub4">4PX</div>
        <div class="block sub5">5PX</div>

    </div>

</body>

</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:42:52.527

好吧，很抱歉打扰你了……问题太傻了，我想把头撞在墙上……

经过更多研究后，问题似乎只出现在我的双显示器设置的左侧显示器上的最大化浏览器窗口上......

显示器的“自动调整”解决了它...不再丢失正确的 2 个像素...

呃！

# php - PHP session_destroy 和会话范围？

> ID：11740550
> 
> 赞同：3
> 
> 时间：2012-07-31T12:52:47.747
> 
> 标签：php, session, session-state

好的，那里有很多“简单会话”问题，但我似乎找不到我想要的。由于 PHP 文档似乎没有很好地解释这一点，这让我有点恼火。

三折题。

1.  它说 session_destroy() 会清除会话数据，但不会清除全局变量。所以它会擦除数据但变量仍然完好无损？文档中的全局变量是什么意思？

2.  我可以使用哪些不同类型的方法来销毁会话数据，session_destroy 还不够吗？为什么要使用我在一些代码示例中看到的以下编码：

    ```
    session_start();
    $_SESSION = array();
    session_destroy(); 
    ```

3.  会话似乎跨浏览器实例持续存在。例如，当打开两个单独的浏览器时，IE9 将保持相同的会话 ID。与 Chrome 相同。只有当我关闭所有浏览器时，我才会获得一个新的会话 ID。所有浏览器都是这种情况吗？我想知道，以便在编码过程中牢记这一点 - 以后不想发现某些浏览器不是持久的，而我的代码认为它是持久的，然后冒着产生各种错误的风险。

提前感谢任何可以帮助我回答这些问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:56:37.453

> 文档中的全局变量是什么意思？

它在谈论`$_SESSION`超级全局变量。

> 我可以使用哪些不同类型的方法来销毁会话数据，session_destroy 还不够吗？为什么要使用我在一些代码示例中看到的以下编码：

您可以使用它来删除其中的内容，`$_SESSION`以便脚本的其余部分不使用现已过期的数据。在您的脚本中的某个时刻，您已经决定要清除用户的会话，因此您不希望任何其他逻辑使用该会话日。通过设置`$_SESSION`为空数组，其所有先前的内容都将被擦除。

> 所有浏览器都是这种情况吗？

是的，会话基于 cookie（通常）与特定用户相关联，并且每次用户访问站点时都会发送到您的站点（如果他们有 cookie），无论打开了多少选项卡或是否他们甚至没有使用标签式浏览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:00:16.157

1.  `$_SESSION`是超级全局变量
2.  `session_destroy`功能基本够用。它删除存储所有会话变量的服务器上的 session_file 并删除会话 cookie。调用后的变量`session_destroy`仍在内存中，但更改这些值无效（除非您`session_start()`再次调用）。

    但是代码片段也从内存中删除了变量。例如，如果应用程序`$_SESSION['admin']`稍后在同一请求中检查用户是否具有管理员权限，这很重要。

    该`session_start()`功能是必需的，因为您需要先加载会话才能将其删除。

3.  会话在不同的浏览器中不是持久的，但是它们在同一浏览器的所有窗口/选项卡中是持久的。如果你关闭浏览器会发生什么真的取决于你的 PHP-ini 设置。`session.cookie_lifetime`定义浏览器应保留 cookie 的时间（以秒为单位）（即使在重新启动后）。如果`session.cookie_lifetime`设置为 0，浏览器会在关闭时删除会话 cookie。

    `session.gc_maxlifetime`定义网络服务器保留会话文件的时间（没有会话文件，会话 cookie 无效）

# java - 无法生成随机字符串

> ID：11740551
> 
> 赞同：0
> 
> 时间：2012-07-31T12:52:49.063
> 
> 标签：java, android, sqlite

```
 for (int j = 0; j < fileBytes.size(); j++) {
        bitMap = convert.convertByteArray(fileBytes.get(j));
        db.addContact(new Case(UUID.randomUUID().toString(), "1234",
                        bitMap[0], bitMap[1]));
 } 
```

此代码片段将根据可以列出的`case`文件数生成该类的n 个对象。`fileBytes.size()`

如您所见，我使用`UUID.randomUUID().toString()`just 来生成 random `String`，这是`Case`构造函数中的第一个参数。

这些对象中的每一个都保存到`SQLite`数据库中。这不起作用，随机生成的字符串不显示。但是如果我`UUID.randomUUID().toString()`用`Integer.toString(j)`这个替换它就会出现。我真的不明白为什么它不应该工作..

有任何想法吗？

**编辑**

问题是`case`类中的第一个参数是String，但是数据库中的第一个字段设置为an `INT`，将此字段更改为a`VARCHAR`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:16:17.230

关于什么

```
String randomStr = String.valueOf(Random.nextInt()); 
```

或者

```
db.addContact(new Case(new String(UUID.randomUUID().toString()), "1234", bitMap[0], bitMap[1])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:55:22.307

出现在哪里？数据库？确保 UUID 不会太长或数据类型错误而无法存储在数据库中。

# jquery - 当您使用 Jquery 从 div 中删除另一个类名时，类会丢失一个名称

> ID：11740557
> 
> 赞同：-1
> 
> 时间：2012-07-31T12:53:18.937
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

对不起，这可能是一个长的，所以请多多包涵。我有三个可排序的（jqueryUI）列表。列出**all-colls-list**、**coll-selected-list**和**coll-grouped-list**。我可以将列表**all-colls-list 的**项目放入**coll-selected-list**和**coll-grouped-list 中**。

例如，我可以同时将 'list item' 放入**coll-selected-list**和**coll-grouped-list**中，该项目将保留在**all-colls-list 中**。当项目添加到**coll-selected-list**时，类名称“selAdded”将附加到**all-colls-list**中的列表项。当一个项目被添加到**coll-grouped-list**时，一个类名“groupAdded”被附加到**all-colls-list**中的列表项目。例如：

```
<li class"selAdded">Blah blha</li> OR
<li class"groupAdded">Blah blha</li> OR (when item is put in both lists)
<li class"selAdded groupAdded">Blah blha</li> 
```

当我从**coll-grouped-list**或**coll-selected-list中删除该项目时，它会在****all-colls-list**中删除该项目的相应类名。但是，如果存在两个类名，而我只删除了一个，由于某种原因，它会同时删除两个！所以，如果我要从中删除“selAdded”，`<li class"selAdded groupAdded">Blah blha</li>` 它似乎只会留下`<li>Blah blha</li>`

我在这里做了一个小提琴[http://jsfiddle.net/noscirre/xf8j2/](http://jsfiddle.net/noscirre/xf8j2/)

这是我删除类名的代码：

```
if ($("#all-colls-list li:contains(" + itemName + ")").hasClass("selAdded")) {
                $("#all-colls-list li:contains(" + itemName + ")").removeClass("selAdded"); } 
```

这是在删除类后检查该类是否存在的代码：

```
receive: function (event, ui) {
                alert($(this).attr('class'));
                if ($(this).hasClass("groupAdded") && $(this).hasClass("selAdded")) {
                    alert("both");
                    //Do nothing
                }
                if ($(this).hasClass("groupAdded") && !$(this).hasClass("selAdded")) {
                    alert("group"); //Do nothing
                } 
                if (!$(this).hasClass("groupAdded") && $(this).hasClass("selAdded")) {
                    alert("sel"); //Do nothing
                }
                if (!$(this).hasClass("groupAdded") && !$(this).hasClass("selAdded")) {
                    alert("none"); //Do nothing
                }
            } 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:03:01.867

如果您仍然需要检查它是否有课程...

```
$("#all-colls-list li:contains(" + itemName + ") selAdded").each(
function() {
$(this).removeClass('selAdded');
dp-_other();
}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:07:11.500

看起来像您想要的那样添加和删除类，但是检查它们是否存在的代码不能正常工作。当您检查类时，`$(this)`指的是父级`<ul>`而不是 the `<li>`，因此显示“无”，因为 the`<ul>`既没有 the`selAdded`也没有`groupAdded`类。

当我在你的小提琴中拖拽东西时，我正在使用 Chrome 的内置检查器来查找类。我使用`console.log($(this));`了，所以我可以查看错误控制台，以确定`$(this)`代码中当时实际指的是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:11:56.353

如果您使用 firebug 或任何检查工具，您可以看到类被正确删除，但代码的警报部分不正确

试试这个小提琴[http://jsfiddle.net/xf8j2/2/](http://jsfiddle.net/xf8j2/2/)

尽管您应该清理此代码并缓存一些 jquery 对象

# php - 简单的php表单

> ID：11740563
> 
> 赞同：0
> 
> 时间：2012-07-31T12:53:43.003
> 
> 标签：php

我有一个简单的联系人，我希望通过一个函数“发布”，但我似乎无法让它工作？

当我将操作发送到外部“send.php”文件但我希望将所有内容保存在一个文件中时，该表单有效。

```
<form action="send()" id="contactform" method="POST">
<p>Name<input type="text" name="name">
  Email
  <input type="text" name="email">
  Phone
  <input type="text" name="phone">
</p>
<p>Message
  <textarea name="message" rows="6" cols="25"></textarea>
  <br />
<input type="submit" value="Send">
</p>
</form>

<?php
function send()
{
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent=" From: $name \n  Phone: $phone \n Email: $email \n Message: $message";
$recipient = "email@email.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!";
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T12:57:14.443

您不能从`<form>`标签调用 php 代码。通常，您将此作为“回发”处理回同一页面，并检查是否设置了表单变量以确定回发是否发生：

```
<form action="" id="contactform" method="POST"> 
```

然后在您的代码中：

```
if (isset($_POST['name']))
    send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:56:24.677

PHP 不是这样工作的:)

要快速修复代码，您可以执行以下操作：

1.  获取`send()`函数的内容
2.  将其剪切并粘贴到一个新的 .php 文件中（随意命名）
3.  替换`action="send()"`为`action="file_you_just_created.php"`
4.  测试一下

基本上，HTML 表单根本不知道 PHP 代码是否存在，也无法直接引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:12:20.337

action 字段将是呈现的 html 的一部分。这意味着，它是“客户端”的静态或属性。根据[规范](http://www.w3.org/TR/html401/interact/forms.html)，它也应该是一个有效的绝对或相对地址。如果您将其留空，它将在大多数（不是全部）情况下工作，但它不会正确验证。

PHP 代码在您的网页所在的服务器上运行。这意味着，它在您获得任何东西之前运行，然后您的浏览器接收 html 代码。因此，提交代码后需要再次运行，因此需要一个页面来运行它。

想象你在一家餐馆。首先，您向服务员点了一些食物。这将是您尝试进入 X 网页。然后在厨房准备食物。这将是正在执行的 PHP 代码。食物准备好后，服务员会为您送上。这是您下载信息，接收html代码。您甚至可以根据需要更改它（javascript），但这超出了您的问题范围。专注于 OP，修改食物的安排（做一些客户端的事情）会修改它已经在厨房里做的事情吗？不，它不能。唯一的选择是告诉服务员您想要的食物变化（填写表格）并礼貌地告诉他去厨房并要求它们（这是，将变化发送到哪里）。可能是一个愚蠢的例子，但它说明了这一点。

Didn't put code as other's code should fix your problem doubtlessly, I just wanted to explain WHY your code didn't work so you understand html/PHP better.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:55:43.377

`form`将标签更改为

```
<form action="" ... >
    ...
</form> 
```

然后`send()`在其声明后调用 if`$_POST['message']`设置。

该`action`属性只是告诉浏览器应该将信息发送到哪个网页；它与告诉它到达那里后要运行哪个函数无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:56:25.967

HTML 表单的 action 标签不能用于执行 PHP 代码。该操作必须是一个 PHP 页面，其中包含将执行以读取 POST 变量的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T12:57:41.443

```
<form action="?" id="contactform" method="POST">
<p>Name<input type="text" name="name">
  Email
  <input type="text" name="email">
  Phone
  <input type="text" name="phone">
</p>
<p>Message
  <textarea name="message" rows="6" cols="25"></textarea>
  <br />
<input type="submit" value="Send">
</p>
</form>

<?php
if ($_POST) {
   send();
}

function send()
{
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent=" From: $name \n  Phone: $phone \n Email: $email \n Message: $message";
$recipient = "ma9ics@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!";
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T12:57:47.047

```
<form action="" id="contactform" method="POST">
<p>Name<input type="text" name="name">
  Email
  <input type="text" name="email">
  Phone
  <input type="text" name="phone">
</p>
<p>Message
  <textarea name="message" rows="6" cols="25"></textarea>
  <br />
<input type="submit" value="Send" name="submit">
</p>
</form>

<?php
if (isset ($_POST["submit"]))
{
    $name = $_POST['name'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $message = $_POST['message'];
    $formcontent=" From: $name \n  Phone: $phone \n Email: $email \n Message: $message";
    $recipient = "ma9ics@gmail.com";
    $subject = "Contact Form";
    $mailheader = "From: $email \r\n";
    mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
    echo "Thank You!";
}
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T12:58:47.270

这样做：

```
<form action="" id="contactform" method="POST"> 
```

或更好（有效）：

```
<form action="<?php echo $_SERVER['SCRIPT_FILENAME'] ?>" id="contactform" method="POST"> 
```

要在脚本检查中捕获发布数据的数据：

```
<?php 
if (isset($_POST['submit'])) {
    // you should also check if field was filled (strict coding)
    if (isset($_POST['email'])) $email = $_POST['email'];
    ...
} 
```

# gcdasyncsocket - GCDAsyncSocket 中两个不同来源的数据会冲突吗？

> ID：11740564
> 
> 赞同：1
> 
> 时间：2012-07-31T12:53:45.063
> 
> 标签：gcdasyncsocket

我一直被困在这个问题中。

简而言之，

我有几个设备。他们每个人都会向服务器发送一张图片。由于图片的大小，数据将被分成几个部分。所以每次调用 didReadData: 方法时，我都应该追加传入的数据。

问题来了：（

如果两个或多个设备同时向服务器发送图片，数据是否会冲突？

我是说：

DEVICE1 将发送 data11 data12 data13

DEVICE2 将发送 data21 data22 data23

我得到的数据有没有可能是这个顺序：data11 data21 data12 ....（两包数据刚刚混在一起）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T09:46:49.940

好的。我认为我不清楚 TCP 协议是如何工作的。

GCDAsyncsocket 是一个非常强大的库。它执行出色的多线程工作。而我对这个问题的困惑只是因为我没有深入了解TCP。

对于这两个设备，GCDAsyncsocket 会在两个不同的线程中调用 readData:。不会发生冲突。您应该做的就是使用标签来处理部分数据。

# javascript - require.js +bone.js：如何构造具有初始化功能的模块？

> ID：11740567
> 
> 赞同：4
> 
> 时间：2012-07-31T12:54:00.040
> 
> 标签：javascript, backbone.js, requirejs, js-amd

我有一个包含三页的应用程序（它们是单页界面）。这些页面具有相似但不相同的功能。

所以我想拥有提供通用功能的 javascript 模块。然后每个页面可以自定义/覆盖部分通用功能。

我正在使用backbone.js，所以我要做的是：

1.  加载包含常见模型、视图、集合等的文件。
2.  加载自定义/覆盖步骤 1 部分的特定于应用程序的文件
3.  调用一个 init() 函数来实例化所有必要的模型/视图/集合

目前，我将模块存储在类似于以下内容的模块容器中：[https](https://stackoverflow.com/a/9426071) ://stackoverflow.com/a/9426071 每个模块都有一个可选的 init() 函数，由我的 main init() 函数执行。

例子：

1.  我有一个名为 results.js 的文件。它定义了搜索结果的通用模型/集合/视图。在它的 init() 函数中，一切都被实例化了，但是这个函数还没有被调用：

    ```
    var resultView = new ResultView() 
    ```

2.  然后我包含 myApp.js，部分视图被覆盖。

3.  主 init() 函数调用 results.js init() 实例化新视图。一切都很好，光滑和干燥。

现在我想切换到 require.js 而不是我自己的模块容器，想知道如何组织我的代码。

我可以在 myApp.js 中实例化所有模型/视图等，而不是每个模块的 init() 函数。这意味着有很多重复的代码。

或者我可以坚持每个模块都有它的 init() 函数，并在 myApp.js 中调用这些 init() 函数。我不喜欢这样，因为我必须为我的三页中的每一页明确写下我的模块三次：

```
require(['module1', 'module2', 'module3', ...],
  function(module1, module2, module3, ...) {
    var init = function() {
      module1.init();
      module2.init();
      module3.init();
      ...
    }
    return {init: init};
  }
); 
```

对于 10 个模块和许多库，这不是很好而且很干燥。有没有办法访问（循环） require.js 拥有的所有模块？

或者我错过了什么，我应该以不同的方式构建我的代码吗？

欢迎任何提示/想法，

迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:32:04.833

正如上面评论中所讨论的，您可以避免通过使用函数体内的[`arguments`对象循环遍历函数的参数来显式引用函数的参数。](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)所以：

```
require(['module1', 'module2', 'module3', ..., 'moduleN'],
  function(module1, module2, module3, ..., moduleN) {
    var init = function() {
        module1.init();
        module2.init();
        module3.init();
        ...
        moduleN.init();
    };
    return {init: init};
}); 
```

变成：

```
require(['module1', 'module2', 'module3', ..., 'moduleN'],
  function() {
    var args = arguments;
    var init = function() {
        var module;
        for (module in args) {
            if (args.hasOwnProperty(module) && typeof module.init === 'function') {
                module.init.call(this);
            }
        }
    };
    return {init: init};
}); 
```

我在循环中添加了一个`hasOwnProperty()`检查，`for in`因为出于多种原因，这是一种[很好的做法](http://javascript.crockford.com/code.html)。`init`此外，在尝试调用它之前，您会看到显式检查是否是一个函数。

的原因`var args = arguments`是您可以从内部函数中引用它 - 否则您将引用传递给 的参数`init()`，这不是您想要的。

顺便说一句，在建筑层面上，我认为你描述的项目结构非常好——我在很多非常大的项目中使用它，它从来没有让我失望。Require.js 太棒了！:)

# html - UserComments 架构上的 dtstart 警告

> ID：11740569
> 
> 赞同：9
> 
> 时间：2012-07-31T12:54:05.257
> 
> 标签：html, microdata, schema.org

我有以下代码用于评论的丰富片段：

```
<ul itemscope itemtype="http://schema.org/UserComments">
    <li id="comment-1" class="comment">
        <span itemprop="name" class="author">Author 1</span>
        <p itemprop="commentText">Bla Bla Bla</p>
        <time itemprop="commentTime" content="2012-07-29" datetime="2012-07-29T05:55+00:00" title="Jul 29, 2012 5:55">2 days ago</time>
    </li>

    <li id="comment-2" class="comment">
        <span itemprop="name" class="author">Author 2</span>
        <p itemprop="commentText">yada yada yada</p>
        <time itemprop="commentTime" content="2012-07-30" datetime="2012-07-30T04:44+00:00" title="Jul 30, 2012 4:44">yesterday</time>
    </li>
 </ul> 
```

根据[schema.org/UserComments](http://schema.org/UserComments)，这是正确的。但是，[Google 的 Rich Snippets Testing Tool](http://www.google.com/webmasters/tools/richsnippets)发出警告：

> 警告：缺少必填字段“dtstart”。

`dtstart`甚至不是 UserComments 事件的属性。我应该忽略这个警告吗（谷歌的工具是测试版）？还是我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T10:10:17.170

我想我找到了答案。正确的 HTML 代码似乎是这样的：

```
<ul>
    <li id="comment-1" itemtype="http://schema.org/Comment" itemscope="itemscope" itemprop="comment">
        <span itemprop="author">Author 1</span>
        <p itemprop="text">Bla Bla Bla</p>
        <time itemprop="dateCreated" content="2012-07-29" datetime="2012-07-29T05:55+00:00" title="Jul 29, 2012 5:55">2 days ago</time>
    </li>
 </ul> 
```

每个评论都有自己的 itemscope。这意味着您必须重复`itemtype="http://schema.org/Comment" itemscope="itemscope" itemprop="comment"`每条评论。

[在查看了 Google 的 "Products with many offer" 示例](http://www.google.com/webmasters/tools/richsnippets?url=http://www.ebay.com/ctg/Samsung-Galaxy-Nexus-SCH-I515-32GB-Black-Verizon-Smartphone-/110853084)后，我得出了这个结论。他们使用包含多个产品评论的 eBay 页面作为示例。[评论](http://schema.org/Review)和[评论](http://schema.org/Comment)都是[CreativeWork](http://schema.org/CreativeWork)的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T11:40:16.443

我能够让 Google 验证器使用`UserComments`. 我承认很难决定哪种是首选的评论格式（`UserComments`vs `Comment`），但是[http://schema.org/CreativeWork](http://schema.org/CreativeWork)声明`comment`为 type `UserComments`，所以我现在就这样做。

假设您的实例`UserComments`位于类似 a 的内部`CreativeWork`，我相信避免 Google 出现此验证错误的关键是将`itemprop='comment'`属性添加到`UserComment` `itemscope`元素。

在您的情况下，尝试更新您的行以包含该属性，即：

```
<ul itemprop="comment" itemscope itemtype="http://schema.org/UserComments"> 
```

我发现当`UserComments`包含在contains 中时，Google`CreativeWork`正确`itemprop`地解析了它们，没有错误。我确实在丢失时看到了这个错误`itemprop='comment'`，我相信谷歌在这种情况下将它视为一个通用事件。顺便说一句，`startDate`是`dtstart`（参考：[https](https://support.google.com/webmasters/answer/164506?hl=en) ://support.google.com/webmasters/answer/164506?hl=en ）的同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T09:34:28.923

不使用它： itemprop="comment"

```
<ul>
    <li id="comment-1" itemtype="http://schema.org/Comment" itemscope="itemscope">
        <span itemprop="author">Author 1</span>
        <p itemprop="text">Bla Bla Bla</p>
        <time itemprop="dateCreated" content="2012-07-29" datetime="2012-07-29T05:55+00:00" title="Jul 29, 2012 5:55">2 days ago</time>
    </li>
 </ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T17:34:58.823

经过大量尝试和错误后，我发现了一些可行的方法并通过了我使用测试工具所做的测试。

```
<div itemprop="comment" itemscope itemtype="http://schema.org/UserComments">
    <p itemprop="commentText"> bla bla bla </p>
    <span itemprop="name" class="author">billy bob</span>
    <span itemprop="commentTime" content="2014.2.28" >Feb 28 2014</span>
</div> 
```

# ruby-on-rails - 无法使用 Omniauth for Ruby on Rails 更改 Google 身份验证的应用名称

> ID：11740571
> 
> 赞同：1
> 
> 时间：2012-07-31T12:54:06.873
> 
> 标签：ruby-on-rails, ruby, openid, omniauth

我已经使用设置了我的omniauth.rb 文件

提供者：谷歌

但每当我尝试登录时，我仍然会收到“网站 934189150838.apps.googleusercontent.com 正在请求访问您的 Google 帐户以获取下列产品。”

我错过了什么？我在 Google API 控制台上更改了我的品牌信息...

# iphone - 我想构建一个需要访问用户日志文件的 iphone 应用程序

> ID：11740574
> 
> 赞同：0
> 
> 时间：2012-07-31T12:54:16.860
> 
> 标签：iphone, logging, logfiles

这种访问将是为了用户的利益。

这是允许的吗？如果不是为什么不呢？

或者它是否受到限制，即：他们允许它，但不要让开发人员记录信息。

我在 iTunes 商店中看到了许多日志应用程序，那么它与查看这个有什么不同呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:01:26.967

不，不可能，应用程序无法读取不在应用程序沙箱文件夹中的文件。

# android - 当我从 SQLite 检索 blob 值时，它会给出不同的值，因为它存储在数据库中

> ID：11740585
> 
> 赞同：1
> 
> 时间：2012-07-31T12:54:53.577
> 
> 标签：android, database, sqlite, cursor, blob

当我从 SQLite 检索 blob 值时，它会给出不同的值，因为它存储在数据库中。我不知道为什么会这样。当我使用`cursor.getString()`时，它给出了相同的值。但是当我使用时`curser.getBlob()`，它给出了不同的价值。此外，当我将`cursor.getString()`值转换为再次`bytes[]`使用`getBytes()`时，它会转换为存储在数据库中的不同值。

请告诉我解决方案，因为我无法找到发生这种情况的原因。

![](../Images/db20e66a2c254442552e662f3d152189.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:35:40.167

我认为您已经使用插入查询将数据插入到 sqlite 数据库中。在我看来，您应该使用以下方法插入数据以及图像。

```
CREATE TABLE IF NOT EXISTS " + DB_TABLE + "("+ 
               KEY_NAME + " TEXT," + 
               KEY_IMAGE + " BLOB);";

ContentValues cv = new  ContentValues();
cv.put(KEY_NAME,    name);
cv.put(KEY_IMAGE,   image);
database.insert( DB_TABLE, null, cv ); 
```

使用这个方法应该可以。如果没有，请让我知道。祝你好运。

# python - 熊猫：采取相应的差异

> ID：11740587
> 
> 赞同：0
> 
> 时间：2012-07-31T12:54:59.087
> 
> 标签：python, pandas

我有两个 D `ataFrame`，其中一个大于另一个（A）。B 上的标签都包含在 A 中。我想为对应的行/列值取差值 (AB)。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:12:16.943

You should be able to simply do A.sub(B). For example:

```
df = DataFrame(np.random.randn(4, 2), columns=['one','two'])
A = df.ix[1:, ['one', 'two']]
B = df.ix[:2, ['one']].apply(lambda x: x *2) 
```

If A is:

```
 one        two
1   -0.999523   -2.111082
2   -2.197760   -0.412689
3   -0.534728    0.037255 
```

and B is:

```
 one
0   -1.940326
1   -1.999046
2   -4.395521 
```

A.sub(B) will give you:

```
 one        two
0    NaN        NaN
1    0.999523   NaN
2    2.197760   NaN
3    NaN        NaN 
```

Or have I misunderstood the question?

# java - 如何在 JScrollPane 中将组件居中？

> ID：11740588
> 
> 赞同：2
> 
> 时间：2012-07-31T12:54:58.510
> 
> 标签：java, swing, netbeans, center

这是我的代码，我想在 JScrollPane 中居中 JTextPane：

```
 JFrame frame = new JFrame("Example");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    final JTextPane editor = new JTextPane();
    editor.setEditorKit(this);
    JScrollPane scroll = new JScrollPane(editor);
    //scroll.setAlignmentX(JScrollPane.CENTER_ALIGNMENT); <<<didnt change anything, so //'ed it

    frame.getContentPane().add(scroll);

    frame.setBounds(GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:12:08.740

问题可能是你框架的布局首先你必须设置框架的大小并设置对齐

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:21:57.890

由@Mr.Cool +1 补充答案

*   JFrame默认实现了BorderLayout，然后代码行将`frame.getContentPane().add(scroll);`所有可用空间填充到JFrame中

*   你有两个选择：

    a) 将另一个`JComponents`（可能为空`JPanels`）添加到其余区域`NORTH`、和`SOUTH`，然后可以调整大小`WEST``EAST``JScrollPane``JFrame`

    b) 使用`GridBagLayout`for `JFrame`（没有任何`GridBagConstant`），然后`JScrollPane`无法调整大小`JFrame`

# json - Titanium 使用 JSON 解析

> ID：11740593
> 
> 赞同：0
> 
> 时间：2012-07-31T12:55:09.910
> 
> 标签：json, titanium

我正在尝试从 PHPMyAdmin 检索数据并尝试将数据显示到选择器更改中......这是我的代码 var currentWin = Ti.UI.currentWindow;

```
 var sendit = Ti.Network.createHTTPClient();
 sendit.open('GET', 'http://localhost/mobileapp/productread.php');
 sendit.send();
  sendit.onload = function(){
 var json = JSON.parse(this.responseText);

 var json = json.mobile_product;

 var picker = Ti.UI.createPicker();
  // turn on the selection indicator (off by default)
 picker.selectionIndicator = true;

 var data = [];
  var pos;
 data.push (Ti.UI.createPickerRow({title:''+ json[pos].product_name +      '',custom_item:'b'}));
 }
 picker.add(data);
 currentWin.add(picker);

//var rw = db.execute("SELECT product_name, SUM(product_quantity)FROM mobile_product   GROUP BY product_name");

picker.addEventListener('change', function(e){
 var sendit = Ti.Network.createHTTPClient();
sendit.open('GET', 'http://localhost/mobileapp/orderread.php');
sendit.send();

sendit.onload = function(){
var json = JSON.parse(this.responseText);

var json = json.mobile_product;
 var pos;
var product_name = json[e.rowIndex];
 for (pos=0; pos < json.length; pos++) {

alert(''+json[pos].orders + '');
}
}
})
 } 
```

在这里，当我更改选择器时，警报会显示列（订单）的所有值以进行一次更改...如果我将选择器更改为下一个，则警报会再次出现在列中的所有数据中。例如，如果我在列（顺序）中有 10 个值，并且如果我更改选择器值，则警报出现 10 次，有 10 个值。我想根据选择器中的更改显示列中的值... . 我已经从 PHPMyAdmin 中为选择器检索了数据（产品名称）...当我更改选择器时，我希望显示该特定名称的值....我正在使用查询 SELECT SUM(product_quantity) As orders FROM PHP文件中的mobile_product GROUP BY product_name ..我的PHP文件是

```
<?php
//cust-mysql-123-04
$link = mysql_connect('localhost', 'root', '');
 if (!$link) {
die('Not connected : ' . mysql_error());
}
// make foo the current db
$db_selected = mysql_select_db('mobileapp', $link);
if (!$db_selected) {
die ('Can\'t use  : ' . mysql_error());
}
// Set the default namespace to utf8
mysql_query("SET NAMES 'utf8'");
if($result = mysql_query("SELECT SUM(product_quantity) As orders FROM mobile_product     GROUP BY product_name")) {
//echo mysql_num_rows($result);
  while ($row=mysql_fetch_array($result)) {
   // $json.= "<li>".$row['first_name']."</li>";
    $json[]=array(
    'orders'=>$row['orders']
    );
 }
}
echo json_encode(array( 'mobile_product'  =>   $json ));

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:17:19.573

您必须在 SQL 查询中包含不同的值。目前，似乎只有一个聚合函数 SUM()，一个静态 GROUP 语句，仅此而已。这将始终返回相同的值。

您还返回了一个不同的列集，然后您可能期望使用 as orders alius。

如果您希望返回不同的集合，则需要组装不同的 SQL SELECT 语句。

考虑以下文件：

1.  [这是如何在 php 中针对 MySQL 准备和执行 SQL 语句](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)
2.  [此函数将清除您传递给它的变量中的许多问题](http://php.net/manual/en/function.htmlspecialchars.php)
3.  [最后，您在 Titanium 中使用此方法构建请求。](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Network.HTTPClient)

4.  [您可能还希望查看以下有关形成和使用 GET 请求的文档](http://www.w3schools.com/php/php_get.asp)

# ocean - 如何在 Ocean 中创建新功能？

> ID：11740600
> 
> 赞同：0
> 
> 时间：2012-07-31T12:55:22.467
> 
> 标签：ocean, petrel

我正在使用 Ocean 2010.2，无法使用 CreateFunction 方法创建新函数。它说，“它在当前上下文中不存在”。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:53:42.767

如果您添加了一些有关如何尝试创建函数的代码示例，那就太好了。现在我可以建议您没有将必要的 Petrel 程序集添加到您的项目中。

这是我创建函数的示例：

```
Collection SimpColl = Collection.NullObject;
Function SimpFunction = Function.NullObject;
// Do not forget to use transactions
using (ITransaction trans = DataManager.NewTransaction())
{
    // Use current project to create collection
    // that will contain your function
    trans.Lock(PetrelProject.PrimaryProject);
    SimpColl = PetrelProject.PrimaryProject.CreateCollection("Simple collection");
    trans.Commit();
}

using (ITransaction trans = DataManager.NewTransaction())
{
    // Create your function in your newly created collection
    trans.Lock(SimpColl);
    SimpFunction = SimpColl.CreateFunction("Simple Function");
    trans.Commit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:12:27.433

可以为 Slb.Ocean.Petrel.DomainObject.Analysis.AnalysisRoot、Slb.Ocean.Petrel.DomainObject.Seismic.InterpretationCollection 和 Slb.Ocean.Petrel.DomainObject.Collection 对象调用 CreateFunction 方法。模式在所有情况下都是相同的。但是您的消息看起来不像海洋错误，但它看起来像一般的 VS 消息。出现此类消息的常见原因通常是：object 的声明和 object 的使用位于两个不同的隔离代码块中，彼此不可见。

# sql - 刷新 WebApp 偶尔返回 Internet Explorer 无法显示网页

> ID：11740603
> 
> 赞同：0
> 
> 时间：2012-07-31T12:55:35.020
> 
> 标签：sql, asp.net-mvc-3, internet-explorer-8

我有一个非常基本的 web 应用程序，它每两分钟运行一个存储过程并以表格格式显示数据。

它工作得很好，除了在换班时。

在这些时间内，还有其他进程在相同的数据上运行，但不足以导致超时。事实上，我有 sp 设置只返回那些时间的空白值，但问题仍然存在。

不是每次，而是每隔几天一次，而不是刷新数据，IE 会吐出“Internet Explorer 无法显示网页”并保持该状态直到刷新 (F5)。

日志中没有任何内容，SQL 探查器显示 sp 运行没有问题。sp 在 1 秒内执行。

**控制器**

```
 public ActionResult Desktop()
    {

        Response.AddHeader("Refresh", "120");

        try
        {
            var dResults = db.VDMDisplayReporting();
            return View(dResults.ToList());
        }
        catch (Exception ex)
        {
            return RedirectToAction("Fail", ex.ToString());
        }
    } 
```

**看法**

```
@foreach (var item in Model)
{

<table width="20%" class="checkerboard" cellpadding="5" cellspacing="1" border="0">
    <tr>       
        <tr>
            <td style="background-color:Silver">
                @Html.DisplayFor(modelItem => item.MachineId)
            </td>
       </tr>
        <tr>
            <td style="background-color: @item.YieldColor">
                @Html.DisplayFor(modelItem => item.Yield) 
            </td>
        </tr>
        <tr>
            <td style="background-color:  @item.UptimeColor")>
                @Html.DisplayFor(modelItem => item.Uptime) 
            </td>
        </tr>
        <tr>
            <td style="background-color: @item.CycleColor">
               @Html.DisplayFor(modelItem => item.Cycle)
            </td>
        </tr>                        
    </tr>
</table>

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:30:11.537

相关问题：[IE 不遵循重定向，给出“Internet Explorer 无法显示网页”](https://stackoverflow.com/questions/6948128/ie-doesnt-follow-redirect-gives-internet-explorer-cannot-display-the-webpage)

RedirectToAction 返回响应不是完整的位置 url，如 /Home/Action 但 IE 更喜欢完整的 url [http://domain.com/Home/Action](http://domain.com/Home/Action)

试试这个。

# html - 用于提取链接的 HTML Treebuilder XPath

> ID：11740605
> 
> 赞同：5
> 
> 时间：2012-07-31T12:55:37.193
> 
> 标签：html, perl, xpath, html-tree

我正在编写一个基本脚本，它只是从网页中提取所有链接。它是用 Perl 编写的，并使用了 WWW::Mechanize 和 HTML::Treebuilder::Xpath 模块，这两个模块都是我通过 CPAN 安装的。

我知道只使用 WWW::Mechanize 就可以轻松完成，但也想学习使用 XPath 来完成。

因此，该脚本将解析整个网页，并检查每个锚标记的 href 属性，提取链接并将其打印到控制台/将其写入文件。请注意，在下面的脚本中，我没有使用 use strict，因为我写这个只是为了澄清和理解使用 XPath 遍历 HTML 树的概念。

这是脚本：

```
#! /usr/bin/perl

use WWW::Mechanize;
use HTML::TreeBuilder::XPath;
use warnings;

$url="https://example.com";

$mech=WWW::Mechanize->new();
$mech->get($url);

$tree=HTML::TreeBuilder::XPath->new();

$tree->parse($mech->content);

$nodes=$tree->findnodes(q{'//a'}); # line is modified later.

foreach $node($nodes)
{
    print $node->attr('href');
} 
```

它给出了一个错误：

```
Can't locate object method "attr" via package "XML::XPathEngine::Literal" at pagegetter.pl line 23. 
```

我已将脚本修改如下：

```
$nodes=$tree->findnodes(q{'//a/@href'});

while($node=$nodes->shift)
{
  print $node->attr('href');
} 
```

错误：

```
Can't locate object method "shift" via package "XML::XPathEngine::Literal" 
```

我不确定如何打印 href 属性的值。

$nodes 应该包含所有 href 属性的列表？我相信它不存储值而是指向它的指针？

我尝试搜索和阅读示例，但我不知道如何去做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:07:55.337

有几个错误。维修：

```
# list context
my @nodes = $tree->findnodes(
    q{//a}       # just a string, not a string containings quotes
);

# iterate over array
for my $node (@nodes) { 
```

# c++ - 这种奇怪的条件运算符语法是什么？

> ID：11740607
> 
> 赞同：7
> 
> 时间：2012-07-31T12:55:42.243
> 
> 标签：c++, conditional-operator

我最近在代码库中看到了以下内容：

```
bool bRes = (a < b) ? a=b, true : false; 
```

如果`a < b`, then`a=b`被执行并且`bRes`为真。这里到底发生了什么？条件运算符的文档没有提到任何关于链接表达式的内容。

编辑：要清楚我得到了条件运算符部分，它是`a=b, true`一个让我感到困惑的单一表达式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T12:57:14.267

哇。这是[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)的用法。 `a=b, true`完全按照你说的做。它执行每个表达式并产生最后一个表达式的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T12:59:24.197

这是一个正确的代码，但写的风格很奇怪。该语言允许以这种方式使用逗号运算符。

等效的是

```
bool bRes;
if (a < b)
{
 a = b;
 bRes = true;
}
else
 bRes = false; 
```

# cakephp - 视图中的Cakephp文本区域换行符

> ID：11740612
> 
> 赞同：3
> 
> 时间：2012-07-31T12:55:54.307
> 
> 标签：cakephp

我在表单中添加了一个文本区域。问题是当保存换行符时，它会正确保存到数据库中，但在视图页面中，根本没有换行符。

示例：
在表单的文本区域中键入：
这
是
一个
示例

保存到数据库中：
这
是
一个
例子

查看页面显示为：
这是一个示例

有人对如何在视图页面中显示换行符有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T13:05:43.497

在您的视图页面中使用[nl2br功能。](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T09:13:23.733

嗨，如果您使用纯文本，请使用 h()。

```
echo nl2br(h($your_field_name)); 
```

# excel - 日期格式转换为 Excel

> ID：11740614
> 
> 赞同：1
> 
> 时间：2012-07-31T12:55:56.327
> 
> 标签：excel, batch-file, abap

我正在尝试将 BATCH 输入用于我的记录添加页面。

但我无法从 Excel 接收日期格式；它始终显示为“00000000”。

我试过这些例子：31.07.2012 20123007 20120730 等等..

但这些都不能解决我的问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:42:47.270

**当您从 SHDB 或BDC_OPEN_GROUP**功能模块**DATFM**参数创建批输入会话时，可以指示日期格式。如果 DATFM 参数值为“%”（默认），SAP 将使用用户的日期格式。

1.您可以使用代码将日期变量从内部格式转换为外部格式

```
DATA table_date_field TYPE d. "internal format YYYYMMDD, 8 digits
DATA screen_date_field TYPE bapi_date. "external format 10 characters
table_date_field = '20101231'.
WRITE table_date_field TO screen_date_field. 
```

2.  **您可以通过调用功能模块' DATUMSAUFBEREITUNG** '来获得适当的日期格式。

# android - String dateTime to Date -> 检查是否是今天

> ID：11740615
> 
> 赞同：3
> 
> 时间：2012-07-31T12:55:58.920
> 
> 标签：android, date, format

我需要一个函数来检查来自 rss 提要（事件）的日期是否是今天。rss 给出了一个字符串（在 CDATA 之间），所以我需要解析它。这个日期的形式是：

> 2012 年 8 月 1 日，星期三 00:00:00 +0002

在时间和时区没用的地方，只计算日期。

我想：我以与输入字符串相同的格式格式化今天的日期（为测试设置错误的电话日期）并且它们的测试是相等的。但显然设备的语言设置很重要，因为我得到了：

```
 Wed, 01 Aug 2012 00:00:00 +0002 = wo, 01 aug. 2012 14:36:55 +0200 
```

（我会使用一个子字符串来摆脱时间）。所以这行不通。

现在我尝试了一种新方法，但似乎有点过于复杂：获取字符串 --> 转换为日期 --> 将日期格式化为 ddMMyyyy 形式的字符串 --> 将今天的日期格式化为 ddMMyyyy 形式的字符串 --> 测试它们是否是平等的。但是由于某种原因，这也不起作用，因为从字符串到日期的解析不起作用。但我认为我的格式完全一样......任何人都知道如何实现这一点，或者我应该改变什么？

我的代码：

```
public boolean isAgendaToday(String inputstring){
          boolean isToday = false;
          SimpleDateFormat  format = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z");  
            Date deventDate = null;
            String seventDate;
             Date dtoday = new Date();
             String stoday;
             SimpleDateFormat dateOnly = new SimpleDateFormat("ddMMyyyy");
             stoday = dateOnly.format(dtoday);
             try {  
                deventDate = format.parse(inputstring); 
                seventDate = dateOnly.format(deventDate);
                 System.out.println(seventDate + " = " + stoday);
                if(stoday.equals(seventDate)){
                     isToday = true;
                 }
            } catch (ParseException e) {  
                // TODO Auto-generated catch block  
                e.printStackTrace();  
            } catch (java.text.ParseException e) {
                // XXX Auto-generated catch block
                e.printStackTrace();
            }

        return isToday;

      } 
```

这就是我每次尝试此操作后日志所说的内容（当然有不同的日期）：

> java.text.ParseException：无法解析的日期：2012 年 7 月 31 日星期二 00:00:00 +0002

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:18:07.697

```
 Date date = null;
        SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z",Locale.ENGLISH);
        try
        {
            date = format.parse("Wed, 01 Aug 2012 00:00:00 +0002");
        }
        catch (ParseException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Date current = new Date();
        if (date != null)
            Toast.makeText(MainActivity.this, "" + current.compareTo(date), Toast.LENGTH_LONG).show();
        else
            Toast.makeText(MainActivity.this, "null", Toast.LENGTH_LONG).show(); 
```

我认为这段代码可以满足您的需求 - 创建来自 RSS 的日期取决于提供的字段，而 new Date() 创建日期取决于您当前的日期时间，并且时间戳必须相同。

但是，如果您只想检查没有时间的日期，您可以将小时、分钟和秒设置为“0”

# java - 有没有办法在编译期间在 Java 类中使用 maven 属性

> ID：11740618
> 
> 赞同：42
> 
> 时间：2012-07-31T12:56:05.733
> 
> 标签：java, maven, compilation

我只想在编译时在我的 Java 类中使用 maven 占位符以减少重复。

像这样的东西：

**pom.xml**

```
<properties>
  <some.version>1.0</some.version>
</properties> 
```

**SomeVersion.java**

```
package some.company;

public class SomeVersion {

    public static String getVersion() {
        return "${some.version}"
    }

} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-31T13:03:40.393

只需在 src/main/resources 中创建文件 app.properties ，内容如下

```
application.version=${project.version} 
```

然后像这样启用Maven过滤

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources> 
```

就是这样 - 在应用程序代码中只需读取属性文件

```
ClassPathResource resource = new ClassPathResource( "app.properties" );
p = new Properties();
InputStream inputStream = null;
try {
    inputStream = resource.getInputStream();
    p.load( inputStream );
} catch ( IOException e ) {
    LOGGER.error( e.getMessage(), e );
} finally {
    Closeables.closeQuietly( inputStream );
} 
```

并提供这样的方法

```
public static String projectVersion() {
    return p.getProperty( "application.version" );
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-31T13:03:42.390

即使这不是一个很好的解决方案，也可以使用默认的 maven 资源插件。

首先，您需要指定资源插件。

```
<project>
  <build>
    <!-- Configure the source files as resources to be filtered
      into a custom target directory -->
    <resources>
      <resource>
        <directory>src/main/java</directory>
        <filtering>true</filtering>
        <targetPath>../filtered-sources/java</targetPath>
      </resource>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
    </resources>
  </build>
</project> 
```

之后，您将需要更改编译器插件的“默认”配置。

```
<project>
  <build>
      <!-- Overrule the default pom source directory to match
            our generated sources so the compiler will pick them up -->
      <sourceDirectory>target/filtered-sources/java</sourceDirectory>
  </build>
</project> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-21T09:34:49.773

我知道的最简单的方法是使用[Templating Maven Plugin](http://www.mojohaus.org/templating-maven-plugin/index.html)。

在你的 pom 中添加插件声明：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>templating-maven-plugin</artifactId>
    <version>1.0.0</version>
    <executions>
        <execution>
            <id>filter-src</id>
            <goals>
                <goal>filter-sources</goal><!-- add this if you filter main sources -->
                <goal>filter-test-sources</goal><!-- add this if you filter test sources -->
            </goals>
        </execution>
    </executions>
</plugin> 
```

如果您要过滤主要来源：

*   创建文件夹`src/main/java-templates`
*   将要过滤的源文件移动到该文件夹​​。重现包树结构，就好像你在`src/main`.

如果您也在过滤测试源：

*   创建文件夹`src/test/java-templates`
*   将要过滤的源文件移动到该文件夹​​。重现包树结构，就好像你在`src/test`.

假设您的来源包含有效的占位符，例如：

```
package some.company;

public class SomeVersion {

    public static String getVersion() {
        return "${project.version}"
    }

} 
```

现在，当您`compile`或`test`您的项目时，这些占位符应该已经被重视。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-04T20:05:12.867

如果您正在使用 Spring，则可以注入一个属性。步骤是：

1.  在 POM 文件中，您定义所需的所有配置文件，并且每个配置文件都必须具有您的自定义属性，在您的情况下

```
<profile>
	<id>dev</id>
	<properties>
		<some.version>Dev Value</some.version>
	</properties>
</profile>
```

2.  在配置文件的部分构建中，您定义过滤注入。
3.  在您的项目资源目录下，您创建一个属性文件（任何助记基督教名称）并将您的道具注入：

> custom.some.version=${some.version}

4.  在 spring-context 文件中定义属性占位符并定义 bean 或 beanProperty：

```
<context:property-placeholder location="classpath*:/META-INF/*.properties"/>
...
<bean id="customConfig" class="com.brand.CustomConfig">
	<property name="someVersion" value="${custom.some.version}" />
</bean>
...
```

5.  创建你的班级。

> ```
> package com.brand;
> 
> public class CustomConfig {
>   private String someVersion;
> 
>   public getSomeVersion() {
>   return this.someVersion;
>   }
> 
>   public setSomeVersion(String someVersion) {
>   this.someVersion = someVersion;
>   }
> } 
> ```

6.  注入你想使用的地方。此示例使用自动装配的 bean，但您也可以使用自动装配的属性。

> ```
> package com.brand.sub
> 
> public class YourLogicClass {
>   @Autowired
>   private CustomConfig customConfig;
> 
>   // ... your code
> } 
> ```

在最终编译中，您拥有正确的值。

# bash - for循环中的错误

> ID：11740619
> 
> 赞同：3
> 
> 时间：2012-07-31T12:56:07.333
> 
> 标签：bash, for-loop, grep

当我运行我的脚本时，我收到了这个错误：

```
234.sh: line 3: syntax error near unexpected token `do
234.sh: line 3: `for folder in $array ; do 
```

我没有看到错误。帮助？

```
#!/bin/bash
base=$(pwd)
array=`find * -type d`
 for folder in $array ; do
  cd $folder ;
  grep -n $1 * | while read line ;
   do    name=$(echo "$line" | cut -f1 -d:) ;
        if [ "$name" == "1234.sh" ]; then
        continue ;
        else
        string=$(echo "$line" | cut -f2 -d:) ;
        a=$(expr $string - 10)
        if [ $a -lt 1 ] ; then 
        a=1 ;
        fi ;
        b=$(expr $string + 10) ;   
        echo "-----------------------"
        echo $name:$a
        sed -n $a,${b}p $name;
        fi ;
    done
   cd $base ;
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:36:29.667

几点建议：

1.  使数组成为正确的数组，而不仅仅是字符串。（这是实际解决您的语法错误的唯一建议。）

2.  报价参数

3.  用于`IFS`允许`read`将您的行拆分为两个组件

4.  使用 subshel​​l 来消除对`cd $base`.

5.  大多数分号都是不必要的。

* * *

```
#!/bin/bash
array=( `find * -type d` )
for folder in "${array[@]}" ; do
  ( cd $folder
    grep -n "$1" * | while IFS=: read fname count match; do
      [ "$fname" == "1234.sh" ] && continue

      a=$(expr $count - 10); [ $a -lt 1 ] && a=1
      b=$(expr $count + 10) 
      echo "-----------------------"
      echo $fname:$a
      sed -n $a,${b}p $fname
    done
  )
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:04:30.173

```
#!/bin/bash

base=$(pwd)
array=`find . -type d`
for folder in $array
do
  cd $folder
  grep -n $1 * | while read line
  do    
      name=$(echo "$line" | cut -f1 -d:)
      if [ "$name" == "1234.sh" ]
      then
        continue
      else
        string=$(echo "$line" | cut -f2 -d:)
        a=$(expr $string - 10)
        if [ $a -lt 1 ]
        then 
          a=1
        fi
        b=$(expr $string + 10)
        echo -----------------------
        echo $name:$a
        sed -n $a,${b}p $name
      fi
  done
  cd $base
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:24:11.547

您要完成的工作看起来像是目录树中所有文件上指定模式的上下文 grep。

我建议你使用 Gnu grep [Context Line Control](http://www.gnu.org/software/grep/manual/grep.html#Context-Line-Control)

```
#!/bin/bash
base=$(pwd)
spread=10
pattern=$1

find . -type d | while read dir; do
    (cd $dir && egrep -A $spread -B $spread $pattern *)
done 
```

这是简单的版本，不处理 1234.sh 或空目录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T11:29:32.747

这个解决方案甚至更简单，而且还处理豁免文件名。它也取决于 xargs 和 Gnu grep[上下文行控制](http://www.gnu.org/software/grep/manual/grep.html#Context-Line-Control)。

```
#!/bin/bash
spread=10
pattern=$1

find . -type f ! -name "1234.sh" |
    xargs egrep -A $spread -B $spread $pattern 
```

# tridion - 如何使用 Tridion Resolver 从发布中删除项目？

> ID：11740622
> 
> 赞同：6
> 
> 时间：2012-07-31T12:56:16.090
> 
> 标签：tridion, resolver

我正在尝试为克里斯描述的组件实现自定义解析器： [http ://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-属性](http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute)

我想删除组件中使用的一些二进制文件（主要是 pdf）并阻止它们发布。我可以使用 item.GetListUsedItems 方法获取使用过的物品列表。如何删除它们？

使用：tridion 2009

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T07:48:33.933

在发布时，解析器进程确定应该发布哪些项目，例如当您发布结构组时，默认解析器会将结构组中的所有页面添加到发布事务中。

解析器仅处理发布事务中可直接发布的项目，即页面和动态组件表示。所以解析器不处理链接的多媒体组件，它们是由模板代码通过调用`AddBinary()`方法发布的。

如果您想从发布操作中删除多媒体组件，您应该查看处理这些组件的组件模板（如果将它们添加到包中，默认完成操作 TBB 通常会选择它们并发布它们）。但请记住，多媒体组件需要至少发布一次，否则您将永远无法在演示服务器上获得它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:01:08.363

检查以下代码片段以删除，您需要检查多媒体是否为 pdf，但会让您继续。这里是参考链接很好地解释了示例代码（下面的代码来自同一篇文章）。

[http://www.tridiondeveloper.com/a-custom-resolver-in-practice](http://www.tridiondeveloper.com/a-custom-resolver-in-practice)

```
 Component component = (Component)item;
        if (component.ComponentType == ComponentType.Multimedia)
        {
            foreach (ResolvedItem resolvedItem in originalResolveItemList)
            {
                if (resolvedItem.Item.Id != item.Id)
                {
                    resolvedItems.Remove(resolvedItem); // to remove ..
                }
            }
        } 
```

# python - 一个方法可以是同一个类的另一个方法的装饰器吗？

> ID：11740626
> 
> 赞同：26
> 
> 时间：2012-07-31T12:56:27.167
> 
> 标签：python, instance, decorator

我有一个类在他们的功能上有一个沉闷的重复模式，我想把这个模式变成一个装饰器。但问题是这个装饰器必须访问当前实例的一些属性，所以我想把它变成这个类中的一个方法。我有一些问题。

所以，这类似于我想要的：

```
class DullRepetitiveClass:
    def __init__(self, nicevariable):
        self.nicevariable = nicevariable

    def mydecorator(self, myfunction):
        def call(*args, **kwargs):
            print "Hi! The value of nicevariable is %s"%(self.nicevariable,)
            return myfunction(*args, **kwargs)
        return call

    @mydecorator            #Here, comment (1) below.
    def somemethod(self, x):
        return x + 1 
```

(1) 问题来了。我想用`DullRepetitiveClass.mydecorator`方法来装饰`somemethod`方法。但我不知道如何使用当前实例中的方法作为装饰器。

有没有一种简单的方法可以做到这一点？

编辑：好的，答案很明显。正如 Sven 在下面所说，装饰器本身只是转换方法。方法本身应该处理与实例有关的所有事情：

```
def mydecorator(method):
    def call(self, *args, **kwargs):
        print "Hi! The value of nicevariable is %s"%(self.nicevariable,)
        return method(self, *args, **kwargs)
    return call

class DullRepetitiveClass:
    def __init__(self, nicevariable):
        self.nicevariable = nicevariable

    @mydecorator            
    def somemethod(self, x):
        return x + 1 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T13:01:46.727

装饰器只得到一个参数——它所装饰的函数或方法。它没有将实例作为`self`参数传递——在调用装饰器的那一刻，甚至还没有创建类，更不用说类的实例了。该实例将作为第一个参数传递给修饰函数，因此您应该将`self`其作为第一个参数包含在`call()`.

我认为没有必要在类范围中包含装饰器。您可以这样做，但您也可以在模块范围内使用它。

# java - 泛型支柱 2

> ID：11740628
> 
> 赞同：0
> 
> 时间：2012-07-31T12:56:34.537
> 
> 标签：java, struts2

我有一个像这样的通用类

```
public abstract class GenericBaseClass<T extends GenericBaseVO> extends Base
{
    protected T filter;

    public T getFilter() {
        return filter;
    }

    public void setFilter(T filter) {
        this.filter= filter;
    }
} 
```

我有这样的第二堂课：

```
public class MyClass extends GenericBaseClass<MyVO> 
{
} 
```

我有这样的动作：

```
<action name="MyAction" class="MyClass">

</action> 
```

当我在表单中提交执行`MyAction`时，设置过滤器的对象是`GenericBaseVO`类型而不是`MyVO`类型。为什么？我能做些什么来纠正这个问题？

# javascript - 谷歌分析 & this.selectedIndex : 信息没有出现

> ID：11740632
> 
> 赞同：0
> 
> 时间：2012-07-31T12:56:44.733
> 
> 标签：javascript, google-analytics

我正在尝试跟踪`onChange`选择列表上的操作。我需要返回一个 selectedIndex，接缝不起作用。

这是我的代码：

```
<select name="triOrdre" id="triOrdre" 
    onchange="_gaq.push(['_trackEvent','Outils','Trier',this.selectedIndex]);">
    <option value="myURL0">Option0</option>
    <option value="myURL1">Option1</option>
    <option value="myURL2">Option2</option>
    <option value="myURL3">Option3</option>                  
    <option value="myURL4">Option4</option>
</select> 
```

我需要的信息是关于 selectedIndex 的 0、1、2、3 或 4。如果我放`this.value`，我会得到 selectedValue （所以 myURL0, 2, ...）。但是对 selectedIndex 没有任何作用。

但是：如果我在 Chrome 上尝试使用 GA 调试插件，插件会看到带有预期值的 trackevent。例如：`['_trackEvent','Outils','Trier',1]` 但在 firebug 或 HTTPFox 插件中没有出现任何内容。

感谢阅读，感谢您未来的帮助。

吉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:15:51.107

不同的浏览器处理脚本/html 语法错误的方式不同。正如迈克尔在您的评论中建议的那样，尝试在您的事件类别中适当地关闭您的单引号。

```
onchange="_gaq.push(['_trackEvent', 'Outils', 'Trier', this.selectedIndex]);" 
```

修复此问题将帮助您发现任何其他问题（如果存在），因为您将获得更一致的调试器结果。

**更新**

这可能是您的`onchange`事件处理方式`this.selectedIndex`。您可以尝试将该代码放在单独的函数中并使用`console.debug(this.selectedIndex)`以确保其获得预期值。

```
onchange="trackEvent(this)" 
```

然后...

```
function trackEvent(selectBox) {

 var selectIndex = selectBox.selectedIndex;
 console.debug(selectIndex);

 _gaq.push(['_trackEvent', 'Outils', 'Trier', selectIndex ]);

} 
```

这可以帮助您调试问题。另一件可能有帮助的事情是确保如果所选索引是`Value`您要跟踪的 GA，请确保它是整数而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:05:09.820

最后，我得到了答案。

`this.selectedIndex`是一个整数，GA API 接缝只需要 sting 值。

所以我需要像这样将 Int 值转换为 String ：

```
_gaq.push(['_trackEvent','Outils','Trier',this.selectedIndex.toString()]); 
```

谢谢你的帮助。

# c# - 定时移动精灵

> ID：11740637
> 
> 赞同：2
> 
> 时间：2012-07-31T12:57:12.470
> 
> 标签：c#, opengl, timing, stopwatch

我需要`List<Point>`在我的 OpenGL 游戏中按每个像素的路径（轨道）像素移动我的精灵，所以我需要实现一种控制时间的方法。我读到了不同的方法：使用`OnRenderUpdate`（但我不能比 1/fps 更快）、使用不同的线程来控制时间或使用 a `StopWatch`（而不是 a `Timer`）。我正在尝试最后一个：

```
private void Sprite_Move(Sprite sprite, List<Point> path) {
  track.Clear();
  for (int i = 1; i < path.Count; i++) {
    //memorize all track pixel, so I can update pixel per pixel my sprite position
    Bresenham2(path[i-1], path[i]);
  }
  //moving flag
  sprite.moving = true;
  //start my StopWatch
  timer.Start();
  Loop(timer, sprite);

}

private void Loop(Stopwatch timer, Sprite sprite) {
  int i = 1;
  while (timer.IsRunning) {
    //moving each 0.03s?
    if ((sprite.moving) & (timer.Elapsed.Milliseconds >= 30)) {
      if (i < track.Count) {
        //change sprite position to the i-th track pixel
        Sprite_Position(skinny, track[i]);
        i++;
        timer = StopWatch.StartNew();
        Console.WriteLine("Tick");
      }
      //if I'm on the end of the track I can exit
      else timer.Stop();
    }
  }
} 
```

我看不到我的精灵在移动。直到最后一次迭代，一切都被阻止了，然后我在轨道的最后一个像素上看到了我的精灵……传送！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:23:09.750

您可以使用某种全局时间值，而不是依靠计时器以某个时间间隔正确计时 - 这取决于您的框架或秒表，并查看其经过的时间。

例如，如果您的动画有 N 个步骤，并且动画总共需要 T 秒才能运行，您可以通过以下方式找到适合您的动画的正确步骤

```
int frame = (int)((CurrentTimeInSeconds / (float)T) * N) 
```

（请注意溢出，即如果`frame`>= N，则不再执行任何操作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:05:52.683

好吧，`StopWatch.Reset()`也停止计时器。见[这里](http://msdn.microsoft.com/de-de/library/system.diagnostics.stopwatch.reset%28v=vs.90%29.aspx)。所以在第一次迭代之后，你的 timer.IsRunning 将是错误的。

相反，您可以`timer.StartNew()`在循环中使用。

关于动画时间：我认为秒表暂时还可以。使用 StopWatch 或单独的线程可以让您独立于渲染速度。尽管当您坚持使用 2D 精灵进行动画制作时，这应该不是问题。

从我的一个旧项目：

```
 m_LastPoll.Stop();
    System.Diagnostics.Debug.Print("{0}:\t{1}", this.VendorID, m_LastPoll.ElapsedMilliseconds);
    m_LastPoll.Reset();
    m_LastPoll.Start(); 
```

这绝对有效。

# objective-c - 如何在自定义视图中禁用用户交互

> ID：11740638
> 
> 赞同：17
> 
> 时间：2012-07-31T12:57:11.647
> 
> 标签：objective-c, macos, cocoa, nsview

我有一个自定义视图`NSView`，我想禁用用户交互，但我不确定如何执行此操作。

我的想法是：

```
[myView setEnabled:NO]; 
```

但这是错误的并且不起作用。我怎样才能做到这一点，它只对用户可见，而没有别的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-08T14:39:43.180

NSView 没有 setEnabled: 或 setIgnoresMouseEvents:

实现返回[的`hitTest:`方法](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/hitTest%3a)`nil`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T09:02:46.217

子类化`NSView`并添加以下方法

```
-(void)mouseDown:(NSEvent *)theEvent
{

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T13:07:22.533

从[这里](http://www.cocoabuilder.com/archive/cocoa/71931-setenabled-on-nsview.html)：

```
//
//  NSView-DisableSubsAdditions.m
//  Can Combine Icons
//
//  Created by David Remahl on Tue Dec 25 2001.
//  Copyright (c) 2001 Infinity-to-the-Power-of-Infinity. All rights reserved.
//

#import "NSView-DisableSubsAdditions.h"

@implementation NSView(DisableSubsAdditions)

- (void)disableSubViews
{
    [self setSubViewsEnabled:NO];
}

- (void)enableSubViews
{
    [self setSubViewsEnabled:YES];
}

- (void)setSubViewsEnabled:(BOOL)enabled
{
    NSView* currentView = NULL;
    NSEnumerator* viewEnumerator = [[self subviews] objectEnumerator];

    while( currentView = [viewEnumerator nextObject] )
    {
        if( [currentView respondsToSelector:@selector(setEnabled:)] )
        {
            [(NSControl*)currentView setEnabled:enabled];
        }
        [currentView setSubViewsEnabled:enabled];

        [currentView display];
    }
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T00:29:04.753

这是 Swift 4 中的一个示例。将您的视图放入此自定义视图中。

```
class UserInterectionDisabledView: NSView {
    override func hitTest(_ point: NSPoint) -> NSView? {
        return nil
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-28T08:20:31.807

我认为覆盖`hitTest(_:)`并不理想，因为它可以阻止其背后的所有交互。

一个更好的方法是让视图拒绝`becomeFirstResponder`。这样事件就可以发送到下一个响应者，基本上它会跳过视图。

```
class SubclassNSView: NSView {

  public var isUserInteractionEnabled: Bool = true

  open override func becomeFirstResponder() -> Bool {
    if isUserInteractionEnabled == false {
      return false
    } else {
      return super.becomeFirstResponder()
    }
  }
} 
```

# java - Simple Join Spring Roo - 两个实体合二为一

> ID：11740641
> 
> 赞同：1
> 
> 时间：2012-07-31T12:57:17.873
> 
> 标签：java, sql, hibernate, join, spring-roo

我有两张桌子...

**用户**

*   ID
*   姓名
*   名称

**系统用户**

*   ID
*   导师
*   国家

它们通过 ID 关联。这是一个简单的连接是 SQL，但是我在使用 Spring Roo 对数据库进行逆向工程后尝试连接这两个表。我想不出将两个表显示为一个实体（或至少以这种方式显示）的最佳方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:04:06.593

也许把那个查询变成一个 VIEW 会给你你正在寻找的东西`to show the two tables as one entity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:59:58.250

似乎 SystemUser 应该扩展 User

# java - Java中的JDBC时间戳转义格式和SimpleDateFormat

> ID：11740645
> 
> 赞同：3
> 
> 时间：2012-07-31T12:57:39.150
> 
> 标签：java, timestamp, simpledateformat

我正在尝试提出`SimpleDateFormat`模式来解析和格式化 JDBC 时间戳，特别是以下格式的日期`yyyy-mm-dd hh:mm:ss.fffffffff`，其中`ffffffffff`表示纳秒。

不幸的是`new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss.SSS000000")`不起作用，抛出以下异常：

```
java.text.ParseException: Format.parseObject(String) failed 
```

这完全可以使用 SimpleDateFormat，还是我必须创建 java.text.DateFormat 的自定义子类来处理这种情况？**请注意**，这不是关于如何`yyyy-mm-dd hh:mm:ss.fffffffff`在 Java 中解析字符串的问题，我对声明性方法感兴趣，即 SimpleDateFormat 模式，它不需要对输入字符串进行额外修改。

**示例**：

我希望输入`2012-02-05 17:00:34.427000000` 被解析为 java.util.Date ，其中毫秒部分是`427`。

以下是我迄今为止尝试过的格式列表，但由于各种原因，它们*都失败了：*

*   `new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss.SSS000000")`-`java.text.ParseException: Format.parseObject(String) failed`
*   `new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSSSSS", Locale.US)`和-都`new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS", Locale.US)`被解析为*Fri Feb 10 15:37:14*而不是预期的*Sun Feb 05 17:00:34*。*（ 427000000*的纳秒部分被视为毫秒，即使只指定了 SSS）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-04T17:38:08.600

我知道这是一个迟到的答案，但我一直在研究一个类似的问题，我遇到了这个问题。

这里的问题`SimpleDateFormat`是期待 a `java.util.Date`，它没有纳秒字段。所以，它不处理这种情况。[java.sql.Timestamp](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)文档说它是`java.util.Date`一个纳秒字段的组合。**秒**的日期/时间值存储在对象的日期部分中。这意味着可以忽略剩余的毫秒数以支持纳秒字段。在我看来，这是`java.sql.Timestamp`一个糟糕的设计，因为它是`java.util.Date`.

无论如何，要回答这个问题，我认为不可能在不附加到由`SimpleDateFormat`.

这是一种方法：

```
 Timestamp timestamp = new Timestamp(System.currentTimeMillis());
    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss.");
    format.setTimeZone(TimeZone.getDefault()); // Set the TimeZone to whatever you are expecting.

    System.out.println(format.format(timestamp) + String.format("%09d", timestamp.getNanos()); 
```

**编辑：**

为纳秒字符串值添加了填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:01:27.030

编辑：现在您已经给了我们一个数据样本，它相当简单：

```
"yyyy-MM-dd HH:mm:ss.SSS" 
```

这肯定会解析您给出的值。您可能还想明确指定`Locale.US`，这样它就不会尝试使用不同的分隔符......

编辑：超过毫秒的尾随数据会导致问题。但是，数据的早期部分是固定长度的（我相信是 23 个字符），因此您应该能够编写：

```
Date date = format.parse(text.substring(0, 23)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:01:50.133

[RFC3339](http://www.ietf.org/rfc/rfc3339.txt)的日期模式格式为：

```
yyyy-MM-dd'T'HH:mm:ss.SSS'Z' 
```

除非您有来自资源提供者的不同日期格式。

如果你有小数秒：

```
yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z' 
```

* * *

编辑：根据你的例子，我解析你的字符串的格式是：

```
DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSSSSS"); 
```

# python - Django查看错误

> ID：11740647
> 
> 赞同：0
> 
> 时间：2012-07-31T12:57:42.077
> 
> 标签：python, django

我收到以下错误

```
Django Version:     1.4
Exception Type:     ViewDoesNotExist
Exception Value:    

Could not import ratings.views.HotelRating. View does not exist in module ratings.views. 
```

但这是我的`views.py`

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.shortcuts import render_to_response
from ratings.models import Hotel_Rating, Restaurant_Rating, Cafe_Rating, Pastry_Rating
from services.models import *
from ratings.forms import Hotel_Rating_From
from django.template import RequestContext

def HotelRating(request):
    if request.method == 'POST':
        form = Hotel_Rating_From(request.POST)
        if form.is_valid():
            user_id = form.cleaned_data['user_id']
            hotel_id = form.cleaned_data['hotel_id']
            user = User.objects.get(id = user_id)
            hotel = Hotel.objects.get(id = hotel_id)
            review = Hotel_Rating(hotel_id = hotel.id, user_id = user.id, overall_rating = form.cleaned_data['overall_rating'], service = form.cleaned_data['service'], cleanliness = form.cleaned_data['cleanliness'], location = form.cleaned_data['location'], rooms = form.cleaned_data['rooms'], restaurant = form.cleaned_data['restaurant'], room_service = form.cleaned_data['room_service'], price = form.cleaned['price'], comment = form.cleaned_data['comment'])
            review.save()
            return HttpResponseRedirect('/')
        else:
            form = Hotel_Rating_From(request.POST)
            return render_to_response('hotelreview.html', {'form': form}, context_instance = RequestContext(request)) 
```

这是我的`urls.py`文件

```
urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),
    (r'^register/$', 'reviewers.views.ReviewerRegistration'),
    (r'^hotelrating/$', 'ratings.views.HotelRating'),
    (r'^login/$', 'reviewers.views.LoginRequest'),

) 
```

我不知道我做错了什么，我在 settings.py 的 INSTALLED_APPS 中添加了评分应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:11:18.183

您可能有一个循环导入。将你的 import 语句移到你的 def 中，看看是否有帮助。

```
def HotelRating(request):
    from ratings.models import Hotel_Rating 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:33:41.493

您是否已精简`ratings/views.py`到可能是最简单的视图文件？如果你能用一个非常简单的视图让它工作，那么从那里开始工作到你现在所拥有的。

此外，在命名您的函数（将成为）和类时，请考虑遵循[PEP8 。](http://www.python.org/dev/peps/pep-0008/#function-names)它将使您与之共享代码的任何人（包括此站点）更容易！`HotelRating``hotel_rating`

# c# - 使用 Listview 和 XmlDataprovider 的 TwoWayBinding

> ID：11740659
> 
> 赞同：0
> 
> 时间：2012-07-31T12:58:40.453
> 
> 标签：c#, wpf, xaml, data-binding

我搜索了很多，但我没有找到解决我的问题的方法。

我有一个 XML 文件

```
<Module>
<Accounting>
    <tag tagname="tag1" displayname="display1">True</tag>
    <tag tagname="tag2" displayname="dispaly2">False</tag>
</Accounting>
</Module> 
```

这就是我的问题：我想将此 XML 文件绑定到一个列表视图，在那里我可以看到显示名称和一个复选框，我可以（取消）检查标签（双向绑定）

我的 XAML 文件：

```
<ListView Height="134.113" Width="227.409" Margin="0,-100,30,10">
                    <ListViewItem>
                        <StackPanel>
                            <CheckBox IsChecked="{Binding XPath=./Module/Accounting/tag}">
                                <TextBlock Text="{Binding XPath=./Module/Accounting/tag/@displayname}"/>
                            </CheckBox>
                        </StackPanel>
                    </ListViewItem>
                </ListView> 
```

但是列表视图只显示第一个项目“display1”而不是第二个..有人知道为什么吗？（因为我有（另一个）xmldataprovider，会不会有任何问题？）

谢谢
ps：对不起，英语不是我的第一语言；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:09:40.320

更新：

我明白你的问题是什么......如果你`Items`通过在 XAML 中定义一个项目来设置集合（这就是你正在做的事情）......那么你也不允许设置一个`ItemsSource`。

去掉`ListViewItem`...并通过定义`.View`或`.ItemsTemplate`为您定义您希望您的项目如何显示，`ListView`以便它知道如何显示您的项目。

看这里：

*   [http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-1](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-1)

*   [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b47444b1-a566-4787-9364-a2fbff481354/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b47444b1-a566-4787-9364-a2fbff481354/)

* * *

使用`XmlDataProvider`如下：

*   [http://www.codeproject.com/Articles/26875/WPF-XmlDataProvider-Two-Way-Data-Binding](http://www.codeproject.com/Articles/26875/WPF-XmlDataProvider-Two-Way-Data-Binding)

如果您希望能够在 XML 文档中创建新节点，请使用以下命令：

*   [http://www.codeproject.com/Articles/144820/WPF-XmlDataProvider-Two-Way-Data-Binding-Enhanced](http://www.codeproject.com/Articles/144820/WPF-XmlDataProvider-Two-Way-Data-Binding-Enhanced)

并绑定到文档中的项目：

*   [http://dotnet-experience.blogspot.co.uk/2011/11/wpf-working-with-xml-and.html](http://dotnet-experience.blogspot.co.uk/2011/11/wpf-working-with-xml-and.html)

*   [http://blogs.msdn.com/b/ashish/archive/2006/09/19/762085.aspx](http://blogs.msdn.com/b/ashish/archive/2006/09/19/762085.aspx)

# vim - 维姆·杰纳斯

> ID：11740662
> 
> 赞同：5
> 
> 时间：2012-07-31T12:58:45.143
> 
> 标签：vim, janus

对于这样一个随机的问题，我很抱歉，但是在阅读[Janus](https://github.com/carlhuda/janus/)时，我注意到它提供了几个快捷方式。

我认为它们与 MacVim 相关，并且想知道 Linux 等价物是什么。

s真正代表什么`<D-F>` `<D-/>`？`D`如何使这些命令起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:49:57.907

`D`代表 Mac`⌘</kbd> (command) key. There isn't a Linux equivalent (see `:help <D-`). However, you can remap them to something else.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T20:17:28.493

你读得不够仔细。

尽管我鄙视这种“分发”，但 Janus 的作者在提出他们的 Mac OS X 特定映射的Linux/Windows 版本（使用`Ctrl`or ）方面做得很好：例如，参见[第 60](https://github.com/carlhuda/janus/blob/master/janus/vim/core/before/plugin/mappings.vim#L60)行到[第 160 行](https://github.com/carlhuda/janus/blob/master/janus/vim/core/before/plugin/mappings.vim#L160)。`Alt``vim/core/before/plugin/mappings.vim`

要回答您的问题：

*   `<D-/>`在这里映射[，](https://github.com/carlhuda/janus/blob/master/janus/vim/tools/janus/after/plugin/NERD_commenter.vim)以及它的 Linux/Windows 替代方案。

*   `<D-F>`映射[到那里，](https://github.com/carlhuda/janus/blob/master/janus/vim/tools/janus/after/plugin/ack.vim)以及它的 Linux/Windows 替代品。

不过，`<A-`在大多数终端中，映射可能存在问题。

# javascript - Google MAP API 未捕获类型错误：无法读取 null 的属性“offsetWidth”

> ID：11740663
> 
> 赞同：210
> 
> 时间：2012-07-31T12:58:43.900
> 
> 标签：javascript, google-maps-api-3

我正在尝试将 Google MAP API v3 与以下代码一起使用。

```
<h2>Topology</h2>

<script src="https://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="{% url css_media 'tooltip.topology.css' %}" />
<link rel="stylesheet" type="text/css" href="{% url css_media 'tooltip.css' %}" />

<style type="text/css" >
      #map_canvas {
              width:300px;
            height:300px;
     }
</style>

<script type="text/javascript">

var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);

</script>

<div id="map_canvas"> </div> 
```

当我运行这段代码时，浏览器会这样说。

> 未捕获的类型错误：无法读取 null 的属性“offsetWidth”

我不知道，因为我遵循[本教程](https://developers.google.com/maps/documentation/javascript/tutorial)中给出的方向。

你有什么线索吗？

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-07-31T15:03:34.150

此问题通常是由于在需要访问它的 javascript 运行之前未呈现地图 div。

您应该将初始化代码放在 onload 函数中或 HTML 文件的底部，就在标记之前，以便 DOM 在执行之前完全呈现（请注意，第二个选项对无效 HTML 更敏感）。

[请注意，正如matthewsheets](https://stackoverflow.com/users/1963978/matthewsheets)所指出的，这也可能是由于您的 HTML 中根本不存在该 id 的 div（未呈现 div 的病态情况）

[从wf9a5m75](https://stackoverflow.com/users/697856/wf9a5m75)的帖子中添加代码示例，将所有内容放在一个地方：

```
<script type="text/javascript">

function initialize() {
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
        zoom: 8,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
}
google.maps.event.addDomListener(window, "load", initialize);

</script> 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-08-07T18:11:17.140

**对于可能仍然存在此问题的其他人**，即使在尝试了上述建议之后，在初始化函数中为您的地图画布使用不正确的选择器可能会导致与函数试图访问不存在的内容相同的问题。仔细检查您的地图 ID 是否与您的初始化函数和您的 HTML 匹配，否则可能会引发同样的错误。

换句话说，确保您的 ID 匹配。;)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-08-21T14:10:52.327

如果您未指定`center`或未`zoom`在地图选项中指定，您也可能会收到此错误。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-01-21T07:59:40.860

谷歌在示例中使用`id="map_canvas"`and `id="map-canvas"`，仔细检查并重新检查 id ：D

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2012-11-11T06:19:31.250

年，geocodezip 的答案是正确的。因此，像这样更改您的代码：（如果您仍然遇到麻烦，或者将来可能会有其他人）

```
<script type="text/javascript">

function initialize() {
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
        zoom: 8,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
}
google.maps.event.addDomListener(window, "load", initialize);

</script> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-11-29T12:32:30.927

就这样我添加了我的失败场景以使其正常工作。我有一个`<div id="map>`我正在加载地图的地方：

```
var map = new google.maps.Map(document.getElementById("map"), myOptions); 
```

并且 div 最初是**隐藏**的，并且没有明确设置宽度和高度值，因此它的大小为`width x 0`. 一旦我像这样在 CSS 中设置了这个 div 的大小

```
#map {
    width: 500px;
    height: 300px;
} 
```

一切正常！希望这可以帮助某人。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-09-20T00:27:56.820

**对于更多可能仍然存在此问题的其他人，**我使用的是自关闭`<div id="map1" />`标签，而第二个 div 没有显示，并且似乎不在 dom 中。一旦我将其更改为两个打开和关闭标签`<div id="map1"></div>`，它就起作用了。hth

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-06-19T20:29:01.207

我的单引号

```
var map = new google.maps.Map( document.getElementById('map_canvas') ); 
```

并用双引号替换它们

```
var map = new google.maps.Map( document.getElementById("map_canvas") ); 
```

这对我有用。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-09-16T15:19:58.080

还要注意不要写

```
google.maps.event.addDomListener(window, "load", init()) 
```

正确的：

```
google.maps.event.addDomListener(window, "load", init) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-05-10T00:29:18.437

将 ID（在所有 3 个位置）从“map-canvas”更改为“map”为我修复了它，即使我确保 ID 相同，div 有宽度和高度，而代码不是一直运行到窗口加载调用之后。这不是破折号。它似乎不适用于“地图”以外的任何其他 ID。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-03-31T12:26:23.387

另外，请确保您没有在选择器中放置井号 (#)

```
 document.getElementById('#map') // bad

    document.getElementById('map') // good 
```

陈述。它不是一个 jQuery。只是对匆忙的人的快速提醒。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-10-11T08:33:14.857

我有同样的问题，但问题是缩放没有在提供给谷歌地图的选项对象中定义。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-09-24T23:03:14.313

如果您在循环中创建多个地图，并且单个地图 DOM 元素不存在，则会破坏所有地图。首先，在创建新的 Map 对象之前检查以确保 DOM 元素存在。

```
[...]

for( var i = 0; i <= self.multiple_maps; i++ ) {

  var map_element = document.getElementById( 'map' + '-' + i.toString() );

  // Element doesn't exist, don't create map!
  if( null === map_element ) {
    continue;
  }

  var map = new google.maps.Map( map_element, myOptions);
}

[...] 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-07-13T07:47:38.193

如果您碰巧使用的是 asp.net Webforms，并且正在使用母版页在页面后面的代码中注册脚本，请不要忘记使用地图元素 (vb.net) 的 clientID：

```
ClientScript.RegisterStartupScript(Me.[GetType](), "Google Maps Initialization", String.Format("init_map(""" & map_canvas.ClientID() & """... 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-03-26T14:36:48.847

为了解决它，您需要添加`async defer`到脚本中。

它应该是这样的：

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"
    async defer></script> 
```

请参阅[此处](http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/)的异步延迟的含义。

由于您将从主 js 文件调用一个函数，因此您还需要确保这是在您加载主脚本的那个之后。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-05-10T10:41:19.153

*   在你的 HTML 中设置 ng-init=init()
*   并且在控制器中

    使用 $scope.init = function() {...} 而不是 google.maps.event.addDomListener(window, "load", init){...}

希望这会帮助你。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-11-21T12:47:58.840

`&libraries=places`确保在首次加载 API 时包含 Places 库参数。

例如：

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-01-27T07:11:09.983

我知道我参加聚会有点晚了，只是想补充一点，当页面中不存在 div 时也会发生错误。您还可以在加载谷歌地图函数调用之前先检查 div 是否存在。就像是

```
function initMap() {
    if($("#venuemap").length != 0) {
        var city= {lat: -26.2041, lng: 28.0473};
        var map = new google.maps.Map(document.getElementById('venuemap'), {
       etc etc
     }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-05-12T13:26:49.740

实际上解决这个问题的最简单方法就是在 Javascript 代码对我有用之前移动你的对象。我猜你的答案对象是在javascript代码之后加载的。

```
<style type="text/css" >
      #map_canvas {
              width:300px;
            height:300px;
     }

 <div id="map_canvas"> </div> // Here 

<script type="text/javascript">

var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);

</script>

<div id="map_canvas"> </div> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-07-24T09:36:37.520

在我的情况下，这些问题是使用`defer` [https://developer.mozilla.org/en/docs/Web/HTML/Element/script解决的](https://developer.mozilla.org/en/docs/Web/HTML/Element/script)

`<script src="<your file>.js" defer></script>`

您需要考虑浏览器对此选项的支持（我没有看到问题）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-02T21:10:19.393

检查你没有覆盖`window.self`

我的问题：我创建了一个组件并写`self = this`而不是 var `self = this`。如果不使用关键字`var`，JS会将该变量放在窗口对象上，所以我覆盖`window.self`了导致此错误的原因。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-08-25T01:15:23.737

这是对先前删除的帖子的编辑，以在答案本身中包含链接答案的内容。重新发布此答案的目的是为也偶然发现此问题的 React 0.9+ 用户充当 PSA。

# 原始编辑帖子

* * *

[在关注此博客文章](http://infinitemonkeys.influitive.com/little-framework-big-splash/)时使用 ReactJS 时也出现此错误。sahat 的评论[在这里](https://gist.github.com/maedhr/8823168)有所帮助 - 请参阅下面的 sahat 评论的内容。

> ❗️ React >= 0.9 的注意事项
> 
> 在 v0.9 之前，DOM 节点作为最后一个参数传入。如果你使用这个，你仍然可以通过调用 this.getDOMNode() 来访问 DOM 节点。
> 
> 也就是说，在最新版本的 React 中将 rootNode 参数替换为 this.getDOMNode() 。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-03-21T03:37:34.073

我的失败是使用

```
zoomLevel 
```

作为一个选项，而不是正确的选项

```
zoom 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-11-29T21:21:41.970

在 map api 键调用开始时添加异步延迟。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-07-26T09:42:39.663

在我处理的一个案例中，地图 div 会根据位置是否被公开而有条件地呈现。如果您不能确定地图画布 div 是否会出现在页面上，只需检查您`document.getElementById`是否正在返回一个元素，并且仅在地图存在时才调用它：

```
var mapEle = document.getElementById("map_canvas");
if (mapEle) {
    map = new google.maps.Map(mapEle, myOptions);
} 
```

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2016-09-23T00:19:47.513

这里的问题是没有参数的 API 链接`key`：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=places&key=YOURKEY"></script> 
```

这种方式工作得很好。

# javascript - 保存变量值并在页面刷新后检索它

> ID：11740669
> 
> 赞同：5
> 
> 时间：2012-07-31T12:59:04.920
> 
> 标签：javascript, ajax

我有一个字符串值保存在一个变量中，我的网页在某个过程后自动重新加载。我需要知道即使在页面刷新后我是否可以获取存储在该变量中的值？

我使用 javascript 代码刷新我的网页`window.location.reload()`

如果不是，如果我使用像 php 这样的服务器端脚本，它会起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T13:03:02.793

**JavaScript：**

1.  `localStorage`（仅限 HTML5 浏览器）- 您可以将其保存为页面本地存储限额的属性

2.  将其保存在 cookie 中

3.  将变量附加到 URL 哈希，以便`location.hash`在刷新后可以通过它进行检索

**PHP**

1.  将其保存为会话变量并在每次页面加载时通过 AJAX 检索它

2.  将其保存在 cookie 中（如果您要 cookie 也可以使用 JS 方法）

任何 PHP 方法都会很笨拙，因为您必须首先通过 AJAX 将变量的值发送到 PHP 脚本，然后在重新加载后通过 AJAX 检索它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T13:01:41.000

您可以将其存储为`$_SESSION`变量。

```
session_start();

$myVar = null;

// some code here

if (!isset($_SESSION['myVar'])) {
    $_SESSION['myVar'] = "whatever";
} else {
    $myVar = $_SESSION['myVar'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:01:34.737

您必须将此变量保存在 Cookie/Webstorage/Session 中。网页是无状态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:02:34.980

是的，您可以将变量保存在服务器端作为`session`值或在客户端`localstorage`（或作为`cookie`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T13:04:27.290

饼干是你的朋友：

```
// Set a cookie or 2
document.cookie = 'somevar=somevalue';
document.cookie = 'another=123';

function getCookie(name)
{
    // Cookies seperated by ;   Key->value seperated by =
    for(var i = 0; pair = document.cookie.split("; ")[i].split("="); i++)
        if(pair[0] == name)
            return unescape(pair[1]);

    // A cookie with the requested name does not exist
    return null;
}

// To get the value
alert(getCookie('somevar')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:04:29.527

使用 javascript，您可以将该变量存储到 cookie 中（用户必须启用 cookie），然后检索 cookie。

方法是这样的：

**保存**：

```
function setCookie(c_name,value)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + 1);
var c_value=escape(value);
document.cookie=c_name + "=" + c_value;
} 
```

**检索**：

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

参考：[http ://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# mule - 从消息中获取队列名称

> ID：11740670
> 
> 赞同：0
> 
> 时间：2012-07-31T12:59:05.697
> 
> 标签：mule

我用过骡子3。

在我的流程中，我需要使用队列名称添加选择。

如何从 xml 文件中的消息中获取队列名称？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:46:47.083

实际的 JMS 队列或主题在名为`JMSDestination`. 您可以从 mule 中将其提取为命名的消息属性，称为`JMSDestination`.

生成的 XML 可能如下所示（取决于您最终设置的方式）：

```
 <choice>
    <when expression="message.inboundProperties['JMSDestination'].endsWith('.A')">
      <!-- do something -->
    </when>
    <when expression="message.inboundProperties['JMSDestination'].endsWith('.B')">
      <! -- do something else -->
    </when>
    <otherwise>
      <! -- do the default -->
    </otherwise>
  </choice> 
```

# c - 以编程方式更改“高级 TCP/IP 设置” - 取消选中“在远程网络上使用默认网关”

> ID：11740673
> 
> 赞同：4
> 
> 时间：2012-07-31T12:59:17.417
> 
> 标签：c, windows, winapi, tcp, network-programming

![在此处输入图像描述](../Images/e6bcdad6fd3b93439d0a0ce0539cbf3e.png)

描述 ：

我以编程方式创建了一个拨号连接来与我的设备和笔记本电脑通信。并且一旦通过已创建的拨号连接建立连接，我通过 LAN 连接的 Internet 连接将无法正常工作，并且我的 LAN 连接状态（用于 Internet 连接保持）已连接。

为了克服这个问题，我需要取消选中“在远程网络上使用默认网关方式”选项，`right click my dial-up connection -> properties -> Netwroking TAB -> Select Internet Protocol (TCP/IP) -> Properties -> Advanced -> I get Advanced TCP/IP settings -> Unchek "Use Default Gate Way on Remote Network".`

我正在使用 RAS 函数为我的拨号连接创建电话簿。是否有任何结构可以将其作为一种选择。我没有找到任何结构参数来使它成为一个选项。请指教..

如何以编程方式做到这一点？我可以使用任何 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:54:17.633

我还没有测试来验证它，但我*猜*这对应于结构的`ForwardingEnabled`元素[`MIB_IPINTERFACE_ROW`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814496.aspx)。如果是这样，您可以使用[`SetIpInterfaceEntry`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814496.aspx).

您通常希望调用[`GetIpInterfaceTable`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814418.aspx)以获取每个接口的当前信息，然后将`ForwardingEnabled`成员修改为正确的成员，然后`SetIpInterfaceEntry`使用该 modified调用`MIB_IPINTERFACE_ROW`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:17:53.097

通过`RASEO_RemoteDefaultGateway`在创建电话簿时取消设置标志将禁用此选项。

可以使用 `RASENTRY`结构`dwoptions`成员取消设置此标志。

来自 Microsoft SDK 的内容：

`RASEO_RemoteDefaultGateway`- 如果设置了此标志，则当连接处于活动状态时，IP 数据包的默认路由是通过拨号适配器。如果清除此标志，则不会修改默认路由。此标志对应于 TCP/IP 设置对话框中的在远程网络上使用默认网关复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T06:32:31.473

我将赌注押在*AdvertiseDefaultRoute*和*DisableDefaultRoutes*标志上。使用*默认网关*选项只是覆盖当前网关并更改默认路由（`route print`在连接之前和之后检查）。

# crystal-reports-2010 - 水晶报告标签爬上页面

> ID：11740683
> 
> 赞同：1
> 
> 时间：2012-07-31T12:59:43.843
> 
> 标签：crystal-reports-2010

我使用 Crystal Reports 向导为 Avery 5260 标签创建模板。我最多可以在标签上打印 6 行。对于第 2 行到第 6 行的详细信息，如果行中的字段为空白或 null，我会进行抑制，因为我不希望标签上有空白行。字体是 Ariel 9。通过 (2) 行标签，您可以看到文本开始爬上标签，并且通过 (4) 行，它超出了标签。我正在为 VS 2010 (CRforVS_13_0_4) 使用当前版本的 CR。任何有助于纠正这种情况的帮助表示赞赏。

# java - 用 replaceAll 替换具有可变数量空格的字符串

> ID：11740685
> 
> 赞同：3
> 
> 时间：2012-07-31T12:59:47.243
> 
> 标签：java, regex, string

我需要用另一个字符串替换其内容（在固定位置）可能有一个或多个空格的字符串。

例如：

```
[   string   ] 
```

必须替换为：

```
anotherstring 
```

（“和字符串之间可能有更多或更少或没有空格）。而且替换必须不区分大小写。实际上我正在使用该表达式：

```
myString.replaceAll("[(?i)string]", "anotherstring"); 
```

但这仅在括号和字符串之间没有空格的情况下才有效。我如何构建一个表达式来考虑空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:02:45.837

如果您想允许使用任何空格：

```
myString.replaceAll("\\[\\s*(?i)string\\s*\\]", "anotherstring"); 
```

如果您只想允许空格使用：

```
myString.replaceAll("\\[ *(?i)string *\\]", "anotherstring"); 
```

请注意，您没有在正则表达式中转义`[`and `]`。`[`和`]`是分别标记字符类的开始和结束的正则表达式元字符。

所以 a`[(?i)string]`匹配单个字符，它是`(`, `?`, `i`, `)`, `s`, `t`, `r`, `i`,`n`或`g`

为了从字面上匹配它们，需要通过`\\`在它们前面放置一个来进行转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:01:33.997

该表达式不起作用，它只有一个字符类并且将匹配单个字符。你需要`"(?i)\\[\\s*string\\s*\\]"`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:20:13.180

您还需要包含正则表达式以匹配空格，即一个空格后跟一个 *，它匹配任意数量的空格实例，包括不包含空格。如果您至少需要一个空格，可以用 + 号替换它们。

这是您的案例的代码：

```
String myString="[      String      ]";
String result = myString.replaceAll("\\[ *(?i)string *\\]", "anotherstring"); 
```

# networking - 为社交网络设计提要

> ID：11740694
> 
> 赞同：5
> 
> 时间：2012-07-31T13:00:32.147
> 
> 标签：networking, feed, social

我计划开始为社交网络提要进行设计。并且想请教一下解决过类似问题的人，使用了哪些工具。

**客观的：**

为每个用户创建一个提要，这取决于他的朋友和他自己的事件。但是有必要支持提要中条目的聚合，例如 Facebook 提要。例如：

1) Michael 创建了一张新专辑 2) Joseph 和 David 对文章发表了评论... 3) Anthony 对文章发表了评论并加入了“Ruby on Rails”小组

**我发现了一些有趣的条目：**

1.  [https://github.com/technoweenie/allofthestars/tree/master/vendor/stratocaster](https://github.com/technoweenie/allofthestars/tree/master/vendor/stratocaster) 向 GitHub 中的 yuzayut 提供信息。但它们没有聚合。演示技术 - [http://technoweenie-ruby-onales.heroku.com/](http://technoweenie-ruby-onales.heroku.com/)

2.  “Feeding Frenzy：选择性地实现用户的事件源” [http://research.yahoo.com/node/3203](http://research.yahoo.com/node/3203)

3.  他们在 TimeLine App 聚合中进行的 FB 文档 [https://developers.facebook.com/docs/bestpractices/multiple-objects/](https://developers.facebook.com/docs/bestpractices/multiple-objects/)

4.  [http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture) - Etsy 提要

我将不胜感激有关个人经历的材料或评论的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T20:34:52.200

如果您只是在寻找来自不同社交网络的用户提要聚合器，您可以尝试查看[http://pavelk2.github.io/social-feed/](http://pavelk2.github.io/social-feed/)，它适用于 Facebook、Google+、Instagram 和 VK。它是开源的，您可以在此处获取代码：[https ://github.com/pavelk2/social-feed](https://github.com/pavelk2/social-feed)

# jqgrid - 将参数传递给 jqGrid 编辑行上的服务器端代码

> ID：11740695
> 
> 赞同：0
> 
> 时间：2012-07-31T13:00:34.770
> 
> 标签：jqgrid, jqgrid-asp.net

我正在尝试使用 JQgrid 并编辑我的对象。但是，我不知道如何将参数传递给服务器端代码。这是我的jq代码：

```
 jQuery("#tblList").jqGrid({
            url: 'CityList.aspx/GetList',
            editurl: 'CityList.aspx/GetList',
            mtype: 'POST',
            datatype: 'json',
            postData: { searchString: '', searchField: '', searchOper: '' },
            ajaxGridOptions: { contentType: "application/json" },
            serializeGridData: function (postData) {
                var propertyName, propertyValue, dataToSend = {};
                for (propertyName in postData) {
                    if (postData.hasOwnProperty(propertyName)) {
                        propertyValue = postData[propertyName];
                        if ($.isFunction(propertyValue)) {
                            dataToSend[propertyName] = propertyValue();
                        } else {
                            dataToSend[propertyName] = propertyValue
                        }
                    }
                }
                return JSON.stringify(dataToSend);
            },
            jsonReader: {
                root: "d.rows",
                page: "d.page",
                total: "d.total",
                records: "d.records"
            },
            colNames: ['Id', 'Şehir Adı'],
            colModel: [
                { name: 'CityId', index: 'CityId', hidden: true },
                { name: 'Name', index: 'Name', width: 400, editable: true, edittype: 'text' }
            ],
            ondblClickRow: function (id) { alert("You double click row with id: " + id); },
            pager: '#tblPager',
            rowList: [10, 20, 30],
            sortname: 'CityId',
            sortorder: 'desc',
            rowNum: 10,
            loadtext: "Yukleniyor....",
            shrinkToFit: false,
            multiselect: false,
            emptyrecords: "Kayit Bulunamadi",
            autowidth: true,
            shrinkToFit: true,
            height: "400",
            rownumbers: true,
            //subGrid: true,
            caption: 'Şehirler'
        }).navGrid('#tblPager', { add: true, edit: true, del: true, reload: true });

    });
    jQuery("#tblList").editGridRow(rowid, properties); 
```

我是 jqGrid 的新手，你能告诉我如何编辑我的记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:39:45.500

我设置了 DataRequesting 事件：

在后面的代码中-

```
 public void JQGridVets_DataRequesting(object sender, JQGridDataRequestEventArgs e)
    {
        ObjectDataSourceVets.SelectParameters["BusID"].DefaultValue = e.ParentRowKey;
        ObjectDataSourceVets.InsertParameters["BusID"].DefaultValue = e.ParentRowKey;
    } 
```

在 aspx 文件中 -

```
<asp:ObjectDataSource ID="ObjectDataSourceVets" runat="server" 
        SelectMethod="GetVetAll" TypeName="AHP.Data.PhoneBookRepository" 
        UpdateMethod="UpdateVet" InsertMethod="InsertVet" 
        OldValuesParameterFormatString="original_{0}"  >
        <InsertParameters>
            <asp:Parameter Name="FirstName" Type="String" />
            <asp:Parameter Name="M" Type="String" />
            <asp:Parameter Name="LastName" Type="String" />
            <asp:Parameter Name="vetphone" Type="String" />
            <asp:Parameter Name="vetemail" Type="String" />
            <asp:Parameter Name="Degree" Type="String" />
            <asp:Parameter Name="License" Type="String" />
            <asp:Parameter Name="Code" Type="String" />
            <asp:Parameter Name="BusID" Type="String" />
            <asp:Parameter Name="oper" Type="String" />
            <asp:Parameter Name="id" Type="String" />
        </InsertParameters>
        <SelectParameters>
            <asp:Parameter Name="BusID" Type="String" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="FirstName" Type="String" />
            <asp:Parameter Name="M" Type="String" />
            <asp:Parameter Name="LastName" Type="String" />
            <asp:Parameter Name="vetphone" Type="String" />
            <asp:Parameter Name="vetemail" Type="String" />
            <asp:Parameter Name="Degree" Type="String" />
            <asp:Parameter Name="License" Type="String" />
            <asp:Parameter Name="Code" Type="String" />
            <asp:Parameter Name="VetID" Type="String" />
        </UpdateParameters>
    </asp:ObjectDataSource> 
```

因此在 ObjectDataSource 中指定的 InsertMethod 中，busid 具有正确的值。

这用于从子网格添加子记录。

# objective-c - NSStatusBar 使用菜单拖放

> ID：11740702
> 
> 赞同：1
> 
> 时间：2012-07-31T13:01:05.083
> 
> 标签：objective-c, macos, nsmenu, nsstatusitem, nsstatusbar

我熟悉这里描述的技术：[Drag and Drop with NSStatusItem](https://stackoverflow.com/questions/5663887/drag-and-drop-with-nsstatusitem) to make an NSStatusBar item that can handle file drag & drop。

拥有支持拖放和常规菜单交互的状态栏项目的正确方法是什么，就像 Cloudapp 图标一样。

我希望用户能够左键单击 NSStatusItem 以查看正常的菜单列表以及允许文件拖放功能。

在我看来，如果我在 NSStatusItem 上使用自定义视图，我必须编写所有自己的点击处理程序代码。所以我必须自己手动检测点击并显示我的菜单项。

我只是想确保在开始实施之前没有更简单（或更好）的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:39:14.910

据我所知，您需要 NSStatusItem 上的自定义视图来处理拖放操作。不过，在这种情况下，也很容易将点击处理添加到视图中。你不必自己画菜单——如果这是你要的——调用`- (void)popUpStatusItemMenu:(NSMenu *)menu`你的 NSStatusItem 就足够了。

# php - 带有数组更新的 PHP 嵌套数组循环

> ID：11740705
> 
> 赞同：1
> 
> 时间：2012-07-31T13:01:10.430
> 
> 标签：php

我来自VB；使用权; SQL Server 背景最近介绍给 WAMP。我有一个问题，几个星期以来我都无法解决，我想我已经访问了网络上的每个论坛（包括这里），但都没有成功。

我有两个从 MySQL 记录集中填充的数组，一个用于站点购物车，另一个用于站点部门（目录），请参阅下面对填充数组的手动解释。

```
$catalog[] = array( 
  array('ProdID'=>2,'Name'=>'Alpha','DepID' =>2,'InBasket'=>'0'),       
  array('ProdID'=>6,'Name'=>'Alpha','DepID' =>2,'InBasket'=>'0'),
  array('ProdID'=>7,'Name'=>'Alpha','DepID' =>2,'InBasket'=>'0'),
  array('ProdID'=>8,'Name'=>'Alpha','DepID' =>2,'InBasket'=>'0'),
  array('ProdID'=>9,'Name'=>'Alpha','DepID' =>2,'InBasket'=>'0'),
);

$cart[] = array(
  array('Name'=>'Alpha2','Loc'=>'e_vol1','BasketID'=>'81','ProdID'=>'2','Quant'=>'1'),
  array('Name'=>'Beta4','Loc'=>'e_vol2','BasketID'=>'81','ProdID'=>'4','Quant'=>'1'),
  array('Name'=>'Alpha8','Loc'=>'e_vol3','BasketID'=>'81','ProdID'=>'8','Quant'=>'1'),
  array('Name'=>'Gamma21','Loc'=>'e_vol4','BasketID'=>'81','ProdID'=>'21','Quant'=>'1'),
); 
```

我需要做的是每次选择新目录时遍历目录数组，将购物车中每一行的 ProdID 与目录每一行的 ProdID 进行比较，当找到匹配项时，我想更新目录该行的“InBasket”值仅为“1”，表示该商品已经在客户购物车中，然后我可以在屏幕上显示（客户只能购买任何商品之一）。

有五个不同的部门（目录）将包含多达 10 种产品，购物车将包含四件物品（如果我幸运的话）

我尝试了一些循环，但它们似乎不起作用。

```
for ($x = 0; $x < count($catalog); $x++)
{
  for ($y = 0; $y < count($cart); $y++)
  {
    If ($catalog[$x]['ProductID'] == $cart[$y]['ProductID'] )
    {
      $cart[$x]['InBasket'] = 1;
    }
  }
} 
```

我相信我的数组是正确的，但是无论如何，循环似乎都会更新“InBasket”。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:07:14.083

您`$cart`有一个名为 的数组键`ProdID`，但您正在尝试使用`ProductID`不存在的键。然后，您尝试更新子数组的`InBasket`键`$cart`，而实际上它是`$catalog`数组的成员。

### 第一件事是第一件事：

摆脱那些增量循环。在 PHP 中，我们更常使用[`foreach`for 迭代](http://us3.php.net/manual/en/control-structures.foreach.php)，它更具可读性：

```
foreach ($catalog as &$catalog_item) {
  foreach($cart as $cart_item) {
    if ($catalog_item['ProductID'] == $cart_item['ProdID']) {
       // The InBasket key is part of the catalog, not the cart!
       $catalog_item['InBasket'] = 1;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:05:56.093

在您的示例中，两个表中的产品 ID 都是`ProdID`；您正在检查 2 个未定义/无效的数组元素（它们将相等）。

```
if ($catalog[$x]['ProdID'] == $cart[$y]['ProdID'] ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:11:40.613

几个问题：

1.  您使用了错误的键名：

    ```
    If ($catalog[$x]['ProductID'] == $cart[$y]['ProductID'] ) 
    ```

将其更改为：

```
 If ($catalog[$x]['ProdID'] == $cart[$y]['ProdID'] ) 
```

1.  在你正在做的第二个循环中：

    ```
    $cart[$x]['InBasket'] = 1; 
    ```

    但您在问题中声明您想更新目录，所以它应该是：

    ```
    $catalog[$x]['InBasket'] = 1; 
    ```

您应该使用@jicd 建议的方法进行循环，它更容易。

[在这里](http://php.net/manual/en/control-structures.foreach.php)查看有关如何使用的更多信息`foreach`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:09:34.077

您的数组示例的语法是错误的：

```
$catalog[] = array('whatever'); 
```

这意味着包含任何内容的数组都将包含在另一个数组中。

请参阅此示例：[http](http://codepad.org/OMbnEEjA) ://codepad.org/OMbnEEjA 然后您将看到不同之处。

# jquery - jquery ui弹出MVC 3未触发

> ID：11740713
> 
> 赞同：0
> 
> 时间：2012-07-31T13:01:37.507
> 
> 标签：jquery, asp.net-mvc-3, razor

开发一个 ASP.NET MVC 3 应用程序（我的第一个）并在使用 jQuery 时遇到了一些问题，因为我以前从未使用过它。我正在尝试在模式对话框中打开特定搜索结果的详细信息。

相关剃须刀代码：

```
@foreach (var item in Model.claims)
    {
        <tr>
            <td>@Html.ActionLink(item.CLAIMMASTID.Substring(Math.Max(0,item.CLAIMMASTID.Length-1)), "ClaimDetail", new {@id=item.CLAIMMASTID}, new {@class="ClaimsDetail"})</td>
        </tr>
    } 
```

并且控制器已设置为显示部分视图：

```
public ActionResult ClaimDetail()
    {
        return PartialView("_ClaimDetail");
    } 
```

到目前为止一切都很好，是吗？那就是我所想的。所以我的 jQuery 脚本看起来是这样的，这就是我认为问题所在：

```
$(function () {
    $('#ClaimsDialog').dialog({
        autoOpen: false,
        width: 800,
        resizable: true,
        modal: true
    });
    $('.ClaimsDetail').live("click", function () {
        var target = $(this).attr('href');
        $.get(target, function (result) {
            ('#ClaimsDialog').html(result);
            ('#ClaimsDialog').dialog({
            });
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:04:40.040

代替

```
 $.get(target, function (result) {
        ('#ClaimsDialog').html(result);
        ('#ClaimsDialog').dialog({
        });
    }); 
```

和

```
 $.get(target, function (result) {
        $('#ClaimsDialog').html(result).dialog('open');
    }); 
```

# c# - 在按钮上单击网格中我无法进入该功能

> ID：11740720
> 
> 赞同：0
> 
> 时间：2012-07-31T13:01:58.357
> 
> 标签：c#, asp.net

使用 CSharp，我没有在按钮单击时进入 (GridView1_RowDeleting) 函数。我不知道问题出在哪里，但浪费了很多时间。

默认.aspx

```
asp:GridView ID="GridView1" runat="server" OnRowDeleting="GridView1_RowDeleting"
    AllowPaging="True">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:ImageButton  ID="img1" runat="server" CommandName="GridView1_RowDeleting"  ImageUrl="~/Images/cross.png" />

            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

默认.aspx.cs

```
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:06:06.157

使用`OnItemCommand`：

```
protected void Test(object sender,DataGridEventArgs e) 
{ 
   if(e.CommandName == "GridView1_RowDeleting")
   {
       // do something
   }
}

<asp:GridView ID="GridView1"  runat="server" OnItemCommand="Test" AllowPaging="True">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:ImageButton  ID="img1"
                                  runat="server"
                                  CommandName="GridView1_RowDeleting"
                                  ImageUrl="~/Images/cross.png" />

            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:09:24.047

您必须使用 ImageButton 的 OnCommand 属性：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:40:49.837

请使用以下内容更新您的代码。

写`OnCommand="GridView1_RowDeleting"`

我希望它会奏效。

```
protected void GridView1_RowDeleting(object sender, CommandEventArgs e)
{
    // Do something      
} 
```

# sql-server-2008 - 使用 Ms Access 2007 分发服务器复制到 MS SQL Server 2008

> ID：11740721
> 
> 赞同：0
> 
> 时间：2012-07-31T13:02:07.657
> 
> 标签：sql-server-2008, ms-access-2007

现在我正在做薪资模块，我想将 Microsoft Access 2007 中的数据同步到 MS SQL Server 2008 中（每天员工使用指纹签入/签出时，数据存储在 ms.access 文件中，所以在月底，指纹管理员会将 ms access 中的数据同步到 SQL Server 2008），因为我使用 SQL Server 开发的用于存储员工资料的系统包括签入/签出时间。但是现在我想自己和每天同步它。所以每个人都可以给我任何关于如何从 ms 复制数据的建议。在工作日结束时访问 2007 到 SQL Server？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:05:46.893

如果您使用 MS Access 工作，最简单的做法是链接 SQL Server 表并运行合适的查询。

[导入或链接到 SQL Server 数据](http://office.microsoft.com/en-us/access-help/import-or-link-to-sql-server-data-HA010200494.aspx)

# javascript - 确保填充网格时单词不重复

> ID：11740727
> 
> 赞同：0
> 
> 时间：2012-07-31T13:02:24.167
> 
> 标签：javascript, jquery, jquery-ui

创建我的网格时，它应该有 6 个唯一的单词，但目前它会生成 6 个有时重复的单词。

我需要有人帮我写一个函数来解决这个问题。

在这里我有小提琴...... [http://jsfiddle.net/qBzPx/](http://jsfiddle.net/qBzPx/)

这是附有声音和图像的单词列表...

```
<ul style="display:none;" id="wordlist">
  <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>
  <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>
  <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/e/9/4/1/1195440435939167766Gerald_G_Dog_Face_Cartoon_-_World_Label_1.svg.med.png"></li>
  <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>
  <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>
  <li data-word="dad" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/H/I/n/C/p/Z/bald-man-face-with-a-mustache-md.png"></li> 
```

最后是脚本....

```
 var listOfWords = [];

var ul = document.getElementById("wordlist");

var i;
for(i = 0; i < ul.children.length; ++i){

   listOfWords.push({
         "name"   : ul.children[i].getAttribute("data-word"),
         "pic"    : ul.children[i].getAttribute("data-pic"),
         "audio"  : ul.children[i].getAttribute("data-audio")
      });
  }

console.log(listOfWords);

var chosenWords = [];

  for(var x = 0; x < 6; x++)
{
    var rand = Math.floor(Math.random() * (listOfWords.length));
    console.log('name ' + listOfWords[rand].name);
    chosenWords.push(listOfWords[rand].name);

    if (chosenWords.length < 12){
                chosenWords.push('  ');   
      }

    }

console.log(chosenWords);
var shuffledWords = [];
shuffledWords = chosenWords.sort(function() { return 0.5 - Math.random() });

var guesses = {};
console.log(shuffledWords);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    console.log(shuffledWords);
   for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        console.log(j);
        console.log(word);
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
             var cell = document.createElement('td');

            $(cell).addClass('drop').attr('data-word', word);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:11:23.683

由于它只有六个单词，因此一种快速的方法是循环直到所选单词列表的大小为六个条目，并不断生成随机 ID，直到列表中有不重复的单词。您所要做的就是不断检查数组的内容与随机词，直到完成。

我敢肯定有更优雅的方法，但它会执行得如此之快，你的用户不会注意到任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:14:05.013

这是变体：

```
var helper_array = [];
var keysOfWords= {};
for(i = 0; i < ul.children.length; ++i){

    keysOfWords[ul.children[i].getAttribute("data-word")] = i;
    listOfWords.push({
        "name"   : ul.children[i].getAttribute("data-word"),
        "pic"    : ul.children[i].getAttribute("data-pic"),
        "audio"  : ul.children[i].getAttribute("data-audio")
    });
    helper_array.push({
        "name"   : ul.children[i].getAttribute("data-word"),
        "pic"    : ul.children[i].getAttribute("data-pic"),
        "audio"  : ul.children[i].getAttribute("data-audio")
    });
}

var chosenWords = [];

for(var x = 0; x < 6; x++)
{
    var rand = Math.floor(Math.random() * (helper_array.length));
    console.log('name ' + helper_array[rand].name);
    chosenWords.push(helper_array[rand].name);

    helper_array.splice(rand,1);

    if (chosenWords.length < 12){
        chosenWords.push('  ');   
    }

} 
```

我们需要播放声音的地方：

```
$("#mysoundclip").attr('src', listOfWords[keysOfWords[rndWord]].audio); 
```

# java - 用 Joda-Time 表示一年中的一周

> ID：11740730
> 
> 赞同：5
> 
> 时间：2012-07-31T13:02:40.037
> 
> 标签：java, jodatime, week-number

[用Joda-Time](http://www.joda.org/joda-time/)库表示一年中一周的最佳方式是什么？我看起来像`YearMonth`代表一年中的月份一样优雅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:51:14.357

经过一番搜索，我找到了使用`Partial`类来解决这个问题的解决方案。

```
Partial yearWeek = new Partial(
                   new DateTimeFieldType[] {DateTimeFieldType.weekyear(), 
                                            DateTimeFieldType.weekOfWeekyear()}, 
                                            new int[] {year, week}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-01T23:17:44.350

# safari - Safari 6 开发者工具 XHR 发布数据

> ID：11740735
> 
> 赞同：1
> 
> 时间：2012-07-31T13:02:53.583
> 
> 标签：safari, ria

只是我，还是请求的正文不再可用？我正在寻找资源 (^1) -> XHR。

另外，有没有办法按时间顺序排列这些，而不是按字母顺序排列？

我在看这里![在此处输入图像描述](../Images/fdc50e193fd0e6d35114acf372230c61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:53:19.600

伙计们，如果您想在 safari 6 中查看现在无法实现的发布数据，请安装 firebug lite 扩展程序，然后您就可以获得发布数据。我用过它，它适用于 safari 6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:43:59.267

在回答您的第二个问题时，您可以通过单击秒表图标来按时间顺序查看它们——在您选择的页面图标的两个上方。

关于你的第一个问题......不，不仅仅是你。我也找不到任何发布数据，也没有看到解码的 json，它们用来显示响应是否为 application/json

# java - 使用动态字符串工作一个函数？

> ID：11740740
> 
> 赞同：0
> 
> 时间：2012-07-31T13:03:08.847
> 
> 标签：java, android, string, function, void

我想在我的应用程序上保存一些工作，是否可以获取字符串，例如“level1”，然后使用相应的函数，即 level1();？我的主要观点是不要做一个巨大的 switch-case 语句，而只是在一个存储类中创建几个级别函数，并且每当你升级时，字符串将变为“级别”+数字，其中数字是 int，所以让假设现在您处于第 10 级，将运行的函数是 level10()；

我希望我解释清楚了..对不起，如果没有..希望你明白！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:06:54.137

我相信您想在运行时使用其名称作为字符串来调用方法。

你可以通过反射来做到这一点。

`Class.getMethod(String methodName, Class... parameterTypes)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:07:11.070

不要从方法名称的角度来考虑这一点，除非你想用反射来解决这个问题（你不想这样做，也没有必要）。

如果您确实需要将字符串转换为方法调用——[这是一个很大的“如果”](https://stackoverflow.com/a/11740809/139010) ——创建一个`Map<String, Foo>`where`Foo`实现了一些类似“可调用”的接口。然后字符串到方法的查找很简单：

```
Map<String, Foo> commands = /* ... */;
Foo foo = commands.get("level42");
foo.bar(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:06:38.743

听起来你真的应该有*一个*

```
void setLevel(int level) 
```

称呼。可以随意忽略（例如）11-14 级或其他任何内容......但是拥有单独的方法并通过名称调用它们会非常难看。您可以通过反思来做到这一点，但您应该首先考虑其他选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:06:30.270

请参阅此帖子的最佳答案：

[Java动态函数调用](https://stackoverflow.com/questions/3050967/java-dynamic-function-calling)

我还建议遵循他们关于结构的建议，创建一个更加面向对象的解决方案，而不是使用反射。

# forms - 不要填写请求范围的bean

> ID：11740745
> 
> 赞同：3
> 
> 时间：2012-07-31T13:03:28.573
> 
> 标签：forms, jsf, managed-bean

我有一个请求范围的 bean，它填充了表单中的各种属性。然后使用这些属性来更新另一个视图范围的 bean。现在我想给用户以这样一种方式重置表单的可能性，即所有表单字段都保存第一次加载页面时的值。这些值是通过 bean 本身定义的：

```
@ManagedBean
@RequestScoped
public class ItemSearchBean {

    private Rarity minRarity = Rarity.None;
    private Rarity maxRarity = Rarity.None;

    ...

} 
```

请注意，尽管表单提交按钮实际上调用了一个 ajax 请求，因此不会继续重新加载整个页面。

提交按钮：

```
<p:commandButton value="Search"
    actionListener="#{itemSearchBean.refreshTable}"
    update="itemTable,notify"/> 
```

我已经尝试使用一个简单的重置按钮，但它只是将表单重置为最后提交的值：

```
<p:commandButton type="reset" value="Reset"/> 
```

必须以某种方式向服务器询问新的 bean（或阻止它填充 bean），但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:19:43.270

您应该能够使用指向同一视图的纯 HTML 链接来做到这一点：

```
<a href="yourpage.xhtml">Reset</a> 
```

或者让 JSF 为您创建链接：

```
<h:link value="Reset" /> 
```

这样，您将获得一个新的 GET 请求，该请求将创建一个新的 UIViewRoot，就像您在新的浏览器选项卡中访问同一个视图一样。

如果你想要一个按钮，你可以使用[`h:button`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/button.html)

```
<h:button value="Reset" /> 
```

此按钮将依赖于在点击时重新加载页面的 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:51:03.570

您也可以进行两阶段设置。更多的工作，但如果你更进一步，它允许各种撤消工作流程。

基本上，有两个 bean 用通常的访问器/修改器对封装您的表单。然后在您的控制器中，仅公开一个（x 或 y），这就是您的“表单 bean”。在 y 中，您存储从存储库检索的原始副本，这样您就可以进行字段级别或 bean 级别的还原，而无需重新加载页面或从存储库进行完整的数据重新编组。

所以，简单地说：

*   2 个封装表单的 bean（如果它映射到表单上，您甚至可以重用您的实体）。
*   在数据编组期间从 repo 中填写两者
*   在 facelets 中向用户公开一个
*   保留第二个作为重置/还原字段或整个表单的备份

还有其他方法可以剥去“撤消”猫的皮，这只是另一种。

# hibernate - 触发了休眠实体拦截器但设置值不保存

> ID：11740746
> 
> 赞同：7
> 
> 时间：2012-07-31T13:03:28.823
> 
> 标签：hibernate, spring-mvc, spring-transactions

我正在使用弹簧配置的休眠应用程序。有事务管理和一个定义为 entityInterceptor 的 auditInterceptor。当我调试代码时，我正在输入 entityInterceptors 方法并设置日期，但是在保存结束时它们不在数据库中:(。

考虑以下配置

```
 <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">     
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=${hibernate.dialect}
                hibernate.show_sql=${hibernate.show_sql}
                hbm2ddl.auto=${hbm2ddl.auto}
            </value>
        </property>
        <property name="schemaUpdate">
            <value>true</value>
        </property>
        <property name="annotatedClasses">
            <list>
                                .. bunch of annotatedClasses" ...
            </list>
        </property>
    </bean>

<bean name="auditInterceptor" class="com.mbalogos.mba.dao.AuditInterceptor" />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
        <property name="entityInterceptor" ref="auditInterceptor"/>
    </bean>

    <bean id="namedQueryDao" class="com.mbalogos.mba.dao.NamedQueryDaoImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

并跟随 entityInterceptor

```
public class AuditInterceptor extends EmptyInterceptor{

    /**
     * 
     */
    private static final long serialVersionUID = -8374988621501998008L;

    @Override
    public boolean onSave(Object entity, Serializable id, Object[] state,
            String[] propertyNames, Type[] types) {
        if(entity instanceof DomainObject){
            Timestamp date = new Timestamp(new Date().getTime());
            ((DomainObject)entity).setCreationDate(date);
            ((DomainObject)entity).setModificationDate(date);
        }       
        return true;
    }

    @Override
    public boolean onFlushDirty(Object entity, Serializable id,
            Object[] currentState, Object[] previousState,
            String[] propertyNames, Type[] types) {
        if(entity instanceof DomainObject){
            DomainObject domainObject = (DomainObject)entity;
            Timestamp date = new Timestamp(new Date().getTime());
            domainObject.setModificationDate(date);             
        }
        return true;
    }

    @Override
    public void onDelete(Object entity, Serializable id, Object[] state,
            String[] propertyNames, Type[] types) {
        super.onDelete(entity, id, state, propertyNames, types);
    }

    @SuppressWarnings("rawtypes")
    @Override
    public void preFlush(Iterator entities) {
        super.preFlush(entities);
    }

    @SuppressWarnings("rawtypes")
    @Override
    public void postFlush(Iterator entities) {
        super.postFlush(entities);
    }
} 
```

在保存方法之后，将 sessionFactory 注入到类中

```
public <T extends DomainObject> T save(T objectToSave) {
    Session currentSession = null;
    try {
        currentSession = sessionFactory.getCurrentSession();
        currentSession.save(objectToSave);

        return objectToSave;
    } catch (Exception ex) {
        logger.error(ex);
    }
    return null;
} 
```

任何人都知道为什么会发生这种行为。哦，我还尝试将 entityInterceptor 放在 sessionFactory 而不是我第一次尝试的 transactionmanager 中，同样的行为:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T18:01:25.837

我设法弄清楚了，我不得不使用属性名及其状态而不是实体对象......奇怪的是，如果你不能使用它，为什么要提供实体对象:(

```
@Override
public boolean onFlushDirty(Object entity, Serializable id,
        Object[] currentState, Object[] previousState,
        String[] propertyNames, Type[] types) {
    return audit(currentState, propertyNames);              
}

@Override
public boolean onSave(Object entity, Serializable id, Object[] state,
        String[] propertyNames, Type[] types) {
    return audit(state, propertyNames);
}

private boolean audit(Object[] currentState, String[] propertyNames) {
    boolean changed = false;
    Timestamp timestamp = new Timestamp(new Date().getTime());
    for(int i=0;i<propertyNames.length;i++){
        if("creationDate".equals(propertyNames[i])){
            Object currentDate = currentState[i];
            if(currentDate == null){
                currentState[i] = timestamp;
                changed = true;
            }
        }

        if("modificationDate".equals(propertyNames[i])){
            currentState[i] = timestamp;
            changed = true;
        }
    }
    return changed;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:33:15.263

谢谢肯尼，我也面临同样的问题。就我而言，拦截器正在为某些实体工作，而对于其余实体，它们不起作用。
一些可能的优化可能是：
* 如果您已完成搜索这两个属性，则中断循环。
* 如果您想仅使用 DomainObject 应用审核方法，则使用过滤此方法`if(entity instanceof DomainObject)`

我仍然很好奇，为什么直接在实体对象上设置属性对某些实体不起作用。如果您或任何人知道原因，请在此处发布。

# blackberry - 在 BrowserField 中加载文档时如何推送新屏幕？

> ID：11740750
> 
> 赞同：0
> 
> 时间：2012-07-31T13:03:44.637
> 
> 标签：blackberry

在我的应用程序中，我有一个登录屏幕。当用户输入正确的用户名和密码时，我必须从网站收集信息并导航到主屏幕。

我尝试了以下代码。但是这段代码不起作用。如何实现？

```
public final class MyScreen extends MainScreen {
    public MyScreen() {
        BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
        myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,
        BrowserFieldConfig.NAVIGATION_MODE_POINTER);
        BrowserField browserField = new BrowserField(myBrowserFieldConfig);

        BrowserFieldListener list = new BrowserFieldListener() {
            public void documentLoaded(BrowserField browserField, Document document) throws Exception {
                String url = document.getBaseURI();
                String val = "http://demo.....";
                //i am checking the correct url and i will navigate to main screen
                if (url.equals(new String(val))) {
                    UiApplication.getUiApplication().pushScreen(new Main());//here i got IllegalStateException ..
                }
                System.out.println(" Login  URL " + url);
                //super.documentLoaded(browserField, document);
            }
        };

        browserField.addListener(list);
        add(browserField);
        String URL = "http://demo.....";
        if (DeviceInfo.isSimulator()) {
            URL = URL + ";deviceSide=true";
        }
        browserField.requestContent(URL);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:51:53.140

代替

```
 UiApplication.getUiApplication().pushScreen(new Main()); 
```

利用

```
 UiApplication.getUiApplication().invokeLater(new Runnable()
                {
                    public void run() 
                    {
                        UiApplication.getUiApplication().pushScreen(new Main());
                    }
                }); 
```

你需要在ui Thread下做。核实。

# html - 在段落中扩展 Ul 列表

> ID：11740751
> 
> 赞同：2
> 
> 时间：2012-07-31T13:03:49.043
> 
> 标签：html, css, html-lists

我需要将 UL 列表放在 p 标签内。我只在 p 标签内添加了，但它并不完全从 p 标签内开始。而且 p 标签也有 1600px 的宽度，所以我需要 li 元素超出该宽度（我有滚动条）。现在 li 元素在多行中流动。

这是我的演示 [http://jsfiddle.net/VvuU4/2/](http://jsfiddle.net/VvuU4/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:11:15.230

不幸的是，HTML 不允许`ul`（或`div`）位于 内部`p`，因此浏览器会自动更正 DOM：

```
<p>
    <ul><li>etc</li></ul>
</p> 
```

...看起来像这样：

```
<p></p>
<ul><li>etc</li></ul>
<p></p> 
```

您可以使用他们内置的开发人员工具来验证这一点。所以你需要改变你的标记。也许将 更改`p`为`div`?

* * *

至于问题的第二部分，这是一个很好的起点：

```
ul.list2 {
    width: 500px; /* adjust to suit your needs */
    overflow: auto;
    white-space: nowrap;
}
ul.list2 li {
    display: inline-block;
    vertical-align: top;
} 
```

它设置`ul`在必要时使用滚动条，并告诉其中的内联元素不要换行。然后它将列表项设置为内联块项，这使它们并排放置（如 display: inline;），但行为更像块项（即边距、填充、宽度、高度按您的预期工作）。

# android - Android有没有办法只用一台设备锁定套接字？

> ID：11740753
> 
> 赞同：1
> 
> 时间：2012-07-31T13:03:56.890
> 
> 标签：android, sockets

我正在创建一个测试应用程序，它使用套接字在两个设备之间创建连接并传输一些数据（一种消息传递应用程序）。

我的问题是：当它已经与另一个设备连接时，有什么方法我不会让其他设备连接到另一个设备。例如，我有两个设备`A`并且`B`它们已连接。我不想让设备`C`连接到它们中的任何一个。

任何想法我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:23:36.687

好吧，看看 A 和 B 需要如何监听才能让 C 连接 - 即类似 ServerSocket 的东西，一旦它成功地在 A 和 B 之间建立连接，就停止监听传入的连接？

如果没有您关于如何连接的代码，我无法提供更多信息，但这应该是如何做到的。

# android - 如何在 android phonegap 中禁用字典模式？

> ID：11740755
> 
> 赞同：1
> 
> 时间：2012-07-31T13:03:57.160
> 
> 标签：android, cordova, dictionary

> **可能重复：**
> [如何在android中以编程方式禁用拼写校正](https://stackoverflow.com/questions/7330234/how-to-disable-spell-correction-programmatically-in-android)

我需要以编程方式禁用字典。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:46:36.303

你可以在你的活动中使用它

```
setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS) 
```

# symfony - 在错误的 URL 上重定向用户

> ID：11740757
> 
> 赞同：2
> 
> 时间：2012-07-31T13:04:02.227
> 
> 标签：symfony

每当用户输入错误的网址时，有没有办法将用户重定向到主页？

假设`app.php/Contact`触发 404 错误，我希望将所有 404 错误重定向到主页？

我很确定我一次在某个地方读到过，但再也找不到了。我认为这是配置文件中的 else 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:25:54.893

您应该扩展[ExceptionController](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/TwigBundle/Controller/ExceptionController.php#L26)并`showAction()`使用您需要的逻辑重新定义。

简单来说：

```
if (404 === $exception->getStatusCode()) {
    //do your logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:08:08.670

使用 .htaccess 文件并添加以下行：

```
ErrorDocument 404 /home.php 
```

# windows-phone-7 - 如何将 WP7 应用程序迁移到 Windows 8 Metro 风格应用程序

> ID：11740758
> 
> 赞同：2
> 
> 时间：2012-07-31T13:04:01.813
> 
> 标签：windows-phone-7, migration, windows-8

我想将我的 Windows Phone 7 应用程序迁移到 Windows 8。

我在此文档之后开始这样做：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx)

这些是步骤：

1.  启动适用于 Windows 8 的 Microsoft Visual Studio Express 2012 RC，并使用 C++、C# 或 Visual Basic 创建一个新的 Metro 风格应用程序。选择与您的应用布局和功能最匹配的项目模板。有关详细信息，请参阅使用模板（C#、C++、Visual Basic）快速启动 Metro 风格应用。

2.  复制要在新项目中重复使用的文件夹、代码和资产文件。

3.  在 Visual Studio 解决方案资源管理器中，单击“显示所有文件”。

4.  选择您复制的文件和文件夹，然后右键单击它们并选择包含在项目中。

5.  执行全局搜索并替换以将“System.Windows”替换为“Windows.UI.Xaml”。

6.  将原始 XAML 代码的可重用部分复制到新项目的 XAML 文件中，或根据需要复制到新创建的 XAML 文件中。您通常可以复制和重用页面布局根（通常是 Grid 元素）的内容，但不能复制和重用最外层元素（通常是 PhoneApplicationPage 元素）。

我的问题从第 2 点开始：假设我有一个页面：Settings.xaml 和 Settings.cs。我必须复制它们还是不复制它们并稍后添加代码？如果我添加 Settings.xaml 我会因为标签而收到错误：

```
 <phone:PhoneApplicationPage ...> 
```

就像它在第 6 点说的那样。

我的 dll 或我的“普通”类没有任何问题，它们没有连接到 xaml。

当我创建一个 Windows 8 页面时，我不知道在哪里从 Windows 8 中的 WP7 添加我的代码

```
 <Grid Background="Transparent">

  .....Code.....

  </Grid> 
```

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:42:31.357

我同意 ColinE，而不是直接复制所有文件，而是创建一个新的 Windows 8 项目并复制适当的 XAML 元素和 C#。如果您创建了单独的支持 .cs 文件，那么这些文件应该可以很好地复制，但如果您的代码都在一个文件中，您需要弄清楚要复制哪些方法以及将它们放在哪里。

至于使用哪种应用程序（空、网格、拆分等），这取决于您的应用程序及其用途。查看为应用程序设计 UX 文章，以帮助找出最适合您的应用程序的方法：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh779072](http://msdn.microsoft.com/en-us/library/windows/apps/hh779072)。

这是另一篇关于将 Windows Phone 7 应用程序移植到 Windows 8 Metro 应用程序的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:11:10.550

处理 XAML 文件的最简单方法可能是使用 Visual Studio 在 Win8 项目中创建新的用户控件/页面。然后，您可以将 XAML 从 WP7 剪切并粘贴到 Win8 中。您还可以在此过程中复制代码隐藏。

有一些太多的更改使得可以直接复制 XAML/cs 文件。

# sql-server - 合并复制 - 无法创建快照 - 超时 - sql server 2008

> ID：11740759
> 
> 赞同：1
> 
> 时间：2012-07-31T13:04:03.997
> 
> 标签：sql-server, sql-server-2008, replication, snapshot, merge-replication

我有一个 SQL Server 2008 数据库，我需要一个合并复制，因为我想在之后与移动设备同步。

所以我创建了一个复制，但是在启动快照代理时，代理尝试启动大约 20 分钟，然后显示消息

> 复制代理在 10 分钟内未记录进度消息。这可能表示代理无响应或系统活动频繁。验证记录是否正在复制到目标，并且与订阅者、发布者和分发者的连接仍然处于活动状态。

在快照代理状态窗口和代理日志窗口中都没有任何其他错误消息。

我没有域的管理员，但有本地管理员和具有 admin-privilegs 的域用户。两者都拥有数据库的所有权限，都在复制的访问列表中。

服务器代理在本地管理员帐户上运行，服务器上有 3 个 MergeReplications，正在工作

该作业也在本地管理员下运行。

谢谢你的帮助，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:22:14.657

所以它再次工作......

也许有一天其他人也遇到了同样的问题，所以我在这里发布解决方案：

我在服务器上进行了研究，发现 sql server 服务是在本地用户下运行的。原因是，我们的客户使用的备份系统存在问题，因此他们在几年前对其进行了更改。

由于本地用户帐户，发生 15404 错误。

知道我不能使用域帐户，我还用我的快照代理解决了最初的问题。我搜索了几个小时（近几天;）），这只是一个小小的变化：

创建复制时，也会创建作业。这项工作分为三个步骤。Job-owner 是 local-admin，也适用于 server-agent-service。但是我工作的第二步（replictionsnapshot）有一个设置：运行方式。默认情况下，这不是工作所有者，而是运行创建的用户，在我的例子中是我的域帐户。

现在，我也将它设置为本地管理员，一切正常。

谢谢，卡尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T12:13:25.617

我有同样的问题，下面解决了这个问题。复制代理在 10 分钟后超时，将心跳从 10 分钟更改为 30 分钟解决了这个问题，

运行以下命令

```
exec sp_changedistributor_property @property = 'heartbeat_interval', @value = 30; 
```

然后重新启动订阅服务器上的 sql 代理以继续同步。

# google-bigquery - 如何连接 BigQuery 已分配不同类型的整数字段？

> ID：11740762
> 
> 赞同：1
> 
> 时间：2012-07-31T13:04:09.887
> 
> 标签：google-bigquery

尝试在数字字段上连接两个表（“A”和“B”），并且每个表具有完全相同的值范围时，我收到以下错误：

错误：字段 X 和 Y 的类型 TYPE_INT64 和 TYPE_INT32 不相等，因此它们不能是连接属性。

不可能加入 INTEGER(AX) = BY 因为只接受字段名称，而不是任意表达式。在子查询中强制转换 AX 是可行的，但性能很差，因为它是更大的表；强制转换 BY 不起作用，这似乎与错误消息（暗示 Y 是 32 位）和 INTEGER 函数的文档（转换为 64 位）不一致。这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:14:21.510

您最好的选择是子查询中的演员表。连接性能的真正问题不是强制转换，而是连接算法的低效率。目前正在解决这个问题，但需要更长的时间，因为它是更大的查询执行引擎更改的一部分。

# python - Python在数组中转换字符串

> ID：11740764
> 
> 赞同：-2
> 
> 时间：2012-07-31T13:04:17.933
> 
> 标签：python, list

你好，我有一个看起来像这样的字符串

```
el-gu-en-tr-ca-it-eu-ca@valencia-ar-eo-cs-et-th_TH-gl-id-es-bn_IN-ru-he-nl-pt-no-nb-id_ID-lv-lt-pa-te-pl-ta-bg_BG-be-fr-de-bn_BD-uk-pt_BR-ast-hr-jv-zh_TW-sr@latin-da-fa-hi-tr_TR-fi-hu-ja-fo-bs_BA-ro-fa_IR-zh_CN-sr-sq-mn-ko-sv-km-sk-km_KH-en_GB-ms-sc-ug-bal 
```

我怎样才能打破项目 - 并将它们放在一个数组中

```
array[0]->el
array[1]->gu
..... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:05:33.163

在您的字符串上使用该[`.split()`方法：](http://docs.python.org/library/stdtypes.html#str.split)

```
>>> example = 'el-gu-en-tr-ca-it-eu-ca@valencia-ar-eo-cs-et-th_TH-gl-id-es-bn_IN-ru-he-nl-pt-no-nb-id_ID-lv-lt-pa-te-pl-ta-bg_BG-be-fr-de-bn_BD-uk-pt_BR-ast-hr-jv-zh_TW-sr@latin-da-fa-hi-tr_TR-fi-hu-ja-fo-bs_BA-ro-fa_IR-zh_CN-sr-sq-mn-ko-sv-km-sk-km_KH-en_GB-ms-sc-ug-bal'
>>> example.split('-')
['el', 'gu', 'en', 'tr', 'ca', 'it', 'eu', 'ca@valencia', 'ar', 'eo', 'cs', 'et', 'th_TH', 'gl', 'id', 'es', 'bn_IN', 'ru', 'he', 'nl', 'pt', 'no', 'nb', 'id_ID', 'lv', 'lt', 'pa', 'te', 'pl', 'ta', 'bg_BG', 'be', 'fr', 'de', 'bn_BD', 'uk', 'pt_BR', 'ast', 'hr', 'jv', 'zh_TW', 'sr@latin', 'da', 'fa', 'hi', 'tr_TR', 'fi', 'hu', 'ja', 'fo', 'bs_BA', 'ro', 'fa_IR', 'zh_CN', 'sr', 'sq', 'mn', 'ko', 'sv', 'km', 'sk', 'km_KH', 'en_GB', 'ms', 'sc', 'ug', 'bal'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:05:53.903

致电`str.split()`：

```
s = "el-gu-en-tr-ca-it-eu-ca@valencia-ar-eo-cs-et-th_TH-gl-id-es-bn_IN-ru-he-nl-pt-no-nb-id_ID-lv-lt-pa-te-pl-ta-bg_BG-be-fr-de-bn_BD-uk-pt_BR-ast-hr-jv-zh_TW-sr@latin-da-fa-hi-tr_TR-fi-hu-ja-fo-bs_BA-ro-fa_IR-zh_CN-sr-sq-mn-ko-sv-km-sk-km_KH-en_GB-ms-sc-ug-bal"
locales = s.split("-") 
```

# javascript - 如何在 Android 中调用 JavaScript

> ID：11740765
> 
> 赞同：2
> 
> 时间：2012-07-31T13:04:17.810
> 
> 标签：javascript, android, html, xml

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    web = (WebView) findViewById(R.id.webview1);

    web.setWebChromeClient(new MyWebChromeClient());

    web.addJavascriptInterface(new DemoJavaScriptInterface(), "temp_1");

    web.loadUrl("file:///android_asset/temp_1.html");

  }   
}

final class DemoJavaScriptInterface {

    private Handler mHandler = new Handler();
    WebView web;
    DemoJavaScriptInterface() {
}

public void clickOnAndroid() {
    mHandler.post(new Runnable() {
        public void run() {
            web.loadUrl("javascript:init();");
        }
    });

   }
}

final class MyWebChromeClient extends WebChromeClient {

    private static final String LOG_TAG = "WebViewDemo";
    @Override

    public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
        Log.e(LOG_TAG, message);
        result.confirm();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:09:46.180

试着写下这一行

```
web = (WebView) findViewById(R.id.webview1);
web.setWebChromeClient(new MyWebChromeClient());

web.getSettings().setJavaScriptEnabled(true);

web.addJavascriptInterface(new DemoJavaScriptInterface(), "temp_1");
web.loadUrl("file:///android_asset/temp_1.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:22:31.130

![](../Images/5ab0e9c9f1bbfce0a16aa8bd717f7f63.png)

[2]：两个元素都来自 html 文件，当要单击“单击它”时，没有任何反应，而是显示我想要的 xml 数据

# c# - 查询在 SQL Server 中的每次执行中花费不同的时间

> ID：11740772
> 
> 赞同：0
> 
> 时间：2012-07-31T13:04:35.730
> 
> 标签：c#, sql-server, time

我在 SQL Server 数据库中有一个表。它只有 5 行。当我运行一个查询时

```
select * from Table 
```

有时需要 0 秒，有时需要 5 秒，有时需要 10 秒，等等，有时它只是继续执行并给出如下错误

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）

可能是什么问题？我只是在优化我所有的查询。但是它没有花费修复时间，我怎么知道它花费了多少时间？我的网站将在 2 秒、10 秒、2 分钟后打开

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:09:36.667

听起来您的服务器和数据库之间的连接非常不稳定，*或者*您没有正确管理数据库连接（通过`using`语句关闭它们）并且您经常在等待其他连接超时之前下一个查询运行。

# c# - 在标签中突出显示/加粗一个字符

> ID：11740779
> 
> 赞同：0
> 
> 时间：2012-07-31T13:04:54.613
> 
> 标签：c#, winforms, debugging, esoteric-languages

我正在为各种深奥的语言编写 IDE/解释器/调试器。我希望能够在不同的地方（取决于代码流）为调试器一次加粗一个字符。为此，我正在使用 WinForms。所以简而言之，我需要能够将文本的一个字符加粗并将其发送到标签。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:07:57.667

您应该必须使用[GDI API](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawstring.aspx)绘制/绘制文本- 处理绘制事件或覆盖 onPaint()。

# hibernate - 映射多个表

> ID：11740780
> 
> 赞同：0
> 
> 时间：2012-07-31T13:05:00.783
> 
> 标签：hibernate, nhibernate, nhibernate-mapping, hibernate-mapping

我有 3 张桌子：

```
 TABLE BOOKING (
  BOOK_ID  
  PERSONAL_ID                             
  ORGINIZER                      
  TITLE
    PRIMARY KEY ( BOOK_ID )
    FOREIGN KEY ( PERSONAL_ID)
);

TABLE ROOM
(
  ID
  BOOK_ID
  FROM                  
  UNTIL                        
  QUANTITY                   
  PRIMARY KEY ( ID) 
  FOREIGN KEY ( BOOK_ID)
);

TABLE PERSONAL
    (
      ID
      PERSONAL_ID
      NAME
      SURNAME
      EMAIL         
      PRIMARY KEY ( ID) 
    ); 
```

我在桌子 ROOM 上映射，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">

<class name="Depp.Domain.Booking, Depp.Core" >
    <id name="ID" unsaved-value="0" column="ID">
        <generator class="native">
            <!--<param name="sequence">GLOBALSEQUENCE</param>-->
        </generator>
    </id>
    <property name="Title" ></property>
    <property name="TitleEnabled" type="yes_no">
        <column name="THEMA_ENABLED"/>
    </property>
    <property name="ORGANIZER" column="PERSONAL_ID" not-null="true" ></property>
    <bag name="ROOM" inverse="true" lazy="true" cascade="all-delete-orphan" >
        <key column="BOOK_ID"/>
        <one-to-many class="Depp.Domain.ROOM, Depp.Core"/>
    </bag>

</class> 
```

我的问题是如何映射表格`PERSONAL`？我的问题是`PERSONAL`没有外键所以我不知道如何映射`PERSONAL`。我需要从该表中获取`NAME`,`SURNAME`和。`EMAIL`

希望可以有人帮帮我

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:57:40.997

Booking 和 Personal 之间的关联可以映射为[单向多对一关联](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/associations.html#assoc-intro)。

使用[property-ref](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-manytoone)属性指定要加入的个人主键以外的字段，在您的情况下，它是对应于数据库列 PERSONAL_ID 的 personalId 属性，而不是 Personal 类的 ID。

> **[属性参考](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-manytoone)（可选）**
> 
> 连接到此外键的关联类的属性的名称。如果未指定，则使用关联类的主键。

在 Hibernate 上查看这个 stackoverflow 问题[- 为什么使用多对一来表示一对一？](https://stackoverflow.com/questions/2452987/hibernate-why-use-many-to-one-to-represent-a-one-to-one)

映射

```
<class name="Booking" >
    <id name="ID" unsaved-value="0" column="ID">
        <generator class="native">
            <!--<param name="sequence">GLOBALSEQUENCE</param>-->
        </generator>
    </id>
    ...
    <many-to-one name="personal" column="PERSONAL_ID"   property-ref="personalId" not-null="true"/>
    ...
</class>

<class name="Personal">
    <id name="id" column="ID">
        <generator class="native"/>
    </id>

    <property name="personalId" column="personal_id" />
    <property name="name" />
    <property name="surname" />
    <property name="email" />

</class> 
```

爪哇

```
public class Booking{

    private Long id;

    private Personal personal;
    ...
}

public class Personal 
{
    Long id;

    private Long personalId;   
    private String name;        
    private String surname;
    private String email;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:10:28.857

如何使用 HQL 获取该表对象的列表？要获取映射对象，必须定义 FK 不是吗，否则 hibernate 将如何映射列？

# android - VideoPlayer 冻结应用程序

> ID：11740781
> 
> 赞同：0
> 
> 时间：2012-07-31T13:05:03.317
> 
> 标签：android, android-videoview

我有一个子类 VideoView：

```
import android.content.Context;
import android.net.Uri;
import android.util.AttributeSet;
import android.widget.VideoView;

public class VideoPlayerView extends VideoView {
    private static final String TAG = "VideoPlayerView";

    public VideoPlayerView(Context context) {
        super(context);
    }

    public VideoPlayerView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public VideoPlayerView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void release() {
    }

    public void playVideo() {
        setVideoURI(Uri.parse("http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8"));
        start();
    }
} 
```

还有一些以这种方式使用它的 XML 布局：

```
<my.package.path.ui.common.VideoPlayerView
        android:id="@+id/video"
        android:layout_width="fill_parent"
        android:layout_height="300dp"
        android:layout_marginTop="20dp"
        android:layout_marginLeft="32dp"
        android:layout_marginRight="32dp"/> 
```

我在父活动的 onCreate() 中调用 playVideo。问题是，如果我在视频准备好之前点击后退按钮，应用程序会停止响应大约 10-20 秒，我可以在 LogCat 中看到以下内容：

```
07-31 08:30:42.049: V/MediaPlayerService(18684): [1] reset
07-31 08:30:42.049: V/ChromiumHTTPDataSource(18684): disconnect()
07-31 08:30:42.057: V/ChromiumHTTPDataSource(18684): onDisconnectComplete() mState = 0
07-31 08:30:42.065: A/(18684): frameworks/base/media/libstagefright/foundation/ABuffer.cpp:58 CHECK_LE( offset + size,mCapacity) failed: 4294967288 vs. 262824
07-31 08:30:42.065: A/libc(18684): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
07-31 08:30:42.315: I/power(179): *** release_dvfs_lock : lockType : 1 
07-31 08:30:42.315: D/PowerManagerService(179): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
07-31 08:30:42.315: W/ActivityManager(179): mDVFSLock.release()
07-31 08:30:42.573: I/DEBUG(6475): SET
07-31 08:30:42.573: I/DEBUG(6475): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-31 08:30:42.573: I/DEBUG(6475): Build fingerprint: 'samsung/espresso10wifixx/espresso10wifi:4.0.3/IML74K/P5110XXALB7:eng/test-keys'
07-31 08:30:42.573: I/DEBUG(6475): pid: 18684, tid: 18697  >>> /system/bin/mediaserver <<<
07-31 08:30:42.573: I/DEBUG(6475): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
07-31 08:30:42.573: I/DEBUG(6475):  r0 deadbaad  r1 00000001  r2 00000000  r3 00000000
07-31 08:30:42.573: I/DEBUG(6475):  r4 00000000  r5 00000027  r6 01ff81c0  r7 fffffff8
07-31 08:30:42.573: I/DEBUG(6475):  r8 00000000  r9 00000001  10 413df629  fp 0000001e
07-31 08:30:42.573: I/DEBUG(6475):  ip ffffffff  sp 42356870  lr 400f20a9  pc 400ee808  cpsr 60000030
07-31 08:30:42.573: I/DEBUG(6475):  d0  2e73762038383220  d1  6574636f2f6e6f32
07-31 08:30:42.573: I/DEBUG(6475):  d2  6f632e656c707036  d3  656e6f6870692f32
07-31 08:30:42.573: I/DEBUG(6475):  d4  73656c706d61732f  d5  2f706f627069622f
07-31 08:30:42.573: I/DEBUG(6475):  d6  69662f3172616567  d7  0000001e6553656c
07-31 08:30:42.573: I/DEBUG(6475):  d8  00000000000402a8  d9  412021a600000000
07-31 08:30:42.573: I/DEBUG(6475):  d10 416312d000000000  d11 4014000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d12 0000000000000000  d13 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d14 0000000000000000  d15 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d16 4187d78400000000  d17 41f1406280400000
07-31 08:30:42.573: I/DEBUG(6475):  d18 3fe0000000000000  d19 3fe0000000000a28
07-31 08:30:42.573: I/DEBUG(6475):  d20 3f1149942ce213d7  d21 bebba8a21867784d
07-31 08:30:42.573: I/DEBUG(6475):  d22 3ff0000000000000  d23 3fe6c310da4e22ec
07-31 08:30:42.573: I/DEBUG(6475):  d24 3e66376972bea4d0  d25 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d26 0000000000000000  d27 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d28 0000000000000000  d29 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  d30 0000000000000000  d31 0000000000000000
07-31 08:30:42.573: I/DEBUG(6475):  scr 20000010
07-31 08:30:42.651: W/PowerManagerService(179): Timer 0x7->0x3|0x3
07-31 08:30:42.651: I/PowerManagerService(179): Ulight 7->3|0
07-31 08:30:42.651: D/PowerManagerService(179): setLightBrightness : mButtonLight : 0
07-31 08:30:42.760: I/DEBUG(6475):          #00  pc 00017808  /system/lib/libc.so
07-31 08:30:42.760: I/DEBUG(6475):          #01  pc 0000144a  /system/lib/liblog.so (__android_log_assert)
07-31 08:30:42.760: I/DEBUG(6475):          #02  pc 000061ac  /system/lib/libstagefright_foundation.so (_ZN7android7ABuffer8setRangeEjj)
07-31 08:30:42.776: I/DEBUG(6475):          #03  pc 000ed0f8  /system/lib/libstagefright.so (_ZN7android11LiveSession9fetchFileEPKcPNS_2spINS_7ABufferEEEjd)
07-31 08:30:42.776: I/DEBUG(6475): code around pc:
07-31 08:30:42.776: I/DEBUG(6475): 400ee7e8 4623b15c 2c006824 e026d1fb b12368db  \.#F$h.,..&..h#.
07-31 08:30:42.776: I/DEBUG(6475): 400ee7f8 21014a17 6011447a 48124798 24002527  .J.!zD.`.G.H'%.$
07-31 08:30:42.776: I/DEBUG(6475): 400ee808 f7f47005 2106eec4 ef52f7f5 460aa901  .p.....!..R....F
07-31 08:30:42.776: I/DEBUG(6475): 400ee818 f04f2006 94015380 94029303 eb1cf7f5  . O..S..........
07-31 08:30:42.776: I/DEBUG(6475): 400ee828 4622a905 f7f52002 f7f4eb26 2106eeb0  .."F. ..&......!
07-31 08:30:42.776: I/DEBUG(6475): code around lr:
07-31 08:30:42.776: I/DEBUG(6475): 400f2088 41f0e92d 46804c0c 447c2600 68a56824  -..A.L.F.&|D$h.h
07-31 08:30:42.776: I/DEBUG(6475): 400f2098 e0076867 300cf9b5 dd022b00 47c04628  gh.....0.+..(F.G
07-31 08:30:42.776: I/DEBUG(6475): 400f20a8 35544306 37fff117 6824d5f4 d1ee2c00  .CT5...7..$h.,..
07-31 08:30:42.776: I/DEBUG(6475): 400f20b8 e8bd4630 bf0081f0 00028472 41f0e92d  0F......r...-..A
07-31 08:30:42.776: I/DEBUG(6475): 400f20c8 fb01b086 9004f602 461f4815 4615460c  .........H.F.F.F
07-31 08:30:42.776: I/DEBUG(6475): memory map around addr deadbaad:
07-31 08:30:42.776: I/DEBUG(6475): be80a000-be82b000 [stack]
07-31 08:30:42.776: I/DEBUG(6475): (no map for address)
07-31 08:30:42.776: I/DEBUG(6475): ffff0000-ffff1000 [vectors]
07-31 08:30:42.776: I/DEBUG(6475): stack:
07-31 08:30:42.776: I/DEBUG(6475):     42356830  0004c61f  
07-31 08:30:42.776: I/DEBUG(6475):     42356834  00000380  
07-31 08:30:42.776: I/DEBUG(6475):     42356838  ffff0208  [vectors]
07-31 08:30:42.776: I/DEBUG(6475):     4235683c  4235689c  
07-31 08:30:42.776: I/DEBUG(6475):     42356840  4011a72c  /system/lib/libc.so
07-31 08:30:42.776: I/DEBUG(6475):     42356844  4011f828  
07-31 08:30:42.776: I/DEBUG(6475):     42356848  00000000  
07-31 08:30:42.776: I/DEBUG(6475):     4235684c  400f20a9  /system/lib/libc.so
07-31 08:30:42.776: I/DEBUG(6475):     42356850  00000000  
07-31 08:30:42.776: I/DEBUG(6475):     42356854  42356884  
07-31 08:30:42.776: I/DEBUG(6475):     42356858  01ff81c0  [heap]
07-31 08:30:42.776: I/DEBUG(6475):     4235685c  fffffff8  
07-31 08:30:42.776: I/DEBUG(6475):     42356860  00000000  
07-31 08:30:42.776: I/DEBUG(6475):     42356864  400f1215  /system/lib/libc.so
07-31 08:30:42.776: I/DEBUG(6475):     42356868  df0027ad  
07-31 08:30:42.776: I/DEBUG(6475):     4235686c  00000000  
07-31 08:30:42.776: I/DEBUG(6475): #00 42356870  4235686c  
07-31 08:30:42.776: I/DEBUG(6475):     42356874  00000001  
07-31 08:30:42.776: I/DEBUG(6475):     42356878  400d5575  /system/lib/liblog.so
07-31 08:30:42.776: I/DEBUG(6475):     4235687c  00000001  
07-31 08:30:42.776: I/DEBUG(6475):     42356880  4235689c  
07-31 08:30:42.776: I/DEBUG(6475):     42356884  fffffbdf  
07-31 08:30:42.776: I/DEBUG(6475):     42356888  00000000  
07-31 08:30:42.776: I/DEBUG(6475):     4235688c  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356890  42356cbc  
07-31 08:30:42.783: I/DEBUG(6475):     42356894  400d444d  /system/lib/liblog.so
07-31 08:30:42.783: I/DEBUG(6475): #01 42356898  42356cac  
07-31 08:30:42.783: I/DEBUG(6475):     4235689c  6d617266  
07-31 08:30:42.783: I/DEBUG(6475):     423568a0  726f7765  
07-31 08:30:42.783: I/DEBUG(6475):     423568a4  622f736b  
07-31 08:30:42.783: I/DEBUG(6475):     423568a8  2f657361  
07-31 08:30:42.783: I/DEBUG(6475):     423568ac  6964656d  
07-31 08:30:42.783: I/DEBUG(6475):     423568b0  696c2f61  
07-31 08:30:42.783: I/DEBUG(6475):     423568b4  61747362  
07-31 08:30:42.783: I/DEBUG(6475):     423568b8  72666567  
07-31 08:30:42.783: I/DEBUG(6475):     423568bc  74686769  
07-31 08:30:42.783: I/DEBUG(6475):     423568c0  756f662f  
07-31 08:30:42.783: I/DEBUG(6475):     423568c4  7461646e  
07-31 08:30:42.783: I/DEBUG(6475):     423568c8  2f6e6f69  
07-31 08:30:42.783: I/DEBUG(6475):     423568cc  66754241  
07-31 08:30:42.783: I/DEBUG(6475):     423568d0  2e726566  
07-31 08:30:42.783: I/DEBUG(6475):     423568d4  3a707063  
07-31 08:30:42.783: I/DEBUG(6475):     423568d8  43203835  /dev/ashmem/AudioFlinger::Client (deleted)
07-31 08:30:42.783: I/DEBUG(6475):     423568dc  4b434548  
07-31 08:30:42.783: I/DEBUG(6475):     423568e0  28454c5f  
07-31 08:30:42.783: I/DEBUG(6475):     423568e4  66666f20  
07-31 08:30:42.783: I/DEBUG(6475):     423568e8  20746573  
07-31 08:30:42.783: I/DEBUG(6475):     423568ec  6973202b  
07-31 08:30:42.783: I/DEBUG(6475):     423568f0  6d2c657a  
07-31 08:30:42.783: I/DEBUG(6475):     423568f4  61706143  
07-31 08:30:42.783: I/DEBUG(6475):     423568f8  79746963  
07-31 08:30:42.783: I/DEBUG(6475):     423568fc  61662029  
07-31 08:30:42.783: I/DEBUG(6475):     42356900  64656c69  
07-31 08:30:42.783: I/DEBUG(6475):     42356904  3234203a  
07-31 08:30:42.783: I/DEBUG(6475):     42356908  36393439  
07-31 08:30:42.783: I/DEBUG(6475):     4235690c  38383237  
07-31 08:30:42.783: I/DEBUG(6475):     42356910  2e737620  
07-31 08:30:42.783: I/DEBUG(6475):     42356914  32363220  
07-31 08:30:42.783: I/DEBUG(6475):     42356918  00343238  
07-31 08:30:42.783: I/DEBUG(6475):     4235691c  65757165  
07-31 08:30:42.783: I/DEBUG(6475):     42356920  3165636e  
07-31 08:30:42.783: I/DEBUG(6475):     42356924  0073742e  
07-31 08:30:42.783: I/DEBUG(6475):     42356928  42356998  
07-31 08:30:42.783: I/DEBUG(6475):     4235692c  944d19e8  
07-31 08:30:42.783: I/DEBUG(6475):     42356930  01fe5df4  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356934  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356938  424bdc90  
07-31 08:30:42.783: I/DEBUG(6475):     4235693c  41481069  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356940  42356998  
07-31 08:30:42.783: I/DEBUG(6475):     42356944  41482719  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356948  000003ff  
07-31 08:30:42.783: I/DEBUG(6475):     4235694c  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356950  00000022  
07-31 08:30:42.783: I/DEBUG(6475):     42356954  00000004  
07-31 08:30:42.783: I/DEBUG(6475):     42356958  0000137b  
07-31 08:30:42.783: I/DEBUG(6475):     4235695c  01f48000  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356960  01fe6268  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356964  944d19e8  
07-31 08:30:42.783: I/DEBUG(6475):     42356968  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     4235696c  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356970  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356974  41481001  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356978  423569d0  
07-31 08:30:42.783: I/DEBUG(6475):     4235697c  41482719  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356980  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356984  01fe5df0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356988  003569a4  
07-31 08:30:42.783: I/DEBUG(6475):     4235698c  00000053  
07-31 08:30:42.783: I/DEBUG(6475):     42356990  423569a4  
07-31 08:30:42.783: I/DEBUG(6475):     42356994  402c127c  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356998  01fe5df0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     4235699c  00000068  
07-31 08:30:42.783: I/DEBUG(6475):     423569a0  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     423569a4  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     423569a8  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     423569ac  00000001  
07-31 08:30:42.783: I/DEBUG(6475):     423569b0  402c18f0  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     423569b4  400ed037  /system/lib/libc.so
07-31 08:30:42.783: I/DEBUG(6475):     423569b8  402c127c  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     423569bc  01ff1da0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     423569c0  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     423569c4  401265e8  
07-31 08:30:42.783: I/DEBUG(6475):     423569c8  424bdc90  
07-31 08:30:42.783: I/DEBUG(6475):     423569cc  424bdd60  
07-31 08:30:42.783: I/DEBUG(6475):     423569d0  01f49068  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     423569d4  01f49068  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     423569d8  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     423569dc  414a5b99  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     423569e0  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     423569e4  01fe5df0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     423569e8  00356a58  
07-31 08:30:42.783: I/DEBUG(6475):     423569ec  944d19e8  
07-31 08:30:42.783: I/DEBUG(6475):     423569f0  01fe5df4  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     423569f4  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     423569f8  424bdc90  
07-31 08:30:42.783: I/DEBUG(6475):     423569fc  41481069  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a00  42356a58  
07-31 08:30:42.783: I/DEBUG(6475):     42356a04  41482719  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a08  424bdc90  
07-31 08:30:42.783: I/DEBUG(6475):     42356a0c  402bba2f  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a10  42356a44  
07-31 08:30:42.783: I/DEBUG(6475):     42356a14  00000046  
07-31 08:30:42.783: I/DEBUG(6475):     42356a18  01feaaa0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a1c  01feaae6  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a20  01ffbee0  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a24  402bba47  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a28  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356a2c  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356a30  402c127c  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a34  01f490f8  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a38  42356a7c  
07-31 08:30:42.783: I/DEBUG(6475):     42356a3c  402c1898  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a40  0000000e  
07-31 08:30:42.783: I/DEBUG(6475):     42356a44  01f49068  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a48  00000000  
07-31 08:30:42.783: I/DEBUG(6475):     42356a4c  402bba2f  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a50  424bdd38  
07-31 08:30:42.783: I/DEBUG(6475):     42356a54  01f48c9c  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a58  42356ac0  
07-31 08:30:42.783: I/DEBUG(6475):     42356a5c  00000014  
07-31 08:30:42.783: I/DEBUG(6475):     42356a60  01f49068  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a64  402bba47  /system/lib/libstlport.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a68  424bdd38  
07-31 08:30:42.783: I/DEBUG(6475):     42356a6c  4147d1d1  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a70  424bdd38  
07-31 08:30:42.783: I/DEBUG(6475):     42356a74  4147e78f  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a78  424bdd5c  
07-31 08:30:42.783: I/DEBUG(6475):     42356a7c  00000078  
07-31 08:30:42.783: I/DEBUG(6475):     42356a80  01f48c88  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a84  41481791  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a88  42356af8  
07-31 08:30:42.783: I/DEBUG(6475):     42356a8c  944d19e8  
07-31 08:30:42.783: I/DEBUG(6475):     42356a90  01fe5df4  [heap]
07-31 08:30:42.783: I/DEBUG(6475):     42356a94  415f4918  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356a98  424bdc90  
07-31 08:30:42.783: I/DEBUG(6475):     42356a9c  41481069  /system/lib/libchromium_net.so
07-31 08:30:42.783: I/DEBUG(6475):     42356aa0  42356af8  
07-31 08:30:42.791: I/DEBUG(6475):     42356aa4  41482719  /system/lib/libchromium_net.so
07-31 08:30:42.791: I/DEBUG(6475):     42356aa8  424bdc90  
07-31 08:30:42.791: I/DEBUG(6475):     42356aac  402bba2f  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356ab0  42356ae4  
07-31 08:30:42.791: I/DEBUG(6475):     42356ab4  00000047  
07-31 08:30:42.791: I/DEBUG(6475):     42356ab8  01feaa58  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356abc  01feaa9f  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356ac0  02003ce8  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356ac4  402bba47  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356ac8  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356acc  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356ad0  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356ad4  402c1801  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356ad8  402c1898  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356adc  0000000c  
07-31 08:30:42.791: I/DEBUG(6475):     42356ae0  01fe6268  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356ae4  01fd7638  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356ae8  424bdc90  
07-31 08:30:42.791: I/DEBUG(6475):     42356aec  402bb8b5  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356af0  41405d8c  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356af4  42356b98  
07-31 08:30:42.791: I/DEBUG(6475):     42356af8  01fe5df0  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356afc  42356b1c  
07-31 08:30:42.791: I/DEBUG(6475):     42356b00  01fe6268  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b04  402bb8c7  /system/lib/libstlport.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b08  41405d8c  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b0c  413ba783  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b10  41405d8c  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b14  413bb47b  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b18  01fd76a8  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b1c  413f8b8c  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b20  413ead72  /system/lib/libstagefright.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b24  000001a4  
07-31 08:30:42.791: I/DEBUG(6475):     42356b28  01fd76a8  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b2c  01feaaa0  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b30  ffffffe6  
07-31 08:30:42.791: I/DEBUG(6475):     42356b34  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356b38  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356b3c  01feaa9f  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b40  01feaa58  [heap]
07-31 08:30:42.791: I/DEBUG(6475):     42356b44  400e9401  /system/lib/libc.so
07-31 08:30:42.791: I/DEBUG(6475):     42356b48  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356b4c  00000004  
07-31 08:30:42.791: I/DEBUG(6475):     42356b50  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356b54  ffffffff  
07-31 08:30:42.791: I/DEBUG(6475):     42356b58  00000000  
07-31 08:30:42.791: I/DEBUG(6475):     42356b5c  ffffffff  
07-31 08:30:42.799: I/DEBUG(6475):     42356b60  00000007  
07-31 08:30:42.799: I/DEBUG(6475):     42356b64  00000013  
07-31 08:30:42.799: I/DEBUG(6475):     42356b68  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356b6c  ffffffff  
07-31 08:30:42.799: I/DEBUG(6475):     42356b70  0000001a  
07-31 08:30:42.799: I/DEBUG(6475):     42356b74  0000002d  
07-31 08:30:42.799: I/DEBUG(6475):     42356b78  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356b7c  ffffffff  
07-31 08:30:42.799: I/DEBUG(6475):     42356b80  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356b84  ffffffff  
07-31 08:30:42.799: I/DEBUG(6475):     42356b88  01fd7638  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356b8c  4011f4c8  
07-31 08:30:42.799: I/DEBUG(6475):     42356b90  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356b94  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356b98  01ff1e08  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356b9c  413deea1  /system/lib/libstagefright.so
07-31 08:30:42.799: I/DEBUG(6475):     42356ba0  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356ba4  400ec9e9  /system/lib/libc.so
07-31 08:30:42.799: I/DEBUG(6475):     42356ba8  01ff1de7  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356bac  01ff1da0  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356bb0  32348101  
07-31 08:30:42.799: I/DEBUG(6475):     42356bb4  36323439  
07-31 08:30:42.799: I/DEBUG(6475):     42356bb8  34323832  
07-31 08:30:42.799: I/DEBUG(6475):     42356bbc  944d19e8  
07-31 08:30:42.799: I/DEBUG(6475):     42356bc0  ffffffff  
07-31 08:30:42.799: I/DEBUG(6475):     42356bc4  000402a8  
07-31 08:30:42.799: I/DEBUG(6475):     42356bc8  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356bcc  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356bd0  412021a6  /system/lib/libcaps.so
07-31 08:30:42.799: I/DEBUG(6475):     42356bd4  00000000  
07-31 08:30:42.799: I/DEBUG(6475):     42356bd8  42356c7c  
07-31 08:30:42.799: I/DEBUG(6475):     42356bdc  42356cc8  
07-31 08:30:42.799: I/DEBUG(6475):     42356be0  fffffff8  
07-31 08:30:42.799: I/DEBUG(6475):     42356be4  01ff81d4  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356be8  00000001  
07-31 08:30:42.799: I/DEBUG(6475):     42356bec  413df629  /system/lib/libstagefright.so
07-31 08:30:42.799: I/DEBUG(6475):     42356bf0  02027b78  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356bf4  4011f540  
07-31 08:30:42.799: I/DEBUG(6475):     42356bf8  01fe6268  [heap]
07-31 08:30:42.799: I/DEBUG(6475):     42356bfc  01fe62e8  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c00  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c04  4011f4b8  
07-31 08:30:42.807: I/DEBUG(6475):     42356c08  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c0c  400ebb85  /system/lib/libc.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c10  01ff1370  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c14  4011f4c8  
07-31 08:30:42.807: I/DEBUG(6475):     42356c18  00000010  
07-31 08:30:42.807: I/DEBUG(6475):     42356c1c  4011f494  
07-31 08:30:42.807: I/DEBUG(6475):     42356c20  01ff1378  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c24  00000001  
07-31 08:30:42.807: I/DEBUG(6475):     42356c28  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c2c  400ec9e9  /system/lib/libc.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c30  01ff1378  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c34  00000080  
07-31 08:30:42.807: I/DEBUG(6475):     42356c38  00000010  
07-31 08:30:42.807: I/DEBUG(6475):     42356c3c  01fe6268  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c40  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c44  00000001  
07-31 08:30:42.807: I/DEBUG(6475):     42356c48  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c4c  400ecf3d  /system/lib/libc.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c50  42356cbc  
07-31 08:30:42.807: I/DEBUG(6475):     42356c54  0000006a  
07-31 08:30:42.807: I/DEBUG(6475):     42356c58  01fe6268  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c5c  0000006a  
07-31 08:30:42.807: I/DEBUG(6475):     42356c60  40893e60  /system/lib/libstagefright_foundation.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c64  fffffff8  
07-31 08:30:42.807: I/DEBUG(6475):     42356c68  00000000  
07-31 08:30:42.807: I/DEBUG(6475):     42356c6c  40110951  /system/lib/libc.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c70  42356cbc  
07-31 08:30:42.807: I/DEBUG(6475):     42356c74  40893195  /system/lib/libstagefright_foundation.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c78  42356cbc  
07-31 08:30:42.807: I/DEBUG(6475):     42356c7c  0000006a  
07-31 08:30:42.807: I/DEBUG(6475):     42356c80  01fe62d2  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c84  40110959  /system/lib/libc.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c88  42356cbc  
07-31 08:30:42.807: I/DEBUG(6475):     42356c8c  40893195  /system/lib/libstagefright_foundation.so
07-31 08:30:42.807: I/DEBUG(6475):     42356c90  42356cbc  
07-31 08:30:42.807: I/DEBUG(6475):     42356c94  42356cc8  
07-31 08:30:42.807: I/DEBUG(6475):     42356c98  02006510  [heap]
07-31 08:30:42.807: I/DEBUG(6475):     42356c9c  944d19e8  
07-31 08:30:42.815: I/DEBUG(6475):     42356ca0  42356cc8  
07-31 08:30:42.815: I/DEBUG(6475):     42356ca4  408911af  /system/lib/libstagefright_foundation.so
07-31 08:30:42.815: I/DEBUG(6475):     42356ca8  40893d3e  /system/lib/libstagefright_foundation.so
07-31 08:30:42.815: I/DEBUG(6475):     42356cac  01fe6268  [heap]
07-31 08:30:45.198: D/AudioHardwareTinyALSA(18684): Entering AudioStreamOutALSA standby mode
07-31 08:30:45.198: I/AudioHardwareTinyALSA(18684): Close
07-31 08:30:45.619: I/DEBUG(6475): EET
07-31 08:30:45.619: I/DEBUG(6475): !@dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_native -m 18684
07-31 08:30:45.619: I/BootReceiver(179): Copying /data/tombstones/tombstone_03 to DropBox (SYSTEM_TOMBSTONE)
07-31 08:30:45.619: I/dumpstate(18714): begin
07-31 08:30:45.737: D/dalvikvm(179): GC_CONCURRENT freed 1199K, 21% free 14383K/18183K, paused 1ms+25ms
07-31 08:30:51.315: W/ActivityManager(179): Launch timeout has expired, giving up wake lock!
07-31 08:30:51.330: W/ActivityManager(179): Activity idle timeout for ActivityRecord{419e84a0 com.missiondata.tcu/.ui.course.CourseActivity}
07-31 08:30:54.041: D/VoldCmdListener(87): asec list
07-31 08:30:54.041: D/VoldCmdListener(87): CommandListener::AsecCmd::runCommand -> -- 
07-31 08:30:57.041: I/dumpstate(18714): done
07-31 08:30:57.112: W/AudioSystem(179): AudioPolicyService server died!
07-31 08:30:57.112: V/MediaPlayer-JNI(18600): release
07-31 08:30:57.112: V/MediaPlayer(18600): setListener
07-31 08:30:57.112: V/MediaPlayer(18600): disconnect
07-31 08:30:57.119: W/AudioSystem(179): AudioFlinger server died!
07-31 08:30:57.119: I/ServiceManager(86): service 'media.audio_policy' died
07-31 08:30:57.119: W/IMediaDeathNotifier(18600): media server died
07-31 08:30:57.119: V/MediaPlayer(18600): died
07-31 08:30:57.119: V/MediaPlayer(18600): message received msg=100, ext1=100, ext2=0
07-31 08:30:57.119: E/MediaPlayer(18600): error (100, 0)
07-31 08:30:57.119: V/MediaPlayer(18600): destructor
07-31 08:30:57.119: V/MediaPlayer(18600): disconnect
07-31 08:30:57.119: W/AudioSystem(18600): AudioFlinger server died!
07-31 08:30:57.119: I/ServiceManager(86): service 'media.audio_flinger' died
07-31 08:30:57.119: I/ServiceManager(86): service 'media.player' died
07-31 08:30:57.119: I/ServiceManager(86): service 'media.camera' died
07-31 08:30:57.127: D/OpenGLRenderer(18600): Flushing caches (mode 0) 
```

这是非常一致和可预测的。我不相信它与流有关，因为我也能够用其他 LIVE HTTP 源重现该问题。你看到我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:48:57.413

我的选择： 1，不要扩展 VideoView 类。直接使用 VideoView。2，当你的应用程序暂停时，让videoview暂停。当你的应用程序恢复时，让videoview恢复。我的意思是你应该将应用程序状态与视频视图状态同步。

希望我的选择对你有帮助。祝你好运。^-^

# python - django-cms，模板编辑不起作用

> ID：11740785
> 
> 赞同：0
> 
> 时间：2012-07-31T13:05:30.447
> 
> 标签：python, request, edit, django-cms

当我尝试`placeholder`直接在模板中写入内容时出现此错误。它找不到线索，我已经完成了与文档中显示的完全相同的步骤

```
ValueError at /admin/cms/page/3/edit-plugin/4
The view home.views.index didn't return an HttpResponse object. 
```

这是我的 urls.py：

[http://pastebin.com/zZX1MkMh](http://pastebin.com/zZX1MkMh)

我还想念别的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:37:56.693

如果`request.path`与您提供的任何模式不匹配，您将收到错误消息`didn't return an HttpResponse object.`

将其添加到末尾：

```
else:
    return HttpResponse(status=404) 
```

# android - 如何遍历 Android ListView 以获取 RatingBar 值？

> ID：11740788
> 
> 赞同：0
> 
> 时间：2012-07-31T13:05:36.400
> 
> 标签：android, database, listview, android-cursoradapter, ratingbar

我创建了一个自定义，它将 a 中的一些视图项（a和 a ）`CursorAdapter`绑定到via中的某些列，即：`TextView``RatingBar``ListView``SQL` `database``bindView()`

```
public class MyCursorAdapter extends CursorAdapter {
    ...

    public void bindView(View view, Context context, final Cursor cursor) {
        TextView name = (TextView)view.findViewById(R.id.name);
        name.setText(cursor.getString(cursor.getColumnIndex(MyDbAdapter.KEY_NAME)));
        RatingBar rating = (RatingBar)view.findViewById(R.id.life_bar_rating);
        rating.setRating(cursor.getFloat(cursor.getColumnIndex(MyDbAdapter.KEY_RATING_VALUE)));
    }

    ...
} 
```

我想获得所有`RatingBar`评分值的绝对最新版本，以便我可以`database`相应地更新（一口气）。我最初试图`cursor`在我的 中使用`CursorAdapter`，但是我注意到它只`cursor`包含存储在中的值，`database`而不是最新的用户更改 - 这是预期的（文档有点模糊）？

我猜我需要以某种方式遍历实际视图 - 我将如何遍历我`ListView`的以检索所有新的评级栏评级值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:17:27.527

是的，这是意料之中的，因为当`bindView()`被调用时，您正在从数据库中检索值并更新`RatingBar`.

因此，当用户更改值时，您必须分别更新每个评分栏的数据库。

所以你必须设置一个`OnRatinBarChangedListener`.

```
rating.setOnRatingBarChangeListener(new OnRatingBarChangeListener() {
    public void onRatingChanged(RatingBar ratingBar, float rating,
        boolean fromUser) {

        if(fromUser){
             //update value here
        }                     

    }
}); 
```

请注意，我们正在检查更改是否**来自用户**，以免在每次`bindView()`调用时触发侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:27:01.243

您也可以在您的in`Cursor` `final`中`onBindView()`创建字段`HashMap<id, rating> mRatings;``CursorAdapter`

```
public class MyCursorAdapter extends CursorAdapter implements RatingBar.OnRatingBarChangeListener {

    public void bindView(View view, Context context, final Cursor cursor) {
        ...
        rating.setTag(cursor.getPosition());
        rating.setOnRatingBarChangeListener(this);
        ...
    }

    @Override
    public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromTouch) {
        Integer position = (Integer) ratingBar.getTag();
        Cursor c = getCursor();
        c.move(position);
        int id = cursor.get id;
        mRatings.add(id, rating);
    } 
```

稍后，您在一个事务中遍历`mRatings`并更新更改的评级。

# c# - 暂停后线程重新开始

> ID：11740798
> 
> 赞同：0
> 
> 时间：2012-07-31T13:06:02.733
> 
> 标签：c#, winforms, multithreading, visual-studio-2010

我在我的代码中使用线程，线程是使用函数创建的：

```
private void InitializeBackgoundWorkers()
{

    for (int f = 0; f < maxThreads; f++)
    {
        listBox1.Items.Insert(0, "Starting Thread : " + (f + 1));
        threadArray[f] = new BackgroundWorker();
        threadArray[f].DoWork +=
            new DoWorkEventHandler(backgroundWorkerFiles_DoWork);
        threadArray[f].RunWorkerCompleted +=
            new RunWorkerCompletedEventHandler(backgroundWorkerFiles_RunWorkerCompleted);
        threadArray[f].ProgressChanged +=
            new ProgressChangedEventHandler(backgroundWorkerFiles_ProgressChanged);
        threadArray[f].WorkerReportsProgress = true;
        threadArray[f].WorkerSupportsCancellation = true;

    }
} 
```

doevent 是这样的：

```
private void backgroundWorkerFiles_DoWork(object sender, DoWorkEventArgs e)
{

    BackgroundWorker worker = sender as BackgroundWorker;

    int flag = 0;

    while (rowCounter < allPostingRows.Tables[0].Rows.Count && flag == 0)
    {

        for (int i = 0; i < maxThreads; i++)
        {

            if (threadArray[i].CancellationPending == true)
            {
                flag = 1;
                threadArray[i].CancelAsync();
                worker.ReportProgress(0, "Thread Paused:");
            }

        }

        if (flag == 0)
        {
             //perform work here
            }
    }
} 
```

在按钮上，我尝试使用以下方法取消线程：

```
for (int i = 0; i < maxThreads; i++)
{
    threadArray[i].CancelAsync();
} 
```

我是否正确取消了线程？当他们被取消时，我看到列表框中的行说线程已取消，所以它确实进入了取消代码，但一段时间后它重新启动

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:01:24.803

我不认为你真的明白`BackgroundWorker`。`DoWork`事件处理程序应该是一个工作单元的处理程序 。`DoWork`用一个线程调用。`CancelAsync`从处理程序中调用是没有意义的`DoWork`——它独立于任何和所有其他`BackgroundWorker`的。在`DoWork`处理程序中，它应该只检查一个`CancellationPending`，即发送者的（一旦转换为`BackgroundWorker`，在您的情况下`worker`）。

但是，否则，从 UI 调用`CancelAsync`是取消特定`BackgroundWorker`.

后台工作人员不是“线程”。您不是在取消线程，而是在取消工作程序——这使 DoWork 处理程序有机会在完成工作之前退出。

# ios - 设备重启时应用程序崩溃

> ID：11740808
> 
> 赞同：2
> 
> 时间：2012-07-31T13:06:36.753
> 
> 标签：ios, ios5, ios-simulator

我正在处理的 iPhone 应用程序（xcode 4.2）运行良好，但如果我重新启动设备（iPhone 4 on 5.0）并再次启动它，它会崩溃（甚至不显示启动图像）。但是当我将设备连接到我的 mac 时它工作正常。（甚至没有再次构建应用程序/当 xcode 关闭时）

我在哪里寻找错误？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:07:34.737

好的，终于找到问题所在了。SenTesting.framework 是问题所在。设法查看崩溃日志并抛出错误

> 未加载库：/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit

在stackoverflow上搜索并找到此链接

[为什么 SenTestingKit 会导致我的应用程序崩溃？](https://stackoverflow.com/questions/9456020/why-is-sentestingkit-causing-my-app-to-crash)

删除了构建阶段中的引用，现在即使在设备重新启动后它也能正常工作。

# c# - 如何在 C# 中转换 Visual Basic 运算符 \

> ID：11740811
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:06:48.373
> 
> 标签：c#

如何在 C# 中转换 Visual Basic 运算符 \？我的意思是哪个是 C# 中的 \ 的类似物？

```
Dim r As Integer
r = x - (5 + (x + 1) \ 6) 
```

谢谢！

> 使用 \ 运算符进行整数除法。整数除法返回商，即表示除数可以在不考虑任何余数的情况下除以被除数的次数的整数。对于此运算符，除数和被除数都必须是整数类型（SByte、Byte、Short、UShort、Integer、UInteger、Long 和 ULong）。所有其他类型必须首先转换为整数类型。下面的示例演示整数除法。
> 
> VB Dim k As Integer k = 23 \ 5 ' 前面的语句将 k 设置为 4。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T13:09:03.753

只需将常规除法运算符`/`与整数变量一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:09:46.100

它`/`在 C# 中（尽管您需要注意两个操作数都是整数）。

```
int r;
r = x - (5 + (x + 1) / 6); // integer division if x is an integer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:09:20.877

`/`只要操作数是整数，它就很简单。如果操作数是整数，您将使用 C# 运算符获得整数除法。但如果操作数之一是十进制、浮点或双精度，则为十进制或浮点除法。如果是这种情况，那么您必须将操作数强制转换为 (int) 或 (long) 以强制进行整数除法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:15:16.160

VB 中的 \ 运算符“将两个数字相除并返回一个整数结果。”

由于 C# 没有 \ 运算符，因此您无法创建一个。C# 版本肯定会将结果转换为 Int 吗？但是在您的情况下，它会降低您的精度，可能会出现警告，因为结果绑定到 Int。

可以在需要的地方使用 Convert.ToInt32() 。

# python - 有没有办法在 python 的列表推导中使用两个 if 条件

> ID：11740814
> 
> 赞同：33
> 
> 时间：2012-07-31T13:06:53.473
> 
> 标签：python, list

假设我有一个清单

```
my_list = ['91 9925479326','18002561245','All the best','good'] 
```

现在我想忽略列表中以 下面开头`91`的字符串`18`

```
result = []
for i in my_list:
   if not '91' in i:
      if not '18' in i:
         result.append(i) 
```

所以在这里我想通过列表推导来实现这一点。

无论如何要在列表理解中写两个 if 条件吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-31T13:07:54.850

```
[i for i in my_list if '91' not in i and '18' not in i] 
```

请注意，您不应将`list`其用作变量名，它会隐藏内置函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-31T13:27:34.987

如果您有两个以上的值（91 和 18）或者它们是动态生成的，则最好使用以下构造：

```
[i for i in my_list if not i.startswith(('91', '18'))] 
```

或者，如果您想检查`91`和`18`是否在字符串中（不仅在开头），请使用`in`代替`startswith`：

```
[i for i in my_list if all(x not in i for x in ['91', '18'])] 
```

使用示例：

```
>>> my_list = ['91 9925479326','18002561245','All the best','good']
>>> [i for i in my_list if all(not i.startswith(x) for x in ['91', '18'])]
['All the best', 'good']
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:08:23.413

您可以“合并”这两个条件：

```
if ((not '91' in i) and (not '18' in i)) 
```

# c# - 使用流式阅读器处理异常时遇到问题

> ID：11740816
> 
> 赞同：1
> 
> 时间：2012-07-31T13:07:10.890
> 
> 标签：c#, windows, io, streamreader

我遇到了一些麻烦`StreamReader`，我有一个设置文件，我在其中保存设置。我想以一种我也可以处理异常的方式打开和关闭文件。

当文件无法加载时，我想暂时返回 false。

我创建了一个为我加载文件的函数：

```
 private bool LoadSettingsFile(out StreamReader SettingsFile)
    {
        try
        {
            SettingsFile = new StreamReader("Settings.txt");
            return true;
        }
        catch
        {
            //Going to solve the exception later, but if I can't I want to return false.
            SettingsFile = new StreamReader(); //You need to assign StreamReader, but you need to open a file for that.
            //'System.IO.StreamReader' does not contain a constructor that takes 0 arguments
            return false;
        }
    } 
```

我以这种方式调用该函数：

```
StreamReader SettingsFile;

if (!LoadSettingsFile(out SettingsFile))
   return false; 
```

我怎样才能避免或解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:13:35.233

如果无法打开文件，为什么要返回`StreamReader`实例？当然，您会想要返回 null。此外，在你的异常处理中做一个全面的事情从来都不是一个好主意*，*更具体地说，例如

```
private bool LoadSettingsFile(out StreamReader settingsFile)
{
    try
    {
         settingsFile = new StreamReader("Settings.txt");
         return true;
    }
    catch (IOException) // specifically handle any IOExceptions       
    {
        settingsFile = null;
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:14:35.360

这可以说是一种不好的做法，因为一般而言，.NET 代码更喜欢“抛出异常”而不是“返回失败”。这样做的原因是，如果您“返回失败”，则您依赖代码的使用者来识别这一点并采取一些措施。如果您抛出异常并且代码的使用者忽略它，则应用程序将失败 - 这通常比它继续在未定义状态下更可取。

在您的情况下，问题是您被迫分配给您的`out`参数，即使在那里没有合理的值可以分配。一个明显的建议是分配`null`而不是试图伪造一个`StreamReader`. 或者，您可以创建一个空`MemoryStream`并为此返回一个阅读器，但这会花费一些极端的时间来掩盖变量在失败情况下*没有意义*且不应设置的事实。

最终，我建议您允许异常冒泡而不是返回 a`bool`来指示失败 - 或者，*返回*`StreamReader`成功并在`null`失败的情况下返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:12:16.710

只需在进入 Try/Catch 块之前设置 SettingsFile = null。大概通过返回 false 您正在更高级别处理此条件，因此永远不会使用 SettingsFile 。所以你的代码看起来像这样：

```
 private bool LoadSettingsFile(out StreamReader SettingsFile) 
    { 
        SettingsFile = null;
        try 
        { 
            SettingsFile = new StreamReader("Settings.txt"); 
            return true; 
        } 
        catch 
        { 
            //Handle Exception Here
            return false; 
        } 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:13:12.067

你可以试试

```
private StreamReader LoadSettingsFile()
{
    try
    {
        return new StreamReader("Settings.txt");
    }
    catch
    {
        return null;
    }
} 
```

接着

```
StreamReader sr = LoadSettingsFile();
if (sr == null) return false; 
```

# google-app-engine - Google App Engine - 在生产环境中连接调试器

> ID：11740821
> 
> 赞同：0
> 
> 时间：2012-07-31T13:07:17.630
> 
> 标签：google-app-engine

我有一个 GAE 应用程序的生产问题。该问题似乎仅与某些用户有关。

是否有可能将本地调试器连接到 prod 版本？我想避免将产品数据复制到开发服务器。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-11T10:03:40.967

**随着Google Cloud Debugger**的引入，这种情况在几天前有所改善

 **> 本周早些时候，在 Google Cloud Platform Live 上，我们推出了 Cloud Debugger 测试版，它可以更轻松地对生产中的应用程序进行故障排除。现在您可以简单地选择一行代码，设置一个观察点，调试器将从下一个请求返回局部变量和完整的堆栈跟踪，该请求在您的服务的任何副本上执行该行。设置时间为零，没有复杂的配置，并且对您的用户没有明显的性能影响。

[这是博客文章](http://googlecloudplatform.blogspot.co.uk/2014/11/end-printf-debugging-in-cloud-with-Google-cloud-debugger-beta.html)

[这是信息](https://cloud.google.com/tools/cloud-debugger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:28:19.353

不可能，您只能使用日志进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:13:07.993

我设法解决了这个问题。问题是一个程序抛出异常而我没有正确捕获它。代码是

```
catch (Exception e) {
  e.printStackTrace();
} 
```

在开发平台上，控制台抛出异常。生产中的问题是它没有出现在 GAE 控制台中。这有两个非常糟糕的结果：

--> 1) 最终用户不知道交易没有成功结束

--> 2) 管理员不知道出现了问题，也没有办法调试

==>

因此，我将代码替换为

```
catch (Exception e) {
final Logger log = Logger.getLogger(InternalServiceImpl.class.getName());
log.severe("Problem while updating XXX record : " + e.getLocalizedMessage());
updatedRecord.setRPCResult(DB_PROBLEM); // This is specific to my application to notify the end user
} 
```

我确实修改了代码重新启动了应用程序，发现问题是事务中的资源争用。

真是一个愚蠢的初学者错误。**

# objective-c - 为 UITableView 中的部分添加背景图像

> ID：11740824
> 
> 赞同：0
> 
> 时间：2012-07-31T13:07:27.500
> 
> 标签：objective-c, ios, xcode, uitableview

是否可以更改uitableview中每个部分的背景图像？

我想为uitableview中的每个部分添加背景图片有人知道我该怎么做吗？

提前致谢！

喜欢这张图片 --> 分别为周三、周四和周五放置不同的背景图片

![在此处输入图像描述](../Images/17d163b8d2c70ef26a4c4096bf1a6a6f.png)

**编辑我想为星期三添加图像 1 图像 2 为星期四图像 3 为星期五和.....我该如何指定？**

编辑

这是创建节标题的代码我也想拥有背景

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

if(section == 0)
    return @"Monday";
else if(section == 1){
    return @"Tuesday";
}else if(section == 2){
    return @"Wednesday";
} else if(section == 3){
    return @"Thuesday";
} else if(section == 4){
    return @"Friday";
} else if(section == 5){
    return @"Saturday";
}else
    return @"Sunday";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:23:50.897

您可以根据 indexPath 在 cellForRowAtIndexPath 委托方法中更改背景，如下所示：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TaskCellRow";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    int maxRow = 3;

    if (cell == nil)
    {
        cell =  [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed: [NSString stringWithFormat: @"background_image%i.png", MIN(indexPath.row, maxRow)]]];
    }
    else
    {
        UIImageView *background = (UIImageView *)cell.backgroundView;
        background.image = [UIImage imageNamed: [NSString stringWithFormat: @"background_image%i.png", MIN(indexPath.row, maxRow)]];
    }

    return cell;
}

// To change header backgrounds

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    int maxRow = 3;

    UIImageView *headerView = [[UIImageView alloc] initWithImage:[UIImage imageNamed: [NSString stringWithFormat: @"background_image%i.png", MIN(section, maxRow)]]];

    return headerView;
} 
```

然后，您只需创建图像，为所需数量的标题/行编号，即。background_image0.png、background_image1.png、background_image2.png、...等等。MIN 将根据您决定的最大背景限制金额。希望有帮助。

**编辑：**根据 Henri 的评论更改了 cellForRowAtIndexPath。我忽略了，谢谢！这是为了 ARC 兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:45:36.387

您可以使用：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

为节标题指定任何类型的 UIView。这另一个委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

让您指定高度。

只需使用第二种方法中的表格宽度和高度在第一个中分配/初始化 UIView，然后向其中添加任意数量的视图，例如作为背景的 UIImageView，然后是标题的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:40:40.837

[ezekielDFM](https://stackoverflow.com/users/385786/ezekieldfm "以西结DFM")给出的迭代（并且主要是纠正）示例。请注意，此代码与 ARC 不兼容（之前的示例可能是这样）。

```
// To change cell backgrounds
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"TaskCellRow";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    int maxRow = 3;

    if (cell == nil)
    {
        cell =  [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UIImageView *imageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: [NSString stringWithFormat: @"background_image%i.png", MIN(indexPath.row, maxRow)]]] autorelease];

        cell.backgroundView = imageView;
    } else {
        // Reusing, we need to swap out the image of the background
        cell.backgroundView.image = [UIImage imageNamed: [NSString stringWithFormat: @"background_image%i.png", MIN(indexPath.row, maxRow)]];
    }

    return cell;
}

// To change header backgrounds
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    int maxRow = 3;

    UIImageView *headerView = [[[UIImageView alloc] initWithImage:[NSString stringWithFormat:@"background_image%i.png", MIN(section, maxRow)]] autorelease];

    return headerView;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T04:51:39.750

我猜不可能更改表格视图部分的背景图像。如果您想做这样的要求，请尝试将行的单元格作为部分。即，对于每一行，都将其视为表格的一部分，并在其中添加 1 个具有不同标签的表格视图。它会满足你的要求。否则对于每一行采取

# c# - 嵌入单声道时如何从对象中获取数组字段

> ID：11740828
> 
> 赞同：1
> 
> 时间：2012-07-31T13:07:37.783
> 
> 标签：c#, c, mono, interop, mono-embedding

我将单声道嵌入到我正在编写的应用程序中。我创建的对象之一如下所示：

```
public class MessageObject
{
  public byte messagetype;
  public byte[] message;
} 
```

如果我使用`mono_field_get_value_object`我可以获得`MonoObject *`代表消息数组的 a，但是我怎样才能像数组一样访问它？是否有一些明确的演员表`MonoArray *`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:58:05.590

显式`MonoObject *`转换为`MonoArray *`，然后简单地使用[此处](http://docs.go-mono.com/?link=xhtml%3adeploy%2fmono-api-object.html)记录的函数。

# asp.net - 具有 .Any 条件的 Linq 查询返回空引用异常

> ID：11740841
> 
> 赞同：3
> 
> 时间：2012-07-31T13:08:12.133
> 
> 标签：asp.net, linq, asp.net-mvc-2, iqueryable

我有以下函数，它根据 LINQ 表达式从数据库返回结果：

```
IQueryable<TEntity> FindAll<TEntity>(Expression<Func<TEntity, bool>> expression) 
```

当我在使用`.Any`列表中的函数时尝试从函数中提取数据时，我得到一个空引用异常。

但是，当我在没有特定条件的情况下提取数据并`.Any`在 for each 循环中使用相同的函数时，一切正常。

这是尝试使用`.Any`不起作用的功能的调用：

```
var ppcReports = repository.FindAll<PPCReport>(
    x => x.ClientId == clientId && 
    (campaigns.Any(c=> c.Id == x.CampaignId))
).ToList(); 
```

以及它正常工作的方式：

```
var ppcReports = repository.FindAll<PPCReport>(
    x => x.ClientId == clientId).ToList();

foreach (var item in ppcReports)
{
    if (campaigns.Any(c => c.Id == item.CampaignId))
    {
        // do something
    }
} 
```

我想知道为什么会发生这种情况，我做错了什么是在查询完成之前无法过滤结果吗？

通过在过滤结果之前调用`.ToList()`它确实有效，所以我想我不能对`IQueryable<T>`实现进行这样的操作？

```
var ppcReports = repository.
    FindAll<PPCReport>(x => x.ClientId == clientId).
    ToList().
    Where(w => campaigns.Any(c => c.Id == w.CampaignId)).
    ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:05:04.807

就像那些评论的人一样，我很惊讶您收到 NullReferenceException 而不是抱怨无法将该语句编译为 SQL。但是，以下代码应该让您在 1 个查询中执行此操作（并将在 SQL 中执行所有过滤）：

```
var campaignIds = (campaigns ?? Enumerable.Empty<Campaign>())
    .Select(c => c.Id);
var ppcReports = repository
    .FindAll<PPCReport>(pr => pr.ClientId == clientId
        && campaignIds.Contains(pr.CampaignId))
    .ToList(); 
```

这应该适用于 EF 和 Linq-to-SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-15T07:54:04.137

当源为空时，Queryable.Any() 返回 ArgumentNullException，如此处所述：[https ://msdn.microsoft.com/it-it/library/bb343630(v=vs.110).aspx](https://msdn.microsoft.com/it-it/library/bb343630(v=vs.110).aspx)

# java - cxf 暴露抽象类的子类

> ID：11740843
> 
> 赞同：1
> 
> 时间：2012-07-31T13:08:12.307
> 
> 标签：java, cxf, subclass

我的（简化）情况：

**服务**@WebService
容器 getContainer() @WebMethod

**容器**
void setObjects( ContainableObjects[] objects )
ContainableObjects[] getObjects()

**ContainableObjects** [摘要]
void setName(String name)
String getName()
void doSomething()

**ContainedString** [扩展 ContainableObjects]
void setValue(String value)
String getValue()
void doSomethingElse()

**ContainedInt** [扩展 ContainableObject]
void setValue(int value)
int getValue()
void doAnotherThing()

这些 POJO 对象已经存在。我正在使用 Eclipse 工具来生成 CXF 代码。

目前，Service.getContainer 会给我一个容器的表示。但是，CXF 不会发送比 ContainableObject 对象更多的信息。因此，客户端不会收到存储在子类中的值信息。

这种简化并没有完全说明使用子类的原因，但我向你保证这个原因是存在的。

显然，我需要告诉 CXF 有实现子类。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:46:22.663

经过一番研究，我找到了解决方案。

CXF 文档可能非常简洁，但它所依赖的标准和框架的文档却不是。

对于这个问题，JAXB 上的文档帮助了我很多。

实际解决方案：需要用 @XmlSeeAlso({ContainedString, ContainedInt}) 注释类 ContainableObject。

# php - datepicker 在第二次点击 ajax 调用后打开？第一次点击怎么打开？

> ID：11740844
> 
> 赞同：0
> 
> 时间：2012-07-31T13:08:11.667
> 
> 标签：php

在 ajax 调用之前，我为日期选择器编写的代码是：

```
<script type="text/javascript">
    $(function() {
        $("#birthdate").focus(function() {
            $(this).datepicker().datepicker( "show" )
        });
    });
    $(function() {
        $("#joindate").focus(function() {
            $(this).datepicker().datepicker( "show" )
        });
    });
    </script> 
```

此函数在 onfocus 事件后调用：

```
<tr>
              <td align="left">
                <input type="text" id="birthdate"  name="birthdate"  onfocus="$('#birthdate').datepicker({changeMonth: true,changeYear: true,dateFormat: 'dd/mm/yy',defaultDate: '-20y -1m -247d',yearRange: '-50:+0'});"   tabindex="14"  style="width:300px; "   value="<? if($get_emp!='0')echo $employee_birth; ?>" /><span style="color:#F00;">*</span></td>                                       

    <td>
        <input type="text" name="joindate" id="joindate" onfocus="$('#joindate').datepicker({changeMonth: true,changeYear: true,dateFormat: 'dd/mm/yy',defaultDate: '-3y -1m -247d',yearRange: '-50:+0'});"  tabindex="15" style="width:300px; " value="<? if($get_emp!='0')echo $employee_join; ?>"/><span style="color:#F00;">*</span>
        </td>
     </tr> 
```

在ajax调用之后我调用了相同的代码，但它在第一次点击时没有打开，但是它在第二次点击时打开？请帮我解决这个问题............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:17:20.057

使用这个 javascript。您只需要初始化`datepicker()`一次

```
$(function() {
    $('#birthdate').datepicker({changeMonth: true,changeYear: true,dateFormat: 'dd/mm/yy',defaultDate: '-20y -1m -247d',yearRange: '-50:+0'});
    $("#joindate").datepicker({changeMonth: true,changeYear: true,dateFormat: 'dd/mm/yy',defaultDate: '-3y -1m -247d',yearRange: '-50:+0'});
    $("#birthdate, #joindate").focus(function() {
        $(this).datepicker( "show" )
    });
}); 
```

我从输入标签中删除了焦点属性：

```
<input type="text" id="birthdate"  name="birthdate" tabindex="14"  style="width:300px; "  value="<? if($get_emp!='0')echo $employee_birth; ?>" /><span style="color:#F00;">*</span></td>                                       

<input type="text" name="joindate" id="joindate" "  tabindex="15" style="width:300px; " value="<? if($get_emp!='0')echo $employee_join; ?>"/><span style="color:#F00;">*</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:22:55.693

尝试这样的事情：

```
$(document).ready(function(){
    $("#joindate").datepicker({
        // Options and methods here
    });
    $("#joindate").focus(function(){
          $("#joindate").datepicker("show");
    });
    $("#joindate").focus();
}); 
```

如果您想在日期的实际点击事件上发布日期，您还可以在“onSelect”事件上执行 $.post()，而不必将其绑定到表单提交。

# javascript - jQuery - 基于同一行上的另一个元素禁用选择

> ID：11740850
> 
> 赞同：1
> 
> 时间：2012-07-31T13:08:20.987
> 
> 标签：javascript, jquery, javascript-events

在表格中，我有一行有两个输入 - 一个选择和一个文本。我想要实现的是，如果一个有一个值，那么另一个（在同一行）应该禁用。**当文本框中有一个值时，这在加载**时可以正常工作，但当只有选择框中有一个值时，这似乎不起作用。

正如您在此处的示例中看到的那样：http: [//jsfiddle.net/anAgent/UBUhn/1/](http://jsfiddle.net/anAgent/UBUhn/1/) “更改”事件正常工作，但它不起作用**onload**。

任何帮助将不胜感激！

我正在使用 jQuery 1.5.2 以及 Google Chrome 和 IE9

* * *

**使用最终代码更新**

感谢@scoopseven 和@eicto 的输入。基于这两个答案，这是最终的代码。我希望它可以帮助别人。

```
$(document).ready(function() {
    $(".validation-compare").change(runRowValidation);
    $(".validation-compare").each(runRowValidation);
});

function runRowValidation() {
    var $me = $(this),
        $other = $('.validation-compare',$me.closest("tr")).not($me),
        mVal = $me.val(),
        oVal =$other.val();

    if(mVal != "" && oVal == "") {
       $me.removeAttr('disabled');
       $other.attr('disabled',1);        
    } else if(mVal == "" && oVal != "") {
       $other.removeAttr('disabled');
       $me.attr('disabled',1); 
    } else {
        $other.removeAttr('disabled');
        $me.removeAttr('disabled');
    }
}​ 
```

您可以在以下网址看到它的实际效果：http: [//jsfiddle.net/anAgent/UBUhn/24/](http://jsfiddle.net/anAgent/UBUhn/24/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:52:44.483

```
var validme=function() {
    var me=$(this);
    me.removeClass('validation-compare');
    if (me.val()) {
        console.log(me);
        me.addClass('valid');
        me.parent().parent().find('.validation-compare').attr('disabled',1);
        me.addClass('validation-compare');
        return;
    }          
    me.removeClass('valid');   
    if (me.parent().parent().find('.validation-compare.valid').length<1) {

        me.parent().parent().find('.validation-compare').removeAttr('disabled'); }
    me.addClass('validation-compare');
}
    $('.validation-compare').each(validme);    
    $('.validation-compare').change(validme) 
```

[http://jsfiddle.net/UBUhn/22/](http://jsfiddle.net/UBUhn/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:58:57.763

我认为您不需要设置课程`valid`，您所要做的就是替换

```
var $otherInput = $('.validation-compare', $parent).not('.valid'); 
```

经过

```
var $otherInput = $('.validation-compare', $parent).not($me); 
```

这将解决您在**onload**上的问题。这是一个[例子](http://jsfiddle.net/ERBGr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:27:27.763

您需要分离出该函数并在点击事件和页面加载时调用它。像这样的东西：

```
 jQuery(function($){

        function myFunction() {
            // do somestuff
        }

        // myFunction needs to be called when select is clicked and when page is loaded
        $('#someelement').click(myFunction);
        $(document).ready(myFunction);

     }); 
```

# javascript - 如何使用backbone.js保存而不指定哪些属性但使用回调

> ID：11740853
> 
> 赞同：7
> 
> 时间：2012-07-31T13:08:27.873
> 
> 标签：javascript, backbone.js

我想将更改后的模型保存到数据库（之前设置）。如果保存成功重定向到另一个页面（例如，可以是任何其他操作）。

Model.save 可以有两个可选属性。第一个是属性的散列，第二个是选项（如成功和错误回调）。[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

```
 somemodel.set({foo: 'bar'});
//lots of other logic and misc steps the user has to do
 somemodel.save(); //on success should go here 
```

由于属性已经设置，我只需要回调。

过去我做过：

```
somemodel.save(somemodel.toJSON(), { 
    success: function() { 
        //other stuff
    }
); 
```

或再次将值传递给 save 方法

```
somemodel.save(
    { foo: this.$('input').val()}, 
    { success: function(){}
); 
```

我正在寻找一种方法来清理它。文档状态，如果有新属性，模型将触发更改状态。但无论如何我都想重定向用户（保存新内容或旧/未更改）。

这不存在：

```
somemodel.on('success', function(){}); 
```

这仅用于验证：

```
if(somemodel.save()) { //action } 
```

“同步”也是错误的事件（因为它也适用于销毁）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T13:15:05.167

```
somemodel.save(
    {}, // or null
    { 
            success: function(){}
    }
); 
```

将允许您在不修改现有键的情况下保存具有特定回调的模型。

还有一个小提琴[http://jsfiddle.net/h5ncaayu/](http://jsfiddle.net/h5ncaayu/)

为避免将成功回调作为选项传递，您可以

*   使用返回的承诺`save`：

    ```
    somemodel.save().then(...youcallback...) 
    ```

*   或使用事件：

    ```
    somemodel.on('sync', ...youcallback...);
    somemodel.save(); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:46:48.163

Backbone.Model 有一个非常方便的方法，称为“changedAttributes”，它会返回一个更改属性的哈希值，您可以将其传递给保存。所以...

```
model.save(
   model.changedAttributes(),
   {
       success : _.bind(function() {...},this), //_.bind() will give scope to current "this"
       error : _.bind(function() {...},this);
   }
); 
```

漂亮又整洁...

# node.js - mongoose.js：按天查找数据条目

> ID：11740855
> 
> 赞同：1
> 
> 时间：2012-07-31T13:08:32.673
> 
> 标签：node.js, mongodb, mongoose

假设这是您的模型：

```
var EventSchema = new Schema({
    title: String,
    startDate: Date,
    endDate: Date
}); 
```

我想输入一个日期（就像“24-12-2012”一样简单），然后检索在那一天开始或进行的每个事件。

你是怎样做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:55:32.227

当然：

首先阅读日期的 mongo 查询语法，这是日期范围的操作方法：http: [//cookbook.mongodb.org/patterns/date_range/](http://cookbook.mongodb.org/patterns/date_range/)

然后将该 mongo 语法翻译成 mongoose。

```
Event.where('startDate').lte(yourDate).exec(callback); //should do the trick 
```

现在您只需要将日期字符串解析为 javascript 日期。有一些很酷的库可以做到这一点，我相信[moment.js](http://momentjs.com/docs/#/parsing/string/)不会对那个日期字符串有问题。

哦，我忘了最后一点魔法：将该查询放入附加到您的事件模型的[静态方法](http://mongoosejs.com/docs/methods-statics.html)中，所以从现在开始您可以调用

```
Event.earlierThan(yourDate, callback); //Where your custom static is called 'earlierThan'. 
```

# c# - 使用C#更改excel中一个单元格的字体大小

> ID：11740856
> 
> 赞同：6
> 
> 时间：2012-07-31T13:08:32.647
> 
> 标签：c#, excel

我正在开发一个将数据写入 Excel 文件的项目。

现在一切都完成了，但是我需要一些比其他单元格更大的单元格（标题等）。

我已经阅读了有关互联网的相关信息，但我一直遇到同样的问题：当我执行我的代码时（请参阅下面的我尝试过的内容），工作表中的所有内容都会变大。

我已经尝试过的：

```
worksheet.Rows[1].Cells[7].Style.Font.Size = 20; 

worksheet.get_Range("A7", "A7").Style.Font.Size = 20; 
```

这些似乎都不起作用；增加单元格字体大小的正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T17:20:02.210

我不得不使用：

```
worksheet.get_Range("A7", "A7").Cells.Font.Size = 20; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T16:49:18.597

如果数据是一致的并且将始终写入相同的单元格，那么这是最简单的解决方案 - 适用于*产品详细信息/联系信息*类型导出

```
// set cell A7
worksheet.get_Range("A7", "A7").Font.Size = 20;

// set cells A7, A8
worksheet.get_Range("A7", "A8").Font.Size = 20;

// set cells A7, B7
worksheet.get_Range("A7", "B7").Font.Size = 20;

// set cells A7, A8, B7, B8
worksheet.get_Range("A7", "B8").Font.Size = 20; 
```

如果数据变化并且有时会被写入多个行/列，那么这样的事情会更简单 - 适用于*数据集/购物清单*类型导出

```
int RowNum;
int ColNum;

// some code to set variables

worksheet.Cells[RowNum, ColNum].Font.Size = 20; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-12T21:17:28.770

使用 interop excel 时，尽量不要使用“两个点”来编写代码以[清除 interop excel 对象](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects/159419#159419)。这也有助于使您的代码更具可读性。无论如何，要回答你的问题，并使用我所指出的......你所要做的就是：

```
//Declare your variables
Application excel = null;
Workbook excelworkBook = null;
Range excelCellrange = null;
Worksheet worksheet = null;
Font excelFont =null;

//start your application
excel = new Application();
try
{
   ...
   //your code goes here...
   excelCellrange = worksheet.Range[worksheet.Cells[1,7],worksheet.Cells[1,7]];
   excelFont = excelCellrange.Font;
   excelfont.Size = 20;
   ...
   ...
}
catch(Exception ex){
}
finally{
   //here put something to clean the interop objects as the link above.
   ...
   Marshal.ReleaseComObject(excelfont);
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:12:53.750

我只会使用：

```
worksheet.Range["A7"].Style.Font.Size = 20; 
```

编辑：对不起，错误的括号

# jquery - 单击一行上的编辑不会回发

> ID：11740865
> 
> 赞同：2
> 
> 时间：2012-07-31T13:09:30.890
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

我从以下网址下载了这个 jqgrid 示例：[http ://tpeczek.codeplex.com/releases/view/61796](http://tpeczek.codeplex.com/releases/view/61796)

我更新了“基础”网格，并且每一行都显示了一个编辑按钮。单击此按钮并传入产品 ID 时，我想转到另一个编辑页面。但是没有回发？另外，我怎样才能让 productID 显示正确的值，因为现在它显示的是产品名称（ev 向左移动）

网格

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#jqgProducts').jqGrid({
                //url from wich data should be requested
                url: '@Url.Action("Products")',
                //type of data
                datatype: 'json',
                //url access method type
                mtype: 'POST',
                //columns names
                colNames: ['Actions', 'ProductID', 'ProductName', 'SupplierID', 'CategoryID', 'QuantityPerUnit', 'UnitPrice', 'UnitsInStock'],
                //columns model
                colModel: [
                     { name: 'act', index: 'act', width: 55, align: 'center', sortable: false, formatter: 'actions' },
                     { name: 'ProductID', index: 'ProductID', align: 'left' },
                            { name: 'ProductName', index: 'ProductName', align: 'left' },
                            { name: 'SupplierID', index: 'SupplierID', align: 'left' },
                            { name: 'CategoryID', index: 'CategoryID', align: 'left' },
                            { name: 'QuantityPerUnit', index: 'QuantityPerUnit', align: 'left' },
                            { name: 'UnitPrice', index: 'UnitPrice', align: 'left' },
                            { name: 'UnitsInStock', index: 'UnitsInStock', align: 'left' }
                          ],
                //pager for grid
                pager: $('#jqgpProducts'),
                //number of rows per page
                rowNum: 10,
                //initial sorting column
                sortname: 'ProductID',
                //initial sorting direction
                sortorder: 'asc',
                //we want to display total records count
                viewrecords: true,
                //grid height
                height: '100%',
                editurl: '/Edit'
            });

            $('#jqgProducts').navGrid('#pagerComponents', { edit: false }).
         navButtonAdd('#pagerComponents', {
             caption: "fdsfsdf",
             title: "Edit Component",
             buttonicon: "ui-icon-pencil",
             onClickButton: function () {
                 var id = jQuery("#listComponents").getGridParam('selrow');
                 if (id) {
                     var data = jQuery("#listComponents").getRowData(id);
                     window.location = '/Edit/' + data.COMPONENTID;
                 }
                 else {
                     alert("Please select a row to edit.");
                 }
             }
         });

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:54:31.767

因此，对于您问题的第一部分，如果您想通过单击该行中的编辑按钮重定向到特定的 url，那么您需要使用操作格式化程序指定一些内容。我告诉你怎么做

[http://www.ok-soft-gmbh.com/jqGrid/ActionButtons41WithoutMultiedit.htm](http://www.ok-soft-gmbh.com/jqGrid/ActionButtons41WithoutMultiedit.htm)

在此处查看此示例，我们提供带有操作格式化程序的 deloptions，您可以像这样指定 url 进行编辑

editOptions:{url: '@Url.Action("EditAction")', restoreAfterError: false}

默认情况下，可编辑的行的数据将转到服务器，您需要指定可编辑的：真实的列，例如您希望像这样可编辑的列

{ 名称：'ProductName'，索引：'ProductName'，对齐：'left'，可编辑：true }，

因此，现在如果您单击操作格式化程序的编辑，它将带您到带有可编辑列数据的“EditAction”，您可以在那里使用它。

对于第二部分，我觉得一切都很好。您能否检查从服务器获取的数据，您正在加载到 jqgrid 的数据按字母顺序与 jqgrid 中的列名相同，否则请检查提琴手或开发人员工具中的响应。

# phpexcel - 错误 PHPEXCEL 调用非对象上的成员函数 getNestingLevel()

> ID：11740866
> 
> 赞同：3
> 
> 时间：2012-07-31T13:09:31.853
> 
> 标签：phpexcel

我的 EXCEL 到 CSV 转换代码正在工作...但是对于特定的 Excel 文件，它会出现错误

在第 950 行的 /var/www/portal/user/admin/pe/Classes/PHPExcel/Reader/Excel5.php 中的非对象上调用成员函数 getNestingLevel()

那个 .xls 文件有图片，只有几行和几列......无法理解......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:13:31.170

这个问题现在已经修复，今晚晚些时候将提交到 github 上的开发分支

# android - 如何制作自定义工具提示/弹出窗口

> ID：11740870
> 
> 赞同：1
> 
> 时间：2012-07-31T13:09:37.727
> 
> 标签：android

我正在研究一种我认为必须是自定义弹出窗口的工具提示。工具提示是一个图像，在应用程序启动时出现。图像必须显示在特定位置并在用户触摸屏幕时关闭并且不再显示。

我从 res/values 中的 style.xml 文件开始

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="CustomDialotTheme" parent="@android:style/Theme.Dialog">
<item name="android:windowBackground">@drawable/hint</item>    
<item name="android:windowIsFloating">false</item>
<item name="android:windowNoTitle">true</item>
</style>
</resources> 
```

在.java中：

```
public class ShopListActivity extends Activity {
static Activity _activity;
ListView _list;
ListView _listLocation;
ShopListAdapter _adapter;
HashMap<Object, StoreRow> _storesMap = new HashMap<Object, StoreRow>();
HashMap<Object, StoreRow> _storesMapLocation = new HashMap<Object, StoreRow>();

private Button _buttonGetLocation;
private Button _buttonSortAll;
private LocationManager _locManager;
private LocationListener _locListener;
private boolean _gpsEnabled = false;
private boolean _networkEnabled = false;
// hashmap table indication: false - use storeMap, true - use
// storesMapLocation
private boolean _loadByLocation = false;
double _longitude;
double _latitude;
Location currentLocation;
// set fonts
Typeface font;
Typeface fontBold;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.shops_view);
    // get custom fonts
    font = Typeface.createFromAsset(getAssets(), "fonts/rutz_oereg.ttf");
    fontBold = Typeface
            .createFromAsset(getAssets(), "fonts/rutz_oebol.otf");

    loadMyProductsList();

    // delete product that are older then 7 days
    deleteOldProducts();

    _list = (ListView) findViewById(R.id.list);
    _list.setDivider(null);
    _list.setDividerHeight(0);
    _list.setCacheColorHint(0);
    // for the search by location
    _buttonGetLocation = (Button) findViewById(R.id.filter_location);
    _buttonGetLocation.setOnClickListener(gpsListener);
    _buttonGetLocation.setPressed(false);
    // set custom font
    _buttonGetLocation.setTypeface(fontBold);
            _longitude = Constants.sortByPrioritiesLocation;
    _latitude = Constants.sortByPrioritiesLocation;
    _buttonSortAll = (Button) findViewById(R.id.filter_all);
    _buttonSortAll.setOnClickListener(sortAllListener);
    _buttonSortAll.setPressed(true);
    // set cunstom font
    _buttonSortAll.setTypeface(fontBold);

    _adapter = new ShopListAdapter(this, _storesMap);
    LoadStoresTask task = new LoadStoresTask();
    task.execute(new Void[] {});

    Button btnMore = (Button) findViewById(R.id.btnMore);
    btnMore.setOnClickListener(moreStoresListener);
    //set custom fonts
    btnMore.setTypeface(fontBold);

    _activity = ShopListActivity.this;
            Dialog _hintDialog = new Dialog(this, R.style.CustomDialotTheme);
            _hintDialog.setContentView(R.layout.shops_view);
            _hintDialog.setCancelable(false);
            _hintDialog.show();
} 
```

它永远不会出现。也许还有另一种方法来创建工具提示或感谢任何建议如何创建我需要的自定义弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:16:27.627

请看这个[教程](http://www.thiyagaraaj.com/articles/android-articles/customdialogboxpopupusinglayoutinandroid)

它肯定会帮助你。

开心！！

# c - 如何使用 C 在 Ubuntu 上获取 WIFI 参数（带宽、延迟）

> ID：11740873
> 
> 赞同：1
> 
> 时间：2012-07-31T13:09:43.350
> 
> 标签：c, ubuntu, wifi

我是学生，我正在用 C99 标准编写简单的应用程序。程序应该在 Ubuntu 上运行。

我有一个问题 - 我不知道如何获得一些 Wifi 参数，如**带宽**或**延迟**。我不知道该怎么做。可以使用标准函数或任何 linux API（我是 windows 用户）来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:53:47.223

也许你应该告诉我们更多关于你的具体问题。现在，我假设您对特定无线链路（即两个 802.11 站之间的链路）的*吞吐量*和*延迟感兴趣。*这可以是接入点和客户端之间或两个自组织站之间的链接。

简短的回答是没有这样的 API。事实上，即使估计这两个链路参数也并非易事。它们取决于信号质量、发送站使用的数据速率、干扰、信道利用率、两端计算机系统的负载，可能还有很多其他因素。

根据您使用的无线驱动程序，可能可以获得有关当前使用的数据速率的信息以及您正在与之通信的站点的一些丢包统计信息。查看`net/mac80211/sta_info.h`您的 Linux 内核源代码树。如果您使用的是**MadWifi**，您可能会在下面的文件`/proc/net/madwifi/ath0/`和`wlanconfig ath0 list sta`.

但是，您所能做的就是做出预测。如果链接质量突然发生变化，您的预测可能完全错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:13:14.167

通常，您不知道 wifi 设备的带宽或延迟。带宽和延迟是来自链接的信息类型。据我所知，WiFi驱动程序中没有此类信息。与链路最相关的信息是 SINR。为了测量带宽或延迟，您应该编写自己的代码。

# php - 根据列值获取mysql信息

> ID：11740881
> 
> 赞同：0
> 
> 时间：2012-07-31T13:10:11.913
> 
> 标签：php, mysql

有没有办法运行 mysql $query 并按列中的值指定和排序。因此，如果您有一个带有 column:name 的表，并且有 2 个人的名称为“john”，但第一个 john 的名称为“id”：10，第二个 john 的名称为“id”：20。我想先回应第一个 john(10)。所以像：

```
 $sql = mysql_query("SELECT firstname FROM users 
                   WHERE email='$email' 
                   AND id='(*smallest value*)'");

  while($info = mysql_fetch_assoc($sql))
  echo $info['firstname'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:10:59.100

`SELECT firstname FROM users WHERE email='$email' order by id asc limit 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:12:02.593

尝试

```
SELECT firstname FROM users WHERE email='$email' order by id asc limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:13:48.460

```
 $sql = mysql_query("SELECT firstname FROM users 
               WHERE email='$email' 
               ORDER BY id ASC"); 
```

在 John(20) 之前会给你 John(10)。

```
 $sql = mysql_query("SELECT firstname FROM users 
               WHERE email='$email' 
               ORDER BY id ASC
               LIMIT 1"); 
```

只会给你约翰（10）。

# javascript - 在 Jasmine 中捕获错误

> ID：11740883
> 
> 赞同：1
> 
> 时间：2012-07-31T13:10:29.443
> 
> 标签：javascript, jasmine

在我的代码中，我抛出消息：

```
var err = new Error();
func1: function(){
        err.name = "error1";  
        throw(err);
    }, 
```

我试图通过两种方式在 Jasmine 中捕捉到这个错误：

```
expect(func1().toThrow("error1");
expect(func1().toThrow(new Error("error1")) 
```

Jasmine 失败的问题，不检查这个错误。我错过了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:08:38.973

`toThrow``message`异常字段上的匹配项。

因此，如果您将代码更改为

```
func1: function(){
     err.message = "error1";  
     throw(err);
} 
```

你应该有更多的运气

# android - 微调器：ArrayAdapter.createViewFromResource 处的 NullPointerException

> ID：11740884
> 
> 赞同：3
> 
> 时间：2012-07-31T13:10:30.037
> 
> 标签：android, nullpointerexception, spinner, android-arrayadapter

我通过这样的代码创建了一些 Spinner：

```
 if (dyn_list_id[i]==null){
         String[] form_ids = db.getEntireColumn(list_table_name[i], "form_label_id");
         String[] spinnerArray = new String[form_ids.length];
         for (int k=0;k<form_ids.length;k++){
                 spinnerArray[k] = db.getFromLanguageTable(language_short_name, list_table_name[i], form_ids[k]);
                 System.out.println("Spinner Array "+spinnerArray[k]);
         }
         product_spinner[i] = new Spinner(viewToLoad.getContext());  //First Spinner
         product_spinner[i].setLayoutParams(lp_spinner);
         product_spinner[i].setBackgroundResource(R.drawable.spinner_selector);
         ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(viewToLoad.getContext(),  com.Orange.R.layout.my_spinner_textview, spinnerArray);
         spinnerArrayAdapter.setDropDownViewResource(R.layout.multiline_spinner_dropdown_item);
         product_spinner[i].setAdapter(spinnerArrayAdapter);
         this.SpinnerFields.add(product_spinner[i]);

        linear_layout[i].addView(product_spinner[i]);
        tablerow_product[i].addView(linear_layout[i]);
        Themes_TableLayout.addView(tablerow_product[i],new TableLayout.LayoutParams(TableRow.LayoutParams.FILL_PARENT,
                                TableRow.LayoutParams.WRAP_CONTENT));
    }
    else {
    String[] spinnerA = new String[item_visible];
    int cont=0;
    for (int p=0;p<status_itemList.length;p++){
         if (status_itemList[p].trim().equals("1")){
               spinnerA[cont]=db.getFromLanguageTable(language_short_name, "pr_dyn_list_option", form_label_id_itemList[p]);
               System.out.println("Spinner dinamic array "+spinnerA[cont]);
               cont++;
               }  
    }

     product_spinner[i] = new Spinner(viewToLoad.getContext()); //second Spinner
     product_spinner[i].setLayoutParams(lp_spinner);
     product_spinner[i].setBackgroundResource(R.drawable.spinner_selector);

     ArrayAdapter spinnerAdapter = new ArrayAdapter(viewToLoad.getContext(),  com.Orange.R.layout.my_spinner_textview, spinnerA);
       spinnerAdapter.setDropDownViewResource(com.Orange.R.layout.multiline_spinner_dropdown_item);    product_spinner[i].setAdapter(spinnerAdapter);
    this.SpinnerFields.add(product_spinner[i]);
    linear_layout[i].addView(product_spinner[i]);
   tablerow_product[i].addView(linear_layout[i]); 
  Themes_TableLayout.addView(tablerow_product[i],new TableLayout.LayoutParams(TableRow.LayoutParams.FILL_PARENT,
    TableRow.LayoutParams.WRAP_CONTENT));           
} 
```

它在屏幕上看起来很好，但是当我点击它时，我得到了这个错误：

```
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime  java.lang.NullPointerException
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:329)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:325)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.AbsListView.obtainView(AbsListView.java:1294)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.ListView.onMeasure(ListView.java:1109)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.view.View.measure(View.java:8171)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:123)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:4627)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:521)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
15:53:22.040    8716    com.Orange  ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
```

添加的第一个 Spinner 工作正常，但对于第二个 Spinner，我收到此错误。我不知道为什么我在 AdapterArray.createViewFromResources 得到一个空指针，因为我不使用这种方法。我的错误在哪里？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T13:44:38.877

您`null`在提供给适配器的数据列表/数组中有值。`ArrayAdapter`将为每一行调用`toString`此数据，如果是`null`a`NullPointerException`将被抛出。

确保您没有`null`值`spinnerA`（我认为这是第二个的数据`Spinner`（！？？！））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:47:16.047

您使用的第一个微调器：

```
spinnerArrayAdapter.setDropDownViewResource(R.layout.multiline_spinner_dropdown_item); 
```

第二你使用：

```
spinnerAdapter.setDropDownViewResource(com.Orange.R.layout.multiline_spinner_dropdown_item); 
```

您确定两者都相同/工作正常吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T00:07:43.907

我的问题是自定义项目布局和下拉项目布局没有对主文本视图使用相同的 ID；基本上是因为我想创建一个自定义项，但保持默认的下拉项。

创建具有相同 textview id 的自定义下拉项解决了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T05:21:13.617

嘿，我已经使用此功能完成了它，检查空值，不要将它们添加到您的列表中。此函数将返回表中指定列的所有值的列表数组，而不是空值。

```
public List<String> getList()
{
    List<String> list = new ArrayList<String>();

    Cursor cursor = sqlDb.query("tablename", new String[] {
            "someColumnName1" }, null, null, null, null, null);

        int i=0;
        for (cursor.moveToPosition(i); !cursor.isAfterLast(); cursor.moveToNext()) {
           if(cursor.getString(i) != null)   //in loop check for Null Values, add only Not null values
           {
               list.add(cursor.getString(i));
           }
        }

    return shopList;

} 
```

从上述方法填充微调器，如下所示：

```
private void populateSpinnerList()
{
    List<String> list = getList();
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(context,
            R.layout.some_layout, R.id.some_textview_in_layout, list);
    if (!list.equals(""))
        spinner.setAdapter(dataAdapter);
} 
```

它对我来说就像一个魅力。

# go - 从 exec.Command 调用“sed”

> ID：11740887
> 
> 赞同：1
> 
> 时间：2012-07-31T13:10:47.903
> 
> 标签：go

我目前在尝试运行此代码时遇到问题，该代码应该调用 unix 命令来查找文件中`sed`的字符串并将其替换`hello`为`goodbye``./myfile.txt`

如果你从命令行运行它，这很好，但如果我从我的 Go 代码中尝试同样的事情......

```
command := exec.Command("sed", "-e \"s/hello/goodbye/g\" ./myfile.txt")
result,err := command.CombinedOutput()
fmt.Println(string(result)) 
```

我只是继续得到这个输出

```
sed: -e expression #1, char 2: unknown command: `"' 
```

是否有某种引号转义或导致它解释字符串错误的东西？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:30:50.460

我相信以下工作：

```
command := exec.Command("sed", "-e","s/hello/goodbye/g","myfile.txt") 
```

# java - 通过代理 servlet 设置安全 cookie

> ID：11740890
> 
> 赞同：2
> 
> 时间：2012-07-31T13:10:55.120
> 
> 标签：java, security, tomcat, cookies

我有一个 Web 应用程序，用户可以通过代理 sevlet 访问它——更大的 Web 应用程序的一部分。浏览器和更大的应用程序之间的通信由 ssl 加密。从我的嵌入式应用程序中，我想设置一个指示用户会话的安全 cookie。代理 servlet 和我的 Web 应用程序之间的通信未加密，因此当我设置会话 id cookie 时，它​​没有安全标志。我的应用程序在 tomcat 上运行，并且来自这个 tomcat 的响应通过代理 servlet 代理到客户端的浏览器。

这个 cookie 是否安全且无法被其他人劫持，尽管它并未被指示为安全？在这种情况下，浏览器可以在不安全的连接中发回 cookie 吗？

编辑：

我将指定该解决方案的更多架构以使其清楚：

有 2 个 Web 应用程序，每个应用程序都有自己的会话：1) 一个用户可以直接访问，并且它与浏览器之间的通信由 SSL 加密。（应用程序 X） 2）第二个用户无法访问，但由应用程序 X 的 servlet 代理（应用程序 Y） Servlet 也代理 http 标头。

架构如下图所示：

客户端浏览器| <-SSL-> |应用程序 X（代理 servlet）| <-内部网络，无 SSL -> |应用程序 Y

我想从表示会话的应用程序 Y 在客户端浏览器中设置 cookie。Cookie 标头从应用程序 Y 获取到 X 并设置到客户端的浏览器中，但不幸的是，此标头没有安全标志。我不确定它是否会在安全连接中由浏览器发回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:47:11.017

似乎用户的 Web 浏览器通过 HTTPS 远程连接到您的 Web 代理服务器，而您的 Web 代理服务器通过 HTTP 在本地连接到您的应用程序。

您仍然可以通过手动设置`secure`cookie 选项或手动创建 cookie 标头来将 cookie 设置为安全的。通常，Web/应用程序服务器会忽略传出 cookie 的设置。相反，通常由浏览器来执行规则。

将带有`secure`选项的 cookie 发送到浏览器很重要，因此浏览器知道除非通过 HTTPS，否则不会将 cookie 发回，从而防止窃听。您还应该包括`httponly`cookie 的选项。

在此处添加 nonce 不会提供任何额外的保护，因为如果可以说服受害者发送未加密的请求，攻击者将能够捕获 cookie 和 nonce。

这并不是说 nonce 本身不能很好地防止重放攻击，即使是通过 HTTPS，但它不会防止会话劫持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:16:56.130

这确实不是保护您的网络应用程序的好方法，因为最重要的通信区域（在浏览器之间以及它们到达您的应用程序之间）没有加密。那是最有可能被其他人窥探的区域。没有 SSL，Cookie 本质上是不安全的，因为没有 SSL，就无法加密它们。它们只是 HTTP 事务的一部分（因此与其他事务一样安全）。

如果 HTTP 事务发生在 SSL 上，会话本质上是安全的，因为 cookie 只包含一个相当唯一的 ID 代码，指向服务器上的存储隔间，用于 servlet 容器中的用户信息。有人可以劫持的唯一方法是他们可以拦截 cookie 并让他们的浏览器使用该 cookie。同样，SSL 是您最好的选择。

现在，您可以使用[nonce](http://en.wikipedia.org/wiki/Cryptographic_nonce)之类的东西在 SSL 之上添加额外的安全性。如果您想查看实时示例，有很多应用程序可以使用它们。

# sql - 使用存储过程更新表

> ID：11740897
> 
> 赞同：1
> 
> 时间：2012-07-31T13:11:12.810
> 
> 标签：sql, sql-server

我有一张桌子，里面有 50 列。从我后面的代码开始，我使用存储过程插入 10 个值，然后在基于用户 ID 的第二页中，我想更新其他 40 列。所以我正在更新表，并且表的 userid 列是一个自动递增的标识列，那么如何获取更新存储过程的用户 id？

```
CREATE PROCEDURE sp_update
     (@FormFiledBy varchar(50), @MaritalStatus varchar(50),
      @Height varchar(50), @Religion varchar(50), @Caste varchar(100),
      @MotherTongue varchar(50), @Education varchar(100),
      @Occupation varchar(50), @CountryofResidence varchar(50), 
      @EducationDetails varchar(100), @AnnualIncome varchar(50), 
      @CountryOfBirth varchar(50), @BirthPlace varchar(50), 
      @TimeOfBirth nchar(10), @StarSign varchar(100),
      @Gothram varchar(50), @Rassi varchar(50), @HavinChildren varchar(10),
      @PhysicalStatus varchar (100)
     )
AS
BEGIN      
    UPDATE Profile_Master
    SET FormFiledBy = @FormFiledBy,
        MaritalStatus = @MaritalStatus,
        Height = @Height,
        physicalStatus = @physicalStatus,
        Religion = @Religion,
        Caste = @Caste,
        MotherTongue = @MotherTongue,
        Education = @Education,
        Occupation = @Occupation,
        CountryofResidence = @CountryofResidence,
        EducationDetails = @EducationDetails,
        AnnualIncome = @AnnualIncome,
        CountryOfBirth = @CountryOfBirth,
        BirthPlace = @BirthPlace,
        TimeOfBirth = @TimeOfBirth,
        StarSign = @StarSign,
        Gothram = @Gothram,
        Rassi = @Rassi,
        HavinChildren = @HavinChildren,
        PhysicalStatus = @PhysicalStatus
    WHERE 
        ????
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:15:28.100

在您的初始过程中，当您插入数据时，您应该检索并在 OUTPUT 参数中返回用户 ID 值，以便您可以将其提供给您的更新过程。

你可以`SCOPE_IDENTITY()`很容易地使用它。

* * *

根据要求，一些示例代码（简化，但您应该看到模式）：

```
CREATE PROCEDURE add_row @data1 varchar(20), @data2 varchar(20), @id int OUTPUT
AS
BEGIN
    INSERT INTO Table (Data1, Data2) VALUES (@data1, @data2)

    SELECT @id = SCOPE_IDENTITY()
END
GO

CREATE PROCEDURE update_row @id int, @data3 varchar(20), @data4 varchar(20)
AS
BEGIN
    UPDATE Table SET Data3 = @data3, Data4 = @data4
    WHERE Id = @id
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:15:49.937

您不需要更新主键，但必须将 UserId 作为存储过程的参数传递。

```
Update Profile_Master
Set ....
Where UserId = @UserId --your parameter 
```

注意：您必须确保您的主键只是 UserId

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:27:12.727

你只需`SCOPE_IDENTITY()`要从第一个存储过程中传递如下：

```
@Id int OUTPUT,

---
SET @Id = SCOPE_IDENTITY() 
```

并在第二个存储过程中应用`Id`作为参数和`Update`基于该记录的记录。

```
@Id VARCHAR(15)
Update Profile_Master
set ....
........
where UserId = @Id 
```

# wordpress - 如何将自定义字段添加到自定义帖子类型？

> ID：11740907
> 
> 赞同：7
> 
> 时间：2012-07-31T13:11:40.713
> 
> 标签：wordpress, custom-fields, custom-post-type, featured

早上好。

我创建了一个名为“产品”的自定义帖子类型。我想创建一个自定义字段（元框是正确的术语吗？），我的客户可以在其中勾选一个框以确定此 CPT 中的给定帖子是否是精选帖子。

这是我的functions.php中用于创建“产品”CPT的代码：

```
function products_custom_init() {

    $labels = array(
        'name' => _x('Products', 'post type general name'),
        'singular_name' => _x('Product', 'post type singular name'),
        'add_new' => _x('Add New', 'products'),
        'add_new_item' => __('Add New Product'),
        'edit_item' => __('Edit Product'),
        'new_item' => __('New Product'),
        'view_item' => __('View Product'),
        'search_items' => __('Search Products'),
        'not_found' =>  __('Nothing found'),
        'not_found_in_trash' => __('Nothing found in Trash'),
        'parent_item_colon' => ''
    );

    $args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'show_in_menu' => true,
        'show_in_nav_menus' => false,
        'query_var' => true,
        'rewrite' => array('slug','pages'),
        'capability_type' => 'post',
        'hierarchical' => true,
        'menu_position' => 5,
        'supports' => array('title','editor','thumbnail','excerpt',)
      );

    register_post_type( 'products' , $args );
}
add_action( 'init', 'products_custom_init' ); 
```

那么如何将“特色”元框/自定义字段添加到*产品*帖子中？

非常感谢，

辛西娅

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:36:37.020

正如 Muhammad Yasin 所说，我推荐一些插件：
[http ://wordpress.org/extend/plugins/more-fields/](http://wordpress.org/extend/plugins/more-fields/)

如果您想自己在代码中执行此操作，请查看：[`add_meta_box`](http://codex.wordpress.org/Function_Reference/add_meta_box)

```
<?php add_meta_box( $id, $title, $callback, $post_type, $context, $priority, $callback_args ); ?> 
```

您可以为每个帖子类型注册框。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-14T13:36:36.457

如果您想在自定义帖子类型中创建自定义元框，您将需要使用 3 个函数。

1.  在帖子编辑屏幕上创建自定义“元框”块/屏幕的功能：[`add_meta_boxes_{$post_type}`](https://developer.wordpress.org/reference/hooks/add_meta_boxes_post_type/)

2.  添加输入字段以更改/显示您的自定义元数据的功能

3.  最后，当您在帖子编辑屏幕上单击保存时，可以将您的元数据与帖子的其余部分一起保存：[`save_post_{$post->post_type}`](https://developer.wordpress.org/reference/hooks/save_post_post-post_type/)

在您的情况下，自定义复选框将如下所示：

```
add_action( 'add_meta_boxes_products', 'meta_box_for_products' );
function meta_box_for_products( $post ){
    add_meta_box( 'my_meta_box_custom_id', __( 'Additional info', 'textdomain' ), 'my_custom_meta_box_html_output', 'products', 'normal', 'low' );
}

function my_custom_meta_box_html_output( $post ) {
    wp_nonce_field( basename( __FILE__ ), 'my_custom_meta_box_nonce' ); //used later for security
    echo '<p><input type="checkbox" name="is_this_featured" value="checked" '.get_post_meta($post->ID, 'team_member_title', true).'/><label for="is_this_featured">'.__('Featured Product?', 'textdomain').'</label></p>';
}

add_action( 'save_post_team_member', 'team_member_save_meta_boxes_data', 10, 2 );
function team_member_save_meta_boxes_data( $post_id ){
    // check for nonce to top xss
    if ( !isset( $_POST['my_custom_meta_box_nonce'] ) || !wp_verify_nonce( $_POST['my_custom_meta_box_nonce'], basename( __FILE__ ) ) ){
        return;
    }

    // check for correct user capabilities - stop internal xss from customers
    if ( ! current_user_can( 'edit_post', $post_id ) ){
        return;
    }

    // update fields
    if ( isset( $_REQUEST['is_this_featured'] ) ) {
        update_post_meta( $post_id, 'is_this_featured', sanitize_text_field( $_POST['is_this_featured'] ) );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:04:31.020

你可以使用这个插件

[http://wordpress.org/extend/plugins/types/](http://wordpress.org/extend/plugins/types/)

或者本教程可能对您有所帮助。

[http://wptheming.com/2010/08/custom-metabox-for-post-type/](http://wptheming.com/2010/08/custom-metabox-for-post-type/)

# python - ValueError：python shlex.split 没有转义字符

> ID：11740910
> 
> 赞同：-3
> 
> 时间：2012-07-31T13:12:00.100
> 
> 标签：python

我有一个字符串如下

```
mystring1=xcopy /Q /Y d:\\Program Files\\TestData\\*.* c:\\Program Files\\TestData\\Company name\\
mystring2=xcopy '/Q' '/Y' 'd:\tj\tjData\\' "c:\Program Files\TestData\\Company name\\" 
```

我使用 shlex 模块如下

```
mylist1=shlex.split(mystring1) 
mylist2=shlex.split(mystring2) 
```

但我收到一个错误：

```
ValueError: No escaped character 
```

mylist1 值应为**[xcopy,/Q,/Y,d:\Program Files\TestData\,c:\Program Files\TestData\Company name\]**

和

mylist2 值应为**[xcopy,/Q,/Y,d:\tj\tjData\,c:\Program Files\TestData\Company name\]**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:27:06.090

好吧，我不确定你想做什么，但是，一方面，我看到了一个 Windows 用户，另一方面，我在手册中植入了一个[Posix](http://en.wikipedia.org/wiki/POSIX)选项。

所以我想：“posix=False”是给他的。

这就是它所提供的：

```
>>> mystring1
'xcopy /Q /Y d:\\Program Files\\TestData\\*.* c:\\Program Files\\TestData\\Company name\\'
>>> split(mystring1, posix=False)
['xcopy', '/Q', '/Y', 'd:\\Program', 'Files\\TestData\\*.*', 'c:\\Program', 'Files\\TestData\\Company', 'name\\']
>>> mystring2
'xcopy \'/Q\' \'/Y\' \'d:\tj\tjData\\\' "c:\\Program Files\\TestData\\Company name"'
>>> split(mystring2, posix=False)
['xcopy', "'/Q'", "'/Y'", "'d:\tj\tjData\\'", '"c:\\Program Files\\TestData\\Company name"'] 
```

字符转义可能不完全是您所需要的，但由于我不经常使用 Windows，因此我不会在这一点上进一步冒险。

编辑：据我所知，当您开始研究某个主题时，在文档中导航并不总是那么容易，这里有一些链接：

[shlex](http://docs.python.org/library/shlex.html#module-shlex) <= 你应该始终使用 RTFM。至少两次。

[Python Lexcial Analysys](http://docs.python.org/release/2.7.3/reference/lexical_analysis.html) <= 可能并不明显，但会改变你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:18:21.100

输入值的格式非常糟糕。考虑阅读格式化帮助。

哪个字符串会导致错误？首先看一下您的输入：反斜杠字符在 Python 字符串中具有特殊含义。所以当路径是：

```
s = 'C:\MSDOS' 
```

你必须写：

```
s = 'C:\\MSDOS' 
```

第一个反斜杠表示：“注意！下一个字符并不意味着具有特殊功能”，第二个反斜杠是字符本身。

看看[http://docs.python.org/release/2.5.2/ref/strings.html](http://docs.python.org/release/2.5.2/ref/strings.html)

# c# - 快速收集以在 .net 中查找

> ID：11740918
> 
> 赞同：0
> 
> 时间：2012-07-31T13:12:20.383
> 
> 标签：c#, .net

我有以下开发要求，我想知道我可以在 .net 中使用的最快集合是什么。

“要搜索字符串的静态集合以查找以给定字符串开头的所有字符串，该字符串可以按顺序排列”。

哈希表会是最好用的吗？这是在 c# .net 4.0 中完成的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:18:52.663

优化集合类型还为时过早——你甚至没有工作代码！

使用方便的集合类型（`Dictionary<TKey,TValue>`，`List<Tuple<T1,T2>>`或其他） - 一旦你有工作代码，如果存在性能问题：

*   分析代码
*   识别热点
*   如果您选择的集合是热点，请考虑更改它。
*   更改后的配置文件以查看您是否已解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:23:15.850

要快速查找具有给定前缀的字符串，请尝试[**trie**](http://en.wikipedia.org/wiki/Trie)。

![特里字典样本](../Images/123edba3ae6e4b6fc35f8f7de545e22c.png)

# maven - JMeter 使用什么 maven 插件？jmeter-maven-plugin 还是 chronos-jmeter-maven-plugin？

> ID：11740920
> 
> 赞同：10
> 
> 时间：2012-07-31T13:12:30.890
> 
> 标签：maven, jmeter, jmeter-maven-plugin

我需要设置由 CI 系统自动触发的性能测试。为此，我想使用 JMeter，因为已经存在一些脚本和经验，我想将它与 Maven 结合起来。

在我研究一个合理的插件期间，我发现存在两个插件：

1.  jmeter-maven-plugin： [http ://wiki.apache.org/jmeter/JMeterMavenPlugin](http://wiki.apache.org/jmeter/JMeterMavenPlugin)
2.  chronos-jmeter-maven-plugin：http: [//mojo.codehaus.org/chronos/chronos-jmeter-maven-plugin/usage.html](http://mojo.codehaus.org/chronos/chronos-jmeter-maven-plugin/usage.html)

哪个更好用？两者似乎目前都在维护和开发中。有这方面的经验吗？连配置都差不多。

我很乐意得到一些提示来帮助我做出决定，而不用玩这两个插件几天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:28:52.613

我还没有将 .jmx 文件与 maven 一起使用，特别是你提到的那些插件。

但是如果我需要的话，我可以想办法做到这一点。

所以考虑一下，你可以在无 gui 模式下执行 jmeter 测试。

1.  创建一个 shell 脚本包装器，它将在无 gui 模式下执行 jmeter 测试，例如 (jmeter_exe.sh)：

`$JMETER_HOME/bin/jmeter.sh -n -t MY_LOAD_TEST.jmx -l resultFile.jtl`

因此，这将执行给定的脚本并将结果存储在`.jtl`文件中，您可以使用它来显示您的测试结果，也许[这篇](https://stackoverflow.com/questions/4669467/jmeter-how-to-create-summary-report-from-jtl-file/11191109#11191109)文章对您有用，暂时不在主题范围内。

第一步完成。

2.然后您可以在项目根目录中创建目录`scripts`。你可以把它放在你的 pom.xml 中：

```
<plugin>
  <artifactId>exec-maven-plugin</artifactId>
  <groupId>org.codehaus.mojo</groupId>
  <executions>
    <execution>
      <id>Run load Test</id>
      <phase>generate-sources</phase>
      <goals>
        <goal>exec</goal>
      </goals>
      <configuration>
        <executable>${basedir}/scripts/jmeter_exe.sh</executable>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

瞧，您的测试是在生成源阶段执行的。使用您提到的插件可能会更容易，但我对此一无所知，这就是我刚刚想到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T11:17:54.213

使用 jmeter-maven-plugin：[http](http://wiki.apache.org/jmeter/JMeterMavenPlugin) ://wiki.apache.org/jmeter/JMeterMavenPlugin 。

它是事实上的，并且（正如上面提到的@Ardesco）它不需要安装任何东西，这让您可以抽象出 JMeter 可执行文件的安装位置以及所有这些问题......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T09:26:21.607

apache 插件（lazerycode）上的警告词：

*   它默认抑制 JMeter 输出，添加以下配置设置以防止：

```
<configuration>  
    <suppressJMeterOutput>false</suppressJMeterOutput>  
    <!-- to override debug logging from the plugin (although also in jmeter.properties) -->  
    <overrideRootLogLevel>debug</overrideRootLogLevel>  
    <jmeterLogLevel>DEBUG</jmeterLogLevel>  
</configuration> 
```

*   查看源代码（版本 1.8.1），似乎 -Xms 和 Xmx 仅限于 512

*   该插件会吞下异常，因此您的测试可能会失败，但您不知道为什么。看起来他们刚刚完成但没有提供结果。

*   jmeter mojo 将 jmeter 作为一个新的 java 进程启动，但不提供为此执行提供任何参数的能力。因此，如果异常被吞下（见上文），并且日志记录不足（可能不是），则调试过程以找出问题所在并不容易。我们（我的同事）将调试参数添加到流程执行中并调试 jmeter 调用以找出答案。

*   您可以直接为开发目的运行 jmeter 获得信息输出。我想说它在 jmeter UI 输出中提供了更多信息。

我没用过chronos mind。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T14:04:46.940

每次发布 JMeter 版本时，@Ardesco 的[JMeter Maven 插件都会更新。](https://github.com/jmeter-maven-plugin/jmeter-maven-plugin)它有很好的文档记录并且可以完美运行。

它易于设置，并允许轻松添加 JMeter-Plugins 等插件或商业插件，只要需要所需的库。

您可以阅读完整的博客，其中显示了旧版本 1.1.10 的设置：

*   [http://www.ubik-ingenierie.com/blog/integrate-load-testing-in-build-process-with-jmeter-ubikloadpack-maven/](http://www.ubik-ingenierie.com/blog/integrate-load-testing-in-build-process-with-jmeter-ubikloadpack-maven/)

对于更新的版本 2.5.1（截至 2017 年 11 月），请确保您阅读文档：

*   [https://github.com/jmeter-maven-plugin/jmeter-maven-plugin/wiki](https://github.com/jmeter-maven-plugin/jmeter-maven-plugin/wiki)

# jpa - play.db.jpa.Model 类如何自动提供自动生成的 Long id 字段

> ID：11740922
> 
> 赞同：0
> 
> 时间：2012-07-31T13:12:54.017
> 
> 标签：jpa, playframework

我被要求对使用 play.db.jpa.Model 的 Web 应用程序使用的数据库进行一些更改（和更新）。我想知道 play.db.jpa.Model 类如何自动提供自动生成的 Long id 字段我想独立于 Web 应用程序插入数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:19:05.070

如果你看一下 Model 的类，你会看到这段代码

```
@Id
@GeneratedValue
public Long id; 
```

这两个注释负责生成自动编号。有关其工作原理的更多详细信息，请查看[hibernate 文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-identifier)以获取标识符属性。

# javascript - 有没有办法将元数据添加到 JavaScript 对象？

> ID：11740925
> 
> 赞同：8
> 
> 时间：2012-07-31T13:13:18.070
> 
> 标签：javascript, node.js, v8

我想将元数据的键值对添加到任意 JavaScript 对象。此元数据不应影响不知道元数据的代码，这意味着例如

```
JSON.stringify(obj) === JSON.stringify(obj.WithMetaData('key', 'value')) 
```

元数据感知代码应该能够按键检索数据，即

```
obj.WithMetaData('key', 'value').GetMetaData('key') === 'value' 
```

有没有办法做到这一点 - 在 node.js 中？如果是这样，它是否适用于内置类型，例如`String` ~~and`Number`~~？（**编辑**考虑一下，我不关心像数字这样的真正的*原语*，但是对于*字符串*实例来说会很好）。

一些背景：我正在尝试做的是缓存从对象派生的值与对象本身，以便

*   对于元数据不知道的代码，元数据丰富的对象将看起来与没有元数据的原始对象相同
*   如果已经缓存，需要派生值的代码可以将其从元数据中取出
*   缓存将与对象一起收集垃圾

另一种方法是在某处存储带有缓存的哈希表，但您永远不知道对象何时被垃圾收集。每个对象实例都必须手动处理，以免缓存泄漏。

（顺便说一句，clojure 有这个功能：[http](http://clojure.org/metadata) ://clojure.org/metadata ）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:18:19.930

您可以使用 ECMA5 的新对象属性 API 来存储不会在枚举中显示但仍可检索的对象的属性。

```
var myObj = {};
myObj.real_property = 'hello';
Object.defineProperty(myObj, 'meta_property', {value: 'some meta value'});
for (var i in myObj)
    alert(i+' = '+myObj[i]); //only one property - @real_property
alert(myObj.meta_property); //"some meta value" 
```

更多信息在这里：[链接](https://web.archive.org/web/20140209074803/http://www.mitya.co.uk/blog/2012/Feb/ECMAScript-revolution-object-properties-201)

但是，您无法对字符串或数字等原始类型执行此操作，只能对复杂类型执行此操作。

[编辑]

另一种方法可能是利用数据类型的原型来存储元数据。（警告，前进）。所以对于字符串：

```
String.prototype.meta = {};
String.prototype.addMeta = function(name, val) { this.meta[name] = val; }
String.prototype.getMeta = function(name) { return this.meta[name]; };
var str = 'some string value';
str.addMeta('meta', 'val');
alert(str.getMeta('meta')); 
```

然而，这显然不是理想的。一方面，如果字符串被收集或别名（因为简单数据类型是按值复制的，而不是引用），您将丢失此元数据。老实说，只有第一种方法在现实环境中具有任何意义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T09:06:43.897

ES6 规范引入了 Map 和 WeakMap。您可以通过在 Chrome 中运行并启用实验性 javascript 标志来在节点中启用这些`node --harmony`（默认情况下它也在 Firefox 中）。Maps 和 WeakMaps 允许将对象用作键，这些键可用于存储有关对象的元数据，这些元数据对任何人都不可见，而无需访问特定的 map/weakmap。这是我现在经常使用的模式：

```
function createStorage(creator){
  creator = creator || Object.create.bind(null, null, {});
  var map = new Map;
  return function storage(o, v){
    if (1 in arguments) {
      map.set(o, v);
    } else {
      v = map.get(o);
      if (v == null) {
        v = creator(o);
        map.set(o, v);
      }
    }
    return v;
  };
} 
```

使用简单而强大：

```
var _ = createStorage();

_(someObject).meta= 'secret';
_(5).meta = [5];
var five = new Number(5);
_(five).meta = 'five';

console.log(_(someObject).name);
console.log(_(5).meta);
console.log(_(five).meta); 
```

它还促进了将实现与接口分离的一些有趣用途：

```
var _ = createStorage(function(o){ return new Backing(o) });

function Backing(o){
  this.facade = o;
}
Backing.prototype.doesStuff = function(){
  return 'real value';
}

function Facade(){
  _(this);
}
Facade.prototype.doSomething = function doSomething(){
  return _(this).doesStuff();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:16:14.980

JSON 中没有“评论”系统。最好的办法是添加一个名称不太可能的属性，并添加包含元数据的键。然后，如果您知道元数据是元数据，则可以将元数据读回，但其他设置只会将其视为另一个属性。如果有人使用`for..in`...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:30:29.773

您可以将元数据添加为“私有”变量！？

```
var Obj = function (meta) {
    var meta = meta;
    this.getMetaData = function (key) {
        //do something with the meta object
        return meta;
    };
};
var ins_ob = new Obj({meta:'meta'});
var ins_ob2 = new Obj();
if(JSON.stringify(ins_ob) === JSON.stringify(ins_ob2)) {
    console.log('hoorai');
}; 
```

# iphone - 警告：解析问题：使用 GNU 旧式字段指示符扩展

> ID：11740931
> 
> 赞同：8
> 
> 时间：2012-07-31T13:13:48.797
> 
> 标签：iphone, ios, warnings, coordinates, gnu

我尝试了以下代码：

```
CLLocationCoordinate2D coord = {latitude: 61.2180556, longitude: -149.9002778}; 
```

并且编译器显示以下警告

```
warning: Parse Issue: Use of GNU old-style field designator extension 
```

有人可以帮助我理解编译器想说什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T13:17:41.333

```
CLLocationCoordinate2D coord = {.latitude =  61.2180556, .longitude = -149.9002778}; 
```

# c# - SSRS 检查用户是否在使用自定义程序集的组中

> ID：11740932
> 
> 赞同：8
> 
> 时间：2012-07-31T13:13:58.013
> 
> 标签：c#, .net, reporting-services, ssrs-2008, system.security

我为我的 SSRS 项目创建了一个自定义程序集。

自定义程序集有 2 个功能，`IsInGroup`并且`MyTest`：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Security.Principal;

namespace SSRS_Custom_Fuctions
{
    public class Class1
    {

        public static bool IsInGroup(string user, string group)
        {
            using (var identity = new WindowsIdentity(user))
            {
                var principal = new WindowsPrincipal(identity);
                return principal.IsInRole(group);
            }
        }

        public static string MyTest()
        {
            return "Hello World";
        }
    }
} 
```

1) 返回字符串“Hello World”的基本函数`MyTest`使用表达式从报告中完美运行`=SSRS_Custom_Functions.Class1.MyTest()`

2)`IsInGroup`返回布尔值的函数不起作用。这是使用`System.Security.Principal`命名空间来检查传递给函数的用户名是否存在于传递给函数的组中。当尝试使用 expression 调用它时`=SSRS_Custom_Functions.Class1.IsInGroup(User.User1, "MyGroupName")`，报告会出现以下错误消息：

> 请求 System.Security 类型的权限失败

我已经根据[Microsoft KB920769](http://support.microsoft.com/kb/920769)`rssrvpolicy.config`修改了 ReportingServices 文件路径和VisualStudio 文件路径中的配置文件。`RSPreviewPolicy.config`

我添加了一个`CodeGroup`给`FullTrust`我的自定义程序集。

以下内容已添加到策略级别元素中：

```
<CodeGroup class="UnionCodeGroup"
           version="1"
           PermissionSetName="FullTrust"
           Name="SSRS_Custom_Fuctions"
           Description="Code group for my data processing extension">

<IMembershipCondition class="UrlMembershipCondition"
                      version="1"
                      Url="C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\SSRS_Custom_Fuctions.dll"/>
</CodeGroup> 
```

我仍然收到与上述相同的错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:03:29.067

在您的程序集中，您需要先断言 SecurityPermission 对象，然后再使用它。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Security.Principal;

namespace SSRS_Custom_Fuctions
{
    public class Class1
    {

        public static bool IsInGroup(string user, string group)
        {

        System.Security.Permissions.SecurityPermission sp = new System.Security.Permissions.SecurityPermission(System.Security.Permissions.PermissionState.Unrestricted);
        sp.Assert();

            using (var identity = new WindowsIdentity(user))
            {
                var principal = new WindowsPrincipal(identity);
                return principal.IsInRole(group);
            }
        }

        public static string MyTest()
        {
            return "Hello World";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:19:04.020

在 AssemblyInfo 文件中，您需要添加`namespace System.Security`和

```
[assembly: AllowPartiallyTrustedCallers()] . 
```

使用证书对程序集进行签名，并在机器的 GAC 中部署相同的程序。

# sql-server - 将数据库或表中的所有 NCHAR 列转换为 NVARCHAR 列

> ID：11740935
> 
> 赞同：4
> 
> 时间：2012-07-31T13:14:11.957
> 
> 标签：sql-server, type-conversion

我有一个包含很多`NCHAR(n)`列的数据库。其中一些列是简单的属性，但有些也是主键或外键。

有许多表和列以及大量的测试数据。

将每`NCHAR(n)`列转换`NVARCHAR(n)`为相同长度的列并同时修剪其内容的最佳方法是什么？

如果您能想到比在设计器中更改列、记住列名并在脚本窗口中修剪它更好的方法，请将其发布为答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T13:53:00.297

像这样的东西会做我认为的伎俩（除非任何是主键，然后你会得到一个错误 - 我建议你在你的情况下手动做设计器中的主键，因为要改变它们你必须放弃约束等这有点棘手）......

它获取所有列的所有表名、列名和大小，`nchar`并且为每个执行一个`alter`语句以更改列类型，然后`update`修剪数据。

可能有一种更高效的方法来做到这一点，但如果你只做一次，也许这会没问题（哦，将`databaseName`位更改为你的数据库名称）......

```
use databaseName

declare @tn nvarchar(128)
declare @cn nvarchar(128)
declare @ln int

declare @sql as nvarchar(1000)

declare c cursor for 
    select table_name,column_name,character_maximum_length 
    from information_schema.columns 
    where data_type ='nchar' and 
        TABLE_NAME not in (select TABLE_NAME from INFORMATION_SCHEMA.VIEWS)

open c
fetch next from c into @tn, @cn, @ln

while @@FETCH_STATUS = 0
begin

    set @sql = 'alter table ' + @tn + ' alter column ' 
        + @cn + ' nvarchar(' + convert(nvarchar(50), @ln) + ')'
    exec sp_executesql @sql

    set @sql = 'update ' + @tn + ' set ' + @cn + ' = LTRIM(RTRIM(' + @cn + '))'
    exec sp_executesql @sql

    fetch next from c into @tn, @cn, @ln
end

close c
deallocate c 
```

# php - 六月的 PHP strtotime 返回七月

> ID：11740936
> 
> 赞同：8
> 
> 时间：2012-07-31T13:14:12.863
> 
> 标签：php

我很困惑为什么以下 PHP strtotime 函数在 $monthToGet = 'June' 时返回“07”作为月份编号，而不是“06”：

```
$monthToGet = $_GET['mon'];
$monthAsNumber = date('m', strtotime($monthToGet)); 
```

从搜索来看，这可能是由于我没有指定默认日期参数（在本例中为日期和年份）。会是这个原因吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:18:40.657

## TL;博士

你说的对

```
echo date("m", strtotime("June"));
-> 07 
```

但是，*这*确实有效：

```
echo date("m", strtotime("1\. June 2012"));
-> 06 
```

## 问题解释

今天是`31\. July 2012`并且由于您只提供一个月，因此使用当前日期和当前年份来创建有效日期。

请参阅[文档](http://at2.php.net/strtotime)：

> **笔记**
> 
> 该函数期望得到一个包含英文日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），相对于现在给出的时间戳，或如果没有提供现在的当前时间。

## 备择方案

您可以使用[`date_parse_from_format()`](http://de.php.net/manual/en/function.date-parse-from-format.php)或[`strptime()`](http://de.php.net/manual/en/function.strptime.php)通过稍微不同的方法来实现您想要的。

（感谢 johannes_ 和 johann__ 的意见）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:22:10.873

固定：

```
$monthToGet = '1 '. $_GET['mon']; 
```

但我仍然不明白为什么，因为“m”是[有效的日期格式](http://www.php.net/manual/en/datetime.formats.date.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:37:06.140

今天是 7 月 31 日。所以`strtotime`with only`"June"`被解释为`31 June`=> `1 July`。

实际上：

```
echo date("Y-m-d",strtotime("January"));  // 2012-01-31
echo date("Y-m-d",strtotime("February")); // 2012-03-02 
```

当然......只有`today 31 Jul 2012`:) 明天一切都会奏效。

你很幸运，因为你今天才发现这个错误 ;)

# symfony - 使用 Behat 和 Mink 测试 Symfony2 的注册系统

> ID：11740937
> 
> 赞同：2
> 
> 时间：2012-07-31T13:14:17.190
> 
> 标签：symfony, tdd, bdd, behat, mink

我的问题与 Symfony2 中某些应用程序的测试有关。我使用 Behat 和 Mink 编写测试，但注册系统的测试存在一些问题。

我想在用户提交注册表后查看电子邮件，然后点击此电子邮件中的激活链接。

我找到了一个关于电子邮件测试的简短教程：http:
[//docs.behat.org/cookbook/using_the_profiler_with_minkbundle.html](http://docs.behat.org/cookbook/using_the_profiler_with_minkbundle.html)

本教程中的解决方案只有在 symfony 的配置文件中将“intercept_redirects”设置为“true”时才有效，但我已经有一些测试需要将此变量保留为“false”，所以我的问题是......是否可能临时更改此值，仅用于一个测试，还是我必须将此值更改为“true”，然后更新所有测试？

您如何测试您的注册系统，以及如何为它们编写测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:26:40.733

尝试使用[CommonContexts](https://github.com/Behat/CommonContexts/blob/master/Behat/CommonContexts/MinkRedirectContext.php)中的[MinkRedirectContext](https://github.com/Behat/CommonContexts)。它允许您停止场景的自动重定向并检查 URL：

```
Given I do not follow redirects
 When I ...
 Then I should be redirected to "/thank-you" 
```

您也可以自己调用*followRedirects()*手动完成：

```
$this->getSession()->getDriver()->getClient()->followRedirects(false); 
```

# objective-c - 从核心数据中获取数组

> ID：11740942
> 
> 赞同：0
> 
> 时间：2012-07-31T13:14:32.230
> 
> 标签：objective-c, ios, core-data

我已经建立了一个包含几个字符串字段和几个数组字段的模型。该模型保存为：

```
- (void)saveLevel:(NSString*)level traps:(NSArray*)traps whirls:(NSArray*)whirls accels:(NSArray*)accels walls:(NSArray*)walls dest:(NSString*)dest jupiter:(NSString*)jupiter rating:(NSNumber*)pRating;
{   
    if (m_pMOC == nil) 
       // Retrieves the managed object context

    NSManagedObject* pNewLevel = [NSEntityDescription insertNewObjectForEntityForName:@"Level" inManagedObjectContext:m_pMOC];

    NSDate* pDate = [NSDate date];

    // Must have these four attributes
    [pNewLevel setValue:level forKey:@"Level_ID"];
    [pNewLevel setValue:jupiter forKey:@"Ball"];
    [pNewLevel setValue:pDate forKey:@"Creation_Date"];
    [pNewLevel setValue:dest forKey:@"Destination"];
    [pNewLevel setValue:pRating forKey:@"Rating"];

    // Optional attributes
    if ([traps count] != 0) 
        [pNewLevel setValue:traps forKey:@"Traps"];
    if ([whirls count] != 0) 
        [pNewLevel setValue:whirls forKey:@"Whirls"];
    if ([accels count] != 0) 
        [pNewLevel setValue:accels forKey:@"Accelerators"];
    if ([walls count] != 0) 
        [pNewLevel setValue:walls forKey:@"Walls"];

    NSError* pError;
    if (![m_pMOC save: &pError]) 
    // etc...
} 
```

我有一个 DataManager 类，它处理从/到 Core Data 的获取/保存，在 Manager 内部，我验证了当我获取实体时，数组被获取，但是当它返回到调用它的类时，数组为零（另一方面，字符串可以很好地到达）。下面是 fetch 代码和从 fetch 中解析出返回值的代码：

```
- (NSArray*) getLevelWithID:(NSString*)level
{
    NSEntityDescription *pEntityDescription = [NSEntityDescription entityForName:@"Level" inManagedObjectContext:m_pMOC];
    NSFetchRequest *pRequest = [[[NSFetchRequest alloc] init] autorelease];
    [pRequest setEntity:pEntityDescription];
    NSPredicate* pPredicate = [NSPredicate predicateWithFormat:@"Level_ID == %@", level];
    [pRequest setPredicate: pPredicate];

    NSError* pError;
    NSArray* pLevels = [m_pMOC executeFetchRequest:pRequest error:&pError];
    if (pLevels == nil) 
    {
        NSLog(@"Could not find the level with Level_ID = %@",level);
        abort();
    }

    NSArray* pAccels = [pLevels valueForKey:@"Accelerators"];
    NSArray* pTraps = [pLevels valueForKey:@"Traps"];
    NSArray* pWalls = [pLevels valueForKey:@"Walls"];
    NSArray* pWhirls = [pLevels valueForKey:@"Whirls"];

    return pLevels;
} 
```

我在最后四个数组上设置了一个断点，它们中有对象，但在检索它们的函数中（如下所示），它们是 nil。

```
- (void) initLevel:(NSArray*)pLevelObjects
{
    Level* pLevel = [pLevelObjects objectAtIndex:0];

    NSString* pJupiter = pLevel.Ball;
    NSString* pDest = pLevel.Destination;

    NSArray* pAccels = [pLevel valueForKey:@"Accelerators"];
    NSArray* pTraps = [pLevel valueForKey:@"Traps"];
    NSArray* pWalls = [pLevel valueForKey:@"Walls"];
    NSArray* pWhirls = [pLevel valueForKey:@"Whirls"];
    ... (other initialization of the level) ...
} 
```

我对此感到困惑。字符串值存在，但数组不存在。我最初尝试使用点表示法（NSArray* pAccels = pLevel.Accelerators 等），但结果相同。

想法？

编辑：从视图控制器调用 initLevel：

```
- (void) startGameWithLevelID:(NSString*)pLevelID
{
    NSLog(@"MyViewController - beginGameWithLevelID");
    NSArray* pLevel = [[DataManager getDataManager] getLevelWithID:pLevelID];
    if (pLevel == nil || [pLevel count] == 0) 
    {
        NSLog(@"Didn't retrieve any level with id %@", pLevelID);
        abort();
    }
    else
    {
        CGRect newFrame = makeScreen([UIScreen mainScreen].applicationFrame);
        GameBoard* pGB = [[GameBoard alloc] initWithFrame: newFrame];
        pGB.m_pMyVC = self;
        [pGB initLevel: pLevel];
        [self.view addSubview: (UIView*)pGB];

        [pGB release];
    }
} 
```

编辑：我已经将数组重新分解为与关卡一对一关系的单独实体；该级别与这些实体具有一对多的关系。我还更改了名称以更好地遵守约定：所有属性和关系现在都以小写字母开头。我分别用 a_ 和 r_ 作为属性和关系的前缀。保存“-[NSCFString _isKindOfEntity:]：无法识别的选择器发送到实例 0x4d83120”时出现错误。这不是很有帮助，但我会在发现问题时通知您。目前，保存代码如下所示：

```
- (void)saveLevel:(NSString*)level traps:(NSArray*)traps whirls:(NSArray*)whirls accels:(NSArray*)accels walls:(NSArray*)walls dest:(NSString*)dest jupiter:(NSString*)jupiter rating:(NSNumber*)pRating;
{   
    if (m_pMOC == nil) 
    { // Code to get the managed object context from the delegate
    }
    NSManagedObject* pNewLevel = [NSEntityDescription insertNewObjectForEntityForName:@"Level" inManagedObjectContext:m_pMOC];
    NSManagedObject* pNewBall = [NSEntityDescription insertNewObjectForEntityForName:@"Ball" inManagedObjectContext:m_pMOC];
    [pNewBall setValue:jupiter forKey:@"a_Bounds"];
    NSManagedObject* pNewDest = [NSEntityDescription insertNewObjectForEntityForName:@"Dest" inManagedObjectContext:m_pMOC];
    [pNewDest setValue:dest forKey:@"a_Bounds"];

    NSDate* pDate = [NSDate date];

    // Must have these four attributes
    [pNewLevel setValue:level forKey:@"a_Level_ID"];
    [pNewLevel setValue:pDate forKey:@"a_Creation_Date"];
    [pNewLevel setValue:pRating forKey:@"a_Rating"];
    [pNewLevel setValue:@"Bob Dole" forKey:@"a_CreatedBy"];

    [pNewLevel setValue:pNewBall forKey:@"r_Ball"];
    [pNewLevel setValue:pNewDest forKey:@"r_Dest"];

    // Optional attributes
    if ([traps count] != 0) 
        [[pNewLevel mutableSetValueForKey: @"r_Trap"] addObjectsFromArray: traps];
    if ([whirls count] != 0) 
        [[pNewLevel mutableSetValueForKey: @"r_Whirl"] addObjectsFromArray: whirls];
    if ([accels count] != 0) 
        [[pNewLevel mutableSetValueForKey: @"r_Accel"] addObjectsFromArray: accels];
    if ([walls count] != 0) 
        [[pNewLevel mutableSetValueForKey: @"r_Wall"] addObjectsFromArray: walls];

    NSError* pError;
    if (![m_pMOC save: &pError]) 
    { // Error saving
    }
    else
    { // Successfully saved
    }
} 
```

再次感谢您的帮助，对于冗长的帖子感到抱歉，但我希望这将有助于其他 Core Data 新手（如我）学习一些东西。

最终编辑：好的，所以在重构之后，我终于找到了将数组保存为对象的解决方案（尽管我不确定这是否是最有效的方法）。下面只是添加一堆“陷阱”的代码。传递给函数的数组是 Trap 的边界，将被存储。然后与关卡形成关系（注意它不必同时由陷阱和关卡设置，只需其中一个，因为核心数据处理另一种方式）。

```
if ([traps count] != 0) 
    {
        for (NSString* pBounds in traps) 
        {
            NSManagedObject* pNewTrap = [NSEntityDescription insertNewObjectForEntityForName:@"Trap" inManagedObjectContext:m_pMOC];
            [pNewTrap setValue:pBounds forKey:@"a_Bounds"];
            [pNewTrap setValue:pNewLevel forKey:@"r_Level"];
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:28:44.377

### 可能的阵列滥用

在您的第一个片段中，您正在调用`valueForKey:`an `NSArray`，结果是一个数组，因为该代码遍历`pLevels`，将您的`valueForKey:`参数传递给内部的每个对象并组合这些值。

这就是[Key-Value Coding 的](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)[`NSArray`实现](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/valueForKey%3a) 方式。

在您的第二段代码中，您首先从数组中获取一个 pLevel，您`valueForKey:`在实体上执行选择器，而不是在数组上。所以结果就是那个特定对象中的内容。

可能您的一些实体具有这些字段，因此所有这些的组合结果具有一些值，但某些特定的没有。

### 可能的核心数据滥用

您说您在核心数据实体中保留了一个数组。你是怎样做的？没有特殊类型来保存数组，因此通常必须将其存储为二进制数据，并使用`[NSKeyedArchiver archivedDataWithRootObject:array]`. 可能是您的存储和获取不正确，因为您试图将数组存储在非数组字段中。

您是否也遇到过任何崩溃？

# c# - 检查所有子元素的 XElement

> ID：11740947
> 
> 赞同：1
> 
> 时间：2012-07-31T13:14:50.103
> 
> 标签：c#, xml, linq

我有`XElement`一个对象，它是我从 XML 文件中读取的 XML 树。现在我想检查这棵树中的所有节点以获取第一个属性名称和值。有没有简单的方法来遍历所有节点（从根到叶）？我的 XML 文件有很多不同的和奇怪的节点——这就是解决这个问题更难的原因。我想过写一些递归，但希望这是另一种更容易解决的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:17:54.737

也许看看 Xpath。像这样的 XPath`//*[@id=42]`可以完成这项工作。

这意味着获取属性“id”值为 42 的所有节点。

你可以这样做，`//*`它会返回树中的所有节点。

Xpath：http: [//msdn.microsoft.com/en-gb/library/ms950786.aspx](http://msdn.microsoft.com/en-gb/library/ms950786.aspx)

语法：http: [//msdn.microsoft.com/en-us/library/ms256471.aspx](http://msdn.microsoft.com/en-us/library/ms256471.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:19:37.693

您可以使用[`XElement.Elements()`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.elements.aspx).

这是一些使用递归来获取每个级别的所有元素的代码：

```
void GetElements(XElement element){
    var elements = element.Elements();

    foreach(Element e in elements){
        //some stuff here

        if(e.Elements() != null)
           GetElements(e);
    }
} 
```

# java - getElementsByTagName 返回的元素比实际存在的元素多 2 倍

> ID：11740948
> 
> 赞同：0
> 
> 时间：2012-07-31T13:14:53.033
> 
> 标签：java, xml-parsing, getelementsbyname

我使用 Java 1.7 解析 XML 文档。当我运行这个函数`document.getElementByTagName("Product")`时，我得到了 6000 个，但是如果我用 Notepad++ 打开它，我只看到 3000 个条目。

我在遍历所有条目数错误的元素时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:00:46.087

我解决了这个问题。问题出在 XML 文件上。父节点与子节点之一具有相同的名称。例如。

```
> <products>
>          <product>
>                  <name>Blbalbal</name>
>                  <size>14</size>
>                  <cost>2000 $</cost>
>                  <link>
>                        <product>www.somthing.com</product>
>                  </link>
>          </product>
>          <product>
>                  <name>Product2</name>
>                  <size>123</size>
>                  <cost>2 $</cost>
>                  <link>
>                        <product>www.somthing2.com</product>
>                  </link>
>          </product>
> </products> 
```

这就是为什么，每个条目计算两次

# wcf - WCF 服务 - 使用 jMeter 进行性能测试

> ID：11740950
> 
> 赞同：1
> 
> 时间：2012-07-31T13:14:59.600
> 
> 标签：wcf, rest, jmeter, wcf-rest

我开发了一个 RESTful`WCF`服务 ( `WebHttpBinding`)。我使用 jMeter 进行了性能测试。测试计划包含服务中的一项操作，将在 100 个并发线程中调用。但是，我注意到在运行测试`the first 20 to 30 threads are taking considerable amount of time to get the response (say 10-15 seconds)`之后，所有其他剩余的线程将在 2-3 秒内完成它们的执行。在我看来，前几个线程似乎阻塞了在它们之后到达服务器的线程。

我的服务具有以下配置：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

并且，

```
<serviceThrottling maxConcurrentCalls="300" maxConcurrentSessions="300"/> 
```

有人可以就导致这种初始延迟的原因给出一些指示吗？

# c# - C# 发送/接收字节大小（套接字）的问题

> ID：11740952
> 
> 赞同：0
> 
> 时间：2012-07-31T13:15:02.683
> 
> 标签：c#, .net, sockets

我已经制作了这些代码来使用 TCP 套接字发送和接收图像，但接收代码不起作用。

这是**发送代码**：

```
public void SendImage()
{
    int ScreenWidth = Screen.GetBounds(new Point(0, 0)).Width;
    int ScreenHeight = Screen.GetBounds(new Point(0, 0)).Height;
    Bitmap bmpScreenShot = new Bitmap(ScreenWidth, ScreenHeight);

    Graphics gfx = Graphics.FromImage((Image)bmpScreenShot);
    gfx.CopyFromScreen(0, 0, 0, 0, new Size(ScreenWidth, ScreenHeight));
    bmpScreenShot.Save(Application.StartupPath + "/ScreenShot.jpg", ImageFormat.Jpeg);
    byte[] image = new byte[1];
    bmpScreenShot = ResizeBitmap(bmpScreenShot, 300, 300);

    image = ImageToByte(bmpScreenShot);
    //get the length of image (length of bytes)
    int NumberOfBytes = image.Length;
    //put the size into a byte array
    byte[] numberofbytesArray = BitConverter.GetBytes(NumberOfBytes);

    //send the size to the Client
    int sizesend = sck.Send(numberofbytesArray, 0, numberofbytesArray.Length, 0);
    if (sizesend > 0)
    {
        MessageBox.Show("Size Sent");
    }
    //send the image to the Client
    int imagesend =sck.Send(image, 0, NumberOfBytes, 0);
    if (imagesend > 0)
    {
        MessageBox.Show("Image Sent");
    }
} 
```

这是**接收代码**：

```
public void ReceiveImage()
{
    if (sck.Connected)
    {
        {
            NetworkStream stream = new NetworkStream(sck);
            byte[] data = new byte[4];

            //Read The Size
            stream.Read(data, 0, data.Length);
            int size = (BitConverter.ToInt32(data,0));
            // prepare buffer
            data = new byte[size];

            //Load Image
            int read = 0;
            while (read != data.Length)
            {
               read += stream.Read(data, read, data.Length - read);
            }
            //stream.Read(data, 0, data.Length);
            //Convert Image Data To Image
            MemoryStream imagestream = new MemoryStream(data);
            Bitmap bmp = new Bitmap(imagestream);
            pictureBox1.Image = bmp;                    
        }
    }
} 
```

问题是当我发送大小时，它以 5kb 的形式发送，但是当我收到它时，我发现它是 2GB 并且出现了这个错误：

> 无法从传输连接读取数据。由于系统缺少足够的缓冲区空间或队列已满，因此可能会在套接字上执行操作。

错误出现在此语句中`read += stream.Read(data, read, data.Length - read);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:32:51.903

我会尝试获取更小的数据块。在您的代码中，您从*所有*数据开始（在失败的情况下一次 2GB。将其降低到更小的值 - 无论如何数据都是以块的形式发送的。例如：

```
read += stream.Read(buffer, read, 20480); 
```

这将一次读取大约 2k，以免大于缓冲区空间或对于队列来说太大。

如果您分配了 2GB 大小的缓冲区，则您的应用程序可能只剩下很少的内存。底层框架可能无法为自己分配 2GB 的数据（总共分配了 4GB）来传输数据。

# asp.net - ASP.NET MVC 3 获取单选按钮值和屏蔽字段

> ID：11740954
> 
> 赞同：0
> 
> 时间：2012-07-31T13:15:04.930
> 
> 标签：asp.net, asp.net-mvc-3, radio-button

我有这个单选按钮：

```
 @Html.LabelFor(model => model.Person.Type)
    @Html.Label("Type1")
    @Html.RadioButtonFor(model => model.Person.Type, "F", new { disabled = "disabled" })

    @Html.Label("Type2")
    @Html.RadioButtonFor(model => model.Person.Type, "J", new { disabled = "disabled" }) 
```

而且，我有这个显示：

```
 @Html.LabelFor(model => model.Person.Field)
    @Html.DisplayFor(model => model.Person.Field) 
```

如果在“Type1”（“F”）处选中 RadioButton，我需要一个 javascript 函数来替换这个 Dispay（Person.Field）。我怎样才能做到这一点？

# php - 从字符串中删除一个字符

> ID：11740955
> 
> 赞同：2
> 
> 时间：2012-07-31T13:15:04.727
> 
> 标签：php

给定地址：12345 West Palm Rd., #7B Daytona, FL

我正在尝试删除“。” 来自“路”的字符。和“#7B”中的“#”字符。但是，无论给出什么字符串，我都希望删除这些字符......

是否有捷径可寻？

我熟悉 strstr 但这似乎是一种复杂的方式来做我想做的事情......

我很感激任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:17:19.077

```
str_replace (array(".", "#"), "", $string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:19:29.823

PHP 有一个方便的字符串替换方法来处理你想要做的事情。

```
$address = "12345 West Palm Rd., #7B Daytona, FL";
$characters = array('.','#',etc.);
$stripped = str_replace($characters, '', $address);
echo $stripped; //  12345 West Palm Rd, 7B Daytona, FL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:18:18.650

查看函数文档中的[示例 #2](http://php.net/manual/en/function.strtr.php#example-4545)。**`strtr`**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:17:52.610

```
$str = preg_replace('/\./', '', $address);
$str = preg_replace('/#/', '', $str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:19:17.463

`$string = strtr($string, array('.' => '', '#' => ''));`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T13:19:50.353

使用以下 php 代码：

```
$smt="12345 West Palm Rd., #7B Daytona, FL";
$smt=str_replace(".","",$smt);
$smt=str_replace("#","",$smt); 
```

# java - Hibernate，按主键搜索返回表中的所有内容

> ID：11740957
> 
> 赞同：1
> 
> 时间：2012-07-31T13:15:07.947
> 
> 标签：java, hibernate, postgresql

我对 Hibernate 有这个问题，当我尝试使用标准检索唯一结果时，hibernate 会返回表中的所有内容。

```
Session session = HibernateUtil.beginTransaction();
Customer c = new Customer();
c.setCustId(custId);
Example ex = Example.create(c);
Criteria criteria = HibernateUtil.getSession().createCriteria(Customer.class);
criteria.add(ex);

Customer customer = (Customer)criteria.uniqueResult();

HibernateUtil.commitTransaction();
HibernateUtil.closeSession(); 
```

但是使用以下方式查询表：

```
Customer customer = (Customer)session
                    .createSQLQuery("select * from customer_ where custid = :id")
                    .addEntity(Customer.class)
                    .setInteger("id", custId)
                    .uniqueResult(); 
```

返回正确的条目。 `custId`是表的主键。该类`Customer`包含2个`@OneToMany`映射。

我需要在上面的标准示例中添加一些内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:18:07.840

[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#querycriteria-examples)说：

> 版本属性、**标识符**和关联被忽略。

（强调我的）

`Session.get()`如果您有标识符，为什么不简单地使用？

# javascript - JS：146-185、193-218 区间内的键码指定了哪些键盘键？

> ID：11740958
> 
> 赞同：1
> 
> 时间：2012-07-31T13:15:08.913
> 
> 标签：javascript, keyboard, keycode

为间隔 146-185、193-218 中的键码指定了哪些键盘键？

**用户经常使用此间隔中的哪些键？**

您可以从事件中获取密钥代码`event.keyCode`或`event.which`从`keydown`事件中获取密钥代码。

例如，我的键盘有`volume up`键码 175 和`volume down`键码 174。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:31:28.933

这是我保留供个人使用的 0x90 到 0xDF (144-223) 之间的*十六进制*密钥代码列表。这是我几年前从许多来源收集的清单的一部分。

一些键名尚不清楚。未列出的键是那些我无法找到关于它们的任何参考的键。

请注意，某些键仅在特定键盘上可用（取决于语言和布局）。根据键盘（通常是 OEM 键），某些键的使用方式也不同。

```
Virtual Key Name     Code  Keyboard Key Name
-------------------  ----  ------------------------------------
NUMLOCK              90    NUMLOCK
                           Macintosh: NUMLOCK/CLEAR
OEM_NEC_EQUAL        92    NUMPAD = (NEC PC-9800 Normal and DP
                           Japanese keyboards)
OEM_FJ_JISHO         92    Jisho/Dictionary key
                           (Oasys and Fujitsu FMR JIS/Oyayubi
                           Japanese keyboards)
OEM_SHIFT            92    ShiftLock key (IME)
OEM_FJ_MASSHOU       93    Masshou/"Unregister Word" key
                           (Oasys and Fujitsu FMR JIS/Oyayubi
                           Japanese keyboards)
OEM_FJ_TOUROKU       94    Touroku/"Register Word" key
                           (Oasys and Fujitsu FMR JIS/Oyayubi
                           Japanese keyboards)
OEM_FJ_LOYA          95    Left Oyayubi key (Oasys and Fujitsu
                           FMR Oyayubi Japanese keyboards)
OEM_FJ_ROYA          96    Right Oyayubi key (Oasys and Fujitsu
                           FMR Oyayubi Japanese keyboards)
LSHIFT               A0    LEFT SHIFT
RSHIFT               A1    RIGHT SHIFT
LCONTROL             A2    LEFT CTRL
RCONTROL             A3    RIGHT CTRL
LMENU                A5    LEFT ALT
RMENU                A5    RIGHT ALT
BROWSER_BACK         A6    BROWSER BACK (Windows keyboards)
BROWSER_FORWARD      A7    BROWSER FORWARD (Windows keyboards)
BROWSER_REFRESH      A8    BROWSER REFRESH (Windows keyboards)
BROWSER_STOP         A9    BROWSER STOP (Windows keyboards)
BROWSER_SEARCH       AA    BROWSER SEARCH (Windows keyboards)
BROWSER_FAVORITES    AB    BROWSER FAVORITES
                           (Windows keyboards)
BROWSER_HOME         AC    BROWSER HOME (Windows keyboards)
VOLUME_MUTE          AD    VOLUME MUTE (Windows keyboards)
VOLUME_DOWN          AE    VOLUME DOWN (Windows keyboards)
VOLUME_UP            AF    VOLUME UP (Windows keyboards)
OEM_FJ_000           B0    NUMPAD 000 (Oasys and Fujitsu FMR
                           JIS/Oyayubi Japanese keyboards)
MEDIA_NEXT_TRACK     B0    MEDIA NEXT TRACK (Windows keyboards)
OEM_FJ_EQUAL         B1    NUMPAD = (Fujitsu and Oasys Japanese
                           keyboards)
MEDIA_PREV_TRACK     B1    MEDIA PREVIOUS TRACK
                           (Windows keyboards)
OEM_FJ_00            B2    NUMPAD 00 (Oasys and Fujitsu FMR
                           JIS/Oyayubi Japanese keyboards)
MEDIA_STOP           B2    MEDIA STOP TRACK (Windows keyboards)
MEDIA_PLAY_PAUSE     B3    MEDIA PLAY/PAUSE (Windows keyboards)
OEM_OAS_1            B4    ??? key (Oasys Japanese keyboards)
LAUNCH_MAIL          B4    LAUNCH MAIL (Windows keyboards)
OEM_OAS_2            B5    ??? key (Oasys Japanese keyboards)
LAUNCH_MEDIA_SELECT  B5    LAUNCH MEDIA SELECT
                           (Windows keyboards)
OEM_OAS_3            B6    ??? key (Oasys Japanese keyboards)
LAUNCH_APP1          B6    LAUNCH APPLICATION 1
                           (Windows keyboards)
OEM_OAS_4            B7    ??? key (Oasys Japanese keyboards)
LAUNCH_APP2          B7    LAUNCH APPLICATION 2
                           (Windows keyboards)
OEM_OAS_5            B8    ??? key (Oasys Japanese keyboards)
OEM_OAS_6            B9    ??? key (Oasys Japanese keyboards)
OEM_0                B9    ??? key (IME)
OEM_1                BA    OEM key.
                           US standard keyboards: (;:)
OEM_PLUS             BB    OEM PLUS key.
                           Any standard keyboards: (=+)
OEM_COMMA            BC    OEM COMMA key.
                           Any standard keyboards: (,<)
OEM_MINUS            BD    OEM MINUS key.
                           Any standard keyboards: (-_)
OEM_PERIOD           BE    OEM PERIOD key.
                           Any standard keyboards: (.>)
OEM_2                BF    OEM key.
                           US standard keyboards: (/?)

OEM_3                C0    OEM key.
                           US standard keyboards: (`~)
ABNT_C1              C1    ??? key
OEM_OAS_7            C1    ??? key (Oasys Japanese keyboards)
ABNT_C2              C2    ??? key
OEM_OAS_8            C2    ??? key (Oasys Japanese keyboards)
OEM_OAS_9            C3    ??? key (Oasys Japanese keyboards)
OEM_OAS_10           C4    ??? key (Oasys Japanese keyboards)
OEM_OAS_11           C5    ??? key (Oasys Japanese keyboards)
OEM_OAS_12           C6    ??? key (Oasys Japanese keyboards)
OEM_OAS_13           C7    ??? key (Oasys Japanese keyboards)
OEM_OAS_14           C8    ??? key (Oasys Japanese keyboards)
OEM_OAS_15           C9    ??? key (Oasys Japanese keyboards)
OEM_OAS_16           CA    ??? key (Oasys Japanese keyboards)
OEM_OAS_17           CB    ??? key (Oasys Japanese keyboards)
OEM_OAS_18           CC    ??? key (Oasys Japanese keyboards)
OEM_OAS_19           CD    ??? key (Oasys Japanese keyboards)
OEM_OAS_20           CE    ??? key (Oasys Japanese keyboards)
OEM_OAS_21           CF    ??? key (Oasys Japanese keyboards)
OEM_OAS_22           D0    ??? key (Oasys Japanese keyboards)
OEM_OAS_23           D1    ??? key (Oasys Japanese keyboards)
OEM_OAS_24           D2    ??? key (Oasys Japanese keyboards)
OEM_OAS_25           D3    ??? key (Oasys Japanese keyboards)
OEM_OAS_26           D4    ??? key (Oasys Japanese keyboards)
OEM_OAS_27           D5    ??? key (Oasys Japanese keyboards)
OEM_OAS_28           D6    ??? key (Oasys Japanese keyboards)
OEM_OAS_29           D7    ??? key (Oasys Japanese keyboards)
OEM_4                DB    OEM key.
                           US standard keyboards: ([{)
OEM_5                DC    OEM key.
                           US standard keyboards: (\|)
OEM_6                DD    OEM key.
                           US standard keyboards: (]})
OEM_7                DE    OEM key.
                           US standard keyboards: ('")
OEM_8                DF    ??? OEM key 
```

# mysql - 用于连接两个查询的 MySQL 查询

> ID：11740962
> 
> 赞同：1
> 
> 时间：2012-07-31T13:15:25.960
> 
> 标签：mysql

我有一个mysql表，每行有一个学期的注册号、出生日期、学生姓名、性别、总分。我想在单个 SQL 查询中按总分的降序获取 10 个男孩和 5 个女孩的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:20:11.437

我的 MySQL 方言生锈了，但这应该可以解决问题

```
(SELECT * FROM Students WHERE sex = 'Male' ORDER BY TotalMarks DESC LIMIT 10)
UNION ALL
(SELECT * FROM Students WHERE sex = 'Female' ORDER BY TotalMarks DESC LIMIT 5) 
```

请注意，这是一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:20:31.363

试试这个代码：

```
select 
    a.studentID,
    a.studentName,
    a.dob,
    a.totalMark
from
(
    select
        studentID,  
        studentName,
        dob,
        totalMark
    from
        students
    where
        sex='M'
    order by 
        studentMark desc
    limit 10
    union all
    select
        studentID,  
        studentName,
        dob,
        totalMark
    from
        students
    where
        sex='F'
    order by 
        totalMark desc
    limit 5
)
order by
    totalMark desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:20:39.030

尝试这个

```
 select * from
    (select reg_number, dob, student_name, sex, total_marks where sex='male' 
    order by total_marks desc limit 10
    union
    select reg_number, dob, student_name, sex, total_marks where sex='female'
    order by total_marks desc limit 5) a order by total_marks desc 
```

# android - Android：如何将 LayoutParams 应用于我的 RelativeLayout

> ID：11740970
> 
> 赞同：0
> 
> 时间：2012-07-31T13:15:49.590
> 
> 标签：android, android-layout

我对这段代码有困难：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    RelativeLayout layout = (RelativeLayout)findViewById(R.id.RelativeLayout1);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

我在xml中有我的RelativeLayout1，如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ScrollView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingLeft="60dp"
    android:paddingTop="53dp" > 
```

但是当我应用滚动视图时，RelativeLayout1 的 fill_parent 不能正常工作，因为它不是滚动视图的子项。当它不是一个孩子（即我完全删除滚动视图）时，相对布局会覆盖整个屏幕，就像我喜欢的那样。但是当我把它放在滚动视图中时，即使我使用了fill_parent，它也只会到达相对布局内的最后一个元素（一个按钮）。

所以我正在以编程方式尝试它是否有所作为，但我似乎无法弄清楚如何在代码的第一位将我的 params 变量应用到我的布局中。如果您有任何其他想法，也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:19:25.563

您忘记调用 setter 方法`layout.setLayoutParams(params)`。要应用您创建的参数，您必须将它们提供给实际布局。

当父级是 ScrollView 时，请谨慎使用 fill_parent。当 Scroll 视图调整其大小以适应其子级时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:21:20.180

我想出了如何通过向滚动视图添加一个字段而不是以编程方式执行此操作来解决我的问题。在 ScrollView 中，我必须设置以下内容：

```
android:fillViewport="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:22:09.603

如果您希望 RelativeLayout 填满 ScrollView，请将该属性添加`android:fillViewport="true"`到您的 ScrollView。

在此处查看 Romain Guy 的相同帖子：[ScrollView 的便捷技巧](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

# git - git range 运算符是否总是以相同的方式工作？

> ID：11740979
> 
> 赞同：1
> 
> 时间：2012-07-31T13:16:21.413
> 
> 标签：git

我最近才注意到，当你做 git cherry-pick foo..bar

不包括 foo。如果您的历史记录如下所示：

```
bar
blubb
foo 
```

之前的提交只会选择 blubb 和 bar。这与

```
git log foo..bar 
```

可以通过使用轻松解决此问题

```
git log foo~..bar 
```

我只是找不到文档，想知道在 git 中接受范围运算符的所有命令是否都以这种方式工作，或者它是否取决于特定命令。

我猜是前者，但谁知道...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:18:55.410

是的，所有接受修订的 Git 命令都可以使用`~`，以这种形式指定修订的直接父级。[您可以在此处](http://schacon.github.com/git/gitrevisions.html)找到有关 Git 修订格式的更详细说明。

# android - 意图不在 If-else 中开始

> ID：11740980
> 
> 赞同：0
> 
> 时间：2012-07-31T13:16:24.423
> 
> 标签：android, android-intent

我是 Android 和 Java 的初学者。我的问题是：

在我的 mainActivity 类中，我有一个点击事件监听器。如果editText值正确（例如用户名，密码），我正在尝试打开一个意图我的代码在没有if语句并启动其他活动时有效，但是当我使用该用户名密码检查时，它没有运行第二个活动. 它只是在等待...

它出什么问题了？

```
package equalcorp.mobile.kemal;

import android.net.Uri;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;
import android.text.InputFilter.LengthFilter;

public class MainActivity extends Activity {

public EditText username;
public EditText password;   
public TextView tw1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button loginButton=(Button)findViewById(R.id.loginButton);
    username=(EditText)findViewById(R.id.username);
    password=(EditText)findViewById(R.id.password);
    tw1=(TextView)findViewById(R.id.textView1);

    loginButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            String u_name=username.getText().toString();
            String pass=password.getText().toString();

            if(u_name=="kemal" && pass=="sifre"){

                Intent i=new Intent(MainActivity.this,SecondActivity.class);
                startActivity(i);

            }

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:17:10.130

使用`String.equals(String str)`而不是`==`比较字符串

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:17:45.777

字符串不能与`=`整数值等运算符进行比较。

它们可以与`.equals`方法进行比较

```
 if(u_name.equals("kemal") && pass.equals("sifre")){

            Intent i=new Intent(MainActivity.this,SecondActivity.class);
            startActivity(i);
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T13:17:25.857

尝试这个

```
if(u_name.equals("kemal") && pass.equals("sifre"))
{
    Intent i=new Intent(MainActivity.this,SecondActivity.class);
    startActivity(i);

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T13:23:50.687

是的，我同意这里的其他答案。您不应该不惜一切代价使用 == 来比较字符串。

equals() 是为组合字符串实现的方法。为什么坚持这样做是因为，

> "==" 比较字符串对象的引用值，equals() 方法比较字符串对象的内容
> 
> “==”运算符用于比较两个对象，它检查对象是否引用内存中的同一位置。
> 
> 但是，equals 方法实际上是为了比较 2 个对象的内容，而不是它们在内存中的位置。

所以很明显你必须使用类似的东西，

```
if(u_name.equals("kemal") && pass.equals("sifre")){ //your code here } 
```

# c# - 四舍五入的十进制值

> ID：11740989
> 
> 赞同：8
> 
> 时间：2012-07-31T13:17:12.347
> 
> 标签：c#, floating-point

我在使用 C# 中舍入十进制值时遇到问题`Math.Round(a, 2);`

当我将 1.275 舍入小数点后 2 位时，结果为 1.27。当我对 1.375 做同样的事情时，结果是 1.38。

为什么不将 1.275 舍入到 1.28？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:19:16.830

我无法重现您的问题：

```
Math.Round(1.275m, 2) => 1.28m
Math.Round(1.375m, 2) => 1.38m 
```

我怀疑您声称使用`decimal`值的说法是错误的，`double`而是使用值。`double`不能精确地表示许多十进制值，所以当你写`1.275`的时候，它实际上是 1.27499...`1.375` 是少数可表示的一次之一，所以它实际上是`1.375`.

如果您的代码关心精确的十进制表示，例如当您处理金钱时，您*必须*使用`decimal`而不是二进制浮点，例如`double`or `float`。

* * *

但即使您使用十进制表示，对于许多用户来说，舍入行为也会出乎意料：

```
Math.Round(1.265m, 2) => 1.26m
Math.Round(1.275m, 2) => 1.28m 
```

默认`Math.Round`使用[`MidpointRounding.ToEven`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)，也称为[银行家回合](http://blogs.msdn.com/b/ericlippert/archive/2003/09/26/bankers-rounding.aspx)。这避免了从总是四舍五入的情况下累积偏差`.5`。

您可以使用`Round`采用舍入模式的重载，并将其设置`AwayFromZero`为获得您期望的行为。

```
Math.Round(1.275m, 2, MidpointRounding.AwayFromZero) => 1.28m 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T13:27:46.010

[MSDN](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)对这种行为有这样的说法：

> **来电者须知**
> 
> 由于将十进制值表示为浮点数或对浮点值执行算术运算可能导致精度损失，因此在某些情况下 Round(Double, Int32) 方法可能不会将中点值四舍五入到最接近的偶数数字小数位的值。这在以下示例中进行了说明，其中 2.135 舍入为 2.13 而不是 2.14。发生这种情况是因为该方法在内部将值乘以 10^位，并且这种情况下的乘法运算会损失精度。

```
public class Example
{
   public static void Main()
   {
      double[] values = { 2.125, 2.135, 2.145, 3.125, 3.135, 3.145 };
      foreach (double value in values)
         Console.WriteLine("{0} --> {1}", value, Math.Round(value, 2));

   }
}
// The example displays the following output:
//       2.125 --> 2.12
//       2.135 --> 2.13
//       2.145 --> 2.14
//       3.125 --> 3.12
//       3.135 --> 3.14
//       3.145 --> 3.14 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T13:28:18.307

如果您有一个`Decimal`值，它将正确舍`1.275`入为`1.28`.

如果您有一个`Double`值，它的行为将不一样，因为该值`1.275`无法准确表示。如果您使用该`double`值`1.275`，它实际上会比精确值略小`1.275`，例如`1.2749999999999999`.

在四舍五入该值时，它不会恰好介于`1.27`和之间，`1.28`而是稍微接近`1.27`，因此将向下舍入而不是向上舍入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T13:23:15.843

这是一个可怕的 hack，但请尝试使用 Format。它莫名其妙地使用了我们都习惯的四舍五入。

```
Val(Format(2.25, "0.0")) returns 2.3 
```

（或者）

仅供参考：从 .Net 2.0 版开始，可以使用参数 MidpointRounding 定义“0.5 案例”的舍入方式。它可以是 ToEven 或 AwayFromZero。所以“标准”舍入是这样的：

```
Math.Round(2.25, 1, MidpointRounding.AwayFromZero); 
```

这将返回值“2.3”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:28:46.907

这是因为您的四舍五入是双精度数，而不是小数：

```
Console.WriteLine(Math.Round(1.275M, 2)); // outputs 1.28
Console.WriteLine(Math.Round(1.375M, 2)); // outputs 1.38 
```

十进制和双精度是非常不同的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T13:20:25.207

```
Format(1.275, "0.00")) 
```

正如本博客评论中所建议的那样：[http ://weblogs.asp.net/sfurman/archive/2003/03/07/3537.aspx](http://weblogs.asp.net/sfurman/archive/2003/03/07/3537.aspx)

您使用哪个版本的 .Net 框架？如果在1.1以上，可以使用[midpointrounding](http://msdn.microsoft.com/en-us/library/system.midpointrounding%28v=vs.110%29.aspx)，设置为`AwayFromZero`

```
Math.Round(1.275, 2, MidpointRounding.AwayFromZero); 
```

[http://msdn.microsoft.com/en-us/library/9s0xa85y%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/9s0xa85y%28v=vs.110%29.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T13:55:02.297

根据文档的预期行为。

> 例如，如果小数等于 1，则 2.15 和 2.15000 都会四舍五入为 2.2，因为 0.05 和 .05000 都介于 0.1 和 .2 之间，而 0.1 是奇数。同样，如果小数等于 1，则 2.05 和 2.05000 都舍入为 2.0，因为 .05 和 .05000 都在 .0 和 .1 之间，而 .0 是偶数。此方法的行为遵循 IEEE 标准 754 第 4 节。这种四舍五入有时称为四舍五入或银行家四舍五入。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。要控制 Round(Decimal, Int32) 方法使用的舍入类型，请调用 Decimal.Round(Decimal, Int32, MidpointRounding) 重载。

来自[Math.Round(decimal, int)](http://msdn.microsoft.com/en-us/library/zy06z30k.aspx)。尝试

```
Decimal.Round(a, 2, MidpointRounding.AwayFromZero); 
```

# sql - SQL 过程 - 使用参数作为运算符

> ID：11740991
> 
> 赞同：0
> 
> 时间：2012-07-31T13:17:15.653
> 
> 标签：sql, parameters, equals, operator-keyword, procedural

我有一个程序，我试图根据高于规定参数的度量值来选择结果。但是，我希望大于可以更改为等于或小于。

我尝试将 > 替换为参数，但它给了我错误：sql 语法错误：“PARAM_OP”附近的语法不正确（其中 PARAM_OP 是应替换为操作符的参数的名称。

任何想法都会受到欢迎。

下面的代码：

```
var_out = 
SELECT
    "Col1" AS "Col1",
    "Col2" AS "Col2",
    "Col3" AS "Col3",
    SUM(Col4) AS "Col4"

FROM <schema>.<view>
WHERE "Col2" = PARAM_1
GROUP BY Col1, Col2, Col3
HAVING SUM(Col4) > PARAM_2
ORDER BY SUM(Col4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:00:23.570

我在想象类似的东西。

```
DECLARE @Code VARCHAR(MAX)
SELECT @Code = 
'
var_out = 
SELECT
    "Col1" AS "Col1",
    "Col2" AS "Col2",
    "Col3" AS "Col3",
    SUM(Col4) AS "Col4"
FROM <schema>.<view>
WHERE "Col2" = ' + PARAM_1 + 
'GROUP BY Col1, Col2, Col3
HAVING SUM(Col4) ' + PARAM_OP + ' ' + PARAM_2 
+ 'ORDER BY SUM(Col4);'

EXEC sp_executesql @Code 
```

因此，您构建了一个看起来像您想要执行的 SQL 的字符串，然后使用您的 RDBMS 提供的任何方式运行 SQL 字符串。在 MSSQL 中，这将是 sp_executesql

# c++ - 在安装过程中检索产品版本的功能

> ID：11740997
> 
> 赞同：1
> 
> 时间：2012-07-31T13:17:26.480
> 
> 标签：c++, visual-c++, wix, windows-installer, version

我想在与 .msi 链接的 .dll 的源文件中的 .msi 安装期间检索产品版本。有没有办法用 C++/Visual C++ 做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:55:39.863

这个问题有点难，我的理解是你想做一些验证，看看[http://www.codeproject.com/Articles/31021/Getting-version-from-MSI-without-installing-it](http://www.codeproject.com/Articles/31021/Getting-version-from-MSI-without-installing-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:42:57.083

好吧，你可以先看看 WIX-HowTo，他们提取 dll 版本以生成错误（“你的...... dll 已过时......”）

[http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm](http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm)