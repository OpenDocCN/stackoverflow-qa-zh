# StackOverflow 问答 10104000-10104999

# c# - fancyBox 自动调整 IFrame

> ID：10104000
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:20.530
> 
> 标签：c#, javascript, fancybox

所以我有一个 apsx 页面，顶部有 2 个按钮，下面有一个 IFrame。允许在 IFrame 本身中显示的页面垂直滚动，但我不想要的是 fancyBox 覆盖窗口上的滚动条。如果我改变高度，那很好，但不是在不同的分辨率上。

我必须如何更改默认值以解决此问题：

```
$(document).ready(function () {
        $(".various").fancybox({
            maxWidth: 800,
            maxHeight: 600,
            fitToView: true,
            width: '70%',
            height: '70%',
            autoSize: false,
            closeClick: false,
            openEffect: 'none',
            closeEffect: 'none'
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:23:40.550

我遇到了同样的问题，这是我的解决方案希望所以它对你的工作是一样的

```
$(document).ready(function () {
$("body").css({'overflow':'hidden'});

// on click to show scrollbar
$(button).click(function(){
$("body").css({'overflow':'auto'});
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:23:41.090

您的一般问题是滚动条对吗？

```
scrolling   : 'no' 
```

# ios - 当设备语言发生变化时，后台应用程序会自行退出

> ID：10104001
> 
> 赞同：1
> 
> 时间：2012-04-11T10:17:23.120
> 
> 标签：ios

我观察到，如果我更改设备语言，并且在返回主屏幕后，所有后台进程都会自行退出。如果我再次单击正在运行的应用程序图标，它会从头开始 - 即从`application:didFinishLaunchingWithOptions:`.

我在某个地方错了吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:29:01.980

我认为这并不奇怪，而且是默认行为。

如果您想直接从应用程序内部进行更改，您可能需要查看这篇文章，尽管我不确定这有多好，因为我没有亲自实现它。

[仅在 iPhone 上重新启动后更改语言](https://stackoverflow.com/questions/5912018/language-change-only-after-restart-on-iphone)

如果您需要更多帮助，请告诉我。

希望这对您有所帮助。

# ios - iOS - Sqlite 同时读写

> ID：10104008
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:31.500
> 
> 标签：ios, database

在我的应用程序中，我有两个线程正在运行。一种是查询服务器并更新数据库。其他线程将获取数据并更新 UI。
问题是，当读取和写入同时调用数据库时，其中一个失败了。
错误如下：
**创建SELECT c.id，c.address，c.type，e.id，e.name，e.logo，e.system，c.city FROM cashpoints c，实体e WHERE e时出错。 id = c.entity AND c.id = ?; => '数据库已锁定'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:24:16.787

正如@meccan 的评论中提到的，解决方案是使用 FMDB 或者更好地使用核心数据。

# .net - 访问在局域网中使用本地 Visual Studio 运行的 .Net Web 服务

> ID：10104012
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:43.527
> 
> 标签：.net, visual-studio, web-services

我编写了一个 .Net Web 服务并在我的 PC 上使用 Visual Studio 启动它。[使用http://localhost:28250/MyService.asmx](http://localhost:28250/MyService.asmx)在本地访问它就可以了！但是，我现在也想从同一 LAN 中的另一台 PC 调用它。为此，我禁用了防火墙并在路由器中输入了端口权限。不幸的是，虽然它不起作用......它只表明无法找到该页面:(

请你帮助我好吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:20:09.553

为此，您应该在 IIS 上发布您的网络服务。
[这个链接](http://support.discountasp.net/KB/a792/how-do-i-deploy-visual-studio-2010-web-application.aspx)应该会引导你朝着正确的方向前进。

# erlang - 这是正确的子规格吗？

> ID：10104014
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:50.423
> 
> 标签：erlang

[我注意到牛仔https://github.com/extend/cowboy](https://github.com/extend/cowboy)中有如下代码

```
supervisor:start_child(cowboy_sup, child_spec(Ref, NbAcceptors,
    Transport, TransOpts, Protocol, ProtoOpts)).

child_spec(Ref, NbAcceptors, Transport, TransOpts, Protocol, ProtoOpts) ->  
{{cowboy_listener_sup, Ref}, {cowboy_listener_sup, start_link, [ NbAcceptors, Transport,
TransOpts, Protocol, ProtoOpts ]}, permanent, 5000, supervisor,[cowboy_listener_sup]}. 
```

[http://www.erlang.org/doc/man/supervisor.html#start_child-2](http://www.erlang.org/doc/man/supervisor.html#start_child-2)

我不认为这是正确的儿童规格，你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:57:27.773

[您可以使用supervisor:check_childspecs/1](http://www.erlang.org/doc/man/supervisor.html#check_childspecs-1)函数来验证子规范的正确性。

是的，这看起来像是一个有效的子规范：

```
child_spec() = 
    {Id :: child_id(),
     StartFunc :: mfargs(),
     Restart :: restart(),
     Shutdown :: shutdown(),
     Type :: worker(),
     Modules :: modules()} 
```

在哪里：

```
Id -> {cowboy_listener_sup, Ref}
StartFunc -> {cowboy_listener_sup, start_link, [ ... ]}
Restart -> permanent
Shutdown -> 5000
Type -> supervisor
Modules -> [cowboy_listener_sup] 
```

究竟有什么疑问？

# android - Android：将Header添加到ListView

> ID：10104015
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:51.233
> 
> 标签：android, listview, header

我正在尝试向我添加标题，`listView`但在活动启动时我只看到黑屏

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maincoverflow);

        final ListView itemslist = (ListView)findViewById(R.id.itemslist);        
        LayoutInflater inflater = getLayoutInflater();
        ViewGroup mTop = (ViewGroup)inflater.inflate(R.layout.main_header, itemslist, false);
        itemslist.addHeaderView(mTop, null, false);

        //some actions with header and list items
        //example: coverflow_item_title is located in header(R.layout.main_header)
        title = (TextView)findViewById(R.id.coverflow_item_title); //checked - is not null

        CoverFlow coverFlow =  (CoverFlow) findViewById(R.id.coverflow);
        ImageAdapter coverImageAdapter =  new ImageAdapter(this);
        coverFlow.setAdapter(new ImageAdapter(this));
        coverImageAdapter.createImages();

        coverFlow.setAdapter(coverImageAdapter);  
        coverFlow.setOnItemSelectedListener(new CoverAdapterView.OnItemSelectedListener(){           
           ...
           adapter = new LazyAdapter(MainCoverflowActivity.this, tools, tools_images);
           itemslist.setAdapter(adapter); 
        }

        itemslist.setOnItemClickListener(new AdapterView.OnItemClickListener() {
               ...
        }
} 
```

maincoverflow.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/itemslist"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

main_header.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/coverflow_item_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <com.thumbsupstudio.mobitour.CoverFlow
        android:id="@+id/coverflow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <ImageView
        android:id="@+id/shadowbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/shadow_box" />

</LinearLayout> 
```

您可能会注意到我正在使用`Coverflow`小部件（从这里[http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)） - 它工作正常。

一般来说，我会在更改项目`listView`时更改内容`Coverflow`。它工作正常，但我需要`Coverflow`滚动`listView`，所以我决定将它附加到标题。在那之后，屏幕上没有，一切都是黑色的`listView`。`Coverflow`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:24:59.187

```
try this

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayoutxmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<RelativeLayout
        android:id="@+id/headerLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"/>
<TextView
        android:id="@+id/coverflow_item_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <com.thumbsupstudio.mobitour.CoverFlow
        android:id="@+id/coverflow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <ImageView
        android:id="@+id/shadowbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/shadow_box" />

</RelativeLayout>

    <ListView
        android:id="@+id/itemslist"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:30:22.947

我找到了解决方案。我不完全理解为什么，但是：

**不正确**

```
init listView
inflate header and add it to the list
set list adapter in Coverflow onItemSelected handler (it launch automatically with item position=0) 
```

**正确的**

```
init listView
inflate header and add it to the list
set any adapter to listView (!!!)
set listView adapter in Coverflow onItemSelected handler (it launch automatically with item position=0) 
```

活动启动后具有在 Coverflow处理程序`listView`中设置的适配器内容。`onItemSelected`什么是第一个适配器分配 - 我不明白。

# multithreading - 在 Windows CE 6.0 服务中启动线程

> ID：10104017
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:57.713
> 
> 标签：multithreading, windows-services, visual-studio-2005, windows-ce

我正在 Windows CE 6.0 下开发 Windows 服务。该项目生成一个 DLL，该 DLL 集成在 OS Image 中。当 WinCE 通过注册表设置启动时，该服务就会启动。

问题是我无法启动“Thread1”线程。我应该看到 MessageBox，但屏幕上什么也没有。为什么？将 MessageBox 放入 SFC_Init 工作正常。

另一件事 - 当我在控制台（在 WinCE 系统中）键入“服务列表”时，我的服务状态是未知的......为什么会这样？

请帮忙！

```
// SrvForCom.cpp : Defines the entry point for the DLL application.
//

#include "stdafx.h"

HINSTANCE hInst;

// main entry point of the DLL
BOOL WINAPI DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
                     )
{
    hInst = (HINSTANCE)hModule;

    switch(ul_reason_for_call) {

        case DLL_PROCESS_ATTACH:
            DisableThreadLibraryCalls((HMODULE)hModule);
            break;

        case DLL_PROCESS_DETACH:
            break;

    }

    return TRUE;
}

// function called during initialization process
DWORD SFC_Init(DWORD dwContext) {

    PSRVCONTEXT pSrv;
    HANDLE hThrd;
    DWORD err = ERROR_INVALID_PARAMETER;

    // fill the info structure
    pSrv->servState = SERVICE_STATE_UNKNOWN;
    switch (dwContext) {
        case SERVICE_INIT_STARTED:
            pSrv->servState = SERVICE_STATE_ON;
            break;

        case SERVICE_INIT_STOPPED:
            pSrv->servState = SERVICE_STATE_OFF;
            break;
    }

    // start new thread
    hThrd = CreateThread (NULL, 0, Thread1, NULL, 0, NULL);
    if (hThrd) {
        CloseHandle (hThrd);
        err = 0;
    } else {
        err = GetLastError();
    }

    return hThrd;
}

BOOL SFC_Deinit(DWORD dwData) {
    return TRUE;
}

BOOL SFC_Open(DWORD dwData, DWORD dwAccess, DWORD dwShareMode) {

    PSRVCONTEXT pSrv = (PSRVCONTEXT)dwData;

    return (DWORD)pSrv;
}

BOOL SFC_Close(DWORD dwData)  {
    return 1;
}

BOOL SFC_IOControl(DWORD dwData, DWORD dwCode, PBYTE pBufIn,
              DWORD dwLenIn, PBYTE pBufOut, DWORD dwLenOut,
              PDWORD pdwActualOut) {

    PSRVCONTEXT pSrv = (PSRVCONTEXT)dwData;

    switch (dwCode) {
        case IOCTL_SERVICE_STATUS:
            *pBufOut = pSrv->servState;
            break;
    }

    return 1;
}

DWORD WINAPI Thread1(LPVOID lpv) {

    MessageBox (NULL, TEXT ("The thread has been successfully started!"), TEXT ("Info"), MB_OK);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:58:55.420

我找到了这个问题的答案。上面的代码是正确的，除了一个细节 - 未初始化的结构。“pSrv”是指向带有“servState”字段的结构 SRVCONTEXT 的指针（类型 PSRVCONTEXT）。执行“pSrv->servState = SERVICE_STATE_UNKNOWN;”时 内存的某些部分被覆盖，导致应用程序出错。

解决方案是在使用之前先将内存分配给这个结构：

```
pSrv = (PSRVCONTEXT)LocalAlloc (LPTR, sizeof (SRVCONTEXT)); 
```

将上述行添加到我的应用程序后，一切都开始正常工作。线程正确启动，服务状态变为“正在运行”。

PS 结构如下：

```
typedef struct {
    DWORD servState;
} SRVCONTEXT, *PSRVCONTEXT; 
```

# wordpress - 将 ExpressionEngine 成员导出到 WordPress

> ID：10104019
> 
> 赞同：0
> 
> 时间：2012-04-11T10:18:10.050
> 
> 标签：wordpress, export, expressionengine, member

我需要将 ExpressionEngine 站点中的所有成员导出到 WordPress。我该怎么办？将它们全部移动似乎是一项艰巨的任务，包括所有密码等。关于如何开始的任何想法？如果是这种情况，用户必须在登录新的 WordPress 网站时重置密码，这很好。我只是无法理解这一切......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:43:40.813

这是一个查询，它将为您提供使用`wp_users`表所需的列名和格式的结果。由于密码方案不兼容，因此假设用户必须重置密码是正确的。

```
SELECT
username as user_login,
username as user_nicename,
email as user_email,
url as user_url,
screen_name as display_name,
FROM_UNIXTIME(join_date) AS user_registered
FROM exp_members 
```

在您的 EE 数据库上运行该查询，导出结果（通过 phpMyAdmin 或 what-have-you），然后将其导入您的 Wordpress 数据库。

# cakephp - 保存数据，如何将数据应用到所有记录？

> ID：10104028
> 
> 赞同：0
> 
> 时间：2012-04-11T10:18:46.823
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我将如何保存以下内容；

我希望前 4 项适用于所有“要保存的产品”，因为该数据位于我的表单顶部并且“全局”到要保存的产品我将如何告诉 cakephp 将其保存到每个产品还是我必须创建一个 foreach 循环并手动插入数据？

每个产品的全局数据。

> ```
> [discount_id] => 17
> [range_id] => 21
> [category_id] => 6
> [user_id] => 104 
> ```

```
Array
(
    [Product] => Array
        (
            [discount_id] => 17
            [range_id] => 21
            [category_id] => 6
            [user_id] => 104
            [0] => Array
                (
                    [product_code] => ffff
                    [colour] => red
                    [lead_time_weeks] => 
                    [description] => 
                    [height] => 11111
                    [width] => 22222
                    [depth] => 
                    [price] => 
                    [discount] => 50
                    [discounted_price] => 
                    [quantity] => 
                )

            [1] => Array
                (
                    [product_code] => fgfgfggf
                    [colour] => red
                    [lead_time_weeks] => 
                    [description] => 
                    [height] => 123
                    [width] => 123
                    [depth] => 
                    [price] => 
                    [discount] => 50
                    [discounted_price] => 
                    [quantity] => 
                )

        )

) 
```

在控制器中保存方法

```
$this->Product->saveAll($this->request->data['Product'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:30:39.797

我个人会使用 foreach 循环， saveAll 用于保存关联数据。例如

```
foreach($this->request->data['Product'] as $product){
  // Don't want to add the generic items
  if(is_array($product)){
    $newProduct = $this->Product->create();
    $newProduct['Product'] = $product; // To save added them seperately
    // Then add the generic items into the array
    $newProduct['Product']['discount_id'] = $this->request->data['Product']['discount_id']; 
    etc...
    $this->Product->save($newProduct);
  }
} 
```

# android - Android进度条不旋转

> ID：10104039
> 
> 赞同：1
> 
> 时间：2012-04-11T10:19:45.277
> 
> 标签：android, progress-bar, android-asynctask

我遇到了旋转进度条的问题。我在 AsyncTask 中启动 ProgressDialog，但它不会旋转。

```
private class ProgressTask extends AsyncTask<Boolean, Void, Boolean> {

    @Override
    protected void onPreExecute() {         
        ProgressDialog.show(LoginActivity.this, "", "Loading. Please wait...", true);
    }

    @Override
    protected Boolean doInBackground(Boolean... params) {
        return true;
    }

} 
```

在以下方法中启动 AsyncTask。

```
 public void login(View view) {

    new ProgressTask().execute(true);
    startActivityForResult((new Intent().setClass(view.getContext(), PPAClientActivity.class)), 0);
} 
```

我不知道我做错了什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:32:01.117

试试这个方法

```
 ProgressDialog dialog = new  ProgressDialog(YouractivityName.this);

@Override
protected void onPreExecute() {         
     dialog.setTitle("Title");
    dialog.setMessage("Message");
   dialog.show();

}

@Override
protected void onPostExecute() {   
 if (this.dialog.isShowing()) {
      this.dialog.dismiss();
   }      
 startActivityForResult((new Intent().setClass(view.getContext(),PPAClientActivity.class)),0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:32:02.413

尝试将 Intent 行保留在 AsycTask 的 post execute 方法中......

那你可能就不会遇到问题了...

希望这会有所帮助

# http - 302 重定向是否需要 GET 请求？

> ID：10104042
> 
> 赞同：0
> 
> 时间：2012-04-11T10:20:02.970
> 
> 标签：http

我正在为 Web 服务构建一个 API，我一直在问自己。想象有一个 API 调用来创建一个新项目，就像`/api/project/create.json`它重定向（使用 a `302 Redirect`）到新创建的项目，比如说`/api/project/123.json`。如果第一个请求是通过 POST 发送的，那么在哪里指定，第二个 URI 必须用 GET 检索？

是否有任何 RFC 声明，重定向始终必须跟随 GET？还是仅更改 URL 并将相同的 POST 请求再次发送到新 URL 是有效的客户端行为？

想象一下，我有一个旧的 API 服务器和一个新的 API 服务器，我想将客户端的 POST-Request 重定向到新的 API-URL。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:13:43.143

> 如果第一个请求是通过 POST 发送的，那么在哪里指定，第二个 URI 必须用 GET 检索？

无处。

> 是否有任何 RFC 声明，重定向始终必须跟随 GET？还是仅更改 URL 并将相同的 POST 请求再次发送到新 URL 是有效的客户端行为？

不，实际上 RFC (RFC 2616) 声明更改 301 和 302 上的方法名称是不正确的。

另请参阅[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-19.html#status.3xx](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-19.html#status.3xx)了解更多信息。

> 想象一下，我有一个旧的 API 服务器和一个新的 API 服务器，我想将客户端的 POST-Request 重定向到新的 API-URL。我需要做什么？

我建议使用状态码 307（因为该状态码周围的浏览器错误较少）。

# c# - 在 Vista 上访问 ProgramData 时出现 DirectoryNotFoundException - 找不到路径的一部分 - WinIOError

> ID：10104044
> 
> 赞同：0
> 
> 时间：2012-04-11T10:20:14.153
> 
> 标签：c#, .net-2.0

`DirectoryNotFoundException`有时，我们软件的某些用户会报告由有线异常引起的问题。这只发生在某些运行 Vista 的用户身上。并非所有运行 Vista 的用户都有这个问题。运行 Win7 或 XP 的用户没有关于此问题的报告（但这并不能证明此问题不会在这些系统上发生 - 我们只是没有此类报告）。

我们的软件在 ProgramData 文件夹中存储了一些图形数据。当程序尝试读取这些文件时，会引发以下异常：

```
Message: Could not find a part of the path 'C:\ProgramData\My App Name\Subfolder\Subfolder'.
mscorlib
   in System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   in System.IO.Directory.InternalGetFileDirectoryNames(String path, String userPathOriginal, String searchPattern, Boolean includeFiles, Boolean includeDirs, SearchOption searchOption)
   in System.IO.Directory.GetFiles(String path, String searchPattern, SearchOption searchOption)
   in System.IO.Directory.GetFiles(String path) 
```

路径是*C:\ProgramData\My App Name\Subfolder\Subfolder*。文件夹存在 - 我 100% 确定。它是由 NSIS 安装程序创建的。它对所有用户都是可写的（或者至少应该是我们使用 NSIS 脚本设置它的方式）。用户确认该文件夹存在 - 他可以使用 Windows 资源管理器导航到该位置。

起初我以为是 UAC 的问题，但异常说**Could not find a part of the path**。这让我发疯，因为我们无法在我们的测试系统上重现该问题。不管是什么配置。XP、Vista、Win7 - 在我们的机器上它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:42:55.687

最后我们找到了一个有同样问题并且愿意帮助测试的用户。此错误的根本原因似乎是 NSIS 安装程序创建了一个错误字符的文件夹。没有人注意到这一点，因为该字符看起来与应该创建的字符几乎相同。所以`DirectoryNotFoundException`确实是对的。

NSIS 应该使用**ń** char创建一个文件夹

```
// U+0144   ń   c5 84   LATIN SMALL LETTER N WITH ACUTE 
```

而是用**ñ** char创建了一个文件夹

```
// U+00F1   ñ   c3 b1   LATIN SMALL LETTER N WITH TILDE 
```

有线部分仅在某些机器上发生，我们无法重现。

今天的教训：在调试时永远不要完全相信你的用户。甚至用户提供的屏幕截图也具有误导性，因为它只显示了相关文件夹的内容。

# php - 基于特定 div id css 属性的 php IF 函数

> ID：10104047
> 
> 赞同：0
> 
> 时间：2012-04-11T10:20:20.553
> 
> 标签：php, if-statement

我有一个多页表单，它的工作原理是在不同的 DIV id 下加载 DOM 内的所有页面，当您通过表单时，它只是`style="display:none"`向不应显示的 Div 广告。

我有一个问题，两个页面需要具有相同的内容，但是当我使用 javacript 和 jquery 时，我遇到了冲突（从技术上讲，两个页面都已加载并且脚本发生冲突）。

如果函数说，我可以得到一个 php - IF Div id`gform_page_2_2`有`style="display:none"`负载（html a 块），并且 IF Div id`gform_page_2_3`有`style="display:none"`负载（html b 块），否则什么都不加载。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:33:32.800

我不太确定你到底在问什么，但由于你有办法确定何时应用`style="display:none"`，你可以使用布尔值`display_none=true`并在你的 if 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:51:11.727

这是一个示例代码。在这里，我在这里使用了 jQuery。我已将每个页面的内容包含在索引页面的单独 DIV 中。然后在我的导航栏中单击菜单时显示页面的内容。我希望这会给你一个想法。:)

脚本：

```
 <script type="text/javascript">

            $('.nav_button').click(function (){
                var page = $(this).text().toLowerCase();
                $('#content').html($('#'+page+'_page').html()); //display content of div(that holds the content of the respective page) in the "conetent" div
                $('html, body').animate({scrollTop: $("#navbar").offset().top}, 'slow');  //scroll back to the top

                return false;
            });
        </script> 
```

HTML：

```
 <!-- Navigation menu -->
        <div id="navbar">
            <a class="nav_button" href="#">Home</a>
            <a class="nav_button" href="#">About</a>
            <a class="nav_button" href="#">Contact</a>
        </div>

        <div id="content">
           <!-- Here page content will be displayed -->
        </div>

        <!-- This div holds the contents of each page -->
        <div style="display:none;">
           <!-- Contact Page -->
           <div id="contact_page">
             You can contact me through this email....
           </div>
           <!-- About Page -->
           <div id="about_page">
             About me? I love coding...
           </div>
           <!-- Home Page -->
           <div id="home_page">
             Yo! You are at my home page. Check out my whole site and enjoy :)
           </div>
        </div> 
```

我希望这会有所帮助 :) 如果您想看到它的实际效果，请转到：[www.magcojennus.co.cc](http://www.magcojennus.co.cc)（这是我为大学日创建的网站 :)）

# database - Openerp 删除记录

> ID：10104055
> 
> 赞同：-3
> 
> 时间：2012-04-11T10:20:49.177
> 
> 标签：database, postgresql, openerp

我安装了 openerp 并用虚拟记录对其进行了测试。现在，我需要删除所有这些虚拟记录，以便我可以使用真实记录重新开始。你们知道删除这些记录的方法吗？后面的数据库是postgresql

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T15:20:52.747

撇开冒险的想法不谈，您可以使用 truncate 命令并将其级联到几个核心表上，以免丢失配置和虚拟数据。

```
TRUNCATE sale_order CASCADE;
TRUNCATE purchase_order CASCADE;
TRUNCATE mrp_production CASCADE;
TRUNCATE stock_picking CASCADE;
TRUNCATE stock_tracking CASCADE;
TRUNCATE account_invoice CASCADE;
TRUNCATE account_move CASCADE;
TRUNCATE account_voucher CASCADE;
TRUNCATE wkf_instance CASCADE;
TRUNCATE ir_attachment CASCADE; 
```

这应该使您的帐户表、用户登录、产品、联系人/合作伙伴等保持完整。截断所有工作流实例也非常重要！

注意：这将删除 OpenERP 6.1 上的最低库存再订购点。不确定其他意外副作用可能在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:28:22.197

我认为与尝试清除您创建的虚拟记录相比，启动新数据库并修复其配置的风险较小。

以下是我将如何处理您的情况：

1.  创建一个没有测试数据的新数据库。
2.  完成基本配置向导。
3.  保存一个干净的备份，其中没有任何虚拟记录。
4.  创建一些销售订单、采购订单等，然后查看您忘记更改哪些配置设置。
5.  恢复最新的干净备份。
6.  如果您需要更改某些设置，请执行此操作并返回第 3 步。否则，您就完成了。

如果您想变得真正花哨，您可以创建一个自定义模块，为您进行所有配置更改。这样，如果您真的搞砸了数据库或丢失了备份，您可以重新从头开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:23:22.553

我也认为创建一个新的 dayabase 是您删除虚拟记录并安装新记录的最佳选择。您`uninstall`在以下菜单中安装的模块还有一个选项。

```
administration->modules->modules 
```

选择您想要的模块`uninstall-> hit the uninstall button ->apply sheduled upgrades`。但糟糕的阶段是大多数模块相互依赖，因此它们拒绝`uninstall`.

# jquery - jQuery自动完成多个字段

> ID：10104058
> 
> 赞同：0
> 
> 时间：2012-04-11T10:20:59.983
> 
> 标签：jquery, jquery-autocomplete

我在多个字段上遇到 jQuery 自动完成问题。标准行为是填写一个字段并出现一个自动完成。用户选择一个并自动完成在不同的字段上添加正确的值并且用户验证他的表单。**这就像一个魅力。**

但是我发现一些用户在自动完成字段上使用复制/粘贴并且接下来是有效的，所以他们提交了一个包含无效数据的表单。字段可以为空，因此我无法测试必填字段。

所以我的问题是：如何进行自动完成，在复制/粘贴时填充所有字段？（如果需要，我有示例代码，但自动完成功能包含在 jqGrid 中，仅针对此问题很难阅读）。另一种方法是如何知道是否所有字段都已成功填写（ajax 响应效果很好，但 c/p 用户不使用它）。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:54:31.033

您应该通过使用类似的东西来触发相同的粘贴行为

```
$('#autocomplete_field').bind('paste', trigger_action); 
```

# php - PHP - 生成没有父部分的标题和描述（技术 SEO）

> ID：10104060
> 
> 赞同：1
> 
> 时间：2012-04-11T10:21:05.357
> 
> 标签：php, seo, title

有人可以帮我解决这个技术 SEO 问题。在我们的网站上，我们有产品页面，其标题、描述（和关键字）标签是由进一步给定的 PHP 代码（函数）生成的。现在的问题是我们不希望父类别标题和描述出现（添加）在产品页面的相同元素（标题、描述）中。目前，父项以这种方式出现在每个产品页面标题和描述的开头：

*产品页面标题标签：* **父类标题标签**-当前产品名称

*产品描述标签：* **父描述标签**-“about_short”当前产品

我相信生成它的 PHP 函数是：

```
function get_seo() {
global $ln, $get_seo, $SEO, $f, $site_post;
function get_field($text, $field) {
    global $t_texts, $ln, $idp;
    $temp_idp=$idp;
    if (is_numeric($text)) {
        $r=$t_texts->select("id='$text' AND state<>'seo'");
        $f=mysql_fetch_array($r);
        //print_r($f);
        if (is_numeric($f[$field]))$text=$f[$field];
        else $text=ln($f[$field]);
        // parent add ///////////
        $add="";
        if($f["idp"]!=0) $add=ln($f["name"]);
        if ($add) {
            if(ln($f[$field]))
                $add="";
            $text .= $add;
        }
        $temp_idp=$f["idp"];
    }
    $text=trim(strip_tags(str_replace("&nbsp;", "", $text)));
    if ($field!="title") $text=str_replace("\"", "", $text);
    //if $text is not empty return $text;
    if (strlen($text)>2) return $text;
        else { return ($temp_idp) ? get_field($temp_idp, $field): false; }
}

$arr = explode(" ", "title description keywords");
for ($i=0; $i<count($arr); $i++) {
    $mas = $arr[$i];
    if (ln($f[$mas]))
         $SEO[$mas] = ln($f[$mas]);
    else {
        if ($temp=get_field($get_seo[$mas], $mas)) $temp=", $temp";
        $SEO[$mas] = ln($f["name"]).$temp;
    }
}
if (!$t_texts) $t_texts = new mysql("texts$site_post");
if (($f["module_id"]==855)&&(intval($_GET['id'])>0)) {
    $r = $t_texts->query("SELECT * FROM `projects` where id='".(int)$_GET['id']."' limit 1");
    $f2 = mysql_fetch_array($r);
    $SEO['title']  .= (ln($f2['name']))?' - '.htmlspecialchars(ln($f2['name'])):'';
    $SEO['description']  .= (ln($f2['about_short']))?' - '.htmlspecialchars(ln($f2['about_short'])):'';
} 
```

}

我需要的是：

*产品页面标题标签：*当前产品名称

*产品页面描述：* “about_short”当前产品

并且类别标题和描述保持不变，但只出现在这些类别页面中（而不是在产品中）。

我已经尽量说清楚了，但是如果您对编码或相关内容有任何进一步的问题，我很乐意提供。

谢谢你们的帮助！

# java - Eclipse Java 语法着色并不完全适用于 SVN 的签出代码

> ID：10104065
> 
> 赞同：2
> 
> 时间：2012-04-11T10:21:41.153
> 
> 标签：java, eclipse, syntax, colors

我正在使用 Eclipse EE Indigo。我对 Java 编辑器的语法着色进行了更改。这些更改通过 eclipse 完美地应用于新创建的项目，但是当我从 SVN 签出项目时，似乎部分应用了语法着色。

例如，我将类语法着色设置为青色。在一个新创建的项目中 - 工作得很好。当我在 SVN 中查看另一个项目时，类语法着色保持黑色。

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:27:11.357

似乎该语法并未应用于新签出的项目。
尝试以下方法之一：

*   从新签出的项目的根目录中右键单击-> 刷新

如果仍然没有帮助：

1.  重新启动*日食*
2.  再次检查应用的语法设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:02:39.293

我发现了问题。似乎当我从 SVN 签出项目时，它没有将其作为 Eclipse Java 项目导入工作区，因此没有定义类路径。现在我更正了它并按原样导入了项目，我让所有语法颜色都按原样工作。

# java - 是否可以在 Ehcache 中创建多键生成器

> ID：10104068
> 
> 赞同：2
> 
> 时间：2012-04-11T10:21:50.457
> 
> 标签：java, spring, caching, ehcache

我在我的 Spring Web 应用程序中使用 ehcache 来缓存数据库中的对象（在 DAO 中）。喜欢：

```
@Cacheable(cacheName="mycache", keyGeneratorName = "MyKeyGenerator")
public List<Entity> getEntityByChannel(String channel);

@TriggersRemove(cacheName="mycache", keyGeneratorName = "MyKeyGenerator")
public void persiste(Entity entity); 
```

MyKeyGenerator 类返回了缓存的键，但是可以返回很多键吗？

例如 - 为一个值返回双键 key1 和 key2。并通过 key1 或 key2 删除缓存。

PS：有人帮帮我吗？

# hadoop - 如何在 Hadoop 中的特定 IP 地址生成地图任务？

> ID：10104071
> 
> 赞同：0
> 
> 时间：2012-04-11T10:22:01.190
> 
> 标签：hadoop, mapreduce

是否可以在 Hadoop 中的特定 IP 地址（或具有特定机架 ID 的机架中的某个节点）生成地图任务（或内部带有地图任务的 TaskTracker）？如果是的话，那么在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:26:52.910

不支持“开箱即用”，因为其中一个想法是提供分布式处理和故障转移 - 强制任务在特定节点上运行会否定这些目标。

话虽如此，您可能有一些方法可以实现这一点（我当然看到人们尝试在他们拥有异构集群设置的地方进行尝试）

*   您可以在您的映射器/减速器设置中执行检查，如果任务在您不想要的节点上执行，则抛出异常。在作业失败之前，您需要设置最大失败任务数的配置属性。不是一个很好的解决方案，但我再次看到它有效
*   您可能能够实现自己的调度程序（而不是容量或公平调度程序），但我不确定您将拥有多少控制权

# c# - 在此示例中，Microsoft 是否有权在每个测试中执行多个断言？

> ID：10104073
> 
> 赞同：1
> 
> 时间：2012-04-11T10:22:02.293
> 
> 标签：c#, unit-testing

最近我一直在努力改进我的单元测试，而真正让我困惑的 UT 的“规则”之一是“每个测试一个断言”。

我很想知道人们是否认为 MS 在断言这个测试方面做了正确的事情（忽略缺少模拟等）。根据我目前的理解，这个示例实际上应该为每个需要测试的对象属性执行一个创建调用（而不是一个调用和多个断言）。我做出这个假设是否正确？

方法取自：http: [//msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3testing_topic4](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3testing_topic4)

```
[TestMethod()]
    [DeploymentItem("MvcMusicStore.mdf")]
    [DeploymentItem("MvcMusicStore_log.ldf")]
    public void CreateTest()
    {
            using (TransactionScope ts = new TransactionScope())
            {
                StoreManagerController target = new StoreManagerController();
                Album album = new Album()
                {
                    GenreId = 1,
                    ArtistId = 1,
                    Title = "New Album",
                    Price = 10,
                    AlbumArtUrl = "/Content/Images/placeholder.gif"
                };
                ActionResult actual;
                actual = target.Create(album);
                Assert.IsTrue(album.AlbumId != 0);
                MusicStoreEntities storeDB = new MusicStoreEntities();
                var newAlbum = storeDB.Albums.SingleOrDefault(a => a.AlbumId == album.AlbumId);
                Assert.AreEqual(album.GenreId, newAlbum.GenreId);
                Assert.AreEqual(album.ArtistId, newAlbum.ArtistId);
                Assert.AreEqual(album.Title, newAlbum.Title);
                Assert.AreEqual(album.Price, newAlbum.Price);
                Assert.AreEqual(album.AlbumArtUrl, newAlbum.AlbumArtUrl);
            }
    } 
```

按版本将类似于（为专辑对象上的每个属性复制）

```
 [TestMethod()]
    public void CreateTest_AlbumUrl()
    {
        // ** Arrange
        var storeDB = new Mock<MusicStoreEntities>()

        // Some code to setup the mocked store would go here

        StoreManagerController target = new StoreManagerController(storeDB);
        Album album = new Album()
           {
             GenreId = 1,
             ArtistId = 1,
             Title = "New Album",
             Price = 10,
             AlbumArtUrl = "/Content/Images/placeholder.gif"
            };

        // ** Act
        actual = target.Create(album);                      
        var newAlbum = storeDB.Albums.SingleOrDefault(a => a.AlbumId == album.AlbumId);

        // ** Assert
        Assert.AreEqual(album.AlbumArtUrl, newAlbum.AlbumArtUrl);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T10:28:11.637

这条规则经常被误解。这不是关于单个断言（如代码/`Assert`调用行），而是关于验证单个概念。在这种情况下，Microsoft 验证专辑添加正确 - 专辑在这里是单一概念。

[Roy Osherove 用非常简单的话说](https://softwareengineering.stackexchange.com/questions/7823/is-it-ok-to-have-multiple-asserts-in-a-single-unit-test)：

> 我的指导方针通常是每次测试都测试一个逻辑概念。你可以在同一个对象上有多个断言。它们通常是被测试的相同概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:24:19.003

这不应该是一个硬性规则，至多是一个经验法则。恕我直言，在许多情况下，将多个断言放入单个测试中更简单、更容易。

应该在每个测试中测试一个故事/案例，但这很可能需要多个断言来验证。恕我直言，创建多个几乎相同的测试只是为了满足“规则”是矫枉过正的。但这只是我个人的看法。我更喜欢务实而不是遵守书本规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:26:20.597

您不应该从字面上理解该规则，您应该每次测试只断言一种行为，但您可能需要多次`Assert`调用才能断言一种行为。

在这种情况下，被测行为似乎是使用提供的信息创建相册。

# android - 未捕获的处理程序：由于未捕获的异常而退出主线程（基本上是 NULL 指针异常）

> ID：10104078
> 
> 赞同：1
> 
> 时间：2012-04-11T10:22:23.633
> 
> 标签：android

我基本上是在尝试使用闹钟代码并对其进行一些更改。我从网上得到了 2.0 的代码，我的模拟器是 2.1，

现在，编译错误都解决了，但是当我在模拟器中运行应用程序时，它会在模拟器中抛出错误“应用程序已意外停止。请再试一次”

在 Logcat 中我得到以下错误：

```
Uncaught handler: thread main exiting due to uncaught exception              
java.lang.NullPointerException                                               
at android.text.format.DateFormat.is24HourFormat(DateFormat.java:204)      
at com.alarmclock.rafia.Alarms.get24HourMode(Alarms.java:518)              
at com.alarmclock.rafia.DigitalClock.setDateFormat(DigitalClock.java:208)  
at com.alarmclock.rafia.DigitalClock.onFinishInflate(DigitalClock.java:121) 
```

我的代码的确切文件在这里：在这一行中 return android.text.format.DateFormat.is24HourFormat(context); [http://www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/Alarms.java](http://www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/Alarms.java)

在这个函数中： setDateFormat(); 在这个文件中：http: [//www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/DigitalClock.java](http://www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/DigitalClock.java)

请帮助我卡住了:(

# javascript - 获取js中高代码点字符的长数字代码？

> ID：10104081
> 
> 赞同：1
> 
> 时间：2012-04-11T10:22:30.740
> 
> 标签：javascript, unicode, utf-8, character-encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:46:26.633

The String.fromCharCode() argument is masked to an 16-bit unsigned integer, and this is in accordance with the ECMAScript standard. Thus, when executing String.fromCharCode(123456454545789), the argument is first reduced to 20861\. This happens for any argument of the form 20861 + n*65536, so getting the original large number back is impossible (or, to put it formally, you can get an infinite number of such numbers).

This has nothing to do with surrogate code points. The string '兽' consists of one BMP character only. If you have non-BMP character (code number > 0xFFFF), say '' (U+20000), *then* surrogates are relevant, and for such a string (consisting of a single Unicode character internally represented in JavaScript as two surrogate code points), fromCharCode(0) and fromCharCode(1) are defined and yield the surrogate code point values, such as 55360 and 56320\. (Modern implementations can usually deal with a literal containing a non-BMP character, like '', though this is not required in the standard.)

# c - Unix 套接字，SOCK_SEQPACKET 与 SOCK_DGRAM

> ID：10104082
> 
> 赞同：60
> 
> 时间：2012-04-11T10:22:42.370
> 
> 标签：c, unix

似乎至少有 3 种不同的本地/unix 套接字类型 ( `AF_UNIX`) `SOCK_STREAM`、`SOCK_DGRAM`和`SOCK_SEQPACKET`.

虽然我知道 a`SOCK_STREAM`给你一个双向字节流，比如 TCP 或双向管道，而另外两个给你一个 messge/packet API，但 unix 套接字`SOCK_DGRAM`和有什么区别`SOCK_SEQPACKET`？

由于这些只是本地的，我想不出有人会`SOCK_DGRAM`以一种可以重新排序数据包的方式实施的充分理由。

此外，是否`SOCK_DGRAM`/`SOCK_SEQPACKET`采用流量控制，或者在阅读速度慢的情况下是否可以丢弃消息？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-11T13:10:18.593

这是一篇关于 的预期用例的好文章`SOCK_SEQPACKET`，事实上它在 IP 协议系列中并不真正可用，以及如何使用现有的 TCP 语义获得相同的东西：

[http://urchin.earth.li/~twic/Sequenced_Packets_Over_Ordinary_TCP.html](http://urchin.earth.li/~twic/Sequenced_Packets_Over_Ordinary_TCP.html)

请注意，`SOCK_SEQPACKET`它的行为`SOCK_STREAM`比更接近`SOCK_DGRAM`。

引用参考网站：

> SOCK_SEQPACKET 套接字类型类似于 SOCK_STREAM 类型，也是面向连接的。这些类型之间的唯一区别是使用 SOCK_SEQPACKET 类型维护记录边界。可以使用一个或多个输出操作发送记录并使用一个或多个输入操作接收记录，但单个操作永远不会传输多个记录的部分。通过 recvmsg() 函数返回的接收消息标志中的 MSG_EOR 标志，接收方可以看到记录边界。是否规定最大记录大小是特定于协议的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T15:27:41.170

SOCK_SEQPACKET 为您提供 SOCK_STREAM 的保证（即，保留顺序、保证交付、无重复），但与 SOCK_DGRAM 一样具有划定的数据包边界。所以，基本上它是两种协议类型的混合。

在 TCP/IP 系列中，[SCTP](http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)实现了 SOCK_STREAM（类 TCP）和 SOCK_SEQPACKET。不幸的是，它在 Windows 上没有库存。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-09-08T20:19:36.707

我认为这里的主要区别是`SOCK_SEQPACKET`面向*连接*，而`SOCK_DGRAM`不是。

当有*多个*客户端进程与之通信时，这在连接的*服务器端（侦听 UNIX 套接字的进程）上很重要：*

 *使用`SOCK_DGRAM`，您将直接在侦听套接字上获得交错的客户端数据报。使用`SOCK_SEQPACKET`，您将使用 为每个客户端生成一个单独的*客户端*套接字`accept`，从而分别从每个客户端接收数据报。

报价`man 3 accept`：

> accept() 系统调用与基于连接的套接字类型（SOCK_STREAM、SOCK_SEQPACKET）一起使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-11T13:03:25.997

socket(2) linux-provided manpage: “DGRAM: datagrams (connectionless, unreliable messages), SEQPACKET: sequenced,可靠, [two-way] connection-based data transmission path for datagrams”。显着区别。

unix(7) linux 提供的联机帮助页说：“SOCK_DGRAM，用于保留消息边界**的面向数据报的**套接字 [但不一定是顺序] [...] SOCK_SEQPACKET，用于保留消息边界并在中传递消息**的面向连接的**套接字他们被发送的顺序。”</p>

该标准*允许*您使用 SOCK_DGRAM 获得重新排序的数据包。（换句话说，如果操作系统按顺序将它们交给您，那是特定于实现的功能。或者只是纯粹的计时运气。）

Linux 中的 af_file/af_unix 实现中有流控制，但这根本不需要与标准指定行为相关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-15T02:02:10.597

与 TCP 和 UDP 套接字一样，有两种形式的 SCTP（流控制传输协议）套接字，端点之间的（一对一）和（一对多）。一对一使用 SOCK_STREAM，一对多使用 SOCK_SEQPACKET*

# ios - WebKitErrorDomain 在我的 ios 应用程序中集成 facebook ios sdk 时。使用 Dialog Feed 在墙上发帖

> ID：10104086
> 
> 赞同：0
> 
> 时间：2012-04-11T10:22:56.067
> 
> 标签：ios, facebook, integration

我正在使用来自 github 的 facebook ios sdk，用于将 facebook 集成到我的 iPhone 应用程序中。我正在尝试在墙上分享一些东西。当我单击共享时，它会转到 facebook，进行单点登录，然后返回到我的应用程序。进入我的应用程序后，它应该显示一个带有共享选项的 web 视图，该选项已经存在于 FBDialog.m 文件中。但是，它没有显示这一点，而是使用 webview didfail 自动关闭，错误为“WebKitErrorDomain”，错误代码 = 102。

他们已经通过赶上它并关闭 webview 来处理它，但是如何解决它呢？解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:23:31.370

我终于发现了这个 webkiterrordomain 是什么时候发生的。如果您发送到 Facebook 对话框提要的参数不正确，它会阻止您加载称为 WebkitErrorDomain 的 UIWebView 引发错误。检查你的参数，你会解决它。

# asp.net - MSBuild ExtensionPack Iis6VirtualDirectory 创建多个 ScriptMaps

> ID：10104087
> 
> 赞同：0
> 
> 时间：2012-04-11T10:22:59.487
> 
> 标签：asp.net, msbuild, iis-6, msbuildextensionpack

我正在使用该`MSBuild.ExtensionPack.Web.Iis6VirtualDirectory`任务创建一个*IIsWebDirectory*应用程序作为默认网站的子项。我正在尝试使用多个 ScriptMaps（所有这些都是 ASP.NET 2 网站所需的）创建应用程序。但是我似乎无法获得正确创建 ScriptMaps 的任务。这是我的代码：

```
<MSBuild.ExtensionPack.Web.Iis6VirtualDirectory 
    TaskAction="Create"
    MachineName="$(TargetHostServer)"
    Website="Default Web Site"
    Name="$(IISApplicationName)"
    DirectoryType="IIsWebDirectory"
    Properties="ScriptMaps=.ad,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.adprototype,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.asa,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE
.asax,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.ascx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.ashx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.asmx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.asp,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE
.aspx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.axd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.browser,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.cd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.cdx,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE
.cer,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE
.compiled,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.config,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.cs,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.csproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.dd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.exclude,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.idc,C:\WINDOWS\system32\inetsrv\httpodbc.dll,5,GET,POST
.java,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.jsl,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.ldb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.ldd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.lddprototype,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.ldf,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.licx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.master,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.mdb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.mdf,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.msgx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.refresh,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.rem,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.resources,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.resx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.sd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.sdm,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.sdmDocument,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.shtm,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST
.shtml,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST
.sitemap,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.skin,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.soap,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.stm,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST
.vb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.vbproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.vjsproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG
.vsdisco,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG
.webinfo,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG" /> 
```

这只是创建了一个脚本映射条目，其中所有条目的规范都在一行上。我尝试使用 \n 和 XML 字符实体指定换行符，但无法正确创建条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:00:43.917

答案是使用竖线 ( `|`) 字符来分隔脚本映射：

```
<MSBuild.ExtensionPack.Web.Iis6VirtualDirectory 
    TaskAction="Create"
    MachineName="$(TargetHostServer)"
    Website="Default Web Site"
    Name="$(IISApplicationName)"
    DirectoryType="IIsWebDirectory"
    Properties="ScriptMaps=.ad,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.adprototype,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.asa,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE|.asax,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.ascx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.ashx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.asmx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.asp,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE|.aspx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.axd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.browser,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.cd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.cdx,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE|.cer,C:\WINDOWS\system32\inetsrv\asp.dll,5,GET,HEAD,POST,TRACE|.compiled,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.config,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.cs,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.csproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.dd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.exclude,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.idc,C:\WINDOWS\system32\inetsrv\httpodbc.dll,5,GET,POST|.java,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.jsl,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.ldb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.ldd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.lddprototype,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.ldf,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.licx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.master,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.mdb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.mdf,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.msgx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.refresh,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.rem,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.resources,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.resx,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.sd,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.sdm,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.sdmDocument,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.shtm,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST|.shtml,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST|.sitemap,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.skin,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.soap,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.stm,C:\WINDOWS\system32\inetsrv\ssinc.dll,5,GET,POST|.vb,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.vbproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.vjsproj,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG|.vsdisco,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,1,GET,HEAD,POST,DEBUG|.webinfo,C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll,5,GET,HEAD,POST,DEBUG" /> 
```

# php - 如何在 Zend Framework 中使用准备好的语句

> ID：10104093
> 
> 赞同：4
> 
> 时间：2012-04-11T10:23:34.030
> 
> 标签：php, mysql, zend-framework, prepared-statement

Mysql以这种方式支持prepared statements：

[http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

Zend Framework 中是否支持它（我找不到它），以及如何使用它。如果没有，您将如何将准备好的语句实现为 Zend Framework 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-04T12:48:15.003

```
$sql = "SELECT * FROM table_name WHERE id = :id ";

$stmt  = Zend_Registry::get("db")->prepare($sql);

$data=array(array('id'=> $id);

$stmt->execute($data);

print_r($stmt->fetchAll()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:40:08.490

你可以这样尝试

```
$sql = "SELECT * FROM table_name WHERE id = :id'";
$stmt = new Zend_Db_Statement_Pdo($this->_db, $sql); 
$stmt->execute(array(':id' => $id)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:08:54.280

经过一番研究，我没有发现 ZF 以同样的方式支持准备好的语句。您唯一能做的就是模仿@Nikita Gopkalo 发布的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T00:42:03.740

您应该查看 zend 文档。

[https://github.com/zendframework/zend-db/blob/master/doc/book/result-set.md](https://github.com/zendframework/zend-db/blob/master/doc/book/result-set.md)

所以这是一个示例代码。

```
<?php

use Zend\Db\Adapter\Driver\ResultInterface;
use Zend\Db\ResultSet\ResultSet;

$statement = $driver->createStatement('SELECT * FROM users');
$statement->prepare();
$result = $statement->execute($parameters);

if ($result instanceof ResultInterface && $result->isQueryResult()) {
  $resultSet = new ResultSet;
  $resultSet->initialize($result);

  foreach ($resultSet as $row) {
    echo $row->my_column . PHP_EOL;
  }
}

?> 
```

# php - 将文件服务器复制到服务器的简单过程栏

> ID：10104095
> 
> 赞同：0
> 
> 时间：2012-04-11T10:23:39.560
> 
> 标签：php, file

我想制作一个进程栏，显示服务器到服务器文件传输的上传百分比和数据大小。我想在这个函数中使用它：

```
<?php
function download_pretending($url,$user_agent) {
   $ch = curl_init();
   curl_setopt($ch, CURLOPT_URL, $url);
   curl_setopt ($ch, CURLOPT_HEADER, 0);   
   curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
   curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
   set_time_limit(3000); # 5 minutes for PHP
   curl_setopt($ch, CURLOPT_TIMEOUT, 3000); # and also for CURL   
   $result =base64_encode(curl_exec ($ch));
   curl_close ($ch);
   if(!$handle = fopen(basename($url), 'w+'))
   {
       echo "Cannot open file ".basename($url);
         exit;
   }
    if (fwrite($handle, $result) === FALSE) {
        echo "Cannot write to file ".basename($url);
        exit;
    }
     echo "Compleated ".basename($url);

   fclose($handle);
}
?> 
```

请帮助我并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:35:09.540

听起来你需要 CURLOPT_PROGRESSFUNCTION。这里有一些关于它的信息：[PHP curl_setopt() CURLOPT_PROGRESSFUNCTION](https://stackoverflow.com/questions/7214636/php-curl-setopt-curlopt-progressfunction)和这里：[http ://curl.haxx.se/libcurl/c/curlgtk.html](http://curl.haxx.se/libcurl/c/curlgtk.html)

# c# - 你如何覆盖 .NET 的字典 数组查找'[]'？

> ID：10104099
> 
> 赞同：0
> 
> 时间：2012-04-11T10:23:45.307
> 
> 标签：c#, caching, dictionary

我正在创建一个使用 .NET 字典 ( `class Cache<K, V> : Dictionary<K, V>`) 的缓存类，它在任何时候都只在字典中保存许多类。添加新项目时，如果缓存太大，旧项目将被删除。

我已经完成了添加、删除和清除，但希望缓存更新一个项目，这样如果有人使用字典的数组查找`[]`来更改关键指向的类，缓存就知道它不再那么旧了。

事件可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:26:41.967

不要从`Dictionary<TKey, TValue>`. 相反，`IDictionary<TKey, TValue>`在您的类中实现，并引用`Dictionary<TKey, TValue>`用于支持缓存的 a 。换句话说，使用组合而不是继承。

# javascript - 使用 Javascript 隐藏和显示 divID - 打开新标题时隐藏

> ID：10104100
> 
> 赞同：1
> 
> 时间：2012-04-11T10:23:54.727
> 
> 标签：javascript, html

目前我可以点击一个标题，然后显示与标题相关的信息。如果选择了另一个标题，则它会在先前打开的标题下方或上方打开，如果再次单击该标题，则它们将被隐藏。
我想做的是，如果一个标题已经打开，点击另一个标题时，它会隐藏前一个标题并显示最近点击的标题。

我目前正在使用的 javascript 如下

```
<script type="text/javascript">
 function unhide(divID) {
    var item = document.getElementById(divID);
    if (item) {
        item.className=(item.className=='hidden')?'unhidden':'hidden';
    }
 }

 function hide(divID) {
    var item = document.getElementById(divID);
    if (item == 'element_name') {
        item.className=(item.className=='hidden');
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:31:47.920

### 建议 #1

给所有的标题元素一个通用的类名，例如`title`，然后使用`document.getElementsByClassName('title')`来查找所有的标题元素，如果单击的标题元素被隐藏，则在“取消隐藏”单击的标题之前将它们全部隐藏。

话虽如此，您需要修改您编写的两个函数以在一个元素中容纳多个类。您可以通过 轻松设置多个类名`element.className = 'unhidden title'`，但您的代码将相当不灵活。当您尝试通过该`String#split`方法修改类名列表时，您的代码将很快变得笨拙，遍历类以查找和删除*隐藏*或未*隐藏*的类。

### 建议#2

Do not to use an *unhidden* class. Presumably, your *unhidden* class is defined as follows:

```
.unhidden {
  display: block;
} 
```

This class becomes much less useful if you have inline elements as well that you want to unhide because you'll need another class:

```
.unhidden-inline {
  display: inline;
} 
```

If you simply define:

```
.hidden {
  display: block;
} 
```

and add or remove the hidden class to hide or show the element, then you can avoid this issue altogether. You'll still have the issue of dealing with multiple class names in an element, however.

### Suggestion #3 (ideal)

Use [jQuery](http://jquery.com) or [Zepto.js](http://zeptojs.com) to handle DOM traversal and manipulation, it will make your life much easier. You'll no longer need to manipulate classes at all in this case, you can simply hide and show the elements directly with convenience methods. Include jQuery:

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

Assuming the following markup:

```
<ul>
  <li class="title">
    Title 1
    <div class="description">Best. Title. Ever.</div>
  </li>
  <li class="title">
    Title 2
    <div class="description">Second best title</div>
  </li>
  <li class="title">
    Title 3
    <div class="description">Worst. Title. Ever.</div>
  </li>
</ul> 
```

and the following css:

```
<style type="text/css">
  .description {
    display: none;
  }
</style> 
```

you can do the following to accomplish your goal in a flexible manner:

```
<script type="text/javascript">
  $('.title').click(function(event){
    currentDescriptionElement = $('.description', this); // this refers to the clicked DOM element in this context
    isHidden = currentDescriptionElement.is(':hidden');

    $('.title .description:visible').hide(); // hide all visible description elements

    if (isHidden)
      currentDescriptionElement.show();
  })
</script> 
```

I hope this helps, good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:30:36.713

为什么不考虑使用[jquery](http://jquery.com)选项卡

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

我希望这是你期望做的。

您可以在描述中看到可用的主题选项。如果你想改变它的基础 css，你可以考虑看看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:31:57.777

You can try this:

```
<script type="text/javascript">
function unhide(divID) {
    var item = document.getElementById(divID);
    if (item) {
       document.getElementById(divID).style.display = 'block';
   }
} 
function hide(divID) {
   var item = document.getElementById(divID);
   if (item) {
      document.getElementById(divID).style.display = 'none';
  }
}   
</script> 
```

You have to pass divid as per your call.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:53:24.713

You got to configure another function say hideall() which needs to be called before you call unhide() where you close all that are open first and then unhide only whats clicked. You do not need hide(), just hideall()

# jquery-ui - jsTree 未填充在 IE、Google chrome 等浏览器中

> ID：10104102
> 
> 赞同：2
> 
> 时间：2012-04-11T10:24:09.657
> 
> 标签：jquery-ui, jquery, jstree

我正在尝试将 xmlData 绑定到 jsTree 中，但数据没有被填充到 jsTree 中（除了 Mozila firefox）。

**jsTree 在 Mozila firefox 中填充了示例数据，但在其他浏览器中没有**

我在以下代码中遗漏了什么？

jsTreeDemo.html 文件：

```
 <html>
<head>
    <title>Use jsTree</title>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.jstree.js"></script>
    <script type="text/javascript">

    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "Employees_xml_flat.xml",
            dataType: "text",
            success: function(xmlData) {
                $("#treeViewDiv").jstree({
                    "xml_data" : {
                        "data" : xmlData
                    },
                    "plugins" : [ "themes", "xml_data" ]
                });
            }
        });
    });

</script>
</head>
<body> 
```

示例 xml 文件如下：

> ```
> <root>  
>     <item id="4" parent_id="0" state="open">  
>         <content><name><![CDATA[Charles Madigen]]></name></content>  
>     </item>  
>     <item id="192" parent_id="4">    
>   <content><name><![CDATA[Ralph Brogan]]></name></content>               
>     </item>  
>     <item id="295" parent_id="192">    
>         <content><name><![CDATA[Bhushan Sambhus]]></name></content>  
> 
>     </item>  
>     <item id="294" parent_id="192">    
>         <content><name><![CDATA[Betsy Rosenbaum]]></name></content>  
>     </item>  </root> 
> ```

**Mozila firefox 11.0 版**：jsTree 填充良好

**Internet Explorer IE8 版本**：

![在此处输入图像描述](../Images/cee9c191a4e3b24fe7a0aa9a04545269.png)

**Google Chrome 版本 18.0.1025.162 m **：什么都没有显示 :: 控制台出现错误 **XMLHttpRequest 无法加载 file:///C:/Users/VaibhaV/JsTreeDemo/files/Employees_xml_flat.xml。Access-Control-Allow-Origin 不允许 Origin null。**

浏览器兼容性问题？代码问题？xml格式问题？

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T20:12:02.813

让我假设 url`Employees_xml_flat.xml`是正确的。那么变量*xmlData*应该是一个包含 xml 示例文件数据的字符串。

还让我假设您将 jstree 包附带的“主题”文件夹与您的`jquery.jstree.js`文件放在同一个文件夹中。

我注意到的第一件事是您的示例 xml 文件在示例 xml 文件的末尾不包含`</root>`元素！如果您的示例 xml 文件不包含此元素，您的 jstree 将继续显示“正在加载...”。

此外，我没有使用 ajax 获取示例 xml 文件，而是手动将其放入字符串中（`</root>`文件末尾的 +）。我的结果表明，您的示例 xml 文件应该具有正确的文件格式，并且代码应该可以在 Firefox、Chrome 和 Internet Explorer 中运行。这是我的测试html文件：

```
<html>
<head>
    <title>Use jsTree</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery.jstree.js"></script>
    <script type="text/javascript">

    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "Employees_xml_flat.xml",
            dataType: "text",
            success: function(xmlData) {
                $("#treeViewDiv").jstree({
                    "xml_data" : {
                        "data" : xmlData
                    },
                    "plugins" : [ "themes", "xml_data" ]
                });
            }
        });
    });

</script>
</head>
<body>
    <div id="treeViewDiv"></div>
</body>
</html> 
```

* * *

## 更新

根据你的评论，我又看了一遍。查看 jstree 文档，数据将作为 XML 字符串添加：

> 数据
> 
> XML 字符串（如果不使用，则为 false）。默认为假。
> 
> 指定要加载到容器中并转换为树的内容。

目前，由于您在 ajax 调用中选择了 dataType 为“xml”，因此返回对象是 XMLObject 而不是字符串。要让 ajax 调用返回纯文本字符串，请将 dataType 设置为“text”。我已经更新了上面的代码，它应该可以工作:)

线

```
var xmlstr = xmlData.xml ? xmlData.xml : ( new XMLSerializer()).serializeToString(xmlData); 
```

因此不再需要。但即使你想保留这条线，它也应该能正常工作。在 Chrome、IE 和 firefox 中进行了测试。

* * *

## IE8更新

如果我得到与您在 IE8 中相同的结果，我已经查看了。与上面的代码一样打开了确切的 html 文件，除了我将 jquery.js 替换为：[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)。该测试的结果可以在[这张图片](http://i40.tinypic.com/2qn4ks9.png)中看到。如您所见，该代码在 IE8 中也有效。

您使用的是什么版本的 jQuery？您使用的是 1.7.2 版吗？会不会是您的 jQuery.js 文件以某种方式损坏了？

* * *

## 另一个更新

[可以在此处](https://stackoverflow.com/questions/5224017/origin-null-is-not-allowed-by-access-control-allow-origin-in-chrome-why)找到 Chrome 中导致的错误的解决方案。这绝对可以解决您在 Chrome 中的问题。至于 IE7 和 IE8：你必须在你的 html 页面中添加一个 DOCTYPE。IE：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

# c# - 激活状态栏中的 Num Lock 指示器

> ID：10104107
> 
> 赞同：2
> 
> 时间：2012-04-11T10:24:20.690
> 
> 标签：c#, excel, vsto, vba

如何检测数字锁定指示器在excel中处于活动状态...

或在状态栏中启用数字锁定指示器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:04:59.397

约翰，据我所知（我可能是错的），但它`Application.Statusbar`并没有给你以你想要的方式与之交互的选项。

我也不知道有任何 API 可以实现您想要的。所以直到其他人来发布一个方法（如果有的话），你的问题的答案是

“做不到”

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:27:40.000

您将问题标记为 C#，所以我认为您正在开发 C# 应用程序。
在它里面你可以使用

```
if (Control.IsKeyLocked(Keys.NumLock)) 
```

检测 NumLock 是否打开。

要设置 Num-Lock 你可以使用

```
[DllImport("user32.dll")]
static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, int dwExtraInfo);
private void PressKb(Keys keyCode)
{
    const int KEYEVENTF_EXTENDEDKEY = 0x1;
    const int KEYEVENTF_KEYUP = 0x2;

    keybd_event((byte)keyCode, 0x45, KEYEVENTF_EXTENDEDKEY, 0);
    keybd_event((byte)keyCode, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
} 
```

和它

```
PressKb(Keys.NumLock); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:29:29.890

您可以只查看 num-lock 是否处于活动状态，因为该指示器肯定只在它处于活动状态时才显示。如果您需要在 VBA 中执行此操作（从[此处](http://www.pcreview.co.uk/forums/can-excel-vba-detect-if-caps-lock-num-lock-t2269371.html)获取的解决方案）。

```
'put these declarations at the top of the module
Private Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As Long)
As Integer
Private Const kNumlock = 144 
```

以及您需要的地方：

```
Public Function NumLock() As Boolean
NumLock = KeyState(kNumlock)
End Function

Private Function KeyState(lKey As Long) As Boolean
KeyState = CBool(GetKeyState(lKey))
End Function 
```

# curl - 使用 C# 以 curl 格式发送 HTTP POST

> ID：10104109
> 
> 赞同：1
> 
> 时间：2012-04-11T10:24:36.540
> 
> 标签：curl, facebook-c#-sdk

我正在尝试构建一个应用程序，该应用程序将在不使用 libcurl 的情况下将数据发布到 Facebook Graph API，问题是：

```
curl --silent --location
 -F "type=25"
 -F "action_spec={'action.type':'app_use', 'application':195713270451234}"
 "https://graph.facebook.com/act_12345678/adcreatives?access_token=____" 
```

现在我知道 -F 指定了 HTTP POST var 值，但我不知道如何发送这种格式：

```
-F "action_spec={'action.type':'app_use', 'application':195713270451234} 
```

如果有人能给我一个关于如何将其转换为简单的 HTTP POST 请求的线索，那就太棒了。我很高兴知道是否有办法将整个 curl 请求字符串作为请求发送！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:22:21.257

黄金法则：

*   将键值对 json 对象视为`IDictionary<string, object>`或`IDictionary<string, dynamic>`或匿名对象。
*   将 json 数组视为`IList<object>`或`IList<dynamic>`
*   将其他对象视为 json 类型，将其视为原始对象，如`bool`、`string`、`long`等`double`。

这是示例代码：

```
var actionSpec = new Dictionary<string,object>();
actionSpec["action.type"] = "app_use";
actionSpec["application"] = 195713270451234;

var fb = new FacebookClient("access_token");
dynamic result = fb.Post("act_12345678/adcreatives", new { type = 25, action_spec = actionSpec }); 
```

# java - 待定意图总是进行新活动

> ID：10104110
> 
> 赞同：10
> 
> 时间：2012-04-11T10:24:57.847
> 
> 标签：java, android, nfc

我试图用 nfc 功能制作应用程序。问题是当发现 nfc 标签时，待处理的意图总是会产生一个已经存在的新活动。我正在使用标签主机。如何在不进行新活动的情况下进行挂起意图。多谢。

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);        

            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);                              
            mNfcPendingIntent = PendingIntent.getActivity(this, 0,new Intent(this,
    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    }

    protected void onResume() {    
            super.onResume();
            mResumed = true;               
            // Sticky notes received from Android
            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {            
                NdefMessage[] messages = getNdefMessages(getIntent());
                byte[] payload = messages[0].getRecords()[0].getPayload();            
                try     { cekNfc(new String(payload)); }
                catch (SQLException e)          { e.printStackTrace(); } 
                catch (NoSuchAlgorithmException e)      {  e.printStackTrace(); }
                catch (UnsupportedEncodingException e)  { e.printStackTrace(); }

                setIntent(new Intent());
            }
            enableNdefExchangeMode();        
        }   
        private void enableNdefExchangeMode() { mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent, mNdefExchangeFilters, null); } 

    NdefMessage[] getNdefMessages(Intent intent) {  // Parse the intent             
            NdefMessage[] msgs = null;        
            String action = intent.getAction();
            //jika ada action
            if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action) || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {                      
                Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                if (rawMsgs != null) {
                    msgs = new NdefMessage[rawMsgs.length];
                    for (int i = 0; i < rawMsgs.length; i++) {  msgs[i] = (NdefMessage) rawMsgs[i]; }
                }
            } 
            return msgs;
        }

 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);        

            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);                              
            mNfcPendingIntent = PendingIntent.getActivity(this, 0,new Intent(this,
    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    }

    protected void onResume() {    
            super.onResume();
            mResumed = true;               
            // Sticky notes received from Android
            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {            
                NdefMessage[] messages = getNdefMessages(getIntent());
                byte[] payload = messages[0].getRecords()[0].getPayload();            
                try     { cekNfc(new String(payload)); }
                catch (SQLException e)          { e.printStackTrace(); } 
                catch (NoSuchAlgorithmException e)      {  e.printStackTrace(); }
                catch (UnsupportedEncodingException e)  { e.printStackTrace(); }

                setIntent(new Intent());
            }
            enableNdefExchangeMode();        
        }   
        private void enableNdefExchangeMode() { mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent, mNdefExchangeFilters, null); } 

    NdefMessage[] getNdefMessages(Intent intent) {  // Parse the intent             
            NdefMessage[] msgs = null;        
            String action = intent.getAction();
            //jika ada action
            if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action) || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {                      
                Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                if (rawMsgs != null) {
                    msgs = new NdefMessage[rawMsgs.length];
                    for (int i = 0; i < rawMsgs.length; i++) {  msgs[i] = (NdefMessage) rawMsgs[i]; }
                }
            } 
            return msgs;
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T13:13:57.467

将`android:launchMode="singleTask"`您的活动（或活动）放入清单中。这就是诀窍。每当系统发送 NFC Intent 时，总会创建一个新的 Activity。这对于 NFC 意图来说是独一无二的。因此设置`android:launchMode="singleTop"`将不起作用，也不会在 PendingIntent 中设置标志。

另一种解决方案是在所有活动中使用[NfcAdapter.enableForegroundDispatch() 。](http://developer.android.com/reference/android/nfc/NfcAdapter.html#enableForegroundDispatch%28android.app.Activity,%20android.app.PendingIntent,%20android.content.IntentFilter[],%20java.lang.String[][]%29)这样，您的应用程序就可以直接（通过`onNewIntent()`）处理所有 NFC 意图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T03:46:39.227

尝试这个：

```
mNotificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

在你的清单中：

```
android:launchMode="singleTask" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:28:02.887

创建您的待处理意图，如下所示：

```
PendingIntent.getActivity(this, 0,new Intent(this,
    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
    |Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT
    |Intent.FLAG_ACTIVITY_REORDER_TO_FRONT), 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:28:28.240

您可以在调用“getActivity”方法时使用标志“PendingIntent.FLAG_UPDATE_CURRENT”。I2m 使用它没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:28:31.667

改用这个标志..

```
new Intent(this,
    getClass()).addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T12:42:20.753

我遇到了类似的问题，但没有使用 TabHost - 每次扫描 NFC 标签时，我的应用程序都会启动一个新活动，而不是`onNewIntent`按我的意愿触发。我试图`android:launchMode="singleTask"`在清单中设置并 `NfcAdapter.enableForegroundDispatch()`在我的活动`onResume`方法中使用。相反，我放弃使用 PendingIntent 并在清单中设置意图过滤器我的活动，如下所示：

```
 <activity
        ...
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <data android:mimeType="application/vnd.myname.myapp" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TECH_DISCOVERED" />
        </intent-filter>
        <meta-data
            android:name="android.nfc.action.TECH_DISCOVERED"
            android:resource="@xml/nfc_tech_filter" />
    </activity> 
```

# c# - C# WPF：在其他事件之前首先触发 SelectionChanged 事件

> ID：10104116
> 
> 赞同：1
> 
> 时间：2012-04-11T10:25:19.077
> 
> 标签：c#, wpf, events, listbox, listboxitem

我的问题很简单：
我有一个 listBox 包含一些`DataTemplate`. 如您所见，我`SelectionChanged`在列表框中有事件：

```
SelectionChanged = "stationListBox_SelectionChanged" 
```

以及网格内的 mouseDown 事件（网格是数据模板的一部分）：

```
MouseDown = "Grid_MouseDown" 
```

我希望**先触发**`SelectionChanged`事件，然后触发事件。那是因为我想对选定的项目做点什么，所以我首先需要知道我选择了谁。**`MouseDown`**

 **XML：

```
<ListBox x:Name="stationListBox" Grid.Row="0" ItemsSource="{Binding}" SelectionChanged="stationListBox_SelectionChanged" Background="#FF5C7591"                             
    VerticalAlignment="Stretch" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
    <ListBox.Resources>
        <DataTemplate DataType="{x:Type viewModels:StationViewModel}">
            <Grid Margin="0,0,0,2"  IsEnabled="{Binding IsEnabled, Mode=TwoWay}" MouseDown="Grid_MouseDown" >
            <Frame BorderBrush="#B935373F" BorderThickness="4"></Frame>
                <StackPanel Orientation="Vertical" Margin="10" >                
                    <StackPanel Orientation="Horizontal">
                        <Image Width="30" Height="30" Margin="3,0" Source="Images\station.png" HorizontalAlignment="Left" />
                        <TextBlock Text="{Binding Name}" FontSize="14" TextAlignment="Left" Width="80" FontFamily="Arial"/>
                            <Grid>
                                <Image Width="20" Height="20" Margin="3,0" Source="Images\turnOn.png" HorizontalAlignment="Right" Visibility="{Binding IsStationOpen, Mode=TwoWay}" />
                                <Image Width="20" Height="20" Margin="3,0" Source="Images\turnOff.png" HorizontalAlignment="Right" Visibility="{Binding IsStationClose, Mode=TwoWay}" />
                               </Grid>
                        <Image Width="20" Height="20" Margin="3,0" Source="Images\delete2.png" HorizontalAlignment="Right" Visibility="{Binding Mode=TwoWay, Path=IsSelected}"
                            ToolTip="Delete station" MouseDown="Image_MouseDown" />
                    </StackPanel>                
                    <StackPanel Name="_editStationGrid" Orientation="Vertical" Visibility="{Binding IsEditable,Mode=TwoWay}">
                        <Expander Visibility="Visible" IsExpanded="{Binding IsExpandered, Mode=TwoWay}">
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock>Edit Station:</TextBlock>
                                </StackPanel>
                            </Expander.Header>
                            <StackPanel Orientation="Vertical">
                                <StackPanel Orientation="Horizontal" Margin="20,5,5,5" >
                                    <Label Content="Name:"/>
                                    <TextBox MinWidth="120" Text="{Binding Name, Mode=TwoWay}"></TextBox>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="20,0,5,0" >
                                    <Label Content="IP:" Margin="0,0,20,0"/>
                                    <TextBox MinWidth="120" Text="{Binding IP, Mode=TwoWay}" ></TextBox>
                                </StackPanel>
                            </StackPanel>
                        </Expander>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </ListBox.Resources>
</ListBox> 
```

编码：

```
private void stationListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    this._selectedStation = ((StationViewModel)this.stationListBox.SelectedItem);
}

private void Grid_MouseDown(object sender, MouseButtonEventArgs e)
{
    if (inEditMode && e.ClickCount == 1)
    {
        if (_selectedStation.IsSelected == System.Windows.Visibility.Visible)
            _selectedStation.IsSelected = System.Windows.Visibility.Collapsed;
        else
            _selectedStation.IsSelected = System.Windows.Visibility.Visible;
    }

    if (!inEditMode && e.ClickCount == 2)
    {
        if (_selectedStation_Event != null)
            _selectedStation_Event(_selectedStation);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:37:13.340

您可以使用 Dispatcher 对象：

```
 private void Grid_MouseDown(object sender, MouseButtonEventArgs e)
    {
        this.Dispatcher.BeginInvoke(new Action(delegate
        {
            // do stuff
        }
        ));
    } 
```**

# c# - 将按钮列添加到数据表

> ID：10104118
> 
> 赞同：3
> 
> 时间：2012-04-11T10:25:23.500
> 
> 标签：c#, c#-4.0, datatable

我正在尝试将按钮列插入数据表，但它说它是一个错误。请问有什么帮助吗？

```
 ButtonColumn col = new ButtonColumn();
        col.CommandName = "select";
        col.ButtonType = ButtonColumnType.LinkButton;
        col.HeaderText = "Edit";
        dt.Columns.Add(col); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:29:24.723

在 DataTable 中添加 Buttoncolumn 其有线...这根本不可能...

**DataTable DataColumn DataType**属性支持以下基本 .NET Framework 数据类型：

1.  布尔值
2.  字节
3.  字符
4.  约会时间
5.  十进制
6.  双倍的
7.  16
8.  整数32
9.  整数64
10.  字节
11.  单身的
12.  细绳
13.  时间跨度
14.  UInt16
15.  UInt32
16.  UInt64

添加列的示例代码

```
DataTable workTable = new DataTable("Customers"); 
DataColumn workCol = workTable.Columns.Add("CustID", typeof(Int32));
workCol.AllowDBNull = true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T10:34:00.553

您可以在not上添加`button`only 。`DataGrid``DataTable`

# c - 在 Linux 中查找链接到二进制文件的 SQLite 版本

> ID：10104119
> 
> 赞同：0
> 
> 时间：2012-04-11T10:25:25.160
> 
> 标签：c, linux, sqlite

我有一个使用 sqlite 库的软件包。为此，我将 sqlite.a 与最终目标文件链接以创建最终包/二进制文件。

一旦创建了二进制文件，是否有办法确认哪个版本的 SQLite 已与该二进制文件链接？我问这个是因为我的构建环境中有多个版本的 SQLite（3.6.20、3.7.7.1）。我在其中一个正在执行的二进制文件中观察到一个问题，我不知道我用来制作该二进制文件的库版本。

这是我正在开发的 linux (CentOS5) 环境。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:23:09.540

您可以告诉二进制文件本身记录或声明它使用的 SQLite 版本。二进制文件在编译时从 SQLite 定义中知道这一点。由于链接是静态的，因此构建的版本与使用的版本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:43:17.127

您可能可以通过执行类似的操作来找到编译库的版本`strings ./foo | grep "3\.[67]\.".` 不幸的是，如果您没有使用 sqlite 中的任何会在您的代码中输出此字符串的函数（例如`sqlite3_libversion()`），它们可能没有被复制由链接器结束，可能不存在。

# algorithm - LZ77和Direct2编码算法的实现

> ID：10104126
> 
> 赞同：0
> 
> 时间：2012-04-11T10:25:57.483
> 
> 标签：algorithm, compression, implementation

我需要找到[MSDN](http://msdn.microsoft.com/en-us/library/cc425493%28v=exchg.80%29.aspx)网站上描述的 LZ77 和 Direct2 算法的实现。我期待它可能是 SDK 的一部分。到目前为止，我没有运气。

有人可以指导我到哪里可以找到这些算法，以便我可以在我的代码中使用它们吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:39:12.167

用 google 进行简单搜索会得到：

*   [维基百科 - LZ77 和 LZ78](http://en.wikipedia.org/wiki/LZ77_and_LZ78)
*   [DIRECT2 编码算法](http://msdn.microsoft.com/en-us/library/ee896247%28v=prot.13%29.aspx)

我希望你不是要代码本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T09:32:30.610

你找到解决办法了吗？我在 Michael Cohen 的帮助下将其翻译成 C# 进行解压。 [http://volatility.googlecode.com/svn-history/r1609/branches/scudette/contrib/pyxpress/pyxpress.c](http://volatility.googlecode.com/svn-history/r1609/branches/scudette/contrib/pyxpress/pyxpress.c)

我的测试表明它工作正常，但请为您自己测试:)

```
 private static int PAGE_SIZE = 0x00001000;
    private static int XPRESS_ENCODE_MAGIC = 0x19880922;
    private static int DELTA_PAGE = ((2 * PAGE_SIZE) - 1);
    private static int UNCOMPRESSED_BLOCK_SIZE = (PAGE_SIZE * 0x10);

    public static byte[] Xpress_Decompress(byte[] inputBuffer, int outputSize)
    {
        int outputIndex, inputIndex;
        int indicator, indicatorBit;
        int length;
        int offset;
        int nibbleIndex;
        int nibbleIndicator;
        int inputSize = inputBuffer.Length;

        outputIndex = 0;
        inputIndex = 0;
        indicator = 0;
        indicatorBit = 0;
        length = 0;
        offset = 0;
        nibbleIndex = 0;
        nibbleIndicator = XPRESS_ENCODE_MAGIC;

        var outputBuffer = new byte[outputSize];
        while ((outputIndex < outputSize) && (inputIndex < inputSize))
        {
            if (indicatorBit == 0)
            {
                if (inputIndex + 3 >= inputSize) goto Done;
                indicator = GetInt(inputBuffer, inputIndex);
                inputIndex += sizeof(int);
                indicatorBit = 32;
            }
            indicatorBit--;

            //* check whether the bit specified by IndicatorBit is set or not
            //* set in Indicator. For example, if IndicatorBit has value 4
            //* check whether the 4th bit of the value in Indicator is set

            if (((indicator >> indicatorBit) & 1) == 0)
            {
                if (outputIndex >= outputSize) 
                    goto Done;
                outputBuffer[outputIndex] = inputBuffer[inputIndex];
                inputIndex += sizeof(byte);
                outputIndex += sizeof(byte);
            }
            else
            {
                if (inputIndex + 1 >= inputSize) 
                    goto Done;
                length = (inputBuffer[inputIndex + 1] << 8) | inputBuffer[inputIndex];

                /*
                if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0))
                {
                    printf("DECOMP: READ AT [0x%08X] = %04X \n", InputIndex, Length);
                }
                */
                inputIndex += sizeof(ushort);
                offset = length / 8;
                length = length % 8;
                //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--1 Len: %02X (%d)\n", Length, Length);
                if (length == 7)
                {
                    if (nibbleIndex == 0)
                    {
                        nibbleIndex = inputIndex;
                        if (inputIndex >= inputSize) 
                            goto Done;
                        length = inputBuffer[inputIndex] % 16;
                        //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--2 Len: %02X (%d)\n", Length, Length);
                        inputIndex += sizeof(byte);
                    }
                    else
                    {
                        length = inputBuffer[nibbleIndex] / 16;
                        //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--3 Len: %02X (%d)\n", Length, Length);
                        nibbleIndex = 0;
                    }

                    if (length == 15)
                    {
                        if (inputIndex >= inputSize) goto Done;
                        length = inputBuffer[inputIndex];
                        //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--4 Len: %02X (%d)\n", Length, Length);
                        inputIndex += sizeof(byte);
                        if (length == 255)
                        {
                            if (inputIndex + 2 >= inputSize) goto Done;
                            length = (inputBuffer[inputIndex + 1] << 8) | inputBuffer[inputIndex];
                            inputIndex += sizeof(ushort);
                            length -= (15 + 7);
                        }
                        length += 15;
                        //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--5 Len: %02X (%d)\n", Length, Length);
                    }
                    length += 7;
                    //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--6 Len: %02X (%d)\n", Length, Length);
                }

                length += 3;
                //if ((OutputIndex > 0xD0) && (OutputIndex < 0xF0)) printf("--7 Len: %02X (%d)\n", Length, Length);
                //if (Length > 280) printf("DECOMP DEBUG: [0x%08X]->[0x%08X] Len: %d Offset: %08X\n",
                //    OutputIndex, InputIndex, Length, Offset);
                while (length != 0)
                {
                    if ((outputIndex >= outputSize) || ((offset + 1) >= outputIndex)) break;
                    outputBuffer[outputIndex] = outputBuffer[outputIndex - offset - 1];
                    outputIndex += sizeof(byte);
                    length -= sizeof(byte);
                }
            }

        }

    Done:

        if (outputIndex < outputBuffer.Length)
        {
            var buffer = new byte[outputIndex];
            Buffer.BlockCopy(outputBuffer, 0, buffer, 0, outputIndex);
            outputBuffer = buffer;
        }

        return outputBuffer;
    }

    public static int GetInt(byte[] buffer, int offset)
    {
        return
            ((int)buffer[offset]) |
            ((int)buffer[offset + 1] << 8) |
            ((int)buffer[offset + 2] << 16) |
            ((int)buffer[offset + 3] << 24);
    } 
```

# c - 如何修复多字符常量警告

> ID：10104129
> 
> 赞同：1
> 
> 时间：2012-04-11T10:26:04.170
> 
> 标签：c, arrays, character-encoding, char

我正在做一个家庭作业，我们要利用一个易受缓冲区溢出影响的程序。我们通过创建一个大`char`数组并首先在没有操作指令的情况下完全填充它来做到这一点。

我相信我应该做的是将恶意代码复制到缓冲区中的某个位置（这部分我可以做得很好），然后以某种方式修改可利用函数的返回地址，使其指向恶意代码所在的位置。

我知道我想设置的地址（比方说`½¾¿º`），但我收到了一些警告，但不知道它们是由什么引起的。

这是导致警告的代码（本质上）：

```
int start_of_return_address = 10;
chars[start_of_return_address + 0] = '½';
chars[start_of_return_address + 1] = '¾';
chars[start_of_return_address + 2] = '¿';
chars[start_of_return_address + 3] = 'º'; 
```

我为每个作业收到的警告是：

```
warning: overflow in implicit constant conversion
warning: multi-character character constant 
```

我通过将`bdbebfba`（恶意代码的地址）转换为字符（yielding `½¾¿º`）来获得地址。

关于什么可能导致警告的任何想法，或者我可以将地址复制到字符数组中的另一种方式？

请记住，这是家庭作业。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:59:29.810

我认为您从字符转换`bdbebfba`为字符是可疑的。

如果那是地址，并且我想将其存储在字符数组中，我会这样做：

```
chars[start_of_return_address + 0] = 0xbd;
chars[start_of_return_address + 1] = 0xbe;
chars[start_of_return_address + 2] = 0xbf;
chars[start_of_return_address + 3] = 0xba; 
```

它是一个 4 字节的值，因此*可以*容纳 4 个字符。

我认为[字节序](http://en.wikipedia.org/wiki/Endianness)也很重要。如果系统是 little-endian (x86)，则最低有效字节进入低地址（并且您颠倒分配顺序）。

```
chars[start_of_return_address + 4] = 0xbd;
chars[start_of_return_address + 3] = 0xbe;
chars[start_of_return_address + 2] = 0xbf;
chars[start_of_return_address + 1] = 0xba; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:22:32.887

您向我们展示的字符文字（`'½'`, `'¾'`, `'¿'`, `'º'`）不应被解释为多字符常量。实际上，我的猜测是这是一个编码问题：例如，它们可以在源代码中编码为 UTF-8（因此编码为两个字节），但编译器期望另一种编码（如您假设的 Latin-1 - - 如果我是对的，它们被视为`'Â½'`, `'Â¾'`, `'Â¿'`, `'Âº'`) ，因此认为常量中有两个字符。

# eclipse - 无法在 Eclipse 或 Aptana 中索引缩小的 ExtJS 文件

> ID：10104130
> 
> 赞同：1
> 
> 时间：2012-04-11T10:26:14.863
> 
> 标签：eclipse, extjs, indexing, aptana

我花了一些时间才发现 Eclipse 和 Aptana 在尝试从 ExtJS 索引或读取新复制的 CSS 文件时都卡住了。(ext-all.css, ext-all-gray.css, ...)

问题似乎是因为这些文件被缩小到一行。

我使用 Linux Ubuntu 32 位，我的 CPU 永远超过 100%，我必须杀死 Aptana/Eclipse。

我已经尝试通过删除项目设置、清理项目来修复它......没有任何帮助。仅将缩小的文件（200.000 个字符）修剪为仅说 200 个字符，然后它就可以工作了。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:25:00.747

这是一种解决方案：[http ://www.sencha.com/forum/showthread.php?194558-Cannot-index-minified-ExtJS-files-in-Eclipse-or-Aptana&p=776905&viewfull=1#post776905](http://www.sencha.com/forum/showthread.php?194558-Cannot-index-minified-ExtJS-files-in-Eclipse-or-Aptana&p=776905&viewfull=1#post776905)

# linux - 如何将linux命令重写为CMD语法

> ID：10104131
> 
> 赞同：0
> 
> 时间：2012-04-11T10:26:18.040
> 
> 标签：linux, batch-file, cmd

你能帮我从linux重写这个命令/语法吗：

```
inname=`convert image -format "%t" info:`
convert image.jpg ..... ${inname}_%d.png 
```

批处理文件？它适用于 ImageMagick。%d 是 ImageMagick 命令的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:28:25.333

您可以创建别名，简单的方法

[http://www.mediacollege.com/linux/command/alias.html](http://www.mediacollege.com/linux/command/alias.html)

# c - 字符 a[512] 与字符 b[512 + 1]

> ID：10104132
> 
> 赞同：1
> 
> 时间：2012-04-11T10:26:19.623
> 
> 标签：c, arrays, performance, optimization, memory

我看到很多代码，使用以下符号

```
char a[512 + 1];  
a[512] = '\0'; 
```

它不是效率低下，内存利用明智吗？假设您使用的是 32 位机器。而 [512 + 1] 实际上意味着 [512 + 4]。
对于服务器应用程序来说，这可能没什么大不了的，但对于嵌入式系统编程来说，这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:31:24.413

```
char bla[512];
bla[sizeof bla - 1] = '\0'; 
```

在我看来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:18:43.483

使总对象大小成为架构基本对齐的倍数确实是最节省内存的解决方案。

此外，选择 2 的幂作为对象大小可能会避免分配对象的碎片，但这取决于 libc 分配器的实现。

在主流架构上，您的特定示例很少成为问题，但有一个相关的问题：结构填充，另外需要注意的是编译器不能随意重新排序成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:19:38.973

首先，这个问题太宽泛，无法详细回答，因为这取决于所使用的 CPU。

> 但对于嵌入式系统编程来说，这很重要。

每个半现代的嵌入式 MCU/MPU 都可能支持未对齐的访问，和/或支持比 32 位更小的加载指令。较小的 8/16 位现代 MCU 很可能根本没有任何对齐问题。

如果您确实遇到无法读取未对齐数据的 CPU，那么您能做什么……那么您无法分配奇数个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T10:28:45.693

这里没有使用额外的内存。它是`513`字节，`char`标准保证`1`在所有实现中都是字节。如果是结构而不是数组，则添加填充字节。如果是数组，您将得到您所要求的。

请注意，语法有一个额外的目的，它更具**可读性**。
它清楚地表明该字符串应该是`512`char 并且需要额外`char`的 terminating `\0`。责任更多的是在应用程序中编写更具可读性的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T12:03:54.240

这取决于规模。如果你有10个，谁在乎？如果你有一百万？那么你已经有 512MB 的数据，所以我认为浪费的 3MB 不会是你真正的问题。

必须分配 100 万个对象，因此分配控制结构将需要超过 3MB 的空间。优化分配更有意义，例如分配大型数组而不是单个对象。或者将字节精确存储的字符串存储在一个大型 char 数组中，因此长度为 127 的字符串将仅使用 128 个字节，而不是完整的 513 个字节，浪费更多。甚至以压缩格式存储每个字符串。

如果您需要完整的 512 字节，您也可以存储没有终止 '\0' 的字符串，并且只能通过处理此问题的包装函数访问它们。

请注意，所有这些解决方案都意味着额外的工作，可能容易出错并且需要格外小心，就像最后一个一样。因此，请确保您需要对大量数据的可扩展性，并且内存将成为瓶颈，否则您可能会在不需要它的情况下进行过早的优化，从而对可读性和可维护性产生所有影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T10:29:06.637

它只是额外的安全来容纳`NULL`角色。

> 而 [512 + 1] 实际上意味着 [512 + 4]。

`512+1`除非你担心`513`内存对齐问题？

如果你仍然不开心，那就去吧

```
 char arr[511+1];
 arr[sizeof(arr)-1]=0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T10:36:10.990

我不确定，但这应该取决于您的 CPU 的对齐限制。某些 RISC CPU（如 MIPS）不访问单个字节。使用加载指令只能访问四个字节的字。在这种情况下，每个字节都会占用一个字。我认为在现实世界中情况并非如此。我怀疑编译器将连续的'char'放在单词中。然后使用“掩码”来检索单个字节。

不要拒绝投票:)非常“不自信”的答案:)

# jquery - 仅 IE7 中的 JQuery 列表/链接操作错误

> ID：10104134
> 
> 赞同：1
> 
> 时间：2012-04-11T10:26:23.320
> 
> 标签：jquery, jquery-ui, internet-explorer-7, jquery-ui-dialog

我使用以下代码在 html 中查找钩子，从中生成链接，创建和填充弹出窗口，然后将钩子本身隐藏起来。它在 FF、Chrome、Safari、IE8 和 IE9 中运行良好 - 但在 IE7 中失败。

这是实际用例的链接，注意没有异常的 CSS，列表没有浮动，等等。我使用 JQuery 1.7.1 和 UI 版本 1.8.18，对话框的默认打包 CSS：

[http://databizsolutions.ie/contents/page.php?v=35&u=admin-videos#a](http://databizsolutions.ie/contents/page.php?v=35&u=admin-videos#a)

如果有人能指出我如何关闭这个错误，我将不胜感激。

原始 HTML（由 TinyMCE 生成）：

```
<h3>Title of list</h3>
<ol>
    <li>Call to  action 1</li>
    <ol>
        <li>[popup]path/to/file1.mp4</li>
    </ol>
<li>Call to  action 2</li>
    <ol>
        <li>[popup]path/to/file2.mp4</li>
    </ol>
<li>Call to  action 3</li>
    <ol>
        <li>[popup]path/to/file3.mp4</li>
    </ol>
... 
```

jQuery：

```
$(document).ready(function(){

var num = 0;

//Find [popup] instances, increment the number
$("li:contains('[popup]')").each(function() {
    var nextnumber = num++;

    //add a general and a unique class to the list item containing the hook
    $(this).addClass('popup' + ' ' + 'pop' + nextnumber);

    //Split on the hook, and save remainder of text (the path to file) as the 'path' attr
    var splitpath = $(this).text().split("[popup]");
    $(this).attr("path", splitpath[1]); 
    var path = $(this).attr("path");
    //alert($(this).attr("path"));

    //Get the previous list item (the call to action), and give it general and unique classes also.
    $thisArrow = $(this).parent().prev();
    $thisArrow.addClass('arrow' + ' ' + 'arr' + nextnumber);

    //Make the call to action an anchor link, with a general class identifier.
    $thisArrow.wrapInner('<a class="opener" title="Click to view video" path ="' + path + '"/>');

    //hide hooks
    $('li.popup').parent().hide();
});

$('.opener').click(function() {
    var Header = $(this).text();
    var popupURL = $(this).attr("path");
    var popupBG = "../contents/css/images/white-nontrans.jpg";

    var thisDialog = $('<div></div>')
        .html('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="mediaplayer1" name="mediaplayer1" width="550" height="420"><param name="movie" value="../mediaplayer/player.swf"><param name="autostart" value="true"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="bgcolor" value="#FFFFFF"><param name="wmode" value="opaque"><param name="flashvars" value="file=' + popupURL + '&image=' + popupBG + '"><embed id="mediaplayer1" name="mediaplayer2" src="../mediaplayer/player.swf" width="550" height="420" allowfullscreen="true" allowscriptaccess="always" autostart="true" bgcolor="#FFFFFF" wmode="opaque" flashvars="file=' + popupURL + '&image=' + popupBG + '" /></object>')

    .dialog({ close: function() { $(this).html(''); },autoOpen: false, title: Header, modal: true, maxHeight: 500, width:580 });
    thisDialog.dialog('open');
    return false;
})
}); 
```

所需的 HTML 结果：

```
<h3>Title of list</h3>
<ol>
    <li class="arrow arr0">
        <a class="opener" title="Click to view video" path ="path/to/file1.mp4" >
           Call to  action 1
        </a>
    </li>
    <li class="arrow arr1">
        <a class="opener" title="Click to view video" path ="path/to/file2.mp4" >
           Call to  action 2
        </a>
    </li>
    <li class="arrow arr2">
        <a class="opener" title="Click to view video" path ="path/to/file3.mp4" >
           Call to  action 3
        </a>
    </li>
... 
```

在 IE7 中：

```
<h3 class="arrow arr0 arr2 arr4 arr6 arr8 arr10">Title of list</h3>
<a class="opener" title="Click to view video" path ="path/to/file1.mp4" >
    <a class="opener" title="Click to view video" path ="path/to/file2.mp4" >
        <a class="opener" title="Click to view video" path ="path/to/file3.mp4" >
<ol>
    <li>Call to  action 1</li>
    <ol>
        <li>[popup]path/to/file1.mp4</li>
    </ol>
<li>Call to  action 2</li>
    <ol>
        <li>[popup]path/to/file2.mp4</li>
    </ol>
<li>Call to  action 3</li>
    <ol>
        <li>[popup]path/to/file3.mp4</li>
    </ol>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:32:38.457

我没有对此进行测试，但我认为这是因为您的 HTML 不正确。`ol`不是 的有效子元素`ol`，只有`li`。您的 html 应如下所示：

```
<h3>Title of list</h3>
<ol>
    <li>
        Call to  action 1
        <ol>
            <li>[popup]path/to/file1.mp4</li>
        </ol>
    </li>
    <li>
        Call to  action 2
        <ol>
            <li>[popup]path/to/file2.mp4</li>
        </ol>
    </li>
    <li>
        Call to  action 3
        <ol>
            <li>[popup]path/to/file3.mp4</li>
        </ol>
    </li>
</ol> 
```

IE 对格式错误的 HTML 非常不宽容。

# ios - 定期将 RSS 源列表检查到 iOS 后台

> ID：10104139
> 
> 赞同：0
> 
> 时间：2012-04-11T10:26:40.517
> 
> 标签：ios, background, rss

我正在尝试定期检查 iOS 后台的 RSS 提要列表。应用程序进入后台后，如何每十分钟启动一次方法示例？我可以使用本地通知吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:38:35.873

简单的答案：你不能。iOS 不允许这种后台进程。有些人尝试使用诸如在后台播放无声音乐之类的变通方法，但这违反了 App Store 规则，如果被抓到，应用程序将被 Apple 拒绝。

# javascript - Javascript：计算div中的可见字符

> ID：10104142
> 
> 赞同：5
> 
> 时间：2012-04-11T10:26:43.733
> 
> 标签：javascript, jquery, html, count

我有一个`div`包含`S`任意长度但大小固定的文本（长度字符串）。超过一定长度（我们称之为`L`），文本被截断，文本的其余部分不再可见。（从技术上讲，范围`[0,L)`是可见的，范围`[L,S)`是不可见的）。

我想要做的是通过`L`仅**计算**. `div`任何超出分界点的字符都应该被忽略。

如果可以完成工作，我很乐意使用 jQuery 等第三方库！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:41:37.513

这是我为修剪文本所做的一个功能：

```
function getTextThatFits(txt, w, fSize, fName, fWeight) {
    if (fWeight === undefined)
        fWeight = "normal";

    var auxDiv = $("<div>").addClass("auxdiv").css ({
        fontFamily : fName,
        fontSize : parseInt(fSize) + "px",
        position: "absolute",
        height: "auto",
        marginLeft : "-1000px",
        marginTop : "-1000px",
        fontWeight: fWeight,
        width: "auto"
    })
    .appendTo($("body"))
    .html(txt);

    var ww = (auxDiv.width() + 1);
    var str = txt;

    if (ww > w)
    {
        var i = 1, p = 1, u = txt.length, sol = 0;

        while (p <= u)
        {
            i = (p + u) >> 1;
            str = txt.slice(0, i);
            auxDiv.html(str);
            ww = (auxDiv.width() + 1);
            if (ww <= w) {
                sol = i;
                p = i + 1;
            }
            else u = i - 1;
        }

        str = txt.slice(0, sol);
    }
    $(".auxdiv").remove();
    auxDiv.remove();
    return str.length;
} 
```

我正在使用二进制搜索来查找适合特定宽度的文本。为了使用该函数，您必须像这样调用它：

```
getTextThatFits(yourText, divWidth, fontSize, fontName, fontWeight=optional) 
```

# mysql - 如何在不选择整个结果集的情况下获取结果集中的“下一行”和“上一行”？

> ID：10104146
> 
> 赞同：4
> 
> 时间：2012-04-11T10:27:00.283
> 
> 标签：mysql, sql, database

有没有合适的方法来做到这一点：

```
ID | name
 1 | aa
 4 | bb
 6 | dd
 9 | ee 
```

ID 是具有 auto_increment 的主索引...缺少的索引已被 SQL 删除，因此有一些空格

如果我在 page?ID=4 中导航，我想使用相同的查询获取上一行（ID 为 1）和下一行（ID 为 6）（添加:)

有没有办法在不选择/遍历整个结果集的情况下做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:30:17.337

我会做这样的事情（以前的记录）：

```
SELECT * FROM table
WHERE id < @id
ORDER BY id DESC
LIMIT 1 
```

这应该是数据库引擎优化查询的足够信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T10:30:42.233

```
SELECT * from table where `ID` > 4 ORDER BY `ID` ASC LIMIT 1 /* next */
SELECT * from table where `ID` < 4 ORDER BY `ID` DESC LIMIT 1 /* previous */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T10:38:58.617

试试看-

```
(SELECT * FROM table_name
WHERE id < 4
ORDER BY id DESC
LIMIT 1)
union 
(SELECT * FROM table_name
WHERE id > 4
ORDER BY id ASC
LIMIT 1) 
```

# android - 我在哪里可以找到初始化 ORMLite 所需的 ApplicationContext？

> ID：10104152
> 
> 赞同：4
> 
> 时间：2012-04-11T10:27:16.353
> 
> 标签：android, ormlite

我正在使用 android 和 ormlite。我在初始化`ForeignCollection`.

我发现了这个，初始化它：`dao.getEmptyForeignCollection()`

但是对于 dao，我需要`DatabaseHelper`，对于 databasehelper，我需要 applicationContext，但在实体中我没有上下文。还有其他选择吗？

这就是代码，它是 1:n 的关系。班组：

```
@DatabaseField(canBeNull = true, foreign = true)
private Club club; 
```

班级俱乐部：

```
@DatabaseField(canBeNull = true, foreign = true)
private ForeignCollection<Team> teams; 
```

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:39:25.377

您的问题不是关于外国收藏，而是关于[ORMLite](http://ormlite.com/)如何在 Android 下连接。所有这些都在文档中进行了解释：

> [http://ormlite.com/docs/android](http://ormlite.com/docs/android)

你特别问：

> 但是对于 dao，我需要`DatabaseHelper`，对于数据库助手，我需要应用程序`Context`，但在实体中我没有上下文。还有其他选择吗？

在 Android 下，每个扩展`Activity`, `ListActivity`, `Service`, and `TabActivity` *also*的类都是一个`Context`. 您可以从[在线文档](http://developer.android.com/reference/android/app/Activity.html)中查看类层次结构：

```
java.lang.Object
    ↳ android.content.Context
        ↳ android.content.ContextWrapper
            ↳ android.view.ContextThemeWrapper
                ↳ android.app.Activity 
```

如果您查看网站上提供的[Android 示例](http://ormlite.com/docs/android-examples)项目，您可以了解 Android 应用程序的连接方式：

*   你的主要`Activity`延伸`OrmLiteBaseActivity`

    ```
    public class HelloAndroid extends OrmLiteBaseActivity<DatabaseHelper> { 
    ```

*   中的`onCreate`方法`OrmLiteBaseActivity`构造您`DatabaseHelper`使用 ORMLite`OpenHelperManager`及其本身作为`Context`：

    ```
    OpenHelperManager.getHelper(this.getApplicationContext()); 
    ```

*   您可以使用该`OrmLiteBaseActivity.getHelper()`方法访问帮助程序来创建您的 DAO，以便您可以将内容持久保存到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:34:42.213

您需要注入所需的依赖项。

如果您的实体需要数据库助手，请提供。如果您的数据库助手需要上下文，请提供它。

为您的类提供构造函数，使所需的依赖项成为强制性的：

```
public DataHelper( Context context ) {
  this.context = context;
} 
```

然后，从您的活动或应用程序模型中，使用

```
new DataHelper( this ); 
```

注入依赖项。

先验地，使用将为您的数据库助手提供一般上下文的应用程序类会很有趣，而不是在其 onCreate 方法中为每个活动创建一个新的数据库助手。

# c++ - 使用 boost::asio/windows7/visual studio 2010 的编译器错误

> ID：10104153
> 
> 赞同：0
> 
> 时间：2012-04-11T10:27:17.270
> 
> 标签：c++, visual-studio-2010, windows-7, boost-asio

自从尝试在我的系统（win7、vs2010、boost 1.49）上编译 boost::asio 程序几个小时以来，我一直在苦苦挣扎。Boost 已正确构建并链接到我的 vs 项目。我用 boost::regex 进行了测试，一切正常。

编译器抱怨 2 个头文件（in6addr.h、ws2ipdef.h），大约 90% 是 C2146（语法）和 C2079（未定义的类/结构/联合名称）错误。

大量这些错误与未定义的 windows 类型定义 (USHORT,ULONG...) 和 winsock 定义(SOCKET_ADDRESS, ADDRESS_FAMILY) 有关。可以在这篇文章的末尾找到一个示例。

我的包括以下内容：

```
#pragma once

#include "targetver.h"
#include <boost/asio.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/cstdint.hpp>
#include <boost/bind.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <stdio.h>
#include <tchar.h>
#include <string>
#include <cassert>
#include <vector>
#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <map>
#include <sstream> 
```

*   我尝试了逐个文件的包含定义，并在预编译的头文件中收集了这些定义。

*   鉴于我的问题似乎与winsock2和windows定义有关，我尝试使用适当的定义（WIN32_LEAN_AND_MEAN ..）以所有可能的方式包含它们，但无济于事。

*   我尝试在独立程序中运行winsock2，一切正常。

我的问题似乎与这个非常相似（尝试了所有未解决的建议/问题）：

[http://www.developpez.net/forums/d585193/c-cpp/cpp/bibliotheques/boost/asio-erreur-syntaxe-specificateur-type-manquant-d/](http://www.developpez.net/forums/d585193/c-cpp/cpp/bibliotheques/boost/asio-erreur-syntaxe-specificateur-type-manquant-d/)

我已经打破了 2 个键盘，并认真考虑用鼠标剩下的东西吊死自己。请帮忙！

在此先感谢您的时间。

托马斯

错误示例：

**ws2ipdef.h**

> Erreur 171 错误 C2059: erreur de syntaxe : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 336 1 asioProto Erreur 180 error C2059: erreur de syntaxe : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 354 1 asioProto Erreur 189 错误 C2059: erreur de syntaxe : ')' c:\program files (x86)\microsoft sdks\ windows\v7.0a\include\ws2ipdef.h 372 1 asioProto Erreur 198 错误 C2059: erreur de syntaxe : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 390 1 asioProto Erreur 18 错误 C2079: 'sockaddr_gen::Address' 利用 une struct de 'sockaddr' non définic:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 75 1 asioProto Erreur 19错误 C2079: 'sockaddr_gen::AddressIn' 使用 une struct de 'sockaddr_in' non défini c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 76 1 asioProto Erreur 177 error C2086: 'int BOOLEAN' ： redéfinition c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 354 1 asioProto Erreur 186 error C2086: 'int BOOLEAN' : redéfinition c:\program files (x86)\microsoft sdks\ windows\v7.0a\include\ws2ipdef.h 372 1 asioProtoh 354 1 asioProto Erreur 186 错误 C2086: 'int BOOLEAN' : redéfinition c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 372 1 asioProtoh 354 1 asioProto Erreur 186 错误 C2086: 'int BOOLEAN' : redéfinition c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2ipdef.h 372 1 asioProto

**in6addr.h**

> Erreur 7 错误 C2143：语法错误：缺席 de ';' avant '*' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr.h 27 1 asioProto Erreur 1 错误 C2146: 语法错误：缺席 de ';' avant l'identificateur 'Byte' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr.h 24 1 asioProto Erreur 4 error C2146: erreur de syntaxe : 缺席 de ';' avant l'identificateur 'Word' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr.h 25 1 asioProto Erreur 2 错误 C4430: spécificateur de type manquant - int est pris en compte par défaut . 备注：C++ ne prend pas en charge int par défaut c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr. h 24 1 asioProto Erreur 3 错误 C4430: spécificateur de type manquant - int est pris en compte par défaut。备注：C++ ne prend pas en charge int par défaut c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr.h 24 1 asioProto Erreur 5 error C4430: spécificateur de type manquant - int est pris en compte par défaut。备注：C++ ne prend pas en charge int par défaut c:\program files (x86)\microsoft sdks\windows\v7.0a\include\in6addr.h 25 1 asioProto

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:54:24.497

终于设法钉了它。有点儿。

问题在于用于编译的 VS 工具集（VS2010 上默认为 v100）。当切换到 v90 或 SDK 7.1 时，编译 ok。

不知道为什么。

项目属性 > 常规 > 平台工具集

[C++ 原生多目标](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)

# iphone - Webview 适用于 iphone 但不适用于 ipad

> ID：10104156
> 
> 赞同：0
> 
> 时间：2012-04-11T10:27:28.187
> 
> 标签：iphone, ios, ipad, mobile, ios5

下面的代码在 Iphone 上运行，我在 ipad 上加载 webview 时遇到问题，它遇到了 didFailwith 错误，（iPad 已连接）有什么帮助吗？

```
 - (void)viewDidAppear:(BOOL)animated
{
      NSURL *url;
      if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
          url = [NSURL URLWithString:@"http://www.google.com"];
      }else{
          url = [NSURL URLWithString:@"http://www.google.com"];
      }
      NSURLRequest *req = [NSURLRequest requestWithURL:url]; 
      [webSurfForecast loadRequest:req];
      [super viewDidAppear:YES];
  }

 -(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Can't connect. Please check your          internet Connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:34:53.377

你可以这样检查..

```
 BOOL iPad = NO;
  #ifdef UI_USER_INTERFACE_IDIOM
  iPad = (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad);
  #endif
  if (iPad) {
            // iPad specific code here
   } else {
            // iPhone/iPod specific code here
   } 
```

# python - 在 Windows 7 CMD 中执行 Python 文件

> ID：10104157
> 
> 赞同：1
> 
> 时间：2012-04-11T10:27:32.530
> 
> 标签：python

我已经将 python 32 包安装到

> C:\python32

我还设置了路径：

> 蟒蛇路径 | C:\Python32\Lib;C:\Python32\DLLs;C:\Python32\Lib\lib-tk;

但我仍然无法运行使用 cmd 键入“python file.py”的文件。我还应该做什么？

谢谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:36:44.287

将 Python 的安装目录添加到`PATH`：[http ://docs.python.org/using/windows.html#finding-the-python-executable](http://docs.python.org/using/windows.html#finding-the-python-executable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:37:48.993

从 cmd 执行`path %path%;c:\python32`- 这会将 python 目录附加到环境路径。

桂路在这里： http: [//www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

此外，更多信息：[http](http://en.wikipedia.org/wiki/PATH_(variable) ://en.wikipedia.org/wiki/PATH_(variable )

# ios - 单击电子邮件地址时设置默认主题

> ID：10104159
> 
> 赞同：0
> 
> 时间：2012-04-11T10:27:36.773
> 
> 标签：ios, xcode, uitextfield

我正在使用带有 UITextView.code 的 dataDetectorTypes 属性工作正常。

当我单击链接时，电子邮件作曲家会出现预先填写的收件人：[电子邮件地址]，但我也想设置默认主题：[主题字符串]。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-01T17:01:16.043

1）拳头添加 `<UITextViewDelegate, MFMailComposeViewControllerDelegate>`到包含文本视图的类。

您必须向此类添加两个导入：

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h> 
```

2）添加一个变量：（`MFMailComposeViewController`在这个例子mailVC中，你也可以将它作为一个类属性添加到你的.h中）

3）实现下一个方法：

```
- (BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange 
```

这允许拦截特定的 url 交互。您可以取消特定交互并添加自己的操作，例如：

```
-(BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange{
   //EXAMPLE CODE
    if ([[URL scheme] isEqualToString:@"mailto"]) {

        mailVC = [[MFMailComposeViewController alloc] init];
        [mailVC setToRecipients:@[@"your@destinationMail.com"]];
        [mailVC setSubject:@"A subject"];
        mailVC.mailComposeDelegate = self;

        [self presentViewController:mailVC animated:YES completion:^{
           // [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];
        }];
        return NO;
    }
    return YES;
} 
```

3) 要关闭您的 MFMailComposeViewController 变量：

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
    [mailVC dismissViewControllerAnimated:YES completion:nil];
} 
```

这对我行得通！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:46:26.677

```
 MFMailComposeViewController *mailController =    [[MFMailComposeViewController alloc] init]; 

   mailController.mailComposeDelegate = self;

if([MFMailComposeViewController canSendMail]){
    [mailController setSubject:@"Subject"];
    [mailController setMessageBody:@"Email body here" isHTML:NO]; 
    [mailController setMessageBody:[self getInFo] isHTML:YES]; 
    [mailController setToRecipients:[NSArray arrayWithObject:@"xx@xxx.com"]];
    [mailController setTitle:@"Title"];

    [self presentModalViewController:mailController animated:YES]; 
}else{
    [mailController release];
} 
```

# ios - 更改pincolor后无法显示注释标题

> ID：10104164
> 
> 赞同：2
> 
> 时间：2012-04-11T10:27:52.293
> 
> 标签：ios, annotations, mkmapview, mkpinannotationview

我用这段代码改变了注释的颜色，但是之后标题和副标题无法显示，我该如何保存这个问题？

代码是：

```
- (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation 
{   
  static NSString *defaultPinID = @"LYB"; 
    MKPinAnnotationView *customPinview = (MKPinAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID]; 
    if ( customPinview == nil ) {
        customPinview = [[[MKPinAnnotationView alloc] 
                    initWithAnnotation:from reuseIdentifier:defaultPinID] autorelease]; 
    }
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;
    if ([[annotation title] isEqualToString:@"the first"]) {
        customPinview.pinColor = MKPinAnnotationColorGreen;
    }
    return customPinview;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:21:53.360

在“return customPinview”之前的新行中添加以下代码：

```
customPinview.canShowCallout = YES; 
```

# c# - 递归生成列表中每个项目的组合

> ID：10104165
> 
> 赞同：1
> 
> 时间：2012-04-11T10:27:52.890
> 
> 标签：c#

我有一个清单

```
List<string> collection = {"a","b"} 
```

**我想给出一个数值，即重量，例如 2**

我想要的是：

对于给定的权重，得到所有可能的组合：

```
a0b0, a1b0, a2b0
a0b1, a1b1, a2b1
a0b2, a2b2 
```

其中 0,1,2 是从 0 到给定权重值的值

我很难生成它。请指导？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:33:08.313

如果您确实需要**所有**可能的组合，请使用：

```
List<string> collection = new List<string> {"a","b"};
List<int> numbers = new List<int> { 0, 1, 2 };
var result = 
from a in collection
from b in collection
from n1 in numbers
from n2 in numbers
select a + n1 + b + n2; 
```

这导致 36 个项目：a0a0、a0a1、a0a2、a1a0、a1a1、a1a2、a2a0、a2a1、a2a2、a0b0、a0b1、a0b2、a1b0、a1b1、a1b2、a2b0、a2b1、a2b2、b0a0、b0a1、b0a2、b1a0、 b1a1，b1a2，b2a0，b2a1，b2a2，b0b0，b0b1，b0b2，b1b0，b1b1，b1b2，b2b0，b2b1，b2b2

如果您只需要问题中所述的组合，请使用：

```
List<int> numbers = new List<int> { 0, 1, 2 };
var result = 
from n1 in numbers
from n2 in numbers
select "a" + n1 + "b" + n2; 
```

这导致只有 9 个项目：a0b0、a0b1、a0b2、a1b0、a1b1、a1b2、a2b0、a2b1、a2b2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:38:08.530

***使用递归：***

```
static void ShowCombination(List<string> mlist, int value,int current=0,string stringleft="")
    {
            if (current == mlist.Count-1) // if this is the last item in the list
            {
                for (int m = 0; m <= value; m++) //loop through the value add it to the existing string-stringleft
                {
                    Console.WriteLine(stringleft  + mlist[current]+m.ToString()); 
                }
            }
            else // if there are more than 1 item left in the list
            {
                string currentstring = mlist[current]; //get current string in the list eg. "a" 
                stringleft = stringleft + currentstring ; //reset existing string -- eg "a"
                for (int m = 0; m <= value; m++)  //loop through the value add it to the existing 'stringleft' pass it and the new current index for recursion
                {
                    string stopass = stringleft +  m.ToString(); // eg. "a0"; "a1" 
                    ShowCombination(mlist, value, current + 1, stopass); 
                }
            }
    } 
```

![在此处输入图像描述](../Images/7b82228b4adb87be41e8b413c0b489e2.png)

*用法：*

```
ShowCombination(new List<string>() {"a", "b"}, 2); 
```

*输出：*

```
a0b0
a0b1
a0b2
a1b0
a1b1
a1b2
a2b0
a2b1
a2b2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:56:14.147

这对@Daniel 的回答并没有增加多少，就像您使*体重*动态化的方式一样：

```
int weight = 2;
List<string> collection1 = new List<string>{ "a", "b" };
var collection2 = Enumerable.Range(0, weight + 1);
var combinations=from str1 in collection1 
                 from int1 in collection2 
                 from str2 in collection1 
                 from int2 in collection2 
                 select str1 + int1 + str2 + int2;

foreach (var combi in combinations)
    Console.WriteLine(combi); 
```

**编辑**：如果你想要所有的排列，看看这个项目，看看它是如何实现的。它工作得很好。

[http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-CG](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

例如：

```
List<string> collection1 = new List<string> { "a", "b", "c", "d" };
var collection2 = Enumerable.Range(0, weight + 1);
collection1 = collection1.Concat(collection2.Select(i => i.ToString())).ToList();

var permutations = new Facet.Combinatorics.Permutations<String>(collection1);
foreach (IList<String> p in permutations)
{
    String combi = String.Join("", p);
} 
```

# android - 如何在包含其他视图的 LinearLayout 中画一条线？

> ID：10104171
> 
> 赞同：1
> 
> 时间：2012-04-11T10:28:18.487
> 
> 标签：android, android-layout

我创建了一个应该包含不同颜色的多个视图的栏。必须绘制一条线来指示条中的当前位置。下面是我的简化代码：

```
public class Abar extends LinearLayout {
    final Paint line_paint = new Paint();
    private Context context;

    public Abar(Context context) {
        super(context);
        this.context = context;
        line_paint.setColor(Color.WHITE);
        setWeightSum(2000);
        setBackgroundResource(R.color.blue);

        View view = new View(context);
        view.setBackgroundResource(R.color.yellow);
        this.addView(view, new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1000));
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawLine(20, 80, 100, 80, line_paint);
    }
} 
```

现在，这似乎不起作用。无论我是否将`canvas.drawLine`与交换`super.onDraw`，除非我删除`view.setBackgroundResource`. 如何在 LinearLayout 上画一条线。如果可能，我宁愿不使用 FrameLayout。

下面是我在条形顶部尝试实现的目标（添加白线）的图片（注意：第一张图片上的白条只是为了清晰起见而被夸大了）：

![酒吧](../Images/92f33a203a450cf5269bb3c92ab4beeb.png)

![酒吧 2](../Images/bb21871063859a719fd1cdc77e13f2cf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:38:34.063

覆盖 dispatchDraw() 而不是 onDraw()。您想在子视图绘制*后*绘制线条（不在 super.onDraw 中）。

# c# - 使用派生类对象访问基类方法

> ID：10104180
> 
> 赞同：8
> 
> 时间：2012-04-11T10:28:47.903
> 
> 标签：c#

如果我正在使用阴影，并且如果我想使用派生类对象访问基类方法，我该如何访问它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T10:30:51.000

使用[`base`](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx)关键字：

```
base.MethodOnBaseClass(); 
```

> **base**关键字用于从派生类中访问基类的成员：

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-11T10:35:01.957

首先将派生类对象转换为基类类型，如果调用方法，它会调用基类方法。请记住，它仅在派生类方法被隐藏时才有效。

例如，

观察下面的注释行：

```
public class BaseClass
{
    public void Method1()
    {
        string a = "Base method";
    }
}

public class DerivedClass : BaseClass
{
    public new void Method1()
    {
        string a = "Derived Method";
    }
}

public class TestApp
{
    public static void main()
    {
        DerivedClass derivedObj = new DerivedClass();
        BaseClass obj2 = (BaseClass)derivedObj; // cast to base class
        obj2.Method1();  // invokes Baseclass method
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-11T10:30:20.137

您限定了方法调用：

```
base.foo(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-10T17:50:25.063

```
DerivedClass derivedObj = new DerivedClass(); 
(derivedObj as BaseClass).Method1(); // cast to base class with method invoke 
```

# perl - 格式化 Perl 源代码时如何按键对哈希条目进行排序？

> ID：10104181
> 
> 赞同：2
> 
> 时间：2012-04-11T10:28:49.267
> 
> 标签：perl, code-formatting, perl-tidy

看着[perltidy](http://perltidy.sourceforge.net/perltidy.html)我没有看到这样的选择。有没有什么工具可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:43:55.043

我更喜欢“逻辑地”对我的键进行排序。'name' 和 'id' 之类的字段首先出现，有时在名称之后出现诸如 'long name' 或 'description' 之类的字段。

如果你需要做这样的事情，你可以使用带有 shell 工具的编辑器来

1.  将数据传递到 perl 程序
2.  评估选择
3.  使用[`Data::Dumper`](http://search.cpan.org/perldoc?Data%3a%3aDumper)和设置`$Data::Dumper::Sortkeys = 1;`
4.  然后做`Data::Dumper->Dump( [ $eval_hash ], [ '$VAR1' ] )`
5.  剥去前面的部分`s/\A[^=]+=\s+//`
6.  用输出替换选择

# javascript - Android 2.3.3 上的 touchmove 事件数量严重减少

> ID：10104187
> 
> 赞同：1
> 
> 时间：2012-04-11T10:29:10.967
> 
> 标签：javascript, android, events, mobile, swipe

我目前正在按照响应式设计+移动优先的方法重新设计网站。

我正在尝试在支持触摸的设备上使用 JS 检测滑动事件。为此，我使用以下代码：

```
document.addEventListener ('touchstart', function(event) {
    //Get initial finger coords
}, false);

document.addEventListener ('touchmove', function(event) {
    //Update final finger coords
}, false);

document.addEventListener ('touchend', function(event) {
    //Compare initial and final coords, trigger swipe events if necessary
}, false); 
```

我已经在 iPad 1、iPhone 4 和几台运行 Android 2.2.1 的设备上测试了这段代码，当我在屏幕上拖动手指时的结果是我所期望的：`touchmove`事件触发了几次（它很容易上升做长手势时到一百）。

当我在 Android 2.3.3 设备（我使用的是三星 Galaxy S2）上测试它时，问题就出现了。使用其原生浏览器，`touchmove`事件数量减少到只有 1 个（或很少 2 个）。

我做错了什么还是应该表现得像那样？有没有人发现同样的问题？`touchmove`我无法在此版本的 Andriod 中找到有关事件行为的文档。

您可以在这里测试它（使用支持触摸的设备）：http: [//jsfiddle.net/xs5BG/embedded/result/](http://jsfiddle.net/xs5BG/embedded/result/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:02:09.640

滚动开始工作后，galaxy S2 似乎没有触发 touchmove。如果您执行 preventDefault 它会按预期触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:53:37.873

用我的 HTC Desire Z（运行 2.3.3）测试你的 jsFiddle 示例，我得到的不仅仅是一个 touchmove 事件——如所愿。所以我无法重现您使用此设备的实际问题，尽管在相同的 API 级别:( 有趣的是，您的代码还显示了我在当前项目中遇到的问题：第一个 touchmove 事件似乎有某种阈值：

放下手指并且只移动一点点就会产生 0 个 touchmove 事件……一旦超过阈值，它将以毫秒为间隔触发 touchmove 事件，因为它会识别移动的每个像素距离（就像它应该做的那样）。也许这可能与您的现象有关，您是否也在您的 2.3.3 设备上看到了这一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T08:20:54.683

在许多 Android 版本上，如果您在 touchstart 上不阻止默认设置，Android 设备将进入默认滚动模式并停止向 webview 发送触摸事件。所以你需要

```
document.addEventListener ('touchstart', function(event) {
    event.preventDefault();
}, false); 
```

现在所有的触摸事件都将触发，但默认滚动将被禁用。

有一个垫片可以克服这个问题，它模拟滑动手势[https://github.com/TNT-RoX/android-swipe-shim](https://github.com/TNT-RoX/android-swipe-shim)

# c++ - 多维数组结构的C++对齐

> ID：10104190
> 
> 赞同：5
> 
> 时间：2012-04-11T10:29:35.933
> 
> 标签：c++, data-structures, multidimensional-array, memory-alignment

在我的代码中，我必须考虑一个数组数组，其中内部数组具有固定维度。为了利用 STL 算法，将数据实际存储为数组数组很有用，但我还需要将该数据传递给 C 库，该库采用扁平的 C 样式数组。

如果能够以可移植的方式廉价地转换（即展平）多维数组，那就太好了。我将坚持一个非常简单的案例，真正的问题更普遍。

```
struct my_inner_array { int data[3]; };
std::vector<my_inner_array> x(15); 
```

是

```
&(x[0].data[0]) 
```

指向大小为 45*sizeof(int) 的连续内存块的指针，其中包含与 x 相同的条目？还是我必须担心对齐？恐怕这对我有用（至少对于某些数据类型和内部数组大小），但它不可移植。

1.  此代码是否可移植？
2.  如果没有，有没有办法让它工作？
3.  如果没有，您对我能做什么有什么建议吗？
4.  如果 my_inner_array 不是 POD 结构，但包含一些方法（只要该类不包含任何虚拟方法），它是否会改变任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:38:09.337

1 理论上没有。编译器可能决定向 my_inner_array 添加填充。在实践中，我看不出编译器为什么会向其中包含数组的结构添加填充。在这种情况下，创建此类结构的数组不存在对齐问题。您可以使用编译时断言：

```
typedef int my_inner_array_array[3];
BOOST_STATIC_ASSERT(sizeof(my_inner_array) == sizeof(my_inner_array_array)); 
```

4 如果没有虚拟方法，它不应该有任何区别。

# xml - 使用 DTD 指定具有自由格式元素的 xml 文件

> ID：10104192
> 
> 赞同：0
> 
> 时间：2012-04-11T10:29:40.090
> 
> 标签：xml, dtd

我有一个为大部分文件指定的 xml 文件。只有一个元素没有规范，可以包含任意 xml 元素。

这是此 xml 的示例：

```
<root_element>
  <specified_element>
     <empty_child_node/> 
  </specified_element>
  <element_with_free_form>
    <what><ever><xml><which><is><valid><xml>
    </xml></valid></is></which></xml></ever></what>
  </element_with_free_form>
</root_element> 
```

我对 DTD 的理解是，这应该是此类 xml 的有效规范：

```
<?xml version="1.0" encoding="utf-8"?>
<!ELEMENT root_element (specified_element, element_with_free_form)>
<!ELEMENT specified_element (empty_child_node)>
<!ELEMENT empty_child_node EMPTY>
<!ELEMENT element_with_free_form ANY> 
```

这是嵌入了 DTD 的完整 xml 文档：

```
<!DOCTYPE root_element [
<!ELEMENT root_element (specified_element, element_with_free_form)>
<!ELEMENT specified_element (empty_child_node)>
<!ELEMENT empty_child_node EMPTY>
<!ELEMENT element_with_free_form ANY>
]>
<root_element>
  <specified_element>
     <empty_child_node/> 
  </specified_element>
  <element_with_free_form>
    <what><ever><xml><which><valid><xml>
    </xml></valid></which></xml></ever></what>
  </element_with_free_form>
</root_element> 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:07:07.873

As DevNull has already said, the `ANY` keyword means the element being declared can contain a mixture of `#PCDATA` and any element declared in the DTD.

If you want to declare that `element_with_free_form` can contain any well-balanced XML, then DTDs are not quite the right schema language for you. XSD can declare such elements, as well as supporting some other variations like "I don't care what the structure is, but the children must all have been declared" (which is the same functionality as `ANY`) and "If you have a declaration for it, validate it, and if you don't have a declaration for it, let it ride" (which is a good first approximation to the "ignore what you don't understand" principle of HTML).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:13:11.867

即使`element_with_free_form`被声明为`ANY`，其中的任何元素也必须被声明。这意味着您还需要声明`what`, `ever`, `xml`,`which`和`valid`.

# ios - iOS 分发证书过期 - 即席应用

> ID：10104195
> 
> 赞同：1
> 
> 时间：2012-04-11T10:29:49.967
> 
> 标签：ios, certificate, distribution, adhoc

我为 iPad 开发了一个应用程序，该应用程序由一个人使用（从未发布到应用程序商店），它是临时交付的。

仅供个人使用，非商业用途。当证书在几周后到期时，此人（当然）会收到“证书到期”警告。有没有办法在不使用企业开发者帐户的情况下解决临时应用程序的问题？我们只有 1 个用户 - 但应用程序继续为他工作很重要。我们是否需要创建新证书、重建应用程序并向他发送新的 IPA？有什么好主意可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:35:09.503

您无需重新构建应用程序，只需使用新证书从现有存档中创建新的 IPA。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-11T10:33:41.863

我想问苹果将是一个很好的起点。至少你会知道在尝试其他解决方法之前你是否可以合法地这样做 [https://developer.apple.com/contact/#technical](https://developer.apple.com/contact/#technical)

# c# - 如何在 Windows 窗体中自定义选项卡控件，如 Dropbox 的偏好？

> ID：10104196
> 
> 赞同：0
> 
> 时间：2012-04-11T10:29:58.507
> 
> 标签：c#, winforms

我想以 Windows 形式自定义 tabcontrol，例如 Dropbox 的偏好。 ![在此处输入图像描述](../Images/2805c7e453c09ca59059bdfdc4f35cf7.png)

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:39:10.633

你不应该为此使用winforms，看看WPF，你应该能够通过创建自己的风格来实现这一点。

[http://msdn.microsoft.com/en-us/library/ms754130.aspx](http://msdn.microsoft.com/en-us/library/ms754130.aspx)

[http://wpftutorial.net/Styles.html](http://wpftutorial.net/Styles.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:03:06.973

您可以使用`TabControl.ImageList` [属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.imagelist.aspx)。您将能够将图像添加到每个选项卡。但我不确定您是否能够获得与屏幕截图所示完全相同的结果。如果不是，并且结果不可接受，您可以使用面板和图片框 - 当用户单击适当的图片框时，您可以隐藏/显示每个面板。

[编辑] 您也可以自己绘制标签，但这需要很多额外的工作。

# java - jUnit中void方法和线程的单元测试

> ID：10104205
> 
> 赞同：3
> 
> 时间：2012-04-11T10:30:20.323
> 
> 标签：java, unit-testing, testing, junit

我是单元测试的新手。我了解它的原理，但我仍然不知道如何测试我当前的项目。我需要测试 void 方法，使用 java.nio.SocketChannel 操作。这些方法是：
- initSelector，我打开选择器，绑定新的 ServerSocketChannel 并注册它
- 读取，它读取数据并将其放入队列（我是否应该编写额外的方法来验证，如果该数据确实存在于队列中？情况下，我应该为这些方法编写测试吗？）
- write 方法，它从队列中获取数据并将其写入 SocketChannel

我可以测试这些方法是否不抛出 IOException，但是还有什么？
我应该如何测试线程的 run() 方法？还是不是单元测试，而是系统或其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:35:29.447

因此，首先，如果您在单元测试中使用实数`SocketChannel`，则它不是单元测试。您应该`Mockito`为`SocketChannel`. 这样做将允许您向被测方法提供受控的字节流，并验证将哪些字节传递给通道。

如果您的类正在创建 的实例`SocketChannel`，请考虑将类更改为接受`SocketChannelFactory`. 然后你可以注入一个`SocketChannelFactory`返回模拟的`SocketChannel`模拟。

您可以`run()`直接在单元测试中调用。

[模拟链接](http://code.google.com/p/mockito/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:39:15.720

基本上，您有两种可能性：

*   如果你想对这些方法进行彻底的单元测试，你应该将具体的（硬件依赖组件，如套接字等）隐藏在可[模拟](http://en.wikipedia.org/wiki/Mock_object)接口后面，并在单元测试中使用模拟来验证对这些对象进行了具有预期参数的预期调用
*   或者您可以使用整个组件/应用程序中的真实套接字编写集成/系统测试，以验证是否打开了正确的套接字、正确传输数据等。

理想情况下，您应该两者都做，但在现实世界中，单元测试可能并不总是可行的。特别是对于这样的低级方法，它们依赖于一些外部软件/硬件组件，如套接字、数据库、文件系统等。那么最好的方法是在这些方法/层中留下尽可能少的逻辑（因此尽可能少的失败可能性）可能，并将逻辑抽象到更高层，设计为可单元测试（使用如上所述的可模拟接口）。

要测试线程，您可以`run()`像往常一样从单元测试中获取它们。然后很可能您需要等待一段时间才能尝试获取并验证线程产生的结果。

同样，如果您将任务的实际逻辑抽象为例如 a [`Callable`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)or [`Runnable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)，则可以更轻松地对其进行单独的单元测试。这也使您能够使用[Executor 框架](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)（现在或以后），这使得处理并发更加容易和安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:41:15.203

run() 是一个和其他方法一样的方法，所以你应该能够从单元测试中调用它（当然取决于它是否在无限循环中运行 - 那么你可能想要测试 run() 正在调用的方法）。
对于 SocketChannel，我想说你不想测试 SocketChannel 本身；你想测试你的代码如何与给定一组启动条件的 SocketChannel 交互。
所以你可以考虑为它创建一个模拟，并让你的代码与模拟对话。这样您就可以验证您的代码是否以您期望的方式（read()、write() 等）与通道交互。
例如，查看[http://code.google.com/p/powermock/](http://code.google.com/p/powermock/)。

# c# - 仅在必要时加载对象

> ID：10104206
> 
> 赞同：0
> 
> 时间：2012-04-11T10:30:20.797
> 
> 标签：c#, nhibernate, hibernate-mapping

我有一个 Slab 对象的映射，它具有对对象和 SlabPDO SlabInstructions 的映射引用。我想做选择，总是携带对象 SlabPDO 并仅在必要时加载 SlabInstructions。有没有办法做到这一点？下面是一个映射示例：

```
<id name="Id" column="Id_Slab" type="Int64">
  <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
</id>

<property name="Mill" column="Mill" type="String" length="2" not-null="true" />

<property name="SlabId" column="Slab_Id" type="String" length="20" not-null="true" />

<property name="PieceId" column="Piece_Id" type="String" length="20" not-null="true" />

<one-to-one name="SlabPDO" class="SlabPDO" cascade="all" fetch="join"/>

<set name="SlabInstructions" generic="true" inverse="true" lazy="false" cascade="all" fetch="join">
  <key column="Id_Slab" />
  <one-to-many class="SlabInstruction"/>
</set> 
```

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:38:37.090

关于这两个映射属性`lazy="true"` `fetch="select"`，请参阅文档[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching)

这是你的解决方案

```
<set name="SlabInstructions" generic="true" inverse="true" lazy="true" cascade="all"
  fetch="select">
  <key column="Id_Slab" />
  <one-to-many class="SlabInstruction"/>
</set> 
```

# xcode - Xcode 设置：架构与有效架构

> ID：10104208
> 
> 赞同：8
> 
> 时间：2012-04-11T10:30:24.767
> 
> 标签：xcode, macos, xcode4.2

我正在查看 Sparkle 项目的配置，并注意到它们设置了：

*   架构 = ppc i386 x86_64
*   有效架构 = i386 x86_64

苹果的有效架构描述：

> 以空格分隔的标识符列表。指定可以为其构建二进制文件的体系结构。在构建期间，此列表与 ARCHS 构建设置的值相交；结果列表指定了二进制文件可以运行的架构。如果生成的架构列表为空，则目标不会生成二进制文件。

那么，如果它无论如何都不会在 ppc 上运行，为什么要设置与有效架构不同的架构呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:02:32.890

当设置为“构建机器的本机架构”时，您可能需要指定您的应用程序在哪些架构上运行。

例如，如果您的应用程序还没有为 64 位环境做好准备（它可能会编译，但会崩溃），您将有效的体系结构设置为 32 位，因此它甚至不会构建 64 位部分在 64 位计算机上。

至于您的 Sparkle 问题 - 您需要询问 Sparkle 开发人员，但我敢打赌，这只是 PPC 仍被广泛使用的日子的价值。

# uitextview - 获取异常'NSRangeException'

> ID：10104212
> 
> 赞同：3
> 
> 时间：2012-04-11T10:30:37.890
> 
> 标签：uitextview, nsexception

我在下面的方法中得到了 substringWithRange:range 的异常。

我正在禁用编辑的文本视图。

我仅将文本字段用于文本选择。当我第一次选择文本时也不例外，但是当我第二次按下它时。

异常：'NSRangeException'，原因：' *** -[NSCFString substringWithRange:]：范围或索引超出范围'。

```
- (void)textViewDidChangeSelection:(UITextView *)textView {

NSRange range = [tv selectedRange];
str = [tv.text substringWithRange:range];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:40:26.423

我检查了你的例子。有时您检索一个未定义的范围，例如 (2147483647, 0)。因此，请检查它以避免崩溃：

```
- (void)textViewDidChangeSelection:(UITextView *)textView {
    NSRange range = [textView selectedRange];
    if(range.length == 0 || range.location > textView.text.length)
        return;

    NSString *str = [textView.text substringWithRange:range];
} 
```

# blackberry - 无法在黑莓的水平管理器中一个接一个地显示同一时间的事件

> ID：10104219
> 
> 赞同：1
> 
> 时间：2012-04-11T10:30:59.147
> 
> 标签：blackberry

我正在尝试从 Blackberry Calendar 获取事件。我试图显示同时发生的事件一个接一个

```
8:00 e1
8:00 e2 
```

与本机日历一样

但是以下代码将输出显示为

```
8:00 e1 e2 
```

在我的代码中，我在单个 vfm 中添加了 24 个 hfm。

```
int size1 = 2;
horizontalFieldManager_left22 = new  HorizontalFieldManager[size1];
for (int y = 0; y < size1; y++) {
horizontalFieldManager_left22[y] = new  HorizontalFieldManager() {
protected boolean navigationClick(int status, int time) {
Field field = getFieldWithFocus();
Vector data = getData(listEvent);
String  currentData = desc22.getText();
String  currentTime = time22.getText();
 if  (currentData != null && currentData != "") {
         UiApplication.getUiApplication().pushScreen(new EventScreen(data,currentData,currentTime));
            }
    return super.navigationClick(status, time);
        }

    protected boolean keyChar  (char key, int status, int time) {
    Field field = getFieldWithFocus();

     return
     super.keyChar(key, status, time);
          }
   };

   int size = eventVector7.size();
   LabelField[] labelField = new
   LabelField[size];
   for (int x = 0; x < eventVector7.size(); x++) {
   labelField[x] = new
   LabelField("", Field.FOCUSABLE);
   String data = (String)
   eventVector7.elementAt(x);
   labelField[x].setText(data);
  horizontalFieldManager_left22[y].add(time22);

  horizontalFieldManager_left22[y].add(min22);

  horizontalFieldManager_left22[y].add(new LabelField(" "));

  horizontalFieldManager_left22[y].add(labelField[x]);

        }

   }
 for (int z = 0; z < size1; z++) {
       vfm.add(horizontalFieldManager_left22 [z]);
       vfm.add(new SeparatorField());
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:47:47.027

```
import java.util.Hashtable;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class ListAllEvents extends MainScreen {

// -----------------------------------------------------------------

VerticalFieldManager mainManager;

VerticalFieldManager listVFM;
HorizontalFieldManager rowHFM[];

int row_height;

LabelField[] eventTimeLabel;
LabelField[] eventNameLabel;

public ListAllEvents() {

    createUI();

    createEventHashtable();

}

// -------------- Create UI --------------------------------

public void createUI() {

    mainManager = new VerticalFieldManager(
            VerticalFieldManager.VERTICAL_SCROLL
                    | VerticalFieldManager.VERTICAL_SCROLLBAR
                    | VerticalFieldManager.USE_ALL_HEIGHT
                    | VerticalFieldManager.FIELD_LEFT | DrawStyle.LEFT) {

        protected void sublayout(int maxWidth, int maxHeight) {
            int displayWidth = Display.getWidth();
            int displayHeight = Display.getHeight();

            super.sublayout(displayWidth, displayHeight);
            setExtent(displayWidth, displayHeight);
        }

        public void paint(Graphics g) {
            g.setBackgroundColor(Color.WHITE);
            g.clear();
            super.paint(g);
        }
    };

    add(mainManager);

}

// ----------------------------Create List
// ----------------------------------------

public void createList(Hashtable eventHashtable) {

    listVFM = new VerticalFieldManager();

    rowHFM = new HorizontalFieldManager[eventHashtable.size()];

    eventTimeLabel = new LabelField[eventHashtable.size()];

    eventNameLabel = new LabelField[eventHashtable.size()];

    row_height = 90;

    int j = 0;
    int row_count = 0;

    if (eventHashtable.size() > 0) {

        EventItem ei = null;

        for (int i = 0; i < eventHashtable.size(); i++) {

            Object obj = eventHashtable.get(new Integer(i));

            final EventItem item = (EventItem) obj;

            if (item != null) {

                String str_event_time = item.event_time;
                String str_event_name = item.event_name;

                rowHFM[row_count] = new HorizontalFieldManager(
                        HorizontalFieldManager.USE_ALL_HEIGHT) {

                    protected void sublayout(int maxWidth, int maxHeight) {

                        int displayWidth = Display.getWidth();
                        int displayHeight = 80;

                        super.sublayout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }

                };

                rowHFM[row_count].setPadding(2, 2, 2, 2);

                eventTimeLabel[row_count] = new LabelField(str_event_time) {

                    protected void layout(int maxWidth, int maxHeight) {

                        int displayWidth = (int) (Display.getWidth() / 2);
                        int displayHeight = maxHeight;

                        super.layout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }

                };

                eventTimeLabel[row_count].setPadding(5, 0, 0, 2);

                eventNameLabel[row_count] = new LabelField(str_event_name) {

                    protected void layout(int maxWidth, int maxHeight) {

                        int displayWidth = (int) (Display.getWidth() / 2);
                        int displayHeight = maxHeight;

                        super.layout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }

                };

                eventNameLabel[row_count].setPadding(5, 0, 0, 2);

                rowHFM[row_count].add(eventTimeLabel[row_count]);

                rowHFM[row_count].add(eventNameLabel[row_count]);

                listVFM.add(rowHFM[row_count]);

            }

        }

    }
    listVFM.setPadding(5, 2, 5, 2);

    mainManager.add(listVFM);

}

public void createEventHashtable() {

    String event_time1 = "8:00";
    String event_time2 = "8:00";

    String event_name1 = "Event 1";
    String event_name2 = "Event 2";

    Hashtable eventHashtable = new Hashtable();

    eventHashtable.put(new Integer(0), new EventItem(event_time1,
            event_name1));
    eventHashtable.put(new Integer(1), new EventItem(event_time2,
            event_name2));

    createList(eventHashtable);
}

 }

public class EventItem {

String event_time;
String event_name;

public EventItem(String event_time, String event_name) {
    this.event_name = event_name;
    this.event_time = event_time;
}

 } 
```

# asp.net - 使用 System.Net.Mail 处理 Global.cs 错误

> ID：10104231
> 
> 赞同：1
> 
> 时间：2012-04-11T10:32:01.643
> 
> 标签：asp.net, error-handling, http-status-code-404, global, system.net.mail

我正在使用 Global 类中的 Application_Error 来处理 404。

一旦 404 被捕获，我会发送一封电子邮件以记录它。为此，我调用一个静态方法来编写错误。

```
ErrorHandler.WriteError(Exception ex) 
```

在这个方法中，我创建了我的**EmailHandler**的一个新实例，以初始化**System.Net.Mail**类。在我的**EmailHandler**对象中，我有一个私人成员

```
private MailMessage m_mail = null; 
```

在**EmailHandler**类的构造函数中，我创建了一个新的**MailMesage**实例以构造电子邮件。

```
public EmailHandler()
{
   m_mail = new MailMessage(); 
} 
```

此时我收到以下错误。

```
System.Security.Cryptography.CryptographicException
"The handle is invalid." 
```

我需要指出，这只发生在请求仅针对特定文件（例如**www.mysite.com/random-incorrect-image.jpg**）时。

当我请求像**www.mysite.com/random-incorrect-page.aspx**这样的页面时，它**不会发生**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:31:04.527

也许您应该对静态文件 404 尝试以下操作：

在 web.config 中配置自定义 404

```
<system.webServer>
  <httpErrors>
    <remove statusCode="404" subStatusCode="-1" />
    <error statusCode="404" prefixLanguageFilePath="" path="/yourpath/yourcustom404.aspx" responseMode="ExecuteURL" />
  </httpErrors> 
```

静态文件的 404 重定向将发生在[http://www.mysite.com/yourpath/yourcustom404.aspx?404;http://www.mysite.com/random-incorrect-image.jpg](http://www.mysite.com/yourpath/yourcustom404.aspx?404;http://www.mysite.com/random-incorrect-image.jpg)

然后你可以处理queryString来提取custom404.aspx的pageLoad中的url，发送你的email，并显示一条友好的消息

您可以对 aspx 页面执行相同的操作。在您的 web.config 中：

```
 <customErrors mode="On">
    <error statusCode="404" redirect="/yourpath/yourcustom404.aspx" />       
</customErrors> 
```

重定向会略有不同：

[http://www.mysite.com/yourpath/yourcustom404.aspx?aspxerrorpath=/random-incorrect-page.aspx](http://www.mysite.com/yourpath/yourcustom404.aspx?aspxerrorpath=/random-incorrect-page.aspx)**

# android - Hudson/Jenkins 上的 Android Logcat 文件

> ID：10104233
> 
> 赞同：1
> 
> 时间：2012-04-11T10:32:02.450
> 
> 标签：android, hudson, jenkins, emulation, logcat

我们正在使用 Hudson 进行带有 Android 模拟器插件的 Android 项目的 CI，以在模拟器上运行 UI 测试。一个 git 项目提供源代码。

现在我看到在 git repo 中，每个构建都会创建一个 logcat 文件并将其放入 git 项目文件夹中，然后将其推回 git。由于我们期待大量构建，这很容易向项目文件夹发送垃圾邮件。有谁知道是否可以为模拟器日志设置目标文件夹？我无法在任何地方的模拟器插件或 Hudson 中找到任何选项。

logcat 文件名为 logcat_[some_number].log。

最好的问候，金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:34:41.570

升级到[插件的 2.0 版](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin#AndroidEmulatorPlugin-Version2.0%28December26%2C2011%29)（或更高版本），您会看到这些 logcat 文件现在被写入临时目录，而不是您的工作区。

如果您使用的是 Hudson，您可能只能在更新中心看到非常旧的 1.6 版本。
这只是[升级到 Jenkins](https://stackoverflow.com/a/4974032/234938)的另一个原因！:)

但是，如果您无法升级插件或 Jenkins（出于某种奇怪的原因），只需使用“执行 shell”步骤`logcat_*.log`在每次构建开始时删除所有文件。
无论如何，这些文件纯粹是临时文件，并且可能只在构建失败后才存在于您的工作区中——否则 logcat 输出将自动存档为`logcat.txt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:45:25.233

添加一个 ant 任务来重命名 logcat 文件以方便您并删除最旧的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:51:25.253

如果要将日志从存储库中排除，请将它们添加到 .gitignore 文件中。

# ruby-on-rails - 链接到每个中的嵌套资源

> ID：10104237
> 
> 赞同：0
> 
> 时间：2012-04-11T10:32:23.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, routes, nested-resources

我有一个由各种 ActiveRecord 对象组成的数组，它们是不同模型的对象。其中一个被称为`Team`嵌套资源`Department`：

```
resources :departments do
  resources :teams
end 
```

所以当我`array.each`像这样使用它时：

```
array.each do |element|
  link_to element.name, element
end 
```

它会抛出一个错误，`team_path`由于嵌套的资源调用了路由，所以它不存在什么逻辑，`department_team_path`但我不能绝对调用此方法，因为我也在 this 中处理其他模型的 Objets `each`。

我看到的一种可能性是添加一个名为 team_path 的路由，它指的是 Team#Show，但这并不漂亮，而且对 SEO 也不利。在一个课程中链接到这个模型和其他模型是否还有另一种更好的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:44:00.160

```
array.each do |element|
  if element.is_a?(Team)
   link_to element.name, url_for([element.department, element])
  else
    link_to element.name, element
  end
end 
```

根据[Rails 指南](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)。或者，您可以使用`resources :departments, :shallow => true`但就像您提到的那样会给 SEO 带来不良结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:47:28.710

试试这个： `link_to element.name, url_for(element)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:52:18.030

我编写了自己的方法来处理这个问题。它们位于`ApplicationHeler`

```
def nested_name(object)
    routes = Rails.application.routes.named_routes.to_a
    name = nil
    routes.each do |r|
      name = r[0].to_s if r[1].requirements[:controller] == object.class.to_s.downcase.pluralize && r[1].requirements[:action] == "show"
    end
    name
  end

def nested_object(object)
  name = nested_name(object)
  parent = name.gsub("_", "").gsub(object.class.to_s.downcase, "")
  if object.class.reflect_on_association(parent.to_sym)
    return [object.send(parent), object]
  else
    return object
  end
end 
```

所以我可以做到以下几点：

```
array.each do |element|
  link_to element.name, nested_object(element)
end 
```

现在对我来说效果很好，...

# java - Eclipse：如何以编程方式执行启动配置？

> ID：10104238
> 
> 赞同：5
> 
> 时间：2012-04-11T10:32:26.523
> 
> 标签：java, eclipse, eclipse-plugin

我的 Eclipse 项目中有各种启动配置文件。有什么办法可以以编程方式执行任意启动配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-19T17:56:22.203

```
 ILaunchManager manager = DebugPlugin.getDefault().getLaunchManager();

       ILaunchConfigurationType type =     manager.getLaunchConfigurationType("org.eclipse.cdt.launch.applicationLaunchType");
       ILaunchConfiguration[] lcs = manager.getLaunchConfigurations(type);

            for (ILaunchConfiguration iLaunchConfiguration : lcs) {
                if (iLaunchConfiguration.getName().equals("Test PThread")) {
                    ILaunchConfigurationWorkingCopy t = iLaunchConfiguration.getWorkingCopy();
                    ILaunchConfiguration config = t.doSave();
                    if (config != null) {
                        // config.launch(ILaunchManager.RUN_MODE, null);
                        DebugUITools.launch(config, ILaunchManager.DEBUG_MODE);
                    }
                }
            } 
```

# bluetooth - 蓝牙硬件信息

> ID：10104242
> 
> 赞同：1
> 
> 时间：2012-04-11T10:32:41.910
> 
> 标签：bluetooth

使用 Android，有没有办法知道哪个是硬件制造商以及有关我正在使用的设备的蓝牙硬件的更多详细信息？我的蓝牙应用程序使用不同的设备（智能手机 LG 和索尼平板电脑）有不同的行为，我想进去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:18:20.823

是的，Android BT 堆栈基于 bluez。您可以使用 hciconfig 与硬件设备交互并获取有关确切功能和制造商的信息。这是描述此内容的链接：[https ://sites.google.com/a/android.com/opensource/projects/bluetooth-faq](https://sites.google.com/a/android.com/opensource/projects/bluetooth-faq)

# java - Tomcat创建的目录在服务器上有不同的所有者和组

> ID：10104243
> 
> 赞同：2
> 
> 时间：2012-04-11T10:32:47.343
> 
> 标签：java, linux, tomcat, mkdir

我有一个简单的 JSP 页面，它在 centOS 服务器根目录上创建一个目录

```
 <% File f= new File("/test/testdir");

if(f.mkdir()){

  %> 
```

生成一个**.WAR**文件并部署在服务器上。当我运行这段代码时。创建的目录 ***testdir***具有以下属性。它应该有**tomcat**作为所有者。**tomcat**是我服务器上的用户，tomcat 是**tgroup**组的成员。

我需要目录应该有所有者作为**tomcat**和组作为**tgroup** ![在此处输入图像描述](../Images/32405c4cd00330876f7a9364c9afed13.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:34:50.233

也许您正在使用 root 用户运行 tomcat。更改您用于运行 tomcat 进程的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:57:47.537

您的 Tomcat 进程以 root 身份运行（这不是一件好事）。由于您已经有一个单独的`tomcat`用户设置，请完成始终以该用户身份运行 Tomcat 的过程：

假设：

1.  安装目录是 /opt/tomcat （替换为您的值）
2.  启动脚本是 /etc/init.d/tomcat （修改以反映您的启动脚本）

```
 sudo /etc/init.d/tomcat stop
    sudo chown -R tomcat:tgroup /opt/tomcat
    sudo -u tomcat /etc/init.d/tomcat start 
```

您可以选择硬编码用户以在启动脚本中运行，如果您将 Tomcat 设置为在启动时运行，这将是有益的。

# local - 在 android 3.x 中打开-local-html-file-with-android-browser

> ID：10104244
> 
> 赞同：4
> 
> 时间：2012-04-11T10:33:04.673
> 
> 标签：local, file-browser

使用 android 2.xi 可以使用该解决方案

```
browserIntent.setClassName("com.android.browser", "com.android.browser.BrowserActivity") 
```

在帖子中解决：

[使用 Android 浏览器打开本地 html 文件](https://stackoverflow.com/questions/7293786/opening-local-html-file-with-android-browser)

但是使用 android 3.2 我有这个错误：

```
Unable to find explicit activity class 
(com.android.browser/com.android.browser.BrowserActivity); 
have you declared this activity in your AndroidManifest.xml? 
```

我认为该类`com.android.browser.BrowserActivity`在 Android 3.x 中不存在

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T02:59:07.520

不是一个令人满意的解决方案，但在一个演示应用程序中，我替代地使用了以下代码：

```
String url = "content://com.android.htmlfileprovider/sdcard/mydir/myfile.html";
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(url), "text/html");
startActivity(intent); 
```

通常至少有两个作品中的一个。

[https://github.com/nicolas-raoul/OxygenGuide-Android/blob/master/src/org/github/OxygenGuide/MainActivity.java#L69](https://github.com/nicolas-raoul/OxygenGuide-Android/blob/master/src/org/github/OxygenGuide/MainActivity.java#L69)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T10:48:05.030

```
intent.setClassName("com.android.browser", "com.android.browser.BrowserActivity") 
```

将打开任何具有包名“com.android.browser”的应用程序。使用它的问题是，在各种版本的 android 和各种制造商中，默认浏览器会发生变化。例如，Nexus 设备往往预装了 chrome 应用程序，该应用程序具有不同的包名称。

```
Unable to find explicit activity class 
(com.android.browser/com.android.browser.BrowserActivity); 
have you declared this activity in your AndroidManifest.xml? 
```

您复制的错误说明没有具有该包名称的应用程序 browserIntent.setClassName() 用于显式打开特定应用程序，这意味着它不应提供询问您要使用哪个浏览器的提示。

如果这是您想要避免的（弹出），那么您可以检查设备上的浏览器，并可能建议在链接可点击之前下载它。

您也可以使用其他建议中的代码。

```
String url = "content://com.android.htmlfileprovider/sdcard/mydir/myfile.html";
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(url), "text/html");
startActivity(intent); 
```

这指定您要打开一个可以处理“text/html”类型数据的活动。通过查看。这将为您提供一个应用程序列表（不同安装的浏览器）供您选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T20:17:42.303

```
Uri uri = Uri.parse(url);
Intent browserIntent = new Intent(Intent.ACTION_VIEW);
browserIntent.setDataAndType(uri, "text/html");
browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
startActivity(browserIntent); 
```

# python - 使用 Python 和 NumPy 组合数组

> ID：10104245
> 
> 赞同：2
> 
> 时间：2012-04-11T10:33:06.133
> 
> 标签：python, arrays, numpy

我有两个形式的数组：

```
a = np.array([1,2,3])
b = np.array([4,5,6]) 
```

是否有一个 NumPy 函数可以应用于这些数组以获得后续输出？

```
[[1,4],[2,5][3,6]] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T10:37:24.593

```
np.vstack((a,b)).T 
```

返回

```
array([[1, 4],
       [2, 5],
       [3, 6]]) 
```

和

```
np.vstack((a,b)).T.tolist() 
```

准确返回您需要的内容：

```
[[1, 4], [2, 5], [3, 6]] 
```

# python - 如何进行部分回车

> ID：10104249
> 
> 赞同：0
> 
> 时间：2012-04-11T10:33:23.813
> 
> 标签：python

我想替换我的 Python 脚本的 cmd 输出，而不覆盖该行的前三个字符。这就是我的意思：

我想要它：

```
>>>ID1 downloading
>>>ID1 converting
>>>ID1 finished 
```

与`/r`：

```
>>>ID0 downloading
>>>converting
>>>finished 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:40:59.240

这根本不是一个 Python 问题。这是一个标准输出问题。

标准输出不是这样工作的。最简单的事情就是重写“ID1”。

否则，您将需要转向更高级的东西：特定于控制台的格式化命令（如 ANSI），或类似`curses`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:51:41.557

试试这个。但这可能不适用于 IDLE。

```
from time import sleep
from sys import stdout
stdout.write("\r%s" % "ID1 downloading")
stdout.flush()
sleep(1)
stdout.write("\r%s" % "ID1 converting ")
stdout.flush()
sleep(1)
stdout.write("\r%s" % "ID1 done       ")
stdout.write("\r  \r\n") # clean up 
```

# codeblocks - Code::Blocks 找不到函数声明或定义

> ID：10104250
> 
> 赞同：2
> 
> 时间：2012-04-11T10:33:24.580
> 
> 标签：codeblocks

代码块在我的项目中找不到某些函数的定义或声明。

问题：*有没有办法强制重新扫描源代码树？*

我相信所有相关文件都包含在项目中。（刚刚检查过：它无法按名称找到`struct`在打开的文件中声明的 a 。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-06T01:43:35.313

首先，让我给出几种方法来帮助 C::B 找到你的声明/定义。

虽然有些明显，但您应该确保函数位于以下文件中： 1) 项目本身的一部分（即它应该显示在项目-> 工作区窗口中）。如果您打算将它作为项目的一部分但它不存在，请转到项目->添加文件并添加文件。2) 如果您不希望/不需要该文件成为项目的一部分，但仍想访问声明/定义，则需要让项目经理知道在哪里可以找到该文件。您可以在项目->构建选项中执行此操作并设置搜索目录。设置搜索目录时要小心...您可以为整个项目或构建目标（调试或可执行文件）设置它。

注意：当您在 C::B 中打开多个项目时，会出现一个常见问题。即使你所有的项目都是“开放的”，也只有一个是“激活的”。因此，仅仅因为您打开了一个文件，并不意味着该文件是已激活项目的一部分。您可以进行搜索->打开文件”，如果文件打开但不在当前活动项目中，它将在文件中查找代码。

“重新扫描”的唯一方法是在更改源代码或项目设置后重新构建项目。您可能需要重新启动 C::B。如果你在做完上述操作后仍然找不到声明/定义，我建议你制作一个示例程序，看看它是否会找到声明/定义。如果是这样，那么您可以检查您的项目和示例项目之间的设置。在最坏的情况下，您可以将代码从项目复制到示例项目。如果这不起作用，您可以重新安装 C::B 并重试。不好玩，但有时它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:05:39.777

您可以尝试重新构建项目，但请确保至少一个其他文件包含结构的标头或确保标头和源文件包含在项目中。

# javascript - 使用 beforeCellEdit 事件防止 jqGrid 进入编辑单元格？

> ID：10104251
> 
> 赞同：2
> 
> 时间：2012-04-11T10:33:27.693
> 
> 标签：javascript, jquery, jqgrid

在捕捉事件 beforeCellEdit 时，是否有可能以某种方式阻止单元格进入编辑模式？

```
beforeEditCell: function (rowid, cellname, value, irow, icol) {
    if (cellname != 'aSpecificCol')
        return;

    var grid = $("#grid");

    if (aCondition == "something")
        grid.setColProp('aSpecificCol', { editable: false });
    else
        grid.setColProp('aSpecificCol', { editable: true });
 } 
```

事件触发，但列属性的设置似乎没有改变编辑模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T08:04:24.533

The method `beforeEditCell` will be called in the middle of the editing process. It exist mostly to make some initialization in the new created input or select element.

If you need prevent some cells from editing in the cell editing mode I cen suggest you either to set `"not-editable-cell"` class in the cell sometimes before (for example in `cellattr` or in `loadComplete`) or use `beforeSelectRow` to return `false` for some cells. It `beforeSelectRow` return false the cell will be not editing.

```
beforeSelectRow: function (rowid, e) {
    var $td = $(e.target).closest("td"), iCol = $.jgrid.getCellIndex($td[0]);
    if (/* test some rules here */) {
        return false; // prevent selection and so the editing of the cell
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:43:55.860

是的，您需要找到另一种选择，因为`beforeEditCell`仅提供一种在编辑单元格之前执行更多代码的方法。来自[`grid.celledit.js`](https://github.com/tonytomov/jqGrid/blob/master/js/grid.celledit.js)：

```
if ($.isFunction($t.p.beforeEditCell)) {
    $t.p.beforeEditCell.call($t, $t.rows[iRow].id,nm,tmp,iRow,iCol);
} 
```

但是，您似乎应该能够调用`restoreCell`以防止编辑模式：

> **恢复单元格**
> 
> iRow, iCol
> 
> 使用索引列 iCol 中的行索引 iRow（不要与 rowid 混合）恢复单元格的编辑内容

例如：

```
beforeEditCell: function (rowid, cellname, value, irow, icol) {
    var grid = $("#grid");
    if (cellname != 'aSpecificCol') {
        grid.jqGrid("restoreCell", irow, icol);
        return;
    } 
```

如果这不起作用，您可以尝试将此代码添加到`afterEditCell`事件中，这可能是更合适的位置。

# hadoop - 如何在 Sqoop 导出中使用自动增量 ID

> ID：10104260
> 
> 赞同：5
> 
> 时间：2012-04-11T10:33:43.620
> 
> 标签：hadoop, sqoop

我在 HDFS 中有一个制表符分隔的文本文件，并希望将其导出到 MySQL 表中。

由于文本文件中的行没有数字 ID，我如何导出到在 SQL INSERT（自动增量）期间自动设置 ID 的表中？

如果我尝试导出（id 是表中最后定义的属性），我得到

```
java.util.NoSuchElementException
  at java.util.AbstractList$Itr.next(AbstractList.java:350)
  at entity.__loadFromFields(entity.java:996) 
```

如果我采用自动生成的类并对其进行修改以排除 id 属性，我会得到

```
java.io.IOException: java.sql.SQLException: No value specified for parameter 27 
```

其中参数 27 是“id”。

版本是 Sqoop 1.3.0-cdh3u3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:10:52.073

In Sqoop 1.4.1, **writing a "null"** in the text file field position corresponding to the autoincrement field worked for me. After exported to mySQL you will see an incremented and automatically asigned ID.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:15:53.317

As somebody on the Sqoop mailinglist suggested:

*   Create a temporary table without the ID
*   Sqoop-export into this table
*   Copy the rows of this table into the final table (that has the autoincrement ID)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T17:50:56.343

我的源表在 HIVE 中。对我有用的是我添加了一个名为 id int 的列，并将该列填充为 NULL。在 sqoop 之后，mysql 将接收插入 (id, X, Y) 值 (null, "x_value, "y_value")。然后 mysql 知道将 id 填充为自动增量。

# python - 绘画程序框架

> ID：10104261
> 
> 赞同：1
> 
> 时间：2012-04-11T10:33:45.977
> 
> 标签：python, linux, qt, gtk

我决定开始做一个个人项目，尝试开发一个跨平台的、类似 MSPaint 的应用程序。奇怪的是，我发现 mspaint 是我在 Linux 或 OS X 上最想念的应用程序之一，所以我想尝试制作类似的东西。Tuxpaint、mtpaint、gpaint 等都是旧的、不活跃的、丑陋的。我不想做 GIMP，只做基础，在功能上类似于 MS Paint。

我正在考虑使用 pygtk 工具包在 python 中执行此操作，但我很想听听您的建议。C/C++ 会是更好的选择，还是单声道的 C#（喘气！）？如何使用 Qt 而不是 GTK，或者我不知道的其他一些花哨的库（请不要使用 FLTK！）。我很想听听你的想法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:37:45.263

Qt 的画布对象（或其更新的替代品 QGraphicsView）可以做一些很酷的事情。选择 C++ 还是 python 是个人选择的问题，因为两种语言都支持 Qt。对于像这样的简单项目，我会选择 python，因为杀手级性能不是什么大问题，而且它更容易编写。

要研究的另一件事是使用 HTML5 的画布对象和 Javascript 使这个应用程序基于 Web。它可以非常强大，在大多数情况下，任何可以放在云上的东西都是一种胜利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:47:57.190

if you are using qt,you can use [QtitanRibbon](http://qt-project.org/forums/viewthread/4214)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:43:23.417

如果您决定使用 Python（这是我的选择，因为它是如此简单的语言），那么 TkInter 被认为是[事实上的标准 GUI 包](http://wiki.python.org/moin/TkInter)。该链接应该会向您发送一些关于 TkInter 的优秀入门参考资料，尽管我也非常喜欢 Not_a_Golfer 对 HTML5 网络应用程序的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:02:37.787

简短：您可以同时使用两者，没有第三方库保证与所有主要发行版一起分发。

长：

Gtk+ 与 Qt

*   你想在你的应用程序中加入什么。如果只是选择画笔，选择颜色，您几乎可以使用任何 gui 工具包。

*   如果你打算将它作为基于 Web 的工具运行，Gtk+ 有一个 html5 后端渲染器（我不了解 Qt）

旁注：我建议使用工具包的本机编程语言（gtk+ C、Qt C++）——如果你不这样做，你会受到错误修复的延迟、通常更多的错误和延迟发布，尽管在这种情况下它不应该真的事情。

**其他一切都归结为个人喜好，并且已经存在一些解决该问题的问题。**

# javascript - Android WebView - Javascript 不会触发回调函数

> ID：10104265
> 
> 赞同：2
> 
> 时间：2012-04-11T10:34:00.850
> 
> 标签：javascript, android, android-webview

我是 Android 新手，正在尝试设置 Android Webview 以加载 javascript 函数并将结果返回给回调函数。

请参阅下面的代码

```
public class AWebViewActivity extends Activity {

    /**
     * Defines an Interface to call Syntax Highlighting Javascript and return the result
     * to a string by calling the call back function.
     */
     public class JavaScriptInterface {
         Context mContext;
         JavaScriptInterface(Context c) {
             mContext = c;
         }

         //add other interface methods to be called from JavaScript
         // This annotation is required in Jelly Bean and later:
         @JavascriptInterface
         public void receiveValueFromJs(String str) {
              //do something useful with str
              Toast.makeText(mContext, "Received Value from JS: " + str,Toast.LENGTH_LONG).show();
         }
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Try WebView
        WebView webView = (WebView) findViewById(R.id.editor_view);
        //webView.setWebChromeClient(new WebChromeClient());

        webView.getSettings().setJavaScriptEnabled(true);

        // RiNxX's suggestion
        webView.setWebViewClient(new WebViewClient(){
            @Override
            public void onPageFinished(WebView view, String url){
                view.loadUrl("javascript:getValue()");
            }
        });

        webView.addJavascriptInterface(new JavaScriptInterface(this), "MyAndroid");
        webView.loadUrl("file:///mnt/sdcard/a.html");

        //SystemClock.sleep(1000);
        //webView.loadUrl("javascript:getValue()");
    }
} 
```

HTML 文件如下所示：

```
<html>
    <head>
    </head>
    <body>
        <script type="text/javascript">
            function getValue()
            {
                var val="Amith Raravi";
                MyAndroid.receiveValueFromJs(val);
            }
        </script>
    Hey ya
    </body>
</html> 
```

我还添加了 INTERNET 权限作为 Manifest 元素的子元素。我浏览了 StackOverflow 上发布的其他问题，并将脚本移至 HTML 正文。

添加 RiNxX 建议的更改后，应用程序关闭（它不执行回调），我在 LogCat 中收到以下警告

```
JNI WARNING: jarray 0x405414e8 points to non-array object (Ljava/lang/String;)
I/dalvikvm(361): "WebViewCoreThread" prio=5 tid=9 NATIVE
I/dalvikvm(361):   | group="main" sCount=0 dsCount=0 obj=0x4051d580 self=0x29a1a8
I/dalvikvm(361):   | sysTid=370 nice=0 sched=0/0 cgrp=default handle=2728672
I/dalvikvm(361):   | schedstat=( 277421205 460097188 88 )
I/dalvikvm(361):   at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
I/dalvikvm(361):   at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
I/dalvikvm(361):   at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:246)
I/dalvikvm(361):   at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1570)
I/dalvikvm(361):   at android.webkit.WebViewCore.access$1400(WebViewCore.java:53)
I/dalvikvm(361):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:956)
I/dalvikvm(361):   at android.os.Handler.dispatchMessage(Handler.java:99)
I/dalvikvm(361):   at android.os.Looper.loop(Looper.java:123)
I/dalvikvm(361):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
I/dalvikvm(361):   at java.lang.Thread.run(Thread.java:1019)
E/dalvikvm(361): VM aborting 
```

我已经做了一天多了。任何帮助都将受到欢迎:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T19:35:03.287

显然，这是 2.3.3 模拟器中长期存在的错误。

请参阅以下链接。

[http://groups.google.com/group/android-developers/browse_thread/thread/992ca132e15745ec/da8da866d107e8b3?pli=1](http://groups.google.com/group/android-developers/browse_thread/thread/992ca132e15745ec/da8da866d107e8b3?pli=1)

目前正在下载 2.2 和 3.0 模拟器。

感谢您的所有帮助，以及伟大的论坛。

我会带着更多问题回来！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T08:56:55.313

我遇到了同样的问题，但是当我尝试从资产加载文件时工作正常：

```
webView.loadUrl("file:///android_asset/a.html"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:40:14.067

添加页面加载时调用javascript接口的webview客户端

```
webview.setWebViewClient(new WebViewClient() {
@Override    
public void onPageFinished(WebView view, String url) {    
   view.loadUrl("javascript:getValue()");    
}   
webview.loadUrl(SOME_WEBPAGE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:54:29.227

从android webview调用的java脚本

```
webView.loadUrl("javascript:setDatePickervalue(\""
                        + pselSelectedDateProp.getFormatedDate() + "\")"); 
```

Java 脚本函数

```
 <script type="text/javascript" language="JavaScript">
        function setDatePickervalue(selecteddate){          
                document.getElementById("text").innerHTML = selecteddate.toString();            
                //alert('hello' + selecteddate.toString());

            }
  </script> 
```

....我试图像你一样实现同样的事情......它在模拟器中给了我 vm 中止异常......但它在设备上工作正常......

# android - android数字格式异常

> ID：10104267
> 
> 赞同：0
> 
> 时间：2012-04-11T10:34:07.357
> 
> 标签：android, android-dialog, numberformatexception

我得到以下异常

> java.lang.NumberFormatException：无效的int：“”

当您尝试将值存储到共享首选项中而没有任何内容插入输入字段时，就会发生这种情况。这是因为我将输入解析为 int （因为我需要对数字进行减法）

这不是什么大问题，因为该应用程序可以运行，但是只是以防万一使用该应用程序的人想要变得奇怪并尝试按下保存按钮而不输入任何我不希望它插入的数据。

我尝试了以下方法：

```
else if (obj ==null || obj.currentWeight.contains("")||obj.targetWeight.contains("")){
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    MainActivity.this);
            builder.setTitle("No Data Stored");
            builder.setMessage("Please insert your target weight and your current weight and click Store Weight")
            .setPositiveButton("OK", null).show(); 
```

如果我将上述声明保留为

```
else if (obj ==null){ 
```

然后如果插入一个空值，对话框将打开并显示一条消息。

我得到数字格式异常。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:44:18.667

一般来说，异常处理是处理这种不良行为的好方法：

```
if( obj != null && obj.getTargetWeight() != null ) {
 try {
  int i = Integer.parseInt( obj.getTargetWeight() );
  //do something if target weight is a number
 } catch( NumberFormatException ex ) {
   //do something if target weight was not a number.
 }
} 
```

---编辑为精确的异常类型

# java - 我的一个类的子类列表

> ID：10104269
> 
> 赞同：1
> 
> 时间：2012-04-11T10:34:07.717
> 
> 标签：java, android, ios

在 Android 环境下，我需要列出我的一个类的所有子类。我看到有阅读目录的样本....但我想通过询问线程或应用程序级别或另一个正在运行的对象来找到它们。

在 iOS 下，我使用 objc_getClassList，然后选择我感兴趣的那些。

有人知道是否有办法在通用 java 或特定的 android 库上找到像 objc_getClassList 这样的干净解决方案？

提前致谢。PS：我要列出的所有这些类都在某个 java 包中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:38:53.987

您将需要使用自省和类加载器来找出类并测试它们是否是给定超类型的子类型。这是您在 J2SE 上的问题的有趣实现：http: [//nonstop-rp.blogspot.fr/2010/05/java-reflection-know-subclasses-of.html](http://nonstop-rp.blogspot.fr/2010/05/java-reflection-know-subclasses-of.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:40:57.210

我不确定我是否理解您的问题，但是您可以创建一个名为 AllClasses 的类或其他东西，并在其中放置一个 ArrayList 子类；然后在每个子类中执行 AllClasses.subclasses.add(this)。

谢谢 应该做

# asp.net-mvc - 在 MVC 中使用 Fluent NHibernate 在创建视图中映射对象

> ID：10104271
> 
> 赞同：0
> 
> 时间：2012-04-11T10:34:33.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nhibernate, asp.net-mvc-2, fluent-nhibernate

我正在尝试在 MvcMusicStore 示例中使用 Fluent NHibernate 而不是 Entity Framework，并且在使用 Create View 创建新专辑时填充 ArtistId 和 GenreId 时遇到问题。我认为这与我引用其他对象的事实有关

我的专辑地图是：

```
 public class AlbumMap:ClassMap<Album>
    {
        public AlbumMap()
        {
            Id(x => x.AlbumId);
            Map(x => x.AlbumArtUrl);
            References(x => x.Artist).Cascade.All().Column("ArtistId");
            References(x => x.Genre).Cascade.All().Column("GenreId");
            Map(x => x.Price);
            Map(x => x.Title);
        }
    } 
```

控制器中的 Create 方法如下所示：

```
 public ActionResult Create()
    {
        MusicRepository repository = new MusicRepository();
        ViewBag.ArtistId = new SelectList(repository.GetArtists(), "ArtistId", "Name");
        ViewBag.GenreId = new SelectList(repository.GetGenres(), "GenreId", "Name");
        return View();
    } 
```

我遇到问题的 Create 视图部分是：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Genre, "Genre")
    </div>
    <div class="editor-field">
        @Html.DropDownList("GenreId", String.Empty)
        @Html.ValidationMessageFor(model => model.Genre)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Artist, "Artist")
    </div>
    <div class="editor-field">
        @Html.DropDownList("ArtistId", String.Empty)
        @Html.ValidationMessageFor(model => model.Artist)
    </div> 
```

在数据库中，创建一个新专辑后，其他字段如 Title 和 AlbumUrl 被填写，但 ArtistId 和 GenreId 设置为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:41:45.920

You can probably tell I'm quite new to this but I have actually solved my problem. I did this by firstly changing the dropdownlist helpers to dropdownlistfor to enable it to save back:

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Genre, "Genre")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.Genre.GenreId, (SelectList)ViewBag.GenreId,"Please select")
        @Html.ValidationMessageFor(model => model.Genre.GenreId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Artist, "Artist")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.Artist.ArtistId, (SelectList)ViewBag.ArtistId,"Please select")
        @Html.ValidationMessageFor(model => model.Artist.ArtistId)
    </div> 
```

This returned me an album with initialised Artist and Genre properties. The only thing was that they only contained Id properties so I had to use these to get the rest of the properties (using nhibernate) before saving:

```
 [HttpPost]
    public ActionResult Create(Album album)
    {
        try
        {
            MusicRepository repository = new MusicRepository();
            if (ModelState.IsValid)
            {
                album.Artist = repository.GetArtistById(album.Artist.ArtistId);
                album.Genre = repository.GetGenreById(album.Genre.GenreId);
                repository.AddAlbum(album);
                return RedirectToAction("Index");  
            }
            ViewBag.ArtistId = new SelectList(repository.GetArtists(), "ArtistId", "Name");
            ViewBag.GenreId = new SelectList(repository.GetGenres(), "GenreId", "Name");
            return View(album);
        } 
```

# c# - 使用 Activator.CreateInstance 执行类方法时访问 ASP.NET 会话

> ID：10104272
> 
> 赞同：1
> 
> 时间：2012-04-11T10:34:35.390
> 
> 标签：c#, asp.net, reflection, session-state, activator

我有一个用于检查特定请求的 ASP.NET 站点（global.asax 中的 Begin_request）。如果某个请求进来，在这种情况下是通过 javascript 执行的，反射用于运行类中的方法。

```
string[] parts = HttpContext.Current.Request.Path.Replace(".aspx", "").Split('/');
string cls = "" + parts[2];
string func = parts[3];

Type type = Type.GetType(cls,true);
object instance = Activator.CreateInstance(type);

type.InvokeMember(func, BindingFlags.Default | BindingFlags.InvokeMethod, null, instance, null ); 
```

我的问题是该方法何时执行`HttpContext.Current.Session`并且`HttpContext.Current.User`都为空。我怀疑这与该方法通过反射执行的事实有关。

# .net - Microsoft .NET Framework 徽标图像

> ID：10104274
> 
> 赞同：1
> 
> 时间：2012-04-11T10:34:49.460
> 
> 标签：.net

我在哪里可以找到适合平面设计师的 Microsoft .NET Framework 4.0 的官方 PNG 图像（透明背景、合理大小等）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:20:02.427

希望能帮助到你：

[http://www.microsoft.com/en-us/news/imagegallery/products/default.aspx](http://www.microsoft.com/en-us/news/imagegallery/products/default.aspx)

Maxim的另一个链接

[http://www.brandsoftheworld.com/logo/microsoft-net-framework](http://www.brandsoftheworld.com/logo/microsoft-net-framework)

# php - fpdf：使用多单元格包装文本时，如何正确对齐？

> ID：10104275
> 
> 赞同：0
> 
> 时间：2012-04-11T10:34:49.757
> 
> 标签：php, fpdf

在用多单元格包装文本后，我似乎在行之间有 2 个空格，

如何正确制作？我想把它改成1个空格..

即使用谷歌我也不知道

```
$this->CI->fpdf->MultiCell(75,10,'Lorem Ipsum adalah contoh teks atau dummy dalam industri percetakan dan penataan huruf atau typesetting. Lorem Ipsum telah menjadi standar contoh teks sejak tahun 1500an, saat seorang tukang cetak yang tidak dikenal mengambil sebuah kumpulan teks dan mengacaknya untuk menjadi sebuah buku contoh huruf.',0,'J'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:59:09.390

MultiCell 方法中的第二个参数是每行的高度（Cell），您可以设置一个固定值或使用实际的字体高度；

```
$fontSize=$this->CI->fpdf->FontSize;
$this->CI->fpdf->MultiCell(75,$fontSize,'Lorem Ipsum adalah contoh teks atau dummy dalam industri percetakan dan penataan huruf atau typesetting. Lorem Ipsum telah menjadi standar contoh teks sejak tahun 1500an, saat seorang tukang cetak yang tidak dikenal mengambil sebuah kumpulan teks dan mengacaknya untuk menjadi sebuah buku contoh huruf.',0,'J'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:55:21.357

尝试将高度参数设置得更低，fe：

```
$this->CI->fpdf->MultiCell(75,5,'Lorem Ipsum adalah contoh teks atau dummy dalam industri percetakan dan penataan huruf atau typesetting. Lorem Ipsum telah menjadi standar contoh teks sejak tahun 1500an, saat seorang tukang cetak yang tidak dikenal mengambil sebuah kumpulan teks dan mengacaknya untuk menjadi sebuah buku contoh huruf.',0,'J'); 
```

# ruby-on-rails-3 - 乘客安装 nginx 模块安装错误

> ID：10104278
> 
> 赞同：0
> 
> 时间：2012-04-11T10:34:54.047
> 
> 标签：ruby-on-rails-3, nginx, gem, passenger

我尝试使用 nginx 将我的 webrick 更改为乘客，但是当我尝试时，一 `passenger-install-nginx-module` 开始似乎一切都很好，但最后它出现了这个错误全部

```
# sh ./configure --prefix='/opt/nginx' --with-http_ssl_module --add-module='/home/led/.rvm/gems/ruby-1.9.3-rc1/gems/passenger-3.0.0.pre4/ext/nginx'
checking for OS
 + Linux 2.6.42.12-1.fc15.i686 i686
checking for C compiler ... found
 + using GNU C compiler
 + gcc version: 4.6.3 20120306 (Red Hat 4.6.3-2) (GCC) 
checking for gcc -pipe switch ... found
checking for gcc variadic macros ... found
checking for C99 variadic macros ... found
checking for unistd.h ... found
checking for inttypes.h ... found
checking for limits.h ... found
checking for sys/filio.h ... not found
checking for sys/param.h ... found
checking for sys/mount.h ... found
checking for sys/statvfs.h ... found
checking for crypt.h ... found
checking for Linux specific features
checking for epoll ... found
checking for sendfile() ... found
checking for sendfile64() ... found
checking for sys/prctl.h ... found
checking for prctl(PR_SET_DUMPABLE) ... found
checking for sched_setaffinity() ... found
checking for crypt_r() ... found
checking for sys/vfs.h ... found
checking for nobody group ... found
checking for poll() ... found
checking for /dev/poll ... not found
checking for kqueue ... not found
checking for crypt() ... not found
checking for crypt() in libcrypt ... found
checking for O_DIRECT ... found
checking for F_NOCACHE ... not found
checking for directio() ... not found
checking for statfs() ... found
checking for statvfs() ... found
checking for dlopen() ... not found
checking for dlopen() in libdl ... found
checking for sched_yield() ... found
configuring additional modules
adding module in /home/led/.rvm/gems/ruby-1.9.3-rc1/gems/passenger-3.0.0.pre4/ext/nginx
checking for Math library ... found
 + ngx_http_passenger_module was configured
checking for PCRE library ... found
checking for OpenSSL library ... found
checking for zlib library ... found
creating objs/Makefile
checking for int size ... 4 bytes
checking for long size ... 4 bytes
checking for long long size ... 8 bytes
checking for void * size ... 4 bytes
checking for uint64_t ... found
checking for sig_atomic_t ... found
checking for sig_atomic_t size ... 4 bytes
checking for socklen_t ... found
checking for in_addr_t ... found
checking for in_port_t ... found
checking for rlim_t ... found
checking for uintptr_t ... uintptr_t found
checking for system endianess ... little endianess
checking for size_t size ... 4 bytes
checking for off_t size ... 8 bytes
checking for time_t size ... 4 bytes
checking for setproctitle() ... not found
checking for pread() ... found
checking for pwrite() ... found
checking for strerror_r() ... found but is not working
checking for gnu style strerror_r() ... found
checking for sys_errlist[] ... found
checking for localtime_r() ... found
checking for posix_memalign() ... found
checking for memalign() ... found
checking for mmap(MAP_ANON|MAP_SHARED) ... found
checking for mmap("/dev/zero", MAP_SHARED) ... found
checking for System V shared memory ... found
checking for struct msghdr.msg_control ... found
checking for ioctl(FIONBIO) ... found
checking for struct tm.tm_gmtoff ... found
checking for struct dirent.d_namlen ... not found
checking for struct dirent.d_type ... found

Configuration summary
  + using system PCRE library
  + using system OpenSSL library
  + md5: using OpenSSL library
  + sha1 library is not used
  + using system zlib library

  nginx path prefix: "/opt/nginx"
  nginx binary file: "/opt/nginx/sbin/nginx"
  nginx configuration prefix: "/opt/nginx/conf"
  nginx configuration file: "/opt/nginx/conf/nginx.conf"
  nginx pid file: "/opt/nginx/logs/nginx.pid"
  nginx error log file: "/opt/nginx/logs/error.log"
  nginx http access log file: "/opt/nginx/logs/access.log"
  nginx http client request body temporary files: "client_body_temp"
  nginx http proxy temporary files: "proxy_temp"
  nginx http fastcgi temporary files: "fastcgi_temp"

# make
make -f objs/Makefile
make[1]: Entering directory `/tmp/root-passenger-5241/nginx-0.7.67'
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/nginx.o \
    src/core/nginx.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_log.o \
    src/core/ngx_log.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_palloc.o \
    src/core/ngx_palloc.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_array.o \
    src/core/ngx_array.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_list.o \
    src/core/ngx_list.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_hash.o \
    src/core/ngx_hash.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_buf.o \
    src/core/ngx_buf.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_queue.o \
    src/core/ngx_queue.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_output_chain.o \
    src/core/ngx_output_chain.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_string.o \
    src/core/ngx_string.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_parse.o \
    src/core/ngx_parse.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_inet.o \
    src/core/ngx_inet.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_file.o \
    src/core/ngx_file.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_crc32.o \
    src/core/ngx_crc32.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_rbtree.o \
    src/core/ngx_rbtree.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_radix_tree.o \
    src/core/ngx_radix_tree.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_slab.o \
    src/core/ngx_slab.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_times.o \
    src/core/ngx_times.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_shmtx.o \
    src/core/ngx_shmtx.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_connection.o \
    src/core/ngx_connection.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_cycle.o \
    src/core/ngx_cycle.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_spinlock.o \
    src/core/ngx_spinlock.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_cpuinfo.o \
    src/core/ngx_cpuinfo.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_conf_file.o \
    src/core/ngx_conf_file.c
gcc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Wunused-function -Wunused-variable -Wunused-value -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
    -o objs/src/core/ngx_resolver.o \
    src/core/ngx_resolver.c
src/core/ngx_resolver.c: In function ‘ngx_resolver_process_ptr’:
src/core/ngx_resolver.c:1422:32: error: variable ‘qclass’ set but not used [-Werror=unused-but-set-variable]
src/core/ngx_resolver.c:1422:25: error: variable ‘qtype’ set but not used [-Werror=unused-but-set-variable]
cc1: all warnings being treated as errors
make[1]: *** [objs/src/core/ngx_resolver.o] Error 1
make[1]: Leaving directory `/tmp/root-passenger-5241/nginx-0.7.67'
make: *** [build] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:10:45.727

您正在使用2010 年 9 月发布的乘客 gem [v3.0.0.pre4 。](https://rubygems.org/gems/passenger/versions/3.0.0.pre4)

乘客现在是[v3.0.11](https://rubygems.org/gems/passenger)。我建议更新乘客：`gem update passenger`并`passenger-install-nginx-module`再次运行。

# jquery - 使用 Jquery 更改 div 的内容（带参数的 Jquery 对话框）

> ID：10104282
> 
> 赞同：0
> 
> 时间：2012-04-11T10:35:15.617
> 
> 标签：jquery, jquery-ui, modal-dialog

我正在开发一个 ASP.NET 网站（MVC3 但对我的问题并不重要）

当用户单击要打开 Jquery 模态对话框的链接时，我的页面上有一些链接：

[http://jqueryui.com/demos/dialog/#modal-message](http://jqueryui.com/demos/dialog/#modal-message)

对于每个链接，我希望显示一个不同的对话框。

据我了解，我必须`<div>`在我的页面上指定对话框的内容。例如：

```
<div id="dialog" title="Basic dialog">
    <p>Here we put the content of the dialog</p>
</div> 
```

链接是动态生成的，我不想为每个链接创建一个 div。对话框的内容也取决于链接发送的参数

我将尝试解释我想要什么。

如果可能的话，我想要做的是：

我有一个 div

```
<div id="dialog" title="Basic dialog">
</div> 
```

当用户点击 link1 时调用一个函数`ShowDialog(FirstName1, LastName1)`

该函数会将参数作为字符串添加到`div`“对话框”并打开对话框。

当用户单击链接 2 时，“div”“对话框”被清除，新内容由函数填充，`ShowDialog(FirstName2, LastName2)`对话框打开。

应该做的就是 Jquery 或 Javascript。

我希望我很清楚。如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:40:50.417

您尚未指定将从何处检索`firstname`和`surname`值，因此我已将它们分配给`data-*`链接的属性，如下所示：

```
<a href="#" data-firstname="Foo" data-surname="Bar">Click me</a> 
```

```
$("#dialog").dialog({ /* settings */ });

$("#link2").click(function() {
    var $el = $(this);
    var fn = $el.data("firstname");
    var sn = $el.data("surname");
    ShowDialog(fn, sn);
});

function ShowDialog(firstname, surname) {
    // Here you can do whatever is required to the dialog, create elements, change text, go nuts.
    $("p", "#dialog").text("Hello " + firstname + " " + surname); 

    // Show the dialog
    $("#dialog").dialog('open');
} 
```

# biztalk - BizTalk BAM 门户“相关文档”丢失

> ID：10104285
> 
> 赞同：0
> 
> 时间：2012-04-11T10:35:30.883
> 
> 标签：biztalk, biztalk-bam

我正在使用 BizTalk 2010 并使用 BAM API 在 BAMPrimaryImport 数据库的 BAM_Itinerary_CompletedRelationships 表中记录传入消息的正文。这运行良好，通过 SSMS，我可以在 LongReferenceData 列中看到入站 XML 消息。我希望在 BAM 门户的“相关文档”部分中看到指向此的链接，但这是空的。

有谁知道如何让这些数据显示在 BAM 门户中？

如果可以避免的话，我宁愿不编写自定义/SSRS UI！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:44:28.003

使用 API，您应该能够使用带有 DocumentUrl 类型的 AddReference 方法来实现这一点 - 请参阅[http://msdn.microsoft.com/en-us/library/aa956649.aspx](http://msdn.microsoft.com/en-us/library/aa956649.aspx)

该博客可能还为您提供一些有用的信息 - [http://geekswithblogs.net/gwiele/archive/2009/05/28/132469.aspx](http://geekswithblogs.net/gwiele/archive/2009/05/28/132469.aspx)

祝你好运！

# c# - 全局对象与否？

> ID：10104286
> 
> 赞同：0
> 
> 时间：2012-04-11T10:35:33.283
> 
> 标签：c#, .net, winforms

我有 WinForms 应用程序和多个表单，并希望`ErrorProvider`在每个表单上使用组件**编辑：**检查用户输入是否正常（例如，如果输入的数字在范围内等......）在我看来，将此组件放到每一种形式。如果我创建一个*全局对象*（或如何调用它）并在每个表单上使用它会怎样？

我的想法：

```
namespace MyApplication {  
static class Program {  

public static ErrorProvider EP = new ErrorProvider();
... 
```

然后以那个单独的形式来处理`Validating`和`Validated`事件：

```
private void txtBox1_Validating(object sender, System.ComponentModel.CancelEventArgs e) {
  if (txtBox1.Text != "correct text") {
    e.Cancel = true;
    Program.EP.SetError(txtBox1, "You have error in your input");
... 
```

这是正确的方法还是我应该以其他方式做？

如果我需要更多*全局对象*，也许我应该将它们全部放在某个单独的静态类中，并在`Program`创建时只创建这个（？）
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:30:43.420

拥有全局对象是可以的，但如果可能的话，我宁愿将其设为静态无状态类。无状态将允许简单的线程安全。在 .NET 中具有全局（在命名空间内）静态类是很常见的，例如`FileInfo`或`Convert`.

如果您只需要一些全局方法并且它们对 UI 元素进行操作，您还可以为`System.Windows.Controls.Control`或者即使`System.Windows.Controls.TextBox`这是您想要的唯一控件编写一些扩展方法。这将为您提供更好的代码：

```
txtBox1.Validate("correct text", "You have error in your input"); 
```

扩展方法可能如下所示：

```
public static class MyExtension
{
    public static void Validate(this TextBox myTextBox, string correctText, string error)
    {
        if(myTextBox.Text != correctText)
            Console.WriteLine(string.Format("{0} [{1} == '{2}']", error, myTextBox.Name, myTextBox.Text));
    }
} 
```

这会在控制台中给你这个消息：

`You have error in your input [txtBox1 == 'some text']`

如果您需要更多信息，请查看扩展方法[文档。](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:43:54.457

只要您的个人表单从不同时运行或您的错误提供程序是可重入的，并且您的错误提供程序不需要返回到您的表单的永久链接，这种方法就有效。从您展示的示例中，您的提供者似乎要求您传递设置错误状态的控件，因此它很有可能重新进入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:46:51.047

我认为您可以创建一个继承文本框类的新类并在其中添加您的验证，然后创建一个作为您的类的新控件并在您需要的任何地方使用它，在这种情况下，您稍后将在一个地方编辑/修改您的验证.

如果您有非常不同的验证，请创建 2 个类，例如：NumericTextBox 和 StringTextBox

# php - 更新验证码时如何在 AJAX 中设置 HTTP 标头 img-type jpeg/png？

> ID：10104289
> 
> 赞同：0
> 
> 时间：2012-04-11T10:35:45.750
> 
> 标签：php, jquery, ajax

使用 jquery + php。做自定义 AJAX 验证码。即用户点击图像，它会自动更新。

```
<script src="/js/jquery.js"></script>

<script>

$(document).ready(function(){

    $.post('/captcha.php', {}, function(resp){

        $("div").html(resp);

    });

});

</script>

<div></div> 
```

在 PHP 标头中已经发送，因此如果它包含在其中，`<img src="/captcha.php" />`则会以 jpeg 格式打印验证码。问题似乎是需要发送的标题。那么，我该怎么做呢？标头以 PHP 发送。它在 js 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:37:45.590

在您的 captcha.php 文件中添加[标头函数：](http://php.net/manual/en/function.header.php)

```
header('Content-Type: image/jpeg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:40:23.057

如果要更改 HTML 文档中的图像，则更改图像的 src 属性（或将图像元素替换为新元素）。根本不要使用 XMLHttpRequest。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:50:47.010

如果您**从不同的脚本**加载源代码，那么您可以简单地`src`通过字符串值发送文件。这样你的`captcha.php`代码就变成了这样

```
 $source="/path/to/the/file.jpg";
 header("Content-type:text/plain");
 print $source; 
```

当您收到它时，您可以执行以下操作来更改来源

```
$("#changeCaptchaButton").click(function() {
  $.ajax({
    url: "captcha.php",
    cache: false,
    success: function(data) {
        alert("changing source of image");
        var source=data;
        $("#captchaImg").attr("src", source); 

      }
   });
}); 
```

如果您在**当前脚本**中进行更改，则不要使用 ajax，而是使用后一种 jQuery 方法

# iphone - 在手机和平 板电脑的引导程序中将 iframe 宽度设置为 100%

> ID：10104293
> 
> 赞同：2
> 
> 时间：2012-04-11T10:35:58.993
> 
> 标签：iphone, css, iframe, twitter-bootstrap

我正在为手机和平板电脑提供页面。我正在使用 OpenX 在那里投放广告。广告应该加载在一个 iframe 中，该 iframe 应该是页面的宽度。我正在使用引导程序。

我用这段代码测试了一些东西：

```
<iframe src='http://www.cnn.com' width=100% height=120px scrolling='no'></iframe> 
```

这使得 iframe 的宽度与浏览器窗口完全相同。问题是，如果我在 iphone 上打开它，它会将 iframe 重新缩放到加载到其中的窗口的大小，这是非常不受欢迎的行为。它不会在我的桌面上执行，仅在 iphone 上执行。我还没有用其他智能手机测试过。

基本上我正在寻找的是一个与屏幕宽度相同的 iframe (100%)，当我在其中加载更大的页面时不会重新缩放

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:26:05.107

我很确定您正在寻找视口元标记来控制它。这是一个完整解释的参考：[https ://developer.mozilla.org/en/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag)

基本上你想把这段代码放到你的脑海中： `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

# asp.net - 如何正确授予 IIS 7.5 Express 上的文件夹权限

> ID：10104300
> 
> 赞同：0
> 
> 时间：2012-04-11T10:36:36.100
> 
> 标签：asp.net, asp.net-mvc, iis, windows-authentication, application-pool

我遇到了一个很常见的例外：`Access to the path 'C:\inetpub\wwwroot\Content\Images\Uploads\<there goes my hashed guid as a subfolder name which is created dynamically>'`

我正在使用`IIS Express 7.5`. 我`WA`在我的应用程序中使用身份验证。`web.config`在和 on中都禁用了模拟`IIS`。

我查看了站点正在运行的应用程序池（即`ASP.NET 4.0`）。应用程序池标识：`Network Service`. 我已授予对`Uploads`文件夹的完全控制权限`IIS AppPool\ASP.NET 4.0`。也为*经过身份验证的用户*执行此操作。检查我为子文件夹做了这个。

**编辑**

有点帮助[http://forums.asp.net/t/984207.aspx/1](http://forums.asp.net/t/984207.aspx/1)

我创建了文件夹：`C:\inetpub\wwwroot\Content\Images\Uploads`. 它以前不在我的`C`驱动器上）。然后我为文件夹添加了完全控制权限，`Network Authority`并成功地将文件上传到了路径。

所以我只是好奇我应该把我的项目文件夹放在哪里？现在我把它放在其他驱动器上，而不是`C`.

**编辑**

行。我明白了。所有这些都与我`Server.MapPath`调用的代码有关。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:23:44.073

您必须授予**Uploads**文件夹的权限，因为`NetworkService`女巫是`ASP.NET 4.0`身份。

# aix - Cronjob 脚本失败但手动运行正常

> ID：10104305
> 
> 赞同：2
> 
> 时间：2012-04-11T10:36:50.553
> 
> 标签：aix

我有手动运行良好的脚本，但在通过 cronjob 运行时没有获得所需的输出。如果脚本有任何问题，请告诉我。

```
#!/usr/bin/ksh

file1=$(find *-* -mtime 1)

file2=$(find *-* -mtime 2)

basefile1=$(basename $file1)
basefile2=$(basename $file2)

cd /gtxappl/Release/SCMAudit

./cmp.sh $basefile1 $basefile2 > dailyAuditChecks.txt

mailx -s "Daily Checks Report" ****@homeretailgroup.com < dailyAuditChecks.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:42:32.953

来自[管理员的选择](http://www.adminschoice.com/crontab-quick-reference)：

```
5\. crontab 环境
cron 使用 shell 从用户的 HOME 目录 (/usr/bin/sh) 调用命令。
cron 为每个 shell 提供默认环境，定义：
HOME=用户的主目录
LOGNAME=用户的登录 ID
PATH=/usr/bin:/usr/sbin:。
SHELL=/usr/bin/sh
希望执行其 .profile 的用户必须在 crontab 条目或该条目调用的脚本中明确执行此操作。

```

我建议尽可能使用绝对路径，如果需要环境变量，请不要忘记执行 .profile。

# hibernate - 使用休眠的数据库中的Unicode字符

> ID：10104307
> 
> 赞同：1
> 
> 时间：2012-04-11T10:37:01.037
> 
> 标签：hibernate

我可以使用休眠防止某些字符被持久化在数据库中吗？例如，如果我有一个类 Note，它将注释 id 和注释文本作为 2 个属性。我可以防止像FFFE这样的Unicode字符在数据库中持久存在吗？当用户输入像 FFFE 这样的字符时，它应该替换为 AAAA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:10:47.927

最简单的解决方案是配置 `text`要[由 property 访问的属性](http://javaprogrammingtips4u.blogspot.com/2010/04/field-versus-property-access-in.html)。然后在`text`属性的 getter 中，替换`FFFE`为 `AAAA`：

```
@Entity
public class Note {

   private Integer id;
   private String text;

   @Id
   public Integer getId(){ }

   public void getText(){
       /**replace() is the function to replace `FFFE` with  `AAAA` ***/
       this.text = replace(inText);
       return  this.text;
   }
} 
```

由于`text`属性是由 property 访问的，hibernate 将从它的 getter 中获取要保存在 DB 中的值。

# android - 当用户点击电话的通话记录按钮时如何运行我的应用程序？

> ID：10104308
> 
> 赞同：0
> 
> 时间：2012-04-11T10:37:01.567
> 
> 标签：android, android-intent

我希望我的应用程序在用户单击通话记录按钮时运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:16:04.910

当您单击通话记录按钮并且您的应用程序工作时，您必须使用 BroadcastReceiver 和应用程序工作，如服务和服务激活。

这就是它背后的概念。

对于广播接收器[http://www.vogella.de/articles/AndroidServices/article.html](http://www.vogella.de/articles/AndroidServices/article.html)

# com - 从 xml 文件构建 visiops 自动图表

> ID：10104313
> 
> 赞同：1
> 
> 时间：2012-04-11T10:37:26.560
> 
> 标签：com, automation, visio

我发现 VisioPS 能够使用 COM 从 xml 文件中绘制 xml 图表。不错的功能，我可以在 visio 中构建 xml 文件和构建图表。但是对于类图，我需要为类添加操作和属性。是否可以在 xml 文件中指定该信息。

存储有关 visiops xml 文件信息的链接[https://skydrive.live.com/?cid=1ff099edb1c7ebfa&id=1FF099EDB1C7EBFA%211421](https://skydrive.live.com/?cid=1ff099edb1c7ebfa&id=1FF099EDB1C7EBFA%211421)

提前致谢。

**UPD**

链接到带有示例的 visio 文件：http: [//dl.dropbox.com/u/14767221/example.vsd](http://dl.dropbox.com/u/14767221/example.vsd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:41:28.170

@misha - 谢谢！既然我看到了您要完成的工作，就更容易回答了。简短的回答是 VisioPS 中的代码是围绕使用“基本”模板（简单的矩形和椭圆形）而不是像 UML 模板那样复杂的模板进行优化的。UML 形状很复杂，对我来说更难以自动化。我确实认为这是可能的，所以我将看看如何在未来的版本中添加它。

# ruby - 测试一个 lambda

> ID：10104316
> 
> 赞同：5
> 
> 时间：2012-04-11T10:37:28.633
> 
> 标签：ruby, unit-testing, testing, lambda, rspec

我正在创建一个将 CSV 文件导入多个表的导入功能。我制作了一个名为的模块`CsvParser`，它解析 CSV 文件并创建记录。接收创建操作的模型扩展了`CsvParser`. 他们调用`CsvParser.create`并传递正确的属性顺序和一个可选的 lambda，称为`value_parser`. 此 lambda 将散列中的值转换为首选格式。

```
class Mutation < ActiveRecord::Base
  extend CsvParser

  def self.import_csv(csv_file)
    attribute_order = %w[reg_nr receipt_date reference_number book_date is_credit sum balance description]

    value_parser = lambda do |h|
      h["is_credit"] = ((h["is_credit"] == 'B') if h["is_credit"].present?)
      h["sum"] = -1 * h["sum"].to_f unless h["is_credit"]
      return [h]
    end

    CsvParser.create(csv_file, self, attribute_order, value_parser)    
  end
end 
```

我在`CsvParser.create`方法内部使用 lambda 而不是检查的原因是 lambda 就像属于该模型的业务规则。

我的问题是我应该如何测试这个 lambda。我应该在模型还是 CsvParser 中测试它？我应该测试 lambda 本身还是方法数组的结果`self.import`？也许我应该制作另一个代码结构？

我的 CsvParser 如下所示：

```
require "csv"

module CsvParser

  def self.create(csv_file, klass, attribute_order, value_parser = nil)
    parsed_csv = CSV.parse(csv_file, col_sep: "|")

    records = []    

    ActiveRecord::Base.transaction do
      parsed_csv.each do |row|
        record = Hash.new {|h, k| h[k] = []}      
        row.each_with_index do |value, index|
          record[attribute_order[index]] = value
        end 
        if value_parser.blank?
          records << klass.create(record)
        else
          value_parser.call(record).each do |parsed_record|
            records << klass.create(parsed_record)
          end
        end
      end 
    end
    return records
  end

end 
```

我正在测试模块本身：需要'spec_helper'

```
describe CsvParser do

  it "should create relations" do
    file = File.new(Rails.root.join('spec/fixtures/files/importrelaties.txt'))
    Relation.should_receive(:create).at_least(:once)
    Relation.import_csv(file).should be_kind_of Array 
  end

  it "should create mutations" do
    file = File.new(Rails.root.join('spec/fixtures/files/importmutaties.txt'))
    Mutation.should_receive(:create).at_least(:once)    
    Mutation.import_csv(file).should be_kind_of Array
  end

  it "should create strategies" do
    file = File.new(Rails.root.join('spec/fixtures/files/importplan.txt'))
    Strategy.should_receive(:create).at_least(:once)
    Strategy.import_csv(file).should be_kind_of Array
  end

  it "should create reservations" do
    file = File.new(Rails.root.join('spec/fixtures/files/importreservering.txt'))
    Reservation.should_receive(:create).at_least(:once)
    Reservation.import_csv(file).should be_kind_of Array
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:11:15.767

一些有趣的问题。几点注意事项：

1.  您可能不应该在 lambda 中返回。只做最后一个陈述[h]。
2.  如果我正确理解了代码，则 lambda 的第一行和第二行过于复杂。减少它们以使它们更具可读性和更容易重构：

    ```
    h["is_credit"] = (h['is_credit'] == 'B') # I *think* that will do the same
    h['sum'] = h['sum'].to_f   # Your original code would have left this a string
    h['sum'] *= -1 unless h['is_credit'] 
    ```

3.  看起来你的 lambda 不依赖于任何外部（除了`h`），所以我会单独测试它。你甚至可以使它成为一个常数：

    ```
    class Mutation < ActiveRecord::Base
      extend CsvParser    # <== See point 5 below

      PARSE_CREDIT_AND_SUM = lambda do |h|
        h["is_credit"] = (h['is_credit'] == 'B') 
        h['sum'] = h['sum'].to_f
        h['sum'] *= -1 unless h['is_credit']
        [h]
      end 
    ```

4.  如果不知道基本原理，很难说应该把这段代码放在哪里。我的直觉是这不是 CSV 解析器的工作（尽管一个好的解析器可能会检测浮点数并将它们从字符串转换？）保持你的 CSV 解析器可重用。（注意：重读，我想你自己已经回答了这个问题——它是业务逻辑，与模型相关。跟着你的直觉走！）

5.  最后，您正在定义和方法`CsvParser.create`。您无需扩展 CsvParser 即可访问它，但如果您在 CsvParser 中有其他设施，请考虑创建`CsvParser.create`一个名为 create_from_csv_file 之类的普通模块方法

# c - 发出信号等待“加入”的 pthread 时进程终止

> ID：10104323
> 
> 赞同：1
> 
> 时间：2012-04-11T10:37:51.863
> 
> 标签：c, multithreading, join, signals

我正在尝试实现一个信号处理程序。每个 pthread 都被创建为可连接的，并且使用 sigprocmask 在所有信号上被阻塞。

当我向线程发送来自另一个线程的信号时，会出现问题，使用

```
pthread_kill(_threads[threadIndex], SIGHALT); 
```

如果在发送信号时被调用的 pthread 正在等待 pthread_join，则整个过程立即终止。但是，如果线程没有等待加入，它会按预期忽略信号。知道为什么会发生以及如何改变它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:24:05.337

关于`sigprocmask()`在多线程环境中的使用，请参见方法手册页的摘录：

> 在多线程进程中未指定 sigprocmask() 的使用；请参见 pthread_sigmask(3)。

* * *

我对 有点不确定`SIGHALT`，但假设它是手册页`SIGSTOP`中以下内容的同义词`pthread_kill()`可能会引起人们的兴趣：

> 信号处理是进程范围的：如果安装了信号处理程序，处理程序将在线程线程中调用，但如果信号处理是“停止”、“继续”或“终止”，此操作将影响整个过程。

# css - 隐藏最后一项以防通过 CSS 溢出

> ID：10104324
> 
> 赞同：2
> 
> 时间：2012-04-11T10:37:55.530
> 
> 标签：css, overflow

我有一个`.list`of `.item`s，像这个：

```
<div class="list">
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
</div> 
```

两者`.item`都有`.list`一个**最大**高度，比如 100 像素和 280 像素。我想`.item`在它溢出时隐藏最后一个，可能没有JS。

我的意思是，如果`.list`has `overflow: hidden`，并且所有`.item`s 都达到最大高度，那么最后一个被部分切割。我想完全隐藏它，即它适合，或者它消失。

我可以同时更改 CSS 和 HTML（包括，例如，使用`<ul><li>...`而不是`div`s）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:23:08.830

如果您的项目有一个固定的高度，而不是最大值，您可以使用 nth-child 来预测它将在哪个项目开始溢出。

[样品](http://jsfiddle.net/p2CF9/)| 代码

```
.item{
    height: 75px;
    border: 1px solid blue;
    overflow: auto;
}

.item:nth-child(1n+4){ /* 4th element and up */
    display: none;
}

.list{
    max-height: 280px;
    border: 1px solid red;
    overflow: hidden;
} 
```

但是，由于它们不是固定高度，因此这种动态的唯一解决方案是使用 javascript。

* * *

关于这一点，这是一个 javascript 解决方案。

[样品](http://jsfiddle.net/p2CF9/2/)| 代码

Javascript

```
var eList = document.getElementById("list"),
    eItems = eList.getElementsByTagName("div"),
    iMaxHeight = parseInt(getStyle(eList, "max-height")),
    iSumHeight = 0;

for(i = 0; i < eItems.length; i++){
    var iHeight = parseInt(getStyle(eItems[i], "height"));
    //Check if next item will overflow, in which case, we're going to hide it
    if((iSumHeight + iHeight) >= iMaxHeight){
        eItems[i].style.display = "none";
    }else{
        iSumHeight += iHeight;
    }
}

function getStyle(el,styleProp){
    if (el.currentStyle)
        var y = el.currentStyle[styleProp];
    else if (window.getComputedStyle)
        var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
    return y;
} 
```

HTML

```
<div id="list">
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac. Nam venenatis, nunc sit amet elementum semper, sem purus ultrices diam, quis scelerisque elit nulla sed sapien. Vivamus urna metus, tincidunt ac accumsan et, dignissim at lorem.</div>
    <div class="item">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar aliquet risus, vitae suscipit tortor cursus ac.</div>
</div> 
```

CSS

```
.item{
    max-height: 110px;
    border: 1px solid blue;
    overflow: auto;
}

#list{
    max-height: 290px;
    border: 1px solid red;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:05:02.090

您需要 javascript 来计算项目的高度，或者如果您只想使用 css 来计算并且您知道两个元素的高度不会改变，您可以使用 nth-child css 选择器[nth-child计算适合和隐藏其他元素的高度](http://reference.sitepoint.com/css/pseudoclass-nthchild)

# c# - 如何访问 TextBlock 中的值？

> ID：10104326
> 
> 赞同：0
> 
> 时间：2012-04-11T10:38:02.470
> 
> 标签：c#, wpf, xaml

我有一个包含以下元素的窗口，我正在尝试访问其中包含的值，`<TextBlock Name="armingValue"`但在我的 .xaml.cs 文件中似乎无法识别它。

我需要做什么才能访问该值？

```
<Window.Resources>
    <DataTemplate DataType="{x:Type ArmingVM:ArmingItem}">
        <CheckBox Margin="10,5" IsChecked="{Binding IsSet}" Content="{Binding Name}"/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type ArmingVM:ArmingBindingData}">
        <DockPanel>
            <ItemsControl ItemsSource="{Binding ArmingItems}" HorizontalAlignment="Left">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
            <TextBlock Text="Enum Value: " HorizontalAlignment="Right"/>
            <TextBlock Name="armingValue" Text="{Binding Value}" HorizontalAlignment="Right"/>
        </DockPanel>
    </DataTemplate>
</Window.Resources>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="193*" />
        <ColumnDefinition Width="551*" />
    </Grid.ColumnDefinitions>

    <Button Content="Get Panel Options" Name="btnGetOptionsConfigruation" Margin="12,12,23,396" Click="btnGetOptionsConfigruation_Click"></Button>

    <StackPanel Grid.Column="1" Height="325" HorizontalAlignment="Left" Margin="68,43,0,0" Name="stackPanel1" VerticalAlignment="Top" Width="438">
        <ItemsControl Name="armingItemsControl" ItemsSource="{Binding}"/>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:50:07.280

文件中由 Visual Studio 生成的支持变量`.xaml.cs`仅在特定情况下生成。用户控件主体中的任何“命名”元素都将具有生成的支持变量。但是，不会生成模板中的命名元素。这是因为 Visual Studio 无法知道您的模板将如何使用。例如，您的模板可以被用于`ItemsControl`生成多个模板实例。在这种情况下应该生成什么`.xaml.cs`？

你有两个选择：

1.  使用绑定，让你的`TextBlock.Text`属性的状态绑定到一个视图模型，这样你就不必`TextBlock`直接访问元素。
2.  “走”可视化树以`TextBlock`在运行时定位您的位置。

对于（2），我建议使用[Linq-to-VisualTree](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/)，您可以在其中找到`TextBlock`如下内容：

```
TextBlock block = layoutRoot.Descendants<TextBlock>()
                            .Cast<TextBlock>().Where(tb => tb.Name="armingValue")
                            .Single(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:42:39.347

您不需要访问 TextBox 值，而是访问它的**绑定**值。所以考虑到你有`XAML`

```
 <TextBlock Name="armingValue" Text="{Binding Value}" HorizontalAlignment="Right"/> 
```

你需要阅读一个`Value`

尽量避免直接在 中访问 UI 元素，因为有时（并非如此罕见的情况）如果不是不可能的话（我的意思是不是保证方式）找到它们`WPF`会变得*非常棘手。*访问他们背后的*数据。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:44:56.437

也许我没有明白这一点，但你为什么不创建一个到文本框的绑定并将其标记为两种方式？

```
<TextBlock Text="Enum Value: " HorizontalAlignment="Right" Text="{Binding Value, Mode=TwoWay}"/> 
```

# gwt - 使用 gwt 抄写 - 尝试去 twitter 进行身份验证，然后回到我的 gwt 应用程序

> ID：10104327
> 
> 赞同：1
> 
> 时间：2012-04-11T10:38:02.040
> 
> 标签：gwt, oauth, scribe

我想做的是这个——

(1) 用户在我的网站上访问 app.html（GWT 应用程序）——在这里他看到了许多登录选项——比如 Facebook、Twitter、谷歌、雅虎等

(2) 当他点击 Twitter（在我们的示例中）时，他被重定向到他进行身份验证的 Twitter 站点 + 允许我的 Web 应用程序访问他的 Twitter 数据。

(3) 最后，用户通过 OAuth 回调 URL 重定向到我的站点...这里 oauth 令牌和 oauth 验证器作为参数作为回调 url 的一部分...现在提取这些，最后获得访问令牌。

这样的流量可能吗？还是我必须在浏览器的新窗口中打开 twitter auth url？

# iphone - -[CALayer release]：消息发送到释放的实例 0xc60a690

> ID：10104335
> 
> 赞同：1
> 
> 时间：2012-04-11T10:38:48.010
> 
> 标签：iphone, ios5

我认为这可能会导致错误，因为我在几个类中使用了按钮的图层属性。我认为这可能是原因，但我不确定。

现在，当我在一段时间后（最多 5 分钟）在 iPod 上运行我的应用程序时，应用程序崩溃并显示以下错误消息：

```
-[CALayer release]: message sent to deallocated instance 0xc60a690 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:19:41.323

If you wanna remove the class self in the current view, and it had have IBOutlets connect with the removed view that you did need to setup the IBOutlets to nil, it still works for me, like this :

```
-(void)backRootController{
    //I wanna change the current viewController to rootViewController on self.tabBarController.
    RootViewController *_rootViewController = [[RootViewController alloc] init];
    NSArray *_viewControllers = self.tabBarController.viewControllers;
    NSMutableArray *_tabs     = [NSMutableArray array];
    for( UIViewController *_tabViewController in _viewControllers ){
        if( _tabViewController == self ){
            _rootViewController.tabBarItem = _tabViewController.tabBarItem;
            _tabViewController = _rootViewController;
        }
        [_tabs addObject:_tabViewController];
    }
    self.tabBarController.viewControllers = [NSArray arrayWithArray:_tabs];

    //To setup the IBOutlets to nil to avoid [CALayer release] crash. ( UILabel, UIView, UIImageView )
    self.outPreviewLabel           = nil;
    self.outPreviewView            = nil;
    self.outPreviewImageView.image = nil;
    self.outPreviewImageView       = nil;

    //Then remove the view and exchanged current controller.
    [self.view removeFromSuperview];
    [self removeFromParentViewController];
    [_rootViewController release];
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:52:15.567

您收到错误是因为一个对象已被释放并且您正试图向它发送一条消息。

如果没有看到您的代码，很难说出您需要做什么才能解决问题。

我建议您阅读 Objective-c 中的内存管理。例如，

[Apple 内存管理文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

但是还有很多其他的文件。如果你不理解这些概念，那么你将来会遇到很多问题。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-11T10:46:20.550

我认为您没有在 viewDidLoad 方法中保留按钮，这就是为什么在一段时间后它们会释放。只需在分配它的末尾添加保留或将其写入@property..

# javascript - Javascript - 等待图像加载

> ID：10104346
> 
> 赞同：3
> 
> 时间：2012-04-11T10:39:23.203
> 
> 标签：javascript, image

```
var l = false;
var l2 = false;

var imm = new Image();
imm.src = "b.png";

imm.onload = function(){
l = true;
}

var imm2 = new Image();
imm2.src = "c.png";

imm2.onload = function(){
l2 = true;
} 
```

我怎样才能告诉这个javascript只有在`l`并且`l2`是真的时才启动一个函数？我应该设置一个不断检查这两个变量的循环吗？有没有更有效的方法？我不希望我的脚本在没有图像的情况下开始，但`.onload`我可以等待只加载一个图像而不是所有图像。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T10:49:45.757

我认为更优雅的方式：

```
var loadedImagesCount = 0;
var imageNames = ["b.png", "c.png"];
var imagesArray = [];
for (var i = 0; i < imageNames.length; i++) {
    var image = new Image();
    image.src = imageNames[i];
    image.onload = function(){
        loadedImagesCount++;
        if (loadedImagesCount >= imageNames.length) {
            //loaded all pictures
        }
    }
    imagesArray.push(image);
} 
```

而不是弄乱许多不同的图像变量，只需将图像名称存储在普通数组中，然后循环遍历并计算加载了多少张图片。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T10:43:29.810

不需要循环。你可以让他们调用一个函数来检查 l 和 l2 是否为真并执行你想做的事情：

```
var onLoaded = function() {
    if (l && l2) {
        // do your stuff
    }
}

imm.onload = function(){
    l = true;
    onLoaded(); // call to onLoaded
}

imm2.onload = function(){
    l2 = true;
    onLoaded(); // call to onLoaded
} 
```

它基本上是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的一种更简单的形式。有诸如[Radio.js 之](http://radio.uxder.com/)类的 jQuery 插件可以为您封装这个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T10:51:08.633

这是一个通用的（*适用于任意数量的图像*）

```
function preload( images, callback){
   var imageElements = [],
       counter = images.length,
       lfunc = function(){if (--counter === 0 && callback) callback(imageElements);};

   // first create the images and apply the onload method
   for (var i = 0, len = images.length; i < len; i++){
      var img = new Image();
      imageElements.push( img );
      img.onload = lfunc;
      img.src = images[i];
   }
}

function codeOncePreloadCompletes(preloadedImages){
  // Do whatever you want here
  // images are preloaded
  // you have access to the preloaded image if you need them
  // with the preloadedImages argument
}

// USAGE

preload( ['b.png', 'c.png'], codeOncePreloadCompletes);

// OR

preload( ['b.png', 'c.png'], function(preloadImages){
   // write directly here what to do after preload
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T19:04:01.273

如果您想从给定的 URL 列表中按顺序加载图像，那么我发现这很有用：

```
preloadImages_helper("firstURL", "secondURL");

    function preloadImages_helper(){
        var args =  Array.prototype.slice.call(arguments);
        if(!(args === undefined) && args.length > 0){
            var img = new Image();
            img.src = arguments[0];
            img.onload = function(){
                preloadedImages.push(img);
                console.log("pushing image");
                //Don't forget to call user code!
                if(!(args === undefined) && args.length > 1){
                    args.shift();
                    preloadImages_helper.apply(this, args);
                }
                else{
                    console.log("finished loading images");
                    userCode();
                }
            };
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:43:15.223

如果这些是整个脚本中唯一设置`l`并`l2`设置的 2 次，那么您可以在设置值后进行检查。

```
var l = false;
var l2 = false;

var imm = new Image();
imm.src = "b.png";

imm.onload = function(){
  l = true;
  if (l && l2) {
    myFunc();
  }
}

var imm2 = new Image();
imm2.src = "c.png";

imm2.onload = function(){
  l2 = true;
  if (l && l2) {
    myFunc();
  }
}

function myFunc(){
  //do stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T10:44:23.457

您不必经常检查，只需在每次完成时检查另一个，这样，当第二个完成时，您的函数将触发，您只需“检查”一次。变量 l = 假；变量 l2 = 假；

```
var imm = new Image();
imm.src = "b.png";

imm.onload = function(){
l = true;

if (l2)
   call yourFunction();

}

var imm2 = new Image();
imm2.src = "c.png";

imm2.onload = function(){
l2 = true;

if (l)
   call yourFunction();
} 
```

# lotus-notes - OS_TRANSLATE_LMBCS_TO_UNICODE 问题

> ID：10104347
> 
> 赞同：0
> 
> 时间：2012-04-11T10:39:30.810
> 
> 标签：lotus-notes, lotus

我正在使用 OSTranslate 将我的邮件正文内容转换为 Unicode 字符串。对于小于 WORD 大小 65535 的 char* 来说，这可以正常工作。

```
WORD Length = MAXWORD;
actualOutLength = OSTranslate(OS_TRANSLATE_LMBCS_TO_UNICODE, (char*)inPtr,
Length, (char*)outPtr, Length); 
```

转换后，输出数组仅包含源字符串的一部分。

请建议设置大小的正确方法是什么，因为我的输入字符串大小超过了 MAXWORD 大小限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:24:45.773

我想出的一种方法是，如果 (MAXWORD-actualOutLength<4) 然后获取输出缓冲区并使用 OS_TRANSLATE_UNICODE_TO_LMBCS 进行反向转换。您将丢弃此结果——但返回的长度是已处理的原始输入缓冲区部分的长度。因此，您可以使用该长度来推进您的 inPtr，再次使用 OS_TRANSLATE_LMBCS_TO_UNICODE 再次调用 OSTranslate 并继续在循环中构建扩展输出缓冲区，直到您耗尽输入缓冲区。请注意，这仅在您的输入字符串针对第 1 组进行了 LMBCS 优化时才有效。如果它针对不同的组进行了优化，则反向翻译长度可能与输入缓冲区中的字符不一致。

另一种方法是在循环中使用 NLS_get 来计算输入缓冲区中最多为 MAXWORD/2 的字符。然后，您可以在输入缓冲区的第一部分使用 NLS_translate 或 OSTranslate，并确保输出适合 MAXWORD。然后从您从 NLS_get 收到的最后一个指针重新开始计数，并继续循环，直到您运行完整个输入缓冲区。

# http - 关系型数据库网络服务

> ID：10104351
> 
> 赞同：1
> 
> 时间：2012-04-11T10:40:02.800
> 
> 标签：http, service, rdbms, sqlanywhere

我想我的标题是错误的，对不起。

在 SQL Anywhere 中，可以选择创建一个服务来处理来自客户端的 HTTP 请求并以 HTML 格式返回文档。这意味着整个应用程序驻留在数据库中，您可以将视图等提供给浏览器。

我的问题是，是否有其他 RDBMS 上的实现来创建类似的东西，而不用其他编程/脚本语言编写任何代码？我一直在研究 Oracle 和 SQL Servers Native XML Web Services，但它们只支持 SOAP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:55:53.083

据我所知，没有其他 RDBMS 服务器具有此功能。我知道 Sybase 有这个想法的[专利](http://patft.uspto.gov/netacgi/nph-Parser?Sect2=PTO1&Sect2=HITOFF&p=1&u=/netahtml/PTO/search-bool.html&r=1&f=G&l=50&d=PALL&RefSrch=yes&Query=PN/7448047)。

*全面披露：我在 SQL Anywhere 工程部门为 Sybase 工作。我的名字是专利上的名字之一。*

# php - 如何实现评论通知？

> ID：10104353
> 
> 赞同：2
> 
> 时间：2012-04-11T10:40:10.473
> 
> 标签：php, mysql

我正在尝试对评论实施通知，也就是说 - 如果我对帖子发表评论，而另一个用户对同一帖子发表评论，我会收到通知。我已经使用此查询处理了帖子所有者的通知

```
SELECT id, owner_id, post_id, user_id2, COUNT(user_id2) AS num, type, UNIX_TIMESTAMP(date_done) AS date 
FROM notification
WHERE owner_id = '$user_id' AND user_id2 != '$user_id' 
ORDER BY date_done DESC 
```

![通知表](../Images/0155e5f0e95ecf229a56586a9f7a4857.png)

在上表中，`owner_id`是拥有帖子的人，是对帖子`user_id2`发表评论的人。

**如何告诉 ID 为 17 的用户有两个人（用户 ID 为 2 和 1）也评论了该帖子？**

如果我应该使用第二张桌子，请告诉我结构应该如何。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:09:57.307

以下查询获取评论过的用户

```
SELECT   DISTINCT user_id2 
FROM notification
WHERE post_id = '$post_id' 
```

但是您不想通知当前发布的人，所以...

```
SELECT   DISTINCT user_id2 
FROM notification
WHERE post_id = '$post_id'
AND user_id2 != '$user_id' 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:09:23.160

我建议将帖子和评论分成具有一对多关系的单独表格

发布{ id，user_id，内容，日期}

评论 { id，post_id，user_id，评论，日期 }

然后，您可以简单地通过超时 ajax 调用轮询您的评论。如果评论已由不是您的 user_id 添加，请在页面中注入通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T04:00:57.407

我创建的这个课程将为您提供详细信息。我已经用“notify_chain”方法完成了你需要做的事情。您将需要查看其他功能，因此我将在此处为您发布整个课程。

```
<?php 

class Notification extends DatabaseObject{

public $id;
public $type;
public $post_id;
public $owner_id;
public $user_id2;
public $date_done;
public $read_or_not;
public $notifications;
public $message;
public $count;

protected static $table_name="notifier";
protected static $db_fields = array('id', 'type', 'post_id', 'owner_id', 'user_id2', 'date_done', 'read_or_not');

public function check_notification(){
    global $database;
    global $session;
    if($session->is_logged_in()) { 
    $id=$session->user_id;

    $sql = "SELECT * FROM notifier WHERE owner_id={$id} AND read_or_not = 0";
    $chk = $database->query($sql);
    if(!empty($chk)){
        while($notifs = $database->fetch_assoc($chk)){
            $message="";
        $this->notifications[]  = $notifs;
        $this->id                           = $notifs['id'];
        $this->type                         = $notifs['type'];
        $this->post_id                  = $notifs['post_id'];
        $this->owner_id                 = $notifs['owner_id'];
        $this->user_id2                 = $notifs['user_id2'];
        $this->date_done                = $notifs['date_done'];
        $this->read_or_not          = $notifs['read_or_not'];
            foreach($notifs as $notif){
                $user=Member::get_name($this->user_id2, false);
                if($this->type=="comment"){
                    $message = "<a href='post.php?post=".$this->post_id."&ntf_clr=".$this->post_id."'>".$user." commented on your post.</a>";
                } elseif($this->type=="reply"){
                    $message = "<a href='comment_reply.php?c_id=".$this->post_id."&ntf_clr=".$this->post_id."&cmt=Comment&rpl=CommentReply'>".$user." replied to your comment.</a>";
                } elseif($this->type=="discussion_comment"){
                    $message = "<a href='discussion.php?discussion=".$this->post_id."&ntf_clr=".$this->post_id."&cmt=Comment&rpl=CommentReply'>".$user." Commented on your discussion.</a>";
                } elseif($this->type=="discussion_reply"){
                    $message = "<a href='comment_reply.php?c_id=".$this->post_id."&ntf_clr=".$this->post_id."&cmt=Comment&rpl=CommentReply'>".$user." replied to your discussion comment.</a>";
                } elseif($this->type=="article_comment"){
                    $message = "<a href='article.php?article=".$this->post_id."&ntf_clr=".$this->post_id."'>".$user." Commented on your article.</a>";
                } elseif($this->type=="article_reply"){
                    $message = "<a href='comment_reply.php?c_id=".$this->post_id."&ntf_clr=".$this->post_id."&cmt=ArticleComment&rpl=ArticleCommentReply'>".$user." replied to your article comment.</a>";
                } elseif($this->type=="chain_comment"){
                    $message = "<a href='post.php?post=".$this->post_id."&ntf_clr=".$this->post_id."'>".$user." also commented to a post.</a>";
                } elseif($this->type=="chain_reply"){
                    $message = "<a href='comment_reply.php?c_id=".$this->post_id."&ntf_clr=".$this->post_id."&cmt=Comment&rpl=CommentReply'>".$user." also replied to a comment.</a>";
                } 
            }
            $this->message = $message_array[] = $message;
        } if(isset($message_array)){return $message_array;}         
        } else{
            return false;
        }
        }   
        }

        public static function mark_as_seen($notif_id){
            global $database;
            global $session;
            $me = $session->user_id;
            $sql = "UPDATE `notifier` SET read_or_not=1 WHERE owner_id = {$me} AND post_id={$notif_id}";
            $clear_notification = $database->query($sql);
        }

        public static function make_notification($post_id, $owner_id, $user_id2, $type="comment"){
            $notif = new Notification();
            $notif->type=$type;
            $notif->post_id=$post_id;
            $notif->owner_id=$owner_id;
            $notif->user_id2=$user_id2;
            $notif->date_done=strftime("%Y-%m-%d %H:%M:%S", time());
            $notif->read_or_not=0;
                $notif->create();
        }

        public static function notif_count($id){
        global $database;
        $notif_cnt = $database->query("SELECT COUNT(*) as notifs FROM notifier WHERE owner_id={$id} AND read_or_not = 0");
        $data=$database->fetch_array($notif_cnt);
        return $data['notifs'];
        }        

        public static function notify_chain($post_id, $user_id2, $type="chain_comment"){
        global $database;
        global $session;
            $sql = "SELECT DISTINCT user_id2 ";
            $sql .= "FROM notifier ";
            $sql .= "WHERE post_id = {$post_id} ";
            $sql .= "AND user_id2 != {$session->user_id} ";
            $chain = $database->query($sql);
        while ($users = $database->fetch_assoc($chain)){
            $list = "";
            foreach ($users as $user){
                Notification::make_notification($post_id, $user, $user_id2, $type="chain_comment");
                $list = $user;
            }
            $list_array[] = $list;
        } return $list_array;

        }

}

$notif = new Notification();

?> 
```

我希望这会有所帮助。如果您有任何问题，请查看 facebook 上的 maestrojosiah PG。

# iphone - 在 UITextView 中创建 UIbutton 和 UIImageview

> ID：10104356
> 
> 赞同：0
> 
> 时间：2012-04-11T10:40:16.230
> 
> 标签：iphone, objective-c, ios, ios5, uitextview

我的屏幕上有一个 UITextview，我在屏幕上拖放创建了 textview，现在我想将按钮添加到 textview 的最后一个（文本视图中的文本结尾），那么我该怎么做呢？

我一直在尝试

```
[super viewDidLoad];
 SelectInvestiList = [[NSMutableArray alloc] initWithCapacity:[InvestiList count]]; 

AppDelegate *appDeleg = (AppDelegate *)[[UIApplication sharedApplication]delegate];

textViewInvest.text=nil;

UIButton*button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(0, 0, 30, 30)];
[button setTitle:@"test" forState:UIControlStateNormal];
[textViewInvest addSubview:button];

NSMutableString *prev=[[NSMutableString alloc] init];
if (appDeleg.chiefCompText != nil) {
    prev=(NSMutableString *) textViewInvest.text;
    [prev appendString:(NSMutableString *) appDeleg.chiefCompText];
    textViewInvest.text=[prev capitalizedString];

}

if (appDeleg.vitalText != nil) {
    prev=(NSMutableString *)textViewInvest.text;
    [prev appendString:(NSMutableString *) appDeleg.vitalText];
    textViewInvest.text=[prev capitalizedString];

} 
```

但这不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:07:45.547

![在此处输入图像描述](../Images/414fd93c5d86d077a98334dcf290a434.png)

```
 UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setFrame:CGRectMake(0, 0, 10, 20)];
        [btn setTitle:@"Ram" forState:UIControlStateNormal];
        //[self.view addSubview:btn];
        [textview addSubview:btn];
set the button frame according to your text in textview. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T11:05:32.210

我不确定您是否正在使用界面生成器。

你可以试试这个

```
UIButton *myButton  =   [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame      =   CGRectMake(0.0, 100.0, 50.0, 30.0);
[yourTextView addSubview:myButton]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T11:04:36.833

我猜你应该在`type`通过代码添加时提到 of 按钮。我刚刚得到它的工作：

```
UIButton*button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(0, 0, 30, 30)];
[button setTitle:@"test" forState:UIControlStateNormal];
[yourTextView addSubview:button]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T11:27:53.880

亲爱的，检查一下，它总是对我有用。

```
for (id view in [textView subviews]) {
        if ([view isKindOfClass:[UIScrollView class]]) {
            UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(0,0,100,35)];
            [view addSubview:btn];
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T11:33:40.120

试试这个代码。这里我也在创建 textview。这对我来说很好。

```
UITextView *yourTextView = [[UITextView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 400.0)];
yourTextView.backgroundColor    =   [UIColor grayColor];
[self.view addSubview:yourTextView];

UIButton *myButton  =   [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame      =   CGRectMake(0.0, 100.0, 50.0, 30.0);
[myButton setTitle:@"GO" forState:UIControlStateNormal];
[yourTextView addSubview:myButton]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T12:05:01.583

它会起作用的。

```
 for (id view in [textView subviews]) {
            if ([view isKindOfClass:[UIScrollView class]]) {
                UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
                [btn setFrame:CGRectMake(0, 0, 10, 20)]; 
                [btn setTitle:@"Ram" forState:UIControlStateNormal];

                [view addSubview:btn];
            }
        } 
```

# grails - GORM，一次保存整个对象图的一对多不起作用，错误在哪里？

> ID：10104368
> 
> 赞同：2
> 
> 时间：2012-04-11T10:41:13.577
> 
> 标签：grails, grails-orm, one-to-many

**问题：** GORM 能够以一对多的关系创建（保存）父对象及其子对象。 [根据这个文档示例](http://grails.org/doc/latest/guide/GORM.html#cascades)但是我的代码在某个地方是错误的，这使得它不可能。请帮我找到它：|

**更新：** 发现了一些错误输入的字母。（由于 STS 在我的 PC 上不起作用......）但问题仍然存在。但是，我对抛出异常的建议感到困惑。仍然需要帮助。

**父模型：**

```
package tanktactics

class Guide {
    String title
    Date created
    SortedSet chapters

    static hasMany = [chapters: Chapter] //changed to has

    static constraints = {
    }
} 
```

**儿童型号：**

```
package tanktactics

class Chapter implements Comparable {
    String title
    String content
    Integer sortOrder
    static belongsTo = [guide: Guide]

    static constraints = {
    }

    int compareTo(obj) {
        sortOrder.compareTo(obj.compareTo) //changed to sort
    }
} 
```

**打印输出`grails console`：**

```
import tanktactics.Guide
import tanktactics.Chapter

some_guide = new Guide(title: "First guide!", created: new Date())
some_guide.addToChapters(new Chapter(title: "Ch II", content: "Lorem II", sortOrder:1))
    .addToChapters(new Chapter(title: "Ch I", content: "Lorem", sortOrder:0))
    .save()

some_guide.title
some_guide.chapters[0].title
some_guide.chapters[0].content
some_guide.chapters[1].title
some_guide.chapters[1].content

groovy> import tanktactics.Guide 
groovy> import tanktactics.Chapter 
groovy> some_guide = new Guide(title: "First guide!", created: new Date()) 
groovy> some_guide.addToChapters(new Chapter(title: "Ch II", content: "Lorem II", sortOrder:1)).addToChapters(new Chapter(title: "Ch I", content: "Lorem", sortOrder:0)).save() 
groovy> some_guide.title 
groovy> some_guide.chapters[0].title 
groovy> some_guide.chapters[0].content 
groovy> some_guide.chapters[1].title 
groovy> some_guide.chapters[1].content 

Exception thrown

groovy.lang.MissingMethodException: No signature of method: tanktactics.Guide.addToChapters() is applicable for argument types: (tanktactics.Chapter) values: [tanktactics.Chapter : null]
Possible solutions: addToChapters(java.lang.Object), getChapters()
    at com.springsource.loaded.ri.ReflectiveInterceptor.jlrConstructorNewInstance(ReflectiveInterceptor.java:963)
    at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
    at temp_test.run(temp_test.groovy:6)
    at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
    at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:48:39.653

看来你在指南课上拼错了。可能您的意思是**hasMany**而不是 hadMany。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:54:58.687

您还应该将此代码放入您的域类（以及具有 hasMany 属性的所有其他类中）：

```
static mapping = {
    chapters(cascade:"all-delete-orphan")
} 
```

# spring - 使用 Spring 和 Maven 进行测试：applicationContext

> ID：10104372
> 
> 赞同：34
> 
> 时间：2012-04-11T10:41:25.243
> 
> 标签：spring, unit-testing, maven

似乎这个问题像世界一样古老，但我仍然找不到解决方案..

我正在尝试运行简单的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/applicationContext.xml", "/PersonsPopulateTest-context.xml"})
@Transactional
public class PersonsPopulateTest { 
```

文件位于：

```
src
   main
      resources
           applicationContext.xml 
```

和

```
src        
   test
      resources
          PersonsPopulateTest-context.xml 
```

因此，在构建这些文件之后，它们位于**target/classes**和**target/test-classes**

但是 mvn test 命令仍然说： Failed to load ApplicationContext

官方文档怎么说：

```
@RunWith(SpringJUnit4ClassRunner.class)
// ApplicationContext will be loaded from "/applicationContext.xml" and "/applicationContext-test.xml"
// in the root of the classpath
@ContextConfiguration(locations={"/applicationContext.xml", "/applicationContext-test.xml"})
public class MyTest {
    // class body...
} 
```

我哪里做错了？

谢谢，弗莱基米尔

更新。万无一失的报告：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.IllegalArgumentException: Can not load an ApplicationContext with a NULL 'contextLoader'. Consider annotating your test class with @ContextConfiguration.
at org.springframework.util.Assert.notNull(Assert.java:112)
at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:117)
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
... 30 more 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T09:57:25.460

我认为 Maven 根本没有包含来自 main/resources 的 XML 文件。

您可以尝试明确指定要包含在 pom.xml 中的内容。

让我知道以下配置是否有效：

```
 <!-- Add this directly after the <build>-opening tag -->
    <resources>
        <resource>
            <filtering>true</filtering>
            <directory>src/test/resources</directory>
            <includes>
                <include>**/*.properties</include>
            </includes>
            <excludes>
                <exclude>**/*local.properties</exclude>
            </excludes>
        </resource>
        <resource>
            <directory>src/main/resources</directory>
            <includes>
                <include>**/*.properties</include>
                <include>**/*.xml</include>
            </includes>
        </resource>
    </resources> 
```

这是我在你的情况下使用的东西。如果您没有要包含的属性文件，您可以编辑它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T12:08:16.637

我的测试上下文文件位于**src\test\resources\spring**文件夹下。我设法加载上下文

```
@ContextConfiguration(locations={"classpath:**/test-context.xml"}) 
```

但是（在 test-context.xml 中）对**src\main\resources\spring**文件夹下的 application-context.xml 的引用失败

我设法通过在测试类中创建一个 ClassPathXmlApplicationContext 来加载应用程序上下文

```
ClassPathXmlApplicationContext appContext=new ClassPathXmlApplicationContext(new String[]{"classpath:spring/application-context.xml","classpath:spring/model-context.xml"}); 
```

让我知道这是否有帮助或可能会产生任何其他问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-14T08:56:52.517

您的应用程序上下文必须包含在类路径中并放入 * ：

```
@ContextConfiguration(locations = { "classpath:*/application-context.xml" }) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-05T11:38:04.670

我认为最佳实践是将用于测试 PersonsPopulateTest-context.xml 的应用程序上下文文件放在 src/test/resources 下。该文件将被复制到**目标/测试类**中，您可以在测试类中引用它，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:**/PersonsPopulateTest-context.xml"})
@Transactional
public class PersonsPopulateTest {

} 
```

如果你仍然想引用 src/main/resources 下的 applicationContext.xml，那么你必须包含它如下：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"file:src/main/resources/applicationContext.xml"})
@Transactional
public class PersonsPopulateTest {

} 
```

它对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-19T20:36:48.613

```
<!-- Add this directly after the <build>-opening tag in the your pom-->
            <testResources>
                <testResource>
                    <directory>src/test/resources</directory>
                    <filtering>true</filtering>
                    <includes>
                        <include>**/*.xml</include>
                        <include>**/*.properties</include>
                    </includes>
                </testResource>
            </testResources> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-29T22:32:04.093

出于某种原因，我遇到了同样的问题，当我使用 JDK6 而不是 JDK8 运行 maven 测试时它起作用了（在我的情况下，这是一个遗留应用程序）

如果它帮助任何人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-11T01:14:48.713

我遇到了同样的问题。对我来说，测试通过 eclipse 成功运行。但是，当我运行时`mvn test`，它给了我错误：**Failed to load ApplicationContext**

> 修复：将 src/test/resources 目录添加到 surefire 插件的类路径中 -

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.10</version>
            <configuration>
                <additionalClasspathElements>
                    <additionalClasspathElement>${project.basedir}/src/test/resources</additionalClasspathElement>
                </additionalClasspathElements>      
            </configuration> 
```

[将类路径添加到 SureFire](http://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html)

希望能帮助到你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-12T08:44:48.720

我有同样的问题，所有文件都成功复制到**target/classes**和**target/test-classes**，仍然**spring**找不到它们。

当我在**pom**中明确指定**maven-surefire-plugin**和**maven-resources-plugin的版本时，问题消失了**

 *** * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-04T15:50:46.080

更新：实际上在我的情况下，问题在于`Compile on Save`启用了选项。我使用 Netbeans，选项设置为`For test execution only`. 此值编译更改的文件并用新文件替换资源。但是，由于额外使用应用程序资源来测试资源，会在文件夹`For test execution only`中生成错误生成的资源。`target`

改变`Compile on Save=For test execution only`

解决`Compile on Save=Disable` **问题。**

下面的文字也是正确的，但有时不起作用。直到我重新启动 Netbeans IDE 才有效。但是，问题原因的详细信息是正确的，因此，我宁愿离开测试。

* * *

OLD：在我的情况下，我`appContext-test.xml`有`src/main/resources`。当我更改任何代码并启动一个单元测试（不是全部）时，它会重新编译并正确执行。但是，如果我再次启动相同的单元测试，它会因`java.lang.IllegalStateException: Failed to load ApplicationContext`.

我已经`pom.xml`从

```
<build>
    <resources>
        <resource>
            <directory>${project.basedir}/src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>${project.basedir}/src/test/java/resources</directory>
            <filtering>true</filtering>
        </testResource>
    </testResources>
</build> 
```

到

```
<build>
    <resources>
        <resource>
            <directory>${project.basedir}/src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>${project.basedir}/src/main/resources</directory>
            <filtering>true</filtering>
        </testResource>
        <testResource>
            <directory>${project.basedir}/src/test/java/resources</directory>
            <filtering>true</filtering>
        </testResource>
    </testResources>
</build> 
```

现在一切正常。

该**错误是由于**使用`appContext-test.xml`具有`src/main/resources/my.properties`很多变量的文件，例如

```
database.url = ${database.url}
database.username = ${database.username}
database.password = ${database.password} 
```

在构建过程中填充。但是，如果您跳过`src/main/resources`, `testResource`then将按原样`my.properties`添加， ig 没有替换。`target/classes/my.properties`这个文件当然打破了上下文。

PS：您可以删除`${project.basedir}/`-这是我的自定义内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-14T09:53:45.137

在您的集成测试类中，尝试添加

```
@Test
public void contextLoads(){
} 
```**

# javascript - 通过键盘更新圆形包布局

> ID：10104375
> 
> 赞同：1
> 
> 时间：2012-04-11T10:41:40.353
> 
> 标签：javascript, d3.js, keyboard, circle-pack

我有一个圆形包布局，它代表 json 文件中的一些数据。当我单击键盘上的左右箭头时，我希望更新包布局。我设法更新了圆圈的位置，但没有更新半径。你能看看下面的代码吗？我的圈子包并不是真正的分层，我的意思是我只有一个父级，id 为“coreCircle”的圈子，然后是里面的所有子级。

谢谢，RM

```
var pack = d3.layout.pack()
  .value(function(d) {
    return d.someField;
  })
  .children(
    function children(d) {
      return d.someArray;
  });

var corevis = d3.select('#svgCoreGroup');

// Creating the circle packed core
var gNodes = corevis.data([json]).selectAll("g.node")
  .data(pack.nodes, function(d) {return (d.children ? "coreCircle" : d.name)});

// Remove
gNodes.exit().remove()

// Update
corevis
  .data([json]).selectAll("g.node")
  .data(pack.nodes, function(d) {return (d.children ? "coreCircle" : d.name)})
  .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
  .attr("id", function(d) { return d.children ? "coreCircle" : null; })
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
  .selectAll("circle")
  .transition()
  .duration(500)
  .attr("r", function(d) { return d.children ? coreSize : d.r; });

var node = gNodes
  .enter().append("g")
  .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
  .attr("id", function(d) { return d.children ? "coreCircle" : null; })
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

node.append("circle")
  .attr("r", function(d) { return d.children ? coreSize : d.r; }) 
```

# ios - 如何将 PDF 作为输入传递给打印机

> ID：10104382
> 
> 赞同：7
> 
> 时间：2012-04-11T10:42:35.673
> 
> 标签：ios, objective-c, iphone, pdf, printing

我是 iPhone 开发的新手，我需要打印 UIView。所以我将 UIView 转换为 PDF，它对我来说工作正常.. 但我不知道如何将此 PDF 传递给打印机以便打印，任何人都可以帮助解决这个问题

提前致谢

我的代码是：

```
- (void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    NSMutableData *pdfData = [NSMutableData data];
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();
    [aView.layer renderInContext:pdfContext];
    UIGraphicsEndPDFContext();
       NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
}

-(void)getPDF{
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); 
     NSString *documentsPath = [paths objectAtIndex:0]; 
     NSString *filePath = [documentsPath stringByAppendingPathComponent:@"myPdf"];
     NSLog(@"filePath: %@",filePath);

     NSData *pngData = [NSData dataWithContentsOfFile:filePath];
    [displayPDFView loadData:pngData MIMEType:@"application/pdf" textEncodingName:@"utf-8" baseURL:nil];
    [self.view setBackgroundColor:[UIColor colorWithWhite:0.5 alpha:0.0]];
    displayPDFView.hidden = NO;

} 
```

// 打印机代码

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"demo" ofType:@"png"];
    NSData *dataFromPath = [NSData dataWithContentsOfFile:path];

    UIPrintInteractionController *printController = [UIPrintInteractionController sharedPrintController];

    if(printController && [UIPrintInteractionController canPrintData:dataFromPath]) {

        printController.delegate = self;

        UIPrintInfo *printInfo = [UIPrintInfo printInfo];
        printInfo.outputType = UIPrintInfoOutputGeneral;
        printInfo.jobName = [path lastPathComponent];
        printInfo.duplex = UIPrintInfoDuplexLongEdge;
        printController.printInfo = printInfo;
        printController.showsPageRange = YES;
        printController.printingItem = dataFromPath;

        void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
            if (!completed && error) {
                NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
            }
        };

        [printController presentFromRect:btnPrint.frame inView:btnPrint.superview
                                animated:YES completionHandler:completionHandler];
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T10:51:28.473

您可以通过此代码打印 pdf....

```
 #if (READER_ENABLE_PRINT == TRUE) // Option

Class printInteractionController = NSClassFromString(@"UIPrintInteractionController");

if ((printInteractionController != nil) && [printInteractionController isPrintingAvailable])
{
    NSURL *fileURL = document.fileURL; // Document file URL

    printInteraction = [printInteractionController sharedPrintController];

    if ([printInteractionController canPrintURL:fileURL] == YES)
    {
        UIPrintInfo *printInfo = [NSClassFromString(@"UIPrintInfo") printInfo];

        printInfo.duplex = UIPrintInfoDuplexLongEdge;
        printInfo.outputType = UIPrintInfoOutputGeneral;
        printInfo.jobName = document.fileName;

        printInteraction.printInfo = printInfo;
        printInteraction.printingItem = fileURL;
        printInteraction.showsPageRange = YES;

        [printInteraction presentFromRect:button.bounds inView:button animated:YES completionHandler:
            ^(UIPrintInteractionController *pic, BOOL completed, NSError *error)
            {
                #ifdef DEBUG
                    if ((completed == NO) && (error != nil)) NSLog(@"%s %@", __FUNCTION__, error);
                #endif
            }
        ];
    }
}

  #endif // 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-05T23:41:39.957

如果有人在 swift 4 中查看相同的代码，则为：

```
@IBAction func airPrint(_ sender: Any) {
    //call method below to generate pdf file
    createPdfFromView(aView: self.view, saveToDocumentsWithFileName: "sample")
    var paths = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)
    let documentsPath: String = paths[0]
    let filePath = URL(fileURLWithPath: documentsPath).appendingPathComponent("sample")
    print("filePath: \(filePath.path)")

    //AirPrint     
    let printController = UIPrintInteractionController.shared
    let printInfo = UIPrintInfo(dictionary : nil)
    printInfo.duplex = .longEdge
    printInfo.outputType = .general
    printInfo.jobName = "Test"
    printController.printInfo = printInfo
    printController.printingItem = filePath
    printController.present(animated : true, completionHandler : nil)
}

func createPdfFromView(aView: UIView, saveToDocumentsWithFileName fileName: String)
{
    let pdfData = NSMutableData()
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil)
    UIGraphicsBeginPDFPage()

    guard let pdfContext = UIGraphicsGetCurrentContext() else { return }

    aView.layer.render(in: pdfContext)
    UIGraphicsEndPDFContext()

    if let documentDirectories = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first {
        let documentsFileName = documentDirectories + "/" + fileName
        debugPrint(documentsFileName)
        pdfData.write(toFile: documentsFileName, atomically: true)
    }
} 
```

# ios - 附加/删除 UIGestureRecognizers 的正确方法

> ID：10104386
> 
> 赞同：10
> 
> 时间：2012-04-11T10:43:11.680
> 
> 标签：ios, uigesturerecognizer

在视图上附加和删除 UIGestureRecognizer 的正确方法是什么？

我通常在`-viewDidLoad`. 我应该`removeGestureRecognizer`在 中使用`-viewDidUnload`吗？还是它们会自动删除？

例如，创建 UIGestureRecognizer 属性并在 viewController 的 init 方法中对其进行初始化，然后在`-viewDidAppear`/中附加/删除此 gestureRecognizer 属性是更好的方法`-viewDidDisappear`吗？

（注意我使用的是 ARC）

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T17:57:54.550

本质上，您可以在有意义的情况下创建、添加和删除手势识别器。并且“何时有意义”取决于一些事情，但通常仅取决于您是否将它们保留为 ivars。关键`ARC`是管理强引用；默认情况下，使用`ARC`ivars 很强大。

因此，假设您添加了一个水龙头识别器。在这种情况下，您不需要再次访问识别器。我会这样创建它：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.view addGestureRecognizer:tap];
} 
```

在这种情况下，您无需执行任何其他操作来管理此识别器。视图系统对它有很强的参考。你所做的就是坐等它来电`handleTap:`。当视图卸载时，这个点击识别器将被释放。

这种情况也不适合添加此识别器，`viewWillAppear:`因为不难想象会导致创建多个识别器的一系列事件。

因此，从逻辑上讲，如果您想在外观方法中添加识别器，则必须在 ivar 中对它们进行某种引用。但同样，这并不总是一个坏主意。通常，您希望引用识别器的原因是帮助`<UIGestureRecognizerDelegate>`方法的逻辑（如果使用它们）。

我个人以后永远不会在`initWith..`附件方法中添加识别器。唯一的优点是您在那里创建的任何识别器都将保留在视图控制器的整个生命周期中。但是，由于识别器显然是视图系统的一部分，所以这种混淆了`MVC`Cocoa 的优势。同样在内存不足的情况下，导航堆栈上的控制器视图会被清除，但在这种情况下，识别器可能会无缘无故地继续使用内存（不是存在巨大的对象）。

您当然可以在方法中添加识别`view(Will/Did)Appear:`器，然后在`view(Will/Did)Disappear:`. 不是我的偏好。我不认为仅仅因为一个`modal`视图被呈现和删除或者导航`push`/`pop`已经发生，我应该删除并重新添加我的识别器。

我建议几乎总是使用`viewDidLoad`来实例化和附加你的识别器。只要记住消除对它们的任何强引用，`viewDidUnload`以帮助解决内存不足的情况。再一次，`ARC`在 dealloc 中不需要对 ivars 做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:52:17.193

`viewDidUnload`仅在内存不足的情况下被调用，并且根本不保证被调用。因此，在 中删除的任何手势识别器`viewDidUnload`也应在 中删除`dealloc`。您提到的任何一种方法都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:04:55.830

好吧`viewWillAppear:Animated`，`viewWillDisappear:animated`据我所知，这将是用手势做任何事情的最佳选择。

# sql - Drupal 中的数据库查询

> ID：10104391
> 
> 赞同：2
> 
> 时间：2012-04-11T10:43:34.283
> 
> 标签：sql, database, drupal, select

所以我在 Drupal 中有这个 sql 代码：

```
$query = db_query('SELECT wpv.nid, n.title, AVG(vote) average FROM {wp_votes} wpv
    LEFT JOIN {node} n on wpv.nid = n.nid
    GROUP BY wpv.nid
    ORDER BY average DESC
    LIMIT 3'); 
```

它工作得很好，但我需要用 db_select 编写它：

```
$query2 = db_select('wp_votes','wpv');
$query2->join('node','n','wpv.nid = n.nid');
$query2->fields('wpv',array('nid','vote'));
$query2->fields('n',array('title'));
$rez = $query2->execute()->fetchAll(); 
```

我的问题是我不知道如何获得平均票数（票数是 1,2 或 3）。我如何用 AVG(vote) 重写部分。我尝试使用 addEXpression('AVG(vote)') 但它没有按预期工作，我得到了所有条目的平均值，而不仅仅是那些具有相同 ID 的条目。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:06:51.990

好像忘记用了 ``$query->groupBy('wpv.nid');``

这就是您获得所有记录的 AVG 的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:36:48.993

对于 AVG，您需要使用[addExpression()](http://api.drupal.org/api/drupal/includes!database!select.inc/function/SelectQuery%3a%3aaddExpression/7)和 groupBy，您将拥有类似这样的内容

```
<?php
$query2 = db_select('wp_votes','wpv');
$query2->join('node','n','wpv.nid = n.nid');
$query2->fields('wpv',array('nid','vote'));
$query2->fields('n',array('title'));
$alias = $query2->addExpression('AVG(vote)', 'average');
$query2->groupBy('wpv.nid');
$query2->sortBy($alias, 'DESC');
$rez = $query2->execute()->fetchAll(); 
```

我不确定按 $alias 排序，但理论上它应该可以工作。

# javascript - 在 JS/jQuery 中限制 jSonArray 的大小

> ID：10104395
> 
> 赞同：2
> 
> 时间：2012-04-11T10:44:12.973
> 
> 标签：javascript, jquery, json

我有一个类似这样的 jsonArray。

```
var json_array = [
    { "text": "id", "size": 4}, 
    { "text": "manifesto", "size": 4}, 
    { "text": "also", "size": 4}, 
    { "text": "leasing", "size": 4},
    { "text": "23", "size": 4}, 
    ...
]; 
```

我想得到这个 json_array 的前 n 个元素。

最好的方法是什么？除了迭代它们并有一个计数器来限制大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:45:37.233

速记（[MDN Docu](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/length)）：

```
json_array.length = n; 
```

稍长一些（[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)）：

```
json_array.splice( n ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:49:05.073

```
var shorter_array = json_array.splice(0, N); 
```

[http://www.w3schools.com/jsref/jsref_splice.asp](http://www.w3schools.com/jsref/jsref_splice.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:49:40.070

要复制原始数组：

```
var newArray = json_array.slice(0, n); 
```

请注意，此副本不是递归的。这意味着如果您更改对象中的某些内容，`newArray`它也将更改`json_array`.

* * *

或者正如@Sirko 所说，您可以从数组中删除元素：

```
json_array.length = n; 
```

# android - Drawable 在 Android 的 mapView 中触摸时不会改变其位置。怎么做？

> ID：10104398
> 
> 赞同：2
> 
> 时间：2012-04-11T10:44:24.983
> 
> 标签：android

这是我处理位置的代码。每次触摸地图上的某个地方时，我都想更改可绘制对象。虽然，我得到了位置，但drawable仍然是固定的。怎么做？

```
public class LocationActivity extends MapActivity{

    Bundle bundle  = new Bundle();
    MapView mapView; 
    MapController mc;
    double lat,lon;
    GeoPoint p;
    ArrayList <String> address  = new ArrayList<String>();
    List<Address> addresses;
    Location location;
    private LocationManager locationManager; 
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        mapView = (MapView) findViewById(R.id.mapView1);

        LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

         Criteria criteria = new Criteria(); 
            //criteria.setAccuracy(Criteria.ACCURACY_FINE);
             criteria.setAltitudeRequired(false);
             criteria.setBearingRequired(false);
             criteria.setCostAllowed(true);
             String strLocationProvider = lm.getBestProvider(criteria, true);

             mc = mapView.getController();

             try {
                 location = lm.getLastKnownLocation(strLocationProvider);
                if (location != null) {
                    double lon =  (double) location.getLongitude();
                    double lat = (double) location.getLatitude();
                    //lat = 20.00;
                    // lon = 52.00;
                    p = new GeoPoint((int) (lat * 1E6),  (int) (lon * 1E6));
                    mc.animateTo(p);
                    mapView.displayZoomControls(true);

                    mc.setZoom(17);

                    MapOverlay mapOverlay = new MapOverlay();
                    List<Overlay> listOfOverlays = mapView.getOverlays();
                    listOfOverlays.clear();

                    listOfOverlays.add(mapOverlay); 

                    Geocoder gcd = new Geocoder(this, Locale.getDefault());

                    try {
                        addresses = gcd.getFromLocation(lat,lon,1);
                        if (addresses.size() > 0 && addresses != null) {

                                address.add(addresses.get(0).getFeatureName()); 
                                address.add(addresses.get(0).getLocality());
                                address.add(addresses.get(0).getAdminArea());
                                address.add(addresses.get(0).getCountryName());

                                bundle.putStringArrayList("id1", address);
                        }
                        bundle.putDouble("lat", lat);
                        bundle.putDouble("lon", lon);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            }

    }
    class MapOverlay extends com.google.android.maps.Overlay
    {
        @Override
        public boolean draw(Canvas canvas, MapView mapView, 
        boolean shadow, long when) 
        {
            super.draw(canvas, mapView, shadow);                   

            //---translate the GeoPoint to screen pixels---
            Point screenPts = new Point();
            mapView.getProjection().toPixels(p, screenPts);

            //---add the marker---
            Bitmap bmp = BitmapFactory.decodeResource(
            getResources(), R.drawable.logo);            
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
            return true;
        }

        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) 
        {   
            //---when user lifts his finger---
            if (event.getAction() == 1) {  
                 Bundle bundle  = new Bundle();
                 ArrayList <String> address  = new ArrayList<String>();

                GeoPoint p = mapView.getProjection().fromPixels(
                        (int) event.getX(),
                        (int) event.getY());

                    Geocoder geoCoder = new Geocoder(
                        getBaseContext(), Locale.getDefault());
                    try {
                        List<Address> addresses = geoCoder.getFromLocation(
                            p.getLatitudeE6()  / 1E6, 
                            p.getLongitudeE6() / 1E6, 1);
                            addOverLay();
                        String add = "";
                        if (addresses.size() > 0) 
                        {
                            address.add(addresses.get(0).getFeatureName()); 
                            address.add(addresses.get(0).getLocality());
                            address.add(addresses.get(0).getAdminArea());
                            address.add(addresses.get(0).getCountryName());

                            bundle.putStringArrayList("id1", address);

                            for(int i = 0; i <= addresses.size();i++)
                               add += addresses.get(0).getAddressLine(i) + "\n";
                        }

                        bundle.putDouble("lat",   p.getLatitudeE6()  / 1E6);
                        bundle.putDouble("lon",  p.getLongitudeE6() / 1E6);

                        Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
                    }
                    catch (IOException e) {                
                        e.printStackTrace();
                    }   
                    return true;
                }
                else                
                    return false;
            }        
    } 

    public void onClick_mapButton(View v)
        {

        Intent intent = this.getIntent();
               this.setResult(RESULT_OK, intent);

               intent.putExtras(bundle);

               finish();

        }

    public void addOverLay()
    {
               MapOverlay mapOverlay = new MapOverlay();
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();

                listOfOverlays.add(mapOverlay); 
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

# r - 从表对象中提取一行

> ID：10104400
> 
> 赞同：26
> 
> 时间：2012-04-11T10:44:28.987
> 
> 标签：r, row

我想知道如何从 R 中的表中获取特定行。例如，

```
> a <- c(13,13, 
    14,14,14,14,14,14,
    15,15,15,15,15,15,
    16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
    17,17,17,17,17,17,17,
    18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,
    19,19,19,19,19,19,19,19,19,19,19,
    20,20,20,20,20,20,20,20,20,
    21,21,21,21,21,21,21,21,21,21,21,
    22,22,22,22,22,22,22,22,22,
    23,23,23,24,25,25,27)
> table(a)
a
13 14 15 16 17 18 19 20 21 22 23 24 25 27 
2  6  6 15  7 17 11  9 11  9  3  1  2  1 
```

如何提取表格的最后一行？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-11T10:47:51.820

该函数`str()`允许您询问对象的结构

```
str(table(a))
# 'table' int [1:14(1d)] 2 6 6 15 7 17 11 9 11 9 ...
# - attr(*, "dimnames")=List of 1
#  ..$ a: chr [1:14] "13" "14" "15" "16" ... 
```

您的*表格*对象类似于矢量（它只是有一些额外的标签/属性）。至关重要的是，您可以以通常的方式访问元素：

```
R> b = table(a)
##To get the numerical values
R> as.vector(b)
 [1]  2  6  6 15  7 17 11  9 11  9  3  1  2  1
##To get the names
R> names(b)
 [1] "13" "14" "15" "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "27" 
```

此外，我们可以使用标准的子设置规则

```
##Get the last element in the named vector
R> b[length(b)]
27 
 1 
R> names(b)[length(b)]
[1] "27" 
```

# jquery-ui - 在 Jquery 选项卡中插入 Google 地图

> ID：10104401
> 
> 赞同：-1
> 
> 时间：2012-04-11T10:44:36.717
> 
> 标签：jquery-ui, google-maps

我在我的页面中插入了一个简单的谷歌地图： [http ://www.albertanglada.es/index.php?page=test](http://www.albertanglada.es/index.php?page=test)

但是如果我将它插入一个标签（Ubicacion） [http://www.albertanglada.es/index.php?page=anunciantes&anunciantes=nuevo-estilo](http://www.albertanglada.es/index.php?page=anunciantes&anunciantes=nuevo-estilo) http://www.albertanglada.es/index.php?page=anunciantes&anunciantes=新埃斯蒂洛#mapa

地图显示不好，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:57:35.560

无法看到您的页面 - 在 jquery ui 选项卡页面上阅读有关谷歌地图显示的内容，也许它会有所帮助。

[Jquery ui 谷歌地图信息](http://jqueryui.com/demos/tabs/#...my_slider.2C_Google_Map.2C_sIFR_etc._not_work_when_placed_in_a_hidden_.28inactive.29_tab.3F)

# c# - 发送 JSON 请求 c# mvc3

> ID：10104403
> 
> 赞同：0
> 
> 时间：2012-04-11T10:44:50.267
> 
> 标签：c#, json, asp.net-mvc-3

我正在尝试为电影指南移动应用程序创建一个 api，现在我需要将包含有关电影信息的 json 返回给用户。

我的请求网址是

/mobile/details/{id}

以下是控制器：

```
public ActionResult Details(int id)
{
    return View(kr.GetMovie(id));
} 
```

GetMovie(id) 将一个 Movie 类型的对象返回给包含所有信息的视图；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:48:45.057

你应该使用 jsonresult 作为动作来发回数据

```
public JsonResult details(string movieName)
        {
            var data = new {
                               name="Movie name"
                           };

            return Json(data, JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:48:31.513

```
public JsonResult Details(int id)
{
    return Json(kr.GetMovie(id),JsonRequestBehavior.AllowGet));
} 
```

只要 Movie 对象是可序列化的，这将起作用，否则您需要创建一个 viewModel 来表示您的 Movie 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:49:15.857

```
public JsonResult Details(int id)
{
    var data =   kr.GetMovie(id);
    return Json(data, JsonRequestBehavior.AllowGet);
} 
```

您可能还想查看[web api](http://www.asp.net/web-api)。

[http://www.cleancode.co.nz/blog/739/ajax-aspnet-mvc-3](http://www.cleancode.co.nz/blog/739/ajax-aspnet-mvc-3)

# php - PHP：实例化一个类并使用另一个类的方法

> ID：10104404
> 
> 赞同：0
> 
> 时间：2012-04-11T10:44:51.790
> 
> 标签：php, class, methods, instantiation

我有一个名为 A 的类。我有另一个扩展 A 的名为 B 的类。我必须实例化 A，而不是 B，但我也需要使用 B 中的方法。我怎样才能做到这一点？

```
Class A
{
    public function foo() { }
}

Class B extends A
{
    public function bar() { }
}

$a = new A();
$a->bar(); 
```

我知道这是不可能的，但我需要一个解决方案。

PS：我希望这个问题的标题是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:17:16.117

```
$a = new A();
$a->bar(); 
```

会给你致命的错误。因为`bar()`不是类的方法`A`。所以你不能使用`A`类的对象来调用它。

这将正常工作：

```
Class A
{
   public function foo() { }
}

Class B extends A
{
   public static function bar() {  }
}

$a = new A();
B::bar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:19:53.663

我认为，您只是误解了 PHP 的语法（**[有时会让人感到困惑](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)**）

该`extends`关键字不会*扩展*父类 ( `A`)，但会创建一个新类`B`，它是 的子类`A`。`B`继承`A`的方法，但`A`本身没有改变。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T10:51:07.177

B中的方法可以变成静态的吗？

```
Class A
{
    public function foo() { }
}

Class B extends A
{
    public static function bar2() { }
}

$a = new A();
$a->bar();
B::bar2(); 
```

显然，将其命名为不同的名称是有意义的，因为 B::bar() 正在覆盖 A::bar() 实现。

我认为您的结构可能略有偏差。尝试将您想要的内容作为可重用的代码片段抽象到它自己的例程中。

# jquery-mobile - 如何在不使用查询字符串的情况下在 jquery mobile 中将数据从一个页面传递到另一个页面？

> ID：10104407
> 
> 赞同：1
> 
> 时间：2012-04-11T10:45:06.190
> 
> 标签：jquery-mobile

如何在不使用查询字符串的情况下在 jquery mobile 中将数据从一个页面传递到另一个页面？
是否可以使用 dom 传递数据任何人都可以帮助我.. 我在 page1 中有员工 ID 单击提交按钮页面导航到 page2 中的 page2 我有一个下拉列表，它应该在页面加载之前填写pageshow 我应该将员工 id 的值作为输入传递给下拉列表，而不使用查询字符串或本地存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:45:26.583

为什么不直接使用 PHP 并为员工 ID 创建一个 SESSION 变量或 POST 变量？当他们关闭浏览器时，该变量将被销毁。

# c++ - 函数参数 C++ 中的赋值运算符

> ID：10104415
> 
> 赞同：11
> 
> 时间：2012-04-11T10:45:33.490
> 
> 标签：c++, parameters, assignment-operator, function-parameter

我正在研究数据结构（列表、堆栈、队列），这部分代码让我感到困惑。

```
ListNode( const Object& theElement = Object(), ListNode * node = NULL);

template<class Object>
ListNode<Object>::ListNode( const Object& theElement, ListNode<Object> * node) {
    element = theElement;
    next = node;
} 
```

1.  为什么函数参数中有赋值运算符？
2.  打电话有什么作用`Object()`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T10:47:05.800

这些不是赋值运算符。这些是函数的[***默认参数***](http://en.cppreference.com/w/cpp/language/default_arguments)。

一个函数可以有一个或多个*默认参数*，这意味着如果在调用点没有提供任何参数，则使用默认值。

```
void foo(int x = 10) { std::cout << x << std::endl; }

int main()
{
  foo(5); // will print 5
  foo(); // will print 10, because no argument was provided
} 
```

在您发布的示例代码中，`ListNode`构造函数有两个带有默认参数的参数。第一个默认参数是`Object()`，它只是调用 的默认[***构造函数***](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.4)。`Object`这意味着如果没有`Object`实例传递给`ListNode`构造函数，`Object()`则将使用默认值 of ，这意味着默认构造的`Object`。

另见：
[使用默认函数参数的优势 函数参数](https://stackoverflow.com/questions/4755104/advantage-of-using-default-function-parameter)
[的默认值](https://stackoverflow.com/questions/2842928/default-value-of-function-parameter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T10:48:45.207

声明中的赋值为*可选参数*提供默认值。`Object()`表示对`Object`的默认构造函数的调用。

默认参数的作用如下：可以调用`ListNode`带有零个、一个或两个参数的构造函数。如果您指定两个参数表达式，它们将照常传递。如果仅指定一个表达式，则其值作为第一个参数传递，第二个参数默认为`NULL`. 如果不传递任何参数，则第一个参数默认为`Object`created 及其默认构造函数的实例，第二个参数默认为`NULL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T08:29:13.543

访问[http://www.errorless-c.in/2013/10/operators-and-expressions.html](http://www.errorless-c.in/2013/10/operators-and-expressions.html)了解 c 编程语言中的运算符和表达式

# python - wxTreeCtrl 上的上下文菜单

> ID：10104416
> 
> 赞同：3
> 
> 时间：2012-04-11T10:45:34.817
> 
> 标签：python, wxpython

我正在尝试在 TreeCtrl 上创建上下文菜单。这是一个简化的示例程序：

```
import wx

class ContextMenu(object):
    def __init__(self):
        super(ContextMenu, self).__init__()
        self._menu = None
        self.Bind(wx.EVT_CONTEXT_MENU, self.OnContextMenu)

    def OnContextMenu(self, event):
        if self._menu is not None:
            self._menu.Destroy()
        self._menu = wx.Menu()
        self.CreateContextMenu(self._menu)
        self.PopupMenu(self._menu)

    def CreateContextMenu(self, menu):
        raise NotImplementedError

class MyList(wx.TreeCtrl, ContextMenu):
    def __init__(self, parent, *args, **kwargs):
        super(MyList, self).__init__(parent, style=wx.TR_DEFAULT_STYLE|wx.TR_HIDE_ROOT)
        ContextMenu.__init__(self)

        self.root = self.AddRoot('')
        self.SetItemHasChildren(self.root, True)

        self.node1 = self.AppendItem(self.root, 'Node 1')
        self.node2 = self.AppendItem(self.root, 'Node 2')
        self.SetItemHasChildren(self.node2, True)
        self.node3 = self.AppendItem(self.node2, 'Node 3')

    def CreateContextMenu(self, menu):
        self._menu.Append(wx.ID_ADD)
        self._menu.Append(wx.ID_DELETE)
        self._menu.Append(wx.ID_EDIT)

class MainFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(MainFrame, self).__init__(*args, **kwargs)

        self.panel = wx.Panel(self)
        self.tree = MyList(self.panel)
        self.text = wx.TextCtrl(self.panel)

        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(self.tree, 1, wx.EXPAND)
        sizer.Add(self.text, 2, wx.EXPAND)
        self.panel.SetSizer(sizer)

        self.panel.Fit()
        self.SetInitialSize()

class App(wx.App):
    def __init__(self):
        super(App, self).__init__()
        MainFrame(None, title='Test').Show()

App().MainLoop() 
```

我的问题是，现在上下文菜单仅在我右键单击树中的项目时出现，而不是在我右键单击项目周围的空白区域时出现。基本上我希望能够通过右键单击树的空白区域来右键单击隐藏的根节点。我该怎么做？

编辑：我尝试添加一个处理程序，`EVT_TREE_ITEM_RIGHT_CLICK`但这也不起作用（仅在单击树中的项目时）并且还阻止了上下文菜单。

# gwt - RPC 1.0 与 deRPC GWT-RPC

> ID：10104422
> 
> 赞同：1
> 
> 时间：2012-04-11T10:46:10.250
> 
> 标签：gwt, gwt-rpc

我正在阅读一本关于 GWT（Google Web Toolkit）的书，其中作者引用了 RPC 1.O 和 deRPC 之间的区别。

在我的专业项目中，对于 RPC 调用，我们正在使用：

com.google.gwt.user.client.rpc.RemoteService com.google.gwt.user.server.rpc.RemoteServiceServlet

在书中，作者预知了 的用途：

com.google.gwt.user.client.rpc.RemoteService.RpcService（扩展 RemoteService） com.google.gwt.rpc.server.RpcServlet（扩展 AbstractRemoteServiceServlet）

但是，RpcService 和 RpcServlet 都是 javadoc 标记的：

*“实验性的，可能会发生变化。不要在生产代码中使用它。”*

那么，基本上，有人使用 RpcService 和 RpcServlet 吗？它们之间有什么区别？

有关更多详细信息，请参阅 StackOverflow 上的此链接：[我应该何时使用 RequestFactory 与 GWT-RPC？](https://stackoverflow.com/questions/4119867/when-should-i-use-requestfactory-vs-gwt-rpc)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:17:26.557

从 GWT[官方](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)项目页面（底部）：

`This feature did not work out as planned, and the GWT team strongly discourages its use. Try the Request Factory feature when you have non-trivial server-domain objects.`

所以最好不要使用 deRPC。

# php - 如何在android中更新mysql数据库中的arraylist

> ID：10104424
> 
> 赞同：0
> 
> 时间：2012-04-11T10:46:15.657
> 
> 标签：php, mysql, arraylist

我使用url将两个arraylist从android传递给php。如果表（测试）只包含一列（菜单名）意味着正确更新。如果我要向表（测试）添加另一列，就像 menuimage 意味着在第一行列（菜单名称）被更新，其他行没有正确更新。

```
<?php
    $old_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['menuname'], '[]')));
    $new_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['editmainmenu'], '[]')));
    mysql_connect("localhost", "root", "MobixMySQL");
    mysql_select_db("cozydine");
    foreach ($old_menu_names as $key => $old_name) {
        $new_name = mysql_real_escape_string($new_menu_names[$key]);
        $old_name  = mysql_real_escape_string($old_menu_names[$key]);
        echo $new_name;
        mysql_query("UPDATE `mainmenu` SET `menuname` = '$new_name' WHERE menuname = '$old_name'")
        or die('Error' . mysql_error());
        echo "Updated";
    }
?> 
```

如果具有两列的表意味着第一行仅更新剩余行不更新..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:50:40.493

```
In java you can send name value pair like this
 JSONObject object=new JSONObject();
 object.put("name","value");

 and import net.sf.json.JSONObject;

 and send the object.
 and in php version heigher than 5 you can get the values using json_decode() function

 json_decode($object);

 Hope this will help. 
```

# sql - 是否可以将条件传递给 Oracle 用户定义函数？

> ID：10104427
> 
> 赞同：1
> 
> 时间：2012-04-11T10:46:23.213
> 
> 标签：sql, oracle, user-defined-functions

我想知道是否可以将条件（布尔值）传递（任何方式都可以，也可以破解）Oracle 中的用户定义函数。

假设我想要类似的东西：

```
CREATE OR REPLACE FUNCTION SCHEMA.MY_FUNC (
    condition IN ???,
    my_value IN NUMBER) RETURN NUMBER IS
BEGIN
    IF condition THEN
        RETURN my_value + 1;
    END IF;
    RETURN my_value;
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:13:15.947

假设您希望能够从普通 SQL 调用它 - 否则您可以只使用 a `BOOLEAN`- 您可以传递一个固定值并改为解释它。0/1、Y/N等常见；使用 1 作为真（和其他任何东西作为假），例如：

```
CREATE OR REPLACE FUNCTION MY_FUNC (
    condition IN NUMBER,
    my_value IN NUMBER) RETURN NUMBER IS
BEGIN
    IF condition = 1 THEN
        RETURN my_value + 1;
    END IF;
    RETURN my_value;
END;
/

FUNCTION MY_FUNC compiled

select my_func(0, 42) from dual;
select my_func(1, 42) from dual;

MY_FUNC(0,42)
-------------
           42 

MY_FUNC(1,42)
-------------
           43 
```

* * *

如果你可以将表达式作为字符串传递，比如说，你可以用动态 SQL 来破解一些东西，我想：

```
CREATE OR REPLACE FUNCTION my_func (
    condition IN varchar2,
    my_value IN NUMBER) RETURN NUMBER IS
    boolstr VARCHAR2(5);
BEGIN
    EXECUTE IMMEDIATE 'SELECT CASE WHEN ' || condition
        || ' THEN ''true'' ELSE ''false'' END FROM dual' INTO boolstr;
    IF boolstr = 'true' THEN
        RETURN my_value + 1;
    END IF;
    RETURN my_value;
END;
/ 
```

你必须这样称呼：

```
select my_func('1=1', 42) from dual; 
```

所以你必须将你的条件构建成一个字符串，比如：

```
select my_func(a ||'='|| b, 42) from <some table with a and b columns>; 
```

这看起来相当笨拙，并且允许几乎任何东西作为条件传递，这当然可能是危险的（SQL 注入可能性，委婉地说）。如果只有某些“条件”，最好使用带有简单参数的函数包装器并找出布尔条件值来调用真正的函数，这样你就可以调用类似`my_func_eq(42, a, b)`.

我还会考虑一个函数是否真的有必要——当然，这取决于函数在做什么，您可能可以在一个简单的查询中达到相同的效果，例如使用 case 语句。

# html - 暂停 HTML5 音频元素会导致整个文件被下载

> ID：10104431
> 
> 赞同：0
> 
> 时间：2012-04-11T10:46:27.503
> 
> 标签：html, google-chrome, audio

我有一个页面上有很多音频元素的情况，其中一些很长（最多约 2 小时）。本质上，它们是这样创建和控制的：

```
var a = new Audio();
a.preload = 'metadata';
a.src = 'long-track.mp3';

a.play(); 
```

播放时，浏览器（在本例中为 Chrome）正确地发出范围请求，服务器返回“206 Partial Content”，一次看起来大约 2 分钟的数据。加载约 2mb 的数据后，它会停止请求数据。到目前为止，一切都很好。然后，执行：

```
a.pause(); 
```

这会导致浏览器下载文件的整个剩余部分。(!!?!~@!!!?) 显然，如果用户决定收听几首曲目的前几秒钟，这可能是个问题：他们会开始下载*千兆字节*的不需要的数据。

我已经看到其他一些问题，询问[如何强制缓冲完整文件](https://stackoverflow.com/questions/4764015/how-can-i-force-an-html5-audio-element-to-buffer-an-entire-song)，但我实际上想要完全相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:03:32.120

没有官方功能可以做到这一点，虽然应该有，但似乎普遍的共识是，以下代码是做你想做的最好的方法

```
a.src = '';
a.load(); 
```

jPlayer[实现了这个方法](https://github.com/happyworm/jPlayer/blob/master/jquery.jplayer/jquery.jplayer.js#L1954)来停止音频缓冲。唯一的问题是，这种方法[可能存在跨浏览器问题](http://blog.pearce.org.nz/2010/11/how-to-stop-video-or-audio-element.html)。如果失败，您可以尝试从页面中删除音频元素，您尝试过吗？

# android - 如何在摩托罗拉 Xoom (android) 上截取屏幕截图？

> ID：10104434
> 
> 赞同：2
> 
> 时间：2012-04-11T10:46:40.163
> 
> 标签：android, xoom

我有一个 Android 的摩托罗拉 Xoom 平板电脑，我在为演示目的拍摄我的应用程序的屏幕截图时遇到了问题，但还没有成功......谁能指导我？有快捷键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:48:57.063

试过这个？

[http://letmebuzz.com/how-to-take-screen-shot-of-motorola-xoom/](http://letmebuzz.com/how-to-take-screen-shot-of-motorola-xoom/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:03:31.943

如果使用 Eclipse：

然后切换到 DDMS 视图并从左侧面板中选择连接的设备，然后按相机图标。它会截取您设备屏幕的屏幕截图...

# jquery - 如何删除动态对话框上的 jQuery 对话框标题

> ID：10104436
> 
> 赞同：0
> 
> 时间：2012-04-11T10:46:51.867
> 
> 标签：jquery

我有一个我想提出的动态对话......例如

```
var newDiv = $(document.createElement('div'));

$(newDiv).html('Hello World');
$(newDiv).dialog({
    closeOnEscape: false,
    draggable: false,
    modal: true,
    resizable: false,
    width: 725

}); 
```

一切都很好，但是我的动态对话框有一个我不想要的标题。当然，我可以通过修改以下 CSS 类来删除它... `.ui-dialog-titlebar {display:none}`

但是，我只希望对话框的这个实例没有标题，并且我不希望将其应用于我系统中的所有其他对话框。删除动态对话框上的标题的最佳方法是什么？我正在考虑将 CSS 方法更改为对话框，就像这样... $(newDiv).dialog({... stuff}).css() 但到目前为止没有任何效果。

我认为问题是由于我的动态 div 没有一个很难引用的 ID ...任何想法吗？

请注意，如果我没有很好地描述我的问题，请这样说，我会改写/扩展......我已经工作了几个小时，我开始发疯了......

请注意澄清：我想删除整个标题栏和样式......不仅仅是标题通常是空字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:55:52.080

您可以在动态对话框中添加一个名为“dialog-no-title”之类的 CSS 类，然后在该类下添加相关的 CSS `dialog-no-title {display:none}`。

要将类添加到 DOM 元素，请参阅 jQuery 文档。它看起来像这样：`.addClass("dialog-no-title")`。我猜你可以这样做：

```
var newDiv = $(document.createElement('div'));  

$(newDiv).html('Hello World');

$(newDiv).dialog({
    closeOnEscape: false,
    draggable: false,
    modal: true,
    resizable: false,
    width: 200,
    dialogClass: 'dialog-no-title'
}); 
```

**编辑**：更新了代码示例以反映评论。这是一个适合您的 jsFiddle：http: [//jsfiddle.net/nj2Q9/21/](http://jsfiddle.net/nj2Q9/21/)

干杯，

詹姆士

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:06:19.227

正如 Alex K. 建议的那样：

```
$(newDiv).dialog({
    closeOnEscape: false,
    draggable: false,
    modal: true,
    resizable: false,
    width: 725,
    dialogClass: 'ui-dialog-noheader' 
}); 
```

然后在你的 CSS

```
.ui-dialog-noheader .ui-dialog-titlebar {display:none} 
```

它以 noheader 类中的对话框标题栏为目标。

# sonarqube - 声纳 findbugs 堆大小

> ID：10104443
> 
> 赞同：6
> 
> 时间：2012-04-11T10:47:35.983
> 
> 标签：sonarqube, findbugs

我是声纳的新手。我正在使用声纳 pulgin 从 Jenkins 运行声纳。

当我从 jenkins 运行时，我在 findbugs 处出现内存不足异常

以下是错误：

```
 Out of memory
Total memory: 1037M
 free memory: 30M
Analyzed: D:\Victor\autocreated\webapp\WEB-INF\classes
     Aux: C:\DOCUME~1\NADBHA~1\LOCALS~1\Temp\findbugs4165854405681394173.jar
     Aux: C:\DOCUME~1\NADBHA~1\LOCALS~1\Temp\findbugs4688505485649811865.jar
Total time: 2:04:49.155s
Final Memory: 358M/989M
Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: org.sonar.api.utils.SonarException: Can not execute Findbugs
    at org.sonar.runner.Runner.delegateExecution(Runner.java:189)
    at org.sonar.runner.Runner.execute(Runner.java:78)
    at org.sonar.runner.Main.main(Main.java:61)
Caused by: org.sonar.api.utils.SonarException: Can not execute Findbugs
    at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:120)
    at org.sonar.plugins.findbugs.FindbugsSensor.analyse(FindbugsSensor.java:58)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
    at org.sonar.batch.phases.Phases.execute(Phases.java:93)
    at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:143)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:111)
    at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:101)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:102)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.Batch.execute(Batch.java:100)
    at org.sonar.runner.Launcher.executeBatch(Launcher.java:65)
    at org.sonar.runner.Launcher.execute(Launcher.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.sonar.runner.Runner.delegateExecution(Runner.java:186)
    ... 2 more
Caused by: java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:112)
    ... 20 more
Caused by: java.lang.OutOfMemoryError: Java heap space 
```

我的声纳版本是 2.13

当我将 Jenkins 声纳插件中的 jvm 选项增加到 1280 时，它显示如下错误：

```
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit`enter code here` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:18:45.380

是的，如果分析的代码库很大，声纳 findbugs 执行程序可以使用大量 RAM。

您不仅要增加 JVM 可用的堆大小，还要增加“ [MaxPermSize](https://stackoverflow.com/questions/3356005/java-why-does-maxpermsize-exist) ”和“ [ReservedCodeCacheSize](https://stackoverflow.com/questions/7513185/what-is-reservedcodecachesize) ”（至少对于 Java Hotspot VM）。必须在实际执行 FindBugs 声纳执行器的 JVM 上设置 JVM 选项。所以可能不是 Jenkins 虚拟机，而是 Jenkins 为这项工作开始的虚拟机。

以下是 64 位系统的示例：

```
-Xmx3062m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128m 
```

在我假设您正在使用的 32 位系统上，您会选择较低的值，例如：

```
-Xmx1536m -XX:MaxPermSize=384m -XX:ReservedCodeCacheSize=128m 
```

此外，如果 Jenkins 不接受 JVM 选项，您可以尝试使用 Jenkins 的 sonar ant 任务运行声纳。（这就是我正在做的，我可以设置尽可能多的内存。）

# c# - c#中子命名空间的封装

> ID：10104444
> 
> 赞同：3
> 
> 时间：2012-04-11T10:47:36.750
> 
> 标签：c#, namespaces, encapsulation

我有一个类库项目。在这个项目中，我有一些文件夹来分离逻辑。

假设我有一个**DAL**库，并且在 DAL 中我有**IDAL**、**DALFactory**和**SQLServerDAL**。
现在，当我将 DAL dll 提供给其他程序员时，他可以使用所有的 subDll。假设我不希望他使用 SQLServerDal 但其他人。我如何封装 SQLServerDAL 以便没有人可以意识到它的存在。

谢谢。
**编辑：**
更特别：

```
using DAL; // it can be written
using DAL.IDAL; // it can be written
using DAL.DALFactory; // it can be written
using DAL.SQLServerDAL; // it dont want to allow anyone write that 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:20:53.670

这对于命名空间是不可能的，因为它们不存在于元数据级别。按照其他人的建议，将命名空间 SQLServerDAL 中的所有类设为内部类，或者将 SQLServerDAL 设为静态内部类而不是命名空间。在这种方法中，SQLServerDAL 中的类将成为嵌套类，并且无法从 DAL 程序集外部访问：

```
// what you have now:
namespace DAL.SQLServerDal
{
    public class A {}
    public class B {}
}

// in other assembly
using DAL.SQLServerDal ; // ok
new A () ; // ok

// with internal classes:
namespace DAL.SQLServerDal
{
    internal class A {}
    internal class B {}
}

// in other assembly
using DAL.SQLServerDal ; // ok
new A () ;               // error: A is inaccessible due to protection level

// what I propose:
namespace DAL
{
    internal static class SQLServerDal
    {
        public class A {}
        public class B {}
    }
}

// in other assembly
using DAL.SQLServerDal ; // error: namespace DAL.SQLServerDal does not exist 
```

但是，如果您使用反射或代码生成，如果您使用的库不正确支持嵌套类，您可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:52:41.207

不确定这是否是最佳解决方案，但是：-

将 SQLServerDAL 类更改为内部。然后在 properties/assemblyinfo.cs 文件中添加任何需要访问 SQLServerDAL 的 DLL：

```
using System.Runtime.CompilerServices;
[assembly: InternalsVisibleTo("Fully.Qualified.AssemblyName")] 
```

这显然不能防止拆卸，但任何使用您的 dll 的人都不会公开看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:18:21.010

您所说的这些“子 DLL”是什么？

> 我有一个类库项目。

据此，我假设您有一个 DLL。在这种情况下，没有“子 DLL”之类的东西。在项目的子文件夹中定义的类是该单个 DLL 的一部分。它们位于子文件夹中的事实没有任何区别。如果您已将子文件夹名称添加到每个类的命名空间，这意味着生成的类型的名称将包含其中的文件夹名称。

如果要使某些类型成为内部类型，请使用[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)关键字。不幸的是，没有办法将给定子文件夹下的*所有类都设为内部。*如果您想这样做，您需要将`internal`关键字添加到子文件夹中的*每个类定义中。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:11:13.500

如评论中所述，您可以将要隐藏的 DLL 作为资源文件添加到父项目中。因此，您必须添加已编译的 DLL 并将其标记为解决方案中的“嵌入式资源”。

第二步是在您的父库中加载 DLL 以便访问它。

```
Stream stream = GetType().Assembly
               .GetManifestResourceStream("<<FULL QUALIFIED DLL NAME>>");
if (stream == null)
    throw new InvalidDataException("<<FULL QUALIFIED DLL NAME>> not found.");

byte[] buffer = new byte[stream.Length];
stream.Read(buffer, 0, (int) stream.Length);

Assembly assembly = Assembly.Load(buffer); 
```

获得程序集参考后，您可以着手获取要访问的类和方法。

```
var sqlServerDAL = assembly.GetType("<<FULL QUALIFIED CLASS NAME>>");
var method = sqlServerDAL.GetMethod("<<METHOUD>>", BindingFlags.Public); 
```

我知道这是混淆某些类的一种非常讨厌的方法，但它很有效。因为DLL不在目录中，也不能简单地键入命名空间来访问类。

# jquery - 如何将图像放入 div 中，该图像大于 div？

> ID：10104446
> 
> 赞同：-1
> 
> 时间：2012-04-11T10:47:42.810
> 
> 标签：jquery, css

嗨，我有一个这样的 div

* * *

这是一个 div 框架

![在此处输入图像描述](../Images/d20fc45095a6b6d912e7cb830f66a746.png)

* * *

这是我的图片

![在此处输入图像描述](../Images/1894bed9c69a2e03af0629d6c4886eef.png)

* * *

![在此处输入图像描述](../Images/4f62ff39d9070507a7f96bec7058715c.png) 这是结果

图片的宽度和高度不固定，因为我不知道图片的大小

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:50:15.670

您可以根据以下百分比设置图像宽度/高度`div`：

```
div img
{
  width:100%;
  height:100%;
} 
```

[http://jsfiddle.net/Curt/x83dk/](http://jsfiddle.net/Curt/x83dk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:53:23.930

你可以这样写：

**CSS**

```
div{
    border:5px solid red;
    display:inline-block;
    box-shadow:0 0 0 10px green;
    margin:100px;
}
img{
    vertical-align:top;
} 
```

**HTML**

```
<div><img src="http://i.stack.imgur.com/SWutL.jpg"></div>​ 
```

​</p>

检查这个[http://jsfiddle.net/QkT7d/](http://jsfiddle.net/QkT7d/)

# android - 使用 ADT17 将 ADT17 之前的 Android 项目导入 Eclipse

> ID：10104449
> 
> 赞同：1
> 
> 时间：2012-04-11T10:47:52.147
> 
> 标签：android, adt

我在导入一些使用 ADT 版本 < 17 创建的旧 Android 应用程序时遇到问题。

我已经安装了所有最新的 Android 工具和 ADT 插件 (17)。我完全了解 ADT17 是如何处理库的。

我的问题：Eclipse 没有创建“Android Dependencies”库。它根本不存在（甚至没有 .classpath 文件中的条目）。

知道如何将旧项目转换为使用新的 ADT 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T05:39:38.993

试试这两种方法？

1.  在您的项目中生成一个“libs”目录（与 'src'、'res' 等处于同一级别），将所需的所有 jar 复制到该目录。然后清理并重建项目。

2.  打开 .classpath 文件，更改（或生成）下面的行

    < classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>

    至

    < classpathentry export="true" kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>

    然后刷新、清理和重建项目。

# java - 如何将方法注入java测试类？

> ID：10104451
> 
> 赞同：0
> 
> 时间：2012-04-11T10:48:01.697
> 
> 标签：java, unit-testing, reflection, junit

如何在不扩展测试类的情况下将方法（使用反射）注入超类？我需要更换 `getExternalData()`来测试里面的逻辑`someMethod()`。我无法更改测试类 - 因为我正在考虑注入方法。

我有流动的课程：

```
public class B extends A{
  public String someMethod(){
    String someString = super.getExternalData();
    //logic to be tested - manipulating on someString
    return someString;
  }
}

public class A{
  public String getExternalData(){
    //some Logic that generates "externalData" string
    return externalData;
  }
} 
```

并测试：

```
public class CesTest{
  @Test
  public void someMethodTest()(
    B instance = new B();
    //...
    //...
    assertEquals("expectedData", instance.someMethod());
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:54:12.497

简单的答案是你不能不做一些非常奇怪的事情，这会导致你不测试被测类，而是一些奇怪的被测类的模拟版本。您需要进行任何设置以`getExternalData`返回适当的值。话虽这么说，`class A`应该写成这样，`mock`可以注入 a 来提供它`external data`而不会碰到外部资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:44:35.720

（对不起我的英语）

嗨，马尔辛，

我在 4 月 11 日 10:55 回答了你，但是，在我上完 junit 课后，我有一个更好的解决方案，如果你还没有解决它：

首先，按照惯例，必须将 TestClass 称为带有后缀“Test”的 SUT（被测对象），在您的情况下为 BTest。

其次，在JUnit 中经常是使用Mock Classes 来改变Collaborators 方法（Collaborator 是与SUT 造成依赖的类）。更好的选择是使用 Google Code 的 Mockito，这是一个免费且更好的 jUnit API。使用它：

```
public class BTest{
  @Test
  public void someMethod()(
    B instance = new B();
    when(instance.getExternalData()).thenReturn("expectedData");
    assertEquals("expectedData", instance.someMethod());
  }
} 
```

[http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html)谷歌代码规则！如果可行，请投票给我的答案，谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:54:53.377

为什么使用

```
super.getExternalData() 
```

而不仅仅是

```
getExternalData() 
```

这将让您扩展 B 并覆盖 getExternalData()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:55:56.707

```
public class B extends A{
  public String someMethod(){
    String someString = getExternalData(); //without 'super'
    //logic to be tested - manipulating on someString
    return someString;
  }
  @Override
  public String getExternalData(){
    //Overriding code
    return externalData;
  }
}

public class A{
  public String getExternalData(){
    //some Logic that generates "externalData" string
    return externalData;
  }
} 
```

这对你有帮助吗？

# asp.net-mvc - 重启后浏览器不缓存资源

> ID：10104453
> 
> 赞同：4
> 
> 时间：2012-04-11T10:48:13.720
> 
> 标签：asp.net-mvc, caching, extjs, browser-cache, ext.net

这是一个更一般的缓存问题。

在我的项目中，我的页面带有几个`ext.net 2.0 beta`控件`asp.net-mvc3/razor`

因此，对于这些页面，从我在 firebug 中收集的数据来看，我*认为浏览器在***重新启动**后没有缓存`ext.axd`资源文件。

 **这就是我所看到的：

1.  启动 Firefox，转到我的页面
2.  所有请求显示`200 OK`
3.  如果我按`F5`，我会将所有请求视为`304 Not Modified`
4.  现在，如果我**重新启动**浏览器，它会返回`Http 200`响应。

浏览器没有缓存我的资源吗？是否有我可以使用的设置或配置来跨浏览器会话缓存我的资源？

这是萤火虫的样子：

1.  当我第一次开始时：
    ![在此处输入图像描述](../Images/bdff3c978cf89210abec9f958b8eb661.png)

2.  当我按下`F5`这是我看到的：

    ![在此处输入图像描述](../Images/ab20c9917bd7be75ebcc969f2bb717a8.png)

    这是单个请求的样子：

    ![在此处输入图像描述](../Images/e08755c8700878c4f9d31c209bdf189a.png)

    当我**重新启动浏览器**时，我回到**(1)**。我`200OK`到处都是。

(1) 资源是否被缓存？（2）我可以做些什么来缓存它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:22:31.543

初始请求的订单项是“黑色”的，并且是从原始来源获取的。然后将这些项目添加到浏览器缓存中。

在随后的请求中，项目直接从缓存中提取，并显示为“灰色”。我想这只是 Firebug 的一个“功能”。

更多信息可在以下位置获得：

[http://forums.ext.net/showthread.php?18340-Browser-does-not-cache-resources-after-restart](http://forums.ext.net/showthread.php?18340-Browser-does-not-cache-resources-after-restart)

[如何解释 Firebug Net 面板中的灰色项目？](https://stackoverflow.com/questions/6797361/how-to-interpret-grey-items-in-firebug-net-panel)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:11:01.650

通常缓存由 Web 服务器控制。您的 Web 服务器是什么，您的应用所在目录的配置是什么？**

# ios - 以编程方式选择 tableview 上的单元格不会执行关联的 segue

> ID：10104465
> 
> 赞同：5
> 
> 时间：2012-04-11T10:49:14.360
> 
> 标签：ios, uitableview, segue

好吧，正如我在主题中所说，我的问题是我以编程方式选择 tableview 上的一个单元格，目的是自动执行关联的 segue。我有代码在关联的 tableviewcontroller 的 viewWillAppear 上执行此操作。

结果是选择了单元格，但没有执行segue。你知道为什么吗？

当我在 viewWillAppear 上以编程方式执行 segue 以解决问题时，但我很好奇为什么如果选择了单元格，segue 不会自动执行......

顺便一提。segue 必须没问题，因为当我选择单元格时，它可以正常工作。

更多信息：我正在开发一个 splitviewcontroller。左侧有 tableviewcontroller，segue 在右侧有一个 viewcontroller

非常感谢！

卡洛斯

相关代码：

```
- (void) viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];

// Si no hay ninguna fila seleccionada, seleccionaremos la primera

// Obtenemos la fila seleccionada
NSIndexPath *filaSeleccionadaPath = [self.tableView indexPathForSelectedRow];

// Si no hay ninguna fila seleccionada
if (!filaSeleccionadaPath)
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T11:24:10.927

上的文档`UITableView`指定：

*调用此方法不会导致委托接收 tableView:willSelectRowAtIndexPath: 或 tableView:didSelectRowAtIndexPath: 消息，也不会向观察者发送 UITableViewSelectionDidChangeNotification 通知。*

因此它不会触发任何动作。如果您正在使用 segues，您可能希望`performSegueWithIdentifier:sender:`在`UIViewController`课堂上使用（很可能`self`）。您可以指定标识符和发送元素（很可能是单元格）。

# android - tablayout中所有选项卡的一个菜单？

> ID：10104468
> 
> 赞同：0
> 
> 时间：2012-04-11T10:49:24.790
> 
> 标签：android, menu, tabs

Android 开发初学者。我正在开发一个应用程序，它有三个不同的选项卡。我想要有共同的菜单选项。问题是单击菜单项时没有任何反应。当我将它们移动到第一个选项卡的活动时，它可以工作。这是我的 TabActivity 菜单实现。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {
        switch(item.getItemId()) {
            case R.id.feedbackEmail:
                showDialog(FEEDBACK_DIALOG_ID);
                return true;
            case R.id.about:
                AboutBox.Show(this);
                return true;
            case R.id.Help:
                HelpBox.Show(this);
                return true;
            case R.id.Preferences:
                Intent intent = new Intent(this, Preferences.class);
                startActivity(intent);
                return true;
            case R.id.powerUsage:
                startActivity(intentPowerUsage);
                return true;
            case R.id.close:
                Intent homeIntent = new Intent(Intent.ACTION_MAIN);
                homeIntent.addCategory( Intent.CATEGORY_HOME );
                homeIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                Preferences.cancelNotification(this);
                startActivity(homeIntent);
                return true;
        }
        return super.onMenuItemSelected(featureId, item);
    } 
```

这是我的 menu.xml

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/feedbackEmail"
          android:icon="@android:drawable/ic_dialog_email"
          android:title="@string/feedback" />
    <item android:id="@+id/Help"
          android:icon="@android:drawable/ic_menu_help"
          android:title="@string/menu_help" />
    <item android:id="@+id/Preferences"
          android:icon="@android:drawable/ic_menu_preferences"
          android:title="@string/preferences" />
    <item android:id="@+id/about"
          android:icon="@android:drawable/ic_menu_info_details"
          android:title="@string/menu_about" />
    <item android:id="@+id/powerUsage"
          android:icon="@android:drawable/ic_menu_today"
          android:title="@string/powerUsage" />
    <item android:id="@+id/close"
          android:icon="@android:drawable/ic_menu_close_clear_cancel"
          android:title="@string/exit" />
</menu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:46:36.787

你可以这样做，

创建一个名为 Activity`BaseActivity`并将此菜单代码放入其中`BaseActivity`，然后扩展`Activity`您想要的所有菜单。您可以检查[**此**](https://stackoverflow.com/questions/7618227/can-i-combine-my-code-into-some-kind-of-global-activity/7618263#7618263)答案以获取覆盖`onKeyDown()`每个活动的进一步参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:16:55.057

对每种情况使用 break 语句并从每种情况中删除 return true ，如下所示：

```
public boolean onMenuItemSelected(int featureId, MenuItem item) {
        switch(item.getItemId()) {
            case R.id.feedbackEmail:
                showDialog(FEEDBACK_DIALOG_ID);
                break;
            case R.id.about:
                AboutBox.Show(this);
                break;
            case R.id.Help:
                HelpBox.Show(this);
                break;
            case R.id.Preferences:
                Intent intent = new Intent(this, Preferences.class);
                startActivity(intent);
                break;
            case R.id.powerUsage:
                startActivity(intentPowerUsage);
                break;
            case R.id.close:
                Intent homeIntent = new Intent(Intent.ACTION_MAIN);
                homeIntent.addCategory( Intent.CATEGORY_HOME );
                homeIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                Preferences.cancelNotification(this);
                startActivity(homeIntent);
                break;
        }
        return true;
    } 
```

# php - 在 PHP 中捕获方括号之间的文本

> ID：10104473
> 
> 赞同：42
> 
> 时间：2012-04-11T10:49:54.397
> 
> 标签：php, regex, string

我需要一些方法来捕获方括号之间的文本。例如，以下字符串：

`[This] is a [test] string, [eat] my [shorts].`

可用于创建以下数组：

```
Array ( 
     [0] => [This] 
     [1] => [test] 
     [2] => [eat] 
     [3] => [shorts] 
) 
```

我有以下正则表达式，`/\[.*?\]/`但它只捕获第一个实例，所以：

```
Array ( [0] => [This] ) 
```

我怎样才能得到我需要的输出？请注意，方括号从不嵌套，所以这不是问题。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-11T10:53:03.290

匹配所有带括号的字符串：

```
$text = '[This] is a [test] string, [eat] my [shorts].';
preg_match_all("/\[[^\]]*\]/", $text, $matches);
var_dump($matches[0]); 
```

如果您想要不带括号的字符串：

```
$text = '[This] is a [test] string, [eat] my [shorts].';
preg_match_all("/\[([^\]]*)\]/", $text, $matches);
var_dump($matches[1]); 
```

另一种较慢的不带括号的匹配版本（使用“*”而不是“[^]”）：

```
$text = '[This] is a [test] string, [eat] my [shorts].';
preg_match_all("/\[(.*?)\]/", $text, $matches);
var_dump($matches[1]); 
```

# xcode - OSX Lion 上未生成代码覆盖率文件

> ID：10104478
> 
> 赞同：3
> 
> 时间：2012-04-11T10:50:13.723
> 
> 标签：xcode, ios5, osx-lion, ocunit, coverstory

我正在尝试获取单元测试的代码覆盖率（Mac OS X Lion 10.7 (11A2061) 上的 Xcode 4.2.1 (4D502)），但不知何故 .gcda 文件没有被创建。我可以在单元测试目标的 .../Objects-normal/i386 文件夹中看到 .d 和 .o 文件，但是正在单元测试的文件缺少 gcno/gcda 文件，因此我无法生成覆盖率正在测试的内容的统计信息。

在主要目标上，我确实看到了每个文件的 .d、.o 和 .gcno 文件。

所以，我相信我已经正确设置了项目设置，但是 OS X Lion 确实缺少一个“小”的东西。我已经尝试了[http://code.google.com/p/coverstory/wiki/UsingCoverstory](http://code.google.com/p/coverstory/wiki/UsingCoverstory)中提到的步骤，但似乎并没有解决我的问题。

注意：我能够让它在 Snow Leopard 上工作并使用 CoverStory 查看覆盖率统计！

这方面的任何解决方案/方向都会非常有帮助。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:46:44.683

我缺少 gcda 文件，但在某些网站上找到了解决方案。您需要添加这些标志：

```
-fprofile-arcs -ftest-coverage 
```

到“其他 C 标志”。运行测试后，存在 gcda 文件。

gcno 文件是在将“Generate Test Coverage Files”和“Instrument Program Flow”都设置为 YES 后生成的。

我正在使用 Xcode 4.3.2 和 llvm 编译器。

或者，我发现将 Generate Profiling Code 设置为 YES 也会导致生成 gcda 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:21:38.547

确保为您的代码和测试设置了以下构建设置：

`GCC_PREPROCESSOR_DEFINITIONS = GCOV_ENABLED=1`

`GCC_INSTRUMENT_PROGRAM_FLOW_ARCS = YES`

`GCC_GENERATE_TEST_COVERAGE_FILES = YES`

构建/运行测试应该会创建缺少的 gcda 文件。我遇到了这个问题，以至于我有一个包含上述内容的 xcconfig 文件模板。您不必使用最新版本的 Xcode 链接 gcov 库。

# android - 将 WebView 和 Browser 用于 YouTube Video api 有什么不同？

> ID：10104488
> 
> 赞同：18
> 
> 时间：2012-04-11T10:51:04.713
> 
> 标签：android, webview, youtube

我已经实现了 youtube api，它在常规计算机浏览器中按预期工作。当我在 Ice Cream Sandwich 和 Gingerbread 中测试它时，在股票浏览器（即 Webkit）上它也可以像在我的计算机上一样工作。

但是，当我将它加载到 WebView 中时，它会遇到一些非常奇怪的行为。具体来说，它会加载所有播放器控件（播放按钮、进度条等）并触发所有正常事件以进行缓冲和播放，但它不会播放，而是跳到最后并显示标准的 YouTube 播放后图标其他视频。如果我单击其中一个图标，它会跳过该视频并直接跳到该视频的末尾。

我已将 setJavascriptEnabled 和 setPluginsEnabled 都设置为 true。我想我遗漏了一些东西，因为它在股票浏览器中一切正常，但我对它是什么感到困惑。有没有人在 WebView 中实现了 YouTube 视频播放器（或 JWPlayer，或任何我可以播放 youtube 视频的东西）？如果是这样，请分享你是如何让它工作的。

TIA

[编辑] 自发布此消息以来，我实现了一个直接从 YouTube 检索视频流的本机播放器。这是令人难以置信的笨拙，因为设备之间与它们可以/不能播放的文件相关的碎片非常大，而且由于无法通过 YouTube 设备模型并让它返回相关的流，所以发生的事情是你得到了所有流，然后必须从数组中选择。无论如何......关键是这只是一种可怕的方法，我真的很想找出好的 ole' 嵌入式播放器解决方案，因为它*必须工作，因为它可以在股票浏览器中工作。这可能是标题问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:20:45.443

你有没有试过这个： [http ://code.google.com/p/html5webview/source/browse/trunk/HTML5WebView/src/org/itri/html5webview/HTML5WebView.java](http://code.google.com/p/html5webview/source/browse/trunk/HTML5WebView/src/org/itri/html5webview/HTML5WebView.java)

基本上，如果没有一些复杂且没有真正记录的配置，该标签在“默认”WebView 上不起作用。请告诉我们这是否能解决您的问题。

另请参阅此问题：[http ://code.google.com/p/android/issues/detail?id=22254](http://code.google.com/p/android/issues/detail?id=22254)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:25:24.273

我对安卓了解不多。但是请浏览以下对您有用的链接。

WebView 不提供类似浏览器的小部件，不启用 JavaScript 并且忽略网页错误。如果您的目标只是将一些 HTML 显示为 UI 的一部分，这可能没问题；除了阅读网页之外，用户不需要与网页进行交互，并且网页也不需要与用户进行交互。如果你真的想要一个完整的网络浏览器，那么你可能想用 URL Intent 调用浏览器应用程序，而不是用 WebView 显示它，浏览器视图更适合小屏幕。

1.  [http://iphoneincubator.com/blog/audio-video/how-to-play-youtube-videos-within-an-application](http://iphoneincubator.com/blog/audio-video/how-to-play-youtube-videos-within-an-application)
2.  [如何使用android在webview中播放视频？](https://stackoverflow.com/questions/4989738/how-to-play-a-video-in-a-webview-with-android)
3.  [UIWebView 播放本地和下载的视频](https://stackoverflow.com/questions/2386156/uiwebview-to-play-local-and-downloaded-video)
4.  [Android 在 webview 中播放 youtube 视频](https://stackoverflow.com/questions/4956559/android-play-youtube-video-in-webview)
5.  [使用 RTSP 流式传输视频：Android](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)

# android - 使用资源中原始文件夹的 .PDF 获取列出的文件

> ID：10104491
> 
> 赞同：2
> 
> 时间：2012-04-11T10:51:11.320
> 
> 标签：android

如何显示存储在资源文件夹中资产文件夹或原始文件夹中的所有 PDF 文件的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:10:43.480

使用原始文件夹的路径创建一个文件对象，然后调用

```
file.listFiles(); 
```

这将返回所有文件的列表，然后过滤这些带有 .pdf 扩展名的文件

// 已编辑

```
AssetManager assetManager = mContext.getAssets();
String[] arrData = assetManager.list("pdfFolder");//name of your directory as assets/pdfFolder/abc.pdf
List<String> pdfList = new ArrayList<String>();
int size =  arrData.length();
for(int i = 0;i<size;i++)
{
   if(arrData[i].contains(".pdf"))

   {
     pdfList.add(arrData[i]); 
    }
} 
```

# c# - 如何从 url 捕获流媒体视频？

> ID：10104498
> 
> 赞同：1
> 
> 时间：2012-04-11T10:51:52.000
> 
> 标签：c#, wpf, winforms, video-streaming, microsoft-expression

我正在尝试在我的应用程序中使用 Microsoft Expression Encoder 4.0。我面临的第一个问题是我需要从 c# 中的 url 捕获流式视频，但在[库的示例中](http://www.codeproject.com/Articles/202464/How-to-use-a-WebCam-in-C-with-the-NET-Framework-4)，他们使用 WPF，它只有此代码来显示流式视频

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Show Broadcast" Height="350" Width="525">
    <Grid>
        <MediaElement Name="VideoControl" Source="http://localhost:8080" />
    </Grid>
</Window> 
```

如何将此代码转换为 c# 代码，以便在图片框中显示流式视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:05:29.997

在winforms中？最相似的等价物是[嵌入媒体播放器控件](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562851%28v=vs.85%29.aspx)。在问题的示例中，WPF 引擎正在卸载所有解码工作`MediaElement`-大多数视频流协议涉及**很多**内容，并且在将数据处理给 UI 子系统方面也做出了类似的努力。你*真的*不想自己这样做。

# c# - Response.Write Base64 字符串

> ID：10104499
> 
> 赞同：4
> 
> 时间：2012-04-11T10:51:56.007
> 
> 标签：c#, asp.net, http

我收到一个 Base64 字符串，它实际上是 PDF 文件的字符串表示形式。我想用 Response.Write 写这个字符串，但不把它转换回它的二进制表示。

我试过这个：

```
var base64string = "...";
Response.Write(base64String);
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Transfer-Encoding", "base64"); 
```

浏览器无法将内容识别为 base64 编码的 PDF 文件。我怎样才能解决这个问题？

编辑：这是回应

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/pdf; charset=utf-8
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
Content-Transfer-Encoding: base64
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 11 Apr 2012 11:00:04 GMT
Content-Length: 107304

JVBERi0xLjQKJeLjz9MKMSA... more content here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T11:54:22.077

`Content-Transfer-Encoding`不是有效的 HTTP 标头；这是来自 MIME 的旧标题。它的 HTTP 等效项`Transfer-Encoding`支持以下值：

*   分块
*   身份
*   压缩包
*   压缩
*   放气

如果您有一个 Base64 编码的 PDF 文档，那么 HTTP 中没有“来自 base64”的转换可以为您解码此文档，因此您**必须**在将其放入响应正文之前在您的服务器上对其进行解码。

如果你想要一个从 Base64 转换的流，你可以使用 a [`FromBase64Transform`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.frombase64transform.aspx)into a [`CryptoStream`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)：

```
new CryptoStream(fileStream, new FromBase64Transform(), CryptoStreamMode.Read) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T11:05:46.000

当您承诺使用 PDF 时

```
 Response.ContentType = "application/pdf"; 
```

您还应该通过打开响应流并在其中编写PDF的*二进制版本来交付一份。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:28:23.087

你能试试这个

```
var base64string = "...";
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Transfer-Encoding", "base64");
Response.Write(base64String);
Response.End(); 
```

可能这会帮助你

# windows-phone-7 - 为什么布局更新时没有触发 LayoutUpdated 事件？WP7

> ID：10104502
> 
> 赞同：2
> 
> 时间：2012-04-11T10:52:02.230
> 
> 标签：windows-phone-7

我的问题是全景项目的 LayoutUpdated 事件。我将 LayoutUpdated 事件分配给哪个项目并不重要，当我滚动这些项目时它不会触发。这是我的代码：

```
<controls:Panorama Grid.Row="2" x:Name="WebScrollView" >
    <!--Panorama item one-->
    <controls:PanoramaItem Width="480" x:Name="LeftPanoramaControl"/>

    <!--Panorama item two-->
    <controls:PanoramaItem Width="480" x:Name="MiddlePanoramaControl"/>
    <controls:PanoramaItem Width="480" x:Name="RightPanoramaControl"/>
</controls:Panorama> 
```

在我的 C# 课程中，我说：

```
private void BrowsersLoaded( )
{
    //first, we stop the progressbar
    AnimatedProgressBar.StopProgressBar( );

    //next, we want to make sure that the left and right browser are going to load new content, as now, for instance, the left browser is placed upon the middlecontent
    //so, we cannot just say _leftBrowser.Navigate, this will screw up the view
    LeftPanoramaControl.Visibility   = _leftControlVisibility;
    RightPanoramaControl.Visibility  = _rightControlVisibility;

    WebScrollView.UpdateLayout( );
    WebScrollView.DefaultItem = MiddlePanoramaControl;                                   
    //this seems like beating around the bush, doesm't it? 
    //well, A problem I encountered was that the LayoutUpdated event was called even before I could do anything, check whatever boolean, cause they were all
    //set to true even before the event was fired, which called upon the CheckID method, and gave a huge infinite loop. 

    MiddlePanoramaControl.LayoutUpdated += new EventHandler( WebScrollView_LayoutUpdated );
} 
```

但是当我滚动浏览全景项目时它不会触发。有谁知道为什么？

问候，极客

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:18:57.260

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.uielement.layoutupdated.aspx)：

> 当与当前 Dispatcher 关联的各种可视元素的布局发生更改时发生。

正如您所观察到的，`LayoutUpdated`可以在任何 UI 元素上处理该事件，并且无论您使用哪个元素来处理此事件，都会产生相同的结果。另请注意，该`sender`参数为 alawys null。

现在，当您滚动浏览全景项目时，为什么它不会触发？每当 Silverlight 框架执行布局传递时，该`LayoutUpdated`事件就会触发，即它根据可视化树以及树中各种面板和元素的特征来计算每个 UI 元素的位置。

仅仅因为您在手机屏幕上看到有东西在移动，并不意味着布局传递已经发生。设置的动画`RenderTransforms`不会导致布局更改。

布局很昂贵，所以我希望全景控件的设计方式是在开始滚动项目之前确定每个项目的布局。

为什么不处理[Panorama.SelectionChanged](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.panorama.selectionchanged%28VS.92%29.aspx)事件呢？

# android - 如何从您的应用程序源代码访问 Android 服务模式

> ID：10104503
> 
> 赞同：1
> 
> 时间：2012-04-11T10:52:06.933
> 
> 标签：android

我想知道，有没有什么方法可以从我们的源代码中访问android手机中服务模式的内容（我们在拨号器中拨打*##* 197328640##*后*得到）？如果是这样，请告诉我如何找回它们？我想在我的编码中获取与 GSM 相关的东西的信息，这些信息在 android 的服务模式下可用...

# java - 生成基于图表和表格的报告文档有哪些选项？

> ID：10104504
> 
> 赞同：0
> 
> 时间：2012-04-11T10:52:07.347
> 
> 标签：java, .net, html, pdf

我需要最终以 pdf 格式生成一个多页报告文档，该文档主要由图表和表格以及存储在数据库中的数据中的一些文本组成。目前，我们通过使用 VBA 代码将数据拉入 excel 模板来执行此操作，从中生成 pdf 文档。这远非理想，但它的优点是可以在需要时手动调整格式。我正在寻找一种可以更直接地生成文档的方法。一种可能性是首先生成 HTML 并将其转换为 pdf，其优点是 html 版本也可用。然而它已经完成了，我需要对外观和感觉进行相当精细的控制，以尽可能接近现有格式，并且我需要工具来生成图表和表格，而不是从头开始构建它们。

最终文档由几页组成，并且能够控制组件图表和表格的外观，我希望能够控制整个文档布局，例如分页符在哪里，组件图表的缩放和图表、插入标题、文本段落、脚注等。

我更喜欢基于 .net 的解决方案，但也会考虑 java，并且对开源和商业软件包都开放。我注意到 DevExpress、SyncFusion 和 Telerik 等公司拥有图表库，因此会对其他人的这些经验感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:55:50.867

如果您更喜欢以 html 呈现内容然后将其转换为 pdf，那么有一个不错的命令行工具“wkhtmltopdf”，它使用 webkit 引擎。这几乎没有限制，当我尝试这个时，它无法将 Flash 对象从 html 转换为 pdf（现在​​可能已修复）。如果您可以使用 html5 和 javascript 渲染图表，这是一个完美的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:44:33.137

最后，我决定在 WPF 中构建报告，并使用 WPF 的打印功能转至 PDF，方法是使用 PDF 打印驱动程序转至 XPS，然后转至 PDF。最后，这确实是一个关于如何生成可打印文档并对格式进行精细控制的问题。这可以在 WPF 中通过在 FixedDocuemnt 对象上构建页面来完成。这些元素将类似于 TextBlocks 和 3rd 方图表组件。这些表也可以是第 3 方组件，但很容易从头开始编写 WPF 自定义控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:46:36.490

我使用[jasperreports](http://jasperforge.org/projects/jasperreports)已经有一段时间了，它可以满足您的所有需求。您可以在 Ireport 中创建包含图表的报告，然后使用 java 类将报告输出到 pdf/html/xls(x)/doc(x)/flash/ODS/ODT
这需要一些时间来学习，但它是一个非常强大的包

# cocos2d-x - cocos2d::CCTouch 类没有名为“view”的成员

> ID：10104507
> 
> 赞同：3
> 
> 时间：2012-04-11T10:52:22.590
> 
> 标签：cocos2d-x

这里的代码：

```
CCTouch* touch = (CCTouch*)( touches->anyObject() );
CCPoint location = touch->locationInView(touch->view()); 
```

怎么了？

编辑：

我认为这里要问的是：

为什么以下代码在 cocos2d-x 的新 cocos2d-1.0.1-x-0.13.0-beta 版本中中断，而在 cocos2d-1.0.1-x-0.12.0 中运行良好？

```
CCTouch* touch = (CCTouch*)( touches->anyObject() );
CCPoint location = touch->locationInView(touch->view()); 
```

答案是 locationInView() 方法不再需要参数。正确的代码是：

```
CCTouch* touch = (CCTouch*)( touches->anyObject() );
CCPoint location = touch->locationInView(); 
```

# xcode - Jenkins 在 Mac OS X 上安装

> ID：10104508
> 
> 赞同：1
> 
> 时间：2012-04-11T10:52:24.297
> 
> 标签：xcode, macos, jenkins

从官方网站下载 jenkins-1.459.pkg 后，我无法运行它。当我想执行它时：

```
java -jar jenkins.war 
```

我得到：

```
kuba:Jenkins kuba$ java -jar jenkins.war
Running from: /Applications/Jenkins/jenkins.war
webroot: $user.home/.jenkins
2012-04-11 12:40:32 winstone.Logger logInternal
INFO: Beginning extraction from war file
Jenkins home directory: /Users/mobiletest/.jenkins found at: $user.home/.jenkins
2012-04-11 12:40:34 winstone.Logger logInternal
INFO: Winstone shutdown successfully
2012-04-11 12:40:34 winstone.Logger logInternal
SEVERE: Container startup failed
java.io.IOException: Failed to start a listener: winstone.HttpListener
    at winstone.Launcher.spawnListener(Launcher.java:229)
    at winstone.Launcher.<init>(Launcher.java:181)
    at winstone.Launcher.main(Launcher.java:384)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at Main._main(Main.java:273)
    at Main.main(Main.java:98)
Caused by: java.io.IOException: Failed to listen on port 8080
    at winstone.HttpListener.getServerSocket(HttpListener.java:119)
    at winstone.HttpListener.start(HttpListener.java:72)
    at winstone.Launcher.spawnListener(Launcher.java:220)
    ... 8 more
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at java.net.ServerSocket.<init>(ServerSocket.java:150)
    at winstone.HttpListener.getServerSocket(HttpListener.java:114)
    ... 10 more
2012-04-11 12:40:35 jenkins.InitReactorRunner$1 onAttained
INFO: Started initialization
2012-04-11 12:40:35 hudson.WebAppMain$2 run
SEVERE: Failed to initialize Jenkins
java.lang.InterruptedException
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:485)
    at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:244)
    at jenkins.InitReactorRunner.run(InitReactorRunner.java:43)
    at jenkins.model.Jenkins.executeReactor(Jenkins.java:849)
    at jenkins.model.Jenkins.<init>(Jenkins.java:761)
    at hudson.model.Hudson.<init>(Hudson.java:81)
    at hudson.model.Hudson.<init>(Hudson.java:77)
    at hudson.WebAppMain$2.run(WebAppMain.java:217) 
```

我试过这个： http: [//momo.brauchtman.net/2011/11/12/howto-install-jenkins-on-os-x-and-make-it-build-mac-stuff/](http://momo.brauchtman.net/2011/11/12/howto-install-jenkins-on-os-x-and-make-it-build-mac-stuff/) 但不幸的是没有不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:40:01.727

1.  确保没有其他 Jenkins 或 Tomcat 实例正在运行（`sudo ps -ef | grep jenkins`或`sudo ps -ef | grep java`）

2.  `sudo netstat -a | grep LISTEN`查看哪些进程正在监听端口

3.  使用不同的端口`java -jar jenkins.jar --httpPort <ANUMBERHERE>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:06:25.670

您可能有另一个软件正在监听端口 8080。尝试关闭另一个应用程序或在 Jenkins 配置中将 8080 更改为另一个端口。

# ping - 我应该如何设计我的桌面应用程序，以便我可以远程关注它们是否“活着”

> ID：10104513
> 
> 赞同：0
> 
> 时间：2012-04-11T10:52:44.437
> 
> 标签：ping, remote-server

我将几台计算机分发给运行我的桌面软件的客户。我有一个集中式服务器，用户可以通过 Web HTTP 从这些计算机访问一些数据。该数据是批量收集的，不是实时的，这很好。我想添加在这些远程计算机上运行的应用程序的实时状态。现在我只想在应用程序正在运行和正常运行时显示。最好的方法是什么？我的应用程序是否应该每隔几秒钟向服务器发送一些内容以通知它仍在运行，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:59:22.197

你是对的。心跳服务将是答案。

# c# - 如何在windows文本框中将字符串转换为大写？

> ID：10104515
> 
> 赞同：23
> 
> 时间：2012-04-11T10:52:51.960
> 
> 标签：c#, winforms, textbox, uppercase

我的 Windows 应用程序中有一个文本框。它只允许字母和数字。我想当我输入任何字母时，它应该转换为大写。我该怎么做？在什么情况下？我使用了 str.ToUpper() 但光标正在移动到字符串的开头。请给我解决方案。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-11T10:56:00.067

您只需要将 CharacterChasing 属性更改为`Upper`.

```
textBox1.CharacterCasing = CharacterCasing.Upper 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-24T07:07:50.610

为什么要重新发明轮子，只需将 textBox 的“CharacterCasing”属性设置为“Upper”即可。您无需编写任何代码。

![将 textBox 中的字母设为大写](../Images/a058ddd3692bdbba6929a98a5314539f.png)

在屏蔽文本框的情况下，您可以使用“>”（在 mask 属性中）将以下字符变为大写。例如，对于长度为 8 的输入字母数字字符串 (AZ, 0-9)，使用掩码 '>AAAAAAAA'。要仅限于字母 (AZ)，请使用“>LLLLLLLL”。

![将 maskedTextBox 中的字母设为大写](../Images/904b0122159b334711e886c534bdd17f.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T10:55:35.870

您需要将结果分配`ToUpper`回文本框：

```
txtBox.Text = txtBox.Text.ToUpper(); 
```

或者，将[`CharacterCasing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.charactercasing.aspx)文本框的属性设置为`Upper`：

```
txtBox.CharacterCasing = CharacterCasing.Upper; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T15:49:21.277

在 TextBox 的属性中，只需将 CharacterCasing 设置为 Upper。它将所有输入的字符转换为大写。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T10:56:33.617

尝试使用 KeyPress 事件，处理程序应类似于以下内容；

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            e.KeyChar= (e.KeyChar.ToString()).ToUpper().ToCharArray()[0];
        } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-11T10:59:35.957

```
private void mytextbox_KeyPress(object sender, KeyPressEventArgs e)

{

e.KeyChar = Char.ToUpper(e.KeyChar);

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-24T12:30:31.157

右键单击设计器中的 TextBox，在 Properties 下将 CharacterCasing 更改为 Upper。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T10:58:44.327

也许您应该使用事件：TextBox1_EditValueChanging。

如果每次光标移动到第一个位置，您可以计算txt中的字符数并将光标移到最后一个字符之后。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-03T01:36:35.310

1.  TxtInput //这是用户输入的文本框
2.  LblLengthstrong //标签显示长度
3.  LblUpper //以大写形式显示的标签
4.  LblLower //以小写形式显示的标签
5.  LblRight //显示最后 3 个字符的标签
6.  LblSubscript //显示字符 1 到 3 的标签

**//显示所有输入字符的长度**

```
 private void BtnLength_Click(object sender, EventArgs e)
        {
            LblLength.Text = TxtInput.Text.Length.ToString();
        } 
```

**//使字符大写**

```
 private void btnUpper_Click(object sender, EventArgs e)
        {
            LblUpper.Text = TxtInput.Text.ToUpper();
        } 
```

**//将字符变为小写**

```
 private void BtnLower_Click(object sender, EventArgs e)
        {
            LblLower.Text = TxtInput.Text.ToLower();
        } 
```

**//显示最后3个字符**

```
 private void BtnRight_Click(object sender, EventArgs e)
        {
            LblRight.Text = TxtInput.Text.Substring(TxtInput.Text.Length - 3);
        } 
```

**//显示位置1到3的字符**

```
 private void BtnSubscript_Click(object sender, EventArgs e)
        {
            LblSubscript.Text = TxtInput.Text.Substring(1, 3);
        } 
```

**//ASCII**

```
 private void BtnGo_Click(object sender, EventArgs e)
        {
            string name;
            int letter;

            name = TxtInput.Text;

            for (int index = 0; index < name.Length; index++)
            {
                letter = name[index];
                MessageBox.Show(letter.ToString());
            }
        } 
```

**//密码**

```
 int InNumTry = 0;
    private void BtnGo_Click_1(object sender, EventArgs e)
    {
        string password;
        password = TxtIn.Text;

            switch (password)
            {
                case " ": MessageBox.Show("Passowrd is empty.");
                    break;

                case "MIKE": MessageBox.Show("Password is OK!");
                    FrmBOO newForm = new FrmBOO();
                    newForm.Show();
                    break;

                default:
                    InNumTry++;
                    MessageBox.Show("Invalid Passwrod, try again!");
                    TxtIn.Text = "";
                    TxtIn.Focus();
                    break;
            }

            if (InNumTry >= 3)
            {
                MessageBox.Show("You have tried too many times, have a good day.");
                TxtIn.Enabled = false;
            }
        } 
```

**// 添加定时器（在定时器中添加 this 下的代码（添加 add timer1.Start(); 在启动表单中）**

```
 private void timer1_Tick(object sender, EventArgs e)
        {
            DateTime datetime = DateTime.Now;
            this.LblTime.Text = datetime.ToString();
        } 
```

# apache - ETag 的缺点和限制

> ID：10104520
> 
> 赞同：1
> 
> 时间：2012-04-11T10:53:06.727
> 
> 标签：apache, etag

`ETags`，正如我所读到的，是实现`Caching validation`. 我们计划在我们的服务器上实现这一点。我们有 2 个 apache 正在运行。我想知道使用`ETags`. 如果没有这样的限制，那么为什么不将其用作配置服务器的简单规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:00:17.753

使用缓存验证意味着请求将进行网络调用并命中应用程序，无论如何。应用程序必须处理 ETag 并决定之前的响应是否仍然有效。这实际上意味着您的应用程序将再次构建整个响应以计算 ETag。这意味着如果您的响应很重，ETags 将为您节省一些带宽，但否则可能不会为您节省太多。如果您的回复很重，*通常*第一个回复是 gzip。

# iphone - iOS - FMDB 数据库插入

> ID：10104521
> 
> 赞同：3
> 
> 时间：2012-04-11T10:53:13.537
> 
> 标签：iphone, ios5, sqlite, fmdb

要使用 sqlite 将数据插入数据库，需要复制数据库以使其可写。所以我在我的课堂上有这个方法，我在堆栈溢出和许多其他网站上看到的每一个建议：

```
-(void)createEditableCopyOfDatabaseIfNeeded 
{  
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"sample.db"];

    success = [fileManager fileExistsAtPath:writableDBPath];

    if (success) return;
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sample.db"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
        if (!success) {
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }

} 
```

当然，我有以下代码可以访问我的数据库：

```
FMDatabase *db; = [FMDatabase databaseWithPath:[[NSBundle mainBundle] pathForResource:@"sample" ofType:@"db"]];
if (![db open]) {
    NSLog(@"Error!");
}
else {
    NSLog(@"Database opened!!");
}

[self createEditableCopyOfDatabaseIfNeeded];
[db executeUpdate:@"Insert into user (name, phone, comment) values(?, ?, ?)", @"Name1", @"13548", @"This is a comment", nil];
NSLog(@"Inserted");

FMResultSet *s = [db executeQuery:@"SELECT * FROM user"];
while ([s next]) {
    NSLog(@"%@", [s stringForColumn:@"comment"]);
} 
```

现在，我有几个问题：

1.  插入代码在执行/运行时在模拟器中完美运行。但是，这对真正的 sample.db 没有影响，我认为它必须在我的 mac 硬盘驱动器的某个地方有一个可写副本。这是可以接受的。但是当我在 iphone 上运行这些代码时，它有点无法识别我的`createEditableCopyOfDatabaseIfNeeded`方法并给出了这个错误： `Unknown error finalizing or resetting statement > (8: attempt to write a readonly database)`. 如何使用 FMDB 使这些代码工作？

2.  在 iPhone 上运行时，被复制的数据库位于何处？复制后，即使没有连接到我的 Mac，iPhone 是否会再次使用该数据库？

在设备上运行时我无法插入东西。请帮忙。

太感谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:56:30.980

如果您正在阅读本文，那么我对您的问题有解释。

1.  如果**Resource Bundle**中有任何文件，则它是只读文件。因此，您的资源目录的数据库路径仅供阅读之用。

2.  根据您编写的复制数据库的代码，数据库将在您的*应用程序的文档目录*中创建。即使您从 Mac 中移除 iPhone，此路径也不会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:06:08.637

试试这个插入数据库

```
[db open];

FMResultSet *results = [db executeQueryWithFormat:@"SELECT cms_desc FROM cms_media where cms_name=%@",@"name"];

NSString *str;

while([results next]) 

{

    str=[results stringForColumn:@"cms_desc"];
}

[results close];

[db close]; 
```

只需将 .sqlite 文件拖放到您的项目中并在设备中重置您的应用程序

# java - 带有条件的 Java Foreach

> ID：10104522
> 
> 赞同：26
> 
> 时间：2012-04-11T10:53:19.653
> 
> 标签：java, foreach

Java foreach 可以有条件吗？

例如，

```
for(Foo foo : foos && try == true)
{
//Do something
} 
```

有没有等价的，这样我就可以在里面放一个 AND 条件`for`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T10:54:33.767

不。

您可以改用 while 循环。

```
Iterator iterator = list.iterator();
while(iterator.hasNext()) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-11T10:55:49.647

不，没有那样的事。`Iterable`“增强的 for 循环”是一个完全独立的结构，除了通过其参数返回的迭代器进行 lopp 之外什么都不做。

你可以做的是：

```
for(Foo foo : foos)
{
   //Do something
   if(!condition){
       break;
   }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T10:55:13.963

不，**foreach**专门设计用于迭代数组或集合的所有元素。

如果您愿意，可以检查其中的条件并使用**break**关键字在中间跳出循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-03T09:01:59.033

您可以获得的最接近的东西可能是过滤初始迭代：

```
for(Foo foo : filter(foos)) {
    //Do something
} 
```

过滤器方法返回一个只包含你的条件成立的那些元素的迭代。例如，使用 Guava，您可以像这样编写过滤器方法：

```
Iterable<String> filter(Iterable<String> foos) {
    return Iterables.filter(foos, 
            input -> input.equals("whatever");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-01T17:07:14.667

for-each 不能有条件，这相当于你要求的：

```
Iterator<Foo> iterator = foos.iterator();
while(iterator.hasNext() &&  condition == true) {
    //Do something
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-26T04:52:05.813

中`Java 8`，你**可以**做到。例如 ：

```
foos.forEach(foo -> {
        if(try) {
          --your code--
        }
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-24T13:49:06.323

您可以使用`stream`,`filter`和的组合`forEach`。

例如：

```
 List<String> collection = Arrays.asList("foo", "bar", "baz");

    collection.stream()
    .filter(e-> !"bar".equals(e))
    .forEach(System.out::println); 
```

你得到：

```
foo
baz 
```

PS 这将适用于 Java 8 及更高版本。

# c# - 最新日期的 Lambda 表达式

> ID：10104526
> 
> 赞同：7
> 
> 时间：2012-04-11T10:53:48.393
> 
> 标签：c#, linq, entity-framework, lambda

假设我有一个模型定义为：`Foo {Id, Date}`。

有没有办法制作一个布尔 lambda 表达式，以便我可以获得最新日期的 Foo ？类似的东西`(f => f.Date IsLatest)`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T10:57:31.543

```
var latest = model.OrderByDescending(m => m.Date).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T10:59:07.390

要制作一个确定日期是否为最新日期的表达式，您需要知道最新日期，即：

```
DateTime latestDate = items.Max(f => f.Date);

var latestItems = items.Where(f => f.Date == latestDate); 
```

另一种方法是对项目进行排序：

```
var latestItem = items.OrderBy(f => f.Date).First(); 
```

或使用聚合：

```
var latestItem = items.Aggregate((d, v) => v.Date > d.Date ? v : d); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T10:58:18.733

鉴于您没有提供有关实体名称的任何信息（我在`foos`这里假设）；像这样的东西：

```
var latest = foos.OrderByDescending(f => f.Date).FirstOrDefault(); 
```

如果有*超过一个*的最大日期（我知道你说 'Foo 有最新的......'但我不知道你在这里的时间分辨率），那么你实际上会追求更像 Guffa 的东西回答。

请注意，任一解决方案都将从日期列上的索引中受益匪浅。如果没有索引并且表变大了？那么它可能会很慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T10:57:03.553

试试这个：

```
DateTime maxDate = FooCollection.Max(f=>f.Date) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T11:01:47.097

您可以尝试以下代码：

```
List<Foo> fooList = new List<Foo>();

// add the Foo instance in list here
// then apply following to take latest

fooList.OrderByDescending(p => p.Date).Take(1); 
```

# scheduler - 如何在 play 2.0 应用程序中使用 akka 的调度程序？

> ID：10104530
> 
> 赞同：1
> 
> 时间：2012-04-11T10:54:09.890
> 
> 标签：scheduler, playframework-2.0, akka, reminders

我想在我的 play 2.0（使用 java）框架应用程序中使用 akka 的调度程序来在特定日期和时间发送电子邮件提醒。我是 play 2.0 的新手。如果有人知道（详细），请告诉我在 play 2.0 框架中使用 akka 调度程序的过程？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:50:27.280

我也是新手，还有另一个与 Scala 中的 Akka 相关的问题。但是在阅读时我发现这可能对您有帮助：[http](http://www.playframework.org/documentation/2.0/JavaAkka) ://www.playframework.org/documentation/2.0/JavaAkka ，也许这也是：[https ://github.com/playframework/Play20/wiki/JavaAsync](https://github.com/playframework/Play20/wiki/JavaAsync)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-24T16:28:18.520

**模块类**

```
import com.google.inject.AbstractModule
import play.api.libs.concurrent.AkkaGuiceSupport

class JobModule extends AbstractModule with AkkaGuiceSupport {
  def configure() = {
    bindActor[JobBucket]("job-bucket-actor")
    bind(classOf[Scheduler]).asEagerSingleton()
  }
} 
```

**调度程序类**

```
import javax.inject._
import akka.actor._
import scala.concurrent.ExecutionContext
import scala.concurrent.duration._

class Scheduler @Inject()(val system: ActorSystem, @Named("job-bucket-actor") val jobBucketActor: ActorRef)(implicit ec: ExecutionContext) {
  system.scheduler.schedule(0.microseconds, 1.day, jobBucketActor, "cleanBucket")
} 
```

**JobBucket**（您可以在此类中创建多个作业，并通过将不同的消息传递给接收方法来调用它们。）

```
import javax.inject._
import akka.actor.Actor
import org.apache.commons.io.FileUtils
import play.api.Logger

// You can inject any service class or other class if it's required
@Singleton
class JobBucket extends Actor {
  def receive = {
    //You can place n number of cases.
    case "cleanBucket" => clean()
  }

  def clean(): Unit = {
    //Do whatever you want to do over here.
    Logger.info("This task has been scheduled...!!!")
  }
} 
```

您还需要在 aplication.config 文件中添加一行： **play.modules.enabled += "com.abc.xyz.JobModule"**

# jquery - .load 脚本在 IE 上不起作用

> ID：10104532
> 
> 赞同：-1
> 
> 时间：2012-04-11T10:54:14.257
> 
> 标签：jquery

我使用 Codeigniter 平台制作网站

我使用这个 .load 脚本来加载不同的 PHP 页面。

```
<script>
  $(document).ready(function(){
      $('#right_timeline_div').load("/bookmark/right_timeline");
  });
</script> 
```

它在 Chrome 上运行良好，但 IE8 或 9 有问题。当我单击刷新按钮时，它应该刷新值并显示新结果。但是，IE 不会刷新值并继续显示第一个结果。

IE的这个脚本有错误吗？

IE 加载后不会刷新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:08:00.367

只是一个盲目的提示 - 也许它可能是一个缓存问题。尝试类似：

```
$(document).ready(function(){
    var randomNum = Math.ceil(Math.random()*2);
    $('#right_timeline_div').load("/bookmark/right_timeline?"+randomNum);
}); 
```

在请求中添加随机数可能会促使 IE 重新读取源代码，从而绕过缓存。IE 特别容易出现缓存问题...

注意：我看不到您的来源是什么。这似乎是一个 URL 重写，也许您将不得不使用源请求的不同语法...这只是为了概述您的解决方案可能是什么样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:54:25.693

```
 $(document).ready(function(){
      $('#right_timeline_div').load("/bookmark/right_timeline" + "?" + new Date().getTime());
 }); 
```

这对我有用。看看它是否适合你。

# java - Java - Socket.writeObject() 真的很慢

> ID：10104535
> 
> 赞同：2
> 
> 时间：2012-04-11T10:54:27.543
> 
> 标签：java, performance, sockets, multiplayer

您好，我想告诉您，我为我的游戏制作了多人游戏并且它可以工作，但是从欧洲的一侧到另一侧，需要 8 秒。发送的内容不多，它只发送一个包含 float x、float y 和 String 用户名的对象。

在服务器中，我有 3 个线程：接受、发送、接收。客户端有发送和接收。

服务器发送的一部分：

```
oos = new ObjectOutputStream(new BufferedOutputStream(list_sockets.get(i).getOutputStream()));
int client_state = list_client_states.get(i);
oos.writeObject(client_state);
oos.flush();

oos = new ObjectOutputStream(new BufferedOutputStream(list_sockets.get(i).getOutputStream()));
oos.writeObject(list_data);
oos.flush(); 
```

客户端类似，这是服务器的接收（播放器也类似）：

```
ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
int receive_state = (Integer)ois.readObject();

ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
DataPackage dp = (DataPackage) ois.readObject();

list_data.set(i,dp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:17:11.080

对于发送仅包含 2 个浮点数和一个字符串的对象，您如何进行序列化/反序列化不会有太大的不同。当然它不会直接导致 8 秒的延迟。（序列化格式的影响可能只有几毫秒或更短，除非您使用的是比特率非常低的网络链接。）

我怀疑真正的问题要么是网络问题，要么是（可能）您没有向我们展示的代码中的某种同步错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:34:56.007

更好的是，您可以使用时间戳来调试代码在哪里花费了太多时间。

```
long time=new Date().getTime(); 
```

System.out.prrintln("时间印记"+ (time/1000));

通过这种方式，您可以调试耗时的序列化或建立连接。

# jsp - 如何遍历哈希图数据列表

> ID：10104545
> 
> 赞同：0
> 
> 时间：2012-04-11T10:55:28.720
> 
> 标签：jsp, loops, hashmap

我有哈希图列表。我想遍历数据。请帮我举个例子。我有一张表，其中在 Y 轴上有几个月，在 X 轴上有字段（MS_Target、HSD_Target、ALPG_Target、Lube_Target）。我的代码如下：

```
 List<Map<String, Integer>> ListofHash = new ArrayList<Map<String, Integer>>();

        {

        for (int i = 0; i < 10; i++) 
          {
          Map<String, Integer> mMap = new HashMap<String, Integer>();

          mMap.put(String.valueOf(i), Integer.valueOf( + i));

          ListofHash.add(mMap); 
           }
      for (Map<String, Integer> map : ListofHash)
            {
            for (String key : map.keySet())
             {
               System.out.println(map.get(key));
          }
      }

HashMap <String,Integer> april= new HashMap <String,Integer>();

    april.put("aprMS",new Integer(1));
    april.put("aprHSD",new Integer(2));
    april.put("aprAlpg",new Integer(3));
    april.put("aprLubes",new Integer(4));

HashMap <String, Integer> may= new HashMap <String, Integer>();

    may.put("mayMS",new Integer(1));
    may.put("mayHSD",new Integer(2));
    may.put("mayAlpg",new Integer(3));
    may.put("mayLubes",new Integer(4));

} 
```

同样，我已经为所有月份创建了 hashmap。另外，请建议我应该采用什么键和值。请帮我举个例子。我为所有字段赋予了唯一的名称。例如： apr_MS ， apr_HSD 等。我的表如下：

```
Month         MS_Target     HSD_Target     ALPG_Target        Lubes_Target
April
May 
June
July 
August
September
October
November
December
January
February 
March 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:05:09.763

您可以在 hashmap 上使用迭代器，请参见此处：

[哈希图迭代](http://www.java-examples.com/iterate-through-values-java-hashmap-example)

# birt - 如何根据用户选择显示动态图表

> ID：10104548
> 
> 赞同：0
> 
> 时间：2012-04-11T10:55:42.407
> 
> 标签：birt

我对 Birt Tool 很陌生，

我创建了一个条形图，我的疑问是，我们能否根据用户选择动态更改图表类型，

IE

例如，最终用户从 jsp 列表中选择饼图选项，基于用户选择我想动态更改图表

请指导我

高级感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:16:06.760

这是可能的，但不像你描述的那样。每种图表类型都有细微的不同特征，因此在运行时切换类型会出现问题。我解决这个问题的方法是将您想要支持的每种图表类型添加到您的报告中。然后将每个控件（图表）的可见性属性设置为“false”，以便它们在加载时隐藏。然后，您可以在报表上使用一些脚本来根据用户的选择动态显示报表。

来自 BIRT Exchange 的这篇文章将为您提供所需的客户端脚本：http: [//www.birt-exchange.org/org/devshare/designing-birt-reports/1412-showhide-chart-with-radio-button /](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1412-showhide-chart-with-radio-button/)

祝你好运！

# java - StringBuffer 未完全读取

> ID：10104554
> 
> 赞同：0
> 
> 时间：2012-04-11T10:56:05.613
> 
> 标签：java, string, stringbuffer

我有一个简单的函数用于连接服务器并将响应作为字符串返回。当返回的数据量很小但响应很大时，它可以正常工作。它不会完全存储服务器返回的响应字符串，并以...结束字符串。令人惊讶的是，system.out.println 返回了正确的响应。请帮帮我。我真的被困住了。

```
protected String getResponseFromServer(String URLaddress) {

    HttpURLConnection connection = null;
    URL serverAddress = null;
    BufferedReader rd = null;
    StringBuffer sb = new StringBuffer();
    try {
        serverAddress = new URL(URLaddress);
        // set up out communications stuff
        connection = null;
        connection = (HttpURLConnection) serverAddress.openConnection();
        connection.setReadTimeout(20000);
        connection.connect();
        // read the result from the server
        rd = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            System.out.print(line.trim());
            sb.append(line.trim());
        }

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        // close the connection, set all objects to null
        connection.disconnect();
        connection = null;
    }
    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:00:57.623

*（编辑：此答案基于 OP 最初发布的代码。该问题已由 OP 编辑​​以更改有问题的代码。）*

一个错误在这里：

```
sb.append(line.trim(), 0, line.length()); 
```

如果`line`有任何前导或尾随空格，`line.length()`将大于`line.trim().length()`. 在这种情况下[`sb.append()`会抛出`IndexOutOfBoundsException`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#append%28java.lang.CharSequence,%20int,%20int%29)：

> `IndexOutOfBoundsException`- 如果`start`or`end`是负数， or`start`大于`end`或**`end`大于`s.length()`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:28:37.727

您在调试时是否收到截断的字符串（以 ... 结尾）？试试 System.out.println(sb.toString()); 在你回来之前。

# scala - 如何从 List[Option] 中过滤掉 None？

> ID：10104558
> 
> 赞同：118
> 
> 时间：2012-04-11T10:56:21.933
> 
> 标签：scala, option

如果我`List[Option[A]]`在 Scala 中有一个，那么过滤掉这些`None`值的惯用方法是什么？

一种方法是使用以下方法：

```
val someList: List[Option[String]] = List(Some("Hello"), None, Some("Goodbye"))
someList.filter(_ != None) 
```

有没有更“惯用”的方式？这看起来很简单。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-04-11T10:59:51.277

如果您想同时摆脱这些选项，可以使用`flatten`：

```
scala> someList.flatten
res0: List[String] = List(Hello, Goodbye) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-07T15:53:10.857

`someList.filter(_.isDefined)`如果你想保持结果类型为`List[Option[A]]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-27T11:26:44.080

图书馆`cats`也有`flattenOption`，它把 any`F[Option[A]]`变成 a `F[A]`（哪里`F[_]`是 a `FunctorFilter`）

```
import cats.implicits._

List(Some(1), Some(2), None).flattenOption == List(1, 2) 
```

# parameters - 如何将 url 作为字符串参数传递给表单发布操作

> ID：10104559
> 
> 赞同：1
> 
> 时间：2012-04-11T10:56:24.250
> 
> 标签：parameters

所以我有一个简单的表单（form.php），它将一些数据发送到另一个页面，将其保存到数据库（savedata.php）。

其中一个表单字段是用户输入链接的 Url 字段。

好的。

当我尝试提交其中包含参数的链接时，例如：[http://www.example.com/example.php?id=1&var=1&var=2](http://www.example.com/example.php?id=1&var=1&var=2)然后当表单提交时会出错。

假设表单的最终发布操作是：

savedata.php?field1=blabla&field2=blabla&urlField=http://www.example.com/example.php?id=1&var=1&var=2

因为 urlField 包含一个带有“&”的字符串，所以它混淆了 post 操作。如果我提交一个不带参数的 url，例如：[http](http://www.example.com) ://www.example.com ，那么它可以很好地提交表单。

我想到的一件事是在提交代码之前用另一个字符（如 ^）替换“&”，然后在 savedata.php 上替换回“&”符号，然后将其写入数据库。

有更简单的方法吗？我已经在使用 POST 方法。

谢谢

更新：好的，我看看我是否将“&”符号替换为“%26”，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:03:01.213

使用 post 方法应该可以解决这个问题。这是一个如何做到这一点的例子： [http ://www.tizag.com/phpT/forms.php](http://www.tizag.com/phpT/forms.php)

将您的表单方法更改为

```
 method="post"> 
```

在 savedata.php 上阅读表格

$url = $_POST['urlField'];

# django - Django：将值全局添加到管理上下文

> ID：10104564
> 
> 赞同：0
> 
> 时间：2012-04-11T10:56:42.463
> 
> 标签：django, django-admin

在 django 管理员的标题中，我想显示一个链接。这个链接应该只对特定组的用户可见（对于这个链接，我需要一些额外的数据来反转它）。

如何将此值全局添加到 django 管理模板中使用的上下文中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:03:01.250

您可以编写一个[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)来呈现链接。

如果您包含`django.contrib.auth.context_processors.auth`模板上下文处理器，您将能够`user`在上下文中访问。

# validation - Sencha touch 2.0：使用商店的自定义模型验证

> ID：10104573
> 
> 赞同：0
> 
> 时间：2012-04-11T10:57:41.933
> 
> 标签：validation, sencha-touch-2

我一直在阅读并尝试使用此线程中提出的方法： [How to add a custom validation rule to a model in Sencha Touch](https://stackoverflow.com/questions/7414115/how-to-add-a-custom-validation-rule-to-a-model-in-sencha-touch/9276996#9276996)。

所以首先，我向 Ext.data.validations 单例添加了一个自定义验证类型：

```
if (Ext.data) {
    Ext.data.validations.custom = function (config, value) {
        if (config && Ext.isFunction(config.fn)) {
            //this should be the model
            if (config.self) {
                return config.fn.call(config.self, value);
            } else {
                return config.fn(value);
            } 
        }
        else 
        {
            return false;
        }
    };
    Ext.data.validations.customMessage = "Error";
} 
```

然后，由于我使用的是 ST2，所以我应用了 Ben G 的建议。我扩展 Ext.data.Model 以包含对“self”（this）的引用。

Ext.define('MyApp.model.CustomModelBase', { 扩展：'Ext.data.Model',

```
 //adding an initializer to let custom validators access "self"
    init : function () {
        var i, len;
        if (this.config.validations) {
            for (i = 0, len = this.config.validations.length; i < len; i++) {
                this.config.validations[i].self = this;
            }
        }
    }
}); 
```

最后，我创建了一个扩展 CustomModelBase 的模型。我们将此模型称为 MyApp.model.MyModel。我在其中定义了一个自定义验证规则。

```
Ext.define('MyApp.model.MyModel', {
    extend: 'MyApp.model.CustomModelBase',
    config: {
        fields: [ {name:'field1'} ],

        validations: [
            { 
                type: 'custom', field: 'field1', message: "Your field is bad",
                fn: function (value) {
                     **console.log(this);**
                   return (value>0);
                }
            }           
        ],

        proxy: {
            type: 'localstorage',
            id  : 'MyApp-Local-Storage'
       }        
    }
}); 
```

现在，当只创建一个 MyModel 实例时，一切正常。

问题是当我有 MyModel 的存储时。当您这样做时，在 fn 函数中收到的对“this”的引用似乎总是商店中的最新商品。更准确地说，**console.log(this)**总是输出 store 的最新 Record 对象。

我怎样才能解决这个问题 ？

更新：我想知道是不是因为所有的商店记录都共享同一个模型实例？我们可以做点什么吗？或者上面描述的整个方法是否无法使用商店？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:34:34.790

我找到了这个解决方案（在 Sencha Touch 1.0 论坛中，但它在 ST2 中对我有用）： [http ://www.sencha.com/forum/showthread.php?122680-Conditional-fields-validations](http://www.sencha.com/forum/showthread.php?122680-Conditional-fields-validations)

它需要覆盖 Model 类的 validate() 方法，但如果您不介意，那么这比我之前公开的要容易......

# python - 在python中的两个列表之间交换列表项？

> ID：10104575
> 
> 赞同：0
> 
> 时间：2012-04-11T10:58:00.793
> 
> 标签：python, string

我有一项评估要求我在列表中交换单词。我给出了一个 txt 文件，其中包含一列“旧词”和一列“新词”。我需要定义一个函数来检查字符串以查看“旧单词”列表/列中的单词是否在字符串中，然后我需要将该单词与“新单词”列中的**相应单词交换。**

**例如：**

两列单词中的第一行：['We, 'You']。

**字符串：** “我们和我们的猫一起参加了婚礼” **输出：** “你和你的猫一起参加了婚礼”

给定的 txt 文件包含两列，因此在编写了一些代码后，我设法将单词拆分为某些列表，有一个名为 'old_word_list' 的列表包含所有单词的单个字符串，这些单词将/可以在字符串和一个名为“new_word_list”的列表，其中包含用于替换旧单词的单词。

**伪代码概念：** 如果字符串包含 old_word_list 中的任何单词，则将 word/s 替换为 new_word_list 中相同（对应）索引的单词。

这是我唯一坚持的评估部分，如果有人可以帮助我，我将不胜感激，如果我遗漏了任何需要的信息，请发表评论。谢谢你。

**完整代码：**

```
# Declaring a global variables for the file, so it can be used in the code.
filename = "reflection.txt"
the_file = open(filename)

# Declaring any other reqiured variables.
word_list = []
old_word_list = []
new_word_list = []

# Creating loop to add all words to a list. 
for line in the_file:

    # Appends each line to the end of the list declared above. In appending
    # the lines, the code also removes the last character on each line (/n).
    word_list.append(line[:-1])

# Creating a loop to split each individual word, then appends the
# old/original words to a declared list, and appends the new words
# to a declared list.
for index in range(len(word_list)):
    temp_word = word_list[index]
    split_words = temp_word.split()
    old_word_list.append(split_words[0])
    new_word_list.append(split_words[1])

# Defining a function to produce altered statement.
def reflect_statement(statement):

    # Swaps the old word with the new word.
    for i in range(len(old_word_list)):
        if old_word_list[i] in statement:
             statement.replace(old_word_list[i], new_word_list[i])

    # Replaces '.' and '!' with '?'    
    for index in range(list_length):
        if old_word_list[index] in statement:
            statment = statement.replace(old_word_list[index], \
                                         new_word_list[index])

    statement = statement.replace(".", "?")
    statement = statement.replace("!", "?")

    # Returns result statement.
    return statement. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:33:38.253

您可以使用以下代码：

```
# the words to be replaced
old_word_list=['We','cat']

# the new words
new_word_list=['You','dog']

my_string="We went to a wedding with our cat"

# it prints "We went to a wedding with our cat"
print my_string

# iterate over the list of old words
for word in old_word_list:
  # get the index of the current word
  index = old_word_list.index(word)

  # use this index to do the replacement with the words of the two lists
  my_string = my_string.replace(old_word_list[index], new_word_list[index])

# it prints "You went to a wedding with our dog"
print my_string 
```

**根据作者的评论更新答案：**

```
# the words to be replaced
old_word_list=['We','cat']

# the new words
new_word_list=['You','dog']

def reflect_statement(statement):
  # iterate over the list of old words
  for word in old_word_list:
    # get the index of the current word
    index = old_word_list.index(word)

    # use this index to do the replacement with the words of the two lists
    statement = statement.replace(old_word_list[index], new_word_list[index])

  return statement

mystring="We went to a wedding with our cat"
mystring = reflect_statement(mystring)
print mystring 
```

**作者最后添加源代码后更新的答案：**

将您的功能更改为此：

```
def reflect_statement(statement, old_word_list, new_word_list):
  mystr=statement
  # iterate over the list of old words
  for word in old_word_list:
    # get the index of the current word
    index = old_word_list.index(word)

    # use this index to do the replacement with the words of the two lists
    mystr = mystr.replace(old_word_list[index], new_word_list[index])

  return mystr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:12:39.213

提示：

1.  `"string string".split()`# 将空格上的字符串拆分为列表
2.  您可以使用 for 循环遍历列表
3.  列表有一个`myList.index(element)`告诉你一个元素是否在列表中并返回它的索引。
4.  索引将在您的两个列表之间匹配（根据您的描述）
5.  如果你想走那条路，字符串也有一个“myString.replace(old, new)”方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:17:52.610

```
# map old to new words (assuming there are no duplicates)
replacement_mapping = dict(zip(old_word_list, new_word_list))

# go through each word of the string, if it's in the mapping, use replacement, otherwise the word from the string
new_string = ' '.join([replacement_mapping.get(word, word) for word in given_string.split(' ')]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:06:31.620

在发布我的答案之前，我将陈述我所做的一些假设，所以如果其中任何一个错误，请纠正我。

假设1：每列有相同数量的单词假设2：每个单词只有一个“伙伴”，形成一个单词对

在这种情况下，我会将每个单词对单独设为一个列表。然后，为了继续你的伪代码，对于每一行文本，检查每个单词对并将 word[0] 替换为 word[1]。

编辑抱歉刚刚发现我的措辞模棱两可。在制作单词对列表时，我也会将它们存储在一个列表中，例如`[["old1", "new1"], ["old2", "new2"]]`然后运行你的循环来替换它们（我现在没有给出示例代码，因为我知道你正在做一个作业，所以可能想要解决问题，但如果您遇到困难，请告诉我）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T11:09:29.697

如果我理解你的话，可能是这样，但它并不漂亮：

```
for i in range( len(old_word_list) )
    if old_word_list[i] in "some string":
         "some string".replace(old_word_list[i], new_word_list[i]) 
```

# java - Java日历日期逻辑错误

> ID：10104576
> 
> 赞同：0
> 
> 时间：2012-04-11T10:58:04.663
> 
> 标签：java, date, calendar

我试图找出日期是否在两个特定日期之间。我正在使用日历库来表示日期。我的代码：

```
public static void double getnumber(Calendar cal){

Calendar cred1 = Calendar.getInstance();
Calendar cred2 = Calendar.getInstance();

    cred1.set(Calendar.JANUARY, 21, 2012);
    cred2.set(Calendar.FEBRUARY, 8, 2012);

    if(cal.after(cred1) && cal.before(cred2)){ 
    System.out.println("case 1");
    }
    else{
    System.out.println("case 2");
    }

} 
```

我正在测试的日期是这样的：

```
 Calendar test = Calendar.getInstance();
    test.set(Calendar.JANUARY, 25, 2012);
    getnumber(test); 
```

我的问题是，当我测试那个日期时，应用程序总是在应该打印“案例 1”时打印“案例 2”。任何想法为什么？非常感谢任何帮助，因为我已经尝试了所有方法，但似乎没有任何效果，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:01:55.960

[Calendar.set(int, int, int) 的 javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)说：

```
public final void set(int year,
                  int month,
                  int date)
Sets the values for the fields year, month, and date. 
```

您设置了月-日-年：这不是正确的顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:02:40.230

这就是为什么：这是 Calendar.set 的方法

```
public final void set(int year, int month, int date)
    {
        set(YEAR, year);
        set(MONTH, month);
        set(DATE, date);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:02:43.007

你有`set`错误的方法的论据。请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)。

# android - Android : 如何在 Facebook 上通过 Android 分享意图与 CAPTION 分享照片？

> ID：10104577
> 
> 赞同：0
> 
> 时间：2012-04-11T10:58:05.027
> 
> 标签：android, facebook, facebook-graph-api, photo-gallery

大家好，我想要一个示例或通过该指南的链接想知道如何将照片从设备上传到 Facebook？谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:11:33.737

Facebook 不使用传统的意图共享范式。您提供作为标题共享的文本实际上被用作缩略图链接来共享在线图像或视频。

这没有给标题留下空间。所以不要浪费时间去寻找它。

您必须使用 Facebook API 来共享图像和标题。转到 facebook 开发者页面，您可以在其中找到需要包含在应用程序中的包（查找 facebook.jar 或类似内容）。

# java - OSMDroid PathOverlay

> ID：10104581
> 
> 赞同：8
> 
> 时间：2012-04-11T10:58:41.720
> 
> 标签：java, android, osmdroid, stroke

今天我很期待如何在 OSMDroid 中使用 PathOverlay。

我找不到任何关于它如何工作的解释。

我需要创建一个建议的路线（不像导航系统），只是从一个点开始划一个“电路”然后返回起点。

就像这样（在谷歌地图中绘制）：

![电路](../Images/021dc7b8304758afee74b1f9768e5c6a.png)

我在这里询问正确的方法是什么，指定自定义路径，做我想要的转弯。

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T16:12:22.437

它会在地图上为您绘制一系列直线，因此您需要知道所有道路交叉口的纬度和经度（以及它们从直线弯曲的任何地方）。将所有这些点添加到叠加层。例如，此代码将在伦敦市中心绘制一个矩形框。

```
public class OsmdroidDemoMap extends Activity {

    private MapView mMapView;
    private MapController mMapController;
    int mIncr = 10000;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.osm_main);
        mMapView = (MapView) findViewById(R.id.mapview);
        mMapView.setTileSource(TileSourceFactory.MAPNIK);
        mMapView.setBuiltInZoomControls(true);
        mMapView.setMultiTouchControls(true);
        mMapController = mMapView.getController();
        mMapController.setZoom(13);
        GeoPoint gPt0 = new GeoPoint(51500000, -150000);
        GeoPoint gPt1 = new GeoPoint(gPt0.getLatitudeE6()+ mIncr, gPt0.getLongitudeE6());
        GeoPoint gPt2 = new GeoPoint(gPt0.getLatitudeE6()+ mIncr, gPt0.getLongitudeE6() + mIncr);
        GeoPoint gPt3 = new GeoPoint(gPt0.getLatitudeE6(), gPt0.getLongitudeE6() + mIncr);
        mMapController.setCenter(gPt0);
        PathOverlay myPath = new PathOverlay(Color.RED, this);
        myPath.addPoint(gPt0);
        myPath.addPoint(gPt1);
        myPath.addPoint(gPt2);
        myPath.addPoint(gPt3);
        myPath.addPoint(gPt0);
        mMapView.getOverlays().add(myPath);
    }
} 
```

.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-14T12:58:19.823

以下是如何在 OSMBonusPack 中使用折线绘制道路的教程： [https ://github.com/MKergall/osmbonuspack/wiki/Tutorial_1](https://github.com/MKergall/osmbonuspack/wiki/Tutorial_1)

这很简单，我已经在我的应用程序中成功使用了它。

我基于该教程的代码如下所示：

```
 RoadManager roadManager = new OSRMRoadManager();

    ArrayList<GeoPoint> track = new ArrayList<>();
    // TODO: Fill the list with your track points

    Road road = roadManager.getRoad(track);
    Polyline roadOverlay = RoadManager.buildRoadOverlay(road, context);
    mapView.getOverlays().add(roadOverlay);
    mapView.invalidate(); 
```

# android - 带有导航按钮的Android列表视图...需要帮助

> ID：10104587
> 
> 赞同：0
> 
> 时间：2012-04-11T10:58:59.287
> 
> 标签：android, android-listview

这是我的数据库处理程序代码..

```
 // Getting All detail
                    public List<Detail> getAllDetail() {
                        List<Detail> detailList = new ArrayList<Detail>();
                        // Select All Query
                        String selectQuery = "SELECT  * FROM " + TABLE_DETAIL;

                        SQLiteDatabase db = this.getWritableDatabase();
                        Cursor cursor = db.rawQuery(selectQuery, null);

                        // looping through all rows and adding to list
                        if (cursor.moveToFirst()) {
                            do {
                                Detail detail = new Detail();
                                detail.setID(Integer.parseInt(cursor.getString(0)));
                                detail.setTitle(cursor.getString(1));
                                detail.setDetail(cursor.getString(2));

                                // Adding contact to list
                                detailList.add(detail);
                            } while (cursor.moveToNext());
                        } 
```

我需要在一个活动类中检索这些细节，它的布局文件看起来像一个带有这样的按钮的列表视图..

![在此处输入图像描述](../Images/cbeebffc8274c50d973b024a43db7cf3.png)

该按钮应该被分配数据库行的ID..单击它应该转到另一个活动，在该活动中可以完全查看特定行的详细信息..

请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:31:37.593

这是列表视图吗？还是您创建了自己的布局？如果这是列表视图，那么您已经扩展了适配器类，并且您可以从那里编写这些按钮的点击侦听器。但如果它不是适配器，那么您需要编写自己的点击侦听器，并且需要将其提供给列表中的每个按钮。

希望这会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:00:52.380

我通过使用按钮和文本视图创建动态线性布局自己得到了解决方案。

```
RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout3);

        final DatabaseHandler dbpin = new DatabaseHandler(this);
        Log.d("Reading: ", "Reading all tasks..");
            List<Task> task1 = dbpin.getAllTask();       

            for (Task cn : task1) {
                String log = cn.getTitle();
             int i = cn.getID();

             Button button = new Button(this);
                  button.setText("View" + i);
                button.setTextSize(10);   

                button.setId(2000 + i);
                int width = 80;
                int height = 60;

                TextView textview = new TextView(this);
                textview.setText(log);
                textview.setWidth(200);
                textview.setTextSize(20);
                textview.setPadding( 0, 10, 0, 0);
                textview.setId(2000 + i);
            } 
```

# emacs - 是否可以在 emacs cc-mode 中进行 C++ 自动提示？

> ID：10104588
> 
> 赞同：1
> 
> 时间：2012-04-11T10:58:59.453
> 
> 标签：emacs, cc-mode

我不确定“自动提示”是否正确，但我可以解释

例如当我写

```
std:: 
```

我想在那里查看可用事物的列表，“。”也是如此。和 "->" ，我希望这是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:21:19.050

您可以绑定`.`并`>`使用`semantic-complete-self-insert`命令，该命令将尝试显示可能完成的列表。虽然我不知道，是否可以开箱即用地将其绑定到`::`序列（尽管使用一定数量的 emacs lisp 代码应该是可能的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:03:56.283

[Emacs 中的代码浏览、重构、自动完成](https://stackoverflow.com/questions/671412/code-browsing-refactoring-auto-completion-in-emacs)

不确定这是否是您正在寻找的，但它看起来相关。我认为 Etags 可能是您正在寻找的东西。

# java - Java - 运行 7zip

> ID：10104589
> 
> 赞同：2
> 
> 时间：2012-04-11T10:59:00.983
> 
> 标签：java, process, runtime, 7zip

我有一个使用 7zip 来解压缩文件的应用程序。我使用的代码如下：

```
Runtime prog = Runtime.getRuntime();
Process proc = prog.exec(System.getenv("ProgramFiles").concat("\\7-Zip\\7z x " + "\""+path+"\""+ " -o"+Values.temp_path));

InputStream stderr = proc.getErrorStream();
InputStream instr = proc.getInputStream();
InputStreamReader isr = new InputStreamReader(stderr);
InputStreamReader insr = new InputStreamReader(instr);
BufferedReader br = new BufferedReader(isr);
BufferedReader br2 = new BufferedReader(insr);
String line = null;
String line2 = null;

while ( (line = br.readLine()) != null & (line2 = br2.readLine()) != null){}

int exitVal = proc.waitFor(); 
```

其中 path 是文件的位置， temp_path 是解压缩文件的位置。

虽然这在我的计算机上运行良好，但我的同事在运行同一个应用程序时会出错。

在我的电脑中，变量 exitVal 的值通过方法 waitFor 设置为 0。在其他计算机上，我看到此变量设置为 1 (ERROR_INVALID_FUNCTION)。该应用程序在两台计算机上都是相同的，都使用 win xp 和相同版本的 7zip，我还能缺少什么？

谢谢你的帮助！

编辑：

我发现了两台电脑之间的区别。有效的安装了 java 7，而有问题的安装了 java 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:12:53.327

如果您使用的是 zip 文件，最好查看[ZipInputStream](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html)和[ZipOutputStream](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipOutputStream.html)。这样您就不必依赖可能存在或不存在的工具。

如果您使用 .7z 文件（用 压缩`LZMA`），则有一个名为[lzmajio](https://github.com/league/lzmajio)的库，它也会为您提供 java Streams。

* * *

**资源：**

*   [contrapunctus.net：Java 中的 LZMA 流](http://contrapunctus.net/league/haques/lzmajio/)
*   [7-zip SDK](http://www.7-zip.org/sdk.html)
*   [oracle.com：使用 Java API 压缩和解压缩数据](http://java.sun.com/developer/technicalArticles/Programming/compression/)

# php - 用于表单的 jQuery cookie 读/写

> ID：10104591
> 
> 赞同：1
> 
> 时间：2012-04-11T10:59:09.453
> 
> 标签：php, jquery, html, forms, cookies

从昨天开始，我一直在使用演示站点，并在我自己的站点上制作了一个版本。

这是演示站点： [http ://rikrikrik.com/jquery/autosave/](http://rikrikrik.com/jquery/autosave/)

这是我网站上的确切代码：http: [//jsfiddle.net/EswfB/1/](http://jsfiddle.net/EswfB/1/)

问题：删除相关cookies无法正常工作。

它有时有效，有时无效。通常只有当我点击它、刷新、点击恢复并再次点击删除时才会起作用。

现在，演示站点和我的站点昨天运行良好，关掉我的机器，今天返回，都没有工作。也不要在我同事的机器上工作。

使用 Chrome 和 FF。

有任何想法吗？

单击删除相关 cookie 时，地址栏没有显示 href="#" 的迹象。删除相关的 cookie 也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:02:19.817

我建议在 JavaScript 中使用 localStorage，这很容易管理。你会节省很多代码。[http://jsfiddle.net/EswfB/8/](http://jsfiddle.net/EswfB/8/)

```
function save() {
    var firstname = document.profileForm.First_name.value;
    var lastname = document.profileForm.Last_name.value;
    if(document.getElementById("GenderMale").checked) {
        var gender = "Male";
    }
    else if(document.getElementById("GenderFemale").checked) {
        var gender = "Female";
    }
    var howdowecontactyou = document.profileForm.How_do_we_contact_you.value;
    var preferredtimeofcontact = document.profileForm.Preferred_time_of_contact.value;
    var jobtitle = document.profileForm.Job_title.value;
    localStorage.setItem("firstname", firstname);
    localStorage.setItem("lastname", lastname);
    localStorage.setItem("gender", gender);
    localStorage.setItem("howdowecontactyou", howdowecontactyou);
    localStorage.setItem("preferredtimeofcontact", preferredtimeofcontact);
    localStorage.setItem("jobtitle", jobtitle);
    document.getElementById("autosave_saving").innerHTML = "Saved!";
}
function load() {
    var firstname =  localStorage.getItem("firstname");
    var lastname =  localStorage.getItem("lastname");
    var gender =  localStorage.getItem("gender");
    var howdowecontactyou =  localStorage.getItem("howdowecontactyou");
    var preferredtimeofcontact =  localStorage.getItem("preferredtimeofcontact");
    var jobtitle =  localStorage.getItem("jobtitle");
    document.profileForm.First_name.value = firstname;
    document.profileForm.Last_name.value = lastname;
    if(gender == "Male") {
        document.getElementById("GenderMale").checked = true;
        document.getElementById("GenderFemale").checked = false;
    }
    if(gender == "Female") {
        document.getElementById("GenderMale").checked = false;
        document.getElementById("GenderFemale").checked = true;
    }
    document.profileForm.How_do_we_contact_you.value = howdowecontactyou;
    document.profileForm.Preferred_time_of_contact.value = preferredtimeofcontact
    document.profileForm.Job_title.value = jobtitle;
}
function deleteStorage() {
    localStorage.removeItem("firstname");
    localStorage.removeItem("lastname");
    localStorage.removeItem("gender");
    localStorage.removeItem("howdowecontactyou");
    localStorage.removeItem("preferredtimeofcontact");
    localStorage.removeItem("jobtitle");
}
​ 
```

和 HTML：

```
<p><button class="autosave" OnClick="save()">Save form</button> <button class="autosave_restore" OnClick="load()">Restore form</button> <input type="RESET" value="Default Form"> <button OnClick="deleteStorage()" class="autosave_removecookies">Delete related cookies</button> <span class="autosave_saving" id="autosave_saving"></span></p>
<!-- Licensed software, from www.freecontactform.com -->
<form name="profileForm" accept-charset="utf-8" method="post" action="forms/simple_form/_process.php" onSubmit="return validate.check(this)">
<table class="widthOneHundredPercent">
<tr>
<td class="tableCellFloat widthFortyPercent" valign="top">
<label for="First_name" class="required">First name<span class="required_star"> * </span></label>
</td>
<td class="tableCellFloat" valign="top">
<input type="text" name="First_name" id="First_name" maxlength="50" value="" placeholder="First name"/>
</td>
</tr>
<tr>
<td class="tableCellFloat widthFortyPercent" valign="top">
<label for="Last_name" class="required">Last name<span class="required_star"> * </span></label>
</td>
<td class="tableCellFloat" valign="top">
<input type="text" name="Last_name" id="Last_name" maxlength="50" value="" placeholder="Last name"/>
</td>
</tr>
<tr>
<td class="tableCellFloat columnOne" valign="top">
<label for="Gender">Gender</label></td>
</td>
<td class="tableCellFloat columnTwo" valign="top">
<input type="radio" name="Gender" value="Male" id="GenderMale" />Male<br />
<input type="radio" name="Gender" value="Female" id="GenderFemale" />Female<br />
</td>
</tr>
<tr>
<td class="tableCellFloat widthFortyPercent" valign="top">
<label for="How_do_we_contact_you?" class="required">How do we contact you?<span class="required_star"> * </span></label>
</td>
<td class="tableCellFloat" valign="top">
<select class="tableCellFloat" id="How_do_we_contact_you" name="How_do_we_contact_you">
<option value="">Please select...</option>
<option value="Email">Email</option>
<option value="Phone">Phone</option>
<option value="Text">Text</option>
</select>
</td>
</tr>
<tr>
<td class="tableCellFloat widthFortyPercent" valign="top">
<label for="Preferred_time_of_contact">Preferred time of contact?</label>
</td>
<td class="tableCellFloat" valign="top">
<select class="tableCellFloat" id="Preferred_time_of_contact" name="Preferred_time_of_contact">
<option value="">Please select...</option>
<option value="08:00_-_12:00">08:00 - 12:00</option>
<option value="12:00_-_17:30">12:00 - 17:30</option>
<option value="17:30_-_20:00">17:30 - 20:00</option>
<option value="Anytime">Anytime</option>
</select>
</td>
</tr>
<tr>
<td class="tableCellFloat widthFortyPercent" valign="top">
<label for="Job_title">Job title</label>
</td>
<td class="tableCellFloat" valign="top">
<input type="text" name="Job_title" id="Job_title" maxlength="50" value="" placeholder="Job title"/>
</td>
</tr>
</table>    
<div class="clearboth">&nbsp;</div>
<center><input type="SUBMIT" value="submit"></center>
</form>​ 
```

# qt - 将 Qt 与 Visual C++ 2008 一起使用时的访问冲突

> ID：10104595
> 
> 赞同：0
> 
> 时间：2012-04-11T10:59:26.867
> 
> 标签：qt, visual-c++

我正在尝试将 Qt 与 Visual C++ 2008 一起使用。我通过将 Qt`include`目录添加到选项下的包含文件并将其`lib`目录添加到库文件列表来编译下面的程序。我还将`lib`dir添加到`PATH`, 并添加`QtCore4.lib`到 Linker/Input 中的 Additional Dependencies 设置中。

我从 Visual Studio 中编译了示例程序，当我运行它时，在打印变量的行出现以下错误`now`。

```
Unhandled exception at 0x104e8dcb in Test.exe: 0xC0000005: Access violation reading location 0x203f3f3f. 
```

有谁知道这个问题是什么原因？

```
#include <QtCore/QDate>
#include <iostream>

using std::cout;
using std::string;

int main()
{
    string now = QDate::currentDate().toString().toStdString();
    cout << now << "\n";
    return 0;
} 
```

**编辑**：添加了错误的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T06:47:28.040

最终我使用了@cmannett85 评论中的解决方案，将代码更改为：

```
cout << qPrintable(QDate::currentDate().toString()) << endl; 
```

# asp.net-mvc - 使用 ajax 在表格末尾加载数据

> ID：10104599
> 
> 赞同：0
> 
> 时间：2012-04-11T10:59:44.153
> 
> 标签：asp.net-mvc

我有一个显示公司的页面。我有很多公司，所以我想只显示前 20 家，并允许用户点击表格末尾的链接（“加载更多”）。**单击此链接应保留现有公司并在表格**末尾添加新加载的公司。

**我怎样才能做到这一点？**我知道我必须使用 ajax 和部分视图，但我无法想象在我的表中保留实际的公司（在加载新公司时不会删除这些公司）。

也许有一个 ajax 选项告诉不要删除（targetID 的）内容，**而是**在最后加载数据？

有没有一个例子可以给我一些具体的想法？

谢谢。

* * *

更新

这是我在新加载的行上遇到的 jQuery 图标问题。如何继续使用图标新加载行（ajax get）？

![在此处输入图像描述](../Images/a5955669d334963a1ab9c0c2cfd91db9.png)

这是我的javascript：

```
$(document).ready(function () {

    // Set icons on edit & delete buttons
    $(".editCompany").button({ icons: { primary: "ui-icon-pencil"} });
    $(".deleteCompany").button({ icons: { primary: "ui-icon-trash"} }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:30:50.397

您需要将 ajaxOptions 插入模式设置为 InsertAfter。

InsertionMode.InsertAfter 而不是 InsertionMode.Replace 并确保您以表为目标。

像这样的东西：

```
@Ajax.ActionLink("Load More...", "Action", new AjaxOptions{ UpdateTargetId="myTable", InsertionMode = InsertionMode.InsertAfter }) 
```

您需要确保返回仅呈现`<tr>`元素的 PartialView，以便它们正确插入行。

InsertionMode 可能值的枚举链接：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.ajax.insertionmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.insertionmode.aspx)

要解析 jQuery 图标，您只需确保在 AjaxOptions 的 OnComplete 回调中应用相同的 jQuery。

```
new AjaxOptions{ UpdateTargetId="myTable", InsertionMode = InsertionMode.InsertAfter, OnComplete = 'LoadIcons()' } 
```

# android-layout - 如何在我的 android 应用程序中创建后退按钮

> ID：10104601
> 
> 赞同：0
> 
> 时间：2012-04-11T10:59:44.973
> 
> 标签：android-layout

我对android编程很陌生。无论如何，我制作了一个包含多个活动的测试应用程序。该应用程序的工作原理如下：

活动 1 = MainMenu，活动 2 = A2，活动 3 = A3....

主菜单->A2->A3->A4->A5....

如果用户在，假设 A4 并按下物理后退按钮 (finish())，他将返回到 A3，这很明显.. 但我不希望那样。我希望后退按钮在我的应用程序中用作“返回到“MainMenu”按钮”。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:35:24.250

您可以覆盖 onBackPressed() 来做到这一点：

```
@Override
public void onBackPressed()
{
    startActivity(new Intent(mContext, MainMenu.class));
    finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:09:23.350

您可以为返回键添加一个事件处理程序，当它按下时，您只需午餐主菜单意图。

看看这里： [http ://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html?m=1](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html?m=1)

它有一些很好的代码供您使用。

# android - Android：我可以从网站中取出照片并自动上传吗？

> ID：10104603
> 
> 赞同：3
> 
> 时间：2012-04-11T10:59:55.660
> 
> 标签：android, camera, web

我正在创建一个`web application`（完全在服务器上运行，否`Android App`）并且我希望有可能提供一个用于拍照的按钮。触摸按钮后，这款 Android 手机的相机应该会启动，让用户拍照，然后自动将照片上传到我的网络应用程序。

有没有办法做到这一点？如果是：如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:00:37.970

没有客户端组件的纯 Web 应用程序无法访问手机摄像头。

只有计划在未来的网络浏览器中引入这样的功能：

[HTML5 新特性——访问本机设备摄像头](http://html5.sapnagroup.com/2011/07/html5-new-features-accessing-the-native-device-camera)

**更新 (2012-04-25)**：我刚刚读到即将发布的 Opera 12 版将包括[相机支持](http://my.opera.com/desktopteam/blog/2012/04/17/camera-getusermedia-support)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T11:23:12.310

是的，在android中是可能的。当您有意打开相机时，它会返回您的结果。在此结果中，您将获得拍摄图像的 URI，您可以将其上传到您的服务器。请访问此 URL [Capture Image from Camera and Display in Activity](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

您将对如何完成任务有所了解。

希望这对你有用。

谢谢

# xcode - 在 Xcode 中的 viewController 之间切换

> ID：10104605
> 
> 赞同：2
> 
> 时间：2012-04-11T11:00:00.793
> 
> 标签：xcode, storyboard, viewcontroller

我正在写一个启动画面。初始屏幕将连接到服务器并接收一些数据。成功接收数据后，我想以编程方式转到下一个视图控制器。我怎样才能做到这一点？它与单击按钮不同吗？因为即使我将代码放在 LoadingViewContrller 的 viewDidLoad 中，我也不会被转发到下一个屏幕。

```
TableViewController *tvc = [[TableViewController alloc] init];
tvc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:tvc animated:NO]; 
```

检索完所有数据后，我想自动跳转到 TableViewContrller。

以下是我从网络检索数据时的代码。

```
- (void)fetchedData:(NSData *)responseData {
if(responseData == nil){
    [ErrorViewController showError];
}else{
 //methods to start parsing and adding json into array
if(delegate){
    [delegate jsonReceivedData:array]; 

//codes to go to next screen should be here
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:53:39.800

好的，这样做的方法很简单。使您的应用程序的第一个屏幕与初始屏幕相同。声明并实例化一个 NSTimer，可能在 viewWillAppear 中，如下所示：

```
mainTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTime) userInfo:nil repeats:YES]; 
```

然后实例化一个 BOOL：

```
- (void)fetchedData:(NSData *)responseData {
if(responseData == nil){
    [ErrorViewController showError];
}else{
 //methods to start parsing and adding json into array
if(delegate){
    [delegate jsonReceivedData:array]; 

    myBool = YES;
}
} 
```

在计时器访问的方法中（在本例中为“updateTime”）执行以下操作：

```
-(void)updateTime{
    if(myBool){
        [mainTimer invalidate];
        MyViewController *vC = [[MyViewController alloc] init];
        //pass vC information, now that it has been initialized
        //or pass information to a singleton, from which vC can retrieve it
        // (I can show you how to do that, too, if need be)
        //I will assume you are using a navigationController
        [self.navigationController pushViewController:vC animated:YES];
    }
} 
```

为了篇幅，我省略了`mainTimer`and的声明`myBool`。

# java - GWT 客户端 - 服务器 SimpleDateFormat 将时区更改为默认值

> ID：10104607
> 
> 赞同：3
> 
> 时间：2012-04-11T11:00:10.233
> 
> 标签：java, simpledateformat, date-parsing

我正在使用 GWT RPC 将包含日期的字符串从客户端发送到服务器（它必须是这种方式，因为它位于请求标头上）。

在服务器端，我使用 SimpleDateFormat 解析该字符串并制作我想要的逻辑。

我将我的手机和电脑设置为不同的时区，并将使用托管模式并在 tom cat 上运行测试项目。

这是代码：

客户：

```
DateTimeFormat dtf = DateTimeFormat.getFormat("yyyy-MM-dd HH:mm:ss Z");
Date date = new Date();

System.out.println("client: " + date.toString());
System.out.println("client: " + dtf.format(date));
builder.setHeader("Date1", dtf.format(date)); 
```

服务器：

```
String dateHeader = request.getHeader("Date1");
System.out.println("Server date header from client: " + dateHeader);
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z");

System.out.println("x = " + sdf.parse(dateHeader));
System.out.println("Timezone = " + df.getTimeZone().getDisplayName()); 
```

结果：

**托管模式**
客户端：2012 年 4 月 11 日星期三 17:29:49 NOVST
客户端：2012-04-11 17:29:49 +0700
来自客户端的服务器日期标头：2012-04-11 17:29:49 +0700
x = 4 月星期三2012 年 11 月 11 日 17:29:49

* * *

**汤姆猫**

1.  使用PC：客户端和服务器有相同的时间。

（显然看不到客户端的打印）

来自客户端的服务器日期标头：2012-04-11 17:31:37 +0700
x = Wed Apr 11 17:31:37 NOVST NOVST 2012

1.  手机客户端，有别于服务器。

来自客户端的服务器日期标头：2012-04-11 15:34:35 +0500
x = Wed Apr 11 17:34:35 NOVST 2012

结论： SimpleDateFormat 忽略字符串上的时区。我不想要那个！我希望它能够正常工作。我怎样才能使这项工作？提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:06:13.920

`SimpleDateFormat`不会忽略时区，因为它已经调整了时间，将 15:34:35 +0500 解析*为*17:34:35 *NOVST*（其中*NOVST*为 +0700，本地时区），只是那`java.util.Date`只是一个来自 Epoch 的时间戳并且没有时区的概念（参见javadoc：一切都与*本地*时区相关）。

如果您想在服务器端获取客户端的时区，则必须从序列化日期中解析时区字段（您可以拆分空格，保留最后一部分 - 时区部分 - 并将其传递给以 )[`java.util.TimeZone.getTimeZone()`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)为前缀`GMT`。
或者，您可以使用类型跟踪时区信息的JodaTime [；](http://joda-time.sourceforge.net/)`DateTime`就像是：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss Z");

DateTime dt = fmt.parseDateTime(dateHeader);
System.out.println("x = " + fmt.print(dt));
System.out.println("Timezone = " + dt.getZone().toTimeZone().getDisplayName()); 
```

# java - struts 1 在传递空值时会做什么？

> ID：10104614
> 
> 赞同：0
> 
> 时间：2012-04-11T11:01:05.550
> 
> 标签：java, jsp, struts

我正在更新工作中的旧 Java 应用程序中的代码，但我对 Struts 1 还很陌生，我想知道当框架在试图被 JSP 访问的表单中看到空值时会做什么？

*   它将 null 转换为字符串 null 吗？
*   还是将 JSP 中的字段留空？
*   或者它会倒下并失败？

感谢您对此的任何见解，

阿列克谢蓝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:16:59.057

我假设您的问题与 Struts 1 标签中的 null 处理行为有关。如果它们提供的参数之一为空，则这些标签中的大多数都会抛出一个`RuntimeException`错误，但您通常可以通过将它们的`ignore`属性设置为 false 来覆盖此行为。这是一个使用示例`bean:write`：

```
<bean:write name="employee" property="firstName" ignore="true"/> 
```

`employee`在这种情况下，如果bean 为空，则将写入一个空白字段。

您还可以使用`logic:notEmpty`.

# javascript - 用 JS 替换后，被替换的 HTML 不会被执行

> ID：10104617
> 
> 赞同：1
> 
> 时间：2012-04-11T11:01:25.207
> 
> 标签：javascript, html

我想在我的网页上实现 YouTube 视频的延迟加载。为此，我在其中的 HTML 注释中有一个带有 YouTube 的 iframe 代码的 a-Tag。此外，还有一个 onclick 事件，它替换了评论标签以激活 YouTube 代码。

以下是 HMTL 的示例：

```
<a href="http://www.youtube.com/watch?v=KC2zbOwbeEs&#038;hd=1" class="video-in-link" style="background:url('http://i.ytimg.com/vi/KC2zbOwbeEs/hqdefault.jpg') no-repeat center center; width:500px; height:281px;" onclick="videoInLink(this);">
<!-- xxltxxiframe width="500" height="281" src="http://www.youtube.com/embed/KC2zbOwbeEs?fs=1&#038;feature=oembed&#038;autoplay=1" frameborder="0" allowfullscreenxxgtxxxxltxx/iframexxgtxx -->
</a> 
```

继承人适当的JS：

```
function videoInLink(anchor){
    anchor.innerHTML = anchor.innerHTML.replace(/xxltxx/gi,'<');
    anchor.innerHTML = anchor.innerHTML.replace(/xxgtxx/gi,'>');
    anchor.innerHTML = anchor.innerHTML.replace(/<!--/,'');
    anchor.innerHTML = anchor.innerHTML.replace(/-->/,'');
    anchor.style.background="none";
    anchor.removeAttribute('href');
    anchor.onclick= null;                                               
    return false;
} 
```

Firefox 和 Chrome 一切正常：内容被替换，视频开始播放。在 IE8 中，替换似乎也发生了，但视频不会加载。

尝试了几种组合，都没有成功。

* * *

好的，Dunhamzzz 的想法是正确的，让代码更容易。我为每个视频提供者更改了自己的功能，并且实现工作正常。所以，IE8执行JavaScript后激活代码没有问题，IE8我的代码有问题。

也许我稍后会改进代码，但我的问题本身已经得到解答。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:03:46.253

您可以改为使用 javascript 创建 iframe 节点，并将其附加到父节点，而不是执行此 innerHTML hack。这里有一个简单的例子：http: [//www.developerfusion.com/thread/33979/creating-iframe-through-javascript/](http://www.developerfusion.com/thread/33979/creating-iframe-through-javascript/)

# c# - DataContractSerializer 和不可变类型。反序列化为已知对象实例

> ID：10104618
> 
> 赞同：5
> 
> 时间：2012-04-11T11:01:31.123
> 
> 标签：c#, wcf, serialization, immutability, datacontractserializer

我有一个类实际上是一个基于对象的枚举。该类公开了一组静态对象，并且所有内容都使用这些相同的实例。例如（注意私有构造函数）

```
[DataContract]
public class FieldType
{
    public static readonly FieldType Default  = new FieldType(1, "Default");
    public static readonly FieldType Name     = new FieldType(2, "Name");
    public static readonly FieldType Etc      = new FieldType(3, "Etc");

    private FieldType(uint id, string name)
    {
        Id = id;
        Name = name;
    }

    [DataMember] public uint   Id   { get; private set; }
    [DataMember] public string Name { get; private set; }
    //snip other properties
} 
```

在我必须跨 WCF 序列化之前，这很有效。通过`DataContractSerializer`绕过构造函数创建新对象。这会产生一个有效的`FieldType`对象，但它是一个新实例，不是我的静态实例之一。这使得与已知静态值的参考比较失败。

有什么方法可以覆盖类的序列化行为，以便我创建对象实例而不是填充提供给我的实例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T11:06:32.490

我*怀疑*你可以这样做：

```
[DataContract]
public class FieldType : IObjectReference
{
    object IObjectReference.GetRealObject(StreamingContext ctx)
        switch(Id) {
            case 1: return Default;
            case 2: return Name; // note this is a collision between static/non-static
            case 3: return Etc;
            default: throw new InvalidOperationException();
        }
    }
    public static readonly FieldType Default  = new FieldType(1, "Default");
    // note this is a collision between static/non-static
    public static readonly FieldType Name     = new FieldType(2, "Name");
    public static readonly FieldType Etc      = new FieldType(3, "Etc");

    private FieldType(uint id, string name)
    {
        Id = id;
        Name = name; // note this is a collision between static/non-static
    }

    [DataMember] public uint   Id   { get; private set; }
    // note this is a collision between static/non-static
    [DataMember] public string Name { get; private set; }
    //snip other properties
} 
```

已验证：

```
public static class Program
{
    static void Main()
    {
        var obj = FieldType.Default;

        using(var ms = new MemoryStream())
        {
            var ser = new DataContractSerializer(typeof (FieldType));
            ser.WriteObject(ms, obj);
            ms.Position = 0;
            var obj2 = ser.ReadObject(ms);

            bool pass = ReferenceEquals(obj, obj2); // true
        }
    }
} 
```

但是请注意，`Name`如果我们只使用`Id`来识别要使用的真实对象，那么序列化似乎没有什么意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T11:06:27.030

我建议您覆盖`Equals`and `GetHashcode`（和`==`and `!=`），以便您对静态对象与 WCF 创建的对象进行相等性检查。

数据传输对象 (DTO) 不适用于面向对象的行为，它们是纯粹的状态类。但我能理解你面临的问题。

或者，在您的域对象与上述类一起使用时，使用不同的 DTO 发送数据。

# c# - 在 MVC 3 中对多个视图使用相同的控制器

> ID：10104620
> 
> 赞同：2
> 
> 时间：2012-04-11T11:01:40.980
> 
> 标签：c#, asp.net-mvc-3, razor

我必须在 Views 文件夹中有 2 个文件夹。

即 Foler1 和 Folder2

我创建了一个名为 CalController.cs 的控制器，我想对在上述 2 个文件夹下创建的 .cshtml 页面使用相同的控制器。

我能得到一些解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:43:46.077

我不会推荐它，但你会这样做：

```
class CalController 
{
 public ActionResult Home()
 {
  return View("~/Views/Folder1/view.cshtml");
  //OR
  return View("~/Views/Folder2/view.cshtml");
 }
} 
```

您可以将两个视图都放在共享文件夹中。我不明白您为什么要将视图放在单独的文件夹中。

# c# - 从后面的代码发布到第三方

> ID：10104622
> 
> 赞同：1
> 
> 时间：2012-04-11T11:01:49.840
> 
> 标签：c#, asp.net, postback

我得到了一些生成的代码，如下所示：

```
<form id="form1" method="post" action="https://applications.first-contact.biz/WebFormPosts/default.aspx">

<!-- Form fields -->

</form> 
```

我可以将其转储到页面上并成功地将表单发布到第三方网站。我现在想要的是控制回帖，以便它不会立即发布给第三方，而是回发给自己，一旦验证，然后发布给第三方。

有没有办法做到这一点，还是我坚持使用 Javascript 进行验证？

一个附带问题，以这种方式发布跨域是否存在安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:07:37.147

从 Javascript 进行自动重新回发似乎很尴尬。我认为更好的解决方案是让您的服务器充当发布请求的代理。进行验证，然后构造一个 HttpWebRequest 并将其发布给第三方，使用相同的发布数据和用户代理。

# android - 将 android action bar compat、pager 和 tabs 示例与 ActionBarSherlock 进行比较

> ID：10104625
> 
> 赞同：5
> 
> 时间：2012-04-11T11:02:28.033
> 
> 标签：android, tabs, actionbarsherlock, android-actionbar

我希望这个问题不会因为没有代码而被拒绝。但是，我认为它可能会引起一些人的兴趣，因为操作栏的 android 文档和它的兼容性现在变得相当大。

我有一个应用程序，我想使用操作栏、选项卡和寻呼机将其转换为新的 UI。但我希望它能够兼容从 android 4.0 到 android 2.2，比如说。

使用其中任何一种的可能性、优点和缺点是什么：

*   来自 ICS 的带有支持 api 的操作栏 + 来自示例的一些代码（例如用于选项卡和寻呼机的操作栏[兼容](http://developer.android.com/resources/samples/ActionBarCompat/index.html)和[支持示例](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)）
*   与动作夏洛克[制表符+寻呼机](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)？
*   与动作夏洛克[动作栏标签](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java)？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:30:11.023

我在几个项目中使用了 ABS，这是一个梦想。它为我节省了大量时间，应用程序看起来很棒，并且版本兼容性非常好。

导航选项卡是 Google 推荐的主要导航方法，作为 ActionBar 的一部分，所以我会说使用它（或 ActionBar 操作，或下拉微调器），除非你有充分的理由不这样做。因为它在 ABS 中并且可以回溯到旧版本，所以它很容易实现，所以你可以花时间在实际的应用程序上。

ABS 确实需要花费一些精力来建立依赖关系，但它只是一个库项目，并不难，所需的少量时间被好处大量弥补。

我认为最后两个选项之间的主要区别在于您是否希望用户在选项卡之间横向滑动，这取决于应用程序。如果您想要侧滑，请使用寻呼机，如果不是，ActionBar NavigationTabs 可能会完成这项工作。

# java - 如何将 sql 表中的数据显示到 JComboBox 中？

> ID：10104626
> 
> 赞同：0
> 
> 时间：2012-04-11T11:02:32.930
> 
> 标签：java, prepared-statement, jcombobox

**我想将我的数据库的两列显示到两个 JComboBox**

```
String rq1 = "SELECT region  FROM  rg";

String rq2 = "SELECT ACTELS  FROM  rg";

st1 = conn.createStatement();
st2 = conn.createStatement();
rs1 = st1.executeQuery(rq1);
rs2 = st2.executeQuery(rq2);   

comboBox_ACTELS = new JComboBox<String>();
comboBox_gouver = new JComboBox<String>();

while ((rs1.next())&&(rs2.next())) {
    String m1= rs1.getString("region");
    String m2= rs2.getString("ACTELS");
    //comboBox_gouver.setModel(new DefaultComboBoxModel<String>(new String[] {m1}));
    //comboBox_ACTELS.setModel(new DefaultComboBoxModel<String>(new String[] {m2}));
    comboBox_gouver.addItem(m1);
    comboBox_ACTELS.addItem(m2);
    nbp ++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:19:07.083

哎呀，这可以更简单地完成，因为两者都来自同一个表'rg'

```
String rq1 = "SELECT region,ACTELS FROM rg";

st1 = conn.createStatement();
rs1 = st1.executeQuery(rq1);  

comboBox_ACTELS = new JComboBox<String>();
comboBox_gouver = new JComboBox<String>();

while (rs1.next()) {
  String m1= rs1.getString("region");
  String m2= rs1.getString("ACTELS");
  //comboBox_gouver.setModel(new DefaultComboBoxModel<String>(new String[] {m1}));
  //comboBox_ACTELS.setModel(new DefaultComboBoxModel<String>(new String[] {m2}));
   comboBox_gouver.addItem(m1);
   comboBox_ACTELS.addItem(m2);
    nbp ++;
} 
```

# visual-studio-2010 - VS2010 构建失败并出现意外退出代码

> ID：10104627
> 
> 赞同：0
> 
> 时间：2012-04-11T11:02:33.550
> 
> 标签：visual-studio-2010, unit-testing, mstest

我有我的第一个带有 Microsoft 测试的 VS2010 解决方案（即不是 nUnit 测试）。我的构建在构建服务器上失败并出现错误

```
TF270015: 'MSTest.exe' returned an unexpected exit code. Expected '0'; actual '1'. 
```

这是什么意思？测试失败了吗？我设置错了吗？MS 是在告诉我回到 nUnit 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:01:01.953

这是由[KB983504](http://archive.msdn.microsoft.com/KB983504)修补程序中解决的[错误引起的。](http://connect.microsoft.com/VisualStudio/feedback/details/563602/tf270015-mstest-exe-returned-an-unexpected-exit-code-expected-0-actual-1)

# objective-c - 将 .xib 文件添加到 UIViewController 子类？

> ID：10104629
> 
> 赞同：4
> 
> 时间：2012-04-11T11:02:41.960
> 
> 标签：objective-c, uiviewcontroller, xib, nib

我制作了一个没有 .xib 文件的 UIViewController 子类，我认为我不需要它。现在我意识到它会非常有用，但我不确定如何向其中添加 .xib 文件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T11:08:53.893

创建一个 .xib 文件，然后进入界面生成器，然后进入“身份检查器”面板；在那里，您会在自定义类标题下找到一个名为“类”的字段，从下拉列表中选择要添加到 .xib 文件中的类。（确保在 xib 显示区域的小边栏中选择 File's Owner）。

# javascript - 如何转换 00B0（度数符号）unicode 字符？

> ID：10104634
> 
> 赞同：8
> 
> 时间：2012-04-11T11:03:02.147
> 
> 标签：javascript, node.js

我有字符串 00B0，它是度数符号的 Unicode，如何转换为符号？

```
var str = "00B0";
var degreeSign = convesion(str);
console.log(degreeSign); 
```

怎么可能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T11:09:34.423

```
console.log('\u00B0');​​​​​​ // outputs ° in my chrome console 
```

所以基本上：'\u00B0'

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T11:13:02.953

将字符串解析为数字以获取字符代码，然后使用该`String.fromCharCode`方法从中创建字符串：

```
var degreeSign = String.fromCharCode(parseInt(str, 16)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T11:26:59.320

如果你确定你的字符串格式正确，你也可以这样做：

```
var degreeSign = eval("('\\u" + str + "')"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T11:11:51.740

您可以按照此示例在 HTML 中使用 Unicode 字符

```
&#x00B0; 
```

度数符号将如下所示：°

编辑：除了这个问题被标记为 Node.js。获取符号的目的是什么？是前端还是后端？

# zend-framework - 向角色授予对操作的访问权限

> ID：10104637
> 
> 赞同：0
> 
> 时间：2012-04-11T11:03:12.460
> 
> 标签：zend-framework, acl

我想授予特定操作的访问权限。我有模块：特权，模型：特权，操作：索引和管理。

我这样做

```
class My_ACL extends Zend_Acl {

    public function __construct() {

    $this->addRole(new Zend_Acl_Role('admin'));

    $this->add(new Zend_Acl_Resource('discussions'))
            ->add(new Zend_Acl_Resource("privileges"))
          ->add(new Zend_Acl_Resource('privileges:privilege:index'));
           // another way for adding actions.
        //  ->add(new Zend_Acl_Resource('privileges:privilege',array('index','manage'));

         $this->allow('admin', 'account')
         ->allow('admin', 'privileges:privilege'); 
        }
    } 
```

当我这样做时，索引和管理操作不起作用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:08:48.437

您的 ACL 不会自动直接绑定到您的控制器/操作。你需要这样设置，如果你想要的话。

因此，在您的请求中的某处（可能作为插件），您需要测试当前登录的用户是否可以访问您定义的资源，如果没有，请执行某些操作...

```
if(!$acl->isAllowed($users_role, $resource_they_want_to_access))
{
     // go away, display access denied page etc
} 
```

# c# - 从 SQL Server dbmail 创建/生成“.eml”文件

> ID：10104640
> 
> 赞同：3
> 
> 时间：2012-04-11T11:03:29.590
> 
> 标签：c#, .net, sql-server-2008, eml

是否可以从 SQL Server dbmail 生成 .eml 文件？我运行 SQL Server 2008 R2。

我需要创建一个“电子邮件沙箱”，电子邮件将在其中暂存，然后再发送到我们的 SMTP 服务器进行发送。这将允许在最终交付之前查看和批准生成的应用程序（希望是 dbmail）、电子邮件。我可以在 .NET 中通过为对象指定一个 '<em>pickupDirectoryLocation' 属性来实现这一点`SmtpClient`。

问题：有没有办法我也可以使用 SQL Server 生成的电子邮件来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:36:19.530

好问题！从来没想过。

好吧，当您调用 send_dbmail 过程时，您实际上并没有发送电子邮件。您只是在队列中插入一条记录，该记录将由发送电子邮件的数据库邮件进程 (DatabaseMail.exe) 读取。

不知道你想要的能不能实现，但我能想到一些事情：

1.  您可以使用带有参数 AccountRetryDelay 或 DatabaseMailExeMinimumLifeTime 的 sysmail_configure_sp 来延迟进程运行的时间，以便管理员有时间批准电子邮件（或在某些时间启用/禁用作业）。在此期间，您可以访问保存消息的表格并对其进行编辑。但这并不能完全解决您的问题，而且它是一个相当丑陋的解决方案。更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms186321%28v=sql.100%29.aspx)

2.  创建一个中间表，在其中插入消息，批准后，调用 send_dbmail 过程

# vim - 在 Vim 中搜索和替换多行模式

> ID：10104643
> 
> 赞同：3
> 
> 时间：2012-04-11T11:03:35.380
> 
> 标签：vim, replace

我有一个像

```
myFunction (
  myStruct_1_Ptr *var1, /* commenty */
  myStruct_2_Ptr *var2, /* commenty */
  myStruct_3_Ptr *var3, /* commenty */
  int info1,
  int info2,
  int info3,
  int info4
) 
```

比我将所有这些信息移动到一个包装结构中，我想让它看起来像

```
myFunction (
  myStruct_1_Ptr *var1, /* commenty */
  myStruct_2_Ptr *var2, /* commenty */
  myStruct_3_Ptr *var3, /* commenty */
  myStruct_4_Ptr *var4  /* This is where all infos went in */
) 
```

该函数由类似的语法调用，只需删除前面的语法即可。

```
myFunction (
  var1, /* commenty */
  var2, /* commenty */
  var3, /* commenty */
  var4  /* This is where all infos went in */
); 
```

我如何通过搜索和替换（或其他任何东西）来做到这一点？我在这里只写了只存在于两个地方的声明部分——在相应的文件`.c`和`.h`文件中，但我想对我调用函数的所有地方进行类似的处理。赋予函数的变量名称都是相同的。

S&R 的另一种方法可能是跨多个文件对函数的所有实例执行宏，但我不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T18:45:19.313

如果它是一个没有嵌套括号的简单函数调用，那么您可以使用替换命令来执行此操作，如下所示：

```
:%s/\(myFunction\_s*(\(\_[^,]*,\)\{3}.*\_s*\)\_[^)]*/\1var4\r/ 
```

那么你可以使用 跨所有开放缓冲区执行`:bufdo`此操作，但这确实是特定的，并且带有大量关于没有嵌套括号的警告，没有逗号是注释，我敢肯定还有很多其他情况下它不会正常工作。

关键是`\_`扩展字符类并`.`匹配换行符。

# objective-c - 具有角半径的 UITextView：输入本身的白色背景与圆角重叠

> ID：10104647
> 
> 赞同：0
> 
> 时间：2012-04-11T11:03:47.427
> 
> 标签：objective-c, ios, uitextfield

我正在尝试在objective-c 中创建一个具有大角半径的文本字段，例如iOS 中的searchField。在我的 xib 中，我添加了一个 UITextField。我像这样在objective-C中设置文本字段的样式：

```
// corner radius
textField.layer.cornerRadius = 20.0f;
textField.layer.masksToBounds = YES;
textField.backgroundColor = [UIColor clearColor];

[textField setFont:[UIFont fontWithName:@"Univers-Condensed-Medium" size:18.0]]; 
```

结果：输入的角落不可见，一些白色背景覆盖了这些角落。您可以在此图像中看到问题：

![问题截图](../Images/206c800c6a67e26175cbdf2afa80ad52.png)

我尝试了几件事，例如：

```
textField.leftView.opaque = NO;
textField.leftView.backgroundColor = [UIColor clearColor];

textField.inputView.opaque = NO;
textField.inputView.backgroundColor = [UIColor clearColor];

textField.rightView.opaque = NO;
textField.rightView.backgroundColor = [UIColor clearColor]; 
```

我什至添加了一个图标（仅用于测试）都给出了相同的结果。我需要做什么才能使角落可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:49:45.910

我做了一些测试，没有白色背景重叠，这就是当你改变角半径时文本字段的样子。尝试更改文本字段所在的 UIView 的背景颜色，并看到它总是这样。

不幸的是，如果您想更改cornerRadius并希望它以您在此处发布的方式显示，也许您需要使用一些背景图片，我不知道。

如果我是你，我将使用没有cornerRadius 的textField。

# java - 通过超链接引导到不同的 UI

> ID：10104649
> 
> 赞同：0
> 
> 时间：2012-04-11T11:03:57.677
> 
> 标签：java, gwt, hyperlink

我正在尝试创建一个带有超链接的 GWT 应用程序，该超链接用于导航到同一应用程序的不同用户界面。我使用超链接类，并将链接定义为：

```
Hyperlink yearViewLink = new Hyperlink("YearView","yearView"); 
```

例如。我无法弄清楚文档，上述构造函数的第二个参数到底应该是什么。一个实现 HistoryListener 的类？一般如何通过超链接的“指向”功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:18:16.840

第二个参数是历史令牌。它实际上是一个字符串。因此，当您单击超链接时，它会触发一个历史事件。在 HistoryListener 实现中，您可以使用此令牌来决定应该向用户显示哪个页面。[请参阅超链接](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Hyperlink.html)的文档。看看它是如何在[GWT 展示](http://gwt.google.com/samples/Showcase/Showcase.html#!CwHyperlink)中使用的。

谢谢， 加内什

# ruby-on-rails - Rail 3：重定向后实例变量不可用

> ID：10104652
> 
> 赞同：8
> 
> 时间：2012-04-11T11:04:04.987
> 
> 标签：ruby-on-rails, redirect

我在 Rails 3 中有一个表单向导。基本上，我创建了一个酒店对象，然后当所有这些都完成后，我想为该酒店创建一个位置对象。我用于创建酒店的控制器代码如下所示：

```
 def create
    @hotel = Hotel.new(params[:hotel])

    respond_to do |format|
      if @hotel.save
        @location = Location.new
        format.html { redirect_to '/set_location'}
      else
        format.html { render action: "new" }
      end
    end
  end 
```

然后在“/set_location”页面中，我有一个设置位置的表单。但是，我`'undefined method model_name for NilClass:Class'`在 @location 实例变量的 html.erb 上遇到错误。

这真的很奇怪，因为当我使用 render '/set_location' 而不是 redirect_to 时它可以正常工作。但是，我想使用 redirect_to 方法来防止重复记录提交。

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T11:13:02.457

HTTP 在设计上是无状态的。如果您想在请求之间共享状态（重定向导致另一个请求），您应该使用`session`哈希。像这样：

```
session[:hotel_id] = @hotel.id 
```

然后你以这种方式检索你`Hotel`的`/set_location`：

```
Hotel.find(session[:hotel_id]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:21:32.840

我相信你想做的是：

1.  确定哪个控制器和操作响应“/set_location”请求。
2.  在那里你会看到你错过了这条线`@location = Location.new`。你需要在那里创建它。

Rails 中的实例变量通常用于在控制器和视图之间传递信息，这就是为什么在执行**渲染**时不会出现该错误的原因。Rails 视图知道来自控制器的实例变量。

但是，您正在执行重定向，因此您正在调用另一个不知道是什么`@location`的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-02T20:23:02.450

我相信大雄在这里的回答是最全面的，并且回答了 OP 的确切问题。请投票（@Ger）。

在 jdoe 的回答中，我预计或希望看到更多关于他/她（jdoe）在他的解释中使用“请求”的解释，因为“请求”可以解释为其他框架中对视图（或模板）的请求，所以当从 Rails 的角度阅读时，这句话可能会误导新的 Rails 开发人员（包括我自己）：

> “请求之间不能传递变量。我认为作者得到了这个想法：使用会话。”

从某种意义上说，当您使用“render”从控制器请求视图/模板时，确实可以传递变量。因此，如果您的控制器方法呈现一个视图，该视图将知道`@variable`您在该控制器中定义的内容。

此外，使用会话实际上并不是在请求之间传递变量的唯一方法。您可以修改重定向到路由以捕获变量：

考虑（在 routes.rb 文件中）：

```
match 'surveys/result(/:id)' => "surveys#result", via: [:get], as: 'surveys_result' 
```

现在，在“调查”控制器“结果”操作方法中，您将有一个`:id`参数。您可以将其称为`params[:id]`，例如在您的数据库中查找具有此 ID 的对象。我相信，还有一种方法可以隐藏`:id`URI/URL，以防您不希望用户在那里看到它。

@shime：关于您的“重复条目”问题，我相信 OP 指的是在 POST 请求上呈现视图。想象一下，如果 POST 成功，那么在您提交表单后，您可能会在每次刷新页面时向数据库提交一个重复条目（重定向方法会确保不会发生这种情况，因此是标准方式从您的 POST 请求中路由），我发现这一段对两种实现都发生了什么有最清晰的解释之一：

[https://gist.github.com/jcasimir/1210155#redirect](https://gist.github.com/jcasimir/1210155#redirect)

# android - MusicPlayer 暂停并从它开始

> ID：10104653
> 
> 赞同：0
> 
> 时间：2012-04-11T11:04:14.273
> 
> 标签：android, android-activity, android-music-player

我正在开发音乐应用程序。

我想暂停播放器，当我去恢复时，它将从那一点开始。

**音乐.java**

```
public class Music {

    private static MediaPlayer mp = null;

    public static void play(Context context,int resource){
        stop(context);
        mp = MediaPlayer.create(context, resource);
        mp.setLooping(true);
        mp.start();
    }

    static void stop(Context context) {
        if(mp != null){
            mp.stop();
            mp.release();
            mp = null;
        }
    }
} 
```

音乐活动

```
public class SMusicActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btnplay = (Button)findViewById(R.id.play);
        btnplay.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                onResume();
            }
        });

        Button btnstop = (Button)findViewById(R.id.pause);
        btnstop.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                onPause();
            }
        });
    }

    @Override
    protected void onResume() {
        super.onResume();
        Music.play(this,R.raw.govind_bolo);
    }

    @Override
    protected void onPause() {
        super.onPause();
        Music.stop(this);
    }
} 
```

我想使用停止按钮作为暂停和播放。我为它进行了编码，但正如你所知，我没有得到完美的..所以我怎样才能将播放和暂停之类的操作变成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:09:14.707

摆脱您的静态音乐外观。在您的活动中使用真正的 MediaPlayer 并

*   仅实例化一次（onCreate）
*   单击按钮时播放和暂停
*   使用 mediaPlayer.isPlaying() 检查您是否可以实际播放或暂停播放器。使用此对象时需要遵守状态图，有关状态的更多详细信息以及允许从特定状态进行的转换，请参见[javadoc 。](http://developer.android.com/reference/android/media/MediaPlayer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:26:50.777

创建一个局部变量，如“private int currentPosition”，然后使用以下内容：

```
 btnplay.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mp.seekTo(currentPosition);
            onResume();
        }
    });

    Button btnstop = (Button)findViewById(R.id.pause);
    btnstop.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        currentPosition = mp.getCurrentPosition();
            onPause();
        }
    }); 
```

# java - 简单的java类下载文件

> ID：10104655
> 
> 赞同：1
> 
> 时间：2012-04-11T11:04:28.660
> 
> 标签：java, download, runtime-error, urlconnection

我正在尝试使用以下代码使用简单的 java 类下载文件：

```
public class Download {  

     public static void main(String[] args) throws Exception {  

        Download d = new Download();  
        d.URLSetUp("http://www.sheldonbrown.com/web_sample1.html");  
     }  

    public String URLSetUp(String urlProp) throws Exception {  

        StringBuffer tempData = new StringBuffer();  
        String contentXML = "";  
        String line = "";  
        URL url1;  
         try {  
            url1 = new URL(urlProp);  

            URLConnection conn = url1.openConnection();  

            conn.setDoOutput(true);  
             OutputStreamWriter wr = new OutputStreamWriter(conn
                .getOutputStream());  

             BufferedReader rd = new BufferedReader(new InputStreamReader(conn
                .getInputStream()));  
              while ((line = rd.readLine()) != null) {  
                 tempData.append(line);  
             }  
             contentXML = tempData.toString();  

            wr.close();  
            rd.close();  

         } catch (MalformedURLException e) {  

             e.printStackTrace();  
         } catch (IOException e) {  

             e.printStackTrace();  
        }  
         if (contentXML != null) {  
             return contentXML;  
        } else {  

             System.out.println("Error");  
         }  
         return null;  

     }  
} 
```

它给了我以下错误：

```
#  
# An unexpected error has been detected by Java Runtime Environment:  
#  
#  Internal Error (434C41535326494C453041525345520E4350500B65), pid=5156, tid=4296  
#  
# Java VM: Java HotSpot(TM) Client VM (1.6.0_03-b05 mixed mode)  
# An error report file with more information is saved as hs_err_pid5156.log  
#  
# If you would like to submit a bug report, please visit:  
#   http://java.sun.com/webapps/bugreport/crash.jsp  
# 
```

如果你们有任何灵魂，请告诉我。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:05:39.233

正如您可能已经确定的那样，那是您的虚拟机崩溃了。您在 Java 中通常所做的任何事情都不会触发这种情况，因此我将从升级您的 JVM 开始。1.6.0_ **03**已经很老了。

[此页面](http://www.oracle.com/technetwork/java/javase/downloads/index.html)详细介绍了 Java 7 下载以及早期的 Java 6 JDK。正如您所看到的，它们已达到次要版本 31，因此您相对已过时。

如果您想进一步调试，请注意上述错误报告文件并查看[此 SO answer](https://stackoverflow.com/a/1559940/12960)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:12:48.153

源文件是正确的，我试了一下，它可以工作。

只有一个错误，但它与您的问题无关。你正在使用`readLine()`方法。当您获得该行并将其附加到`tempData`您丢失行终止字符时，请记住修复此问题，或者您更改文件。

# c# - UnitOfWork 不会根据条件更新所有项目

> ID：10104657
> 
> 赞同：0
> 
> 时间：2012-04-11T11:04:36.567
> 
> 标签：c#, .net, entity-framework, unit-of-work

我有这个方法：

```
public bool UpdateOfficeApprovers(IList<int> invoiceLinesToUpdate, int userId)
{   
    foreach (var invoiceLineId in invoiceLinesToUpdate)
    {
        var invoiceLine = _unitOfWork.InvoiceLineRepository.Get(invoiceLineId);

        invoiceLine.OfficeUserId = userId;

        if (!invoiceLine.HasTwoUniqueApprovers)
        {
            // do something here to avoid this line being updated
        }
    }

    _unitOfWork.Save();

    return hasUniqueApprovers;
} 
```

我在这里要做的是浏览所有的 invoiceLines 并更新他们的 OfficeUserId。但是有条件`HasTwoUniqueApprovers`，如果是这样，`false`我不想更新这个 invoiceLine 而是留下它。

好的，这行：

```
invoiceLine.OfficeUserId = userId; 
```

会更新实体状态来`EntityState.Modified`纠正吗？

所以当：

```
 _unitOfWork.Save(); 
```

这将保存所有的 invoiceLINEes，因为它保存了所有内容：

```
EntityState.Modified 
```

所以我想知道的是如何阻止某些invoiceLINEes 被更新。

那么当 invoiceLine 满足条件时，我该如何设置它以使其不会被更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:13:35.527

而不是检查 !HasTwoUniqueApprovers; 只需检查实体 HasTwoUniqueApprovers 是否然后更新此实体。“HasTwoUniqueApprovers”为假的其他实体将处于未更改状态，并且不会在对象上下文中进行处理。

```
public bool UpdateOfficeApprovers(IList<int> invoiceLinesToUpdate, int userId)

{   
    foreach (var invoiceLineId in invoiceLinesToUpdate)
    {
        var invoiceLine = _unitOfWork.InvoiceLineRepository.Get(invoiceLineId);

    if (invoiceLine.HasTwoUniqueApprovers)
    {
        invoiceLine.OfficeUserId = userId;
    }
}

_unitOfWork.Save();

return hasUniqueApprovers;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:09:10.390

未`OfficeUserId`为您不想保存的行设置或将其状态设置回未更改。

```
objectContext.ObjectStateManager.ChangeObjectState(invoiceLine, EntityState.Unchanged); 
```

或在 DbContext API 中：

```
dbContext.Entry(invoiceLine).State = EntityState.Unchanged; 
```

# php - 使用 php while 循环插入 mysql 数据库

> ID：10104658
> 
> 赞同：0
> 
> 时间：2012-04-11T11:04:40.000
> 
> 标签：php, mysql, loops, insert, while-loop

尝试将多个条目插入 MySQL innodb 时遇到以下问题。

只有第一个插入存储在数据库中。（尽管其存储正确）

db 数据正确，发布数据正确，一切都经过测试，while 循环在我的测试中计数正确（没有插入）

即 $r = 7 $s = 3 给了我 21 个插槽，这是正确的。

```
$l = $_POST['Lager'];
$r = $_POST['Reihe'];
$p = $_POST['platz'];
$s = $_POST['slots'];
$a = $_POST['art'];

echo( "test: " . $_POST['Lager'] . $_POST['Reihe'] . $_POST['platz'] . $_POST['slots'] . $_POST['art'] );

$i=0;
$n=0;
$counter =0;

while($i < $p)
{
$platz =("
 INSERT INTO 
    Lager (LagerNr,ReiheNr,PlatzNr,SlotNr,LagerArt,Stock)
 VALUES ('". $l ."','" . $r  . "','" . $i . "','". $n ."','" . $a . "','0')");
 mysql_query($platz);
 echo ($platz);

    // anzahl slots = $s
    while($n < $s)
    {

    $slot("
     INSERT INTO 
        Lager (LagerNr,ReiheNr,PlatzNr,SlotNr,LagerArt,Stock)
     VALUES ('". $l ."','" . $r  . "','" . $i . "','". $n ."','" . $a . "','0')");
     mysql_query($slot) OR print(mysql_error());

    $n++;
    $counter++;
    echo($slot);
    }
    $n = 0;
$i++;   
}
  echo ("\n" . $counter . " Slots erstellt"); 
```

mysql_close();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:09:28.200

我不完全了解您要做什么以及什么不起作用，但是：

```
$slot("
 INSERT INTO 
    Lager (LagerNr,ReiheNr,PlatzNr,SlotNr,LagerArt,Stock)
 VALUES ('". $l ."','" . $r  . "','" . $i . "','". $n ."','" . $a . "','0')"); 
```

似乎缺少一个'='。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:13:25.557

```
 $slot("
 INSERT INTO 
    Lager (LagerNr,ReiheNr,PlatzNr,SlotNr,LagerArt,Stock)
 VALUES ('". $l ."','" . $r  . "','" . $i . "','". $n ."','" . $a . "','0')");
 mysql_query($slot) OR print(mysql_error()); 
```

应该：

```
 $slot = 
 ("INSERT INTO 
    Lager (LagerNr,ReiheNr,PlatzNr,SlotNr,LagerArt,Stock)
 VALUES ('". $l ."','" . $r  . "','" . $i . "','". $n ."','" . $a . "','0')");
 mysql_query($slot) OR print(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:12:09.667

$slot 后面没有“=”，但 $platz 有。

# sqlite - SQLITE 中是否存在 UID 数据类型，如果是，那么如何为其生成值

> ID：10104662
> 
> 赞同：39
> 
> 时间：2012-04-11T11:05:03.837
> 
> 标签：sqlite, uid

我正在创建这样的表：

```
CREATE TABLE foobar (id uniqueidentifier, foo text, bar text, PRIMARY  KEY (id)) 
```

如何为表 foobar 中的 id 字段插入或生成值？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-11T11:57:38.417

您可以争辩说 SQLite 根本不支持数据*类型*。例如，在 SQLite3 中，您可以这样做。

```
sqlite> create table test (id wibblewibble primary key); 
```

SQLite 将愉快地创建一个具有“数据类型”wibblewibble 的列。SQLite 还将愉快地创建具有“数据类型”uuid、guid 和 SuperChicken 的列。

对你来说关键点可能是如何自动生成一个 uid。SQLite 在那里帮不了你太多。

您可以将其完全留给客户端程序。如果您使用 python 编程，请使用[uuid 模块](http://www.doughellmann.com/PyMOTW/uuid/)。在 ruby​​ 中，您有[SecureRandom.uuid 函数](http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom#uuid-class_method)。其他语言具有类似的功能或解决方法。

您可以用 C 编写自己的 uid 生成函数。（请参阅[创建或重新定义 SQL 函数](http://www.sqlite.org/c3ref/create_function.html)。）我认为这是一种相对极端的方法。

您可以将其存储为[二进制](https://stackoverflow.com/q/1039461/562459)或[文本](https://stackoverflow.com/q/5066392/562459)格式。

* * *

*其他在线对话表明，对于 UUID是*什么存在广泛的误解。UUID 不仅仅是一个 128 位的随机数。UUID 具有结构和规则。请参阅[RFC 4122](https://www.ietf.org/rfc/rfc4122.txt)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-29T01:05:30.847

Benjamin Berry 的回答并不正确——它会产生格式错误的 UUID——但它展示了一种有趣的技术，使用子选择来生成随机性，然后从中选择子字符串。这是我已经确认确实有效的类似方法：

```
select substr(u,1,8)||'-'||substr(u,9,4)||'-4'||substr(u,13,3)||
  '-'||v||substr(u,17,3)||'-'||substr(u,21,12) from (
    select lower(hex(randomblob(16))) as u, substr('89ab',abs(random()) % 4 + 1, 1) as v); 
```

一些示例输出：

```
c71122df-18e4-4a78-a446-fbf7b8f2969b
61e75f87-978b-4d9e-b587-bedcc2d23898
30eee0fa-2ff2-4ff5-b8ef-f99378272999 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-01-14T12:01:09.660

这是类似的东西，可以直接用作表达式：

```
lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6))) 
```

例如作为列的默认值传递：

```
sqlite> create table "table" (
  "id" char(36) default (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))), 
  "data" varchar(255), primary key ("id")
);

sqlite> insert into "table" ("data") values ('foo');
sqlite> insert into "table" ("data") values ('bar');
sqlite> select * from "table";
947efcc9-4212-442a-b68c-eb6fbd8a7128|foo
a2c3857b-1eb4-40bd-aed2-6e8d68cc2ab8|bar 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-18T23:34:26.590

一个项目需要这个

```
select SUBSTR(UUID, 0, 8)||'-'||SUBSTR(UUID,8,4)||'-'||SUBSTR(UUID,12,4)||'-'||SUBSTR(UUID,16)
from (
select lower(hex(randomblob(16))) AS UUID 
); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-09T09:10:16.347

我创建了一个用户定义的函数（为我的 c# 应用程序中的 guid/uuid 列生成默认值）

```
var connection = new SqliteConnection("DataSource=:memory:");
connection.CreateFunction("newid", Guid.NewGuid); 
```

# c# - 隐藏扫描仪进度条窗口

> ID：10104668
> 
> 赞同：2
> 
> 时间：2012-04-11T11:05:29.203
> 
> 标签：c#, winforms, winapi, events, hook

我正在制作一个需要从扫描仪扫描图像的应用程序。

我的应用程序基于这个项目 [http://www.codeproject.com/Articles/171666/Twain-for-WPF-Applications-Look-Ma-No-Handles](http://www.codeproject.com/Articles/171666/Twain-for-WPF-Applications-Look-Ma-No-Handles) 并且扫描部分工作得很好。

但这是我的问题：我需要在不向用户显示任何窗口的情况下进行扫描。

上面的项目允许我不向用户显示扫描仪配置选项屏幕，但它仍然显示进度条。

当我打电话时，进度条出现（扫描开始）

```
DSixfer(
    appid,
    srcds,
    TwDG.Image,
    TwDAT.ImageNativeXfer,
    TwMSG.Get,
    ref hbitmap );

[DllImport("twain_32.dll", EntryPoint="#1")]
private static extern TwRC DSixfer( [In, Out] TwIdentity origin, [In] TwIdentity dest, TwDG dg, TwDAT dat, TwMSG msg, ref IntPtr hbitmap ); 
```

我搜索了所有参数，但看不到任何可以禁用进度条的参数。

所以我决定捕获正在创建的进度条窗口的事件，并将其隐藏（有没有更好的方法？）但该事件没有被捕获。

首先，我创建了一个临时窗口，因为我的应用程序将是一个 Windows 服务，还因为 TWAIN 需要一个与进度条相关联的窗口句柄。

这是我的代码

```
HookProc WindowCreationProcedure = new HookProc(WindowCreationHookProc);

int hHook = SetWindowsHookEx(WH_SHELL,
        WindowCreationProcedure,
        (IntPtr)0,
        AppDomain.GetCurrentThreadId()
        );

System.Windows.Window tmpWindow = new System.Windows.Window();
tmpWindow.WindowState = WindowState.Minimized;  //So that the window isn't showed
tmpWindow.Show(); 
```

我收到了创建 tmpWindow 的事件，但没有收到进度条。我在这里想念什么？

***编辑：***忘记在这篇文章中添加我的钩子函数

```
private const int WH_SHELL = 10;
private const int HSHELL_WINDOWCREATED = 1;

public static int WindowCreationHookProc(int nCode, IntPtr wParam, IntPtr lParam)
{
    if (nCode == HSHELL_WINDOWCREATED)
    {
        Console.WriteLine("WINDOW CREATED");
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:05:30.260

当吐温的现成能力可用时，为什么要做所有这些事情。

只需将`CAP_INDICATORS`value 设置为 false 就可以了。它的十六进制值为：`0x100b`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T23:35:24.857

要阻止 TWAIN 弹出其界面，您需要`DG_CONTROL / DAT_USERINTERFACE / MSG_ENABLEDS`使用 ShowUI = FALSE 和 ModalUI = FALSE 发送消息。这是[一些示例代码](https://github.com/jeske/twaindotnet/blob/incremental_scanning/src/TwainDotNet/DataSource.cs#L410)。

也可以在扫描期间获得增量状态，而不是在整个扫描中被阻止。[您不使用 ImageNativeXfer，而是使用内存块传输，从Twain Spec](http://www.twain.org/wp-content/uploads/2017/03/TWAIN-2.4-Specification.pdf)的第 4-20 页开始描述。您可以[在此处查看示例代码](https://github.com/jeske/twaindotnet/blob/incremental_scanning/src/TwainDotNet/DataSourceManager.cs#L168)。

# c# - 扩展和数字特殊处理的公式

> ID：10104671
> 
> 赞同：0
> 
> 时间：2012-04-11T11:05:32.660
> 
> 标签：c#, formula, brackets

我的程序试图将特殊公式（参见示例）扩展为明确的公式。furmula 必须代表的术语很少：-整个公式中没有空格（“”）-它的公式只有圆括号"(,)" 而不是所有的括号形式"{}[]" - 公式只包含字母（az,AZ）、数字（也包括数字）和圆括号。- 对于每个左括号，必须是合适的右括号。-to 公式不能以括号开头。

这里有一些例子： * 输入：'abz2(3(a)2(ab))a 输出：'abzaaaababaaaababa

*   输入：'a2(A)6(g2(a))' 输出：'aAAgagagagagaga'

这是代码：

```
 bool ExistBrackets(string st)
    {
        for (int i = 0; i < st.Length; i++)
        {
            if (IsBracket(st[i]))
                return false;
        }
        return true;
    }

    string AddChainDeleteBracks(int open, int close, string input)
    {
        string to="",from="";
        //get the local chain multipule the number in input[open-1]

        //the number of the times the chain should be multiplied
        for (int i = input[open - 1]; i > 0; i--)
        {
            //the content
            for (int m = open + 1; m < close; m++)
            {
                to = to + input[m];
            }
        }

        //get the chain i want to replace with "to"
        for (int j = open - 1; j <= close; j++)
        {
            from = from + input[j];
        }
        String output = input.Replace(from, to);
        return output;
    }

    private void PopulateStartEnd()
   {
       //assuming that start and end are empty
       int cS=0,cE=0;
       //populate start
       for (int i = 0; i < (textBox1.Text.Length); i++)
       {
           if (textBox1.Text[i] == '(')
           {
               start[cS] = i;
               cS++;
           }
           if (textBox1.Text[i] == ')')
           {
               end[cE] = i;
               cE++;
           }
       }

       }

    private string FigureInput(string st)
    {
        int i,close;
        PopulateStartEnd();
        //get the index in the start array which is populated
        for (i = start.Length - 1; start[i] != 0; i--) ;
        //populate the last letters if there is outside the brackets
        while (!ExistBrackets(st))
        {
            //loop on the latest opening brackets in start array
            for (; i >= 0; i++)
            {
                //find the suitable closing brackets in the end array
                for (close = 0; ((end[close] > start[i]) && (end[close] != null)); close++) ;
                st=AddChainDeleteBracks(i, close, st);
            }
        }

        return st;

    } 
```

***主要方法是FigureInput***

我得到的错误：

****** *** ******异常文本******* *** ****** System.IndexOutOfRangeException：索引超出了数组的范围。在 C:\Projects_2012\Project_Noam\Project\myProject\myProject\Formula.cs:myProject.Formula.FigureInput(String st) 在 C:\Projects_2012\Project_Noam\Project\myProject\ 的 myProject.Formula.FigureInput(String st) 中的 myProject.Formula.PopulateStartEnd() myProject\Formula.cs：位于 C:\Projects_2012\Project_Noam\Project\myProject\myProject\Formula.cs 中 myProject.Formula.generateButton_Click(Object sender, EventArgs e) 的第 135 行：第 36 行*****

 ****** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:13:45.500

您永远不会检查`close`小于`end.Length`在. 注意：C# 中的字符串不是以空值结尾的。`for``FigureInput`

将循环更改为：

```
for (close = 0; (close < end.Length && (end[close] > start[i])); close++) ; 
```

* * *

我从来没有看到你初始化`end`并`start`有足够的大小。确保它们足够大或更好地使用`List<int>`可以添加索引的[`Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx).*****

# javascript - 在 javascript 中隐藏或屏蔽 URL 的查询参数

> ID：10104673
> 
> 赞同：-3
> 
> 时间：2012-04-11T11:05:37.000
> 
> 标签：javascript, html, url

我必须将用户名和密码作为查询字符串传递给 javascript 中的 url。我正在使用 window.open() 方法。我可以在我打开的网址中看到用户名和密码。我需要隐藏/屏蔽密码我该怎么做？

注意：我不想使用 post 方法表单提交。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-11T11:56:19.243

```
window.open('http://google.com','_blank','location=no'); 
```

见[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

为了记录……绝对是个***坏***主意。

此外，您可能需要考虑使用 SSL 执行此操作。HTTPS 协议还在传输过程中对查询字符串进行加密，因此这也将有助于您**暴露的凭据的 MITM 攻击！**

** 编辑 - 可用的现代浏览器，这将在 IE9 中工作（正如我使用 MS CRM 2011 发现的那样）。其他浏览器将地址栏标记为只读，但仍将其显示为评论中提到的反网络钓鱼机制。

# git - 如何使用 mercurial 进行原始结帐？

> ID：10104676
> 
> 赞同：3
> 
> 时间：2012-04-11T11:05:49.500
> 
> 标签：git, mercurial

如何将工作目录状态恢复到从存储库的新克隆中恢复的状态（显然我可以克隆我的存储库，但这似乎有点野蛮。）

使用 git 我会这样做：

```
git clean -xdn (dry-run, to see what I'm about to destroy)

git clean -xdf (force, to actually do it) 
```

而且我假设可能有一个微妙不同的等价物，但我找不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:19:44.483

您的`git clean`命令从工作树中删除未跟踪的文件，包括被忽略的文件。[标准清除扩展](http://mercurial.selenic.com/wiki/PurgeExtension)提供了等效的 Mercurial 命令：

```
hg clean --all --print 
```

删除`--print`以实际删除文件，删除`--all`以仅删除未跟踪的文件并留下忽略的文件。

如果您还想丢弃尚未推送的本地变更集，即相当于

```
git reset --hard origin/master 
```

然后你需要启用[mq 扩展](http://mercurial.selenic.com/wiki/MqExtension)并运行

```
hg strip "outgoing()" 
```

您的本地克隆现在看起来就像您第一次克隆它时一样。

（是的，我们的工具箱中也有锋利的工具，但在您决定使用它们之前，它们会被隐藏起来。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:49:54.527

使用或更新到修订并丢弃任何本地未提交的更改`update`。`-C``--clean`

```
hg status   (to see what you're about to destroy)
hg update <revision> -C 
```

如果不想修改父版本，也可以使用`revert`：

```
hg revert -anC  (dry run)
hg revert -aC  (all files, no backups) 
```

使用`hg help update`或`hg help revert`获取有关选项的文档。

# c# - 如何在水晶报表上应用具有一系列日期的sql查询

> ID：10104677
> 
> 赞同：2
> 
> 时间：2012-04-11T11:06:02.963
> 
> 标签：c#, sql-server, crystal-reports

我必须检索在两个日期范围内有多少员工参加工作。我设法得到这样的查询

前日期范围：`2012-02-03`至`2012-03-03`

```
SELECT A.EmployeeD, A.EmployeeName, ISNULL(SUM(CASE WHEN  a.AttendanceDate BETWEEN '2012-02-03' AND '2012-03-03' THEN  1 ELSE 0 END), 0) AS AttendCount
FROM     (SELECT     EmployeeID, EmployeeName, AttendanceDate
                      FROM          dbo.tblAttendance
                      GROUP BY EMPLOYEEID, EmployeeName, AttendanceDate
         ) AS A
GROUP BY EMPLOYEEID, EmployeeName 
```

但是我该如何使用它才能在 Crystal Report（在 C# 上）上显示它？我的意思是，我希望用户能够更改程序内的日期范围。

我通常将`select expert`功能用于此类事情，但据我所知，我认为这不会起作用...有人可以帮助我吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:55:38.483

您可以将计数卸载到 CR...

1.  将表格“tblAttendance”添加到您的报告中
2.  在报告中创建两个参数，{?StartDate} 和 {?EndDate} 将包含您的日期。
3.  在您的选择公式中，添加这样的一行`{tblAttendance.AttendanceDate} in {?StartDate} to {?EndDate}`。至此，您拥有了您想要的所有数据，只是显示和汇总的问题。
4.  按 {tblAttendance.EmployeeID} 分组，并将摘要`distinctcount({tblAttendance.AttendanceDate},{tblAttendance.EmployeeID})`放在 GroupHeader 或 GroupFooter 中。这只是意味着按员工分组的出勤日期的 distinctcount()。
5.  在报告中显示摘要、员工姓名和员工 ID。

# python - 高级 Python 调度程序和 SQLAlchemyJobStore

> ID：10104682
> 
> 赞同：3
> 
> 时间：2012-04-11T11:06:24.470
> 
> 标签：python

我在[APS](http://packages.python.org/APScheduler/)中使用 sqlalchemy 作业存储。使用函数 add_cron_job 也可以添加作业。但是在数据库表中没有条目。请帮帮我：以下是代码

```
import time
import logging
from threading import Timer
from threading import Lock
from gadgetplatform.classes.utils.utilities import import_module
from apscheduler.scheduler import Scheduler

from apscheduler.jobstores.sqlalchemy_store import SQLAlchemyJobStore

class SchedulerManager(object):
    _instance = None
    _initialised = False
    lock = Lock()
    log = logging.getLogger(__name__)
    jobDict=[]

    def __new__(cls):

        if not cls._instance or not cls._initialised:
            cls.lock.acquire()
            if not cls._instance:
                cls.log.info("creating instance")
                cls._instance = super(SchedulerManager, cls).__new__(cls)
                cls._initialised = True
                cls._instance.init()
                cls.log.info("instance created")
            cls.lock.release()
            cls.log.info("lock released")
            cls.log.info("returning instance")
        return cls._instance    

    def init(self):
        self.sched=Scheduler()
        self.sched.add_jobstore(SQLAlchemyJobStore('mysql://root@localhost/mygola?charset=utf8&use_unicode=0'), 'apschedulerJobs')        

    def addToCron(self,source,time):
        self.log.info("called to add schedular")

        time = time.split(' ')

        m=str(time[0])        
        h=str(time[1])        
        d=str(time[2])        
        mnth=str(time[3])                
        yr=str(time[4])

        func=self.convertStringToFunction(source)
        self.sched.add_cron_job(func, year=yr, month=mnth, day=d, hour=h, minute=m)        
        self.jobDict.append(source)

        self.log.info("added with the time")            

    def removeFromCron(self,source):        
        func=self.convertStringToFunction(source)
        self.sched.unschedule_func(func)

    def start(self):
        self.sched.start()
        self.log.info("Schedular Started")

    def stop(self):
        self.sched.shutdown()

    def getRunningJobs(self):
        return self.jobDict

    def convertStringToFunction(self,source):
        strArr = source.rsplit('.',1)
        mod = import_module(strArr[0])
        func = getattr(mod, strArr[1])
        return func 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:49:26.200

我从未使用过 APScheduler，但从文档中看，您似乎必须指定要向哪个作业存储添加作业。

您可以通过给它指定特殊名称来确保 SQL Alchemy 作业存储是默认的`default`：

```
self.sched.add_jobstore(SQLAlchemyJobStore('...'), 'default') 
```

或者您可以在添加作业时指定作业存储名称：

```
self.sched.add_cron_job(func, 
                        jobstore="apschedulerJobs", 
                        year=yr, month=mnth, day=d, hour=h, minute=m) 
```

# jakarta-ee - javaee, Weblogic, LDAP 认证器

> ID：10104688
> 
> 赞同：0
> 
> 时间：2012-04-11T11:06:32.957
> 
> 标签：jakarta-ee, ldap, weblogic

我使用 WebLogic 配置 LDAP 身份验证器，如下所示：Weblogic 控制台 -> 安全领域 -> myrealm -> 提供者 -> 新建 -> 类型：ActiveDirectoryAuthenticator... 并设置用户名属性 = sAMAccountName。然后，我的应用程序通过调用 httpServletRequest.getUserPrincipal.getName() 获取经过身份验证的用户的 sAMAccountName。

但是，这仅返回字符串（sAMAccountName）。是否可以直接从 httpServletRequest 获取经过身份验证的用户的完整 LDAP 帐户（javax.naming.directory.SearchResult 或类似）？

ps：我知道我可以使用基于 sAMAccountName 的额外 LDAP 查询来获取用户的完整 LDAP 帐户，但这需要不必要的第二个 LDAP 查询，并且还需要将 LDAP 配置从 Weblogic 复制到我的应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:50:05.080

您可以使用 OPSS 用户和角色 API。他们将使用 Active Directory。

[http://docs.oracle.com/cd/E12839_01/core.1111/e10043/devuserole.htm#BABBIGAJ](http://docs.oracle.com/cd/E12839_01/core.1111/e10043/devuserole.htm#BABBIGAJ)

您可以使用 searchUser 和 searchRole API 直接查询特定用户或角色的身份存储：

`IdentityStore.searchUser(String name);`

`IdentityStore.searchUser(Principal principal);`

# ios - Xcode 4.3.1 组织者错误

> ID：10104691
> 
> 赞同：1
> 
> 时间：2012-04-11T11:07:20.527
> 
> 标签：ios, xcode

最近我升级`Xcode`到最新版本，今天我正在尝试提交但不幸的是我不能

这是我在管理器中所做的：单击`validate button`->我得到了“ `log in to itunes account`”框->我输入了我的Apple ID和密码单击`Next`但没有任何反应

我在尝试时遇到了同样的问题`submit the application`

注意：尝试重新启动`Xcode`和`iMac`，但问题仍然存在

![我不能通过这一步](../Images/7d3843e75807ee986414d342a3824493.png)

这一步我过不去

有人有想法么？

# python - 如何设置 NetworkX 边缘标签偏移？（避免标签重叠）

> ID：10104700
> 
> 赞同：15
> 
> 时间：2012-04-11T11:08:05.760
> 
> 标签：python, matplotlib, networkx

我正在尝试为图形添加边缘标签。一切正常，唯一的问题是两条边相交时 - 我只看到其中一个标签碰巧重叠。

![例子](../Images/a1051d221e67884e2a638fcd5c635aae.png)

如您所见，显示了 hphob-alpha 标签，但未显示极性-beta 标签（我的猜测是它在前面提到的正下方）。

我找不到任何关于如何重新定位标签的文档，任何关于如何设置某种偏移量来移动标签的建议？

用于生成图表的代码：

```
try:
    import matplotlib.pyplot as plt
except:
    raise

import networkx as nx

G=nx.Graph()

a="hphob"
b="polarity"
c="alpha"
d="beta"
G.add_edge(a,b,weight=0.5)
G.add_edge(b,c,weight=0.5)
G.add_edge(c,d,weight=0.5)
G.add_edge(a,d,weight=0.5)
G.add_edge(a,c,weight=0.5)
G.add_edge(b,d,weight=0.5)

pos=nx.spring_layout(G) # positions for all nodes

# nodes
nx.draw_networkx_nodes(G,pos,node_size=7000, node_color="white")

# edges
nx.draw_networkx_edges(G,pos,
        width=6,alpha=0.5,edge_color='black')

# labels
nx.draw_networkx_labels(G,pos,font_size=20,font_family='sans-serif')

nx.draw_networkx_edge_labels(G,pos, 
    {
        (a,b):"x", (b,c):"y", (c,d):"w", (a,d):"z", (a,c):"v", (b,d):"r"
    }
)

plt.axis('off')
plt.savefig("weighted_graph.png") # save as png
plt.show() # display 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T11:29:55.210

我使用 NetworkX 1.6 版，在那里我可以提交`label_pos`到`draw_networkx_edge_labels()`. 默认情况下，这设置为 0.5，但使用您的示例并将其设置为 0.3，我得到以下结果： ![边缘标签移动的加权图](../Images/95551a3419c96df5c9286c7893a72314.png)

```
nx.draw_networkx_edge_labels(G,pos, 
    {
        (a,b):"x", (b,c):"y", (c,d):"w", (a,d):"z", (a,c):"v", (b,d):"r"
    },
    label_pos=0.3
) 
```

[这是详细信息](https://networkx.lanl.gov/trac/changeset/2f89194047c52703e41a989ec1920467610ded2b/networkx)

# c# - Nhibernate：使用已定义的映射使用 CreateSqlQuery 调用存储过程

> ID：10104701
> 
> 赞同：3
> 
> 时间：2012-04-11T11:08:17.310
> 
> 标签：c#, nhibernate, stored-procedures, fluent-nhibernate, fluent-nhibernate-mapping

我使用`ISession.CreateSQLQuery`.

然后我用

```
SetResultTransformer(new AliasToBeanResultTransformer(typeof(Article))).List<Article>().ToList() 
```

这种方法的问题在于，只有将表一对一地`AliasToBeanResultTransformer`映射到类。`Article``Article`

```
public class Article : Entity
{
    public virtual string Description { get; set; }
}

public class Entity
{
    public virtual int Id { get; set; }
}

public class ArticleRepository : Repository<Article>, IArticleRepository
{
    private ISession _session;

    public ArticleRepository(ISession session) : base(session)
    {
        _session = session;
    }

    public List<Article> GetByDescription(string description)
    {
        return _session
            .CreateSQLQuery("EXEC ArticlesByDescription :Description")
            .SetString("Description", description)
            .SetResultTransformer(new AliasToBeanResultTransformer(typeof(Article)))
            .List<Article>().ToList();
    }
} 
```

但是我`Article`表上的主键被调用`ArticleId`，因此`AliasToBeanResultTransformer`引发异常。

> 在“Core.DomainModels.Article”类中找不到属性“ArticleId”的设置器

有没有办法在使用时重用 FluentNhibernateMapping `CreateSqlQuery`？

编辑：

[Nhibernate 文档](http://nhforge.org/blogs/nhibernate/archive/2008/11/23/populating-entities-from-stored-procedures-with-nhibernate.aspx)描述了如何将已映射的实体与 hbm 文件一起使用。

```
<sql-query name="GetProductsByCategoryId">
   <return class="Product" />
   exec dbo.GetProductsByCategoryId :CategoryId
</sql-query> 
```

我真的问自己为什么不能仅仅通过代码来做到这一点？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-09T18:04:23.760

我正在使用此代码映射到存储库中的实体。我相信它也适用于调用程序：

```
public IEnumerable<Address> Search(string query, int maxCount)
{
    return session.CreateSQLQuery("SELECT * FROM address WHERE fts_col @@ plainto_tsquery('cs', :query) LIMIT :limit;")
        .AddEntity(typeof(Address)) // this is probably what you need to map to entity
        .SetString("query", query)
        .SetInt32("limit", maxCount)
        .List<Address>();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T13:04:14.647

**似乎**无法使用`ISession.CreateSQLQuery`并从.**`ISession`**

 **我现在要做的是一起使用 hbm 文件和 FluentNhibernate 映射。

血红蛋白：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Core" namespace="Core.DomainModels">
  <sql-query name="ArticlesByDescription">
    <return class="Article" />
    EXEC ArticlesByDescription :Description
  </sql-query>
</hibernate-mapping> 
```

流畅的休眠：

```
public class ArticleMapping : ClassMap<Article>
{
    public ArticleMapping()
    {
        Id(x => x.ArticleId).GeneratedBy.Identity();
        Map(x => x.Description).UniqueKey("Article_Description_Unique");
    }
} 
```

配置：

```
public class ConfigurationFactory
{
    const string Database = "";
    const string Server = "";

    public static Configuration Build()
    {           
        return Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008.ConnectionString(
                c => c.Database(Database).TrustedConnection().Server(Server)))
            .Mappings(m =>
            {
                m.FluentMappings.AddFromAssemblyOf<ArticleMapping>();
                m.HbmMappings.AddFromAssemblyOf<ArticleMapping>();
            })
            //.ExposeConfiguration(c => new SchemaExport(c).Execute(true, true, false))
            .BuildConfiguration();
    }
} 
```

存储库：

```
public class ArticleRepository : Repository<Article>, IArticleRepository
{
    private ISession _session;

    public ArticleRepository(ISession session) : base(session)
    {
        _session = session;
    }

    public List<Article> GetByDescription(string description)
    {
        return _session
            .GetNamedQuery("ArticlesByDescription")
            .SetString("Description", description)
            .List<Article>().ToList();
    }
} 
```**

# python - 在python中生成一个随机乌龟函数

> ID：10104703
> 
> 赞同：0
> 
> 时间：2012-04-11T11:08:26.763
> 
> 标签：python

我正在尝试编写一个名为 randomTurtle() 的函数：

*   生成一个介于 0 和 100 之间（包括 0 和 100）的随机数，它将确定海龟将进行的总移动次数（换句话说，海龟将循环多少次）

然后对于序列的每次重复）：生成 1 到 50 之间的随机步数（包括 1 到 50）。

将乌龟向前移动那个量。

选择一个介于 0 和 1 之间的随机浮点数。如果该值小于 0.5，则将海龟向右转。如果值大于等于0.5，则将乌龟向左转

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:13:10.613

```
from random import random

moves = randint(0, 101)
for i in xrange(moves):
  steps = randint(1, 51)
  moveTurtle(direction, steps)
  spin = random()
  if spin < 0.5:
    direction = turn_right(direction)
  else:
    direction = turn_left(direction)

def turn_left(direction):
  #returns your new direction if you start facing 'direction' and turn left
def turn_right(direction):
  #returns your new direction if you start facing 'direction' and turn right
def moveTurtle(direction, steps)
  #moves turtle in 'direction' by 'steps' 
```

# java - java swing : 在服务器重启或关闭时通知客户端

> ID：10104704
> 
> 赞同：0
> 
> 时间：2012-04-11T11:08:29.190
> 
> 标签：java, client-server

**背景：**

我编写了一个基于 java swing 的客户端服务器应用程序。服务器是一个弹簧容器，有一堆服务。服务器-客户端通过套接字上的序列化对象进行通信。服务器为每个客户端会话生成一个新线程，并在通信期间维护会话映射。

我正在向 JVM 添加一个关闭挂钩

在我的 GUI 中，我有一个“停止服务器”按钮，用于删除用户会话并清理。

**问题：**这一切都很好，但现在我想让客户端知道服务器是否正在重新启动或停止。关于如何解决这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:34:18.207

您可能有一种方法可以从服务器接收回复。让该方法在单独的线程中运行，并在循环中永久等待来自服务器的消息。当服务器停止时，连接关闭，接收方法得到一个异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T20:50:32.040

正如[Alexei](https://stackoverflow.com/users/1206301/alexei-kaigorodov)所说，您可以等待客户端抛出异常，然后自动说这是因为服务器正在关闭或已停止。但是，这可能不是最好的解决方法，除非您确定这将是您的服务器将出现的唯一错误。

我建议使用向所有客户端发送特定消息，告诉客户端服务器正在被故意停止。当客户端收到特定消息时，他们可以关闭他们的套接字。请参阅 Sun 的[Knock Knock 服务器](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)示例。

# json - ie7标准模式和JSON

> ID：10104705
> 
> 赞同：0
> 
> 时间：2012-04-11T11:08:31.877
> 
> 标签：json, internet-explorer-7, internet-explorer-9

我需要保持 ie7 的兼容性，但是 ie7 中的 json 解析器真的很慢。

是否可以让 ie8 或 ie9 使用“IE7 标准模式”并同时使用它们的（ie8 或 ie9）本机 json 解析器？

谢谢

# ios - 在模态页面表上显示模态表单

> ID：10104706
> 
> 赞同：4
> 
> 时间：2012-04-11T11:08:33.360
> 
> 标签：ios, ipad, uikit, modalviewcontroller

在 iPad 上，我使用 modalPresentationStyle UIModalPresentationPageSheet 显示模态视图控制器。此视图控制器使用 modalPresentationStyle UIModalPresentationFormSheet 呈现另一个模态视图控制器。

因此，用户看到背景视图控制器、页面表单和表单表单都在彼此的顶部，因为表单表单比页面表单小。页面表的呈现使背景变暗，因此无法与之交互。但是，表单不会在 iOS 5 上使页面表变暗，因此用户仍然可以与下面的页面表进行交互。但我也希望页面变暗，以便用户在再次与页面交互之前关闭模式表单。

在 iOS 4 上，这是默认行为，但在 iOS 5 上，我找不到实现此目的的方法。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:49:38.570

我相信这是iOS5中的一个错误。我已经做了一些从其他模态显示模态视图控制器的实验，似乎第二个模态永远不会使下面的屏幕变暗。我什至设置了一个测试项目，允许您彼此启动无尽的模态，并且似乎每个其他模态都不会像预期的那样变暗或阻止触摸。

UIWindow 子视图上的快速 NSLog 向我们展示了，虽然适当地添加了阴影，但 dimmingView 没有。我正在研究一种方法来展示我自己的调光视图。当我找到方法时会更新这个答案。

```
Window Subviews: (
    "<UILayoutContainerView: 0xf63e3c0; frame = (0 0; 768 1024); transform = [0, 1, -1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0xf645640>>",
    "<UIDimmingView: 0xf683990; frame = (0 0; 768 1024); opaque = NO; layer = <CALayer: 0xf6836d0>>",
    "<UIDropShadowView: 0xf683130; frame = (64 64; 640 896); transform = [0, 1, -1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0xf6831c0>>",
    "<UIDropShadowView: 0x292110; frame = (74 242; 620 540); transform = [0, 1, -1, 0, 0, 0]; autoresize = LM+RM+TM+BM; layer = <CALayer: 0x292150>>"
) 
```

**解决方案二：** 所以在我的动画外观的最终解决方案中。*此外，我开始考虑我的第一个解决方案，它在技术上可能会激怒 Apple 并导致拒绝，因为 UIDimmingView 是无证的，我们“触摸它”。*我添加了一个 UIView，其背景颜色是我们想要的 alpha 到我的 viewController。然后我在呈现模态时对其进行动画处理，并在调用第二个模态的代表时反转动画。对我来说看起来很不错。也许一些时间和阿尔法调整让它恰到好处，但它的工作和看起来不错。

```
- (void)viewDidLoad 
{
    dim = [[UIView alloc] init];
    [dim setBackgroundColor:[UIColor colorWithWhite:0.0 alpha:0.35]];
    [dim setAlpha:0.0];
    [dim setUserInteractionEnabled:NO];
    [self.view addSubview:dim];
}

- (void)presentModal
{
    [self.view bringSubviewToFront:dim];
    [dim setFrame:self.view.frame];
    [UIView animateWithDuration:0.25 animations:^{
        [dim setAlpha:1.0];
    }];
}

- (void)modalDelegateFinished
{
    [UIView animateWithDuration:0.25 animations:^{
        [dim setAlpha:0.0];
    }];
} 
```

**解决方案一：**

好吧，这行得通，但它不像我想要的那样动画。然而，它确实重用了已经存在的东西，所以这可能是一个加号。

```
- (void)viewDidAppear:(BOOL)animated
{
    // Add a gesture to dismiss the view if tapped outside.
    UIGesture *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tappedOutsideView:)];
    [gesture setNumberOfTapsRequired:1];
    [gesture setCancelsTouchesInView:NO];
    [self.view.window addGestureRecognizer:gesture];

    // Move the dimmingview to just below the dropshadow.
    UIView *dim = [self.view.window.subviews objectAtIndex:1];
    [self.view.window insertSubview:dim atIndex:2];
}

- (void)tappedOutsideView:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded) {
        CGPoint location = [sender locationInView:nil];

        if (![self.view pointInside:[self.view convertPoint:location fromView:self.view.window] withEvent:nil]) {
            // remove the gesture on the window
            [self.view.window removeGestureRecognizer:sender];

            // Move the dimmingview back where it belongs
            UIView *dim = [self.view.window.subviews objectAtIndex:2];
            [self.view.window insertSubview:dim atIndex:1];
        }
    }
} 
```

同样作为故障保护，对于 viewDidDisappear 中的相同内容可能是一个好主意。我的完成按钮调用了 tappedOutside 视图，所以我知道手势和 dimmingView 总是正确的。但如果你不这样做，你可以把它放在 viewDidDisappear 中。

```
- (void)viewDidDisappear:(BOOL)animated
{
    // remove the gesture on the window
    for (UIGestureRecognizer *gesture in self.view.window.gestureRecognizers) {
        [self.view.window removeGestureRecognizer:gesture];
    }

    // Move the dimmingview back where it belongs
    UIView *dim = [self.view.window.subviews objectAtIndex:2];
    [self.view.window insertSubview:dim atIndex:1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T18:44:14.397

它看起来确实像一个iOS错误。在iOS7中仍然存在。

这是我为解决它所做的工作（iOS7 测试）。有趣的是，在模态上呈现模态不会使演示者变暗，但在这些模态之上呈现的第三个模态会。

知道了这一点，我们可以在展示实际的表单模式之前​​展示一个虚拟模型。这涉及最少的代码，并且在技术上符合一般的 iOS 设计模式。因此，未来爆炸的风险应该是最小的。

首先介绍表格：

```
- (void)presentFormSheetModalOverThePageSheetModal
{
    //get the controller I'm trying to present and stick it in a nav controller - as usual
    UIViewController *myModalController = [UIViewController new];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:myModalController];
    navController.modalPresentationStyle = UIModalPresentationFormSheet;

    //create an intermediate controller that will be presented first
    UIViewController *intermediateController = [UIViewController new];
    intermediateController.modalPresentationStyle = UIModalPresentationCurrentContext;
    intermediateController.view.backgroundColor = self.view.backgroundColor;

    //create a snapshot of self (presenting controller)
    UIView *navBar = [self.navigationController.navigationBar snapshotViewAfterScreenUpdates:YES];
    UIView *mainView = [self.view snapshotViewAfterScreenUpdates:YES];
    mainView.center = CGPointMake(mainView.center.x, mainView.center.y + navBar.frame.size.height);
    [intermediateController.view addSubview:navBar];
    [intermediateController.view addSubview:mainView];

    //two step presentation
    [self presentViewController:intermediateController animated:NO completion:^{
        [intermediateController presentViewController:navController animated:YES completion:nil];
    }];
} 
```

然后是时候解雇（从呈现的模式）：

```
- (void)dismissMySelf
{
    //again - two step process to dismiss the this controller and the intermediate controller
    UIViewController *originalPresenter = self.presentingViewController.presentingViewController;
    [self.presentingViewController dismissViewControllerAnimated:YES completion:^{
        [originalPresenter dismissViewControllerAnimated:NO completion:nil];
    }];
} 
```

我不得不调整它，因为快照是静态图像并且不处理旋转，但总的来说它对我来说效果很好。希望能帮助到你。

# c# - 如何将 WPF MS 图表导出为 PNG

> ID：10104707
> 
> 赞同：1
> 
> 时间：2012-04-11T11:08:33.833
> 
> 标签：c#, mschart

我有图表导出的问题。我正在使用 MS Chart (System.Windows.Controls.DataVisualization.Toolkit)

我可以创建图表，但不能导出/保存到图像。我在某处看到方法 chart.SaveImage(...)，但我可以找到它。

有图表定义：

```
<DVC:Chart Name="mcChart" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="2,2,2,2" Height="Auto" Width="Auto" DockPanel.Dock="Left" MinWidth="200" /> 
```

这是我从 C# 调用图表时看到的图片，没有 SaveImage：

![在此处输入图像描述](../Images/6aa3285921685d96d7fad3a1fa511e9f.png)

请问有人可以帮我吗？我错过了一些扩展吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:14:08.773

好像什么都没有内置。

[MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/009bdcdc-f845-4618-ac97-7e3495969bd1/)有一个帖子给出了解决方案。您必须创建一个[`RenderTargetBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)并使用它：

```
RenderTargetBitmap renderBitmap = new RenderTargetBitmap(
    (int)chart1.ActualWidth,
    (int)chart1.ActualHeight,
    96d,
    96d,
    PixelFormats.Pbgra32);

renderBitmap.Render(chart1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:15:14.967

在我看来，对你来说，使用它就足够了

```
EditCopy() 
```

方法将图表的图像保存到剪贴板，然后使用 C# 剪贴板从中获取数据。

# asp.net - 将 C# 事件实现转换为 VB.NET

> ID：10104709
> 
> 赞同：0
> 
> 时间：2012-04-11T11:08:47.170
> 
> 标签：asp.net, .net, vb.net, gridview, c#-to-vb.net

我正在尝试使用一些 C# 代码来扩展 VB.NET 项目中的 GridView 功能。我使用的代码来自[这里](http://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm)。

在 C# 代码中有一个 GroupHeader 的事件定义：

```
/// <summary>
/// Event triggered after a row for group header be inserted
/// </summary>
public event GroupEvent GroupHeader; 
```

这通过上述网站上的示例进行了扩展：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.RegisterGroup("ShipName", true, true);
    helper.GroupHeader += new GroupEvent(helper_GroupHeader);
    helper.ApplyGroupSort();
}

private void helper_GroupHeader(string groupName, object[] values, GridViewRow row)
{
    if (groupName == "ShipRegion")
    {
        row.BackColor = Color.LightGray;
        row.Cells[0].Text = "&nbsp;&nbsp;" + row.Cells[0].Text;
    }
    else if (groupName == "ShipName")
    {
        row.BackColor = Color.FromArgb(236, 236, 236);
        row.Cells[0].Text = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + row.Cells[0].Text;
    }
} 
```

我的问题是，如何将此代码转换为 VB.NET？

我已经像这样转换了事件实现：

```
Private Sub helper_GroupHeader(ByVal groupName As String, ByVal values As Object(), ByVal row As GridViewRow)
    Try
        If groupName = "ITEM#" Then
            row.BackColor = Color.LightBlue
            row.Cells(0).Text = "&nbsp;&nbsp;" & row.Cells(0).Text
        End If
    Catch ex As Exception

    End Try
End Sub 
```

然后我怎样才能用 VB.NET 调用（引发？）这个事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:10:45.933

您正在寻找[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.100%29.aspx)：

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
    Dim helper As New GridViewHelper(Me.GridView1)
    helper.RegisterGroup("ShipRegion", True, True)
    helper.RegisterGroup("ShipName", True, True)
    AddHandler helper.GroupHeader, AddressOf helper_GroupHeader
    helper.ApplyGroupSort()
End Sub 
```

我假设该事件是从`GridViewHelper`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:12:33.717

您可以使用以下方式订阅该事件[`AddHandler`](http://msdn.microsoft.com/en-us/library/6yyk8z93%28VS.90%29.aspx)：

```
AddHandler GroupHeader, AddressOf helper_GroupHeader 
```

并使用以下方法引发事件[`RaiseEvent`](http://msdn.microsoft.com/en-us/library/fwd3bwed%28VS.90%29.aspx)：

```
RaiseEvent GroupHeader() 
```

# c# - 将字符串写入文件正在生成意外内容

> ID：10104722
> 
> 赞同：2
> 
> 时间：2012-04-11T11:09:32.673
> 
> 标签：c#, vb.net, sql-server-2008, .net-4.0, encoding

我对文本编码有一个小问题。

我有两个从 SQL Server 2008 数据库（nvarchar 字段）加载的字符串

从数据库加载它们后，Visual Studio 2010 在监视窗口中显示如下：

`str1 = "Test"`
`str2 = "Test"`

但与`str1 = str2`回报的比较`False`

如果我将这些字符串写入使用 UTF8 编码的文件，则结果如预期：

> 测试
> 测试

如果我将这些字符串写入使用 ANSI（默认）编码的文件，则结果与预期不符**：**

> ?测试
> 测试

将字符串转换为字节：

```
System.Text.Encoding.Default.GetBytes(str1) 'Returns ByteArray {63, 84, 101, 115, 116}
System.Text.Encoding.Default.GetBytes(str2) 'Returns ByteArray {84, 101, 115, 116}

System.Text.Encoding.UTF8.GetBytes(str1) 'Returns ByteArray {239, 187, 191, 84, 101, 115, 116}
System.Text.Encoding.UTF8.GetBytes(str2) 'Returns ByteArray {84, 101, 115, 116} 
```

ANSI 编码的字节 63 或 str1 的 UTF8 编码的字节 239、187、191 来自哪里？

嗯，字节 239、187、191 是 UTF8 的[BOM](http://de.wikipedia.org/wiki/Byte_Order_Mark "物料清单")。这里的问题更可能是：为什么我得到 str1 的 BOM 而不是 str2？

（嗯，这些值是传递给将它们插入数据库的 web 服务的值，初始值由我无法控制的客户端传递给这个 web 服务）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:15:13.233

我很清楚，您确实从数据库中的两个不同记录中读取了两个字符串，对吗？不是以两种不同的方式来自一个记录？

那么，有人在一个记录中存储了一个 BOM。由于 BOM 在打印时是不可见的，因此您不会看到视觉差异。除非您将字符串转换为无法存储 BOM 的编码。
这就是上面发生的事情。

要解决这个问题，您需要清理数据库。读取每条记录，查看它是否以 BOM 开头，如果是，则将内容（不带 BOM）写回。

编辑：我后来才注意到你说这个数据库是由网络服务动态创建的。在这种情况下，解决方案是联系 Web 服务的作者并告诉他们他们的例程中有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:19:19.830

您自己回答：“这些值是传递给将它们插入数据库的 Web 服务的值，初始值由我无法控制的客户端传递给该 Web 服务”

BOM 被插入到那里。检查数据是如何插入的，以及为什么在 str1 中插入了 BOM，而在 str2 中没有插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:20:51.940

在将数据导入 SQL 之前，我已经看到过这种情况。实际上，导入是从 CSV 文件批量导入。这导致第一行第一列中的数据包含 BOM，因此它使数据无效。

解决方案是清理数据库，但还要确保在插入之前清理来自文件的所有新导入。

# c# - 在客户端添加 Gridview 新行

> ID：10104724
> 
> 赞同：2
> 
> 时间：2012-04-11T11:09:41.180
> 
> 标签：c#, jquery, asp.net, ajax, gridview

我在父 GridView(gvTopic) 中有一个文本框和按钮。如果单击按钮，我想在 Child GridView(gvComment) 的客户端显示新添加的评论以及将数据存储在数据库中（可能是后台处理，类似于本网站的评论功能）。

```
<asp:GridView ID="gvTopic" runat="server">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:Button ID="Button2" runat="server" Text="Button" />
        <asp:GridView ID="gvComment" runat="server">
            <%--Comments--%>
        </asp:GridView>
    </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

现在，我在按钮单击上绑定子 GridView (gvComment)，它首先将数据保存在数据库中，然后绑定它，所以要显示新添加的评论。

或者有什么替代解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:21:13.793

我不认为 GridView 提供客户端行添加，其他一些网格，如 Telerik 的 RadGrid 提供此功能。

但是，您可以结合使用 javascript 和隐藏字段来实现此目的。

使用 javascript 动态创建现有 TR 节点的副本，在 TABLE 的最后附加节点，替换内部节点 TD 值并将这些值以 JSON 格式存储到隐藏字段中。

# mysql - 将 MySQL 数据库转储到另一台服务器上的新数据库中

> ID：10104725
> 
> 赞同：1
> 
> 时间：2012-04-11T11:09:41.540
> 
> 标签：mysql, ssh, mysqldump, mysqlimport

我想就以下内容获得第二意见。

我想要实现的是将 mysql 数据库转储到另一台服务器上的新数据库中，我还想通过对原始服务器的有限写入来做到这一点。

计划是转储旧的 mysql 数据库，并将输出导入第二台服务器上的新数据库。

这就是我所拥有的，我已经这样做了，因此理论上原始服务器只会进行读取，而新服务器将进行写入。

```
mysqldump -uAUSER -p'APASS' dbname | ssh user@newhost mysql -uAUser -p'APASS' newdbname 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:02:32.073

它可能有效，但有风险。

我建议您将 mysqldump 放入一个文件，使用 scp 复制该文件，然后`mysql < file`在目标服务器上。如果有任何事情（例如通过网络传输）失败，这将为您提供几个重新启动点。

它还为您提供数据库的文件备份，以后可能会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T15:19:44.067

您可以使用 mysqldump 命令将数据从实时数据库转储到从数据库

mysqldump -u [用户名] -h [主机名] --password=[密码] [live_db_name] | mysql -u [user_name] -h [hostname] --password=[password] [slave_db_name]

# c# - 将 linq 结果集转换为数据表

> ID：10104726
> 
> 赞同：0
> 
> 时间：2012-04-11T11:09:48.403
> 
> 标签：c#, .net, linq, linq-to-sql, ado.net

```
var query = (from row in playerSpotAndValue.AsEnumerable()
             where !row.Field<string>("RunningTotal").Contains("/")
             group row by row.Field<UInt16>("SpotID") into spotID
             orderby spotID.Key
             select new
             {
                 SpotID = spotID.Key,
                 HandTotal= spotID.Max(p => Convert.ToUInt16(p.Field<string>("RunningTotal"))),
                 RowsCount = spotID.Count()
             }); 
```

如何在此查询中使用 CopyToDataTable 以便我可以这样查询

```
query.CopyToDataTable().Rows[0]["HandTotal"].ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:22:47.243

是的，您需要使用以下[扩展方法](http://msdn.microsoft.com/en-us/library/bb396189.aspx)：

```
public static DataTable CopyToDataTable<T>(this IEnumerable<T> source) where T : DataRow 
```

* * *

但首先你需要有`IEnumerable<DataRow>`但不是匿名类型。

你的表应该有你想要填充的列，然后使用`DateTable.NewRow()`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:36:59.790

假设（最初在您的问题中引用）是您要从查询`dtDealerTotal`中查找行的表，并且您希望将结果添加为：`SpotID``HandTotal``DataColumn`

```
DataTable result = dtDealerTotal.Clone();
result.Columns.Add(new DataColumn("HandTotal", typeof(UInt16)));
var dealers = dtDealerTotal.AsEnumerable();
foreach (var x in query)
{
    foreach (var d in dealers.Where(dr => dr.Field<UInt16>("SpotID") == x.SpotID))
    {
        var fields = d.ItemArray;
        fields.Concat(new Object[] { x.HandTotal });
        result.Rows.Add(fields);
    }
} 
```

**注意**：您只能`CopyToDataTable`在现有 DataRows 上使用，而不能在匿名类型上使用。因此，您要么需要先选择这些行以将它们复制到新行中，`DataTable`要么（当架构与此处不同，因为您要添加时`HandTotal`）您需要`DataTable`手动创建一个新行，这就是我所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:29:14.617

这是您可以实现的方式，您想要的。

您的 LINQ 查询，这是一个返回 DataTable 的函数：

```
public static DataTable ToDataTable(DataContext ctx, object query) // ctx is your data context, & query is your linq query 
{
    IDbCommand cmd;

    try
    {
        cmd = ctx.GetCommand(query as IQueryable);
    }
    catch
    {
        throw new Exception("Could not connect database");
    }

    SqlDataAdapter adapter = new SqlDataAdapter();
    adapter.SelectCommand = (SqlCommand)cmd;
    DataTable dt = new DataTable();

    try
    {
        cmd.Connection.Open();

    }
    catch
    {
        cmd.Connection.Close();
        throw new Exception("Could not connect database");
    }

    try
    {
        adapter.Fill(dt);
        cmd.Connection.Close();
    }
    catch(Exception ex)
    {
        cmd.Connection.Close();
        throw new Exception("Query Parsing Error");
    }

    return dt;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:11:09.697

```
query.First().HandTotal.ToString() 
```

这样我就可以在第一行找到手总数，因此我不需要将我的 linq 查询结果集放在数据表中。我要感谢kmp先生。

# jquery - jQuery UI：Safari 中的 Droppable（'drop' 事件，容差：触摸）错误（mac）

> ID：10104732
> 
> 赞同：4
> 
> 时间：2012-04-11T11:10:00.463
> 
> 标签：jquery, jquery-ui, safari, drag-and-drop, jquery-ui-droppable

我无法解决以下问题：

> 以下代码适用于所有**mac**浏览器以及 windows，除了它 **部分适用于 macs safari(5.1.5)**。
> 
> **注意：**它适用于 windows safari(5.1.5)。

这是**基本结构**：

![在此处输入图像描述](../Images/6aa63328e6e530d0bec4dc14d904e9fc.png)

```
$(".div2" ).droppable({
        accept: '.div1',
        tolerance: 'touch',
        drop: function(){ 
                        alert('dropped');
        }   
}); 
```

所以，基本上当*div1*接触到*div2*时，应该触发 drop 事件。

![在此处输入图像描述](../Images/4f87649aeadf6c58e0892709028a63e6.png)

但上述情况并不会触发 drop 事件。

在 macs safari 中触发 drop 事件的唯一情况（如下所示）是当可拖动的 div *div1*完全通过可放置的 div *div2*时。我只是不知道为什么？

![在此处输入图像描述](../Images/12d5a34637bb5d3bbb60ddba1ae49439.png)

> **使用的版本：**
> 
> ```
> jQuery: 1.7.2
> jQuery UI: 1.8.18
> Safari(mac): 5.1.5 
> ```
> 
> **更新：**
> 
> 我尝试了其他宽容的选择。' *touch* ' 和 ' *intersect* ' 都不能按预期工作。但是'*指针*'工作得很好。
> 
> 有没有其他方法可以实现“tolerance:touch”的功能？我正在考虑检测 2 个 div 之间的碰撞，然后应用相应的逻辑。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:10:18.543

尝试添加`position: absolute !important;`到元素。这就是我找到的解决这个问题的方法。否则，您可以尝试为可拖动/可放置 div 创建父 div。

# google-app-engine - 部署在 App 引擎中的 GWT 应用程序无法使用 Chome 和 IE 正确呈现，但在 Firefox 中可以。

> ID：10104737
> 
> 赞同：0
> 
> 时间：2012-04-11T11:10:12.107
> 
> 标签：google-app-engine, gwt

我有一个已在 App 引擎中部署的 GWT Web 应用程序，但是它可以在 Firefox 中正确呈现，而在 Chrome 和 IE 中却没有。我相信这是一个 CSS 问题。有人和我有过同样的经历吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:38:21.420

我所做的是再次重新部署应用程序。它现在有效。似乎部署并不总是能正确获取数据。

# extjs - 使用嵌套 JSON 填充关联模型

> ID：10104739
> 
> 赞同：1
> 
> 时间：2012-04-11T11:10:19.320
> 
> 标签：extjs, model, extjs4, store

我有以下数据：

```
var data = [
    {
        id: 1,
        name: 'Ed Spencer',
        phoneNumber: '555 1234',
        children: [{
          id: 11,
          name: 'Baz'
        }]
    },
    {
        id: 2,
        name: 'Abe Elias',
        phoneNumber: '666 1234',
        children: [{
          id: 21,
          name: 'Foo'
        },{
          id: 21,
          name: 'Bar'
        }]
    }
]; 
```

有没有办法将它加载到某些模型和商店中，像这样？

```
Ext.define('Child', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',    type: 'int'},
        {name: 'user_id',    type: 'int'},
        {name: 'name',  type: 'string'}
    ],

    belongsTo: 'User'
});

Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',    type: 'int'},
        {name: 'name',  type: 'string'},
        {name: 'phone', type: 'string', mapping: 'phoneNumber'}
    ],

    hasMany: {model: 'Child', name: 'children'}
});

var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    model: 'User',
    data : data
}); 
```

到目前为止，我只找到了一种方法，即遍历商店：

```
store.each(function(r){
  r.childrens().loadData(r.data.children);
}); 
```

但这似乎不太好。

我只想加载一次数据。我真的不想在每个孩子中指定外键，因为我的数据已经结构化。

有没有人做过类似的事情？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:31:50.550

想我已经修好了。显然，您需要在商店中使用阅读器，即使它只是一个记忆阅读器，如下所示：

```
var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    model: 'User',
    data : data,
    proxy: {
        type: 'memory',
        reader: {
            type: 'json'
        }
    }
}); 
```

然后它将填充所有模型，生成其关联而不需要外键。

我假设没有代理，数据以不同的方式加载，这不会填充我的模型。

# java - 对于在 Java 1.6 中创建的所有插件，如何将 Java 编译级别从 Java 1.6 更改为 Java 1.7

> ID：10104747
> 
> 赞同：0
> 
> 时间：2012-04-11T11:11:01.373
> 
> 标签：java, eclipse, plugins

我之前有一组在 Java 1.6 中创建的插件，现在我想将 Java 合规级别更改为 Java 1.7，因为我想迁移到 Java 7。有什么方法可以一次为所有插件更改此设置。目前我看到我需要为所有插件一一更改它。

问候，

阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:27:57.620

我的第一个问题是，您*真的*需要立即让所有项目都使用 Java 7 合规性吗？更合理的方法可能是按需迁移。如果您不打算将 Java-7 特定代码放入每个项目中，我不明白为什么他们*都*需要更改合规级别。

如果出于某种原因您真的想这样做，那么没有 UI 可以做到。您可以做的是首先设置一个项目，这将在该项目的`.settings`文件夹中创建或修改一个文件；然后您可以将该文件复制到其他项目。您可能必须**刷新**其他项目或使用**Project > Clean**让 Eclipse 接受更改。

[在这个非常古老的功能请求](https://bugs.eclipse.org/bugs/show_bug.cgi?id=194414)中讨论（但从未实现）您真正想要的（我认为）。令人失望的是，没有人加紧实施它，因为它会非常强大；但是，作为开源软件的消费者，如果没有实现所需的功能，我们都应该受到责备。

# java - 在基于 MVC 的 jsp/servlets 应用程序中设置连接池？

> ID：10104749
> 
> 赞同：0
> 
> 时间：2012-04-11T11:11:04.330
> 
> 标签：java, model-view-controller, jakarta-ee, connection-pooling, java-7

我想在我的带有 MySQL 和 JDBC 的 java web 应用程序中使用连接池，我在[Apache Tomcat 6.0 (6.0.35) - JNDI Datasource HOW-TO](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)找到了一个非常值得学习的资源，但是这个例子使用 JSTL 代码来解释如何检索来自池的连接。我想以类似的方式工作，但从头开始使用由 Bean、DAO、Servlet 和 JSP 组成的 MVC 架构。我从 BalusC 的一个非常好的[DAO 教程](http://balusc.blogspot.in/2008/07/dao-tutorial-data-layer.html)中得到了我想要的一切，但是我在教程的最后一部分说[连接池怎么样？](http://balusc.blogspot.in/2008/07/dao-tutorial-data-layer.html#HowAboutConnectionPooling). 任何人都可以详细说明这个连接池主题和`close()`方法吗？

**编辑：**
其实我也应该早点添加这个东西：
因为我上面链接的教程出现在 JDK7 之前，它现在有`Connection`自动关闭的 try-wth-resource 代码，那么我们如何维护一个连接池并关闭一个连接在这里使用与教程中相同的 DAO 代码*（或进行少量更改） ？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:23:13.297

如果您的应用程序需要由多个用户使用，则一个`connection`可以由一个用户持有，`connection pool`因此其中几个用户将重用现有的`connection`而不是创建新的`connection`，这将消耗时间。关于`close()`方法：连接池保持活动状态，如果每次访问后不关闭连接，连接会堆积，如果数量增加，连接池会堵塞，不再接受其他连接！

```
public class MyDao {

    private InitialContext context;
    private DataSource datasource;

    public MyDao() {

        try {

            Class.forName("com.mysql.jdbc.Driver");
            Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "username", "password");
            context = new InitialContext();
            datasource = (DataSource) context.lookup("datasource name");
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage());
        }

    }
 public MyBean getMyBean() throws SQLException {
        Connection connection = null;
        PreparedStatement statement = null;
        ResultSet res = null;

        String sql = "some query";
        try {
            connection = datasource.getConnection();//pool connection
            statement = connection.prepareStatement(sql);
            res = statement.executeQuery();
            while (res.next()) {
               //return true

            }
        } catch (SQLException ex) {
            ex.printStackTrace();
        }

     finally {
            if (rs!= null) try { rs.close(); } catch (SQLException logOrIgnore) {}//result set if any
            if (stm!= null) try { stm.close(); } catch (SQLException logOrIgnore) {}//clase statement if any
            if (connection != null) try { connection.close(); } catch (SQLException logOrIgnore) {}//close connection
            }
            }

}//close MyDao 
```

# android - 安卓上的 sun.security.x509.CertAndKeyGen

> ID：10104750
> 
> 赞同：2
> 
> 时间：2012-04-11T11:11:17.810
> 
> 标签：android, security

在一个应用程序中，我尝试生成一个密钥库。遗憾的是，出于与现有桌面客户端的兼容性原因，我使用 x509 证书。

在密钥库生成期间，应用程序崩溃并出现以下错误：

```
Caused by: java.lang.NoClassDefFoundError: sun.security.x509.CertAndKeyGen
E/AndroidRuntime(  338):    at ppa.utils.ssl.MiscSSLTools.createKeystore(MiscSSLTools.java:52)
E/AndroidRuntime(  338):    at it.sec.RegisterActiviy.continueReg(RegisterActiviy.java:129)
E/AndroidRuntime(  338):    at it.sec.RegisterActiviy.btnFinishRegClicked(RegisterActiviy.java:108)
E/AndroidRuntime(  338):    ... 28 more 
```

我认为在 Java 的 Android 实现中缺少此类，因此无法找到。有人知道我怎么能工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:37:07.820

提到的类 CertAndKeyGen 似乎只包含一些可以在您的应用程序中轻松实现的实用功能。

只需看一下源代码：

[http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/security/x509/CertAndKeyGen.java.html](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/security/x509/CertAndKeyGen.java.html)

# java - 用于跨平台 3D 测量应用程序的 Java Applet 或 Unity3D

> ID：10104753
> 
> 赞同：0
> 
> 时间：2012-04-11T11:11:46.903
> 
> 标签：java, ios, applet, unity3d

**你认为 Java Applet 或 Unity3D 应用程序是制作跨浏览器 3d 网络应用程序的最佳选择吗？**

我打算制作一个显示 3d 环境的 Web 应用程序，可以通过拖动进行导航（根据平台使用手指或鼠标）。该网络应用程序将呈现开发站点的 3D 环境，包括轮廓、水管位置、建筑物等。

该应用程序必须在 Windows 桌面、Android、iOS 和 Windows Phone 上运行。所以这就是为什么我倾向于使用网络应用程序而不是跨平台智能手机库（如 Mosync 或 Marmalade）。3d 环境将是可导航的（通过拖动）并包含简单（不详细）的 3d 对象，如建筑物、山脉、管道等。

我知道的一件事是 WebGL 已经过时了，因为它不能在 IE 上运行并且对智能手机的支持有限（我完全无视 WebGL 是否正确？）。

*   **未来的智能手机浏览器会继续支持 Java 小程序吗？**

*   **我可以在 Unity3D 中编写一个应用程序/游戏并简单地编译它以在 Windows Windows、Mac、Xbox 360、PlayStation 3、Wii、iPad、iPhone 和 Android 上运行，这真的是真的吗？**

*   **您会建议 Unity3D 应用程序路径还是 Unity3D Web Player 路径？**

*   *关于 Unity3D，我不确定一件事：所有 Unity3D 功能都适用于 iOS 和 Android 吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:18:15.480

AFAIK，我会选择 Unity3d，因为它具有所有直观的功能，可以制作真正跨平台的基于 Web 的 3d 应用程序。在这种情况下，请选择 Unity3D 网络播放器路径。此外，您还可以将 unity3d 应用程序转换为 Flash，这将支持所有主流浏览器，而不像 WebGL。

# javascript - Jquery中的字符串验证

> ID：10104755
> 
> 赞同：0
> 
> 时间：2012-04-11T11:11:49.320
> 
> 标签：javascript, jquery, regex

我想验证 JQuery 位中的文本框我想为此使用正则表达式。由于我是 JQuery 的新手，有人可以建议我如何在 JQuery 中使用正则表达式来验证文本字符串（例如，正则表达式类似于`^(?:[\\w\\s-])++$)?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:27:55.417

Javascript 正则表达式功能不需要 JQuery，无论您是否加载了 JQuery，都可以使用它。

这里有两个很棒的 javascript 正则表达式资源：

[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

要将其放入 JQuery 中：

```
if (/your regex/.test($("#textbox").val()))
{
    // Valid
}
else
{
    // Invalid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:15:03.907

[http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/](http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:21:35.943

正则表达式不是 jQuery 框架的一部分，它们只是 javascript 的一部分。要制作它们，请调用 RegExp 构造函数，并将您的模式作为字符串传递，或使用速记符号：

```
var newExp = new RegExp('^[0-9]{3,5}$');
//is the same as
var newExp = /^[0-9]{3,5}$/; 
```

`\w`如果您的意思是or ，则无需在示例中转义两次反斜杠`\s`。您可能会考虑阅读一些关于正则表达式的 tuts，尽管您的模式是，呃，有缺陷的......

# c# - 在 word 自动化中设置列宽会引发异常

> ID：10104759
> 
> 赞同：1
> 
> 时间：2012-04-11T11:11:55.667
> 
> 标签：c#, c#-4.0, ms-word, vsto, word-automation

我正在使用 Word 自动化构建表格，我需要一列非常窄但每次使用 Microsoft.Office.Interop.Word.Column.SetWidth 方法设置宽度时，它都会抛出“值超出范围异常”如果我将其设置为更大的值，它会起作用，但尽可能小是至关重要的

有人建议将间距和填充设置为零，我这样做了，但它仍然抛出异常

```
 table.LeftPadding = 0;
      table.RightPadding = 0;
      table.Spacing = 0;
      table.Columns[4].SetWidth(9f, WdRulerStyle.wdAdjustNone); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:51:13.873

`SetWidth`以点为单位取参数。试试这个

```
table.Columns[4].SetWidth(
    Globals.ThisAddIn.Application.MillimetersToPoints(9f), 
    WdRulerStyle.wdAdjustNone); 
```

或使用这个

```
table.Columns[4].PreferredWidth = 9f; 
```

# php - get_bookmarks() 对象不返回 link_category

> ID：10104761
> 
> 赞同：0
> 
> 时间：2012-04-11T11:11:59.253
> 
> 标签：php, wordpress

我正在尝试从内置的 Wordpress 链接列表（或书签，如果你愿意）中获取所有链接类别。

为此，我只是将所有链接存储在一个变量中，如下所示：

```
<?php
    $lists = get_bookmarks();
    foreach($lists as $list) {
        $cats[] = $list->link_category;
    }
?> 
```

令我惊讶的是，甚至 var_dump'ing $cats 都给了我“String(0)”，所以我 var_dump'ed out $lists 而不是，它给了我这个：

```
array(8) { [0]=> object(stdClass)#5126 (13) { ["link_id"]=> string(1) "1" ["link_url"]=> string(27) "http://codex.wordpress.org/" ["link_name"]=> string(13) "Documentation" ["link_image"]=> string(0) "" ["link_target"]=> string(0) "" ["link_description"]=> string(0) "" ["link_visible"]=> string(1) "Y" ["link_owner"]=> string(1) "1" ["link_rating"]=> string(1) "0" ["link_updated"]=> string(19) "0000-00-00 00:00:00" ["link_rel"]=> string(0) "" ["link_notes"]=> string(0) "" ["link_rss"]=> string(0) "" } 
```

现在，codex.wordpress.org 是 wordpress 附带的默认链接，它位于名为“Linklist”的类别中，正如您所见，该对象包含有关该链接的所有内容，除了类别名称。

根据法典，这个对象应该包含一个名为“link_category”的字段，所以我在这里感到困惑。

我错过了什么吗？功能坏了吗？

问候

忍者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:25:48.657

在Wordpress 3.3.1 get_bookmarks() 函数的[源代码中，链接类别是这样获取的：](http://core.trac.wordpress.org/browser/tags/3.3.1/wp-includes/bookmark.php)

```
$_bookmark->link_category = array_unique( wp_get_object_terms($_bookmark->link_id, 'link_category', array('fields' => 'ids')) ); 
```

您使用的是哪个版本的 WordPress？如果它没有得到**link_category**，您可以按照`get_bookmarks()`函数的方式手动获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:36:16.557

试试[get_terms](http://codex.wordpress.org/Function_Reference/get_terms)函数

```
$terms = get_terms('link_category'); 
```

# scala - 如何在 Groovy 脚本引擎中传递 2 个字节的字符串而不会出现乱码？

> ID：10104763
> 
> 赞同：0
> 
> 时间：2012-04-11T11:12:12.513
> 
> 标签：scala, groovy, character-encoding, path, encode

嗨，我正在将路径字符串从 Scala 传递给 Groovy 脚本，如下所示，但是当字符串包含 2 个字节字符时，格式会出现乱码。你如何正确地将字符串传递给 groovy 脚本？

```
var gse = new GroovyScriptEngine()
var scriptClass = gse.loadScriptByName("script.groovy") 
var i = scriptClass.newInstance().asInstanceOf[GroovyObject]
i.setProperty("DIR_HERE", new File(".").getAbsolutePath())
 // when the path contains 2 bytes code like "c:/あああああ/bleh", 
 // the passed string will be garbled and will be like "c:/????????????/bleh" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:52:29.017

如果我写成`script.groovy`：

```
println DIR_HERE 
```

然后是一个新文件`run.groovy`：

```
def gse = new GroovyScriptEngine( '.' )
def scriptClass = gse.loadScriptByName("script.groovy") 
def i = scriptClass.newInstance()
i.setProperty("DIR_HERE", 'c:/あああああ/bleh' )
i.run() 
```

然后当我运行时：

```
groovy run.groovy 
```

从命令行，它打印：

```
c:/あああああ/bleh 
```

# android - 在android中读取.mat文件

> ID：10104766
> 
> 赞同：0
> 
> 时间：2012-04-11T11:12:24.113
> 
> 标签：android, matlab, opengl-es

是否可以在 android 中读取 .mat 文件？我应该如何将 .mat 文件转换为 java 可读格式以在 android 中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:12:42.160

理想情况下，您不想使用 .mat 文件。您可以使用 ASCII 格式保存数据：

```
save output.txt -ascii 
```

但我不确定当你读回这些数据时，是否有一种简单的方法可以计算出哪个变量是哪个变量。我假设变量是按字母顺序保存的，但你仍然需要知道它们的大小才能解析它们。或者，如果这适用于您的应用程序，您可以将每个变量保存在不同的文件中。

[这里](http://www.mathworks.co.uk/support/solutions/en/data/1-9TSRSY/index.html?product=ML&solution=1-9TSRSY)有一些关于在 java 中使用 .mat 文件的信息。如果您有勇气，可以尝试查看规范并在 java 中处理二进制文件。

# iphone - Twitter 访问令牌错误 - 授权“”使用您的帐户？

> ID：10104767
> 
> 赞同：0
> 
> 时间：2012-04-11T11:12:27.437
> 
> 标签：iphone, objective-c, twitter, twitter-oauth

我正在尝试在 Twitter 上创建一个应用程序。当我登录时，它给了我以下错误 -

错误 -**授权“”使用您的帐户**？

我在访问请求令牌中收到以下错误（https://api.twitter.com/oauth/request_token）-

错误 -**无法验证 oauth 签名和令牌**。

我正在做的是将用户重定向到：

**https://twitter.com/oauth/authenticate?oauth_token={$token}**

请帮忙怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:58:54.740

确保您在 twitter 上创建了没有回调 url 的应用程序，并在设置下创建了“读取、写入和访问直接消息”。

跟着这些步骤 -

1) 在 twitter 上创建一个没有回调 url 的新应用
2) 创建应用后转到设置并将访问级别设置为第三个单选按钮 (读取、写入和访问直接消息)
3) 下载此项目 - [https://github .com/mattgemmell/MGTwitterEngine](https://github.com/mattgemmell/MGTwitterEngine)并签入此项目。
4）如果第 3 步有效，则尝试将其集成到您的项目中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:22:15.883

```
#define TwitterConsumerKey    @"Your app Consumer key"

#define TwitterSecretKey      @"Your app secret key"

#define TwitterCallbackUrl    @"Your app call back url which is inserted into the twitter app while created app" 
```

应用它可能会解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:30:52.783

这些问题/错误是生成的......请检查

1）您的消费者密钥和消费者密钥

2）检查您的设备时区（时间戳）表示正确的时间

```
Click on the clock and then "Date & Time preferences" -Check "Set date and time automatically with: Apple Americas/U.S. (time.apple.com)" 
```

3）在 SA_OAuthTwitterEngine.m 文件中替换它

```
self.requestTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/request_token"];
self.accessTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/access_token"];
self.authorizeURL = [NSURL URLWithString: @"https://twitter.com/oauth/authorize"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:15:45.183

```
#define kOAuthConsumerKey @"place your account consumer key"
#define kOAuthConsumerSecret @"place your authorized consumer secret key" 
```

当我们使用您的普通帐户以 twitter 开发人员身份登录 twitter 时，这将得到。在 twitter 帐户中创建这些密钥，秘密密钥并在您的应用程序中工作。

# php - 我如何在数组中转换 $_POST？

> ID：10104775
> 
> 赞同：3
> 
> 时间：2012-04-11T11:12:59.400
> 
> 标签：php, post

通过使用

```
print_r($_POST); 
```

我正在获取类似这样的数据

```
Array ( [selected_friends] => {"0":"699712136","1":"1622040878","2":"100002980112267"}) 
```

我如何将它用作数组并将其放入数组变量中

```
$a[0] = 699712136;
$a[1] = 1622040878; 
```

等等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T11:16:25.277

你可以做

```
$a = json_decode($_POST['selected_friends'], true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:15:57.430

它看起来像 JSON。试试 json_decode()

# actionscript-3 - flex 自定义组件中的日期时间格式更改

> ID：10104779
> 
> 赞同：0
> 
> 时间：2012-04-11T11:13:03.913
> 
> 标签：actionscript-3, apache-flex, custom-component

我使用自定义组件作为日期时间，它是 12 小时和上午/下午格式，现在我要在数字步进器中显示 24 小时格式，并且应该禁用上午/下午。有什么想法？？？

这是我的代码

```
<mx:Script>
    <![CDATA[

        [Bindable] private var _selectedDate:Date = new Date();
        [Bindable] [Inspectable(defaultValue='5', category="Other", enumeration="1,5,10,15,30")] 

        public var minuteIncrement:int = 1;

        public function get selectedDate():Date
        {
            var rtnVal:Date = null; 
            if(this.date.text != "")
            {
                this.validateNow();
                rtnVal = this._selectedDate;
            }
            return rtnVal;
        }
        private function getVisible(flg:Boolean):void
        {
            if(!flg)
            {
                //Invisible
                hours.visible = false;
                lbl.visible = false;
                minutes.visible = false;
                am.visible = false;
                pm.visible = false;
            }
            else
            {
                //Visible
                hours.visible = true;
                lbl.visible = true;
                minutes.visible = true;
                am.visible = true;
                pm.visible = true;
            }
        }
        public function clearDate():void
        {
            selectedDate = new Date();
            date.selectedDate = null;
            getVisible(false);
        }

        [Bindable]
        public function set selectedDate(value:Date):void
        {
            if(value != null)
            {
                this._selectedDate = value
                this.date.selectedDate = this._selectedDate
                if(value.getHours() >= 12)
                {
                    this.ampm.selectedValue = 2;
                }
                else
                {
                    this.ampm.selectedValue = 1;
                }

                if(value.getHours() < 13 )
                    this.hours.value = value.getHours()
                else
                    this.hours.value = value.getHours() - 12

                if(value.getHours() == 0)
                    this.hours.value = 12;
                this.minutes.value = value.getMinutes()
                this.validateNow();
                getVisible(true);
            }
            else
            {
                clearDate();
            }
        }

        override public function validateProperties():void
        {
            super.validateProperties();

        }

        public function handleChange():void
        {
            getVisible(true);
            if(this.date.text != "")
            {
                var militaryHours:int = hours.value;
                if(ampm.selectedValue == 2 && hours.value != 12)
                    militaryHours = hours.value+12; 
                else if(ampm.selectedValue == 1 && hours.value == 12)
                    militaryHours = 0;
                var selDate:Date = this.date.selectedDate;
                var date:Date = new Date(
                    selDate.getFullYear(),
                    selDate.getMonth(),
                    selDate.getDate(),
                    militaryHours,
                    minutes.value)
                this.selectedDate = date;

                this.invalidateProperties();
                this.validateNow();
                this.dispatchEvent(new Event("change"));
            }
        }
    ]]>
</mx:Script>
<mx:DateField id="date" selectedDate="{new Date()}" change="handleChange()" formatString="DD/MM/YYYY"/>
<mx:Spacer width="10"/>
<mx:NumericStepper id="hours" minimum="1" maximum="12" stepSize="1" width="40" change="handleChange()" valueCommit="handleChange()" textAlign="center"/>
<mx:Label id="lbl" text=":" textAlign="center"/>
<mx:NumericStepper id="minutes" minimum="0"  maximum="59" stepSize="{minuteIncrement}" change="handleChange()" valueCommit="handleChange()" textAlign="center" width="40"/>
<mx:Spacer width="10"/>
<mx:RadioButtonGroup id="ampm" selectedValue="1" change="this.handleChange()"/>
<mx:RadioButton id="am" value="1" label="AM" group="{ampm}"/>
<mx:RadioButton id="pm" value="2" label="PM" group="{ampm}"/> 
```

提前谢谢xxxxxxx！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:47:15.740

向组件添加新属性以控制格式的更改。有很多方法可以做到这一点。

我可能会添加一个名为“Format”的公共变量，它接受一个字符串值。我会将这些字符串值存储在常量中，如下所示：

```
public var const TWENTY_FOUR_HOUR_FORMAT : String = "twentyFourHourFormat";
public var const TWELVE_HOUR_FORMAT : String = "twelveourFormat"; 
```

然后你的格式属性：

```
private var _Format : String = TWELVE_HOUR_FORMAT;
protected function get format():String{
 return _Format;
}
protected function set format(value:String){
 if(format == TWENTY_FOUR_HOUR_FORMAT){
   hours.max = 24;
   am.visible = false;
   pm.visible = false;
 } else {
   hours.max = 12;
   am.visible = true
   pm.visible = true;
} 
```

对于更高级的东西，您可以在 set 方法中使用组件生命周期、使属性和 displayList 无效。然后可能在 commitProperties() 中设置“hours.max”值，在 updateDisplayList() 中设置 am.visible 和 pm.visible 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:15:26.473

```
public function handleChange():void
        {
            getVisible(true);
            if(this.date.text != "")
            {
                var militaryHours:int = hours.value;
                if(ampm.selectedValue == 2 && hours.value != 12)
                    militaryHours = hours.value+12; 
                else if(ampm.selectedValue == 1 && hours.value == 12)
                    militaryHours = 0;
                var selDate:Date = this.date.selectedDate;
                var date:Date = new Date(
                    selDate.getFullYear(),
                    selDate.getMonth(),
                    selDate.getDate(),
                    militaryHours,
                    minutes.value)
                this.selectedDate = date;

                hours.value = date.hours;
                minutes.value = date.minutes;

                this.invalidateProperties();
                this.validateNow();
                this.dispatchEvent(new Event("change"));
            }
           } 
```

当您从日期字段中选择任何日期时，您将获得时间 00:00:00...还...

类似下面的代码......

```
this.selectedDate = date;

                var date1:Date = new Date();

                hours.value = date1.hours;
                minutes.value = date1.minutes;

                this.invalidateProperties();
                this.validateNow();
                this.dispatchEvent(new Event("change")); 
```

# android - Android：屏幕方向更改时不调用 onRetainNonConfigurationInstance

> ID：10104781
> 
> 赞同：1
> 
> 时间：2012-04-11T11:13:10.750
> 
> 标签：android, android-layout, screen-orientation, android-sdk-2.3, nexus-s

我已经在我的一个 Activity 上实现了 onRetainNonConfigurationInstance() 来处理 android 屏幕方向。这是代码：

```
 @Override
  public Object onRetainNonConfigurationInstance() {
    Log.d("[DEBUG]", "onRetainNonConfigurationInstance : "
        + this.getClass().getName());
    MyState state = new MyState();

    return state;
  } 
```

然后我在安卓设备上安装了该应用程序。这是配置：

```
Device : Samsung Nexus S
Android version : 4.0.4
Kernel version : 3.0.8-g6656123android-build@vpbs1 #1 
```

当我通过更改屏幕方向在手机上调试应用程序时，不会调用我的**onRetainNonConfigurationInstance()**方法。

更奇怪的是，我在我的 Activity的**onCreate()**方法中添加了一个日志行。根据文档，Android 应该在屏幕方向发生时重新创建活动。所以我有以下内容：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylist);
    Log.d(Constants.LOG_TAG, "Oncreate : " + this.getClass().getName());
} 
```

但是在这里，当我在设备上更改屏幕方向时，**不会调用****onCreate()**方法。

 **你有没有遇到过这个问题？

在文档中，他们还说这种方法已被弃用，而我应该使用与 Fragments 等相关的东西。这可能是我没有调用该方法的原因吗？

实际上，我正在**为 2.3.3 到 3.0**设备实施，但我的**测试设备是 4.0.4**：这可能是问题吗？我认为 Android 操作系统版本之间存在某种向后兼容性。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:03:29.183

您可能在清单文件中为活动`android:configChanges`声明了一个 for ，它[表示](http://developer.android.com/guide/topics/manifest/activity-element.html#config)您将自己处理方向更改，因此不会调用该方法。`orientation``onCreate`**

# javascript - 使用 jQuery/JavaScript 替换字符串的一部分

> ID：10104783
> 
> 赞同：0
> 
> 时间：2012-04-11T11:13:22.123
> 
> 标签：javascript, jquery

我有一个变量如下

```
var a = "Hi this is test. <img src='http://www.test.com/img1.jpg'> Test ends here"; 
```

我想将`src`图片标签替换为其他图片网址让我们说`http://www.test2.com/img2.jpg`

所以输出应该是

```
var b = "Hi this is test. <img src='http://www.test2.com/img2.jpg'> Test ends here"; 
```

两个图像路径都是动态的。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:18:17.507

您可以通过将其设置为 jquery 对象来设置图像的 url，如下所示：

```
var $myImg = $("<img src='http://www.test.com/img1.jpg'>");
$myImg.attr("src","http://www.test2.com/img2.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:23:08.773

见这个例子：http: [//jsfiddle.net/pnwKs/](http://jsfiddle.net/pnwKs/)

根据您想要更改 url 的方式，您可以使用 attr 命令。

```
// changes the full SRC path
$('#1').attr('src', 'http://placehold.it/350x250');

// replaces some part of the SRC path
$('#2').attr('src', $('#1').attr('src').replace('250','400')); 
```

如果它在一个字符串中，你可以这样做：

```
var a = "Hi this is test. <img src='http://www.test.com/img1.jpg'> Test ends here";
a.replace('img1.jpg', 'img2.jpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:27:49.897

查看示例： http: [//jsfiddle.net/ricardolohmann/Ww2Lu/](http://jsfiddle.net/ricardolohmann/Ww2Lu/) 您可以更改 src，只需通过参数传递新的。

# java - 如何指定最大下载大小？

> ID：10104784
> 
> 赞同：2
> 
> 时间：2012-04-11T11:13:22.250
> 
> 标签：java, httpclient

除了最大重定向之外，如何为 Httpclient 指定 URL 的最大下载大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:47:00.133

AFAIK 没有 HTTP 标头告诉服务器最大响应大小。您可以检查`Content-Length`响应的大小，如果它太大，则立即返回。如果没有指定（它甚至可以在服务器端未知），您唯一的选择就是开始下载它。别担心：当你调用`HttpClient.execute().getEntity()`的内容**并没有完全下载到任何地方**。An[`HttpEntity`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html)可以流式传输和缓冲，这意味着它不会完全保存在内存中或在您调用时立即保存在磁盘上`execute()`

[您可以自己探索资源](http://hc.apache.org/httpcomponents-client-ga/httpclient/xref/org/apache/http/impl/client/DefaultRequestDirector.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:52:03.153

如果你不`Content-Length`回来，它是可选的；您必须以流的形式下载资源并跟踪您自己手动下载了多少字节。这正是 HTTP 的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:54:19.047

根据 Jarrod 的回答，这就是我最终解决问题的方式：

```
HttpGet request = new HttpGet();
request.setURI(new URI(url));
response = client.execute(request);
BufferedReader in;

in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String line = "";

char buffer[] = new char[1024];

int totalReadSize = 0, currentRead=0;
while ((currentRead = in.read(buffer,0,buffer.length)) != -1)
{
    totalReadSize += currentRead;
    line = new String(buffer);
    sb.append(line);
    if (totalReadSize > MAX_DOWNLOAD_SIZE)
    {
        client.getConnectionManager().shutdown();
        throw new Exception("File too large");
    }
} 
```

# javascript - 制作滚动文本

> ID：10104789
> 
> 赞同：0
> 
> 时间：2012-04-11T11:13:39.273
> 
> 标签：javascript

拜托，我不知道 javascript，但我想制作一个滚动文本。所有链接都不鼓励选框，所以我搜索了一个答案，我能够将一个插件复制到我的标题中。但是，它不起作用，我不知道为什么。可能是因为文件保存在 PHP 中或使用错误？请帮忙，看看。

这是包含文件中的标头：

```
<body>
<div id="outer">
<div id="page">
<div id="header">
<script type="text/javascript" src="jquery-1.x.js"></script>
<script type="text/javascript" src="jscroller-0.4.js"></script>
<script type="text/javascript">
 $(document).ready(function(){

  // Add Scroller Object
  $jScroller.add("#scroller_container","#scroller","left",1);

  // Start Autoscroller
  $jScroller.start();
 });
</script>

<div id="scroller_container">
 <div id="scroller">
  <span style="float:left;">Register now and start placing your order</span>
 </div>
</div>
<div id="hlogo">
<span style="float:right;margin:2px 2px 0 0;"><img src="img/relogo2.jpg"  class="logoImage" width="96" height="96"/></span>
</div>
<span style="font-size:small;text-shadow: 10px 10px 1px grey;"><h1>Reacheasy<span style="font-size:small;"><?php echo $_SESSION['username'];?></span></h1></span>
<ul id="nav">
    <li class="current"><a href="index.php">Home</a></li>
     <li><a href="women.php">Women</a></li>
     <li><a href="men.php">Men</a></li>
     <li><a href="children.php">Children</a></li>
     <li><a href="homeandappliances.php">Home&amp;Appliances</a></li>
     <li><a href="visionandsound.php">Vision&amp;Sounds</a></li>
      <!--<li><a href="motoring.php">Motoring</a></li>-->
      <li><a href="homemore.php">More</a></li>
      <li><a href="howto.php">Help(How to?)</a></li>
  </ul>
</div> <!--end of navigation div -->
</div>
<div id="navigation">

<?php
if($_SESSION['username'])
{ ?>
<ul id="navigationlb">
<li><a href='howto.php'>Help(How to?)</a></li>
<li><a href='notification.php'>Consignment notification</a></li>
<li><a href='youraccount.php'>Order Placement</a></li>
<li><a href='relogout.php'>Log out</a></li>
 </ul>
<?php }else{
?>
  <div>
<form action='relogin.php' method='post' class='rl'>
<fieldset>
<legend>Login</legend>
    <div>
    <label for='username' class='fixedwidth'>Username</label>
    <input type='text' name='username' id='username'/>
    </div>

    <div>
    <label for='password' class='fixedwidth'>Password</label>
    <input type='password' name='password' id='password'/>
    </div>
<div class='buttonarea'>
    <input type='submit' value='Log in'/>
    </div>
<p>
<a href='reregister.php'>Register </a>
</p>
</fieldset>
</form>
</div>
<?php
}
? 
```

以及我添加的 javascript 的相关 css

```
/* Scroller Box */
#scroller_container {
 position: relative;
 width: 300px;
 height: 60px;
 overflow: hidden;
}

#scroller {
 white-space: nowrap;
 line-height: 60px;
 font-size: 60px;
}

#scroller p {
 padding: 0;
}
/* Scoller Box */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:24:15.307

你可以试试我发现的这个东西：

```
<script type="text/javascript">

step=1
timerDown="" 

onload=function scrollDivDown(){
el=document.getElementById("scroll")
clearTimeout(timerDown) 
el.scrollTop+=step
timerDown=setTimeout("scrollDivDown()",10)

if(el.scrollTop>=el.scrollHeight-el.offsetHeight){
el.scrollTop=0
}

}

</script> 

<DIV id="scroll" style="width:250px; height:550px; overflow:hidden">

</DIV> 
```

这很简单。将“滚动”替换为

```
el=document.getElementById("scroll"); 
```

使用要滚动的元素的 ID。

# javascript - LiveCycle：如何获取页面上表格行的绝对位置

> ID：10104796
> 
> 赞同：1
> 
> 时间：2012-04-11T11:14:17.020
> 
> 标签：javascript, css-position, livecycle

我正在尝试为使用 Adob​​e LiveCycle Designer 创建的 PDF 实现以下行为：

显示数据的表格每个条目显示五行。前三行应该相互粘连，以便它们都放在同一页上。通过将分页设置设置为“跟随上一个”，保持“上一个”和“下一个”，这可以正常工作。

现在我遇到的问题是，如果将表格行设置为与上一行保持一致，则表格行的内容不再允许分页符。因此，如果我在前三行中的最后一行有较长的文本，则所有行都将放在下一页上，而不仅仅是在最后一行的内容中放置分页符。如果我允许三行中的最后一行从上一行分离到下一行，分页符看起来很好，但显然不是我想要的，当整个最后一行都放在下一页上并且前两行保留在哪里时他们是。

我在网上发现了几次这个问题，似乎没有解决办法。所以解决方法似乎如下：*在第二行和第三行之间有一条线，将两者保持在一起，如果我需要在第三行内分页，则隐藏它。*

这个概念在是否允许分页方面工作得很好......但我没有实施一个体面的解决方案来**确定我是否要分页**。我相信一个好的衡量标准是第一行、第二行或第三行的垂直位置。但是我没有接近这个。我可以像这样读取要分页的行内容的**相对y 位置**

```
var node = xfa.resolveNode("data.listpage.tablData.area51[*]");
xfa.host.messageBox(node.linDescription.frmDescription.txtDescription.y) 
```

其中 area51 是一个表格区域，linDescription 是其中包含描述的表格行，txtDescription 是实际文本。TablData 是用数据填充的表。文档似乎暗示获得绝对位置的一种方法是添加父母的相对位置......但由于某种原因，例如，我无法获得表格行的相对位置。

显然我更希望获得页面上的绝对位置，甚至更好的是页面底部的空间。

有人知道这个问题的解决方案吗？也许我对分页和分页行为的假设也不正确......我对 LiveCycle 设计者来说相当陌生。

非常感谢你的帮助！

迈克尔

# c - linux内核中pthread_mutex_lock和pthread_cond_wait的等价物

> ID：10104799
> 
> 赞同：3
> 
> 时间：2012-04-11T11:14:27.290
> 
> 标签：c, linux-kernel, pthreads

什么是`pthread_mutex_lock`和`pthread_cond_wait`在linux内核中的等价物。以及如何使用它们。您能否提供简单的（hello world）示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:16:35.983

*   对于互斥锁（正如 Als 所说）：

`mutex_lock()`并且`mutex_unlock()`我们应该在与`mutex_init()` (from `#include <linux/mutex.h>`)一起使用之前初始化互斥锁

*   相当于`pthread_cond_wait`

`wait_event_interruptible()`并且我们应该用(from )`wake_up_interruptible()`初始化 wait_queue_head`init_waitqueue_head()``#include <linux/wait.h>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T11:18:18.010

您不能在内核空间中使用任何库调用，因为内核模块直接链接到内核。

您可以使用：

`mutex_lock()`&`mutex_unlock()`

它们通过以下方式提供：**[linux/mutex.h](http://lxr.linux.no/linux+v3.1/include/linux/mutex.h)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T04:06:26.773

我很久以前（1999 年左右）为 Linux 内核编程制作了一个互斥锁和条件库，并在此后的各种项目中使用。

我称它为 LMC（Linux 互斥体和条件变量）。这是在内核中没有互斥体类型之前。

[http://www.kylheku.com/~kaz/lmc.html](http://www.kylheku.com/~kaz/lmc.html)

最近，我添加了一个很酷的新函数，其语义是“放弃互斥体以等待条件变量，**同时**轮询多个文件描述符，直至给定超时”。

我在内核线程中使用了它来监视各种共享对象的更新，并同时与内核套接字通信。

看看这个：

```
/**
 * Atomically give up the mutex and wait on the condition variable.
 * Wake up if the specified timeout elapses, or if a signal is delivered.
 * Additionally, also wait on the specified file descriptors to become
 * ready, combining condition waiting with poll().
 * KCOND_WAIT_SUCCESS means the condition was signaled, or one or more
 * file descriptors are ready.
 * Also, a negative value can be returned indicating an error!
 * (The poll needs to dynamically allocate some memory for the wait table).
 * The timeout is relative to the current time, specifying how long to sleep in
 * jiffies (CPU clock ticks).
 */
int kcond_timed_wait_rel_poll(kcond_t *, kmutex_t *, long, 
                              kcond_poll_t *, unsigned int); 
```

结构数组`kcond_poll_t`是你必须自己创建和填充的东西，结构看起来像这样。有一个类型字段，因此您可以等待套接字 ( `struct socket *`) 或文件 ( `struct file *`)：

```
/**
 * Structure for file-descriptor polling condition waits.
 * This resembles struct pollfd, but uses a direct file descriptor
 * pointer rather than a file descriptor number.  Also,
 * it contains the wait queue by which the process is enqueued
 * to wait on that descriptor. Thus our poll function doesn't
 * have to dynamically allocate wait queue tables. It gets
 * them from this array! (But this means that the array cannot
 * be used by multiple threads at the same time to do polling!)
 */
typedef struct {
        kcond_poll_type_t type;  /* Must set this. */
        union {                 /* Must set union field according to type. */
                struct file *file;      
                struct socket *sock;
        } obj;
        short events;           /* And this. */
        short revents;          /* Check response in this. */
        wait_queue_t wait;          /* Internal, don't set. */
        wait_queue_head_t *queue;   /* Internal, don't set */
} kcond_poll_t; 
```

# html - HTML iframe，页面不加载到 iframe 中，而是替换整个网页。

> ID：10104802
> 
> 赞同：1
> 
> 时间：2012-04-11T11:14:56.583
> 
> 标签：html, iframe

我正在尝试在框架中加载[http://www.flipkart.com](http://www.flipkart.com)。但是当它加载时，我的网页被替换为 Flipkart 主页。

澄清一下，window.location.href 更改为flipkart.com。

我可以跟踪这个重定向事件的方法吗，比如我可以打开一个对话框——说 1\. 停留在这个页面上。2\. 离开本页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:18:23.110

不，网站有这个防止将它们加载到 iframe 中（没有要求您的用户禁用 javascript）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T07:15:52.977

**Flipkart iframe hack 技巧**

您可以使用沙盒属性（使用允许表单）强制 Flipkart 停留在 iframe 中。但是有一些限制，比如 js 不起作用。

[http://www.w3schools.com/tags/att_iframe_sandbox.asp](http://www.w3schools.com/tags/att_iframe_sandbox.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T12:42:29.433

Flipkart 在 HTML 中使用以下代码来防止任何框架加载他们的网站。

```
function noxfs() {
    try {
        if (window.top !== window.self) {
            document.write = "";
            window.top.location = window.self.location;
            setTimeout(function() {
                document.body.innerHTML = '';
            }, 0);
            window.self.onload = function() {
                document.body.innerHTML = '';
            };
        }
    } catch (err) {
    }
}
noxfs(); 
```

在这里，他们用自己的位置更新 window.top.location。他们的尝试可以被拦截，你可以通过使用下面的代码来防止超出框架。

```
 window.onbeforeunload = function(e) {
  return 'Any message here.';
}; 
```

在这里，您的事件处理程序在窗口删除现有页面的 DOM 之前被触发。

# spring - 在我的 hazelcastconfig 中通过 PropertyPlaceholderConfigurer 设置整数值时出现问题

> ID：10104803
> 
> 赞同：0
> 
> 时间：2012-04-11T11:14:59.007
> 
> 标签：spring, properties, hazelcast

我正在使用带有 hazelcast 的 spring 和 spring 的 PropertyPlaceholderConfigurer 来将属性插入到 spring-xml 中，这些属性会因不同的环境而变化。

例如：

```
hz:network port="${hazelcast.port}" port-auto-increment="true" 
```

我想更改地图的最大空闲秒数（每个环境都应该不同）。但这不起作用，因为它不能将其识别为整数：

```
hz:map name="default" backup-count="2" max-size="0"
max-idle-seconds="${hazelcast.maxidleseconds}" /> 
```

当我尝试运行它时出现此异常：

```
Caused by: org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: '${hazelcast.maxidleseconds}' is not a valid value for 'integer'. 
```

PropertyPlaceholderConfigurer 可能无法插入整数。也许这是与 hazelcast.xsd 有关的问题。

也许这里有人知道解决方案？

tia && 问候 noircc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:22:23.367

> **编辑**：*尽管 Hazelcast 组中提供了解决方案，但我在此处发布以供查看。*

这是一个很久以前解决的老问题。升级到 2.x 版本并将 xml 配置标头更新为：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:hz="http://www.hazelcast.com/schema/spring"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.hazelcast.com/schema/spring
            http://www.hazelcast.com/schema/spring/hazelcast-spring-2.0.xsd"> 
```

另请查看[Hazelcast-Spring 集成](http://hazelcast.com/docs/2.0/manual/single_html/#SpringIntegration)文档以获取详细信息。

# python - Python 2to3 windows CMD

> ID：10104805
> 
> 赞同：30
> 
> 时间：2012-04-11T11:15:02.667
> 
> 标签：python

我已经将 python 32 包安装到

> C:\python32

我还设置了路径：

> 蟒蛇路径 | C:\Python32\Lib;C:\Python32\DLLs;C:\Python32\Lib\lib-tk;
> 
> 路径;C:\Python32;

我想使用“2to3”工具，但 CMD 无法识别。

```
CMD: c:\test\python> 2to3 test.py 
```

我应该为“2to3”添加额外的路径吗？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-11T11:19:18.727

2to3 实际上是一个 Python 脚本，可以在 Python 安装的 Tools/scripts 文件夹中找到。

所以你应该像这样运行它：

```
python.exe C:\Python32\Tools\scripts\2to3.py your-script-here.py 
```

有关更多详细信息，请参见：http: [//docs.python.org/library/2to3.html](http://docs.python.org/library/2to3.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-05T19:16:19.827

您可以设置 2to3.py 在您键入 2to3 时作为命令运行，方法是在与您的 python.exe 文件相同的目录中创建一个批处理文件（假设该目录已经在您的 Windows 路径中 - 它不必是这个目录，它只是一个方便，相对合乎逻辑的位置）。

假设您在`C:\Python33`. `where python`如果您不确定您的 python 安装在哪里，您可以通过从命令行 键入来找出 Windows 认为它​​在哪里。

你应该有`python.exe`in`C:\Python33`和`2to3.py`in `C:\Python33\Tools\Scripts`。

创建一个名为`2to3.bat`in的批处理文件`C:\Python33\Scripts`并将此行放入批处理文件中

```
@python "%~dp0\..\Tools\Scripts\2to3.py" %* 
```

`%~dp0`是批处理文件的位置，在这种情况下，`c:\Python33\Scripts`它`%*`会将所有参数从命令行传递到`2to3.py`脚本。保存 .bat 文件后，您应该可以`2to3`从命令行键入并查看

```
At least one file or directory argument required.
Use --help to show usage. 
```

从 setup.py 安装时，我发现这种技术很有用，因为有时安装脚本期望 2to3 可以作为命令使用。

# ios - 如何在 AppDelegate 之外使用 UINavigationController？

> ID：10104814
> 
> 赞同：0
> 
> 时间：2012-04-11T11:15:26.623
> 
> 标签：ios, uinavigationcontroller, splash-screen

在我当前的应用程序中，我使用 UINavigationController 来显示其他 viewControllers 的内容。它像这样安装在 appDelegate 中。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];    
    self.viewController = [[ViewController alloc] init];
UINavigationController* navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [navigationController.navigationBar setBarStyle:UIBarStyleBlackOpaque];
    [self.window addSubview:navigationController.view];
    [[self window] setRootViewController:navigationController];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我现在想要的是创建一个新的视图控制器，在启动画面之后立即显示介绍视频。视频播放完成后，我想推送我的“StartViewController”并在其上安装 UINavigationController。所以这意味着我将在我的其他 ViewController 之一中进行设置，对吗？

那可能吗？有什么帮助吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:21:55.073

你可以像我在下面那样做

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
    capturedImg = [[UIImage alloc]init];
    self.splash = [[UIImageView alloc] initWithFrame:self.window.frame];
    splash.image = [UIImage imageNamed:@"default.png"];
    [self.window addSubview:splash];
    [self performSelector:@selector(Load_FirstView) withObject:nil afterDelay:2];
    [self.window makeKeyAndVisible];
} 
```

和 Load_FirstView 方法

```
-(void)Load_FirstView
{    
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    [self.window makeKeyAndVisible];
} 
```

如果您想显示视频，只需将另一种方法放在这两种方法之间，即首先调用它，然后从它调用 Load_firstView 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:30:39.247

感谢您的快速回复。我还发现了一篇关于启动画面的有趣博文：

[http://lucas.tiz.ma/blog/2011/09/26/ios-splash-screens-done-right/](http://lucas.tiz.ma/blog/2011/09/26/ios-splash-screens-done-right/)

对我来说，这种方式有效。看来，这是一种很好的灵活方式。

# sql - MSAccess：从每个类别中选择 N 条记录

> ID：10104815
> 
> 赞同：1
> 
> 时间：2012-04-11T11:15:28.583
> 
> 标签：sql, ms-access

我无法在 MS Access SQL 上解决这个问题。

我有一个包含以下字段的**foo**表：id、title、category、date

我需要显示 6 条记录，显示每个类别中的 2 个最新项目

例如，我有：

```
ID   TITLE   CAT   DATE
------------------------
1    aaa     cat1  12/03/12  
2    sdfs    cat2  12/03/12  
3    asg     cat2  13/03/12  
4    flkgjfl cat3  11/03/12  
5    dgdg    cat1  18/03/12  
6    dfgd    cat1  15/03/12  
7    dgdgd   cat3  18/03/12  
8    dfgd    cat3  12/03/12  
9    uiuou   cat1  14/03/12  
10   ghj     cat4  11/03/12 
```

所以，我需要类似的东西：

```
ID      TITLE   CAT     DATE
----------------------------------
5   dgdg    cat1    18/03/2012  
6   dfgd    cat1    15/03/2012  
3   asg cat2    13/03/2012  
2   sdfs    cat2    12/03/2012  
7   dgdgd   cat3    18/03/2012  
8   dfgd    cat3    12/03/2012 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:39:04.133

这个怎么样，`cat`是表的名字。

```
SELECT cat.ID, cat.TITLE, cat.CAT, cat.DATE
FROM cat
WHERE cat.ID In (
   SELECT TOP 2 id 
   FROM cat c
   WHERE cat.cat = c.cat  
   ORDER BY [date] DESC,id)
ORDER BY cat.CAT, cat.DATE; 
```

# c# - 当您没有对容器的引用时，是否可以让 Castle Windsor 解决属性依赖关系？

> ID：10104821
> 
> 赞同：5
> 
> 时间：2012-04-11T11:15:55.853
> 
> 标签：c#, dependency-injection, castle-windsor, ioc-container

我们有一个解决方案，其中包含多个代表我们应用程序层的项目。例如

领域

数据

逻辑

网页界面

我们的 Castle Windsor 容器是从我们的 Web 层引用的，然后我们将这些依赖关系通过我们的层级联起来。例如...

```
// In Domain
public interface IFooRepository
{
    void DoSomething();
} 

// In Data
public class FooRepository : IFooRepository
{
    public void DoSomething()
    {
        // Something is done
    }
}

// In Logic
public class MyThingManager
{
    private readonly IFooRepository fooRepository;

    public MyThingManager(IFooRepository fooRepository)
    {
        this.fooRepository = fooRepository;
    }

    public void AMethod()
    {
        this.fooRepository.DoSomething();
    }

}

// In Web
// in some controller....
var newManager = new MyThingManager(WindsorContainer.Resolve<IFooRepository>());
newManager.DoSomething(); 
```

这很好用，直到我们的经理有很多成员都有自己的依赖关系。当这种情况发生时，我们最终解决了管理器的依赖关系及其依赖关系，并将它们从 Web 层级联起来。这个结果是一些相当大的构造函数。

有没有更优雅的方式，例如让管理器的内部组件解决它自己的依赖关系而无需访问容器？

请记住，只有 web 层可以访问容器（以防止循环项目依赖），所以只有 web 层可以激活 WindsorContainer.Resolve() 逻辑层不能，所以只有在没有容器的帮助是在 web 层解决它，然后使用它的接口将它传递到链上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:48:11.890

简短的回答是，每当你看到`.Resolve<T>`你可能[做错了](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。正如@Steven 提到的，您想使用 Windsor 的内置功能为您提供构造函数注入（和/或属性注入）。这意味着`WindsorContainer`需要知道位于对象图根的对象。

在您的情况下，您将沿着对象树（从`MyThingyManager`）向上走，直到到达根对象。例如，在 ASP.NET MVC 应用程序中，这将是包含被调用操作的控制器。对于 MVC3 案例，您将使用[DependencyResolver](https://stackoverflow.com/questions/4140860/castle-windsor-dependency-resolver-for-mvc-3)来启动所有依赖项的注入。

此外，我发现过去对 Windsor 有用的是每个组件（组件）有一个不同的安装程序。然后在托管应用程序的进程的基础上注册这些安装程序。

因此，在每个组件中，您都会有一个安装程序，例如：

```
public class Installer : IWindsorInstaller
{
        public void Install(Castle.Windsor.IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
        {
            container.Register(
                Component.For<IMyThingManager>().ImplementedBy<MyThingManager>(),
                Component.For<IFooRepository>().ImplementedBy<FooRepository>()
                );
        }
} 
```

然后在 Global.asax.cs Application_Start 你会有类似的东西：

```
var container = new WindsorContainer();
container.Install(FromAssembly.This());
container.Install(FromAssembly.Containing(typeof(ComponentThatContains.MyThingManager.Installer))); 
```

这为您提供了一种管理整个对象图中的所有依赖项并通过构造函数注入解决的方法。希望这可以帮助。

# php - Zend搜索lucene DOCX日期范围查询导致错误“范围查询边界词必须是非多词词”

> ID：10104823
> 
> 赞同：1
> 
> 时间：2012-04-11T11:15:57.527
> 
> 标签：php, docx, zend-search-lucene

我正在使用 Zend Search Lucene 来索引一些 DOCX 文件。

```
$index = Zend_Search_Lucene::create($indexpath);
Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8Num_CaseInsensitive());
$doc = Zend_Search_Lucene_Document_Docx::loadDocxFile($file);
$index->addDocument($doc); 
```

这会索引以如下格式**修改**的字段调用下的最后修改日期

```
2012-01-19T11:56:00Z 
```

如果我尝试对此值执行范围搜索，例如

```
Zend_Search_Lucene_Search_QueryParser::parse('modified:[2012-01-01 TO 2012-04-01]'); 
```

我收到以下错误消息

```
Uncaught exception 'Zend_Search_Lucene_Search_QueryParserException' with message 'Range query boundary terms must be non-multiple word terms' 
```

有谁知道如何对 Zend DOCX 解析器创建的日期字段执行范围搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:04:36.953

根据[文档](http://framework.zend.com/manual/en/zend.search.lucene.query-api.html)，**当查询语法出现错误时，会抛出 Zend_Search_Lucene_Search_QueryParserException。**

所以我检查了[源代码](http://code.google.com/p/digitalus-cms/source/browse/trunk/library/Zend/Search/Lucene/Search/QueryParser.php?r=726)，这就是引发错误的地方：

```
$tokens = Zend_Search_Lucene_Analysis_Analyzer::getDefault()->tokenize($this->_rqFirstTerm, $this->_encoding);
if (count($tokens) > 1) {
   require_once 'Zend/Search/Lucene/Search/QueryParserException.php';
   throw new Zend_Search_Lucene_Search_QueryParserException('Range query boundary terms must be non-multiple word terms');
} else if (count($tokens) == 1) {
   require_once 'Zend/Search/Lucene/Index/Term.php';
   $from = new Zend_Search_Lucene_Index_Term(reset($tokens)->getTermText(), $this->_context->getField());
} else {
   $from = null;
}

$tokens = Zend_Search_Lucene_Analysis_Analyzer::getDefault()->tokenize($this->_currentToken->text, $this->_encoding);
if (count($tokens) > 1) {
   require_once 'Zend/Search/Lucene/Search/QueryParserException.php';
   throw new Zend_Search_Lucene_Search_QueryParserException('Range query boundary terms must be non-multiple word terms');
} else if (count($tokens) == 1) {
   require_once 'Zend/Search/Lucene/Index/Term.php';
   $to = new Zend_Search_Lucene_Index_Term(reset($tokens)->getTermText(), $this->_context->getField());
} else {
   $to = null;
} 
```

这包含在`openedRQLastTerm()`它将*处理最后一个范围查询词（打开的间隔）*的函数中。

在调查了查询有什么问题以及为什么它不能对其进行标记之后，我在[文档中发现了一个关于如何进行范围查询](http://framework.zend.com/manual/en/zend.search.lucene.query-language.html#zend.search.lucene.query-language.range)的可能解决方案：

> 范围查询允许开发人员或用户匹配其字段值在范围查询指定的下限和上限之间的文档。范围查询可以包括或不包括上限和下限。排序是按字典顺序执行的。

```
mod_date:[20020101 TO 20030101] 
```

因此，您可以通过删除日期中的连字符来获得一些运气。[另外，考虑一下论坛](http://zend-framework-community.634137.n4.nabble.com/Problem-of-Zend-Search-Lucene-Ranged-Queries-parsing-exception-no-result-if-field-is-numeric-td646494.html)中提到的一些内容：

> 在索引和搜索之前，您必须将默认分析器切换到 TextNum。默认分析器跳过数字：

```
Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive()) 
```

并且：

> 'publishDate' 字段需要在索引时设置为'keyword'，否则范围查询不会获取任何结果。

希望所有这些信息可以帮助您解决问题！祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:50:44.973

发现答案很简单，我觉得有点傻。

我需要将我的日期放在引号中以将令牌作为一个单词传递，例如

```
modified:["2012-04" TO "2012-01"] 
```

# .net - ASP.NET (VB) - 关闭函数内打开的 SQL 连接

> ID：10104825
> 
> 赞同：0
> 
> 时间：2012-04-11T11:16:04.183
> 
> 标签：.net, sql, vb.net, connection

谁能告诉我如何关闭函数内打开的 SQL 连接？

我这样调用选择函数：

```
 Function Selec(ByVal SQLStr As String) As SqlDataReader

        Dim SQLConn As New SqlConnection()
        Dim SQLCmd As New SqlCommand()

        SQLConn.ConnectionString = Session("bd")
        SQLConn.Open()

        SQLCmd.Connection = SQLConn
        SQLCmd.CommandText = SQLStr

        Selec = SQLCmd.ExecuteReader

    End Function 
```

在另一个页面中，我执行了一个 While 方法来检索我的数据，如下所示：

（**注**：BDcon.BD 是具有函数的类的名称）

```
 Dim write as New BDcon.BD

    Dim menu As SqlDataReader = writeBD.Selec("SELECT something from Table")

While menu.Read

    'Do something

End While

    menu.Close 'This close just the DataReader and not the SqlConnection 
```

最后我想通过这样的函数关闭我的 SQL 连接：

```
 Function Close() As SqlConnection

        Dim SQLConn As New SqlConnection()
        SQLConn.ConnectionString = Session("bd")

        SQLConn.Close()

    End Function 
```

我认为问题出在`Close()`函数上，我想关闭连接，但我不知道如何调用我的 Opened Conneciton。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:21:27.587

我认为使用 conruct 会更好地为你完成任务......

```
using cn as new system.data.sqlclient.sqlconnection()
    cn.open
    '{do a bunch of other stuff with commands and datareaders here}
    cn.close 
end using 
```

或者

你也可以利用`CommandBehavior Enumeration`

阅读：[**ExecuteReader with CommanBehavior（读取数据后自动关闭连接）**](http://pranayamr.blogspot.ca/2010/11/executereader-with-commanbehavior.html)

CloseConnection - 执行命令时，在关闭关联的 DataReader 对象时关闭关联的 Connection 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:24:17.750

在我看来，您应该更改您的函数以返回 DataTable 并立即关闭连接。
一个例子可能是

```
Function Select(ByVal SQLStr As String) As DataTable
    Dim SQLConn As New SqlConnection(Session("bd"))
    Dim SQLCmd As New SqlCommand(SQLStr, SQLConn)
    Dim SQLAdapt As New SqlDataAdapter(SQLCmd)
    Dim SQLDt As New DataTable()
    SQLAdapt.Fill(SQLDt)
    SQLConn.Close()
    Return SQLDt
End Function 
```

或者您可以让一个函数`GetConnection`创建并返回一个 SQLConnection，将其传递给`Select`函数（而不在内部创建一个新函数），然后手动关闭连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:24:36.100

我认为您应该将 SqlConnection 类的对象作为参数传递给您之前创建的 Close 函数。然后在该函数中使用该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:12:24.787

在您的原始代码中，您无法关闭原始连接，因为连接对象的范围仅适用于创建它的函数（它只能从您创建它的函数内部访问）。我同意 Marco 的回答，您应该返回 DataTable 而不是 SQLDataReader。这是一种稍微不同的方法，不需要 SQLDataAdapter：

```
Function Selec(ByVal SQLStr As String) As DataTable
    Dim SQLConn As New SqlConnection(Session("bd"))
    Dim SQLCmd As New SqlCommand(SQLStr, SQLConn)
    Dim SQLDt As New DataTable()
    SQLConn.Open()
    SQLDt.Load(SQLCmd.ExecuteReader)
    'Close the connection as soon as it is no longer needed
    SQLConn.Close() 
    Return SQLDt
End Function 
```

要使用返回的表，您可以通过这种方式遍历 DataRows 的集合：

```
Sub DoSomthing()
    Dim menu As DataTable = Selec("SELECT * FROM SomeTable")
    For Each row As DataRow In menu.Rows
        ' do something
    Next
End Sub 
```

另一种方法是在返回的 DataTable 上创建一个 DataTableReader，尽管除了它与您的原始代码更相似之外，我认为这样做没有任何好处：

```
Sub AlternateDoSomething()
    Dim dt As DataTable = Selec("SELECT * FROM SomeTable")
    Dim menu As DataTableReader = dt.CreateDataReader
    While menu.Read
        'Do something
    End While
    menu.Close()
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T12:24:26.067

我已经通过 Pranay Rana 回复解决了我的问题。

在我的代码中添加了 CommandBehavior.CloseConnection。

选择功能的最终代码：

```
 Function Selec(ByVal SQLStr As String) As SqlDataReader

        Dim SQLConn As New SqlConnection()
        Dim SQLCmd As New SqlCommand()

        SQLConn.ConnectionString = Session("bd")
        SQLConn.Open()

        SQLCmd.Connection = SQLConn
        SQLCmd.CommandText = SQLStr

        Selec = SQLCmd.ExecuteReader(CommandBehavior.CloseConnection)

    End Function 
```

再次感谢你们！:D

# javascript - 5.1 IOS 更新后 localStorage 问题的纯 JavaScript 解决方法？

> ID：10104828
> 
> 赞同：1
> 
> 时间：2012-04-11T11:16:13.560
> 
> 标签：javascript, ios, html

对于不使用 PhoneGap 的纯 HTML5 应用程序删除持久数据的问题，是否有任何已知的解决方案？

# jquery - 在jQuery中实现slideToggle

> ID：10104831
> 
> 赞同：0
> 
> 时间：2012-04-11T11:16:39.223
> 
> 标签：jquery, slidetoggle

我是 jQuery 的新手，我正在尝试找出这个 slideToggle 函数。我希望它如何工作是当你点击让我们说#toolsnav #tool-dropdown div 向下滑动时，效果很好。但问题是当我单击其他导航 div 时，#tools-dropdown div 不会上升，除非我再次单击它，否则它会保持下降。感谢您的帮助:)

```
 <script type="text/javascript">
    $(document).ready(function() {
        $("#toolsnav").click(function() {
            $(".tools-dropdown").slideToggle("fast");              
        }); 
        $("#showsnav").click(function() {
            $(".shows-dropdown").slideToggle("fast");              
        });
        $("#blognav").click(function() {
            $(".blog-dropdown").slideToggle("fast");              
        }); 
        $("#aboutnav").click(function() {
            $(".about-dropdown").slideToggle("fast");              
        });
        $("#joinnav").click(function() {
            $(".join-dropdown").slideToggle("fast");              
        });     
});  
</script> 

                <nav id="main">
                <ul>
                    <li><a href="#" id="toolsnav">Tools</a></li>
                    <li><a href="#" id="showsnav">Shows</a></li>
                    <li><a href="#" id="blognav">Blog</a></li>
                    <li><a href="#" id="aboutnav">About</a></li>
                    <li><a href="#" id="joinnav">Join</a></li>              
                </ul>           
            </nav> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:57:37.290

```
$(document).ready(function() {
    $("#toolsnav, #showsnav, #blognav, #aboutnav, #joinnav").on('click', function() {
        $('[class$="-dropdown"]').not('.'+this.id.replace('nav','')+'-dropdown').slideUp();
        $('.'+this.id.replace('nav','')+'-dropdown').slideToggle();
    });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/evkRG/)

要在链接处于活动状态时更改链接的颜色，您可以使用 jQuery 的 css() 方法，或者只使用一个类，如下所示：

```
$(this).toggleClass('active').parent().siblings().children('a').removeClass('active'); 
```

如果它们都具有相同的类，则将所有链接作为目标会更容易，但是上述方法也应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:30:31.817

```
$(document).ready(function() {
    $('#main ul li a').click(function(){
        var dropdown = $(this).attr('id').split('nav');
        $('.' + dropdown [0] + '-dropdown').slideToggle('fast'); 
    });
}) 
```

就这样 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:33:49.290

一个简单的解决方案是保存以前单击的幻灯片并切换它。

```
<script type="text/javascript">
$(document).ready(function() {
    var prevSlide;

        $("#toolsnav").click(slideFunc(".tools-dropdown")); 
        $("#showsnav").click(slideFunc(".shows-dropdown"));
        $("#blognav").click(slideFunc(".blog-dropdown"));
        $("#aboutnav").click(slideFunc(".about-dropdown"));
        $("#joinnav").click(slideFunc(".join-dropdown")); 

    function slideFunc(target)
    {
        return function()
        {
            if(prevSlide && target != prevSlide)
                $(prevSlide).slideToggle("fast");
            else
                prevSlide = null;

            $(target).slideToggle("fast");
            prevSlide = target;
        }
    }
});  
</script> 

<nav id="main">
    <ul>
        <li><a href="#" id="toolsnav">Tools</a></li>
        <li><a href="#" id="showsnav">Shows</a></li>
        <li><a href="#" id="blognav">Blog</a></li>
        <li><a href="#" id="aboutnav">About</a></li>
        <li><a href="#" id="joinnav">Join</a></li>              
    </ul>           
</nav> 
```

# java - 使用java中的fileInputStream类转换csv数据时的字符编码问题

> ID：10104839
> 
> 赞同：0
> 
> 时间：2012-04-11T11:17:24.340
> 
> 标签：java, csv, fileinputstream

嗨，我手里有一个 csv 文件，我正在尝试读取 csv 文件中的每一行并将内容更新到数据库表中。我正在使用java做这个。

以下是我为实现这一目标所做的事情。

```
FileInputStream fileInputStream = FileUtils.openInputStream("filename.csv");
dataInputStream = new DataInputStream(fileInputStream);
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(dataInputStream));
String strLine;
while((strLine = bufferedReader.readLine()) != null){
        System.out.println(strLine);
} 
```

但它在控制台上打印的东西`blocks`，而不是实际的数据 csv

谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:21:38.180

您应该找出它是什么编码，然后在阅读时声明它，例如 UTF-16：

```
new InputStreamReader(zipFile.getInputStream(entry), "UTF_16" ) 
```

# android - 自动完成下拉菜单中的边框

> ID：10104845
> 
> 赞同：2
> 
> 时间：2012-04-11T11:17:40.283
> 
> 标签：android, autocomplete, border

我有个问题。我不知道如何删除自动完成下拉菜单的边框和阴影。有人帮我吗？

![在此处输入图像描述](../Images/bf68f00c585e5035a6ad80c58cc122b5.png)

我需要下拉菜单是透明的，没有灰色边缘和线条

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-24T12:28:58.287

我有同样的问题，我找到了解决方案：添加`android:popupBackground="@null"`到`AutoCompleteTextView`标签

# php - 比较两个具有相同结构的 XML 文件并找出差异

> ID：10104846
> 
> 赞同：4
> 
> 时间：2012-04-11T11:17:44.420
> 
> 标签：php, javascript, xml, perl, diff

我有两个 XML 文件。两个 XML 文件的结构如下：

```
<file1>
       <table>
              <name>...</name>
              <columns>
                       <col>
                             <name>...</name>
                             <type>...</type>
                             <fkey>...</fkey>
                       </col>
                       <col>
                             <name>...</name>
                             <type>...</type>
                             <fkey>...</fley>
                       </col>
               <columns>
       </table>
      <table>
              <name>...</name>
              <columns>
                       <col>
                             <name>...</name>
                             <type>...</type>
                             <fkey>...</fkey>
                       </col>
                       <col>
                             <name>...</name>
                             <type>...</type>
                             <fkey>...</fley>
                       </col>
               <columns>
       </table>
 </file1> 
```

这两个 XML 文件将具有相同的表，但列数可以不同。我想要做的是比较每个表的每一列并找到类型和 fkey 的差异（如果有的话）。另外我想知道第二个 XML 文件中缺少哪些列。我想将此信息保存到另一个文件（可以是任何格式）。

我知道 Perl、PHP 和 JavaScript，但我以前没有使用过 XML。

现在我想知道从哪里开始以及使用哪些工具？完成上述任务的最佳方法是什么？是否有任何模块提供在两个 XML 文件之间执行差异的功能？

编辑：我在 Linux 平台（RedHat）上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:51:55.997

我曾经写过一个做类似事情的模块（没有优化，但它确实对我有用）

[http://ekawas.blogspot.ca/2008/11/comparing-xml-documents-semantically.html](http://ekawas.blogspot.ca/2008/11/comparing-xml-documents-semantically.html)

```
 use XML::SemanticCompare;
  my $x = XML::SemanticCompare->new;

  # compare 2 different files
  my $isSame = $x->compare($control_xml, $test_xml);
  # are they the same
  print "XML matches!\n"
    if $isSame;
  print "XML files are semantically different!\n"
    unless $isSame;

  # get the diffs
  my $diffs_arrayref = $x->diff($control_xml, $test_xml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:42:00.263

对于 Perl 解决方案，请查看相关的 CPAN 模块。[`XML::Diff`](https://metacpan.org/module/XML%3a%3aDiff)是最明显的，并且似乎可以满足您的需求，但是如果这对您不起作用，可以尝试[几种。](http://search.cpan.org/search?query=xml+diff&mode=module)

# android - 应用程序可以生成无线电信号吗

> ID：10104850
> 
> 赞同：1
> 
> 时间：2012-04-11T11:18:02.343
> 
> 标签：android

我想知道是否有可能从我的手机生成无线电信号。我一直在考虑应该像空调遥控器一样执行此功能的 Andriod 应用程序。()

如果是，给我链接？如果否，有什么限制？

# java - HttpClient如何在单个GetMethod中设置连接超时

> ID：10104853
> 
> 赞同：1
> 
> 时间：2012-04-11T11:18:05.900
> 
> 标签：java, connection, timeout, httpclient

在我的 Web 应用程序中，我有一个全局静态 HttpClient 用于应用程序的许多部分。它是这样创建的：

```
MultiThreadedHttpConnectionManager connectionManager = new MultiThreadedHttpConnectionManager();
HttpConnectionManagerParams params = new HttpConnectionManagerParams();
params.setConnectionTimeout( 15000 );
params.setSoTimeout( 15000 );
connectionManager.setParams(params);
httpclient = new HttpClient(connectionManager);
HttpClientParams clientParams = new HttpClientParams();
clientParams.setParameter("http.protocol.allow-circular-redirects", true);
clientParams.setParameter("http.protocol.max-redirects", 4);
httpclient.setParams(clientParams); 
```

对于大多数用例来说，超时都很好，但在特定的调用中，我想要更短的超时。所以我有：

```
GetMethod get = new GetMethod(finalUrl);

get.getParams().setParameter("http.socket.timeout", new Integer(1000));
get.getParams().setParameter("http.connection.timeout", new Integer(1000));
HttpClientUtil.getShortTimeoutInstance().executeMethod(get); 
```

这没用。连接超时仍然是15000。我可以在GetMethod中设置特定的连接超时而不创建新的HttpClient实例（这是因为我认为创建一个新的HttpClient实例不是一个好主意）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T15:55:43.690

你可能想看看

> ./impl/conn/tsccm/ThreadSafeClientConnManager.java

方法

```
ClientConnectionRequest requestConnection(final HttpRoute route, 
                                          final Object state) 
```

为路由初始化连接池后，将继续使用最初配置的套接字 timeOut 值，除非您扩展/覆盖它。

```
public ClientConnectionRequest requestConnection(
        final HttpRoute route,
        final Object state) {

    final PoolEntryRequest poolRequest = pool.requestPoolEntry(
            route, state);

    return new ClientConnectionRequest() {

        public void abortRequest() {
            poolRequest.abortRequest();
        }

        public ManagedClientConnection getConnection(
                long timeout, TimeUnit tunit) throws InterruptedException,
                ConnectionPoolTimeoutException {
            if (route == null) {
                throw new IllegalArgumentException("Route may not be null.");
            }

            if (log.isDebugEnabled()) {
                log.debug("Get connection: " + route + ", timeout = " + timeout);
            }

            BasicPoolEntry entry = poolRequest.getPoolEntry(timeout, tunit);
            return new BasicPooledConnAdapter(ThreadSafeClientConnManager.this, entry);
        }

    };

} 
```

# node.js - 在 Express js 和 JQuery mobile 中使用 Ajax 进行页面链接

> ID：10104859
> 
> 赞同：0
> 
> 时间：2012-04-11T11:18:28.007
> 
> 标签：node.js, jquery-mobile, express

我在我的快递项目中使用 jquery mobile。如何使用 Ajax 进行页面链接而不是加载所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:57:07.307

您使用 jquery get 方法来获取您使用 express 生成的 html 内容。

```
$.get( 'path/to/content', function( data ) {
  $( '#div' ).html( data );
}); 
```

在快递中，您有类似的东西：

```
app.get( '/path/to/content' , function( req , res ) {
    res.render( '<div>Some Content</div>' );
} ); 
```

在 res.render 中，您通常会从模板而不是 HTML 字符串进行渲染。

# cordova - 无法修改“系统根”钥匙串

> ID：10104861
> 
> 赞同：4
> 
> 时间：2012-04-11T11:18:46.477
> 
> 标签：cordova, ios4, osx-snow-leopard, keychain

我已经创建了证书并放入 Keychain Access 以测试 ios 设备中的应用程序。这工作正常，但我有一个问题，我正在从 keychain Access 导出证书以用于 phonegap 应用程序。现在 keychain Access 显示警告（“ “系统根”钥匙串无法修改。”）当我将开发推送 SSL 证书拖到钥匙串访问时，旧的开发配置文件现在不起作用。带有旧开发配置文件的 ios 应用程序给出错误“命令 /usr/bin /codedesign 失败，退出代码为 1"

怎样才能避免这个问题？

如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-09-11T20:23:27.890

以下解决方案对我有用。

```
Step 1\. First go to keychain

Step 2\. Go to login and drag and drop the certificates over here. 
```

就是这样，它可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T12:25:06.973

您可以尝试修改其信任设置。尝试先将其添加到本地项目或系统中。确保您已通过单击挂锁解锁钥匙串。

也可以看看：

[钥匙串警告“系统根”钥匙串无法修改](https://stackoverflow.com/questions/5401088/key-chain-warning-the-system-roots-keychain-cannot-be-modified)

# java - 使用模式java中的正则表达式

> ID：10104862
> 
> 赞同：0
> 
> 时间：2012-04-11T11:18:58.853
> 
> 标签：java, regex

我有一个字符串如下。

```
$Alarm:com.Alarm(a  ==  123 || (count  ==  12345 , time  matches  "24")) 
```

每当我遇到上述字符串时，我需要生成以下字符串。我的意思是我需要附加字符串“来自 Stream”，如下所示。

```
$Alarm:com.Alarm(a  ==  123 || (count  ==  12345 , time  matches  "24")) from Stream. 
```

我目前正在使用以下模式在 java 中实现相同的效果。

```
Pattern eventPattern = Pattern.compile(".*?\\.Alarm\\(.*?\\)"); 
```

但我得到以下输出。

```
$Alarm:com.Alarm(a  ==  123 || (count  ==  12345 , time  matches  "24") from Stream ) 
```

请为我提供一些指示以实现正确的输出。正则表达式应该只考虑最后一个括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:35:31.133

您需要在 Pattern 中包含匹配的括号。类似于以下内容：

```
Pattern eventPattern = Pattern.compile(".*?\\.Alarm\\(([^\\(]*?|\\([^\\)]*?\\))*\\)"); 
```

包括第一个开放括号在内的事情：`.*?\\.Alarm\\(`

任何内部括号之外的东西：`[^\\(]*?`

内部括号对：`\\([^\\)]*?\\)`

匹配括号外或括号对内的任意数量的东西：`([^\\(]*?|\\([^\\)]*?\\))*`

这个[RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)网站是玩正则表达式的好地方，看看什么会起作用。

# asp.net - 实体框架 - 将不同的对象集作为函数中的参数传递

> ID：10104863
> 
> 赞同：2
> 
> 时间：2012-04-11T11:19:06.480
> 
> 标签：asp.net, vb.net, entity-framework

我有以下代码：

```
Private Sub setDropdowns()
    Using licensingModel As New licensingEntities
        SetUpDropdowns(licensingModel.tblLookup_Country, "CountryName", "CountryName", country)
        SetUpDropdowns(licensingModel.tblLookup_Country, "CountryName", "CountryName", bizCountry)
        SetUpDropdowns(licensingModel.tblLookup_Salutation, "SSalutation", "SSalutation", salutation)
        SetUpDropdowns(licensingModel.tblLookup_OrgType, "OrgType", "OTAuto", organisationType)
    End Using
End Sub 
```

和子 SetUpDropdowns：

```
Private Sub SetUpDropdowns(ByVal entity As IObjectSet(Of EntityObject), ByVal textColumn As String, ByVal valueColumn As String, ByVal combo As RadComboBox)
    combo.DataSource = entity
    combo.DataBind()
End Sub 
```

我的问题是我不知道如何为 sub 定义参数类型。因为它们是每次传递的不同类型的对象集，我认为`IObjectSet(Of EntityObject)`会起作用，但它给了我以下错误：

> 无法投射类型为“System.Data.Objects.ObjectSet `1[licensingModel.tblLookup_Country]' to type 'System.Data.Objects.IObjectSet`1[System.Data.Objects.DataClasses.EntityObject]”的对象‌</p>

有人会为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:49:41.933

你不能只使用对象作为参数吗？

# ruby-on-rails - 调试 Rails 资产管道的最佳实践

> ID：10104865
> 
> 赞同：4
> 
> 时间：2012-04-11T11:19:13.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, sass

我正在使用 Rails 3 应用程序`bootstrap-sass`和资产管道，我正在寻找一些关于如何调试资产管道问题的想法。

在开发工作和动态编译（即包括从大量编译的 css 文件中）时，我的应用程序看起来完全符合我的预期。

但是，当我使用资产管道将资产编译到单个文件中以测试它在生产中的行为时，我认为连接文件`application.css`中的验证错误导致浏览器停止正确评估 css，并且我看到了一个数字的显示问题。

当我在开发中查看生成的 css 文件并将它们传递给 css3 验证器时，我可以看到在使用供应商的 css 文件时发生验证错误（在大多数情况下，这些是由于供应商特定的黑客攻击，关闭了验证器） - 当我通过 w3c 验证器运行它们时，我生成的文件正在通过验证，并且我在下面的 sprockets 文件中列出了通过/失败结果：

```
/*
 * sprocket file in application.css
 *
 *= require_self
 *= require vendor
 *= require bootstrap-include # FAILS 474 ERRORS - presumably down to css hacks
 *= require DT_bootstrap      # FAILS TWO ERRORS - presumably down to css hacks again
 *= require navbar            # PASSES
 *= require footer            # PASSES
 *= require main              # PASSES
 *= require home              # PASSES
 *= require widget            # PASSES
 *= require search            # PASSES
 *= require devise            # PASSES
 *= require doohickeys        # PASSES
 *= require datepicker        # FAILS - again yet more cross browser css hacks suspected
*/ 
```

### 当连接像这样破坏应用程序的视觉效果时，您应该如何开始为生产准备文件？

我在这里询问如何最好地调试这样的编译样式表 - 这听起来像是以前优雅地解决的问题，但在处理这样的问题时我不知道可靠的方法.

例如，我可以看到一些规则没有通过使用 Firefox 和 Webkit 中的 Web 开发人员检查器工具进行评估，但我不清楚如何超越这些，除了对编译的 CSS 进行一些费力的二进制搜索。

当然，已经有一些更专业的工具可用于此类情况，例如只能`application.css`编译`bootstrap-sass`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:39:26.893

如果你正在使用类似 bootstrap-sass 的东西，你不应该使用 Sprocket 指令，你应该使用`@import`.

将清单文件从 重命名`application.css`为`application.css.scss`，然后`@import`离开，例如：

```
@import "frameworks";
@import "bootstrap-responsive"; 
```

# java - Java 类下载文件

> ID：10104867
> 
> 赞同：0
> 
> 时间：2012-04-11T11:19:16.090
> 
> 标签：java, url, connection, download, connectexception

我正在尝试使用以下代码使用简单的 java 类下载文件：

[简单的java类下载文件](https://stackoverflow.com/questions/10104655/simple-java-class-to-download-the-file)

它给我的网址以下错误：

```
java.net.ConnectException: Connection refused: connect  
at java.net.PlainSocketImpl.socketConnect(Native Method)  
at java.net.PlainSocketImpl.doConnect(Unknown Source)  
at java.net.PlainSocketImpl.connectToAddress(Unknown Source)  
at java.net.PlainSocketImpl.connect(Unknown Source)  
at java.net.Socket.connect(Unknown Source)  
at java.net.Socket.connect(Unknown Source)  
at sun.net.NetworkClient.doConnect(Unknown Source)  
at sun.net.www.http.HttpClient.openServer(Unknown Source)  
at sun.net.www.http.HttpClient.openServer(Unknown Source)  
at sun.net.www.http.HttpClient.<init>(Unknown Source)  
at sun.net.www.http.HttpClient.New(Unknown Source)  
at sun.net.www.http.HttpClient.New(Unknown Source)  
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)  
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)  
at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)  
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)  
at Download.URLSetUp(Download.java:32)  
at Download.main(Download.java:16) 
```

如果你们有任何灵魂，请告诉我。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:34:27.223

从 Java 1.5 开始，您还可以将 java.net.Proxy 实例传递给 openConnection() 方法：

```
//Proxy instance, proxy ip = 192.168.0.1 with port 8080  

Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("192.168.0.1", 8080));
URL url = new URL("http://www.sheldonbrown.com/web_sample1.html");
HttpURLConnection uc = (HttpURLConnection)url.openConnection(proxy);
uc.connect ();

OutputStreamWriter wr = new OutputStreamWriter(uc
              .getOutputStream());  

BufferedReader rd = new BufferedReader(new InputStreamReader(uc
                .getInputStream())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:23:02.970

您没有与该 URL 的连接。

您是否从网络浏览器尝试过该 URL？

也许你和那个 URL 之间有代理？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:33:16.837

如果您的浏览器需要代理来访问此 URL，那么您的应用程序也将需要代理。

要设置代理，请`URLConnection`查看[此页面](http://www.rgagnon.com/javadetails/java-0085.html)

这可能很简单，因为使用以下参数运行您的应用程序

`java -Dhttp.proxyHost=myproxyserver.com -Dhttp.proxyPort=80 Download`

# dns - DNS 响应中的记录名称字段

> ID：10104868
> 
> 赞同：0
> 
> 时间：2012-04-11T11:19:16.883
> 
> 标签：dns

我刚刚阅读了有关 DNS 协议的内容，发现*名称字段*可以通过两种方式编写：

1.  `lenght of the next label` `the label` `lenght of the next label` `the label`...`zero-byte`
2.  `pointer to the previous name field`

接下来是[原文](http://technet.microsoft.com/en-us/library/dd197470%28v=ws.10%29.aspx)片段：

> 资源记录名称字段的编码方式与问题名称字段相同，除非该名称已出现在 DNS 消息中的其他位置，在这种情况下，使用 2 字节字段代替长度值编码名称并充当指向已经存在的名称的指针。

所以，我的问题是，如何确定在包中使用的第一种或第二种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:27:01.777

> 前两位是 1。这允许将指针与标签区分开来，因为标签必须以两个零位开始，因为标签被限制为 63 个八位字节或更少。

[请参阅RFC 1035](http://www.ietf.org/rfc/rfc1035.txt)中的“4.1.4\. 消息压缩”一章

# java - Tomcat 中的幽灵请求

> ID：10104874
> 
> 赞同：0
> 
> 时间：2012-04-11T11:19:33.657
> 
> 标签：java, http, tomcat, application-server

我们在 8080 端口设置了 Tomcat 应用服务器，在 80 端口设置了 Apache Http Server。httpd 将 80 端口上的所有流量重定向到 8080 端口。

我正在查看我们站点的 tomcat 服务器控制台，我在端口 8009 上看到了几个请求。这些请求保持活动状态长达 100 到 150 秒。

我们没有向该端口发出任何请求。那么这些请求是从哪里来的呢？他们为什么不完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:21:39.377

[8009 是AJP](http://en.wikipedia.org/wiki/Apache_JServ_Protocol)常用的端口。

> Apache JServ 协议 (AJP) 是一种二进制协议，可以将来自 Web 服务器的入站请求代理到位于 Web 服务器后面的应用程序服务器。

这是有关 AJP 及其在 Tomcat 中的使用/配置[的更多信息。](http://tomcat.apache.org/tomcat-5.5-doc/config/ajp.html)

> AJP 连接器元素表示一个连接器组件，它通过 AJP 协议与 Web 连接器进行通信。这用于您希望将 Tomcat 5 隐式集成到现有（或新）Apache 安装中，并且希望 Apache 处理 Web 应用程序中包含的静态内容和/或利用 Apache 的 SSL 处理的情况。

# visual-c++ - windows窗体应用程序vc++上的opencv鼠标处理

> ID：10104875
> 
> 赞同：1
> 
> 时间：2012-04-11T11:19:37.053
> 
> 标签：visual-c++, opencv, opencvdotnet

我无法在 vc++ windows 窗体应用程序中执行 opencv 鼠标处理。我收到以下错误

错误 29 错误 C3867: 'touch_gui_trial1::Form1::mouseHandler': 函数调用缺少参数列表；使用 '&touch_gui_trial1::Form1::mouseHandler' 创建指向成员 c:\users\mridul\documents\visual studio 2010\projects\touch_gui_trial1\Form1.h 104 1 touch_gui_trial1 的指针

代码片段如下

```
 public ref class Form1 : public System::Windows::Forms::Form
        {
    public:

    int i,cntr2,count,camno,cntr,ch,prev,flag_camno,hand_thresh_area;
    static int handthresharea=0,flagroi=0,drag; 
    static Point sz,point;

            void mouseHandler(int event, int x, int y, int flags, void* param)
    {
        IplImage* img0;

        img0=(IplImage *)param;
            /* user press left button */
        if (event == CV_EVENT_LBUTTONDOWN && !drag)
        {
            point = Point(x, y);
            drag  = 1;
        }

        /* user drag the mouse */
        if (event == CV_EVENT_MOUSEMOVE && drag)
        {
            img1 = cvCloneImage (img0);

            cvRectangle(
                img1,
                point,
                cvPoint(x, y),
                CV_RGB(255, 0, 0),
                1, 8, 0
            );

                        cvShowImage("Image taken", img1);
        }

        /* user release left button */
        if (event == CV_EVENT_LBUTTONUP && drag)
        {
            img1 = cvCloneImage(img0);

            cvSetImageROI(img1,cvRect(point.x,point.y,x - point.x,y - point.y));
            sz.x=x - point.x;
            sz.y=y - point.y;
            //cvNot(img1, img1);    // or do whatever with the ROI

            //cvResetImageROI(img1);
            cvNamedWindow("the roi",1); cvShowImage("the roi", img1);
            flagroi=1;
            drag = 0;
        }

        /* user click right button: reset all */
        if (event == CV_EVENT_RBUTTONUP)
        {
            //cvShowImage("Image taken", img0);
            drag = 0;
        }
    }
    int select_roi()
    {
        CvCapture *frame;
        IplImage* img0;
        IplImage* img1;

        frame=cvCaptureFromCAM(0);
        cvNamedWindow( "ROI Selection", CV_WINDOW_AUTOSIZE );
        if ( !frame ) 
        {
            fprintf( stderr, "ERROR: capture is NULL \n" );
            getchar();
            return -1;
        }
        img0= cvQueryFrame(frame);
        cvShowImage("ROI Selection", img0);
        cvSetMouseCallback("ROI Selection", ::mouseHandler, img0);
                    **//error is in the above line**

        return 0;
    } 
```

// rest 是调用 select roi 的 GUI 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:50:30.637

您的代码有两个问题：

*   看来您有 2 个`mouseHandler()`签名完全相同的方法；

*   将方法用作回调时，您需要确保它们是`static`方法：

    ```
    static void mouseHandler(int event, int x, int y, int flags, void* param) { ... } 
    ```

当你指定你的回调时，`cvSetMouseCallback()`你应该这样做：

```
cvSetMouseCallback("ROI Selection", &Form1::mouseHandler, img0); 
```

# extjs - 如何在 GridPanel 中为 CheckboxModel 列设置固定宽度？

> ID：10104877
> 
> 赞同：3
> 
> 时间：2012-04-11T11:19:42.860
> 
> 标签：extjs, extjs4

我在我的网格面板中需要复选框选择模式，所以我使用`Ext.selection.CheckboxModel`组件，但我的问题是关于该组件将附加到我的网格的列（复选框列）。我想为它设置一个固定的宽度，因为当我调整浏览器窗口的大小时，此列的宽度可能会有所不同。我使用下面的代码，但它不起作用：

```
constructor: function() {
    var me = this;
        me.selModel = Ext.create('Ext.selection.CheckboxModel', {width: 16});
    me.callParent(arguments);
} 
```

这是我的用户表的代码片段和快照：

```
Ext.define('VDOA.view.users.Table', {
    extend: 'Ext.grid.GridPanel',
    alias: 'widget.usersgrid',
    forceFit: true,
    selType: 'checkboxmodel',
    //selType: 'rowmodel',
    //selModel: Ext.create('Ext.selection.CheckboxModel'),
    title: '',
    initComponent: function() {
        ...
    }
}); 
```

![我的面板快照](../Images/167083c10c04fdcda3b819386d15ecca.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T12:37:43.240

您应该使用以下组合：

1.  按照 VDP 建议将 flex 属性设置为每一列
2.  `selModel`按照`headerWidth`Rich Waters 的建议定义

有了这种组合，您将能够使用复选框控制单元格的确切宽度

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T15:38:40.207

这是 Ext 4.0.7 中的一个错误：

这`forceFit: true`是搞砸了。他们建议设置`flex:1`在剩余的列上。这对我有用，但我仍然希望看到它更小。我可能会选择一个 CSS 解决方案。

[sencha 论坛上的主题](http://www.sencha.com/forum/showthread.php?179657-CheckboxModel-does-not-play-nice-with-forceFit-and-rowEditing-please-help!)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T00:03:33.753

有一个未记录的属性控制列宽，试一试：

```
selModel: {
    selType: 'checkboxmodel',
    headerWidth: 16
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:01:58.143

您尝试将所有内容都放在 "initComponent function" 中。

```
initComponent: function () {
    this.items = [{
       //define grid view 
       selModel: Ext.create('Ext.selection.CheckboxModel'),
       }
    ];
    this.callParent(arguments);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T12:35:58.187

我认为你把事情复杂化了。只需将此行添加到您的网格面板定义中：

```
selType: 'checkboxmodel' 
```

你会在前面得到漂亮、固定宽度、不可调整大小的复选框列。

# xslt - xslt 将 xml 属性替换为另一个属性，并将值替换为其他属性

> ID：10104880
> 
> 赞同：1
> 
> 时间：2012-04-11T11:20:12.050
> 
> 标签：xslt

我有以下形式的 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<query>
    <queryParams name="accountID">Star TV</queryParams>
    <queryParams name="assetID">Friends</queryParams>
    <queryParams name="accountExtRef">Tata</queryParams>
</query> 
```

我需要单独的 xslt 来：

1.  将 name="providerID" 替换为 name="ContentProvider" 使得生成的 xml 变为：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <query>
        <queryParams name="companyID">Star TV</queryParams>
        <queryParams name="assetID">Friends</queryParams>
        <queryParams name="accountExtRef">Tata</queryParams>
    </query> 
    ```

2.  用颜色替换“Star TV”，使 XML 变为

    ```
     <?xml version="1.0" encoding="UTF-8"?>
        <query>
            <queryParams name="accountID">Colors</queryParams>
            <queryParams name="assetID">Friends</queryParams>
            <queryParams name="accountExtRef">Tata</queryParams>
        </query> 
    ```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:40:07.003

您可以通过简单地向身份转换添加额外的模板来匹配您需要的更改来做到这一点。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="queryParams/@name[. = 'accountID']">
      <xsl:attribute name="name">companyID</xsl:attribute>
   </xsl:template>

   <xsl:template match="queryParams/text()[. = 'Star TV']">
      <xsl:text>Colors</xsl:text>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<query>
   <queryParams name="companyID">Colors</queryParams>
   <queryParams name="assetID">Friends</queryParams>
   <queryParams name="accountExtRef">Tata</queryParams>
</query> 
```

在这种情况下，它会一次性完成两项更改，但如果需要，如何将其拆分为两个单独的 XSLT 应该足够清楚。

# testcomplete - 测试完成。从特定点运行测试

> ID：10104882
> 
> 赞同：1
> 
> 时间：2012-04-11T11:20:13.657
> 
> 标签：testcomplete

有人知道在 Test Complete 中是否可以从函数中的特定点运行测试？我看到了运行例程、运行测试、运行项目等选项。

谢谢你，拉卢卡

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:08:06.087

无法从特定行开始执行脚本测试，但可以将执行点移动到所需行。您可以在脚本例程的第一行设置断点并运行该例程。一旦测试执行在断点处停止，使用**Set Next Statement**操作将执行点移动到所需的行并继续执行。

此功能记录在[设置下一个执行点](http://support.smartbear.com/support/viewarticle/11358/)帮助主题中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:41:45.970

TestComplete 的关键字驱动测试可以添加“标签”和“转到标签”。您可以在 KDT 脚本中的任何位置放置标签，并在测试开始时设置 GoToLabel 以移动到该点。

甚至可以将其与项目变量结合起来以获得“最后到达的里程碑/标签”。这只是猜测，但值得研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T10:07:57.957

不，您无法从特定点运行 testcomplete 脚本。从特定点运行脚本可以到达的最近点是使用断点，然后按 F10 逐行执行代码

# php - php中更新数组列表查询出错

> ID：10104884
> 
> 赞同：0
> 
> 时间：2012-04-11T11:20:26.480
> 
> 标签：php, mysql

我通过 url 从 android 向 php 发送 2 个数组列表。Mysql 包含包含两列 menuimage、menuname 的测试表。我只想更新菜单名称，但它只更新 mysql 数据库中菜单名称的第一行

到目前为止尝试过-

```
 <?php
$old_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['menuname'], '[]')));
$new_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['editmainmenu'], '[]')));
mysql_connect("localhost", "root", "MobixMySQL");
mysql_select_db("cozydine");
foreach ($old_menu_names as $key => $old_name) {
    $new_name = mysql_real_escape_string($new_menu_names[$key]);
    $old_name  = mysql_real_escape_string($old_menu_names[$key]);
    echo $new_name;
    mysql_query("UPDATE `mainmenu` SET `menuname` = '$new_name' WHERE menuname = '$old_name'")
    or die('Error' . mysql_error());
    echo "Updated";
   }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:56:33.900

那是因为他们在数据库中只有一个旧名称现在被新名称替换。如果您想用 new 更新行的所有值，请执行以下操作

```
"UPDATE `mainmenu` SET `menuname` = '$new_name' WHERE menuname IN ($unexploded_old_menu_names)" 
```

已编辑

在您的循环中，而不是使用新名称的键使用计数器

```
$i = 0;
foreach ($old_menu_names as $key => $old_name)
{
$new_name = mysql_real_escape_string($new_menu_names[$i]);
$old_name  = mysql_real_escape_string($old_menu_names[$key]);
echo $new_name;
mysql_query("UPDATE `mainmenu` SET `menuname` = '$new_name' WHERE menuname = '$old_name'")
or die('Error' . mysql_error());
echo "Updated";
$i++; 
```

}

因为 key 可能不适用于新名称数组。

# c# - 从 C# 调用 Java 代码

> ID：10104886
> 
> 赞同：0
> 
> 时间：2012-04-11T11:20:37.147
> 
> 标签：c#, java, class, parameters

我被困在一件我无法解决的事情上。我有一部分代码，它像魅力一样从命令行执行。工作没有任何问题。

因此，我将尝试从 C# 中调用此命令（相同）。

那是我从命令行运行的代码。

> java -Xincgc -Xmx1024m -cp "%APPDATA%.minecraft\bin\minecraft.jar;%APPDATA%.minecraft\bin\lwjgl.jar;%APPDATA%.minecraft\bin\lwjgl_util.jar;%APPDATA%.minecraft\ bin\jinput.jar" -Djava.library.path="%APPDATA%.minecraft\bin\natives" net.minecraft.client.Minecraft "NAME"

我试图在 C# 中得到它的部分看起来像：

```
proc.StartInfo.FileName = "java";
proc.StartInfo.Arguments = "-Xincgc -Xmx1024m -cp \"%APPDATA%\\.minecraft\\bin\\minecraft.jar;%APPDATA%\\.minecraft\\bin\\lwjgl.jar;%APPDATA%\\.minecraft\\bin\\lwjgl_util.jar;%APPDATA%\\.minecraft\\bin\\jinput.jar\" -Djava.library.path=\"%APPDATA%\\.minecraft\\bin\\natives\" net.minecraft.client.Minecraft \"NAME\"";
proc.StartInfo.CreateNoWindow = true;
proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.RedirectStandardOutput = false;
proc.Start(); 
```

但是，什么都没有发生。有什么我做错了吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:23:11.767

`Arguments`在using中展开环境变量[`Environment.ExpandEnvironmentVariables`](http://msdn.microsoft.com/en-us/library/system.environment.expandenvironmentvariables.aspx)。

```
string args = "-Xincgc -Xmx1024m -cp \"%APPDATA%\\.minecraft\\bin\\minecraft.jar;%APPDATA%\\.minecraft\\bin\\lwjgl.jar;%APPDATA%\\.minecraft\\bin\\lwjgl_util.jar;%APPDATA%\\.minecraft\\bin\\jinput.jar\" -Djava.library.path=\"%APPDATA%\\.minecraft\\bin\\natives\" net.minecraft.client.Minecraft \"NAME\"";
proc.StartInfo.Arguments = Environment.ExpandEnvironmentVariables(args); 
```

顺便说一句 - 您可以使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)使该参数字符串更具可读性。

```
@"-Xincgc -Xmx1024m -cp ""%APPDATA%\.minecraft\bin\minecraft.jar;%APPDATA%\.minecraft\bin\lwjgl.jar;%APPDATA%\.minecraft\bin\lwjgl_util.jar;%APPDATA%\.minecraft\bin\jinput.jar"" -Djava.library.path=""%APPDATA%\.minecraft\bin\natives"" net.minecraft.client.Minecraft ""NAME"""; 
```

# meteor - Meteor中的翡翠模板

> ID：10104887
> 
> 赞同：41
> 
> 时间：2012-04-11T11:20:44.840
> 
> 标签：meteor, pug

在 Meteor 常见问题解答[http://meteor.com/faq/how-do-i-package-a-new-templating-system](http://meteor.com/faq/how-do-i-package-a-new-templating-system)中有一些关于添加不同（而不是默认 Handlebars）模板系统的信息。Jade 是文档中其他地方明确指出的唯一其他示例。

那么有人已经在研究 Jade 了吗？如果没有，我是否可以开始？还是现在还为时过早？例如：

> 包 API 正在迅速变化并且没有记录，因此您还不能制作自己的包。快来了。

我一直在尝试在我当前的 Ember.js 项目中喜欢 Handlebars，但对我来说，没有什么比 Jade 更优雅了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T18:43:17.993

我们很想看到 Jade 的整合。用作`packages/handlebars`模板。

基本策略是将模板引擎的输出连接到`Meteor.ui.render`其中，这是我们实现实时页面更新的方式。只要您的模板返回 HTML，就可以。每当 Jade 模板引用`Meteor.Collection`文档或`Session`变量时，Meteor 都会注册该依赖项，以便知道在数据更改时重新渲染模板。

不过，更好的是也使用`Meteor.ui.chunk`and `Meteor.ui.listChunk`。这些将限制 Meteor 在发生更改时必须执行的重新计算量。例如，如果您使用`{{#each}}`Handlebars-speak 呈现文档列表，则当新文档进入结果集时，没有理由重新计算整个模板。我们只需为新文档渲染一个 HTML 块，并将其插入到 DOM 中。这是`listChunk`在行动。

因此，您可能会发现仅在 Jade 中使用`if`/`unless`和`for`/可以让您走得更远。`each`

请注意，包开发不像系统的其他部分那样记录在案。因此，请随时提出更具体的问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-26T21:42:49.137

## 流星 >= 0.8.0

[官方推荐](https://www.meteor.com/blog/2014/03/27/meteor-080-introducing-blaze)使用[mquandalle:jade](https://atmospherejs.com/mquandalle/jade)包 。

## 流星 <= 0.7.2

1.  如果你**不**使用 CoffeeScript，你应该看看[jade-handlebars](https://github.com/SimonDegraeve/meteor-jade-handlebars)。在撰写本文时，有一个问题是 CoffeeScript 模板文件似乎需要包装在一个`Meteor.startup`函数中，这给我带来了其他问题。

2.  如果您使用的是 CoffeeScript，您应该查看我的[Cakefile](https://gist.github.com/4644690)。详细信息都在描述中，但简短的版本是它会自动添加/删除/更新 html 文件以及您的玉文件。我最终添加`*.html`到我的`.gitignore`，这仅在您不在同一个项目中混合 html 和 jam 时才有效。这有点像黑客，但到目前为止它对我来说工作正常。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-03T04:55:59.263

只需在 Atmosphere 上发布我的第一个流星智能包！

使用 Jade+Handlebars 代替 HTML+Handlebars

[https://atmosphere.meteor.com/package/jade-handlebars](https://atmosphere.meteor.com/package/jade-handlebars)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-14T06:20:10.873

刚刚让玉模板与我的 Meteor 项目一起工作！它是真正的翡翠，不是翡翠把手或半形翡翠。它很棒，但它需要 Meteor UI，它目前处于一个名为 blaze-rc1 的开发版本中。所以它目前不适用于 Meteor 0.7。

做'mrt添加玉'

&

使用“mrt --release blaze-rc1”运行你的流星项目

[https://github.com/mquandalle/meteor-jade/](https://github.com/mquandalle/meteor-jade/)

如果您在同一文件夹中有咖啡脚本和翡翠文件，请在文件名的开头添加 _，以便在咖啡脚本文件之前加载翡翠文件，否则将无法正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-25T18:45:49.893

`mrt add jade`

在`client/views/templates/hello.jade`你可以做这样的事情：

```
template(name="hello")
  h1 hello world!
  {{greeting}}

  input(type="button" value="click") 
```

开始你的应用程序`mrt`

# web-sql - 在 websql 中格式化日期

> ID：10104893
> 
> 赞同：1
> 
> 时间：2012-04-11T11:20:55.353
> 
> 标签：web-sql

我正在使用 websql，但问题是，在 websql 中找不到任何日期函数。我将日期存储在格式`Mon Apr 09 2012 15:23:54 GMT+530(India Standard Time)`中，并且我想要格式中的查询结果`04/09/2012`。请问有什么机构可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:44:01.657

WebSql 有一个`strftime`功能可以满足您的需求：

```
select strftime('%d-%m-%Y', 'now') formattedDate 
```

如下面评论中所述，列中的数据需要是 SQLite 识别的有效日期时间字符串。查看[SQLite 日期函数文档](http://www.sqlite.org/lang_datefunc.html)以获取更多信息。

# regex - IIS7重写地图正则表达式？

> ID：10104896
> 
> 赞同：11
> 
> 时间：2012-04-11T11:21:09.097
> 
> 标签：regex, iis-7, url-rewriting, rewritemap

是否可以在重写映射中使用 reg ex？例如：

```
<rewriteMap name="Redirects">
   <add key="/blah/(.*)" value="/blah/{R:1}" />
</rewriteMap> 
```

或者有没有办法处理这种方法？目前，我设置了一个规则来匹配所有内容，然后使用重写映射映射到新的 url。我想捕获目录下的所有内容，例如资源文件（等等）......而不必手动为它们执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:36:01.140

不幸的是，您需要创建一个规则来使用正则表达式。

> 请注意，在键及其与值的关系中没有明显的共同模式。这意味着不可能使用正则表达式或通配符来定义 URL 转换逻辑。 [http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)

# jquery - 当我使用 jQuery 更改 HTML 时，为什么我的 DOM 没有更新？

> ID：10104897
> 
> 赞同：1
> 
> 时间：2012-04-11T11:21:12.620
> 
> 标签：jquery

我有以下内容：

```
<div id="info-message"></div> 
```

我正在更改 DIV 之间的文本，如下所示：

```
$('#info-message').html = "xxx"; 
```

但是，即使我可以在 firebug 调试器中逐步完成此操作，我也没有在屏幕上看到任何更改，并且当我查看 firebug 时也没有添加任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:22:48.970

因为[`html`](http://api.jquery.com/html/)是一种方法，所以你需要像这样调用它：

```
$('#info-message').html("xxx"); 
```

目前，您正在将`html`jQuery 对象的属性设置为字符串“xxx”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T11:22:43.993

`html()`jQuery方法的正确用法是：

```
$('#info-message').html("xxx"); 
```

如果您想检索元素的 html：

```
$('#info-message').html(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:23:06.840

```
$('#info-message').html('xxx') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T11:24:49.943

您必须使用`html()`方法：

```
$('#info-message').html("xxx"); 
```

如果你想附加一个元素并使用它的 DOM，你可以使用以下内容：

```
var contentDiv = $('<div class="content">xxx</div>');
$('#info-message').append(contentDiv);

contentDiv.css('color', 'red'); 
```

# ruby-on-rails - 使用“fb_graph”gem 时出现 HTTPClient::ConnectTimeoutError

> ID：10104900
> 
> 赞同：2
> 
> 时间：2012-04-11T11:21:20.303
> 
> 标签：ruby-on-rails, ruby, ubuntu

我有一个轨道项目和两个机器。一个运行 Ubuntu 10.04，另一个运行 12.04 beta。我在 10.04 机器上使用 'fb_graph' gem 一切正常，但是当我在 12.04 机器上使用时

> > 我 = FbGraph::User.me(token).fetch

我明白了

```
HTTPClient::ConnectTimeoutError: execution expired
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:300:in `connect'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:300:in `ssl_connect'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:739:in `block in connect'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:731:in `connect'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:594:in `query'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient/session.rb:161:in `query'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:1060:in `do_get_block'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:869:in `block in do_request'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:956:in `protect_keep_alive_disconnected'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:868:in `do_request'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:756:in `request'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/httpclient-2.2.4/lib/httpclient.rb:661:in `get'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/fb_graph-2.4.10/lib/fb_graph/node.rb:49:in `block in get'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/fb_graph-2.4.10/lib/fb_graph/node.rb:122:in `handle_response'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/fb_graph-2.4.10/lib/fb_graph/node.rb:48:in `get'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/fb_graph-2.4.10/lib/fb_graph/node.rb:18:in `fetch'
from (irb):10
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/railties-3.2.0/lib/rails/commands/console.rb:47:in `start'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/railties-3.2.0/lib/rails/commands/console.rb:8:in `start'
from /home/jan/.rvm/gems/ruby-1.9.2-p290@ece/gems/railties-3.2.0/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我不知道为什么会发生这种情况，也不知道如何解决。有任何想法吗？谢谢！

简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:07:05.807

它可能发生的原因是机器的硬件性能和网络性能。

再试几次。有时网络需要时间来加载路由信息，但一旦加载，下一次速度会更快。这可能不是一个好的生产解决方案，但它可以诊断问题是否正在更新网络路由。

这可能是一个真正的网络性能问题。如果您无法调整网络，那可能对您没有帮助。

如果重试有帮助，您可以在代码周围放置一个重试循环。

```
(0..2).each do
  begin
    ... #your code goes here
    break
  rescue HTTPClient::ConnectTimeoutError
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:59:06.263

服务器和 FB 之间的 HTTP 请求超时。有关如何配置 HTTP 客户端超时选项的说明，请参阅此[github 问题。](https://github.com/nov/fb_graph/issues/151)

# c++ - CComPtr 通过引用传递

> ID：10104907
> 
> 赞同：0
> 
> 时间：2012-04-11T11:21:42.590
> 
> 标签：c++, atl, smart-pointers, winapi, xmllite

我有一种情况，我需要`CComPtr<IXmlReader>`通过引用将 a 传递给函数。被调用参数是否从被调用参数中获取所有权（或）引用计数增加？

```
void foo( CComPtr<IXmlReader> & pReader )
{
  // There is no reassignment of the CComPtr.
  // Just call the IXmlReader methods.
}

CComPtr<IXmlReader> pReader;
foo( pReader );

// Is pReader still valid after the function return ? 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:26:59.157

如果没有重新分配，为什么它是参考参数？

无论如何，引用计数没有变化。是的，CComPtr 在返回后仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:46:43.277

调用本身不会影响引用计数，它只是使用指针进行内部函数操作，可能会添加或释放对对象的引用数量。

> // 函数返回后 pReader 是否仍然有效？

是的，除非函数重新分配值，将其设置为`NULL`或放入新值。

即使仅输入的参数，程序员以这种方式传递参数也有好处：（1）您完全停留在智能指针的范围内，并且您不必担心正确的引用计数（2）您例如尝试`->`未初始化的指针 (3) 发布构建优化时断言失败将/可能生成几乎与使用原始指针一样快的代码。

# facebook - 共享缓存超时

> ID：10104908
> 
> 赞同：3
> 
> 时间：2012-04-11T11:21:43.963
> 
> 标签：facebook, caching, timeout

facebook 共享缓存的超时时间是多少。我编辑了所有页面，必须反映更改。

如果超时是无限的，我必须通过 curl 等调试所有页面。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:14:09.320

您可以使用[Debugger](http://developers.facebook.com/tools/debug)手动“清除” facebook 缓存。

只需去那里，输入您更改的 url 并单击“调试”，这将导致 facebook bot 从您的服务器请求数据，即使它已经被获取和缓存，并且新数据将替换旧数据。

* * *

# 编辑

毫无疑问，800k 的页面很多。

根据[Like Button 文档](http://developers.facebook.com/docs/reference/plugins/like/)：

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

（URL Linter 是调试器）

但根据我的经验，情况并非总是如此，我没有找到任何模式，但我遇到了几个月前的数据，并且在我手动使用调试器提取新数据之前，缓存并不清晰。

如果您仍想手动刷新 fb 拥有的数据，您可以编写一个脚本，将 url 发布到 Debugger 页面中的相同表单操作，我认为他们没有使用 csrf 保护。通过这种方式，您可以为所有页​​面自动执行此操作，这可能需要一段时间，但不会太严重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T13:31:39.807

我`window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(url_to_share))`用来制作共享弹出窗口，无论我做什么，缓存的共享都不会清除，直到我执行以下操作：

*   将您尝试共享的 URL 放入 Facebook URL Linter。
*   向下滚动到“共享预览”
*   单击“在共享对话框中查看”
*   从该页面复制 URL
*   *将该*URL放入您的 window.open( **[将 URL 放在这里]** ) 弹出窗口中，瞧！

# delphi - 如何在 Delphi 中更改活动构建配置？

> ID：10104913
> 
> 赞同：6
> 
> 时间：2012-04-11T11:22:17.867
> 
> 标签：delphi, delphi-xe

每当我编译、构建或运行我的项目时，它都会将 exe 文件输出到**Debug\Win32** 文件夹中，所以我猜它处于调试模式。

当我去：项目->选项我可以看到调试（活动）

但我不知道如何切换到发布。当我将组合更改为发布时，调试仍然处于活动状态。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T11:26:15.107

1.  从“查看”菜单打开项目管理器，或使用快捷方式`Ctrl+Alt+F11`。
2.  在项目管理器的树视图中找到 Build Configurations 节点并将其打开。
3.  双击释放。

![在此处输入图像描述](../Images/abeb739f7909eeaaab7f260249f07976.png)

活动构建配置在项目管理器中以粗体文本指示。

# html - 我正在尝试对齐左侧、右侧和中心的三个元素。中心元素=动态宽度，包含元素=浏览器宽度

> ID：10104916
> 
> 赞同：0
> 
> 时间：2012-04-11T11:22:30.223
> 
> 标签：html, css, alignment

这是我想要做的事情：我有一个`<h1>`元素，一个`<time>`元素和一个`<div>`，都在一个`<header>`浏览器窗口的整个宽度内。`<h1>`元素需要在左侧，宽度随时间变化的元素`<time>`需要居中，`<div>`需要在右侧。

我一直在尝试解决这个问题，但没有任何运气。也许它需要一些javascript？我还需要能够（我认为使用绝对定位？）垂直居中对齐它们，它们都是不同的字体大小。

到目前为止的HTML：

```
<header>
    <h1>blahblah.com</h1>
    <time>THE TIME</time>
    <div id="controls">
        DISPLAY CONTROLS
    </div>
</header> 
```

和CSS：

```
* {
    margin: 0px;
    padding: 0px;
}
header {
    background: black;
    color: white;
    width: 100%;
    font-family: wendy;
}
header h1 {
    display: inline-block;
    font-size: 40px;
    margin-left: 10px;
}
header time {
    font-size: 30px;
}
header #controls {
    display: inline-block;
}
#controls p {
    display: inline-block;
    font-size: 20px;
} 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:04:20.527

`Time`是一个内联元素，因此`text-align: center`对于标题来说足以让时间居中。此外，摆脱那些不必要的`inline-block`样式。

然后基本对齐样式表缩小到[这个小提琴示例](http://jsfiddle.net/sEw7y/)：

```
header { 
    width: 100%; 
    overflow: hidden;
    text-align: center;
} 
header h1 { 
    float: left;
} 
header #controls { 
    float: right;    
} 
```

添加溢出以确保将标题的高度扩展到浮动元素的高度，以最高者为准。

# php - jqm 将选择菜单更改为基本列表？

> ID：10104918
> 
> 赞同：0
> 
> 时间：2012-04-11T11:22:35.670
> 
> 标签：php, list, jquery-mobile

这可能真的很简单，但我不习惯这种编码方式 - 如何更改此选择菜单：

```
$control .= '<select name="'. $this->_hash_value($hash, $xml_obj->value) .'" id="'. $this->_hash_value($hash, $xml_obj->value) .'" data-native-menu="false">';
foreach ($nameArr as $folder => $imageArr) {
            foreach ($imageArr as $image) {
                if (substr($folder, 1, strlen($folder)).$image == $xml_obj->value) {
                    $control .= '<option value="'. substr($folder, 1, strlen($folder)).$image .'" selected="selected">'. $image .'</option>';
                } else {
                    $control .= '<option value="'. substr($folder, 1, strlen($folder)).$image .'">'. $image .'</option>';
                }
            }
        }
        $control .= '</select>'; 
```

进入单个列表项（具有当前选择项的值），该列表项导致包含用户可以选择的所有项目的基本列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:19:01.877

你应该能够做这样的事情：

```
$control .= '<ul id="'. $this->_hash_value($hash, $xml_obj->value) .'" data-role="listview" data-theme="g">';
foreach($nameArr as $folder => $imageArr)
{
   foreach ($imageArr as $image) {
      $control .= '<li><a href="'. substr($folder, 1, strlen($folder)).$image .'">'. $image .'</a></li>';
   }
}
$control .= "</ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:29:20.317

清单 1：

```
$control .= '<ul data-role="listview" data-inset="true">';
        $control .= '<li>';
        $control .= '<a href="'. site_url() .'/mobilegallery/gallery/'.$x[0]->attributes()->indexI.'">Bilder</a>';
        $control .= '</li>';
        $control .= '</ul>'; 
```

清单 2，在新页面上：

```
$html .= '<ul data-role="listview" class="ui-listview" data-inset="true">';
    for($i = 0, $c = $xml->COM->MOVIE->count(); $i < $c; $i++ ){

        $html .= '<li>';
        $html .= '<a>
        <img src="https://[url]/'.rawurlencode($this->_decode_path($xml->COM->MOVIE[$i]->attributes()->dbIcoFilename)).'" id="imgThumb" alt="'.$xml->COM->MOVIE[$i]->attributes()->nameS.'" />
        <h1>'.$xml->COM->MOVIE[$i]->attributes()->nameS.'</h1>
        </a>';
        $html .= ' </li>';

    }
    $html .= '</ul>'; 
```

# jsp - 访问struts2中的scriptlet变量 标签

> ID：10104923
> 
> 赞同：1
> 
> 时间：2012-04-11T11:22:48.720
> 
> 标签：jsp, struts2

**我在我的jsp中以下列方式在scriptlet中创建了变量**

```
<% int count= 0; %> 
```

根据某些条件，我正在增加变量值......（**现在认为“计数”值为 5**）

**现在，如果*“计数”*值为*0*，我必须使用 struts2 标签进行一些处理**

我尝试了以下方法。但我失败了......

```
<s:if test="#count == 0" > 
   --------
   -------- 
</s:if>  

<s:if test="%{#count == 0}" >  
</s:if> 
```

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:31:33.703

不要使用小脚本

```
<s:bean name="org.apache.struts2.util.Counter" var="counter">
   <s:param name="first" value="0"/>
   <s:param name="last" value="5" />
</s:bean>

<s:iterator value="#counter">
  <li><s:property /></li>
</s:iterator> 
```

它将打印 0 到 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:57:58.143

每个人都告诉你这不是一个好主意......如果你想要一个坏主意，那么：

以下必须在 JSP 的顶部：

```
<%@ page import="com.opensymphony.xwork2.ActionContext" %>
<%@ page import="com.opensymphony.xwork2.util.ValueStack" %> 
```

在您的 JSP 中的某个地方之后：

```
<%
    int i = 0;
    ValueStack stack = ActionContext.getContext().getValueStack();
    stack.getContext().put("varName", i);
    stack.setValue("#attr['varName']", i, false);
%> 
```

那么这应该工作：

```
<s:property value="#varName"/> <!-- prints 0 --> 
```

我没有花时间对此进行测试，但这就是 struts2 set 标签的工作方式（如果不是一个好主意，它仍然有点教育意义）。

# jquery - 更具交互性的 Grails 应用程序（如 Sproutcore）

> ID：10104934
> 
> 赞同：0
> 
> 时间：2012-04-11T11:23:16.507
> 
> 标签：jquery, grails, css, sproutcore

我有一些问题。

我目前正在使用[Grails](http://grails.org/)编写 webapps 。现在我玩了一些[Sproutcore](http://sproutcore.com/)，有一些优点，比如漂亮的 ui 和带有自动 ajax/javascript 更新的简单数据绑定。

当我将 Sproutcore 与 Grails 一起使用时，是否可以使用*来自 Sproutcore 的 grails 域和服务逻辑*（而不仅仅是后端的数据库模型）？

是否还有其他“桌面感觉”、用户友好的 Web 框架可以与 grails 一起使用（或其他一些框架和语言——只要它付出了努力）？我知道有[Cappuccino](http://cappuccino.org/)、[Vaadin](https://vaadin.com/)、[ZK](http://www.zkoss.org/)和[Dojo](http://dojotoolkit.org)。但是除了卡布奇诺之外，其他的都缺少漂亮的 ui 小部件。其余的似乎适用于内部业务项目，但不适用于美容云应用。

是否可以（无需太多努力）使用 CSS3/HTML5/jQuery 增强 Grails 标准模板以达到与在 Sproutcore 应用程序中相同的感觉（原则上应该可以构建类似[Things 的东西](http://culturedcode.com/things/)）？好的起点在哪里？是否有开源应用程序可供查看？还是好的教程？

也许最好将其分成较小的问题，但我认为适合在一起......

提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:50:18.487

我认为非常适合您描述的架构是将您的 grails 组件公开为服务。

Grails 具有相当好的 REST 支持，可以将脚手架控制器操作绑定到 REST 服务，

```
static mappings = {
   "/product/$id?"(resource:"product")
} 
```

您可能必须编辑所使用的模板，但将它们更改为输出 JSON 或 SOAP 响应并将对此的支持与您最喜欢的 ajax 友好框架一起使用可能更容易。

[http://grails.org/doc/latest/guide/webServices.html#REST](http://grails.org/doc/latest/guide/webServices.html#REST)

我想云友好架构还有更多考虑因素，建议花几个小时观看这两个扩展这种架构的截屏视频：

[http://skillsmatter.com/podcast/home/change-grails](http://skillsmatter.com/podcast/home/change-grails)

[http://www.youtube.com/watch?v=axOPJbrIjkY](http://www.youtube.com/watch?v=axOPJbrIjkY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:02:12.867

您可以在 Grails 中使用任何您想要的 javascript 框架。如果您使用的是 RIA js 框架，您的 Grails 后端仍将使用域对象、服务和控制器；唯一的区别是您将从您的控制器中返回大部分 json。您不会使用太多的 GSP。

> 当我将 Sproutcore 与 Grails 一起使用时，是否可以通过 Sproutcore（而不仅仅是后端的数据库模型）使用域逻辑和服务逻辑？

这是个坏主意。服务器需要成为您的应用程序的单一事实点。业务规则需要在服务器上执行。否则有人可能会破解他们的客户端并将不良数据输入您的应用程序。

# java - 如何访问 selenium 中没有 id 属性的文本字段

> ID：10104936
> 
> 赞同：1
> 
> 时间：2012-04-11T11:23:39.953
> 
> 标签：java, selenium

我在 selenium 工作，我想访问一个文本字段并填写任何值，但该字段没有任何 id 属性，所以告诉我如何找到该字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:37:32.943

您可以使用 Cssselector 或 xpath。

你可以在谷歌上找到更多。一个有用的链接是 -

[http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:16:31.587

如果您无法将 id 添加到元素，则可以使用其他选项：

*   使用其他属性（例如名称或您拥有的任何其他属性） - 这是不可靠的，因为属性可以及时改变。例子：

    > //div[@name='some_name']

*   使用您的 HTML 布局来定位元素 - 它更不可靠，因为您的 HTML 布局可能会及时更改。例子：

    > //页脚//div[位置()=2]

为了方便编写自定义 XPath 表达式，我建议使用[FireFinder for FireBug](https://addons.mozilla.org/uk/firefox/addon/firefinder-for-firebug/) FireFox 插件。它同时支持 CSS 和 XPath 表达式，使编写表达式变得非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:23:20.287

要在文本框中输入内容，不需要 ID。您可以使用 XPath 或 CSS 来完成。

# frameworks - 对软件和基础架构支持收费的最佳方式是什么？

> ID：10104937
> 
> 赞同：1
> 
> 时间：2012-04-11T11:23:52.160
> 
> 标签：frameworks, billing

我们公司有一个内部软件开发团队，他们正在构建一套软件框架和一些基础设施（数据库托管）以供其他团队使用。由于他们没有直接向任何外部客户交付软件，他们正试图弄清楚如何退款以收回他们的成本/预算。他们正试图确定其他团队使用他们的服务的正确支付模式。因此，基本上我们将为以下资源付费：

*   使用软件框架
*   使用基础设施（服务器 - 磁盘、内存等）
*   该组中的支持人员维护基础设施
*   正在构建框架的开发人员。

这似乎是其他软件商店必须存在的一般问题，所以我想看看这里是否有一些标准或建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:35:56.363

您正在考虑在商店内建立这种关系这一事实可能非常符合我们这个时代的特征。如果您认为框架团队有用，那么以某种细粒度的方式衡量其有用性，并为团队提供保持有用的预算！

例如，让其他团队评估他们对框架中特定功能的使用和他们的愿望清单，并检查框架团队是否只处理与这些相关的部分代码。

与任何此类任意指标一样，为服务付费可能存在一些问题。例如，它鼓励其他团队不使用他们的服务：它鼓励本土基础设施、自定义代码（这样你就会患上更严重的 NIH 综合症）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:51:27.727

估计每个任务的成本怎么样？

我工作的每家公司都使用经典的**人/日**系统。

当必须完成一项任务时，人力资源成本以人/天为单位进行评估，即如果只有一个工人完成这项任务，需要多少天？

考虑到这一点，估计完成一项任务所花费的时间（通常由更有经验的人完成），并且由于您（应该）知道一个工人的成本，很容易找到完成这项任务的成本（时间估计 x 工人成本）。这样，一些非常基本和冗余的任务，例如读取新数据库、新服务器、创建新帐户……很容易产生基本的人工日成本。

为了优化预算，公司可以轻松查看最多余和最昂贵的任务，以实现自动化并降低团队的总体成本。当然，任务的自动化本身就是一个项目，需要预估。并且根据项目的生产力增益，必须进行一些优先级排序。

我认为这种成本评估的主要驱动力是拥有项目/任务和时间跟踪系统。这样就很容易产生关于耗时的统计数据。

# java - 在 JPA Hibernate 中映射队列集合

> ID：10104946
> 
> 赞同：4
> 
> 时间：2012-04-11T11:24:23.873
> 
> 标签：java, hibernate, jpa-2.0

是否可以在 JPA / hibernate 中有以下集合映射

```
@OneToMany(cascade={CascadeType.PERSIST, CascadeType.REFRESH, CascadeType.MERGE},
fetch=FetchType.LAZY,mappedBy="parent")

private Deque<Child> childrens; 
```

它抛出错误

```
Illegal attempt to map a non collection as a @OneToMany, @ManyToMany or @CollectionOfElements 
```

我正在将 JPA 2.0 与 Hibernate 3 一起使用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T18:14:04.730

不，JPA 不支持双端队列。在 JPA 2.0 规范中，这是通过以下方式解释的：

> 集合值持久字段和属性必须根据以下集合值接口之一定义，无论实体类是否遵守上述 JavaBeans 方法约定以及是否使用字段或属性访问： **java.util.Collection , java.util.Set, java.util.List[3], java.util.Map。**应用程序可以使用集合实现类型在实体持久化之前初始化字段或属性。一旦实体被管理（或分离），后续访问必须通过接口类型。

我建议添加到提供所需 Deque 功能的实体方法（或将视图作为 Deque 公开到持久列表）。其他可能性是评论中建议的自定义集合（Thor84no）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T19:58:27.697

虽然 JPA 不支持 Mikko 提到的 Deque，但您可以简单地将代码更新为 ArrayDeque，您应该一切顺利。

```
@OneToMany(cascade={CascadeType.PERSIST, CascadeType.REFRESH, CascadeType.MERGE},
fetch=FetchType.LAZY,mappedBy="parent")

private ArrayDeque<Child> childrens; 
```

# sql - 在 wordpress 中获取最近的标签

> ID：10104947
> 
> 赞同：0
> 
> 时间：2012-04-11T11:24:24.890
> 
> 标签：sql, tags, wordpress

我想从最近 10 个帖子中获取最近的标签。或者获取最近帖子中使用的最近 100 个标签。我的代码：

```
 <?php

 $tags .= "SELECT $wpdb->terms.term_id, $wpdb->terms.name, $wpdb->terms.slug
FROM $wpdb->terms
    INNER JOIN $wpdb->term_taxonomy ON ($wpdb->terms.term_id =     $wpdb->term_taxonomy.term_id)
    INNER JOIN $wpdb->term_relationships ON ($wpdb->terms.term_id = $wpdb->term_relationships.term_taxonomy_id)
    INNER JOIN $wpdb->posts ON ($wpdb->term_relationships.object_id = $wpdb->posts.ID)
WHERE $wpdb->term_taxonomy.taxonomy = 'post_tag'
ORDER BY $wpdb->posts.post_date DESC";

$tags= $wpdb->get_results($tags); // $query being the above SQL
foreach ($tags as $tag) {
if (!isset($stack[$tag->term_id]))
    $stack[$tag->term_id] = $tag;
}
print_r($stack); // should print an array of all tags, ordered by last used
 ?> 
```

它不工作。例如，没有指向标签的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:56:46.880

检查您的查询是否正确。

```
print_r($tags); 
```

看看你是否得到任何数据？这是标签的示例代码。创建查询并将其传递给 $posttags 变量以获得所需的结果。

```
<?php
$posttags = get_the_tags();
if ($posttags) {
  foreach($posttags as $tag) {
    echo $tag->name . ' '; 
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:26:26.073

How about this:

```
<?php

function my_tags_test ()
{
    ?> 
    <div style="background: white; color: black; font-size: 15px;">
    <h1 style="font-size: 100px;">my_tags_test:</h1>
    <?php

    global $wpdb;

    $sql =
    '
drop temporary table if exists last_10_posts
    ;';
    $wpdb->query ($sql);

    $sql =
    '
create temporary table last_10_posts (ID int, post_date datetime)
    ;';
    $wpdb->query ($sql);

    $sql =
    '
insert into last_10_posts
select
    ID, post_date
from
    ' . $wpdb->posts . '
order by
    post_date desc
limit 0, 10
    ;';
    $wpdb->query ($sql);

    $sql =
    '
SELECT terms.term_id, terms.name, terms.slug

FROM ' . $wpdb->terms . ' terms

INNER JOIN ' . $wpdb->term_taxonomy . ' tt
    ON (terms.term_id = tt.term_id)

INNER JOIN ' . $wpdb->term_relationships . ' tr
    ON (terms.term_id = tr.term_taxonomy_id)

INNER JOIN ' . $wpdb->posts . ' posts
    ON (tr.object_id = posts.ID)

INNER JOIN last_10_posts
    ON (last_10_posts.ID = posts.ID)

WHERE
    tt.taxonomy = \'post_tag\'

ORDER BY
    posts.post_date DESC

    ';

    $tags = $wpdb->get_results ($sql); // $query being the above SQL

    $stack = array ();

    $links = '';

    foreach ($tags as $tag)
    {
        if (!isset($stack[$tag->term_id]))
        {
            $stack[$tag->term_id] = $tag;
        }

        $links .= '&rarr; <a href="' . esc_attr (get_tag_link ($tag->term_id)) .'">' . esc_html ($tag->name) . '</a><br/>';
    }

    echo '<div style="margin: 20px; padding: 20px;">' . $links . '</div>';

    echo '<pre>' . esc_html (print_r ($stack, true)) . '</pre>'; // should print an array of all tags, ordered by last used

    ?> 
    </div>
    <?php
}

add_action ('wp_footer', 'my_tags_test');

?> 
```

# linq - Nhibernate 为 fetch 生成 OUTER JOIN

> ID：10104949
> 
> 赞同：3
> 
> 时间：2012-04-11T11:24:41.323
> 
> 标签：linq, nhibernate, join, fluent-nhibernate, linq-to-nhibernate

尽管将映射设置为`Not.Nullable()`和`Not.LazyLoad()`

出于某种原因，NH 将两次加入表，一次使用 INNER JOIN 来安抚 WHERE，第二次使用 OUTER JOIN 来选择数据。

当然，因为我们已经加入了数据，所以只使用连接表是有意义的......

```
SELECT
     ...Tables..
from Tasks taskentity0_,
 outer Cases caseentity1_,
 outer Grades gradeentit2_,
 Cases caseentity5_ 
WHERE
.... 
```

我对此的 LINQ 查询是：

```
IQueryable<TaskEntity> tasks = TaskRepo.Find(
    t => t.DueDate <= DateTime.Now
      && (t.TaskInitials == userInitials || (t.TaskInitials == "" || t.TaskInitials == null))
      && t.Team.GST.Any
                    (x => x.Initials == userInitials
                        && x.WorkType.WorkTypeCode == t.WorkType.WorkTypeCode
                        && x.Team.TeamCode == t.Team.TeamCode
                    )
      && (t.Case.CaseOnHold <= DateTime.Now || t.Case.CaseOnHold == null || (t.SingleTask == "M" || t.SingleTask == "m"))
      && (t.Case.CaseMatter.StartsWith("0") || t.Case.CaseMatter.StartsWith("9"))
                ).Fetch(t => t.Case,FetchProvider) 
```

我的参考映射：

```
 References(x => x.Case).Column("ta_c_ref").Not.Nullable(); 
```

想法？

我们正在使用存储库模式，并重新实现了 Fetch 扩展方法以这种方式工作（因此传入 FetchProvider）。

此外，`QueryOver<T>`这里不是一个选项，因为我们需要`IQueryable`..

我正在使用 NH 3.1。

对于大众：

我们不再使用 Fetch 或 LINQ，我们转移到 HQL...

```
 /// <summary>
    /// Interfaces for Fetch() statements
    /// </summary>

    public interface IFetchingProvider
    {
        IFetchRequest<TOriginating, TRelated> Fetch<TOriginating, TRelated>(IQueryable<TOriginating> query, Expression<Func<TOriginating, TRelated>> relatedObjectSelector);

        IFetchRequest<TOriginating, TRelated> FetchMany<TOriginating, TRelated>(IQueryable<TOriginating> query, Expression<Func<TOriginating, IEnumerable<TRelated>>> relatedObjectSelector);

        IFetchRequest<TQueried, TRelated> ThenFetch<TQueried, TFetch, TRelated>(IFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, TRelated>> relatedObjectSelector);

        IFetchRequest<TQueried, TRelated> ThenFetchMany<TQueried, TFetch, TRelated>(IFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, IEnumerable<TRelated>>> relatedObjectSelector);
    }

public class NhFetchingProvider : IFetchingProvider
    {
        public IFetchRequest<TOriginating, TRelated> Fetch<TOriginating, TRelated>(IQueryable<TOriginating> query, Expression<Func<TOriginating, TRelated>> relatedObjectSelector)
        {
            var fetch = EagerFetchingExtensionMethods.Fetch(query, relatedObjectSelector);
            return new FetchRequest<TOriginating, TRelated>(fetch);
        }

        public IFetchRequest<TOriginating, TRelated> FetchMany<TOriginating, TRelated>(IQueryable<TOriginating> query, Expression<Func<TOriginating, IEnumerable<TRelated>>> relatedObjectSelector)
        {
            var fecth = EagerFetchingExtensionMethods.FetchMany(query, relatedObjectSelector);
            return new FetchRequest<TOriginating, TRelated>(fecth);
        }

        public IFetchRequest<TQueried, TRelated> ThenFetch<TQueried, TFetch, TRelated>(IFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, TRelated>> relatedObjectSelector)
        {
            var impl = query as FetchRequest<TQueried, TFetch>;
            var fetch = EagerFetchingExtensionMethods.ThenFetch(impl.NhFetchRequest, relatedObjectSelector);
            return new FetchRequest<TQueried, TRelated>(fetch);
        }

        public IFetchRequest<TQueried, TRelated> ThenFetchMany<TQueried, TFetch, TRelated>(IFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, IEnumerable<TRelated>>> relatedObjectSelector)
        {
            var impl = query as FetchRequest<TQueried, TFetch>;
            var fetch = EagerFetchingExtensionMethods.ThenFetchMany(impl.NhFetchRequest, relatedObjectSelector);
            return new FetchRequest<TQueried, TRelated>(fetch);
        }
}

public static IFetchRequest<TOriginating, TRelated> Fetch<TOriginating, TRelated>(this IQueryable<TOriginating> query, Expression<Func<TOriginating, TRelated>> relatedObjectSelector, Func<IFetchingProvider> FetchingProvider)
        {
            return FetchingProvider().Fetch(query, relatedObjectSelector);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T20:41:04.157

我已经添加了对它的支持！！

[https://www.nuget.org/packages/NHibernate.Linq.InnerJoinFetch](https://www.nuget.org/packages/NHibernate.Linq.InnerJoinFetch)

享受！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T07:14:10.907

尚不支持在 NHibernate 中使用带有 linq 的内部连接。更多信息可以在这里找到：[https ://nhibernate.jira.com/browse/NH-2790](https://nhibernate.jira.com/browse/NH-2790)

# java - 在 Java 中返回一个对象

> ID：10104950
> 
> 赞同：0
> 
> 时间：2012-04-11T11:24:45.153
> 
> 标签：java, arrays, search, object, return

我一直在努力弄清楚如何返回一个对象。

我有以下对象数组。

```
ArrayList<Object> favourites; 
```

我想根据它的“描述”属性在数组中找到一个对象。

```
public Item finditem(String description) {

for (Object x : favourites) {
   if(description.equals(x.getDescription())) {
      return Object x;
   else {
      return null; 
```

有人可以告诉我如何编写这段代码。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:26:24.007

使用泛型：

```
ArrayList<Item> favourites;

public Item finditem(String description) {

  for (Item x : favourites)
    if(description.equals(x.getDescription()))
      return x;

  return null;
} 
```

或者如果你真的想要一个对象数组，方法的返回类型必须是对象：

```
public Object findItem(String description) 
```

但看起来您确实希望收藏夹成为项目的数组列表！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:30:15.827

您不能在通用对象上调用 getDescription。

您希望 ArrayList 由具有属性描述的特定类型的对象组成。

因为你有你的班级项目：

```
public class Item {
    private String description;

    public String getDescription(){
        return description;
    }

   ... other methods here
} 
```

现在你可以创建一个这种类型的 ArrayList，例如：

```
List<Item> myList = new ArrayList<Item>(); 
```

并以与您相同的方式对其进行迭代……几乎。

您的迭代代码已损坏，因为您总是只检查第一个元素，如果它不是您要查找的内容，则返回 null，您想要的是：

```
for (Item x : favourites) {
  if(description.equals(x.getDescription())) {
    return x;

return null; 
```

请注意，这样您将遍历整个列表，并且只有当您到达循环结束时，您才会返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:30:32.980

`ArrayList<Item>`或将返回类型更改为`Object`.

# php - 更新页面视图

> ID：10104952
> 
> 赞同：1
> 
> 时间：2012-04-11T11:24:47.757
> 
> 标签：php, mysql

我创建此代码以将页面视图存储在数据库中，但我现在无法更新行...

我需要检查会话和 url 是否与我需要更新行视图相同。这是代码

```
$ip = mysql_real_escape_string($_SERVER['REMOTE_ADDR']);
$browser = mysql_real_escape_string($_SERVER['HTTP_USER_AGENT']);
$referer = mysql_real_escape_string($_SERVER['HTTP_REFERER']);
$url = mysql_real_escape_string($_SERVER['REQUEST_URI']);
$session = session_id();

mysql_query("   INSERT INTO page_view(ip,url,referer,session,view) 
                    VALUES (
                    '".$ip."',
                    '".$url."',
                    '".$referer."',
                    '".$session."',
                    '1')
                    "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:29:09.800

使`url,session`pair唯一并使用[`ON DUPLICATE KEY`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)子句

```
mysql_query("INSERT INTO page_view(ip,url,referer,session,view) 
                VALUES (
                '".$ip."',
                '".$url."',
                '".$referer."',
                '".$session."',
                '1')
             ON DUPLICATE KEY UPDATE view = view +1
                "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:27:50.170

我会查询该会话的最后插入，然后检查 url 是否更改。

```
If (changed) update;
Else insert; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:32:19.027

我会在 ip、url 和 session 列上创建一个唯一索引，然后在重复键上执行插入...：

```
INSERT INTO page_view(ip,url,referer,session,view)
VALUES ('".$ip."','".$url."','".referer."','".$session."','1')
ON DUPLICATE KEY UPDATE view = view + '1'"); 
```

# android - timeout 参数对 Titanium.Network.createHTTPClient 没有任何影响

> ID：10104958
> 
> 赞同：1
> 
> 时间：2012-04-11T11:25:06.057
> 
> 标签：android, titanium, titanium-mobile, titanium-modules

我希望用户等待指定的时间（4 秒）才能连接到服务器。如果在指定的时间段内无法连接，应用程序应该被关闭。

这是我编码的内容：

```
var downloadDataReq = Titanium.Network.createHTTPClient({timeout :4000});
downloadDataReq.onload = function() { //some code }
downloadDataReq.onerror = function(event) { //some code }
var urlToDownloadData = 'http://www.google.com';
downloadDataReq.open("POST", urlToDownloadData);
downloadDataReq.send(); 
```

问题是应用程序等待修复时间（超时参数根本不起作用）。

PS：使用 Titanium 为 android 制作应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:54:35.477

尝试使用这样的方法：

```
downloadDataReq.setTimeout(4000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T14:41:01.337

对我来说，HTTP 请求的超时不能正常工作。我有非常奇怪的问题，例如：

*   如果我设置 1000 毫秒超时，它将在 2 或 3 秒后被调用。
*   如果我设置 2000 毫秒或以上的超时时间，它将永远不会被调用。

我正在使用 Android ICS 和 JB，两者都遇到了上述问题。似乎超时参数是错误的。

作为一种解决方法，我正在 onload 内部进行检查（例如：如果我正在下载文件，我将本地文件的校验和与服务器上同一文件的校验和进行比较），并且我正在使用 JavaScript 模拟超时设置超时。它的工作范围很广。

下面的代码演示了如何使用 JS 的 setTimeout 命令模拟请求超时：

```
var downloadDataReq = Titanium.Network.createHTTPClient();
downloadDataReq.onload = function() {
    clearTimeout(timeout);
    alert('loaded');
}
downloadDataReq.onerror = function(e) {
    clearTimeout(timeout);
    alert('error: ' + e.error);
}
var urlToDownloadData = 'http://10.1.1.183/maquina_local/arquivos/FirefoxPortable_12.0_PortugueseBR.paf.exe';
downloadDataReq.open("GET", urlToDownloadData);

var timeout = setTimeout(function(){
    downloadDataReq.onload = function(){
        downloadDataReq.onerror({'error': 'timeout'});
    };
    downloadDataReq.abort();
}, 4000);

downloadDataReq.send(); 
```

在超时时，我将 onload 事件更改为 onerror 之一，因为如果您尝试中止正在运行的请求，它将触发“onload”事件，而不是“onerror”。如果你不这样做，这个问题可能会给你损坏的文件（例如：一个 20mb 的文件，当请求被中止时，文件将不完整，大小小于 20mb）。

我仍在测试这个解决方案，但至少现在，它为我解决了一些错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T10:15:57.050

试试这个。

Ti.App.timeOut = 99000; //在app.js中声明

然后在您的项目中使用anyWhere。但是每次创建httpClient时都要确保。不要在代码中或整个页面中重新创建或重新定义。这对我来说很好。

//看看这个用法 var xhr = Titanium.Network.createHTTPClient({timeout:Ti.App.timeOut});

# objective-c - 为 NSView 的 NSTextFields 设置 Tab 键顺序

> ID：10104959
> 
> 赞同：3
> 
> 时间：2012-04-11T11:25:14.997
> 
> 标签：objective-c, cocoa, nsview, nstextfield, first-responder

我正在尝试在给定的 NSView 上设置 NSTextFields 的标签顺序。据我了解，我必须通过将 nextKeyView 插座设置为下一个 NSTextField 来将 NSTextFields 与 InterfaceBuilder 连接起来。我这样做了 - 没有效果。当我按下制表符时，在其中一个 NSTextFields 中它只是失去焦点，就是这样。无论我多久按一次制表符，其他 NSTextField 都没有重新获得焦点。

我还读到我需要设置窗口的 initialFirstResponder。在这种特殊情况下，我认为我不能这样做，因为我的 AppDelegate 调用了一个 NSView，它又充当了一个带有许多不同按钮的菜单区域，每个按钮调用不同的 NSView，这些 NSView 作为不同视图的子视图加载. 因此 AppDelegate 无法知道当前加载了哪个 NSView。

有没有办法在 NSView 基础上设置 NSTextFields 的标签顺序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:40:13.207

您必须禁用窗口中键循环的自动重新计算。见[`-[NSWindow setAutorecalculatesKeyViewLoop:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BABJHEAD)。

编辑添加：这也可以在 Interface Builder 中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:23:58.507

这对您的情况可能有帮助，也可能没有帮助，但是在处理另一个 NSView 中的 NSView 时，以下内容对我有用。我有两个垂直的 NSTextField 堆栈。而不是水平遍历，我需要先按下一个堆栈然后再下一个......所以我将两个垂直堆栈中的每一个嵌入到它们自己的盒子中（在 IB 中，首先选择你的项目，编辑器>嵌入>盒子）。完美运行。如果您不想要一个盒子的外观，您可以清除它的标题并将其边框类型设置为无：不可见的盒子。

# python - 在 Python 中将 char 数组类型转换或访问为整数数组

> ID：10104960
> 
> 赞同：4
> 
> 时间：2012-04-11T11:25:33.297
> 
> 标签：python, parsing

我在 Python 中有一个 char 数组，它是从文件中读取的，例如

```
char_array = [0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f] 
```

我如何将其转换/类型转换/访问到整数数组，例如

```
int_array[0] = 0x03020100
int_array[1] = 0x07060504
int_array[2] = 0x0b0a0908
int_array[3] = 0x0f0e0d0c 
```

类似于在 C/C++ 中如何将字节数组作为整数访问，即将 unsigned char * 类型转换为 unsigned long *。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:36:02.117

可能是这样的：

```
>>> def toInt(arr, idx):
...     res = 0
...     for i in xrange(4):
...       res |= (arr[idx*4 + i] << 8*i)
...     return res
... 

>>> '%08x' % toInt(char_array, 0)
'03020100'

>>> '%08x' % toInt(char_array, 1)
'07060504' 
```

也许有一个更优雅的解决方案使用`struct`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:41:24.923

不确定这是否是最有效的方法，但看起来很优雅：

```
from itertools import izip_longest
from struct import pack_into, unpack_from

def convert(bytes):
    it = iter(bytes)
    arr = bytearray(4)
    buf = buffer(arr)
    # a grouping trick (see itertools examples)
    for group in izip_longest(*[it]*4, fillvalue=0):
        # pack 4 bytes, then unpack high-endian
        pack_into('bbbb', arr, 0, *group)            
        intval, = unpack_from('<i', buf)
        yield hex(intval)

char_array = [0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f]

print list(convert(char_array))
# ['0x3020100', '0x7060504', '0xb0a0908', '0xf0e0d0c'] 
```

# visual-studio-2012 - Expression Blend 4（Studio 11 测试版）+ .net 4.5 - 无设计编辑器

> ID：10104962
> 
> 赞同：2
> 
> 时间：2012-04-11T11:25:43.617
> 
> 标签：visual-studio-2012, .net-4.5, expression-blend-4

我一直在试用 Studio 11，发现 Expression Blend 存在问题。似乎如果我有一个 Studio 11 WPF 项目并将目标框架设置为“.NET Framework 4”，Blend 将显示设计视图，但如果我将目标框架设置为“.NET Framework 4.5”，它只会显示 XAML （没有设计视图）。

有没有人看到这个问题并且有解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:37:26.890

您使用 Expression Blend 4 标记了此问题。Blend 4 不适用于 Visual Studio 11 Beta。您需要使用 Visual Studio 11 Beta 打包的 Blend 版本。在[发布公告](http://blendinsider.com/technical/visual-authoring-for-the-windows-8-consumer-preview-with-blend-and-visual-studio-2012-02-29/)中，他们确实说：

> 请注意，在 Visual Studio 测试版中，对 Windows 8 的 XAML 创作支持与 HTML 创作支持的稳定性和完整性水平不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:41:27.467

4.5有一个新的[预览版](http://blendinsider.com/technical/announcing-blend-sketchflow-preview-for-visual-studio-2012-2012-08-15/)

我正在为 VS11 使用所有 RTM 位，并在将目标框架切换到 4.5 时看到了同样的问题——我认为这是有道理的，因为 Blend 4 不知道如何加载 4.5 类型。

# ruby-on-rails - Ruby on Rails 解密

> ID：10104964
> 
> 赞同：0
> 
> 时间：2012-04-11T11:25:59.163
> 
> 标签：ruby-on-rails, ruby, encryption

以下函数在 PHP 中完美运行。如何在 Ruby on Rails 中翻译它。

请注意，privateKey 和 iv 都是 32 个字符长。

```
mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $privateKey, base64_decode($enc), MCRYPT_MODE_CBC, $iv) 
```

我尝试在 Ruby 中使用以下内容，但遇到了错误的解密错误。

```
cipher = OpenSSL::Cipher.new('aes-256-cbc')

cipher.decrypt
cipher.key = privateKey
cipher.iv = iv

decrypted = '' << cipher.update(encrypted) << cipher.final 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:31:47.357

这里有一些对我有用的代码：

```
 def decrypt_data(data, pwd, iv)
    encrypted_data = Base64.decode64(data)
    aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")
    aes.decrypt
    aes.key = Digest::MD5.hexdigest(pwd)
    aes.iv = iv
    result = aes.update(encrypted_data) + aes.final 
end 
```

在我的示例中，密码使用 MD5 加密。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:35:41.587

您在 php 示例中对其进行 base64 解码。你也在红宝石中这样做吗？

```
require "base64"
Base64.decode64(encrypted) 
```

除此之外，代码看起来对我来说是正确的。

# php - 完整当前 URL 的 HTML 标记 - IonCube

> ID：10104965
> 
> 赞同：1
> 
> 时间：2012-04-11T11:26:02.437
> 
> 标签：php, html, url, options, ioncube

我正在使用 IonCube 创建一个网站。我可以在 HTML 页面模板中使用一些 PHP 编码，但是，我想知道当我单击它时如何获取完整的 URL 和链接。例如，我当前的 URL 是：

```
http://example.com/site_search.php?option_1=1&option_2=1 
```

当我单击一个链接时，它会将我引导到另一个添加的选项，因此结果将是：

```
http://example.com/site_search.php?option_1=1&option_2=1&option_3&option_4=8 
```

如您所见，这些是选项，用户可以选择任何内容。

感谢您的帮助 - 谢谢

# java - 选择了 Android listview 数组适配器

> ID：10104966
> 
> 赞同：2
> 
> 时间：2012-04-11T11:26:12.807
> 
> 标签：java, android, listview, layout

我正在尝试将上下文操作模式添加到列表视图，但我在选择时遇到了一些问题，如果我做出`List1.setSelection(position)`它不会选择任何东西，如果我`List1.setItemChecked(position, true)`让它工作但它只会改变字体颜色很少，我希望它改变背景或更值得注意的东西，有没有办法检测选择并手动改变背景，或者我错过了什么？

名单：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <ListView
         android:id="@+id/list1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:choiceMode="singleChoice"
      android:drawSelectorOnTop="false">
    </ListView>
</RelativeLayout> 
```

适配器：

```
public class ServicesRowAdapter extends ArrayAdapter<String[]> {
    private final Activity context;
    private final ArrayList<String[]> names;
    static class ViewHolder {
        public TextView Id;
        public TextView Date;
        public RelativeLayout statusbar,bglayout;
    }

    public ServicesRowAdapter(Activity context, ArrayList<String[]> names) {
        super(context, R.layout.servicesrowlayout, names);
        this.context = context;
        this.names = names;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.servicesrowlayout, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.Id = (TextView) rowView.findViewById(R.id.idlabel);
            viewHolder.Date = (TextView) rowView.findViewById(R.id.datelabel);
            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();

        holder.Date.setText(names.get(position)[2]);
        holder.Id.setText(names.get(position)[1]);
        return rowView;
    }

} 
```

使用布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/idlabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:gravity="right"
        android:text="@+id/idlabel"
        android:textSize="20dp"
        android:width="70dp" >

    </TextView>
        <TextView
        android:id="@+id/datelabel"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/datelabel"
        android:textSize="20dp"
        android:layout_marginLeft="90dp" >
    </TextView>

</RelativeLayout 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:36:03.730

这是因为在触摸模式下没有焦点或选择。使用选中状态，您走在正确的轨道上。您只需要使用具有不同状态的可绘制状态。

脚步：

1）在你的 row_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:background="@drawable/item_selector"
> 
```

2）像这样在您的可绘制文件夹中创建一个新的xml文件（名称与您在行布局中使用的名称匹配）（请注意，我设置了一个color.xml文件，因此我可以使用@color/color，如果您难道你不能简单地把一个十六进制颜色代码放在那里）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:state_activated="true" 
        android:drawable="@color/blue" />
</selector> 
```

就是这样。它不是很直观，但是当您启用选中状态时，“激活”基本上意味着“选中”。

通过该设置（并启用列表行可检查），您现在将在处于选中状态时将背景从通常的任何颜色更改为蓝色。添加代码以在 onTouch 或 onClick 中设置该状态，然后一切就绪。背景将保持这种状态，直到您触摸另一个项目。

# uitextview - 即使启用了编辑模式，如何隐藏文本视图的键盘

> ID：10104972
> 
> 赞同：0
> 
> 时间：2012-04-11T11:26:27.157
> 
> 标签：uitextview, uikeyboard

> **可能重复：**
> [如果启用编辑模式，如何禁用 textview 的 uikeyboard](https://stackoverflow.com/questions/10105619/how-to-disable-uikeyboard-of-textview-if-the-editing-mode-enabled)

如何禁用或隐藏 UITextView 的键盘。

即使启用了编辑模式。

# android - 对象动画师动画后视图切换器的奇怪问题

> ID：10104975
> 
> 赞同：0
> 
> 时间：2012-04-11T11:26:48.907
> 
> 标签：android, android-animation, viewswitcher

我有两个 LinearLayout 视图，其中包含许多用于输入用户信息（姓名、电子邮件地址等）的编辑文本和复选框。当这些字段之一的验证失败时，将显示一个消失的文本视图，显示验证错误。

我已将两个布局包含在 ViewSwitcher 中，并使用 ObjectAnimator 类在两个视图之间进行动画处理。（由于代码需要支持旧版本的 Android，我实际上为此使用了 Nineoldandroids 向后兼容库）。

大部分工作是在我的 switchToChild 方法中完成的。

如果我翻转视图两次以上，我就会开始遇到奇怪的错误。

首先，虽然显示了视图动画器的正确子视图，但似乎另一个视图具有焦点，我可以单击当前视图下方的视图。我通过在第一个动画的末尾添加 viewSwitcher.bringChildToFront 解决了这个问题。

但是，当我这样做并在第二个视图上执行验证时，我现在设置为可见的“已消失”视图不会显示（好像永远不会重新测量线性布局）。这是 XML 文件的子集：

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/TitleBar"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbarStyle="outsideOverlay"
    android:scrollbars="vertical" >

    <ViewSwitcher
        android:id="@+id/switcher"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/page_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

        <!-- Lots of subviews here -->

        <LinearLayout
            android:id="@+id/page_2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" > 
```

这是在视图之间翻转的主要方法：

```
private void switchToChild(final int child) {
  final ViewSwitcher viewSwitcher = (ViewSwitcher) findViewById(R.id.switcher);
  if (viewSwitcher.getDisplayedChild() != child) {
    final Interpolator accelerator = new AccelerateInterpolator();
    final Interpolator decelerator = new DecelerateInterpolator();
    final View visibleView;
    final View invisibleView;
    switch (child) {
      case 0:
        visibleView = findViewById(R.id.page_2);
        invisibleView = findViewById(R.id.page_1);
        findViewById(R.id.next).setVisibility(View.VISIBLE);
        findViewById(R.id.back).setVisibility(View.GONE);
        break;
      case 1:
      default:
        visibleView = findViewById(R.id.page_1);
        invisibleView = findViewById(R.id.page_2);
        findViewById(R.id.back).setVisibility(View.VISIBLE);
        findViewById(R.id.next).setVisibility(View.GONE);
        break;
    }
    final ObjectAnimator visToInvis = ObjectAnimator.ofFloat(visibleView, "rotationY", 0f, 90f).setDuration(250);
    visToInvis.setInterpolator(accelerator);

    final ObjectAnimator invisToVis = ObjectAnimator.ofFloat(invisibleView, "rotationY", -90f, 0f).setDuration(250);
    invisToVis.setInterpolator(decelerator);

    visToInvis.addListener(new AnimatorListenerAdapter() {

      @Override
      public void onAnimationEnd(Animator anim) {
        viewSwitcher.showNext();
        invisToVis.start();
        viewSwitcher.bringChildToFront(invisibleView); // If I don't do this the old view can have focus

      }
    });
    visToInvis.start();

  }
} 
```

有没有人有任何想法？这真的让我很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:25:40.553

看起来最好的解决方案是根本不使用视图切换器，而是通过在两个页面周围声明一个 FrameLayout 并将第二页的可见性设置为消失来有效地创建我自己的一个。

switchToChild 方法（我可能应该重命名以切换到页面并实际传递 1 或 2 值）只是将适当的视图设置为在动画期间可见：

```
private void switchToChild(final int child) {
  final Interpolator accelerator = new AccelerateInterpolator();
  final Interpolator decelerator = new DecelerateInterpolator();
  final View visibleView;
  final View invisibleView;
  switch (child) {
  case 0:
    visibleView = findViewById(R.id.page_2);
    invisibleView = findViewById(R.id.page_1);
    findViewById(R.id.next).setVisibility(View.VISIBLE);
    findViewById(R.id.back).setVisibility(View.GONE);
    break;
  case 1:
  default:
    visibleView = findViewById(R.id.page_1);
    invisibleView = findViewById(R.id.page_2);
    findViewById(R.id.back).setVisibility(View.VISIBLE);
    findViewById(R.id.next).setVisibility(View.GONE);
    break;
  }
  if (invisibleView.getVisibility() != View.VISIBLE) {
    final ObjectAnimator visToInvis = ObjectAnimator.ofFloat(visibleView, "rotationY", 0f, 90f).setDuration(250);
    visToInvis.setInterpolator(accelerator);

    final ObjectAnimator invisToVis = ObjectAnimator.ofFloat(invisibleView, "rotationY", -90f, 0f).setDuration(250);
    invisToVis.setInterpolator(decelerator);

    visToInvis.addListener(new AnimatorListenerAdapter() {
      @Override
      public void onAnimationEnd(Animator anim) {
        visibleView.setVisibility(View.GONE);
        invisibleView.setVisibility(View.VISIBLE);

        invisToVis.start();

      }
    });
    visToInvis.start();
  }

} 
```

# java - Java中TCP服务器之间的相互通信

> ID：10104976
> 
> 赞同：0
> 
> 时间：2012-04-11T11:26:49.787
> 
> 标签：java, sockets, tcp, load-balancing

我有一个使用套接字编程的应用程序，有这个（图像）场景。 ![服务器间通信](../Images/d5916502f1b6d5df07dda10dd5e9dc18.png) 客户端数量将尝试连接广播服务器。现在我在这里通过 LVS（负载均衡器）管理负载。因此，如图所示的示例，假设 200 个客户端希望登录以进行广播，他们将作为服务器 1 上的 100 个用户和服务器 2 上的另外 100 个用户分布。客户端将使用 TCP 连接连接到服务器。

现在我在arraylist中维护服务器端的用户信息，这些信息将存储在堆内存中，现在的问题是如果客户端希望向所有登录用户广播，但该特定客户端已登录服务器1。所以客户端不会能够从服务器 2 广播另外 100 个用户。因为两个服务器都不知道彼此的状态。

请建议我以您想要的任何方式解决这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:36:20.750

让两台服务器相互登录并安排将广播转发到另一台服务器，然后再转发到该服务器的客户端。

# c# - 通过 PHP 脚本隧道连接到 MySQL

> ID：10104982
> 
> 赞同：0
> 
> 时间：2012-04-11T11:27:05.483
> 
> 标签：c#, php, mysql, winforms, tunnel

这是问题，我需要从我的 C# 应用程序连接到远程 MySQL 数据库，问题是 MySQL 实例将阻止对除 localhost 之外的所有 IP 的所有访问，这不能更改，因为它太多的安全问题。

问题是，是否可以通过隧道连接到服务器上托管的 php 脚本，这将充当 mysql 连接。

有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:49:11.473

SQLYog（一个 mysql 管理 GUI 实用程序）已经有这个 php 隧道脚本和它自己的自定义 API，所以如果你考虑自己编写它，最好有交叉支持。请参阅[是否有任何好的通用 PHP MySQL HTTP 隧道？](https://stackoverflow.com/questions/2890170/is-there-any-good-universal-php-mysql-http-tunnel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:31:27.443

是的，只需创建一个简单的 PHP 脚本，它将为您提供所需的输出，并使用从 c# 应用程序到该 php 脚本的 http 请求来获取数据 - 基本上，您将构建一个非常简单的 REST API（带身份验证）

ps 我看不出这会比 SSH 隧道更安全

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:20:17.613

我最终选择了一个 SSH 端口隧道并实现了我需要做的事情。

# javascript - javascript onmouseover 隐藏一个 div 块

> ID：10104985
> 
> 赞同：0
> 
> 时间：2012-04-11T11:27:14.530
> 
> 标签：javascript, html, css

所以这是我到目前为止的代码：

JS：

```
 <script type="text/javascript">
            function Hide(srcField)
            {
                var x = srcField.getAttribute('name');
                var string = new RegExp("hide_ID",'gi');

                switch (x)
                {
                    case "1":
                    var dataRows= document.getElementsByID("obrazovanje");
                    alert (dataRows[0].innerHTML);
                    dataRows[0].className.replace('',string);
                    break;
                    case "2":
                    var dataRows= document.getElementsByID("rad_iskustvo");
                    dataRows[0].className.replace('',string);
                    break;
                    case "3":
                    var dataRows= document.getElementsByID("strani_jezici");
                    dataRows[0].className.replace('',string);
                    break;
                    case "4":
                    var dataRows= document.getElementsByID("znanja_vjestine");
                    dataRows[0].className.replace('',string);
                    break;
                    case "5":
                    var dataRows= document.getElementsByID("osobine_interesi");
                    dataRows[0].className.replace('',string);
                    break;
                }
            }
    </script> 
```

CSS：

```
.hide_ID,
{
display:none
} 
```

HTML：

```
 <a name="1"><h4><span name="1" onmouseover="Hide(this)">OBRAZOVANJE:</span></h4></a>

    <div ID="obrazovanje">
    <ul>
    <li>2001.-2005\.  elektrotehnicar</li>
    <li>2009.-2012\.   racunarstvo</li>
    </ul>
    </div> 
```

这个想法是，当我将鼠标悬停在 h4 中的标题上时，我想隐藏 div 块，但它似乎并没有隐藏它......有什么想法吗？我开始使用替换，但它仍然不起作用，在此之前它只是 'dataRows[0].className = "hide_ID"' 但那也不起作用。

编辑1：

所以我将JS更改为：

```
 var x = srcField.getAttribute('name');

                switch (x)
                {
                    case "1":
                    var dataRow= document.getElementByID("obrazovanje");
                    dataRow.className += "hide_ID";
                    break; 
```

JS的其余部分也被编辑了，但我觉得不需要全部粘贴）但仍然没有结果。

也试过改成但现在的结果`display:none`。`display:block`

编辑2：

JS 现在看起来像这样：

```
 function Hide(id)
            {
                switch (id)
                {
                    case "obrazovanje":
                    var dataRow= document.getElementByID("obrazovanje");
                    if ( dataRow.className.indexOf('hide_ID') == -1 ) dataRow.className += ' hide_ID';
                    else dataRow.className = 'obrazovanje';
                    break;
... 
```

html是：

```
 <a name="1"><h4 class="menu" onmouseover="Hide('obrazovanje')">OBRAZOVANJE:</h4></a>

    <div ID="obrazovanje" class="content">
    <ul>
    <li>2001.-2005\. elektrotehnicar</li>
    <li>2009.-2012\.   racunarstvo</li>
    </ul>
    </div> 
```

而且它仍然不会让步...

最终的：

这有效：

JS：

```
 <script type="text/javascript">
        function Hide(id)
            {
                switch (id) {
                        case 1:
                            document.getElementById("1").className = "hide_ID";
                            break;
                        case 2:
                            document.getElementById("2").className = "hide_ID";
                            break;
                        case 3:
                            document.getElementById("3").className = "hide_ID";
                            break;
                        case 4:
                            document.getElementById("4").className = "hide_ID";
                            break;
                        case 5:
                            document.getElementById("5").className = "hide_ID";
                            break;
                    }

            }

        function Show(id)
            {
                switch (id) {
                    case 1:
                        document.getElementById("1").className = "1";
                        break;
                    case 2:
                        document.getElementById("2").className = "2";
                        break;
                    case 3:
                        document.getElementById("3").className = "3";
                        break;
                    case 4:
                        document.getElementById("4").className = "4";
                        break;
                    case 5:
                        document.getElementById("5").className = "5";
                        break;
            }
        }
    </script> 
```

HTML：

```
 <a name="1_a"><h4 class="menu" onmouseover="Hide(1)" onmouseout="Show(1)">OBRAZOVANJE:</h4></a>

    <div ID="1" class="content">
    <ul>
    <li>2001.-2005\.  elektrotehnicar</li>
    <li>2009.-2012\.   racunarstvo</li>
    </ul>
    </div> 
```

CSS：

```
.hide_ID
{
display:none
} 
```

谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:48:19.933

据我了解，您的目标是在 h4 元素悬停时隐藏关联的 div 标签。一种方法是结合使用 javascript、css 和命名约定。考虑...

```
<script type="text/javascript">
function Hide(id) {
    var elt = document.getElementById('obrazovanje');
    if ( elt.className.indexOf('hide_ID') == -1 ) {
        elt.className += ' hide_ID'; // from your css example
    } else {
        elt.className = '';
    }
}
/* In jQuery as mentioned in other answers it's even easier (and offers some other cool ways too (highly recommended if it fits your purposes) */
 function jHide(id) {
     $('#' + id ).toggleClass('hide_ID');
 }
</script>

<h4 class="menu" onmouseover="Hide('obrazovanje');">obrazovanje</h4>

...
<div id="obrazovanje" class="content">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:20:10.443

试试这个。并根据您的要求更改 switch case 语句。

```
switch (x) {
        case "1":
            document.getElementById("obrazovanje").className += "hide_ID";
            break;
        case "2":
            document.getElementById("rad_iskustvo").className += "hide_ID";
            break;
        case "3":
            document.getElementById("strani_jezici").className += "hide_ID";
            break;
        case "4":
            document.getElementById("znanja_vjestine").className += "hide_ID";
            break;
        case "5":
            document.getElementById("osobine_interesi").className += "hide_ID";
            break;
    } 
```

用这种风格

```
.hide_ID
{
display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:30:34.733

如果您可以使用 jQuery，请使用`$("#divname").addClass("hide_ID");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:35:16.377

而不是用 reg exp 替换 className 尝试将新类附加到 className 字符串。getElementById() 也返回单个 html 实例。并且 id 属性对于整个文档必须是唯一的。

```
var dataRows= document.getElementById("obrazovanje");
dataRows.className += " hide_ID" 
```

# codeigniter - 在 codeigniter 中使用 am/pm 检索日期格式

> ID：10104986
> 
> 赞同：0
> 
> 时间：2012-04-11T11:27:14.477
> 
> 标签：codeigniter

我已将日期转换为我的当地时间，如下所示：

```
$this->date_string = "%Y/%m/%d %h:%i:%s";
  $timestamp = now();
  $timezone = 'UP45';
  $daylight_saving = TRUE;
  $time =  gmt_to_local($timestamp, $timezone, $daylight_saving);
$this->updated_date = mdate($this->date_string,$time); 
```

我将此字段存储到数据库中。

现在在检索时我想要这样的格式：“11-04-2011 4:50:00 PM”

我用过这段代码：

```
$timestamp = strtotime($rs->updated_date);
$date1 = "%d-%m-%Y %h:%i:%s %a";
$updat1 = date($date1,$timestamp); 
```

但这只会给我

```
"11-04-2011 4:50:00 AM" 
```

但我把它存储起来就像它是 PM 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:50:15.970

可能会被否决，但会尝试一下。是因为 MySQL 以 24 小时格式存储它吗？（假设您使用的是 datetime 字段类型）

也许这将有助于 [将 mysql TIME 从 24 HR 转换为 AM/PM 格式](https://stackoverflow.com/questions/173005/converting-mysql-time-from-24-hr-to-am-pm-format) ，如果没有的话。

# jquery - 简单的搜索引擎问题

> ID：10104987
> 
> 赞同：0
> 
> 时间：2012-04-11T11:27:16.120
> 
> 标签：jquery

简单的搜索引擎问题..

我正在创建一个简单的搜索引擎，但我无法弄清楚如何去做。所以这就是我尝试过的。

我需要根据名字/姓氏获得结果..

JSFiddle：http: [//jsfiddle.net/WSPbP/](http://jsfiddle.net/WSPbP/)

## JS

```
$(document).ready(function() {

    $('#sbutn').click(function() {
        $v = $('#searchbox').val();
        console.log($('#myConnections >div').find("div:contains("+$v+")"));
    });
}); 
```

## HTML

```
<div id="searchelement">
    <div class="search"><input type="text" name="search" id="searchbox" value="" /></div>
    <div class="searchbutton" id="sbutn"><button type="button">Search</button></div>
</div>
</br>
<div id="myConnections">

    <div class="left" style="width:100px; height:100px;">
        <img style="width:70px; height:70px;" src="picture1.jpg" alt=""><br>
    person1_xyz         

    </div>

    <div class="left" style="width:100px; height:100px;">
        <img style="width:70px; height:70px;" src="picture2.jpg" alt=""><br>
    person2 abc         

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:35:58.723

您缺少引用的值`:contains`

```
$(document).ready(function() {
   $('#sbutn').click(function() {
      $v = $('#searchbox').val();
      console.log($('#myConnections').find("div:contains('"+$v+"')").text());
   });
});​ 
```

[演示](http://jsfiddle.net/WSPbP/7/)

# ruby - 在Ruby中生成目录的json数组？

> ID：10104990
> 
> 赞同：0
> 
> 时间：2012-04-11T11:27:42.660
> 
> 标签：ruby, jekyll

我正在尝试编写一个 Jekyll 插件，它在 json 文件的目录中生成一组页面。因此，对于包含 foo.html 的目录和包含 bar.html 的子目录 foo，它会生成“foo, /foo/bar”。我对Ruby完全陌生，somone有什么指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:50:07.857

[您可以在Ruby 的 Dir 类](http://www.ruby-doc.org/core-1.9.3/Dir.html)中使用 glob 和通配符。您可以使用类似于 .html 的内容从当前目录递归地获取一组 .html 文件`files = Dir['./**/*.html']`。

要生成 JSON，您首先要确保使用您的插件的人可以访问 JSON 库 ( `require 'json'`)，然后`#to_json`在您的 files 数组上使用 helper 方法：`files.to_json`

# android - 无法从其他域访问 php 文件

> ID：10104992
> 
> 赞同：5
> 
> 时间：2012-04-11T11:27:48.017
> 
> 标签：android, eclipse, jquery, jquery-mobile, phonegap-plugins

我在 Eclipse 中用 JQuery Mobile 和 PhoneGap 编写了一个 android 移动应用程序。在应用程序中，我调用 jquery ajax 来加载来自其他域的数据列表。

我的 jquery ajax 调用代码是：

```
$.ajax({
            类型：“发布”，
            网址：WEBSERVICE_URL，
            异步：假，
            数据：数据字符串，
            数据类型：'json'，
            跨域：是的，
            成功：函数（数据）{
                登录数据 = 新对象（数据）；
                hideActivityIndi​​gator();
                if(loginData.success == "true"){
                    $.mobile.changePage("#selectionScreen", "slide", false, true);
                } 别的 {
                    $("#message_ajax").html("无效的用户名/密码。");
                }
            },
            错误：函数（xhr，ajaxOptions，抛出错误）{
                警报（xhr.status）；
                警报（抛出错误）；
                hideActivityIndi​​gator();
            }
        });

```

变量“WEBSERVICE_URL”具有其他域 php 服务 url。在“pageview”事件上执行上述代码时，我收到以下错误

```
错误：NETWORK_ERR：XMLHttpRequest 异常 101
```

是否有任何解决方案可以从 JQuery Mobile + PhoneGap 中的其他域访问服务......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:32:18.237

我认为[这](http://fettig.net/weblog/2005/11/28/how-to-make-xmlhttprequest-connections-to-another-server-in-your-domain/)可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:38:49.267

如果您使用的是 Phonegap/Cordova，您应该能够调用跨域 Web 服务。您使用的是模拟器还是电话？

至于模拟器，我推荐 Ripple，您可以将其添加为[Chrome 扩展程序](https://chrome.google.com/webstore/detail/geelfhphabnejjhdalkjhgipohgpdnoc)或下载[独立版本](https://bdsc.webapps.blackberry.com/html5/download/ripple)