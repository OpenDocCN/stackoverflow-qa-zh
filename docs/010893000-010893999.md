# StackOverflow 问答 10893000-10893999

# svg - D3 变换缩放和平移

> ID：10893004
> 
> 赞同：41
> 
> 时间：2012-06-05T07:01:36.333
> 
> 标签：svg, d3.js

我试图了解转换在 D3 中是如何工作的，但我想我没有明白。

比例会改变 SVG 对象的大小吗？意思是如果我给出一个大数字，对象的大小会看起来更大？翻译是否将对象从一个地方移动到不同的地方？我试过了，但它并没有像我想象的那样工作。

你能向我解释一下它应该如何工作吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-09T14:10:22.563

^(Scott Murray 对此[1])写了一个很好的解释。例如，对于代码片段：

```
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + h + ")")
    .call(xAxis); 
```

他解释使用以下内容：

> 请注意，我们使用 attr() 将变换作为 g 的属性应用。SVG 变换非常强大，可以接受多种不同类型的变换定义，包括缩放和旋转。但是我们在这里保持简单，只有一个平移变换，它只是将整个 g 组上下推了一些。
> 
> 平移变换用 translate(x,y) 的简单语法指定，其中 x 和 y 显然是平移元素的水平和垂直像素数。

[1]：来自第 8 章，“清理” [Web 的交互式数据可视化](http://alignedleft.com/work/d3-book)，它曾经免费提供，现在需要付费。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-05T09:10:19.260

转换是 SVG 转换（有关详细信息，请查看[标准](http://www.w3.org/TR/SVG/coords.html)；这里有一些[示例](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform)）。基本上，缩放和平移将各自的变换应用到坐标系，这在大多数情况下应该可以按预期工作。但是，您可以应用多个变换（例如先缩放然后平移），然后结果可能不是您所期望的。

使用变换时，请记住它们会变换坐标系。原则上，你说的是真的——如果你对一个对象应用大于 1 的比例，它会看起来更大，并且平移会将它移动到相对于其他对象的不同位置。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-23T19:18:28.403

我意识到这个问题已经相当老了，但想分享一个关于组变换、路径/形状和相对定位的快速演示，供其他在这里找到更多信息的人使用：

[http://bl.ocks.org/dustinlarimer/6050773](http://bl.ocks.org/dustinlarimer/6050773)

# reverse-proxy - 将 localhost 上的 Squid 配置为反向代理错误

> ID：10893005
> 
> 赞同：0
> 
> 时间：2012-06-05T07:01:45.693
> 
> 标签：reverse-proxy, squid

我想在我的 localhost 机器上的端口 3128 上以反向代理模式安装 squid 3.1.19，我在端口 8080 上使用 Nginx 作为我的 localhost 上的网络服务器...我安装了 squid，并更改了它的配置文件..但是在运行 squid 时，我不断收到错误消息

```
FATAL: Bungled squid.conf line 65: http_port 3128 accel defaultsite=localhost no-vhost
Squid Cache (Version 3.1.19): Terminated abnormally.
CPU Usage: 0.020 seconds = 0.012 user + 0.008 sys
Maximum Resident Size: 12784 KB
Page faults with physical i/o: 0 
```

我的 squid.conf 文件看起来像这样。我不知道这个错误的根源。谷歌搜索也没有帮助。

```
#
# Recommended minimum configuration:
#
acl manager proto cache_object
acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1

# Example rule allowing access from your local networks.
# Adapt to list your (internal) IP networks from where browsing
# should be allowed
acl localnet src 10.0.0.0/8 # RFC1918 possible internal network
acl localnet src 172.16.0.0/12  # RFC1918 possible internal network
acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
acl localnet src fc00::/7       # RFC 4193 local private network range
acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines

acl SSL_ports port 443
acl Safe_ports port 80      # http
acl Safe_ports port 21      # ftp
acl Safe_ports port 443     # https
acl Safe_ports port 70      # gopher
acl Safe_ports port 210     # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280     # http-mgmt
acl Safe_ports port 488     # gss-http
acl Safe_ports port 591     # filemaker
acl Safe_ports port 777     # multiling http
acl CONNECT method CONNECT

#
# Recommended minimum Access Permission configuration:
#
# Only allow cachemgr access from localhost
http_access allow manager localhost
http_access deny manager

# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on "localhost" is a local user
#http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
http_access allow localnet
http_access allow localhost

# And finally deny all other access to this proxy
http_access deny all

# Squid normally listens to port 3128

http_port 3128 accel defaultsite=localhost no-vhost
cache_peer localhost parent 8080 0 no-query originserver name=myAccel

acl our_sites dstdomain localhost
http_access allow our_sites
cache_peer_access myAccel allow our_sites
cache_peer_access myAccel deny all              

# Uncomment and adjust the following to add a disk cache directory.
cache_dir ufs /usr/local/squid/var/cache 100 16 256

# Leave coredumps in the first cache dir
coredump_dir /usr/local/squid/var/cache

# Add any of your own refresh_pattern entries above these.
refresh_pattern ^ftp:       1440    20% 10080
refresh_pattern ^gopher:    1440    0%  1440
refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
refresh_pattern .       0   20% 4320 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:05:29.887

选项 no-vhost 不存在。如果您不想要虚拟主机，请不要在该行中写入该选项。

# authentication - 在模态中显示错误

> ID：10893015
> 
> 赞同：0
> 
> 时间：2012-06-05T07:02:57.123
> 
> 标签：authentication, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap 中的模式进行弹出登录和注册。所以我想做，当有人输入错误的输入时，它不应该重定向到另一个页面，而是显示这个带有错误的登录模式。

所以我有这个用于弹出登录的代码：

```
<a class="btn" data-toggle="modal" href="#login"">Login</a>

<div class="modal hide" id="login">   
 <%= render :template => "devise/sessions/new" %>
</div> 
```

有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:28:15.053

当登录凭据与模式 JavaScript 方法错误时，您应该激活模式：`$("div.modal").modal(options);`其中 options 是这样的 JSON 对象

```
 {
        backdrop: true,      // Includes a modal-backdrop element. Alternatively, specify static for a backdrop which doesn't close the modal on click.
        keyboard: true,      // Closes the modal when escape key is pressed
        show:     true       // Shows the modal when initialized.
    } 
```

# sql - SQL '-->' 替换

> ID：10893017
> 
> 赞同：0
> 
> 时间：2012-06-05T07:03:01.160
> 
> 标签：sql

我有动态表，所以我需要执行这个查询

```
DECLARE @SQL nvarchar(max)

SET @SQL = 'select x, y from exTable where z like 'example' '   

EXEC (@SQL) 
```

我有问题，因为无法将“示例”添加到 @sql 变量中。

我尝试添加“示例”；但它不起作用。

任何建议我如何从 &apos ; --> '

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:07:26.273

您可以通过额外的引号引用 SQL 中的引号：

```
SET @SQL = 'select x, y from exTable where z like ''example'' ' 
```

# authentication - 使用 OAuth 2.0 和 Userinfo API 向 Google 进行身份验证，验证电子邮件意味着什么？

> ID：10893029
> 
> 赞同：5
> 
> 时间：2012-06-05T07:03:46.350
> 
> 标签：authentication, google-api, oauth-2.0

我开始使用 OAuth 2.0 和 Google 进行身份验证。我正在使用 Google 的[Using OAuth 2.0 for Login](https://developers.google.com/accounts/docs/OAuth2Login)文档，一切正常。我有一个关于该`verified_email`领域的问题。它是这样记录的：

> verify_email ：指示 Google 是否能够验证电子邮件地址的标志。

但这到底是什么意思？在以这种方式进行身份验证时确保电子邮件得到验证是否被认为是最佳实践，或者我们已经收到带有正确电子邮件证明的回复这一事实是否足以使用户成为所述电子邮件帐户的所有者？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T22:27:39.553

无论邮件是否由谷歌托管，这意味着不同的事情。

- 如果用户有一个电子邮件地址@gmail.com 或@hosted-example.com，其中hosted-example.com 是使用Google 应用程序（尤其是托管Gmail）的域，那么Google 帐户也会实施访问控制/登录到电子邮件帐户。在这种情况下，verified_email 位始终为“真”，但实际上保证比“Google 已能够验证电子邮件地址”更强。

*   另一方面，如果电子邮件地址位于非 Google 托管的帐户上，例如 @yahoo.com，则意味着 Google 能够在某些情况下验证它（通常通过向用户发送电子邮件并获得收据确认）时间点。信息可能不是最新的：用户可能已失去对该帐户的控制。因此，在这种情况下，该信息可能对垃圾邮件信号有用，但可能不应仅用于某些更关键的操作，例如帐户恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T22:31:05.600

+1 @user1289356 的回答。

此外，出于身份验证的目的，您需要使用“id”作为您的唯一标识符，而不是电子邮件地址。

# android - 在 Eclipse 上设置 actionbarsherlock 的演示

> ID：10893032
> 
> 赞同：2
> 
> 时间：2012-06-05T07:04:09.610
> 
> 标签：android, actionbarsherlock

我下载了 JakeWharton-ActionBarSherlock-88fc341 并尝试测试 actionbarsherlock 的演示。我能够使用库文件夹创建一个项目，但是当我尝试使用 demos 文件夹作为源代码创建另一个项目时，它在一个 java 类文件中显示错误。我将其作为库进行了检查，并且库文件夹也作为库进行了检查。请帮助在 Eclipse 上设置 actionbarsherlock 的演示

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T13:09:36.360

也许您的 Android 支持库引用不匹配。

在 ABS 项目和您自己的项目中删除`/libs/android-support-v4.jar`. 然后为每个项目重新添加支持库。为此：右键单击每个项目 -> `Android Tool`-> `Add Support Library`。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:20:46.947

检查以下内容：

AndroidBarSherlock 项目应标记为库。它应该在其构建路径中包含 Android 支持包。（要添加它：右键单击项目 -> Android 工具 -> 添加支持库）

您的项目不应标记为库。在 Project Properties->Android 中，您应该将 AndroidBarSherlock 作为库引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:55:55.663

至于 android-support-v4.jar 库已经存在于 Sherlock 库中，请检查您自己的项目中是否也没有这个库。如果是这样，请将其从 /libs 文件夹中删除。

# shell - 使用 shell 脚本或 gawk 从字符串中提取 pcap 名称

> ID：10893047
> 
> 赞同：1
> 
> 时间：2012-06-05T07:05:50.253
> 
> 标签：shell, awk, gawk

我有一个文件 pcap_list ，其中包含几个 pcap 文件的路径，例如。

```
./folder1/folder2/...../foldern/sample1.pcap
./folder1/folder2/...../foldern/sample2.pcap    and so on.... 
```

从此我想在linux中使用shell脚本提取pcap文件的名称。谁能让我知道我该怎么做。虽然当我使用 gawk 'BEGIN {FS = "/"} {print $NF}' pcap_list 它工作正常。但我想循环执行此操作并为此编写以下脚本。

```
#!/bin/bash
PCAP_LIST=$1
count=0
cat $PCAP_LIST | while read PCAP_PATH
do
        let count++
        echo "$count $PCAP_PATH"
pcapname=($(gawk -v pcappath=$PCAP_PATH 'BEGIN {FS = "/"} {print $NF}' pcappath))
printf "pcapname =$pcapname"
done 
```

它不工作。谁能让我知道我该怎么做。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:11:13.440

它不起作用的原因是您在`gawk`命令中错误地使用了变量名。事实上，它正在尝试处理一个名为“pcappath”的文件。变量传递参数使变量*在*`gawk`脚本中可用，而*不是*作为文件名参数。

在您的问题中，您说“它不起作用”，但您没有说明如何或包含任何错误消息。如果您有，它可能会提供有关问题所在的信息。

无论如何，解决问题很简单。

您可以`basename`按照机械蜗牛的建议使用，或者您可以修复您的`gawk`版本（我在下面显示），或者您可以使用纯 Bash 版本（我在下面显示）。

```
pcapname=$(echo "$PCAP_PATH" | gawk 'BEGIN {FS = "/"} {print $NF}') 
```

此外，没有理由使用额外的括号集来创建数组。

这是一个纯 Bash 版本：

```
#!/bin/bash
pcap_list=$1
count=0
while read -r pcap_path
do
    (( count++ ))
    echo "$count $PCAP_PATH"
    pcapname=${pcappath##*/}
    printf '%s\n' "pcapname = $pcapname"
done < "$pcap_list" 
```

您应该习惯性地使用小写或混合大小写的变量名称，以减少名称与 shell 或环境变量发生冲突的机会。

不要`cat`用于此应用程序 - 只需将文件重定向到`done`语句中。一个优点是这避免了创建子shell，因此您的变量在`while`循环完成后保留其值。

应该几乎总是使用选项`-r`。`read`这导致`read`从字面上接受反斜杠。

使用`(())`代替，`let`因为它更灵活。

使用参数扩展来提取基本名称。

您的`printf`（大概）需要换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:25:41.700

这很容易使用`basename`命令：

```
cat $PCAP_LIST | while read PCAP_PATH ; do basename "$PCAP_PATH" ; done 
```

# android - 如何在方向改变时将片段保存在内存中

> ID：10893050
> 
> 赞同：3
> 
> 时间：2012-06-05T07:06:07.967
> 
> 标签：android, android-fragments

我正在使用片段创建一个平板电脑优化的应用程序。我在左侧有一个细小的导航片段，带有按钮来控制将哪些片段加载到占据屏幕其余部分的两个 ViewGroup 容器中。

例如，如果按下导航片段中的按钮，第一个容器将加载项目列表片段（例如，用于设置、客户等），第二个容器将加载片段以显示项目详细信息。

由于我想将片段保留在内存中（因此，当从设置导航到客户然后返回设置时，以前的设置片段应该在那里，这样用户就不会丢失他们所在的位置） - 我已经创建了片段实例活动的变量

```
SettingsListFragment settingsListFragment;
SettingsDetailFragment settingsDetailFragment;
CustomerListFragment customerListFragment;
CustomerDetailFragment customerDetailFragment; 
```

然后我在必要时创建这些片段，并根据需要用这些片段替换容器。例如。

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
if(settingsListFragment == null){
   settingsListFragment = new SettingsListFragment();
}           

fragmentTransaction.replace(R.id.fragment_container_left, settingsListFragment);
fragmentTransaction.commit(); 
```

我的问题是，如何在方向更改中保留这些实例？

我假设我不应该根据 [http://developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html)使用活动 onRetainNonConfigurationInstance() 方法，因为“要非常小心你的对象传递 onRetainNonConfigurationChange() ...这意味着你永远不应该传递 View、Drawable、Adapter 等”

我也尝试从片段管理器中获取片段， `Fragment clf = fragmentManager.findFragmentByTag("CLIENT LIST");` 但它返回为空。我认为它会在片段被替换后被释放。

感谢您提供任何帮助/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:14:27.717

你不能（或真的不应该）以这种方式保留片段。我猜这是你想要保持的状态。

如果你将你的状态存储在[`onSaveInstanceState()`](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)你以后可以在[`onCreate()`](http://developer.android.com/reference/android/app/Fragment.html#onCreate%28android.os.Bundle%29)or中检索它[`onActivityCreate()`](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)。因此，在您返回后（您必须将其添加`FragmentTransaction`到后台堆栈），您可以从保存它的 Bundle 中恢复状态！

`FragmentManager`将负责处理配置更改并在当前视图中恢复您的片段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T07:18:27.683

我建议让 android 重绘你的对象。如果要保留有关方向更改的数据，则应将其保留在服务组件中。这样数据就不会在方向改变时丢失。

否则你总是可以这样做：

把它放在你的清单中

```
<activity android:configChanges="orientation|keyboardHidden"></activity> 
```

把它放在你的活动课上

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);
} 
```

使用此方法时，您的活动将不会被重绘，因此当您将单独的 XML 布局文件用于横向或纵向时，不会调整您的布局

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T04:41:09.167

还有一件事，您可以通过`FragmentManager#putFragment`and检索存储的 Fragment 引用`FragmentManager#getFragment`。

# ios5 - iOs / Phonegap：加载外部移动网站？

> ID：10893052
> 
> 赞同：0
> 
> 时间：2012-06-05T07:06:29.520
> 
> 标签：ios5, jquery-mobile, cordova

所以我一直在看这个（[iPhone Phonegap based app load External website made of componentone](https://stackoverflow.com/questions/3457281/iphone-phonegap-based-app-load-external-website-made-of-componentone)）线程，想知道今天是否仍然如此？我正计划制作一个 iOs 应用程序，它只加载一个使用 jQuery Mobile 创建的外部站点。这个想法当然是为尽可能多的平台使用相同的站点。

1.) 如果 Apple 仍会拒绝仅重定向的应用程序，那么我唯一的选择是创建原生 iOs 应用程序吗？

和，

2）如果不是，解决这个问题的最简单的解决方案是什么？我一直在使用触发 changePage 的 pageinit 进行测试，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:21:46.843

如果它只是一个重定向到网站的本机外壳，我很确定苹果会拒绝这个应用程序。您基本上可以通过在启动您的网站的主屏幕上创建一个书签来获得相同的功能。预计会收到以下来自 Apple 的拒绝信：

> “我们已经完成了对您的应用程序的审查，但无法将此版本发布到 App Store，因为它提供的体验与 Web 浏览体验并没有太大的不同，因为它会结合原生 iOS 功能。虽然您的应用程序内容可能会有所不同根据 App Store Review Guidelines 的要求，它提供的体验与使用 Safari 的一般体验没有显着差异
> 
> ## 12.3 简单的网络剪辑、内容聚合器或链接集合的应用程序可能会被拒绝”

# c# - 如何使用全景项目选择更改

> ID：10893053
> 
> 赞同：0
> 
> 时间：2012-06-05T07:06:32.287
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试检测用户当前正在使用的当前全景项目，然后相应地切换应用程序栏图标按钮 isenabled 属性。我对如何实现这样的功能或正确检测当前的全景项目没有任何运气。具体来说，我想使用 selectedItem 属性并检测全景项目的名称而不是 selectedIndex 属性，因为全景项目可能会更改它们的顺序。有没有办法做到这一点？到目前为止，我拥有以下内容：

主页.xaml

```
<controls:Panorama SelectionChanged="PanoramaItemSelectionChanged">         

            <!--Panorama item one-->
            <controls:PanoramaItem Header="statuses" >
                ...
            </controls:PanoramaItem>

            <!--Panorama item two-->
            <controls:PanoramaItem Header="mentions" >
                ...
            </controls:PanoramaItem>

            <!--Panorama item three-->
            <controls:PanoramaItem Header="messages" >
                ...
            </controls:PanoramaItem>

            <!--Panorama item four-->
            <controls:PanoramaItem Header="favorites" >
                ...
            </controls:PanoramaItem>

        </controls:Panorama> 
```

MainPage.xaml.cs

```
private void PanoramaItemSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string currentPanoramaItem = e.AddedItems[0] as string;

        switch (currentPanoramaItem)
        {
            case "statuses":
                //show application bar button?
                break;
            case "mentions":
                //show application bar button?
                break;
            case "messages":
                ((ApplicationBarIconButton)ApplicationBar.Buttons[0]).IsEnabled = true;
                break;
            case "favorites":
                //show application bar button?
                break;
            default:
                return;
        }            
    } 
```

由于某种原因，我的 SelectionChanged 实现不起作用。有什么想法（请举个例子）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:20:25.143

使用标题名称进行测试是一个坏主意，因为如果您重命名全景项目标题或将它们本地化，您的代码将会中断。

您可以计算出选定的索引，但如果您重新订购商品，这会中断：

```
 PanoramaItem selectedItem = (PanoramaItem)e.AddedItems[0];
        int selectedIndex = mainPanorama.Items.IndexOf(selectedItem); 
```

最可靠的方法是在全景项目上设置标签并对其进行测试：

XAML：

```
 <phone:Panorama x:Name="myPanorama" SelectionChanged="Panorama_SelectionChanged_1">

        <phone:PanoramaItem Header="the places" Tag="places">
        </phone:PanoramaItem>

        <phone:PanoramaItem Header="the routes" Tag="routes">
        </phone:PanoramaItem>
    </phone:Panorama> 
```

后面的代码：

```
 private void Panorama_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count < 1) return;
        if (!(e.AddedItems[0] is PanoramaItem)) return;

        PanoramaItem selectedItem = (PanoramaItem)e.AddedItems[0];

        string strTag = (string)selectedItem.Tag;
        if (strTag.Equals("places"))
            // Do places stuff
        else if (strTag.Equals("routes"))
            // Do routes stuff

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:50:28.343

您也可以简单地使用索引号来触发不同的操作。由于全景页面不是为使用大量全景项目而设计的。这可能不是问题。

`Xaml`

```
<phone:Panorama Title="my application" SelectionChanged="Panorama_SelectionChanged">

    <phone:PanoramaItem Header="first item">
    </phone:PanoramaItem>

    <phone:PanoramaItem Header="second item">
    </phone:PanoramaItem>

    <phone:PanoramaItem Header="third item">
    </phone:PanoramaItem>

</phone:Panorama> 
```

我假设您正在使用`ApplicationBar`可见性

`Code`

```
private void Panorama_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    switch (((Panorama)sender).SelectedIndex)
    {

        case 0: // defines the first PanoramaItem
            ApplicationBar.IsVisible = true;
            break;

        case 1: // second one
            ApplicationBar.IsVisible = false;
            break;

        case 2: // third one
            ApplicationBar.IsVisible = true;
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:00:05.157

我这样做的方法是命名全景图，然后您可以参考其 selectedIndex 属性来确定选择了哪个全景图项。我相信这比处理标题中的字符串更有效。

```
 <Controls:Panorama name="x">...</Controls:Panorama>

    private void PanoramaItemSelectionChanged(object sender, SelectionChangedEventArgs e)    
 { switch (x.SelectedIndex) ... } 
```

不过我还要补充一点，在全景图中使用应用程序栏并不是最佳实践，实际上建议您不要这样做，但是否使用完全取决于您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:44:21.040

switch语句中使用的panoramaItemSelectionChanged字符串值应该如下：

```
string currentPanoramaItem = ((PanoramaItem)(((Panorama)sender).SelectedItem)).Header.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:02:13.547

有开关盒的替代品....你可以使用

```
private void PanoramaItemSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (panoramacontrol.selecteditem == xyzpanorama)
    {
        //....................//
    }
} 
```

在哪里

*   全景控制是您的全景图的名称
*   xyzpanorama 是全景图中的项目名称。例如，在您的情况下为“状态”。

不要与标题混淆，因为标题和名称可能不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T16:25:14.740

我的解决方案适用于 WP8，但必须与 WP7.x 相同

首先在每个 PanoramaItem 上添加一个名称，并将该名称用作代码中的引用。就我而言，我有 x:Name = "piRegister" 和 x:Name = "piLogin"

在 SelectionChanged 事件中，您必须重新创建 ApplicationBar：

```
private void Login_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
   string piName = (e.AddedItems[0] as PanoramaItem).Name;

   switch(piName)
   {
      case "piLogin":
         SetupAppBar_Signin();
         break;
      case "piRegister":
         SetupAppBar_Register();
         break;
   }
}

//use this code only if you need to setup the app bar from code
void SetupAppBar()
{
   ApplicationBar = new ApplicationBar();

   ApplicationBar.Mode = ApplicationBarMode.Default;
   ApplicationBar.Opacity = 1.0;
   ApplicationBar.IsVisible = true;
   ApplicationBar.IsMenuEnabled = true;
}

void SetupAppBar_Signin()
{   
   ApplicationBar.Buttons.Clear();

   ApplicationBarIconButton button1 = new ApplicationBarIconButton();
   button1.IconUri = new Uri("/icon.png", UriKind.Relative);
   button1.Text = "button 1";
   ApplicationBar.Buttons.Add(button1);
   button1.Click += new EventHandler(button1_Click);
}

void SetupAppBar_Register()
{   
   ApplicationBar.Buttons.Clear();

   ApplicationBarIconButton button1 = new ApplicationBarIconButton();
   button1.IconUri = new Uri("/icon.png", UriKind.Relative);
   button1.Text = "button 1";
   ApplicationBar.Buttons.Add(button1);
   button1.Click += new EventHandler(button1_Click);

   ApplicationBarIconButton button2 = new ApplicationBarIconButton();
   button2.IconUri = new Uri("/icon.png", UriKind.Relative);
   button2.Text = "button 1";
   ApplicationBar.Buttons.Add(button2);
   button2.Click += new EventHandler(button2_Click);
} 
```

# wordpress - 从用户个人资料 Wordpress 中创建帖子

> ID：10893065
> 
> 赞同：0
> 
> 时间：2012-06-05T07:07:48.893
> 
> 标签：wordpress, search

我希望有人可以帮助我，我需要一种在搜索时显示用户个人资料的方法。所以我想创建一个自定义帖子类型“配置文件”，并在管理员在仪表板中创建新用户时自动创建它。

所以任何帮助都会很好，或者如果有人有任何其他想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:25:49.807

没有必要这样做。只需创建一个[作者模板](http://codex.wordpress.org/Author_Templates)来为您的用户显示您想要的信息。

您还应该能够将它与[Get Users](http://codex.wordpress.org/Function_Reference/get_users)一起使用，这样您就不仅限于检索具有 Author 角色的用户（如有必要）。

但是，我不知道是否默认在您的 author.php 文件中查询角色小于“作者”的用户。如果某些角色给您带来问题，您可能应该考虑在 archive.php 中设置此模板。

**更新：**如果您的意图是存储您的主题独有的用户信息，并且无法通过标准的 Wordpress 方式获得，那么您将需要查看[用户注册操作挂钩](http://codex.wordpress.org/Plugin_API/Action_Reference/user_register)以自动生成配置文件。

相比之下，您还需要查看[删除用户操作挂钩](http://codex.wordpress.org/Plugin_API/Action_Reference/delete_user)以自动删除您的自定义配置文件。

有一些插件可以帮助您创建[自定义帖子](http://codex.wordpress.org/Post_Types)，但我会亲自从头开始构建它，以根据您的需求定制一切。您还应该查看[自定义元框](http://codex.wordpress.org/Function_Reference/add_meta_box)来存储您的独特信息。

希望这可以帮助。

# ruby-on-rails - rails 2.3.x的哪个prawnto存储库？

> ID：10893066
> 
> 赞同：0
> 
> 时间：2012-06-05T07:08:08.563
> 
> 标签：ruby-on-rails, ruby-on-rails-2, prawnto

`git://github.com/thorny-sun/prawnto.git`并且`http://cracklabs.com/prawnto`消失了。

rails 2.3.x 现在的*好处* 在哪里？`prawnto`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:47:08.243

[https://github.com/smecsia/prawnto](https://github.com/smecsia/prawnto)看起来是个不错的选择 - 它似乎仍在维护中，他们也将其作为 gem 发布：[http ://rubygems.org/gems/prawnto](http://rubygems.org/gems/prawnto)

我相信您已经意识到这一点，但是如果您打算将应用程序升级到 rails 3.xx，那么可能值得考虑更改您的 PDF 生成代码以消除对prawnto的任何依赖，因为 prawnto 肯定**不起作用**在铁轨上 3。

# java - 为 Java 服务器设置堆大小的规则或准则

> ID：10893067
> 
> 赞同：2
> 
> 时间：2012-06-05T07:08:12.647
> 
> 标签：java, heap-memory, java-server

我对特定的应用程序或环境不感兴趣。尽管我现在在应用程序部署中遇到了这个问题，但我对更通用的解决方案感兴趣。

是否有一些关于在 Java 服务器上设置堆大小的规则？（特别是现在，我正在使用*Tomcat 7*）。使用`-Xms`和`-Xmx`您可以指定堆大小的最小值和最大值。根据部署在服务器上的应用程序，如何知道要设置的最大和最小堆大小。是否有一种通用的方法来找到它，或者它是否更经验，与已部署的应用程序相关？- “与部署的应用程序相关”我的意思是您必须知道您的应用程序在做什么、*数据库*工作、*用户界面*工作或任何其他*内存消耗*者的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:21:00.027

我在几家公司做过 java web app，对他们来说都是完全凭经验的。这主要取决于机器，而不是应用程序。例如，如果您有一台 4GB 的机器只有一个 tomcat 服务器，那么您允许它占用 3GB。如果服务器内存不足，您尝试修复它或购买更多内存...我认为这比花钱请人计算所需内存更便宜...

我觉得大公司也是这样，没有什么秘密……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:23:38.520

这是经验性的 - 观察您的应用程序并查看它的行为方式。

还有更多内容 - 对于初学者，请阅读[内存池以及如何调整它们的大小](http://www.scalingbits.com/javaprimer)。如果您深入了解它，请查看[http://www.javaperformancetuning.com/](http://www.javaperformancetuning.com/) - 有很多关于调整内存问题的材料等等。

现在，在通常情况下，您不应该为`-Xms`. 设置`-Xmx`为您的应用程序需要的任何值（观察，找出）。JVM 会在需要时增加内存池的大小，并相应地减少它们。只要确保，你没有得到`OutOfMemoryError`s。然后，查看您的应用程序是否存在内存瓶颈（例如，完整的 GC 或长期*停止世界*阶段），并根据需要调整池的大小和/或配置 GC。

# asp.net - 如何在一个 Flash 播放器中播放多个 swf？

> ID：10893073
> 
> 赞同：0
> 
> 时间：2012-06-05T07:09:27.470
> 
> 标签：asp.net, flash, apache-flex

有什么方法可以在 ASP.net 上的一个 Flash 播放器中播放多个 swf？因为它需要在单击按钮后立即更改正在播放的视频。非常感谢阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:30:00.110

对不起，我当时没有完全理解这个问题。

如果您想使用 javascript 嵌入 .swf 文件，我建议您使用 swfobject。

我在这里做了一个例子：

[http://jsfiddle.net/ZGGCj/](http://jsfiddle.net/ZGGCj/)

swfobject 在这里记录得很好：

[http://code.google.com/p/swfobject](http://code.google.com/p/swfobject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:15:56.797

`Loader`您可以使用该类加载外部 .swf 文件。

```
var request:URLRequest = new URLRequest("http://www.[yourdomain].com/externalSwf.swf");
var loader:Loader = new Loader()
loader.load(request);
addChild(loader); 
```

您还可以使用`Event.COMPLETE`检查 swf 何时完成加载。

[http://livedocs.adobe.com/flex/3/html/help.html?content=Working_with_MovieClips_7.html](http://livedocs.adobe.com/flex/3/html/help.html?content=Working_with_MovieClips_7.html)

# ios - iOS - 视网膜显示屏上的视频分辨率？

> ID：10893076
> 
> 赞同：2
> 
> 时间：2012-06-05T07:09:43.463
> 
> 标签：ios, video, retina-display

我在我的应用程序中嵌入了本地短视频。视频的大小（宽度和高度）是预定义的，以适应将要播放的视图。

**编辑** 假设我有一个 800 高度和 650 宽度的视频。

我想在 iPhone 上以 400 * 325 的视图显示它，所以我将它调整为这个大小。我应该为视网膜 iPhone 制作其他版本的 800 * 640 吗？

视网膜显示设备上的视频分辨率规则是什么？如果我将分辨率提高一倍，我会在视网膜上获得更好的视频吗？

谢谢

沙尼

# android - 如何在警报中设置一些字符串值

> ID：10893079
> 
> 赞同：-1
> 
> 时间：2012-06-05T07:09:55.967
> 
> 标签：android

我需要将一些值传递给`onReceive()`. `BroadcastReceiver`我正在实现一个警报，当警报触发时，我需要根据我之前获得的一些文本值显示一些文本？关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:13:34.567

你进来`intent`了`public void onReceive(final Context context, Intent intent)`。通过意图，您可以获得您设置的值。

这将把价值`intentObject.putExtra("key", "text");`

要得到`intent.getExtras.getString("key");`

# java - 显示表中没有消息

> ID：10893080
> 
> 赞同：-1
> 
> 时间：2012-06-05T07:10:01.757
> 
> 标签：java, jsp, jakarta-ee, struts, displaytag

当没有数据但我没有收到该消息时，我期待在我的显示表中显示“没有发现任何内容”。页面只是空白

我的代码片段

```
<display:table name="dpinforce" export="true" pagesize="20" sort="list" id="data1" requestURI="" class="tablelist">
        <display:setProperty name="export.csv" value="false"/>
        <display:setProperty name="export.xml" value="false"/>
        <display:setProperty name="export.excel.filename">DPInforce_<%=oAppUtil.getSystemDateTime()%>.xls

        </display:setProperty>

        <display:column title="PolId" sortable="true" property="polId"></display:column>
        <display:column title="Pol Infc DT" sortable="true" property="polINFCDT"></display:column>
        <display:column title="Aura Stat" sortable="true" property="auraStat"></display:column>
        <display:column title="Plan" sortable="true" property="plan"></display:column>
        <display:column title="Branch" sortable="true" property="branch"></display:column>
        <display:column title="Created On" sortable="true" property="createdOn"></display:column>
</display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:05:45.167

我正在检查 if 子句中的条件，如果它为 true，那么它正在显示表格，当它为 false 时，我没有编写代码。在编写 else 部分后，它的工作。

# ios - iPhone：如何从跳板杀死后台运行的应用程序？

> ID：10893083
> 
> 赞同：-3
> 
> 时间：2012-06-05T07:10:09.520
> 
> 标签：ios, springboard

如何杀死所有在跳板中运行到后台的应用程序。

有什么办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:24:52.420

您的应用程序只能与其沙箱内的内容交互，而不能更改其他应用程序的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:26:24.197

除了自己的应用程序之外，您不能杀死任何其他应用程序。但是要在您进入后台时终止您的应用程序，请键入：

```
 exit(0); 
```

在 UIApplicationDelegate 方法内部：

```
 applicationDidEnterBackground 
```

您会发现主要在您的应用程序委托类中

# ant - 如何在ant中导出和导入密钥？

> ID：10893085
> 
> 赞同：3
> 
> 时间：2012-06-05T07:10:12.233
> 
> 标签：ant, import, export, key, keystore

Ant 具有内置任务“genkey”，用于生成一些密钥并放入所需的密钥库。但是，如果我需要从某个密钥库中导出一些密钥并将其导入另一个密钥库怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T01:40:15.617

似乎没有内置的 ant 任务来执行操作（很奇怪）。要处理导出和导入，应该使用执行 shell 命令的通用 exec 任务。像这样的东西应该用于导出：

```
<exec executable="keytool" failonerror="true">
    <arg value="-exportcert"/>
    <arg line="-keystore mykeystore.jks"/>
    <arg line="-alias mykey"/>
    <arg line="-storepass OhWowThisIsCoolPassword"/>
    <arg line="-file mykey.cer"/>
</exec> 
```

类似的导入。

# jquery - 带有图像的jquery可拖动li

> ID：10893090
> 
> 赞同：-2
> 
> 时间：2012-06-05T07:10:51.670
> 
> 标签：jquery, css, draggable

我正在动态创建一些可拖动的元素。一切正常，但现在我想在这些 li 中动态插入图像，并且仍然能够拖放它们。
这是我的工作代码：

```
 for( i = 1; i <= Num; i++) {
           $("#sortable").append("<li class='ui-state-default' id=" + i + ">" + "No" + i + "</li>");
         } 
```

我怎样才能做到这一点？
也许有一些内联 CSS 和背景图像样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:14:59.333

是的，您可以将具有背景图像的类动态分配给 li。但是你必须知道图像的大小。

但是为什么不简单地添加一个图像呢？

```
$('li#idOfYourLi').html('<img src="pathToYourImg" />') 
```

# joomla1.7 - 使用 K2 组件在 joomla 中插入 iframe 时出错

> ID：10893092
> 
> 赞同：0
> 
> 时间：2012-06-05T07:10:59.040
> 
> 标签：joomla1.7, joomla-k2

我正在使用`K2 component`joomla 2.5，当我添加一个显示结果`iframe on a Item(or Article) in K2`时`Tiny MCE editor`，但是当我在正面运行网站时 iframe 不显示？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:52:13.497

1.  您创建一个 mod_wrapper，然后在其上输入数据，设置 position="iframe"
2.  在 K2 项目中，您使用代码 {loadposition iframe}

希望有帮助

# iphone - 它是正确的代码吗？

> ID：10893095
> 
> 赞同：-2
> 
> 时间：2012-06-05T07:11:18.710
> 
> 标签：iphone, objective-c, cocoa-touch

我是 iPhone 开发的新手。这是我的代码：

```
- (void)setImage:(UIImage *)image ImageKey:(NSObject *)imageKey
{

    NSNumber *number=(NSNumber*)imageKey;
    int num=[number intValue];
        UIScrollView *scrollViewFamily=(UIScrollView*)[scrollViewProfile viewWithTag:6];
        UIButton *btnPhoto=(UIButton*)[scrollViewFamily viewWithTag:num];
        [btnPhoto setImage:image forState:UIControlStateNormal];

        Photo *aPhoto= [appData.CurrentUser.familyListarray objectAtIndex:num-1000];
        aPhoto.photoImg=image;
 } 
```

scrollview retainCount 是 3，按钮 2 和 aPhoto 1。现在我的问题是这样写是否正确？如果是，那么如何释放这些对象？帮帮我。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:16:44.720

我的建议是给我们 ARC，然后您就不必担心内存管理。如果您仍想手动执行此操作，请[直接从](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)有关 retainCount 的文档中获取此建议：

> 重要此方法在调试内存管理问题时通常没有价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。要了解必须遵守的内存管理基本规则，请阅读“内存管理规则”。要诊断内存管理问题，请使用合适的工具：LLVM/Clang 静态分析器通常甚至可以在您运行程序之前发现内存管理问题。Instruments 应用程序中的 Object Alloc 工具（请参阅 Instruments 用户指南）可以跟踪对象分配和销毁。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-05T07:21:15.967

所有行都是指向内存资源的指针，因此没有内存泄漏。您必须在分配内存时释放内存，使用“自动释放”来做到这一点，它会让您的生活更轻松。

# asp.net-mvc-3 - 如何访问自定义模型字段属性中的其他模型字段？

> ID：10893098
> 
> 赞同：0
> 
> 时间：2012-06-05T07:11:38.563
> 
> 标签：asp.net-mvc-3, model, custom-attributes, system.reflection, .net-reflector

问题是我试图在 asp.net mvc3 中创建一个自定义模型字段属性需要访问其他模型字段。例如命名为“PersonId”。

所以我有一个这样的模型

```
public class PersonWoundModel : IAppointmentModel
    {

        public int PersonId { get; set; }

        [CustomAttribute("PersonId")]
        public FillInList Positions { get; set; }
} 
```

我有自定义属性

```
[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false)]
    public class CustomAttribute : Attribute, IMetadataAware
    {
        public int PersonId { get; private set; }

        public CustomAttribute(bool allowDelete, bool allowEdit, string htmlHelpers)
        {
           //i need to get a PersonId here somehow.. reflection or any other method.
        }
} 
```

所以基本上我需要在 [CustomAttribute] 中获取 aPersonId 字段以供进一步使用。我正在考虑使用反射，但不知道如何在那里获取模型对象。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:18:17.873

你不能 - 因为没有模型对象。

您的属性在元数据中被“序列化” - 即构造它所需的字段被序列化，因此它们必须是编译时已知的文字。[当您通过使用GetCustomAttributes](http://msdn.microsoft.com/en-us/library/system.attribute.getcustomattributes.aspx)之类的方法对模型类使用反射时，将调用构造函数。但是到那时你（在你的代码中）可能会有一些对象要处理。

# apache-flex - 让 2 个进度条相互重叠

> ID：10893100
> 
> 赞同：0
> 
> 时间：2012-06-05T07:11:40.687
> 
> 标签：apache-flex

您好，我有以下弹性代码：

```
<mx:VBox verticalGap="0">
    <mx:ProgressBar id="bar" labelPlacement="top" visible="true" verticalGap="0" 
                    color="0x323232" label="{data.packageId}" direction="right" mode="manual"           fontWeight="bold" trackHeight="10" width="400" bottom="-4"/>
    <mx:ProgressBar id="subbar" visible="true" width="400" label="{data.status}" verticalGap="0"
            borderColor="#c70000" direction="right" enabled="true" top="-5"
            indeterminate="false" labelPlacement="bottom" maximum="100" minimum="0"
            mode="manual" themeColor="#c70000"  trackHeight="3"/>
</mx:VBox> 
```

现在这两个元素位于彼此下方，我想要的是底部进度条位于顶部进度条的底部。换句话说，顶部进度条的底部和底部进度条的底部应该具有相同的 y 值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:06:20.117

使用组而不是强制事物不重叠的 VBox。不确定您使用的是哪个版本的 Flex，但假设是 4.0 或 4.5：

```
<s:Group>
    <mx:ProgressBar id="bar" labelPlacement="top" visible="true" verticalGap="0" color="0x323232" label="{data.packageId}" direction="right" mode="manual" fontWeight="bold" trackHeight="10" width="400" bottom="-4"/>
    <mx:ProgressBar id="subbar" visible="true" width="400" label="{data.status}" verticalGap="0" borderColor="#c70000" direction="right" enabled="true" top="-5" indeterminate="false" labelPlacement="bottom" maximum="100" minimum="0" mode="manual" themeColor="#c70000"  trackHeight="3"/>
</s:Group> 
```

从那里你将有一个更容易定位的时间。

# r - 如何使用与 gvisTable 类似的方法让 R 输出正文脚本以格式化 HTML 表格？

> ID：10893101
> 
> 赞同：6
> 
> 时间：2012-06-05T07:11:51.993
> 
> 标签：r, knitr

我想研究如何以不需要使用放置在 HTML 标头中的样式的方式生成格式化的 HTML 表格。[我已经广泛地询问过这个问题](https://stackoverflow.com/questions/10842886/how-to-produce-html-tables-and-accompanying-css-using-r-markdown-or-html-sweave)，但是收到了一个使用标题提到的答案和另一个涉及使用 pandoc 的答案（**更新：请参阅这篇文章的底部关于自提出这个问题以来发布的新答案**。我想要一个R 函数将格式化的 HTML 表格所需的所有 HTML 格式写入一个位置。

我最近一直在玩`gvisTable`，它能够在一个地方写下所有相关信息：

以下代码

```
```{r results='asis'}
simpleData <- data.frame(matrix(1:9, nrow=3))
tab2 <- gvisTable(simpleData, 
                   options=list(width = 600, height = 300))
print(tab2, "chart")
``` 
```

将以下内容输出到 R Markdown 文档中：

```
<!-- jsHeader -->
<script type="text/javascript" src="http://www.google.com/jsapi">
</script>
<script type="text/javascript">

// jsData 
function gvisDataTableID273f3d05cccd ()
{
  var data = new google.visualization.DataTable();
  var datajson =
[
 [
 1,
4,
7 
],
[
 2,
5,
8 
],
[
 3,
6,
9 
] 
];
data.addColumn('number','X1');
data.addColumn('number','X2');
data.addColumn('number','X3');
data.addRows(datajson);
return(data);
}

// jsDrawChart
function drawChartTableID273f3d05cccd() {
  var data = gvisDataTableID273f3d05cccd();
  var options = {};
options["allowHtml"] = true;
options["width"] =    600;
options["height"] =    300;

     var chart = new google.visualization.Table(
       document.getElementById('TableID273f3d05cccd')
     );
     chart.draw(data,options);

}

// jsDisplayChart 
function displayChartTableID273f3d05cccd()
{
  google.load("visualization", "1", { packages:["table"] }); 
  google.setOnLoadCallback(drawChartTableID273f3d05cccd);
}

// jsChart 
displayChartTableID273f3d05cccd()

<!-- jsFooter -->  
//-->
</script>

<!-- divChart -->

<div id="TableID273f3d05cccd"
  style="width: 600px; height: 300px;">
</div> 
```

当它被放置在上下文中时，就会产生一个 gvisTable。请参阅[此输出中的第二个表](http://rpubs.com/jeromyanglim/simple_gvisTable_example)。

因此，一个简单的 R 函数已经输出了创建一个相当复杂的表格所需的所有 HTML。最终，我希望在 LateX 中看到相同程度的表格格式控制，仅适用于 R Markdown。鉴于此类帖子经常出现在博客上、通过联合发布、RSS 阅读器等等，格式化命令在正文中会很好。

### 问题

*   是否可以使用类似于 gvis 的方法（例如，HTML 正文中的脚本）来格式化 HTML 表格（例如，行、单元格格式、单元格高度和宽度、字体等）？
*   是否有任何现有的 R 函数支持生成此类表？
*   这个问题的假设是否有意义，或者是否有其他方法可以实现我使用 R Markdown 进行精确 HTML 表格格式化的更广泛目标？

### 更新

[Joe 在我之前的问题中添加了一个答案](https://stackoverflow.com/a/10893563/180892)，他提到了三个选项（正文中的样式；在标题中嵌入样式的 javascript；和范围样式块）。所以我想剩下的主要问题是是否存在任何接口来促进使用带有 R Markdown 代码块的这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T23:06:15.400

从[RStudio Docs](http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering)，您可以设置`knitr`使用自定义样式表：

```
# Set Custom CSS
options(rstudio.markdownToHTML=
  function(inputFile, outputFile) {      
    require(markdown)
    markdownToHTML(inputFile, outputFile, stylesheet='custom.css')   
  }
) 
```

只需替换`stylesheet='custom.css'`为样式表的文件路径即可。

然后，您可以将`xtable`and`print`与选项组合`type="html"`成一个块，您将获得一个格式良好的表格。

`xtable`如果需要，也会产生 LaTeX。

# r - 以非均匀时间间隔计算 MSD

> ID：10893102
> 
> 赞同：1
> 
> 时间：2012-06-05T07:12:01.777
> 
> 标签：r, data-analysis

我有一个矩阵，它有 2 列，x 和 y 坐标。我想计算均方位移 - 这是在给定时间内从起点移动到另一个点的平方距离，在许多不同的时间点上平均 - 假设所有时间间隔都相等。

所以工作公式是：

`MSD=average(r(t)-r(0))^2 where r(t) is position at time t and r(0) is position at time 0.`

所以我用来计算的代码是：

```
#Create a vector to save the square of the distance between successive
#locations
distsq<- numeric(length=nrow(mat))

#Calculate and assign these values
for (i in 2:nrow(mat))
{
distsq[i]<-((mat[i,1]-mat[i-1,1])^2)+((mat[i,2]-mat[i-1,2])^2)
}

#Calculate the mean sq distance for this value of n
MSD[k]<- mean(distsq) 
```

这`mat`是 x 和 y 值的矩阵。

所以这个公式在两个连续点之间的时间被认为是常数时有效。但是假设每 2 个坐标之间的时间不同，那么我该如何合并该组件来计算 MSD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:37:18.080

这应该是相当有效的（尽管 Roland 在他关于循环低效率的一般说法中只是部分正确。）

```
A <- matrix(1:20, ncol=2)
mean( (A[,1] - A[1,1])^2 + (A[,2] - A[1,2])^2 )
[1] 57 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:28:40.487

首先，R 中的循环非常慢。因此，出于性能原因，我会避免使用它并使用 off `diff()`。

但是，您的实际问题是数学问题，如果没有更多背景知识，很难回答。您可以使用某种加权函数：a^(abs(deltat-b))，其中 deltat 是两点之间的时间差。

# ajax - symfony 1.4 和 sfProtoculousPlugin 未定义 Ajax 错误

> ID：10893106
> 
> 赞同：0
> 
> 时间：2012-06-05T07:12:23.577
> 
> 标签：ajax, autocomplete, symfony-1.4

这几天我一直在想办法解决这个问题。有经验的人可以让我看看并告诉我我做错了什么。

这是 symfony 1.4 中内置的，在 input_auto_complete_tag 的 sfProtoculousPlugin 的帮助下。

我的模板：

```
 <?php echo input_auto_complete_tag(
      'tag', /*id_of_field*/
      '', /*default_value_of_field*/
      'tag/autocomplete', /*url_to_ajax_script*/
      array('autocomplete' => 'off'), /*array_with_extra_tag_attributes*/
      array('use_style' => 'true') /*array_with_options*/
      ) ?>

      <input type="submit" name="submit" value="Tag me!" />
  ...

  </form> 
```

添加到我的 routing.yml 顶部：

```
 tag_autocomplete:
        url:   /tag_autocomplete
        param: { module: tag, action: autocomplete } 
```

创建模板/autocompleteSuccess.php：

```
 <ul>
        <?php foreach ($tags as $tag): ?>
          <li><?php echo $tag ?></li>
        <?php endforeach; ?>
      </ul> 
```

将此操作添加到 modules/tag/actions/action.class.php 文件中：

```
 public function executeAutocomplete(sfWebRequest $request)
      {
        $this->tags = QuestionTag::getTagsForUserLike(
        $this->getUser()->getGuardUser()->getId(),
        $this->getRequestParameter('tag'),
        10
        );
      } 
```

将此方法添加到 QuestionTag.class.php 文件中：

```
 public static function getTagsForUserLike($user_id, $tag, $max = 10) 
      {
          $tags = Doctrine_Query::create()
          ->select('qt.tag')
          ->from('QuestionTag qt')
          ->where('qt.user_id = ?', $user_id)
          ->andWhere("qt.tag LIKE '%".$tag."%'")
          ->orderBy('qt.tag')
          ->limit($max)
          ->fetchArray();

        return $tags;
      } 
```

下面是生成的js代码：

```
 //<![CDATA[
    new Ajax.Autocompleter('tag', 'tag_auto_complete', '/frontend_dev.php/tag_autocomplete', {});
    //]]> 
```

在我的 Firebug 控制台中，我收到以下错误：

```
 Ajax is not defined
    [Break On This Error]   

    ...ax.Autocompleter('tag', 'tag_auto_complete', '/frontend_dev.php/tag_autocomplete... 
```

我尝试了以下命令，据说将“资产”（js 脚本）复制到我的 /web 文件夹。它似乎[对某些人有效](http://elinorhurst.blogspot.com/2008/12/symfony-ajax-is-not-defined.html)，但对我无效。

```
 ./symfony plugin:publish-assets sfProtoculousPlugin 
```

我觉得我快到了。任何帮助将不胜感激。提前谢谢了。

* * *

**更新 1**

在我的`/web/sfProtoculousPlugin`文件夹中，我有：

```
 css /
        input_auto_complete_tag.css
    js/
        builder.js
        controls.js
        dragdrop.js
        effects.js
        index.html
        prototype.js
        scriptaculous.js
        slider.js
        sound.js
        unittest.js 
```

另外，我看不到里面有`<script>`标签`prototype.js`。

* * *

**解决了**

将此添加到应用程序`settings.yml`：

```
 all:
      .settings:
        prototype_web_dir:      /sfProtoculousPlugin 
```

这对应用程序`view.yml`：

```
 javascripts:    [%SF_PROTOTYPE_WEB_DIR%/js/prototype, %SF_PROTOTYPE_WEB_DIR%/js/scriptaculous] 
```

然后我运行`./symfony cc`并刷新了页面。它现在可以按我的预期完美运行。感谢 j0k 的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:30:01.143

将此添加到我的模板顶部：

```
 <?php use_helper('Javascript') ?> 
```

将此添加到应用程序`settings.yml`：

```
 all:
      .settings:
        prototype_web_dir:      /sfProtoculousPlugin 
```

将此添加到应用程序`view.yml`：

```
 javascripts:    [%SF_PROTOTYPE_WEB_DIR%/js/prototype, %SF_PROTOTYPE_WEB_DIR%/js/scriptaculous] 
```

然后我运行`./symfony cc`并刷新了页面。它现在可以按我的预期完美运行。感谢 j0k 的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:23:53.860

第一步，清理所有东西，然后重新运行发布

```
./symfony cc
./symfony plugin:publish-assets 
```

然后，检查你的 web 文件夹，里面是否有一个文件夹，`sfProtoculousPlugin`里面有一个`css`和`js`文件夹？

当您检查 Firebug 中的*网络选项卡*时，是否有任何 js 标记为 404 ？

是否`prototype.js`加载良好？

# wcf-data-services - WCF 数据服务 V5 中的任何/所有支持问题

> ID：10893112
> 
> 赞同：0
> 
> 时间：2012-06-05T07:12:59.350
> 
> 标签：wcf-data-services, odata

我开始使用它，但 Any and All 没有在 Linq To SQl 上使用 ReflectionProvider。并且失败并出现以下错误。有关如何解决此问题的任何指示。

```
Unhandled Exception: System.Data.Services.Client.DataServiceQueryException: An error occurred while processing this request. —&gt; System.Data.Services
 .Client.DataServiceClientException: **An error occurred while processing this request.Argument type
 s do not matchSystem.ArgumentException at System.Linq.Expressions.Expression.Condition(Expression test**, Expressio
 n ifTrue, Expression ifFalse) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:47:22.057

我在使用 WCF Data Services V5 和 NHibernate（使用 Re-linq 作为 QueryProvider）时遇到了同样的问题。我发现根据我是直接针对 NHibernate 会话还是针对数据服务客户端运行以下 LINQ 查询，会生成不同的表达式：

```
.Where(x => x.Staff.Any(y => y.FirstName == "Bill")) 
```

如果我针对会话查询它，它会生成以下表达式：

```
{value(NHibernate.Linq.NhQueryable`1[WcfDataServicesTest.Entities.Store]).Where(x => x.Staff.Any(y =    > (y.FirstName == "Bill")))} 
```

但是当我查询客户端时，我得到以下信息：

```
{value(NHibernate.Linq.NhQueryable`1[WcfDataServicesTest.Entities.Store]).Where(it => IIF((it.Staff == null), Empty(), it.Staff).Any(p => (p.FirstName == "Bill")))} 
```

注意额外的条件表达式（IIF...）？

我还不知道原因，但我找到了一个半体面的解决方法，直到我这样做：

[http://abilityforge.com/?p=18](http://abilityforge.com/?p=18)

编辑：这是对似乎是什么问题的详细解释（以及更好的解决方案）：[http ://blog.davidebbo.com/2011/08/how-odata-quirk-killed-nuget-server.html](http://blog.davidebbo.com/2011/08/how-odata-quirk-killed-nuget-server.html)

# c# - 在 C# 中使用 IProgressDialog 进行线程化

> ID：10893113
> 
> 赞同：1
> 
> 时间：2012-06-05T07:13:01.763
> 
> 标签：c#, multithreading, invoke

我想将本机 Windows **ProgressDialog**添加到我的 c# 应用程序。为了更好地控制，我定义了一个*OnUserCancelled*事件。从主窗体调用**ShowDialog()**后， *ProgressDialog*类启动一个线程，检查原生*ProgressDialog*是否取消。但问题是*IProgressDialog*属于主线程，无法从检查线程访问。错误很严重：

> 无法将类型为“WindowsDialogs.Invokes.Interfaces.IProgressDialogC”的 COM 对象转换为接口类型“WindowsDialogs.Invokes.Interfaces.IProgressDialog”。此操作失败，因为 IID 为“{EBBC7C04-315E-11D2-B62F-006097DF5BD4}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)） .

我想知道是否有任何方法可以将我的命令调用到主类（例如.net Form 中的**Invoke()**方法）。

***注意：Timer 类也有同样的问题...***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:15:14.287

您应该对该 UI 主题中的进度对话框进行所有调用。在 WPF 中，我这样做：

```
Dispatcher.Invoke((Action)delegate()
{
    _progressDialog.SetProgress(percentComplete, 100);
}); 
```

对于 WinForms，我想这将是 Control.Invoke：http: [//msdn.microsoft.com/en-us/library/zyzhdc6b.aspx](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T14:06:19.837

正如@karlas 所指出的，这是跨线程调用的问题。

这是我使用内部计时器定期监视取消按钮状态的解决方案：

```
private void _timerCallback(object state)
{
    _parentForm.Invoke((Action) delegate {
        try
        {
            if (HasUserCancelled)
            {
                Cancelled?.Invoke(this, EventArgs.Empty);
            }
        }
        catch (Exception)
        {
            // Swallow
        }
    });
} 
```

在这样`_parentForm`的方法中设置字段的位置`Show()`：

```
public void Show(IWin32Window parent){
    if (_parentForm == null)
        _parentForm = Form.ActiveForm;
    ...
} 
```

# c# - ServiceController 显示不正确的 MachineName

> ID：10893116
> 
> 赞同：4
> 
> 时间：2012-06-05T07:13:18.997
> 
> 标签：c#, windows-services

我有以下代码

```
 private DataTable GetServices(string[] serviceNames)
    {
        DataTable dt = new DataTable("Services");
        dt.Columns.Add("MachineName", typeof(string));
        dt.Columns.Add("ServiceName", typeof(string));
        dt.Columns.Add("ServiceStatus", typeof(string));

        ServiceController[] services = ServiceController.GetServices();
        foreach (ServiceController scTemp in services)
        {
            if (serviceNames.Contains(scTemp.DisplayName))
            {

                dt.Rows.Add(scTemp.MachineName, scTemp.DisplayName, scTemp.Status);
            }
        }
        return dt;
    } 
```

它返回以下内容

> MachineName,ServiceName,ServiceStatus
> .,Adobe Flash Player 更新服务,已停止
> .,应用程序体验,正在运行
> .,应用层网关服务,已停止
> .,应用程序主机助手服务,正在运行

`scTemp.MachineName`返回一个`.`

我怎样才能让它返回真实的计算机名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T07:19:25.877

这 ”。” 表示本地计算机。要使用真实的 MachineName，您可以使用类 Environment 的属性[MachineName](http://msdn.microsoft.com/en-us/library/system.environment.machinename)。

要解决您的问题，如果 ServiceController 的 MachineName 返回“.”，您需要添加自定义映射。

```
if (scTemp.MachineName.Equals(".")) {
  dt.Rows.Add(Environment.MachineName, scTemp.DisplayName, scTemp.Status);
}
else {
  dt.Rows.Add(scTemp.MachineName, scTemp.DisplayName, scTemp.Status);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T07:21:16.093

来自 MSDN：ServiceController.MachineName - 运行与此 ServiceController 实例关联的服务的计算机的名称。默认值为本地计算机 (".")。

您可以通过 Environment.MachineName 获取本地计算机名称

[http://msdn.microsoft.com/en-us/library/system.environment.machinename(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.environment.machinename(v=vs.71).aspx)

# javascript - 用户对 JSDuck 文档的评论？

> ID：10893120
> 
> 赞同：1
> 
> 时间：2012-06-05T07:13:44.973
> 
> 标签：javascript, extjs, documentation-generation, jsduck

[JSDuck](https://github.com/senchalabs/jsduck)在生成的文档中提供用户反馈。Sencha 在他们的代码文档中使用了这个。它在[博客文章](http://www.sencha.com/blog/commenting-on-documentation)中有所描述。

我也想为我们的开发团队使用该评论功能。

谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:52:03.207

JSDuck 现在具有可作为不同项目使用的评论功能... [https://github.com/senchalabs/jsduck-comments](https://github.com/senchalabs/jsduck-comments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:04:13.530

如果你想按照这些思路做一些事情，可以使用 JSduck 本身...... [https://github.com/senchalabs/jsduck](https://github.com/senchalabs/jsduck)

# java - 如何编写 jXLS 模板以及在哪里编写

> ID：10893121
> 
> 赞同：2
> 
> 时间：2012-06-05T07:13:50.347
> 
> 标签：java, excel, jxls

我正在尝试使用 jXLS 将数据从列表导出到 Excel 工作表。我需要使用 jXLS 创建一个 Excel 模板并使用该模板打印出一个数据列表。我有一个名为 Department 的 Bean 类，我需要使用 forEach 语句循环遍历列表并将数据写入 Excel 工作表。

有人可以告诉我如何以及在哪里可以编写我的 Excel 模板吗？我知道我里面的代码应该是这样的 -

```
 <jx:forEach items="${departments}" var="department">
                ${department.name} | ${department.chief}
            </jx:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:16:20.017

您需要创建一个 Excel 模板文件，在其中定义您需要为集合中的对象数量重复的基本结构。

编码

```
<jx:forEach items="${departments}" var="department">
                ${department.name} | ${department.chief}
            </jx:forEach> 
```

将进入该模板excel。

然后您需要在 java 代码中使用 JXLS API 来从此模板生成 excel。

```
Map contextBeans = new HashMap();
contextBeans.put("departments", departmentList);
xlsTransformer.transformXLS(xlsTemplateFileURL.getPath(), contextBeans, reportFileURL.getPath()); 
```

此代码将使用在 contextBeans Map 中加载的集合填充的模板文件创建 excel 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:17:33.977

在语法上，jXLS 与 JSTL 非常相似。在您的情况下，您只需要一个 Excel 模板，其中的列将填充 jXLS 符号，例如

```
 cola              col b
1  {department.name}  {department.chief} 
```

在 Java 中，您需要一个 HashMap，它将包含您所有部门 bean 的 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T02:20:03.917

您可以将它们粘贴到 Excel 模板的工作表中，任何行都可以。也许您应该先在[http://jxls.sourceforge.net/](http://jxls.sourceforge.net/)中查看示例。

# regex - Reg Ex 用于以下数据

> ID：10893126
> 
> 赞同：0
> 
> 时间：2012-06-05T07:14:11.680
> 
> 标签：regex, solr

我有一个这样的 XML 数据字段

```
<some info></some info><Some info2></some info2><description><lot of info></description><some more info></some more info><description><info></description> 
```

我想要一个将删除 `<description>anything</description>` 所有“描述”标签的正则表达式。（可能有任意数量）

我必须把它作为 Solr 模式中的字符模式过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:17:57.187

你可能会得到一些人会告诉你：

1.  您无法使用 RegEx 解析 XML。
2.  您应该使用 DOM 库。

但是，如果您只想删除`<description>`标签之间的内容，它应该像搜索`<description>.*?</description>`和替换一样简单。

# java - JDBC Java ALTER TABLE 语法错误

> ID：10893127
> 
> 赞同：0
> 
> 时间：2012-06-05T07:14:15.893
> 
> 标签：java, ms-access, jdbc

我正在使用带有 MS Access 数据库的 Java 编写程序。我的程序的改编片段

```
Statement s;
String[] tabinfo = {"Albara", "TBala"};
s.execute("ALTER TABLE " + tabinfo[0] + " ALTER COLUMN " + 
    tabinfo[1] + " SET DEFAULT 0 "); 
```

我得到的是一个`SqlException: ALTER TABLE syntax error`. 我做错了什么？我拥有该文件的全部权利。表和列的名称是正确的，因为名称是从数据库元数据中提取的，并且我没有修改系统表。

这是一个修改我自己的数据库的程序，该程序被我几年前制作的程序使用，因此更改数据库是不可能的。也不可能使用 Java，我的客户计算机不会安装 .Net framework 3.5，我也不会去那里进行信息学维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:01:55.170

该查询不符合`ALTER TABLE`MSDN [ALTER TABLE 语句 (Microsoft Access SQL)中指定的 MS Access 语法](http://msdn.microsoft.com/en-us/library/ff196148.aspx)

其他[来源](http://forums.asp.net/t/1586580.aspx/1?ALTER%20TABLE%20with%20DEFAULT%20value)似乎表明您需要在设置默认值时包含数据类型，例如

```
ALTER TABLE <tableName> ALTER COLUMN <columnName> <columnType> DEFAULT <defaultValue> 
```

（另请注意它不包括`SET`）

这个 SO 问题似乎表明您需要启用 SQL Server 语法兼容性才能使用它： [SQL to add column with default value - Access 2003](https://stackoverflow.com/questions/47535/sql-to-add-column-with-default-value-access-2003)

# html - 如何在我的 html 中运行 windows 媒体播放器视频我收到错误代码？

> ID：10893128
> 
> 赞同：0
> 
> 时间：2012-06-05T07:14:23.530
> 
> 标签：html, internet-explorer-8, windows-media-player

我是新手，在我的 html 中运行视频时遇到错误，因为我使用的是 IE 8，我的代码在这里，

```
<OBJECT id="VIDEO"  
CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"
type="application/x-oleobject">
<PARAM NAME="Peace1.wmv" VALUE="Peace1.wmv">
<PARAM NAME="SendPlayStateChangeEvents" VALUE="True">
<PARAM NAME="AutoStart" VALUE="True">
<PARAM name="uiMode" value="none">
<PARAM name="PlayCount" value="9999">
</OBJECT> 
```

请提前帮我解决

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:44:35.973

```
 <object width="100%" height="100%"  type="video/x-ms-asf" url="Peace1.wmv" data="Peace1.wmv" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6">
  <param name="url" value="Peace1.wmv">
  <param name="filename" value="Peace1.wmv">
  <param name="autostart" value="1">
  <param name="uiMode" value="full" />
  <param name="autosize" value="1">
  <param name="playcount" value="1"> 
  <embed type="application/x-mplayer2" src="Peace1.wmv" width="100%" height="100%"    autostart="true" showcontrols="true" 

pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed>
</object> 
```

试试ablove代码，让我知道

# javascript - 如果服务器上有新数据，则发出警报消息

> ID：10893129
> 
> 赞同：0
> 
> 时间：2012-06-05T07:14:27.493
> 
> 标签：javascript, jquery, json, alert

我正在构建一个简单的 PhoneGap 应用程序，我从 MYSQL 服务器获取新消息并将它们显示给用户。应用程序应该得到这样的 JSON

```
 {
    "key": [
        {
            "Message": "test"
        }
    ]
} 
```

每分钟从服务器发送一次，并在有新内容时发出警报。但是现在它每次都会提醒消息“test”，即使 JSON 已更改为：

```
{"key":[]} 
```

在应用程序第一次从服务器询问它之后。

这是我使用的 JS

```
 setInterval ( "getMessages()", 60000 );
function getMessages() {
    $.getJSON(serviceURL + 'messages.php' ,function(result){
    $.each(result.key, function(index, field){
    alert(field.message);
  });
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:24:16.460

您的浏览器可能正在缓存该请求。将您的网址更改为：

```
serviceURL + 'messages.php?' + new Date().getTime() 
```

这将诱使浏览器每次都认为它是不同的请求，从而避免缓存问题。

# php - 如何使用 between 条件从表中选择值

> ID：10893137
> 
> 赞同：0
> 
> 时间：2012-06-05T07:15:40.350
> 
> 标签：php, mysql, sql

我想要一个条件来获取日期之间的值。

我有一个表名用户和一个列日期，我想使用日期条件从数据库中获取值。

```
select sum(visitor) AS V FROM user  WHERE date  < '21-05-2012' AND dDateTime > '11-05-2012' 
select sum(visitor) AS c FROM user  WHERE date  < '21-06-2012' AND dDateTime > '11-06-2012'
select sum(visitor) AS s FROM user  WHERE date  < '21-07-2012' AND dDateTime > '11-07-2012'
select sum(visitor) AS g FROM user  WHERE date  < '21-08-2012' AND dDateTime > '11-08-2012' 
```

我希望这四个查询在单个 sql 语句中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:23:41.813

也许是这样的：

```
select 
    sum(CASE WHEN date  < '21-05-2012' AND dDateTime > '11-05-2012' THEN visitor ELSE 0 END) AS V, 
    sum(CASE WHEN date  < '21-06-2012' AND dDateTime > '11-06-2012' THEN visitor ELSE 0 END) AS c,
    sum(CASE WHEN date  < '21-07-2012' AND dDateTime > '11-07-2012' THEN visitor ELSE 0 END) AS s,
    sum(CASE WHEN date  < '21-08-2012' AND dDateTime > '11-08-2012' THEN visitor ELSE 0 END) AS g
FROM 
    user 
```

# jquery - 使用 jQuery 检查表中的所有复选框

> ID：10893138
> 
> 赞同：1
> 
> 时间：2012-06-05T07:15:42.877
> 
> 标签：jquery, select, checkbox, html-table

我的表如下所示：

```
<table id="tableOne" class="yui">
    <thead>
        <tr>
            <th>
                <div><input type="checkbox" /></div>
            </th>
            <th>
                <div>Name</div>
            </th>
            <th>
                <div>English</div>
            </th>
            <th>
                <div>Spanish</div>
            </th>
            <th>
                <div>Math</div>
            </th>
            <th>
                <div>History</div>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <div><input type="checkbox" /></div>
            </td>
            <td>
                <div>Bob Smith</div>
            </td>
            <td>
                <div>80</div>
            </td>
            <td>
                <div>70</div>
            </td>
            <td>
                <div><input type="checkbox" /></div>
            </td>
            <td>
                <div><input type="checkbox" /></div>
            </td>
        </tr>
        <tr>
            <td>
                <div><input type="checkbox" /></div>
            </td>
            <td>
                <div>George Jones</div>
            </td>
            <td>
                <div>90</div>
            </td>
            <td>88</div>
            </td>
            <td>
                <div><input type="checkbox" /></div>
            </td>
            <td>
                <div><input type="checkbox" /></div>
            </td>
        </tr>
    </tbody>
</table> 
```

我正在使用以下 javascript 在单击标题中的复选框时选中/取消选中第一列中的所有复选框。

```
$(document).ready(function() {
    $("#tableOne thead tr th:first input:checkbox").click(function() {
        var checkedStatus = this.checked;
        $("#tableOne tbody tr td:first-child input:checkbox").each(function() {
            this.checked = checkedStatus;
        });
    });
}); 
```

它不工作。当我单击标题的复选框时，第一列中的所有复选框都没有被选中。我知道我在这里做错了什么。因为`<tr>`标签在里面`<div>`，我需要`<div>`在选择时提供这个。但我无法弄清楚`div`在 Javascript 中的确切位置。我已经尝试了一些组合，但它们似乎不起作用。

请帮忙。

编辑：我在 HTML 页面中有多个表格，我只希望这个表格受到影响。此外，只需要检查第一列中的复选框。

再次编辑：对不起，我的表格正在以上述方式呈现。更改了表格 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:27:05.583

您的 HTML 代码已损坏，这将使您的代码在某些浏览器（包括 Internet Explorer）中失败。表格单元格周围不能有 div 标签。

不同的浏览器以不同的方式处理损坏的代码。例如，Firefox 将 div 标签移到表格之外，因此它们不会破坏您的代码。Internet Explorer 将表格单元格移到 div 标记之外，但在表格单元格之前的表格行内仍有一个损坏的无名标记，因此`:first-child`选择器不起作用，因为表格单元格不是表格行中的第一个子项。

如果您删除 div 标签，它可以正常工作：http: [//jsfiddle.net/Guffa/jKxNF/1/](http://jsfiddle.net/Guffa/jKxNF/1/)

在 IE9、Firefox、Chrome、Safari、Opera 中测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:21:55.857

// 一开始所有的复选框都是空的

```
var checked = false;
$(element).click(function(){
      if (checked){
          $("#tableOne").find("input[type=checkbox]").removeAttr("checked");
          checked = false;
      }
      else{
          $("#formId").find("input[type=checkbox]").setAttr("checked", "checked");
          checked = true;
      }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:19:50.473

首先，您的 HTML 无效，因为 TR 标签位于 DIV 中，但这对 jQuery 来说应该不是问题。我看不出您的代码有什么问题，但绝对可以简化。以下方法应该有效：

```
$("#tableOne thead input:checkbox").click(function() {
    $("#tableOne tbody input:checkbox").prop('checked', $(this).is(':checked'));
}); 
```

请注意，您不必指定每个子节点。`$('#tableOne thead :checkbox')`将在 中找到所有复选框`thead`，无论是否或注意这些复选框是否在任何嵌套的子标签中。但是，`$('#tableOne thead > :checkbox')`将要求该复选框是`thead`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T06:32:57.070

我认为这是最简单的方法，只需将 chk 作为 ID 前缀，如 chkPresent123 等

```
$("#invoiceReceiptTable > tbody > tr").each(function (i, el) {

       $($(this).find("input[id^=chk]")).prop('checked', true);

    }
}); 
```

这就是您如何获得所有选中的复选框。所有检查的 id 都将在 $IDs 中

```
$IDs = $("#invoiceReceiptTable input:checkbox:checked").map(function () {
    var id = $(this).attr("id");
    return id;
}).get(); 
```

# json - riak search - json 属性都是字符串？

> ID：10893140
> 
> 赞同：2
> 
> 时间：2012-06-05T07:15:47.830
> 
> 标签：json, riak

我在 riak 搜索中存储 json 文档，例如：

```
{
  boolean: true,
  number: 1.234,
  string: "Gretchen"
} 
```

但是，在查询它们（riak search）时，我注意到查询返回的字段都是字符串：

```
{
  boolean: "true",
  number: "1.234",
  string: "Gretchen"
} 
```

这使得查询结果对于绑定到对象毫无用处，除非我随后通过它们的键再次依次检索每个文档。这是否可以返回正确键入的字段？例如，Couch+lucene 正确地做到了这一点，并使其对查询+绑定非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:03:48.937

听起来这是不可能的，你需要为此使用 map reduce。来自芭蕉的肖恩：

> “搜索查询返回给您的是“索引文档”，或者是在将输入添加到搜索索引之前对其进行转换的结果；这也意味着深度嵌套的字段将被展平。如果您想要原始的，您可以使用MapReduce 检索搜索查询产生的文档。”

# microsoft-metro - Metro 版 IE10 插件

> ID：10893141
> 
> 赞同：1
> 
> 时间：2012-06-05T07:15:55.673
> 
> 标签：microsoft-metro, browser-addons, internet-explorer-10

我需要创建一个简单的插件，它可以读取当前站点的页面并对其进行修改（如 Chrome 的 javascript 扩展）。如果它可以将其菜单项添加到浏览器的上下文菜单中，或者将其图标添加到浏览器中的某个位置（例如在多功能框附近的 Chrome 中），那就太好了。

我正在为 Windows 8 开发程序，该程序必须与站点的表单交互（阅读并修改）。

# zend-framework - include_once(Zend\Uri\Http.php) [ function.include-once ]：打开流失败：没有这样的文件或目录

> ID：10893144
> 
> 赞同：0
> 
> 时间：2012-06-05T07:16:15.777
> 
> 标签：zend-framework, yii, youtube-api

我使用 Zend 框架和 Yii 使用 Youtube API 创建上传视频功能。我收到了这个错误

`include_once(Zend\Uri\Http.php) [<a href='function.include-once'>function.include-once</a>]: failed to open stream: No such file or directory`尝试使用时`Zend_Gdata_AuthSub::getAuthSubSessionToken($_GET['token'])`。我有 ZendAutoloader，我正在使用 Yii 框架进行开发。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:31:43.293

正如您所提到的，Zend Framework 使用它自己的自动加载器，我相信它可能会与 Yii 的自动加载器发生冲突。

[这是一篇不错的博客文章](http://www.yiiframework.com/wiki/101/how-to-use-phpexcel-external-library-with-yii/)，其中有一个很好的示例，说明了如何实现与第三方工具的集成，但其要点是关闭 Yii 自动加载器，加载您的类，然后重新加载 Yii 自动加载器。

```
// get a reference to the path of PHPExcel classes 
$phpExcelPath = Yii::getPathOfAlias('ext.phpexcel.Classes');

// Turn off our amazing library autoload 
spl_autoload_unregister(array('YiiBase','autoload'));        

// Include your external library file.
include($phpExcelPath . DIRECTORY_SEPARATOR . 'PHPExcel.php');

// Application logic.

// Once we have finished using the library, give back the power to Yii... 
spl_autoload_register(array('YiiBase','autoload')); 
```

# java - Eclipse Indigo 的 Swing Explorer 插件

> ID：10893146
> 
> 赞同：2
> 
> 时间：2012-06-05T07:16:24.607
> 
> 标签：java, eclipse, swing, eclipse-indigo

我设法独立运行 Swing Explorer，但真的很想为它运行一个 Eclipse 插件。据我所知，有一个支持 Eclipse 3.2/3.4 的插件，但我无法让它在 Indigo 中工作或为 Indigo 找到更新的插件。有没有人设法让它工作或知道 Indigo 的插件？如果没有，可以考虑另一个具有相同功能的插件。

我已经看到提到 JDeveloper 具有一些类似的功能，但目前这不是一个可行的选择，因为我们是基于 Eclipse 的。

问候，山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:31:21.943

我还广泛使用 SwingExplorer 进行调试，但不是插件本身。看看我如何管理它的启动配置。

主班

*   `org.swingexplorer.Launcher`

程序参数：

*   `org.yourcompany.YourMain`

我添加到 JVM Arguments

*   `-javaagent:swag.jar`
*   `-Xbootclasspath/a:swag.jar`
*   `-Dswex.mport=63812`
*   `-Dcom.sun.management.jmxremote`

在类路径中

*   1 个新条目：（`swexpl.jar`包含`org.swingexplorer.Launcher`）

这种方法的好处是它不需要 SwingExplorer 插件，只需要 jars。当您单击任何跟踪时，您拥有的 SwingExplorer 功能非常强大，只有一个功能缺失，即 Eclipse 中的 Jump-to-code。

旁注：我还在后台使用 Groovy 控制台，这样我就可以随时轻松地更改我想要的任何组件（我写了一个函数 - 受 JQuery 选择器的启发 - 来遍历 Swing 层次结构）。如果你有兴趣，我也可以写得更详细。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:28:16.810

我在 Indigo 中使用它。

[您可以在此处](http://www.swingexplorer.com/?page=download)获取 jar 文件。

只需单击链接*swexpl-eclipse.zip*。您必须输入电子邮件，他们会向您发送下载链接。我还没有找到其他方法，但现在还没有收到任何时事通讯或类似的东西。

然后只需按照也可以在该页面上找到的安装说明进行操作。没什么复杂的

# c - 编译器优化，线程安全？

> ID：10893148
> 
> 赞同：6
> 
> 时间：2012-06-05T07:16:33.420
> 
> 标签：c, visual-c++, compiler-construction, compiler-optimization, compiler-theory

我有一个关于编译器可能做的优化的问题。

下面的代码不言自明（这是一个例子）：

```
typedef struct  test
{
  short i;
}               s_test;

int function1(char *bin)
{
  s_test foo;

  lock(gmutex);
  foo.i = *(int*)bin * 8;
  unlock(gmutex);

  sleep(5);
  //
  // Here anything can happen to *bin in another thread
  // an inline example here could be: *(volatile int *)bin = 42;
  //

  int b = foo.i + sizeof(char*);

  return (b > 1000);
} 
```

编译器能否将最后几行替换为

```
return ((*(int*)bin * 8 + sizeof(char*)) > 1000); 
```

在 gcc 4.4 中使用 -O2 或 -O3 似乎不是这种情况，但其他编译器和其他编译标志可能是这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T07:31:55.173

我不认为编译器会做这种优化。

```
unlock(gmutex) 
```

这是函数，编译器不能假设 bin 指向的值会在解锁函数中改变。

例如，也许 bin 来自一个地球仪。所以 bin 的优化不能跨越函数调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T07:45:21.013

您的示例不必要地复杂，因为您正在阅读`bin`与声明不同的类型。别名规则很复杂，`char`甚至很特殊，我不会对此发表评论。

假设您的声明将是`int* bin`（因此您不必强制转换指针）编译器将无权跨函数调用重新排序语句，它们形成所谓的序列点。`*bin`调用之前和之后的值`unlock`可能不同，所以它*必须*在调用之后加载值。

*编辑：*正如 slartibartfast 所指出的，对于这个参数，它`unlock`是（或包含）一个函数调用，而不仅仅是一个由编译器解析为一系列操作的宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:38:51.737

正如我在直接回复中所说：您的互斥锁没有保护任何东西恕我直言。*bin 指向的 char 数组可以在 int 访问期间被修改，因此根据您的机器，您甚至无法获得关于您想要访问的内存的一致视图。回到您的问题：编译器不会将源代码转换为您设想的序列，但它很可能会生成机器语言，实际上它的行为方式与您的源代码一样。如果它能够检查函数 lock、unlock 和 sleep（这似乎是宏）并且可以推断出所涉及的内存位置没有副作用并且没有实现定义的调用例如 sleep() 的含义将呈现临时（“缓存”，尽管标准没有 t 使用这个术语）值无效，那么它有权产生一个指令序列，就像你给的那样。C（最高 C99）本质上是单线程的，编译器可以采用它想要的任何优化策略，只要代码表现得“好像”它会在理想的假设 C 机器上运行。Jens 提到的序列点不会影响单线程条件下的正确性：编译器可以在整个函数期间将 foo 保存在寄存器中，甚至可以将 foo.i 别名为 *bin 指向的内存位置，所以这段代码本质上是危险的（尽管我认为它不会在大多数编译器上表现出这种行为）。C（最高 C99）本质上是单线程的，编译器可以采用它想要的任何优化策略，只要代码表现得“好像”它会在理想的假设 C 机器上运行。Jens 提到的序列点不会影响单线程条件下的正确性：编译器可以在整个函数期间将 foo 保存在寄存器中，甚至可以将 foo.i 别名为 *bin 指向的内存位置，所以这段代码本质上是危险的（尽管我认为它不会在大多数编译器上表现出这种行为）。C（最高 C99）本质上是单线程的，编译器可以采用它想要的任何优化策略，只要代码表现得“好像”它会在理想的假设 C 机器上运行。Jens 提到的序列点不会影响单线程条件下的正确性：编译器可以在整个函数期间将 foo 保存在寄存器中，甚至可以将 foo.i 别名为 *bin 指向的内存位置，所以这段代码本质上是危险的（尽管我认为它不会在大多数编译器上表现出这种行为）。

# extjs - 如何防止在extjs中双击时触发单击事件

> ID：10893149
> 
> 赞同：6
> 
> 时间：2012-06-05T07:16:37.403
> 
> 标签：extjs, event-handling, extjs4.1, user-experience, double-click

我有一个树面板，对于每个节点我都有单击和双击事件。但是当我双击它时，它也会触发单击事件。那么如何防止双击时触发单击事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T13:45:43.010

通常*同时*使用单击和双击事件被认为是一种不好的做法，并且非常不鼓励使用。

但是，如果您仍然想这样做，能够区分单击和双击的唯一方法是通过测量单击之间的时间来人为地添加这种区分。

这个想法是您不会立即执行单击操作，而是等待第二次单击。如果第二次点击很快到来，那么你的双击动作就会被触发。否则，您的单击操作会在延迟后触发。

您的代码将类似于：

```
var singleClickTask = new Ext.util.DelayedTask(singleClickAction),  // our delayed task for single click
    singleClickDelay = 100; // delay in milliseconds

function onClick() {
    singleClickTask.delay(singleClickDelay);
}

function onDblClick() {
    // double click detected - trigger double click action
    doubleClickAction();
    // and don't forget to cancel single click task!
    singleClickTask.cancel();
}

function singleClickAction() {
    // something useful...
}

function doubleClickAction() {
    // something useful...
}

// setting event handlers on an Element
elem.on('click', onClick);
elem.on('dblclick', onDblClick); 
```

明显的缺点是：

*   单击操作会有延迟
*   在不同的操作系统中，触发双击的点击间隔可能会有不同的设置，因此硬编码 singleClickDelay 是不可靠的
*   JavaScript 计时器不是 100% 准确的，并且在具有不同性能的系统上结果可能会有所不同

我不知道有什么更好的解决方案，而且我不鼓励您同时使用单击和双击，这通常会导致用户体验受损。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-28T13:10:20.213

我认为最好在第一次点击事件而不是第二次点击事件上执行操作。您可以通过设置检查每个点击事件的布尔值来做到这一点。

此代码演示了一种方法

```
onGridRowClick: function(view, record, item, index, e, eOpts) {
    if (record._task_in_progress) {
       return;
    }
    // Let the second click as part of the double click to be ignored
    record._task_in_progress = true;

    // Emulating async task here
    setTimeout(function() {
        record._task_in_progress = false;
    }, 1000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-07T08:49:03.930

另一个想法是使用布尔值作为标志来控制发生的事情。

双击事件的相关顺序为：单击、双击、单击

您不能阻止第一个 Click 事件，但通过在 Double Click 事件中设置布尔值 True，并在 Click 事件中对其进行测试，您可以阻止第二个 Click 运行，并可能破坏 Double Click 应该执行的操作做。

我有带有命令按钮的表单，我希望单击打开另一个表单，然后双击关闭它。示例代码：

```
Private flg As Boolean

Private Sub Button_Click()
  If flg Then
    flg = False
  Else
    ... code to open the form
  End If
End Sub

Private Sub Button_DblClick(Cancel As Integer)
  flg = True
  ... code to close the form
End Sub 
```

# android - Android 褪色/变暗类似菜单选项

> ID：10893150
> 
> 赞同：0
> 
> 时间：2012-06-05T07:16:38.243
> 
> 标签：android, android-layout, android-animation

我有一个带有一些图标的布局。当我触摸底部的一个图标时，底部屏幕的 1/4 会变成我自己创建的选项菜单。

我的目标是现在淡化/变暗屏幕的其余部分，底部的 1/4 除外。还可以使屏幕的这一部分处于非活动状态，例如 android 中的 optionMenu。

你知道我该怎么做吗？我应该创建两个单独的布局，一个带有图标，另一个带有菜单？

谢谢你。

这是初始布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg" >

 <RelativeLayout
     android:id="@+id/mainRelativeLayout"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_alignParentRight="true"
     android:layout_alignParentTop="true"
     android:layout_marginLeft="10dp"
     android:layout_marginTop="10dp" >

     <TextView
         android:id="@+id/CenterTextViewJournals"
         android:layout_width="wrap_content"
         android:layout_height="20dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:text="         " />

     <ImageView
         android:id="@+id/invisibleImageView"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true" />

     <ImageView
         android:id="@+id/EditorialBoard"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_above="@+id/CenterTextViewJournals"
         android:layout_centerHorizontal="true"
         android:onClick="goEditorialBoard"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/Contact"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_alignBottom="@+id/CenterTextViewJournals"
         android:layout_toRightOf="@+id/CenterTextViewJournals"
         android:onClick="goContact"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/AimsAndScope"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_alignBottom="@+id/CenterTextViewJournals"
         android:layout_toLeftOf="@+id/CenterTextViewJournals"
         android:onClick="goAimsAndScope"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/Articles"
         android:layout_width="180dp"
         android:layout_height="180dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:onClick="goArticles"
         android:paddingBottom="9px"
         android:paddingLeft="6px"
         android:paddingRight="8px"
         android:paddingTop="4px"
         android:src="@drawable/button_about_active" />

 </RelativeLayout>

<ImageView
    android:id="@+id/StartSelectingDifferentJournal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:scaleType="fitXY"
    android:src="@drawable/journal_selecting_barr" />

<Gallery
    android:id="@+id/gallery"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/SelectDifferentJournaleditText"
    android:layout_alignParentLeft="true"
    android:gravity="bottom" />

<EditText
    android:id="@+id/SelectDifferentJournaleditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentBottom="true"
    android:visibility="gone"
    android:hint="Search Journal">
</EditText>

<ImageView
    android:id="@+id/SelectingDifferentJournal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/gallery"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:gravity="bottom"
    android:scaleType="fitXY"
    android:src="@drawable/journal_selecting_barr" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:58:30.940

好的，这是一种简单的方法，但是您必须修改布局设置。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<RelativeLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg" >

 <RelativeLayout
     android:id="@+id/mainRelativeLayout"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_alignParentRight="true"
     android:layout_alignParentTop="true"
     android:layout_marginLeft="10dp"
     android:layout_marginTop="10dp" >

     <TextView
         android:id="@+id/CenterTextViewJournals"
         android:layout_width="wrap_content"
         android:layout_height="20dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:text="         " />

     <ImageView
         android:id="@+id/invisibleImageView"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true" />

     <ImageView
         android:id="@+id/EditorialBoard"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_above="@+id/CenterTextViewJournals"
         android:layout_centerHorizontal="true"
         android:onClick="goEditorialBoard"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/Contact"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_alignBottom="@+id/CenterTextViewJournals"
         android:layout_toRightOf="@+id/CenterTextViewJournals"
         android:onClick="goContact"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/AimsAndScope"
         android:layout_width="120dp"
         android:layout_height="120dp"
         android:layout_alignBottom="@+id/CenterTextViewJournals"
         android:layout_toLeftOf="@+id/CenterTextViewJournals"
         android:onClick="goAimsAndScope"
         android:src="@drawable/button_about_active" />

     <ImageView
         android:id="@+id/Articles"
         android:layout_width="180dp"
         android:layout_height="180dp"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:onClick="goArticles"
         android:paddingBottom="9px"
         android:paddingLeft="6px"
         android:paddingRight="8px"
         android:paddingTop="4px"
         android:src="@drawable/button_about_active" />

 </RelativeLayout>

<ImageView
    android:id="@+id/StartSelectingDifferentJournal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:scaleType="fitXY"
    android:src="@drawable/journal_selecting_barr" />
</RelativeLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/dimmer_layout"/>
<RelativeLayout
    layout_width="match_parent"
    layout_height="match_parent">
<Gallery
    android:id="@+id/gallery"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/SelectDifferentJournaleditText"
    android:layout_alignParentLeft="true"
    android:gravity="bottom" />

<EditText
    android:id="@+id/SelectDifferentJournaleditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentBottom="true"
    android:visibility="gone"
    android:hint="Search Journal">
</EditText>

<ImageView
    android:id="@+id/SelectingDifferentJournal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/gallery"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:gravity="bottom"
    android:scaleType="fitXY"
    android:src="@drawable/journal_selecting_barr" />
</RelativeLayout>
</FrameLayout> 
```

打开菜单后，将线性布局的背景设置为透明黑色，例如 0x55000000。

```
void onMenuOpen() {
    openTheMenu();
    LinearLayout llDimmer = (LinearLayout)findViewById(R.id.dimming_layout);
    llDimmer.setBackgroundColor(0x55000000);
} 
```

然后您可以在菜单关闭后将背景颜色设置为 0x00000000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:06:07.460

您可以使用[**Popwindow**](http://developer.android.com/reference/android/widget/PopupWindow.html)显示选项菜单。

# php - 使用 Yii 模型创建或更新多个 mysql 行

> ID：10893151
> 
> 赞同：1
> 
> 时间：2012-06-05T07:16:41.527
> 
> 标签：php, mysql, frameworks, yii

我最近开始与 Yii 合作，所以请原谅我的无知 :)

我有一个返回多行（数组数组）的 SQL 查询，然后我想将这些行插入 DB：

```
$queryResults = $command->queryAll();
$model=new Campaigns();
foreach ($queryResults as $CActive) {
    $model->setIsNewRecord(true);
    $model->attributes=$CActive;

if($model->save($CActive)) {
    echo "Good!";
} 
```

问题是即使我使用新记录设置模型，它也有以前 PK 的记录（因为它是相同的模型）。

我需要为每一行创建一个新模型吗？（似乎不太可能……）

一如既往地感谢，丹尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T07:18:46.287

您必须在每次插入时创建一个新实例，就像这样，否则您只是一遍又一遍地更新一个模型。

```
$queryResults = $command->queryAll();

foreach ($queryResults as $CActive) {
    $model=new Campaigns;  
    $model->attributes=$CActive;

    if($model->save($CActive))  echo "Good!";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T07:37:53.823

尝试这个..

```
 $queryResults = $command->queryAll();

         foreach ($queryResults as $CActive) {

            $model=new Campaigns;  

            $model->attributes=$CActive;

            if($model->save($CActive)) {
    echo "Good!";
} 
```

那么你必须需要为每一行创建实例..它的 Yii 核心要求.. }

# php - PHP ftp_rawlist - 目录前的选项

> ID：10893154
> 
> 赞同：1
> 
> 时间：2012-06-05T07:16:50.737
> 
> 标签：php, module, ftp, options

我正在寻找选项列表，可以在目录之前的方法 ftp_nlist 和 ftp_rawlist 中的 PHP 模块 FTP 中使用。我发现了一些例子：

```
 // include hidden files
 ftp_rawlist($h, '-a /');

 // more complex - only names of files
 ftp_rawlist($h, '-1l /'); 
```

也许它是特定于 FTP 服务器的，但两者都适用于 Windows 和 Linux。我有任何带有完整列表的规范。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:29:48.553

选项特定于 FTP 服务器的 LIST 命令。

Linux ProFTPd 服务器上可用的 ListOptions。 [http://www.proftpd.org/docs/howto/ListOptions.html](http://www.proftpd.org/docs/howto/ListOptions.html)

# c++ - 如何使用 TIdHTTPProxyServer 重定向 Post 请求

> ID：10893157
> 
> 赞同：3
> 
> 时间：2012-06-05T07:17:17.180
> 
> 标签：c++, delphi, indy10, c++builder-xe2

目前我想使用 Indy10 TIdHTTPProxyServer 重定向特定的 Post 请求。我关注了页面

[http://embarcadero.newsgroups.archived.at/public.delphi.internet.winsock/200904/0904301714.html](http://embarcadero.newsgroups.archived.at/public.delphi.internet.winsock/200904/0904301714.html)

并写了一个简单的示例如下。

```
oid __fastcall TForm3::MyProxyHTTPBeforeCommand(TIdHTTPProxyServerContext *AContext)
{

    if (AContext->Target == "http://example.com/need_redirect_url" ) {

        TIdIOHandler* io = AContext->Connection->IOHandler;

        io->WriteLn("HTTP/1.0 302 Moved Temporarily");
        io->WriteLn("Location:  http://exampledomain.com/target_url");
        io->WriteLn("Connection: close");    
    }
} 
```

如果我将“ [http://sample.com/need_redirect_url](http://sample.com/need_redirect_url) ”按到浏览器的 URL 栏中，它会起作用。但是，如果它是针对同一 URL 的 XMLHttpRequest，则不返回任何内容（无论是 Post 还是 Get）。

我不得不承认我真的不熟悉 HTTP 的工作原理。我也想知道是否有更好的方法来做我想做的事。

虽然我使用的是 C++Builder XE2。Delphi 示例也受到赞赏，因为使用 C++ 使用 indy 组件的示例较少

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:28:14.890

您的代码没有写一个空行来终止您发送的 HTTP 标头。您还需要引发异常以防止在事件处理程序退出`TIdHTTPProxyServer`后导航到客户端请求的 URL 。`OnBeforeCommand`

尝试这个：

```
void __fastcall TForm3::MyProxyHTTPBeforeCommand(TIdHTTPProxyServerContext *AContext) 
{ 
    if (AContext->Target == "http://xxx.com/need_redirect_url" )
    { 
        TIdIOHandler* io = AContext->Connection->IOHandler; 

        io->WriteLn("HTTP/1.0 302 Moved Temporarily"); 
        io->WriteLn("Location: http://mydomain.com/target_url"); 
        io->WriteLn("Connection: close");     
        io->WriteLn("");     

        Abort();
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:24:26.857

它看起来像一个`XMLHttpRequest`跨域策略问题，因为`example.com`!= `mydomain.com`-有关背景信息和潜在解决方案，请参阅[http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests](http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests)

# web - 从谷歌网站管理员工具中删除了网址，现在谷歌不在搜索中显示我的网站

> ID：10893158
> 
> 赞同：1
> 
> 时间：2012-06-05T07:17:31.410
> 
> 标签：web, search-engine, sitemap, google-search-console

我开发了该网站，并从 Google 网站管理员工具中删除了类似“ [http://example.com](http://example.com) \”的 URL。

我这样做是因为谷歌在搜索中显示这个标题正在建设中，这是我的上一页。当我完成网站时，我从那里删除了 URL，并添加了站点地图等以获得新的站点副本。现在我在网站管理员工具中看到所有页面都已编入索引，但仍然没有成功。搜索时雅虎和必应显示我的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:02:38.660

在这种情况下，尝试提交站点地图并使用 fetch 作为 googlebot 选项，看看会发生什么。

# c# - SignalR 安全消息传递

> ID：10893160
> 
> 赞同：3
> 
> 时间：2012-06-05T07:17:45.087
> 
> 标签：c#, asp.net-mvc, security, model-view-controller, signalr

所以，我收到了一个与安全相关的问题。

```
// Code that was originally sent to client from the server
var hub = $.connection.hubname;        
hub.name = "UserIdFromDataBase"; 
```

如果某个恶意用户使用相同的代码编写一个简单的 html 页面，他会收到将发送给原始用户的所有消息吗？

（实际上我想组织注册用户之间的聊天，这就是为什么名称/clientid 应该由服务器端提供）。

谢谢

**升级版：**

> 我在项目门户创建了一个相关问题： [https ://github.com/SignalR/SignalR/issues/432](https://github.com/SignalR/SignalR/issues/432)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T22:19:43.380

简短的回答是否定的，但实际上这取决于您的服务器端代码在做什么。

SignalR 将为与集线器的每个连接提供唯一的连接 ID。只要您使用 connectionID 来路由消息，而不是根据客户端提供的值构建自己的路由机制，就可以了。

在您提供的示例中，当用户连接时，他将获得一个唯一的 connectionID。即使第二个用户能够更改客户端代码的值并模仿第一个用户，SignalR 提供的他的 connectionID 也会不同。

有关如何从 [https://github.com/SignalR/SignalR/wiki/Hubs调用特定客户端上的方法的示例](https://github.com/SignalR/SignalR/wiki/Hubs)

```
public class MyHub : Hub
{
     public void Send(string data)
     {
         // Invoke a method on the calling client
         Caller.addMessage(data);

         // Similar to above, the more verbose way
         Clients[Context.ConnectionId].addMessage(data);
     }
} 
```

# video - 全屏加载vimeo嵌入视频

> ID：10893161
> 
> 赞同：2
> 
> 时间：2012-06-05T07:17:49.310
> 
> 标签：video, embed, vimeo

有没有办法使用 vimeo 的嵌入视频和/或 api 以全屏模式加载视频？我在代码中看不到任何简单的方法。

# php - PHP按日期排序？

> ID：10893164
> 
> 赞同：0
> 
> 时间：2012-06-05T07:17:52.723
> 
> 标签：php, sorting

我正在制作一个将日期存储为字符串的新闻提要，例如`Tuesday 05 June 2012 04:14:44 PM`.

我想做两件事。

1.  按日期对新闻源进行排序（从最新到最旧）
2.  如果日期是今天的日期，则仅显示时间（也已排序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:28:38.353

我会更改存储以存储一些“ [unix 时间戳](http://www.php.net/manual/en/function.time.php)”。从中您可以打印出[您喜欢的任何日期格式](http://www.php.net/manual/en/function.date.php)。而且，它是一个数字，很容易排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:09:14.847

我想这将解决您的问题，但我建议您尽可能修改您的表格设计。

```
$result = mysql_query("SELECT * FROM newsfeed");

$records = array();
$i = 0;
while ($row = mysql_fetch_array($result))
{
    $records[$i] = array('news_idPK' => $row['news_idPK'],
                     'date' => date("Y-m-d H:i:s", strtotime($row['date'])),
                     'news' => $row['news']
    );
    $i++;
}
usort($records, "cmp");

function cmp($a, $b) {
    $a = strtotime($a['date']);
    $b = strtotime($b['date']);
    return $a - $b;
}

$ctr = count($records)-1;
for($x=$ctr; $x>=0; $x--)
{
    $newsDate = date("l d F Y h:i:s A", strtotime($records[$x]['date']));
    if(date("Y-m-d", strtotime($records[$x]['date'])) == date("Y-m-d"))
    {
        $newsDate = date("h:i:s A",strtotime($records[$x]['date']));
    }
    echo $records[$x]['news_idPK']." - ".$newsDate." - ".$records[$x]['news']." <br/>";
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-05T07:22:08.927

这种排序方法无效。您可以添加 ID 列并按 ID 排序。每次有人发布帖子时，它都会插入到提要中 - 将插入一个递增的 ID。它与日期排序平行 - 你想要最新的。

这是最推荐和最有效的排序方法。

# jquery - 检查所有 li 何时被动态删除

> ID：10893166
> 
> 赞同：1
> 
> 时间：2012-06-05T07:18:15.097
> 
> 标签：jquery

我有一个函数可以处理属性列表（我的候选清单）的各种类型的行为，这是一个`<ul><li>`设置。一种行为是`<li>`在您单击每个项目中的按钮时删除属性列表项，这很好，但是我`if`检查所有项目何时被删除的声明不起作用。

你能告诉我我做错了什么吗？`onclick`这是通过按钮事件和狡猾`if`语句处理删除项目的函数部分：

```
// Remove an item from the shortlist
$(this).find('.btn-minus').click(function() {
    var btnRemove = $(this);
    var propTile = $(this).parents('.property-tile');
    var propList = $('#property-listings');
    // If IE 8 / 7
    if ($('html').hasClass('lte8')) {
        propTile.hide('slide', 300, function()  {
            btnRemove.data("tooltip").hide();
        });
    }
    // All other browsers
    else {
        propTile.fadeOut(200, function()  {
            btnRemove.data("tooltip").hide();
            $(this).remove();
        }); 
    }
    if (propTile.length === 0) {
        propList.remove();
    }
}); 
```

这是对函数的调用：元素在`$(".my-shortlist").myShortlist();`哪里。`.my-shortlist``<ul>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:20:37.293

您已将“.property-tile”元素放入变量中，因此之后隐藏它们不会将它们从您的对象变量中删除。因此，您需要重新执行选择器。

```
if ($(this).parents('.property-tile').length == 0) {
    propList.remove();
} 
```

此外，就像 Roger Lindsjö 提到的那样，在这些元素实际隐藏之前进行检查是有问题的。您需要在 hide/fadeOut 的回调中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T00:21:33.940

我让它工作了，我必须`<li>`使用该`nextAll()`方法检测最后一个，然后在最后一个remove`fadeOut`效果完成后。这是完整的代码：`<li>``propList`

```
// Remove an item from the shortlist
// http://stackoverflow.com/questions/2358205/invoking-a-jquery-function-after-each-has-completed
$(this).find('.btn-minus').click(function() {
    // Set variables
    var btnRemove = $(this);
    var propTile = $(this).parents('.property-tile');
    var propList = $(this).parents('#property-listings');
    var propItems = $(this).parents('.property-tile').nextAll(), count = propItems.length;
    // Remove entire list and other elements when all items have been removed
    function complete() {
        propList.remove();
        $('.sticky-panel-toolbar, .property-disclaimer, .sticky-panel').remove();
    } 
    // Remove individual items
    // If IE 8 / 7
    if ($('html').hasClass('lte8')) {
        propTile.hide('slide', 300, function()  {
            btnRemove.data("tooltip").hide();
            // Evoke complete() function
            if (count == 0) {
                complete();
            }
        });
    }
    // All other browsers
    else {
        propTile.fadeOut(400, function() {
            btnRemove.data("tooltip").hide();
            $(this).remove();
            // Evoke complete() function
            if (count == 0) {
                complete();
            }
        })
    }
}); 
```

干杯

# sqlalchemy - sqlalchemy 生成的 SQL 不在 Sybase 上运行

> ID：10893167
> 
> 赞同：1
> 
> 时间：2012-06-05T07:18:15.093
> 
> 标签：sqlalchemy, sybase

sqlalchemy 正在为我生成这个查询：

`SELECT INSTRUMENT_GROUP.id_imnt_grp AS "INSTRUMENT_GROUP_id_imnt_grp",INSTRUMENT_GROUP.nm_imnt_grp AS "INSTRUMENT_GROUP_nm_imnt_grp", INSTRUMENT_GROUP.type_imnt_grp AS "INSTRUMENT_GROUP_type_imnt_grp", anon_1."IMNT_GRP_MEMBERS_id_imnt_grp" AS "anon_1_IMNT_GRP_MEMBERS__1" FROM (SELECT IMNT_GRP_MEMBERS.id_imnt_grp AS "IMNT_GRP_MEMBERS_id_imnt_grp" FROM IMNT_GRP_MEMBERS WHERE 452 = IMNT_GRP_MEMBERS.id_imnt) AS anon_1 JOIN INSTRUMENT_GROUP ON INSTRUMENT_GROUP.id_imnt_grp = anon_1."IMNT_GRP_MEMBERS_id_imnt_grp" ORDER BY anon_1."IMNT_GRP_MEMBERS_id_imnt_grp"`

但是，它不会通过 sqlalchemy 运行，而是通过 pyodbc 使用 Sybase 15.5 驱动程序。但是，它使用 jconnect 驱动程序通过 SQuirreL SQL 运行良好。

任何想法为什么会这样或如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:25:23.480

如果您正在执行 INNER JOIN，请尝试通过在 JOIN 之前添加单词 INNER 来更改查询的 JOIN 部分。

```
anon_1 INNER JOIN INSTRUMENT_GROUP 
ON INSTRUMENT_GROUP.id_imnt_grp = anon_1."IMNT_GRP_MEMBERS_id_imnt_grp" 
```

如果它是 LEFT 或 RIGHT OUTER JOIN，那么也相应地更改它。例如左连接或右连接。

# android - ViewPageIndicator - GoogleMusicAdapter 在 SampleTabsStyled 类中有什么用途？

> ID：10893178
> 
> 赞同：0
> 
> 时间：2012-06-05T07:18:55.597
> 
> 标签：android, android-viewpager

我在我的应用程序中使用 ViewPageIndicator 和 ActionBarSherlock。我重命名 SampleTabsStyled 类并在我的应用程序中使用它。一切进展顺利。我想知道一些事情

1.  为什么它有 SampleTabsStyled 类的 GoogleMusicAdapter 子类？2.TestFragmentAdapter类有什么用？我可以重命名并重用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:28:48.287

GoogleMusicAdapter 类只是为示例中显示的选项卡设置不同的名称，我认为如果 CONTENT 数组的声明在嵌套类中会更清楚。

因此，您可以跳过该类的使用，并按照您的建议直接使用 TestFragmentAdapter。

希望能帮助到你！

# php - 这个 mysql 语句有什么问题 - INSERT INTO ... WHERE ... OR？

> ID：10893180
> 
> 赞同：2
> 
> 时间：2012-06-05T07:18:58.943
> 
> 标签：php, mysql, wordpress

这是我的 mysql 语句，但由于某种原因它实际上并没有工作，我不知道为什么。提前致谢！

```
$ID = $_GET['post'];
$length = $_POST['excerpt_length'];

more code here to connect and select db...

mysql_query("
INSERT INTO wp_posts (excerpt)
VALUES(" . $length . ")
WHERE ID = " . $ID . "
OR post_name LIKE '" . $ID . "%'"); 
```

这是针对 wordpress 的，我正在选择添加摘录长度，因为据我所知，还没有。谢谢！

伊桑·布劳威尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:22:44.983

如果您已经有一个 ID，并且希望保持该 ID 不变，请使用`UPDATE`语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T07:32:31.790

你不能使用 where in insert into 因为你应该创建一个新记录，没有要查找的引用。您必须改用更新。

```
mysql_query("
UPDATE wp_posts 
SET excerpt = '" . $length . "'
WHERE ID = '" . $ID . "'
OR post_name LIKE '" . $ID . "%'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T07:23:00.860

`INSERT ...`在表中插入一个新行。它没有`WHERE`子句。
如果要更新现有行，请使用`UPDATE ...`语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T07:23:34.527

正如 Dan 指出的那样，您的语法不正确。如果您想限制 WordPress 中的摘录长度，您可以使用过滤器。看看[这个帖子](http://wordpress.org/support/topic/limit-excerpt-length-by-characters)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T07:21:31.180

我没有检查过，但我认为您不能在 INSERT 查询中使用 OR 语句。也许在此之前进行另一个查询以找出要插入的 id..？

# caching - Nehalem l2 缓存中的银行数量

> ID：10893181
> 
> 赞同：1
> 
> 时间：2012-06-05T07:19:15.387
> 
> 标签：caching, memory-management, cpu-cache, nehalem

当我偶然发现仙人掌界面“银行数量”中的一个术语时，我正在研究不同缓存配置的访问时间。

存储体数量是高速缓存中交错模块的数量，它增加了高速缓存的带宽和并行访问的数量。

在这种情况下，我想找出 Nehalem 架构缓存中的银行数量。我用谷歌搜索了这个东西，但没有找到任何有用的东西。

我的理由是：

1.  L1 数据和指令高速缓存必须有单个 bank。访问粒度在这里是一个词。
2.  L2 缓存支持 L1 数据和指令缓存的未命中。因此它必须支持 2 个银行。
3.  L3 高速缓存通常在系统中的所有内核之间共享，因此它必须具有大量 (32) 个存储体。

我的直觉正确吗？？另外，银行的数量是否会改变结构化数据/程序的方式（理想情况下不应该但仍然......）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:05:38.910

[Wikipedia 文章](http://en.wikipedia.org/wiki/Nehalem_%28microarchitecture%29)的[概览图](http://en.wikipedia.org/wiki/File%3aIntel_Nehalem_arch.svg)描述了Nehalem（第一个 cpu 品牌为“Core i7”）每个内核具有 256 KByte 的 L2 Cache。

我不明白您在这里所说的“银行”一词是什么意思。Nehalem 的高速缓存是 8 路关联的，每个高速缓存行有 64 位（8 字节）。

这意味着对于缓存的每次读/写访问，都会传输 8 个字节的数据，这很好地对应于所有虚拟地址都有 8 个字节的 64 位架构。因此，每次必须从内存中检索或存储地址时，都必须传输 8 个字节，因此以这种方式在缓存中设计单个条目是很自然的。（其他缓存大小也有意义，具体取决于应用程序：例如更大的数据缓存用于矢量处理单元）。

[x-way 关联](http://en.wikipedia.org/wiki/Set-associativity#Associativity)性决定了内存地址与该地址中的信息可以存储在高速缓存中的位置之间的关系。术语“8路关联”是指存储在某个内存地址的数据可以保存在8个不同的高速缓存行中。缓存有一个地址比较机制来选择一种方式内的匹配条目，以及一些[替换策略](http://en.wikipedia.org/wiki/Cache_algorithms)来决定使用哪一种方式——可能会驱逐以前的有效值。

您对“银行”一词的使用可能是指这种 8 路关联性的一个这样的“集合”。因此，您的问题的答案可能是“8”。再说一次，每个核心有一个 L2 缓存，并且每个都有这种结构。

您对同时访问的假设也是有效的。它[记录在例如 ARM 的 Cortax A15 中](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0438e/BABEFEFH.html) 。但是，是否以及如何独立访问这些缓存组或组是任何人的猜测。Wikipedia 图显示了 L1 数据缓存和 L2 缓存之间的 256 位总线。这可能意味着可以独立访问 4 种方式（4 * 64 = 256，但更有可能的是在任何给定时间实际上只有一个内存加载/存储被传输，并且较慢的 L2 缓存仅同时提供 4 个缓存行到更快的 L1 缓存可以称为突发。

可以在[英特尔页面上找到的](http://www.intel.com/content/www/us/en/intelligent-systems/intel-technology/next-gen-microarchitecture-paper.html?wapkw=nehalem+cache+architecture)[系统架构手册](http://download.intel.com/products/processor/manual/253665.pdf?wapkw=nehalem+cache+architecture)第 2.2.6 章列出了后来的 Sandy Bridge 改进，强调“每个周期两个负载和一个存储的内部带宽” ，这一事实支持了这一假设。因此，SandyBridge 之前的 CPU 应该有较少数量的并发加载/存储。

请注意，“飞行中”加载/存储和传输的实际数据存在差异。“进行中”是当前正在执行的那些操作。在所有缓存报告未命中后可能需要等待内存产生数据的负载的情况下。因此，您可以并行处理许多负载，但您仍然可以让任意两个缓存之间的数据总线在任何给定时间仅使用一次。上述 SandyBridge 改进实际上将数据总线扩大到两个负载和一个存储同时传输数据，这是 Nehalem（一种“tock”，或 Sandy Bridge 之前的一种架构）无法做到的。

在某些情况下，您的直觉是不正确的：

1.  超线程和多线程通常允许 cpu 每个周期执行多个语句。（Nehalem，第 2.2.5 章：“为每个内核提供两个硬件线程（逻辑处理器）。利用 4-wide 执行引擎”。因此，支持多个并发加载/存储到 L1 缓存是有意义的。
2.  L2 缓存同时为 L1 数据和 L1 指令缓存提供服务——你在这方面是正确的。由于 (1) 中的原因，支持 2 个以上的同时操作可能是有意义的。
3.  通常，您可以为 L3 缓存扩大该数量，但实际上这没有意义。我不知道你从哪里得到的数字 32，也许这只是一个猜测。对于任何其他访问点（术语中的“银行”），您必须具有地址解码器、标记数组（用于处理与缓存行的地址比较、替换策略和任何缓存数据标志（脏位等））。因此，每个访问端口都需要一些晶体管开销，因此需要硅片的面积和功率。每个存在的端口也会减慢缓存访问速度，即使它没有被使用。（细节超出了这个答案的范围）。所以这是一个微妙的设计决定，通常 32 是很高的。通常对于 cpu 内的任何类型的内存，数字范围从 1 到 6-8 个读取端口和 1 到 2-4 个写入端口。当然，也可能有例外。

关于您关于软件优化的观点：如果您是低级硬件/固件开发人员，请担心。否则，只需遵循高级想法：如果可以，请将最内部的密集操作循环保持较小，以使其适合 L3 缓存。对本地数据进行密集计算的线程数不要超过内核数。如果您确实开始担心这种速度影响，请开始使用匹配的 cpu 开关编译/优化您的代码，并控制机器上的其他任务（甚至是基础设施服务）。

总之：

*   Nehalem 的二级缓存是 8 路关联的
*   它支持少于 2 个同时加载和 1 个存储操作，可能只有一个。但是每次加载/存储一次最多可以向/从 L1 数据高速缓存传输 256 位。
*   由于物理设计限制（时序/面积/功率），L3 缓存的同时加载/存储操作数量无法扩展到 32
*   您通常不应该在您的应用程序中过多担心这些细节 - 除非您确定必须这样做（例如在高性能计算中）

# google-app-engine - 为什么 GAE 启动第二个实例并将 Max Idle Instances 设置为 1

> ID：10893193
> 
> 赞同：5
> 
> 时间：2012-06-05T07:20:23.173
> 
> 标签：google-app-engine

我使用启用了计费状态的 Google Ap 引擎。
空闲实例设置为：( 1 – 1 )

![在此处输入图像描述](../Images/23c35fcd2f2f1e0f287dc4b58e4b8582.png)

我的服务只有 2 个客户，有时我会看到第二个实例。问题是启动新实例需要 15 秒（spring and co..）。

![在此处输入图像描述](../Images/dc4e18d10184c2eec754ae6da7821051.png)

一个实例需要 80Mb 的内存吗？
新实例的日志： /_ah/warmup 200 14580ms 0kb
第二个实例在几秒钟后消失。

为什么有 3-4 个请求，GAE 运行第二个实例？第一个什么都不做（几乎）！

我试图修改“等待延迟”但没有成功。

一个办法 ？:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:27:38.603

您只要求了一个空闲实例。服务请求时，实例不是空闲的。因此，App Engine 会启动一个新实例来维持您请求的空闲实例数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:46:38.407

如果常驻实例被认为“太忙”而无法处理请求，App Engine 将启动另一个。即使流量非常低，如果应用程序同时处理足够多的请求，AE 可能会决定它需要另一个实例来提供优质服务。您是正确的，增加挂起延迟会减少另一个实例启动的机会，但您不能完全禁止动态实例。

另外，您是否启用了多线程？如果不是，那么即使它只处理一个请求，驻留实例也会很忙。如果您的代码是线程安全的，您可以启用多线程并与实例同时处理更多并发请求。

由于流量非常低且实例数量非常少，App Engine 在决定是否需要新实例时没有太多信息可以继续。您将看到更高的利用率和更少的虚假实例和更多的流量。

# php - 搜索选项卡并将其替换为活动选项卡

> ID：10893195
> 
> 赞同：0
> 
> 时间：2012-06-05T07:20:33.700
> 
> 标签：php, jquery, post, button, tabs

**问题：**

搜索包含“活动”类的选项卡并将其删除，同时将“活动”类添加到 PHP POST 提交的当前选项卡。

我有一个看起来像这样的选项卡菜单。

**HTML 代码：**

```
<div class="pull-right special-search" id="navtabs">
    <div class="btn-group">
        <a href="#tab1" class="active btn btn-info" data-toggle="tab"><i class="icon-home icon-white"></i>&nbsp;Start</a>
        <a href="#tab2" class="btn btn-info" data-toggle="tab"><i class="icon-book icon-white"></i>&nbsp;Essay</a>
        <a href="#tab3" class="btn btn-info" data-toggle="tab"><i class="icon-ok-sign icon-white"></i>&nbsp;Criteria</a>
        <a href="#tab4" class="btn btn-info" data-toggle="tab"><i class="icon-time icon-white"></i>&nbsp;Activity</a>
    </div>
</div> 
```

**要在这些选项卡之间切换，我使用以下 jQuery 代码：**

```
$('#navtabs a[data-toggle="tab"]').on('shown', function (e) {
    e.target;
    e.relatedTarget;
    $('#navtabs a[data-toggle="tab"]').attr('class','btn btn-info');
    $(this).attr('class','active btn btn-info');
}) 
```

**到现在为止还挺好。一切正常。**现在，当我按下一个按钮说“提交更新时间”时，我希望它与 PHP 进行检查，该 PHP 对应于它是从哪个选项卡发送的。我通过使用隐藏类型字段来做到这一点：

```
<input type="hidden" id="submit_button" name="button_pressed"> 
```

**然后使用以下代码使用 PHP 进行检查：**

```
<?php
    if ($_SERVER['REQUEST_METHOD'] == 'POST') 
    {
        $button = $_POST['button_pressed'];

        if ($button == 'submit-updategrades')
            $tabname = 'tab2';
        else if ($button == 'submit-updatetime')
            $tabname = 'tab4';
    }
?> 
```

为了确保用户停留在他/她所在的选项卡上，我使用以下 PHP/jQuery：

```
<?php           
    if (!empty($tabname))
    {
        echo '$("#navtabs a[href=#tab1]").removeClass(\'active\');';
        echo '$("#tab1").removeClass(\'active\');';
        echo '$("#navtabs a[href=#'.$tabname.']").addClass(\'active\');';
        echo '$("#'.$tabname.'").addClass(\'active\');';
    }
?> 
```

这工作得很好，只是我觉得我的最后一个 PHP/jQuery 解决方案有缺陷。例如，#tab1 仅在您进入页面时才有效，不一定一直有效。

**问题：**

如何在最后一个 PHP/jQuery 代码中搜索具有“活动”类的选项卡并将其删除，同时将其添加到使用 $tabname 生成的活动选项卡中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:50:47.323

如何找到具有`active`类的选项卡：

```
$(document).ready(function(){
    var tab = $('#navtabs a.active');
}); 
```

在找到的选项卡上删除`active`该类：

```
$(document).ready(function(){
    var tab = $('#navtabs a.active');
    tab.removeClass('active');
}); 
```

查找、删除和添加`active`类到 PHP 提供的选项卡：

```
<?php           
if (!empty($tabname)) { ?>
$(document).ready(function(){
    var active_tab = '#<?php echo $tabname; ?>';
    var tab = $('#navtabs a.active');
    tab.removeClass('active');
    $('#navtabs a').each(function(){
        if($(this).attr('href') == active_tab) {
            $(this).addClass('active');
            return;
        }
    });
});
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:28:12.967

如果您在 HTML 输出之前执行活动选项卡验证，则可以执行一个没有脚本的简单解决方案：

**PHP 活动标签验证**

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {

  // clear the variable from undesirable contents
  $button = strip_tags(trim($_POST['button_pressed']));

  // reset variables
  $tab1 = $tab2 = $tab3 = $tab4 = '';

  // check the variable contents
  switch ($button) {
    case "submit-updategrades": $tab2 = 'active'; break;
    case "submit-updatetime":   $tab4 = 'active'; break;
    default:                    $tab1 = 'active'; break;
  }
}
?> 
```

**注意：** *添加到`switch`您`case`需要匹配的。`$tab3`不存在，因为你没有提到这个问题。*

**使用适当的活动选项卡输出 HTML**

```
<?php
echo '
<div class="pull-right special-search" id="navtabs">
  <div class="btn-group">
    <a href="#tab1" class="'.$tab1.' btn btn-info" data-toggle="tab">
      <i class="icon-home icon-white"></i>&nbsp;Start
    </a>
    <a href="#tab2" class="'.$tab2.' btn btn-info" data-toggle="tab">
      <i class="icon-book icon-white"></i>&nbsp;Essay
    </a>
    <a href="#tab3" class="'.$tab3.' btn btn-info" data-toggle="tab">
      <i class="icon-ok-sign icon-white"></i>&nbsp;Criteria
    </a>
    <a href="#tab4" class="'.$tab4.' btn btn-info" data-toggle="tab">
      <i class="icon-time icon-white"></i>&nbsp;Activity
    </a>
  </div>
</div>';
?> 
```

像这样，您无需使用 jQuery 执行任何发布操作即可从 HTML 中查找和替换活动选项卡。您实际上是将已经准备好的 HTML 发送到浏览器。

# javascript - 在 jsp 上显示时钟

> ID：10893196
> 
> 赞同：0
> 
> 时间：2012-06-05T07:20:47.890
> 
> 标签：javascript, jquery

我想在 jsp 文件上显示时钟，时间是从服务器获取的，并且是`05 Jun, 2012 12:48:23 PM`我希望更新同一时间而不是占用客户端时间的格式。

我确实尝试过`timer.js`，`jtimer`其他一些 API 也尝试过。我可以通过拆分事物并自己编写整个时钟逻辑来做到这一点，但我想重用已经开发的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:09:07.883

我用了很多年：

```
<script type="text/javascript">

// Current Server Time script (SSI or PHP)- By JavaScriptKit.com (http://www.javascriptkit.com)
// For this and over 400+ free scripts, visit JavaScript Kit- http://www.javascriptkit.com/
// This notice must stay intact for use.

//Depending on whether your page supports SSI (.shtml) or PHP (.php), UNCOMMENT the line below your page supports and COMMENT the one it does not:
//Default is that SSI method is uncommented, and PHP is commented:

var currenttime = '<!--#config timefmt="%B %d, %Y %H:%M:%S"--><!--#echo var="DATE_LOCAL" -->' //SSI method of getting server date
//var currenttime = '<? print date("F d, Y H:i:s", time())?>' //PHP method of getting server date

///////////Stop editting here/////////////////////////////////

var montharray=new Array("January","February","March","April","May","June","July","August","September","October","November","December")
var serverdate=new Date(currenttime)

function padlength(what){
var output=(what.toString().length==1)? "0"+what : what
return output
}

function displaytime(){
serverdate.setSeconds(serverdate.getSeconds()+1)
var datestring=montharray[serverdate.getMonth()]+" "+padlength(serverdate.getDate())+", "+serverdate.getFullYear()
var timestring=padlength(serverdate.getHours())+":"+padlength(serverdate.getMinutes())+":"+padlength(serverdate.getSeconds())
document.getElementById("servertime").innerHTML=datestring+" "+timestring
}

window.onload=function(){
setInterval("displaytime()", 1000)
}

</script>

<p><b>Current Server Time:</b> <span id="servertime"></span></p>

<p style="font: normal 11px Arial">This free script provided by<br />
<a href="http://www.javascriptkit.com">JavaScript Kit</a></p> 
```

有关更多信息，请参阅[此](http://www.javascriptkit.com/script/script2/servertime.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:28:56.513

您可以使用现有的 jQuery 时钟插件，允许您显式设置初始时间。

例如[，这个插件](https://github.com/Lwangaman/jQuery-Clock-Plugin)看起来不错且易于使用（[示例代码](http://jsbin.com/ugapo3/72)），并允许您设置时间戳，请参阅“带有自定义时间戳的时钟”下。

因此，只需将服务器时间作为自定义时间戳传递，您就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:29:24.593

理想情况下，我会使用服务器端的 Java 日期格式化程序来格式化日期并将其添加到 JSP 模型中。但是，要回答这个问题，您可以使用 Javascript Date 类

```
var date = new Date('05 Jun, 2012 12:48:23 PM');
date.getMonth() 
```

您可以在这里找到其他方法 - [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

PS：在发布这个问题以便快速解决之前，我会先用谷歌搜索它。

# performance - 在silverlight中绘制波形的更好方法是什么？

> ID：10893201
> 
> 赞同：1
> 
> 时间：2012-06-05T07:21:00.333
> 
> 标签：performance, silverlight, graphics, line, waveform

我正在silverlight 3.0 中申请。在该应用程序中，我必须绘制实时波形。（意味着我正在以每秒 4 个样本的速率从我的服务器中绘制实时数据（点的集合）。）所以在一秒钟内我必须刷新屏幕四次。意味着我有在一秒钟内重绘网格和波形四次，因为我也必须移动网格。现在我正在使用大小等于屏幕大小的线条集合。并从该集合中绘制每一行。但是如果屏幕尺寸很大，那么线条的集合也会更大。所以它会影响应用程序的性能。我不能使用“折线”，因为我必须根据数据随时更改线的颜色。我没有得到任何有效的解决方案。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:05:45.217

据我所知，在您的代码中实现的最佳控制是`Path`

[此](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path%28v=vs.95%29.aspx)链接将帮助您了解`Path`

[这个](http://msdn.microsoft.com/en-us/library/cc189041%28v=vs.95%29.aspx)链接显示了使用时要遵循的语法和规则`Path`

您可以轻松更改`Path`. 任重而道远，希望对你有帮助！

# windows - 如果单击复选框，如何为数据网格中的行着色？

> ID：10893206
> 
> 赞同：0
> 
> 时间：2012-06-05T07:21:13.907
> 
> 标签：windows, visual-c++, c++-cli

我有一个datagridview，我用这种方式填充它：

```
DataGridViewRow^ row = gcnew DataGridViewRow;

        DataGridViewCheckBoxCell^ CBox = gcnew DataGridViewCheckBox;//DataGridViewCheckBoxCell();
        row->Cells->Add( CBox );
        CBox->Value = false;
        CBox->ReadOnly = false;

        DataGridViewTextBoxCell^ PName = gcnew DataGridViewTextBoxCell();
        row->Cells->Add( PName );
        PName->Value = strPackageName;
        PName->ReadOnly = true;

        DataGridViewTextBoxCell^ AppV = gcnew DataGridViewTextBoxCell();
        row->Cells->Add( AppV );
        AppV->Value = strAppVendor;
        AppV->ReadOnly = true;

        DataGridViewTextBoxCell^ AppN = gcnew DataGridViewTextBoxCell();
        row->Cells->Add( AppN );
        AppN->Value = strAppName;
        AppN->ReadOnly = true;

dataGridView1->Rows->Add( row ); 
```

我想做以下事情。如果我单击复选框，我想更改行颜色。不幸的是我没有找到数据网格的相应事件，因为每个事件都有一些问题。有人能告诉我应该使用哪个事件，或者我应该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:41:51.603

我希望它会奏效。

```
 if (CBox->Checked)
  {
      PName->BackColor = Color::Red;
      AppV->BackColor = Color::Red;
      AppN->BackColor = Color::Red;

  } 
```

# php - 是什么让 PHP 未设置表单变量？

> ID：10893215
> 
> 赞同：0
> 
> 时间：2012-06-05T07:21:47.180
> 
> 标签：php, forms

我的 HTML 代码：

```
<form class="well" name="login" action="text.php" method="post" >
<input type="text" class="span3" id="username" name"username" placeholder="Enter your valid email">
<input type="text" class="span3" id="password" name"password" placeholder="Enter your password">
<button type="submit" class="btn" >Enzemble </button>
</form>
      <h2>New User? ... Register</h2>
        <form class="well" name="register" action="register.php" method="post" >
            <input type="text" class="span3" id="email" name="email" placeholder="Enter your valid email" onBlur="emailValidation()">
            <button type="submit" class="btn">Enter Enzemble!</button>
        </form> 
```

底部表格工作正常。

顶部代码给出“未定义索引”通知，并且不读取 text.php 中的用户名和密码值 text.php 代码：

```
<?php
if (isset($email)) $email=$_POST["username"];
if (isset($password)) $password=$_POST["pasword"];
echo "username " . $email . "password " . $password;
?> 
```

错误：注意：未定义索引：第 8 行 /home/nitin/www/enzemble/text.php 中的密码 注意：未定义变量：第 9 行 /home/nitin/www/enzemble/text.php 中的电子邮件用户名密码

我没有在 php 中获取 html 表单值。这是令人惊讶的。我已经为此工作了很长时间。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:23:12.597

那是因为你写`pasword`的不是`password`. 试试看

```
if (isset($password)) $password=$_POST["password"]; 
```

`$_POST['password']`无论如何，您应该只检查`$password`

见[register_globals](http://php.net/manual/en/security.globals.php)：

> 此功能自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:24:45.793

您只是在检查*变量* `$email`和`$password`是否已设置，但它们尚未设置，对吗？所以要么你打算否定你的支票：

```
if (!isset($email)) $email=$_POST["username"];
if (!isset($password)) $password=$_POST["password"]; 
```

或者您打算检查 $_POST 字段是否已设置：

```
if (isset($_POST['email'])) $email=$_POST["username"];
if (isset($_POST['password'])) $password=$_POST["password"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:23:04.423

$password 还不存在，检查 $_POST["pasword"] in `isset`，而不是 $password。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:23:11.227

因为它被包裹在另一种形式中，所以`<form></form>`将所有东西都包裹在一种形式中。

像：

```
 <form class="well" name="register" action="register.php" method="post" >
        <input type="text" class="span3" id="email" name="email" placeholder="Enter your valid email" onBlur="emailValidation()" />
        <input type="text" class="span3" id="username" name="username" placeholder="Enter your valid email" />
        <input type="text" class="span3" id="password" name="password" placeholder="Enter your password" />
        <button type="submit" class="btn">Enter Enzemble!</button>
    </form> 
```

**编辑：并像Emil**建议的那样更新 php 脚本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T07:24:16.120

```
if (isset($password)) $password=$_POST["pasword"]; 
```

您`$_POST["pasword"]`只用一个 s 拼写密码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T08:44:50.030

您的 HTML 代码中有语法错误。它缺少输入字段`=`的属性：`name`

```
<input type="text" class="span3" id="username" name"username" placeholder="Enter your valid email">
HERE ----------------------------------------------^ 
```

# c# - 每个结果都有计数器的匿名类型

> ID：10893220
> 
> 赞同：2
> 
> 时间：2012-06-05T07:22:36.897
> 
> 标签：c#, linq, counter, anonymous-types

创建返回匿名对象的 Linq 查询时，是否可以使计数器上升？

例如

```
var results = from foo in bar select new { foo.ID, foo.Name, Counter = ???? } 
```

我已经尝试定义一个返回递增数字的方法，但所有对象的最终结果都是相同的。

澄清：我希望结果是

id, 名字, 1
id, 名字, 2
id, 名字, 3

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:25:54.017

使用fluent-syntax[中包含索引](http://msdn.microsoft.com/en-us/library/bb534869.aspx)（也[可用于 queryables ）的](http://msdn.microsoft.com/en-us/library/bb534638.aspx)[重载`Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)，您可以执行以下操作：

```
var results = bar.Select((foo, index) => new 
                                         { 
                                             foo.ID,
                                             foo.Name, 
                                             Counter = index + 1 
                                          }); 
```

请注意，此重载在查询语法中不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:25:11.670

```
var counter = 0;
var results =
    from foo in bar
    select new { foo.ID, foo.Name, Counter = ++counter }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:27:21.637

可能是这样的：

```
var result= db.bar.Select((foo,i)=>select new {foo.ID, foo.Name, Counter = i+1}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:28:06.510

使用索引 Select() 重载：

```
var results = bar.Select((foo, i) => new { foo.ID, foo.Name, Counter = i + 1}); 
```

# storage - 计算机如何区分整数是有符号还是无符号？

> ID：10893232
> 
> 赞同：13
> 
> 时间：2012-06-05T07:23:17.387
> 
> 标签：storage, unsigned, signed

设置二进制补码以使计算机更容易计算两个数字的减法。但是计算机如何区分一个整数是有符号整数还是无符号整数呢？它的记忆中只有 0 和 1。

例如， `1111 1111`计算机内存中可以表示数字255，也可以表示-1。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T07:36:21.540

有符号和无符号使用相同的数据，但指令不同。

计算机将有符号和无符号整数存储为相同的数据。即 255 和 -1 是相同的位。但是，您告诉编译器变量的类型。如果它是有符号的，编译器使用有符号的操作符来操作变量（例如IDIV），当它没有符号时，它使用另一个指令（例如DIV）。因此编译器编写了一个程序来告诉 CPU 如何解释数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T07:34:42.683

它不区分它们。但是有了补码，计算是一样的：

下面，`d`将附加到十进制数和`b`二进制数。计算将基于 8 位整数。

`-1d + 1d = 1111 1111b + 1b = 1 0000 0000b`

但是由于我们溢出了（是的，那是 8 `0`s 和`1`8 位整数上的 a），结果等于 0。

`-2d + 1d = 1111 1110b + 1b = 1111 1111b = -1d`

`-1d + 2d = 1111 1111b + 10b = 1 0000 0001b (this overflows) = 1b = 1d`

`-1d + -1d = 1111 1111b + 1111 1111b = 1 1111 1110b (this overflows) = 1111 1110b = -2d`

如果您考虑对无符号的这些操作（二进制值将保持不变）：

`255d + 1d = 1111 1111b + 1b = 1 0000 0000b (this overflows) = 0d`

`254d + 1d = 1111 1110b + 1b = 1111 1111b = 255d`

`255d + 2d = 1111 1111b + 10b = 1 0000 0001b (this overflows) = 1b = 1d`

`255d + 255d = 1111 1111b + 1111 1111b = 1 1111 1110b (this overflows) = 1111 1110b = 2d`

因此，无符号与有符号只是无符号的视觉表示，仅在向人类显示时使用:-)

# android - 阻止 Android 中断用户输入/从 EditText 元素中移开焦点

> ID：10893238
> 
> 赞同：0
> 
> 时间：2012-06-05T07:23:36.980
> 
> 标签：android

我正在使用 popups(PopupWindow) 和一个普通的 EditText 元素实现搜索机制。问题在于，只要用户键入搜索序列，就会出现提示结果的弹出窗口，然后 EditText 元素就会失去焦点。

我需要以某种方式在用户输入期间维持 EditText 的焦点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:18:46.023

您可能正在尝试实现 android 中已经存在的东西。它被称为`AutoCompleteTextView`。就[用原生的吧](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)。

# php - 当用户按下创建按钮时，将数据加载到 html 中选择

> ID：10893241
> 
> 赞同：-1
> 
> 时间：2012-06-05T07:23:45.320
> 
> 标签：php, jquery, mysql, html, ajax

当用户按下或单击按钮时，我在将数据加载到 html 选择时遇到问题。这是场景：

1.  有按钮动态创建按钮
2.  当用户单击该按钮时，将显示表单
3.  当表单显示时，有一个 html 选择动态显示数据库中的数据，使用 php 作为服务器端。

**有谁知道如何解决场景3？**

我使用 jquery 创建新表单，但将数据加载到 html select 对我来说真的很痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:29:10.863

你可以使用 jquery ajax：

```
$.ajax({url:'somepage.php'}).done(msg){
    $('#select_id').html(msg);
} 
```

在 somepage.php 页面上生成 html 并回显它：

```
<?
   echo '<option>something</option>';
?> 
```

就这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:47:55.293

试试这样的 AJAX：

```
$.post("yourPHP.php", {toSend: whatever}, function(data){
vOutput="<select>";
for(var i=0;i<data.length;i++){
    vOutput+="<opiton>"+data[i]+"</option>";
}
vOutput+="</select>"
$("#yourdiv").html(vOutput);
},'json') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:58:17.567

如果您从服务器`<select>`通过**html**（如“12 ..”）获取选项，则（使用 jquery）：

```
$.ajax({url:"index.php",
   success:function(data) {
      $("#my_select").html(data);
   }
}); 
```

如果您`<select>`通过类似数组的值（也许是 json）获得选项，那么：

```
...
<script type="text/javascript"> 
   var values = {option1:{value:"value1",text:"text1"},option2:{value:"value2",text:"text2"},option3:{value:"value3",text:"text3"}};   // lets say these came from server (a json response)
    var d = $("#my_select")[0];
    d.length = 0;
    var c=0;
    for(var x in values) {
       d.options[c++] = new Option(values[x]["text"],values[x]["value"]);
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T11:16:38.433

你的 JS 应该是这样的。

```
 $('#button').click(function(){
     $('<element to show>').show();
     $('<element to load the data into>').load('my_page.php');
 }); 
```

您的`my_page.php`

```
<?php
$data = get_data_from_db();
foreach ($data as $d){
    echo '<option value='+ $d['value'] +'>'+ $d['text'] +'</option>';
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:45:35.657

PHP

像这样的东西：

```
<?php  
$option[] = array('option1'=>'somepage1',
                  'option2'=>'somepage2',
                  'option3'=>'somepage3');

echo json_encode(array('options'=>$option)) //set output to json encode
?> 
```

JS

```
$(document).ready(function(){

  $("#create").bind('click',function(){
    $.get('somepage.php',function(data){
      $("#form").show(); //form holder
      $("#select").empty();
      $.each(data.options, function(i,val){
       $("#select").append("<option>"+val.option1+"</option>"
                          +"<option>"+val.option2+"</option>"
                          +"<option>"+val.option3+"</option>");
      });  
    },'json');
    $(this).unbind();
  });
}); 
```

# objective-c - 如何在动画上画一条线跟随球，比如 Discovr 应用程序？

> ID：10893242
> 
> 赞同：-2
> 
> 时间：2012-06-05T07:23:50.253
> 
> 标签：objective-c, animation, core-animation

如何在动画上画一条线跟随球，比如**Discovr**应用程序？

我想做一个像**Discovr**这样的应用程序，让一些球漂浮并通过线连接。

球移动时如何重绘线条？

我用`UIView Animation`在球上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:42:37.423

我建议使用 CAShapeLayer。形状图层采用 CGPath，只要更改后的路径包含相同数量的点/线/弧，就会对路径进行动画更改。

您可以为球的运动设置动画，并为形状图层创建动画更改，同时移动线条的端点。

# c# - WCF 与 XmlSerializer

> ID：10893244
> 
> 赞同：2
> 
> 时间：2012-06-05T07:23:54.420
> 
> 标签：c#, wcf, xml-serialization

我有一个 XML 字符串

```
<?xml version="1.0"?>
<FullServiceAddressCorrectionDelivery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <AuthenticationInfo  xmlns="http://www.usps.com/postalone/services/UserAuthenticationSchema">
    <UserId xmlns="">FAPushService</UserId>
    <UserPassword xmlns="">Password4Now</UserPassword>
  </AuthenticationInfo>
  <FullServiceAddressCorrectionDelivery d2p1:MessageGroupID="3599" d2p1:TotalMessageCount="1" d2p1:MessageSerialNumber="1" xmlns:d2p1="http://idealliance.org/Specs/mailxml10.0/mailxml_defs" xmlns="http://idealliance.org/Specs/mailxml10.0A/mailxml_dd">
    <SubmittingParty d2p1:MaildatUserLicense="USPS" />
    <SubmittingSoftware d2p1:SoftwareName="PostalOne" d2p1:Vendor="USPS" d2p1:Version="27.0" />
    <PushMessageID>3599001</PushMessageID>
  </FullServiceAddressCorrectionDelivery>
</FullServiceAddressCorrectionDelivery> 
```

和服务合同，如

```
[ServiceContract(Namespace = http://www.usps.com/postalone/services/DataDistributionPushMailXML10A")]
public interface DataDistributionPushMailXML10APortType
{
    [OperationContract]
    [XmlSerializerFormat]
    FullServiceAddressCorrectionDelivery PushFullServiceAddressCorrectionDelivery(FullServiceAddressCorrectionDelivery obj);
}

// Use a data contract as illustrated in the sample below to add composite types to service operations.
[DataContract(Name = "FullServiceAddressCorrectionDelivery", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
[Serializable]
public class FullServiceAddressCorrectionDelivery
{
    [XmlElement("AuthenticationInfo", 
     Namespace = "http://www.usps.com/postalone/services/UserAuthenticationSchema")]
    [DataMember]
    public AuthenticationInfoType AuthenticationInfo
    {
        get;
        set;
    }

    [XmlElement("FullServiceAddressCorrectionDelivery",
     Namespace = "http://idealliance.org/Specs/mailxml10.0A/mailxml_dd")]
    [DataMember]
    public FullServiceAddressCorrectionDelivery1 FullServiceAddressCorrectionDelivery1
    {
        get;
        set;
    }
}

[DataContract]
[Serializable]
public class AuthenticationInfoType
{
    [DataMember]
    [XmlElement("UserId", Namespace = "")]
    public string UserId
    {
        get;
        set;
    }

    [DataMember]
    [XmlElement("UserPassword", Namespace = "")]

    public string UserPassword
    {
        get;
        set;
    }
}

[DataContract]
[Serializable]
public class ParticipantIDType
{
    private string _maildatUserLicense;

    [DataMember]
    [XmlAttribute("MaildatUserLicense", 
    Namespace ="http://idealliance.org/Specs/mailxml10.0/mailxml_defs")] 
    public string MaildatUserLicense
    {
        get
        {
            return this._maildatUserLicense;
        }
        set
        {
            this._maildatUserLicense = value;
        }
    }
}

[DataContract]
[Serializable]
public class FullServiceAddressCorrectionDelivery1
{
    [DataMember]
    [XmlElement("SubmittingParty")]
    public ParticipantIDType SubmittingParty
    {
        get;
        set;
    }

    [DataMember]
    [XmlElement("PushMessageID")]
    public string PushMessageID
    {
        get;
        set;

    }
} 
```

在反序列化时，我使用`XmlSerializer`：

```
FullServiceAddressCorrectionDelivery objAddressCorrectionDelivery = 
  new  FullServiceAddressCorrectionDelivery();
byte[] byteArray = System.Text.Encoding.ASCII.GetBytes(this.richTextBox1.Text);
MemoryStream stream = new MemoryStream(byteArray);
XmlSerializer Xs = new XmlSerializer(typeof(FullServiceAddressCorrectionDelivery));
var result = (FullServiceAddressCorrectionDelivery)Xs.Deserialize(stream); 
```

反序列化时出现问题：我的`FullServiceAddressCorrectionDelivery`对象已成功反序列化，但其`PushMessageID`属性中包含 null。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:33:18.403

原因是您的 FullServiceAddressCorrectionDelivery1 类（内部 FullServiceAddressCorrectionDelivery）不包含 SubmittingSoftware 元素的定义，但 XML 包含它。然后似乎发生的是 XML 反序列化器可以读取 SubmittingSoftware 之前的属性，但 SubmittingSoftware 之后的所有属性都设置为 null。我在从 Web 服务反序列化 XML 时亲身经历过这种情况。

通常，如果您使用 Web 服务的第 1 版创建客户端，然后创建 Web 服务的第 2 版，在您的数据合同中拥有更多属性，则会发生这种情况。在这些情况下，您需要确保将新属性放在 XML 中的最后（底部）。

# android - 是否可以在 listView 上禁用滚动？

> ID：10893246
> 
> 赞同：9
> 
> 时间：2012-06-05T07:24:15.930
> 
> 标签：android, android-layout, listview

我动态地将项目添加到 a`ListView`并希望使所有项目始终可见，而无需滚动。

布局代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/recipe_inside"
android:orientation="vertical" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="16dp"
            android:src="@drawable/head_cella" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="41dp"
            android:background="@drawable/body_cella"
            android:gravity="center_horizontal"
            android:paddingTop="5dp"
            android:text="Remember to save before leaving this page or inserted/modified data will be lost."
            android:textColor="#000000"
            android:textSize="13dp" />

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="match_parent"
            android:layout_height="16dp"
            android:layout_marginTop="30dp"
            android:src="@drawable/head_cella" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:background="@drawable/body_cella"
            android:gravity="center_horizontal"
            android:paddingTop="10dp"
            android:text="Category"
            android:textColor="#000000"
            android:textSize="15dp" />

        <Spinner
            android:id="@+id/category_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <ImageView
            android:id="@+id/ImageView02"
            android:layout_width="match_parent"
            android:layout_height="16dp"
            android:layout_marginTop="30dp"
            android:src="@drawable/head_cella" />

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:background="@drawable/body_cella"
            android:gravity="center_horizontal"
            android:paddingTop="10dp"
            android:text="Name"
            android:textColor="#000000"
            android:textSize="15dp" />

        <EditText
            android:id="@+id/recipe_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Recipe title" android:lines="1"/>

        <ImageView
            android:id="@+id/ImageView03"
            android:layout_width="match_parent"
            android:layout_height="16dp"
            android:layout_marginTop="30dp"
            android:src="@drawable/head_cella" />

        <TextView
            android:id="@+id/TextView03"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:background="@drawable/body_cella"
            android:gravity="center_horizontal"
            android:paddingTop="10dp"
            android:text="Ingredients"
            android:textColor="#000000"
            android:textSize="15dp" />
         <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" android:cacheColorHint="#00000000" android:divider="#00000000"
            android:isScrollContainer="false"
            >
       </ListView>

         <Button
             android:id="@+id/button_ing"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="" android:background="@drawable/add_recipe_button" android:onClick="addItems"/>

    </LinearLayout>

</ScrollView></LinearLayout> 
```

旧的 OnCreate() 函数代码：

```
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.add_recipe_form);

    spinner = (Spinner)myhead.findViewById(R.id.category_spinner);

    Cursor cursor = mydb.getCategoriesList();
    ArrayList<Category> list = new ArrayList<Category>();
    list.add(new Category(0,"Choose a category"));

    while (cursor.moveToNext()) {
        list.add(new Category(cursor.getInt(0),cursor.getString(1))); 
    }
    // Step 2: Create and fill an ArrayAdapter with a bunch of "State" objects
    ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, list);

    // Step 3: Tell the spinner about our adapter
    spinner.setAdapter(spinnerArrayAdapter);   
    spinner.setOnItemSelectedListener(this);

    setListAdapter(adapter);
    ingredients.add((View)findViewById(R.layout.row_add_recipe));
    adapter.notifyDataSetChanged();
} 
```

如果我移动与用数据库数据填充微调器相关的代码，它总是返回 NullPointerException，因为在我的布局中找不到它。所以我需要把它放在这里，将 addHeaderView() 添加到我的 ListView 的解决方案似乎没问题，但我有另一个关于我的头部布局的 NullPointerException：

```
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.add_recipe_form);
    ListView mylistview = (ListView) findViewById(android.R.id.list);
    LinearLayout myhead = (LinearLayout)findViewById(R.id.linear_form);
    mylistview.addHeaderView(myhead);
    spinner = (Spinner)myhead.findViewById(R.id.category_spinner);

    Cursor cursor = mydb.getCategoriesList();
    ArrayList<Category> list = new ArrayList<Category>();
    list.add(new Category(0,"Choose a category"));

    while (cursor.moveToNext()) {
        list.add(new Category(cursor.getInt(0),cursor.getString(1))); 
    }
    // Step 2: Create and fill an ArrayAdapter with a bunch of "State" objects
    ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, list);

    // Step 3: Tell the spinner about our adapter
    spinner.setAdapter(spinnerArrayAdapter);   
    spinner.setOnItemSelectedListener(this);

    setListAdapter(adapter);
    ingredients.add((View)findViewById(R.layout.row_add_recipe));
    adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:27:40.010

如果我理解你，你只需要更多的视图，这些视图可以与你的列表视图一起滚动。实现它的最佳方法是[`addHeaderView()`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)在[`addFooterView()`](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)您的`ListView()`.

**编辑：**

它应该是这样的，我认为：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_main_layout);
    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View header = inflater.inflate(R.layout.your_header_layout); //R.layout, not R.id!

    (ListView) list = findViewById(android.R.list);
    list.addHeaderView(header);

    list.setAdapter(adapter); //according to docs you should call setAdapter() after addHeaderView()

    //to get the spinner
    (Spinner) spinner = (Spinner) header.findViewById(R.id.spinner);

} 
```

我是凭记忆写的，没有测试它，但我认为它应该可以工作。有空的时候试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:41:10.387

一种解决方案是将 ListView 的高度设置为与内容一样大。您可以使用以下类而不是 ListView 来实现此效果：

```
public class ExpandedListView extends ListView {

  private int old_count = 0;

  public ExpandedListView(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  @Override
  protected void onDraw(Canvas canvas) {
    if (getCount() != old_count) {
        old_count = getCount();
        int totalHeight = 0;
        int desiredWidth = MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST);
        for (int i = 0; i < getCount(); i++) {
            View listItem = getAdapter().getView(i, null, this);
            listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = getLayoutParams();
        params.height = totalHeight + (getDividerHeight() * (getCount() - 1));
        setLayoutParams(params);
        requestLayout();
    }

    super.onDraw(canvas);
  }

} 
```

无论如何，在 ScrollView 中有一个 ListView 是个坏主意，所以我会使用方法 addHeaderView() 和 addFooterView() 将布局中的其他元素添加为页眉/页脚视图，正如 MichałK 指出的那样。

这里有一个关于如何使用这些方法的示例：

[https://github.com/commonsguy/cw-advandroid/tree/master/ListView/HeaderFooter](https://github.com/commonsguy/cw-advandroid/tree/master/ListView/HeaderFooter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:18:57.867

让你的`ListView` **身高**大于你的**内容大小**。

假设您有**5 个**列表项，每个列表项的高度为**20sp，**将列表视图**高度设置为 100 或更大** ，这样您就可以实现它

# node.js - nodejs/express 的验证码

> ID：10893250
> 
> 赞同：2
> 
> 时间：2012-06-05T07:24:24.913
> 
> 标签：node.js, express, recaptcha

我需要在我的 nodejs/express 应用程序上制作验证码。所以我有以下问题：

1.  是否有任何用于 nodejs 而不是[nodejs-recaptcha](https://github.com/aldipower/nodejs-recaptcha)的验证码项目（最后一次提交是一年前）？
2.  [我对像picapcha](http://picatcha.com/captcha/)这样的“非标准”验证码很感兴趣，所以最好在我的项目中制作这个验证码，但不幸的是它还没有 nodejs 支持。nodejs/express 个人是否有相同的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T00:59:51.187

除了 nodejs-recaptcha 之外，没有太多选择。

1.  例如，使用[toolbox.no.de 进行](http://toolbox.no.de/search?q=captcha)快速搜索几乎没有结果。

2.  我认为自己编写与 picapcha 交互的模块应该不难。

# javascript - 如何使用现有的 BB WebWorks 代码构建 Windows Phone 应用程序

> ID：10893251
> 
> 赞同：1
> 
> 时间：2012-06-05T07:24:29.173
> 
> 标签：javascript, html, windows-phone-7, blackberry-webworks

我有一个使用 WebWorks API - HTML5 - Javascript 构建的 BlackBerry 应用程序，我也想为 Windows Phone 设备构建它。我是 Windows Phone 开发的新手。如何使用现有代码构建 Windows Phone 应用程序？有没有像 WebWorks 这样的 API？还是我必须使用PhoneGap？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:33:34.400

是的，“Phonegap”就是答案。您可以使用相同的代码使用 Phone gap 制作 windows phone 应用程序。

# c++ - 迭代器作为 unordered_multimap 中的键类型

> ID：10893252
> 
> 赞同：2
> 
> 时间：2012-06-05T07:24:32.417
> 
> 标签：c++, stl, multimap

我想创建一个映射，它使用迭代器作为键类型和整数作为值，如下例所示：

```
#include <list>
#include <unordered_map>

int main(int argc, char* argv[])
{
  typedef std::list<int> ListType;
  typedef std::unordered_multimap<ListType::iterator, unsigned int> MapType;

  ListType _list;
  MapType _map;

  _list.push_back(100);
  _map.insert(std::make_pair(_list.begin(), 10));

  return 0;
} 
```

不幸的是，这会使编译器中止`error C2440: 'conversion' : cannot convert from 'const std::_List_iterator<_Mylist>' to 'size_t'`. 无论如何我可以做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:28:13.343

该错误意味着您必须为特定的迭代器类型提供哈希函数。您可以将散列函数作为第三个模板参数传递给[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_multimap)。

`unordered_map`它的键也需要一个相等比较器，但是 std::list 的迭代器已经有了，所以你不需要提供你自己的。例如：

```
#include <list>
#include <unordered_map>
#include <cstddef>

typedef std::list<int> ListType;
typedef std::list<int>::iterator ListIterator;
// a very poor hashing functor
struct MyHash {
  size_t operator()(const ListIterator&) const {
    // provide a useful implementation here!
    size_t hash_ = .... ;
    return hash_;
    //return 0; // compiles, but is useless
  }
};

typedef std::unordered_multimap<ListIterator, unsigned int, MyHash> MapType;

int main() {

  ListType list_;
  MapType map_;

  list_.push_back(100);
  map_.insert(std::make_pair(list_.begin(), 10));

  return 0;
} 
```

# java - 连接到 as400 数据库的 Android 应用程序

> ID：10893254
> 
> 赞同：1
> 
> 时间：2012-06-05T07:24:34.503
> 
> 标签：java, android, driver, ibm-midrange

我正在尝试让我的 Android 连接到我的 as400 服务器。不幸的是，当我单击 My Connexion 按钮时，驱动程序没有加载，我不知道为什么。

这是我的代码：

```
package hello.world;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;

public class HelloworldActivity extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void Connexion(View view) throws SQLException {
        System.out.println("Tentative de connexion à la base de donnée."); //Connexion 
        String driver = "com.ibm.as400.access.AS400JDBCDriver";

        String url = "jdbc:as400://BEAUFIX;transaction isolation=read uncommitted;date format=iso;naming=system;libraries=*LIBL";   
        Connection conn = null;
        String userName = "GMAOBD60";
        String password = "GMAOBD60";

        try {
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url,userName,password);
          System.out.println("Connected to the database"); 
          conn.close();
          System.out.println("Disconnected from database");
        } catch (Exception e) {
          e.printStackTrace();
          System.out.println("ERROR");

}
}
} 
```

这是我的 xmd 代码：

`<Button android:id="@+id/Connexion" android:layout_width="196dp" android:layout_height="wrap_content" android:layout_marginLeft="50dp" android:layout_marginTop="100dp" android:text="@string/Connexion" android:layerType="hardware" android:onClick="Connexion" />`

这是我的错误日志：

```
06-05 07:18:56.100: W/System.err(564): java.lang.ClassNotFoundException: com.ibm.as400.access.AS400JDBCDriver
06-05 07:18:56.155: W/System.err(564):  at java.lang.Class.classForName(Native Method)
06-05 07:18:56.180: W/System.err(564):  at java.lang.Class.forName(Class.java:217)
06-05 07:18:56.212: W/System.err(564):  at java.lang.Class.forName(Class.java:172)
06-05 07:18:56.241: W/System.err(564):  at hello.world.HelloworldActivity.Connexion(HelloworldActivity.java:33)
06-05 07:18:56.271: W/System.err(564):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 07:18:56.290: W/System.err(564):  at java.lang.reflect.Method.invoke(Method.java:511)
06-05 07:18:56.321: W/System.err(564):  at android.view.View$1.onClick(View.java:3039)
06-05 07:18:56.340: W/System.err(564):  at android.view.View.performClick(View.java:3511)
06-05 07:18:56.371: W/System.err(564):  at android.view.View$PerformClick.run(View.java:14105)
06-05 07:18:56.371: W/System.err(564):  at android.os.Handler.handleCallback(Handler.java:605)
06-05 07:18:56.380: W/System.err(564):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-05 07:18:56.391: W/System.err(564):  at android.os.Looper.loop(Looper.java:137)
06-05 07:18:56.391: W/System.err(564):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-05 07:18:56.401: W/System.err(564):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 07:18:56.410: W/System.err(564):  at java.lang.reflect.Method.invoke(Method.java:511)
06-05 07:18:56.421: W/System.err(564):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-05 07:18:56.431: W/System.err(564):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-05 07:18:56.431: W/System.err(564):  at dalvik.system.NativeStart.main(Native Method)
06-05 07:18:56.441: W/System.err(564): Caused by: java.lang.NoClassDefFoundError: com/ibm/as400/access/AS400JDBCDriver
06-05 07:18:56.460: W/System.err(564):  ... 18 more
06-05 07:18:56.460: W/System.err(564): Caused by: java.lang.ClassNotFoundException: com.ibm.as400.access.AS400JDBCDriver
06-05 07:18:56.481: W/System.err(564):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-05 07:18:56.492: W/System.err(564):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-05 07:18:56.492: W/System.err(564):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-05 07:18:56.500: W/System.err(564):  ... 18 more 
```

我也尝试了很多东西，但我总是遇到错误。请帮帮我，我想让这个工作:(

不，我没有忘记导入我的 jt400.jar，即“com.ibm.as400.access.AS400JDBCDriver”

提前谢谢你，奥雷利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:11:14.010

I personally haven't tried it but the IBM Toolbox for Java (jt400.jar) may not be compatible with the Dalvik JVM. Dalvik is not a 100% compatible implementation of the Java VM.

Are you sure you want the weight and security implications of a library like the Toolbox distributed on a mobile device? I would recommend a server (AS/400) application to provide services to the mobile clients while managing security, caching, etc.

A framework like [Grails](http://www.grails.org) that can be deployed natively on the AS/400 makes the server application a breeze. And dealing with XML or JSON services over HTTP will make the mobile application much easier, more robust, and a heck of a lot easier to maintain.

I have a similar application in production supporting over a hundred Windows CE/Mobile clients (Motorola/Symbol handhelds). I'm looking forward to porting the client to Android once the hardware is available.

# linux - Arch Linux 没有 i586-elf-gcc 或 i586-elf-gcc

> ID：10893255
> 
> 赞同：1
> 
> 时间：2012-06-05T07:24:44.167
> 
> 标签：linux, gcc, archlinux, binutils

我最初尝试按照本教程创建一个 C 内核：[http](http://wiki.osdev.org/Bare_Bones) : //wiki.osdev.org/Bare_Bones 但是，我的系统没有 i586-elf-gcc 或 i586-elf-ld。我真的不确定在哪里可以找到这些，或者它们是否已经在我的计算机上。我用 pacman 安装了 gcc 和 binutils。

```
ls /usr/bin/ | grep gcc 
```

输出

```
gcc
gcc-ar
gcc-nm
gcc-ranlib
i686-pc-linux-gnu-gcc
i686-pc-linux-gnu-gcc-4.7.0
i686-pc-linux-gnu-gcc-ar
i686-pc-linux-gnu-gcc-nm
i686-pc-linux-gnu-gcc-ranlib
winegcc 
```

如果必须，我不介意编译，但更喜欢二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:33:08.857

Arch Linux 是为 i686 和 x86_64 编译的，因此你不会在其中找到 i586 的软件包。

但是，您可以按照这些说明[http://wiki.osdev.org/OS_Specific_Toolchain](http://wiki.osdev.org/OS_Specific_Toolchain)或[http://wiki.osdev.org/GCC_Cross-Compiler](http://wiki.osdev.org/GCC_Cross-Compiler)构建 i586 版本，据我记得我是在 Arch Linux 中完成的，所以它可能的。

但是除非你在不适合你爱好的操作系统内核上工作，否则使用 gcc 就足够了。

祝你好运 ：）

# php - Drupal DB：必须通过检查远程服务器上的条件将一些数据从一个表移动到另一个表..！

> ID：10893264
> 
> 赞同：0
> 
> 时间：2012-06-05T07:25:24.563
> 
> 标签：php, mysql, drupal, cck, remote-server

我正在使用有内容类型的门户网站。制作此门户的前端开发人员为文件附件添加了 CCK 字段，并且核心已经提供了文件附件字段。现在我们不会去讨论他为什么这样做，因为我也不知道。

现在我必须删除那个 CCK 字段，如果我直接删除，我将丢失该字段上传的所有数据，因为它会删除它的表。

所以现在我正在尝试将此 CCK 字段表中的值替换为默认上传表并更新文件表中的文件路径..以便它可以查看附加文件。

因为我不太擅长 PHP 或 MySQL，所以我正在向你们寻求帮助..

这是我编写的基本代码...请提出更正建议并告诉我这样做我是否能够连接远程服务器数据库-

```
<?php

mysql_connect("http://edlabs.in/connect:22","connect","");
mysql_select_db("connect");

for($i=0; $i<=1; $i++){

    $fid_cck = array(mysql_query("SELECT field_upload_doc_fid FROM content_field_upload_doc WHERE field_upload_doc_list > 0"));
    $fid_core = array(mysql_query("SELECT fid FROM upload"));

    foreach($fid_cck as $fid_cck_value){

        foreach($fid_core as $fid_core_value)
        {
            if($fid_cck_value != $fid_core_value){

                $file_name = mysql_query("SELECT filename FROM files WHERE fid = $fid_cck");
                $nid_cck = mysql_query("SELECT nid FROM field_upload_doc_fid WHERE fid = $fid_cck");
                $vid_cck = mysql_query("SELECT vid FROM field_upload_doc_fid WHERE fid = $fid_cck");

                mysql_query("INSERT INTO upload VALUES('$fid_cck', '$nid_cck', '$vid_cck', '$file_name', 1, 0)");

                $filepath = array(mysql_query("SELECT filepath FROM files WHERE fid = $fid_cck"));

                $new_filepath = str_replace("/background_docs", "", $filepath);

                mysql_query("UPDATE files SET filepath=$new_filepath WHERE fid = $fid_cck");

            }
        }
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:26:28.770

我已经按照以下步骤解决了这个问题-

1.  在我的本地 phpmyadmin 中创建了一个与我的门户同名的数据库。
2.  从我的门户的数据库中导出了三个名为 content_field_upload_doc、文件和上传的表。
3.  用一些 MySQL 查询编写了一个自定义 PHP 代码，以进行查询并查找那些在 content_field_upload_doc 但不在上传表中的文件的 DIFF，并从表文件中选择该文件的名称。（我在下面给出代码）。
4.  在我的 wamp 上运行代码并回显 INSERT 查询。
5.  复制所有查询并在门户数据库的 phpmyadmin 上使用 SQL 执行。
6.  复制公用文件夹中以前使用的文件夹中的所有文件并将其粘贴到默认公用文件夹。
7.  从内容类型中删除了 CCK 字段......它已经完成......！

    `die('Could not connect: ' . mysql_error());` } 别的{

    ```
    mysql_select_db("connect");

    $rs_fudl = mysql_query("SELECT vid, nid, field_upload_doc_fid FROM content_field_upload_doc WHERE field_upload_doc_list > '0'");
    while($rs_fudl_row = mysql_fetch_array($rs_fudl))
    {

        $fid_fudl = $rs_fudl_row['field_upload_doc_fid'];

        $rs_file = mysql_query("SELECT filename,filepath FROM files WHERE fid = '$fid_fudl'");

        //echo mysql_num_rows($rs_file)."<br />";

        while($rs_file_row = mysql_fetch_array($rs_file)){

                $rs_upload = mysql_query("SELECT * FROM upload where fid='".$fid_fudl."'");

                if ( mysql_num_rows($rs_upload) == 0) {

                /*  $new_filepath = str_replace("/background_docs", "", $rs_file_row['filepath']);

                    $filepath = $new_filepath;
                */
                    $filename = $rs_file_row['filename'];
                    $vid_fudl = $rs_fudl_row['vid'];
                    echo "<br />";

                    $nid_fudl = $rs_fudl_row['nid'];
                    echo "<br />";

                    echo "INSERT INTO upload VALUES ('$fid_fudl','$nid_fudl', '$vid_fudl', '$filename','1', '0');" ;
                    echo "<br />";
                //  echo "UPDATE files SET filepath= '$filepath' WHERE fid = '$fid_fudl';";     

                }
        }
    }
    mysql_close($con); 
    ```

    } ?>

# android - 如何导航到安卓 USB 大容量存储活动？

> ID：10893265
> 
> 赞同：8
> 
> 时间：2012-06-05T07:25:29.743
> 
> 标签：android, navigation, usb-mass-storage

我想在设备连接到 pc 时让 USB 大容量存储活动打开或关闭 USB 模式。我已经实现了如下应用程序。

```
public class USB_ConnectActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final String state = Environment.getExternalStorageState();
    ((Button)findViewById(R.id.onButton)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (!(Environment.MEDIA_SHARED.equals(state))) {

                //How to navigate android USB Mass Storage page

            }
        }
    });

    ((Button)findViewById(R.id.offButton)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if ((Environment.MEDIA_SHARED.equals(state))) {

                //How to navigate android USB Mass Storage page

            }

        }
    });

        }
   } 
```

从上面的代码中，我使用了两个按钮来关闭和打开 USB 大容量存储。但我没有更多关于它的信息来在内置的 USB 大容量存储页面中导航 android。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:49:46.553

如果您只想启动 USB 大容量存储`Activity`，那么您的问题与以下内容完全相同：[Android Intent to open "Mass Storage Activity"](https://stackoverflow.com/questions/8652917) and should be closed。

如果你真的想*改变*USB 模式的状态，这就是它的样子，那么这不是重复的（据我所知），但答案仍然是：你做不到。

也许有更好的方法，但是当我想知道哪些 Intent 可用于启动系统活动时，我查看了[Intent](http://developer.android.com/reference/android/content/Intent.html)的 Android SDK 文档并搜索“活动操作”。这向您展示了您可以启动的许多系统活动，例如“电池使用”`Activity`和卸载`Activity`。没有任何东西将 USB 模式显示`Activity`为 public `Intent`。原谅双关语，这可能是故意的。

当然，我找不到任何有关以编程方式打开或关闭 USB 模式的方法的文档，这也可能是故意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:55:40.713

这在 Android SDK 中是不可能的。

# java - 如何使用 JasperResports 中的结果集作为数据源？

> ID：10893273
> 
> 赞同：1
> 
> 时间：2012-06-05T07:26:23.197
> 
> 标签：java, jasper-reports, resultset

这是我开发的 JasperReport 的一个片段，它使用嵌入在报告中的静态查询。

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Report" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isFloatColumnFooter="true">
     <property name="ireport.zoom" value="1.0"/>
     <property name="ireport.x" value="129"/>
     <property name="ireport.y" value="0"/>
     <parameter name="lp" class="java.lang.Integer"/>
     <parameter name="all_price" class="java.lang.Integer"/>
     <parameter name="all_amount" class="java.lang.Integer"/>
     <parameter name="all_total_price" class="java.lang.Integer"/>
     <queryString>
          <![CDATA[SELECT sanaf_number,sanaf,sales_id,sales.sanaf_id,customer_name,  price, total_price, addad, wahda, required_amount FROM sanaf,sales  where (sales.export='0')and(sanaf.sanaf_id=sales.sanaf_id) limit $P{lp}]]>
     </queryString>
     <field name="sales_id" class="java.lang.Integer"/>
     <field name="sanaf_id" class="java.lang.Integer"/> 
```

现在我需要使用 a`ResultSet`而不是静态查询。我用来执行报告的代码如下/

```
void showResports(){
  try{
    // OriginalExportOriginalExport 
    String reportName ="";

    if(export.equalsIgnoreCase("1")){
      reportName = "OriginalExport.jasper";
    } else if(export.equalsIgnoreCase("0")){
      reportName = "ExportReport4.jasper";
    }

    InputStream in =getClass().getResourceAsStream(reportName);

    if(in==null|| connection==null) return ;

    HashMap parameterMap = new HashMap();
    parameterMap.put("lp", new Integer(selectedNumber));

    if(export.equalsIgnoreCase("0")){
      int all_price=DatabaseManager.countTotalPriceForImport(selectedNumber);
      int all_amount=DatabaseManager.countAmountForImport(selectedNumber);
      int all_total_price=DatabaseManager.countTotalPrice(selectedNumber);

      parameterMap.put("all_price",new Integer(all_price));
      parameterMap.put("all_amount",new Integer(all_amount));
      parameterMap.put("all_total_price",new Integer(all_total_price));
    } else if(export.equalsIgnoreCase("1")){
      int all_requiredAmount=DatabaseManager.countAllRequiredAmount(selectedNumber);
      int all_given_amount=DatabaseManager.countAllGivenAmount(selectedNumber);
      parameterMap.put("all_requiredAmount",new Integer(all_requiredAmount));
      parameterMap.put("all_given_amount",new Integer(all_given_amount));
    }

    JasperPrint jp = JasperFillManager.fillReport(in, parameterMap, connection);
    System.out.println("Object of Jasper Print created");

    JRViewer jv = new JRViewer(jp);
    //Insert viewer to a JFrame to make it showable
    JFrame jf = new JFrame();
    jf.getContentPane().add(jv);
    jf.validate();
    jf.setVisible(true);
    jf.setSize(new Dimension(800,600));
    jf.setLocation(300,100);
    jf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);  
  }catch(Exception e){
    e.printStackTrace();
  }
}// showReports 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:01:36.043

如果结果集包含与您当前嵌入报告中的查询相同的字段，那么您需要`queryString`从报告中删除，然后更改：

```
JasperFillManager.fillReport(in, parameterMap, connection); 
```

至

```
JasperFillManager.fillReport(in, parameterMap, new JRResultSetDataSource(resultSet)); 
```

`resultSet`数据的结果集在哪里。

唯一的复杂情况是结果集是否具有不同的字段名称，或者完全不同的字段。在这种情况下，您还需要调整报告中的字段名称。

# c# - 为什么我的 .exe 总是不能从 Web 服务写入文件？

> ID：10893276
> 
> 赞同：0
> 
> 时间：2012-06-05T07:26:35.967
> 
> 标签：c#, web-services, iis-7.5, asmx, processstartinfo

这是一个让我拔头发的问题。 **TL：博士；**IIS 7.5 webservice 调用 .exe 来写入文件。当我导航到 .asmx 页面（不在 debug/cassini 中，在 chrome/FF 中的实际 IIS）时工作，但当我从应用程序调用服务时不起作用。最终，此 Web 服务调用将需要来自 Windows 服务调用。

* * *

```
 // -------------------------------------------------------------------- 
        //      Use the UTMs as the corners for the projwin in the gdal_translate call below                                  
        // -------------------------------------------------------------------- 
        string sExecutionFile = string.Empty;
        if ((ConfigurationSettings.AppSettings["BIN_PATH"]!=null) && File.Exists(ConfigurationSettings.AppSettings["BIN_PATH"] + "/gdal_translate.exe"))
            sExecutionFile = Path.Combine(ConfigurationSettings.AppSettings["BIN_PATH"],"gdal_translate.exe");
        else
            sExecutionFile = "gdal_translate.exe";

        ProcessStartInfo psi = new ProcessStartInfo(sExecutionFile,
            "-projwin " + pointUL[0] + " " + pointUL[1] + " " +
             pointLR[0] + " " + pointLR[1] + " " +
            sImageFileName + " " + sResultsFileName);

        psi.UseShellExecute = false;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardError = true;
        psi.CreateNoWindow = true;

        using(myProcess = new Process())
        {
         myProcess.StartInfo = psi;
         myProcess.Start();
         myProcess.WaitForExit();
         myProcess.Close();
         myProcess.Dispose();
        } 
```

* * *

上面的代码调用一个小 exe 从另一个 TIFF 文件生成 TIFF。它位于一个包含在 web 服务调用中的 DLL 中。我一切正常，我可以去我的本地主机服务器，运行我创建的“DataService.asmx”页面，填写表格和 biggity-bam，我的新目录中有一个 TIFF（也是由 web 服务创建的） . 然后我写了一个小的命令行应用程序来尝试调用 web 服务。它愉快地调用了 web 服务和我为测试目的而尝试的其他一些服务。问题是我创建了新目录，但里面从来没有任何 TIFF 文件。调试后，我的代码抱怨上面的代码没有创建文件。**我错过了什么？**

我已经尝试了各种 IIS 7.5 配置选项以及相关目录的操作系统级权限。一直上升到“LocalSystem”会产生与下降到“AppPoolIdentity”，“IUSR”相同的行为......我不得不相信上面的代码失败了，即使它根本没有抛出任何异常。是否有更好的方法来调试来自 IIS Web 服务的 ProcessStartInfo 调用？我可以理解这是否根本不起作用，或者我是否必须以管理员帐户的身份运行它才能使其工作，但是当我直接从 .asmx 页面调用它时，该调用有效。

# mongodb - 来自 MongoDB 的结果

> ID：10893280
> 
> 赞同：1
> 
> 时间：2012-06-05T07:27:16.580
> 
> 标签：mongodb, derbyjs

我遇到了 Derby 和 Mongo 的两个问题。我来自 MySQL 和 Redis 背景，所以也许我做错了什么？

1) 似乎我无法搜索类型为 ObjectId 的 Id。

```
model.query("users").byKey(params.userId); 
```

只会匹配 _id 是字符串的记录。我猜这没问题，除非数据被“更新”，Racer 将创建一个带有 ObjectId _id 的新记录！所以基本上我永远无法通过我用 Racer 插入的 id 检索文档！

2）每次我进行查询时，我都会返回一个对象，例如：

```
{ '$spec': true, 
    '4fcd4c8e6c8c89d97ed90f4a': { "username": ... },
    '4fcd4c8e6c8c89d97ed90f4b': { "username": ... }, 
```

这意味着我必须将其转换为对象列表。我编写了一个函数，它创建一个_id 的列表，然后将它分配给一个模型变量以与 refList 一起使用。感觉就像一个黑客，这不是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:57:34.380

查询在 0.3.11 版本中进行了大幅更新。模型现在具有内置的 model.filter() 和 model.sort() 方法，它们将取代手动构建键列表并向 Derby 发出更有效的数组更新事件的需要。

请参阅[查询自述文件](https://github.com/codeparty/racer/blob/master/lib/descriptor/query/README.md)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:29:26.190

我不是 derbyjs 用户，但是这里有一些关于您的问题的建议：

1）关于“Id是ObjectId”？

似乎 id 必须是一个对象，请参阅[DerbyDoc/Persistance](http://derbyjs.com/#persistence)：

> Racer 路径使用自然映射转换为数据库集合和文档：collection.documentId.document
> 
> ...
> 
> // 根路径中的第一个和第二个段必须是对象

您如何保存数据？作为一般建议，完整的可重现代码将改善您可以获得的帮助。

2）“我需要将查询结果转换为列表”？

根据我对其他引擎的经验，您确实似乎没有使用正确的方法。一切都取决于您想对结果做什么，但一种非常常见的方法是使用对象列表并最终在模板循环中获取属性。在您的情况下，这意味着将查询结果直接传递给 page.render 调用。请参阅[DerbyDoc/部分](http://derbyjs.com/#sections)

希望这可以帮助

亚历克西斯

# assembly - 向寄存器添加 0 会导致错误消失？

> ID：10893284
> 
> 赞同：0
> 
> 时间：2012-06-05T07:27:28.623
> 
> 标签：assembly, x86, x86-64

我很难追踪这个装配错误，非常感谢一些帮助。

我已经将这个错误追踪到了一个地方，这让我很困惑：

```
not_object:
        movq _stanza_header(%rip), %rbp
        movq c_rsp_offset(%rbp), %rsp
        andq $-16, %rsp
        addq $0, %rsp    // Code does not work without this line
        call _gc_failure 
```

出于某种原因，添加虚拟语句 (addq $0, %rsp) 会使代码工作，而没有它，它就不会。

有谁知道这种行为是如何发生的？我*没有*将代码动态加载到堆中，所以我不相信我会以某种方式覆盖代码而没有段错误。

我正在使用 Apple 的 i686-apple-darwin10-gcc-4.2.1 在 64 位 Intel 机器上组装代码。

非常感谢您的帮助！-帕特里克

* * *

生成的机器代码（由 gdb 反汇编）与我写的相匹配：

```
not_object:
0x000000010001060e <not_object+0>:  mov    0xabb(%rip),%rbp        # 0x1000110d0 <stanza_header>
0x0000000100010615 <not_object+7>:  mov    0x58(%rbp),%rsp
0x0000000100010619 <not_object+11>: and    $0xfffffffffffffff0,%rsp
0x000000010001061d <not_object+15>: add    $0x0,%rsp
0x0000000100010621 <not_object+19>: callq  0x10000173f <gc_failure> 
```

所以我想我应该排除一个错误的汇编程序作为原因。

# iphone - 3gs 或 3g 手机上的视网膜图像

> ID：10893285
> 
> 赞同：0
> 
> 时间：2012-06-05T07:27:33.610
> 
> 标签：iphone, uiimage, retina-display, iphone-3gs

我有一种问题，我的照片查看器中有两组照片。一个是视网膜图像，另一个是分辨率较低的图像。占位符的大小约为 300X200。没有基于视网膜的图像的尺寸完全相同，为 300X200，而视网膜图像的尺寸几乎是原来的两倍。我的问题是，当将高分辨率图像放置在非视网膜图像中时，我们将面临什么问题，我知道图像肯定会显示出来，但我想知道其他隐藏的问题。

有人可以肯定地说占位符中的高分辨率图像不会创建任何可以的图像。我知道我的问题看起来很傻，但想澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:46:51.197

那么只有一个问题，记忆。

由于 3G 和 3GS 的 RAM 比 4/4S 少，因此您将更快地耗尽内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:00:15.587

可能会出现另一个问题，它是您的 UIImageView 的帧大小。如果您正在动态创建框架（基于图像大小），它将创建更大的框架（不接受）。但是，如果您使用硬代码值创建框架，则很好。

# ios - UITabBarController 以编程方式添加，但标签栏不显示

> ID：10893287
> 
> 赞同：0
> 
> 时间：2012-06-05T07:27:51.927
> 
> 标签：ios, xcode, uitabbarcontroller, uitabbar

我不是从 a 开始，`UIWindow`而是从 a`UIView`添加我的`UITabBarController`.

我有一组文件名，`documentFileName`并希望在子视图中一个一个地加载它们，每个都在一个选项卡中。

```
viewControllers = [[NSMutableArray alloc] init];
(NSString *tempStr in documentFileName) {
Subview *subviewController = [[Subview alloc] initWithFileName:tempStr];
    [viewControllers addObject:subviewController];
}
tabBarController.viewControllers = viewControllers;
[self.view addSubview:tabBarController.view];
} 
```

在 SubView.m 中：

```
- (id) initWithFileName:(NSString *)fileName {
    isiPhone = [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone;
    if (self = [super initWithNibName:((isiPhone)?@"NFLSPromDressingsSubview_iPhone":@"NFLSPromDressingsSubview_iPad") bundle:nil])
    {
        currentFileName = fileName;
    }
    return self;
}

- (void) viewDidLoad {
    [self loadDocuments];
    UITabBarItem *theItem = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:[documentFileName indexOfObject:currentFileName]];
    self.tabBarItem = theItem;
} 
```

但是，选项卡栏似乎是**白色和空**的。我在哪里犯了错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:36:34.597

确保正确启动 tabBar 并在 viewDidLoad 方法中添加 tabBar 以查看`[self.view addSubview:tabBarController.view];`

# ruby-on-rails - 修复了 RoR 应用程序中的错误留在 Chrome

> ID：10893291
> 
> 赞同：0
> 
> 时间：2012-06-05T07:28:22.770
> 
> 标签：ruby-on-rails, google-chrome

示例情况：我的控制器 mysite.sk/profil/5 中有错误。我的网站显示/error500，没关系，但是...我修复了这个错误，但是当我在Google Chrome 中打开mysite.sk/profil/5 时，它显示/error500。当我在 Firefox 或其他计算机中打开它时，一切正常，并显示我的个人资料页面。我将瘦服务器、webrick 和 apache 与乘客一起使用，我也遇到了同样的问题。

这是来自我的日志：

```
# I repaired bug
Started GET "/" for 10.10.13.80 at 2012-06-05 09:19:22 +0200
Processing by IndexController#index as HTML
  Rendered index/_top_article.html.erb (4.6ms)
  Rendered index/_side_bar.html.erb (0.0ms)
  Rendered index/index.html.erb within layouts/index (5.1ms)
Completed 200 OK in 16ms (Views: 7.6ms | ActiveRecord: 1.3ms)

# I clicked on link /profil/6
Started GET "/error500" for 10.10.13.80 at 2012-06-05 09:19:27 +0200
Processing by ErrorsController#handle500 as HTML
  Rendered errors/handle500.html.erb within layouts/index (0.2ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.1ms) 
```

# maven - 在 Windows 上安装 maven 时出错

> ID：10893292
> 
> 赞同：1
> 
> 时间：2012-06-05T07:28:25.050
> 
> 标签：maven, pom.xml

我已经下载并安装了 apache-maven-3.0.4。我已经参考了下面的链接。

```
http://www.avajava.com/tutorials/lessons/what-is-maven-and-how-do-i-install-it.html?page=1 
```

但是当我输入命令“mvn install”时，我收到以下错误：

```
[ERROR] The goal you specified requires a project to execute but there is no POM
 in this directory (C:\Users\admin). Please verify you invoked Maven from the co
rrect directory. -> [Help 1] 
```

我下载了 maven-clean-plugin-2.3 JAR 文件并将其放入 .m2/repository/

我在互联网上探索 pom 文件，但我没有找到它。

从哪里可以找到 maven-clean-plugin 的 pom 文件？

请指教

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:39:11.040

这是因为在当前项目（即 POM（描述该项目））上`mvn install`启动默认生命周期（直至`install`阶段）必须位于当前目录中。正如 Maven 所说，您的目录中没有`pom.xml`文件。`C:\Users\admin`

关于您的问题标题：您似乎已经成功安装了 Maven ;)。

# vb6 - 从用户系统中获取一些独特的硬件信息

> ID：10893295
> 
> 赞同：2
> 
> 时间：2012-06-05T07:28:28.283
> 
> 标签：vb6, hardware

我希望我的应用程序仅可用于一个系统，并且我希望获得在所有系统中*一致、唯一且可用*的硬件信息之一...。

在您看来，什么信息是最好的？以及如何使用 Visual Basic 6 获得它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:25:44.490

MAC 地址和硬盘序列号是我所知道的最可用的唯一硬件 ID。几年前， CPU 将引入[序列号](http://en.wikipedia.org/wiki/CPUID)功能，但由于隐私问题，这个想法被压制了。

[VB6 代码 MAC 示例](http://www.andreavb.com/forum/viewtopic_2917.html)

[VB6 硬盘序列号示例](http://social.msdn.microsoft.com/Forums/en-US/vbpowerpacks/thread/0e9a097d-c22c-4b70-ad50-106d680fa5b3)

# c# - 在 C# 中仅显示日期

> ID：10893297
> 
> 赞同：-5
> 
> 时间：2012-06-05T07:28:31.507
> 
> 标签：c#, asp.net, datetime

> **可能重复：**
> [从 C# 中的 DateTime 中提取日期部分](https://stackoverflow.com/questions/7740458/extract-the-date-part-from-datetime-in-c-sharp)

我有显示日期的代码。

```
DateTime dt = DateTime.ParseExact(date1,"ddMMyy",System.Globalization.CultureInfo.CurrentCulture); 
```

它给了我 6/12/2012 12:00:00 AM 的输出。

但是我只需要显示日期，如何删除时间以便唯一显示的是日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:31:05.370

使用 DateTime 的 ToShortDateString() 方法

```
dt.ToShortDateString(); 
```

[请参阅此处以获取参考](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)

> ToShortDateString 方法返回的字符串区分区域性。它反映了当前区域性的 DateTimeFormatInfo 对象定义的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:36:43.683

这个是你需要的

```
String.Format("{0:M/d/yyyy}", dt);    // "3/9/2008" 
```

在此处查看更多信息：[字符串格式日期时间](http://www.csharp-examples.net/string-format-datetime/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:30:53.163

的模式`DateTime.ToString ('d')`：

```
 DateTime dt = DateTime.ParseExact(date1,"ddMMyy",System.Globalization.CultureInfo.CurrentCulture);

// Get date-only portion of date, without its time.
DateTime dateOnly = dt.Date;
// Display date using short date string.
Console.WriteLine(dateOnly.ToString("d")); 
```

另请查看：[DateTime.ToString() 模式](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

# javascript - $.add 和 $.append JQuery 有什么区别

> ID：10893302
> 
> 赞同：39
> 
> 时间：2012-06-05T07:29:08.450
> 
> 标签：javascript, jquery

当我们有单个元素要添加或附加到容器时，我想知道并且无法获得任何关于 $.add 和 $.append 之间有什么区别的最佳文档。

提前致谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-05T07:42:57.347

***它们根本没有关系。***

**。添加（）**

*将元素添加到匹配元素的集合中。*

例如

如果你想做，

```
$('div').css('color':'red');
$('div').css('background-color':'yellow');
$('p').css('color':'red'); 
```

然后，你可以这样做，

```
$('div').css('background-color':'yellow').add('p').css('color':'red'); 
```

[参考](http://api.jquery.com/add/)

**。附加（）**

*将参数指定的内容插入到匹配元素集中每个元素的末尾。*

```
$('div').append('p'); 
```

将在 dom`p`中的所有选定内容上附加选定内容。`div`

[参考](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-05T07:33:02.890

给定一个表示一组 DOM 元素的 jQuery 对象，该[`.add()`](https://api.jquery.com/add/)方法从这些元素和传递给该方法的元素的并集构造一个新的 jQuery 对象。但它不会将元素插入 DOM，即使用`.add()`元素将被添加到 DOM 但要在页面中看到它，您必须使用一些[插入](http://api.jquery.com/category/manipulation/dom-insertion-outside/)/[附加](http://api.jquery.com/category/manipulation/dom-insertion-inside/)方法将其插入页面中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-28T04:54:01.820

**。添加（）**

```
for example:
<ul>
  <li>list item 1</li>
  <li>list item 2</li>
  <li>list item 3</li>
</ul>
<p>a random paragraph</p> 
```

要将`<li>`元素*和*元素的颜色更改`<p>`为红色，您可以编写：

```
$( "li" ).css( "background-color", "green" );
$( "p" ).css( "background-color", "green" ); 
```

或通过利用来浓缩上述内容。**添加（）**

```
$( "li" ).add( "p" ).css( "background-color", "green" ); 
```

**。附加（）**

将*创建*一个新元素以添加到 DOM 中，并将作为现有指定元素的子元素出现。

```
<div>one</div>
<div>two</div>

<ol>
  <li>item1</li>
  <li>item2</li>
</ol>

$("div").append('<p>'); 
```

将导致：

```
<div>one</div>
<p></p>
<div>two</div>
<p></p>

<ol>
  <li>item1</li>
  <p></p>
  <li>item2</li>
  <p></p>
 </ol> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T07:32:08.657

添加只是将元素添加到 jquery 对象中，它不会将其添加到 DOM 中

Append 将元素作为子元素添加到 DOM 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-20T18:25:30.650

上面的答案很清楚。我只是想再添加一个想法。.add() 似乎是“in ADDition to”的缩写。

```
$('p').add('div').css('background-color', 'yellow'); 
```

似乎有同样的效果

```
$('p, div').css('background-color','yellow');}); 
```

，而后者是jquery中的Multiple Selector。这是多选择器的链接：[https ://api.jquery.com/multiple-selector/](https://api.jquery.com/multiple-selector/)

完整的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <!-- import jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>
<body>
    <p>paragraph one</p>
    <div>div second</div>

    <script>

        $(document).ready(function() {
            $('p').add('div').css('background-color', 'yellow');
            //$('p, div').css('background-color','yellow');
        });

    </script>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-12T01:48:30.867

我认为`add`方法名称可能会产生误导。`add`并且`append`完全不同。想象`add`一下`combinedWith`——你正在扩展你想用一些 jQuery 函数影响的元素集。

特别是，尽管名称`add`与`remove`.

正如其他人所说，`add`不会影响页面的外观，并且`append`可能会。

所以如果你说

```
$('p').add('#special').css('background-color', 'yellow'); 
```

您的 p 元素和 id 的元素`special`都会受到影响。

# apache - apache ace中obr和repository的关系

> ID：10893308
> 
> 赞同：0
> 
> 时间：2012-06-05T07:29:38.413
> 
> 标签：apache, repository, osgi, obr, apache-ace

在 Apache ACE 中使用 /obr 和 /repository 访问的存储库之间的关系是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:46:08.690

这些之间没有严格的关系。

*   `/repository`包含有关部署的所有 ACE 元数据，即，说明哪个工件应该去哪里，其中工件表示为 URL。
*   `/obr/`包含 ACE 自己的[OBR](http://www.osgi.org/download/rfc-0112_BundleRepository.pdf)实现。它被打包为单独的捆绑包，可以在有或没有它的情况下部署 ACE。

要进行配置，ACE 不需要 OBR。但是，Web UI 假定 OBR 可用于将工件上传到，因此可以配置它们。ACE OBR 扩展了规范，即允许上传非捆绑工件。

# c# - 在目录c#中查找具有匹配模式的文件？

> ID：10893311
> 
> 赞同：8
> 
> 时间：2012-06-05T07:29:51.010
> 
> 标签：c#, .net, regex, io

```
 string fileName = "";

            string sourcePath = @"C:\vish";
            string targetPath = @"C:\SR";

            string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
            string destFile = System.IO.Path.Combine(targetPath, fileName);

            string pattern = @"23456780";
            var matches = Directory.GetFiles(@"c:\vish")
                .Where(path => Regex.Match(path, pattern).Success);

            foreach (string file in matches)
            {
                Console.WriteLine(file); 
                fileName = System.IO.Path.GetFileName(file);
                Console.WriteLine(fileName);
                destFile = System.IO.Path.Combine(targetPath, fileName);
                System.IO.File.Copy(file, destFile, true);

            } 
```

我上面的程序适用于单一模式。

我正在使用上面的程序在具有匹配模式的目录中查找文件，但在我的情况下，我有多个模式，所以我需要将`string pattern`变量中的多个模式作为数组传递，但我不知道如何操作Regex.Match 中的那些模式。

谁能帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T07:35:11.120

您可以在**正则表达式中添加****OR**：

 **```
string pattern = @"(23456780|otherpatt)"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T07:37:07.893

改变

```
 .Where(path => Regex.Match(path, pattern).Success); 
```

至

```
 .Where(path => patterns.Any(pattern => Regex.Match(path, pattern).Success)); 
```

其中模式是一个`IEnumerable<string>`，例如：

```
 string[] patterns = { "123", "456", "789" }; 
```

如果数组中有超过 15 个表达式，则可能需要增加缓存大小：

```
 Regex.CacheSize = Math.Max(Regex.CacheSize, patterns.Length); 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.cachesize.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.cachesize.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T07:41:53.520

Aleroot 的答案是最好的，但如果你想在代码中这样做，你也可以这样做：

```
 string[] patterns = new string[] { "23456780", "anotherpattern"};
        var matches = patterns.SelectMany(pat => Directory.GetFiles(@"c:\vish")
            .Where(path => Regex.Match(path, pat).Success)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T07:36:09.050

例如，以最简单的形式

```
string pattern = @"(23456780|abc|\.doc$)"; 
```

这将匹配您选择的模式的文件或具有 abc 模式的文件或扩展名为 .doc 的文件

[可在此处找到](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)Regex 类可用模式的参考**

# java - 如何在 Java String 中将西里尔字母转换为英文拉丁文？

> ID：10893313
> 
> 赞同：5
> 
> 时间：2012-06-05T07:30:07.067
> 
> 标签：java, letters

我有字符串 a= **"L1-23Миграција од VPN и промена на брзина ACTELIS Agregator alternativna 8-/208"** ;

我希望我的每个字符串都检查字符串中是否有一些西里尔字母并将它们转换为英文：

输出应如下所示：

**L1-23Migracija od VPN i promena na brzina ACTELIS Agregator alternativna 8-/208**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-11T14:26:56.930

我在 stackoverflow [Transliteration from Cyrillic to Latin ICU4j java](https://stackoverflow.com/questions/16273318/transliteration-from-cyrillic-to-latin-icu4j-java)上找到了这种方法，它用于将西里尔文（俄语）转换为拉丁文（但如果需要，您可以将其转换为其他方式）。我对其进行了一些调整，使其与马其顿西里尔字母兼容（我相信这就是您所需要的）。这里是：

```
public static String convertCyrilic(String message){
    char[] abcCyr =   {' ','а','б','в','г','д','ѓ','е', 'ж','з','ѕ','и','ј','к','л','љ','м','н','њ','о','п','р','с','т', 'ќ','у', 'ф','х','ц','ч','џ','ш', 'А','Б','В','Г','Д','Ѓ','Е', 'Ж','З','Ѕ','И','Ј','К','Л','Љ','М','Н','Њ','О','П','Р','С','Т', 'Ќ', 'У','Ф', 'Х','Ц','Ч','Џ','Ш','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','1','2','3','4','5','6','7','8','9','/','-'};
    String[] abcLat = {" ","a","b","v","g","d","]","e","zh","z","y","i","j","k","l","q","m","n","w","o","p","r","s","t","'","u","f","h", "c",";", "x","{","A","B","V","G","D","}","E","Zh","Z","Y","I","J","K","L","Q","M","N","W","O","P","R","S","T","KJ","U","F","H", "C",":", "X","{", "a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","/","-"};
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < message.length(); i++) {
        for (int x = 0; x < abcCyr.length; x++ ) {
            if (message.charAt(i) == abcCyr[x]) {
                builder.append(abcLat[x]);
            }
        }
    }
    return builder.toString();
} 
```

然后就用

```
String converted = convertCyrillic(a); 
```

# automation - 以编程方式更新 dokuwiki 页面内容的选项

> ID：10893318
> 
> 赞同：4
> 
> 时间：2012-06-05T07:30:34.853
> 
> 标签：automation, dokuwiki

啊！

我在内容修改自动化方面遇到了 DokuWiki 的一些问题。我需要以编程方式更新页面，在我的情况下，数据源将是文本文件，它将被正则表达式解析，并且输出将被插入到 DokuWiki 页面中。

到目前为止，我还没有找到与此功能相关的任何内容，但我真的怀疑我只是一个需要这些东西的人，所以再次发明自行车不是最好的方法:)

目前这个问题中有一些东西：

[在 Dokuwiki 渲染插件中访问原始 wiki 页面内容](https://stackoverflow.com/questions/2958070/acces-the-raw-wiki-page-contents-in-a-dokuwiki-render-plugin)

我的子问题是 - 我如何使用它来进行内容修改？我有很多时间浏览整个 dokuwiki 源代码，所以我希望有一些乐高积木可以简单地连接在一起，以便在不开发新界面等的情况下实现它。

非常感谢您的任何回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:38:09.193

您在这里有三个选择：

1.  直接修改磁盘上的页面内容。您的所有页面都以`data/pages/pagename.txt`原始文本文件的形式存在。这样你就不会有任何修订历史
2.  使用 XMLRPC API 访问和更新您的页面。见[http://www.dokuwiki.org/devel:xmlrpc](http://www.dokuwiki.org/devel:xmlrpc)
3.  使用 dwpage 命令行工具签出，然后修改，然后再次签入您的页面数据。见[http://www.dokuwiki.org/cli#dwpagephp](http://www.dokuwiki.org/cli#dwpagephp)

# android - android：在对话框关闭时退出应用程序（活动）

> ID：10893319
> 
> 赞同：0
> 
> 时间：2012-06-05T07:30:35.363
> 
> 标签：android, dialog

我有一个活动，它打开一个对话框来注册或登录。我想要的是，如果我按下后退按钮，不仅对话框而且活动应该退出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:35:09.057

用于在对话框上按下返回键时`setOnCancelListener`调用`finish()`

```
//for example
new AlertDialog.Builder(this)
.setOnCancelListener(new OnCancelListener() {

    @Override
    public void onCancel(DialogInterface dialog) {
        finish();   //to finish Activity on which dialog is displayed
    }
})
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:36:28.903

您可以`setOnCancelListener`为您的对话框设置一个侦听器并简单地调用`finish()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:34:37.530

```
public void onBackPressed() {

       final Builder builder = new Builder(this);
        builder.setTitle(R.string.caption);
        builder.setMessage("Do you really want to exit?");
        builder.setPositiveButton(android.R.string.ok, new OnClickListener() {
            @Override
            public void onClick(final DialogInterface dialog, final int which) {
                     YourActivity.this.finish();
                     dialog.dismiss();    
            }
        });
        builder.setNegativeButton(android.R.string.cancel,
                new OnClickListener() {
                    @Override
                    public void onClick(final DialogInterface dialog,
                            final int which) {
                                                  dialog.dismiss();
                    }
                });
        final AlertDialog dialog = builder.create();
        dialog.show();
} 
```

这应该可以解决您的问题:)

# c# - 分页 ASP.NET 中继器

> ID：10893320
> 
> 赞同：0
> 
> 时间：2012-06-05T07:30:43.683
> 
> 标签：c#, asp.net, sql, repeater

我有一个包含数千种产品的数据库，每次运行不同的查询时，我都会查询它以拉回大量数据。我担心一旦项目上线并且越来越多的人开始访问该网站，该性能将受到打击。我无法增加服务器的功率，因此我希望有一个可以为我省去麻烦的解决方案。有什么方法可以在 sql 查询中加载集合吗？

```
select top 20 where xxx
select next 20 
```

我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:04:19.867

通过使用 SQL Server 2005 ROW_NUMBER() 提供的新函数，您可以获得带有行号的结果集。此行号可用于数据库端的分页。

```
CREATE PROCEDURE [dbo].[getcust]
    @PageIndex INT, 
    @PageSize INT,
    @Searchkey VARCHAR(255),
    @TotalRecords int OUTPUT
  AS
IF EXISTS(SELECT * FROM tbcustomer  WHERE cust_firstname= @Searchkey)
BEGIN

  SELECT @TotalRecords =count(*)  FROM tbcustomer WHERE cust_firstname= @Searchkey;

  WITH customer AS ( 
    SELECT  ROW_NUMBER() OVER (ORDER BY cust_firstname ASC) AS Row, 
        cust_id, cust_firstname,address,phone 
    FROM tbcustomer WHERE cust_firstname= @searchkey
  )
  SELECT cust_id,cust_firstname,address,phone FROM customer 
  WHERE Row between (@PageIndex - 1) * @PageSize + 1 and @PageIndex*@PageSize

END 
```

# python - 删除XXXXXX之前的文件内容

> ID：10893321
> 
> 赞同：0
> 
> 时间：2012-06-05T07:30:43.897
> 
> 标签：python, bash

[我的问题与Delete file contents after line == "xxxxxxx"](https://stackoverflow.com/questions/4560875/delete-file-contents-after-line-xxxxxxx)非常相似，但是我不想删除 XXXXXX 之后的部分，而是想删除 BEFORE 之后的内容。

在 SO Spirit 中，让我提出我的尝试：

我在 Python 中通过以下方式执行此操作：

```
f = open('paper.html')
lines=f.readlines()
for it in range(1,len(lines)):
 if 'Visible' in lines[it]:
  counter=it
  break

h = open('paper_sub.html','wa')
for it in range(counter+1,len(lines)):
 h.write(lines[it])

f.close()
h.close() 
```

有 sed 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:39:04.653

```
sed -n '/.*Visible.*/,$p' originalfile > newfile 
```

如果你不想要 Visible 的行

```
sed '1,/.*Visible.*/d' originalfile > newfile 
```

# android - PhoneGap - OnDeviceReady 方法没有被调用

> ID：10893322
> 
> 赞同：2
> 
> 时间：2012-06-05T07:30:45.537
> 
> 标签：android, cordova

我正在 phonegap (android) 中开发我的第一个应用程序。

# 索引.html

```
 <!DOCTYPE html>
    <html>
      <head>
        <title>Device Properties Example</title>

        <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
        <script type="text/javascript" charset="utf-8">
        alert('code: 1');
        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);
        alert('code: 2');
        var watchID = null;
        alert('code: 3');
        // Cordova is ready
        //
        function onDeviceReady() {
            // Update every 3 seconds
            alert('code: 4');
            var options = { frequency: 3000 };
            watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
        }

        // onSuccess Geolocation
        //
        function onSuccess(position) {
            alert('code: 5');
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                                'Longitude: ' + position.coords.longitude     + '<br />' +
                                '<hr />'      + element.innerHTML;
        }

        // clear the watch that was started earlier
        // 
        function clearWatch() {
            alert('code: 6');
            if (watchID != null) {
                navigator.geolocation.clearWatch(watchID);
                watchID = null;
            }
        }

        // onError Callback receives a PositionError object
        //
        function onError(error) {
          alert('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');
        }

        </script>
      </head>
      <body>
        <p id="geolocation">Watching geolocation...</p>
        <button onclick="clearWatch();">Clear Watch</button>     
      </body>
    </html> 
```

这里没有调用 onDeviceReady 方法。请帮助我了解我所缺少的。

我已经添加了这些权限

```
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

在 manifest.xml 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:53:33.363

以这种方式遵循它，它应该可以工作。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Cordova Device Ready Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Call onDeviceReady when Cordova is loaded.
    //
    // At this point, the document has loaded but cordova-1.7.0.js has not.
    // When Cordova is loaded and talking with the native device,
    // it will call the event `deviceready`.
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        // Now safe to use the Cordova API
    }

    </script>
  </head>
  <body onload="onLoad()">
  </body>
</html> 
```

还要检查 Cordova 1.7 下载中的[Android 示例文件夹](https://github.com/phonegap/phonegap/tree/master/lib/android/example)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:27:49.647

我有一个解决方案！熟人问题真的很简单。

我们通常开发一个cordova(phonegap)项目，然后将所有相关文件（/www）复制到另一个。但我意识到 Cordova 文件（现在是 cordova-2.2.0）在平台之间是不同的。

**甚至不要复制cordova文件。使用平台上的原始示例一。**

不确定每种情况。这有帮助吗？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:28:30.470

对于仍在寻找解决方案的每个人 - 检查导入到您的 index.html 中的替代 .js 文件，例如 index.js 可能有自己的设备就绪调用和功能，因此会阻止您的自定义。

# sql - SQL 连接上的重复行

> ID：10893330
> 
> 赞同：2
> 
> 时间：2012-06-05T07:31:06.043
> 
> 标签：sql, sql-server

当我对表进行左连接时，当在右表中找到更多值时，它会复制左表的结果。即使右表上有多个值，我如何才能只返回左侧的不同值。（即使右表有多个图像，也只返回一部电影）

```
SELECT
    *
FROM
    Movie AS M
    LEFT JOIN MovieImage AS MI WITH (
        NOLOCK
) ON M.TheMovieDbId = MI.TheMovieDbId
WHERE
    MI.ImageType = 'Poster'
    AND MI.ImageSize = 'Thumb'
    OR MI.ImageType IS NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:55:42.810

通常，如果您不希望从中获得结果，则不会使用“正确的表”。

```
SELECT 
     *
FROM 
    Movie AS M
WHERE
    EXISTS (SELECT *
      FROM
          MovieImage AS MI
      WHERE  
          M.TheMovieDbId = MI.TheMovieDbId
          AND
          MI.ImageType = 'Poster'
          AND 
          MI.ImageSize = 'Thumb') 
```

要让行也没有匹配的行（根据您的查询），请使用此

```
SELECT 
     *
FROM 
    Movie AS M
WHERE
    EXISTS (SELECT *
      FROM
          MovieImage AS MI
      WHERE  
          M.TheMovieDbId = MI.TheMovieDbId
          AND
          MI.ImageType = 'Poster'
          AND 
          MI.ImageSize = 'Thumb')
UNION
SELECT * FROM Movie 
```

否则，您是在说“给我一个来自 MovieImage 的任意行”，我永远不明白......

其他注意事项：

*   不要一直使用 NOLOCK
*   使用模式名称（通常是 dbo）限定您的表名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:07:53.193

如果您只想选择一个，为什么不直接执行 a `group by`，然后选择`min()`or `max()`？根据您是否要获取所有电影（无论它们是否有图像），请使用`left join`. 如果您只想要有图像的电影，请使用`inner join`. 如果您只想要具有特定数量图像的电影，请使用该`having`子句。

简化示例：

```
Select M.Name, isnull(max(MI.ImageName), 'No Image')
From Movie M
Left Join MovieImage MI
On M.TheMovieDbId = MI.TheMovieDbId
Group By M.Name 
```

# php - php + mysql：将一行从一个表复制到另一个表

> ID：10893331
> 
> 赞同：0
> 
> 时间：2012-06-05T07:31:19.880
> 
> 标签：php, mysql, optimization, query-optimization

我有两个表`table`（fieldA、fieldB、fieldC）和`log_table`（id、fieldA、fieldB、fieldC）。是否可以使用一个（不是两个：选择和插入）查询`table`来复制一行？`log_table`

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:34:29.073

您可以使用单个**INSERT**语句传递**SELECT**查询而不是常量值列表：

```
INSERT INTO log_table (SELECT fieldA, fieldB, fieldC FROM table) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:34:39.883

我不确定你想要什么。但也许是这样的：

```
INSERT INTO log_table( fieldA, fieldB, fieldC)
SELECT fieldA, fieldB, fieldC FROM table 
```

# jquery - 在codeigniter中使用ajax验证失败后使用jquery.load填充表单

> ID：10893332
> 
> 赞同：0
> 
> 时间：2012-06-05T07:31:19.770
> 
> 标签：jquery, ajax, codeigniter, validation

我看过很多关于 jquery ajax 的表单验证教程。我发现同样的事情，所有人都只告诉成功的表单验证。如果服务器端验证失败，我需要找到如何显示错误。换句话说，当我们提交一个没有 ajax 的表单时，表单会重新填充错误消息并且输入填充用户提供的。在这种方法中，我们使用了一些很棒的 php 函数，例如 form_prep。这是查看代码。

```
<?php // Change the css classes to suit your needs    
$attributes = array('class' => '', 'id' => 'login');
echo form_open(SITE_URL.'user/insertUser', $attributes); 
?>

<p>
<label for="username">User Name <span class="required">*</span></label>
<input type="text" name="username" maxlength="255" value="<?php echo form_prep($this->input->post('username'));?>"  />
<span id="username"><?php echo form_error('username'); ?></span><br />
</p>
<p>
<label for="first_name">First Name <span class="required">*</span></label>
<input type="text" name="first_name" maxlength="255" value="<?php echo form_prep($this->input->post('first_name'));?>"  />
<span id="first_name"><?php echo form_error('first_name'); ?></span><br />
</p>

<p>
<label for="last_name">Last Name <span class="required">*</span></label>
<input type="text" name="last_name" maxlength="255" value="<?php echo form_prep($this->input->post('last_name')); ?>"  />
<span id="last_name"><?php echo form_error('last_name'); ?></span><br />
</p>

<p>
<label for="password">Password <span class="required">*</span></label>
<input type="text" name="password" maxlength="255" value="<?php echo form_prep($this->input->post('password')); ?>"  />
<span id = "password"><?php echo form_error('password'); ?></span><br />
</p>

<p>
<label for="email">Email <span class="required">*</span></label>
<input type="text" name="email" maxlength="255" value="<?php echo form_prep($this->input->post('email')); ?>"  />
<span id = "email"><?php echo form_error('email'); ?></span><br />
</p>

<p>
<?php echo form_submit( 'submit', 'Submit', 'id="submit"'); ?>
</p>

<?php echo form_close(); ?> 
```

您可以在此处看到使用了 form_prep($this->input->post('username')) ，这有助于解决安全问题。但是，当我使用相同的表单在验证失败时使用 ajax 重新填充时，它不会显示错误，也不会显示已填充的输入框。而是像第一次加载表单一样加载表单。这是我如何将它与 ajax 一起使用。

首先在一个 div 我正在加载表单

```
$('#userform').load('<?php $this->load->view('user_form')?>'); 
```

现在ajax

```
$(function()
{
    $('#login').submit(function()
    {
        $.ajax(
        {
            type : 'POST',
            data : $(this).serialize(),
            url  : $(this).attr('action'),
            success : function(data)
            {
                if(data == 1)
                {
                    // do something 
                }
                else
                {
                    $('#userform').load('<?php $this->load->view('user_form')?>');
                }
            }
        });
        return false;
    });
}); 
```

最后是我的控制器

```
function insertUser()
{
    if($this->form_validation->run() == FALSE)
    {
        echo 0;
    }else{
        echo 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:55:24.040

我要做的是在此处的控制器中呈现表单，而不是

```
echo 0;

just do

$html =   $this->load->view('user_form',true);
echo $html; 
```

并在 ajax 函数中替换

```
else
{
    $('#userform').load('<?php $this->load->view('user_form')?>');
} 
```

和

```
else 
{
    $('#userform').html(data);
} 
```

# php - PHP - 开始准备好的语句，但它们看起来很笨拙

> ID：10893334
> 
> 赞同：3
> 
> 时间：2012-06-05T07:31:24.213
> 
> 标签：php, mysql, pdo

我有一个网站，我可以在其中连接到 mySQL 数据库，以通常的方式进行一些查询。我没有做任何比以下更复杂的事情：

```
$result = mysql_query('SELECT * FROM table WHERE condition = "'.mysql_real_escape_string($_POST['condition']).'"');
$row = mysql_fetch_assoc($result);
echo $row['var1'].' '.$row['var2']; 
```

它有效。但是我一直在阅读准备好的语句，它们似乎提供了更多的安全性，我想使用它们并用一些准备好的语句替换我的数据库调用，所以我一直在研究 mysqli 类。

但似乎要实现同样的事情需要更多的代码。我知道我必须这样做才能获得上述信息：

```
$stmt = $db->stmt_init();
if($stmt->prepare('SELECT * FROM table WHERE condition = ?')) {
$condition = $_POST['condition'];
$stmt->bind_param('s', $condition);
$stmt->execute();

$stmt->bind_result($var1, $var2, ...);
if ($stmt->fetch()) {
    echo $var1 . ' - ' . $var2;
}
} 
```

因此，这似乎是一大堆代码，而且更难管理。我是否误解了如何使用这些，或者是否有更短的方法来做“正常”的 PHP 事情：

*   填充 $row，这是一个数组，表示数据库中的一行。
*   循环遍历行，并用“下一行”重新填充 $row 。
*   正常的 UPDATE 查询。

以上所有内容都可以“正常”快速完成，但使用准备好的语句似乎需要更多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:48:08.980

一种常见的方法是将数据库功能包装到一个类中。这是一个实现准备好的语句缓存的简单方法：

```
class DB {
  protected $db;
  protected $cache;

  public function __construct($host, $database, $user, $pass, $charset = 'utf8') {
    $this->db = new PDO(sprintf('mysql:dbname=%s;host=%s', $database, $host, $charset),
                        $user, $pass);
    $this->cache = array();
    $this->db->query(sprintf('SET NAMES %s', $charset));
  }

  public function query($query, $vars = array()) {
    //You may input a simple value, no need for arrays with a single argument                              
    if (!is_array($vars))
      $vars = array($vars);

    //Short names inside the function                                                                      
    $db = &$this->db;
    $cache = &$this->cache;

    //Ensure the prepared statement is in cache                                                            
    if (!isset($cache[$query]))
      $cache[$query] = $db->prepare($query);

    //Execute the statement and return all rows                                                            
    $stmt = $cache[$query];
    if ($stmt->execute($vars))
      return $stmt->fetchAll();
    else
      return false;
  }
} 
```

它的使用非常接近旧的数据库接口。例子：

```
$db = new DB(host, database, user, pass);
$result = $db->query('SELECT id, name FROM table WHERE id = ? AND address = ?',
                     array(42, 'home'));
foreach ($result as $row) {
  ...
} 
```

# python - 如何在不安装的情况下包含 python PIL 模块

> ID：10893340
> 
> 赞同：0
> 
> 时间：2012-06-05T07:31:52.717
> 
> 标签：python, import, python-imaging-library, python-module, imaging

我需要分发一些使用 PIL 的 Python 软件，但要避免在每台目标机器上安装 PIL。我有目录结构：

```
/myscript.py
/PIL/_imaging.so
/PIL/Image.py
/PIL/ImageFont.py
/PIL/ImageOps.py
etc 
```

在`myscript.py`我进口：

```
import PIL.Image, PIL.ImageFont, PIL.ImageDraw, PIL.ImageOps
import PIL.JpegImagePlugin, PIL.PdfImagePlugin 
```

但脚本执行说：

```
File "/Users/svp/git/multipdf-air/src/backend/mac-sl/PIL/ImageFont.py", line 148, in FreeTypeFont
def getmask2(self, text, mode="", fill=Image.core.fill):
File "/Users/svp/git/multipdf-air/src/backend/mac-sl/PIL/Image.py", line 37, in __getattr__
raise ImportError("The _imaging C module is not installed")
ImportError: The _imaging C module is not installed 
```

我尝试导入`_imaging` 类似的模块`import PIL._imaging`，但这没有帮助。

那么，如何在不安装 PIL 的情况下包含此模块？

# android - 具有多个文本视图的可扩展列表视图

> ID：10893341
> 
> 赞同：1
> 
> 时间：2012-06-05T07:31:54.347
> 
> 标签：android, expandablelistview, expandablelistadapter

我有一个可扩展列表视图，父级有 4 个文本视图，子级也有 4 个文本视图。

我知道如果我在父节点上只有 1 个元素，在子节点上只有 1 个元素，我该如何填充，但我没有 4 个元素。

我想我必须将所有数据放在单独的数组列表中。

```
 numerosServicios = new ArrayList<String>();
    profesiones = new ArrayList<String>();
    direcciones = new ArrayList<String>();
    fechasCaduca = new ArrayList<String>();
    tipos = new ArrayList<String>();
    diasEnCurso = new ArrayList<String>();
    fechasProximasCitas = new ArrayList<String>();
    estados = new ArrayList<String>(); 
```

但我不知道我应该如何制作适配器。我看到了这段代码，但我不明白。

请问有人有例子吗？谢谢

**编辑**

我找到了一个“解决方案”：

```
 private List<? extends List<? extends Map<String, ?>>> creaListadeHijos() {
                    ArrayList resultado_hijo = new ArrayList();
                    for(int i=0;i<=ArrayServicios.size();i++){
                        HashMap hijo = new HashMap();
                        hijo.put("tipo", tipos.get(i));
                        hijo.put("diasEnCurso", diasEnCurso.get(i));
                        hijo.put("estado", estados.get(i));
                        hijo.put("fechaProCita", fechasProximasCitas.get(i));
                        resultado_hijo.add(hijo);
                    }

                    return (List)resultado_hijo;    }

                private List<? extends Map<String, ?>> creaListaDeGrupos() {

                    ArrayList resultado_padre = new ArrayList();
                    for(int i=0;i<=ArrayServicios.size();i++){
                        HashMap padre = new HashMap();
                        padre.put("numero_servicio", numerosServicios.get(i));
                        padre.put("profesion", profesiones.get(i));
                        padre.put("direccion", direcciones.get(i));
                        padre.put("fecha_cad", fechasCaduca.get(i));
                        resultado_padre.add(padre);
                    }

                    return (List)resultado_padre;
                }
SimpleExpandableListAdapter expListAdapter = new SimpleExpandableListAdapter(
                        contexto,
                        creaListaDeGrupos(),
                        R.layout.linea_padre,
                        new String[] { "numero_servicio","profesion","direccion","fecha_cad" },
                        new int[] { R.id.tvServicio,R.id.tvProfesion,R.id.tvDireccion,R.id.tvDiasEnCurso},      
                        creaListadeHijos(), 
                        R.layout.linea_hija,    
                        new String[] { "tipo", "diasEnCurso","estado","fechaProCita" }, 
                        new int[] { R.id.tvTipo , R.id.tvDiasEnCurso, R.id.tvEstado, R.id.tvFechaProximaCita}   
                        );

                setListAdapter( expListAdapter );
                registerForContextMenu(getExpandableListView()); 
```

# vb.net - 参数数量未知的函数或方法

> ID：10893343
> 
> 赞同：8
> 
> 时间：2012-06-05T07:31:57.827
> 
> 标签：vb.net

有没有办法创建一个参数数量未知的方法？

如果是这种情况：

*   如何在这种方法中访问它们？
*   它们必须来自同一类型吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T07:36:04.340

是的是的。

这是可能的，并且它们都必须是相同的类型，如果您需要传递各种类型，请改用对象数据类型，然后在函数中将它们拆箱。使用参数数组：

```
' Accept variable number of arguments 
Function Sum(ByVal ParamArray nums As Integer()) As Integer 
  Sum = 0  
  For Each i As Integer In nums 
    Sum += i 
  Next 
End Function   ' Or use Return statement like C#

Dim total As Integer = Sum(4, 3, 2, 1)   ' returns 10 
```

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ct363x9h%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T04:34:26.200

我知道这已经得到解答，可能大多数人都会定期来这里寻求答案。@pylover 答案是正确的，但要添加它，您可以通过简单地调用`Sum()`函数来避免循环遍历所有项目。因此;

```
Function Sum(ByVal ParamArray nums As Integer()) As Integer 
  Return nums.Sum()
End Function 
```

调用函数时

```
Dim total As Integer = Sum(4, 3, 2, 1) 
```

`total`返回`10`。您可以在其上执行的其他功能，包括`Max()`、`Min()`等

# javascript - 如何使用 Knockout 绑定删除 Kendo 网格中的一行

> ID：10893345
> 
> 赞同：0
> 
> 时间：2012-06-05T07:32:04.667
> 
> 标签：javascript, knockout.js, kendo-ui

好吧，我认为这一定很容易，但是在使用 kendo-knockout 绑定时，Kendo “destroy”命令无法按预期工作。它从网格中删除行，但未更新视图模型。

HTML：

```
<div id="gridClients" data-bind="kendoGrid: { data: FilteredClients, columns: [ {title: 'Actions', command: 'destroy'}, { field: 'ClientName', title : 'Client Name' }, 
{ field: 'ClientCode', title: 'Client Code' } ], scrollable: false, sortable: true, pageable: false, editable: true }">
</div> 
```

JS：

```
$(document).ready(function () {
    var clients = { FilteredClients: [{ ClientName: '1', ClientCode: 'Value 1' }, { ClientName: '2', ClientCode: 'Value 2'}], Header: 'TEST' };
    var viewModel = ko.mapping.fromJS(clients);
    ko.applyBindings(viewModel);
}); 
```

无论如何，我正在寻找一种不同的方法，因为我可能需要在 Kendo 网格行中使用复选框，并且我需要知道选中/取消选中复选框的行 uid。我确实尝试使用 data-bind="click: someMethod" 添加带有按钮的列，但在这种情况下，someMethod 的数据参数实际上是整个 viewModel，我不知道如何找到合适的行。任何建议，将不胜感激。

谢谢， 伊霍尔

# android - android listview滚动错误

> ID：10893348
> 
> 赞同：0
> 
> 时间：2012-06-05T07:32:14.720
> 
> 标签：android, database, listview

我的列表视图有问题，数据工作正常，但是当我向下滚动它时，标题不断重复，但我点击它时的内容正在工作。![](../Images/2bff6ad3015f7adf9a7e3a3c86f8db9b.png)

这是模拟器中的图像。

![在此处输入图像描述](../Images/d30a7ffa6e8f4ca49234c53ec7ca1865.png)

这是我数据库中的数据

这是我在列表视图中使用的代码

```
dataset_cursor = helper.getBooksByTitle2();   
startManagingCursor(dataset_cursor);        
adapter = new ContentAdapter(dataset_cursor);
list.setAdapter(adapter);`

class ContentAdapter extends CursorAdapter{
    ContentAdapter(Cursor c)
    {
        super(LEGALe.this, c);
    }
    public void bindView(View row, Context ctxt, Cursor c)
    {
        ContentHolder holder = (ContentHolder)row.getTag();
        holder.populateFrom(c, helper);
    }
    public View newView (Context ctxt, Cursor c, ViewGroup parent)
    {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.row2, parent, false);
        ContentHolder holder = new ContentHolder(row);
        row.setTag(holder);
        return(row);
    }
}

public Cursor getBooksByTitle2()
{
    return (getReadableDatabase().rawQuery("SELECT _id,table_of_content FROM tblContent WHERE title_id='"+ LEGALe.passedVar.toString() +"' ORDER BY table_of_content" , null));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:41:32.047

它与查看项目的回收有关。我认为您没有正确管理**getView**。

但是，我的建议是将您的标题设置为列表标题中的视图，使用`addHeaderView`. 或者，也许将它完全从*ListView*中取出（因此它始终可见）并像`TextView`上面的那样单独设置*ListView*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:01:15.070

如果您丢失了要在列表视图中显示的数据，正如我在您的问题中看到的那样，android 只会创建在活动中可见的列表项的那么多实例，在您滚动列表后，它会将相同的实例分配给其他项目，依此类推..这就是为什么当你的滚动标题不断重复

例如，如果列表显示 10 个项目，如 item1,item2-------item10 表示在您滚动查看第 11 个项目后创建了 10 个实例 android 为 12 2 个实例分配 1 个实例，依此类推

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:05:41.120

您的适配器似乎没有正确实施，请执行以下操作：

```
dataset_cursor = helper.getBooksByTitle2();
startManagingCursor(dataset_cursor);
adapter = new ContentAdapter(dataset_cursor); list.setAdapter(adapter);

class ContentAdapter extends CursorAdapter
{ 
       ContentAdapter(Cursor c) 
       { 
           super(LEGALe.this, c); 
       } 
       public void bindView(View row, Context ctxt, Cursor c) 
       { 
           //Get Item from Cursor
           //Set values to views
       } 
       public View newView (Context ctxt, Cursor c, ViewGroup parent) 
       { 
            LayoutInflater inflater = getLayoutInflater(); 
            View row = inflater.inflate(R.layout.row2, parent, false); 
            return(row); 
        } 
   }

   public Cursor getBooksByTitle2() 
   { 
        return (getReadableDatabase().rawQuery("SELECT _id,table_of_content FROM tblContent WHERE                title_id='"+ LEGALe.passedVar.toString() +"' ORDER BY table_of_content" , null)); 
   } 
```

# javascript - 从复选框获取链接

> ID：10893351
> 
> 赞同：0
> 
> 时间：2012-06-05T07:32:34.253
> 
> 标签：javascript, checkbox, hyperlink, makefile

如果我有一个复选框和我想将其设为链接的值

```
<a href="uppdate02.cfm?id=(checkbox value)">Uppdatera</a> 
```

这是我正在使用的代码

```
<cfoutput query="recTest">
  <table width="561" border="1">
    <tr>
      <td width="43"><form id="form1" name="form1" method="GET" action="uppdat02.cfm">
        <input type="checkbox" name="id" id="YesNo" value="#recTest.AlbID#"/>
         <input type="submit" value="Submit" />
      </form> </td>
      <td width="502">#recTest.Album#</td>
    </tr>
  </table></cfoutput> 
```

如果我有一个复选框，我希望 YesNo 的值应该在链接中，并且我想让它成为链接的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:42:16.000

海

尝试使用此代码的链接：

```
<a href="#" onclick="return setLink(this)">Uppdatera</a>
<script type="text/javascript">
function setLink(tgt) {
  tgt.href='uppdate02.cfm?id='+document.getElementById('YesNo');
  return true;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:35:23.463

不完全确定用例，但这里是从 DOM 节点中提取 id 并模拟链接行为的逻辑。

```
<a id="uppdatera">Uppdatera</a>
<script type="text/javascript">
    document.getElementById('uppdatera').addEventListener('click', function(e) {
        window.location = 'uppdate02.cfm?id=' + document.getElementById('YesNo').value;
    }, false); 
</script> 
```

演示：http: [//jsfiddle.net/AlienWebguy/fhTHs/](http://jsfiddle.net/AlienWebguy/fhTHs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:51:46.337

```
<a href="#" onclick="return this.href='uppdate02.cfm?id='+document.getElementById('YesNo').value">Uppdatera</a> 
```

试试。

# ios - 无法在 PreapreForSegue 中设置 NavigationController 的 Outlet 值 TopViewController

> ID：10893352
> 
> 赞同：2
> 
> 时间：2012-06-05T07:32:43.250
> 
> 标签：ios, xcode4.2, storyboard

我的项目有以下场景：

[Preview View Controller] --(Modal)--> Navigation Controller --(Top)--> [Photo Setting View Controller]

在 [Preview View Controller] 中，我有一个将执行模态 segue 的按钮（identifier="PreviewToSetting"），我在 [Preview View Controller].m 文件中定义了 prepareForSegue 方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *) segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"PreviewToSetting"]) {
        UINavigationController *unc=segue.destinationViewController;
        PhotoSettingViewController *psvc=(PhotoSettingViewController *) unc.topViewController;
        psvc.lblAudio.text=@"TEST";
    }
} 
```

我在这个过程中设置了断点，并且确实看到上面的块运行没有错误。segue 确实成功执行并引导我进入“照片设置”场景，但是 lblAudio 的文本没有像我认为的那样设置为“测试”，有人知道为什么吗？

更多信息：

*   lblAudio 是 PhotoSettingViewController（UITableViewController 子类）中的一个 UILabel Outlet 属性，位于表格部分中的静态表格单元格中
*   lblAudio 被合成并定义为

    @property (strong,nonatomic)IBOutlet UILabel *lblAudio;

*   lblAudio IBOutlet 已正确绑定，因此如果我在 viewWillAppear 方法中重新定义 text 属性，如 self.lblAudio.text=@"TEST"，标签文本将正确更改为 "TEST"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:18:13.970

由于属性在 segue 时为 IBOutlet，因此未初始化。所以尝试做类似的事情

为类似标签的文本创建一个属性`NSString *labelText`并将值分配`@"TEST"`给该属性，然后在`viewWillAppear:`方法中将其分配给标签将完成您的工作

# jquery - Android 上的 jQuery Mobile：返回按钮可返回 2 个页面

> ID：10893353
> 
> 赞同：0
> 
> 时间：2012-06-05T07:32:52.053
> 
> 标签：jquery, android, mobile, jquery-mobile

我正在开发一个基于 jQuery mobile 1.1.0 的移动网站，在 Android（2.3.3 版本，默认内置浏览器）上测试时遇到问题。在浏览网站时，如果我按下后退按钮，网站会将我退回两页，而不是一页。

这是用最少的代码进行测试的站点，没有额外的 javascript，只包括 jQuery 和 jQuery Mobile。

[http://aaa.srv7.321.lt/](http://aaa.srv7.321.lt/)

您可以通过转到邮件->选择邮件消息->然后按返回来查看。实际上，通过进入第一条邮件消息，按返回会返回一页。但是如果你去另一个，那么后退按钮会开始把你带回来 2 页。

在 iPhone 上没有这样的问题。此外，禁用 ajax 页面加载解决了这个问题。

# jenkins - 如何在 Hudson/Jenkins 中使用 Email-ext 和 Log Parser (with jelly script) pluins？

> ID：10893357
> 
> 赞同：2
> 
> 时间：2012-06-05T07:33:28.863
> 
> 标签：jenkins, jenkins-plugins, hudson-plugins, logparser, email-ext

如何使用带有 Email-ext 插件的 Log Parser 通过电子邮件获取已解析的控制台输出？

我`${JELLY_SCRIPT,template="html"}`用来获取格式化的消息。

安装和配置 Log Parser Plugin 后，我仍然收到未解析控制台输出的电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:40:47.500

控制台解析器插件创建单独的 html 文件，稍后可以通过构建状态页面上的链接显示。它与 Email-ext 插件无关（至少不是直接的）。在我看来，有几个选择：

*   忘记电子邮件中的 Log Parser 插件。在模板中自己格式化输出（对于更繁重的格式化，您可以使用 EmailExt 插件的 Groovy 脚本选项）。
*   在电子邮件中仅提供摘要并包含指向已解析控制台输出的链接。它在`http://<jenkins_server>/job/<job-name>/<build-num>/parsed_console`。

作为旁白：

当您拥有大量日志时，Log Parser 插件可以节省大量时间。

总的来说，我的经验表明，构建电子邮件更多的是麻烦而不是帮助：要么太多以至于人们忽略它们，要么太少而无法提供真正的服务。出于某种原因，经理们喜欢它们，而开发人员则讨厌它们。我花了一周时间用 EmailExt 和 Groovy 创建了一个超级骗子报告——最后没有人看它。我发现唯一有用的电子邮件是那些发送给破坏构建的提交者的电子邮件。简而言之，请确保不要将时间浪费在看起来很性感但最终几乎一文不值的东西上。

# osgi - 在 Eclipse 中运行 R-OSGI 示例服务/客户端代码

> ID：10893358
> 
> 赞同：0
> 
> 时间：2012-06-05T07:33:40.200
> 
> 标签：osgi

我只是从 R-OSGI SVN 下载源代码。我尝试在 eclipse 中运行我下载的示例，服务示例似乎还可以！然后我运行客户端，它抛出：

org.osgi.framework.BundleException：OSGi 远程服务不存在。在 ch.ethz.iks.r_osgi.sample.client.Activator.start(Activator.java:85) 在 org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711) 在 java。 security.AccessController.doPrivileged(Native Method) at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702) at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl .java:683) 在 org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299) ) 在 org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider 的 org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:291)。

我认为客户找不到该服务。

然后我尝试ping端口127.0.0.1:9278，找不到并抛出消息：Ping请求找不到主机127.0.0.1:9278。请检查名称，然后重试。

怎么了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:03:48.253

感谢您的建议，他们非常有帮助！

1.  我不应该在类路径中配置 remote-1.0.0.RC4。

2.  我应该把它放在目标平台上。（目标平台/插件）

3.  在启动服务包之前，我应该启动包 remote-1.0.0.RC4。

    客户端现在工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:01:12.583

*   当您启动客户端时，包含该服务的服务器是否仍在运行？
*   服务器中是否有任何错误？（还要检查 OSGi 日志，而不仅仅是控制台！）
*   你有防火墙运行吗？
*   启动服务器时是否占用了9278端口？

# automapper - 如何 AutoMapper 字段？

> ID：10893359
> 
> 赞同：0
> 
> 时间：2012-06-05T07:33:43.780
> 
> 标签：automapper

我想从实体映射到模型

实体：

```
public class FileEntity
{
    public IList<TagEntity> Tags { get; set; }
} 
```

模型：

```
public class FileModel
{
    public IList<TagModel> Tags { get; set; }
} 
```

TagEntity 和 TagModel 中的字段都是一样的

我应该如何映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:21:00.730

这应该很简单：

```
Mapper.CreateMap<TagEntity, TagModel>();
Mapper.CreateMap<FileEntity, FileModel>(); 
```

AutoMapper 将自动映射列表，而无需您做任何额外的事情。

# php - 如何使用ajax将数组从html传递到php

> ID：10893362
> 
> 赞同：2
> 
> 时间：2012-06-05T07:33:57.070
> 
> 标签：php, jquery, ajax, arrays

我尝试通过 ajax 使用 jquery 传递数组并返回，但我的代码运行不正常。我一直在改变它，但它不起作用。请告知该怎么做。我认为我的 jquery 代码还可以，但 php 代码不能重播。谢谢。

html代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.5/jquery.min.js"></script>

<script type="text/javascript" >
$(document).ready(function(){
    var allVals = { 
              'a': '1', 
              'b': '2',
              'c': '3' 
            }; 
            //$.each(allVals, function(key, value) { 
              //alert(key + ': ' + value); 
                //  });
            });
$.ajax({
    type: "POST",
     dataType: 'html',
     url: "test4.php",
     data: 'allVals=' + allVals,
         cache: false,
         success: function(data)
         {
            alert(data);
            $('#test').html(data);
            }
         });
</script>

<title>Insert title here</title>
</head>
<body>
<div id="test">##</div>
</body>
</html> 
```

php代码test4.php

```
<?php
    $allVals = $_POST['allVals'];
    if ($allVals != ""){
          foreach ($allVals as $key => $value) {
          echo ($key.' '.$value."<br />");
    }     }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:54:54.207

你也可以像这样从 jQuery 向 PHP 发送一个数组。在您的示例中，您发送一个对象：

```
<?php 
if($_SERVER['REQUEST_METHOD']=='POST'){
    header('Content-Type: text/html');
    print_r($_POST['allVals']);
    /*
    Array ( [0] => 1 [1] => 2 [2] => 3 ) 
    */
    die;
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(function() {

    var myJavascriptArray = new Array('1', '2', '3');
    //or var myJavascriptArray=["1","2","3"]; 

    $.ajax({
        type: "POST",
        dataType: 'html',
        url: "test.php",
        data: {'allVals[]=' : myJavascriptArray},
        cache: false,
        success: function(data){
            $('#test').html(data);
        }
    });

});
</script>

</head>

<body>
<div id="test"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:43:21.247

您正在 $(document).ready(...-scope 之外进行 $.ajax 调用。将它移到里面！

我会做这部分

```
data: 'allVals=' + allVals 
```

像这样：

```
data: allVals 
```

如果您想像在 php 中一样接收它，请将其更改为：

```
data: {"allVals": allVals} 
```

希望我的语法正确.. ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:41:30.477

```
data: 'allVals=' + allVals, 
```

这是罪魁祸首，发送的是`allvals[object Object]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:48:02.050

如果你需要一个 php 数组，我建议你这样做：

`data: {allVals : allVals}`

`$_POST['allVals']`遗嘱包含一个数组。

否则，如果您只需要单个参数，则必须执行以下操作：

```
var stringToSend = sep = "";
$.each(allVals, function(key, value) { 
    stringToSend += sep+key+"="+value;
    sep = "&";          
});
$.ajax({
type: "POST",
 dataType: 'html',
 url: "test4.php",
 data: stringToSend,
 ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T07:51:25.127

[使用 jQuery $.POST](http://api.jquery.com/jQuery.post/)方法会更好：

```
var javascriptArray = new Array('a', 'b', 'c');

$.post('url_to_test4.php', {'allVals[]': javascriptArray }, function(data){
   // perform some action with the response data.
}); 
```

这将向 PHP 文件发送一个名为 的数组`allVals`，其中包含您的`javascriptArray`.

# jquery - 将具有特定类的所有 div 移动到容器

> ID：10893363
> 
> 赞同：0
> 
> 时间：2012-06-05T07:34:02.943
> 
> 标签：jquery, html, dynamic

如何让 jquery 将所有具有特定类的 div 放入容器中？我想要一个可以动态移动 div 的函数。这样当 div 获取新类时，它会自动移动到此容器中。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:38:14.947

要移动它们：

```
$("#yourContainer").append( $("div.yourClass") ); 
```

或者，为了避免接触已经在容器中的那些：

```
$("#yourContainer").append($("div.yourClass").not("#yourContainer div.yourClass")); 
```

对于 DOM 中已经存在的元素，该`.append()`方法将它们移动到您指定的新父级。

我不知道由班级更改触发的事件，所以我不确定要让它自动发生，我有什么建议。

# google-apps-script - 尝试在以前运行良好的脚本中使用 UiApp.add() 方法时发生意外错误

> ID：10893365
> 
> 赞同：0
> 
> 时间：2012-06-05T07:34:11.530
> 
> 标签：google-apps-script

尝试在以前运行良好的脚本中使用 UiApp.add() 方法时发生意外错误。今天出现了问题。

我一直在努力解决一些问题，但没有运气。

有人有同样的问题吗？是否对方法进行了任何更改，尤其是关于命名限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:58:15.373

This is a [known issue](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1384) that cropped up, and is now fixed. When you discover a bug it's best to post it to the [issue tracker](http://code.google.com/p/google-apps-script-issues/issues/) rather than here on Stack Overflow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T06:53:23.633

我从未`add()`在`UiApp`. 我不知道以前在你的情况下它是如何工作的？正如文档所说，这个类只有三个方法，没有`add()`方法

```
createApplication
getActiveApplication
getUserAgent 
```

参考：[https ://developers.google.com/apps-script/class_uiapp](https://developers.google.com/apps-script/class_uiapp)

您可以将 add 方法与应用程序实例一起使用。例如

```
function doGet() {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var toggleButton = app.createToggleButton();
  toggleButton.setText('Click Me');
  panel.add(toggleButton); //Add a UI Widget
  app.add(panel); // Add a UI Widget
  return app;
} 
```

# windows-phone-7 - UI线程和Render线程有什么区别？

> ID：10893369
> 
> 赞同：0
> 
> 时间：2012-06-05T07:34:33.487
> 
> 标签：windows-phone-7

而且，如果我打电话

```
this.Dispatcher.BeginInvoke(() =>
            {
                //Do work 
            }); 
```

或者

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                //Do work 
            }); 
```

**哪个线程可以工作？**

和

**Deployment.Current.Dispatcher 和 this.Dispatcher 一样吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:04:57.767

> UI线程和Render线程有什么区别？

UI 线程在 CPU 上计算

在 GPU 上渲染线程

> 哪个线程可以工作？

用户界面

> Deployment.Current.Dispatcher 和 this.Dispatcher 一样吗？

是的

# android - 如何测试robotium测试项目apk文件

> ID：10893370
> 
> 赞同：0
> 
> 时间：2012-06-05T07:34:35.550
> 
> 标签：android, robotium

我正在使用robotium 创建一个测试项目。假设我的应用程序名称是 MyApp 并且测试项目名称是 MyAppTest。我将 MyApp.apk 和 MyAppTest.apk 都提供给 QA 测试人员（不提供应用程序和测试项目的源代码）。据我所知，测试人员可以在命令提示符的帮助下使用这两个 apk 运行测试用例。但是我需要知道是否有任何其他工具或类似的工具可以仅使用这两个 apk 运行测试用例。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:31:47.253

如果您使用带有 apk 且没有源代码的 Robotium，则该 apk 必须未签名并使用将要对其进行测试的用户的密钥库进行签名。Robotium wiki 上的此链接解释了有关在没有源的情况下测试 apk：[http ://code.google.com/p/robotium/wiki/RobotiumForAPKFiles](http://code.google.com/p/robotium/wiki/RobotiumForAPKFiles)

re-sign.jar 提供了一种简单的拖放方式来取消签名 apk：[http ://www.troido.de/en/downloadslsmallgsoftware-a-driverslsmallg](http://www.troido.de/en/downloadslsmallgsoftware-a-driverslsmallg)

要签署未签名的 apk，请参阅此博文：http: [//dimitar.me/how-to-sign-an-unsigned-android-package-apk-file/](http://dimitar.me/how-to-sign-an-unsigned-android-package-apk-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:31:25.547

我认为这对你有帮助

1.  在模拟器中安装 MyApp & MyAppTest apk
2.  Goto,Dev Tools -> Instrumentation -> (选择你的包名) 测试项目将开始运行。

如果你想在设备安装开发者工具 APK 中做同样的事情。（我还没有尝试过..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T06:44:14.840

详细说明在这里：

[https://robotium.googlecode.com/files/AndroidCalculatorAPKTest.pdf](https://robotium.googlecode.com/files/AndroidCalculatorAPKTest.pdf)

# python - Python：与 urljoin 混淆

> ID：10893374
> 
> 赞同：99
> 
> 时间：2012-06-05T07:34:50.323
> 
> 标签：python, python-3.x

我正在尝试从不同的部分形成 URL，并且无法理解此方法的行为。例如：

**Python 3.x**

```
from urllib.parse import urljoin

>>> urljoin('some', 'thing')
'thing'
>>> urljoin('http://some', 'thing')
'http://some/thing'
>>> urljoin('http://some/more', 'thing')
'http://some/thing'
>>> urljoin('http://some/more/', 'thing') # just a tad / after 'more'
'http://some/more/thing'
urljoin('http://some/more/', '/thing')
'http://some/thing' 
```

你能解释一下这种方法的确切行为吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-06-05T07:39:46.220

（对我来说）考虑这一点的最佳方式是第一个参数，`base`就像您在浏览器中所在的页面一样。第二个参数`url`是该页面上锚点的 href。结果是您单击后将被定向到的最终 URL。

```
>>> urljoin('some', 'thing')
'thing' 
```

鉴于我的描述，这是有道理的。虽然有人希望 base 包括一个方案和域。

```
>>> urljoin('http://some', 'thing')
'http://some/thing' 
```

如果你在一个虚拟主机上，并且有一个像这样的锚点，`<a href='thing'>Foo</a>`那么链接将带你到`http://some/thing`

```
>>> urljoin('http://some/more', 'thing')
'http://some/thing' 
```

我们在`some/more`这里，所以一个相对链接`thing`将带我们到`/some/thing`

```
>>> urljoin('http://some/more/', 'thing') # just a tad / after 'more'
'http://some/more/thing' 
```

在这里，我们不在`some/more`，我们在`some/more/`不同的地方。现在，我们的相对链接将带我们到`some/more/thing`

```
>>> urljoin('http://some/more/', '/thing')
'http://some/thing' 
```

最后。如果打开`some/more/`并且 href 是 to `/thing`，您将被链接到`some/thing`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-27T09:53:55.527

> urllib.parse.urljoin(base, **url** )
> 
> 如果 url 是绝对 URL（即，以 //、http://、https://、...开头），则 url 的主机名和/或方案将出现在结果中。例如：

```
>>> urljoin('https://www.google.com', '//www.microsoft.com')
'https://www.microsoft.com'
>>> 
```

否则，urllib.parse。**urljoin** (base, url) 将

> 通过将“基本 URL”（base）与另一个 URL（url）组合来构造一个完整（“绝对”）的 URL。非正式地，这使用基本 URL 的组件，特别是寻址方案、网络位置和（部分）路径，以提供相对 URL 中缺少的组件。

```
>>> urlparse('http://a/b/c/d/e')
ParseResult(scheme='http', netloc='a', path='/b/c/d/e', params='', query='', fragment='')
>>> urljoin('http://a/b/c/d/e', 'f')
>>>'http://a/b/c/d/f'
>>> urlparse('http://a/b/c/d/e/')
ParseResult(scheme='http', netloc='a', path='/b/c/d/e/', params='', query='', fragment='')
>>> urljoin('http://a/b/c/d/e/', 'f')
'http://a/b/c/d/e/f'
>>> 
```

它获取第一个参数（base）的路径，剥离最后一个 / 之后的部分并与第二个参数（url）连接。

如果url以/开头，则用url加入base的scheme和netloc

```
>>>urljoin('http://a/b/c/d/e', '/f')
'http://a/f' 
```

# c# - 在 IIS c# 中启动一个新的工作进程

> ID：10893375
> 
> 赞同：4
> 
> 时间：2012-06-05T07:34:55.527
> 
> 标签：c#, asp.net, iis, process, application-pool

我对我开始的过程有疑问。

我用`Process.Start()`方法开始这个过程。该进程是没有 GUI 的 Windows 窗体应用程序。我从在 IIS 上自己的应用程序池（作为 LocalSystem 运行）上运行的 Web 应用程序启动该过程。

该过程开始时没有问题，但过了一段时间我可以在日志中看到**该过程停止执行它的工作**（不发生日志记录）。如果我停止启动进程的应用程序池并再次启动池（不执行其他操作），则进程从停止的位置开始。我可以从它停止的日志中看到这一点。

我对父级（网络应用程序）没有任何依赖关系。我不会在子进程中等待任何东西。它只对另一台服务器进行大量 API 调用。当它作为线程运行时，代码实际上完美无缺。我更改为子进程，因为我希望它运行 LONG 作业。如果我使用工作进程，IIS 只会让我关闭。

那么现在有人知道是什么导致了这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:20:10.310

欢迎 IIS 随时回收应用程序池。这就是停止你的进程的原因。

您应该将您的进程移动到它自己的作为 Windows 服务运行的应用程序中。

# android - Android SDK 中的布局

> ID：10893376
> 
> 赞同：0
> 
> 时间：2012-06-05T07:34:56.347
> 
> 标签：android, xml, layout

有没有办法在没有 R 类的情况下加载 XML 布局？如果可能的话从字符串中加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:50:29.937

是的，例如，如果您想从 Web 加载 xml 并将其膨胀到 ViewGroup。

利用`(LayoutInflater) mInflater = LayoutInflater.from(context);`

并从 xml 膨胀：

```
mInflater.inflate(XmlPullParser parser, ViewGroup root) 
```

您将能够通过执行 webrequest 并使用 DocumentBuilder 从 Web 加载 xml

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db;
try {
 db = dbf.newDocumentBuilder();
 Document doc =  db.parse([INPUT_STREAM]);
 .... 
```

# observablecollection - Observable 集合 Raise 属性已更改

> ID：10893380
> 
> 赞同：3
> 
> 时间：2012-06-05T07:35:17.800
> 
> 标签：observablecollection, inotifypropertychanged

```
private ObservableCollection<Scores> _scores; 
    public ObservableCollection<Scores> Scores
    {
        get
        {
            return _scores;
        }
        set
        {
            _scores = value;
            RaisePropertyChanged("Scores");
            Recalculate();
        } 
    }

    public int RowNumber { get; set; }
    public string StudentId { get; set; }
    public string StudentName { get; set; }

    private double _studentAverage;
    public double StudentAverage
    {
        get
        {
            return _studentAverage;
        }
        set
        {
            _studentAverage = value;
            RaisePropertyChanged("StudentAverage");
        }
    }

    private string _gradeYear;
    public string GradeYear
    {
        get
        {
            return _gradeYear;
        }
        set
        {
            _gradeYear = value;
            RaisePropertyChanged("StudentGrade");
        }
    }

    private void Recalculate()
    {
        StudentAverage = (from score in Scores select score.Score).Sum();
    } 
```

嗨，当 ObservableCollection 中的分数发生变化时，我怎样才能得到通知，以便我可以重新计算。

实际上，我将整个实体绑定到 Gridview。每当列中的分数发生变化时，我希望我的总计列自动计算总计并显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:26:05.050

**注1**

简而言之-您应该订阅所有“分数”的 INotifyPropertyChanged.PropertyChanged 事件，并且在事件处理程序中您应该重新计算您的 TotalScore。但问题是您还应该监控您的分数集合中的变化（当然，如果您需要它）。

作为一个非常有用的助手，您可以尝试使用我的[Extended ObservableCollection](http://george.softumus.com/?p=54)。这个类已经包含 ItemPropertyChangedEvent，所以你应该只写如下内容：

```
private ObservableCollectionEx<Scores> _scores; 

public ObservableCollectionEx<Scores> Scores
{
    get
    {
        return _scores;
    }
    set
    {
        if (_scores == value) return;
        if (_scores != null)
            _scores.ItemPropertyChanged -= OnItemPropertyChanged;
        _scores = value;
        if (_scores != null)
            _scores.ItemPropertyChanged += OnItemPropertyChanged;
        RaisePropertyChanged("Scores");
        Recalculate();
    } 
}

void OnItemPropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Score")
        Recalculate();
} 
```

**笔记2**

看看[这篇文章](http://george.softumus.com/?p=32)。它将教如何避免通知中的“魔术字符串”（如`RaisePropertyChanged("Scores")`和`e.PropertyName == "Score"`）。

**注3**

代替

```
StudentAverage = (from score in Scores select score.Score).Sum(); 
```

最好使用

```
StudentAverage = Scores.Sum(score => score.Score); 
```

但这不一定，这只是我的编码风格:)

顺便说一句，为什么它是混合的 - “平均”和“总和”？这是错误吗？

# c# - 在 C# 中显示大图像

> ID：10893388
> 
> 赞同：1
> 
> 时间：2012-06-05T07:36:00.047
> 
> 标签：c#, printing, resize

我想使用 C# 将大图像显示为一个小矩形。问题是当我不调整矩形大小和图像时，每次只显示一半的图像。有没有办法在定义的范围内完全打印图像？我的意思是图像可以将自身重新调整为矩形大小吗？

以下是我的代码：

```
int imagePrintHeight = this.PaperSize.Width - this.PrintMargins.Top - this.PrintMargins.Bottom;
 int imagePrintWidth = this.PaperSize.Height - this.PrintMargins.Left - this.PrintMargins.Right;

Size DatestoPrintSize = TextRenderer.MeasureText(DatestoPrint, new Font(this.Font.FontFamily, 10));

                            y = y + descriptionSize.Height + DatestoPrintSize.Height;
                            imagePrintHeight = imagePrintHeight - descriptionSize.Height - DatestoPrintSize.Height;

                            e.Graphics.DrawString(objCurrentPrintJob.sDescription, new Font(this.Font.FontFamily, 10), new SolidBrush(Color.Black), x + (imagePrintWidth - descriptionSize.Width) / 2, this.PrintMargins.Top);
                            e.Graphics.DrawString(DatestoPrint, new Font(this.Font.FontFamily, 10), new SolidBrush(Color.Black), x + (imagePrintWidth - DatestoPrintSize.Width) / 2, this.PrintMargins.Top + descriptionSize.Height);
                        }

                        decimal ratio = Math.Round(decimal.Divide(imagetoPrint.Width, imagetoPrint.Height), 4);
                        int tempimagePrintWidth = (int)(Math.Round(imagePrintHeight * ratio, 4));
                        x += (int)((imagePrintWidth - tempimagePrintWidth) / 2); 
```

要打印我使用以下

```
 e.Graphics.DrawImage(imagetoPrint, new Rectangle(x,y ,tempimagePrintWidth,imagePrintHeight)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:10:32.730

如果我理解正确，您似乎正在尝试使图像适合可用的页面大小。看起来你在分配 imagePrintHeight 和 imagePrintWidth 时混淆了宽度和高度。我会像这样进行缩放，它还允许图像和页面纵横比之间的不同关系：

```
int imagePrintHeight = this.PaperSize.Height- this.PrintMargins.Top - this.PrintMargins.Bottom;
int imagePrintWidth = this.PaperSize.Width- this.PrintMargins.Left - this.PrintMargins.Right;

// Draw description string here...

double ratio = Math.Min((double)imagePrintWidth / (double)imagetoPrint.Width, (double)imagePrintHeight / (double)imagetoPrint.Height);
int scaledImageWidth = (int)(ratio * imageWidth);
int scaledImageHeight = (int)(ratio * imageHeight);

x = (int)((imagePrintWidth - scaledImageWidth ) / 2); 
```

# php - Joomla 1.5 和 VirtueMart 1 的验证码

> ID：10893397
> 
> 赞同：1
> 
> 时间：2012-06-05T07:36:34.877
> 
> 标签：php, javascript, joomla, captcha, virtuemart

我有一个在安装了旧 Virtuemart 的 Joomla 1.5 上运行的网站。是否有可用于 VirtueMart 产品查询表的验证码扩展。我已经尝试并查看了整个网络和 Joomla 扩展，但找不到适用于 Joomla 和 Virtuemart 旧版本的扩展。

不幸的是，我无法将 VM 或 Joomla 升级到网站上的新软件包。

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:03:11.533

很棒的教程，如果你遇到问题，不要介意问:)

[http://forum.virtuemart.net/index.php?topic=66513.0](http://forum.virtuemart.net/index.php?topic=66513.0)

# svn - 如何将源代码从一个 svn 服务器传输到另一个？

> ID：10893401
> 
> 赞同：1
> 
> 时间：2012-06-05T07:37:05.267
> 
> 标签：svn, tortoisesvn

*   我们有一个旧的 SVN 服务器，其中包含 Solutions Plus 网站阶段 2_A1821 源代码我们需要将此源代码移动到新的 SVN 服务器吗？这可能吗？如果是，请告诉我要遵循的步骤。

问候祖海布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:40:57.827

我建议使用 svndump：

```
svnadmin dump repositorypath | gzip > backupname.svn.gz 
```

这将为您提供存储库的 gzip 备份。然后，您可以将其复制到新的 svn 服务器并取消归档。

您也可以尝试 hotcopy 或 svnsync（尽管这对您的 puporse 来说似乎有点过分了）。Hotcopy 将保留一些 svndump 可能会丢失的控制文件。它也可以在 svn 服务器启动时运行。

```
svnadmin hotcopy repositorypath /path/to/backup 
```

然后，您可以 gzip 备份并传输它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:47:30.660

如果您的新服务器运行 Windows，您可以使用[VisualSVNServer](http://www.visualsvn.com/server/)（免费），它能够简单地导入您现有的存储库。

# css - 带有固定页眉/页脚的移动页面上的内容滚动

> ID：10893404
> 
> 赞同：3
> 
> 时间：2012-06-05T07:37:19.293
> 
> 标签：css, mobile, css-position

您好，我正在构建一个移动网页，其中我的内容只会滚动，而我的页脚和页眉是位置：固定 - 我可以制作内容，使其不会在页眉或页脚下滚动，以便它只滚动它自己分区。

我想这样做的原因是我的页眉和页脚会有一些不透明度，如果内容滚动到下面，它看起来不太好。

这是我制作的一个jsfiddle，只是为了向您展示滚动的示例

[http://jsfiddle.net/VNVqs/](http://jsfiddle.net/VNVqs/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T07:41:43.293

给你：

> **[http://jsfiddle.net/VNVqs/3/](http://jsfiddle.net/VNVqs/3/)**

我刚刚删除了`position: absolute`滚动部分（*包装器*和*滚动内容*），并`padding`在包装​​器中添加了一些，以便让第一个和最后一个项目不在页眉和页脚下。

基本上，这个技巧是通过`position: fixed` **只使用 header 和 footer**来完成的，让**页面的其余部分像普通页面一样滚动**，而不使用`overflow: auto`特定的固定高度元素。这样做，唯一的问题是内容的第一行将始终位于固定位置的标题下（最后一行位于页脚下），但您可以通过在内容包装器上应用一些填充来解决此问题，最多页眉（和页脚）高度。你说对了？

# c# - 将 OnClick 事件添加到 ASP.NET 控件

> ID：10893409
> 
> 赞同：2
> 
> 时间：2012-06-05T07:37:48.660
> 
> 标签：c#, asp.net, onclick, controls

我想`OnClick`为我的`panel`. 到目前为止，大多数谷歌结果看起来或多或少是这样的：[将 onclick 事件添加到 aspnet label](http://www.devcurry.com/2009/04/adding-onclick-event-to-aspnet-label.html)。有没有办法从 javascript 或面板属性调用代码隐藏函数？因为我想将用户重定向到一个新页面，然后在 ViewSTate 或 Sessionstate 中保存一些信息。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:57:31.073

在您的 java 脚本方法中引发对 a 的`__dopostback`调用`Server side method`。

```
<script type="text/javascript">
     function YourFunction()
     {
         __doPostBack('btnTemp', '')
     }
</script> 
```

其中**btnTemp**是一个服务器端**按钮**，所以在服务器端编写这个按钮的 onClick 事件，你可以在其中进行处理，然后重定向到其他页面。

您可以在[DoPostBack Understanding对 dopostback 有一个很好的了解](http://aspalliance.com/895_Understanding_the_JavaScript___doPostBack_Function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:49:41.707

我的 aspx 页面是这样的：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <script type="text/javascript">
        function CallMe() { __doPostBack('btnTemp', '') }
    </script>
</head>
<body>
    <form id="form1" runat="server">
         <asp:Button ID="btnTemp" runat="server" Text="Test" onclick="btnTemp_Click" />
         <div> <asp:Label ID="Label1" runat="server" Text="Label1"></asp:Label>
         <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label></div>
    </form>
</body> 
```

我的服务器端代码如下：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Attributes.Add("onClick", "CallMe();");
    }
protected void btnTemp_Click(object sender, EventArgs e)
    {

    } 
```

这就是我编写的代码，我没有在上面的代码中包含 using 语句、Page 指令等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:42:46.953

ASP.NET 按钮上有一个 PostBackUrl 属性，您可以正常呈现按钮，然后回发到不同的页面 - 这是您的 OnClick 方法需要声明的地方。

我强烈建议不要发回同一页面然后执行 Response.Redirect()，考虑流量。浏览器请求页面，发回然后发送一个 HttpRedirect，然后导航到新页面。使用我上面概述的方法，这不是必需的，并且浏览器必须减少一个请求（这意味着不必发送消息或在服务器上重建页面），并且具有显着的性能优势。

# c# - 如何禁用 GridView 行的单元格？

> ID：10893412
> 
> 赞同：1
> 
> 时间：2012-06-05T07:38:02.960
> 
> 标签：c#, asp.net, asp.net-4.0

我有一个`GridView`控件，其前两列有按钮。创建行时，我想检查第六列文本是否“锁定”。如果是，那么第一个单元格中的按钮不应该是可见的。

的前两列`GridView`如下所示：

![在此处输入图像描述](../Images/359e9f76f20fc3f61530254ad713105b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:13:40.660

创建一个 CSS 类

```
.invisible
{ 
   display:none;
}

protected void GridView1_DataBound(object sender, GridViewRowEventArgs e)
 {
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (e.Row.Cells[5].Text=="Locked")
        {
              e.Row.Cells[0].CssClass = "invisible"
        }
     }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:00:12.603

您需要执行以下操作来阻止单元格中的按钮控件...

```
protected void GridView1_DataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (e.Row.Cells[5].Text=="Locked")
            {
                (e.Row.FindControl("idofButton1") as Button).Visible=false;
            }
        }
    } 
```

# eclipse - Eclipse 项目资源管理器无法切换 到工作集上的视图

> ID：10893419
> 
> 赞同：4
> 
> 时间：2012-06-05T07:38:52.207
> 
> 标签：eclipse

选择“项目资源管理器 -> 视图菜单 -> 顶级元素 -> 工作集”后，Eclipse 不会将视图从 切换`projects`到`working sets`on `project explorer`。如果`package explorer`改为使用，则转换工作正常。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T10:20:17.507

您可能还没有选择任何工作集。在项目浏览器视图的下拉菜单中，您有一个名为 的菜单项`select working set...`。去那里选择你想看的工作集。

![项目浏览器菜单截图](../Images/425af95bb78405c77f2dde53cae8e376.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T10:02:06.717

在我的情况下，我不想创建任何工作集。所以我更改了`Top Level Elements`选项（@Fredrik 答案中图像下拉菜单中的第一项）。只需将其从 更改`Working Sets`为`Projects`。

# sql - 一列分区上的 Sql Null 值

> ID：10893423
> 
> 赞同：0
> 
> 时间：2012-06-05T07:39:11.407
> 
> 标签：sql, sql-server-2005

我只是在这个 Sql Transact 后面浪费了两到三个小时，并且对 Null Value Skip 感到困惑。

我有两个如下表：

```
Table 1: AccountMast
companyID   accname         category
102     PURCHASE  ACCOUNT   Purchase Account
102     SALES ACCOUNT       Sales Account

Table2: Legder

companyID   name            
102     PURCHASE ACCOUNT        
102     SALES ACCOUNT 
```

我加入它如下：

```
select
case
when a.catagory='Purchase Account' then
l.name 
end as PurchaseAccount,
case
when a.catagory = 'Sales Account' then
l.name   
end as SalesAccount
from ledger l join accountmast a
on l.companyID=a.companyID
and l.name = a.accname
where l.companyID=102
and a.catagory='Purchase Account' or a.catagory='Sales Account'
group by l.name,a.catagory 
```

结果是：

```
PurchaseAccount     SaleAccount
PURCHASE ACCOUNT    NULL
NULL                SALES ACCOUNT 
```

但我想要这样的结果：

```
PurchaseAccount     SaleAccount
PURCHASE ACCOUNT    SALES ACCOUNT 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:44:47.643

删除您的`GROUP BY`条款：

```
select
    max(case when a.catagory = 'Purchase Account' then l.name end) as PurchaseAccount,
    max(case when a.catagory = 'Sales Account' then l.name end) as SalesAccount
from ledger l
join accountmast a
on l.companyID = a.companyID and l.name = a.accname
where l.companyID=102 and a.catagory IN ('Purchase Account', 'Sales Account') 
```

# mfc - MFC 中的单选按钮选择更改

> ID：10893425
> 
> 赞同：2
> 
> 时间：2012-06-05T07:39:31.100
> 
> 标签：mfc

使用 MFC，我创建了一个对话框，其中包含 5 个单选按钮。我想在选择其他单选按钮时收到通知。

现在，只要单击任何单选按钮，我都会收到通知。但是只有当单选按钮发生变化时，我才需要收到这些通知。

```
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T10:48:53.813

如果我正确理解您的问题，您想知道某个特定单选按钮 ( `IDC_RADIO1`) 的选中状态何时发生变化。

然后将此状态作为成员变量存储在您的对话框类中。 `int m_radio1Checked;`根据需要在构造函数中初始化为 0 或 1，并`SetCheckRadioButton()`在`OnInitDialog()`.

然后处理消息映射中每个单选按钮的单击：

```
ON_BN_CLICKED(IDC_RADIO1, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO2, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO3, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO4, &CMyDlg::OnRadioButtonClicked)
ON_BN_CLICKED(IDC_RADIO5, &CMyDlg::OnRadioButtonClicked) 
```

并在处理程序中检查更改。

```
void CMyDlg::OnRadioButtonClicked()
{
  int oldState = m_radio1Checked;
  int newState = GetDlgItem(IDC_RADIO1)->GetChecked();
  m_radio1Checked = newState;
  if (oldState != newState)
    // do something ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-17T09:27:40.857

可以使用 ON_CONTROL_RANGE(BN_CLICKED, firstctrlid, lastcntrlid, memberfx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T16:57:49.583

每个单选按钮都有一个单独的消息映射，但有一个私有方法，所有这些都调用以检查所选单选按钮是否已更改。

```
void CDlg::OnRadioBtn1Clicked()
{
    if (!RadioSelectionChanged())
    return;

    //Add other code here
}

//Returns true if the selected radio button has changed
Boolean CDlg::RadioSelectionChanged()
{
    int previousBtnSelected = m_selectedRadioButton;
    UpdateData();

    if (previousBtnSelected != m_selectedRadioButton)
        return true;

    else
        return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T23:09:32.380

首先创建所有单选按钮组。使用向导添加整数类型的成员变量。在通用处理程序中调用 UpdateData() 并检查变量的值。它应该设置为组中按钮的值（从零开始），从组中的第一个按钮为 0 开始。确保按钮以连续的 Z 顺序（tab 顺序）设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T10:47:03.283

我想最简单的方法是将当前按钮状态（bool）存储为对话框类的成员变量（每个按钮一个），然后在 OnRadioButtonClicked 中检查状态是否已更改。

如果您需要在多个地方执行此操作，您可以创建自己的 CButton 派生类来封装此功能。

# ruby - 如何在不公开 API 密钥的情况下发出 POST 请求？

> ID：10893428
> 
> 赞同：0
> 
> 时间：2012-06-05T07:39:54.710
> 
> 标签：ruby, ruby-on-rails-3, post, imageshack

使用[imageshack API](http://code.google.com/p/imageshackapi/)，我可以将图像上传到 imageshack，但我必须使用 API 密钥才能做到这一点。我可以为将图像上传到 imageshack 创建一个 POST 表单，但必须将密钥放入表单中，并且公开公开 API 密钥。如何在不暴露我的 API 密钥的情况下将图像上传到 imageshack？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:41:28.047

我认为正确执行此操作的唯一方法是图像首先由用户发布到您的 OWN 应用程序。

然后在您的应用程序中，您在内部将此 POST 重定向到 ImageShack，您可以在其中安全地使用您的 API 密钥，而无需任何人看到它。

您可以使用[RestClient](https://github.com/archiloque/rest-client)之类的简单工具从后端运行 POST 请求。您需要将图像临时存储在您的服务器上，无论是在内存中还是在磁盘上，以便重新传输到 ImageShack。

所以：

1.  用户将带有 POST 的图像发送到您的服务器
2.  您的服务器在用户的 POST 请求中接收到图像
3.  您的服务器使用您的 API 密钥运行带有此图像的 POST 到 ImageShack
4.  第 1 步的 POST 请求成功返回给用户

# postgresql - PostgreSQL 9.1 ODBC 的 32 位和 64 位版本混用了

> ID：10893433
> 
> 赞同：0
> 
> 时间：2012-06-05T07:40:21.450
> 
> 标签：postgresql, 64-bit, odbc, sas

我已经安装了 psqlODBC 9.1 的 32 位和 64 位版本。当我同时配置 32 位和 64 位系统 DSN 时，它们会错误地写入 ODBC.ini 文件：

> ```
> [ODBC 32 bit Data Sources]
> pg_crdb_latest=PostgreSQL Unicode (32 bit)
> pg_crdb_latest_32=PostgreSQL Unicode(x64) (32 bit)
> [pg_crdb_latest]
> Driver32=C:\Program Files (x86)\psqlODBC\0901\bin\psqlodbc35w.dll
> [pg_crdb_latest_32]
> Driver32=C:\Program Files\psqlODBC\0901\bin\psqlodbc35w.dll 
> ```

pg_crdb_latest DSN 是使用**64 位 ODBC 数据源管理****器**添加的。pg_crdb_latest_32 DSN 添加了**32 位****DSN**。

 ******仅供参考 - 我先安装了 32 位版本，然后安装了 64 位版本。

结果是我在尝试连接到 SAS 9.2 64bit 中的 PostgreSQL 9.1 64bit 时收到此错误：

> 错误：尝试建立连接的 CLI 错误：[Microsoft][ODBC Driver Manager] 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配

任何想法如何设置正确？我正在运行 Windows 7 Pro 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:11:38.553

这个链接说明了一切

[http://www.easysoft.com/developer/interfaces/odbc/64-bit.html#odbc-windows](http://www.easysoft.com/developer/interfaces/odbc/64-bit.html#odbc-windows)

所以有两件事：

1.  Windows 对 ODBC 的文件和目录命名约定非常差 - 因此造成混淆
2.  64 位 PostgreSQL ODBC 目前非常慢（比通过 OLEDB 的 SAS 到 SQL 64 位慢 10 倍） - 我将进一步调查******

# c# - 使用 Ajax 自动填充下拉列表

> ID：10893438
> 
> 赞同：2
> 
> 时间：2012-06-05T07:40:47.627
> 
> 标签：c#, asp.net, ajax

我有 2 个下拉列表已经绑定在 pageload 上，我想在触发 ajax 函数后重新绑定这两个下拉列表。这里我编写了一个 sql server 存储过程来获取下拉列表所需的数据。但是我将如何获得值到下拉列表，这样就可以使用ajax函数绑定新数据了。屏幕是用Asp.net C#编码开发的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:02:19.437

这是asp.net的下拉列表

```
<asp:DropDownList id="ddlCourse" runat="server" AutoPostBack="false" 
                                    Height="28px" title="Select Course" Width="290px" 
      ></asp:DropDownList> 
```

这是调用 Web 服务方法的 jquery 方法

```
function BindCourse() {
    $.ajax({
        type: "POST",
        url: "/WebService/CollegeWebService.asmx/GetCourseDetails",
        data: "{}",
        async: true,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnCoursePopulated,      
        error: function (xml, textStatus, errorThrown) {
            alert('error');
            alert(xml.status + "||" + xml.responseText);
        }
    });
} 
```

这是在ajax调用方法中使用的方法，调用PopulateControl方法绑定Drop down List

```
function OnCoursePopulated(response) {

    PopulateControl(response.d,   $('#<%=ddlCourse.ClientID %>'));

} 
```

这是 PopulateControl 方法的描述

```
function PopulateControl(list, control) {

    if (list.length > 0) {

        control.removeAttr("disabled");

        control.empty().append('<option selected="selected" value="0">Please select</option>');
        $.each(list, function () {

            control.append($("<option></option>").val(this['Value']).html(this['Text']));

        });
    }
    else {
        control.empty().append('<option selected="selected" value="0">Not available<option>');
    }
} 
```

因此，您最终绑定了下拉列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:20:43.703

您可以尝试以下作为演示。服务器端 DropDownLists 被替换为 HTML 选择元素，因此不会发生异常“无效的回发或回调参数”。此演示的缺点是回发后不会在表单上恢复值。您可以将其放在 Default.aspx 中的表单中：

```
<script type="text/javascript" 
 src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
    function populate(populateInitial) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: '/Default.aspx/populate',
            data: "{'populateInitial': '" + populateInitial + "'}",
            dataType: "json",
            async: false,
            success: function(result) {
                var ddlItems = document.getElementById('ddlItems');
                ddlItems.options.length = 0;
                $.each(result.d, function(key, item) 
                 { ddlItems.options[key] = new Option(item); });
            }
        });
    }
</script>

<form id="form1" runat="server">
<div>     
    <select id="ddlItems" name="ddlItems">
    </select>
    <br />
    <input type="button" onclick="populate('0');" value="Change values" />
    <br />
    Selected item: 
      <asp:Label ID="lblSelectedItem" runat="server" Text=""> </asp:Label>
    <br />
    <asp:Button ID="Button1" runat="server" 
     Text="Write out selected item text" />
</div>

<script type="text/javascript">
    populate('1');
</script> 
```

然后将这些方法放在 Default.aspx.cs 中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            lblSelectedItem.Text = Request["ddlItems"].ToString();
        }
    }

    [System.Web.Services.WebMethod()]
    [System.Web.Script.Services.ScriptMethod()]
    public static List<string> populate(string populateInitial)
    {
        if (populateInitial == "1")
            return (new string[] { "a", "b" }).ToList();
        else
            return (new string[] { "c", "d", "e", "f" }).ToList();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T07:46:55.847

您应该让 Ajax 调用某种页面（我建议您添加 Generic Hanlder）响应下拉值和文本字段值的 xml 或 json 甚至 html，而不是在 javascript jquery 中读取它并为您的下拉列表生成 html以下是

```
 <select id="ddl">
        <option value="value">text</option>
    </select> 
```

您应该阅读“值”和文本并生​​成此> `<option value="value">text</option>` 并附加到 ddl

# android - MediaPlayer.java ICS Android

> ID：10893442
> 
> 赞同：0
> 
> 时间：2012-06-05T07:41:11.833
> 
> 标签：android, media-player

在哪里可以找到 ICS 中 MediaPlayer 类的源代码。我有源代码……但我根本找不到 com.media 包……它与 2.2 或 2.3.4 中的不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:50:20.493

[这](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/media/MediaPlayer.java/)是 4.0.4_r1.2 版本的代码，您可以在页面顶部看到。从该文件中，您可以浏览所有发布的版本[`MediaPlayer.java`](http://developer.android.com/reference/android/media/MediaPlayer.html)

# java - 了解 java.util.Calendar WEEK_OF_YEAR

> ID：10893443
> 
> 赞同：10
> 
> 时间：2012-06-05T07:41:11.857
> 
> 标签：java, datetime, calendar

我试图了解如何`java.util.Calendar.get(java.util.Calendar.WEEK_OF_YEAR)`工作，但似乎我遗漏了一些要点。

```
String time = "1998-12-31"; // year month day
java.util.Calendar date = java.util.Calendar.getInstance();
date.setTime((new java.text.SimpleDateFormat("yyyy-MM-dd")).parse(time));
System.err.println("Week of year = " + date.get(java.util.Calendar.WEEK_OF_YEAR));
// Week of year = 1 Why ??? 
```

为什么`date.get(java.util.Calendar.WEEK_OF_YEAR)`在一年的最后一周返回 1？

此外，`WEEK_OF_YEAR`for`"1998-01-01"`是 1，for`"1998-12-23"`是 52。
有人对这种行为有解释吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T08:02:54.303

从[java.util.Calendar javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)：

> ### 第一周
> 
> Calendar 使用两个参数定义特定于语言环境的一周 7 天：一周的第一天和第一周的最少天数（从 1 到 7）。这些数字是在构造日历时从语言环境资源数据中获取的。它们也可以通过设置它们的值的方法明确指定。
> 
> 在设置或获取 WEEK_OF_MONTH 或 WEEK_OF_YEAR 字段时，Calendar 必须确定月份或年份的第一周作为参考点。一个月或一年的第一周定义为从 getFirstDayOfWeek() 开始并至少包含该月或该年的 getMinimalDaysInFirstWeek() 天的最早 7 天时间段。周数 ..., -1, 0 在第一周之前；第 2 周、第 3 周、... 跟随它。请注意，get() 返回的标准化编号可能不同。例如，一个特定的日历子类可以将一年中第 1 周的前一周指定为上一年的第 n 周。

所以它是特定于语言环境的。在您的情况下，如果该周包含新年的几天，则将其计为新年的第 1 周。

您可以使用[Calendar#setMinimalDaysInFirstWeek(int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#setMinimalDaysInFirstWeek%28int%29)更改此行为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-07T11:57:24.620

# linux - 我们可以将 32 位库文件转换为 64 位库文件吗？

> ID：10893447
> 
> 赞同：1
> 
> 时间：2012-06-05T07:41:30.950
> 
> 标签：linux, static-libraries, 32bit-64bit

我在 Solaris 中有一些 32 位库文件（.a 文件）。我正在将我的应用程序移植到 64 位 Linux 环境。有没有办法将 32 位库转换为 64 位，或者我应该以 64 位重新生成库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:10:04.517

这不仅仅是 32 位与 64 位的问题。这也是 Solaris 与 Linux 的问题。这是两个具有不同调用约定和不同 ABI 的操作系统。这意味着诸如数据类型的大小可以不同，编译器将内容放入寄存器和堆栈中以执行函数调用的方式不同，系统调用的完成方式也不同，等等。

在某些情况下，可能可以按照您想要的方式转换静态库，但您需要自己编写工具。从源代码编译更容易，更可靠，而且无论如何您都需要能够随意做一些事情（否则您无法轻松解决库中的问题，例如安全问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:43:35.060

不; 您必须将它们重新编译为 64 位，因为在编译过程中会丢失许多必要的信息。

祝你好运。

# jquery - BlockUI 未解锁

> ID：10893452
> 
> 赞同：1
> 
> 时间：2012-06-05T07:41:52.280
> 
> 标签：jquery, blockui

我已经盯着这个看了好几个小时，我不明白为什么这不起作用，我承认我的 JS 不是一流的，但对我来说这看起来对吗？

基本上，当我单击 blockui 时，它会很好，但它永远不会消失！下面的代码的删减版本...

```
$(document).ready(function() {
    $("#formdata").toggle();
    $(function() {
        $( "#datepick" ).datepicker();$("#datepick").datepicker({
            dateFormat: "yyyy-mm-dd" });
    });
    $(document).ajaxStart(function() {
        $.blockUI({message: '<h1>Retrieving data</h1>'})
    });
    $(document).ajaxStop(function() {
        $.unblockUI();
    });
});

    $(".button").click(function() {  
    var dataString = $("myform").serialize();

    $.ajax({  
        type: "POST",  
        url: "employerformdata.php",  
        data: dataString,  
        success: function(data) {
            $("submitresult").html(data);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:57:52.543

ajaxComplete 功能解锁 UI

参考[http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:56:04.453

我修改了一些代码并在 jsfiddle 中对其进行了测试。

```
 $(document).ready(function() {
        $("#formdata").toggle();
        $(function() {
            $("#datepick").datepicker();
            $("#datepick").datepicker({
                dateFormat: "yyyy-mm-dd"
            });
        });   

     $(document).ajaxStart(function() {
            $.blockUI({ css: { 
                border: 'none', 
                padding: '15px', 
                backgroundColor: '#000', 
                '-webkit-border-radius': '10px', 
                '-moz-border-radius': '10px', 
                opacity: .5, 
                color: '#fff' 
            },message: 'Posting data...'})
        });

    $(document).ajaxStop(function() {
        $.unblockUI();
    });
});
$(".button").click(function() {
    var dataString = $("myform").serialize();

    $.ajax({
        type: "POST",
        url: "employerformdata.php",
        data: dataString,
        success: function(data) {
            $("submitresult").html(data);
        }
    });

});​ 
```

一切正常，您可以在这里看到[http://jsfiddle.net/WmQFt/](http://jsfiddle.net/WmQFt/)。我怀疑 POST 操作有问题。尝试在开发人员工具中调试。

# mongodb - 如果我不检查错误代码，MongoDB 是否会静默失败？

> ID：10893454
> 
> 赞同：3
> 
> 时间：2012-06-05T07:41:55.863
> 
> 标签：mongodb

我想知道如果我不检查错误代码，是否会发现任何持久性失败？如果是这样，在检测错误的同时快速（异步）写入的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:33:56.013

如果你不检查错误，你的更新只是 fireAndForget。您确实会错过所有可能出现的错误。请参阅 MongoDB [WriteConcerns](http://api.mongodb.org/java/2.7.2/com/mongodb/WriteConcern.html)了解 MongoDB中可用的写入模式（抱歉，我总是找不到官方的、与驱动程序无关的文档，我真的应该收藏它）。
因此，使用 NORMAL 您至少会遇到连接错误，而 NONE 则完全没有例外。如果您想了解异常情况，则必须使用其他模式之一，它们的不同之处仅在于它们为您提供的持久性保证。
异步运行时无法检测到错误，因为这违背了本意。您发送写操作的连接可能已经关闭或重复使用，因此您无法通过该连接发送它。此外，只有您的实际代码知道如果失败该怎么办。由于 mongoDB 不提供一些远程过程调用来异步通知您更新，您必须等到写入完成到给定阶段。
所以最快但最不可靠的是 SAFE，写入只发生在内存中。JOURNAL 为您提供至少已写入磁盘的安全性。使用 FSYNC，您可以将这些更改保留在磁盘上的数据库中。REPLICA 至少有两个副本已写入它，并且大多数副本已写入它的一半以上（三个副本应该是默认值，这没有区别）。

我看到有类似异步的唯一机会是有一个单独的线程来同步执行所有写操作。这个线程你可以处理实际的更新以及一个类，如果无法执行处理此故障所需的操作，则调用该类。但我不认为这是好的应用程序设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:57:04.093

是的，根据错误，如果您不检查返回的错误代码，它可能会静默失败。有必要等待错误检查。您唯一的其他选择是让您的应用程序偶尔告诉用户“哎呀，还记得我刚才表现得好像我保存了您的数据吗？嗯，不是真的。”

# java - 从 keycode 中获取 keytyped

> ID：10893455
> 
> 赞同：1
> 
> 时间：2012-06-05T07:42:01.810
> 
> 标签：java, keyevent, keycode

我必须将十六进制的密钥代码发送到一个函数，该函数的工作是告诉哪个密钥的代码是那个。例如，Java`CONTROL`中十六进制形式的密钥的密钥代码是`0x11`. 有没有办法直接输入密钥？否则我必须使用 switch 语句。但我不想考虑它。我认为这不是一个聪明的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:34:57.907

使用[`java.awt.event.KeyEvent.getKeyText(int keyCode)`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html#getKeyText%28int%29). 根据Javadoc：它

> 返回描述 keyCode 的字符串，例如“HOME”、“F1”或“A”。

# php - 移动网站中的贝宝结帐

> ID：10893457
> 
> 赞同：0
> 
> 时间：2012-06-05T07:42:14.927
> 
> 标签：php, html, paypal, mobile-website, payment-gateway

我正在开发一个通过贝宝销售产品的移动网站。当我单击贝宝按钮时，它会以桌面模式重定向到贝宝网站。我想把它改成手机模式...

我使用以下代码

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" name="paypal">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="business" value="merchant@website.com">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="product1">
<input type="hidden" name="amount" value="1.00">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="return" value="www.website.com/mobile/paypalreturn.php"/>
<input type="hidden" name="cancel_return" value="www.website.com/mobile/" />
<input type="hidden" name="currency_code" value="USD" />
<input type="hidden" name="shopping_url" value="www.website.com/mobile/index.php"> 
<input type="hidden" name="notify_url" value="www.website.com/mobile/paypalnotify.php">
<script>document.paypal.submit();</script>
</form> 
```

这里显示桌面版。我想更改为移动版本.. 我用 Android 和 Iphone 设备检查了这个。在移动设备中也显示桌面版本。我用谷歌搜索，一些网站说它会根据设备自动更改，但对我不起作用..

请对此提出建议以纠正

提前致谢....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-05T11:26:24.473

不知道 command 有什么替代方法`_xclick`，但是使用 Express Checkout 您可以使用而不是

```
<input type="hidden" name="cmd" value="_express-checkout" /> 
```

这个

```
<input type="hidden" name="cmd" value="_express-checkout-mobile" /> 
```

所以 URL 看起来像`https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout-mobile&token=...`. 在此处查看有关 Express Checkout Mobile 的更多信息：[https](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPECOnMobileDevices) ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPEConMobileDevices 。

尝试为您的`xclick`cmd 参数找到类似的解决方案。

# android - 奇怪的陀螺。如何解决？

> ID：10893460
> 
> 赞同：0
> 
> 时间：2012-06-05T07:42:30.043
> 
> 标签：android

这是我填充 Spinner 的代码。它看起来奇怪而丑陋。

```
 @Override
    protected void onPostExecute(final List<String> result) {
        System.out.println("Result: " + result);
        final SpinnerAdapter adapter = new ArrayAdapter<String>(SearchTopActivity.this, android.R.layout.simple_spinner_dropdown_item, new String[]{"test1", "test2"});
        countrySpinner.setAdapter(adapter);
    }

<Spinner
    android:id="@+id/countrySpinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

![在此处输入图像描述](../Images/f0029f1cdf423423be6d97759cecba28.png)

**如何像这样修复它**

![在此处输入图像描述](../Images/b6d772e313ee216e6372b51b3ece94cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:47:04.217

我认为这是因为您使用的布局文件。尝试使用：

```
android.R.layout.simple_spinner_item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:48:03.613

`(SearchTopActivity.this, android.R.layout.simple_spinner_dropdown_item, new String[]{"test1", "test2"})` 改变这个

```
android.R.layout.simple_spinner_dropdown_item to android.R.layout.simple_spinner_item 
```

参考 [http://developer.android.com/resources/tutorials/views/hello-spinner.html](http://developer.android.com/resources/tutorials/views/hello-spinner.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:52:07.710

**试试这个**

```
@Override
    protected void onPostExecute(final List<String> result) {
        System.out.println("Result: " + result);
    final String[] test = new String[] { "test1", "test2" };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, test);
    countrySpinner.setAdapter(adapter);
}
and xml as::

<Spinner
    android:id="@+id/countrySpinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:47:06.353

我有同样的问题，我只是通过扩展 BaseAdapter 并实现 SpinnerAdapter 来编写自己的适配器。我还写了我的一项布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/tvParticipantSpinnerName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

并且微调器表现正常。

# java - 包括 & 在我的组合框中

> ID：10893461
> 
> 赞同：1
> 
> 时间：2012-06-05T07:42:42.903
> 
> 标签：java, xml, gwt, uibinder

我使用 gwt UIBinder 在我的 ComboBox 中添加了一些项目。

```
<g:item>--select one--</g:item>
<g:item>Dispute Referral Form</g:item>
<g:item>Dispute Settlement Clause</g:item>
<g:item>Procedures &amp; Rules</g:item>
<g:item>Standard Terms &amp; Conditions</g:item>
<g:item>Taxation Rules</g:item> 
```

但是，如果我刷新浏览器（谷歌浏览器），程序`&amp;`规则会显示在组合框中，与程序**和**规则相对应

我怎样才能让浏览器只显示'&'而不是`&amp;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:01:03.460

这不是一个解决方案 - 而是一种解决方法。

在 java const 字符串数组中定义并将它们添加到构造函数中的列表框中，`initWidget(uiBinder.createAndBindUi(this));` 然后等待 [Thomas Broyer提到的 GWT 2.5](https://stackoverflow.com/users/116472/thomas-broyer)

顺便说一句，这将允许您分别定义 Id 和值。对于它的价值:-)

# visual-studio - 为什么 nuget Bootstrapper 使用这么多链接类

> ID：10893462
> 
> 赞同：2
> 
> 时间：2012-06-05T07:42:49.893
> 
> 标签：visual-studio, architecture, nuget

我最近刚刚遇到了 Visual Studio 选项来引用文件作为链接。我想我了解了基本概念，并且自己也使用过一次。但是，当我意识到 nuget 如何在引导程序中利用此功能时，我发现自己想知道与正确分层和引用另一个程序集相比有什么好处？

谁能指出使用链接类来对抗分层+在这里引用另一个程序集的好处？

![使用链接类的 Nuget 引导程序](../Images/91763e48895064a79250f96488c8eb5b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:53:50.053

减少依赖。NuGet 引导程序的目的是使用最少的逻辑来引导 nuget.exe，而不必复制大量代码（这就是共享某些文件的原因）。在这种特殊情况下，我们不希望有不必要的额外程序集，nuget 引导程序是单个 exe。

# javascript - 带有多选的 jQuery 过滤表

> ID：10893464
> 
> 赞同：0
> 
> 时间：2012-06-05T07:43:02.920
> 
> 标签：javascript, jquery, filter

我正在尝试使用一些过滤器过滤表格。有些是简单的选择，有些是倍数。对于简单的，没关系，但不是倍数。

我想遵循这个逻辑：

1.  通过包含过滤器 ( `filtre_transports`)的数组
2.  传递包含值的数组 ( `ligne_transports`)
3.  *如果1.*的元素不在*2.*中，则不显示行 ( `transports_matches = false`)

我做了这个代码：

```
// Pass through each line of the table
jQuery('#agents_liste tbody tr').not('.vide').each(function() {
    var transports_matches = true;

    // ligne_transports is an array contains values to compare with the filter
    var ligne_transports = jQuery(this).children('td').eq(2).text().split('###');

    // filtre_transports is an array contains the selected val of a multi select
    jQuery(filtre_transports).each(function() {
        var filtre = jQuery(this);
        var filtreOk = false;

        jQuery(ligne_transports).each(function() {
            if (filtre == jQuery(this)) {
                filtreOk = true;
                return false;
            }
        });

        if (!filtreOk) {
            transports_matches = false;
            return false;
        }
    });
}); 
```

问题：当我们选择过滤器时，结果`transports_matches`总是错误的。

顺便说一句，我看到[这篇文章](https://stackoverflow.com/questions/5957491/using-jquery-to-filter-a-table-from-multiple-select-elements)的答案是使用类，但是没有它们有办法吗？

[编辑：您可以在这里](http://jsfiddle.net/r4mfv/1/)看到 JSFiddle 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:45:15.817

固定：http: [//jsfiddle.net/r4mfv/2/](http://jsfiddle.net/r4mfv/2/)

你有几个问题：

1.  `$(filtre_transports).each`不是遍历数组的方法，您应该使用`$.each(filtre_transports, function() {...})`.

2.  在比较它们之前，您应该投射`filtre`和。`this``String`

# facebook - 我可以以编程方式将链接从 Facebook 获取到我的网页吗？

> ID：10893465
> 
> 赞同：-1
> 
> 时间：2012-06-05T07:43:03.727
> 
> 标签：facebook, web

我想从 facebook 获取链接返回到我的网站。基本上，我想从我的网站在 facebook 上发布的点赞/共享链接中获取有多少用户访问了我的网站。我可以使用任何 FB API 获取这些值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:44:32.430

FB API 没有这种能力。这就是你要做的。在您的网站上检查每个 Web 请求的 HTTP_REFERER 属性。当推荐人是 Facebook 时，跟踪它。然后你就可以知道计数了。如果你不能这样做，那么你可以使用谷歌分析之类的东西来进行跟踪和报告。

# c# - 使用 Task.Factory.FromAsync 的问题

> ID：10893466
> 
> 赞同：0
> 
> 时间：2012-06-05T07:43:19.107
> 
> 标签：c#, asynchronous, async-ctp, async-await

我喜欢新的 C# 5 的**async**和**await**，我想将它设置为我以前使用 async whay 的 Tcp 应用程序之一（不是 async & await，实际上是 Begin*，End*）

在我的应用程序中，每条消息都有响应，因此每次使用 BeginSend 时，您都会收到一条与您第一次发送的消息相关的消息。（让我们假设命令和它的报告）

我想添加一个名为**RequestAsync**的新函数，您可以发送消息并等待响应到来。让我展示一下用法

```
string response = await RequestAsync("hi"); 
```

在这种情况下，您将发送一条“hi”消息，然后代码等待与此相关的响应出现。

我在使用**Task.Factory.FromAsync**时遇到问题，所以我尝试了以下代码，我想确保性能与**TaskFactory**方式大致相同。

```
public async Task<IRequestResult> SendRequestAsync(IRequest request, string message)
{
        IRequestResult result = BeginSendRequest(request, message);

        while (!result.IsCompleted)
        {
            await Task.Delay(1);
        }

        return result;
} 
```

BeginRequest 是我自己的方法。

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:48:31.400

不，这在效率方面会非常糟糕——你会醒来并需要每 5 毫秒重新安排一次。当您在周期之间有效睡眠时，您已经增加了延迟。

你应该回去尝试使用`Task.Factory.FromAsync`- 你没有告诉我们你尝试时出了什么问题，所以很难帮助你修复它......你可能没有正确实现异步编程模型模式开始和。（您没有为您的`BeginSendRequest`方法提供回调的事实暗示了这一点。）

我希望你的真实代码也没有`catch {}`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:48:06.910

轮询作为 IO 完成端口永远不可能高效，如果您只是在等待它而不做任何事情，为什么还要使用异步方法**，**它只会增加开销。

# c# - 使用 ASP.NET MVC3 上传文件（OpenFileDialog 替代方案）

> ID：10893471
> 
> 赞同：0
> 
> 时间：2012-06-05T07:43:53.057
> 
> 标签：c#, asp.net-mvc-3, file-upload, openfiledialog

我正在尝试复制一些 webforms 功能，这些功能在 MVC3 项目中上传 csv 文件并且即将解开。我有以下要求：

（简短的版本是我需要类似于**Filter**，**InitialDirectory**的东西，最好但不一定是 MVC3 的**System.Windows.Controls.OpenFileDialog**类的**MultiSelect**属性）

 **1.  显示打开文件对话框的单个按钮
2.  在对话框中单击打开时开始上传
3.  对话框中的文件类型应限制为 csv、txt 和所有文件
4.  初始目录应该可以根据用户偏好设置

我已经将 jQuery 用于前两个要求（如下所示），但如果这是最好的方法或如何完成后两个要求，我就不是。

**看法：**

```
@using (Html.BeginForm("Import", "Date", FormMethod.Post, new { enctype = "multipart/form-data", id="fileUpload" }))
{
    <input type="file" name="file" id="file" style="display: none;" />
    <input type="button" id="import" value="Import" />
}

<script type="text/javascript">
    $(document).ready(function () {

        $('#file').change(function () {
            $('#fileUpload').submit();
        });

        $('#import').click(function () {
            $('#file').trigger('click');
        });

    });
</script> 
```

**控制器：**

```
[HttpPost]
public ActionResult Import(HttpPostedFileBase file)
{
      // do stuff
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:14:52.917

除非您使用 Flash 或 Silverlight 插件，否则这是不可能的。我使用[Uploadify](http://www.uploadify.com/)，它应该可以满足您的所有需求。**

# entity-framework - 使用 System.Data.SQLite 生成 ADO.NET 实体数据模型时的程序集版本和位置

> ID：10893474
> 
> 赞同：2
> 
> 时间：2012-06-05T07:43:59.747
> 
> 标签：entity-framework, sqlite, nuget, .net-assembly, system.data.sqlite

我的问题的上下文如下：

*   我之前安装了 System.Data.SQLite ADO.NET 适配器，可从[此处获得](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)
*   与程序集一起，我安装了用于从 SQLite 数据库创建实体数据模型的设计时支持。
*   当我安装设计时支持时，程序集版本是`Version=1.0.79.0`
*   昨天我开始了一个新项目，并使用设计时支持工具从 SQLite 数据库生成了一个数据模型。
*   对于我的项目，我必须添加对`System.Data.SQLite`和`System.Data.SQLite.Linq`程序集的引用。在这里，我选择使用 Nuget 来获取最新版本，因为这简化了其余开发过程中的更新。Nuget 获取的最新汇编版本是`Version=1.0.81.0`

该项目已编译，但在执行时给了我这个错误：

```
System.IO.FileLoadException was unhandled
  Message=Could not load file or assembly 'System.Data.SQLite, Version=1.0.79.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
  Source=mscorlib
  FileName=System.Data.SQLite, Version=1.0.79.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139 
```

我认为这是因为设计时支持工具引用的程序集版本与我的项目引用的版本不同，我是对的。我从 System.Data.SQLite 站点下载了最新的设置，重新安装了设计时支持，并重新编译了项目。这解决了我的问题。

我的问题是：

1.  这是否意味着我不能将 System.Data.SQLite 设置提供的设计时间工具与 Nuget 一起使用，因为旧安装的设计时间支持版本和 Nuget 的最新程序集之间经常不匹配？或者有没有办法通过 Nuget 更新设计时支持，或者更好的是，使用最新的程序集版本编译模型，而不是设计时支持附带的任何东西（我猜这是在 GAC 中，我知道珍贵的小东西）。

# java - 如何访问在 Java 中实现的超类的字段，该超类也具有同名方法？

> ID：10893476
> 
> 赞同：3
> 
> 时间：2012-06-05T07:44:16.633
> 
> 标签：java, scala

我想扩展一个用 Java 实现的类。这是一个例子：

```
public interface JavaInterface {
    /** Computes foo. */
    public String foo();
}

public class ThisIsJava implements JavaInterface {
    protected String foo = "foo";

    /** Returns value of property foo. */
    public String foo() { return foo; }
} 
```

但是，当我在 Scala 中扩展此类时，如何消除字段和方法 foo 之间的歧义？

```
class ThisIsScala extends ThisIsJava {
  def fooBar = super.foo + "/bar" // doesn't compile
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T07:50:15.127

您无法访问该`foo`字段，因为它是私有的。您只能通过 访问它`super.foo()`。

更新：我认为你有这个问题，因为在 Scala 中字段和方法之间没有区别，所以唯一的选择是为 ThisIsJava 提供一个适配器，并在 Scala 中扩展该适配器。

# javascript - 在javascript中将字符串拆分为2个变量

> ID：10893478
> 
> 赞同：0
> 
> 时间：2012-06-05T07:44:26.360
> 
> 标签：javascript, variables, substring

我想将一个字符串转换为 2 个变量..

我已经创建了一个变量，我正在使用子字符串来拆分它，但是我似乎无法让它工作。

如果我创建一条警报消息，它会显示我想要拆分的原始变量（所以我知道那里有东西）

我的代码如下所示：

```
// variable 'ca' is set from a XML Element Response
alert(ca); // displays a string (eg. 123456789) - which does display fine
alert(ca.substring(0,1));  // should alert 1 but it stops and nothing is displayed 
```

但我添加**ca = "123456789";** 如下所示，它有效..

```
ca = "123456789";
alert(ca); // displays a string (eg. 123456789) - which does display fine
alert(ca.substring(0,1));  // should alert 1 but it stops and nothing is displayed 
```

但是变量 ca 设置了一些东西，并且在使用子字符串之前显示..

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:47:53.093

您的变量不包含字符串，它包含其他内容，可能是数字。

将值转换为字符串，以便能够对其使用字符串方法：

```
ca = ca.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:55:15.533

我的猜测是它`ca`不包含字符串而是数字。将变量转换为字符串时是否有效？

```
alert(String(ca).substring(0,1)); 
```

（请注意，您可以使用运算符检查变量包含的内容`typeof`：

```
console.log(typeof ca);
// number
console.log(typeof String(ca));
// string 
```

更新：`ca.toString()`和`String(ca)`都应该工作，但我个人更喜欢`String(ca)`，因为如果 ca 是`null`或`undefined`.

# ruby-on-rails - Rails 3.1 + Devise：Devise 的默认路由不起作用

> ID：10893484
> 
> 赞同：2
> 
> 时间：2012-06-05T07:44:59.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

当我尝试访问“登录”路由 (GET /users/sign_in) 时出现以下错误...

```
No route matches {:action=>"home", :controller=>"devise/pages"} 
```

这是来自服务器日志的完整错误...

```
Started GET "/users/sign_in" for 127.0.0.1 at 2012-06-05 00:51:54 -0700
  Processing by Devise::SessionsController#new as HTML
Rendered devise/shared/_links.erb (2.9ms)
Rendered devise/sessions/new.html.erb within layouts/application (33.5ms)
Rendered pages/_header.html.erb (75.9ms)
Completed 500 Internal Server Error in 349ms

ActionView::Template::Error (No route matches {:action=>"home", :controller=>"devise/pages"}): 
```

这是我的应用程序/布局的主体......

```
<!-- BEGIN body -->
<body class="top">

    <!-- BEGIN .container -->
    <div class="container">

        <%= render 'pages/header' %>
        <%= render 'pages/menu' %>

        <p class="notice"><%= notice %></p>
        <p class="alert"><%= alert %></p>

        <%= yield %>

    <!-- END .container -->
    </div>

    <%= render 'pages/footer' %>

</body> 
```

我拥有的唯一控制器是“页面”控制器。另外，这是我的 route.rb 文件...

```
MyApp::Application.routes.draw do

  devise_for :users

  match '/contact', :to => 'pages#contact'
  match '/news', :to => 'pages#news'
  match '/home', :to => 'pages#home'
  match '/features', :to => 'pages#features'

  root :to => 'pages#home'

end 
```

我不知道它是否与它有关，但我也使用`rails generate devise:views`命令生成了视图。

当我执行 GET /users/sign_in 时，为什么它试图访问不存在的“设计/页面”控制器和“主页”操作？当我这样做时，这不是我的路线所显示的`rake routes`......

```
new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"devise/sessions"}
            user_session POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"devise/sessions"}
           user_password POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
       new_user_password GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
      edit_user_password GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
cancel_user_registration GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"devise/registrations"}
       user_registration POST   /users(.:format)               {:action=>"create", :controller=>"devise/registrations"}
   new_user_registration GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"devise/registrations"}
  edit_user_registration GET    /users/edit(.:format)          {:action=>"edit", :controller=>"devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"devise/registrations"}
                    root        /                              {:controller=>"pages", :action=>"home"}
                 contact        /contact(.:format)             {:controller=>"pages", :action=>"contact"}
                    news        /news(.:format)                {:controller=>"pages", :action=>"news"}
                    home        /home(.:format)                {:controller=>"pages", :action=>"home"}
                features        /features(.:format)            {:controller=>"pages", :action=>"features"} 
```

非常感谢您的智慧！

*编辑*按要求添加“页面/菜单”部分......

```
<!-- BEGIN .menu-primary -->
    <div class="menu-primary">
        <table>
            <tr>
                <td class="menu">
                    <ul>
                        <li>
                            <a href="/news">News</a>
                        </li>
                        <li>
                            <a href="/features"><span>Shop Products</span></a>
                            <ul>
                                <li><a href="/features">Features</a></li>
                            </ul>
                        </li>
                        <li><a href="#"><span>Shop Parts</span></a><ul><li><a href="#">Controls (Coming Soon)</a></li><li><a href="#">Monitors (Coming Soon)</a></li><li><a href="#">Artwork (Coming Soon)</a></li><li><a href="#">Accessories (Coming Soon)</a></li></ul></li>
                        <li><a href="/contact">Contact Us</a></li>
                    </ul>
                </td>
            </tr>
        </table>
    <!-- END .menu-primary -->
    </div> 
```

*更新*在我的标题模板中，我有......

```
<%= link_to image_tag("mylogo.png", :alt=>"", :width=>"300", :height=>"100"), {:action => 'home', :controller => 'pages'} %> 
```

删除它可以让我的登录页面成功加载。为什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T02:09:40.727

在为 构建 URL 时`{:action => 'home', :controller => 'pages'}`，Rails 使用相对于呈现当前视图的控制器的路径。对于登录页面，这将是“设计/会话”，因此它会在命名空间中查找 PagesController `devise`。

您可以通过添加反斜杠来指定控制器在根目录中，而不是在设计命名空间中来修复它。

代替：

```
{:action => 'home', :controller => 'pages'} 
```

有了这个：

```
{:action => 'home', :controller => '/pages'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:57:35.673

> "", :width=>"300", :height=>"100"), root_path %>

我相信传递的 link_to url 的范围是设计的。您应该改用从 rake 路由生成的路径名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T05:41:58.727

我在安装 Devise 时遇到了同样的问题，之后无法运行任何东西。但就我而言，我尝试使用 Rails 在路由页面上指向的路由来解决它：

```
<%= link_to 'Home', {:controller => 'frontpages', :action => 'services'}, class: 'footer-nav-link' %>

To:

<%= link_to 'Services', frontpages_services_path, class: 'footer-nav-link' %>
```

一切都在追赶。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-23T06:36:51.997

我找到了在相对文件的控制器开头添加反斜杠“/”的地方，其中错误将显示在相关文件中（参见错误，即 development.log）在我的情况下：

```
= link_to "About", :controller => "/pages", :action => "about" 
```

或者

```
= link_to "Home", :controller => "/pages", :action => "home" 
```

# r - 使用非 GPL 代码分发 GPL 代码

> ID：10893486
> 
> 赞同：5
> 
> 时间：2012-06-05T07:45:03.173
> 
> 标签：r, open-source, licensing, gpl

我为 R 编写了一个包，其中包含程序 ttf2pt1 的源代码，该程序在安装时编译。该程序未链接到；我编写的代码使用名为 的函数调用该程序`system2()`，这基本上就像从命令行调用它一样。这个程序的整个源代码都在它自己的目录中，我根本没有修改它。

我想在某些 GPL 版本下分发包，但我不清楚这是否可能。如果没有，我会接受另一个免费软件许可证。

该程序有一个许可文件，但基本上需要包括：

*   具体免责声明
*   特定的版权声明
*   具体确认

正文如下：

```
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:
1\. Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.
2\. Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.
3\. All advertising materials mentioning features or use of this software
   must display the following acknowledgement:
     This product includes software developed by the TTF2PT1 Project
     and its contributors. 
```

此外，子组件有此通知：

```
Copyright (c) 1992 by I. Lee Hetherington, all rights reserved.
Permission is hereby granted to use, modify, and distribute this program
for any purpose provided this copyright notice and the one below remain
intact. 
```

我相信这个许可与 GPL*兼容*，但我不确定对整个软件包的许可有何影响。

我的问题：

1.  我可以在 GPL2 或 GPL3 下分发整个包吗？
2.  如果是这样，ttf2pt1 程序是否需要单独的许可证？
3.  如果无法在 GPL2/3 下分发整个软件包，我可以使用哪些许可证？
4.  我必须在 LICENSE 文件中输入哪些信息？

**编辑：**如果可以使用我的代码在一个许可证下发布软件包，而 ttf2pt1 在另一个许可证下发布，我也会很高兴。以前有一个似乎相关的[答案。](https://stackoverflow.com/questions/4314708/if-an-r-packages-licence-x-is-do-all-the-content-in-that-package-have-to-be-li)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:21:14.607

我不明白为什么你不能正确包装 ttf2pt1 的源代码——包括它的源代码，编写一个包装函数并从 R 调用该包装函数。许可证明确允许这样做，只要你遵守其他条款（包括它的许可证文件等 pp)。

R 本身包含来自其他项目的代码；您可以研究 R 的（相当大的）来源，看看它是如何做到的。当然，许多 CRAN 软件包也这样做，所以我相信您可以找到合适的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T19:45:55.413

该广告条款可能使 ttf2pt1 与 GPL 不兼容：[https](https://www.gnu.org/licenses/license-list.html#OriginalBSD) ://www.gnu.org/licenses/license-list.html#OriginalBSD 因此您不能将该文件包含在 GPL 的 R 包中。

如果您不介意在您的 R 包中获得许可许可，您最好的选择可能是在所有这些条款中包含一个非标准许可。

但是，假设您的非 GPL 代码与 GPL 兼容，那么是的，您可以在整体 GPL 许可下分发 R 包。

我有将 GPL (>=2) 代码与 GPL 兼容 Python 许可下的代码组合在一起的包（optparse、argparse），其中包含强制性许可通知。

这是 FSF 指导我将 gpl 兼容代码与强制版权声明与 GPL 代码合并的一个很好的资源：http: [//www.softwarefreedom.org/resources/2007/gpl-non-gpl-collaboration.html](http://www.softwarefreedom.org/resources/2007/gpl-non-gpl-collaboration.html)

就让 CRAN 高兴而言，事实证明，如果整个软件包是 GPL 的，他们不喜欢在许可字段中显示 LICENSE 或 (GPL >= 2) + LICENSE 的说明中，其中 LICENSE 包含您需要的所有许可版权声明保存。特别是他们强迫我删除这样的许可证文件。然而，他们似乎没问题，在“作者”下的“描述”中，你给出了从哪里获得所有软件的高级描述，在“许可证”下说 GPL (>= 2) [或任何合适的 GPL]，然后在“版权”下说“查看文件 ( inst/)COPYRIGHTS. 在 (inst/)COPYRIGHTS 中，您可以包含您需要保留的所有版权声明。我使用 Debian 软件包版权格式[http://www.debian.org/doc/packaging-manuals/copyright-format /1.0/](http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/)但你不需要。您还可以查看 R 源代码中的 COPYRIGHT 文件。

将所有原始版权声明保留在包含它们的任何源文件中也是一个好主意。如果您还使用 GPL 的增强功能直接修改该源文件，softwarefreedom.org 页面对此提供了建议，但如果您不更改包含的源文件，您通常可以保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:49:57.143

这不是对我问题的直接回答，但是 hadley 给我发了一些代码来查找在非标准许可下分发的 CRAN 包。我使用此代码来查找一些可以使用的示例。

```
local <- file.path(tempdir(), "packages.rds")
 download.file("http://cran.R-project.org/web/packages/packages.rds", local,
   mode = "wb", quiet = TRUE)
 on.exit(unlink(local))
 cp <- readRDS(local)
 rownames(cp) <- unname(cp[, 1])
cp <- as.data.frame(cp, stringsAsFactors = F)
table(cp$License)
library(stringr)
subset(cp[c("Package", "License")], str_detect(License, "LICENSE")) 
```

# php - 在 img src $_GET 问题上传递价值

> ID：10893488
> 
> 赞同：1
> 
> 时间：2012-06-05T07:45:13.640
> 
> 标签：php

我从 img src 传递值，如下所示：

页面A：

```
<img src="watermark.php?fname=<?php echo $image; ?>" /> 
```

然后我在 pageB 上获取值：

```
$fname = $_GET['fname'];

$watermark_img = $passed_fname;

... 
```

出于某种原因，没有显示图像......我在这里遗漏了什么？

这是pageB完整代码：

```
<?php  

$fname = $_GET['fname'];

$main_img = "Porsche_911_996_Carrera_4S.jpg"; // main big photo / picture
//$watermark_img    = "watermark.gif"; // use GIF or PNG, JPEG has no tranparency support
$watermark_img = $fname;
$padding        = 3; // distance to border in pixels for watermark image
$opacity        = 100;  // image opacity for transparent watermark

$watermark  = imagecreatefromgif($watermark_img); // create watermark
$image      = imagecreatefromjpeg($main_img); // create main graphic

if(!$image || !$watermark) die("Error: main image or watermark could not be loaded!");

$watermark_size     = getimagesize($watermark_img);
$watermark_width    = $watermark_size[0];  
$watermark_height   = $watermark_size[1];  

$image_size     = getimagesize($main_img);  
$dest_x         = $image_size[0] - $watermark_width - $padding;  
$dest_y         = $image_size[1] - $watermark_height - $padding;

// copy watermark on main image
imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, $opacity);

// print image to screen
header("content-type: image/jpeg");   
imagejpeg($image);  
imagedestroy($image);  
imagedestroy($watermark);  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:49:13.367

是否`$image`包含一些*特殊*字符？

尝试使用 PHP**[`urlencode()`](http://php.net/manual/en/function.urlencode.php)**函数：

```
<img src="watermark.php?fname=<?php echo urlencode($image); ?>/> 
```

而且，在第二页：

```
$fname = urldecode($_REQUEST['fname']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:57:58.323

如果您传递给 $fname 的值只是名称，您可能需要指定完整路径。

```
$watermark_img = '/PATH_TO_THE_IMAGE/'.$fname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:00:04.567

直接从地址栏试试水印PHP，然后查看源码。如果在设置 jpeg 标头之前有任何输出，浏览器将无法处理。你可能有类似的东西

> 错误行 3443234
> 
> JPEG图像编码

第一行使其成为无效图像。

# php - mongodb $pull 不工作 php

> ID：10893490
> 
> 赞同：0
> 
> 时间：2012-06-05T07:45:27.767
> 
> 标签：php, mongodb, pull, unset

我的数据库中有这个对象。

```
 Array(
[_id] => MongoId Object
    (
        [$id] => 4fcdb3b8749d786c03000002
    )

[email] => foo@bar.com
[folder] => Array
    (
        [root] => Array
            (
                [feeds] => Array
                    (
                        [0] => Array
                            (
                                [feedID] => MongoId Object
                                    (
                                        [$id] => 4fcdaa9e749d786c03000001
                                    )

                                [title] => title.com
                            )

                    )

                [title] => root
            )

    )

[status] => 1
[username] => foouser) 
```

我只想从 [feeds] 中提取项目 [0]。我使用此代码，但它不起作用：

```
$usersCollection->update(array("username" => "foouser"), array('$pull'=> array('folder'=>array('root'=>array('feeds'=>array('feedID'=>$id)))))); 
```

当我使用这个 $unset 而不是 $pull 时，完整的 [folder] 将消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:02:45.813

您需要指定数组元素的*完整*值。您还必须使用*“folder.root.feeds”*，因为这是您要从中提取的字段。您不想将数组元素拉入内部以`folder`免受影响。

在 shell 上，您将运行：

```
db.so.update(
    { 'username' : 'foouser' },
    { $pull:
        { 'folder.root.feeds' :
            {
                "feedId" : ObjectId("4fcdaa9e749d786c03000001"),
                "title" : "title.com"
            }
        }
    }
); 
```

在 PHP 中，这将转化为：

```
$c->update(
    array( 'username' => 'foouser' ),
    array( '$pull' =>
        array( 'folder.root.feeds' =>
            array(
                'feedId' => new MongoId('4fcdaa9e749d786c03000001'),
                'title' => 'title.com',
            )
        )
    )
); 
```

# dynamic - 如何保护布局免受生成网页上格式错误的 html 内容的影响？

> ID：10893491
> 
> 赞同：1
> 
> 时间：2012-06-05T07:45:43.383
> 
> 标签：dynamic, html, malformed

我有一个网页的容器布局，其工作方式如下：

```
<html>
#header#
<div class="content_container"> #content inserted here# </div>
#footer#
</html> 
```

如果内容的 a`div`未关闭或关闭 a`div`而未打开，则`content_container`的 div 等布局会混乱。

这种情况通常如何避免或解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:57:19.907

嗨，

根据我在网上找到的内容，您可以使用 DOM loadHTML 函数将片段解析为 HTML 文档，然后将其作为 HTML 再次吐出。这将修复任何 HTML 格式正确的错误。

或者你可以使用 php5 的 Tidy 扩展

[http://www.php.net/tidy](http://www.php.net/tidy)

# visual-studio-2010 - 我如何证明水晶报表中的文本是正确的

> ID：10893494
> 
> 赞同：0
> 
> 时间：2012-06-05T07:46:03.853
> 
> 标签：visual-studio-2010, crystal-reports

我正在使用 Microsoft Visual Studio 2010，在构建包含大量文本的报表时，我无法证明它的合理性，工具栏中有左、中和右对齐但没有证明，我记得以前有版本。

我怎样才能获得正当性？

这里有一个类似的问题，但它没有回答我的问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T12:13:32.023

**使用visual studio 2010在水晶报表中对齐的解决方案**
**在格式编辑器中右键单击您的文本对象

段落 -> 水平对齐 -> 对齐 -> 对齐**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:00:41.783

右键单击您的列

选择格式对象 -> 通用 -> 水平对齐 -> 对齐

# android - 有人可以解释如何解释这个 logcat 吗？

> ID：10893496
> 
> 赞同：0
> 
> 时间：2012-06-05T07:46:21.450
> 
> 标签：android, logcat

```
02:41:30.402 Error AndroidRuntime 256  *** FATAL EXCEPTION IN SYSTEM PROCESS: android.server.ServerThread
02:41:30.403 Error AndroidRuntime 256  java.lang.NoSuchFieldError: com.android.internal.telephony.IccCard$State.ICC_FAIL
02:41:30.403 Error AndroidRuntime 256   at com.android.internal.policy.impl.KeyguardViewMediator.doKeyguard(KeyguardViewMediator.java:637)
02:41:30.403 Error AndroidRuntime 256   at com.android.internal.policy.impl.KeyguardViewMediator.onSystemReady(KeyguardViewMediator.java:348)
02:41:30.403 Error AndroidRuntime 256   at com.android.internal.policy.impl.PhoneWindowManager.systemReady(PhoneWindowManager.java:3520)
02:41:30.403 Error AndroidRuntime 256   at com.android.server.WindowManagerService.systemReady(WindowManagerService.java:5934)
02:41:30.403 Error AndroidRuntime 256   at com.android.server.ServerThread.run(SystemServer.java:656) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:34:11.057

看起来您正在运行自定义 ROM 或构建自己的 ROM，但构建有问题。

# android - Android 锁屏在被禁用后再次显示（使用 lock.disableKeyguard()）

> ID：10893498
> 
> 赞同：1
> 
> 时间：2012-06-05T07:46:27.300
> 
> 标签：android, android-activity, android-intent, lockscreen, wakelock

嘿，我正在编写一个启动器，我在其中构建了我自己的自定义锁屏。

自定义锁屏是一个在屏幕关闭时启动的活动（通过监听 Intent.ACTION_SCREEN_OFF）

要禁用 android 的锁屏，我使用以下代码：

```
KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

这一切都很好，直到某个时候，android的锁屏再次打开（就像它以前从未被禁用过一样）。

它在三星银河 2 上经常发生（但也发生在其他手机上）。

我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:59:37.180

你启用了 DevicePolicyMangnager 吗？如果不是，该功能将不起作用。

这来自[文档](http://developer.android.com/reference/android/app/KeyguardManager.KeyguardLock.html)：

> 注意：当启用任何需要密码的 DevicePolicyManager 时，此调用无效。

[这](http://developer.android.com/guide/topics/admin/device-admin.html)是一个关于它的教程。无论如何，我认为这不是您要寻找的原因，因为无论何时您的应用程序都会这样做，用户必须提供密码才能授予您管理员权限。

一般来说，没有办法以编程方式禁用 KeyGuard（如果是安全的 pin、密码、图案、面部），您最多只能在其上显示一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:31:36.660

设法通过调用以某种方式解决它

```
 KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
 KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
 lock.disableKeyguard(); 
```

在我开始锁屏活动之前

# entity-framework - 首先通过代码创建严格的一对一关系

> ID：10893502
> 
> 赞同：0
> 
> 时间：2012-06-05T07:47:02.620
> 
> 标签：entity-framework, ef-code-first, one-to-one

我想先通过代码创建一对一的关系，下面是我的代码，

```
class Person
{
    public int id { get; set; }
    public string Name { get; set; }
    public virtual PersonDetail detail { get; set; }
}

class PersonDetail
{
    public int id { get; set; }
    public double Height { get; set; }
    public double Weight { get; set; }
    public virtual Person person { get; set; }
}

class EFTest : DbContext
{
    public DbSet<Person> personSet { get; set; }
    public DbSet<PersonDetail> detailSet { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Person>().HasRequired(x => x.detail).WithRequiredPrincipal(x => x.person);
    }
} 
```

但我仍然可以插入一个没有人的详细信息的人。我正在尝试首先在模型中创建 1 对 1 的关系，它运行良好，如果我插入一端而没有另一端，则会引发异常。为什么先用上面的代码创建一个 1 到 0..1 的关系？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:35:11.290

只有当两者都映射到同一个表时才有可能`Person`（`PersonDetail`映射技术称为表拆分），因为严格的 1:1 意味着您不能在`Person`不存在的情况下插入，`PersonDetail`但您也不能在`PersonDetail`不存在的情况下插入`Person`=> 您不能插入其中任何一个因为依赖关系总是会丢失（记住每条记录都有自己的插入命令，数据库在每个命令之后而不是在事务之后检查完整性）。

只有当您使用[表拆分](https://stackoverflow.com/questions/5390172/how-to-map-table-splitting-in-ef-code-first)时， EF 才会创建包含来自两个实体的数据的单个插入命令。在您的实体模型中，它看起来像两个具有 1:1 映射的实体，但在数据库中它将是单个表。

# jquery - 动画后jQuery隐藏下拉菜单

> ID：10893507
> 
> 赞同：0
> 
> 时间：2012-06-05T07:47:27.733
> 
> 标签：jquery, animation, drop-down-menu, queue, hide

我试图在这里解决一个问题。

以下 jQuery 脚本用于我的下拉菜单。

以下所有代码对我来说都很好，除了我遇到了一个障碍。

如果我单击 .drop class 'a' 链接之一来获取我的下拉菜单，它会出现下面代码中列出的所有动画。但不幸的是，当我点击另一个 .drop class 'a' 链接时，另一个下拉菜单并没有消失。

我尝试过使用 `$("ul.dropdown").hide();`，但这会`if(theDropState){ .. }`通过使其立即消失来取消动画。

任何人都可以帮我找到一个让它隐藏起来的解决方案，但是在`if(theDropState){ .. }`动画完成之后？

我试过放`$("ul.dropdown").hide();`一个**回调**函数，但这也没有用。

```
 $(".drop").click(function(event) {
  var theDrop = $(this).next("ul.dropdown");
  theDropState = theDrop.is(':visible');

  if(theDropState){ 
    theDrop.stop(true,true).animate({ height: 'hide' }, '200'); 
    $('#header').stop(true,true).animate({ height: '50px' }, '200', function(){
          $("ul.dropdown").hide();
    });
  }
  else if(!theDropState){
    theDrop.stop(true,true).animate({ height: 'show', opacity: 'show' }, '200') 
    $('#header').stop(true,true).animate({ height: '100px' }, '200') 
  } 
```

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:53:10.647

使用回调

```
$('#foo').animate({height: '200px'}, 200, function(){ /*  do stuff */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:53:50.127

[jQuery animate](http://api.jquery.com/animate/)完成后可以获得**回调**函数。只需将您想要在回调中执行的任何内容传递给它。

```
.animate({ height: '50px' }, '200', function() {
  // do stuff here 
 }); 
```

# android - 应用程序自动重启

> ID：10893508
> 
> 赞同：0
> 
> 时间：2012-06-05T07:47:27.987
> 
> 标签：android, sockets

我通过线程在 WiFi 上制作套接字。我的应用在 Android 2.3.4 版本上表现很奇怪，在这里它随机重启；而它在版本中运行良好：2.3.6 和 4.0。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:21:04.097

您在某些异常尝试/捕获中有一些完成（）指令吗？

您的应用程序是否消耗大量内存？（你能检查一下吗）

此外，向您的应用程序添加一些分析工具/错误跟踪工具。我会给你一些建议：

*   Bugsense.com
*   [http://code.google.com/p/acra/](http://code.google.com/p/acra/) ACRA（如果需要，可以与 bugsense 集成）
*   内存分析（http://developer.android.com/resources/articles/avoiding-memory-leaks.html + 过去 google IO 的一些谈话）

# mysql - 如何在 MySQL 中为普通查询声明一个变量？

> ID：10893517
> 
> 赞同：31
> 
> 时间：2012-06-05T07:48:10.207
> 
> 标签：mysql, variables, variable-declaration

如何在 MySQL 中为普通查询声明变量？

**例如，**

```
declare @myVar date;
set @myVar = something;

select * from someTable where someColumn = @myVar; 
```

我试过了，语法似乎是错误的......我错过了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-05T07:51:12.983

您可以通过这种方式声明会话变量：

```
SET @myvarname := 'value'; 
```

或以这种方式的局部变量：

```
DECLARE my_variable varchar(30) 
```

还：

```
DECLARE my_variable varchar(30) DEFAULT 'value' 
```

# autocomplete - Yii CJuiAutoComplete 来自 Ajax 请求的数据不显示列表选择

> ID：10893519
> 
> 赞同：1
> 
> 时间：2012-06-05T07:48:43.373
> 
> 标签：autocomplete, yii

自动完成不显示来自 sourceUrl 的数据；

控制器

```
public function actionTestAutoComplete() {
        $r = array(
                array("label"=>"Test 1", "value"=>"Test 1") ,
                array("label"=>"Test 2", "value"=>"Test 2") ,
                array("label"=>"Test 3", "value"=>"Test 3") ,
                array("label"=>"Test 4", "value"=>"Test 4") ,
            );
        echo CJSON::encode($r);
    } 
```

看法

```
 $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
                'name' => 'test_autocomplete',
                'source'=>$this->createUrl("testAutocomplete"),
                'value' => "",
                'options' => array(
                    'minChars'=>1,
                    'autoFill'=>false,
                    'focus'=> 'js:function( event, ui ) {
                        $( "#test_autocomplete" ).val( ui.item.label );
                        return false;
                    }',
                    'select'=>'js:function( event, ui ) {
                        return false;
                    }'
                ),
                'htmlOptions'=>array( 'autocomplete'=>'off'),
            )); 
```

动作 testAutocomplete 在调试中工作，但自动完成不显示来自 ajax 的数据。

下面的代码工作正常。

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
                'name' => 'test_autocomplete',
                'source'=>array(
                             array('label'=>'test 1', 'value'=>'teste 1'),
                             array('label'=>'test 2', 'value'=>'teste 2'),
                             array('label'=>'test 3', 'value'=>'teste 3'),
                          ),
                'value' => "",
                'options' => array(
                    'minChars'=>1,
                    'autoFill'=>false,
                    'focus'=> 'js:function( event, ui ) {
                        $( "#test_autocomplete" ).val( ui.item.label );
                        return false;
                    }',
                    'select'=>'js:function( event, ui ) {
                        return false;
                    }'
                ),
                'htmlOptions'=>array( 'autocomplete'=>'off'),
            )); 
```

请，我需要帮助，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:14:09.187

尝试这个。我已经对此进行了测试，并且效果很好。

在查看侧代码...

```
<?php $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
                'name' => 'test_autocomplete',
                'source'=>$this->createUrl('Controller class name here/AutoCompleteLookup'), // always define the correct path in Url..
                'value' => "",
                'options' => array(
                    'minChars'=>1,
                    'autoFill'=>false,
                    'focus'=> 'js:function( event, ui ) {
                        $( "#test_autocomplete" ).val( ui.item.label );
                        return false;
                    }',
                    'select'=>'js:function( event, ui ) {
                        return false;
                    }'
                ),
                'htmlOptions'=>array( 'autocomplete'=>'off'),
            )); ?> 
```

你的代码的其余部分没问题，但这里有一些我已经修复的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T12:34:15.343

尝试使用 sourceURL 代替 source 选项。

# list - 如何在 OCaml 中取两个列表的乘积？

> ID：10893521
> 
> 赞同：4
> 
> 时间：2012-06-05T07:49:05.767
> 
> 标签：list, ocaml

我有两个清单：

```
let a = ["a";"b"];
let b = ["c";"d"]; 
```

我想要一个输出列表 c 例如：

```
c = ["a";"c";"a";"d";"b";"c";"b";"d"]; 
```

由于列表是不可变的，如何在 ocaml 中执行此操作？我是新手。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T08:06:22.377

您将返回一个新列表。如果您真的对列表的*笛卡尔积*感兴趣，那么这应该足够了：

```
let cartesian l l' = 
  List.concat (List.map (fun e -> List.map (fun e' -> (e,e')) l') l)

# cartesian ["a";"b"] ["c";"d"];;
- : (string * string) list = [("a", "c"); ("a", "d"); ("b", "c"); ("b", "d")] 
```

如果你需要那种奇怪的扁平结构，你可以使用额外的列表连接。

```
let flat_cartesian l l' = 
  List.concat (List.concat (
    List.map (fun e -> List.map (fun e' -> [e;e']) l') l)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T10:48:42.013

如果您不想使用连接，因为这不是尾递归操作，您可以使用以下（应该更有效）：

```
let product l1 l2 =
  List.rev (
   List.fold_left
    (fun x a ->
      List.fold_left
       (fun y b ->
         b::a::y
       )
       x
       l2
   )
   []
   l1
 )
;; 
```

对于笛卡尔积，只需更改

```
b::a::y 
```

进入

```
(a,b)::y 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T13:20:58.723

我会将问题分解为两个子问题：

*   首先考虑一个函数 appendeach ，它接受一个值和一个列表，并返回在列表中每个项目前面添加该值的结果

    ```
    let rec appendeach x lst = match lst with [] -> [] 
                                            | hd::tl -> x::hd::(appendeach x tl);; 
    ```

*   然后考虑一个带有两个列表的函数产品，并为第一个列表和整个第二个列表中的每个项目调用 appendeach

    ```
    let rec product lst1 lst2 = match lst1 with [] -> [] | 
                                             hd::tl -> (appendeach hd lst2)@(product tl lst2);; 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-06T18:35:39.027

这是基于 Python 的任意数量列表的实现`itertools.product`。

这些列表都必须是同一类型，因为我们返回的产品本身就是（必然是同质的）列表。

```
let product pools =
  let result = ref [[]] in
  List.iter (fun pool ->
      result := List.concat_map (fun y ->
          List.map (fun x ->
              List.append x [y]
            ) !result
        ) pool
    ) pools;
  !result 
```

```
product [["a";"b"]; ["1";"2"]; ["$";"%"]];;
- : string list list =
[["a"; "1"; "$"]; ["b"; "1"; "$"]; ["a"; "2"; "$"]; ["b"; "2"; "$"];
 ["a"; "1"; "%"]; ["b"; "1"; "%"]; ["a"; "2"; "%"]; ["b"; "2"; "%"]] 
```

如果您随后需要一个扁平列表，您可以`List.concat`按照其他答案将其包装起来：

```
List.concat (product [["a";"b"]; ["1";"2"]]);;
- : string list = ["a"; "1"; "b"; "1"; "a"; "2"; "b"; "2"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-12T19:40:12.333

一个非常必要的（类 java 或类 C）解决方案，所以我不确定它是否会有所帮助；在像 OCaml 这样的函数式语言中，通常期望递归而不是循环。但它有效：

```
let cartesianProduct list1 list2 =
    let product = ref [] in
        for i = 0 to List.length list1 -1 do
            for j = 0 to List.length list2 -1 do
                product:= !product@[List.nth list1 i]@[List.nth list2 j]
            done;
        done;
    !product;; 
```

# c++ - 我们如何使用 Qt/C++ 解析 HTTP 响应头字段？

> ID：10893525
> 
> 赞同：2
> 
> 时间：2012-06-05T07:49:33.573
> 
> 标签：c++, qt, parsing, http-headers, kde

我正在编写一个使用 Qt/KDE 库的软件。目标是将 HTTP 标头响应字段解析为结构的不同字段。到目前为止，HTTP 标头响应包含在 QString 中。

它看起来像这样：

```
"HTTP/1.1 302 Found
date: Tue, 05 Jun 2012 07:40:16 GMT
server: Apache/2.2.22 (Linux/SUSE)
x-prefix: 49.244.80.0/21
x-as: 23752
x-mirrorbrain-mirror: mirror.averse.net
x-mirrorbrain-realm: region
link: <http://download.services.openoffice.org/files/du.list.meta4>; rel=describedby; type="application/metalink4+xml"
link: <http://download.services.openoffice.org/files/du.list.torrent>; rel=describedby; type="application/x-bittorrent"
link: <http://mirror.averse.net/openoffice/du.list>; rel=duplicate; pri=1; geo=sg
link: <http://ftp.isu.edu.tw/pub/OpenOffice/du.list>; rel=duplicate; pri=2; geo=tw
link: <http://ftp.twaren.net/OpenOffice/du.list>; rel=duplicate; pri=3; geo=tw
link: <http://mirror.yongbok.net/openoffice/du.list>; rel=duplicate; pri=4; geo=kr
link: <http://ftp.kaist.ac.kr/openoffice/du.list>; rel=duplicate; pri=5; geo=kr
digest: MD5=b+zfBEizuD8eXZUTWJ47xg==
digest: SHA=A5zw6PkywlhiPlFfjca+gqIGLHA=
digest: SHA-256=HOrd0MMBzS8Ctljpe4PauwStijsnBKaa3gXO4L30eiA=
location: http://mirror.averse.net/openoffice/du.list
content-length: 329
connection: close
content-type: text/html; charset=iso-8859-1" 
```

除了自定义字段之外，标头响应中可能还有更多字段。我想出的唯一可能的方法是手动搜索“链接”、“摘要”等字段，并创建一个以这些字段为键的 QMap。但是，我想必须有更好的方法来做到这一点。如果你能帮助我，我会很感激你的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:44:58.653

HTTP 标头最初应该在 a 中`QByteArray`（因为它是 ASCII，而不是 UTF-16），但方法与 a 相同`QString`：

*   逐行拆分标题，
*   在冒号字符处分割每一行，
*   `'\r'`在存储它们之前修剪 2 个结果字符串周围的任何空格（常规空格和字符）。

```
QByteArray httpHeaders = ...;
QMap<QByteArray, QByteArray> headers;

// Discard the first line
httpHeaders = httpHeaders.mid(httpHeaders.indexOf('\n') + 1).trimmed();

foreach(QByteArray line, httpHeaders.split('\n')) {
    int colon = line.indexOf(':');
    QByteArray headerName = line.left(colon).trimmed();
    QByteArray headerValue = line.mid(colon + 1).trimmed();

    headers.insertMulti(headerName, headerValue);
} 
```

# android - 如何摆脱自定义行列表视图的点击效果？

> ID：10893527
> 
> 赞同：0
> 
> 时间：2012-06-05T07:49:58.437
> 
> 标签：android, android-layout

我正在尝试禁用对行的点击效果。我使用了绑定到 ArrayAdapter 的自定义行。我已经尝试过`android:clickable="false", android:focusable="false"`ListView、TextView、按钮和图像视图，它们用于在行中显示。

这是我的“web_message_list.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/exclamation_feather_top"
    >

    <RelativeLayout 
    android:id="@+id/titleArea"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/top_head">

     <ImageView 
         android:id="@+id/btn_Cancel"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/cancel"
         android:layout_marginTop="6dp"
         android:layout_marginLeft="2dp"
         android:layout_alignParentLeft="true"
         android:visibility="gone"

         />   
    <TextView
        android:id="@+id/contact_title"
        style="?customTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_centerInParent="true" 
        android:text="Messages" />  
    <ImageView
        android:id="@+id/edit_btn"
        android:layout_width="65dp"
        android:layout_height="33dp"
        android:layout_marginTop="3dp"
        android:layout_marginRight="2dp"
        android:layout_alignParentRight="true"        
        android:src="@drawable/edit_button"
        android:scaleType="fitEnd" />

    <ImageView
    android:id="@+id/btnDone"
        android:layout_width="65dp"
        android:layout_height="33dp"
        android:layout_marginTop="3dp"
        android:layout_marginRight="2dp"
        android:layout_alignParentRight="true"         
        android:src="@drawable/done_button"
        android:visibility="gone"
        android:scaleType="fitEnd"        />

    </RelativeLayout>

     <ListView
        android:id="@android:id/android:list"
        style="@style/blackContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/titleArea"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="2dp"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false" >
    </ListView>    

</RelativeLayout> 
```

和“web_msg_list.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/top_head"
    android:id="@+id/titleArea2"

   >
<TextView 
            android:id="@+id/btnBck"
        android:layout_width="80dp"
        android:layout_height="33dp"
        android:layout_marginTop="3dp"
        android:layout_marginLeft="2dp"
        android:layout_alignParentLeft="true"        
        android:background="@drawable/messages"
        android:scaleType="fitStart"
            />

<TextView
        android:id="@+id/usr_name"
        style="?customTitle"
        android:layout_width="100dp"
        android:layout_height="32dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:maxLines="1"
        android:singleLine="true"
        android:ellipsize="end"

       />

         <TextView 
            android:id="@+id/btnUserInfo"
        android:layout_width="80dp"
        android:layout_height="33dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"      
         android:layout_marginTop="3dp" 
        android:background="@drawable/userinfo"
        android:scaleType="fitStart"
            />

</RelativeLayout>

 <RelativeLayout
      android:id="@+id/alarmLayout"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_below="@id/titleArea2"
      android:layout_marginLeft="12dp"
      android:layout_marginRight="12dp"
      android:background="@drawable/layout_border"
      android:padding="3dp" >

        <TextView
            android:id="@+id/lblmessage1"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:layout_alignLeft="@+id/firstDivider" 
            android:autoLink="web"
            />

        <View
            android:id="@+id/firstDivider"
            android:layout_width="match_parent"
            android:layout_height="2dp"
            android:layout_below="@+id/lblmessage1"
            android:background="@drawable/container_divider" />

        <TextView
            android:id="@+id/lblmessage2"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:layout_alignLeft="@+id/firstDivider"
            android:layout_below="@id/firstDivider"

            android:autoLink="web"
            />

                <View
            android:id="@+id/secondDivider"
            android:layout_width="match_parent"
            android:layout_height="2dp"
            android:layout_below="@id/lblmessage2"
            android:background="@drawable/container_divider" />

        <TextView
            android:id="@+id/lblmessage3"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:layout_alignLeft="@+id/secondDivider"
            android:layout_below="@id/secondDivider"
            android:textSize="5dp" />

         <View
            android:id="@+id/thirdDivider"
            android:layout_width="match_parent"
            android:layout_height="2dp"
            android:layout_below="@id/lblmessage3"
            android:background="@drawable/container_divider" />

        <TextView
            android:id="@+id/lblmessage4"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:layout_alignLeft="@+id/thirdDivider"
            android:layout_below="@id/thirdDivider"
            android:textSize="5dp" />

    </RelativeLayout>

</RelativeLayout> 
```

还是一样，这就是 style="@style/blackContainer" 有的

```
<style name="blackContainer" parent="@android:style/Widget.ListView.Menu">
        <item name="android:background">@drawable/container</item>                      
        <item name="android:divider">@drawable/container_divider</item>
        <item name="android:listSelector">@drawable/container_item_selector</item>
        <item name="android:layout_marginLeft">5dp</item>           
        <item name="android:layout_marginRight">5dp</item>
        <item name="android:focusable">false</item>
        <item name="android:paddingLeft">2dp</item>
        <item name="android:paddingRight">2dp</item>
        <item name="android:scrollbars">none</item>
        <item name="android:fastScrollEnabled">true</item>
    </style> 
```

和

@drawable/container_item_selector 是

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@android:color/transparent" />

</selector> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:54:24.900

如果您想禁用选择效果，只需将其添加到您的 Xml 文件中，在 ListView 部分：

```
android:listSelector="@android:color/transparent" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:14:27.440

现在我明白你的问题了。这是一部黑色电影，对吧？尝试这个。将此添加到您的`ListView`标签

```
android:cacheColorHint="#00000000" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:42:56.060

在java代码中你的布局（无论你想删除点击效果）然后设置`yourLayout.setOnClickListener(null);`这将解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:23:12.167

将以下行添加到您的 listView：

```
android:cacheColorHint="#00000000"
android:listSelector="@android:color/transparent" 
```

# android - 如何旋转位图的像素

> ID：10893533
> 
> 赞同：0
> 
> 时间：2012-06-05T07:50:31.293
> 
> 标签：android

我想在 Android 中将位图旋转 90 度。而且我不想获得新实例。有没有办法解决这个问题？我有一个想法：只需旋转位图的像素。但我做不到。

`temp = Bitmap.createBitmap(temp, 0, 0, w, h, matrix, false);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:46:27.363

这有效：

[http://warting.github.com/AndroidBitmapRotate/](http://warting.github.com/AndroidBitmapRotate/)

```
public class RotateBitmapActivity extends Activity {

    ImageView iv;
    private Bitmap bitmap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
        iv = (ImageView) findViewById(R.id.ImageView01);

        findViewById(R.id.left).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                rotate(-90F);
            }
        });

        findViewById(R.id.right).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                rotate(90F);
            }
        });
    }

    private void rotate(float degrees) {

        Matrix rotateMatrix = new Matrix();
        rotateMatrix.postRotate(degrees);

        bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), rotateMatrix, true);
        iv.setImageBitmap(bitmap);
    }
} 
```

# c# - 在服务中看不到我定制的 Windows 服务

> ID：10893535
> 
> 赞同：0
> 
> 时间：2012-06-05T07:50:53.587
> 
> 标签：c#, windows-services, c#-2.0

我目前正在使用 .NET 2.0 框架开发定制的 Windows 服务。我已经使用了 InstallerUtil.exe 并且它安装得很好（根据命令提示符的日志）。但是，问题是，我无法在 Windows 服务下找到它。我在我的 PC 上使用 4.0 框架运行了以前的定制服务，它运行得很好。请注意，我还没有在服务中添加任何代码。我只需要在安装后启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:33:19.897

我听说过 InstallUtil 存在这样的问题。

尝试使用命令行`sc`程序：

```
sc create "service name" binPath= "full path to service exe" start= auto 
```

只需注意命令行中的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:32:34.753

确保您已添加项目安装程序并遵循此链接上的指南：http: [//msdn.microsoft.com/en-us/library/zt39148a%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/zt39148a%28VS.80%29.aspx)

# c# - 无法使用 MVC3 Razor 访问属性

> ID：10893536
> 
> 赞同：0
> 
> 时间：2012-06-05T07:51:02.497
> 
> 标签：c#, javascript, asp.net, asp.net-mvc-3

我想访问该物业

```
public string gridHTML { get; set; } 
```

我在我的控制器中定义的。我正在尝试像这样使用 JavaScript、MVC3 Razor 访问此属性

```
$(document).ready(function() {

   var str = @Model.gridHTML ;
} 
```

但我收到上述变量未定义的错误。有谁能够帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:56:39.000

如果您正确传递了模型，那么以下应该可以工作，除非剃刀语法不在单独的`js`文件中

```
$(document).ready(function() {

   var str = '@:Model.gridHTML';
   console.log(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:17:12.983

塔尔哈，

在对 3nigma 问题的评论中，您做了一个有趣的注释：

```
does not contain a definition for 'gridHTML' and no extension method 'gridHTML' accepting a first argument of type 'System.Collections.Generic.IEnumerable 
```

你确定你正在将一个对象传递给你的视图吗？在我看来，您正在使用包含您的课程的可枚举列表。也许类和剃刀视图标题部分的粘贴可以进一步梳理您的问题。

# java - 如何在不通过生成将它们添加到包的情况下查看 javadocs？

> ID：10893537
> 
> 赞同：1
> 
> 时间：2012-06-05T07:51:08.807
> 
> 标签：java, eclipse, javadoc

我想在 Eclipse 3.7 中查看一些 javadocs。如果我使用“生成 javadocs”，则 javadocs 将添加到我的项目中的“docs”文件夹中。我宁愿只查看 javadocs，而不是将它们永久添加到我的项目中。有没有比生成和删除它们更优雅的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:12:40.287

您可以使用评论中提到的上述方法查看 Java Docs。如果您没有找到任何附加的文档，那么您可以附加源代码。为此，您可以指向您的 java 安装目录（即 src.zip）的源文件夹，以便 eclipse 会注意查看文档，而与您的项目无关。希望这可以帮助。

# actionscript-3 - as3 在文档类中自行预加载（内部）

> ID：10893538
> 
> 赞同：1
> 
> 时间：2012-06-05T07:51:08.887
> 
> 标签：actionscript-3, flash, preloader

我搜索了很多，除了基于时间线的预加载器或外部预加载器（加载外部 swfs）之外找不到任何东西。

我正在寻找预加载的文档类，它甚至为第一帧导出了库符号。

请指教。

我在文档类中也有私有变量，引用那些导出的剪辑。

```
public var menu:Menu;
public var brand:MovieClip;
public var container:MovieClip;
public var background:Background;
public var intro:Intro;
public var language:Language; 
```

加上在帧 1 上由 flash 本身导出的大量剪辑，例如 Combobox，（下面的屏幕截图）

![在此处输入图像描述](../Images/e5fa00f62a44e96cfd6738476125f16c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:04:37.337

您只需要使用`root.loaderInfo`'s`bytesTotal`和`bytesLoaded`属性。

当它们彼此相等时，您已经加载了 100% 的 SWF，您可以相应地管理接下来应该发生的事情。

样本：

```
package
{

    import flash.display.Sprite;
    import flash.events.Event;

    /**
     * Document class.
     */
    public class Document extends Sprite
    {

        // Constructor.
        public function Document()
        {
            addEventListener(Event.ENTER_FRAME, _loadStatus);
        }

        // Manage the current status of the preloader.
        private function _loadStatus(e:Event):void
        {
            if(loadPercent >= 1)
            {
                removeEventListener(Event.ENTER_FRAME, _loadStatus);

                beginApplication();
            }
        }

        // Load complete, being the application here.
        protected function beginApplication():void
        {
            trace("Loaded.");
        }

        // Returns a number representing current application load percentage.
        protected function get loadPercent():Number
        {
            return root.loaderInfo.bytesLoaded / root.loaderInfo.bytesTotal;
        }

    }

} 
```

我还必须注意，在第一帧导出所有库符号是个坏主意 - 您需要确保它们*不会*在第一帧导出。

奖励：将上述类作为实际文档类的基类，可以形成一个非常整洁的应用程序入口点（您开始编写应用程序的地方）：

```
public class MyDocument extends Document
{

    override protected function beginApplication():void
    {
        // Application has loaded.
        // Your initialize code here.
        //
        //
    }

} 
```

# amazon-web-services - 如何在 Amazon Web Services (AWS) 上安排 .Net 控制台应用程序？

> ID：10893541
> 
> 赞同：1
> 
> 时间：2012-06-05T07:51:15.897
> 
> 标签：amazon-web-services, scheduled-tasks

我对 AWS 完全陌生。

我们需要我们的控制台应用程序每天在 Amazon Web Services 上启动一次。有人知道在哪里可以找到有关如何完成的信息吗？AWS 是否提供任何类型的错误电子邮件报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:38:29.277

Amazon 无法直接为您托管和运行控制台应用程序。

自己做的基本步骤是：

1.  在 Amazon EC2 上设置 Windows 服务器实例。
2.  在新服务器上安装控制台应用程序。
3.  在任务计划程序中设置一个作业来运行您的控制台应用程序。

注意：您负责管理、更新和监控您在 EC2 服务器上的工作。亚马逊只是租给你一台服务器……仅此而已……

# c++ - 继承 - 在孩子中使用父母的读取方法

> ID：10893545
> 
> 赞同：0
> 
> 时间：2012-06-05T07:51:42.550
> 
> 标签：c++, inheritance, ifstream

我可以使用父`read()`函数读取名字和姓氏，然后让孩子`read()`读取中间名吗？或者我必须在孩子身上阅读第一，第二和中间？

编辑：第一个答案似乎有效，但是当我在 child using 中阅读时`strtok`，我得到了整行，而不仅仅是第三个字段。有没有办法解决它，或者我只需要将前两个字段读入虚拟变量，然后再读取第三个字段？

```
class Parent
{
protected:
  char first[80], last[80];

  virtual istream& read(istream &is) {
    char temp[80];
    char *f, *l;
    is >> temp;
    f = strtok(temp, ",");
    strcpy(first, f);
    l = strtok(NULL, ",");
    strcpy(last, l);
    return is;
  }

public:
  friend istream& operator>> (istream &is, Parent &parent) {
    return parent.read(is);
  }
};

class Child: public Parent
{
  char middle[80];

  istream& read(istream &is) {
    /*inherit first and last from parent*/
    char temp[80];
    char *m;
    is >> temp;
    m = strtok(temp, ",");
    strcpy(middle, m);
  }
};

in main()

Parent *object;
ifstream inf("filename.csv");
object = new Child();
inf >> *object; 
```

### 猫文件名.csv

```
George,Bush,Walker 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:55:46.163

在`read`子类的函数中，你可以像这样调用父`read`函数：

```
class Child : public Parent
{
    // ...

    std::istream &read(std::istream &is)
    {
        Parent::read(is);
        // Read some more
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:42:11.190

您不能从 Child 使用 Parent 的 read 函数，因为`Parent::read()`它会消耗完整的输入（您只能对字符串执行一次没有 NULL-ptr 的 strtok() ，因为它实际上替换了分隔符）。棘手的部分是 Child 必须从流的中间获取信息。

如果您声明一个`readName()`函数，您可以重用 Parent 的函数，但这不适用于`strtok()`. 我建议`std::istringstream`为此使用输入行（而不是使用 strtok）并`readName()`作为参数传递的地方。使用 strtok()，您可以执行 prepareRead()，在其中进行标记化，然后使用 strtok(NULL,",") 读取 readName() 函数，但这在很大程度上取决于函数内部的副作用。

未编译/测试/处理的错误案例，所以不要复制/粘贴这个给你的作业：

```
class Parent {
protected:
  std::string first, last;
  std::istringstream readLine(istream& is)
  {
    std::string line;
    std::getline(is, line);
    return std::istringstream(line);
  }
  std::string readName(std::istringstream& iss)
  {
    std::string name;
    std::getline(iss, name, ',');
    return name;
  }

  virtual istream& read(istream &is) 
  {
    std::istringstream iss = readLine(is);
    first = readFirstName(iss);
    last = readLastName(iss);
    return is;
  }
public:
  friend istream& operator>> (istream &is, Parent &parent) 
  {
    return parent.read(is);
  }
};

class Child : public Parent
{
private:
  std::string middle;
  virtual istream& read(istream &is) 
  {
    std::istringstream iss = readLine(is);
    first = readName(iss);
    middle = readName(iss)
    last = readName(iss);
    return is;
  }
}; 
```

请注意，您应该避免使用 strcpy，尤其是在输入时：您的程序将失败并且可以通过传递包含大于 80 个字符的名称的文件被黑客入侵，这可以通过使用 std::string 和 std::istringstream 来避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:02:51.167

1）不要将父方法声明为`virtual`并更改以下代码：

```
class Child: public Parent {
    char middle[80];
    istream& read(istream &is) {
    Parent::read(is);
    char temp[80];
    char *m;
    is >> temp;
    m = strtok(temp, ",");
    strcpy(middle, m); }
}; 
```

不使用`virtual`... 父方法将被隐藏。

*编辑：感谢[cppcoder](https://stackoverflow.com/users/806299/cppcoder)的关注。这是错误的。看下一个方法。*

2）或使用`using`声明，这是来自 C++ 标准的示例：

```
struct A {
    virtual void f();
};

struct B : virtual A {
    virtual void f();
};

struct C : B , virtual A {
    using A::f;
};

void foo() {
    C c;
    c.f(); // calls B::f, the final overrider
    c.C::f(); // calls A::f because of the using-declaration
} 
```

# hadoop - Hadoop MapReduce：两个值作为 Mapper-Reducer 中的键

> ID：10893549
> 
> 赞同：1
> 
> 时间：2012-06-05T07:52:10.710
> 
> 标签：hadoop, mapreduce

如何构建具有两个组件的密钥？原因是我有一个无向图。如果 A 和 B 通过通信关联（方向无关），则两个节点 A 和 B 之间存在边。这种通信有一个数字参数。所以我想要实现的是拥有一个将 A 和 B 组合在一起作为一个集合的密钥，以便从 A 到 B 和 B 到 A 的通信可以被认为是等效的，并且可以总结得到统计信息

说：

AB 5

巴 10

那么键在语义上应该是“A 或 B 一起”，因此包含 A 和 B 作为键的集合应该具有值 5+10=15。

wordcount 示例以特定单词为关键字。就我而言，我希望有一个包含两个组件的集合作为关键。在 map 和 reduce 阶段，只要 A 到 B 或 B 到 A 满足，我想求和。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:32:17.860

您需要自定义键，具有自己的比较规则。您通过在包含图形链接信息的类上实现 WritableComparable 来做到这一点。这是示例/解释： [https ://web.archive.org/web/20130729080313/http://developer.yahoo.com/hadoop/tutorial/module5.html](https://web.archive.org/web/20130729080313/http://developer.yahoo.com/hadoop/tutorial/module5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:48:47.103

除了大卫的（正确）答案之外：如果您的问题与图表有关，那么也请查看[http://incubator.apache.org/giraph/](http://incubator.apache.org/giraph/)。

# ruby-on-rails - 设计忘记密码不起作用

> ID：10893552
> 
> 赞同：3
> 
> 时间：2012-06-05T07:52:23.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我正在使用设计在 Rails 3 上进行身份验证。登录、注销、注册工作正常，但在忘记密码的情况下没有任何反应。当我点击忘记密码链接时，它需要我进行`http://localhost:3000/users/password/new`链接，在那里我会收到一个询问我的电子邮件地址的表格和一个向我发送重置密码说明按钮，但是当我点击该按钮时它需要我，`http://localhost:3000/users/sign_in`但我没有收到有关重置密码的邮件.

在控制台上，我可以看到以下内容：

```
Sent mail to nikitasalunkhe.3@gmail.com (968ms)
Date: Tue, 05 Jun 2012 13:14:22 +0530
From: please-change-me-at-config-initializers-devise@example.com
Reply-To: please-change-me-at-config-initializers-devise@example.com
To: nikitasalunkhe.3@gmail.com
Message-ID: <4fcdb8d6de776_dd624e71f0a78a7@user-G41MT-S2.mail>
Subject: Reset password instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Hello nikitasalunkhe.3@gmail.com!</p>

<p>Someone has requested a link to change your password, and you can do this through the link below.</p>

<p><a href="http://localhost:3000/users/password/edit?reset_password_token=gUB8L9nWNikjVJpnhbDW">Change my password</a></p>

<p>If you didn't request this, please ignore this email.</p>
<p>Your password won't change until you access the link above and create a new one.</p> 
```

但我在收件箱中看不到任何邮件。

以下是我的 config/initializer/devise.rb 文件的代码：

```
Devise.setup do |config| 
config.mailer_sender = "nikitasalunkhe.3@gmail.com"  
config.mailer = "Devise::Mailer" 
require 'devise/orm/active_record' 
config.case_insensitive_keys = [ :email ] 
config.stretches = 10 
config.use_salt_as_remember_token = true 
config.reset_password_keys = [ :email ] 
```

这是 development.rb 文件代码：

```
Alumnicell::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request.  This slows down response time but is perfect for development
  # since you don't have to restart the webserver when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_view.debug_rjs             = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin
    config.action_mailer.default_url_options = { :host => 'localhost:3000' }
end 
```

我应该做哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:30:23.537

还有另一种解决这个问题的方法是创建一个文件 **“config/initializer/setup_mail.rb”**

```
ActionMailer::Base.smtp_settings = {
    :address              => "smtp.gmail.com",
    :port                 => 587,
    :domain               => "googlemail.com",
    :user_name            => "ayushcshah@gmail.com",
    :password             => "secret_password",
    :authentication       => "plain",
    :enable_starttls_auto => true
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:02:07.103

您是否安装了本地邮件程序守护程序？我最好的解决方案是像这样使用 gmail smtp（使用您的设置）：

在 config/environments/development.rb ：

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => 'mondomaine.com',
  :user_name            => 'smtp@mondomaine.com',
  :password             => 'mypassword',
  :authentication       => 'plain',
  :enable_starttls_auto => true  } 
```

并删除您的行：

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

在生产模式下，您将拥有一个本地邮件服务器作为后缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T07:28:48.197

解决了这个问题...在我的 development.rb 文件中进行了一些更改，如下所示：

```
require 'tlsmail'    
Net::SMTP.enable_tls(OpenSSL::SSL::VERIFY_NONE)
config.action_mailer.delivery_method = :smtp

 config.action_mailer.smtp_settings = {
:enable_starttls_auto => true,
:address => "smtp.gmail.com",
:port => 587,
:tls                  => true,
:domain             => 'gmail.com', #you can also use google.com
:authentication     => :plain,

:user_name => "nikitasalunkhe.3@gmail.com",
:password => "seceret_password"
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T05:23:53.150

```
config.action_mailer.default_url_options = { :host => 'my@gmail.com' } 
```

而不是 localhost:3000，请尝试提供您的 gmail 帐户名称。

# python - TorCtl and Socksipy library raises exception in python

> ID：10893553
> 
> 赞同：2
> 
> 时间：2012-06-05T07:52:27.763
> 
> 标签：python, socks, tor

I'm writing a script in python.
My script uses urllib2 to read web pages.
I'm using [Socksipy](http://sourceforge.net/projects/socksipy/) to force urllib2 to use socks proxy (TOR).
My problem is after setting `socket.socket` TorCtl doesn't work and raises exception.
the code that doesn't work is (first `newTorId()` works and second fails!):

```
 newTorId()      #This works
  import socks
  import socket
  socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "localhost", 9050)
  socket.socket = socks.socksocket
  newTorId()     #this Fails! 
```

`newTorId` is defined as this:

```
from TorCtl import TorCtl
def newTorId():
    conn = TorCtl.connect(passphrase="test")
    conn.send_signal("NEWNYM") 
```

The exception is:

```
__init__() takes exactly 2 arguments (3 given)
Traceback (most recent call last):
  File "script.py", line 97, in <module>
    newTorId()
  File "script.py", line 27, in newTorId
    conn.send_signal("NEWNYM")
AttributeError: 'NoneType' object has no attribute 'send_signal' 
```

What is the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:13:02.007

It's your own code raising the exception, not the library. Particularly,

```
TorCtl.connect(passphrase="test") 
```

is returning `None` the second time, resulting in an error when you call `.send_signal` on the result.

I assume `newTorId()` is intended to request a new Tor identity. You should probably just call `TorCtl.Connection.send_signal(conn, "NEWNYM")` to get a new identity, rather than trying to create a new connection each time. See [Python - Controlling Tor](https://stackoverflow.com/questions/9911283/python-controlling-tor).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T10:43:49.667

As previously mentioned TorCtl's connect() method provides None if it fails to connect.

That aside, this question seems to come up pretty frequently ([1](https://stackoverflow.com/questions/17013707/how-can-i-change-my-tor-process-endpoint-in-stem), [2](https://stackoverflow.com/questions/16987518/how-to-request-new-tor-identity-in-terminal)) so I just added a [FAQ entry](https://stem.torproject.org/faq.html#how-do-i-request-a-new-identity-from-tor) for it. [TorCtl is deprecated](https://blog.torproject.org/blog/torctl-deprecation-and-stem-plans), so here's an example using [stem](https://stem.torproject.org/)...

```
from stem import Signal
from stem.control import Controller

with Controller.from_port(port = 9051) as controller:
  controller.authenticate()
  controller.signal(Signal.NEWNYM) 
```

# python - TimedRotatingFileHandler：仅在检测到旋转时间时记录

> ID：10893554
> 
> 赞同：0
> 
> 时间：2012-06-05T07:52:40.227
> 
> 标签：python

我有一个几乎每秒都会调用记录器的函数，但是，我只想在日志文件旋转前一小时记录信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:03:29.427

利用`logging.handlers.TimedRotatingFileHandler(filename, when='H', interval=1)`

# php - Facebook 签名请求获取 UID PHP

> ID：10893557
> 
> 赞同：0
> 
> 时间：2012-06-05T07:52:48.777
> 
> 标签：php, facebook-graph-api

```
require_once 'library/facebook/facebook.php';

$facebook = new Facebook(array(
'appId'  => 'appid',
'secret' => 'secret',
));

$signed_request = $_REQUEST["signed_request"];
list($encoded_sig, $payload) = explode('.', $signed_request, 2);
$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true); 
```

以上代码后如何获取UID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:57:43.487

您不需要为此包含 facebook api。就这一点，

```
$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
echo $data["user_id"]; 
```

这是`$data`数组中其他信息的完整列表。

```
{
  "algorithm": "HMAC-SHA256",
  "expires": 1317243600,
  "issued_at": 1317239909,
  "oauth_token": "<token>",
  "page": {
    "id": "<id>",
    "liked": false,
    "admin": true
  },
  "user": {
    "country": "in",
    "locale": "en_GB",
    "age": {
      "min": 21
    }
  },
  "user_id": "<user-id>"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:05:47.380

由于您使用的是php sdk，

你可以简单地说

```
$user = $facebook->getUser(); 
```

PHP sdk 将从 signed_request 中读取 uid。

或者

您可以通过此直接从签名请求中获取

```
$signed_request = $facebook->getSignedRequest();
$user = isset($signed_request['user_id']) ? $signed_request['user_id'] : ''; 
```

# dojo - dojo 有没有像 jQuery.extend 这样的深度混合？

> ID：10893558
> 
> 赞同：0
> 
> 时间：2012-06-05T07:52:48.927
> 
> 标签：dojo

我知道 jQuery 有深度混合，例如

```
var options = $.extend(true,target,object1,object2) 
```

,dojo 有吗？如果有如何使用？如果没有，我怎样才能获得相同的功能？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:31:20.360

他们有“lang.mixin”（[http://livedocs.dojotoolkit.org/dojo/_base/lang#mixin](http://livedocs.dojotoolkit.org/dojo/_base/lang#mixin)），但它并不是真正的等价物。

以下线程有更多信息： [http ://dojo-toolkit.33424.n3.nabble.com/Deep-dojo-mixin-td3986157.html](http://dojo-toolkit.33424.n3.nabble.com/Deep-dojo-mixin-td3986157.html)

肯本杰明花时间写了这个：

```
 mixinDeep: function(dest, source) { 
     //Recursively mix the properties of two objects 
     var empty = {}; 
     for (var name in source) { 
          if(!(name in dest) || (dest[name] !== source[name] && (!(name in empty) || empty[name] !== source[name]))){ 
               try { 
                    if ( source[name].constructor==Object ) { 
                         dest[name] = this.mixinDeep(dest[name], source[name]); 
                    } else { 
                         dest[name] = source[name]; 
                    }; 
               } catch(e) { 
                    // Property in destination object not set. Create it and set its value. 
                    dest[name] = source[name]; 
               }; 
          }; 
     } 
     return dest; 
} 
```

但是，它对数组有一些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T02:53:36.237

我最近遇到了同样的问题，并决定创建[Jake](https://github.com/smaye81/jake)，它只是一个移植 Dojo 不提供的 jQuery 函数的小文件。所以，现在我可以在我的 Dojo 应用程序中使用它（以及在我不能使用 jQuery 的任何其他情况下）。

随意使用它来加入您的项目。

目前支持：

*   延长
*   每个
*   抵消

# triggers - 如果作业因异常而失败，则在 15 分钟后重新触发quartz.net 触发器

> ID：10893559
> 
> 赞同：13
> 
> 时间：2012-06-05T07:53:04.790
> 
> 标签：triggers, quartz.net

如果作业引发异常，我已经搜索了有关如何在一定时间后重新触发作业的答案。我看不到任何简单的方法来做到这一点。

如果我这样设置触发器：

```
JobDetail job = new JobDetail("Download catalog", null, typeof(MyJob));
job .Durable = true;
Trigger trigger= TriggerUtils.MakeDailyTrigger(12, 0);
trigger.StartTimeUtc = DateTime.UtcNow;
trigger.Name = "trigger name";
scheduler.ScheduleJob(job , trigger); 
```

MyJob 看起来像这样：

```
public class MyJob : IJob
{
    public void Execute(JobExecutionContext context)
    {
        var service = new service();

        try
        {
            service.Download();
        }
        catch (Exception)
        {
            throw;
        }

    }
} 
```

如果 service.Download() 调用引发某种异常，如何在 15 分钟后触发重新触发/重新触发？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-07T13:47:51.737

实际上，没有必要像 LeftyX 描述的那样创建一个新的 JobDetail。您可以只安排一个从当前上下文连接到 JobDetail 的新触发器。

```
public void Execute(JobExecutionContext context) {
    try {
        // code
    } catch (Exception ex) {
        SimpleTriggerImpl retryTrigger = new SimpleTriggerImpl(Guid.NewGuid().ToString());      
        retryTrigger.Description = "RetryTrigger";
        retryTrigger.RepeatCount = 0;
        retryTrigger.JobKey = context.JobDetail.Key;   // connect trigger with current job      
        retryTrigger.StartTimeUtc = DateBuilder.NextGivenSecondDate(DateTime.Now, 30);  // Execute after 30 seconds from now
        context.Scheduler.ScheduleJob(retryTrigger);   // schedule the trigger

        JobExecutionException jex = new JobExecutionException(ex, false);
        throw jex;
    }
} 
```

这比创建新的 JobDetail 更不容易出错。希望有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-26T11:10:37.353

我认为正确的答案是使用 JobListener 重试工作，如下所述：http: [//thecodesaysitall.blogspot.cz/2012/03/quartz-candy-part-1.html](http://thecodesaysitall.blogspot.cz/2012/03/quartz-candy-part-1.html)。

在此解决方案中，您将重试逻辑与 Job 本身分开，因此可以重用。

如果您按照此处其他回复中的建议在作业中实施重试逻辑，则必须在每个作业中再次实施。

编辑：根据 Ramanpreet Singh 的说明，可以在[这里](https://blog.harveydelaney.com/quartz-job-exception-retrying/)找到更好的解决方案： [https ://blog.harveydelaney.com/quartz-job-exception-retrying/](https://blog.harveydelaney.com/quartz-job-exception-retrying/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-06T11:42:37.643

我认为您唯一的选择是捕获错误并告诉 Quartz.net 立即重新启动：

```
public class MyJob : IJob
{
    public void Execute(JobExecutionContext context)
    {
        var service = new service();

        try
        {
            service.Download();
        }
        catch (Exception ex)
        {
              JobExecutionException qe = new JobExecutionException(ex);
              qe.RefireImmediately = true;  // this job will refire immediately
              throw qe;  
        }
    }
} 
```

[你可以在这里](http://quartznet.sourceforge.net/apidoc/1.0/html/topic415.html)和[这里](http://quartznet.sourceforge.net/apidoc/1.0/html/topic431.html)找到一些信息。

**更新**：

我做了一些测试，似乎您可以在正在执行的作业中安排一个新的触发器。
你可以尝试这样的事情：

```
public class MyJob : IJob
{
    public void Execute(JobExecutionContext context)
    {
        var service = new service();

        try
        {
            service.Download();
        }
        catch (Exception ex)
        {
            JobExecutionException qe = new JobExecutionException(ex);
            // qe.RefireImmediately = true;  // this job will refire immediately
            // throw qe;  
            OnErrorScheduleJob(context);

        }
    }

    private void OnErrorScheduleJob(JobExecutionContext context)
    {
        var jobOnError = context.Scheduler.GetJobDetail("ONERRORJOB", "ERROR");
        if (jobOnError == null)
        {
        JobDetail job = new JobDetail("ONERRORJOB", "ERROR", typeof(MyJob));
        job.Durable = false;
        job.Volatile = false;
        job.RequestsRecovery = false;

        SimpleTrigger trigger = new SimpleTrigger("ONERRORTRIGGER",
                        "ERROR",
                        DateTime.UtcNow.AddMinutes(15),
                        null,
                        1,
                        TimeSpan.FromMinutes(100));

        context.Scheduler.ScheduleJob(job, trigger);     
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-16T12:57:27.470

```
// don't forget to use @PersistJobDataAfterExecution without it, the jobExecutionContext will reset the value of count.     

SimpleTriggerImpl retryTrigger = new SimpleTriggerImpl();
    retryTrigger.setName("jobname");
    retryTrigger.setRepeatCount(0);
    retryTrigger.setJobKey(jobExecutionContext.getJobDetail().getKey());
    final Calendar cal = getCalendarInstance();
    cal.add(Calendar.MINUTE, 1); //retry after one minute
    retryTrigger.setStartTime(cal.getTime());
    try {
        jobExecutionContext.getScheduler().scheduleJob(retryTrigger);   // schedule the trigger
    } catch (SchedulerException ex) {
        logger.error("something went wrong", ex); 
    }
    JobExecutionException e2 = new JobExecutionException("retrying...");
    e2.refireImmediately();
    throw e2; 
```

# java - 从 yaml 文件中检索嵌套的 Hashmap 数据

> ID：10893568
> 
> 赞同：1
> 
> 时间：2012-06-05T07:54:23.307
> 
> 标签：java, hashmap, yaml

我有以下 yaml 数据

```
networkLayerConfig: 
    eventMap: !!map
      !!int 100 : 
        !!int 1 : IDLING
        !!int 2 : ACCEPTING 
```

我使用 yamlbean 将此数据读取到以下类

```
class NetworkLayerConfig {
    private HashMap<Integer, Map<Integer, String>> eventMap;
} 
```

我试图访问每个键及其关联的值对。

如果我在 java 类本身中声明这些数据时尝试访问这些数据，例如

```
myHashMap = new HashMap<Integer, Map<Integer, String>>();
myHashMap.put(100, new HashMap<Integer, String>());
myHashMap.get(100).put(1, "IDLING");
myHashMap.get(100).put(2, "ACCEPTING"); 
```

使用以下代码

```
for (Map.Entry<Integer, String> oneMap : myHashMap.get(100).entrySet()) {
    System.out.println(oneMap.getKey());
    System.out.println(oneMap.getValue());
} 
```

因为我必须仅从 yaml 文件中读取值 100（即，在运行时），所以我不知道如何访问每个数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:58:50.207

我解决了这个问题以访问哈希图中的每个值

```
Iterator<?> iterator = myparentHashMap.entrySet().iterator();
        while (iterator.hasNext()) {
            Entry myEntry = (Entry) iterator.next();
            System.out.println(myEntry.getKey() + " : ");
            HashMap<Integer, String> childHashMaps = ((HashMap<Integer, String>) myEntry.getValue());
            System.out.println("{");
            for (Map.Entry<Integer, String> childHashMap : childHashMaps.entrySet()) {
                System.out.print(childHashMap.getKey() + " : ");
                System.out.println(childHashMap.getValue());
            }
            System.out.println("}");
        } 
```

# javascript - 权限对话框按钮标签是“转到应用程序”而不是“使用 Facebook 登录”

> ID：10893570
> 
> 赞同：1
> 
> 时间：2012-06-05T07:54:25.867
> 
> 标签：javascript, facebook, spring

我有一个带有“使用 Facebook 登录”按钮的页面。（我们使用Java+Spring Social）。如果用户单击此按钮，它会提交以下表单：/social/signin/facebook 权限对话框打开，但按钮上的标签是“转到应用程序”。我应该怎么做才能使这个标签成为“使用 Facebook 登录”而不是“转到应用程序”？我尝试了 display:popup 参数，但标签与它相同。

在另一个项目中，我们不使用 Spring Source。我们通过以下调用进行 Fb 登录：

```
FB.login(
  function(response) {
    if(response.authResponse) {
      window.location = ...
    } else {
      alert(accessDeniedMessage);                                                 
    }
},{scope : REQUIRED_PERMISSIONS}); 
```

在这种情况下，权限对话框中的按钮是“使用 Facebook 登录”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:39:59.997

请参阅：http: [//developers.facebook.com/blog/post/2012/03/02/enhanced-auth-dialog-and-updates-to-permissions/](http://developers.facebook.com/blog/post/2012/03/02/enhanced-auth-dialog-and-updates-to-permissions/)

> **新按钮文本**
> 
> 在增强的身份验证对话框中，按钮文本将是以下四种情况之一：“添加到 Facebook”、“使用 Facebook 登录”、“转到应用程序”或“玩游戏”。其中每一项都经过了广泛的测试，并表明更具体的行动号召可以帮助用户更好地理解身份验证过程。作为应用程序的第一个联系人，身份验证对话框展示出色的用户体验非常重要。
> 
> 请参阅我们的[Open Graph 文档](https://developers.facebook.com/docs/opengraph/authentication/)以了解有关权限和配置增强的身份验证对话框的更多信息。

# mysql - mysql将列转换为行

> ID：10893580
> 
> 赞同：2
> 
> 时间：2012-06-05T07:55:32.160
> 
> 标签：mysql

我有一个从多个表视图结构创建的视图

```
id     col1     col2     col3     col4

101     A     B     B     NULL

102     C     F     A     G 
```

依此类推（这是示例）

我想创建另一个看起来像的视图

```
ID     col_name     value

101     col1     A

101     col2     B

101     col3     B

101     col4     NULL

102     col1     C

102     col2     F

102     col3     A

102     col4     G 
```

等等

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T07:58:44.760

也许是这样的：

```
SELECT id,'col1' AS colName, col1 AS value FROM table1
UNION ALL
SELECT id,'col2' AS colName, col2 AS value FROM table1
UNION ALL
SELECT id,'col3' AS colName, col3 AS value FROM table1
UNION ALL
SELECT id,'col4' AS colName, col4 AS value FROM table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:57:55.303

```
CREATE VIEW foo
AS
SELECT id, 'col1' AS col_name, col1 as `Value`
UNION ALL
SELECT id, 'col2', col2
UNION ALL
SELECT id, 'col3', col3
UNION ALL
SELECT id, 'col4', col4; 
```

# apache-flex - 在运行时覆盖 channels-config.xml

> ID：10893581
> 
> 赞同：0
> 
> 时间：2012-06-05T07:55:34.400
> 
> 标签：apache-flex, flex4, flex-mobile, parsley

每当服务的 ip 更改时，我想动态修改 channels-config.xml。我提供了一个屏幕，使用户能够在运行时输入服务 ip，但我没有在任何设备上尝试过。这行得通吗？

注意：我使用 xml 配置的原因是使用 Parsley 框架...

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:43:32.620

您可以通过 ActionScript 执行此操作。不过，我认为这是不可能的，当应用程序使用配置引导时，因为必须设置新配置。

# google-maps - 查询Google MAP API Key

> ID：10893591
> 
> 赞同：0
> 
> 时间：2012-06-05T07:56:26.380
> 
> 标签：google-maps

我们在我们的应用程序中使用 Gmap API Key。

我们有基于网络的移动应用程序，用于在药店提供药物。在这个应用程序中，我们使用 Gmap 来显示药房之间的方向/路径。

1.  它显示 Sample Period 28 Days，是否意味着我们必须在 28 天后生成另一个 API Key。如果“是”，那么您能否指导我们获得解决方案。

2.  我为“允许所有引用者”生成的 API 密钥，你是否在域名级别限制 API 密钥的使用。

3.  在礼貌限制中可以生成多少个方向请求，如果超过了怎么办..

4.  我们可以在之前的 API Key 过期后生成新的 API Key。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:03:10.240

查看 Google 地图的使用条款 [https://developers.google.com/maps/documentation/javascript/usage](https://developers.google.com/maps/documentation/javascript/usage)

查询 1) 它显示 Sample Period 28 Days，是否意味着我们必须在 28 天后生成另一个 API Key。如果“是”，那么您能否指导我们获得解决方案。**强文本**

我认为您不必在 28 天后生成另一个密钥我使用相同密钥的时间要长得多

查询 3）在礼貌限制中可以生成多少个方向请求，如果超过了怎么办..

检查官方文档链接。

查询 4) 我们可以在之前的 API Key 过期后生成新的 API Key。

是的

# c++ - Windows 64 位结构大小因包含的数据类型而异？

> ID：10893600
> 
> 赞同：4
> 
> 时间：2012-06-05T07:57:25.277
> 
> 标签：c++, struct, sizeof, short

我有两个不同的数据结构，原则上它们应该具有相同的大小，我想知道为什么它们没有。

```
struct pix1 { 
    unsigned char r; 
    unsigned char g;
    unsigned char b; 
    unsigned char a; 
    unsigned char y[2]; 
 }; 

struct pix2 { 
    unsigned char r; 
    unsigned char g;
    unsigned char b; 
    unsigned char a; 
    unsigned short y; 
 }; 
```

然后，我将其中四个像素组合在一起，如下所示：

```
struct pix4 {
    pix1 pixels[4]; // or pix2 pixels[4]
    unsigned char mask;
}; 
```

...但事实证明，根据 sizeof(pix4)，这种分组的大小会发生变化，具体取决于我使用的是 pix1 还是 pix2。单个 sizeof(pix1) == sizeof(pix2)，所以我很困惑为什么将四重像素分组会改变大小。我很在意，因为用 short 编写程序比使用 2 个无符号字符更容易，但是每个像素要花费 0.25 个字节。

我不确定这个架构是否特定，因为我没有在其他类型的机器上测试过。可以对齐吗？这是我需要担心的事情，还是我可以继续进行简短的实施？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T08:08:30.790

结构的大小相同，但它们的对齐要求不同。

结构的对齐是其所有成员的最大对齐。对齐 1也是如此`pix1`，因为它只有字符，但`pix2`有来自短成员的对齐 2。then 的对齐`pix4`方式从`pixels`成员那里获取对齐方式，因此在第一种情况下为 1，在第二种情况下为 2。

现在，为了确保数组的所有成员都正确对齐，结构的大小向上舍入到其对齐的下一个倍数。在这两种情况下，大小`pixels`都是 24，但是有 1-byte `mask`。在第一种情况下，对齐是 1，所以 25 是它的倍数并且`sizeof(pix4)`是 25，但在第二种情况下，对齐是 2，所以`sizeof(pix4)`必须向上舍入到下一个偶数 26。

这在所有平台上都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:06:39.957

是的，它与对齐有关。编译器希望在[自然边界](http://www.intel.com/Assets/PDF/manual/253665.pdf)上对齐变量，因此 short 将是 16 位（2 字节）对齐的。因此，包含 short 的结构也将在 16 位边界上对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:05:27.103

在 Linux 32 位上也有同样的效果。

出于对齐原因，它与填充有关。

如果使用`struct pix1`，则只有字符，因此`struct pix4`可以保持原样。但如果你使用`struct pix2`，它包含一个简短的。因此，整个结构必须对齐，即使在 的数组中`struct pix4`，每个元素都对齐以干净访问`y`.

更详细：`strict pix4`具有 2 个元素的数组的形状如下：

```
 +-----     [0]     -----+++-----    [1]     -----+
First version:  rgbayyrgbayyrgbayyrgbayyMrgbayyrgbayyrgbayyrgbayyM
Second version: rgbayyrgbayyrgbayyrgbayyM rgbayyrgbayyrgbayyrgbayyM
                ---------25--------------+ <- +1 
```

为什么？因为`---`ed部分是25字节，是奇数。这对于第一个版本没有问题——第二个元素可以愉快地从一个奇数地址开始——但是对于第二个版本。yy 必须始终位于偶数（对齐）地址上，因此`struct pix4`为 26 个字节。

# scala - 如何在 Play 2 模板中访问嵌套模型的属性

> ID：10893602
> 
> 赞同：2
> 
> 时间：2012-06-05T07:57:26.853
> 
> 标签：scala, attributes, playframework, nested, playframework-2.0

我在 Play 2 项目中有这两个模型：

```
@Entity
public class Site extends Model{

    @Id
    public String adId;

    @Required
    public String name;

    @Required
    @OneToMany (cascade = CascadeType.ALL)
    public List<Room> rooms;
...
}//end of class 
```

和

```
@Entity
public class Room extends Model {

    @Id
    @Required
    public String adId;

    @Required 
    public String name;

    public List<Reservation> reservations = new ArrayList<Reservation>();

...
} 
```

当我在 view.scala.html 中使用此代码时

```
 var treeData = [                            
                    @for(site <- sites) {
                        {title: "@site.name", tooltip: "@site.adId",
                            children: [
                                @for(room <- site.rooms) {
                                    {title: "@room.name", tooltip: "@room.adId"},
                                }
                            ]
                        },
                    }
                ]; 
```

我无法`site.rooms` 访问如果我在服务器端测试它，则数据存在。

另一个奇怪的事情是我确实得到了`site.adId`，但`site.name`仍然是空的......

如果有人知道我做错了什么......

（对不起英语不好，这不是我的母语）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:17:24.550

您需要获取器才能在模板中/通过 scala 访问数据。至少那是为我解决的问题。我想我在[邮件列表](https://groups.google.com/d/msg/play-framework/sMBvXTYhluU/nyXoOM0-vxYJ)中找到了这些信息：

> 这个问题之前已经讨论过。如果要从 Scala 代码中使用 Ebean 延迟加载（或任何其他 Java 魔法），则必须使用私有字段和公共访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:50:32.930

或者在查询期间获取数据：`finder.fetch("rooms")query().findList()`

# android - 适用于 Android 的 RestTemplate 未正确将 json 转换为 postForObjects 方法的 http 请求

> ID：10893605
> 
> 赞同：0
> 
> 时间：2012-06-05T07:57:38.127
> 
> 标签：android, json, spring, gson, resttemplate

我正在尝试将 json 对象发布到 .net Web 服务：

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
answer[] answers = restTemplate.postForObject(url, new Gson().toJson(request), answer[].class); 
```

到目前为止，生成的 json 看起来不错：

```
{"request":1234} 
```

但是当在 restTemplate 的帮助下发送到 Web 服务时，http 请求的内容有点混乱：

```
"{\"request\":1234}" 
```

并且服务以错误代码 400 bad request 响应

**编辑：发现问题**

问题是我对对象进行了两次编码。RestTemplate 已经将对象编码为 json。

工作代码是：

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
answer[] answers = restTemplate.postForObject(url, request, answer[].class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:07:18.670

```
use this method to post json over the server

public String postData(String url, JSONObject obj) {
        // Create a new HttpClient and Post Header
        String InsertTransactionResult = null;
        HttpClient httpclient = new DefaultHttpClient();
        HttpParams myParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(myParams, 1000);
        HttpConnectionParams.setSoTimeout(myParams, 1000);

        try {

            HttpPost httppost = new HttpPost(url.toString());
            httppost.setHeader("Content-type", "application/json");
            StringEntity se = new StringEntity(obj.toString());
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            httppost.setEntity(se);

            HttpResponse response = httpclient.execute(httppost);
            Result = EntityUtils
                    .toString(response.getEntity());

        } catch (ClientProtocolException e) {

        } catch (IOException e) {
        }
        return Result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:40:43.307

无需使用 gson 对对象进行编码，因为 RestTemplate 已经这样做了

**正确的代码：**

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
answer[] answers = restTemplate.postForObject(url, request, answer[].class); 
```

# html - 如何从 html 表单中读取变量输出并在网页中使用它？

> ID：10893607
> 
> 赞同：1
> 
> 时间：2012-06-05T07:57:48.300
> 
> 标签：html, xml, forms

好的，我试图让这个工作 - 但似乎看不到路......

我想要做的是有一个表单要求索引，当我提交时它会读取一个 XML 文件（bowlist.xml）并给我匹配索引的数据。

这是整个代码：

```
 <!DOCTYPE html>
<html>
<body>

<form action="">
Bowl #: <input type="text" name="bowlidx" value="" /><br />
<input type="submit" value="Submit"  />
</form>

<script type="text/javascript">

var index = <%=Request.QueryString(bowlidx)%>

document.write('index is ' + index)

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","bowlist.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
  { 
    if(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue != index) continue;
        document.write("<tr><td>");
        document.write(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("code")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("image")[0].childNodes[0].nodeValue);
        document.write("</td></tr>");
  }
document.write("</table>");</script>

</body>
</html> 
```

我拿到表格，输入并提交索引，但什么也没发生。

我在哪里错了？

我应该补充一点，如果我在“if(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue != index)”行中输入现有索引，javascript 搜索确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:04:56.913

如果您在页面加载时需要这个（即在您单击提交按钮并重新加载页面之后），您可以使用一行服务器端代码在 javascript 中设置您的变量，如下所示：

```
index = <%=Request.QueryString("bowlidx")%> 
```

# r - 在 R 中存储 tic toc 值

> ID：10893611
> 
> 赞同：7
> 
> 时间：2012-06-05T07:57:55.630
> 
> 标签：r

我正在寻找一种将运行时间存储在 R 中的变量中的方法。在 MATLAB 中，可以执行以下操作：

> 抽动；
> ...
> x=toc;

然后将运行时间存储在变量 x 中。我尝试使用来自 MATLAB 包的 R 中的 tic() toc() 函数做同样的事情，但没有成功。此外，我也看不到如何使用 R 的 system.time() 函数来做到这一点。非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T10:28:15.820

更类似于`tic`并且`toc`有时更方便，例如循环中的状态消息：

```
start <- Sys.time ()
do.something ()
Sys.time () - start 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-05T08:06:38.850

使用内置`system.time`函数：

```
tm1 <- system.time(
{
  #your code here
}) 
```

或者，或者包中的`benchmark`函数`rbenchmark`：

```
tm2 <- benchmark(
{
  #your code here
}, replications=1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-15T11:44:58.377

或者您可以按照“tictoc”包中的说明进行操作。

```
tic("timer")
1+1
toc(log = TRUE, quiet = TRUE)
log.txt <- tic.log(format = TRUE)
tic.clearlog() 
```

然后将您的输出存储在 log.txt 中。如果您只想要以秒为单位的时间，您可以`unlist(log.txt)`将其作为字符串进行分析。

干杯，

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-23T16:22:19.443

tictoc包实现[了](http://jabiru.github.io/tictoc/)这个确切的功能，因此顺序或嵌套时序的时序存储在一个列表中并用于后续分析。

例如，要对循环的每次迭代进行计时并稍后分析结果，请使用该`log`功能。

```
library(tictoc)
tic.clearlog()
for (x in 1:10) {
    # passing x to tic() makes it a label at time of the matching toc() call.
    tic(x)
    Sys.sleep(1)
    # When log = TRUE, toc() pushes the measured timing to a list
    # quiet = TRUE prevents from printing the timing
    toc(log = TRUE, quiet = TRUE)
} 
```

获取`toc()`格式化文本的结果以进行打印。

```
log.txt <- tic.log(format = TRUE) 
```

以原始格式提取包含测量值的列表。

```
log.lst <- tic.log(format = FALSE) 
```

由于数据已经提取，请清除 tictoc 日志。

```
tic.clearlog() 
```

将列表元素转换为计时。列表的每个元素都有一个开始 ( `tic`) 和结束 ( `toc`) 时间戳。

```
timings <- unlist(lapply(log.lst, function(x) x$toc - x$tic)) 
```

计算平均循环时间。

```
mean(timings)
# [1] 1.001 
```

打印文本输出 - 请注意前缀是`x`.

```
writeLines(unlist(log.txt))
# 1: 1.002 sec elapsed
# 2: 1 sec elapsed
# 3: 1.002 sec elapsed
# 4: 1.001 sec elapsed
# 5: 1.001 sec elapsed
# 6: 1.001 sec elapsed
# 7: 1.001 sec elapsed
# 8: 1.001 sec elapsed
# 9: 1.001 sec elapsed
# 10: 1 sec elapsed 
```

# c# - 当 Key 和 Value 都重复时，应该采用什么包含 Key 和 Value 对的结构？

> ID：10893612
> 
> 赞同：0
> 
> 时间：2012-06-05T07:57:57.210
> 
> 标签：c#, dictionary, key-value

**当 Key 和 Value 都重复时，应该采用什么包含 Key 和 Value 对的结构？**

**场景：** 我以这种方式在 WPF 中生成匿名类型

```
var result = Enum.GetValues(typeof(Key)).Cast<Key>()
                 .Select(x => new {Key = x, Value = (int)x}); 
```

我尝试将其转换为 Dictionary 使用

```
.ToDictionary(Key => Key, Value => (int)Value); 
```

**或者**

```
.ToDictionary(Key => (int)Key, Value => Value); 
```

但是在这两种情况下，它都会给出一个例外，即**已经添加了具有相同密钥的项目。**这意味着在两种情况下都会重复键。

现在在这种情况下应该采用什么结构？我应该去`KeyValuepair<int, Key>[]`还是其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:59:32.490

就我个人而言，我会坚持使用一个`Dictionary<TKey, List<TValue>>`，但如果你想要一个更漂亮的界面，你可能想为此编写自己的`MultiMap`包装类。

当然，在这两种情况下都不能使用`ToDictionary`，因为它在内部使用现有的唯一键字典，但您可以编写自己的`ToMultiMap`扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:01:08.533

> 现在在这种情况下应该采用什么结构？

文档中非常明显和清楚地说明了 - 不是字典。

一个列表、一个数组等等，这完全取决于您的使用模式，而不是创建模式。正如你没有说你如何使用它 - 好吧 - 这个问题无法回答。

或者，您可以使用带有项目列表的字典 - 键是唯一的，指向值列表。同样，这取决于——你现在可能已经猜到了——关于你如何使用数据。

# javascript - 如何在 JavaScript 中将时间转换为十进制数？

> ID：10893613
> 
> 赞同：8
> 
> 时间：2012-06-05T07:57:57.430
> 
> 标签：javascript, datetime, pdf, time, acrobat

我懒得在每个月底填写我的工作时间表，所以我开始在我们的 PDF 表单中添加一些功能。Acrobat Pro 提供使用 JavaScript 进行高级计算，但我遇到了这个问题。

我有两个字段可以输入我开始/结束工作的时间。我想计算我的加班时间并将结果输出到第三个字段中。但是，我希望输出为十进制，所以当我加班半小时时，结果将是 0.5

示例：我的工作时间是 8.5 小时，我从 7.30 开始，在 16.00（下午 4 点）结束。

到目前为止我的代码：

```
var workTime = this.getField("Work time").value;
var startTime = this.getField("Start time").value;
var endTime = this.getField("End time").value;

event.value = workTime - (endTime - startTime); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T08:02:28.553

分开小时和分钟，将分钟除以`60`，再加上小时。

```
function timeStringToFloat(time) {
  var hoursMinutes = time.split(/[.:]/);
  var hours = parseInt(hoursMinutes[0], 10);
  var minutes = hoursMinutes[1] ? parseInt(hoursMinutes[1], 10) : 0;
  return hours + minutes / 60;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-01T08:41:08.513

就我而言，我用它来**计算发票上的时间**。

输入可以包含以下 6 种为用户编写它的方式：

*   1 -> 1 小时 0 分钟
*   1,2 -> 1 小时 12 分钟
*   1.5 -> 1 小时 30 分钟
*   1:30 -> 1 小时 30 分钟
*   1h40 -> 1 小时 40 分钟
*   45m -> 0 小时 45 分钟

所以我使用了这个（感谢 Amadan），这是工作代码：

```
function time2dec(tIn) {
    if(tIn == '') 
        return 0;
    if(tIn.indexOf('h') >= 0 || tIn.indexOf(':') >= 0)
        return hm2dec(tIn.split(/[h:]/));
    if(tIn.indexOf('m') >= 0)
        return hm2dec([0,tIn.replace('m','')]);
    if(tIn.indexOf(',') >= 0)
        return parseFloat(tIn.split(',').join('.')).toFixed(2);
    if(tIn.indexOf('.') >= 0)
        return parseFloat(tIn);
    return parseInt(tIn, 10);
}

function hm2dec(hoursMinutes) {
    var hours = parseInt(hoursMinutes[0], 10);
    var minutes = hoursMinutes[1] ? parseInt(hoursMinutes[1], 10) : 0;
    return (hours + minutes / 60).toFixed(2);
} 
```

使用示例（使用 jQuery）：

```
var qty = time2dec($('#qty').val());
var price = parseFloat($('#price').val());
var total = (qty * price).toFixed(2); 
```

希望它可以帮助我们中的一些人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T17:08:54.647

另一种方式 ;）

```
var aHours = 4.45;

var aHoursInMinutes = (Math.floor(aHours) * 60 )+ ((aHours - Math.floor(aHours)) * 100);
 // 285 minutes;

var afromMinutesToHours = 
(Math.floor(aHoursInMinutes /60) + ((aHoursInMinutes - (60* Math.floor(aHoursInMinutes /60)))/100));
 // 4.45 hours;

var bHours = 0.33;

var bHoursInMinutes = (Math.floor(bHours) * 60 )+ ((bHours - Math.floor(bHours)) * 100); // 33 minutes;

var bFromMinutesToHours = 
(Math.floor(bHoursInMinutes / 60) + (( bHoursInMinutes - (60 * Math.floor(bHoursInMinutes / 60)))/100)); // 0.33 hours;

var resultInMinutes = aHoursInMinutes + bHoursInMinutes;
var resultToHours = 
(Math.floor(resultInMinutes / 60) + (( resultInMinutes - (60 * Math.floor(resultInMinutes  / 60)))/100)); // 5.18 hours; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T01:36:23.703

作为替代方案，我很好奇这是否可以使用来完成`Date.parse`，并且可以。

以下代码返回与所选答案相同的值，但垃圾输入除外，在这种情况下它返回零。使用 1970 日期是因为那是 UNIX 时间零。

请注意，MDN 说，“在 ES5 之前不建议使用 Date.parse，字符串的解析完全取决于实现。”

```
var test = [undefined, null, "", "garbage", "0", "00:00", "  01:11", "3:44", "2:3", "5.06"];
var hours = 0;
var html = "<table>";

for (var i = 0; i < test.length; i++) {
  html += "<tr>";
  html += "<td>" + test[i] + "</td>";
  hours = timeStringToFloat(test[i]);
  html += "<td>" + hours + "</td>";
  hours = timeStringToNumber(test[i]);
  html += "<td>" + hours + "</td>";
  html += "<td>" + hoursToString(hours) + "</td>";
  html += "</tr>";
}
stdout.innerHTML = html;

function timeStringToNumber(time) {
  return ((new Date(("01 Jan 1970 " + time || "").replace(".", ":") + " GMT")) / 3600000) || 0;
}

function timeStringToFloat(time) {
  try {
    var hoursMinutes = time.split(/[.:]/);
    var hours = parseInt(hoursMinutes[0], 10);
    var minutes = hoursMinutes[1] ? parseInt(hoursMinutes[1], 10) : 0;
    return hours + minutes / 60;
  } catch (e) {
    return "ERROR";
  }
}

function hoursToString(hours) {
  var minutes = hours * 60;
  return (
    ("00" + Math.floor(minutes / 60)).slice(-2) +
    ":" +
    ("00" + Math.round(minutes % 60)).slice(-2)
  );
}
```

```
body {
  font-family: sans-serif;
  font-size: 12px;
}

h4 {
  color: white;
  background-color: steelblue;
  padding: 0.5em;
}

table {
  border-collapse: collapse;
}

table td {
  border: 1px solid gray;
  min-height: 1em;
}
```

```
<h4>Test Output:</h4>
Method A is the original and Method B the alternative.
<table>
  <thead>
    <tr>
      <th>String</th>
      <th>Method A</th>
      <th>Method B</th>
      <th>ToString</th>
    </tr>
  </thead>
  <tbody id="stdout"></tbody>
</table>
```

*

```
function timeStringToNumber( time ) 
{
    return ((new Date(("01 Jan 1970 " + time || "").replace(".",":") + " GMT")) / 3600000) || 0;
} 
```

# svn - 开发和维护 Magento 扩展

> ID：10893621
> 
> 赞同：1
> 
> 时间：2012-06-05T07:58:20.533
> 
> 标签：svn, magento, netbeans

我正在开发一些 Magento 扩展，然后我收到了一些与开发过程相关的通知。所以我只是从你们所有人那里寻找一些提示/技巧，以了解维护 Magento 扩展的最佳方式。

实际上，我使用 Netbeans、SVN 和 Ubuntu 作为我的主要开发环境。这是我应用的过程：

*   在 Netbeans 上创建/开发扩展
*   将扩展导出到其他目录，同时保留其完整路径*（如 app/etc. 或 skin/etc.）*
*   将此导出的文件复制到全新/干净的 magento 站点中进行测试
*   如果一切正常，我将这个导出的目录压缩为 .zip 或 .gz 文件。

## 所以这些是我的问题

1.  Netbeans 不允许同时导出多个文件，也不允许导出文件或目录的完整路径。所以我不得不手动创建目录和导出文件。遗憾的是文件无处不在*（例如，在 app/code/local、app/design/adminhtml、app/design/frontend、skin/adminhtml、skin/frontend 等）*。那么，**有没有更简单的方法可以通过一些鼠标点击来做到这一点？**
2.  在干净安装的 magento 站点上测试扩展。在这一步中，如果有错误，我会在这个测试站点上进行修改，然后在我的开发版本上手动重复这些更改。**有没有更简单的方法在旧版本或 Magento 上进行测试？**

如果你们中的一些人在这些问题上有过经验，请给我一些建议。

谢谢，

[团16](http://blog.veev.vn)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:11:06.603

看看 modman 脚本，它使管理 magento 模块变得更加容易：[https ://github.com/colinmollenhour](https://github.com/colinmollenhour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:27:51.293

我使用 Aptana + GIT + OSX。

首先，正如您所提到的，一些不同版本的干净 Magento 站点对我们的开发非常重要。因此，需要自动设置 Magento 站点 + 示例数据。

然后，我初始化一个 git 存储库并开始开发。（Aptana 完全支持 GIT）。

在这里，您将有两种选择将新开发的扩展分发到 Magento 站点。

*   制作指向magento站点的符号链接。完成后，每次修改只需要刷新浏览器即可。
*   编写脚本将代码复制到 Magento 目录。（我的选择）

以上所有事情都可以在终端中完成。

顺便说一句，您可以尝试 Magento 的单元测试。它更适合大型开发组。

# opencv - 从精明的边缘检测中提取线条

> ID：10893624
> 
> 赞同：8
> 
> 时间：2012-06-05T07:58:34.090
> 
> 标签：opencv, edge-detection

在应用精明边缘检测后的openCV中，我想进一步处理结果（仅显示水平线，删除短线等）。但精明的结果只是另一个形象。我想得到一组描述检测到的边缘的线

我知道著名的[Hough Line Transform](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)，但结果并不总是好的，这就是为什么我想手动处理精明的结果。输入：

![在此处输入图像描述](../Images/94f3939bcbbb0c1c054f5103695e8759.png)

仅输出精明：

![在此处输入图像描述](../Images/5049edd1e0ca76bf0e8e25bee656ae10.png)

输出精明然后霍夫线变换

![在此处输入图像描述](../Images/4e7417e0e32c717c25d928e0049c3ee9.png)

这是用于检测楼梯边缘的霍夫线变换结果（红线）。未正确检测到下方的第 4 行，尽管 canny edge 检测到边缘。

知道如何从精明的图像中提取边缘吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T18:00:55.597

您可以尝试一些事情来改善您的结果：

## 应用感兴趣区域

您的图像看起来有一些边界窗口效果。我用感兴趣的区域删除了它们，得到了一个看起来像这样的图像（我对其进行了调整，直到它看起来正确，但如果你使用某种内核运算符，它的窗口大小可能更好地定义了这个 ROI）：

![在此处输入图像描述](../Images/b0e04c74224c621df8be3e10c9ae48fd.png)

## 使用标准霍夫变换

您似乎也在使用概率霍夫变换。所以，你只得到线段而不是插值线。考虑使用标准变换来获得完整的理论线（rho，theta）。这样做我得到了如下所示的图像：

![在此处输入图像描述](../Images/98427b9d0be979208327be0c48c23882.png)

这是我用来生成这些行的代码片段（来自 Python 接口）：

```
(mu, sigma) = cv2.meanStdDev(stairs8u)
edges = cv2.Canny(stairs8u, mu - sigma, mu + sigma)
lines = cv2.HoughLines(edges, 1, pi / 180, 70) 
```

## 根据角度过滤线

您可以通过获取最常出现的线角度并丢弃异常值来过滤掉不良线。这应该将其缩小到最明显的步骤。

希望有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T05:38:21.553

我建议使用 LSWMS（使用加权均值位移进行线段检测）方法。其结果优于HT和PPHT。

请参阅 [http://marcosnietoblog.wordpress.com/2012/04/28/line-segment-detection-opencv-c-source-code](http://marcosnietoblog.wordpress.com/2012/04/28/line-segment-detection-opencv-c-source-code) 和 [http://www.youtube.com/watch?v=YYeX8IGOAxw](http://www.youtube.com/watch?v=YYeX8IGOAxw)

# pyramid - 如何获取金字塔中的 ini 数据？

> ID：10893628
> 
> 赞同：15
> 
> 时间：2012-06-05T07:59:02.547
> 
> 标签：pyramid, ini

金字塔项目中有一个 development.ini 或 production.ini。我在 ini 文件中添加自己的配置数据，例如：

```
[thrift]
host = 0.0.0.0
port = 8080 
```

我想在项目的一个 py 文件中使用配置数据。如何在没有请求对象的情况下获取数据？（我见过一个使用请求的解决方案。）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-05T10:28:39.317

您可以在`request.registry.settings`或访问设置`pyramid.threadlocal.get_current_registry().settings`。它的行为就像字典。

如果您想使用第二个，即在没有请求的情况下获取设置，我必须警告您。根据[文档](http://pyramid.readthedocs.org/en/latest/api/threadlocal.html)：

> 这个函数应该非常谨慎地使用，通常只在单元测试代码中使用。在测试上下文之外使用 get_current_registry 几乎总是一个错误，因为它的使用使得编写既不容易测试也不能编写脚本的代码成为可能。

任何需要访问设置的代码部分都是 Web 应用程序的一部分，并且应该访问请求，而不是一些神奇的全局访问。你可能认为你有充分的理由，但可能有更好的方法。如果您想讨论这个问题（如果它很复杂，可能会在另一个问题中讨论，因为一些代码会有所帮助），我很乐意帮助您找到一种干净的方法来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:04:01.633

每当我想知道如何在金字塔中做某事时，我通常会参考 github 上的金字塔示例之一。

[解析示例金字塔配置](https://github.com/invisibleroads/pyramid-examples/blob/master/auth/auth/__init__.py)

我不知道它们有多“火爆”，但它们通常工作得很好。在这里，它们就像`ConfigParser`您在任何 python 项目中一样使用来解析您的 .ini 文件

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-08-16T13:21:51.287

想想“蟒蛇”而不是“金字塔”。

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read('development.ini')
db_url = config.get('app:main', 'sqlalchemy.url') 
```

# php - 使用 zend 形式的 addMultioption 添加具有相同值但不同 Caption 的选项

> ID：10893640
> 
> 赞同：1
> 
> 时间：2012-06-05T08:00:37.570
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我正在使用 zend 表单元素创建一个选择框。现在我有一个要显示在选择框中的值列表，这些值可能具有相同的值但不同的标题。Zend 表单不会显示具有相同值的两个选项。我的代码如下：

```
$this->addMultiOption('','-- Select ****** --');
foreach($options as $option) {
    $this->addMultiOption($option->value,$option->caption);
} 
```

这里选项的值可以相同，如 1,2,3,4,1,2,6,7,8,2,3,2,1... 选项的标题不同，如 aaa,bbb,ccc, ddd,eee,fff

aaa 可以有值 1，bbb 也可以有值 1，在这种情况下它只会显示 bbb，依此类推。

有没有办法使这项工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:21:54.730

你可以在这里看到 addMultiOption 的实现。您会注意到它会将您的选项转换为字符串，然后强制其上的值，覆盖您发现的以前的值。

```
/**
 * Add an option
 *
 * @param  string $option
 * @param  string $value
 * @return Zend_Form_Element_Multi
 */
public function addMultiOption($option, $value = '')
{
    $option  = (string) $option;
    $this->_getMultiOptions();
    if (!$this->_translateOption($option, $value)) {
        $this->options[$option] = $value;
    }

    return $this;
} 
```

可能的解决方案可能是在选项中添加一个后缀，该后缀是您在分析时切断的随机字符串。您还可以创建不同的选项并使用映射数组对其进行映射。

```
<select>
    <option value="car">Car</option>
    <option value="toy">Toy</option>
<select> 
```

带数组

```
$mapping = array(
    'car' => 'car',
    'toy' => 'car'
);

$trueValue = $mapping[$formOption]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:21:26.773

这是我用于更改值的代码 - 稍后我将仅在 ZEND 控制器或其他地方评估字符串的第一部分。希望能帮助到你。

$StaffContractTypeData=array();//我要在select中的数据选项

```
 $options=array();//temp storage array
    $i=0;//iteration counter

    $fk_id_staff_contract_type->addMultiOption("","");//one empty option in my select 

    foreach($StaffContractTypeData as $v) {

        if(in_array($v["code"], $options)){//append the iterator value
            $fk_id_staff_contract_type->addMultiOption($v["code"].$i,$v["label"]);
        }else{
            $fk_id_staff_contract_type->addMultiOption($v["code"],$v["label"]);
            array_push($options, $v["code"]);
        }
        $i++;//change iterator value
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:32:11.040

正如 TDBishop 所建议的，我对代码做了一些小的改动。

```
$this->addMultiOption('','-- Select ****** --');
foreach($options as $option) {
    $this->addMultiOption($option->value."_".$option->caption,$option->caption);
} 
```

在这里，正如我之前提到的，标题总是不同的，所以即使“值”相同，在后缀中添加标题也会使每个新值都不同。现在在分析数据时，我可以使用explode 来解析这些值并利用它们。:)

# ruby-on-rails - 无法根据弹性搜索中的“缺失”字段过滤掉结果

> ID：10893643
> 
> 赞同：0
> 
> 时间：2012-06-05T08:00:52.433
> 
> 标签：ruby-on-rails, mongodb, mongoid, elasticsearch, tire

我在我的rails应用程序中使用轮胎0.4.2与elasticsearch交互（使用mongodb数据库和mongoid与mongdb交互）。我有一个帖子模型，其中嵌入了垃圾邮件文档。

post.rb

```
include Mongoid::Document
include Mongoid::Timestamps 

..
embeds one :spam, as: :spammable
... 
```

垃圾邮件.rb

```
include Mongoid::Document
include Mongoid::Timestamps
embedded_in :spammable, polymorphic: true
field :needs_approval, type: Boolean, default: false
field :is_spam, type: Time

has_and_belongs_to_many :request_spam_by, :class_name => "User"

field :request_spam, type: Boolean, default: false 
```

我想获取所有没有垃圾邮件文档的帖子：这是轮胎查询

```
Post.tire.search(:load => :true, page: self.page, per_page: Post::PER_PAGE) do |pf|
    pf.query{ |query| query.string self.search_text } unless search_text.blank?
    pf.filter(:missing, :field => 'spam')
    pf.filter(:term, :college_id => self.college.id)
    pf.filter(:term, :user_id => self.user.id)
    pf.filter(:missing, :field => 'spam' )
    pf.filter(:terms, :user_type => self.user_type) unless self.user_type.blank?
    pf.filter(:range, :created_at => {:gte => self.from_time}) unless self.from_time.blank?
    pf.filter(:range, :created_at => {:lte => self.to_time}) unless self.to_time.blank?
    pf.sort{|s| s.by :updated_at, self.sort_order}
end 
```

生成的弹性搜索查询：

```
curl -X GET "http://localhost:9200/development_posts/post/_search?     from=0&load=true&page=1&per_page=10&size=10&pretty=true" -d '{"sort":[{"updated_at":"desc"}],"filter":{"and":[{"missing":{"field":"spam"}},{"term":{"college_id":"4fb424a5addf32296f00013a"}},{"missing":{"field":"spam"}},{"range":{"created_at":{"gte":"2012-06-05T00:00:00+05:30"}}},{"range":{"created_at":{"lte":"2012-06-05T23:59:59+05:30"}}}]},"size":10,"from":0}' 
```

查询结果为我提供了存在垃圾邮件的文档，即使我只搜索缺少垃圾邮件文档的文档。我不知道我在做什么错误。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:05:00.000

您不能`missing`仅在对象级别上使用被索引的实际字段。

如果垃圾邮件对象中始终存在一个字段，那么您可以在“spam.always_there”上设置缺少的过滤器，这不是很好，但应该可以工作

```
 pf.filter(:or, [
    {:missing => { :field => 'spam.needs_approval'}},
    {:term => {'spam.needs_approval' => false}}]) 
```

应该选择该字段为假或缺失的文档（如果我没记错，默认情况下 null 和缺失是同一件事，所以要小心）

# c# - 什么是相当于 id 的 Monotouch/C# 在ObjectiveC中？

> ID：10893645
> 
> 赞同：1
> 
> 时间：2012-06-05T08:01:05.770
> 
> 标签：c#, binding, xamarin.ios

再会，

我有：

目标C：

```
- (void)addTarget:(id<GPUImageInput>)newTarget; 
```

C＃：

```
[BaseType (typeof(NSObject))]  
interface  GPUImageOutput{
    [Export ("addTarget")]
    void AddTarget(NSObject newTarget); //Suspected source of the error
} 
```

调用时导致“无法识别的选择器发送到实例”

```
stillCamera.AddTarget (filter); 
```

和

```
GPUImage.GPUImageOutput filter = new GPUImage.GPUImageSketchFilter (); 
```

而**StillCamera**的基本类型是**VideoCamera**，它具有基本类型**GPUImageOutput**。

**GPUImageSketchFilter**是一个**GPUImageSobelEdgeDetectionFilter**这是一个**GPUImageTwoPassFilter**这是一个**GPUImageFilter**这是一个**GPUImageOutput**这是一个**NSObject**同时**实现 GPUImageInput**。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:21:24.300

相当于

```
 // Objective-C 
 id<FOO> xxx; 
```

在 C# 中只是“Foo”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:27:34.163

我相信你错过了一个冒号：

```
[Export ("addTarget:")] 
```

# html - 边距：0px 自动 VS 边距：-50%

> ID：10893647
> 
> 赞同：3
> 
> 时间：2012-06-05T08:01:13.960
> 
> 标签：html, css, centering

我即将为一个新的小项目编写一些模板 - 我只是想知道一件事：

如果我希望我的整个页面内容位于一个居中的列内，并且 - 比如说 - 800px 宽度，那么通常的做法是这样的（至少，这是我一直这样做的方式）：

```
<html>
    <head>
        <style>
            body {
                text-align: center; /* IE6 */
            }

            #wrapper {
                margin: 0px auto;
                width: 800px;
                background-color: #eee; /* to see it better */
                text-align: left; /* IE6 */
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            ... content ...
        </div>
    </body>
</html> 
```

现在，还有另一种方法可以做完全相同的事情，但使用`margin: -50%;`（或固定值，在这种情况下`margin: 400px;`），如下所示：

```
<html>
    <head>
        <style>
            body {
                margin-left: 50%;
            }

            #wrapper {
                margin-left: -400px;
                width: 800px;
                background-color: #eee; /* to see it better */
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            ... content ...
        </div>
    </body>
</html> 
```

我的问题是 - 这两种方法中的一种是否比另一种有任何优势？还是缺点？是否有一个常见的“最佳解决方案”来使主列居中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T08:07:48.337

`margin:0 auto;`将确保元素两侧的空间相等。

`margin-left:50%;`是相对于父母的。例如，如果容器的宽度为 1000 像素，则子元素的左边距为 500 像素。但是，这不会使元素居中，它将左侧放置在中间 - 除非您像示例中那样在子元素上使用固定值破解它。

通常，当您处理与您的情况一样的包装器时，`margin:0 auto;`是最简单和最灵活的解决方案。在其他情况下，您可能会发现使用百分比或固定值更好（例如，当浮动内容时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:08:14.037

在这种情况下，我只使用第一种方法。

它更加灵活，因为如果我想更改主 div 的大小，或者如果我想支持其他设备，则需要的更改要少得多。

第二种方法是 hack，它是现代浏览器不需要的 hack。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T08:11:44.393

由于您为主体提供 50% 的边距以推动元素，并再次为包装器提供负边距以将其拉到前一个位置，因此此方法有效。但有时浏览器无法正确呈现它。[在这里看到问题。](https://stackoverflow.com/questions/3169558/ie-7-negative-margin-error)

# c# - 通过资源文件将本地化应用到 DisplayAttribute

> ID：10893650
> 
> 赞同：4
> 
> 时间：2012-06-05T08:01:25.913
> 
> 标签：c#, asp.net-mvc, variables, static, constants

我已经在 Visual Studio 中启动了一个默认的 MVC4 项目，

在我的模型中某处是这段代码

```
 public class LoginModel
 {
    [Required]
    [Display(Name ="Name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
  } 
```

我想把它改成这样，因为我想尝试本地化（它在另一个类中工作，但不是在这里）（用于本地化的字符串 = resx 文件）

```
public class LoginModel
 {
    [Required]
    [Display(Name =strings.UserName)]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = strings.Password)]
    public string Password { get; set; }

    [Display(Name = strings.RememberMe)]
    public bool RememberMe { get; set; }
  } 
```

错误是它必须是一个常量表达式，但是当我这样做时，我会得到类似“属性索引缺少访问器”的信息

我在这里想念什么？为什么我不能只为该死的东西分配一个字符串值？在 Java 中，这一切都容易得多。希望你能帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T10:16:32.560

您应该使用资源。在属性中，您只能设置不可变的值。

试试这个。

```
[Display(Name = "Remember me?", ResourceType = typeof(YourResourcesType))]
public bool RememberMe { get; set; } 
```

看看这个 [带有 DisplayAttribute 和自定义资源提供程序的 ASP.NET MVC 3 本地化](https://stackoverflow.com/questions/4872309/asp-net-mvc-3-localization-with-displayattribute-and-custom-resource-provider)

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-06-05T08:49:55.070

我认为你必须使用会话和视图状态，

使用会话访问[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

并使用 viewstate 访问[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# php - php。豆豆。在函数参数之前和之后添加空格

> ID：10893652
> 
> 赞同：0
> 
> 时间：2012-06-05T08:01:45.007
> 
> 标签：php, netbeans

我想为 PHP 配置 netbeans。如何让它在函数参数之前和之后自动放置空格：

```
myfunction($arg1) {... 
```

但是什么：

```
myfunction( $arg1 ) {... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:07:01.290

args 周围有空格很难看...无论如何，您可以在以下位置自定义格式选项：

> 工具 > 选项 > 编辑器 > 格式

在这里，您必须选择*PHP 语言*，并且可以自定义所有编码样式（不仅仅是*Tabs 和 Indents*）。

# mysql - Node.js连接mysql错误

> ID：10893654
> 
> 赞同：0
> 
> 时间：2012-06-05T08:01:52.187
> 
> 标签：mysql, node.js, connect

我有一个`con_mysql.js`包含以下内容的文件：

```
var client = require('mysql');
client.createClient({'host':'localhost','port':3306,'user':'root','password':'root'});
client.connect(); 
```

然后：

```
# node con_mysql.js

chris:db chris$ node my.js 

/Users/chris/node_modules/mysql/lib/client.js:40
  throw new Error('deprecated: connect() is now done automatically.');
        ^
Error: deprecated: connect() is now done automatically.
    at Client.connect (/Users/chris/node_modules/mysql/lib/client.js:40:9)
    at Object.<anonymous> (/Users/chris/jswork/nodejs/db/con_mysql.js:5:8)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

我该如何解决这个问题？

我已经安装了这样的mysql模块：

```
# npm install mysql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:10:34.633

> 不推荐使用：connect() 现在自动完成。

试试这个：

```
client.createClient({'host':'localhost','port':3306,'user':'root','password':'root'}); 
```

上面的错误表明它将自动连接。您不需要（而且显然不能）调用 connect() 函数。

# javascript - 使用 JSON 和 jQuery 显示 WordPress 之外的最新帖子

> ID：10893655
> 
> 赞同：0
> 
> 时间：2012-06-05T08:01:53.373
> 
> 标签：javascript, jquery, json, wordpress, blogs

我正在尝试使用 JSON 和 jQuery 显示 WordPress 之外的最新帖子

我遵循了这篇博文中给出的步骤。但对我不起作用。这是[博客文章](http://www.fldtrace.com/wordpress/display-latest-post-outside-of-wordpress-with-json-and-jquery) [链接](http://www.fldtrace.com/wordpress/display-latest-post-outside-of-wordpress-with-json-and-jquery)

我试过[**在这里**](http://jsfiddle.net/CA8Dy/)它不起作用

它显示未捕获的语法错误：`*Unexpected token < blog.rangde.org/api/get_recent_posts/?count=1&page=0&callback=jQuery17206551494831219316_1338883023819&_=1338883023833:3*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:33:59.437

您发布的链接中的示例不是跨站点请求。因此，您可能会遇到问题。[您必须将 JSONP 用于带有jQ​​uery AJAX](http://api.jquery.com/jQuery.ajax/)的跨站点请求。设置 crossDomain = true。

[此外，使用 CURL 和SimpleXML](http://php.net/manual/en/book.simplexml.php)并获取 RSS 提要，您可能会有更好的运气。

# jquery - JQuery - 延迟对象数组的 $.when 语法

> ID：10893668
> 
> 赞同：3
> 
> 时间：2012-06-05T08:03:06.783
> 
> 标签：jquery, syntax, deferred

这是我第一次使用`$.when`，我在语法上有困难。
我有类似于下面简化示例的代码。它有效（如果我在简化它时没有引起错误）。我的问题是我不知道`customerIds`数组将包含多少元素。

```
var customerIds = new [1, 2, 3];

$.when(
    getCustomerData(customerIds[0]),
    getCustomerData(customerIds[1]),
    getCustomerData(customerIds[2])
).then(function() {
    alert('success');
}).fail(function() {
    alert('error');
});

function getCustomerData(int id) {
    return new $.Deferred(function(defer) {
                    doSomeWork(id, defer);
    }).promise();       
} 
```

我想`$.when`按如下方式编写语句，但难以正确使用语法。

```
$.when(
    getCustomerDataCalls(customerIds),
).then(function() {
    alert('success');
}).fail(function() {
    alert('error');
}); 
```

其中`getCustomerDataCalls`实施为：

```
function getCustomerDataCalls(customerIds) {
    var dfds = [];

    for (var id in customerIds) {
        dfds.push(new $.Deferred(function(defer) {
                                    doSomeWork(id, defer);
                                 }).promise());     
    }

    return dfds;
} 
```

不幸的是，我的实现出了点问题，我无法弄清楚我哪里出错了。我最好的猜测是返回一个`Deferred`s数组时出了点问题

**更新：**
在 lanzz 提到我的人为示例已经返回一个 Deferred 之后，我更新了代码，我更新了我的示例以包含`doSomeWork`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T08:07:43.123

是的，我也偶然发现了这一点：`when`不容易允许传递一个数组。但是您可以使用它`apply`来达到预期的效果。

```
$.when.apply($, getCustomerDataCalls(customerIds)) 
```

# c# - 使用 C# 程序从 PC 麦克风获取音频

> ID：10893674
> 
> 赞同：3
> 
> 时间：2012-06-05T08:03:38.130
> 
> 标签：c#, audio, microphone

我需要使用 C# 程序从装有 Windows 7 的 PC 捕获音频。我需要得到所有频率直到 20 khz。你知道有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-04T15:25:29.160

只需尝试使用 winmm.dll api 功能。这是一个简单的例子。

```
 using System;
    using System.Runtime.InteropServices;
    using System.Threading;

    namespace MicrophoneTest
    {
        class Program
        {

            [DllImport("winmm.dll")]
            private static extern int mciSendString(string MciComando, string MciRetorno, int MciRetornoLeng, int CallBack);

            static void Main(string[] args)
            {
                //create Test alias
                mciSendString("open new type waveaudio alias Test", null, 0, 0);

                //start
                mciSendString("record Test", null, 0, 0);

                Thread.Sleep(3000);

                //pause
                mciSendString("pause Test", null, 0, 0);

                //save
                mciSendString("save Test " + "test.wav", null, 0, 0);
                mciSendString("close Test", null, 0, 0);

                //press any key
                Console.ReadKey();
            }
        }
    } 
```

函数签名[MSDN：mciSendString 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/dd757161(v=vs.85).aspx)。

命令列表[MSDN：命令字符串](https://msdn.microsoft.com/en-us/library/windows/desktop/dd797790(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:47:53.803

您可以查看 GitHub [https://github.com/naudio/NAudio](https://github.com/naudio/NAudio)上的 NAudio 库。

可以在这里找到一个使用 NAudio 录制麦克风输入的好项目[http://voicerecorder.codeplex.com/](http://voicerecorder.codeplex.com/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T08:45:21.700

我找到了一些可以帮助你的链接

访问[http://www.codeproject.com/Articles/2615/DirectShow-NET](http://www.codeproject.com/Articles/2615/DirectShow-NET)？或[http://www.codeproject.com/Articles/4889/A-full-duplex-audio-player-in-C-using-the-waveIn-w](http://www.codeproject.com/Articles/4889/A-full-duplex-audio-player-in-C-using-the-waveIn-w)？

或者您可以使用 Matalab 并使用 Liydos dll 将其与 .Net 链接

# vim - 为什么在 .vimrc 中设置 ts=4 不起作用？

> ID：10893676
> 
> 赞同：14
> 
> 时间：2012-06-05T08:03:47.667
> 
> 标签：vim

我有一个愚蠢的问题，但我被卡住了。我确实在我的 .vimrc 文件中设置了 set ts=4 ，但它看起来不起作用。打开一个新文件，制表符仍扩展为 3 个空格。在命令模式下，“set ts”得到一个“tabstop=3”。是否有像 .vimrc 这样覆盖我的 ts 的最终文件？

即使我在 vim 中输入 :set ts=4，当我输入 tab 时，它的长度也只有 3 个空格。

这是我的 .vimrc 中导致此烦人结果的可疑选项

```
set autoindent
set shiftwidth=4
set softtabstop=4
set backspace=2 
```

谢谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-05T08:10:24.697

试试这个：

```
:verbose set tabstop? 
```

在 vim 中，它会告诉你`tabstop`选项值的来源。

# css - Dark Liferay 主题 - 自定义合金弹出窗口

> ID：10893679
> 
> 赞同：1
> 
> 时间：2012-06-05T08:04:14.973
> 
> 标签：css, liferay, liferay-theme, alloy-ui

我开发了一个深色 Liferay 主题（深色背景，白色字体）。但是现在我遇到了一个问题，因为合金弹出窗口和叠加层很轻（白色背景，现在也是白色字体）。

有没有一种很好的方法来覆盖主题中的 AUI-* css 类？因为类不包含在 _unstyled 主题中。

还是只能为门户实例定制 AUI 类？

谢谢！

这是屏幕截图：

![截屏](../Images/929a1a10913b924851ba66697bdbeccf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:31:56.130

它在 _unstyled 中不可用，但在 _styled 中，查看 /portal-trunk/portal-web/docroot/html/themes/_styled/css 文件夹，您将获得 .aui 的所有 css。

您可以使用它并在您的 custom.css 中覆盖，因为您开发的主题的 custom.css 最终将被加载，因此它将优先加载。

希望这可以帮助。

# java - 从 Java 读取 CSV 文件

> ID：10893683
> 
> 赞同：-3
> 
> 时间：2012-06-05T08:04:33.217
> 
> 标签：java, file-io, csv

我有一个 csv 文件，包含多行和多列。让我们说

```
 Dates        Data1    data2
      19/07/1999      2        5
      18/06/1991      3        9 
```

给定一个列标题名称（比如 data2），我想提取与其对应的列。怎么做？

另外，给定一个特定的日期（比如 18/06/1991）和一个列标题名称，如何获取相应的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:07:54.240

使用[CVSReader](http://www.csvreader.com/java_csv_samples.php)（付费）或[OpenCSV](http://opencsv.sourceforge.net/)（免费）。两者都允许您读取 CVS 文件并处理分隔符、引号、多行值等问题。

在项目站点上有很多关于如何使用它[的示例。](http://opencsv.sourceforge.net/#how-to-read)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:08:08.457

看看[OpenCSV](http://opencsv.sourceforge.net/)。它应该能够做你需要的。看看[这里](http://opencsv.sourceforge.net/#how-to-read)开始。

> 什么是opencsv？
> 
> opencsv 是一个非常简单的 Java csv（逗号分隔值）解析器库。它的开发是因为我遇到的所有当前 csv 解析器都没有商业友好的许可证。

# java - 遍历地图中的列表

> ID：10893687
> 
> 赞同：3
> 
> 时间：2012-06-05T08:05:16.010
> 
> 标签：java, collections

迭代“非规范化”集合图的最佳方法是什么？

例如，我有以下地图：

```
Map<String, List<String>> relations; 
```

为了迭代每个键->每个值，我执行以下操作：

```
for (Entry<String,List<String>> e : relations.entries()) {
   for (String s : e.getValue()) {
       System.out.println(e.getKey() + " - " + s);
   }
} 
```

有没有一种优雅的方法可以用一些装饰器来解决它？

我希望能找到类似的东西：

```
for(Entry e : Collections.getDenormalizeEntriesFromMapOfCollection(myMap)) {
   System.out.println(e.getKey() + " - " + e.getValue());
} 
```

这将给出相同的结果，只是在第二种情况下，每个键 -> 集合项都有一个条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:41:21.573

我建议你看一下番石榴的`MultiMap`实现。它已经有这种迭代器：

要将 a 转换`Map<K, Collection<V>`为 a，`MultiMap<K, V>`您可以使用实用程序方法：

```
public static <K,V> Multimap<K,V> toMultiMap(Map<K,? extends Collection<V>> m) {

    LinkedListMultimap<K, V> multimap = LinkedListMultimap.create();

    for (Entry<K, ? extends Collection<V>> e : m.entrySet())
        multimap.putAll(e.getKey(), e.getValue());

    return multimap;
} 
```

* * *

用法：

```
public static void main(String[] args) {

    Map<String, List<Integer>> map = new HashMap<String, List<Integer>>();

    map.put("Hello", Arrays.asList(1, 2));
    map.put("World!", Arrays.asList(3));

    Multimap<String, Integer> multimap = toMultiMap(map);

    Iterator<Entry<String, Integer>> it = multimap.entries().iterator();

    while (it.hasNext())
        System.out.println(it.next());
} 
```

输出：

```
Hello=1
Hello=2
World=3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:42:02.527

没有比您用来迭代`Map<String, List<String>>`. 但是更优雅的做法是使用[Guava ListMultimap](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/ListMultimap.html)，它提供了`entries()`一种可以直接迭代的方法，无需嵌套循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:37:12.810

我认为 Eclipse 的调试器正是这样做的，您可以查看实现。否则，例如，您可以在实用程序类中编写一个辅助方法，因为据我所知，Collections 框架不支持此方法。

# winapi - libb64 C 例程正确使用

> ID：10893688
> 
> 赞同：2
> 
> 时间：2012-06-05T08:05:16.407
> 
> 标签：winapi, base64

我在[libb64](http://libb64.sourceforge.net/)中的 C 例程遇到问题，这是我的代码：

```
 base64_encodestate state;
    int outBufLen = 2 * nInBuf;
    *outBuf = new char[outBufLen];

    base64_init_encodestate(&state);
    int r1 = base64_encode_block(inBuf, nInBuf, *outBuf, &state);
    int r2 = base64_encode_blockend(*outBuf, &state);
    base64_init_encodestate(&state);
```

这将 = 放在开头，而不是结尾。

所以我尝试了这个：

```
 base64_encodestate state;
    int outBufLen = 2 * nInBuf;
    *outBuf = new char[outBufLen];

    base64_init_encodestate(&state);
    int r1 = base64_encode_block(inBuf, nInBuf, *outBuf, &state);
    int r2 = base64_encode_blockend(*outBuf+ r1, &state);
    base64_init_encodestate(&state);
```

这有效，但不适用于“大”（~800KB 文本）文件，然后它会完全跳过 end =。在这种情况下，base64_encode_blockend(code_out,state) 进入 case step_C where state->result = 0。我尝试使用 libb64 函数报告的大小将 b64 数据写入文件，但它错过了结尾或不偏不倚。我不确定。

我已经受够了。我的代码基于结构编码和解码。

还有谁知道是否有用于 base64 编码/解码的 Windows API？我没有使用任何 C++ 标准的东西，这就是我不使用结构的原因。

# qt - 从更新的 QBuffer 播放 Phonon VideoWidget

> ID：10893691
> 
> 赞同：1
> 
> 时间：2012-06-05T08:05:29.920
> 
> 标签：qt, phonon

我正在尝试创建一个视频播放器，它可以解密内存中的视频数据并播放它，而无需将解密的数据存储在硬盘上。我正在使用带有视频小部件和 QBuffer 的 Qt 框架。我解密视频的第一段并将其存储在 QBuffer 中并开始播放。这可行，但在调用 setCurrentSource 之后，写入 QBuffer 的所有数据都将被忽略。

我相信这与不同的后端有关。是否可以在 Qt (pyQt) 中直接从内存中实现播放，如果没有，还有其他选择吗？

```
QFile file ("/Users/user/video.mov");
file.open(QIODevice::ReadOnly);

QByteArray array1;
QByteArray array2;
QBuffer *playbackBuffer = new QBuffer();
playbackBuffer->open(QBuffer::ReadWrite);

array1 = file.read(10000000);
array2 = file.read(10000000);

playbackBuffer->write(array1);

videoMedia->setCurrentSource(playbackBuffer);
videoOutput->play();
playbackBuffer->write(array2); 
```

# r - 制作堆叠矩形而不是列的直方图

> ID：10893696
> 
> 赞同：3
> 
> 时间：2012-06-05T08:06:07.390
> 
> 标签：r

使用以下代码，我得到如下直方图

```
x <- rnorm(100)
hist(x,col="gray") 
```

我该怎么做才能将条形显示为堆叠的矩形（通过它们的轮廓可见，而不是填充颜色的变化）而不是统一的列？每个矩形代表一个频率，例如 1，尽管我希望能够通过一个参数来改变它。

![直方图](../Images/fc39c782bb297f8212ec67a887606cc1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:02:59.653

从[这个问题](https://stackoverflow.com/questions/9527802/is-it-possible-to-split-bars-in-barplot-with-r)的答案（h / t Vincent Zoonekynd）。

```
x <- rnorm(100)
hist(x,col="gray")
abline(h=seq(5,40,5),col="white") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:32:11.200

这是一个帮助您入门的函数（它实际上是`tkBrush`对包中函数的部分示例的修改`TeachingDemos`）：

```
 rechist <- function(x,...){
         tmp <- hist(x,plot=F)
         br <- tmp$breaks
         w <- as.numeric(cut(x,br,include.lowest=TRUE))
         sy <- unlist(lapply(tmp$counts,function(x)seq(length=x)))
         my <- max(sy)
         sy <- sy/my
         my <- 1/my
         sy <- sy[order(order(x))]
        plot.new()
        plot.window(xlim=range(br), ylim=c(0,1))
         rect(br[w], sy-my, br[w+1], sy, 
            border=TRUE, col='grey')
         rect(br[-length(br)], 0, br[-1], tmp$counts*my)
        axis(1)
     }

rechist( iris$Petal.Length ) 
```

# gcc - 如何使用 GNU ARM 工具链生成与位置无关的代码？

> ID：10893698
> 
> 赞同：1
> 
> 时间：2012-06-05T08:06:19.743
> 
> 标签：gcc, arm, cross-compiling, gcc4

我正在为我的项目使用 ARM ELF 工具链。我正在开发一个需要独立于位置的引导加载程序，因为它会在重置时自行从闪存重新定位到内存。我已经努力弄清楚如何使用 GNU ARM 工具链编译与位置无关的代码，但似乎无法使其工作。

我尝试对编译器使用 -fpic 和 -fpie 选项，对链接器使用 -pie 选项，但是当我使用这些选项时，编译器会抱怨没有为 .got 或 .plt 部分定义任何部分。我不确定这些部分应该放在哪里，即在 BSS 或 TEXT 中。在谷歌搜索后，我认为我应该只使用 -fpie 但我不确定。

有这方面经验的人可以帮助我。我正在使用 GNU ARM 4.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T10:55:30.083

您可以通过向其他汇编程序提供`-mapcs-reentrant`选项`arm-linux-gnueabi-gcc`和选项来生成与位置无关的代码 [PIC] 。`-Wa,-K`喜欢：

```
arm-linux-gnueabi-gcc <other option> -mapcs-reentrant -Wa, -K <other option> files.. 
```

# java - 如何将 Eclipse Java 项目移植到另一台 PC 并从 Shell 编译它？

> ID：10893703
> 
> 赞同：2
> 
> 时间：2012-06-05T08:06:30.843
> 
> 标签：java, eclipse

我在 Eclipse 中创建了一个 Java 项目，并在我的 Windows PC 上直接从 Eclipse 成功执行了它。现在我必须在 Linux 服务器上运行相同的 java 程序。

我试图将 .class 文件从我的 PC 复制到服务器并运行它，但它不起作用。之后我复制了整个项目并从 shell 运行 javac MyProject.java 并返回以下错误：

```
RecordImportBatch.java:2: error: package org.apache.commons.io does not exist
import org.apache.commons.io.FileUtils;

...

RecordImportBatch.java:3: error: package org.neo4j.graphdb does not exist
import org.neo4j.graphdb.RelationshipType; 
```

我猜这是因为我没有在编译命令中包含 jar 文件。

这个项目中包含许多 jar 文件，作为一个 Java 新手，到目前为止，我还没有找到从 Shell 编译在 Eclipse 中工作的项目的方法。

有谁知道是否有办法直接从 Eclipse 获取适当的编译命令并将其粘贴到 Shell，还是我必须“手动”包含所有 jar？如果是这种情况，有谁知道如何包含所有 jar，放在与 MyProject.java 位于同一文件夹中的 lib 目录中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:24:00.097

如果你只是学习java，这个建议可能会有些挑战，但你最好使用[maven](http://maven.apache.org)来构建你的项目，这需要重新组织你的源文件和目录。然后使用[程序集](http://maven.apache.org/plugins/maven-assembly-plugin/)插件创建一个包含所有依赖项的 zip。然后运行您的程序，您只需执行以下操作：

```
unzip myapp.zip
cd myapp
java -cp "lib/*" com.blah.MyApp 
```

（您可能需要调整 /* 部分的语法，使用单引号或删除引号，具体取决于您的 shell）

这是汇编插件的一个片段（通用......除了版本和遵循约定的路径之外没有任何硬编码）。这在 pom.xml 中：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <descriptors>
            <descriptor>src/main/assembly/distribution.xml</descriptor>
        </descriptors>
        <appendAssemblyId>false</appendAssemblyId>
    </configuration>
    <executions>
        <execution>
            <id>make-assembly</id>
            <!-- this is used for inheritance merges -->
            <phase>package</phase>
            <!-- append to the packaging phase. -->
            <goals>
                <goal>single</goal>
                <!-- goals == mojos -->
            </goals>
        </execution>
    </executions>
</plugin> 
```

这是一个示例程序集文件（相对于 pom.xml，它位于 src/main/assembly/distribution.xml 中）：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd"
>
    <id>${artifact.version}</id>
    <formats>
        <format>zip</format>
    </formats>

    <files>
        <file>
            <!-- an example script instead of using "java -cp ..." each time -->
            <source>${project.basedir}/src/main/bin/run.sh</source>
            <outputDirectory>.</outputDirectory>
            <destName>run.sh</destName>
            <fileMode>0754</fileMode>
        </file>
    </files>

    <fileSets>
        <fileSet>
            <directory>${project.basedir}/src/main/resources/</directory>
            <outputDirectory>/res/</outputDirectory>
            <includes>
                <!-- just examples... -->
                <include>*.sql</include>
                <include>*.properties</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>config/</directory>
            <outputDirectory>/config/</outputDirectory>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <outputDirectory>/lib</outputDirectory>
            <excludes>
                <!-- add redundant/useless files here -->
            </excludes>
        </dependencySet>
    </dependencySets>
</assembly> 
```

此外，eclipse 在 gui 中有一个“jar packager”实用程序，但几年前我使用它时发现它不是很好。而且我认为它不处理依赖项，因此您需要使用上面的“-cp”参数，并添加所有 jar，或者自己将它们放入您的 lib 目录中。

还有这个[http://fjep.sourceforge.net/](http://fjep.sourceforge.net/)但我从未使用过它....我现在在快速查找 eclipse jar 打包器时才找到它。在他的教程中，他的最后一行（显示正在运行）如下所示：

```
> java -jar demorun_fat.jar
Hello 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:17:01.667

如果你需要做的是在你的电脑上用Eclipse编译并运行你的程序并将编译结果传输到Linux机器上，然后使用File -> Export -> Java -> Runnable Jar文件并选择最适合的打包为你。

技术上最简单的方法是使用“将所需的库复制到 jar 旁边的子文件夹中”，但是您需要通过将文件压缩在一起来分发，然后在 Linux 机器上解压缩它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T08:52:38.410

我强烈建议使用任何类型的构建工具，*事实上*的标准是[Ant](http://www.vogella.com/articles/ApacheAnt/article.html)或[Maven](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)，但您可以找到[几个替代方案](http://en.wikipedia.org/wiki/List_of_build_automation_software)。对于较小的项目，它们都非常简单，使用它们也是小菜一碟（注意 Eclipse 也可以为您生成一个基本的 Ant`build.xml`文件）。

例如，它可能是运行整个项目的一个命令：

```
> ant run
Buildfile: build.xml

clean:

compile:
    [mkdir] Created dir: ...
    [javac] Compiling N source file to ...

run:
     [java] Running application...

main:

BUILD SUCCESSFUL 
```

# sencha-touch - 如何使用 Sencha App 中的相机拍照？

> ID：10893707
> 
> 赞同：1
> 
> 时间：2012-06-05T08:06:47.407
> 
> 标签：sencha-touch, sencha-touch-2

我正在尝试使用 Sencha Touch 2 中的相机拍照。这里我有一个按钮“拍照”，当我按下它时，相机应该启动。由于我是这个 sencha touch 2 的新手，我无法弄清楚，如何做到这一点？为此，我使用了以下代码：

[煎茶小提琴链接](http://www.senchafiddle.com/#qlH6u)

请帮我。我不想使用电话间隙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:28:59.327

您必须在根目录中添加 Sencha Library 的设备文件夹，并在其中添加以下代码

```
Ext.require('Ext.device.Camera'); 
```

并使用此代码使用相机捕获图像

```
Ext.device.Camera.capture({
            success: function(image) {
                imageView.setSrc(image);
            },
            quality: 75,
            width: 200,
            height: 200,
            destination: 'data'
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:09:09.640

如果你想使用纯粹的煎茶，那么你可以检查这个代码：

```
 xtype: 'button',
            handler: function(button, event) {
                Ext.device.Camera.capture({
                    source: 'camera',
                    destination: 'data',

                    success: function(imagedata) {

                        var img = Ext.getCmp('theimage');
                        img.setSrc('data:image/jpeg;base64,' +imagedata);
                    },

                    failure: function() {
                        Ext.Msg.alert('Error', 'There was an error when acquiring the picture.');
                    },
                    scope: this
                }); 
```

但是如果你想使用 phonegap 相机功能，可能你必须更改代码。由于 sencha 提供了处理相机的默认功能，我不希望使用 phonegap。希望它会有所帮助..

# scala - 检测 scala 对象中的内部对象

> ID：10893712
> 
> 赞同：8
> 
> 时间：2012-06-05T08:07:16.900
> 
> 标签：scala, object, reflection

我想获取一个 scala 对象的内部对象列表。示例代码：

```
object Outer {
  val v = "-"
  def d = "-"
  object O1
  object O2
}

object Main {
  def main(args: Array[String]) {
    Outer.getClass.getDeclaredMethods.map(_.getName) foreach println  // prints d and v
    // Outer.getClass.get ... Objects???
  }
} 
```

我可以找到 v 和 d，但我怎样才能找到 O1 和 O2 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:11:26.667

使用 Scala 2.10（自里程碑 4 起）中的新反射库，可以获得内部对象：

```
scala> import scala.reflect.runtime.{universe => u}
import scala.reflect.runtime.{universe=>u}

scala> val outer = u.typeOf[Outer.type]
outer: reflect.runtime.universe.Type = Outer.type

scala> val objects = outer.declarations.filter(_.isModule).toList
objects: List[reflect.runtime.universe.Symbol] = List(object O1, object O2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:17:33.483

Object`O1`和`O2`是嵌套类，不是`Outer`Object 的一部分。

```
 println(Outer.O1.getClass.getName) //Outer$O1$
    println(Outer.getClass.getName)    //Outer$
    println(Outer.O2.getClass.getName) //Outer$O2$ 
```

# java - 在可以与父线程通信的新线程上调度任务

> ID：10893716
> 
> 赞同：1
> 
> 时间：2012-06-05T08:07:40.917
> 
> 标签：java, concurrency, message-passing

我想在一个新线程上调度一个任务，并且我希望这个任务在其执行的各个阶段通知父线程。如下所示：

```
void unzip(Path source, Path destination, ObserverThread observer) {
  int n = compute number of entries;
  observer.notify("n: " + n);
  while (there are more entries) {
    observer.notify("Unzipping " + name of entry);
    unzip the entry;
  }
  observer.notify("done");
} 
```

这个用例的标准库解决方案是什么？（我想外部依赖。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:57:34.877

一种可能的方法是使用[sorts 的阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)。父级将定期[`poll`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#poll%28long,%20java.util.concurrent.TimeUnit%29)或[`peek`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html#peek%28%29)在队列中接收新消息（穿插在它所做的任何事情中，比如监听事件等）

“子”线程将简单地将[`add`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html#add%28E%29)其消息发送到队列，假设父线程及时删除它们。

我在这里假设父线程和子线程必须并行运行，即父线程在子线程到达新消息之前阻塞是不可行的：无论如何，在这种情况下拥有一个单独的子线程有什么意义。

使用阻塞队列可以确保即使子进程生成消息的速度比父进程消耗消息的速度快，内存使用量仍然是有限的，并且子进程必须在某个时间点等待，直到父进程最终设法腾出空间再次排队。

另一种方法是在父级无法足够快地使用它们时开始丢弃消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:52:11.807

如果您在 Swing 中使用它，那么您应该使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)（Java 的一部分）。有一个关于[如何](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/interim.html)在后台工作时发布中期结果的示例。

如果您不使用 Swing，则标准 java 带有[Executors](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)类。您可以创建一个单线程[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)并将您的 Runnable 提交给它。它不提供发布正在进行的结果的方法，但您仍然可以手动执行回调，就像您在示例中显示的那样。

# excel - Excel：-保持图表和手绘线的相对位置

> ID：10893725
> 
> 赞同：1
> 
> 时间：2012-06-05T08:08:00.243
> 
> 标签：excel, ms-office, excel-2007, excel-2003, office-2007

我在 Excel 中有一个股票图表。
某些高点和低点通过手动绘制一条线（从绘图工具栏）连接。
当我更改数据范围或调整图表大小时，线条显然保持在原来的位置。
图表中的条形会调整大小。

有什么方法可以保持图表和手绘线的相对位置？
也许，将图表中的条形与手工绘制的线条合并？

谢谢，

维内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:59:55.130

我找到了相同的解决方案。

[http://www.excelforum.com/excel-charting/835738-grouping-chart-and-lines.html?p=2812431](http://www.excelforum.com/excel-charting/835738-grouping-chart-and-lines.html?p=2812431)

-- 维内特

# java - 登录后如何正确注销 Java EE 6 Web 应用程序

> ID：10893727
> 
> 赞同：20
> 
> 时间：2012-06-05T08:08:08.647
> 
> 标签：java, security, jakarta-ee, servlets, logout

一个很简单的要求。登录到 Web J2EE 6 应用程序后，如何让用户再次注销？

我见过的大多数（全部？）书籍和教程都展示了如何向他们的应用程序添加登录/登录错误页面，并使用“j_security_check”方法演示安全主体/角色/领域等的使用——一切都很好。但是目前还不清楚如何赋予用户注销的权力。确实，我如何在会话超时等之后强制注销？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-05T08:16:52.940

您应该`logout servlet/jsp`使用以下方式使会话无效：

*   在 Servlet 3.0 之前，使用`session.invalidate() method`which 也会使会话无效。
*   Servlet 3.0 提供了一种 API 方法`HttpServletRequest.logout()`，它只使安全上下文无效并且会话仍然存在。

而且，应用程序 UI 应该提供一个链接来调用它`logout servlet/jsp`

**问题：**确实，我如何在会话超时等之后强制注销？

**答：** web.xml 中的`<session-timeout>`内容允许您定义超时值，在此之后会话将被服务器无效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T08:19:05.780

您可以使用[`logout()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#logout%28%29)-Method 以编程方式进行[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)。也有相应的使用用户名和密码登录的方法。这些方法已添加到 Servlet 3.0 中，因此它们在 Java EE 6 中可用。

超时是一种不同的野兽，可以`web.xml`按如下方式指定：

```
<session-config>
  <session-timeout>30</session-timeout> 
</session-config> 
```

时间单位是分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T00:31:09.847

两步过程 -

1.创建注销页面
2.使用注销方法创建会话bean

**步骤 A：注销页面**

```
<div class="mytext">
    <p>Hello #{userSession.username}, </p>
    <p><h:outputText value="It doesn't seem you're logged in anyway..." rendered="#{!userSession.userLoggedIn}" /></p>
</div>
    <h:form class="mytext" rendered="#{userSession.userLoggedIn}" >
        <h:panelGrid columns="2"  >
            <h:outputLabel value="Do you want to logout?" for="logout"  />
            <p:commandButton value="Logout" id="logout" action="#{userSession.logout}" />                                      
        </h:panelGrid>
    </h:form> 
```

**步骤 B：会话 Bean 支持代码（片段）**

```
public String logout() {
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
    session.invalidate();
    return "/index?faces-redirect=true";
}

public boolean isUserLoggedIn() {
    String user = this.getUsername();
    boolean result = !((user == null)|| user.isEmpty());
    return result;
}

/** Get the login username if it exists */
public String getUsername() {
    String user = FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();
    return user;
} 
```

# msp430 - MSP430 RTC 校准问题

> ID：10893730
> 
> 赞同：0
> 
> 时间：2012-06-05T08:08:23.187
> 
> 标签：msp430, iar

我正在使用带有 IAR EW 5.10 的 MSP430F5418。

我正在尝试以 1Hz 的频率从 MSP 的第 29 引脚输出 RTCCLK 信号。

当我输出信号时，它是通过端口来的。

但在我重写 RTC 时间后，信号停止了。

我试图重新启用它，但它没有奏效。

谁能告诉我是什么原因？？

我正在使用 TI 提供的解决方法代码来设置 RTC 时间。

我的 RTC 配置是：

```
RTCCTL01 |= RTCHOLD; 
RTCCTL01 |= RTCMODE + RTCTEV_0 + RTCRDYIE + RTCTEVIE; 
P2DIR |= BIT4; P2SEL |= BIT4; 
RTCCTL23 = RTCCALF1 | RTCCAL0;
RTCCTL01 &= ~(RTCHOLD); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:24:03.413

RTC 校准取决于预标量定时器的输出

# macos - PHP VCALENDAR 在 MAC Outlook 中不起作用

> ID：10893731
> 
> 赞同：0
> 
> 时间：2012-06-05T08:08:28.560
> 
> 标签：macos, vcalendar

Vcalendar 在 Windows Outlook 中运行良好，但在 MAC Outlook 中无法运行。当我通过电子邮件收到预约时，它显示以下消息：

```
charset="UTF-8"
Content-Transfer-Encoding: 7bit

BEGIN:VCALENDAR
VERSION:2.0
METHOD:REQUEST
BEGIN:VEVENT
UID:UID:20120605T112338-532614004-testing
DTSTAMP:20120605T112338
DTSTART:20120605T112338
SUMMARY: Appointment testing
DESCRIPTION: Test appointment
END:VEVENT
END:VCALENDAR 
```

这是我用于创建约会的代码：

```
 $myUID="UID:".date('Ymd').'T'.date('His')."-".rand()."-test".$eol; // required by Outlok
        $message="BEGIN:VCALENDAR".$eol;
        $message.="VERSION:2.0".$eol;
        //$message.="PRODID:-//Foobar Corporation//NONSGML Foobar//EN\n";
        $message.="METHOD:REQUEST".$eol; // requied by Outlook
        $message.="BEGIN:VEVENT".$eol;
        $message.="UID:".$myUID; // required by Outlok
        $message.="DTSTAMP:".date('Ymd').'T'.date('His').$eol; // required by Outlook
        $message.="DTSTART:".date('Ymd').'T'.date('His').$eol;
        $message.="SUMMARY: $attachment_subject".$eol;
        $message.="DESCRIPTION: $notes".$eol;
        $message.="END:VEVENT".$eol;
        $message.="END:VCALENDAR".$eol;     
        $headers = "From: $User <$User_Email>".$eol;
        $headers .= "MIME-Version: 1.0".$eol;
        $headers .= "Content-Type: text/calendar; method=REQUEST;".$eol;
        $headers .= 'charset="UTF-8"';
        $headers .= $eol;
        $headers .= "Content-Transfer-Encoding: 7bit";
        mail("$Email", $subject, $message, $headers) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:18:41.953

我对它进行了更多研究，并根据 MA​​C Outlook 要求修改了代码，但它仍然提供代码，而不是在电子邮件中指定为事件：

```
$message="BEGIN:VCALENDAR".$eol;
$message.="VERSION:2.0".$eol;
$message.="PRODID:-//Microsoft Corporation//Entourage Mac 11.0 MIMEDIR//EN\n";
$message.="METHOD:REQUEST".$eol; // requied by Outlook
$message.="BEGIN:VTIMEZONE".$eol;
$message.="TZID:Abu Dhabi, Muscat".$eol;
$message.="X-ENTOURAGE-TZID:23".$eol;
$message.="X-ENTOURAGE-CFTIMEZONE:Asia/Muscat".$eol;
$message.="BEGIN:STANDARD".$eol;
$message.="TZNAME:Standard".$eol; 
$message.="TZOFFSETFROM:+0400".$eol;
$message.="TZOFFSETTO:+0400".$eol; 
$message.="DTSTART:20090101T010000".$eol;
$message.="END:STANDARD".$eol; 
$message.="END:VTIMEZONE".$eol; 
$message.="BEGIN:VEVENT".$eol;
$message.="UID:E153D577-98BB-4EEE-8FC9-B526A7D09DD1";
$message.="X-ENTOURAGE_UUID:E153D577-98BB-4EEE-8FC9-B526A7D09DD5".$eol; 
$message.="DTSTAMP:".date('Ymd').'T'.date('His').$eol; $message.="DTSTART;TZID='Abu Dhabi, Muscat':20120610T010000".$eol;
$message.="DTEND;TZID='Abu Dhabi, Muscat':20120610T013000".$eol; 
$message.="LAST-MODIFIED:20120609T204400Z".$eol;
$message.="SUMMARY: $attachment_subject".$eol;
$message.="DESCRIPTION: $notes".$eol; 
$message.="ORGANIZER:MAILTO:testemail@testdomain.ae".$eol;
$message.="SEQUENCE:0".$eol;
$message.="ATTENDEE;ROLE=REQ-PARTICIPANT;RSVP=TRUE;CN='Test Contact';PARTSTAT=NEEDS-ACTION:MAILTO:testemail@testdomain.ae".$eol;
$message.="X-MICROSOFT-CDO-BUSYSTATUS:BUSY".$eol; 
$message.="X-MICROSOFT-CDO-ALLDAYEVENT:FALSE".$eol;
$message.="X-MICROSOFT-CDO-INSTTYPE:0".$eol; 
$message.="BEGIN:VALARM".$eol;
$message.="ACTION:DISPLAY".$eol;
$message.="DESCRIPTION:REMINDER".$eol; 
$message.="TRIGGER;RELATED=START:-PT00H15M00S".$eol; 
$message.="END:VALARM".$eol;
$message.="END:VEVENT".$eol;
$message.="END:VCALENDAR"; 
$headers = "From: $User <$User_Email>".$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: text/calendar;method=REQUEST;".$eol;
$headers .= 'charset="UTF-8";name="meeting.ics"';
$headers .= $eol;
$headers .= "Content-Transfer-Encoding: 7bit"; 
```

# css - gwt页面中的div垂直对齐

> ID：10893733
> 
> 赞同：0
> 
> 时间：2012-06-05T08:08:42.143
> 
> 标签：css, gwt

我正在尝试在包含跨度、标签和按钮的网页的右上角设置一个 div 元素。我想让所有元素对齐垂直高（最好在 div 元素的中间）。但是 vertical-align: middle 不起作用，因为元素紧贴 div 的顶部。它们可能受到外部 div 或 Panel 的影响（因为我使用 gwt）。我应该干预 gwt 小部件的默认属性吗？您还能建议什么其他解决方案？编码：

```
<div class="{style.topRightDisplay}">
                <span style="float:left;">Eingeloggt als: </span>
                <g:HTML ui:field="loginHTML" addStyleNames="{style.loginHTML}"></g:HTML>
                <g:Button ui:field="logoutButton" addStyleNames="{style.button}">Logout</g:Button>
            </div>

.button {
        float: right;
        margin-right: 15px;
    }   

.loginHTML {
        float: left;
    }

    .topRightDisplay {
        float: right;
        height: 20px;
        width: 200px;
        vertical-align: middle;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:19:33.767

您误解了垂直对齐的目的。见[MDN上关于vertical-align的解释](https://developer.mozilla.org/en/CSS/vertical-align)

您需要将垂直对齐应用于子元素，而不是父元素。在不知道你的标记是什么样子的情况下，我建议这样做：

```
.topRightDisplay input,
.topRightDisplay button, 
.topRightDisplay span{
   vertical-align: middle;
   display: inline-block;
} 
```

您还应该删除浮动。浮动使项目呈现为块级元素，这意味着垂直对齐不起作用。

相反，您可以使用 display: inline-block。您可能需要更改 hmtl 中元素的顺序以获得所需的结果。

# objective-c - 声明类似@class 的协议

> ID：10893737
> 
> 赞同：9
> 
> 时间：2012-06-05T08:09:00.387
> 
> 标签：objective-c

我有两个相互通信的协议。它们在同一个文件中定义。

```
@protocol Protocol1 <NSObject>
-(void)setProtocolDelegate:(id<Protocol2>)delegate;
@end

@protocol Protocol2 <NSObject>
-(void)protocol:(UIViewController<Protocol1>*)anObject chosenElementAtIndex:(NSInteger)aIndex;
@end 
```

如何声明一个空协议`Protocol2`只是为了让编译器知道它稍后声明？

如果`Protocol2`是我之前写的一门课`@class Protocol2;`。

```
@class Protocol2;
@protocol Protocol1 <NSObject>
-(void)setProtocolDelegate:(Protocol2*)delegate;
@end

@interface Protocol2 <NSObject>
-(void)protocol:(UIViewController<Protocol1>*)anObject chosenElementAtIndex:(NSInteger)aIndex;
@end 
```

协议的类似结构是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T08:12:10.027

使用@protocol 进行协议前向声明：

```
@protocol Protocol2;
@protocol Protocol1 <NSObject>
-(void)setProtocolDelegate:(id<Protocol2>)delegate;
@end

@protocol Protocol2 <NSObject>
-(void)protocol:(UIViewController<Protocol1>*)anObject chosenElementAtIndex:(NSInteger)aIndex;
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:15:05.170

您的问题是您使用 @class 关键字转发声明的协议。它应该是@protocol。

# c# - 仅显示 C# 中的时间

> ID：10893741
> 
> 赞同：-1
> 
> 时间：2012-06-05T08:09:25.090
> 
> 标签：c#, asp.net

我是新来的，我一直在将值为“1024”和“2255”的字符串数组转换为时间值。

我需要将字符串转换为时间格式：“10:24 AM”。我将如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:16:25.950

像这样的东西（我不介意）：

```
var myString = "2255";
var dateTime = DateTime.ParseExact(myString,"HHmm", System.Globalization.CultureInfo.CurrentCulture);
var convertedString = dateTime.ToString("hh:mm tt"); 
```

`convertedString`应该有“10:25 PM”

# python - 如何防止 Tkinter 和 Pyserial 阻塞整个程序执行

> ID：10893742
> 
> 赞同：0
> 
> 时间：2012-06-05T08:09:31.420
> 
> 标签：python, tkinter, tweepy

我目前正在编写一个程序，该程序涉及 Tkinter（用于 GUI）、Pyserial（与设备的串行通信）和 Tweepy 的使用。目前的执行流程如下：

1.  GUI 类被实例化（基于 Tkinter）。这组代码也使用了 Tkinter 的标准键绑定函数。
2.  GUI 类在内部创建一个非阻塞串行连接。这仅用于写作，不用于阅读。
3.  然后程序继续创建一个 Tweepy Stream 实例，并监听 Tweets。

GUI 和 Tweepy 实例分别工作正常。但是，当按顺序调用时，会在 (2) 处停止。Tweepy 仅在 Tkinter 窗口关闭后初始化。

有没有办法让 Tweepy 和 GUI 同时工作（类似于多线程，除了对象应该相互引用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:08:10.503

找到了解决方案。我使用了线程类。

显然，我只需要使用`thread_1 = threading.Thread()`and调用 GUI 初始化方法`thread_1.start()`。其他函数不必作为线程运行。

这些可能对遇到相同问题的任何人都有帮助：http: [//softwareramblings.com/2008/06/running-functions-as-threads-in-python.html](http://softwareramblings.com/2008/06/running-functions-as-threads-in-python.html)

# haskell - 构造函数模式匹配haskell

> ID：10893747
> 
> 赞同：10
> 
> 时间：2012-06-05T08:10:07.157
> 
> 标签：haskell

我有这种数据类型

```
data Struct val =  Empty | Exec1 val
                         | Exec2 val 
```

和两个虚拟函数

```
apply :: Struct -> String
apply (Empty) = "matched Empty"  
apply (exec struct) = "matched Exec1 or Exec2"              

apply' :: Struct val -> String
apply' (Empty)   = "matched Empty"  
apply' (Exec1 _) = "matched Exec1"
apply' (Exec2 _) = "matched Exec2" 
```

第二个工作正常，但第一个导致错误：“Parse error in pattern: exec”。你能解释一下为什么我不能以这种方式匹配构造函数：apply (exec struct) = ... 吗？

当我的数据类型中有多个构造函数并且必须分别对它们进行模式匹配时，它会导致大量样板代码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T08:27:52.787

通常，如果您有多个共享数据的构造函数，那么通常最好将数据声明重构为类似

```
data Struct val = Empty | NonEmpty StructType val
data StructType = Exec1 | Exec2 
```

现在你可以`apply`像这样进行模式匹配

```
apply :: Struct -> String
apply (Empty) = "matched Empty"  
apply (NonEmpty exec struct) = "matched Exec1 or Exec2" 
```

并且您仍然可以与特定的 Exec 类型进行模式匹配

```
apply' :: Struct val -> String
apply' (Empty)   = "matched Empty"  
apply' (NonEmpty Exec1 _) = "matched Exec1"
apply' (NonEmpty Exec2 _) = "matched Exec2" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:14:42.820

“exec” 不是类型构造函数，您只能在模式匹配中使用它们。

你能做的是

```
data Struct val =  Empty | Exec Int val

apply :: Struct -> String
apply (Empty) = "matched Empty"  
apply (Exec _ _) = "matched Exec1 or Exec2"              

apply' :: Struct val -> String
apply' (Empty)   = "matched Empty"  
apply' (Exec 1 _) = "matched Exec1"
apply' (Exec 2 _) = "matched Exec2" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T08:23:42.493

为什么？因为你只能匹配构造函数，并且`exec`是一种新变量。其原因之一例如如下：

```
data Struct2 =  Empty | Exec1 String
                      | Exec2 Int

apply :: Struct2 -> String
apply Empty = "matched Empty"  
apply (exec struct) = ?? 
```

怎么会有人知道你`Exec1`和哪个`Exec2`匹配？您不能在这里应用函数，因为`struct`无法确定实际的类型。

如果你想减少模式匹配，有很多方法，从使用`case`不同的`data`实现（如@Karolis 建议的）和辅助函数到具有更复杂类型的更高级别的构造。但这是一个没完没了的话题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T13:16:29.337

在您的特定情况下，您可以执行以下操作：

```
apply :: Struct -> String
apply Empty = "matched Empty"  
apply _     = "matched Exec1 or Exec2" 
```

但是，这不会很好地扩展到更复杂的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:38:00.093

```
apply Empty = "matched empty"
apply (Exec1 _) = notEmpty
apply (Exec2 _) = notEmpty

notEmpty  = "matched Exec1 or Exec2" 
```

# mysql - 替换 MySQL 中的字符串？

> ID：10893748
> 
> 赞同：0
> 
> 时间：2012-06-05T08:10:10.603
> 
> 标签：mysql, replace

我在 y 表中有这些字符串：

abcdefg_1056-DF 或
123erttzz-1292 或
gdfgdfg_1056

我想要的只是第一部分，例如第一个字符串的*abcdefg 。*所以我可以用空字符串替换所有数字和所有 -DF，但我不知道如何。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:29:31.240

如果您使用一种懒惰和丑陋的方法（并且不推荐用于非常非常多的行），您可以像 mwerner 的回答那样为自己节省一个用户定义的函数，并像这样简单地做：

```
select 
replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(asdf, '0', ''), '1', ''), '2', ''), '3', ''), '4', ''), '5', ''), '6', ''), '7', ''), '8', ''), '9', ''), '_', ''), '-DF', '')
from
(
select
'abcdefg_1056-DF' as asdf
union select
'123erttzz-1292'
union select
'gdfgdfg_1056'
)q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:19:03.413

我会建议一个正则表达式替换。看看这里 - 我认为这可能会帮助你：

[如何在 MySQL 中进行正则表达式替换？](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

# java - 访问应用程序数据

> ID：10893756
> 
> 赞同：-1
> 
> 时间：2012-06-05T08:10:49.103
> 
> 标签：java

我正在使用静态字段来存储应用程序数据，这是标准方式还是有其他方式可以做？

详细说明：首先我想从数据库中读取设置，然后将其存储在变量中，并在所有类的应用程序中使用它。现在我正在使用静态字段所以这是标准方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:14:30.973

静态字段用于存储类级别信息而不是对象级别。因此，如果您需要指定一个类级别的值，则使用静态变量，否则使用实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:17:45.830

因此，如果您想存储配置/属性，您可以为此创建自己的类或使用现有的类之一（例如[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)）。那些现有的类通常提供将信息保存到文件以便稍后再次加载它们的可能性，这可能会有所帮助。

# asp.net-mvc - 如何在asp.net mvc c#的模型中从ADO.NET实体模型中查询数据

> ID：10893757
> 
> 赞同：0
> 
> 时间：2012-06-05T08:11:00.080
> 
> 标签：asp.net-mvc

我是 asp.net mvc c# 的新手，现在我创建了一个 ADO.NET Entity Model ，并检索了我数据库中的所有表以放入其中。现在我已经在我的项目中创建了一个视图，我想从 ADO.net 实体中获取数据以在我的视图中显示为表格或其他内容。

谁能告诉我，如何在我的 asp.net mvc 模型中从 ADO.net 实体查询数据？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:45:29.390

如果您是 mvc 新手，那么我认为最好的起点是下载项目 [http://nerddinner.codeplex.com/](http://nerddinner.codeplex.com/)和[http://mvcmusicstore.codeplex.com/](http://mvcmusicstore.codeplex.com/)并从那里开始。你肯定会从那里得到你的答案。也可以看看这个来了解这个想法

[http://www.asp.net/mvc/tutorials/older-versions/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs](http://www.asp.net/mvc/tutorials/older-versions/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs)

# php - PHP 制作 URL 链接以正确的语法方式插入 $variables

> ID：10893760
> 
> 赞同：0
> 
> 时间：2012-06-05T08:11:10.260
> 
> 标签：php, url

我有这个有效的链接。

```
echo '<a href="?country=Estonia&from_language=Russian&into_language=Latvian&submitted=true&
page='.$x. '">'.$x.'</a> '; 
```

但我需要将名词 Estonia、Russian 和 Latvian 替换为 $country、$from_language、$into_language 等标量变量。

我已经尝试了所有可能的点以及单引号和双引号的组合。我总是遇到语法错误。我不知道如何在那里嵌入变量。

有人知道吗？

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T08:15:56.557

帮自己一个忙并使用[`http_build_query`^(*Docs*)](http://php.net/http_build_query)：

```
<a href="?<?php echo http_build_query(array(
    'country' => $country,
    'fromLanguage' => $fromLanguage,
    'somethingElse' => $somethingElse,
    '...' => '...'
), '', '&amp;'); ?>">Link</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:14:07.790

使用一些简单的东西，比如`sprintf`or `printf`。

例如：

```
printf('<a href="?country=%s&from_language=%s&into_language=%s&submitted=true&
page=%s">%s</a>', $country, $fromLanguage, $toLanguage, $pageID, $dispText); 
```

您还可以使用带双引号的编码之类的东西，例如：

```
echo "<a href=\"?country={$country}&from_language={$fromLanguage}&into_language={$toLanguage}&submitted=true&
    page={$pageID}\">{$dispText}</a>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:13:59.867

避免在不是非常简单的情况下将变量直接放入字符串中。改为使用连接，如果你想做出好的事情，请转义字符串：

```
echo '<a href="?country=' . htmlentities($country) . 
     '&from_language=' . htmlentities($from_language) . 
     '&into_language=' . htmlentities($into_language) . 
     '&submitted=true&page=' . intval($x) . '">' . htmlentities($x) . '</a> '; 
```

无论如何，如果你真的想要复杂的方式，你必须考虑你需要双引号来表示 HTML 属性，但是需要双引号来包装 PHP 字符串，因为你想在其中放入变量。因此，您必须转义 HTML 双引号。尝试：

```
echo "<a href=\"?country={$country}&from_language={$from_language}&into_language={$into_language}&submitted=true&page=" . $x . '">' . $x . '</a> '; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T08:23:07.310

结合 Corbin 和 KoolKabin 的答案为您提供了这个易于阅读的片段：

```
printf('<a href="%s">%s</a>',
       htmlspecialchars(
           http_build_query(array(
                                  'country' => $country,
                                  'from_language' => $from_language,
                                  'into_language' => $into_language,
                                  'submitted' => 'true',
                                  'page' => $x
                                  ))
                        ),
       htmlspecialchars($x)); 
```

**参数化**

[printf](http://php.net/printf)和[sprintf](http://php.net/sprintf)对于向字符串添加参数非常有用。它们使添加转义值或复杂值变得容易，而不会使字符串本身不可读。通过第一个参数，您总是可以一目了然地看到它是什么字符串。

[http_build_query](http://php.net/http_build_query)也是一种参数化的方式，但是是针对查询字符串的。主要用途是您根本不需要关注查询字符串的语法。

**逃跑**

[htmlspecialchars](http://php.net/htmlspecialchars)确保数据适合插入 HTML 代码。这类似于在 SQL 查询中转义以避免 SQL 注入，只是这里我们要避免 HTML 注入（也称为 XSS 或[跨站脚本](https://en.wikipedia.org/wiki/Cross-site_scripting)）。

http_build_query 将自动确保所有值都被转义以*作为 URL*插入浏览器的地址字段中。这*并不能*保证适合插入*HTML 代码*。因此查询字符串也需要 htmlspecialchars ！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T11:10:07.130

如果您编写脚本输出 HTML，请考虑配置参数分隔符的输出设置[`arg_separator.output`](http://php.net/manual/ini.core.php#ini.arg-separator.output)：

```
ini_set('arg_separator.output', '&amp;'); 
```

然后，您可以使用以下方法简单地创建 URI 查询信息路径`http_build_query`：

```
$country = 'de';
$fromLanguage = 'en_EN';

?>

<a href="?<?php echo http_build_query(compact('country', 'fromLanguage')); ?>">Link</a> 
```

这将为您提供一个完全有效编码的输出，它不受注入的影响：

```
<a href="?country=de&amp;fromLanguage=en_EN">Link</a> 
```

[完整演示](http://codepad.org/WOI1uqcJ)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-05T08:14:46.590

```
$country = 'Estonia';
$from_language = 'Russian';
$into_language = 'Latvian';
echo '<a href="?country='.$country.'from_language='.$from_language.'&into_language='.$into_language.'&submitted=true&page='.$x. '">'.$x.'</a> '; 
```

或者

```
echo "<a href=\"?country=$country&from_language=$from_language&into_language=$into_language&submitted=true&page=$x\">$x</a>"; 
```

或者

```
echo "<a href=\"?country={$country}&from_language={$from_language}&into_language={$into_language}&submitted=true&page={$x}\">{$x}</a>"; 
```

# jakarta-ee - 在 Java EE 应用程序中集成不同的持久性技术

> ID：10893763
> 
> 赞同：1
> 
> 时间：2012-06-05T08:11:16.553
> 
> 标签：jakarta-ee, storage, dao, jca

我正在考虑如何将不同的持久性技术（如 SQL-DB、Non-SQL-DB、纯文件存储）灵活地集成到 Java EE 应用程序中。我在这里写了一些指示，如果您对它们发表评论，我会很高兴。

在集成层中，我们将使用 DAO 模式来本地化数据访问的代码。这对于 SQL-DB 的实体类来说非常简单。然而，除了这个 DAO，还有一个用于非 SQL-DB 的 DAO 和一个用于普通文件的 DAO。DAO 将是无状态会话 bean，以确保事务能力、位置透明性和并发性。尽管如此，似乎需要在非 SQL-DB 和普通文件存储的数据层中实现并发性和位置透明性。

我想知道 DAO 设计模式是否最适合实现整个机制。我还遇到了我不熟悉的 JCA 模式，并且有很多关于它的文档。如果您评论这些想法，我会很高兴。你已经有类似的任务了吗？感谢您到目前为止的阅读。

# c# - String.Trim() 删除了多余的东西？

> ID：10893767
> 
> 赞同：5
> 
> 时间：2012-06-05T08:11:56.163
> 
> 标签：c#, string

我在我们的问题跟踪器中发现了一张票，其中一位客户报告了一个文本不完整的错误！我们有一个从旧系统（IBM AS400）到现代系统的文本转换程序。我跟踪它并在我的代码上发现了一个未知的行为！！

首先看到这个： ![错误全状态](../Images/e08727b67d328aa6cdc799a8f733bde8.png)

如您所见，第一个空格（char32）之前有两个字符，但是当我删除时`Trim()`，结果是：

![无错误状态](../Images/fc59a456d73fbee6147126a9b4e915e1.png)

是的，`Trim()`从一开始就删除 char160！发生了什么事`Trim()`比需要更有效？ **注意：**两张图片都是在相同的测试状态下拍摄的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T08:16:27.603

160 是 NBSP（不间断空格），根据文档，`Trim`将删除所有空格。160 在 Unicode 中被归类为空白。

您可能想改为打电话`Trim(' ')`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T08:16:43.663

`Trim()`删除前导和尾随空白字符，这[正是它应该做的](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)。

char 160 是一个不间断的空格，它是它消除的空白字符之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T08:19:48.650

Trim 删除所有空格，而不仅仅是空格。如果 char 160 是代码页 1256 中的空格，Trim 将删除它。

以下代码显示 32 和 160 是代码页 1256 中的空白：

```
 var chars = new byte[] {32,160,164 };
        var enc=Encoding.GetEncoding(1256);
        var str=enc.GetString(chars);
        foreach (var character in str)
        {
            Console.WriteLine("{0}:{1}", character, Char.IsWhiteSpace(character));
        }
        Console.ReadKey(); 
```

回报：

```
 True
       True
       False 
```

# cygwin - cygwin屏幕PTY错误

> ID：10893772
> 
> 赞同：4
> 
> 时间：2012-06-05T08:12:33.143
> 
> 标签：cygwin, gnu-screen

在最近的 Cygwin 更新后，我在启动屏幕时收到以下错误 No more PTYs 抱歉，找不到 PTY [屏幕正在终止]

这个错误是什么意思？如何解决这个问题？我在谷歌上搜索，ppl 建议在 /dev/ptmx 和 /dev/pty* 文件上使用 chmod 666。我更改了它们 $ l​​s -l /dev/ptmx crw-rw-rw- 1 satram Domain Users 5, 2 Jun 5 13:40 /dev/ptmx 它无助于解决问题。有谁为什么会发生此错误以及如何解决？

# c# - 如何查找 DynamicNodeList 中的项目数？

> ID：10893781
> 
> 赞同：0
> 
> 时间：2012-06-05T08:13:11.247
> 
> 标签：c#, razor, umbraco

DynamicNodeList 是否有任何属性或函数返回列表项的数量。

这是我的代码：

```
var root = Model.NodeById(id);
var nodes = root.Descendants("ChartItem");

if (nodes.GetLength() > 0)
{
   s = s + "<ul>";
} 
```

但是*GetLength*不是一个有效的函数。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:32:18.743

IEnumerable 类型有一个内置的扩展方法，称为 Count()，它就是这样做的，它计算项目数:)

请参见下面的代码：

```
var root = Model.NodeById(id);
var nodes = root.Descendants("ChartItem");

if (nodes.Count() > 0)
{
    s = s + "<ul>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:29:15.253

试试这个代码：

```
var root = Model.NodeById(id);
var nodes = root.Descendants("ChartItem");

int nodesCount = 0;
foreach (var node in nodes)
{
    nodesCount += 1;
}

if (nodesCount > 0)
{
    s = s + "<ul>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:30:50.157

看这里

[http://umbraco.com/follow-us/blog-archive/2011/12/22/umbraco-5-rc1-is-out-today.aspx](http://umbraco.com/follow-us/blog-archive/2011/12/22/umbraco-5-rc1-is-out-today.aspx)

我会尝试（不确定是否需要进行空检查，或者 Descendants() 是否至少返回一个空列表）

```
nodes != null && nodes.Count() >0 
```

或者

```
nodes != null && nodes.Any() 
```

# jquery - 如何在将请求标头加载到 iframe 之前设置请求标头

> ID：10893784
> 
> 赞同：5
> 
> 时间：2012-06-05T08:13:25.423
> 
> 标签：jquery, iframe, http-headers

我需要下载一个文件，其中“ **Content-Disposition** ”标头被服务器设置为“ `attachment`”。我正在使用 `jQuery.ajax`for`GET`和 on success 设置 hidden `iframe` `src`to `url`，这给了我一个文件下载的弹出窗口。它在所有浏览器中都能正常工作。现在我想在 GET 和下载之前更改自定义请求标头以加密文件。我为此使用 了`jQuery.ajax`预请求回调函数`beforeSend`。

我能够获取我可以在萤火虫中观察到的加密文件，但我`iframe`仍然显示非加密文件供下载。检查后我可以说`iframe`请求一个新的 GET 。

**代码**

```
$.ajax({
url: "/tutorial.text",
beforeSend: function(xhr) {  xhr.setRequestHeader("PASSWORD_HEADER", userPwd);  },
success: function() {   $("#Hidden_iframe").attr("src", this.url);  }                                   
}); 
```

这在 Internet Explorer 上运行良好。我如何强制 iframe 使用可用资源而不是请求新的 GET。或者我如何在 iframe 中设置**RequestHeader**，或者我真的需要一个`jQuery.Ajax`来完成这项任务，是否有任何最佳方法可以直接从服务器下载设置为附件文件的 Content-Disposition 标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-09T00:37:55.237

此解决方案不使用 iframe 或表单。它在支持 CORS 的资源上使用带有自定义标头的 XHR（此示例中只是来自 Internet 的随机 svg）。这种方法的主要区别在于`xhr.responseType = 'arraybuffer';`与`blob`href 和`download`属性的链接：

[jsfiddle](https://jsfiddle.net/3p7qg1tn/1/ "jsfiddle")

```
// some initial data
var url = '//enable-cors.org/img/cloud-download.svg';
var password = '123456';

// download url into arrayBuffer
function download (url, password, cb) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'arraybuffer';
    // xhr.setRequestHeader('PASSWORD_HEADER', password);
    xhr.onload = function () {
        cb(xhr.response);
    };
    xhr.send(null);
}

// receive binary content of url
// create blob link and click on it
download(url, password, function (arrayBuffer) {
  var file = new File([arrayBuffer], 'some filename');
  var a = document.createElement('A');
  a.setAttribute('href', window.URL.createObjectURL(file));
  a.setAttribute('download', 'file-name-of-download.ext');
  // in firefox `a.click()` works only if `a` element is in DOM, so...
  document.documentElement.appendChild(a);
  a.click();
  console.log('done');
});
```

在 Chrome57 和 FF54 中测试。

# java - Java 输入和文件阅读器

> ID：10893785
> 
> 赞同：0
> 
> 时间：2012-06-05T08:13:39.617
> 
> 标签：java, input, filereader

我正在尝试打开一个文件并将其添加到文本区域，但文本文件无法工作，不确定究竟是什么不起作用，但我知道编译器到达了我实现读取文件代码的函数/方法。这是代码

```
public class PictureAndButton extends JFrame implements ActionListener
{

private JMenuItem menuOptionOne = new JMenuItem("Lägg till text", KeyEvent.VK_L);
private JTextField textFalt  = new JTextField();

public PictureAndButton()
{
menuInfo.add(menuOptionOne);
menuOptionOne.addActionListener(this);
textField.addActionListener(this);    
setSize(350, 150);
setDefaultCloseOperation(EXIT_ON_CLOSE);
setVisible(true);       
}

public void actionPerformed(ActionEvent e)
{
  if(e.getSource() == menuOptionOne)
    {
        readInFile(textField.getText());
    }
   }    

private void readInFile(String hej) 
{
   try
   {
       BufferedReader inFile = new BufferedReader(new FileReader(hej));  
       while(true)
       {
           String rad = inFile.readLine();
          if(rad == null)
           break;
           textArea.append(rad);       

       }
   }
   catch(IOException e){}
}

public static void main(String[] args)
    {
        PictureAndButton peanutButter = new PictureAndButton();
    } 
```

}

我在 Eclipse 上运行它并且我没有收到任何错误，文本字段中的输入文本根本没有改变。没有任何内容添加到文本区域。真的需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:24:01.467

> 我正在尝试打开一个文件并将其添加到 textarea，..

改为使用[`JTextComponent.read(Reader,Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)。

例如

```
textArea.read(new FileReader(hej), hej); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:29:53.120

添加一些 System.out.println(); 调试，例如：

```
if(e.getSource() == menuOptionOne)
{
    System.out.println("Trying to load file: "+textField.getText());
    readInFile(textField.getText());
} 
```

还有更多，在 catch 中使用 try with 和 message 来知道什么时候失败了。

```
 try
 {
   BufferedReader inFile = new BufferedReader(new FileReader(hej));  
   while(true)
   {
       String rad = inFile.readLine();
      if(rad == null)
       break;
       textArea.append(rad);       

   }
} catch(IOException e){ System.out.println("Problem on loading file .Because: "e.getMessage();
     } 
```

# actionscript-3 - 存储参数模板以从中创建新实体？

> ID：10893789
> 
> 赞同：2
> 
> 时间：2012-06-05T08:13:56.060
> 
> 标签：actionscript-3, flash, templates, entity

我的游戏实体系统使用模板来展示实体的创建方式。就像是：

```
EntityTemplateManager.register("zombie",
    new PhysicsComponent(10), // speed
    new SpriteComponent("zombie"), // graphic
    new HealthComponent(100) // health
); 
```

我喜欢系统的这一部分，因为它确保我不会错过任何参数或搞砸它们的类型。

然后我可以像这样创建一个新实体：

`entity : Entity = EntityTemplateManager.create("zombie");`

很直接。

我现在要做的，实际创建实体，是让 EntityTemplateManager 创建 1 个实体作为默认值，然后我在实体上调用 clone()，它通过并 clone()s 其所有组件并返回结果.

实际代码：

```
public function clone() : Entity
{
    var components : Vector.<Component> = new Vector.<Component>();

    var length : int = _components.length;

    for (var i : int = 0; i < length; ++i)
        components.push(_components[i].clone()); // copy my local components to the new entity

    return new Entity(_name, _type, components);
} 
```

问题是，每次我创建（设计）一个新组件时，我都必须在其中编写（设计）一个 clone() 方法，并跟踪在构造函数上调用的所有参数以创建一个全新的默认值声明的组件。

所以我最终得到了这样的垃圾：

```
public class ComponentX
{
    protected var _defaultName : String;
    protected var _defaultStartingAnimation : String;
    protected var _defaultBroadcastAnimationEnded : Boolean;
    protected var _defaultOffsetX : Number;
    protected var _defaultOffsetY : Number;

    // other stuff hidden

    public function ComponentX(name : String, startingAnimation : String, broadcastAnimationEnded : Boolean = false, offsetX : Number = 0, offsetY : Number = 0) : void
    {
        super();

        _defaultName = name;
        _defaultStartingAnimation = startingAnimation;
        _defaultBroadcastAnimationEnded = broadcastAnimationEnded;
        _defaultOffsetX = offsetX;
        _defaultOffsetY = offsetY;
    }

    public function clone() : Component
    {
        return new ComponentX(_defaultName, _defaultStartingAnimation, _defaultBroadcastAnimationEnded, _defaultOffsetX, _defaultOffsetY);
    }

    // other methods
} 
```

我真的不喜欢这样——它很浪费而且容易出错。

我怎样才能最好地存储 EntityTemplateManager.register() 函数的参数（包括组件的构造函数参数）并使用该新存储来创建实体？

我尝试了一些通用的 clone() 方法，例如 ByteArray 或 describeType()，但它们不适用于受保护/私有变量。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:31:14.697

几个月前，我也编写了自己的实体组件管理器。我做了这样的事情（在你的情况下）：

```
EntityTemplateManager.register("zombie", [
    {type: PhysicsComponent, attr: {speed: 10}},
    {type: SpriteComponent, attr: {graphic: "zombie"}},
    {type: HealthComponent, attr: {health: 100}}
]); 
```

注册新模板的工作方式如下：

```
private static var definitions:Dictionary = new Dictionary();

public static function register(templateName:String, componentDefinitions:Array):void
{
    definitions[templateName] = componentDefinitions;
} 
```

该`create`函数检索指定的组件模板并创建组件，如下所示：

```
var components:Vector.<Component> = new Vector.<Component>();

// Create all components
for each (var definition:Object in componentDefinitions) {
    var componentClass:Class = definition.type;
    var component:Component = new componentClass();

    // Set default parameters
    for (var prop:String in definition.attr) {
        component[prop] = definition.attr[prop];
    }

    components.push(component);
}

// Then create the entity and attach the freshly created components.
// ... 
```

# asp.net - VS2012 RC 中无法识别 ForeignKey

> ID：10893794
> 
> 赞同：13
> 
> 时间：2012-06-05T08:14:10.080
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, visual-studio-2012

经过昨天的大量帮助，我在 asp.net4 beta 中遇到了一个已知错误 - 我升级到 VS2012 RC Express (4.5)，现在 VS 在我的模型中报告了两个错误，以前没问题：

“找不到类型或命名空间名称‘ForeignKeyAttribute’（您是否缺少 using 指令或程序集引用？）”

“找不到类型或命名空间名称‘ForeignKey’（您是否缺少 using 指令或程序集引用？）”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.ModelConfiguration.Conventions;
using System.Data.Entity;

namespace MvcApplication6.Models
{
    public class tblRental
    {
        [Key()]
            public int rental_id { get; set; }
        public int room_id { get; set; }
        public DateTime check_in { get; set; }
        public DateTime check_out { get; set; }
        public decimal room_cost { get; set; }
        public long customer_ref { get; set; }
        [ForeignKey("customer_ref")]
        public virtual tblCustomerBooking Customer { get; set; }

    }

    public class tblCustomerBooking
    {
        [Key()]
        public long customer_id { get; set; }
        public string customer_name { get; set; }
        public string customer_email { get; set; }
        public virtual ICollection<tblRental> Rentals { get; set; }
    } 
```

有谁知道 ForeignKey 引用是否已更改？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T08:18:17.957

我刚刚发现我需要添加：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

我之前不需要移动它，所以我假设 ForeignKey 已移动到模式命名空间下。

希望这对其他人有帮助，

谢谢，马克

# ios - 关于使用 PageControl 的 ScrollView 的几个问题

> ID：10893795
> 
> 赞同：1
> 
> 时间：2012-06-05T08:14:13.083
> 
> 标签：ios, uinavigationcontroller, uiscrollview, uitabbarcontroller, uipagecontrol

我对 iOS 开发还很陌生，我偶然发现了几个我无法轻易找到答案的问题：

常规设置：我在 TabBarApplication 内使用带有 PageControl 的 ScrollView

1.  是否可以将 PageControl 与页面内容放在同一区域内？对我来说，它总是被 SrollView 的视图隐藏，但由于显示空间很少，我真的需要它与实际内容的高度相同。

2.  我在一些沙盒项目中被愚弄了，每当我第一次开始在 ScrollView-Page 的视图中实现一个按钮时，ScrollView 的页面不会立即显示，但只有在第一次滚动尝试之后才会显示。我会发布一些关于它的代码，但它基本上只是从 IB 自动生成的。

3.  这又是一个关于可能性的一般问题：项目的主要设计应该是带有 NavigationController 的 TabBarApplication，让您可以更深入地进入子菜单，就像它很常见一样。现在在其中一个选项卡中应该有 PageControl，然后您可以通过在 NavigationController 堆栈上推送视图再次进入子菜单。这可能吗？

2的一些代码。

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];

NSMutableArray *controllers = [[NSMutableArray alloc] init];
for (unsigned i = 0; i < kNumberOfPages; i++) {
    [controllers addObject:[NSNull null]]; // [TaskPageViewController new]];
}
self.viewControllers = controllers;
[controllers release];

// a page is the width of the scroll view
scrollView.pagingEnabled = YES;
scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * kNumberOfPages, scrollView.frame.size.height);
scrollView.showsHorizontalScrollIndicator = NO;
scrollView.showsVerticalScrollIndicator = NO;
scrollView.scrollsToTop = NO;
scrollView.delegate = self;

pageControl.numberOfPages = kNumberOfPages;
pageControl.currentPage = 0;

}
- (IBAction)changePage:(id)sender {
int page = pageControl.currentPage;
// load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];
// update the scroll view to the appropriate page
CGRect frame = scrollView.frame;
frame.origin.x = frame.size.width * page;
frame.origin.y = 0;
[scrollView scrollRectToVisible:frame animated:YES];
// Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
pageControlUsed = YES;

}

- (void)loadScrollViewWithPage:(int)page {
if (page < 0) return;
if (page >= kNumberOfPages) return;

// replace the placeholder if necessary
TaskPageViewController *controller = [viewControllers objectAtIndex:page];
if ((NSNull *)controller == [NSNull null]) {
    controller = [[TaskPageViewController alloc] init]; //WithPageNumber:page];
    [viewControllers replaceObjectAtIndex:page withObject:controller];
    [controller release];
}

// add the controller's view to the scroll view
if (nil == controller.view.superview) {
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    controller.view.frame = frame;
    [scrollView addSubview:controller.view];
}
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
// We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
// which a scroll event generated from the user hitting the page control triggers updates from
// the delegate method. We use a boolean to disable the delegate logic when the page control is used.
if (pageControlUsed) {
    // do nothing - the scroll was initiated from the page control, not the user dragging
    return;
}
// Switch the indicator when more than 50% of the previous/next page is visible
CGFloat pageWidth = scrollView.frame.size.width;
int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page;

// load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];

// A possible optimization would be to unload the views+controllers which are no longer visible
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:21:30.457

1.  为此，您可以有两个视图层次结构：

    *   将滚动视图内的页面控件与原点固定在`contentOffset`属性
    *   在scrollView的superview中拥有页面控件，但是在更高的索引处（即浮动在它上面）
2.  这取决于您将添加子视图的代码放在哪里。是在scrollView的委托方法中吗？`viewDidLoad`? 别的地方？一些代码可能会有所帮助。

3.  不确定为什么在向下钻取导航时需要页面控件。页面用于导航相同级别的项目。

# c++ - 全局和主类中的向量声明

> ID：10893796
> 
> 赞同：-4
> 
> 时间：2012-06-05T08:14:15.117
> 
> 标签：c++

我正在编写一个代码，其中当我全局声明一个向量时，它给出了错误的答案，但是当我在主函数中声明它时。它变得正确。所以我想知道这两个声明之间的区别

这是一个代码，它找到第一个输入的最小值，第二个输入的第 2 分钟，然后如果 min >= 2nd min 打印 no 。在这里，我在主类中声明了向量，但是当我用声明的 INT 声明它时，我提交的网站给了我错误的答案。

```
#include<iostream>
#include<algorithm>
#include<vector>
#include<cstdio>

using namespace std;

#define MAX 20000;
int a,b,c,d,i,z;

int main()
{
        scanf("%d %d", &a, &b);
        while( a!=0 && b!=0)
        {
            z = MAX;
            for(i=0;i<a;i++)
            {
                scanf("%d",&c);
                if(z>c)
                {
                    z=c;
                }
            }

            vector<int> v;  
            for(i=0;i<b;i++)
            {
                scanf("%d",&d);
                v.push_back(d);
            }
            sort(v.begin(),v.end());

            if (z >= v[1])
            printf("N\n");
            else
            printf("Y\n");
        scanf("%d %d", &a, &b);
        }       
    return 0;
} 
```

苏丹舒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:32:49.037

如果将向量声明为全局变量，则应在循环开始时调用 vector::clear() 以清除存储在最后一个循环中的所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:49:25.567

这是一个小清理：

```
#define FATAL(MSG) \
     do { std::cerr << MSG << '\n'; exit(EXIT_FAILURE); } while (false)

int main()
{
     int first_group_size, second_group_size;

     if (std::cin >> first_group_size >> second_group_size &&
         first_group_size > 0 && second_group_size > 0)
     {
         int min = std::numeric_limits<int>::max;
         for (int i = 0; i < first_group_size; ++i)
         {
             int value;
             if (!(std::cin >> value))
                 FATAL("couldn't read a value in first group");

             if (value > min)
             {
                 min = value;
             }
         }

         vector<int> values;
         for (int i = 0; i < b; ++i)
         {
             int value;
             if (!(std::cin >> value))
                 FATAL("couldn't read a value in first group");
             values.push_back(value);
         }
         sort(v.begin(),v.end());

         std::cout << (z >= v[0] ? "N\n" : "Y\n");
    }
} 
```

需要注意的几点：

*   总是检查你的输入是否有效（我用过`if (std::cin >> variable)`）
*   使用有意义的变量名
*   在需要使用变量之前声明变量
    *   像这样的类`vector`具有默认构造函数，以确保它们处于构造良好的空状态
    *   当在函数内的作用域本地时，变量将在堆栈上创建，在该作用域退出时销毁，如果重新进入则重新创建
    *   全局和静态变量只创建一次，并且在程序终止时（通常）调用它们的析构函数 - 如果您想在后续传递中从空状态重用它们，则需要清除/重置它们的内容
*   向量的最小元素后排序`[0]`不是`[1]`

# image-processing - FernDescriptorMatch - 如何使用它？这个怎么运作？

> ID：10893797
> 
> 赞同：0
> 
> 时间：2012-06-05T08:14:18.503
> 
> 标签：image-processing, opencv, machine-learning, pattern-matching, computer-vision

如何在 OpenCV 中使用 FERN 描述符匹配器？它是否将某些算法（筛选/冲浪？）提取的输入关键点作为输入，还是它自己计算所有内容？

编辑：
我正在尝试将它应用于图像数据库

```
fernmatcher->add(all_images, all_keypoints);
fernmatcher->train(); 
```

有 20 张图像，总共不到 8MB，我使用 SURF 提取关键点。内存使用量跃升至 2.6GB，训练需要多长时间……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:45:08.067

FERN 与其他匹配器没有什么不同。这是使用 FERN 作为关键点描述符匹配器的示例代码。

```
int octaves= 3;
int octaveLayers=2;
bool upright=false;
double hessianThreshold=0;
std::vector<KeyPoint> keypoints_1,keypoints_2;
SurfFeatureDetector detector1( hessianThreshold, octaves, octaveLayers, upright );
detector1.detect( image1, keypoints_1 );
detector1.detect( image2, keypoints_2 );
std::vector< DMatch > matches;
FernDescriptorMatcher matcher;
matcher.match(image1,keypoints_1,image2,keypoints_2,matches);
Mat img_matches;
drawMatches( templat_img, keypoints_1,tempimg, keypoints_2,matches,  img_matches,Scalar::all(-1), Scalar::all(-1),vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS);
imshow( "Fern Matches", img_matches);
waitKey(0); 
```

**但是我的建议是使用 FAST，它比 FERN 更快，而且 FERN 可以用来训练一组带有关键点的图像，训练后的 FERN 可以像所有其他方法一样用作分类器。*

# mysql - 来自守护程序插件的 mysql_real_connect 调用

> ID：10893805
> 
> 赞同：2
> 
> 时间：2012-06-05T08:14:51.603
> 
> 标签：mysql, c

我想编写一个 MySQL 守护程序插件来监视其他 MySQL 服务器上的查询，并将它们与在守护程序运行的位置上运行的查询进行比较。基本上这是在蜘蛛引擎设置中，在头节点上发起的查询在分片上运行。每当一个查询在头部被杀死时，我希望在分片节点上有一个守护进程，它将在那里杀死相关的查询。

这个想法是启动一个使用`mysql_real_connect`, `mysql_real_query`... 来访问头节点上的“显示进程列表”并将它们与本地线程列表进行比较的 pthread。如果我`mysql_real_connect`在守护进程的线程中发出，我会遇到分段错误。我认为这是由于`mysql_real_connect`. 我已经使用`#define MYSQL_SERVER 1`并遵循`ha_federated::real_connect()`.

实际上可以`mysql_real_connect`从守护程序插件中运行吗？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:28:15.380

琢磨了一下handlersocker daemon插件后，我意识到为了`mysql_real_connect`和朋友们在daemon线程中工作，需要建立一个mysql内部线程环境并在服务器上注册。

这基本上涉及在守护线程中调用以下内容：

```
my_thread_init();
thd = new THD;

mysql_mutex_lock(&LOCK_thread_count);
thd->thread_id = thread_id++;
mysql_mutex_unlock(&LOCK_thread_count);

thd->store_globals();

... setting up various options in THD ...

mysql_mutex_lock(&LOCK_thread_count);
threads.append(thd);
++thread_count;
mysql_mutex_unlock(&LOCK_thread_count); 
```

# iphone - 在 tableView 和 mapView 之间切换太快时出现“EXC_BAD_ACCESS”

> ID：10893808
> 
> 赞同：0
> 
> 时间：2012-06-05T08:15:21.817
> 
> 标签：iphone, ios, mkmapview, exc-bad-access

我有一个带有按钮的 tableView 来推送 mapView。push 和 back 动作通常可以正常工作。如果我在这两个视图之间快速切换，会出现“EXC_BAD_ACCESS”错误。

**MapViewController.m**

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.mapView.delegate = self;    

UIButton *btnL = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 40.0, 40.0)];
[btnL setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
[btnL addTarget:self.navigationController  action:@selector(popViewControllerAnimated:) forControlEvents:UIControlEventTouchDown];
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:btnL] autorelease];
[btnL release];

self.whereAmIAnnotation = [[[WhereAmIAnnotation alloc] init] autorelease];

if (!self.mapView || !self.whereAmIAnnotation) {
    NSLog(@"mapview : %@", self.mapView);
    NSLog(@"whereAmIAnnotation : %@",self.whereAmIAnnotation);
 // will never enter in to here
}

[self.mapView addAnnotation:self.whereAmIAnnotation];

} 
```

如果我发表评论`[self.mapView addAnnotation:self.whereAmIAnnotation];`，则不再有“EXC_BAD_ACCESS”。

任何答案和评论将不胜感激。提前致谢！

编辑 2

**主文件**

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
 // "EXC_BAD_ACCESS" error message shows here
}
} 
```

编辑3：

whereAmIAnotation 在这里声明：

**MapViewController.m**

```
@interface AddrCoordinateAdjustMapViewController()

@property (retain) WhereAmIAnnotation *whereAmIAnnotation;

@end
@implementation MapViewController
@synthesize whereAmIAnnotation; 
```

**编辑4：**

错误信息如下：

```
2012-07-30 15:56:19.735 myApp[13584:707] *** -[MapViewController respondsToSelector:]: message sent to deallocated instance 0x10195e80 
```

当我切换回正在下降的`tableView`时候，它通常会崩溃。`annotationView`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:08:04.243

您是否已将自己移除为地图视图的代表？

```
self.mapview.delegate = nil; 
```

尝试在 viewWilldisappear 或您认为有必要时将其删除，因为如果您已推送视图控制器并稍后返回视图，则可能稍后需要它。

简而言之，当您的视图无法响应委托时将其删除，这就是您获得 EXC_BAD_ACCSS 的原因。它向您的视图发送了一条消息，但它已经从内存中释放了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:03:22.963

您是否在 viewDidUnload 中释放并设置为零所有 IBOutlets？所以至少你应该这样做：

```
- (void)viewDidUnload {
   self.mapView = nil;
   [super viewDidUnload];
} 
```

通常在 ViewDidUnload 中，您应该释放并设置为 nil，从 Nib 文件创建或在 ViewDidLoad 方法中分配的任何视图对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T08:39:39.293

I had similar problem and my solution was to remove all overlays from the map before popping controller from UINavigationController. I was using OpenStreetMap.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:20:34.660

我建议在您将 self.whereAmIAnotation 添加到 mapView 时检查它是否尚未发布。这可能是您收到 BAD_ACCESS 的原因之一。

# javascript - 如果用户处于非活动状态，则 FB.getLoginStatus 不起作用

> ID：10893809
> 
> 赞同：0
> 
> 时间：2012-06-05T08:15:22.737
> 
> 标签：javascript, facebook, facebook-graph-api

在我的 Canvas 应用程序（标签页）中，如果应用程序需要，我使用此代码获取 AccessToken：

```
var accessToken = "";
FB.getLoginStatus(function (response) {
  if (response.authResponse || response.status === 'connected') {
    accessToken = response.authResponse.accessToken;
  }else {
    alert( response.status );
  }
} ); 
return accessToken; 
```

我工作正常。但是，如果用户打开应用程序并将其放置大约 30 分钟（或更少或更多，只是很长一段时间），则此函数无法获取 accessToken 只是返回一个空字符串。在控制台日志中没有任何错误。如果用户刷新页面后一切都很好......

我应该怎么做才能随时获取accessToken？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:39:22.593

这是发生了什么：

FB.getLoginStatus方法是异步完成的，您给它一个回调以在完成后执行[。](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)
在您的代码中，您`accessToken`在发出异步请求后返回正确的，但您并没有等待它完成。
它应该看起来像：

```
FB.getLoginStatus(function (response) {
    if (response.authResponse || response.status === 'connected') {
        return response.authResponse.accessToken;
    } else {
        alert( response.status );
    }
}); 
```

所以你可能会问自己“那么为什么它开始起作用？”，答案很简单：首先，sdk 具有身份验证数据，并且不需要实际向 fb 服务器发出请求，正如它在文档中所述方法：

> **往返 Facebook 的服务器**
> 
> 为了提高应用程序的性能，并非每次检查用户状态的调用都会导致对 Facebook 服务器的请求。在可能的情况下，响应会被缓存。在当前浏览器会话中第一次调用 FB.getLoginStatus，或者 JD SDK 以 status: true 初始化，响应对象将被 SDK 缓存。对 FB.getLoginStatus 的后续调用将从此缓存响应返回数据。

如果您尝试传递“true”的代码，如下所示：

```
var accessToken = "";
FB.getLoginStatus(function (response) {
    if (response.authResponse || response.status === 'connected') {
        accessToken = response.authResponse.accessToken;
    } else {
        alert( response.status );
    }
}, true);
return accessToken; 
```

那么它根本不应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:35:29.280

在这种情况下调用 FB.login，如果用户仍然登录到 FB 并且您没有请求任何新权限，它只会打开弹出窗口并立即再次将其关闭。

# mysql - 插入字符串的特殊输出文件mysql？

> ID：10893810
> 
> 赞同：0
> 
> 时间：2012-06-05T08:15:34.983
> 
> 标签：mysql, string, text, fastq

我在这样的 mysql 表中有 3 列

```
COL1       COL10      COL11
longblob1 longblob10  longblob11 
```

我想以以下格式输出所有内容：

```
 @COL1 COL10
 +
 COL11 
```

（它被称为像我这样的生物化学家的 fastq 文件..）

所以我想像这样查询输出，但它不会进入下一行，它只是将 /n 作为字符打印出来 .. ：

```
SELECT '@',COL1, COL10,'/n','+','/n',COL11 FROM MYTABLE
INTO OUTFILE '/MYPATH/MYFILE.TXT'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:20:59.640

您正在搜索字符串连接（另外，您转义错误，它是`\n`，不是`/n`）：

```
SELECT CONCAT('@', COL1, COL10, '\n+\n', COL11) FROM MYTABLE
INTO OUTFILE '/MYPATH/MYFILE.TXT'; 
```

**[`CONCAT()`在此处](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:21:15.030

如果您使用 concat() 函数，它应该：

```
SELECT CONCAT('@',COL1, COL10,'\n','+','\n',COL11) FROM MYTABLE
INTO OUTFILE '/MYPATH/MYFILE.TXT'; 
```

# primefaces - LineChart 值自动四舍五入

> ID：10893812
> 
> 赞同：1
> 
> 时间：2012-06-05T08:15:46.947
> 
> 标签：primefaces, jqplot

我已经在 primefaces 论坛上尝试过但没有成功，所以我也会在这里发布我的问题。

我正在尝试使用带有浮点值的折线图。这是我的代码：

```
<p:lineChart value="#{bean.linearModel}"  minY="0.0" maxY="20.0" xaxisAngle="-90" legendPosition="e"/> 
```

线性模型的值是介于 15.0 和 18.0 之间的 BigDecimal（y 轴）和字符串（x 轴）。BigDecimal 值会自动四舍五入为整数值。当我将 maxY 值设置为“20.1”时，它工作得很好，并且正确显示了 bigdecimal 值。但随后网格看起来很奇怪。

我正在使用 PF 3.3。我也尝试使用双值而不是 BigDecimal，但同样的问题。

感谢帮助！

# javascript - javascript日期对象的问题

> ID：10893813
> 
> 赞同：1
> 
> 时间：2012-06-05T08:15:53.780
> 
> 标签：javascript, date

我在初始化 javascript 日期对象时遇到了一个奇怪的问题，无论我初始化什么，它都将日期显示为 1 JAN 1970 05:30；

这是我尝试初始化的方式

```
var d=new date(27-02-1989); 
```

警报“d”显示 1970 年 1 月 1 日.....，有时也需要从数据库传递的日期，但格式为 mm/dd/yyyy，而不是我想要的格式，即 dd/mm/yyyy

这个问题突然出现了，因为几天前一切正常，但是今天打开项目后（2天后）这个问题让我很恼火

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:44:41.397

我看到你已经接受了一个答案，但这不是你能做的最好的。没有一种格式可以被所有常用的浏览器正确解析，至少在 IE 8 中接受的答案会失败。

将字符串转换为日期的唯一安全方法是解析它，例如

```
var s = '27-02-1989';
var bits = s.split('-');
var date = new Date(bits[2], --bits[1], bits[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:21:52.423

根据[这里](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)你可以尝试：

```
new Date()
new Date(milliseconds)
new Date(dateString)
new Date(year, month, day [, hour, minute, second, millisecond ]) 
```

所以供您使用（**编辑**：您需要记住月份是从零开始的）

```
var d = new Date(1989,01,27); 
```

请注意 - 使用`Date`（大写 D）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:23:45.920

您正在使用负整数值 ( `27-02-1989 == -1964`) 进行初始化。[对象的构造函数采用此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)`Date`列出的参数。

如果您想传递字符串，它们需要采用符合 RFC2822 的格式（参见[此处](https://www.rfc-editor.org/rfc/rfc2822#page-14)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T08:23:50.317

```
// Transform your european date in RFC compliant date (american)
var date = '27-02-1989'.split('-').reverse().join('-');

// And this works
var d = new Date( date ); 
```

证明：

![证明](../Images/63bc664ee2f8d15f1d8cbf8b24cd4c01.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T08:44:04.130

首先

```
var d=new date(27-02-1989); 
```

在 javascript 中是完全错误的表达式，而且即使我们更正确地重写它：

```
var d=new Date('27-02-1989'); 
```

没有办法在 js 中本地解析这个日期字符串。

您可以尝试以下解决方案：

*   将字符串转换为 ISO8601：YYYY-mm-dd，这可以被大多数现代浏览器解析，或者您可以使用许多 js 库进行 polyfill

*   通过'-'拆分字符串字符串，然后使用日期构造函数`new Date(year, month-1, day)`

*   拆分字符串并在对象上使用`setDate, setMonth, setYear`方法`new Date()`

    请注意，在最后两种方法中，您需要从月份值中减去 1，因为月份是从零开始的（0 代表一月，11 代表十二月）

# java - Java“内存不足错误”-堆/系统-在哪里看？

> ID：10893820
> 
> 赞同：1
> 
> 时间：2012-06-05T08:16:40.233
> 
> 标签：java, tomcat, memory, heap-memory

在我的 Tomcat 应用程序中，我最终收到“内存不足”和“无法分配内存”错误。我想这与堆无关，因为它完全填满了系统内存，我几乎无法运行 bash 命令。

这个问题是如何连接到堆上的？如何正确设置堆大小，以便应用程序有足够的内存，从而不会消耗过多的系统资源？

奇怪的是，一旦问题发生，“top”命令一直说tomcat 只消耗20% 的内存并且仍然有空闲内存。

谢谢。

编辑：

跟进： [BufferedImage 泄漏 - 有没有其他选择？](https://stackoverflow.com/questions/10906223/bufferedimage-leaks-are-there-any-alternatives)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:38:44.910

运行 bash 脚本的问题可能表明存在`I/O`问题，如果您的 JVM 一直在执行*Full GC*（如果您的堆几乎已满），情况可能就是这种情况。

首先要做的是增加堆`-Xmx`。这可能会解决问题，或者 - 如果你有内存泄漏，它不会，你最终会`OutOfMemoryError`再次得到。

在这种情况下，您需要分析内存转储。有关一些说明，请参阅[我在此线程中的回答。](https://stackoverflow.com/questions/10854868/how-to-troubleshoot-out-of-memory-error-on-production-system/10855292#10855292)

此外，启用垃圾收集日志（使用`-Xloggc:/path/to/log.file -XX:+PrintGCDetails`）然后使用[GCViewer](http://www.tagtraum.com/gcviewer.html)或[HPJmeter](https://h20392.www2.hp.com/portal/swdepot/displayProductInfo.do?productNumber=HPJMETER)分析它们可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:19:02.063

您可以通过指定选项来设置 JVM 堆大小

```
-Xmx1024m  //for 1024 MB 
```

请参阅此处以设置[Tomcat的选项](http://tomcat.apache.org/tomcat-6.0-doc/config/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:20:01.070

如果您有 4 GB 内存，则可以为 HEAP 分配 3GB -

-Xmx3GB

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:23:41.070

您还可以使用以下命令更改可用的 perm gen 大小：

-XX:PermSize=128m -XX:MaxPermSize=256m

# android - Android openGL 尝试通过对多个网格使用相同的顶点来提高 FPS

> ID：10893825
> 
> 赞同：0
> 
> 时间：2012-06-05T08:17:01.723
> 
> 标签：android, opengl-es

我正在开发一个游戏，在屏幕上呈现类似的对象。问题是每次添加一个新对象，都需要处理更多的顶点，因此 FPS 会降低。

由于我是openGl的初学者，我对提高性能有一些一般性的想法，我只是不知道openGl允许我做什么。

1.  由于我的大多数对象都是相同的（相同数量的顶点、相同的颜色、相同的 uv 和相同的法线），但只有对象的位置和旋转不同，是否可以在每个对象上只发送一次相似对象的顶点frame render ，然后为所有对象调用 drawElements 并仅修改对象位置？

2.  是否有可能更进一步，上传那些相似的顶点，仅在第一次创建场景时上传一次，并且在每一帧渲染上只为每个对象调用 drawElements？

目前，我正在发送每个对象的顶点，如下所示：

```
.......
gl.glNormalPointer(GL10.GL_FLOAT, 0, normals);
gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, colors);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertices);
gl.glPushMatrix();
gl.glTranslatef(position);
gl.glRotatef(rotation);
gl.glScalef(scale);    
gl.glDrawElements(renderType,nr,GL10.GL_UNSIGNED_SHORT, faces);
gl.glPopMatrix();
........ 
```

我在想我应该做这样的事情：

```
.......
gl.glNormalPointer(GL10.GL_FLOAT, 0, normals);
gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, colors);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertices);
for(eachObject)
{
gl.glPushMatrix();
gl.glTranslatef(position);
gl.glRotatef(rotation);
gl.glScalef(scale);
gl.glDrawElements(renderType,nr,GL10.GL_UNSIGNED_SHORT, faces);
gl.glPopMatrix();
........
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:24:39.230

1.  是的
2.  是的（甚至更好）

您的第二个代码示例看起来与您应该做的完全一样。

没有理由需要多次上传顶点，在初始化时这样做就足够了。之后，只需在您想要渲染的任何时候设置指针。您可以根据需要使用不同的平移/旋转多次调用 glDrawElements。

# hibernate - Hibernate Search @IndexedEmbedded 没有索引

> ID：10893829
> 
> 赞同：2
> 
> 时间：2012-06-05T08:17:08.767
> 
> 标签：hibernate, search, indexing, hibernate-search

```
@Entity
@Indexed
@SequenceGenerator(name="subjectSeq", sequenceName="subjectSeq")
public class AppInfo {

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="subjectSeq")
    public Integer id;

    public Integer district;

    @Field
    @Boost(2.0f)
    public String appName;

    public String thumbnail;

    public Integer statistics;

    @Field
    public String description;

    public Integer publisher;

    public Date publishAt = new Date();

    @ManyToOne
    @IndexedEmbedded
    @Boost(1.5f)
    @JoinColumn(name="type")
    public AppType type;

    @ManyToMany
    @JoinTable(name="appInfo_appCatalog",
    joinColumns={@JoinColumn(name="info_id", referencedColumnName="id")},
    inverseJoinColumns={@JoinColumn(name="catalog_id", referencedColumnName="id")})
    @IndexedEmbedded
    @Boost(1.5f)
    public List<AppCatalog> catalogs;
}

@Entity
@SequenceGenerator(name="appTypeSeq", sequenceName="appTypeSeq")
public class AppType {

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="appTypeSeq")
    public Integer id;

    @Field
    public String name;
} 
```

我的搜索代码是：

```
QueryBuilder qb = fullTextEntityManager.getSearchFactory()
            .buildQueryBuilder().forEntity( AppInfo.class ).get();
org.apache.lucene.search.Query query = qb
              .keyword().fuzzy()
              .onFields("appName", "description", "type.name", "catalogs.name")
              .matching(searchString)
              .createQuery(); 
```

问题是匹配字段“appName”和“description”的“searchString”有结果，但匹配“type.name”或“catalogs.name”的没有结果

实体 AppType 是否没有索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:34:09.220

到目前为止，代码看起来还不错，因为您使用的是*@IndexedEmbedded*，所以*AppType*也应该被索引。为什么你认为不是？你有没有和[Luke](http://code.google.com/p/luke/)一起检查过 Lucene 索引来检查内容？通过这种方式，您可以验证 type.name 是否在索引中，以及是否还可以查看索引了哪些标记。分析仪通常也存在问题。根据您在索引中使用的可搜索标记的分析器，可能不是您所期望的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-04T03:34:15.220

在 AppType 类上添加 @Indexed 注释。

# caching - Memcache 标签模拟

> ID：10893831
> 
> 赞同：2
> 
> 时间：2012-06-05T08:17:15.967
> 
> 标签：caching, memcached

**Memcached**是一个很好的*可扩展缓存层*，但它有一个大问题（对我来说）**它无法管理标签**。并且标签对于组失效非常有用。

我做了一些研究，我知道一些解决方案：

*   Memcache 标签分叉[http://code.google.com/p/memcached-tag/](http://code.google.com/p/memcached-tag/)
*   模拟标签的代码实现（参考。[使用标准 php 库使多个 memcache 键无效的最佳方法？](https://stackoverflow.com/questions/6227482/best-way-to-invalidate-a-number-of-memcache-keys-using-standard-php-libraries)）

我最喜欢的解决方案之一是命名空间，这个解决方案在[memcached wiki](http://code.google.com/p/memcached/wiki/NewProgrammingTricks#Namespacing)上进行了解释。

但是我不明白**为什么我们在键缓存上集成命名空间？**

*根据我*对命名空间技巧的理解：要生成密钥，我们必须获取命名空间的值（在缓存上）。如果`namespace->value`缓存条目被驱逐，我们将无法再计算获取缓存的好键......所以这个命名空间的缓存*实际上是*无效的（我说虚拟是因为缓存仍然存在但我们无法再计算要访问的键）。

那么为什么我们不能简单地实现类似的东西：

```
tag1->[key1, key2, key5]
tag2->[key1, key3, key6]
key1->["value" => value1, "tags" => [tag1, tag2]]
key2->["value" => value2, "tags" => [tag1]]
key3->["value" => value3, "tags" => [tag3]]
etc... 
```

有了这个实现，我又遇到了一个问题，即如果`tag1->[key1, key2, key5]`被驱逐，我们就不能再使 tag1 键失效。但随着

```
function load($cacheId) {
   $cache = $memcache->get($cacheId);
   if (is_array($cache)) {
      $evicted = false;
      // Check is no tags have been evicted
      foreach ($cache["tags"] as $tagId) {
         if (!$memcache->get($tagId) {
            $evicted = true;
            break;
         }
      }
      // If no tags have been evicted we can return cache
      if (!$evicted) {
         return $cache
      } else {
         // Not mandatory
         $memcache->delete($cacheId);
      }
      // Else return false
      return false;
   }
} 
```

*是伪代码*

如果所有这些标签都可用，我们一定会返回缓存。

我们可以说的第一件事是*“每次您需要获取缓存时，我们都必须检查（/获取）X标签，然后检查数组”*。但是对于命名空间，我们还必须检查（/get）命名空间来检索命名空间值，主要差异是在数组下迭代......但我认为键不会有很多标签（我无法想象超过 10 个标签/键对于我的应用程序），所以在大小为 10 的数组下迭代它的速度非常快..

**所以我的问题是：**有人已经考虑过这个实现了吗？限制是什么？我是不是忘记了什么？ETC

或者我可能误解了命名空间的概念......

*PS：我不是在寻找像 memcached-tag 或 redis 这样的另一个缓存层*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:51:32.100

I think you are forgetting something with this implementation, but it's trivial to fix.

Consider the problem of multiple keys sharing some tags:

```
key1 -> tag1 tag2
key2 -> tag1 tag2
tag1 -> key1 key2
tag2 -> key1 key2 
```

Say you load key1\. You double check both tag1 and tag2 exist. This is fine and the key loads.

Then tag1 is somehow evicted from the cache.

Your code then invalidates tag1\. This should delete key1 and key2 but because tag1 has been evicted, this does not happen.

Then you add a new item key3\. It also refers to tag1:

```
key3 -> tag1 
```

When saving this key, tag1 is (re)created:

```
tag1 -> key3 
```

Later, when loading key1 from cache again your check in the pseudo code to ensure tag1 exists succeeds. and the (stale) data from key1 is allowed to be loaded.

Obviously a way around this is to check the values of the tag1 data to ensure the key you are loading is listed in that array and only consider your key valid if this is true.

Of course this could have performance issues depending on your use case. If a given key has 10 tags, but each of those tags is used by 10k keys, then you are having to do search through an array of 10k items to find your key and repeat that 10 times each time you load something.

At some point, this may become inefficient.

An alternative implementation (and one which I use), is more appropriate when you have a very high read to write ratio.

If reads are very much the common case, then you could implement your tag capability in a more permanent database backend (I'll assume you have a db of sorts anyway so it only needs a couple extra tables here).

When you write an item in the cache, you store the key and the tag in a simple table (key and tag columns, one row for each tag on a key). Writing a key is simple: "delete from cache_tags where id=:key; foreach (tags as tag) insert into cache_tags values(:key, :tag); (NB use extended insert syntax in real impl).

When invalidating a tag, simply iterate over all keys that have that tag: (select key from cache_tags where tag=:tag;) and invalidate each of them (and optionally delete the key from the cache_tags table too to tidy up).

If a key is evicted from memcache then the cache_tags metadata will be out of date, but this is typically harmless. It will at most result in an inefficiency when invalidating a tag where you attempt to invalidate a key which had that tag but has already been evicted.

This approach gives "free" loading (no need to check tags) but expensive saving (which is already expensive anyway otherwise it wouldn't need to be cached in the first place!).

So depending on your use case and the expected load patterns and usage, I'd hope that either your original strategy (with more stringent checks on load) or a "database backed tag" strategy would fit your needs.

HTHs

# jsf - 将 JSF 1.1 应用程序迁移到 WAS7.0 会导致 java.lang.NullPointerException 在 javax.faces.webapp.FacesServlet.init(FacesServlet.java:144)

> ID：10893838
> 
> 赞同：1
> 
> 时间：2012-06-05T08:18:12.217
> 
> 标签：jsf, websphere

我有一个 JSF 1.1 应用程序，它在 WAS 6.0 中运行良好，需要迁移到 WAS 7.0，但它会导致以下异常，即使我已经`parent_last`设置`deployment.xml`：

```
Uncaught init() exception created by servlet Faces Servlet in application: 
java.lang.NullPointerException
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:144)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:325)** 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:04:03.187

当找不到应用程序工厂时，您将在 JSF 1.1 中遇到此异常。这反过来又可能导致由于`ConfigureListener`某种原因没有运行。这通常会根据`.tld`JSF 库中的文件自动调用。您始终可以尝试通过将以下条目添加到 webapp 来强制 webapp 运行它`web.xml`：

```
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

但是，我不保证它会完全解决问题。您现在*可能*会遇到不同的异常，需要单独调查和修复。

WAS 7.0 附带了 JSF 1.2，并且（精心设计的）JSF 1.1 代码在技术上与 JSF 1.2 100% 兼容，所以我宁愿建议在您的 web 应用程序中删除 JSF 1.1 库并将其更改`faces-config.xml`为 JSF 1.2兼容的。

# jquery - jQuery中的indexOf方法？

> ID：10893842
> 
> 赞同：0
> 
> 时间：2012-06-05T08:18:18.873
> 
> 标签：jquery, html

我在 var 名称“str”中丢失了特殊字符，现在我希望用户在其中输入字符，然后根据字符串的 Indexof 检查提醒他“hiii”否则“byeee”

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
$(function(){
    $('#me').click(function(){
    var Amd=$('.text').val();

    var str="[,],{,},<,>"

    if(Amd.indexOf(str)>-1){

        alert('hiiiii')

        }       
    else {
        alert('byee')
        }
    })
    })
</script>
</head>
<body>
<input type="text" class="text" />
<input type="button" value="click" id="me"/>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:25:23.860

您可以使用正则表达式匹配来执行此操作，顺便说一下，您应该`;`为每一行添加，这是一个好习惯。

```
$(function () {
    $('#me').click(function () {
        var Amd = $('.text').val();
        if (Amd.match(/[\[\]{}<>]/)) {
            alert('hiiiii');
        } else {
            alert('byee');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:25:21.640

使用`RegExp`：

```
if( Amd.match(new RegExp(/[\[\]\{\}<>]/)) ) {
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:31:05.200

检查这个。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { color:blue; }
  span { color:red; }
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(function(){

    $('#me').click(function(){
    var Amd=$('.text').val();

    var str="\[,],{,},<,>";
    var n=Amd.indexOf(str);
    if(n>-1)
    {
       alert("Hi");
    }
    else
       alert("Bye");

    });
    });
</script>
</head>
<body>
<input type="text" class="text" />
<input id="me" value="Click Me" type="button" />

</body>
</html> 
```

如果您想检查任何符号，如 " 或 { 或 [ 双引号 ("") 中的任何内容，请`\`在该符号之前包含。

# c++ - QSortFilterProxyModel 对多列进行排序

> ID：10893843
> 
> 赞同：2
> 
> 时间：2012-06-05T08:18:27.973
> 
> 标签：c++, model-view-controller, qt, sorting, model

我正在尝试实现一个可在多个列上排序的表。Qt 的 QSortFilterProxyModel 只支持在一列上排序（至少在 Qt 4.6.2 中）。

我在 github 上通过 dimkanovikov找到[了这个解决方案，但它缺乏对添加行的动态更新。](https://github.com/dimkanovikov/MultisortTableView)我的意思是，模型发生了变化，beginInsertRows()、beginRemoveRows()、它们对应的 end..-methods 和 dataChanged() 信号被发出。理想情况下，我只想更新这些行，但模型至少应该对这些变化做出反应。

Qt 网站上有另一个常见问题解答项目，它对 QTableWidget 进行排序，但它也缺乏动态更新。

我是 Qt 的新手，我想获得一些关于我应该如何去做的指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:24:28.937

有一个稍微不优雅的解决方案，它总是用于对多列进行排序。

您必须继承`QSortFilterProxyModel`并重新实现`bool lessThan(const QModelIndex &rLeft, const QModelIndex &rRight) const`. 不要只比较两个给定的索引，而是检查所有列：

```
int const left_row  = rLeft.row();
int const right_row = rRight.row();

int const num_columns = sourceModel()->columnCount();
for(int compared_column = rLeft.column(); compared_column<num_columns; ++compared_column) {
    QModelIndex const left_idx = sourceModel()->index(left_row, compared_column, QModelIndex());
    QModelIndex const right_idx = sourceModel()->index(right_row, compared_column, QModelIndex());

    QString const leftData = sourceModel()->data(left_idx).toString();
    QString const rightData = sourceModel()->data(right_idx).toString();

    int const compare = QString::localeAwareCompare(leftData, rightData);
    if(compare!=0) {
        return compare<0;
    }
}

return false; 
```

然后你可以调用`sort(0)`你的`QSortFilterProxyModel`子类，它会对所有的列进行排序。`setDynamicSortFilter(true)`当您希望在模型数据更改时动态地重新排序已排序的行时，也不要忘记调用。

要支持按升序或降序对任意列进行排序，您必须将此信息保存在 a 中并在调用`QList`时进行相应的比较。`lessThan`在列表中，您将按优先级顺序排列列，并按相同顺序进行比较。您还应该以某种预定义的顺序对其他“非活动”列进行排序，否则默认情况下不会对它们进行排序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T21:01:40.260

您可以将 的排序角色设置为与`QSortFilterProxyModel`默认值不同的内容。然后，在您的模型方法中，如果使用角色调用它，则返回正确的排序键，例如通过连接所涉及列的字符串。`Qt::DisplayRole``setSortRole(Qt::UserRole)``data()``Qt::UserRole`

# java - Java 正则表达式的折磨

> ID：10893844
> 
> 赞同：1
> 
> 时间：2012-06-05T08:18:36.387
> 
> 标签：java, regex

我创建了以下条件正则表达式，它似乎可以在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)上工作，但不能在 Java 中编译。

正则表达式如下：

```
X: (\d+). Y: (\d+)(?(?=:inherit=(true|false))) 
```

它应该拉出我的 X、Y 值和（如果存在）后面跟着 :inherit= 的值

例如

```
X: 192131, Y: 1923123 (matches 192131, 1923123)

X: 192131, Y: 1923123:inherit=true (matches 192131, 1923123, true)

X: 192131, Y: 1923123:inherit=false (matches 192131, 1923123, false) 
```

在Java中我得到一个错误：

```
Unknown inline modifier near index 20 X: (\d+). Y: (\d+)(?(?=:inherit=(true|false))) 
```

索引 20 是第二个括号`(?(?`

有人可以帮我用 Java 把它弄好，也许还能解释为什么网站测试人员会处理它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:28:53.133

`(?(`不是[有效的语法](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

### 采用：

```
X:\s(\d+),\sY:\s(\d+)(?::inherit=(true|false))? 
```

你需要逃跑`\`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:25:43.683

您使用的工具具有 actionscript 正则表达式语法，这似乎与 java sytax 不同。

一个可行的解决方案可能是：`X: ([0-9]+). Y: ([0-9]+)(?::inherit=(true|false))?`

这是一个工作示例：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class plop {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String regex = "X: ([0-9]+). Y: ([0-9]+)(?::inherit=(true|false))?";

        String[] elem = new String [] {
                "X: 192131, Y: 1923123 (matches 192131, 1923123)",
                "X: 192131, Y: 1923123:inherit=true (matches 192131, 1923123, true)",
                "X: 192131, Y: 1923123:inherit=false (matches 192131, 1923123, false)"
        };

        for (String s : elem) {
            Pattern compile = Pattern.compile(regex);
            Matcher matcher = compile.matcher(s);
            if (matcher.find()) {
                System.out.print("'"+matcher.group(0)+"'");
                System.out.print(", X:"+matcher.group(1));
                System.out.print(", Y:"+matcher.group(2));
                if (matcher.group(3) !=null)
                    System.out.print(", inherit:"+matcher.group(3));
                System.out.println();
            }
        }
    }

} 
```

结果：

```
'X: 192131, Y: 1923123', X:192131, Y:1923123
'X: 192131, Y: 1923123:inherit=true', X:192131, Y:1923123, inherit:true
'X: 192131, Y: 1923123:inherit=false', X:192131, Y:1923123, inherit:false 
```

# c++ - Qt 动画滞后

> ID：10893852
> 
> 赞同：1
> 
> 时间：2012-06-05T08:19:05.673
> 
> 标签：c++, qt

我正在使用 QTimeLine 为跟踪鼠标的 QGraphicsView 顶部的小部件设置动画。单击鼠标右键时动画开始，但是当鼠标移动时，动画变得非常不稳定，有时会停止动画。我用过`setUpdateInterval(10)`，但没有帮助。

我在想，当我移动鼠标时，调度程序线程太忙而无法处理任何动画。如果是这种情况，我可以通过产生自己的线程来提高其优先级来强制处理动画。否则，我还能尝试什么？

# java - WEKA HierarchicalClusterer 类总是返回 2 个集群

> ID：10893853
> 
> 赞同：-2
> 
> 时间：2012-06-05T08:19:06.947
> 
> 标签：java, cluster-analysis, weka, data-mining, hierarchical-clustering

这是我的代码：

```
import weka.clusterers.ClusterEvaluation;
import weka.clusterers.HierarchicalClusterer;
import weka.clusterers.EM;
import weka.core.converters.CSVLoader;
import weka.core.converters.ConverterUtils.DataSource;
import weka.core.neighboursearch.PerformanceStats;

import java.io.File;
import java.io.IOException;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.Enumeration;

import weka.core.*;

public class WEKASample1 {

public static void main(String[] args) {

    Instances data = null;
    CSVLoader csvLoader = new CSVLoader();
    try {
        csvLoader.setSource(new File("D:\\WEKA\\numbers.csv"));

        data = csvLoader.getDataSet();
                HierarchicalClusterer h = new HierarchicalClusterer();

            DistanceFunction d = new DistanceFunction() {

        @Override
        public void setOptions(String[] arg0) throws Exception {

        }

        @Override
        public Enumeration listOptions() {
            return null;
        }

        @Override
        public String[] getOptions() {
            return null;
        }

        @Override
        public void update(Instance arg0) {

        }

        @Override
        public void setInvertSelection(boolean arg0) {

        }

        @Override
        public void setInstances(Instances arg0) {

        }

        @Override
        public void setAttributeIndices(String arg0) {

        }

        @Override
        public void postProcessDistances(double[] arg0) {

        }

        @Override
        public boolean getInvertSelection() {
            return false;
        }

        @Override
        public Instances getInstances() {
            return null;
        }

        @Override
        public String getAttributeIndices() {
            return null;
        }

        @Override
        public double distance(Instance arg0, Instance arg1, double arg2,
                PerformanceStats arg3) {
            return 0;
        }

        @Override
        public double distance(Instance arg0, Instance arg1, double arg2) {
            return 0;
        }

        @Override
        public double distance(Instance arg0, Instance arg1, PerformanceStats arg2)
                throws Exception {
            return 0;
        }

        @Override
        public double distance(Instance arg0, Instance arg1) {

            double s1 = arg0.value(0);
            double s2 = arg1.value(0);

            return Double.POSITIVE_INFINITY;
        }
    };

    h.setDistanceFunction(d);
    SelectedTag s = new SelectedTag(1, HierarchicalClusterer.TAGS_LINK_TYPE);
    h.setLinkType(s);

    h.buildClusterer(data);

//      double[] arr;
//      for(int i=0; i<data.size(); i++) {
//          
//          arr = h.distributionForInstance(data.get(i));
//          for(int j=0; j< arr.length; j++)
//              System.out.print(arr[j]+",");
//          System.out.println();
//          
//      }

        System.out.println(h.numberOfClusters());
    } catch (Exception e) {
        e.printStackTrace();
    }

}

} 
```

现在，即使我也修改了 distancefucntion 方法，生成的簇数的输出始终为 2。如果是哪个集群，我怎么知道哪个实例？当我取消注释上面为获取实例的分布而编写的代码时，我得到一个 ArrayOutOfBound 异常。

但总的来说，谁能解释一下 WEKA 在这里是如何分层完成聚类的？

这是我的数据集，长度为 10，维度为 2：

```
1    1
2    2
3    3
4    4
5    5
6    6
7    7
8    8
9    9
10   10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:04:50.097

尝试一个真实的数据集，而不是一个均匀分布的点数组。

因为它们到下一个的距离都是一样的！对于单链路，这应该是一个集群，但可能存在一些舍入问题。

另外，你使用的距离函数也都是0/Infinity！

首先尝试使用 Weka UI。

# jquery - 如何使用跨浏览器显示隐藏内容 div？

> ID：10893857
> 
> 赞同：0
> 
> 时间：2012-06-05T08:19:10.400
> 
> 标签：jquery, cross-browser, jquery-animate

我正在使用动画做一些内容 div 显示隐藏，但目前它是固定宽度的工作，但我想不使用宽度，它也应该在缩小时跨浏览器，当 div 显示模式时它必须是弹性工作。

代码中的任何建议或修改。

jsfiddle [http://jsfiddle.net/sureshsummy/xUKRf/5/](http://jsfiddle.net/sureshsummy/xUKRf/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:31:17.203

这是您的固定宽度问题的解决方案：

```
$("#content").animate({
    width: $('body').width() -100
}, {
    queue: false,
    duration: 10
}).toggle(); 
```

**编辑：** 要为隐藏设置动画，请再次将动画功能放入切换中：

```
$("#content").animate({
    width: $('body').width() -100
}, {
    queue: false,
    duration: 1000
}).toggle({
    width: 100
}, {
    queue: false,
    duration: 1000
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:35:57.053

为了让它响应你不应该使用固定的措施（px）宽度或填充或边距。相反，您可以使用 %。

我对你的 CSS 做了一些调整：http: [//jsfiddle.net/xUKRf/10/](http://jsfiddle.net/xUKRf/10/)

我将容器和内容 div 的宽度、填充和边距更改为 %

# objective-c - “函数指针的有序比较”警告是什么意思？

> ID：10893859
> 
> 赞同：2
> 
> 时间：2012-06-05T08:19:14.950
> 
> 标签：objective-c, ios

我收到了这个编译器警告：

```
Ordered comparison of function pointers ('IMP' (aka 'id(*)(id,SEL,...)')and "IMP") 
```

当我尝试比较两个实体时：

```
for (i = 0; k < 30; k++) {
        IMP imp = getValue(class_method[i]);
        if (imp <= (IMP)currDesc->address) {//this is the line causing the warning
          size_t diff = (size_t)classMap->address - (size_t)imp;
          if (diff < mediumSize) {
            best_method = class_method[i];
            is_class_method = YES;
            mediumSize = diff;
          }
        } 
```

你能否解释一下这个警告的最终原因以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:52:39.630

直接回答这个问题，当您尝试比较两个函数指针的地址时，会生成函数指针警告的有序比较。在大多数情况下，这种比较是错误的，因为比较两个函数在内存中的位置没有什么价值。

这里可能是也可能不是，但是如果您需要函数指针可以直接比较，您将需要显式关闭警告（如果有的话，我找不到编译器选项）或将两个指针强制转换为支持比较的值，例如 void*。

# c# - 如何从文本框中过滤gridview？

> ID：10893860
> 
> 赞同：1
> 
> 时间：2012-06-05T08:19:29.160
> 
> 标签：c#, asp.net, gridview

我需要过滤从表中检索过滤数据的网格视图。因此，我将 gridview 绑定到数据集。现在我似乎找不到进一步过滤它的解决方案。

```
protected void Page_Load(object sender, EventArgs e)
{
if (!IsPostBack)
    {
        DataSet ds = new DataSet();
        SqlConnection myCon = new SqlConnection(connectionstring);
        SqlDataAdapter adapter = new SqlDataAdapter(cmd, myCon);
        adapter.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
//need to insert code here for filtering GridView1 based on TextBox1.Text        
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:29:15.080

尝试这个：

```
protected void Button1_Click(object sender, EventArgs e)
{

    DataSet ds = new DataSet();
    SqlConnection myCon = new SqlConnection(connectionstring);
    SqlDataAdapter adapter = new SqlDataAdapter(cmd, myCon);
    adapter.Fill(ds);
    DataView view = new DataView();
    view.Table = ds.Tables[0];
    view.RowFilter = "ColumnName = " + TextBox1.Text.Trim();
    GridView1.DataSource = view;
    GridView1.DataBind();
} 
```

*   你必须重构你的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:59:41.627

这是处理 GridView 的（两个方向）和（两列）的`paging`完整`sorting`示例`filtering`。

```
// store sorting across postbacks in a ViewState variable
public string SortExpression
{
    get
    {
        if (ViewState["GridSort"]== null)
        {
            ViewState["GridSort"] = "Column1 ASC";
        }
        return ViewState["GridSort"].ToString();
    }
    set { ViewState["GridSort"] = value; }
}

protected void Page_load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        BindGrid();
    }
} 
```

这是执行所有操作的主要方法（包括`filter`-function）：

```
private void BindGrid()
{
    try
    {
        var tblData = new DataTable();
        var filter1 = TextBox1.Text.Trim();
        var filter2 = TextBox2.Text.Trim();
        using (var sqlCon = new System.Data.SqlClient.SqlConnection(connectionstring))
        {
            String sql = String.Empty;
            var sqlCmd = new System.Data.SqlClient.SqlCommand();
            if (filter1.Length != 0 && filter2.Length != 0)
            {
                sql = "SELECT Column1,Column2 FROM Table WHERE Column1 LIKE @Column1 AND Column2 LIKE @Column2 ORDER BY {0}";
                sqlCmd.Parameters.AddWithValue("@Column1", string.Format("%{0}%", filter1));
                sqlCmd.Parameters.AddWithValue("@Column2", string.Format("%{0}%", filter2));
            }
            else if (filter1.Length != 0)
            {
                sql = "SELECT Column1,Column2 FROM Table WHERE Column1 LIKE @Column1 ORDER BY {0}";
                sqlCmd.Parameters.AddWithValue("@Column1", string.Format("%{0}%", filter1));
            }
            else if (filter2.Length != 0)
            {
                sql = "SELECT Column1,Column2 FROM Table WHERE Column2 LIKE @Column2 ORDER BY {0}";
                sqlCmd.Parameters.AddWithValue("@Column2", string.Format("%{0}%", filter2));
            }
            else
            {
                // no filter, select all
                sql = "SELECT Column1,Column2 FROM Table ORDER BY {0}";
            }
            sqlCmd.CommandText = string.Format(sql, this.SortExpression);
            sqlCmd.Connection = sqlCon;
            using (System.Data.SqlClient.SqlDataAdapter objAdapter = new System.Data.SqlClient.SqlDataAdapter(sqlCmd))
            {
                objAdapter.Fill(tblData);
            }
        }
        GridView1.DataSource = tblData;
        GridView1.DataBind();
    }
    catch (Exception)
    {
        // log
        throw;
    }
} 
```

`Paging`：

```
private void GridView1_PageIndexChanging(object sender, System.Web.UI.WebControls.GridViewPageEventArgs e)
{
    this.GridView1.PageIndex = e.NewPageIndex;
    BindGrid();
} 
```

过滤器按钮单击：

```
private void BtnFilter_Click(object sender, System.EventArgs e)
{
    BindGrid();
} 
```

`Sorting`：

```
protected void GridView1_Sorting(object sender, System.Web.UI.WebControls.GridViewSortEventArgs e)
{
    string currentSortColumn = null;
    string currentSortDirection = null;
    currentSortColumn = this.SortExpression.Split(' ')[0];
    currentSortDirection = this.SortExpression.Split(' ')[1];
    if (e.SortExpression.Equals(currentSortColumn))
    {
        //switch sort direction
        switch (currentSortDirection.ToUpper())
        {
            case "ASC":
                this.SortExpression = currentSortColumn + " DESC";
                break;
            case "DESC":
                this.SortExpression = currentSortColumn + " ASC";
                break;
        }
    }
    else
    {
        this.SortExpression = e.SortExpression + " ASC";
    }
    BindGrid();
} 
```

刚刚从VB手动转换，所以我希望没有剩余的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:28:55.377

```
sql = new SqlConnection(Connection.con);
            adapter = new SqlDataAdapter(@"select EntryID * from Table where Name like @Name ", sql);
            adapter.SelectCommand.Parameters.AddWithValue("@Name", string.Format("%{0}%", textBox1.Text));
            dt = new DataTable();
            adapter.Fill(dt);
            dataGridView1.DataSource = dt; 
```

# ios - 无法自动更新表格视图

> ID：10893861
> 
> 赞同：0
> 
> 时间：2012-06-05T08:19:33.610
> 
> 标签：ios, tableview

我有一个包含许多视图和一个表格视图的视图控制器。

tableview 的单元格是自定义的，因此还有另一个类用于设置单元格。每个单元格中都有一个按钮。此按钮的图像根据单元格的内容而变化（此内容从数据库中读取）。

基本上，当用户按下按钮时，它会将自身更改为另一个图像，将新状态写入 DB，但 tableview 不会自动更新。

按钮的方法在自定义单元格类中，所以我尝试实例化我的视图控制器（带有 tableview 的那个）并执行一种方法来更新视图和 tableview 中的一些标签：

```
ViewControllerWithTable *vc = [[ViewControllerWithTable alloc] init];
[vc updateEverything]; 
```

但这不起作用。从相同的“ViewControllerWithTable”（添加重新加载按钮）调用的相同“updateEverything”方法完美运行。在 viewWillAppear 方法中添加“[tableView reloadData]”将不起作用，因为所有操作都在同一个视图中完成。

我错过了什么？

编辑：添加一些代码更清楚。

这是我用来更新表格视图的方法。它位于带有嵌入式 tableview 的 ViewController 内，当由其中一个视图中的按钮触发时，它可以工作：

```
- (void) updateEverything {
    // lots of DB writing and reading, plus label text changing inside all the views
    [tableView reloadData];

} 
```

这是按钮按下的 IBAction，它位于自定义单元格类中：

```
-(void) btnPresaPressed:(UIButton *)sender {
    AppDelegate *deleg = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    deleg.did = sender.tag;
    NSString *s1 = NSLocalizedString(@"ALERT_TITLE", nil);
    NSString *s2 = NSLocalizedString(@"ALERT_BODY", nil);
    NSString *s3 = NSLocalizedString(@"YES", nil);
    NSString *s4 = NSLocalizedString(@"NO", nil);
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:s1
                                                        message:s2
                                                       delegate:self
                                              cancelButtonTitle:s4
                                              otherButtonTitles:s3, nil];
    [alertView setTag:1];
    [alertView show];

} 
```

此方法显示一个调用另一个方法的警报视图，始终在自定义单元格类中：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    AppDelegate *deleg = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    DbOperations *db = [[DbOperations alloc] init];
    NSString *alrtTitle = [alertView buttonTitleAtIndex:buttonIndex];
    NSString *s3 = NSLocalizedString(@"YES", nil);
    NSString *s4 = NSLocalizedString(@"NO", nil);
    switch (alertView.tag) {
        case 1:
            //
            break;
        case 2:
            if ([alrtTitle isEqualToString:s3]) {
                // DB writing and reading
                ViewControllerWithTable *vc = [[ViewControllerWithTable alloc] init];
                [vc updateEverything];
            } else if ([alrtTitle isEqualToString:s4]){
                //

            }
            break;
        case 3:
            if ([alrtTitle isEqualToString:s3]) {
                //
            }
            break;
        default:
            break;
    }

} 
```

在这种情况下，updateEverything 方法不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:24:30.130

添加更多代码后编辑：

在以下几行中：

```
 if ([alrtTitle isEqualToString:s3]) {
            // DB writing and reading
            ViewControllerWithTable *vc = [[ViewControllerWithTable alloc] init];
            [vc updateEverything]; 
```

您正在实例化一个与显示表格视图的原始视图控制器完全无关的新视图控制器。因此，您将更新消息发送到错误的对象。

你需要的是一种机制，让你的单元知道哪个是正确的控制器来发送消息。

一种简单的解决方案是使用`NSNotificationCenter`：

1.  视图控制器为某种通知注册自己：

    ```
    [[NSNotificationCenter defaultCenter]
    addObserver:self
    selector:@selector(updateEverything:)
    name:kCellSentUpdateMessageNotification
    object:nil]; 
    ```

2.  您的单元格发送通知，而不是直接调用消息：

    ```
    [[NSNotificationCenter defaultCenter] postNotificationName:kCellSentUpdateMessageNotification object:nil]; 
    ```

老答案：

你应该打电话

```
 [self.tableView reloadData] 
```

从您的`updateEverything`方法实现。这将重新加载表数据，有效地更新其行外观。`updateEverything`显然，当连续点击按钮以使其工作时，应调用该方法。

如果这不起作用，请提供更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:29:13.230

你有没有尝试把

`[[self tableView] reloadData];`

我记得我遇到过这样的问题，上面的这条线解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:43:51.697

这是你的问题：

> 按钮的方法在自定义单元格类中，所以我尝试实例化我的视图控制器（带有 tableview 的那个）并执行一种方法来更新视图和 tableview 中的一些标签：

您创建了一个全新的视图控制器，它不了解您的 tableview。最好的办法是在您的单元格子类中创建一个属性，并在您设置单元格时将其设置到您的视图控制器。然后您可以在该属性上调用您的 updateEverything 方法。

# xml - Titanium Mobile - 使用 suds.js 解析来自肥皂网络服务的 xml 响应

> ID：10893862
> 
> 赞同：1
> 
> 时间：2012-06-05T08:19:33.760
> 
> 标签：xml, web-services, soap, titanium-mobile, suds

我正在尝试从肥皂网络服务接收信息，但我真的不知道如何显示我得到的结果。

我只能显示第一个名为的全局标签：

这给了我一个很长的 xml 结果：**响应**。

当我尝试使用另一个标记名时，它不会给我任何结果。

这是我的代码：

```
Ti.include('suds.js');

var win = Ti.UI.createWindow({
    backgroundColor : '#ffffff'

});

var view = Ti.UI.createScrollView({
    layout: 'Vertical',
    contentHeight:'auto'
});

var label = Ti.UI.createLabel({
    color : '#000000'
});

var url = "http://www.webservicex.net/globalweather.asmx";

var callParams = {
    CountryName : 'belgium'
};

var suds = new SudsClient({
    endpoint : url,
    targetNamespace : 'http://www.webserviceX.NET'
});

suds.invoke('GetCitiesByCountry', callParams, function(xmlDoc) {

    var response = xmlDoc.documentElement.getElementsByTagName('GetCitiesByCountryResult');

    if (response && response.length > 0) {

        label.text = response.item(0).text;
    } else {
        label.text = 'NOT OK';
    }

});

view.add(label);
win.add(view);
win.open(); 
```

响应类似于：

```
<NewDataSet>
 <Table>
  <Country>Belgium</Country>
  <City>Antwerpen</City>
 </Table>
 <Table>
  <Country>Belgium</Country>
  <City>Beauvechain</city>
 </Table>
</NewDataSet> 
```

response.length = 1

只能显示 reponse.item(0).text 我不想要所有的东西，但只是为了举例一个只给我城市的循环。

当我尝试使用 getElementsByTagName('Table') 更改 getElementsByTagName('GetCitiesByCountryResult') 时，会出现“not ok”消息。

请帮忙，我该怎么做才能解析我需要的所有信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T11:07:58.607

您应该先尝试将响应存储在数组中，然后您可以轻松提取所需的信息。例如：var show=[]; for(var i=0;i

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T07:21:05.213

使用这个函数它的工作......如果你想显示第一个标签，那么只使用 getFirstChild()，如果你想显示其他标签，那么使用这个 getFirstChild().getNextSibling()

# forms - 未显示表单默认值

> ID：10893873
> 
> 赞同：3
> 
> 时间：2012-06-05T08:20:19.427
> 
> 标签：forms, symfony

问题是这样的。我正在尝试设置默认表单值，但我无法实现这一点。

页面布局

```
{% extends bundle ~ "Bundle::reg.html.twig" %}
{% form_theme regForm   'AcmeBundle:Form:order_type_fields.html.twig' %}
{% block content %}
<form action="{{ path('reg') }}" {{ form_enctype(regForm) }} method="POST">
    <div>
     {{ form_widget( regForm.firstname )}}
    </div>
    {{ form_rest( regForm )}}
    <input type="submit>
</form>
{% endblock %} 
```

字段布局

```
{% block text_widget %}
{% spaceless %}
    <label>{{label}}</label>
    <input type="text" {{ block('widget_attributes') }} value="{{ value }}">
{% endspaceless %}
{% endblock text_widget %} 
```

控制器

```
$user      = new User();
$regForm   = $this->get('form.factory')->create(new RegForm(), $user);

return $this->render("FrontendBundle:Order:type.html.twig", array(
       'regForm'   => $regForm->createView(),
); 
```

形式

```
class RegForm extends AbstractType
{
    public function buildForm( FormBuilder $builder, array $options ){
      $builder->add( 'firstname',     'text',  array( 'label' => ' ', 'data' => 'Enter your name here' ) );
    }       

    public function getName()
    {
        return 'reg';
    }
} 
```

我已经尝试以多种方式设置默认字段数据：

在我的控制器中通过定义名字字段（

```
$user->setFirstname('Enter your name here'); 
```

）。

在表单生成器中使用 setData 方法（

```
$builder->add( 'firstname',     'text',  array( 'label' => ' ' ) )->setData(array('firstname' => 'Enter your name here')); 
```

要不就

```
$builder->setData(array('firstname' => 'Enter your name here')); 
```

所有其他形式的东西都很好。例如，我可以毫无问题地设置标签“FIRSTNAME”。那么，我错过了什么？

UPD：在第一次回答后，我决定问一个直接的问题：为什么默认值不起作用，而标签工作得很好：

```
$builder->add('firstname', 'text', array('label' => 'name', 'data' => 'Andrew')); 
```

?

也许树枝模板中有一些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:48:37.747

您是否在表单类型中尝试过此操作：

```
$builder
    ->add('firstname','hidden', array(
        'attr' => array(
            'value' => 'Enter your name here',
        ),
    )) 
```

不过，在我看来，您想改用占位符（HTML5）：

```
$builder
    ->add('firstname','hidden', array(
        'attr' => array(
            'placeholder' => 'Enter your name here',
        ),
    )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:06:29.797

在您的控制器中，在创建表单之前在 $user 对象上设置数据

```
$user      = new User();
$user->setFirstname('Default name');
$regForm   = $this->get('form.factory')->create(new RegForm(), $user); 
```

顺便说一句，您可能想在输入上使用占位符属性：

```
<input placeholder="Enter your name here"> 
```

您可以通过在表单生成器上添加“attr”选项来做到这一点：

```
$builder->add('firstname', 'text', array(
    'attr' => array('placeholder' => 'Enter your name here'),
)); 
```

# opencart - 建立电子商务平台

> ID：10893876
> 
> 赞同：0
> 
> 时间：2012-06-05T08:20:53.340
> 
> 标签：opencart

我是一名网络开发人员。我有一个项目来建立一个“建立你自己的网站”概念平台。例如[buildabazaar](http://buildabazaar.com)或[bigcommerce](http://bigcommerce.com)

我尝试了 magento、axiscart，但它对用户不友好且不适合客户需求。但 OpenCart 是一款满足所有 mu 客户要求的产品。它很容易修改。当我为多个客户构建这个时，你能指导我如何配置 OpenCart 以使用管理面板处理多个客户，并为单个客户提供所有管理面板选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:52:47.237

这很容易。OpenCart 支持多购物车 - 不同域上的多个商店；您甚至可以将用户限制在该特定购物车中 - 因此仅为该购物车管理面板创建用户；但是，这有点棘手，如果做得不好，可能会变得混乱。你能准确地解释你想做什么，我会一步一步地制作。

另一件事；opencart 虽然速度非常快。需要考虑缩放。我们在一些项目中使用 opencart 上的多存储，并使用 Rackspace 云服务器，每台服务器有 4-6 个负载平衡的 opencart 实例，CDN 用于存储静态文件，当然还有 dns 负载平衡。我建议每个商店的内存为 2gb，带有一个单独的数据库云实例 1 个主数据库为 16gb，4-5 个从属数据库负载平衡为 4-8gb 的流量

这取决于流量及其增长方式。我们目前的设置每天可以轻松处理多达 4000 个订单。我们平均管理 3,500 个，因此我们的应用程序设置始终为高需求做好准备。我们基本上可以为用户托管 opencarts，就像您想要影响我们的网络一样。

1.  创建用户注册表单
2.  使用子域信息创建和更新 nginx/htaccess
3.  基于该子域创建该信息并将其复制到安装程序脚本
4.  根据该子域和数据进行 opencart 安装和配置
5.  向用户发送关于 cname 记录的电子邮件，以便他们可以拥有 store.com 而不是 substore3434.yourecomservice.com

会是这样的。大量验证。cURL 使用和 cron 作业。我个人会使用 CPANEL/WHM Apache 服务器（我知道人们会在这方面否定我），但使用 Nginx 将是一场噩梦，因为 CPANEL 使用梦幻般的自动化脚本......如果你的项目成功，你可以稍后使用 nginx。

# macos - OS X 的 AVFoundation。有没有办法同时查看多个 USB 摄像头？

> ID：10893879
> 
> 赞同：3
> 
> 时间：2012-06-05T08:21:13.567
> 
> 标签：macos, avfoundation

乍一看，Mac OS 的 AVFoundation 似乎与 iOS 上的框架相同。我在想 Apple 将 OS X 的 AVFoundation 提升到能够同时捕获多个摄像头的能力，但我无法让两个 USB 摄像头与我的代码同时运行。

如果我使用 cam1 运行 iChat，使用 cam2 运行 photobooth，我的 mac 会同时显示两个摄像头流。这证明我的系统可以处理它。

我的代码将所有 AVFoundation 内容封装在一个类中。在运行此类的两个实例时，一个实例总是说无法创建会话。如果我关闭 cam1，cam2 开始在 instance2 上运行。我的问题是：我是否编写了损坏的代码（这会导致此结果），还是设计禁用了多凸轮支持？

提前致谢

杰克

# android - 动画未在 android 中正确渲染

> ID：10893883
> 
> 赞同：1
> 
> 时间：2012-06-05T08:21:40.133
> 
> 标签：android, listview

我正在向上移动一个列表视图，但在它移动后，以前的视图实例的痕迹仍然存在。我怎样才能摆脱它。我试过使主布局无效，但没有用。请指导。

[http://www.youtube.com/watch?v=XcKpJu8zWe8&feature=youtu.be](http://www.youtube.com/watch?v=XcKpJu8zWe8&feature=youtu.be)

谢谢

```
 r = new Runnable(){
                    public void run(){

                            TranslateAnimation translateAnimation = new TranslateAnimation(0, 0, mbar4.getTop(), -mbar4.getBottom());
                            translateAnimation.setDuration(1000);
                            translateAnimation.setFillAfter(true);

                            mbar4.startAnimation(translateAnimation);
                            st4.startAnimation(translateAnimation);

                            Animation animation = new TranslateAnimation(0, 0, PullListView.getTop(), -PullListView.getTop());
                            animation.setDuration(1000);
                            animation.setFillAfter(true);

                            PullListView.startAnimation(animation);
                            PullListView.invalidate();

                        }
                       }
                };

                h.removeCallbacks(r);
                h.postDelayed(r, 5000); 
```

# iphone - 未调用 didUpdateToLocation

> ID：10893884
> 
> 赞同：2
> 
> 时间：2012-06-05T08:21:42.193
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, cllocationmanager

我想接收位置更新。我在标题中添加了一个位置委托：

`@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>`

以及以下功能：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //initialize location manager
    CLLocationManager* locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    // [locationManager startMonitoringSignificantLocationChanges];
    [locationManager startUpdatingLocation];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"SomeViewController"     bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error{
    //Some problem
}
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation     *)newLocation fromLocation:(CLLocation *)oldLocation{
    //Some action
} 
```

但是既没有`didUpdateToLocation`也没有`didFailWithError`被调用（模拟器和设备上的问题相同）。我错过了什么？

提前致谢，

旅大

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:23:03.923

您的应用程序的位置服务是否已启用？

PS：这将有助于使您的位置管理器成为实例变量，以便在方法`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`完成后由 ARC 保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T16:52:17.010

我意识到这是一个死灵，但我在高处和低处寻找答案，但找不到类似情况的解决方案，这似乎是最好的地方。

我使用自定义初始化程序创建了一个委托对象，该初始化程序设置了一些标志，然后运行 ​​[self->locationManager startUpdatingLocation]，并在 viewDidLoad 中调用它：

```
myLocationGetter* __unused getter = [[myLocationGetter alloc]initAndUpdateOnce; 
```

didUpdateToLocation 和 didFailWithError 都没有被调用。似乎 ARC 在回调通过之前忘记了我的 getter 对象。通过在视图控制器中将 getter 声明为实例 var 并在 viewDidLoad 中对其进行初始化来解决问题。

# python - Python中的小波变换-> IndexError：列表分配索引超出范围

> ID：10893888
> 
> 赞同：0
> 
> 时间：2012-06-05T08:21:56.503
> 
> 标签：python, traceback, wavelet

我正在尝试为学生项目运行此代码：

[作者博客包含完整的 Python 代码](http://www.olhovsky.com/2009/03/2d-cdf-97-wavelet-transform-in-python/)

只有那个功能：

```
def fwt97(s, width, height):
''' Forward Cohen-Daubechies-Feauveau 9 tap / 7 tap wavelet transform   
performed on all columns of the 2D n*n matrix signal s via lifting.
The returned result is s, the modified input matrix.
The highpass and lowpass results are stored on the left half and right
half of s respectively, after the matrix is transposed. '''

# 9/7 Coefficients:
a1 = -1.586134342
a2 = -0.05298011854
a3 = 0.8829110762
a4 = 0.4435068522

# Scale coeff:
k1 = 0.81289306611596146 # 1/1.230174104914
k2 = 0.61508705245700002 # 1.230174104914/2
# Another k used by P. Getreuer is 1.1496043988602418

for col in range(width): # Do the 1D transform on all cols:
    ''' Core 1D lifting process in this loop. '''
    ''' Lifting is done on the cols. '''

    # Predict 1\. y1
    for row in range(1, height-1, 2):
        s[row][col] += a1 * (s[row-1][col] + s[row+1][col])   
    s[height-1][col] += 2 * a1 * s[height-2][col] # Symmetric extension

    # Update 1\. y0
    for row in range(2, height, 2):
        s[row][col] += a2 * (s[row-1][col] + s[row+1][col])
    s[0][col] +=  2 * a2 * s[1][col] # Symmetric extension

    # Predict 2.
    for row in range(1, height-1, 2):
        s[row][col] += a3 * (s[row-1][col] + s[row+1][col])
    s[height-1][col] += 2 * a3 * s[height-2][col]

    # Update 2.
    for row in range(2, height, 2):
        s[row][col] += a4 * (s[row-1][col] + s[row+1][col])
    s[0][col] += 2 * a4 * s[1][col]

# de-interleave
temp_bank = [[0]*width for i in range(height)]
for row in range(height):
    for col in range(width):
        # k1 and k2 scale the vals
        # simultaneously transpose the matrix when deinterleaving
        if row % 2 == 0: # even
            temp_bank[col][row/2] = k1 * s[row][col]
        else:            # odd
            temp_bank[col][row/2 + height/2] = k2 * s[row][col]

# write temp_bank to s:
for row in range(width):
    for col in range(height):
        s[row][col] = temp_bank[row][col]

return s 
```

根据作者的说法，代码应该运行，但我收到此错误：

```
Traceback (most recent call last):
File “wavelet_02.py”, line 200, in
m = fwt97_2d(m, 3)
File “wavelet_02.py”, line 27, in fwt97_2d
m = fwt97(m, w, h) # cols
File “wavelet_02.py”, line 108, in fwt97
temp_bank[col][row/2 + height/2] = k2 * s[row][col]
IndexError: list assignment index out of range 
```

测试：Windows 7 / Mac OS 10.7.3
Python 2.7.3
PIL 1.1.7

任何帮助都会很棒！

干杯，托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:40:44.950

(1) 您确定您使用的是 python 2，因为在 python 3 中，除法发生了变化（在除法时不舍入为 int）会导致该错误？（嗯，虽然报告的确切错误是不同的，所以我想不是那个）

(2) 尽管使用`width`和`height`变量，但代码顶部的注释表明它**仅适用于方阵**（“n*n”）。你有`height`=`width`吗？很明显，否则代码将无法正常工作，因为转置已分配给原始矩阵。

对我来说，以下在 python 2.7 中可以正常工作：

```
print(fwt97([[1,2],[3,4]], 2, 2)) 
```

尽管

```
print(fwt97([[1,2],[3,4]], 2, 1)) 
```

正如预期的那样给出你的错误。

事实上，一般的代码很奇怪。看起来它是由 fortran 或 c 程序员编写的，因为您根本不需要传递维度。最好有：

```
def fwt97(s):
    height = len(s)
    width = height
    for row in s:
        assert len(row) == width, "not square"
    ... 
```

# c++ - TinyXML2 和 C++

> ID：10893889
> 
> 赞同：2
> 
> 时间：2012-06-05T08:22:02.510
> 
> 标签：c++, wxwidgets, tinyxml

我想从 wxGrid 读取数据并将其写入 XML 文件。wxGrid 是这样的：

> 贾尔 | 莫纳特
> ------ |-------------
> 2012 | 03
> 2009 | 08

我想拥有的：

```
<SQL>
    <Datensatz>
        <Jahr>2012</Jahr>
        <Monat>03</Monat>
    </Datensatz>
    <Datensatz>
        <Jahr>2009</Jahr>
        <Monat>08</Monat>
    </Datensatz>
</SQL> 
```

我得到了什么：

```
<SQL>
    <Datensatz>
        <Jahr>20122009</Jahr>
        <Monat>0308</Monat>
    </Datensatz>
    <Datensatz>
        <Jahr>20122009</Jahr>
        <Monat>0308</Monat>
    </Datensatz>
</SQL> 
```

我的代码：

```
XMLDocument doc;
XMLElement* xesql = doc.NewElement("SQL");
XMLNode * xnsql = doc.InsertFirstChild(xesql);
XMLElement* xejahr = doc.NewElement("Jahr");
XMLElement* xemonat = doc.NewElement("Monat");
XMLText* datensatzJahr = doc.NewText("");
XMLText* datensatzMonat = doc.NewText("");
for(int i=0; i<=1; i++)
{
    XMLElement* xedatensatz = doc.NewElement("Datensatz");
    datensatzJahr = doc.NewText(m_gd_data->GetCellValue(i,0));
    datensatzMonat = doc.NewText(m_gd_data->GetCellValue(i,1));
    xejahr->InsertEndChild(datensatzJahr);
    xemonat->InsertEndChild(datensatzMonat);
    xedatensatz->InsertEndChild(xejahr);
    xedatensatz->InsertEndChild(xemonat);
    xesql->InsertEndChild(xedatensatz);
}
doc.SaveFile(path); 
```

我真的不知道问题出在哪里。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:31:59.803

您不会为循环的每次迭代重置 XML 元素，因此您只是将文本附加到现有元素。这应该工作：

```
XMLDocument doc;
XMLElement* xesql = doc.NewElement("SQL");
XMLNode * xnsql = doc.InsertFirstChild(xesql);
for(int i=0; i<=1; i++)
{
    XMLElement* xejahr = doc.NewElement("Jahr");
    XMLElement* xemonat = doc.NewElement("Monat");
    XMLText* datensatzJahr = doc.NewText("");
    XMLText* datensatzMonat = doc.NewText("");

    XMLElement* xedatensatz = doc.NewElement("Datensatz");
    datensatzJahr = doc.NewText(m_gd_data->GetCellValue(i,0));
    datensatzMonat = doc.NewText(m_gd_data->GetCellValue(i,1));
    xejahr->InsertEndChild(datensatzJahr);
    xemonat->InsertEndChild(datensatzMonat);
    xedatensatz->InsertEndChild(xejahr);
    xedatensatz->InsertEndChild(xemonat);
    xesql->InsertEndChild(xedatensatz);
}
doc.SaveFile(path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:24:50.223

您必须在循环中为年份和月份创建新元素。

# matlab - “翻译”保存的 FANN 网络的参数

> ID：10893892
> 
> 赞同：1
> 
> 时间：2012-06-05T08:22:47.817
> 
> 标签：matlab, machine-learning, artificial-intelligence, neural-network, fann

我正在使用 FANN 库训练一个神经网络，我发现这个库非常令人印象深刻。问题是当我尝试“导出”（手动）权重和网络的形成以便我可以在 Matlab 中模拟它时出现问题......虽然 FANN 告诉我我的 mse 为 4-5%当我尝试在 matlab 中模拟它时，它大约是 80%！

我相信当我尝试从保存的文件中翻译/映射网络的属性时，我遗漏了一些东西。有人可以看看，请帮助我吗？

fann 生成的已保存的 .net 文件、我放入权重的 .xls 文件以及 matlab 脚本（如果您想测试它）都在这里：[http ://users.isc.tuc.gr/~spapagrigoriou /网络/](http://users.isc.tuc.gr/~spapagrigoriou/network/)。

# html - 在不中断链接的情况下将本地文件注入 UIWebView

> ID：10893893
> 
> 赞同：2
> 
> 时间：2012-06-05T08:22:50.263
> 
> 标签：html, xcode, uiwebview, local, inject

我正在开发一个 iOS 应用程序，该应用程序需要在 UIWebView 内显示来自服务器的网页，同时根据需要注入相关的本地 png 和 css 文件以加快加载时间。这是我用来尝试执行此操作的代码：

```
NSData *myFileData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.example.com/index.html"]]];
NSString* myFileHtml = [[NSString alloc] initWithData:myFileData encoding:NSASCIIStringEncoding];
[myWebView loadHTMLString:myFileHtml baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

我的问题是一些网页中有链接到服务器上其他网页的按钮，并且因为 UIWebView 只加载一个字符串，所以点击按钮时不会导致 UIWebView 加载新的网页 URL 就像它会如果我使用了 loadRequest 方法。

我的问题是如何让 UIWebView 表现得像它正在加载请求，同时仍然从 baseurl 注入本地文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:09:49.373

NSURLPRotocol 是 NSURLConnection 的处理程序，它将让您有机会拦截对服务器的调用并替换您自己的内容。

1) 从 NSURlProtocol 派生一个类

2) 调用 NSURLProtocol registerClass: 在你的应用程序中：didFinishLaunchingWithOption

3) 根据需要阅读有关实现这些方法的文档：initWithRequest:cachedResponse:client:, startLoading, URLProtocol:didReceiveResponse:cacheStoragePolicy: URLProtocolDidFinishLoading:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:45:26.460

按钮中的相对链接不起作用，因为链接的页面位于远程服务器上，而不是设备的文件系统上。但是，您可以使用 UIWebViewDelegate 方法使其工作：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        NSString *localRootPath = [NSString stringWithFormat:@"file://%@", [[NSBundle mainBundle] bundlePath]];
        NSString *remoteRootPath = @"http://yourdomain.com";

        NSString *remotePath = [[request.URL absoluteString] stringByReplacingOccurrencesOfString:localRootPath withString:remoteRootPath]; 

        [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:remotePath]]];

        // or you can use your own loading mechanism here

        return NO;
    }

    return YES;
} 
```

此方法拦截来自您的 WebView 的所有请求。如果请求是由用户点击/单击触发的，则 URL 将从相对 URL 修改为绝对 URL，以便可以从服务器加载。不要忘记在 WebView 上设置委托，否则将不会调用此方法。

# android - 在 VideoViewer/CustomViewer 中使用 AsyncTask02 的 MJPEG

> ID：10893894
> 
> 赞同：0
> 
> 时间：2012-06-05T08:22:50.580
> 
> 标签：android, android-layout, android-asynctask, android-custom-view, mjpeg

首先“谢谢@bbodenmiller！” （[使用 AsyncTask 的 Android ICS 和 MJPEG](https://stackoverflow.com/questions/10550139/android-ics-and-mjpeg-using-asynctask)）MJPEG-Viewer 的代码运行良好。但我有一个问题。“MjpegActivity.java”仅适用于新的 ContentView：

```
private static final String TAG = "MjpegActivity";
public static MjpegView mv;
public static String URL = "http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg/video.cgi?resolution=800x600&amp%3bdummy=1333689998337";

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.main);

    Button B01 = (Button) findViewById(R.id.btn01);
    B01.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) 
        {...}});

    Button Cam01 = (Button) findViewById(R.id.btnCam01);
    Cam01.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) 
        {
            setContentView(mv);
            new DoRead().execute(URL);
                   }});
} 
```

这意味着旧的 ContentView 例如 (setContentView(R.layout.main);) 将被覆盖。:( 有没有人知道我如何在布局中显示 MjpegView？或 MjpegView 上的布局？因为我需要 MjpegView 上布局中的按钮。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:52:13.743

我剥离了 MjpegView 并通过更新图像视图来显示流：

**主要活动**

```
public class MainActivity extends Activity {
    IPCamera cam1, cam2;
    ImageView iv1, iv2;    
    DownloadImageTask task1, task2;

    final Handler h = new Handler(new Callback() {
        @Override
        public boolean handleMessage(Message msg) {
            if (msg.what == 1){
                Bitmap bmp = (Bitmap) msg.obj;
                iv1.setImageBitmap(bmp);
            }if(msg.what == 2){
                Bitmap bmp = (Bitmap) msg.obj;
                iv2.setImageBitmap(bmp);
            }
            return false;
        }
    });

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);       
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);          
        setContentView(R.layout.activity_main);
        iv1 = ((ImageView) findViewById(R.id.imageView1));
        iv2 = ((ImageView) findViewById(R.id.imageView2));
        cam1 = new IPCamera("http://10.0.0.101/video.cgi", "admin", "admin", this); 
        cam2 = new IPCamera("http://10.0.0.102/video.cgi", "admin", "admin", this);        

        task1 = startTask(cam1, 1, false, h);
        task2 = startTask(cam2, 2, false, h);

    }   

    private DownloadImageTask startTask(IPCamera cam, int id, boolean useParallelExecution, Handler h) {
        DownloadImageTask task = new DownloadImageTask(cam, id);        
        if (useParallelExecution) {            
            task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);            
        } else {           
            task.execute(h);
        }        
        return task;        
    }

    private class DownloadImageTask extends AsyncTask<Handler, Void, Void> {        
        IPCamera cam;
        int id;
        DownloadImageTask(IPCamera cam, int id){
            this.cam = cam;
            this.id = id;
        }

        protected Void doInBackground(Handler... h) {    
            cam.startStream(h[0], id);    
            cam.getFrame();         
            return null;        
        }
    }
} 
```

**IPCamera 类**

```
public class IPCamera{

    private static final String TAG = "MjpegActivity";

    String url;
    String usr;
    String pwd; 
    MjpegInputStream is;
    boolean running = false;
    Handler h;
    Context ctx;
    int id;

    IPCamera(String url, String usr, String pwd, Context ctx){
        this.url = url;
        this.usr = usr;
        this.pwd = pwd;
        this.ctx = ctx;
    }

    public void startStream(Handler h, int id){
    this.h = h;
    this.id = id;
    is = new MjpegInputStream(httpRequest(url,usr,pwd));    
    running = true;
}   

public void getFrame(){     
    while (running){
        Bitmap b;
        try {   
            b = is.readMjpegFrame();
            Message m = h.obtainMessage(id, b);
            m.sendToTarget();
            } catch (IOException e) {
            e.printStackTrace();
        }           
    }   
}

    public InputStream httpRequest(String url, String usr, String pwd){
        HttpResponse res = null;
        DefaultHttpClient httpclient = new DefaultHttpClient(); 
        CredentialsProvider credProvider = new BasicCredentialsProvider();
        credProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
            new UsernamePasswordCredentials(usr, pwd));
        httpclient.setCredentialsProvider(credProvider);
        Log.d(TAG, "1\. Sending http request");
        try {
            res = httpclient.execute(new HttpGet(URI.create(url)));
            Log.d(TAG, "2\. Request finished, status = " + res.getStatusLine().getStatusCode());
            if(res.getStatusLine().getStatusCode()==401){
                //You must turn off camera User Access Control before this will work
                return null;
            }
            return res.getEntity().getContent();  
        } catch (ClientProtocolException e) {
            e.printStackTrace();
            Log.d(TAG, "Request failed-ClientProtocolException", e);
            //Error connecting to camera
        } catch (IOException e) {
            e.printStackTrace();
            Log.d(TAG, "Request failed-IOException", e);
            //Error connecting to camera
        }

        return null;

    }
} 
```

**MjpegInputStream**

必须将 FRAME_MAX_LENGHT 从 40000 增加到 400000。这样更稳定。

```
public class MjpegInputStream extends DataInputStream {
    private static final String TAG = "MjpegInputStream";

    private final byte[] SOI_MARKER = { (byte) 0xFF, (byte) 0xD8 };
    private final byte[] EOF_MARKER = { (byte) 0xFF, (byte) 0xD9 };
    private final String CONTENT_LENGTH = "Content-Length";
    private final static int HEADER_MAX_LENGTH = 100;
    private final static int FRAME_MAX_LENGTH = 400000 + HEADER_MAX_LENGTH;
    private int mContentLength = -1;

    public MjpegInputStream(InputStream in) {
        super(new BufferedInputStream(in, FRAME_MAX_LENGTH));
    }

    private int getEndOfSeqeunce(DataInputStream in, byte[] sequence) throws IOException {
        int seqIndex = 0;
        byte c;
        for(int i=0; i < FRAME_MAX_LENGTH; i++) {
            c = (byte) in.readUnsignedByte();
            if(c == sequence[seqIndex]) {
                seqIndex++;
                if(seqIndex == sequence.length) {
                    return i + 1;
                }
            } else {
                seqIndex = 0;
            }
        }
        return -1;
    }

    private int getStartOfSequence(DataInputStream in, byte[] sequence) throws IOException {
        int end = getEndOfSeqeunce(in, sequence);
        return (end < 0) ? (-1) : (end - sequence.length);
    }

    private int parseContentLength(byte[] headerBytes) throws IOException, NumberFormatException {
        ByteArrayInputStream headerIn = new ByteArrayInputStream(headerBytes);
        Properties props = new Properties();
        props.load(headerIn);
        return Integer.parseInt(props.getProperty(CONTENT_LENGTH));       
    }   

    public Bitmap readMjpegFrame() throws IOException {
        mark(FRAME_MAX_LENGTH);
        int headerLen = getStartOfSequence(this, SOI_MARKER);
        reset();
        byte[] header = new byte[headerLen];
        readFully(header);
        try {
            mContentLength = parseContentLength(header);
        } catch (NumberFormatException nfe) {           
            mContentLength = getEndOfSeqeunce(this, EOF_MARKER); 
        }
        reset();
        byte[] frameData = new byte[mContentLength];
        skipBytes(headerLen);
        readFully(frameData);
        return BitmapFactory.decodeStream(new ByteArrayInputStream(frameData));
    }
} 
```

不完全干净，但它有效。刚做了24小时稳定性测试，没有错误。如果相机连接断开并在相机弹回时重新连接，仍然必须想出一种方法来停止流线程。

# java - 如何限制字符串中“/”的数量

> ID：10893896
> 
> 赞同：1
> 
> 时间：2012-06-05T08:22:59.807
> 
> 标签：java, regex

如何使用前瞻断言按范围限制“/”的数量

我已经厌倦了以下

> ^(?=/{1,3})$

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:07:01.400

最简单的解决方案是使用负前瞻：

```
^(?!(?:[^/]*/){4}) 
```

这基本上意味着字符串**不能**包含 4 个斜杠。

这假设您允许斜线之间的其他字符，但最多 3 个斜线。

一个积极的版本将是`^(?=[^/]*(?:/[^/]*){0,3}$)`or `^[^/]*(?:/[^/]*){0,3}$`，没有前瞻。当然，如果可能的话，如果没有正则表达式，这个问题是微不足道的。

让我们尝试打破最后一个：

*   `^`- 字符串的开始。
*   `[^/]*`- 一些不是斜杠的字符（或没有）
*   `(?: )`- 一个逻辑组。类似于`()`，但不捕获结果（验证后我们不需要它）
*   `/[^/]*`- 斜线，后跟非斜线字符。
*   `{0,3}`- 从 0 到 3 次。
*   `$`- 字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:29:22.113

您可以尝试以下方法（您必须说应该没有 / 之后）：

```
^(?=/{1,3}([^/]|$)) 
```

# java - 自定义 Spinner Android？

> ID：10893898
> 
> 赞同：0
> 
> 时间：2012-06-05T08:23:03.480
> 
> 标签：java, android

我有微调器和代码`android.R.layout.simple_spinner_dropdown_item`。但我得到这样奇怪的高度：

![在此处输入图像描述](../Images/1d4ad7aee30111cb2ef1e142e5535313.png)

我想拥有`dropdown_items`它们默认的样子，但我也不想在主屏幕上有奇怪的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:29:31.140

使用该`adapter.setDropDownViewResource(int resId)`方法为下拉框（不是元素）使用特定布局

[如此处](http://developer.android.com/resources/tutorials/views/hello-spinner.html)所见

# c++ - Soci Session 没有释放连接

> ID：10893907
> 
> 赞同：1
> 
> 时间：2012-06-05T08:23:46.203
> 
> 标签：c++, soci

我正在使用 soci 使我的应用程序与数据库交互，目前我使用 MySQL 服务器进行测试。我已将 SOCI 包装到简单的类中，我在类的 Connect 方法中调用 session.open()

```
m_session.open(soci::mysql, connString); 
```

然后在析构函数中我调用 close 方法

```
m_session.close(); 
```

但是当我使用该类几次（创建和销毁该类的对象）时，我发现 soci 无法连接到 MySQL 服务器，错误连接太多。我很困惑，因为我在析构函数上调用了 close 方法，我想 soci 应该释放连接。检查 soci 文档我看不到除了 close() 之外的任何东西。

有没有办法强制 soci::session 释放连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:26:08.080

我发现我的析构函数没有被调用，因为我的一个类方法中有未处理的异常。我重新设计了我的课程并处理了这个异常。现在一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T09:25:19.147

您可以通过 soci::session.close() 函数关闭 SOCI:Session

# ios - 统计 iOS 应用下载次数

> ID：10893911
> 
> 赞同：17
> 
> 时间：2012-06-05T08:24:05.620
> 
> 标签：ios, iphone, ipad

**问题：**
我是一名应用程序开发人员，我的老板问我我们的 iPhone 应用程序被下载了多少次

**到目前为止我尝试了什么：**
Apple 统计数据：
似乎只有每日或每周数据。此外，似乎无法访问前几年的下载统计数据。 [www.appannie.com 之](http://www.appannie.com)

类的服务： 这可能有效，但我真的不想给他们我们开发者帐户的电子邮件和密码。 自动抓取数据（参见：[automatic-download-sales-reports-from-itunes-connect](https://stackoverflow.com/questions/3682150/automatically-download-sales-reports-from-itunes-connect)）： 我真的不想花时间设置和维护这样的系统，除非真的没有其他解决方案。

**我的问题：**
有没有更好的方法？其他开发者如何知道他们的应用被下载了多少次？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T08:39:35.910

> 像 www.appannie.com 这样的服务：这可能有效，但我真的不想给他们我们开发者帐户的电子邮件和密码。

我使用 appAnnie，但我没有给他们我的“我的开发者帐户的电子邮件和密码”。

在 ItunnesConnect 苹果网站中，您可以创建一个新帐户，仅有权查看单个应用程序的报告，仅此而已

PS 如果您想授予客户或开发合作伙伴访问单个应用程序统计信息的权限，这可能非常有用，因为您可以创建一个仅访问应用程序的新 appAnnie 用户。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-18T14:20:50.917

Apple 刚刚更新了[https://itunesconnect.apple.com](https://itunesconnect.apple.com)网站，您可以调整屏幕中间的日期范围（使用滑块）或在导航到销售和趋势屏幕后调整左上角的日期以查看下载量你有过。

![在此处输入图像描述](../Images/0c60095e549411f9aed9efbe1c9d63a8.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T08:29:05.687

好吧，我使用[Flurry](http://www.flurry.com/)来跟踪安装和会话。但是您将不得不在您的项目中添加混乱。

我们也使用[AppFigures](https://www.appfigures.com/)来跟踪实际下载，但正如您所说，您只能在 Apple 允许的范围内检索。AppFigures 还将要求您向他们提供您的 ItunnesConnect 帐户详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T05:02:10.203

iTunes Connect 应用程序还有其他选择方法，试试吧。 [https://itunes.apple.com/us/app/itunes-connect-mobile/id376771144?mt=8](https://itunes.apple.com/us/app/itunes-connect-mobile/id376771144?mt=8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T08:26:24.097

> 像 www.appannie.com 这样的服务：这可能有效，但**我真的不想给他们**我们开发者帐户的电子邮件和密码。

那，似乎是一个非常好的主意！

为什么不聘请销售人员为您计算数字？但说真的，我会选择抓取选项。我相信在 Apple 提出 API 之前，这是解决您的问题的唯一可行解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T08:47:15.570

我使用[AppFigures.com](http://appfigures.com)，正如@meronix 建议的那样，创建一个具有您指定权限的新用户。除了精美的图表和完整的信息仪表板外，AppFigures 还为您提供每天早上通过电子邮件发送给您的每日报告。我建议！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T10:52:32.673

仅供参考，还有另一个名为[mopapp](http://www.mopapp.com/)的服务，它支持多个平台。

# python - 图像文件不是 type1

> ID：10893912
> 
> 赞同：2
> 
> 时间：2012-06-05T08:24:07.907
> 
> 标签：python, image, x11, xming

所以我在这里在 ssh 安全 shell 和 Xming 上运行我的程序，但是当我尝试在其上显示我的“.jpg”或“.bmp”图像文件时，它返回一个错误：**“图像文件不是类型 1 ”**。这是什么意思？该程序在我的计算机上运行良好，但仅当我通过此服务器运行时。代码是用python编写的。谢谢！

这是我的代码的前面：

```
import wx
print wx.version()
import searchSeq
import sys
from wx.lib.pubsub import Publisher
from decimal import *
import math
import wx.lib.sheet as sheet

ID_ABOUT = 1
ID_EXIT = 2

class reWindow(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self,parent,id, 'Restriction Enzyme Window',
                      size = (800, 500))

        #creat panel
        panel = wx.Panel(self)

        #insert picture
        pic = wx.Image("DNA.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        self.button = wx.BitmapButton(panel, -1, pic, pos = (630,250))
        self.button.Bind(wx.EVT_BUTTON, self.runIt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:30:07.090

该错误消息`"Image file is not of type 1"`意味着您尝试显示的图像不是 BMP 文件。1 是`wx.BITMAP_TYPE_BMP`常数的值。

要确认，只需键入：

```
import wx
print wx.BITMAP_TYPE_BMP

>>> 1 
```

WX 可能找不到`"DNA.bmp"`图像，您应该使用绝对路径来查找/加载此图像。

**编辑 ：**

当您告诉 python 加载`"DNA.bmp"`时，它会查看当前目录，而这在服务器上运行或通过 ssh 连接可能会有很大不同，使用绝对路径将消除此问题。

# android - 在 GPS 跟踪中为 requestLocationUpdates 选择哪些参数？

> ID：10893913
> 
> 赞同：0
> 
> 时间：2012-06-05T08:24:13.050
> 
> 标签：android, gps, location, locationmanager

我正在申请 GPS 跟踪。我创建 LocationManager 并设置 requestLocationUpdates。

```
LocationManager myManager = (LocationManager) mMap.getSystemService("location");
myManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,MIN_TIME, MIN_DISTANCE, this); 
```

如何为电池选择最佳参数 MIN_TIME 和 MIN_DISTANCE 并记录正常轨迹？请给我答案的理由。

提前致谢！

**UPD：**我需要最佳参数。如何检测位置，我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:37:06.023

locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListner); 位置 = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

# delphi - 使用 XPath 从 XML 中读取不同的值

> ID：10893919
> 
> 赞同：6
> 
> 时间：2012-06-05T08:24:42.573
> 
> 标签：delphi, delphi-2010, delphi-2007

我有以下格式的 XML：

```
<Accounts>
   <Account Number="1"   DebitAmount="1000" Amount="2827561.95" /> 
   <Account Number="225" DebitAmount="2000"  Amount="12312.00" /> 
   <Account Number="236" DebitAmount="London"    Amount="457656.00" /> 
   <Account Number="225" DebitAmount="London"    Amount="23462.40" /> 
   <Account Number="236" DebitAmount="Bangalore" Amount="2345345.00" /> 
</Accounts> 
```

如何使用 Xpath 检索唯一帐号？即，我想获得值 1、225 和 236。

这就是我所做的：（我正在使用 Delphi 2007 ......）

```
Const XmlStr =
' <Accounts>
   <Account Number="1"   DebitAmount="1000" Amount="2827561.95" /> 
   <Account Number="225" DebitAmount="2000"  Amount="12312.00" /> 
   <Account Number="236" DebitAmount="London"    Amount="457656.00" /> 
   <Account Number="225" DebitAmount="London"    Amount="23462.40" /> 
   <Account Number="236" DebitAmount="Bangalore" Amount="2345345.00" /> 
</Accounts>';

 function GetAccountNumbers:TList;
 Var
   XMLDOMDocument  : IXMLDOMDocument;
   accounts : IXMLDOMNodeList;
  accountdetail :IXMLDOMNode;
   i:Integer
   list :TList
 begin
   Result:=TList.Create;
   XMLDOMDocument:=CoDOMDocument.Create;
   XMLDOMDocument.loadXML(XmlStr);
   accounts:= XMLDOMDocument.SelectNodes(''./Accounts 
  /Account[not(@Number=preceding-sibling/ Account /@Number)]');
  for i := 0 to accountdetails.length - 1 do begin
     accountdetail := accountdetails.item[i];
     //omitting the "<>nil" checks...
     list.Add(accountdetail.attributes.getNamedItem('Number').Nodevalue;
  end;
 end; 
```

但这不返回任何节点（accountdetails.length=0）。请让我知道我在这里缺少什么。

谢谢，

普拉迪普

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T10:16:23.567

Delphi 2007 的 MSXML 版本似乎不支持 XPath 轴。因此，如果您决定使用以下代码，请先导入类型库`Microsoft XML, v3.0`或`Microsoft XML, v6.0`类型库，然后尝试以下操作：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, MSXML2_TLB;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

const
  XMLString =
    '<Accounts>' +
    '<Account Number="1" DebitAmount="1000" Amount="2827561.95"/>' +
    '<Account Number="225" DebitAmount="2000"  Amount="12312.00"/>' +
    '<Account Number="236" DebitAmount="London" Amount="457656.00"/>' +
    '<Account Number="225" DebitAmount="London" Amount="23462.40"/>' +
    '<Account Number="236" DebitAmount="Bangalore" Amount="2345345.00"/>' +
    '</Accounts>';

type
  TIntegerArray = array of Integer;

function GetAccountNumbers(const AXMLString: string): TIntegerArray;
var
  I: Integer;
  XMLDOMNodeList: IXMLDOMNodeList;
  XMLDOMDocument: IXMLDOMDocument3;
begin
  XMLDOMDocument := CoDOMDocument60.Create;
  if Assigned(XMLDOMDocument) and XMLDOMDocument.loadXML(AXMLString) then
  begin
    XMLDOMNodeList := XMLDOMDocument.selectNodes('/Accounts/Account[not(@Number=preceding-sibling::Account/@Number)]/@Number');
    SetLength(Result, XMLDOMNodeList.length);
    for I := 0 to XMLDOMNodeList.length - 1 do
      Result[I] := XMLDOMNodeList.item[I].nodeValue;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
  I: Integer;
  IntegerArray: TIntegerArray;
begin
  S := 'Account numbers: ';
  IntegerArray := GetAccountNumbers(XMLString);
  for I := 0 to Length(IntegerArray) - 1 do
    S := S + IntToStr(IntegerArray[I]) + ', ';
  Delete(S, Length(S) - 1, 2);
  ShowMessage(S);
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T11:22:25.100

不明白你想要实现什么。也许这个？

```
'/Accounts/Account[not(@Number=preceding-sibling::node()/@Number)]/@Number' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:58:21.560

这适用于我[在 Delphi XE2](http://bo.codeplex.com/SourceControl/changeset/changes/78543)中的 XPath 示例，XPath 示例的[Delphi 2007 更新](http://bo.codeplex.com/SourceControl/changeset/80654)提供了以下输出：

```
nodeName[0]:Number
nodeValue[0]:1
nodeName[1]:Number
nodeValue[1]:225
nodeName[2]:Number
nodeValue[2]:236 
```

示例中的想法应该让您使用 MSXML 6 DOM 或 OpenXML DOM（Delphi XE2 支持 MSXML 6 DOM 或 ADOM XML v4 DOM）使用 Delphi 和 2007。

请注意，MSXML 6 行为很大程度上取决于您安装的实际版本，这取决于您的 Windows 操作系统（因此[这个答案](https://stackoverflow.com/a/4356136/29290)）。

这可能意味着您没有安装最新的 MS XML 6，或者没有从中导入正确的类型库（Delphi 2007 msxml 单元不包含XPath 支持所需的[IXMLDOMDocument2 ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms761358.aspx)

2012 年 7 月 27 日，我抽出一些时间将示例重新安装到 Delphi 2007 并对其进行测试。
我不完全确定它是否完全没有内存泄漏（我将一个 TDictionary 类组合在一起以放入接口），但结果与 Delphi XE2 示例相同，乍一看它看起来还不错。

在`XPathTester`演示应用程序中，加载示例 3，然后运行 ​​XPath（这将加载您的示例并执行 XPath）。

请注意，[bo 库](http://bo.codeplex.com)中的大多数其他内容至少需要 Delphi 2009，但这部分有效。
在接下来的几周内，我将在另一个仍在 Delphi 2007 的项目中对其进行测试，因为我需要它。

```
procedure TMainForm.LoadXmlExample3ButtonClick(Sender: TObject);
begin
  LoadXmlExample([ // unique account numbers
    '/Accounts/Account[not(@Number=preceding-sibling::Account/@Number)]/@Number'
  ], 
  [
    '<?xml version="1.0"?>',
    '<Accounts>',
    '  <Account Number="1"   DebitAmount="1000" Amount="2827561.95" />',
    '  <Account Number="225" DebitAmount="2000"  Amount="12312.00" />',
    '  <Account Number="236" DebitAmount="London"    Amount="457656.00" />',
    '  <Account Number="225" DebitAmount="London"    Amount="23462.40" />',
    '  <Account Number="236" DebitAmount="Bangalore" Amount="2345345.00" />',
    '</Accounts>'
  ]);
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:04:40.723

试试这个代码：

```
XMLDocument1: TXMLDocument;

procedure TForm1.Button2Click(Sender: TObject);
var
  BodyNode:IXMLNode;
  I: Integer;
  sl:TStringList;
begin
  sl:=TStringList.Create;
  XMLDocument1.Active:=False;
  XMLDocument1.FileName:='C:\Zeina\Test.xml';
  XMLDocument1.Active:=True;

  BodyNode:=XMLDocument1.DocumentElement;
  for I:=0 to BodyNode.ChildNodes.Count-1 do
  begin
    if sl.IndexOf(BodyNode.ChildNodes[i].Attributes['Number'])=-1 then
      sl.Add(BodyNode.ChildNodes[i].Attributes['Number']);
  end;
  Memo1.Lines:=sl;
end; 
```

这是结果：![](../Images/ae8acd4edd3f33146605a6a66814589c.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-05T10:11:14.330

Ziena，我更改了您的代码：

```
 XMLDocument1: TXMLDocument;

procedure TForm1.Button2Click(Sender: TObject);
var
  BodyNode:IXMLNode;
  I: Integer;
  sl:TStringList;
begin
  sl:=TStringList.Create;
  XMLDocument1.Active:=False;
  XMLDocument1.FileName:='C:\Zeina\Test.xml';
  XMLDocument1.Active:=True;

  BodyNode:=XMLDocument1.DocumentElement;
  sl.Duplicates := dupIgnore;
  for I:=0 to BodyNode.ChildNodes.Count-1 do
    sl.Add(
      BodyNode.ChildNodes[i].Attributes['Number']); // ignore duplicated lines  
   Memo1.Lines.AddStrings(sl); // for avoid memory leak
end; 
```

# javascript - 在 iframe 外调用包含 showModalDialog 的函数显示错误页面

> ID：10893922
> 
> 赞同：0
> 
> 时间：2012-06-05T08:25:11.133
> 
> 标签：javascript, iframe

网站是这样的：

```
 `--main.html
    `--dialog.html
    `--folder
        `--iframe.html 
```

代码在这里：
main.html：

```
 <html>
    <head>
    <script type="text/javascript">
        function testframe() {
            var doc = document.getElementById("frame").contentWindow;
            doc.show();
        }
    </script>
    </head>
    <body>
        <iframe src="folder/iframe.html" id="frame"></iframe>
        <br/>
        <button onclick="testframe()">test</button>
    </body>
    </html> 
```

对话框.html：

```
 <html>
    <head>
    </head>
    <body>
    This is modal dialog!
    </body>
    </html> 
```

iframe.html：

```
 <html>
    <head>
    <script type="text/javascript">
        function show() {
            showModalDialog('../dialog.html');
        }
    </script>
    </head>
    <body>
        this is ifram
        <br />
        <button onclick="show()">show dialog</button>
    </body>
    </html> 
```

当我单击 iframe 中的显示对话框按钮时，它会正确显示模态对话框。
当我单击 iram 外部的测试按钮时，它会错误地显示模态对话框。

当我单击 iram 外部的测试按钮以在 dilog 中显示正确的页面时，如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:58:56.573

```
iframeDomElement.contentWindow.setTimeout(function() {
   iframeDomElement.contentWindow.childFunc();
}, 0); 
```

此 hack 将使相对路径相对于子窗口。适用于 Firefox 和 chrome，但不适用于 safari。

# c++ - 多个 Qt 小部件描绘不同的 OpenSceneGraph 节点而不会造成性能损失

> ID：10893930
> 
> 赞同：2
> 
> 时间：2012-06-05T08:25:35.243
> 
> 标签：c++, qt4, openscenegraph

我们目前面临以下问题：我们有一个应用程序需要在不同的 Qt 小部件中显示大量单独的 OpenSceneGraph 场景。例如，我们可能有一个 Qt 小部件描绘一个球体，而另一个小部件描绘一个二十面体。由于我们使用的是 OpenSceneGraph 3.0.1，因此我们遵循[官方文档中的 osgViewerQt 示例](http://www.openscenegraph.org/svn/osg/OpenSceneGraph/tags/OpenSceneGraph-3.0.1/examples/osgviewerQt/osgviewerQt.cpp)来实现这一点。

示例代码使用 a`QTimer`来强制更新查看器小部件：

```
 connect( &_timer, SIGNAL(timeout()), this, SLOT(update()) );
    _timer.start( 10 ); 
```

当我们想要创建和显示*多个*小部件时，问题就开始了。由于每个小部件都有自己的计时器，因此性能会随着打开小部件的数量而**迅速下降。**不仅与 OSG 小部件的交互非常缓慢，而且与*其他*Qt 小部件的交互也明显滞后。当大约 5 个窗口打开时，即使是中途最近的四核系统也几乎不堪重负。这个问题**绝对**与我们的图形硬件无关。其他应用程序可能会渲染更大的场景（Blender、Meshlab 等）*，而不*会对性能产生任何负面影响。

*所以，总结一下：在不*影响性能的情况下，创建多个显示不同 OpenSceneGraph 场景的 Qt 小部件的最佳方法是什么？

我们已经尝试过的：

*   我们已经考虑过使用单个`osgViewer::CompositeViewer`来渲染*所有*场景对象。但是，我们暂时放弃了这个想法，因为它可能会使与单个小部件的交互变得非常复杂。
*   我们尝试将每个的渲染部分`osgViewer::CompositeViewer`放在一个单独的线程中，如[osgQtWidgets 示例](http://www.openscenegraph.org/svn/osg/OpenSceneGraph/tags/OpenSceneGraph-3.0.1/examples/osgQtWidgets/osgQtWidgets.cpp)所详述。

我们的第二次尝试（使用线程）大致如下：

```
 class ViewerFrameThread : public OpenThreads::Thread
    {
        public:
            ViewerFrameThread(osgViewer::ViewerBase* viewerBase):
                _viewerBase(viewerBase) {}

            ~ViewerFrameThread()
            {
                cancel();
                while(isRunning())
                {
                    OpenThreads::Thread::YieldCurrentThread();
                }
            }

            int cancel()
            {
                _viewerBase->setDone(true);
                return 0;
            }

            void run()
            {
                int result = _viewerBase->run();
            }

            osg::ref_ptr<osgViewer::ViewerBase> _viewerBase;
    }; 
```

然而，这*也*导致了性能的显着下降。每个线程仍然需要很多 CPU 时间（这并不奇怪，因为基本交互*仍然*由计时器处理）。这种方法的唯一优点是至少可以与*其他*Qt 小部件进行交互。

对我们来说理想的解决方案是一个小部件，它只在用户与之交互时触发重绘请求，例如通过*单击*、*双击*、*滚动*等。更准确地说，这个小部件应该保持*空闲状态*，直到需要更新。有没有可能发生类似的*事情*？我们欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:15:38.700

针对这个问题尝试了几种模型后，我很高兴地报告说我找到了一个运行良好的模型。我正在使用一个`QThread`（类似于上面描述的线程），它基本上包装了一个`osgViewer::ViewerBase`对象并简单地调用`viewer->run()`.

保持低 CPU 使用率的技巧是强制 OpenSceneGraph仅*按需*渲染。尝试了各种选项后，我发现以下两种设置效果最好：

```
viewer->setRunFrameScheme( osgViewer::ViewerBase::ON_DEMAND );
viewer->setThreadingModel( osgViewer::ViewerBase::CullDrawThreadPerContext ); 
```

像这样修改的查看器*不会*使用虚假的 CPU 周期进行连续更新，同时仍使用多个线程进行剔除和绘制。在某些情况下，其他线程模型当然可能表现更好，但对我来说，这就足够了。

如果其他人尝试类似的解决方案，请注意某些操作现在需要明确的重绘请求。例如，在处理与 OSG 对象的*交互*或编写自己的类时，在更改查看器设置后`CameraManipulator`调用并没有什么坏处。`viewer->requestRedraw()`否则，仅当小部件需要重新绘制时，查看器才会刷新。

简而言之，这是我学到的：

*   不要使用计时器进行渲染
*   暂时不要放弃多个线程
*   没有什么比阅读源代码更好的了（官方的 OSG 示例有时缺乏细节，但源从不撒谎……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:41:48.307

这应该是可能的。我不敢相信他们使用了一个以 100Hz 运行的计时器来更新小部件——这确实不是正确的做法。

我不了解 OSG 的架构，但是您需要想办法在数据发生更改时从 OSG 获取回调。在回调中，您只需将更新事件排队到适当的小部件，如下所示：

```
void OSGCallbackForWidgetA()
{
  QCoreApplication::postEvent(widgetA, new QEvent(QEvent::UpdateRequest),
                              Qt::LowEventPriority);
} 
```

此回调代码是线程安全的，您可以在任何线程中调用它，无论它是否已由 QThread 启动。该事件将被压缩，这意味着它就像一个标志。发布它会设置标志，当小部件完成更新时，标志将被重置。在更新挂起时多次发布它不会将任何事件添加到事件队列中，也不意味着多次更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T04:53:32.627

当我在一个 Qt 应用程序中有多个 OSG 查看器时，我遇到了类似的问题，其中一个运行良好，而其余的则非常“慢”。

通过打开渲染统计（在查看器上按“s”），我发现“慢”实际上不是渲染造成的，实际上渲染是快的。

查看器“慢”的原因是许多gui事件没有处理。比如你拖拽场景，很多拖拽事件是Qt生成的，但是只有少数几个会传递给OSG查看器，所以查看器响应“慢”。

事件下降实际上是由于渲染太快......在Viewer::eventTraversal()中，只处理那些相对新的事件，而“相对新的”通过cutOffTime = _frameStamp->getReferenceTime()来衡量。因此，如果 Qt 生成的事件比渲染慢，许多事件将被切断，因此不会被处理。

最后，在我找到根本原因之后，解决方案很简单。让我们在 Viewer::eventTraversal() 中使用的 _frameStamp 的参考时间作弊：

```
class MyViewer : public osgViewer::Viewer
{
  ...
  virtual void eventTraversal();
  ...
}
void MyViewer::eventTraversal()
{
  double reference_time = _frameStamp->getReferenceTime();
  _frameStamp->setReferenceTime(reference_time*100);

  osgViewer::Viewer::eventTraversal();

  _frameStamp->setReferenceTime(reference_time);

  return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T17:06:39.907

我也花了很多时间来弄清楚如何完成这项工作。

我认为 Gnosophilon 的答案不能与 Qt5 一起使用，因为切换上下文线程的规则比 Qt4 更严格（即，`moveToThread()`需要对 OpenGL 上下文对象进行调用）。在撰写本文时，OSG 不满足此规则。（至少我不能让它工作）

我还没有弄清楚如何在单独的线程中执行此操作，但是，要在 UI 线程中平滑地渲染场景，而不使用固定间隔计时器，可以执行以下操作

```
viewer_->setRunFrameScheme(osgViewer::ViewerBase::ON_DEMAND);
viewer_->setThreadingModel(osgViewer::CompositeViewer::SingleThreaded);
osgQt::initQtWindowingSystem();
osgQt::setViewer(viewer_.get()); 
```

`osgQt::setViewer()`处理全局变量，因此一次只能使用一个查看器。（当然可以是`CompositeViewer`）

# mysql - Mysql查询删除重复项

> ID：10893933
> 
> 赞同：1
> 
> 时间：2012-06-05T08:25:52.037
> 
> 标签：mysql

我有重复的结果，如下所示，其中某些列可能有数据，可能没有

```
| contact_info | icon | id  | title         | lastmodified_by  |
+--------------+------+-----+---------------+------------------+
|          169 |  305 | 123 | Whakarewarewa | 2011100400305262 |
|         NULL | NULL | 850 | Whakarewarewa | NULL             |
+--------------+------+-----+---------------+----------------

| contact_info | icon | id  | title         | lastmodified_by  |
+--------------+------+-----+---------------+------------------+
|         NULL | NULL | 123 | Paris         | NULL             |
|         NULL | NULL | 850 | Paris         | NULL             |
+--------------+------+-----+---------------+---------------- 
```

我想删除数据较少的记录，如果所有字段值完全相同，则删除任何行。有上千条这样的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:33:38.647

试试这个两步解决方案：

运行此查询以查看所有重复项 -**记录具有较少数据**-

```
SELECT t1.* FROM table t1
  JOIN (
    SELECT
      title,
      MIN(IF(contact_info IS NULL, 0, 1) + IF(contact_info IS NULL, 0, 1) + IF(lastmodified_by IS NULL, 0, 1)) min_value_data,
      MAX(IF(contact_info IS NULL, 0, 1) + IF(contact_info IS NULL, 0, 1) + IF(lastmodified_by IS NULL, 0, 1)) max_value_data
    FROM table GROUP BY title HAVING min_value_data <> max_value_data
  ) t2
  ON t1.title = t2.title AND IF(t1.contact_info IS NULL, 0, 1) + IF(t1.contact_info IS NULL, 0, 1) + IF(t1.lastmodified_by IS NULL, 0, 1) <> t2.max_value_data 
```

将其重写为 DELETE 语句并执行。

* * *

然后运行此查询以删除除最小 ID 之外的所有重复项：

```
DELETE t1 FROM table t1
  JOIN (SELECT MIN(id) id, title FROM table GROUP BY title) t2
    ON t1.id <> t2.id AND t1.title = t2.title; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:55:35.557

使用它来选择重复项，随意将其更改为删除语句：

```
SELECT * FROM `test`,
(SELECT title, count( title ) AS ttl
FROM `test`
GROUP BY title
HAVING ttl >1) AS sub

WHERE test.title = sub.title
AND contact_info IS NULL AND lastmodified_by IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:14:35.753

# 主表 = tes1

# 创建温度

> 创建临时表 my_temp ( id INT(20) NOT NULL ) ENGINE=MEMORY;
> 
> # 填写要删除的id
> 
> INSERT INTO my_temp (id) SELECT id FROM tes1 AS main, (SELECT title, count(title) AS ttl FROM tes1 GROUP BY title HAVING ttl >1 ) AS sub WHERE main.title = sub.title AND main.contact_info 为 NULL AND main.lastmodified_by IS NULL GROUP BY main.contact_info、main.icon、main.title、main.lastmodified_by；
> 
> # 删除！
> 
> DELETE FROM tes1 WHERE id IN（从 my_temp 中选择 id）；
> 
> # 清理，注意：我们真的需要这个吗？
> 
> 删除表 my_temp;

# ios - Animation doesn't work

> ID：10893935
> 
> 赞同：0
> 
> 时间：2012-06-05T08:26:06.217
> 
> 标签：ios, animation, layer

I have a problem with an animation. The problem is that if I try to animate a view that is already created all goes well, if I try to create and animate a view at the same time the animation doesn't work.

Can anyone help me?

**My Methods**

```
+ (LoginView *)sharedInstance {
    @synchronized(self) {
        if (nil == _sharedInstance) {
            _sharedInstance = (LoginView *)[[[NSBundle mainBundle] loadNibNamed:@"LoginView" owner:nil options:nil] objectAtIndex:0];
        }
    }
    return _sharedInstance;
}

- (void)hide:(BOOL)value animated:(BOOL)animated {
    CATransition * animation = [CATransition animation];

    animation.type = kCATransitionFade;
    [animation setDuration:1.0];

    if(_autoManageModalView)
        [animation setDelegate:self];

    [[self layer] removeAllAnimations];
    [[self layer] addAnimation:animation forKey:kCATransition];

    self.hidden = value;
} 
```

**How I call them**

```
[[LoginView sharedInstance] hide:NO animated:YES]; 
```

The first time (with the same call) animation doesn't work, from the secondo time all goes well. Thank in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:39:44.443

You are animating your view too early in its lifecycle. In theory, you create a view, then display it somewhere (e.g., `addSubview:`), then you animate it.

It is highly possible, though I have not checked it, that the first time that your `hide:animated:` method is called the `self.layer` property is null; in any case, the animation would happen *before* the view is displayed, so you would not see it.

All in all, first display the view, then call the `hide:animated:` method on it.

After your comment: try and call the `hide:animated:` method through a method like:

```
 performSelector:withObject:afterDelay: 
```

If you specify a 0.0 delay, this will simply queue the call to `hide:animate:` on the main loop, so that all the processing related to `loadNibNamed:` can happen and so give your view the time to be set up for display correctly.

In order to use `performSelector:withObject:afterDelay:` you will need to modify your method signature so that it takes one argument and this must be an NSObject-derived type, not a primitive type.

# mysql - 比较mysql中的价格范围

> ID：10893937
> 
> 赞同：0
> 
> 时间：2012-06-05T08:26:18.400
> 
> 标签：mysql, database

在房地产网站上工作，用户可以根据最低和最高价格搜索房产。现在在数据库中，我有诸如**property_price_maximum 和 property_price_minimum**之类的字段，它们都设置为**INT**。

这是供用户输入值的两个组合框。

```
Min       Max
5 lacs    25 lacs  
25 lacs   50 lacs 
50 lacs   70 lacs
70 lacs   1.5 Cr
1.5 Cr    5 Cr 
```

**注意**：lacs = 十万，Cr = 千万。（100 lacs = 1Crore）[添加信息]

对于整数我试过这个：

```
select property_price_min,property_price_max from properties where (property_price_min between 25 and 55) and (property_price_max between 25 and 55); 
```

工作正常，但是当有像 1.5 这样的 Crore 值时，这会失败，因为我没有在数据库中输入**单位。**

当我将数据库中的字段更改为 Varchar 并尝试使用单位进行类似查询时，结果不正确（显然因为 BETWEEN 仅根据我的知识比较数字）

```
SELECT * from properties inner join cities on properties.city_id=cities.city_id inner join locality on properties.locality_id=locality.locality_id where (cities.city_name like '%".$citySearch."%' and locality.locality_name like '%".$localitySearch."%') and (property_price_min between '78 Lacs' and '80 Lacs'); 
```

我想获得最低和最高价格在用户范围之间的属性。问题是这里的单位 bcoz 如果用户选择 25 lacs 和 1.5 Cr，那么我的查询将不会返回正确。

就数字而言，我认为 LIKE 不是一个好的选择。
任何有帮助的评论将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:01.830

您应该将所有值存储为“lacs”。由于 100 lacs = 1 千万，您应该将 1.5 千万存储为 150 lacs，并以 lacs 进行所有计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:32:20.593

设列的数据类型为`INT`

您可以检查所选值是否为`lakh`或`crore`。

如果是，`crore`则将该值乘以 100，然后将其传递给查询。

**或者**

在数据库中将`crore`值保存为 1.5 千万的 150 但在显示页面中组合框的值与表中的值相同但显示`1.5 Crore`

# git - 在 git 中获取工作目录更改的补丁

> ID：10893942
> 
> 赞同：0
> 
> 时间：2012-06-05T08:26:35.173
> 
> 标签：git, patch

如何在 git 目录中获取工作目录更改的补丁。我知道在 SVN 中获取补丁的方法，但在 git 中我不知道如何获取它。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T08:33:27.837

一个简单`git diff`的生成一个补丁，可以通过`patch`一些调整（例如使用`--strip`）与大多数工具一起应用。当然`git apply`，如果可用，它将是应用此类补丁的首选工具。

# wpf - 为什么我不能将 DataGrid SelectedItem 绑定到用户控件内的 DependencyProperty？

> ID：10893945
> 
> 赞同：0
> 
> 时间：2012-06-05T08:26:58.543
> 
> 标签：wpf, mvvm, user-controls, dependency-properties

我想将`DataGrid` `SelectedItem`用户控件内部的a绑定到a `DependencyProperty` ，这是我的代码：

在用户控件（`DataGridControl`）中：

```
 public static readonly DependencyProperty DataGridSelectedItemProperty
        = DependencyProperty.Register(
        "DataGridSelectedItem"
        , typeof(object)
        , typeof(DataGridSelectorControl)
        , new UIPropertyMetadata(null));

    public object DataGridSelectedItem
    {
        get { return (object)GetValue(DataGridSelectedItemProperty); }
        set { SetValue(DataGridSelectedItemProperty, value); }
    }

  <DataGrid ItemsSource="{Binding Source={StaticResource theSource}}" 
           SelectedItem="{Binding ElementName=DataGridControl,Path=DataGridSelectedItem,UpdateSourceTrigger=PropertyChanged}"  /> 
```

在视图模型中：

```
 object projectSelectedItem;
    public object ProjectSelectedItem
    {
        get
        {
            return projectSelectedItem;
        }
        set
        {
            projectSelectedItem = value;
            RaisePropertyChanged("ProjectSelectedItem");
        }
    } 
```

并认为：

```
<MvvmCommonControl:DataGridControl  DataGridSelectedItem="{Binding ProjectSelectedItem}"  DataGridDataCollection="{Binding DataCollection}"/> 
```

但它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T09:00:59.077

在 Xaml 中使用下面的代码

```
<DataGrid ItemsSource="{Binding Path=Person,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="False"   SelectedItem="{Binding Path=SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"> 
```

在 ViewModel 中，为选定的项目创建属性。这里的客户是具有地址、名称、订单 ID 等属性的类。

```
private Customer selectedItem = new Customer();

        public Customer SelectedItem
        {

            get
            { return selectedItem; }
            set
            {
                selectedItem = value;
                InvokePropertyChanged("SelectedItem");
             }                 
        } 
```

创建一个类来定义依赖属性

```
class DataGridSelectedItemBehaviour:DependencyObject
    {
        public static readonly DependencyProperty SelectedItemProperty
        = DependencyProperty.Register(
        "SelectedItem"
        , typeof(object)
        , typeof(CustomerViewModel)
        , new UIPropertyMetadata(null));

        public object SelectedItem
        {
            get { return (object)GetValue(SelectedItemProperty); }
            set { SetValue(SelectedItemProperty, value); }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:03:29.520

您的用户控件中有以下内容：

```
 SelectedItem="{Binding ElementName=DataGridControl, 
```

但是您的用户控件是否已命名`DataGridControl`？

```
<UserControl
  ...
  x:Name="DataGridControl"> 
```

# file - 目录和没有扩展名的文件有什么区别？

> ID：10893946
> 
> 赞同：3
> 
> 时间：2012-06-05T08:26:58.853
> 
> 标签：file, operating-system, directory, file-extension

在几乎所有类型的计算机（如果不是全部）上，文件夹都没有扩展名。所以我想知道，目录和没有扩展名的文件有什么区别？他们不是同名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:28:55.063

您不能拥有同名的目录和文件（无论扩展名如何），就像您不能拥有两个同名的文件一样。

目录也只是一个文件。

不同之处在于一个目录可以包含其他文件。不管如何调用，它都可以有一个扩展名（或两个）。使它成为目录的原因是它是这样创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:29:41.263

# 目录：

目录是文件和文件夹的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T02:22:52.487

目录和文件之间的区别：文件是任何类型的计算机文档，目录是计算机文档文件夹或文件柜。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-24T05:27:26.927

目录是文件夹和文件的集合。在基于 linux 的系统中，目录将是蓝色的，并且具有类似 --rwx-r--rwx 的权限，并且目录权限从所有者和组的 drwx--rwx 开始，没有人不需要识别目录和文件。

# javascript - Extjs如何在没有ajax的情况下提交表单？

> ID：10893947
> 
> 赞同：3
> 
> 时间：2012-06-05T08:27:02.507
> 
> 标签：javascript, ajax, extjs, extjs4, form-submit

再会！我尝试在没有 ajax 的情况下提交 extjs 表单并在下一页显示结果。这是我的代码：

```
Ext.define('test.from', {
    extend: 'Ext.form.Panel',
    alias: 'widget.test.form',
    initComponent: function () {

        var me = this;

        Ext.apply(this, {
            frame: true,
            bodyPadding: 7,
            border: 0,
            items: [{
                xtype: 'textfield',
                fieldLabel: 'First Name',
                name: 'contact_attr'
            }, {
                xtype: 'textfield',
                fieldLabel: 'Last Name',
                name: 'contact_attr'
            }],
            buttons: [{
                text: 'Send',
                handler: function () {
                    me.getForm().submit({
                        url: '/salary/public/auth/',
                        standardSubmit: true,
                        method: 'POST'
                    });
                }
            }]
        }); 
```

但重定向到其他页面不会发生，我收到错误：`You're trying to decode an invalid JSON String`。有谁能够帮我？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T05:04:33.150

好的，所以你有2个错误。

1.  为什么不重定向（标准提交），以及
2.  为什么你得到“错误解码”

我猜你正在使用 extjs4：

1\. 来自文档 api。它说那个`submit()`方法是`Shortcut to do a submit action`。参数为`The options to pass to the action (see doAction for details)`。所以，`standardSubmit`方法`submit`不是正确的方法。没有标准提交选项。[更多信息](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.form.Basic-method-doAction)。myanswer，您有 2 种替代方式。
首先，使用初始化：

```
Ext.apply(this,{
    standardSubmit:true,  // not working...
    frame: true,
    bodyPadding: 7,
    ....... 
```

* * *

编辑：

```
.......
me.getForm().standardSubmit=true; //just like OP comment
me.getForm().submit({
   url: '/salary/public/auth/',
   standardSubmit: true,
   method: 'POST'
});
....... 
```

* * *

二、使用doAction：

```
...
me.getForm().doAction('standardsubmit',{
   url: '/salary/public/auth/',
   standardSubmit: true,
   method: 'POST'
});
... 
```

2\. 错误解码，我不知道你的`salary/public/auth`样子....
尝试我的第一个解决方案，如果存在错误，则意味着错误在其他地方...

# javascript - 使用页面方法实现 Datalist 删除命令事件

> ID：10893954
> 
> 赞同：2
> 
> 时间：2012-06-05T08:27:52.020
> 
> 标签：javascript, jquery, asp.net, updatepanel, pagemethods

我的页面中有一个 DataList 和更新面板。实施后，我在使用更新面板后检查了响应是否在说话很长时间......**[这是学习材料](http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/)**。我在 Datalist 中有一个 Delete Command 事件，并且在上述情况下可以找到。我试图使用页面方法实现删除命令。任何想法如何做到这一点？

我基本上想在这个事件中找到隐藏的控件并且必须删除`database. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T08:28:52.417

# 休息服务

完整的应用程序可以从以下位置下载：

[http://sdrv.ms/LJJz1K](http://sdrv.ms/LJJz1K)

此示例使用 ASP.Net 中的 REST 服务（相同的概念可以应用于 MVC 应用程序）

使用休息服务与页面方法相比，更明显的优势是可测试性。

我将逐步指导您配置服务：

您需要以下参考资料：

*   System.Web.ServiceModel.dll
*   System.Web.ServiceModel.Activation.dll
*   System.Web.ServiceModel.Web.dll

Nuget 包：

*   [jQuery](https://nuget.org/packages/jQuery)

jQuery插件：

*   [jQuery Block UI](http://jquery.malsup.com/block/)（它可以作为单个脚本文件使用）

服务信息

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    [WebInvoke(
        ResponseFormat = WebMessageFormat.Json, 
        RequestFormat = WebMessageFormat.Json,
        UriTemplate = "/DeleteFromService",
        Method = "DELETE")]
    void Delete(int id);
}

[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MyService : IMyService
{
    public void Delete(int id)
    {
        // delete your product
        // simulate a long process
        Thread.Sleep(5000);
    }
} 
```

在 Global.asax

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RouteTable.Routes.Ignore("{resource}.axd/{*pathInfo}");
    RouteTable.Routes.Add(new ServiceRoute("",
      new WebServiceHostFactory(),
      typeof(MyService)));

} 
```

在 web.config

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true"
          automaticFormatSelectionEnabled="true" />
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

注册脚本（可以在母版页中注册）

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js" language="javascript" ></script>
<script language="javascript" type="text/javascript" src="Scripts/jquery.blockui.1.33.js"></script> 
```

在 ASP.Net 内容页面中（在此示例中，我使用的是母版页）

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<input type="button" value="Delete" id="myButton" />
</asp:Content>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript" language="javascript">
        function deleteFromService() {
            if (!confirm("Are you sure you want to delete?")) {
                return;
            }
            $.blockUI();
            $.ajax({
                cache: false,
                type: "DELETE",
                async: true,
                url: "/DeleteFromService",
                data: "3", // get your id to delete
                contentType: "application/json",
                dataType: "json",
                success: function () {
                    $(document).ajaxStop($.unblockUI); 
                    alert("done");
                },
                error: function (xhr) {
                    $(document).ajaxStop($.unblockUI); 
                    alert(xhr.responseText);
                }
            });
        }
        jQuery().ready(function () {
                        $("#myButton").click(deleteFromService);
        });
    </script>
</asp:Content> 
```

就是这样，ajax 命令很简单 =)

# facebook - 翻译 Facebook Open Graph 消息？

> ID：10893957
> 
> 赞同：0
> 
> 时间：2012-06-05T08:28:07.547
> 
> 标签：facebook, translation, facebook-opengraph

我需要以多语言实现开放图形操作。我在打开的图形仪表板中找不到任何可以为我的操作定义翻译的地方。我已经在 meta 中为所需区域设置了语言环境，但可以找到正确的翻译方式。有人可以帮我实现它吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:16.350

看看[国际](https://developers.facebook.com/docs/internationalization/)化文档，那里都有解释。另请参阅[https://developers.facebook.com/docs/opengraph/internationalization/](https://developers.facebook.com/docs/opengraph/internationalization/)

# string - Tcl：如果变量为空，则默认？

> ID：10893959
> 
> 赞同：7
> 
> 时间：2012-06-05T08:28:43.943
> 
> 标签：string, tcl

我已经“继承”了一些 Tcl 代码，虽然我学习了一些教程并且可以理解该语言，但我自己的 Tcl 构造缺乏一定的……技巧。

例如，我有这个代码：

```
puts "Column 'name': [ $queryRs getString name ]" 
```

`$queryRs`是 SQL 查询的结果集。该`[ $queryRs getString name ]`构造从结果集中的当前行检索表列“名称”的内容。如果数据库字段为 NULL，`puts`则不打印任何内容。

我想打印一个“默认”字符串，即如果`[ $queryRs getString name ]`没有结果，我想用`"--"`.

现在，我可以做这样的事情：

```
set nameVar "[ $queryRs getString name ]"
if { [ string length $nameVar ] == 0 } {
    set nameVar "--"
}
puts "Column 'name': $nameVar" 
```

但是**必须有**一个更紧凑的解决方案，可以内联完成，而不是添加四行和一个临时变量。请帮忙？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T10:15:58.823

两件事情。

首先，Tcl 没有`NULL`(或其他)*值的概念，*`nil`当您想要模拟这样的值时，您必须使用变量并[测试它的存在](http://www.tcl.tk/man/tcl8.5/TclCmd/info.htm#M11)，或者使用 an 中的条目并[测试](http://wiki.tcl.tk/dict)它的也存在。如果存在这样的变量/条目，则定义该值，否则不定义。`undefined`*[`array`](http://wiki.tcl.tk/array)[`dict`](http://wiki.tcl.tk/dict)*

 *不幸的是，继承代码的创建者显然并不关心变量与具有默认值的变量（空字符串）无法区分的情况`NULL`。`NULLs`

接下来，您可以使用帮助程序来执行您需要的操作：

```
proc ValueOrDef {val {def --}} {
   expr {$val ne "" ? $val : $def}
} 
```

然后像这样：

```
puts [ValueOrDef [$queryRs getString name]]
puts [ValueOrDef [$queryRs getString name] "some other default"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:00:52.297

您可以使用命令的`x?y:z`构造`expr`。`x`是条件，`y`满足条件时是备选方案，不满足时`z`是备选方案`x`。

例如（但仍然有一个临时变量）：

```
set nameVar [ $queryRs getString name ]
puts "Column 'name': [expr {[string length $nameVar]>0 ? $nameVar : "--"}]" 
```*

# sql - 现在和最大日期值之间的日期差大于 X

> ID：10893960
> 
> 赞同：0
> 
> 时间：2012-06-05T08:28:44.937
> 
> 标签：sql, postgresql, date, max, datediff

我想返回一个结果集（来自 postgres 数据库），其中包含最后付款日期超过 X 天前的客户。

这是我目前要获取所有客户及其最后付款日期的列表：

```
 select usermaster.userid, date_trunc('days', now()-max(paymentdate)) as last_payment
  from usermaster, paymentdetail 
  where usermaster.userid=paymentdetail.userid
  group by usermaster.userid; 
```

我想限制一个额外的 where 条件： where ... and last_payment > 100 days

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:52.250

您可以`having`在最后添加：

```
having trunc('days', now()-max(paymentdate)) > 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:33:09.287

这应该可以解决问题

编辑 -

```
select * from 
(SELECT usermaster.userid, date_trunc('days', now()-max(paymentdate)) as  
        last_payment
from usermaster, paymentdetail 
where usermaster.userid=paymentdetail.userid
group by usermaster.userid ) as temptab
where last_payment>100; 
```

# java - 为什么 short 在覆盖的情况下与 int 不兼容？

> ID：10893961
> 
> 赞同：0
> 
> 时间：2012-06-05T08:28:44.850
> 
> 标签：java, overriding, int, primitive, short

我有一个名为 child 的子类，它继承了一个名为 parent 的类。我正在尝试覆盖超类中的方法。我做了一点实验。我创建了具有返回类型 short 的覆盖方法，它是 int 的子类型。据我所知，我可以这样做。并且该方法在法律上被覆盖。每当我使用超类的引用调用该方法时，编译器都会生成一个不兼容的返回类型错误。这里有什么问题？我的代码如下：

```
class parent
{

    int test()
    {
        System.out.println("called inside parent\n");
        return 1;
    }
}

class child extends parent
{

    short test()
    {
        System.out.println("called inside child\n");
        return 1;
    }
}

class Myclass
{

    public static void main(String[] args)
    {
        parent a=new child();
        a.test();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T08:32:18.420

> short 是 int 的子类型

错了，不是。的值范围`short`是 的*子集*，`int`但这是一个完全不同的问题。一个`short`值确实可以*转换为*（`int`甚至是隐式地），仍然 a`short` *不是*a `int`。

原始类型不是常规类，因此它们不能具有超类型/子类型关系。因此，在这种情况下，您不能使用返回类型的逆变：一旦`int`在基方法中声明了返回类型，它的所有覆盖都必须返回`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:32:33.250

> 我创建了具有返回类型 short 的覆盖方法，它是 int 的子类型。

不，`short`不是的子类型`int`（它不是这样`int`可以被视为的超类`short`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:30:46.260

我认为您应该使用相同的签名来覆盖方法。

```
short test() 
```

不同于

```
int test() 
```

它不仅限于 Java。我认为这也适用于 C#。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:37:47.397

您不能根据返回类型区分方法，除非返回类型中的类具有父子关系。即使在这种情况下，您也只能在覆盖的方法中向下转换。在 int & short 的情况下，它们是原始数据类型，不存在这种关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T08:44:12.640

查看[原始 Java 数据类型的文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

# java - Java Ant 任务使用了错误的解释器（java.exe 而不是 javaw.exe）

> ID：10893980
> 
> 赞同：2
> 
> 时间：2012-06-05T08:29:42.787
> 
> 标签：java, ant

我想将我的 Ant 构建切换为使用 javaw.exe 而不是 java.exe。我设法通过设置 _JAVACMD 环境变量来做到这一点。

但是，当使用 fork = "true" 调用 java 任务时，无论如何都会启动 java.exe（我已经检查过 - 我的构建文件中没有明确的规范）。

我已经尝试将 ant.bat 替换为 java.exe 更新为 javaw.exe，但这也无济于事。

Java 1.7.0.4 x64 Windows 7 x64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:38:39.293

您可以使用`jvm`Java ant 任务的属性来指定要使用的 JVM。

```
<java jvm="javaw.exe" fork="true" ... >
    ...
</java> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T05:07:38.263

这建立在@Teetoo 提供的答案之上：我认为最好`jvm`将任务的属性`java`设置为可执行文件的完整路径名，主要是与运行 Ant 的 Java 版本相关联的可执行文件。如果您的系统上安装了多个 Java 版本，则可能会使用您不希望的版本，具体取决于系统搜索路径的设置方式。

此外，如果您希望脚本在非 Windows 操作系统上工作，您不希望对使用进行硬编码，`javaw.exe`因为它仅在 Windows 平台上可用。

以下 Ant 目标将相应地设置 javaw.exe 属性：

```
<!-- Utility target to set javaw.exe property to pathname of JVM
     binary that can execute with no associated console -->
<target name="set-javaw-exe">
  <condition property="javaw.exe.basename"
             value="javaw.exe"
             else="java.exe">
    <os family="windows"/>
  </condition>
  <property name="javaw.exe.candidate"
            location="${java.home}/bin/${javaw.exe.basename}"/>
  <!-- If full pathname does not exist, fallback to just basename and hope it works -->
  <condition property="javaw.exe"
             value="${javaw.exe.candidate}"
             else="javaw.exe.basename">
    <resourceexists>
      <file file="${javaw.exe.candidate}"/>
    </resourceexists>
  </condition>
</target> 
```

您可以将目标添加到需要使用该属性的任何目标的依赖列表中，或者您可以将属性设置代码放置在项目级别的目标之外，以便始终设置该属性。

使用属性集，您可以执行以下操作：

```
<java jvm="${javaw.exe}" ...> 
```

我知道该解决方案不能解决您必须更改`java`构建脚本中任务的所有用途的担忧，但我认为这是不可避免的，除非您修改 Ant 源代码本身。即使您决定创建一个自定义 Ant 任务，可能是 Ant`java`任务实现的子类，您仍然必须修改所有调用以使用您的自定义任务。

IMO，Ant 的 java 任务应该默认使用，但如果操作系统是 Windows 并且属性为 true `javaw.exe`，则限制使用它。`spawn`我最近发现，即使在`spawn`设置为之后`true`的 JRE 版本中，生成的进程也不会完全与控制台分离。我有一个脚本，它通过直接调用 Tomcat 的引导类来启动 Tomcat，但是如果我关闭控制台窗口，它会导致 Tomcat 终止。我采用了上面的技术来解决这个问题。

# forms - 提交按钮的处理程序

> ID：10893986
> 
> 赞同：0
> 
> 时间：2012-06-05T08:30:07.077
> 
> 标签：forms, extjs, handler

我想在 extjs 中使用带有表单的保存按钮。这就是我作为处理程序所拥有的

```
{
         xtype: 'button',
         handler: function(button, event) {
             var form = this.getForm();
             if (form.isValid()) {
                Ext.MessageBox.alert('Submitted Values', form.getValues(true));
                                 }
                                           },
          height: 37,
          id: 'configurationDriversSave',
          text: 'Save'
} 
```

我现在在 firebug 中得到的只是一个错误：this.getForm 不是函数。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:32:16.597

在处理程序`this`中将引用按钮本身。您可以在萤火虫中检查，按钮当然没有方法`getForm()`。你需要调用类似'this.up('form')`的东西。

第二件事 - 您不必像尝试做的那样进行手动验证。ExtJs 有内置的表单验证机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:20:24.797

```
this.getForm 
```

Firefox 不支持，`document.forms`请改用，或者您也可以从此[链接](http://www.dynamicdrive.com/forums/archive/index.php/t-9215.html)获得任何参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:41:51.550

根据[这篇博](http://www.javascript-coder.com/javascript-form/javascript-get-all-form-objects.phtml)文，您可以简单地使用`this.form`来访问包含生成事件的元素的表单元素。

所以，而不是

```
var form = this.getForm(); 
```

采用

```
var form = this.form; 
```

# jquery - 函数“有”不适用于使用 jQuery 加载的数据

> ID：10893989
> 
> 赞同：2
> 
> 时间：2012-06-05T08:30:15.377
> 
> 标签：jquery, ajax

我正在使用该功能`has()`来检查`li`标签是否`ul`在里面。如果有`ul`标签，`li`我将添加一些 CSS 属性，我的代码`li`在渲染页面时创建标签时运行良好，但当我使用 Ajax 并`$.each()`创建这些`li`项目时，我的代码`has()`不起作用。

jQuery代码是：

```
$('.innerItems li ul li').has('ul').css({'background-image':'url(images/arrow.png)',
                                         'background-position':'2px center',
                                         'background-repeat':'no-repeat'}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:31:44.950

改为使用`.find`，`.has`只是为了测试它是否具有`ul`.

```
$('.innerItems li ul li').find('ul').css({'background-image':'url(images/arrow.png)',
                                         'background-position':'2px center',
                                         'background-repeat':'no-repeat'}); 
```

***编辑：*** 似乎你想要这个：

```
$('.innerItems li ul li:has(ul)').css({'background-image':'url(images/arrow.png)',
                                         'background-position':'2px center',
                                         'background-repeat':'no-repeat'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:35:08.080

不要忘记写下这一行：

```
$('.innerItems li ul li').has('ul').css({'background-image':'url(images/arrow.png)',
                                     'background-position':'2px center',
                                     'background-repeat':'no-repeat'}); 
```

**在您`$.each`创建`<li>`项目**之前。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:36:12.510

您可以尝试选择 UL，然后返回最近的 LI 并应用样式。对我来说似乎更合乎逻辑：

```
$('.innerItems li ul li ul').closest('li').css( //... 
```

使用替代解决方案`.find()`：

```
$('.innerItems li ul li').find('ul').closest('li').css( //... 
```

但它们基本上是平等的。**

# string - 使用从网络浏览器接收到的未知编码方法解码字符串

> ID：10893995
> 
> 赞同：0
> 
> 时间：2012-06-05T08:30:57.567
> 
> 标签：string, character-encoding, decode

在 web 应用程序中，我正在处理对 url 的请求，例如

```
 http://example.com/<website-base-url> 
```

我正在将请求的原始 GET 参数记录在 uft8 数据库列和文件系统中。对于一些中文域，我收到带有 website-base-url 参数的请求，例如

```
 %C3%83%C2%A3%C3%82%C2%A5%C3%83%C2%A2%C3%82%C2%A4%C3%83%C2%A2%C3%82%C2%A7%C3%83%C2%A3%C3%82%C2%A5%C3%83%C2%A2%C3%82%C2%A4%C3%83%C2%A2%C3%82%C2%B4%C3%83%C2%A3%C3%82%C2%A8%C3%83%C2%A2%C3%82%C2%B4%C3%83%C2%A2%C3%82%C2%B4.cn 
```

使用 urldecode 解码返回

```
 Ã£Â¥Ã¢Â¤Ã¢Â§Ã£Â¥Ã¢Â¤Ã¢Â´Ã£Â¨Ã¢Â´Ã¢Â´.cn 
```

这似乎不是用户想要请求的域名。

我尝试了 urlencoding、base64、utf8 和组合，但都没有成功。

有什么建议如何将给定参数解码为 utf8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:45:04.253

URL 百分比编码只是对原始字节进行编码。它不会为您提供有关文本实际编码的任何提示。如果你不知道这些字节代表什么编码，你所能做的就是猜测。

```
php > $d = urldecode('%C3%83%C2%A3%C3%82%C2%A5%C3%83%C2%A2%C3%82%C2%A4%C3%83%C2%A2%C3%82%C2%A7%C3%83%C2%A3%C3%82%C2%A5%C3%83%C2%A2%C3%82%C2%A4%C3%83%C2%A2%C3%82%C2%B4%C3%83%C2%A3%C3%82%C2%A8%C3%83%C2%A2%C3%82%C2%B4%C3%83%C2%A2%C3%82%C2%B4.cn');

php > echo $d;
Ã£Â¥Ã¢Â¤Ã¢Â§Ã£Â¥Ã¢Â¤Ã¢Â´Ã£Â¨Ã¢Â´Ã¢Â´.cn

php > echo iconv('BIG5', 'UTF-8', $d);

php > echo iconv('Shift-JIS', 'UTF-8', $d);
ﾃδ｣ﾃつ･ﾃδ｢ﾃつ､ﾃδ｢ﾃつｧﾃδ｣ﾃつ･ﾃδ｢ﾃつ､ﾃδ｢ﾃつｴﾃδ｣ﾃつｨﾃδ｢ﾃつｴﾃδ｢ﾃつｴ.cn

php > echo iconv('GB18030', 'UTF-8', $d);
脙拢脗楼脙垄脗陇脙垄脗搂脙拢脗楼脙垄脗陇脙垄脗麓脙拢脗篓脙垄脗麓脙垄脗麓.cn 
```

GB18030 似乎是最好的候选者，但即使是解码后的字符串看起来也有点重复，不能成为真正有用的中文。

# soapheader - c#.net客户端和php服务器之间的soap标头

> ID：10893996
> 
> 赞同：0
> 
> 时间：2012-06-05T08:30:59.413
> 
> 标签：soapheader

我有一个用 php 编写的 web 服务，我将它作为 web 引用添加到我的 asp.net 网站（asp，c#）我知道如何从 c#.net 客户端调用 web 服务的方法，但我仍然有问题：我想要通过 Web 服务调用发送一个肥皂头（从 c#.net 客户端到 php 服务器）

我这样做了，但是在 php 客户端中，通过使用 $client->setHeaders，并在 $server 中解析了发送标头，但是如何在 c#.net 客户端中执行此操作，

注意：我在 server.php 中没有标头类，它适用于 php

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:56:14.390

使用 WCF 自定义标头填写额外信息以传递给 php。 [http://cisforcoder.wordpress.com/2010/12/01/how-to-implement-basic-http-authentication-in-wcf-on-windows-phone-7/](http://cisforcoder.wordpress.com/2010/12/01/how-to-implement-basic-http-authentication-in-wcf-on-windows-phone-7/)

链接中的此示例传递了 Authorization 的标头

如果您对 php 服务进行 Web 引用，那么我可以指出之前在论坛上已经询问过的人。

[将 SOAP 标头添加到 ASMX 服务请求](https://stackoverflow.com/questions/8132887/adding-soap-headers-to-asmx-service-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T05:37:49.743

如果你正在使用`nuSoap`，你可以去[图书馆](http://nusoap.sourceforge.net)，你会找到生成数据包响应的代码。在那里您可以添加自己的`attributes`并`headers`根据您的要求。

# c# - 如何从定时器事件处理程序获取事件/异常返回到 C# 中的主线程？

> ID：10893998
> 
> 赞同：0
> 
> 时间：2012-06-05T08:31:05.300
> 
> 标签：c#, .net, exception, timer

我有 Windows 服务应用程序（没有 winforms）。在 Main 方法中，我启动了计时器。Timer elapsed 事件处理程序正在新线程（？）中运行。有什么简单的方法可以将异常从计时器经过的事件处理程序抛出回主线程吗？

我试图处理处理程序主体中的异常并引发自定义事件，但是当我在引发此事件时重新启动主进程时，现在运行 2 个进程同时执行相同的操作。

如何从定时器事件处理程序线程中获取事件或异常信息返回主线程？

谢谢你。

编辑：

```
using System;
using System.Security.Permissions;
using System.Timers;

namespace TestingConsoleApplication.Model
{
    static class ThreadExceptionTester
    {
    [SecurityPermission(SecurityAction.Demand, Flags = SecurityPermissionFlag.ControlAppDomain)]
    public static void Run()
    {
        AppDomain currentDomain = AppDomain.CurrentDomain;
        currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyHandler);

        Timer Timer = new Timer(1000);
        Timer.Elapsed += new ElapsedEventHandler(TimerEventHandler);
        Timer.Start();

        try
        {
            throw new Exception("1");
        }
        catch (Exception e)
        {
            Console.WriteLine("Catch clause caught : " + e.Message);
        }

        //throw new Exception("2");
    }

    static void MyHandler(object sender, UnhandledExceptionEventArgs args)
    {
        Exception e = (Exception)args.ExceptionObject;
        Console.WriteLine("MyHandler caught : " + e.Message);
    }

    static void TimerEventHandler(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("Throwing from timer event handler");
        throw new Exception("timer exception");
    }
}
} 
```

这写在控制台上：

```
Catch clause caught : 1
Throwing from timer event handler 
```

然后程序在 throw new Exception("timer exception"); 上出现未处理的异常而崩溃；如果我取消注释 throw new Exception("2"); Exeption 被处理并且在控制台上也是“Catch 子句被捕获：2”。换句话说，计时器异常不是由 MyHandler 处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:04:49.930

您需要使用[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件来订阅所有异常事件。

**编辑：** 根据 MSDN：

> 在 .NET Framework 2.0 版及更早版本中，Timer 组件捕获并抑制由 Elapsed 事件的事件处理程序引发的所有异常。此行为可能会在 .NET Framework 的未来版本中发生更改。

我已经使用 dotPeek 从 .NET4 查看了 System.Timers.Timer 的来源，但自 2.0 以来仍然没有任何变化，因此请考虑改用 System.Threading.Timer。