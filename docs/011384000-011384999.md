# StackOverflow 问答 11384000-11384999

# javascript - 动画回调不运行

> ID：11384008
> 
> 赞同：1
> 
> 时间：2012-07-08T14:47:48.693
> 
> 标签：javascript, jquery, callback, jquery-animate

过去几个小时我一直在研究这个问题，这让我的小脑袋感到困惑。

正在发生的事情是 jQuery 动画动画似乎在动画期间停止，从而阻止了回调的发生。

**问题是这种情况间歇性和随机发生，我无法在我的代码中找到问题。它似乎发生大约七分之一。然而它可能发生在第一次或 10 次之后。**

在这种情况下，我真的无法组合一个 jsfiddle，因为它与网站的其他部分联系得非常紧密。相反，我想在这里留下一个链接并指向相关部分。以下是[相关网站的链接](http://gecko-drupal6.msg360.co.uk/)。下面显示的代码从第 219 行开始。如果您查看 firebug 控制台，您可以看到我在代码运行时创建的日志。您还可以看到，`left`当问题发生时，css 属性并没有一直动画到完成。

下面是显示问题的图像。请注意，css`left`属性不在 664 像素（如果问题没有发生的话）。

![在此处输入图像描述](../Images/28a8abdd05c540a20378312b6b8dd01b.png)

下面是相关代码。

```
 $(".close").live("click", function() {

        console.log("--------------------");
        console.log("Close button has been clicked");

        var toMove = $(this).parent().attr("class").replace("infoBox ", "");

        $(this)
            .parent()
            .fadeOut("fast");

        console.log("Setting #" + toMove + " back to default position");

        $("#" + toMove)
            .removeClass("active")
            .addClass("ready")
            .delay(100)
            .animate({
                left: $("#" + toMove).attr("data-left").replace("px", "")
            }, 200, function() {
                console.log("Animate has finished. Now checking all images are in the right place");
                resetAll();
                $(".close").remove();
        });
    }); 
```

我的问题有什么问题吗？让我知道，我非常乐意修改 + 编辑，使其符合 stackoverflow 的严格标准！

**有关的**

[.animate() 回调的错误？](https://stackoverflow.com/questions/4473621/bug-with-animates-callback)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:05:10.690

尝试为您的图标添加中间状态。一旦您单击关闭按钮，课程就会从“活动”变为“准备就绪”。例如添加“移动”，并且在其状态为“移动”时不要让任何其他函数被调用。当它返回到初始位置时，您可以再次将类设置为“就绪”。

```
$("#" + toMove)
        .removeClass("active")
        .addClass("moving")
        .delay(100)
        .animate({
            left: $("#" + toMove).attr("data-left").replace("px", "")
        }, 200, function() {
            console.log("Animate has finished. Now checking all images are in the right place");
            resetAll();
            $(".close").remove();
    })
        .removeClass("moving")
        .addClass("ready"); 
```

# javascript - 在 Javascript 中定义数组

> ID：11384009
> 
> 赞同：0
> 
> 时间：2012-07-08T14:48:12.157
> 
> 标签：javascript, multiple-definition-error

在开始时定义变量时，它无法定义第二个二维数组。为什么？应该怎么做？

```
var NPC = new Array(10);
for (var i = 0; i < 10; i++)
{
    NPC[i] = new Array(7);
};

var previous_bead_NPC = new Array(10);
for (var i = 0; i < 10; i++)
{
    previous_bead_NPC[i] = new Array(7);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:50:09.600

使用 Array 构造函数没有实际意义：

```
var NPC = []; 
```

很好。JavaScript 无论如何都不会预先分配空间（至少现代运行时不会）。如果您希望数组具有特定长度，可以这样做：

```
NPC[9] = undefined; // now it'll be 10 elements long 
```

因此，如果你想创建一个 10 行的数组，每行都是一个长度为 7 的数组：

```
var NPC = [];
for (var i = 0; i < 10; ++i) {
  NPC[i] = [];
  NPC[i][6] = undefined;
} 
```

（我不知道你为什么想要那个，但我想它可以达到某种目的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:10:44.630

![在此处输入图像描述](../Images/70e6e93c219265dc1529485b90c393af.png)

这是我将您的代码粘贴到示例网站时看到的内容。没有进行任何修改。所以我想你的问题可以通过修复/更新你的萤火虫来解决；）

# python - RestKit 与 Django-Tastypie 的集成

> ID：11384010
> 
> 赞同：0
> 
> 时间：2012-07-08T14:48:13.500
> 
> 标签：python, django, xcode, restkit, tastypie

这是我使用 RestKit 的第一个项目，我试图让我的简单 iOS 应用程序与使用 Tastypie 包的 Django 应用程序提供的一组 API 同步。我的 iOS 应用程序基于 Core Data Default Xcode 应用程序。

我正在尝试从一个简单的模型中检索对象：

**Car (name (string), public (boolean), id (integer), created (datetime))**

我的 API 看起来像这样的集合：

[http://www.example.com/api/v1/car/?format=json](http://www.example.com/api/v1/car/?format=json)

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"created": "2012-07-04T13:47:37+00:00", "id": "1", "name": "BMW", "public": true, "resource_uri": "\/api\/v1\/car\/1\/",}]} 
```

对于 1 个对象：

[http://www.example.com/api/v1/car/1/?format=json](http://www.example.com/api/v1/car/1/?format=json)

```
{"created": "2012-07-04T13:47:37+00:00", "id": "1", "name": "BMW", "public": true, "resource_uri": "\/api\/v1\/car\/1\/",} 
```

鉴于这种情况，在我的 iOS 应用程序中，我在我的应用程序委托中配置了我的商店

```
-(void)configureObjectStore { 
// Initialize the RestKit Object Manager
RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:[[NSURL alloc] initWithString:@"http://www.example.com/api/v1"]];
objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

// Initialize object store
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"database.sqlite"];

[self coreDataMapping];
} 
```

并通过 Application Delegate 设置我的映射（不确定这应该在这里......）

```
- (void)coreDataMapping {
// Now for the object mappings
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Car" inManagedObjectContext:self.managedObjectContext];
RKManagedObjectMapping* carMapping = [RKManagedObjectMapping mappingForEntity:entity inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
[carMapping mapKeyPath:@"id" toAttribute:@"carId"];
[carMapping mapAttributes:@"name", nil];
[carMapping mapKeyPath:@"public" toAttribute:@"public"];
[carMapping mapKeyPath:@"created" toAttribute:@"created"];
carMapping.primaryKeyAttribute = @"carId";

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:carMapping];
} 
```

然后在我的主控制器中，我想在表格视图中加载我的所有对象（所有汽车）

```
- (void)loadData { 
// Load the object model via RestKit
RKObjectManager* objectManager = [RKObjectManager sharedManager];
[objectManager loadObjectsAtResourcePath:@"/car/1/?format=json" usingBlock:^(RKObjectLoader *loader) {
loader.objectMapping = [objectManager.mappingProvider objectMappingForClass:[Car class]];
loader.delegate = self;
}];
} 
```

当我启动我的应用程序并尝试加载对象列表时，它会从委托中触发 didFailWithError 方法，并且我有以下堆栈：

```
I restkit.core_data:RKInMemoryManagedObjectCache.m:34 Creating thread-local entity cache for managed object context: <NSManagedObjectContext: 0x887f1b0>
I restkit.core_data:RKInMemoryManagedObjectCache.m:50 Caching instances of Entity 'Car' by primary key attribute 'carId'
E restkit.core_data:RKManagedObjectStore.m:262 Core Data Save Error
                                NSLocalizedDescription: (null)
                                NSValidationErrorKey: (null)
                                NSValidationErrorPredicate: (null)
                                NSValidationErrorObject: (null)
E restkit.core_data:RKManagedObjectLoader.m:167 Failed to save managed object context after mapping completed: The operation couldn’t be completed. (Cocoa error 134020.)
Hit error: Error Domain=NSCocoaErrorDomain Code=134020 "The operation couldn’t be completed. (Cocoa error 134020.)" UserInfo=0x89612c0 {NSAffectedObjectsErrorKey=<Car: 0x6c85670> (entity: Car; id: 0x6c65790 <x-coredata:///Car/t318CE65F-E4FE-44E1-813B-GEZG54> ; data: {
    created = "2012-07-04 13:47:37 +0000";
    favorites = (); (Note this relation is not mapped in the API but it is not required)
    carId = 1;
    modified = nil;
    name = BMW;
    public = 1;
}), NSUnderlyingException=Store <NSSQLCore: 0x88848c0> (URL: file://localhost/Users/me/Library/Application%20Support/Documents/database.sqlite) cannot hold instances of entity (<NSEntityDescription: 0x886f650>) name Car, managedObjectClassName Car, renamingIdentifier Car, isAbstract 0, superentity name (null), properties {
created = "(<NSAttributeDescription: 0x886dce0>), name created, isOptional 1, isTransient 0, entity Car, renamingIdentifier created, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, attributeType 900 , attributeValueClassName NSDate, defaultValue (null)";
favorites = "(<NSRelationshipDescription: 0x886e900>), name favorites, isOptional 1, isTransient 0, entity Car, renamingIdentifier favorites, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, destination entity Favorite, inverseRelationship list, minCount 0, maxCount 0, isOrdered 0, deleteRule 1";
carId = "(<NSAttributeDescription: 0x886dd80>), name carId, isOptional 1, isTransient 0, entity Car, renamingIdentifier carId, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0";
name = "(<NSAttributeDescription: 0x886de20>), name name, isOptional 1, isTransient 0, entity Car, renamingIdentifier name, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)";
public = "(<NSAttributeDescription: 0x886de70>), name public, isOptional 1, isTransient 0, entity Car, renamingIdentifier public, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, attributeType 800 , attributeValueClassName NSNumber, defaultValue (null)";
}, subentities (null), userInfo {
}, versionHashModifier (null)} 
```

我已经尝试了很多东西，但我觉得我在这里转了一圈。任何建议都将受到热烈欢迎。

感谢您的时间和支持，问候，

PS：我们应该能够排除与 RestKit 无关的错误，因为在集成之前应用程序运行顺利。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:29:02.597

由于这个问题没有答案，我将自己回答我如何处理这些问题。

我实际上已经放弃了 RestKit，它当然非常强大，但我无法将它弯曲到足够的程度，所以它可以与 Django-Tastypie 一起使用，而是我去了[高级别的 AFNetworking](https://github.com/AFNetworking/AFNetworking/)，但允许我对 Core Data 后端做我自己的 API 和结果很方便。

我希望这可以帮助其他一些迷失的灵魂。问候，

# java - Java - InputStreamReader 的替代品？

> ID：11384011
> 
> 赞同：2
> 
> 时间：2012-07-08T14:48:15.903
> 
> 标签：java

**已经解决了。忽视**

我有一个`InputStream`以设定的时间间隔提供输出行。我需要把它包在`BufferedReader`别的地方，所以我试着把它包`InputStreamReader`起来

```
myReader = new InputStreamReader(new MyStream(soureFile,interval)); 
```

但是，现在`myReader`首先阻塞，`read()`直到我的流使整个输出可用。InputStreamReader 是否有一些不这样做的替代方法？

（只是为了完整起见：是的，我测试了我的 InputStream - 它实际上是 InputStreamReader 正在做阻塞）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:45:24.467

解决方案是我忘记实现 byte[] 读取方法。我现在对其进行了更改，因此它不会尝试阅读比现有内容更多的内容，并且现在可以使用。

# python - Python，ctypes，多维数组

> ID：11384015
> 
> 赞同：4
> 
> 时间：2012-07-08T14:49:31.287
> 
> 标签：python, multidimensional-array, python-3.x, structure, ctypes

我在 Python 代码和 C 代码中有结构。我填写这些字段

```
("bones_pos_vect",((c_float*4)*30)),
("bones_rot_quat",((c_float*4)*30)) 
```

在具有正确值的 python 代码中，但是当我在 C 代码中请求它们时，我从所有数组单元中只得到 0.0。为什么我会失去价值观？我的结构的所有其他领域都可以正常工作。

```
class SceneObject(Structure):
    _fields_ = [("x_coord", c_float),
                ("y_coord", c_float),
                ("z_coord", c_float),
                ("x_angle", c_float),
                ("y_angle", c_float),
                ("z_angle", c_float),
                ("indexes_count", c_int),
                ("vertices_buffer", c_uint),
                ("indexes_buffer", c_uint),
                ("texture_buffer", c_uint),
                ("bones_pos_vect",((c_float*4)*30)),
                ("bones_rot_quat",((c_float*4)*30))]

typedef struct
{
    float x_coord;
    float y_coord;
    float z_coord;
    float x_angle;
    float y_angle;
    float z_angle;
    int indexes_count;
    unsigned int vertices_buffer;
    unsigned int indexes_buffer;
    unsigned int texture_buffer;
    float bones_pos_vect[30][4];
    float bones_rot_quat[30][4];    
} SceneObject; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T17:27:32.787

这是一个如何将多维数组与 Python 和 ctypes 一起使用的示例。

我编写了以下 C 代码，并`gcc`在 MinGW 中用于将其编译为`slib.dll`：

```
#include <stdio.h>

typedef struct TestStruct {
    int     a;
    float   array[30][4];
} TestStruct;

extern void print_struct(TestStruct *ts) {
    int i,j;
    for (j = 0; j < 30; ++j) {
        for (i = 0; i < 4; ++i) {
            printf("%g ", ts->array[j][i]);
        }
        printf("\n");
    }
} 
```

请注意，该结构包含一个“二维”数组。

然后我编写了以下 Python 脚本：

```
from ctypes import *

class TestStruct(Structure):
    _fields_ = [("a", c_int),
                ("array", (c_float * 4) * 30)]

slib = CDLL("slib.dll")
slib.print_struct.argtypes = [POINTER(TestStruct)]
slib.print_struct.restype = None

t = TestStruct()

for i in range(30):
    for j in range(4):
        t.array[i][j] = i + 0.1*j

slib.print_struct(byref(t)) 
```

当我运行 Python 脚本时，它调用了 C 函数，该函数打印出多维数组的内容：

```
C:\>slib.py
0.1 0.2 0.3 0.4
1.1 1.2 1.3 1.4
2.1 2.2 2.3 2.4
3.1 3.2 3.3 3.4
4.1 4.2 4.3 4.4
5.1 5.2 5.3 5.4
... rest of output omitted 
```

我使用过 Python 2，而您问题上的标签表明您正在使用 Python 3。但是，我认为这不会有所作为。

# c# - 如何找出WinForms应用程序已被鼠标单击

> ID：11384017
> 
> 赞同：1
> 
> 时间：2012-07-08T14:49:39.670
> 
> 标签：c#, winforms, hotkeys

WinForms 应用程序在单击热键（ctrl + 鼠标右键单击）后从鼠标位置捕获单词。

热键监控在第三方组件中运行。

按下热键后，组件通过单击控件 hwnd 参数和鼠标位置引发事件。

我怎样才能知道热键是否点击了应用程序？

有必要知道，因为当应用程序被捕获该单词的某个窗口隐藏时，它将显示在前面并改变位置，如果覆盖该单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:05:43.367

热键处理后，第三方组件通过单击控件 hwnd 参数和鼠标位置引发事件。

要了解包含控件的应用程序的根窗口，可以使用*GetAncestor函数：http:* [//msdn.microsoft.com/en-us/library/windows/desktop/ms633502 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633502(v=vs.85).aspx)

因此，要知道我们的应用程序是否被点击，我们只需比较它的 hwnd 并找到 hwnd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:03:33.353

您需要使用[Windows Hooks](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H) API 来获取操作系统中的 Windows 消息，无论是否针对您的应用程序。

# ios - DDMathParser (iOS 5)：如何设置弧度与度数？

> ID：11384027
> 
> 赞同：1
> 
> 时间：2012-07-08T14:51:04.560
> 
> 标签：ios

DDMathParser：如何让解析器知道函数的输入，即 sin 函数，是以度还是弧度为单位的？如果“模式”是度数，我想执行：sin(n *2 *pi /360)，如果“模式”是弧度，我想执行 sin(n)。

我无法让 _DDFunctionUtilities 中的类方法识别在其他任何地方定义的任何属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:56:28.680

该库很可能使用 C 的 math.h sin() 函数，该函数总是以弧度表示。[请参阅（如果您有兴趣） C 标准的](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)第 7.12.4.6 节（大 PDF）

为了让您的应用程序同时提供这两种选项，您可以通过多种方式实现这一目标。最好的方法取决于您的应用程序。如果我正在制作一个带模式的计算器，我可能会有一个计算器实例（模型），它有一个用于 sin/rad 模式的@property，然后我的视图将有一个连接到 viewController 方法的按钮`-(IBAction)toggleAngleMeasurementUnit:(UIButton) sender`，它调用适当的方法calc 对象（它还负责委托大多数其他按钮按下。然后在您的计算器类中，任何使用这些值的代码首先检查模式并进行适当的转换（或者，也许更引人注目的是，模式仅影响访问器方法，并且该值以规范的方式存储（即始终为弧度），这将允许我做 30 度 + pi 弧度 = ？

# java - 关于wait和notifyAll

> ID：11384031
> 
> 赞同：3
> 
> 时间：2012-07-08T14:51:24.717
> 
> 标签：java, multithreading, wait, notify

我有这门课：

```
public class MyThread implements Runnable {

    private static boolean canAccess = true;
    private Thread t;

    public FirstThread(String name) {
    t = new Thread(this);
    t.setName(name);
    }

    public void start() {
        t.start();
    }

    private synchronized void accessed(String name) throws InterruptedException {
    if (canAccess) {
        canAccess = false;
        System.out.println("Accessed " + name);
        try {
        Thread.sleep(5000);
        } catch (Exception e) {
        }
        canAccess = true;
        System.out.println("NOTIFY: " + name);
        notifyAll();
    }
    System.out.println("WAIT: " + name);
    wait();

    }

    @Override
    public void run() {
    while (true) {
        try {
        accessed(Thread.currentThread().getName());
        } catch (InterruptedException e) {
        e.printStackTrace();
        }
    }
    }
} 
```

这是我的输出：

```
Accessed 1
WAIT: 3
WAIT: 5
WAIT: 7
WAIT: 9
WAIT: 0
WAIT: 2
WAIT: 4
WAIT: 6
WAIT: 8
NOTIFY: 1
WAIT: 1 
```

和我的应用程序冻结（死锁状态）。似乎 notifyAll 方法不起作用。我的错误在哪里？

我的主课。

```
public class Main {

    public static void main(String[] args) {
    MyThread [] threads = new MyThread[10];
    for(int i=0;i<threads.length;i++) {
        threads[i] = new MyThread(""+i);
        threads[i].start();
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:35:48.660

`wait`意味着线程释放锁并进入休眠状态，直到另一个线程通知它。`notifyAll`意味着线程告诉所有其他等待当前同步块中正在使用的锁的线程唤醒并尝试再次获取锁。您的代码示例没有任何情况下多个线程试图获取相同的锁，因此在此处使用 wait 和 notifyAll 没有任何意义。一旦调用等待，就没有什么可以唤醒线程了。

等待和通知的一种典型用法：您可能有许多生产者将内容放入队列中，而消费者线程则将内容从队列中取出。队列有一个消费者调用的 take 方法，如果队列为空，则调用 wait 并且消费者阻塞。队列有一个 put 方法，当有东西进入队列时调用 notifyAll 以便任何等待的消费者线程唤醒。

在 Java 教程中有[一个使用 wait 和 notifyAll 的生产者-消费者示例。](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:06:26.703

每个线程都在等待自己的实例，这就是为什么它们都卡在一个地方的原因。

如果你有一个`private static Object LOCK = new Object();`并调用 LOCK.wait(); 和 LOCK.notify(); 这可能是另一个故事。

我也对 access() 方法的同步修饰符有疑问。它只是在所描述的情况下没有用。我最好修改同步块中的“canAccess”变量。

# c - 使用 C 程序合并 n 个文件

> ID：11384032
> 
> 赞同：1
> 
> 时间：2012-07-08T14:51:45.017
> 
> 标签：c

我正在写一个下载加速器。所以我从网络服务器下载一个文件到 n 个部分。现在我想将文件合并为 1 个单个文件。所以我使用下面的代码。并且文件名的顺序正确。但是我得到的输出文件与原始下载文件不同。你能告诉我错误在哪里吗？C

```
int cbd_merge_files(const char** filenames, int n, const char* final_filename) {

  FILE* fp = fopen(final_filename, "wb");

  if (fp == NULL) return 1;

  char buffer[4097];

  for (int i = 0; i < n; ++i) {

    const char* fname = filenames[i];

    FILE* fp_read = fopen(fname, "rb");

    if (fp_read == NULL) return 1;

    int n;

    while ((n = fread(buffer, sizeof(char), 4096, fp_read))) {

        int k = fwrite(buffer, sizeof(char), n, fp);

        if (!k) return 1;
    }
    fclose(fp_read);

 }

 fclose(fp);

 return 0;
} 
```

添加更多细节。错误不在分区中，因为我能够执行“cat *.part > final.dmg”并且 final.dmg 可以正常工作并且与原始文件相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:17:52.127

你的函数对我来说似乎没问题，所以很可能问题出在这个函数的输入文件中。一般来说，如果您在输出中遇到此类问题，则值得单独测试每个函数以找出问题所在。您在那里拥有的功能很容易自行测试，例如：

```
int main(int argc, const char** argv)
{
  cbd_merge_files(argv+1, argc-1, "output.txt");
  return 0;
} 
```

我尝试使用其中包含“123”和“321”的两个文件运行您的函数，它在 output.txt 中产生了正确的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:48:35.277

该函数看起来是正确的（并且 Jari 为您验证了它）。如果您确定您的输入文件不是问题（您说您通过`cat *.part`在评论中执行 a 进行了验证），那么您可能已将不正确的参数传递给函数调用。

检查`filenames`提供给函数的数组是否符合您的期望。检查以查看：

*   文件按您期望的顺序排列
*   没有“额外”文件或“丢失”文件
*   每个文件名本身就是您所期望的

检查参数中的文件名数量`n`是否正确。`n`请注意，当参数错误时，问题可能看起来像一个额外或丢失的文件或不正确命名的文件。

在您测试通过 using 下载的文件时的评论中`cat *.part`，使用来查看 shell 为您的命令`echo *.part`生成的顺序。`cat`

# asp.net - 如何正确托管我的 ASP.NET 网站？

> ID：11384036
> 
> 赞同：0
> 
> 时间：2012-07-08T14:52:48.317
> 
> 标签：asp.net

我对 ASP.NET 不是很有经验，大约一个月前我就开始了解这一切，我做了一个非常简单的网站，我想在线测试，没有数据库连接或任何东西的那种。

我以前使用 Web 的经验告诉我只需通过 FTP 客户端上传文件并完成，这显然不是 ASP.NET 的情况。

我正在运行 Visual Web Developer Express，并且很难理解如何让我的网站在我的主机上联机。我已经阅读了一些关于 web.config 文件的内容，我已经将我的服务器更改为支持 4.0 版，但是在将我的文件上传到我的服务器后，我仍然在一个又一个错误中与错误作斗争。我还读到 Express 版仅限于“发布网站”部门。

我只想直接回答如何将我的网站发布到我的主机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:13:41.133

部署您的 Asp.net 网站有不同的方法。

1.  Web 设置项目：创建一个 Web 设置项目并使用生成的文件来部署您的应用程序。[阅读更多](http://msdn.microsoft.com/en-us/library/k8kzx145%28v=vs.80%29.aspx)

2.  复制网站工具：在具有多个开发人员和服务器的环境中更新和部署网站。[阅读更多](http://msdn.microsoft.com/en-us/library/xay0wxbf%28v=vs.80%29.aspx)

3.  发布网站工具：预编译您的网站。 [阅读更多](http://msdn.microsoft.com/en-us/library/20yh9f1b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:02:44.783

确保您的托管公司支持 ASP.NET 网站。获取像 FileZilla 这样的 FTP 客户端。将所有文件复制到远程目录。如果您使用的是数据库，请更改 web.config 文件中的连接字符串以匹配新数据库的连接字符串。您从托管公司获得连接字符串。

# android - 具有关键数据（信用卡、姓名...）的本地存储与 ddbb 存储

> ID：11384040
> 
> 赞同：0
> 
> 时间：2012-07-08T14:54:40.820
> 
> 标签：android, ios, database, database-design

假设我们有一个适用于手机的应用程序。制作此应用程序的其中一件事是在不是来自应用程序创建者的特定网站的发货的最后步骤中插入用户的一些关键信息。它填写地址，信用卡和真实姓名。在该网站上购买商品后，应用程序将不承担任何责任，因为它只填写一些信息。在这种特殊情况下，考虑到用户不太可能从其他手机/电脑使用他的帐户，最好将此信息存储在有其他用户信息的 DDBB 中，或者将其存储在他的手机中作为加密的“cookie”？

我认为第二个更好，因为如果有人试图捕获 ddbb 的所有信息，将拥有任何信用卡，而不是第二种情况，但我想听听更多意见。

如果选择第二个，我应该怎么做？应用程序将适用于 android，也可能适用于 iOs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:03:37.613

但是如果手机被盗怎么办，保存用户信用卡信息（自动填充）是否安全！

我搜索并发现这个答案可以帮助你，

[在手机上保存信用卡信息](https://stackoverflow.com/questions/8050348/application-functionality-calls-for-saving-credit-card-details-for-future-ease)

# ssis - 在派生列 ssis 中的表达式中发生被零除

> ID：11384041
> 
> 赞同：0
> 
> 时间：2012-07-08T14:54:45.203
> 
> 标签：ssis

我想计算 ssis 中的派生列

```
X= (A-(C-D)*100)/(c-D) 
```

但是当我执行包时它给了我这个错误

```
Division by zero occurred in the expression 
```

如何解决这个问题？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:40:14.073

您是否考虑过使用 ISNULL IFF 表达式？那应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:09:17.790

我解决了它，我只需要将除数上的过滤器设置为非空值。瞧，就可以了！谢谢

# android - 在调用 onDestroy() 之后恢复我的自定义列表视图和数据，然后在 android 中调用 onCreate()

> ID：11384042
> 
> 赞同：0
> 
> 时间：2012-07-08T14:54:53.143
> 
> 标签：android, android-listview, android-activity, android-adapter, custom-adapter

我有一个带有 IM 样式页面的应用程序，文本使用自定义列表视图显示

![在此处输入图像描述](../Images/c0f6d23cc27cd5f3da09428b3343550e.png)

当我离开活动并回来时，我希望仍然拥有包含我所有数据的列表视图。到目前为止，我已经尝试使用 onSavedInstance 和 onRestoredInstance 保存我的数组列表的内容，然后在 onRestoredInstance 中再次设置适配器，但这不起作用。

这是我的活动代码：

```
private ArrayList<String> nameList = new ArrayList<String>();
    private ArrayList<String> messageList = new ArrayList<String>();
    private ArrayList<String> timeList = new ArrayList<String>();

    Button send = (Button) findViewById(R.id.chat_send);
    EditText send = (EditText) findViewById(R.id.edit_text);
    ListView chat_list = (ListView) findViewById(R.id.chat_list);
    MyCustomArrayAdapter myArrayAdapter = new MyCustomArrayAdapter(this, messageList, nameList,
            timeList, receiverName, senderName, language_chosen);

    chat_list.setAdapter(myArrayAdapter);       

    send.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            String new_text = edit_text.getText().toString();
            String sys_time = new Time(System.currentTimeMillis())
                    .toString();
            timeList.add(sys_time);
            messageList.add(new_text);
            nameList.add(username);
            myArrayAdapter.notifyDataSetChanged();
            chat_list.setSelection(chat_list.getChildCount()-1);
        }
    }); 
```

这是我的适配器的代码

```
public MyCustomArrayAdapter(Context context, ArrayList<String> planetList,
        ArrayList<String> NameList, ArrayList<String> TimeList,
        String receiver, String sender, String language) {
    super(context, R.layout.custom_chat_layout, planetList);
    this.context = context;
    messageList = planetList;
    nameList = NameList;
    timeList = TimeList;
    receiverName = receiver;
    senderName = sender;
    language_chosen = language;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    holder = new ViewHolder();

    rowView = inflater.inflate(R.layout.custom_chat_layout, parent, false);
    holder.chat_name = (TextView) rowView
            .findViewById(R.id.custom_chat_name);
    holder.chat_time = (TextView) rowView
            .findViewById(R.id.custom_chat_timestamp);
    holder.chat_text = (TextView) rowView
            .findViewById(R.id.custom_chat_text);

    holder.chat_name.setText(nameList.get(position));
    holder.chat_time.setText(timeList.get(position));
    holder.chat_text.setText(messageList.get(position));

    return rowView;
}

static class ViewHolder {
    TextView chat_name;
    TextView chat_time;
    TextView chat_text;
    RelativeLayout relative;
    RelativeLayout relative1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:01:26.203

在： onPause(){ 打开共享首选项，保存您的列表。}

在： onResume(){ 打开 sharedpreferences，恢复您的列表，setdata 已更改}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:04:47.217

您应该将数据保存在 中`onPause`并重新填充适配器`onResume`。即时消息之类的内容应保存到持久数据存储（例如，SQLite 数据库），然后使用`CursorAdapter`. 在整个生命周期中维护数据负载的许多细节`Activity`都可以通过使用`LoaderManager`a 和用 a 加载数据来抽象出来`CursorLoader`。

听起来您还想`Service`在后台运行，即使`Activity`不在焦点上也可以接收消息并将即时消息保存到数据存储中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:52:24.483

[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)仅在您的应用程序运行时使用。在您的应用停止后，bundle 中的所有数据都将被释放。

您应该使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

# javascript - 如何创建高性能选择器 [请不要使用 jquery]

> ID：11384043
> 
> 赞同：0
> 
> 时间：2012-07-08T14:54:57.897
> 
> 标签：javascript, javascript-framework, unobtrusive-javascript

我是 JavaScript 纯开发人员，我在测试选择器模块时设计了自己的框架，我发现了一个非常大的问题，那就是性能

在选择器模块中，我没有像 jquery 那样做一个非常复杂的选择器要获取特定类型的元素，例如 TD 元素，请注意 >>>> 不要告诉我使用 getElementsByTagName('TD') 因为在我的选择器中，我可以让开发人员选择超过 1 个 tagName，例如

```
getElementsByTagNames('td,tr') 
```

所以在那种情况下，我必须得到所有然后循环并只拍下需要的物品

另一方面，我发现这种方式非常消耗性能 jquery 选择项目的速度非常快，jquery 也不会循环或者我的主要问题

如何使用 JavaScript 做一个高性能的选择器 :)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T15:04:35.690

> jquery 也不做循环还是什么

jQuery 足够聪明，可以使用现有的选择器库 (sizzle.js)。

Sizzle[足够聪明，](https://github.com/jquery/sizzle/blob/master/sizzle.js#L1327)可以让浏览器完成工作。`document.querySelectorAll`成功了。

[编辑：实际上，sizzle.js 曾经是 jquery 的固有部分，但现在是一个单独的项目]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T15:01:11.763

`getElementsByTagName`如果您执行以下操作，您仍然可以使用：

```
function getElementsByTagNames(elements) {
    elements = elements.split(",");
    var foundElements = [];
    for(var i = 0, len = elements.length; i<len; i++) {
        foundElements.push(document.getElementsByTagName(elements[i]));
    }
    return foundElements;
} 
```

现在，如果您调用，将返回一个包含所有和元素`getElementsByTagNames("tr,div")`的数组。`tr``div`

# c# - 如何防止没有现有的 json 属性在 JSON.NET 中被反序列化

> ID：11384044
> 
> 赞同：0
> 
> 时间：2012-07-08T14:55:12.003
> 
> 标签：c#, json.net, deserialization

我有这样的 JSON 响应

```
{
    car:100,
    house:200,
    bike:300
} 
```

但有时某些属性不会出现在响应中。像这样（房子不见了）

```
{
    car:100,
    bike:300
} 
```

我正在反序列化`JsonConvert.DeserializeObject<Test>(json);`

使用此测试模型

```
[JsonObject(MemberSerialization.OptIn)]
public class Test
{
    [JsonProperty(PropertyName = "car")]
    public int Car{ get; set; }

    [JsonProperty(PropertyName = "house")]
    public int House{ get; set; }

    [JsonProperty(PropertyName = "bike")]
    public int Bike{ get; set; }
} 
```

**现在的问题：** 在第二个例子中，房子丢失了，我仍然让对象测试将属性 House 设置为 0。

有任何方法可以使这个属性成为可选的，我希望我的模型没有缺失的属性。

**其他想法** 当我写这篇文章时，我认为这可能根本没有任何意义，也许模型就是“模型”，为什么它在不同的情况下应该有所不同......可能是错误的。

任何答案都会非常感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:57:56.227

The default value of `int` is 0\. If `House` is optional, make it nullable.

```
[JsonProperty(PropertyName="house")]
public int? House { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:58:36.353

Change your properties to be `nullable` types - for example `int? House { get; set; }`

# mysql - 选择临时表最大值的所有行

> ID：11384045
> 
> 赞同：1
> 
> 时间：2012-07-08T14:55:15.950
> 
> 标签：mysql, max, temporary

我想从临时表中选择值等于最大值的所有行。

## 临时表测试

```
id | value
1  | 7
2  | 6
3  | 7 
```

## 预期结果：

```
id | value
1  | 7
3  | 7 
```

我已经尝试了几件事，但到目前为止所有尝试（创建另一个具有相同内容的临时表除外）都失败了，因为“您不能在同一个查询中多次引用 TEMPORARY 表”。（来源：[http](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html) ://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html ）。是否有可能以比复制表格及其内容更“优雅”的方式做到这一点？

到目前为止我测试过的内容：

```
SELECT table1.* FROM test table1 LEFT JOIN test table2 ON table1.value < table2.value     
WHERE table2.value IS NULL;
SELECT * FROM test WHERE value = (SELECT MAX(value) FROM test); 
```

这是我目前的解决方案：

```
CREATE TEMPORARY TABLE test2 (...);
INSERT INTO test2 SELECT * FROM test;
SELECT * FROM test WHERE value = (SELECT MAX(value) FROM test2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:12:10.960

您可以尝试使用变量。以下将仅扫描测试表一次（未测试）：

```
SELECT   test.*, 
         @curMax := IF(@curMax = -1, value, @curMax)
FROM     test,
         (SELECT @curMax := -1) r
HAVING   @curMax = value OR @curMax = -1
ORDER BY value DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:32:52.907

这个怎么样：

```
SELECT MAX(value) INTO @max
FROM test;

SELECT *
FROM test
WHERE value = @max; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:11:59.920

```
Select id,value From SomeTable
inner Join (Select Max(SomeValue) as MaximumValue From SomeTable) maximums
  On SomeTable.Value = maximums.MaximumValue 
```

应该做的工作

# android - 将 Android 项目导入 Eclipse 时的项目名称问题

> ID：11384047
> 
> 赞同：7
> 
> 时间：2012-07-08T14:55:38.317
> 
> 标签：android, eclipse, import, eclipse-adt

这是 Eclipse 在处理 ADT 时的一个小问题。

问题：

将项目导入 Eclipse 时，名称不正确。尽管它应该只是名称（例如“HelloWorld”），但名称实际上与包名称相关联（例如“com.blah.HelloWorld”）。我个人喜欢“项目名称”的较小名称，因为它更容易在项目导航器中处理。使用导入窗口下的“android”选项时会发生这种情况。如果我使用“常规”选项，则不会发生此问题。

导入时我可以坚持使用一般选项，但我觉得 android 选项应该可以正常工作。有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-13T12:39:19.537

在我的情况下，项目名称`MainActivity`始终导入为 。
所以我找到了一些技巧。
在 上`AndroidManifest.xml`，将活动名称更改`.MainActivity`为您想要的项目名称。
然后，导入。你会成功的。
并重新更改您的清单文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:45:52.583

您可以浏览到菜单 Window > Preferences，选择选项卡 Java > Appearance。*在Abbreviate package name*框中，将包名称替换为您喜欢的短字符串。

例如：

```
com.example.android={a} 
```

然后所有以 . 开头的包名称`com.example.android`将被替换`{a}`。

# javascript - 在 Symfony 中，我如何在 javascript 中编写图像 url

> ID：11384049
> 
> 赞同：1
> 
> 时间：2012-07-08T14:56:25.293
> 
> 标签：javascript, image, symfony1

我想使用 javascript 函数在页面上插入图像

```
//JS
$('#fff').html('<img src="../images/pic.jpeg">'); 
```

当我写上面的网址时......没有加载。

我怎样才能写正确的网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:07:13.367

如果 js 代码在您的视图模板中，那么您可以这样做

```
$('#fff').html('<?php echo image_tag('pic.jpeg') ?>'); 
```

否则，如果它在单独的 js 文件中，则需要为其使用绝对路径。

```
$('#fff').html('<img src="/images/pic.jpeg">'); 
```

# ruby - Ruby 构建器模式或库

> ID：11384051
> 
> 赞同：2
> 
> 时间：2012-07-08T14:56:26.713
> 
> 标签：ruby, design-patterns, builder

我是红宝石的新手......现在我已经开始学习模式了。这是一个模式还是只是一个库？

```
 require 'builder'
 xml = Builder::XMLMarkup.new(:target => @output, :ident => 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:07:18.717

不，这不是模式，您只是实例化了一个类。

设计模式是编程中的一个通用主题。有一些特定于红宝石的模式。有所有模式的书籍和列表 - 只需在互联网上搜索它们即可。

通用设计模式的一个示例：生产者/消费者模式，其中消费者使用数据填充队列，而消费者从队列中异步轮询并处理数据（就在我的脑海中）。当您有 2 个以不同速度运行的循环时，它很有用。

一个 ruby​​ 特定模式：在您创建的类中覆盖 method_missing 以赋予它动态函数名称。我认为这是我在 ruby​​ 库中经常看到的一种模式。

# mysql - MySQL - 不排序的分组顺序

> ID：11384052
> 
> 赞同：1
> 
> 时间：2012-07-08T14:56:47.243
> 
> 标签：mysql, optimization

我正在尝试优化一个查询，其中我得出的结论是顺序无关紧要。所以我试图`ORDER BY`在以下情况下删除：

```
SELECT item, price FROM supplydemand
    GROUP BY item
    ORDER BY timestamp ASC 
```

这是发生了什么：表supplydemand 跟踪各种项目的价格。对于每件商品，我有 4 或 5 个不同的价格，因此也有不同的行。上面的查询为我提供了每件商品的“最旧”价格。分组是在项目上完成的，升序时间戳给了我最旧的行。此查询正常工作。

我注意到，只要我有最旧的价格，我实际上并不关心返回的行是否已排序。所以我想摆脱`ORDER BY`. 这是我尝试过的：

```
SELECT item, price, timestamp FROM supplydemand
    GROUP BY item
    HAVING timestamp = MIN(timestamp) 
```

上面的查询应该产生相同的数据，但未排序。内部`MIN`必须`HAVING`依赖`GROUP`因此将每个分组项目的时间戳与组内最旧的时间戳进行比较。

**问题**
第二个查询返回的行数较少。由于某种原因，第二个查询中缺少某些行，我不知道为什么。其余行返回相同的价格，但我丢失了近 20% 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:24:59.440

```
SELECT item, price, timestamp
FROM SupplyDemand
INNER JOIN (
    SELECT item, MIN(timestamp) AS minimumtimestamp FROM SupplyDemand
) AS minimums
ON minimums.item = SupplyDemand.item AND minimums.minimumtimestamp = supplydemand.timestamp 
```

将是一种方式。

# ruby-on-rails - 使用rails中的表格连接表格的简单方法

> ID：11384055
> 
> 赞同：0
> 
> 时间：2012-07-08T14:57:44.667
> 
> 标签：ruby-on-rails, forms

我有两张桌子，作品和艺术家。每个艺术家都有多部作品。是否可以在创建新作品时在下拉菜单中列出这些艺术家。

这是我现在解决它的方式：

```
 <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :photo %><br />
    <%= f.file_field :photo %>
  </div>
  <div class="field">
    <%= f.label :exhibition_id %><br />
    <%= f.number_field :exhibition_id %>
  </div>
  <div class="field">
    <%= f.label :artist_id %><br />
    <%= f.number_field :artist_id %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:04:16.180

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

该示例正是您正在寻找的。

```
collection_select(@work, :artist_id, Artist.all, :id, :name) 
```

# jquery - 使用 jQuery 进行国际和爱尔兰电话号码表单验证

> ID：11384058
> 
> 赞同：1
> 
> 时间：2012-07-08T14:58:09.163
> 
> 标签：jquery, forms, validation

嗨，我目前正在开发一个用于工作的 jQuery 表单。这对我来说都是全新的，到目前为止，它已经设法让表单正常工作，并且大部分验证都已完成并正常工作，但我无法准确弄清楚如何为电话输入实施验证。

该表单有 2 个部分和第二次提交的 onClick。我需要“电话”字段来检查并验证是否输入了正确的电话号码。如果出现错误，我还希望它具有与其他输入字段相同的抖动效果！

我在网上找到了一些代码，并将其插入到第二部分的代码中，但就像我说的那样，我对此是全新的，所以我完全意识到 a) 此代码可能不起作用，b) 它可能甚至不正确地方！

如果有人能花一点时间来解释我应该如何实现这个并告诉我应该在哪里以及如何放置代码，那将不胜感激。

```
 $(function(){
    //original field values
    var field_values = {
            //id        :  value
            'url'       : 'url',
            'yourname'  : 'yourname',
            'email'     : 'email',
            'phone'     : 'phone'
    };

        var url =$("input#url").val();
        var yourname =$("input#yourname").val();
        var email =$("input#email").val();
        var phone =$("input#phone").val();

    //inputfocus
    $('input#url').inputfocus({ value: field_values['url'] });
    $('input#yourname').inputfocus({ value: field_values['yourname'] });
    $('input#email').inputfocus({ value: field_values['email'] }); 
    $('input#phone').inputfocus({ value: field_values['phone'] });

    //reset progress bar
    $('#progress').css('width','0');
    $('#progress_text').html('0% Complete');

    //first_step
    $('form').submit(function(){ return false; });
    $('#submit_first').click(function(){
        //remove classes
        $('#first_step input').removeClass('error').removeClass('valid');

        //ckeck if inputs aren't empty
        var fields = $('#first_step input[type=text]');
        var error = 0;
        fields.each(function(){
            var value = $(this).val();
            if( value.length<12 || value==field_values[$(this).attr('id')] ) {
                $(this).addClass('error');
                $(this).effect("shake", { times:3 }, 50);

                error++;
            } else {
                $(this).addClass('valid');
            }
        });        

        if(!error) {
            if( $('#password').val() != $('#cpassword').val() ) {
                    $('#first_step input[type=password]').each(function(){
                        $(this).removeClass('valid').addClass('error');
                        $(this).effect("shake", { times:3 }, 50);
                    });

                    return false;
            } else {   
                //update progress bar
                $('#progress_text').html('33% Complete');
                $('#progress').css('width','113px');

                //slide steps
                $('#first_step').slideUp();
                $('#second_step').slideDown();     
            }               
        } else return false;
    });

    //second section
    $('#submit_second').click(function(){
        //remove classes
        $('#second_step input').removeClass('error').removeClass('valid');

        var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;  
        var fields = $('#second_step input[type=text]');
        var error = 0;
        fields.each(function(){
            var value = $(this).val();
            if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='email' && !emailPattern.test(value) ) ) {
                $(this).addClass('error');
                $(this).effect("shake", { times:3 }, 50);

                error++;
            } else {
                $(this).addClass('valid');
            }

        function validatePhone(phone) {
        var a = document.getElementById(phone).value;
        var filter = /^[0-9-+]+$/;
            if (filter.test(a)) {
                return true;
            }
            else {
                return false;
            }
        }

        $('#phone').blur(function(e) {
            if (validatePhone('txtPhone')) {
                $('#spnPhoneStatus').html('Valid');
                $('#spnPhoneStatus').css('color', 'green');
            }
            else {
                $('#spnPhoneStatus').html('Invalid');
            $('#spnPhoneStatus').css('color', 'red');
            }
        });

     });

        if(!error) {
                //update progress bar
                $('#progress_text').html('66% Complete');
                $('#progress').css('width','226px');

                //slide steps
                $('#second_step').slideUp();
                $('#fourth_step').slideDown();     
        } else return false;

    });

    $('#submit_second').click(function(){
        //update progress bar
        $('#progress_text').html('100% Complete');
        $('#progress').css('width','339px');

        //prepare the fourth step
        var fields = new Array(
            $('#url').val(),
            $('#yourname').val(),
            $('#email').val(),
            $('#phone').val()

        );
        var tr = $('#fourth_step tr');
        tr.each(function(){
            //alert( fields[$(this).index()] )
            $(this).children('td:nth-child(2)').html(fields[$(this).index()]);
        });

        //slide steps
        $('#third_step').slideUp();
        $('#fourth_step').slideDown();            
    });

    $('#submit_fourth').click(function(){

        url =$("input#url").val();
        yourname =$("input#yourname").val();
        email =$("input#email").val();
        phone =$("input#phone").val();

        //send information to server
        var dataString = 'url='+ url + '&yourname=' + yourname + '&email=' + email + '&phone=' + phone;  

        alert (dataString);//return false;  
            $.ajax({  
                type: "POST",  
                url: "http://clients.socialnetworkingsolutions.com/infobox/contact/",  
                data: "url="+url+"&yourname="+yourname+"&email="+email+'&phone=' + phone,
                cache: false,
                success: function(data) {  
                    console.log("form submitted");
                    alert("success");
                }
                });  
        return false;

   });

    //back button
    $('.back').click(function(){
        var container = $(this).parent('div'),
        previous  = container.prev();

        switch(previous.attr('id')) {
            case 'first_step' : $('#progress_text').html('0% Complete');
                  $('#progress').css('width','0px');
                       break;
            case 'second_step': $('#progress_text').html('33% Complete');
                  $('#progress').css('width','113px');
                       break;

            case 'third_step' : $('#progress_text').html('66% Complete');
                  $('#progress').css('width','226px');
                       break;

        default: break;
    }

    $(container).slideUp();
    $(previous).slideDown();
});

}); 
```

# java - DataLine 中的 isRunning() 和 isActive() 有什么区别？

> ID：11384059
> 
> 赞同：1
> 
> 时间：2012-07-08T14:58:13.187
> 
> 标签：java, audio

`isRunning()`in和`isActibe()`in和有什么不一样[`DataLine`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/DataLine.html)？当 line 实际处理数据时，这两个标志似乎都已设置。

**更新**

那里有2对方法：

1) 打开/关闭

2) 启动/停止

和三面旗帜

1) 是开放的

2) 正在运行

3) 活跃

任何人都可以推断出它们之间和/或彼此之间的一些关系吗？例如，很明显，isRunning 意味着 isOpen，isActive 意味着 isOpen，但 isActive 是否意味着 isRunning，反之亦然？或者他们是独立的？

我猜 Line在被调用`isOpen`后立即变为。检查是否已调用也是如此`open()`。`isOpen``open()`

我可以以某种方式检查我是否打过电话`start()`吗？也许其中一些`isActive`或者`isRunning`是为了那个？但是哪一个？

**更新 1**

以下代码旨在将音频从默认系统声音输入播放到默认系统声音输出。

```
public static void main(String[] args) throws LineUnavailableException, InterruptedException {

    AudioFormat audioFormat = new AudioFormat(16000f, 16, 1, true, false);

    final SourceDataLine outputLine;
    final TargetDataLine inputLine;

    outputLine = AudioSystem.getSourceDataLine(audioFormat);
    inputLine = AudioSystem.getTargetDataLine(audioFormat);

    Thread player = new Thread("player") {
        @Override
        public void run() {

            byte[] b = new byte[2048];
            int readen;

            log.info("Starting transfer");

            while( !inputLine.isOpen() ) {
                try {
                    log.info("TargetDataLine is closed, waiting");
                    sleep(1000);
                } catch (InterruptedException e) {
                    interrupt();
                }
            }

            while( !inputLine.isRunning() ) {
                try {
                    log.info("TargetDataLine is not running, waiting");
                    sleep(100);
                } catch (InterruptedException e) {
                    interrupt();
                }
            }

            while((readen = inputLine.read(b,0,b.length))>=0 && !isInterrupted()) {
                outputLine.write(b,0,readen);
            }

        }
    };
    player.start();

    outputLine.open();
    outputLine.start();

    inputLine.open();
    inputLine.start();

    player.join();

} 
```

代码输出如下：

```
15:20:01.369 [player] INFO  tests.DataLineFlags01 - Starting transfer
15:20:01.371 [player] INFO  tests.DataLineFlags01 - TargetDataLine is closed, waiting
15:20:02.371 [player] INFO  tests.DataLineFlags01 - TargetDataLine is not running, waiting
15:20:02.471 [player] INFO  tests.DataLineFlags01 - TargetDataLine is not running, waiting
15:20:02.571 [player] INFO  tests.DataLineFlags01 - TargetDataLine is not running, waiting
15:20:02.671 [player] INFO  tests.DataLineFlags01 - TargetDataLine is not running, waiting
15:20:02.771 [player] INFO  tests.DataLineFlags01 - TargetDataLine is not running, waiting
... 
```

这证明 TargetDataLine 在`start()`被调用后没有进入“运行”状态。

标志也是`isActive()`如此。

这意味着

(1) 无法知道是否`start()`被调用 (2)`isRunning()`并且`isActive()`标志是无用的

这对吗？可能它们对`SourceDataLine`对象有用吗？

**更新 2**

以下应用

```
package testing.Test_TargetDataLine_01;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.TargetDataLine;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class App 
{

private static Logger log = LoggerFactory.getLogger(App.class);

private final AudioFormat audioFormat;
private final TargetDataLine targetDataLine;

private final Thread observer = new Thread("observer") {

    {
        setDaemon(true);
    }

    public void run() {

        while( !isInterrupted() ) {
            if( targetDataLine != null ) {
                log.info("targetDataLine: Opened={}, Active={}, Running={}", targetDataLine.isOpen(), targetDataLine.isActive(), targetDataLine.isRunning());
            }
            else {
                log.info("targetDataLine: is null");
            }
            try {
                sleep(10);
            } catch (InterruptedException e) {
            }
        }

    };
};

public App() throws LineUnavailableException, InterruptedException {

    byte[] buffer = new byte[160*2]; // 1/100 of second 

    log.info("App starting");

    log.info("Observer starting");
    observer.start();

    log.info("Sleeping 500");
    Thread.sleep(500);

    log.info("Creating targetDataLine");
    audioFormat = new AudioFormat(16000, 16, 1, true, false);
    targetDataLine = AudioSystem.getTargetDataLine(audioFormat);

    log.info("Sleeping 500");
    Thread.sleep(500);

    log.info("Opening targetDataLine");
    targetDataLine.open();

    log.info("Sleeping 500");
    Thread.sleep(500);

    log.info("Starting targetDataLine");
    targetDataLine.start();

    log.info("Sleeping 500");
    Thread.sleep(500);

    log.info("Reading target data line for 5 seconds");
    for(int i=0; i<50; ++i) {

        targetDataLine.read(buffer, 0, buffer.length);
        log.info("Stage " + i);
    }

    log.info("Stopping targetDataLine");
    targetDataLine.stop();

    log.info("Sleeping 500");
    Thread.sleep(500);

    log.info("Closing targetDataLine");
    targetDataLine.close();

    log.info("Sleeping 500");
    Thread.sleep(500);

    //log.info("Interrupting observer");
    //observer.interrupt();

}

public static void main( String[] args ) throws LineUnavailableException, InterruptedException
{
    new App();
}
} 
```

产生以下输出：

```
20:58:23,360 0 [main] INFO testing.Test_TargetDataLine_01.App - 应用程序启动
20:58:23,362 2 [main] INFO testing.Test_TargetDataLine_01.App - 观察者开始
20:58:23,362 2 [main] INFO testing.Test_TargetDataLine_01.App - 睡眠 500
20:58:23,362 2 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,372 12 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
...
20:58:23,842 482 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,852 492 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,862 502 [main] INFO testing.Test_TargetDataLine_01.App - 创建 targetDataLine
20:58:23,862 502 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,872 512 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
...
20:58:23,912 552 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,922 562 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: 为空
20:58:23,929 569 [main] INFO testing.Test_TargetDataLine_01.App - 睡眠 500
20:58:23,933 573 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:23,943 583 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
...
20:58:24,413 1053 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:24,423 1063 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:24,430 1070 [main] INFO testing.Test_TargetDataLine_01.App - 打开 targetDataLine
20:58:24,433 1073 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:24,443 1083 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
...
20:58:24,483 1123 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:24,493 1133 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:24,501 1141 [main] INFO testing.Test_TargetDataLine_01.App - 睡眠 500
20:58:24,503 1143 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:24,513 1153 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
...
20:58:24,983 1623 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:24,993 1633 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:25,002 1642 [main] INFO testing.Test_TargetDataLine_01.App - 启动 targetDataLine
20:58:25,002 1642 [main] INFO testing.Test_TargetDataLine_01.App - Sleeping 500
20:58:25,003 1643 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:25,013 1653 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
...
20:58:25,483 2123 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:25,493 2133 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:25,502 2142 [main] INFO testing.Test_TargetDataLine_01.App - 读取目标数据行 5 秒
20:58:25,502 2142 [main] INFO testing.Test_TargetDataLine_01.App - 阶段 0
20:58:25,502 2142 [main] INFO testing.Test_TargetDataLine_01.App - 第一阶段
20:58:25,503 2143 [main] INFO testing.Test_TargetDataLine_01.App - 第 2 阶段
20:58:25,503 2143 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=true, Running=true
20:58:25,503 2143 [main] INFO testing.Test_TargetDataLine_01.App - 第 3 阶段
20:58:25,503 2143 [main] INFO testing.Test_TargetDataLine_01.App - 第 4 阶段
...
20:58:25,512 2152 [main] INFO testing.Test_TargetDataLine_01.App - 第 48 阶段
20:58:25,512 2152 [main] INFO testing.Test_TargetDataLine_01.App - 第 49 阶段
20:58:25,512 2152 [main] INFO testing.Test_TargetDataLine_01.App - 停止 targetDataLine
20:58:25,513 2153 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=true, Running=true
20:58:25,521 2161 [main] INFO testing.Test_TargetDataLine_01.App - 睡眠 500
20:58:25,523 2163 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:25,533 2173 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
...
20:58:26,003 2643 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:26,013 2653 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=true, Active=false, Running=false
20:58:26,021 2661 [main] INFO testing.Test_TargetDataLine_01.App - 关闭 targetDataLine
20:58:26,023 2663 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:26,026 2666 [main] INFO testing.Test_TargetDataLine_01.App - Sleeping 500
20:58:26,033 2673 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:26,043 2683 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
...
20:58:26,513 3153 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
20:58:26,523 3163 [观察者] INFO testing.Test_TargetDataLine_01.App - targetDataLine: Opened=false, Active=false, Running=false
```

这表明两个标志是无法区分的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:12:18.480

如果您查看 API 文档，它会说：

`isRunning()`：表示线路是否正在运行。默认值为假。当响应 start 方法的调用而呈现第一个数据时，一条开放行开始运行，并一直持续到响应停止调用或播放完成而停止呈现。

`isActive()`：指示线路是否正在进行活动 I/O（例如播放或捕获）。当非活动线路变为活动线路时，它会向其侦听器发送一个 START 事件。类似地，当一条活动线路变为非活动线路时，它会发送一个 STOP 事件。

查看`start()`方法，我们看到`start()`允许线路变为非活动状态，因此我们可能会说，`isRunning()`告诉我们线路是否可以变为活动状态，并`isActive()`告诉我们线路是否正在使用中（即数据正在以播放的形式传输或记录）

所以，简而言之，

`isRunning()``start()`-在我们使用这条线路之前我们需要打电话吗？

`isActive()`- 这条线路现在在使用吗？

如果您必须知道何时调用 start()，请使用以下命令：

```
final HashSet<Line> openLines = new HashSet<Line>();
...
DataLine myLine = getDataLine();
myLine.addListener(new LineListener(){
    public void update(LineEvent evt)
    {
        if(evt.getType().equals(LineEvent.Type.START)) openLines.add(evt.getLine());
        else if(evt.getType().equals(LineEvent.Type.STOP)) openLines.remove(evt.getLine());
    }
});

...
public boolean isLineStarted(DataLine l)
{
    return openLines.contains(l);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:26:14.983

为了简化 Ryan 的回答： `isRunning()`只需检查线路是“在线”还是“运行”，或者基本上处于活动状态

`isActive()`检查线路是否正在主动写入或读取信息，无论是输入还是输出

日期线 JavaDoc：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html)

isActive JavaDoc：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html#isActive%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html#isActive%28%29)

isRunning() JavaDoc：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html#isRunning%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html#isRunning%28%29)

# php - 将变量从 MY_Controller 传递到视图

> ID：11384061
> 
> 赞同：3
> 
> 时间：2012-07-08T14:58:44.513
> 
> 标签：php, codeigniter, variables, constructor

在我的网站上，我有一个在每个页面上都可见的“登录提示”。我正在使用模板系统，因此此登录提示出现在每个页面的标题中。

当用户登录时，它应该显示他们的用户名和注销链接。当他们未登录时，将显示登录或注册的链接。

我在 MY_Controller 中有一个函数，它检查用户是否在每个页面加载时都登录，这工作正常：

```
if($this->is_logged_in()) {
    $this->username = $this->session->userdata('username');
    $data['login_prompt'] = "Hi, " . $this->username . " " . anchor("account/logout", "Logout");
} 
```

在我的 header.php （视图）中，我有：

```
<div id="login-prompt" class="transparent">
    <?php
        if (!isset($login_prompt)) $login_prompt = anchor("account/login", "Login") . " or " . anchor("account/register", "register");
        echo $login_prompt;
    ?>
</div> 
```

问题出在我的控制器上。这是 ucp.php 的构造函数，它扩展了 MY_Controller：

```
public $data;

function __construct()
{
    parent::__construct();
    $data['login_prompt'] = $this->data['login_prompt'];
} 
```

我希望`$data['login_prompt']`在我的控制器的每个方法中都可用，以便可以将其传递给视图。但是，打印`$data['login_prompt']`会出错，**`'undefined index'`**因此在 header.php 中定义的默认“登录或注册”消息始终可见。

ucp.php 中的一个典型方法如下：

```
function index()
{
    $this->template->build("ucp/ucp_view", $data);
} 
```

如您所见，`$data`数组应该传递给视图。如果我要`$data['login_prompt']`在方法本身而不是构造函数中定义：

```
function index()
{
    $data['login_prompt'] = $this->data['login_prompt'];
    $this->template->build("ucp/ucp_view", $data);
} 
```

登录提示更改为正确的已登录消息。但是，我不想将此行添加到我的应用程序中每个控制器的每个方法中。

我发现的一个类似问题涉及简单地将`$data`传递给视图的数组更改为，[此处](http://codeigniter.com/forums/viewthread/174906/)`$this->data`概述。这可行，但会破坏我的应用程序的其他几个部分。

我觉得这个错误非常明显。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:41:45.520

你有几个选择

您可以使用您的`$this->data`属性`MY_Controller`，然后确保您传递`$this->data`给所有视图

```
// MY_Controller
public $data;

public function __construct()
{
    if($this->is_logged_in()) 
    {
        $this->username = $this->session->userdata('username');
        $this->data['login_prompt'] = "Hi, " . $this->username . " " . anchor("account/logout", "Logout");
    }
} 
```

然后在我们的控制器中..

```
// An example controller. By extending MY_Controller 
// We have the data property available
UcpController extends MY_Controller
{
    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $this->data['Some extra variable'] = 'Foo';
        // Notice we are giving $this->data rather than $data...
        // this means we will have our login prompt included
        // as it is set by the parent class
        $this->template->build("ucp/ucp_view", $this->data);
    }
} 
```

或者，您可以在其中设置一个全局数组，`MY_Controller`然后使用该`load->vars`方法使该数组可用于所有视图

```
// MY_Controller
public $global_data;

public function __construct()
{
    if($this->is_logged_in()) 
    {
        $this->username = $this->session->userdata('username');
        $this->global_data['login_prompt'] = "Hi, " . $this->username . " " . anchor("account/logout", "Logout");

        $this->load->vars($this->global_data);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:30:13.543

尝试在您的视图中切换`$data['login_prompt']`到。`$login_prompt`

错误消息**“未定义的索引”**是指`'login_prompt'`不是关联数组中的索引`$data`。代码点火器分解了您传递给的数组`$this->load->view()`。类似于`extract()`工作原理（php [docs](http://www.php.net/manual/en/function.extract.php)，ci [docs](http://codeigniter.com/user_guide/general/views.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:25:21.233

[http://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)

向下滚动大约一半到“将动态数据添加到视图”

# java - RIAK 中的 LinkWalk

> ID：11384068
> 
> 赞同：0
> 
> 时间：2012-07-08T15:00:04.730
> 
> 标签：java, riak

我已经开始通过 Spring Source 从事一个 RIAK 项目。根据他们的规范在对象之间进行链接，然后链接行走非常简单。

我正在保存 2 个对象，在它们之间进行链接，然后尝试检索数据：

```
MyPojo p1 = new MyPojo("o1", "m1");
MyPojo p2 = new MyPojo("o2", "m2");

riakManager.set(bucketName1, "k1", p1);
riakManager.set(bucketName2, "k2", p2);

riakManager.link(bucketName2, "k2", bucketName1, "k1", tagName);

System.out.println(riakManager.get(bucketName1, "k1"));
System.out.println(riakManager.linkWalk(bucketName1, "k1", "_")); 
```

问题是链接后，源（“k1”）的内容被删除，只有链接保留。这是打印输出：

```
null
[MyPojo [str1=o2, str2=m2, number=200]] 
```

知道为什么链接操作会从源中删除值吗？如果我尝试在链接之后（再次）设置源值，则链接将被删除......

谢谢，喜欢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:03:01.727

Riak 要求链接和数据存储在一个操作中。您无法在没有另一个的情况下更新一个（目前）。

因此，无论何时设置链接，操作都必须写回数据。我不知道 Spring 适配器是否考虑到了这一点。我确实在 Riak 和 Spring 开发人员之间看到了一些关于此的消息，但不知道是否已修复任何问题。

但无论如何，我也倾向于使用原生的 Riak Java 客户端而不是 Spring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:31:51.813

已决定放弃弹簧适配器。它似乎没有足够好的支持。改用 RIAK java 客户端。有人不这么认为吗？

# python - Python：如何在阅读器中保存一行并保留其上下文？

> ID：11384083
> 
> 赞同：0
> 
> 时间：2012-07-08T15:02:34.590
> 
> 标签：python, csv

使用 Python，我编写了以下脚本来索引 csv.reader 中的一行并将其与前一行中的相关值进行比较：

```
source = open('sourcefile')
reader = csv.reader(source)
with open('targetfile','w') as f:
    for row in reader:
        if row[1] == "NA" and row[2] == "NA":
            prevrow = row
            line = row
            writer = csv.writer(f)
            writer.writerow(line)
     else:
         while row[1] == prevrow[1]:
             if row[1] == prevrow[3]:
                cumbid = cumbid + row[2]
                line = row[0]  + "," + row[1]  + "," + cumbid  + "," + prevrow[3]  + "," + prevrow[4] + "," +  str(int(float(prevrow[5]))-int(float(cumbid)))  + "," + prevrow[6]  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + ","
                prevrow = line
            elif row[1] == prevrow[4]:
                cumask = cumask + row[2]
                line = row[0]  + "," + row[1]  + "," + cumask  + "," + prevrow[3]  + "," + prevrow[4] + "," +  prevrow[5]  + "," + str(int(float(prevrow[6]))-int(float(cumask)))  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + "," 
                prevrow = line
        else:
            if row[1] == prevrow[3] and row[2] < prevrow[5]:                       
                cumbid = row[2]
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[3]  + "," + prevrow[4] + "," +  str(int(float(prevrow[5]))-int(float(row[2])))  + "," + prevrow[6]  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + "," 

                prevrow = line
                print prevrow
                print prevrow[0]+ " " + prevrow[1]+ " " + prevrow[2]+ " " + prevrow[3]+ " " + prevrow[4]+ " " + prevrow[5]+ " " + prevrow[6]
                writer = csv.writer(f)
                writer.writerow(line.split())   
            elif row[1] == prevrow[4] and row[2] < prevrow[6]:                  
                cumask = row[2]
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[3]  + "," + prevrow[4] + "," +  prevrow[5]  + "," + str(int(float(prevrow[6]))-int(float(row[2])))  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + "," 
                prevrow = line
                print prevrow
                print prevrow[0]+ " " + prevrow[1]+ " " + prevrow[2]+ " " + prevrow[3]+ " " + prevrow[4]+ " " + prevrow[5]+ " " + prevrow[6]
                writer = csv.writer(f)
                writer.writerow(line.split())   
            elif row[1] == prevrow[3] and row[2] == prevrow[5] :                 
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[7]  + "," + prevrow[4] + "," +  prevrow[8] + "," + prevrow[6]  + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[9] + "," + prevrow[10] + "," + "," + "," + "," + "," + "," + "," + "," 
                prevrow = line
                print prevrow
                print prevrow[0]+ " " + prevrow[1]+ " " + prevrow[2]+ " " + prevrow[3]+ " " + prevrow[4]+ " " + prevrow[5]+ " " + prevrow[6]
                writer = csv.writer(f)
                writer.writerow(line.split())   
            elif row[1] == prevrow[4] and row[2] == prevrow[6]:                   #the trade was on the offer and took it all out--we have to refer to the 2nd level of the book
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[3]  + "," + prevrow[9] + "," +  prevrow[5]  + "," + prevrow[10]  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[13] + "," + prevrow[14] + "," + "," + "," + "," + "," + "," + "," + "," 
                prevrow = line
                print prevrow
                print prevrow[0]+ " " + prevrow[1]+ " " + prevrow[2]+ " " + prevrow[3]+ " " + prevrow[4]+ " " + prevrow[5]+ " " + prevrow[6]
                writer = csv.writer(f)
                writer.writerow(line.split())   
            elif row[1] == prevrow[1] and row[1] == prevrow[3] :                  #trade was on the bid, and the prev row was also a trade--decrement bid size
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[3]  + "," + prevrow[4] + "," +  str(int(float(prevrow[5]))-int(float(row[2])))  + "," + prevrow[6]  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + "," 
                prevrow = line
                writer = csv.writer(f)
                writer.writerow(line.split())   
            elif row[1] == prevrow[1] and row[1] == prevrow[4] :                    #trade was on the offer, and the prev row was also a trade--decrement ask size
                line = row[0]  + "," + row[1]  + "," + row[2]  + "," + prevrow[3]  + "," + prevrow[4] + "," +  prevrow[5]  + "," + str(int(float(prevrow[6]))-int(float(row[2])))  + "," + prevrow[7] + "," + prevrow[8] + "," + prevrow[9] + "," + prevrow[10] + "," + prevrow[11] + "," + prevrow[12] + "," + prevrow[13] + "," + prevrow[14] + "," + "," 
                prevrow = line
                writer = csv.writer(f)
                writer.writerow(line.split()) 
```

但是，这些后续行会生成以下内容：

# 代码

```
print prevrow
print prevrow[0]+ " " + prevrow[1]+ " " + prevrow[2]+ " " + prevrow[3]+ " " + prevrow[4]+ " " + prevrow[5]+ " " + prevrow[6] 
```

# 输出

```
20100628000120702,12392.0,1.0,12392.0,12393.0,5.0
2 0 1 0 0 6 2 
```

我希望两行输出相同，以便像 row[1] == prevrow[1] 这样的比较会将 12392.0 与前一行中的第二个项目 (12392.0) 进行比较，而不是行中的第二个字符 ( 0)。所以，我的问题是 prevrow 已经变成了一个字符列表，当我尝试以我可以在行中索引项目的方式索引 prevrow 中的项目时，我似乎得到了列表中字符的索引。

如何保存当前“行”并保留其上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:38:45.087

您正在构建字符串`line`并将它们存储在`prevrow`; 而是存储一个列表：

```
line = row[:2] + [cumbid] + prevrow[3:5] + [str(int(float(prevrow[5])) - int(float(cumbid)))] + prevrow[6:15] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:25:55.543

使用 tee 创建两个虚拟迭代器，增加一个，然后将它们压缩，以获得 (lastrow,currentrow) 元组的序列。（请参阅[itertools 文档](http://docs.python.org/library/itertools.html#recipes)`pairwise`中的配方。）

然后你可以写：

```
for prevrow,row in pairwise(reader):
    ... etc ... 
```

# javascript - if 子句中的空值

> ID：11384086
> 
> 赞同：0
> 
> 时间：2012-07-08T15:02:52.517
> 
> 标签：javascript

这是一个示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<button onclick="myFunction();">Click!</button>
<script type="text/javascript">
function myFunction() {
var text = "";
if (text)
  {
  alert(text);
  }
else
  {
  alert("There's no text!");
  }
}
</script>
</body>
</html> 
```

*我想知道if (text)*和*if (text != "")*之间有区别吗？

提前致谢！

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:06:16.440

`if(text)``text`如果是 null 值、未定义值、0、空字符串或 false，将评估为false。这是因为该`if`语句正在检查是否`text`为假值（例如 null、未定义、0、空字符串或假）。

`if(text != "")`检查是否`text`不等于空字符串。这意味着如果`text`是一个假值而不是空字符串，则 if 语句将评估为真。

# java - 带有泛型参数的接口 - 无法编译

> ID：11384087
> 
> 赞同：0
> 
> 时间：2012-07-08T15:02:54.837
> 
> 标签：java, generics, interface

我有一个这样的界面：

```
public interface MyInterface<E extends Something1> {
    public void meth1(MyClass1<E> x);
} 
```

我有一个子类，其超类实现了上述接口：

```
public class MyClass2<E extends Something1> extends Superclass{

    public MyClass2(){

    }

    public void meth1(MyClass1 x) {
        // TODO Auto-generated method stub

    }
} 
```

超类：

```
public abstract class Superclass<E extends Something1> implements MyInterface{
    MyClass1<E> x;
    protected E y;

    public Superclass(){

    }
} 
```

我的班级1：

```
public abstract class Myclass1<E extends Something1> {

    public Myclass1(){

    }
} 
```

问题是 meth1() 的参数应该是通用的。如果我做 MyClass1 它不喜欢它，我可以让它编译的唯一方法是省略通用参数 - 这感觉不对。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:09:40.883

所以，这个编译，其中 MyClass1 恰好是一个列表：我错过了什么吗？你的代码不一样吗？如果一切都一样，那么您选择的 MyClass1 可能有问题。此外，我们缺少 MyClass2 的超类，这也可能是有问题的......

```
import java.util.List;

public class MyClass2<E extends Object> extends Object{

    public MyClass2(){

    }

    public void meth1(List<E> x) {
        // TODO Auto-generated method stub

    }
}

interface MyInterface<E extends Object> {
    public void meth1(List<E> x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:19:40.857

不是强制性的

```
public abstract class Superclass<E extends Something1> implements MyInterface<E> 
```

强制的

```
public class MyClass2<E extends Something1> extends Superclass<E> 
```

一切都将编译，方法将是通用的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T15:26:52.857

以下是您的类现在已适当参数化：

```
class Something1 { }

public interface MyInterface<E extends Something1> {
    public void meth1(MyClass1<E> x);
}

// and I have a subclass whose superclass implements the above interface:
public class MyClass2<E extends Something1>
    extends Superclass<E> {

    public MyClass2() { }

    public void meth1(MyClass1<E> x) { }
}

// superclass:
public abstract class Superclass<E extends Something1> implements
        MyInterface<E> {
    MyClass1<E> x;
    protected E y;

    public Superclass() { }
}

// MyClass1:
public abstract class MyClass1<E extends Something1> {

    public MyClass1() {

    }
} 
```

# ios - 如何以编程方式为情节提要中的子视图设置视图控制器？

> ID：11384088
> 
> 赞同：1
> 
> 时间：2012-07-08T15:02:57.490
> 
> 标签：ios, uitableview, xcode-storyboard

（在故事板中设计，截图如下）我的 rootviewcontroller 视图上有两个子视图

![在此处输入图像描述](../Images/99d1dd053a46c0f2ccd24359ba98a879.png)

在我的代码中，我想为每个子视图分配一个**单独**的视图控制器。即为TableView 分配一个tableViewController。

我尝试在 awakeFromNib（或 ViewDidLoad）方法中执行此操作，但无济于事。我的 tableview 控制器中的委托方法永远不会被调用。我认为即使在我分配的 tableviewcontroller 可以做某事之前，storyboard 也可以在这里加载子视图。

```
self.myTableViewController = (TodoListViewController *)[[UITableViewController alloc]  initWithStyle:UITableViewStylePlain];
self.myTableView.delegate = self.myTableViewController;
self.myTableView.dataSource = self.myTableViewController;
self.myTableViewController.tableView = self.myTableView; 
```

我不确定在情节提要中有这样的视图时是否允许这样做，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:36:29.903

我来到这个网站是因为我遇到了类似的问题。实际上我正在做同样的事情：我有一个带有两个子视图的视图控制器（都在一个有很多约束的情节提要中定义）。

在 viewDidLoad 的 containerviewcontroller 中，我正在执行与您相同的调用（但我首先定义了视图）：

```
self.myTableViewController = (TodoListViewController *)[[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
self.myTableViewController.tableView = self.myTableView;
self.myTableView.delegate = self.myTableViewController;
self.myTableView.dataSource = self.myTableViewController; 
```

这对我有用（我想，这是你的问题：你周围没有导航控制器......并确保你的 tableview 的出口在情节提要中真正连接。）。

但真正的问题出现在正确的接线之后。如果你进入一个单元格，你可能想给 nextView 一些 cellID。当您手动定义了 tableviewcontroller 时，只有您的委托方法 didSelectRowAtIndexPath 被调用，而不是 prepareForSegue。

我玩过从情节提要中实例化视图控制器

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"aStoryboard" bundle:nil];
self.myTableViewController = [storyboard instantiateViewControllerWithIdentifier:@"myTableViewID"]; 
```

但是segue没有被调用。直接调用它（performSegueWithIdentifier:...）不起作用，因为这个 tableviewcontroller 不是由导航控制器管理的。

对我来说，最终在 containerViewController 中调用了 prepareForSegue 方法，该方法可以将调用委托给它的子视图控制器。

**编辑：实际上真正的解决方案是不要。**有一个“容器视图”对象可以添加到视图中并定义视图控制器的区域，该区域可以包含子视图控制器。这是我真正想做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:09:57.140

使用您的 viewDidLoad 方法再试一次，这是最简单的答案。如果方法未加载，您可能必须查看方法中的其他内容，因为如果应用程序很大，因为他们经常使用情节提要，您可能有冲突的方法。

我也会看看这个： [http ://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx)

它显示了人们以编程方式使用任何故事板功能时最常见的事故

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:14:49.667

听起来您想为自己编写一个自定义容器控制器，例如类似于 UISplitViewController。这是 Apple 在[UIViewController 类参考](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)中关于执行此操作的简短文档。`viewDidLoad:`例如，您可以在容器控制器或`viewWillAppear:`方法中以编程方式实例化子控制器。不过，我认为您不能让 IB 为您实例化孩子，就像您可以连接说标签栏或导航控制器与其孩子的关系一样。（如果有办法，我想知道！）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T20:47:37.327

在故事板中设置您的类和委托通常是最简单的（如包括[这个](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)在内的许多教程中所示）。

如果您真的想将滚动视图和表格视图放入同一个视图中，那么您需要研究一下`UIViewController instantiateViewControllerWithIdentifier:`，您可以合理轻松地拉出多个视图控制器（理想情况下，在情节提要中设置适当的类、委托和源) 并将他们的视图添加到您的外包装视图中。我会说我已经做到了这一点，你可以用它相当容易地做一些很酷的事情，但它通常不是最干净的做事方式。

# php - JSON 和 AJAX 响应

> ID：11384089
> 
> 赞同：2
> 
> 时间：2012-07-08T15:03:06.017
> 
> 标签：php, javascript, ajax, json, web

您好，我有一个 JSON 响应：

```
[{"id":"1","message":"sdvsvdsdv","nickname":""},{"id":"2","message":"1234556","nickname":""},{"id":"3","message":"4555555","nickname":""}] 
```

**javascript函数：**

```
function ajax_request(){

var request = new XMLHttpRequest();
var url = "http://localhost/chat/controller.php?showmessage";
request.open("post", url, true);
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

request.onreadystatechange = function(){
     if(request.readyState == 4 && request.status == 200){

               var return_data = request.responseText; // THE WHOLE JSON

               document.getElementById("chat").innerHTML = return_data;
        }
}
request.send();} 
```

我怎样才能得到元素“消息”而不是整个 JSON ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:05:16.393

用于`JSON.parse("<JSON-STRING>")`取出物体。从对象中，您可以提取您的消息。

就像是：

```
var jsonObj = JSON.parse(request.responseText);
for (var i=0; i<jsonObj.length; i++){
     alert(jsonObj[i].message); //alerts each "message" ..
} 
```

这与实际问题不同，但我真的建议您使用[jQuery](http://www.jquery.com)库。这会花掉你一半的努力。`$.ajax(..)`执行 AJAX 请求和解析 JSON 字符串很简单`$.parseJSON(..)`——所有这些都以跨浏览器的方式进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:05:26.660

```
var returnObject = JSON.parse(request.responseText);
for (var i in returnObject) {
    document.getElementById("chat").innerHTML += '<br/>' + returnObject[i].message;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T15:06:30.930

像这样：

```
resp = '[{"id":"1","message":"sdvsvdsdv","nickname":""},{"id":"2","message":"1234556","nickname":""},{"id":"3","message":"4555555","nickname":""}]'
console.log(JSON.parse(resp)[0]['message']) 
```

使用`JSON.parse()`方法将 JSON 字符串转换为 JS 对象

# cakephp - 即使查询匹配结果，CakePHP 2.2 find 也会返回空数据

> ID：11384098
> 
> 赞同：1
> 
> 时间：2012-07-08T15:04:25.893
> 
> 标签：cakephp, model, find

我有一个新鲜出炉的（带有烘烤控制台）项目，其中有 2 个模型在我调用模型-> 查找函数时表现不同。

用户控制器

```
public function index() {
    $this->User->recursive = 0;
    $this->set('users', $this->paginate());
} 
```

词控制器

```
public function index() {
    $this->Word->recursive = 0;
    $this->set('words', $this->paginate());
} 
```

查询（调试工具包）

```
SELECT `Word`.`*` FROM `words` AS `Word` WHERE `Word`.`iniziale` = 'A' AND `Word`.`pubblicata` = '1' ORDER BY `Word`.`parola` ASC LIMIT 10
Affected 10 
Num rows 10 
```

在这两种情况下，检查的查询都影响了行，但是如果我调试 paginate() 结果，WordsController 不会返回任何结果，而用户则正确给出。

Word模型没有关系，我尝试将模型名称更改为Term，得到相同的结果。

我还尝试将 CakePHP 核心降级到 2.1.4。没有。

这个问题是否有任何可能的原因？Word 是某种保留关键字吗？如何调试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:43:58.493

我想到了。

我在单词表 (UTF8) 中有一些包含特殊字符的文本，例如 àòèéìù。Cake 删除了所有包含这些字符的结果。我尝试用“e”替换“è”，神奇地记录在 Cake 中可用！

希望我 5 小时的头痛能帮助别人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T12:20:16.410

正确答案遵循接受。您应该在数据库配置中设置编码： 在我的 conf 中我有：

```
public $default = array(
     'datasource' => 'Database/Mysql',
                'persistent' => false,
                'host' => 'localhost',
                'login' => 'giuseppe',
                'password' => 'pass',
                'database' => 'db'
                'prefix' => '',
                //'encoding' => 'utf8',

    ); 
```

你看到编码键了吗？尝试取消注释或将其设置为正确的编码，瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T09:58:00.563

引用上述问题中的评论..

检查你的模型和AppModel，看看是否有afterFind()。afterFind 调用必须在最后返回 $results 数据集。

```
function afterFind($results, $primary = false)  {
    //some code here..
    return $results; //I had this commented out for some reason
    //and it generated the same issue.
} 
```

# ruby-on-rails - 设计和康康宝石：has_many 关联

> ID：11384099
> 
> 赞同：1
> 
> 时间：2012-07-08T15:04:27.523
> 
> 标签：ruby-on-rails, devise, authorization, cancan, has-many

我使用`devise`and `cancan`gems 并且有简单的模型关联：`user` `has_many subscriptions`, `subscription` `belongs_to :user`. 有以下`SubscriptionsController`：

```
class SubscriptionsController < ApplicationController

  load_and_authorize_resource :user
  load_and_authorize_resource :subscription, through: :user

  before_filter :authenticate_user!

  def index
    @subscriptions = @user.subscriptions.paginate(:page => params[:page]).order(:created_at)
  end

  #other actions
end 
```

并且`Cancan` `Ability.rb`：

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||=User.new

    can [:read], [Edition, Kind]

    if user.admin?
      can :manage, :all
    elsif user.id
      can [:read, :create, :destroy, :pay], Subscription, user_id: user.id
      can [:delete_from_cart, :add_to_cart, :cart], User, id: user.id
    end

  end

end 
```

问题是我不能`subscriptions`以用户身份使用操作，但可以以管理员身份使用。并且没有问题`UsersController`。当我从以下行中删除`SubscriptionsController`：

```
 load_and_authorize_resource :user
  load_and_authorize_resource :subscription, through: :user

  before_filter :authenticate_user! 
```

完全没有问题。所以问题在这些行或`Ability.rb`. 有什么建议么？

**更新：**有趣的是，如果我将 smth like 添加`can? :index, Subscription`到 html 模板中，它会显示`true`. 如果添加 smth like `can? :index, Subscription.first`（另一个用户的订阅），它会显示`false`. 看起来`Cancan`工作正常。但是有什么问题吗？...

**更新**：如果更改`SubscriptionsControlle`如下：

```
class SubscriptionsController < ApplicationController

  #load_and_authorize_resource :user
  #load_and_authorize_resource :subscription, through: :user

  before_filter :authenticate_user!

  def show
    @user = User.find params[:user_id] #line 1
    @subscription = @user.subscriptions.find params[:id] #line 2
    @container_items = @subscription.container_items.paginate(:page => params[:page])
    authorize! :show, @subscription #line 4
  end

  #some actions
end 
```

它可以完美运行，并在需要时防止未经授权的用户访问。第 1 行、第 2 行和第 4 行是否不等于已注释？

**更新**：有以下内容`routes.rb`：

```
resources :users, except: [:show] do
    member do
      get 'cart'
      delete 'delete_from_cart' => 'users#delete_from_cart'
      post 'add_to_cart' => 'users#add_to_cart'
    end
    resources :subscriptions do
      member do
        post 'pay'
      end
    end
  end 
```

**更新**：下一个解决方案防止未经授权访问所有订阅操作，除了`index`：

```
class SubscriptionsController < ApplicationController

  load_resource :user
  load_resource :subscription, through: :user
  authorize_resource through: :current_user

  before_filter :authenticate_user!

  #actions
end 
```

那么阻止访问`index`操作的最佳方法是什么？

仅找到以下解决方案：

```
 before_filter :authorize_index, only: [:index]

  def authorize_index
    raise CanCan::AccessDenied unless params[:user_id] == current_user.id.to_s
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:07:03.860

它应该是

```
load_and_authorize_resource :subscription 
```

要不就

```
load_and_authorize_resource 
```

在你的情况下，当你想要嵌套资源时，然后

```
load_and_authorize_resource :through => :current_user 
```

见[https://github.com/ryanb/cancan/wiki/Nested-Resources](https://github.com/ryanb/cancan/wiki/Nested-Resources)

# c# - WebClient 在物理设备和模拟器上失败

> ID：11384101
> 
> 赞同：0
> 
> 时间：2012-07-08T15:04:33.307
> 
> 标签：c#, windows-phone-7, post, oauth, webclient

> 更新：
> 
> 也许只是我不了解 oAuth 的工作原理？[我尝试在http://www.apikitchen.com](http://www.apikitchen.com)上手动运行查询，但那里也出现 400 错误！可以肯定的是，我在这里正确构建了 URL 吗？
> 
> 发布网址：
> 
> [https://api.bufferapp.com/1/oauth2/token.json?client_id=[hidden]&client_secret=[hidden]&redirect_uri=http://apps.joel-murphy.com/buffer/code/success.php&code= [](https://api.bufferapp.com/1/oauth2/token.json?client_id=[hidden]&client_secret=[hidden]&redirect_uri=http://apps.joel-murphy.com/buffer/code/success.php&code=[the) 我从缓冲区获取的访问码以 1/ 开头]&grant_type=authorization_code

原帖：

我正在构建一个需要使用网站数据的 Windows Phone 应用程序。该网站使用 oAuth 对用户进行身份验证。

我使用内置的 Web 浏览器控件发出 GET 请求来验证用户身份。官方文档要求 URL 结构是这样的：

> 获取[https://bufferapp.com/oauth2/authorize](https://bufferapp.com/oauth2/authorize)？client_id=...& redirect_uri=...& response_type=code

我的应用程序的这一部分有效。尽管在将授权令牌交换为来自服务器的访问令牌时，我遇到了问题。官方文档要求 URL 结构是这样的：

> 发布[https://api.bufferapp.com/1/oauth2/token.json](https://api.bufferapp.com/1/oauth2/token.json)？client_id=...& client_secret=...& redirect_uri=...& code=...& grant_type=authorization_code

如果我错了，请纠正我，但据我所知，除非提交表单，否则无法从浏览器发出 POST 请求。为此，我决定使用`WebClient`该类向服务器提交数据。但是，无论我是在实际设备上还是在 Visual Studio 模拟器上运行我的代码，我总是会收到以下错误：

> 远程服务器返回错误：NotFound

![在此处输入图像描述](../Images/bb7abe58e75270ed8d84ec9cd873b888.png)

有谁知道以下代码有什么问题？我在 2 天内花了 5 个多小时试图解决此错误，但似乎没有任何效果。

我正在使用的代码：

```
 WebClient wc = new WebClient();
    wc.UploadStringCompleted += new UploadStringCompletedEventHandler(wc_UploadStringCompleted);

    wc.UploadStringAsync(new Uri(access_token_url), "POST", GetPostParameters());

    void wc_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
    {
        try 
        {
            MessageBox.Show(e.Result);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    string GetPostParameters()
    {
        string data = "";
        data += "client_id="+client_id + "&";
        data += "client_secret=" +client_secret + "&";
        data += "redirect_uri=" + redirect_uri+ "&";
        data += "code=" + App.AccessToken + "&";
        data += "grant_type=authorization_code";
        return data;
    } 
```

有谁知道出了什么问题？这让我发疯了，当 oauth 是当今如此使用的技术时，它必须如此复杂，这真是太可惜了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:23:28.363

您可以尝试对 redirect_uri 变量进行 URL 编码吗？

# ios - UIAutomation：在点击之前检查元素是否存在

> ID：11384106
> 
> 赞同：9
> 
> 时间：2012-07-08T15:04:59.187
> 
> 标签：ios, ios-ui-automation

我们有一个包含两栏新闻阅读器的 iPad 应用程序。左视图包含新闻列表，其中一些直接链接到新闻，一些推送另一个带有另一个新闻列表的视图控制器。这也将导致`UIButton`设置为`leftBarButtonItem`导航栏的。如果我们在第一层，一个无法点击的简单图像将是`leftBarButtonItem`.

我现在的目标是进行一项能够挖掘第一级每条新闻的测试。如果新闻指向二级列表，则应点击`UIButton`导航栏中的 。

如果是“可点击的”，我该如何检查`leftBarButtonItem`？由于它可以是图像也可以是*按钮*，如果是图像，则仅调用`navigationBar().leftButton().tap()`会导致错误。

如果有任何帮助，我也在使用 tuneup 库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T09:14:49.677

UIAutomation 中几乎所有的元素都可以被点击。它是图像、视图还是按钮都没有关系。如果您尝试点击的对象无效，您将收到错误消息。如何检查：

```
if ( navigationBar().leftButton().checkIsValid() )
{
     navigationBar().leftButton().tap();
}
else
{
     //do what you need.
} 
```

或者您可以检查您尝试点击的对象是否是按钮，例如（不是最好的方法，但它有效）：

```
if ( navigationBar().leftButton().toString() == "[object UIAButton]" )
{
    navigationBar().leftButton().tap();
}
else
{
     //do what you need.
} 
```

*checkIsValid()*可用于所有 UI 元素。如果对象存在 ，它将返回*true 。**toString()*将返回*[object UIAElementNil]*如果元素无效或将返回*[object UIAButton]*或*[object UIAImage]*。

也尝试使用苹果文档：http: [//developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementClassReference/UIAElement/UIAElement.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementClassReference/UIAElement/UIAElement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T05:06:36.017

你可以简单地使用

```
if (navigationBar().leftButton().exists)
{
     navigationBar().leftButton().tap();
}
else
{
     //do what you need.
} 
```

# java - 从外部类处理 JFrame 组件的最佳方法

> ID：11384107
> 
> 赞同：2
> 
> 时间：2012-07-08T15:05:02.993
> 
> 标签：java, multithreading, swing, jlabel

我正在开发一个调用多种方法并初始化不同类的摇摆应用程序。我也有多个线程来处理中间结果。我的要求是在一些标签和文本框中即时显示中间数据。

请帮助我以下哪种方法在内存和性能方面最好。

1.  我可以为所有标签和文本框设置 setter 方法。这样我就可以使用该摇摆类对象调用这些方法，但在这种情况下，我需要将摇摆类对象传递给我想将数据设置为标签的每个类。
2.  另一种方法是我可以创建我的摇摆类的公共静态对象，并且每当我需要设置标签文本时，我都会从任何类中调用它。

**第一种方法**会产生更多开销，因为我需要将我的 Swing 类对象传递给其他类。

**第二种方法**是最简单的方法，但创建静态对象可能会造成混乱，因为此应用程序包含线程。

我只想知道去哪一个，为什么？

否则，如果有人从事过一些复杂的 Swing 应用程序开发——你是如何处理这些问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:44:12.360

此[示例](https://stackoverflow.com/a/11372932/230513)是您在多线程上下文中的第一种方法的典型。为了方便起见，模型和视图是紧密耦合的：每个工作线程都会接收到它应该更新的标签的引用。另一种选择是松散耦合：每个视图注册以侦听模型，模型使用[观察者模式](https://stackoverflow.com/a/3072979/230513)通知所有注册的侦听器。

这个更简单的[示例](https://stackoverflow.com/a/4637725/230513)使用两种方法：

*   紧耦合：worker 在封闭范围内获得对其目标标签的引用。

*   松散耦合：封闭视图注册 a `PropertyChangeListener`，模型使用它通过 向视图发送信号`setProgress()`。

您需要决定在您的应用程序中哪些是重要的。我同意@JB Nizet 关于第二种方法的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:54:48.003

为什么不使用**Singleton原理的第二种方法，可以使用同一个swing类的单个实例**，这样**就没有使用static**了，而且它有时会令人困惑，因为我们不确定JVM加载的顺序静态成员...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:17:36.300

将 GUI 视为具有视图的模型。GUI 组件构成视图，而您创建表示模型的模型类。模型中值的更改会反映在视图中。应用程序的其余部分与模型交互，而不是视图。

这是我所做的[Java Spirograph GUI](https://stackoverflow.com/questions/10447530/where-to-store-what-in-an-mvc-model-and-how-do-the-components-communicate/10451793#10451793)中的一个示例。

# html - 在 webkit 浏览器上输入编辑框会导致滚动

> ID：11384116
> 
> 赞同：8
> 
> 时间：2012-07-08T15:06:09.910
> 
> 标签：html, css, google-chrome, safari, webkit

我在 WebKit 浏览器（Chrome 和 Safari）上的网站标记存在问题，即当我在右滑块的编辑框中输入内容时，它会滚动左侧区域。

请看以下示例：
[http://jsbin.com/obiyec/7](http://jsbin.com/obiyec/7)
[http://jsbin.com/obiyec/7/edit](http://jsbin.com/obiyec/7/edit) - html 代码（输入在 id="palette" 的 div 内）

1.  在 Chrome 或 Safari 中打开下一个链接
2.  在右上角的编辑框中输入内容
3.  请注意，左侧区域的滚动条会移动

*如果可能的话，根本不可能彻底改变这个标记*

问：如何防止滚动条移动并使其行为与 FF 相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T15:47:05.907

这里的问题是，看起来你在做什么和你实际上在做什么是两件不同的事情。

看起来`div`左侧具有固定宽度和`overflow: auto`( `div#kb-board`) 和右侧的输入字段是不相关的元素 - 但它们不是。输入字段实际上是 的子字段，`div#kb-board`但其父字段 ( `div#palette`) 具有`fixed`定位，因此它位于页面的右上角。

结果，输入字段实际上位于右侧`div#kb-board`，当您输入它时，滚动条会随着您将焦点移到该 div 的右侧而移动。

所以在这种情况下，我会说 Chrome 正在显示正确的行为。

要解决此问题，您应该停止`div#palette`在`div#kb-board`. 由于它使用固定定位，因此无需嵌套。

```
<div id="kb-board">
    <div id="boards-container">
        <div id="lane">...</div>
    </div>
    <!-- div#palette was originally here -->
</div>
<div id="palette">
    <input type="text" value="Type here" />
</div> 
```

**工作示例：http: [//jsbin.com/obiyec/8](http://jsbin.com/obiyec/8)**

# php - PHP & mysqli：持久连接和交互式有什么区别？

> ID：11384121
> 
> 赞同：3
> 
> 时间：2012-07-08T15:07:06.320
> 
> 标签：php, mysqli, persistent-connection, interactive-mode

以下有什么区别：

```
// Persistent connection
$mysqli->real_connect("p:" . $host, $user, $pass, $db, null, null, 0); 
```

和

```
// Interactive connection
$mysqli->real_connect($host, $user, $pass, $db, null, null, MYSQLI_CLIENT_INTERACTIVE); 
```

甚至这个...

```
// Interactive AND persistent
$mysqli->real_connect("p:" . $host, $user, $pass, $db, null, null, MYSQLI_CLIENT_INTERACTIVE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T16:26:59.253

只是我对文档的解释......

持久连接无限期地保持打开状态。非持久连接不是。

[mysql_pconnect()](http://php.net/manual/en/function.mysql-pconnect.php)文档比 real_connect() 文档更清晰一些：

> mysql_pconnect() 的行为与 mysql_connect() 非常相似，但有两个主要区别。
> 
> 首先，在连接时，该函数将首先尝试查找已使用相同主机、用户名和密码打开的（永久）链接。如果找到，将返回它的标识符，而不是打开新连接。
> 
> 其次，脚本执行结束时不会关闭与 SQL 服务器的连接。相反，该链接将保持打开以供将来使用（mysql_close() 不会关闭由 mysql_pconnect() 建立的链接）。
> 
> 因此，这种类型的链接被称为“持久”。

关于[MYSQLI_CLIENT_INTERACTIVE](http://dev.mysql.com/doc/refman/5.6/en/apis-php-mysqli.constants.html)：

> MYSQLI_CLIENT_INTERACTIVE
> 
> 在关闭连接之前允许**interactive_timeout**秒（而不是**wait_timeout秒）不活动。**客户端的会话 wait_timeout 变量将设置为会话 interactive_timeout 变量的值。

**通常，非持久连接在wait_timeout**变量指定的秒数后关闭。**使用此标志，它们会在interactive_timeout**变量指定的秒数后关闭。

根据我的解释，这意味着**MYSQLI_CLIENT_INTERACTIVE**不会改变*持久*连接的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:27:32.537

当您使用第一个时，mysqli 会尝试查找已使用相同主机、用户名和密码（NOT PORT）打开的（持久）链接。如果找到，将返回它的标识符，而不是打开新连接。

脚本执行结束时不会关闭与 SQL 服务器的连接。相反，该链接将保持打开状态以供将来使用。

# java - 是否可以使用 Java 获取远程主机的操作系统类型？

> ID：11384127
> 
> 赞同：0
> 
> 时间：2012-07-08T15:07:41.030
> 
> 标签：java, sockets, network-programming

我有一个 Java 代码，可以创建一个套接字并启动与远程主机的 ssl 握手。我需要知道远程主机正在运行什么类型的操作系统。这对 Java 可行吗？如何？如果没有，还有其他解决方案可以让我的 Java 程序获得这条信息吗？

我已经检查了类似的问题：[如何以编程方式检查远程主机的操作系统？](https://stackoverflow.com/questions/3319368/how-to-check-programmatically-the-os-of-remote-host)不幸的是，没有人接受任何答复。所以，我发布了这个问题，现在可能有人可以提供答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:44:52.860

这被称为[主机指纹识别](http://www.rsa.com/rsalabs/staff/bios/tfyen/publications/NDSS12-HostTracking.pdf)，是一个非常广泛和深入的主题，有很多研究。最好的办法是在子进程中调用诸如[nmap](http://nmap.org/)之类的工具并读取其输出。请记住，即使是最好的指纹识别算法也很容易被 NAT 防火墙和代理误导。

# eclipse - 搜索依赖项不返回任何内容

> ID：11384131
> 
> 赞同：12
> 
> 时间：2012-07-08T15:08:51.150
> 
> 标签：eclipse, maven, maven-2, m2e, eclipse-juno

我刚刚安装了安装了 m2e 的 Eclipse Juno。

然后，我创建了一个新的 Maven 项目并决定我想要 log4j，所以我打开 pom.xml，单击 Dependency 选项卡，单击 Add... 按钮并输入 log4j。

零结果。它唯一找到的是junit（它似乎是使用快速入门原型自动添加到项目中的）。请注意，我*可以*手动添加 log4j 依赖项，它会正常工作，但我发现搜索功能非常方便！

我是一个 Maven 初学者，虽然我让 m2e 在 Indigo 中工作没有问题。所以我想我可能忘了设置一些东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-08T19:40:40.013

您所要做的就是**更新或重建您的工作区 Maven 存储库索引**。

打开你的`"Maven Repositories"`视野。打开`Global Repositories`并右键单击`central`。启用完整索引并重建。

最初，该过程将需要几分钟。之后，您的搜索将开始工作。

`Download repository index updates on startup`您可以通过在您的工作区首选项中打开来自动执行此过程`Maven`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:20:54.490

如果重建工作区 maven 存储库索引不起作用，请尝试重新安装 m2e。我通过市场更新了我的，它又开始工作了。我不确定是什么问题，但我怀疑最近某些 URL 已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T17:03:36.477

只需转到**Window** -> **Preferences** -> **Maven** 并检查选项`Download repository index updates on startup`并单击`Apply`。就这样。

[![在此处输入图像描述](../Images/9830df76eb82ab9dedbeea6d807b2971.png)](https://i.stack.imgur.com/xvYRv.png)

# apache - 学习 apache httpd 和 tomcat 等 web 服务器

> ID：11384133
> 
> 赞同：0
> 
> 时间：2012-07-08T15:09:00.450
> 
> 标签：apache, tomcat, open-source

我想看看在 web 服务器（如 apache httpd 和 tomcat）背后是如何处理一切的。如何逐步浏览这些应用程序，进行更改，然后查看更改？这种复杂的应用程序使用脚本来构建，我认为它们需要一段时间来编译，在我看来，它不仅仅是下载源代码并导入到 Eclipse 中。还是真的这么简单？

想要处理这些项目的代码的开发人员如何绕过编译这些应用程序（以及其他重要的应用程序，如 Web 浏览器）需要大量时间的事实？当我处理较小的东西时，我会不断地编译然后调试。我想编译可能需要几分钟时间是不可行的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:37:12.177

简单：只是阅读。

[http://tomcat.apache.org/tomcat-7.0-doc/building.html](http://tomcat.apache.org/tomcat-7.0-doc/building.html)

另外，[http://wiki.apache.org/tomcat/FAQ/Developing](http://wiki.apache.org/tomcat/FAQ/Developing)

当前的 Tomcat 7.0.x 主干在我的 MacBook Pro 上构建大约需要 17 秒，其中包括下载一些我还没有放置的依赖项。如果要重新编译单个 .java 文件，可以重新运行整个构建，工具链（实际上只是 Apache Ant）将确定哪些文件实际上需要重新编译。

你只修改了一个源文件？运行时只会重新编译一个源文件`ant deploy`（您甚至不需要“部署”：这是默认设置）。如果您使用 Eclipse 或其他类似的 IDE，它将即时重新编译，您无需担心命令行或任何其他问题。

如果您还有其他问题，请加入 Tomcat 用户邮件列表（或开发者列表）并加入社区。

# jquery - 使用jQuery获取每一行的td内的输入值

> ID：11384136
> 
> 赞同：0
> 
> 时间：2012-07-08T15:09:38.233
> 
> 标签：jquery

我仍然有很多问题：

```
function padTitles() {
    $('tr').each(function () {
        var tds = $(this).find('input'),

        text = tds.filter('[id^="TempRowKey_"]').val(),
        tdToPad = tds.filter('[id^="title_"]'),
        pad;
        if (/0\.0$/.test(text))
            pad = 10;
        else if (/\.0$/.test(text))
            pad = 35;
        else
            pad = 60;
        tdToPad.css('paddingLeft', pad);
    });
} 
```

注意：这是我之前使用的。当值不在输入中时，这有效：

```
var tds = $(this).find('td'),
text = tds.filter('[id^="refKey_"]').text(), 
```

它应该获取以 TempRowKey_ 开头的 id 的输入值，然后将其用于填充。但是代码什么也没做。

这是我的 HTML：

```
<tr id="row_1">
  <td id="tempRowKey_1" >
    <input type="text" size="10" value="1.0.0" class="updatable" id="TempRowKey_1">
  </td>
  <td id="title_1">
     <input id="Title_1" class="updatable" type="text" value="zxxx" size="100" name="item.Title">
  </td>.
  <td ...
</tr> 
```

有什么方法可以测试这个。我无法访问 jQuery 块内的任何内容？

更新：

```
Here is my original code that worked before I enclosed the value I need inside an input:

function padTitles() {
    $('tr').each(function () {
        var tds = $(this).find('td'),
        text = tds.filter('[id^="refKey_"]').text(),
        tdToPad = tds.filter('[id^="title_"]'),
        pad;
        if (/0\.0$/.test(text))
            pad = 10;
        else if (/\.0$/.test(text))
            pad = 35;
        else
            pad = 60;
        tdToPad.css('paddingLeft', pad);
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:23:26.497

[这个 jsFiddle 正在工作并实现了您概述的功能](http://jsfiddle.net/HpU88/1/)

让我知道这是否不是您想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:26:44.947

我必须放一个`<table id="mytable">`并将选择器更改为“#mytable tr”才能工作。

另外，tdToPad 的标题必须是 Title。

[**看演示**](http://jsfiddle.net/cC6jT/2/)

# ruby-on-rails - Ruby on Rails 我如何访问模型本身内部的变量，就像在这个例子中一样？

> ID：11384140
> 
> 赞同：0
> 
> 时间：2012-07-08T15:10:10.573
> 
> 标签：ruby-on-rails, scope, rails-activerecord

我有一个这样的模型：

```
# == Schema Information
#
# Table name: s3_files
#
#  id                       :integer         not null, primary key
#  owner                    :string(255)
#  notes                    :text
#  created_at               :datetime        not null
#  updated_at               :datetime        not null
#  last_accessed_by_user    :string(255)
#  last_accessed_time_stamp :datetime
#  upload_file_name         :string(255)
#  upload_content_type      :string(255)
#  upload_file_size         :integer
#  upload_updated_at        :datetime
#

class S3File < ActiveRecord::Base

  #PaperClip methods
  attr_accessible :upload
  attr_accessor :owner

  Paperclip.interpolates :prefix  do |attachment, style|
    I WOULD LIKE TO ACCESS VARIABLE= owner HERE- HOW TO DO THAT?

  end

  has_attached_file(  :upload,
                  :path => ":prefix/:basename.:extension",
                  :storage => :s3,
                  :s3_credentials => {:access_key_id => "ZXXX",
                                      :secret_access_key => "XXX"},
                  :bucket => "XXX"
                )

  #Used to connect to users through the join table
  has_many :user_resource_relationships
  has_many :users, :through => :user_resource_relationships

 end 
```

我在控制器中设置这个变量，如下所示：

```
 # POST /s3_files
    # POST /s3_files.json
   def create
    @s3_file = S3File.new(params[:s3_file])
    @s3_file.owner = current_user.email

    respond_to do |format|
      if @s3_file.save
        format.html { redirect_to @s3_file, notice: 'S3 file was successfully created.' }
        format.json { render json: @s3_file, status: :created, location: @s3_file }
      else
        format.html { render action: "new" }
        format.json { render json: @s3_file.errors, status: :unprocessable_entity }
      end
    end
  end 
```

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:17:16.007

只需使用 owner 或 self.owner 即可获取变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:12:36.930

你有没有试过把`owner`它放进去看看它是否有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:19:18.333

此代码：`attr_accessor :owner`在您的类中生成一个 getter 和 setter 方法，有效地为您提供一个实例方法。

因此，在您的控制器中，您有一个`S3File`调用`@s3_file`来读取所有者的实例，只需使用`val=@s3_file.owner`并设置它即可`@s3_file.owner="asdf"`

如果您想在`S3File`go`val=self.owner`或`self.owner="asdf"`. `self`是可选的。

# android - 是否可以开发远程桌面服务器应用程序？

> ID：11384146
> 
> 赞同：1
> 
> 时间：2012-07-08T15:11:01.447
> 
> 标签：android, remote-desktop

我只是想知道是否有可能开发一个 Android 应用程序，允许以与远程桌面或团队查看器允许控制桌面操作系统相同的方式远程控制 Android 手机。可以在无根手机上使用吗？

实现这一点所需的基本功能是捕获帧缓冲区并以编程方式在设备上调用触摸的能力。

对此问题的任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:14:47.290

不，您必须修改操作系统才能获得该功能。出于明显的安全目的，不允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T20:58:29.633

过去的共识是，在 Kit-Kat 之前或没有 root 的情况下是不可能的，但我最近遇到了一个免费的 Android 应用程序，它似乎已经弄清楚了，并且完全按照您的要求进行了操作。它被称为 Mobizen，其操作类似于 Chromecast 或 YouTube，将设备应用程序与桌面应用程序 (USB) 或网络应用程序（移动和 Wifi）配对。

[https://www.mobizen.com/](https://www.mobizen.com/)
[https://play.google.com/store/apps/details?id=com.rsupport.mvagent&hl=en](https://play.google.com/store/apps/details?id=com.rsupport.mvagent&hl=en)

我不知道他们是如何实现一切的。但这令人印象深刻，我很想获得一些源代码/示例代码。

# ios - 如何避免在 iOS 中使用 Facebook SDK 时出现“重复状态消息”错误？

> ID：11384152
> 
> 赞同：3
> 
> 时间：2012-07-08T15:12:12.680
> 
> 标签：ios, facebook, duplicates

我想在 iOS 应用程序中将几条相同的消息发布到我的提要/墙上。

从第二次尝试开始，我收到此错误 -

> (#506) 重复状态消息。

我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T15:16:19.503

**你不能。**

这是 Facebook 告诉您停止发送垃圾邮件的方式。

抱歉，如果这听起来有点刻薄 - 但是一遍又一遍地发布相同的消息是垃圾邮件，而且不好。您收到的错误消息描述了问题 - 您正在发布相同的状态消息。这是专门为这种情况创建的特殊错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T20:04:21.590

我检查了 506 代码并且不向用户显示任何错误，以防它是重复的状态错误

```
if (error && [[[[[error.userInfo objectForKey:@"com.facebook.sdk:ParsedJSONResponseKey"] objectForKey:@"body"]objectForKey:@"error"]objectForKey:@"code"] intValue] !=506) {

 alertTitle = NSLocalizedString( @"SomethingWentWrongTitle", nil);

} 
```

# android - 无法使用 getInt() 但能够将 getString() 用于 sqlite 数据库

> ID：11384157
> 
> 赞同：1
> 
> 时间：2012-07-08T15:12:24.293
> 
> 标签：android, sqlite, cursor

我正在使用游标访问我的应用程序中的 sqlite 数据库。

我在我的数据库上使用 .getInt() 时遇到问题。我的数据库是预先创建的，并且我有一些游标可以执行查询以与信息交互。其中一个表中的几个列设置为 INTEGER 类型。我意识到 sqlite 没有内置检查来确保列确实是 INT。但是，在检索数据时，我可以毫无问题地使用 .getString() 函数，但调用 .getInt() 会导致应用程序崩溃。下面是相关代码。如果我遗漏了什么，请告诉我，我会补充的。

任何帮助是极大的赞赏。非常感谢。

光标：

```
public Cursor getSkitStats(int module, int skit) {
    Cursor mCursor = myDataBase.rawQuery("SELECT * FROM score WHERE mod="+module+" AND skit="+skit+"", null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

我正在使用一个简单的 Toast 调用来输出查询结果：

```
Toast.makeText(getApplicationContext(), scoreContent.getInt(0), Toast.LENGTH_SHORT).show(); 
```

变量 scoreContent 是光标。

这是崩溃输出：

```
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.os.Looper.loop(Looper.java:130)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at java.lang.reflect.Method.invokeNative(Native Method)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at java.lang.reflect.Method.invoke(Method.java:507)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at dalvik.system.NativeStart.main(Native Method)
07-08 23:53:31.726: E/AndroidRuntime(15685): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x2
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.content.res.Resources.getText(Resources.java:205)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.widget.Toast.makeText(Toast.java:258)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at jp.atomicideas.ne.Summary.onCreate(Summary.java:90)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-08 23:53:31.726: E/AndroidRuntime(15685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
07-08 23:53:31.726: E/AndroidRuntime(15685):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:23:52.737

如果您发送一个 int 到`Toast.makeText`，它假定它是一个资源 id。看这里：

[http://developer.android.com/reference/android/widget/Toast.html#makeText(android.content.Context](http://developer.android.com/reference/android/widget/Toast.html#makeText(android.content.Context) , int, int)

如果您只想打印一个数字，请使用`toString()`将其转换为字符串。（或 Integer.toString() 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:26:38.177

1.  “我可以毫无问题地使用 .getString() 函数。”

    它是一个*方法*，而不是一个函数。:)

2.  尽量避免使用`rawQuery`... 它不能防止 SQL 注入，并且根据我的经验不太可靠（这种情况很少见，但是当您尝试这样做时，某些设备会表现出奇怪的行为和奇怪的错误）。

    您应该改用这些`SQLiteDatabase.query()`方法。例如，

    ```
    String table = "score";
    String[] proj = null;
    String selection = "mod=? AND skit=?";
    String[] selectionArgs = new String { "module", "skit" };

    myDatabase.query(table, proj, selection, selectionArgs, null); 
    ```

3.  你用`scoreContent.getInt(0)`

    *即使*整数列索引是预先创建的，也不应该对其进行硬编码。用于*在运行时*`Cursor.getColumnIndex(column_name)`检索索引值。

**   你用`Toast.makeText(context, scoreContent.getInt(0), Toast.LENGTH_SHORT).show();`

    尝试将第二个参数转换为`String`... 之类的

    ```
    ""+scoreContent.getInt(cursor.getColumnIndex(col_name)) 
    ```* 

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:34:14.590

**scoreContent.getInt(0) 它工作正常**并返回一个ineteger，我假设在0索引处光标包含ineter类型值。

由于 scoreContent.getInt(0) 返回 ineteger 并且您使用该值作为 Toast 的 **第二个参数**，但**Toast 在这里需要 String**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:30:49.993

您应该存储所有列的名称，并使用[getColumnIndex()](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)检索索引。然后使用索引获取数据。一旦知道了列的格式，就知道应该使用哪种方法。

**已编辑**

您对 toast 的调用会为其提供数据库中的数字。第二个参数需要字符串资源的 ID 或字符串。数据库中的值显然是不正确的。*

# php - 未来 7 天即将到来的生日 SQL

> ID：11384167
> 
> 赞同：-1
> 
> 时间：2012-07-08T15:14:34.887
> 
> 标签：php, sql

> **可能重复：**
> [如何使用 MYSQL 和 PHP 获取本周、本月和下个月正在庆祝生日的朋友的生日？](https://stackoverflow.com/questions/1486412/how-would-i-get-the-birthdays-of-friends-who-are-celebrating-their-birthday-this)

如何使用此表格布局查询数据库以获取未来 7 天内的生日

> ID - Int
> Name - VarChar
> DOB - 日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:19:44.603

这取决于你持有的格式`DOB`。如果你持有它`yyyy-mm-dd`比你可以使用一个字符串比较，像这样的子句：

```
SELECT * FROM table_name WHERE DOB <= 'computed_date' 
```

where`computed_date`是用字符串连接构建的，例如：

```
$computed_date = sprintf('%4d-%2d-%2d', $year, $day, $month); 
```

# cakephp - CakePHP 2 和 Croogo 与 REST 的基本身份验证

> ID：11384171
> 
> 赞同：0
> 
> 时间：2012-07-08T15:14:56.417
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

尝试通过 REST 登录时，我只是添加了：

```
if ($this->RequestHandler->isXML()) {
     $this->Auth->authenticate = array('Basic');
} 
```

到我的插件 AppController。当我通过休息客户端请求时，我得到： DbAcl::check() - 权限检查中的 ARO/ACO 节点查找失败。

随着我的用户对象被转储。奇怪，它似乎让我登录但没有正确读取权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:36:08.827

这里您似乎缺少一件基本的事情：身份验证和授权**是两件不同的事情**。

**身份验证**是通过提供的凭据来识别用户并确保用户是他们所说的那个人的过程。这通常使用用户名和密码来完成。

**授权**是确保允许当前用户访问特定资源的过程。

您收到的错误是 Authorization 错误，我告诉您您正在尝试使用[ACL](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)。您对该问题的解决方法是配置基于控制器的授权，并通过它允许管理员访问所有内容。[基于控制器的授权](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authorization-who-s-allowed-to-access-what)与 ACL 授权无关。检查提供的链接。

AuthComponent实现了 3[种](http://api20.cakephp.org/class/auth-component)不同类型的[Authentication](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)：

> FormAuthenticate - 允许您根据表单 POST 数据对用户进行身份验证。通常这是用户输入信息的登录表单。
> 
> BasicAuthenticate - 允许您使用基本 HTTP 身份验证对用户进行身份验证。
> 
> DigestAuthenticate - 允许您使用 Digest HTTP 身份验证对用户进行身份验证。

如果您正在开发[REST 服务](http://book.cakephp.org/2.0/en/development/rest.html)，我建议您使用[Digest Authentication](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-digest-and-basic-authentication-for-logging-in)作为“最好的”，但它仍然取决于您登录的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:55:24.353

当我添加时：

```
$this->Auth->authorize = array('Controller'); 
```

并实现了 isAuthorized 方法：

```
public function isAuthorized($user) {
    if (isset($user['role_id']) && $user['role_id'] == 1) { 
         return true; //Admin can access every action   
    } 
    return false; // The rest don't 
} 
```

有效。

# xslt - XSLT1 将数据从父级连接到子级

> ID：11384176
> 
> 赞同：0
> 
> 时间：2012-07-08T15:15:20.117
> 
> 标签：xslt

我有此要求将 DNR2（父）消息数据中的数据连接到 DNRL（子）消息数据中

## 这是我的源 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
<ns1:Delivery2 xmlns:ns1="http://www.norskeskog.com/MES">
  <ns1:FGOD>
    <ns1:DNH2>
      <ns1:OIT_ID>1025</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNH2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>0000000000000019158100000000106448              00422  DE22ZCC2110600000027032500000227032502CC20DC          SUDU 198007-0                           .054349             2002432011081008150520110810                                                                                                                              delivery note                                                         0010002                                        FR. MEYERS SOHN GMBH&amp;CO                 20110820</ns1:MESSAGE_DATA>
    </ns1:DNH2>
    <ns1:DNR2>
      <ns1:OIT_ID>1026</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNR2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000022000000270325000002201108084325164108562025I2                              0006               10000444158000000000000856702000600</ns1:MESSAGE_DATA>
    </ns1:DNR2>
    <ns1:DNRL>
      <ns1:OIT_ID>1027</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000043251641085620254325164104282025</ns1:MESSAGE_DATA>
    </ns1:DNRL>
    <ns1:DNRL>
      <ns1:OIT_ID>1028</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000043251641085620254325174104282025</ns1:MESSAGE_DATA>
    </ns1:DNRL>
    <ns1:DNR2>
      <ns1:OIT_ID>1029</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNR2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000022000000270325000002201108084325164208602025I2                              0006               10000444158000000000000860702000600</ns1:MESSAGE_DATA>
    </ns1:DNR2>
    <ns1:DNRL>
      <ns1:OIT_ID>1030</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
<ns1:MESSAGE_DATA>000000000000001915810000000043251642086020254325164204302025</ns1:MESSAGE_DATA>
    </ns1:DNRL>
  </ns1:FGOD>
</ns1:Delivery2> 
```

我只需要将 DNR2 的消息数据连接到 DNRL 中，请记住 DNR2 是基于消息数据中的某些字符串的 DNRL 的父级。

我试过这样做，但是生成的 XML 包含重复的消息数据，因为它为每个 DNR2 迭代

所需目标：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Delivery2 xmlns:ns1="http://www.norskeskog.com/MES">
  <ns1:FGOD>
    <ns1:DNH2>
      <ns1:OIT_ID>1025</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNH2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>0000000000000019158100000000106448              00422  DE22ZCC2110600000027032500000227032502CC20DC          SUDU 198007-0                           .054349             2002432011081008150520110810                                                                                                                              delivery note                                                         0010002                                        FR. MEYERS SOHN GMBH&amp;CO                 20110820</ns1:MESSAGE_DATA>
    </ns1:DNH2>
    <ns1:DNR2>
      <ns1:OIT_ID>1026</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNR2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000022000000270325000002201108084325164108562025I2                              0006               10000444158000000000000856702000600</ns1:MESSAGE_DATA>
    </ns1:DNR2>
    <ns1:DNRL>
      <ns1:OIT_ID>1027</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000043251641085620254325164104282025 000000000000001915810000000022000000270325000002201108084325164108562025I2                              0006               10000444158000000000000856702000600</ns1:MESSAGE_DATA>
    </ns1:DNRL>
    <ns1:DNRL>
      <ns1:OIT_ID>1028</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000043251641085620254325174104282025 000000000000001915810000000022000000270325000002201108084325164108562025I2                              0006               10000444158000000000000856702000600</ns1:MESSAGE_DATA>
    </ns1:DNRL>
    <ns1:DNR2>
      <ns1:OIT_ID>1029</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNR2</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000022000000270325000002201108084325164208602025I2                              0006               10000444158000000000000860702000600</ns1:MESSAGE_DATA>
    </ns1:DNR2>
    <ns1:DNRL>
      <ns1:OIT_ID>1030</ns1:OIT_ID>
      <ns1:CONTEXT>FGOD</ns1:CONTEXT>
      <ns1:MESSAGE_ID>DNRL</ns1:MESSAGE_ID>
      <ns1:VERSION>40B</ns1:VERSION>
      <ns1:SOURCE_SYS>MWWA</ns1:SOURCE_SYS>
      <ns1:DESTIN_SYS>SAPT</ns1:DESTIN_SYS>
      <ns1:TIME_STAMP>2012-06-18T12:55:00</ns1:TIME_STAMP>
      <ns1:FUNCTION>NEW</ns1:FUNCTION>
      <ns1:PRIORITY>
      </ns1:PRIORITY>
      <ns1:STATUS>1</ns1:STATUS>
      <ns1:SAP_IDOC_NUMBER/>
      <ns1:MESSAGE_DATA>000000000000001915810000000043251642086020254325164204302025 000000000000001915810000000022000000270325000002201108084325164208602025I2                              0006               10000444158000000000000860702000600</ns1:MESSAGE_DATA>
    </ns1:DNRL> 
  </ns1:FGOD>
</ns1:Delivery2> 
```

我的尝试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://www.norskeskog.com/MES" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="ns0 xs">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <Delivery2 xmlns="http://www.norskeskog.com/MES">
            <xsl:attribute name="xsi:schemaLocation" namespace="http://www.w3.org/2001/XMLSchema-instance">http://www.norskeskog.com/MES C:/Users/scarlosb/Desktop/DEV/FGOD.xsd</xsl:attribute>
            <xsl:for-each select="ns0:Delivery2">
                <xsl:variable name="var2_cur" select="."/>
                <FGOD>
                    <DNH2>
                        <xsl:copy-of select="ns0:FGOD/ns0:DNH2/@node()"/>
                        <xsl:copy-of select="ns0:FGOD/ns0:DNH2/node()"/>
                    </DNH2>
                    <xsl:for-each select="ns0:FGOD/ns0:DNR2">
                        <DNR2>
                            <xsl:copy-of select="@node()"/>
                            <xsl:copy-of select="node()"/>
                        </DNR2>
                    </xsl:for-each>
                    <xsl:for-each select="ns0:FGOD/ns0:DNRL">
                        <xsl:variable name="var1_cur" select="."/>
                        <DNRL>
                            <OIT_ID>
                                <xsl:value-of select="string(floor(number(string(ns0:OIT_ID))))"/>
                            </OIT_ID>
                            <CONTEXT>
                                <xsl:value-of select="string(ns0:CONTEXT)"/>
                            </CONTEXT>
                            <MESSAGE_ID>
                                <xsl:value-of select="string(ns0:MESSAGE_ID)"/>
                            </MESSAGE_ID>
                            <VERSION>
                                <xsl:value-of select="string(ns0:VERSION)"/>
                            </VERSION>
                            <SOURCE_SYS>
                                <xsl:value-of select="string(ns0:SOURCE_SYS)"/>
                            </SOURCE_SYS>
                            <DESTIN_SYS>
                                <xsl:value-of select="string(ns0:DESTIN_SYS)"/>
                            </DESTIN_SYS>
                            <TIME_STAMP>
                                <xsl:value-of select="string(ns0:TIME_STAMP)"/>
                            </TIME_STAMP>
                            <FUNCTION>
                                <xsl:value-of select="string(ns0:FUNCTION)"/>
                            </FUNCTION>
                            <PRIORITY>
                                <xsl:value-of select="string(ns0:PRIORITY)"/>
                            </PRIORITY>
                            <STATUS>
                                <xsl:value-of select="string(floor(number(string(ns0:STATUS))))"/>
                            </STATUS>
                            <SAP_IDOC_NUMBER>
                                <xsl:value-of select="/.."/>
                            </SAP_IDOC_NUMBER>
                            <xsl:for-each select="$var2_cur/ns0:FGOD/ns0:DNR2">
                                <MESSAGE_DATA>
                                    <xsl:value-of select="concat(string($var1_cur/ns0:MESSAGE_DATA), string(ns0:MESSAGE_DATA))"/>
                                </MESSAGE_DATA>
                            </xsl:for-each>
                        </DNRL>
                    </xsl:for-each>
                </FGOD>
            </xsl:for-each>
        </Delivery2>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:51:14.817

这个 XSLT 1.0 样式表应该可以解决问题。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ns1="http://www.norskeskog.com/MES">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy> 
   <xsl:apply-templates select="@*|node()" /> 
 </xsl:copy> 
</xsl:template>  

<xsl:template match="ns1:DNRL/ns1:MESSAGE_DATA">
 <xsl:copy> 
   <xsl:apply-templates select="@*" /> 
   <xsl:value-of select="concat(., ' ', ../preceding-sibling::ns1:DNR2[1]/ns1:MESSAGE_DATA)" /> 
   <xsl:apply-templates select="*" /> 
 </xsl:copy> 
</xsl:template>  

</xsl:stylesheet> 
```

## 笔记

1.  使用身份模板的强大功能可以为您节省大量的脚本编写工作。
2.  编写模板来处理来自身份转换的所需变化。

# windows-phone-7 - 如何加载新屏幕？

> ID：11384177
> 
> 赞同：1
> 
> 时间：2012-07-08T15:15:23.117
> 
> 标签：windows-phone-7

我是 Windows 7 应用程序开发的新手。我不知道如何从主 xaml 屏幕加载新的 xaml 屏幕说 onclick of button。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:35:59.643

我认为您的意思是导航到其他 XAML 页面？如果是这样，请使用：

```
NavigationService.Navigate(new Uri("/OtherPage.xaml",UriKind.Relative)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T18:41:56.543

只是导航！

为该按钮创建一个事件处理程序，例如：

```
private void Button_Click(object sender, EventArgs e)
        {
            NavigationService.Navigate(new Uri("/yourProject;component/newPage.xaml", UriKind.Relative));
        } 
```

您可以稍后使用以下命令返回此页面：

```
NavigationService.GoBack(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T06:10:53.633

你可以使用这个：

```
private void Button_Click(object sender, EventArgs e)
    {
        NavigationService.Navigate(new Uri("/<nameofproj>;component/<nameofpage>.xaml",UriKind.Relative));
    } 
```

我试过了，效果很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:16:45.237

## 简单导航：

```
NavigationService.Navigate(new Uri("/OtherPage.xaml" , UriKind.Relative)); 
```

## 在页面之间交换值的导航：

```
NavigationService.Navigate( new Uri( String.Format( "/OtherPage.xaml?name={0}&address={1}",
          Uri.EscapeDataString( nameVal), Uri.EscapeDataString( addressVal ) ), 
          UriKind.Relative ) ); 
```

这里 nameVal 和 addressVal 是要传递给其他页面的值。

# apache-flex - 在 flex 中以编程方式更改菜单栏的 alpha

> ID：11384178
> 
> 赞同：0
> 
> 时间：2012-07-08T15:15:28.700
> 
> 标签：apache-flex, flash-builder

我正在尝试制作悬停菜单栏。

下面是代码

```
<mx:MenuBar id="mainMenuBar0" x="5" y="250" width="243" height="40" alpha=".2"
                chromeColor="#a8c6ee" cornerRadius="8" buttonMode="true" mouseOut="mainMenuBar_mouseOverHandler(event)" mouseOver="mainMenuBar_mouseOverHandler(event)">

protected function mainMenuBar_mouseOverHandler(event:MouseEvent):void
            {
                if (event.type == MouseEvent.MOUSE_OVER)
                {
                       event.target.setStyle("alpha", .8);
                } 
                else 
                {
                      event.target.setStyle("alpha", .2);
                                }

            } 
```

问题是，alpha 没有改变。谁能指导我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:20:40.407

Alpha 不是一种风格，它是一种属性，请重试。event.target.alpha = .8

# css - IE6 的浮动问题（没有任何边距/填充）

> ID：11384181
> 
> 赞同：0
> 
> 时间：2012-07-08T15:15:36.570
> 
> 标签：css, css-float, internet-explorer-6

我正在尝试让我制作的网站在我最喜欢的浏览器中正确显示，这永远不会给我带来麻烦 - IE6 !!! 哈哈。我在一个 div 中有 2 个浮动元素：

```
#content_container { position:relative; width: 908px; background-color:#FFFFFF; padding: 26px; min-height:400px; font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#545454; }
#content_container_left { position:relative; width: 384px; float:left;}
#content_container_right { position:relative; width: 496px; float:right; text-align:justify;} 
```

上面的 CSS 结果如下：

![在此处输入图像描述](../Images/46ac46a4ab1b5fb9348911853290b6e1.png)

如您所见，文本（#content_container_right）信息位于图库（#content_container_left）下方，其中右侧容器应浮动在空白区域的右侧。

我已经尝试给`margin:0px;`和`padding:0px;`两个浮动元素，但这不起作用......虽然我的浮动元素中没有任何边距`display:inline;`也不起作用。父 div 中的填充似乎不是问题。

顺便说一句：我一直在[IE Tester](http://my-debugbar.com/wiki/IETester/HomePage)中对此进行测试，事实证明它非常有用（即使它可能不是 100% 真实垃圾的复制品）

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:00:17.277

好的，所以我发现`display:inline;` and`zoom:1`已经解决了我的问题（在浮动 div 中使用它们）。下面的人就 IE6 给出了一些很好的建议。记住不要像 Henrik 提到的那样为 IE6 背脊，因为这只会让 Microsoft LAZY 并且它正在逐渐消失。

# c++ - C ++使用while循环读取文件，从“x”行开始

> ID：11384185
> 
> 赞同：0
> 
> 时间：2012-07-08T15:15:51.360
> 
> 标签：c++, while-loop, getline, feof

我一直在这个问题上停留了一段时间。我这里有一个循环，它将读取包含文件名的文本文件。循环一一读取这些行，并通过变量 sFileName 将其设置到内存中。稍后调用 sFileName 来加载图像，并且程序在循环加载图像时一一执行此操作。然后用户为图像选择一个标签并加载下一个标签。标记和图像文件名被导出到另一个名为 imgresults.txt 的文本文件中。现在，带有文件名的文本文件有几千行。因此，如果用户必须退出程序并稍后尝试继续，循环会重新开始，而不是在程序关闭时停止。

我正在尝试找到一种方法让循环从那时开始。到目前为止，我决定使用 getline() 来计算 imgresults.txt 中当前有多少行，因为这将给出已经通过程序运行的图像数量。这个数字存储在变量“x”中。我一直在做很多研究，但我只是找不到如何设置 while 循环从行“x”开始的条件。你们有什么建议吗？另外，如果您需要任何澄清，请询问。我只包含有关循环的代码，因为加载图像的代码非常好。

```
int _tmain(int argc, _TCHAR* argv[])
{

    int value = 0;

int nCounter = 0;
FILE* fIn = NULL;
char * sLine = new char[MAX_FILENAME_SIZE];
char * sFileName = new char [MAX_FILENAME_SIZE];
char * s = new char [MAX_FILENAME_SIZE];

#define ImgListFileName "path"
#define ImgRepository "path"

if ((fIn = fopen(ImgListFileName,"rt"))==NULL)

{
    printf("Failed to open file: %s\n",ImgListFileName);
    return nCounter;
}

ifstream imgresults;
    imgresults.open ("imgresults.txt");
    int x=0;
    string line;

    while(!imgresults.eof()) {
        getline (imgresults, line);
        x++;
    }
    srand (time(NULL));
    cout << x;

    while(!feof(fIn)){
        memset(sLine,0,MAX_FILENAME_SIZE*sizeof(char));
        memset(sFileName,0,MAX_FILENAME_SIZE*sizeof(char));
        memset(s,0,MAX_FILENAME_SIZE*sizeof(char));
        fgets(sLine,MAX_FILENAME_SIZE,fIn);
        strncpy(s,sLine,65);
        strcat(sLine,"\0");
        strcat(sFileName,s);

        printf (sFileName);

        nCounter++;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:21:50.390

当程序关闭时，使用[ifstream::tellg](http://www.cplusplus.com/reference/iostream/istream/tellg/)检索和存储文件的当前位置。

当 porgramm 重新启动时，使用[ifstream::seekg恢复该位置。](http://www.cplusplus.com/reference/iostream/istream/seekg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:26:24.353

如果您真的想使用 imgresults.txt 作为您应该从输入文件开始的位置的信息，那么您能做的最好的事情就是在您读取的 while 循环之前有一个 while 循环从输入文件中读取 x 行输入文件。

```
while (x--) {
    fgets(sLine, MAX_FILENAME_SIZE, fIn);
} 
```

更好的解决方案可能是将处理状态写入另一个文件，这样您就不必逐行读取输入文件，但您可以立即查找文件中的已知偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:37:39.233

在阅读每一行之前，将输入和输出文件中的当前偏移量保存到单独的文件中，每次都回到开头并覆盖现有数据。

当/如果您重新启动，请从该文件中读取偏移量，寻找这些点，然后从那里开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:38:04.260

您可以从两个文件中并行读取行，并在到达结果文件末尾时停止。当循环结束时，您已经丢弃了已经处理的文件名。

```
ifstream results("results.txt");
ifstream names("names.txt");

if (results && names) {
    std::string temp1, temp2;
    while (getline(results, temp1) && getline(names, temp2)) ; /* do nothing */
}

if (names) {
    // process the rest
} 
```

不是最有效的解决方案，但它为您省去了保存偏移量的麻烦。只需确保在第一次处理结果文件之前完全为空（或根本不存在），否则此代码将跳过名称文件的第一行。

# winforms - 在运行时突出显示richtextbox中的文本

> ID：11384188
> 
> 赞同：1
> 
> 时间：2012-07-08T15:16:35.120
> 
> 标签：winforms, c#-4.0, richtextbox

我需要在运行时根据条件突出显示富文本框中的特定文本。我试图用带有 html 标签的文本替换文本，但它没有呈现它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:31:40.800

你可以试试这样的。当然，根据您的情况更改代码。

```
 private void button1_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text.Contains("red"))
            {
                richTextBox1.SelectionStart = 0;
                richTextBox1.SelectionLength = richTextBox1.Text.Length;
                richTextBox1.SelectionBackColor = Color.Black;
                richTextBox1.SelectionColor = Color.White;
            }
        } 
```

# mysql - 简单的mysql选择问题

> ID：11384197
> 
> 赞同：1
> 
> 时间：2012-07-08T15:18:07.443
> 
> 标签：mysql

我正在尝试选择数据库中所有重复的行。我有下表：

```
title     content
aa          hahaha
bb          weeeee
cc          dddddd
aa          ggggg
aa          ggggggee
dd          hhhhhhh
bb          ggggggg 
```

我的查询是

```
select count(post_title) as total, content from post group by post_title 
```

它只会显示

```
 total        content
    3        hahaha
    2        weeeeee 
```

但我想展示类似的东西

```
total        content
aa          hahaha
aa          ggggg
aa          ggggggee
bb          weeeeeee
bb          geeeeeee 
```

不知道该怎么做，我认为这可能很简单。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T15:22:12.763

```
Select title, content
From table_name
Where title In
    (Select title From Table
     Group By title
     Having COUNT(*) > 1) 
```

（来自[Multiple NOT distinct](https://stackoverflow.com/questions/269605/multiple-not-distinct)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:20:29.363

据我了解，SQL 查询应如下所示：

```
SELECT post_title, content
FROM post
GROUP BY post_title, content 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:21:59.410

尝试类似的东西

```
SELECT total, content FROM post 
   WHERE id IN ( 
    SELECT id FROM post 
         GROUP BY post_title 
         HAVING count(post_title) > 1 
   ) 
```

# javascript - 重新初始化 gmap3 地图

> ID：11384201
> 
> 赞同：4
> 
> 时间：2012-07-08T15:18:57.233
> 
> 标签：javascript, jquery, google-maps-api-3

是否可以将 gmap3 地图重新初始化为其默认设置（纬度、经度、缩放等）？

我尝试在地图上销毁，然后重新运行初始化，但它不起作用。

在这里查看我的 jsfiddle - [http://jsfiddle.net/vlowe/z9dDE/1/](http://jsfiddle.net/vlowe/z9dDE/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T15:43:49.367

将地图元素包裹在容器 div 中，然后当您要重置地图时，只需删除整个地图 div 并重新创建它。这应该可以解决问题。

根据 gmap3 文档，您仍然需要在删除 dom 元素之前在地图上调用 destroy。

HTML 代码

```
<div>
    <div id="map"></div>
</div>

<a href="#" onclick="restore();">restore</a>​ 
```

JavaScript

```
var dlat = 53.9783997; // default map latitude
var dlng = -1.5666347; // default map longitude
var dzoom = 6; // default map zoom
var dmaptype = "roadmap"; // default map type
// create gmap
$('#map').gmap3({
    action: 'init',
    options: {
        center: [dlat, dlng],
        zoom: dzoom,
        mapTypeId: dmaptype,
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        navigationControl: true,
        scrollwheel: true,
        streetViewControl: true
    }
});

function restore() {

    $('#map').gmap3({
        action: 'destroy'
    });

    var container = $('#map').parent();
    $('#map').remove();
    container.append('<div id="map"></div>');

    // create new gmap
    $('#map').gmap3({
        action: 'init',
        options: {
            center: [dlat, dlng],
            zoom: dzoom,
            mapTypeId: dmaptype,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
            navigationControl: true,
            scrollwheel: true,
            streetViewControl: true
        }
    });

}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:22:23.690

这是另一种方法：与其破坏地图并完全重新创建它，您可以保存初始状态并将其恢复到该状态，如下所示：http: [//jsfiddle.net/UvAL3/1/](http://jsfiddle.net/UvAL3/1/)

（这些函数在 V2 中作为 API 的一部分存在）

# python - 无法在 apache 服务器上的 django 中加载模块错误

> ID：11384203
> 
> 赞同：0
> 
> 时间：2012-07-08T15:19:06.787
> 
> 标签：python, django, apache, web-applications

这是一件我无法理解的奇怪事情。

这是我的 django 文件目录层次结构

```
project/
       apache/ django.wsgi
       project/ __init__.py, settings.py, urls.py ..
       services/
               __init__.py
               apis/
                    __init__.py
                    fparser.py
               wservice.py
       ...

       profile.py 
```

因此，在开发服务器甚至在 heroku (gunicorn) 上一切正常，但在 apache (localhost) 上不起作用

当我打开页面时：

它的显示

```
Exception Type: ImportError at /
Exception Value: cannot import name website_feed_address 
```

这`website_feed_address`位于 profile.py 中`import error`，发现于`fparser.py`

我应该如何解决？

**编辑：**

*django.wsgi*

```
import os, sys

sys.path.append('d:/code/projects-dev/project')

os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

而问题中上面提到的项目目录层次结构位于`d:/code/projects-dev/`

**编辑 2**

*这些是 apache 日志错误*

```
[Sun Jul 08 23:14:04 2012] [notice] Parent: Received restart signal -- Restarting the server.
httpd.exe: Could not reliably determine the server's fully qualified domain name, using 124.123.136.220 for ServerName
[Sun Jul 08 23:14:04 2012] [warn] mod_wsgi: Compiled for Python/2.7.
[Sun Jul 08 23:14:04 2012] [warn] mod_wsgi: Runtime using Python/2.7.2.
[Sun Jul 08 23:14:05 2012] [notice] Child 5912: Exit event signaled. Child process is ending.
[Sun Jul 08 23:14:05 2012] [warn] RSA server certificate CommonName (CN) `127.0.0.1' does NOT match server name!?
[Sun Jul 08 23:14:05 2012] [notice] Apache/2.2.22 (Win32) mod_wsgi/3.3 Python/2.7.2 mod_ssl/2.2.22 OpenSSL/0.9.8t configured -- resuming normal operations
[Sun Jul 08 23:14:05 2012] [notice] Server built: Jan 28 2012 11:16:39
[Sun Jul 08 23:14:05 2012] [notice] Parent: Created child process 2120
httpd.exe: Could not reliably determine the server's fully qualified domain name, using 124.123.136.220 for ServerName
[Sun Jul 08 23:14:05 2012] [warn] RSA server certificate CommonName (CN) `127.0.0.1' does NOT match server name!?
httpd.exe: Could not reliably determine the server's fully qualified domain name, using 124.123.136.220 for ServerName
[Sun Jul 08 23:14:05 2012] [warn] mod_wsgi: Compiled for Python/2.7.
[Sun Jul 08 23:14:05 2012] [warn] mod_wsgi: Runtime using Python/2.7.2.
[Sun Jul 08 23:14:05 2012] [warn] RSA server certificate CommonName (CN) `127.0.0.1' does NOT match server name!?
[Sun Jul 08 23:14:05 2012] [notice] Child 2120: Child process is running
[Sun Jul 08 23:14:06 2012] [notice] Child 2120: Acquired the start mutex.
[Sun Jul 08 23:14:06 2012] [notice] Child 5912: Released the start mutex
[Sun Jul 08 23:14:06 2012] [notice] Child 2120: Starting 64 worker threads.
[Sun Jul 08 23:14:06 2012] [notice] Child 2120: Starting thread to listen on port 443.
[Sun Jul 08 23:14:06 2012] [notice] Child 2120: Starting thread to listen on port 80.
[Sun Jul 08 23:14:07 2012] [notice] Child 5912: Terminating 126 threads that failed to exit.
[Sun Jul 08 23:14:07 2012] [notice] Child 5912: All worker threads have exited.
[Sun Jul 08 23:14:07 2012] [notice] Child 5912: Child process is exiting 
```

*编辑 3*

*这就是 profile.py、fparser.py 的样子*

`profile.py`只包含一些变量，元组就像`settings.py`. `website_feed_address`在这种情况下，它只是导入一个变量。

这是`fparser.py`

```
from profile import website_feed_address
import feedparser

class FParser(object):
      def __init__(self):
            self.pFeed = feedparser.parse(website_feed_address)
      # rest of the code goes... 
```

> 我只想在 FParser 类中使用 website_feed_address 而不将其作为对象参数。有没有更好的方法？..或者，我可以像这样使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:40:14.303

最有可能的问题是您在项目中使用了与包相关的导入语句，但 Apache 不知道正确的 python 路径。例如，由于您遇到此特定的导入错误，我假设`fparser.py`您正在执行类似`from profile import website_feed_address`. 您可以尝试在 django.wsgi 中明确包含您的项目包：

```
sys.path.append('d:/code/projects-dev/project')
sys.path.append('d:/code/projects-dev/project/project') 
```

一个更好的建议是为您的项目设置一个[virtualenv](http://pypi.python.org/pypi/virtualenv/)。这样做的好处是允许您的项目包含自己的站点包环境，以便您安装的任何依赖项都将与项目环境一起使用。然后在 Apache 中你可以告诉 mod_wsgi python 环境在哪里：

```
# or wherever you decide to create the virtualenv
WSGIPythonHome d:/code/projects-dev/project/project 
```

**通过 Apache 设置 pythonpath**

您还可以尝试在 Apache conf 中为您的 wsgi 应用程序[设置 PYTHONPATH ：](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)

```
WSGIPythonPath "d:/code/projects-dev/project/project" 
```

*请注意该链接中区分 wsgi 嵌入模式和守护程序模式的地方。

**解决进口问题的完全替代方法**

虽然我之前的建议是解决 PYTHONPATH 并导入您的`profile`模块，但基于您只是使用它来传递一个常量这一事实，我建议您只使用 settings.py，因为这就是它的用途（声明常数）：

*设置.py*

```
WEBSITE_FEED_ADDRESS = "http://foo.com" 
```

*解析器.py*

```
from django.conf import settings

...
    self.pFeed = feedparser.parse(settings.WEBSITE_FEED_ADDRESS) 
```

您可以确定 django 环境将始终为您提供设置模块。常见的方法是让应用程序添加到设置中，以提供默认常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:27:53.330

如果您将 profile.py 移动到项目文件夹中，它将位于一个包中。然后你可以这样做：

```
from project.profile import website_feed_address 
```

# c# - 如何使用 Xml 序列化表示自定义对象列表

> ID：11384205
> 
> 赞同：1
> 
> 时间：2012-07-08T15:19:17.573
> 
> 标签：c#, xml-serialization

我想产生以下 xml 输出

```
<account>
    <id>123456</id>
    <roles>
        <role master-name="I80">
            <id>88</id>
            <unit>Implementer</unit>
        </role>
        <role master-name="S20">
            <id>21</id>
            <unit>Support</unit>
        </role>
    </roles>
</account> 
```

所以我创建了以下类

```
[XmlRoot("account")]
public class Account
{
    [XmlElement("id")]
    public int ID { get; set; }
    [XmlElement("roles")]
    public RolesList Roles { get; set; }
}

public class RolesList
{
    [XmlElement("role")]
    public List<Role> roles { get; set; }
}

public class Role
{
    [XmlAttribute("master-name")]
    public string MasterName { get; set; }
    [XmlElement("id")]
    public int ID { get; set; }
    [XmlElement("unit")]
    public string Unit { get; set; }
} 
```

我的问题是，有没有办法更好地代表这一点？我想避免创建 RolesList 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:41:13.243

您应该在以下位置声明这样的角色列表`Account`：

```
[XmlArray("roles")]
[XmlArrayItem("role")]
public List<Role> Roles { get; set; } 
```

# ios - 调用 shouldAutorotateToInterfaceOrientation 但锁定视图不旋转

> ID：11384207
> 
> 赞同：0
> 
> 时间：2012-07-08T15:19:18.800
> 
> 标签：ios

我想创建一个当我调用 shouldAutorotateToInterfaceOrientation 时不会旋转的 UIVIew，其他子视图也会旋转。

我想保留 shouldAutorotateToInterfaceOrientation 支持，而不是使用通知。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:55:48.797

当设备旋转时，请务必通过“不旋转”视图来准确定义您的意思。旋转可能意味着几件事，具体取决于您所指的坐标系。一个更好的思考方式很简单，你希望你的视图在每个设备方向上看起来像什么。

提醒一下， shouldAutorotateTo... 由系统发送到您的视图控制器。你不会自己调用它。它不会导致旋转。它让系统询问您的视图控制器它支持什么方向。

你的 VC 应该对它支持的所有方向回答“是”。支持的方向是视图响应设备方向更改而更改布局的方向，因此如果给定方向发生任何布局更改，则 shouldAutorotateTo 的答案可能是 YES。

更改给定界面方向的子视图布局主要是您的责任。视图有一个 autoresizingMask，它是一个位向量，描述了一些相对于其父级的大小和定位选项，这通常就足够了。完全控制方向变化布局的方法是实现 willAnimateRotationToInterfaceOrientation。

例如，这是一个相当宽松的 shouldAutorotate，除了一个方向外，所有方向都可以......

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

这是您如何控制子视图在旋转时布局的方式...

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    UIView *testView = [self.view viewWithTag:16];

    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        // change frames here to make the ui appear according to your spec
        // including however you define "not rotating" for each view
        self.subviewA.frame = .....
        self.subviewB.frame = .....                
    } else {
        self.subviewA.frame = .....
        self.subviewB.frame = .....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:36:57.780

如果您希望一个 UIView 不随方向旋转，一种简单的解决方案是将该视图添加到应用程序顶部窗口，如下所示。因为窗口不随设备方向旋转。

```
[[[[UIApplication sharedApplication]windows]objectAtIndex:0]addSubview:customView]; 
```

# java - 使用套接字发送变量

> ID：11384211
> 
> 赞同：1
> 
> 时间：2012-07-08T15:19:35.977
> 
> 标签：java, sockets

我已经开始研究一个简单的 newtworking 项目，它为每个连接创建一个新线程，并且我正在尝试发送多个东西。我想知道是否有一种简单的方法可以简单地说声明一个变量，将整个变量发送到服务器并发送到其他客户端。例如，如果我想发送一个简单的整数数组？基本上我将如何通过套接字发送数组甚至图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:22:32.010

是的，有可能。您正在寻找的称为序列化，可用于通过流（套接字、文件等）发送整个对象。看看[这个 java 套接字序列化教程](http://java.sun.com/developer/technicalArticles/ALT/sockets/)。

检查[ObjectOutpuStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/ObjectOutputStream.html)和[ObjectInputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/ObjectInputStream.html)上的文档。

基本上你要做的是让任何你想要序列化的自定义类型实现`Serializable`接口：

```
class MyCustomType implements Serializable {
    ...
} 
```

这是一个标记接口，它告诉运行时可以通过流发送此类型。

接下来，一旦建立连接，您就可以获取套接字输入/输出流并使用以下方法写入对象`ObjectOutputStream`：

```
MyCustomType obj = new MyCustomType(); 
ObjectOutputStream oos = new ObjectOutputStream(client.getOutputStream());
oos.writeObject(obj);
oos.flush(); 
```

或使用以下方法阅读它们`ObjectInputStream`：

```
ObjectInputStream ois = new ObjectInputStream(client.getOutputStream());
MyCustomType obj = (MyCustomType) ois.readObject(); 
```

（`client`上面是一个`Socket`）。

# node.js - Nodejs +nowjs + Windows

> ID：11384214
> 
> 赞同：1
> 
> 时间：2012-07-08T15:19:47.193
> 
> 标签：node.js, nowjs-sockets

我尝试安装nodejs，它工作正常，我能够让它运行。完全按照此处显示的步骤操作：http: [//blog.nowjs.com/running-nowjs-natively-on-windows](http://blog.nowjs.com/running-nowjs-natively-on-windows)

然后我尝试安装 nowjs 并运行 multiroomchat_server.js 示例并收到此错误：

```
[Error: The specified procedure could not be found.
C:\Program Files (x86)\nodejs\node_modules\now\bin\proxy.node]
Error: The specified procedure could not be found.
C:\Program Files (x86)\nodejs\node_modules\now\bin\proxy.node
at Object.Module._extensions..node (module.js:480:11)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (C:\Program Files (x86)\nodejs\node_modules\now\lib\pr
oxy.js:10:13)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12) 
```

我正在运行 Windows 7 64 位，安装了 32 位版本的 node.js node-v0.8.1-x86.msi。

有人让它运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:43:17.177

尝试更新版本的节点。

适用于带有 node-v0.8.5-x64 的 Win 7 x64

# facebook - facebook like 按钮：Facebook Platform Opt In 发生错误。请稍后再试

> ID：11384215
> 
> 赞同：0
> 
> 时间：2012-07-08T15:20:03.633
> 
> 标签：facebook, facebook-like

我想在我的网站上添加一个 Facebook 赞按钮。

如果我使用以下代码，例如按钮正在工作，但登录时会显示错误消息：“Facebook Platform Opt In 发生错误。请稍后再试”。

```
<html>
    <head>
      <title>My Great Web page</title>
    </head>
    <body>
       <iframe src="http://www.facebook.com/plugins/like.php?href=guiuiu"
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe>
    </body>
</html> 
```

为什么会这样。我是否需要创建一个 fb API 才能成功登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:10:55.387

接受的答案是错误的。

无论您使用什么实现，您都会得到与 OP 描述的相同的错误。这个问题是由于 Facebook 方面的一个错误造成的。

它当前是 OPEN、ASSIGNED 并设置为 HIGH 优先级。有关更多详细信息，请参见此处：http: [//developers.facebook.com/bugs/228506407275556](http://developers.facebook.com/bugs/228506407275556)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:26:16.363

您必须提供有效的 url 才能使用 iframe 方法。

无论如何-您最好使用like按钮的xfmbl实现

为此，您必须打开应用程序（在[http://developers.facebook.com/apps](http://developers.facebook.com/apps)上）

然后将此代码粘贴在`<body>`您页面的标签之后（将APP ID放在它所属的位置）

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID_GOES_HERE";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

将此命名空间添加到您的`html`节点：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

并把它代替你使用的 iframe

```
<fb:like send="false" href="YOUR_PAGE_ABSOLUTE_URL" width="450" show_faces="true"></fb:like> 
```

有关更多信息，您可以在此处参考：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

# database - VB.NET 中的数据库访问

> ID：11384216
> 
> 赞同：0
> 
> 时间：2012-07-08T15:20:05.993
> 
> 标签：database, vb.net

我使用以下代码访问了 VB.NET 中的数据库：

```
Public Class Form1
    Private Sub btnLoad_Click(ByVal sender As System.Object, _
      ByVal e As System.EventArgs) Handles btnLoad.Click
        Dim con As OleDb.OleDbConnection = New OleDb.OleDbConnection
        Dim dbProvider As String
        Dim dbSource As String
        Dim ds As New DataSet
        Dim da As OleDb.OleDbDataAdapter
        Dim sql As String

        dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        dbSource = "Data Source = AddressBook.mdb"
        con.ConnectionString = dbProvider & dbSource
        con.Open()
        sql = "SELECT * FROM tblContacts"
        da = New OleDb.OleDbDataAdapter(sql, con)
        da.Fill(ds, "Address Book")
        MsgBox("Database Open")
        con.Close()
        MsgBox("Database Closed")
        txtFirstName.Text = ds.Tables("AddressBook").Rows(0).Item(1)
        txtSurname.Text = ds.Tables("AddressBook").Rows(0).Item(2)
    End Sub
End Class 
```

但是在“txtFirstName.Text = ds.Tables("AddressBook").Rows(0).Item(1)" 行中，它给了我一个例外，说应该创建一个对象的实例。我不明白到底是什么问题。如何创建实例，我应该创建什么实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:28:54.737

你用了一个空格

```
da.Fill(ds, "Address Book") 
```

但是里面没有空间

```
txtFirstName.Text = ds.Tables("AddressBook").Rows(0).Item(1) 
```

对于表的名称。因此，不存在名为“AddressBook”的表。

# android - 如何使用 MediaHttpUploader 将图像上传到 BlobStore？

> ID：11384217
> 
> 赞同：1
> 
> 时间：2012-07-08T15:20:10.967
> 
> 标签：android, google-app-engine, google-api, google-api-java-client

我在 android 中使用以下函数，但在调用时出现错误“500 Java Heap Space” `uploader.upload()`。

如果我在收到错误“411 Length required”而不是错误 500`uploader.setDirectUploadEnabled(true)`之前打电话。`uploader.upload()``upload()`

```
public static String uploadImage(Context context, String file, MediaHttpUploaderProgressListener progressListener)
            throws Exception {
// The file is something like : /mnt/sdcard/wallpapers/image.jpg
        File mediaFile = new File(file);
        HttpTransport transport = new NetHttpTransport();       

        HttpRequestFactory factory = transport.createRequestFactory(null);
//obtain the upload url
        GenericUrl getUploadUrl = new GenericUrl(Util.getBaseUrl(context)
                + "/myapp/blobservice?get-key");
        HttpRequest request = factory.buildGetRequest(getUploadUrl);
        HttpResponse response1 = request.execute();

        String postUrl = convertStreamToString(response1.getContent()).trim();
// the returned post url when using the development server is something like : //http://192.168.1.4:8888/_ah/upload/agd5YWRnZXQychwLEhVfX0Jsb2JVcGxvYWRTZXNzaW9uX18Y2wUM

        InputStreamContent mediaContent = new InputStreamContent("image/jpeg",
                new BufferedInputStream(new FileInputStream(mediaFile)));
        mediaContent.setLength(mediaFile.length());
        MediaHttpUploader uploader = new MediaHttpUploader(mediaContent,transport, null);

        uploader.setProgressListener(progressListener);

//the following line produces exception "500 Java heap space" on the local server
//on the remote server I get "500: Internal server error"

        HttpResponse response = uploader.upload(new GenericUrl(postUrl));
        if (!response.isSuccessStatusCode()) {
            throw new Exception("Uploading image failed.");
        } else {
            String blobKey = convertStreamToString(response.getContent()).trim();
            return blobKey;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:50:04.657

似乎`MediaHttpUpload`使用了[可恢复协议，与](https://developers.google.com/gdata/docs/resumable_upload)[`multipart/form-data`GAE blobstore 的文件上传](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)不兼容。

您应该创建一个[自定义数据上传 servlet](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)，它知道如何处理[可恢复协议](https://developers.google.com/gdata/docs/resumable_upload)。

# c# - 两个故事板 .. 相同的事件 .. 相同的属性

> ID：11384218
> 
> 赞同：1
> 
> 时间：2012-07-08T15:20:10.673
> 
> 标签：c#, wpf, storyboard, expression-blend, eventtrigger

**如何**在同一个 ex 中的两个故事板之间分别更改。MouseDown 事件或按钮单击事件针对相同的属性 ex。能见度。

第一次单击 -> 从 1 到 0 的可见性（淡出）
第二次单击 -> 从 0 到 1 的可见性（淡入）
第三次单击 -> 从 1 到 0 的可见性（淡出）
第 4 次单击 -> 从 0 到 1 的可见性（淡出）在 )
等等...

**淡入**

```
<Style TargetType="{x:Type FrameworkElement}" x:Key="FadeIn">
        <Style.Triggers>
            <Trigger Property="Visibility" Value="Visible">
                <Trigger.EnterActions>
                    <BeginStoryboard >
                        <Storyboard>
                            <DoubleAnimation BeginTime="0:0:5.0" Storyboard.TargetProperty="Opacity"
                         From="1.0" To="0.0" Duration="0:0:0.5"/>
                        </Storyboard>
                    </BeginStoryboard>             
                </Trigger.EnterActions>
            </Trigger>
        </Style.Triggers> 
    </Style> 
```

**消退**

```
<Style TargetType="{x:Type FrameworkElement}" x:Key="FadeOut">
        <Style.Triggers>
            <Trigger Property="Visibility" Value="Visible">
                <Trigger.EnterActions>
                    <BeginStoryboard >
                        <Storyboard>
                            <DoubleAnimation BeginTime="0:0:5.0" Storyboard.TargetProperty="Opacity"
                         From="0.0" To="1.0" Duration="0:0:0.5"/>
                        </Storyboard>
                    </BeginStoryboard>             
                </Trigger.EnterActions>
            </Trigger>
        </Style.Triggers> 
    </Style> 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:09:08.137

我认为切换按钮是合适的控件，但是如果您出于某种原因需要使用普通按钮，请使用其中两个而不是一个：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" mc:Ignorable="d"
x:Class="TestBed.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="Hide_Border">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="border">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Btn_Show">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Btn_Hide">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Collapsed}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="Show_Border">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="border">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Btn_Show">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Collapsed}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Btn_Hide">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="Btn_Hide">
        <BeginStoryboard Storyboard="{StaticResource Hide_Border}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="Btn_Show">
        <BeginStoryboard x:Name="Show_Border_BeginStoryboard" Storyboard="{StaticResource Show_Border}"/>
    </EventTrigger>
</Window.Triggers>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.2*"/>
        <ColumnDefinition Width="0.8*"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="Btn_Hide" Content="Hide" VerticalAlignment="Top"/>
    <Button x:Name="Btn_Show" Content="Show" VerticalAlignment="Top" Visibility="Collapsed"/>
    <Border x:Name="border" Grid.Column="1" Background="Red" />     
</Grid> 
```

# c++ - 写入远程 Windows 共享文件夹的所有者时，GetNamedSecurityInfo 返回 ERROR_ACCESS_DENIED(5)

> ID：11384220
> 
> 赞同：0
> 
> 时间：2012-07-08T15:20:24.290
> 
> 标签：c++, winapi, active-directory, access-denied

我是域管理员，我想在 API（例如 C++）中以编程方式获取我域的某些服务器上的某些共享文件夹的所有权。我做了一些阅读工作，发现域管理员默认在成员机器的本地管理员组中，本地管理员用户无论如何都可以拥有所有权。我只是以这种方式编写了一些代码，但在使用 GetNamedSecurityInfo 获取所有者 sid 时仍然遇到 ERROR_ACCESS_DENIED？问题出在哪里？

有趣的是：当我将 GetNamedSecurityInfo 的第二个参数从 SE_FILE_OBJECT 更改为 SE_LMSHARE 时，它会成功（也设置一个）。但是我没有在文件夹属性的“安全”选项卡中看到所有者更改。我知道“共享”权限与“安全”权限不同。“共享”权限甚至没有所有者。那么当通过 SE_LMSHARE 参数调用 GetNamedSecurityInfo 时，我得到了什么所有者呢？

这是我用于获取文件夹“strFileName”所有权的功能，在服务器“strServerName”上，所有者更改为只是称为“strDomainName”“strUserName”“strPassword”的域管理员帐户，原始所有者保留在“pOriginSID”中”。我在 GetNamedSecurityInfo 调用（也是 Set 之一）中收到错误代码 5。我还写了一个模拟方法“logOnByUserPassword”，它似乎不起作用，我将它粘贴在下面。

处理 ADPermissionSearch::getAccessTokenByCredential(CString strDomainName, CString strUserName, CString strPassword) {

```
CString strUPNUserName = strUserName + _T("@") + strDomainName;

HANDLE hToken;
BOOL bResult;
//bResult = LogonUser(strUserName, strDomainName, strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT,
//  &hToken);
if (strDomainName != _T(""))
{
    bResult = LogonUser(strUPNUserName, _T(""), strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT, 
        &hToken);
}
else
{
    bResult = LogonUser(strUserName, _T("."), strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT, 
        &hToken);
}
if (bResult == FALSE)
{
    MyMessageBox_Error(_T("getAccessTokenByCredential Error."), _T("Error"));
    return FALSE;
}
else
{
    return hToken;
} 
```

}

int ADPermissionSearch::takeOwnership(CString strServerName, CString strFileName, CString strDomainName, CString strUserName, CString strPassword, __out PSID &pOriginSID) {

```
CString strUNCFileName = _T("\\\\") + strServerName + _T("\\") + strFileName;
_bstr_t bstrUNCFileName = _bstr_t(strUNCFileName);
PSID pSIDAdmin = NULL;
SID_IDENTIFIER_AUTHORITY SIDAuthNT = SECURITY_NT_AUTHORITY;
HANDLE hToken = NULL;
DWORD dwRes;

// Create a SID for the BUILTIN\Administrators group.
if (!AllocateAndInitializeSid(&SIDAuthNT, 2,
    SECURITY_BUILTIN_DOMAIN_RID,
    DOMAIN_ALIAS_RID_ADMINS,
    0, 0, 0, 0, 0, 0,
    &pSIDAdmin))
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

// If the preceding call failed because access was denied,
// enable the SE_TAKE_OWNERSHIP_NAME privilege, create a SID for
// the Administrators group, take ownership of the object, and
// disable the privilege. Then try again to set the object's DACL.

// Open a handle to the access token for the calling process.
/*
if (!OpenProcessToken(GetCurrentProcess(),
                      TOKEN_ADJUST_PRIVILEGES,
                      &hToken))
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}
*/
if ((hToken = getAccessTokenByCredential(strDomainName, strUserName, strPassword)) == NULL)
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

// Enable the SE_TAKE_OWNERSHIP_NAME privilege.
if (!setPrivilege(hToken, SE_TAKE_OWNERSHIP_NAME, TRUE))
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

// Get the original owner in the object's security descriptor.
dwRes = GetNamedSecurityInfo(
    bstrUNCFileName,             // name of the object
    SE_FILE_OBJECT,                  // type of object
    OWNER_SECURITY_INFORMATION,  // change only the object's owner
    &pOriginSID,                 // SID of Administrator group
    NULL,
    NULL,
    NULL,
    NULL);
if (dwRes != ERROR_SUCCESS)
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

// Set the owner in the object's security descriptor.
dwRes = SetNamedSecurityInfo(
            bstrUNCFileName,             // name of the object
            SE_FILE_OBJECT,                  // type of object
            OWNER_SECURITY_INFORMATION,  // change only the object's owner
            pSIDAdmin,                   // SID of Administrator group
            NULL,
            NULL,
            NULL);
if (dwRes != ERROR_SUCCESS)
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

// Disable the SE_TAKE_OWNERSHIP_NAME privilege.
if (!setPrivilege(hToken, SE_TAKE_OWNERSHIP_NAME, FALSE))
{
    if (pSIDAdmin)
        FreeSid(pSIDAdmin);
    if (hToken)
        CloseHandle(hToken);
    MyMessageBox_Error(_T("takeOwnership"));
    return 0;
}

return 1; 
```

}

BOOL ADDirectorySearch::logOnByUserPassword(CString strDomainName, CString strUserName, CString strPassword) {

```
CString strUPNUserName = strUserName + _T("@") + strDomainName;

HANDLE hToken;
BOOL bResult;
//bResult = LogonUser(strUserName, strDomainName, strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT,
//  &hToken);
if (strDomainName != _T(""))
{
    bResult = LogonUser(strUPNUserName, _T(""), strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT, 
        &hToken);
}
else
{
    bResult = LogonUser(strUserName, _T("."), strPassword, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT, 
        &hToken);
}
if (bResult == FALSE)
{
    MyMessageBox_Error(_T("logOnByUserPassword Error."), _T("Error"));
    return FALSE;
}
else
{
    bResult = ImpersonateLoggedOnUser(hToken);
    if (bResult == FALSE)
    {
        MyMessageBox_Error(_T("logOnByUserPassword Error."), _T("Error"));
        return FALSE;
    }
    else
    {
        return TRUE;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:26:59.593

本地管理员需要接受通常的 Windows 安全检查，但有一个例外：无论权限如何，他们始终可以获取受保护对象的所有权。这可确保管理员始终能够重新获得控制权。

但是，您并没有尝试获得所有权，而是尝试读取当前所有者，并且您不一定有权这样做。

从您的代码中不清楚您为什么要尝试阅读所有者。你似乎没有用它做任何事情。也许完全删除对 GetNamedSecurityInfo 的调用。

**更新**

目的是编写一个程序来检查每个共享的 DACL。所以它需要保存当前所有者，获取所有权，读取 DACL 并恢复所有者。但在取得所有权之前，无法读取当前所有者。

我认为这种行为是设计使然。最初的意图是管理员能够获得所有权，但不能向对象的所有者隐瞒他们拥有的事实，尽管有一些方法可以解决这个问题。例如，对于文件，您可以通过启用备份权限、调用 BackupRead 并解析输出（一系列 WIN32_STREAM_ID 结构，每个结构后跟数据）来读取完整的安全描述符（包括所有者）。不知道有没有更简单的方法。

有关共享的信息存储在以下注册表中：

`SYSTEM\CurrentControlSet\Services\LanmanServer\Shares`

安全信息似乎存储在`Security`子键中，以共享命名的值。这个二进制值似乎是一个安全描述符，因此您可以使用[`GetSecurityDescriptorOwner`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446651%28v=vs.85%29.aspx). 您还可以从此安全描述符中读取所有其他安全信息，因此您根本不需要更改所有者。

# objective-c - 为什么我不能将其设置为字符串？

> ID：11384223
> 
> 赞同：2
> 
> 时间：2012-07-08T15:20:42.547
> 
> 标签：objective-c

我刚开始使用 obj-c 并创建了 2 个文件，一个 .h 和一个 .m 文件。.h 文件是..

```
#import <Foundation/Foundation.h>

@interface CardUnit : NSObject
{

@property (assign) NSString *name;
@property (assign) NSString *gold;
@end 
```

.m 文件是

```
#import "CardUnit.h"

@implementation CardUnit

@synthesize gold  = @"gold";
@synthesize name = _name;

@end 
```

但这给了我一个错误

```
@synthesize gold  = @"gold"; 
```

说“预期；综合后”

为什么我不能将其设置为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:55:24.640

`@synthesize`不用于给变量赋值，而是为变量定义基本 getter 和 setter 的简写。这

```
@synthesize var = _var 
```

语法用于说，“我希望你使用实例变量`_var`作为属性的内部变量`var`”。

如果要为属性分配默认字符串，请将其放入您的`init`方法中：

```
-(id)initWithName:(NSString*)name
{
  self = [super init];
  if(self)
  {
    self.gold = @"gold";
    self.name = name
  }
  return self;
} 
```

或者您可以在 getter 中设置默认值（根据@Mario 的评论如下）：

```
-(NSString*)gold 
{
  _gold ? return _gold : return @"gold";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:30:06.903

你`synthesize`错了。它不是用于分配值，而是用于生成默认的 setter/getter 方法，以防您不提供它们。您可以使用`property = ivar`来指定应将哪个 ivar 用于属性，但常量值不是 ivar。所以你不能以这种方式分配字符串值。有关详细信息，请查看[Obj-C 编程语言（属性实现指令）](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW13)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:32:29.470

为`@synthesize`属性生成 getter 和 setter，但编译器负责生成它们。

我认为阅读有关 iOS 开发的好教程是一个好主意，也许可以从Apple Developer 连接网站上的立即[开始开发 iOS 应用程序开始。](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:27:15.977

您不能在 @synthesize 声明中分配值。

@synthesize 是为变量设置 getter 和 setter 的声明。它不是用于分配值。

您应该稍后使用一种将值设置为“黄金”变量的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T15:27:17.397

您不应该在综合中为变量设置值。它们仅用于合成访问器方法。

# lucene - 在 RavenDB 中定义查询分析器

> ID：11384225
> 
> 赞同：1
> 
> 时间：2012-07-08T15:21:14.107
> 
> 标签：lucene, ravendb, analyzer

我用标准分析器创建了一个索引。
我知道在 Lucene 中，您也可以定义用于解析查询的分析器，以便它与索引的分析器匹配。

如何使用 RavenDB 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:21:58.780

您定义分析器，然后为相关字段注册它（您需要提供程序集限定名称）。

# c# - 如何使用 MVC4 中的所有查询字符串和哈希重定向移动设备？

> ID：11384226
> 
> 赞同：2
> 
> 时间：2012-07-08T15:21:25.053
> 
> 标签：c#, asp.net-mvc, c#-4.0, mobile, asp.net-mvc-4

我注意到在 MVC4 中，有一个名为 Request.Browser.IsMobileDevice 的内置方法。我如何使用它来检查请求是否是移动的，然后重定向到控制器和 /mobile/index 的操作？我想保留 URL 中的任何查询字符串和位置哈希。有没有内置的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:50:45.750

通常，您不希望为移动设备重定向到不同的控制器和操作，因为移动设备应该只需要同一模型的不同表示（您不希望复制控制器逻辑）。如果您使用扩展名创建视图`.Mobile.cshtml`（用于 C# Razor 视图），则 MVC4 将按照惯例将此视图用于移动设备。

例如，如果您的`Home`文件夹中有此视图

```
Index.cshtml 
```

通过将此视图添加到您的`Home`文件夹

```
Index.Mobile.cshtml 
```

MVC4 将`Index.Mobile.cshtml`在移动设备和`Index.cshtml`非移动设备上呈现。

也就是说，有时可能需要为移动设备做一些特定的事情。例如，如果您想要不同`_Layout.cshtml`的移动设备，您可以将以下内容放入您的`_ViewStart.cshtml`文件中

```
@{
    if(Request.Browser.IsMobileDevice)
    {
        Layout = "~/Views/Shared/_Layout.Mobile.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
} 
```

# qt - 在 Qt 中，如何全局设置 CodecForCStrings（在标题中）？

> ID：11384227
> 
> 赞同：1
> 
> 时间：2012-07-08T15:21:28.533
> 
> 标签：qt, utf-8, qstring

我正在用 C++ 开发一堆 Qt 应用程序，它们都使用一些模块（翻译单元）来实现也使用 Qt 的常见功能。

每当我将 C 字符串（隐式转换）或 C++ 字符串对象（fromStdString()）转换为 QString 对象时，我希望原始数据是 UTF-8 编码的，反之亦然（toStdString()）。

由于[默认值是 Latin-1](http://qt-project.org/doc/qt-4.8/qtextcodec.html#setCodecForCStrings)，我必须将编解码器“手动”（在我的每个程序的初始化过程中）设置为 UTF-8：

> QTextCodec::setCodecForCStrings(QTextCodec::codecForName("utf8"));

并非我的所有模块都有初始化过程。包含一个类的那些（我可以把这一行放在类构造函数中），但有些模块只包含一个带有很多函数的命名空间。所以 setCodecForCStrings() 没有位置。每当我隐式地从/转换为 QString 时（从我的一个模块中），我依赖于已经由主程序的 init 过程设置的编解码器，这似乎是一个相当糟糕的解决方案。

**有没有一种可靠的方法可以在我的模块中将编解码器设置为 UTF-8**，还是我必须非常小心不要使用隐式转换（至少在我的模块中）并编写类似 std::string(q .toUtf8().constData()) 而不是 q.toStdString()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:46:35.027

这可以使用自动实例化的单例类的类定义来完成，该类在其构造函数中有一些初始化代码：

```
class ModuleInit {
    static ModuleInit *instance;
public:
    ModuleInit() {
        QTextCodec::setCodecForCStrings(QTextCodec::codecForName("utf8"));
    }
};
ModuleInit * ModuleInit::instance = new ModuleInit(); // put this line in .cpp! 
```

将此代码*放在**任何*项目中的任何位置都会将文本编解码器设置为 UTF-8 。但是，您可以覆盖 main() 方法中的文本编解码器，因为上面的代码甚至*在*main() 方法之前执行。

对于“*任何地方*”，我当然是指在语法上允许的地方。将类定义放在某个头文件中，并将实例化放在适当的 .cpp 文件中。

您甚至可以将整个代码放在一个 .cpp 文件中，说明`moduleinit.cpp`您编译和链接的文件，但从不明确*使用*（没有可以包含的头文件......）。这也将避免除了第一个实例之外的意外实例化，并且您不会遇到重复类名的任何问题。

请注意，您**不能在一个特定文件中为 C 字符串设置编解码器**。使用设置编解码器`QTextCodec::setCodecForCString`将在应用程序范围内设置它！

# java - 使用带有 CDATA 部分的 Transformer 的 Java 格式 xml

> ID：11384238
> 
> 赞同：0
> 
> 时间：2012-07-08T15:22:27.120
> 
> 标签：java, xml, format

我想将字符串格式化为 xml 这是我的代码：

```
Source xmlInput = new StreamSource(new StringReader(input));
StringWriter stringWriter = new StringWriter();
StreamResult xmlOutput = new StreamResult(stringWriter);
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", String.valueOf(4));
transformer.transform(xmlInput, xmlOutput); 
```

这是我的字符串

```
 <a><attr name="a1">this is a test</attr><attr name="a2"><![CDATA[this is a test inside cdata part]]></attr></a> 
```

输出

```
<?xml version="1.0" encoding="UTF-8"?>
<a>
    <attr name="a1">this is a test</attr>
    <attr name="a2"><![CDATA[this is a test inside cdata part]]></attr>
</a> 
```

想要的

```
<?xml version="1.0" encoding="UTF-8"?>
<a>
    <attr name="a1">
        this is a test
    </attr>
    <attr name="a2">
        <![CDATA[this is a test inside cdata part]]>
    </attr>
</a> 
```

我希望每个新标签都以新行开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:49:37.010

规范中未定义 OutputKeys.INDENT 的精确效果。然而，规范的 XSLT 2.0 版本明确规定缩进只能在开始标记之前或结束标记之后添加空格——换句话说，非空格文本节点的值永远不会改变。

顺便说一句，规范中也没有定义 CDATA 将保留在 JAXP 身份转换中，我对发生这种情况感到有些惊讶。

# ubuntu - Oracle XE 10g Ubuntu 从 oracle 网站删除？

> ID：11384240
> 
> 赞同：3
> 
> 时间：2012-07-08T15:23:08.987
> 
> 标签：ubuntu, oracle10g, oracle-xe

我在 Oracle 网站上再也找不到 Oracle XE 10g。我正在使用 32 位 GNU/Linux Ubuntu 12.04。

他们的网站上只有 11g xe 版本，我无法在我的操作系统下安装。

有人有这个分布吗？

您能否与我分享链接，我可以从哪里下载此发行版？

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-23T17:19:55.077

用于 Oracle XE 10g 的 Debian 软件包仍可在以下位置获得：

```
https://oss.oracle.com/debian/dists/unstable/non-free/binary-i386/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T13:22:23.157

oracle.com 上的链接不再正式可用/链接/可见，但仍然存在：

```
http://download.oracle.com/otn/linux/oracle10g/xe/10201/oracle-xe_10.2.0.1-1.0_i386.deb 
```

如果您只是单击链接，则会收到一条错误消息，因此您必须

1.  登录 oracle.com，例如[http://www.oracle.com/technetwork/products/express-edition/downloads/index.html](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html)

2.  接受许可协议（设置cookies）并点击下载任何11g XE（不需要下载，启动后取消即可）

3.  将 URL 复制并粘贴`http://download.oracle.com/otn/linux/oracle10g/xe/10201/oracle-xe_10.2.0.1-1.0_i386.deb`到浏览器地址栏中，然后开始下载

4.  安装`sudo dpkg -i oracle-xe_10.2.0.1-1.0_i386.deb`等。

**该解决方案自 2012-07-24 起生效，不保证 .deb 文件将来可用，这是 Oracle 的决定。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T02:39:26.110

下载 Oracle XE 10g 的新网址来自：

[http://www.4shared.com/get/AnYhQhAD/oracle-xe_10201-10_i386.html](http://www.4shared.com/get/AnYhQhAD/oracle-xe_10201-10_i386.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-22T20:36:58.090

如果您需要 10g 的 rpm 包，您仍然可以在[http://ftp.cs.stanford.edu/pub/fedora/6/i386/](http://ftp.cs.stanford.edu/pub/fedora/6/i386/)找到它们。

我能够在 2014 年 8 月 22 日下载它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T09:55:15.583

对于 Ubuntu 64 位上的 Oracle XE 11g，请查看

[https://community.oracle.com/thread/2303639](https://community.oracle.com/thread/2303639)

您还可以在这里找到 Oracle 提供的虚拟机，以及满足您需求的软件包（天气数据库开发或 Java EE 开发）

甲骨文虚拟机：

[http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html](http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html)

预建虚拟机：

[http://www.oracle.com/technetwork/community/developer-vm/index.html](http://www.oracle.com/technetwork/community/developer-vm/index.html)

您可以在“数据库应用程序开发虚拟机”中找到 Oracle 数据库

# javascript - 字符串结尾的正则表达式测试？

> ID：11384254
> 
> 赞同：0
> 
> 时间：2012-07-08T15:24:46.040
> 
> 标签：javascript, regex, testing

我在 RegEx 上很糟糕，我需要一个正则表达式来测试某个字符串是否以某种方式结束。例如，如果 RegEx 测试以 foo 结尾，“somestringfoo” -> True 和“someotherFoostring” -> False。它需要区分大小写并使用字母数字和下划线。这是我所拥有的，但我无法让它工作：

```
var test = RegExp.test('/foo$/'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:28:53.247

你会这样做：

```
/foo$/.test("somestringfoo") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:28:53.057

这应该做的工作：

```
function isFoo(string){
  var pattern = /foo$/;  
  return pattern.test(string);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T15:42:05.130

[`test`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)是正则表达式对象的方法，所以它是`/foo$/.test(someString)`or `new Regexp("foo$").test(someString)`。

但是，测试以某个子字符串结尾的字符串不需要正则表达式，请参阅[JavaScript 中的 endsWith](https://stackoverflow.com/questions/280634/endswith-in-javascript)。

# javascript - Javascript：链接href目标

> ID：11384264
> 
> 赞同：0
> 
> 时间：2012-07-08T15:25:51.047
> 
> 标签：javascript, google-analytics, onclick, dom-events

我正在使用标准的 Google Analytics Javascript 代码来跟踪我网站上的出站链接：

```
 function recordOutboundLink(link, category, action) {
    _gat._getTrackerByName()._trackEvent(category, action);
    setTimeout('document.location = "' + link.href + '"', 100);
  } 
```

即使我添加`"target='_blank'`到我的链接，所有链接仍然在同一个窗口/选项卡中打开。我试过 add `'document.location.target'`，但脚本还没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:46:20.180

`document.location = newURL`将在现有窗口中打开 URL。您可以使用`window.open(newURL)`在新窗口中打开 URL。

其他几件事：

1.  `document.location`已被弃用——`location.href`改为使用。
2.  您可以通过不传入操作并从链接 href 获取来简化代码。

尝试以下

```
<a href='http://example.com' onclick="return recordOutboundLink(this, 'Outbound Link');">

function recordOutboundLink(link, category) {
  var url = link.href;
  _gat._getTrackerByName()._trackEvent(category, url);
  if (link.target == '_blank') 
    window.open(url);
  else 
    setTimeout(function() {location.href = url;}, 150);
  return false;
} 
```

仅供参考：为什么只使用 setTimeout 在现有窗口中打开 URL？开始在现有窗口中打开新 URL 可能会在分析跟踪像素请求完成之前停止它。如果您在新窗口中打开 URL，则无需延迟。

# delphi-2007 - Main Executable 运行 Launcher Executable，然后 Launcher 运行 Main Executable

> ID：11384265
> 
> 赞同：1
> 
> 时间：2012-07-08T15:25:52.227
> 
> 标签：delphi-2007

我有两个 .exe 程序，一个是游戏启动器，另一个是主可执行文件。如果有人打开它，我将如何让我的主要可执行文件运行游戏启动器。这将与 .dpr 文件和一些 Windows API 有关，我猜只是不确定从什么/从哪里开始说实话。

我想要这样的原因仅仅是因为，游戏启动器将用于更新游戏，然后在完成启动游戏时，人们将始终使用最新的 up2date 文件。

所以我也需要的功能是：我可以点击 Main Executable 或 Launcher Executable 两者都会打开 Launcher Executable，然后当更新/下载完成时，当用户单击 Start 按钮时，Launcher 将启动 Main Executable。

/谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:42:35.963

让主要的可执行文件启动代码查找您选择的命令行参数。`FindCmdLineSwitch()`您可以为此目的使用 RTL 的功能。如果该参数存在，则正常运行游戏。否则，使用 Win32`CreateProcess()`函数运行启动器可执行文件，然后自行退出。当启动器准备就绪时，它可以使用该`CreateProcess()`函数运行主可执行文件，将命令行参数传递给它来运行游戏。

例如：

主要.dpr：

```
Var
  SI: TStrartupInfo;
  PI: TProcessInformation;
Begin
  If not FindCmdLineSwitch('RunGameNow') then
  Begin
    ZeroMemory(@SI, SizeOf(SI));
    SI.cbSize := SizeOf(SI);
    ...
    If CreateProcess(nil, 'launcher.exe', nil, nil, False, 0, nil, nil, @SI, @PI) then
    Begin
     CloseHandle(PI.hThread);
     CloseHandle(PI.hProcess); 
    End;
    Exit;
  End;
  ... Run game normally...
End. 
```

启动器.dpr：

```
Begin
  ...
  CreateProcess(nil, 'main.exe /RunGameNow', nil, nil, False, 0, nil, nil, @SI, @PI)
  ...
End. 
```

# html - 让 div 填充居中容器旁边的空间

> ID：11384271
> 
> 赞同：0
> 
> 时间：2012-07-08T15:26:09.580
> 
> 标签：html, css

我有一个网页，其中包含一个带有内容的居中容器，我想在它旁边显示一个徽标。

布局如下： div - 容器。容器居中的位置，容器的div lef需要填满屏幕左边的宽度。

```
html, body {
 height: 100%;
 width: 100%;
}
#container {
 width: 800px;
 margin-left: auto;
 margin-right: auto;
 min-height: 100%;
}

<div id="container">

</div>
<div id="lef">
</div> 
```

带有此代码的 jsfiddle 可在[http://jsfiddle.net/7QJQn/上找到](http://jsfiddle.net/7QJQn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:46:40.353

这是关闭的选项

**[http://jsfiddle.net/7QJQn/4/](http://jsfiddle.net/7QJQn/4/)**

我认为做这样的事情的最佳解决方案就是使用 javascript / jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T16:20:56.107

根据您希望支持的浏览器，您可以使用 calc()。

基本上，您需要 50% 的视口宽度 (50vw) 减去 #container 宽度的一半（因此您从 #container 的中心测量并使用所有值的一半） - 我假设您重新确定绝对定位#lef 到视口以使其保持在右侧？

CSS（[在这里小提琴](http://jsfiddle.net/Jayx/7QJQn/46/)）：

```
#lef {
  background-color:yellow;
  width:calc(50vw - 100px);
  height:20px;
  position:absolute;
  right:0;
  top:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:29:11.703

将此添加到您的CSS：

```
#lef{
  float:left
} 
```

并更改 html 中 div 的顺序，如下所示：

```
<div id="lef"></div>
<div id="container"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:51:50.350

首先，您应该将标记包装在包装器中`div`，以便元素保持紧密。我做了一些改变，看看：

```
 <div id="wrapper">

  <div id="lef">

  </div>

  <div id="container">

  </div>

</div> 
```

​还有CSS：

```
 html, body {
 height: 100%;
 width: 100%;

}

#wrapper{

width: 360px;

}

#container {
 width: 200px;
 margin-left: auto;
 margin-right: auto;
 height: 100px;
 background-color:red;
}
#lef {
background-color:yellow;
width: 160px;;
height:100px;
float: left;
}​ 
```

[例子](http://jsfiddle.net/7QJQn/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-16T13:43:21.750

如果使用 flexbox 是一个选项，您可以使用 flex-grow 属性执行此操作：

使用以下标记

```
<div class="main-row">
  <div class="filler"></div>
  <div class="row-content">Fixed width centered div</div>
  <div class="filler"></div>
</div> 
```

您需要在填充 div 上设置 flex-grow: 1 。看到这个[小提琴](https://jsfiddle.net/ifourh/gnhxz97w/1/)。

# hibernate - 如何在hibernate中实现以下查询

> ID：11384272
> 
> 赞同：0
> 
> 时间：2012-07-08T15:26:10.547
> 
> 标签：hibernate

我有这样的查询

```
SELECT
  tableA.field1,
  SUM(tableB.field4) AS the_sum
FROM
  tableA 
  LEFT JOIN tableB ON tableA.field1 = tableB.field2
WHERE
  /* IN() for multiple possible vals. Use = if only 1 val needed
     and then the GROUP BY is unnecessary */
  tableA.field1 IN ('val1','val2',val3')
GROUP BY tableA.field1 
```

如何在休眠中实现以下查询？而且我还需要将值作为相应表的对象返回。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:49:23.933

查询几乎是相同的：

```
select a.field1, sum(b.field4) as the_sum
from EntityA a left join a.b
where a.field1 in ('val1', 'val2', 'val3')
group by a.field1 
```

这是假设从 EntityA 到 EntityB 的关联使用 a.field1 作为 b.field2 的外键（反之亦然）。如果没有这样的关联，那是不可能的。左连接仅适用于关联。

# mysql - mysql 查询的一个有趣案例“like 'xx'”

> ID：11384286
> 
> 赞同：7
> 
> 时间：2012-07-08T15:27:21.503
> 
> 标签：mysql, sql

我在 MySQL 查询 SQL 中发现了一个带有前缀字符串匹配的有趣案例；

我创建了这样的表；

```
CREATE TABLE `EpgInfo` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `title` varchar(100)  NULL NOT NULL DEFAUL '',
   PRIMARY KEY (`id`),
   KEY `title` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

然后，我为长度小于 20 的随机列标题插入了 1,000,000 行数据。

我使用 3 个这样的 SQL：

*   SQL #1：`select * from EpgInfo2 where title like "快" limit 1;`
*   SQL #2：`select * from EpgInfo2 where title = "中" limit 1;`
*   SQL #3：`select * from EpgInfo2 where title like "中" limit 1;`

我发现：

*   SQL #1 花费 0.2 秒。
*   SQL #2 和 SQL #3 花费 0.0 秒。我使用 show status like`%handl%`找到查询计划，我发现 SQL #1 扫描所有索引数据，SQL #2 和 SQL #3 没有。

**为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:25:58.023

用于`EXPLAIN`查看 MySQL 如何处理查询，它可能会为您提供线索。

另外，尝试一些其他字符。也许 MySQL 将其中之一误解为其中有一个百分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:36:40.607

“快”与“中”在表格中的“远”程度是多少？

如果“中”是查看的第一行，则第二个和第三个查询只需要查看一行。

如果另一行是最后一行，则需要扫描整个表。

# sql - 警告：Aqua Data Studio 中的聚合或其他 SET 操作会消除空值

> ID：11384292
> 
> 赞同：111
> 
> 时间：2012-07-08T15:28:03.240
> 
> 标签：sql, sql-server-2005

当数据为空并且显示结果时出现警告时出现问题。如何解决这个问题呢？。表中没有数据时如何将空数据更改为0？

这是我的代码：-

```
SELECT DISTINCT c.username             AS assigner_officer,
                d.description          AS ticketcategory,
                (SELECT Count(closed)
                 FROM   ticket
                 WHERE  assigned_to = c.user_id
                        AND closed IS NOT NULL
                 GROUP  BY assigned_to)closedcases,
                (SELECT Count(closed)
                 FROM   ticket
                 WHERE  assigned_to = c.user_id
                        AND closed IS NULL
                 GROUP  BY assigned_to)opencases
FROM   ticket a
       JOIN ticketlog b
         ON a.ticketid = b.ticketid
       JOIN access c
         ON a.assigned_to = c.user_id
       JOIN ticket_category d
         ON a.cat_code = d.id
       JOIN lookup_department e
         ON a.department_code = e.code 
```

结果如下所示：-

```
 Warnings: ---> 
   W (1): Warning: Null value is eliminated by an aggregate or other SET operation.
          <--- 
 assigner_officer     ticketcategory     closedcases     opencases    
 -------------------  -----------------  --------------  ------------ 
 abdulhafiz           Enquiry            (null)          0            
 affan                Enquiry            12              (null)       
 amirul               Enquiry            1               (null)       
 azrul_fahmi          Enquiry            45              0            
 Azwani               Enquiry            (null)          0            
 chai                 Enquiry            4               (null)       
 dalinawati           Enquiry            1               0            
 Emmy                 Complaints         (null)          0            
 Fadhlia              Enquiry            38              0            
 fairulhalif          Others             1               (null)       
 farikh               Enquiry            (null)          0            
 ismailh              Enquiry            28              0            
 izzahanna            Enquiry            (null)          0            
 Kamsuzilawati        Enquiry            1               (null) 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-08T13:42:15.950

您将主要使用`COUNT`UID 进行汇总。所以

`COUNT([uid])`将产生警告：

> 警告：空值被聚合或其他 SET 操作消除。

在与左连接一起使用时，其中计数对象不存在。

在这种情况下使用`COUNT(*)`也会产生不正确的结果，因为您将计算存在的结果（即父母）的总数。

使用`COUNT([uid])`IS 是一种有效的计数方式，警告无非是警告。但是，如果您担心，并且想要在这种情况下获得真实的 uid 计数，那么您可以使用：

```
SUM(CASE WHEN [uid] IS NULL THEN 0 ELSE 1 END) AS [new_count] 
```

这不会为您的查询增加很多开销。（测试 mssql 2008）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-05-02T13:59:54.723

解决此问题的一种方法是关闭警告。

```
SET ANSI_WARNINGS OFF;
GO 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-08T15:37:46.763

使用`ISNULL(field, 0)`它也可以与聚合一起使用：

```
ISNULL(count(field), 0) 
```

但是，您可能会考虑更改`count(field) to count(*)`

编辑：

尝试：

```
closedcases = ISNULL(
   (select count(closed) from ticket       
    where assigned_to = c.user_id and closed is not null       
    group by assigned_to), 0), 

opencases = ISNULL(
    (select count(closed) from ticket 
     where assigned_to = c.user_id and closed is null 
     group by assigned_to), 0), 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-12-10T15:05:40.620

你想把函数的`ISNULL`内部`COUNT`，而不是外部：

不好：`ISNULL(COUNT(field), 0)`

好的：`COUNT(ISNULL(field, 0))`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-28T11:32:24.127

我收到了这个错误；我只是`WHERE`为在子句中使用的字段添加了一个`count`子句。它解决了这个问题。注意：如果空值存在，检查它是否对报告很关键，因为它被排除在计数中。

旧查询：

```
select city, Count(Emp_ID) as Emp_Count 
from Emp_DB
group by city 
```

新查询：

```
select city, Count(Emp_ID) as Emp_Count 
from Emp_DB
where Emp_ID is not null
group by city 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-10-14T08:48:22.213

如果聚合函数中存在任何 Null 值，您将面临此问题。而不是下面的代码

```
 SELECT Count(closed)
  FROM   ticket
  WHERE  assigned_to = c.user_id
  AND closed IS NULL 
```

使用喜欢

```
SELECT Count(ISNULL(closed, 0))
  FROM   ticket
  WHERE  assigned_to = c.user_id
  AND closed IS NULL 
```

# html - div类最后一个div在html css下

> ID：11384293
> 
> 赞同：0
> 
> 时间：2012-07-08T15:28:16.687
> 
> 标签：html, css

如何防止最后一个 div （类）下降？我穿上`margin-right`。`.artist_wrap`我想当我把它放在`overflow: hidden`里面时，它会`#music_videos_wrap`消失。感谢任何会帮助我的人。

**HTML：**

```
<div id="music_videos_wrap">
    <div class="artist_wrap"></div>
    <div class="artist_wrap"></div>
    <div class="artist_wrap"></div>
    <div class="artist_wrap"></div>
</div> 
```

**CSS：**

```
#music_videos_wrap{
    float:left;
    margin:0 0 0 23px;
    width:944px;
    height: 257px;
    background-color: red;
    /*overflow:hidden;*/
}
.artist_wrap{
    float:left;
    width:190px;
    height:257px;
    background-color: green;
    margin:0 62px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:54:05.447

首先，您的测量有些错误，您需要将包装器设为 946px 宽以适合您想要的元素，或者更改 .artist_wrap 的宽度。修复该问题后，您可以将 margin-left:62px 设置为 .artist-wrapp 而不是右边距。这样你就可以在第一个孩子上使用 margin-left:0 （这比最后一个孩子更跨浏览器）：

```
.artist_wrap:first-child { margin-left:0; } 
```

见jsfiddle：http: [//jsfiddle.net/Rkp3Z/](http://jsfiddle.net/Rkp3Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:51:52.537

你的 .artist_wrap 宽度太大

你应该使用萤火虫并调整它，看看可以适合父母宽度的最大值是多少

[在这里你用 150px 作为宽度](http://jsfiddle.net/hBF2x/3/)

或从父宽度减去边距、边框和填充来计算

```
944px parents width / 4 divs = 236 width per artist child 
```

如果您为每个 .artist_wrap 放置右边距，则需要从宽度中减去此边距以使其适合父级的 944 px 宽度

这意味着 236 - 62 = 174px 作为artist_wrap 的宽度

[您还可以为 Artist_wrap 应用 margin:0 31px 以具有对称布局](http://jsfiddle.net/hBF2x/4/)

# c# - 检查实体框架 linq 结果中的项目

> ID：11384294
> 
> 赞同：4
> 
> 时间：2012-07-08T15:28:39.557
> 
> 标签：c#, linq, entity-framework-4

我正在尝试检查是否从实体框架查询返回任何结果，然后再对其进行操作，我正在尝试使用代码：-

```
var shoppingCartSessions = from c in context.ShoppingCartSessions where c.UserId == gUserID select c;
if (shoppingCartSessions.First() != null)
{
} 
```

但是我得到了错误

> 序列不包含任何元素

我检查了堆栈，发现可以替换`.First`为`.FirstOrDefault`但是我想检查这是否是检查元素是否存在的正确方法。有没有更好的方法而不是尝试获取项目然后检查它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T15:32:17.087

使用[`Any()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)：

```
var shoppingCartSessions = from c in context.ShoppingCartSessions 
                           where c.UserId == gUserID 
                           select c;
if (shoppingCartSessions.Any())
{
     //not empty
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T15:30:49.713

你试过检查`.Count() > 0`吗？

**编辑：** 正如 Mahmoud Gamal 所说，使用`Any()`应该会带来更好的性能，因为它将执行 EXISTS 查询，而不是数据库上的 COUNT()，并且您最终并不关心确切的数量。

# orchardcms - 继续退出果园

> ID：11384296
> 
> 赞同：0
> 
> 时间：2012-07-08T15:28:44.730
> 
> 标签：orchardcms

我已将 Orchard 部署到我的在线网络服务器。一切都很好，直到我登录仪表板并尝试创建页面等。我不断退出，Orchard 告诉我访问被拒绝。当我再次输入我的凭据时，我登录并能够查看该页面并继续。但是在点击了一些之后，我又退出了。在退出之前，似乎要等待很长时间。什么可能导致这种情况？

更新：我认为这是某种时间。要么是在 cookie 上，要么是服务器上的某个进程需要很长时间。总体而言，服务器上站点的性能并不是那么好。页面需要很长时间（几秒钟）才能加载。这是一个共享托管环境，所以很遗憾我无法访问服务器本身。但作为比较；我还在同一个盒子上运行 Wordpress 安装，这很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:25:16.633

第一个假设：你的共享主机太弱了，并且有严格的内存限制导致应用程序一直重启。修复：找一家像样的 ASP.NET 托管公司。他们的计划适用于 WordPress 等 PHP 应用程序并不能很好地表明他们的 ASP.NET 服务的质量。

第二个假设：您缺少机器密钥：[http ://docs.orchardproject.net/Documentation/Setting-up-a-machine-key](http://docs.orchardproject.net/Documentation/Setting-up-a-machine-key)

# vb.net - vb.net 使用子过程以辅助形式显示结果没有按钮单击

> ID：11384303
> 
> 赞同：0
> 
> 时间：2012-07-08T15:29:11.457
> 
> 标签：vb.net, forms

我是一名学生，试图找出从子过程返回的值加载表单。我发现的每个示例都与按钮单击事件相关联，因此我很难确定返回的参数。我认为我的程序的所有代码都是正确的，但周围有 ** 的部分除外。

```
 Private Sub Results_Load(ByVal sender As System.Object, **ByVal e As System.Windows.Forms.DialogResult**)

    DisplayNumbers()
    ShowResults() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:30:19.363

如果要从方法返回结果，请`Function`在 VB 中使用 a。

```
Private Function Square (ByVal x As Double) As Double
    Return x * x
End Function 
```

然后你可以调用它

```
Dim result As Double = Square(7.5) 
```

或以您的形式

```
ResultTextBox.Text = Square(CDbl(ValueTextBox.Text)).ToString() 
```

* * *

另一种可能性是将对象传递给`Sub`您“填充”结果的对象

```
Public Sub FillMyForm(ByVal frm As MyForm)
    frm.FirstNameTextBox.Text = "John"
    frm.LastNameTextBox.Text = "Doe"
End Sub 
```

如果这`Sub`是在模块中定义的，只需在您的表单中这样调用它

```
 FillMyForm(Me) 
```

# java - 了解不正确实施哈希码方法的负面影响

> ID：11384306
> 
> 赞同：0
> 
> 时间：2012-07-08T15:29:21.387
> 
> 标签：java, hashcode

我试图了解如果我们`hashCode()`错误地实施方法会面临哪些问题。

例如，我尝试创建一个示例类`HashEx`，该类为该类的所有实例静态返回相同的哈希值 (100)，然后尝试使用`HashEx`in `HashSet`/`HashMap`进行不同的操作：

```
HashSet -> add,read,contains
HashMap -> put,get 
```

到目前为止，所有操作似乎都运行良好。对这个疯狂的想法有什么想法吗？我试图了解这种错误的实施`hashCode()`会在哪里产生问题？

```
public class HashEx {

    public int id;
    public String name;

    public static void main(String[] args){

        HashEx e1 = new HashEx();
        e1.id=1;
        e1.name="Tom";

        HashEx e2 = new HashEx();
        e2.id=2;
        e2.name="Jerry";

        // set
        HashSet<HashEx> myset = new HashSet<HashEx>();
        myset.add(e1);
        myset.add(e2);

        System.out.println("Set size : "+ myset.size());
        for(HashEx e : myset){
            System.out.println("id: " + e.id + ", name: " + e.name);
        }

        HashEx e4 = new HashEx();
        e4.id = 2;
        e4.name = "Jerry";

        System.out.println("myset.contains(e4) : " + myset.contains(e4));

        // map
        HashMap<HashEx, String> map = new HashMap<HashEx, String>();

        map.put(e1, "Tom");
        map.put(e2, "Jerry");

        System.out.println("Map size : "+ map.size());
        System.out.println(map.get(e1));
        System.out.println(map.get(e2));
    }

    @Override
    public boolean equals(Object obj) {
        if(((HashEx)obj).id != id)
            return false;
        if(!((HashEx)obj).name.equals(name))
            return false;
        return true;
    }

    @Override
    public int hashCode() {
        return 100;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:36:25.753

一切都会*正常工作*（只要你`equals(Object)`在你的`HashEx`类中正确实现），你不会看到任何不正确的行为。

`HashSet`但是，当您在您的（或作为 a 中的键）中获得大量这些对象时`HashMap`，您将开始看到非常糟糕的性能。对象根据它们被放入桶中`hashCode`，并且每当完成其中一项收集操作时，都必须线性搜索同一桶中的所有对象。

因此，一个更好的测试来证明这个问题是编写一个循环，开始添加越来越多的对象（直到程序耗尽内存或你杀死它）并每 10,000 个对象打印一条状态消息。您会看到添加操作变得越来越慢（二次方）。

如果对象相反，`hashCode`那么操作根本不会减慢（很多），并且会更快地耗尽内存。

# ruby-on-rails - 从 SQLite3 迁移后试图理解 postgreSQL 数据库

> ID：11384307
> 
> 赞同：0
> 
> 时间：2012-07-08T15:29:26.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我曾经`SQLite3`在`PostgreSQL`. 然而，在这个[问题](https://stackoverflow.com/questions/11249059/generic-ruby-solution-for-sqlite3-like-or-postgresql-ilike)之后，我意识到拥有相同数据库用于开发和生产的重要性。

经过许多问题，我终于设法`PostgreSQL`在我的 Mac OS X Lion 10.7.4 上安装了。但是，我仍然面临一些问题：

*   使用`SQLite3`数据库的路径是在 上定义的`database.yml`，rails会在每个新项目中**自动创建。**
*   使用`PostgreSQL`数据库名称是在 上定义的`database.yml`，rails**不会**自动创建。

**我的问题：**

> 我应该为每个新项目创建一个新数据库，还是应该将其更改`database.yml`为包含所有项目的相同数据库？

我看到有人说计算机中的每个用户都应该有一个数据库，当使用`PostgreSQL`. 好吧，如果最佳实践是为每个项目创建一个数据库（我希望如此）......

> 有什么方法可以配置 rails 在每个新项目中自动创建新数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:51:48.653

创建数据库大多是一次性操作，所以为一个项目创建一次并没有什么大不了的。一个普通的 Postgresql 管理员可以使用 pgAdmin 图形工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:58:46.620

如果使用 Postgresql 进行开发，需要自己创建数据库。

但是你可以为 Postgresql 初始化你的项目。

```
rails new my_project -d postgresql 
```

祝你有美好的一天。

本杰明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:14:48.737

**问题解决了：**

我已经按照[本](http://www.youtube.com/watch?v=pf5jPUJAeU4)教程进行操作，我终于可以解决问题了。

我为我的`postgreSQL`调用创建了一个新用户，`user1`没有任何密码，所以每次创建新项目时，我只需要更改`database.yml`以下内容：

```
development:
  adapter: postgresql
  encoding: unicode
  database: newproject_development
  pool: 5
  username: user1 #I am changing this line
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: newproject_test
  pool: 5
  username: user1 #I am changing this line
  password:

production:
  adapter: postgresql
  encoding: unicode
  database: newproject_production
  pool: 5
  username: user1 #I am changing this line
  password: 
```

由于`user1`没有任何密码，现在我可以使用 Rails 创建表`rake`。

```
rake db:create:all 
```

# php - 图库加载缓慢

> ID：11384311
> 
> 赞同：0
> 
> 时间：2012-07-08T15:30:03.580
> 
> 标签：php

> **可能重复：**
> [php 生成的画廊中的缩略图加载缓慢](https://stackoverflow.com/questions/11384048/thumbnails-in-php-generated-gallery-loading-slow)

代码链接可以在页面底部找到。

该站点从 1and1.co.uk 基于 linux 的系统运行，足以比目前更快地加载图库。

php生成的缩略图加载有点慢，你能告诉我为什么吗？

[http://site-perf.com/cgi-bin/show.cgi?id=vz5le19Fp5E](http://site-perf.com/cgi-bin/show.cgi?id=vz5le19Fp5E)

代码： [http ://satinaweb.com/tmp/functions.txt](http://satinaweb.com/tmp/functions.txt)

这里是`crop.php`：

```
$sourceimage = $_GET['a'];

function crop($sourceimage) {
    // Draw & resize
    header('Content-Type: $imsz[\'mime\']');

    list($width, $height) = getimagesize($sourceimage);

    if($width > $height){
        $new_width = 100;
        $new_height = 75;
    } else {
        $new_width = 75;
        $new_height = 100;
    }

    $image = imagecreatefromjpeg($sourceimage);
    $image_p = imagecreatetruecolor($new_width, $new_height);

    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
    imagejpeg($image_p);
    imagedestroy($image_p);
    imagedestroy($image);
} 

crop($sourceimage); 
```

如果您有任何问题，请询问！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:32:30.147

您应该从您的网站性能图表中注意到的最多的是，

我不会查看您的所有代码，但您有一个名为`crop.php`. 这会很慢，因为它（可能）在每次页面加载时裁剪图像，这需要相对较长的时间（从站点性能数据中可以明显看出）；对于每个请求，浏览器花费大部分时间等待服务器响应。

您应该考虑使用缓存文件夹来存储裁剪的图像并按原样提供它们以减少加载时间。

在`crop.php`中，您可以执行以下操作（伪代码）：

```
IF original image newer than cropped OR cropped doesn't exist
    Load original image
    Crop original image
    Save cropped image to cache folder
ELSE
    Serve already-cropped image from cache
ENDIF 
```

* * *

每次调用时`crop()`，您都会读取图像，对其进行修改并将其吐出给客户端。这非常浪费，因为您需要为每个请求重新处理图像。之后你甚至会破坏图像（并不是说这有很大的不同）。相反，使用[`is_file()`](http://php.net/manual/en/function.is-file.php)缓存目录，并将图像保存到磁盘以及将其发送到客户端。

现在，您的脚本可能如下所示：

```
$sourceimage = $_GET['a'];

$cache_dir = dirname(__FILE__) . "/cache";        // Cache directory
$cache_file = $cache_dir . '/' . $source_image; // Path to cached image

function crop($sourceimage) {
    header('Content-Type: $imsz[\'mime\']');

    // If cached version of cropped image doesn't exist, create it
    if(!is_file($cache_file)) {     
        list($width, $height) = getimagesize($sourceimage);

        if($width > $height) {
            $new_width = 100;
            $new_height = 75;
        } else {
            $new_width = 75;
            $new_height = 100;
        }

        $image = imagecreatefromjpeg($sourceimage);
        $image_p = imagecreatetruecolor($new_width, $new_height);

        imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        imagejpeg($image_p, $cache_file);   // Save image file to disk
    } else {    // If cached file exists, output to browser without processing
        echo file_get_contents($cache_file);
    }
} 

crop($sourceimage); 
```

**这是未经测试的，但应该可以工作。**请不要只是复制粘贴上面的代码；通读它并确保您了解它是如何以及为什么这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:38:31.420

由于 HTTP 请求正在排队，您的页面加载缓慢。

尽管每个图像都很小，但请求花费了很大一部分时间排队，等待其他请求完成后再开始，在最坏的情况下，它们甚至在开始下载之前等待一秒半。

第二个延迟是由创建图像所花费的时间引起的。

在等待这些其他过程之后，实际下载几乎是即时的。

1.  排队 1600 毫秒
2.  等待 986 毫秒
3.  下载 0ms

与其每次都生成正确大小的图像，不如将结果存储起来以供后续访问使用——这意味着页面会慢一次，然后在所有其他时间都快得多。

如果您的脚本裁剪图像所花费的时间缩短了，那么排队时间也会缩短。这是一个例子......

1.  检入裁剪图像的文件夹
2.  如果存在，则提供它（无需计算）
3.  如果它不存在，则生成它
4.  将结果保存在文件夹中以缓存它

# ruby - 实例化和集合 - ruby

> ID：11384313
> 
> 赞同：0
> 
> 时间：2012-07-08T15:30:11.140
> 
> 标签：ruby

我是一个新手，正在努力通过测试。我有 3 个班级，艺术家、歌曲和流派。我试图通过的测试如下：

```
test 'A genre has many artists' do
 genre = Genre.new.tap{|g| g.name = 'rap'}

 [1,2].each do
  artist = Artist.new
  song = Song.new
  song.genre = genre
  artist.add_song(song)
 end

assert_equal genre.artists.count, 2
end 
```

这是我的艺术家课程，我需要调整 add_song 方法。当一首歌被添加到艺术家时，我试图实例化一个新的流派对象并将艺术家也添加到该流派中。虽然目前不工作，但当我调用genre.artists 时，它返回一个空数组。类艺术家 attr_accessor :name, :songs, :genres, :genre, :artists @@artists = []

```
 def initialize(name = name, genre = genre)
  @artists = []
  @songs = []
  @genre = genre
  @genres = []
  @name = name
  @@artists << self
 end

 def self.all
  @@artists
 end

 def self.reset_artists
  @@artists = []
 end

 def self.count
  self.all.size
 end

 def songs_count
  self.songs.size
 end

 def count
  self.size
  end

  def add_song(song)
   @songs << song
   @genres << song.genre
   Genre.new(self)
   end
  end

 class Genre
 attr_accessor :name, :songs, :artists
 @@genres = []

 def initialize(artists = artists)
  @songs = []
  @artists = artists
  @name = name
  @@genres << self
 end

 def count
  self.artists.count
  end

 def self.all
  @@genres
 end

 def self.reset_genres
  @@genre = []
 end 
end

class Song
attr_accessor :name, :genre, :artist

def initialize(name = name, artist = artist, genre = genre)
 @name = name
 @artist = artist
 @genre = genre
 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:56:34.463

您将在方法中返回一个使用当前艺术家创建一个新的流派实例`add_song`。你可以通过几种方式让你的测试通过。

这会将艺术家添加到歌曲实例中引用的流派。

```
def add_song(song)
  @songs << song
  @genres << song.genre
  song.genre.artists << self
end 
```

如果您想从 add_song 方法返回一个新的 Genre 实例，第二个选项将是修复您的测试。这很可能不是您想要的，但是这会将艺术家设置为流派中的参考。

```
test 'A genre has many artists' do
  genre = Genre.new.tap{|g| g.name = 'rap'}

 [1,2].each do
   art ist = Artist.new
   song = Song.new
   song.genre = genre
   genre = artist.add_song(song)
 end 

 assert_equal genre.artists.count, 2
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:51:03.737

当您创建一个新艺术家时，您将其添加到`Artist::artists`- 的类变量中`Artist`。您测试的数组是`genre.artists`- 的对象变量`Genre`。这是一个与 不同的变量`Artist::artists`，我没有看到你`genre.artists`在代码中的任何地方更新 - 我很惊讶它甚至是一个数组，看到你没有将它初始化为一个数组......

# django - 表单中的 django 单选按钮

> ID：11384315
> 
> 赞同：0
> 
> 时间：2012-07-08T15:30:19.603
> 
> 标签：django

我在 Django 中有一个表单，其中包含为用户提供各种属性的单选按钮。当管理员用户（在我的应用程序中......不是 django 管理员）想要编辑不同用户的属性时，列表中的所有用户都应该出现相同的表单对象。所以说有一个用户可能的权限列表，我有一个包含用户列表的表格，用户权限选项（单选按钮）应该出现在他们旁边。在表单中，我有一个具有所有可用权限的单选按钮选择字段。但是在视图中，如何让它为每个用户显示？另外，当有许多相同的表单对象时，如何设置初始数据？在某处有这样的例子吗？谢谢！

**[编辑]**

下面基本上是我想要展示的内容：

```
 <table class="admin_table">
        <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>User Permission</th>
        </tr>
        {% if users|length > 0 %}
            {% for user in users %}
                <tr>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>[RADIO BUTTONS]</td>
                </tr>
            {% endfor %}
        {% endif %}
    </table> 
```

我写的地方`[RADIO BUTTONS]`是我想显示多个单选按钮的地方，这些单选按钮应该为每个*用户*显示，而不是为整个表单显示。

另外，我在看这个网站：http: [//jacobian.org/writing/dynamic-form-generation/](http://jacobian.org/writing/dynamic-form-generation/)。不确定这是否是解决方案，但无论如何作者试图解决的问题非常有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:41:01.577

也许你可以尝试这样的事情：

关键是使用 为每个用户分组单选按钮输入`{{user.id}}`。您可以根据需要命名它们。

```
{% for user in users %}
    <tr>
      <td>{{ user.first_name }}</td>
      <td>{{ user.last_name }}</td>
      <td><input type="radio" name="user_{{user.id}}" value="Radio1" >Radio1</input></td>
    </tr>
{% endfor %} 
```

# java - 如何在 netbeans 中删除 @SuppressWarnings(“unused”)？

> ID：11384321
> 
> 赞同：0
> 
> 时间：2012-07-08T15:31:13.807
> 
> 标签：java, netbeans, suppress-warnings

我总是在很多代码中看到：

```
@SuppressWarnings("unused") 
```

如何删除我在 java 中使用的这些行（在 NetBeans IDE 中）：

```
@SuppressWarnings("unused")
String newName1 = input.next();         
@SuppressWarnings("unused")
String newFamily1 = input.next();           
String newGender1 = input.next();           
@SuppressWarnings("unused")
String arrow = input.next();        
@SuppressWarnings("unused")
String newName2 = input.next();         
@SuppressWarnings("unused")
String newFamily2 = input.next();
String newGender2 = input.next(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:57:53.637

如果您实际上并不需要该变量并且您只是想提前`input`调用`input.next()`并且不要将其分配给任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:34:35.617

搜索它并用“”替换所有

# php - 显示带有脚本的最新推文而不显示@replies

> ID：11384325
> 
> 赞同：0
> 
> 时间：2012-07-08T15:31:22.003
> 
> 标签：php, javascript, jquery, plugins, twitter

我正在使用来自[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)的脚本在网站上显示最新推文，代码示例 7 显示了我如何使用它来显示推文而不显示 @replies，我尝试了这个，但它没有不工作。当我这样做时，它不会显示任何内容。

另外，我怎样才能重新排序，以便在推文之后显示 tweet_time？

谢谢！

运行良好的代码，仅显示最新推文：

```
<script type='text/javascript'>
jQuery(function($){
    $(".tweet").tweet({
        username: "fearofmobs",
        join_text: "auto",
        count: 1,
        auto_join_text_default: "", 
        auto_join_text_ed: "we",
        auto_join_text_ing: "we were",
        auto_join_text_reply: "we replied to",
        auto_join_text_url: "we were checking out",
        loading_text: "loading tweets..."
    });
}); 
```

我想使用的代码应该省略@replies，但什么都不显示：

```
<script type='text/javascript'>
jQuery(function($){
    $("#filter").tweet({
      count: 1,
      fetch: 20,
      filter: function(t){ return ! /^@\w+/.test(t.tweet_raw_text); },
      username: "fearofmobs"
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:40:39.763

[这个 jsFiddle 看起来像你想要的——我做对了吗？](http://jsfiddle.net/hBF2x/1/)

```
jQuery(function($){
  $(".tweet").tweet({
    username: "fearofmobs",
    join_text: "auto",
    count: 20,
    auto_join_text_default: "",
    auto_join_text_ed: "we",
    auto_join_text_ing: "we were",
    auto_join_text_reply: "we replied to",
    auto_join_text_url: "we were checking out",
    loading_text: "loading tweets...",
    fetch: 20,
    filter: function(t){ return ! /^@\w+/.test(t.tweet_raw_text); }
  });
}); 
```

# android - 如何自定义 TimePicker 显示的项目？

> ID：11384327
> 
> 赞同：0
> 
> 时间：2012-07-08T15:31:40.130
> 
> 标签：android

我已经在 Android 中编程了一周，所以我的*理念*可能有点被其他 IDE 操纵。我习惯了 Visual C# 处理组件的风格——只需将它拖到屏幕上，然后在其菜单中选择可能的首选项。然而，这似乎在这里不起作用。

我的问题：我正在尝试制作一个简单的倒计时时钟，用户通过`timePicker`. 但为此，我需要与默认样式不同的样式。与其选择“真实”可能的时间，我希望它只有分钟和秒，按增量排序，因此用户可以选择“48 分钟，9 秒”并按确定。这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:52:42.990

好吧，这`TimePicker`意味着选择实际时间......而不是时间数量。因此，您不能使用`TimePicker`公共 SDK 中提供的内容来执行此操作。您将不得不制作自己的自定义视图。

为此，您可能会考虑尝试的一件事是让您的自定义`View`扩展`TimePicker`。也许您可以覆盖适当的方法以达到所需的行为。[**但是，这将需要您对源代码**](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/widget/TimePicker.java/)进行一些筛选。我也不是 100% 确定这是否可能，但似乎应该这样做。

# widget - Meebo Me 替换

> ID：11384330
> 
> 赞同：3
> 
> 时间：2012-07-08T15:31:51.530
> 
> 标签：widget, google-talk, msn-messenger, windows-live-messenger, meebo

随着谷歌最近收购 Meebo，Meebo Me 小部件也消失了。

我想有类似的功能。我可以放在我的网站上并允许来宾用户在我的 MSN (Live) 或我的计算机上的 Gtalk Messenger 上与我聊天的东西。如果它有类似的东西，它也可能是 Skype。

到目前为止，我一直在使用停止运行的 Google TalkBack 徽章（它只是加载[http://support.google.com](http://support.google.com)页面）。然后我使用了具有类似功能的 MeeboMe 小部件，尽管我必须运行 MeeboMe 通知程序。现在也没有了。我尝试了也可以使用的 Plugoo，但有时我添加为联系人的 buddy_plugoo 处于脱机状态，然后 Web 小部件也将我显示为“脱机”，即使我不是这样，它也不是很可靠。

我也有 2 个 gmail 帐户，并尝试通过 XMPP.php 连接到一个并向另一个发送消息 - 但它甚至无法连接。尝试了各种示例。如果能够连接并创建网络界面，我可以使用一个“转储”gmail 帐户与我的主帐户聊天。

那么您知道网站的一些替代小部件吗？我可以连接到我的桌面信使并与网站访问者聊天的东西，这样当访问者写一条消息时，它就会在我的信使中弹出。我也可以编写自己的应用程序，因为它不是太耗时 - 当访问者写消息并与他/她聊天时，我只需要基本通知。最好是免费的。

# windows - 是否可以有一个批处理文件来完成和运行程序？

> ID：11384331
> 
> 赞同：1
> 
> 时间：2012-07-08T15:31:53.430
> 
> 标签：windows, batch-file

是否可以制作批处理文件来编译 MS cobol 2.20 中的代码？

例如我有一个小程序，然后我想使用命令编译它

```
COBOL FILENAME; 
```

但我希望命令更短，这样我就不需要输入单词 COBOL。

这就是我要的。

例如像这样：

```
 C filename; //this will compile now the program 
```

为了运行程序，我还想使用一个字母。

```
 r filename; //this will run my program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:12:51.417

打开您喜欢的文本编辑器（例如记事本）并输入：

```
COBOL %1; 
```

现在将它作为**c.cmd**保存在与 COBOL 源文件所在的文件夹相同的文件夹中。

您现在可以输入

> c yourcobolfile.src

编译你的程序

运行你的程序：打开你最喜欢的文本编辑器（例如记事本）并输入：

```
RUN %1 
```

现在将其另存为**r.cmd**与 COBOL 源文件所在的文件夹相同。

您现在可以输入

> r 你的cobol文件

运行你的程序

# javascript - 以正确格式插入时 Javascript 无法正常工作

> ID：11384336
> 
> 赞同：2
> 
> 时间：2012-07-08T15:32:51.407
> 
> 标签：javascript, html

`<!doctype html>` 我正在开发一个网页，并在页面上使用一些 javascripts 来移动一些 html 元素，但我发现当页面顶部或任何类型的`<!doctype>`s 添加到页面顶部时，javascript 代码不起作用！这是什么错误？

我在谷歌上搜索，我发现`<!doctype html>`即使stackoverflow源代码也有正确的格式，但是当我使用它时，javascripts不工作，但当它删除脚本工作正常&html对象正在移动，但我的样式因为删除而消失了`<!doctype html>`

```
<!doctype html>   when this line removed it works(html element is moving)
<html>
<head>
    <script type="text/javascript">

        function scrollDiv(){
                  var obj = document.getElementById("movingDiv");
                  obj.style.left = 100;
                  obj.style.top = 10;
                  }

                document.onclick = scrollDiv;

    </script>
</head>
<body  class="body">
<div class="maindiv" id="mainDiv">
  <div class="html_js_code" style="text-align:center;">

  <div id="movingDiv" style="position:absolute;left:100pt;top:10pt;border:1px blue 

outset;width:160px;background-color:lightyellow;font-weight:bold;">Moving Div</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T15:35:55.943

如果没有 doctype，浏览器会假定未标记的长度以像素为单位。对于 doctype，它们需要一个明确的单元。

```
obj.style.left = "100px";
obj.style.top = "10px"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T15:40:17.783

你也忘了把括号放在你调用的函数的末尾。我也很确定你错误地通过了它。我相信它应该是这样的：

```
document.onclick = scrollDiv(); 
```

或者

```
document.onclick(scrollDiv()); 
```

# java - 休眠聚合

> ID：11384338
> 
> 赞同：0
> 
> 时间：2012-07-08T15:32:53.137
> 
> 标签：java, hibernate, hibernate-annotations

是否有可能直接从休眠中得到这个......

```
List<Map<Sth, List<SthLog> list; 
```

当类以这种方式（不是双向）映射时？：

```
@Entity
public class SthLog {

        @ManyToOne(fetch=FetchType.LAZY, cascade=CascadeType.ALL)
    private Sth sth; } 
```

我知道这似乎是一个愚蠢的问题，因为通常您可以添加双向映射，但在这种情况下，我可以更改实体定义，我想知道是否可以直接从 hibernate 获取所需的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:22:28.350

只是不要指望 Hibernate 会为您做所有事情。将 List 转换为 Map（或 Guava Multimap，这里更简单、更合适）只需 3 行代码：

```
// get all the SthLog with their sth
List<SthLog> list = 
    session.createQuery("select s from SthLog s inner join fetch s.sth").list();
// index them by their sth
ListMultimap<Sth, SthLog> result = ArrayListMultimap.create();
for (SthLog sthLog : list) {
    result.put(sthLog.getSth(), sthLog);
} 
```

# java - 在java中如何避免多个if else与isAssignableFrom的映射

> ID：11384341
> 
> 赞同：3
> 
> 时间：2012-07-08T15:33:08.610
> 
> 标签：java

我想避免if else，在java中这个：

```
 for (Class clazz : method.getParameterTypes()) {
  if (SomeClass.class.isAssignableFrom(clazz)) {
      arguments[i] = onearg;
    } else if (SomeOtherClass.class.isAssignableFrom(clazz)) {
      arguments[i] = someotherarg;
    }
 } 
```

谁能建议如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:50:49.553

您可以将类及其参数存储在 a 中`Map<Class<?>, Object>`并迭代映射，这将用一个 if 语句的迭代循环替换 if-else 构造。

例如像这样：

```
Map<Class<?>, Object> map = ... /* initialize */

for (Class cls : method.getParameterTypes()) {  
     for (Entry<Class<?>, Object> candidate : map.entrySet()) {
          if (candidate.getKey().isAssignableFrom(cls)) {
               arguments[i] = candidate.getValue()
               break; // continue with the next parameter type
          }
     }
} 
```

具体实现取决于您的类。如果地图中的类彼此之间**没有关系**（例如超类、子类、接口等），那么您可以直接应用代码。否则，正如*bestsss*所指出的，您应该坚持超类/接口迭代以**保留类层次结构**。

您可以进一步调查[Java Annotations](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)，尽管我不能 100% 确定如何在您的案例中应用它们，而无需进一步详细说明要求。你可以用参数注释你的超类

```
@Argument("onearg")
public class SomeClass {
     /* ... */
} 
```

并在迭代期间获取方法参数类型的超类，[`cls.getSuperClass()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getSuperclass%28%29)然后检索带注释的参数值进行赋值。

# javascript - 使用纯 JavaScript 的类禁用鼠标双击

> ID：11384342
> 
> 赞同：1
> 
> 时间：2012-07-08T15:33:52.717
> 
> 标签：javascript

我想禁用某些元素的双击，最好的方法是为此使用一个特殊的类。

我发现[这个](https://stackoverflow.com/questions/5241981/disable-mouse-double-click-using-javascript-or-jquery)简单而简短的 jQuery 解决方案正是我想要的，但我需要纯 JavaScript 代码。

可能的？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:41:36.987

自从我直接使用 jQuery 免费 javascript 以来已经很久了，但你想要的是这些方面的东西

```
var elements = document.getElementsByClassName("MyClassName");

for (var element in elements){
    element.ondblclick = function(e){
         return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:37:56.860

```
for (var element in document.getElementsByClassName('disable-click')) {
    element.onclick = function(e){
        e.preventDefault();
    }
} 
```

# windows-phone-7 - 如何缩短 StoryBoard DoubleAnimation 的 KeyTime 值

> ID：11384346
> 
> 赞同：0
> 
> 时间：2012-07-08T15:35:33.450
> 
> 标签：windows-phone-7, storyboard

我想更改我的 DoubleAnimation 的 KeyTimes。我有 5 个 KeyTime，我将它们全部命名为 Key1、Key2、Key3 等。

DoubleAnimation 称为 xAnimation。有谁知道我可以如何更改 KeyTimes？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:38:20.197

如果你需要相同的动画，你只需要设置一个更高的速度比，只是更快或更慢。

将其设置为：

```
myStoryboard.SpeedRatio=2; 
```

上面的示例将以两倍的速度播放动画。您可以相应地使用更高或更低的数字。

# java - 如何将日期格式更改为另一种？

> ID：11384348
> 
> 赞同：0
> 
> 时间：2012-07-08T15:35:37.757
> 
> 标签：java, android

从数据库中，我得到一个格式如下的日期

2012-7-8

但我想把它转换成这样

2012 年 7 月 8 日

但我无法做到这一点，有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:41:06.293

您必须首先使用 SimpleDateFormat 对象解析日期，将字符串从数据库转换为 Date 对象。然后，您应使用 SimpleDateFormat 的另一个实例格式化此日期对象，将日期对象转换为字符串，并根据您的选择进行格式化。

您可以查看SimpleDateFormat 的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)以获取有关如何指定格式的详细信息。

```
public class DateFormatTest {
public static void main(String[] args) throws ParseException {
    String dateFromDatebase = "2012-7-8";

    SimpleDateFormat databaseFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = databaseFormat.parse(dateFromDatebase);

    SimpleDateFormat targetFormat = new SimpleDateFormat("yyyy MMMMM d");
    String formattedDate = targetFormat.format(date);

    System.out.println(dateFromDatebase + " -> " + formattedDate);

}} 
```

这输出`2012-7-8 -> 2012 July 8`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:37:54.433

您可以使用[简单的日期格式化程序](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:25:52.807

试试这个.....只需一行代码......

```
public class Test {

    public static void main(String[] args){

     System.out.println(new SimpleDateFormat("YYYY MMM dd").format(new Date()));
      }
  } 
```

# sqlite - Scrapy SQLite3错误？

> ID：11384349
> 
> 赞同：0
> 
> 时间：2012-07-08T15:35:41.733
> 
> 标签：sqlite, scrapy

我写了一个蜘蛛，需要将项目存储在 SQLite3 数据库中，但每次我得到一个错误。请帮助我，因为我现在卡住了！这是蜘蛛代码：

```
response_fld=response.url
text_input=hxs.select("//input[(@id or @name) and (@type = 'text' )]/@id ").extract() 
pass_input=hxs.select("//input[(@id or @name) and (@type = 'password')]/@id").extract()     
file_input=hxs.select("//input[(@id or @name) and (@type = 'file')]/@id").extract() 
```

以 JSON 格式输出：

```
{"pass_input": ["tbPassword"], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/Signup.aspx", "text_input": ["tbUsername"]}
{"pass_input": [], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/default.aspx", "text_input": []}
{"pass_input": ["tbPassword"], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/login.aspx", "text_input": ["tbUsername"]}
{"pass_input": [], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/Comments.aspx?id=0", "text_input": []} 
```

管道代码：

```
import sqlite3
from os import path

class SQLiteStorePipeline(object):

    def __init__(self):
        self.conn = sqlite3.connect('./project.db')
        self.cur = self.conn.cursor()

    def process_item(self, domain, item):
        self.cur.execute("insert into links (link) values(item['response_fld'][0]") 
        self.cur.execute("insert into inputs ( input_name) values(item['text_input'][0];")
        self.cur.execute("insert into inputs ( input_name) values(item['pass_input'][0];")
        self.cur.execute("insert into inputs ( input_name) values(item['file_input'][0];")
        self.conn.commit()
        return item

    def handle_error(self, e):
        log.err(e) 
```

错误：

```
File "/home/abdallah/isa/isa/pipelines.py", line 22, in process_item
    self.cur.execute("insert into links (link) values(item['response_fld'][0]")
sqlite3.OperationalError: near "['response_fld']": syntax error 
```

数据库方案：

```
CREATE TABLE "Targets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT, "domain" TEXT);

CREATE TABLE "Links" ("id" INTEGER PRIMARY KEY AUTOINCREMENT, "link" TEXT, "target" INT, FOREIGN KEY (target) REFERENCES Targets(id));

CREATE TABLE "Input_Types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT, "type" TEXT);

CREATE TABLE "Inputs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT, "input_name" TEXT, "link_id" INT, "input_type" INT, FOREIGN KEY (input_type) REFERENCES Input_Types(id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:03:30.570

这是您的无效 SQL 查询：

```
self.cur.execute("insert into links (link) values(item['response_fld'][0]") 
```

根据[文档](http://docs.python.org/library/sqlite3.html)，您应该这样做：

```
self.cur.execute("insert into links (link) values(?)", (item['response_fld'][0], )) 
```

# android - 网络接收器不工作

> ID：11384352
> 
> 赞同：0
> 
> 时间：2012-07-08T15:35:52.857
> 
> 标签：android

我尝试实现网络接收器，这是我的以下代码：

```
 package com.example.androidtablayout;

 import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.net.ConnectivityManager;
 import android.net.NetworkInfo;
 import android.util.Log;

public class NetworkReceiver extends BroadcastReceiver { // <1>
 public static final String TAG = "NetworkReceiver";
 boolean isConnected = true;
Context c;
 @Override
 public void onReceive(Context context, Intent intent) {

  boolean isNetworkDown = intent.getBooleanExtra(
    ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);  // <2>

  if (isNetworkDown) {
    Log.d(TAG, "onReceive: NOT connected, stopping UpdaterService");
   // context.stopService(new Intent(context, UpdaterService.class)); // <3>
   } else {
       Log.d(TAG, "onReceive: connected, starting UpdaterService");
   //  context.startService(new Intent(context, UpdaterService.class)); // <4>
    }
  }

 } 
```

在 Manifest.xml 中

```
 <application>
       <receiver android:name=".NetworkReceiver">
    <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
      </receiver> 
   </application>

  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我的问题是当我关闭wifi时，日志仍然显示“已连接”，

我认为网络接收器没有正确接收互联网连接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:14:39.237

[这](http://code.google.com/p/krvarma-android-samples/source/browse/trunk/ConnectionTest/src/com/varma/samples/conntest/MainActivity.java)是一个示例类，向您展示如何做到这一点。我认为这正是您所需要的，它可能有助于解决您的问题。在此示例中，BroadcastReceiver 以编程方式注册而不是 Manifest，但我认为这对您来说不是问题。

让我知道是否有效。

# rally - 在集会上设置规则/触发器

> ID：11384354
> 
> 赞同：1
> 
> 时间：2012-07-08T15:36:03.827
> 
> 标签：rally

有谁知道是否可以定义规则或触发反弹？

例如，仅当定义字段 Y 时才需要字段 X 等等？

另外，有没有办法创建一个像计划估计字段一样的字段？我想定义自定义 QA 估计字段，并希望在更改子 QA 估计后对其进行更新（这在计划估计字段中自动发生，但我希望在我的自定义字段中具有此功能。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:07:13.417

目前在 Rally 中无法自定义规则和工作流程，尽管它是一个流行的功能请求。我建议您登录[Rally Ideas](http://ideas.rallydev.com)，并将您和您的队友的投票和评论添加到以下想法中：

[将可定义的工作流实施添加到工作领域以实施敏捷流程](http://ideas.rallydev.com/ideas/D966)

这将提高 Rally 的产品所有者和可用性团队对该功能请求的可见性。

# eclipse - 尽管程序运行，但 Cuda eclipse 和 time.h，符号“CLOCK_PROCESS_CPUTIME_ID”无法解析

> ID：11384355
> 
> 赞同：0
> 
> 时间：2012-07-08T15:36:07.587
> 
> 标签：eclipse, cuda, header-files, nsight

我承认，这并不是真正的问题，而是更烦人的事情：基本上在由 Cuda 工具包安装的 Eclipse 编辑器中，我正在使用这个功能：

```
/* Get current value of clock CLOCK_ID and store it in TP.  */
extern int clock_gettime (clockid_t __clock_id, struct timespec *__tp) __THROW; 
```

如下：

```
clock_gettime((clockid_t)CLOCK_PROCESS_CPUTIME_ID, &time1); 
```

“问题”是`CLOCK_PROCESS_CPUTIME_ID`没有解决，然后整个项目显示为包含一些错误，但如果我编译并运行，完全没有问题

我已经包括了这个

```
#include <time.h>
#include <iostream> 
```

我还包括了 rt 库。如何使错误消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:58:46.650

您需要将包含添加到项目的首选项中：

右键单击您的项目，选择*General/Paths and Symbols*。在那里，您可以添加将由 Nsight 浏览的自定义包含目录以查找符号。

# c# - 如何通过特定的 ip 地址发送 httpwebrequests

> ID：11384356
> 
> 赞同：0
> 
> 时间：2012-07-08T15:36:25.443
> 
> 标签：c#, httpwebrequest, ip

昨天，我收到了一封邮件，宣布微型亚马逊 EC2 实例能够拥有多达 8 个 IP 地址。

假设我正在其中一个实例上运行应用程序。我正在使用 httpwebrequest 访问网站。如何控制请求来自哪个 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:39:06.770

取自[这个问题](https://stackoverflow.com/questions/3345387/how-to-change-originating-ip-in-httpwebrequest)

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://stackoverflow.com");

req.ServicePoint.BindIPEndPointDelegate = delegate(
ServicePoint servicePoint,
IPEndPoint remoteEndPoint,
int retryCount) {

if (remoteEndPoint.AddressFamily == System.Net.Sockets.AddressFamily.InterNetworkV6) {
    return new IPEndPoint(IPAddress.IPv6Any, 0);
} else {
    return new IPEndPoint(IPAddress.Any, 0);
}

};

Console.WriteLine(req.GetResponse().ResponseUri); 
```

# compiler-optimization - SSA 中的副作用跟踪

> ID：11384358
> 
> 赞同：0
> 
> 时间：2012-07-08T15:36:27.690
> 
> 标签：compiler-optimization, side-effects, state-monad, ssa

我正在研究 Java 字节码的优化器，并决定使用 SSA。然而，大多数优化要求所有操作都是纯函数式的，因此为了处理副作用，我决定为每个可能产生副作用的操作添加一个额外的不透明状态参数和返回值。这将防止优化或重新排序具有副作用的操作。例如，忽略异常处理，你会得到类似这个伪代码的东西。

```
function arguments: x1, e1
if x1 != 0
    x2 = add(x1, 3)
    x3, e2 = invoke(foo, x2, e1)
x4 = phi(x1, x3)
e3 = phi(e1, e2)
return x4, e3 
```

我在做什么有名字吗？这是一个好方法吗？听说函数式语言有一个概念叫Monads，听上去很像但又不一样。使用单子是更好的方法吗？如果是这样，我该如何修改它以使用单子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:55:15.583

这太长了，无法放在评论中，但这并不是真正的答案..

公司称它为“记忆边缘”，可能还有更多的名字。我听说它被称为“显式状态传递”，但谷歌似乎不同意。

但我不同意你的前提——大多数 SSA 优化在存在副作用的情况下工作得很好（有时可能有点笨拙）。*不起作用*的是使用图形表示而不明确副作用（显然顺序会消失）。但是您只需要一些东西来明确该顺序 - SSA 也可以用作“操作列表”，其中顺序只是固定的（可能在显式重新排序阶段除外），但在这种情况下，它仍然可以更容易制作效果显式（导致优化等方面的特殊情况减少）。

这是一个很好的方法。我不知道它与 Monads 有什么关系，我不理解它们，我可能永远也不会。

# linux - 如何抑制 GNU octave 中的警告

> ID：11384359
> 
> 赞同：12
> 
> 时间：2012-07-08T15:36:36.100
> 
> 标签：linux, octave, suppress-warnings

**我正在使用 Octave 版本 3.4.3，并收到以下警告：**

```
warning: fmincg.m: 
possible Matlab-style short-circut operator at line 104, column 20 
```

我知道为什么会出现这个警告，我只是想让警告在运行时不会出现在屏幕上。

我知道我可以通过将此命令放在八度程序的顶部来抑制所有警告：

```
warning('off','all'); 
```

但这会禁用所有错误形式的警告。如何只禁用这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-08T15:44:00.213

**在 GNU Octave 中按警告类型禁用警告：**

请参阅此处的警告列表及其警告 ID 和名称：“12.2.2 启用和禁用警告”部分。 [https://octave.sourceforge.io/octave/function/warning_ids.html](https://octave.sourceforge.io/octave/function/warning_ids.html)

警告名称和 id 使用 octave 命令列出：

```
help warning_ids 
```

**在警告发生之前将此命令放入您的 octave 程序中：**

```
warning('off', 'Octave:possible-matlab-short-circuit-operator'); 
```

**或禁用所有警告**

```
warning('off', 'all'); 
```

注意：如果您的警告是在您的脚本运行之前由 octave 解释器本身抛出的，那么您将不得不采取不同的方法。例如 use `octave yourfile.m 2>/dev/null`which 也有重定向 octave 引擎和脚本的 stderr 的不幸副作用。

**某些警告会终止进程，并且无法抑制，必须对其进行补救：**

像这个：

```
warning: function /home/el/octave/multicore-0.2.15/gethostname.m 
         shadows a built-in function 
```

要解决此问题，请将 /home/el/octave/multicore-0.2.15/gethostname.m 重命名为 /home/el/octave/multicore-0.2.15/gethostname_backup.m。警告消失了。这是软件中的一个错误，其中两个文件具有相同的名称，因此程序不知道该使用哪个文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-23T16:30:35.743

要找出警告的 ID，只需发出

```
[text, id] = lastwarn() 
```

警告发生后直接。`id`现在包含警告的 id，可用于将其关闭：

```
warning('off', id) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-09T02:11:04.040

通过两个简单的步骤使您的更改持久化：

1.  成为根
2.  将命令附加到文件 (/usr/share/octave/site/m/startup/octaverc)，它将在启动时执行任何 Octave 命令。

    `echo "warning('off','Octave:shadowed-function')" >> /usr/share/octave/site/m/startup/octaverc`

我也喜欢持久地自动加载所有包：

```
echo "pkg load all" >> /usr/share/octave/site/m/startup/octaverc 
```

注意：按照这个顺序，否则你从加载所有包中得到的任何阴影功能警告仍然会出现。

您的文件现在应该包含

```
warning('off','Octave:shadowed-function')
pkg load all 
```

感谢[Gunther Struyf](https://stackoverflow.com/users/1162609/gunther-struyf)告诉我们如何关闭阴影功能警告（上图）。参考：[https ://wiki.archlinux.org/index.php/Octave](https://wiki.archlinux.org/index.php/Octave)

# javascript - checkValidity 更新 UI

> ID：11384376
> 
> 赞同：17
> 
> 时间：2012-07-08T15:38:46.320
> 
> 标签：javascript, html, css, validation

当我们尝试提交 HTML5 表单时，如果一个或多个必填字段缺少值或发生其他错误（类型或长度不匹配），它会阻止表单提交。UI 更新为突出显示的无效字段，并且第一个无效字段被聚焦。此外，第一个无效字段附有一个带有错误消息的气球/气泡。

现在，如果它是一个 Ajax 表单，我们调用 myForm.checkValidity() 在调度 Ajax 调用之前确认错误。但是在调用 checkValidity() 时，它不会影响突出显示无效字段并附加气泡的 UI。

有没有办法调用浏览器的本机行为进行验证，所以我们可以看到气球以及突出显示和聚焦的无效字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T03:22:32.990

只需触发实际的表单提交 - [http://jsfiddle.net/tj_vantoll/ZN29S/](http://jsfiddle.net/tj_vantoll/ZN29S/)。

实际的表单提交将运行`checkValidity`，显示气泡错误，`invalid`必要时调用事件处理程序等。

要确保表单实际上不会提交，您只需将`submit`事件处理程序附加到`<form>`阻止默认操作的事件处理程序，然后执行 AJAX 调用。

这是有效的，因为`submit`除非表单满足其所有约束（即具有有效数据），否则不会触发事件。`checkValidity`因此，不需要显式调用。

**编辑 (11/7/12) 以解决评论。**

在这种情况下，通过*实际的表单提交*，我只是指使用提交按钮完成的非 AJAX 提交。要显示本机气泡并将焦点更改为适当的表单元素，这是实现此目的的唯一方法。如果没有提交按钮，您可以隐藏一个并使用它来触发提交；[它仍然可以工作](http://jsfiddle.net/tj_vantoll/rwgk9/)。

我同意这种方法不太理想，但它确实适用于[所有支持的浏览器](http://caniuse.com/#feat=form-validation)。使用此 hack 而不是调用的唯一原因`form.submit()`是因为`form.submit()`不会触发本机验证。对我来说，这里的问题不是没有 API 来触发验证，而是调用`form.submit()`没有。规范说，只要“*用户代理需要静态验证表单元素表单的约束*”，就应该运行[约束验证](http://www.whatwg.org/specs/web-apps/current-work/#constraint-validation)。我不知道为什么调用不适用。*`form.submit()`*

 *应该注意的是，`checkValidity`DOES 通过与本机表单提交相同的[算法运行。](http://www.whatwg.org/specs/web-apps/current-work/#constraint-validation)因此，您可以自由[关闭默认气泡](http://www.html5rocks.com/en/tutorials/forms/constraintvalidation/#toc-inline-bubbles)并实现自己的。例如像[这样](http://jsfiddle.net/tj_vantoll/gAZe5/)的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-20T15:02:19.543

自 2012 年以来，时间已经过去，现在有一种`reportValidity()`方法。

> 如果元素的子控件满足其验证约束，则该`HTMLFormElement.reportValidity()`方法返回。`true`返回时`false`，会为每个无效子级触发可取消`invalid`事件，并向用户报告验证问题。

[MDN 上的](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation#Constraint_validation_process)更多详细信息。

这适用于 Chrome (40+)、Edge (17+)、Firefox (49+)、Opera 和 Safari，但**不适用于 IE**。*

# lua - 用一行增加lua中的多个值

> ID：11384379
> 
> 赞同：1
> 
> 时间：2012-07-08T15:40:00.157
> 
> 标签：lua

所以我在 lua 中做一个对象来控制和移动子对象，我想知道是否要减少代码行，我可以在一个语句中增加多个值。这是整个函数：

```
function ElephantEarC:SetOffset(x, y)
    local oiX, oiY -- Offset increase X/Y
    for i, stem in pairs(self.stems) do
        oiX, oiY = stem.low:GetOffset()
        oiX, oiY += x, y
    end
end 
```

我想知道这条线是否有效：

```
oiX, oiY += x, y 
```

关于此代码的一些信息

*   self.stems 是子对象的数组。
*   GetOffset() 返回两个值——x 和 y。
*   每个“茎”都有三个组合在一起的子对象——低、高和叶（我只是还没有把它们写进去）。

如果还有什么不清楚的，或者这个问题已经回答了但我找不到，请告诉我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:44:39.730

我不认为该行的语法`+=`是有效的。但是，这将正确地在一行上执行添加：

```
oiX, oiY = oiX+x, oiY+y 
```

# javascript - 为什么我无法使用正常工作 URL 加载 JavaScript 脚本？

> ID：11384380
> 
> 赞同：1
> 
> 时间：2012-07-08T15:40:03.800
> 
> 标签：javascript, html

当我把这条线

```
<script type="text/javascript" src="http://static.citygridmedia.com/ads/scripts/v2/loader.js"></script> 
```

到我的 html 文件（内部或外部`<head></head>`），我收到失败的 GET 请求。（同样的小提琴经验[http://jsfiddle.net/6fznd/](http://jsfiddle.net/6fznd/)）

![在此处输入图像描述](../Images/e6c6141ce63266fe2e3d3b8b543c643f.png)

但是，如果我直接在浏览器上打开这个链接，一切看起来都很正常（当我打开这个链接时我看到了脚本： http: [//static.citygridmedia.com/ads/scripts/v2/loader.js](http://static.citygridmedia.com/ads/scripts/v2/loader.js)）。

为什么我无法在 html 页面上加载此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:51:56.973

这里加载正常，即使在 jsFiddle 中也是如此。也许您的互联网遇到了一些奇怪的问题。

![在此处输入图像描述](../Images/aac59d39adb5a6d08931b4bf4b3ded4e.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T15:44:52.883

你在哪里编译这段代码。如果您使用 coda 之类的东西，出于安全原因，您可能会遇到运行外部托管的 javascript 的问题。您的javascript也可能存在问题。我会使用 jquery 来获取请求。

# database - 在“qsn 和评论”表中加入“员工”和“客户”实体？

> ID：11384382
> 
> 赞同：0
> 
> 时间：2012-07-08T15:40:05.287
> 
> 标签：database, entity-relationship

我想制作一张可以将这 4 种关系连接在一起的表格。问题是客户可以提出很多问题，员工可以回答问题，并且双方都可以对问题发表评论。

```
 1   m
 Question ------ Comment 
```

如何添加员工和客户实体？

我的看起来像这样，但我发现我的关系有点奇怪

```
 1   m
 Question ------ Comment 
    |               |
    | m             | m
    |               |
    | 1             | 1  
    |               |        
  Customer        Staff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:15:03.967

> 客户可以提出很多问题，员工可以回复问题，并且双方都可以对问题发表评论

您的实体是客户、员工、问题、*回复*（您在图表中省略了）和评论。

您可以考虑定义一个*User*实体，它是 Customer 和 Staff 的“超类”（在面向对象的术语中）。一些 RDBMS-es 支持一种表继承，例如[PostgreSQL](http://www.postgresql.org/docs/9.2/interactive/ddl-inherit.html)，或者您必须通过外键自己实现它，或者只拥有一个带有“type”列的 User 表，您可以将其设置为“customer”或“staff” ”。这是实现细节。但是，您选择实现这一点：

1.  客户可能会创建问题，并且它们之间存在 1:N 的关系。
2.  员工可以创建回复项目，它们之间又是 1:N 的关系。
3.  一个问题可能有多个答复。
4.  一个问题可能有很多评论。
5.  用户（即客户和员工）可以创建评论。同样，一个用户可能有很多评论，一个问题也可能有很多评论。

这些似乎是您的实体及其关系。希望这会有所帮助，并且不会太晚（很可能您同时也想通了:-)）。

# javascript - 为什么mac chrome上的选择框不响应点击事件？

> ID：11384389
> 
> 赞同：4
> 
> 时间：2012-07-08T15:40:48.237
> 
> 标签：javascript, jquery, html, macos

> **可能重复：**
> [JQuery 函数不适用于 Mac 上的 Chrome，但适用于 Win 7 和所有其他浏览器的 Chrome](https://stackoverflow.com/questions/8295642/jquery-function-doesnt-work-on-chrome-on-mac-but-works-on-chrome-on-win-7-and)

我有一个选择 - 选项列表

```
<div class="social-option">
    <select name="hex_theme_options[social-service-1]">
        <option selected="selected" value="facebook">facebook</option>
        <option value="0"></option>
        <option value="twitter">twitter</option>
        <option value="linkedin">linkedin</option>
        <option value="e-mail">e-mail</option>
        <option value="phone">phone</option>
        <option value="instagram">instagram</option>
        <option value="flickr">flickr</option>
        <option value="dribbble">dribbble</option>
        <option value="skype">skype</option>
        <option value="picasa">picasa</option>
        <option value="google-plus">google-plus</option>
        <option value="forrst">forrst</option>
    </select>
</div> 
```

为什么这在 PC 上有效，但在 mac 上无效？

```
$('.social-option select').on('click', function () {
    alert('bla');
}); 
```

[http://jsfiddle.net/4BBcZ/](http://jsfiddle.net/4BBcZ/)

**更新**
我需要**在 click**事件上使用，而不是**在 change 上**使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T15:53:37.663

改用`change`事件：

```
$('.social-option select').on('change', function () {
    alert('bla');
}); 
```

从[文档中](http://api.jquery.com/change/)：

> 当元素的值改变时，change 事件被发送到元素。此事件仅限于元素、框和元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。

IIRC，该`click`事件`<option>`在 Firefox 中适用于 s，但在 Chrome 中不起作用。最好的、最受支持的事件是`change`.

要获取所选选项的值，只需`.val()`像使用任何其他输入一样使用：

```
$('.social-option select').on('change', function () {
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T15:52:29.600

而不是“点击”事件，使用“更改”，如

```
 $(".social-option select").change(function(){
       alert('bla');    
    }); 
```

[堆栈溢出参考](https://stackoverflow.com/questions/8295642/jquery-function-doesnt-work-on-chrome-on-mac-but-works-on-chrome-on-win-7-and)

# python - 使用循环变量在 matplotlib 中指定颜色

> ID：11384391
> 
> 赞同：5
> 
> 时间：2012-07-08T15:41:00.860
> 
> 标签：python, matplotlib

我有很多数据文件，我想将它们全部绘制在同一个图上，但颜色不同。我正在使用以下代码

```
from pylab import loadtxt, average, std, argsort
from os import listdir
from fnmatch import fnmatch
import matplotlib.pyplot as plt

a=[]
for file in listdir('.'):
   if fnmatch(file,'A10data*'):
      a+=[str(file)]

for file in a:
  T,m_abs, m_abs_err,m_phy,m_phy_err = loadtxt(file,unpack=True)
  T_sort = argsort(T)
  plt.xlim(0.00009,10.1)
  plt.ylim(-1,350)

  plt.semilogx(T[T_sort],m_abs[T_sort],'ro-')
  plt.errorbar(T[T_sort],m_abs[T_sort],yerr=m_abs_err[T_sort],fmt='ro')
  plt.semilogx(T[T_sort],m_phy[T_sort],'r^-')
  plt.errorbar(T[T_sort],m_phy[T_sort],yerr=m_phy_err[T_sort],fmt='r^')

plt.show() 
```

可能我可以使用整数并使用整数来指定绘图的颜色。有人可以帮我语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:59:06.690

如果文件/绘图的数量很小，您可以制作一个与上面称为 a 的数组长度相同的颜色数组：类似于：

```
 colors = ["red", "blue" , "green", "orange", "purple"]
ncolor = 0
for file in a:
    plt.semilogx(T[T_sort], m_abs[T_sort], 'o-', color=colors[ncolor])
    ncolor+=1 
```

# telerik - telerik radcombobox“OnClientTextChange”事件不会触发

> ID：11384398
> 
> 赞同：1
> 
> 时间：2012-07-08T15:41:51.383
> 
> 标签：telerik, radcombobox

我基于 Telerik 示例编写了以下代码：

```
<telerik:RadComboBox ID="rcbPageSize"   
runat="Server"   
skin="Gray"  
AllowCustomText="true"  
Style="float:right; margin-left: 5px;"   
Width="60px" 
OnClientTextChange = "PageSizeChanged"
OnClientSelectedIndexChange =  "PageSizeChanged">

<Items>
    <telerik:RadComboBoxItem runat="Server" Text="10" Value="10" />
    <telerik:RadComboBoxItem runat="Server" Text="20" Value="20" Selected="true" />
    <telerik:RadComboBoxItem runat="Server" Text="50" Value="50" />
    <telerik:RadComboBoxItem runat="Server" Text="150" Value="150" />
    <telerik:RadComboBoxItem runat="Server" Text="250" Value="250" />
</Items>

</telerik:RadComboBox>

<telerik:RadCodeBlock ID="rcb" runat="server">

 <script type="text/javascript">

    function PageSizeChanged(sender, eventArgs) {

        alert("You typed " + sender.get_text());

    }

</script>
</telerik:RadCodeBlock> 
```

当我更改选择时，会调用函数“PageSizeChanged”，但是当我通过在组合框中键入来更改文本时，永远不会调用该函数。

任何人有一个建议为什么？谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:26:06.750

I find it's definitely a 'feature' of this Telerik control. If you use your code, type something, press enter and then click outside the box the event will fire.

Just pressing enter or just clicking outside don't fire it on their own.

I'm using a slightly newer version of the Telerik controls as the skin Gray has been deprecated but I'm assuming it will be the same in your version.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:37:44.483

OnClientTextChange 不会触发，直到用户按 Enter 键或在 RadComboBox 外部单击。在这里这么说：[http ://www.telerik.com/help/aspnet-ajax/combobox-onclienttextchange.html](http://www.telerik.com/help/aspnet-ajax/combobox-onclienttextchange.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T08:43:10.770

您必须设置 AutoPostBack="true"，才能触发服务器事件。

```
<telerik:RadComboBox ID="rcbPageSize"  
AutoPostBack="true" 
runat="Server"   
skin="Gray"  
AllowCustomText="true"  
Style="float:right; margin-left: 5px;"   
Width="60px" 
OnClientTextChange = "PageSizeChanged"
OnClientSelectedIndexChange =  "PageSizeChanged"> 
```

# xml - Xquery：获取上一周的日期

> ID：11384402
> 
> 赞同：2
> 
> 时间：2012-07-08T15:42:18.517
> 
> 标签：xml, xpath, xquery, xpath-2.0

是否可以在 xquery 中获取前一周的天数（周一至周日）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:16:44.440

**另一种解决方案，恰好是纯 XPath 2.0 表达式**：

```
for $vSunday in xs:date('2012-07-08'),
    $thisWeekDay in
       abs((current-date() - $vSunday) div xs:dayTimeDuration('P1D'))
      mod 7 +1,
    $lastWeekSunday in
       current-date() - xs:dayTimeDuration(concat('P',$thisWeekDay+7,'D')),
    $i in 1 to 7,
    $d in $lastWeekSunday + xs:dayTimeDuration(concat('P', $i, 'D'))
  return
    (concat(year-from-date($d),
            '-', month-from-date($d),
            '-', day-from-date($d)),
     ('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday')
                                                                        [$i],
     '&#xA;') 
```

**今天（2012-07-08）运行时，结果是**：

```
 2012-7-1 Sunday 
 2012-7-2 Monday 
 2012-7-3 Tuesday 
 2012-7-4 Wednesday 
 2012-7-5 Thursday 
 2012-7-6 Friday 
 2012-7-7 Saturday 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:55:36.413

看看[FunctX XQuery Library](http://www.xqueryfunctions.com/xq/c0002.html)，它们提供了一个很好的概述以及一些额外的日期函数。

使用这种模式来例如。计算 7 天前的日期：

```
fn:current-date() - xs:dayTimeDuration('P7D') 
```

[FunctX'`day-of-week()`](http://www.xqueryfunctions.com/xq/functx_day-of-week.html)将帮助您计算日期的星期几。

由于解析整个 FunctX 库会使您的查询变得非常慢（取决于您的 XQuery 引擎），因此可能只复制您需要的代码。

此代码将返回过去 7 天的工作日（上周被视为一个时期）。`functx:day-of-week`该代码包括 Gunther在评论中描述的修复：

```
declare namespace functx = "http://www.functx.com"; 
declare function functx:day-of-week 
  ( $date as xs:anyAtomicType? )  as xs:integer? {

  if (empty($date))
  then ()
  else xs:integer((xs:date($date) - adjust-date-to-timezone(xs:date('1901-01-06'), timezone-from-date(xs:date($date)))
          div xs:dayTimeDuration('P1D')) mod 7
 } ;

for $day in 1 to 7
let $date := fn:current-date() - xs:dayTimeDuration(concat('P', 8-$day, 'D'))
return <day date="{ $date }">{ functx:day-of-week($date) }</day> 
```

如果这不是您正在寻找的（请始终在您的问题中包含您考虑过的一些代码、输入和预期输出），我相信您将能够对其进行更改以满足您的需求。

# python - 有一个接受所有字符的 url

> ID：11384407
> 
> 赞同：19
> 
> 时间：2012-07-08T15:43:38.493
> 
> 标签：python, django

我想要一个接受所有字符的网址，例如：

```
(r'^company/(?P<key>[a-zA-Z]+)/doclist/$','CompanyHub.views.docList') 
```

for`key`参数，而不仅仅是 ascii 字母字符 它接受所有字符，包括数字、符号，如 $、-、_、...、字母、unicode 字符、...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-08T15:50:23.627

您的代码应如下所示：

```
(ur'^company/(?P<key>.*)/doclist/$','CompanyHub.views.docList') 
```

我们需要在开头的 'u' 告诉 python 该字符串接受 unicode 字符。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-08T15:46:58.620

正则表达式看起来像这样：

```
(.*) 
```

这应该匹配除换行符以外的所有字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-09T15:50:23.280

正如其他人所说：

```
(.*) 
```

...将匹配所有字符，但它也会匹配一个空字符串（如果正则表达式位于 URL 的末尾，这可能会很糟糕）。如果您想强制要求至少一个字符，请使用以下命令：

```
(.+) 
```

为了清楚起见，这些在 URL 的中间和末尾都有效，所以像这样的东西非常有效：

```
url(ur'^package\/(?P<pkgname>.+)\/(?P<pkgversion>.+)', ... ) 
```

（正如@tsikov 所说，使用前面的 'u' 表示 unicode）

# ios - ios - 编码一个 url 字符串并通过 NSURLConnection 和 NSURLRequest 发送它会出错

> ID：11384409
> 
> 赞同：0
> 
> 时间：2012-07-08T15:43:43.803
> 
> 标签：ios, ios5, nsurlconnection

我正在尝试使用以下代码进行远程服务器调用：

```
- (IBAction)login:(id)sender 
{    
    // Arguments are subject and body.
    NSString *urlString = @"my_url";

    NSString *email = self.email.text;
    NSString *password = self.password.text;

    NSString *url_to_send = [NSString stringWithFormat:urlString , email , password];;     

    NSString *escapedString = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                                  (__bridge CFStringRef)url_to_send,
                                                                                  NULL,
                                                                                  (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                                  kCFStringEncodingUTF8);

    // Now send to the server    
    NSURL *url = [NSURL URLWithString:escapedString];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    // ***************
    // TODO: ok I dont really understand what this is
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    // **************

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {                  
         NSLog(@"This is data: %@" , data);
         NSLog(@"This is response: %@" , response);
         NSLog(@"This is error: %@" , error);

         if ( error == nil )
         {
             // Display a message to the screen.
         }
         else
         if ([data length] > 0 && error == nil)
         {
                 // Do something
         }
         else 
         {
             // Do something else                         
         }
     }];    
} 
```

如果我不对 URL 进行编码，它实际上会返回而没有错误。但是，如果我对 url 进行编码，则会出现以下错误：

```
This is data: (null)
2012-07-08 11:10:56.110 BusinessPlan[1630:14603] This is response: (null)
2012-07-08 11:10:56.111 BusinessPlan[1630:14603] This is error: Error Domain=NSURLErrorDomain Code=-1002 "unsupported URL" UserInfo=0x684a180 {NSErrorFailingURLStringKey=My_encoded_url, NSErrorFailingURLKey=my_encoded_url, NSLocalizedDescription=unsupported URL, NSUnderlyingError=0x6895d00 "unsupported URL"} 
```

这个错误是什么意思？我编码不正确吗？此外，当我不对其进行编码时，数据和响应对象会返回值，但我不确定如何从这些对象中获取这些值。我如何知道这些对象中有哪些数据？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:52:58.650

问题是您正在编码整个字符串，其中包括方案和 URI 元素。您可能只想对 URL 的查询部分进行编码。

例如，如果您的 URL 是`http://www.example.com/whatever?u=jason&p=pass.!!`，则您希望对查询部分进行编码，但仅此而已。此示例的正确编码 URL 如下所示：

`http://www.example.com/whatever?u=jason&p=pass%2E%21%21`

由于您只是对整个字符串进行编码，因此您将得到以下结果：

`http%3A%2F%2Fwww%2Eexample%2Ecom%2Fwhatever%3Fu%3Djason%26p%3Dpass%2E%21%21`

这不是一个有效的 URL。而不是转义整个字符串，只需转义您的查询部分。如果您的后端服务器可以处理它，您可以构建和转义整个查询字符串，因为只有您的服务器会解析该部分。如果由于任何原因它无法处理它，您将不得不只转义查询字符串的键和值部分。

# jakarta-ee - 为什么在使用 RESOURCE_LOCAL 事务时必须在 persistence.xml 中指定实体的类名？

> ID：11384411
> 
> 赞同：0
> 
> 时间：2012-07-08T15:43:55.190
> 
> 标签：jakarta-ee, jpa, eclipselink

我将 GlassFish 3.1.2 与 Eclipse 4.2 一起使用。如果我使用 指定 JTA 事务类型，我可以很高兴地添加一个新类，如果我添加注释`jta-data-source`，它将被读取为实体。 现在，如果我将事务类型更改为，将数据源更改为非 jta，并添加必要的代码来检索我将调用的 和，我收到一个错误：我的实体不是已知的实体类型。为了解决这个问题，我必须将我的实体添加到persistence.xml 中列出的类中。 现在，这解决了我的问题，但我不明白为什么。根据规范，除非指定，否则持久性根中的所有注释类都应由持久性单元管理。所以我将交易类型更改为`@Entity`
`RESOURCE_LOCAL``EntityManager``EntityTransaction``begin()``commit()`
`exclude-unlisted-classes``RESOURCE_LOCAL`应该没有区别。
有人有答案吗？

编辑：一些额外的信息。我有一些导致错误的简单代码，它是在数据库中保存货币。持久化以以下形式完成：

```
@Named( "newCurrencyForm2" )
@RequestScoped
public class NewCurrencyForm
{
    public Currency getCurrency()
    {
        return currency;
    }

    public void createCurrency()
    {
        EntityManagerFactory factory = Persistence.createEntityManagerFactory( "foo" );
        EntityManager manager = factory.createEntityManager();
        EntityTransaction transaction = manager.getTransaction();

        transaction.begin();
        manager.persist( currency );
        manager.getTransaction().commit();
    }

    private Currency currency = new Currency();
} 
```

堆栈跟踪是：

java.lang.IllegalArgumentException：对象：com.test.Currency@24cce2eb 不是已知的实体类型。在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4169) 在 org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440) 在 com.test.NewCurrencyForm.createCurrency (NewCurrencyForm.java:26) 在 com.test.NewCurrencyForm$Proxy$_$$ *WeldClientProxy.createCurrency(NewCurrencyForm$Proxy$*$$_WeldClientProxy.java) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java .lang.reflect.Method.invoke(Method.java:601) 在 com.sun.el.parser.AstValue.invoke(AstValue.java:254) 在 com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302 ) at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39) at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50) at com.sun.faces.facelets。 el.TagMethodExpression.invoke(TagMethodExpression.java:105) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) 在 com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) 在 javax.faces.component.UICommand.broadcast(UICommand.java:315) 在 javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot .java:794) 在 javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) 在 com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) 在 com.sun.faces.lifecycle。 Phase.doPhase(Phase.java:101) at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) at org.apache .catalina.core.StandardWrapper.service(StandardWrapper.java:1542) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) 在 org.apache.catalina.core.StandardContextValve。在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) 调用(StandardContextValve.java:175) .catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java :231) 在 com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) 在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195 ) 在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746) 在 com.sun.grizzly.http.ProcessorTask 的 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)。在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun.grizzly 的 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) 的进程(ProcessorTask.java:1045) .DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com. sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com .sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun.grizzly.util.AbstractThreadPool$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行(AbstractThreadPool.java:513)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:54:28.223

我对正在发生的事情的猜测是，当您将事务类型作为您正在注入的 JTA 或使用容器管理的持久性单元时。但是，当您使用 RESOURCE_LOCAL 时，您正在管理自己的持久性单元，可能使用 Persistence.createEntityManagerFactory()。

我也猜想你永远不会在你的 EntityManagerFactory 上调用 close()，而是将你的持久性单元重新部署到实时服务器。

我的猜测是，如果您重新启动服务器，或者在重新部署之前关闭（）您的 EntityManagerFactory，您的 RESOURCE_LOCAL 配置将起作用。最有可能发生的是带有旧类的旧持久性单元仍然存在，因此没有新类。

还要确保在进行更改时重新构建 jar 并正确重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:48:54.993

# 分析

持久性单元的事务类型与托管持久类无关。

> **托管持久类**
> 
> JPA 要求注册所有用户定义的持久类（实体类、可嵌入类和映射的超类），它们被 JPA 称为托管类，作为持久性单元定义的一部分。

# 解决方案

如果您的 Currency 类是 JPA 管理的持久类，那么您需要在[persistence.xml](http://www.objectdb.com/java/jpa/entity/persistence-unit#persistence.xml)中指定此类的完全限定名称：

```
<class>com.test.Currency</class> 
```

这将在持久性单元中注册它并将其识别为已知的实体类型。

# database - 数据库ERD设计：一张表2种用户

> ID：11384413
> 
> 赞同：1
> 
> 时间：2012-07-08T15:44:01.993
> 
> 标签：database, entity-relationship, erd

我读过这个（[数据库设计：3种类型的用户，单独的还是一张表？](https://stackoverflow.com/questions/8479252/database-design-3-types-of-users-separate-or-one-table)）

我决定将管理员和普通用户放在一个表中，因为属性相似：

*   全名，
*   地址，
*   电话，
*   电子邮件，
*   性别
*   ...

然后我想画ERD，突然脑子里冒出一个问题。如何绘制？

客户预约，管理员批准预约。现在只有两张桌子。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T02:07:59.847

员工表 - 客户表 - 约会表 自加入关系 员工有经理 ID

# android - 无法在设备“emulator-5554”上安装 myapp.apk

> ID：11384414
> 
> 赞同：3
> 
> 时间：2012-07-08T15:44:03.257
> 
> 标签：android, android-emulator

我正在尝试运行一个 android 应用程序，但它将这三行显示为红色。

```
[2012-07-08 20:39:23 - myapp] Failed to install myapp.apk on device 'emulator-5554': An attempt was made to access a socket in a way forbidden by its access permissions
[2012-07-08 20:39:23 - myapp] java.io.IOException: An attempt was made to access a socket in a way forbidden by its access permissions
[2012-07-08 20:39:23 - myapp] Launch canceled! 
```

我已将工具和平台文件夹放入环境变量中，并尝试了所有可以做的事情，但没有任何改变。

我试过手动安装它，它说“adb install myapp.apk”，我明白了

```
protocol error
rm failed for /data/local/tmp/myapp.apk, No such file or directory 
```

已编辑：我无法使用我得到的 SDK 管理器安装任何东西

```
Fetching URL: http://developer.sonymobile.com/edk/android/repository.xml
Permission denied: recv failed
Done. Nothing was installed. 
```

请帮我解决它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T09:47:19.023

尝试 window->show view->devices->view menu->Reset adb 并再次运行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:26:37.610

亚行的两个主要原因`protocol error`是：

1.  Zombie ADB 进程（例如`adb.exe`在 Windows 的任务管理器中或仅`adb`在 Linux 中`ps -aux`）
2.  默认 ADB 端口（例如 5037、5554、5555 等）被其他进程占用。

对于这两个问题，最简单的解决方案是杀死僵尸进程或端口阻塞进程。我在这里解释了 Windows 和 Linux 的步骤：[adb kill-server not respond?](https://stackoverflow.com/questions/8790421/adb-kill-server-not-responding/14421633#14421633)

您也可以尝试`ADB`使用非默认端口启动。此处解释了这些步骤：[更改 adb 服务器运行的默认端口（即 5037）](https://stackoverflow.com/questions/3836571/changing-default-port-i-e-5037-on-which-adb-server-runs)

在 Windows 上，我开始不知不觉地解决这个问题，让我发疯。我很高兴我能找到问题的根源。希望这对你也有帮助。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T22:22:43.040

遇到同样的问题，原来只是因为我使用的是 USB 延长线。删除它修复了它。

# php - 无法使用 ini_set，因为会话处于活动状态

> ID：11384416
> 
> 赞同：5
> 
> 时间：2012-07-08T15:44:27.907
> 
> 标签：php, session, ini-set

我怎样才能解决这个问题？

> 警告：ini_set() [function.ini-set]：会话处于活动状态。此时您无法在第 3 行的 C:\xampp\htdocs** ******* *** ****** .php 中更改会话模块的 ini 设置

我已经尝试过使用`session_destroy();`但我仍然得到错误。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:43:57.410

使用`session_start();`after`ini_set`或**@sign** before `ini_set`：`@ini_set`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T17:43:04.343

如果您的服务器配置为自动启动会话，您也可以尝试：

```
php_flag session.auto_start 0 
```

在您的 .htaccess 文件中

# c# - Crystal 报表查看器未出现在工具箱中 - Visual Studio 2010

> ID：11384420
> 
> 赞同：4
> 
> 时间：2012-07-08T15:44:41.587
> 
> 标签：c#, visual-studio-2010, visual-studio, crystal-reports, crystal-reports-2010

我有 ac# windows 窗体应用程序，在安装 SAP Crystal Report for Visual Studio 2010 (http://www.businessobjects.com/jump/xi/crvs2010/default.asp) 后，我在工具箱中看不到 Crystal Report Viewer。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T02:02:58.813

检查您创建的项目的目标框架。默认情况下，新的 WinForms 项目设置为*.NET Framework 4 Client Profile。*要解决您的问题，请将其更改为*.NET Framework 4。*

为此，请右键单击您的项目并选择属性。在 Application 选项卡上设置 Target Framework 下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T10:45:34.630

安装水晶报表后，如果工具箱的报表中没有显示，请右键单击工具箱中的报表并选择选择项目，它将打开一个窗口。在该窗口中选择.NET Framework组件，它将刷新列表，检查列表需要CrystalReportSource、CrystalReportSource 等。现在可以在Reporting Menu 下的toolbox 中看到Crystal Reports 工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T06:21:05.447

您需要首先将您的框架更改***为 .net 框架 4.0*** 链接[http://www.aspsnippets.com/Articles/Crystal-Report-Viewer-missing-from-ToolBox-in-Visual-Studio-2010.aspx](http://www.aspsnippets.com/Articles/Crystal-Report-Viewer-missing-from-ToolBox-in-Visual-Studio-2010.aspx)

 **更改框架后需要安装 Crystal Report Runtime [http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

**您还可以在运行时创建水晶报表...**

```
[In VB.Net]

Imports CrystalDecisions.Windows.Forms

Private Sub CrystalView_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try
        Dim crv As New CrystalReportViewer
        With crv
            .Dock = DockStyle.Fill
        End With
        Me.Controls.Add(crv)
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub

[In C#]
using CrystalDecisions.Windows.Forms;
public class CrystalView
{
    private void CrystalView_Load(System.Object sender, System.EventArgs e)
    {
        try {
            CrystalReportViewer crv = new CrystalReportViewer();
             crv.Dock = DockStyle.Fill;
            crv.EnableDrillDown = false;
            this.Controls.Add(crv);
        } catch (Exception ex) {
            MessageBox.Show(ex.Message,"Hello");
        }
    }
    public CrystalView()
    {
        Load += CrystalView_Load;
    }
} 
```

在您的 WinForm Crystal Report Viewer 中是可见的...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T11:13:24.857

您只需通过此链接安装完整的软件包。如果您已经安装了任何水晶报表软件包，请先卸载它们，然后通过此链接下载完整的软件包并安装它。

[http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_5.exe](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_5.exe)

然后你可以看到 toolbox -->Reporting--> Report viewer 。它的工作

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-10T02:37:07.210

要解决此问题，请将其更改为 .NET Framework 版本。

对于像我这样的 VS 2012 版本，这是如何检查创建的项目的目标框架。

为此，请右键单击项目并选择属性。在 Compile 选项卡上，单击 Advance Compile Options... 并将 Target Framework 下拉菜单设置为 .NET Framework 版本。

[![在此处输入图像描述](../Images/aa62320d84079b21eeda3994ee8ff809.png)](https://i.stack.imgur.com/MeJ1V.jpg)**

# c# - MS 的 Linq 文档中的 Northwnd 来自哪里？

> ID：11384422
> 
> 赞同：2
> 
> 时间：2012-07-08T15:44:53.800
> 
> 标签：c#, linq

我在这：

```
 http://msdn.microsoft.com/en-us/library/bb397906.aspx
Northwnd db = new Northwnd(@"c:\northwnd.mdf");

// Query for customers in London.
IQueryable<Customer> custQuery =
    from cust in db.Customers
    where cust.City == "London"
    select cust; 
```

这很好，除了这是文档的第一页，他们使用的是 Northwnd 类，但从未向您展示它是如何创建的。

我有

1.  我的数据库所有设置
2.  LINQ To SQL 类文件所有设置并填充了我需要的表

我需要：

```
MyDb db = new MyDB(@"C:\MyDB.mdf"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T15:49:21.877

这是一个与微软团队一起设计的用于演示目的的数据库。您可以从[http://northwind.codeplex.com/下载它](http://northwind.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:49:20.227

Norhtwind & Pubs 数据库被 MS 产品用于教程，它存在很长时间了。

您可以搜索它并下载它的脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T15:50:03.970

大多数人只需安装 SQL Server 即可获得它。或者您可以[单独](http://www.microsoft.com/en-us/download/details.aspx?id=23654)下载。

# spring - 使用 spring-test-mvc 在 Spring 控制器测试中未注入服务

> ID：11384423
> 
> 赞同：10
> 
> 时间：2012-07-08T15:45:22.237
> 
> 标签：spring, spring-mvc, junit, spring-test

我正在尝试为使用 Spring MVC 3.1.1 创建的 Restful API 服务器构建一组单元/集成测试。

我正在尝试使用[Spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)。

我对 Spring 比较陌生，因此对 spring-test-mvc 比较陌生。

我将包含我的代码的相关部分，让您了解我的结构：

采购控制器：

```
@Controller
public class PurchaseController
{    
    @Autowired
    private IPurchaseService purchaseService;

    @RequestMapping(value = "purchases", method = RequestMethod.GET)
    @ResponseBody
    public final List<Purchase> getAll()
    {
        return purchaseService.getAll();
    }
} 
```

购买服务：

```
@Service
public class PurchaseService implements IPurchaseService
{
    @Autowired
    private IPurchaseDAO purchaseDAO;

    public PurchaseService()
    {

    }

    @Transactional
    public List<Purchase> getAll()
    {
        return purchaseDAO.findAll();
    }
} 
```

购买DAO：

```
@Repository
public class PurchaseDAO extends AbstractJpaDAO<Purchase> implements
        IPurchaseDAO
{

    @PersistenceContext
    EntityManager entityManager;

    public PurchaseDAO()
    {
        setClazz(Purchase.class);
    }
} 
```

摘要JpaDAO：

```
public abstract class AbstractJpaDAO<T extends Serializable> implements
        IAbstractJpaDAO<T> {

    private Class<T> clazz;

    @PersistenceContext
    EntityManager entityManager;

    public void setClazz(final Class<T> clazzToSet) {
        this.clazz = clazzToSet;
    }

    public List<T> findAll() {
        return entityManager.createQuery("from " + clazz.getName())
                .getResultList();
    }
} 
```

这是我的控制器测试：

```
public class PurchaseControllerTest extends AbstractControllerTest
{
    @Autowired
    private IPurchaseService purchaseService;

    @Autowired
    private PurchaseController purchaseController;

    private MockMvc mockMvc;

    @Before
    public void setup()
    {
        // Test Purchase
        Purchase purchase = new Purchase();
        purchase.setPan(5412311111111121l);
        purchase.setCvc((short) 122);
        purchase.setExpiry("1215");
        purchase.setMerchantName("TestMerchant");
        purchase.setMerchantType("Airline");
        purchase.setTransactionAmount(new BigDecimal("300.99"));

        mockMvc = MockMvcBuilders.standaloneSetup(purchaseController).build();
        purchaseService.addPurchase(purchase);
    }

    @Test
    public void testGetAll() throws Exception
    {
        this.mockMvc
                .perform(get("/purchase").accept(MediaType.APPLICATION_JSON))
                .andExpect(status().isOk())
                .andExpect(content().type(MediaType.APPLICATION_JSON));
    }
} 
```

抽象控制器测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {ControllerTestConfig.class}, loader=AnnotationConfigContextLoader.class)
@ActiveProfiles("test")
public class AbstractControllerTest
{

} 
```

控制器测试配置：

```
@Configuration
@Profile("test")
public class ControllerTestConfig {

    @Bean
public PurchaseService purchaseService()
{
    return new PurchaseService();
}

@Bean
public PurchaseDAO purchaseDAO()
{
    return new PurchaseDAO();
}

@Bean
public EntityManagerFactory entityManager()
{
    return new LocalEntityManagerFactoryBean().getObject();
}
} 
```

通过 Eclipse 的 JUnit 运行测试时出现以下错误：

```
2012-07-08 16:16:00,017 TRACE [main] o.s.c.s.GenericApplicationContext [AbstractApplicationContext.java:322] Publishing event in org.springframework.context.support.GenericApplicationContext@42b307f0: org.springframework.context.event.ContextRefreshedEvent[source=org.springframework.context.support.GenericApplicationContext@42b307f0: startup date [Sun Jul 08 16:15:59 IST 2012]; root of context hierarchy]
2012-07-08 16:16:00,018 DEBUG [main] o.s.t.c.TestContext [TestContext.java:150] Storing ApplicationContext for test class [class com.app.controller.PurchaseControllerTest] in cache under key [[MergedContextConfiguration@2f8a49e0 testClass = PurchaseControllerTest, locations = '{}', classes = '{class com.app.spring.testing.ControllerTestConfig}', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.AnnotationConfigContextLoader']].
2012-07-08 16:16:00,019 TRACE [main] o.s.b.CachedIntrospectionResults [CachedIntrospectionResults.java:222] Getting BeanInfo for class [com.app.controller.PurchaseControllerTest]
2012-07-08 16:16:00,022 TRACE [main] o.s.b.CachedIntrospectionResults [CachedIntrospectionResults.java:238] Caching PropertyDescriptors for class [com.app.controller.PurchaseControllerTest]
2012-07-08 16:16:00,022 TRACE [main] o.s.b.CachedIntrospectionResults [CachedIntrospectionResults.java:250] Found bean property 'class' of type [java.lang.Class]
2012-07-08 16:16:00,023 TRACE [main] o.s.b.CachedIntrospectionResults [CachedIntrospectionResults.java:250] Found bean property 'mockMvc' of type [org.springframework.test.web.server.MockMvc]
2012-07-08 16:16:00,026 DEBUG [main] o.s.b.f.a.InjectionMetadata [InjectionMetadata.java:60] Found injected element on class [com.app.controller.PurchaseControllerTest]: AutowiredFieldElement for private com.app.service.IPurchaseService com.app.controller.PurchaseControllerTest.purchaseService
2012-07-08 16:16:00,026 DEBUG [main] o.s.b.f.a.InjectionMetadata [InjectionMetadata.java:60] Found injected element on class [com.app.controller.PurchaseControllerTest]: AutowiredFieldElement for private com.app.controller.PurchaseController com.app.controller.PurchaseControllerTest.purchaseController
2012-07-08 16:16:00,027 DEBUG [main] o.s.b.f.a.InjectionMetadata [InjectionMetadata.java:85] Processing injected method of bean 'com.app.controller.PurchaseControllerTest': AutowiredFieldElement for private com.app.service.IPurchaseService com.app.controller.PurchaseControllerTest.purchaseService
2012-07-08 16:16:00,034 ERROR [main] o.s.t.c.TestContextManager [TestContextManager.java:324] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@403ef810] to prepare test instance [com.app.controller.PurchaseControllerTest@656546ef]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.app.controller.PurchaseControllerTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.service.IPurchaseService com.app.controller.PurchaseControllerTest.purchaseService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.service.IPurchaseService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

关于为什么我的 PurchaseService 没有创建和注入的任何想法？

## 更新

所以我将我的购买服务 Bean 添加到 ControllerTestConfig ......现在我收到关于我的 purchaseDAO 的错误。

如何将此添加到我的 ControllerTestConfig？它必须嵌套在购买 Bean 中吗？

```
2012-07-08 18:30:23,029 ERROR [main] o.s.t.c.TestContextManager [TestContextManager.java:324] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@56da6bf4] to prepare test instance [com.app.controller.PurchaseControllerTest@df4cbee]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) [.cp/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.IPurchaseDAO com.app.service.impl.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [javax.persistence.EntityManagerFactory] is defined: expected single bean but found 0
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

我将 PurchaseDAO bean 添加到 ControllerTestConfig。

## 更新 2

所以现在我在将一个 EntityManagerFactory Bean 添加到我的 ControllerTestConfig 后得到一个空指针异常！

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321) ~[spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) [junit-4.8.1.jar:na]
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236) [junit-4.8.1.jar:na]
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) [spring-test-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) [.cp/:na]
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) [.cp/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.IPurchaseDAO com.app.service.impl.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseDAO': Injection of persistence dependencies failed; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:56:51.537

这将不起作用，因为 spring-test-mvc 不会从 Junit 的 ContextConfiguration 中选择上下文配置，而是您可以这样做（假设您的 Service beans 正在通过 ControllerTestConfig 配置加载到某个地方）：

```
MockMvcBuilders.annotationConfigSetup(ControllerTestConfig.class).build().perform(get("/purchase").accept(MediaType.APPLICATION_JSON))
                .andExpect(status().isOk())
                .andExpect(content().type(MediaType.APPLICATION_JSON)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:00:07.763

您将需要`@Bean`在您的个人资料中包含一些 's `test` `@Configuration`。

以前你没有，但自从你的更新，我看到你已经`PurchaseService`添加了。好吧，你`PurchaseService`有一个`@Autowired PurchaseDao`也需要添加到你的`test`个人资料中。

尝试将此添加到`ControllerTestConfig`：

```
@Bean
public IPurchaseDao purchaseDao() {
    return new PurchaseDao();
} 
```

您的`PurchaseDao`用途`EntityManager`可能还需要添加到您的`ControllerTestConfig`课程中。（我对这部分不是很熟悉，所以不能一概而论……）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:10:57.227

鉴于您使用 @ContextConfiguration（TestContext 框架）来加载 Spring 配置，我猜您想要进行集成测试，包括从 Spring 配置中加载控制器、服务和存储库。但是，您使用的是 MockMvcBuilders 的standaloneSetup 方法，该方法旨在用于更集中的单元测试，主要针对控制器（服务和存储库通常被模拟出来）。

考虑使用 MockMvcBuilders 的 webApplicationContextSetup 方法。这是[一个例子](https://github.com/SpringSource/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/JavaTestContextTests.java)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T00:43:07.730

我不知道这是否会对您有所帮助，但是要从`@ContextConfiguration`您那里继承上下文，需要在测试类中自动装配它，然后，您可以将其设置为您的`ControllerTestConfig.class`.

在我的配置中，我将要从 加载的持久性配置`@ContextConfiguration`和要从 加载的 MVC 配置分开`annotationConfigSetup`。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader=AnnotationConfigContextLoader.class, classes={PersistenceJPAConfig.class})
public class PurchaseControllerTest {

    @Autowired
    private ApplicationContext ac;

    private PurchaseService service;

    private MockMvc mvc;

    @Before
    public void before() {
        mvc = annotationConfigSetup(ControllerTestConfig.class).
              setParentContext(ac).build();

        service = ac.getBean(PurchaseService.class);
    }
} 
```

由于`annotationConfigSetup`不知道你有一个外部配置，你必须通过设置它的父上下文直接告诉它。

你不能在你的测试类中注入你的服务，但你可以从上下文中恢复它，也可以让它注入你的控制器。好吧，你可以注入，但它不会是注入到你的控制器中的同一个服务。从您作为父母传递的上下文中获取它，您保证它们是相同的。当我嘲笑我的服务时，这很重要。

# google-app-engine - 本地部署工作时远程 appengine-go 静态文件出现 404 错误

> ID：11384426
> 
> 赞同：2
> 
> 时间：2012-07-08T15:45:35.347
> 
> 标签：google-app-engine, go

我遇到了一个问题，静态文件通过 dev_appserver.py 在本地机器上正确显示，但是一旦上传到服务器，它就不会显示并给我一个 404 错误。

部分目录文件结构为：

```
- static/
    articles.html
    images/*.png 
```

部分 app.yaml 文件是：

```
runtime: go
api_version: go1

- url: /(articles\.html)
  static_files: static/\1
  upload: static/*.html 
```

然后我通过 http url appname.appspot.com/articles.html 访问它。

我把代码放在appengine服务器上后下载了代码，以确保articles.html确实已经上传到所述目录中，并且已经上传。因此，在本地和服务器上完全相同的文件结构，但它在服务器上提供 404 并在本地工作。我有最新版本的 appengine。关于我可能做错的任何帮助？

提前致谢

萨蒂什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:52:17.657

只是为了完整起见......我回去尝试了各种合理的组合，发现这个配置有效：

```
- url: /(articles)\.html
  static_files: static/\1.html
  upload: static/.*.html 
```

我现在提出索赔对我来说是荒谬的，但我记得之前尝试过为“上传”条目使用正则表达式，但它没有奏效。所以，我不清楚这个问题，但是，我最好的猜测是 dev_appserver.py 可能正在使用一些快捷方式来提供静态文件，而不是像 appengine 那样表现。我会提出一个问题，看看是否有任何解决或澄清。

# javascript - 如何检测浏览器（非窗口）关闭事件

> ID：11384429
> 
> 赞同：1
> 
> 时间：2012-07-08T15:45:55.900
> 
> 标签：javascript, javascript-events

我想检测浏览器关闭（不是窗口（选项卡））并运行脚本。我试过了`onunload`，`onbeforeunload`但他们在关闭选项卡时工作正常，但如果我关闭整个浏览器，什么也不会发生。我怎样才能做到这一点？谢谢..！

**编辑：**

我只想对任何此类事件进行服务器端清理。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:49:10.347

基于所提出的问题，“我如何[访问浏览器关闭事件]？” 唯一可能的答案是：你不能；这是不可能的。出于安全原因，也不应该这样。

> 我想为任何此类事件进行服务器端清理。有什么可能的方法吗？

使用 JavaScript，我能想到的唯一方法是触发对服务器端脚本的 Ajax 调用，通知它关闭事件，使用`onunload`or `onbeforeunload`，并让该脚本整理任何可能仍处于打开状态的会话。

# matlab - 在聚集的 kmeans 数据上显示行

> ID：11384430
> 
> 赞同：2
> 
> 时间：2012-07-08T15:46:02.787
> 
> 标签：matlab, statistics, plot, cluster-analysis, k-means

嗨，我想知道当您在图形屏幕上对数据进行聚类时，有没有办法在您滚动数据点时显示数据点属于哪些行？

![在此处输入图像描述](../Images/f3598b58ddaf0682229598b002569e3a.png)

从上面的图片中，我希望有一种方法可以让我选择或滚动点，我可以分辨出它属于哪一行。

这是代码：

```
%% dimensionality reduction 
columns = 6
[U,S,V]=svds(fulldata,columns);
%% randomly select dataset
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows);

%# pick random columns
indY = randperm( size(fulldata,2) );
indY = indY(1:columns);

%# filter data
data = U(indX,indY);
%% apply normalization method to every cell
data = data./repmat(sqrt(sum(data.^2)),size(data,1),1);

%% generate sample data
K = 6;
numObservarations = 1000;
dimensions = 6;

%% cluster
opts = statset('MaxIter', 100, 'Display', 'iter');
[clustIDX, clusters, interClustSum, Dist] = kmeans(data, K, 'options',opts, ...
'distance','sqEuclidean', 'EmptyAction','singleton', 'replicates',3);

%% plot data+clusters
figure, hold on
scatter3(data(:,1),data(:,2),data(:,3), 5, clustIDX, 'filled')
scatter3(clusters(:,1),clusters(:,2),clusters(:,3), 100, (1:K)', 'filled')
hold off, xlabel('x'), ylabel('y'), zlabel('z')

%% plot clusters quality
figure
[silh,h] = silhouette(data, clustIDX);
avrgScore = mean(silh);

%% Assign data to clusters
% calculate distance (squared) of all instances to each cluster centroid
D = zeros(numObservarations, K);     % init distances
for k=1:K
%d = sum((x-y).^2).^0.5
D(:,k) = sum( ((data - repmat(clusters(k,:),numObservarations,1)).^2), 2);
end

% find  for all instances the cluster closet to it
[minDists, clusterIndices] = min(D, [], 2);

% compare it with what you expect it to be
sum(clusterIndices == clustIDX) 
```

或者可能是集群数据的输出方法，将其归一化并重新组织为原始格式，最后一列的应用程序属于原始“完整数据”中的哪一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:56:32.437

当您从图中选择一个点时，您可以使用显示工具提示的[*数据游标功能。*](http://www.mathworks.com/help/techdoc/ref/datacursormode.html)您可以使用修改后的更新功能来显示有关所选点的各种信息。

这是一个工作示例：

```
function customCusrorModeDemo()
    %# data
    D = load('fisheriris');
    data = D.meas;
    [clustIdx,labels] = grp2idx(D.species);
    K = numel(labels);
    clr = hsv(K);

    %# instance indices grouped according to class
    ind = accumarray(clustIdx, 1:size(data,1), [K 1], @(x){x});

    %# plot
    %#gscatter(data(:,1), data(:,2), clustIdx, clr)
    hLine = zeros(K,1);
    for k=1:K
        hLine(k) = line(data(ind{k},1), data(ind{k},2), data(ind{k},3), ...
            'LineStyle','none', 'Color',clr(k,:), ...
            'Marker','.', 'MarkerSize',15);
    end
    xlabel('SL'), ylabel('SW'), zlabel('PL')
    legend(hLine, labels)
    view(3), box on, grid on

    %# data cursor
    hDCM = datacursormode(gcf);
    set(hDCM, 'UpdateFcn',@updateFcn, 'DisplayStyle','window')
    set(hDCM, 'Enable','on')

    %# callback function
    function txt = updateFcn(~,evt)
        hObj = get(evt,'Target');   %# line object handle
        idx = get(evt,'DataIndex'); %# index of nearest point

        %# class index of data point
        cIdx = find(hLine==hObj, 1, 'first');

        %# instance index (index into the entire data matrix)
        idx = ind{cIdx}(idx);

        %# output text
        txt = {
            sprintf('SL: %g', data(idx,1)) ;
            sprintf('SW: %g', data(idx,2)) ;
            sprintf('PL: %g', data(idx,3)) ;
            sprintf('PW: %g', data(idx,4)) ;
            sprintf('Index: %d', idx) ;
            sprintf('Class: %s', labels{clustIdx(idx)}) ;
        };
    end

end 
```

以下是它在 2D 和 3D 视图中的外观（具有不同的显示样式）：

![截图_2D](../Images/4c12df6cd50b79f244892183d8ac4d33.png) ![截图_3D](../Images/055526fd169b7575258e0b2b9303eb71.png)

# ruby - Ruby：试图通过猴子补丁将另一个 --option 潜入 Cucumber，但似乎不起作用

> ID：11384432
> 
> 赞同：1
> 
> 时间：2012-07-08T15:46:20.027
> 
> 标签：ruby, cucumber, monkeypatching

我已经为 Cucumber 编写了一个小猴子补丁，它可以让它以不同的方式打印出文件路径，这样我就可以在 OSX 终端中 Cmd 双击它们以直接在 TextMate 中打开文件：

```
module Cucumber
  module Ast
    class Scenario
      alias_method :old_file_colon_line, :file_colon_line

      def file_colon_line(*arg)
        self.class.textmate_colon_line(old_file_colon_line)
      end

      def self.textmate_colon_line(file_colon_line)
        file, line = file_colon_line.split(':')
        'txmt://open?url=file://' + File.expand_path(File.dirname(__FILE__) + '/../../') + '/' + file + '&line=' + line
      end
    end
  end
end

class Proc
  alias_method :old_file_colon_line, :file_colon_line

  def file_colon_line
    Cucumber::Ast::Scenario::textmate_colon_line(old_file_colon_line)
  end
end 
```

因为不是我团队中的每个人都在使用 TextMate，所以我想在调用 Cucumber 时使用自定义 --txmt 参数激活这个猴子补丁：

```
cucumber features/create_task.feature --txmt 
```

这导致：

```
invalid option: --txmt (OptionParser::InvalidOption) 
```

所以我正在尝试像这样对 Cucumber 进行修补：

```
module Cucumber
  module Cli
    class Options
      def self.parse!(args)
        # Do some stuff
      end
    end
  end
end 
```

但遗憾的是这不起作用，似乎该`Cucumber::Cli::Options.parse!`方法没有被这种方法覆盖，而`Cucumber::Ast::Scenario`同样的方法似乎有效。

知道为什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:55:46.193

我建议不要使用猴子修补程序，而是使用自定义格式化程序，例如[https://github.com/raldred/cucumber_textmate/](https://github.com/raldred/cucumber_textmate/)

然后您可以使用该选项启动黄瓜`--format TextmateFormatter`

# java - 从 Servlet 中的 Http 请求中获取数据

> ID：11384435
> 
> 赞同：0
> 
> 时间：2012-07-08T15:46:56.897
> 
> 标签：java, servlets, parameters

我正在从 jquery 发送帖子请求，如下所示：

```
$.ajax({
   type: "POST",
   url: "Save",
   data: { conr: conr ,expiry : expiry,settings : settings} 
```

在 servlet 中，我可以获取参数`(conr , expiry , settings)` ，但问题是`settings`参数包含序列化的表单数据：像这样：

```
high=true&ci=false&title=qTip+as+Button+Menu&private=true&email=abc@google.com 
```

我知道我可以用它`string tokenizer`来获取数据，但我想确保——它们是否有任何简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:54:12.907

您可以使用[HttpComponents](http://hc.apache.org)并[`URLEncodedUtils`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html#parse%28java.lang.String,%20java.nio.charset.Charset%29)为您解析它。

因此，您可以调用`URLEncodedUtils.parse(yourString,Charset.forName("UTF-8"))`并收到`List<NameValuePair>`包含名称和值关联元素的返回值。在这种情况下，例如：hight = "true"、title = "qTip as Button Menu" 等等。而这一切都得到了正确的解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:50:50.540

您还可以使用“&”作为正则表达式对设置字符串使用拆分。

# javascript - 错误 - 权限被拒绝 - jQuery 打印预览？

> ID：11384440
> 
> 赞同：5
> 
> 时间：2012-07-08T15:47:21.413
> 
> 标签：javascript, jquery, printing, print-preview

[当我使用jQuery 打印预览插件](https://github.com/etimbo/jquery-print-preview-plugin)单击“打印”时，会弹出以下错误和 Firebug：

```
Error: Permission denied to access property 'name'

     if (window.frames[i].name == "print-frame") { 
```

我不确定它的确切含义或如何纠正它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:40:57.703

有一种方法可以解决这个问题，并且可以在所有主流浏览器上正常工作。Derick 在[jQuery Print Preview 的 Github 页面上找到了](https://github.com/etimbo/jquery-print-preview-plugin)[这个解决方案](https://github.com/etimbo/jquery-print-preview-plugin/issues/6)。

这是解决方案，在第 44 行附近，您将看到以下代码：

```
// The frame lives
        for (var i=0; i < window.frames.length; i++) {
            if (window.frames[i].name == "print-frame") {
                var print_frame_ref = window.frames[i].document;
                break;
            }
        } 
```

将上面的代码替换为：

```
print_frame_ref = print_frame[0].contentWindow.document; 
```

问题解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:53:59.740

这是 Chrome 中的错误，我希望这清楚吗？

.html 域、协议和端口必须匹配。

**您的页面位于 ww.ubhape2.com 上，您正在访问 s7.addthis.com 上的框架**

* * *

要解决此问题，请更改此行

```
<script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4dfb00d56c76d2a5"></script> 
```

指向您网站上的复制脚本。

您还必须编辑该脚本以仅访问您自己的站点。

这是 XSS 或跨站点脚本的示例。

* * *

> 然后我的问题变成了我可以编辑 jQuery 打印预览脚本以防止发生冲突吗？

不。

错误的关键在于 javascript 在另一方的上下文中运行，您无法将代码“注入”到其中。

这是由浏览器强制执行的。

如果不强制执行，那么互联网上的每个用户都会让他们的机器受到损害。

阅读谷歌搜索 XSS 以了解更多信息

**然而，**

如果您在服务器上托管 javascript（以及 iframe），那么问题就会消失。这是您的代码（和您的 iframe），您可以随意使用。

# javascript - 从 Javascript 对象获取 CSV 值

> ID：11384441
> 
> 赞同：1
> 
> 时间：2012-07-08T15:47:21.933
> 
> 标签：javascript, arrays, json, recursion, hash

我正在尝试将 Javascript 对象转换为 CSV 并将其存储到文件中。我有一个演示：http: [//jsbin.com/atewix/8/edit](http://jsbin.com/atewix/8/edit)

我想要做的是如果我在函数内给实体值“时间”或“新闻” `findProps()`，

它应该以以下格式返回 CSV：

```
"http://www.testingmyurl.com", Time, Dec 9, 2012 
```

或者

```
"http://www.testingmyurl.com",News, Germany,Election
"http://www.testingmyurl.com",News,Egypt, Revolution 
```

使用当前格式，它只返回单个值，并且也作为`[object,object]`

```
{
"_index": "test",
"_source": {
     "link": "http://www.testingmyurl.com",
  "Categories": {
      "Types": {
          "Events": [{
              "count": 1,
              "entity": "Time",
              "Time": [{
                  "entity": "Dec 9",
                  "Dec_9": [{
                      "count": 1,
                      "entity": "2012"
                  }]
                  }]
              }]}}}} 
```

这可以变成扁平结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:28:21.387

这是一个非常深的结构，但此功能将按原样处理您的数据。该函数解释了和`fixSpace()`之间的差异。`Dec 9``Dec_9`

**演示：http:** [//jsfiddle.net/ThinkingStiff/r2kje/](http://jsfiddle.net/ThinkingStiff/r2kje/)

### 输出：

```
News:
"http://www.testingmyurl.com","News","Germany","Election"
"http://www.testingmyurl.com","News","Egypt","Revolution"
Time:
"http://www.testingmyurl.com","Time","Dec 9","2012" 
```

### 脚本：

```
function findProps( name, data ) {
    var results = [],
        events = data._source.Categories.Types.Events,
        link = data._source.link;

    for( var eventIndex = 0; eventIndex < events.length; eventIndex++ ) {
        var event = events[eventIndex];
        if( event.entity == name && event[name]  ) {
            for( var entityIndex = 0; entityIndex < event[name].length; entityIndex++ ) {
                var entity = event[name][entityIndex],
                    entityName = fixSpace( entity.entity );
                if( entity[entityName] ) {
                    for( var valueIndex = 0; valueIndex < entity[entityName].length; valueIndex++ ) {
                        var value = entity[entityName][valueIndex];
                        results.push( 
                              '"' + link + '",'
                            + '"' + name + '",'
                            + '"' + entity.entity + '",' //un-fixSpaced name
                            + '"' + value.entity + '"'
                        );
                    };
                };
            };
        };
    };

    return results;
};

function fixSpace( value ) {
    return value.replace( ' ', '_' );        
};

var news = findProps( "News", data );
document.getElementById( 'news' ).innerHTML = news.join( '<br />' );
var times = findProps( "Time", data );
document.getElementById( 'time' ).innerHTML = times.join( '<br />' ); 
```

HTML：

```
News:
<div id="news"></div>
Time:
<div id="time"></div> 
```

# java - 我可以让 Eclipse 源格式化程序保留运算符周围的原始间距吗？

> ID：11384443
> 
> 赞同：0
> 
> 时间：2012-07-08T15:47:24.967
> 
> 标签：java, eclipse

有时我喜欢不均匀地分隔表达式。例如，我更喜欢...

```
x*x + y*y 
```

...至...

```
x * x + y * y 
```

Eclipse 格式化程序似乎不允许这样做。我可以告诉它在每个运算符周围放置零个或一个空格，但我看不出如何让它在我写它时留下空格。这可以做到吗？（`@formatter:off`太打扰了。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:49:37.870

不，格式化程序无条件地格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:53:24.877

去：

```
Window -> Preference -> Java -> Code Style -> Formatter -> Edit -> White Space -> Expressions -> Operators 
```

然后选中以下 2 个复选框：

```
☑ before binary operators
☑ after binary operators 
```

# php - 如何更改正常的 sql php 代码以保护 pdo？

> ID：11384446
> 
> 赞同：2
> 
> 时间：2012-07-08T15:47:46.390
> 
> 标签：php, sql, pdo

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

这段代码安全吗，因为我使用的是 mysql_real_escape_string 和 strip_tags 是否需要更改为 pdo ？我无法将以下代码转换为 pdo ，因为它的显示无法修改 header 。

```
<?php
include('config.php');
$link =mysql_connect($db_host,$username,$password);
mysql_select_db($db_name);

$id= $_POST["uniqi"]; 
$comments= $_POST["comments"]; 
$comments= mysql_real_escape_string($comments);
$comments = strip_tags($comments);

$update = "UPDATE mastertable SET comments = '$comments' WHERE id_pk= '$id'";
mysql_query($update, $link);
mysql_close();
header('Location: http://www.xxxx.com/xxxxx/xxxx.php?cntmsg=Comment Updated');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:51:31.020

这不是安全代码 - 您的`$id`变量没有被您的代码处理。

```
$id= $_POST["uniqi"]; 
$id= mysql_real_escape_string($id);
$id = strip_tags($id); 
```

# sql - 使用 SQL 在 2 个字段之间进行相等性检查

> ID：11384449
> 
> 赞同：0
> 
> 时间：2012-07-08T15:48:08.697
> 
> 标签：sql, sql-server-2008

我正在尝试查找父类别。

因此我需要写，

其中，`CategoryID`a`ParentCategoryID`为 0

`CategoryID`可能是 30 但如果它有一个`ParentCategoryID`0 那么你知道它的父类别。

到目前为止，这是我的 SQL：

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID
FROM          Nop_Category
WHERE         (Deleted = 0) 
AND           (Published = 1) 
AND           (CategoryID = ParentCategoryID = 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:50:28.023

要对两个字段执行相等检查，请使用 AND 运算符并指定字段名两次。

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID 
FROM          Nop_Category 
WHERE         (Deleted = 0)  
AND           (Published = 1)  
AND           (CategoryID = ParentCategoryID AND ParentCategoryID = 0) 
```

但是你也可以这样写并获得相同的结果：

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID 
FROM          Nop_Category 
WHERE         (Deleted = 0)  
AND           (Published = 1)  
AND           (CategoryID = 0 AND ParentCategoryID = 0) 
```

但是，在您的问题中，您提到 CategoryID 可能是 30，因此您的查询将不起作用。您可能希望省略 CategoryID 或通过参数指定特定的 categoryId：

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID, 
FROM          Nop_Category 
WHERE         (Deleted = 0)  
AND           (Published = 1)  
AND           (CategoryID = @categoryID AND ParentCategoryID = 0) 
```

编辑：

> 因此，如果 categoryID 与 CetegoryParentID 相同，我就知道它是一个孩子。

通常，当我做自相关表时，我使用 NULL 作为 ParentId，它告诉我当前行是父行。如果您使用 0 表示 null，则 CategoryId 为 30 且 ParentCategoryId 为 30 的记录意味着它既是子代也不是父代。

```
ID  PID  Value
0   0    Top Level - must exist for referential integrity
1   0    Child of "Top Level"
2   0    Another child of "Top Level"
3   1    Child of "Child of Top Level" 
```

在这个场景中，您只能有 1 个顶级类别，所有其他类别都是子类别（即使您认为 ParentCategoryId 为 0 的父类别，它仍然必须位于 CategoryId 0 下）

使用 NULL

```
ID  PID  Value
1   Null Top Level cat 1
2   Null Top Level cat 2
3   1    Child of "Top Level cat 1"
4   2    Child of "Top Level cat 2" 
```

在这个场景中，我可以轻松找到所有顶级类别

```
SELECT * FROM dbo.Category WHERE pid IS NULL 
```

或者，如果我想要特定类别的顶级类别

```
SELECT * FROM dbo.Category WHERE CategoryId = 1 AND ParentCategoryId is null 
```

而且我的参照完整性是完全正确的。

要查找父级的直系子级，只需传入您要查找的父级的 categoryid：

```
SELECT * FROM dbo.Category WHERE ParentCategoryId = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:51:39.070

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID
FROM          Nop_Category
WHERE         Deleted = 0
AND           Published = 1
AND           ParentCategoryID = 0 
```

# android - 安卓电池电量

> ID：11384450
> 
> 赞同：0
> 
> 时间：2012-07-08T15:48:11.633
> 
> 标签：android, battery

我对通过 SMS 发送坐标的应用程序有疑问。当我添加电池电量时，应用程序在修复后停止工作。（坐标未显示，但它们是通过短信发送的。）

请帮忙。

**ZoltrixGPS活动**

```
package com.zoltrix.gps;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class ZoltrixGPSActivity extends Activity {

    // Here I added a level of battery (1)

    private TextView contentTxt;
    private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent intent) {
            // TODO Auto-generated method stub
            int level = intent.getIntExtra("level", 0);
            contentTxt.setText(String.valueOf(level) + "%");
        }
    };

    // end

    TextView textLat;
    TextView textLong;
    TextView textAlt;
    TextView textPro;
    TextView textAcc;
    TextView textSpeed;
    public String onLocat;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Here I added a level of battery (2)

        contentTxt = (TextView) this.findViewById(R.id.battery);
        this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(
                Intent.ACTION_BATTERY_CHANGED));

        // end

        Button btn1 = (Button) findViewById(R.id.buttonExit);
        btn1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // exit
                finish();
                System.exit(0);
            }
        });

        textLat = (TextView) findViewById(R.id.textLat);
        textLong = (TextView) findViewById(R.id.textLong);
        textAlt = (TextView) findViewById(R.id.textAlt);
        textPro = (TextView) findViewById(R.id.textPro);
        textAcc = (TextView) findViewById(R.id.textAcc);
        textSpeed = (TextView) findViewById(R.id.textSpeed);

        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
    }

    class mylocationlistener implements LocationListener {

        public void onLocationChanged(Location location) {
            if (location != null) {
                double pLong = location.getLongitude();
                double pLat = location.getLatitude();
                double pAlt = location.getAltitude();
                String PPro = location.getProvider();
                float PAcc = location.getAccuracy();
                float PSpeed = location.getSpeed();

                textLat.setText(Double.toString(pLat));
                textLong.setText(Double.toString(pLong));
                textAlt.setText(Double.toString(pAlt));
                textPro.setText(PPro);
                textAcc.setText(Float.toString(PAcc));
                textSpeed.setText(Double.toString(PSpeed));

                Intent i = new Intent(ZoltrixGPSActivity.this,
                        SendSMSActivity.class);
                i.putExtra("lon", Double.toString(pLong));
                i.putExtra("lat", Double.toString(pLat));
                i.putExtra("alt", Double.toString(pAlt));
                i.putExtra("acc", Float.toString(PAcc));
                i.putExtra("spe", Float.toString(PSpeed));
                startActivity(i);

            }

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

} 
```

**发送短信活动**

```
package com.zoltrix.gps;

import android.app.Activity;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;

public class SendSMSActivity extends Activity {
    Button btnSendSMS;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        btnSendSMS.setOnClickListener(new View.OnClickListener()

        {

            public void onClick(View v) {

                Bundle extras = getIntent().getExtras();

                String LON = extras.getString("lon");
                String LAT = extras.getString("lat");
                String ALT = extras.getString("alt");
                String ACC = extras.getString("acc");
                String SPE = extras.getString("spe");

                sendSMS("510104727", "LON" + LON + "#" + "LAT" + LAT + "#"
                        + "ALT" + ALT + "#" + "ACC" + ACC + "#" + "SPE" + SPE);
            }

        });
    }

    // ---sends an SMS message to another device---
    private void sendSMS(String phoneNumber, String message) {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }

} 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zoltrix.gps"
    android:versionCode="1"
    android:versionName="1.2" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.zoltrix.gps.SendSMSActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.zoltrix.gps.ZoltrixGPSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**退出**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="top"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Latitude"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textLat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Longitude "
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textLong"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Alt"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textAlt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Provider"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textPro"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Accuracy (m)" />

    <TextView
        android:id="@+id/textAcc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/text344"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Speed (m/s)" />

    <TextView
        android:id="@+id/textSpeed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/battery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/btnSendSMS"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Send" />

    <Button
        android:id="@+id/buttonExit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Exit" />

</LinearLayout> 
```

**LogCat** [http://pastebin.com/whhdHsyw](http://pastebin.com/whhdHsyw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:52:42.423

尝试将`android.permission.BATTERY_STATS`权限添加到您的代码中。

```
<uses-permission android:name="android.permission.BATTERY_STATS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:16:16.960

```
// Put this Code into your MainActivity where you want to show level

private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context c, Intent i) {
        int level = i.getIntExtra("level", 0);
        ProgressBar pb = (ProgressBar) findViewById(R.id.progressbar);
        pb.setProgress(level);
        TextView tv = (TextView) findViewById(R.id.textfield);
        tv.setText("Battery Level: " + Integer.toString(level) + "%");
    }

};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    registerReceiver(mBatInfoReceiver, new IntentFilter(
            Intent.ACTION_BATTERY_CHANGED));
}
// Please Add the given below code into manifest:

<uses-permission android:name="android.permission.BATTERY_STATS" /> 
```

# backbone.js - 主干布局管理器和车把模板引擎

> ID：11384459
> 
> 赞同：1
> 
> 时间：2012-07-08T15:49:43.623
> 
> 标签：backbone.js, javascript-framework, handlebars.js, backbone-views

我正在使用backbone.layoutmanager 项目： [https ://github.com/tbranyen/backbone.layoutmanager#readme](https://github.com/tbranyen/backbone.layoutmanager#readme)

有人可以发布一个带有车把模板引擎的样本吗？包含修改后的 app.js 文件和实例视图？

我已按照说明进行操作，但我有点困惑我应该在实例级别和全局范围内做什么。我不断在我的模板上收到“没有方法'匹配'错误消息。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T05:55:07.490

您修改后的 app.js 将与以下内容一起使用：

```
define([
  "jquery",
  "underscore",
  "backbone",
  "handlebars",
  "plugins/backbone.layoutmanager"
],
function($, _, Backbone, Handlebars) {
  "use strict";

  var JST = window.JST = window.JST || {};

  Backbone.LayoutManager.configure({
    paths: {
      layout: "path/to/layouts/",
      template: "path/to/templates/"
    },

    fetch: function(path) {
      path = path + ".html";

      if(!JST[path]) {
        $.ajax({ url: "/" + path, async: false }).then(function(contents) {
          JST[path] = Handlebars.compile(contents);
        });
      }

      return JST[path];
    }

    // It is not necessary to override render() here.
  });

  var app = {
    // Define global resources here.
  };

  return _.extend(app, Backbone.Events);
}); 
```

视图示例：

```
var SampleView = Backbone.View.extend({
  template: "path/to/sample/template",

  // Override this for fine grained control of the context used by the template.
  serialize: function() {
    return {
      property: 1,
      anotherProperty: 2
    };
  }

  // No need to override render() for simple templates.
}); 
```

以及与视图关联的模板：

```
<div>
  <h2>{{property}}</h2>
  <h2>{{anotherProperty}}</h2>
</div> 
```

# javascript - javascript：检查鼠标是否按下（按下）并从零开始计数，x秒后，它重定向

> ID：11384463
> 
> 赞同：1
> 
> 时间：2012-07-08T15:50:08.040
> 
> 标签：javascript, mousedown

是否可以在按下（按下）时检测到我们的鼠标，并从零开始计数几秒钟......并且在鼠标按下 5 秒后，它会重定向。

我找到了一个脚本，但是我对如何在按下鼠标时显示第二个感到困惑。

这里是。

```
<script type="text/javascript">
/*<![CDATA[*/
document.getElementsByClassName=function(classname){
  var pattern=new RegExp("(^|\s)"+classname+"(\s|$)");
  var results=new Array();
  var d=document.getElementsByTagName('*'), l=d.length;
  for (var k=0; k<l; k++) if (pattern.test(d[k].className)) results.push(d[k]);
  return results;
}

var timer;

function startStuff(el,ii)
{
  var temp=el.innerHTML;
  timer=window.setTimeout('doStuff("'+temp+'");',3000);
}

function stopStuff(el)
{
  window.clearTimeout(timer);
}

function doStuff(l)
{
<?php echo"<html>"; header( 'Location: http://www.google.com' ) ; echo"</html>";?>
}

window.onload=function() {
  var links=document.getElementsByClassName('clicker');
  for (var i=0; i<links.length; i++)
  {
    links[i].onmousedown=function() {startStuff(this)};
    links[i].onmouseup  =function() {stopStuff(this)};
  }
}

/*]]>*/
</script> 

</head>

<body>
<a href="#" class="clicker">Link1</a>
<a href="#">Link2</a>
<a href="#" class="clicker">Link3</a>
</body>
</html> 
```

如果可能的话，我希望第二个显示图像......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:36:04.590

我不会使用图像。尝试这样的事情：

```
link = document.getElementById('redirect');
counter = document.getElementById('counter');
timeRemaining = 5000;

link.onclick = function(e) {
  e.preventDefault();

  setInterval(function(){
    if (timeRemaining > 0) {
      timeRemaining -= 1000;
      counter.innerHTML = timeRemaining/1000;
    } else {
      window.location = link.href;
    }
  },1000);
}; 
```

完整的工作示例：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Redirect to Google</title>
</head>
<body>
  <a href="http://www.google.com" id="redirect">
    Go to google in <span id="counter">5</span> seconds
  </a>
  <script type="text/javascript">
    link = document.getElementById('redirect');
    counter = document.getElementById('counter');
    timeRemaining = 5000;

    link.onclick = function(e) {
      e.preventDefault();

      setInterval(function(){
        if (timeRemaining > 0) {
          timeRemaining -= 1000;
          counter.innerHTML = timeRemaining/1000;
        } else {
          window.location = link.href;
        }
      },1000);
    };
  </script>
</body>
</html> 
```

# javascript - 使用 Flexslider 进行哈希 URL 导航

> ID：11384472
> 
> 赞同：3
> 
> 时间：2012-07-08T15:51:05.050
> 
> 标签：javascript, jquery, hash, flexslider

我正在构建一个使用 flexslider 的网站，但我想实现一些 URL 哈希导航。基于 URL 的哈希值，我计划获取要显示的幻灯片的索引，最接近的方法是查看手动导航的代码，其中单击元素的索引等于滑动：

```
slider.controlNav.live(eventType, function(event) {
   event.preventDefault();
   var $this = $(this),
   target = slider.controlNav.index($this);

   if (!$this.hasClass(namespace + 'active')) {
      (target > slider.currentSlide) ? slider.direction = "next" : slider.direction = "prev";
      slider.flexAnimate(target, vars.pauseOnAction);
    }
}); 
```

于是我尝试调整原理，放到Flexslider的start属性中：

```
$('.flexslider').flexslider({   
     start: function(slider) {
         var target = 2; // Set to test integer

          (target > slider.currentSlide) ? slider.direction = "next" : slider.direction = "prev";
          slider.flexAnimate(target);
     }
}); 
```

根据 URL 中的哈希获取相应的整数应该不是问题，但我似乎无法使用测试整数获得所需的幻灯片。

有人对 URL 哈希和 Flexslider 有任何经验吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T00:49:25.833

我正在寻找相同的答案，并且想通了，所以在这里以防万一您或其他人需要它。只要我们只是在谈论数值，它就非常简单。

```
$(window).load(function(){

    //set some variables for calculating the hash

    var index = 0, hash = window.location.hash;

    //via malsup (Cycle plugin), calculates the hash value

    if (hash) {
        index = /\d+/.exec(hash)[0];
        index = (parseInt(index) || 1) - 1;
    }

    $(".flexslider").flexslider({
        startAt: index, //now foo.html#3 will load item 3
        after:function(slider){
            window.location.hash = slider.currentSlide+1;
            //now when you navigate, your location updates in the URL
        }
    })
}) 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T10:20:34.847

在寻找使用 URL 的锚部分（哈希）跳转到 FlexSlider 中的幻灯片的解决方案时，我遇到了这个问题。但是，Andrew 的回答对我不起作用，可能是因为在撰写本文时，FlexSlider 现在是 2.6.4 版，需要 jQuery 1.7.0+ 版。

我的解决方案借用了 Andrew 答案的第一部分，用于从 URL 中获取数字，然后使用来自 FlexSlider 2.6.4 的内置帮助字符串作为其余部分：

```
$(window).on('load', function () {

  // Get number from hash part of URL
  var index = 0, hash = window.location.hash;
  if (hash) {
    index = /\d+/.exec(hash)[0];
    index = (parseInt(index) || 1) - 1;
  }

  // Initialise a basic FlexSlider
  $('.flexslider').flexslider({
  animation: "slide"
  });

  // Pass index into helper string to jump to specific slide
  $('.flexslider').flexslider(index); 
} 
```

希望这可以帮助任何在更高版本的 FlexSlider 上寻找解决方案的人:)

# python - url 中有 unicode 字符

> ID：11384477
> 
> 赞同：3
> 
> 时间：2012-07-08T15:51:34.783
> 
> 标签：python, django

例如在这个网址中：

```
(r'^company/لیست-مقالات/$','CompanyHub.views.docList') 
```

`لیست مقالات`部分我有 unicode 字符，但我收到此错误：

```
Caught UnicodeDecodeError while rendering: 'ascii' codec can't decode byte 0xd9 in position 0: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:57:23.297

您需要在字符串`u`前面加上 a `r`，或者将其包装在 unicode 方法中：

有关更多信息，请参阅[此](http://www.amk.ca/python/howto/unicode)内容。

> Unicode 字符串很像字符串，但在语法中使用前面的 'u' 字符指定：u'abc', u"def"。

[http://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:25:17.507

首先，要在 Python 中的字符串文字中使用非 ASCII 字符，您需要在源文件的顶部指定字符编码，例如：

```
# -*- coding: utf-8 -*- 
```

其次，如果您[将 Unicode 字符串传递给 django](https://docs.djangoproject.com/en/dev/ref/unicode/)，它通常会自己做正确的事情。在这种情况下，它应该转换 URL 中的所有非 ASCII 字符。如果不是，那么您可以[`django.utils.encoding.iri_to_uri()`](https://docs.djangoproject.com/en/dev/ref/utils/)显式调用。

# c# - 如何在 c# 中创建一个以常量作为参数的类？

> ID：11384478
> 
> 赞同：2
> 
> 时间：2012-07-08T15:51:36.670
> 
> 标签：c#, .net, oop

例如，在 XNA 框架中有一个`SpriteBatch`类。该`SpriteBatch.Begin()`方法接受如下参数：

```
spriteBatch.Begin(SpriteSortMode.FrontToBack, BlendState.AlphaBlend); 
```

如何创建一个以相同方式接受参数的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T15:53:56.150

创建一个[`Enum`](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.100%29.aspx)：

```
enum FooBarMode
{
     FrontToBack,
     BackToFront,
     Whatever
} 
```

并将其用作参数：

```
void DoSomething(FooBarMode mode)
{
    switch (mode) // just as an example
    {
        case FooBarMode.FrontToBack:
            Console.WriteLine("FrontToBack");
            break;
        case FooBarMode.BackToFront:
            Console.WriteLine("BackToFront");
            break;
        case FooBarMode.Whatever:
            Console.WriteLine("Whatever");
            break;
        default:
            throw new ArgumentOutOfRangeException("mode");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:54:58.380

参数类型是枚举 (SpriteSortMode) 和静态字段 (BlendState.AlphaBlend)。不同之处在于选择的复杂程度。当它有点复杂时，将枚举用于简单的选择和静态字段。

# spring - 在 Amazon Web Services 上使用 Spring Framework 运行 Tesseract OCR SDK 服务器端

> ID：11384480
> 
> 赞同：1
> 
> 时间：2012-07-08T15:51:41.270
> 
> 标签：spring, amazon-web-services, tesseract

我是一名从事玩具 Spring 项目的新手程序员。我想在文档上运行 OCR 识别，然后通过覆盖在原始图像上进行标记。我选择使用 Tesseract OCR、Spring 框架和 Amazon Web Services 来托管该项目。以下是我的问题：

1) 包含第三方库的最佳方式是什么，例如带有 Spring 框架的 Tesseract OCR？我可以只包含在 libs 文件夹中，还是我必须做更多的配置。

2) 是否可以在 AWS 上将处理分成 Web 服务器和应用程序服务器？我想在单独的服务器实例上处理图像。使用弹性加载，我什至应该这样做吗？

如果您知道有关 Spring 框架的良好介绍性文本，我很想了解它们。春天真的很酷，但它有一个陡峭的学习曲线！

谢谢

# rest - Restlet - 连接问题 - 406 不可接受 - 纯文本

> ID：11384494
> 
> 赞同：0
> 
> 时间：2012-07-08T15:53:06.423
> 
> 标签：rest, jersey, restlet

找不到其他地方的建议。

我正在为 Jersey(!) Restful 服务编写 Restlet JSE 客户端。我已经为此编写了一个 Jersey 客户端并且它正在工作，所以 jersey 服务还可以。现在我在编写 restlet 客户端时遇到问题：

我的服务根地址是：

```
 http://localhost:8080/com-project-core/rest, so I call:

 ClientResource = service = new ClientResource("http://localhost:8080/com-project-core/rest"); 
```

我的基本身份验证凭据是 admin 和 xxx，所以我打电话给：

```
 service.setChallengeResponse(ChallengeScheme.HTTP_BASIC, "admin", "xxx"); 
```

现在的问题：

```
 ClientResource service = new ClientResource("http://localhost:8080/com-project-core/rest/ping"); 
```

呼叫我的服务。之后我尝试

```
 String myString = service.get(String.class);
 System.out.println(myString); 
```

我得到一个：

```
 08.07.2012 17:41:48 org.restlet.engine.http.connector.HttpClientHelper start
 INFO: Starting the default HTTP client 
```

在我的输出中。不多！Junit 测试说：

```
 Not Acceptable (406) - Not Acceptable 
```

所以他可以找到资源但不能产生 @Produces("text/plain") ??

因此，当我在服务器端删除 @Produces("text/plain") 时，它就可以工作了！！

对于资源丰富的我的服务器端如下所示：

```
 @Path("/ping")
    @RolesAllowed({"admin", "user"})
    public class ConnectedResourceBean implements ConnectedResourceIF {

        @GET
        @Produces("text/plain")
        public String getPingMessage() throws NamingException {             

        return "Hello World";
       }
 } 
```

对于我的 pom 设置这个依赖项：

```
<dependency>
    <groupId>org.restlet.jse</groupId>
    <artifactId>org.restlet</artifactId>
    <version>${restlet.version}</version>
</dependency>

<dependency>
    <groupId>org.restlet.jse</groupId>
    <artifactId>org.restlet.ext.xstream</artifactId>
    <version>${restlet.version}</version>
</dependency> 
```

正如我所说，它与我的球衣客户合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:31:57.810

没办法：Restlet 有问题

```
 @Produces("text/plain") 
```

在泽西服务器端。有人可以向我解释这个事实吗？

编辑：

使它与

```
 <properties>
     <restlet.version>2.1-M3</restlet.version>
 </properties> 
```

# php - 从 AJAX 调用 PHP 函数不起作用

> ID：11384496
> 
> 赞同：2
> 
> 时间：2012-07-08T15:53:24.823
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 AJAX 调用 PHP 函数。下面是我使用的脚本。

```
<script type="text/javascript" src="jquery.1.4.2.js">

    $(document).ready(function () { 

               // after EDIT according to 
               // @thecodeparadox answer

       $('#local').click(function(e){
            e.preventDefault();
            e.stopPropagation();
            promptdownload();
       });
    });

        function promptdownload(e) 
        {
        $.ajax({
             type: "POST",
             url: "js/prompt.php",
             data: { "get" : "runfunction", "action" : "promptlocal" },
             success: function (response) {
             }    
         });
        }
</script> 
```

对应的PHP代码（prompt.php）为：

```
<?php
$path1 = "downloads/1.jpg";
$browserFilename1 = "Local Travel";
$mimeType1 = "image/jpeg";

function promptToDownload($path, $browserFilename, $mimeType)
{

    if (!file_exists($path) || !is_readable($path)) {

        return null;
    }

    header("Content-Type: " . $mimeType);
    header("Content-Disposition: attachment; filename=\"$browserFilename\"");
    header('Expires: ' . gmdate('D, d M Y H:i:s', gmmktime() - 3600) . ' GMT');
    header("Content-Length: " . filesize($path));
    // If you wish you can add some code here to track or log the download

    // Special headers for IE 6
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    $fp = fopen($path, "r");
    fpassthru($fp);
}

if ($_POST["action"] = 'promptlocal')
{
    promptToDownload($_GET[$path1], $browserFilename1, $mimeType1);//comments
}

?> 
```

这就是我编写应该触发该功能的按钮的方式：

```
<input type="button" id="local" name="local" value="Local Travel"> 
```

我的预期输出是让这个按钮提示用户：**“在哪里保存 1.jpg 文件”**。

但是我无法让它工作。

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T15:54:16.320

```
$('local').click(function(e){ 
```

应该

```
$('#local').click(function(e){ 
```

As `local`is an `id`so 你应该`#`在它之前使用。而且在您的 php 代码中也缺少一些引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:00:39.827

使用 Firebug(FF)、Dragonfly(Opera)、开发者工具(Chrome)。您可以查看所有 javascript 错误、警告和异常，并且可以查看 ajax 请求数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:53:39.240

```
data: { "get" : "runfunction", "action" : "promptlocal" }, 
```

尝试从“get”和“action”中删除引号。

像这样 ：

```
 data: { get : "runfunction", action : "promptlocal" }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:20:35.423

在我看来，您正在尝试使用 jquery/ajax 下载文件。你不会让它只使用 ajax。这个问题在stackoverflow上已经回答了好几次了。

我希望这个链接对你有帮助：[Ajax File Download using Jquery, PHP](https://stackoverflow.com/questions/3599670/ajax-file-download-using-jquery-php)

# caching - iOS模拟器试图访问键盘缓存

> ID：11384497
> 
> 赞同：1
> 
> 时间：2012-07-08T15:53:32.987
> 
> 标签：caching, ios5, keyboard

我在开发我的应用程序时收到了这些奇怪的日志。当屏幕键盘出现在屏幕上时会发生这种情况。

```
AppName[1001:f803] Opening '/Users/me/Library/Application Support/iPhone Simulator/5.1/Library/Caches/com.apple.keyboards/images/1859589221' failed: 'No such file or directory' (2)
AppName[1001:f803] 'INSERT INTO store VALUES (?,?,?,?,?,?,?,?)' constraint failed (19) 
```

两个日志同时出现。而且我的应用程序不使用核心数据或 sqlite。

知道为什么会这样吗？我可以忽略它们吗？我是不是该？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:53:56.457

@soemarko ridwan

尝试查看[Baffled by what to do to fix these errors (iOS) ...有什么建议吗？](https://stackoverflow.com/questions/10951770/baffled-by-what-to-do-to-fix-these-errors-ios-any-suggestions)

您可能需要清除键盘的 iOS 模拟器缓存。

尝试删除`/Users/your-user-name/Library/Application Support/iPhone Simulator/5.1/Library/Caches/com.apple.keyboards`目录并重新构建。

显然，您需要将“您的用户名”和“5.1”替换为您在模拟器上定位的 iOS 版本。

# c++ - float4::set_wxy （和其他 set-swizzle 操作）的更好的 SSE2 实现？

> ID：11384503
> 
> 赞同：4
> 
> 时间：2012-07-08T15:54:12.083
> 
> 标签：c++, sse, simd, intrinsics, sse2

我正在使用 SSE2/AVX 内在函数在 C++ 中编写符合 HLSL float4 的类型，目前我正在实现 HLSL 中可用于 float4 的所有 set-swizzle 操作。我试图找出一个最佳的 SSE2 实现来处理涉及（swizzle）设置 2 或 3 个组件的 set-swizzle 操作（因为使用一个 SSE shuffle 操作来实现 4-component set-swizzles 是微不足道的）。例如，如果没有至少 4/5 SSE shuffle ops，我想不出更好的方法来实现 say set_wxy，例如：

```
inline/__forceinline void float4::set_wxy(const float4& x)
{
    float4 tmp2 = *this;
    tmp2.set_wxyz(x);                         // set_wxyz = 1 x _mm_shuffle_ps
    const __m128 xyw_tmp = tmp2.zxyw().data;  // zxyw() = 1 x _mm_shuffle_ps
    const __m128 z_tmp = zxyw().data;         // zxyw() = 1 x _mm_shuffle_ps
    tmp2 = _mm_move_ss(xyw_tmp, z_tmp);
    set_zxyw(tmp2);                           // set_zxyw() = 1 x _mm_shuffle_ps
} 
```

在不使用 SSE2 之外的操作的情况下，是否有人对更好的实施有任何想法？因为我知道 SSE4/AVX 中的 _mm_blend_ps ，我将在通过预处理器条件可用时使用它，但我想至少支持一个仅 SSE2 的代码路径。提前致谢！

编辑：这个函数的行为的一个例子是：

```
float4 k(5,5,5,5);
k.set_wxy(float4(1,2,3,4));
// now k == (2, 3, 5, 1) 
```

基本上 set_wxy 按此顺序使用 x,y,z 的参数设置 w,x,y 分量，保留原始 z 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:52:46.850

您正在尝试模仿这行 HLSL，对吗？

```
vec2.wxy = vec1.xyz; 
```

`_mm_shuffle_ps`您可以通过使用可以以一种有限的方式组合两个向量的事实来到达某个地方。这是我的尝试：

```
// xyzw is vec1, XYZW is vec2
__m128 xxZZ = _mm_shuffle_ps(vec1, vec2, _MM_SHUFFLE(2, 2, 0, 0));
__m128 ZxZx = _mm_shuffle_ps(xxZZ, xxZZ, _MM_SHUFFLE(0, 2, 0, 2));
__m128 yzZx = _mm_shuffle_ps(vec1, ZxZx, _MM_SHUFFLE(1, 0, 2, 1));

vec2 = yzZx; 
```

# java - 将嵌套循环重新设计为方法的 Java 性能

> ID：11384508
> 
> 赞同：0
> 
> 时间：2012-07-08T15:54:55.420
> 
> 标签：java, performance, nested-loops

有人问我这个问题，在阅读了一些大的 O 资料后，我仍然无法弄清楚这两种设计中哪一种更快。

如果我在一种方法中有这种嵌套循环

```
public void someMethod(){
    for (a=0;a<10;a++){
     for (b=0;b<10;b++){
      for (c=0;c<10;c++){
       for (d=0;d<10;d++){
       }
      }
     }
    }
} 
```

我决定重新设计该方法并将2个内部for循环放置到另一个类似这样的方法中

```
public void someMethod(){
     for (a=0;a<10;a++){
         for (b=0;b<10;b++){
          2loopsMethod();
         }
        }
    }

public void 2loopsMethod(){
for (c=0;c<10;c++){
 for (d=0;d<10;d++){
 }
} 
```

}

我的问题是重新设计的方法会比原始代码快很多，因为我将它放在另一种方法中还是没有区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T15:57:45.860

它应该没有区别。您仍然有四级嵌套循环，因此将部分工作委派给方法调用不会更快。

（从技术上讲，方法调用的额外开销会使第二个示例*稍微*慢一些，但是如果您的代码正在做任何重要的事情，如果您甚至可以测量差异，我会感到惊讶。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:58:00.910

大 O 复杂度是一样的。我认为第一个版本更快，因为您没有 a*b 方法调用。理论上方法调用需要额外的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T16:02:14.007

在您的情况下，重新设计的方法稍微慢一点，因为方法调用需要额外的时间（不太可能，例如 C++ 内联函数）。如果增加循环迭代次数，您肯定会看到差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T12:46:43.467

由于方法上的编译器优化，第二个示例是首选：

```
public class Try1 {

	static int sum;
	public static void main(String[] args) {

		long startTime, endTime;

		while(true)
		{
			sum = 0;
			startTime = System.nanoTime();
			for (int i = 0; i < 2000; i++) {	
				for (int j = 0; j < 1000; j++) {
					sum = sum + i;
				}
			}

			endTime = System.nanoTime();
			System.out.println("no method took:" + (endTime -startTime) );

			sum = 0;
			startTime = System.nanoTime();
			for (int i = 0; i < 2000; i++) {	
				func(i);
			}
			endTime = System.nanoTime();
			System.out.println("with method took:" + (endTime -startTime) );

		}

	}

	private static final void func(int i) {
		for (int j = 0; j < 1000; j++) {
			sum = sum + i;
		}
	}

}
```

结束结果：

未采用方法：3077459 采用方法：2418027 未采用方法：5535578 采用方法：76014 未采用方法：3857167 采用方法：88844 未采用方法：3758701 采用方法：89165 未采用方法：3761588 采用方法：88844

# php - php错误调用非对象上的成员函数查询（）

> ID：11384514
> 
> 赞同：0
> 
> 时间：2012-07-08T15:55:26.587
> 
> 标签：php, fatal-error

db_class.php

```
<?php
class db_mysql
{
    private $dbhost; 
    private $dbusername;
    private $dbpassword;
    private $db;

    //Class is called with all parameters to make a successful connection.
    //
    function __construct($dbhost,$dbusername,$dbpassword,$db)
        {

        global $dbh;
        try {
                $dbh = new PDO("mysql:host=$dbhost;dbname=$db", $dbusername, $dbpassword);
            foreach($dbh->query('show tables;') as $row) {
            print_r($row);
            }
            //$dbh = null;
        } catch (PDOException $e) {
            print "Error!: " . $e->getMessage() . "<br/>";
            die();
        }

        }

    //Function to execute a query in the database and return result in a array
    //
    function db_mysql_query($queryst)
    {   
        foreach($dbh->query($queryst) as $row) {
            print_r($row);
            }
    }

} 
```

索引.php：

```
<?php
include 'db_class.php';

$db_m = new db_mysql('localhost','root','','arsaas'); 
$db_m->db_mysql_query('show tables;'); 
?> 
```

执行 index.php 会出现以下错误： 注意：未定义变量：第 32 行 C:\xampp\htdocs\srry\db_class.php 中的 dbh

致命错误：在 C:\xampp\htdocs\srry\db_class.php 第 32 行对非对象调用成员函数 query()

为什么在类构造函数中实例化并声明为全局变量时，它说 dbh 是未定义的变量？

任何帮助表示赞赏。提前致谢。

增强现实

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:05:03.073

db_mysql_query 方法没有定义变量 $dbh，因此尝试在非对象上调用方法查询不起作用。您可以在构造函数中将 PDO 对象 ($dbh) 存储到 db_mysql 对象中，并在调用 db_mysql_query 时使用它。如果您尝试仅使用一个数据库连接，那么我建议您考虑在 db_mysql 类中使用单例模式。[http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html)

# emacs - 如何自动添加议程列表中的文件夹下的所有组织文件？

> ID：11384516
> 
> 赞同：58
> 
> 时间：2012-07-08T15:55:39.213
> 
> 标签：emacs, org-mode

我使用 org-mode 来写笔记和 org-agenda 来组织所有笔记，尤其是搜索一些信息。通过关键字或标签。

**抄送我**可以通过输入的标签搜索一些文件，**抄送作为**关键字，来自org-agenda的那些功能很好用，但是，我需要手动将org-file添加到议程列表中。

**我在.emacs**中添加了一些代码，例如

```
(setq org-agenda-files (list "path/folder/*.org")) 
```

或者

```
(setq org-agenda-files (file-expand-wildcards "path/folder/*.org")) 
```

但是，两者都未能自动将指定文件夹下的文件添加到议程列表中，因此我无法在这些组织文件中搜索关键字或标签，除非我打开一个组织文件并键入**Cc [**将其添加到议程中-列表。

如何使文件夹下的所有组织文件自动添加到议程中？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-08T16:54:18.047

只需命名目录就足够了。例如，这对我很有用：

```
(setq org-agenda-files '("~/org")) 
```

也看看`org-agenda-text-search-extra-files`; 它允许您添加仅包含在文本搜索中的额外文件。一个典型的值可能是，

```
(setq org-agenda-text-search-extra-files
      '(agenda-archives
        "~/org/subdir/textfile1.txt"
        "~/org/subdir/textfile1.txt")) 
```

**警告：**如果您在启动 Emacs 后将文件添加到目录中，则不会包含该文件。

**编辑：**（2018）要将具有特定扩展名的所有文件包含在额外文件列表中，您可以尝试以下我写过的函数（[此处可能提供更新的版本](https://github.com/suvayu/.emacs.d/blob/master/lisp/nifty.el)）。

```
;; recursively find .org files in provided directory
;; modified from an Emacs Lisp Intro example
(defun sa-find-org-file-recursively (&optional directory filext)
  "Return .org and .org_archive files recursively from DIRECTORY.
If FILEXT is provided, return files with extension FILEXT instead."
  (interactive "DDirectory: ")
  (let* (org-file-list
         (case-fold-search t)         ; filesystems are case sensitive
         (file-name-regex "^[^.#].*") ; exclude dot, autosave, and backupfiles
         (filext (or filext "org$\\\|org_archive"))
         (fileregex (format "%s\\.\\(%s$\\)" file-name-regex filext))
         (cur-dir-list (directory-files directory t file-name-regex)))
    ;; loop over directory listing
    (dolist (file-or-dir cur-dir-list org-file-list) ; returns org-file-list
      (cond
       ((file-regular-p file-or-dir)             ; regular files
        (if (string-match fileregex file-or-dir) ; org files
            (add-to-list 'org-file-list file-or-dir)))
       ((file-directory-p file-or-dir)
        (dolist (org-file (sa-find-org-file-recursively file-or-dir filext)
                          org-file-list) ; add files found to result
          (add-to-list 'org-file-list org-file))))))) 
```

你可以像这样使用它：

```
(setq org-agenda-text-search-extra-files
      (append (sa-find-org-file-recursively "~/org/dir1/" "txt")
              (sa-find-org-file-recursively "~/org/dir2/" "tex"))) 
```

**编辑：**（2019）正如@mingwei-zhang 的回答和@xiaobing 的评论中提到的，`find-lisp-find-files`来自`find-lisp`并且`directory-files-recursively`也提供了这个功能。但是，请注意在这些情况下，文件名参数是（贪婪的）正则表达式。所以类似的东西`(directory-files-recursively "~/my-dir" "org")`会给你所有的组织文件，包括备份文件（`*.org~`）。要仅包含`*.org`文件，您可以使用`(directory-files-recursively "~/my-dir" "org$")`.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-01-31T23:40:02.230

递归搜索 org 文件有一种更简单的方法（由[@xiaobing](https://stackoverflow.com/users/1418828/xiaobing)提供）：

```
(setq org-agenda-files (directory-files-recursively "~/org/" "\\.org$")) 
```

编辑：您还可以通过添加数组过滤器从查找中过滤掉某些目录。例如，过滤掉`xxxx/xxx/daily/`目录中的所有 org 文件：

```
(setq org-agenda-files 
      (seq-filter (lambda(x) (not (string-match "/daily/"(file-name-directory x)))) 
       (directory-files-recursively "~/Notes/roam" "\\.org$")
       )) 
```

对于 Emacs <25，您可以使用`find-lisp-find-files`：

```
(load-library "find-lisp")
(setq org-agenda-files
   (find-lisp-find-files "FOLDERNAME" "\.org$")) 
```

# c++ - 使用 boost 编译时出错

> ID：11384521
> 
> 赞同：4
> 
> 时间：2012-07-08T15:56:20.570
> 
> 标签：c++, boost, include

我编写了使用的项目`<boost/thread/locks.hpp>`，我将`include`目录添加到链接器`Additional Include directories`，并将`lib`文件夹添加到链接器。但是当我尝试构建解决方案时，错误：

> 错误 1 ​​错误 LNK1104：无法打开文件 'libboost_thread-vc100-mt-sgd-1_50.lib'

我在 lib 目录中搜索了此文件，但在 lib 目录中没有此名称的文件。我找到了具有相似名称的文件 `libboost_thread-vc100-mt-gd-1_50`。

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T17:04:09.617

您的问题似乎与[此问题](https://stackoverflow.com/questions/3460316/boost-autolinks-libraries-which-are-not-build-by-boost-but-the-intented-once-ar)中的问题非常相似。根据[此处](http://www.boost.org/more/getting_started/windows.html#library-naming)描述的命名约定，链接器要使用的库与您拥有的库之间的唯一区别是前者静态链接到 c++ 标准库和编译器运行时支持库。我可以想到两种方法来解决这个问题：

1.  **获取链接器想要的库**
    。如果您使用了 boostpro 安装程序：

    > 确保选中复选框`Multithreaded debug, static runtime`（我建议您全部标记）

    湾。如果您自己构建了库：

    > 打开一个控制台窗口
    > 将目录更改为您的 boost 根
    > 以下命令构建所需的库：（
    > `b2 toolset=msvc-10.0 --with-thread address-model=64 variant=debug link=static runtime-link=static runtime-debugging=on stage`
    > 我建议使用
    > `b2 toolset=msvc-10.0 address-model=64 --build-type=complete stage`：）

2.  **使链接器使用您想要的库**
    。使自动链接使用共享库

    > 您可以在包含头文件之前定义 BOOST_THREAD_DYN_LINK（仅影响线程库）或 BOOST_ALL_DYN_LIB（影响所有 boost 库）（或者最好在您的 VC 项目预处理器设置中）。这将使链接器尝试使用该库`boost_thread-vc100-mt-gd-1_50.lib`（请注意缺少 lib- 前缀）。

    湾。禁用自动链接

    > 您可以定义 BOOST_ALL_NO_LIB 然后在链接器选项中添加库的确切名称

# html - 当鼠标悬停在css3上时，如何使图像出现在另一个图像上？

> ID：11384523
> 
> 赞同：1
> 
> 时间：2012-07-08T15:56:28.753
> 
> 标签：html, css, hover

嘿，当鼠标悬停在这个网站上时，我想要一个放大镜或一些图像弹出另一个图像 - [http://www.elegantthemes.com/gallery/](http://www.elegantthemes.com/gallery/)当您将鼠标悬停在图像上时，图像会出现在它上面。有谁知道如何实现这一目标？

不确定您是否需要任何代码，但这是我的 img 标签的 css：

```
img {
width: 600px;
height: 342px;
border-radius: 1px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:00:51.830

你可以这样做

**HTML**

```
<div id="yourImage" ></div> 
```

**CSS**

```
#yourImage {
 background-image: url('image1.jpg');
}

#yourImage:hover {
 background-image: url('overimage.jpg'), url('image1.jpg');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T15:59:08.620

为此有一个[jquery 插件](http://buildinternet.com/project/mosaic/1.0/)。

第一个效果就是您要寻找的效果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T16:01:40.660

你可以试试[这个](http://www.cssplay.co.uk/menu/magnify.html)。我认为它只使用 CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T16:00:44.197

您需要检查 CSS`position`属性，以便将两个元素放在同一个位置。然后只是改变`opacity`悬停图像的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T18:51:31.103

@Mateusz 有最好的答案，但我会通过添加 css 转换来改进它：

```
-webkit-transition: opacity 1s ease-in;
-moz-transition: opacity 1s ease-in;
-o-transition: opacity 1s ease-in;
transition: opacity 1s ease-in; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T20:12:52.140

试试这个：

HTML：

```
<div class="your-img">
    <div class="your-hover"></div>
</div> 
```

CSS：

```
.your-img {
    width: 300px; /* your image width and height here */
    height: 225px;
    background-image: url('../img/image_01.png');
}
.your-hover {
    width: 300px;
    height: 225px;
    opacity: 0;
    filter: alpha(opacity = 0);
    background-image: url('../img/image-hover_01.png');
}
.your-hover:hover {
    opacity: 0.5;
    filter: alpha(opacity = 50);
} 
```

`filter: alpha`适用于 IE，希望对您有所帮助。

# javascript - 这是正确的 json 语法吗？

> ID：11384526
> 
> 赞同：1
> 
> 时间：2012-07-08T15:56:35.977
> 
> 标签：javascript, json, d3.js

我正在试验 d3 并尝试从 json 文件中读取数据。

我目前要保存在 json 文件中的是带有 x 和 y 坐标的文本的单词，这些单词应写在输出 .html 文件中。

你能告诉我这个选择的 json 语法方法是否正确吗？

```
{"text": [
    {
      "Word": "Hi",
      "X": 300,
      "Y": 400,
    }
    {
      "Word": "Hello",
      "X": 500,
      "Y": 100,
    }
]} 
```

非常感谢你的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:58:35.297

不，它无效。

*   第 5 行和第 10 行有一些额外的逗号。
*   第 6 行缺少逗号。

这是有效的 JSON：

```
{
    "text": [
        {
            "Word": "Hi",
            "X": 300,
            "Y": 400
        },
        {
            "Word": "Hello",
            "X": 500,
            "Y": 100
        }
    ]
} 
```

您可以使用[JSONLint](http://jsonlint.com/)来验证您的 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:58:46.750

删除每个对象末尾的多余逗号。

# android - 如何在eclipse中调试时终止android应用程序

> ID：11384527
> 
> 赞同：7
> 
> 时间：2012-07-08T15:56:36.417
> 
> 标签：android, eclipse, debugging

当我在调试透视图中右键单击并选择终止时，Eclipse 断开连接，但该过程继续在设备上运行。我怎样才能让程序实际终止，以便在设备上不再执行代码？我在看一个错误吗？我不记得这是否适用于伽利略。我目前正在使用 Windows 7 和 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T16:19:45.333

按钮“停止进程”在设备视图中（窗口>>显示视图>>设备）。![在此处输入图像描述](../Images/f1f754cc4c3213468a3c8f7cbf38f092.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:58:20.053

> 我怎样才能让程序实际终止，以便在设备上不再执行代码？

您可以从 DDMS 角度终止该过程。

> 我在看一个错误吗？

并不真地。从 Debug 的角度来看，Terminate 至少对于 Android 应用程序始终意味着“终止调试会话”，而不是“终止应用程序”或“以极端偏见终止应用程序的作者”。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T07:20:07.123

我是安卓新手。我发现在 avd 上停止所有先前安装且仍在运行的应用程序（如实际计划那样）的正常方法是重新启动 avd 并选中“擦除用户数据”选项。玛丽亚

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T16:08:36.417

单击下图中指向的此断开连接按钮。

您可以从窗口>>打开透视图打开调试窗口。

![调试窗口](../Images/499feb36aba5e0fe8e0367543d0c1348.png)

# java - 与套接字保持恒定连接

> ID：11384538
> 
> 赞同：1
> 
> 时间：2012-07-08T15:58:08.353
> 
> 标签：java, sockets

我正在尝试为多线程服务器程序保持连接打开。当我点击一个按钮时，我希望它向所有连接的客户端发送一条测试消息。

```
public void run() {
    try {
        Scanner in = new Scanner(socket.getInputStream());
        PrintWriter out = new PrintWriter(socket.getOutputStream());
        readUpdate(out, in);
        while(true){sendUpdate(out);}
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

使用大量 CPU。

这是我的 sendUpdate 方法。

```
private void sendUpdate(final PrintWriter out) {
    new Thread(new Runnable() {

        public void run() {
            if(Server.send) {
                try {
                    if (Server.command != "idle") {
                        System.out.println("Sending");
                        out.println("!msg@" + Server.command);
                        out.flush();
                        Server.send = false;
                        Thread.sleep(100);
                    }
                } catch (Exception ex) {
                }
            }
        }
    }).start();
} 
```

如果有人可以帮助我保持连接打开并准备发送数据，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:45:26.163

如果您的服务器可以启动消息，您的客户端也可以，您可能需要一个单独的线程读取和写入。一个线程对于请求-响应式通信是有意义的，您可以在其中阻塞下一个客户端请求，进行一些服务器端处理，响应客户端，然后再次阻塞。

但是，如果您需要阻止两个单独的条件（从客户端接收消息并单击服务器上的按钮），那么您应该有两个单独的线程。否则，您会发现自己需要反复唤醒线程以检查其中任何一个条件是否为真。

所以创建两个线程，一个是你的`Scanner`（做`readUpdate`逻辑的），另一个是你的`PrintWriter`。这就是您的输出处理程序的样子：

```
public class WriteHandler implements Runnable {
    private final PrintWriter out;
    private final BlockingQueue<String> messageQueue = new LinkedBlockingQueue<String>();

    //initialize the above in a constructor;

    public void run() {
       while(true) {
          String nextMessageToWrite = messageQueue.poll();
          out.println(nextMessageToWrite);
       }
    }

    public void send(String message) {
        messageQueue.add(message);
    }
} 
```

这使用了一个[阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)，这是一种比检查睡眠循环更好的并发机制。然后当点击按钮时，你可以有这样的东西：

```
public void actionPerformed() {
    for ( WriteHandler handler : handlers ) {
        handler.send("PING!");
    }
} 
```

# c# - QueryStrings.AllKeys != RawUrl?

> ID：11384540
> 
> 赞同：0
> 
> 时间：2012-07-08T15:58:28.650
> 
> 标签：c#, asp.net-mvc-4, request.querystring

请求 ["fileName"] 返回 null?? 为什么？

![鼠标悬停链接](../Images/12e2da7f7d2b0655d1018b1c0ac946a5.png)

完整图片：http: [//i.stack.imgur.com/U1MzX.jpg](https://i.stack.imgur.com/U1MzX.jpg)

## 控制器：

![动作删除](../Images/b2fdcb93822f3d0509e6bd727e0d55df.png)

完整图片：http: [//i.stack.imgur.com/DCQNG.jpg](https://i.stack.imgur.com/DCQNG.jpg)

## 路线

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "AdminLogin",
        "Admin/",
        new { controller = "Account", action = "Login" }
        );

    //NossaIgreja/{nomePastor}
    routes.MapRoute(
        "Pastor", // Route name
        "Pastor/{id}", // URL with parameters
        new { controller = "NossaIgreja", action = "Pastor" } // Parameter defaults
        );

    routes.MapRoute(
        "Download", // Route name
        "Downloads/Boletim/{year}/{week}", // URL with parameters
        new { controller = "Downloads", action = "DownloadBoletim" },  // Parameter defaults
        new { year = @"\d+", week = @"\d+" }
        );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        , new string[] { "SextaIgreja.Web.Controllers" }
    );

} 
```

## 区域登记

```
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Admin";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional },
            new string[] { "SextaIgreja.Web.Areas.Admin.Controllers" }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:28:53.203

您的控制器操作应采用“fileName”参数，而不是执行 Request["fileName"]。只要您的查询字符串参数与控制器中的参数名称匹配，mvc 就应该自动传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:23:13.903

如果 Remover 是一个 MVC 操作，那么我在 Remover Action 中看不到名为 fileName 的参数

这意味着当调用 Remover 操作时，查询字符串中的文件名没有自动绑定模型

# c# - 从互联网上获取汇率

> ID：11384541
> 
> 赞同：5
> 
> 时间：2012-07-08T15:58:31.473
> 
> 标签：c#, windows, winforms, visual-studio-2010, visual-studio

我想做的是，从互联网上获取汇率。经过长时间的研究，我发现了这个功能。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
        string xmlResult = null;
        string url;
        url = "http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=" + TextBox1.Text + "&ToCurrency=" + TextBox2.Text + "";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader resStream = new StreamReader(response.GetResponseStream());
        XmlDocument doc = new XmlDocument();
        xmlResult = resStream.ReadToEnd();
        doc.LoadXml(xmlResult);
        Label1.Text = "Current Exchange Rate for " + TextBox1.Text.ToUpper() + " ---> " + TextBox2.Text.ToUpper() + " value " + doc.GetElementsByTagName("double").Item(0).InnerText;
        }
        catch(Exception ex)
        {
            Label1.Text="Not a valid Currency or Try again later";
        }
    } 
```

但`http://www.webservicex.net/`不支持 AZN（阿塞拜疆马纳特）到美元的转换，反之亦然。我想做的是，如果可以连接到互联网并获得费率。否则使用书面函数进行转换（我已经写过）。

你有什么建议，我怎样才能获得美元和 AZN 的当前汇率（或者只是通过发送美元或 AZN 来获得结果）？无论如何可以从 Windows 窗体应用程序中获取它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:56:13.757

这个简单的算法将在键值对列表中为您提供所需的一切。

```
public static List<KeyValuePair<string, decimal>> GetCurrencyListFromWeb(out DateTime   currencyDate)
    {
        List<KeyValuePair<string, decimal>> returnList = new List<KeyValuePair<string, decimal>>();
        string date = string.Empty;
        using (XmlReader xmlr = XmlReader.Create(@"http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"))
        {
            xmlr.ReadToFollowing("Cube");
            while (xmlr.Read())
            {
                if (xmlr.NodeType != XmlNodeType.Element) continue;
                if (xmlr.GetAttribute("time") != null)
                {
                    date = xmlr.GetAttribute("time");
                }
                else returnList.Add(new KeyValuePair<string, decimal>(xmlr.GetAttribute("currency"), decimal.Parse(xmlr.GetAttribute("rate"), CultureInfo.InvariantCulture)));
            }
            currencyDate = DateTime.Parse(date);
        }
        returnList.Add(new KeyValuePair<string, decimal>("EUR", 1));
        return returnList;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:04:29.460

> 但是[http://www.webservicex.net/](http://www.webservicex.net/)不支持 AZN（阿塞拜疆马纳特）到美元，反之亦然

所以？计算通过另一种货币的交叉汇率。

AZN 可能是一种交易量或敞口非常有限的边缘货币。询问 OANDA (http://www.oanda.com) 我收到了一些报价，包括美元兑换 (http://www.oanda.com/currency/cross-rate/result?quotes=GBP"es=EUR"es=JPY"es= CHF"es=USD"es=AZN&go=Get+my+Table+%3E)

可能 webservicesx.net 只是没有主要货币之外的东西的价格。

使用另一个报价。FXCM 和 Oanda 可能有您可以订阅的 API - 可能需要付费。

或者，您可以查看是否可以计算交叉 - 如果有价格，则从 AZN 到另一种货币，然后从那里到美元。这在外汇交易中经常发生 - 令人愉快 - 美元大多不需要交叉汇率计算。

> 无论如何可以从 Windows 窗体应用程序中获取它吗？

当你在网上问一个 API 的时候，不管是 winforms、webforms、powershell 还是 vb 脚本，API 支持与否，与你使用的 UI 技术无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:29:05.603

也许这会有所帮助。我用谷歌搜索了一些替代的网络服务，但我看到的那些不支持 AZN。但我没有花很多时间做那件事，那是你的工作。我确实找到了这个：
[http ://www.transfermate.com/en/free_currency_converter.asp](http://www.transfermate.com/en/free_currency_converter.asp)

您可以将其添加到您的应用程序中，可能是通过添加浏览器控件并将其嵌入自定义页面并将结果检索到您的主窗体。但最终，你自己回答了这个问题：

> 否则使用书面函数进行转换（我已经写过）。

如果您已经找不到解决方案，请自行构建。

也可以试试： [https](https://developers.google.com/finance/) ://developers.google.com/finance/和[http://openexchangerates.org/](http://openexchangerates.org/)

# android-emulator - Platform 4.0.3 x86 - 如何在电话模式下以更高分辨率运行模拟器

> ID：11384544
> 
> 赞同：1
> 
> 时间：2012-07-08T15:58:42.580
> 
> 标签：android-emulator, android-source

知道如何在 4.0.3 平台上以电话模式运行 720x1280 res 的模拟器吗？
（不使用avd）

使用参数运行： emulator-x86 -skin WXGA720 以平板模式启动模拟器。（奇怪的是在 4.0.4 中它以电话模式启动 - hardware.ini 和层文件没有区别）
有人有答案吗？

谢谢，阿西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:41:30.283

您能定义“手机模式”和“平板电脑模式”的含义吗？据我所知，Android 没有这样的区别。

如果您想使用自定义屏幕分辨率运行，您可以在运行模拟器创建命令时手动设置分辨率，而不是使用皮肤名称，例如获取类似 Nexus 7 的设备，默认情况下它是纵向的：

```
android create avd --name nexus7 --target android-16 --skin 720x1280 
```

虽然目前没有办法从命令行设置屏幕密度（或其他硬件属性）；如果您想这样做，最好从`android`GUI 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:31:21.280

4.0.3平台，在运行“emulator -skin WXGA720”时，由于某种原因，模拟器没有读取develop/tools/emulator/skins/WXGA720/下的hardware.ini文件
，原因是模拟器以平板模式打开不足液晶密度。在 hardware.ini 中，它设置为 320，但模拟器不解释它并将密度设置为 160。

我能够找到的解决方案是破解模拟器硬件负载属性。
在 external/qemu/vl-android.c
中更改行
long density = android_hw->hw_lcd_density;
至长密度 = 320；

当然最后，做平台。

注意：如果您想
在 external/qemu/android/hardware-properties.ini中显示系统栏（主页和返回按钮），
请将 hw.mainkeys 设置为 no

阿西穆格拉比

# c# - 尝试使用 WebAPI 时出现“找不到与名为‘SampleSlashBaseService’的控制器匹配的类型”

> ID：11384552
> 
> 赞同：20
> 
> 时间：2012-07-08T15:59:17.420
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api, attributerouting

我有一个名为 SlashBaseService 的基础 ApiController 的 webapi 项目：

```
[RouteArea("uBase")]
public abstract class SlashBaseService : ApiController
{
} 
```

生成的 dll 用于 WebForms 项目，因此我还有一个 WebActivator 类，其中包含以下代码来生成路由：

```
RouteTable.Routes.MapHttpAttributeRoutes(config =>
{
    // Get all services inheriting from SlashBaseService
    foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
    {
        foreach (var type in assembly.GetTypes())
        {
            if (type.IsSubclassOf(typeof(SlashBaseService)))
            {
                // Scan assembly
                config.ScanAssembly(assembly);

                // Skip the remaining types in this assembly
                break;
            }
        }
    }
});

RouteTable.Routes.MapHttpRoute(
    name: "DefaultBase",
    routeTemplate: "base/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }); 
```

我在一个单独的程序集中也有一个测试服务：

```
public class SampleSlashBaseService : SlashBaseService
{
    [GET("TestOpenMethod")]
    public string GetTestOpenMethod()
    {
        return "Hello anonymous!";
    }

    [GET("Echo/{message}")]
    public string GetEcho(string message)
    {
        return message;
    }
} 
```

所有非常简单的东西。问题是当我尝试转到其中一个生成的 url 时，我收到以下消息：

> 找不到与名为“SampleSlashBaseService”的控制器匹配的类型。

/routes.axd 中的路由列表看起来也正确。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-09T14:02:21.670

发现了问题。

`ApiControllers`类名需要以“Controller”为后缀，而我的不是。改变它以`SampleSlashBaseController`解决问题。

注意：可以像我一样使用“服务”作为后缀，但是您必须实现`IHttpControllerSelector`如下所述的自定义：http: [//netmvc.blogspot.no/2012/06/aspnet-mvc-4-webapi-支持区域in.html](http://netmvc.blogspot.no/2012/06/aspnet-mvc-4-webapi-support-areas-in.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-09T01:20:19.030

您还需要确保 Controller 类是**Public**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-19T18:45:51.643

在我的情况下，控制器被正确定义，但没有标记为公共。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-12T14:38:05.227

就我而言，在不同的文件夹中有两个同名的控制器。重命名它们立即解决了问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-25T15:16:04.350

对于它的价值，我遇到了这个问题，我的问题是我手动添加的类没有从 ApiController 继承。类定义必须`public class QueueController : ApiController`不是`public class QueueController`。多么愚蠢的事情可以忽略。

# nhibernate - 在 uniqueidentifier 上使用 Join 时出错 - 将 uniqueidentifier 转换为数字

> ID：11384553
> 
> 赞同：0
> 
> 时间：2012-07-08T15:59:19.787
> 
> 标签：nhibernate, join, sql-server-ce, fluent

我在 sqlserverce 上使用 Fluent NHibernate。使用 NHibernate QueryOver 我尝试检索一行 - NHibernate 自动生成一个连接查询，我得到以下异常：

```
[SQL: SELECT tag FROM CheckpointToProtectionGroup cp2pg 
      JOIN CheckpointStorageObject cp ON cp.id = cp2pg.checkpoint_id 
      JOIN ProtectionGroupCheckpointStorageObject pg ON pg.id = cp2pg.vpg_id 
      WHERE cp.CheckpointIdentifierIdentifier = 1111  AND 
            pg.ProtectionGroupIdentifierGroupGuid = 
               11111111-1111-1111-1111-111111111111]
---> System.Data.SqlServerCe.SqlCeException: 
     The conversion is not supported. 
     [ Type to convert from (if known) = uniqueidentifier, 
       Type to convert to (if known) = numeric ] 
```

据我所知，它似乎试图将值 - 11111111-1111-1111-1111-111111111111 转换为数字，但这个值是一个 Guid 字段：

```
CheckpointToProtectionGroup checkpointToProtectionGroup = Session
            .QueryOver<CheckpointToProtectionGroup>()
            .JoinQueryOver( row => row.ProtectionGroup)
            .Where(row => row.ProtectionGroupIdentifier.GroupGuid == 
                   protectionGroupIdentifier.GroupGuid)
            .SingleOrDefault(); 
```

ProtectionGroupIdentifier.GroupGuid 属于 Guid 类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:22:21.107

看起来您的`GroupGuid`值未正确转换为 SQL。它应该在值周围加上单引号。

```
pg.ProtectionGroupIndentifierGroupGuidId = '11111111-1111-1111-1111-111111111111' 
```

SQL Server 尝试将左侧值从`uniqueidentifier`( `Guid`) 转换为`numeric`，因为右侧值是`numeric`具有少量操作数的数值减法运算。

You have `protectionGroupIdentifier.GroupGuid` value in `Where` part of your QueryOver expression. Check if `GroupGuid` is indeed `Guid` property. If it's an `object` property, cast it to `Guid`.

# .htaccess - .htaccess 不适用于 codeigniter 子域和目录安装

> ID：11384554
> 
> 赞同：0
> 
> 时间：2012-07-08T15:59:54.143
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我正在尝试将 CI 安装在一个也在子域上的目录下。所以我的基本网址看起来像[http://subdomain.domain.com/ci/](http://subdomain.domain.com/ci/)

以下 htaccess 在域的根目录上运行良好，但在目录上运行良好，浏览器说存在重定向循环错误。

这是我的代码：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^sub\.domain\.com/ci/$
RewriteRule ^(.*)$ http://sub.domain.com/ci/$1 [L,R=301]

RewriteCond $1 !^(index\.php|assets)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我对mod重写不是很熟练，任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:14:55.330

在您的 /ci 目录中，您的 htaccess 应如下所示

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f # this means if the requested file name doesnt exist 
RewriteCond %{REQUEST_FILENAME} !-d # this means if the requested directory doesnt exist 
RewriteRule ^(.*)$ index.php [L] 
```

根据您的上述评论，应该足够了

# eclipse - 使用 Eclipse IDE 通过 PyDev 进行调试

> ID：11384559
> 
> 赞同：0
> 
> 时间：2012-07-08T16:00:24.050
> 
> 标签：eclipse, debugging, pydev

是否有任何分步教程或指南可以让我在 Eclipse 中使用 PyDev 来调试我的 python 代码。我在网上能找到的最好的就是[这里](http://pydev.org/manual_adv_debug_console.html)，但是它仍然没有很好地解释如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:06:18.963

您在 pydev.org 上链接的高级页面之前的页面是一步一步的，应该可以帮助您入门。

[http://pydev.org/manual_adv_debugger.html](http://pydev.org/manual_adv_debugger.html)

# javascript - 使用 JavaScript 执行命令行调用

> ID：11384565
> 
> 赞同：1
> 
> 时间：2012-07-08T16:01:26.717
> 
> 标签：javascript, jsp, maven

我想从javascript代码执行一个maven命令（mvn test），但它不起作用这是我的Servlet的代码；

```
 out.println("<script type='text/javascript'> " +
      "function f(){ try{var wsh = new ActiveXObject('WScript.Shell'); " +
      "wsh.Run('cd C:/Users/Amira/junoWorkspace/TestProjectUI');" +
      "wsh.Run('mvn -Dtest=MyClassTest test') } catch(err){} } </script> "); 

 out.println("<body><input type='submit' value='Execute Test' onclick='f()'>  </body>"); 
```

所以任何想法请如果有更好的解决方案请提及它干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:03:56.823

你不能那样做。
曾经​​​​​​​

# ios - AFHTTPClient requestWithMethod ParameterEncoding

> ID：11384568
> 
> 赞同：2
> 
> 时间：2012-07-08T16:01:44.950
> 
> 标签：ios, http-post, afnetworking, nsmutableurlrequest

我想将 AFNetworking 用于带有一些参数的 HTTP Post 方法，并且两个值具有相同的参数。我试过了：

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSDictionary *params = [NSDictionarydictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", @"value3", @"param3", @"value4", @"param3", nil];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/index.php" parameters:params]; 
```

我使用了 Charles Proxy，发现我的请求中缺少 value4。

然后我尝试了：

```
NSString *parameter = @"param1=value1&param2=value2&param3=value3&param3=value4";
[request setHTTPBody:[parameter dataUsingEncoding:NSUTF8StringEncoding]]; 
```

这奏效了。

现在我想知道我是否对 AFNetworking 做错了，或者这是 AFNetworking 的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:14:20.973

您的问题不在于 AFNetworking，而在于 NSDictionary。您不能有两个具有相同键的条目。

在这种情况下，它意味着：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", @"value3", @"param3", @"value4", @"param3", nil]; 
```

应该换成以下

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", @"value3,value4", @"param3", nil]; 
```

组合一个键的两个值。

在一个键中组合参数的另一种方法是使用 NSArray。例如：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", [NSArray arrayWithObjects:@"value3",@"value4",nil], @"param3", nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:05:16.387

错字，使用 param4 而不是 param3 作为最后一个键值。

```
NSDictionary *params = [NSDictionarydictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", @"value3", @"param3", @"value4", @"param3", nil] 
```

更正了一个

```
NSDictionary *params = [NSDictionarydictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", @"value3", @"param3", @"value4", @"param4", nil] 
```

# hadoop - hadoop - 如果任务失败，我该如何干预？

> ID：11384569
> 
> 赞同：0
> 
> 时间：2012-07-08T16:02:00.823
> 
> 标签：hadoop

我有一份解析许多网址的工作。如果每个任务处理单个 url，那么如果单个 url 的解析抛出异常，则任务将失败。在常规的 hadoop 行为中，此任务将被重新尝试 3 次，之后该作业将失败。我可以在任务失败的情况下以某种方式进行干预并编写自己的代码来忽略任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:17:32.917

你为什么不捕捉异常？

无论如何，您可以适当地设置[maxMapTaskFailuresPercent](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapred/JobConf.html#setMaxMapTaskFailuresPercent%28int%29)和[maxReduceTaskFailuresPercent](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapred/JobConf.html#setMaxReduceTaskFailuresPercent%28int%29)。

# javascript - 处理多个点击事件的最佳方式

> ID：11384571
> 
> 赞同：4
> 
> 时间：2012-07-08T16:02:09.700
> 
> 标签：javascript, jquery, html, jquery-mobile

在我的应用程序中单击链接时，我正在尝试完成一些操作。

例如，我正在创建一个在文档中有多个内部链接的手册。目前，我会像这样处理它们：

```
function waitForClick()
{
    $('#about').click(function()
    {
        $('#container').slideDown();
    });

    $('#using').click(function()
    {
          changeContent...
    });

    <!-- etc, etc -->            

} 
```

有没有更好的方法来处理多个点击事件，这样我就不需要每个项目的事件。我确信必须有一种方法可以委托单击了哪个项目。

HTML：

```
<li><a id="about" href="#">About this Application</a></li>
<li><a id="using" href="#">Using this Manual</a></li>
<li><a id="pages" href="#">Pages:</a></li>

<!-- etc, etc --> 
```

这应该是手册的目录。所以会有很多本地链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:09:43.043

您可以将点击事件绑定到类而不是 ID。

```
<a class="navigationLink" href="home.com">Home</a>
<a class="navigationLink" href="about.com">About</a>
<a class="navigationLink" href="contactus.com">Contact Us</a>

$(".navigationLink").click(function() {
    //Do something cool
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:07:07.633

我个人会使用类似下面的东西。它避免了单独投射大量事件，并且可扩展性足以满足您的目的。您所做的只是为每个应该有事件的元素添加一个“clickEventClasss”类（或任何您喜欢的）并添加一个 id，以便您可以识别每个元素。

```
function waitForClick()
{

    $('.clickEventClass').click(function() {

        var id = $(this).attr('id');

        switch(id) {
            case 'about':
            //Logic
            break;
        case 'using':
            //Logic
            break;
        }

    });         

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:10:39.910

您可以使用将点击事件分配给的类。

在此之后，以下是可能的：

```
$(".class").click(function()
{
    if($(this).attr("id") == "about")
    {
        //code here
    }
    else if($(this).attr("id") == "using")
    {
        //code here
    }
} 
```

# jquery - 如何根据选择一组单独的单选按钮来更改按钮的“值”和“id”

> ID：11384576
> 
> 赞同：2
> 
> 时间：2012-07-08T16:03:07.243
> 
> 标签：jquery, forms, button, radio-button

我有一个包含两个单选按钮和一个按钮的表单。我想根据选择的两个单选按钮中的哪一个来更改按钮的值。我的猜测是使用 jQuery 比使用 PHP 更好，但如果这是错误的假设，请告诉我。

这是 HTML 的示例：

```
<form>
  <ul>
    <li>
     <input type="radio" name="basic" value="basic1">
     <label for="basic1">Basic 1</label>
    </li>
    <li>
    <input type="radio" name="basic" value="basic2">
    <label for="basic2">Basic 2</label>
    </li>
  </ul>
  <button id="basic1" name="startReg" type="submit" value="basic1">Confirm</button>
</form> 
```

简而言之，我想用选中的单选按钮的值替换按钮 id 和值。因此，如果选择了第二个单选按钮，则按钮标签将如下所示：

```
<button id="basic2" name="startReg" type="submit" value="basic2">Confirm</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:07:49.250

你可以这样做：

```
$(':radio').on('change', function() {

  // this.value for get the id of radio

  $('button[name=startReg]')
                        .attr('id', this.value )   // change id of button
                        .val( this.value );        // update value of button
}); 
```

**[演示](http://jsfiddle.net/QStkd/590/)**

但选定`radio`的值将自动提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:09:50.177

```
$('input:radio').click(function(){
  $('button').prop({'id' : $(this).val(), 'value' : $(this).val()});   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T16:39:26.197

只需更改控件的名称，它将发送与更改按钮值相同的表单数据：

```
<form>
  <ul>
    <li>
     <input type="radio" name="startReg" value="basic1" checked="checked">
     <label for="basic1">Basic 1</label>
    </li>
    <li>
    <input type="radio" name="startReg" value="basic2">
    <label for="basic2">Basic 2</label>
    </li>
  </ul>
  <button id="basic1" name="somethingElse" type="submit">Confirm</button>
</form> 
```

# android - 如何从 Google AuthToken 获取帐户名称

> ID：11384577
> 
> 赞同：0
> 
> 时间：2012-07-08T16:03:39.187
> 
> 标签：android, authentication

我在 Android 应用程序中使用 AccountManager。用户登录，我得到了 authtoken。我想将此令牌传递给 Web 服务器，并让 Web 服务器根据 authtoken 检索用户的帐户名。我如何在服务器端做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:14:04.537

您使用的是哪种令牌？（客户端登录，OAuth）？帐户名称可能在也可能不在令牌中，如果它是专有的（ClientLogin），您将不知道实际格式。因此，只需将帐户*和*令牌传递给您的 Web 服务。

# python - Python 3.2 中的十六进制解码

> ID：11384583
> 
> 赞同：7
> 
> 时间：2012-07-08T16:05:13.580
> 
> 标签：python, python-3.x, codec

在 Python 2.x 中，我能够做到这一点：

```
>>> '4f6c6567'.decode('hex_codec')
'Oleg' 
```

但是在 Python 3.2 中我遇到了这个错误：

```
>>> b'4f6c6567'.decode('hex_codec')
Traceback (most recent call last):
  File "<pyshell#25>", line 1, in <module>
    b'4f6c6567'.decode('hex_codec')
TypeError: decoder did not return a str object (type=bytes) 
```

根据[文档](http://docs.python.org/py3k/library/codecs.html?highlight=codecs#standard-encodings) `hex_codec`应该提供“字节到字节的映射”。所以这里正确使用了字节串的对象。

我怎样才能摆脱这个错误，以避免笨拙的变通办法从十六进制编码的文本转换？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T16:07:34.920

在 Python 3 中，该`bytes.decode()`方法用于将原始字节解码为 Unicode，因此您必须使用或用于-to-编码从`codecs`模块中获取解码器：`codecs.getdecoder()``codecs.decode()``bytes``bytes`

```
>>> codecs.decode(b"4f6c6567", "hex_codec")
b'Oleg'
>>> codecs.getdecoder("hex_codec")(b"4f6c6567")
(b'Oleg', 8) 
```

文档中似乎缺少后一个函数，但有一个有用的文档字符串。

您可能还想看看`binascii.unhexlify()`.

# ruby-on-rails - MiniMagick (+Rails)：如何显示图像中的场景数量

> ID：11384585
> 
> 赞同：0
> 
> 时间：2012-07-08T16:05:27.943
> 
> 标签：ruby-on-rails, ruby, imagemagick, minimagick

我有一个 Rails 应用程序可以上传图像以进行图像处理，并且我希望能够 1）查看图像中有多少页/帧/场景，以及 2）将多页图像拆分为单页 jpeg。

我在转换单场景图像的图像类型时没有遇到任何问题，但我不能完全刺穿 ImageMagick 文档来准确理解我要做什么。我正在使用的文档页面在这里：

[http://www.imagemagick.org/www/escape.html](http://www.imagemagick.org/www/escape.html)

在大多数情况下，我希望代码尽可能简单

```
def multiPage?( image )
  img = MiniMagick::Image.open(image.path)
  numPages = img.format("%n") #This returns Nil
  count > 1 ? true : false
end 
```

有没有人比我更清楚该做什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:14:11.440

好的，这有点小技巧，但是当我这样做时：

```
numPages = img[:n] 
```

我会得到 numPages 导致字母“n”字符串的次数与图像中的页面一样多，因此：

```
#img -> 4-page image
numPages = img[:n] # => 'nnnn' 
```

可能不是*最好*的答案，但至少它有效。

更新：找到更好的方法

```
numPages = Integer(img["%n"]) 
```

# facebook - 删除 facebook like button 社交文本

> ID：11384586
> 
> 赞同：2
> 
> 时间：2012-07-08T16:06:09.077
> 
> 标签：facebook, facebook-like, social

我想从**facebook like 按钮**中删除社交文本，以适应我剩下的宽度，但我在 facebook 开发者网站上找不到

所以我要删除的是“成为你的第一个喜欢这个的朋友”。文本

如此处所示：

![在此处输入图像描述](../Images/d5016874c64674bd95081834faa8baa4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:10:57.527

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

然后将布局更改为 button_count 并取消选中发送按钮

# css - 如何在 chrome 浏览器的 css2 中添加文本闪烁效果

> ID：11384588
> 
> 赞同：4
> 
> 时间：2012-07-08T16:06:27.620
> 
> 标签：css

`text-decoration:blink`我在我的 css 代码中设置了这个 css 属性。不幸的是，它只适用于 Firefox。一定有办法在 Crome 中显示闪烁效果。各位一定有答案吧。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-07T02:52:09.540

答案就在这里：[http](http://www.john-smith.me/emulating--lt-blink-gt--using-webkit-css3-animation) ://www.john-smith.me/emulating--lt-blink-gt--using-webkit-css3-animation 。在这个例子中，类 .blink 会让一些东西闪烁......你必须写两次，因为 Chrome 需要 -webkit- 而 Firefox 或 Opera 不需要。

```
<style>
/**
 * Emulating <blink> using WebKit CSS3 animation        
 *   This code is part of John Smith's blog
 *
 * Copyright 2010 by John Smith, All Rights Reserved
 *
 * @link   http://www.john-smith.me/emulating--lt-blink-gt--using-webkit-css3-animation
 * @date   18th October 2010 at 11:01 p.m.
 * @author John Smith
 */
@-webkit-keyframes blinker { from {opacity:1.0;} to {opacity:0.0;} }
        @keyframes blinker { from {opacity:1.0;} to {opacity:0.0;} }

.blink {
   text-decoration:blink;

  -webkit-animation-name:blinker;
          animation-name:blinker;  
  -webkit-animation-iteration-count:infinite;  
          animation-iteration-count:infinite;  
  -webkit-animation-timing-function:cubic-bezier(1.0,0,0,1.0);
          animation-timing-function:cubic-bezier(1.0,0,0,1.0);
  -webkit-animation-duration:1s; 
          animation-duration:1s; 
}
</style> 
```

您可以保留（或不保留）旧浏览器的旧闪烁属性（如您所愿）。

我更喜欢只使用-webkit-（一次）并且我保留了文本装饰，因为 Opera 和 Firefox 知道它。*（对于其他动画，别无选择。只是眨眼他们已经知道该怎么做了）。*

但这只是因为我不喜欢写两次而且我很懒。这不是建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:10:44.263

不幸的是，Chrome 不支持该属性的 CSS 闪烁值。您需要使用 jQuery 来创建相同的效果。类似[http://archive.plugins.jquery.com/project/blink](http://archive.plugins.jquery.com/project/blink)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T15:34:28.820

你永远不需要**jQuery**来实现 javascript 效果。jQuery 是一个完整的 JavaScript 库，这意味着可以在几行代码中完成，而无需加载整个库。现在，如果您已经在使用 jQuery，那么它就容易多了。

# python - 匹配 uuid.uuid4().hex 生成的值的正确正则表达式是什么？

> ID：11384589
> 
> 赞同：45
> 
> 时间：2012-07-08T16:06:33.143
> 
> 标签：python, regex

如何验证值是否等于此代码生成的 UUID4？

```
uuid.uuid4().hex 
```

它应该是一些正则表达式吗？这种形式的 32 个字符长的字符串生成的值：

```
60e3bcbff6c1464b8aed5be0fce86052 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-08-21T13:40:17.757

据我所知，Martijn 的回答并非 100% 正确。一个 UUID-4 有五组十六进制字符，第一组 8 个字符，第二组 4 个字符，第三组 4 个字符，第四组 4 个字符，第五组 12 个字符。

但是，要使其成为有效的 UUID4，第三组（**中间**的那一组）必须以 4 开头：

```
00000000-0000-4000-0000-000000000000
              ^ 
```

第四组必须以 8、9、a 或 b 开头。

```
00000000-0000-4000-a000-000000000000
              ^    ^ 
```

因此，您必须将*Martijn 的正则表达式更改*为：

```
import re
uuid4hex = re.compile('[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15}\Z', re.I) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-08-29T16:18:54.227

更具体。这是捕获带有和不带有破折号的 uuid4 的最精确的正则表达式，并且遵循 UUID4 的所有规则：

```
[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12} 
```

您可以确保它也可以通过忽略大小写来捕获大写字母。在我与 re.I. 的示例中。（uuid 的输出中没有大写字母，但在输入中它不会失败，只是忽略它。这意味着在 UUID 中“f”和“F”是相同的）

我创建了一个验证器来捕捉它们，如下所示：

```
def valid_uuid(uuid):
    regex = re.compile('^[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12}\Z', re.I)
    match = regex.match(uuid)
    return bool(match) 
```

然后你可以这样做：

```
if valid_uuid(my_uuid):
    #Do stuff with valid my_uuid 
```

以 ^ 开头， \Z 结尾，我还确保字符串中没有其他内容。这确保“3fc3d0e9-1efb-4eef-ace6-d9d59b62fec5”返回 true，但“3fc3d0e9-1efb-4eef-ace6-d9d59b62fec5+19187”返回 false。

**更新 - 下面的 python 方式并非万无一失 - 请参阅评论**：

还有其他方法可以验证 UUID。在蟒蛇做：

```
from uuid import UUID
try:
    UUID(my_uuid)
    #my_uuid is valid and you can use it
except ValueError:
    #do what you need when my_uuid is not a uuid 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-07-08T16:10:30.800

很简单：

```
import re
uuid4hex = re.compile('[0-9a-f]{32}\Z', re.I) 
```

这仅匹配*正好是*32 个十六进制字符的字符串，前提是您使用该`.match()`方法（从字符串的开头搜索，请参阅[`.search()`vs.`.match()`](http://docs.python.org/library/re.html#search-vs-match)）。匹配字符串的`\Z`结尾（与`$`匹配字符串*或*换行符的结尾）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-07T10:32:01.670

作为对性能问题的帮助说明，我已经在执行时间方面测试了两种方式，并且正则表达式验证方法要快得多：

```
import re
from uuid import UUID

def _validate_uuid4(uuid_string):
    try:
        UUID(uuid_string, version=4)
    except ValueError:
        return False
    return True

def _validate_uuid4_re(uuid_string):
    uuid4hex = re.compile('^[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12}\Z', re.I)
    match = uuid4hex.match(uuid_string)
    return bool(match) 
```

在`ipython`命令中：

> 在 [58] 中：val = str(uuid.uuid4())
> 
> 输入 [59]：%time _validate_uuid4(val) CPU 时间：用户 0 ns，系统：0 ns，总计：0 ns 挂壁时间：30.3 µs 输出[59]：真
> 
> 输入 [60]：%time _validate_uuid4_re(val) CPU 时间：用户 0 ns，系统：0 ns，总计：0 ns 挂壁时间：25.3 µs 输出[60]：真
> 
> 在 [61] 中：val = "invalid_uuid"
> 
> 输入 [62]：%time _validate_uuid4(val) CPU 时间：用户 0 ns，系统：0 ns，总计：0 ns 挂壁时间：29.3 µs 输出[62]：假
> 
> 输入 [63]：%time _validate_uuid4_re(val) CPU 时间：用户 0 ns，系统：0 ns，总计：0 ns 壁时间：25.5 µs 输出[63]：假

# java - 我应该如何处理获取实时数据、将其存储为 Java 类型以及绘制实时图表？

> ID：11384590
> 
> 赞同：3
> 
> 时间：2012-07-08T16:06:39.960
> 
> 标签：java, jakarta-ee

从套接字读取实时数据并将其绘制在图表中的最佳程序是什么？图表对我来说不是问题。我的问题与存储通过端口更新的数据流更相关。Java 需要能够在队列、数组或哈希映射中读取和解析它，从而绘制实时图。

这里的复杂之处在于应用程序每秒可以获取大量数据。Java 需要做一些高性能的工作来解析数据、清理旧记录并不断添加新记录。有没有我应该使用的实时库，或者我应该从头开始编程，例如创建一个队列或数组来存储数据并在队列/数组达到一定大小后删除数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:37:10.120

我谦虚地建议，也许您可​​以考虑 LinkedBlockingQueue（使用线程/执行程序从 LinkedBlockingQueue 读取/删除数据）。

如果您不希望使用这些数据结构，但由于某种原因更喜欢消息传递服务器来承担该责任，ActiveMQ/ZMQ/RabbitMQ 等会有所帮助（根据您的用例使用队列或主题 - 例如在 AMQ 中，一个消费者使用队列，多个消费者使用主题，除非您希望使用具有持久队列的浏览器）。

如果它适合您的用例，您还可以查看演员库，例如 kilim 或 akka。

# python - 使用 PDFMiner 解析没有 /Root 对象的 PDF

> ID：11384591
> 
> 赞同：14
> 
> 时间：2012-07-08T16:06:40.060
> 
> 标签：python, pypdf, pdf-parsing, pdf-manipulation

我正在尝试使用 PDFMiner python 绑定从大量 PDF 中提取文本。我编写的模块适用于许多 PDF，但是对于 PDF 的子集，我得到了这个有点神秘的错误：

ipython 堆栈跟踪：

```
/usr/lib/python2.7/dist-packages/pdfminer/pdfparser.pyc in set_parser(self, parser)
    331                 break
    332         else:
--> 333             raise PDFSyntaxError('No /Root object! - Is this really a PDF?')
    334         if self.catalog.get('Type') is not LITERAL_CATALOG:
    335             if STRICT:

PDFSyntaxError: No /Root object! - Is this really a PDF? 
```

当然，我立即检查了这些 PDF 是否已损坏，但它们可以正常阅读。

尽管没有根对象，有没有办法阅读这些 PDF？我不太确定从这里去哪里。

非常感谢！

**编辑：**

我尝试使用 PyPDF 来获得一些差异诊断。堆栈跟踪如下：

```
In [50]: pdf = pyPdf.PdfFileReader(file(fail, "rb"))
---------------------------------------------------------------------------
PdfReadError                              Traceback (most recent call last)
/home/louist/Desktop/pdfs/indir/<ipython-input-50-b7171105c81f> in <module>()
----> 1 pdf = pyPdf.PdfFileReader(file(fail, "rb"))

/usr/lib/pymodules/python2.7/pyPdf/pdf.pyc in __init__(self, stream)
    372         self.flattenedPages = None
    373         self.resolvedObjects = {}
--> 374         self.read(stream)
    375         self.stream = stream
    376         self._override_encryption = False

/usr/lib/pymodules/python2.7/pyPdf/pdf.pyc in read(self, stream)
    708             line = self.readNextEndLine(stream)
    709         if line[:5] != "%%EOF":
--> 710             raise utils.PdfReadError, "EOF marker not found"
    711 
    712         # find startxref entry - the location of the xref table

PdfReadError: EOF marker not found 
```

Quonux 建议 PDFMiner 在到达第一个 EOF 字符后停止解析。这似乎暗示了其他情况，但我非常无能为力。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-15T22:03:59.293

slate pdf 中的解决方案是使用 'rb' --> 读取二进制模式。

因为 slate pdf 取决于 PDFMiner，我也有同样的问题，这应该可以解决你的问题。

```
fp = open('C:\Users\USER\workspace\slate_minner\document1.pdf','rb')
doc = slate.PDF(fp)
print doc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T17:55:32.557

有趣的问题。我进行了某种研究：

解析pdf的函数（来自矿工源代码）：

```
def set_parser(self, parser):
        "Set the document to use a given PDFParser object."
        if self._parser: return
        self._parser = parser
        # Retrieve the information of each header that was appended
        # (maybe multiple times) at the end of the document.
        self.xrefs = parser.read_xref()
        for xref in self.xrefs:
            trailer = xref.get_trailer()
            if not trailer: continue
            # If there's an encryption info, remember it.
            if 'Encrypt' in trailer:
                #assert not self.encryption
                self.encryption = (list_value(trailer['ID']),
                                   dict_value(trailer['Encrypt']))
            if 'Info' in trailer:
                self.info.append(dict_value(trailer['Info']))
            if 'Root' in trailer:
                #  Every PDF file must have exactly one /Root dictionary.
                self.catalog = dict_value(trailer['Root'])
                break
        else:
            raise PDFSyntaxError('No /Root object! - Is this really a PDF?')
        if self.catalog.get('Type') is not LITERAL_CATALOG:
            if STRICT:
                raise PDFSyntaxError('Catalog not found!')
        return 
```

如果您对 EOF 有问题，将引发另一个异常：'''来自源的另一个函数'''

```
def load(self, parser, debug=0):
        while 1:
            try:
                (pos, line) = parser.nextline()
                if not line.strip(): continue
            except PSEOF:
                raise PDFNoValidXRef('Unexpected EOF - file corrupted?')
            if not line:
                raise PDFNoValidXRef('Premature eof: %r' % parser)
            if line.startswith('trailer'):
                parser.seek(pos)
                break
            f = line.strip().split(' ')
            if len(f) != 2:
                raise PDFNoValidXRef('Trailer not found: %r: line=%r' % (parser, line))
            try:
                (start, nobjs) = map(long, f)
            except ValueError:
                raise PDFNoValidXRef('Invalid line: %r: line=%r' % (parser, line))
            for objid in xrange(start, start+nobjs):
                try:
                    (_, line) = parser.nextline()
                except PSEOF:
                    raise PDFNoValidXRef('Unexpected EOF - file corrupted?')
                f = line.strip().split(' ')
                if len(f) != 3:
                    raise PDFNoValidXRef('Invalid XRef format: %r, line=%r' % (parser, line))
                (pos, genno, use) = f
                if use != 'n': continue
                self.offsets[objid] = (int(genno), long(pos))
        if 1 <= debug:
            print >>sys.stderr, 'xref objects:', self.offsets
        self.load_trailer(parser)
        return 
```

来自 wiki(pdf specs)：PDF 文件主要由对象组成，其中有八种类型：

> ```
> Boolean values, representing true or false
> Numbers
> Strings
> Names
> Arrays, ordered collections of objects
> Dictionaries, collections of objects indexed by Names
> Streams, usually containing large amounts of data
> The null object 
> ```

对象可以是直接的（嵌入到另一个对象中）或间接的。间接对象​​用对象编号和世代编号编号。**称为外部参照表的索引表给出了每个间接对象相对于文件开头的字节偏移量。这种设计允许对文件中的对象进行有效的随机访问，并且还允许在不重写整个文件的情况下进行小的更改（增量更新）**。从 PDF 版本 1.5 开始，间接对象也可能位于称为对象流的特殊流中。此技术可减小包含大量小型间接对象的文件的大小，并且对于标记 PDF 尤其有用。

我认为问题是您的“损坏的 pdf”在页面上有一些“根元素”。

`Possible solution:`

您可以在检索到外部参照对象以及解析器尝试解析这些对象的每个位置下载源代码并编写“打印函数”。将有可能确定完整的错误堆栈（在出现此错误之前）。

ps：我认为这是产品中的某种错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-13T02:00:06.263

我在 Ubuntu 中也遇到过同样的问题。我有一个非常简单的解决方案。只需将 pdf 文件打印为 pdf。如果您在 Ubuntu 中：

1.  使用 (ubuntu) 文档查看器打开一个 pdf 文件。

2.  转到文件

3.  转到打印

4.  选择打印为文件并勾选“pdf”

如果您想使该过程自动化，请遵循例如[this](https://askubuntu.com/questions/1100290/save-each-pdf-file-of-a-directory-as-another-pdf-operation-similar-to-print-a-p)，即使用此脚本自动打印您的所有 pdf 文件。像这样的 linux 脚本也可以：

```
for f in *.pdfx
do
lowriter --headless --convert-to pdf "$f"
done 
```

请注意，我将原始（有问题的）pdf 文件称为 pdfx。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T20:28:36.093

我也遇到了这个错误，并一直在尝试 fp = open('example','rb')

但是，我仍然收到指示的错误 OP。我发现我的代码中有错误，PDF 仍然被另一个函数打开。
因此，请确保您没有在其他地方的内存中打开 PDF。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-07T13:09:59.283

楼上的一个答案是对的。此错误仅出现在 windows 中，解决方法是替换 `with open(path, 'rb')` 为 `fp = open(path,'rb')`

# javascript - JavaScript 的预处理模拟器（计时/调试示例）

> ID：11384597
> 
> 赞同：1
> 
> 时间：2012-07-08T16:07:13.907
> 
> 标签：javascript, c++

在 C++ 中，您可以通过使用预处理指令来省略编译调试代码，以保持编译代码快速且不受生产中不需要的调试代码的阻碍。

在 JavaScript 中是否有相关的方法来做到这一点？我过去一直在做的是注释掉调试代码，但我想要一种更简洁的方式来做到这一点。

下面的示例显示了 4 个 if 语句，它们在 debug 设置为 true 时激活。但是在生产中，当我知道它将被设置为 false 时，我不希望它被检查 4 次。正如我所提到的，我可以将它塞进一行并将其注释掉......但我想要一种干净的方式来做到这一点？

```
/**
 **  cType
 */

function cType( o_p ) {
    if( debug ) {
        var t1, t2, t3, t4, i1, i2, i3; t1 = new Date().getTime();
    }
    o_p = MType[ o_p.model ].pre( o_p ); 
    if ( o_p.result !== 'complete' ) {
        if( debug ) {
            t2 = new Date().getTime();
            console.log( '---------------Send to Server - object_pipe: \n ' + o_p.toSource() ); 
        } 
        var string_pipe = JSON.stringify( o_p );
        cMachine( 'pipe=' + string_pipe , function( string_pipe ) {
            if( debug ) { 
                console.log( '---------------Receive from Server - object_pipe: \n ' + string_pipe ); 
                t3 = new Date().getTime();
            }
            MType[ o_p.model ].post( JSON.parse( string_pipe ) );
            if( debug ) {
                t4 = new Date().getTime(); i1 = t2-t1 ; i2 = t3-t2 ; i3 = t4-t3;
                console.log( '---------------Pre, Transit, Post = ', i1, i2, i3 );  
            }
        } );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:11:43.060

您始终可以通过 c 预处理器传递它，例如：

```
gcc -E input.js -o output.js 
```

这将允许您使用#if 甚至包括和宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:14:18.380

如果您使用[RequireJS](http://requirejs.org)，您可以使用[构建编译指示](https://github.com/jrburke/r.js/blob/master/build/example.build.js)甚至[has.js 集成](http://requirejs.org/docs/optimization.html#hasjs)在优化（缩小）时禁用/启用代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:10:39.830

不，Javascript 没有被编译，它被解释了。因此，除非您传递非标准的 Javascript，否则不可能有预处理指令——它可能不再是 Javascript——通过另一个实用程序编写代码。

# c++ - 如何在保持高效的同时正确使用继承？

> ID：11384598
> 
> 赞同：1
> 
> 时间：2012-07-08T16:07:27.957
> 
> 标签：c++, class, inheritance

我在这里有一些课程：

```
class weapons
{
protected:
    int damage, armor, cost;
};

class sword : public weapons
{
public:
    // Initialization for the sword class.
    void initialize()
    {

    }
};

class shield : public weapons
{

}; 
```

我开始研究这些，我不记得如何为每个继承的类设置伤害、护甲和成本。我该怎么做呢？什么是快速的方法（不一定很容易）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T16:13:07.340

在类中设置变量的正确方法是通过类的构造函数。派生类应使用初始化列表在其基类中设置变量。

```
class weapon {
protected:
    int damage, armor, cost;
    weapon(int d, int a, int c) : damage(d), armor(a), cost(c) {}
};

class sword : public weapon {
private:
    int weight;
public:
    sword(int d, int a, int c, int w) : weapon(d, a, c), weight(w) {}
}; 
```

或者，如果子类控制基类中的值（即用户不通过`damage`, `armor`，或者`cost`您可以这样做：

```
sword(int w) : weapon(30, 5, 120), weight(w) {} 
```

编译器将优化此代码以正确内联事物，因此您不必担心添加额外的构造函数层会影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:10:55.810

只需在子类中使用它们。因为属性在父级中被定义为受保护，所以它们可以像在子级中的普通变量一样被访问。像这样：

```
damage = 60;
armor = 0;
cost = 42; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T16:15:47.370

```
class weapons
{
protected:
    int damage, armor, cost;
    weapons(int d, int a, int c): 
      damage(d), armor(a), cost(c) { }
};

class sword: public weapons {
  public:
    sword(): weapons(10, 12, 31) { }
}
class shield: public weapons {
  public:
    shield(): weapons(1, 22, 48) { }
} 
```

# c++ - 通过C++绕过NAT和开放端口，实现低延迟

> ID：11384602
> 
> 赞同：0
> 
> 时间：2012-07-08T16:07:58.307
> 
> 标签：c++, networking, tcp, udp

我的目的是：

*   不要求用户打开路由器上的端口
*   用我的应用程序通过代码做所有事情

有可能吗？考虑到这个应用程序应该只能与安装了相同应用程序的其他机器一起使用，我可以从头开始编写某种协议来做到这一点吗？

我的总体想法是尽可能快地建立连接，我还必须交换小数据包，降低延迟对我来说比仅仅拥有高吞吐量更重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:45:29.527

不要弄乱NAT。无论如何，这对延迟没有太大帮助。您正在使用 TCP/IP，这是一个相当高级的协议，而且速度相对较慢。也就是说 - 该协议为您做了很多很棒的工作 - 但在延迟方面是有代价的。（它维护连接状态，保持数据包有序，并在保证数据包传递等方面做得很好。）

如果您想要一个非常低延迟的网络通道，请使用 UDP - 这是较低级别的，并且做的工作几乎没有 TCP 那么多。UDP 只是尽力将每个数据包传递到目的地，而不保持连接打开，数据包不一定按顺序到达，并且有知道数据包是否到达目的地的已知方法。

你需要自己建造这些东西——或者学会在没有它们的情况下生活。

基于 UDP 构建的应用程序往往会重复大量信息，并且在实现协议逻辑时存在很大的错误空间。结果通常是较低的延迟 - 但通常以可靠性或传输速率为代价。

另外-如果您需要低延迟，请不要通过其他协议进行隧道传输，例如通过 SSH 或其他方式进行隧道传输。这只会增加延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:47:46.523

此答案针对您的要求，即您不要求客户调整其网络上的任何设置。如果您可以让客户为您更改其网络上的内容，那么您应该按照 Rafael 的建议实现您自己的自定义应用程序。

如果您需要加密，您可以使用端口 80 上的 HTTP 协议或端口 443 上的 HTTPS（即基于 SSL/TLS 的 HTTP）协议。或者通过端口 22 使用 SSH。

这些只是通常由防火墙打开的端口，因此您很可能会通过。不能保证它们会开放。

使用 HTTP 或 HTTPS 时使用 HTTP 协议的原因是防火墙可能会进行深度数据包检查，如果不符合预期，它可能会黑洞或重置您的连接。在端口 22 上使用 SSH 也是如此。您最好使用 SSL over 443，并且只希望防火墙不会解密数据以进行 HTTP 检查（请记住它可能正在解密）。

对于实现，您可以使用[libCURL](http://curl.haxx.se/libcurl/c/simple.html)或[Boost.Asio](http://www.boost.org/doc/html/boost_asio.html)。

# ios - iPhone，同时从扬声器和麦克风录制声音

> ID：11384603
> 
> 赞同：3
> 
> 时间：2012-07-08T16:08:22.430
> 
> 标签：ios, recording

我正在尝试在 iPhone 中同时录制扬声器和麦克风的声音。我使用 AVAudioRecorder 和 AVAudioSession 来执行此操作，但它不起作用：录制的唯一声音来自麦克风。

我已经在 stackoverflow 上阅读过有关此的文章，例如[Record AVAudioPlayer output using AVAudioRecorder](https://stackoverflow.com/questions/970416/record-avaudioplayer-output-using-avaudiorecorder?rq=1)和类似的问题和答案。

是否有任何好的参考或类来实现这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-01T07:31:54.550

如果我们想同时使用它们，我们需要将 AVAudioSession 的 Category 设置为 AVAudioSessionCategoryAmbient。

```
do {
    try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient)
} catch let error as NSError {
    print(error)
}

do {
    try AVAudioSession.sharedInstance().setActive(true)
} catch let error as NSError {
    print(error)
} 
```

# seo - 什么是 relativepagescore 元标记，它在 SEO 中的重要性是什么？

> ID：11384604
> 
> 赞同：2
> 
> 时间：2012-07-08T16:08:28.837
> 
> 标签：seo, meta-tags

元标记的用途是什么，`relativepagescore`它如何影响 SEO？

```
<meta name="relativepagescore" content="555"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T23:09:36.093

经过广泛的研究，我找到了标签的来源，它与[OpenSearch xml 文件](http://www.opensearch.org/Home)相关联。

此元标记指向页面的内部评级。

**没有证据表明搜索引擎甚至知道\读取 relativepagescore 元标记，因此对 Google 搜索引擎结果的相关性没有影响。**

但如果您的网站有内部搜索引擎，我会建议您考虑使用 OpenSearch 项目。

哪些直接影响您的网站流量，建立忠实用户，并影响您的网站 SEO 工作

您将在[此处找到文件的安装和使用说明](http://www.opensearch.org/Community/OpenSearch_search_clients)

# android - 从给定包中获取 Ram 数量

> ID：11384608
> 
> 赞同：0
> 
> 时间：2012-07-08T16:08:38.657
> 
> 标签：android, android-layout, android-intent, android-source, android-package-managers

我想知道如何获取给定应用程序的 RAM 使用量或安装在 android 设备中的包名称。到目前为止，我继续使用包管理器并用我想要的包名称提供它。但是，我没有任何方法可以将其取出。我不知道这之后该怎么办。请有人帮助我获取特定应用程序当前正在使用的 RAM 量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:02:08.390

此功能可帮助您：

```
public static void logHeap(Class<?> clazz) {
        Double allocated = new Double(Debug.getNativeHeapAllocatedSize())/new Double((1048576));        
        Double available = new Double(Debug.getNativeHeapSize()/1048576.0);
        Double free = new Double(Debug.getNativeHeapFreeSize()/1048576.0);
        DecimalFormat df = new DecimalFormat();
        df.setMaximumFractionDigits(2);
        df.setMinimumFractionDigits(2);

        Log.d("memory-usage", "===================================================================================================");
        Log.d("memory-usage", "debug.heap native: allocated " + df.format(allocated) + "MB of " + df.format(available) + "MB (" + df.format(free) + "MB free) in [" + clazz.getName().replaceAll("com.myapp.android.","") + "]");
        Log.d("memory-usage", "debug.memory: allocated: " + df.format(new Double(Runtime.getRuntime().totalMemory()/1048576)) + "MB of " + df.format(new Double(Runtime.getRuntime().maxMemory()/1048576))+ "MB (" + df.format(new Double(Runtime.getRuntime().freeMemory()/1048576)) +"MB free)");

        System.gc();
        System.gc();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:15:23.530

您可以使用 adb 工具来获取应用程序消耗的内存信息

```
adb shell dumpsys meminfo 
```

可以通过 adb shell dumpsys meminfo > meminfo.txt 将此输出到文本文件

Here之前对此[的很好的解释](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)

[如何在 Android 中发现我的应用程序的内存使用情况？](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)

# c++ - 确定 IWICStream 缓冲区中已用内存的大小

> ID：11384616
> 
> 赞同：2
> 
> 时间：2012-07-08T16:10:10.313
> 
> 标签：c++, windows, memory, com, stream

我有 VirtualAlloc()'da 10MB 内存块，[并](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719782%28v=vs.85%29.aspx)使用[`IWICStream::InitializeFromMemory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719792%28v=vs.85%29.aspx).

我将 PNG 编码到 IWICStream 中，但我不知道 PNG 数据占用了多少内存。

如何确定 IWICStream 缓冲区的有效/使用大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:19:56.457

IWICStream 继承 IStream。标准技巧是使用[IStream::Seek()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380043%28v=vs.85%29.aspx)，在您写入图像后指定 STREAM_SEEK_CUR 。*plibNewPosition 参数为您提供长度。

# android - 从资产复制时数据库损坏

> ID：11384617
> 
> 赞同：2
> 
> 时间：2012-07-08T16:10:15.040
> 
> 标签：android, sqlite, android-assets

我有一个信息数据库，我试图将其从资产复制到设备上应用程序的数据库目录中。我从[1](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)中获取了代码，但将复制代码移到了 DatabaseHelper 类的 onCreate 方法中（正如它所称的那样）。数据库复制没有错误，但是当我尝试从中访问数据时，我得到一个 SQLiteException 抛出，说该表不存在。当我在我的计算机上打开新创建的数据库文件时，我可以看到它的大小是正确的，但不包含除“android_metadata”之外的任何表。如果我手动将未损坏的数据库文件从我的计算机复制到应用程序的数据库目录中，那么它可以正常运行，但显然我不能这样做。

这是我用来打开数据库的代码：

```
public ReferenceDatabaseAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getReadableDatabase();
        return this;
    } 
```

这是 onCreate 方法：

```
 public void onCreate( SQLiteDatabase db )
        {
            Log.d("AutoBagger","onCreate called for reference database");
            //Open your local db as the input stream
            InputStream assetsDbFile;
            try {
                assetsDbFile = dHCtx.getAssets().open("reference.sqlite");
                // Path to the just created empty db
                String dbFile = "/data/data/" + dHCtx.getPackageName() + "/databases/"+DATABASE_NAME;

                //Open the empty db as the output stream
                OutputStream outputStream = new FileOutputStream(dbFile);

                //transfer bytes from the assetsDbFile to the dbFile
                byte[] buffer = new byte[1024];
                int length;
                while ((length = assetsDbFile.read(buffer))>0){
                outputStream.write(buffer, 0, length);
                }

                //Close the streams
                outputStream.flush();
                outputStream.close();
                assetsDbFile.close();
                Log.d("AutoBagger","No errors whilst copying database");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.d("AutoBagger","IOException encountered when copying database from assets");
            }
        } 
```

在第一次运行时，我只得到关于表不存在的错误，但是当我再次运行它时（当数据库已经被复制时）我得到一个 SQLiteDatabaseCorruptionException “数据库磁盘映像格式错误”。有什么想法我哪里出错了吗？谢谢。

尚未复制数据库时的 LogCat 输出：

```
>07-08 17:16:41.490: D/AutoBagger(5145): DatabaseHelper constructor called (finished)
>07-08 17:16:41.530: D/AutoBagger(5145): onCreate called for reference database
>07-08 17:16:41.550: D/AutoBagger(5145): No errors whilst copying database
>07-08 17:16:41.550: D/AutoBagger(5145): fetchRows called
>07-08 17:16:41.550: I/Database(5145): sqlite returned: error code = 1, msg = no such table: hills
>07-08 17:16:41.550: D/AndroidRuntime(5145): Shutting down VM
>07-08 17:16:41.550: W/dalvikvm(5145): threadid=1: thread exiting with uncaught exception (group=0x402a7560)
>07-08 17:16:41.570: E/AndroidRuntime(5145): FATAL EXCEPTION: main
>07-08 17:16:41.570: E/AndroidRuntime(5145): android.database.sqlite.SQLiteException: no such table: hills: , while compiling: SELECT classification FROM hills WHERE dobihId = 1
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at com.s0812532.AutoBagger.ReferenceDatabaseAdapter.fetchRows(ReferenceDatabaseAdapter.java:196)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at com.s0812532.AutoBagger.Hill.isMunro(Hill.java:172)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at com.s0812532.AutoBagger.TestLauncher$12.onClick(TestLauncher.java:157)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.view.View.performClick(View.java:2501)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.view.View$PerformClick.run(View.java:9107)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.os.Handler.handleCallback(Handler.java:587)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.os.Handler.dispatchMessage(Handler.java:92)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.os.Looper.loop(Looper.java:130)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at android.app.ActivityThread.main(ActivityThread.java:3835)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at java.lang.reflect.Method.invokeNative(Native Method)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at java.lang.reflect.Method.invoke(Method.java:507)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
>07-08 17:16:41.570: E/AndroidRuntime(5145):    at dalvik.system.NativeStart.main(Native Method)
>07-08 17:16:43.181: I/Process(5145): Sending signal. PID: 5145 SIG: 9 
```

已复制数据库时的 LogCat 输出：

```
>07-08 17:11:43.669: D/AutoBagger(5136): DatabaseHelper constructor called (finished)
>07-08 17:11:43.669: I/Database(5136): sqlite returned: error code = 11, msg = database corruption at line 46139 of [42537b6056]
>07-08 17:11:43.669: I/Database(5136): sqlite returned: error code = 11, msg = statement aborts at 5: [SELECT locale FROM android_metadata LIMIT 1] 
>07-08 17:11:43.669: E/Database(5136): SELECT locale FROM android_metadata failed
>07-08 17:11:43.679: E/Database(5136): Failed to setLocale() when constructing, closing the database
>07-08 17:11:43.679: E/Database(5136): android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
>07-08 17:11:43.679: E/Database(5136):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:572)
>07-08 17:11:43.679: E/Database(5136):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
>07-08 17:11:43.679: E/Database(5136):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:187)
>07-08 17:11:43.679: E/Database(5136):  at com.s0812532.AutoBagger.ReferenceDatabaseAdapter.open(ReferenceDatabaseAdapter.java:145)
>07-08 17:11:43.679: E/Database(5136):  at com.s0812532.AutoBagger.Hill.<init>(Hill.java:55)
>07-08 17:11:43.679: E/Database(5136):  at com.s0812532.AutoBagger.TestLauncher$12.onClick(TestLauncher.java:156)
>07-08 17:11:43.679: E/Database(5136):  at android.view.View.performClick(View.java:2501)
>07-08 17:11:43.679: E/Database(5136):  at android.view.View$PerformClick.run(View.java:9107)
>07-08 17:11:43.679: E/Database(5136):  at android.os.Handler.handleCallback(Handler.java:587)
>07-08 17:11:43.679: E/Database(5136):  at android.os.Handler.dispatchMessage(Handler.java:92)
>07-08 17:11:43.679: E/Database(5136):  at android.os.Looper.loop(Looper.java:130)
>07-08 17:11:43.679: E/Database(5136):  at android.app.ActivityThread.main(ActivityThread.java:3835)
>07-08 17:11:43.679: E/Database(5136):  at java.lang.reflect.Method.invokeNative(Native Method)
>07-08 17:11:43.679: E/Database(5136):  at java.lang.reflect.Method.invoke(Method.java:507)
>07-08 17:11:43.679: E/Database(5136):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
>07-08 17:11:43.679: E/Database(5136):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
>07-08 17:11:43.679: E/Database(5136):  at dalvik.system.NativeStart.main(Native Method)
>07-08 17:11:43.689: E/Database(5136): Deleting and re-creating corrupt database /data/data/com.s0812532.AutoBagger/databases/reference.sqlite
>07-08 17:11:43.689: E/Database(5136): android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
>07-08 17:11:43.689: E/Database(5136):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:572)
>07-08 17:11:43.689: E/Database(5136):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
>07-08 17:11:43.689: E/Database(5136):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:187)
>07-08 17:11:43.689: E/Database(5136):  at com.s0812532.AutoBagger.ReferenceDatabaseAdapter.open(ReferenceDatabaseAdapter.java:145)
>07-08 17:11:43.689: E/Database(5136):  at com.s0812532.AutoBagger.Hill.<init>(Hill.java:55)
>07-08 17:11:43.689: E/Database(5136):  at com.s0812532.AutoBagger.TestLauncher$12.onClick(TestLauncher.java:156)
>07-08 17:11:43.689: E/Database(5136):  at android.view.View.performClick(View.java:2501)
>07-08 17:11:43.689: E/Database(5136):  at android.view.View$PerformClick.run(View.java:9107)
>07-08 17:11:43.689: E/Database(5136):  at android.os.Handler.handleCallback(Handler.java:587)
>07-08 17:11:43.689: E/Database(5136):  at android.os.Handler.dispatchMessage(Handler.java:92)
>07-08 17:11:43.689: E/Database(5136):  at android.os.Looper.loop(Looper.java:130)
>07-08 17:11:43.689: E/Database(5136):  at android.app.ActivityThread.main(ActivityThread.java:3835)
>07-08 17:11:43.689: E/Database(5136):  at java.lang.reflect.Method.invokeNative(Native Method)
>07-08 17:11:43.689: E/Database(5136):  at java.lang.reflect.Method.invoke(Method.java:507)
>07-08 17:11:43.689: E/Database(5136):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
>07-08 17:11:43.689: E/Database(5136):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
>07-08 17:11:43.689: E/Database(5136):  at dalvik.system.NativeStart.main(Native Method)
>07-08 17:11:43.709: D/AutoBagger(5136): onCreate called for reference database
>07-08 17:11:43.719: D/AutoBagger(5136): No errors whilst copying database
>07-08 17:11:43.729: D/AutoBagger(5136): fetchRows called
>07-08 17:11:43.729: I/Database(5136): sqlite returned: error code = 1, msg = no such table: hills
>07-08 17:11:43.729: D/AndroidRuntime(5136): Shutting down VM
>07-08 17:11:43.729: W/dalvikvm(5136): threadid=1: thread exiting with uncaught exception (group=0x402a7560)
>07-08 17:11:43.739: E/AndroidRuntime(5136): FATAL EXCEPTION: main
>07-08 17:11:43.739: E/AndroidRuntime(5136): android.database.sqlite.SQLiteException: no such table: hills: , while compiling: SELECT classification FROM hills WHERE dobihId = 1
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at com.s0812532.AutoBagger.ReferenceDatabaseAdapter.fetchRows(ReferenceDatabaseAdapter.java:196)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at com.s0812532.AutoBagger.Hill.isMunro(Hill.java:172)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at com.s0812532.AutoBagger.TestLauncher$12.onClick(TestLauncher.java:157)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.view.View.performClick(View.java:2501)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.view.View$PerformClick.run(View.java:9107)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.os.Handler.handleCallback(Handler.java:587)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.os.Handler.dispatchMessage(Handler.java:92)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.os.Looper.loop(Looper.java:130)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at android.app.ActivityThread.main(ActivityThread.java:3835)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at java.lang.reflect.Method.invokeNative(Native Method)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at java.lang.reflect.Method.invoke(Method.java:507)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
>07-08 17:11:43.739: E/AndroidRuntime(5136):    at dalvik.system.NativeStart.main(Native Method)
>07-08 17:11:45.461: I/Process(5136): Sending signal. PID: 5136 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:45:50.087

试试这个模式：

```
public class  DatabaseHelper extends SQLiteOpenHelper{
    private static String PKG_NAME = "name_of_package_for_apk";
    private static String DB_PATH = "/data/data/" + PKG_NAME + "/databases/";
    private static String DB_NAME = "db.db3";

    private SQLiteDatabase myDataBase; 
    private final Context myContext;
    DatabaseHelper(Context context) 
    {
       super(context, DB_NAME, null, 1);
       this.myContext = context;
    }
    @Override
    public void onCreate(SQLiteDatabase db) { }
    public void createDataBase() throws IOException{
       boolean dbExist = checkDataBase();
       if (!dbExist){
          getReadableDatabase();
          copyDatabase();
       }else{
          this.close();
       }
    }

    private boolean checkDataBase(){
       SQLiteDatabase checkDB = null;
       try{
           String myPath = DB_PATH + DB_NAME;
           checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY|SQLiteDatabase.NO_LOCALIZED_COLLATORS);
       }catch(SQLiteException e){
          //database does't exist yet.
          Log.v(TAG, "[checkDataBase] - Database does not exist... YET!");
       }finally{
          if(checkDB != null) checkDB.close();
       }
       return (checkDB != null) ? true : false;
    }
    private void copyDataBase() throws IOException{
        boolean bCopyOk = false;
        try{
            //Open your local db as the input stream
            InputStream myInput = myContext.getAssets().open(DB_NAME);
            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;
            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);
            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0) myOutput.write(buffer, 0, length);
            //Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
            bCopyOk = true;
        }catch(Exception ex){
        }finally{
            if (bCopyOk) Log.v(TAG, "[copyDataBase] - Database copied OK!");
        }
    }
    @SuppressWarnings("unused")
    public void openDataBase() throws SQLException{
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }
    @Override
    public synchronized void close() {
        if(myDataBase != null) myDataBase.close();
        super.close();
    }
} 
```

简单地说，这样做：

```
dbHelper = new DatabaseHelper(getApplicationContext());
dbHelper.createDatabase(); 
```

***编辑：***通过使用[Sqliteman](http://sqliteman.com/)的 GUI 前端和使用此脚本，

```
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US') 
```

线索在 logcat 本身：

```
>07-08 17:11:43.669: E/Database(5136): SELECT locale FROM android_metadata failed
>07-08 17:11:43.679: E/Database(5136): Failed to setLocale() when constructing, closing the database
>07-08 17:11:43.679: E/Database(5136): android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed 
```

# c# - LINQ 排序列表 基于字符串名称属性

> ID：11384619
> 
> 赞同：0
> 
> 时间：2012-07-08T16:10:23.947
> 
> 标签：c#, jquery, asp.net, json, linq

我有以下内容：

```
public void ProcessRequest(HttpContext context)
{
    string query = context.Request.QueryString["term"];
    System.Web.Script.Serialization.JavaScriptSerializer JsonSerializer =
        new System.Web.Script.Serialization.JavaScriptSerializer();

    List<Category> Categs = Category.getAll();
    var result = from c in Categs where Categs.Contains(c.Name) select c;
    context.Response.ContentType = "application/json";
    context.Response.Write(JsonSerializer.Serialize(result));
} 
```

尝试为 jQuery UI 自动完成返回 [ { label: "Choice1", value: "value1" }, ... ] 列表。我有具有 ID 和 Name 属性的类别，我想根据查询字符串和 Name 属性中的“术语”过滤列表。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:18:12.480

如果您的最终目标是列出该列表`[ { label: "Choice1", value: "value1" }, ... ]`并按名称排序，那么这应该有效：

```
result
  .OrderBy(x => x.Name)
  .Select(x => new { label: x.Name, value: x.Id }); // create an anonymous type 
```

编辑：您当前的查询：

```
var result = from c in Categs where Categs.Contains(c.Name) select c; 
```

*看起来*不对。我认为该查询与仅选择 all 相同`Categs`。如果您想根据他们发送的术语进行查询，请在该 linq 表达式中替换`c.Name`为：`query`

```
var result = from c in Categs where Categs.Contains(query) select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:19:27.063

```
string upperTerm = term.ToUpper();

var result = Category.getAll()
  .Where(c => c.Name.ToUpper().Contains(upperTerm))
  .Select(c => new { label = c.Name, value = c.Id }); 
```

然后 JSON 序列化`result`。

# backbone.js - 使用 requirejs 的 Backbone 应用程序模式

> ID：11384629
> 
> 赞同：1
> 
> 时间：2012-07-08T16:11:02.407
> 
> 标签：backbone.js, requirejs

我遇到了[这篇](http://backbonetutorials.com/organizing-backbone-using-modules/)关于使用 requirejs 的骨干应用程序的文章。有一件事看起来很奇怪。每当他们需要在我的模块中引用 Backbone、Underscore 或 jquery 时，我必须要求它们：

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'collections/projects',
], function($, _, Backbone, ProjectsCollection, projectsListTemplate){
  var projectListView = Backbone.View.extend({
    el: $("#container"),
... 
```

那么真的有必要走这条路吗？是不是有点过度设计了？难道我不能在启动我的应用程序之前加载 Backbone 及其依赖项并将它们用作全局对象，就像在没有 requirejs 的情况下那样？还是想念我这里的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:24:15.880

无论哪种方式都有优点/缺点。

*优势：*

您的依赖管理完全由 require.js 控制，而不是依赖于同步加载的全局范围的库。它优雅、模块化，可能是做事的正确方式。

*优势：*

交换库版本更容易，尤其是每个模块。老实说，我在实践中从未见过这种情况——这似乎是一种“假设”的情况，而不是实际的情况。如果你这样做了，那么你可能无论如何都在破解一些东西，牺牲了你首先将它们用作模块而获得的“代码优雅”。

*坏处：*

你会得到很多样板进口。

```
define(['jQuery', 'underscore', 'backbone', 'raphael', ...], 
```

*在大型应用*程序中，可能需要六个库依赖项才能获得依赖项。在每个模块中。

对于 Backbone 繁重的应用程序来说，冗余感觉尤其不必要，其中每个模块都可能定义一个 Backbone 模型/控制器/视图 - 几乎*每个*模块都需要 Backbone。

`Lib`您可以将它们全部包装到您要引用的单个模块中，例如`Lib.$(...)`or `Lib._(...)`，但这只是将样板从导入中移出并放入代码中。它也否定了优势#2。

**那么是哪一个？**

我会说**单独查看每个库**并决定它应该是全局的还是它自己的导入模块。

如果您打算在*几乎所有地方*使用该库（例如 jQuery、Backbone），那么只需将其保持在全局范围内即可。

对于其他库，您可能只在几个视图中使用它们（例如 Raphael.js）。在这种情况下，将其作为模块导入。

# android - Google Play 中出现“不支持结算”错误

> ID：11384630
> 
> 赞同：3
> 
> 时间：2012-07-08T16:11:05.310
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

首先，我一直在谷歌上搜索，知道多久了，并且遵循了其他几个问题的答案，但无济于事。

我有一个带有应用内购买的 Android 应用程序，使用测试密钥 (android.test.purchased) 一切正常。使用我的实际产品，我收到以下错误：

```
This version of the application is not configured for billing through Google Play. 
```

我已按照 Google 和各种 StackOverflow 答案概述的步骤进行操作：

1.  将签名的 APK 上传到 Google Play（未发布）
2.  设置应用内项目（已发布）
3.  在手机上安装相同的 APK。
4.  确保您的 google 帐户（通过手机）在 Google Play 中列为测试人员。
5.  将公钥添加到帐单代码。
6.  等待一段时间以防万一！

我仍然遇到上面提到的问题。我能错过什么？

编辑：想到的一个想法，你用什么来签署导出的 APK 重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:31:53.890

我从不喜欢回答自己的问题，因为看起来我总是在追求我不是的代表！

经过多次尝试，我终于设法让它发挥作用，看来您需要等待大约 6 个小时才能使 apk 被识别为对应用内购买有效。奇怪的是，如果您在清晨（英国时间）上传 APK，它会更快地通过系统（美国/英国滞后！？）。

因此，总结一下可能遇到此答案的任何人，请耐心等待！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:32:05.980

缺少一件显而易见的事情：在计费库代码中设置您的公钥。

> *编辑：想到的一个想法，你用什么来签署导出的 APK 重要吗？*

是的，您必须在发布模式下签名 [ [1](http://developer.android.com/guide/google/play/billing/billing_integrate.html) ]。在 Eclipse 中导出应用程序，当它提示您输入证书时，指向您的 .keystore 文件。按照这些步骤操作，您将使用您的发布密钥对您的 apk 进行签名。

# javascript - 从此子框架获取 iFrame 中页面的 URL

> ID：11384632
> 
> 赞同：1
> 
> 时间：2012-07-08T16:11:21.403
> 
> 标签：javascript, jquery, url, iframe

这里有很多文章，人们试图从 iFrame 中找到父 URL。

我不想那样做，我只是想用 Javascript 知道当前页面的 URL。

出于某种原因，这似乎很困难，但我看不出为什么！

所以，要彻底解释清楚。

我的父页面 HTML 看起来像

```
<html>
<body>
    <iframe id="mainWindow" name="mainWindow" src="myMainPage.aspx" style="border: 0; position:fixed; top:0; left:0; right:0; bottom:0; width:100%; height:100%"></iframe>
    <iframe src="myOtherPage.aspx"></iframe>
</body>
</html> 
```

笔记; 顶部`style`框架的 使其填满屏幕。这很重要，因为我使用 iFrames 的唯一原因是第二个框架可用于通过 Javascript 计时器运行几个伪后台任务，因为我无法使用服务器控制的后台任务（长话短说）。

所以，虽然我们在这里有框架，但我实际上并没有使用框架来创建框架布局，而是确保当用户在我的应用程序上运行时主页面保持静态（这是一个后端 CMS 系统，而不是实时面向客户的网站）

所以，基本上，除了我的后台服务功能之外的所有内容都是从主 iFrame 本身执行的，父页面永远不会真正重新加载，隐藏框架只是根据需要执行操作，但确保它不会被页面卸载中断。

有时，我需要知道主窗口中存在的页面的 URL。

我真的不明白为什么

```
window.location.pathname 
```

不起作用，但这给了我父窗口的 URL。(www.mysite.com/myParent.aspx)

```
document.URL 
```

还返回父 URL

```
document.getElementById("mainWindow").contentWindow.location.href 
```

不起作用，因为 iFrame 中不存在该元素，因为它存在于父级中。

我需要的是从 iFrame 本身加载到 iFrame 中的页面的当前 URL。所以，很简单

```
What is the URL of the page on which this javascript is loaded 
```

这是因为我在 MasterPage 上加载脚本，这些脚本在不同页面上做的事情略有不同。

# jsf - JSF 图形图像

> ID：11384636
> 
> 赞同：0
> 
> 时间：2012-07-08T16:12:25.023
> 
> 标签：jsf, jsf-2, uirepeat, graphicimage

我必须做一个图像列表。我使用 ui:repeat 来执行此操作，但它不起作用，我看不到图像：

```
<ui:repeat value="#{mybean.album.images}" var="image">  
   <p:graphicImage value="#{image.image}" width="200px" height="180px"/> 
</ui:repeat> 
```

但如果我使用它，它会起作用：

```
<p:graphicImage value="#{mybean.album.images[0].image}" width="200px" height="180px"/> 
```

我看到第一张图。
我该如何解决？

# autocomplete - 无需先输入字母或字符即可使用 Pycharm 自动完成

> ID：11384641
> 
> 赞同：1
> 
> 时间：2012-07-08T16:12:46.263
> 
> 标签：autocomplete, ide, pycharm

有没有什么我可以在键盘上按下来让 Pycharm 自动完成而无需我先输入字母？

这样做的目的是让我可以看到所有的可能性，而不仅仅是那些以我输入的字母开头的可能性，或者如果我不知道任何可能性的开头是什么。

**例子：**

![在此处输入图像描述](../Images/cff48f051a1ec805f29bf71b0a21a7c9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:17:41.797

*您可以从菜单Code → Completion*或使用相应的键盘快捷键（取决于键盘映射）触发不同类型的完成：

默认完成快捷方式：

*   基本：`Ctrl`+`Space`
*   智能类型：`Ctrl`+ `Shift`+`Space`
*   班级名称：`Ctrl`+ `Alt`+`Space`

![PyCharm 中的完成类型](../Images/a8daef6a66d971c69ffb71831eab8103.png)

# django - 用户单击 Django 中的链接后重新加载 googlemaps

> ID：11384646
> 
> 赞同：1
> 
> 时间：2012-07-08T16:13:18.993
> 
> 标签：django, google-maps

我正在 Django 中做一个项目，我想在我的网站上显示一些谷歌地图。因此，我安装了 django-easy-maps 并在示例模板中成功使用了它。所以，我准备好了我的地图。我要实现的接口是这个

[http://i49.tinypic.com/sowm74.png](http://i49.tinypic.com/sowm74.png)

我想显示 Hellow World 所在的地图！容器是并且在侧边栏上有不同的链接我想刷新用户点击时显示的地图而不重新加载页面。我做了一些研究，似乎 Ajax 是解决方案......谁能告诉我如何实现这一点（有或没有 Ajax）？抱歉听起来像个菜鸟，但我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:05:23.767

基本步骤是：

*   为右侧的 Google 地图部分创建一个视图。此视图不会返回完整的 HTML 页面，而只会返回该部分的 HTML（其中包含您的 Google 地图地图）。
*   当用户单击左侧的链接时，使用 JavaScript 执行 ajax 调用以请求该页面。简而言之，这意味着：将事件处理程序附加到`onclick`这些链接的事件中，并且在代码中您可以执行 ajax 调用。许多人为此目的使用 JavaScript 库，例如[jQuery](http://jquery.com/)（具有[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)）。
*   然后，您可以使用 JavaScript 将接收到的 HTML 放入右侧的容器中（使用[`$.html()`](http://api.jquery.com/html/)）。

# php - 在 PHP 中处理 Postgres 输出函数参数

> ID：11384647
> 
> 赞同：0
> 
> 时间：2012-07-08T16:13:22.220
> 
> 标签：php, postgresql

我有一个想要访问的 Postgres 数据库。我需要调用数据库中存在的几个函数。我已经实现了与数据库的连接和运行查询。我也实现了调用我想要的功能。我的问题是，当 Postgres 函数有多个 OUT 参数时，不是返回一个我可以使用偏移量或行名访问的数组，而是返回一个包含两个 OUT 参数的字符串：

```
$query = "Select pg_function('" . Getenv("REMOTE_ADDR") . "')";
$result = pg_query($query);
$line = pg_fetch_array($result, NULL, PGSQL_ASSOC);
var_dump($line); 
```

var_dumb 返回的是：

```
array
    'ua_bl_session_request' => string '(c6787f5f2b2c885168162c8c8ffff220,8fe04393-c188-0e08-b710-a2ce89066768)' (length=71) 
```

我当然可以解析该字符串，但是有没有办法实现我想要的并且我错过了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:02:31.023

也许您错误地使用[了 pg_fetch_array()](http://br.php.net/manual/en/function.pg-fetch-array.php)，因为您应该在第二个参数中给出行号。例如：

```
// To get the first row (Rows are numbered from 0 upwards)
$line = pg_fetch_array($result, 0, PGSQL_ASSOC);

// To get the second row
$line = pg_fetch_array($result, 1, PGSQL_ASSOC); 
```

但是，如果您知道自己在做什么，则可以使用[regexp_split_to_table()](http://www.postgresql.org/docs/8.3/static/functions-string.html)，它是一个 Posgtres 字符串函数，它使用 POSIX 正则表达式作为分隔符将字符串拆分为行。例如：

```
$query  = "select regexp_split_to_table(
               pg_function('" . Getenv("REMOTE_ADDR") . "'), ','
           )"; 
```

在您的情况下，它将使用`','`分隔符拆分函数的结果。它应该返回一个包含两行的结果集，如下所示：

```
c6787f5f2b2c885168162c8c8ffff220
8fe04393-c188-0e08-b710-a2ce89066768 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:25:27.307

```
SELECT * FROM pg_function(REMOTE_ADDR); 
```

# sql - 如何获取SQL中单词表中每个单词的句号？

> ID：11384649
> 
> 赞同：0
> 
> 时间：2012-07-08T16:13:37.107
> 
> 标签：sql, sql-server, sql-server-2000

我有一张像这样的桌子：

```
Id     Word
---    ----
1      this
2      is
3      a
4      cat.
5      that
6      is
7      a
8      dog.
9      and
10     so
11     on 
```

并且需要**根据点字符**为句号添加一个新列：

```
Id     Word     S#
---    ----     --
1      this     1
2      is       1
3      a        1
4      cat.     1
5      that     2
6      is       2
7      a        2
8      dog.     2
9      and      3
10     so       3
11     on       3 
```

**从性能**方面来看，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:36:55.693

```
select table.id, table.word, count(*) + 1 as serial_number
from table left join
( select id, word from table where word like '%.' ) Z 
on table.id > Z.id
group by table.id, table.word 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:56:09.917

您假设句子是由升序的 id 编号形成的。这真是个坏主意。

此查询应为您提供有关断句的信息。（用真实的表名替换“T”。）

```
SELECT
    Break1.Id as BreakId,
    COALESCE(MAX(Break2.Id), 0) as PreviousBreakId,
    COALESCE(COUNT(Break2.Id), 0) + 1 as BreakNumber
FROM
    (SELECT Id FROM T WHERE Word LIKE '%.') as Break1,
    (SELECT Id FROM T WHERE Word LIKE '%.') as Break2
WHERE Break2.Id < Break1.Id
GROUP BY Break1.Id 
```

以下是在 UPDATE 中使用它的方法。

```
UPDATE T
SET SentenceNum = (
    SELECT B.BreakNumber
    FROM
        (
        SELECT
            Break1.Id as BreakId,
            COALESCE(MAX(Break2.Id), 0) as PreviousBreakId,
            COALESCE(COUNT(Break2.Id), 0) + 1 as BreakNumber
        FROM
            (SELECT Id FROM T WHERE Word LIKE '%.') as Break1,
            (SELECT Id FROM T WHERE Word LIKE '%.') as Break2
        WHERE
            Break2.Id < Break1.Id
        GROUP BY Break1.Id
        ) as B
    WHERE T.Id >= B.PreviousBreak AND T.Id < B.BreakId
) 
```

我提供教育价值的查询，但我不能宽恕基于您的信息的方法。

**编辑**

我的原始版本的第一句话有问题，因为基本上逻辑会查找不存在的前句中断。@cravoori 的解决方案通过左连接来处理这个问题。这是一个与我自己的答案相同的工作版本，它返回完整的单词列表而不是中断。除了交叉连接和虚拟零行之外，本质上是相同的。

```
SELECT T.Id, MIN(T.Word) as Word, COUNT(Breaks.Id) as SentenceNumber
FROM T, (SELECT 0 as Id UNION ALL SELECT Id FROM T WHERE Word LIKE '%.') as Breaks
WHERE Breaks.Id < T.Id
GROUP BY T.Id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:55:05.227

检查此查询以获得所需的输出：

```
DECLARE  @Sentence TABLE(idn int identity,word varchar(50))
INSERT INTO @Sentence
VALUES('this'),('is'),('a'),('cat.'),('that'),('is'),('a'),('dog.'),('and'),('so'),('on.'),('I'),('love'),('india.')
--SELECT * FROM @Sentence 
DECLARE @seq int=1
;WITH CTE(idn,word,seq) AS(
SELECT idn,word,CASE WHEN word not like '%.' then @seq END from @Sentence where idn=1
union all
SELECT s.idn,s.word,CASE WHEN s.word like '%.' then c.seq+1  else c.seq END from @Sentence s inner join CTE c on s.idn-1=c.idn
)
,CTE1(idn,word,seq) As
(SELECT idn,word,CASE WHEN word like '%.' then seq-1 else seq end as seq from CTE)

SELECT * FROM CTE1 
```

# ruby-on-rails - Ruby on Rails：如何创建一个按小时细分的课程表？

> ID：11384651
> 
> 赞同：1
> 
> 时间：2012-07-08T16:14:10.243
> 
> 标签：ruby-on-rails, ruby, html-table, schedule

我是一个新的 ruby​​ on rails 编码器，他正在尝试创建一个整齐显示的一周日历，让学生检查他们的时间表。

我已将课程存储在包含以下数据的表中：

> :course_id, :state_unit_code, :day_of_week, :start_date, :end_date, :start_time, :end_time, :classroom_id, :campus_id, :lecturer_id

我希望从该表中获取数据并将其转换为类似于所示的 html 表：

![](../Images/302eb2bafedc9693a50cdb273ae63c98.png)

我已经使用 table、tr td rowspan colspan 等对其进行了模拟。

如果你能指出我正确的方向，我会非常感激。

继另一位用户 ( [allesklar](https://stackoverflow.com/users/19893/allesklar) ) 的帖子之后：[您将如何制定这个每日课程表？](https://stackoverflow.com/questions/427689/how-would-you-build-this-daily-class-schedule)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:35:53.253

我会建议为此使用 gem，除非你是一个自信的 Rails 程序员，并且有一些不错的经验。如果您只是为了学习而这样做，这是一个很好的项目，但如果您真的希望它被用作“生产应用程序”，那就不是那么回事了。在现实世界。

我认为[https://github.com/elevation/event_calendar](https://github.com/elevation/event_calendar)可能会满足您的需求。看一看。

您可能还需要在某些时候使用单独的 gui 日期选择器，它们有很多解决方案，例如[http://code.google.com/p/calendardateselect/](http://code.google.com/p/calendardateselect/)虽然这只是选择日期，而不是完整的日历显示事件也。但它可能很方便。您还会在此处看到 30 个（！）不同的日期选择器：[http](http://www.1stwebdesigner.com/freebies/jquery-calendar-plugins/) ://www.1stwebdesigner.com/freebies/jquery-calendar-plugins/ ，其中还包括允许您跨越日期的选择器。

# neo4j - Neo4j 创建图形数据库

> ID：11384653
> 
> 赞同：-1
> 
> 时间：2012-07-08T16:14:11.857
> 
> 标签：neo4j

```
package com;

import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Relationship;
import org.neo4j.graphdb.RelationshipType;
import org.neo4j.kernel.EmbeddedGraphDatabase;
import org.neo4j.graphdb.Transaction;

public class hotspots {
public static enum RelTypes implements RelationshipType
{
    PERSON
}
public static void main(String[] args) {
    GraphDatabaseService graphdb = new EmbeddedGraphDatabase("target/dbnew");
    Transaction tx = graphdb.beginTx();

    try{
        Node n1 = graphdb.createNode();
        Node n2 = graphdb.createNode();

        n1.setProperty("name","Melwin");
        n2.setProperty("name","Louis");

Relationship rel1 =      graphdb.getReferenceNode().createRelationshipTo( n1, RelTypes.PERSON );
Relationship rel2 = graphdb.getReferenceNode().createRelationshipTo( n2,  RelTypes.PERSON );

        tx.success();
    }
    catch (Exception e) {
        tx.failure();
    }
    finally{
        tx.finish();
    }

    graphdb.shutdown();
    System.out.println("Success");
}

} 
```

这是我创建的一个小型数据库，我在 Neoclipse 中查看它。每次我运行这段代码并在 Neoclipse 中查看它时，我都会得到双倍的节点和关系。换句话说，我得到了另外两个具有相同名称和关系的节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:05:26.583

只需创建具有与数据库中已存在的其他节点相同属性的新节点，就会创建重复项。人际关系也是如此。如果您要导入数据，则只执行一次，否则您的导入代码必须是“知道”时创建的，因为在检查节点是否存在之前检查索引并在创建之前通过为该节点迭代它们来检查关系是否已经存在。

# ruby - 这种动态方法定义如何以及为何起作用？

> ID：11384654
> 
> 赞同：5
> 
> 时间：2012-07-08T16:14:14.950
> 
> 标签：ruby, metaprogramming

下面的代码是如何工作的，更重要的是，为什么它会这样工作？

```
class Example
  def one
    def one
      @value = 99
    end
    puts "Expensive Call"
    @value = 99 # assume its expensive call
  end
end

ex = Example.new
puts ex.one # => "Expensive Call"; 99
puts ex.one # => 99 
```

这里，在第一次调用 method`one`时，Ruby 执行外部`one`方法，但在后续调用中，它只执行内部`one`方法，完全绕过外部`one`方法。

我想知道它是如何发生的以及为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T16:19:29.670

当您第一次执行它时，它会在类中重新定义自己，然后完成。第二次，该方法`one`已被自身覆盖为 just `@value = 99`，因此不打印任何内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T16:30:51.660

### 这个怎么运作

Ruby 允许您在运行时重新定义类，因为*class*和*def*实际上是可执行代码。在您的示例中，代码执行以下操作：

1.  定义一个 Example#one 方法，该方法将在调用实例方法时（重新）定义 Example#one 方法。
2.  出于实际目的，在调用外部实例方法之前，不会执行内部*def 。*（头发分裂者可能会合理地争论这个定义，但这会涉及解析器/解释器的细节，这对于本讨论的目的并不重要。）
3.  您定义了一个名为“ex”的 Example 实例。
4.  您调用*ex*上的实例方法，它定义了一个具有相同名称的*新方法。*
5.  当您再次调用实例方法时，将使用新方法而不是旧方法。

### 为什么有效

基本上，方法的最后一个定义[替换](https://stackoverflow.com/a/10560488/1301972)了该命名空间中的任何早期定义，但这些方法实际上是新对象。您可以看到它的实际效果，如下所示：

```
def my_method
  puts 'Old Method'
  puts  self.method(:my_method).object_id
  def my_method
    puts 'New Method'
    puts  self.method(:my_method).object_id
  end  
end 
```

如果您在 irb 或 pry 会话中运行它，您可以看到在运行时重新定义的方法：

```
> my_method; puts; my_method
Old Method
8998420

New Method
8998360 
```

从不同的对象 ID 可以看出，即使这些方法具有相同的名称并附加到同一个对象（通常是控制台上的*main*），它们实际上是不同的方法对象。[但是，由于这些方法是用相同的名称定义的，因此在实例进行方法查找](http://blog.rubybestpractices.com/posts/gregory/031-issue-2-method-lookup.html)时只能找到最新的定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T16:33:15.573

首先要认识到*Ruby 中没有内部或外部方法之类的东西，*这一点很重要。

您在方法中定义了一个新方法——在这种情况下，由于正在定义的方法与现有方法具有相同的名称，因此新定义完全覆盖了原始方法。

你所拥有的相当于（也许）更明显的：

```
class Example
  def one
    self.class.send(:define_method, :one) do
      @value = 99
    end
    puts "Expensive Call"
    @value = 99 # assume its expensive call
  end
end 
```

这里更清楚的是，您正在类的上下文中定义一个方法。

# javascript - 我应该使用多个画布（HTML 5）还是使用 div 来显示 HUD 数据？

> ID：11384657
> 
> 赞同：7
> 
> 时间：2012-07-08T16:14:40.513
> 
> 标签：javascript, html, canvas

我正在制作一个游戏，其中健康栏（动画）和其他一些信息在视觉上表示，比如一些图标显示玩家拥有的炸弹数量等。现在，这可以在画布中完成（通过制作另一个画布来获取信息它位于主画布上，或者可以使用许多 div 和具有绝对定位的跨度来完成。这是我第一次制作基于浏览器的游戏，所以如果有经验的人看到这个，告诉我你的推荐。**我想知道哪种方法会更快。**

该游戏还将在移动设备上运行。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T16:40:00.503

没有直截了当的答案，我建议您使用不同的浏览器进行 FPS 测试，它如何在您的用例中发挥作用。如果您不希望如此深入，我建议您只需在画布内绘制元素，如果您需要隐藏它们，则从渲染循环中省略 drawHUD() 调用。

对于 HTML HUD 覆盖`<canvas>`应考虑以下因素

*   `<canvas>`如果画布上有 DOM 元素，Web 浏览器合成器能否正确进行硬件加速

*   `<canvas>`由于处理 DOM 元素的继承复杂性，HTML / DOM 操作总是比操作慢

*   `<canvas>`像素空间保持在内部，如果您尝试在画布本身外部`<canvas>`绘制元素，可能很难实现像素完美对齐`<canvas>`

*   HTML 为文本提供了比画布 drawString() 更多的格式化选项 - 是否需要 HTML 格式化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T19:57:59.663

使用画布。如果需要，可以使用两张画布，一张覆盖在另一张上，但使用画布。

完全触摸 DOM 很慢。使文档重做布局，因为移动的 DOM 元素的大小非常慢。处理取消（或不取消）更多事件，因为在画布顶部有物理上的 DOM 项目可能会很痛苦，为什么还要麻烦处理呢？

如果您的 HUD 不经常更新，那么最快的做法是在它发生变化时将其绘制到内存中的画布上，然后在更新框架时始终将该画布绘制到主画布上。这样，您的 drawHud 方法将如下所示：

```
function drawHUD() {
  // This is what gets called every frame
  // one call to drawImage = simple and fast
  ctx.drawImage(inMemoryCanvas, 0, 0);
} 
```

当然更新HUD信息就像：

```
function updateHUD() {
  // This is only called if information in the HUD changes
  inMemCtx.clearRect(0, 0, width, height);
  inMemCtx.fillRect(blah);
  inMemCtx.drawImage(SomeHudImage, x, y);
  var textToDraw = "Actually text is really slow and if there's" + 
                   "often repeated lines of text in your game you should be" +
                   "caching them to images instead";
  inMemCtx.fillText(textToDraw, x, y);
} 
```

由于 HUD 通常包含文本，因此如果您使用任何内容，我真的强烈建议您对其进行缓存。[更多关于文本性能的信息](http://simonsarris.com/blog/322-canvas-drawtext-considered-harmful)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T14:09:24.937

正如其他人所说，没有普遍的最佳方法，因为它取决于您需要渲染的具体内容、频率以及图形组件之间可能需要发生的消息传递。

虽然 DOM 回流确实很昂贵，但这种全面警告并不总是适用。例如，使用 position:fixed; 元素避免触发页面重排（如果有非固定子元素，则不一定在元素内）。重绘（如果这是错误的，请纠正我）很昂贵，因为它是像素推送，因此本质上并不比将相同数量的像素推送到画布上要慢。有些事情可能会更快。更重要的是，每个都有某些操作，它们比另一个具有性能优势。

以下是需要考虑的几点：

在许多 A 级浏览器上使用 WebGL 加速的画布元素的可能性越来越大。这适用于 2D，其优点是将绘图操作发送到 GPU，这比 2D 上下文快得多。但是，这在某些目标平台上可能不可用（例如，在撰写本文时，它在 iOS Safari 中可用，但在针对混合移动应用程序使用的 iOS UIWebView 中不可用。）使用库包装画布可以抽象这一点如果可用，请使用 WebGL。看看 pixi.js。

相反，DOM 具有 CSS3 动画/过渡，通常由 GPU 自动硬件加速（不依赖于 WebGL）。根据动画的类型，您通常可以通过这种方式获得比使用画布更快的结果，并且通常使用更简单的代码。

最终，作为软件性能的一项规则，了解所使用的算法至关重要。也就是说，无论使用哪种方法，您如何调度动画帧？您是否查看了分析器以查看哪些事情花费的时间最多？这种做法*非常*适合了解影响性能的因素。

我一直在开发具有多个动画的应用程序，并将每个组件都实现为 DOM 和画布。最初我很惊讶 DOM 版本比画布（用 KineticJS 包装）版本性能更高，但我知道这是因为所有动画元素都是位置：固定并使用 CSS（通过 jQuery UI 在引擎盖下），因此获得 GPU 性能。然而，管理这些元素的代码感觉很笨拙（在我的例子中是 ymmv）。使用画布方法可以实现更完美的像素渲染，但是它失去了使用 CSS 设置样式的能力（这在技术上也允许像素完美的渲染，但实现起来可能或多或少复杂）。

我通过将最复杂的动画节流到较低的帧速率实现了很大的加速，在我的情况下，这与 60fps 版本没有区别，但在较旧的 iPad 2 上运行流畅如黄油。节流需要使用 requestAnimationFrame 和钳制调用不再频繁比想要的帧率。这对于 DOM 上的 CSS 动画来说很难做到（尽管同样，这些在很多事情上本质上更快）。我接下来要看的是将多个基于画布的组件同步到同一个 requestAnimationFrame 循环（可能是独立节流，或者是循环方法，其中每个组件都获得一定的帧速率，这可能适用于 2-3元素。（顺便说一句，

通过分析并看到我的代码中与 GUI*无关*的一个类有一个经常调用的特定方法来计算属性，我还获得了巨大的速度提升。有问题的类是不可变的，所以我改变了方法来记忆值，发现 CPU 使用率下降了一半。感谢 Chrome DevTools 和火焰图！始终配置文件。

Most of the time, the number of pixels being updated will tend to be the biggest bottleneck, though if you can do it on the GPU you have effectively regained all the CPU for your code. DOM reflows should be avoided, but this does not mean avoid the DOM. Some elements are far simpler to render using the DOM (e.g. text!) and may be optimized by the browser's (or OS's) native code more than canvas. Finally, if you can get acceptable performance for a given component using either approach (DOM or canvas), use the one that makes the code simplest for managing that type of component.

最好的建议是尝试不同方法中的隔离部分，使用分析器运行，使用技术过度绘制或以其他方式突破限制，以查看哪种方法可以运行得最快，并且不要在必须优化之前进行优化。这条规则的警告是您要问的问题：我如何事先知道哪种技术方法可以实现最佳性能？如果您根据*假设*的答案选择一个，那么您基本上是在过早地进行优化，并且会忍受由此引起的任意痛苦。相反，如果您选择专注于应用程序需求的快速原型设计或（甚至更好）受控实验，那么您就是在进行研发 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T17:00:27.360

[Browserquest](http://browserquest.mozilla.org/)使用 HTML 元素显示他们的 HUD，它的好处是您不必担心重绘等（并且性能会非常好，因为整个浏览器引擎都经过优化以非常快地渲染 DOM。

他们（browserquest）还为不同的游戏元素使用了几个分层的画布元素。我不知道确切的结构，但我想元素显示在哪个画布上取决于它需要重绘的频率。

# python - 使用 pycrypro 的 AES 加密 JPG 文件失败

> ID：11384658
> 
> 赞同：0
> 
> 时间：2012-07-08T16:14:47.000
> 
> 标签：python, encryption, jpeg, pycrypto

下面给出的是我编写的代码（尚未完成），用于使用带有 pycrypto 模块的 python 加密和解密文件。

```
from Crypto.Hash import SHA256 
from Crypto.Cipher import AES 
import getpass

class ED(object):   
  def getfromuser(self,choice):
    if choice=='key':
        key=getpass.getpass('Enter AES Key (minimum 16 characters): ')
        if len(key)<16:
            print 'Key entered too short. Please try again.'
            self.getfromuser(choice)
        key=key+str(8-len(key)%8)*(8-len(key)%8)
        return key
    if choice=='IV':
        IV_seed=raw_input('Enter a seed for the IV: ')
        IV=SHA256.new()
        IV.update(IV_seed)
        IV.digest()
        return str(IV)[0:16]

  def AESEncrypt(self,key,IV,source,dest):

    f=open(source,"r")
    fstream=f.read()
    f.close()

    AES_stream=AES.new(key,AES.MODE_CBC,IV)
    AES_encrypted=AES_stream.encrypt(fstream)

    with open(dest,"w") as write_file:
        write_file.write(AES_encrypted)

  def AESDecrypt(self,key,IV,source,dest):
    f=open(source,"r")
    fstream=f.read()
    f.close()
    AES_stream=AES.new(key,AES.MODE_CBC,IV)
    AES_decrypted=AES_stream.decrypt(fstream)
    with open(dest,"w") as write_file:
        write_file.write(AES_decrypted) 
```

当我尝试使用它加密 JPG 文件时，出现以下错误：

```
 AES_encrypted=AES_stream.encrypt(fstream)
    ValueError: Input strings must be a multiple of 16 in length 
```

我在一个 mp4 文件上进行了尝试，它运行良好：加密和解密也是如此。

这个错误的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:37:26.230

我找到了解决方案。如果不想麻烦填充，可以使用[CFB（密码反馈）](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher_feedback_.28CFB.29)模式，如下所示：

`AES_stream=AES.new(key,AES.MODE_CFB,IV)`

# regex - 我应该在 Pig Latin 中使用什么类型的分隔符来处理 apache 日志？

> ID：11384666
> 
> 赞同：1
> 
> 时间：2012-07-08T16:16:25.840
> 
> 标签：regex, hadoop, apache-pig

如果这是我的 Apache 日志的外观，我应该在 PigLatin 中使用什么分隔符来拆分数据。

```
[Mon Jul 02 10:04:18 2012] [error] [client x.x.x.x] File does not exist: /home/ec2-  user/xxxxxxxxxx/xxxxxxxxx, referer: http://xxxx/xxxxx/xxxxx/ 
```

我试过 PigStorage(',') 来拆分引用者和其他字符串。但我怎么能分裂

```
[Mon Jul 02 10:04:18 2012] [error] [client x.x.x.x] File does not exist: /home/ec2-user/xxxxxxxxxx/xxxxxxxxx 
```

如果我使用空格作为分隔符 Mon Jul 02 10:04:18 2012 将被拆分为多个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:24:28.127

[作为Piggybank](https://cwiki.apache.org/confluence/display/PIG/PiggyBank)的一部分，您尝试过 Log Loaders吗？

*   [http://kickstarthadoop.blogspot.com/2011/06/analyzing-apache-logs-with-pig.html](http://kickstarthadoop.blogspot.com/2011/06/analyzing-apache-logs-with-pig.html)
*   [http://www.cloudera.com/blog/2009/06/analyzing-apache-logs-with-pig/](http://www.cloudera.com/blog/2009/06/analyzing-apache-logs-with-pig/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:14:15.217

这就是我使用的：

```
REGISTER  /usr/local/pig-0.10.0/contrib/piggybank/java/piggybank.jar;        
A = load '*.log'
        USING org.apache.pig.piggybank.storage.MyRegExLoader(
              '(DATETIMEREX) (ERROREX) (CLIENTEX) (.*)')
        AS ( 
                 dateTime : chararray, 
                 error    : chararray,
                 client   : chararray, 
                 line     : chararray ); 
```

用适当的正则表达式替换 DATETIMEX、ERROREX、CLIENTEX。

# javascript - javascript/html/css 显示/隐藏框

> ID：11384668
> 
> 赞同：0
> 
> 时间：2012-07-08T16:16:52.690
> 
> 标签：javascript, html, toggle

我以前做过类似的事情，但这次代码不起作用。基本上，我想让用户打开和关闭一个 html 框。这是一个jsfiddle

[http://jsfiddle.net/2pcwW/](http://jsfiddle.net/2pcwW/)

这有几个问题。首先，它无法正常工作，可能是由于拼写错误。其次，我希望默认隐藏文本，而不是显示它，这与它试图做的相反。最后，是否可以在 div 内放置一个表格，以便整个表格打开和关闭 - 代替“一些文本”。

这是非工作代码..与 jsfiddle 中的相同。

```
JS:
function toggleBox(obj) {
            var box = document.getElementById("box");
            if (box.style.display == "none") {
                box.style.display = "";
                obj.innerHTML = <div>Hide</div>;
            } else {
                box.style.display = "none";
                obj.innerHTML = <div>Show</div>";
            }
        }
html:
<table><tr><td><div>
<a href="javascript:void(0)" onclick="toggleBox(this);"><div>Hide</div></a><div id="box">
Some text</div></div></td></tr></table> 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:21:26.760

好吧，如果你可以不使用 JavaScript（并且只支持实现`:target`伪选择器的浏览器）：

```
<table>
    <tr>
        <td>
            <div>
                <a href="#box">
                    <div>Hide</div>
                </a>
                <div id="box">
                    Some text. <a href="#">Hide</a></div>
            </div>
        </td>
    </tr>
</table> 
```

和 CSS：

```
#box {
    display: none;
}

#box:target {
    display: block;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2pcwW/5/)。

# c# - 使用 PostMessage 发送正确的 ALT+C

> ID：11384669
> 
> 赞同：3
> 
> 时间：2012-07-08T16:17:05.200
> 
> 标签：c#, postmessage, alt-key

我试图发送我的应用程序`RIGHT ALT` + `C`。

我尝试按照以下方式进行操作：

```
PostMessage(hWindow, WM_KEYDOWN, (IntPtr)0x0043, (IntPtr)0x0012);
Delay(1000);
PostMessage(hWindow, WM_KEYUP, (IntPtr)0x0043, (IntPtr)0x0012); 
```

和

```
PostMessage(hWindow, WM_KEYDOWN, (IntPtr)0x0043, (IntPtr)0x0001);
Delay(1000);
PostMessage(hWindow, WM_KEYUP, (IntPtr)0x0043, (IntPtr)0x0001); 
```

但它不正确。我应该如何使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:26:21.050

是的，可以使用 PostMessage。我使用了 Spy++ 程序（它在 Visual Studio 中，或者你可以下载它[http://mdb-blog.blogspot.com/2010/11/microsoft-spy-or-spyxx-for-download.html](http://mdb-blog.blogspot.com/2010/11/microsoft-spy-or-spyxx-for-download.html)）我运行了 notepad.exe 和Spy++，并使用函数 FindWindow 来处理这个记事本。然后我使用 Spy->LogMessages，在选项卡消息中我清除了所有并保持复选框键盘，在输出中我检查了原始消息参数。

然后在记事本中按下 alt+1 并记下 Window Messages 中的值。我现在知道，在哪里使用 WM_KEYDOWN、WM_KEYUP、WM_SYSKEYUP 等和值 lParam、wParam。

我的功能：

```
 public void PressKeyWithAlt(uint key, uint lParamDown, uint lParamUp)
    {
        PostMessage(hWindow, WM_KEYDOWN, VK_CONTROL, 0x001D0001);
        PostMessage(hWindow, WM_KEYDOWN, VK_MENU, 0x21380001);
        PostMessage(hWindow, WM_KEYDOWN, key, lParamDown);
        Delay(1000);
        PostMessage(hWindow, WM_KEYUP, key, lParamUp);
        PostMessage(hWindow, WM_SYSKEYUP, VK_CONTROL, 0xE01D0001);
        PostMessage(hWindow, WM_KEYUP, VK_MENU, 0xC1380001);
    } 
```

例如对于 alt+1

```
PressKeyWithAlt(VK_1, 0x20020001, 0xE0020001); 
```

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:56:53.367

尝试发送[WM_SYSKEYDOWN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646286%28v=vs.85%29.aspx)和[WM_SYSKEYUP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646287%28v=vs.85%29.aspx)消息。它们是在按下并释放 F10 或 ALT+某个键时生成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:19:46.363

交错它们，比如

```
alt down
c down
delay
c up
alt up 
```

# javascript - 查看 HTML5 画布中是否有两个矩形

> ID：11384672
> 
> 赞同：0
> 
> 时间：2012-07-08T16:17:25.153
> 
> 标签：javascript, html

我正在用 HTML5 制作我的第一个游戏，我需要弄清楚如何判断两个矩形是否相互碰撞。到目前为止，我真的不确定如何。这是我尝试过的代码，但它仅在敌人击中 this 的绘制点时才有效。到目前为止：

```
if(this.drawX >= enemies[i].drawX && this.drawX <= enemies[i].drawX + enemies[i].width && this.drawY >= enemies[i].drawY && this.drawY <= enemies[i].drawY + enemies[i].height) { 
```

我对如何正确地做到这一点感到困惑。有人可以帮我吗？

编辑：我试过这段代码：

```
if (!(this.drawX + this.width < enemies[i].drawX ||
        enemies[i].drawX + enemies[i].width < this.drawX ||
        this.drawY + this.height < enemies[i].drawY ||
        enemies[i].drawY + enemies[i].height < this.drawY)) {
                   gameOver();
           } 
```

该代码似乎使游戏几乎随机结束。怎么解决，也不好意思等了这么久。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:56:54.217

你需要写一个这样的函数

```
function (rectA, rectB) {
  return !(rectA.x + rectA.width < rectB.x ||
           rectB.x + rectB.width < rectA.x ||
           rectA.y + rectA.height < rectB.y ||
           rectB.y + rectB.height < rectA.y);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:22:02.373

如果矩形相交，则一个矩形的角必须在另一个矩形内（假设它们没有旋转）。编写一个函数，该函数接受一个矩形和一个点，如果该点在矩形内，则返回 true。然后调用该函数 8 次（每个角一次）并将结果与`||`​​ .

# wcf - 服务器和许多离线客户端的同步协议

> ID：11384674
> 
> 赞同：1
> 
> 时间：2012-07-08T16:17:31.417
> 
> 标签：wcf, timestamp, changeset, data-synchronization

我正在开发一项网络服务，该服务可以通过网站和移动客户端访问，而无需永久连接互联网。

这个想法是在互联网上和所有客户端上同步数据库。当用户在移动客户端上更改数据时，它在本地数据库中被标记为已更改。当用户在网站上更新数据时，在线数据库中的变更集会增加。同步后，客户端会记住其实际数据的变更集。问题是，当我在一个客户端上更改数据，然后在另一个客户端上然后触发同步时，Web 服务器不知道哪些数据是最后一个。

以下是它当前如何工作的示例：

1.  可以说一切在一开始都是同步的。- 数据为“A”
2.  第一个客户端更改数据并将其标记为已更改。- 客户端本地数据库中的数据更改为“B”
3.  第二个客户端更改数据并将其标记为已更改 - 本地数据库中的数据更改为“C”
4.  第一个客户端上线并更新在线数据库（文本现在是“B”）。在线数据库中的变更集增加了。
5.  第二个客户端上线，检测在线数据库中的新变更集并下载新数据（本地“C”被在线“B”重写）（文本现在是“B”）
6.  现在一切都同步了，但文本是“B”而不是“C”

我认为问题出在第 6 步。客户知道，既有本地更改又有在线更改，但无法确定正确的值是多少。

你能帮我吗，如何解决这个问题？我在考虑时间戳而不是变更集，但我不能确保所有客户端都有正确的时间。

PS：服务器使用MSSQL 运行WCF 服务，客户端是ASP.NET 网站和Andorid 和WP7 智能手机。它无法在在线数据库中保存有关客户端的任何信息。我希望客户端同步每天运行 +/- 一次。

我希望我的问题是可以理解的:) 谢谢。

# soap - 通过 HTTPS 的 SOAP Web 服务不起作用

> ID：11384676
> 
> 赞同：0
> 
> 时间：2012-07-08T16:18:03.540
> 
> 标签：soap, nusoap, sugarcrm, soap-client

我目前在 Sugarcrm 工作，它的网址在 https 中。Soap 无法在 https url 上运行，我的代码在 http url 中完美运行。在 https 模式下运行相同的代码需要哪些更改？

我使用此代码。用户名、密码和 url 仅供您参考。

```
<?php
require_once('nusoap.php');
$client = new soapclient('https://www.sugarcrm.com/soap.php?wsdl',true);
$auth_array = array(
'user_auth' => array(
'user_name' => 'abc',
'password' => md5('abc'),
)
);

$login_results = $client->call('login',$auth_array);
echo $session_id = $login_results['id'];
$user_guid = $client->call('get_user_id',$session_id);
printf("\n".$auth_array['user_auth']['user_name'].' has a GUID of ' . $user_guid . "\n\n");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:01:33.317

确保 $sugar_config site_url 设置正确反映了 https URL。您可以在 SugarCRM 安装根目录中的 config.php 文件中更改此设置。

# c++ - 类似于 sql 语法的 C++ 对象过滤引擎

> ID：11384677
> 
> 赞同：1
> 
> 时间：2012-07-08T16:18:10.083
> 
> 标签：c++

是否有一个 c++ 库提供类似 SQL 的语法来根据特定对象的 Getters/Properties 过滤/查询？我正在寻找与[http://www.thomasfrank.se/sqlike.html](http://www.thomasfrank.se/sqlike.html)类似的东西（这适用于 JS/AS），但用 C++ 编写。需求将是跨平台的、轻量级的，并且（不是必须的，但）希望不使用 boost。

例如，我为我的 C++ 代码实现了一个脚本引擎——我的脚本可以向我的 C++ 对象添加回调。现在，我不想为每个对象（演员）编写脚本，而是想根据过滤器将其应用于所有对象。

所以在我的脚本中我会有类似的东西

```
manager:AddListener("select name="SomeName" and age > 10 or weight < 10",SomeEvent,MyScriptFunc) 
```

当创建一个新对象时，我会查看所有侦听器 - 如果此对象属性与配置的对象匹配，我添加它（例如对象具有属性名称=某个名称并且年龄大于 10）

目前我只是通过唯一标识符 (ID) 来识别我的对象 - 但是当我将相同的事件侦听器应用于类似对象时，我希望更加灵活。

所以基本上，如果有一个从某个字符串查询创建过滤器对象的库就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:21:26.027

你可以试试[SQLite](http://www.sqlite.org/)：

> SQLite 是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。SQLite 是世界上部署最广泛的 SQL 数据库引擎。SQLite 的源代码在公共领域。

您可以创建一个内存数据库来保存您希望查询的 C++ 对象属性：

```
sqlite3_open(":memory:", &db); 
```

然后，您可以使用[One-Step Query Execution Interface](http://www.sqlite.org/c3ref/exec.html)来实际执行查询。

要填充数据库，您可以使用 IDL 来描述您的对象，并且您的 IDL 解析器将创建 C++ 接口头文件和填充数据库的代码。

# html - 由 margin-top 向下推的嵌套框

> ID：11384679
> 
> 赞同：3
> 
> 时间：2012-07-08T16:18:32.167
> 
> 标签：html, css

> **可能重复：**
> [当 DIV 为空时，CSS 属性被传递给父元素](https://stackoverflow.com/questions/1351881/css-properties-being-passed-up-to-the-parent-element-when-the-div-is-empty)

我是 CSS 布局设计的新手。

我现在想做的是我想做两个 Div 盒子，一个嵌套在另一个里面。无论如何，我的问题是我为内框设置的上边距没有按照我想要的方式运行。

请以下面的脚本部分为例：

**[演示.html]**

```
<html>
    <header>
        <title>Mock-up page</title>
        <link href="stylesheets/demo.css" rel="stylesheet"  type="text/css">

    </header>
    <body>
        <div id="box1">
            <div id="box2">div 2</div>
        </div>
    </body>
</html> 
```

**[演示.css]**

```
#box1{
    width: 300px;
    height: 300px; 
    background-color:#0000FF;       
}

#box2{
    margin-top: 30px;
    background-color:#008000;
} 
```

它产生的效果是它只将外框从body标签向下推了30px（图片左侧），这不是我所期望的（图片右侧）。

![在此处输入图像描述](../Images/6be07f9e9d3ca0b6a4e0db3223036704.png)

发生这种情况的原因是什么以及如何更正样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:48:19.327

改变`margin-top`to`padding-top`会做你想做的事。

这是许多浏览器中的一个已知问题。
当元素的第一个子元素有`margin-top`（之前没有内容）时，边距会溢出父元素的顶部并像您的情况一样推动它。

存在其他解决方案，但它们都有点 hacky：

*   应用位置：相对于孩子并将 更改`margin-top`为 a`margin-bottom`并应用`top: 20px;`；

*   在内框之前创建一个包含一些内容的元素（  可以在这里使用）`height: 0;`和`overflow: hidden;`;

*   为元素的背景设置一个`border-top: 1px solid transparent`或相同的颜色（本例中，注意边框加到对象的高度；

*   等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:29:07.133

您可以添加`position: relative`到#box1 和`position: absolute`#box2。

看[这个例子](http://jsfiddle.net/q9XFa/1/)

[CSS 职位解释](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:33:32.330

**CSS**

```
#box1{
    display:block;
    width: 300px;
    height: 300px; 
    background-color:#0000FF;
    border:solid transparent 1px;    
}

#box2{
    margin-top: 30px;
    background-color:#008000;
} ​ 
```

**HTML**

```
<div id="box1">
    <div id="box2">div 2</div>
</div>​ 
```

如果您将外框保持为空（无文本节点），那么它正在执行此行为，老实说我不明白为什么，但我在[**这里**](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)找到了它为什么这样做，它被称为`collapsed margin`并且我已经添加`border:solid transparent 1px;`以解决问题**但或者，您也可以对外部使用填充** `DIV`。这也是关于[**SO**](https://stackoverflow.com/questions/1351881/css-properties-being-passed-up-to-the-parent-element-when-the-div-is-empty)的答案。

[**演示。**](http://jsfiddle.net/W6P3C/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T18:43:23.900

Chris Coiyer 的这篇[文章很好地解释了 box-sizing。](http://css-tricks.com/box-sizing/)理解这一点会对你有所帮助。

# php - 在 PHP 中获取 PDF 颜色

> ID：11384691
> 
> 赞同：2
> 
> 时间：2012-07-08T16:20:39.190
> 
> 标签：php, pdf, colors, fpdf

我正在尝试制作一个 Web 应用程序来检查 PDF 文档的颜色。我的首选语言是 PHP。

一开始我一直在考虑GD，但这只是指图像（jpg，png，gif）。PDF 没有。对于图像，我将使用类似于此的一些方法：[获取图像颜色](https://stackoverflow.com/questions/1746530/get-image-color)。

那么有没有人知道一些方法、库（开源）或其他东西来制作这样的应用程序？我在网上找不到任何例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:35:24.030

您最好将 PDF 转换为图像，然后使用与图像相同的方法。除了容易做到之外，这也将保证一致的结果。

但是，将 PDF 文件转换为图像并不是 PHP 本身就具备的能力。[最好的方法是这个问题](https://stackoverflow.com/questions/467793/how-do-i-convert-a-pdf-document-to-a-preview-image-in-php)中描述的基于 ImageMagick 的方法。它也提供了许多选择。

# matlab - 如何在matlab的散点图上显示颜色渐变？

> ID：11384692
> 
> 赞同：3
> 
> 时间：2012-07-08T16:20:51.670
> 
> 标签：matlab, visualization, matlab-figure, scatter

我有一个散点图，它将覆盖几组数据。每组数据当前显示为默认颜色图中的下一种颜色。这是我现在的代码：

```
figure
hold on
for i=1:10
   scatter(RunRawArea(i,:), RunRawNetLength(i,:));
end
hold off 
```

我想要的是对每组数据（由 i 索引）进行颜色编码，使其成为渐变上的下一个颜色。例如，i=1 的数据为蓝色，i=5 为紫色，i=10 为红色。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:22:57.337

您应该添加另一个参数`scatter`- 称为`CData`

[https://www.mathworks.com/help/matlab/ref/scatter.html](https://www.mathworks.com/help/matlab/ref/scatter.html)

> 说明： scatter(x,y) 在向量 x 和 y 指定的位置创建一个带有圆圈的散点图。这种类型的图表也称为气泡图。

在您的示例中：

```
figure
hold on
colorVec = linspace(1,0, size(RunRawNetLength,1));
colorVec = transpose(colorVec);
colorVec = repmat(colorVec,[1 3]);
for i=1:10
   scatter(RunRawArea(i,:), RunRawNetLength(i,:),'CData', colorVec );
end
hold off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-07T21:13:46.120

**方法一：**

您可以对数据进行矢量化，因此您不需要循环，而是按系列添加颜色：

```
% specify your color map:
colorCode = lines(size(RunRawNetLength,1)); % or any other colormap...
% define the correct color for each series:
coloVev = repmat(colorCode,size(RunRawNetLength,1),1);
% plot it all at once without a loop:
scatter(RunRawArea(:),RunRawNetLength(:),[],coloVev) 
```

**方法二：**

如果你有统计和机器学习工具箱，你也可以这样做[`gscatter`](http://www.mathworks.com/help/stats/gscatter.html)：

```
% define the series of data:
group = repmat(1:size(RunRawNetLength,1),1,size(RunRawNetLength,1));
% plot it all at once without a loop:
gscatter(RunRawArea(:),RunRawNetLength(:),group,colorCode); 
```

如果您的颜色图没有足够的颜色用于所有系列，则函数循环并从第一个开始。

**结果：**

在这两种情况下，一些随机数据的结果将是（主要区别是`gscatter`填充数据点并默认添加图例）：

[![gscatter 演示](../Images/0d293ecff9c82d8803efed3ef7b0a754.png)](https://i.stack.imgur.com/EUVQ9.png)

*请注意，我使用了`lines`只有 7 个条目的颜色图，所以在这个有 10 个系列的示例中，它会重复自己。*

# python - 两个列表，一个单词，一个短语

> ID：11384695
> 
> 赞同：2
> 
> 时间：2012-07-08T16:21:44.340
> 
> 标签：python, regex, filter

好的，所以我有两个列表，一个是单词，如下所示：

```
["happy", "sad", "angry", "jumpy"] 
```

ETC

然后是短语列表，如下所示：

```
["I'm so happy with myself lately!", "Johnny, im so sad, so very sad, call me", "i feel like crap. SO ANGRY!!!!"] 
```

我想使用第一个单词列表来查找短语列表中单词的出现次数。我不在乎我是否拉出实际的单词，用空格分隔，或者只是它们出现的次数。

根据我的调查，似乎 re 模块和过滤器是要走的路？

另外，如果我对我需要什么的解释不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:33:34.700

```
>>> phrases = ["I'm so happy with myself lately!", "Johnny, im so sad, so very sad, call me", "i feel like crap. SO ANGRY!!!!"]
>>> words = ["happy", "sad", "angry", "jumpy"]
>>> 
>>> for phrase in phrases:
...     print phrase
...     print {word: phrase.count(word) for word in words}
... 
I'm so happy with myself lately!
{'jumpy': 0, 'angry': 0, 'sad': 0, 'happy': 1}
Johnny, im so sad, so very sad, call me
{'jumpy': 0, 'angry': 0, 'sad': 2, 'happy': 0}
i feel like crap. SO ANGRY!!!!
{'jumpy': 0, 'angry': 0, 'sad': 0, 'happy': 0} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T16:25:02.023

非常简单，直接的解决方案：

```
>>> phrases = ["I'm so happy with myself lately!", "Johnny, im so sad, so very sad, call me", "i feel like crap. SO ANGRY!!!!"]
>>> words = ["happy", "sad", "angry", "jumpy"]
>>> for phrase in phrases:
        for word in words:
            if word in phrase:
                print('"{0}" is in the phrase "{1}".'.format(word, phrase))

"happy" is in the phrase "I'm so happy with myself lately!".
"sad" is in the phrase "Johnny, im so sad, so very sad, call me". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T16:50:28.393

```
>>> phrases = ["I'm so happy with myself lately!", "Johnny, im so sad, so very sad, call me", "i feel like crap. SO ANGRY!!!!"]
>>> words = ["happy", "sad", "angry", "jumpy"]
>>> words_in_phrases = [re.findall(r"\b[\w']+\b", phrase.lower()) for phrase in phrases]
>>> words_in_phrases
[["i'm", 'so', 'happy', 'with', 'myself', 'lately'], ['johnny', 'im', 'so', 'sad', 'so', 'very', 'sad', 'call', 'me'], ['i', 'feel', 'like', 'crap', 'so', 'angry']]
>>> word_counts = [{word: phrase.count(word) for word in words} for phrase in words_in_phrases]
>>> word_counts
[{'jumpy': 0, 'angry': 0, 'sad': 0, 'happy': 1}, {'jumpy': 0, 'angry': 0, 'sad': 2, 'happy': 0}, {'jumpy': 0, 'angry': 1, 'sad': 0, 'happy': 0}]
>>> 
```

对于 line `word_counts = [{word: phrase.count(word) for word in words} for...`，您需要 Python 2.7+。如果由于某种原因，您使用的是 < Python 2.7，请将该行替换为以下内容：

```
>>> word_counts = [dict((word, phrase.count(word)) for word in words) for phrase in words_in_phrases] 
```

# objective-c - 在子控制器中查看控制器框架大小

> ID：11384696
> 
> 赞同：6
> 
> 时间：2012-07-08T16:21:55.167
> 
> 标签：objective-c, ios, uiviewcontroller

我正在实施 UIViewcontroller 遏制。在下面的示例中，我在根控制器中设置子控制器的帧大小。子视图显示为我设置的大小，但是当我检查它在 container1 中的边界时，它报告的大小与我设置的大小不同。

根控制器（容器）

```
- (void)viewDidLoad
{
  [super viewDidLoad];

self.containA = [[Container1 alloc]init];
self.containB = [[Container2 alloc]init];

 self.containA.view.frame = CGRectMake(50, 50,50, 50);
 self.containB.view.frame = CGRectMake(50, 50, 300, 300);

   [self addChildViewController:self.containA];
   [self addChildViewController:self.containB];

  [self.view addSubview:self.containA.view]; 
```

容器1

```
-(void)viewDidLoad {
    [super viewDidLoad];

UIView *view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
//[self.view addSubview:view];
self.view = view;
self.view.backgroundColor = [UIColor redColor];
[view release];
 NSLog(@"view dims %f %f",self.view.bounds.size.width,self.view.bounds.size.height);
} 
```

容器 1 视图的控制台输出变暗 768.000000 1004.000000

我认为这个问题与将视图框架设置为 UIScreen main screen]applicationFrame 相关。所以我删除了所有这些代码，以便自动创建 uiview。问题依旧。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T16:27:00.610

视图框架在 viewDidLoad 中实际上是不可用的；您应该将所有几何操作代码移到 viewWillAppear 中。系统将破坏您在 viewDidLoad 中设置的任何更改，从那里到汤姆即将出现在屏幕上。

# jquery-mobile - Jquery Mobile 预缓存页面

> ID：11384698
> 
> 赞同：0
> 
> 时间：2012-07-08T16:22:01.627
> 
> 标签：jquery-mobile

在我的 jQuery Mobile 中，我有 2 个页面，index.html 和 test.html。`<p>`索引页面中有一个标签，它有一个类，所以当`<p>`在我的 javascript 上单击该标签时，它想加载 test.html。

但是使用 jQuery Mobile 时，索引页面加载测试页面时，它不在 DOM 中。因此，为了进入测试页面并替换 test.html 中 div 的内容，必须首先将其加载到 DOM 中。所以这就是我正在做的事情：

当点击 try2 时，我执行加载页面以将其放入 DOM，然后将 div 替换为新的 html，然后切换到页面。div 的 html 永远不会改变。

```
$('.try2')
  .click(function(){
    $.mobile.loadPage( 'test.html', { showLoadMsg: false } );
    $('#mytest').html('i am here now').fadeIn('slow');
    $.mobile.changePage( "test.html", { transition: "slideup"} );
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:30:46.713

通过在指向第二个页面的链接上使用 data-prefetch 属性来预取页面。文档：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html)

然后绑定到 pageinit 或 pageshow 事件以在第二页转换到视图之前更新 div。

您当前的代码将不起作用，因为事件处理程序中的前两行是异步的，因此要使用它们，您必须将回调函数用于异步函数。

**更新**

如果您想预先缓存页面但没有指向该页面的直接链接，您可以随时创建一个虚拟链接并将其隐藏：

```
<a data-precache href="page2.html" style="display:none;"></a> 
```

# c++ - Windows cmd cerr 上的 qDebug() -> cout

> ID：11384701
> 
> 赞同：0
> 
> 时间：2012-07-08T16:22:13.163
> 
> 标签：c++, qt, winapi, stdout, stderr

我想`qDebug()`在 Windows 中看到消息，`cmd`因为 qDebug() 写入`cerr`我刚刚做的

```
std::cerr.rdbuf(std::cout.rdbuf()); 
```

这没有用。我仍然没有在`cmd`.

# java - 签署使用 maven-assembly 插件创建的 jar 文件

> ID：11384704
> 
> 赞同：5
> 
> 时间：2012-07-08T16:22:52.297
> 
> 标签：java, maven, jar-signing

我想建立一个程序集然后签名。我的问题是 jarsigner 签署的不是程序集，只有独立的 jar 文件。你能告诉我有什么问题吗？使用 Ant 多年后，Maven 对我来说似乎是“魔法”。我看不到插件相互协作和相互传递信息的方式。

执行后`mvn install`，我得到了两个 jar 文件，一个被调用`example-1.0.0-SNAPSHOT.jar`并且这个被签名，一个被调用`example-1.0.0-jar-with-dependencies.jar`并且这个没有被签名。我不需要独奏，只需要组装，但要签名。

这是我的 pom.xml：

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jarsigner-plugin</artifactId>
                <version>1.2</version>
                <executions>
                    <execution>
                        <id>sign</id>
                        <goals>
                            <goal>sign</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <keystore>${project.basedir}\keystore\mykeystore</keystore>
                    <alias>myalias</alias>
                    <storepass>...</storepass>
                    <keypass>...</keypass>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <id>make-my-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>com.example.FooBar</mainClass>
                        </manifest>
                    </archive>
                    <appendAssemblyId>true</appendAssemblyId>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T12:21:35.493

```
 <configuration>
        <archiveDirectory>${project.build.directory}</archiveDirectory>
        <includes>
           <include>*.jar</include>
        </includes>
        <keystore>${project.basedir}/keystore/mykeystore</keystore>
        <alias>keyalias</alias>
        <storepass>storepass</storepass>
        <keypass>keypass</keypass>
    </configuration> 
```

参考这个[http://maven.apache.org/plugins/maven-jarsigner-plugin/sign-mojo.html](http://maven.apache.org/plugins/maven-jarsigner-plugin/sign-mojo.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:57:28.707

您应该尝试将 maven-assembly-plugin 放入 prepare-package 阶段而不是 package 阶段：

```
 <plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
        <execution>
            <id>make-my-assembly</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
    ...
</plugin> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-03T17:32:41.390

更改 POM 中插件的顺序。顺序在 Maven 中是相关的。再次运行`mvn install`并查看输出日志。您应该能够从日志中看到操作的顺序。

# sql - 结合 Active Record 组、加入、最大值和最小值

> ID：11384707
> 
> 赞同：3
> 
> 时间：2012-07-08T16:22:59.053
> 
> 标签：sql, ruby-on-rails, activerecord

我正在尝试掌握 Active Record 查询界面。我有两个模型：

```
class Movie < ActiveRecord::Base
  has_many :datapoints
  attr_accessible :genre
end

class Datapoint < ActiveRecord::Base  
  belongs_to :movie  
  attr_accessible :cumulative_downloads, :timestamp
end 
```

我想找到给定时间段内每种类型的增量下载。

到目前为止，我已经设法在一段时间内获得每部电影的最大和最小下载量，如下所示：

```
maximums = Datapoint.joins(:movie)
    .where(["datapoints.timestamp > ?", Date.today - @timespan])
    .group('datatpoints.movie_id')
    .maximum(:cumulative_downloads) 
```

然后，这使我可以计算每部电影的增量，然后再将其汇总为每种类型的增量。

显然，这有点笨拙，我相信可以一步完成（并使用哈希条件）。我只是不知道怎么做。你能帮我吗？

非常感激！

德里克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:27:17.623

我认为这将允许您计算每种类型的最大值：

```
Movie.joins(:datapoints).where(datapoints: {timestamp: (Time.now)..(Time.now+1.year)}).group(:genre).maximum(:cumulative_downloads) 
```

**编辑 1**

您可以通过几个步骤获得差异：

```
rel = Movie.joins(:datapoints).where(datapoints: {timestamp: (Time.now)..(Time.now+1.year)}).group(:genre)
mins = rel.minimum(:cumulative_downloads)
maxs = rel.maximum(:cumulative_downloads)
res = {}
maxs.each{|k,v| res[k] = v-mins[k]} 
```

**编辑 2**

你最初的方向几乎就在那里。您所要做的就是在 SQL 中计算每部电影的差异并暂存数据，这样您就可以一次性收集数据。我确信有一种方法可以在 SQL 中完成这一切，但我不确定它是否会那么简单。

```
# get the genre and diff per movie
result = Movie.select('movies.genre, MAX(datapoints.cumulative_downloads)-MIN(datapoints.cumulative_downloads) as diff').joins(:datapoints).group(:movie_id) 
# sum the diffs per genre
per_genre = Hash.new(0)
result.each{|m| per_genre[m.genre] += m.diff} 
```

**编辑 3**

包括 select 中的 movie_id 和 group 中的流派：

```
# get the genre and diff per movie
result = Movie
    .select('movies.movie_id, movies.genre, MAX(datapoints.cumulative_downloads)-MIN(datapoints.cumulative_downloads) as diff')
    .joins(:datapoints)
    .group('movies.movie_id, movies.genre') 
# sum the diffs per genre
per_genre = Hash.new(0)
result.each{|m| per_genre[m.genre] += m.diff} 
```

# javascript - 通过 Jquery 添加和删除边框

> ID：11384710
> 
> 赞同：0
> 
> 时间：2012-07-08T16:23:17.933
> 
> 标签：javascript, jquery, html, css

好的，所以我有一个使用以下 css 为边框着色的表单：

```
input[type="text"] {
    border: 1px solid #ccc;
} 
```

我遇到的问题是使用另一个 css 类更改边框颜色。如果我使用以下内容，我可以更改边框`$("#div").css("border", "1px solid green");`，但如果我尝试通过`$("#div").addClass("good");`它添加另一个类，它不会更改边框。使用 css 类更改边框颜色的正确方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:31:22.940

这应该归结为css中的特异性。一些有助于确保您的边界发生变化的事情：

1.  确保样式表上的 .good {} 低于表单元素的基本 CSS
2.  尝试`.good`为该标签类型添加一个后代选择器到您的 css 类中：

    .good input[type=text]{ 边框：1px 纯绿色；}

3.  如果一切都失败了，请添加`!important`到您的`.good`班级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:32:12.143

您应该使用覆盖来强制应用样式：

`.good { border-color: green !important; }`

或者

```
.good { border: 1px solid green !important; } 
```

**[演示](http://jsfiddle.net/AtSNS/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:23:12.333

我会将样式保留在 css 中，如下所示：

```
.default {
    border: 1px solid #ccc;
}

.green {
    border: 1px solid green;
}

.red {
    border: 1px solid red;
}

.blue {
    border: 1px solid blue;
}​ 
```

然后使用 jquery，我将删除当前类，并添加新的所需类。

```
$('input[type="text"]').attr('class', '').addClass(colors[i]); 
```

看看这个小提琴：http: [//jsfiddle.net/joplomacedo/YnnE3/](http://jsfiddle.net/joplomacedo/YnnE3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T19:10:39.803

我想你在下面的风格是这样的..

```
input[type="text"]{
                    border: 1px solid #ccc;
                   } 
.good{
       border:1px solid red; 
     } 
```

和你的 HTML 这些..

```
<input type="text" id="div"/> 
```

现在要使用 jquery 更改输入元素的边框颜色，您只需执行这些操作即可。

```
$('#div').addClass('good'); 
```

现在，如果您想再次更改输入元素的边框颜色，只需执行这些操作即可。

```
$('#div').removeClass('good').addClass('green'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T17:54:46.390

@Brian Vanderbusch 对此给出了最接近的答案。这是一个[CSS 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)问题。

组合的标签/属性选择器 (input[type="text"]) 覆盖了单个类选择器 (.good)。CSS 有一堆规则用于决定哪些选择器优先。

尽管使用 !important 修饰符是覆盖 CSS 特定性规则的一种方法，[但我会小心使用它](http://css-tricks.com/when-using-important-is-the-right-choice/)，因为您实际上是在故意破坏常规规则。这可能会产生意想不到的副作用，并且其他开发人员以后可能难以理解。

在这种情况下，要为您的类选择器授予适当级别的特异性，您只需将其与输入选择器结合起来。这给了它足够的权重来覆盖标签/属性选择器。

我分叉了@Joey 的答案，以演示如何使用标准选择器执行此操作，并避免！重要：

[http://jsfiddle.net/5jX5d/](http://jsfiddle.net/5jX5d/)

# mongodb - 更改 MongoDB 集合的主键

> ID：11384712
> 
> 赞同：2
> 
> 时间：2012-07-08T16:23:47.620
> 
> 标签：mongodb

我之前采取了一条捷径，并通过连接各个字段来创建我的 Mongo 数据库的主键以创建一个“唯一 id”

我现在想将其更改为实际使用 ObjectId。最好的方法是什么？我有略多于 3M 的文档，并希望这尽可能减少破坏性。

一种简单的方法是将站点关闭一段时间，然后将每个文档从一个使用 ObjectIds 的文档复制到另一个文档，但如果可以的话，我想保持应用程序运行。我想一种方法是在迁移发生时同时写入一段时间，但这需要我有两个相似的代码库，所以我想知道是否有办法避免这一切。

提供一些附加信息：它只是一个未被任何其他人引用的集合。我有另一个 MySQL 数据库，其中包含一些用于创建从该 MongoDB 集合读取的查询的值。

我正在使用 PyMongo/Mongoengine 库从 Python 与 MongoDB 进行交互，我不知道是否可以只更改集合的主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:39:58.727

如果您的网站没有自行关闭，则不应以任何理由关闭您的网站。:)

无论您拥有多少百万条记录，问题的解决方案都取决于您如何使用您的 id。

如果您使用这些 id 交叉引用不同集合中的文档，那么对于每个更新的对象，您将更新引用该对象的所有其他对象。

作为第一步，您的系统应该更新以停止以旧方式创建新对象。如果您的系统允许您轻松执行此操作，那么您可以非常轻松地更新数据库。如果这个改变不容易做，那么你的系统有一些架构问题，你应该首先改变它。如果是这种情况，请更新您的问题，以便我更新我的答案。

由于我对您的应用程序和数据一无所知，因此我所说的将过于笼统。我们将要更新的集合称为 coll_bad_id。此集合中的每个项目都在 coll_poor_guy 和 coll_wisdom_searcher 等其他集合中引用。我将如何做到这一点是一次运行 coll_bad_id 一项，如下所示：

```
1\. read one item
2\. update _id with new style of _id
3\. insert item back to collection
    -- now we have two copies of the same item one with old-style id, one with new
4\. update each item referencing this to use new style id
5\. remove the duplicate item with old-style id from collection 
```

您应该记住的一件事是，bson ObjectId 保存的日期/时间数据非常有用。由于您在一天内重建了所有这些对象，因此您的 ObjectId 不会反映这些项目的正确创建时间。对于新添加的项目，他们会。您可以将第一个新添加的项目作为具有正确创建时间的 id 的项目的里程碑。

**更新：**在 Mongo shell 上运行的代码示例。这不是最有效的方法；但是运行起来是安全的，因为我们在使用新的 _id 重新添加它们之前不会删除任何内容。通过在 find() 调用中添加查询，可以更好地做到这一点。

```
var cursor = db.testcoll.find()

cursor.forEach(function(item) {
    var oldid= item._id; // we save old _id to use for removal below.
    delete item._id; // When we add an item without _id, Mongo creates a unique _id.
    db.testcoll.insert(item); // We add item without _id.
    db.testcoll.remove(oldid); // We delete the item with bad _id.
}); 
```

# python - 使用 difflib.get_close_matches() 忽略大小写

> ID：11384714
> 
> 赞同：13
> 
> 时间：2012-07-08T16:24:21.457
> 
> 标签：python, difflib

如何告诉 difflib.get_close_matches() 忽略大小写？我有一本字典，它有一个定义的格式，包括大写。但是，测试字符串可能有全大写或没有大写，它们应该是等价的。但是，结果需要正确大写，所以我不能使用修改过的字典。

```
import difflib

names = ['Acacia koa A.Gray var. latifolia (Benth.) H.St.John',
    'Acacia koa A.Gray var. waianaeensis H.St.John',
    'Acacia koaia Hillebr.',
    'Acacia kochii W.Fitzg. ex Ewart & Jean White',
    'Acacia kochii W.Fitzg.']
s = 'Acacia kochi W.Fitzg.'

# base case: proper capitalisation
print(difflib.get_close_matches(s,names,1,0.9))

# this should be equivalent from the perspective of my program
print(difflib.get_close_matches(s.upper(),names,1,0.9))

# this won't work because of the dictionary formatting
print(difflib.get_close_matches(s.upper().capitalize(),names,1,0.9)) 
```

输出：

```
['Acacia kochii W.Fitzg.']
[]
[] 
```

**工作代码：**

根据 Hugh Bothwell 的回答，我对代码进行了如下修改以获得一个可行的解决方案（当返回多个结果时它也应该有效）：

```
import difflib

names = ['Acacia koa A.Gray var. latifolia (Benth.) H.St.John',
    'Acacia koa A.Gray var. waianaeensis H.St.John',
    'Acacia koaia Hillebr.',
    'Acacia kochii W.Fitzg. ex Ewart & Jean White',
    'Acacia kochii W.Fitzg.']
test = {n.lower():n for n in names}    
s1 = 'Acacia kochi W.Fitzg.'   # base case
s2 = 'ACACIA KOCHI W.FITZG.'   # test case

results = [test[r] for r in difflib.get_close_matches(s1.lower(),test,1,0.9)]
results += [test[r] for r in difflib.get_close_matches(s2.lower(),test,1,0.9)]
print results 
```

输出：

```
['Acacia kochii W.Fitzg.', 'Acacia kochii W.Fitzg.'] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T17:06:28.913

我没有看到任何快速的方法可以让 difflib 进行不区分大小写的比较。

快速而肮脏的解决方案似乎是

*   制作一个将字符串转换为某种规范形式的函数（例如：大写、单行距、无标点符号）

*   使用该函数制作 {canonical string: original string} 的字典和 [canonical string] 的列表

*   对规范字符串列表运行 .get_close_matches，然后通过 dict 插入结果以取回原始字符串

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-09T10:30:05.097

经过大量搜索后，我很遗憾地看到没有针对这个明显用例的简单预设答案。

唯一的选择似乎是[“FuzzyWuzzy”库](https://github.com/seatgeek/fuzzywuzzy)。然而它和 Python 一样依赖 Levenshtein Distance `difflib`，而且它的 API 不是生产质量的。它更晦涩的方法确实不区分大小写，但它没有提供直接或简单的替代`get_close_matches`.

所以这是我能想到的最简单的实现：

```
import difflib

def get_close_matches_icase(word, possibilities, *args, **kwargs):
    """ Case-insensitive version of difflib.get_close_matches """
    lword = word.lower()
    lpos = {p.lower(): p for p in possibilities}
    lmatches = difflib.get_close_matches(lword, lpos.keys(), *args, **kwargs)
    return [lpos[m] for m in lmatches] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-21T19:26:28.323

@gatopeich 有正确的想法，但问题是可能有*许多*字符串*仅*在大小写上有所不同。我们当然希望它们*全部*出现在我们的结果中，而不仅仅是其中之一！

以下改编设法做到这一点：

```
def get_close_matches_icase(word, possibilities, *args, **kwargs):
    """ Case-insensitive version of difflib.get_close_matches """
    lword = word.lower()
    lpos = {}
    for p in possibilities:
        if p.lower() not in lpos:
            lpos[p.lower()] = [p]
        else:
            lpos[p.lower()].append(p)
    lmatches = difflib.get_close_matches(lword, lpos.keys(), *args, **kwargs)
    ret = [lpos[m] for m in lmatches]
    ret = itertools.chain.from_iterable(ret)
    return set(ret) 
```

# javascript - 如何在数组中添加按钮并循环访问它们？

> ID：11384715
> 
> 赞同：0
> 
> 时间：2012-07-08T16:24:29.940
> 
> 标签：javascript, jquery

在下面的代码中有一堆字母按钮：

代码：

```
<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
</table> 
```

现在下面的代码能够打开一个回答按钮：

代码：

```
function addwindow(btn) { 
$('#answer'+btn).addClass("answerBtnsOn");
} 
```

但唯一的问题是上面的代码只能打开一个回答按钮。例如，如果 "Answer" 是`B`，那么它会寻找 button`"#answerB"`并打开那个 button `B`。或者如果“答案”是`E`，那么它会寻找 button`"#answerE"`并打开那个 button `E`。

问题是，如果有多个答案。如果“答案”是，`B E,`那么它不会打开按钮`B`和`E`。这是因为它试图找到`"#answerBE"`不正确的按钮，它应该寻找按钮`"#answerB"`和按钮`"#answerE"`并将它们都打开。

另一个例子是，如果“答案”是`A D F,`它没有打开按钮`A` `D`，并且`F`因为它试图找到`"#answerADF"`不正确的按钮，它应该寻找 button `"#answerA"`、 button`"#answerD"`和 button`"#answerF"`并将它们全部打开。

所以我的问题是，如果有多个答案，我该如何打开多个按钮？我是否需要将所有按钮放在一个数组中并循环遍历它们，以便它能够遍历所有按钮并打开那些应该打开的按钮？

更新：

下面是调用 addwindow() 函数的“添加”按钮，添加按钮上方是显示答案行的“答案”列

```
 echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>';
    echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$searchAnswer[$key]');\">Add</button></td></tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:38:15.930

尝试这个：

```
function addwindow(btn) { 
   var arr = btn.split("");
   $.each(arr, function(i, v) {
      $('#answer' + v).addClass("answerBtnsOn");
   })
} 
```

[`jQuery.each()`](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:38:20.563

我相信，你需要这个：

```
function addwindow(btn) { 
    var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', ');
    $(answers).addClass("answerBtnsOn");
} 
```

*说明*：

```
btn.split('')   //splits btn string into char's array, 
                //  e.g. "ADE" will become ["A","D","E"]
$.map           //converts ["A","D","E"] 
                //  to ["#answerA","#answerD","#answerE"]
join(',')       //makes "#answerA, #answerD, #answerE" string 
                //  from ["#answerA","#answerD","#answerE"] array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:35:19.303

听起来您将 'btn' 变量作为字符串传递。如果您能够 split() 字符串，然后使用 for() 循环遍历结果数组并分配适当的类，这是可以接受的。

```
function addwindow(btn){
    var answers = btn.split(''); // leave empty if values are not separated by a delimiter
    for(var i=0; i < answers.length; i++){
        $('#answer'+answers[i]).removeClass('answerBtnsOff').addClass('answerBtnsOn');
    }
} 
```

根据您的分隔符，您可能需要修改以下代码：

```
btn.split(''); // no delimiter
btn.split(' '); // space delimiter
btn.split(','); // comma delimiter
btn.split('|'); // pipe delimiter 
```

您似乎也在转义引号，但如果您还使用连接，则没有必要这样做。

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

```
<?php
    $i = 1;
    foreach($a as $key => $val){
        echo ($i % 7 == 1 ? "<tr><td>" : "");
        echo '<input type="button" onclick="btnclick(this);" value="'.$val.'" id="answer'.$val.'" name="answer'.$val.'Name" class="answerBtns answers answerBtnsOff">";      
        echo ($i % 7 == 0 ? "</td></tr>" : "";
        $i++;
    }
?> 
```

# c++ - 将 NSNotificationCenter 设计模式迁移到 C++ 进行移植？

> ID：11384716
> 
> 赞同：1
> 
> 时间：2012-07-08T16:24:55.143
> 
> 标签：c++, design-patterns, observer-pattern, nsnotificationcenter

我正要开始将一个相对较大的游戏从 iPhone Obj-C 移植到平台中立的 C++。在我们的游戏中，我们大量使用了`NSNotificationCenter`通知菜单和游戏项目下载和缓存更新从我们的服务器。

我正在考虑使用单例类重新创建`NSNotificationCenter`，然后让任何接收通知的`NotificationReceiver`类使用多重继承继承一个基类。单例将保留一个`Map`通知名称，该名称将保留一组指向基类的指针。发送通知后，它将调用接收者基类中的一个虚拟成员，该成员可以被覆盖。

对于这种类型的操作，在 C++ 中是否有更好的设计模式？

会有更好的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:32:19.320

> 会有更好的方法来实现这一点吗？

是的 - 如果您使用例如，则无需强制继承特定接口：

*   [Boost.Function](http://www.boost.org/doc/libs/1_50_0/doc/html/function.html)或 C++11等函子`std::function`与[Boost.Bind](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html) /结合`std::bind`用于回调
*   [像Boost.Signals2](http://www.boost.org/doc/libs/1_50_0/doc/html/signals2.html)这样的信号系统。

另请记住，如果您只需要通知中心的单个实例，[则不需要是 singleton](http://jalf.dk/blog/2010/03/singletons-solving-problems-you-didnt-know-you-never-had-since-1995/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T14:19:36.173

除了上述`boost`软件包之外，另一种选择是[`poco::NotificationCenter`](http://pocoproject.org/docs/package-Foundation.Notifications.html).

这个实现更接近于 Cocoa 通知框架，具体讨论在 Poco 的[文档](http://pocoproject.org/docs/Poco.NotificationCenter.html)中：

> NotificationCenter 类基本上是在 Apple 的 Cocoa（或 OpenStep）中找到的 NSNotificationCenter 类的 C++ 实现。

# css - 与媒体查询一起使用的好的分辨率值是什么？

> ID：11384720
> 
> 赞同：16
> 
> 时间：2012-07-08T16:25:12.160
> 
> 标签：css, media-queries

最近我一直在玩 CSS Media Queries，因为它是让我的网站适应各种屏幕尺寸的好方法。我计划将它们实施到实时版本中。

我的问题是：布局更改时是否有任何推荐的分辨率值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-08T16:52:38.410

请参阅这篇文章以获取模板“320 及以上” - 由[Andy Clarke](http://www.stuffandnonsense.co.uk/about#andyclarke)撰写，许多开发人员和设计师都在使用它：http: [//www.stuffandnonsense.co.uk/blog/about/this_is_the_new_320_and_up](http://www.stuffandnonsense.co.uk/blog/about/this_is_the_new_320_and_up)

如果您向下滚动到媒体查询部分，您会看到它们使用了五个 CSS3 媒体查询增量（480、600、768、992 和 1382 像素）。通常我只坚持 4 个（480、600、768、1024）。

解释范围：

`min-width: 480px`：将针对横向模式及以上模式的移动设备

`min-width: 600px`：以纵向模式及以上模式定位平板电脑

`min-width: 768px`：以横向模式及以上模式定位平板电脑

`min-width: 1024px`: 以桌面视图为目标

通常我会在一开始就有我的移动纵向视图 CSS（因此称为“320 及以上”）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T18:00:17.297

我只想补充苏维的答案。

自适应设计将媒体查询应用于目标分辨率，但是使用响应式设计，您可以在任何需要的地方自由添加断点。

一个页面应该有多少个断点没有规定，但应该在布局中断的地方添加一个。目的是确保无论视口的宽度如何，设计和内容都能很好地流动。

我认为这篇文章提供了一个很好的概述：

[http://www.williamwalker.me/blog/an-introduction-to-responsive-design.html](http://www.williamwalker.me/blog/an-introduction-to-responsive-design.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-18T20:16:49.313

试试这个带视网膜显示器的

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

希望你好好的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-15T08:02:43.730

我写了这个更少的解决方案：

```
/* screens range */

@screen-s-max:    20em;         /* 320px  */
@screen-min:      20.063em;     /* 321px  */
@screen-max:      40em;         /* 640px  */
@screen-m-min:    40.063em;     /* 641px  */
@screen-m-max:    64em;         /* 1024px  */
@screen-l-min:    64.063em;     /* 1025px  */
@screen-l-max:    90em;         /* 1440px  */
@screen-xl-min:   90.063em;     /* 1441px  */
@screen-xl-max:   120em;        /* 1920px  */
@screen-xxl-min:  120.063em;    /*  1921px  */

/*
 0----- smallmobile -----320-----  mobile  -----640-----  tablet  -----1024-----  notebook  -----1440----- desktop -----1920----- wide
*/

@onlyScreen: ~"only screen";

@smallmobile: ~"(max-width: @{screen-s-max})";
@mobile: ~"(min-width: @{screen-s-max}) and (max-width: @{screen-max})";
@tablet: ~"(min-width: @{screen-m-min}) and (max-width: @{screen-m-max})";
@notebook: ~"(min-width: @{screen-l-min}) and (max-width: @{screen-l-max})";
@desktop: ~"(min-width: @{screen-xl-min}) and (max-width: @{screen-xl-max})";
@wide: ~"(min-width: @{screen-xxl-min})";

@portrait: ~"(orientation:portrait)";
@landscape: ~"(orientation:landscape)";

@highdensity: ~"only screen and (-webkit-min-device-pixel-ratio: 1.5)",
~"only screen and (min--moz-device-pixel-ratio: 1.5)",
~"only screen and (-o-min-device-pixel-ratio: 3/2)",
~"only screen and (min-device-pixel-ratio: 1.5)";

@mobile-and-more: ~"(min-width: @{screen-min})";
@tablet-and-more: ~"(min-width: @{screen-m-min})";
@notebook-and-more: ~"(min-width: @{screen-l-min})";
@desktop-and-more: ~"(min-width: @{screen-xl-min})"; 

/*

syntax example

@media @onlyScreen and @tablet and @portrait , @notebook and @landscape, @mobile and @landscape{
  body{
    opacity: 0.8;
  }
}

*/ 
```

如语法示例所示，您可以组合所有这些较少的变量并获得复杂的媒体查询。对 AND 逻辑运算符使用“and”，对 OR 使用逗号。您可以组合不同的屏幕分辨率、设备方向（横向/纵向）和视网膜或非设备。

此代码也很容易配置，因为您可以编辑/添加/删除屏幕范围值来管理不同的屏幕分辨率。

# mysql - 比较行并获取百分比

> ID：11384723
> 
> 赞同：0
> 
> 时间：2012-07-08T16:25:38.180
> 
> 标签：mysql, sql

我发现很难找到合适的标题。为简单起见，假设我有下表：

```
cook_id cook_rating
1       2
1       1
1       3
1       4
1       2
1       2
1       1
1       3
1       5
1       4
2       5
2       2 
```

现在我想得到一个“好”厨师的输出。一个好的厨师是指至少有 70% 的评分为 1、2 或 3，但不是 4 或 5。

所以在我的示例表中，id 为 1 的厨师共有 10 个评分，其中 7 个具有类型 1、2 和 3。只有三个具有类型 4 或 5。因此，具有 id 1 的厨师将是一个“好”厨师, 并且输出应该是厨师的 ID 和良好评级的数量。

```
cook_id cook_rating
1       7 
```

但是，id 为 2 的厨师不满足我的条件，因此根本不应该列出。

```
select cook_id, count(cook_rating) - sum(case when cook_rating = 4 OR cook_rating = 5 then 1 else 0 end) as numberOfGoodRatings from cook
where cook_rating in (1,2,3,4,5)
group by cook_id
order by numberOfGoodRatings desc 
```

但是，这并没有考虑到可能有超过 4 或 5 个高于良好评级的事实，从而导致负输出。另外，不包括至少 70% 的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:47:32.773

您可以通过 HAVING 子句中的比较来获得此信息。如果您必须在结果集中只有两列，则可以将其包装为子选择`select cook_id, positive_ratings FROM (...)`

```
SELECT 
  cook_id, 
  count(cook_rating < 4 OR cook_rating IS NULL) as positive_ratings, 
  count(*) as total_ratings
FROM cook
GROUP BY cook_id
HAVING (positive_ratings / total_ratings) >= 0.70
ORDER BY positive_ratings DESC 
```

**编辑**请注意， count(cook_rating < 4) 旨在仅计算评级小于 4 的行。 MySQL 文档说 count 只会计算非空行。我还没有测试过它是否将 FALSE 等同于 NULL，但我会很惊讶它没有。在最坏的情况下，我们需要将其包装在`IF(cook_rating < 4, 1,NULL)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:45:03.247

我建议您稍微更改一下您的架构，以使这种查询变得微不足道。

假设您将 5 列添加到您的烹饪表中，以简单地计算每个评分的数量：

```
nb_ratings_1 nb_ratings_2 nb_ratings_3 nb_ratings_4 nb_ratings_5 
```

当在 DB 中输入新评级时更新这样的表是微不足道的，就像如果冗余让你紧张，重新计算这些数字一样。它使所有过滤和排序变得快速而简单。

# jquery - 将 jQuery 插件转换为 Kentico Web 部件

> ID：11384724
> 
> 赞同：1
> 
> 时间：2012-07-08T16:25:40.663
> 
> 标签：jquery, asp.net, web-parts, kentico

我正在使用 Kentico 6 并尝试将 jQuery 超大插件（全屏背景幻灯片放映）转换为 Web 部件，以便编辑者能够选择将包含在幻灯片放映中的图像。

我宁愿不使用将在 HTML 中列出所选图像然后让脚本处理其余部分的 Web 部件转发器，因为图像很大，这将极大地影响页面加载时间。该插件通过从数组加载图像而不是在页面加载时一次加载所有图像来优化加载时间。

我想做的是将一组用户选择的图像传递给启动幻灯片放映的 javascript 函数。做这个的最好方式是什么？是否可以通过转型来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:23:04.657

我不认为有任何理由不能使用中继器将项目加载到 JavaScript 数组中。

```
<script type="text/javascript">

// array declaration
var data = [];

// Could use CMS:CMSRepeater here if needed
<asp:repeater id="rpt" runat="server">
<itemtemplate>
data.push( '<%#Eval("PathToImage")%>' );
</itemtemplate>

// call your function and pass the array or however you need to do it
superSizeFunction( data );

</asp:repeater> 
```

# asp.net - 如何将 asp.net 默认子域设置为 www？

> ID：11384727
> 
> 赞同：0
> 
> 时间：2012-07-08T16:26:06.290
> 
> 标签：asp.net

如果有网站 myws.com，如果我请求 myws.com 或 www.myws.com，我将看到相同的网站

我想要的是在请求“myws.com”时被重定向到“www.myws.com”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:37:57.347

有很多方法可以实现 www 子域的规范重定向，如果您使用的是 ASP.NET 4.0，您可以这样做：

```
if (!Request.Url.Host.ToUpper().Contains("WWW"))
{
  Response.RedirectPermanent("http://www.myws.com/" + Request.Url.PathAndQuery, true);
} 
```

你也可以使用[IIS URL Rewrite 模块](http://www.iis.net/download/urlrewrite)，一旦你安装了它，将它添加到你的 web.config 文件中：

```
<rewrite>
  <rules>
    <rule name="WWW Canonical Redirect" stopProcessing="true">
      <match url=".*" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^myws.com$" />
      </conditions>
      <action type="Redirect" url="http://www.myws.com/{R:0}" redirectType="Permanent" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:38:50.317

如果您有权访问 IIS，则可以使用 URL 重写将流量从 myws.com 永久重定向到 www.myws.com。按照本教程：[http](http://weblogs.asp.net/owscott/archive/2009/11/27/iis-url-rewrite-rewriting-non-www-to-www.aspx) ://weblogs.asp.net/owscott/archive/2009/11/27/iis-url-rewrite-rewriting-non-www-to-www.aspx进行 URL 重写。

如果您无权访问 IIS，则可以在 Application_BeginRequest 事件中将以下代码添加到 global.asax.vb 中：

```
If Request.Url.Authority.ToString <> "www.myws.com" Then
    Response.RedirectPermanent(Request.Url.Scheme.ToString() & "://www.myws.com" & Request.Url.AbsolutePath.ToString())
End If 
```

# java - 节点无法解析为类型

> ID：11384732
> 
> 赞同：2
> 
> 时间：2012-07-08T16:27:41.660
> 
> 标签：java, eclipse, class, types

我正在研究一个图书馆，我想拥有 Node.js 类。大多数时候它工作正常，但有时它会`Node cannot be resolved to a type`在我使用节点的每个地方给出错误。

奇怪的是，例如，如果我将类重命名为 DNode，并将每个 Node 重命名为 DNode，然后将所有内容再次更改回 Node，这就像以前一样，但错误说`Node cannot be resolved to a type`已经消失了（直到某个时间）。

顺便说一句，编译也没有问题，它似乎是一个 Eclipse 错误或什么的。

我知道有这个[Node 类](http://docs.oracle.com/javase/6/docs/api/javax/xml/soap/Node.html)，但我不导入它，所以我不明白为什么会形成问题。

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:31:44.327

我过去曾看到过类似的行为，并且知道两个可能的原因：

*   您的构建路径以某种方式发生了变化，遗漏了您的 Node 类，或者提供它的项目有编译错误，或类似的。鉴于您对问题的描述，这可能与您的情况无关。
*   一些 Eclipse 搞砸了。对我来说，这总是通过对项目（可能还有任何依赖项目）进行干净构建来解决的，此时事情会自行解决。您可以通过转到`Project`菜单并选择来执行此操作`Clean`。这不是一个合适的解决方案，但比你的`Node`-> `DNode`->`Node`解决方法更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:22:41.273

几年前似乎有几个人描述了这个问题（和解决方案）。例如，[这](http://philip.yurchuk.com/2008/12/03/eclipse-cannot-be-resolved-to-a-type-error/)描述了该问题，并发现在**Eclipse 中执行 Refresh**修复了它。在他的例子中，他是通过在 Eclipse 项目目录中创建一个顶级文件夹（在 Eclipse 之外）引起的。这听起来像是一个已经存在了几年的 Eclipse 错误。

# php - Yii - getActiveFormWidget() 在核心中返回错误的类型？

> ID：11384733
> 
> 赞同：2
> 
> 时间：2012-07-08T16:27:45.623
> 
> 标签：php, yii, yii-cformmodel, yii-cform

**我只是想创建一个非 AJAX 注册表单。**

当我通过 CForm 提交时，PHP 说 error() 在非对象上被调用。我检查了发生错误的源文件，并且（使用`var_dump(get_class($parent->getActiveFormWidget()));`）发现 getActiveFormWidget() 返回 a `CFormInputElement`，它没有定义 error() 。

我认为这与[CForm::activeForm](http://www.yiiframework.com/doc/api/1.1/CForm#activeForm-detail)有关，但它默认为`CActiveForm`.

我确实尝试过`'enableAjaxValidation'=>false`。

我不明白什么？我怀疑我在此过程中误解了某些内容。

***CFormInputElement::renderError():***

```
public function renderError()
{
    $parent=$this->getParent();

    // $parent->getActiveFormWidget() returns object that does not define error()

    return $parent->getActiveFormWidget()->error($parent->getModel(), $this->name, $this->errorOptions, $this->enableAjaxValidation, $this->enableClientValidation);
} 
```

***模型：***

```
class RegisterFormModel extends CFormModel {

    public $email;
    public $password;
    public $password_confirm;

    public function rules()
    {
        return array(
            array('email, password, password_confirm', 'required'),
            array('password','compare','compareAttribute'=>'password_confirm'),
            array('password, password_confirm','length','min'=>'6','max'=>'20'),
            array('email', 'email'),
            array('email', 'length', 'max'=>256)
        );
    }

    public function attributeLabels()
    {
        return array(
            'email'=>'Email',
            'password'=>'Password',
            'password_confirm'=>'Confirm Password',
        );
    }
} 
```

***看法：***

```
<div class="form">
<?php echo $form; ?> 
</div><!-- form --> 
```

***控制器动作：***

```
class RegisterAction extends CAction
{
    public function run()
    {
        $register_model = new RegisterFormModel;

        $controller = $this->getController();

        $form = new CForm(array(
            'title'=>'Register',
            'enableAjaxValidation'=>false,
            'elements'=>array(
                'email'=>array(
                    'type'=>'text',
                    'maxlength'=>256,
                ),
                'password'=>array(
                    'type'=>'password',
                    'minlength'=>6,
                    'maxlength'=>32,
                ),
                'password_confirm'=>array(
                    'type'=>'password',
                    'minlength'=>6,
                    'maxlength'=>32,
                ),
            ),

            'buttons'=>array(
                'register'=>array(
                    'type'=>'submit',
                    'label'=>'Register',
                ),
            ),
        ), $register_model);

        if($form->submitted('register', true) && $form->validate())
        {
            // ...
        }
        else
        {
            $controller->render('register', array('model'=>$register_model, 'form'=>$form));    
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:22:42.340

好吧，我从未见过像您向我们展示的那样使用 CForm。

我建议您使用活动表单小部件，

[http://www.yiiframework.com/wiki/195/implementing-a-registration-process-using-the-yii-user-management-module/](http://www.yiiframework.com/wiki/195/implementing-a-registration-process-using-the-yii-user-management-module/)

您需要在 CFormModel 中定义所有这些字段。这样，您将能够为它们提供适当的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T12:51:04.057

我知道答案真的很晚:)但是为了其他可能有类似错误的人。

```
<?php
 // change from: echo $form;
 echo $form->render();
?> 
```

我分别渲染元素，所以我是这样做的：

```
<?php
 // without the renderBegin() and renderEnd() it may give the no object error
 echo $form->renderBegin();
 echo $form->renderElements();
 echo $form->renderEnd();
?> 
```

# javascript - 防止在谷歌电子表格中编辑单元格 - 谷歌文档脚本

> ID：11384735
> 
> 赞同：1
> 
> 时间：2012-07-08T16:28:38.117
> 
> 标签：javascript, google-apps-script, google-sheets

我有一个主表，我需要从中查看和过滤数据。`=Sheet2!B7`使用语法将数据带入工作表。

问题是我一直不小心编辑主表中的数据，而不会更新原始副本。

如果我在主工作表中并阻止我编辑单元格，我想要一个脚本来提醒我。我仍然希望能够过滤数据，因此只需锁定工作表即可。

我一直在尝试修改这个脚本（由 Yuzhy 发布），但到目前为止我还不能让它工作。

*（我不确定这是否是这个问题的正确位置，它是这个还是 stackexchange / 超级用户，如果它是错误的，请告知。）*

```
function onEdit(event){
 var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = SpreadsheetApp.getActiveSheet();
  var CellRow = SpreadsheetApp.getActiveRange().getRow();
  var CellColumn = SpreadsheetApp.getActiveRange().getColumn();

  if (CellColumn == 2){
    sheet.getRange(CellRow, CellColumn).setFormula("=A"+CellRow+"+1");
    Browser.msgBox("DON'T MESS WITH THE FORMULAS!");
  }
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:53:10.513

通过阅读您的代码，您似乎正在尝试做与您所解释的不同的事情。我看到您试图“修复”公式。但是为什么`if (CellColumn == 2 )`？您只想保护列`B`，而不是整个“主”表？

您可以分享您的工作表结构的示例电子表格吗？

无论如何，我假设您想在覆盖“主”表上的任何内容时发出警告，自动修复公式有点复杂（取决于您的场景），并且在阅读弹出窗口后很容易点击撤消并恢复它。但是您确实是要自动修复公式，在您共享电子表格的示例后，我将增强我的代码，因为它有点复杂并且高度取决于您的结构。

```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  if( s.getName() == "Master" )
    Browser.msgBox("DON'T MESS WITH THE FORMULAS!");
} 
```

如果您在其他工作表上做简单的参考公式，那么使用 ArrayFormula 会更容易，并且可能是一个很好的解决方案，当您更改任何单元格时，它将自动替换回该值，第一个单元格除外，但随后是手册我认为，撤消将非常罕见且显而易见，不会成为问题。我在您链接的电子表格上做了一个数组公式的示例，请看一下。在`A1`我写道：

```
=ArrayFormula(Sheet1!A1:F20) 
```

现在，如果你不小心在上面写了一些东西`B2`，它的价值会自动回来。试试看这对你来说是否是一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:53:02.480

更新 - 自 2012 年 8 月 8 日起，谷歌已更新其电子表格，现在允许您拥有“受保护范围” - [https://support.google.com/docs/bin/answer.py?hl=en&answer=63175](https://support.google.com/docs/bin/answer.py?hl=en&answer=63175)

# javascript - 将表情符号与文本分开的正则表达式

> ID：11384742
> 
> 赞同：0
> 
> 时间：2012-07-08T16:29:21.550
> 
> 标签：javascript, regex, expression

我正在尝试在 Javascript 中创建一个正则表达式，以将任何出现的`:)`与周围的文本分开。

鉴于以下情况：

> :)这是一行文字:) 里面有几个笑脸:)。所以在那里。,:):)

我想得到结果 8 组：

1.  :)
2.  这是一行文字
3.  :)
4.  里面有几个笑脸
5.  :)
6.  . 所以那里.,
7.  :)
8.  :)

目前我使用`([^:)]+)`which 只对没有笑脸的周围文本进行分组。我可以进行哪些调整以使笑脸也被分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:34:23.200

分裂：

```
var string = "Given the following: :)This is a line of text :) with several smileys in it :). So there.,:):)";
var groups = string.split(/:\)/); 
```

这将返回一个数组，其中每个元素都是文本的一部分，没有`:)`.

由于文本已在 each 上拆分，我们可以通过在文本的每个部分之间`:)`添加 a 来构造您想要的结果：`:)`

```
var parts = [groups[0]];
for (var i = 1; i < groups.length; ++i) {
    parts.push(':)');
    parts.push(groups[i]);
} 
```

结果是这样的：

1.  :)
2.  这是一行文字
3.  :)
4.  里面有几个笑脸
5.  :)
6.  . 所以那里.,
7.  :)
8.  :)

**在这里试试这个：http: [//jsfiddle.net/Gxr6U/3/](http://jsfiddle.net/Gxr6U/3/)**

* * *

如果你想用图像替换表情符号，你可以这样做：

```
var frags = document.createDocumentFragment();

frags.appendChild(document.createTextNode(groups[0]));

for (var i = 1; i < groups.length; ++i) {

    var img = document.createElement('img');
    img.src='http://../smiley.png';

    frags.push(img);

    frags.appendChild(document.createTextNode(groups[i]));
} 
```

* * *

如果您只想删除表情符号：

```
var text = groups.join(''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T16:35:49.987

我建议：

```
var str = ":)This is a line of text :) with several smileys in it :). So there.,:):)",
    matches = str.split(/(\:\))/);
console.log(matches);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9saaN/)。

添加了过滤以从上面删除空匹配项：

```
var str = ":)This is a line of text :) with several smileys in it :). So there.,:):)",
    matches = str.split(/(\:\))/),
    matched = [];
for (var i = 0, len = matches.length; i < len; i++) {
    if (matches[i].length) {
        matched.push(matches[i]);
    }
}
console.log(matched);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9saaN/1/)。

另一个版本，具有实际的屏幕输出：

```
var str = ":)This is a line of text :) with several smileys in it :). So there.,:):)",
    matches = str.split(/(\:\))/),
    matched = [], li,
    list = document.createElement('ol');
document.body.appendChild(list);
for (var i = 0, len = matches.length; i < len; i++) {
    if (matches[i].length) {
        matched.push(matches[i]);
        li = document.createElement('li');
        txt = document.createTextNode(matches[i]);
        li.appendChild(txt);
        list.appendChild(li);
    }
}
console.log(matched);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9saaN/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:43:46.070

您可以使用此模式：

```
/:\)|(?:[^:]+|:(?!\)))+/g 
```

这匹配除or之外的`:)`任何一个字符或任何字符，它后面没有跟随 a 。`:``:``)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T16:34:55.980

以下将成功地根据需要对您提到的字符串进行分组：

```
your_match = your_string.match(/(:\)|[^:)]*)/g) 
```

但是，就像您原来的 RegExp 一样，如果 a `:`or`)`没有出现在笑脸中，您将遇到问题。如果不在笑脸中，这些字符将从匹配组中消失。

# facebook-graph-api - Facebook Javascript API 未知路径组件

> ID：11384752
> 
> 赞同：1
> 
> 时间：2012-07-08T16:31:25.820
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我正在尝试使用从他们的官方开发人员教程中编辑的代码将 Facebook 共享集成到网页中，但我没有任何运气。

```
function postToFacebook(item_id)
{

  FB.api(
    '/me/completeset:display',
    'post',
    { item: 'http://completeset.us/item/'+item_id },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('Share was successful! Action ID: ' + response.id);
       }
    }); //End api
} 
```

我已经设置了应用程序，并定义了“项目”对象和“已定义”操作。不过我还不能提交这个动作，因为我还不能用它发布任何东西。我已经验证 item_id 被正确传递，并且我已经使用他们的调试工具调试了 url。当我调用这个函数时，我得到`unknown path components/ completeset:display`. 我无法找到有关此错误的太多信息，所以我想知道：原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:23:06.027

名称不匹配。由于某种原因，facebook 上的操作的 getCode 链接将操作的名称显示为 show_off。这是与链接问题相同的问题。我对应用程序后端进行了试验，发现如果您使用一个名称创建一个操作，然后更改它的名称，它将以新名称显示，但您仍必须在代码中使用旧名称引用它。

# c++ - if 语句在条件为假时执行

> ID：11384754
> 
> 赞同：0
> 
> 时间：2012-07-08T16:31:39.163
> 
> 标签：c++

我正在修补一个投影仪问题，我遇到了以下非常奇怪的行为。而且我一生都无法弄清楚发生了什么。

![截屏](../Images/0b0e477ee13c0b43d75a445afbf7080d.png)

如屏幕截图所示。该条件的计算结果为假，并且 if 语句就好像它为真一样执行。

我觉得我在这里要疯了。

更新代码：http: [//ideone.com/L7KMu](http://ideone.com/L7KMu)

编辑：条件之前的 next.x 和 next.y 的实际值为 0.324583、9.97891

在 if 语句之后没有变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T16:49:43.743

编译代码后，您调用的 abs 似乎不是 std::abs，为浮点重载，而是整数 abs。尝试对代码进行此修改：

```
// get the root not relating to this point
nextX = (abs(solved.first - next.x) < EPSILON) ? solved.second : solved.first;
nextY = k * nextX + m;
prev = next;
next = point(nextX, nextY);

cout << abs(next.x) << ", " << std::abs(next.x) << endl;
if ( std::abs(next.x) < 0.01){
    cout << "Here1" << endl;
    if ( next.y > 0){
        cout << "Here2" << endl;
        foundExit = true;
    }
} 
```

您会注意到 cout 行正在为 abs 和 std::abs 打印不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T16:50:46.163

abs(next.x) 被评估为 0，因为它介于 0 和 1 之间。这种舍入将取决于所使用的编译器。

# ruby-on-rails - Rails 3：按许多字符串排序

> ID：11384766
> 
> 赞同：1
> 
> 时间：2012-07-08T16:33:20.860
> 
> 标签：ruby-on-rails, sql-order-by, rails-activerecord

我有多个字符串都是数字值。它们都在同一个数据库表中。有没有办法将它们全部加入并按最高数字排序？

类似的东西（伪代码）：

```
:include => :word_one_value, :word_two_value, :word_three_value, :sort_by => "sum ASC" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:45:55.633

在 MySql 中：

```
Foo.order '(convert(word_one, unsigned) +
            convert(word_two, unsigned) +
            convert(word_three, unsigned))' 
```

在 ActiveRecord 中：

```
Foo.all.sort_by do |f| 
  %w[one two three].sum { |n| f.send("word_#{n}").to_i } 
end 
```

或者如果这些字段在 Foo 中：

```
class Foo < ActiveRecord::Base
    def self.sorted_by_sum_of_words
      order '(convert(word_one, unsigned) +
              convert(word_two, unsigned) +
              convert(word_three, unsigned))'
    end
end 
```

然后在控制器中：

```
class FooController < ApplicationController
  def my_action
    @foos = Foo.sorted_by_sum_of_words        
  end
end 
```

如果您将数字存储在数字列中，则无需进行转换。

# mfc - 如何使用 COleDropTarget 为提升的 MFC 应用程序启用拖放功能

> ID：11384770
> 
> 赞同：2
> 
> 时间：2012-07-08T16:34:55.947
> 
> 标签：mfc, uac

我看到有一种方法可以使用 WM_DROPFILES 为 elevatd MFC 应用程序启用拖放，但需要有关使用 COleDropTarget 的应用程序的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:47:56.427

您必须告诉 Windows 您的提升应用程序接受来自非提升应用程序的某些消息！

```
ChangeWindowMessageFilter(WM_DROPFILES, MSGFLT_ADD);
ChangeWindowMessageFilter(WM_COPYDATA, MSGFLT_ADD);
ChangeWindowMessageFilter(0x0049, MSGFLT_ADD); 
```

[如此处](http://social.msdn.microsoft.com/Forums/en-US/windowsuidevelopment/thread/2fa935cf-be57-4bcc-9b96-7ee5a6b2b7a5/)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T06:01:55.363

我在我的项目中使用了这个解决方案并且它有效： http: [//www.codeproject.com/Articles/840/How-to-Implement-Drag-and-Drop-Between-Your-Progra](http://www.codeproject.com/Articles/840/How-to-Implement-Drag-and-Drop-Between-Your-Progra)

# javascript - 我可以使用连接的 var+array_value 作为 jquery 中的选择器，即 $("#var+array_value")

> ID：11384776
> 
> 赞同：2
> 
> 时间：2012-07-08T16:35:32.390
> 
> 标签：javascript, jquery, arrays, for-loop, var

这可能真的很明显，但老实说，我不是任何类型的开发人员。只是一个试图为我工作的公司的客户工作的人。

我在 JS 中定义了一个数组，我希望能够使用 for 循环在数组中的每个项目上运行一段代码。

如果我单独运行代码（即不在循环中），我知道它可以工作。一旦尝试将其置于循环中，它就会失败。我希望这里有人能告诉我我做错了什么，为什么它是错的，以及我如何才能做对。（在我看来，我希望能够理解我在做什么/为什么做这些事情，因为了解这些事情总是更好）。

我得到的 JS/JQuery 代码（有效）是；

```
var a = document.getElementById('roomthumb_2236');
var d = $("#chosenrate_2236").offset();

if ($('#chosenrate_2236').length) {
    a.style.visibility='visible';

    $("#roomthumb_2236").css({
        top: d.top -9 + "px",
        left: d.left + 560 + "px",
    })
}; 
```

这很好用（我知道有一个 JS 和 JQuery 的混搭，我可以稍后对其进行标准化）。

我已经尝试了很多“for”循环的变体，但它似乎并不想工作。这是我的“for”代码的最新版本；

```
var rooms_array = [2236, 2235]

var reposition = function (){
    document.getElementById('hidden_stuff').style.display="none";

    for (var i = 0; i < rooms_array.length; i++) {
        var a = "roomthumb_"+rooms_array[i];
        var b = "chosenrate_"+rooms_array[i];
        var c = "chosenrate_"+rooms_array[i].offset()

        if ($(b).length) {
            $(a).css({
                visibility:"visible",
                top: c.top -9 + "px",
                left: c.left + 560 + "px",
            })
        };
    };
}; 
```

代码应该做什么（如果不清楚）是；

*   设置数组（这是从数据库中动态创建的 id 列表）
*   隐藏一个 div “hiddenstuff”（这很好用）
*   然后对于数组中的每个 id；
    *   创建一个名为“roomthumb_xxxx”的变量（其中 xxxx 是数组中的 id）
    *   创建一个名为 b 的变量“chosenrate_xxxx”（其中 xxxx 是数组中的 id）
    *   检查是否存在具有与变量 b 匹配的 ID 的元素，如果存在则编辑具有变量 a 的 ID 的元素的 css 属性

var c 应该获得 var b 的位置（如果我是对的），以允许我相对于它定位具有 var a 的 ID 的元素...

我不知道为什么代码在循环内失败。我似乎总是得到空错误或者它认为 var b 是未定义的？

我的猜测是我不能接受一个字符串（chosenrate_），向它添加一个数组字符串，然后将该结果用作 ID。如果我使用 alert(a) 或 alert(b) 我确实得到了我需要的 ID，但我不知道如何在 $("#ID") 中使用它，例如......

我想我已经解释了一切。如果我错过了什么，我会尝试更好地解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:41:47.647

你可以试试

```
var a = "#roomthumb_"+rooms_array[i]; // put # sign for id selector
var b = "#chosenrate_"+rooms_array[i];
var c = $("#chosenrate_"+rooms_array[i]).offset(); 
```

你也可以写成`var c`：

```
var c = $(b).offset(); // where var b = "#chosenrate_"+rooms_array[i]; 
```

而不是你目前正在尝试的。

正如你试图指出的`id`那样，你需要`#`一开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:42:59.480

没错，您可以连接字符串来制作 jQuery 选择器。快速查看后，我可以看到问题可能是`c`. 此外，您缺少选择器开头的哈希值。替换这个：

`var c = $("chosenrate_" + rooms_array[i]).offset()`

和：

```
var a = "#roomthumb_" + rooms_array[i];
var b = "#chosenrate_" + rooms_array[i];
var c = $("#chosenrate_" + rooms_array[i]).offset() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T16:45:38.527

您在编写选择器时做错了事。根据您的问题，`$(“#var+array_value”)`这应该是`$(“#"+var+array_value)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:07:53.077

我认为类似于此代码的内容将为您完成这项工作：

```
// Your array with data.
var rooms_array = [2235, 2236, 2237, 2238];
var reposition = function (){
    // Hide whatever you need to hide.
    $('#hidden_stuff').attr('display', "none");
    // This is a jQuery function to iterate over arrays.
    $.each(rooms_array, function(key,value){
        // Create your "a" variable
        var a = '#roomthumb_'+value;  // roomthumb_2235  ; roomthumb_2236 ...
        var b = '#chosenrate_'+value; // chosenrate_2235 ; chosenrate_2236 ...

        // If b exists...
        if ($(b).length) {
            var c = $(b).offset(); // get the offset of "b"
            $(a).css({
                visibility:"visible",
                top: c.top -9 + "px",
                left: c.left + 560 + "px"
            })
        }
        // if "b" doesn't exist
        else {
            // edit the css properties of the element with the ID of variable "a"
        }
    });
}; 
```

# php - 带有消息“SQLSTATE [HY000]”的未捕获异常“PDOException”

> ID：11384783
> 
> 赞同：1
> 
> 时间：2012-07-08T16:35:57.447
> 
> 标签：php, sql, pdo

我转换了以下工作代码：

```
<?php
    include('config.php');
    $link = mysql_connect($db_host, $username, $password);
    mysql_select_db($db_name);

    $id= $_POST["uniqi"];
    $comments= $_POST["comments"];
    $comments= mysql_real_escape_string($comments);
    $comments = strip_tags($comments);

    $update = "UPDATE mastertable SET comments = '$comments' WHERE id_pk= '$id'";
    mysql_query($update, $link);
    mysql_close();
    header('Location: ccccc.com/pabrowser/… Updated');
?> 
```

到 PDO：

```
<?php
    $id= $_POST["uniqi"];
    $comments= $_POST["comments"];
    $conn = new PDO("mysql:host=$db_host;dbname=$db_name", $username, $password);

    $sql = "UPDATE mastertable SET comments=?    WHERE id_pk=?";
    $q = $conn->prepare($sql);
    $q->execute(array($comments, $id));

    header('Location: ccccc.com/pabrowser/… Updated');
?> 
```

这给了我

> 致命错误：未捕获的异常 'PDOException' 带有消息'SQLSTATE[HY000] [2002] 无法通过 /home/content/ 中的套接字'/var/lib/mysql/mysql.sock' (2)' 连接到本地 MySQL 服务器58/9508458/html/pabrowser/comsumcompro.php:4 堆栈跟踪：#0 /home/content/58/9508458/html/pabrowser/comsumcompro.php(4): PDO->__construct('mysql:host=;dbn ...', NULL, NULL) #1 {main} 在第 4 行的 /home/content/58/9508458/html/pabrowser/comsumcompro.php 中抛出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:39:58.627

你忘记了`include('config.php');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:38:17.693

您的`$db_host`or`$db_name`值错误，或者您提供的凭据无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T16:46:17.333

请加

```
include('config.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:05:52.737

您的连接字符串错误或 MySQL 服务器没有响应。使用`try ... catch`结构，如下所示：

```
include('config.php');

$id = $_POST["uniqi"];
$comments = $_POST["comments"];
try {
    $conn = new PDO("mysql:host=$db_host;dbname=$db_name", $username, $password);
}
catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

如果您将看到“连接失败”消息，您就明白出了什么问题。

# css - 调整堆叠文本中不同 em 的行高？

> ID：11384787
> 
> 赞同：1
> 
> 时间：2012-07-08T16:36:11.583
> 
> 标签：css, em

有点新手，并试图找出一些可能很简单的东西：

我正在尝试“堆叠”一些文本，但在大词中插入了一个小词，如下所示：

这

是一个

重要的

句子

因此，我将 HTML 布局在其自己的类中，并带有正文，字体大小为 8em，中间有一个跨度用于较小的单词。

```
THIS<br>IS AN<br><span class="important">important</span><br>SENTENCE<br> 
```

在 CSS 中，我为“重要”设置了一个类：

```
.important {
    font-size: 0.5em;
    line-height: 0.5em;
} 
```

...它就在那里，看起来很棒，但是行高似乎没有占用。“important”这个词的大小是 0.5em，但 line-height 和其他词一样高，导致 IS AN 之后和“important”之前有一个巨大的空间。

我已经尝试过在跨度内外都使用 br，在“重要”的两侧，比如

```
 THIS<br>IS AN<span class="important"><br>important<br></span>SENTENCE<br> 
```

...但我似乎无法获得线高。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:00:57.350

这是使用的标记的副作用。`<br>`用块级容器替换换行符 ( ) 以实现所需的行为（将单词堆叠在一起），例如：

### HTML

```
<div>THIS</div>
<div>IS AN</div>
<div class="important">important</div>
<div>SENTENCE</div>​ 
```

您也可能会丢失`line-height`声明，因为它不再有任何用途：

### CSS

```
body {
    font-size: 8em;
}
.important {
    font-size: 0.5em;
}​ 
```

### 参考

*   [dabblet 的现场演示](http://dabblet.com/gist/3071761)
*   [Mozilla 开发者网络上的 HTML 块级元素](https://developer.mozilla.org/en/HTML/Block-level_elements)

* * *

***注意：**您可以使用任何块级元素，例如`div`容器或`p`元素。段落在语义上会更合适，但您应该注意应用于它们的任何默认样式，例如厚填充、底部边距等。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:16:37.560

行高是一件很难精确控制的事情，因为不同的浏览器和操作系统解释计算方式的方式各不相同。[Adam Twardoch](http://www.myfonts.com/person/Adam_Twardoch/)在 webfonts.info 上写了关于[行高如何随浏览器变化](http://webfonts.info/webfonts-know-how/part-2-problem-line-height "行高问题")的文章，其中还有一篇关于[使用 line-height](http://webfonts.info/webfonts-know-how/part-1-we-need-talk-about-line-height)的更一般的文章。

行高控件并非真正用于更多“图形”布局，而是设计人员工具箱的一部分，用于设置清晰的段落。正如 Eliran 所说，使用块元素来做你想做的事情。这样您就可以更准确地控制定位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T18:31:18.140

我不知道这是否是最干净的方式，但我已经成功地为这样的文本提供了负边距，而不是调整行高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:05:21.737

我通常更喜欢`<p>`调整行高。尝试这样的事情：

CSS：

```
p.important
{
    font-size: 0.5em;
    line-height: 0.5em;
} 
```

HTML：

```
THIS<br>IS AN<br><p class="important">important</p><br>SENTENCE<br> 
```

# ios - 如何使用 CFData/NSData 在 Core Data 中存储 CFBitVector（或任何 CFType）？

> ID：11384790
> 
> 赞同：1
> 
> 时间：2012-07-08T16:36:23.807
> 
> 标签：ios, core-data, core-foundation, cfdata, cfbitvector

我在使用 Core Foundation 类型和集合方面的经验有限，所以如果这很明显，我深表歉意。

我正在使用 CFBitVector 类型来存储一些位序列，并且我需要将其存储为二进制数据格式（以便可以将其添加到 Core Data 存储中）。最明智的做法似乎是将其存储在一个`CFData`类型中，该类型可以与 an 免费桥接`NSData`并添加到存储中，但我不确定如何执行此操作。

任何人都可以通过一个将 CFTypes 存储在 CF/NSData 中的简单示例来帮助我吗？

* * *

***编辑：***

这甚至是正确的方法吗？我应该尝试将 CFBitVector 转换为一系列`int`可以存储在数据模型中的 s 吗？或者也许是一个可转换的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:56:01.133

我最终这样做的方式是滚动我自己的属性转换器，以便将 a`CFBitVectorRef`转换为`NSData`实例。这样做的好处是我可以真正将位数组紧紧地塞进一个二进制数据块中，因为在我的情况下，我确实需要将存储大小保持在最低限度。

下面是我的`CFBitVectorTransformer`类的实现。它基本上读取每个位并将它们打包到`unsigned char`s （下面代码中的“段”）中，然后将其附加到可变`NSData`缓冲区。该代码适用于大于`unsigned char`s 的类型，但是我想要尽可能小的块，以便真正最小化结果数据的大小。

```
#define kBitsPerByte    8

@implementation CFBitVectorTransformer

+ (Class)transformedValueClass
{
    return [NSData class];
}

+ (BOOL)allowsReverseTransformation
{
    return YES;
}

/* CFBitVectorRef -> NSData */
- (id)transformedValue:(id)value
{
    if (!value) return nil;
    if ([value isKindOfClass:[NSData class]]) return value;

    /* Prepare the bit vector. */
    CFBitVectorRef bitVector = (__bridge CFBitVectorRef)value;
    CFIndex bitVectorCount = CFBitVectorGetCount(bitVector);

    /* Prepare the data buffer. */
    NSMutableData *bitData = [NSMutableData data];
    unsigned char bitVectorSegment = 0;
    NSUInteger bytesPerSegment = sizeof(char);
    NSUInteger bitsPerSegment = bytesPerSegment * kBitsPerByte;

    for (CFIndex bitIndex = 0; bitIndex < bitVectorCount; bitIndex++) {
        /* Shift the bit into the segment the appropriate number of places. */
        CFBit bit = CFBitVectorGetBitAtIndex(bitVector, bitIndex);
        int segmentShift = bitIndex % bitsPerSegment;
        bitVectorSegment |= bit << segmentShift;

        /* If this is the last bit we can squeeze into the segment, or it's the final bit, append the segment to the data buffer. */
        if (segmentShift == bitsPerSegment - 1 || bitIndex == bitVectorCount - 1) {
            [bitData appendBytes:&bitVectorSegment length:bytesPerSegment];
            bitVectorSegment = 0;
        }
    }

    return [NSData dataWithData:bitData];
}

/* NSData -> CFBitVectorRef */
- (id)reverseTransformedValue:(id)value
{
    if (!value) return NULL;
    if (![value isKindOfClass:[NSData class]]) return NULL;

    /* Prepare the data buffer. */
    NSData *bitData = (NSData *)value;
    char *bitVectorSegments = (char *)[bitData bytes];
    NSUInteger bitDataLength = [bitData length];

    /* Prepare the bit vector. */
    CFIndex bitVectorCapacity = bitDataLength * kBitsPerByte;
    CFMutableBitVectorRef bitVector = CFBitVectorCreateMutable(kCFAllocatorDefault, bitVectorCapacity);
    CFBitVectorSetCount(bitVector, bitVectorCapacity);

    for (NSUInteger byteIndex = 0; byteIndex < bitDataLength; byteIndex++) {
        unsigned char bitVectorSegment = bitVectorSegments[byteIndex];

        /* Store each bit of this byte in the bit vector. */
        for (NSUInteger bitIndex = 0; bitIndex < kBitsPerByte; bitIndex++) {
            CFBit bit = bitVectorSegment & 1 << bitIndex;
            CFIndex bitVectorBitIndex = (byteIndex * kBitsPerByte) + bitIndex;
            CFBitVectorSetBitAtIndex(bitVector, bitVectorBitIndex, bit);
        }
    }

    return (__bridge_transfer id)bitVector;
}

@end 
```

这很好地抽象了数据的转换，允许您将 设置`CFBitVectorRef`为数据模型中的属性，并且对于大多数用途来说应该足够快。

我希望这可以帮助处于类似情况的其他人。

# eclipse-cdt - 保存后 Eclipse CDT 挂起/CPU 占用 5 秒

> ID：11384793
> 
> 赞同：4
> 
> 时间：2012-07-08T16:36:43.750
> 
> 标签：eclipse-cdt

我在 Eclipse CDT 中保存一个文件，进行构建，运行程序并返回编辑。然后 Eclipse 完全占用 CPU 大约 3 到 5 秒，在键盘延迟方面产生了令人讨厌的延迟。大约 2、3 分钟后，同样的问题出现了。

Eclipse Indigo 在 VirtualBox 内的 Debian Squeeze 上运行，它可能使用 iCore7 8 超线程机器的 8 个处理器中的 6 个。有趣的是，在主机操作系统上，我看到所有 8 个超线程都很忙。

这越来越烦人，因为每次构建后它都会阻止我 5 秒继续我的工作。看起来它与索引器连接，因为关闭索引器可以解决问题（但随后 IDE 毫无用处）。

我有足够的内存用于 Eclipse、Debian 来宾和 Java VM。

有什么想法我能做什么？

更新：问题现已解决。我正在运行 * Debian 的新版本 * Eclipse 的新版本 * 没有虚拟化，即。在纯金属上 * 从 Debian 从 SSD 本地启动

不知道是什么原因，但现在问题消失了。

# python-2.7 - 如何覆盖模块上的 dir/help 方法？

> ID：11384794
> 
> 赞同：0
> 
> 时间：2012-07-08T16:36:57.740
> 
> 标签：python-2.7

```
>>> import module1
>>> dir(module1)
['__builtins__', '__doc__', '__file__', '__name__', '__package__'] 
```

我尝试将一些这样的函数放入 module1 代码中：

```
def __dir__(self):
    return 'ok'
def __dir__():
    return 'ok'
def __dir__(self):
    print 'ok'
def __dir__():
    print 'ok' 
```

...但这些都没有。writen 覆盖 dir 函数应该看起来有多好？

我想要这样的东西：

```
>>> import module1
>>> dir(module1)
'ok' [or ok] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:37:06.127

您的问题是询问如何修改`dir()`模块对象的行为，但在您的评论中您澄清说您的最终目标是修改`help(module)`. `dir`在不同的对象上工作方式不同，我不相信有直接的方法可以改变模块。它总是希望列出模块的属性，即范围内的所有内容。

但是，您可以做的是`__all__`在模块中定义一个属性，并指定应该在帮助文档中公开哪些属性：

**我的模块**

```
__all__ = ['foo']

foo = 'bar'

class Klass(object):
    pass

>>> import mymodule
>>> help(mymodule) 
```

您会看到，因为`Klass`被排除`__all__`在帮助中将不可见。

此外，如果你这样做`from mymodule import *`，只会导入 foo 属性：

```
>>> from mymodule import *
>>> dir()
# ['__builtins__', '__doc__', '__name__', '__package__', 'foo'] 
```

# php - Php PDO mySQL - 适用于主要扩展

> ID：11384797
> 
> 赞同：0
> 
> 时间：2012-07-08T16:37:12.640
> 
> 标签：php, mysql, pdo

目前正在为即将到来的旅行社重新开发预订系统。根据预订程序、付款和产品指南，3 年内的行数可能会超过 1000 万，其中预订引用的产品清单将在预订 ID 匹配时被查询。

现在应该考虑哪些因素来确保 PDO 准备语句的快速查询响应，特别是在基于单个统一引用 ID 的查询中对多个表执行 JOINS 时。

您可以提供的任何细节都将非常有帮助。

# php - Get the values of different SQL access records into 1

> ID：11384798
> 
> 赞同：2
> 
> 时间：2012-07-08T16:37:24.743
> 
> 标签：php, sql, database, ms-access, ms-access-2007

I'm new here and I wanted to get some help solving an Access SQL data merging problem.

Actually I would like to turn this

```
Customer    Comment 
James        Good
James        Bad
James        Good
James        Ugly 
```

into this :

```
Customer    Comments
James       Good, Bad, Good, Ugly 
```

I need To concatenate all the comments of the same customer into one field without VBA because I'm executing the query with PHP

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:55:44.743

Well... I know how to get the Comments concatenated properly, but I'm not sure how to pull the customer. I'm also not sure if this will work in Access, because Access doesn't support stored procs.

```
DECLARE @Comments VARCHAR(8000)  
SELECT @Comments = COALESCE(@Comments + ', ', '') + Comments FROM Customers 
```

I'm guessing you'll have to do this for more than one customer, but all I can think to do is use a CURSOR for each customer, but I don't know if Access supports cursors at the moment.

```
DECLARE @Comments VARCHAR(8000)  
SELECT @Comments = COALESCE(@Comments + ', ', '') + Comments 
FROM Customers
WHERE Customer = @Customer (i.e. James, from the cursor) 
```

Honestly, I think you're stuck doing this in PHP.

```
SELECT * FROM CUSTOMERS ORDER BY Customer, Comment 
```

Then simply loop through the recordset and when the Customer changes, reset the Comments variable for the next customer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:52:35.643

The best way to do this is to load all the matching rows from the database and concatenate them in PHP.

You can get Access to do this, though inefficiently, using a custom function:

```
Public Function CommentsForCustomer(Customer As String)
   Dim sql As String
   sql = "select [Comment] from Comments where Customer = '" & Customer & "'"

   Dim rs As New ADODB.Recordset
   rs.Open sql, CurrentProject.Connection, adOpenSnapshot

   Dim text As String
   text = ""
   Do Until rs.EOF
       If Len(text) > 0 Then
           text = text & ", "
       End If
       text = text & rs.Fields("Comment")
       rs.MoveNext
   Loop
   rs.Close

   CommentsForCustomer = text
End Function 
```

Then include the expression `CommentsForCustomer([Customer])` in your query.

# ios - 秒表故障

> ID：11384803
> 
> 赞同：1
> 
> 时间：2012-07-08T16:38:06.447
> 
> 标签：ios, xcode, nstimer, stopwatch

我最近做了一个秒表应用程序，它有一些小故障。

如果我连续两次点击停止按钮，整个应用程序就会崩溃。

如果我连续按两次开始按钮，计时器的运行速度会提高一倍，停止按钮将停止工作。

我该如何解决这个问题？

这是我的 .h 文件中的代码：

```
 IBOutlet UILabel *time;
    IBOutlet UILabel *time1;
    IBOutlet UILabel *time2;

    NSTimer *myTicker;
    NSTimer *myTicker2;
    NSTimer *myTicker3;
}

- (IBAction)start;
- (IBAction)stop;
- (IBAction)reset;

- (void)showActivity;
- (void)showActivity1;
- (void)showActivity2;

@end 
```

这是我在 .m 文件中的代码：

```
- (IBAction)start {
    myTicker = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showActivity) userInfo:nil repeats:YES];  

    myTicker2 = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(showActivity1) userInfo:nil repeats:YES];

    myTicker3 = [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(showActivity2) userInfo:nil repeats:YES];        
}

- (IBAction)stop {
    [myTicker invalidate];
    [myTicker2 invalidate];
    [myTicker3 invalidate];
}

- (IBAction)reset {    
    time.text = @"00";
    time1.text = @"00";
    time2.text = @"00";
}

- (void)showActivity {    
    int currentTime = [time.text intValue];
    int newTime = currentTime + 1;
    if (newTime == 60) {
        newTime = 0;
    }
    time.text = [NSString stringWithFormat:@"%d", newTime];     
}

- (void)showActivity1 {
    int currentTime1 = [time1.text intValue];
    int newTime1 = currentTime1 + 1;
    if (newTime1 == 10) {
        newTime1 = 0;
    }
    time1.text = [NSString stringWithFormat:@"%d", newTime1];    
}

- (void)showActivity2 {
    int currentTime2 = [time2.text intValue];
    int newTime2 = currentTime2 + 1;
    time2.text = [NSString stringWithFormat:@"%d", newTime2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:15:01.370

触发方法时，将停止按钮的`userInterActionEnabled`属性设置为`NO`，将开始按钮的属性设置为。然后切换并设置停止按钮和启动按钮的时间。`YES``-stop``userInterActionEnabled``YES``NO``-start`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:28:13.433

您应该创建一个私有 BOOL 变量“isRunning”，单击“停止”或“开始”时会检查该变量，例如：

```
- (IBAction)stop {
    if(!isRunning) return;

    [myTicker invalidate];
    [myTicker2 invalidate];
    [myTicker3 invalidate];

    self.isRunning = NO;
} 
```

等等。忽略用户交互通常是一个好主意（就像 CodaFi 建议的那样），但只能对抗症状 ;-) 你真的应该做这两项检查。

# perl - 我应该重新使用单个 HTML::SimpleLinkExtor 对象来提高内存效率吗？

> ID：11384808
> 
> 赞同：3
> 
> 时间：2012-07-08T16:38:47.867
> 
> 标签：perl, memory, memory-efficient

所以这似乎是一个愚蠢的问题，但我正在构建一个内存资源非常有限的应用程序，所以我需要尽可能谨慎地使用内存。所以我的问题是，以下哪个更节省内存？

```
while(<LINKS_FILE>) {
    my $extor = HTML::SimpleLinkExtor->new($resp->base); #$resp from above somewhere
    $extor->parse($_);
    my @links = $extor->links;
    for my $link (@links) { print "$link\n" }
} 
```

或者

```
my $extor = HTML::SimpleLinkExtor->new($resp->base); #$resp from above somewhere
while(<LINKS_FILE>) {
    $extor->parse($_);
    my @links = $extor->links;
    for my $link (@links) { print "$link\n" }
    $extor->clear_links;
} 
```

因此，第一次它每次都会创建一个新的 HTML::SimleLinkExtor 对象，而第二次它只是重置同一个对象以再次使用。所以在我看来，第二个内存效率更高，但老实说，我真的不知道 perl 将内存释放回操作系统有多好，或者它是否会保留一些内存HTML::SimpleLinkExtor 对象即使超出范围也是如此。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:37:21.443

我不倾向于花时间进行分析，但如果我遇到你的情况，我会先尝试[HTML::LinkExtor](http://search.cpan.org/perldoc/HTML%3a%3aLinkExtor)。如果您提供回调，它不会保存在内部找到的链接，从而减少应用程序的占用空间。然后，您可以决定是否存储链接，或者写入外部文件，以将内存使用降至最低：

```
use HTML::LinkExtor;
my $parser = HTML::LinkExtor->new(sub {
     my($tag, %links) = @_;
     print "$tag @{[%links]}\n";
});

$parser->parse_file("index.html"); 
```

# paintcomponent - 在 Paintcomponent 之外绘画？

> ID：11384811
> 
> 赞同：0
> 
> 时间：2012-07-08T16:39:14.153
> 
> 标签：paintcomponent

我正在使用 Java 开发游戏。目前我正在我的paintcomponent类中绘制我所有的图形。但这意味着每次我想重新绘制小细节（比如移动云或换出图片）。我必须重新粉刷整个屏幕。这会占用大量内存。有什么方法可以让我在我的绘画组件之外进行绘画以提高我的游戏效率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:41:26.640

您可以使用 repaint(i,i1,i2,i3) 仅重新绘制您提到的区域。请参阅[此处](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28int,%20int,%20int,%20int%29)

# dojo - 使用 dijit.byId w dojox.mobile 小部件

> ID：11384812
> 
> 赞同：0
> 
> 时间：2012-07-08T16:39:21.360
> 
> 标签：dojo, dojox.mobile

我正在通过此函数在静态定义的 dojox.mobile.RoundRectList 小部件下动态构建一系列 dojox.mobile.ListItem 小部件......

```
function displayOpps(items) {

// Create the list container that will hold application names
var rrlOppsContainer = dijit.byId("rrlOpps");   
// Add a new item to the list container for each element in the server respond
for (var i in items){

    // Create and populate the list container with applications' names
    var name = items[i].CustName + " - " + items[i].OppNbr;
    var liOpps = new dojox.mobile.ListItem({
        label: name,
        moveTo: "sv3OppDetail"  
    });

    // Add the newly created item to the list container
    rrlOppsContainer.addChild(liOpps);
} 
```

}

当我在我的 html 文件中的 onLoad() 期间运行此代码时，我使用 Chrome 的开发工具收到以下错误...

未捕获的类型错误：对象 # 没有方法“byId”

我已经阅读了很多关于这个主题的文章，似乎很多人都有这个问题，但我发现的每一篇文章都与其他一些技术（例如 Spring MVC 等）有关，我正在尝试使用它基于 dojox.mobile 的应用程序。也就是说，我试图通过将其包含在我的 html 文件中来模仿其他人提出的一些解决方案，但它仍然无法正常工作......

```
<script type="text/javascript"
data-dojo-config="isDebug: true, async: true, parseOnLoad: true"
src="dojo/dojo.js">
dojo.require("dojox.mobile.RoundRectList")
</script> 
```

我究竟做错了什么？

提前感谢您的时间和专业知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:57:24.363

如果您使用的是 Dojo 1.7+，您可能只是忘记了需要“dijit/registry”模块。这是定义 byId 函数的地方。当您使用桌面小部件时，这是由其他基本模块间接加载的，但对于 dojox/mobile，您必须显式加载它（因为 dojox/mobile 在默认情况下仅加载非常少的模块集，以最大限度地减少代码占用）。

根据您编写应用程序的方式，执行以下操作：

```
dojo.require("dijit.registry");  // legacy (pre-1.7) loader syntax
...
var rrlOppsContainer = dijit.byId("rrlOpps");
... 
```

或这个：

```
require(["dijit/registry", ...], function(registry, ...){ // 1.7+ AMD loader syntax
    ...
    var rrlOppsContainer = registry.byId("rrlOpps");
    ...
}); 
```

另请注意，您的第二个代码示例在使用旧版加载器语法时尝试使用异步加载 (async: true)。这不起作用，要获得异步加载，您必须使用 AMD 语法。

# php - 使用哪个正则表达式来确定要为 html 属性和 javascript 转义哪些字符？

> ID：11384820
> 
> 赞同：2
> 
> 时间：2012-07-08T16:40:14.293
> 
> 标签：php, javascript, html, escaping, security

我正在采用 Twig（一个 php 模板框架）的一些代码来转义 html 和 js 输出。现在我不完全理解他们使用的正则表达式。

对于完整的 Twig 代码：

```
git clone git://github.com/fabpot/Twig.git
// the code is in Core.php in the function twig_escape_filter 
```

他们使用：

```
preg_replace_callback( '#[^a-zA-Z0-9,\._]#Su'   , '_twig_escape_js_callback'               , $string ); // for javascript
preg_replace_callback( '#[^a-zA-Z0-9,\.\-_]#Su' , '_twig_escape_html_attr_callback' , $string ); // for html attibutes 
```

回调函数将替换与否定字符类对应的所有内容。

据我所知，这是等价的（去掉一些反斜杠）：

```
'#[^a-zA-Z0-9,._]#Su'
'#[^a-zA-Z0-9,._-]#Su' 
```

现在我们看到，对于 javascript，它们允许使用逗号，我不明白，因为逗号是 javascript 上下文中的控制字符。举一个逗号利用的例子：

```
// say we have a function call to a javascript function like this
function ajax( timeout, onerror, onsuccess ) {...};

// now assume I get the timeout value from somewhere dodgy (in php)
$timeout = escapeJS( '1000, evilCallback, evilCallback2' );

echo "ajax( $timeout, myErrorHandler, mySuccessHandler );" 
```

请注意，javascript会很乐意忽略额外的参数......

在 html 属性中，想法是防止关闭属性，因此它们不允许空格，因为不带引号的属性很常见，并且在 html4 中也是合法的。但是，我看到属性中使用空格来为元素提供多个类，例如：`<tr class="tablerow odd">`. 因此，不允许使用空格可以防止像这样的类属性来自带有模板或其他来源的数据库......

1.  鉴于在 xhtml 中禁止使用不带引号的属性，并且我的网站生成 xhtml 严格的文档类型，我可以允许空格吗？
2.  我应该禁止 javascript 的逗号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:51:09.220

您应该使用`htmlspecialchars`转义 HTML 和`json_encode`转义 Javascript。

```
$timeout = json_encode('1000, evilCallback, evilCallback2');
echo "ajax( $timeout, myErrorHandler, mySuccessHandler );"; 
```

输出：

```
ajax( "1000, evilCallback, evilCallback2", myErrorHandler, mySuccessHandler ); 
```

在您的情况下，您还应该验证`$timeout`var 的实际内容，或将其转换为 int，如下所示：

```
$timeout = json_encode((int)'1000, evilCallback, evilCallback2');
echo "ajax( $timeout, myErrorHandler, mySuccessHandler );"; 
```

输出：

```
ajax( 1000, myErrorHandler, mySuccessHandler ); 
```

当`json_encode`您转换为 int 时，实际上并不需要 ，因为 PHP 整数也是有效的 JS 整数，但是为适当的上下文转义所有数据是一个好习惯。

* * *

**更新：**关于您尝试调整的 Twig 代码，它似乎不会产生实际的 Javascript 文字，而是转义字符串以包含*在*Javascript 文字中——这从转义码的实际使用中可以明显看出`\xHH`，这在 JS 中仅有效内部字符串（和正则表达式，但这不是重点）。它应该这样使用：

```
$timeout = escapeJS('1000, evilCallback, evilCallback2');
echo "ajax('$timeout', myErrorHandler, mySuccessHandler);"; 
```

请注意`$timeout`. `echo`这样做很可能是为了允许从多个转义部分（如`'foo $escaped_part1 bar $escaped_part2 baz'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:12:15.997

我在[XSS（跨站点脚本）预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)上发现的内容：

对于 HTML 属性：

> 正确引用的属性只能使用相应的引号进行转义。不带引号的属性可以用许多字符分开，包括 [space] % * + , - / ; < = > ^ 和 |。

我想这样看待它意味着没有办法既能防止未引用的属性又能在属性中包含空格。我想转义函数可以自己添加引号，但这与创建情况不一致，其中 vulues 将被引用两次，基本上不引用它们......所以，现在我已经制作了两个转义函数，允许用户显式调用一个这允许空间，知道他们必须加上引号。

考虑到javascript：

> 除字母数字字符外，使用 \xHH 格式转义所有小于 256 的字符，以防止将数据值切换到脚本上下文或其他属性中。不要使用像 \" 这样的转义快捷方式，因为引号字符可能会被首先运行的 HTML 属性解析器匹配。这些转义快捷方式也容易受到攻击者发送 \" 和易受攻击的代码的“转义”攻击将其转换为 \" 以启用报价。
> 
> 如果事件处理程序被正确引用，则爆发需要相应的引用。然而，我们有意使这条规则非常宽泛，因为事件处理程序属性通常不加引号。不带引号的属性可以用许多字符分开，包括 [space] % * + , - / ; < = > ^ 和 |。此外，关闭标记将关闭脚本块，即使它位于带引号的字符串内，因为 HTML 解析器在 JavaScript 解析器之前运行。

这似乎表明我们应该逃避一切。我选择保留下划线，因为它可以是 javascript 名称和点的一部分，以便允许插入带小数点的数值。我希望这不会留下任何漏洞。

我想 Twig 代码有一个错误，会留下逗号，[我会提交一份报告](https://github.com/twigphp/Twig/issues/765)，以便他们调查。

# json - Serialize an object using DataContractJsonSerializer

> ID：11384824
> 
> 赞同：1
> 
> 时间：2012-07-08T16:40:32.920
> 
> 标签：json, c#-4.0, datacontractjsonserializer

I have created a generic extension method to serialize JSON using the DataContractJsonSerializer. looks like this:

```
public static string ToJSON<T>(this T obj) where T : class
{
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
    using (MemoryStream stream = new MemoryStream())
    {
       serializer.WriteObject(stream, obj);
       return Encoding.Default.GetString(stream.ToArray());
    }
} 
```

I need to create a class, when serialize to json it should be like this :

```
{
     "expiration": "2011-04-20T11:54:21.032Z",
     "conditions": [
        ["eq", "acl", "private"],
        ["eq", "bucket": "myas3bucket"],
        ["eq", "$key", "myfilename.jpg"],
        ["content-length-range", 0, 20971520],
        ["eq", "$redirect", "myredirecturl"],
     ]
} 
```

What are the attributes of this class?

Thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:50:32.750

This should do the job:

```
DateTime expiration { get; set; }
string[][] conditions { get; set; } 
```

You could also make `conditions` a `List<List<string>>`, or anything that's `IEnumerable<IEnumerable<string>>`, even `List<string[]>` should work.

# php - PHP regex preg_split - 仅按最大组拆分

> ID：11384825
> 
> 赞同：1
> 
> 时间：2012-07-08T16:40:35.153
> 
> 标签：php, regex, preg-split

我有以下正则表达式

```
((\$|(\\\[)).*?(\$|(\\\]))) 
```

它应该捕获`$$`和之间的所有内容`\[\]`，我在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)上对其进行了测试，并且它正在工作。

PHP 变体是（双反斜杠）

```
((\$|(\\\\\[)).*?(\$|(\\\\\]))) 
```

我想根据该正则表达式拆分我的文本。我怎么知道它只使用第一个（也是最大的组）而不是这些小组？

```
preg_split('/((\$|(\\\\\[)).*?(\$|(\\\\\])))/', $text, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

所以对于文本`This is my $test$ for something.`我应该得到一个数组

```
[0] => This is my 
[1] => $test$
[2] =>  for something. 
```

但我明白了

```
[0] => This is my 
[1] => $test$
[2] => $
[3] => 
[4] => $
[5] =>  for something. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:54:43.570

你需要这样的东西：

```
$text = 'This is my $test$ for \[something\] new!';
print_r(preg_split('/(\$.*?\$|\\\\\[.*?\\\\\])/', $text, -1, PREG_SPLIT_DELIM_CAPTURE)); 
```

输出：

```
Array
(
    [0] => This is my 
    [1] => $test$
    [2] =>  for 
    [3] => \[something\]
    [4] =>  new!
) 
```

* * *

恕我直言，您的正则表达式（可能）是错误的。对于像`Hello $there\]`. 如果您需要捕获两个`$`s 和一对`\[`and之间的文本`\]`，那么您需要像这样的正则表达式：

```
 <-------------> Match text between \[ and \]
/(\$.*?\$|\\\\\[.*?\\\\\])/
  <----->   Match text between dollars 
```

# visual-studio-2010 - Visual Studio 2010 字体大小更改控制 + 鼠标滚轮 1080 分辨率显示器

> ID：11384828
> 
> 赞同：1
> 
> 时间：2012-07-08T16:41:08.043
> 
> 标签：visual-studio-2010

我最近买了一台 1080p 显示器，但我仍然不习惯这个分辨率。默认字体大小 Consolas 10 对我来说太小了，我无法阅读，而 11 比我想要的要大一点。如果我在环境字体大小为 10 时使用 control + 鼠标滚轮增加字体，它会变得比我想要的大。我可以使用的字体大小是 11，一个控件 + 鼠标滚轮步进递减，但这比默认的 Consolas 10 大一点。

我想知道控制 + 鼠标滚轮是否将文本编辑器的字体大小增加/减少 1,5 值。如何将其设置为我喜欢的那个？（Consolas 11 递减 1 个控件 + 鼠标滚轮）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:50:28.707

我发现实现这一目标的唯一方法是安装[VSCommands](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf?SRC=VSIDE)。此工具允许您设置默认缩放级别。我认为如果您安装此扩展程序，将默认缩放级别设置为 91% 并将字体大小设置为 11，它应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:47:00.460

当您按住 ctrl 并滚动鼠标滚轮时，它不会更改字体大小，而是更改缩放级别。

结合使用字体大小和缩放来实现您想要的效果。

# wpf - 以编程方式在用户控件的数据网格中的数据模板中设置边框的边框笔刷

> ID：11384832
> 
> 赞同：1
> 
> 时间：2012-07-08T16:41:42.787
> 
> 标签：wpf, user-controls, datatemplate

我有一个 UserControl，它基本上是一个 DataGrid。数据网格有一个绑定到对象的 TemplateColumn。

我想向 UserControl 添加一个属性，该属性将设置 DataTemplate 内的 Borderbrush。

这是我的 Xaml：

```
 <DataGrid.Columns>
                <DataGridTemplateColumn Header="No" IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border x:Name="ElementBorder" BorderThickness="1">
                                <Viewbox Height="Auto" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                    <TextBlock Text="{Binding Name}" VerticalAlignment="Top"></TextBlock>
                                </Viewbox>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns> 
```

我想根据我的 UserControl 中的“ElementBorderColor”属性设置 ElementBorder 的 BorderBrush 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:53:38.627

另一种解决方案...将您的 BorderBrush 指向您控件中的资源，并在代码中更改该资源。像这样的东西：

```
<SolidColorBrush x:Key="scb01"
                 Color="Red" />

<DataTemplate x:Key="dt01">
  <Border x:Name="ElementBorder"
          BorderThickness="1"
          BorderBrush="{DynamicResource scb01}">
    <Viewbox Height="Auto"
             VerticalAlignment="Stretch"
             HorizontalAlignment="Stretch">
      <TextBlock Text="{Binding}"
                 VerticalAlignment="Top"></TextBlock>
    </Viewbox>
  </Border>
</DataTemplate> 
```

在代码中：

```
(Resources["scb01"] as SolidColorBrush).Color = Colors.Green; 
```

# jquery - 使用 jQuery 对内联文本元素进行淡入淡出

> ID：11384834
> 
> 赞同：2
> 
> 时间：2012-07-08T16:41:53.497
> 
> 标签：jquery, jquery-ui, text, jquery-effects, css

我正在寻找一种使用 jQuery 正确动画/交叉淡入淡出内联锚元素的方法。块元素有几种解决方案，但对于内联元素目前还没有。

我的每个单词的替代文本来自元素内的一个属性：

```
<a data-r="nerd">word</a>​ 
```

但是，如果我尝试淡出，请替换文本并淡入，如下所示：

```
jQuery(document).ready(function($) {
$('a').click(function(index) {
    $(this).fadeOut(500, function() {
        $(this).text($(this).attr("data-r"));
    });
    $(this).fadeIn(500);
    });
});​ 
```

我没有得到我想要的交叉淡入淡出效果，而是淡出后淡入，正如你在这个[演示](http://jsfiddle.net/psychomachine/rYK3v/)中看到的那样。

我将非常感谢您提供的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:06:04.950

这是我想出的：

```
$('a').click(function(index) {
  var clone = $(this).clone();
  clone.css('position', 'absolute');
  clone.css('left', $(this).position().left);
  clone.css('top', $(this).position().top);
  $('body').append(clone);

  $(this).hide();
  $(this).text($(this).attr("data-r"));

  clone.fadeOut(500, function() {
    clone.remove();
  });
  $(this).fadeIn(500);
});
```

```
a { font-size: 60px; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<p>
    <a data-r="nerd">word</a><br>
    <a data-r="dork">word</a>
</p>
```

不过，您可能必须调整它以使用不同`line-height`的 s。

# php - 如何使 Codeigniter 中的分页类与 AJAX 一起使用？

> ID：11384835
> 
> 赞同：4
> 
> 时间：2012-07-08T16:42:11.297
> 
> 标签：php, ajax, codeigniter, pagination

我有一个通过 AJAX 加载的表格，并且分页也通过 AJAX 加载。该表包含我网站上所有用户的列表，一次限制为 30 个。

这就是我从控制器返回对 JavaScript 的响应的方式：

```
 $users = $this->users_m->get_users($type, $offset);
    $num_rows = $this->users_m->user_stats($type);

    $config['per_page'] = 30;
    $config['num_links'] = 5;
    $config['total_rows'] = $num_rows[0];
    $this->pagination->initialize($config);

    echo json_encode(array(
        'users' => $users,
        'pagination' => $this->pagination->create_links()
    )); 
```

一切都很好，只是分页永远不正确。第一次是，但在随后的请求中不是。

在非 AJAX 页面中使用分页类时，我点击的页码变为活动页码。此处第 1 页始终处于活动状态（被`<strong>`标签包围，而不是链接）。其次，数字永远不会改变。我得到：

```
[1] [2] [3] [4] [5] [6] [>] [Last >] 
```

每次。即使我最后一次点击我得到相同的数字，它也不会改变。

如何让分页类与 AJAX 一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:28:35.303

好的，我想出了一个可行的解决方案，如果其他人有同样的问题，我会在这里发布。

我使用了在这里找到的分页类：

~~http://www.catchmyfame.com/2007/07/28/finally-the-simple-pagination-class/~~ [https://github.com/catchmyfame/PHP-Pagination-Class/blob/master/paginator.class。 php](https://github.com/catchmyfame/PHP-Pagination-Class/blob/master/paginator.class.php)

但将其修改为既可用作 CI 库，也可与我的特定 javascript 一起使用。创建一个名为的新文件

`Pagination_ajax.php`

并将其放在与默认分页类相同的位置

`/system/libraries`.

这是修改后的类：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/*
 * PHP Pagination Class
 * @author admin@catchmyfame.com - http://www.catchmyfame.com
 * @version 2.0.0
 * @date October 18, 2011
 * @copyright (c) admin@catchmyfame.com (www.catchmyfame.com)
 * @license CC Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) - http://creativecommons.org/licenses/by-sa/3.0/
 */

class Pagination_ajax {

    var $items_per_page;
    var $items_total;
    var $current_page;
    var $num_pages;
    var $mid_range;
    var $low;
    var $limit;
    var $return;
    var $default_ipp;
    var $querystring;
    var $ipp_array;

    function Paginator()
    {
        $this->current_page = 1;
        $this->mid_range = 7;
        $this->ipp_array = array(10,25,50,100,'All');
        $this->items_per_page = (!empty($_GET['ipp'])) ? $_GET['ipp']:$this->default_ipp;
    }

    function paginate()
    {
        if(!isset($this->default_ipp)) $this->default_ipp=25;
        if($_GET['ipp'] == 'All')
        {
            $this->num_pages = 1;
//          $this->items_per_page = $this->default_ipp;
        }
        else
        {
            if(!is_numeric($this->items_per_page) OR $this->items_per_page <= 0) $this->items_per_page = $this->default_ipp;
            $this->num_pages = ceil($this->items_total/$this->items_per_page);
        }
        $this->current_page = (isset($_GET['page'])) ? (int) $_GET['page'] : 1 ; // must be numeric > 0
        $prev_page = $this->current_page-1;
        $next_page = $this->current_page+1;
        if($_GET)
        {
            $args = explode("&",$_SERVER['QUERY_STRING']);
            foreach($args as $arg)
            {
                $keyval = explode("=",$arg);
                if($keyval[0] != "page" And $keyval[0] != "ipp") $this->querystring .= "&" . $arg;
            }
        }

        if($_POST)
        {
            foreach($_POST as $key=>$val)
            {
                if($key != "page" And $key != "ipp") $this->querystring .= "&$key=$val";
            }
        }
        if($this->num_pages > 10)
        {
            $this->return = ($this->current_page > 1 And $this->items_total >= 10) ? "<a data-page=\"$prev_page\" class=\"paginate\" href=\"#\">&laquo; Previous</a> ":"<span class=\"inactive\" href=\"#\">&laquo; Previous</span> ";

            $this->start_range = $this->current_page - floor($this->mid_range/2);
            $this->end_range = $this->current_page + floor($this->mid_range/2);

            if($this->start_range <= 0)
            {
                $this->end_range += abs($this->start_range)+1;
                $this->start_range = 1;
            }
            if($this->end_range > $this->num_pages)
            {
                $this->start_range -= $this->end_range-$this->num_pages;
                $this->end_range = $this->num_pages;
            }
            $this->range = range($this->start_range,$this->end_range);

            for($i=1;$i<=$this->num_pages;$i++)
            {
                if($this->range[0] > 2 And $i == $this->range[0]) $this->return .= " ... ";
                // loop through all pages. if first, last, or in range, display
                if($i==1 Or $i==$this->num_pages Or in_array($i,$this->range))
                {
                    $this->return .= ($i == $this->current_page And $_GET['page'] != 'All') ? "<a class=\"current\" href=\"#\">$i</a> ":"<a data-page=\"$i\" class=\"paginate\" href=\"#\">$i</a> ";
                }
                if($this->range[$this->mid_range-1] < $this->num_pages-1 And $i == $this->range[$this->mid_range-1]) $this->return .= " ... ";
            }
            $this->return .= (($this->current_page < $this->num_pages And $this->items_total >= 10) And ($_GET['page'] != 'All') And $this->current_page > 0) ? "<a data-page=\"$next_page\" class=\"paginate\" href=\"#\">Next &raquo;</a>\n":"<span class=\"inactive\" href=\"#\">&raquo; Next</span>\n";
            $this->return .= ($_GET['page'] == 'All') ? "<a class=\"current\" style=\"margin-left:10px\" href=\"#\">All</a> \n":"<a data-page=\"1\" data-all=\"true\" class=\"paginate\" style=\"margin-left:10px\" href=\"#\">All</a> \n";
        }
        else
        {
            for($i=1;$i<=$this->num_pages;$i++)
            {
                $this->return .= ($i == $this->current_page) ? "<a class=\"current\" href=\"#\">$i</a> ":"<a data-page=\"$i\" class=\"paginate\" href=\"#\">$i</a> ";
            }
            $this->return .= "<a data-page=\"1\" data-all=\"true\" class=\"paginate\" href=\"#\">All</a> \n";
        }
        $this->low = ($this->current_page <= 0) ? 0:($this->current_page-1) * $this->items_per_page;
        if($this->current_page <= 0) $this->items_per_page = 0;
        $this->limit = ($_GET['ipp'] == 'All') ? "":" LIMIT $this->low,$this->items_per_page";
    }
    function display_items_per_page()
    {
        $items = '';
        if(!isset($_GET[ipp])) $this->items_per_page = $this->default_ipp;
        foreach($this->ipp_array as $ipp_opt) $items .= ($ipp_opt == $this->items_per_page) ? "<option selected value=\"$ipp_opt\">$ipp_opt</option>\n":"<option value=\"$ipp_opt\">$ipp_opt</option>\n";
        return "<span class=\"paginate\">Items per page:</span><select class=\"paginate\" onchange=\"window.location='$_SERVER[PHP_SELF]?page=1&ipp='+this[this.selectedIndex].value+'$this->querystring';return false\">$items</select>\n";
    }
    function display_jump_menu()
    {
        for($i=1;$i<=$this->num_pages;$i++)
        {
            $option .= ($i==$this->current_page) ? "<option value=\"$i\" selected>$i</option>\n":"<option value=\"$i\">$i</option>\n";
        }
        return "<span class=\"paginate\">Page:</span><select class=\"paginate\" onchange=\"window.location='$_SERVER[PHP_SELF]?page='+this[this.selectedIndex].value+'&ipp=$this->items_per_page$this->querystring';return false\">$option</select>\n";
    }
    function display_pages()
    {
        return $this->return;
    }
} 
```

你可以在这个和原始下载之间做一个差异，看看我改变了什么。

**控制器代码：**

```
 public function get_users() {

        // pagination
        $this->load->library('pagination_ajax');
        $pages = new Pagination_ajax;
        $num_rows = $this->users_m->user_stats(); // this is the COUNT(*) query that gets the total record count from the table you are querying
        $pages->items_total = $num_rows[0];
        $pages->mid_range = 10; // number of links you want to show in the pagination before the "..."
        $pages->paginate();

        $users = $this->users_m->get_users($pages->limit); // your query

        echo json_encode(array(
            'users' => $users,
            'pagination' => $pages->display_pages()
        ));

    } 
```

**型号代码：**

```
public function get_users($limit) {

    $sql = "SELECT *
            FROM `users`
            $limit";

    $query = $this->db->query($sql);

    $users = array();
    foreach ($query->result() as $row) {
        $users[] = array(
            'user_id'   => $row->user_id,
            'username'  => $row->username,
            'email'     => $row->email
        );
    }

    return $users;
} 
```

**查询：**

```
// pagination
$('#pagination a').live('click', function() {
    var $this = $(this);
    var page = $this.data('page');
    var ipp = ($this.data('all')) ? 'All' : 30; // I am returning 30 results per page, change to what you want

    $.ajax({
        url: '/admin/users/get_users?page=' + page + '&ipp=' + ipp,
        dataType: 'json',
        success: function(response) {

            for(var i=0; i<response.users.length; i++) {
                var user = response.users[i];
                var tr = '<tr>' +
                            '<td>' + user.user_id + '</td>' +
                            '<td>' + user.username + '</td>' +
                            '<td>' + user.email + '</td>' +
                        '</tr>';

                $('table tbody').append(tr);
            }

            // pagination
            $('#pagination').html(response.pagination);             
        },
        error: function() {
            alert('An error occurred');
        }
    });

    return false;
}); 
```

**HTML**

```
 <h1>Users</h1>

    <table>
        <thead>
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
        </thead>
        <tbody></tbody>
    </table>                        

    <div id="pagination"></div> 
```

**CSS**

```
#pagination { overflow: hidden; margin-bottom: 10px; text-align: center; }
#pagination a { display: inline-block; padding: 3px 5px; font-size: 14px; color: #333; border-radius: 3px; text-shadow: 0 0 1px #fff;  border: 1px solid #ccc;

    background: #ffffff;
    background: -moz-linear-gradient(top,  #ffffff 0%, #f6f6f6 47%, #ededed 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed));
    background: -webkit-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%);
    background: -o-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%);
    background: -ms-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%);
    background: linear-gradient(to bottom,  #ffffff 0%,#f6f6f6 47%,#ededed 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 );
}
#pagination a:hover { border: 1px solid #333; }
#pagination a.current { color: #f00; } 
```

希望有人觉得这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:54:31.760

我是这样做的，添加jquery库

分页类：

```
 $html = "<a style=\"cursor:pointer\"  onclick=\"pagination('$url','$par','$div')\" >$text</a>";
        else:
        $html = "<a style=\"cursor:pointer\" onclick=\"pagination('$url','','$div')\" >$text</a>"; 
```

JS

```
var ServerCall = function(_url,_data,callback){

    $('#Spinner').center().show();
    _data = (_data == null)?'':_data;
    $.ajax({
           type: "POST",
           url: _url,
           data: 'ajax=1&'+_data,
           dataType:'html',
           success: 
             function(result) {
             $('#Spinner').hide();
                callback(result);
           },
            error: function (data, status, e){
                $('#Spinner').hide();
            }
        });
};

var pagination = function (_url,_params,_div)
{
    ServerCall(_url,_params,function(data){

        $('#'+_div).html(data);
        $('.editTableRow').bind('click',editfunction);
    });
}; 
```

# c# - AllFramesReady 重复循环

> ID：11384838
> 
> 赞同：0
> 
> 时间：2012-07-08T16:43:23.460
> 
> 标签：c#, c#-4.0, loops, kinect

我正在创建一个程序，您可以在其中进行一次伸展运动，因此它会增加一个次数。我想在每个代表之间有一个间隔（不是当前问题）。我有这个嵌套在`AllFramesReadyEventArgs`. 问题是，由于SDK使用了`AllFramesReadyEvent`整个程序，所以它是一个无限循环。当我不想重复时，我怎样才能在不重复的情况下完成每个重复？提前致谢。

```
if (skeleton.TrackingState == SkeletonTrackingState.Tracked)
{
    int whereIsX = (int)Canvas.GetLeft(ellipse1);
    int whereToX = (int)Canvas.GetLeft(pspine);
    whatToMultiplyX = whereToX / whereIsX;

    int whereIsY = (int)Canvas.GetTop(ellipse1);
    int whereToY = (int)Canvas.GetTop(pspine);
    whatToMultiplyY = whereToY / whereIsY;

    Canvas.SetTop(ellipse1, Canvas.GetTop(ellipse1) * whatToMultiplyY);
    Canvas.SetLeft(ellipse1, Canvas.GetLeft(ellipse1) * whatToMultiplyX);

    for (int i = 0; i < Doctor_ShoulderX.Count; i++)
    {
        Canvas.SetTop(doctorHand, Doctor_HandY[i] * whatToMultiplyY);
        Canvas.SetTop(doctorElbow, Doctor_ElbowY[i] * whatToMultiplyY);
        Canvas.SetTop(doctor_Shoulder, Doctor_ShoulderY[i] * whatToMultiplyY);

        Canvas.SetLeft(doctorHand, Doctor_HandX[i] * whatToMultiplyX);
        Canvas.SetLeft(doctorElbow, Doctor_ElbowX[i] * whatToMultiplyX);
        Canvas.SetLeft(doctor_Shoulder, Doctor_ShoulderX[i] * whatToMultiplyX);                        

        handX = Canvas.GetLeft(handright);
        handY = Canvas.GetTop(handright);

        elbowX = Canvas.GetLeft(elbowright);
        elbowY = Canvas.GetTop(elbowright);

        shoulderX = Canvas.GetLeft(shoulderright);
        shoulderY = Canvas.GetTop(shoulderright);

        shoulder_x.Text = "Shoulder X: " + shoulderX.ToString();
        shoulder_y.Text = "Shoulder Y: " + shoulderY.ToString();

        elbow_x.Text = "Elbow X: " + elbowX.ToString();
        elbow_y.Text = "Elbow Y: " + elbowY.ToString();

        hand_x.Text = "Hand X: " + handX.ToString();
        hand_y.Text = "Hand Y: " + handY.ToString();

        Patient_HandX.Add(handX);
        Patient_HandY.Add(handY);

        Patient_ElbowX.Add(elbowX);
        Patient_ElbowY.Add(elbowY);

        Patient_ShoulderX.Add(shoulderX);
        Patient_ShoulderY.Add(shoulderY);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:22:10.437

我将使用答案，因为写作比评论可以处理的更多:)

aleframesready 动作在每一帧中被调用。所以如果在这里你的循环限制为 20

```
for (int i = 0; i < Doctor_ShoulderX.Count; i++) 
```

每次都会从 0 到 20 调用它。Imo 你应该在类中创建一个静态布尔变量。代码从循环中退出后，将其设置为 false（如果在开始时为 true）。在调用循环之前，请检查变量是否设置为 true。如果是，则调用循环，如果不是，则继续

# jquery - 取消选中收音机

> ID：11384844
> 
> 赞同：1
> 
> 时间：2012-07-08T16:44:44.790
> 
> 标签：jquery, html, radio-button

我的 html 表单中有一些单选按钮，代码如下：

```
slovenský <input type="radio" name="jazyk1" value="1" style="margin-right: 20px; margin-bottom: 15px;" />
český     <input type="radio" name="jazyk1" value="2" style="margin-right: 20px; margin-bottom: 15px;" />
anglický  <input type="radio" name="jazyk1" value="3" style="margin-right: 20px; margin-bottom: 15px;" />
<br />
nemecký   <input type="radio" name="jazyk1" value="4" style="margin-right: 20px; margin-bottom: 15px;" />
francúzsky<input type="radio" name="jazyk1" value="5" style="margin-right: 20px; margin-bottom: 15px;" />
španielsky<input type="radio" name="jazyk1" value="6" style="margin-right: 20px; margin-bottom: 15px;" />
<br />
taliansky <input type="radio" name="jazyk1" value="7" style="margin-right: 20px; margin-bottom: 15px;" />
ruský     <input type="radio" name="jazyk1" value="8" style="margin-right: 20px; margin-bottom: 15px;" />
maďarský  <input type="radio" name="jazyk1" value="9" style="margin-right: 20px; margin-bottom: 15px;" />
<br />
poľský    <input type="radio" name="jazyk1" value="10" style="margin-right: 20px; margin-bottom: 15px;" /> 
```

我想添加链接来重置这个单选按钮，但只有这个单选按钮，因为我在一种形式中有更多单选按钮......你能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T16:47:35.787

假设如下链接：

```
<a href="#" id="uncheck">Uncheck</a> 
```

和对应的***jQuery***到`uncheck` `radio`s：

```
$('#uncheck').on('click', function(e) {
  e.preventDefault(); // prevent page reload, you can remove it if you don't want
  $(':radio[name=jazyk1]').prop('checked', false);
}); 
```

在这里，`:radio[name=jazyk1]`只有名称为 的单选按钮`jazyk1`。因此，如果您的其他`radio`s 没有相同的名称，则上述代码`radio`仅适用于上述 s。

除了链接标签，您还可以使用其他类似的东西`button`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:59:07.300

关于***代码悖论的***答案，您也可以使用`$(':radio[name=jazyk1]').attr('checked', false);`而不是`$(':radio[name=jazyk1]').prop('checked', false);`This 也可以正常工作。`attr`是最常见的 jQuery 处理元素属性的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:24:29.337

让用户重置一组单选按钮的（唯一）稳健方法是包含一个表示“虚拟”选择或在实践中“无选择”的附加按钮，例如

```
<label for="no-select">Jazyk nie je vybraté</label>
<input type="radio" name="jazyk1" value="0" checked="checked" id="no-select"
       style="margin-right: 20px; margin-bottom: 15px;" /> 
```

处理表单数据（服务器端或客户端）的代码将需要相应地处理此选择：`jazyk1=0`这意味着未进行任何选择，因为用户没有单击任何这些单选按钮或他已撤消选择。在这种情况下，特殊值`0`必须是不作为真正值出现的值。

# angularjs - 路由和刷新多个 ng-inludes

> ID：11384851
> 
> 赞同：1
> 
> 时间：2012-07-08T16:45:33.193
> 
> 标签：angularjs

我从代码开始：

```
when('/admin', {
    templateUrl: 'partials/admin/layout.html',
    controller: AdminCtrl
})
when('/admin/products', {
    templateUrl: '????',
    controller: AdminProductsCtrl
}) 
```

模板“树”：

```
index.html ---> <div ng-view/>
---layout.html ---> <div ng-include=menu/> and <div ng-include=body/>
------menu.html 
------products.html 
```

其实我这样做：

```
function AdminCtrl($scope) {
     $scope.menu = 'partials/admin/menu.html';
}

function AdminProductsCtrl($scope) {
    $scope.menu = 'partials/admin/menu.html';
    $scope.body = 'partials/admin/products/index.html';
} 
```

关键是：如果我把 layout.html 放入'????' 中，这可以正常工作，但我只喜欢“刷新”ng-include=body。我认为我对 Angularjs 的概念是错误的。

另一个问题是，当 AdminProductsCtrl “控制” layout.html 时，我错过了 AdminCtrl $scope，这意味着在 AdminProductsCtrl $scope 中重复所有 AdminCtrl $scope（例如 $scope.menu）。

非常感谢，对不起“我的英语”。

**更新**

经过思考......并思考......我了解路由不适用于我的应用程序，然后我在一个 url 'site.com/#/admin' 下管理所有功能。menu.html 是为 AdminMenuCtrl 管理的，该控制器包含每个“ng-include”的模型，并包含每个菜单条目的一个方法。当用户单击菜单条目时，$scope 中的 associate 方法将 $scope.includes.body 替换为“新”html。部分包含您的 ng 控制器。

现在这工作正常：D。最好的是我不需要使用 $rootScope。

新问题有点复杂，ng-include 也需要标签（即DIV）和ng-controller。然后我的设计因此受到影响。在代码语言中：

设计：

```
<div>MENU-HTML</div>
<div>BODY-HTML</div> 
```

模板：

```
<div ng-include="menu"></div>
<div ng-include="body"></div> 
```

检索零件后：

```
<div ng-include="menu"><div ng-controller="MenuCtrl">MENU-HTML</div></div>
<div ng-include="body"><div ng-controller="ListProductsCtrl">BODY-HTML</div></div> 
```

理想的东西：

1 - ng-include 不要“包含”到 DIV 中，而是“替换”DIV。

2 - ng-controller DIV 在 DOM 中被替换。

现在可以使用角度吗？这个想法是一个坏方法吗？$route 第 2 点是可能的，而不是 ng-controller 指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:44:32.603

我相信你在你的例子中是正确的`????`，`layout.html`但这个想法是根据路线有不同的观点，所以指向相同的观点`layout.html`并不理想。

如果您尝试在所有页面上保留静态菜单，我会将菜单添加到您的菜单中`index.html`，然后为每条路线选择不同的 templateUrl（即`/admin`go to`partials/admin.html`和`/admin/products`go to `partials/products.html`）而不使用 ngInclude。

我是 AngularJS 的新手，但我的印象是，如果您想滚动自己的视图切换，您通常希望将 ngView 与到 templateUrls 的路由一起使用，或者使用 ngInclude （可能与[ngSwitch一起使用）。](http://docs.angularjs.org/api/ng.directive%3angSwitch)我敢肯定，有时同时使用两者都是合适的，但作为新手，这让我有些困惑。如有不对请各位高手指正！

[对于您的第二个问题，此处](https://groups.google.com/d/topic/angular/XwFp-6mSV2g/discussion)和[此处](https://groups.google.com/d/topic/angular/S30ixG28ip4/discussion)可能有一些有用的信息，用于在多个控制器之间共享相同模型的提示，但您的示例可能不需要。

另一种方法是在 layout.html 中使用字符串常量路径指向您的部分，并使用以下方法删除`$scope.menu`控制器代码中的引用：

```
<div ng-include="'partials/admin/menu.html'"/> 
```

# c++ - 如何像关系数据库一样计算聚合

> ID：11384856
> 
> 赞同：1
> 
> 时间：2012-07-08T16:46:16.180
> 
> 标签：c++

假设我有一个这样的数据集：

```
MONTH   REGION  SALES
NOV_2011    North   15000
NOV_2011    North   15000
OCT_2010    West    14000
NOV_2011    North   15000
OCT_2010    West    14000
OCT_2010    West    7000
APR_2010    North   3000
DEC_2011    South   24000
APR_2010    North   9000 
```

我想按月和地区获得总销售额。

```
MONTH   REGION  SALES
APR_2010    North   12000
DEC_2011    South   24000
NOV_2011    North   45000
OCT_2010    West    35000 
```

如果这些数据在关系表中，我可以很容易地编写一个 sql 来得到答案。所有数据库几乎可以立即给出答案（当然取决于数量、索引等）。我想使用 C++ 工具来做这种计算，因为有时这个任务不值得添加一个 sql 库。是否有数据结构算法可以使此类任务更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:54:21.877

您可以使用`std::map`.

一个问题是您的数据包含重复的行。例如，其中月份 == NOV_2011 和区域 == 北部和销售额 == 15000。这使得使用`std::map`不切实际，因为您必须将值作为列表或其他容器（一个关键项，一个包含行索引的容器每个关键条目）。

大多数数据库设计人员通过重新设计表中的数据来加快访问速度。搜索“关系数据库规范化”。

# cocoa - 如何创建包含 NSLineSeparatorCharacter 的 NSString？

> ID：11384857
> 
> 赞同：3
> 
> 时间：2012-07-08T16:46:17.113
> 
> 标签：cocoa, nsstring

`NSString`对 Unicode 很友好。所以通常当我想创建一个包含 unicode 的字符串时，我可以将它直接弹出到一个字符串文字中，如下所示：

```
NSString *myString = @"Press ⌘Q to quit…"; 
```

但这不适用于使用行分隔符（AKA：<code>NSLineSeparatorCharacter，Unicode U+2028，UTF-8 E2 80 A8）。编译器（正确地）将此解释为换行符，这在 C 语法中是禁止的。

`-stringWithFormat:`也无济于事。试

```
NSString *myString = [NSString stringWithFormat@"This is%don two lines…", NSLineSeparatorCharacter]; 
```

给了我字符串“This is8232on two lines...”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:46:17.737

事实证明`-stringWithFormat:`这是正确的方法。我只需要`%C`用作替换而不是`%d`. `NSLineSeparatorCharacter`是一个枚举（因此是整数），所以编译器认为`%d`这是我应该使用的。但这`%C`是 Cocoa 插入`unichar`类型的方式。用一点铸造...

```
NSLog(@"This is%Con two lines…", (unichar)NSLineSeparatorCharacter); 
```

奇迹般有效！

另请注意下面 Ken 的评论：您可以使用转义序列将字符直接嵌入字符串文字中：

```
@"This is\u2028on two lines…" 
```

# c# - 有没有办法让这个 C# 比较代码更通用？

> ID：11384865
> 
> 赞同：2
> 
> 时间：2012-07-08T16:47:09.770
> 
> 标签：c#, refactoring

我正在比较相同类型的两个对象并将差异返回到`FieldChange`对象列表中。现在我列出了每个字段比较，这似乎有点不理想。

有没有更简洁的方法来重构下面的代码以避免重复？下面有两组代码，但实际上我有大约 20 个比较。

```
var changes = new List<FieldChange>();
if (proposedUpdatedProject.StatusId != existingProject.StatusId)
{
    var previousStatusName = existingProject.StatusShortName;
    existingProject.Status = ProjectModel.Repository.Fetch<ProjectStatus>(proposedUpdatedProject.StatusId);
    changes.Add(new FieldChange { FieldName = "Status", PreviousValue = previousStatusName, NewValue = existingProject.StatusShortName });
}

if (proposedUpdatedProject.TechOwnerId != existingProject.TechOwnerId)
{
    var previousTechOwnerName = existingProject.TechOwnerName;
    existingProject.TechOwner = ProjectModel.Repository.Fetch<Person>(proposedUpdatedProject.TechOwnerId);
    changes.Add(new FieldChange { FieldName = "Tech Owner", PreviousValue = previousTechOwnerName, NewValue = existingProject.TechOwnerName });
} 
```

注意：所有对象都派生自同一个名为 BaseObj 的对象。另请注意，我不只是将可比较字段的值放入 FieldChange 对象（id 与 Name 属性）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:53:51.680

您可以创建一个方法[`attribute`](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=vs.100%29.aspx)，例如称为`ComparableAttribute`. 然后你可以用这个属性来装饰这些对象中的所有方法。

您可以在进行比较的方法中使用反射并遍历所有`Comparable`属性。代码会短得多（一次迭代，而不是 20 条`if`语句）。

如果您需要某些属性的自定义信息，您可以通过`ComparableAttribute`属性将其指定为参数。

compare 方法仍将两个实例作为参数，但您最终会得到一个更小的实现。您甚至可以`PropertyInfo`为您的类型缓存 s，这样您就不会在每次比较时进行反映。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:55:31.387

为什么不反映到结构中：

```
existingProject 
```

并比较所有领域。通过以这种方式长期编写代码，您为问题添加了大量信息，例如 StatusID 和 StatusName 之间的关联，但是如果您选择一些适当的命名约定，您可能会自动完成整个事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:01:42.250

为什么不使用 `INotifyPropertyChanged`接口？[在这里](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)查看有关它的信息。您只需实现它并订阅该事件。还有一个[链接](http://bernhard-richter.blogspot.in/2010/02/tracking-changes-made-to-poco-objects.html)

# android - 是否可以加载不同的内核并从内核模块跳转到它？

> ID：11384873
> 
> 赞同：1
> 
> 时间：2012-07-08T16:48:36.273
> 
> 标签：android, linux-kernel, arm, bootloader

有一些带有锁定引导加载程序的安卓设备（例如摩托罗拉 Defy）。您可以获得对它们的 root 权限，甚至可以加载内核模块，但无法更改最初加载的内核。所以，我的问题是：

是否可以编写一个内核模块，将另一个内核加载到 RAM 中，禁用所有中断，禁用 MMU，然后跳转到新的内核映像？那能行吗，还是一些已经初始化的设备会搞砸一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:04:25.997

在 linux 中执行此操作的通用机制是 kexec

看起来有人至少为你的摩托罗拉手机做了一次工作：

[http://www.xda-developers.com/android/kexec-bootloader-bypass-released-for-motorola-droid-razr/](http://www.xda-developers.com/android/kexec-bootloader-bypass-released-for-motorola-droid-razr/)

# emacs - 有人用 elisp 作为脚本语言吗？

> ID：11384875
> 
> 赞同：2
> 
> 时间：2012-07-08T16:48:58.940
> 
> 标签：emacs, lisp

> **可能重复：**
> [在 Emacs 中对文本进行 Idomatic 批处理？](https://stackoverflow.com/questions/2879746/idomatic-batch-processing-of-text-in-emacs)

我真的很喜欢贝壳。我只是想知道它是否可以像`shell script`.

# python - 文件第二列的值的总和

> ID：11384876
> 
> 赞同：-3
> 
> 时间：2012-07-08T16:49:14.573
> 
> 标签：python

我有一个 txt 文件，每行包含由空格分隔的 2 个值：

```
x1 y1
x2 y2
x3 y3
...
xn yn 
```

我想获取另一个文件，其中包含：

```
x1 y1
x2 y1+y2
x3 y1+y2+y3
...
xn y1+y2+y3+...+yn 
```

在 python 中最快（我的意思是最简单）的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:55:28.113

这会让你*开始*。

给定`data.txt`：

```
1 1
2 2
3 3
4 4 
```

这个代码片段：

```
with open('data.txt') as inf:
    ysum = 0
    for line in inf:
        line = line.split()
        x, y = [float(i) for i in line]
        ysum += y
        print x, ysum 
```

会给你（`float()`上面使用）：

```
1.0 1.0
2.0 3.0
3.0 6.0
4.0 10.0 
```

另一方面，如果您想要以下行`+`：

```
with open('data.txt') as inf:
    yline = []
    for line in inf:
        line = line.split()
        x = int(line[0])
        yline = '+'.join(yline + [(line[1])])
        print x, yline
        yline = [yline] 
```

会给你（使用`int()`这个时间）：

```
1 1
2 1+2
3 1+2+3
4 1+2+3+4 
```

我怀疑上面的代码，尤其是第二个代码，可能会被进一步简化/优化，但应该足以让你开始。

您仍然需要调整从字符串到适当类型（`float`或`int`）的转换，并创建输出文件并以您喜欢的格式写入它。这些是您最好决定的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:49:29.987

最简单的代码方式是[`numpy.cumsum()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html#numpy.cumsum)如果您已经使用`numpy`数组：

```
import numpy as np

a = np.loadtxt("input.txt")
a[:,1].cumsum(out=a[:,1]) # accumulate values in the 2nd column
np.savetxt("output.txt", a) #note: you could specify fmt="%d" for integer array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:15:31.653

```
with open('input.txt') as inf, open('output.txt','w') as outf:
    datatype = int    # or float
    yy = 0
    for line in inf:
        x,y = line.split()
        yy += datatype(y)
        outf.write('{} {}'.format(x, yy)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:51:48.630

**数据.txt：**

```
1 10
2 20
3 30
4 40 
```

**代码：**

```
with open('data.txt') as f1,open('output.txt','w') as f2:
    lis=[map(int,line.split()) for line in f1]
    for i,z in enumerate(lis):
        f2.write("{0:d} {1:d}\n".format(z[0],sum(lis[j][1] for j in range(i+1)))) 
```

**输出**：

```
1 10
2 30
3 60
4 100 
```

# ios5 - iPhone：按下时如何从 UIBarButtonItem 中移除发光（光）？

> ID：11384879
> 
> 赞同：1
> 
> 时间：2012-07-08T16:49:31.497
> 
> 标签：ios5, uibarbuttonitem, uitoolbar

我正在尝试从 UIBarButton 项中删除发光，以便我的文本看起来是标签而不是按钮。我已经看到各种帖子谈论如何通过界面构建​​器或通过设置布尔变量“showsTouchWhenHighlighted”来做到这一点，但这些选项对我来说都不是可用的。我尝试在 .m viewDidLoad 中设置 showTouchWhenHighlighted，我在其中更改了字体和字体大小，但 UIBarButtonItem 似乎没有该属性。我也只有下图中的选项可以在 InterfaceBuilder 中更改。

![在此处输入图像描述](../Images/26593ee07299cee4c059c992378bfd37.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:47:30.470

有一种方法可以做到这一点（有点破解，但它有效）。只需将 a`UIButton`拖入您的工具栏（而不是 a `UIBarButtonItem`）。然后`UIBarButtonItem`将自动为您创建一个作为您的超级视图`UIButton`。然后你就这样设置它：

**UIBarButtonItem**

*   款式：素色
*   标题：（空）

**用户界面按钮**

*   类型：定制
*   标题：（此处为您的实际标签标题）
*   文字颜色：白色
*   高亮显示触摸：（未选中）

这是用作参考的屏幕截图： ![在此处输入图像描述](../Images/5e27eda6880c40aef7a6103257723d9c.png)

注意：请记住，从现在开始，对文本的任何更新都必须在`UIButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:50:23.233

尝试这个：

`

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(140 , 0, 50, 250)];
    [label setBackgroundColor:[UIColor clearColor]];
    label.text = @"TEXT";
    UIView *view = (UIView *) label;
    [self.barItem setCustomView:view]; 
```

`

注意：self.barItem 是从对象库中添加的 UIBarButtonItem，放置在两个灵活的空间之间。

另一种方法是删除`[self.barItem setCustom:view]`线并更改标签（宽度）的参数，使其填充整个工具栏并在代码中自行设置对齐方式为中间和字体，

# c++ - 在 char 数组中查找出现次数最多的字符

> ID：11384881
> 
> 赞同：1
> 
> 时间：2012-07-08T16:50:11.467
> 
> 标签：c++, string, char

我正在尝试使用以下算法查找此数组中出现次数最多的字符：

```
char a[]={"aaaadddddaa"};
int max=0;
int count=0;
char maxCharcter;
for(char q='a';q<='z';q++)
{
    for(int i=0; i<strlen(a);i++)
    {
        if(a[i]==q)
            count++;
    }

    if(count>max)
    {
        max=count;
        maxCharcter=q;
    }
}

cout<<max<<endl;
cout<<maxCharcter<<endl; 
```

输出应该是`max=6 maxCharcter=a`，但我得到了`max=11 maxCharcter=d`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:53:29.190

`count`应该在你的第一个 for 循环中初始化

```
for(char q='a';q<='z';q++) {
   count = 0;
   //continue code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:55:20.393

那可能是您只“重置”一次计数，而不是每个字符。

```
int count=0;
char maxCharcter;
for(char q='a';q<='z';q++)
{
    for(int i=0; i<strlen(a);i++) 
```

大概应该是

```
char maxCharcter;
for(char q='a';q<='z';q++)
{
    int count=0;
    for(int i=0; i<strlen(a);i++) 
```

除此之外，您可以通过一次遍历字符串来加快整个过程，使用另一个数组来计算每个字符的出现次数......

# perl - 如何手动安装 XS 模块？

> ID：11384882
> 
> 赞同：7
> 
> 时间：2012-07-08T16:50:11.687
> 
> 标签：perl, module, perl-module, xs

如果我错了，请纠正我，但是基于 XS 和 Dynaloader 的模块是那些使用 C/C++ 共享对象 (.so) 而不是 PP (Pure Perl) 的模块？

现在假设我有一台机器，它没有任何网络连接（Solaris 10）并且我想要安装`Crypt::OpenSSL::AES`（基于 XS 的模块），将`AES.pm`文件复制到 @INC 中的相关路径不会有任何好处，因为我的系统没有`libssl`安装。

我的第二个也是最重要的问题是，当我没有 CPAN 时如何安装这些模块？我的方法是：

1.  首先获取`libssl`我的平台，编译它，但是我应该把分片对象文件放在哪里以便 perl 可以找到它？
2.  当我安装并编译了 libssl 并位于它应该在的位置时，现在只需将其复制`AES.pm`到@INC 中的相关路径就足够了，还是我需要配置/制作它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T18:36:45.673

CPAN 本身是基本 perl 安装的一部分。它将始终可用。

如果您无法使用`cpan`shell 与 Internet 通信并获取模块，您至少可以从 CPAN 网站获取 tarball，将其放在目标机器上，解压缩，然后运行

```
$ cpan . 
```

从解压缩的目录中。这将为该发行版运行 CPAN 安装程序。当然，如果它发现缺少的依赖项，您将不得不使用相同的技术自己递归地获取这些依赖项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T17:58:27.370

1.  如果您没有 root 访问权限，我将安装在`${HOME}/lib`. 只需确保链接器可以找到它，目录应该在您的`LD_LIBRARY_PATH`环境变量中，或者更好地[将 EU::MM 指向库并包含文件](http://p3rl.org/ExtUtils%3a%3aMakeMaker#INC)。

2.  不，该模块在 C 中也有一部分必须编译。

**安装**

下载分发包： [http ://search.cpan.org/CPAN/authors/id/T/TT/TTAR/Crypt-OpenSSL-AES-0.02.tar.gz](http://search.cpan.org/CPAN/authors/id/T/TT/TTAR/Crypt-OpenSSL-AES-0.02.tar.gz)

然后按照 INSTALLATION 下的 README 文件中的步骤进行操作

```
perl Makefile.PL INC="-I $HOME/include" LIBS="-L $HOME/lib"
make
make test
make install 
```

这将确保模块正确构建、测试和安装。

# objective-c - pop and refresh viewcontroller

> ID：11384889
> 
> 赞同：3
> 
> 时间：2012-07-08T16:50:57.380
> 
> 标签：objective-c, uiviewcontroller, popviewcontroller

I have three viewcontroller. when I get to the third viewcontroller, I use poptorootviewcontroller to pop to my first view controller, but when I use popviewcontroller in my third viewcontroller (i want to go back to my second viewcontroller) its poping but all the info that I edit in my second viewcontroller are there, and I want the secondviewcontroller to be new (reset this viewcontroller), like this viewcontroller to be reloaded. here is my code in the third viewcontroller:

```
-(IBAction)playAgain:(id)sender
{
   [self.navigationController popViewControllerAnimated:YES];
} 
```

how can I do it? thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:11:35.373

In the second viewcontroller, you should write a method viewWillAppear like below,

```
-(void) viewWillAppear:(BOOL)animated
{
     [super viewWillAppear:animated];
     //set initial values here  
} 
```

This method will call when your controller is about to appear. So while third viewcontroller will get popped, this method will get called and you can reset values.

# c++ - 使用预处理器制作用户定义的文字

> ID：11384894
> 
> 赞同：3
> 
> 时间：2012-07-08T16:52:09.423
> 
> 标签：c++, c++11, literals

我正在尝试编写一个宏来从常规字符串文字中创建用户定义的文字。以下两行应创建令牌`"foobar"_literal`：

```
#define AS_LITERAL(TEXT) TEXT ## _literal
AS_LITERAL("foobar"); 
```

*但是GCC-4.7*的预处理器报如下错误：

```
error: pasting ""foobar"" and "_literal" does not give a valid preprocessing token 
```

如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T16:59:56.923

它适用于适当定义的`operator "" _literal`（也使用 GCC 4.7）：

```
#include <cstdlib>

#define AS_LITERAL(TEXT) TEXT ## _literal

constexpr int operator "" _literal(char const*, std::size_t) { return 0; }

int main() {
    int x = AS_LITERAL("abc");
} 
```

# php - 错误不显示

> ID：11384895
> 
> 赞同：1
> 
> 时间：2012-07-08T16:52:26.307
> 
> 标签：php, xml

我有这种 xml 格式：

```
<searches> 

<search>
<name> stephen </name>
<address> box 23 </address>
<sector> IT </sector>
<contacts>+233247764939 </contacts>

<search>
<name> stephen </name>
<address> box 23 </address>
<sector> IT </sector>
<contacts>+233247764939 </contacts>

<searches> 
```

当未找到名称节点的值时，我想向用户显示错误。我尝试使用下面的代码，但似乎没有执行 echo 语句，因此当名称节点值为空或不包含值时，空屏幕显示没有回显消息。这段代码有什么帮助吗？注意：如果名称没有价值，则表示该公司不存在。此代码将 $objj 的值返回到下一个 php 脚本。

下面是完整的代码：

```
<?php 
function processing($term){
$params = array ('username' => 'username', 'password' => 'password', 'term'=> $term); 
// Build Http query using params
$query = http_build_query ($params);
// Create Http context details
$contextData = array (
'method' => 'POST',
'header' => "Connection: close\r\n".
"Content-Type: application/x-www-form-urlencoded\r\n".
"Content-Length: ".strlen($query)."\r\n",
'content'=> $query );
// Create context resource for our request
$context = stream_context_create (array ( 'http' => $contextData ));
print_r($context);
// Read page rendered as result of your POST request
$result =  file_get_contents (
'http://infolinetest.nandiclient.com/search/searches/requestData.xml',  // page url
false,
$context);
// Server response is now stored in $result variable so you can process it

$obj = @simplexml_load_string($result);

 return $obj
 }
 ?>

//the outputting is done in this script

<?php  $objj = processing ($term); ?>
<div data-role="listview">
<ul data-role="listview" data-theme="g" data-inset="true" class="ui-listview ui-    listview-inset ui-corner-all ui-shadow">
<a href="" data-role="button" data-theme="g" data-inset="true"><strong>Search     Results</strong></a>
<?php if ($objj){    ?>        
<?php foreach(@$objj as $searches):?>
<li> <a href="Result_Selected.php?company=<?php echo $searches ->     name.'<br/>'.$searches->sector.'<br/>'.$searches ->address.'<br/>'.$searches ->     contacts.'<br/>'; ?>" data-role="button"><?php echo( $searches -> name).'<br/>'.$searches -    > sector ?></a></li>
<?php endforeach ?>
<a data-ajax="false" href="#top" data-role="button"  name= "smt"><strong>End Of List...    </strong></a>

<?php } else if(empty($objj)||($objj==null)||($objj->name=="")){    ?>

<?php  echo "hello company not found.try again"; } ?>

</ul> 
```

# c# - MVC 4 DB 访问设计决策

> ID：11384901
> 
> 赞同：0
> 
> 时间：2012-07-08T16:53:28.233
> 
> 标签：c#, asp.net-mvc-2, asp.net-mvc-4

目前我正在将一个项目从 MVC 2 更新到 MVC 4，并且我即将用 EF 4.3.1 交换自定义 ORM/数据访问“层”（当它出来时升级到 5），据我所知，大多数控制器使用另一个文件中的函数，这些函数是数据库查询和存储过程的包装器。

所以，我的问题是：我应该使用包装函数删除这个文件并直接使用 EF 从控制器中获取数据，还是应该删除每个函数的内容并用 EF 代码替换它？

你可以给我任何其他的设计技巧吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:01:00.343

使用存储库模式（正是您正在做的事情）可以让您在未来更加灵活，因为您可以将单个文件替换为使用 NHibernate 或连接到 MySql 的代码。这样，您的代码就不会与 EF 紧密耦合，如果您愿意，您可以更轻松地摆脱它。

话虽如此，存储库模式显然涉及一些编码开销，如果您不关心将代码与 EF 紧密耦合，那么您当然可以走后一条路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:09:11.347

我认为这只是选择问题，两者似乎都适用于某些场景。也就是说，我认为对于使用简化数据库访问的类的大型项目，提供通用功能并且可以在需要时更容易地交换为包装其他数据提供者（如 Hibernate）的类。

另外，您可能会添加额外的数据提供者（例如使用其他站点的 API），如果您还将这些数据提供者直接包含到您的控制器中，您将生成非常难以阅读的代码。

这种方法还将显着简化您的控制器，起初这似乎没什么大不了的，但随着更多具有重要功能的控制器将被添加，附加值变得清晰。

# asp.net - 如何将数据列表设置为会话上下文？

> ID：11384906
> 
> 赞同：1
> 
> 时间：2012-07-08T16:53:56.627
> 
> 标签：asp.net, session

我想将数据列表存储到会话对象中。我的场景是我在页面中有一个 gridview 控件。gridview 下方有两个文本框和按钮。当我按下按钮时，gridview 将充满文本框值。每次我按下按钮时，它都会在gridview中添加新行以显示输入的数据。所以，为此我必须使用会话上下文。但我的问题是如何将两个文本框值存储到会话中以及如何再次读取它。我不想使用临时 sql 数据库表。

因此，如果有人知道它，请帮助我..提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:59:07.030

试试这个：
在按钮的点击事件上使用这个代码

```
if(Session["value1"] == null)
{
    Session["value1"] = new List<String>();
}
((List<String>)Session["value1"]).Add(testbox1.value); 
```

要输出数据，您可以遍历所有值：

```
 List<String> V = (List<String>) Session["value1"];
     for(int j = 0 ; j < V.Count ; j++)
     {
       String str = V[j];
       //ADD str TO GRID VIEW.....
     } 
```

相同的代码适用于 textbox2。

# java - 为什么 FileNotFound 只在 Ice Cream Sandwich 和 JellyBean 中抛出

> ID：11384908
> 
> 赞同：2
> 
> 时间：2012-07-08T16:54:24.323
> 
> 标签：java, android, ical4j

我正在尝试使用 ical4j 库解析一个 icalendar 文件 (.ics)，它可以在所有版本的 Android 上正常工作，但 IceCreamSandwich 和 JellyBean 除外。

有人能告诉我为什么它只在 ICS 和 JB 中抛出 FileNotFound 错误，而不是在其他版本的 android 中吗？

这是我的代码：

```
public class MainActivity extends Activity {
String foo = null;
TextView TextView = null;

String fileName = "ical.ics";
String URL = "https://www.google.com/calendar/ical/m0es4hhj4g9d69ibak88tvoup0%40group.calendar.google.com/public/basic.ics";
StringBuilder b = new StringBuilder();

@Override
public void onCreate(Bundle savedInstanceState) {

    if (android.os.Build.VERSION.SDK_INT > 9) {
          StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
          StrictMode.setThreadPolicy(policy);
        }

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView = (TextView)findViewById(R.id.Hello_World);

    new Download().execute();

  }

 final class Download extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute(){

            TextView.setText("Downloading");

        }

        @Override
        protected Void doInBackground(Void... arg0) {

             try {
                    URL url = new URL(URL);
                    HttpURLConnection c = (HttpURLConnection) url.openConnection();
                    c.setRequestMethod("GET");
                    c.setDoOutput(true);
                    c.connect();

                    FileOutputStream fos = openFileOutput(fileName, MainActivity.MODE_PRIVATE);

                    InputStream is = c.getInputStream();

                    byte[] buffer = new byte[1024];
                    int length = 0;
                    while ((length = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, length);
                    }
                    fos.close();
                    is.close();
                } catch (IOException e) {
                    Log.d("log_tag", "Error: " + e);
                }

            return null;
        }

        @Override
        protected void onPostExecute(Void Result) {

            TextView.setText("Saved...Loading Data");
             new Loadicaldata().execute();

        }

    }

final class Loadicaldata extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

        FileInputStream fis = null;
        try {
            fis =  openFileInput(fileName);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        CompatibilityHints.setHintEnabled(CompatibilityHints.KEY_RELAXED_UNFOLDING, true);
        CompatibilityHints.setHintEnabled(CompatibilityHints.KEY_RELAXED_VALIDATION, true);
        CalendarBuilder builder = new CalendarBuilder();

        try {
            Calendar calendar = builder.build(fis);
            b.append(calendar.getProperty("X-WR-CALNAME").getValue());
            for (Object event : calendar.getComponents(Component.VEVENT)) {
                if (((VEvent) event).getSummary() != null) {
                    b.append("\n\n");
                    b.append(((VEvent) event).getSummary().getValue());
                    b.append(": ");
                    b.append(((VEvent) event).getStartDate().getDate());

                }
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void Result) {

        TextView.setText(b.toString());

    }

} 
```

另外，我注意到如果我使用 Calendar.load(URL url) 它工作正常。所以是文件的保存和加载出了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:01:51.487

尝试删除

```
c.setDoOutput(true); 
```

（正如这篇[博文](http://comments.gmane.org/gmane.comp.handhelds.android.devel/195330)所建议的）

# objective-c - 如何在 Objective-C 中正确访问父类的属性？

> ID：11384910
> 
> 赞同：3
> 
> 时间：2012-07-08T16:54:41.620
> 
> 标签：objective-c, ios

我正在为 iPhone 应用程序的接口工作。我认识到我在不同的视图中有重复的对象，所以我想创建一个父 ViewController。但是现在当我想从子 ViewController 访问这个父 ViewController 的属性时，我遇到了一些问题。具体来说，我希望在每个视图中都有一个通用的 ProgressView，但我希望在视图出现时将其隐藏。当我从子 ViewController 访问 ProgressView.hidden 以获取显示的 ProgressView 时，我没有收到任何错误消息，但在运行程序中没有任何反应。

我的代码如下所示：

父视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ParentViewController : UIViewController{
    UIProgressView *progressView;
}

@property (readwrite) UIProgressView *progressView;

@end 
```

父视图控制器.m：

```
- (void)viewDidLoad
{

    CGRect progressViewFrame = CGRectMake(0, 407, 320, 9);
    progressView = [[UIProgressView alloc] initWithFrame:progressViewFrame];
    progressView.hidden = TRUE;
    [self.view addSubview:progressView];

    [super viewDidLoad];
} 
```

ChildViewController.h：

```
#import <UIKit/UIKit.h>
#import "ToolbarViewController.h"

@interface ChildViewController : ParentViewController

@end 
```

ChildViewController.m:

```
- (void)viewDidLoad
{   
    progressView.hidden = FALSE;

    [super viewDidLoad];
} 
```

如果我这样做，ProgressView Bar 将保持隐藏状态，我不会收到任何错误。我还检查了是否调用了 viewDidLoad 方法，是的，它被调用了。

问候 C4rmel

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:59:53.210

在调用`progressView.hidden = FALSE;`之前调用`[super viewDidLoad];`时，`progressView`尚未初始化；它仍然是`nil`，因此分配无效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T16:59:36.790

ChildViewController.m中，函数调用顺序不正确。通过以下方式更改它：

```
- (void)viewDidLoad
{   
    [super viewDidLoad];
    progressView.hidden = FALSE;    
} 
```

这里调用 super 将创建 progressView。然后你可以隐藏它。否则，您将隐藏一个甚至没有创建的视图。

# python - 使用 Tornado 的 Facebook API 批处理请求

> ID：11384923
> 
> 赞同：0
> 
> 时间：2012-07-08T16:56:44.753
> 
> 标签：python, facebook, facebook-graph-api, tornado

我正在使用 Tornado 向 FB 的 API 发出请求，我想知道是否有可能发送批处理请求。对 Tornado 中 facebook_request() 源代码的第一次检查表明，没有提供批处理请求。有人知道这是否可能吗？

# mysql - 这些 MySQL 列约束有什么问题？

> ID：11384926
> 
> 赞同：0
> 
> 时间：2012-07-08T16:57:01.810
> 
> 标签：mysql

当我尝试在 MySQL 5.5.24 中创建此列时出现语法错误：

```
`count` mediumint unsigned not null default=0 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T17:00:20.397

从 中删除`=`标志`default = 0`：

[http://sqlfiddle.com/#!2/55533](http://sqlfiddle.com/#!2/55533)

```
CREATE TABLE Table1 (
  `count` mediumint unsigned not null default 0
); 
```

请参阅文档：[http ://dev.mysql.com/doc/refman/5.5/en/create-table.html](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)

```
column_definition:
    data_type [NOT NULL | NULL] [DEFAULT default_value]
    ... 
```

# git - 更改 Git 存储库目录位置。

> ID：11384928
> 
> 赞同：258
> 
> 时间：2012-07-08T16:57:23.987
> 
> 标签：git, github, github-for-windows

使用适用于 Windows 的 Git/Github，如果我有一个包含以下目录的存储库：`C:\dir1\dir2`，我需要做什么才能将 repo 文件移动到`C:\dir1`？我显然可以物理复制和粘贴文件，但是在 Git 端我需要做什么？

我在 GitHub 上有这个 repo，我使用 Git Bash 和 GitHub for Windows。

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-07-08T17:31:22.167

只需复制整个工作目录内容（包括隐藏`.git`目录）。这会将整个工作目录移动到新目录，并且不会影响 GitHub 上的远程存储库。

如果您使用的是 GitHub for Windows，您可以使用上述方法移动存储库。但是，当您单击应用程序中的存储库时，它将无法找到它。要解决此问题，只需单击带有 ! 的蓝色圆圈，选择 Find It，然后浏览到新目录。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-07-08T17:01:00.827

我不确定这个问题，所以这里有两个答案：

**如果要移动存储库：**

只需复制整个存储库（及其`.git`目录）。

结构中没有绝对路径，也`.git`没有任何东西阻止它移动，所以移动后你无事可做。所有到 github 的链接（参见 参考资料`.git/config`）都将像以前一样工作。

**如果要在存储库中移动文件：**

只需移动文件。然后添加 中列出的更改`git status`。接下来`commit`会做必要的事情。您会很高兴得知不会复制任何文件：在 git 中移动文件几乎没有成本。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-04-16T09:41:01.193

如果您正在使用[`GitHub Desktop`](https://desktop.github.com/)，则只需执行以下步骤：

1.  关闭`GitHub Desktop`所有其他打开文件的应用程序到您当前的目录路径。
2.  如上所述将整个目录移动到新目录位置。
3.  打开`GitHub Desktop`并单击蓝色（！）“未找到存储库”图标。然后将打开一个对话框，您将看到一个“定位...”按钮，该按钮将打开一个弹出窗口，允许您将其路径指向新位置。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-11-22T13:35:13.943

尽管之前的答案似乎都说您可以移动目录并且 .git 结构中没有绝对路径。在使用 Cygwin 的 git 时，我发现这是不正确的。

当我移动我的 git 存储库时（实际上我从备份中恢复了它，但是由于我的驱动器结构在我的新系统上发生了变化，所以我将它恢复到了另一个驱动器）。我收到一条错误消息，例如

```
fatal: Invalid path '<part_of_the_original_repo_path>': No such file or directory 
```

我使用 grep 发现在我的 .git/config 文件中的 [core] 部分是一个工作树变量，它保存了我的 git repo 的绝对路径。改变这个解决了我的问题。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-04-10T17:07:07.560

虽然问题涉及适用于 Windows 的 Git，但即使在搜索 Visual Studio Tools For Git（VS 2012 中的扩展，VS 2013 中的本机支持）时，这似乎也是最佳结果。

使用上面的解决方案作为指导，我确定 Visual Studio Git Tools 使得在本地移动存储库（甚至是所有存储库的整个目录结构）非常容易。

1) 关闭 Visual Studio。2) 将 Repo 文件夹移动到新位置。3) 打开视觉工作室。打开团队资源管理器。切换到“连接”视图（顶部的插头图标）。3a) 如果 Repos 仍然显示旧路径，请单击 Refresh 以强制更新。4) 本地移动的存储库不应再显示在“*本地 Git 存储库*”中。5) 单击**添加**（不是新建或克隆）并选择要添加的 repo 文件夹。

在第 5 步中，您实际上只是提供了一个搜索路径，搜索会自动包含所有子文件夹。如果您在单个根目录下组织了多个存储库（独立存储库仅具有相同的父文件夹），则选择父级将包括在该根目录下找到的所有存储库。

示例：E:\Repos\RepoA E:\Repos\RepoB E:\Repos\RepoC

在 Visual Studio Team Explorer [Add] > "E:\Repos\" > [Add] 中，这三个将全部返回到本地存储库。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-14T20:22:16.597

我使用 Visual Studio git 插件，并且我想移动一些在 IIS 上运行的网站。一种对我有用的简单方法：

1.  关闭 Visual Studio。

2.  移动代码（包括git文件夹等）

3.  从新位置单击解决方案文件

这将使用已移动的现有本地 git 文件刷新到新位置的映射。回到 Visual Studio 后，我的团队资源管理器窗口会在新位置显示存储库。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-06T10:20:41.663

我使用适用于 Windows 的 Github Desktop，我想移动存储库的位置。如果您移动目录并在软件中选择新位置，则没问题。但是如果你设置了一个错误的目录，你会得到一个致命的错误，并且没有第二次机会重新定位到好的目录。所以要修复它。您必须将项目文件复制到坏目录中，然后通过Github Desktop对其进行重新定位，然后您可以再次将您的项目移动到另一个文件夹中并在软件中进行重新定位。无需为此关闭 Github Desktop，它会实时检查文件夹。

希望这会对某人有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-07T22:15:37.923

这对我不起作用。我将一个仓库从（例如）c:\project1\ 移动到 c:\repo\project1\ 并且 Windows 的 Git 没有显示任何更改。

git status 显示错误，因为其中一个子模块“不是 git 存储库”并显示旧路径。例如（更改名称以保护 IP）

致命：不是 git 存储库：C:/project1/.git/modules/subproject/subproject2 致命：'git status --porcelain' 在子模块子项目中失败

我必须手动编辑子模块中的 .git 文件以指向子模块存储库的正确相对路径（在主存储库的 .git/modules 目录中）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-09T17:09:38.467

来自未来的报告：2018 年 4 月。

我想在我的 Mac 和 Windows 上标准化我的本地存储库，它们最终位于不同的本地文件夹中。

Windows 10 客户端让我经历了“找不到”>“定位”例程，乏味但并不可怕。还需要在Options中更新本地的“Clone path”以备后用。

当我合并 mac 文件夹时，Github 客户端又找到了它们——我什么都不用做！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-29T17:38:44.677

更基于 Git 的方法是使用`cd`或复制和粘贴对本地副本进行更改，然后将这些更改从本地存储库推送到远程存储库。

如果您尝试检查本地 repo 的状态，它可能会显示“未跟踪的更改”，这实际上是重新定位的文件。要强制推送这些更改，您需要使用暂存这些文件/目录

```
$ git add -A
#And commiting them
$ git commit -m "Relocating image demo files"
#And finally, push
$ git push -u local_repo -f HEAD:master 
```

希望能帮助到你。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-23T09:40:12.967

-首先检查当前文件夹中包含 git repo $ **ls -la**或**ls -al的所有目录**

- 识别此文件夹

```
**.git** 
```

- 使用此命令将文件夹移动到您需要的位置，

$ mv .git***这里你要的目录***

注意：>该目录不会影响 git 历史记录远程连接>考虑到您要移动到的目录的树（***路径）***

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-11T13:22:10.133

如果您使用 Visual Studio，请使用 Teams Explorer > Connect 选项卡 > Local Git Repositories 中的 Add 将现有本地存储库添加到可用存储库中。没有大惊小怪，没有麻烦。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-13T18:35:42.440

### 将本地存储库链接到不同的远程存储库

1-**删除与远程存储库的所有连接**：在项目文件夹中：

*   `git rm .git`（从本地存储库中删除所有数据）
*   `git status`（我必须说它与任何东西都没有联系）

2-**链接到新的远程存储库**

*   `git init`启动本地存储库
*   `git remote add origin urlrepository.git`与远程存储库链接
*   `git remote -v`确认它已链接到远程存储库

3-**将更改添加到本地存储库并推送**

*   `git pull`或者`git pull origin master --allow-unrelated-histories`如果本地和远程仓库中的 git 历史记录不同。
*   `git add.`
*   `git commit -m" Message "`
*   `git push -u origin master`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-11T15:13:22.237

如果您**已经移动/修改了**新目的地中的代码，但想继续使用相同的 git repo...

在 Windows 中，您只需将隐藏`.git`文件夹从旧位置复制粘贴到新位置即可。

然后像往常一样使用 git。

# objective-c - Xcode 的 OCUnit 测试能否在 iOS 设备而不是模拟器上运行

> ID：11384931
> 
> 赞同：4
> 
> 时间：2012-07-08T16:58:12.380
> 
> 标签：objective-c, ios, xcode

我正在尝试使用我的 iPad 运行 OCUnit 测试，但发现`Test Succeeded`即使测试实际失败，Xcode（版本 4.3.3）也总是给出消息 - 即调试控制台将测试记录为失败。如果我运行完全相同的测试，但使用模拟器，测试会像我预期的那样失败。

例如，我使用以下测试创建了一个新项目：

```
- (void)testExample
{
    STFail(@"This test should fail");
} 
```

当我在 iPad 上运行它时，Xcode 给出了以下`Test Succeeded`信息：

![iPad](../Images/b6a2b56053f0428ae92d7c4acbd592e2.png)

当我在模拟器上运行它时，Xcode 给了我`Test Failed`消息：

![在此处输入图像描述](../Images/93a22aaf96a10cc29fe8f03994a7d4c8.png)

是否有可能`Test Failed`在 iOS 设备上运行此消息？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:36:16.617

SenTesting 框架并不完整，它不保证可以在设备上工作，但它确实可以在模拟器上正常工作。为了在您的设备上运行单元测试，我建议您使用这个库，

*   [GH单元](https://github.com/gabriel/gh-unit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:05:36.030

我不确定您的要求是什么，但模拟器的工作原理完全相同。因此，在进行这些测试时，请务必将设备插入计算机。是的，您确实需要重新表述您的问题，当您这样做时我会回来。

# 3d - 如何为 3D 角色制作动画？

> ID：11384935
> 
> 赞同：5
> 
> 时间：2012-07-08T16:59:01.157
> 
> 标签：3d, blender, collada

我有一些 3D 角色模型，我想为它们制作动画，以便在我的项目中使用它们。结果应该是一个关键帧动画 collada。我只需要基本的动作：走、跑、瞄准、死……

有什么程序吗？不幸的是，我不能真正使用 Blender 或 3D studio max。我不知道，我还能在哪里问，所以我希望你能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:05:38.680

*   你的模型是什么格式的？
*   它是否已经为动画[装配](http://en.wikipedia.org/wiki/Skeletal_animation)（它是否有骨架和正确的顶点权重）？

无论您的答案是什么 - 您都需要使用 3D 模型/动画编辑器，然后使用正确的 COLLADA 导出器将其导出。除非您正在考虑让其他人为您制作动画（在这种情况下，这不是这些论坛的相关问题），否则您别无选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T18:54:45.863

就像其他人之前所说的那样，您必须至少学习一些 3D 的基本概念和您选择的建模工具。我曾使用过一个站点，即[Mixamo Auto Rigger](http://www.mixamo.com/c/automatic-rigging-for-blender-unity3d?utm_source=unity_blog)。在那里你可以上传你的角色，当且仅当你的角色是人形，牛，狗，..必须留在外面时，他们会从顶点应用一些自动绑定算法

使用此装备，您可以从他们的商店附加一些基本动画（其中一些是免费的），如果您使用他们自己的 collada 导入器，可以将其下载为 collada 文件以便在 Blender 中使用。我这样做曾经花了几欧元，终于让它工作了。

到目前为止，这似乎是您正在寻找的东西，但是：

*   钻机真的很重，因为它包含每个手指和脚趾的骨头
*   骨头的名字不是很有表现力
*   一年前，他们的 collada 进口商刚刚在 Blender 2.4.9 上工作
*   完成这项工作需要您了解在 Blender 中工作的基础知识，否则您将没有机会。

# c# - 易于品牌化的网站架构

> ID：11384936
> 
> 赞同：2
> 
> 时间：2012-07-08T16:59:01.490
> 
> 标签：c#, asp.net, architecture

我最近参加了一个大型企业系统的演示，它的网页可以定制到包含客户端添加的字段的程度。据我了解，他们的架构由以下几层组成：

1.  数据库
2.  网络服务 API
3.  规定布局的 XML 文件
4.  从 XML 文件生成的网页。

当我被要求研究建立一个可以轻松打上品牌的门户网站时，这让我觉得这是一个很好的方法。现在的问题是如何设计它。

我了解数据库和 Web 服务层，但我对在 .NET 中构建网站的各种可能性感到有些困惑。

考虑到可定制性的要求和上面的架构，我是这样理解这些选项的：

1.  Webforms - 我最熟悉的选项，但它本质上是丰富的带有代码隐藏的 HTML。我认为可能需要做很多工作才能使其与 XML 布局的想法一起工作。
2.  WPF - XAML 中间层是内置的，但据我了解，WPF 只能用于浏览器应用程序而不是网站。
3.  Silverlight - 更多地用于构建小程序而不是网站，对吧？
4.  MVC - 这看起来很有趣，但我看到的所有演示也都使用实体框架。在我看来，具有所有自动代码生成功能的 Entity Framework 更适合全新的应用程序。就我而言，我有一个已经存在的非常大的数据库。

如果以上都不合适，我想了一个替代方案。可以使用返回品牌元素的 Web 服务创建一个标准的 Webforms 站点。这与我在顶部描述的不太一样，但足以满足我的需求。

还是我在叫错树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:48:12.393

我认为您对 MVC 的批评不正确。首先，您不需要使用实体框架，其次，即使您使用了，您也可以先使用数据库来生成实体。

您对 WPF 和 Silverlight 的评估在 imo 上非常准确。

你可以用 webforms 做到这一点，但我想你可能会发现用 MVC 架构做这件事会更干净。很简单，如果您使用干净的 HTML 并将所有品牌元素放入外部 CSS 文件（徽标、颜色等），那么您就已经完成了自定义品牌的一半。甚至不同的布局也可能由 CSS 文件定义（尽管您的最终用户可能更难以自定义该外观，因为他们需要非常了解 css）

构建额外的字段可能更困难：

即兴发挥，我正在考虑实现这一点的方式是将我的预定义字段组合在标准数据库布局中（用户表与用户名、密码、名字等）以及对“可自定义字段”的额外支持使用[实体-属性-值模式](http://en.wikipedia.org/wiki/Entity-attribute-value_model)

从那里您将需要开发一个可扩展的系统，以 1\. 使用适当的表单元素（选择、文本输入、文本区域等）从 xml 生成页面。2\. 生成一个通用模型，该模型将读取相同的 XML 文件并能够从已发布的表单接收数据并知道如何将其保存到数据库中（注意在这种情况下，如果它是所有实体属性值，则可能是比标准关系和 EAV 的组合更易于管理）。

您可能希望将 .NET 数据协定视为可序列化的实体，以了解如何将 XML 文件设计为可扩展的，以允许“选择菜单具有以下 3 个选项”或文本输入必须与此匹配正则表达式。

真正关注可扩展性，因为你不能一次构建它。

# sql - 使用 SQL 显示子类别

> ID：11384940
> 
> 赞同：0
> 
> 时间：2012-07-08T16:59:13.000
> 
> 标签：sql, sql-server-2008, nopcommerce

好的，这变得令人困惑，所以我决定写一个新问题。

我需要检查我的类别表中的一行是否是子类别。然后我需要检查孩子属于哪个父类别？

父类别的 categoryID 和 ParentCategoryID 为 0 子类别的 categoryID 和 ParentCategoryID 例如 30。

**类别表：**

```
ID PCID NAME
10  0   Computers
11  10  Software
12  10  Hardware 
```

**这是我尝试过的：**

这将显示父类别（因为 PCID 0 是父类别）：

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID
FROM          Nop_Category
WHERE        (Deleted = 0) 
AND          (Published = 1) 
AND          (ParentCategoryID = 0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T17:09:05.850

自加入回到表中以查找孩子的实际父母。

```
SELECT        c1.CategoryID, c2.ParentCategoryID, c1.Name, c2.Name as ParentName, c1.Published, c1.Deleted, c1.PictureID
FROM          Nop_Category c1
JOIN          Nop_Category c2 on c1.ParentCategoryId = c2.CategoryId
WHERE        (c1.Deleted = 0)  
AND          (c1.Published = 1)  
AND          (c1.ParentCategoryID = 10) 
```

这将返回“计算机”类别的两个孩子。那是你要找的吗？

当然，你可以反过来显示特定父级或所有父级的所有子级：

```
SELECT c.*, p.* -- shortened, but you should pick specific columns

FROM Nop_Category p -- parent
JOIN Nop_Category c ON c.ParentCategoryId = p.CategoryId -- children

WHERE p.ParentCategoryId = 0 -- all top level parents

SELECT c.*, p.* -- shortened, but you should pick specific columns

FROM Nop_Category p -- parent
JOIN Nop_Category c ON c.ParentCategoryId = p.CategoryId -- children

WHERE p.CategoryId = 10 -- only the "Computers" category 
```

或者，如果您只想要“计算机”类别的孩子，请将 ParentCategoryId 更改为 10

```
SELECT        CategoryID, ParentCategoryID, Name, Published, Deleted, PictureID  
FROM          Nop_Category  
WHERE        (Deleted = 0)   
AND          (Published = 1)   
AND          (ParentCategoryID = 10) 
```

# c# - 对象引用未设置为记住我中的对象实例

> ID：11384943
> 
> 赞同：1
> 
> 时间：2012-07-08T16:59:25.213
> 
> 标签：c#, asp.net, cookies, login-control, remember-me

我正在编写代码来存储下次登录控件中记住我的 cookie。如果用户选中了“记住我”复选框，这会将用户的用户名存储在文本框中。我的登录控件是在 LoginView 中设置的。

当我运行程序并填写登录控件中的字段并点击提交（有或没有选中复选框）时，它给了我这个错误：

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 65: 
Line 66:         HttpCookie myCookie = new HttpCookie("myCookie");
Line 67:         if (RememberMe.Checked == true) //here is the line giving error
Line 68:         {
Line 69:             myCookie.Values.Add("username", Login1.UserName);

Line: 67 
```

这是登录控制的代码：

```
 <asp:LoginView ID="LoginView1" runat="server">
        <AnonymousTemplate> 
        <asp:Login ID="Login1" runat="server" onloggingin="Login1_LoggingIn" 
                onloginerror="Login1_LoginError" onauthenticate="Login1_Authenticate" 
                RememberMeSet="True">
            <LayoutTemplate>
                <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
                    <tr>
                        <td>
                            <table cellpadding="0">
                                <tr>
                                    <td align="center" colspan="2">
                                        Log In</td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                            ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                            ToolTip="User Name is required." ValidationGroup="ctl00$Login1">*</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
                                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                            ControlToValidate="Password" ErrorMessage="Password is required." 
                                            ToolTip="Password is required." ValidationGroup="ctl00$Login1">*</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <asp:CheckBox ID="RememberMe" runat="server" 
                                            Text="Remember me next time." />
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" colspan="2" style="color:Red;">
                                        <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" 
                                            ValidationGroup="ctl00$Login1" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </LayoutTemplate>
        </asp:Login>
      </AnonymousTemplate>

      <LoggedInTemplate> 
          <asp:LoginStatus ID="LoginStatus1" runat="server" />

      </LoggedInTemplate>
        </asp:LoginView> 
```

这是后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
    TextBox UserName = (TextBox)Login1.FindControl("UserName");

    if (Request.Cookies["myCookie"] != null)
    {

        HttpCookie cookie = Request.Cookies.Get("myCookie");
        Login1.UserName = cookie.Values["username"];

        //.Attributes.Add("value", cookie.Values["password"]);
        Response.Cookies["myCookie"].Expires = DateTime.Now.AddDays(-1);

    }
} 

protected void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
{
     System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
    TextBox UserName = (TextBox)Login1.FindControl("UserName");

    //Check to see if the current user exists
    if (Membership.GetUser(Login1.UserName) != null)
    {
        //Check to see if the user is currently locked out
        if (Membership.GetUser(Login1.UserName).IsLockedOut)
        {
            //Get the last lockout  date from the user
            DateTime lastLockout = Membership.GetUser(Login1.UserName).LastLockoutDate;
            Response.Write(lastLockout.ToString()); 
            //Calculate the time the user should be unlocked
            DateTime unlockDate = lastLockout.AddMinutes(Membership.PasswordAttemptWindow);

            //Check to see if it is time to unlock the user
            if (DateTime.Now > unlockDate)
                Membership.GetUser(Login1.UserName).UnlockUser();
        }
    }

}

protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
    TextBox UserName = (TextBox)Login1.FindControl("UserName");

    Response.Cookies.Add(new HttpCookie("UserName", Login1.UserName));
    CheckBox RememberMe =  LoginView1.FindControl("RememberMe") as CheckBox;
    //CheckBox RememberMe = (CheckBox).Login1.FindControl("RememberMe"); 

    HttpCookie myCookie = new HttpCookie("myCookie");
    if (RememberMe.Checked == true)
    {
        myCookie.Values.Add("username", Login1.UserName);
        myCookie.Expires = DateTime.Now.AddDays(15);
        Response.Cookies.Add(myCookie);
    }

}

protected void Login1_LoginError(object sender, EventArgs e)
{
    System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
    TextBox UserName = (TextBox)Login1.FindControl("UserName");
    Literal FailureText = (Literal)Login1.FindControl("FailureText");

    //There was a problem logging in the user
    //See if this user exists in the database

    MembershipUser userInfo = Membership.GetUser(Login1.UserName);

    if (userInfo == null)
    {
        //The user entered an invalid username...

        Login1.FailureText = "There is no user in the database with the username " + UserName.Text;
    }
    else
    {
        //See if the user is locked out or not approved
        if (!userInfo.IsApproved)

            Login1.FailureText = "When you created your account you were sent an email with steps to verify your account. You must follow these steps before you can log into the site.";

        else if (userInfo.IsLockedOut)

            Login1.FailureText = "Your account has been temporary locked due to a maximum number of incorrect login attempts.";

        else

            //The password was incorrect (don't show anything, the Login control already describes the problem)
            Login1.FailureText = string.Empty;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:27:13.273

在您的代码隐藏文件中，尝试将 Login1_Authenticate 方法替换为以下代码：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
    TextBox UserName = (TextBox)Login1.FindControl("UserName");

    Response.Cookies.Add(new HttpCookie("UserName", Login1.UserName));

    // IMPORTANT: Notice that LoginView1 is changed to Login1
    CheckBox RememberMe =  Login1.FindControl("RememberMe") as CheckBox; 

    HttpCookie myCookie = new HttpCookie("myCookie");
    if (RememberMe.Checked == true)
    {
        myCookie.Values.Add("username", Login1.UserName);
        myCookie.Expires = DateTime.Now.AddDays(15);
        Response.Cookies.Add(myCookie);
    }

} 
```

我认为您遇到的问题与该方法不分层搜索的事实有关`FindControl`- 也就是说，它只会找到直接包含在父级中的子控件。它不会搜索图层。

在您的情况下，复选框包含在 中`Login1`，而后者又是 的子级`LoginView1`。所以你需要在里面搜索`Login1`，而不是`LoginView1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:15:50.727

```
CheckBox RememberMe =  LoginView1.FindControl("RememberMe") as CheckBox; 
```

您正在尝试使用“RememberMe”ID 找到您的复选框。但请检查此复选框在您的网页上是否具有完全相同的 ID。默认情况下，ASP.NET 不会生成“干净”ID - 它看起来像 ctl00$RemeberMe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:24:48.390

如果问题是由于复选框引用引起的，那么试试这个。如果您使用的是 .NET Framework 4 `ClientIDMode`，则将复选框的属性设置为静态，如下所示。`ClientIDMode="Static"`

# php - 如何使用 facebook api 和 fql 获取朋友的性别

> ID：11384945
> 
> 赞同：1
> 
> 时间：2012-07-08T16:59:36.787
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我是 PHP 和 FQL 的新手。我知道它需要如何完成，但不知道代码。创建一个用户只能在框中看到异性的应用程序。

我开始获取用户的姓名、性别和朋友 ID。现在我需要帮助运行 FQL 并获取所有朋友的性别，并将异性的名字插入 .

```
<?php  
    $fbuser = $facebook->api('/me');//getting users data
    $friends = $facebook->api('/me/friends'); //getting friends data (only gives id and name)
    $userName = $fbuser['name'];//getting users name
    $userGender =  $fbuser['gender'];//getting users gender

    $friendsId = array();//empyt array to insert friends id
    foreach ($friends['data'] as $value);{ //loop
        array_push($friendsId, $value['id']); // not sure if this correct

        $friendsGender = friendsGender ;//run FQL to get the friends gender using the id

        //conditional Statement, if users and friends gender is not same insert the friends name in <select>

?> 
```

* * *

我做了以下但没有奏效。我的第二行脚本正确吗？

```
$friendsInfo = $facebook->api('/me/friends', array('fields' => 'id,name,gender'));
$friendsGender = $friendsInfo['gender'];
echo $friendsGender; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:45:10.000

您可以通过以下方式获取朋友的数据：

```
foreach ($friends['data'] as $value){
    $friend = $facebook->api('/'+$value['id']); 
```

但这是非常低效的。幸运的是，还有另一种解决方案 - 您可以指定希望 facebook 返回哪些字段：

```
$facebook->api('/me/friends', array('fields' => 'id,name,gender')); 
```

PS。它是图形 api 调用；fql 是别的东西

聚苯乙烯。`foreach ($friends['data'] as $value);{`有问题 - 块在循环之外/之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:38:38.740

您可以尝试以下方法：

```
<?php

$access_token = 'AABBCC...';
$param = array(
    'access_token'  => $access_token,
    'method'        => 'GET',
    'q'             => 'SELECT name, sex FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())'
);

$fql = 'https://graph.facebook.com/fql?' . http_build_query($param);

$res = file_get_contents($fql);
$aRes = json_decode($res, 1); 
```

您甚至可以选择过滤添加`WHERE sex = "female" AND uid IN (..)`到您的查询

# javascript - 在我的网站上在 Firefox 中滚动是不正常的

> ID：11384949
> 
> 赞同：0
> 
> 时间：2012-07-08T17:00:02.523
> 
> 标签：javascript, firefox

在设计了我的新网站并使用了大量 javascript 代码后，我绑定了一个事件来滚动并运行一些带有滚动编号的功能，但是在 firefox（特别是使用 firebug Addon）中，滚动我的网站不太流畅，我的一些朋友告诉我滚动在页面中间不起作用这是我的网站 [http://silverboy.ir](http://silverboy.ir)

任何人都知道页面的问题是什么？

# c# - 获取货币汇率

> ID：11384950
> 
> 赞同：1
> 
> 时间：2012-07-08T17:00:11.267
> 
> 标签：c#, winforms, networking

我想做的是，

*   从这个网站获得转换率（我选择了 xe.com，因为它支持所需的货币 AZN <-> USD）
*   例如，如果有可能发送“5 AZN”并得到它等于美元的值。URL 如下所示：[http ://www.xe.com/ucc/convert/?Amount=5&From=AZN&To=USD](http://www.xe.com/ucc/convert/?Amount=5&From=AZN&To=USD)

[我从博客](http://dickchiang.blogspot.com/2010/02/getting-foreign-exchange-currency-with.html)中抓取了以下片段：

```
string xeString = String.Format("http://www.xe.com/ucc/convert.cgi?Amount=1&From={0}&To={1}", srcCurrency, dstCurrency);
System.Net.WebRequest wreq = System.Net.WebRequest.Create(new Uri(xeString));
System.Net.WebResponse wresp = wreq.GetResponse();
Stream respstr = wresp.GetResponseStream();
int read = respstr.Read(buf, 0, BUFFER_SIZE);
result = Encoding.ASCII.GetString(buf, 0, read); 
```

现在，这将返回类似`XE.com: USD to EUR rate: 1.00 USD = 0.716372 EUR`

问题是：

1.  我不知道变量是`buf`什么`BUFFER_SIZE`。
2.  如何获得准确的结果，例如`5 AZN`以美元发送并获得结果（双倍）？[http://www.xe.com/ucc/convert/?Amount=5&From=AZN&To=USD](http://www.xe.com/ucc/convert/?Amount=5&From=AZN&To=USD)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:11:54.570

1.  [http://msdn.microsoft.com/fr-fr/library/system.io.stream.read.aspx](http://msdn.microsoft.com/fr-fr/library/system.io.stream.read.aspx)

    buf 是一个 byte[] 数组，一旦方法返回，它就会包含您刚刚读取的数据。BUFFER_SIZE 是您要读取的数据的大小。如果要读取单个字节，BUFFER_SIZE=1。如果你想读取一千字节的数据，BUFFER_SIZE=1024 等。注意，如果你要求一个太大的缓冲区（例如，当数据为 1KB 时要求 1MB），这并不重要。它将读取一个 KB，然后返回。

2.  您的最终字符串应该如下所示，除非 XE.com 决定更改它：

    XE.com：美元兑欧元汇率：1.00 美元 = 0.716372 欧元

    您可以使用 String 方法去除不需要的东西：整个第一部分

    `(XE.com: USD to EUR rate:)`

    只需使用您的数据构建一个字符串即可轻松删除：

    `(string header = "XE.com: {0} to {1} rate:", currency1, currency2)`

    ，然后调用`String.Replace(header, '')`。从那里，您可以调用`String.Split('=')`，在 '=' 符号处拆分，然后从拆分的字符串中删除货币部分（再次，`String.Replace()`），最后调用`Double.TryParse()`

注意：codesparkle 的方法更简单，因为您基本上跳过了第 1 步。但是 XE.com 没有提供 API：您不能保证返回的字符串是有效的，或者将来某天不会改变。

好的，这里有一些代码：

```
private double GetConvertedCurrencyValue(string inputCurrency, string outputCurrency, double value) 
{
    string request = String.Format(http://www.xe.com/ucc/convert.cgi?Amount={0}&From={1}&To={2}", value, inputCurrency, outputCurrency);

    System.Net.WebClient wc = new System.Net.WebClient();
    string apiResponse = wc.DownloadString(request);    // This is a blocking operation.
    wc.Dispose();

    /* Formatting */
    // Typical response: "XE.com: curr1 to curr2 rate: x curr1 = y curr2"
    // The first part, up until "x curr1" is basically a constant
    string header = String.Format("XE.com: {0} to {2} rate:" inputCurrency, outputCurrency);

    // Removing the header
    // The response now looks like this: x curr1 = y curr2
    apiResponse = apiResponse.Replace(header, "");

    // Let's split the response at '=', to retrieve the right part
    string outValue = apiResponse.Split('=')[1];

    // Getting rid of the 'curr2' part
    outValue = outValue.Replace(outputCurrency, "");

    return Double.Parse(outValue, System.Globalization.CultureInfo.InvariantCulture);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-08T17:13:02.357

删除了旧代码。这是迄今为止最准确的一个 EDIT2：

```
string[] words = result.Split(' ');
Double newresult;

foreach(string i in words)
{
    if(Double.TryParse(i) == true)
    {
        if(!Double.Parse(i).equals(inputValue))
        {
            newresult = Double.Parse(i);
            break;
        }
    }
} 
```

这应该几乎尝试将每个单词解析为双精度并忽略等于输入值的双精度（需要转换的数字）。这仍然不是 100% 准确，就好像他们将其他单独的数字添加到它采用该值的字符串中一样。

# r - r中自己的设计矩阵

> ID：11384962
> 
> 赞同：3
> 
> 时间：2012-07-08T17:01:47.433
> 
> 标签：r, loops, matrix

这是我的数据：

```
sub <- paste ("s", 1:6, sep = "")
mark1a <- c("A", "A", "B", "d1", "A", 2)
mark1b <- c("A", "B", "d1", 2, "d1", "A")
myd <- data.frame (sub, mark1a, mark1b)
myd 
     sub mark1a mark1b
1  s1      A      A
2  s2      A      B
3  s3      B     d1
4  s4     d1      2
5  s5      A     d1
6  s6      2      A 
```

我想创建一对变量（列）的设计矩阵 - mark1a 和 mark1b。设计矩阵将由每个唯一 (c(mark1a, mark1b) 的长度 (unique (c(mark1a, mark1b))) 组成。然后是 1 或 2，具体取决于特定数字是否在列中出现一次或两次，否则为 0 . 以下是预期输出（不是数字）：

![在此处输入图像描述](../Images/55991117b9864c2c0c957c3bfc1180dd.png)

我可以理解如何做到这一点：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:47:50.283

你可以尝试这样的事情：

```
cbind(myd, t(apply(myd, 1, function(x) sapply(unique(unlist(myd[, 2:3])), function(y) sum(x==y)))))
1  s1      A      A 2 0  0 0
2  s2      A      B 1 1  0 0
3  s3      B     d1 0 1  1 0
4  s4     d1      2 0 0  1 1
5  s5      A     d1 1 0  1 0
6  s6      2      A 1 0  0 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T18:37:11.803

首先，确保`mark1a`和`mark1b`列共享相同的级别：

```
all.levels <- levels(myd["mark1a", "mark1b"])
levels(myd$mark1a) <- all.levels
levels(myd$mark1b) <- all.levels 
```

然后您可以计算两个频率表的总和并将其绑定到`myd`：

```
library(plyr)
cbind(myd, ddply(myd, "sub", function(x)table(x$mark1a) + table(x$mark1b))[,-1])
#   sub mark1a mark1b 2 A B d1
# 1  s1      A      A 0 2 0  0
# 2  s2      A      B 0 1 1  0
# 3  s3      B     d1 0 0 1  1
# 4  s4     d1      2 1 0 0  1
# 5  s5      A     d1 0 1 0  1
# 6  s6      2      A 1 1 0  0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T18:33:45.610

我想说@jmsigner 的解决方案是单线的方法，但我通常对那些嵌套`apply`（及其亲属）解决方案感到困惑。

这是一个类似的解决方案：

```
# Identify all the levels in `mark1a` and `mark1b`
mydLevels = unique(c(levels(myd$mark1a), levels(myd$mark1b)))
# Use these levels and an anonymous function with `lapply`
temp = data.frame(lapply(mydLevels, 
                         function(x) rowSums(myd[-1] == x)+0))
colnames(temp) = mydLevels
# This gives you the correct output, but not in the order
# that you have in your original question.
cbind(myd, temp)
#   sub mark1a mark1b 2 A B d1
# 1  s1      A      A 0 2 0  0
# 2  s2      A      B 0 1 1  0
# 3  s3      B     d1 0 0 1  1
# 4  s4     d1      2 1 0 0  1
# 5  s5      A     d1 0 1 0  1
# 6  s6      2      A 1 1 0  0 
```

# ios - info plist 似乎已过时，无法通过 App Store 验证 App

> ID：11384968
> 
> 赞同：0
> 
> 时间：2012-07-08T17:02:29.460
> 
> 标签：ios, xcode, validation, app-store

我最近做了一个应用程序通用的项目，然后我复制粘贴了该项目。有了副本，我做了一个不支持 iPad 的 Lite 版本。

我已经更改了我认为使该项目独一无二所需的一切，独立于它是来自另一个项目的副本：更改了 bundleID（与商店中的第一个版本匹配）、项目名称、显示名称等。我已经删除了 iPad 故事板和所有 iPad 图标。我还从 plist 中删除了 iPad 图标。

现在该应用程序已准备就绪，我正在尝试通过 Apple 对其进行验证。然后它给了我以下错误：

```
Icon specified in the Info.plist not found under the top level app wrapper: Icon-72@2x.png (-19007) 
```

但对于所有“丢失”的图标。在我尝试验证之前，调试器什么也没说，但在验证尝试之后，它现在给了我 6 个警告，与上面的错误相同。每个“缺少图标”发出一个警告。

我试图从 xcode 中删除派生数据，清理项目，重新启动 Xcode 等。但它一直告诉我同样的事情。

任何的想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:43:20.817

如果您通过项目界面从通用更改为仅 iPhone，iPad-Icon 和 iPad-Storyboard 仍在 info.plist 中。

只需将 info.plist 作为 Propertylist 打开并删除错误的条目。

# mysql - 数据库视图中的 MYSQL 查询

> ID：11384969
> 
> 赞同：0
> 
> 时间：2012-07-08T17:02:53.547
> 
> 标签：mysql, database, view

```
SELECT `aversio`.`module`.`module` AS `module`

FROM   
       `projectmodule`
  JOIN `module`  ON `aversio`.`projectmodule`.`moduleID` = `aversio`.`module`.`moduleID`

  JOIN `project` ON `aversio`.`project`.`projectID` = `aversio`.`projectmodule`.`projectID`

WHERE `aversio`.`module`.`actief` = _utf8'1'
  AND `aversio`.`projectmodule`.`verwijderd` = _utf8'0'
  AND `aversio`.`projectmodule`.`verwijderd` = _utf8'0' 
```

> MYSQL 错误：没有注册 'aversio'@'%'

这个错误是什么意思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:20:54.207

这实际上看起来像一个权限问题，就像您尝试连接`aversio`到未配置为允许来自任何 (%) 域的用户的 MySQL 服务器实例。

语法 'aversio'@'%' 看起来像格式 'username'@'host'，mysql 使用 % 作为包罗万象的（任何）主机通配符。

确保您创建了名为 aversio 的 MySQL 用户，并为他们提供了对您的数据库的正确权限。

编辑：

IIRC，该名称的用户可能存在，但具有不同的域（即用户表键控用户和主机的组合。当我将代码从开发服务器移动到登台时，我已经看到这种情况发生服务器并尝试从新主机连接，忘记修改 MySQL 中的权限。

# android - 退出 Android 应用程序按钮 - 真的

> ID：11384970
> 
> 赞同：2
> 
> 时间：2012-07-08T17:02:55.050
> 
> 标签：android, android-activity

我正在为 Android 编写一个基于 GPS 的应用程序。我想要一个按钮来退出将关闭 GPS 的应用程序，但我不希望返回箭头或 home 来关闭进程。

我已经阅读了 [这个](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)线程和许多其他线程，它们很好地解释了为什么我不想做我想做的事情。问题是如果我只是将箭头退出应用程序，则存在后台进程并且 GPS 仍在运行。我知道我可以使用 OnStop() 或 OnPause() 关闭这些，但我不希望返回箭头或 home 停止任何事情。无论用户做什么，我都希望所有 GPS 和处理程序继续运行，除非他在我的主屏幕上点击 EXIT，这会将他带到另一个屏幕，即确认退出并进行清理。这样，如果被错误击中，用户可以在不实际退出的情况下将箭头返回退出屏幕。

请理解，此应用程序将戴上手套在不利条件下在明亮的阳光下使用。阅读任何东西都非常困难，所以我使用 100 高的高对比度字体。除非用户真的希望它停止，否则它无法停止。但只是让它运行会耗尽电池。如果我只是让它运行，我对系统的行为没有任何问题，只是想到电池会耗尽并且我不希望任何简单的按钮按下（这可能是偶然的）来停止服务。我希望杀死这个应用程序的后台进程和关闭手机一样难，但我希望能够做到。

我已经尝试过finish()，它只是一个后退箭头，以及我在过去三个小时的谷歌搜索中看到的所有其他方法。我曾想过将我的退出按钮更改为关闭 GPS 按钮，但是如果用户使用后退箭头退出，他会进入主页并重新打开 GPS。

只是要清楚。我的应用程序有一个基于菜单的主屏幕。如果点击后退箭头，任何有用的页面都将返回到该菜单。菜单项之一是 EXIT。点击该菜单项会将您带到一个退出屏幕，该屏幕有一个退出按钮。如果用户不小心来到这里，他可以返回箭头返回菜单。如果他点击退出页面上的 EXIT 按钮，我可以关闭所有处理程序和 GPS，然后转到手机或平板电脑的主屏幕。至少那是我想要的并且不知道该怎么做。

我使用过类似的应用程序，它们使用 OnStop() 或 OnPause() 来关闭 GPS，它们很痛苦。那不是我想要的。请不要告诉我这是我想做的。我知道该怎么做。这不是我要问的。

谢谢。

更新：

感谢克里斯，我几乎解决了这个问题。我可以使用 EXIT 按钮关闭处理程序和 GPS，然后运行此代码

```
 Intent startMain = new Intent(Intent.ACTION_MAIN);
     startMain.addCategory(Intent.CATEGORY_HOME);
     startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(startMain); 
```

更新#2 我刚刚在进一步测试中发现的问题是应用程序在第二次调用时返回到 EXIT 屏幕。

更新#3 添加完成（）；在 startActivity(startMain) 似乎工作之后。完成后向主菜单返回箭头。希望一旦我安装了所有代码，它仍然可以工作。我删除了上面的第三行，所以我现在拥有的是：

```
 Intent startMain = new Intent(Intent.ACTION_MAIN);
     startMain.addCategory(Intent.CATEGORY_HOME);
     startActivity(startMain);
     finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:52:36.477

有一个非常简单的方法可以解决这个问题。您的主要问题是，如果用户想要退出，您需要 EXIT 活动不回到 MAIN 活动（即：用户退出后，活动堆栈应该为空）。

让 MAIN 活动使用 调用 EXIT 活动`startActivityForResult()`。`RESULT_OK`如果用户真的想退出，则EXIT 活动可以返回，`RESULT_CANCELED`如果用户使用 BACK 按钮返回，它将返回。

然后，MAIN 活动在其中获取结果，如果用户真的想退出，则`onActivityResult()`可以调用，或者如果用户取消退出，则什么也不做。`finish()`

如果用户想退出，这将导致 Activity 堆栈被完全清除，以便用户下次启动应用程序时，它将转到 MAIN Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:13:15.477

> 我曾想过将我的退出按钮更改为关闭 GPS 按钮，但是如果用户使用后退箭头退出，他会进入主页并重新打开 GPS。

这是比试图“退出”进程更合适的解决方案的根源——您只需要处理意外的重新激活。

*   您可以在禁用 GPS 后自动发送 HOME 意图。

*   您可以在那里覆盖后退按钮，并改为发送 HOME 意图（如果 GPS 已关闭）。

*   您可以在关闭 GPS 时在共享首选项中设置一个标志以指示它应该关闭，然后在您将自动打开它的任何活动中检查它。如果您检测到 GPS 应该关闭，而不是您通常的选择，只需显示 GPS 已关闭的对话框并询问他们是否要重新打开它，或“退出”（即进入主屏幕）。

# magento - 在win7上安装magento时发生错误

> ID：11384978
> 
> 赞同：0
> 
> 时间：2012-07-08T17:04:26.370
> 
> 标签：magento, windows-7, xampp

当我键入时出现错误，“处理您的请求时出错”

```
http://localhost/magento/index.php 
```

在火狐中。我无法在 Windows 7 中安装 magento。当我在 magento/var/report 目录中查看此错误时，它会提供有关错误的详细信息

“SQLSTATE[28000] [1045] 用户'root'@'localhost'的访问被拒绝（使用密码：YES）”。请在这件事上帮助我。

我正在使用 Magento 1.7.0.0 和 xampp 1.7.7 。我尝试了很多来解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:46:26.383

检查`/app/etc/local.xml`以确保设置了正确的 MySQL 密码。

# windows - 如何休眠应用程序？

> ID：11384979
> 
> 赞同：4
> 
> 时间：2012-07-08T17:04:46.387
> 
> 标签：windows, process, operating-system

我的问题可能看起来太奇怪了，但我想到了 Windows 休眠的事情，我想知道是否有办法让特定的进程或应用程序休眠。即：当Windows从正常关机/重启启动时，它会正常加载所有启动程序，但除此之外，它还会在关闭计算机之前加载一个具有先前状态的特定程序。

我有关于保留内存位置并在计算机启动时将其取回，但是在 Windows 环境中是否有任何应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T17:30:18.543

那是行不通的。进程的状态几乎从不只包含在进程本身中。gui 应用程序创建存储在与桌面关联的堆中的 user32 和 gdi 对象。它调用影响窗口管理器状态的 Windows。它进行 I/O 调用，导致驱动程序内部的代码运行。这反过来会影响内核池内的分配。将麻烦乘以它打开以与其他进程通信的每个管道或 rpc 通道。以及剪贴板等共享资源。

只有制作整个操作系统状态的快照才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-12T09:56:09.850

现在有多种解决方案，在 Linux 操作系统中：CRIU、CryoPID2、BLCR。

我认为可以使用 docker（适用于 windows 和 linux），但它需要在 docker 中预先打包您的应用程序，这会产生一些开销。

# c# - 从 ASCII 十六进制序列签名的 16 位

> ID：11384980
> 
> 赞同：0
> 
> 时间：2012-07-08T17:04:56.807
> 
> 标签：c#, hex, ascii

> **可能重复：**
> [如何在 C# 中转换十六进制和十进制之间的数字？](https://stackoverflow.com/questions/74148/how-to-convert-numbers-between-hexadecimal-and-decimal-in-c)

我在使用 c# 转换为带符号的 int 时遇到了困难，可以说我有闲置字符串：

```
AAFE B4FE B8FE 
```

这里我们有 3 个样本。每个样本（带符号的 16 位）都写为 4 位（2x2 位/字节）的 ASCII 十六进制序列。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:23:58.093

`Convert`您可以使用接受基数的类中的重载来解析任何标准基数的数字字符串。在这种情况下，您可能需要[这种](http://msdn.microsoft.com/en-us/library/4wxkt09k.aspx)重载。

然后你可以做这样的事情：

```
var groupings = "AAFE B4FE B8FE".Split();
var converted = groupings
    .Select(grouping => Convert.ToInt16(grouping, 16))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:41:31.043

如果您需要指定解析值的字节序（而不是假设它们是 little-endian 字节顺序），那么您需要将每个值`byte`放在结果中的适当位置`short`。

请注意，`HexToByte`如果字符串值的格式不正确，则会引发异常。

```
static byte HexToByte(string value, int offset)
{
   string hex = value.Substring(offset, 2);
   return byte.Parse(hex, NumberStyles.HexNumber);
}

static short HexToSigned16(string value, bool isLittleEndian)
{
   byte first = HexToByte(value, 0);
   byte second = HexToByte(value, 2);

   if (isLittleEndian) 
       return (short)(first | (second << 8));
   else
       return (short)(second | (first << 8));
}

...

string[] values = "AAFE B4FE B8FE".Split();
foreach (string value in values)
{
   Console.WriteLine("{0} == {1}", value, HexToSigned16(value, true));
} 
```

# c - 如何用 Matlab 或 C 控制鼠标指针？

> ID：11384981
> 
> 赞同：-3
> 
> 时间：2012-07-08T17:05:06.630
> 
> 标签：c, matlab, image-processing, mouse, mousemove

我需要在运行程序的窗口底部运行 C 或 Matlab 程序来移动鼠标，例如使用图像处理来移动鼠标指针。如何使用一组代码移动鼠标以及如何单击左右？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:45:30.860

您可以很容易地直接从 Matlab 中使用 Java Robot 类；就像是：

```
robot = javaObjectEDT('java.awt.Robot');
robot.mouseMove(100, 200);
robot.mousePress(16);
robot.mouseRelease(16); 
```

mousePress 和 mouseRelease 的参数是来自 InputEvent 的常量值。[您可以在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#mousePress%28int%29)找到它们的值，[此处](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#java.awt.event.InputEvent.BUTTON1_MASK)的文档会告诉您使用哪些常量（例如 BUTTON1_MASK 或左键单击为 16）。

# c - C如何知道printf的输出字符串大小？

> ID：11384982
> 
> 赞同：2
> 
> 时间：2012-07-08T17:05:16.340
> 
> 标签：c

```
printf("%s%d%c", s, a, c); 
```

该字符串将打印在标准输出上；但是实现如何知道定义 char 数组的大小来保存结果？

或者另一种方法是：使用固定大小的缓冲区，处理格式字符串后面的每个变量参数，如果解释的字符串大小超过缓冲区大小，则将其输出到输出流。这是真的？

顺便说一句，我认为，C++ 中的字符串类型，它的实现使用了堆内存、动态内存分配器，就像`new`, 或`delete`, 这样对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T17:08:43.857

> 该字符串将打印在标准输出上

这是正确的。这是一个*流*，不需要 char[]。只有 sprintf() 需要猜测字符串缓冲区的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:01:52.133

正如其他人所解释的那样，`printf`不需要提前知道某些输出缓冲区的大小，因为它不需要在写入`FILE*`流时分配一个。

但是，您可能想知道：`printf`-family 中*不*写入`FILE*`流的函数呢？`asprintf`比如说，返回分配字符串的非标准函数呢？

函数族的底层实现`printf`可以进行试运行。也就是说，它可以模拟执行操作而无需实际写入内存并跟踪*它将*写入的`char`s数量。一旦计算出该数字，它就可以分配适当大小的缓冲区并真正重复该操作。这就是调用者在需要自己分配缓冲区时会做的事情，例如在调用.*`snprintf`*

 *（您还谈到了缓冲 I/O。虽然`printf`可以使用它，`printf`但不一定知道缓冲区本身（它可能不应该）。您可以将其视为调用`fputc`了很多次，然后将其`char`写入一些缓冲区，如果它已满，则刷新它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:01:44.050

> 但是实现如何知道定义 char 数组的大小来保存结果

只读取到 null 终止字节`'\0'`。无需明确知道`"%s%d%c"`作为传入的`char *`*

# java - Apache CXF Web 服务问题

> ID：11384986
> 
> 赞同：3
> 
> 时间：2012-07-08T17:05:28.757
> 
> 标签：java, web-services, spring, spring-mvc, cxf

我有一个使用 Maven 的多模块项目。在其中一个模块上，我有几个使用 Apache CXF Framework 2.5.4 开发的 Web 服务。目前我有两个“问题”或疑问。

首先，如果我调用应该返回列表的 Web 服务之一的方法，如果列表为空，它将返回“null”而不是空列表。我试图找出可能是什么问题，如果它是我正在使用的 CXF 版本的错误，或者我是否应该使用一些注释来修改方法或响应的定义，但我找不到任何东西。我见过一些人有同样的问题，但没有解决方案。

我想问的另一件事是：我正在使用 MVC 模式开发一个 Web 应用程序。我想知道应该以哪种方式从 Controller 调用 Web 服务，而不是使用 ClasspathXmlCpplicationContext，然后使用 context.getBean()。

例如，客户端 Web 服务之一的 bean 定义是：

```
<jaxws:client id="deviceWSClient"
        serviceClass="..IDeviceWebService"
        address="http://localhost:8080/../DeviceWS" /> 
```

我已经尝试过使用 @Autowired 或 @WebServiceRef 注释。有了这些，它就可以工作，但不能向 Web 服务发出 HTTP 请求，我猜它会从本地存储库中获取依赖项。我想我需要的是在Controller上注入这个bean的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:29:32.360

回答您的问题

**对于您的第一个问题：**如果列表为空，则 CXF 版本 2.6.1 正确处理它 - 服务返回一个空。只是为了证明我有一个以这种方式定义类型的示例服务：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "MemberSearchResponse", namespace="http://bk.org/memberservice/" )
public class MemberSearchResponse {

    @XmlElementWrapper(name="memberDetails")
    private List<MemberDetail> memberDetails; 
```

如果我在上面返回一个空的 memberDetails，则通过网络的 xml 是这样的：

```
 <ns2:searchMemberResponse xmlns:ns2="http://bk.org/memberservice/">
        <ns2:MemberSearchResponse>
           <memberDetails/>
        </ns2:MemberSearchResponse>
    </ns2:searchMemberResponse> 
```

**编辑**

它被正确处理为像上面这样的包装器类型的一部分，但是如果直接返回列表而不是返回包装器类型，则返回 null。

考虑这样定义的 Webservice 接口：

```
@WebMethod(operationName = "searchMember")
    List<MemberDetail> searchMember(@WebParam(name = "MemberSearchRequest") MemberSearchRequest memberSearchRequest); 
```

如果返回的列表是一个空列表，它也会被 CXF 2.6.1 序列化为 null。

**解决方法是使用包装器类型**

**编辑结束**

**对于你的第二个问题：**

您正在以这种方式创建客户端 bean：

```
<jaxws:client id="deviceWSClient"
        serviceClass="..IDeviceWebService"
        address="http://localhost:8080/../DeviceWS" /> 
```

一旦你以这种方式创建了一个 Spring bean，你可以像对待一个普通的 Spring bean 一样对待它，并像使用任何普通的 Spring bean 一样注入它，例如，要么以这种方式注入它：

```
 <bean id="consumerBean" class="...">
    <property name="deviceWS" ref="deviceWSClient">
 </bean> 
```

或使用`@Autowired`

```
@Autowired IDWebService deviceWSClient 
```

或用户`@Resource`

```
@Resource IDWebService deviceWSClient 
```

这些是注入 bean 的常用方法。

我在这个 github 位置有一个示例应用程序，您可以使用它： [https ://github.com/bijukunjummen/memberservice-codefirst.git](https://github.com/bijukunjummen/memberservice-codefirst.git)

只需使用启动服务器`mvn tomcat:run`并运行测试，该测试`org.bk.memberservice.TestCxfIntegrationTest`将向 CXF 服务发出请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:07:33.880

`@WebServiceRef`如果您[在 Spring 论坛上关注此链接，](http://forum.springsource.org/showthread.php?90370-WebServiceRef-injection-of-CXF-jax-ws-client)可能会起作用。在那里，您使用不同的方式进行 jaxws 配置。请参阅列表中的最后一篇文章。

[在这个 SO question](https://stackoverflow.com/questions/6626029/spring-how-to-inject-wsdllocation-in-webserviceref)中讨论了另一种定义客户端的方法。`@Autowired`例如，有一个解决方案，在您提供一些额外配置后，您最终会使用注释。请参阅该问题的最后一个答案。

您提到的另一个问题是关于[此 cxf List 相关问题](https://issues.apache.org/jira/browse/CXF-2627)，其中还告知了解决该问题的解决方案。所以这是一个错误。2.2.7 版本已修复，但在 2.2.9 版本再次出现问题。奇怪的是，直到您的版本 2.5.4 它又回到错误状态。如果它为您解决了问题，您仍然可以尝试解决此问题。

# text - 使用 Liuliu 的笔画宽度变换 (SWT)

> ID：11384989
> 
> 赞同：1
> 
> 时间：2012-07-08T17:05:56.870
> 
> 标签：text, computer-vision, detection

我正在使用[https://github.com/liuliu/ccv](https://github.com/liuliu/ccv)进行名片中的文本检测。问题是召回率很低，名片中的大量文字被遗漏了——有时是部分的，有时是完全的。任何人都可以建议文件`swtdetect.c`中可以提供高召回率的参数值吗？我可以在精度上妥协。

# c++ - 使用 C++ 通过 Internet 连接进行 LAN 唤醒

> ID：11384992
> 
> 赞同：0
> 
> 时间：2012-07-08T17:06:28.680
> 
> 标签：c++, winapi, wake-on-lan

我正在使用适用于 Windows 的 C++ WinAPI 进行编码，我想知道是否可以通过 Internet 连接而不只是 LAN 为客户端计算机（运行 Windows 7）实现 Wake-On-LAN 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:19:05.087

LogMeIn.com 有一个“Wake On LAN”功能，看起来就像这样做 - 我不知道它是否有效，或者它是如何工作的。

如果我这样做，我会：

1) 有一个 Web 服务器（与您的 PC 在同一 LAN 上）侦听“Wake on LAN”请求，

2) 让 Web 服务器发出请求。

恕我直言...

PS：

您可以随时尝试安装 LogMeIn（它是免费的），看看它是否满足您的需求：

[http://www.logmein.com](http://www.logmein.com)

# java - Netty 双向和 n 客户端 UDP

> ID：11384994
> 
> 赞同：1
> 
> 时间：2012-07-08T17:06:51.407
> 
> 标签：java, udp, client-server, netty

我正在尝试编写一个将在许多机器上运行的应用程序，这些机器将通过发送 UDP 数据包流相互通信。通常一台机器会向另一台机器发送许多数据包，直到它们切换并且另一台机器会对另一台机器做同样的事情，依此类推。选择 UDP 是由于应用程序的性质（实时/速度比可靠性更重要）。我也知道 UDP 是一种无连接协议。

通过快速制作原型，我设法创建了一个 NIO 数据报服务器（绑定）和一个 NIO 数据报客户端（连接）。但是，我意识到我只能从客户端向服务器发送一种方式（或者我可能遗漏了什么？）。我无法向相反的方向发送。

此外，由于 UDP 是一种无连接协议，我认为它应该接受许多客户端向它发送数据包（n 客户端到一个服务器），反之亦然（服务器一个接一个或多个 /播送）。

我应该在客户端创建一个服务器来监听不同的端口以实现双向吗？n-client 可以同时向一台服务器发送数据包吗？我只是希望有人向我澄清这件事。不需要示例代码（尽管将不胜感激），您可以给我一些指示。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:12:01.880

对于您所描述的内容，您需要在不同机器上运行的程序的每个实例和每个实例中都有一个服务器线程和一个客户端线程。

创建一个多线程程序，有一个服务线程和一个客户端线程——客户端线程需要知道所有服务器——IP 和端口。服务器只是监听当前机器上的一个端口。

如果您在多台机器上运行相同的程序，您将获得一个 p2p 组。

您还可以在互联网上的免费服务器上设置跟踪器。跟踪程序将位于一个众所周知的 URL 中，并将维护参与机器的列表。程序的每个实例在机器上启动时都会更新跟踪器连接到它所需的详细信息，跟踪器可以维护此数据的列表并与以后出现的任何新实例共享所有数据。

# php - 密码保护目录，但仍允许在主页上使用

> ID：11384995
> 
> 赞同：2
> 
> 时间：2012-07-08T17:07:17.583
> 
> 标签：php, file

我正在尝试将图像移动到服务器端的 tmp 目录，然后将其从 tmp 文件夹发送到客户端，但事情并不完全正常。这是我目前拥有的。

```
//this is where the image resides permanently
$imgdirectory = "../" . $ms . "msimages/" . $img_filename;
//here I'm trying to get the contents of the img from its permanent location    
$content = file_get_contents($imgdirectory);
//here I'm trying to create a new temporary file
file_put_contents('/tmp/img.jpg', $content);

...

echo "img {background:url(\"/tmp/img.jpg\")-" . $xleft . "px -" . $ytop . "px";}"; this is the css trying to use file that is supposed to be in the temp folder 
```

这是页面加载时我得到的css输出

```
img#{width:631px;height:453px;background:url("/tmp/img.jpg")-144px -112px;} 
```

但不幸的是，没有文件，`/tmp/img.jpg`所以某些东西一定不能与`file_put_contents` `404 image not found`

顺便说一句，我没有收到关于`put contents`/tmp 权限的任何错误，

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:11:02.610

使用复制而不是读写文件

```
 bool copy ( string $source , string $dest [, resource $context ] ) 
```

和

```
file_put_contents('/tmp/img.jpg', $content); 
```

将它放在根 tmp 目录下，而不是在您的站点 tmp 目录中。

尝试

```
file_put_contents($_SERVER["DOCUMENT_ROOT"] . 'tmp/img.jpg', $content); 
```

# android - 向旧的 Android 应用程序添加片段

> ID：11384996
> 
> 赞同：0
> 
> 时间：2012-07-08T17:07:18.850
> 
> 标签：android, android-fragments, android-activity

我想升级我的几个 Android 应用程序以使用 Fragments。这是一个基本情况：

我有一个活动和一个 ListActivity。我想使用兼容性包装使用片段转换这些。下面是我在 Activity 的 onCreate 方法中的内容。（ListActivity 有类似的项目，所以我只使用 Activity 作为转换中的示例）。

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    this.getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    setContentView(R.layout.rate);

    Item = getIntent().getExtras().getString("name");
    Category = getIntent().getExtras().getString("category");

    title = (TextView) findViewById(R.id.tvRateItem);
    ratingsBar = (RatingBar) findViewById(R.id.theRatingBar);

    title.setText(Item);

    // Display list of reviews

    new starTotalTask().execute();
    new starRatingTask().execute();

    final EditText etTweetReview = (EditText) findViewById(R.id.etTweetReview);
    Button button = (Button) findViewById(R.id.theRatingBarButton);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            // do stuff

            }
        }
    });

    Button BReviews = (Button) findViewById(R.id.bReviews);
    BReviews.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

        // do stuff 

        }
    });

} 
```

所以你看，我有几个按钮，几个 AsyncTasks，一些从其他活动中获取数据的 getIntents，一些引用 XML 的“小部件”声明。

我已经使用 FragmentActivity（来自兼容性 v4 包）设置了基本框架，其中包含它指向的几个片段。事实上，我有一个 ViewPager，并设置了选项卡。正确的布局已经设置，因为它应该是新的 Fragment 视图。我只是不知道如何移动数据，如上所示。我也了解 onCreateView 是您设置布局的地方。除此之外，其他一切都去哪里了？不要像方向一样寻找代码示例——如果可能的话。

编辑：我的布局基于此： [http ://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

特别感兴趣的是： - RatingsBar 和 TextView（以及其他 xml 引用）去哪里了？- AsyncTask 呢？- 你如何处理在意图中传递数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:34:07.830

几乎所有东西都是一样的。主要区别在于：

1.  您需要扩展`FragmentActivity`代替`Activity`.

2.  您需要调用`getSupportFragmentManager()`而不是`getFragmentManager()`.

3.  您需要调用`getSupportLoaderManager()`而不是`getLoaderManager()`.

4.  兼容性库不支持`ListFragmentActivity`（或其他）。您需要使用 a`FragmentActivity`并`ListView`在您的代码中设置。