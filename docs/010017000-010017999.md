# StackOverflow 问答 10017000-10017999

# android - 安卓：滑动抽屉

> ID：10017008
> 
> 赞同：0
> 
> 时间：2012-04-04T18:17:39.733
> 
> 标签：android, panel, scrollable

我在我的应用程序上使用了一个滑动抽屉（实际上它是一个面板）。我想让那个面板可以滚动。我怎样才能做到这一点？

这是该部分的 xml 代码：

```
 <org.miscwidgets.widget.Panel
        android:id="@+id/rightPanel3"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="right"
        panel:animationDuration="500"
        panel:closedHandle="@android:drawable/ic_menu_directions"
        panel:content="@+id/panelContent"
        panel:handle="@+id/panelHandle"
        panel:linearFlying="true"
        panel:openedHandle="@android:drawable/ic_menu_directions"
        panel:position="right"
        panel:weight="75%p" >

        <Button
            android:id="@+id/panelHandle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="20dip" />

        <TextView
            android:id="@+id/panelContent"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:background="#000000"
            android:gravity="left"
            android:padding="4dip"
            android:text="Directions"
            android:textColor="#eee"
            android:textSize="16dip"
            android:textStyle="bold" />
    </org.miscwidgets.widget.Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:39:06.873

做你正在寻找的东西很简单。您需要将 TextView @+id/panelContent 包装在 ScrollView 中。这将允许滚动打开的 SlidingDrawer 中的内容。这是您要执行的操作的代码。

```
<org.miscwidgets.widget.Panel
    android:id="@+id/rightPanel3"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="right"
    panel:animationDuration="500"
    panel:closedHandle="@android:drawable/ic_menu_directions"
    panel:content="@+id/panelContent"
    panel:handle="@+id/panelHandle"
    panel:linearFlying="true"
    panel:openedHandle="@android:drawable/ic_menu_directions"
    panel:position="right"
    panel:weight="75%p" >

    <Button
        android:id="@+id/panelHandle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="20dip" />

    <ScrollView
        android:id="@+id/panelContent"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        andrid:fillViewport="true" >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:background="#000000"
                android:gravity="left"
                android:padding="4dip"
                android:text="Directions"
                android:textColor="#eee"
                android:textSize="16dip"
                android:textStyle="bold" />
   </ScrollView>
</org.miscwidgets.widget.Panel> 
```

# postgresql - ColdFusion Illudium PU-36 代码生成器

> ID：10017009
> 
> 赞同：2
> 
> 时间：2012-04-04T18:17:46.853
> 
> 标签：postgresql, coldfusion

当使用 ColdFusion Illudium 代码生成器从 postgresql 生成模型时，布尔值在 cfqueryparam 中被转换为 varchar，而 varchar 被转换为 char。有没有人解决这个问题？

[http://cfcgenerator.riaforge.org/](http://cfcgenerator.riaforge.org/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T18:23:15.697

1.打开文件 cfcgenerator/com/cf/model/datasource/postgresql.cfc
2.在第 63 行附近用这个替换 bit/bool

```
 <!--- bit / bool --->
        <cfcase value="bit,boolean">
            <cfreturn "cf_sql_bit" />
        </cfcase>
        <cfcase value="bool">
            <cfreturn "cf_sql_varchar" />
        </cfcase> 
```

3.around line 101 用这个替换字符串

```
<!--- strings --->
        <cfcase value="char">
            <cfreturn "cf_sql_char" />
        </cfcase>
        <cfcase value="varchar,character varying,character">
            <cfreturn "cf_sql_varchar" />
        </cfcase>
        <cfcase value="text">
            <cfreturn "cf_sql_longvarchar" />
        </cfcase> 
```

# ios - 短暂更改 UILabel 中的颜色

> ID：10017021
> 
> 赞同：0
> 
> 时间：2012-04-04T18:19:01.973
> 
> 标签：ios, uilabel

我有一个标签，该标签使用根据服务器接收到的信息计算的值进行更新。根据流量的多少，更新可以快速或随机间隔出现。我想做的是将新计算的值与旧值进行比较，如果它增加了，则将文本更改为绿色，将背景更改为深绿色，如果值减小，则将文本更改为阴影红色和深红色。

这部分很容易做到，我遇到的麻烦是半秒左右后我想将背景和文本更改为它们的默认颜色。我这样做是作为值更改时用户反馈的一部分。

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:29:23.510

标签是 UIView 的子类。假设您有一些方法可以通知您何时发生更改......

```
- (void)someMethodThatNotifiesOfChange {
    // Calculate new values and assume the result means color button green
    [UIView animateWithDuration:0.5 animations:^{
         label.backgroundColor = [UIColor greenColor];
    } completion:^(BOOL finished) {
         if (finished) {
             [UIView animateWithDuration:0.5 delay:5.0 options:nil animations:^{
                   label.backgroundColor = [UIColor clearColor];
         } completion:nil];

    }];
} 
```

这只是将背景更改为绿色，但仍然说明了这一点。这需要 0.5 秒才能变为绿色。然后，当它完成时，它会等待 5 秒，然后需要 0.5 秒才能重新设置动画以清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:31:38.390

如果你想要高级动画，你可以使用[CoreAnimation](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coreanimation_guide/introduction/introduction.html)库，但如果你只是动画**UILabel**属性，你可以使用**UIView**静态方法来做到这一点。你可以这样做：

```
[UIView animateWithDuration:0.3f animations:^{
  label.textColor = [UIColor greenColor];
} completion:^(BOOL finished) {
  [UIView animateWithDuration:0.3f animations:^{
    label.textColor = [UIColor blackColor];
  } completion:nil];
}]; 
```

在第一个动画块中，您可以设置标签的文本颜色（如果需要，还可以设置背景颜色）。在其完成块中，您使用另一个动画设置标签的颜色。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:25:42.887

看看[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)。计时器在很多情况下都很有用！

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:37:20.410

或者，通过 IOS 4，followwing 块会产生相同的效果

```
 [UIView transitionWithView: infoLabelInternet duration:0.3 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
        infoLabelPremium.textColor = kPopoverActiveTextColor;
    } completion:nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-07T13:31:21.510

你也可以这样做：

```
label.backgroundColor = [UIColor greenColor];
[label performSelector:@selector(setBackgroundColor:) withObject:[UIColor clearColor] afterDelay:0.5]; 
```

# c++ - Qt 创建者，错误信息

> ID：10017025
> 
> 赞同：11
> 
> 时间：2012-04-04T18:19:23.763
> 
> 标签：c++, qt, user-interface

我对 QT 有点生疏，但我之前不得不将它用于项目。

我想知道是否可以制作一个弹出窗口，一个禁用高度/宽度的小窗口，以便用户无法展开它。它还应该锁定屏幕，直到他们按下此窗口上的按钮。

我可以在单独的课程中完成所有这些，但我想知道。是否有任何内置的 QT 类有像这样的小弹出窗口，我可以修改？我的意思是只为一个错误信息创建一个类在我看来有点浪费。我正在努力使项目保持小规模。

但是，如果需要创建一个类来实现这一点，那很好。唯一的问题是我不知道如何锁定应用程序窗口，以便您必须在一个窗口中执行某些操作才能返回主应用程序。

我不是要求有人为我输入所有这些代码，只是给我一个链接或其他东西。我一直在寻找它，但我找不到它。干杯。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-04T19:02:14.663

```
QMessageBox messageBox;
messageBox.critical(0,"Error","An error has occured !");
messageBox.setFixedSize(500,200); 
```

上面的代码片段将提供所需的消息框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:27:50.470

对于一个简单的错误消息，我建议您查看[QMessageBox](http://qt-project.org/doc/qt-4.8/qmessagebox.html)（文档包含应该向您展示如何轻松实现所需内容的小示例），它也是模态的。使用 QDialog 来显示简单的错误消息也是可能的，但对于这样一个简单的任务来说可能太多了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T18:25:32.483

我相信您正在寻找的是类似于[QDialog](http://qt-project.org/doc/qt-4.8/QDialog.html)的东西。对话框可以是模态的或非模态的。模态对话“阻止”与调用窗口的交互，直到对话窗口被处理。

您可以继承 QDialog 或检查默认对话框类之一是否足以满足您的需要。

# java - 多线程程序没有加速

> ID：10017026
> 
> 赞同：11
> 
> 时间：2012-04-04T18:19:24.247
> 
> 标签：java, multithreading, performance, parallel-processing, go

我在玩 Go 语言并发，发现了一些对我来说有点不透明的东西。

我写了并行矩阵乘法，即每个任务计算单行乘积矩阵，将源矩阵的相应行和列相乘。

这是Java程序

```
public static double[][] parallelMultiply(int nthreads, final double[][] m1, final double[][] m2) {
    final int n = m1.length, m = m1[0].length, l = m2[0].length;
    assert m1[0].length == m2.length;

    double[][] r = new double[n][];

    ExecutorService e = Executors.newFixedThreadPool(nthreads);
    List<Future<double[]>> results = new LinkedList<Future<double[]>>();
    for (int ii = 0; ii < n; ++ii) {
        final int i = ii;
        Future<double[]> result = e.submit(new Callable<double[]>() {
            public double[] call() throws Exception {
                double[] row = new double[l];
                for (int j = 0; j < l; ++j) {
                    for (int k = 0; k < m; ++k) {
                        row[j] += m1[i][k]*m2[k][j];
                    }
                }
                return row;
            }
        });
        results.add(result);
    }
    try {
        e.shutdown();
        e.awaitTermination(1, TimeUnit.HOURS);
        int i = 0;
        for (Future<double[]> result : results) {
            r[i] = result.get();
            ++i;
        }
    } catch (Exception ex) {
        ex.printStackTrace();
        return null;
    }

    return r;
} 
```

这是围棋程序

```
type Matrix struct {
    n, m int
    data [][]float64
}

func New(n, m int) *Matrix {
    data := make([][]float64, n)
    for i, _ := range data {
        data[i] = make([]float64, m)
    }
    return &Matrix{n, m, data}
}

func (m *Matrix) Get(i, j int) float64 {
    return m.data[i][j]
}

func (m *Matrix) Set(i, j int, v float64) {
    m.data[i][j] = v
}

func MultiplyParallel(m1, m2 *Matrix) *Matrix {
    r := New(m1.n, m2.m)

    c := make(chan interface{}, m1.n)
    for i := 0; i < m1.n; i++ {
        go func(i int) {
            innerLoop(r, m1, m2, i)
            c <- nil
        }(i)
    }

    for i := 0; i < m1.n; i++ {
        <-c
    }

    return r
}

func innerLoop(r, m1, m2 *Matrix, i int) {
    for j := 0; j < m2.m; j++ {
        s := 0.0
        for k := 0; k < m1.m; k++ {
            s = s + m1.Get(i, k) * m2.Get(k, j)
        }
        r.Set(i, j, s)
    }
} 
```

当我使用 nthreads=1 和 nthreads=2 的 Java 程序时，我的双核 N450 Atom 上网本的速度几乎提高了一倍。当我使用 GOMAXPROCS=1 和 GOMAXPROCS=2 的 Go 程序时，根本没有加速！

尽管 Java 代码为`Future`s 使用了额外的存储空间，然后将它们的值收集到结果矩阵中，而不是在工作代码中直接更新数组（Go 版本就是这样做的），但它在多个内核上的执行*速度*比 Go 版本快得多。

特别有趣的是，GOMAXPROCS=2 的 Go 版本同时加载两个内核（htop 在程序运行时显示两个处理器上 100% 的负载），但是计算时间与 GOMAXPROCS=1 相同（htop 仅在一个内核上显示 100% 的负载在这种情况下）。

另一个问题是，即使在简单的单线程乘法中，Java 程序也比 Go 程序更快，但这并不完全出乎意料（考虑到[这里](http://benchmarksgame.alioth.debian.org/)的基准），并且不应该影响多核性能倍增器。

我在这里做错了什么？有没有办法加速 Go 程序？

UPD：看来我发现我做错了什么。我正在使用shell 命令检查 java 程序`System.currentTimeMillis()`和 Go 程序的时间。`time`我错误地将 zsh 输出中的“用户”时间作为程序工作时间，而不是“总”时间。现在我再次检查了计算速度，它也给了我几乎两倍的加速（虽然它比 Java 的要小一些）：

```
% time env GOMAXPROCS=2 ./4-2-go -n 500 -q
env GOMAXPROCS=2 ./4-2-go -n 500 -q  22,34s user 0,04s system 99% cpu 22,483 total
% time env GOMAXPROCS=2 ./4-2-go -n 500 -q -p
env GOMAXPROCS=2 ./4-2-go -n 500 -q -p  24,09s user 0,10s system 184% cpu 13,080 total 
```

看来我要多加注意了。

仍然 java 程序在同一情况下给出的时间要少五次。但我认为这是另一个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T18:53:14.190

您可能正在经历**虚假分享**的影响。简而言之，如果两条数据恰好落在同一个 CPU 缓存行上，那么从在不同 CPU 内核上执行的线程修改这两条数据将触发昂贵的缓存一致性协议。

这种缓存“乒乓”非常难以诊断，并且可能发生在逻辑上完全不相关的数据上，只是因为它们恰好在内存中放置得足够近。100% 的 CPU 负载是错误共享的典型表现——你的内核*确实*在 100% 工作，它们只是没有在你的程序上工作——它们正在同步它们的缓存。

在 Java 程序中，您拥有线程私有数据，直到将其“集成”到最终结果中，这一事实使您免于虚假共享。我对 Go 不熟悉，但是根据您自己的话判断，线程是直接写入公共数组的，这正是可能触发错误共享的那种事情。这是一个完美有效的单线程推理如何在多线程环境中完全相反的示例！

关于该主题的更深入讨论，我强烈推荐 Herb Sutter 的文章：[消除虚假共享](http://drdobbs.com/go-parallel/article/showArticle.jhtml?articleID=217500206)，或讲座：[机器架构：您的编程语言从未告诉过您的事情](http://video.google.com/videoplay?docid=-4714369049736584770)（以及相关的[PDF 幻灯片](http://www.nwcpp.org/Downloads/2007/Machine_Architecture_-_NWCPP.pdf)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:20:11.363

如果您能够在 Linux 环境中运行这些代码，您可以使用[perf](https://perf.wiki.kernel.org/)来衡量虚假共享效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T13:54:47.243

对于 Linux、Windows 32 和同上 64，还有 AMD 的[CodeXL](http://developer.amd.com/tools-and-sdks/heterogeneous-computing/codexl/)和[CodeAnalyst](http://developer.amd.com/tools-and-sdks/heterogeneous-computing/archived-tools/amd-codeanalyst-performance-analyzer/)。由于适用的性能寄存器不同，他们将比英特尔更详细地分析在 AMD 处理器上运行的应用程序。

# sql - SQL删除表中的重复项

> ID：10017027
> 
> 赞同：3
> 
> 时间：2012-04-04T18:19:35.637
> 
> 标签：sql, oracle, oracle10g

我有一个重复的表事务。我想保留具有最小 id 的记录，并根据四个字段 DATE、AMOUNT、REFNUMBER、PARENTFOLDERID 删除所有重复项。我写了这个查询，但我不确定这是否可以以一种有效的方式编写。你认为有更好的方法吗？我问是因为我担心运行时间。

```
DELETE FROM TRANSACTION
WHERE ID IN 
(SELECT FIT2.ID
FROM
(SELECT MIN(ID) AS ID, FIT.DATE, FIT.AMOUNT, FIT.REFNUMBER, FIT.PARENTFOLDERID
FROM EWORK.TRANSACTION FIT
GROUP BY FIT.DATE, FIT.AMOUNT , FIT.REFNUMBER, FIT.PARENTFOLDERID
HAVING COUNT(1)>1 and FIT.AMOUNT >0) FIT1,
EWORK.TRANSACTION FIT2

WHERE FIT1.DATE=FIT2.DATE AND
FIT1.AMOUNT=FIT2.AMOUNT AND
FIT1.REFNUMBER=FIT2.REFNUMBER AND 
FIT1.PARENTFOLDERID=FIT2.PARENTFOLDERID AND 
FIT1.ID<>FIT2.ID) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:34:17.020

做类似的事情可能会更有效

```
DELETE FROM transaction t1
 WHERE EXISTS( SELECT 1
                 FROM transaction t2
                WHERE t1.date = t2.date
                  AND t1.refnumber = t2.refnumber
                  AND t1.parentFolderId = t2.parentFolderId
                  AND t2.id > t1.id ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:39:27.780

```
DELETE FROM transaction
      WHERE ID IN (
               SELECT ID
                 FROM (SELECT ID,
                          ROW_NUMBER () OVER (PARTITION BY  date
                                                          ,amount
                                                          ,refnumber
                                                          ,parentfolderid
                                                ORDER BY ID) rn
                                              FROM transaction)
                WHERE rn <> 1); 
```

我会这样尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:57:55.227

我会尝试这样的事情：

```
DELETE transaction 
FROM transaction
LEFT OUTER JOIN 
   (
       SELECT MIN(id) as id, date, amount, refnumber, parentfolderid 
       FROM transaction
      GROUP BY date, amount, refnumber, parentfolderid
   ) as validRows 
ON transaction.id = validRows.id
WHERE validRows.id IS NULL 
```

# jquery - jQuery - 获取图像的宽度

> ID：10017029
> 
> 赞同：2
> 
> 时间：2012-04-04T18:19:52.767
> 
> 标签：jquery, css, image, width

我正在尝试获取图像的实际宽度...这是有问题的图像

```
<img src="upload/<?php echo $array['image'] ?>" height="200" class="active" /> 
```

这就是我在 jQuery 中尝试过的

```
$(window).bind('load', function() {  
    var img_width = $("#slideshow").find("img").width();
    $("#slideshow img").css("width", img_width);
    alert(img_width);
}); 
```

对于我尝试过的每个图像，警报都会返回 255，这是 div 幻灯片的宽度。这些图像的高度均为 200，它们将具有不同的宽度，我的问题是，我如何获得这些宽度？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:26:17.510

这应该使用所有图像的宽度填充一个数组：

```
$(window).bind('load', function() {  
    var img_widths = [];
    var imgs = $("#slideshow").find("img");
    imgs.each(function() {
      img_widths.push($(this).width());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:37:20.397

我将为您提供您没有要求的答案-但我认为更好的解决方案。

只是因为我看到您在图像本身中使用 PHP - 为什么不使用 PHP 编写图像[大小](http://php.net/manual/en/function.getimagesize.php)信息。它更好，不等待加载。

```
<?php 
// path from document root seems to work best for me
list( , , , $attr) = getimagesize($_SERVER['DOCUMENT_ROOT'] . "/upload/".$array['image']);
?>
<img src="upload/<?php echo $array['image'] ?>" <?php echo $attr; ?> class="active" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:22:47.020

如果`#slideshow`包含多个`img`，您的调用`$("#slideshow").find("img").width();`将只返回第一个`img`宽度，在这种情况下，它必须是 200

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:29:24.803

```
var $imgs = $('img');
$imgs.load(function(){
    console.log($(this).width());
}); 
```

# arrays - 两次声明数组（C99）

> ID：10017030
> 
> 赞同：1
> 
> 时间：2012-04-04T18:19:57.910
> 
> 标签：arrays, c99

我是菜鸟，所以我会简短地说。以下是否合法（C99）？我不想一次存储多个数组。我可以制作一个具有最大所需长度的数组并只使用它的一部分，但我宁愿这样做。

```
int main(){
  double drm[15000];
  //do some stuff
  double drm[14000];  
  //do some other stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:22:04.153

不，你不能那样做。它们需要位于不同的块中。你可以这样做：

```
int main(void)
{
  {
    double drm[15000];
    // do some stuff
  }
  {
    double drm[14000];
    // do some other stuff
  }
} 
```

但是为什么不直接调用一个函数呢？即使您将它们放在不同的块中，您也无法真正保证编译器将对存储执行什么操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:27:31.483

由于数组与 C 中的指针密切相关，因此您也可以使用动态数组。首先，分配一个包含 15 000 个元素的新双精度数组。当您不再需要它时，将其删除。然后创建一个包含 14 000 个元素的新数组。

使用数组后不要忘记释放堆。人们往往会忘记这一点。此外，您应该检查分配是否成功。

```
int main(void)
{
    double *drm = 0;
    drm = (double*)malloc(15000 * sizeof(double));
    // do something
    free(drm);
    drm = (double*)malloc(14000 * sizeof(double));
    // do some other stuff
    free(drm); // don't forget me
} 
```

但是，我同意 Carl Norum 的观点：改用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:29:24.247

您可以使用`malloc`and `free`（或者`realloc`如果您不介意保留数据）：

```
#include <stdlib.h>
int main(void)
{
      double *drm = (double *)malloc(sizeof(double)*15000);
      //do stuff
      free(drm);
      drm = (double *)malloc(sizeof(double)*14000);
      //do other stuff
      free(drm);
} 
```

# c++ - 尝试在 OpenCv 中使用 sift 匹配两个图像，但匹配太多

> ID：10017031
> 
> 赞同：8
> 
> 时间：2012-04-04T18:20:01.407
> 
> 标签：c++, opencv, image-processing, sift

我正在尝试实现一个程序，该程序将输入两个图像，一个是单独的盒子图像，另一个是场景中的盒子。基本上，该程序应该在这两个图像中找到关键点，并将显示与关键点匹配的图像。最后，我希望看到两个输入图像的附加图像以及连接的匹配关键点。我的代码如下：

```
#include <opencv2\opencv.hpp>
#include <iostream>

int main(int argc, const char* argv[]) {
   cv::Mat input1 = cv::imread("input.jpg", 1); //Load as grayscale
   //cv::cvtColor(input1,input1,CV_BGR2GRAY);
   //second input load as grayscale
   cv::Mat input2 = cv::imread("input2.jpg",1);
   cv::SiftFeatureDetector detector;
   //cv::SiftFeatureDetector
   detector(
      1, 1,
      cv::SIFT::CommonParams::DEFAULT_NOCTAVES,
      cv::SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS,
      cv::SIFT::CommonParams::DEFAULT_FIRST_OCTAVE,
      cv::SIFT::CommonParams::FIRST_ANGLE );
   std::vector<cv::KeyPoint> keypoints1;
   detector.detect(input1, keypoints1);
   // Add results to image and save.
   cv::Mat output1;
   cv::drawKeypoints(input1, keypoints1, output1);
   cv::imshow("Sift_result1.jpg", output1);
   cv::imwrite("Sift_result1.jpg",output1);
   //keypoints array for input 2
   std::vector<cv::KeyPoint> keypoints2;
   //output array for ouput 2
   cv::Mat output2;
   //Sift extractor of opencv
   cv::SiftDescriptorExtractor extractor;
   cv::Mat descriptors1,descriptors2;
   cv::BruteForceMatcher<cv::L2<float>> matcher;
   cv::vector<cv::DMatch> matches;
   cv::Mat img_matches;
   detector.detect(input2,keypoints2);
   cv::drawKeypoints(input2,keypoints2,output2);
   cv::imshow("Sift_result2.jpg",output2);
   cv::imwrite("Sift_result2.jpg",output2);
   extractor.compute(input1,keypoints1,descriptors1);
   extractor.compute(input2,keypoints2,descriptors2);
   matcher.match(descriptors1,descriptors2,matches);
   //show result
   cv::drawMatches(input1,keypoints1,input2,keypoints2,matches,img_matches);
   cv::imshow("matches",img_matches);
   cv::imwrite("matches.jpg",img_matches);
   cv::waitKey();
   return 0;
} 
```

问题是有两个多于预期的匹配。我试图调试程序并查看关键点向量内部的内容等等，一切看起来都很好，至少我认为它们是，关键点是通过方向等检测到的。

我正在使用 OpenCV v2.3 并检查了它的文档以了解我正在使用的类的类型，并试图解决问题，但没有奏效。我为此工作了 3 天并没有取得太大的进步。

这是我从程序中得到的输出。

*我应该删除图像。*

我知道这不应该给我太多的匹配，因为我已经在 matlab 中用另一个非常好的实现测试了完全相同的图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T05:41:09.140

而不是使用 BruteForceMatcher 尝试使用 FlannBasedMatcher 并计算关键点之间的最大和最小距离以仅保留良好的匹配。有关示例，请参阅“[使用 FLANN 进行特征匹配”。](http://opencv.itseez.com/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T10:37:24.777

我在 SIFT 中遇到了同样的问题。我使用了 knn 匹配器（K=3）。并迭代地遵循以下程序

```
{
Calculated best affine transform with least square method.

Found out the transform for all keypoints in source image.

Checked out MaxError and MinError.

Points with Error near MaxError are removed from the matching list
} 
```

# sql - SQL Server 2008 IN ALL 查询

> ID：10017035
> 
> 赞同：1
> 
> 时间：2012-04-04T18:20:16.557
> 
> 标签：sql, sql-server, sql-server-2008

有没有一种简单的方法可以在 SQL 中执行 IN ALL 命令？

例如，如果我有：

```
SELECT * FROM [table] WHERE col IN (1,2) 
```

这实际上与以下内容相同：

```
SELECT * FROM [table] WHERE col = 1 OR col = 2 
```

但我真正想要的是：

```
SELECT * FROM [table] WHERE col = 1 AND col = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:22:09.643

```
SELECT id
FROM [table]
WHERE col IN (1,2) 
group by id
having count(distinct col) = 2 
```

# jquery - jQM - 如何创建图像按钮？

> ID：10017038
> 
> 赞同：0
> 
> 时间：2012-04-04T18:20:26.523
> 
> 标签：jquery, jqmobi

我正在尝试创建一个带有图像的按钮。没有文字。我使用了以下，但它不工作。我错过了什么吗？

```
<div data-role="footer" data-position="fixed" style="height:44px">
  <img src="Assets/logo.png" style="vertical-align:middle;margin:4px 4px 4px 4px;" align="left"/>
  <img src="Assets/whatwhyhow/what_off.png" style="vertical-align:middle;margin:10px 4px 20px 4px;padding-left:20px;" align="left"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:25:47.893

```
<a data-role="button" href="#next_page">
<img src="logo.jpg"/>
</a> 
```

# c# - 使用 Linq to Entities 按需“或”，我该怎么做？

> ID：10017039
> 
> 赞同：2
> 
> 时间：2012-04-04T18:20:30.707
> 
> 标签：c#, linq

我有以下按需执行“AND”的查询：

```
var products = // Selecting a list of products in anywhere based in a filter...

foreach (var product in products)
{
    query = query.Where(p => p.Code == product.Code); // with this way, this query make no sense because this happens in any scenario, never a code can be more than one code.
} 
```

那么，我怎样才能执行相同的查询但按需执行“OR”（以便查询有意义）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:23:03.073

使用[包含](http://msdn.microsoft.com/en-us/library/bb352880.aspx)：

```
var codes = products.Select(x => x.Code).ToArray();

query.Where(p => codes.Contains(p.Code)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:24:01.563

您可以使用`IN`for LINQ 的传真：

```
var productCodeList = products.Select(p => p.Code).ToList();

query = query.Where(p => productCodeList.Contains(p.Code)); 
```

它基本上是在说：

```
SELECT   *
FROM     products
WHERE    code IN (<list_of_codes>) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T18:27:29.283

要么使用`Contains`Brad 和 Joe 所写的方法，要么（如果不可能）使用[PredicateBuilder：](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)

```
var predicate = PredicateBuilder.False<Product>();

foreach (var product in products)
{
    var code = product.Code;
    predicate = predicate.Or(p => p.Code == code);
}

var products dataContext.Products.Where(predicate); 
```

# ruby-on-rails - 在 before_update 中更新模型

> ID：10017042
> 
> 赞同：2
> 
> 时间：2012-04-04T18:20:35.853
> 
> 标签：ruby-on-rails, ruby, activerecord, callback

我一直在想，假设我有一个模型，其属性在每个实例中都依赖于其他实例中的相同属性。最好的例子是列表中项目的 order 属性。

更新其余项目的订单属性的最佳位置是 before_update 回调方法，如果您同时拥有项目的旧值和新值。

但是现在，每当您更新列表中的其他项目时，都会再次调用回调，一次又一次......

我正在寻找一种优雅的方式来解决这个问题。

我听说过 :update_without_callbacks 方法，但我不想使用私有方法，而且我觉得添加额外的属性是不必要的。

有什么好主意吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:26:05.493

一种方法是使用`update_all`批量设置所有其他项目的顺序。

这样，您可以有效地将查询数量限制为一个，并防止触发任何回调。

[https://github.com/rails/rails/blob/83e42d52e37a33682fcac856330fd5d06e5a529c/activerecord/lib/active_record/relation.rb#L274](https://github.com/rails/rails/blob/83e42d52e37a33682fcac856330fd5d06e5a529c/activerecord/lib/active_record/relation.rb#L274)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:53:48.560

我觉得你必须跨条目进行这种类型的更新这一事实表明你没有正确地概念化你的问题。为什么不创建一个具有 order 属性的 List 模型，然后在 List 模型和 Item 模型之间创建一对多的关系。这样，只有一个地方可以更新订购信息，不需要复杂而脆弱的回调。

# java - 有没有办法打开展开的 JFace ElementTreeSelectionDialog？

> ID：10017051
> 
> 赞同：2
> 
> 时间：2012-04-04T18:21:07.773
> 
> 标签：java, eclipse, eclipse-plugin, jface

正如标题已经说过的那样......我想打开一个 ElementTreeSelectionDialog ，其中的树已经展开。有什么办法吗？

问候，迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:53:45.510

ElementTreeSelectionDialog 没有开箱即用的此功能，但您可以轻松扩展它以添加此行为。只需将其子类化并覆盖 createTreeViewer 方法。调用此方法的超级版本后，您将获得对话框的初始化 TreeViewer 的句柄。那时，只需使用 TreeViewer.setExpanded() 或 TreeItem.setExpanded() API 就可以根据需要进行扩展。

# ajax - 用 2 个组合框无限加载 ajax 商店

> ID：10017057
> 
> 赞同：0
> 
> 时间：2012-04-04T18:21:32.140
> 
> 标签：ajax, combobox, loading, extjs, store

我在面板上有两个 AddressPanel 类的实例。

```
Ext.define('AddressPanel', {
    extend: 'Ext.tab.Panel',
    initComponent: function() {
        this.items = [
            {
                title: 'Stations',
                itemId : 'pointStation',
                closable: false,
                items:[
                    {
                        xtype: 'combo',
                        fieldLabel: 'station',
                        store: stationStore,
                        queryMode: 'remote',
                        displayField: 'name',
                        valueField: 'id',
                        editable : false
                    } 
```

它们都包含与同一个非常基本的商店相关联的组合框

```
var stationStore = Ext.create('Ext.data.Store', {
fields: ['id', 'name'],
proxy: {
    type: 'ajax',
    url : '/address/stationname'
}
}); 
```

我可以从第一个实例中打开组合并选择一个站点。

然后我可以从第二个实例打开组合并选择另一个站点。

它工作正常。

但是，当我再次从 AddressPanel 的第一个实例打开组合框时，我得到了无穷无尽的加载。

我该如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:45:34.163

我制作了商店的两个副本，并将第一个组合的商店配置设置为商店的第一个副本，将第二个组合的商店配置设置为第二个副本。

它有助于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:23:14.417

您可以将 id 添加到您的组合框，当您从第一个实例转到第二个实例时，您可以重置您的组合框

```
Ext.getCmp('id').reset(); 
```

# gnu-screen - 有没有办法在 GNU Screen 中自动分屏？

> ID：10017058
> 
> 赞同：8
> 
> 时间：2012-04-04T18:21:39.067
> 
> 标签：gnu-screen

我知道这可以通过使用 gnu screen for linux 的 ctrl 命令手动实现，但我似乎无法找到仅使用脚本来执行此操作的方法。

我想要完成的是通过脚本让 gnu 屏幕水平拆分我的终端屏幕并同时在每个屏幕上运行两个单独的命令。

例如使用两个单独的 watch ls 文件夹命令

* * *

[屏幕 1] 观看 ls folder1

* * *

[屏幕 2] 观看 ls folder2

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T20:24:50.550

您的 .screenrc 文件会按顺序解释，有点像自己运行 Ctrl-A 命令。

```
$ cat .screenrc
screen -t folder1 1 watch ls /path/to/folder1
screen -t folder2 2 watch ls /path/to/folder2
sessionname Hello
split
select 1
focus
select 2
startup_message off 
```

# java - 将制表符分隔文件读入 ArrayList 在爪哇

> ID：10017062
> 
> 赞同：0
> 
> 时间：2012-04-04T18:22:03.283
> 
> 标签：java

我正在寻找一种将制表符分隔的棒球统计文件读入二维数组列表的方法。我正在使用扫描仪读取文件，但我想不出如何将一行读入数组列表，在换行处停止，然后将下一行读入下一个数组列表。

这是我第一次尝试创建多维数组列表，我认为这与读取多维数组大致相同。我显然错了。

```
 public static ArrayList dataRead(String fileloc) throws FileNotFoundException {
    ArrayList array = new ArrayList<ArrayList>();
    Scanner s = new Scanner(new File(fileloc)).useDelimiter("\t");
    ArrayList<String> rows = new ArrayList<String>();
    ArrayList cols = new ArrayList();
    while(s.nextLine() != null) {
        cols.add(s.next());
    }
    return array;
} 
```

这是我现在的代码。将每一行读入一个字符串，由返回分隔，然后将每个字符串读入一个适当的数组列表，这是一个更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:25:59.220

您可以使用[opencsv](http://opencsv.sourceforge.net/)并将分隔符设置为制表符。查看我提供的链接上的示例。

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), '\t');
String [] nextLine;
while ((nextLine = reader.readNext()) != null) {
    // nextLine[] is an array of values from the line
    System.out.println(nextLine[0] + nextLine[1] + "etc...");
} 
```

尽管从您的问题中不清楚您在尝试“自己动手”时的实际问题是什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:30:14.823

I'm not sure what the stats look like, but it might be better to use a HashMap which has Key/value pairs instead, but I could be wrong. I don't know what your dataset looks like.

For a start, you can delimit the lines by using the "\t" escape character. For Example:

Scanner s = new Scanner(input).useDelimiter("\t");

Then you can loop through the results and for every pair add it to the map.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:47:10.527

我认为您需要重新考虑您的数据结构，使其更有利于您尝试存储的内容。我建议您创建一个播放器对象并将其存储到数组列表中。

```
public class Player{
    double battavg;
    String name;
    //add more values like rbi, etc.
    public Player(name,battavg){
        this.name=name;
        this.battavg=battavg;
    }
    public String getName(){
        return name;
    }
    public String getBattAvg(){
        return battavg;
    }
    public setBattAvg(double battavg){
        this.battavg=battavg;
    }
    public setName(String name){
        this.name=name;
    }
}

public class baseball{
    public static void main(String[] args){
        ArrayList<Player> list = new ArrayList<Player>();
        //read in values from csv
        list.add(new Player(name,battavg));
    }
} 
```

# c# - 整个网页源代码附加到 XML 文档的末尾

> ID：10017066
> 
> 赞同：0
> 
> 时间：2012-04-04T18:22:40.297
> 
> 标签：c#, xml, kml

我有一个正在创建 KML 文档的 C# ASP 网页，它运行良好。它正在正确生成所有位置。问题是，当它生成文件时，它会将整个 Web 源代码附加到文件中。

下面是生成文件的代码的开头，我猜问题出在某个地方。

```
context.Response.ContentType = "application/vnd.google-earth.kml+xml";
context.Response.AddHeader("Content-Disposition", "attachment;      
filename=Results.kml");          
XmlTextWriter kml = new XmlTextWriter(context.Response.OutputStream,  System.Text.Encoding.UTF8);          
kml.Formatting = Formatting.Indented;         kml.Indentation = 3;              
kml.WriteStartDocument(); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:25:54.400

将文档写入那里后，您需要关闭响应流。可以通过调用来完成`Response.CompleteRequest()`

# html - 创建一个带有空 src 的 iframe，它是“#”的符合标准的替代方案

> ID：10017072
> 
> 赞同：13
> 
> 时间：2012-04-04T18:23:03.077
> 
> 标签：html

我在一个页面上有一个 iframe，我最初需要一个空白的 src，因为我最终用 javascript 设置了 src。

我一直在使用，但是在 Safari 和 Chrome 中遇到了一个问题，这会在 iframe 中加载我的页面的副本。

我在另一个问题中读到了“about:blank”，但是我读到当你将它用作 src 时，IE9 会向服务器发送一个空请求。我还没有找到任何将此 src 列为符合标准的内容。

有没有人可以替代“about:blank”来创建一个空的 iframe？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T18:28:02.447

[`about:blank`是这样做的方法。](https://stackoverflow.com/questions/5946607/is-an-empty-iframe-src-valid)或者，您可以稍后使用 JavaScript[插入整个`<iframe>`元素](https://stackoverflow.com/a/4284632/139010)，而不必担心有效的 "empty" `src`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T08:14:56.357

Google Web Toolkit 中的一个链接器包含一个动态创建的 iframe。它们用作属性`javascript:''`的临时占位符。`src`根据消息来源的评论，原因是*“防止 IE6/7 中的混合模式安全性”。*.

[来源](http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/linker/IFrameTemplate.js?r=8565#173)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T01:12:04.530

作为 about URI 方案标准的一部分，about:blank 可能是最好的选择，因为它有很好的浏览器支持。

> about:blank 返回一个空白的 HTML 文档，其媒体类型为 text/html，字符编码为 UTF-8。这广泛用于将空白页面加载到浏览上下文中，例如 HTML 中的 iframe，然后可以通过脚本对其进行修改。 [你可以在这里看到更多](http://en.wikipedia.org/wiki/About_URI_scheme)

# php - 使用 pchart 和 mysql 创建图表 - 提供的示例中的正确语法

> ID：10017074
> 
> 赞同：1
> 
> 时间：2012-04-04T18:23:06.537
> 
> 标签：php, mysql, syntax, pchart

我正在尝试根据 pchart 提供的示例生成图表。这是我的代码：

```
<?php
/* Include the pData class */

include("pchart/class/pData.class.php");

/* Create the pData object */

$myData = new pData();  

/* Connect to the MySQL database */

$db = mysql_connect("webhost", "user", "pass");

mysql_select_db("database",$db);

/* Build the query that will returns the data to graph */

$Requete = "SELECT * FROM `replies` WHERE `field` LIKE CONCAT ('%', Do you an interest in Green IT, '%')";

$Result  = mysql_query($Requete,$db);

$Yes=""; $No=""; $Undecided="";

while($row = mysql_fetch_array($Result));

{

/* Push the results of the query in an array */
$Yes[]   = $row["Yes"];
$No[] = $row["No"];
$Undecided[]    = $row["Undecided"];
}

/* Save the data in the pData array */

$myData->addPoints($Yes,"Yes");

$myData->addPoints($No,"No");

$myData->addPoints($Undecided,"Undecided");

?> 
```

我得到的错误是：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/a4728588/public_html/charts.php on line 30 
```

这指向：

```
while($row = mysql_fetch_array($Result)); 
```

关于如何解决这个问题以便生成图表的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:26:43.543

您的查询中有语法错误。 `CONCAT()`用于合并字符串。在您的查询中不需要。应该是这样的

```
LIKE '%Do you an interest in Green IT%' 
```

# sql - 具有多个表和 SUM 的 SQL SELECT

> ID：10017075
> 
> 赞同：3
> 
> 时间：2012-04-04T18:23:06.933
> 
> 标签：sql, select

我已经使用这个论坛一段时间了，以找到一些与 SQL 相关的问题的答案。现在是时候问一个我已经尝试了一段时间的问题了。

我有两个表（产品和来源）。

我想创建一个 SQL SELECT 来检索源中的记录列表和产品中的一条附加记录（价格的总和）。我想看到的表应该是这样的：

source.source_id | 来源.位置 | source.source_name | source.source_description | source.source_date | 来源.价格 | 总和（产品.价格） | SUM(product.price) WHERE product.quantity < 1（最后一列是我卡住的地方）。

source.location 和 product.location 是链接的。

此代码有效并给出我想要的结果：

```
SELECT s.source_id
    , s.location
    , s.source_name
    , s.source_description
    , s.source_date
    , s.source_price
    , p2.Total
    , sum(p1.price) as SumProductSold
FROM source s
JOIN product p1
    on s.location = p1.location
JOIN
(
    SELECT location, sum(price) as Total
    FROM product
    GROUP BY location
) p2
    on s.location = p2.location
WHERE p1.quantity < 1
GROUP BY s.source_id, s.location, s.source_name
    , s.source_description, s.source_date, s.source_price, p2.Total 
```

谢谢蓝脚！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:28:49.247

如果没有很多细节，您可以执行以下操作：

```
SELECT s.source_id
    , s.location
    , s.source_name
    , s.source_description
    , s.source_date
    , s.price
    , sum(p.price) as SumProductPrice
    , sum(p.location) as SumProductLocation
FROM source S
JOIN product p
    on S.location = p.location
WHERE p.quantity < 1
GROUP BY s.source_id, s.location, s.source_name
    , s.source_description, s.source_date, s.price 
```

如果您发布更多详细信息，则可以对查询进行微调。

编辑：

您可以再次加入产品表以获取该位置的总数：

```
SELECT s.source_id
    , s.location
    , s.source_name
    , s.source_description
    , s.source_date
    , s.price
    , sum(p1.price) as SumProductPrice
    , p2.Total
FROM source S
JOIN product p1
    on S.location = p1.location
JOIN
(
    SELECT location, sum(price) as Total
    FROM product
    WHERE quantity < 1
    GROUP BY location
) p2
    on S.location = p2.location
WHERE p1.quantity < 1
GROUP BY s.source_id, s.location, s.source_name
    , s.source_description, s.source_date, s.price, p2.Total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:59:40.580

从我收集到的你想要这样的东西：

```
SELECT  source.source_id,
        source.location,
        source.source_name,
        source.source_description,
        source.source_date,
        source.price,
        SUM(product.price) AS Price1,
        SUM(CASE WHEN product.quantity < 1 THEN product.price ELSE 0 END)  AS Price2
FROM    Source
        INNER JOIN Product
            ON Product.Location = Source.Location
GROUP BY 
        source.source_id,
        source.location,
        source.source_name,
        source.source_description,
        source.source_date,
        source.price 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:28:12.387

我不确定我是否完全理解您的表结构，但这样的事情应该有效：

```
Select source.source_id, 
  source.location, 
  source.source_name, 
  source.source_description,
  source.source_date,
  source.price,
  sum(production.location)
from source, product
  where source.location = production.location
  and location < 0
group by source.source_id, 
  source.location, 
  source.source_name, 
  source.source_description,
  source.source_date,
  source.price 
```

# sql - SQL 返回以下正则表达式的结果

> ID：10017076
> 
> 赞同：1
> 
> 时间：2012-04-04T18:23:08.570
> 
> 标签：sql, regex, oracle

我有以下正则表达式：

```
WHERE A.srvc_call_id = '40750564' AND REGEXP_LIKE (A.SRVC_CALL_DN, '[^TEST]') 
```

包含 40750564 的行在列中有“TEST CALL”，`SRVC_CALL_DN`并且`REGEXP_LIKE`似乎没有将其过滤掉。每当我运行查询时，它不应该返回该行。

我的正则表达式模式错了吗？还是 SQL 不接受`[^whatever]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:46:35.780

克拉将表达式锚定到字符串的开头。通过将字母 T、E、S 和 T 括在您正在搜索的方括号中，正如[barju 建议](https://stackoverflow.com/a/10017125/458741)的*任何*这些字符，而不是字符串 TEST。

你说`SRVC_CALL_DN` *包含*字符串`'TEST CALL'`，但你没有说在字符串中的位置。您还说您正在寻找此字符串*不*匹配的位置。这意味着您要使用`not regexp_like(...`

把所有这些放在一起，我认为你需要：

```
AND NOT REGEXP_LIKE (A.SRVC_CALL_DN, '^TEST[[:space:]]CALL') 
```

这会从您的查询中*排除字符串以 .**开头* 的每个匹配项`'TEST CALL'`。但是，如果此字符串可能位于列中的任何位置，则需要删除克拉 - `^`。

这也假设字符串总是大写。如果它是混合大小写或更低，那么您需要再次更改它。类似于以下内容：

```
AND NOT REGEXP_LIKE (upper(A.SRVC_CALL_DN), '^TEST[[:space:]]CALL') 
```

通过大写`SRV_CALL_DN`，您可以确保始终匹配，但确保您的查询可能不会使用此列上的索引。我不会担心这一点，因为正则表达式查询在使用索引方面可能相当糟糕，而且看起来好像`SRVC_CALL_ID`被索引了。

此外，如果它*可能*不包括`'CALL'`您将不得不删除它。最好使用正则表达式使匹配模式尽可能明确；`'CALL'`如果可以的话，请包括在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:26:55.560

尝试使用`'^TEST'`或`'^TEST.*'`

您的正则表达式表示任何不以任何字符开头的字符串：T、E、S、T。

但是你的情况很简单，从 TEST 开始。为什么不使用简单的类似：

```
LIKE 'TEST%' 
```

# python - 在 NLTK 中保存朴素贝叶斯训练分类器

> ID：10017086
> 
> 赞同：49
> 
> 时间：2012-04-04T18:24:06.293
> 
> 标签：python, machine-learning, classification, nltk, naivebayes

对于如何保存训练有素的分类器，我有点困惑。例如，每次我想使用它时重新训练一个分类器显然真的很糟糕而且很慢，我如何保存它并在需要时再次加载它？代码如下，提前感谢您的帮助。我正在使用带有 NLTK 朴素贝叶斯分类器的 Python。

```
classifier = nltk.NaiveBayesClassifier.train(training_set)
# look inside the classifier train method in the source code of the NLTK library

def train(labeled_featuresets, estimator=nltk.probability.ELEProbDist):
    # Create the P(label) distribution
    label_probdist = estimator(label_freqdist)
    # Create the P(fval|label, fname) distribution
    feature_probdist = {}
    return NaiveBayesClassifier(label_probdist, feature_probdist) 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-04T22:05:23.033

保存：

```
import pickle
f = open('my_classifier.pickle', 'wb')
pickle.dump(classifier, f)
f.close() 
```

稍后加载：

```
import pickle
f = open('my_classifier.pickle', 'rb')
classifier = pickle.load(f)
f.close() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T18:39:43.140

我遇到了同样的问题，您无法保存该对象，因为它是一个 ELEFreqDistr NLTK 类。无论如何，NLTK 非常慢。在一个不错的集合上训练花了 45 分钟，我决定实现我自己的算法版本（使用 pypy 运行它或将其重命名为 .pyx 并安装 cython）。使用相同的设置大约需要 3 分钟，它可以简单地将数据保存为 json（我将实现更快/更好的 pickle）。

我开始了一个简单的github项目，在[这里查看代码](https://github.com/luke14free/sentipy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-31T12:30:56.797

重新训练腌制分类器：

```
f = open('originalnaivebayes5k.pickle','rb')
classifier = pickle.load(f)
classifier.train(training_set)
print('Accuracy:',nltk.classify.accuracy(classifier,testing_set)*100)
f.close() 
```

# android - ListView为空时Android显示文本

> ID：10017088
> 
> 赞同：35
> 
> 时间：2012-04-04T18:24:14.820
> 
> 标签：android, android-listview

我正在`TextView`使用 id 设置 a 以`@android:id/empty`在`ListView`. 但是，`TextView`即使 , 中存在项目，也会在`ListView`项目出现之前显示。

我怎样才能使它只有在没有元素时才显示`ListView`？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:dividerHeight="1dp" >
</ListView>

<TextView 
    android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/empty_list" />

</LinearLayout> 
```

PS：我正在使用 a`Loader`和`SimpleCursorAdapter`a `ListFragment`。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-04T18:39:05.683

我猜你正在使用常规或`Fragment`内部。如果是，则必须手动添加空布局。`Activity``ListView``ListView`

例如

```
ListView lv = (ListView)findViewById(android.R.id.list);
TextView emptyText = (TextView)findViewById(android.R.id.empty);
lv.setEmptyView(emptyText); 
```

然后`ListView`，当它的适配器为空时，您将自动使用此视图

如果您使用的是`ListActivity`，则不需要调用`setEmptyView()`，`ListView`因为它会`ListActivity`自动为您管理。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-05T10:34:18.177

设置 a并将其分配给它为空`TextView`时要显示的任何内容：`ListView`

```
ProjectListAdapter projectListAdapter = new ProjectListAdapter();
TextView empty=(TextView)findViewById(R.id.empty);
projectsListView.setEmptyView(empty); 
```

在我的 xml 文件中，我们编写以下代码

```
<TextView
      android:id="@+id/empty"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:gravity="center"
      android:text="Your text here"
      android:textColor="#FFFFFF" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T18:43:12.740

我有这个问题。您必须在代码中明确设置 emptyView。

改变你的`TextView`：

```
<TextView 
    android:id="@+id/emptyResults"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/empty_list" /> 
```

然后在`onCreate()`：

```
listViewResults = (ListView) findViewById(R.id.list);
listViewResults.setEmptyView((LinearLayout) findViewById(R.id.emptyResults)); 
```

上面的代码假设你`ListView`在一个`LinearLayout`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-05T15:03:25.457

我使用`ListFragment`并遇到了同样的问题。我尝试了这个答案的所有变体，但问题没有解决。

所以我找到了我的变体，要覆盖`setEmptyText()`：

```
public class NewsFragment extends ListFragment{
    private TextView emptyText;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        //...

        emptyText = (TextView)view.findViewById(android.R.id.empty);

        //...
    }

    @Override
    public void setEmptyText(CharSequence text) {
        emptyText.setText(text);
    }
} 
```

希望它对某人有所帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-26T06:47:32.260

我知道这有点晚了，但要让它在 XML 中工作，你需要重视`ListView`你的`TextView`match_parent

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:dividerHeight="1dp" >
</ListView>

<TextView 
    android:id="@android:id/empty"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="@string/empty_list" />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-27T17:44:03.150

有一个[很好的例子](https://www.myandroidsolutions.com/2014/09/25/listview-empty-message/)说明如何做到这一点，效果很棒：

> 当您想在空时向用户显示消息时`ListView`，您必须牢记以下 3 个步骤：
> 
> *   在`ListView`声明的 xml`TextView`中，`LinearLayout`在 `ListView`
> *   将`TextView`id 设置为“emptyElement”</li>
> *   在活动内部，将`setEmptyView()`属性设置为 `ListView`
> 
> 1-创建一个xml，它将保存`ListView`并将其命名为“my_activity”和一个名为“MyActivity”的活动。
> 
> 2.  现在，在刚刚创建的 xml “my_activity”中，您必须设置`ListView`. 在 的正下方`ListView`，您必须添加一个`TextView`. 这将用于显示空消息。
> 
> **重要提示：TextView 的 id 必须具有以下名称：“emptyElement”。此名称是强制性的。如果您使用其他名称，则不会显示该消息。**
> 
> 这就是“my_activity” xml 的样子：
> 
> ```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     xmlns:tools="http://schemas.android.com/tools"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:paddingLeft="@dimen/activity_horizontal_margin"
>     android:paddingRight="@dimen/activity_horizontal_margin"
>     android:paddingTop="@dimen/activity_vertical_margin"
>     android:paddingBottom="@dimen/activity_vertical_margin"
>     tools:context=".MyActivity">
> 
>     <ListView
>         android:layout_width="match_parent"
>         android:layout_height="match_parent"
>         android:id="@+id/listView"/>
> 
>     <TextView android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:id="@+id/emptyElement"
>         android:text="The list is empty"
>         android:textStyle="bold"
>         android:textSize="15sp"
>         android:visibility="gone"
>         android:layout_centerInParent="true"
>           android:textColor="@android:color/darker_gray"/>
> 
> </RelativeLayout> 
> ```
> 
> 3.  创建一个用于显示项目的 xml（当列表不为空时），并将其命名为“list_item”。
>     
>     
>     
>     ```
>     <TextView android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:id="@+id/list_item_text_view"
>         android:textSize="20sp"
>         android:padding="10dp"
>         android:layout_marginLeft="5dp"/> 
>     ```
>     
>     
> 4.  为 ListView 将使用的自定义适配器创建一个新的 Java 类，并将其命名为“MyCustomAdapter”。适配器的代码如下：
>     
>     
>     
>     ```
>     import android.content.Context;
>     import android.view.LayoutInflater;
>     import android.view.View;
>     import android.view.ViewGroup;
>     import android.widget.BaseAdapter;
>     import android.widget.TextView;
>     import java.util.ArrayList;
>     
>     
>     public class MyCustomAdapter extends BaseAdapter {
>     private ArrayList<String> mListItems;
>     private LayoutInflater mLayoutInflater;
>     
>     public MyCustomAdapter(Context context, ArrayList<String> arrayList){
>     
>         mListItems = arrayList;
>     
>         //get the layout inflater
>         mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>     }
>     
>     @Override
>     public int getCount() {
>         //getCount() represents how many items are in the list
>         return mListItems.size();
>     }
>     
>     @Override
>     //get the data of an item from a specific position
>     //i represents the position of the item in the list
>     public Object getItem(int i) {
>         return null;
>     }
>     
>     @Override
>     //get the position id of the item from the list
>     public long getItemId(int i) {
>         return 0;
>     }
>     
>     @Override
>     
>     public View getView(int position, View view, ViewGroup viewGroup) {
>     
>         // create a ViewHolder reference
>         ViewHolder holder;
>     
>         //check to see if the reused view is null or not, if is not null then reuse it
>         if (view == null) {
>             holder = new ViewHolder();
>     
>             view = mLayoutInflater.inflate(R.layout.list_item, null);
>             holder.itemName = (TextView) view.findViewById(R.id.list_item_text_view);
>     
>             // the setTag is used to store the data within this view
>             view.setTag(holder);
>         } else {
>             // the getTag returns the viewHolder object set as a tag to the view
>             holder = (ViewHolder)view.getTag();
>         }
>     
>         //get the string item from the position "position" from array list to put it on the TextView
>         String stringItem = mListItems.get(position);
>         if (stringItem != null) {
>             if (holder.itemName != null) {
>                 //set the item name on the TextView
>                 holder.itemName.setText(stringItem);
>             }
>         }
>     
>         //this method must return the view corresponding to the data at the specified position.
>         return view;
>     
>     }
>     
>     /**
>      * Static class used to avoid the calling of "findViewById" every time the getView() method is called,
>      * because this can impact to your application performance when your  list is too big. The class is static so it
>      * cache all the things inside once it's created.
>      */
>     private static class ViewHolder {
>     
>         protected TextView itemName;
>     
>     }
>     } 
>     ```
>     
>     
> 5.  现在去`MyActivity`上课并添加以下代码：
>     
>     
>     
>     ```
>     import android.app.Activity;
>     import android.os.Bundle;
>     import android.widget.ListView; 
>     import java.util.ArrayList;
>     import java.util.List;
>     
>     
>     public class MyActivity extends Activity {
>     
>     @Override
>     protected void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.my_activity);
>     
>         ListView listView = (ListView) findViewById(R.id.listView);
>     
>         // Create an empty array list of strings
>         List<String> items = new ArrayList<String>();
>     
>         // Set the adapter
>         MyCustomAdapter adapter = new MyCustomAdapter(items);
>         listView.setAdapter(adapter);
>     
>         // Set the emptyView to the ListView
>         listView.setEmptyView(findViewById(R.id.emptyElement));
>      }
>      } 
>     ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-25T05:26:40.150

```
 TextView tv=(TextView) view.findViewById(R.id.empty);
 tv.setVisibiliy(View.GONE); 
```

# php - 将接收语音邮件的 iOS 应用程序

> ID：10017096
> 
> 赞同：-2
> 
> 时间：2012-04-04T18:24:55.367
> 
> 标签：php, ios, xcode, web-services, voicemail

是否可以构建一个可以获取用户语音邮件的 iOS 应用程序？据我了解，iOS sdk 不提供此类功能。如果是这样，像“YouMail”这样的应用程序是如何做到的？这个应用程序正在与 AT&T 合作，这个提供商甚至没有任何用于获取语音邮件的 API。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:27:52.620

这些服务（包括 Google 语音）允许在未接听时将来电重定向到特殊号码，方法是使用[GSM 代码](http://geckobeach.com/cellular/secrets/gsmcodes.php)发送该偏好。该号码提供语音邮件服务。

如果不设置自己的服务来代表用户接受来电并让用户拨打 GSM 代码来设置呼叫转移，那么您要尝试做的事情是不可能的。这将需要相当广泛的设置和基础设施，并且可能无法满足您当前的需求。

# registry - 读取注册表问题

> ID：10017097
> 
> 赞同：1
> 
> 时间：2012-04-04T18:25:00.593
> 
> 标签：registry, nant

我确定我在这里遗漏了一些愚蠢的东西..

我正在尝试查询注册表（Windows 7 64 位）以获取我的 Python 安装路径。出于某种原因，我得到：

**找不到注册表路径！- key=3D'SOFTWARE\Python\PythonCore\2.7\InstallPath\';hive=3D'LocalMachine'**

但是，如果我用文档中的示例替换我的密钥，一切正常。安装 Python 后我已经重新启动（不确定这是否有影响）。我在这里想念什么？

我正在使用的任务是：

```
<readregistry verbose="true" key="SOFTWARE\Python\PythonCore\2.7\InstallPath\" property="installDir" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T18:21:20.180

'readregistry' 任务 'key' 属性具有误导性。
它不代表注册表项，而是代表键*和*值的名称。
因此，要从 'HLKM\SOFTWARE\Python\PythonCore\2.7\InstallPath' 键中获取 'installDir' 的值，
然后将其设置在名为 'somePropName' 的属性中，您需要做的是：

```
<readregistry property="somePropName" key="SOFTWARE\Python\PythonCore\2.7\InstallPath\installDir" hive="LocalMachine" /> 
```

# php - 在查询中获取别名的结果

> ID：10017101
> 
> 赞同：0
> 
> 时间：2012-04-04T18:25:11.483
> 
> 标签：php, mysql, mysqli, fetch

我有以下查询：

```
$timecheck = $db->query("SELECT (B <= NOW()) AS var FROM table1 WHERE x='$x'");          
            while ($row = $db->fetch_object()){ 
                if ($row->var != 0){
                        $updatestatus = $db->query("UPDATE table2 SET abc='1' WHERE x='$x'");
                    }
            } 
```

并得到以下错误信息：

```
Fatal error: Call to undefined method mysqli::fetch_object() 
```

与此行有关：

```
while ($row = $db->fetch_object()){ 
```

我也试图使用：

```
while ($row = $db->fetch_object($timecheck)){ 
```

没有任何成功。所以在手册中没有写关于如何通过 fetch-method 使用别名。

如果有人能告诉我我做错了什么，那就太好了。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:30:38.780

试试这个

`Mysqli::query`没有`fetch_object`方法会返回`mysqli_result::fetch_assoc`以获取更多信息，请查看

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

[http://php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

[http://www.php.net/manual/en/mysqli-result.fetch-object.php](http://www.php.net/manual/en/mysqli-result.fetch-object.php)

例子 ：

```
$result = $db->query ( "SELECT (B <= NOW()) AS var FROM table1 WHERE x='$x'" );
while ( $row = $result->fetch_object () ) {
    if ($row->var != 0) {
        $updatestatus = $db->query ( "UPDATE table2 SET abc='1' WHERE x='$x'" );
    }
} 
```

谢谢

:)

# asp.net-mvc-3 - MVC3 的用户不活动

> ID：10017112
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:26:19.300
> 
> 标签：asp.net-mvc-3

如何使用表单身份验证实现这些场景？

如果用户在 40 分钟内处于非活动状态，则必须完全退出。

## 问题

*   我应该如何设置会话超时？
*   如何管理应用程序超时与会话超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:30:53.030

如果用户必须输入密码；他基本上已注销。您可以将会话超时设置为 20。

但是，如果您真的想区分两者，您可以使用上次用户提出请求来更新会话项目。将会话超时设置为 40 分钟。在任何给定时间，如果会话上次更新条目超过 20 分钟，请要求他再次输入密码。

请参阅以下内容以在 MVC 中的每个请求之前执行代码

*   [MVC 3 中的类似 BeginRequest 的过滤器？](https://stackoverflow.com/questions/4879336/beginrequest-like-filter-in-mvc-3)
*   [对 ASP.NET MVC 中的每个请求执行代码](https://stackoverflow.com/questions/1209154/execute-code-on-every-request-in-asp-net-mvc)
*   [如何在 ASP.NET MVC 2 中的每个控制器操作之前执行某些代码？](https://stackoverflow.com/questions/2650269/how-do-i-get-certain-code-to-execute-before-every-single-controller-action-in-as)

# c# - 由 CompositeControl 模板化服务器控件呈现的控件 HTML

> ID：10017113
> 
> 赞同：0
> 
> 时间：2012-04-04T18:26:19.377
> 
> 标签：c#, asp.net, custom-server-controls, composite-controls, itemplate

我正在构建我的第一个自定义服务器控件，它继承自 CompositeControl

控制的原因是能够为我们开发的多个在线应用程序提供一致的内容区域（HTML 元素）。

因此，不必不断输入：

```
<div class="titleBar">
</div>
<div class="actionBar">
</div>
<div class="workspace">
</div> 
```

开发人员可以按如下方式添加服务器控件：

```
<custom:Workspace id="..." runat="server" Title="MyTitle">
   <TitleBar>
      Here is the title
   </TitleBar>
   <ActionBar>
      <asp:button id="..." runat="server" Title="MyButton" />
   </ActionBar>
   <Content>
      <asp:DataGrid id="..." runat="server" />
   </Content>
</custom:Workspace> 
```

[我在http://msdn.microsoft.com/en-us/library/ms178657.aspx](http://msdn.microsoft.com/en-us/library/ms178657.aspx)阅读了这篇文章，它有效，但问题是......我不明白为什么。（有没有人有一个外行版本的文章的链接，该文章描述了如何构建这些类型的服务器控件？）

到目前为止，我注意到的主要事情是 Asp.net 正在渲染一堆 SPAN 元素，这当然是我不想要的。

如何控制新的 CompositeControl 输出的 HTML？

谢谢， 雅克

PS。到目前为止，这是我的代码：

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Security.Permissions;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.Design;
namespace TemplatedServerControl
{
    [DefaultProperty("Title")]
    [ToolboxData("<{0}:Workspace runat=server></{0}:Workspace>")]
    public class Workspace : CompositeControl
    {
        #region FIELDS
        private ITemplate _TitleBarTemplateValue;
        private ITemplate _ActionBarTemplateValue;
        private TemplateOwner _TitleBarOwnerValue;
        private TemplateOwner _ActionBarOwnerValue;
        #endregion
        #region PROPERTY - TitleBarOwner
        [Browsable(false),
        DesignerSerializationVisibility(
        DesignerSerializationVisibility.Hidden)]
        public TemplateOwner TitleBarOwner
        {
            get
            {
                return _TitleBarOwnerValue;
            }
        } 
        #endregion
        #region PROPERTY - ActionBarOwner
        [Browsable(false),
        DesignerSerializationVisibility(
        DesignerSerializationVisibility.Hidden)]
        public TemplateOwner ActionBarOwner
        {
            get
            {
                return _ActionBarOwnerValue;
            }
        }
        #endregion
        #region PROPERTY - Title
        [Bindable(true)]
        [Category("Appearance")]
        [DefaultValue("[Provide the title for the workspace]")]
        [Localizable(true)]
        public string Title
        {
            get
            {
                String s = (String)ViewState["Title"];
                return ((s == null) ? "[" + this.ID + "]" : s);
            }

            set
            {
                ViewState["Text"] = value;
            }
        }
        #endregion
        #region PROPERTY - TitleBar
        [Browsable(false),
        PersistenceMode(PersistenceMode.InnerProperty),
        DefaultValue(typeof(ITemplate), ""),
        Description("Control template"),
        TemplateContainer(typeof(Workspace))]
        public virtual ITemplate TitleBar
        {
            get
            {
                return _TitleBarTemplateValue;
            }
            set
            {
                _TitleBarTemplateValue = value;
            }
        }
        #endregion
        #region PROPERTY - ActionBar
        [Browsable(false),
        PersistenceMode(PersistenceMode.InnerProperty),
        DefaultValue(typeof(ITemplate), ""),
        Description("Control template"),
        TemplateContainer(typeof(Workspace))]
        public virtual ITemplate ActionBar
        {
            get
            {
                return _ActionBarTemplateValue;
            }
            set
            {
                _ActionBarTemplateValue = value;
            }
        }
        #endregion
        #region METHOD - CreateChildControls()
        protected override void CreateChildControls()
        {
            //base.CreateChildControls();
            Controls.Clear();

            _TitleBarOwnerValue = new TemplateOwner();
            _ActionBarOwnerValue = new TemplateOwner();

            ITemplate temp1 = _TitleBarTemplateValue;
            ITemplate temp2 = _ActionBarTemplateValue;

            temp1.InstantiateIn(_TitleBarOwnerValue);
            temp2.InstantiateIn(_ActionBarOwnerValue);

            this.Controls.Add(_TitleBarOwnerValue);
            this.Controls.Add(_ActionBarOwnerValue);
        } 
        #endregion
        #region METHOD - RenderContents(HtmlTextWriter writer)
        protected override void RenderContents(HtmlTextWriter writer)
        {
            base.RenderContents(writer);
        } 
        #endregion
    }

    [ToolboxItem(false)]
    public class TemplateOwner : WebControl
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:48:33.803

额外的`<span>`元素来自`TemplateOwner`控件，因为`WebControl`（`TemplateOwner`继承自）`<span>`默认呈现标签。您可以更改`TemplateOwner`以指定要呈现的标签：

```
public class TemplateOwner : WebControl
{
    public TemplateOwner() :
        base(HtmlTextWriterTag.Div)
    {
    }
} 
```

但是您不需要创建自己的类来使用模板。例如，您可以只使用`Panel`控件：

```
private Panel _TitleBarPanel;
private Panel _ActionBarPanel;

protected override void CreateChildControls()
{
    _TitleBarPanel = new Panel { CssClass = "titleBar" };
    _TitleBarTemplateValue.InstantiateIn(_TitleBarPanel);
    this.Controls.Add(_TitleBarPanel);

    _ActionBarPanel = new Panel { CssClass = "actionBar" };
    _ActionBarTemplateValue.InstantiateIn(_ActionBarPanel);
    this.Controls.Add(_ActionBarPanel);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:27:40.550

一个更简单的解决方案是我们使用 PlaceHolder 控件。与 CompositeControl 一样，这是一个容器控件。然而，与 CompositeControl 不同的是，它根本不呈现任何内容——没有包含或标签。

这确实意味着您不能像使用 CompositeControl 那样以编程方式引用整个控件，但根据您所做的事情，这可能不是必需的。

但是，每个子控件都有一个唯一的 ID，因此您可以以编程方式引用子控件（处理事件等）

# jqgrid - 如何在添加或编辑对话框中使用 jqgrid.net mvc 处理服务器错误

> ID：10017114
> 
> 赞同：0
> 
> 时间：2012-04-04T18:26:25.727
> 
> 标签：jqgrid, jqgrid-asp.net, server-error

我正在试用 jqgrid.net mvc 并注意到在添加或编辑弹出对话框中发生的任何服务器错误最终都会在弹出窗口中呈现整个错误页面，这不是很漂亮。有谁知道是否可以更好地处理这个问题，也许只是在对话框中放一条简短的消息，有点像处理验证错误的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:08:30.117

您可以使用[errorTextFormat](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)。[您可以在answer](https://stackoverflow.com/a/5103844/315935)和[answer](https://stackoverflow.com/a/6803206/315935)中找到一些代码片段。我建议您以 JSON 格式发布 HTTP 错误消息。例如，对于 ASP.NET MVC，您可以使用[这里](https://stackoverflow.com/a/5501644/315935)`HandleJsonExceptionAttribute`描述的。它将严重代码中所有未处理的异常转换为 JSON 响应而不是默认的 HTML 响应。仅当客户端在服务器响应中请求 JSON 格式时，您才可以轻松修改代码以提供 JSON 响应。您可以轻松解析 JSON 响应，但即使在纯 HTML 响应的情况下，您也只能获得与 jQuery 选择器相关的响应中最重要的部分，并从您的回调实现中返回。`errorTextFormat`

# solr - SOLR 忽略查询中的“NOT”子句

> ID：10017115
> 
> 赞同：2
> 
> 时间：2012-04-04T18:26:28.270
> 
> 标签：solr

我们有一个简单的域

```
FirstName_s:"Bob" 
```

返回 40 个文档，并且

```
-Department_t:"Ninjas" 
```

返回所有文件（我们没有忍者部门）。

我们期望查询

```
(FirstName_s:"Bob") OR (-Department_t:"Ninjas") 
```

退回所有文件，但它只退回了原始的 40 份文件。

我们尝试了几种不同的排序，尝试使用“NOT”而不是“-”都无济于事。

这是预期的行为吗？也许更重要的是，我们如何获得我们期望的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:42:13.460

我偶然发现了[https://issues.apache.org/jira/browse/SOLR-2209](https://issues.apache.org/jira/browse/SOLR-2209)所以括号可能会导致错误。这行得通吗？

```
FirstName_s:"Bob" OR -Department_t:"Ninjas" 
```

以某种方式重写查询，它不会包含 OR（使用[De_Morgan 定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)）有帮助吗？

```
-(-FirstName_s:"Bob" AND Department_t:"Ninjas") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:19:30.370

事实证明，这是多值字段的问题，并且它们的行为方式不是。

我们必须将所有对多值字段的非查询修改为

```
(*:* -department_t:"Ninjas") 
```

# ios - 解码 AirPlay 镜像协议

> ID：10017122
> 
> 赞同：20
> 
> 时间：2012-04-04T18:26:49.330
> 
> 标签：ios, macos, ipad, airplay, fairplay

我希望我的应用程序将我的 iPad 2 的显示镜像到我的 Mac。

我已经发布了`_airplay._tcp`服务并且正在监听端口`7100`。该应用程序显示在`AirPlay`菜单中，`Mirroring`选项也在那里。视频和音频流完美运行。

但我不知道如何解码 FairPlay 加密 ( `POST /fp-setup`) 以支持 AirPlay 镜像。我参考了[http://www.aorensoftware.com/blog/2011/08/20/exploring-airplay-mirroring-internals/](http://www.aorensoftware.com/blog/2011/08/20/exploring-airplay-mirroring-internals/)。如果有人对如何做到这一点有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:29:44.893

查看 AirServer -> 他们已经完成了这项工作并且它完美无缺（几乎）..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T14:13:27.863

他们正在使用 AES 加密——部分正确。但是 fp-setup 握手中的代码很长，（First FP-SETUP，Second FP-SETUP，fpaeskey 加密）以及真正的解密部分是Apple定制的模块。

# c# - Visual Studio Installer 组件卸载顺序

> ID：10017124
> 
> 赞同：0
> 
> 时间：2012-04-04T18:26:50.420
> 
> 标签：c#, installation, windows-installer

我们的项目有一个 Windows 服务和 UI 组件。在卸载时，Windows 安装程序会尝试自动终止进程。我希望安装程序先终止 UI，然后再进行服务，以便 UI 在服务停止时不会引发异常。

我们如何更改 Visual Studio Installer 项目中进程先出的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T06:21:36.017

您不能更改此顺序，因为它是由 Windows Installer 自动生成的。

但是，您可以尝试在[InstallValidate操作之前使用](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369546%28v=vs.85%29.aspx)[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066%28v=vs.85%29.aspx)来停止您的应用程序进程。这样，Windows Installer 将不再尝试停止进程，而只会执行卸载。

# c# - ArrayList 和 IEnumerable 查询

> ID：10017126
> 
> 赞同：1
> 
> 时间：2012-04-04T18:26:56.133
> 
> 标签：c#

为什么以下 DisplayContents 对 ArrayList 不起作用（不会编译），因为它继承了 IEnumerable 形式）

```
public class Program
    {
        static void Main(string[] args)
        {
            List<int> l = new List<int>(){1,2,3};
            DisplayContents(l);

            string[] l2 = new string[] {"ss", "ee"};
            DisplayContents(l2);

            ArrayList l3 = new ArrayList() { "ss", "ee" };
            DisplayContents < ArrayList>(l3);

            Console.ReadLine();
        }

        public static void DisplayContents<T>(IEnumerable<T> collection)
        {
            foreach (var _item in collection)
            {
                Console.WriteLine(_item);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:30:31.903

`ArrayList`实现`IEnumerable`，但不是泛型`IEnumerable<T>`。这是意料之中的，因为`ArrayList`既不是通用的，也不是绑定到任何特定类型的。

您需要将`DisplayContents`方法的参数类型从`IEnumerable<T>`to更改为`IEnumerable`并删除其类型参数。您收藏的项目被传递给`Console.WriteLine`，它可以接受任何`object`。

```
public static void DisplayContents(IEnumerable collection)
{
    foreach (var _item in collection)
    {
        Console.WriteLine(_item);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:30:14.853

[好吧，对文档](http://msdn.microsoft.com/en-us/library/system.collections.arraylist%28v=vs.71%29.aspx)的快速检查告诉我，`ArrayList`它没有实现`IEnumerable<T>`，而是实现了`IEnumerable`，这是有道理的，因为`ArrayList`从泛型之前的日子开始，这是一个残留的人工制品，今天几乎没有真正的用途。

根本没有理由使用`ArrayList`。您至少可以使用 a `List<object>`，但这解决了什么问题？除非您绝对需要一组不/不能实现通用接口并且不能分组为新类型的随机类型，否则请使用更具体的泛型参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:30:04.367

`ArrayList`实现`IEnumerable`，但不是通用的`IEnumerable<T>`

更新：这将起作用：

```
 public static void DisplayContents(IEnumerable collection)
 {
     foreach (var _item in collection)
         Console.WriteLine(_item);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:34:17.820

```
ArrayList l3 = new ArrayList() { "ss", "ee" };             
DisplayContents<ArrayList>(l3); 
```

看看你的代码。您正在传递`DisplayContents()`一个字符串列表，但您告诉它期望一个 ArrayLists 列表。

您可能只想调用`DisplayContents<string>(l3)`，但正如其他人已经提到的那样，这行不通，因为 ArrayList 没有实现泛型`IEnumerable<T>`，它只实现`IEnumerable`.

你可以改为打电话

```
DisplayContents<string>((string[])l3.ToArray(typeof(string))); 
```

这将起作用，因为`string[]`实现`IEnumerable<string>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T11:34:32.447

扩展方法怎么样？

```
/// <summary>
/// Projects any <see cref="IEnumerable"/>, e.g. an <see cref="ArrayList"/>
/// to an generic <see cref="IEnumerable{T}"/>.
/// </summary>
/// <typeparam name="T">The type to project to.</typeparam>
/// <param name="source">The source sequence.</param>
/// <param name="map">The mapping function.</param>
/// <returns>A sequence of <typeparamref name="T"/>.</returns>
public static IEnumerable<T> Select<T>(this IEnumerable source, Func<object, T> map)
{
    foreach(var item in source)
    {
        yield return map(item);
    }
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-04T18:33:07.940

如果您将呼叫线路更改为此，它可以工作：

```
 DisplayContents(l3.ToArray()); 
```

# sql - 使用连接语句从表中分配局部变量

> ID：10017127
> 
> 赞同：1
> 
> 时间：2012-04-04T18:26:57.487
> 
> 标签：sql, sql-server-2008, stored-procedures, join

我正在使用 SQL，我似乎无法终生解决这个问题。

我的存储过程中有一个名为`@curType`. 我有两张桌子，DTXR 和 DP。DP 包含列`type`和`programID`。DTXR 包含列`programID`和`QEI`。存储过程被传递`QEI`，我需要`type`从表 DP 中获取 并将其分配给局部变量`@curType`。

所以，我目前有

```
select @curType = [Type] From DP d 
       Join DTXR x on d.ProgramId = x.ProgramID
       where x.QEI = @p_QEI. 
```

@p_QEI 是传递给存储过程的变量。

我遇到的问题是这似乎没有设置@curType。如果我像这样手动设置程序ID，它会起作用：

```
select @curType = [Type] from DP Where DP.ProgramId = 120 
```

但是 join 语句似乎将 @curType 设置为 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:29:59.187

实际上，这应该有效。我会检查以确保以下内容甚至返回任何内容（如果返回，第一个结果是什么？）：

```
 select [Type] From DP d 
   Join DTXR x on d.ProgramId = x.ProgramID
   where dtxr.QEI = @p_QEI 
```

这应该是问题所在，因为[这里有一个小提琴证明连接没有什么不同](http://sqlfiddle.com/#!3/d53e2/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:07:03.350

`WHERE`由于子句，我不确定您的代码是否应该有效。国际海事组织线：

```
 where dtxr.QEI = @p_QEI 
```

应该看起来像：

```
 where x.QEI = @p_QEI 
```

我的第二个提示，请检查`@p_QEI`变量，它是否包含正确的值？

# youtube - 从 YouTube 视频页面抓取图像

> ID：10017128
> 
> 赞同：2
> 
> 时间：2012-04-04T18:27:07.243
> 
> 标签：youtube, web-scraping

当我复制一个 YouTube 链接，例如这个链接 (http://www.youtube.com/watch?v=_Ka2kpzTAL8)，并将其粘贴到 Facebook 状态更新中时，Facebook 会以某种方式抓取视频的静止画面。我想建立一个做同样事情的功能，但我真的不知道如何找到图像。

谁能指出我正确的方向？我对 PHP、Python、Ruby 或 Perl 持开放态度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:40:38.170

好的，找到了！

获取此链接：`http://i4.ytimg.com/vi/something/hqdefault.jpg`并用 Youtube 上的视频 ID 替换某些内容。对于较小的图像，只需删除`hq`URL 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T16:17:23.780

我也可以确认这个实现是两种方式。我用它一个 Ruby 屏幕刮板（搜索应用程序）@ [http://stripsearch.me](http://stripsearch.me)

```
 # search10b Youtube crawl9
            @search10a1 = search_array[1]
            if search_array[1].present?
                @results_9b = []
                params_9b = search_array[1].split.map(&:downcase).join('+')
                search_url_yt_9b = url_9b << params_9b

                doc_9b = Nokogiri::HTML(open(search_url_yt_9b).read, nil, 'utf-8')

                entries_9b = doc_9b.css('.yt-ui-ellipsis-2.spf-link')

                if entries_9b.size != 0

                    entries_9b.each do |entry_9b|
                        title = entry_9b['title']
                        li = "https://www.youtube.com"
                        nk = entry_9b['href']
                        link = li << nk
                        img_src = entry_9b['href']
                        uid = img_src.split('=').last
                        precede_url = "http://i4.ytimg.com/vi/"
                        append_url = "/hqdefault.jpg"
                        img_url = precede_url << uid << append_url
                        precede_tag = "<img src="
                        append_tag = ">"
                        img = precede_tag << img_url << append_tag
                        @results_9b.push(title, link, img)
                    end
                else
                    @error_9b = "no results found here for " + params_9b
                end
            end 
```

# static - MacRuby 支持静态编译吗？

> ID：10017129
> 
> 赞同：0
> 
> 时间：2012-04-04T18:27:09.767
> 
> 标签：static, compilation, macruby, macrubyc

最新版本的 MacRuby 是否支持静态编译？

这是尝试使用它的一些终端输出......它显示在 macrubyc 命令的选项中。

```
Desktop > macrubyc play_all_podcasts.rb --static -o play_all_podcasts
/usr/local/bin/macrubyc:100:in `initialize': This version of MacRuby does not support static compilation. (ArgumentError)
    from /usr/local/bin/macrubyc:490:in `<main>'
Desktop > macrubyc -v
MacRuby 0.11 (ruby 1.9.2) [universal-darwin10.0, x86_64]
Desktop > macrubyc --help
Usage: macrubyc [options] file...
    -c                               Compile and assemble, but do not link
    -o <file>                        Place the output into <file>
        --static                     Create a standalone static executable
        --framework <name>           Link standalone static executable with given framework
        --sdk <path>                 Use SDK when compiling standalone static executable
        --dylib                      Create a dynamic library
        --compatibility_version <VERSION>
                                     Compatibility Version for linking
        --current_version <VERSION>  Current Version for linking
        --install_name <NAME>        Install Name for linking
    -C                               Compile, assemble and link a loadable object file
    -a, --arch <ARCH>                Compile for specified CPU architecture
    -V, --verbose                    Print every command line executed
    -v, --version                    Display the version
    -h, --help                       Display this information 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:42:28.900

从我收集到的信息来看，静态编译仍然是一项工作和进步，而且很可能甚至不会包含在 1.0 版本中。

# mysql-error-1064 - 我希望使用另一个表中的数据更新一个空字段

> ID：10017133
> 
> 赞同：0
> 
> 时间：2012-04-04T18:27:24.867
> 
> 标签：mysql-error-1064, sql-update

我使用 SELECT COUNT(*) 检查我的 WHERE 语句并获得了正确的更新次数，但是当我尝试 UPDATE 时，我在第 3 行出现语法错误。

```
UPDATE scans AS s
SET s.sbjnum = d.sbjnum
JOIN details AS d on d.name = s.name
WHERE s.sbjnum ='' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:30:59.567

你必须有一个`FROM`才能有一个`JOIN`

```
UPDATE scans 
SET sbjnum = d.sbjnum 
FROM scans s
JOIN details AS d ON d.name = s.name 
WHERE s.sbjnum ='' 
```

根据 MySQL 手册，你可以这样写：

```
UPDATE scans AS s
JOIN details AS d ON d.name = s.name 
SET sbjnum = d.sbjnum 
WHERE s.sbjnum ='' 
```

# jquery - 使用 jQuery 在数组中搜索

> ID：10017136
> 
> 赞同：1
> 
> 时间：2012-04-04T18:27:30.407
> 
> 标签：jquery, arrays

我有以下 jQuery，我很困惑为什么它返回`-1`而不是 0 ？有谁能解释一下：

```
var one = $('.test');
var two = $('.test2');

var myArray = [];
myArray.push(one);

if($.inArray($('.test'), myArray) < 0) {
   myArray.push(two);         
}

console.log($.inArray($('.test'), myArray)); //return -1 
```

我设置了[http://jsfiddle.net/ecrMw/1/](http://jsfiddle.net/ecrMw/1/)并试图`0`返回`$('.test')`？也就是说，在数组中找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:32:50.420

因为 jQuery 对象实际上是一个**集合**而不是 DOM 元素。您正在寻找的是以下文件的传真：

```
var one = $('.test')[0];
var two = $('.test2')[0];

// on with your code 
```

然后你会再次对**元素**进行测试：

```
if ($.inArray($('.test')[0], myArray)){
} 
```

否则（直言不讳地指出）您将数组添加到数组中：

```
var one = $('.test'); // actually a [$] array
var two = $('.test2'); // actually another [$] array

var myArray = []; // empty array
myArray.push(one); // one = [[$]]; 
```

然后比较一个数组是否在另一个数组中成为一个更复杂的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:32:31.907

```
var one = $('.test');

console.log($('.test') == one); //Outputs false 
```

Javascript 不知道如何比较这两个对象，因此它们的比较返回 false。我猜它查看内存地址以确定它们的相等性。

由于 js 无法确定它们的相等性，我猜测 jquery 库不处理 inArray() 方法中的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:46:35.753

检查[这个](http://jsfiddle.net/fB44M/)小提琴，我已经重写了

例如

```
 var found = $('.test,.test2').map(function(){return $(this).get(0)})

  var foundAry=$.makeArray(found);

  console.log($.inArray($('.test').get(0), foundAry)); 
```

关键是您需要在数组中搜索 DOM 对象，而不是在数组中搜索 JQUERY 对象。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:04:00.627

为什么要使用数组？您可以使用 jQuery 集合。

```
var $one = $('.test'),
    $two = $('.test2'),
    $myCollection = $();

$.merge( $myCollection, $one );

if( $myCollection.index( $one ) < 0) {
   $.merge( $myCollection, $two );  
}

console.log( $myCollection.index( $one )  ); //returns 0 
```

# c# - 如何从类创建 XSD 架构？

> ID：10017139
> 
> 赞同：57
> 
> 时间：2012-04-04T18:27:37.643
> 
> 标签：c#, xml, xsd, xsd.exe, linq-to-xsd

我很难处理 XSD 文件。

我正在尝试从一个类创建一个 XSD 文件：

```
public enum Levels { Easy, Medium, Hard }
public sealed class Configuration
{
    public string Name { get;set; }
    public Levels Level { get; set; }
    public ConfigurationSpec { get;set;}
}

public abstract class ConfigurationSpec { }
public class ConfigurationSpec1
{
    // ...
}
public class ConfigurationSpec2
{
    // ...
} 
```

请注意，我在 Configuration 中有一个抽象类。使用该功能，是否可以创建 XSD，如果可以，如何创建？

这个想法是将类 Configuration 传递给 XSD。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2014-10-26T17:24:09.730

您可以像这样成功地集成`xsd.exe`到 Visual Studio IDE 中：

进入`Tools, External Tools`并单击`Add`按钮：

**2010**

![在此处输入图像描述](../Images/000622df65efa1894149adf0c19bb09a.png)

**2015 / 2017**

[![在此处输入图像描述](../Images/8c6bf65daa3507c5d84f76fd5b55c8c0.png)](https://i.stack.imgur.com/7ILnU.png)

**标题：**

从类创建架构

**命令（每个框架）：**

`4.0`

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\x64\xsd.exe`

`4.5.1`

`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5.1 Tools\x64\xsd.exe`

`4.6.*`

`C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.* Tools\x64\xsd.exe`

**论据：**

`$(BinDir)$(TargetName).dll /outputdir:$(ItemDir) /type:$(ItemFileName)`

**使用输出窗口：**

防止弹出额外的命令窗口并保留输出记录，直到您将其清除。可能是个好主意。

**提示参数：**

检查是否要测试输出或排除故障；否则，不要选中。

点击`OK`

**如何使用：**

1.  **编译你的项目！** `XSD.exe`只看编译的代码。
2.  单击**解决方案资源管理器**中的类。
3.  点击`Tools, Create Schema From Class`
4.  单击**解决方案资源管理器**`Show All Files`中的按钮。
***   查看与您的班级相同的文件夹，您将看到`Schema0.xsd`.*   右键单击`Schema0.xsd`并选择`Include In Project`*   重命名`Schema0.xsd`为`<the name of the class>.xsd`*   `xsd`（可选）如果您想使用此模式在 xml 编辑器中编辑 xml 文件并且您没有使用所有属性，则可能必须手动编辑此新文件。如果确实不需要这些属性，您可以替换`use="required"`为`use="optional"`以摆脱 xml 编辑器中的蓝色波浪线（创建警告）。**

 *** * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-04T18:49:17.260

您可以使用`XSD.exe`（可从您的 Visual Studio 安装中获得。）

```
public sealed class Configuration
{
 public string Name { get; set; }
 public Levels Level { get; set; }
 public ConfigurationSpec Spec { get; set; }
}
 public abstract class ConfigurationSpec { }
 public class ConfigurationSpec1    {   }
public class ConfigurationSpec2 {   } 
```

结果是

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Levels" type="Levels" />
  <xs:simpleType name="Levels">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Easy" />
      <xs:enumeration value="Medium" />
      <xs:enumeration value="Hard" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="Configuration" nillable="true" type="Configuration" />
  <xs:complexType name="Configuration">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="1" name="Name" type="xs:string" />
      <xs:element minOccurs="1" maxOccurs="1" name="Level" type="Levels" />
      <xs:element minOccurs="0" maxOccurs="1" name="Spec" type="ConfigurationSpec" />
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ConfigurationSpec" abstract="true" />
  <xs:element name="ConfigurationSpec" nillable="true" type="ConfigurationSpec" />
  <xs:element name="ConfigurationSpec1" nillable="true" type="ConfigurationSpec1" />
  <xs:complexType name="ConfigurationSpec1" />
  <xs:element name="ConfigurationSpec2" nillable="true" type="ConfigurationSpec2" />
  <xs:complexType name="ConfigurationSpec2" />
</xs:schema> 
```

您所要做的就是编译您的程序集并使用程序集`XSD.exe`的路径作为参数运行。`XSD.exe /?`也有一个所有参数的列表。

例子：`XSD.exe C:\Dev\Project1\Bin\Debug\library.dll`**

# c# - Gridview 行事件未在 UserControl 中触发

> ID：10017143
> 
> 赞同：2
> 
> 时间：2012-04-04T18:27:53.060
> 
> 标签：c#, gridview, user-controls, ascx, commandfield

我正在使用的用户控件有一个非常奇怪的问题。我正在编写一些要在 DotNetNuke 模块中使用的用户控件。

基本上我的页面上有一个包含一些控件的 UserControl，然后有一个占位符，我在其中加载了一个放置了 GridView 的 UserControl。

基本上这是我的页面结构

```
<asp:Panel runat="server" ID="pnlServiceType" Visible="false">
   <uc:ServiceType runat="server" ID="ServiceType" />
</asp:Panel> 
```

在该用户控件中是一些表单元素，然后是以下内容：

```
<asp:PlaceHolder runat="server" ID="phServices" /> 
```

然后该占位符添加了一个用户控件，如下所示：

```
<p class="header"><asp:Label runat="server" ID="lblServiceHeader" Font-Bold="true" /></p>

<asp:GridView runat="server" ID="gvServices" AlternatingRowStyle-BackColor="#eaeaea"  BorderStyle="None" GridLines="None"
AutoGenerateColumns="false" CellPadding="6" Width="100%" EnableViewState="false" OnRowEditing="gvServices_RowEditing"> 
```

当用户在 DropDownList 中选择某些内容时，我正在清除占位符中的控件，并为他们选择的任何类型的记录集重新添加一个 UserControl

```
 _serviceID = e.Value;

        //Clear the controls out of the placeholder
        phServices.Controls.Clear();

        //Reset the count of grids for the OnInit() method
        Session["GridCount"] = 0;

        if (e.Value != "NULL")
        {
            PopulateServicesGrid(_service.GetServicesByFormType(Convert.ToInt32(e.Value)));
        }
        else
        {
            PopulateServicesGrid(_service.GetServicesByClient(Convert.ToInt32(_client)));
        } 
```

和 PopulateServicesGrid 方法：

```
 private void PopulateServicesGrid(List<NOAService> services)
    {
        //Creates a LINQ grouping based on the Billing Codes
        //Allows a super easy creation of grids based on the grouped billing codes
        var query = services.Select(service => service.BillingCode).Distinct();
        foreach (string code in query)
        {
            var servicesByCode = services.Where(service => service.BillingCode == code).ToList();
            ServicesGrid servicesGrid = LoadControl("~/DesktopModules/LEL Modules/NOA/ServicesGrid.ascx") as ServicesGrid;
            Label lblServiceHeader = servicesGrid.FindControl("lblServiceHeader") as Label;
            GridView gvServices = servicesGrid.FindControl("gvServices") as GridView;

            phServices.Controls.Add(servicesGrid);
            servicesGrid.ID = code;
            lblServiceHeader.Text = servicesByCode[0].FormTypeName;
            gvServices.DataSource = servicesByCode;
            gvServices.DataBind();

            Session["GridCount"] = phServices.Controls.Count;

        }
    } 
```

在我的 ServiceType UserControl 上，在 PageInit 上，我正在读取 ServiceGrid 用户控件，以便我的网格显示在回发中并且不会从占位符中丢失

```
 void NOAServiceType_Init(object sender, EventArgs e)
    {
        for (int i = 0; i < Convert.ToInt32(Session["GridCount"]); i++)
        {
            ServicesGrid servicesGrid = LoadControl("~/DesktopModules/LEL Modules/NOA/ServicesGrid.ascx") as ServicesGrid;
            phServices.Controls.Add(servicesGrid);

        }
    } 
```

网格成功填充，一切似乎都运行良好。但由于某种原因，在我的 GridView 上，我有一个 CommandField

```
 <asp:CommandField ShowEditButton="true" ItemStyle-HorizontalAlign="Right" EditText="Edit" UpdateText="Update" 
        EditImageUrl="~/images/LELModules/appbar.edit.rest.png" CancelImageUrl="~/images/LELModules/appbar.close.rest.png" UpdateImageUrl="~/images/LELModules/appbar.check.rest.png"
        ButtonType="Image" CausesValidation="false" /> 
```

当我单击网格行上的编辑命令时，没有任何反应。我的网格没有丢失它的行，控件仍然存在，一切看起来应该没问题。在我第二次单击它之前，该`RowEditing`事件不会触发。

知道为什么会发生这种情况吗？

**更新**：我已经设法弄清楚当我的 SelectedIndexChanged 处理程序`DataSource`被读取到 PlaceHolder 时，我的 SelectedIndexChanged 处理程序正在有效地重置 UserControl 包含的网格。但是，当单击 CommandField（编辑）时，会`Init`触发保存占位符的 UserControl

```
ServiceType UserControl < `Init` fires here
   -Form elements
   -Placeholder which holds
      --UserControl with GridView 
```

该`Init`方法加载 UserControl 的新实例并将它们添加到 PlaceHolder，但 DataSource 是`null`. 看起来`EnableViewState=true`数据仍然是绑定的，但是如果我处理`PreRender`，我可以看到`DataSource`我的`gvServices | null`

是否甚至可以在 GridView 上编辑这样的行，这些行一次又一次地动态添加到 PlaceHolder？

**已修复**我在参考这篇文章 [http://www.west-wind.com/weblog/posts/2006/Feb/24/Overriding-ClientID-and-UniqueID-on-ASPNET-controls后发现了问题所在](http://www.west-wind.com/weblog/posts/2006/Feb/24/Overriding-ClientID-and-UniqueID-on-ASPNET-controls)

这让我想到，如果 ID 被更改了怎么办？控件是嵌套的。所以我去观察了 GridView 的 ID、ClientID 和 UniqueID，只是为了看看。当控件加载到我的`Init`处理程序上时，它会在添加时分配一个超级通用 ID。

```
private void PopulateServicesGrid(List<NOAService> services)
{
    //Creates a LINQ grouping based on the Billing Codes
    //Allows a super easy creation of grids based on the grouped billing codes
    var query = services.Select(service => service.BillingCode).Distinct();
    foreach (string code in query)
    {
        var servicesByCode = services.Where(service => service.BillingCode == code).ToList();
        ServicesGrid servicesGrid = LoadControl("~/DesktopModules/LEL Modules/NOA/ServicesGrid.ascx") as ServicesGrid;
        Label lblServiceHeader = servicesGrid.FindControl("lblServiceHeader") as Label;
        GridView gvServices = servicesGrid.FindControl("gvServices") as GridView;

        phServices.Controls.Add(servicesGrid);
        **servicesGrid.ID = code;**
        lblServiceHeader.Text = servicesByCode[0].FormTypeName;
        gvServices.DataSource = servicesByCode;
        gvServices.DataBind();

        Session["GridCount"] = phServices.Controls.Count;

    }
} 
```

我正在将 ID 设置为其他内容。因此，当我在网格上点击 Edit RowCommand 时，它再次重新加载控件，`Init`并且 ID 从我的自定义设置代码（T2020，从我的数据库中提取）再次更改回通用 ID，它不知道如何触发事件。

我希望这对某人有所帮助，因为我已经失去了至少 12 个小时来解决这个问题。

# python - 删除字符串中的字符列表

> ID：10017147
> 
> 赞同：226
> 
> 时间：2012-04-04T18:28:04.057
> 
> 标签：python, string, list, replace

我想在python中删除字符串中的字符：

```
string.replace(',', '').replace("!", '').replace(":", '').replace(";", '')... 
```

但是我有很多必须删除的字符。我想了一个清单

```
list = [',', '!', '.', ';'...] 
```

但是如何使用`list`替换 中的字符`string`？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-04-04T18:29:58.297

If you're using python2 and your inputs are strings (not unicodes), the absolutely best method is [`str.translate`](https://docs.python.org/2/library/stdtypes.html#str.translate):

```
>>> chars_to_remove = ['.', '!', '?']
>>> subj = 'A.B!C?'
>>> subj.translate(None, ''.join(chars_to_remove))
'ABC' 
```

Otherwise, there are following options to consider:

A. Iterate the subject char by char, omit unwanted characters and [`join`](https://docs.python.org/2/library/stdtypes.html#str.join) the resulting list:

```
>>> sc = set(chars_to_remove)
>>> ''.join([c for c in subj if c not in sc])
'ABC' 
```

(Note that the generator version `''.join(c for c ...)` will be less efficient).

B. Create a regular expression on the fly and [`re.sub`](https://docs.python.org/2/library/re.html#re.sub) with an empty string:

```
>>> import re
>>> rx = '[' + re.escape(''.join(chars_to_remove)) + ']'
>>> re.sub(rx, '', subj)
'ABC' 
```

([`re.escape`](https://docs.python.org/2/library/re.html#re.escape) ensures that characters like `^` or `]` won't break the regular expression).

C. Use the [mapping variant of `translate`](https://docs.python.org/3/library/stdtypes.html#str.translate):

```
>>> chars_to_remove = [u'δ', u'Γ', u'ж']
>>> subj = u'AжBδCΓ'
>>> dd = {ord(c):None for c in chars_to_remove}
>>> subj.translate(dd)
u'ABC' 
```

Full testing code and timings:

```
#coding=utf8

import re

def remove_chars_iter(subj, chars):
    sc = set(chars)
    return ''.join([c for c in subj if c not in sc])

def remove_chars_re(subj, chars):
    return re.sub('[' + re.escape(''.join(chars)) + ']', '', subj)

def remove_chars_re_unicode(subj, chars):
    return re.sub(u'(?u)[' + re.escape(''.join(chars)) + ']', '', subj)

def remove_chars_translate_bytes(subj, chars):
    return subj.translate(None, ''.join(chars))

def remove_chars_translate_unicode(subj, chars):
    d = {ord(c):None for c in chars}
    return subj.translate(d)

import timeit, sys

def profile(f):
    assert f(subj, chars_to_remove) == test
    t = timeit.timeit(lambda: f(subj, chars_to_remove), number=1000)
    print ('{0:.3f} {1}'.format(t, f.__name__))

print (sys.version)
PYTHON2 = sys.version_info[0] == 2

print ('\n"plain" string:\n')

chars_to_remove = ['.', '!', '?']
subj = 'A.B!C?' * 1000
test = 'ABC' * 1000

profile(remove_chars_iter)
profile(remove_chars_re)

if PYTHON2:
    profile(remove_chars_translate_bytes)
else:
    profile(remove_chars_translate_unicode)

print ('\nunicode string:\n')

if PYTHON2:
    chars_to_remove = [u'δ', u'Γ', u'ж']
    subj = u'AжBδCΓ'
else:
    chars_to_remove = ['δ', 'Γ', 'ж']
    subj = 'AжBδCΓ'

subj = subj * 1000
test = 'ABC' * 1000

profile(remove_chars_iter)

if PYTHON2:
    profile(remove_chars_re_unicode)
else:
    profile(remove_chars_re)

profile(remove_chars_translate_unicode) 
```

Results:

```
2.7.5 (default, Mar  9 2014, 22:15:05) 
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)]

"plain" string:

0.637 remove_chars_iter
0.649 remove_chars_re
0.010 remove_chars_translate_bytes

unicode string:

0.866 remove_chars_iter
0.680 remove_chars_re_unicode
1.373 remove_chars_translate_unicode

---

3.4.2 (v3.4.2:ab2c023a9432, Oct  5 2014, 20:42:22) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]

"plain" string:

0.512 remove_chars_iter
0.574 remove_chars_re
0.765 remove_chars_translate_unicode

unicode string:

0.817 remove_chars_iter
0.686 remove_chars_re
0.876 remove_chars_translate_unicode 
```

(As a side note, the figure for `remove_chars_translate_bytes` might give us a clue why the industry was reluctant to adopt Unicode for such a long time).

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-04-04T18:31:22.453

You can use [`str.translate()`](http://docs.python.org/2/library/stdtypes.html#str.translate):

```
s.translate(None, ",!.;") 
```

Example:

```
>>> s = "asjo,fdjk;djaso,oio!kod.kjods;dkps"
>>> s.translate(None, ",!.;")
'asjofdjkdjasooiokodkjodsdkps' 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-04-04T18:31:32.230

You can use the [translate](http://docs.python.org/library/string.html#string.translate) method.

```
s.translate(None, '!.;,') 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-09-11T12:33:47.343

如果您正在使用**python3**并寻找`translate`解决方案 - 函数已更改，现在采用 1 个参数而不是 2 个参数。

该参数是一个表（可以是字典），其中每个键是要查找的字符的 Unicode 序数（int），值是替换（可以是 Unicode 序数或将键映射到的字符串）。

这是一个使用示例：

```
>>> list = [',', '!', '.', ';']
>>> s = "This is, my! str,ing."
>>> s.translate({ord(x): '' for x in list})
'This is my string' 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-04-04T18:53:30.953

```
''.join(c for c in myString if not c in badTokens) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-10-23T07:47:04.970

为什么不是一个简单的循环？

```
for i in replace_list:
    string = string.replace(i, '') 
```

此外，避免将列表命名为“列表”。它覆盖了内置函数`list`。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-04-04T18:51:41.867

使用正则表达式的另一种方法：

```
''.join(re.split(r'[.;!?,]', s)) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-04-04T18:31:25.183

you could use something like this

```
def replace_all(text, dic):
  for i, j in dic.iteritems():
    text = text.replace(i, j)
  return text 
```

This code is not my own and comes from [here](https://web.archive.org/web/20121224062005/https://gomputor.wordpress.com/2008/09/27/search-replace-multiple-words-or-characters-with-python/) its a great article and dicusses in depth doing this

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-12-22T19:55:34.793

简单的方法，

```
import re
str = 'this is string !    >><< (foo---> bar) @-tuna-#   sandwich-%-is-$-* good'

// condense multiple empty spaces into 1
str = ' '.join(str.split()

// replace empty space with dash
str = str.replace(" ","-")

// take out any char that matches regex
str = re.sub('[!@#$%^&*()_+<>]', '', str) 
```

输出：

*`this-is-string--foo----bar--tuna---sandwich--is---good`*

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-03-24T17:20:34.387

也许是一种更现代、更实用的方式来实现您的愿望：

```
>>> subj = 'A.B!C?'
>>> list = set([',', '!', '.', ';', '?'])
>>> filter(lambda x: x not in list, subj)
'ABC' 
```

请注意，对于这个特定的目的，这有点过头了，但是一旦您需要更复杂的条件，过滤器就会派上用场

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-05-31T07:23:24.667

还有一个有趣的主题是删除 UTF-8 重音形式的字符串，将 char 转换为标准的非重音字符：

[在 python unicode 字符串中删除重音的最佳方法是什么？](https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string)

从主题中提取代码：

```
import unicodedata

def remove_accents(input_str):
    nkfd_form = unicodedata.normalize('NFKD', input_str)
    return u"".join([c for c in nkfd_form if not unicodedata.combining(c)]) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-05-26T08:01:40.397

**消除 *％，＆@！从下面的字符串：**

```
s = "this is my string,  and i will * remove * these ** %% "
new_string = s.translate(s.maketrans('','','*%,&@!'))
print(new_string)

# output: this is my string  and i will  remove  these 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-12-03T09:52:20.497

在 Python 3.8 中，这对我有用：

```
s.translate(s.maketrans(dict.fromkeys(',!.;', ''))) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-11-13T15:45:53.403

我认为这很简单，并且会做！

```
list = [",",",","!",";",":"] #the list goes on.....

theString = "dlkaj;lkdjf'adklfaj;lsd'fa'dfj;alkdjf" #is an example string;
newString="" #the unwanted character free string
for i in range(len(TheString)):
    if theString[i] in list:
        newString += "" #concatenate an empty string.
    else:
        newString += theString[i] 
```

这是一种方法。但是，如果您厌倦了保留要删除的字符列表，您实际上可以使用您遍历的字符串的顺序号来完成。订单号是该字符的 ascii 值。0 作为 char 的 ascii 编号为 48，小写 z 的 ascii 编号为 122，因此：

```
theString = "lkdsjf;alkd8a'asdjf;lkaheoialkdjf;ad"
newString = ""
for i in range(len(theString)):
     if ord(theString[i]) < 48 or ord(theString[i]) > 122: #ord() => ascii num.
         newString += ""
     else:
        newString += theString[i] 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-11-03T04:13:28.153

这个怎么样 - 一个班轮。

```
reduce(lambda x,y : x.replace(y,"") ,[',', '!', '.', ';'],";Test , ,  !Stri!ng ..") 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-10-28T14:23:44.350

这些天我正在研究计划，现在我认为擅长递归和评估。哈哈哈。只是分享一些新方法：

首先，评估它

```
print eval('string%s' % (''.join(['.replace("%s","")'%i for i in replace_list]))) 
```

第二，递归它

```
def repn(string,replace_list):
    if replace_list==[]:
        return string
    else:
        return repn(string.replace(replace_list.pop(),""),replace_list)

print repn(string,replace_list) 
```

嘿，不要投反对票。我只是想分享一些新的想法。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-05-26T04:00:01.257

我正在考虑解决这个问题。首先，我会将字符串输入作为列表。然后我会替换列表中的项目。然后通过使用 join 命令，我将列表作为字符串返回。代码可以是这样的：

```
def the_replacer(text):
    test = []    
    for m in range(len(text)):
        test.append(text[m])
        if test[m]==','\
        or test[m]=='!'\
        or test[m]=='.'\
        or test[m]=='\''\
        or test[m]==';':
    #....
            test[n]=''
    return ''.join(test) 
```

这将从字符串中删除任何内容。你怎么看？

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-05-08T03:38:41.510

Python 3，单行列表理解实现。

```
from string import ascii_lowercase # 'abcdefghijklmnopqrstuvwxyz'
def remove_chars(input_string, removable):
  return ''.join([_ for _ in input_string if _ not in removable])

print(remove_chars(input_string="Stack Overflow", removable=ascii_lowercase))
>>> 'S O' 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-02-09T01:31:07.913

这是一种[`more_itertools`](https://github.com/erikrose/more-itertools)方法：

```
import more_itertools as mit

s = "A.B!C?D_E@F#"
blacklist = ".!?_@#"

"".join(mit.flatten(mit.split_at(s, pred=lambda x: x in set(blacklist))))
# 'ABCDEF' 
```

在这里，我们拆分在 中找到的项目`blacklist`，展平结果并加入字符串。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-02T15:53:58.920

为什么不利用这个简单的功能：

```
def remove_characters(str, chars_list):
    for char in chars_list:
        str = str.replace(char, '')

    return str 
```

使用功能：

```
print(remove_characters('A.B!C?', ['.', '!', '?'])) 
```

输出：

```
ABC 
```

# c# - 有没有办法*防止* ReSharper 并行运行程序集的单元测试？

> ID：10017156
> 
> 赞同：24
> 
> 时间：2012-04-04T18:28:54.307
> 
> 标签：c#, unit-testing, resharper

我在单元测试设置中看到一个选项“并行运行最多 1|2 个程序集”，但将其设置为“1”似乎仍然并行执行单个程序集的测试。有没有办法完全禁用并行执行?

这是 ReSharper 6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:13:43.090

您可以尝试在此处查看堆栈溢出答案[How to run NUnit test fixtures serially?](https://stackoverflow.com/questions/6427138/how-to-run-nunit-test-fixtures-serially)

但是，您似乎需要执行此操作可能会受到测试依赖项的推动。访问公共资源的需要或一个测试的输出需要成为另一个测试的输入。如果是这种情况，请考虑重构您的测试/代码以删除依赖项。通常这可以通过使用模拟框架（Moq、RhinoMocks 等）来完成。

# jquery - jQuery没有对焦点做出反应

> ID：10017157
> 
> 赞同：0
> 
> 时间：2012-04-04T18:28:59.610
> 
> 标签：jquery

```
$('#navbar ul').addClass('hidden');
   $('#navbar li a').on('focus hover', function(){
    $(this).siblings('ul').toggleClass('hidden');       
}); 
```

我在以下位置发布了一个 JSFiddle：http: [//jsfiddle.net/karlgroves/HUKUf/](http://jsfiddle.net/karlgroves/HUKUf/)

使用上面的代码，我希望子菜单项在焦点和悬停时都做出响应，但是在聚焦时它不起作用。有趣的是，CSS :focus 伪类可以正常工作。

编辑：我说“CSS :focus 伪类可以正常工作” - 我的意思是 :focus 伪类可以正常更改 CSS 属性，但是没有方法（包括在选择器中使用 :focus ）可以做什么我打算，这是显示子菜单项。

使用 .focus() 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:36:13.433

如果我错了，请纠正我，但我不记得能够通过 .on 函数中的空格分隔来抛出 2 个事件。

根据文档，您应该能够像这样附加多个事件：

```
<script type="text/javascript">
$('#navbar li a').on(
{
  focus: function(){
    $(this).siblings('ul').toggleClass('hidden');
  },
  hover: function(){
    $(this).siblings('ul').toggleClass('hidden');
  }
});
</script> 
```

有点重复；但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:38:48.413

我相信代码是有效的，只是不是你所期望的。

```
 $('#navbar ul').addClass('hidden');
   $('#navbar li a').on('focus hover', function(){
    alert('hey');
    $(this).siblings('ul').toggleClass('hidden');       
}); 
```

​</p>

当我插入一个警报时，每次我悬停一个孩子时它都会触发两次。它触发两次的事实告诉我它创建了两个不同的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:51:40.087

事件触发实际上似乎不是问题......看起来更像是通过选择器遍历 DOM 的问题。

我已经[分叉了你的小提琴](http://jsfiddle.net/DoomHamster/42ura/)（哇..这听起来不对），如果你通过 ID 抓取静态元素，你可以看到每个焦点和悬停事件的事件触发得很好。所以看起来`$(this).siblings('ul')`选择器的行为与焦点事件的预期不同。我会看看 event.target 和 event.currentTarget 是什么。

**编辑：**

好的...我正在重新评估我之前的声明。我已将您的代码更改为：

```
$('#navbar li a').on('focusin focusout mouseover mouseout', function(event) {
    if (event.type == 'focusin' || event.type == 'mouseover') {
        $(this).siblings('ul').show();
    }
    else {
        $(this).siblings('ul').hide();
    }
});​ 
```

它工作正常......所以我真的认为这个问题只是悬停和焦点事件之间的一组复杂的交互。再加上你有 CSS 来模仿悬停 javascript 事件 ( ) 的事实，你会`#navbar li:hover ul {display: block;}`得到更多潜在的冲突。 [我的小提琴更新版本在这里](http://jsfiddle.net/DoomHamster/42ura/2/)。

# cookies - 将 libCurl 与 Bluecoat cookie 代理一起使用

> ID：10017165
> 
> 赞同：3
> 
> 时间：2012-04-04T18:29:36.017
> 
> 标签：cookies, proxy, libcurl

我正在尝试通过在代理身份验证期间使用 cookie 的 Bluecoat 代理进行连接。

我完全找不到 CURLOPT_ 设置的组合，这些设置将使 CURL 在代理身份验证期间呈现 cookie。

所以：代理响应：

```
HTTP/1.1 407 Proxy Authentication Required
Proxy-Authenticate: NTLM
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Proxy-Connection: close
Set-Cookie: BCSI-CS-EDD688431754D715=2; Path=/
Connection: close
Content-Length: 825 
```

但是无论我为 CURLOPT_COOKIEFILE 或 CURLOPT_COOKIEJAR 设置什么，curl 都不会在后续的身份验证尝试中显示 cookie。

注意：我也在使用（因为我必须）

```
CURLOPT_PROXYTYPE = CURLPROXY_HTTP
CURLOPT_PROXYAUTH = CURLAUTH_ANY
CURLOPT_HTTPPROXYTUNNEL = 1
CURLOPT_CONNECT_ONLY = 1 
```

期望 CURL 提供带有代理授权请求的 cookie 是否合理？

我正在使用 curl_easy_*，转向多界面会有帮助吗？

最后，我正在构建 7.19.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:10:40.797

CONNECT 请求在代码中的完成与“常规”请求相比有点分开，似乎那里没有完成 cookie 处理！我认为这是一个 libcurl 错误。

（这是我上面的评论，变成了正确的答案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T20:26:45.657

可以通过 Blue Coat 代理创建隧道。但我的建议是不要使用带有 Blue Coat 代理的网络。在自由国家，购买 SIM 卡并使用移动网络应该不是问题。

[在https://bluecoatproxy.wordpress.com](https://bluecoatproxy.wordpress.com)上阅读更多信息

# windows - Can Mercurial create its own symbolic link format from Windows?

> ID：10017171
> 
> 赞同：3
> 
> 时间：2012-04-04T18:30:03.930
> 
> 标签：windows, mercurial, symlink

I know that Mercurial doesn't support symbolic links in repos on Windows; I can live with that, though an implementation using NTFS symlinks would be nice for those who can enable the privilege on their Windows boxes for non-admins.

What I'm wondering is about the way that Mercurial treats actual links from a Unix repository when the repo is seen on a Windows machine. If I update from a repo with a symlink in on my Windows development machine, I see that the link is changed into an actual file with the target of the link in it as text.

*Somehow*, Mercurial knows even on Windows that the file was originally a symlink, even when it is stored as a real file. If I edit the contents of the file in Windows, I can change the target of the symlink, because it's still recorded as being a symlink by Mercurial - when I push back to Unix, the symlink is pointing to the new location.

So. How do I mark a file that I've created in Windows as a symlink? It's clear that Mercurial could push such a symlink into the Unix filesystem, but I don't know how to mark it as such without creating the link first under Unix.

Is there a flag that can be set?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:14:10.837

恐怕[在 Windows 上没有解决](https://stackoverflow.com/a/8712267/110204)方法。不过，您可以编写一个扩展程序，让您在 Windows 上为文件设置符号链接位。此扩展可能必须覆盖[`dirstate.flagfunc`](http://selenic.com/hg/file/2.1.2/mercurial/dirstate.py#l155)，这是在请求文件的“标志”（执行和符号链接位）时使用的函数。

有关使 Mercurial 在结帐时创建 Windows 符号链接的整体功能，另请参阅[Issue 1825](http://mercurial.selenic.com/bts/issue1825)。它被标记为“完成，可能会更好”，因此它不太可能很快改变。

# google-chrome-extension - 仅在 Chrome 扩展匹配模式中匹配空路径

> ID：10017173
> 
> 赞同：1
> 
> 时间：2012-04-04T18:30:05.647
> 
> 标签：google-chrome-extension

我只想匹配

```
*://www.foo.com 
```

没有像上面这样的查询字符串，或者任何查询字符串：

```
*://www.foo.com/?* 
```

问题是，我如何匹配上面的第一个模式？我的猜测是我必须匹配所有路径然后排除所有路径，然后包含上面的第二个模式。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:59:48.097

你的模式几乎是正确的。路径名是**必需**的。即使当多功能栏显示时`www.foo.com`，路径也是`/`。

```
*://www.foo.com/
*://www.foo.com/?* 
```

注意：最后一个模式匹配`/?test`但不匹配`/index?test`。
有关详细信息，请参阅[匹配模式](http://code.google.com/chrome/extensions/match_patterns.html)。

# hibernate - Hibernate Criteria fetches duplicates - one to many association

> ID：10017174
> 
> 赞同：1
> 
> 时间：2012-04-04T18:30:13.510
> 
> 标签：hibernate, hibernate-mapping

component -->

```
 --> feature 1 

      --> feature 2

      --> feature 3 
```

component has one to many relationship with feature

Even though there are 3 different records in feature table, hibernate Criteria fetches only the last record and displays it for 3 times.

I give my hbm file and also criteria code.

Querying from component table is fine but the problem is with feature table only

**component.hbm.xml**

```
<class name="com.arv.RelationMapping.component" table="component" >

    <id name="componentPK" column="component_pk" type="java.lang.Long"/>
    <property name="componentName" column="component_name" type="java.lang.String"/>

    <set name="feature" table="feature" inverse="true">     
        <key>
            <column name="component_pk"/>
        </key>      
        <one-to-many class="com.arv.RelationMapping.feature" />     
    </set>

</class> 
```

**features.hbm.xml**

```
<class name="com.arv.RelationMapping.feature" table="feature">

    <id name="featurePK" column="feature_pk" type="java.lang.Long"/>

    <many-to-one name="component" class="com.arv.RelationMapping.component" fetch="select">
        <column name="component_pk"/>   
    </many-to-one>

    <property name='scenarioId' column="scenario_id" type="java.lang.String"/>
    <property name='scenarioDesc' column="scenario_desc" type="java.lang.String"/>
    <property name='testCaseFile' column="test_case_file" type="java.lang.String"/>

</class> 
```

**Java class**

public class Test {

```
public static void main(String[] args) 
{
    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
    Session session = sessionFactory.openSession();

    Criteria criteria = session.createCriteria(feature.class);
    List summaryList = criteria.list();
    feature feature = new feature();

    System.out.println(summaryList.size()); // getting size correctly

    if(summaryList !=null)
    {
        for(Object obj:summaryList)
        {
            feature = (feature)obj;

                    // getting same values for each loop
            System.out.println(feature.getScenarioDesc());
            System.out.println(feature.getScenarioId());
            System.out.println(feature.getFeaturePK());

        }
    }
    session.close();    
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:52:32.610

使用`criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);`可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:20:12.777

```
public static void main(String[] args) 
{
    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
    Session session = sessionFactory.openSession();

    Criteria criteria = session.createCriteria(feature.class);
    criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);
    List summaryList = criteria.list();
    feature feature = new feature();

    System.out.println(summaryList.size()); // getting size correctly

    if(summaryList !=null)
    {
        for(Object obj:summaryList)
        {
            feature = (feature)obj;

                    // getting same values for each loop
            System.out.println(feature.getScenarioDesc());
            System.out.println(feature.getScenarioId());
            System.out.println(feature.getFeaturePK());

        }
    }
    session.close();    
} 
```

# python - How can I prevent a QTextArea from being erased?

> ID：10017183
> 
> 赞同：1
> 
> 时间：2012-04-04T18:30:47.663
> 
> 标签：python, qt, pyqt

I have a QPlainTextEdit in a modal dialog window (subclass of QDialog). Whenever I minimize the dialog and bring it back up, all the text in the QTextArea has disappeared.

How can I preserve the text in my QPlainTextEdit widget?

I've tried saving the text in the textedit widget like this:

```
def __init__(self):
    self.text_area = self.QPlainTextEdit()
    self.previous_text = ''

def hideEvent(self, event):
    self.previous_text = self.text_area.toPlainText()

def showEvent(self, event):
    self.text_area.setPlainText(self.previous_text) 
```

But this approach didn't yield any appreciable results.

**EDIT:** I've noticed that this only happens when I can actually hide the modal dialog ... which seems to only be possible when I use Xmonad as my window manager ... whenever I try this in GNOME or on Windows, this behavior cannot be reproduced because those window managers actually prevent the modal dialog from being minimized.

**EDIT:** Following @Avaris's comment below, I tried enabling minimization for the modal `QDialog` like so:

```
def __init__(self):
    ...
    self.setWindowFlags(QtCore.Qt.WindowMinimizeButtonHint) 
```

With this flag set, the vanishing text behavior can be replicated on Windows, GNOME and XMonad.

Here is a visual example from my Windows machine before I minimize the window: ![Before I minimize the window](../Images/7f1212e916cc3eaa9d093e253c96502a.png)

And here's what it looks like after I bring up the window again: ![After I minimize the window](../Images/2d230e25f8649585961a019bd59bfe9b.png)

**EDIT:** Text is written to the modal dialog's `QPlainTextEdit` like so:

```
def write(self, text):
    self.text_area.insertPlainText(QtCore.QString(text)) 
```

The text itself is retrieved as a python string from a system of threads whose standard out has been captured and redirected. By the time is gets to the above `write()` function, the text itself is simply a python string.

**EDIT:** When I modify the `write` method mentioned above like so (following @ekhumoro's suggestion):

```
def write(self, text):
    self.text_area.insertPlainText(text) 
```

The text is still missing after hiding and showing the dialog.

# java - 为什么 Java 中的内联条件会自动转换数字？

> ID：10017185
> 
> 赞同：5
> 
> 时间：2012-04-04T18:30:50.560
> 
> 标签：java

在以下内联条件中，人们可能期望分别打印一个整数和一个双精度：

```
System.out.println(true ? 0 : 0.0);
System.out.println(false ? 0 : 0.0);
System.out.println(true ? new Integer(0) : new Double(0.0));
System.out.println(true ? 0 : ""); 
```

相反，当它们一起出现时，它们都被打印为双精度：

```
 0.0
 0.0
 0.0
 0 
```

为什么数字与内联条件中的其他数字一起出现时会自动转换？

**编辑**：如果发生这种情况是因为`System.out.println`超载是什么情况：

```
list.add(true ? 0 : 0.0);
list.add(false ? 0 : 0.0);
list.add(true ? new Integer(0) : new Double(0.0));
list.add(true ? 0 : "");
System.out.println(list); 
```

输出：

```
[0.0, 0.0, 0.0, 0] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T18:33:56.847

> 为什么数字与内联条件中的其他数字一起出现时会自动转换？

条件表达式必须具有单一结果类型，并且该类型用于确定`System.out.println`要使用的重载。重载总是在编译时确定，编译器根据选择的条件为表达式采用两条完全独立的路径*真的很尴尬。*

如果您*想*根据条件做两件不同的事情，请使用`if`. 如果您想根据条件在两个值之间选择*一种*结果类型，那么条件运算符是完美的。

编辑：这里有趣的案例，IMO，是第三个。编译器*可以*选择不执行任何转换，只调用`println(Object)`. 为了表明它*没有*这样做，这里有一个单独的测试：

```
Object x = true ? new Integer(0) : new Double(0.0);
System.out.println(x.getClass()); 
```

这会打印出来`class java.lang.Double`- 如果您查看字节码，您会看到它正在拆箱，`int`然后将其重新装箱为`Double`. 有关如何确定的详细信息，请参阅[JLS 的第 15.25 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:37:18.600

条件运算符的双方必须兼容才能参与相同的三元运算。根据[Java Language Specification 15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)，在您的情况下

> 二进制数值提升（第 5.6.2 节）应用于操作数类型，条件表达式的类型是第二个和第三个操作数的提升类型。

通常，语言遵循一长串规则来得出三元条件运算符的结果类型。如果您需要更多详细信息，请阅读语言规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:34:01.567

**已编辑** 因为`println`超载。它必须解析为其中一种形式，并选择捕获两者的最小类型（第一个 2 示例的 int 和 double ）： `void println(double x)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:35:20.127

使用普通类型。0可以无损转换为double。(cond) 的结果？res1 : res2 必须是一种返回类型。

# c - 在状态工具栏中打印变量

> ID：10017193
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:31:15.490
> 
> 标签：c, winapi, user-interface

我想在程序的状态工具栏上打印一个 int 变量的内容。事实上，我知道这个变量的最大大小为 15，假设用户正确输入了其中的 12 个，那么我想打印类似的内容：

> 正确输入 12/15 属性。

我知道我可以在状态栏上打印文本

> SendMessage(hStatus, SB_SETTEXT, 0, (LPARAM) "输入完成，输出输出完成。");

而且我也知道我可以打印变量数组。但我不知道如何以类似于这样的样式打印它们：

> printf("正确输入 %d/15 个属性", Attributes);

请注意，此变量会不断变化，但我只想在用户按下特定按钮时更改状态栏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:50:31.397

您可以使用`sprintf()`将格式化输出打印到字符数组。

```
char buffer [256];
sprintf(buffer, "Correctly input %d/15 attributes", Attributes);
SendMessage(hStatus, SB_SETTEXT, 0, (LPARAM)buffer); 
```

# asp.net - 使用 asp.net 在服务器端运行 vbscript

> ID：10017194
> 
> 赞同：3
> 
> 时间：2012-04-04T18:31:19.857
> 
> 标签：asp.net, vbscript

提前对任何拼写错误表示抱歉（英语不是我的第一语言）。

我想使用 asp.net 应用程序中的按钮（即从客户端）在服务器端运行 .vbs 文件。vbs 文件可以包含像 msgBox("Hello World!") 这样简单的内容，它位于托管页面的服务器中，此外，它与 .aspx 文件位于同一文件夹中。

我尝试在 Button_Click 事件中使用此代码：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
process.StartInfo.WorkingDirectory = Request.MapPath("~/");
process.StartInfo.FileName = Request.MapPath("displayHelloWorldOnTheServer.vbs");
process.Start(); 
```

但脚本似乎没有运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:34:09.627

vbs 脚本不会编译和执行。它由 wscript 或 cscript 解释。

尝试

```
process.StartInfo.FileName = "cscript";
process.StartInfo.Arguments = Request.MapPath("displayHelloWorldOnTheServer.vbs");
process.Start(); 
```

# sql - 如何在查询中告诉我不想重复？

> ID：10017202
> 
> 赞同：0
> 
> 时间：2012-04-04T18:31:35.043
> 
> 标签：sql, postgresql

所以我得到了这个查询，它是从这样的表中提取的：

种植园表

```
PLANT ID,   Color Description 
1           Red
2           Green
3           Purple 
```

蔬菜桌

```
VegetabkeID, PLANT ID, Feeldesc
199            1        Harsh
200            1        Sticky
201            2        Bitter
202            3        Bland 
```

现在在我的查询中，我使用 PLANT ID 加入他们（我使用左连接）

```
PLANT ID, Color Description, Feeldesc
1           Red               Harsh             
1           Red               Sticky
2           Green             Bitter
3           Purple            Bland 
```

所以问题是在查询中你可以看到红色出现了两次！我不能有这个，我不知道如何让连接发生，但阻止红色出现两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:06:22.473

您似乎很可能在问如何对*指示进行分组*——也就是说，仅在该组的第一行显示一个标识或描述该组的值。在这种情况下，您想使用 lag() 窗口函数。

假设架构和数据的设置是这样的：

```
create table plant (plantId int not null primary key, color text not null);
create table vegetable (vegetableId int not null, plantId int not null,
             Feeldesc text not null, primary key (vegetableId, plantId));
insert into plant values (1,'Red'),(2,'Green'),(3,'Purple');
insert into vegetable values (199,1,'Harsh'),(200,1,'Sticky'),
                             (201,2,'Bitter'),(202,3,'Bland'); 
```

您显示的结果（模数列标题）可以通过这个简单的查询获得：

```
select p.plantId, p.color, v.Feeldesc
  from plant p left join vegetable v using (plantId)
  order by plantId, vegetableId; 
```

如果您希望在第一行之后禁止显示重复信息，则此查询将执行此操作：

```
select
    case when plantId = lag(plantId) over w then null
         else plantId end as plantId,
    case when p.color = lag(p.color) over w then null
         else p.color end as color,
    v.Feeldesc
  from plant p left join vegetable v using (plantId)
  window w as (partition by plantId order by vegetableId); 
```

结果如下所示：

```
 plantid | color  | feeldesc 
---------+--------+----------
       1 | Red    | Harsh
         |        | Sticky
       2 | Green  | Bitter
       3 | Purple | Bland
(4 rows) 
```

就在这周，我不得不做类似上面的事情来直接从 psql 中生成一个列表，这对最终用户来说很容易阅读；否则我永远不会想到您可能会询问此功能。希望这能回答你的问题，尽管我可能完全不在话下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:47:06.840

检查文档中的 array_agg 函数，它可以像这样使用：

```
SELECT
     v.plantId
    ,v.color
    ,array_to_string(array_agg(v.Feeldesc),', ')
FROM
    vegetable
    INNER JOIN plant USING (plantId)
GROUP BY
    v.plantId
    ,v.color 
```

或使用

```
SELECT DISTINCT
     v.plantId
    ,v.color
FROM
   vegetable
   INNER JOIN plant USING (plantId) 
```

免责声明：手写，预期语法错误:)

# ruby-on-rails-3 - 验证rails中字符串的奇异性

> ID：10017205
> 
> 赞同：1
> 
> 时间：2012-04-04T18:31:42.483
> 
> 标签：ruby-on-rails-3, validation

任何人都知道是否有任何内置到轨道中的效果`validates_signularity_of :string`？我找不到任何类似的文档，但只是想检查一下。我想验证用户可以输入的字符串始终是单数单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:49:34.957

一种方法是利用该`singularize`方法。

如果对字符串进行单数化会产生相同的字符串，则该字符串已经是单数的。否则，它是复数。

像下面这样的自定义验证器可能会起作用：

```
class SingularValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)
    unless value.to_s.singularize == value
      object.errors[attribute] << (options[:message] || "is not singular") 
    end
  end
end 
```

然后在你的模型中：

```
validates :column_name, :singular => true 
```

信用：从 Ryan 的 Railscast #211 中提取的自定义验证器的基本结构

# sqlite - How to use XULRunner to run SQLite Manager outside of Firefox in Mac OS X Lion?

> ID：10017206
> 
> 赞同：2
> 
> 时间：2012-04-04T18:31:45.790
> 
> 标签：sqlite, firefox, xulrunner, sqlitemanager

I have installed XULRunner 11.0 (xr) from here:

[Downloads - sqlite-manager - Extension for Firefox and other apps to manage any sqlite database - Google Project Hosting](http://code.google.com/p/sqlite-manager/downloads/list)

I have followed the steps listed here:

[kiveo - Mac SQLite Manager Standalone App](http://www.kiveo.net/blog/mac-sqlite-manager-standalone-app/)

I have read and tried the suggestions here (though they're for version 6.0):

[stackoverflow: How to Install and run a XulRunner Application on Mac OS X?](https://stackoverflow.com/questions/7332736/how-to-install-and-run-a-xulrunner-application-on-mac-os-x)

I am able to get the help listing with this command:

```
/Library/Frameworks/XUL.framework/xulrunner-bin -h 
```

I am able to run the app from Firefox using this command (after changing the max version in sqlitemanager-xr-0/application.ini to 11.0 from 11.0a1):

```
/Applications/Firefox.app/Contents/MacOS/firefox --app ~/Downloads/sqlitemanager-xr-0/application.ini 
```

Here are the contents of the application.ini file:

```
[App]
Name=sqlite-manager
ID=SQLiteManager@mrinalkant.blogspot.com
Version=0.7.7
BuildID=201111132204
Vendor=lazierthanthou
Copyright=Copyright (c) 2008 - 2011 lazierthanthou

[Gecko]
MinVersion=2.0
MaxVersion=11.0

[XRE]
EnableExtensionManager=1 
```

When I run the following command in Terminal, with or without sudo, it just immediately returns to the command prompt. There are no error messages. No application appears under Applications. Nothing seems to happen at all. (And, despite the stackoverflow page above noting that --install-app may not really be supported, it is in the XULRunner help listing - which I guess doesn't necessarily mean it'll work ;)

```
/Library/Frameworks/XUL.framework/xulrunner-bin --install-app Downloads/sqlitemanager-xr-0/ /Applications 
```

Following a suggestion below, I checked for an exit code. The line above is returning 2.

Help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:55:52.400

就像你对 Firefox 所做的那样，这个命令应该运行你的应用程序：

```
/Library/Frameworks/XUL.framework/xulrunner-bin --app ~/Downloads/sqlitemanager-xr-0/application.ini 
```

此外，该`--app`开关在 XULRunner 中是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T13:09:36.657

下面介绍如何制作一个可以从 Dock 运行的独立应用程序。

使用该`xulrunner --install-app`命令创建应用程序，然后将 的所有内容复制`XUL.framework/Versions/Current`到生成的应用程序中`/Applications/sqlite-manager.app/Contents/MacOS`。

[然后，您可以使用此处](https://superuser.com/questions/271678/how-do-i-pass-command-line-arguments-to-dock-items)`application.ini`所述的文件创建一个包装脚本，该脚本在生成的应用程序中运行 xulrunner 。

例如，将以下内容放入`sqlite-manager.app/Contents/MacOS/sqlite-manager`并使其可执行。

```
#!/usr/bin/env bash

APP_PATH="/Applications/sqlite-manager.app"

"$APP_PATH/Contents/MacOS/xulrunner" --app "$APP_PATH/Contents/Resources/application.ini" 
```

现在你必须告诉 OS X 运行`sqlite-manager`而不是`xulrunner`. 您可以通过编辑`sqlite-manager.app/Contents/info.plist`和设置`CFBundleExecutable`来做到`sqlite-manager`这一点：

```
<key>CFBundleExecutable</key>
<string>sqlite-manager</string> 
```

这种方法的唯一限制是当您移动应用程序或重命名它时它会中断。我喜欢关于如何摆脱 sqlite-manager 脚本中的绝对路径的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T15:51:56.363

尝试这个：

```
firefox -chrome chrome://sqlitemanager/content/sqlitemanager.xul
```

或在 OS X 上

```
/Applications/Firefox.app/Contents/MacOS/firefox -chrome chrome://sqlitemanager/content/sqlitemanager.xul
```

（可在[http://www.egeek.me/2013/09/07/how-to-run-sqlite-manager-with-a-single-command/](http://www.egeek.me/2013/09/07/how-to-run-sqlite-manager-with-a-single-command/)找到）

对我来说在 UBUNTU 12.04 上可以很好地启动 sqlite 管理器而无需先启动 firefox

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T05:52:12.127

如果安装成功，我认为该应用程序应该可以在您系统的某个常用位置使用（未提及，但我猜是 OSX :)。您是否查看过 /Applications 下的内容？

要查看命令是否悄悄失败，您可以检查它的返回值。有详细的开关吗？

```
$ cd narnia
bash: cd: narnia: No such file or directory
$ echo $?
1
$ cd .
$ echo $?
0
$ cd narnia && echo "success"
bash: cd: narnia: No such file or directory
$ cd . && echo "success"
success 
```

# c - 从文件中获取不带标点符号的字符串，以便使用原始标点符号进行拼写检查。

> ID：10017210
> 
> 赞同：1
> 
> 时间：2012-04-04T18:32:08.467
> 
> 标签：c, string

嗨，我正在用 c 语言制作一个拼写检查器，它在字符串数组中有一个字典，并使用二进制搜索在字典中查找单词。

我的问题是我正在尝试从文件中读取文本并将文本输出回新文件，其中错误的单词突出显示如下：** 拼写错误 ** 但该文件将包含诸如 .,!? 它应该输出到新文件，但在将单词与字典进行比较时显然不存在。

所以我想要这个：

```
text file: "worng!"

new file: "** worng **!" 
```

我一直在尽我所能解决这个问题，并且在谷歌上花了很长时间，但离解决方案还差得远。到目前为止，我已经编写了以下代码来读取每个字符并填充两个 char 数组一个小写临时用于字典比较，一个输入用于原始单词，如果没有标点符号则可以使用，但显然当标点符号存在时我会以这种方式释放空间我'确定有更好的方法可以做到这一点，但我找不到它，所以任何指针都会受到赞赏。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX_STRING_SIZE 29  /*define longest non-technical word in english dictionary plus 1*/

/*function prototypes*/
int dictWordCount(FILE *ptrF);  /*counts and returns number of words in dictionary*/
void loadDictionary(char ***pArray1, FILE *ptrFile, int counter);   /*create dictionary array from file based on word count*/
void printDictionary(char **pArray2, int size); /*prints the words in the dictionary*/
int binarySearch(char **pArray3, int low, int high, char *value);   /*recursive binary search on char array*/

void main(int argc, char *argv[]){
    int i;  /*index*/
    FILE *pFile;    /*pointer to dictionary file*/
    FILE *pInFile;  /*pointer to text input file*/
    FILE *pOutFile; /*pointer to text output file*/
    char **dict;    /*pointer to array of char pointer - dictionary*/
    int count;      /*number of words in dictionary*/
    int dictElement;    /*element the word has been found at returns -1 if word not found*/

    char input[MAX_STRING_SIZE];    /*input to find in dictionary*/
    char temp[MAX_STRING_SIZE];
    char ch;    /*store each char as read - checking for punctuation or space*/
    int numChar = 0; /*number of char in input string*/

    /*************************************************************************************************/
    /*open dictionary file*/
    pFile = fopen("dictionary.txt", "r");   /*open file dictionary.txt for reading*/
    if(pFile==NULL){    /*if file can't be opened*/
        printf("ERROR: File could not be opened!/n");
        exit(EXIT_FAILURE);
    }

    count = dictWordCount(pFile);
    printf("Number of words is: %d\n", count);

    /*Load Dictionary into array*/
    loadDictionary(&dict, pFile, count);

    /*print dictionary*/
    //printDictionary(dict, count);
    /*************************************************************************************************/
    /*open input file for reading*/
    pInFile = fopen(argv[1], "r");
    if(pInFile==NULL){  /*if file can't be opened*/
        printf("ERROR: File %s could not be opened!/n", argv[1]);
        exit(EXIT_FAILURE);
    }
    /*open output file for writing*/
    pOutFile = fopen(argv[2], "w");
    if(pOutFile==NULL){ /*if file can't be opened*/
        printf("ERROR: File could not be created!/n");
        exit(EXIT_FAILURE);
    }

    do{
        ch = fgetc(pInFile);                /*read char fom file*/

        if(isalpha((unsigned char)ch)){     /*if char is alphabetical char*/
            //printf("char is: %c\n", ch);
            input[numChar] = ch;            /*put char into input array*/
            temp[numChar] = tolower(ch);    /*put char in temp in lowercase for dictionary check*/
            numChar++;                      /*increment char array element counter*/
        }
        else{
            if(numChar != 0){
                input[numChar] = '\0';  /*add end of string char*/
                temp[numChar] = '\0';

                dictElement = binarySearch(dict,0,count-1,temp);    /*check if word is in dictionary*/

                if(dictElement == -1){  /*word not in dictionary*/
                    fprintf(pOutFile,"**%s**%c", input, ch);
                }
                else{   /*word is in dictionary*/
                    fprintf(pOutFile, "%s%c", input, ch);
                }
                numChar = 0;    /*reset numChar for next word*/
            }
        }
    }while(ch != EOF);

    /*******************************************************************************************/
    /*free allocated memory*/
    for(i=0;i<count;i++){
        free(dict[i]);
    }
    free(dict);

    /*close files*/
    fclose(pInFile);
    fclose(pOutFile);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:36:32.243

我不是 100% 确定我是否正确理解了您的问题，但我会试一试。

首先，你的循环

```
do{
    ch = fgetc(pInFile);
    /* do stuff */
}while(ch != EOF); 
```

当到达文件末尾时也会运行，因此如果文件的最后一个字节是按字母顺序排列的，您将`EOF`在输出文件中打印一个不需要的字节，或者，因为您在将其传递`ch`给`unsigned char`时强制转换为`isalpha()`，这通常会导致255 [for `EOF = -1`and 8 bit `unsigned char`]，它将在某些语言环境（例如 en_US.iso885915）中被视为字母字符，这会导致抑制输入文件的最后一个单词。

`ch`为了解决这个问题，首先，在传递给 时不要强制转换`isalpha()`，其次在循环中添加一些逻辑以防止无意处理`EOF`. 如果需要，我选择用换行符替换它，因为这很简单。

然后它仍然打印出不立即跟随字母字符的非字母字符：

```
do{
    ch = fgetc(pInFile);                /*read char fom file*/

    if(isalpha(ch)){                    /*if char is alphabetical char*/
        //printf("char is: %c\n", ch);
        input[numChar] = ch;            /*put char into input array*/
        temp[numChar] = tolower(ch);    /*put char in temp in lowercase for dictionary check*/
        numChar++;                      /*increment char array element counter*/
    }
    else{
        if(numChar != 0){
            input[numChar] = '\0';  /*add end of string char*/
            temp[numChar] = '\0';

            dictElement = binarySearch(dict,0,count-1,temp);    /*check if word is in dictionary*/

            if(dictElement == -1){  /*word not in dictionary*/
                fprintf(pOutFile,"**%s**%c", input, (ch == EOF) ? '\n' : ch);
            }
            else{   /*word is in dictionary*/
                fprintf(pOutFile, "%s%c", input, (ch == EOF) ? '\n' : ch);
            }
            numChar = 0;    /*reset numChar for next word*/
        }
        else
        {
            if (ch != EOF) {
                fprintf(pOutFile, "%c",ch);
            }
        }
    }
}while(ch != EOF); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:21:47.180

现在看起来，如果 char 不是按字母顺序排列的，它会触发`else`块，`if(isalpha((unsigned char)ch)){`并且字符本身会被忽略。

如果您添加一条语句以完全按照输入的方式打印所有非字母字符，我认为这可以实现您想要的。这需要进入该`else`块内部和块之后，`if(numChar != 0){`并且只是一个简单的 fprintf 语句。

# ipad - iOS NewsStand SDK/Framework

> ID：10017211
> 
> 赞同：0
> 
> 时间：2012-04-04T18:32:26.900
> 
> 标签：ipad, newsstand-kit

I am trying to find out how to create magazines for the iPad using NewsStand, I have read through all the info on the Apple developer website but cannot find a link to download the NewsStand SDK/Framework?

Am I missing something here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:36:50.800

看看这个[iOS 报亭教程](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T05:59:11.093

如果您已下载最新的 XCode 和 iOS SDK，则无需下载任何内容。NS 框架是 iOS 5 SDK 的一部分，只需将它包含在您的项目中，就像您为其他框架所做的那样。

# visual-studio - Visual Studio 自行添加“MixedPlatform”解决方案配置

> ID：10017213
> 
> 赞同：1
> 
> 时间：2012-04-04T18:32:42.630
> 
> 标签：visual-studio

我们有一个只有 Debug/AnyCPU 和 Release/AnyCPU 的大型解决方案。有时，Visual Studio (2010sp1) 会自行插入“混合平台”配置。由于我们有一些项目（网络）设置为不构建在我们的配置中，这与我们的构建相混淆。这也使提交源代码管理变得痛苦，因为差异不断显示 sln 已更改，我必须重置它。

有没有人遇到过这个？

# json - JSON to Map[String,JsObject] with Play 2.0？

> ID：10017214
> 
> 赞同：5
> 
> 时间：2012-04-04T18:32:43.913
> 
> 标签：json, scala, playframework, playframework-2.0

我是两个 Play 的新手！& Scala，但我正在尝试创建一个服务，将 JSON 请求映射到 Map[String,JsObject]（或 Map[String,JsValue]，我不确定区别），然后输出一个列表通过映射递归的键（最好是一棵树）。

但我有开始问题：

```
def genericJSONResponse = Action(parse.json) {
  request => request.body
  var keys = request.keys
  Ok("OK")
} 
```

我在这里期望的是用请求中的密钥填充密钥，但当然，它不会编译。鉴于上述描述，我应该如何处理这个问题？

在此先感谢您帮助 Scala 菜鸟 :-)

尼克

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T20:05:23.437

`JsValue`是所有 JSON 值的基类。`JsObject`是`JsValue`（与`JsNull`, `JsUndefined`, `JsBoolean`, `JsNumber`, `JsString`, 和一起`JsArray`）的子类型。如果不清楚，请查看 JSON 规范：http: [//json.org/](http://json.org/)

如果您知道正文请求中的 JSON 是 JSON 对象（与上面列出的其他类型相反），您可以对其进行模式匹配：

```
def genericJSONResponse = Action(parse.json) { request =>
  request.body match {
    case JsObject(fields) => Ok("received object:" + fields.toMap + '\n')
    case _ => Ok("received something else: " + request.body + '\n')
  }
} 
```

`fields.toMap`是您想要的类型：`Map[(String, JsValue)]`因此您可以使用`map`or`collect`递归地处理对象的键。（顺便说一句，你可以`fields`直接使用，因为它是 a和`Seq[(String, JsValue)]`支持的）。`map``collect`

# android - EditText 显示文本略微偏离？

> ID：10017219
> 
> 赞同：0
> 
> 时间：2012-04-04T18:33:00.747
> 
> 标签：android, android-widget, android-edittext

我正在使用 EditText 来显示我的应用程序的 EULA。EditText 被标记为 singleLine=false 和 enabled = false。

当我 ev.setText='....' 时，文本出现略微向左移动 1 和 1/2 个字符加上向下 1 和 1/2 行。也就是说，文本没有正确注册/显示到左上角。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T04:18:00.847

为什么是 EditText？似乎 TextView 将是显示它的更合适的工具。

至于文本位置，听起来您在 XML 中指定了填充（或边距，或两者）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T04:25:49.290

以下代码有效：

```
myEtLoginEula.setEnabled(false);        
myEtLoginEula.setVisibility(View.VISIBLE);      
myEtLoginEula.setText(myJS.getString("EULAText").replace("<br>","\n") + "\n");
myEtLoginEula.setScroller(new Scroller(getBaseContext()));    
myEtLoginEula.setVerticalScrollBarEnabled(true);  
myEtLoginEula.setMovementMethod(new ScrollingMovementMethod()); 
```

我之前是`.setText(myJS...)` **在**`.setMovementMethod`. 它不喜欢那样。这几个月我最初都是从另一个关于滚动的 SO 问题中获得的。似乎现在可以工作了。我将重新访问`TextView`而不是`EditText`。感谢您的耐心等待，因为我是 SO 回复的新手！

# apache - 使用 Apache 重写 URL 以重定向根域

> ID：10017224
> 
> 赞同：2
> 
> 时间：2012-04-04T18:33:34.090
> 
> 标签：apache, mod-rewrite, url-rewriting

我有这种情况，我想使用以下方案重定向我的域。如果这可以在 Apache 中使用 RewriteRule 实现，您能否提出建议？

我想重定向使用[http://www.domainname.com/url](http://www.domainname.com/url)进行的任何调用以重定向到[http://domainname.com/url](http://domainname.com/url)。

我能够使用以下重写规则实现上述目标

```
# BEGIN WithoutWWW
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.domainname\.com$ [NC]
RewriteRule ^(.*)$ http://domainname.com/$1 [R=301,L]
# END WithoutWWW 
```

如果有人试图访问[http://www.domainname.com](http://www.domainname.com)或[http://domainname.com](http://domainname.com)，我希望他们重定向到[http://dname.com](http://dname.com)

如何在 Apache 中使用 RewriteRule 实现此规则？我也在使用 PHP，所以使用 PHP 的解决方案也是有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:11:07.907

这是您的 .htaccess 与现有代码和新代码的组合：

```
RewriteEngine on

# redirect domainname.com/ or www.domainname.com/ to dname.com/
RewriteCond %{HTTP_HOST} ^(www\.)?domainname\.com$ [NC]
RewriteRule ^$ http://dname.com [R=301,L]

# append www to domainname.com    
RewriteCond %{HTTP_HOST} ^www\.domainname\.com$ [NC]
RewriteRule ^ http://domainname.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:47:33.610

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteRule ^(.*)$ http://domainname.com/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:44:47.793

该示例看起来像 mod_rewrite。使用 mod_rewrite 你可以这样做：

```
# BEGIN WithoutWWW
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?domainname\.com$ [NC]
RewriteRule ^(.*)$ http://dname.com/$1 [R=301,L]
# END WithoutWWW 
```

你可能想看看[http://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

根据您的评论，您希望以不同的方式重定向根目录，以便我们可以这样做：

```
RewriteEngine on
#www.domainname.com & domainname.com -> dname.com
RewriteCond %{HTTP_HOST} ^(www\.)?domainname\.com$ [NC]
RewriteRule ^$ http://dname.com/ [R=301,L]

#www.domainname.com/[url] -> domainname.com/[url]
RewriteCond %{HTTP_HOST} ^www\.domainname\.com$ [NC]
RewriteRule ^(.*)$ http://domainname.com/$1 [R=301,L] 
```

# ruby-on-rails - 如何使用 Ruby on Rails 创建 Wiki？

> ID：10017226
> 
> 赞同：0
> 
> 时间：2012-04-04T18:33:42.377
> 
> 标签：ruby-on-rails, wiki

我最近接到了一项任务，要使用 Ruby on Rails 创建一个博客。所以我找到了一个[很有帮助的指南](http://guides.rubyonrails.org/getting_started.html)，对博客很有帮助。然而，关于创建一个最新的、有意义且准确的 wiki 的优秀 Ruby-on-Rails 指南似乎供不应求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:41:45.257

您可以检查 wiki 的现有 gem：[https ://www.ruby-toolbox.com/categories/wiki_apps](https://www.ruby-toolbox.com/categories/wiki_apps)

有 3 个基于 rails 的 wiki。

最活跃的是[https://github.com/alno/irwi](https://github.com/alno/irwi)。

其他两个[https://github.com/queso/signal-wiki](https://github.com/queso/signal-wiki)和[https://github.com/AndyMoreland/kii](https://github.com/AndyMoreland/kii)多年未更新，但您仍然可以尝试查看资源以获取基本想法

# configuration - 保存 Glassfish JDBC 配置

> ID：10017228
> 
> 赞同：0
> 
> 时间：2012-04-04T18:33:50.727
> 
> 标签：configuration, database-connection, glassfish-3, connection-pooling

我最近不得不从头开始重新安装 Glassfish 3.1.2，我发现自己花了太多时间重新配置 JDBC 连接池和资源（不能从其他来源复制/粘贴）。许多应用程序使用服务器，在配置 JDBC 连接时需要记住很多事情。

有没有办法将 Glassfish JDBC 配置“保存”到文件中，以便我可以轻松地将其上传到新版本的服务器（或另一台机器上的新服务器），而不会再次失去理智？快速破解也将受到高度赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:01:00.703

服务器范围的应用程序资源存储在元素内的*domain.xml*文件中。`<resources>`有`<jdbc-resource>`和`<jdbc-connection-pool>`元素可以存储您的连接。根据我的经验，您可以将这些元素从一个*domain.xml*文件复制到另一个文件（至少对于 Glassfish 的所有 3.x 版本）。

应用程序范围的资源可以存储在*glassfish-resources.xml*文件中， EAR需要进入*META-INF*目录， WAR需要进入*WEB- INF 目录。*它们将与应用程序一起部署，并且只能由该应用程序访问。更多信息[在这里](http://docs.oracle.com/cd/E18930_01/html/821-2417/giydj.html)。

# android - android打开PackageManager作为对话框

> ID：10017230
> 
> 赞同：1
> 
> 时间：2012-04-04T18:33:55.920
> 
> 标签：android

嗨，我正在从我的应用程序中打开另一个应用程序。我想在对话框中显示另一个应用程序。那么我的选择是什么。我正在尝试下面的代码...

```
public class PictureGallery extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    PackageManager pm = getPackageManager();
    Intent intent = pm.getLaunchIntentForPackage("com.abc.me");
    startActivity(intent); ???
    setContentView(intent); ????
   }
} 
```

我将该活动的主题设置为对话框。那么如何设置 setContentView 因为它不是布局而是差异。活动 ？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:41:09.917

> 我正在从我的应用程序中打开另一个应用程序。我想在对话框中显示另一个应用程序。

你根本不能这样做，对不起。

# jquery - 如何确保@Html.Action 的部分重新渲染将在 $(document).ready(function () {}) 之前完成？

> ID：10017233
> 
> 赞同：0
> 
> 时间：2012-04-04T18:34:06.713
> 
> 标签：jquery, asp.net-mvc-3

如何确保在 $(document).ready(function () {}) 被触发之前完全呈现 @Html.Action 的部分重新渲染？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:36:27.110

它当然会在任何客户端 javascript 在`ready`函数中运行之前呈现，因为`@Html.Action()`呈现在*服务器端*。（并`ready`在来自服务器的文档完成加载后运行。）

# r - 如何在 R 中模拟 Lisp 的 let 函数？

> ID：10017250
> 
> 赞同：3
> 
> 时间：2012-04-04T18:35:33.210
> 
> 标签：r, functional-programming, evaluation

我正在尝试编写一个`let`允许我执行以下操作的函数：

```
let(a=2, b=3, a+b)
>>> 5 
```

目前我坚持

```
let <- function(..., expr) {
  with(list(...), quote(expr))
} 
```

这根本不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T18:40:39.577

这是一种方法：

```
let <- function(..., expr) {
    expr <- substitute(expr)
    dots <- list(...)
    eval(expr, dots)
}

let(a = 2, b = 3, expr = a+b)
# [1] 5 
```

**编辑**：或者，如果您不想命名要评估的表达式（即通过 via 传递它`expr`），*并且*如果您确定它将始终是最后一个参数，您可以执行类似这样的操作.

```
let <- function(...) {
    args <- as.list(sys.call())[-1]
    n <- length(args)
    eval(args[[n]], args[-n])
}

let(a = 2, b = 3, a + b)
# [1] 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:49:49.900

```
let <- function(a,b, expr=a+b){return(expr)}
let(2,3)
# [1] 5 
```

# templates - 采用 STL 思维框架的提示

> ID：10017252
> 
> 赞同：0
> 
> 时间：2012-04-04T18:35:40.320
> 
> 标签：templates, collections, stl, iterator

在过去的 6 年里，我几乎完全是一名 C# 程序员。我现在正在做一个项目，其中 C++ 是首选语言，STL 是我们的集合库。

在使用 C# 的 LINQ 之后，我很难进入 STL 的思维框架。

例如：编写一个等效的 IEnumerator.Select。

C＃

```
public static IEnumerator<Output> Select(this IEnumerator<Input> input, Func<Input, Output> func) {
  while (input.MoveNext) {
    yield return func(input.Current);
  }
} 
```

超级容易。

现在尝试用 C++ 和 STL 编写类似的东西。（撇开 yield 关键字和匿名函数的方便语法问题）。

如果不首先回答一些困难的问题，它甚至无法完成。因为 STL 枚举器使用枚举器间比较而不是 MoveNext，所以您必须确定枚举器的终端值是什么。然后你必须搞砸所有的 iterator_traits 废话。STL 使用编译时模板分派而不是运行时动态分派，因此您的迭代器不仅必须在输入枚举器的 value_type 上进行模板化，而且还必须在特定类型的输入枚举器上进行模板化。

甚至不要让我开始尝试在 STL 中编写 map-join 迭代器。

通过查看其他人编写的代码，我得出结论，未使用 Boost 增强的 STL 很少用于集合和排序以外的任何事情。

我最近的观察是：

1.  有没有办法在 STL 中简洁地编写突变迭代器？
2.  你如何简洁地将一个集合复制到另一个集合中？

更一般地说，我注意到一些与我习惯的思维方式相冲突的事情：

1.  STL 代码似乎并不简洁。在编写 STL 代码时，我编写简洁代码的目标是一种责任吗？（不简洁，我的意思是，通常涉及很长的类型标识符）
2.  Boost 似乎是在 STL 中编写算法的近乎要求。不允许使用 Boost 的人会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:38:20.917

你的一些问题对我来说真的没有多大意义。例如，您谈到必须处理“enumerator_traits”。我不太确定你在说什么。也许你的意思是`iterator_traits`？我不记得曾经使用过任何称为“enumerator_trait”的东西，我也找不到在 C++ 标准中提到过这样的东西。

`iterator_traits`至少存在，但它们是我很少“搞砸”的东西。我从外围知道他们的存在，但仅此而已。我已经编写了相当多的迭代器和算法，但从未对其中任何一个做过任何具体`iterator_traits`的事情。

让我们来解决创建一个新集合的具体问题，该集合是另一个集合的排序版本。这在许多不同的方面都相当容易。 `std::partial_sort_copy`当然可以这样做：

```
#include <algorithm>
#include <vector>
#include <iterator>
#include <iostream>

int main() { 

    std::vector<int> input;

    // generate some data to sort
    std::generate_n(std::back_inserter(input), 20, rand);

    // a destination for the sorted data:
    std::vector<int> result(input.size());

    // do the sort/copy:
    std::partial_sort_copy(input.begin(), input.end(),
        result.begin(), result.end());

    // show the sorted data:
    std::copy(result.begin(), result.end(), 
        std::ostream_iterator<int>(std::cout, "\n"));

    return 0;
} 
```

然而，出于许多目的，制作副本更容易，然后排序：

```
std::vector<int> result(input.begin(), input.end());
std::sort(result.begin(), result.end()); 
```

如果您真的希望它简洁，您可以将副本复制到先天排序的数据结构中：

```
std::multiset<int> result(input.begin(), input.end()); 
```

然而，最后一个通常会牺牲一点效率来缩短代码。在许多（大多数？）情况下，这不是问题，但如果您发现它太慢，可以轻松获得更快的替代方案。

# javascript - Jquery 验证不起作用。jQuery - Javascript

> ID：10017256
> 
> 赞同：0
> 
> 时间：2012-04-04T18:35:47.860
> 
> 标签：javascript, jquery

我的问题是使用 Jquery 验证我的表单。我的验证`validate`仅适用于该功能，但随后我添加了该`submit`选项并且验证未进行。我想验证我的表单，然后执行提交。

```
$(document).ready(function () {
    $('#ReqCreateForm').validate({
         invalidHandler: function (e, validator) {
            var errors = validator.numberOfInvalids();
            if (errors) {
                var message = errors == 1
                ? 'Missing 1 field'
                : 'Missing fields';
                $("div.error span").html(message);
                $("div.error").show();
            } else {
                $("div.error").hide();
            }
        },
        onkeyup: false,
        highlight: function (element) {
            $(element).addClass('error');
        }, unhighlight: function (element) {
            $(element).removeClass('error');
        }
    });

    $('#ReqCreateForm').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                alert("All Great!");
            },
            error: function (jqXhr, textStatus, errorThrown) {
                alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
            }
        });
        return false;
    });
}); 
```

提前致谢。

**解决方案：**

解决方案非常简单。在我的提交选项中添加了以下代码，之前`$.ajax`。

```
 if (!$(this).valid()) {
         return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:41:28.620

您必须在提交按钮的单击处理程序上调用有效函数，如下所示：

```
if($('#ReqCreateForm').valid())
{
    //then do your thing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:38:37.530

我使用[这个](http://jquery.malsup.com/form/)插件使用 Ajax 提交表单。它有一个名为 onbeforesubmit 的事件，您可以在其中毫无问题地调用验证。也许你想试试。在您的情况下，您需要在向 ajax 调用提交数据之前捕获该事件以对其进行验证（以防您不想使用我建议的插件）

# twitter - 检测回复推文

> ID：10017259
> 
> 赞同：0
> 
> 时间：2012-04-04T18:35:57.230
> 
> 标签：twitter, detection, tweets, reply

> **可能重复：**
> [对特定推文、Twitter API 的回复](https://stackoverflow.com/questions/2693553/replies-to-a-particular-tweet-twitter-api)

有没有一种好方法可以检测一条推文是否是对另一条推文的回复。

现在我正在考虑检查推文的第一个字符 - 如果它是一个`@`，那么它就是一个回复。但这也会选择像`@veosotano did an awesome commit today`.

所以我的问题是，是否有更好的方法来检测回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:43:09.313

每条推文都有几个以“in_reply_to”开头的属性......我猜如果这些存在，那么推文就是回复：

[https://dev.twitter.com/docs/twitter-ids-json-and-snowflake](https://dev.twitter.com/docs/twitter-ids-json-and-snowflake)

他们还将帮助您确定这是对谁的回复，以及针对什么推文。

# java - 阶乘挑战。（初学者挑战）

> ID：10017267
> 
> 赞同：2
> 
> 时间：2012-04-04T18:36:42.797
> 
> 标签：java, math, factorial

我尝试了以下挑战：

给定前几个阶乘：

1！= 1

2！= 2 x 1 = 2

3！= 3 x 2 x 1 = 6

4！= 4 x 3 x 2 x 1 = 24

前 15 个阶乘的总和是多少，不包括 0！？

我在 Java 中的解决方案如下：

```
public class Factorial
{
   public static void main(String[] args)
   {
     int sum = 0;    
     int multi = 1;
        for (int i=1;i<=15;i++)         
        {
        multi = multi*i;
        sum = multi+sum;     
        }     
     System.out.print(sum);
   }
} 
```

我验证了前 7 个阶乘的解决方案，但它适用于前 15 个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:40:49.760

[由于整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)，它不适用于前 15 个阶乘。正确答案是[1401602636313](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=15!%20%2b%2014!%20%2b%2013!%20%2b%2012!%20%2b%2011!%20%2b%2010!%20%2b%209!%20%2b%208!%20%2b%207!%20%2b%206!%20%2b%205!%20#hl=en&sugexp=cfis&gs_nf=1&tok=AwRXDLIVqBpx4EpB0xQ7fw&pq=15!%20%2b%2014!%20%2b%2013!%20%2b%2012!%20%2b%2011!%20%2b%2010!%20%2b%209!%20%2b%208!%20%2b%207!%20%2b%206!%20%2b%205!%20&cp=78&gs_id=2h&xhr=t&q=15!%20%2b%2014!%20%2b%2013!%20%2b%2012!%20%2b%2011!%20%2b%2010!%20%2b%209!%20%2b%208!%20%2b%207!%20%2b%206!%20%2b%205!%20%2b%204!%20%2b%203!%20%2b%202!%20%2b%201!&pf=p&sclient=psy-ab&oq=15!%20%2b%2014!%20%2b%2013!%20%2b%2012!%20%2b%2011!%20%2b%2010!%20%2b%209!%20%2b%208!%20%2b%207!%20%2b%206!%20%2b%205!%20%2b%204!%20%2b%203!%20%2b%202!%20%2b%201!&aq=f&aqi=&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=976397350e8ab85&biw=1366&bih=643)，它超过了 Java 的`int`2147483647 的界限。您可以使用`long`界限为 9223372036854775807 的 a 或 a [`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:43:02.257

不，它不适用于 15。使用时间长。此外，您可以在循环内移动 print 语句，以检查它从哪里开始失败。我猜在这种情况下它是 13。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:54:15.260

那

```
public static void printFactorials (int max) {
    long fac = 1;
    long sum = 0;
    for (int i = 1; i <= max; fac *= ++i) {
        System.out.println(String.format("Factorial(%2d)=%d", i, fac));
        sum += fac;
    }
    System.out.println(String.format("Sum of Factorials(1 to %2d)=%d", max, sum));
} 
```

给你

```
Factorial( 1)=1
Factorial( 2)=2
Factorial( 3)=6
Factorial( 4)=24
Factorial( 5)=120
Factorial( 6)=720
Factorial( 7)=5040
Factorial( 8)=40320
Factorial( 9)=362880
Factorial(10)=3628800
Factorial(11)=39916800
Factorial(12)=479001600
Factorial(13)=6227020800
Factorial(14)=87178291200
Factorial(15)=1307674368000
Sum of Factorials(1 to 15)=1401602636313 
```

`long`21 开始失败，下一步是`BigInteger`

```
public static void printRlyBigFactorials (int max) {
    BigInteger fac = BigInteger.ONE;
    BigInteger sum = BigInteger.ZERO;
    for (int i = 1; i <= max; ++i) {
        fac = fac.multiply(BigInteger.valueOf(i));
        sum = sum.add(fac);
        System.out.println(String.format("Factorial(%2d)=%d", i, fac));
    }
    System.out.println(String.format("Sum of Factorials(1 to %2d)=%d", max, sum));
} 
```

这几乎可以无限期地工作，并且可以为您提供精美的结果，例如：

```
Sum of Factorials(1 to 500)=
1222581999810786173488382263893486121736784649845260488587055662127413631697
9142090995417259894466676137016242713788312106218384177808117660024733369428
7060019503701220190523381023699528466605036804597249531428694859689049295904
5138704466475196055082304091214424335155644013903958356823605973150159110295
5787828433482529258832635575855564789877227459384652114477297831606218655683
9245588828671235437927278554210732477499719243692398907465554636521289870187
5799458234466791378320221140358905721655475503366304295011345436395868843079
5463780536087239619245051615759218253091986494512882003123090598805090122753
7135918455294416676103707115038417384516670399033063650562275830354903359872
0775172343137459008549361297203752431405977559950082400276439557196120290170
5516606073135650288107937474531851451830365876392678959480905477335825506233
3795849463603798966643420966668878072957663827751761832039623225350606860709
6479320263132522604054741925038640750661849690108363701190203548476572823422
7743271977187818002695582046473911765828511673121820261887951566200568565033
40092247479478684738621107994804323593105039052556442336528920420940313 
```

# c# - 如何公开一个数组列表

> ID：10017270
> 
> 赞同：0
> 
> 时间：2012-04-04T18:37:03.240
> 
> 标签：c#, arraylist

在 File1 中，我创建了一个包含 3 个字符串的类。我用公共数组列表创建了另一个类。我希望这个数组列表是动态的，它包含的对象是具有 3 个字符串的类。我可以在文件中访问类的成员，但不能在单独的文件中访问。

文件 1

```
public class SensorCollection
    {
        public string ipAddress;
        public string portNumber;   
        public string physicalLocation;

        public DetectorCollection(string ipAddr, string portNum, string loc)
        {
            this.ipAddress = ipAddr;
            this.portNumber = portNum;
            this.physicalLocation = loc;

        }
    }
    public class SensorCollectionArray
    {
        public System.Collections.ArrayList SensorArrayList;
    }

...
System.Collections.ArrayList DetectorArrayList = new System.Collections.ArrayList(); 
...
  DetectorArrayList.Add(new DetectorCollection(ipAddress, portNum, str)); 
```

所以我可以填充类数组，但不能在单独的文件中访问它。文件 2

```
 AdvancedSettingsForm.SensorCollectionArray mainDetectorCollectionArray;
    System.Collections.ArrayList arrList; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:01:40.280

如果您像这样创建 SensorCollectionArray：

```
SensorCollectionArray mySCA = new SensorCollectionArray(); 
```

然后你可以像这样访问它的 ArrayList （例如，添加一个项目）：

```
mySCA.SensorArrayList.Add(mySensorCollection); 
```

但是请注意，在您发布的代码中，您没有包含 SensorCollectionArray 的构造函数，因此在实例化后 SensorArrayList 将为空。因此，您可以将其设置为单独实例化的 ArrayList，也可以在 SensorCollectionArray 类中创建 ArrayList。

最后说明：如果要创建强类型集合，您可能需要查看通用 List(of T) 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:22:33.787

不完全确定要做什么，但我认为它类似于以下内容。据推测，您正在创建传感器集合，因为您想在将其存储到集合之前应用某种规则。

“这是一个好的传感器吗？它是？将它添加到集合中！”

否则，您可以只使用

```
List<Sensor> mySensors; 
```

而不是真正使用本质上会做同样事情的类。除此之外，就像已经提到的那样，没有真正的理由使用 ArrayList。正如 Marc 在这里指出的那样，使用 ArrayList 最令人信服的理由是，如果[您使用的是 .NET 1.1](https://stackoverflow.com/questions/725459/c-sharp-when-should-i-use-list-and-when-should-i-use-arraylist)；否则，您应该使用通用 List 集合以及它为您做的所有伟大的事情。

```
//Sensor.cs
public class Sensor
{
    public string Ip{ get; set; }
    public string Port{ get; set; }
    public string PhysicalLocation{ get; set }

    public Sensor(string ipAddr, string portNum, string loc)
    {
        Ip= ipAddr;
        Port= portNum;
        PhysicalLocation= loc;
    }
}

//SensorCollection.cs
public class SensorCollection
{
    private List<Sensor> sensors;

    public Sensor this[int i]
    {
        get { return this.sensors[i]; }
        set { this.sensors[i] = value; }
    }

    public IEnumerable<Sensor> Sensors
    {
        get{ return this.sensors; }
    }

    public SensorCollection()
    {
        sensors = new List<Sensor>();
    }

    public SensorCollection(string ip, string port, string location) : this()
    {
        this.sensors.Add(new Sensor(ip, port, location));
    }

    public SensorCollection(Sensor sensor) : this()
    {
        this.sensors.Add(sensor);
    }

    public void AddSensor(Sensor sensor)
    {
        //Determine whether or not to add it
        this.sensors.Add(sensor);
    }

    public void RemoveSensor(Sensor sensor)
    {
        if (sensors.Contains(sensor))
            sensors.Remove(sensor);
    }
} 
```

**编辑**

> 如何访问动态创建的类列表中每个传感器的 IP 地址？

```
var mySensors = new SensorCollection();
mySensors.AddSensor(new Sensor("1.1.1.1", "123", "Home"));
mySensors.AddSensor(new Sensor("9.9.9.9", "123", "Work"));

foreach(Sensor s in mySensors.Sensors)
    Console.WriteLine(s.Ip); 
```

> 我似乎无法访问另一个文件中的类成员

确保它们在同一个命名空间中，或者您包含一个“使用”语句，其中包含您创建的类的命名空间。

# javascript - 调整文本大小以适应静态 div

> ID：10017271
> 
> 赞同：0
> 
> 时间：2012-04-04T18:37:11.790
> 
> 标签：javascript, php, resize

基本上我希望根据文本的长度调整文本的大小。如果我写“WWWWWWWW”，它将调整大小以适应 100px div。如果我写了“测试”，它不会被调整大小，因为它不会打破 100 像素的限制。

我相信你现在明白了。我对任何事情都持开放态度。Javascript，php，无论你提供什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:44:02.823

如果您使用具有固定宽度的字体（即所有字母的宽度相等），那么您可以使用 php 或 javascript 来执行此操作。

使用strlen计算php中的字母数。然后硬编码字体大小，例如这个例子展示了它是如何完成的，并不是最好的方法。如果您有任何问题，请告诉我。

代码没有正常工作，但是

```
if(strlen($text)>5){
  $fontsize = 11px;
} 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:52:46.587

在 PHP 中做这样的事情：

```
$length = strlen($string);

if($length < 5)
{
   $added_class = 'short';
}
elseif($length < 10)
{
   $added_class = 'medium';
}
else
{
   $added_class = 'long';
}

echo '<div class="normal_class '.$added_class.'">'.$string.'</div>'; 
```

在你的 CSS 文件中：

```
div.short { font-size: 15px }
div.medium { font-size: 13px }
div.long { font-size: 10px } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:05:32.813

我认为 javascript 在这里是您的朋友，因为它可以让您最适合文本，而不管用户的浏览器窗口大小如何（如果您在 PHP 中执行此操作并且过大/布局会因某些用户而中断）。

我有一个类似的问题，这让我为此编写了自己的插件。一种解决方案是使用收缩以适应方法，如此[处](https://github.com/chunksnbits/jquery-quickfit)所述。但是，如果您必须适应多个项目或关心性能，例如，在调整窗口大小时，请查看[jquery-quickfit](https://stackoverflow.com/a/3401187/1318800)。

它测量并计算适合文本的每个字母的大小不变测量，并使用它来计算适合文本到容器中的下一个最佳字体大小。

计算被缓存，这使得它在处理多个文本或必须多次调整文本时非常快（例如，在调整窗口大小时，第二次调整大小几乎不会影响性能）。

[演示与您的情况相似](http://chunksnbits.github.com/jquery-quickfit/)

更多文档、示例和源代码在项目页面上。

# c - 在 C 中使用详细选项进行编程

> ID：10017272
> 
> 赞同：3
> 
> 时间：2012-04-04T18:37:13.587
> 
> 标签：c

有人知道如何用详细的选项（选择是否打印消息的选项）以一种很好的方式用 C 语言编写程序。

我的意思是，不要为代码中的每个 printf 编写 if(verbose) 。

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T18:38:16.510

在调用 vfprintf 之类的东西之前，只需使用一个（可变参数）宏/可变参数函数来测试一个标志。

```
/* Crude example. */
void my_log(char *format, ...)
{
    va_list args;
    if (!ok_to_log)
        return;

    va_start(args, format);
    vprintf(format, args);
    va_end(args);
} 
```

### 编辑按要求

稍微修改一下[gnu 示例](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)怎么样：

```
#define eprintf(format, ...) do {                 \
    if (ok_to_print)                              \
        fprintf(stderr, format, ##__VA_ARGS__);   \
} while(0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T18:41:12.207

创建一个函数指针数组

```
print_function_type fx[2] = {quietprint, verboseprint}; 
```

而不是在打印时使用 if ，而是使用数组的正确元素

```
// if verbosemode is 0 call quietprint
// if verbosemode is 1 call verboseprint
fx[verbosemode]("%d", foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:38:35.700

您可以编写自己的类似 printf 的函数来检查详细标志，然后在必要时调用 printf。

# c# - 基于 RFC 5849 OAuth 1.0 的 C# 百分比编码 å 到 %C3%A5

> ID：10017274
> 
> 赞同：0
> 
> 时间：2012-04-04T18:37:18.847
> 
> 标签：c#, ruby, encoding

我正在尝试根据 RFC 5849 OAuth 1.0 将 å 编码为 %C3%A5

[http://tools.ietf.org/rfc/rfc5849.txt](http://tools.ietf.org/rfc/rfc5849.txt)

这可以在 GoCardless Ruby 规范 [https://github.com/gocardless/gocardless-ruby/blob/master/spec/utils_spec.rb中看到](https://github.com/gocardless/gocardless-ruby/blob/master/spec/utils_spec.rb)

```
 it "encodes non-ascii alpha characters" do
    subject["å"].should == "%C3%A5"
 end 
```

我的 C# 代码如下所示：

```
 private const string UnreservedChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~";

    public static string PercentEncode(string value)
    {
        var input = new StringBuilder();
        foreach (char symbol in value)
        {
            if (UnreservedChars.IndexOf(symbol) != -1)
            {
                input.Append(symbol);
            }
            else
            {
                input.Append('%' + String.Format("{0:X2}", (int)symbol));
            }
        }

        return input.ToString();
    } 
```

这些测试失败：

```
[Test]
public void It_encodes_non_ascii_alpha_characters()
{
    Util.PercentEncode("å").ShouldBe("%C3%A5"); 
}

Expected string length 6 but was 3\. Strings differ at index 1.
  Expected: "%C3%A5"
  But was:  "%E5"
  ------------^ 
```

这些测试失败：

```
[Test]
public void It_encodes_other_non_ascii_characters()
{
    Util.PercentEncode("支払い").ShouldBe("%E6%94%AF%E6%89%95%E3%81%84");
}

Expected string length 27 but was 15\. Strings differ at index 1.
 Expected: "%E6%94%AF%E6%89%95%E3%81%84"
 But was:  "%652F%6255%3044"
 ------------^ 
```

顺便说一句，我确实通过了这些测试：

```
[Test]
public void It_encodes_reserved_ascii_characters()
{
    Util.PercentEncode(" !\"#$%&'()").ShouldBe("%20%21%22%23%24%25%26%27%28%29");
    Util.PercentEncode("*+,/{|}:;").ShouldBe("%2A%2B%2C%2F%7B%7C%7D%3A%3B");
    Util.PercentEncode("<=>?@[\\]^`").ShouldBe("%3C%3D%3E%3F%40%5B%5C%5D%5E%60");
} 
```

* * *

任何想要在这里执行此操作的人的编辑是有效的 C# 代码：

```
public class Util
{
    private const string UnreservedChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~";

    public static string PercentEncode(string value)
    {
        var input = new StringBuilder();
        foreach (char symbol in value)
        {
            if (UnreservedChars.IndexOf(symbol) != -1)
            {
                input.Append(symbol);
            }
            else
            {
                byte[] bytes = Encoding.UTF8.GetBytes(symbol.ToString());
                foreach (byte b in bytes)
                {
                    input.AppendFormat("%{0:X2}", b);
                }
            }
        }

        return input.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:41:25.300

问题是你没有考虑到这部分：

> 1.  文本值首先根据 [RFC3629] 编码为 UTF-8 八位字节（如果它们尚未编码）。这不包括不适合人类消费的二进制值。

所以你应该实际使用：

```
byte[] bytes = Encoding.UTF8.GetBytes(symbol.ToString());
foreach (byte b in bytes)
{
    input.AppendFormat("%{0:x2}", b);
} 
```

# .net - 删除大量行时 SQL Server CE 4 出现 DivideByZeroException

> ID：10017277
> 
> 赞同：10
> 
> 时间：2012-04-04T18:37:27.203
> 
> 标签：.net, linq-to-sql, sql-server-ce

我有一个使用带有 SQL Server CE 4 的 LINQ-to-SQL 的应用程序。我知道这不是官方支持的，但我们已经让它工作了，但有以下例外。有时，在尝试更新数据库时，我们会在数据库中遇到错误。

我们使用 a`DataContext`从数据库中选择一行，更新一些列（一个布尔列和一个字节列），然后我们调用`SubmitChanges()`. 当我们提交更改时，我们会收到带有以下堆栈跟踪的 DivideByZeroException：

> System.DivideByZeroException：试图除以零。
> 在 System.Data.SqlServerCe.NativeMethodsHelper.CompileQueryPlan（IntPtr pQpCommand，字符串 pwszCommandText，ResultSetOptions 选项，IntPtr [] pParamNames，IntPtr prgBinding，Int32 cDbBinding，IntPtr& pQpPlan，IntPtr pError）
> 在 System.Data.SqlServerCe.NativeMethods.CompileQueryPlan（IntPtr pQpCommand , String pwszCommandText, ResultSetOptions options, IntPtr[] pParamNames, IntPtr prgBinding, Int32 cDbBinding, IntPtr& pQpPlan, IntPtr pError)
> 在 System.Data.SqlServerCe.SqlCeCommand.CompileQueryPlan()
> 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior 行为,字符串方法，ResultSetOptions 选项）
> 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery()
> 在 System.Data.Linq.SqlClient.SqlProvider.Execute（表达式查询，QueryInfo queryInfo，IObjectReaderFactory 工厂，Object[] parentArgs，Object[] userArgs，ICompiledSubQuery[] subQueries，Object lastResult）
> 在 System.Data.Linq.SqlClient.SqlProvider System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute 处的.ExecuteAll（表达式查询，QueryInfo[] queryInfos，IObjectReaderFactory 工厂，Object[] userArguments，ICompiledSubQuery[] subQueries）
> （表达式查询）
> 在 System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicUpdate(TrackedObject item)
> 在 System.Data.Linq.ChangeDirector.StandardChangeDirector.Update(TrackedObject item)
> 在 System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
> 在 System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
> 在 System.Data.Linq.DataContext.SubmitChanges()

编辑：

分析后，问题似乎是在删除语句上生成的，类似于：

> 从 [WorkItemUid] 中删除 ([Oid] = 24151 /* @p0 */) AND ([WorkItemOid] = 745 /* @p1 */) AND ([SeriesInstanceUid] = '1.3.12.2.1107.5.1.4.54023.30000004101914490887500000063' /* @p2 */) AND ([SopInstanceUid] = '1.3.12.2.1107.5.1.4.54023.30000004101913521221800001089' /* @p3 */) AND ([Complete] = 1) AND ([FailureCount] = 0 /* @p4 */) AND ([File]是 NULL) AND (NOT ([Failed] = 1))

该错误发生在我试图单独删除约 1500 个外键记录的语句中。当我更改代码以单独删除行时，我将其范围缩小到大约 45 行无法删除。然后，我使用 SQL Compact 查询分析器尝试在行本身上执行删除，但它也确实失败了，除以零异常。

因此，这似乎不是 Linq-to-Sql 错误，而是 SQL Server Compact CE 4.0 本身删除了这些行。我试图删除并从一个干净的数据库开始，并复制填充然后从数据库中删除，问题再次发生。当删除时发生超过 1500 个外键记录时，这可能是一个问题。

一堆谷歌搜索大多是空的，但我确实在此参考中找到了对[SQL](http://support.microsoft.com/kb/947002)`DivideByZeroException` Server CE 3.5 的参考。我已经确认我正在使用 SQL Server CE 4.0 程序集，所以这似乎不是问题。关于上述错误是否仍适用于 SQL Server CE 4.0 的任何想法？经过进一步审查，它似乎是同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T19:53:00.743

升级到[SQL Server Compact CTP1](http://www.microsoft.com/download/en/details.aspx?id=29037)似乎已经解决了这个问题。删除问题中报告的行时，我不再看到异常。该问题似乎与从具有> 1500 行外键关系的表中删除行有关。

# database - 什么是clojure中逻辑编程的良好/成熟的数据库支持策略

> ID：10017279
> 
> 赞同：3
> 
> 时间：2012-04-04T18:37:35.043
> 
> 标签：database, clojure, logic-programming

我很难找到有关使用诸如[core.logic 之](https://github.com/clojure/core.logic)类的逻辑编程方法为要查询的事实建立（演绎）数据库的策略的深刻信息。可以找到的大多数示例都处理在内存中创建的事实。

一个非常好的图书馆是[Cascalog](https://github.com/nathanmarz/cascalog)。它位于 hadoop 之上，并使用受数据日志启发的漂亮直观的查询语言抽象出 map-reduce。

但是 Cascalog 只是 hadoop，我想知道是否有类似的 clojure 解决方案可以与其他类型的数据库很好地配合，无论是 nosql 还是关系（演绎数据库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:09:43.690

这篇博文展示了如何编写从数据源查询的关系：

[http://tsdh.wordpress.com/2012/01/06/using-clojures-core-logic-with-custom-data-structures/](http://tsdh.wordpress.com/2012/01/06/using-clojures-core-logic-with-custom-data-structures/)

使用那里的想法，我能够编写关系以从 MongoDB 和 Redis 查询。

# iphone - 将上下文传递给另一个方法

> ID：10017280
> 
> 赞同：0
> 
> 时间：2012-04-04T18:37:37.150
> 
> 标签：iphone, ios, core-graphics

将绘图上下文传递给同一类中的另一个方法的正确方法是什么`drawRect()`？

你就这样通过吗？

```
drawMoreStuff:(CGContextRef)context 
```

或者你是否使用函数： `UIGraphicsGetCurrentContext();`和函数`CGContextRestoreGState(ctx);`的开头和结尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:42:12.240

好吧，传递给函数的上下文可能并不总是与当前上下文相同，因此最好的方法就像在您的第一个示例中一样。

```
- (void)drawMoreStuff:(CGContextRef)context { 
```

但是，根据您的功能，如果您有以下功能，您将使用当前上下文：

```
- (void)drawMoreStuffToCurrentContext { 
```

# c# - 从 C# 控制 VisualSVN 服务器

> ID：10017282
> 
> 赞同：8
> 
> 时间：2012-04-04T18:37:52.063
> 
> 标签：c#, svn, visualsvn-server

我安装了 VisualSVN 服务器 2.5.4。我可以创建用户和存储库。我的问题是如何从 C# 创建/删除用户/存储库。有图书馆吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T13:57:21.763

## 2015 年 3 月 9 日更新

不再需要编写自定义 WMI 脚本；从 VisualSVN Server 3.4 开始可用的 PowerShell cmdlet 涵盖了大多数 Subversion 服务器管理和存储库管理用例。[在https://www.visualsvn.com/server/features/powershell/](https://www.visualsvn.com/server/features/powershell/)阅读有关新功能的信息

VisualSVN Server 3.4 引入了 PowerShell 模块，为您提供了许多有用的 cmdlet。cmdlet 可用于本地或远程管理 VisualSVN 服务器及其存储库。这是[VisualSVN Server PowerShell cmdlet 的完整参考](https://www.visualsvn.com/support/topic/00088/)。

例如，

*   您可以通过运行以下 PowerShell 命令来创建新的存储库*MySuperRepo ：*

    `New-SvnReposiory MySuperRepo`

*   您可以在存储库中创建项目结构

    `New-SvnRepositoryItem MySuperRepo -Path /branches, /tags, /trunk -Type Folder`

*   您可以为 DOMAIN\Developers Active Directory 组帐户提供对新存储库的读/写访问权限

    `Add-SvnAccessRule MyRepo -Path / -AccountName DOMAIN\Developers -Access ReadWrite`

*   您可以计算存储库在磁盘上的大小：

    `Measure-SvnRepository MySuperRepo`

*   您可以验证存储库是否存在损坏：

    `Test-SvnRepository MySuperRepo`

    ***还有更多！***

有关详细信息和 cmdlet 的完整列表，请阅读文章[VisualSVN 服务器 PowerShell Cmdlet 参考](https://www.visualsvn.com/support/topic/00088/)。

* * *

VisualSVN Server 可以通过 WMI（Windows Management Instrumentation）接口进行管理。

描述 VisualSVN 服务器界面的 MOF 文件位于安装了 VisualSVN 服务器的计算机上的**%VISUALSVN_SERVER%\WMI中。**使用此文件作为参考，您可以编写 C# 脚本来管理 VisualSVN 服务器。

请查看 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb404655](http://msdn.microsoft.com/library/aa394582)

我包括以下示例供您参考：

*   此 C# 代码将创建一个密码为“secret”的 Subversion 用户“user1”。

    ```
     ManagementClass userClass = new ManagementClass("root\\VisualSVN", "VisualSVN_User", null);

        // Obtain in-parameters for the method
        ManagementBaseObject inParams =
            userClass.GetMethodParameters("Create");

        // Add the input parameters.
        inParams["Name"] = "user1";
        inParams["Password"] = "secret";

        // Execute the method and obtain the return values.
        ManagementBaseObject outParams =
            userClass.InvokeMethod("Create", inParams, null); 
    ```

*   此 C# 代码将创建一个新的存储库“Repo1”。

    ```
     ManagementClass repoClass = new ManagementClass("root\\VisualSVN", "VisualSVN_Repository", null);

        // Obtain in-parameters for the method
        ManagementBaseObject inParams =
            repoClass.GetMethodParameters("Create");

        // Add the input parameters.
        inParams["Name"] = "Repo1";

        // Execute the method and obtain the return values.
        ManagementBaseObject outParams =
            repoClass.InvokeMethod("Create", inParams, null); 
    ```

*   此 C# 代码将为 SID S-1-5-32-545 ('BUILTIN\Users') 提供对存储库 'Test' 的读/写访问权限。仅供参考：AccessLevel 值如 MOF 中所述：*“0 - 无访问权限，1 - 只读，2 - 读/写”*。

    ```
    ManagementClass userClass = new ManagementClass("root\\VisualSVN", "VisualSVN_WindowsAccount", null);                            
    ManagementClass authzClass = new ManagementClass("root\\VisualSVN", "VisualSVN_SecurityDescriptor", null);
    ManagementClass permClass = new ManagementClass("root\\VisualSVN", "VisualSVN_PermissionEntry", null);

    ManagementObject userObject = userClass.CreateInstance();
    userObject.SetPropertyValue("SID", "S-1-5-32-545");

    ManagementObject permObject = permClass.CreateInstance();
    permObject.SetPropertyValue("Account", userObject);
    permObject.SetPropertyValue("AccessLevel", 2);

    ManagementObject repo = new ManagementObject("VisualSVN_Repository.Name='Test'");

    ManagementBaseObject inParams =
        authzClass.GetMethodParameters("SetSecurity");

    inParams["Object"] = repo;
    inParams["Permissions"] = new object[] { permObject };

    ManagementBaseObject outParams =
        authzClass.InvokeMethod("SetSecurity", inParams, null); 
    ```

* * *

**于 2013 年 2 月 10 日更新：**

WMI 架构已在 VisualSVN Server 2.6 中更改（和改进！）。简而言之，要在存储库路径上设置访问权限，您需要：

*   创建`VisualSVN_Repository`指定存储库名称的类对象，
*   创建`VisualSVN_PermissionEntry`条目对象指定帐户用户名和访问权限，
*   在传递有效的存储库路径和 PermissionEntry 对象时调用`SetSecurity`方法。`VisualSVN_Repository`

    ```
     ManagementClass userClass = new ManagementClass("root\\VisualSVN", "VisualSVN_WindowsAccount", null);
        ManagementClass permClass = new ManagementClass("root\\VisualSVN", "VisualSVN_PermissionEntry", null);
        ManagementClass repoClass = new ManagementClass("root\\VisualSVN", "VisualSVN_Repository", null);

        ManagementObject userObject = userClass.CreateInstance();
        userObject.SetPropertyValue("SID", "S-1-5-32-545");

        ManagementObject permObject = permClass.CreateInstance();
        permObject.SetPropertyValue("Account", userObject);
        permObject.SetPropertyValue("AccessLevel", 2);

        ManagementObject repoObject = repoClass.CreateInstance();
        repoObject.SetPropertyValue("Name", "MyProject");

        ManagementBaseObject inParams =
            repoClass.GetMethodParameters("SetSecurity");

        inParams["Path"] = "/trunk";
        inParams["Permissions"] = new object[] { permObject };

        ManagementBaseObject outParams =
            repoObject.InvokeMethod("SetSecurity", inParams, null); 
    ```

# python - 是否有人使用 zeromq 在同一进程中协调多个 Python 解释器？

> ID：10017283
> 
> 赞同：4
> 
> 时间：2012-04-04T18:38:09.637
> 
> 标签：python, multithreading, zeromq

我喜欢 Python 的全局解释器锁，因为它使底层 C 代码变得简单。但这意味着每个 Python 解释器主循环一次仅限于一个线程。这很糟糕，因为最近每个处理器芯片的内核数量经常翻倍。

zeromq 的假定优势之一是它使多线程编程“容易”或更容易。

是否可以在同一进程中启动多个 Python 解释器并让它们仅使用进程内 zeromq 进行通信，而没有其他共享状态？有人试过吗？它运作良好吗？请评论和/或提供链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:55:33.987

我不知道有什么方法可以在单个进程中创建 Python 解释器的多个实例，但我确实有跨多个进程拆分多个实例并与`zmq`.

我一直在使用`multiprocessing`实现全局优化的岛模型架构，`zmq`用于管理岛之间的通信。每个岛都有自己的进程，有自己的 Python 解释器，由主群岛进程创建和管理。

Using`multiprocessing`允许您启动任意数量的独立 Python 解释器，但它们都驻留在自己的进程中，并具有单独的内存空间。我相信操作系统调度程序负责将进程分配给内核并共享 CPU 时间。单独的内存空间是最难的部分，因为这意味着您必须明确地进行通信。要在进程之间进行通信，您希望发送的对象/数据必须是可序列化的，因为`zmq`发送的是字节串。

好处`zmq`是，跨网络分布式系统扩展是小菜一碟，而且非常轻量级。您可以使用 REP/REQ、PUB/SUB 或其他任何方式创建您想要的任何通信模式。

但是不，这不像从`threading`模块中启动几个线程那么容易。

编辑：另外，这是一个类似于你的 Stack Overflow 问题。里面有一些更相关的链接，表明可以在单个进程中运行多个 Python 解释器，但这看起来并不简单。 [从 C/C++ 程序调用的多个操作系统线程上的多个独立嵌入式 Python 解释器](https://stackoverflow.com/questions/2968317/multiple-independent-embedded-python-interpreters-on-multiple-operating-system-t)

# php - 如何获取多个选择列表的值和 id 并将其传递给 AJAX？

> ID：10017284
> 
> 赞同：1
> 
> 时间：2012-04-04T18:38:16.537
> 
> 标签：php, jquery, ajax, arrays, selectlist

我正在尝试遍历表格单元格中的许多选择（它们不在表格中）。按下时我有一个提交按钮，它应该检索每个选择列表的值和 id，我将通过 AJAX 和 PHP 将其传递给服务器。我的表是一门课程的学生表。该表包含学生的姓名和他们在课程中的一堂课的出勤率。

这是我在 Pastebin 和 jsFiddle 上的表格。[http://pastebin.com/NvRAbC7m](http://pastebin.com/NvRAbC7m)和[http://jsfiddle.net/4UheA/](http://jsfiddle.net/4UheA/)

请注意，此表是完全动态的。没有。行和其中的信息是动态驱动的。

这就是我现在正在尝试使用 jQuery 做的事情。请原谅我的 JavaScript 技能的逻辑或完全胡说八道。我实际上不知道我在做什么。我只是在试错。

```
$('#saveAttendances').live('click', function()
{
    var attendSelect = $('.attendSelect');
    var students = new Array();
    //get select list values and id. 
    for(var i in attendSelect)
    {
        students['student_id'] += attendSelect[i].id;
        students['student_id']['attedance'] += attendSelect[i].value;
        console.log(students['student_id']);
    }
    //after retrieving values, post them through ajax
    // and update the attendances of students in PHP
    $.post("",{ data: array }, function(msg)
    {
         alert(msg);
    }); 

}); 
```

如何获取每个选择列表的值和 id 并将其传递给 AJAX？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:48:48.133

## 编辑

如果你坚持违背 jQuery 的原则并使用无效的 HTML，这里有一个适合你的解决方案：

```
$(function() {
    $('button').click(function(){
       var data = $(".attendSelect").wrap('<form/>').serialize();
       $.post('process.php', data, function(response){ ... });
       return false;            
    });
});​ 
```

**值得一提的是，**这个例子不依赖于幻想`.on()`或`.live()`调用。但是，这需要您在元素`name`上设置正确的属性，`<select>`如下所述。这也解决了您的无效数字`id`属性问题。

[看到它在 jsFiddle 上工作](http://jsfiddle.net/NNcXn/1/)

* * *

### 原始答案

首先，对您的 HTML 进行一些小的更改。您需要将`<select>`元素包装在`<form>`标签中。使用 form 标签将使您能够访问 jQuery 的[.serialize()](http://api.jquery.com/serialize/)方法，这正是您正在寻找的功能。就个人而言，我建议使用 jQuery Way™ 而不是实现自己的序列化表单。为什么要重新发明轮子？

接下来，您`td`有非唯一的 ID。让我们更新它们以使用`class`属性而不是`id`. 例如，

```
<td class="studentName">Aaron Colman</td> 
```

其次，您的`<select>`元素可以从`name`属性中受益，从而使表单处理方式更容易。

```
<select class="attendSelect" name="students[241]">
    ...

<select class="attendSelect" name="students[270]">
    ...

<select class="attendSelect" name="students[317]">
    ... 
```

最后，jQuery`.serialize()`将成为您的赢家。

```
​$(function() {
    $('form').submit(function(){
       $.post('process.php', $(this).serialize(), function(response){ ... });
       return false;            
    });
});​ 
```

提交后，序列化的字符串看起来像

```
students[241]=Late&students[270]=Absent&students[317]=default 
```

看到它在[jsFiddle上工作](http://jsfiddle.net/sHC5q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:44:17.503

`live()`自 jQuery 1.7 起已弃用，请`on()`改用

[http://api.jquery.com/on/](http://api.jquery.com/on/)

学生是一个数组，所以我认为你不能这样做`students['student_id']`，如果你想推一个学生数组，你可以：

```
$('#saveAttendances').on('click', function() {
    var students = [];

    // iterate through <select>'s and grab key => values
    $('.attendSelect').function() {
        students.push({'id':$(this).attr('id'), 'val':$(this).val()});
    });

    $.post('/url.php', {data: students}, function() { // do stuff });
}); 
```

在你的 php 中：

```
var_dump($_POST); // see what's inside :) 
```

正如@nathan 在评论中提到的，避免使用数字作为 ID 的第一个字符，您可以`'student_<?php echo $id ?>'`在`.each()`循环中使用：

```
students.push({'id':$(this).attr('id').replace('student_', ''), 'val':$(this).val()}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:50:56.697

**编辑：**更新为迭代`select`而不是`tr`.

也许你想要像下面这样的东西，

[**演示**](http://jsfiddle.net/skram/4UheA/6/)

```
var $attendSelect  = $('#tutorTable tbody tr select');
var students = {};

$attendSelect.each (function () { //each row corresponds to a student               
    students[$(this).attr('id')] = $(this).val();
}); 
```

这会给你一个像下面这样的对象，

```
students = { '241': 'Late', '270': 'Absent', '317': 'default' }; 
```

如果以上不是所需的结构，则修改`.each`代码中的函数。

**例如：**对于如下结构，

```
students = [{ '241': 'Late'}, {'270': 'Absent'}, {'317': 'default'}]; 
```

您需要稍微更改代码，

```
 var students = [];
 ...
 ...
 students.push({$dd.attr('id'): $dd.val()}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T18:58:55.633

这是 jQuery，它将构建一个可以传递给脚本的对象：

```
$('button').click(function() {
    var attendance = new Object;
    $('select').each(function() {
        attendance[$(this).attr('id')] = $(':selected', this).text();
    })
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4UheA/5/)**。

这导致：`{241:"Late",270:"Absent",317:"Late"}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T19:01:36.583

```
var $select = $('.attendSelect'),
    students = [];
$('body').on('click', '#saveAttendances', function() {
    $select.each(function(k, v) {
        students[k] = {
            student_id : $(this).attr('id'),
            attedance  : $(this).val()
        };
    });
    console.log(students);
}); 
```

# wcf - 将端点公开为另一个端点的子节点？

> ID：10017293
> 
> 赞同：0
> 
> 时间：2012-04-04T18:38:52.983
> 
> 标签：wcf, c#-4.0, wcf-binding

我有一个 WCF 服务，DummyService。它实现了 IDummyService 并存在于两个 URI，[http://1.1.1.1/DummyService](http://1.1.1.1/DummyService)和[http://2.2.2.2/DummyService](http://2.2.2.2/DummyService)。我想创建一个路由端点，这样；

1.  我可以点击[http://1.1.1.1/RoutingService/DummyService?wsdl](http://1.1.1.1/RoutingService/DummyService?wsdl)和/或[http://1.1.1.1/RoutingService/DummyService](http://1.1.1.1/RoutingService/DummyService)
2.  这个 uri 似乎只是 dummyservice 端点，我可以构建客户端代理等。
3.  任何呼叫都会被轮询

有没有办法在不让 IRoutingService 重新实现 DummyService 的情况下做到这一点？我希望 dummyservice 本质上是一个可以在运行时添加/删除的插件。我可以使用 WCF 路由来做到这一点吗？我可以参考任何样品吗？我在 MSDN/Google 上找不到任何东西，但也许我问错了方式..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:38:58.030

这几乎正​​是 WCF 路由的用途。

有一个样本是 WCF/WF 样本的一部分（信息在这里）：

[http://msdn.microsoft.com/en-us/library/ee667249%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/ee667249%28v=VS.100%29.aspx)

# matlab - 在 matlab 中读取 .yml 文件

> ID：10017298
> 
> 赞同：6
> 
> 时间：2012-04-04T18:39:34.177
> 
> 标签：matlab, file-io, yaml

我想在 Matlab 中阅读 .yml 文件。这些文件包含人脸图像上关键点的坐标 x 和 y。我寻找了不同的工具，但似乎没有找到任何答案。

我的 .yml 文件看起来像这样

```
YAML:1.0
Image file: "00032009.jpg"
Contours count: 8
Contours:
   -
      Name: FO
      Count: 41
      Closed: 0
      Points:
         -
            x: 682.5947265625000000
            y: 743.1998901367187500
         -
            x: 685.9638061523437500
            y: 771.3800659179687500 
```

……

等等

注意 00032009.jpg 是一张人脸的图像 x 和 y 是人脸上一个点的坐标 例如：右眼角等

您能否指出一种读取文件然后在面部图像上显示点的方法？

**编辑1：**这是我得到的错误

```
Error: File: ReadYamlRaw.m Line: 14 Column: 11
Expression or statement is incorrect--possibly unbalanced (, {, or [.
Error in ==> ReadYaml at 38
    ry = ReadYamlRaw(filename, 0, nosuchfileaction); 
```

奇怪的是 ReadYamlRaw.m 中的第 14 行

```
[pth,~,~]= fileparts(mfilename('fullpath'));

 Parse error at ','(second one) and ']' usage appears to be invalid matlab syntax. 
```

那么 ~ 在里面有什么用，为什么会出现错误？

**Edit2**：我用虚拟变量替换了上面一行中的 ~ 然后我得到了这个错误 O_O

```
 Error using ==> ReadYamlRaw>scan at 81
Unknown data type: logical

Error in ==> ReadYamlRaw>scan_map at 138
            result.(ich) = scan(r.get(java.lang.String(ich)));

Error in ==> ReadYamlRaw>scan at 79
        result = scan_map(r);

Error in ==> ReadYamlRaw>scan_list at 116
        result{ii} = scan(i);

Error in ==> ReadYamlRaw>scan at 77
        result = scan_list(r);

Error in ==> ReadYamlRaw>scan_map at 138
            result.(ich) = scan(r.get(java.lang.String(ich)));

Error in ==> ReadYamlRaw>scan at 79
        result = scan_map(r);

Error in ==> ReadYamlRaw>load_yaml at 48
        result = scan(yaml.load(fileread([filename, fileext])));

Error in ==> ReadYamlRaw at 19
    result = load_yaml(filename, nosuchfileaction);

Error in ==> ReadYaml at 38
    ry = ReadYamlRaw(filename, 0, nosuchfileaction); 
```

我还尝试了一个不同的 yml 文件，看起来像这样

```
%YAML:1.0
RE-C:
   x: 919
   y: 580
LE-C:
   x: 1209
   y: 597
N-C:
   x: 1063
   y: 698
FO-B:
   x: 1045
   y: 1114
REL-O:
   x: 852
   y: 597
REL-I:
   x: 986
   y: 600
REL-T:
   x: 918
   y: 564 
```

我收到以下错误

```
Java exception occurred:
while scanning a directive
 in "<string>", line 1, column 1:
    %YAML:1.0
    ^
expected alphabetic or numeric character, but found :(58)
 in "<string>", line 1, column 6:
    %YAML:1.0
         ^

    at org.yaml.snakeyaml.scanner.ScannerImpl.scanDirectiveName(ScannerImpl.java:1028)

    at org.yaml.snakeyaml.scanner.ScannerImpl.scanDirective(ScannerImpl.java:990)

    at org.yaml.snakeyaml.scanner.ScannerImpl.fetchDirective(ScannerImpl.java:534)

    at org.yaml.snakeyaml.scanner.ScannerImpl.fetchMoreTokens(ScannerImpl.java:251)

    at org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:179)

    at
    org.yaml.snakeyaml.parser.ParserImpl$ParseImplicitDocumentStart.produce(ParserImpl.java:198)

    at org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:161)

    at org.yaml.snakeyaml.parser.ParserImpl.checkEvent(ParserImpl.java:146)

    at org.yaml.snakeyaml.composer.Composer.getSingleNode(Composer.java:105)

    at org.yaml.snakeyaml.constructor.BaseConstructor.getSingleData(BaseConstructor.java:121)

    at org.yaml.snakeyaml.Yaml.loadFromReader(Yaml.java:480)

    at org.yaml.snakeyaml.Yaml.load(Yaml.java:399)

Error in ==> ReadYamlRaw>load_yaml at 48
        result = scan(yaml.load(fileread([filename, fileext])));

Error in ==> ReadYamlRaw at 19
    result = load_yaml(filename, nosuchfileaction);

Error in ==> ReadYaml at 38
    ry = ReadYamlRaw(filename, 0, nosuchfileaction); 
```

也许有人可以从中做出一些东西，或者您可以指出另一组可行的功能？我搜索了但没有找到除了这个之外的任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T13:50:55.320

它确实是 YAML 文件（正如@DavidBrown 在他的评论中提到的，扩展名无关紧要）。但它有一些问题。不知道是不是 YAML 格式错误还是 MATLAB 实现的原因。

我已经安装了[YAMLMATLAB](http://code.google.com/p/yamlmatlab/)并对您的文件进行了一些操作。

```
YamlStruct = ReadYaml(yaml_file); 
```

如果文件按原样提供，YAMLMATLAB 将返回错误。仅当我注释第一行并从字段名称中删除空格时，它才有效。所以文件的开头是这样的：

```
#YAML:1.0
Imagefile: 00032009.jpg
Contourscount: 8
...skipped the rest... 
```

然后我得到正确的结构。例如，您可以访问第一个点的`x`坐标为

```
YamlStruct.Contours{1}.Points{1}.x

ans =

  682.5947 
```

**更新**

文件名中的空格实际上是 YAMLMATLAB 中的一个已知问题。[在此处](http://code.google.com/p/yamlmatlab/issues/detail?id=3)查看报告和可能的解决方案。

**更新 2**

根据@Jirka_cigler（YAMLMATLAB 开发者组）的评论：

> 在程序版本 0.4.3 中，我们添加了对字段名称中空格的支持，因此该问题不应再次出现。

伟大的！

我还删除了以前开发人员在第一次 UPDATE 中对该问题的评论，因为它不再是真的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T07:34:19.807

[ZozaniDB 数据库工具箱](http://zozani.com/zozanidb/)附带一个 Matlab 原生 YAML 实现，用于处理此处的 .yml 文件。要解析字符串或文件，请使用：

```
>> yaml_parse ( str )
>> yaml_read ( filename ) 
```

# parallel-processing - MPI：阻塞与非阻塞

> ID：10017301
> 
> 赞同：81
> 
> 时间：2012-04-04T18:39:45.143
> 
> 标签：parallel-processing, mpi, cluster-computing

我无法理解 MPI 中阻塞通信和非阻塞通信的概念。两者有什么区别？有什么优点和缺点？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-04-04T18:49:24.083

阻止通信是使用[`MPI_Send()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Send.html)和完成的[`MPI_Recv()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Recv.html)。这些函数在通信完成之前不会返回（即它们阻塞）。稍微简化一下，这意味着传递给的缓冲区`MPI_Send()`可以被重用，要么是因为 MPI 将它保存在某个地方，要么是因为它已被目标接收。同样，`MPI_Recv()`当接收缓冲区已填满有效数据时返回。

相反，非阻塞通信是使用[`MPI_Isend()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Isend.html)和完成的[`MPI_Irecv()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Irecv.html)。即使通信尚未完成，这些函数也会立即返回（即它们不会阻塞）。您必须致电[`MPI_Wait()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Wait.html)或[`MPI_Test()`](https://www.mpich.org/static/docs/v3.2/www3/MPI_Test.html)查看通信是否已完成。

在足够的情况下使用阻塞通信，因为它更容易使用。必要时使用非阻塞通信，例如，您可以调用`MPI_Isend()`，进行一些计算，然后执行`MPI_Wait()`。这允许计算和通信重叠，这通常会提高性能。

请注意，集体通信（例如，all-reduce）仅在最高 MPIv2 的阻塞版本中可用。IIRC，MPIv3 引入了非阻塞集体通信。

可以在[这里查看](http://www.mcs.anl.gov/research/projects/mpi/sendmode.html)MPI 发送模式的快速概览。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2017-10-31T17:36:27.330

这篇文章虽然有点旧，但我认为可以接受的答案。声明“这些函数在通信完成之前不会返回”有点误导，因为阻塞通信并不能保证任何握手 b/w 发送和接收操作。

首先需要知道，**send 有四种**通信模式：**Standard、Buffered、Synchronous**和**Ready**，每一种都可以是***阻塞***和***非阻塞的***

与发送不同，**接收只有一种模式**，可以是**阻塞**或**非阻塞**。

在继续之前，还必须清楚我明确提到哪个是**MPI_Send\Recv 缓冲区**，哪个是**系统缓冲区**（这是 MPI 库拥有的每个处理器中的本地缓冲区，用于在通信的队列之间移动数据团体）

**阻塞通信**：阻塞并不意味着消息已传递到接收方/目的地。它只是意味着（发送或接收）缓冲区可供重用。要重用缓冲区，将信息复制到另一个内存区域就足够了，即库可以将缓冲区数据复制到库中自己的内存位置，然后，例如，MPI_Send 可以返回。

MPI 标准非常清楚地将消息缓冲与发送和接收操作分离。一旦消息被缓冲，阻塞发送就可以完成，即使没有发布匹配的接收。但在某些情况下，消息缓冲可能很昂贵，因此直接从发送缓冲区复制到接收缓冲区可能是有效的。因此，MPI Standard 提供了四种不同的发送模式，让用户可以自由选择适合其应用程序的发送模式。让我们看一下每种通信方式会发生什么：

**1.标准模式**

在**标准**模式下，是否缓冲传出消息取决于 MPI 库。在库决定缓冲传出消息的情况下，发送甚至可以在匹配的接收被调用之前完成。在库决定不缓冲的情况下（出于性能原因，或由于缓冲区空间不可用），发送将不会返回，直到匹配的接收已发布并且发送缓冲区中的数据已移动到接收缓冲区。

因此**，标准模式下的 MPI_Send 是非本地**的，因为无论是否已发布匹配的接收，都可以启动标准模式下的发送，并且其成功完成可能取决于匹配接收的发生（因为它是实现取决于消息是否会被缓冲）。

标准发送的语法如下：

```
int MPI_Send(const void *buf, int count, MPI_Datatype datatype, 
             int dest, int tag, MPI_Comm comm) 
```

**2.缓冲模式**

与标准模式一样，可以在缓冲模式下启动发送，而不管匹配的接收是否已发布，并且发送可能在匹配的接收已发布之前完成。然而，主要区别在于如果发送被盯着并且没有匹配的接收被发布，则**必须**缓冲传出消息。请注意，如果发布了匹配的接收，则缓冲发送可以愉快地与开始接收的处理器会合，但如果没有接收，则缓冲模式下的发送必须缓冲传出消息以允许发送完成。总的来说，缓冲发送是**本地**的。在这种情况下，缓冲区分配是用户定义的，如果缓冲区空间不足，则会发生错误。

缓冲区发送的语法：

```
int MPI_Bsend(const void *buf, int count, MPI_Datatype datatype,
             int dest, int tag, MPI_Comm comm) 
```

**3.同步模式**

在同步发送模式下，无论是否发布了匹配的接收，都可以开始发送。但是，只有在发布了匹配的接收并且接收方已开始接收同步发送发送的消息时，发送才会成功完成。同步发送的完成不仅表示发送中的缓冲区可以被复用，同时也表示接收进程已经开始接收数据。如果发送和接收都阻塞，则在通信处理器会合之前，通信在任一端都没有完成。

同步发送的语法：

```
int MPI_Ssend(const void *buf, int count, MPI_Datatype datatype, int dest,
              int tag, MPI_Comm comm) 
```

**4\. 就绪模式**

与前三种模式不同，只有在匹配的接收已经过帐时，才可以在就绪模式下启动发送。发送的完成并不表示任何关于匹配接收的信息，而只是告诉发送缓冲区可以被重用。使用就绪模式的发送具有与标准模式或同步模式相同的语义，并带有有关匹配接收的附加信息。可以用同步发送或标准发送替换具有就绪通信模式的正确程序，除了性能差异外，对结果没有影响。

准备发送的语法：

```
int MPI_Rsend(const void *buf, int count, MPI_Datatype datatype, int dest, 
              int tag, MPI_Comm comm) 
```

在经历了所有 4 个阻塞发送之后，它们可能看起来在原则上有所不同，但根据实现，一种模式的语义可能与另一种相似。

例如 MPI_Send 通常是一种阻塞模式，但取决于实现，如果消息大小不是太大，MPI_Send 会将传出消息从发送缓冲区复制到系统缓冲区（现代系统中大多数情况下）并立即返回。让我们看一个下面的例子：

```
//assume there are 4 processors numbered from 0 to 3
if(rank==0){
    tag=2;
    MPI_Send(&send_buff1, 1, MPI_DOUBLE, 1, tag, MPI_COMM_WORLD);
    MPI_Send(&send_buff2, 1, MPI_DOUBLE, 2, tag, MPI_COMM_WORLD);
    MPI_Recv(&recv_buff1, MPI_FLOAT, 3, 5, MPI_COMM_WORLD);
    MPI_Recv(&recv_buff2, MPI_INT, 1, 10, MPI_COMM_WORLD);
}

else if(rank==1){
     tag = 10;
    //receive statement missing, nothing received from proc 0
    MPI_Send(&send_buff3, 1, MPI_INT, 0, tag, MPI_COMM_WORLD);
    MPI_Send(&send_buff3, 1, MPI_INT, 3, tag, MPI_COMM_WORLD);
}

else if(rank==2){
    MPI_Recv(&recv_buff, 1, MPI_DOUBLE, 0, 2, MPI_COMM_WORLD);
    //do something with receive buffer
}

else{ //if rank == 3
    MPI_Send(send_buff, 1, MPI_FLOAT, 0, 5, MPI_COMM_WORLD);
    MPI_Recv(recv_buff, 1, MPI_INT, 1, 10, MPI_COMM_WORLD);
} 
```

让我们看看上面例子中每个等级发生了什么

**Rank 0** 尝试发送到 rank 1 和 rank 2，并从 rank 1 和 3 接收。

**Rank 1**正在尝试发送到 rank 0 和 rank 3 并且不接收来自任何其他 rank 的任何内容

**Rank 2**正在尝试从 rank 0 接收，然后对 recv_buff 中接收到的数据进行一些操作。

**Rank 3**正在尝试发送到 rank 0 并从 rank 1 接收

初学者感到困惑的是 rank 0 正在发送到 rank 1 但 rank 1 没有开始任何接收操作，因此通信*应该*阻塞或停止，并且 rank 0 中的第二个发送语句根本不应该执行（这就是 MPI文档强调它是实现定义的传出消息是否将被缓冲）。在大多数现代系统中，这些小尺寸的消息（这里大小为 1）很容易被缓冲，MPI_Send 将返回并执行其下一个 MPI_Send 语句。因此在上面的例子中，即使 rank 1 中的接收没有开始，rank 0 中的第一个 MPI_Send 也会返回并执行它的下一条语句。

在 rank 3 在 rank 0 之前开始执行的假设情况下，它会将第一个 send 语句中的传出消息从发送缓冲区复制到系统缓冲区（在现代系统中；）），然后开始执行其接收语句。一旦 rank 0 完成它的两个发送语句并开始执行它的接收语句，rank 3 在系统中缓冲的数据被复制到 rank 0 的接收缓冲区中。

如果在处理器中启动了接收操作并且没有发布匹配的发送，则该进程将阻塞，直到接收缓冲区充满它所期望的数据。在这种情况下，除非 MPI_Recv 返回，否则计算或其他 MPI 通信将被阻止/停止。

了解了*缓冲现象*之后，应该回过头来更多地考虑**MPI_Ssend**，它具有阻塞通信的真正语义。即使 MPI_Ssend 将传出消息从发送缓冲区复制到系统缓冲区（这也是实现定义的），必须注意 MPI_Ssend 不会返回，除非发送处理器收到来自接收进程的一些确认（低级格式）。

幸运的是，MPI 决定让用户在接收方面更轻松**，阻塞通信中只有一个接收： MPI_Recv**，并且可以与上述四种发送模式中的任何一种一起使用。对于 MPI_Recv，**阻塞意味着**接收仅在其缓冲区中包含数据后才返回。这意味着接收只能在匹配的发送开始后才能完成，但并不意味着它是否可以在匹配的发送完成之前完成。

在这种阻塞调用期间发生的情况是计算被暂停，直到阻塞的缓冲区被释放。这通常会导致计算资源的浪费，因为 Send/Recv 通常将数据从一个内存位置复制到另一个内存位置，而 cpu 中的寄存器保持空闲。

**非阻塞通信**：对于非阻塞通信，应用程序为发送和/或接收创建通信请求并取回句柄，然后终止。这就是保证流程被执行所需要的一切。即通知 MPI 库必须执行该操作。

对于发送方，这允许与通信重叠计算。

对于接收方，这允许重叠一部分通信开销，即将消息直接复制到应用程序中接收方的地址空间中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-04T19:33:55.947

在使用阻塞通信时，您必须关心发送和接收呼叫，例如查看此代码

```
 if(rank==0)
 {
     MPI_Send(x to process 1)
     MPI_Recv(y from process 1)
 }
 if(rank==1)
 {
     MPI_Send(y to process 0);
     MPI_Recv(x from process 0);
 } 
```

在这种情况下会发生什么？

1.  进程 0 将 x 发送到进程 1 并阻塞，直到进程 1 收到 x。
2.  进程 1 将 y 发送给进程 0 并阻塞，直到进程 0 收到 y，但是
3.  进程 0 被阻塞，使得进程 1 无限阻塞，直到两个进程被杀死。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-23T06:12:37.593

这很容易。

非阻塞意味着单个进程的计算和传输数据可以同时发生。

阻塞意味着，嘿，伙计，你必须确保你已经完成了数据传输然后返回完成下一个命令，这意味着如果有一个传输后有一个计算，那么计算必须在传输成功之后。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-09-09T13:22:20.557

公认的答案和另一个很长的答案都提到计算和通信的重叠是一个优势。那是 1\. 不是主要动机，以及 2\. 很难实现。非阻塞通信的主要优点（也是最初的动机）是您可以表达复杂的通信模式而不会出现死锁，也不会不必要地序列化自己的进程。

示例： 死锁：每个人都进行接收，然后每个人都进行发送，例如沿着环。这会挂起。

序列化：沿着线性顺序，除了最后一个之外的每个人都向右发送，然后除了第一个之外的每个人都从左边接收。这将使所有进程按顺序而不是并行执行。

# javascript - 使用 Javascript 将文件放入 DOM

> ID：10017302
> 
> 赞同：0
> 
> 时间：2012-04-04T18:39:49.147
> 
> 标签：javascript

为了避免 Google Pagespeed Messeger“稍后解析 Javascript”，我复制了这个脚本。

 `````
<script type="text/javascript">
 function downloadJSAtOnload() {
    var element = document.createElement("script");
    element.src = "http://example.com/templates/name/javascript/jquery.js";
    document.body.appendChild(element);
    var element1 = document.createElement("script");
    element1.src = "http://example.com/templates/name/javascript/jquery.colorbox-min.js";
    document.body.appendChild(element1);
 }
 if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
 else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
 else 
    window.onload = downloadJSAtOnload;
</script> 
````  `我怎么能用循环来解决它，因为我需要在 DOM 中再插入一个 javascript 文件。

问候罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:53:40.710

您可以制作这样的函数，它采用任意数量的脚本文件名：

```
function loadScriptFiles(/* pass any number of .js filenames here as arguments */) {
    var element;
    var head = document.getElementsByTagName("head")[0];
    for (var i = 0; i < arguments.length; i++) {
        element = document.createElement("script");
        element.type = "text/javascript";
        element.src = arguments[i];
        head.appendChild(element);
    }
}

function downloadJSAtOnload() {
    loadScriptFiles(
        "http://example.com/templates/name/javascript/jquery.js",
        "http://example.com/templates/name/javascript/jquery.colorbox-min.js",
        "http://example.com/templates/name/javascript/myJS.js"
    );
}

 if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
 else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
 else 
    window.onload = downloadJSAtOnload; 
```

如果您的脚本文件具有所需的加载顺序（例如，我假设 colorbox 必须在 jQuery 之后加载），您将不得不做一些比这更复杂的事情，因为这会异步加载它们，因此它们没有保证的加载顺序。一旦您需要特定的加载顺序，最好获取其他人为解决此问题而编写的代码，例如[RequireJS](http://requirejs.org/)或[LABjs](http://labjs.com/)或[Google.load()](https://developers.google.com/loader/#GoogleLoad)。

注意：我还将脚本文件附加到`<head>`标签中，这是放置它们的更好位置。

* * *

使用 LABjs 时，你没有把它`.wait()`放在正确的位置。 `.wait()`告诉加载器等到所有 PRIOR 脚本都加载完毕后再加载下一个。我认为你需要这样的：

```
$LAB 
   .script("templates/name/javascript/jquery.js").wait()
   .script("templates/name/javascript/jquery.colorbox-min.js"); 
`````

# mysql-real-escape-string - 您如何以编程方式判断是否存在 mysql 连接？

> ID：10017304
> 
> 赞同：0
> 
> 时间：2012-04-04T18:40:02.960
> 
> 标签：mysql-real-escape-string

运行 mysql_real_escape_string($value) 时出现此错误。

`Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Can't connect to MySQL server on 'localhost' (10061) in ...`

我将功能包装在一个像这样的好类中

```
class escaper
{
    function __get($value)
    {
    //in order for this to work properly, I must have a live connection to mysql
        return mysql_real_escape_string($value);
    }
} 
```

/*

```
//sample usage
$safe = new escaper;
$name = "O'Reilly";
echo $safe->$name 
```

万一有人再次走上那条路，让我提前说是的！我应该使用 PDO 和参数化查询，并且上述方法不是那么安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:42:35.890

> 您如何以编程方式判断是否存在 mysql 连接？

我们只是不需要那个。
连接始终存在

转义为 DB 类的一部分。
连接到数据库是这个类在构造函数中做的第一件事。
并连接存储在类变量中的资源。
所以，我们只需要使用这个变量——easy-peasy。

# ios - 当应用程序处于活动状态时，不会在我的视图控制器中调用 viewWillAppear

> ID：10017305
> 
> 赞同：2
> 
> 时间：2012-04-04T18:40:14.123
> 
> 标签：ios, viewcontroller

免责声明：我是 iOS 新手。

我使用将图片上传到网站的 Xcode 模板创建了一个基于视图的应用程序。Xcode 自动为我创建了 AppDelegate.m (& .h) 和 ViewController.m 以及一个故事板。该应用程序是从使用 URL 架构的网站启动的，我在视图控制器中使用该信息。我有两个问题：

1）这是将查询字符串从我的 AppDelegate 传递到视图控制器的好方法吗？
我的 AppDelegate 中有一个名为 queryStrings 的 NSDictionary 属性，用于存储查询字符串。然后在我的视图控制器的 viewWillAppear 中，我使用以下代码来访问它：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSDictionary *queryStrings = appDelegate.queryStrings;
    wtID = [queryStrings valueForKey:@"wtID"]; 
```

2）当应用程序已经启动但在后台并且用户通过网页上的 url 再次打开应用程序（使用不同的查询字符串）时，我在 AppDelegate 中实现了 openURL，它在 AppDelegate 中填充了我的 queryStrings 属性。问题是：视图控制器的 viewWillAppear 方法永远不会被调用，所以上面的代码不会被执行。如何将查询字符串数据获取到视图控制器？视图控制器如何知道应用程序刚刚激活？

注意：因为项目是使用 Xcode 中的“基于视图的应用程序”模板创建的，所以我的 AppDelegate 拥有的唯一属性是 window 属性。我不知道 AppDelegate 甚至在代码中的哪个位置引用了我的视图控制器......它从来没有设置为 rootViewController 或代码中的任何东西......我想这只是我看不到的一些 IB 魔法.

如果有帮助，这是我的 AppDelegate.h：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) NSDictionary *queryStrings;

@end 
```

这是我的 didFinishLoadingWithOptions、openURL 和我的辅助方法：parseQueryString：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    [[JMC sharedInstance] configureJiraConnect:@"https://cmsmech.atlassian.net/"           projectKey:@"WTUPLOAD" apiKey:@"7fc060e1-a795-4135-89c6-a7e8e64c4b13"];

    if ([launchOptions objectForKey:UIApplicationLaunchOptionsURLKey] != nil) {
        NSURL *url = [launchOptions objectForKey: UIApplicationLaunchOptionsURLKey];
        NSLog(@"url received: %@", url);
        NSLog(@"query string: %@", [url query]);
        NSLog(@"host: %@", [url host]);
        NSLog(@"url path: %@", [url path]);
        queryStrings = [self parseQueryString:[url query]];
        NSLog(@"query dictionary: %@", queryStrings);
    }
    else {
        queryStrings = [self parseQueryString:@"wtID=nil"];
    }

    return YES;
}

-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    NSLog(@"openURL executed");
    if (!url) 
        return NO;
    NSLog(@"query string: %@", [url query]);
    queryStrings = [self parseQueryString:[url query]];

    mainViewController.wtID = [queryStrings valueForKey:@"wtID"];
    return YES;
}

-(NSDictionary *)parseQueryString:(NSString *)query
{
    NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] initWithCapacity:6];
    NSArray *pairs = [query componentsSeparatedByString:@"&"];
    for (NSString *pair in pairs)
    {
        NSArray *elements = [pair componentsSeparatedByString:@"="];
        NSString *key = [[elements objectAtIndex:0] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSString *val = [[elements objectAtIndex:1] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        [dictionary setObject:val forKey:key];
    }
    return dictionary;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:32:48.363

所以，故事板开始让我紧张，我什至没有构建你的应用程序！:)

正如我在您的另一个问题中所述（这是重复的，但是嘿），缺少对视图控制器的引用是由于情节提要。viewDidAppear 和 viewWillAppear 在视图添加到层​​次结构时被调用。往返于背景和前景并不符合添加到层次结构的条件。幸运的是，您的应用会发送与 AppDelegate 中的方法相对应的通知。只需注册为 UIApplicationWillEnterForegroundNotification 通知的观察者。然后，您可以在收到通知后触发的方法中更新您的 UI！

**编辑：**添加到重复问题的链接以获得良好的衡量标准：[如何从我的 appDelegate 访问我的 viewController？iOS](https://stackoverflow.com/questions/10015567/how-do-i-access-my-viewcontroller-from-my-appdelegate-ios/10015885#comment12807504_10015885)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:48:47.400

嗯，那为什么你的 没有`UIViewController`声明`AppDelegate`？

**更新**

当你创建一个新项目时，你应该在你的`AppDelegate`：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIViewController *viewController;

@end 
```

//

```
#import "ViewController.h"

@implementation AppDelegate

@synthesize window, viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] init];

    [self.window setRootViewController:self.viewController];
    [self.window makeKeyAndVisible];

    return YES;
}

//...

@end 
```

# c# - 防止无效的文本框输入绑定到业务对象属性？

> ID：10017313
> 
> 赞同：2
> 
> 时间：2012-04-04T18:40:41.573
> 
> 标签：c#, .net, winforms, validation, data-binding

我有一个简单的 winforms 应用程序，其中包含一个表单、几个控件和一个如下定义的业务对象：

```
public class BusinessObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, e);
        }
    }

    private string _phoneNumber;
    public string PhoneNumber
    {
        get { return _phoneNumber; }
        set
        {
            if (_phoneNumber == value)
            {
                return;
            }

            _phoneNumber = value;
            OnPropertyChanged(new PropertyChangedEventArgs("PhoneNumber"));
        }
    } 
```

在我的表单上，我有一个文本框，它通过绑定源绑定到 PhoneNumber 属性，并且数据源更新模式设置为 OnPropertyChanged。这一切都按预期工作。在将文本分配给我的业务对象上的 PhoneNumber 属性之前，我需要对它进行一些验证。我认为我会在文本框的验证事件处理程序中执行此操作，如果输入无效，我会显示我的错误提供程序并设置 e.Cancel = true。不幸的是，这并不能阻止无效输入绑定到 PhoneNumber 属性。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:21:23.420

[数据验证](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_validation)可能正是您正在寻找的东西。应防止无效输入更改您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:05:28.900

正如 mrlucmorin 所建议的，我已将更新数据源模式从“OnPropertyChanged”更改为“OnValidation”，以便仅在文本框丢失并得到验证时才发生绑定。我确实在我的文本框的 Validating() 事件处理程序中实现了验证，并在数据无效时设置了 e.Cancel = true。不幸的是，单击工具栏上的按钮似乎不会导致文本框失去焦点，因此 Validating() 事件永远不会触发，但我可以通过在单击工具栏按钮时调用 ValidateChildren() 来解决此问题。再次感谢 mrlucmorin 和 ImGreg 的建议，最终解决了我的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:19:12.903

根据[msdn](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)，您正在使用的事件是在值更改后发生的。一种选择是存储数据的备份并恢复更改的值。然而，这不是一个理想的方法。

我会改变你验证控件的方式。

我不确定何时执行此操作，因为这取决于您的代码如何工作。当您失去对文本框控件的关注时，可能执行您自己的验证，或者在要更新数据源时进行验证。

编辑：也许您正在寻找[ErrorProvider Class](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)。这可以用来处理你想要的验证。

# ios - UITableView reloadData 不起作用

> ID：10017316
> 
> 赞同：0
> 
> 时间：2012-04-04T18:40:56.740
> 
> 标签：ios, reloaddata

我得到了另一个类的数组，并对这个类进行了更改，但是当我执行 reloadData 时并没有发生太多事情。怎么了？

这是我的代码

```
#pragma mark TesteFaceCarViewController methods

-(void)valores:(NSMutableArray *)array
{
    arrayInfracao = array;
    NSLog(@"Quantidade :%d", arrayInfracao.count);
    [table reloadData];
}

#pragma mark TableView

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Passei aqui!");
    NSLog(@"Quantidade :%d", arrayInfracao.count);
    return arrayInfracao.count;

}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Infracao *infracao = [[Infracao alloc] init];
    infracao = [arrayInfracao objectAtIndex:indexPath.row];
    cell.textLabel.text = infracao.dsInfracao;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:09:51.230

不客气！

[self.table reloadData];

# c# - C# 获取 Windows CD 密钥

> ID：10017321
> 
> 赞同：2
> 
> 时间：2012-04-04T18:41:13.917
> 
> 标签：c#, windows-7, registry

我一直在使用以下代码来获取 Windows 许可证密钥。它工作了很长时间。但现在我发现它可以在 Windows XP (x86) 上运行，但**不能**在 Windows 7 x64 上运行。

**原因：**`DigitalProductID`注册表值仅包含我们在 64 位操作系统上寻找的范围内的零。所以结果呢`BBBBB-BBBBB-BBBBB-BBBBB-BBBBB`。为什么会这样，我该如何解决这个问题？

```
 public static string LicenseCDKey
    {
        get
        {
            try
            {
                byte[] rpk = (byte[])Registry.LocalMachine
                   .OpenSubKey(@"Software\Microsoft\Windows NT\CurrentVersion")
                   .GetValue("DigitalProductId");
                string serial = "";
                const string possible = "BCDFGHJKMPQRTVWXY2346789";
                for (int i = 0; i < 25; i++)
                {
                    int accu = 0;
                    for (int a = 0; a < 15; a++)
                    {
                        accu <<= 8;
                        accu += rpk[66 - a];
                        rpk[66 - a] = (byte)(accu / 24 & 0xff);
                        accu %= 24;
                    }
                    serial = possible[accu] + serial;
                    if (i % 5 == 4 && i < 24)
                    {
                        serial = "-" + serial;
                    }
                }
                return serial;
            }
            catch
            {
                return ErrorString;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:10:39.480

正如**user287107**指出的那样，在 x64 操作系统上运行的 x86 应用程序（32 位）正在使用不同的注册表（注册表视图）。

为了访问 x64 注册表，您有几个选项：

1.  将您的平台目标更改为 x64（Visual Studio 项目设置）。
2.  如果您使用的是 .Net Framework 4.0，您可以使用`RegistryKey`类和`RegistryView`枚举来访问 x64 注册表。

    ```
    RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine,
                                              RegistryView.Registry64);

    string keyPath = @"Software\Microsoft\Windows NT\CurrentVersion";
    byte[] rpk = (byte[])key.OpenSubKey(keyPath).GetValue("DigitalProductId"); 
    ```

3.  如果您不使用 .Net Framework 4.0 并且不想将平台目标设置为 x64，则必须使用 Interop（`RegOpenKeyEx()`带有标志的 Win32 API 函数`KEY_WOW64_32KEY`）来访问 x64 注册表。

**开始编辑**

我刚刚发现了一篇有趣[的帖子](http://windows7forums.com/windows-7-software/52182-i-have-problen-find-product-key-windows-7-i-need-help-2.html)，解释了为什么 DigitialProductId 键可能为空/空：

1.  您正在使用批量许可证密钥来激活您的 Windows 7 操作系统。激活后，VLC 密钥将从注册表中删除。
2.  有人使用命令手动删除了注册表项（修改了这个键的内容）`slmgr –cpky`

**结束编辑**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:58:22.590

32 位应用程序使用不同的注册表路径

32 位应用程序访问 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion 中找不到产品密钥的注册表路径。

将处理器类型更改为 x64 有助于我获得真正的密钥。

# php - 在php mysql中使用带有max的innerjoin时不列出用户

> ID：10017323
> 
> 赞同：1
> 
> 时间：2012-04-04T18:41:20.727
> 
> 标签：php, mysql

我是 php 新手，我的 php 代码有问题。请帮助我.. 我有两张桌子

```
seeker
seeker_nic-----username
111-------------ali
222-------------umer
333-------------raza 
```

`

```
requestblood
id-------seeker_nic-----requireddate
1-------  111 ----------2012/9/9
2 ------- 222-----------2012/5/8
3 ------  111-----------2012/10/11
4 ------- 111-----------2012/11/12
5 ------- 222-----------2012/7/9
6 ------- 333 ----------2012/4/4 
```

现在我想用最大日期列出一次用户，比如..

```
s.no---- username----- requireddate
 1------- ali---------- 2012/11/12
 2------- umer--------- 2012/7/9
 3------- raza--------- 2012/4/4 
```

我正在使用这个查询

```
"SELECT  bloodrequest.requireddate, seeker.username
FROM 
bloodrequest
JOIN seeker ON bloodrequest.seeker_nic= seeker.seeker_nic
Join (SELECT max(requireddate)as maxdate FROM bloodrequest) maxresults on
bloodrequest.requireddate = maxresults.maxdate" 
```

..但它只显示1条记录而不是列表，如果使用此查询（左连接而不是连接）

```
"SELECT bloodrequest.requireddate, seeker.username
FROM 
bloodrequest
left JOIN seeker ON bloodrequest.seeker_nic = seeker.seeker_nic
left join (SELECT max(requireddate)as maxdate FROM bloodrequest) maxresults
on bloodrequest.requireddate = maxresults.maxdate"; 
```

然后它显示所有日期的所有记录，但不是最大值..

```
id------seeker_nic -------requireddate<br>
1 ------ ali   ---------   2012/9/9<br>
2 ------ ali ----------    2012/10/11<br>
3 ------ ali ------------  2012/11/12<br>
4------  umer------------- 2012/5/8<br>
5------- umer -------------2012/7/9<br>
6 ------ raza--------------2012/4/4<br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:45:09.933

你应该能够更简单地做到这一点：

```
select seeker.username, max(requestblood.requireddate)
from seeker
join requestblood on seeker.seeker_nic=requestblood.seeker_nic
group by seeker.username 
```

随意添加您需要的任何排序顺序。

# salesforce - 您能否以编程方式确定用户是否获得了软件包的许可？

> ID：10017325
> 
> 赞同：8
> 
> 时间：2012-04-04T18:41:26.610
> 
> 标签：salesforce, apex-code

我正在使用 LMA（许可证管理应用程序）并想知道是否可以通过编程方式判断用户是否已获得我的软件包的许可。

想象一下，如果我希望应用程序的用户看到彼此的应用程序特定数据 - 至少我需要一个被许可使用该应用程序的用户列表。

这可能吗？我希望能够将代码添加到可用于根据用户是否已通过 LMA 的“管理许可证”流程获得许可证席位来做出决定的程序包。

更新：我发现您可以通过[UserInfo.isCurrentUserLicensed(namespace)](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_userinfo.htm)方法判断当前登录的用户是否已获得许可 - 但到目前为止还没有办法获得所有许可用户的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:12:19.793

遗憾的是，UserInfo.isCurrentUserLicensed(namespace) 是与 apex 许可相关的唯一方法，目前无法以编程方式获取应用程序的所有许可用户。

在 appexchange 上有一个想法，投票不会有什么坏处：[https ://sites.secure.force.com/success/ideaView?id=08730000000bj7xAAA](https://sites.secure.force.com/success/ideaView?id=08730000000bj7xAAA)

# c - 存储在 C char 中的 Unicode

> ID：10017328
> 
> 赞同：27
> 
> 时间：2012-04-04T18:41:36.293
> 
> 标签：c, unicode, ascii

我现在在 Linux 上学习 C 语言，遇到了一些奇怪的情况。

据我所知，标准 C 的`char`数据类型是 ASCII，1 字节（8 位）。这应该意味着它只能保存 ASCII 字符。

在我的程序中，我使用`char input[]`，它由`getchar`如下伪代码之类的函数填充：

```
char input[20];
int z, i;
for(i = 0; i < 20; i++)
{
   z = getchar();
   input[i] = z;
} 
```

奇怪的是，它不仅适用于 ASCII 字符，而且适用于我想象的任何字符，例如`@&@{čřžŧ¶'`[łĐŧđĐ¶←^€~[←^ø{&}čž`输入。

我的问题是——这怎么可能？它似乎是 C 语言中许多美丽的例外之一，但我非常感谢您的解释。是操作系统、编译器、隐藏语言的附加超级功能的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-04T18:46:53.897

这里没有魔法 - C 语言让您可以访问原始字节，因为它们存储在计算机内存中。如果您的终端使用 utf-8（很可能），非 ASCII 字符在内存中占用的字节数超过一个字节。当您再次显示时，我们的终端代码将这些序列转换为单个显示的字符。

只需更改代码以打印`strlen`字符串，您就会明白我的意思。

要在 C 中正确处理 utf-8 非 ASCII 字符，您必须使用一些库来为您处理它们，例如 glib、qt 或许多其他库。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-04T18:58:18.910

ASCII 是一个 7 位字符集。在 C 中通常由 8 位字符表示。如果设置了 8 位字节中的最高位，则它***不是***ASCII 字符。

另请注意，您*不能保证 ASCII*作为基础，许多人忽略了其他情况。如果你想检查一个*“原始”*字节是否是一个字母字符，你可以换句话说不是，当注意所有系统时，说：

```
is_alpha = (c > 0x40 && c < 0x5b) || (c > 0x60 && c < 0x7b); 
```

相反，您必须使用`ctype.h`并说：

```
isalpha(c); 
```

唯一的例外，AFAIK，是数字，至少在大多数表上，它们具有连续的值。

因此这是有效的；

```
char ninec  = '9';
char eightc = '8';

int nine  = ninec  - '0';
int eight = eightc - '0';

printf("%d\n", nine);
printf("%d\n", eight); 
```

但这不能保证是“a”：

```
alhpa_a = 0x61; 
```

不基于 ASCII 的系统，即使用[EBCDIC](http://en.wikipedia.org/wiki/Ebcdic#Codepage_layout)；C 在这样的平台上仍然可以正常运行，但在这里它们（大部分）使用 8 位而不是 7 位，即`A`可以编码为十进制`193`而不是`65`ASCII。

* * *

但是对于 ASCII；具有十进制 128 - 255 的字节（使用 8 位）是扩展的，而不是 ASCII 集的一部分。即 ISO-8859 使用这个范围。

经常做什么；也就是将两个或多个字节组合成一个字符。因此，如果您连续打印两个字节，定义为[utf8](http://www.utf8-chartable.de/) `0xc3 0x98` == Ø，那么您将得到这个字符。

这又取决于您所处的环境。在许多系统/环境中，打印 ASCII 值会在字符集、系统等之间给出相同的结果。但是打印字节 > 127 或双字节字符会根据本地配置给出不同的结果。

IE：

A先生运行程序*得到*

贾斯€</p>

虽然 B 先生得到

亚斯派斯

这可能与 ISO-8859 系列和 Windows-1252 的扩展字符的单字节表示等特别相关。

*   [ASCII_printable_characters](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)，注意它们是 7 而不是 8 位。
*   [ISO_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)和[ISO_8859-15](http://en.wikipedia.org/wiki/ISO_8859-15#Codepage_layout)，广泛使用的集合，以 ASCII 为核心。
*   [Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)，Windows 的遗留系统。

* * *

*   [UTF-8#Codepage_layout](http://en.wikipedia.org/wiki/UTF-8#Codepage_layout)，在 UTF-8 中你有 ASCII，然后你有特殊的再见序列。
    *   每个序列都以 > 127 的字节开始（这是最后一个 ASCII 字节），
    *   后跟给定数量的字节，所有字节都以 bits 开头`10`。
    *   换句话说，您永远不会在多字节 UTF-8 表示中找到 ASCII 字节。

那是; UTF-8 中的第一个字节，如果不是 ASCII，则表示该字符有多少字节。您也可以说 ASCII 字符表示后面没有更多字节 - 因为最高位是 0。

即，如果文件解释为 UTF-8：

```
fgetc(c);

if c  < 128, 0x80, then ASCII
if c == 194, 0xC2, then one more byte follow, interpret to symbol
if c == 226, 0xE2, then two more byte follows, interpret to symbol
... 
```

举个例子。如果我们看一下您提到的角色之一。如果在 UTF-8 终端中：

> $ echo -n "č" | xxd

应该产生：

> 0000000: c48d ..

换句话说，“č”由***两个***字节 0xc4 和 0x8d 表示。将 -b 添加到 xxd 命令，我们得到字节的二进制表示。我们对它们进行如下剖析：

```
 ___  byte 1 ___     ___ byte 2 ___                       
|               |   |              |
0xc4 : 1100 0100    0x8d : 1000 1101
       |                    |
       |                    +-- all "follow" bytes starts with 10, rest: 00 1101
       |
       + 11 -> 2 bits set = two byte symbol, the "bits set" sequence
               end with 0\. (here 3 bits are used 110) : rest 0 0100

Rest bits combined: xxx0 0100 xx00 1101 => 00100001101
                       \____/   \_____/
                         |        |
                         |        +--- From last byte
                         +------------ From first byte 
```

> 这给了我们：00100001101 [2] = 269 [10] = 0x10D => Uncode 代码点 U+010D == "č"。

这个数字也可以在 HTML 中用作`&#269;`== č

这个和许多其他代码系统的共同点是 8 位字节是基础。

* * *

通常这也是一个关于上下文的问题。以 GSM SMS 为例，ETSI GSM 03.38/03.40 ( [3GPP TS 23.038](http://www.3gpp.org/ftp/Specs/archive/23_series/23.038/23038-a00.zip) , [3GPP 23038](http://www.3gpp.org/ftp/Specs/html-info/23038.htm) )。在那里我们还找到了一个 7 位字符表，7 位 GSM 默认字母表，但不是将它们存储为 8 位，而是将它们存储为 7 位¹。通过这种方式，您可以将更多字符打包到给定数量的字节中。即标准 SMS 160 个字符变成 1280 位或 160 字节作为 ASCII 和 1120 或 140 字节作为 SMS。

[[1](http://en.wikipedia.org/wiki/Ebcdic#Codepage_layout)并非无一例外，（更多的是故事）。]

即以 SMS UDP 格式保存为 septets (7bit) C8329BFD06 到 ASCII 的字节的简单示例：

```
 _________
7 bit UDP represented          |         +--- Alphas has same bits as ASCII
as 8 bit hex                   '0.......'
C8329BFDBEBEE56C32               1100100 d * Prev last 6 bits + pp 1
 | | | | | | | | +- 00 110010 -> 1101100 l * Prev last 7 bits 
 | | | | | | | +--- 0 1101100 -> 1110010 r * Prev 7 + 0 bits
 | | | | | | +----- 1110010 1 -> 1101111 o * Last 1 + prev 6
 | | | | | +------- 101111 10 -> 1010111 W * Last 2 + prev 5
 | | | | +--------- 10111 110 -> 1101111 o * Last 3 + prev 4
 | | | +----------- 1111 1101 -> 1101100 l * Last 4 + prev 3
 | | +------------- 100 11011 -> 1101100 l * Last 5 + prev 2
 | +--------------- 00 110010 -> 1100101 e * Last 6 + prev 1
 +----------------- 1 1001000 -> 1001000 H * Last 7 bits
                                 '------'
                                    |
                                    +----- GSM Table as binary 
```

9 个字节*“解压”*变成 10 个字符。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-04T18:45:55.987

ASCII 是 7 位，而不是 8 位。a`char []`保存字节，可以是任何编码 - iso8859-1、utf-8，无论你想要什么。C不在乎。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T07:56:16.893

这就是[UTF-8](http://utf8everywhere.org/)的魔力，你甚至不必担心它是如何工作的。唯一的问题是 C 数据类型被命名`char`（对于*character*），而它的实际含义是*byte*。字符和编码它们的字节之间没有 1:1 的对应关系。

在您的代码中发生的情况是，从程序的角度来看，您输入一个*字节*序列，它将字节存储在内存中，如果您打印文本，它会打印字节。此代码不关心这些字节如何对字符进行编码，只有终端需要担心在输入时对它们进行编码并在输出时正确解释它们。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-11T06:12:02.027

当然有很多库可以完成这项工作，但是要快速解码任何 UTF8 unicode，这个小函数很方便：

```
typedef unsigned char utf8_t;

#define isunicode(c) (((c)&0xc0)==0xc0)

int utf8_decode(const char *str,int *i) {
    const utf8_t *s = (const utf8_t *)str; // Use unsigned chars
    int u = *s,l = 1;
    if(isunicode(u)) {
        int a = (u&0x20)? ((u&0x10)? ((u&0x08)? ((u&0x04)? 6 : 5) : 4) : 3) : 2;
        if(a<6 || !(u&0x02)) {
            int b,p = 0;
            u = ((u<<(a+1))&0xff)>>(a+1);
            for(b=1; b<a; ++b)
                u = (u<<6)|(s[l++]&0x3f);
        }
    }
    if(i) *i += l;
    return u;
} 
```

考虑您的代码；您可以迭代字符串并读取 unicode 值：

```
int l;
for(i=0; i<20 && input[i]!='\0'; ) {
   if(!isunicode(input[i])) i++;
   else {
      l = 0;
      z = utf8_decode(&input[i],&l);
      printf("Unicode value at %d is U+%04X and it\'s %d bytes.\n",i,z,l);
      i += l;
   }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-04T18:48:53.593

非 ASCII 字符有一个数据类型`wint_t`( )。`#include <wchar.h>`您可以使用该方法`getwchar()`来阅读它们。

# ruby-on-rails - Rails 3 应用程序的架构理念

> ID：10017329
> 
> 赞同：2
> 
> 时间：2012-04-04T18:41:39.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, architecture

我希望能就我们的 Rails 3 应用程序的架构获得一些意见。

目前，我们有一个 Rails 3.0.7 应用程序，它允许用户通过我们连接的媒体设备之一管理在他们的电视上显示的内容（促销、视频、菜单、体育统计等）。我们有超过 1000 台（并且还在不断增加）这些连接设备，它们每分钟轮询我们的系统以检查其内容的变化，并每 15 分钟报告一次它们的统计信息（例如 CPU、内存等）。

我们系统的主要优势之一是，作为管理员，我们可以更改单个内容项的外观/工作方式，并将其分发到使用它的所有设备。此功能的缺点是当我们进行更改时，我们的系统会暂时无法使用，因为所有连接的设备几乎同时要求更新。

因此，我们计划重新构建我们的应用程序，以便内容管理。当设备与应用程序通信时，系统不会受到影响。可能有几十种方法可以解决这个问题。一种方法是拥有一个单独的 Rails 应用程序，该应用程序仅用于设备获取它们应该显示的内容、管理员可以监控等。它可以与当前内容管理共享模型、数据库等。系统。这种方式可能难以管理模型、迁移等。我显然不想复制模型。如果内容 mgt 也是理想的。系统仍然可以显示帐户的设备状态，以便帐户管理员可以查看他们的设备是否在线等。

我认为某种类型的队列机制非常适合 resque/redis，因为当在内容管理中进行更改时。系统我们可以只排队设备实例可以拾取和处理的作业。

我想把它扔给社区，以从其他可能已经工作或仍在使用利用连接设备的系统的人那里获得意见和想法。提前感谢您的贡献。我很感激！

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:58:48.237

1000 多个客户，约 1 个请求。每分钟听起来不像是需要更改架构才能正常运行的负载。一般来说，从长远来看，简单的单一应用架构会更容易维护，因此您应该尝试坚持下去，直到出现无法解决的问题。

如果性能/响应能力是主要问题，为什么不向堆栈添加缓存代理服务器？

另一个简单的选择是将应用程序安装在两台服务器上，一台用于管理员，另一台用于客户端设备。请注意，这仅在数据库不是瓶颈时才有帮助。

# java - 安装 GlassFish Server 时出错（SwiXML 描述符无效）

> ID：10017330
> 
> 赞同：3
> 
> 时间：2012-04-04T18:41:41.820
> 
> 标签：java, netbeans, glassfish

我正在尝试在 Windows 7 x64 机器上安装 GlassFish Server 3.1.2。系统向我报告了一个**无效的 SwiXML 描述符错误**……我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:35:46.780

这是在 OpenMQ JIRA 上注册的已知错误：http: [//java.net/jira/browse/MQ-33](http://java.net/jira/browse/MQ-33)

我为 Glassfish 打开了一个问题，因为 OpenMQ 一个被标记为已解决：http: [//java.net/jira/browse/GLASSFISH-18757](http://java.net/jira/browse/GLASSFISH-18757)

SwiXML 错误实际上与 Glassfish 配置有关。The installer runs without any trouble when option "Install only" is selected. 然而，当您运行安装程序以配置已安装的 Glassfish 时，该错误总是会发生。

有此类问题的用户有一个替代路径（直到未发布修复程序）： 1- 使用仅安装选项安装 Glassfish 2- 使用 asadmin 手动配置域

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T13:58:16.803

我已经解决了强制使用 EN 语言的 Unix 系统。在 Unix 上，您必须将安装程序运行为：

> LANG=EN ./glassfish-3.1.2.2-unix.sh

我在我的博客（西班牙语）上发表了一篇关于它的文章：http: [//balteus.blogspot.com.es/2013/02/error-del-instalador-unix-de-glassfish.html](http://balteus.blogspot.com.es/2013/02/error-del-instalador-unix-de-glassfish.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:20:49.027

我遇到了同样的问题，在网上搜索后，找不到解决方案，但我注意到这个问题的大多数报告都本地化为不同的语言（日语、葡萄牙语、法语......和西班牙语，即我的情况）。Glassfish 是多语言版本还是英文版本并不重要，因为安装程序本身已本地化。

# jquery - jquery - 在当前选项卡中打开链接而不是离开页面

> ID：10017333
> 
> 赞同：1
> 
> 时间：2012-04-04T18:41:54.680
> 
> 标签：jquery, jspinclude

我对 jquery 很陌生，我需要您在以下方面提供帮助：

我有一个包含 jquery 选项卡的文件“mainPage.jsp”，目前只有一个选项卡。此选项卡的内容是一个包含的 jsp 文件 users.jsp，它构建了一个用户表。每个用户行都包含一个“详细信息”列，其中包含以下链接：

```
<a href="userDetails.jsp?userid=<%=user.getUserID()%>" style="color: blue;">Details</a> 
```

当用户单击此链接时，我希望新内容显示在当前选项卡中，而不是更改页面（这是它当前所做的）。

以下链接中有关于如何做到这一点的解释，但我想我做错了什么：

[在当前选项卡中打开链接而不是离开页面](http://jqueryui.com/demos/tabs/#...open_links_in_the_current_tab_instead_of_leaving_the_page)

我的 mainPage.jsp ：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Users</a></li>
    </ul>

    <div id="tabs-1"> <jsp:include page="users.jsp" />  </div>

</div> 
```

此页面中的脚本：

```
<script type="text/javascript">

$(document).ready(function() {

    $('#tabs').tabs();
    $('#tabs').on('click', 'a', function(event) {
        $.get($(this).attr('href'), function (response){
           $(this).parent().html(response);
           event.preventDefault();
        });
    });
});
</script> 
```

也试过：

```
 <script type="text/javascript">

$(document).ready(function() {

    $('#tabs').tabs();
    $('#tabs').on('click', 'a', function(event) {
        $(ui.panel).load(this.href);
        event.preventDefault();
        });
});

</script> 
```

这是出现的链接（运行 jsp 后）：

```
<a href="userDetails.jsp?userid=14" style="color: blue;">Details</a> 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:57:08.523

找到解决方案，这应该是脚本：

```
 <script type="text/javascript">

$(document).ready(function() {
    $('#tabs').tabs({
        load: function(event, ui) {
            $(ui.panel).delegate('a', 'click', function(event) {
                $(ui.panel).load(this.href);
                event.preventDefault();
            });
        }
    });

    $("#tabs").bind('tabsselect', function(event, ui) {
        window.location.href=ui.tab;
    });

});

</script> 
```

以及它的用法：

```
<div id="tabs">
        <ul>
            <li><a href="users.jsp"><span>Users</span></a></li>
            <li><a href="conference.jsp"><span>Conferences</span></a></li>
            <li><a href="companies.jsp"><span>Companies</span></a></li>
        </ul>
</div> 
```

这就是为什么例如第一个选项卡的内容是 users.jsp 的原因。在 usrs.jsp 我使用链接：

```
<td><a href="userDetails.jsp?userid=<%=user.getUserName()%>"> <img src="/conf4u/resources/imgs/yada.png" alt=""> Details </a> </td> 
```

并且 userDetails.jsp 现在在单击时会在同一个选项卡中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:29:45.670

遇到这个和以前的答案没有帮助，但这确实：

```
<script type="text/javascript">
    $(function() {
        $("#tabs").tabs({
            load: function (event, ui) {
                $('a', ui.panel).live('click', function () {
                    $(ui.panel).load(this.href);
                    return false;
                });
            }
        });
    });
<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:24:05.993

怎么样：

```
<script type="text/javascript">
    $(document).ready(function() {

        $('#tabs').tabs();
        $('#tabs').on('click', 'a', function(event) {
            event.preventDefault();
            $.get($(this).attr('href'), function (response){
               $(this).parent().html(response);
            });
        });
    });
</script> 
```

# gradle - 上下文 URL 不能为空 - Artifactory Gradle 插件

> ID：10017334
> 
> 赞同：9
> 
> 时间：2012-04-04T18:41:56.667
> 
> 标签：gradle, artifactory

我正在尝试使用 Artifactory Gradle 插件来发布到我的本地 Artifactory 实例。

我在 localhost:8081/artifactory 运行了最新版本（默认安装）。我可以通过网络浏览器访问来验证这一点。

但是，以我的最小示例..我收到“**找不到上下文 URL 错误**

请注意，我已经指定了所有必需的 Artifactory 配置设置 - （如 Artifactory Gradle WebPage 上所示）.. 包括上下文 URL。

```
buildscript {
  repositories{ maven { url 'http://repo.jfrog.org/artifactory/gradle-plugins' } }
  dependencies{ classpath 'org.jfrog.buildinfo:build-info-extractor-gradle:2.0.12'}
}

apply plugin: 'artifactory'

artifactory {
  contextUrl = 'http://localhost:8081/artifactory'   //The base Artifactory URL if not overridden by the publisher/resolver
  publish {
    repository {
      repoKey = 'integration-libs'   //The Artifactory repository key to publish to
      username = 'admin'          //The publisher user name
      password = 'password'
    } 
  }
  resolve {
    repository {
      repoKey = 'libs-releases'  //The Artifactory (preferably virtual) repository key to resolve from
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T23:55:17.037

这看起来像一个奇怪的错误，我不确定是什么原因造成的。我在我的一些 gradle 构建文件中得到了它，但其他的似乎工作正常。我通过在 publish 元素中再次定义 contextUrl 来修复它，所以你的脚本现在看起来像：

```
artifactory {
  contextUrl = 'http://localhost:8081/artifactory'   //The base Artifactory URL if not overridden by the publisher/resolver
  publish {
    contextUrl = 'http://localhost:8081/artifactory' // <- this is the fix
    repository {
      repoKey = 'integration-libs'   //The Artifactory repository key to publish to
      username = 'admin'          //The publisher user name
      password = 'password'
    } 
  }
  resolve {
    repository {
      repoKey = 'libs-releases'  //The Artifactory (preferably virtual) repository key to resolve from
    }
  }
} 
```

您可能还必须在 resolve 元素中再次定义它。

# java - NTLM 身份验证的哪些参数可以自动化，以及如何使用 java 来实现？

> ID：10017335
> 
> 赞同：3
> 
> 时间：2012-04-04T18:42:09.713
> 
> 标签：java, authentication, automation, ntlm

我想知道在 NTLM 身份验证期间使用的 6 个参数中可以自动化哪些参数，它们是：

“用户名” - 用于登录当前使用的操作系统配置文件的用户名。-*已经自动化，使用`System.getProperty("user.name")`*

“密码” - 同上。-*可能无法自动化，但我永远不确定，直到我尝试询问......*

“ProxyAddress” - 身份验证“握手”以便通过的代理的地址。-*我已经伪自动化，但它的固定代码，因此很糟糕。*

“ProxyPort” - 前面解释过的代理上的侦听端口。-*我已经伪自动化，但它的固定代码，因此很糟糕。*

“工作站” - 我的电脑在本地网络中的 ID 或其他东西......我目前正在使用我的机器的属性 ID，它正在工作，但我不知道它是否正确的值，或者是否需要一个值首先。-*不知道如何自动化，但我知道这是可能的。需要帮忙*

“域” - 不知道它指的是哪个域，因此不知道它应该具有什么价值......将其留空似乎正在工作...... -*不知道如何自动化，但我知道这是可能的。需要帮忙*

额外信息：我正在为该过程使用 HtmlClient 库，包括身份验证。

```
DefaultCredentialsProvider credentialProvider = (DefaultCredentialsProvider) webClient.getCredentialsProvider();
    credentialProvider.addNTLMCredentials(username, password, proxyAddress, proxyPort, workstation, domain);
    webClient.setUseInsecureSSL(true); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T21:41:18.613

我有点假设您在谈论[Apache HTTPClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/package-summary.html)和[HTLMUnit](http://www.jarvana.com/jarvana/view/org/hudsonci/tools/htmlunit/2.6-hudson-3/htmlunit-2.6-hudson-3-javadoc.jar!/com/gargoylesoftware/htmlunit/DefaultCredentialsProvider.html)，但我是基于您提供的代码中的方法签名的假设，所以如果我弄错了，我深表歉意。

1.  对于 NTLM，这是*远程*用户名，不一定是本地主机上当前登录的用户。我怀疑这些是您场景中的同一用户，但我确实想指出这一点。在这种情况下，是的，使用`user.name`系统属性将提供当前登录用户的名称：

    ```
    System.getProperty("user.name"); 
    ```

    在 Windows 上，您还可以使用`USERNAME`环境变量：

    ```
    System.getEnv("USERNAME"); 
    ```

    或者你可以使用这个[`com.sun.security.auth.module.NTSystem`类](http://docs.oracle.com/javase/6/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/NTSystem.html)：

    ```
    new NTSystem.getName(); 
    ```

2.  您无法获取用户的密码。但是，您仍然可以在用户不需要提供密码的情况下执行单点登录（更多内容见下文。）

3.  用于指定 HTTP 代理的 Java 机制使用[`http.proxyHost`系统属性](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)：

    ```
    String proxyHost = System.getProperty("http.proxyHost"); 
    ```

    请注意，您还应该检查`http.nonProxyHosts`系统属性。

    一些 JRE（立即想到 Mac OS）会根据系统代理设置来设置这些系统属性。如果您的 JRE 未设置此项，您可能希望尝试从其他来源确定代理。在 Unix 系统上，您可能希望使用`HTTP_PROXY`环境变量。在 Windows 系统上，您可能最好使用`ProxySelector`该类，如[this stackoverflow post](https://stackoverflow.com/questions/376101/setting-jvm-jre-to-use-windows-proxy-automatically)中所述。

4.  与`http.proxyHost`系统属性类似，Java 机制与[`http.proxyPort`系统属性相同](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)：

    ```
    int proxyPort = Integer.parseInt(System.getProperty("http.proxyPort")); 
    ```

5.  不幸的是，要在 Unix 上可靠地获取您的主机名，您应该真正`gethostname(2)`通过 JNI 或 exec调用。`/usr/bin/hostname`在 Windows 上，您可以使用`COMPUTERNAME`环境变量：

    ```
    System.getEnv("COMPUTERNAME"); 
    ```

6.  您可以获得*本地机器*加入的域名，但是（没有提示用户），没有办法自动获取您正在验证的机器的域名。当然，如果您的本地工作站和身份验证目标在同一个域上，那么这没有实际意义。因此，在 Windows 上，您可以使用`USERDOMAIN`环境变量：

    ```
    System.getEnv("USERDOMAIN"); 
    ```

    或者你可以使用这个`NTSystem`类：

    ```
    new NTSystem().getDomain(); 
    ```

唷。

至于实现“单点登录”（这样用户不需要提供密码）：

您*可以使用*[Java Kerberos](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jgss/single-signon.html)功能执行单点登录（无需密码），但是我没有成功，因为 Java 需要显式 Kerberos 配置（并且不使用主机的配置）并且它没有实现一些所需的密码通过活动目录。（或者这是我的理解。）

`InitializeSecurityContext`您还可以通过使用 JNI 调用并在标头中传递生成的令牌，使用 NTLM 或 SPNEGO (Kerberos) 执行单点登录`WWW-Authenticate`。

# web-services - REST Web 服务的客户端 id 生成策略

> ID：10017338
> 
> 赞同：6
> 
> 时间：2012-04-04T18:42:16.053
> 
> 标签：web-services, rest, idempotent

假设我想构建一个 REST 服务来制作如下所示的笔记：

```
GET    /notes/     // gives me all notes
GET    /notes/{id} // gives the note identified by {id}
DELETE /notes/{id} // delete note

PUT    /notes/{id} // creates a new note if there is no note identified by {id}
                   // otherwise the existing note is updated 
```

由于我希望我的服务是幂等的，所以我使用 PUT 来创建和更新我的笔记，这意味着新笔记的 id 是由客户端设置/生成的。

我曾考虑过使用 GUID/UUID，但它们很长，并且会使记住 URL 变得相当困难。同样从数据库的角度来看，当在大表中用作主键时，从性能的角度来看，这样的长字符串 id 可能会很麻烦。

你知道一个好的 id 生成策略，它生成短 id 并且当然可以避免冲突吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T18:48:25.000

高度分布式系统（如[git](/questions/tagged/git "显示标记为“git”的问题")、[mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")等）使用长 UUID/哈希，而集中式关系数据库（或[svn](/questions/tagged/svn "显示标记为“svn”的问题")）可以简单地使用`int`s 是有原因的。没有简单的方法可以在客户端以分布式方式创建短 ID。服务器要么处理它们，要么你必须忍受浪费的 id。通常它们包含编码时间戳、客户端/计算机 ID、散列内容等。

这就是为什么 REST 服务通常使用

```
POST /notes 
```

对于非幂等保存，然后使用`Location:`header 的输出作为响应：

```
Location: /notes/42 
```

# android - 安卓动态壁纸到家庭启动器

> ID：10017340
> 
> 赞同：0
> 
> 时间：2012-04-04T18:42:18.853
> 
> 标签：android, layout, wallpaper, launcher

我有个问题。我正在制作一个“家庭启动器”，并使用以下代码设置背景：

```
sfondo = peekWallpaper();
getWindow().setBackgroundDrawable(sfondo); 
```

如果背景是静态的，OK。但如果背景是动画的，它会显示静态背景。你有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:00:33.260

当您使用 .png、.jpg 或 .gif 等图像壁纸时。ImageWallpaper 仅在表面发生变化时绘制，例如更改事件、偏移更改事件。它不像动态壁纸那样每秒都在绘制，每毫秒绘制一次。即使您将带有 .gif 之类的动画图像的图像壁纸设置为 ImageWallpaper，它也只会在特定事件发生时绘制。

# android - 如何确定应用是原生应用还是 html5？

> ID：10017341
> 
> 赞同：9
> 
> 时间：2012-04-04T18:42:25.000
> 
> 标签：android, iphone, html, native

我想知道任何移动应用程序是原生的还是 html5 的。有没有什么软件或网站能说明这一点。如何检测应用程序是本机还是 html5？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T21:07:43.073

您可以使用任何工具（如 winzip 或 winrar）解压缩 .apk。如果它是基于 html5 的应用程序，您将在 /res/assets 文件夹中看到 .html、.js 和 .css 文件。

要获取 .apk，请使用 adb 从手机中提取它。不过，您可能需要 root 用户。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-05T02:48:27.200

原生应用程序通常使用 Web 视图进行渲染——这些被称为混合应用程序。使用 Java 确定要显示的内容（参见 Web 服务器），然后使用 Web 视图来呈现显示。因此，不能使用 HTML/CSS/JS 文件的存在来确定它是一个 html5 应用程序。

正如@Tim 所说——除非你非常非常深入地挖掘，否则你不能 100% 确定。那时可能还没有。

# php - HTML2PDF 问题，不呈现 PDF

> ID：10017347
> 
> 赞同：1
> 
> 时间：2012-04-04T18:43:07.770
> 
> 标签：php, html, pdf, tcpdf, html2pdf

出于某种原因，HTML2PDF/TCPD 没有呈现 PDF ......我不知道为什么......：S

[render.php（主文件）](http://pastebin.com/6FEqd9Vf)

[表单.php](http://pastebin.com/7y1ed8Y0)

**（链接将引导您到我尝试使用的代码，因此您可以对其进行测试，您只需要 HTML2PDF 类）**

有人可以告诉我为什么表单不呈现？？？我吓坏了！！！

提前谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:34:51.853

答案是执行时间。

通过使用`set_time_limit()`函数解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:51:07.213

检查网络服务器日志是否有任何与 html2pdf 相关的错误。如果您使用的是 apache，命令将如下所示：

```
tail -f -n 500 /var/log/apache2/error.log 
```

更新了我的答案，因为如果 pdf 被渲染但为空，这不是权限问题。

# c - 如何在 C 中使用 graphviz 创建双向箭头？

> ID：10017349
> 
> 赞同：0
> 
> 时间：2012-04-04T18:43:09.803
> 
> 标签：c, graphviz, graph-visualization

我正在尝试借助 graphviz 库在 C 中可视化图形。图由邻接矩阵给出。图是有向的，有问题。我使用矩阵并在 n 和 m 之间创建一条边，然后继续，但 m 和 n 之间的边也在那里，我创建了另一条边。结果，graphviz 像预期的那样绘制了两条边，但是具有大量边的图很难阅读。我想创建一个带有双向箭头的单边，但不知道如何正确操作。（有一个愚蠢的想法是先创建一个带有图形描述的文件（添加到边缘的描述[dir = both]），然后再对其进行处理并绘制图形。我相信有更好的解决方案，但我不知道。）

我正在使用这样的矩阵：

```
for(i=0; i<n; i++)
            nodes[i] =  agnode(g, itoa(i+1, name)); // Agnode_t *nodes[100];
    for(i=0; i<n; i++)
            for(j=0; j<n; j++)
                    if(matrix[i][j])
                            agedge(g, nodes[i], nodes[j]); // add edges 
```

谢谢您的回答！

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:45:17.437

您需要`dir`在边缘设置属性，我相信您可以在最里面的循环中这样做：

```
Agedge_t *e = agedge(g, nodes[i], nodes[j]);
agsafeset(e, "dir", "both", ""); 
```

# c# - C# 下载带有进度指示器的文件，然后安装文件

> ID：10017350
> 
> 赞同：0
> 
> 时间：2012-04-04T18:43:09.743
> 
> 标签：c#, asynchronous, download

我正在尝试编写一个 C# Windows 应用程序来下载文件（等待下载完成 - 提供一些进度指示器），然后执行下载的文件。我想我要么需要：

*   具有进度指示器且不会使我的应用程序无响应的同步下载
*   等待下载完成然后尝试执行它的异步下载。

前者（同步下载）似乎可以满足我的要求，但我找不到任何指示进度的方法，而且它似乎使我的程序无响应（就像它挂起一样）——这可能会导致用户关闭应用程序等待它完成下载。

后来（异步下载）我已经能够使用进度指示器等来完成，但发生的是下载开始并且我的应用程序在完成下载之前立即尝试安装它，这当然会失败。

那么实现这一目标的最佳方法是什么？下面是我目前使用进度条进行异步下载的代码。

**编辑 2012 年 4 月 10 日**

旧代码变得很麻烦，所以这就是我目前拥有的。它可以工作，只是它不更新进度条。

```
 private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
    {

            List<App> FilesToDownload = e.Argument as List<App>;

            foreach (App Program in FilesToDownload) // Loop through List with foreach
            {
                //string Text = ;
                UpdateRichTextBox("Downloading " + Program.Filename + "... Please wait");

                string Source = Program.DownloadLocation + "/" +  Program.Filename;
                string Destination = System.AppDomain.CurrentDomain.BaseDirectory + Program.Filename;

                WebClient webClient = new WebClient();
                webClient.DownloadFile(Source, @Destination);
            }

            UpdateRichTextBox("File download complete");

            foreach (App Program in FilesToDownload) // Loop through List with foreach
            {
                string Filename = Program.Filename;
                string Arguments = Program.InstallParameters;

                if (Filename != "advisorinstaller.exe")
                {
                    Process p = new Process();
                    p.StartInfo.FileName = System.AppDomain.CurrentDomain.BaseDirectory + Filename;
                    p.StartInfo.Arguments = Arguments;
                    p.Start();
                    p.WaitForExit();
                }
                else
                {
                    MessageBox.Show("About to install Belarc Advisor. This may take 10-15 minutes to run - do not shutdown this program. Click OK when ready to proceed.");
                }
            }
    }

    private void backgroundWorker1_ProgressChanged(object sender, System.ComponentModel.ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
    {
        UpdateRichTextBox("Install Complete");

    } 
```

**编辑 2012 年 4 月 11 日**

所以我编辑了我的后台工作人员的工作如下：

```
 private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
        {

            List<App> FilesToDownload = e.Argument as List<App>;

            int counter = 0;
            int percent = 0;

            foreach (App Program in FilesToDownload) // Loop through List with foreach
            {
                percent = ((counter / FilesToDownload.Count) * 100);
                backgroundWorker1.ReportProgress(percent, "");

                UpdateRichTextBox("Downloading " + Program.Filename + "... Please wait");

                string Source = Program.DownloadLocation + "/" +  Program.Filename;
                string Destination = System.AppDomain.CurrentDomain.BaseDirectory + Program.Filename;

                WebClient webClient = new WebClient();
                webClient.DownloadFile(Source, @Destination);

                counter++;

            }

            //backgroundWorker1.ReportProgress(100, "Complete!");
    } 
```

如果我取消注释最后一行，进度条会变为 100%。但它没有使用：

```
percent = ((counter / FilesToDownload.Count) * 100);
backgroundWorker1.ReportProgress(percent, ""); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:57:49.410

您可以使用 a[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在后台执行同步下载。它也支持进度报告。这将避免阻塞您的 UI（因为下载在不同的线程上运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:01:16.740

您可以使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)类在主线程上等待（使用 WaitOne()），直到调用您的 client_DownloadFileCompleted() 事件处理程序（在您的对象上调用 Set()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:37:41.833

无需将其包装`WebClient`在 a`BackgroundWorker`中，因为它已经是异步的（使用线程池中的线程）。

**注意：**下面的示例是在编辑器中编写的，而我检查了 MSDN 文档中的方法签名，我很容易出错。

```
public void InstallSecuniaPSI()
{
    var source = new Uri("http://www.webserver.com:8014/psisetup.exe");
    var dest = Path.Combine(Path.GetTemp(), "Download_SecuniaPSI.exe");

    var client = new WebClient();
    client.DownloadProgressChanged += OnDownloadProgressChanged;
    client.DownloadFileCompleted += OnDownloadComplete;
    client.DownloadFileAsync(source, dest, dest);   
}

private void OnDownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    // report progress
    Console.WriteLine("'{0}' downloaded {1} of {2} bytes. {3}% complete"(string)e.UserState, e.BytesReceived, e.TotalBytesToReceive, e.ProgressPercentage);
}

private void OnDownloadComplete(object sender, AsyncCompletedEventArgs e)
{
    // clean up
    var client = (WebClient)sender;
    client.DownloadProgressChanged -= OnDownloadProgressChanged;
    client.DownloadFileCompleted -= OnDownloadComplete;

    if (e.Error != null)
        throw e.Error;

    if (e.Cancelled)
        Environment.Exit(1);

    // install program
    var downloadedFile = (string)e.UserState;
    var processInfo = new ProcessStartInfo(downloadedFile, "/S");
    processInfo.CreateNoWindow = true;

    var installProcess = Process.Start(processInfo);
    installProcess.WaitForExit();

    Environment.Exit(installProcess.ExitCode);
} 
```

现在唯一需要整理的是如何让程序等待；如果是控制台程序，则`Console.ReadKey()`在`InstallSecuniaPSI()`.

高温下，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:03:28.517

您是否考虑过使用**ClickOnce**来执行此操作？它将与自动更新一起解决您的问题。

查看这个 SO 问题以了解开始的地方：[https](https://stackoverflow.com/questions/1635103/how-to-basic-tutorial-to-write-a-clickonce-app) ://stackoverflow.com/questions/1635103/how-to-basic-tutorial-to-write-a-clickonce-app 。

# .net - 尝试“启动”Windows 服务时出现错误

> ID：10017353
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:43:14.780
> 
> 标签：.net, wcf, service, netnamedpipebinding

我正在按照 John Sharp 的“Windows Communication Foundation 4”中的示例进行操作。第 88-89 页显示了如何注册和启动服务。我的服务没有启动。

我需要说我无法在我自己的主机中使用 net.tcp 运行该服务，因为它抱怨端口被占用，而这个应该使用 namedPipes。

应用程序日志中的错误是

```
Service cannot be started. System.ServiceModel.AddressAlreadyInUseException: HTTP could not register URL http://+:8080/ProductsService/Service.svc/ because TCP port 8080 is being used by another application. ---> System.Net.HttpListenerException: The process cannot access the file because it is being used by another process
   at System.Net.HttpListener.AddAllPrefixes()
   at System.Net.HttpListener.Start()
   at System.ServiceModel.Channels.SharedHttpTransportManager.OnOpen()
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SharedHttpTransportManager.OnOpen()
   at System.ServiceModel.Channels.TransportManager.Open(TransportChannelListener channelListener)
   at System.ServiceModel.Channels.TransportManagerContainer.Open(SelectTransportManagersCallback selectTransportManagerCallback)
   at System.ServiceModel.Channels.TransportChannelListener.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.HttpChannelListener.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.Communicat... 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:47:32.383

正如它在错误的第一行中所说

> HTTP 无法注册 URL [http://+:8080/ProductsService/Service.svc/](http://+:8080/ProductsService/Service.svc/)，因为另一个应用程序正在使用 TCP 端口 8080。

您正在尝试在端口 8080 上注册，但端口 8080 正在被另一个应用程序使用。尝试更改端口号，直到找到未使用的端口号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T18:44:48.510

另一个服务正在使用该端口

试试8084

# c++ - C++中原子变量的线程安全初始化

> ID：10017357
> 
> 赞同：4
> 
> 时间：2012-04-04T18:44:11.257
> 
> 标签：c++, thread-safety, c++11, mutex, atomic

考虑以下 C++11 代码，其中类`B`被实例化并由多个线程使用。因为`B`修改了共享向量，所以我必须在 ctor 和成员函数 foo 中锁定对它的访问`B`。为了初始化成员变量`id`，我使用了一个作为原子变量的计数器，因为我从多个线程访问它。

```
struct A {
  A(size_t id, std::string const& sig) : id{id}, signature{sig} {}
private:
  size_t id;
  std::string signature;
};
namespace N {
  std::atomic<size_t> counter{0};
  typedef std::vector<A> As;
  std::vector<As> sharedResource;
  std::mutex barrier;

  struct B {
    B() : id(++counter) {
      std::lock_guard<std::mutex> lock(barrier);
      sharedResource.push_back(As{});
      sharedResource[id].push_back(A("B()", id));
    }
    void foo() {
      std::lock_guard<std::mutex> lock(barrier);
      sharedResource[id].push_back(A("foo()", id));
    }
  private:
    const size_t id;
  };
} 
```

不幸的是，这段代码包含一个竞争条件并且不能像这样工作（有时 ctor 和 foo() 不使用相同的 id）。如果我将 id 的初始化移动到由互斥锁锁定的 ctor 主体，它可以工作：

```
struct B {
  B() {
    std::lock_guard<std::mutex> lock(barrier);
    id = ++counter; // counter does not have to be an atomic variable and id cannot be const anymore
    sharedResource.push_back(As{});
    sharedResource[id].push_back(A("B()", id));
  }
}; 
```

你能帮我理解为什么后一个例子有效（是因为它不使用相同的互斥锁吗？）？有没有一种安全的方法可以`id`在初始化器列表中进行初始化`B`而不将其锁定在ctor的主体中？我的要求是`id`必须`const`的，并且初始化`id`发生在初始化列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:50:48.570

首先，发布的代码中仍然存在一个基本的逻辑问题。你用`++ counter`as `id`。`B`考虑在单个线程中 第一次创建, 。`B`会有`id == 1`; 在`push_back`of 之后`sharedResource`，您将拥有`sharedResource.size() == 1`并且访问它的唯一合法索引将是`0`.

此外，代码中有明确的竞争条件。即使您纠正了上述问题（`id`用初始化`counter ++`），假设当前`counter`和`sharedResource.size()`都是`0`; 你刚刚初始化。线程一进入`B`, increments的构造函数`counter`，所以：

```
counter == 1
sharedResource.size() == 0 
```

然后它被线程 2 中断（在它获取互斥锁之前），它也递增`counter`（到 2），并将其先前的值 (1) 用作 `id`. 然而，在线程 2之后`push_back`，我们只有 `sharedResource.size() == 1`，并且唯一合法的索引是 0。

在实践中，我会避​​免两个单独的变量（`counter`和 `sharedResource.size()`）应该具有相同的值。从经验来看：两件应该相同的事情不会是——唯一应该使用冗余信息的时间是用于控制的时候；即在某些时候，你有一个`assert( id == sharedResource.size() )`，或类似的东西。我会使用类似的东西：

```
B::B()
{
    std::lock_guard<std::mutex> lock( barrier );
    id = sharedResource.size();
    sharedResource.push_back( As() );
    //  ...
} 
```

或者，如果您想制作`id`const：

```
struct B
{
    static int getNewId()
    {
        std::lock_guard<std::mutex> lock( barrier );
        int results = sharedResource.size();
        sharedResource.push_back( As() );
        return results;
    }

    B::B() : id( getNewId() )
    {
        std::lock_guard<std::mutex> lock( barrier );
        //  ...
    }
}; 
```

（请注意，这需要两次获取互斥锁。或者，您可以将完成更新所需的附加信息传递 `sharedResource`给`getNewId()`，并让它完成整个工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T01:20:30.547

当一个对象被初始化时，它应该由一个线程拥有。然后当它完成初始化时，它被共享。

如果有线程安全初始化这样的东西，那就意味着确保一个对象在被初始化之前不能被其他线程访问。

当然，我们可以讨论`assignment`原子变量的线程安全。赋值不同于初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T01:45:23.033

您在初始化向量的子构造函数列表中。这不是真正的原子操作。因此在多线程系统中，您可能会同时受到两个线程的攻击。这正在改变 id 是什么。欢迎来到线程安全 101！

将初始化移动到被锁包围的构造函数中，这样只有一个线程可以访问和设置向量。

解决此问题的另一种方法是将其移动到单例模式中。但是，每次获得对象时，您都要为锁支付费用。

现在你可以进入诸如双重检查锁定之类的事情了:)

[http://en.wikipedia.org/wiki/Double-checked_locking](http://en.wikipedia.org/wiki/Double-checked_locking)

# objective-c - 了解将行添加到表视图的示例代码

> ID：10017358
> 
> 赞同：1
> 
> 时间：2012-04-04T18:44:14.350
> 
> 标签：objective-c, cocoa-touch, uitableview, uiapplicationdelegate

我正在阅读文档以了解如何在表格视图中添加一行，我发现了这个例子：

```
- (void)save:sender {

    UITextField *textField = [(EditableTableViewTextField *)[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]] textField];

    SimpleEditableListAppDelegate *controller = (SimpleEditableListAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSString *newItem = textField.text;

    if (newItem != nil) {
        [controller insertObject:newItem inListAtIndex:[controller countOfList]];
    }

    [self dismissModalViewControllerAnimated:YES];

} 
```

我不明白该方法：`insertObject:inListAtIndex:`或`[[UIApplication sharedApplication] delegate];`代表什么；我们是否将数据放入 plist 文件中？有人可以向我解释一下吗？[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)并没有真正[的帮助。`UIApplication`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:42:51.743

`[[UIApplication sharedApplication] delegate]`是主应用程序委托，通常这是一个名为`AppDelegate`. 主应用程序委托是在应用程序启动时创建的，它是应用程序的主控制器。

我将假设您正在使用与[此类](http://files.silverfire.org/_files/iPhone/Tables/SimpleTableViewAppDelegate.m.pdf)类似的东西作为您的`AppDelegate`课程。

`[controller insertObject:newItem inListAtIndex:[controller countOfList]];`

这假定您的`AppDelegate`类有一个命名的方法`insertObject:inListAtIndex:`。对于我链接的类，该方法如下所示：

```
- (void)insertObject:(id)obj inListAtIndex:(NSUInteger)theIndex {
    [list insertObject:obj atIndex:theIndex];
} 
```

所以在这种情况下，该方法是将对象添加到您的`AppDelegate`类的成员变量中，称为`List`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:14:51.690

与 plist 没有任何联系。只需在代表的帮助下进行消息交换即可更改表格视图。

来自苹果文档：

当表格视图进入编辑模式并且用户单击编辑控件时，表格视图会向其数据源和委托发送一系列消息，但前提是它们实现了这些方法。这些方法允许数据源和委托细化表格视图中行的外观和行为；这些消息还使它们能够执行删除或插入操作。

阅读：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)

和最好的书之一 - 开始 iphone 4（或 5）

# php - 在 php 中覆盖 __set 魔术函数

> ID：10017360
> 
> 赞同：1
> 
> 时间：2012-04-04T18:44:17.247
> 
> 标签：php, oop

我正在尝试创建一个方法，该方法允许我使用 setVal() 函数在类中设置属性，如果用户试图从类外部设置值而不使用“forceSet”函数，那么它将抛出一个例外。

问题是即使 $forceSet 为真，它也会抛出异常。如果我在类中手动设置属性以具有私有访问权限，那么一切正常，但这不是一个选项，因为我希望能够在此类中动态设置各种属性。

```
class test
{
    private $_allowedCols = array('title', 'name', 'surname');

    public function __set($n,$v)
    {
        $this->setVal($n, $v);
    }

    public function setVal($name, $value, $forceSet=false)
    {
        if (!$forceSet && !in_array($this->_allowedCols, $name))
        {
            throw new Exception('cant set value');
        }
        $this->$name = $value;
    }
}

$b = new test;
$b->setVal('blah', 'test', true);
print_r($b);
exit; 
```

我想要做的是将 $_POST 中的所有值设置为对象的属性。我想检查 $_allowedCols 以确保只有我想要的值被放入对象中，但有时我可能想从代码中强制输入不在 $_allowedCols 中的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:11:37.593

黑客将起作用，但使用内部阵列可能更清洁。就像是：

```
class test
{
    private $data = array();

    public function __set($n,$v)
    {
        if (isset($this->data[$n])) return $this->data[$n] = $v;

        throw new Exception('cant set value');
    }
    public function __get($n)
    {
        if (isset($this->data[$n])) return $this->data[$n];

        throw new Exception('cant retrieve value');
    }
    public function setVal($name, $value)
    {
        $this->data[$name] = $value;
    }
} 
```

但是，如果您想坚持自己的方法，那么：

```
class test
{
    private $forceFlag = false;

    public function __set($name,$value)
    {
        if ($this->forceFlag) return $this->$name = $value;
        throw new Exception('cant set value');
    }
    public function setVal($name, $value)
    {
        $this->forceFlag = true;
        $this->$name = $value;
        $this->forceFlag = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:08:41.977

看起来您为 PHP 提供的开箱即用功能编写了很多代码：

```
$b = new test;
$b->blah = 'test';
print_r($b); 
```

您不需要`__set`这个，也不需要`setVal`(ue) 功能。

但是，当您想要控制访问时，您需要确保您没有将其绑定到成员。而是将其作为私有成员存储在地图中：

```
class test
{
    private $values;
    public function __set($n,$v)
    {
        $this->setVal($n, $v);
    }

    public function setVal($name, $value, $forceSet=false)
    {
        if (!$forceSet)
        {
            throw new Exception('cant set value');
        }
        $this->values[$name] = $value;
    }
} 
```

这确保存在已设置的成员，因此`__set`不会再次触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:53:58.210

如果您查看异常的堆栈跟踪，您会注意到对 set 的调用`__set`是由这一行触发的：

```
$this->$name = $value; 
```

然后在 中`__set`，它`$this->setVal($n, $v)`使用默认值 false，从而引发异常。要解决此问题，您可以将调用修改`__set`为：

```
$this->setVal($n, $v, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:53:58.863

使用上面的代码，这一行：

```
$this->$name = $value; 
```

...调用：

```
test::__set('blah', 'test'); 
```

...因为`test::$blah`未定义，这反过来又调用：

```
test::setVal('blah', 'test', false); 
```

一个可能但并不完美的解决方法是：

```
public function setVal($name, $value, $forceSet=false)
{
    if (!$forceSet && isset($value)) 
    {
        throw new Exception('cant set value');
    }
    $this->$name = null;
    $this->$name = $value;
} 
```

虽然我不确定你的代码的意义是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T18:57:30.517

在测试了这么多选项之后..这是最适合我的选项

我选择这个是因为

1.  使用异常会终止整个脚本，或者必须在声明值时捕获异常
2.  `__set`并且`__get`可以通过扩展类轻松覆盖
3.  可与多个类一起使用的实现
4.  什么能够直接使用 Object 而无需添加另一个 getter 方法
5.  锁定可能导致冲突
6.  该脚本不会改变您现有的应用程序结构
7.  可以与单例一起使用..

代码 ：

```
abstract class Hashtable
{
    final $hashTable = array()  ;

    final function __set($n,$v)
    {
        return false ;
    }

    final function __get($n)
    {
        return @$this->hashTable[$n] ;
    }

    final function _set($n, $v)
    {
        $this->hashTable[$n] = $v ;

    }
}

class Test extends Hashtable {} ;

$b = new Test();
$b->_set("bar","foo",true);
$b->_set("hello","world",true);
//$b->setVal("very","bad"); // false
$b->bar = "fail" ;
var_dump($b,$b->bar); 
```

输出

```
object(Test)[1]
  public 'hashTable' => 
    array
      'bar' => string 'foo' (length=3)
      'hello' => string 'world' (length=5)
string 'foo' (length=3) 
```

我希望这有帮助

谢谢

:)

# java - 如何编写比较对象的 compareTo 方法？

> ID：10017381
> 
> 赞同：29
> 
> 时间：2012-04-04T18:46:09.640
> 
> 标签：java, comparable, compareto

我正在学习数组，基本上我有一个收集姓氏、名字和分数的数组。

我需要编写一个`compareTo`方法来比较姓氏和名字，以便列表可以从姓氏开始按字母顺序排序，然后如果两个人的姓氏相同，那么它将对名字进行排序。

我很困惑，因为我书中的所有信息都是比较数字，而不是对象和字符串。

这是我到目前为止编写的代码。我知道这是错误的，但它至少解释了我认为我在做什么：

```
public int compare(Object obj) // creating a method to compare 
{   
    Student s = (Student) obj; // creating a student object

    // I guess here I'm telling it to compare the last names?
    int studentCompare = this.lastName.compareTo(s.getLastName()); 

    if (studentCompare != 0)
        return studentCompare;
    else 
    {
        if (this.getLastName() < s.getLastName())
            return - 1;

        if (this.getLastName() > s.getLastName())
            return 1;
    }
    return 0;
} 
```

我知道`<`和`>`符号是错误的，但就像我说的，我的书只向您展示了如何使用`compareTo`.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T18:48:11.707

这是比较字符串的正确方法：

```
int studentCompare = this.lastName.compareTo(s.getLastName()); 
```

这甚至不会编译：

```
if (this.getLastName() < s.getLastName()) 
```

改为使用 `if (this.getLastName().compareTo(s.getLastName()) < 0)`。

因此，要比较您需要的拳头/姓氏顺序：

```
int d = getFirstName().compareTo(s.getFirstName());
if (d == 0)
    d = getLastName().compareTo(s.getLastName());
return d; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-04T18:56:35.493

compareTo 方法描述如下：

> 将此对象与指定对象进行比较以进行排序。返回负整数、零或正整数，因为此对象小于、等于或大于指定对象。

假设我们想按年龄比较 Jedis：

```
class Jedi implements Comparable<Jedi> {

    private final String name;
    private final int age;
        //...
} 
```

然后，如果我们的绝地比提供的年龄大，则必须返回正数，如果年龄相同，则返回 0，如果我们的绝地年轻，则返回负数。

```
public int compareTo(Jedi jedi){
    return this.age > jedi.age ? 1 : this.age < jedi.age ? -1 : 0;
} 
```

通过实现该`compareTo`方法（来自`Comparable`接口），您正在定义所谓*的自然顺序*。*默认情况下*，JDK 中的所有排序方法都将使用此排序。

在某些情况下，您可能希望将比较基于其他对象，而不是基于原始类型。例如，根据他们的名字来比较 Jedis。在这种情况下，如果正在比较的对象已经实现`Comparable`，那么您可以使用其`compareTo`方法进行比较。

```
public int compareTo(Jedi jedi){
    return this.name.compareTo(jedi.getName());
} 
```

在这种情况下会更简单。

现在，如果您打算同时使用姓名和年龄作为比较标准，那么您必须决定比较的顺序，什么是优先的。例如，如果两个绝地武士的名字相同，那么您可以根据他们的年龄来决定哪个先行，哪个再行。

```
public int compareTo(Jedi jedi){
    int result = this.name.compareTo(jedi.getName());
    if(result == 0){
        result = this.age > jedi.age ? 1 : this.age < jedi.age ? -1 : 0;
    }
    return result;
} 
```

如果你有一系列绝地武士

```
Jedi[] jediAcademy = {new Jedi("Obiwan",80), new Jedi("Anakin", 30), ..} 
```

你所要做的就是要求类`java.util.Arrays`使用它的排序方法。

```
Arrays.sort(jediAcademy); 
```

此`Arrays.sort`方法将使用您的`compareTo`方法对对象进行一一排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:04:34.693

听听@milkplusvellocet，我建议您也为您的课程实现 Comparable 接口。

只是为其他人的答案做出贡献：

`String.compareTo()`会告诉你一个字符串与另一个字符串有多么不同。

例如`System.out.println( "Test".compareTo("Tesu") );`将打印 -1 `System.out.println( "Test".compareTo("Tesa") );`并将打印 19

这个任务的书呆子和极客的单线解决方案是：

`return this.lastName.equals(s.getLastName()) ? this.lastName.compareTo(s.getLastName()) : this.firstName.compareTo(s.getFirstName());`

解释：

`this.lastName.equals(s.getLastName())`检查姓氏是否相同， `this.lastName.compareTo(s.getLastName())`如果是，则返回姓氏比较。 `this.firstName.compareTo(s.getFirstName())`如果不是，则返回名字的比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T18:50:09.740

`if (s.compareTo(t) > 0)`将字符串 s 与字符串 t 进行比较并返回您想要的 int 值。

```
 public int Compare(Object obj) // creating a method to compare {   
        Student s = (Student) obj; //creating a student object

        // compare last names
        return  this.lastName.compareTo(s.getLastName());    
    } 
```

现在只需像往常一样测试该方法的正负回报。

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T18:50:52.983

你几乎一直到那里。

你的前几行，比较姓氏，是正确的。string 上的 compareTo() 方法将为之前按字母顺序的字符串返回负数，为按字母顺序后的字符串返回正数。

现在，您只需要为您的名字和分数做同样的事情。

换句话说，如果姓氏 1 == 姓氏 2，请继续检查您的名字。如果名字相同，请检查您的分数。（考虑嵌套你的 if/then 块。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T18:54:04.387

考虑使用[此处](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)`Comparator`描述的使用泛型的接口，这样您就可以避免转换为.`Object``Student`

正如 Eugene Retunsky 所说，您的第一部分是比较`String`s 的正确方法。此外，如果`lastName`s 相等，我认为您的意思是比较`firstName`s，在这种情况下，只需`compareTo`以相同的方式使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T18:51:47.420

String 是 Java 中的对象。

你可以这样比较，

```
if(this.lastName.compareTo(s.getLastName() == 0)//last names are the same 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-04T19:01:19.957

我不会有 Object 类型参数，如果我们知道它始终是 Student 类型，那么将它转换为 Student 毫无意义。

作为解释，“result == 0”只会在姓氏相同时出现，此时我们比较名字并返回该值。

```
public int Compare(Object obj)
{       
    Student student = (Student) obj;
    int result = this.getLastName().compareTo( student.getLastName() );

    if ( result == 0 )
    {
        result = this.getFirstName().compareTo( student.getFirstName() );
    }

    return result;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-29T17:02:56.510

如果您在任何类中使用 Comparable 接口的 compare To 方法。这可用于按字典顺序排列字符串。

```
public class Student() implements Comparable<Student>{

public int compareTo(Object obj){
if(this==obj){
    return 0;
}
if(obj!=null){
    String objName = ((Student)obj).getName();
    return this.name.comapreTo.(objName);
}
} 
```

# favicon - 有什么理由不在 favicon.ico、apple-touch-icon 和 robots.txt 上执行 301？

> ID：10017384
> 
> 赞同：9
> 
> 时间：2012-04-04T18:46:20.163
> 
> 标签：favicon, robots.txt, apple-touch-icon

我想将对这些资源的请求重定向到我的 CDN。有什么理由不这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T21:23:33.010

我能想到的唯一原因是使用它们的服务可能不遵循重定向 - 它可能对它们不透明，它们可能必须主动这样做，具体取决于它们的实现。

知道的唯一方法是尝试并测试您的预期用例 - 浏览器是否仍然获取它们，当您将测试站点添加为移动设备上的快捷方式时会发生什么等等......

# .net - 有没有办法以编程方式为 ASP.NET 通用提供程序设置连接字符串？

> ID：10017386
> 
> 赞同：4
> 
> 时间：2012-04-04T18:46:25.933
> 
> 标签：.net, azure, asp.net-membership

[我正在寻找使用ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)的 Azure 解决方案。我想将我的连接字符串存储在 Azure 配置而不是 web.config 中，这样我就可以在不重新部署的情况下更改它们。我曾考虑从设置加载并添加到 ConfigurationManager.ConnectionStrings 集合，但这是只读的。有一些反射技巧可以克服这个问题，但这似乎不是正确的方法。我还考虑从提供程序类派生来创建我自己的可以设置连接字符串的提供程序类，但我没有看到要设置的属性来覆盖连接字符串。关于使用提供程序但在我的 web.config 中没有连接字符串的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:58:04.563

我建议您将设置放在 Azure 配置文件中，然后编写启动任务或在 WebRole.cs OnStart 中，您可以访问 IIS 管理 API 并使用正确的连接字符串更新其中的 web.config 文件。这样您就不必以编程方式访问连接字符串，但仍然可以做您想做的事。

您可以查看此博客文章以获取一些使用 API 的示例，尽管它并没有按照您的意愿进行操作：

[http://blogs.msdn.com/b/tom/archive/2011/02/18/installing-and-using-an-httpmodule-in-windows-azure.aspx](http://blogs.msdn.com/b/tom/archive/2011/02/18/installing-and-using-an-httpmodule-in-windows-azure.aspx)

# java - 在 Eclipse 中更改安全存储目录 - Windows 上的 user.home 路径问题

> ID：10017395
> 
> 赞同：7
> 
> 时间：2012-04-04T18:47:24.733
> 
> 标签：java, eclipse

我在 Eclipse 中保存密码时遇到问题。我的密码都没有被“记住”，我发现 Eclipse 试图将它们保存在我的 Windows 帐户无权访问的文件夹中。

它试图保存到

```
D:\Users\Administrator\.eclipse\org.eclipse.equinox.security\secure_storage 
```

一个不存在的目录，我的 Win 帐户也无法写入。

我发现我的 user.home 变量设置为 D:\Users\Administrator。我的猜测是，这是因为安装 Java 的是管理员帐户。

所以我的问题是 - 我可以更改 user.home 路径，或者至少更改一些其他属性以强制 Eclipse Secure Storage 在其他地方工作吗？

**编辑**：所以我在这里找到了一个解决方案[Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)

我将此添加到我的 eclipse.ini 中：

-eclipse.keyring
C:\some\path\file.txt

这改变了我的目标密码存储文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-29T10:57:53.910

```
-Duser.home=C:\your\path 
```

在eclipse luna上测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-07T10:01:51.737

安全存储位置由“eclipse.keyring”设置设置。

要将存储位置更改为具有相对路径的 eclipse 文件夹下的配置文件夹，请在 eclipse.ini 文件中的“-vmargs”行之前添加以下内容：

```
-eclipse.keyring
configuration\.eclipse\org.eclipse.equinox.security\secure_storage 
```

否则，可以使用绝对路径，如：

```
-eclipse.keyring
C:\eclipse\configuration\.eclipse\org.eclipse.equinox.security\secure_storage 
```

要将“secure_storage”文件保留在您的用户目录中，请将其复制到您选择的位置。

使用 Eclipse Mars 进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T12:33:55.140

尝试将新 arg 添加到 eclipse.ini 以指向您的文件夹

[http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-securestorage-options.htm](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-securestorage-options.htm)

这是我找到的唯一解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:47:05.233

我不是 100% 确定，但如果你添加这一行

```
-user c:\some\path 
```

到您的 eclipse.ini 或将其用作 cmd 参数，它应该可以工作。

# java - 在上下文 Tomcat 7 上启用自动部署

> ID：10017396
> 
> 赞同：2
> 
> 时间：2012-04-04T18:47:28.040
> 
> 标签：java, tomcat, context.xml

我一直在阅读，启用该`autoDeploy`选项将导致在放置新的战争文件时热部署应用程序。如果我只想`autoDeploy`在一个应用程序中设置而不是在整个服务器中设置，我应该启用它，`<app>/META-INF/context.xml`对吗？

如果是这样，该文件应类似于以下哪一项？

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/TestApp">
    <autoDeploy>true</autoDeploy>
</Context> 
```

或者

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/SRC_RichFaces" autoDeploy="true">
</Context> 
```

当我尝试任何一个时，都会出现警告`[SetContextPropertiesRule]{Context} Setting property 'autoDeploy' to 'true' did not find a matching property.`

有什么建议吗？

**更新**

很抱歉给您带来不便，我误解了文档。我必须启用`<Host>`属性`autoDeploy`。

所以我应该在**context.xml**中有类似的东西

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/TestApp"/>
<Host autoDeploy="true"/> 
```

我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T13:54:41.673

你不能做你想做的事。autoDeploy 只能按主机配置，不能按上下文配置。

您可以获得的最接近的方法是为主机的 appBase 启用自动部署，并将您希望在 appBase 中启用自动部署的应用程序以及 appBase 之外的其他应用程序放置在其中。然后需要通过在 $CATALINA_BASE/Catalina/localhost 下添加 context.xml 元素来部署这些

例如，以这种方式部署我的应用程序，您将创建文件：
$CATALINA_BASE/Catalina/localhost/myapp.xml
，其内容为：

```
<Context docBase="/absolute/path/to/myapp.war" > 
```

# ajax - Ajax 调用后 Js 不工作

> ID：10017401
> 
> 赞同：1
> 
> 时间：2012-04-04T18:47:42.583
> 
> 标签：ajax, jquery

我在主页上有一个滑块，我正在尝试通过单击使用 Ajax 的按钮来加载接下来的五个帖子。当我使用 Jquery .post 加载接下来五个帖子的 html 时，滑块消失了。原因是名为“slider.js”的脚本不适用于新添加的 html。我尝试使用 .live() 但它不起作用，我可以在控制台中看到来自 Ajax 调用的响应，所以我知道该调用正在工作。我尝试在 Ajax 响应中包含 js 文件，但即使那样它也不会触发。js文件是一个很长的文件，有很多功能，我不能按照论坛上一些人的建议将它包含在一个功能中。我将如何重新加载 slider.js 以使其工作？这是 ajax .post() 代码。

```
$(function() { 

   $('.nextfive').live('click', function() { 

      var data = {action: 'next_five',next: 5};

      jQuery.post("<?php echo admin_url('admin-ajax.php'); ?>", data,

      function(response) {

             $('#navi').slideDown("slow");  
             $("#slidercontainer").html(response); 

          },"html");   

      }); 
}); 
```

编辑：检查[http://axactsoft.com/samplewp/](http://axactsoft.com/samplewp/)上的页面，然后单击顶部的按钮“单击五”。文件的代码粘贴在这里[http://pastebin.com/4iS6Ey10](http://pastebin.com/4iS6Ey10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:14:43.900

试试这个：

```
$('.nextfive').on({ 

    click: function () {

              var data = {action: 'next_five',next: 5};

              $.post("<?php echo admin_url('admin-ajax.php'); ?>", data,

              function (response) {

                 $('#navi').slideDown("slow");  
                 $("#slidercontainer").html(response);
              }
     }    

}, 'body'); 
```

您必须使用 jquery 1.7 或更高版本才能使用 .on() 函数。如果不查看您正在使用的所有 div ID 的 HTML 结构，就很难知道您在做什么。

我还建议拆分您的代码：您有一个事件处理程序，其中包含一个用于 ajax 的函数，该函数本身嵌套了一个函数来处理 ajax 回调。我会让事件处理程序处理事件并将参数传递给仅处理 ajax 的不同函数，并让该函数调用仅处理 ajax 响应处理的函数。您应该在同一范围内使用 3 个函数，而不是让 3 个函数相互嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:30:21.237

你用的是什么slider.js？在从 php 脚本获取数据后，您可能可以添加一个事件侦听器来重新初始化滑块。像这样的东西，尽管它会根据滑块的工作方式而有所不同。

```
$('.nextfive').click(function () {
    $.get("<?php echo admin_url('admin-ajax.php'); ?>",
          {action :'next_five', next   : 5},
          function (resp) {
              $('#navi').slideDown("slow");  
              $("#slidercontainer").html(response)
              $("#slidercontainer").slider(); /* This will change depending on
                                               * the library you are using */
    });
}) 
```

另外，关于您的编码风格的一些事情：

1.  当您获取诸如下五个帖子之类的数据并且*不*修改数据时，请始终使用 GET 而不是 POST。通常，除非您在服务器上修改某些内容，否则始终使用 GET，在这种情况下您使用 POST。
2.  jQuery.* 可以替换为 $.*，请参见上面的示例。
3.  将单击处理程序附加到元素的最简单方法（即，当您单击某物时发生某事）是使用 jQuery 中的 $(elem).click() 函数，请参阅我的示例。

如果您提供有关您正在使用的滑块的更多详细信息，我可以提供更具体的代码。

祝你好运！4\. 其他小的简化，如果你只使用一次，你不需要定义var数据，再看我的例子。

# wordpress - Wordpress 过滤器 user_row_actions

> ID：10017404
> 
> 赞同：2
> 
> 时间：2012-04-04T18:47:58.747
> 
> 标签：wordpress

我试图在 Edit | 之外添加一个链接 通过插件删除wordpress管理员>用户>所有用户列表中的链接..这是我第一次尝试通过查看其他插件或搜索google来制作wordpress插件..

我添加了一个功能

```
function pa_user_list_pay_link( $actions, $user_object ) {
    if ( current_user_can( 'administrator', $user_object->ID ) )
        $actions['pay'] = '<a href="#">Pay</a>';
    return $actions;
} 
```

并应用了过滤器

```
add_filter( 'user_row_actions', array( $this, 'pa_user_list_pay_link' ), 10, 2 ); 
```

但似乎出了点问题，因为这个链接没有出现并且编辑 | 删除链接也消失了（不再在 html 输出中）

更新 1：我修改了 /wp-admin/includes/class-wp-users-list-table.php

在这条线之后

```
$actions = apply_filters( 'user_row_actions', $actions, $user_object ); 
```

我添加了这个

```
file_put_contents("test_output.txt" , count($actions)); 
```

test_output.txt 被写入 /wp-admin/ 并且它包含**0**

我想我在应用过滤器时犯了一些错误..

更新 2：回答了我自己的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T03:47:54.610

```
function pa_user_list_pay_link( $actions, $user_object ) {
    if ( current_user_can( 'administrator', $user_object->ID ) )
        $actions['pay'] = '<a href="#">Pay</a>';
    return $actions;
}

add_filter( 'user_row_actions', 'pa_user_list_pay_link', 10, 2 ); 
```

作品！:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:55:01.257

如果编辑/删除链接消失，这意味着您的函数正在被调用，但会导致错误。

我想查看您的代码的第一件事是是否`$actions`是关联数组。如果你改变它是否有效

```
$actions['pay'] = '<a href="#">Pay</a>'; 
```

至

```
$actions[] = '<a href="#">Pay</a>'; 
```

?

如果可行，您可以考虑将其插入正确的位置，而不是附加。

仅出于测试目的，我也会注释掉该`if`语句，以消除权限作为错误的原因（即在添加太多其他逻辑之前尝试找出编辑/删除消失的原因）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-28T09:48:09.010

我认为有最好的方法。您可以使用 add_action('user_row_actions','your_function_name') 自定义编辑和删除或添加新徽章。有关更多详细信息，您可以访问我找到最佳解决方案的网站。请参阅这篇文章 [Add or edit custom link in wp users list in wordpress admin](http://darkphp.blogspot.in/2014/05/add-or-edit-custom-link-in-wp-users.html)

希望对你有帮助。。

# sql - 如何将数据保存在不同的表中？

> ID：10017405
> 
> 赞同：2
> 
> 时间：2012-04-04T18:47:58.870
> 
> 标签：sql

我使用的 SQL 语句有一些问题。我想将数据存储到具有相同 ID 的两个表中。插入过程应该是一次性的。

第一张表：

```
ID      name
---     ----
001     john
002     kate 
```

第二张表：

```
 ID     status
 ---    -----------
 001    married
 002    not married 
```

这是我尝试过的 SQL 语句，但它不起作用：

```
insert into `table_one`, 'table table_two' 
values ( ID='003', name='joe'), 
values(ID='003', status='married') 
```

我希望你能给我一些解决方案..

多谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:50:48.793

插入语句适用于单个表；您需要两个单独的插入语句 - 每个表一个。

如果您希望两个插入都成功或失败（而不是一个成功一个失败），您应该*在一个事务中*执行这两个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:51:27.057

您不能在一个 sql 语句中将数据插入到 2 个不同的表中。您需要将其拆分为 2 个语句：

```
insert into table_one (ID,name) values ('003','joe');
insert into table_two (ID,status) values ('003','married'); 
```

如果您需要保证两个语句都失败或成功，请将其包含在事务中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:51:44.063

```
INSERT INTO 'table_one'(ID, name)
VALUES ('003', 'joe')

INSERT INTO 'table_two' (ID, status)
VALUES ('003', 'married') 
```

# html - 不工作

> ID：10017408
> 
> 赞同：0
> 
> 时间：2012-04-04T18:48:22.517
> 
> 标签：html, hyperlink, href

代码是 W3C 有效的，一切都应该没问题。但是当用户点击链接时，什么也没有发生！

这个链接来源是：

```
<a target="_blank" title="Download" href="http://itunes.apple.com/us/app/shoutcast-radio/id299647180?mt=8">SHOUTcast Radio</a> 
```

你可以看到它的实际效果：

1.  访问[http://afmrock.com/](http://afmrock.com/)，
2.  点击右上角“Tune In”链接
3.  单击/查看`SHOUTcast Radio`弹出窗口中的链接，或窗口中的其他链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:18:35.847

编辑这个文件：/script/system.js

删除以下内容：

```
$('.popup .inner').click(function () {
    return false;
}); 
```

这将禁用该弹出窗口内的所有点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:14:36.920

在脚本文件中搜索类似“.preventDefault()”的内容

一定是这样的，因为那个语法是绝对正确的。

@inkedmn 的评论是同样的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:48:59.980

当我转到网页上的链接时，它正在下载一个 pls 文件。这不是您发布的链接。您发布的链接工作正常。右键单击链接并检查元素。你会看见

```
<a target="_blank" href="http://stream.afmrock.com/listen.pls" title="Download listen.pls">http://stream.afmrock.com/</a> 
```

这将尝试下载 pls 文件。

如果这是预期的，那么我很困惑您在您的站点中的指定链接的位置。

# delphi - 内存扫描器总是返回相同的结果

> ID：10017411
> 
> 赞同：1
> 
> 时间：2012-04-04T18:48:26.730
> 
> 标签：delphi, memory

使用此代码，我猜扫描速度更快，但扫描始终返回相同的地址。

例如：

```
00123456
00124567
00135478
00145893
00123456 //start repeat 
00124567
00135478
00145893
00123456 //start repeat 
00124567
00135478
00145893 
```

这是我的程序：

```
procedure SCANBYTE(value: integer);
var
 lpflOldProtect: dword;
 s: size_t;
 mbi: MEMORY_BASIC_INFORMATION;
 SI: SYSTEM_INFO;
 lpStartAddress, lpStopAddress: dword;
 addr: dword;
 i: dword;
begin
 GetSystemInfo(si);
 lpStartAddress := dword(SI.lpMinimumApplicationAddress);
 lpStopAddress := dword(SI.lpMaximumApplicationAddress);
 for addr := lpStartAddress to lpStopAddress do begin
  S:= VirtualQuery(Pointer(addr), MBI, SizeOf(MEMORY_BASIC_INFORMATION));
  if (S=SizeOf(MEMORY_BASIC_INFORMATION)) and (MBI.State = MEM_COMMIT) and (MBI.Type_9 = MEM_PRIVATE) and (MBI.RegionSize>0) and (MBI.Protect = PAGE_READWRITE) then begin
   for i := dword(MBI.BaseAddress) to (dword(MBI.BaseAddress) + dword(MBI.RegionSize)) - 4096 do begin
     if value = PBYTE(i)^ then ListBox1.Items.Add(IntToHex(i,8));
   end;
  end;
 end;
end; 
```

我猜问题出在最后一个 FOR 循环：

```
(...)
for i := dword(MBI.BaseAddress) to (dword(MBI.BaseAddress) + dword(MBI.RegionSize)) - 4096 do begin
(...) 
```

但我真的不知道..我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T19:43:48.027

您在从起始地址到结束地址的循环中运行代码。每次循环时，地址都会`addr`增加**1 。**`VirtualQuery`为您提供有关整个页面的信息。页中的所有地址都具有相同的基地址。[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366902.aspx)告诉您，“此值向下舍入到下一页边界。”

Look more closely, and you should see that `mbi.BaseAddress` remains the same for 4096 iterations of your outer loop (assuming 4096 is the page size). Thus, you're re-scanning the same block of memory over and over again. (That might also explain [why your code is slow](https://stackoverflow.com/q/10015598/33732).)

# c - 如何限制进程中的 RAM 消耗？

> ID：10017417
> 
> 赞同：2
> 
> 时间：2012-04-04T18:48:49.917
> 
> 标签：c, linux, ram

如何从 linux 2.6.32 机器上的源代码中限制 C 程序的物理内存消耗？

我需要确定系统正在使用的页面替换算法的类型。

问题在于，如果不限制进程在内存中的页数，就很难分析页错误的模式来确定页替换算法。

另外，我在机器上没有root访问权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:55:32.310

`setrlimit(RLIMIT_MEMLOCK, ...)`.

# drupal - Drupal 头版标记

> ID：10017418
> 
> 赞同：0
> 
> 时间：2012-04-04T18:48:50.617
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming, drupal-hooks

我正在尝试更改显示在 drupal 网站首页上的文章的标记，以便将它们集成到幻灯片中。（我不能使用幻灯片模块）。我有一个 page--front.tpl.php 文件，但我需要添加比这里更具体的标记。

您如何仅更改首页特定区域的标记？

我相信我需要编写一个预处理钩子，但我不确定如何仅针对首页上的文章节点。这是我想要生成的标记：

```
<div class="slidewrap" data-autorotate="5000">
    <ul class="slidecontrols">
        <li><a href="#sliderName" class="next">Next</a></li>
        <li><a href="#sliderName" class="prev">Prev</a></li>
    </ul>
    <ul class="slider" id="sliderName">
        <li class="slide">  
            <h2 class="slidehed">First Slide</h2>
            <img src="1.jpg" />
            <p>In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien. Phasellus quis est sed turpis sollicitudin venenatis sed eu odio. Praesent eget neque eu eros interdum malesuada non vel leo. Sed fringilla porta ligula egestas tincidunt. Nullam risus magna, ornare vitae varius eget, scelerisque a libero.</p>
        </li>
        <li class="slide">  
            <h2 class="slidehed"><a href="#">Second Slide</a></h2>
            <img src="2.jpg" />
            <p>In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien.</p>
        </li>
        <li class="slide">  
            <h2 class="slidehed">Third Slide</h2>
            <img src="3.jpg" />
            <p>Phasellus quis est sed turpis sollicitudin venenatis sed eu odio. Praesent eget neque eu eros interdum malesuada non vel leo. Sed fringilla porta ligula egestas tincidunt. Nullam risus magna, ornare vitae varius eget.</p>
        </li>
        <li class="slide">  
            <h2 class="slidehed"><a href="#">Fourth Slide</a></h2>
            <p>In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien. Phasellus quis est sed turpis sollicitudin venenatis sed eu odio.</p>
        </li>
        <li class="slide">  
            <h2 class="slidehed">Fif' Slide</h2>
            <p>In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien.</p>
        </li>
    </ul>
</div> 
```

我一直在尝试使用视图模块来做到这一点。但是，当我创建一个新模板时，我收到此错误消息：警告：在 include() 中为 foreach() 提供的参数无效（/d7install/path_to_theme/views-view--featured--block.tpl.php 的第 12 行） .

这是我通过主题信息复制的模板文件：

```
<?php if (!empty($title)): ?>
<h3><?php print $title; ?></h3>
<?php endif; ?>
<?php foreach ($rows as $id => $row): ?>
<div class="<?php print $classes_array[$id]; ?>">
<?php print $row; ?>
</div>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:58:12.683

有一个简单的解决方案。为文章内容类型添加新模板。节点-article.tpl.php。然后添加一个 if 语句，如果文章在首页，则显示标记 A，否则显示标记 B。如：

```
if (drupal_is_front_page()) {
    <article class='front-page'>Article</article>
}
else
{
    <article class='other-page'>Article</article>
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T20:43:16.417

这都可以通过视图模块来实现：http: [//drupal.org/project/views](http://drupal.org/project/views)

创建块显示并使其仅显示在主页上。应该不需要自定义视图模板。

您可以将 .slidercontrols UL 添加到视图的标题中。此外，如果您需要外部 div 上的属性，只需通过 jQuery 使用类似这样的内容添加它。

```
$('.slidewrap').attr('data-autorotate', 5000); 
```

# search - 用于搜索函数的 Postgresql 通配符

> ID：10017420
> 
> 赞同：0
> 
> 时间：2012-04-04T18:49:10.583
> 
> 标签：search, wildcard, postgresql

Postgresql 中有没有一种方法可以在带有通配符的函数或表名上调用 \ef 或 \df 。我认为它会起作用的一个例子是 \ef fn_%some%get%function%

这样，即使我只知道表或函数名称的一部分，我也可以找到函数。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:19:46.490

是的，您可以使用通配符，这在手册中有详细说明：

[http://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-PATTERNS](http://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-PATTERNS)

# c# - 签署 C# VSTO 清单时出现错误“参数不正确”

> ID：10017423
> 
> 赞同：4
> 
> 时间：2012-04-04T18:49:18.663
> 
> 标签：c#, certificate, vsto

我从[StartSSL](https://www.startssl.com/) ' [Class 2 validation](https://www.startssl.com/?app=2) ' 购买。然后我成功创建了对象代码签名证书 (PFX) 并将我的证书成功导入 Visual Studio 2010。

[VS 2010 中的导入证书 http://dl.dropbox.com/u/80507/signing/configuration.PNG](http://dl.dropbox.com/u/80507/signing/configuration.PNG)

当我尝试签署 VSTO 清单（用于 PowerPoint 加载项 ClickOnce 设置）时，我收到此错误：

```
An error occured while signing: The parameter is incorrect. 
```

[签名错误 http://dl.dropbox.com/u/80507/signing/error.PNG](http://dl.dropbox.com/u/80507/signing/error.PNG)

我与 StartSSL 进行了交谈，他们的证书对此没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:16:12.917

如果您不指定 StartSSL 时间戳服务器，则证书（和 ClickOnce 清单签名）可以正常工作。

# android - 产生新线程的android首选方式是什么？

> ID：10017442
> 
> 赞同：2
> 
> 时间：2012-04-04T18:50:20.973
> 
> 标签：android, multithreading

来自基本的 Java 世界，我知道有一种方法可以通过创建一个新的 Runnable 并将其传递给一个新的 Thread 并在其上调用 start 来生成一个线程。就像是：

```
Runnable r = new Runnable() {
   @Override
   public void run(){
   }
}

new Thread( r ).start() 
```

现在加入 Android 世界，Android 生态系统似乎提供了一些其他方法来生成线程。其中之一是 Activity.runOnUiThread（用于在 UI 上完成工作）和 Handler.post(runnable)。

我想知道的是Android产生新线程的首选方式是什么。我确实看到了很多案例，例如：

```
Handler handler = new Handler()
handler.post( r ) 
```

是否有充分的理由使用 Handler 生成线程而不是创建新的 Thread 旧方式？

谢谢。叶夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:52:06.437

查看[AysncTask 框架](http://developer.android.com/reference/android/os/AsyncTask.html)。看起来这就是 Google 希望您处理线程的方式……尽管您可以使用标准的 java 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:59:37.953

您演示的处理程序实际上并没有产生一个新线程。处理程序不是线程，而是 IPC 的一种方法，让一个线程告诉另一个线程运行代码。您仍然以相同的旧方式生成线程，但 Handler 帮助这些线程更好地通信。

例如，假设您有一个 Thread 以通常的方式在后台生成：

```
Runnable r = new Runnable() {
   @Override
   public void run(){
   }
}

new Thread( r ).start() 
```

它在后台运行并进行处理，但它需要根据进度更新 UI，因此它会回调 Activity：

```
onProgress(int progress) {
  // update UI
} 
```

如果按原样运行该代码，它将引发异常，因为只允许 UI 线程更新 UI。处理程序可以像这样解决这个问题：

public void onProgress(int results) { mHandler.post(new UIUpdater(results)); }

```
private class UIUpdater implements Runnable {
  UIUpdater(int results) {
    //construct whatever...
  }

  @Override
  public void run() {
    //Update UI
  }
} 
```

或者，您可以让 Android 通过[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)框架为您管理线程和处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:57:37.090

处理程序不应该产生线程，而是`post`新任务到 UI 线程。IMO产生线程的方式是java方式，直接通过可运行或扩展线程。android 开发人员在 Async 任务周围包裹了一个 Executor，并公开了一些直接在 UI 线程中运行的方法，以及一个在后台运行您的任务的方法。

# d - 插入关联数组？

> ID：10017443
> 
> 赞同：2
> 
> 时间：2012-04-04T18:50:39.790
> 
> 标签：d

我现在正在玩关联数组，我似乎无法弄清楚如何向数组添加其他对象。我试过插入，但它不能识别这两个参数。

另外，如果我这样做，它会产生一个错误：

```
Node[bool] test;

Node node;

Node[bool] temp = [ false:node ];

test ~= temp;

//Error 1   Error: cannot append type Node[bool] to type
//Node[bool]    C:\Users\CP\Documents\Visual Studio
//2010\Projects\D\STDS\NPC.d    256 
```

这是否意味着您不能在关联数组上使用附加运算符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:54:11.977

要添加单个元素，只需像分配任何其他类型的数组一样分配它。

```
test[false] = node; 
```

要将 assoc 数组附加到另​​一个 assoc 数组，请对其进行循环并重新分配元素。

```
foreach(k, v; temp) test[k] = v; 
```

为什么：关联数组不是列表；顾名思义，它们是关联数组。append 运算符对于连续的元素列表是有意义的。D 的 AA 是哈希表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T17:25:13.773

您在寻找关联数组*的数组吗？*在这种情况下，以下将起作用，例如：

```
struct Node { int x; }
Node[bool][] test;
Node[bool] temp = [ false:Node(1), true:Node(2) ];
test ~= temp;
test ~= [ false:Node(3), true:Node(4) ];
writefln("Nodes: %s", test); // Nodes: [[false:Node(1), true:Node(2)], [false:Node(3), true:Node(4)]] 
```

这会给你一个线性数组（**test**），它的每个元素都是一个关联数组，最多有两个元素（因为你的键类型是 bool）。

但是，您是否尝试创建二叉树？然后，您需要 Node 结构本身内的 Node 成员变量用于左右分支（如果不是这种情况，请忽略）。

# c# - 如何更改 ListView 背景图像布局？

> ID：10017450
> 
> 赞同：0
> 
> 时间：2012-04-04T18:51:01.173
> 
> 标签：c#, winforms, visual-studio-2010, listview, windows-7

我试图找到一种方法来更改 ListView 控件上背景图像的布局。我已经四处寻找，但没有得到任何直接的答案。

我可以看到有一个**ListView**属性**BackgroundImageLayout**应该可以完成这项工作。但是当我改变它时，除了触发**BackgroundImageLayoutChanged**事件之外，什么都没有发生。

如何更改 ListView 控件上的 BackgroundImageLayout？是否有任何可能的解决方法来实现我的目标？

PS.：我知道“解决”这个问题的 3rd 方控件，但我正在寻找一种无需任何额外组件即可完成任务的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:30:56.233

ListView 是本机 Windows 控件。是的，它确实支持背景图像，[LVM_SETBKIMAGE 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761155%28v=vs.85%29.aspx)会处理它。然而，它不支持样板 Winforms BackgroundImage 支持，值得注意的是 BackgroundImageLayout，这是 Winforms 为 Control 类实现并在 ControlStyles.UserPaint 打开时实现的属性。它不适用于本机 Windows 控件，它们自己绘制。

为 ListView 编写 Winforms 包装类的人做了下一件好事，他向ListView 类添加了一个名为 BackgroundImageTile的*新属性。**本机 Windows 控件确实*实现的布局选项。这使您只剩下本机控件支持的两个布局选项。瓷砖或不瓷砖。

同一个人做了一些非常英勇的事情来使 Winforms 包装类行为合理。该代码充满了解决本机控件怪癖的技巧。很棒的工作。如果 Windows 团队的人能够让 Winforms 人的生活更轻松，他的生活会轻松很多。但它不是那样工作的，ListView比 Winforms 存在的时间要长得多*。*而且从一开始就设计得不是很好，微软在那段时间经历了相当大的成长痛苦。

快进并更改规则，以便您不依赖旧代码：WPF、Silverlight、WinRT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:59:20.790

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.backgroundimagelayout.aspx)，“ListView.BackgroundImageLayout 属性”：

> “该 API 支持 .NET Framework 基础结构，不打算直接从您的代码中使用。”

和

> 此属性对 ListView 控件的背景图像的布局没有影响，因此它不会显示在设计器中或 IntelliSense 中。

使用**BackgroundImage**属性设置背景图像。有关更多信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backgroundimage.aspx)：

那是除非你有一些你想用它做的花哨的东西？

**编辑：**根据以前的线程[这里](https://stackoverflow.com/questions/4866613/winforms-listviews-backgroundimage-positioning)：简短的回答是你不能。=(

如果您非常想要它，请尝试创建一个空白图像，它是您的 ListView 的尺寸。将您的图像添加到此图像并在其中添加一个位于中间的位置。在位图或图像下可能有与此类似的内容。

# android - 在通过网络发送之前访问语音流

> ID：10017468
> 
> 赞同：1
> 
> 时间：2012-04-04T18:52:16.447
> 
> 标签：android

我对 Android 还很陌生，我想知道是否有办法在有电话时通过移动分销商的网络发送语音流之前访问和编辑语音流？我猜流是二进制格式的？提前致谢

# perl - Perl：简单的 INI 文件信息检索

> ID：10017469
> 
> 赞同：1
> 
> 时间：2012-04-04T18:52:19.210
> 
> 标签：perl, file, config, ini

我有一个 perl 脚本正在读取这样的 INI 文件：

```
[placeholder_title]
Hostname = 127.0.0.1
Port = 161 
```

我为此使用的库是 Config::Tiny。

通常在读取ini文件时，我会有这样的东西：

```
$Config = Config::Tiny->read( 'configfile.ini' );

my $Hostname_property = $Config->{placeholder_title}->{Hostname}; 
```

现在我有一个案例，配置文件中的部分标题是由用户决定的，所以我不完全知道它是什么。

在我实际上在配置文件中有多个部分之前，所以我会像这样遍历它们：

```
 foreach my $Section (keys %{$Config}) {

            my $Hostname_property = $Config->{$Section}->{Hostname};
            my $Port_property = $Config->{$Section}->{Port}; 
```

但是如果我总共只有 1 个部分呢？

是否有一个特定的关键字可以用来代替部分名称？

我已经从前面的示例中尝试过类似的循环逻辑，如下所示：

```
$Config = Config::Tiny->read( 'configfile.ini' );

my $Section = keys %{$Config};

my $Hostname_property = $Config->{$Section}->{Hostname};

print $Hostname_property, "\n"; 
```

但是后来我收到一个错误，表明 $Hostname_property 没有初始化，所以我的 $Section 变量显然没有做我希望它做的事情。

如果有人可以帮助我或至少为我指明正确的方向，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:08:57.610

`my $Section = keys %{$Config};`不起作用的原因是您`keys`在标量上下文中调用，因此它返回键的数量。尝试在列表上下文中调用它：

```
my ($Section) = keys %{$Config}; 
```

这将设置`$Section`为第一个键。（“第一”以任何顺序`keys`返回键。如果只有一个键，那没关系。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:01:37.253

散列只有一个键是可以的。因此，如果您的 ini 文件中只有一个部分是可以的。

例如，如果我们有一个名为的文件`blah.ini`，其内容为

```
[title]
foo=bar
blah=baz 
```

如果我们运行以下代码：

```
use strict;
use warnings;
use Config::Tiny;
my $cfg=Config::Tiny->read("blah.ini");
use Data::Dumper;
print Dumper($cfg) . "\n"; 
```

然后我们得到输出

```
$VAR1 = bless( {
                 'title' => {
                              'blah' => 'baz',
                              'foo' => 'bar'
                            }
               }, 'Config::Tiny' ); 
```

因此，我们可以执行以下操作：

```
use strict;
use warnings;
use Config::Tiny;

my $cfg=Config::Tiny->read("blah.ini");
foreach my $title(sort keys %$cfg)
{
  foreach my $setting (sort keys %{$cfg->{$title}})
  {
    print "title: $title,setting $setting, value $cfg->{$title}->{$setting}\n";
  }
} 
```

输出是

```
title: title,setting blah, value baz
title: title,setting foo, value bar 
```

# json - 无法从 Jquery Dialog 将 Json 格式的数据序列化到 Asp.net MVC 3 控制器

> ID：10017470
> 
> 赞同：0
> 
> 时间：2012-04-04T18:52:20.767
> 
> 标签：json, asp.net-mvc-3, jquery-ui, dialog

我有一个我无法弄清楚的新手问题，我有一个从 asp.net 控制器的部分视图生成的表单，然后显示在 jquery 对话框中。

我在对话框上有 2 个按钮（保存/取消）

在保存按钮上，我想序列化表单中的输入以将其发送回 Asp.net mvc actionController，但是它似乎不起作用，actioncontroller 没有从 Jquery Dialog 获取模型对象，我正在使用表单的 Jquery 序列化函数。

这是脚本代码：

```
<button id="btnDialog">Account Logon</button>

<div id="Logonform"></div>

<script type="text/javascript">

    $(document).ready(function () {

        $.validator.unobtrusive.parse("#Logonform");

        $("#Logonform").dialog({
            autoOpen: false,
            modal: true,
            title: 'Login',

            buttons: {
                Save: function () {
                    alert($("#Logonform").serializeArray());
                    alert($("#Logonform").attr('UserName'));

                    $.ajax({
                        url: "@Url.Action("LogOn", "Account")",
                        type: "POST",
                        data: $("#Logonform").serialize(),
                        datatype: "JSON",
                        success: function (result) {
                            $("#Logonform").html(result).dialog('open');
                        }
                    });
                },

                Close: function () {
                    $(this).dialog('close');
                }
            }

        });

        $("#btnDialog").click(function () {
            $.ajax({
                url: "@Url.Action("LogOn", "Account")",
                type: "GET",
                success: function (result) {
                    $("#Logonform").html(result).dialog('open');
                }

                });
        });
    })

</script> 
```

控制器：

```
 public ActionResult LogOn()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView("_Logon");

        }
        return View();
    }

    [HttpPost]
    public ActionResult LogOn(LogOnModel model)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                return Json( new { result = "ok", user = model.UserName });
            }
            else
            {
                return PartialView("_Logon");
            }
        } 
```

风景：

```
@model JqueryDialogTest.Models.LogOnModel

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Models/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@Html.ValidationSummary(true, "Échec de la connexion. Corrigez les erreurs et réessayez.")

@using (Html.BeginForm()) {
    <div>
        <fieldset>
            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div class="editor-label">
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe)
            </div>

        </fieldset>
    </div>
} 
```

您的任何评论指出错误将不胜感激

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:28:34.720

尝试将 Logon 操作参数从 LogonModel 类型更改为字符串，并使用 JavascriptSerializer 在操作方法中自行反序列化。如果这仍然不起作用，请使用[Fiddler](http://www.fiddler2.com/fiddler2/)查看 POST 中发送的内容（如果有的话）。

# jna - 通过 JNA 中的指针参数传递结构（自己找到解决方案）

> ID：10017473
> 
> 赞同：4
> 
> 时间：2012-04-04T18:52:27.433
> 
> 标签：jna

**找到解决方案**，留下帖子，以防有人发现它有用。

现在它看起来很健忘......但是当你在某个本机函数中通过它的指针传递结构时，它根本不知道它需要从本机内存中重新读取自己。
在像我这样的情况下，您需要做的就是在本机方法返回后调用结构方法 autoRead() ，结构将从本机内存中重新读取。

下面是一些例子：

```
// Original C code
typedef struct _SomeStructure {
  int x, y;
} SomeStructure;

void DoSomesthing(BYTE* data, int param);   //returns lots of data types, 
                                            //including SomeStructure    

// Equivalent JNA mapping
class SomeStructure extends Structure { public int x, y; }
void DoSomesthing(Pointer data, int param);
...
SomeStructure st = new SomeStructure();
DoSomesthing(st.getPointer(), 100);
st.autoRead(); //structure will be filled 
```

仅当您需要从本机函数中获取某些结构时，此技巧才有效。

***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* *_* __ *_* __ *_* __ _ *_* ___**

目前我正在研究 JNA 的扩展，所以它可以使用 MSCAPI，我遇到了一个小问题。

MSCAPI 函数以非常特定的方式设计，因此使用不同的参数以完全不同的方式工作。特别是

`BOOL WINAPI CryptGetProvParam(
__in HCRYPTPROV hProv,
__in DWORD dwParam,
__out BYTE *pbData,
__inout DWORD *pdwDataLen,
__in DWORD dwFlags
);`

当设置了 PROV_ENUMALGS 标志时，函数在 pbData 参数中返回[PROV_ENUMALGS](http://msdn.microsoft.com/en-us/library/aa387440(v=vs.85).aspx)结构，但在其他情况下，它可以返回句柄、0t 字符串和许多其他内容。
所以我将其映射为：

`boolean CryptGetProvParam(
HCRYPTPROV hProv,
int dwParam,
Pointer pbData,
IntByReference pdwDataLen,
int dwFlags
);`

但是，当我`m tried to call it with PROV_ENUMALGS.getPointer() (as pbData param) structure was not filling, so I ended up with having overloaded function with pdData type PROV_ENUMALGS. It`工作时，但感觉有更好的方法可以做到这一点，然后有重载的功能，不会让我离开一个星期......

所以，各位，有什么建议吗？

PS对不起我的英语不好，以及格式化技巧。

也许我第一次不是很清楚，这里还有一些代码：
HCRYPTPROV hProv = JMSCAPIUtil.contextVerify(null, 420);

```
 PROV_ENUMALGS algs = new PROV_ENUMALGS();       

    if(Advapi32.INSTANCE.CryptGetProvParam(hProv,
            Advapi32.PP_ENUMALGS,
            algs,//.getPointer(),
            new IntByReference(algs.size()),
            Advapi32.CRYPT_FIRST)){
        System.out.println(algs.aiAlgid+"\t"+algs.dwBitLen+"\t"
                + new String(algs.szName,0,algs.dwNameLen.intValue()));
    }else{
        int err=Kernel32.INSTANCE.GetLastError();
        System.out.println(err);
    }       

    JMSCAPIUtil.contextRelease(hProv); 
```

这是结果：

```

26154 256 消费税 28147
```

显然，它调用

```
boolean CryptGetProvParam(
        HCRYPTPROV hProv,           
        int dwParam,                
        PROV_ENUMALGS pbData,           
        IntByReference pdwDataLen,  
        int dwFlags                         
        ); 
```

映射。

如果`,//`删除，它会调用

```
boolean CryptGetProvParam(
        HCRYPTPROV hProv,           
        int dwParam,                
        Pointer pbData,                 
        IntByReference pdwDataLen,  
        int dwFlags                     
        ); 
```

映射，结果将是：

```
0 0   

```

显然，当通过指针传递时，结构不会填充。

# javascript - 带有 GA 时间跟踪器的 onload 和 onunload JavaScript 事件

> ID：10017486
> 
> 赞同：0
> 
> 时间：2012-04-04T18:53:35.610
> 
> 标签：javascript

```
<html>  
<head>  
<title>Latency Tracking Demo</title>  
</head>  
<body>  
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>  
<script type="text/javascript" src="http://www.example.com/scripts/time-tracker.js"></script>  
<script type="text/javascript">  
var timeTracker = new TimeTracker();  
var pageTracker = _gat._getTracker('UA-1735986-1');   
</script>  
<input type="button" value="Start Timer" onclick="timeTracker._recordStartTime();"/>  
<input type="button" value="Stop Timer" onclick="timeTracker._recordEndTime();"/>  
<input type="button" value="Track!" onclick="timeTracker._track(pageTracker, undefined, 'Manual Test');"/>  
</body>  
</html> 
```

我正在尝试将此概念应用于 onload JavaScript 事件作为 Start Time 和 onunload 作为 Stop time ，例如

```
 onload="timeTracker._recordStartTime();"
    onunload="timeTracker._recordEndTime(); timeTracker._track(pageTracker, 'Category','Action');" 
```

但是没有得到它的工作..甚至没有抛出错误

任何的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:56:51.233

```
function loadIt(){
  timeTracker._recordStartTime();
}

function unLoadIt(){
  timeTracker._recordEndTime(); 
  timeTracker._track(pageTracker, 'Category','Action');
} 
```

然后（我用这个功能）

```
function addOnloadEvent(func){
    var oldOnload = window.onload;
    if(typeof window.onload != 'function') {
        window.onload = func;
    } else {
        window.onload = function() {
            if(oldOnload) {
                oldOnload();
            }
            func();
        }
    }
}

addOnloadEvent(loadIt);
//window.onunload = unLoadIt  //Do the same for unload 
```

它采用函数名，不带 () 或引号

> 与其将其直接分配给 onload 属性，不如将其添加为事件侦听器

检查此[链接](https://stackoverflow.com/a/7954904/643500)

# ruby-on-rails - 向控制器添加自定义内部方法

> ID：10017491
> 
> 赞同：0
> 
> 时间：2012-04-04T18:53:48.340
> 
> 标签：ruby-on-rails, ruby

我是 RoR 的新手，我有一个控制器 ( `UsersController`)，我希望在任何事情之前验证某个会话的存在。由于几个方法的会话验证码是相同的，我不想重复自己，我决定在我的控制器中创建一个新方法来检查会话：

```
class UsersController < ApplicationController
    def index
    end

    def show
    end

    def new
        if self.has_register_session?
            # Does something
        else
            # Does something else
        end
    end

    def edit
    end

    def create
    end

    def update
    end

    def destroy
    end

    def self.has_register_session?
        # true or false
    end
end 
```

当我运行页面时`/users/new`，我收到了这个错误：

```
undefined method `has_register_session?' for #<UsersController:0x1036d9b48> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:03:46.837

`self`当你定义方法时指的是`UsersController`类对象，但在实例方法内部`new`，`self`指的是*实例*。`UsersController`

1.  您可以使您的方法成为实例方法：

    ```
    def has_register_session?
      # code
    end 
    ```

    `self`然后，您也可以在调用`has_register_session?`时摆脱`new`。

2.  或者调用类上的方法：

    ```
    if UsersController.has_register_session?
      # code
    end 
    ```

    而不是显式引用`UsersController`，您可以这样做`self.class`。

请注意，您可能需要第一个解决方案：创建`has_register_session?`实例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:02:27.270

通过这样做`def self.blah`，您创建了一个类方法，而您想要一个实例方法。

您可能还希望使方法受到保护 - 默认情况下，所有公共方法都作为操作公开。

# ios - 为什么在内存警告后 OpenGL 支持的 UIView 不会显示，而 UINavigationController 堆栈中的另一个视图在它之上

> ID：10017493
> 
> 赞同：1
> 
> 时间：2012-04-04T18:53:50.900
> 
> 标签：ios, opengl-es, uiview, memory-warning

我有一个带有 CAEAGLLayer 支持的子类或 UIView。这个视图不是全屏的，是一个容器 UIView 的子视图。此容器由 UINavigationController 堆栈中的 UIViewController 控制。如果我在堆栈上推送一个新视图然后将其弹出，一切都很好，我仍然可以看到 OpenGL 视图并与之交互。如果我在导航控制器堆栈上推送另一个视图然后触发内存警告，然后弹出该视图，OpenGL 视图仍然存在并呈现其背景颜色，但 OpenGL 内容不可见。在 viewDidAppear 上触发它的 draw 方法，我可以看到它重绘了它的内容（我可以在调试器中逐步执行它的 draw 方法，并且上下文不为空，图层不为空等）但是，在调用 presentRenderBuffer 后，OpenGL 内容不会出现：

显然，发生内存警告时释放了一些东西，但我仍然有一个 UIView 并且它有一个带有 EAGLContext 的 CAEAGLLayer（至少它们不是 nil）。

当视图重新出现时，我尝试在绘制之前销毁并重新创建帧缓冲区和渲染缓冲区，认为这些可能已被释放。

我尝试将 EAGLLayer.drawableProperties 设置为包括设置为 YES 的 kEAGLDrawablePropertyRetainedBacking 键。

为什么OpenGL内容不会出现？

最后一点：我知道 GLKView 可能是我应该使用的，但我需要支持 iOS 4.2。

# iphone - segue 上的通用主从故事板帮助

> ID：10017498
> 
> 赞同：0
> 
> 时间：2012-04-04T18:54:00.600
> 
> 标签：iphone, objective-c, ipad, xcode4.2, storyboard

我正在尝试使用 iPhone 和 iPad 故事板制作我的第一个通用应用程序。

我有一个非常简单的应用程序，它在 UITable 上显示一个列表以及单击时项目的详细信息。

它适用于 iPhone，我创建了一个 segue 来推送详细视图，并使用以下代码正常工作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:@"detail" sender:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"detail"])
    {
        NSIndexPath *selectedIndex = [self.tableView indexPathForSelectedRow];
        // Get reference to the destination view controller
        self.detailViewController = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        self.detailViewController.detailDict = [myArray objectAtIndex:selectedIndex.row];
    }
} 
```

我不知道这是否有任何区别，但我已将我的 iPad 设置为仅在横向上工作。无论如何，我怎样才能优化这段代码以在 iPad 故事板上工作呢？

我已经为 iPad 尝试了不同的 segues，但它们都没有奏效。我得到（gdb）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:14:44.433

我最终得到了这段代码。它适用于 iOS 5 和 6

```
#pragma mark - Orientations

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return UIInterfaceOrientationIsPortrait(interfaceOrientation);
    else
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

并确保我检查了 Target > Summary > Supported Interface Orientations 上的按钮

# android - Android：拨出电话时响铃

> ID：10017509
> 
> 赞同：0
> 
> 时间：2012-04-04T18:54:44.167
> 
> 标签：android

我需要知道手机在拨出电话时响铃的时间。

不是在android.intent.action.NEW_OUTGOING_CALL的时候，只是在这个响铃的那一刻。

使用 TelephonyManager.EXTRA_STATE_RINGING 来电时很容易，但我知道拨出电话？

谢谢你。

# javascript - 在一个页面上多次使用相同的 JQuery 令牌输入框

> ID：10017512
> 
> 赞同：0
> 
> 时间：2012-04-04T18:54:47.290
> 
> 标签：javascript, ruby-on-rails, jquery-ui, jquery

我在我的 rails 应用程序中使用 Jquery TokenInput 来帮助用户快速输入信息。每个用户都有一个个人资料，上面有许多相同类别的项目，称为college_items。每个college_item 都有自己的编辑链接，它会弹出一个模态框，其中包含模态框的适当编辑表单。

我关注了 Ryan Bates 的截屏视频，并使用以下代码使 TokenInput 正常工作：
在 application.js 中：

```
$(function() {
 $("#education_major_tokens").tokenInput("/majors.json", {
   theme: "facebook"
  })
}); 
```

在我看来：

```
<%= f.text_field :major_tokens %> 
```

在我的模型中：

```
def major_tokens=(ids)
 self.major_ids = ids.split(",")
end 
```

我遇到的问题是这个相同的字段出现在每个编辑表单中，所以在第一个项目的编辑表单中一切正常，但在任何其他项目的编辑表单中，javascript 都没有初始化。我的问题是如何更改 javascript 以在每次出现此表单元素时进行初始化，而不仅仅是第一次出现？

编辑：我认为这样的事情可能是解决方案：

```
$(function() {
 $("#education_major_tokens").each(function(){
   $(this).tokenInput("/majors.json", {
   theme: "facebook"
   })
  });
}); 
```

但它仍然不适合我。有没有人有任何想法？

编辑2：终于想通了。请参阅上面的编辑，只是没有使用#education_major_tokens，而是将每个输入设置为具有：class =>“major_input”并将代码中的“#education_major_tokens”更改为“.major_input”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:20:11.817

我认为这有点晚了，但尝试为您的令牌字段分配一个类

```
<input class="yourtokenfield" type="text" /> 
```

之后使用这个

```
$(function() {
 $(".yourtokenfield").each(function(){
   $(this).tokenInput("/majors.json", {
   theme: "facebook"
   })
  });
}); 
```

我认为您的问题是由于类名称不正确，并且记住 ID 只能在您的 HTML 文档中出现一次。

# cakephp-2.0 - cakephp 2.1 注册和登录

> ID：10017513
> 
> 赞同：0
> 
> 时间：2012-04-04T18:54:51.720
> 
> 标签：cakephp-2.0

我对 cakephp 2.1 和 Auth 有疑问。

在我的 AppControlles 中，我有一个函数 getUserdetails()

```
if (($user = $this->Auth->user()) != null)
    {
      $this->loadModel('User');
      $tmp = $this->User->find('first',array(
          'conditions' => array('username' => $user['User']['username'], 
                       'password'=> $user['User']'password'],
                'active' => 1),
          'recursive' => -1));

      if(!isset($tmp['User']))
        return null;

      $this->_userDetails = $tmp['User'];
      $this->set('userDetails', $this->_userDetails);
    }
    else
      return null 
```

当用户首次注册时 $this->Auth->user() 返回

```
array(
    'User' => array(
        'password' => '*****',
        'username' => 'me',
        'remember_me' => '1'
    )
) 
```

其中密码是 md5 编码的。如果我注销并再次登录，则先前数组中的密码将以纯文本形式返回，因此 User->find 返回 false。有没有办法为此制作一个功能？我如何知道 $this->Auth->user() 的密码是否为 md5？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T05:19:14.827

尝试这个：

```
public function login() {
    //If a user is already logged in, redirect him
    if ($this->Session->read('Auth.User')) {
        //$this->Session->setFlash('You are logged in!');
        $this->redirect(array('controller' => 'showspage', 'action' => 'home'));
    }

    if ($this->request->is('post')) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);

        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Wrong username or password');
            $this->redirect(array('controller' => 'showspage', 'action' => 'home'));
        }
    }
    $this->Session->setFlash('You aren't legged-in!');
    $this->redirect(array('controller' => 'showspage', 'action' => 'home'));
} 
```

有关用户的所有信息都在会话中，您可以使用 AuthComponent 找到它：

Es: AuthComponent::user('username');

# sql-server - 存储过程占用 CPU SQL Server 2005

> ID：10017514
> 
> 赞同：0
> 
> 时间：2012-04-04T18:54:54.143
> 
> 标签：sql-server, sql-server-2005

我正在尝试解决数据库服务器上 SQL Server 进程使用 100% cpu 的问题。在调查时，我现在发现存储过程占用了最多的工作时间。

对于 dmv 的以下查询以查找耗时最长的查询，

```
SELECT TOP 20 st.text
               ,st.dbid
               ,st.objectid
               ,qs.total_worker_time
               ,qs.last_worker_time
               ,qp.query_plan
FROM sys.dm_exec_query_stats qs
CROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) st
CROSS APPLY sys.dm_exec_query_plan(qs.plan_handle) qp
ORDER BY qs.total_worker_time DESC 
```

其中大部分是存储过程。奇怪的是，所有这些存储过程都在查询不同的表。然而，它们是花费最多工作时间的顶部，即使当我查看 Profiler 以查找具有顶级 CPU、读取、持续时间的查询时，存储过程并没有排在顶部。

为什么会发生这种情况？

==编辑== 应用程序实际上使用的即席查询比存储过程更多。其中一些过程将迁移到使用即席查询。问题是这些过程不像其他一些查询那样经常被调用，这些查询是 CPU 密集型的，并且被非常频繁地调用。此外，让我感到奇怪的是，一个从 tbl where id=@id 执行简单选择 a,b,c 的存储过程将比具有多个连接的查询具有更高的总工作时间，用户定义的函数在 where子句，一个排序和一个row_number，而简单的查询一个包含20000条记录的表，而复杂的查询是一个超过200,000条记录的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:16:22.357

这取决于您在该存储过程中做什么，如何调整表、索引等。

例如，如果您使用诸如 cursor 之类的循环创建存储过程，您将拥有最大的 cpu 使用率。如果您没有设置索引并且您正在使用 select 使用不同的连接等。你会让你的cpu超载。

这与您使用数据库的方式有关。

一些技巧：

1.  我建议大多数时候创建存储过程。
2.  创建存储过程时，使用执行计划运行以获得一些建议。
3.  如果表有很多记录（超过 1 或 2 百万），请考虑创建索引视图。
4.  仅在必要时进行更新或删除，有时最好只插入记录并每天或每周运行一个作业来更新或删除您不需要的记录。（视情况而定）

# javascript - 使用java脚本检查字符串是否只是数字

> ID：10017516
> 
> 赞同：0
> 
> 时间：2012-04-04T18:55:12.957
> 
> 标签：javascript, asp.net

使用 javascript 检查字符串是否为数字，这只是我所拥有的，但它没有运行任何建议，非常感谢提前感谢。如果它只是一串数字，那么前两位数字之后的所有数字都应该被屏蔽。

```
 var start = function RenderRC(CodeOwner) {

     var pattern = /^\d+$/;
     var Rcode = CodeOwner.toString();

     if (Rcode.valueOf.match(pattern)) {
        if (Rcode.length > 2) {
            var newcode = Rcode.substr(0, 2) + Array(Rcode.length - 2 + 1).join("*");
            return newcode;
        }
     } else {
        return Rcode;
     }
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:08:17.360

删除`valueOf.`，它应该运行良好

```
if (Rcode.match(pattern))
... 
```

或者在其中添加括号以实际调用该函数：

```
if (Rcode.valueOf().match(pattern))
... 
```

但我认为不需要函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:00:16.630

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

请参阅此处：[在 JavaScript 中验证十进制数 - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:02:42.197

```
function IsNumeric(sText) {
    var Reg = new RegExp('^\\d+$');
    var Result = sText.match(Reg);
    if (Result)
        return true;
    else
        return false;
} 
```

# java - Java - Swing - JTable - 为选定行设置颜色，但不是单元格

> ID：10017517
> 
> 赞同：10
> 
> 时间：2012-04-04T18:55:16.887
> 
> 标签：java, swing, colors, jtable, cell

当您单击一个单元格时，我试图让我的表格选择整行（这可以通过关闭列选择来完成），但是，我不希望您单击的特定单元格周围的额外粗边框被突出显示。我希望这会很容易，但显然它涉及渲染器，所以我做了很多研究，我能得到的最接近的是：

```
 JTable contactTable = new JTable(tableModel);

    contactTable.setCellSelectionEnabled(true);
    contactTable.setColumnSelectionAllowed(false);
    contactTable.setRowSelectionAllowed(false);
    contactTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

    // This renderer extends a component. It is used each time a
    // cell must be displayed.
    class MyTableCellRenderer extends JLabel implements TableCellRenderer {
        // This method is called each time a cell in a column
        // using this renderer needs to be rendered.
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int rowIndex, int vColIndex) {
            // 'value' is value contained in the cell located at
            // (rowIndex, vColIndex)

            if (isSelected) {
                // cell (and perhaps other cells) are selected

            }

            if (hasFocus) {
                // this cell is the anchor and the table has the focus
                this.setBackground(Color.blue);
                this.setForeground(Color.green);
            } else {
                this.setForeground(Color.black);
            }

            // Configure the component with the specified value
            setText(value.toString());

            // Set tool tip if desired
            // setToolTipText((String)value);

            // Since the renderer is a component, return itself
            return this;
        }

        // The following methods override the defaults for performance reasons
        public void validate() {}
        public void revalidate() {}
        protected void firePropertyChange(String propertyName, Object oldValue, Object newValue) {}
        public void firePropertyChange(String propertyName, boolean oldValue, boolean newValue) {}
    }

    int vColIndex = 0;
    TableColumn col = contactTable.getColumnModel().getColumn(vColIndex);
    col.setCellRenderer(new MyTableCellRenderer()); 
```

我从一个示例中复制了渲染器，只更改了 hasFocus() 函数以使用我想要的颜色。设置颜色`isSelected()`什么也没做。

这段代码的问题是：

1.  它仅适用于底部 vColIndex 指定的一列。显然，我希望将其应用于所有列，因此单击一个单元格中的一个单元格会突出显示整行。我可以创建一个 for 循环来将其更改为每个单元格，但我认为有更好的方法可以一次更改所有列的 cellRenderer。

2.  `setForegroundColor()`用于更改文本，但`setBackgroundColor()`对单元格背景没有任何作用。我希望它像属性所暗示的那样实际更改背景颜色。

    *   ＃2的解决方案：`this.setOpaque(true);`在分配背景色之前使用。
3.  当渲染器工作时，它只在单个单元格上工作。如何让它为行中的所有单元格着色？

    *   ＃3的解决方案：我想通了！如果您启用行选择 ( )而不是 using `hasFocus()`，它只影响单个单元格，`table.setRowSelectionAllowed(true)`那么您将颜色更改放在`if(isSelected)`语句中。然后整行被认为是选中的，它为所有单元格着色！

3 是大的，但如果有人知道 #1 或者可以向我解释为什么它的设计使得您一次只能将渲染器应用于一列，那将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T18:13:19.883

太直接了就加行

```
tablename.setSelectionBackground(Color.red); 
```

就我而言

```
jtbillItems.setSelectionBackground(Color.red); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T02:34:48.650

教程文章[*概念：编辑器和渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)解释说，“单个*单元格渲染器*通常用于绘制包含相同类型数据的所有单元格”，如模型`getColumnClass()`方法返回的那样。

`prepareRenderer()`或者，对*所有*单元格调用override以选择性地更改行的外观。这个[例子](https://stackoverflow.com/a/5799016/230513)比较了这两种方法，文章[*表格行渲染*](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)扩展了该方法的多功能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:32:43.807

对于第二个问题，您可以尝试 setSelectionBackground(Color) 和 setSelectionForeGround(Color) 方法。我不确定您如何解决第一个问题。最后一个建议您可以使用一些摇摆设计器插件，例如 JBuilder。这会很有帮助。

# iphone - 文本聊天 xmpp 消息节永远不会进入网络 - 使用 libjingle 的 iphone 项目

> ID：10017518
> 
> 赞同：1
> 
> 时间：2012-04-04T18:55:17.443
> 
> 标签：iphone, ios, xmpp, google-talk, libjingle

我认为改写会更好。我之前提出的问题本来可以更好地集中注意力。存在通知的问题虽然是真实的并且仍然反复出现，但有点小。我还没有弄清楚的事情我可以伪造或解决。比在用户之间移动基本的文本聊天消息要少得多。

再一次，这种技术风格的组合仍然相当新 - 使用 libjingle 作为 iphone xmpp/jabber 应用程序的心脏（以及肝脏和肾脏......）。得到了部分标志，存在通知/名册更新业务实际上似乎或多或少地发挥了应有的作用。但是 xmpp 文本聊天消息节似乎在发送到网络之前就消失了。捕获其他网络流量，并仔细阅读漂亮的数据包，我是的，我可以看到登录等的交换，这让我们继续前进，但没有聊天。

我已经检查并仔细检查了我是如何将节、属性、名称空间等放在一起的。在我看来，一切都是 jim-dandy。我可以看到一条消息正在 libjingle 内部基础架构中排队。但在以太网上没有结果。

希望以前玩过这些东西的人可能会记得类似的绊脚石，并可以提供提示、建议或指向正确方向的指针。

谢谢你的帮助。

麦克风

# php - 如何确定 Pheanstalk 作业是否已完成

> ID：10017519
> 
> 赞同：3
> 
> 时间：2012-04-04T18:55:26.967
> 
> 标签：php, cron, beanstalkd

我目前正在使用 Pheanstalk (beanstalkd) 来处理多个使用多个工人的作业。我想知道是否有一种通用的方法来确定所有作业是否都已完成，因为工作人员是异步运行的。

我曾考虑在发布的最后一份工作中添加一个“已完成”标志，并使用工作人员检查该标志。问题是*最后*一份工作并不总是工人完成的最后一份工作。工人可能会被挂断，崩溃等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:29:53.213

如果您想知道它们何时全部完成，则需要每个作业标记其完成，并等到所有标记都设置为完成。正如您所指出的，对于跨多个工人的一组工作的完成顺序没有任何保证。

是否可以将该工作作为单个作业而不是多个作业排队，以便等待该单个作业完成是一件简单的事情？

也许您还应该考虑是否需要知道这些工作何时完成。例如，对于图像处理，可以在实际图像准备好之前显示占位符图像。如果您真的需要等待它们全部完成，那么它们可能不适合异步工作队列。

为了获得更好的答案，您可能需要详细说明您的问题，或者提供更具体的示例。

干杯! 保罗

# visual-studio-2008 - 如何卸载 VS2008 修补程序 KB971092 和 KB2465361

> ID：10017525
> 
> 赞同：1
> 
> 时间：2012-04-04T18:55:50.057
> 
> 标签：visual-studio-2008

当我删除 microsoft visual stuido 2008 并升级到 2010 时，我注意到无法从程序和功能中卸载两个修补程序更新。

它们在我的 Windows 7 已安装更新列表中显示为

Microsoft Visual Studio 2008 专业版的修补程序 - ENU (KB2465361) Microsoft Visual Studio 2008 专业版的修补程序 - ENU (KB971092)

当我单击卸载时，它会告诉我“此操作仅对当前安装的产品有效”。

我尝试了不同的安装清理实用程序，但仍然无法摆脱它们。有没有办法手动删除这些更新？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:44:22.773

不要删除它们，它们是 C++ 运行时支持库的安全补丁。它们不仅被您使用 Visual Studio 创建的程序使用，安装在您机器上的其他程序也使用这些 DLL。强行删除补丁会破坏其他程序。我猜您会收到错误消息，因为 KB2465361 取代了 KB971092。

卸载 VS2008 也没有什么理由，它不会妨碍 VS2010。一些 VS2010 项目仍然使用 VS2008 附带的构建工具。在 C++/CLI 项目中以 .NET 3.5 和更早版本为目标需要 VS2008 工具链。

# mysql - 更改 MySQL 中的列顺序

> ID：10017526
> 
> 赞同：3
> 
> 时间：2012-04-04T18:55:54.560
> 
> 标签：mysql, sql, phpmyadmin, xampp

是否可以在不删除当前表的情况下**更改**它们出现的 MySQL中*列的顺序（使用 phpMyAdmin XAMPP）？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T10:28:54.367

尝试这个

```
ALTER TABLE `table_name`
    MODIFY COLUMN `column_name1` varchar(100) AFTER `column_name2`; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T18:58:07.957

我不确定 phpMyAdmin，但您当然可以使用 SQL 查询来做到这一点：

```
ALTER TABLE `table`
CHANGE COLUMN `oldname` `newname` *column_definition* [AFTER|BEFORE] `colname`; 
```

# c++ - 使用 QMenu 检查 QToolButton

> ID：10017527
> 
> 赞同：0
> 
> 时间：2012-04-04T18:56:01.550
> 
> 标签：c++, qt, signals-slots

我正在设计一个具有按钮网格的小部件。单击时，我希望这些按钮向用户提供 3 个可供他们选择的选项（最好是在一个小的下拉菜单中）。当他们选择 3 个选项中的 1 个时，我希望选择该按钮（即，保持按下状态）。我希望与 3 个选项中的每一个相关联的 QAction 能够知道单击了哪个按钮，以便我可以记录单击了网格中的哪个按钮。网格中的每个按钮都需要是独占的，并且在被选中时。呈现的 3 个选项对于所有按钮都是相同的。

我首先从 QGridLayout 中的 QButtonGroup 和 QPushButtons 开始。我能够让按钮按我的意愿独占。当我将按钮从 QPushButton 更改为 QToolButton，并添加一个下拉菜单时，发生了两件事：

*   当他们从菜单中选择一个项目时，按钮不会像我想要的那样保持按下状态。
*   我似乎看不到菜单操作被告知选择了哪个按钮的方法，因此我无法记录选择了哪个按钮。

关于如何实现我正在寻找的功能的任何想法？

编辑：

澄清几点：

*   mxn 网格中的每个按钮都代表一个人。
*   每个按钮上的下拉列表可让您选择该人当前正在执行的操作。
*   一次只能有一个人做某事。因此，一次只能按下整个网格中的一个按钮。
*   按钮下拉菜单中的项目在被选中时应该被选中，并且这些项目需要是排他的，所以如果一个按钮被点击两次，下拉菜单中一个新的选中菜单项应该取消前一个选中的菜单项。
*   When an item in the button drop down menu is selected, the menu should go away and the button should appear depressed.
*   我需要记录单击的按钮（即行和列）以及从按钮下拉菜单中选择的选项。因此，菜单项信号/插槽需要以某种方式知道单击了哪个按钮。但是，QToolButton::setMenu() 不会将菜单的所有权转移给 QToolButton，所以我不确定如何让 QMenu 的 QActions 中的信号/插槽知道选择了哪个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:19:26.680

QObject::sender will tell you what QObject emitted the signal

# jquery - 文件上传中的多个文件选择在IE8中不起作用

> ID：10017528
> 
> 赞同：0
> 
> 时间：2012-04-04T18:56:15.437
> 
> 标签：jquery, file-upload, ajax-upload

我正在使用文件上传控件`http://valums.com/ajax-upload/`，它说它适用于多个文件选择。但是，它不适用于 IE8。我在 FF 中尝试了同样的方法，它可以正常工作。

有没有像 IE8 不支持多文件选择的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:24:43.170

尝试uploadify，适用于IE/FF 和Chrome 上的多个文件上传。

[http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:01:00.577

它和旧图书馆。大多数浏览器不支持内部使用的某些方法。试试这个[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:06:51.697

尝试[plupload](http://www.plupload.com/)，您也可以选择多个文件 n IE8，我目前正在使用过去 1 年没有任何问题。

并提出您的问题，它不支持 IE 进行多项选择。

# jquery - 悬停时未激活 jQuery 选项卡

> ID：10017530
> 
> 赞同：1
> 
> 时间：2012-04-04T18:56:29.987
> 
> 标签：jquery, tabs, mouseover

这是html：

```
<div id="wrapper">
 <ul class="tabs">
    <li class="active"><a href="#tab1">Tab 1</a></li>
    <li class=""><a href="#tab2">Tab 2</a></li>
    <li class=""><a href="#tab3">Tab 3</a></li>     
 </ul>
 <div class="tab-container">
 <div id="tab1" class="tab-content" style="display: none; ">     
  <h2>Title</h2>
  <p>Text</p>
  <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
 </div>
 </div>
 <div id="tab2" class="tab-content" style="display: none; ">     
  <h2>Title</h2>
  <p>Text</p>
  <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
 </div>
 </div>
<div id="tab3" class="tab-content" style="display: none; ">     
  <h2>Title</h2>
  <p>Text</p>
  <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
 </div>
 </div>  
 </div>
 </div> 
```

脚本：

```
(function($) {

$(document).ready(function() {
$(".tab-content").hide();
 $("#tab1").show(); 
//On Click Event
$("ul.tabs li").mouseover(function() {
    $("ul.tabs li").removeClass("active"); 
    $(this).addClass("active"); 
    $(".tab-content").hide(); 
    var activeTab = $(this).find("a").attr("href");
     $(activeTab).fadeIn();
    return false;

});
    });
    })(jQuery); 
```

选项卡一切正常，当我将鼠标悬停时，li 类变为活动状态。但是选项卡内容不会从 display:none 更改为 display:block。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:10:41.820

## *[演示 jsBin](http://jsbin.com/ebedaj/edit#javascript,html,live)*

jQ：

```
(function($) {

  $(document).ready(function() {

     $(".tab-content").hide();
     $("#tab1").show(); 

     $("ul.tabs li").mouseover(function() {

        var i = $(this).index();

        $("ul.tabs li").removeClass("active"); 
        $(this).addClass("active"); 

        $(".tab-content").hide(); 
       $(".tab-content").eq(i).fadeTo(300,1);

        return false;  
     });

  });

})(jQuery); 
```

固定的**HTML**：（我删除了 ID 和其他不需要的东西。）

```
<div id="wrapper">

   <ul class="tabs">
    <li><b>Tab 1</b></li>
    <li><b>Tab 2</b></li>
    <li><b>Tab 3</b></li>     
   </ul>

</div>

<div class="tab-container">

    <div class="tab-content" style="display: none; ">     
       <h2>Title1</h2>
       <p>Text1</p>
       <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
    </div>

    <div class="tab-content" style="display: none; ">     
       <h2>Title2</h2>
       <p>Text2</p>
       <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
   </div>

   <div class="tab-content" style="display: none; ">     
      <h2>Title3</h2>
      <p>Text3</p>
      <p><a href="http://fakelink.html"><img src="btn.png"></a></p>
   </div>

</div> 
```

# android - Android 触摸方向为西北，东北为 UP 方向

> ID：10017533
> 
> 赞同：1
> 
> 时间：2012-04-04T18:57:17.460
> 
> 标签：android, math, android-layout

对不起，如果标题听起来令人困惑 - 但这是我想要做的：

我有一个大的圆形按钮，可以在上面检测触摸方向。我可以从触摸输入坐标变化的 dy 和 dx 中找到 UP/DOWN/LEFT/RIGHT，如下所示：

```
 if(Math.abs(dX) > Math.abs(dY)) {
              if(dX>0) direction = 1; //left
              else direction = 2; //right
          } else {
              if(dY>0) direction = 3; //up
              else direction = 4;   //down
          } 
```

但是现在我想处理按钮可以稍微旋转的情况，因此触摸方向也需要为此进行调整。例如，如果按钮稍微向左旋转，则 UP 现在是向西北移动的手指，而不仅仅是纯正北方。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:12:51.587

使用**Math.atan2(dy, dx)**从坐标的正水平方向逆时针获取角度（以弧度为单位）

```
double pressed = Math.atan2(dY, dX); 
```

从这个角度减去旋转量（以弧度为单位的逆时针旋转量），将角度放入按钮的坐标系中

```
pressed -= buttonRotation; 
```

或者如果您的角度以度为单位，请将其转换为弧度

```
pressed -= Math.toRadians(buttonRotation); 
```

然后你可以从这个角度计算一个更简单的方向数

```
int dir = (int)(Math.round(2.0d*pressed/Math.PI) % 4); 
```

这给出了右 0、上 1、左 2 和下 3。我们需要纠正角度为负的情况，因为模结果也将为负。

```
if (dir < 0) {
    dir += 4;
} 
```

现在假设这些数字不好并且您不想使用它们，您可以打开结果以返回每个方向您喜欢的任何内容。**把所有这些放在一起**：

```
/**
 * @param dY
 *      The y difference between the touch position and the button
 * @param dX
 *      The x difference between the touch position and the button
 * @param buttonRotationDegrees
 *      The anticlockwise button rotation offset in degrees
 * @return 
 *      The direction number
 *      1 = left, 2 = right, 3 = up, 4 = down, 0 = error
 */
public static int getAngle(int dY, int dX, double buttonRotationDegrees)
{
    double pressed = Math.atan2(dY, dX);
    pressed -= Math.toRadians(buttonRotationDegrees);

    // right = 0, up = 1, left = 2, down = 3
    int dir = (int)(Math.round(2.0d*pressed/Math.PI) % 4);

    // Correct negative angles
    if (dir < 0) {
        dir += 4;
    }

    switch (dir) {
        case 0:
            return 2; // right
        case 1:
            return 3; // up
        case 2:
            return 1; // left;
        case 3:
            return 4; // down
    }
    return 0; // Something bad happened
} 
```

# css - 在 IE 的 extjs4 问题中样式化 css 按钮

> ID：10017540
> 
> 赞同：1
> 
> 时间：2012-04-04T18:57:58.970
> 
> 标签：css, button, extjs

我正在尝试在 extjs 中对我的按钮进行样式化。以下适用于除 IE 之外的所有浏览器。谁能说出为什么会这样？

```
.x-btn-default-toolbar-small {
    background-image: -webkit-linear-gradient(top,#DBEEFF,#D0E7FF 48%,#BBD2F0 52%,#BED6F5);
    background-image: -moz-linear-gradient(top,#DBEEFF,#D0E7FF 48%,#BBD2F0 52%,#BED6F5);

    border-color: red;
    background-color: grey;
    border-color:#81A4D0;
}
.x-btn-default-toolbar-small-over {
    background-image: none;
    border-color: blue;
    background-color: transparent;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:41:27.880

IE9 也不支持 CSS 渐变，但您可以通过使用对 SVG 定义的渐变的 url 引用来实现完全相同的效果。

有一些有限的在线生成器可以为您创建等效的 SVG 代码，但如果您想为所有可能的 CSS 线性和径向渐变生成 SVG 代码，请查看[VisualCSSTools](http://www.visualcsstools.com)上的小应用程序。

（IE10 将支持 CSS 线性和径向渐变）。

# winforms - 我可以在组合框或列表控件中放置一条水平线吗？

> ID：10017543
> 
> 赞同：1
> 
> 时间：2012-04-04T18:58:16.973
> 
> 标签：winforms

我正在构建一个包含组合框控件的 Windows 窗体，并且我想在某些项目之间放置一条水平线。我已经看到在其他情况下使用项目列表中的连字符来完成此操作，但在这种情况下连字符不会这样做。我不知道这个控件是否甚至可以使用水平线。我想要完成的是：

```
Item 1
Item 2
Item 3
_________________
Item A 
```

我想我可以简单地在里面放一行连字符，但是如果可以的话，一条干净的线条会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:11:55.833

不幸的是，我还没有找到任何标准的“干净”解决方案。

[我发现了一些东西，您可以在此链接](http://social.msdn.microsoft.com/Forums/en/winforms/thread/280066f8-f0e0-4708-ac67-969885b19aad)的每个项目之间划清界限。通过一些花哨的工作，您可能会找到一种方法，使其仅在您想要的时候画线。

或者，有一个包含行分隔符的[CodeProject组合框。](http://www.codeproject.com/KB/combobox/SeparatorComboListBox.aspx)

# c# - 在电影院分组朋友的算法

> ID：10017549
> 
> 赞同：7
> 
> 时间：2012-04-04T18:58:52.093
> 
> 标签：c#, algorithm

我为您准备了一个脑筋急转弯 - 它并不像听起来那么简单，所以请阅读并尝试解决问题。在你问它是否是家庭作业之前 - 它不是！我只是想看看是否有解决这个问题的优雅方法。这是问题：

> X 位朋友想去电影院，并希望坐在最好的团体中。最好的情况是每个人都坐在一起，最坏的情况是每个人都独自坐着。较少的组优于较多的组。优选平衡基团(3+3比4+2更优选)。独自坐着是最不受欢迎的。

输入是去电影院的人数，输出应该是一个整数数组，其中包含：

*   有序组合（最优先考虑）
*   每组人数

以下是一些去电影院的人数示例以及这些人可以就座的首选组合列表：

*   1人：1
*   2人：2、1+1
*   3人：3、2+1、1+1+1
*   4人：4、2+2、3+1、2+1+1、1+1+1+1
*   5人：5、3+2、4+1、2+2+1、3+1+1、2+1+1+1、1+1+1+1+1
*   6人：6、3+3、4+2、2+2+2、5+1、3+2+1、2+2+1+1、2+1+1+1+1、1+1 +1+1+1+1

超过 7 人的示例组合爆炸，但我认为您现在明白了。

问题是：解决这个问题的算法是什么样的？我选择的语言是 C#，所以如果你能用 C# 给出答案，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:51:34.697

我认为您需要递归地执行此操作，但您需要确保不要一遍又一遍地对同一组进行分区。这将为您提供指数级的执行时间。在我的解决方案中，看起来我有 O(n*n) （您可以为我验证它；），请参见下面的结果。另一件事是您提到的愿望功能。我不知道这样的功能会是什么样子，但您可以改为比较 2 个分区。例如，分区 1 + 1 + 2 + 4 不如 1 + 2 + 2 + 3 可取，因为它有两个“1”。一般规则可能是“如果一个分区比另一个分区拥有更多相同数量的人，那么它就不那么受欢迎了”。有道理，坐在一起的人越多越好。我的解决方案采用这种方法来比较 2 个可能的分组，我得到了你想要达到的结果。

```
 var sut = new BrainTeaser();

        for (int n = 1; n <= 6; n++) {
            StringBuilder sb = new StringBuilder();
            sb.AppendFormat("{0} person{1}: ", n, n > 1 ? "s" : "");

            var array = sut.Solve(n).Select(x => x.ToString()).ToArray();
            sb.AppendLine(string.Join(", ", array));

            Console.WriteLine(sb.ToString());
        } 
```

1人：1

2人：2、1+1

3人：3、1+2、1+1+1

4人：4、2+2、1+3、1+1+2、1+1+1+1

5人：5、2+3、1+4、1+2+2、1+1+3、1+1+1+2、1+1+1+1+1

6人：6、3+3、2+4、2+2+2、1+5、1+2+3、1+1+4、1+1+2+2、1+1+1+3 , 1+1+1+1+2, 1+1+1+1+1+1

性能看起来是 O(n*n)：

```
var sut = new BrainTeaser();

 for (int n = 1; n <= 40; n++) {
   Stopwatch watch = new Stopwatch();
   watch.Start();
   var count = sut.Solve(n).Count();
   watch.Stop();
   Console.WriteLine("Problem solved for {0} friends in {1} ms. Number of solutions {2}", n, watch.ElapsedMilliseconds, count);
}

Problem solved for 1 friends in 17 ms. Number of solutions 1
Problem solved for 2 friends in 49 ms. Number of solutions 2
Problem solved for 3 friends in 2 ms. Number of solutions 3
Problem solved for 4 friends in 1 ms. Number of solutions 5
Problem solved for 5 friends in 0 ms. Number of solutions 7
Problem solved for 6 friends in 2 ms. Number of solutions 11
Problem solved for 7 friends in 0 ms. Number of solutions 15
Problem solved for 8 friends in 0 ms. Number of solutions 22
Problem solved for 9 friends in 1 ms. Number of solutions 30
Problem solved for 10 friends in 1 ms. Number of solutions 42
Problem solved for 11 friends in 4 ms. Number of solutions 56
Problem solved for 12 friends in 4 ms. Number of solutions 77
Problem solved for 13 friends in 7 ms. Number of solutions 101
Problem solved for 14 friends in 9 ms. Number of solutions 135
Problem solved for 15 friends in 15 ms. Number of solutions 176
Problem solved for 16 friends in 21 ms. Number of solutions 231
Problem solved for 17 friends in 30 ms. Number of solutions 297
Problem solved for 18 friends in 43 ms. Number of solutions 385
Problem solved for 19 friends in 61 ms. Number of solutions 490
Problem solved for 20 friends in 85 ms. Number of solutions 627
Problem solved for 21 friends in 117 ms. Number of solutions 792
Problem solved for 22 friends in 164 ms. Number of solutions 1002
Problem solved for 23 friends in 219 ms. Number of solutions 1255
Problem solved for 24 friends in 300 ms. Number of solutions 1575
Problem solved for 25 friends in 386 ms. Number of solutions 1958
Problem solved for 26 friends in 519 ms. Number of solutions 2436
Problem solved for 27 friends in 677 ms. Number of solutions 3010
Problem solved for 28 friends in 895 ms. Number of solutions 3718
Problem solved for 29 friends in 1168 ms. Number of solutions 4565
Problem solved for 30 friends in 1545 ms. Number of solutions 5604
Problem solved for 31 friends in 2025 ms. Number of solutions 6842
Problem solved for 32 friends in 2577 ms. Number of solutions 8349
Problem solved for 33 friends in 3227 ms. Number of solutions 10143
Problem solved for 34 friends in 4137 ms. Number of solutions 12310
Problem solved for 35 friends in 5300 ms. Number of solutions 14883
Problem solved for 36 friends in 6429 ms. Number of solutions 17977
Problem solved for 37 friends in 8190 ms. Number of solutions 21637
Problem solved for 38 friends in 10162 ms. Number of solutions 26015
Problem solved for 39 friends in 12643 ms. Number of solutions 31185 
```

现在让我发布解决方案中涉及的 3 个类：

```
public class BrainTeaser {
    /// <summary>
    /// The possible groupings are returned in order of the 'most' desirable first. Equivalent groupings are not returned (e.g. 2 + 1 vs. 1 + 2). Only one representant
    /// of each grouping is returned (ordered ascending. e.g. 1 + 1 + 2 + 4 + 5)
    /// </summary>
    /// <param name="numberOfFriends"></param>
    /// <returns></returns>
    public IEnumerable<PossibleGrouping> Solve(int numberOfFriends) {
        if (numberOfFriends == 1) {
            yield return new PossibleGrouping(1);
            yield break;
        }
        HashSet<PossibleGrouping> possibleGroupings = new HashSet<PossibleGrouping>(new PossibleGroupingComparer());
        foreach (var grouping in Solve(numberOfFriends - 1)) {
            // for each group we create 'n+1' new groups 
            // 1 + 1 + 2 + 3 + 4 
            // Becomes
            //      (1+1) + 1 + 2 + 3 + 4  we can add a friend to the first group
            //      1 + (1+1) + 2 + 3 + 4  we can add a friend to the second group
            //      1 + 1 + (2+1) + 3 + 4  we can add a friend to the third group
            //      1 + 1 + 2 + (3+1) + 4  we can add a friend to the forth group
            //      1 + 1 + 2 + 3 + (4+1) we can add a friend to the fifth group
            //      (1 + 1 + 2 + 3 + 4) + 1  friend has to sit alone

            AddAllPartitions(grouping, possibleGroupings);
        }
        foreach (var possibleGrouping in possibleGroupings.OrderByDescending(x => x)) {
            yield return possibleGrouping;
        }
    }

    private void AddAllPartitions(PossibleGrouping grouping, HashSet<PossibleGrouping> possibleGroupings) {
        for (int i = 0; i < grouping.FriendsInGroup.Length; i++) {
            int[] newFriendsInGroup = (int[]) grouping.FriendsInGroup.Clone();
            newFriendsInGroup[i] = newFriendsInGroup[i] + 1;
            possibleGroupings.Add(new PossibleGrouping(newFriendsInGroup));
        }
        var friendsInGroupWithOneAtTheEnd = grouping.FriendsInGroup.Concat(new[] {1}).ToArray();
        possibleGroupings.Add(new PossibleGrouping(friendsInGroupWithOneAtTheEnd));
    }
}

/// <summary>
/// A possible grouping of friends. E.g.
/// 1 + 1 + 2 + 2 + 4 (10 friends). The array is sorted by the least friends in an group.
/// </summary>
public class PossibleGrouping : IComparable<PossibleGrouping> {
    private readonly int[] friendsInGroup;

    public int[] FriendsInGroup {
        get { return friendsInGroup; }
    }

    private readonly int sum;

    public PossibleGrouping(params int[] friendsInGroup) {
        this.friendsInGroup = friendsInGroup.OrderBy(x => x).ToArray();
        sum = friendsInGroup.Sum();
    }

    public int Sum {
        get { return sum; }
    }

    /// <summary>
    /// determine which group is more desirable. Example:
    /// Consider g1: 1 + 2 + 3 + 4 vs g2: 1 + 1 + 2 + 2 + 4  
    /// Group each sequence by the number of occurrences:
    /// 
    /// group   | g1   | g2
    /// --------|-------------
    /// 1       | 1    | 2
    /// ----------------------
    /// 2       | 1    | 2
    /// ----------------------
    /// 3       | 1    | 0
    /// ----------------------
    /// 4       | 1    | 1
    /// ----------------------
    /// 
    /// Sequence 'g1' should score 'higher' because it has 'less' 'ones' (least desirable) elements. 
    /// 
    /// If both sequence would have same number of 'ones', we'd compare the 'twos'.
    /// 
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public int CompareTo(PossibleGrouping other) {
        var thisGroup = (from n in friendsInGroup group n by n).ToDictionary(x => x.Key,
                                                                             x => x.Count());

        var otherGroup = (from n in other.friendsInGroup group n by n).ToDictionary(x => x.Key,
                                                                                    x => x.Count());

        return WhichGroupIsBetter(thisGroup, otherGroup);
    }

    private int WhichGroupIsBetter(IDictionary<int, int> thisGroup, IDictionary<int, int> otherGroup) {
        int maxNumberOfFriendsInAGroups = Math.Max(thisGroup.Keys.Max(), otherGroup.Keys.Max());

        for (int numberOfFriendsInGroup = 1;
             numberOfFriendsInGroup <= maxNumberOfFriendsInAGroups;
             numberOfFriendsInGroup++) {
            // zero means that the current grouping does not contain a such group with 'numberOfFriendsInGroup'
            // in the example above, e.g. group '3'
            int thisNumberOfGroups = thisGroup.ContainsKey(numberOfFriendsInGroup)
                                         ? thisGroup[numberOfFriendsInGroup]
                                         : 0;
            int otherNumberOfGroups = otherGroup.ContainsKey(numberOfFriendsInGroup)
                                          ? otherGroup[numberOfFriendsInGroup]
                                          : 0;

            int compare = thisNumberOfGroups.CompareTo(otherNumberOfGroups);

            if (compare != 0) {
                // positive score means that the other group has more occurrences. e.g. 'this' group might have 2 groups with each 2 friends,
                // but the other solution might have 3 groups with each 2 friends. It's obvious that (because both solutions must sum up to the same value)
                // this 'solution' must contain a grouping with more than 3 friends which is more desirable.
                return -compare;
            }
        }
        // they must be 'equal' in this case.
        return 0;
    }

    public override string ToString() {
        return string.Join("+", friendsInGroup.Select(x => x.ToString()).ToArray());
    }
}

public class PossibleGroupingComparer : EqualityComparer<PossibleGrouping> {
    public override bool Equals(PossibleGrouping x, PossibleGrouping y) {
        return x.FriendsInGroup.SequenceEqual(y.FriendsInGroup);
    }

    /// <summary>
    /// may not be the best hashcode function. for alternatives look here: http://burtleburtle.net/bob/hash/doobs.html
    /// I got this code from here: http://stackoverflow.com/questions/3404715/c-sharp-hashcode-for-array-of-ints
    /// </summary>
    /// <param name="obj"></param>
    /// <returns></returns>
    public override int GetHashCode(PossibleGrouping obj) {
        var array = obj.FriendsInGroup;

        int hc = obj.FriendsInGroup.Length;
        for (int i = 0; i < array.Length; ++i) {
            hc = unchecked(hc*314159 + array[i]);
        }
        return hc;
    }
} 
```

现在到解决方案：

脑筋急转弯类进行递归。此类中的一个技巧是`PossibleGroupingComparer`在哈希集中使用自定义比较器 ( )。这将确保当我们计算新的分组（例如 1+1+2 与 2+1+1）时，这些分组将被视为相同（我们的集合将只包含每个等效分组的一个表示）。这应该将指数运行时间减少到 O(n^2)。

下一个技巧是可以对结果进行排序，因为我们的`PossibleGroupings`类实现了 IComparable。Compare() 方法的实现使用了上面提到的思想。此方法本质上包含此解决方案中的盐，如果您想对其进行不同的分组，您应该只修改此方法。

我希望您能理解代码，否则请告诉我。我试图让它可读并且不太关心性能。例如，您可以仅在将分组返回给调用者之前对它们进行排序，递归中的排序不会带来太多。

不过有一条评论：一个典型的情况可能是电影院“已经”预订了很多座位，并且不允许“任何”分区。这里需要获取所有分区，然后一一检查是否可以用于当前影院。这行得通，但会花费不必要的 CPU。相反，我们可以使用输入来减少递归次数并提高整体执行时间。也许有人想为此发布解决方案；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:06:51.213

假设我对您的理解正确，您可以递归地执行此操作。

*   对于一个人，唯一的分组是`1`。
*   对`n`人来说，分组是对一组`1`人和剩余的`n-1`人、一组`2`人和剩余的人的所有分组`n-2`，等等。

获得可能的分组列表后，您可以根据您想要的任何标准按“合意性”对它们进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:28:15.157

这是一个使用最快已知算法枚举所有分区的函数

```
 public static List<List<int>> EnumerateAll(int n)
    {
        /* Fastest known algorithim for enumerating partitons
         * (not counting the re-ordering that I added)
         * Based on the Python code from http://homepages.ed.ac.uk/jkellehe/partitions.php
         */
        List<List<int>> lst = new List<List<int>>();
        int[] aa = new int[n + 1];
        List<int> a = new List<int>(aa.ToList<int>());
        List<int> tmp;
        int k = 1;

        a[0] = 0;
        int y = n - 1;

        while (k != 0)
        {
            int x = a[k - 1] + 1;
            k -= 1;
            while (2 * x <= y)
            {
                a[k] = x;
                y -= x;
                k += 1;
            }
            int l = k + 1;
            while (x <= y)
            {
                a[k] = x;
                a[l] = y;

                // copy just the part that we want
                tmp = (new List<int>(a.GetRange(0, k + 2)));

                // insert at the beginning to return partions in the expected order
                lst.Insert(0, tmp);
                x += 1;
                y -= 1;
            }
            a[k] = x + y;
            y = x + y - 1;

            // copy just the part that we want
            tmp = (new List<int>(a.GetRange(0, k + 1)));

            // insert at the beginning to return partions in the expected order
            lst.Insert(0, tmp);
        }

        return lst;
    } 
```

这是一个函数，它将根据您的偏好重新排序返回的分区列表（上图）：

```
 /// <summary>
    /// ReOrders a list of partitons placing those with the smallest groups last
    ///   NOTE: this routine assumes that each partitoning lists the smallest 
    ///   integers *first*.
    /// </summary>
    public static IList<List<int>> ReOrderPartitions(IList<List<int>> source)
    {
        // the count is used in several places
        long totalCount= source.Count;
        long k = 0;     // counter to keep the keys unique

        SortedList<long, List<int>> srt = new SortedList<long, List<int>>(source.Count);

        foreach (List<int> prt in source)
        {
            srt.Add(-(prt[0] * totalCount) + k, prt);
            k++;
        }

        return srt.Values;
    } 
```

最后，这是一个可以从控件事件调用的方法，以调用这些函数并将结果显示在 ListBox 中。（注意：“Partitons”是包含上述函数的类）

```
 private void ListPreferredPartitons(int n, ListBox listOut)
    {
        IList<List<int>> pts = Partitions.EnumerateAll(n);
        pts = Partitions.ReOrderPartitions(pts);

        listOut.Items.Clear();

        foreach (List<int> prt in pts)
        {
            // reverse the list, so that the largest integers will now be first.
            prt.Reverse();
            string lin = "";
            foreach (int k in prt)
            {
                if (lin.Length > 0) lin += ", ";
                lin += k.ToString();
            }
            listOut.Items.Add(lin);
        }
    } 
```

# javascript - String 对象的“instanceof”与“string”字面量的“instanceof”

> ID：10017553
> 
> 赞同：2
> 
> 时间：2012-04-04T18:59:00.313
> 
> 标签：javascript, inheritance, javascript-objects, instanceof, prototypal-inheritance

> **可能重复：**
> [为什么 instanceof 对某些文字返回 false？](https://stackoverflow.com/questions/203739/why-does-instanceof-return-false-for-some-literals)

有谁知道为什么 x 这里不是 String/Object 的实例？

```
var x = "abc",
y = new String("XYZ");

x instanceof String; // False
x instanceof Object; // False
y instanceof String; // True
(x.constructor === y.constructor) //True 
```

[http://jsfiddle.net/pCfWC/6/](http://jsfiddle.net/pCfWC/6/)

# algorithm - 检查一棵树是否是镜像？

> ID：10017555
> 
> 赞同：3
> 
> 时间：2012-04-04T18:59:07.723
> 
> 标签：algorithm, tree

给定一棵巨大且无法放入内存的二叉树，如何检查该树是否为镜像。

我把这个作为面试问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-23T06:33:53.763

如果一棵树是另一棵树的镜像，那么一棵树**的中序遍历**将与另一棵树相反。

因此，只需对第一棵树进行中序遍历，对另一棵树进行反向中序遍历，然后检查所有元素是否相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:31:20.180

当然，我不能完全相信这个答复。我的一些同事帮助提出了一些假设，并在我最初的想法中戳了洞。非常感谢他们！

# 假设

*   我们不能将*整个*树都放在内存中，因此使用递归并不理想。为简单起见，假设我们在内存中最多只能保存两个节点。

*   我们知道*n*，我们树中的总层数。

*   我们可以根据数据所在的字符或行位置对数据执行搜索。

*   磁盘上的数据按深度排序。也就是说，磁盘上的第一个条目是根，接下来的两个是它的孩子，接下来的四个是它的孩子的孩子，依此类推。

*   在某些情况下，数据是完全镜像的，在某些情况下则不是。除非另有说明，与非空白数据交错的空白数据被认为是“可接受的”。

*   只要可以比较值是否相等，我们就可以自由使用我们希望的任何数据类型。对象等效性测试可能并不理想，因此假设我们正在比较原语。

*   “镜像”意味着在根的孩子之间镜像。使用不同的术语，祖父母的左孩子与其右孩子镜像，左孩子（父母）的左孩子与祖父母的右孩子的右孩子镜像。如下图所示；匹配的符号代表我们要检查的镜像。

    ```
     G
          P*         P*
       C1&  C2^   C3^ C4& 
    ```

# 方法

我们知道当我们从磁盘读取时，我们应该期望每个级别上有多少个节点 - 2 ^k的一些倍数。我们可以建立一个双循环来迭代树的总深度，以及每个级别的节点数。在这里面，我们可以简单地比较最外层的值是否相等，如果发现不相等的值则短路。

^(我们可以使用 2 k)的倍数来确定每个外部位置的位置。任何级别的最左边的孩子总是 2 ^k，任何级别的最右边的孩子总是 2 ^(k+1) -1。

**小证明**：1 层最外层节点为 2 和 3；2 ¹ = 2, 2 ^(1+1) -1 = 2 ² -1 = 3。第 2 层最外层的节点是 4 和 7；2 ² = 4, 2 ^(2+1) -1 = 2 ³ -1 = 7。可以将其一直扩展到第 n 种情况。

# 伪代码

```
int k, i;
for(k = 1; k < n; k++) { // Skip root, trivially mirrored
    for(i = 0; i < pow(2, k) / 2; i++) {
        if(node_retrieve(i + pow(2, k)) != node_retrieve(pow(2, (k+1)-i)) {
            return false;
        }
     }
 }
 return true; 
```

# 想法

这类问题是一个很好的面试问题，因为他们很可能想看看你将如何**解决**这个问题。这种方法可能很糟糕，也可能完美无瑕，但雇主会希望你慢慢来，在一张纸或白板上画一些东西，并向他们询问有关如何存储数据、如何读取数据、什么是数据的问题搜索等方面存在限制。

面试官感兴趣的不是编码方面，而是解决问题方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:23:06.743

递归很容易。

```
struct node {
        struct node *left;
        struct node *right;
        int payload;
        };

int is_not_mirror(struct node *one, struct node *two)
{
if (!one && !two) return 0;
if (!one) return 1;
if (!two) return 1;
if (compare(one->payload, two->payload)) return 1;
if (is_not_mirror(one->left, two->right)) return 1;
if (is_not_mirror(one->right, two->left)) return 1;
return 0;
} 
```

# css - 自动处理供应商前缀的 CSS 框架？

> ID：10017560
> 
> 赞同：4
> 
> 时间：2012-04-04T18:59:23.240
> 
> 标签：css, less, sass

我查看了 Blueprint、Less 和 SCSS，但它们似乎都没有做我想要的。我觉得这很难相信，因为处理供应商前缀是编写 CSS 最令人沮丧的部分，所以这似乎是任何编写 CSS 框架的人都应该解决的第一个问题。

我想知道，是否有一个我可以使用的框架（或 rails gem），它允许我编写`border-radius:5px`，然后让我假设它将创建一个具有所有正确供应商前缀的规则？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:05:40.030

实际上，您可以使用 LESS Mixin 很容易地做到这一点 - 基本上您只需编写一次，然后从那里开始，您只需一行即可应用它。像这样：

```
// Border Radius
.border-radius(@radius: 5px) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
} 
```

然后，您只需在需要边界半径的地方执行此单线：

```
.classname {
  .border-radius(5px);
} 
```

如果您还没有准备好 LESS，那么您可以通过[Prefixr](http://prefixr.com/)处理您的代码- 它会为您生成浏览器前缀（然后您必须将代码复制粘贴回您的文件中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:04:59.243

你可以使用它：[http ://sjevsejev.blogspot.com/2012/07/lessjs-function-generates-prefixes-for.html](http://sjevsejev.blogspot.com/2012/07/lessjs-function-generates-prefixes-for.html)

那么使用就足够了：

```
.pf('transition','all 1s ease-in-out');
.pf('border-radius',3px);
.pf('box-shadow','2px 2px 5px 0 rgba(0,0,0,.6)');
.pf('flex', 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-18T03:39:31.327

也许最近发布的供应商前缀存储库的集合`scss`可能`css` [是](https://github.com/scss-utilities/vendor-prefixes)有趣的，以下是从[`border-radius.scss`](https://github.com/scss-utilities/vendor-prefixes/blob/master/border-radius.scss)文件中提取的......

```
@mixin border-radius($value) {
  @include render-vendor-prefixes(
    $property: border-radius,
    $value: $value,
    $vendor-list: (
      -webkit,    // Android 2.1, Chrome 5.0/4.0, iOS 3.2-, Safari 5.0/3.1,
      -moz,       // Firefox 4.0/3.0
    ),
    $prefix: property,
  );
} 
```

使用上面`@mixin`可能看起来像......

```
@import '_scss/modules/vendor-prefixes/lib/map-vendor-prefixes.scss';
@import '_scss/modules/vendor-prefixes/lib/render-vendor-prefixes.scss';

@import '_scss/modules/vendor-prefixes/calc.scss';

.something {
  @include border-radius(10% 30% 50% 70%);
} 
```

...为了完整起见，上述*内容符合*...

```
.something {
  -webkit-border-radius: 10% 30% 50% 70%;
     -moz-border-radius: 10% 30% 50% 70%;
          border-radius: 10% 30% 50% 70%;
} 
```

# c - 更改指针数组数据的地址

> ID：10017561
> 
> 赞同：0
> 
> 时间：2012-04-04T18:59:33.173
> 
> 标签：c

我有一棵树，每个节点都包含一个数组子节点（Node *children_nodes），以及名称（char *node_name）和父节点（Node *parent）。每一个都是动态的。我想从 *children_nodes 数组中删除一个子节点，释放分配给它的名称和子节点的内存（假设我们正在删除一个没有子节点的子节点），并将列表中最后一个子节点的位置移动到该位置我们刚刚删除的那个。如果我想使用它所在的位置，如何在不更改最后一个节点的情况下做到这一点。

示例-我有一个带有三个子节点的节点，我想释放 children_nodes[0] 分配的内存并将 children_nodes[2] 放在那个位置，最好只是让 children_nodes[0] 指向 children_nodes[2] 的节点，然后使 children_nodes[2] 指向任何内容，而不会弄乱节点本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:29:21.130

没有看到一些代码很难确定，但我相信你想要一个`Node** children_nodes`，所以你可以做这样的事情：

```
free(children_nodes[0]);
children_nodes[0] = children_nodes[2];
children_nodes[2] = 0; 
```

# c# - 服务器-客户端连接；我错过了什么？

> ID：10017562
> 
> 赞同：0
> 
> 时间：2012-04-04T18:59:37.520
> 
> 标签：c#, java, client

我有一个 C# 中的工作服务器和一个 Java (Android) 中的工作客户端。它完全有效，但连接本身只是单向的。只有客户端可以向服务器发送数据。我试图进行双向连接，但代码由于未知原因无法正常工作。

我哪里做错了？

**C#- 服务器**

```
public void SendBack(string message, NetworkStream stream)
{
  if (stream.CanWrite)
  {
    byte[] candy = Encoding.ASCII.GetBytes(message + ";");

    stream.Write(candy, 0, candy.Length);
    stream.Flush();

    Console.WriteLine("[SENT] " + message);
  }
  else { Console.WriteLine("ERROR! CANNOT WRITE ON NETWORKSTREAM!"); }
} 
```

**Java-客户端**

```
//Creating the stream in the constructor
bReader = new BufferedReader(new InputStreamReader(gSocket.getInputStream()));

new Thread (new Runnable(){
  public void run() {
    Log.d(TAG, "Started listerner...");
    ListenServer();
  }
}).start();

//The function itself
private void ListenServer(){
  try
  {
    String inputLine = "";
    while (true){
      inputLine = bReader.readLine();
      if (inputLine != null) Log.d(TAG, "Got: " + inputLine);
    }
  }
  catch (IOException e){ Log.d(TAG, "Could not listen to sever!"); }
} 
```

编辑：忘记提及实际问题是什么......我启动服务器，行为像往常一样，客户端可以发送数据，服务器可以解释消息。Hoverwer，如果服务器发送一些东西，客户端什么也不做。我的意思是，它不执行

```
Log.d(TAG, "Got: " + inputLine); 
```

代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:28:55.947

可能是服务器没有发送换行符和/或回车符。`BufferedReader.readLine()`[（链接）](http://docs.oracle.com/javase/1.3/docs/api/java/io/BufferedReader.html#readLine%28%29)期待它。您可以使用传入流构造 StreamWriter，并使用其中一种`WriteLine`方法。

# c# - 使用 C# HttpListener 进行 URL 映射

> ID：10017564
> 
> 赞同：17
> 
> 时间：2012-04-04T18:59:42.747
> 
> 标签：c#, http, url-mapping

在下面的代码中，我正在等待对 8080 端口的任何调用。

```
static void Main()
{
  HttpListener listener = new HttpListener();
  listener.Prefixes.Add("http://*:8080/");
  listener.Start();
  while(isRunning)
  {
     HttpListenerContext ctx = listener.GetContext();
     new Thread(new Worker(ctx).ProcessRequest).Start();
  }
} 
```

是否可以将特定的 URL 模式映射到不同的行为？我想实现一个 REST 风格的服务器，即调用**localhost:8080/person/1**将启动 getPersonH​​andler(int)

```
[Mapping("*:8080/person/$id")]
public void getPersonHandler(int id){...} 
```

`Mapping`语法只是我自己对我所知道的 JAX-RS 库的一厢情愿的类比。我想在 C# 中做同样的事情（桌面 C#，而不是 asp）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T19:29:55.663

不用属性也能得到类似的效果

```
HttpListener listener = new HttpListener();
listener.Prefixes.Add("http://*:8080/");
listener.Start();
while (true)
{
    HttpListenerContext ctx = listener.GetContext();
    ThreadPool.QueueUserWorkItem((_) =>
    {
        string methodName = ctx.Request.Url.Segments[1].Replace("/", "");
        string[] strParams = ctx.Request.Url
                                .Segments
                                .Skip(2)
                                .Select(s=>s.Replace("/",""))
                                .ToArray();

        var method = this.GetType().GetMethod(methodName);
        object[] @params = method.GetParameters()
                            .Select((p, i) => Convert.ChangeType(strParams[i], p.ParameterType))
                            .ToArray();

        object ret = method.Invoke(this, @params);
        string retstr = JsonConvert.SerializeObject(ret);
    }); 
```

用法是：

```
http://localhost:8080/getPersonHandler/333 
```

如果你真的想使用 Attributes 那么

```
HttpListener listener = new HttpListener();
listener.Prefixes.Add("http://*:8080/");
listener.Start();
while (true)
{
    HttpListenerContext ctx = listener.GetContext();
    ThreadPool.QueueUserWorkItem((_) =>
    {
        string methodName = ctx.Request.Url.Segments[1].Replace("/", "");
        string[] strParams = ctx.Request.Url
                                .Segments
                                .Skip(2)
                                .Select(s=>s.Replace("/",""))
                                .ToArray();

        var method = this.GetType()
                            .GetMethods()
                            .Where(mi => mi.GetCustomAttributes(true).Any(attr => attr is Mapping && ((Mapping)attr).Map == methodName))
                            .First();

        object[] @params = method.GetParameters()
                            .Select((p, i) => Convert.ChangeType(strParams[i], p.ParameterType))
                            .ToArray();

        object ret = method.Invoke(this, @params);
        string retstr = JsonConvert.SerializeObject(ret);
    });
} 
```

然后你可以使用 as`http://localhost:8080/Person/333`并且你的定义是

```
class Mapping : Attribute
{
    public string Map;
    public Mapping(string s)
    {
        Map = s;
    }
}

[Mapping("Person")]
public void getPersonHandler(int id)
{
    Console.WriteLine("<<<<" + id);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-29T17:35:20.830

如果您正在使用 .NET 4.0 或更高版本并正在寻找可以插入的预先存在的 REST 服务器解决方案（听起来像您），您可能需要查看[Grapevine](https://github.com/sukona/Grapevine)。您可以使用 NuGet 获取它，并且[项目 wiki](https://github.com/sukona/Grapevine/wiki)有很多示例代码。另外，它是开源的，所以如果你只是想看看它是如何实现的，你可以在那里看到所有的源代码。

您可以通过路径信息（使用正则表达式）和请求方法（GET、POST 等）过滤请求。

我是项目作者，我和你描述的有类似的需求。使用我在这里和其他地方找到的资源，我构建了 Grapevine，这样当我再次需要它时，我的后兜里就有一个解决方案（[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）。

# xpages - 如何在重复控件中获取第 n 个编辑框的值？

> ID：10017565
> 
> 赞同：1
> 
> 时间：2012-04-04T18:59:56.690
> 
> 标签：xpages

我在重复控件中有一个 EditBox 控件。其迭代公式为：

```
return 5; 
```

它成功显示了 4 个编辑框（起始索引设置为 1）。

在 SSJS 中，如何获取第 n 个编辑框的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:48:30.850

您可以在编辑框的 onchange 事件上设置 sessionScope 变量（或任何范围变量），然后在您的 SSJS 中引用 sessionScope 变量。这是一些示例代码，底部仅显示页面上的 sessionScope 变量。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xp:repeat id="repeat1" rows="30" value="#{javascript:5}"
    indexVar="rptIndex">

    <xp:inputText id="inputText1">

    <xp:eventHandler event="onchange" submit="true" refreshMode="complete">
        <xp:this.action>
            <xp:executeScript>
                <xp:this.script><![CDATA[#{javascript:sessionScope['text'+rptIndex] = getComponent("inputText1").getValue()}]]></xp:this.script>
            </xp:executeScript>
        </xp:this.action></xp:eventHandler></xp:inputText>

</xp:repeat>

<xp:table styleClass="debug">
<xp:tr>
<th>Variable Name</th>
<th>Variable Content</th>
</xp:tr>
<xp:repeat id="varRepeat" rows="30" value="#{javascript:sessionScope.keySet();}" var="scopeData">
<xp:tr>
<xp:td>
<xp:text escape="true" id="varName" value="#{javascript:scopeData}" />
</xp:td>
<xp:td>
<xp:text escape="true" id="varValue" value="#{javascript:sessionScope.get(scopeData)}" />
</xp:td>
</xp:tr>
</xp:repeat>
</xp:table> 
</xp:view> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T01:17:38.403

当您将提交添加到 onChange 事件时，您会创建一个相当健谈的应用程序 - 可能会咬到您。设置焦点的解决方案是相当不同的。第一：焦点是客户端操作，所以你需要一个客户端脚本'知道什么是第一个失败的控制。好消息：XPages 向所有未通过服务器端验证的字段添加属性 aria-invalid=true。因此，您可以使用 dojo.onLoad 脚本来查询该脚本并将焦点设置到结果的第一个成员。另请参阅[http://dontpanic82.blogspot.com/2011/07/xpages-styling-invalid-field.html](http://dontpanic82.blogspot.com/2011/07/xpages-styling-invalid-field.html) 查询语法： [http ://dojotoolkit.org/reference-guide/1.7/dojo/query.html](http://dojotoolkit.org/reference-guide/1.7/dojo/query.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:31:08.573

至少可以说，重复处理很有趣。如果您查看 teamroom 模板 mobileThread 自定义控件中的示例，您会看到重复显示回复列表，您还会注意到很多 javascript 伴随着它，例如单击一个按钮运行脚本会运行在重复中的所有按钮上。

如果您正在寻找验证问题，stwissel 的解决方案看起来是最好的。如果这是别的东西，并且在某些时候您只需要任何给定编辑框的值，也许您应该考虑以下内容：

```
var domEl = dojo.byId(' <repeatControlId> ');
var textBoxes = domEl.getElementsByTagName("input");
var certainValue = textBoxes[3].value; 
```

现在 certainValue 包含给定编辑框的值。

还没有尝试过，可能需要一些调整，但我认为总体思路应该可行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:00:56.527

添加了另一条评论，所以我可以添加代码。

进行了快速测试，对我来说效果很好，请参见下面的示例。希望能帮助到你。尝试添加一些打印输出，看看它是否得到了每一位。

```
<xp:repeat id="TestRepeat" rows="100" var="rowData"
    indexVar="commentIndex" first="0" rendered="true">
    <xp:this.value><![CDATA[#{javascript:
        var dataArray = new Array();
        dataArray.push(" Test");
        dataArray.push(" Test");
        dataArray.push(" Test");
        dataArray.push(" Test");
        dataArray.push(" Test");
        return dataArray;
    }]]></xp:this.value>

    <xp:panel>
        <xp:label value="Test"></xp:label>
        <xp:inputText id="inputText1" value="Test" defaultValue="Test">
        </xp:inputText>
        <xp:br></xp:br>
    </xp:panel>

</xp:repeat>

<xp:button value="Test" id="button1">
    <xp:eventHandler event="onclick" submit="false">
        <xp:this.script>
            <xp:executeClientScript>
                <xp:this.script><![CDATA[
                var domEl = dojo.byId('#{id:TestRepeat}');
                var textBoxes = domEl.getElementsByTagName("input");
                alert( "Value 1: " + textBoxes[0].value);
                ]]></xp:this.script>
            </xp:executeClientScript>
        </xp:this.script>
    </xp:eventHandler>
</xp:button> 
```

# django - 可以更改 Django 信号的顺序吗？

> ID：10017567
> 
> 赞同：9
> 
> 时间：2012-04-04T19:00:04.567
> 
> 标签：django, signals, django-signals

我在用户注册时发送了 2 个信号，socialauth_registered 和 post_save。我希望 socialauth_registered 在 post_save 之前，因为它会影响 post_save 触发的功能。

这可能吗？（如果是，如何？！）

我不确定究竟是什么相关的，但我有：

```
from django.contrib.auth.models import User
from social_auth.signals import socialauth_registered, pre_update
from django.db.models.signals import post_save

<ALL OF MY MODELS>

def create_user_profile(sender, instance, created, **kwargs):
    do some stuff

def create_social_profile(sender, user, response, details, **kwargs):
    do other stuff

socialauth_registered.connect(create_social_profile, sender=None)
post_save.connect(create_user_profile, sender=User) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-30T15:10:30.247

不，您不能更改信号的执行顺序。

信号优先级已经提出，但核心开发者表示不会实现这个功能：

[https://code.djangoproject.com/ticket/16547](https://code.djangoproject.com/ticket/16547)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T19:11:27.317

我不肯定，但我会说这是值得怀疑的。更重要的是，信号背后的想法是它们应该是原子的。信号处理程序应该响应信号而不应该关心其他信号。依赖两个不相关信号的顺序（例如，显然您可以依赖 pre_save 和 post_save 的顺序）通常是不安全的。因此，即使我对您的问题没有明确的答案，我也会提供您应该仔细考虑设计的建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-11T19:33:15.527

我知道这是一个非常古老的问题，但令我惊讶的是，我发现没有任何与处理程序订购的解决方法相关的东西。所以这是实现优先级的调度程序的子类。

```
from django.dispatch import Signal as BaseSignal
from django.dispatch.dispatcher import _make_id

class Signal(BaseSignal):

    def connect(self, receiver, sender=None, weak=True, dispatch_uid=None, priority=50):
        if dispatch_uid is None:
            dispatch_uid = _make_id(receiver)

        inner_uid = '{0}{1}'.format(priority, dispatch_uid)
        super(Signal, self).connect(receiver, sender=sender, weak=weak, dispatch_uid=inner_uid)
        self.receivers.sort() 
```

虽然这对第三方应用程序没有帮助，但您可以使用此类创建自己的信号，并将它们附加到内置信号，从而允许您在自己的应用程序中订购处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:14:51.100

您是否考虑过使用一种调用 create_social_profile 和 create_user_profile 的信号。也许您可以将此信号附加到 post_save？

# jquery - 使用 scrollTop() 动画的 jQuery div 将内容向下推送

> ID：10017568
> 
> 赞同：0
> 
> 时间：2012-04-04T19:00:14.660
> 
> 标签：jquery, css

我有一个带有图像和链接的 div - 它会在用户屏幕的一侧弹出，当他们向下滚动时，它会使用 scrollTop() 向下和向上跟随它们。但是，在较低分辨率下，图像与内容重叠，它会将内容向下推。我希望它悬停在文本上。

```
$(window).scroll(function() {
    $('#imgHolder').stop().animate({
        "marginTop": ($(window).scrollTop() + 70) + "px"
    }, "slow" );
}); 
```

[http://www.solarkit2go.com](http://www.solarkit2go.com)查看它的实际应用

我的问题是，为什么无法将鼠标悬停在文本上？我已经为 div 设置了 z 索引。此外，任何有关解决此问题的建议将不胜感激。

# actionscript-3 - 你能用 LZMA 压缩 AMF 对象吗？

> ID：10017570
> 
> 赞同：0
> 
> 时间：2012-04-04T19:00:51.810
> 
> 标签：actionscript-3, amf, lzma

我知道 Flash 11 原生支持处理 LZMA 压缩 swfs，有没有办法将 LZMA 压缩与 AMF 对象一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:13:39.787

您可以使用[deflate()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#deflate%28%29)和[inflate()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#inflate%28%29)来获得通用压缩和解压缩。如果你想用它来获得 LZMA 格式，你需要：

> 根据压缩格式的规范创建一个 ByteArray，包括适当的元数据以及使用 deflate 格式获得的压缩数据。

基本上，您必须学习结构，自己编写所有标题信息，然后使用`deflate()`. 要解压缩，您需要读取标题信息（`readInt(), readShort`等），然后使用`inflate()`其余部分来获取您的日期。

# html - HTML Canvas：如何解决用户交互和绘制事件之间的延迟？

> ID：10017571
> 
> 赞同：1
> 
> 时间：2012-04-04T19:00:57.913
> 
> 标签：html, canvas, buffer

我正在开发一款游戏，它允许玩家点击一张卡片并以任意方向将其拖过屏幕。任何时候在 800x800 的画布上总共有 64 张 100x80 重叠的卡片，每张卡片都是程序绘制。正如你们中的一些人可能怀疑的那样，canvas 不喜欢为每一个动作重新绘制整个画布。为了解决这个问题，我使用缓冲画布来绘制卡片，然后尝试使用`drawImage()`. 为了确保没有绘图堆积，我清除了与我计划`drawImage()`使用`clearRect()`.

我遇到的问题是，因为用于`clearRect()`和的（x，y）坐标`drawImage()`来自鼠标的位置，如果用户移动得太快，坐标将从`drawImage()`上次执行的时间到时间`clearRect()`不同在下一个绘制序列期间调用。结果是最后一个序列的剩余抽牌 - 与拖动卡片的速度成正比。

我尝试从 中维护 (x,y) 坐标，并在下一个序列中`drawImage()`使用这些坐标（而不是当前鼠标位置） 。`clearRect()`然而，现在不是显示残余绘制，而是残余我们有残余清除（擦除）。

关于如何解决这个问题的想法？

注意：我的动画速率是使用`RequestAnimationFrame`而不是处理的`SetInterval()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:26:14.627

假设您的画布在拖放操作期间是静态的，那么获得良好性能提升的一个非常简单的方法就是缓存渲染。

换句话说，当拖放操作开始时，将当前画布保存到另一个画布中。停止所有渲染，除了与拖动卡片有关的渲染。现在，每当您需要重新绘制时，只需从您的复制画布重新绘制即可。由于您基本上只是从一个复制到另一个，因此应该非常快。

在每个处理周期中，您将获取拖动卡片的当前位置，用副本中的数据填充该位置，然后在新位置重新绘制拖动卡片。

您可以尝试的其他方法是使用某种占位符进行拖动。例如，考虑使用在拖动时显示的相同大小的 DIV。这应该具有在拖动时不需要触摸画布的好处，因此也可以为它运行更好的性能。

# ime - 为什么我的消息循环中有这么多 WM_INPUTLANGCHANGEREQUEST？

> ID：10017573
> 
> 赞同：1
> 
> 时间：2012-04-04T19:01:01.153
> 
> 标签：ime

在sonme环境中，我的程序的消息循环已满，依次为 WM_INPUTLANGCHANGEREQUEST 、 WM_INPUTLANGCHANGE 和 WM_IME_NOTIFY 。

我真的不知道 WM_INPUTLANGCHANGEREQUEST 是从哪里发布的。它使 api PeekMessage(..., PM_REMOVE) 始终返回非零，因此我无法在空闲时间执行我的逻辑。

当它发生时，在一段时间后最大化和最小化窗口。消息循环变得清晰。一切顺利。或者仍然忙于处理 WM_INPUTLANGCHANGEREQUEST 、 WM_INPUTLANGCHANGE 和 WM_IME_NOTIFY 循环。

当程序启动开始时 ime 发生变化时，可能会发生这种情况。

求救！Orz~~~~~。对不起我可怜的英语。

# ajax - HTML5 音频跨浏览器兼容性

> ID：10017574
> 
> 赞同：3
> 
> 时间：2012-04-04T19:01:02.937
> 
> 标签：ajax, html, audio, cross-browser

我在一家公司工作，正在尝试制作一个新的演示页面。我很想将页面简化为无法正常工作的页面，但不幸的是，它与我服务器上的各种脚本以及必须转到相同域名的 AJAX 请求相关联。但是，我将尽可能地描述正在发生的事情。

本质上，我的会话代码几乎按预期工作。这不是问题所在。问题是单击“说出来”按钮后播放的音频在 Chrome 中按预期工作，但 firefox 仅播放第一个音频请求，即使在随后的具有不同文本的请求之后也是如此，并且在 Internet Explorer 中没有播放任何内容。相关代码都在 head 部分，其中一组三个函数控制所有正在发生的事情。当点击“Say It”按钮时调用 formSubmit()，一旦加载音频就会调用 onAudioLoad()，而 limitText() 确实限制了人们可以输入的文本数量。

因此 formSumbmit() 向我的服务器脚本发送一个 AJAX 请求，该脚本返回以下两种情况之一：

1) 带有正确 src 属性的源元素的 HTML5 音频标签，或 2) 表示会话已过期的 p 元素。

我只是想让音频在没有可怕回声的情况下播放（这可能是也可能不是由实际的 mp3/ogg 转换软件引起的），并让它在所有浏览器上按预期工作。

onAudioLoad 发送删除音频的请求，以避免人们太容易窃取我们的产品：D

预期行为：

演示文本区域中存在的任何文本都将发送到服务器端进行合成，然后通过客户端的扬声器播放音频。

如果您有任何进一步的问题，我会定期回来查看。

这是演示的网址：

[http://www.cepstral.com/demos/temp/cepstral_tts_demo.php](http://www.cepstral.com/demos/temp/cepstral_tts_demo.php)

感谢您的任何帮助。

终极问题：

为什么这在 Chrome 中按预期工作，但在 Firefox 11 和 IE9 中却没有？

在 Firefox 中，它只会播放第一个音频请求。

在 IE9 中不播放音频。

我知道音频永远不会安全。我们只是想让普通用户更难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:03:55.733

在试图找出发生了什么并在聊天（[成绩单](https://chat.stackoverflow.com/transcript/9694)）中取得联系之后，我得出了以下结论：这是一个缓存问题。

当尝试更改 FF 中的文本并请求新的声音文件时，它仍会播放旧声音。通过检查请求和响应，看起来您总是使用相同的文件名（对于音频文件）进行响应，尽管声音本身不同。

当下载该声音文件或在新选项卡中打开它并在没有缓存的情况下刷新它时，它会播放正确的声音（带有新文本），所以我很确定缓存。

您应该找到一种方法来为不同的文本返回唯一的文件名，以防止浏览器播放缓存的版本。

在我的机器上的 IE 上测试它时也是如此。

**由 OP 编辑**

> 想要补充一点，它无法在我的 IE 上运行的原因似乎是我使用的是 Windows 7 N。在 IE9 的发行说明中指出，Windows 7 N 需要特殊更新才能播放 HTML5 视频。他们没有提到 HTML5 音频，但我认为这是问题所在。

# haskell - 使用终止条件和不同的迭代步骤在 Haskell 中进行优化迭代

> ID：10017576
> 
> 赞同：0
> 
> 时间：2012-04-04T19:01:07.080
> 
> 标签：haskell

我正在尝试在 Haskell 中编写一个简单的迭代算法，但我正在努力寻找优雅和速度方面的最佳解决方案。

我有一个算法，需要在多次迭代中对状态应用操作，直到达到某个停止条件，使用任意函数记录状态。我已经知道如何通过定义像 iterateM 这样的函数来实现这样的方案。

但在这种情况下，每个步骤执行的操作取决于状态，归结为检查“步骤类型”条件以决定下一个迭代类型，然后在接下来的 10 次迭代中执行操作 A，或者执行操作 B在再次检查条件之前进行下一次迭代。

我可以用命令式的方式将它写成：

```
c=0
while True:
    if c>0:
        x=iterateByA(x)
        c=c-1
    else:
        if stepCondition(x)==0:
            x=iterateByA(x)
            c=9
        else:
           x=iterateByB(x)
    observeState(x)
    if stopCondition(x):
        break 
```

当然这可以在 Haskell 中复制，但我宁愿做一些更优雅的事情。

我的想法是让迭代使用函数列表来弹出并应用于状态，并在列表为空时使用新列表（基于“步骤类型”条件）更新该列表。我有点担心这会效率低下。会这样做并使用类似的东西

```
take 10 (repeat iterateByA) 
```

将所有列表分配等编译为仅使用计数器的紧密循环，例如上面的命令式？

还有另一种简洁有效的方法吗？

如果它有助于自适应随机模拟算法，迭代步骤会更新状态，并且步骤条件（决定最佳模拟方案）是当前状态的函数。实际上有 3 种不同的迭代方案，但我认为 2 的示例更容易解释。

（我不确定这是否重要，但我可能还应该指出，在 haskell 中， iterateByX 函数是一元的，因为它们使用随机数。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:31:19.663

直接翻译看起来还不错。

```
loop c x
    | stopCondition x = observe x
    | c > 0           = observe x >> iterateByA x >>= loop (c-1)
    | stepCondition x = observe x >> iterateByA x >>= loop 9
    | otherwise       = observe x >> iterateByB x >>= loop c 
```

`observe`如果您不喜欢，可以通过各种技巧来消除重复。

不过，您可能应该重新考虑一下。这是一个非常必要的方法；可能可以做一些更好的事情（但很难从你在这里给出的几个细节中说出来）。

# javascript - 正则表达式返回所有出现，我只需要第一个

> ID：10017577
> 
> 赞同：0
> 
> 时间：2012-04-04T19:01:08.847
> 
> 标签：javascript, regex, node.js

我不知道为什么这会返回`/Most recent instantaneous value: ([^ ]+) /`我只需要第一个匹配项的字符串的两次出现。

```
var http = require("http");

var options = {
 host: 'waterdata.usgs.gov',
 port: 80,
 path: '/ga/nwis/uv?cb_72036=on&cb_00062=on&format=gif_default&period=1&site_no=02334400'
};

function extract (body, cb) {
 if(!body) 
    return;

var matches=body.match(/Most recent instantaneous value: ([^ ]+) /);
 if(matches)
    cb(matches[1]);
}

http.get(options, function(res) {
 res.setEncoding('utf8');
 res.on('data', function (chunk) {
    extract(chunk, function(v){ console.log(v); });
 });
}).on('error', function(e) {
 console.log('problem with request: ' + e.message);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:11:21.697

'data' 事件被触发了很多次。

您可以通过将最后一部分更改为：

```
http.get(options, function(res) {
    var responseText = '';
    res.setEncoding('utf8');
    res.on('data', function(chunk) {
         responseText += chunk;
    });
    res.on('end', function() {
         extract(responseText, console.log);
    });
}).on('error', function(e) {
     console.log('problem with request: ' + e.message);
}); 
```

# maven - Maven中这个标签的定义是什么：

> ID：10017583
> 
> 赞同：0
> 
> 时间：2012-04-04T19:01:25.680
> 
> 标签：maven

我在 Maven 中有以下属性，但我找不到有关它的任何信息：

```
<properties>
    <!-- development mode (exclude in production) -->
    <exclude.bootstrap>true</exclude.bootstrap>
</propertes/> 
```

感谢您为我指出正确的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:33:37.273

我以前从未见过这样的事情。恕我直言，这只是您自己（或 POM 的作者）的常规属性，可能在此 POM 或其模块的某处使用。有一个选项是这是一个特殊属性，可能与一些已声明的插件有关，但是 - 正如我所说 - 我没有使用过使用它的插件。

# c# - 从 .NET 互操作传递 vb6 对象类型参数 byref 导致类型不匹配

> ID：10017584
> 
> 赞同：0
> 
> 时间：2012-04-04T19:01:27.487
> 
> 标签：c#, vb6, interop

我对 .NET 中的 Com Plus Interop 服务了解不多——我让 .NET 做所有的脏活，我祈祷它会工作。好吧，现在我被困住了。

我在我的 VS 2010 C# 程序中引用了一个用 VB6 编译的 COM DLL。这是我正在创建的发票。

我实例化一个对象：

```
UIInvoice Invoice = new CUIInvoice(); 
```

然后我设置了一些发票标题属性：

```
Invoice.set_InvoiceType("VO");
Invoice.set_InvoiceTypeID(2); 
```

现在，我想创建一些发票明细行，我通过调用发票子对象的 add 方法来实现：

```
Invoice.InvoiceDetails.Add("StringParam1", "StringParam2", Invoice); 
```

函数调用的第三个参数在我的 VB6 Add 函数中定义为：

```
ByRef Parent As Object 
```

当我运行我的 .NET 程序时，当我点击 Add 行时出现“类型不匹配”错误。

任何人都可以用简单的术语提出一种我可以让它工作的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:59:04.920

My recommendation would be to not fool around with COM, but migrate the VB6 code to Visual Basic.NET. You'll have much less problems marshalling objects back and forth with C#. If this object is shared with other legacy applications, you may be able to create a COM wrapper that maintains your legacy compatibility as well. Obviously you need to weigh this against your business requirements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:47:04.817

如果您拥有 VB6 源代码，那么我建议将 Add 的定义更改为 ByVal 而不是 ByRef。几乎没有理由在 VB6 中使用 ByRef 对象引用，并且从我从您的代码中收集到的一点点，您不需要在域对象中关联 paranet/child 关系。

# javascript - Javascript - 将变量参数传递给函数

> ID：10017589
> 
> 赞同：2
> 
> 时间：2012-04-04T19:01:54.480
> 
> 标签：javascript, parameters, parameter-passing, optional-parameters

我希望能够创建两个函数，BaseFunction 和 CallbackFunction，其中 BaseFunction 接受一组可变参数，如下所示：

```
BaseFunction(arg1, arg2, ....)
{
    //Call the Callback function here
} 
```

和回调函数接收相同的参数：

```
CallbackFunction(value, arg1, arg2, ...)
{

} 
```

如何将参数从基函数传递给回调函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T19:06:10.853

用于[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)调用带有参数数组的函数。

```
BaseFunction(arg1, arg2, ....)
{
    // converts arguments to real array
    var args = Array.prototype.slice.call(arguments);
    var value = 2;  // the "value" param of callback
    args.unshift(value); // add value to the array with the others
    CallbackFunction.apply(null, args); // call the function
} 
```

演示：http: [//jsfiddle.net/pYUfG/](http://jsfiddle.net/pYUfG/)

有关该`arguments`值的更多信息，请查看[mozilla 的文档](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:06:21.417

传递任意数量的参数：

```
function BaseFunction() {
     CallbackFunction.apply( {}, Array.prototype.slice.call( arguments ) );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:04:47.393

这种伎俩*：*

```
BaseFunction(arg1, arg2, ....)
{
  CallbackFunction(value, arguments);
} 
```

但是`CallbackFunction`需要接受数组：

```
CallbackFunction(value, argsArray)
{
  //...
} 
```

# html - 以 SO 对收件箱链接的方式突出显示网页的一部分

> ID：10017592
> 
> 赞同：2
> 
> 时间：2012-04-04T19:02:19.967
> 
> 标签：html, css

我想为网页的一部分设置淡入/淡出突出显示颜色，该部分跳转到以下格式的链接`<a href="sectiongoto">Link</a>`，其中**sectiongoto**标识名称/ID 元素。

这与单击指示您有新消息的 Stack Overflow 收件箱链接的方式相同。当您导航/跳转到相关帖子时，帖子的背景会以橙色色调淡入，然后淡出。

如何在我目前正在开发的网站上实现这种效果？我使用 Firebug 查看了 SO 页面的源代码，但没有看到任何链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:53:40.167

您可能正在寻找 :target 伪类

我还没有看过 SO 脚本，但我相当肯定淡入淡出是 JavaScript 的事情。它可以通过 CSS 过渡来完成，但这通常用于诸如悬停/焦点的淡入和淡出颜色之类的事情。

[http://www.w3.org/TR/selectors/#target-pseudo](http://www.w3.org/TR/selectors/#target-pseudo)

[http://caniuse.com/#search=target](http://caniuse.com/#search=target)

假设您有这样的示例标记

```
<ul>
  <li><a href="#target1">Go To 1</a></li>
  <li><a href="#target2">Go To 2</a></li>
</ul>
<div id="target1"><!--Your HTML Here --></div>
<div id="target2"><!--Your HTML Here --></div> 
```

然后你想要这样的 CSS

```
div:target { background-color:orange; } 
```

这样当您的用户单击列表中的链接时，您的 url 将采用哈希码 #target1 或 #target2，并且页面中适用的目标现在具有橙色背景色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:02:56.557

所以..您需要查看的是在 URL中使用[片段标识符的概念。](http://en.wikipedia.org/wiki/Fragment_identifier)

> **维基百科条目的摘录**
> [*强调是我的]
> 
> ...片段标识符是一个短字符串，它**指的是从属于另一个**主要资源的资源。主要资源由统一资源标识符 (URI) 标识，**片段标识符指向从属资源**。

我更喜欢称它为 URL 哈希标签，因为在 JavaScript 中用于检索它们的方法是
`window.location.hash`. 随心所欲地称呼它-这是解释：

让我们以我的答案的 URL 为例：
[啊哈！但是在发布之前我是如何获得 URL 的？;)]

`https://stackoverflow.com/questions/10017592/highlighting-a-section-of-a-web-page-the-way-so-does-with-inbox-links/10036643#10036643`

所以哈希值`#10036643`在 URL 的末尾。您可以通过检查`window.location.hash`变量来获得该值。可以使用相同的语法将元素添加到哈希列表 -
`window.location.hash += "#more_info"`

可以轻松创建多个键值对来存储更多信息：
`http://foobar.com/#one=1#two=2#three=3`

`window.location.hash`现在将给我们： `#one=1#two=2#three=3`
从那里我们可以简单地使用以字符作为分隔符的[`.split()`](http://www.tizag.com/javascriptT/javascript-string-split.php)函数。`#`那应该给你这样的东西：

```
["", "one=1", "two=2", "three=3"] 
```

从数组中弹出第一个空元素，然后对于每个键/值对，您可以做一个额外的`.split('=')`或者干脆不使用键作为值，只需要像这样的哈希值：
`http://foobar.com/post/how-to/#COMMENT_ID`

## 好的，

现在我们知道如何将信息嵌入到 URL 中，我们可以开始解析它了。为了这个例子，我们假设一个简单的 HTML 结构像这样 -

```
...
<body>
  <div>
    Page Header
  </div>
  <div class="blog_post">
    An interesting section of content.
    <div class="comment cid0" ></div>
  </div>
  <div class="blog_post">
    More fantastic information (and a special offer).
    <div class="comment cid0" ></div>
    <div class="comment cid1" ></div>
  </div>
  <div>
    Page Footer
  </div>
</body>
... 
```

鉴于此 URL： `http://foobar.com/post/how-to/#cid1`
您可以在函数中使用一些 JavaScript`document.ready`来控制在哪里绘制焦点 -

```
$(function(){
  // Extract comment id from URL
  var targetElementId = window.location.hash.split("#")[1]; // This gives us 456
  var targetElement = $(".comment ."+targetElementId);
  var targetElementOffset = targetElement.offset(); 
  $('body').scrollTop(targetElementOffset.top);

  // Insert highlight functionality here
}); 
```

关于突出显示，我认为[Kerian 的回答](https://stackoverflow.com/a/10018294/558021)几乎涵盖了它 - 您需要使用一些依赖于浏览器的功能，例如[CSS Transitions](https://developer.mozilla.org/en/CSS/CSS_transitions)。
您也许还可以摆脱一些替代方案-您可以使用这些建议来激发您的想象力-

*   *在该元素的所有内容后面*放置一个重复的 1x1px 略微透明的颜色，并`.fadeOut()`在一定延迟后简单地使用该功能将其隐藏。

*   动画背景图像`background-position`

*   也许通过回调循环通过一些预定义`background-color`的属性`setInterval`

# python - 线程中的 Python Tkinter 未处理异常由

> ID：10017593
> 
> 赞同：1
> 
> 时间：2012-04-04T19:02:25.413
> 
> 标签：python, multithreading, tkinter

我正在使用 OSX 10.6.8、Python 2.7.2 和 Tkinter 8.5 版，我昨天清理了安装的 Python、Tkinter 和 IDLE，清理了早期安装的 Python 3.2。我正在研究麻省理工学院 Open CourseWare 中的“RSS 提要过滤器”问题集（不是为了学分），它包括几个我没有编写和不理解的模块，其中一个模块（来自 news_gui 的 Popup 类模块）正在抛出一个我不知道如何调试的未处理异常。

```
# 6.00 Problem Set 5
# RSS Feed Filter

import pdb
#pdb.set_trace()

import feedparser
import string
import time
from project_util import translate_html
from news_gui import Popup

#################################
########## CODE OMITTED #########
#################################

import thread

def main_thread(p):
    # A sample trigger list - you'll replace
    # this with something more configurable in Problem 11
    t1 = SubjectTrigger("Obama")
    t2 = SummaryTrigger("MIT")
    t3 = PhraseTrigger("Supreme Court")
    t4 = OrTrigger(t2, t3)
    triggerlist = [t1, t4]

    # TODO: Problem 11
    # After implementing readTriggerConfig, uncomment this line 
    #triggerlist = readTriggerConfig("triggers.txt")

    guidShown = []

    while True:
        print "Polling..."

        # Get stories from Google's Top Stories RSS news feed
        stories = process("http://news.google.com/?output=rss")
        # Get stories from Yahoo's Top Stories RSS news feed
        stories.extend(process("http://rss.news.yahoo.com/rss/topstories"))

        # Only select stories we're interested in
        stories = filter_stories(stories, triggerlist)

        # Don't print a story if we have already printed it before
        newstories = []
        for story in stories:
            if story.get_guid() not in guidShown:
                newstories.append(story)

        for story in newstories:
            guidShown.append(story.get_guid())
            p.newWindow(story)

        print "Sleeping..."
        time.sleep(SLEEPTIME)

SLEEPTIME = 60 #seconds -- how often we poll
if __name__ == '__main__':
    print '1'
    p = Popup()
    print '2'
    thread.start_new_thread(main_thread, (p,))
    print '3'
    p.start()
    print '4' 
```

p.start() 行（倒数第二个）正在从 news_gui 模块调用 Popup，代码如下：

```
import Tkinter
import time

print help(Tkinter.Tk)

#root = Tk()
#root.withdraw()

import pdb

# The Popup class
class Popup:
    def __init__(self):
        print 'Popup init'

        self.root = Tkinter.Tk()
        self.root.withdraw()

        """
    self.root.mainloop()
        def drawALot():
            self.root = Tk()
            self.root.withdraw()
            self.root.mainloop()
        thread.start_new_thread(drawALot, ())
    """
    def start(self):
        print 'Popup start'
        pdb.set_trace()
        self.root.mainloop()

    def _makeTheWindow(self, item):
        """
        Private method that does the actual window drawing
        """
        print 'Popup _makeTheWindow'
        root = Tkinter.Toplevel()
        root.wm_title("News Alert")

        w = root.winfo_screenwidth()/20
        h = root.winfo_screenheight()/4

        title = Tkinter.Text(root, padx=5, pady=5, height=3, wrap=Tkinter.WORD, bg="white")
        title.tag_config("title", foreground="black", font=("helvetica", 12, "bold"))
        title.tag_config("subject", foreground="black", font=("helvetica", 12, "bold"))
        title.insert(Tkinter.INSERT, "Title: %s" % item.get_title(), "title")
        title.insert(Tkinter.INSERT, "\nSubject: ", "subject")
        title.insert(Tkinter.INSERT, item.get_subject().rstrip(), "subject")    

        title.config(state=Tkinter.DISABLED, relief = Tkinter.FLAT)
        title.grid(sticky=Tkinter.W+Tkinter.E)

        print '_makeTheWindow .5'

        summary = Tkinter.Text(root, padx=10, pady=5, height=15, wrap=Tkinter.WORD, bg="white")
        summary.tag_config("text", foreground="black", font=("helvetica", 12))
        summary.insert(Tkinter.INSERT, item.get_summary().lstrip(), "text")

        summary.config(state=Tkinter.DISABLED, relief = Tkinter.FLAT)
        summary.grid(sticky=Tkinter.W+Tkinter.E)

        link = Tkinter.Text(root, padx=5, pady=5, height=4, bg="white")
        link.tag_config("url", foreground="blue", font=("helvetica", 10, "bold"))
        link.insert(Tkinter.INSERT, item.get_link(), "url")

        link.config(state=Tkinter.DISABLED, relief=Tkinter.FLAT)
        link.grid(sticky=Tkinter.W+Tkinter.E)

        print '_makeTheWindow end'

    def newWindow(self, item):
        """
        Displays a popup with the contents of the NewsStory newsitem
        """
        print 'Popup newWindow'
        self.root.after(0, self._makeTheWindow, item) 
```

当我在启用 pdb 的情况下运行时，这是我的输出：

```
None
1
Popup init
2
3Polling...

Popup start
> /Users/**********/Desktop/Learn/CS Stuffs/6-00sc-spring-2011/6-00sc-spring-2011/contents/unit-2/lecture-12-introduction-to-simulation-and-random-walks/ps5/news_gui.py(31)start()
-> self.root.mainloop()
(Pdb) s
--Call--Unhandled exception in thread started by 
<function main_thread at 0x1026ed848>>
 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py(1015)mainloop()
-> def mainloop(self, n=0):
(Pdb) s
> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py(1017)mainloop()
-> self.tk.mainloop(n)
(Pdb) s 
```

然后它挂起。我可以说这与线程和 Tkinter 有关，但我不知道下一步该做什么。

编辑：刚刚在 Windows 7 虚拟机上安装了 Python 2.7.2，问题也发生在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:31:34.273

我找到了一些解决方案，尽管我无法谈论它的整体适用性。它可能会帮助其他类似泡菜的人，但如果有更多知识渊博的人可以加入，那也会有所帮助。

[我从http://tkinter.unpythonic.net/wiki/mtTkinter](http://tkinter.unpythonic.net/wiki/mtTkinter)下载了 mtTkinter 。它说“修改后的代码拦截线程外的 Tkinter 调用，并通过一个队列对它们进行编组，该队列由主循环中定期运行的 'after' 事件读取。”。

不知道具体如何，但它解决了问题。

# symfony - 将 Chosen JQuery 插件与 Symfony2 SonataAdminBundle 集成

> ID：10017601
> 
> 赞同：1
> 
> 时间：2012-04-04T19:03:19.063
> 
> 标签：symfony, symfony-sonata, jquery-chosen

我正在使用 SonataAdminBundle 2.0 版和 Symfony2 2.0.11 版

我的实体有几个 OneToMany 关系，我想通过使用[Chosen JQuery plugin](http://harvesthq.github.com/chosen/)使选择更容易。

这是实体定义：

```
class Merchant
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     * @Gedmo\Translatable
     */
    private $name;

    /**
     * @ORM\ManyToMany(targetEntity="Category", inversedBy="merchants")
     */
    public $categories;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="merchants")
     */
    protected $primaryCategory;

...
} 
```

这是一个示例管理代码：

```
$formMapper
        ->add('name')
        ->add('primaryCategory', 'sonata_type_model', array('attr' => array('class' => 'chzn-select')))
        ->add('categories', 'sonata_type_model', array('expanded' => false, 'multiple' => true, 'attr' => array('class' => 'chzn-select'))) 
```

我已经确认在页面中加载了 selected.css 和 selected.js。但我没有看到正在加载的相应精灵。我也没有看到任何“选择”的魔法。

我在这里错过了什么吗？如何正确地将 Chosen 与 SonataAdmin 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:26:21.787

它起作用了，我忘记用 $().ready() 上的选择来初始化选择选项

这是代码：

```
 $().ready(function () {
    $('select.chzn-select').chosen();
...
... 
```

现在它来得很整齐。

# apache - 如何防止 Google 抓取 UserDir 网址（但不是真正的域）？

> ID：10017604
> 
> 赞同：0
> 
> 时间：2012-04-04T19:03:29.863
> 
> 标签：apache, .htaccess, seo

我们有客户在他们的真实域上线之前在 UserDir URL 上构建他们的网站。UserDir URL 始终采用以下格式：

[http://1.2.3.4/~johndoe](http://1.2.3.4/~johndoe)

有时，Google 会抓取这些 UserDir 网址，即使该网站在[http://johndoe.com上运行，临时网站也会显示在结果中](http://johndoe.com)

那么，一旦客户端在[http://johndoe.com](http://johndoe.com)上运行，**我该如何阻止 Google 抓取 UserDir 地址**？

（当然，我需要谷歌来抓取真实的域名，因为 SEO 对我们的客户很重要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:30:09.367

为此，我使用规范标签。如果您将规范标签放在 index.html 文件中，如下所示：

```
<link rel="canonical" href="http://johndoe.com/" /> 
```

然后，当 Googlebot 在[http://1.2.3.4/~johndoe](http://1.2.3.4/~johndoe)找到它时，它会知道它是[http://johndoe.com/](http://johndoe.com/)的副本，并且 Google 会索引正确的那个。Googlebot 在抓取真实网站时会看到相同的标签，并且自引用规范没有问题。

# javascript - 固定 div 在网页上的位置

> ID：10017606
> 
> 赞同：0
> 
> 时间：2012-04-04T19:03:41.527
> 
> 标签：javascript, css, css-position

我有一个位置已固定的 div。一切都很好，直到重新调整窗口大小。在重新调整大小时，当我们滚动到网页的最右侧时，固定的 div 仍然保留在屏幕的最左端。我希望它与窗口一起向左滚动，但不与窗口一起向下滚动。

如果我不清楚表达我的怀疑。您可以在[这里进行现场演示](http://compare.buyhatke.com)。

搜索任何产品说`Apple Ipod Touch`那里。显示结果后，调整窗口大小并滚动到最右侧部分。

任何人都可以建议一些 CSS 或 Javascript 来解决相同的问题。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:23:56.323

我会重组您的布局并删除固定位置。例如像这样的东西。显然，这与您的代码不完全一样。但概念是一样的。如果您的 div 控件与结果和历史记录位于同一容器内，则它应该随之移动。

```
#wrapper {
width:960px;
margin:0 auto 0 auto;
}

#left-col,
#right-col {
width:100px;
float:left;
}

#mid-col {
width:710px;
float:left;
}

<!-- holds your column containers -->
<div id="wrapper">

<!-- your control -->
<div id="left-col"> 
</div>

<!-- your search results -->
<div id="mid-col"> 
</div>

<!-- your history -->
<div id="right-col"> 
</div>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:07:51.460

使用[CSS 媒体查询](http://www.adobe.com/devnet/dreamweaver/articles/introducing-media-queries.html)或 Javascript。一种快速的方法是使用 Jquery [$(window).resize](http://api.jquery.com/resize/)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:10:45.217

我想你只需要删除

`position: fixed`从`#completeSlider`

至少这在 chrome 上对我有用。

编辑：

那么我会说你需要使用 JQuery 来处理这个问题。您不能既拥有固定的定位又相对于其他元素。仍然`position: fixed`如上所述删除并添加一些 JQuery 魔术，如下所示：

```
$(window).scroll(function() {

$('#completeSlider').offset({ top: $(window).scrollTop(), left: 0});

}); 
```

似乎`$`jQuery 的标准是为您页面上的其他一些功能保留的......试试这个：

```
jQuery(window).scroll(function() {

    jQuery('#completeSlider').offset({ top: jQuery(window).scrollTop(), left: 0});

}); 
```

# c++ - 显式初始化指针向量会导致转换错误？

> ID：10017607
> 
> 赞同：9
> 
> 时间：2012-04-04T19:03:42.337
> 
> 标签：c++, visual-c++

考虑一下：

```
std::vector<int*> v(1, 0); 
```

这与 VC++10 编译得很好（即使在最大警告级别也没有警告）。但是，它不能在 mac 上使用 llvm 或在 linux 上使用 gcc 进行编译，从而出现类似“assigning to int* from in compatible type const int”之类的错误。我不是在寻找解决方案——我知道第二个参数是不必要的，或者 static_cast 修复了错误。

我认为零可以隐式转换为任何指针类型。是什么赋予了？我可以执行以下操作：

```
int* i = 0;
int* const& ii = 0;
const int t = 0;
i = t; 
```

我知道向量构造函数签名`const T&`在扩展为正确`vector<int*>`时采用哪个？`int* const&`有人可以解释这里发生了什么，以及 VC++ 或非 VC++ 编译器是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:14:08.850

`std::vector`有一个带有这个签名的讨厌的构造函数

```
template <class InputIterator>
vector(InputIterator first, InputIterator last,
       const Allocator& = Allocator()); 
```

如果编译器从您的参数中减去`InputIterator`( `int`!)`0`和`1`, 将是一个很好的选择，但不会做我们想要的。

我相信 C++11 要求编译器更加努力地确定参数是否实际上是迭代器。在 C++03 中，它们可能会以`size_type(1)`and结尾`int(0)`，从而导致您的问题。

整数文字 0 可转换为空指针，但`int`值为 0 的则不能！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:12:35.393

看起来 g++ 在这里实际上是错误的。参见 C++98 23.1.1/9：

> 对于本节和第 21 节中定义的每个序列：
> 
> — 构造函数模板 X(InputIterator f, InputIterator l, const Allocator& a = Allocator())
> 
> 应具有相同的效果：`X(static_cast<typename X::size_type>(f), static_cast<typename X::value_type>(l), a)`如果 InputIterator 是整数类型。

请注意，这`InputIterator`是构造函数的模板参数，在这种情况下，它将是`int`您的示例，因此是整数类型。g++ 库实际上具有特定的代码来处理存储在其中的类型`vector`也是整体的所有情况，并且这些情况都将正常工作。在这种情况下，仅因为您使用了标准`0`所`static_cast`规定的内容，它实际上是合法的。我尝试编译标准所说的代码应该是等效的，并且它使用 g++ 4.5 编译。

# xml - 用于声明不能有子元素或其他内容的元素的 XSD 语法

> ID：10017609
> 
> 赞同：0
> 
> 时间：2012-04-04T19:03:45.463
> 
> 标签：xml, xsd, schema

这是否是声明不能有子元素或其他内容的 XML 元素 Foo 的正确方法？

```
<xs:element name="Foo" type="xs:string" fixed="" nillable="true" /> 
```

XML 文档中此元素的有效示例是：

```
<Foo></Foo> 
```

和

```
<Foo/> 
```

其他任何内容都是无效的，例如：

```
<Foo>stuff</Foo> 
```

以下是有效的，尽管不是必需的，这将是很好的

```
<Foo>
</Foo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:39:47.673

我将几个选项组合到一个模式中，并尝试使用它来验证一些测试元素。

资料来源： [http ://www.w3schools.com/schema/schema_complex_empty.asp](http://www.w3schools.com/schema/schema_complex_empty.asp)

[http://www.herongyang.com/XML-Schema/complexType-Empty-Element-Declaration.html](http://www.herongyang.com/XML-Schema/complexType-Empty-Element-Declaration.html)

架构：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded">
        <xs:element name="foo">
          <xs:complexType></xs:complexType>
        </xs:element>
        <xs:element name="y1">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:length value="0" />
            </xs:restriction>
          </xs:simpleType>
        </xs:element>
        <xs:element name="y2">
          <xs:complexType>
            <xs:complexContent>
              <xs:restriction base="xs:anyType" />
            </xs:complexContent>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

测试用例：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:noNamespaceSchemaLocation="NewXMLSchema.xsd">
 <!--  These six are all valid -->
  <foo />
  <y1 />
  <y2 />
  <foo></foo>
  <y1></y1>
  <y2></y2>
  <!-- These three are all invalid! -->
  <foo>
  </foo>
  <y1>
  </y1>
  <y2>
  </y2>
  <!--  These are invalid too. -->
  <foo>invalid</foo>
  <y1>invalid</y1>
  <y2>invalid</y2>
</root> 
```

看起来这三个元素声明中的任何一个都可以满足您的要求，除了额外的空行功能。

我不会包含 type="xs:string"、fixed="" 或 nillable="true"，因为这些在语义上都与空标签不同。空标签实际上没有类型（如字符串），因为它是空的。它也没有空字符串的固定值，因为这与空字符串不同。可空元素在语义上与空标记不同，因为它在语义上等同于不存在的标记（来源：Michael Kay 的 XSLT 2.0 和 XSLT 2.0 程序员参考，第 182 页。）。像这样的空标签`<br/>`并不意味着在这种情况下不存在换行符。这意味着存在换行符，但没有内容或属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:27:30.383

定义强制空内容的类型有两种方法：一种是使用简单的 xs:string 类型，使用枚举或模式方面（或使用固定）将其限制为零长度；另一种是使用定义为（例如）空元素序列的复杂类型。出于验证目的，它们之间没有太多选择。但是如果您有兴趣使用您的模式做更高级的事情，比如定义类型层次结构和替换组，或者将模式映射到 Java 对象模型，那么您选择的可能会有所不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T19:08:12.617

```
<xs:element name="Foo">
  <xs:complexType>
    <xs:attribute name="Bar" type="xs:positiveInteger"/>
  </xs:complexType>
</xs:element> 
```

您可以省略属性标签以使其完全为空...

# android - 如何将 libnfc 移植到 Android 4（冰淇淋三明治）？

> ID：10017611
> 
> 赞同：1
> 
> 时间：2012-04-04T19:03:57.657
> 
> 标签：android, porting, nfc

我在网上看到了一个[pdf](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CEkQFjAE&url=http://wenku.baidu.com/view/8720e0ecf8c75fbfc77db23a.html&ei=AJh8T-DjK8nrrQeVr73TDA&usg=AFQjCNEckeD7q-hbwNBktmNLM2LSz6iwqg&sig2=0MW6dMPHf7DZAfVkDLutCw)，它给了我将 libnfc 移植到 android 的指南。

我想知道是否有人将 libnfc 移植到 Android ICS，以便我们可以直接使用编译后的文件。

如果没有，除了pdf中建议的方法之外，有人知道如何移植它吗？

# mysql - mysql 存储过程接收不能是来自有效查询的空错误

> ID：10017615
> 
> 赞同：0
> 
> 时间：2012-04-04T19:04:04.210
> 
> 标签：mysql

这是我的存储过程

```
创建过程`tblCarGarage_Insert`(
   在 URL varchar(700) 中，
   IN 价格 int(7),
   输入 varchar(60),
   IN 模型 varchar(60),
   IN TrimLevel varchar(60),
   IN 英里 int(6),
   IN ZipCode int(5),
   IN 说明 varchar(80),
   IN 颜色 varchar(30),
   IN 所有者 varchar(100),
   IN VIN varchar(20),
   在 VINKeyCode varchar(12) 中，
   IN CarYear int(4),
   IN ListingID int(14))
插入 tblcargarage
      设置 URL = @URL，
          价格 = @价格，
          rBit = b'1',
          日期发现 = NOW(),
          LastProcessDate = 现在（），
          CarYear = @CarYear，
          制作 =
             （选择唯一ID
                FROM tbltranslationmake
               WHERE make = '本田'),
          型号 =
             （选择唯一ID
                FROM tbl翻译模型
               WHERE 模型 = @Model),
          汽车内饰 =
             （选择唯一ID
                FROM tbltranslationtrim
               在哪里修剪级别 = @TrimLevel),
          英里 = @Miles，
          邮编 = @邮编，
          描述 = @描述，
          颜色 = @Color,
          所有者 = @Owner，
          VIN = @VIN，
          VINKeyCode = @VinkeyCode,
          列表ID = @ListingID;

```

这是我的执行

```
SET @CarYear = '';
SET @URL = 'asdas';
SET @Price = 20112;
SET @Make = '本田';
SET @Model = '公民';
SET @TrimLevel = 'Ex';
SET @Miles = 20112;
SET @Description = 'asdasdasd';
SET @Color = '黄色';
SET @Owner = 'asdasdas';
SET @VIN = 'qeqweqweqw2e';
SET @VinkeyCode = 'asd23sd';
设置@ListingID = 1231231;
设置@邮编 = 12331;
调用 tblCarGarage_Insert(@CarYear,
                                              @网址，
                                              @价格，
                                              @制作，
                                              @模型，
                                              @TrimLevel，
                                              @迈尔斯，
                                              @描述，
                                              @颜色，
                                              @所有者，
                                              @VIN，
                                              @VinkeyCode，
                                              @ListingID，
                                              @邮政编码）
```

```
选择唯一ID
                FROM tbltranslationmake
               WHERE make = '本田'
```

返回 11（作为 int）

```
型号 =
             （选择唯一ID
                FROM tbl翻译模型
               WHERE 模型 = @Model),

```

返回 712 作为 int

```
          汽车内饰 =
             （选择唯一ID
                FROM tbltranslationtrim
               在哪里修剪级别 = @TrimLevel),

```

返回 12334 作为 int。

是的，所有这 3 列在我的数据库中都是 INT，

我不断得到'列'Make'不能为空，如果我将查询作为非SP运行，就像查询插入asd set x ='x'等......它在相同的值下工作得很好。任何想法？

谢谢！

这必须通过传入 varchar 和需要 int 的表来做一些事情。也许它没有返回正确的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:36:52.703

查看您的代码，我注意到的第一个问题是在您的 CALL 语句中您以错误的顺序传递参数。例如，在存储过程定义中，第一个参数是 URL，但在调用过程中，传入的第一个参数是 CarYear。

尝试以正确的顺序传递参数，看看是否适合您：

```
CALL tblCarGarage_Insert(
  @URL,
  @Price,
  @Make,
  @Model,
  @TrimLevel,
  @Miles,
  @ZipCode,
  @Description,
  @Color,
  @Owner,
  @VIN,
  @VinkeyCode,
  @CarYear,
  @ListingID
) 
```

# iphone - 更改所有视图控制器 iphone 的背景颜色

> ID：10017616
> 
> 赞同：1
> 
> 时间：2012-04-04T19:04:17.613
> 
> 标签：iphone, uiviewcontroller, background-color

我需要同时更改我的应用程序中所有 UIviewcontrollers 的背景颜色，就像选择蓝色一样，让所有蓝色和绿色都做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:34:01.550

一种方法是在颜色更改后触发通知，并将所有视图控制器作为侦听器。然后您可以更改为该通知调用的选择器中的颜色...

（如果你想避免一次又一次地编写整个过程，你可以创建一个基视图控制器子类化 UIViewController 并且所有视图控制器都将子类化这个基视图控制器......这样做你只需要在基视图控制器中定义一次listner函数) .. 希望这会有所帮助... :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T19:48:29.367

大多数应用程序的视图控制器一次只能看到一个。如果你的应用是这样，那么你的 VC 可以在它们出现之前设置它们的视图背景颜色。

```
- (void)viewWillAppear:(BOOL)animated {

    if (/* the condition that makes me supposed to have a blue background */) {

        // I was supposed to be blue already, but nobody can see me yet,
        // so everything is cool

        self.view.backgroundColor = [UIColor blueColor];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T21:04:09.740

完成此任务的最佳方法是将您的通用美学和视图逻辑重构为基类。例如，在我的大多数项目中，我都有一个名为 BaseViewController 的类。所有 UIViewControllers 都从这个基类扩展而来。在`viewDidAppear`和`viewDidLoad`方法中，我为我的应用程序中的每个视图完成了适当的设置。然后，当您（不可避免地）想要更改应用程序的外观时，代码只在**一个**地方！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T19:09:44.303

您不能设置`backgroundColor`for `UIViewController`，只能设置它的`view`属性。好吧，您可以将此`UIColor`值设置为全局值，并在设置它时发布和观察者事件，这些事件将到达每个方法中`UIViewController`以将其设置`self.view.backgroundColor`为指定的颜色。

# php - 从 php 将参数传递给 matlab 函数

> ID：10017623
> 
> 赞同：1
> 
> 时间：2012-04-04T19:04:35.957
> 
> 标签：php, matlab

我想使用 exec 命令从 php 调用 matlab 函数。但是，如何将参数从 php 传递给我的 matlab 文件？以及如何从 matlab 函数中获取结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:21:10.367

您可以使用调用函数将参数传递给 matlab。

您可以在[此处](http://www.danpearce.co.uk/php_and_matlab)找到所有详细信息。

返回数据需要通过标准输出或临时文件。您需要使您的 matlab 函数很好地排列这些数据，以便您可以轻松地在 php.ini 中解析它。最好的方法取决于您的数据类型。

# c - 如何修剪 SSD 磁盘上的块？

> ID：10017625
> 
> 赞同：5
> 
> 时间：2012-04-04T19:04:39.890
> 
> 标签：c, linux

在 C 程序中，如何告诉 linux 内核修剪 SSD 磁盘上的块？我想我必须`open()`使用设备和`fcntl()`它的东西，但是什么？它需要是通用的（即使用不同的 SSD 磁盘）

注意：设备上没有 ext4 文件系统，只有原始数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T19:17:00.423

你会发送它`IOCATADELETE`。像这样的东西：

```
//header - may already be defined
#define IOCATADELETE _IOW('a', 104, off_t[2])

//code
int fd = open("/dev/abc", O_RDWR | O_DIRECT);
off_t ioarg[2];
ioarg[0] = 0; //block number
ioarg[1] = 0; //size
ioctl(fd, IOCATADELETE, ioarg);
close(fd); 
```

# android - 使用 VideoView 缓冲视频

> ID：10017627
> 
> 赞同：1
> 
> 时间：2012-04-04T19:04:48.000
> 
> 标签：android, android-videoview

我有一个带有 url 并使用 VideoView 播放视频的 Activity。这工作正常。

但是，在视频开始播放之前有一段缓冲时间。因此，VideoView 是黑色的。没有微调器指示缓冲区加载。

VideoView 的参数是否会显示微调器？如果没有，当视频开始播放时是否有一些消息会被广播？这样我就可以显示我自己的微调器并在收到消息时隐藏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:23:19.130

我找到了答案。在 VideoView 的顶部添加 ProgressBar 并执行以下操作：

```
 mPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
            mSpinner.setVisibility(View.GONE);
        }
    }); 
```

# java - 我的 Android 应用程序在读取 XML 文件时崩溃

> ID：10017628
> 
> 赞同：0
> 
> 时间：2012-04-04T19:05:22.180
> 
> 标签：java, android, xml, rss

我构建了一个应用程序，其功能是接收设备的 RSS 更新并显示为输出。问题是应用程序每次开始读取文件时都会崩溃..

顺便说一句，该文件来自一个网站。

```
if (eventType == XmlPullParser.START_TAG) 
```

当涉及到这一行时，它崩溃了……有人知道吗？

这是 LogCat 输出：

```
04-05 16:47:47.320: D/dalvikvm(352): GC_EXTERNAL_ALLOC freed 47K, 53% free 2547K/5379K, external 1957K/2137K, paused 144ms
04-05 16:47:47.917: D/dalvikvm(352): GC_EXTERNAL_ALLOC freed 1K, 53% free 2547K/5379K, external 2160K/2512K, paused 299ms
04-05 16:47:54.328: E/global(352): Deprecated Thread methods are not supported.
04-05 16:47:54.328: E/global(352): java.lang.UnsupportedOperationException
04-05 16:47:54.328: E/global(352):  at java.lang.VMThread.stop(VMThread.java:85)
04-05 16:47:54.328: E/global(352):  at java.lang.Thread.stop(Thread.java:1280)
04-05 16:47:54.328: E/global(352):  at java.lang.Thread.stop(Thread.java:1247)
04-05 16:47:54.328: E/global(352):  at dc.myappdsdasdadasda.app.___Startupseeds___$1.run(___Startupseeds___.java:54)
04-05 16:47:54.718: I/myappdsdasdadasda ListView loading..(352): ========================= [STARTER] ==========================
04-05 16:47:55.067: D/dalvikvm(352): GC_EXTERNAL_ALLOC freed 15K, 53% free 2567K/5379K, external 2736K/2946K, paused 207ms
04-05 16:47:55.479: I/myappdsdasdadasda ListView loading(352): URL ... {patch/xml}
04-05 16:47:55.497: I/myappdsdasdadasda ListView loading(352): Setting namespace.
04-05 16:47:55.497: I/myappdsdasdadasda ListView loading(352): xpp factory loaded
04-05 16:47:55.508: I/myappdsdasdadasda ListView loading(352): settingup utf-8 enccoding
04-05 16:47:57.389: I/myappdsdasdadasda ListView loading(352): AB AC AS HS[10] 001101 QTcheck #1
04-05 16:47:57.389: I/myappdsdasdadasda ListView loading(352): AB AC AS HS[10] 001101 QTcheck #2
04-05 16:47:57.389: I/myappdsdasdadasda ListView loading(352): AB AC AS HS[10] 001101 QTcheck #3
04-05 16:47:57.469: E/myappdsdasdadasda ListView loading..(352): Can't load screen layout, ERROR: java.lang.NullPointerException
04-05 16:47:57.469: I/myappdsdasdadasda ListView loaded(352): ========================= [FAILED!] ==========================
04-05 16:47:58.147: D/dalvikvm(352): GC_EXTERNAL_ALLOC freed 65K, 52% free 2599K/5379K, external 3221K/3471K, paused 68ms
04-05 16:47:58.329: D/dalvikvm(352): GC_EXTERNAL_ALLOC freed <1K, 52% free 2598K/5379K, external 4627K/5778K, paused 79ms 
```

空指针异常：

```
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351): Can't load screen layout, ERROR: 
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351): java.lang.NullPointerException
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at dc.suUSDAKDAL.app._0xSession.onCreate(_0xSession.java:130)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.os.Looper.loop(Looper.java:123)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at android.app.ActivityThread.main(ActivityThread.java:3683)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at java.lang.reflect.Method.invokeNative(Native Method)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at java.lang.reflect.Method.invoke(Method.java:507)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-07 13:05:44.373: E/suUSDAKDAL ListView loading..(351):   at dalvik.system.NativeStart.main(Native Method) 
```

创建时：

```
while (eventType != XmlPullParser.END_DOCUMENT)
{
    if (eventType == XmlPullParser.START_TAG)
    {
        if (xpp.getName().equalsIgnoreCase("item")) 
        {
            insideItem = true;
        } 
        else if (xpp.getName().equalsIgnoreCase("title")) 
        {
            if (insideItem)
                _viTitle[_0xFa] = xpp.nextText();
        }
        else if (xpp.getName().equalsIgnoreCase("description"))
        {
            if (insideItem)
                vi_subTitle[_0xFa] = xpp.nextText();
        }
        else if (xpp.getName().equalsIgnoreCase("link"))
        {
            if (insideItem)
                __Links[_0xFa] = xpp.nextText();
        }
    }
    else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item"))
    {
        insideItem=false;
    }
    mStrings [_0xFa] = "http://images3.wikia.nocookie.net/__cb20111202150846/theamazingworldofgumball/images/c/c1/Banana_joe_on_the_floor,lol!.png";
    _0xFa ++;
} 
```

新错误：

```
04-13 09:48:53.999: E/AndroidRuntime(336): FATAL EXCEPTION: main
04-13 09:48:53.999: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to start activity ComponentInfo{dc.sus.app/dc.sus.app._0xSession}: java.lang.ArrayIndexOutOfBoundsException
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 09:48:53.999: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 09:48:53.999: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
04-13 09:48:53.999: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 09:48:53.999: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 09:48:53.999: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)
04-13 09:48:53.999: E/AndroidRuntime(336): Caused by: java.lang.ArrayIndexOutOfBoundsException
04-13 09:48:53.999: E/AndroidRuntime(336):  at dc.sus.app._0xSession.onCreate(_0xSession.java:128)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 09:48:53.999: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-13 09:48:53.999: E/AndroidRuntime(336):  ... 11 more 
```

新的堆栈跟踪：

```
04-13 20:22:17.634: E/AndroidRuntime(527): FATAL EXCEPTION: main
04-13 20:22:17.634: E/AndroidRuntime(527): java.lang.OutOfMemoryError
04-13 20:22:17.634: E/AndroidRuntime(527):  at java.util.ArrayList.add(ArrayList.java:123)
04-13 20:22:17.634: E/AndroidRuntime(527):  at dc.sus.app._0xSession.onCreate(_0xSession.java:127)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.os.Looper.loop(Looper.java:123)
04-13 20:22:17.634: E/AndroidRuntime(527):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 20:22:17.634: E/AndroidRuntime(527):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 20:22:17.634: E/AndroidRuntime(527):  at java.lang.reflect.Method.invoke(Method.java:507)
04-13 20:22:17.634: E/AndroidRuntime(527):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 20:22:17.634: E/AndroidRuntime(527):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 20:22:17.634: E/AndroidRuntime(527):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:44:16.840

从评论线程转移到答案......当代码尝试取消引用时，您会收到一个空指针异常`mStrings[_0xFa]`。我想`mStrings`是一个`String`s数组。在哪里`mStrings`初始化？

# web-services - Sharepoint：如何使用网络服务方法

> ID：10017629
> 
> 赞同：-2
> 
> 时间：2012-04-04T19:05:26.240
> 
> 标签：web-services, sharepoint, url, parameters

`/_vti_bin/webs.asmx`我需要通过添加到您的站点 URL来使用可用的 Web 服务。特别是`GetAllSubWebCollection`。

抱歉，如果这是一个愚蠢的问题，我在 2007 年前后 2010 年后拆分的环境中工作，并且无法访问服务器，因此我对高级功能的经验很少。

我必须在 URL 中输入什么才能使此方法起作用？我应该创建一个页面来处理信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:40:46.950

在 Visual Studio 中添加 Web 引用（不是服务引用）。该服务是 SOAP 服务，因此您不能只在浏览器中输入 url 来调用该方法。您需要向服务发送 SOAP 消息。当您添加 Web 引用时，.NET 会为您处理此问题。如果您使用的是 SP 2010，请改用客户端对象模型。

# wcf - 带有需要参数的服务的自托管（无 IIS 或 WAS）WCF

> ID：10017630
> 
> 赞同：3
> 
> 时间：2012-04-04T19:05:34.723
> 
> 标签：wcf, dependency-injection, ninject, default-constructor, self-hosting

希望这是一个容易的。我想知道这是否可能 - 也许不是。我正在尝试自托管 WCF 服务（在下面的示例中，它是一个控制台应用程序）。该服务没有默认构造函数。它只包含一个参数签名构造函数。我需要该服务能够处理用户会话。目前我正在使用 Ninject DI。这是我想出的一个简单的代码解决方案来演示我的问题：

```
using System;
using System.ServiceModel;
using System.ServiceModel.Web;
using Ninject.Modules;

namespace ConsoleApplication1
{
    public class Program
    {
        static void Main()
        {
            using (var webServiceHost = new WebServiceHost(typeof(MyWcf)))
            {
                var webHttpBinding = new WebHttpBinding();
                var uri = new Uri("http://localhost:8000/");
                webServiceHost.AddServiceEndpoint(typeof(IMyWcf), webHttpBinding, uri);
                webServiceHost.Open();
                Console.WriteLine("Service is ready...");
                Console.ReadKey();
            }
        }
    }

    [ServiceContract]
    public interface IMyWcf
    {
        [OperationContract, WebGet(UriTemplate = "")]
        string HelloWorld();
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class MyWcf : IMyWcf
    {
        private readonly IMessage _customMessage = new Message("Default Message.");

        public MyWcf(IMessage message)
        {
            _customMessage = message;
        }

        public string HelloWorld()
        {
            return _customMessage.Text;
        }
    }

    public interface IMessage
    {
        string Text { get; }
    }

    public class Message : IMessage
    {
        public Message (string message)
        {
            Text = message;
        }
        public string Text { get; set; }
    }

    public class NinjectSetup : NinjectModule
    {
        public override void Load()
        {
            Bind<IMessage>().To<Message>()
                .WithConstructorArgument("message", "Injected String Message.");
        }
    }
} 
```

显然，注释掉参数化构造函数允许服务运行。但这对我没有好处。我不想使用 ServiceHostFactory，因为这显然需要我拥有一个 .svc/IIS。有没有解决的办法？我可以只创建一个`MyWebServiceHost`继承自`WebServiceHost`并覆盖某些将为服务创建实例的方法的新方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:08:25.490

使用上面 Ruben 的建议（在评论中），我能够在 Ninject.Extensions.Wcf 源存储库中找到一个工作示例。

# java - 将联网的 Java 桌面应用程序迁移到 Web 应用程序的选项有哪些

> ID：10017633
> 
> 赞同：2
> 
> 时间：2012-04-04T19:05:51.370
> 
> 标签：java, web-services, migration

我有一个在 LAN 环境中运行的 Java 桌面应用程序（带有 Swing GUI）。通常，我用一堆机器运行它，一些扮演服务器的角色，而另一些扮演客户端的角色。

现在，我想在互联网上运行同一个应用程序，服务器和客户端都将托管在一个网站上，这样网站的访问者就可以作为客户端运行并相互交互。

我想知道这种迁移有哪些选择？我是否需要使用一些基于 Java 的 Web 框架从头开始重写所有内容？如果是这样，我应该如何处理 GUI 部分？还是我只是将应用程序作为小程序托管？（不知何故，我不愿意走小程序路线，因为它可能需要在我无法控制的个别访问者的机器上进行额外设置，并且可能存在兼容性问题）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-14T15:18:16.100

一种选择是使用[Vaadin](http://vaadin.com/)。编程思维方式非常接近 JavaSE Swing。它是客户端的 GWT 衍生产品，但逻辑实际上在服务器 JVM 上，并且框架负责通信（xhr 或 Web 套接字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:07:25.237

[Google Web Toolkit (GWT)](https://developers.google.com/web-toolkit/)可能对此很有用，因为它可以让您重用通用 Java 代码并将其编译为 JavaScript 以便在浏览器中运行。在我的应用程序中，我正在重用在服务器中使用的客户端中的类。UI 必须使用 Web 小部件重新创建，但是存在所见即所得的工具。

如果您需要双向通信，您还可以将原始套接字迁移到 Websocket。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:35:18.620

如果您的代码遵循 mvc 模式，则应该可以重用模型内容。我最喜欢的 java web 框架是那些来自 spring 源的。Spring mvc（干净的 mvc 设计）或 spring roo（更多带有代码生成的 rails 样式等）。两者都与 dojo 框架（ajax / gui 的东西）很好地集成。

# c - 为什么会出现浮点异常？

> ID：10017635
> 
> 赞同：0
> 
> 时间：2012-04-04T19:05:56.267
> 
> 标签：c

在尝试为 C 提出一些论据时，我发现开始`argv[]`工作真的很困难。我有：

```
int main(int argc, char *argv[])
{
  void updateNext();
  void fcfs();
  void spn();
  void srt();

  fp = fopen(argv[0],"r");
  op = fopen("output.dat","a+");

  if (strcmp(argv[1],"FCFS")!=0)
  {
    fcfs();
  }

  if (strcmp(argv[1],"SPN")!=0)
  {
    spn();
  }

  if (strcmp(argv[1],"SRT")!=0)
  {
    srt();
  }
} 
```

我想以 的格式输入一些内容`myprog input.data FCFS`，但是上面的代码给了我一个“浮点异常”错误，在我`input.dat`将程序中的字符串硬编码为字符串之后，异常就消失了。`argv[0]`也许有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T19:08:44.160

在 C 中，`argv[0]`是*您的程序的名称*（或者更准确地说，是用户在命令行上键入以运行您的程序的第一个单词，如果从 shell 运行）。

因此，为了`argv[0]`您的目的，您需要查看`argv[1]`文件名和`argv[2]`其他参数。

如果您使用调试器跟踪您的程序，或者在使用它之前简单地打印值，这将很清楚：

```
printf("using file name %s\n", argv[0]);
fp = fopen(argv[0],"r"); 
```

`argc`在访问之前通过验证来检查您是否有足够的命令行参数也是一个好主意`argv`：

```
if (argc < 3) {
    fprintf(stderr, "not enough command line parameters\n");
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T19:08:35.257

在 C`argv[0]`中通常是调用程序的名称。您正在寻找 `argv[1]`和`argv[2]`。

作为旁注：

*   你应该`argc`在触摸之前检查`argv`
*   **不能保证`argv[0]`包含程序的名称，**甚至是有意义的东西

# json - 用数组反序列化 json

> ID：10017641
> 
> 赞同：1
> 
> 时间：2012-04-04T19:06:11.250
> 
> 标签：json, jackson

我使用杰克逊反序列化一些Json。我正在阅读一个大型 json 文档并拉出块并告诉杰克逊拿那个块并将其反序列化为我在 java 中创建的一个对象（实际上是几个对象，因为有嵌套数组）以匹配 json。

我用来反序列化的代码是

```
fooObject newFoo = mapper.readValue(newNode,fooObject.class); 
```

问题是块中有一个值，有时是哈希值，例如

```
addWidgetStrategy={"get":2,"spend":6,"textLabel":"bikes"} 
```

有时是一个数组

```
addWidgetStrategy=[{"get":1.5,"spend":3,"textLabel":"thursday"},{"get":3,"spend":5,"textLabel":"tuesday"}] 
```

所以在 fooObject 我需要处理 addWidgetStrategy 它有自己的对象。如果在 fooObject 我放

```
public addWidgetStrategy addWidgetStrategy; 
```

上面的工作直到它试图反序列化一个数组

如果我把

```
public List<addWidgetStrategy>  addWidgetStrategy; 
```

它仅适用于数组，当它只是一个哈希时会爆炸

无论它是数组还是单个哈希，我如何解析相同的 Json 元素 addWidgetStrategy？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:22:50.100

对于数组，它应该是：

```
 fooObject[] newFoo = mapper.readValue(newNode,fooObject[].class); 
```

你可以这样读：

```
 JsonNode jsonNode = mapper.readTree(json);
   if (jsonNode.isArray()) {
       fooObject[] newFoo = mapper.readValue(jsonNode,fooObject[].class);
       ...
   } else {
       fooObject newFoo = mapper.readValue(jsonNode,fooObject.class);  
       ....
   } 
```

# iphone - SecKeychainItemImport、SecIdentitySearchCreate、SecIdentitySearchCopyNext

> ID：10017642
> 
> 赞同：4
> 
> 时间：2012-04-04T19:06:19.747
> 
> 标签：iphone, cocoa, keychain

SecKeychainItemImport、SecIdentitySearchCreate、SecIdentitySearchCopyNext 标记为已弃用。任何人都可以向我推荐一个资源，例如如何将这些功能更改为另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:35:08.673

替换分别是`SecItemImport`, `SecItemCopyMatching`, 和`SecItemCopyMatching`,

# python - 使用大型 mod_wsgi 应用程序最大化 apache 服务器实例

> ID：10017645
> 
> 赞同：2
> 
> 时间：2012-04-04T19:06:44.973
> 
> 标签：python, database, django, apache, mod-wsgi

我正在编写一个培根类型的 Oracle 网站，该网站涉及在一个非常大的有向图（> 500 万个节点，每个节点平均可能有 30 个出站边）上进行广度优先搜索。除了显示几个主要是文本页面（它是如何工作的、联系信息等）之外，这基本上也是该网站要做的所有事情。我目前有一个在 Python 中运行的测试实现，但即使使用 Python 数组来有效地表示数据，它也需要 >1.5gb 的 RAM 来保存整个东西。显然，对于像这样的低级算法问题，Python 是错误的语言，所以我计划使用 Python/C 绑定在 C 中重写大部分。我估计这将需要大约 300 mb 的 RAM。

根据我目前的配置，这将通过 apache 2.2.14 中的 mod_wsgi 运行，它被设置为使用 mpm_worker_module。然后，每个子 apache 服务器将加载整个 python 设置（加载 C 扩展），因此使用 300 mb，而我只有 4gb 的 RAM。这需要一些时间来加载，而且似乎它可能会使服务器实例的数量低于其他情况。如果我理解正确的话，像这样的数据繁重（而不是客户端交互繁重）的任务通常会通过设置 SQL 数据库或所有服务器进程随后可以查询的某种东西与服务器分离。但我不知道适合我需要的数据库框架。

那么，如何进行呢？是否值得尝试建立一个与网络服务器分离的数据库，或者以其他方式将应用程序移动到比 mod_wsgi 更远的一步，以便运行更多的服务器实例？如果是这样，如何做到这一点？

我的第一印象是数据库，而不是服务器，总是会成为限制因素。看起来典型的 Apache mpm_worker_module 配置无论如何都有 ServerLimit 16，所以我可能只会获得更多的服务器。而且，如果我确实将数据库与服务器分离，我还必须有某种方法来运行数据库的多个实例（我已经知道，对于我想要支持的流量级别，只有一个可能不会削减它）和让他们在服务器上玩得很好。所以我可能大部分都回答了我自己的问题，但这是一种奇怪的情况，所以我认为如果有人能更坚定地处理它，那将是值得一看的。有什么我想念的吗？这个实现有意义吗？提前致谢！

技术细节：这是一个 Django 网站，我将在 Ubuntu 10.4 上使用 Apache 2.2.14 提供服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:17:08.380

首先，查看 mod_wsgi 的守护程序模式，不要使用嵌入式模式，因为这样您可以单独控制 Apache 子进程的 Python WSGI 应用程序进程的数量。其次，您最好将内存不足的位放在单独的后端进程中。您可能会使用 XML-RPC 或其他消息队列系统与后端进程进行通信，或者甚至可能看看您是否可以以某种方式使用 Celery。

# javascript - 当分钟部分低于十时，Android-Esque 时间输入小部件不起作用

> ID：10017648
> 
> 赞同：2
> 
> 时间：2012-04-04T19:06:57.377
> 
> 标签：javascript

我正在尝试制作一个用于受控时间输入的“小部件”，除了允许您手动输入值外，它还使用向上和向下箭头来增加每个部分。它工作正常（从 12 循环到 1 和 59 到 1 等），但是当我添加一个在值低于 10 时正确格式化分钟的部分时，它开始起作用。

按下正常直到显示 10，“10”然后“09”然后“0-1”。

当你到达“0-1”后按下去“01”，但当你到达“08”时，它又回到“01”。

```
function minFix(mins)
{
if ( mins <= 9)
    {
        mins = "0" + String(mins);
        document.getElementById("mins").value = mins;
    }
else
    {
        document.getElementById("mins").value = mins;
    }
}

function minUp()
{
var mins = parseInt(document.getElementById("mins").value);
if (mins == 59)
    {
        mins = 1;
        minFix(mins);
    }
else
    {
        mins = (mins+1);
        minFix(mins);
    }
}

function minDown()
{
var mins = parseInt(document.getElementById("mins").value);
if (mins == 1)
    {
        mins = 59;
        minFix(mins);
    }
else
    {
        mins = (mins-1);    
        minFix(mins);   
    } 
```

}

minUp 和 minDown 分别由向上和向下箭头调用，显示 mins 的文本框的 ID 为 mins。

我确定我错过了一些简单的东西，但我现在无法弄清楚，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:11:54.550

这与您要附加的零有关。它使您的数字变成八进制数，因此当您重新读取它时，它不会被读取为十进制数。看看 parseInt 是如何工作的，你就会明白了。您需要在解析之前删除前导零。

在此处向下滚动 parseInt 函数：[http ://www.javascripter.net/faq/convert2.htm](http://www.javascripter.net/faq/convert2.htm)

所以这条线`var mins = parseInt(document.getElementById("mins").value);`

应该

```
var mins = parseInt(document.getElementById("mins").value.replace(/^0+/,"")); 
```

哦，欢迎来到 Stack！请不要忘记对您认为最好的答案进行投票，并为您认为正确的答案打上绿色复选标记。

# ruby-on-rails - 用于 redmine/rails 和配置项目的 IDE

> ID：10017651
> 
> 赞同：1
> 
> 时间：2012-04-04T19:07:07.460
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我实际上正在为 redmine 开发一个插件，目前使用 netbeans 6.9（操作系统：Linux）

但我面临的问题是获取我从控制台手动重新启动 redmine 服务器的更改。

有更好的 IDE/配置吗？哪位有在同一领域工作过的，可以提供一些指导吗？

另外我想知道如何在开发模式下运行Redmine服务器，以简化开发过程。

任何建议/方向都会有所帮助，不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:15:28.273

* * *

好吧，根据我的个人经验，我可以推荐您使用 RubyMine 作为 IDE。它是一个具有许多新功能的优秀 IDE。您可以从下面给出的链接免费下载

[http://www.jetbrains.com/ruby/](http://www.jetbrains.com/ruby/)

# javascript - JavaScript for...in 循环的结果很奇怪

> ID：10017652
> 
> 赞同：1
> 
> 时间：2012-04-04T19:07:08.937
> 
> 标签：javascript, jquery, for-loop

我有以下对象：

```
var r = {
    obj: $(this),
    children: $(this).children(),
    panes: $('.rotatorPane', $(this)),
    tagNames : [],
    captions: [],
    subcaptions: []     
}; 
```

`$(this)`指以下div：

```
<div class="myRotator">
    <div class="rotatorPane">

    </div>
    <div class="rotatorPane" id="pane3">

    </div>

    <img src="img/1.jpg" alt="pane 1" class="rotatorPane" data-caption="Lorem Ipsum" data-subcaption="Dolor sit amet" />

</div> 
```

我遇到的问题是以下 for...in 循环：

```
for(pane in r.panes){
    console.log(pane);
} 
```

输出按预期开始：

```
0
1
2 
```

但是后来我得到了一堆方法名称作为输出：

```
length
prevObject
context
selector
constructor
init
jquery
size
toArray
get
...etc 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T19:08:04.803

不要`for ... in`在数组或类似数组的东西上使用。使用数字索引变量。

```
for (var i = 0; i < r.panes.length; ++i) {
  var pane = r.panes[i];
  // ...
} 
```

该`for ... in`表单用于迭代对象的**所有属性。** 当您想要遍历数组的索引属性（或者，再次，您将其视为数组）时，请始终使用数字索引。

在这种情况下，所讨论的类数组对象是一个 jQuery 对象，除了数字索引的属性之外，它还具有各种属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:09:37.453

you should use the jQuery for each loop i think, as you probably cant use hasOwnProperty due to jquery adding its own methods and stuff to the object

# wcf - WCF 数据序列化：它可以更快吗？

> ID：10017656
> 
> 赞同：1
> 
> 时间：2012-04-04T19:07:28.467
> 
> 标签：wcf, entity-framework, serialization, entity-framework-4, datacontractserializer

这个问题有点像[那个](https://stackoverflow.com/questions/10009654/entityframework-calling-tolist-on-iqueryable-with-11-000-records-takes-10-s)问题的续集。

当我们想要构建一个处理某种数据的 WCF 服务时，我们自然希望它快速高效。为了实现这一点，我们必须确保数据之旅的所有部分都尽可能快地工作，从 SQL Server 等数据存储后端到请求该数据的 WCF 客户端。

在寻求上一个问题的答案时，我们了解到，感谢[Slauma](https://stackoverflow.com/users/270591/slauma)和其他通过评论做出贡献的人，Entity Framework 的（第一个）大型查询的耗时部分是对象物化并将实体附加到上下文，当结果来自返回数据库。我们已经看到，在后续查询中，一切都运行得更快。

假设这些大型查询用作只读操作，我们得出的结论是我们可以将 EF 设置`MergeOption`为`NoTracking`，从而产生更好的首次查询性能。我们所做的`NoTracking`是告诉 EF 为从数据库中检索到的每条记录创建单独的对象 - 即使它们具有相同的键。如果我们`.Include()`的查询中有语句，这将导致额外的处理，这将导致返回更大尺寸的数据。

数据可能是如此之大，以至于我们可以很容易地问自己——我们是否真的通过使用`NoTracking`选项来帮助我们的事业，即使我们使查询更快（可能只有第一个，取决于`.Include()`语句的数量，因为后续查询没有`NoTracking`选项使用多个`.Include()`语句运行得更快仅仅是因为`NoTracking`选项会导致在数据从服务器返回时创建更多的对象）？

最大的问题是如何有效地序列化这些数据量——并在客户端进行反序列化。序列化已经很慢了（我使用`DataContractSerializer`with `PreserveObjectReferences`set to`true`是因为我将 EF 4.x 生成的 POCO 发送给我的客户端，反之亦然），我们是否想要生成更多数据（感谢`NoTracking`）？老实说，我还没有看到来自查询的数据，该查询带有`NoTracking`~11.000 个对象的选项，不包括通过 获得的导航属性`.Include()`，但尚未到达客户端。上次我试图解决这个问题时，触发了 00:10:00 的超时（！）

所以如果你还在看这面文字墙，你告诉我如何解决这种情况。使用哪个序列化程序来获得可接受的结果？目前，如果我不使用该`NoTracking`选项，则 ~11.000 的序列化、传输和反序列化，通过`wsHttpBinding`本地机器上的类似自定义绑定需要 ~5 秒。让我害怕的是，这个大表最终很可能会包含约 500.000 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:33:02.143

您是否考虑过为您的对象创建一个视图模型并在 select 语句中进行投影。那应该快很多，所以：

```
 var result = from person in DB.Entities.Persons
    .Include("District")
    .Include("District.City")
    .Include("District.City.State")
    .Include("Nationality")
    select new PersonViewModel()
    {
        Name = person.Name, 
        City = person.District.City, 
        State = person.District.City.State
        Nationality = person.Nationality.Name
    }; 
```

这将要求您创建一个 ViewModel 类来保存 PersonViewModel 的展平数据。

您可以通过创建数据库视图并让 Entity Framework 直接从那里选择来进一步加快速度。

如果您希望前端使用 500.000 条记录填充网格，那么我将完全删除 Web 服务层并使用 DataReader 来加速该过程。实体框架和 WCF 不适合以适当的性能转换数据。你在这里基本上做的是：

> 数据库 -> TDS -> .NET 对象 -> XML -> 纯文本 -> XML -> .NET 对象 -> UI

虽然这可以很容易地简化为：

> 数据库 -> TDS -> 用户界面

然后使用 EntityFramwork 处理业务逻辑中实体的更改。这符合命令和查询分离模式。使用适合高性能数据查询的技术并将其直接链接到您的应用程序。然后使用命令策略来实现您的业务逻辑。

OData 服务还可能提供更好的方式将您的 UI 直接链接到数据，因为它可用于快速查询您的数据，从而允许您在用户没有真正注意到的情况下实现快速过滤。

如果安全设置禁止通过 OData 直接查询或直接访问 SQL 数据库，请考虑自行实现对象。直接从视图或查询中选择数据并使用 a`IDataReader`直接填充您的 ViewModel。这可能会给你最高的性能。

实体框架有很多替代品，特别是因为 EF 不适用于大型数据集。请参阅[FluentData](http://fluentdata.codeplex.com/) [DapperDotNet](https://code.google.com/p/dapper-dot-net/)、[Massive](https://github.com/robconery/massive)或[PetaPoco](http://www.toptensoftware.com/petapoco/)。您可能希望将这些与实体框架并排使用来处理您的大型平面数据查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:40:33.023

我在我的 RIA 应用程序中使用 Json.Net 的 Bson 实现。[更多信息在这里。](http://james.newtonking.com/archive/2010/01/01/net-serialization-performance-comparison.aspx)

当我从数据库中读取数据并序列化行时，我将返回一个 IEnumerable。我发现速度是可以接受的，我返回的实体大约有 20 个属性。这种方法应该最大限度地减少服务器上的并发内存使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:02:29.073

根据我通过查看各种评论和性能基准收集到的信息，我会选择[protobuf-net](http://code.google.com/p/protobuf-net/)作为序列化程序。是否可以插入到我的服务配置中只是设计问题。更多关于[这里](https://stackoverflow.com/questions/10041418/configuring-wcf-client-and-service-for-use-with-protobuf-net)的信息。

虽然不完全是这个问题的答案，但[jessehouwing 给出](https://stackoverflow.com/users/736079/jessehouwing)了最好的答案，我将其标记为已接受。

# c# - 访问 ArrayList 中的 ArrayList

> ID：10017660
> 
> 赞同：0
> 
> 时间：2012-04-04T19:07:39.467
> 
> 标签：c#, arrays, arraylist, unity3d

我确定第一个响应将是“wtf，不要使用数组列表！”，但我真的只是想尽我所能让它工作。

它基本上是第 3 场比赛的“比赛观察者”。我无法访问匹配列表中的匹配数据。见下文..

```
 public void FindAndRemoveMatches() {

    ArrayList foundMatches = LookForMatches();

    //just checking if we're getting the right amount for now
    Debug.Log("We found " + foundMatches.Count + " 'Match 3's");

    foreach(Object el in foundMatches){
       //   Debug.Log(el.ToString());
    }

}

ArrayList LookForMatches(){

    //List<int> matchList = new List<int>();
    ArrayList matchList = new ArrayList();

    // search for horizontal matches
    // note that we're subtracting two rows here.
    // We don't need to check the last two rows because we're matching 3.
    for (int i = 0; i < BOARD_WIDTH; i++){
        for (int j = 0; j < BOARD_HEIGHT-2; j++){
            ArrayList match = GetMatchHoriz(i,j);
            if (match.Count > 2) {
                matchList.Add(match);
                i += match.Count-1;
            }
        }
    }

    // search for vertical matches
    for (int i = 0; i < BOARD_WIDTH; i++){
        for (int j = 0; j < BOARD_HEIGHT-2; j++){
            ArrayList match = GetMatchVert(i,j);
            if (match.Count > 2) {
                matchList.Add(match);
                j += match.Count-1;
            }

        }
    }

    return matchList;
}

// look for horizontal matches starting at this point
ArrayList GetMatchHoriz(int col,int row){
    ArrayList match = new ArrayList();
    match.Add(mBoard[col,row]);

    for(int i = 1; (col+i)<8; i++) {
        if (mBoard[col,row] == mBoard[col+i,row]) {
            if(mBoard[col+i,row] > mPieces.GetNumPieceTypes()) match.Add(mBoard[col+i,row]);
        } else {
            return match;
        }
    }
    return match;
}   

// look for horizontal matches starting at this point
ArrayList GetMatchVert(int col,int row){
    ArrayList match = new ArrayList();
    match.Add(mBoard[col,row]);

    for(int i = 1; (row+i)<8; i++) {
        if (mBoard[col,row] == mBoard[col,row+i]) {
            if(mBoard[col,row+i] > mPieces.GetNumPieceTypes()) match.Add(mBoard[col,row+i]);
        } else {
            return match;
        }
    }
    return match;
} 
```

好消息是，我知道它可以正确找到匹配项。它使用调试日志找到的匹配数与屏幕上发生的事情相关。耶！但是，我需要访问该数据，以便将其与棋盘 (mBoard[col,row]) 进行比较并从游戏棋盘中删除这些对象。

findandremovematches 中的“foreach”循环给出了关于强制转换的错误。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:22:32.627

我希望我能正确理解你的问题

```
foreach(Objecct obj in list)
{
 ArrayList inner = obj as ArrayList;
 if(inner != null)
 {
  //this is what you are looking for
  //you can then iterate the inner array list and get the int[,] you saved
 }
} 
```

但是，按照建议，使用`List<ArrayList>`或者`List<List<int[,]>>`如果我猜对了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:22:46.713

如果您使用 ArrayLists 是因为您认为它们更容易，请不要这样做。使用列表。如果您使用 ArrayLists 是因为您必须使用并且无法使用 List（我对此表示怀疑），那么您将拥有如下内容：

```
foreach(ArrayList innerList in foundMatches)
{
  foreach(SomeClassThatYouAddToInnerLists item in innerlist)
  {
    //use item;
  }
} 
```

替换`SomeClassThatYouAddToInnerLists`为您添加到内部 ArrayLists 的任何类型。（mBoard 的类型。）

如果您使用列表，那么很清楚列表中所有内容的类型。A`List<List<int>>`易于使用。这是一个数字列表的列表。

# c# - 是否有更自动的方式来包装这些接口

> ID：10017666
> 
> 赞同：2
> 
> 时间：2012-04-04T19:08:13.663
> 
> 标签：c#, .net, oop, interface

我正在做一个多平台的事情，但我对 OOP 不是很好。目前我的代码是：

```
 public interface IMessageBox {
        void Show(string Text);
        void Show(string Text, string Description, MessageBoxType Type);
        MessageBoxResult ShowYesNo(string Text, string Description, MessageBoxType Type);
        MessageBoxResult ShowYesNoCancel(string Text, string Description, MessageBoxType Type);
    }

    public class MessageBox : InstanceGenerator {
        public static void Show(string Text) {
            MessageBoxImpl.Show(Text);
        }

        public static void Show(string Text, string Description, MessageBoxType Type) {
            MessageBoxImpl.Show(Text, Description, Type);
        }
        public static MessageBoxResult ShowYesNo(string Text, string Description, MessageBoxType Type) {
            return MessageBoxImpl.ShowYesNo(Text, Description, Type);
        }
        public static MessageBoxResult ShowYesNoCancel(string Text, string Description, MessageBoxType Type) {
            return MessageBoxImpl.ShowYesNoCancel(Text, Description, Type);
        }
    }

protected class InstanceGenerator {
        public static IMessageBox MessageBoxImpl = null;
        public static IWindow WindowImpl = null;

        private static Assembly Instance = null;
        private static string InstanceName = null;

        private static Assembly LoadAssembly(string lib) {
            string AppPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            Assembly assembly = Assembly.LoadFile(Path.Combine(AppPath, lib + ".dll"));
            return assembly;
        }

        private static object CreateInstance(string @class) {
            Type type = Instance.GetType(InstanceName + "." + @class);
            return Activator.CreateInstance(type);
        }

        private static object CreateInstanceFromPath(string lib, string @class) {
            string AppPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            Assembly assembly = Assembly.LoadFile(Path.Combine(AppPath, lib + ".dll"));
            Type type = assembly.GetType(lib + "." + @class);
            return Activator.CreateInstance(type);
        }

        /// <summary>
        /// Inits the whole thing
        /// </summary>
        public static void Init() {
            if (CurrentOS.IsWindows)
                InstanceName = "Lib.Windows";
            else if (CurrentOS.IsMac)
                InstanceName = "Lib.MacOS";
            else if (CurrentOS.IsLinux)
                InstanceName = "Lib.Linux";
            else // no implementation for other OSes
                throw new Exception("No implementation of Lib for this OS");

            Instance = LoadAssembly(InstanceName);

            // initialize the classes
            MessageBoxImpl = (IMessageBox) CreateInstance("MessageBox");
        }
    } 
```

编辑：

其中 InstanceGenerator 返回从程序集加载的 IMessageBox 的实例。有没有更好的方法来创建/连接到实例？实现所有相同的静态方法看起来根本不是一个好的解决方案。有没有更自动的方法来用类包装这些接口，或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:10:09.153

您当前没有实现该接口。您不能使用*静态*方法来实现接口。您必须使用*实例*方法。当然，您可以在实现中*调用*静态方法，但那是另一回事。

听起来不`MessageBox`应该*从*InstanceGenerator 派生 - 我建议它应该*组成*它：

```
public class MessageBox : IMessageBox {

    private readonly InstanceGenerator generator;

    public MessageBox(InstanceGenerator generator) {
        this.generator = generator;
    }

    public static void Show(string Text) {
        generator.MessageBoxImpl.Show(Text);
    }

    public static void Show(string text, string description, MessageBoxType type) {
        generator.MessageBoxImpl.Show(text, description, type);
    }

    public static MessageBoxResult ShowYesNo(string text, string description, 
                                             MessageBoxType type) {
        return generator.MessageBoxImpl.ShowYesNo(text, description, type);
    }

    public static MessageBoxResult ShowYesNoCancel(string text,
                                                   string description,
                                                   MessageBoxType type) {
        return generator.MessageBoxImpl.ShowYesNoCancel(text, description, type);
    }
} 
```

我*假设*这`MessageBoxImpl`还没有实现`IMessageBox`，否则所有这些都是毫无意义的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:16:58.537

您的实现定义了一个实际上不做任何事情的接口。接口的重点是允许您编写类似以下内容的代码：

`instance_implementing_interface.DoSomething();`

你没有那个。相反，您正在定义一个接口，然后使用静态方法重写它所做的一切。接口的想法是，任何想要使用实例来完成其工作的东西都可以采用**任何**实现该接口的实例，并相信它会按照它所说的去做（除非你习惯于对自己撒谎API）。

事实上，在写完以上内容后，我意识到我可能认为你比实际情况更困惑——经过几次重读，你似乎理解了我所说的一切。这让我对你为什么编写你拥有的代码感到困惑。你能解释一下为什么你故意写静态方法`MessageBox`吗？

# jquery - 当我快速鼠标时，jQuery悬停卡住了

> ID：10017674
> 
> 赞同：2
> 
> 时间：2012-04-04T19:08:59.343
> 
> 标签：jquery, css, hover, mouseover

我有一个显示“订阅”的按钮，当用户将鼠标悬停在它上面时，我想用另一个显示“取消订阅”的按钮替换它。

（有点像 Twitter 的“关注”按钮，如果你悬停，它会变成“取消关注”。）

这是我到目前为止所得到的。

```
$(document).ready(function(){
    $('#subscribed_button').hover(function(){
        $('#subscribed_button').css("display","none");
        $('#unsubscribe_button').css("display","inline");
    },function(){
    });
    $('#unsubscribe_button').hover(function(){
    },function(){
        $('#unsubscribe_button').css("display","none");
        $('#subscribed_button').css("display","inline");
    });
}); 
```

一切都很好，*除非*我快速鼠标，在这种情况下，似乎检测到“悬停”，而不是“悬停”。所以我的按钮偶尔会卡在“取消订阅”中……这很奇怪，而且在视觉上会分散注意力。

我在 Stackoverflow 上看到的大多数解决方案都与停止动画有关，但在这种情况下，我没有制作任何动画；这是一个简单的显示开/关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:19:25.793

如果没有看到它的实际效果，我假设这是因为您正在显示/隐藏 2 个不同的 html 元素。当您将鼠标快速移出时，非活动元素可能尚未激活，等等等等，从而导致问题。

为了获得更好的稳定性和性能，我建议以下内容：

仅使用一个 html 元素进行订阅/取消订阅，而不是显示/隐藏 2 个元素，只需更改按钮的文本和/或通过更改 css 类等替换背景图像。如果使用图像背景将使用包含两种状态的单个背景图像，并根据当前状态更新背景位置。

以上只是一个概念，因为您尚未发布整个代码，因此无法针对上述内容进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:21:22.510

我只会使用一个元素：

```
$(function() {
    var $sub = $('#subscribe_button');

    $sub.hover(function() {
        $sub.text('Unsubscribe');
    }, function() {
        $sub.text('Subscribe');
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:20:58.863

在 jQuery 中有称为 mouseenter 和 mouseleave 的方法。[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/) 如果您使用它们，它将有助于正确冒泡并解决您的问题。

# c++ - 基于论点的积极性专门化模板

> ID：10017677
> 
> 赞同：5
> 
> 时间：2012-04-04T19:09:08.717
> 
> 标签：c++, templates, math

给定一个模板

```
template <int n>
void f(){...}; 
```

我知道我可以通过以下方式将其专门用于特定值`n`：

```
template <>
void f<2>(){...}; 
```

但是，有没有一种方法可以让我将它专门用于所有积极的`n`？

我想过做以下事情

```
template <int n>
void f<n>(){
    int dummy[n]; //invalid for n < 0
    ...
}; 
```

所以对于`n<0`这段代码是无效的，编译器会求助于之前的定义。不幸的是，我得到的只是一个`redefinition of 'void f<n>()'`错误。

*注意：我猜这可能不受标准支持。我在问是否没有某种方法（可能是一些模板元编程）来实现这种效果。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T19:13:08.113

一种选择是使用另一种间接级别。定义一个辅助模板，它接受两个参数 - 数字`n`和`bool`表示是否`n`为负的 a，然后将该模板专门用于何时`n`为负。然后，让您的`f`函数使用正确的参数实例化模板。

例如：

```
template <int n, bool isNegative> struct fImpl {
    static void f() {
       /* ... code for when n is positive ... */
    }
};
template <int n> struct fImpl<n, true> {
    static void f() {
       /* ... code for when n is negative ... */
    }
};

template <int n> void f() {
    fImpl<n, (n < 0)>::f();
} 
```

另一种选择是使用[SFINAE 重载](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)和`std::enable_if`C++11 中的模板类（或 Boost 的等价物）；

```
template <int n> void f(typename std::enable_if<(n < 0)>::type* = 0) {
    /* ... n is negative ... */
}

template <int n> void f(typename std::enable_if<(n >= 0)>::type* = 0) {
    /* ... n is positive ... */
} 
```

这些函数中的每一个只有在`n`具有正确符号的情况下才可用于重载解析，因此将始终调用正确的版本。

希望这可以帮助！

# php - 服务器从 PHP 5.2 升级到 5.3 和 Wordpress

> ID：10017678
> 
> 赞同：0
> 
> 时间：2012-04-04T19:09:11.867
> 
> 标签：php, wordpress, expressionengine

我的托管服务器正在从 PHP 版本 5.2.x 升级到 5.3.x，并且我安装了一些 WordPress 和 ExpressionEngine。我想知道是否有人知道此升级是否会以任何方式影响我的网站。

我知道 EE 的最低要求是 5.1.6，而 WordPress 的最低要求是 5.2.4。所以，看起来他们应该没问题，但我从来没有发生过这种情况，只是想知道要注意什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:53:33.573

升级来不及了——php5.2 已经正式停止支持将近两年了。（有些人甚至会说仍在使用 5.2 的服务提供商正在积极疏忽他们的安全）

Wordpress 是一个流行的软件包，在很多网站上都有使用。他们中的许多人将运行 5.3 多年。即使 Wordpress 从前不能在 5.3 上运行，它也会在很久以前被迫更新以支持它。

我记得三年前 Drupal 受到了很多批评，因为 Drupal 6 与 5.3 不完全兼容，而且他们还没有完成 Drupal 7。那是*三*年前的事了。

简而言之，只要您使用的是最新版本的 Wordpress（或任何其他 CMS），并且您使用的插件得到适当支持且是最新的，就完全没有理由担心。

反之，如果你的版本老到不支持 php 5.3，那么你就需要紧急升级，因为 PHP 5.2 到 5.3 之间取出的东西都是出于安全考虑；他们删除并弃用了从根本上不安全的旧 PHP 功能。因此，如果您的软件在 5.3 中无法使用，则意味着它可能使用了那些不安全的功能。

最后的想法：[http ://wordpress.org/about/stats/](http://wordpress.org/about/stats/)

我注意到 WP 统计页面显示三分之一的 WP 安装在 5.3 上。这应该足以证明它有效。

（不过，鉴于我在第一段中所说的，我有点担心仍然在 5.2 上的三分之二）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:34:30.230

你的 EE 网站是什么版本的？如果您在 1.x 分支上，那么您至少需要升级到 1.7.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:15:41.640

根据我的经验，在进行这样的升级时，网格服务提供商将管理该过渡，如果您的站点无法正常运行有任何问题，您可以从他们那里获得帮助。

但是，我认为您不太可能看到任何问题。

# visual-studio-2010 - 如何从针对 64 位机器的 VS 2010 解决方案调用 32 位 COM 互操作 dll

> ID：10017681
> 
> 赞同：2
> 
> 时间：2012-04-04T19:09:21.760
> 
> 标签：visual-studio-2010, com, x86, 64-bit

我正在使用 c# 开发 Windows 客户端应用程序，在我的 VS 2010 解决方案中有两个项目，启动项目和一个使用第三方 COM 互操作 DLL 的类库。我的桌面是 64 位的，所有客户端机器都是 64 位的好。

如果我将启动项目保留为（构建设置）中的任何 cpu 和调用 COM DLL 的第二个项目的 x86，我将收到以下错误：

```
Could not load file or assembly ... or one of its dependencies. An attempt was made load a program with an incorrect format. 
```

如果我将两个项目都保留为 Any cpu，则会收到以下错误：

`Retrieving the COM class factory for component with CLSID .. failed due to the following error:`

知道如何在不将解决方案（所有项目）转换为 x86 的情况下解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:16:12.637

好吧，我建议你看看[DLL surrogates](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684044%28v=vs.85%29.aspx)。这个技巧肯定会解决你的问题，但前提是你可以在注册表中更改 DLL inrpoc 服务器的注册信息。如果该类被配置为使用代理，它将在单独的进程中运行。COM 允许从 64 位应用程序使用进程外 32 位 COM 服务器。

您需要更改的所有内容如下所示：

查看注册表中的以下条目：

```
HKCR\CLSID\{CLSID_CoClass} 
```

看看它是否有 AppID 字段。如果是这样，只需访问此注册表项：

```
HKLM\Software\Classes\AppID\{APPID} 
```

并添加没有值的 DllSurrogate 字符串键。

如果该类没有关联的 AppID，您可以自己创建它。然后，您可以使用来自 64 位目标 .net 应用程序的 32 位 inproc 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:34:22.720

可能最简单的做法就是将您的主要可执行文件设置为 x86。它的应用程序将确定其余程序集如何被 jit。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-17T13:56:27.207

以上都不适合我。但是您可以做的是，当您单击“添加引用”时，通过 COM 选项卡选择相关引用，而不是浏览到 DLL。这使其特定于版本，因此如果您选择 32 位版本，运行时将随之而来。此外，请确保您已为应用程序池选择了相关的 .NET 框架版本，并且您可能希望将“启用 32 位应用程序”设置为 true（高级应用程序池设置）。

# javascript - 悬停时如何向网页上的单词添加弹出（工具提示）定义？

> ID：10017684
> 
> 赞同：4
> 
> 时间：2012-04-04T19:09:44.073
> 
> 标签：javascript, jquery, tooltip

我的 250 页网站有一个包含许多单词及其定义的词汇表。我想找到一种方法，让词汇表中的单词在出现在网站文本中时突出显示，并在悬停时显示一个“工具提示”气泡，显示单词的定义。我的网站页面都是 html - 我没有使用 CMS。

我想我需要为此使用javascript。我看了又看，找到了可以突出显示某些文本的javascript函数（即将它包装在span标签中），但我不知道如何让它遍历单词数组并包含它们的定义，我'我不确定这会占用多少资源。

是否存在一个对我有用的词汇表类型程序，而无需手动更新整个网站中每个单词的每个实例？还是有一种相当简单的方法来实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:46:18.210

这可以使用 JQuery 来完成，并将词汇表作为页面上的隐藏 div，如果需要，可以使用 AJAX 加载。

```
$("#glossary h2").each(function(index) {
  // Get the word and its definition.
  var word = $(this).text();
  var def = $("#glossary").find("p")[index].innerHTML;

  // Update all instances of that word in the content page with mouse over def.
  var contentHTML = $("#content").html();
  contentHTML = contentHTML.replace(new RegExp(word, 'g'), '<span title="' + def + '">' + word + '</span>');
  $("#content").html(contentHTML);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div id="content">
  Will likes to hang out with Jim.
</div>

<div id="glossary" style="display:none;">
  <h2>Will</h2>
  <p>This is will's def.</p>
  <h2>Jim</h2>
  <p>This is jim's def.</p>
</div>
```

上面的函数假设你有一个`<p>`for each`<h2>`并且所有的内容`<p>`都是定义的一部分。

# java - ActiveMQ 代码在 Windows 中工作但在 CentOS 中失败

> ID：10017687
> 
> 赞同：0
> 
> 时间：2012-04-04T19:09:58.297
> 
> 标签：java, jms, centos, activemq

我正在使用一个具有核心应用程序的框架，以及所有通过 ActiveMQ（通过 Camel）使用 JMS 进行通信的辅助应用程序。这一切似乎在 Windows 上运行良好，但是当我将它移到我们的 CentOS 环境时它失败了。让我注意，我们编写它的那个人以及我们的 ActiveMQ 人已经离开了，所以我不知道如何诊断这个问题。它似乎正在建立连接，但随后什么也没做。它应该开始交换消息，但它没有。当我将日志记录设置为调试时，我收到消息说“urlList connectionList：[]”和“在尝试连接之前等待 x 毫秒”，就好像它没有连接一样。我已经确定没有防火墙，没有安全策略来阻止它，ActiveMQ 显示正在运行。我' 我已经尝试了我能想到的一切，但我不知道问题可能是什么。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:40:32.150

尝试通过 Web 控制台测试 ActiveMQ 以确保其正常运行。接下来，尝试通过 JMX 远程连接并验证它是否也有效。这可能是一个环境问题，很难通过给出的信息来诊断......

有关更多信息，请参阅这些页面...

[http://activemq.apache.org/web-console.html](http://activemq.apache.org/web-console.html)

[http://activemq.apache.org/jmx.html](http://activemq.apache.org/jmx.html)

# selenium - 我们如何强制硒专注于新标签？

> ID：10017688
> 
> 赞同：1
> 
> 时间：2012-04-04T19:10:00.140
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-chromedriver

单击继续按钮后，我的一个应用程序会刷新并在新选项卡中打开并关闭具有继续按钮的旧选项卡。

无论如何，我们可以选择新选项卡作为当前窗口并继续前进吗？

我使用了以下不起作用的代码。

```
selenium.select("");
selenium.select(null); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:44:06.413

selenium 服务器还有一个附加选项。您可以在启动 selenium 服务器时添加 -singlewindow 参数。此参数将强制 selenium 在同一帧中打开所有页面。请在此处查看更多详细信息：[http ://seleniumhq.org/docs/05_selenium_rc.html#server-options](http://seleniumhq.org/docs/05_selenium_rc.html#server-options)

最好的问候帕维尔

# java - 首选 Equals() 方法实现

> ID：10017689
> 
> 赞同：3
> 
> 时间：2012-04-04T19:10:03.303
> 
> 标签：java

这是一个关于当我需要在 List 中查找对象的实例时如何实现 equals 方法的问题，给定一个我在其成员中拥有的实例的值。

我有一个实现等于的对象：

```
class User {

    private String id;

    public User(id) {
        this.id = id;
    }

    public boolean equals(Object obj) {
        if (!(obj instanceof User)) {
            return false;
        }
        return ((User)obj).id.equals(this.id);
    }
} 
```

现在，如果我想在 List 中找到一些东西，我会这样做：

```
public function userExists(String id) {
        List<Users> users = getAllUsers(); 
        return users.contains(new User(id));
} 
```

但也许这可能是一个更好的实现？

```
class User {

    private String id;

    public boolean equals(Object obj) {
        if (!(obj instanceof User)) {
            return false;
        }
        if (obj instanceof String) {
            return ((String)obj).equals(this.id);
        }
        return ((User)obj).id.equals(this.id);
    }
} 
```

用这个代替：

```
public function userExists(String id) {
    List<Users> users = getAllUsers(); 
    return users.contains(id);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T19:15:54.557

第二种方式是危险的，因为它破坏了等式的*对称性*。

Java 期望 的实现`equals()`是自反的、对称的和传递的。第二种实现打破了对称性：如果您将`User`其与`String`表示它的 ID 进行比较，您将得到`true`，但如果将字符串与用户进行比较，您将获得`false`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T19:17:08.823

不要为数学上不相等的事物覆盖等于。

你可能认为这样做是个好主意

```
User bob = new User("Bob");
if (bob.equals("Bob")) {
  ...
} 
```

但它很少。您是否希望所有 equals 观察代码在`Strings`“等于”时感到困惑`Users`？

如果你想要一个查找方法，写它

```
class User {

    private String id;

    public boolean equals(Object obj) {
        if (obj instanceof User) {
            User other = (User)obj;
            if (id.equals(other.id)) {
              return true;
            }
        }
        return false;
    }

    public String getId() {
        return id;
    }

} 
```

然后在别处的代码维护“快速查找”表。

```
Map<String, User> idTable = new HashMap<String, User>();
User bob = new User("Bob");
idTable.put(bob.getId(), bob);

public User findUser(String id) {
  return idTable.get(id);
} 
```

请注意，这不会与 equals 实现混淆，因此现在您可以安全地拥有`Sets`of `Users`，`Lists`of`Users`等，而不必担心 String 是否会以某种方式破坏作品。

现在如果你找不到一个好的地方来维护一个`Map`由`Users`他们索引的`id`，你总是可以使用较慢的`Iterator`解决方案

```
List<User> users = new List<User>();
users.add(new User("Bob"));
users.add(new User("Steve"));
users.ass(new User("Ann"));

public User findUser(String id) {
  Iterator<User> index = users.iterator();
  while (index.hasNext()) {
    User user = index.next();
    if (id.equals(user.getId())) {
      return user;
    }
  }
  return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:16:35.877

首先，您的第二个实现在功能上与第一个实现等效，因为 的实例`String`不是 的实例`User`，并且第一条语句将在检查 a发生`return`之前将其短路。`String`

我的意思是，

```
public boolean equals(Object obj) {
    if (!(obj instanceof User)) { // This will execute if obj is a String
        return false;
    }
    if (obj instanceof String) {
        // Never executes, because if obj is a String, we already
        // returned false above
        return ((String)obj).equals(this.id);
    }
    return ((User)obj).id.equals(this.id);
} 
```

所以对于剩下的答案，我会假设它的意思是

```
public boolean equals(Object obj) {
    if ( obj == null ) return false; // Add a null check for good measure.
    if (!(obj instanceof User)) {
        if (obj instanceof String) {
            // Now we're checking for a String only if it isn't a User.
            return ((String)obj).equals(this.id);
        }
        return false;
    }
    return ((User)obj).id.equals(this.id);
} 
```

现在我们来解决实际问题。

实现一个`equals`返回`true`以进行`User`比较`String`的做法是不好的做法，因为`equals`预计它是**对称**的（`a.equals(b)`当且仅当`b.equals(a)`）。因为 a`String`永远不能等于 a `User`，所以 a 永远`User`不应该等于 a `String`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:41:52.930

如果您覆盖 Object.equals()，请不要忘记覆盖 Object.hashCode()。

相等的对象必须具有相等的哈希码，如果您不遵守合同，您可能会遇到 Collections 的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T19:19:17.630

第二个选择非常糟糕。这意味着您允许用户传递除 a 之外的其他内容`User`（`User.equals()`即，实际上`Object.equals()`，当您并没有*真正*尝试将字符串与用户进行比较时。因此，您实质上违反了`equals`应做的合同。

此外，您的答案都没有处理空值检查。

# javascript - 信息窗口内的街景

> ID：10017693
> 
> 赞同：0
> 
> 时间：2012-04-04T19:10:26.207
> 
> 标签：javascript, jquery, css, maps

我需要来自地图窗口的信息，其中包含谷歌街景和文本位置。谁能帮我解决？我正在学习编程，很难单独解决。谢谢（下面是我的代码）

```
function initialize() {
var pinkParksStyles = [
    {
      featureType: "all",
      stylers: [
        { saturation: -80 }
      ]
    },
    {
      featureType: "poi.park",
      stylers: [
        { hue: "#ff0023" },
        { saturation: 40 }
      ]
    }
  ];

var pinkMapType = new google.maps.StyledMapType(pinkParksStyles,
    {name: "Paul em Floripa"});
var mapOptions = {
    zoom: 15,
    center: new google.maps.LatLng(-27.619279,-48.527896),
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP,'pink_parks','satellite' ]
    }
  };
var map = new google.maps.Map(document.getElementById('map_canvas'),  mapOptions);
var marker = new google.maps.Marker({})
var infowindow = new google.maps.InfoWindow();
var locations = [
                   ['Estacionamento 1', -27.627525,-48.52762, 1],
                   ['Estacionamento 2', -27.624374,-48.527786, 2],
                   ['Estacionamento 3', -27.620154,-48.529138, 3],
                   ['Estacionamento 4', -27.616161,-48.529588, 4],
                   ['Estacionamento 5', -27.61393,-48.533349, 5],
                   ['Estacionamento 6', -27.613129,-48.535352, 6],
                   ['Estacionamento 7', -27.612637,-48.530493, 7],
                   ['Estacionamento 8', -27.616962,-48.527746, 8],
                   ];

var marker, i;
  for (i = 0; i < locations.length; i++) {  
    marker = new google.maps.Marker({
      icon: 'images/stopcar.png',
      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
      map: map
    });

google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
        infowindow.setContent(locations[i][0]);
        infowindow.open(map, marker);
      }
   })(marker, i));
}

map.mapTypes.set('pink_parks', pinkMapType);
map.setMapTypeId('pink_parks');
trafficLayer.setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:39:23.600

好的，我猜你想在信息窗口中放一张街景的静态图片。如果是这种情况，请查看此链接：[https ://developers.google.com/maps/documentation/streetview/](https://developers.google.com/maps/documentation/streetview/)

确切地写下了如何获取特殊位置的街景静态图片。

# android - 将安卓游戏发布到市场/Google play

> ID：10017698
> 
> 赞同：1
> 
> 时间：2012-04-04T19:10:46.630
> 
> 标签：android, upload, google-play, currency

我几乎完成了我的第一个安卓游戏，我想在上面赚点钱。我想知道我是否应该以几美元的价格上传它，或者我是否会上传一个免费和付费版本，并在免费版本上添加。你认为我会在什么方面赚到最多？？？请分享你的想法，让我现在。最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:14:24.720

您将几乎一无所获（我排除您已经是成功且经验丰富的游戏设计师，能够提供独特的东西）。如果您上传付费版本，您将无法下载。如果您放置免费版本并正确推广 - 您将获得一些下载。如果游戏成功，您将获得更多下载等。因此，您最好的收入来源将是广告——但不要期望太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:34:43.917

答案是两者都需要。您需要提供某种免费试用，以便人们可以看到他们是否喜欢您的产品。这个可能包含广告。为了在广告上赚钱，你需要在你的应用中获得大量的浏览量。

您还应该提供“无广告”版本，以便喜欢您的应用的人可以支持您并摆脱广告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T14:52:30.533

我即将进入“在 android 中发布游戏”这件事，我和你写这篇文章时处于同一阶段（我几乎完成了游戏的编码，正在考虑发布）

现在距离你发布这个游戏已经一年半了（我假设你已经发布了），我很想知道一切进展如何——你能分享你的经验吗？

# jquery - jQuery 1.7 在表格之间来回移动行

> ID：10017700
> 
> 赞同：0
> 
> 时间：2012-04-04T19:11:08.627
> 
> 标签：jquery, events, append, row

我有两个表，我试图在 -`searchResultsTable`和`selectedCustomersTable`. 这是一项非常简单的任务 - 只需能够在两个表之间连续来回移动行。

我将多行从`searchResultsTable`其中移入`selectedCustomersTable`，反之亦然。因此，用户可以使用添加和删除按钮在两个表之间连续地前后移动行。

添加按钮是当`searchResultsTable`已选择行并且您想要将这些移动到`selectedCustomersTable`. 这样可行。

删除按钮用于选择 中的行`selectedCustomersTable`并将它们删除/将它们移回`searchResultsTable`. 这似乎不起作用。在来回移动行几次后，事件似乎丢失了，它就停止了工作。我正在尝试`.on`在 jquery 1.7 中使用事件，但没有运气。“在两个表之间移动行”功能不会一遍又一遍地工作。就像它工作一次，然后它不会一遍又一遍地工作。

这是我的 jQuery 代码 - 有人可以看到问题所在并提供一种方法来让它一遍又一遍地工作吗？一遍又一遍——意思是——如果用户愿意的话，永远在两个表之间来回移动行。

```
<script type="text/javascript">
    $(function () {
        $('#searchResultsTable').on('click', function (e) {
            bindTableEvents();
        });
        $('#selectedCustomersTable').on('click', function (e) {
            bindTableEvents();
        });

        bindTableEvents();

        function bindTableEvents() {
            var $t1 = $('#searchResultsTable');
            var $t2 = $('#selectedCustomersTable');
            alert('in');
            setupTable($t2);
            setupTable($t1);
        }

        function setupTable($table) {
            $table.initializeTable({
                navigate: {
                    control: { keyboard: true, mouse: true },
                    select: { multiple: true }
                }
            });

            $table.on('mouse', function (e, event) {
                if (event.which == 1 && !event.ctrlKey && !event.shiftKey) {
                    var $selected = $table.selected();
                    if ($selected.length == 1) {
                        !$selected.hasClass('active');
                    }
                }
            });

            $table.on('keyboard', function (e, event) {
                var $selected = $table.selected();
                switch (event.which) {
                    case 13:
                        //ENTER
                        if ($selected.length == 1) {
                            !$selected.hasClass('active');
                        }
                        if ($selected.length > 0) {

                        }
                        break;
                    case 46:
                        //DELETE
                        if ($selected.length > 0) {

                        }
                        break;
                }
            });
        }

        $('#addButton').click(function () {
            var selectedRows = $('#searchResultsTable').selected();
            $('#selectedCustomersTable').append(selectedRows.removeClass('focus').remove());
        });

$('#removeButton').click(function () {
            var selectedRows = $('#selectedCustomersTable').selected();
            $('#searchResultsTable').append(selectedRows.removeClass('focus').remove());
            });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:08:38.267

我也在这个问题上苦苦挣扎。但我正在寻找直接移动这些行。这是我的解决方案：

```
$(document).ready(function() {
    $("#searchResultsTable tbody").on("click","tr", function() {
        var tr = $(this).closest("tr").remove().clone();
    $("#selectedCustomersTable tbody").append(tr);
    });
    $('#selectedCustomersTable table tbody').on("click","tr", function() {
            var tr = $(this).closest("tr").remove().clone();
            $("#searchResultsTable tbody").append(tr);
    }); 
}); 
```

这里的重点是绑定tbody上的事件处理，处理table行的点击。因此，插入到第二个表中的新 HTML 元素保留了向后移动的功能，因为 tbody 处理了事件。

# r - R CMD 检查选项“更严格的测试” - 2.15.0

> ID：10017702
> 
> 赞同：7
> 
> 时间：2012-04-04T19:11:16.627
> 
> 标签：r, cran

根据 2.15 的[发行说明](https://stat.ethz.ch/pipermail/r-announce/2012/000551.html)：

> 通过环境变量选择的 R CMD 检查，有一些新选项可以进行更严格的测试——请参阅“编写 R 扩展”手册。

1.  相对于默认的检查集是否“更严格”？
2.  我在手册中找不到支持文本。我确定我只是想念它
3.  我指定哪些选项来执行最严格的测试？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-04T19:13:37.690

尝试`R CMD check --as-cran foo_1.2-3.tar.gz`

新`--as-cran`选项将其中的一些集合在一起；这在 r-devel 上进行了讨论。

此外，在 R 2.15.0 发布前几周，我将其添加到`~/.R/check.Renviron`. 这些记录在“R Internals”手册中：

```
# See R Internals manual
_R_CHECK_CRAN_INCOMING_=TRUE
_R_CHECK_FORCE_SUGGESTS_=FALSE
_R_CHECK_VC_DIRS_=TRUE
_R_CHECK_UNSAFE_CALLS_=TRUE
_R_CHECK_TIMINGS_=10
_R_CHECK_INSTALL_DEPENDS_=TRUE
_R_CHECK_SUGGESTS_ONLY_=TRUE
_R_CHECK_NO_RECOMMENDED_=TRUE
_R_CHECK_SUBDIRS_NOCASE_=TRUE
_R_CHECK_EXECUTABLES_EXCLUSIONS_=FALSE
_R_CHECK_LICENSE_=TRUE
_R_CHECK_DOC_SIZES2_=TRUE
_R_CHECK_CODETOOLS_PROFILE_='suppressPartialMatchArgs=false'
#
_R_CHECK_VIGNETTES_NLINES_=50
_R_CHECK_DOT_INTERNAL_=TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:47:03.147

看起来：

1.  是的，“更严格”是相对于一组默认检查而言的。默认检查不会测试可以测试的所有内容。

2.  最严格的测试方法是通过 check.Renviron 中的配置文件值指定所有可能的测试（参见 R Internals 和 Writing R Plugins 手册）

3.  没有简单的方法（即命令行参数）来检查它。当新版本的 R 发布时，包作者必须维护一个配置文件 (check.Renviron)。

# java - 避免使用“instanceof”

> ID：10017703
> 
> 赞同：10
> 
> 时间：2012-04-04T19:11:20.057
> 
> 标签：java, oop, design-patterns, refactoring, polymorphism

我正在努力避免在我的一些代码中使用 instanceof() 。这个人为的例子在某种程度上抓住了这个问题。

```
Class Meat extends Food;

Class Plant extends Food;

Class Animal;

Class Herbivore extends Animal
{
    void eat( Plant food);
}

Class Carnivore extends Animal
{
    void eat( Meat food);
}

Class Omnivore extends Animal
{
    void eat(Food food);
}

Class Zoo
{
    List<Animals> animals;

    void receiveFood( Food food)
    {
        // only feed Plants to Herbivores and Meat to Carnivores
        // feed either to Omnivores
    }
} 
```

草食动物只对植物感兴趣，食肉动物只对肉类和杂食动物都感兴趣。当动物园收到食物时，只有尝试给吃这种食物的动物喂食才有意义。

我已经想到了一些解决方案，但似乎都依赖于`instanceof()`某个地方的使用，而我的各种重构似乎只是在移动它。

(1) 我可以`eat( Food food)`在 Animal 中实现，并且每个子类都可以选择忽略它不吃的食物，但这是低效的，并且需要每个 Animal 子类使用`instanceof()`来测试食物的类型。

(2) 我可以根据动物所吃的食物类型在动物园中饲养三组动物，但仍然必须使用`instanceOf()`测试食物类型来查看将其喂给哪个集合。至少这会更有效率，因为我不会给不吃它的动物喂食。

我已经想到了其他一些方法，但同样，它们似乎只是在`instanceof()`推卸责任。

有什么建议么？或者这（至少2个）是可接受的用途`instanceof()`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T20:14:45.900

访问者模式解决了您的问题。这是代码：

```
public abstract class Animal {
  public abstract void accept(AnimalVisitor visitor);
}

public interface AnimalVisitor {
  public void visit(Omnivore omnivore);
  public void visit(Herbivore herbivore);
  public void visit(Carnivore carnivore);
}

public class Carnivore extends Animal {
  @Override
  public void accept(AnimalVisitor visitor) {
    visitor.visit(this);
  }

  public void eat(Meat meat) {
    System.out.println("Carnivore eating Meat...");
  }
}

public class Herbivore extends Animal {
  @Override
  public void accept(AnimalVisitor visitor) {
    visitor.visit(this);
  }

  public void eat(Plant plant) {
    System.out.println("Herbivore eating Plant...");
  }
}

public class Omnivore extends Animal {
  @Override
  public void accept(AnimalVisitor visitor) {
    visitor.visit(this);
  }

  public void eat(Food food) {
    System.out.println("Omnivore eating " + food.getClass().getSimpleName() + "...");
  }
}

public abstract class Food implements AnimalVisitor {
  public void visit(Omnivore omnivore) {
    omnivore.eat(this);
  }
}

public class Meat extends Food {
  @Override
  public void visit(Carnivore carnivore) {
    carnivore.eat(this);
  }

   @Override
  public void visit(Herbivore herbivore) {
    // do nothing
  }
}

public class Plant extends Food {
   @Override
  public void visit(Carnivore carnivore) {
    // do nothing
  }

   @Override
  public void visit(Herbivore herbivore) {
    herbivore.eat(this);
  }
}

public class Zoo {
  private List<Animal> animals = new ArrayList<Animal>();

  public void addAnimal(Animal animal) {
    animals.add(animal);
  }

  public void receiveFood(Food food) {
    for (Animal animal : animals) {
      animal.accept(food);
    }
  }

  public static void main(String[] args) {
    Zoo zoo = new Zoo();
    zoo.addAnimal(new Herbivore());
    zoo.addAnimal(new Carnivore());
    zoo.addAnimal(new Omnivore());

    zoo.receiveFood(new Plant());
    zoo.receiveFood(new Meat());
  }
} 
```

运行`Zoo`演示打印

```
Herbivore eating Plant...
Omnivore eating Plant...
Carnivore eating Meat...
Omnivore eating Meat... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T19:13:24.783

在您的情况下，如果对象的使用者必须知道有关该对象的某些事情（例如它是肉），请在您的基类中包含一个属性`isMeat()`并让具体的子类覆盖基类方法的实现以返回适当的值。

将知识留在课堂本身，而不是课堂的消费者中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T19:14:11.677

一个简单的解决方案是当使用多个自定义类相互交互时，只需创建 isFood()、isAnimal()、isCarnivore() 等方法，这些方法根据它们所在的类返回一个布尔值。这不是最漂亮的，但它100% 的时间完成工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:24:48.943

扩展我的评论，我会尝试使用泛型来帮助我：

```
interface Animal<T extends Food> {
    void eat(T food);
}

class Herbivore extends Animal<Plant> {
    void eat(Plant food) { foo(); }
}

class Carnivore extends Animal<Meat> {
    void eat(Meat food) { bar(); }
} 
```

请注意，这仍然不能解决遍历列表并仅向每只动物发送适当食物的问题`Food`——如果没有明确的样式检查`Animal`，我看不到这样做的方法。`instanceof`但是，它确实允许您更具体地了解您的子类接受的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:01:45.970

另一种解决方案是维护 2 个列表：一个用于草食动物，一个用于食肉动物。

# java - java sortedhashset 类型集合是否存在？

> ID：10017707
> 
> 赞同：0
> 
> 时间：2012-04-04T19:11:38.217
> 
> 标签：java, collections

这样的事情是否存在于任何地方？基本上我看到 java 有 LinkedHashSet 但没有类型的可导航哈希集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:16:37.060

这不是一个`HashSet`，但作为`Set`你的后裔有[`TreeSet`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TreeSet.html)

> 此类实现由 TreeMap 实例支持的 Set 接口。此类保证已排序的集合将按元素升序排列

您可以使用迭代器遍历元素

> **公共迭代器 iterator()**
> 
> 返回此集合中元素的迭代器。元素按升序返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:20:42.483

就其本质而言，基于散列的数据结构是无序的。您可以编写包装器，用附加的数据结构对其进行补充（这或多或少是`LinkedHashMap`这样做的）。但是，虽然保留散列集和列表是有意义的，但为了保持良好的排序，您需要一个树或类似的数据结构。但是树本身可以作为一个集合工作，因此您基本上会复制信息（比集合加列表的情况更多，这与两个不同的集合实现不同）。因此，如果您需要订购，最好的解决方案是只使用`TreeSet`或其他。`SortedSet`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T19:35:23.367

您可以使用 TreeSet 但其中的所有操作都是 lg(n)

您可以使用 LinkedHashSet，它在哈希集之上保留一个链表，但它只维护插入顺序（第一个插入将是迭代器中的第一个元素），您不能有自然或自定义排序

您也可以使用 TreeSet+HashSet 方法，但每个元素的两个引用将被保留，而 add 和 remove 仍然是 lg(n) 包含将成为预期的 o(n)

做出明智的选择 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T22:48:52.857

我猜有 TreeMap 是...相关但绝对不一样 :)

# animation - CSS3 过渡/动画不起作用

> ID：10017708
> 
> 赞同：1
> 
> 时间：2012-04-04T19:11:45.127
> 
> 标签：animation, css, css-transitions

当涉及到过渡和动画时，我正试图围绕 CSS3 进行思考。我有一些盒子，当鼠标悬停在盒子上时，我希望标题和描述能够动画化。

为了让它工作，我想我必须在包装元素的 :hover 事件被触发时定义动画。我想我只是没有在我的 CSS 中正确执行这个。

[http://jsfiddle.net/qXdNc/](http://jsfiddle.net/qXdNc/)

```
.feature-box, .feature-box-title, .feature-box-image, .feature-box-desc {
    -webkit-transition: all 300ms linear;
    -moz-transition: all 300ms linear;
    -o-transition: all 300ms linear;
    -ms-transition: all 300ms linear;
    transition: all 300ms linear;
}
.feature-box:hover .feature-box-title {
    -webkit-animation: moveFromRight 300ms ease;
    -moz-animation: moveFromRight 300ms ease;
    -ms-animation: moveFromRight 300ms ease;
}
.feature-box:hover .feature-box-desc {
    -webkit-animation: moveFromBottom 500ms ease;
    -moz-animation: moveFromBottom 500ms ease;
    -ms-animation: moveFromBottom 500ms ease;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:09:25.693

您将过渡与动画混合在一起，您不应该那样做。

动画关键帧`moveFromBottom`,`moveFromRight`等未在您的 CSS 中定义。

转换定义了当属性更改时 DOM 应该如何动画，但它们没有定义哪些属性更改。我喜欢将过渡视为动画的捷径。

动画要复杂得多，但功能要强大得多。但我不认为你需要动画来实现你想要的。

我稍微更改了您的 jsFiddle，删除了动画并使用过渡添加了旋转。链接在这里：

[http://jsfiddle.net/canassa/qXdNc/1/](http://jsfiddle.net/canassa/qXdNc/1/)

# windows - 使用 Node.js Windows 连接到 Oracle 数据库

> ID：10017710
> 
> 赞同：7
> 
> 时间：2012-04-04T19:11:48.200
> 
> 标签：windows, oracle, node.js

我正在尝试从 Windows 7 中的 Node.js 连接到 Oracle 数据库。这可能吗？我还没有找到适用于 Windows 的 Node.js 插件。有什么推荐的解决方法吗？我猜至少还有其他人想在 Windows 上使用 Node.js 并且需要连接到 Oracle。如果有必要，我愿意接受简单的解决方法。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:59:38.290

你需要直接从 Node.js 连接到 oracle 吗？您可以用另一种语言编写数据库事务，并通过 Web 服务将它们公开给 Node.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T18:48:37.950

有 Oracle oracledb 制作的驱动程序[http://www.oracle.com/technetwork/database/database-technologies/node_js/oracle-node-js-2399407.html](http://www.oracle.com/technetwork/database/database-technologies/node_js/oracle-node-js-2399407.html)

更新：Oracle 已在[GIT](https://github.com/oracle/node-oracledb)`node-oracledb`上发布了一个驱动程序，该驱动程序将允许 nodejs 应用程序连接到 Windows 上的 oracle DB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-08T02:09:11.440

与我们多年来在 ADO.NET 中提供的强大且高性能的数据库驱动程序相比，Windows 上 node.js 的数据库驱动程序的状态似乎有些不成熟。

我会认真考虑使用[Edge](https://github.com/tjanczuk/edge)在进程中调用 C# 或 CLR 程序集来访问您的数据库。您可以在 C# 中编写[存储库](http://martinfowler.com/eaaCatalog/repository.html)样式的数据访问层并从 node.js 调用它。

我已经证明这在使用 C#、[PetaPoco](http://www.toptensoftware.com/petapoco/)（可选）、.NET 4.5 和 Oracle ODP 驱动程序 (Oracle.DataAccess.dll) 的开发环境中有效。这也应该适用于您可以在 .NET 中与之通信的任何数据库。

调用 .NET CLR 函数的节点（server.js）示例：

```
var edge = require('edge');

// define CLR function proxy
var getData = edge.func({
    assemblyFile: '../Repositories/bin/Debug/Repositories.dll',
    typeName: 'Repositories.TestRepository',
    methodName: 'GetData' // This must be Func<object,Task<object>>
});

// call proxy function
getData({ myParam:1 }, function (error, result) {
    if (error) throw error;
    console.log(result);
}); 
```

GetData C# 看起来像这样（请注意，您需要将连接字符串放在包含 node.exe 的文件夹中的 node.exe.config 中）：

```
public async Task<object> GetData(object param)
{
    using (var db = new Database("NameOfConnString"))
    {
        return db.Fetch<dynamic>("SELECT * FROM sometable");
    }
} 
```

（请注意，Oracle.DataAccess.dll 需要位于包含 node.exe 的文件夹中。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T10:23:30.777

此驱动程序适用于 Window：[https ://npmjs.org/package/oracle](https://npmjs.org/package/oracle)

与您在 Stack Overflow 上的问题类似： [Connect Node.js with Oracle on Windows platform](https://stackoverflow.com/questions/15213149/connect-node-js-with-oracle-on-windows-platform)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T21:14:08.503

[http://github.com/mariano/node-db-oracle](http://github.com/mariano/node-db-oracle)该项目旨在为nodejs添加oracle支持

编辑：现在有一个用于 Oracle 的 office nodejs 驱动程序，由 Oracle 称为 node-oracle

[https://blogs.oracle.com/opal/entry/introducing_node_oracledb_a_node](https://blogs.oracle.com/opal/entry/introducing_node_oracledb_a_node)

# mysql - MySQL 表作为 FIFO/队列

> ID：10017720
> 
> 赞同：3
> 
> 时间：2012-04-04T19:12:27.420
> 
> 标签：mysql, stack, queue, fifo

我们如何将 Mysql 表视为有限的 FIFO 缓冲区（队列）。

目标是：

1.  一次表只能有 N 行。
2.  当插入一行时，应该删除最旧的行以保持行数为 N。

请提出方法。

**更新：** 对不起伙计们，正如许多人指出的那样，我将问题从 STACK 更改为 FIFO 队列

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:17:33.433

过去的 Mysql 5 你可以使用触发器来实现这一点。

[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

那么您触发的 sql 将与以下内容一致：

```
DELETE FROM foo WHERE id NOT IN (SELECT id FROM foo ORDER BY id DESC LIMIT 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:18:59.823

好吧，您当然可以在插入表时创建一个 AFTER 触发器，让它调用一个执行以下操作的存储过程：

```
delete from TableName where ID not in (select top N ID from TableName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:19:19.867

插入新内容时，堆栈不会删除以前的内容。

但是如果你真的需要这样的结构，那么`Trigger`为每个插入写一个之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:16:27.607

你可以只计算你的桌子，如果它是 40 ；只需删除第一行，然后插入要插入的行。

```
get count 
if = 40
      delete
      insert
else
    insert 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-18T07:19:09.410

供参考

[https://github.com/netkiller/mysql-fifo-plugin](https://github.com/netkiller/mysql-fifo-plugin)

这是mysql的fifo队列。

您可以将一些记录推送到 fifo 队列。或从 fifo 队列中提取记录。

:( 但它不是表格引擎。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-17T03:55:05.070

只是在思考同样的 FIFO 问题，除了以 FIFO 方式处理固定数量的 COLUMNS，而不是行。但我认为我的解决方案适用于此，并且快速的 Google 搜索并没有为 MySQL 产生许多 FIFO 解决方案/示例。

这是我的基于列的方案：我的数据（data1、data2、data3 等）限制为 10 个可用列，如果我已经填满了所有 10 个列并且需要写入一条新数据，我想要覆盖最旧的数据。

我的解决方案：我添加了第 11 列来跟踪上次更新的列。因此，当需要写入新数据时，我的脚本可以查找最近更新的列，并使用一些简单的算术，回溯以确定 OLDEST 列，并将新数据插入该列（覆盖任何已经那里）。同时，我可以用我刚刚更新的列来更新“last_updated”列。

当然，您的问题专门针对行而不是列，但我不明白为什么我用于列的相同方法不适用于行...例如，您可以创建一个列来跟踪更新的最后一行. 您永远不会插入新行；只是覆盖现有的。

我不打算在数据库级别完全处理我的场景，但它似乎应该是可能的。

最后：这种方法确保您永远不会拥有超过 N 行/列的数据。许多触发方法似乎需要创建“额外”行，即使只是非常非常简短。

# java - ActiveMQ 消费者挂起

> ID：10017721
> 
> 赞同：11
> 
> 时间：2012-04-04T19:12:45.897
> 
> 标签：java, activemq, apache-camel

我有一个使用 SSL 传输的 activeMQ 代理。我有大约 10 个使用代理的消费者。我正在使用骆驼来配置我的路线。

每隔一段时间，它就会挂起并且不会消费新消息，即使我重新启动消费者，即使队列中有消息未决。

我开始尝试通过逐个检查我的消费者尝试复制问题来隔离发生这种情况的位置。我终于找到了一个可以重现问题的消费者。它会在一段时间后挂起，但是，如果我转到活动的 MQ 管理控制台并尝试查看队列中的消息，它将再次开始运行。我认为 Jetty 导致连接发生以刷新网页的队列，从而解除了我遇到的一些线程问题。我应该如何调试这个？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:48:36.363

我的一个同事偶然发现了一些有趣的东西，我刚刚在互联网上找到了一个解释：http: [//activemq.2283324.n4.nabble.com/Consumer-is-not-able-to-pick-messages-from-queue -td2531722.html](http://activemq.2283324.n4.nabble.com/Consumer-is-not-able-to-pick-messages-from-queue-td2531722.html)

显然，当您有一个选择器并且所有消息都在同一个队列中时，可以填充一个页面大小。这发生在我们身上——我还没有启动消费者，所以我最终得到了一整页消息，其中包含不同消费者的选择器，这导致我正在运行的消费者没有收到任何额外的工作发送给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:33:26.883

尝试将队列预取设置为 1 以促进更好地分布在消费者之间并减少特定消费者的“卡住”消息

见[http://activemq.apache.org/what-is-the-prefetch-limit-for.html](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T23:16:56.320

对你来说太晚了，但我遇到了同样的问题，问题是我试图使用我用来从队列中取出东西的相同连接将东西添加到队列中。

一旦我将它们分开（两个完全不同的上下文，一个用于生产，另一个用于消费），问题就自行解决了。

# google-chrome - 这个 WebKit 错误已在 Chrome 18 中修复，对吧？

> ID：10017722
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:12:45.737
> 
> 标签：google-chrome, webkit, webgl, cors

我很抱歉提出这样一个基本问题，尤其是当我几乎可以肯定我已经有了答案时......但似乎我遇到了以下 WebKit 错误：

[https://bugs.webkit.org/show_bug.cgi?id=71053](https://bugs.webkit.org/show_bug.cgi?id=71053)

然而我正在使用 Chrome 18.0.1025.142，并且据我所知它正在使用 WebKit 535.19，如果我正确地阅读了那个错误报告页面，这个错误是在几个 WebKit 版本之前修复的......对吗？

Chrome 是否有一个非常奇怪的 CORS 实现或其他东西？我收到“跨域资源共享策略拒绝了跨域图像加载”，但仅在 Chrome 中（它适用于 Firefox、Safari 和带有 Chrome 框架的 IE），即使这样，仅当网站托管在特定的方式（其细节超出了这个问题的范围）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:46:07.990

当我从 localhost 提供服务时，我得到了相同的 Chrome 错误，但当我从我的 Sonic 服务器提供服务时却没有。

我记得标题中有一个跨域设置。当从 localhost 提供服务时，我在 Firefox 中测试 webGL 的东西以避免这个问题。

# debugging - Umbraco - 在未选择所有媒体时显示节点

> ID：10017724
> 
> 赞同：0
> 
> 时间：2012-04-04T19:12:54.847
> 
> 标签：debugging, xslt, umbraco, nodes, predicate

我的目的是创建一个新闻列表，并且会在一些新闻上附加一个缩略图（news_teaserimage）。问题是如果我只在某些节点中选择媒体，我会得到一个 xslt 错误，并且不会生成任何代码。如果我在所有节点中选择媒体，那么它就可以工作。目的是无论是否有图像，代码都会生成节点。如果没有选择图像，则不会显示。

我究竟做错了什么？

> ```
> <ul>
> 
> <xsl:for-each select="umbraco.library:GetXmlNodeById($source)/* [@isDoc and string(umbracoNaviHide) != '1']">
> <xsl:variable name="media" select="umbraco.library:GetMedia(news_teaserimage, 0)"/>
> 
>   <li>
>     <h2><xsl:value-of select="@nodeName"/></h2>
>     <h5><xsl:value-of select="@createDate"/></h5>
> 
> <xsl:if test="news_teaserimage">
> <img src="{$media/umbracoFile}" width="70" height="70" style="float: left; padding-right: 10px; padding-bottom: 10px;" />
> </xsl:if>
> 
>       <xsl:value-of select="news_shorttext" disable-output-escaping="yes"/>
>     <xsl:if test="news_largetext">
>       <br />
> <a style="float: left; clear: both; margin-top: -10px;" href="{umbraco.library:NiceUrl(@id)}">
>       Read more
>     </a>
> 
> </xsl:if>
> 
>   </li>
> </xsl:for-each>
> </ul> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:57:15.557

当您调用 GetMedia 的变量（在您的情况下为 news_teaserimage）中没有任何内容时调用 GetMedia 将导致 XSLT 错误，因为如果尚未选择媒体节点，则没有可获取的媒体。您只需要稍微重新调整您的代码即可使其正常工作。将分配“媒体”变量的代码行移动到 if 语句中，在该语句中检查 news_teaserimage 元素是否存在。这样，只有在实际存在值时才会调用它。

您可能还需要将 if 测试更改为：string-length(news_teaserimage) > 0，因为如果元素存在但为空，它可能会触发 if。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T22:58:54.833

将`umbraco.library:GetMedia(news_teaserimage, 0)`调用从`xsl:variable`标记移到`xsl:if`标记中，并将其包裹`xsl:if`在以下所有代码中`li`：

```
<ul>
<xsl:for-each select="umbraco.library:GetXmlNodeById($source)/* [@isDoc and string(umbracoNaviHide) != '1']">

  <li>
  <xsl:if test="umbraco.library:GetMedia(news_teaserimage, 0)">
    <h2><xsl:value-of select="@nodeName"/></h2>
    <h5><xsl:value-of select="@createDate"/></h5>

    <img src="{$media/umbracoFile}" width="70" height="70" style="float: left; padding-right: 10px; padding-bottom: 10px;" />

    <xsl:value-of select="news_shorttext" disable-output-escaping="yes"/>

    <xsl:if test="news_largetext">
      <br />
      <a style="float: left; clear: both; margin-top: -10px;" href="{umbraco.library:NiceUrl(@id)}">
      Read more
      </a>
  </xsl:if>
  </li>
</xsl:for-each>
</ul> 
```

# jquery - ckeditor 发送默认内容

> ID：10017726
> 
> 赞同：0
> 
> 时间：2012-04-04T19:13:05.347
> 
> 标签：jquery, ckeditor

我使用带有默认内容的 ckeditor。然后我用 jquery 初始化（替换 textarea）CKEditor 并编辑文本。问题是 var data = $( 'textarea.editor' ).val(); 返回默认内容以及 getData()。我必须做什么才能获取实际内容？非常感谢你

```
var ed = $( '#ed' ).ckeditor(
      {toolbar :[
                 { name: 'basicstyles', items : [ 'Bold','Italic' ] },
                 {name: 'link', items:['Link']},    
                 { name: 'colors', items : [ 'TextColor' ] }
                ]
       }
      ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:44:58.563

来自开发者指南：[http ://docs.cksource.com/CKEditor_3.x/Developers_Guide/jQuery_Adapter](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/jQuery_Adapter)

您需要确保您的 jQueryAdapter 脚本包含*在*ckeditor 脚本之后。

> 为了创建编辑器实例，请按以下顺序加载常用的 CKEditor 核心脚本文件以及 jQuery 适配器文件：

```
<script type="text/javascript" src="/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/ckeditor/adapters/jquery.js"></script> 
```

# json - 如何使用 PHP、JSON 和 JQuery 创建动态页面

> ID：10017727
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:13:07.263
> 
> 标签：json, jquery, jquery-mobile

我正在使用 jquery mobile 创建一个移动应用程序，使用 JSON 获取数据的 PHP 和使用 PhoneGap 转换为 iOS、Andorid、BB ext 的本机应用程序。我遇到的问题是我想创建动态页面，但只使用 AJAX 和 JQuery Mobile 页面，否则我无法创建本机应用程序。我目前遇到的问题是我想创建动态页面，例如，我获取所有新闻标题并使用 a 显示它们`list-view`，然后在点击新闻标题后我想显示完整新闻的页面，就像斯坦福大学一样已完成活动页面[http://m.stanford.edu/#events/e/?i=31633](http://m.stanford.edu/#events/e/?i=31633)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:57:19.543

您不能在 Phongap 中使用 PHP 页面（或 aspx 等），它们必须是 HTML，因为您不能在 Phonegap 中运行服务器端代码。话虽如此，您可以通过使用 ajax 调用从外部服务器获取数据来完成动态行为。

文档中的此页面讨论了使用动态 JSON 数据构建页面：

[http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-dynamic.html)

斯坦福演示似乎使用了这里讨论的多页模板，而不是动态 JSON 数据：

[http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/multipage-template.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/multipage-template.html)

# java - 一个 Java 文件中的多个枚举类

> ID：10017729
> 
> 赞同：18
> 
> 时间：2012-04-04T19:13:14.263
> 
> 标签：java, arrays, enums, constants

我有 3 个带常量的字符串数组。例如：

```
 String[] digit = {"one", "two", "three"};
 String[] teen= {"ten", "twenty", "thirty"};
 String[] anchors = {"hundred", "thousand", "million"}; 
```

我正在考虑将这些分别转移到枚举，所以我将有 3 个枚举类：`digit`，`teen`并实现`anchors`了`getValue`方法。但我不想将它们放在单独的文件中，因为我只有少量数据和相同类型的数据。将所有这些与访问方法放在同一个有意义的 java 文件中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-04T19:15:18.107

它们可以是这样的三个内部类：

```
public class Types {
  public enum Digits {...}
  public enum Teens {...}
  ....
} 
```

然后参考他们`Types.Digits.ONE`等`Types.Teen.TWENTY`。

您还可以像这样使用静态导入：

```
import Types.Digits;
import Types.Teen; 
```

..

为了有更短的参考：`Digits.ONE`等`Teen.TWENTY`。

# php - 找不到类

> ID：10017730
> 
> 赞同：0
> 
> 时间：2012-04-04T19:13:16.317
> 
> 标签：php, doctrine-orm, codeigniter-2, classnotfound

我是 MVC 和 Codeigniter 的新手，正在尝试让课程正常工作。

我正在运行 CodeIgniter 2.1.0 和 Doctrine 2.2.1

当我的代码调用 submit() 函数时，我得到`Class 'Myclass_model' not found`, 并引用包含以下内容的行：`$u = new Myclass_model();`

**（见底部的编辑说明，现在进入`Class 'Doctrine_Record' not found`它扩展的模型）**

在我的控制器中是以下代码：

```
public function submit() {

        if ($this->_submit_validate() === FALSE) {
            $this->index();
            return;    
        }

        $u = new Myclass_model();
        $u->username = $this->input->post('username');
        $u->password = $this->input->post('password');
        $u->email = $this->input->post('email');
        $u->save();

        $this->load->view('submit_success');
    } 
```

在我的 /application/models/ 文件夹中，我有 myclass.php：

```
class Myclass extends Doctrine_Record {

public function setTableDefinition() {
    $this->hasColumn('username', 'string', 255, array('unique' => 'true'));
    $this->hasColumn('password', 'string', 255);
    $this->hasColumn('email', 'string', 255, array('unique' => 'true'));
}

public function setUp() {
    $this->setTableName('testtable1');
    $this->actAs('Timestampable');
            //$this->hasMutator('password', '_encrypt_password');
}

    protected function _encrypt_password($value) {
         $salt = '#*seCrEt!@-*%';
         $this->_set('password', md5($salt . $value));
         //Note: For mutators to work, auto_accessor_override option needs to be enabled. We have already done it, in our plugin file doctrine_pi.php.

    }
} 
```

我怀疑我的问题在于扩展 Doctrine_Record。我安装了doctrine2，并且在/application/libraries/ 中有Doctrine.php 和Doctrine 文件夹。但我不确定在哪里检查，甚至不确定如何检查并确保 Doctrine_Record 可用、已配置等。

谁能帮我解决这个问题并找出问题所在？我的课简单吗？我的 Doctrine 安装/配置有问题吗？

**编辑：我遵循了这样调用类的建议：**

```
$this->load->model('Myclass_model','u'); 
```

**现在我得到`Class 'Doctrine_Record' not found`了模型扩展 Doctrine_Record 的地方**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:15:28.653

我怀疑您没有包含您的`Myclass.php`文件或路径不正确。如果您在使用 Doctrine 扩展时遇到问题，您的错误会提到父级。即便如此，请确保在新类中包含父文件`include_once('path/to/doctrine_record');`

您可以将其添加到`autoload.php`文件中或像这样手动添加：

```
public function submit() {

        if ($this->_submit_validate() === FALSE) {
            $this->index();
            return;    
        }

        include_once('/path/to/Myclass.php');
        $u = new Myclass();
        $u->username = $this->input->post('username');
        $u->password = $this->input->post('password');
        $u->email = $this->input->post('email');
        $u->save();

        $this->load->view('submit_success');
    } 
```

或者更好的是，您可以像加载模型一样加载它。将文件重命名为`myclass_model.php`并将类名重命名为`Myclass_model`:)

```
public function submit() {

        if ($this->_submit_validate() === FALSE) {
            $this->index();
            return;    
        }

        $this->load->model('Myclass_model','u');
        $this->u->username = $this->input->post('username');
        $this->u->password = $this->input->post('password');
        $this->u->email = $this->input->post('email');
        $this->u->save();

        $this->load->view('submit_success');
    } 
```

# php - 哪个是最好的 - PHP + Mysql 查询或 Javascript + JSON - 用名称替换写入的数字？

> ID：10017734
> 
> 赞同：0
> 
> 时间：2012-04-04T19:13:27.800
> 
> 标签：php, javascript, mysql, json, replace

我在 MYSQL 中使用 GROUP_CONCAT 获得分组的 ids 编号，所以我得到类似：

```
row 1: 3,4,11,2
row 2: 5,11
row 3: 5,11 
```

因此，如果我想将这些 id 替换为他们的名字，这是最好的方法吗？

**PHP + MySQL**

分解字符串 (3,4,11,2) > 在 MySQL 中调用每个给定 ID 的名称进行单独咨询

***或者***

**脚本+JSON**

分解字符串 (3,4,11,2) > 重写为我可以使用 javascript 找到的内容，例如：`<span class="replaceThis">3</span> <span class="replaceThis">4</span> <span class="replaceThis">11</span> <span class="replaceThis">12</span>`

使用我的所有 id 和标签创建一个 JSON 文件（使用 PHP+Mysql），例如：

```
data: {id: 1, name:'dog'},{id: 2, name:'cat'},{id: 3, name:'dog'} 
```

并让 javascript`<span class="replaceThis">`在页面中找到所有内容，并为每个内容按名称替换 innerHTML。

好吧，PHP + MySql 是我的第一个解决方案，但我认为在 MYSQL 中进行大量单独查询的性能不会很好。我认为 Javascript + Json 会更好，但对我来说它看起来更复杂。我真的不知道我怎么能做到这一点。

它只是在页面上显示，它不会用作变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:16:54.820

> 我在 MYSQL [..] 中使用 GROUP_CONCAT 获得分组的 ID 号

然后只需加入具有名称的表和 GROUP_CONCAT 那些名称而不是 ids（或者如果需要，可以同时执行 GROUP_CONCAT）。然后只需在 PHP 中使用结果。

# jquery-mobile - jquery.mobile.structure 的目的是什么？

> ID：10017739
> 
> 赞同：3
> 
> 时间：2012-04-04T19:13:45.703
> 
> 标签：jquery-mobile

我下载了最新版的JQM，看到了jquery.mobile.structure-1.1.0-rc.1.css。

问：那是干什么用的？我需要将它包含在我的项目中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T19:36:05.897

看起来 jQuery 家伙在 jQuery Mobile 1.1rc1 页面上犯了一点错误——

此链接： [无主题的未压缩结构：jquery.mobile-1.1.0-rc.1.css](http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile.structure-1.1.0-rc.1.css)

实际应该阅读： [没有主题的未压缩结构：jquery.mobile.structure-1.1.0-rc.1.css](http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile.structure-1.1.0-rc.1.css)

如果您想为 jQuery Mobile 创建自己的主题，您可以使用该文件作为基础。否则，如果您只想使用现有主题，则可以忽略它（当然，前提是您使用常规 css 文件）。

# php - PHP如何在这里避免无限递归？

> ID：10017741
> 
> 赞同：12
> 
> 时间：2012-04-04T19:13:49.717
> 
> 标签：php, recursion, getter-setter

考虑这个类：

```
class test
{
    public function __set($n, $v)
    {
        echo "__set() called\n";
        $this->other_set($n, $v, true);
    }

    public function other_set($name, $value)
    {
        echo "other_set() called\n";    
        $this->$name = $value;
    }

    public function t()
    {
        $this->t = true;
    }
} 
```

我正在重载 PHP 的魔法[`__set()`](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)方法。每当我在`test` 类的对象中设置属性时，它都会调用`__set()`，而后者又会调用`other_set()`.

```
$obj = new test;
$test->prop = 10;

/* prints the following */
__set() called
other_set() called 
```

但`other_set()`有以下行`$this->$name = $value`。这不应该导致调用`__set()`，导致无限递归吗？

我推测它`__set()`只有在课外设置时才会调用。但是，如果您调用该方法`t()`，您也可以清楚地看到它也通过`__set()`了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T19:24:20.837

[`__set`对于给定的属性名称，每次尝试仅调用一次。](https://github.com/php/php-src/blob/PHP-5.5.16/Zend/zend_object_handlers.c#L58) 如果它（或它调用的任何东西）试图设置相同的属性，PHP 不会`__set`再次调用——它只会在对象上设置属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:19:06.183

从[文档](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)中：

> __set() 在将数据写入**不可访问**的属性时运行

例如：

```
class foo {
  private $attributes;
  public $bar;

  public function __construct() {
    $this->attributes = array();
  }

  public function __set($n, $v) {
    echo "__set() called\n";
    $this->attributes[$n] = $v;
  }
}

$x = new foo;
$x->prop = "value";
$x->attributes = "value";
$x->bar = "hello world"; 
```

在这种情况下，`$x->prop`是不可访问的，`__set`将被调用。 `$x->attributes`也是不可访问的，所以`__set`会被调用。但是，`$x->bar`是可公开访问的，因此`__set`不会**被**调用。

同样，在`__set`方法中，`$this->attribtues`是可访问的，所以没有递归。

在上面的示例代码中，`$this->$name`可以在调用它的范围内访问，因此`__set`不会被调用。

# fonts - 谷歌字体 css 溢出行为 chrome vs firefox

> ID：10017743
> 
> 赞同：4
> 
> 时间：2012-04-04T19:14:08.860
> 
> 标签：fonts, webfonts, google-webfonts, css

我正在网页上创建一个特定功能，该功能需要 CSS 溢出在 Chrome 和 Firefox（理想情况下也是 IE）之间保持一致。使用 Arial 等常见网络字体时没有问题，但一旦我开始使用 google 网络字体，我发现 CSS 溢出有所不同。

这是一个演示：[jsfiddle 演示](http://jsfiddle.net/YPjRE/5/) 这是一个固定宽度的 div，带有一些示例文本。“Playball”是一种谷歌字体。

```
#box {
   height: 160px;
   width: 200px;
   border: black 1px solid;    
   font-size: 2em;
   font-family: 'Playball', cursive;
   overflow-x: hidden;
   overflow-y: scroll;   
} 
```

1) 在 Firefox (L) 和 Chrome (R) 上运行 jsfiddle 演示的屏幕截图。使用“Arial”，两种浏览器都没有溢出。 ![FF(L) vs Chrome(R)，ARIAL，无溢出-y](../Images/1c491cc7b8c57edc149a955fc616d090.png)

2) 在 Firefox (L) 和 Chrome (R) 上运行 jsfiddle 演示的屏幕截图。使用“Playball”，**Firefox 中存在溢出（请参阅滚动条）**但 Chrome 中没有 ![FF(L) vs Chrome(R)，PLAYBALL，溢出-y](../Images/586bed9676db0961ac47a060ce76eeec.png)

如何使 Chrome 和 Firefox 之间的 CSS 溢出保持一致？

编辑：根据 Kamal 在下面的评论，我已经为两个 div 添加了行高，实际上滚动条的外观现在是一致的。然而，另一个问题在第三行，“跳过”适合 Chrome，但只有“跳过”适合 FF。有任何想法吗？[最新的小提琴](http://jsfiddle.net/YPjRE/14/)。

![铬 L，火狐 R](../Images/549880598461f4a1be262a83421749ea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:40:39.770

尝试更改行高，因为这两个屏幕截图对我来说，仅在行之间的间距上看起来有点不同。编辑：您还应该尝试调整字母间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:25:32.497

我找到了一种让你的溢出更加一致的方法。意识到即使您指定了溢出：滚动，除非有原因，否则滚动不会生效，因此我们必须手动强制它一点。

我在这里找到了部分解决方案：[如何防止在 WebKit/Blink 中为 OS X 触控板用户隐藏滚动条？](https://stackoverflow.com/questions/7855590/how-can-i-force-scroll-bars-to-appear-on-an-element-in-webkit-on-os-x-lion)

另外 - 我用更新的样式创建了一个[小提琴。](http://jsfiddle.net/YPjRE/6/)因此，现在即使框太小而滚动条无法显示，它仍会占用框内的空间，以便始终如一地换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:56:47.067

我认为这对于使用不同渲染引擎的每个浏览器都无法解决，我的意思是滚动条或复选框等浏览器元素（尤其是在 Windows 中，您可以在 XP 和 7 上测试它，也可以在 OSX 和 Linux 上进行测试）

字母间距和行高，总是出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:58:16.937

尝试在 CSS 中定义行高、字母间距和字间距。

# flash - 尽管我从未调用过 send()，但 PrintJob 已发送到打印机

> ID：10017745
> 
> 赞同：3
> 
> 时间：2012-04-04T19:14:17.420
> 
> 标签：flash, printing, actionscript-3

我必须在 as3 中进行一些打印，显然是使用[flash.printing.PrintJob](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html)，但我遇到了问题。

我必须验证用户在 PrintJob.start() 显示的打印对话框中设置的设置是否与存储在数据库中的某些设置相匹配，并且除了调用 PrintJob.start() 之外没有其他方法可以获取该信息。

如果页面设置无效，我既不会调用 addPage() 也不会调用 send()，但会在几秒钟后（大约 15 秒）打印一个空白文档。

任何想法？如何取消打印作业？在 AIR 中有一个 PrintJob.terminate() 但我的目标是闪存。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:38:11.727

我有点困惑你到底想做什么，但你不能这样做吗？（来自 printjob docs，启动函数示例）

```
var myPrintJob:PrintJob = new PrintJob();
if(myPrintJob.start()) {
// addPage() and send() statements here
} 
```

这样你可以检查设置，如果你不发送（）它真的不应该打印。（你确定你没有在你的代码中的某个旧位置发送吗？？）一个可能的解决方法（虽然不是最好的，它应该可以工作）是如果它的设置不符合你的偏好，强制你的打印作业重置，就像这样；

```
myPrintJob = new PrintJob(); 
```

如果以上没有帮助，请提供片段和更多细节。祝你好运！

# java - 变量无法解析或不是 Java/Eclipse 中的字段？

> ID：10017751
> 
> 赞同：1
> 
> 时间：2012-04-04T19:14:40.300
> 
> 标签：java, android, eclipse

在 main.xml 我有：

```
 <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Your total is 0" 
        android:textSize="45dp"
        android:layout_gravity ="center"
        android:gravity = "center"
        android:id="@+id/tvDisplay"
        />
    <Button
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:text = "+"
        android:layout_gravity="center"
        android:textSize = "20dp"
        android:id="@+id/bAdd"
        />

        <Button
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:text = "-"
        android:layout_gravity="center"
        android:textSize = "20dp"
        android:id="@+id/bSub"
        /> 
```

在主体中，我有：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        counter = 0;
        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSub);     
display = (TextView) findViewById(R.id.tvDisplay); 
```

它引用了（R.id.bAdd/Sub/Display）它无法解析或不是一个字段。我一直在关注如何准确地做到这一点的 youtube 指南，所以我对我是如何出现错误以及如何纠正它感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:20:14.077

R.java 在 Eclipse 中非常挑剔。如果您还没有尝试清理项目、重新启动 Eclipse 等，请尝试这样做。在您的 gen 文件夹中找到 R.java 吗？应该在 R 中找到的其他变量是否也无法解决，还是只有这些？如果一切都失败了，您可以尝试删除 R.java 并清理项目，并假设您的 XML 不包含它应该重新生成的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T21:32:08.343

检查是否在您遇到问题的 .java 文件的顶部导入了 java.R。其他解决方案都不适合我，但确实如此。如果它正在导入，您应该有一个黄色警告。删除该行，不要导入它。

# objective-c - 在 Objective-c 中在同一个网卡上添加另一个 ip

> ID：10017759
> 
> 赞同：0
> 
> 时间：2012-04-04T19:14:58.450
> 
> 标签：objective-c, network-programming, ipv6, ipv4

我知道我的问题中没有代码，但我认为这是一个有趣的问题......是否可以在仍然连接的 wifi 网卡上添加一个新的`ip`（最好是） ？我必须同时与路由器 ( ) 和另一个设备 ( ) 通话。那么有可能把这个发展过来吗？就这样？`ipv6``ipv4``ipv4``ipv6``objective-c``iphone`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:33:21.687

在 iPhone 上？没有机会（AFAIK）。我可以看到引入各种安全漏洞会严重损害沙盒应用程序的整个目的。*

也就是说，iPhone 完全能够绑定 IPv4 和 IPv6 地址，并且会在各种情况下自动绑定（例如当支持 IPv6 的路由器同时提供这两种地址时，就像我的一样）。您应该观看 WWDC 2010 和 2011 的 Advanced Networking（或类似内容）视频。但这是在设备而非应用程序级别处理的。

在 OS X 上，系统堆栈的核心 OS 层中有[系统配置框架](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/SystemConfigFrameworks/SC_Intro/SC_Intro.html)。我*认为*您可以使用它来设置 IP，但我从未真正研究过它，而且 iOS 系统配置 API 似乎是 OS X API 的一小部分。

*：管理 VPN 可能会有一些[例外情况](http://blog.michael.kuron-germany.de/2010/09/ios-4-1-undocumented-vpn-api-used-by-cisco-anyconnect/)，但这似乎是私有 API，很可能被 Apple 授予特殊豁免。

# c++ - 你能做一个 C++ 类的 Objective-C++ 子类吗

> ID：10017760
> 
> 赞同：1
> 
> 时间：2012-04-04T19:15:10.727
> 
> 标签：c++, objective-c, macos

我正在开发的多平台应用程序使用单个 C++ 类的不同子类，具体取决于其运行的平台。我可以在不更改超类的情况下将 OS X 子类设为 Objective-C++ (.mm) 文件吗？

编辑：更多细节

该项目现在包含此文件层次结构：

```
* VideoDriver.cpp   - (superclass)
  - VideoDriver_OSX.cpp - (subclass, contains Mac implementation)
  - VideoDriver_win.cpp - (subclass, contains Windows implementation)
  - VideoDriver_X11.cpp - (subclass, contains Linux implementation) 
```

简而言之，我希望能够在 VideoDriver_OSX 实现中使用 Core Animation 和其他 Cocoa 库。将其更改为 Objective-C++ 文件 (VideoDriver_OSX.mm) 允许我使用这些 Cocoa 库，但现在尝试实例化 VideoDriver_OSX 对象的代码行（在不同的文件中）会在运行时导致此动态链接器错误：

```
dyld: lazy symbol binding failed: Symbol not found: __ZN15VideoDriver_OSXC1EP10gui_info_sP6CPFifoI17DecodedVideoFrameE 
```

这似乎与 C++ 名称修饰有关，但我不知道如何解决它。我真的很感谢帮助，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:04:13.543

“我可以在不更改超类的情况下将 OS X 子类设为 Objective-C++ (.mm) 文件吗？”

是的。假设通过“子类化一个 Objective-C++ ... 文件”，您的意思是您的 Objective-C++ 代码中有一个 C++ 类，是 .cpp 文件中的 C++ 类的子类。如果你想使用objective-c++ 类作为你的C++ 类的子类，那么你就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:43:18.830

`.cpp`将文件重命名为`.mm`在很多情况下都会起作用，因为 Objective-C 对象系统、语法和运行时或多或少不同于 C++ 对象系统、语法和运行时。当您将 a 重命名`.cpp`为 a`.mm`时，它不会神奇地将 C++ 对象转换为 Objective-C 对象，它们仍然是 C++ 对象。文件的作用是允许您在同一个`.mm`文件中同时使用 Objective-C 和 C++ 对象，这只是因为 Objective-C 和 C++ 之间的对象系统、语法或运行时几乎没有相互冲突。

如果`new`在 Objective-C 代码中使用名为 etc. 的变量，转换为 Objective-C++ 可能会导致问题，因为这是 C++ 中的关键字。同样，在编译为 Objective-C++ 时，Objective-C 中的任何关键字都不能在 C++ 代码中使用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T19:33:04.837

没有 Objective-C++ 对象这样的东西。在 Objective-C++ 文件中，您可以制作/使用 Objective-C 对象或 C++ 对象。桥接的最佳选择是组合 - 如果您要移植 C++ 框架以在 Objective-C 中使用，请创建对象：

*   具有 C++ 对象的实例
*   实现重定向到 C++ 对象的方法。

根据 API 的简单程度，这可能不是一件容易的事！

# php - 使用 paginator::sort 时保留表单数据？

> ID：10017764
> 
> 赞同：0
> 
> 时间：2012-04-04T19:15:32.613
> 
> 标签：php, cakephp

我是 php/cakephp 新手，我的问题是 - 在使用 paginator::sort 对数据进行排序后，有没有办法保留表单数据（未保存在模型中）？显然，当您单击分页器排序链接时，您会转到不同的 URL，因此 _posted 数据消失了。给你一张我在代码中的图片 - 有一个单一的表格，里面有范围滑块和复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:07:05.487

当我需要在控制器中的不同操作之间共享发布的数据时，这对我有用。在控制器类中，我将这段代码添加到每个操作的开头：

```
// retrieve or save search data
if(!empty($this->data)) 
    $this->Session->write('SearchData', $this->data);
else
    $this->data = $this->Session->read('SearchData'); 
```

# java - 应用程序中的自定义视图 (Android)

> ID：10017765
> 
> 赞同：1
> 
> 时间：2012-04-04T19:15:33.567
> 
> 标签：java, android, custom-controls

我为按钮、复选框、进度条等某些项目提供了可绘制对象，并且我想定义这些可绘制对象以作为我的应用程序使用的所有按钮的默认样式。

如果不单独声明每个视图中的样式，这可能吗？

如果答案是为应用程序使用主题，我会欣赏一个示例（例如更改所有按钮的样式），因为我不明白如何定义它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:23:36.620

答案是使用您所期望的主题。可以在 android 开发者网站上找到好的文档：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

对于按钮，您可以这样做：定义一个新主题：

```
<style name="MyTheme" parent="@android:style/Theme.Holo">
    <item name="android:buttonStyle">@style/button</item>
</style> 
```

其中按钮样式定义为：

```
<style name="button" parent="@android:style/Widget.Button">
    <item name="android:background">@drawable/button_background_selector</item>
    <item name="android:textColor">@drawable/button_text_selector</item>
</style> 
```

button_background_selector 的定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_pressed" android:state_pressed="true"></item>
    <item android:drawable="@drawable/button_disabled" android:state_enabled="false"></item>
    <item android:drawable="@drawable/button_default"></item>

</selector> 
```

所有这些可绘制对象都可以是您的图像 - button_pressed 可以是可绘制文件夹中的 png。您还必须将主题应用于清单中的应用程序，如下所示：

```
<application
    android:theme="@style/MyTheme" >
</application> 
```

希望这可以帮助 ：）

# sql - VB 存储过程到数据网格视图中

> ID：10017766
> 
> 赞同：0
> 
> 时间：2012-04-04T19:15:36.627
> 
> 标签：sql, vb.net, sql-server-2005, stored-procedures

我正在开发一个包含完整和链接数据库的 Visual Basic 2008 应用程序。我创建了许多可以正常工作并且完美显示的存储过程。但是，有一个存储过程允许用户输入两年。然后开始年份和结束年份在 datagridview 中显示结果。这在存储过程中运行时效果很好，但是当它在 Visual Basic 中实现时，只有第二列显示结果，而年份列留空。

我想知道是不是因为在数据库中参数是 DateTime 数据类型，但是当我在存储过程中调用它时它是一个整数。有什么建议吗？

```
 @book_category Varchar(30),

  @start_date INTEGER,

  @end_year integer 

AS

SELECT DATEPART(yyyy,Author.date_first_book), COUNT(DATEPART(yyyy,Author.date_first_book)) AS new_year_date

FROM Book

INNER JOIN Author

ON Book.book_ID = Author.author_ID

WHERE Author.category = @book_category

AND DATEPART(yyyy,Author.date_first_book) > @start_date AND DATEPART(yyyy,Author.date_first_book) < @end_year

GROUP BY DATEPART(yyyy,Author.date_first_book)

ORDER BY DATEPART(yyyy,Author.date_first_book) ASC

RETURN 
```

这是VB的代码，它与我一直在使用的所有其他代码相同，而这个似乎不起作用

Private sel 作为新趋势CategoryDataContext

```
Private Sub searchBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles searchBtn.Click

    Dim selTrends = sel.trendsCategory(trendsCategoryNametxt.Text)
    trendsCategoryResults.DataGridView1.DataSource = selTrends 
```

# ios - 无法与故事板建立联系

> ID：10017767
> 
> 赞同：2
> 
> 时间：2012-04-04T19:15:38.887
> 
> 标签：ios, objective-c, iphone

我正在通过 Apple 上的“您的第二个 iOS 应用程序”教程，我在[这个页面上](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html)。如果您单击“将文本标签连接到详细视图控制器的属性......” 部分，它解释了如何控制单击并将标签连接到画布下方场景栏中的 Table View Controller 按钮。当我这样做时，它并没有像教程所说的那样给我一个选项来命名连接，它只是弹出“视图”这个词，然后当我再次控制单击时将表视图添加到引用插座列表中。

这显然会使事情无法正常工作，因为系统无法找到标签，我该如何建立这些连接，我做错了什么还是教程错了？他们似乎使用的是旧版本的 Xcode，有些小事情不太对劲.....不过，我只是想克服它，感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:23:32.143

**编辑**

由于它只显示`view`而不显示您的类中的属性，因此您要么错过了第一步“自定义详细视图控制器头文件......”的部分。您在其中添加了以下几行：

```
@property (strong, nonatomic) BirdSighting *sighting;
@property (weak, nonatomic) IBOutlet UILabel *birdNameLabel;
@property (weak, nonatomic) IBOutlet UILabel *locationLabel;
@property (weak, nonatomic) IBOutlet UILabel *dateLabel; 
```

**或者**

在“设计细节场景”下，您错过了“用 UITableViewController 场景替换默认 UIViewController 场景......”下的最后一步。这是：

```
5\. In the Custom Class section of the Identity inspector, choose BirdsDetailViewController in the Class pop-up menu. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:05:55.997

我假设您已将 viewController 设置为与声明标签的类相同的类型。

然后你需要做的就是在下面场景栏中的Table View Controller按钮上按住control点击然后连接标签，弹出菜单然后你就可以选择标签了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:51:11.250

确保在 Birds Detail View Controller -> Identity Inspector -> Class 中使用相同的名称（区分大小写）。“名称”与birdDetailViewController.h中的代码：“@interface”名称“：UITableViewControlle”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T11:20:26.103

我遇到了同样的问题，并且发布的解决方案不起作用。对我来说，问题是我一直试图从表格视图单元而不是标签建立连接。当您按住 Control 单击时，请确保弹出窗口的标题显示“标签 - 详细信息”，而不是“表格视图单元格”或“内容视图”。

# javascript - 20 秒后重播 .swf

> ID：10017768
> 
> 赞同：0
> 
> 时间：2012-04-04T19:15:40.103
> 
> 标签：javascript, jquery, xhtml, flash

我的 xhtml 中嵌入了一个 .swf 横幅，我需要它在 20 秒后重播，因此如果用户仍在观看该页面，他将再次看到动画。它需要是一个循环或其他东西，以便动画在一遍又一遍完成后再次播放 20 秒。这可以用javascript实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:20:15.490

假设你有一个 Flash 播放器的唯一 ID，你可以简单地这样做：

```
var player = document.getElementById("playerID");
var movieLength = 10000; // in ms, change this as needed
var delay = 20000; // in ms

function playMovie() {
    player.play();
    window.setTimeout(playMovie, movieLength + delay);
};

playMovie(); // Assuming it doesn't start automatically. 
```

这会`play()`每 20 秒调用一次播放器上的函数（加上电影长度和延迟）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:25:12.203

`<object/embed>`可以，但只是告诉标签循环 似乎更有意义。[http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)

如果您无权访问 Flash 源（在影片结尾添加 20 秒的空白），那么是的，您需要 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:37:23.480

算出电影有多长，以秒为单位。乘以 1000，再加上 20000。

把那个号码放在这里：

```
var timing = 30000; //whatever the 20000 + the number you found before was, put it here

$(function() {
    window.setInterval(function() {
        $("#myPlayer").get(0).play();
    }, timing);
}); 
```

# css - 带填充的框边框

> ID：10017770
> 
> 赞同：0
> 
> 时间：2012-04-04T19:15:48.213
> 
> 标签：css

我有以下代码：

```
.submit_wrap {
    padding: 1px;
    border: 1px solid #b0e1c4;
}

.submit {
    height: 20px;
    background: url(images/design/button_bg.gif) repeat-x;
    padding: 1px 10px 0 10px;
    border: 0;
    color: #ffffff;
    font-weight: bold;
    font-size: 12px;
}

.submit:hover {
    background: url(images/design/button_bg_selected.gif) repeat-x;
} 
```

我正在尝试将其应用于提交按钮：

```
<div class="submit_wrap">
    <input class="submit" type="submit" name="submit" value="Conectare">
</div> 
```

但不是得到这样的东西： ![在此处输入图像描述](../Images/b9a1dfcf839145a89ab02881e53434b4.png)

我明白了： ![在此处输入图像描述](../Images/afe9af90d971083328a6f57e4d2998c7.png)

我可以设置 submit_wrap 类的宽度，但问题是我想将这个类应用于更多的提交按钮，并且这个按钮的宽度是不同的。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:17:25.570

```
display: inline-block 
```

将其添加到 .submit_wrap

# c# - 来自 MVC 应用程序的 WCF 服务身份验证共享相同的成员资格提供程序

> ID：10017771
> 
> 赞同：3
> 
> 时间：2012-04-04T19:15:51.583
> 
> 标签：c#, asp.net-mvc, wcf, wcf-authentication

我在 X 域中有一个 MVC 应用程序，在 Y 域中有一个 WCF 服务，我想为它们使用相同的成员资格提供程序。

WCF 服务位于 Y 域中，因为数据位于 Intranet 服务器中，而 MVC 应用程序位于 X 域中，因为我不想处理生成数据的服务器上的所有请求。

我希望用户登录到 MVC 应用程序，并通过这样做也对 WCF 服务进行身份验证。

我不知道哪种方法是最好的方法，如果我可以在它们在 MVC 应用程序中进行身份验证时为它们创建 cookie（我不确定如何完成）。我不希望未经身份验证的任何人都可以使用我的 WCF 服务。

所以我认为我需要的是 AuthenticationService 来验证用户，然后将相同的用户名和密码传递给我的自定义 WCF 服务以便能够与之交互。

问题是我使用 AuthenticationService 验证我的用户名并创建一个 cookie（[http://msdn.microsoft.com/en-us/library/bb515342.aspx](http://msdn.microsoft.com/en-us/library/bb515342.aspx)）但是当我与我的自定义 WCF 服务（数据）交互时，我需要再次提供用户名和密码（[http://msdn.microsoft.com/en-us/library/ff647294.aspx](http://msdn.microsoft.com/en-us/library/ff647294.aspx)），我对用户名没有问题，但密码我不知道如何管理它，我不知道不想每次都要求输入密码。

有更简单的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:21:06.613

检查下面的链接。您的方案已完全涵盖和解释。 [http://msdn.microsoft.com/en-us/library/bb386582.aspx](http://msdn.microsoft.com/en-us/library/bb386582.aspx)

希望有帮助。

# python - 我在哪里可以找到 PEP 257 文档字符串约定的正确示例？

> ID：10017776
> 
> 赞同：13
> 
> 时间：2012-04-04T19:16:06.617
> 
> 标签：python, coding-style

[PEP 257 说](http://www.python.org/dev/peps/pep-0257/#multi-line-docstrings)：

> 在记录一个类的所有文档字符串（单行或多行）之前和之后插入一个空行——一般来说，类的方法之间用一个空行分隔，文档字符串需要从第一种方法是空行；为了对称，在类头和文档字符串之间放一个空行。

但我似乎找不到任何实际实现这一点的代码。

我检查了 Python 2.6 提供的几个标准模块，甚至专门搜索了提到 Guido 名字的模块。但即使是 rietveld 代码审查工具的代码，恕我直言也不符合（参见例如[http://code.google.com/p/rietveld/source/browse/upload.py](http://code.google.com/p/rietveld/source/browse/upload.py)）：

```
class CondensedHelpFormatter(optparse.IndentedHelpFormatter):
   """Frees more horizontal space by removing indentation from group
      options and collapsing arguments between short and long, e.g.
      '-o ARG, --opt=ARG' to -o --opt ARG"""

   def format_heading(self, heading):
     return "%s:\n" % heading 
```

这个多行文档字符串之前没有空行，之后的空行在右引号之外。

此类 from`/usr/lib64/python2.6/site.py`之前没有空行，但在右引号之前和之后有一个空行。

```
class _Helper(object):
    """Define the built-in 'help'.
    This is a wrapper around pydoc.help (with a twist).

    """

    def __repr__(self): 
```

是否有可用于演示 PEP 257 的示例？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T19:35:14.773

不是直接的答案，但如果你想遵守 PEP257，你可以使用我写的工具： [https ://github.com/halst/pep257](https://github.com/halst/pep257)

我*也*很震惊地看到有多少代码（也在标准库中）甚至没有尝试遵守 PEP257。

可能大部分人都觉得*他们的*docstring风格有道理，我也觉得PEP257风格有点别扭，*但是*用了一段时间就爱上了，觉得这是最漂亮的方式编写文档字符串。我总是在我能做的每一个方面都遵循 PEP257，并编写了这个工具，以便更多的人可以看到他们如何改进自己的风格。

举个例子，我对 PEP8 和[pep8 工具](http://www.python.org/dev/peps/pep-0008/)有一个有趣的体验：当我第一次阅读 PEP8 时，我喜欢它并*认为*我遵循它，但是当我在 pep8 上尝试我的代码时，我对我离 PEP8 有多远，以及如何在我修复了这些样式错误之后，我的代码看起来会更好。

我希望人们对 pep257 也有类似的体验[，](https://github.com/halst/pep257)并从此开始愉快地关注 PEP257。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T12:23:59.713

据我所知，您链接到的文件说：

> 在记录一个类的所有文档字符串（单行或多行）**之后**插入一个空行——一般来说，类的方法之间用一个空行分隔，并且文档字符串需要从第一个方法偏移由一个空行。

*（强调我的）*

因此，您提供的示例都是正确的，因为它们在文档字符串之后有一个空行，因此将下一个方法声明与一个空行分开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-16T11:51:30.517

这是一些 pep(Python Enhancement Proposal) python 示例示例首先我们选择要使用的版本，因为这个示例与 pep-8 最相似。所以我们必须提供函数描述、参数和返回类型......

```
def foo(bar, spam, eggs):
        """
        Some function

        :param bar: parameter that requires description
        :param spam: parameter that requires description
        :param eggs:
        :return xyz: parameter description
        """ 
```

根据 google style 包含 python 样式的优秀指南。这提供了比 PEP-257 更好的指导，这里是参考链接：[google style guide](https://google.github.io/styleguide/pyguide.html#Comments)

```
def sample_fun(n):
    """Calculate the square root of a number.

    Args:
        n: the number to get the square root of.
    Returns:
        the square root of n.
    Raises:
        TypeError: if n is not a number.
        ValueError: if n is negative.

    """
    pass 
```

# wix - Wix - 如何发布“错误输入”对话框然后返回原始对话框？

> ID：10017777
> 
> 赞同：1
> 
> 时间：2012-04-04T19:16:11.813
> 
> 标签：wix, windows-installer

我有一个 WiX 设置，用户在安装 UI 的常规（非模式）对话框中输入一个值（Java 可执行文件的位置）。我调用了一个自定义操作来验证该对话框条目，它正确地将环境变量 (JAVA_ROOT_DIR_STATUS) 设置为一个值（“1”到“6”表示错误，“0”表示一切正常。）对话框的发布序列执行SpawnDialog 如果值不正确，则显示错误消息，然后在同一控件中显示一个 NewDialog *，条件是值是 good*。根据我刚刚找到的一些文档（http://www.advancedinstaller.com/user-guide/edit-control-event-dialog.html），给定的控件只能有一个或另一个 - 如果 SpawnDialog 和 NewDialog 都是在同一控件中，使用后者而忽略前者。

那么如何实现对用户值的检查和一条错误消息指出该值是错误的呢？我已经看到了做两个 NewDialogs 的建议（奇怪的是，这似乎确实有效，但这意味着不再显示原始对话框，并且单行错误消息显示在与常规页面大小相同的页面中，这看起来真的很糟糕。

您将如何在主条目页面顶部进行“弹出”（如果值不好），但如果值好则转到下一页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:52:46.147

我认为您提到的文档可能是在谈论拥有一个 SpawnDialog 和 NewDialog 两者都有一个真实的条件。我做了你描述的同样的事情，没有任何问题。

```
<Publish Dialog="CustomSetupTypeDlg" Control="TypicalButton" Event="NewDialog" Value="InstallDirDlg">CONDITION_OK</Publish>
<Publish Dialog="CustomSetupTypeDlg" Control="TypicalButton" Event="SpawnDialog" Value="WarningDlg">NOT CONDITION_OK</Publish> 
```

# events - Google Maps api v3 多边形编辑事件未在所有句柄上触发

> ID：10017778
> 
> 赞同：6
> 
> 时间：2012-04-04T19:16:16.093
> 
> 标签：events, google-maps, google-maps-api-3, polygon

我有一个允许用户绘制多边形的绘图管理器。当用户完成该多边形的绘制后，我计算该多边形的面积。除了编辑多边形事件处理之外，所有这些都可以完美运行。我使用以下代码

```
google.maps.event.addListener(path, "set_at", function(){
    //my code here
}); 
```

所以这种工作但只适用于多边形的“角落”。在主要的白色手柄之间有中间的、几乎不可见的编辑手柄（正方形）。如果我通过拉动这些手柄之一来编辑多边形，则不会触发该事件。

关于这种行为的任何想法？这是故意的还是api或我的代码的某种错误？

感谢您的任何帮助。

格雷格

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T17:54:52.313

更新路径上的 LatLng 时触发“set_at”事件。当您移动那些现有的方形节点（更改该节点的 LatLng）时会发生这种情况。覆盖边缘的“略带灰色的方块”允许用户将新的 LatLngs 添加到路径中，而不是编辑现有的（您会注意到移动灰色节点并创建另一个角）。在这种情况下，当新的 LatLngs 添加到形状路径时，为“insert_at”而不是“set_at”添加一个 eventListener 来处理。

# jquery - 在特定日期、特定时间使用 jQuery 重定向？

> ID：10017782
> 
> 赞同：0
> 
> 时间：2012-04-04T19:16:29.320
> 
> 标签：jquery, redirect

有人知道在预编程的日期/时间/时间范围内触发页面重定向的方法吗？我的客户是一家拥有在线“票房”的剧院，他们希望在线售票在演出前的特定时间结束，然后在第二天早上重新开放。

例如，节目在星期五的 7:30 进行。他们在 4 点准备剧院，那里没有互联网接入（它是远程的）。因此，在 4 点到 7:30 之间，他们无法处理新的在线订单。如果有人带着 4 点之后进行的在线销售的确认号到达，他们将没有购买记录。这会导致超额预订、损失金钱等。

我希望用户可以访问演出日期页面（带有购买门票的按钮），当他们点击按钮时，如果票房关闭，我想将他们重定向到提供折扣的页面，购买替代品、联系方式等

我也想坚持使用 jQuery，因为我在那个环境中最舒服。

有人知道可行的选择吗？谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:21:57.663

如果您执行以下操作，听起来会很好：

//客户端

1.  创造电影及其时代的对象
2.  将当前时间存储在 var 中
3.  检查当前时间是否与电影时间之一重叠
4.  如果特定电影发生重叠，则不允许他们查看页面（通过使用 window.location 或其他东西的重定向）

//服务器端

1.  还要检查时间重叠，以便您可以拒绝在错误时间的订单尝试。// 这是必要的，因为 js 可能会失败，您的验证不会停止事务，并且页面可以提交

# algorithm - 生成序列的简单算法/方法

> ID：10017792
> 
> 赞同：3
> 
> 时间：2012-04-04T19:17:04.610
> 
> 标签：algorithm, math

[http://oeis.org/A005773](http://oeis.org/A005773)

我查看了该页面，但大多数缩写没有任何意义。

> Gf：2x/(3x-1+sqrt(1-2x-3x^2)) - Len Smiley (笑脸(AT)math.uaa.alaska.edu)。

Gf 是否暗示生成函数？将 x 替换为任何值几乎都会产生负数（虚数）的平方根。它是如何生成序列的？欢迎任何帮助。

编辑：页面底部有一些使用我不熟悉的专业语言（如 Mathematica、Maple 等）的示例。任何使用 C、Java 或 Python 等语言的解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:29:14.713

如果你有一个序列`{a0, a1, a2, a3, ... }`，那么它的生成函数是

```
f(x) = sum aj x^j 
```

例如，序列`{1, 1, 1, 1, ... }`有

```
f(x) = 1 + x + x^2 + x^3 + ... 
```

方便的是，这个函数有一个封闭的表达式

```
f(x) = 1 / (1 - x) 
```

所以我们说这`1 / (1 - x)`是 的生成函数`{1, 1, 1, 1, ... }`。

对于您的函数`2x / (3x - 1 + sqrt(1 - 2x - 3x^2))`，您需要在其泰勒序列中扩展此函数，`x0 = 0`然后您将获得序列的项。

如果您使用[Wolfram Alpha](http://www.wolframalpha.com/input/?i=Series%5B2x%2F%283x-1%2BSqrt%5B1-2x-3x%5E2%5D%29%2C+%7Bx%2C+0%2C+7%7D%5D)，您会看到前几个术语是

```
1, 1, 2, 5, 13, 35, 96, 267, ... 
```

然后如果你使用[OEIS](http://oeis.org/search?q=1%2C1%2C2%2C5%2C13%2C35%2C96%2C267&sort=&language=english&go=Search)你会得到

> A005773 大小为 n 的定向动物的数量（或标准位置的定向 n 骨牌）。

这正好回到你开始展示这个生成函数确实生成这个序列的地方。

有一本非常有趣的书名为[generatefunctionology](http://www.math.upenn.edu/~wilf/DownldGF.html)专门讨论这个主题，您可以免费下载。享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:29:09.283

是的，Gf 表示生成函数。这个表达式在 x = 0 处的级数展开给出了 x 的幂级数，其系数是序列。

[Wolfram Alpha 的扩展](http://www.wolframalpha.com/input/?i=Series%5B2x/%283x-1%2bSqrt%5B1-2x-3x%5E2%5D%29,%20%7Bx,%200,%2010%7D%5D)

我的输入是

```
Series[2x/(3x-1+Sqrt[1-2x-3x^2]), {x, 0, 10}] 
```

# sql-server - T-SQL 代码在保存为内联表值函数时非常慢

> ID：10017793
> 
> 赞同：8
> 
> 时间：2012-04-04T19:17:04.627
> 
> 标签：sql-server, tsql, user-defined-functions, database-performance

我似乎无法弄清楚为什么 SQL Server 在将我的代码包装在 ITVF 中时会采用完全不同的执行计划。在 ITVF 中自行运行代码时，查询会在 5 秒内运行。如果我将它保存为 ITVF，它将运行 20 分钟并且不会产生结果。我更喜欢在 ITVF 中使用它以进行代码重用。任何想法为什么将代码保存为 ITVF 会导致严重的性能问题？

```
CREATE FUNCTION myfunction
(
    @start_date date, 
    @stop_date date
)
RETURNS TABLE 
AS
RETURN 
(
    with
    ad as (
        select [START_DATE]
              ,[STOP_DATE]
              ,ID
              ,NAME
              ,'domain1\' + lower(DOMAIN1_NAME)
               collate database_default as ad_name
        from EMP_INFO
        where DOMAIN1_NAME != ''
        union
        select [START_DATE]
              ,[STOP_DATE]
              ,ID
              ,NAME
              ,'domain2\' + lower(DOMAIN2_NAME)
               collate database_default as ad_name
        from EMP_INFO
        where DOMAIN2_NAME != ''
    )
    select ad.ID
          ,ad.NAME
          ,COUNT(*) as MONITORS
    from scores
    join users
        on (scores.evaluator_id = users.[user_id])
    join ad
        on (lower(users.auth_login) = ad.ad_name and
            scores.[start_date] between ad.[START_DATE] and ad.[STOP_DATE])
    where scores.[start_date] between @start_date and @stop_date
    group by ad.ID
            ,ad.NAME
) 
```

编辑：

好的...我想我找到了问题...但我不明白。可能我应该发布一个全新的问题，让我知道你的想法。这里的问题是当我用文字调用函数时，它真的很慢......当我用变量调用它时它很快。

```
-- Executes in about 3 seconds
declare @start_date date = '2012-03-01';
declare @stop_date date = '2012-03-31';
select *
from myfunction(@start_date, @stop_date);

--Takes forever!  Never completes execution...
select *
from myfunction('2012-03-01', '2012-03-31') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T21:39:57.363

当您使用文字时，SQL Server 可以查看列统计信息以估计将返回多少行并根据该假设选择适当的计划。当您使用变量时，这些值在编译时是未知的，因此它依赖于猜测。

如果计划在猜测时比引用实际统计信息时更好，那么这表明统计信息可能需要更新。

如果您打开了统计信息的自动更新，那么您很可能会在这里遇到问题[统计信息、行估计和升序日期列](http://sqlinthewild.co.za/index.php/2011/03/22/statistics-row-estimations-and-the-ascending-date-column/)

# php - yii 框架的博客（演示文件夹）的_view.php 中的$data 是什么？

> ID：10017795
> 
> 赞同：1
> 
> 时间：2012-04-04T19:17:23.123
> 
> 标签：php, yii

我对 yii 框架的博客演示的 blog/views/post/_view.php 中的 $data 感到困惑 我如何获得 $data 的这个属性？在哪里可以找到 $data 的定义？我在源代码中找到但没有看到任何关于**作者-> 用户名**、url 评论计数的行？

```
<div class="post">
    <div class="title">
        <?php echo CHtml::link(CHtml::encode($data->title), $data->url); ?>
    </div>
    <div class="author">
        posted by <?php echo $data->author->username . ' on ' . date('F j, Y',$data->create_time); ?>
    </div>
    <div class="content">
        <?php
            $this->beginWidget('CMarkdown', array('purifyOutput'=>true));
            echo $data->content;
            $this->endWidget();
        ?>
    </div>
    <div class="nav">
        <b>Tags:</b>
        <?php echo implode(', ', $data->tagLinks); ?>
        <br/>
        <?php echo CHtml::link('Permalink', $data->url); ?> |
        <?php echo CHtml::link("Comments ({$data->commentCount})",$data->url.'#comments'); ?> |
        Last updated on <?php echo date('F j, Y',$data->update_time); ?>
    </div>
</div> 
```

你能帮我解释一下或给我一些链接或一些关键工作吗？感谢一切！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:29:12.547

See documentation for [`CListView`](http://www.yiiframework.com/doc/api/1.1/CListView):

> The above code first creates a data provider for the Post ActiveRecord class. It then uses CListView to display every data item as returned by the data provider. The display is done via the partial view named '_post'. This partial view will be rendered once for every data item. **In the view, one can access the current data item via variable $data.** For more details, see itemView.

So in your context, `$data` is the Post being rendered.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:00:57.203

$data 是具有单行数据的模型类的对象。作者是与实例为 $data 的模型的另一个模型的关系。$data->author->username 这里 username 是作者指向的模型的变量。$data->author 也被视为一个对象。它只会对作者指向的模型执行关系查询。

您可以在模型的关系（）函数中看到模型的关系。试试yii指南你会找到答案的。

# c# - 迭代时从另一个线程修改列表（C#）

> ID：10017796
> 
> 赞同：13
> 
> 时间：2012-04-04T19:17:24.773
> 
> 标签：c#, multithreading, list, thread-safety

我正在使用 foreach 循环遍历元素列表，如下所示：

```
foreach (Type name in aList) {
   name.doSomething();
} 
```

但是，在另一个线程中，我正在调用类似

```
aList.Remove(Element); 
```

在运行时，这会导致 InvalidOperationException: Collection was modified; 枚举操作可能无法执行。处理这个问题的最佳方法是什么（即使以性能为代价，我也希望它相当简单）？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T19:19:54.080

> 处理这个问题的最佳方法是什么（即使以性能为代价，我也希望它相当简单）？

从根本上说：不要尝试在没有锁定的情况下从多个线程修改非线程安全的集合。您正在迭代的事实在这里几乎无关紧要 - 它只是帮助您更快地找到它。两个线程同时调用是不安全的`Remove`。

*要么*使用线程安全的集合，例如，*要么*确保一次只有一个线程对集合执行*任何*操作。[`ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)

 *** * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-04T20:01:06.430

**方法#1：**

最简单且效率最低的方法是为读者和作者创建一个临界区。

```
// Writer
lock (aList)
{
  aList.Remove(item);
}

// Reader
lock (aList)
{
  foreach (T name in aList)
  {
    name.doSomething();
  }
} 
```

**方法#2：**

这类似于方法#1，但不是在整个`foreach`循环期间保持锁定，而是先复制集合，然后遍历副本。

```
// Writer
lock (aList)
{
  aList.Remove(item);
}

// Reader
List<T> copy;
lock (aList)
{
  copy = new List<T>(aList);
}
foreach (T name in copy)
{
  name.doSomething();
} 
```

**方法#3：**

这完全取决于您的具体情况，但我通常处理此问题的方式是保持对集合的主引用不可变。这样，您就不必在阅读器端同步访问。作家方面需要一个`lock`. 读者端什么都不需要，这意味着读者保持高度并发。您唯一需要做的就是将`aList`引用标记为`volatile`.

```
// Variable declaration
object lockref = new object();
volatile List<T> aList = new List<T>();

// Writer
lock (lockref)
{
  var copy = new List<T>(aList);
  copy.Remove(item);
  aList = copy;
}

// Reader
List<T> local = aList;
foreach (T name in local)
{
  name.doSomething();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-04T19:19:25.533

线程 A：

```
lock (aList) {
  foreach (Type name in aList) {
     name.doSomething();
  }
} 
```

线程 B：

```
lock (aList) {
  aList.Remove(Element);
} 
```

这当然对性能非常不利。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:36:22.363

如果您有*多个*阅读器，请尝试使用 Reader-Writer Lock (.Net 3.5+)，Slim：http: [//msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

如果您只有一个读者，则只是列表本身的锁或私有对象（但不要锁定类型本身），如 Eugen Rieck 的回答所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T19:31:40.287

如果您只想避免使用异常

```
foreach (Type name in aList.ToArray()) 
{ name.doSomething(); } 
```

请注意，如果元素在另一个线程中被删除，也会执行 doSomething()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T19:33:37.800

我无法从您的问题中具体看出，但是（看起来）您正在对每个项目执行操作，然后将其删除。您可能想查看`BlockingCollection<T>`，它有一个调用方法`GetConsumingEnumerable()`来查看它是否适合您。这是一个小样本。

```
void SomeMethod()
{
    BlockingCollection<int> col = new BlockingCollection<int>();

    Task.StartNew( () => { 

        for (int j = 0; j < 50; j++)
        {
            col.Add(j);
        }

        col.CompleteAdding(); 

     });

    foreach (var item in col.GetConsumingEnumerable())
    {
       //item is removed from the collection here, do something
       Console.WriteLine(item);
    }
} 
```**

# php - Preg_replace 覆盖

> ID：10017799
> 
> 赞同：1
> 
> 时间：2012-04-04T19:17:50.070
> 
> 标签：php, preg-replace

我对 PHP 中的一些 preg_replace 函数有一点问题。首先，我需要`$message = preg_replace("/\[img\](.*?)\[\/img\]/is", '<img src="$1" alt="" />', $message);`用图像替换 [img]http://example.com/img.png[/img]。但在那之后，我还有一个 preg_replace 替换 URL：

```
$message = preg_replace("/(?i)\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))/", '<a href="$1">title[$1]</a>', $message); 
```

是否可以防止其中的 URL`<img src=''`也被链接替换？就像将 URL 替换功能放在 img preg_replace 之前并更改它不会更改 BB-Code 括号内的 URL 的模式？

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:24:30.023

关于什么

```
$message = preg_replace("/(?i)\b[^\"]((?:htt ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:24:44.597

更新：阅读下面的更新。

当然。使用负面的lookbehind来检查后面的内容。

它的语法类似于：

```
(?x)
# Match abc if there is no ' or " behind
(?<!['"]) abc 
```

有关更多详细信息，请参阅[perlre](http://perldoc.perl.org/perlre.html)。

* * *

更新：

似乎它并没有真正起作用。这个技巧的字面意思是没有`'`或`"`落后，所以正则表达式实际上会看到这样的东西（匹配的字符串在`<>`.

```
"http://<example.com/img>.png" 
```

不要使用这个技巧，你应该阅读[preg_replace 中的 Ignore html 标签](https://stackoverflow.com/questions/8193327/ignore-html-tags-in-preg-replace)。有时正则表达式不是解决方案，这就是其中一种情况。

# redis - 在 redis 中使用键

> ID：10017800
> 
> 赞同：2
> 
> 时间：2012-04-04T19:17:51.463
> 
> 标签：redis, key-value-store

我是 Redis 和键值数据库的新手。您能否建议我正确实现 redis 中的这种关系方法。

我有两个键对一个值的关系表：

-master_id；-slave_id；-价值。

例子：

> master_id | slave_id | 价值
> 
> 1 | 1 | val1
> 
> 2 | 1 | val2

通常通过 master_id 字段访问值，但有时需要通过 slave_id 字段进行选择（或删除）。因此，我们可以通过两个字段（master_id 或 slave_id）获得单个值。在 redis 中，据我了解，每个键都意味着一个值。在不重复价值的情况下，执行此操作的最佳方法是什么？注意：值字段必须是 SET 或列表类型。

在 redis 中，我们有：

> 1:1 验证1 2:1 验证2

我只能通过全键 1:1 或 2:1 访问值。我不能做这样的东西 DEL * :1 （删除第二部分等于 1 的所有键）或 GET 1: * （获取键的第一部分等于 1 的所有键）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:37:34.533

为避免值重复，您可以使用这样的普通键/值对：

*   master_id : 值

*   slave_id : master_id

This has the drawback that you have to query twice the server to get/delete/modify a value by slave_id. (You first query for the slave_id, the server responds with the master_id if any and then you query master_id to do stuff with the value associated). This will not be an issue as soon as [LUA scripting](http://redis.io/commands/eval) arrives, though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:39:06.163

在示例中，我不明白主键是否只是 master_id 或 (master_id,slave_id)。我假设后者。

尝试将关系概念映射到键/值存储通常是没有意义的。Redis 是一个数据结构服务器，所以需要从数据结构和访问路径的角度来考虑。你想要：

*   将值存储一次
*   能够访问 master_id 字段中的值
*   能够访问 slave_id 字段中的值

你需要：

*   用于识别值的数字键
*   每个 master_id 的集合以索引相应的值
*   每个 slave_id 一个集合来索引相应的值

例子：

```
SET value:1001 val1
SET value:1002 val2
SADD master:1 1001
SADD master:2 1002
SADD slave:1 1001 1002 
```

要检索与给定主 ID 对应的值：

```
SMEMBERS master:id
MGET <result of the previous command with a value: prefix> 
```

要检索与给定从属 ID 对应的值：

```
SMEMBERS slave:id
MGET <result of the previous command with a value: prefix> 
```

要检索对应于 master id1 和 slave id2 的值：

```
SINTER master:id1 slave:id2
MGET <result of the previous command with a value: prefix> 
```

可以通过使用 SORT 命令进一步优化以减少往返次数。[请参阅此答案中](https://stackoverflow.com/questions/9425733/need-help-conceptualizing-in-redis-nosql/9437279#9437279)的示例。

当然，如果master_id实际上是主键，那么可以简化，因为不需要引入额外的键来识别值。

# function - 具有内部函数的静态构造函数创建一个闭包？

> ID：10017801
> 
> 赞同：0
> 
> 时间：2012-04-04T19:17:57.433
> 
> 标签：function, collections, static, closures

1.）如果我调用如下静态函数并且必须对传递给静态函数的某些数据执行附加操作。调用嵌套的内部函数会创建闭包吗？我所追求的是使 MakeSomethingOk 之类的操作在全局范围内不可用，因为 MakeSomethingOk 仅与 Person.PerformSomeTypeOfOperation 相关

2.) 是否可以从其他静态函数构造函数访问像 _persons[] 这样的集合对象，就像在共享中一样？无需做 Persons._persons

3.) 如果函数是静态的，函数构造函数是否仍被称为构造函数？

```
 function Person() { };
    function Persons() { var _persons = []; };
    Person.PerformSomeTypeOfOperation = function (someThing) {

        if (someThing == 'turnsOutToBeOk') { return 'anyThing' }
        else {
            function MakeSomethingOk() { }

            //someThing is now being made Ok
        };
    }; 
```

* * *

## 更新下面的答案 (1.)。

```
 function Person() { };
    function Persons() { **protected static** _persons = []; };

    Person.Operation1 = function (person) {

    if(person.id == _persons[0].id){}//do something
    };

    Person.Operation2 = function (person) {

    if(person.height > 7){//do something, like call NBA
           _persons.push(person);
           }
    };

    Person.Operation3 = function (person) {

    if(person.isHungOver){//do something, like call AA
           _persons.slice(3,1);
           }
    }; 
```

所以我试图访问相同的静态字段而不将其暴露给公众，并且仍然能够使用列表对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:30:36.730

本地函数非常好（在另一个函数中定义的函数），它们的使用有几个原因。首先，它们确实限制了在定义它们的函数内可以调用它们的范围。其次，它们可以访问父函数的参数和局部变量：

```
Person.PerformSomeTypeOfOperation = function (someThing) {

    function MakeSomethingOk() { /* code here */ }

    if (someThing == 'turnsOutToBeOk') { return 'anyThing' }
    else {
        MakeSomethinngOK();
    };
}; 
```

通常会在父函数的开头定义它们，因为 javascript 解释器无论如何都会将它们“提升”到该位置。

至于你的第二个问题，静态函数可以有静态数据。因此，您可以拥有 Persons.list = []，然后任何人都可以作为 Persons.list 访问该数据，包括其他功能。如果您想要只有成员函数可以访问的私有数据，那么您将不得不使用不同的构造，例如[这里](http://www.crockford.com/javascript/private.html)。

您的第三个问题几乎只是一个语义问题。通常构造函数的目的是创建/初始化一个对象。如果您只想拥有一个单例（一个静态对象），我认为它更像是一次性初始化，而不是可用于多个对象的构造函数，但这只是我的观点 - 我不认为在这种情况下，有一个确切的定义可以区分创建/初始化单例与多个对象。

# html - 需要一些 HTML 正则表达式帮助（是的，我知道不应该这样做）

> ID：10017804
> 
> 赞同：2
> 
> 时间：2012-04-04T19:18:23.073
> 
> 标签：html, regex, json

所以作为前言，我需要这个正则表达式来解决我正在等待服务器人员修复的错误。

基本上，我用 HTML 中未转义的 " 字符返回 JSON。我需要一个在 <> 字符之间查找并将 " 替换为 \" 的正则表达式。

```
<div style="padding: 0%; width: 100%;"><span style="font-family:verdana;"><span style="font-size: 72px;">Demo!</span></span></div> 
```

更新信息：文本虽然在一些 json 中作为字符串发送回，但我最终需要将其解析为常规 JSON，但解析失败。

字符串看起来像这样：

```
"{
"overlay": "overlay1",
"type": "text", 
"text": "<div style="padding: 0%; width: 100%;"><span style="font-family:verdana;"><span style="font-size: 72px;">Demo!</span></span></div>"
}" 
```

这是迄今为止我发现的正则表达式（我知道一些正则表达式的东西，只是没有很多向前或向后看

```
/(?<=\<)(.*?)(?=\>)/g 
```

但使用它只会让我检索这个：

> < **div style="填充：0%；宽度：100%；"** >< **span style="font-family:verdana;"** >< **span style="font-size: 72px;"** >演示！< **/span** >< **/span** >< **/div** >

（基本上只是 <> 字符内的所有内容。当我真的只想针对 <> 内的“。）

谁能推荐一个快速的临时修复？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:27:23.123

The following should work (as a temporary fix):

```
/"(?=[^<]*>)/g 
```

This will match all double quotes where there are no `<` characters before the next `>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:25:59.817

Try replacing the `(.*?)` in the center part with a `([^<>]*?)`
You have to be careful with the dot operator.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:30:14.167

尝试这个：

`string = string.replace(/\"/g, "\\\"");`

// - - 编辑 - -

```
var someString = "{
"overlay": "overlay1",
"type": "text", 
"text": "<div style="padding: 0%; width: 100%;"><span style="font-family:verdana;"><span style="font-size: 72px;">Demo!</span></span></div>"
}";

someString = someString.replace(/"(?=[^<]*>)/g, "\\\"");  //Props @F.J for this RegEx
Obj = $.parseJSON(someString);
console.log(Obj.text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:41:12.427

如果 JSON 格式正确，并且您在标签之外没有任何属性类型语法，则以下内容应该适用于单行修复：

```
var str = '<div style="padding: 0%; width: 100%;"><span style="font-family:verdana;"><span style="font-size: 72px;">Demo!</span></span></div>'
str.replace(/([\w-]+)=\"(.*?)\"/g, '$1=\\\"$2\\\"')
>> "<div style=\"padding: 0%; width: 100%;\"><span style=\"font-family:verdana;\"><span style=\"font-size: 72px;\">Demo!</span></span></div>" 
```

这会在所有 HTML 属性出现的任何位置（不一定在标签内）之前添加斜杠。如果您需要更好地定位它，请首先搜索以隔离标签，然后遍历每个标签进行此正则表达式替换。

顺便说一句，你为什么说“我知道不应该这样做”？这是正则表达式的完美使用！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T19:30:40.927

如果这是 perl，您可以执行以下操作：

```
$string =~ s/(?!\\)"/\\"/g; 
```

# c# - 如何在asp.net mvc3中动态创建视图页面

> ID：10017805
> 
> 赞同：0
> 
> 时间：2012-04-04T19:18:24.713
> 
> 标签：c#, asp.net-mvc-3

我正在使用 mvc 进行分类广告项目。这是我在 mvc 中的第一个项目，所以我在构建一个小型 CMS 时遇到了问题。

在这个网站场景中是这样的：

1.  用户将创建一个页面，这将是动态创建的，该页面将是其主页。
2.  此页面内容（如页眉、菜单栏、页脚等）将动态创建。
3.  用户可以添加更多关于我们的页面或联系我们。就像您使用**www.wordpress.com**一样。

我**动态地**使用 tye 词来表示由 c# 或任何其他方法生成

所以我很困惑如何创建这些页面以及如何保存和管理这些页面的css、html。

请帮助我阅读任何书籍或文章（我搜索了很多但我没有找到解决方案）

我不想使用任何 CMS 工具（这是客户的要求）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:03:46.020

我不知道有任何关于从头开始开发 CMS 的书籍。

除了 Travis J 的答案中已经列出的好书，我建议你看看[Umbraco](http://umbraco.com)。这是一个 CMS，您可以下载源代码。

我强烈建议您在 Umbraco 资源潜水之间`ProfessionaL ASP.NET MVC 3`和之前至少阅读一本。`Pro ASP.NET MVC 3 Framework`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:39:23.027

[ORCHARD CMS](http://orchardproject.net/) - 它是在 ASP.NET MVC 上开发的。也许您可以将此 CMS 用作您的基础并开发您需要的确切扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:48:38.717

这两本书非常适合 asp.net **mvc** 3。我强烈推荐它们并拥有它们。

专业的 ASP.NET MVC 3

[http://www.magazines.com/product/pro-asp-net-mvc-3-framework?affiliate_id=3823&gclid=CJiU_vn6m68CFYYHRQodyz6RbA](http://www.magazines.com/product/pro-asp-net-mvc-3-framework?affiliate_id=3823&gclid=CJiU_vn6m68CFYYHRQodyz6RbA)

Pro ASP.NET MVC 3 框架

[http://www.amazon.com/dp/1118076583/ref=asc_df_11180765831963163?smid=ATVPDKIKX0DER&tag=hyprod-20&linkCode=asn&creative=395093&creativeASIN=1118076583&hvpos=none&hvexid=&hvnetw=g&hvrand=705138720951824289&hvpone=&hvptwo=&hvqmt=](https://rads.stackoverflow.com/amzn/click/com/1118076583)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:27:47.103

您不会动态创建 cshtml 页面。这听起来像是一个基本的误解。我是 .net mvc 的新手，所以我的代码示例可能已关闭。但我做过很多CMS。一个视图将是“从数据库中渲染内容”视图，我将其称为 RenderStuff。您将在那里定义许多不同的部分，因此您的主布局页面可以@RenderSection("header")，而您的 RenderStuff 视图可以：

```
@section header {
  //query db for header row based on customer and pageid
  //if found, write out as html
} 
```

您可能希望设置路由，以便始终拥有客户和页面 id 的两个路由参数：

```
context.MapRoute(
                "Stuff_default",
                "Stuff/{controller}/{action}/{customer}/{pageid}"}
            ); 
```

CMS 的功能还有很多。

# c# - C# winforms 是否具有与 Asp.net 类似的 HtmlDecode()？

> ID：10017806
> 
> 赞同：0
> 
> 时间：2012-04-04T19:18:27.723
> 
> 标签：c#, asp.net, winforms

在网络上使用 c# 会很简单

```
 System.Web.HttpUtility.HtmlDecode() 
```

但现在我正在使用一个 winform 应用程序并且需要转换 Html 转义值什么是等效的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:19:53.797

您可以参考 System.Web 库并使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:20:55.560

如果您添加`System.Web`到您的项目引用，那么您应该能够使用该`HttpUtility.HtmlDecode`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:19:25.697

只需添加对`System.Web`dll 的项目引用，您就可以使用它。

# string - 实现字典的最佳数据结构？

> ID：10017808
> 
> 赞同：73
> 
> 时间：2012-04-04T19:18:29.850
> 
> 标签：string, algorithm, dictionary, data-structures

存储字典中所有单词的最佳数据结构是什么？我能想到的最好的方法是使用 a `HashMap`，它将映射到 a `HashTable`。基本上，根据第一个字符，我们将获得关联`HashTable`，然后使用它，我们可以添加从该字符开始的单词。然后，我们将根据字符串选择一个好的散列函数。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-04-04T19:21:16.570

根据您想要做什么，有许多好的数据结构。

如果您只想存储单词并询问“这个单词是否在这里？”，没有其他花哨机器的标准哈希表是一种合理的方法。如果该词是预先固定的列表，请考虑使用[完美的哈希表](http://en.wikipedia.org/wiki/Perfect_hash_function)以获得出色的性能和空间使用率。

如果您希望能够在支持快速查找的同时检查给定前缀是否存在，则[trie](http://en.wikipedia.org/wiki/Trie)是一个不错的选择，尽管它可能会有点空间效率低下。它还支持快速插入或删除。它还允许按字母顺序进行迭代，这是散列不提供的。这本质上是您在答案中描述的结构，但根据用例的不同，尝试的其他表示可能会更好。

如果除了上述之外，您还知道单词列表是固定的，请考虑使用[DAWG](http://en.wikipedia.org/wiki/DAWG)（有向无环单词图），它本质上是该语言的最小状态 DFA。它比 trie 更紧凑，但支持许多相同的操作。

如果您想要类似 trie 的行为但又不想付出巨大的空间损失，那么[三元搜索树](http://en.wikipedia.org/wiki/Ternary_search_tree)是另一个可行的选择，[基数树](http://en.wikipedia.org/wiki/Patricia_tree)也是如此。这些是非常不同的结构，但在不同情况下可能比 trie 好得多。

如果空间是一个问题，但你想要一个 trie，请查看[简洁的 trie](http://stevehanov.ca/blog/index.php?id=120)表示，它的查找速度较慢，但​​理论上是最佳的空间使用。该链接讨论了它如何在 JavaScript 中用作传输大量数据的简单方法。另一种紧凑的表示是[双数组 trie](http://linux.thai.net/~thep/datrie/datrie.html)，尽管我承认我对此知之甚少。

如果您想将字典用于拼写检查等需要查找与其他单词相似的单词的操作，那么[BK-tree](http://en.wikipedia.org/wiki/BK-tree)是一个值得考虑的优秀数据结构。

希望这可以帮助！

# wcf - 带有通知的客户端/服务器的 WCF 最佳实践

> ID：10017812
> 
> 赞同：2
> 
> 时间：2012-04-04T19:18:44.250
> 
> 标签：wcf, architecture, client-server, wcf-client

首先：对于我将要描述的问题，我们已经找到了一个可行的解决方案，但感觉不太对劲。

我们有一个应用程序，其中包含一个应用程序服务器和大约 30 - 100 个客户端。扩展服务器不是问题。最重要的是**从服务器到客户端的通知**，但当然也有从客户端调用到服务器的服务方法。

我们现在要做的是创建一个带有回调通道的服务合约，在服务中注册客户端（即服务包含活动回调通道列表）并通过这些回调通道发送通知。

我们需要解决的问题是：

1.  **连接超时**- 服务现在包含一些 KeepAlive 方法，客户端大约每分钟 ping 一次
2.  **在服务器或网络故障后重新连接客户端**- 这是我关心的重点。目前我们有一个长时间运行的客户端对象（服务引用，继承自`DuplexClientBase`）来调用服务和回调对象来处理收到的通知。`client.Faulted`我们尝试用新创建的客户端替换客户端和回调对象，直到可以再次访问服务器。这种方法涉及一些奇怪的异常处理......

**问题：**在每个客户端上启动一个WCF服务并在服务器上注册每个客户端的端点会更好吗？对于所描述的两个问题，是否有更好的解决方案？

编辑：重点是：我错过了什么吗？- 我相信所描述的架构应该很常见，我正在寻找“默认”，最好的方法。这种设置没有一些样本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:53:04.403

如果您的问题与可用性有关（在这种情况下是服务-> 消费者和消费者-> 服务的可用性），那么也许您应该考虑使用一些更容错的传输，例如 MSMQ（可能使用 netMsmqBinding）。

您可以将复杂的 WCF 回调基础结构替换为简单、持久的订阅存储。

当您需要发送“回调”时，只需从订阅商店中检索消费者列表并向每个消费者发送消息。

连接永远不会超时，因为您不会有状态连接。

网络故障后从消费者到服务的重新连接也得到了解决——事实上，小的网络中断甚至不会被注意到。

很抱歉，这并没有直接回答您最初的问题，并且欣赏这种规模的返工可能不在您的要求范围内。

# c# - 我无法将用户设置导出到 winForms App 中的发布版本

> ID：10017816
> 
> 赞同：0
> 
> 时间：2012-04-04T19:19:04.453
> 
> 标签：c#, winforms, properties, settings

我正在尝试将测试/编码时保存的用户设置迁移到发布版本。我该如何正确地做到这一点？我尝试使用代码导出设置文件，但它确实有效！我通过 properties.settings.default 等存储设置

没有错误或异常，就在我构建和移动未复制设置的文件时。

听起来很简单，但我不确定需要哪些文件！

任何知道如何会很棒。

# iis - IIS WebDeploy 通过 Powershell 导出服务器包

> ID：10017826
> 
> 赞同：3
> 
> 时间：2012-04-04T19:19:22.783
> 
> 标签：iis, powershell, zip, msdeploy

我很好奇如何通过对 IIS 管理器的 powershell 命令创建“导出服务器包”。

这是我的场景：当我将 .NET 软件构建（和 Flex 等）部署到我们的 Web 服务器时，我通常手动执行此过程：**我打开 IIS 管理器并按照“导出服务器包”向导（创建一个 zip整个 IIS 结构的文件 - 内容和所有）。**然后我存档这个新生成的 zip 文件（用于备份目的）。如果我们的网络服务器变得无响应或消失在“云”中，该 zip 文件会很有帮助！IIS 备份 zip 文件允许我们快速“推出”。

我的问题是......**如何使用 Powershell 脚本（而不是手动）完成服务器包的导出？**我在网上找不到太多关于这个主题的信息！！

我查看了 MS Deploy 动词（如此处所述：[http](http://raquila.com/software/ms-deploy-basics/) ://raquila.com/software/ms-deploy-basics/ ），但我没有看到“导出”动词/动作？

任何帮助表示赞赏。我的最终目标是通过 powershell 生成服务器包，并上传到 Amazon S3 云进行安全保存。S3 云的东西很简单，它是我遇到问题的 IIS 脚本的 powershell...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:33:27.983

I can't see a great way of doing this with just PowerShell cmdlets. What I would suggest is using PowerShell to call appcmd to export the application settings and then grab a copy of the files used. Then I'd throw these in an S3 bucket, also through PowerShell.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-06T01:54:23.767

您是否使用任何东西来构建工件（即：竹子或团队城市？）如果直接从 VisualStudio 使用 AWS 工具包：[http ://aws.amazon.com/visualstudio/](http://aws.amazon.com/visualstudio/)

对于部署：我会专注于以某种自动化方式（如果可能的话）将工件推送到 S3。在 S3 中获得工件后，请制定再次使用这些工件的计划。它们是否用于从 S3 引导新实例/服务器？它们是用于 DR 目的的备份吗？

例如，我们使用 Bamboo 构建，在 Bamboo 中我们可以创建一个部署计划，其中包含要执行的任务。其中之一包括上传到 S3。

**检查以下 powershell cmdlet： [http ://www.iis.net/learn/publish/using-web-deploy/web-deploy-powershell-cmdlets](http://www.iis.net/learn/publish/using-web-deploy/web-deploy-powershell-cmdlets)

# macos - 在 git push 之后构建 iOS 项目（使用 gitolite 钩子）并变得致命：不是 git 存储库：'。'

> ID：10017837
> 
> 赞同：0
> 
> 时间：2012-04-04T19:19:55.093
> 
> 标签：macos, git

背景：我正在关注本教程，除了我没有使用 jenkins：[http ://parveenkaler.com/2012/02/04/continuous-deployment-for-ios-apps/](http://parveenkaler.com/2012/02/04/continuous-deployment-for-ios-apps/)

脚本执行时： `git show -s --format=%s`

我收到此错误

致命的：不是 git 存储库：'。'

但我不明白为什么我会看到这个错误，因为它显然必须是一个有效的 git repo，否则这些文件将不存在（临时文件夹是通过更新后 gitolite 钩子中的 git clone 创建的，并在构建之前删除，即脚本开始）。

这是在安装了 Lion 的 Mac 上运行的。

有什么想法吗？谢谢

编辑：我`ls -lF -d .git`在构建脚本中添加了一个，这是输出

```
drwx-------- 13 用户名管理员 442 4 月 4 日 13:47 .git/
远程：致命：不是 git 存储库：'。'

```

这是上面提到的脚本部分，因此您可以看到正在执行的行的上下文：

```
ls -lF -d .git

/usr/local/git/bin/git show -s --format=%s > log.txt

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:43:08.483

如果在当前目录或上面有一个 'git' 目录，它只是一个明显的 git 存储库。从您尝试“git show”的位置开始查找：

```
ls -lF -d .git 
```

然后向上移动直到找到它。（不应该有，因为 'git show' 失败。）或者，转到某个顶级目录并搜索 git 存储库：

```
find . -type d -name '.git' 
```

# fogbugz - FogBugz XML API（案例：）

> ID：10017838
> 
> 赞同：2
> 
> 时间：2012-04-04T19:19:58.487
> 
> 标签：fogbugz, fogbugz-api

我正在使用[FogBugz XML API](http://www.fogcreek.com/fogbugz/)，但我遇到了问题。我可以通过我的应用程序创建新案例、打开创建的案例、搜索案例等。问题在于获取有效负载时，我可以使用以下代码获取案例主体：

```
 string fbToken = LogOnFogBugz();
        string param = "";

        param += "cmd=search";
        param += "&token=" + fbToken;
        param += "&q="+ "appID["+appID+"]";
        param += "&cols=sTitle,sStatus,sLatestTextSummary";

        HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(fbUrl + param);
        httpWebRequest.Method = WebRequestMethods.Http.Post;
        httpWebRequest.Accept = "application/xml";
        httpWebRequest.ContentLength = 0;

        HttpWebResponse response = (HttpWebResponse)httpWebRequest.GetResponse();
        StreamReader streamReader = new StreamReader(response.GetResponseStream());
        XDocument doc = XDocument.Load(streamReader);

 var cases = from c in doc.Descendants("case")
                    select new
                        {
                            CaseNumber = c.Attribute("ixBug").Value,
                            CaseTitle = (string)c.Element("sTitle"),
                            CaseStatus = (string)c.Element("sStatus"),
                            CaseText = (string)c.Element("sLatestTextSummary")
                        }; 
```

但如果我编辑案例并向其中添加文本，我只会得到最后输入的文本，如 ( `sLatestTextSummary`) 所示。

如何使用 XML API 从案例中获取整个文本。

**例子：**

> 由 xxx xxx 于 2012 年 4 月 4 日（今天）上午 10:31 打开 -------------------------> Blah Blah Blah
> 
> 由 xxx xxx 分配给 xxx xxxx 2012 年 4 月 4 日（今天）上午 10:31
> 
> 编辑者 xxx xxx 2012 年 4 月 4 日（今天）下午 2:00 ---------------------------->新文本。

我只是得到`{new text}`。

提前致谢。

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:52:24.120

您想将其`events`作为您的`cols`论点之一。然后对于每种情况，您还必须遍历事件以从中获取文本。

# html - 如何滚动到使用滚动条溢出的表中的行？

> ID：10017839
> 
> 赞同：0
> 
> 时间：2012-04-04T19:19:59.377
> 
> 标签：html

我有一个需要在单个页面内滚动的表格。我使用了一个 jQuery 可滚动表插件来完成此操作，但现在我需要弄清楚如何滚动到特定行。

我尝试了几种不同的方法，包括：

```
$.scrollTo($('#rowIWantToScrollTo')); 
```

和

```
var rowpos = $('#rowIWantToScrollTo').position();

$('#myTable').scrollTop(rowpos.top); 
```

和

```
$('#rowIWantToScrollTo').scrollIntoView(); 
```

到目前为止，还没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:35:54.370

**[现场演示](http://jsfiddle.net/8AYvW/2/)**

这是如何做到的。（你很接近）。

1) 使用 offset() 和 .top 获取元素的顶部偏移量

2) 使用 ScrollTo 滚动到元素

出于说明目的，我将其拆分了一下。

Javascript：

```
$("a").click(function(e){

  var _offset = $(".row9").offset();
  var _topoffset = _offset.top;

  $(".scrollbox").scrollTop(_topoffset);

  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T02:53:23.740

是的，你是对的@ShaneCourtrille。据我所知，插件中没有内置功能可以滚动到特定行。

下面是一个使用超链接的非常简单的解决方案。不确定这是否是您想要的，但它可以完成工作......

像这样创建一个内部锚点......

```
<tr>
    <td><a name="toHere"></a>FL</td>
    <td>$1,364.27</td>
    <td>$712.05</td>
    <td>$211.11</td>
    <td>$416.87</td>
    <td>$1,364.27</td>
    <td>$712.05</td>
    <td>$211.11</td>
    <td>$416.87</td>
</tr> 
```

并将其链接到表外 -`<a href="#toHere">Scroll to my specified row</a>`

我只是做了一个简短的搜索，那里还有其他插件。一个是[数据表](http://www.datatables.net/index)。

以下链接中列出的更多插件可能对您有所帮助...

[https://stackoverflow.com/questions/159025/jquery-grid-recommendations](https://stackoverflow.com/questions/159025/jquery-grid-recommendations)

# c++ - C/C++ 中的日常文件维护工作

> ID：10017845
> 
> 赞同：0
> 
> 时间：2012-04-04T19:20:20.343
> 
> 标签：c++, c

我正在为一组相关的平面文件数据库进行重置和同步的日常维护工作。

**问题陈述：**如果维护应用程序在此期间转储，我会从头开始，而不是从离开的地方继续。

**尝试过的解决方案：**为了解决这个问题，我开始将处理后的偏移量记录到文件中。这样，当我回来时，我可以在从头开始之前检查我的完成状态。

**问题：**记录正在处理的每条记录的偏移量会大大增加处理时间。

有人可以提出更好的方法来处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:49:13.237

是的。在您的程序中添加一个计数器，每 1000 个块，将您的信息写入日志文件。这将使您的日志记录 IO 减少 3 个数量级，代价是在重新启动时必须重做多达 1000 个块。

# r - 如何使用 ggplot 生成非标准绘图类型？

> ID：10017853
> 
> 赞同：16
> 
> 时间：2012-04-04T19:21:00.197
> 
> 标签：r, ggplot2

我想用 ggplot 制作一个看起来非常接近这个的情节（[在此处找到](http://learnr.files.wordpress.com/2009/07/chapter04-04_05_r.png)）：

![在此处输入图像描述](../Images/98196fe4db556797815ba4239bf0edaa.png)

但是，我想绘制条件范围而不是频率。这是我想用 5 个条件制作的情节草图：

![在此处输入图像描述](../Images/b47627bb2cbaa35b9213b60cccf8a23d.png)

我的数据被安排为范围的开始和结束坐标。例如，对于条件 5，范围的开始是 30，范围的结束是 40（为了清楚起见，我在图表上标记了这个）。我的数据来自以下形式的文件：

```
id      start   end
1       20      35
2       60      75    
3       10      30
4       80      90
5       30      40 
```

我有大约 100 个开始和结束值，我想以这种方式在一个图表上绘制它们。最终的情节应该只有两种颜色。

更新：

为了将来参考，贾斯汀的解决方案产生了这个：

![在此处输入图像描述](../Images/840154285b3190e9ca1105dc4faccd66.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T19:45:10.587

像这样的东西：

```
library(ggplot2)
library(reshape)
dat <- data.frame(lets=letters[1:5], low=1:5, mid=3:7, high=10:14)
dat.melt <- melt(dat, id.vars='lets')

ggplot(dat.melt, aes(x=lets, y=value, fill=variable)) + 
  geom_bar(stat='identity') + 
  scale_fill_manual(breaks=c('low','mid','high'), values=c('blue','red','blue')) +
  coord_flip() 
```

但相当依赖于您的数据...

# java - 如何在 Java 中使用 windows shell32.dll 创建目录快捷方式？

> ID：10017857
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:21:11.870
> 
> 标签：java, shortcut, shell32.dll

我需要创建一个可以执行以下操作的批处理文件。

1.  将目录和子目录从源文件夹中超过 10 天的复制到目标文件夹。
2.  从源文件夹中删除复制的目录并在源文件夹中为该目录创建快捷方式。

任何帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:56:42.297

在没有 java 的情况下创建一个批处理文件并测试 ist 直到它工作。

如果示例批处理文件有效，请查看如何使用 java 创建批处理。

# java - 生成 0 到 x 之间的随机数 (Java)

> ID：10017858
> 
> 赞同：4
> 
> 时间：2012-04-04T19:21:12.397
> 
> 标签：java, random, cryptography

使用 Xorshift 随机数生成器...我已经有了生成器，但我无法修改它以提供介于 0 和上限之间的数字（如`nextInt()`Java Random 类中的方法）。

```
 long seed = System.nanoTime();

  int next(int nbits) {
    long x = seed;
    x ^= (x << 21);
    x ^= (x >>> 35);
    x ^= (x << 4);
    seed = x;
    x &= ((1L << nbits) -1);
    return (int) x;
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:26:56.867

你可以看到java对[随机类做了什么](http://developer.classpath.org/doc/java/util/Random-source.html)

# python - 如何构建一个简单的 HTTP POST 服务器？

> ID：10017859
> 
> 赞同：1
> 
> 时间：2012-04-04T19:21:15.223
> 
> 标签：python, http

```
class MyHandler( BaseHTTPServer.BaseHTTPRequestHandler):
    def do_POST( self ):
        ctype, pdict = cgi.parse_header(self.headers.getheader('content-type'))
        postvars = {}
        try:
          if ctype == 'application/x-www-form-urlencoded':
              length = int(self.headers.getheader('content-length'))
              postvars = cgi.parse_qs(self.rfile.read(length), keep_blank_values=1)

          self.send_response( 200 )
          self.send_header( "Content-type", "text")
          self.send_header( "Content-length", str(len(body)) )
          self.end_headers()
          self.wfile.write(body)
        except:
          print "Error"

def httpd(handler_class=MyHandler, server_address = ('2.3.4.5', 80)):
    try:
        print "Server started"
        srvr = BaseHTTPServer.HTTPServer(server_address, handler_class)
        srvr.serve_forever() # serve_forever
    except KeyboardInterrupt:
        server.socket.close()

if __name__ == "__main__":
    httpd( ) 
```

我已经准备好大部分代码。如果客户端处于非活动状态或在 10 秒内没有响应（类似于[https://stackoverflow.com/a/265741/204623](https://stackoverflow.com/a/265741/204623)），我需要添加关闭连接的代码。基本上我不希望服务器不阻止对 send_response()、wfile.write() 等的调用。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T05:10:42.680

尝试这个：

```
import BaseHTTPServer

class TimeoutServer(BaseHTTPServer.HTTPServer):
    def get_request(self):
        result = self.socket.accept()
        result[0].settimeout(10)
        return result 
```

然后使用`TimeoutServer`类代替`HTTPServer`来获得超时支持。

# actionscript-3 - 将影片剪辑拟合到 4 个坐标

> ID：10017861
> 
> 赞同：0
> 
> 时间：2012-04-04T19:21:19.583
> 
> 标签：actionscript-3, flash, transformation, movieclip, coordinate-transformation

我非常喜欢动作脚本，但我遇到了电影剪辑的问题。

我有 4 个坐标，需要为它们安装合适的影片剪辑，因此影片剪辑的每个角都在一个坐标上。

我唯一能发现它用矩阵和角度转换它（见例子），但这些不能是我计算所有角度等问题的最佳解决方案。

```
var degX:Number = 0;
var degY:Number = 0.3;

//Get the transform matrix for the object to skew
var m:Matrix = bild.transform.matrix;
m.b = Math.tan(degY *(Math.PI/180));
m.c = Math.tan(degX *(Math.PI/180));

//Apply the matrix to the transform object
var t:Transform = new Transform(bild);
t.matrix = m;

//Apply the skew
bild.transform = t; 
```

我希望您了解我的问题并知道解决方案。

我已经尝试过扭曲图像，因为它似乎完全符合它的需要，但我无法得到它，所以显示我的图像。坐标有效，如果我取消评论评论部分，我会看到白色的 retangles exaclty 它们应该在哪里，但它们不会在更新时被删除，我希望你能帮助我。这是我的代码：

```
var PointUR:Point = new Point();
PointUR.x = values1[0];
PointUR.y = values1[1];

var PointUL:Point = new Point();
PointUL.x = values2[0];
PointUL.y = values2[1];

var PointBR:Point = new Point();
PointBR.x = values3[0];
PointBR.y = values3[1];

var PointBL:Point = new Point();
PointBL.x = values4[0];
PointBL.y = values4[1];

[Embed(source='MyImage.jpg')]
var MyImage:Class;
var shape:Shape = new Shape();
var bitmap:Bitmap = new MyImage();
var showGrid:Boolean = true;
var myColorTransform = new ColorTransform();
/*myColorTransform.color = 0xFFFFFF;
shape.transform.colorTransform = myColorTransform;
shape.graphics.beginFill(0x000000,1);
addChild(shape);*/
var distortion:DistortImage = new DistortImage(267, 400, 3, 3);
if (showGrid){
            shape.graphics.lineStyle(1, 0x00FF00);
}    
distortion.setTransform(shape.graphics, 
                        bitmap.bitmapData, 
                        PointUR, 
                        PointUL, 
                        PointBR, 
                        PointBL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:02:24.203

在 as3 中使用矩阵将movieClip 或Sprite 转换为梯形是不可能的。查看[此链接](http://www.senocular.com/flash/tutorials/transformmatrix/)，该链接解释了可能性的范围

简而言之：

![在此处输入图像描述](../Images/64fd3c72351794ff3c64913a874e18be.png)

实现这一点的方法是将 DisplayObject 分解为较小的三角形，并对每个三角形应用不同的平移矩阵。最终结果使三角形有点突出，但如果增加三角形的数量，这种效果会减弱。

这是一个带有演示和源代码的博客[链接](http://www.rubenswieringa.com/blog/distortimage)

[使用 3d 类或 Mathieu Badimon 的Five3d](http://five3d.mathieu-badimon.com/)更容易做到这一点，无论如何，失真部分，我不确定你会如何匹配一组控制点。

# android - Android：调试本机代码时出现 Eclipse gdb 错误

> ID：10017863
> 
> 赞同：2
> 
> 时间：2012-04-04T19:21:21.847
> 
> 标签：android, eclipse, debugging, gdb

我遵循了一些在线教程，尝试设置 gdb 来调试本机代码：

1.  《Android NDK 初学者指南》一书的第 11 章。
2.  视频：[http ://www.youtube.com/watch?v=hMV7Xqcn39k&list=PLD89B891EF9D26F14&feature=mh_lolz](http://www.youtube.com/watch?v=hMV7Xqcn39k&list=PLD89B891EF9D26F14&feature=mh_lolz)
3.  论坛：[http ://wiki.eclipse.org/Sequoyah/ndk_guide](http://wiki.eclipse.org/Sequoyah/ndk_guide)

他们都没有让我的调试器完全工作。

我现在通过以下步骤遇到了一个特定问题，以上所有教程都同意这些步骤是调试本机代码的正确步骤：

1.  在 Eclipse 中，启动我的 JAVA 调试会话并在我的 onCreate() 方法中的第一个断点处停止。
2.  在终端中，在我的项目文件夹下，运行 ndk-build-eclipse（原始 ndk-gdb 的副本，没有关于自动连接 gdb 客户端到服务器的最后一行），没有明显的警告或错误。
3.  在终端中， chmod +x MY_PROJECT/obj/local/armeabi/app_process （我在 Mac 上），否则我会得到“无法运行 MY_PROJECT/obj/local/armeabi/app_process，原因不明”错误。这个 app_process 在我的 C++ 调试配置中设置为 GDB 调试器。
4.  在 Eclipse 中，启动我的 C++ 调试配置。

然后我得到一个错误对话框说：

```
Error creating session
 Process Terminated
    Process Terminated
    Process Terminated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T19:32:01.747

（由 OP 在问题编辑中解决。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 自己解决了这个问题：
> 
> 我在我的 C++ 调试配置中放置了错误的 gdb 调试器（在调试器选项卡下）。
> 
> *   那个应该在那里（NDK r7b）： `$NDKROOT/toolchains/$ARCH/prebuilt//bin/arm-linux-androideabi-gdb`
> *   我错误地放在那里的那个： `${PROJECT_DIR}/obj/local/armeabi/app_process`，它应该只放在 Main 选项卡下的 C/C++ Application 中。
> 
> 解决这个问题解决了我的问题，现在我可以在 Eclipse 中使用 gdb 调试本机代码了！！

# css - 在不向下移动的情况下从我的 div 顶部精确地取出 29px？

> ID：10017866
> 
> 赞同：0
> 
> 时间：2012-04-04T19:21:24.430
> 
> 标签：css, html, web

我有一个由 4 个 div 组成的网站布局。

```
<div class="global">
<div class="content">
</div>
<div class="top">
</div>
<div class="footer">
</div>
</div> 
```

应用了以下样式

```
div.top{
position:fixed;
top:0px;
width:100%;
height:28px;
background-color:rgb(55,55,55);
border-bottom:1px solid black;
} 
```

应用了以下样式

```
div.footer{
position:fixed;
float:right;
bottom:0px;
left:87.5%;
border:1px solid:black;
border-bottom:0;
} 
```

有这个

```
div.content{
position:absolute;
bottom:0;
top:28px;
width:100%;
background:transparent;
margin:auto;
padding:0;
} 
```

我遇到的问题是内容 div，我希望它直接从顶部下方开始并继续沿着页面的其余部分向下，但是它在页面底部的位置恰好超出了我设置顶部位置的多少 px . 现在，由于我使用 px 作为顶部的大小，我无法应用百分位数，那么仅使用 css 执行此操作的最佳方法是什么。

我需要这个的网站是[http://www.andysinventions.info/test/](http://www.andysinventions.info/test/)问题可以在标有“论坛”的标签上看到

tl;博士我怎样才能阻止我的 div 越过页面边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:28:36.747

instead of absolute position and top, try margin-top:28px:

```
div.content{
    bottom:0;
    width:100%;
    background:transparent;
    margin: 28px auto 0 auto;
    padding:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:57:28.133

安德鲁，

在查看了答案（大部分是正确的）和您的网站后 - 我注意到您正在使用 iframe。在 2012 年，iframe 作为设计功能已成为过去，仅用作第三方添加物，如异地小部件和提要（或沙盒）。

您需要为您的目标构建这样的页面：

```
<!doctype html>
<html>
  <head>
    <title>A title</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <ul id="menu">
      <!-- menu content here -->
    </ul>
    <!-- Actual page content here -->
  </body>
</html> 
```

在 style.css 中有这些规则：

```
body { margin: 28px 0 0; }

ul#menu {
  position: absolute;
  top: 0;
  left: 0;
  } 
```

这应该可以使用现代技术实现您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:30:42.140

发生这种情况是因为您使用的是**top:28px;** 向下移动顶部栏。相反，您应该使用**margin-top:28px;** 并取出绝对定位。

```
div.content{
    width:100%;
    background:transparent;
    margin:28px auto 0 auto;
    padding:0;
} 
```

# ms-access - 如何使用更新查询进行循环 - Access

> ID：10017867
> 
> 赞同：2
> 
> 时间：2012-04-04T19:21:40.257
> 
> 标签：ms-access, vba

如果条件与 DataSelect 表匹配，我正在尝试执行一个循环，该循环将使用表 DataSelect 中的源代码更新表 Cleaned。标准的示例就像年份在 2012 年和 2011 年之间，频道就像*TM*和 MRC 介于 5 和 10 之间。我创建 DataSelect 来保存所有不同类型的标准，我希望程序循环遍历每个分配的标准清理了源代码。到目前为止，我总是收到“参数太少。预期 1。运行时错误 3061。” 任何帮助将不胜感激。

谢谢，尼基

```
Private Sub doDataSegm_Click()

Dim db As DAO.Database
Dim rs As DAO.Recordset
Dim strSQL, strSearch, strReplace As String

Set db = CurrentDb()
Set rs = db.OpenRecordset("dataselect", dbOpenTable)

If rs.RecordCount = 0 Then Exit Sub
rs.MoveFirst

    For i = 1 To rs.RecordCount
    strChan = rs("Chan")
    strDataCode = rs("code")
    strMrcYrLow = rs("mrcyr_low")
    strMrcYrhigh = rs("mrcyr_high")
    strMrcLow = rs("mrc_low")
    strMrchigh = rs("mrc_high")
    strSQL = "UPDATE Cleaned SET [cleaned].[datacode]= " & _
              strDataCode & " where [CLEANED].[CHANNEL] Like '" & strChan & _
             "' AND [CLEANED].[MRC_YEAR] Between '" & strMrcYrLow & _
             "' And '" & strMrcYrhigh & "' AND CLEANED.MRC Between " & _
              strMrcLow & " And " & strMrchigh & ";"

    db.Execute strSQL, dbFailOnError
    rs.MoveNext
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:33:18.417

类似“参数太少。预期 1。运行时错误 3061”之类的消息。通常表示您的查询包含未引用的数据值，Access 将其解释为字段名称。由于您的查询中唯一未加引号的标识符是`datacode`and `MRC`，因此您似乎需要引用其中一个：

```
UPDATE Cleaned SET [Cleaned].[datacode] = '" & strDataCode & "' ...
                                          ^ ...add quotes...  ^ 
```

# eclipse - 来自神器的 Eclipse、Tomcat、m2e 和 War Overlay

> ID：10017871
> 
> 赞同：1
> 
> 时间：2012-04-04T19:22:03.620
> 
> 标签：eclipse, tomcat, maven-3, m2e

我认为这是在 Tomcat 中转向自动发布所引发的变化？但基本上，看起来当我在 eclipse 中有一个使用战争覆盖的项目时，资源是从本地父项目复制的，而不是那个父母的战争档案。父项目中正在进行大量构建，并且拉入文件将不起作用，我需要将子项目建立在父项目战争文件的基础上。关于如何做到这一点的想法？

*编辑——更多细节。

覆盖有效，并在 POM 中指定为：

```
 <dependency>
   <groupId>org.parentproject</groupId>
   <artifactId>parentproject-web</artifactId>
   <version>2.0-SNAPSHOT</version>
   <type>war</type>
</dependency> 
```

这导致以下 org.eclipse.wst.common.component

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
<wb-module deploy-name="eurekastreams-web-ym2">
    <wb-resource deploy-path="/" source-path="/target/m2e-wtp/web-resources"/>
    <wb-resource deploy-path="/" source-path="/src/main/webapp" tag="defaultRootSource"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/resources"/>
    <dependent-module deploy-path="/" handle="module:/overlay/prj/parentproject-web?includes=**/**&amp;excludes=META-INF/MANIFEST.MF">
        <dependency-type>consumes</dependency-type>
    </dependent-module>
    <dependent-module deploy-path="/" handle="module:/overlay/slf/?includes=**/**&amp;excludes=META-INF/MANIFEST.MF">
        <dependency-type>consumes</dependency-type>
    </dependent-module>
    <property name="context-root" value="parentproject-web-childproject"/>
    <property name="java-output-path" value="/parentproject-web-childproject/target/classes"/>
</wb-module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:09:00.177

您需要安装[m2e-wtp 扩展](http://planet.jboss.org/view/post.seam?post=m2e_clipse_wtp_0_15_0_new_noteworthy)来处理 WAR 覆盖。然后，您将覆盖项目声明为依赖项，并且还应该将其包含在您的 Eclipse 工作区中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:19:06.983

似乎答案是将目标文件夹添加到部署程序集：

```
<wb-resource deploy-path="/" source-path="/target/ROOT"/> 
```

其中 ROOT 是目标构建文件夹，其中包含 maven 战争覆盖的结果-

# sql - 在 VBScript 中使用输出参数调用 SQL 存储过程

> ID：10017872
> 
> 赞同：7
> 
> 时间：2012-04-04T19:22:14.793
> 
> 标签：sql, asp-classic, vbscript, adodb

我编写了一个 VBScript 函数来调用存储过程。过去，我编写了许多使用输入参数调用存储过程的函数，但在这种情况下，我需要使用输出参数。

在另一个应用程序中，我使用实体框架调用完全相同的存储过程，因此存储过程很好。

这是我的代码：

> ```
> Function checkAccess(userid,link)
>     isAllowed = false
> 
>     set cmd = Server.CreateObject("ADODB.Command")
>     cmd.CommandText = "Check_Permission"
>     cmd.ActiveConnection = Conn
>     cmd.NamedParameters = true
>     cmd.CommandType = adCmdStoredProc
>     cmd.Parameters.Append(cmd.CreateParameter("@Login", adVarChar, adParamInput, 50, userId))
>     cmd.Parameters.Append(cmd.CreateParameter("@LinkId", adInteger, adParamInput, 50, link))    
>     cmd.Parameters.Append(cmd.CreateParameter("@IsAllowed", adBoolean, adParamOutput, 10, isAllowed))
> 
>     checkAccess = isAllowed
> End Function 
> ```

此函数始终返回 false。我如何使它工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T19:26:40.050

You should return the value of your output parameter:

```
checkAccess = cmd.Parameters("@IsAllowed").Value 
```

Also, output parameters in ADO don't require an initial value and adBoolean parameters don't require a size, so you could change your the last paramter to:

```
cmd.Parameters.Append(cmd.CreateParameter("@IsAllowed", adBoolean, adParamOutput)) 
```

You could also get rid of your isAllowed variable since it is no longer necessary.

# android - 记事本/留下评论小部件

> ID：10017873
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:22:19.183
> 
> 标签：android

我正在寻找可以使用的小部件。之后是当用户点击我的选项卡按钮时，一个活动开始，这个活动是让用户留下评论或提示那里正在寻找的东西。我希望用户有 100 个字的限制。有什么可以用来做这件事的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:34:55.083

为什么不使用修改后的带有提交和取消按钮的 AlertDialog 类？

[警报对话框如何](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)

# java - 如何动态添加新的自定义按钮？

> ID：10017875
> 
> 赞同：0
> 
> 时间：2012-04-04T19:22:23.520
> 
> 标签：java, swing

我试图让我的界面在单击按钮时动态生成自定义按钮。我搜索了几个这样的答案，但不知何故它不起作用。我下面的当前代码有什么错误吗？

```
 public class MainWindow {

private JFrame frame;
private JPanel panel;
private JPanel panel_1;
private JPanel panel_2;
private JSplitPane splitPane;
private JButton btnSearch;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainWindow window = new MainWindow();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public MainWindow() {
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {
    frame = new JFrame();
    frame.setBounds(100, 100, 645, 438);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    panel = new JPanel();
    frame.getContentPane().add(panel, BorderLayout.CENTER);
    panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));

    splitPane = new JSplitPane();
    panel.add(splitPane);

    panel_1 = new JPanel();
    splitPane.setLeftComponent(panel_1);

    btnSearch = new JButton("Search");

    GridBagConstraints gbc_btnSearch = new GridBagConstraints();
    gbc_btnSearch.gridx = 0;
    gbc_btnSearch.gridy = 10;
    panel_1.add(btnSearch, gbc_btnSearch);

    panel_2 = new JPanel();
    splitPane.setRightComponent(panel_2);

    btnSearch.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            addButton();
        }
    });
}
protected void addButton() {
    MyButton hahaButton = new MyButton("haha");
    panel_2.add(hahaButton);
    panel_2.add(new JButton());
    panel_2.revalidate();
    panel_2.repaint();
} 
```

这是 MyButton 的定义：

```
 public class MyButton extends JButton {

private static final long serialVersionUID = 1L;

private Color circleColor = Color.BLACK;

public MyButton(String label) {
    super(label);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    Dimension originalSize = super.getPreferredSize();
    int gap = (int) (originalSize.height * 0.2);
    int x = originalSize.width + gap;
    int y = gap;
    int diameter = originalSize.height - (gap * 2);

    g.setColor(circleColor);
    g.fillOval(x, y, diameter, diameter);
}

@Override
public Dimension getPreferredSize() {
    Dimension size = super.getPreferredSize();
    size.width += size.height;
    return size;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:43:46.470

我刚刚尝试了您的源代码，它按预期工作：每次单击拆分窗格左侧的搜索按钮时，面板右侧的面板中都会添加 2 个按钮（一个带有黑色实心圆圈和没有标签的按钮）。

什么不适合你？我在 Mac OSX 上使用 java 1.6，但这也应该适用于其他平台上的早期版本......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:25:20.697

正如 Dieter Rehbein 指出的那样，您拥有的代码确实可以编译和运行。

但是，它相当草率和令人费解，就好像您将不同的来源复制并粘贴在一起一样。

我花了几分钟清理了一些，希望对您有所帮助。

```
    公共类主窗口
    {
        公共静态无效主要（字符串[] args）
        {
            新的主窗口（）；
        }

        公共主窗口（）
        {
            // 创建分割窗格
            JSplitPane jSplitPane = new JSplitPane();

            最后的 JPanel leftPanel = new JPanel();
            最后的 JPanel rightPanel = new JPanel();

            jSplitPane.setLeftComponent(leftPanel);
            jSplitPane.setRightComponent(rightPanel);

            // 创建按钮
            JButton jButton = new JButton("生成");
            leftPanel.add(jButton);

            jButton.addMouseListener(new MouseAdapter()
            {
                @覆盖
                公共无效鼠标点击（鼠标事件e）
                {
                    添加按钮（右面板）；
                }
            });

            // 创建面板
            JPanel jPanel = 新 JPanel();

            jPanel.setLayout(new BoxLayout(jPanel, BoxLayout.X_AXIS));
            jPanel.add(jSplitPane);

            // 创建框架
            JFrame jFrame = new JFrame();

            jFrame.setBounds( 100 , 100 , 645 , 438 );
            jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            jFrame.getContentPane().add(jPanel, BorderLayout.CENTER);

            // 显示框架
            jFrame.setVisible(真);
        }

        私人无效添加按钮（JPanel jPanel）
        {
            addButton( jPanel , "默认" , null );
            addButton( jPanel , "红色" , Color.RED );
            addButton( jPanel , "黄色" , Color.YELLOW );
            addButton( jPanel , "蓝色" , Color.BLUE );
            addButton( jPanel , "绿色" , Color.GREEN );
        }

        protected void addButton（JPanel jPanel，字符串标签，颜色颜色）
        {
            jPanel.add(new MyButton(标签,颜色));
            jPanel.revalidate();
            jPanel.repaint();
        }

        公共类 MyButton 扩展了 JButton
        {
            私有静态最终长序列版本UID = 1L；

            私人颜色颜色=空；

            public MyButton（字符串标签，颜色颜色）
            {
                超级（标签）；
                this.color = 颜色;
            }

            @覆盖
            受保护的无效paintComponent（图形图形）
            {
                super.paintComponent( 图形 );

                如果（颜色！= null）
                {
                    维度维度 = super.getPreferredSize();

                    整数间隙=（整数）（尺寸.高度* 0.2）；
                    int 直径 = 尺寸. 高度 - ( 间隙 * 2 );

                    graphics.setColor( 颜色 );
                    graphics.fillOval（尺寸。宽度+间隙，间隙，直径，直径）；
                }
            }

            @覆盖
            公共维度 getPreferredSize()
            {
                维度大小 = super.getPreferredSize();
                尺寸.宽度 += 尺寸.高度；
                返回大小；
            }
        }
    }

```

# python - 当 edgecolor = 'none' 时 Matplotlib 标记消失

> ID：10017876
> 
> 赞同：23
> 
> 时间：2012-04-04T19:22:32.303
> 
> 标签：python, matplotlib, python-2.7, markers

我正在尝试制作一些 PCA 数据的散点图。我做了一些非常典型的代码：

```
plt.plot(pca[:,0], pca[:,1], '.',ms=3,  markerfacecolor = self.colors[k],
            markeredgecolor = 'none') 
```

我希望它只显示没有轮廓的标记面颜色。问题是当 markeredgecolor = 'none' 时标记完全消失。当我将 markerfacecolor='none' 或设置为一种颜色并删除 markeredgecolor 时，它会像预期的那样工作。

我刚刚将 matplotlib、numpy 等更新到最新版本，在 Python 2.7 上运行。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-05T02:20:20.143

我认为这是几个月前修复的错误：[https ://github.com/matplotlib/matplotlib/pull/598](https://github.com/matplotlib/matplotlib/pull/598)

无论您制作的标记有多大，或者如果您使用`marker='o'`而不是`'.'`，如果您使用`markeredgecolor='none'`.

作为一种解决方法，您可以将边缘颜色设置为与面颜色相同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T13:01:47.230

在 matplotlib 1.1

```
>> plt.plot(pca[:,0], pca[:,1], '.', ms=3, markerfacecolor=self.colors[k],
...          markeredgecolor=None) 
```

有效（注意`None`markeredgecolor的而不是'none'）。

设置`markeredgewidth=0.0`或`markeredgecolor=self.colors[k]`（如乔金顿所建议的）也应该起作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-16T11:54:04.260

尝试这个：

```
x = np.array(np.random.rand(10))
y = np.array(np.random.rand(10))
c = np.arange(len(x))
plt.scatter(x,y, c=c, s=500, cmap = plt.cm.Paired, alpha = 0.5,linewidths=0) 
```

或者，这也是一个不错的选择：

```
plt.scatter(x,y, c=c, s=500, cmap = plt.cm.Paired, alpha = 0.5,edgecolor='face') 
```

# python - 如何覆盖异步 NDB 方法并编写自己的 tasklet

> ID：10017880
> 
> 赞同：2
> 
> 时间：2012-04-04T19:22:45.137
> 
> 标签：python, google-app-engine

我正在尝试掌握 NDB 引入的异步操作，我想使用`@ndb.tasklet`来异步我的一些工作。

简单的例子是在被覆盖的 string_id 生成`get_or_insert_async`

这是做事的正确方法吗？这里有什么可以改进的？

```
@classmethod
@ndb.tasklet
def get_or_insert_async(cls, *args):
    id = cls.make_string_id(*args) 
    model = yield super(MyModel, cls).get_or_insert_async(id)
    raise ndb.Return(model) 
```

另一个例子是以扇出的方式在循环中做事。这个对吗？

```
@classmethod
@ndb.tasklet
def do_stuff(cls, some_collection):

    @ndb.tasklet
    def internal_tasklet(data):
        do_some_long_taking_stuff(data)
        id = make_stuff_needed_for_id(data)
        model = yield cls.get_or_insert_async(id)
        model.long_processing(data)
        yield model.put_async()
        raise ndb.Return(None)

    for data in some_collection:
        # will it parallelise internal_tasklet execution? 
        yield internal_tasklet(data)

    raise ndb.Return(None) 
```

编辑：

正如对整个概念的理解，`yields`这里提供一个`Future`对象，然后并行收集（在可能的情况下）并异步执行。我对么？

在尼克的提示之后（这是你的意思吗？）：

```
@classmethod
@ndb.tasklet
def do_stuff(cls, some_collection):

    @ndb.tasklet
    def internal_tasklet(data):
        do_some_long_taking_stuff(data)
        id = make_stuff_needed_for_id(data)
        model = yield cls.get_or_insert_async(id)
        model.long_processing(data)
        raise ndb.Return(model)                # change here

    models = []
    for data in some_collection:
        # will it parallelise internal_tasklet execution? 
        m = yield internal_tasklet(data)       # change here
        models.appedn(m)                       # change here

    keys = yield ndb.put_multi_async(models)   # change here
    raise ndb.Return(keys)                     # change here 
```

编辑：

新修订版……</p>

```
@classmethod
@ndb.tasklet
def do_stuff(cls, some_collection):

    @ndb.tasklet
    def internal_tasklet(data):
        do_some_long_taking_stuff(data)
        id = make_stuff_needed_for_id(data)
        model = yield cls.get_or_insert_async(id)
        model.long_processing(data)
        raise ndb.Return(model)                

    futures = []
    for data in some_collection:
        # tasklets won't run in parallel but while 
        # one is waiting on a yield (and RPC underneath)  
        # the other will advance it's execution 
        # up to a next yield or return
        fut = internal_tasklet(data))          # change here
        futures.append(fut)                    # change here

    Future.wait_all(futures)                   # change here

    models = [fut.get_result() for fut in futures]
    keys = yield ndb.put_multi_async(models)   # change here
    raise ndb.Return(keys)                     # change here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T04:24:49.093

如果您只想使用不同的参数调用异步操作，则不需要使用 tasklet - 只需返回包装函数的返回值，如下所示：

```
def get_or_insert_async(cls, *args):
  id = cls.make_string_id(*args)
  return super(MyModel, cls).get_or_insert_async(id) 
```

不过，出于以下几个原因，我会对此保持谨慎：您正在更改内置函数的含义，这通常是一个坏主意，您正在更改签名（位置参数但没有关键字参数），并且您不会将额外的参数传递给原始函数。

对于你的第二个例子，一次让出一个东西将迫使 NDB 等待它们的完成——“yield”是“wait”的同义词。相反，为集合中的每个元素执行 tasklet 函数，然后同时等待它们（通过调用列表上的 yield）。

# git - 为什么即使在 `git checkout --` 之后 Git 仍坚持认为文件已被修改？

> ID：10017885
> 
> 赞同：4
> 
> 时间：2012-04-04T19:23:14.497
> 
> 标签：git, line-endings

我在本地对几个文件进行了更改，*但没有提交它们*。`git status`显示：

```
>> git status
# On branch feature-ravendb
# Your branch is ahead of 'origin/feature-ravendb' by 1 commit.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   source/Octopus.Tentacle/Integration/PowerShell/IPowerShell.cs
#       modified:   source/Octopus.Tentacle/Integration/PowerShell/PowerShellRunner.cs
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

我想放弃对这些文件的更改。我尝试按照说明进行操作：

```
>> git checkout -- .\source\Octopus.Tentacle\Integration\PowerShell\IPowerShell.cs 
```

该命令没有输出。现在我`git status`再次运行：

```
>> git status
# On branch feature-ravendb
# Your branch is ahead of 'origin/feature-ravendb' by 1 commit.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   source/Octopus.Tentacle/Integration/PowerShell/IPowerShell.cs
#       modified:   source/Octopus.Tentacle/Integration/PowerShell/PowerShellRunner.c
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

嗯，很确定文件已更改。并且`git diff <file>`似乎认为整个文件已经改变，即使它没有：

```
diff --git a/source/Octopus.Tentacle/Integration/PowerShell/IPowerShell.cs b/source/Octo
--- a/source/Octopus.Tentacle/Integration/PowerShell/IPowerShell.cs
+++ b/source/Octopus.Tentacle/Integration/PowerShell/IPowerShell.cs
@@ -1,9 +1,9 @@
-<EF><BB><BF>using System;
-
-namespace Octopus.Tentacle.Integration.PowerShell
-{
-    public interface IPowerShell
-    {
-        PowerShellExecutionResult Execute(PowerShellArguments arguments);
-    }
+<EF><BB><BF>using System;
+
+namespace Octopus.Tentacle.Integration.PowerShell
+{
+    public interface IPowerShell
+    {
+        PowerShellExecutionResult Execute(PowerShellArguments arguments);
+    }
 }
\ No newline at end of file 
```

我如何说服 git 我真的，真的没有更改文件并且不想提交它？

**编辑**：以下命令对这些修改也**没有影响：**

*   `git checkout -- .`
*   `git checkout -f`
*   `git reset --soft`
*   `git reset --hard`

**编辑 2**：恢复到旧版本，存储我的更改，然后清除存储最终工作。似乎我的行尾有冲突，但我不知道为什么：

*   我已经`core.autocrlf`设置为真
*   我有一个`.gitattributes`文件与该行`*.cs text`

这还不够吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:51:30.660

我有一个 core.autocrlf 是 false，但最近更改为 true，并且还为 .net 应用了 gitattributes 更改。之后，在很多仓库中，当你尝试拉取时，我开始收到关于不存在的更改的报告，并且也无法回滚。最后，我回到 core.autocrlf is false

# html - 如何在悬停时为元素设置动画

> ID：10017893
> 
> 赞同：9
> 
> 时间：2012-04-04T19:23:36.917
> 
> 标签：html, css, css-transitions

`<div>`将鼠标悬停在上方时，如何使元素增长（并且内容将文本大小更改为更大）？我把它们放在一个班级里，然后尝试：

```
size: 150%; 
```

和

```
height: +30px;
width: +30px; 
```

第一次尝试根本不起作用，第二个代码只是使 div 的闪烁和部分消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T19:52:03.007

CSS3 解决方案：

```
div {
    background: #999;
    width: 200px;
    height: 20px; 
    transition: width 1s;
}

div:hover{
    width: 300px;
}
```

```
<div>
    <p>Im content</p>
</div>
```

[http://jsfiddle.net/MrdvW/](http://jsfiddle.net/MrdvW/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:16:59.037

我为类似的问题做了类似的事情（您可以将比例更改为适合您的任何内容）：

```
div:hover {
 -webkit-transform: scale(1.1);
 -moz-transform:    scale(1.1);
 -o-transform:      scale(1.1);
 -ms-transform:     scale(1.1);
} 
```

请注意，这将缩放 div 及其内容，我认为这是您想要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T19:27:47.397

使用 CSS，您可以向 div 添加悬停样式：

```
div.container {
    width: 80%;
    background-color: blue;
}

div.container:hover {
    width: 100%;
    background-color: red;
} 
```

请参阅此[jsFiddle](http://jsfiddle.net/r7bTW/1/)进行演示。

**jQuery 解决方案**

另一个可能对您有用的选项是[jQuery](http://docs.jquery.com/Downloading_jQuery)。它是一个 JavaScript 库，可简化诸如此类的常用功能。使用 jQuery，您可以轻松地为元素添加悬停效果：

```
//hover effect applies to any elements using the 'container' class
$(".container").hover(
    function(){ //mouse over
        $(this).width($(this).width() + 30);
    },
    function(){ //mouse out
        $(this).width($(this).width() - 30);
    }
); 
```

请参阅此[jsFiddle](http://jsfiddle.net/Ryq44/1/)进行演示。

# ruby-on-rails - 到活动管理员的一般路由 - Rails 3.1

> ID：10017899
> 
> 赞同：3
> 
> 时间：2012-04-04T19:23:59.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, activeadmin

我目前正在尝试将 Active Admin Gem 与已配置有设计的现有 Rails 3.1 应用程序一起使用。此应用程序使用在应用程序控制器中声明的 after_sign_in_path_for 方法。

我按照那里解释的步骤[https://github.com/gregbell/active_admin](https://github.com/gregbell/active_admin)，问题是当我尝试访问 0.0.0.0:3000/admin 或 localist:3000/admin 时，我被直接重定向到我的主路径。

这是我的 route.rb 文件，

```
Fish::Application.routes.draw do

  devise_for :admin_users, ActiveAdmin::Devise.config

  ActiveAdmin.routes(self)

  get "goodnewslikes/create"

  get "goodnewslikes/destroy"

  resources :goodnews

  match "goodnews/share/:id" => "Goodnews#share", :as => "share_goodnews"

  match "churches/:id/changepicture" => "Churches#changepicture", :as => "change_picture_church"

  resources :churches

  match "home" => "Application#home", :as => "home"    

  match "currenthome" => "Application#currenthome", :as => "currenthome"

  match "globalsearch" => "Application#globalsearch", :as => "globalsearch"

  match "create_commentlike/:comment_id" => "Commentlikes#create", :as => "create_commentlike"

  resources :commentlikes, :only => [:destroy]

  match "create_postlike/:post_id" => "Postlikes#create", :as => "create_postlike"

  resources :postlikes, :only => [:destroy]

  match "create_goodnewslike/:goodnews_id" => "Goodnewslikes#create", :as => "create_goodnewslike"

  resources :goodnewslikes, :only => [:destroy]

  match "create_notifiations/:type/:user_id/:content_id" => "Notifications#create", :as => "create_notification"

  match "notifications/updateList" => "Notifications#updateList"

  resources :notifications, :except => [:edit, :create]

  resources :comments, :except => [:new]

  match "posts/:id/loadpic" => "Posts#loadpic", :as => "load_post_pic"

  match "comments/new/:post_id" => "Comments#new", :as => "new_comment"

  resources :friendships

  get "friendships/:id/accept" => "Friendships#accept", :as => "accept_friendship"

  get "friendships/:id/block" => "Friendships#block", :as => "block_friendship"

 get "users/searching" => "Users#searching", :as => "searching_users"
  resources :users, :only => [:index, :show] do
    match "profils/nouveau" => "Profils#new", :as => "new_profil"
    match "profils/:id/modifier" => "Profils#edit", :as => "edit_profil"
    resources :profils
  end

match "users/search" => "Users#search", :as => "search_users"

  match "posts_of/:user_id" => "Posts#index", :as => "posts_of"

  resources :posts

  devise_for :users, :path_prefix => "d"

  root :to => "Application#home"

  match "*path" => 'application#handle_404'
  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id(.:format)))'
end 
```

任何的想法 ？我不知道“ActiveAdmin.routes(self)”中有什么，所以这就是我发布的原因......

谢谢 ：-）

这是我的耙子路线

```
 new_admin_user_session GET        /admin/login(.:format)                                    {:action=>"new", :controller=>"active_admin/devise/sessions"}
        admin_user_session POST       /admin/login(.:format)                                    {:action=>"create", :controller=>"active_admin/devise/sessions"}
destroy_admin_user_session DELETE|GET /admin/logout(.:format)                                   {:action=>"destroy", :controller=>"active_admin/devise/sessions"}
       admin_user_password POST       /admin/password(.:format)                                 {:action=>"create", :controller=>"active_admin/devise/passwords"}
   new_admin_user_password GET        /admin/password/new(.:format)                             {:action=>"new", :controller=>"active_admin/devise/passwords"}
  edit_admin_user_password GET        /admin/password/edit(.:format)                            {:action=>"edit", :controller=>"active_admin/devise/passwords"}
                           PUT        /admin/password(.:format)                                 {:action=>"update", :controller=>"active_admin/devise/passwords"}
           admin_dashboard            /admin(.:format)                                          {:action=>"index", :controller=>"admin/dashboard"}
         admin_admin_users GET        /admin/admin_users(.:format)                              {:action=>"index", :controller=>"admin/admin_users"}
                           POST       /admin/admin_users(.:format)                              {:action=>"create", :controller=>"admin/admin_users"}
      new_admin_admin_user GET        /admin/admin_users/new(.:format)                          {:action=>"new", :controller=>"admin/admin_users"}
     edit_admin_admin_user GET        /admin/admin_users/:id/edit(.:format)                     {:action=>"edit", :controller=>"admin/admin_users"}
          admin_admin_user GET        /admin/admin_users/:id(.:format)                          {:action=>"show", :controller=>"admin/admin_users"}
                           PUT        /admin/admin_users/:id(.:format)                          {:action=>"update", :controller=>"admin/admin_users"}
                           DELETE     /admin/admin_users/:id(.:format)                          {:action=>"destroy", :controller=>"admin/admin_users"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-19T08:32:24.897

因为您已经配置了设备。所以你必须从设计中“排除”活动的管理路径。

您的路径`localhost:3000/admin`由您登录的设备检查，如果没有，它会将您重定向到您的主页。

将此行添加到您的`app->config->initializers->active_admin.rb`文件中：

```
config.skip_before_filter :authenticate_user! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T07:14:40.320

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 实际上问题是我为设计设置了一个 after sign_in 路径，我必须修改它以防我们登录到管理面板。为此，我刚刚添加了一个测试，并在登录到 admin_panel 时使用了关键字“super”来保持 super after_sign_in_path 方法的清洁。这是在此评论中提出的：[https ://github.com/gregbell/active_admin/issues/1133#issuecomment-4967768](https://github.com/gregbell/active_admin/issues/1133#issuecomment-4967768)

〜回答[大卫法布雷盖特](https://stackoverflow.com/users/1147333/david-fabreguette)

# repository - 在服务 bean 上使用 @Transactional 注释时，Spring 数据存储库 @Autowiring 为空

> ID：10017904
> 
> 赞同：6
> 
> 时间：2012-04-04T19:24:20.440
> 
> 标签：repository, nullpointerexception, autowired, transactional, spring-data

我正在研究 spring 框架并尝试在我的项目中使用它。但是我在服务中使用的 spring 数据存储库和 @Transactional 注释遇到了以下问题。问题是春季启动没有例外。稍后当我尝试访问 spring 数据存储库时，我得到 NullPointerException。也许你有一些想法可以帮助我。

我正在使用 spring 数据存储库定义如下：

```
package net.question.data.repository;

import net.question.model.User;
import org.springframework.data.jpa.repository.JpaRepository;

public interface UserRepository extends JpaRepository<User, Long> {  
} 
```

然后我定义了一个包含自动装配存储库的服务：

```
package net.question.data.service;

import net.question.data.repository.UserRepository;
import net.question.model.User;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@Transactional
public class UserService {
    @Autowired
    public UserRepository userRepository;

    public void doStuff(User usr) {
            // login will be here
    }
} 
```

这是显示我的问题的测试：

```
package net.question.spring;

import static org.junit.Assert.assertNotNull;
import net.question.data.service.UserService;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/app-context.xml")
public class InjectionTestSuite {

    @Autowired
    UserService userService;

    @Test
    public void testRepositoryInjection() {
            assertNotNull(userService);
            assertNotNull(userService.userRepository);
    }
} 
```

测试在以下行失败：

```
assertNotNull(userService.userRepository); 
```

如果我删除服务上的 @Transactional 注释，则测试通过。

这是我的 app-context.xml 文件：

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:jpa="http://www.springframework.org/schema/data/jpa"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/data/jpa
    http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd ">

    <jpa:repositories base-package="net.question.data.repository" />

    <!-- For discovering entity services -->
    <context:component-scan base-package="net.question.data.service" />

    <bean id="entityManagerFactory"
            class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="persistenceUnitName" value="hibernate_mysql" />
    </bean>

    <bean id="transactionManager"     class="org.springframework.orm.jpa.JpaTransactionManager">
            <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven />
</beans> 
```

也许你有一些想法，如何找到错误？

# ruby-on-rails - 分隔目录中的 Rails 邮件程序视图

> ID：10017907
> 
> 赞同：27
> 
> 时间：2012-04-04T19:24:41.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个小的组织问题，在我的应用程序中我有 3 个邮件程序 User_mailer、prduct_mailer、some_other_mailer 并且他们都将他们的视图存储在 app/views/user_mailer ...

我希望在 /app/views/ 中有一个名为 mailers 的子目录，并将所有内容放在 user_mailer、product_mailer 和 some_other_mailer 文件夹中。

谢谢，

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-04-22T18:27:34.003

你真的应该用你的默认值创建一个`ApplicationMailer`类，并从你的邮件中继承：

```
# app/mailers/application_mailer.rb
class ApplicationMailer < ActionMailer::Base
  append_view_path Rails.root.join('app', 'views', 'mailers')
  default from: "Whatever HQ <hq@whatever.com>"
end

# app/mailers/user_mailer.rb
class UserMailer < ApplicationMailer
  def say_hi(user)
    # ...
  end
end

# app/views/mailers/user_mailer/say_hi.html.erb
<b>Hi @user.name!</b> 
```

这个可爱的模式使用与控制器相同的继承方案（例如`ApplicationController < ActionController::Base`）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-09-02T18:32:55.440

我非常同意这个组织策略！

从大雄的例子中，我通过以下方式实现了它：

```
class UserMailer < ActionMailer::Base
  default :from => "whatever@whatever.com"
  default :template_path => '**your_path**'

  def whatever_email(user)
    @user = user
    @url  = "http://whatever.com"
    mail(:to => user.email,
         :subject => "Welcome to Whatever",
         )
  end
end 
```

它是特定于 Mailer 的，但还不错！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-05T04:39:56.897

我在 3.1 中有一些运气

```
class UserMailer < ActionMailer::Base
  ...
  append_view_path("#{Rails.root}/app/views/mailers")
  ...
end 
```

在 template_root 和 RAILS_ROOT 上收到弃用警告

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-23T22:28:58.987

如果你碰巧需要一些非常灵活的东西，继承可以帮助你。

```
class ApplicationMailer < ActionMailer::Base

  def self.inherited(subclass)
    subclass.default template_path: "mailers/#{subclass.name.to_s.underscore}"
  end

end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-04T19:41:07.007

您可以将模板放在任何您想要的位置，但您必须在邮件程序中指定它。像这样的东西：

```
class UserMailer < ActionMailer::Base
  default :from => "whatever@whatever.com"

  def whatever_email(user)
    @user = user
    @url  = "http://whatever.com"
    mail(:to => user.email,
         :subject => "Welcome to Whatever",
         :template_path => '**your_path**',
         )
  end
end 
```

查看[2.4 Mailer Views](http://guides.rubyonrails.org/action_mailer_basics.html)了解更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-06T01:05:59.307

### 简单的解决方案：指定路径`ApplicationMailer`

```
class ApplicationMailer < ActionMailer::Base      
  layout 'mailer'
  prepend_view_path "app/views/mailers"  # <---- dump your views here
end 
```

# matlab - matlab / octave中的置换函数

> ID：10017912
> 
> 赞同：2
> 
> 时间：2012-04-04T19:24:52.533
> 
> 标签：matlab, permutation, octave

我有一个工作的 matlab/octave m 文件，但是当我将 M 文件转换为函数并运行它时，函数中出现错误，在第 7 行第 16 列附近未定义“函数名称”。

请参阅下面的 workng M 文件：

```
clear all, clc,clf,tic
fs=360; 
t=linspace(0,2*pi,fs);
y=sinc(t*1);
sigarray=y;

fs=length(sigarray);
aa_sig_combined_L=zeros(1,length(fs)); %need to reset or will get noise at the end
a_L=zeros(1,length(sigarray));

cycle_permute_lt = @(sigarray, k) [sigarray(mod((1:end)+k-1, end)+1 )];
array_phase_shift_div_num=360/mod(180,360) %keep at 360 to get correct deg angles
array_phase_shift=round(fs/array_phase_shift_div_num) %will keep within 360 degs

for ii=0:1:fs
    a_L=cycle_permute_lt(sigarray, ii+array_phase_shift);
    aa_sig_combined_L = aa_sig_combined_L + a_L;        

end;
array_shifted=aa_sig_combined_L;

subplot(2,1,1),plot(t,y),
title('original')
subplot(2,1,2),plot(t,aa_sig_combined_L)
str_title='aa_sig_combined_L'; 
title(str_title,'Interpreter','none') %turns of latex interperter so I can use underscores my way 
```

请参阅下面创建的 M 文件和函数在访问时不起作用

```
clear all, clc,clf,tic
fs=360; 
t=linspace(0,2*pi,fs);
y=sinc(t*1);
sigarray=y; 
[array_shifted]=rtpsa(y,180) 
```

功能如下：

```
function [array_shifted]=rtpsa(sigarray,deg_to_shift)
    fs=length(sigarray)
    aa_sig_combined_L=zeros(1,length(fs)); %need to reset or will get noise at the end
    a_L=zeros(1,length(sigarray));

    cycle_permute_lt = @(sigarray, k) [sigarray(mod((1:end)+k-1, end)+1 )];
    array_phase_shift_div_num=360/mod(deg_to_shift,360) %keep at 360 to get correct deg angles
    array_phase_shift=round(fs/array_phase_shift_div_num) %will keep within 360 degs

    for ii=0:1:fs
        a_L=cycle_permute_lt(sigarray, ii+array_phase_shift);
        aa_sig_combined_L = aa_sig_combined_L + a_L;        

    end;
    array_shifted=aa_sig_combined_L;

end; 
```

我正在使用 octave 版本 3.2.4 和 ubuntu 10.04 linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:01:51.167

这应该是一个答案而不是评论：

这里的问题很可能是文本编辑器中的换行设置，'nix 和 window 的默认值略有不同，一个使用 CR+LF，另一个只使用 LF。但是使用什么是个别应用程序中的偏好问题。

也许是一个有趣的阅读：[wikipedia on newlines](https://en.wikipedia.org/wiki/Newline)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T22:13:11.190

抱歉，我在其他文本编辑器中编辑函数文件时解决了问题，它将 .m 扩展名更改为 .m.txt 文件。

# haskell - Haskell monad：IO [Double] 到 [IO Double]

> ID：10017915
> 
> 赞同：9
> 
> 时间：2012-04-04T19:25:06.937
> 
> 标签：haskell, random, io, monads

考虑以下应该打印出随机数的代码：

```
import System.Random.Mersenne

main =
 do g <- (newMTGen Nothing)
    xs <- (randoms g) :: IO [Double]
    mapM_ print xs 
```

运行时，我收到分段错误错误。这并不奇怪，因为函数“randoms”会产生一个无限列表。假设我只想打印 xs 的前十个值。我怎么能那样做？xs 的类型为 IO [Double]，我想我想要一个 [IO Double] 类型的变量。存在哪些运算符可以在两者之间进行转换。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T02:43:35.570

> 假设我只想打印 xs 的前十个值。我怎么能那样做？

只需使用`take`：

```
main =
 do g <- (newMTGen Nothing)
    xs <- (randoms g) :: IO [Double]
    mapM_ print $ take 10 xs 
```

你写了

> xs 具有类型 IO [双]

但实际上，`randoms g`has type `IO [Double]`，但由于`do`符号，`xs`has type `[Double]`，你可以应用`take 10`它。

您还可以使用以下方法跳过绑定`liftM`：

```
main =
  do g <- newMTGen Nothing
     ys <- liftM (take 10) $ randoms g :: IO [Double]
     mapM_ print ys 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T19:30:14.557

如果您收到分段错误错误，并且您没有使用 FFI 或任何`unsafe`名称中的函数，这在任何情况下*都不足为奇*！这意味着 GHC 存在错误，或者您正在使用的库正在做一些不安全的事情。

打印出无限的`Double`s列表`mapM_ print`非常好；该列表将被增量处理，并且程序应该以恒定的内存使用量运行。我怀疑`System.Random.Mersenne`您正在使用的模块中存在错误，或者它所基于的 C 库存在错误，或者您的计算机存在问题（例如 RAM 故障）。¹注意[`newMTGen`](http://hackage.haskell.org/packages/archive/mersenne-random/latest/doc/html/System-Random-Mersenne.html#v:newMTGen)附带此警告：

> 由于当前的 SFMT 库非常不纯，目前每个程序只允许使用一个生成器。尝试重新初始化它会失败。

[使用提供的全局`MTGen`](http://hackage.haskell.org/packages/archive/mersenne-random/latest/doc/html/System-Random-Mersenne.html#v:getStdRandom)变量可能会更好。

也就是说，您不能以这种方式转换`IO [Double]`为`[IO Double]`；如果不执行`IO`操作，则无法知道结果列表将持续多长时间，这是不可能的，因为您有一个纯结果（尽管恰好包含`IO`操作）。对于无限列表，您可以编写：

```
desequence :: IO [a] -> [IO a]
desequence = desequence' 0
  where
    desequence n m = fmap (!! n) m : desequence (n+1) m 
```

但是每次执行此列表中的操作时，该`IO [a]`操作都会再次执行；它只会丢弃列表的其余部分。

之所以`randoms`可以工作并返回一个无限的随机数列表是因为它使用惰性 IO 和`unsafeInterleaveIO`. （请注意，尽管名称中有“不安全”，但它*不会*导致段错误，因此正在发生其他事情。）

¹其他不太可能的可能性包括 C 库的错误编译或 GHC 中的错误。

# height - JScrollPane 中的 JList 弄乱了 JPanel 的高度

> ID：10017918
> 
> 赞同：0
> 
> 时间：2012-04-04T19:25:18.367
> 
> 标签：height, jpanel, jscrollpane, jlist, border-layout

我有一个奇怪的问题，我似乎无法解决。我有一个`JList`必须能够滚动的内容，如果其中有更多项目，则可以显示。但是，如果我将`JList`a放入`JScrollPane`，它不会利用它所在`EAST`部分的全部高度`BorderLayout`。

没有的例子`JScrollPane`：

```
public UsersPanel(){
    String[] userList = new String[]{"Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar"};
    JList users = new JList(userList);
    add(users);
} 
```

![没有 JScrollPane 的示例](../Images/6e0ecf2a085f039a8d919e0504b7a540.png)

示例`JScrollPane`：

```
public UsersPanel(){
    String[] userList = new String[]{"Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar","Foo","Bar"};
    JList users = new JList(userList);

    JScrollPane sp = new JScrollPane(users);

    add(sp);
} 
```

![JScrollPane 示例](../Images/6a668370ca16de841b6c8aed8931eaa9.png)

我想要一个`JList`利用`BorderLayout`它所在的 EAST 部分的全部可用高度。我尝试将我的`JList`内部包裹在另一个内部`JPanel`，但这也不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:19:53.010

使用 setVisibleRowCount() 方法设置 Jlist 中的可见行数。users.setVisibleRowCount(10);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:32:55.100

我之前成功使用的一个技巧是将 ComponentListener 添加到 JList / JScrollPane 的父组件，并随着它的更改通过（伪代码）setPreferredSize(getPreferredSize() 重置 JList 和/或 Jscrollpane 的首选大小。宽度，父高度）

# xcode4.3 - How to create code signing and IPA-file in xcode4.3?

> ID：10017920
> 
> 赞同：2
> 
> 时间：2012-04-04T19:25:25.690
> 
> 标签：xcode4.3, ipa, code-signing-certificate, code-signing-entitlements

I'm building my first app in xcode4.3 on lion. Now I want to beta-test using testflight. I've looked at the tutorial: "http://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4-" But I get stuck at the 2nd step when I'm about to create an Entitlement. In xcode I don't have the "code signing" alternative in the "IOS" template list and am unable to continue the guide. And all the other tutorials I've found are outdated. I would really appreciate a step-by-step guide that works with xcode4.3.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:59:31.560

该教程已过时，使用 xcode 4.3，您无需像该教程中那样创建 ipa 并使用上传器上传。创建您的应用 ID、代码签名，在此过程中会询问您是要分发到 Appstore 还是创建 ipa。只需遵循该过程，您将在最后看到该选项，然后您可以创建您的 IPA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:22:47.657

如果要查找权利文件，可以这样做：

单击您的项目，然后单击 Targets-Summary，最后您可以看到“Enable Entitlements”，选中它然后您可以看到一个名为 yourApp.Entitlements 的新文件出现在您的项目中。

# jqgrid - 货币掩码 jqgrid

> ID：10017921
> 
> 赞同：0
> 
> 时间：2012-04-04T19:25:29.993
> 
> 标签：jqgrid, currency

我是 jqGrid 的新手，在完成几项任务时遇到了麻烦。任何指导都会有很大帮助。

问题 1# 我需要在创建表单中对我的费率字段执行以下 jquery 屏蔽，

$('#Rate').priceFormat({ 前缀：''，千位分隔符：'' }); 我怎么能在 jqGrid 中实现这一点？

非常感谢。

这就是我现在所拥有的：

```
JQGridColumn RATEColumn = CapitationsGrid.Columns.Find(c => c.DataField == "RATE");
            RATEColumn.Editable = true;
            RATEColumn.EditType = EditType.TextBox;
            RATEColumn.EditDialogLabel = "Rate";
            RATEColumn.DataType = typeof(float);
            RATEColumn.EditClientSideValidators.Add(new RequiredValidator());
            RATEColumn.EditClientSideValidators.Add(new NumberValidator());
            RATEColumn.Formatter = new CurrencyFormatter
            {
                DecimalPlaces = 1,
                DecimalSeparator = ".",
                Prefix = "$",
                Suffix = " USD",
                ThousandsSeparator = ","
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:38:34.693

重要的是要理解，jqGrid 尝试将数据与可视化分开。因此，如果您需要显示货币，例如，您应该在输入数据中填写*数字并使用*[预定义](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#predefined_format_types)的[自定义](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter) *格式化程序*以与您需要的语言环境相对应的格式显示货币。

要格式化您应该使用的货币`formatter: 'currency', formatoptions: {thousandsSeparator: ""}`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#column_specific_options)）。您可以在您使用`formatoptions`的语言环境文件中找到货币格式化程序的默认值。`grid.locale-en.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T05:44:59.113

这涵盖了您的问题。看一看。

```
name: 'Currency',

width: 75,

formatter: 'currency',

formatoptions: { decimalSeparator: '.', decimalPlaces: 1, suffix: ' USD', thousandsSeparator: ',', prefix: '$' } 
```

[http://www.guriddo.net/demo/guriddojs/functionality/formatters_built_in/index.html](http://www.guriddo.net/demo/guriddojs/functionality/formatters_built_in/index.html)

# c - 您如何理解 mlockall 手册页？

> ID：10017928
> 
> 赞同：2
> 
> 时间：2012-04-04T19:26:28.553
> 
> 标签：c, linux

我的内核 3.0的手册页`mlockall`说

> mlockall() 锁定所有映射到调用进程地址空间的页面。这包括代码、数据和**堆栈** 段的页面，以及共享库、用户空间内核数据、共享内存和内存映射文件。调用成功返回时，保证所有映射的页面都驻留在 RAM 中；这些页面保证保留在 RAM 中，直到以后解锁。

后来说

> 使用 mlockall() 来防止页面错误延迟的实时进程应该在进入时间关键部分之前保留足够的锁定堆栈页面，以便函数调用不会导致页面错误。这可以通过调用一个函数来实现，该函数分配一个足够大的自动变量（一个数组）并写入该数组占用的内存以接触这些堆栈页面。这样，足够多的页面将被映射到堆栈并且可以锁定到 RAM 中。虚拟写入确保在临界区中甚至不会发生写时复制页面错误。

我了解此系统调用无法猜测将达到的最大堆栈大小，因此无法锁定堆栈的页面。但是为什么上面显示的 man 的第一部分说它也是为堆栈完成的？这个手册页中是否有错误，或者它只是意味着锁定是针对初始堆栈大小完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:31:31.347

是的，对当前堆栈页面进行了锁定，但不是对所有可能的未来堆栈页面进行了锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:29:22.627

用第一句话来解释：

> `mlockall()`锁定所有映射到调用进程地址空间的页面。

因此，如果一个页面被映射，它将被锁定。如果没有，它不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:35:03.110

它只是在原句中提到了堆栈，因为堆栈内存与堆内存是分开映射的。堆栈没有特殊处理，如果它被映射它会被锁定，否则它不会。因此，正如您引用的第二部分所说，在您调用`mlockall`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:46:47.950

实际上，通过快速阅读 mm/mlock.c 源代码，我会说它只是锁定了**所有内容**：所有当前映射的页面。

```
static int do_mlockall(int flags)
{
        struct vm_area_struct * vma, * prev = NULL;
        unsigned int def_flags = 0;

        if (flags & MCL_FUTURE)
                def_flags = VM_LOCKED;
        current->mm->def_flags = def_flags;
        if (flags == MCL_FUTURE)
                goto out;

        for (vma = current->mm->mmap; vma ; vma = prev->vm_next) {
                vm_flags_t newflags;

                newflags = vma->vm_flags | VM_LOCKED;
                if (!(flags & MCL_CURRENT))
                        newflags &= ~VM_LOCKED;

                /* Ignore errors */
                mlock_fixup(vma, &prev, vma->vm_start, vma->vm_end, newflags);
        }
out:
        return 0;
} 
```

尽管 larsmans 说了什么，但我认为如果还指定了 MCL_FUTURE，它也适用于所有未来的页面。在这种情况下，'current->mm->def_flags 被更新为包括 VM_LOCKED。

# fluent-migrator - 在 Fluent Migrator 中定义唯一约束

> ID：10017930
> 
> 赞同：2
> 
> 时间：2012-04-04T19:26:33.457
> 
> 标签：fluent-migrator

我正在尝试使用 Fluent Migrator 创建一个独特的列。但是，如果我尝试将唯一约束与列定义一起定义，则它不起作用，例如：

```
[Migration(20120404190455)]
public class Migration1 : Migration
{
    public override void Up()
    {
        Create.Table("Test")
            .WithColumn("Name").AsString(64).Unique();
    }

    public override void Down()
    {
        Delete.Table("Test");
    }
} 
```

我像这样执行迁移：

```
<sourcedir>\packages\FluentMigrator.Tools.1.0.1.0\tools\AnyCPU\40\Migrate.exe -a build\TheMigrationDLL.dll --db sqlserver2008 -conn "DQLEXPRESS;Initial Catalog=DBNAME;Trusted_Connection=True;" --verbose=true 
```

输出：

```
connection is null!
connection is null!
Using Database sqlserver2008 and Connection String Data Source=.\SQLEXPRESS;Initial Catalog=DBNAME;Trusted_Connection=True;
-- VersionMigration: migrating ===============================================

-- CreateTable VersionInfo
CREATE TABLE [dbo].[VersionInfo] ([Version] BIGINT NOT NULL)
-- -> 0,0170009s

-- VersionMigration: migrated
-- -> 0,0190011s

-- Migration1: migrating =====================================================

-- CreateTable Test
CREATE TABLE [dbo].[Test] ([Name] NVARCHAR(64) NOT NULL)
-- -> 0,0020002s

-- Migration1: migrated
-- -> 0,0030002s

INSERT INTO [dbo].[VersionInfo] ([Version]) VALUES (20120404190455)
-- Committing Transaction 
```

显然没有创建唯一索引。但是，如果我在独立调用中创建索引：

```
Create.Index().OnTable("Test")
    .OnColumn("Name").Ascending()
    .WithOptions().Unique(); 
```

输出：

```
....
-- CreateIndex Test (Name)
CREATE UNIQUE INDEX [IX_Test_Name] ON [dbo].[Test] ([Name] ASC)
.... 
```

我在 github 上发现了几个与此相关的问题（例如[#49](https://github.com/schambers/fluentmigrator/issues/39)和[#83](https://github.com/schambers/fluentmigrator/issues/83)），但它们已参考[此 pull](https://github.com/schambers/fluentmigrator/pull/207)关闭。

我想知道我是否使用了错误的版本。我正在使用 NuGet 提供的 1.0.1.0 版本。

我很感激提示我在这里做错了什么。提前致谢！

问候， 安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:40:09.280

FluentMigrator 1.0.2.0 解决了这个特殊问题，请更新您的软件包。

FluentMigrator 1.0.1.0 于 2011 年 9 月发布，截至昨天，我们已回到发布的正轨。

请记住，如果您有一个 .NET 4 迁移程序集来获取 fluentmigrator.tools 包，那么您拥有正确版本的 Migrate.exe 版本。

# wpf - WPF ListBox ItemsSource bindings does not find Path referenced

> ID：10017932
> 
> 赞同：0
> 
> 时间：2012-04-04T19:26:35.683
> 
> 标签：wpf, list, xaml, binding, datacontext

I'm new to WPF and I want to do an app which shows pictures in a ListBox. I made a class called _Images, that gets images from a local folder, puts on a list.

```
namespace wpfAppSlides.Imagens
{
    class _Images
    {
        public List<Image> imgList = new List<Image>();

        public void CarregaImagens()
        {
            string dir = @"C:\Users\devUser\Img";

            foreach (string file in Directory.GetFiles(dir))
            {
                Image image = new Image();
                BitmapImage source = new BitmapImage();
                source.BeginInit();
                source.UriSource = new Uri(file, UriKind.Relative);
                source.EndInit();
                image.Source = source;

                imgList.Add(image);

            }
        }
    }
} 
```

An then, in my XAML, I referenced my namespaces.

```
xmlns:is="clr-namespace:wpfAppSlides._Images"
xmlns:col="clr-namespace:wpfAppSlides" 
```

And put in a DataContext.

```
<Window.DataContext>
    <is:_Images></is:_Images>
</Window.DataContext> 
```

But when I wanna feed my ListBox with the items on imgList, using ItemsSource (in Properties, not code), he does not find any Path that I can relate to imgList.

ListBox XAML:

```
<ListBox Height="110" 
             HorizontalAlignment="Left" 
             Margin="14,50,0,0" 
             Name="listBox1" 
             VerticalAlignment="Top" 
             Width="477" ItemsSource="{Binding}" /> 
```

MainWindow code:

```
public partial class MainWindow : Window
{
    _Imagens imgs;
    public MainWindow()
    {
        InitializeComponent();
        imgs = (_Images)this.DataContext;
        imgs.CarregaImagens();

    }
} 
```

I tried to use ObservableCollection, but it's no use.

Help? ):

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:20:22.103

我注意到了几件事..

1.  看起来您的类 _Images 未声明为公共

2.  当调用该类的构造函数时（当您将其添加为 Window.DataContext 时发生，CarregaImagens() 是如何/在哪里被调用的。它是否被调用过？如果没有，请放入默认构造函数。

3.  你不应该用下划线命名一个类（这是私有成员的约定）你知道为了在 xaml 中绑定，属性不能是私有的？

希望这些帮助...

# objective-c - Passing NSString argument to SOAP WS yields "Illegal processing instruction target ("xml")"

> ID：10017936
> 
> 赞同：1
> 
> 时间：2012-04-04T19:27:07.590
> 
> 标签：objective-c, ios, web-services, soap, glassfish

I am invoking the WS using SudzC generated code:

```
[service createPendingSalesOrders:self action:@selector(handler:) arg0: 
 @"<?xml version='1.0'"
 " encoding='utf-8'?>"
 "<root>test</root>"]; 
```

The soap request is:

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope   
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:com="http://com/">
      <soapenv:Body>
           <com:createPendingSalesOrders>
                <arg0>"<?xml version='1.0' encoding='utf-8'?><root>test</root>"
                </arg0>          
           </com:createPendingSalesOrders>
      </soapenv:Body>
 </soapenv:Envelope> 
```

I am receiving:

`[com.ctc.wstx.exc.WstxParsingException: Illegal processing instruction target ("xml"); xml (case insensitive) is reserved by the specs.`

from my WS running on glassfish.

The WS works with other XML strings that seem to contain the same PI.

Thanks for any insight, Dane

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:38:29.767

如果您坚持将 xml 包装到 xml 中，请将内容放入 CDATA 部分，以便解析器将其作为字符串处理。

# java - 下拉框在 JSP 中不起作用

> ID：10017937
> 
> 赞同：0
> 
> 时间：2012-04-04T19:27:13.440
> 
> 标签：java, html, jsp, drop-down-menu

为我的 JSP 制作一个下拉列表，我输入的值不会显示。可能我是个白痴，但解决方案真的很有帮助

**出现下拉框，但要选择的值为空。**

这是一个很大的 JSP，所以这是我正在查看的部分。

表单放在 JSP 的顶部：

```
out.println("<form action=\"ExchangeServlet\" method=\"get\">"); 
```

在jsp的底部：

```
out.println("<select name =\"status\">"+
"option value =\"Accepted\">Accepted</option>"+
"option value =\"Declined\">Declined</option>"+
"</select>");
out.println("<br />");
out.println("<input type=\"submit\" value=\"Update Exchange\" />");
out.println("</form>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:32:28.477

您的 HTML 无效。

改变

```
out.println("<select name =\"status\">"+
"option value =\"Accepted\">Accepted</option>"+
"option value =\"Declined\">Declined</option>"+
"</select>"); 
```

到

```
out.println("<select name =\"status\">"+
"<option value =\"Accepted\">Accepted</option>"+
"<option value =\"Declined\">Declined</option>"+
"</select>"); 
```

# python - 如何使用 Pandas MultiIndex 中只有一个标签的值列表进行索引

> ID：10017938
> 
> 赞同：2
> 
> 时间：2012-04-04T19:27:14.667
> 
> 标签：python, pandas, multi-index

我正在尝试使用 pandas 多索引在顶级索引（日期）处选择部分切片，并将列表应用于二级索引（股票代码）。即下面我想要范围内的 AAPL 和 MSFT 的数据`d1:d2`。

部分切片工作正常，但不清楚如何从第二个索引中选择 AAPL 和 MSFT，同时避免中间的 GOOG。

如果我交换级别，它可以使用单个符号，而不是列表。

```
In [93]: print df
                 f1  f2  c1
date       sym
2012-01-01 AAPL  5\.  2   3
           GOOG  1\.  2   3
           MSFT  4\.  2   3
2012-01-02 AAPL  8\.  2   3
           GOOG  6\.  2   3
           MSFT  7\.  2   3
2012-01-03 AAPL  11  2   3
           GOOG  9\.  2   3
           MSFT  10  2   3

In [94]: print df.ix[d1:d2].swaplevel(0,1).ix['AAPL']
            f1  f2  c1
date
2012-01-01  5   2   3
2012-01-02  8   2   3

In [95]: print df.ix[d1:d2].swaplevel(0,1).ix[['AAPL', 'MSFT']]
<blah balh>
TypeError: Expected tuple, got str 
```

我想避免建立一个长的元组列表，即：

```
t = [(d1, 'AAPL'), (d1, 'MSFT'), (d2, 'AAPL'), (d2, 'MSFT')] 
```

当传递给 ix 时，它确实有效。下面是我想要的输出。

```
In [103]: print df.ix[t]
                 f1  f2  c1
date       sym
2012-01-01 AAPL  5   2   3
           MSFT  4   2   3
2012-01-02 AAPL  8   2   3
           MSFT  7   2   3 
```

谢谢，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T01:04:36.750

它适用于我的 pandas 0.7.2：

```
print df.ix[d1:d2].swaplevel(0,1).ix[['AAPL', 'MSFT']]
                 f1  f2  c1
sym  date                  
AAPL 2012-01-01   5   2   3
MSFT 2012-01-01   4   2   3
AAPL 2012-01-02   8   2   3
MSFT 2012-01-02   7   2   3

import pandas; pandas.__version__
'0.7.2' 
```

# jqgrid - jqGrid隐藏一个字段

> ID：10017942
> 
> 赞同：0
> 
> 时间：2012-04-04T19:27:26.543
> 
> 标签：jqgrid

我是 jqGrid 的新手，在完成几项任务时遇到了麻烦。任何指导都会有很大帮助。

我有一个字段 (CREATE_DATE)，其值需要在编辑表单中传递。为此，我必须使其可编辑，但同时我不希望它显示在编辑表单中。类似于这个问题的东西（http://stackoverflow.com/questions/2368051/jqgrid-how-to-have-hidden-fields-in-an-edit-form）这样的事情是我想要实现的。

```
$('#CREATE_DATE_id]').attr('type', 'hidden'); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:44:20.977

如果您在网格中有一些隐藏列并且您只想在行编辑期间发送值，您应该在列的定义中包含以下属性：

```
editable: true, hidden: true, hidedlg: true, editrules: { edithidden: true } 
```

如果您想在网格中显示列并且需要将数据发送到服务器，但您不想在编辑表单中显示数据，您可以将列标记为`editable: true`，但隐藏`beforeShowForm`回调内部的字段。您甚至可以在“添加”和“编辑”表单中实现不同的行为。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/3405961/315935)。

# ruby-on-rails - 如何使用 Capybara Rspec Matchers 测试演示者？

> ID：10017943
> 
> 赞同：4
> 
> 时间：2012-04-04T19:27:27.443
> 
> 标签：ruby-on-rails, rspec, capybara, presenter

我正在尝试使用 Capybara RSpec 匹配器测试演示者方法。

假设我有一个呈现按钮的方法。如果我不使用 capybara rspec 匹配器，这将是我要编写的测试：

```
it "should generate a button" do
  template.should_receive(:button_to).with("Vote").
    and_return("THE_HTML")
  subject.render_controls.should be == "THE_HTML"
end 
```

使用 capybara rspec 匹配器，我想这样做：

```
it "should render a vote button" do
  subject.render_controls.should have_button('Vote')
end 
```

这种方法是在这篇文章[http://devblog.avdi.org/2011/09/06/making-a-mockery-of-tdd/](http://devblog.avdi.org/2011/09/06/making-a-mockery-of-tdd/)中提出的。在文章中，作者是这样解释的：“我决定稍微改变一下我的规范设置，以便传入一个包含实际 Rails 标记助手的模板对象。然后我包括了 Capybara 规范匹配器，用于对 HTML 进行断言。”

但是，我不明白这一点。当 render_controls 只返回一个 content_tag 时，如何使用 capybara rspec 匹配器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T01:40:19.600

即使 luacassus 的回答是正确的，我也发现了问题所在。我没有在测试中包括 capybara rspec 匹配器。如果你不包括 Capybara rspec 匹配器，你会出现这样的错误：**undefined method has_selector? 对于 ActiveSupport::SafeBuffer:0x9449590**。

当您包含 rspec 匹配器时，无需使用 Capybara String 方法，因为 rspec 匹配器已经与字符串匹配。

我在这里留下一个更详细的例子。

```
require_relative '../../app/presenters/some_presenter'
require 'capybara/rspec'

describe 'SomePresenter'
  include Capybara::RSpecMatchers

  let(:template) { ActionView::Base.new }  
  subject { Presenter.new(template) }  

  it "should render a vote button" do
    subject.render_controls.should have_button('Vote')
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T19:27:09.547

查看`Capybara.string`方法：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara#string-class_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara#string-class_method)

使用这种方法，您应该能够编写类似的内容：

```
subject { Capybara.string(presenter.render_controls }
it { should have_button('Vote') } 
```

# java-me - how to calculate time taken by a method in nanoseconds in j2me platform?

> ID：10017944
> 
> 赞同：1
> 
> 时间：2012-04-04T19:27:32.967
> 
> 标签：java-me

I was tried to calculate time taken by a method in nanoseconds in j2me platform. But I didn't find any function to do this.

Only `System.currentTimeMillis()` function is available in j2me. But I want to calculate time in nano seconds. Can anyone please help me in this.

And, I tried `System.nanoSeconds()` in j2me, but this function is not available.

# c# - ControlParameter 找不到 UserControl 中的控件

> ID：10017948
> 
> 赞同：2
> 
> 时间：2012-04-04T19:27:59.320
> 
> 标签：c#, jquery, asp.net, custom-controls, objectdatasource

我对 ASP.NET 还很陌生，但一直在滚动，到目前为止，通过一点研究就能克服所有障碍。但是我遇到了一个我似乎无法解决的小问题，涉及我创建的自定义控件。

该控件是一个通过 JQuery 弹出的小部件，包含允许用户过滤结果集的控件。我将这个弹出窗口的所有元素嵌入到两个特定页面中，并且这些页面都运行良好。我决定创建一个自定义控件，并且据我所知，`Control' directive and a`在目标页面上使用带有 Register' 指令的 ascx 文件，并且这样做是正确的，所以：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="PopUp_TopicFilterControl.ascx.cs" Inherits="POD.PopUp_TopicFilterControl" %> 
```

和

```
<%@ Register TagPrefix="popup" TagName="TopicFilterControl" Src="~/Controls/PopUp_TopicFilterControl.ascx" %> 
```

“主”页面包含一个对象数据源，该对象数据源需要引用我的自定义控件中的控件以获取其选择参数。这是数据源：

```
<asp:ObjectDataSource ID="TopicDataSource" runat="server" SelectMethod="GetRecentTopics" TypeName="POD.App_Objects.Topic">
    <SelectParameters>
        <asp:Parameter DefaultValue="12" Name="select_limit" Type="Int32" />
        <asp:ControlParameter DefaultValue="" ControlID="TopicCategoryFilterList" Name="category" Type="String" />
        <asp:ControlParameter DefaultValue="" ControlID="TopicCreatorFilterList" Name="creator" Type="Int32" />
        <asp:ControlParameter DefaultValue="" ControlID="TopicDateAfterFilterText" Name="date_after" Type="String" />
        <asp:ControlParameter DefaultValue="" ControlID="TopicDateBeforeFilterText" Name="date_before" Type="String" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

这是自定义控件的主体：

```
<asp:Panel id="TopicFilter_Panel" runat="server" CssClass="PopUp" ClientIDMode="Static" EnableTheming="False" EnableViewState="False" ViewStateMode="Disabled">
    <asp:Panel runat="server" CssClass="PopUp_Heading">
        <h1><a id="TopicFilter_Close" href="#">Close [X]</a></h1>
    </asp:Panel>
    <asp:Panel runat="server" CssClass="PopUp_Body">
        <asp:Table runat="server">
            <asp:TableRow runat="server">
                <asp:TableCell runat="server" HorizontalAlign="Right">
                    By Category:
                </asp:TableCell>
                <asp:TableCell runat="server">
                    <asp:DropDownList
                        ID="TopicCategoryFilterList"
                        runat="server"
                        DataSourceID="TopicCategoryDataSource"
                        DataTextField="value"
                        DataValueField="value"
                        AppendDataBoundItems="True"
                        AutoPostBack="False">
                        <asp:ListItem Selected="True" Value="">&mdash; All &mdash;</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow runat="server">
                <asp:TableCell runat="server" HorizontalAlign="Right">
                    By Author:
                </asp:TableCell>
                <asp:TableCell runat="server">
                    <asp:DropDownList
                        ID="TopicCreatorFilterList"
                        runat="server"
                        DataSourceID="UserDataSource"
                        DataTextField="person_name_full"
                        DataValueField="user_id"
                        AppendDataBoundItems="True"
                        AutoPostBack="False">
                        <asp:ListItem Selected="True" Value="">&mdash; All &mdash;</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow runat="server">
                <asp:TableCell runat="server" HorizontalAlign="Right">
                    By Date (After):
                </asp:TableCell>
                <asp:TableCell runat="server">
                    <asp:TextBox ID="TopicDateAfterFilterText" runat="server" />
                    <ajaxToolkit:CalendarExtender ID="TopicDateAfterCalendarExtender" TargetControlID="TopicDateAfterFilterText" PopupPosition="BottomRight" runat="server" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow runat="server">
                <asp:TableCell runat="server" HorizontalAlign="Right">
                    By Date (Before):
                </asp:TableCell>
                <asp:TableCell runat="server">
                    <asp:TextBox ID="TopicDateBeforeFilterText" runat="server" />
                    <ajaxToolkit:CalendarExtender ID="TopicDateBeforeCalendarExtender" TargetControlID="TopicDateBeforeFilterText" PopupPosition="BottomRight" runat="server" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell ColumnSpan="2" VerticalAlign="Bottom" HorizontalAlign="Center">
                    <asp:Button runat="server" Text="Apply" CssClass="PopUp_Apply" />
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
    </asp:Panel>
</asp:Panel> 
```

我得到的错误只是对象数据源没有看到我的自定义控件中的控件（例如，“在 ControlParameter 'category' 中找不到控件'TopicCategoryFilterList'”）。显然是一件非常简单的事情，但我似乎无法为我的生活简单地弄清楚如何使这项工作。我很确定这里一定已经解决了这个问题，但我找不到一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:33:03.433

这是我自己对这个“问题”的解决方案，以防有人遇到同样的困难并像我一样疯狂地旋转他们的轮子，以找到答案。首先，这是用于返回自定义控件属性的代码片段。我在 ascx.cs 文件中有这段代码：

```
public partial class PopUp_TopicFilterControl : System.Web.UI.UserControl
{

    public string TopicCategory
    {
        get { return TopicCategoryFilterList.SelectedValue.ToString(); }
    }

} 
```

下面是对 ObjectDataSource 中的 ControlParameter 的更改：

```
<asp:ControlParameter
    DefaultValue=""
    ControlID="TopicFilterSelection"
    PropertyName="TopicCategory"
    Name="category"
    Type="String" /> 
```

请注意，我所要做的就是将 ControlID 更改为我的自定义控件的名称，并添加 PropertyName 属性，该属性引用我在 ascx.cs 文件中定义的属性。

这里的所有都是它的。当你看到它时很明显，但它让我难倒了好几个小时。

# c# - 为高对比度主题重新设计 AvalonDock？

> ID：10017949
> 
> 赞同：1
> 
> 时间：2012-04-04T19:28:05.043
> 
> 标签：c#, wpf, styling, avalondock, high-contrast

我在一个项目中使用 AvalonDock。为了这个例子，它的结构如下：

```
<ad:DockingManager>
    <ad:DockablePane>
        <ad:DockableContent Title="Test1">
        </ad:DockableContent>
        <ad:DockableContent Title="Test2">
        </ad:DockableContent>
    </ad:DockablePane>
</ad:DockingManager> 
```

![普通标签](../Images/81b190ba244048e5652d8c88f7d5d60b.png)

这很好，但不幸的是，这些选项卡在高对比度主题上看起来不太好，如下所示。

![高对比度标签](../Images/ab47eb57be3f1ea82915b5f49e3c9c14.png)

理想情况下，我想重新设置选项卡的样式以使用系统颜色作为背景（例如窗口颜色）。这可能吗？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T22:33:50.693

转到 codeplex 并下载 avalon 位。在那里，您应该能够快速找到他们的 XAML 样式文件。以一个为基准并开始嘲笑它。

你应该看到这样的东西（我只包括一种风格）

```
<!--DockingManager-->
<Style x:Key="{x:Type ad:DockingManager}" TargetType="{x:Type ad:DockingManager}">
    <Setter Property="Background" Value="{StaticResource DockManagerBackground}"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ad:DockingManager}">
                <Grid Background="{TemplateBinding Background}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Name="PART_LeftAnchorTabPanel" 
                            Grid.Column="0" Grid.Row="1" Orientation="Vertical">
                        <StackPanel.Resources>
                            <Style TargetType="{x:Type ad:DockablePaneAnchorTabGroup}">
                                <Setter Property="LayoutTransform">
                                    <Setter.Value >
                                        <RotateTransform Angle="90"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Margin" Value="0,2,2,0"/>
                            </Style>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="0,0,3,3"/>
                            </Style>
                        </StackPanel.Resources>
                    </StackPanel>
                    <StackPanel Name="PART_RightAnchorTabPanel" Grid.Column="2" Grid.Row="1"  Orientation="Vertical">
                        <StackPanel.Resources>
                            <Style TargetType="{x:Type ad:DockablePaneAnchorTabGroup}">
                                <Setter Property="LayoutTransform">
                                    <Setter.Value >
                                        <RotateTransform Angle="90"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Margin" Value="2,2,0,0"/>
                            </Style>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="3,3,0,0"/>
                            </Style>
                        </StackPanel.Resources>
                    </StackPanel>
                    <StackPanel Name="PART_TopAnchorTabPanel" Grid.Column="1" Grid.Row="0" Orientation="Horizontal"/>
                    <StackPanel Name="PART_BottomAnchorTabPanel" Grid.Column="1" Grid.Row="2" Orientation="Horizontal"/>
                    <Border 
                        x:Name="PART_InternalContainer"
                        Background="{StaticResource DockManagerBorderBackground}"
                        Grid.Column="1" Grid.Row="1"
                        Padding="2">
                        <ContentPresenter />
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

note that right on top of the file there will be a bunch of brushes, start with them, then start digging dipper 
```

# android - AlertDialog 与 AlertDialog.Builder

> ID：10017951
> 
> 赞同：10
> 
> 时间：2012-04-04T19:28:16.553
> 
> 标签：android, android-alertdialog

为什么要使用`AlertDialog.Builder`类而不是直接可用的方法`AlertDialog`，例如，为什么使用`AlertDialog.Builder.setCancellable`而不是`AlertDialog.setCancellable`？这肯定是冗余的情况吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T19:34:18.820

**AlertDialog**允许您在活动/片段上方显示一个对话框。它通常用于提示用户进行交互，包括几个按钮或通知某事。

**AlertDialog.Builder**是 AlertDialog 的一个内部静态类，它允许您使用其方便的方法快速设置对话框。它就像 AlertDialog 的辅助类。它用于调用链中的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T19:36:12.050

因为`AlertDialog.setCancellable`返回 void 并`AlertDialog.Builder.setCancellable`返回一个`AlertDialog.Builder`.

这意味着构建器允许您以更少的冗长链接一堆设置。这只是一个便利班

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T01:53:52.923

`AlertDialog.Builder`不向用户*显示*`setTitle()`或`setMessage()`和等属性的设置。

 *`AlertDialog`是*显示*那些*已*在`AlertDialog.Builder`.

两者都在某处提到的目的是它允许设置与实际显示分开进行，这反过来又使事情变得方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:33:06.730

我认为工厂方法更方便。*

# objective-c - Why won't this code allocate a subView?

> ID：10017953
> 
> 赞同：2
> 
> 时间：2012-04-04T19:28:31.967
> 
> 标签：objective-c, xcode4

This is my code where I'm trying to create a subView... I'm using XCode4 with StoryBoards. The app is crashing on the 2nd line where it is allocating subView with EXC_BAD_ACCESS. vFrame has valid content. What is wrong with this? (I'm using XCode4 with Storyboards, btw).

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect vFrame = CGRectMake(60,100,200,200);
    subView = [[UIView alloc] initWithFrame:vFrame];
    subView.backgroundColor = [UIColor redColor];
    [self.view addSubview: subView];
} 
```

UPDATE: definition for subView:

```
@interface PreferencesViewController : UIViewController  {

    UIView *subView;
}

@property (nonatomic, retain)  UIView *subView;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:05:04.277

尝试将您的子视图实例化代码移动到您的主视图的方法 viewWillAppear 中。这保证一切都已初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:40:13.990

这真的应该工作。您的视图控制器 (PreferencesViewController) 是否正确分配和初始化？你@synthesize 你的子视图了吗？

虽然没关系，但您可以尝试对 CGRect 使用浮点数（在每个末尾添加 .0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:14:25.070

问题是 UIViewController 被 farkled...不知道如何，但是一旦它被替换，它就像一个冠军！谢谢大家的回复...

# jsp - JSTL Tomcat 6.0 Cannot find the taglib descriptor Error

> ID：10017956
> 
> 赞同：1
> 
> 时间：2012-04-04T19:28:44.970
> 
> 标签：jsp, jstl, jsp-tags

I am using Tomcat 6.0 and getting the same red underline saying "Can not find the tag library descriptor for "http://java.sun.com/jsp/jstl/core"

I have the basic index.jsp file with the taglib uri as follows:

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

I have added the jstl-1.2.jar under both the Tomcat as well as my webapp folders

```
C:\...\apache-tomcat-6.0.35-windows-x64\apache-tomcat-6.0.35\webapps\ROOT\WEB-INF\lib
C:\...\workspace\<App-Name>\WebContent\WEB-INF\lib 
```

My web.xml file looks as below with the web-app specifications as mentioned

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

I am still getting the red underlined error for tag library descriptor. Any ideas on what I am missing out ?

Thanks,

Somnath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:42:14.790

要使用标签库，您需要添加`standard.jar`和`jstl.jar`添加到您的构建路径

从[http://jstl.java.net/获取 jars](http://jstl.java.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-22T10:03:49.570

JSTL 是 Java EE API 的一部分，并包含在大多数 servlet 容器中。但是要在我们的 JSP 页面中使用 JSTL，我们需要为您的 servlet 容器下载 JSTL jar。大多数时候，您可以在服务器下载的示例项目中找到它们并使用它们。您需要将这些库包含在您的 Web 应用程序项目 WEB-INF/lib 目录中。参考： [http ://www.journaldev.com/2090/jstl-tutorial-jstl-example-jstl-core-tags](http://www.journaldev.com/2090/jstl-tutorial-jstl-example-jstl-core-tags)

# jqgrid - jqGrid Dynamic dropdownlist

> ID：10017957
> 
> 赞同：0
> 
> 时间：2012-04-04T19:28:47.603
> 
> 标签：jqgrid, drop-down-menu

I am new to jqGrid, and having trouble with achieving a couple of tasks. Any guidance will be a huge help.

I need to have dynamically populated drop down list.

```
 $("#HEALTH_PLAN_CATEGORY_VALUE_ID").change(function () {            $.getJSON('/Ajax/GetCountyForHealthPlan', { id: $(this).val() }, function (counties) {                var ddlSelectedCounty = $("#COUNTY_GSA_LOOKUP_ID");

                // clear all previous options                $("#COUNTY_GSA_LOOKUP_ID > option").remove();

                // populate the products                for (i = 0; i < counties.length; i++) {

                    ddlSelectedCounty.append($("<option />").val(counties[i].Value).text(counties[i].Text));                }

            });

        }); 
```

Thanks a lot.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:52:28.133

如果您需要为某些列动态填写编辑表单的选择列表中的选项，您应该使用`dataUrl`从服务器获取数据`buildSelect`并将服务器响应转换为`<select><option value='val'>Text</option>...</select>`. 有关示例，请参见[答案](https://stackoverflow.com/a/4102155/315935)的“更新”部分。

# python - Failed to write to file but generates no Error

> ID：10017958
> 
> 赞同：6
> 
> 时间：2012-04-04T19:28:47.913
> 
> 标签：python, file-io

I'm trying to write to a file but it's not working. I've gone through step-by-step with the debugger (it goes to the write command but when I open the file it's empty).

My question is either: "How do I see what the error is so I can debug?", "What can go wrong when trying to write to a file that would cause it to behave this way?".

```
sqlScript = open('script-file.sql', 'a')

    try:
         sqlScript.write(sqlLine)
    except IOError as (errno, strerror):
         print "I/O error({0}): {1}".format(errno, strerror) 
```

This should be simple but I can't seem to find an answer. Also, I apologize in advance as English is a second language.

Edit: I put a print statement just before and the string is not empty.
Edit2: I'm using python 2.6 if that factors in somehow.

Edit 3: I've found a "solution" to my error. I decided to try and run my script using IDLE instead of PyCharm and it works like a charm (pun intended). I have no clue why, but there it is. Any reason why that would happen?!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:36:39.540

基于克里斯莫里斯的回答，也许做这样的事情：

```
try:
    sqlScript.write(sqlLine)
except Exception as e:
    print type(e)
    print str(e) 
```

这将捕获任何抛出的异常（`Exception`当然，前提是它是 的子类）并告诉您类型和错误消息。

此外，可以为不同的可能异常定义多个`except:`案例，因此可以尝试为每个可能引发/引发的异常执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:32:55.823

下面的代码可以让您查看抛出的异常是什么，并查看它的来源。

```
try:
    sqlScript.write(sqlLine)
except:
    print "Unexpected error:", sys.exc_info()[0]
    raise 
```

有关更多信息，请参阅[http://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-24T10:23:09.813

您必须将光标放在文件的开头。你可以用`seek`方法做到这一点：

```
myScript.seek(0) 
```

看到这个答案：[https ://stackoverflow.com/a/2949648/2119117](https://stackoverflow.com/a/2949648/2119117)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:58:41.673

脚本中的关键字是小写的吗？同样的事情在另一个数据库中发生在我身上，我通过将单词更改为大写来解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T19:59:43.153

您当前的工作目录不是您期望的那样，它正在成功写入`script-file.sql`另一个目录中的某些目录。尝试打印`os.getcwd()`并确保它符合您的期望，然后查看该目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T19:35:25.870

如果没有抛出异常，我怀疑字符串变量 'sqlLine' 是空的。

你在写语句之前打印了吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-18T21:00:44.283

它发生在我的linux环境中，但在windows上工作试试

```
sqlScript = open('script-file.sql', 'a', buffering=False) 
```

或者

```
sqlScript = open('script-file.sql', 'a', 0) 
```

# javascript - Define object defaults for JavaScript function parameters

> ID：10017961
> 
> 赞同：1
> 
> 时间：2012-04-04T19:29:01.703
> 
> 标签：javascript

I have a little class that extends the Date object in JavaScript. One method just returns the current Date in UTC.

```
Date.prototype.nowUTC = function(options) {

    var now = new Date();

    return new Date(now.getUTCFullYear(), 
                    now.getUTCMonth(), 
                    now.getUTCDate(), 
                    now.getUTCHours(), 
                    now.getUTCMinutes(), 
                    now.getUTCSeconds());
} 
```

What I'd like to do is define the options parameter as an object that will contain hours, minutes, and seconds, which will be added to the time. For example,

```
Date.prototype.nowUTC = function(options) {

    var now = new Date();

    return new Date(now.getUTCFullYear(), 
                    now.getUTCMonth(), 
                    now.getUTCDate(), 
                    now.getUTCHours() + options.hours, 
                    now.getUTCMinutes() + options.minutes, 
                    now.getUTCSeconds()) + options.seconds;
} 
```

Is there a way to pre-define these values, so I don't have to check if it's defined before adding it or set a default? (such as `function(options = {'hours' : null, 'minutes' : null, 'seconds' : null) {}`) Id prefer to handle the parmeter like - as one object - instead of passing separate params for each value.

Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:34:50.047

您可以制作一个小迭代器来检查对象属性：

```
Date.prototype.nowUTC = function(options) {

    // Object holding default values for this function
    var defaults = {
      "hours": <default>,
      "minutes": <default>,
      "seconds": <default>
    };

    // Iterate over the options and set defaults where the property isn't defined.
    for (var prop in defaults)  {
      options[prop] = options[prop] || defaults[prop];

      // Note: if options would contain some falsy values, you should check for undefined instead.
      // The above version is nicer and shorter, but would fail if, for example, 
      //    options.boolVal = false
      //    defaults.boolVal = true
      // the defaults would always overwrite the falsy input property.
      options[prop] = typeof options[prop] !== 'undefined' ? options[prop] : defaults[prop];
    }

    var now = new Date();
    // Rest of your function, using the options object....
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T18:52:59.750

`Object.assign`是将值分配给对象并使用输入扩展该对象的最简单方法。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

所以在你的情况下：

```
Date.prototype.nowUTC = function(options) {

    var defaults = {
        hours: 0,
        minutes: 0,
        seconds: 0,
    };
    var now = new Date();

    options = Object.assign(defaults, options);

    return new Date(now.getUTCFullYear(), 
                    now.getUTCMonth(), 
                    now.getUTCDate(), 
                    now.getUTCHours() + options.hours, 
                    now.getUTCMinutes() + options.minutes, 
                    now.getUTCSeconds()) + options.seconds;
} 
```

# c# - Session.Add("key",value) 和 Session["key"] = value 有什么区别？

> ID：10017962
> 
> 赞同：27
> 
> 时间：2012-04-04T19:29:09.117
> 
> 标签：c#, asp.net, session

有人可以向我解释一下：

`Session.Add("name",txtName.text);`和`Session["name"] = txtName.text;`

这是一个面试问题，我回答说两者都以 C# 中的类`key = "Value"`等格式存储数据。`Dictionary`

我是对的，还是有什么不同？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-04T20:04:19.827

查看代码`HttpSessionState`向我们展示了它们实际上是相同的。

```
public sealed class HttpSessionState : ICollection, IEnumerable
{
    private IHttpSessionState _container;
...
    public void Add(string name, object value)
    {
        this._container[name] = value;
    }

    public object this[string name]
    {
        get
        {
            return this._container[name];
        }
        set
        {
            this._container[name] = value;
        }
    }
...
} 
```

至于他们俩

> 以 C# 中的类`key = "Value"`等格式存储数据。`Dictionary`

他们实际上将结果存储在一个`IHttpSessionState`对象中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-04T19:43:29.293

您发布的两个代码片段在功能上是相同的。两者都更新（或如果不存在则创建）`Session`由键定义的某个对象。

`Session.Add("name",txtName.text);`

是相同的：

`Session["name"] = txtName.text;`

第一个是`method-based,`第二个是 string 的地方`indexer-based`。

两者都覆盖键保存的先前值。

# c# - Wpf 更改应用程序变量

> ID：10017967
> 
> 赞同：0
> 
> 时间：2012-04-04T19:29:22.330
> 
> 标签：c#, wpf, global-variables

我想声明一些应用程序级别的变量。这些变量随着不同页面上的值而变化。我声明一个这样的变量

```
<sys:String x:key="Item1">Test</sys:String> 
```

现在在我的代码中我想改变它所以代码应该是

```
Application.Current.Properties["Item1"] = "This is a test";
String t = (string)this.TryFindResource("Item1");
MessegeBox.Show(t); 
```

但是这段代码并没有改变值，它总是给出“测试”任何想法如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:39:30.577

应用程序属性与 XAML 资源无关。做这个：

```
 Resources["Item1"] = "This is a test";
    String t = (string)this.TryFindResource("Item1");
    MessageBox.Show(t); 
```

但*实际上*你应该做的是 MVVM 模式（谷歌它）

# tridion - Content Manager configuration snap-in "Could not read configuration item"

> ID：10017972
> 
> 赞同：7
> 
> 时间：2012-04-04T19:29:50.173
> 
> 标签：tridion

I am on a Tridion 2011 SP1 CM server and I’m trying to start the `SDL Tridion Content Manager configuration` MMC snap-in.

I get the following error:

> Could not read configuration item. Modification of this item is not available on this machine. Account has no permission to access the protected configuration section 'tridion.security'. Contact your system administrator.

My user is of course part of the local admins.

What is going on? how to fix it?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T19:35:13.963

内容管理器使用 .NET 加密密钥来确保敏感配置数据（如密码）的加密。默认情况下没有加密。以下用户帐户自动有权访问此加密密钥：

*   任何 Content Manager 系统帐户（包括在安装期间创建的 Content Manager 用户帐户和模拟用户帐户）
*   最初运行安装程序的用户的用户帐户

配置加密功能的使用是完全透明的，只要满足以下条件：

*   运行 SDL Tridion MMC 管理单元配置工具的用户帐户与最初运行安装程序的用户帐户相同。
*   执行各种 SDL Tridion Windows 服务的用户不会更改其默认值。

如果您想以指定用户以外的其他用户身份运行管理单元和/或 Windows 服务，则必须授予该新用户对加密密钥的访问权限。要授予此访问权限，请以最初运行安装程序的用户的用户帐户身份登录，或者以具有加密密钥访问权限的其他类似授权用户身份登录，然后执行以下操作：

1.  打开 Windows 命令提示符。
2.  转到计算机上安装了 .NET Framework 版本的目录（`C:\Windows\Microsoft.NET\Framework\`或的子目录`C:\Windows\Microsoft.NET\Framework64\`）。
3.  输入以下命令：

`aspnet_regiis -pa "TridionRsaKeyContainer" "<domain>\<account>"`where`<domain>`是该用户的域，`<account>`是用户的用户名。

# android - Android get license for application after trial period

> ID：10017975
> 
> 赞同：0
> 
> 时间：2012-04-04T19:30:04.103
> 
> 标签：android, google-play

I need to implement Android application which will be expired after few days or number of uses.
The application will be on the google market.
I can implement the check using shared preferences.
But what should I do in the application if user decides to buy the license?
Is it possible for user to pay via the market?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:35:06.240

您可以有两个不同的应用程序。一个是完整版，另一个是授权版。第一个版本将存储应用程序作为 SharedPreference 运行时的第一个日期。它也可以存储在其他地方的服务器上。之后它只会工作这么多天。在用户输入正确的产品密钥之前，第二个版本（许可版本）将无法使用。这可以通过互联网进行验证。

我不确定您为什么要这样做。Android 市场上的大多数应用程序都将提供其应用程序的免费版本，但功能有限。然后可以单独购买完整版的应用程序。该模型似乎适用于许多应用程序。

# arduino - 为射频传输编程 Arduino

> ID：10017976
> 
> 赞同：0
> 
> 时间：2012-04-04T19:30:07.273
> 
> 标签：arduino

我正在做一个项目，我通过串行端口向射频发射器发送数字。另一方面，接收器连接到 Arduino。Visual Basic 程序正在发送数字，而 Arduino 程序旨在接收这些数字并使用它们来控制电机。（我们需要电机的 PWM 信号）但是，由于某种原因，Arduino 程序没有正确接收数字，因此电机无法按要求运行。我试图从 Arduino 向 PC 发送一个号码，但我只收到垃圾。这些是我正在使用的发射器和接收器：

[http://www.alldatasheet.com/datasheet-pdf/pdf/344352/KYL/KYL-210.html](http://www.alldatasheet.com/datasheet-pdf/pdf/344352/KYL/KYL-210.html)

发送器和接收器发送的值的类型是否存在问题？或者这会是 Arduino 程序的问题吗？

这是程序：

```
int i = 0;

int MLmosfet1_4 = 10;
int MLmosfet2_3 = 12;

int MRmosfet1_4 = 2;
int MRmosfet2_3 = 5;

void setup()
{
  pinMode(MLmosfet1_4, OUTPUT);
  pinMode(MLmosfet2_3, OUTPUT);

  pinMode(MRmosfet1_4, OUTPUT);
  pinMode(MRmosfet2_3, OUTPUT);

  Serial.begin(9600); // This opens serial port 
                      // and sets data rate at 9600 bps
}

void loop()
{
  byte record[2] = {0};
  byte state = 0;
  byte currentState = 0;

  if (Serial.available()) // check if data has been sent from the computer
  {
    state = Serial.read(); // reads the most recent byte (from 0 - 255)

if(i % 2 == 0) // THIS PART CHECKS WERE TO FILL IN ARRAY SO AS TO HAVE MEMORY EFFECT
{
  record[0] = state;
}

else
{
  record[1] = state;
}

if (state>=0 && state <=63) //forward
{
  currentState = state * 4; //0 - 252

  analogWrite(MLmosfet1_4, currentState); //steady 5V 
  analogWrite(MLmosfet2_3, 0); // 0V

  analogWrite(MRmosfet1_4, currentState); //steady 5V 
  analogWrite(MRmosfet2_3, 0); // 0V
}

else if (state>=64 && state<=127) //reverse
{
  currentState = (state-64)*4; //0 - 252

  analogWrite(MLmosfet1_4, 0); // 0V
  analogWrite(MLmosfet2_3, currentState); // steady 5V

  analogWrite(MRmosfet1_4, 0); // 0V
  analogWrite(MRmosfet2_3, currentState); // steady 5V

}

else if(state>=128 && state <=191) //left
{
  currentState = (state - 118); //input will be 10 - 73

  if(i % 2 == 0)
  {
    if (record[1] >=0 && record[1] <=63) //previous action was move forward
    {
      analogWrite(MLmosfet1_4, currentState); //approx 25% duty cycle 
      analogWrite(MLmosfet2_3, 0); // 0V

      analogWrite(MRmosfet1_4, record[1]); //keeps previous forward speed 
      analogWrite(MRmosfet2_3, 0); // 0V
    }

    else //means that previous action was reverse
    {
      analogWrite(MLmosfet1_4, 0); // 0V
      analogWrite(MLmosfet2_3, currentState); // approx 25% duty cycle

      analogWrite(MRmosfet1_4, 0); // 0V
      analogWrite(MRmosfet2_3, record[1]); // keeps previous reverse speed
     }
  }

   else // i  is odd, therefore we have to read from reord[0]

   {
    if (record[0] >=0 && record[0] <=63) //previous action was move forward
    {
      analogWrite(MLmosfet1_4, currentState); //approx 25% duty cycle 
      analogWrite(MLmosfet2_3, 0); // 0V

      analogWrite(MRmosfet1_4, record[0]); //keeps previous forward speed 
      analogWrite(MRmosfet2_3, 0); // 0V
    }

    else //means that previous action was reverse
    {
      analogWrite(MLmosfet1_4, 0); // 0V
      analogWrite(MLmosfet2_3, currentState); // approx 25% duty cycle

      analogWrite(MRmosfet1_4, 0); // 0V
      analogWrite(MRmosfet2_3, record[0]); // keeps previous reverse speed
     }
   }
}

else if(state>=192 && state <=255) //right
{

  currentState = (state - 118); //input will be 10 - 73

  if(i % 2 == 0)
  {
    if (record[1] >=0 && record[1] <=63) //previous action was move forward
    {
      analogWrite(MLmosfet1_4, record[1]); //keeps previous forward speed
      analogWrite(MLmosfet2_3, 0); // 0V

      analogWrite(MRmosfet1_4, currentState); //approx 25% duty cycle   
      analogWrite(MRmosfet2_3, 0); // 0V
    }

    else //means that previous action was reverse
    {
      analogWrite(MLmosfet1_4, 0); // 0V
      analogWrite(MLmosfet2_3, record[1]); // keeps previous reverse speed

      analogWrite(MRmosfet1_4, 0); // 0V
      analogWrite(MRmosfet2_3, currentState); // approx 25% duty cycle 
     }
  }

   else // i  is odd, therefore we have to read from reord[0]
   {
    if (record[0] >=0 && record[0] <=63) //previous action was move forward
    {
      analogWrite(MLmosfet1_4, record[0]); //keeps previous forward speed  
      analogWrite(MLmosfet2_3, 0); // 0V

      analogWrite(MRmosfet1_4, currentState); //approx 25% duty cycle  
      analogWrite(MRmosfet2_3, 0); // 0V
    }

    else //means that previous action was reverse
    {
      analogWrite(MLmosfet1_4, 0); // 0V
      analogWrite(MLmosfet2_3, record[0]); // keeps previous reverse speed

      analogWrite(MRmosfet1_4, 0); // 0V
      analogWrite(MRmosfet2_3, currentState); // approx 25% duty cycle 
    }
   }
}

i++;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:40:38.217

我会使用一个简单的程序来点亮 LED，看看问题是否与电机代码无关。你也不应该检查`if (Serial.available() > 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:42:48.810

您可以通过将其中一个连接到 PC（使用 RS232 接口）和另一个连接到 arduino 引脚 0 Rx 和 Tx（使用 TTL 接口）来测试发射器和接收器。连接好后，将 arduino 连接到电源，打开 arduino IDE，并将 arduino 设置为连接到 COM 端口 1（主板上的串行接口）。只需尝试运行其中一个示例，看看它是否有效。

请注意，接口方法非常无能为力，arduino 使用 TTL，PC 使用 RS232，根据数据表，它应该通过某种跳线设置，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T06:51:43.137

我会首先在没有任何代码的情况下调试连接

将 RF RX 和 RX 都连接到电脑上，使用 putty 或任何其他终端连接到两个端口，在 TX 终端上键入一些文本，然后查看 RX 终端中的内容。

如果可行，请将 RX 连接到 arduino 并使用终端向其发送数据。如果现在您的 arduino 正在工作，那么它的 VB 有错误，如果它不工作，那么 arduino 代码有问题。

大多数情况下，这些 RS232 问题与软件中 COM 端口的波特率设置有关。确保双方设置为相同的波特率确保检查数据速率设置为 9600 的 VB 代码，就像在 arduino 上一样。

# memory - Clojure STM 内存不足

> ID：10017979
> 
> 赞同：3
> 
> 时间：2012-04-04T19:30:18.490
> 
> 标签：memory, clojure, heap-memory, multicore, stm

我有一个小程序应该使用 STM 执行并行银行转账，所以我在不同的机器上测试它，2 核和 1 核。在 2 核机器上一切正常，但在 1 核机器上，当我执行 100 万个并行事务时，会抛出 Java Out of Memory 错误。

错误是以下“AWT-EventQueue-0” java.lang.OutOfMemoryError: Java heap space

此外，我有一个相同程序的 Java 同步版本，它可以工作，即使速度较慢，它也可以达到一百万笔交易。

我可以做些什么来让我的 Clojure 应用程序在 1 核机器上工作？恐怕垃圾收集器无法处理这么多 Refs ......你怎么看？

非常感谢你的帮助！

**更新：** 它现在可以工作了，我做到了`java -Xmx1000m -jar myprog.jar`并且工作得很好！

我不知道可以增加 JVM 的堆大小，而这正是我的问题。非常感谢“sw1nn”的精彩评论；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:27:07.433

您还可以将 jvm-opts 添加到您的 leiningen project.clj 中，如下所示：

```
:jvm-opts ["-Xmx1500m"] 
```

在 leiningen 运行程序时指定它。（如测试）

# jquery - JQuery 和 Ajax.BeginForm() 两次发布相同的数据

> ID：10017980
> 
> 赞同：13
> 
> 时间：2012-04-04T19:30:20.313
> 
> 标签：jquery, ajax.beginform

好的，我是一个完全的网络新手，但我必须承认我现在完全被迷住了。这是我的问题：

我有一个带有 MVCContrib 网格的页面和一个“添加帐户”链接，该链接会显示一个包装在 JQuery 对话框中的 Ajax 表单。当我第一次完成工作流程时，一切都很好。我可以通过 JQuery / Ajax 添加一个新项目并刷新网格（所以我认为）。但是，当我第二次尝试添加表单时，始终会提交第一个表单中的数据。我已经研究这个问题太久了，必须承认我完全被困住了。顺便说一句 - 我确定我这样做完全错误，所以请随时提出更好的建议。

这是表格：

```
@using (Ajax.BeginForm("SaveCheckAccount", "UserManagement", null, new AjaxOptions { OnSuccess = "onAccountAdded", OnFailure = "onAccountAddedFailed"}, new { id = "accountDetails" }))
{
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.Id)
    @Html.HiddenFor(model => model.version)
    @Html.HiddenFor(model => model.User_Id)
    @Html.HiddenFor(model => model.IsDefault)        
    <table>
        <tr>
            <td>
                Account Number
            </td>
            <td>
                @Html.TextBoxFor(model => model.AccountNumber)
                @Html.ValidationMessageFor(model => model.AccountNumber, "*")
            </td>
        </tr>
        <tr>
            <td>
                Routing Number
            </td>
            <td>
                @Html.TextBoxFor(model => model.RoutingNumber)
                @Html.ValidationMessageFor(model => model.RoutingNumber, "*")
            </td>
        </tr>
        <tr>
            <td>
                Account Type
            </td>
            <td>
                @Html.DropDownListFor(model => model.AccountType_Id, new SelectList(@accountTypes, "ID", "Name", Model.AccountType_Id))
                @Html.ValidationMessageFor(model => model.CheckAccountType)
                @Html.ValidationMessageFor(model => model.AccountType_Id, "*")
            </td>
        </tr>
        <tr>
            <td>
                Bank Name
            </td>
            <td>
                @Html.TextBoxFor(model => model.BankName)
                @Html.ValidationMessageFor(model => model.BankName, "*")
            </td>
        </tr>
        <tr>
            <td>
                Account Name
            </td>
            <td>
                @Html.TextBoxFor(model => model.AccountName)
                @Html.ValidationMessageFor(model => model.AccountName, "*")
            </td>
        </tr>
    </table>   
}

<script type="text/javascript">
    $.ajaxSetup({ cache: false });
</script> 
```

此 javascript 位于 bank.js 文件中

```
function BindCommands(createUrl) {

      $("#modalAdd").live("click", function (e) {
          var dialogBox = $("<div>");
          e.preventDefault();
          $(dialogBox).dialog({
              autoOpen: false,
              resizable: false,
              title: 'Create Account',
              modal: true,
              show: { effect: "blind", duration: 50 },
              hide: { effect: "blind", duration: 50 },
              open: function (event, ui) {
                  $.ajax(
                      {
                          type: "Get",                          
                          url: createUrl,
                          success: function (result) {
                              $(dialogBox).html(result);
                          }
                      });
              },

              buttons: {
                  Save: function () {
                      $("#accountDetails").submit();
                      $(this).dialog('close');                      
                  },
                  Cancel: function () {
                      $(this).dialog("close");
                  }
              }
          });
          $(dialogBox).dialog('open');
      });
  }

  function onAccountAdded(data, status, xhr) {      
      $("#accounts-grid").html(data);
  };

  function onAccountAddedFailed(data, status, xhr) {
      alert("Failed");      
  }; 
```

for 最初是通过单击此视图上的添加链接来呈现的：

```
<script type="text/javascript">
    $.ajaxSetup({cache:false});
    $(document).ready(function() {
        var createUrl = '@Url.Action("NewBankAccountDetails", "UserManagement", new {userId=@Model.Id})';
        BindCommands(createUrl);
    });

</script>       
@if (Model != null && Model.Id > 0)
{

    <tr>
        <td class="header" colspan="2">
            User Accounts
        </td>
    </tr>
    <tr>
        <td>
            <a href="#" id="modalAdd">Add Account</a>
        </td>
    </tr>

    Html.RenderPartial("_BankAccountGrid", Model.CheckAccounts);
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-18T10:16:20.813

我遇到了同样的问题并将头撞在墙上，直到我注意到以下脚本被包含两次：

```
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script> 
```

我在我的包中设置了它的脚本，并且视图模板也包含了它，这导致了 ajax 表单的双重发布。

希望它有所帮助，如果不是双倍的赏金：-P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-05T21:40:39.823

我今天遇到了同样的问题。Ben 的回答为我提供了线索，但我的问题并不像`jquery.unobtrusive-ajax.js`在 html 源代码中看到两次那么明显。我正在将几个标准视图转换为部分视图，所以我有一个返回类型为的方法`ActionResult`正在使用该`View`方法返回一个类型`ViewResult`：

```
public ActionResult CreateView()
{
    var model = new CreateViewModel();
    return View("Create", model);
} 
```

在转换为部分视图的过程中，我创建了一个新的 .cshtml 视图文件，名为`_Create.cshtml`并将控制器方法修改为：

```
public ActionResult CreateView()
{
    var model = new CreateViewModel();
    return View("_Create", model);
} 
```

此时，我在 _Create 局部视图中遇到了来自 ajax 表单的双重发布。解决方案是使用该`PartialView`方法返回一个类型`PartialViewResult`：

```
public ActionResult CreateView()
{
    var model = new CreateViewModel();
    return PartialView("_Create", model);
} 
```

很难发现，因为除了 ajax 表单的双重发布之外，一切都运行良好，因为`ViewResult`和`PartialViewResult`都是`ActionResult`s 的有效类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T21:07:44.167

我知道这是一个非常古老的问题，但我今天遇到了同样的问题。我正在添加我现在找到的解决方案，以防其他人遇到这个问题。如果您正在打开一个创建表单的对话框或页面，那么当您关闭该表单时（我认为 OP 正在这样做），那么与该表单相关的事件实际上并没有被删除。如果您使用的是 jQuery，那么我发现如果您在实际从 DOM 中删除表单之前调用 $('#form').remove() ，那么这些事件将被删除，并且您不会多次调用该操作。希望这可以帮助。

# json - 如何解析我得到的 Json 字符串作为响应以将数据分离并存储在不同的变量中？

> ID：10017986
> 
> 赞同：0
> 
> 时间：2012-04-04T19:30:46.727
> 
> 标签：json, windows-phone-7

{"OFFERS":[{"OFFER_ID":"490","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/19007012.JPG","OFFER":"清仓库存"},{"OFFER_ID ":"488","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/36911135.JPG","OFFER":"最高 20% 折扣"},{"OFFER_ID":"487"," OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/19373615.JPG","OFFER":"最高 40% 折扣"},{"OFFER_ID":"486","OFFER_IMAGE":"http:// /www.discountbox.in/DiscountBoxUpload/16587130.JPG","OFFER":"特别折扣"},{"OFFER_ID":"485","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/ 56376547.JPG","OFFER":"最高 10% 折扣"},{"OFFER_ID":"484","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/20302235.JPG","OFFER":"Free Eye测试"},{"OFFER_ID":"483","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/14323344.JPG","OFFER":"Best Special Ra"},{"OFFER_ID" :"482","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/19790443.JPG","OFFER":"10% 折扣"},{"OFFER_ID":"481","OFFER_IMAGE ":"http://www.discountbox.in/DiscountBoxUpload/13783976.JPG","OFFER":"Flat 20% Off"},{"OFFER_ID":"480","OFFER_IMAGE":"http:// www.discountbox。in/DiscountBoxUpload/77105375.jpg","OFFER":"Flat 20% Off"},{"OFFER_ID":"479","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/91484956.jpg ","OFFER":"最高 50% 折扣"},{"OFFER_ID":"478","OFFER_IMAGE":"http://www.discountbox.in/DiscountBoxUpload/25738727.jpg","OFFER":"保险杠 Dhamaka"}]}

我需要将数据作为 OfferID、Image 和 Offer 存储在不同的变量中。有没有办法在 Visual Studio 2010 Express for Windows Phone 中做到这一点。请帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:15:06.890

使用[http://json2csharp.com/](http://json2csharp.com/)创建一个要反序列化的类。

```
public class OFFER
{
    public string OFFER_ID { get; set; }
    public string OFFER_IMAGE { get; set; }
    public string OFFER { get; set; }
}

public class OfferResponse
{
    public List<OFFER> OFFERS { get; set; }
} 
```

然后，使用[Json.NET](http://james.newtonking.com/pages/json-net.aspx)：

```
var deserializedProduct = JsonConvert.DeserializeObject<OfferResponse>(json); 
```

# c# - 当我有一个名为“value”的属性时，如何使用 RestSharp 反序列化？

> ID：10017988
> 
> 赞同：1
> 
> 时间：2012-04-04T19:30:52.593
> 
> 标签：c#, restsharp

我正在使用 RestSharp 反序列化一个 XML 文件，其中一些节点如下所示：

```
<element value="something" /> 
```

具有名为“值”的属性的元素不会反序列化。关于如何让 RestShap 反序列化的任何想法？

用于反序列化的对象如下：

```
public class Object
{
    public string Value { get; set; }
} 
```

请注意，XML 是从 Web 服务返回的，因此我没有将属性名称更改为其他名称的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:45:00.207

好的，我找到了解决方案。我认为这在某种程度上是一个边缘案例。

我重命名了变量

```
public string Value {get;set;} 
```

到

```
public string value {get;set;} 
```

现在它完美地反序列化了。猜测大写值仅用于 XML 元素中包含的值。

# jquery - 多个自动完成调用 - jQuery

> ID：10017991
> 
> 赞同：4
> 
> 时间：2012-04-04T19:31:24.947
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在查看 jQuery UI 自动完成文档并查看他们的带有缓存的回调示例：

```
$(function() {
    var cache = {}, lastXhr;

    $('#Field').autocomplete({
        minLength: 2,
        delay: 600,
        source: function(request, response) {
            var term = request.term;

            if( term in cache ) {
                response(cache[term]);
                return;
            }

            lastXhr = $.post('LoadData', function(data, status, xhr) {
                cache[term] = data;

                if(xhr === lastXhr) {
                    response(data);
                }
            });
        }
    });
}); 
```

该代码连接一个字段以使用自动完成功能并存储已经命中的查询缓存。使用了以下行，因此如果一个查询比另一个查询花费的时间更长，它不会替换自动完成值：

```
if(xhr === lastXhr) {
    response(data);
} 
```

如果我开始输入几个字母，然后它去服务器查询数据，然后我暂停并再次开始输入，它会触发另一次访问服务器。**如果第一个查询在第二个查询之后完成，则加载图标永远不会消失。**我认为这是因为它从不调用`response()`回调。有没有办法可以在发出第二个请求后取消第一个请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:40:25.240

你可以在发帖之前添加`lastXhr.abort()`吗？每次您开始新的请求时，这都会取消先前的请求。

```
$(function() {
    var cache = {}, lastXhr;

    $('#Field').autocomplete({
        minLength: 2,
        delay: 600,
        source: function(request, response) {
            var term = request.term;

            if( term in cache ) {
                response(cache[term]);
                return;
            }

            // Abort previous access if one is defined
            if (typeof lastXhr !== 'undefined' && lastXhr.hasOwnProperty("abort")) {
                lastXhr.abort();
            }

            lastXhr = $.post('LoadData', function(data, status, xhr) {
                cache[term] = data;

                if(xhr === lastXhr) {
                    response(data);
                    // Set to undefined, we are done:
                    // helps when deciding to abort
                    lastXhr = undefined;
                }
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:14:14.110

将最终结果与请求一起缓存。然后，您可以确保每次都调用响应回调，并且 lastData 将确保使用正确的数据，无论查询是否返回不同步。

如：

```
$(function() {
    var cache = {}, lastXhr,lastData;

    $('#Field').autocomplete({
        minLength: 2,
        delay: 600,
        source: function(request, response) {
            var term = request.term;

            if( term in cache ) {
                response(cache[term]);
                return;
            }

            lastXhr = $.post('LoadData', function(data, status, xhr) {
                cache[term] = data;

                if(xhr === lastXhr) {
                    response(data);
                    // Store the latest data
                    lastData = data;

                }
                else
                {
                    // Queries have come back out of sync - this isn't the last one
                    // but we need to call response to stop the spinner
                    response(lastData);
                }
            });
        }
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T10:36:04.607

我会做：

```
if(xhr === lastXhr) {
    response(data);
} else {
    return false;
} 
```

# c - 使用 airpcap 和 pcap 验证 CRC

> ID：10017992
> 
> 赞同：3
> 
> 时间：2012-04-04T19:31:28.553
> 
> 标签：c, pcap, wifi

我正在使用`airpcap`和`pcap`库在 C 中编写应用程序。我想问一下是否有现成的函数来检查接收到的数据包的`CRC`( `FCS`) 还是必须手动计算。在 airpcap 的控制面板中，您可以设置`FCS`过滤器。

该应用程序的功能之一将类似于现场调查。我想问一下如何列出发现的网络以免重复它们。比较`ssid`或者也许有更简单的方法；是否有一些网络独有的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:56:34.093

首先，我会检查驱动程序是否提供`OS`了无效帧。如果您的驱动程序能够提供这些无效帧 - 那么剩下的就取决于您了。检查`aircrack-ng`（或其他工具）的代码应该会给您一个想法。

*现场调查的旁注*：我将专注于识别不同的地方`BSSIDs`，这应该让您了解附近的无线电。同样`SSID`可以用于许多重叠`BSSes`（当然在某些时候你也需要它）。看看不同的 802.11 帧（从简单的开始 - 比如`Beacon Frame`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T03:25:54.357

Wireshark 具有 CRC-32 功能，可用于检查以太网和 802.11 FCS（如果可用）；查看它的以太网和 802.11 解析器。它是根据[GNU Public License, Version 2](http://www.gnu.org/licenses/gpl-2.0.html)获得许可的。

# java - 使用公共字段以外的 getter/setter 来实现二进制兼容性？

> ID：10017995
> 
> 赞同：5
> 
> 时间：2012-04-04T19:31:52.283
> 
> 标签：java, getter-setter, binary-compatibility

我正在阅读“实用 API 设计”并找到以下段落：

”*在 JVM 规范中可以找到更喜欢方法而不是字段的另一个原因。您可以将方法从一个类移动到其超类之一，并且仍然保持二进制兼容性。因此，最初作为 Dimension javax.swing 引入的方法.JComponent.getPreferredSize(Dimension d) 可以在新版本中删除并移至 Dimension java.awt.Component.getPreferredSize(Dimension d)，因为 JComponent 是 Component 的子类。**这样的变化在 JDK 1.2 中确实发生过，这只能是因为字段被方法封装了。这样的操作是不允许对字段进行的。一旦在一个类中定义了一个字段，它就必须永远留在那里以保持二进制兼容性，这是另一个原因保持字段私有***“

因为我同意使用 getter/setter 是更好的方法。但我不明白为什么将公共字段移动到父类会破坏二进制兼容性？只要它在父类中是公共的，您仍然应该能够通过子类访问该字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:34:39.023

> 一旦在类中定义了一个字段，它就必须永远留在那里以保持二进制兼容性

这将是非常令人惊讶的：

Java 语言规范 Java SE 7 版[定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.1)了非限定字段访问表达式的二进制名称，如下所示：

> 给定一个表示类 C 中的字段访问的合法表达式，引用在（可能不同的）类或接口 D 中声明的名为 f 的非常量（第 13.4.9 节）字段，我们定义字段引用的限定类型如下：
> 
> *   如果表达式是 Primary.f 的形式，那么：
>     *   如果 Primary 的编译时类型是交集类型 (§4.9) V1 & ... & Vn，则引用的限定类型是 V1。
>     *   否则，Primary 的编译时类型是引用的限定类型。

（Java 1.5 的语言规范[使用](http://docs.oracle.com/javase/specs/jls/se5.0/html/binaryComp.html#13.1)完全相同的措辞）

也就是说，字段访问表达式的二进制名称并不指声明该字段的类型，仅指我们用于访问该字段的主表达式的类型，因此无论该类型的哪个超类声明该字段，编译器都是*需要*将*相同*的字段引用发送到类文件中。

的确，当我刚刚尝试从

```
package p;

public class Super {

}

package p;

public class Sub extends Super {
    public String message;

    @Override
    public String toString() {
        return message;
    }
} 
```

到

```
package p;

public class Super {
    public String message;
}

package p;

public class Sub extends Super {
    @Override
    public String toString() {
        return message;
    }
} 
```

无需重新编译

```
package p;

public class Main {
    public static void main(String[] args) {
        Sub sub = new Sub();
        sub.message = "hello";
        System.out.println(sub);
        System.out.println(sub.message);
    }
} 
```

我仍然收到了输出

```
hello
hello 
```

, 不是`LinkageError`.

总而言之，这种说法对于 Java 7 是不正确的。对于 JDK 1.4 或更早版本可能是正确的，它在 5 年多前被宣布终止生命周期。无论哪种方式，也许您应该使用更好/更新的书？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:39:04.290

如果我没记错的话，这本书解释了这一点，但我目前手头没有。我认为这是关于 Java 语言和类文件格式（Java 以外的其他语言也使用）之间的细微差别。

在之前或之后检查一下这本书。询问您是否对该部分有更多问题。

# php - 使用 HTTP 跨网站发送数据并使用 HTTPS 接收

> ID：10017996
> 
> 赞同：3
> 
> 时间：2012-04-04T19:31:54.930
> 
> 标签：php, http, post, https

我希望将一个加密变量从 HTTP 页面上的网站发送到 HTTPS 页面上的另一个网站，我用来完成此操作的代码是：

```
$VARIABLE = 'myvariable';

function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
}

do_post_request('https://localhost/myphpfile.php', $VARIABLE); 
```

这适用于 HTTP 但不适用于 HTTPS 但我认为这只是因为我在运行 WAMP 的本地服务器上导致连接被拒绝。

无论如何，我的问题是我需要在“myphpfile”中获取传递给它的数据吗？

提前致谢！

**更新：**哇，感谢所有快速回复的家伙！就像你们中的许多人建议的那样，我刚刚快速浏览了一下 cURL 并在 Google 中发现了这个：

```
$url = 'https://localhost/myphpfile.php';

// Initialize session and set URL.
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);

// Set so curl_exec returns the result instead of outputting it.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

// Get the response and close the channel.
$response = curl_exec($ch);
curl_close($ch); 
```

我知道 VERIFYHOST 参数导致它不检查有效证书，但我想我会等到我离开测试服务器然后我会得到一个，但是请告诉我如何获取数据发送到“myphpfile”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:48:17.250

基于您的 cURL 代码，您实际上只需要在`curl_exec()`调用之前添加以下行：

```
// number of POST variables you're passing - your number will likely be different
curl_setopt($ch,CURLOPT_POST,3);
// the post variables themselves - make sure the above number matches the number
// of fields here
curl_setopt($ch,CURLOPT_POSTFIELDS,"field1=foo&field2=bar&field3=baz"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:42:12.460

您需要在您的 appache httpd.conf 文件中配置一个基于 SSL 的虚拟服务器以侦听端口 443。您还需要创建一个 SSL 证书供您的服务器使用。

网上有很多关于创建 SSL 证书和配置基于 Apache SSL 的虚拟服务器的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:39:19.937

WAMP (Windows?!?) 是否在端口 443 上侦听 SSL 连接？如果是这样，并且您将 Web 服务器配置设置为以类似于 HTTP 站点的方式正确地提供脚本，那么它应该可以正常工作。

您还需要跳过障碍以确保 PHP 正在验证服务器的证书。如果你不这样做，那么你基本上是在启用中间人攻击，从而破坏了使用 SSL 的全部意义。cURL 可以帮助解决这个问题。

# vim - 使用鼠标选择时禁用 Macvim 滚动

> ID：10017997
> 
> 赞同：4
> 
> 时间：2012-04-04T19:32:11.903
> 
> 标签：vim, macvim

我为滚动关闭设置了一个很高的值，当我使用键盘四处移动时，这对我来说非常有用。但是，每当我尝试用鼠标在偏离中心的行中选择某些内容（以便我可以复制一些文本）时，该行会跳到中心，从而阻止我选择该文本。有没有办法保持滚动设置但防止鼠标单击将光标移动到该行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:15:32.947

我不相信有一种方法可以在使用鼠标时使用 autocmd 来设置 scrolloff=0，但是您可以映射一个键以在 scrolloff=0 和 scrolloff=50（或您使用的任何值）之间切换，并且只是在选择文本之前使用该映射：

```
map <silent> <Leader>m :exec &scrolloff==0? "set scrolloff=50" : "set scrolloff=0"<CR> 
```

# facebook - 服务器端 OAuth Facebook 令牌刷新

> ID：10017999
> 
> 赞同：3
> 
> 时间：2012-04-04T19:32:22.700
> 
> 标签：facebook, coldfusion, oauth

我有一个 ColdFusion 网页，我的服务器每 x 分钟刷新一次。该脚本检查各种提要（Facebook、YouTube 和内部新闻项目）并按时间顺序构建合并提要。Facebook 部分只是从我们的 Facebook 粉丝页面中提取帖子数据。当我从我们的帐户授权我的应用程序时，我可以使用提供的 OAuth 令牌来执行此操作。

令牌每两个月或我认为的东西到期。它持续了很长一段时间，我已经读过没有办法自动授权应用程序。但是，我一直在阅读有关这些刷新令牌或其他内容的信息，但无法清楚地了解它们的工作原理。

我希望我的脚本尝试从 Facebook 获取 JSON 数据，如果令牌经常过期，请重新请求它，但似乎只是再次点击 graphs.facebook.com/oauth/authorize 链接并没有工作，因为显然您需要登录才能授权某事。

无论如何我可以在内部重新授权或刷新我的令牌服务器端。这个 Facebook 应用程序、网站和 Facebook 用户都是完全内部的。曾经有一个 Facebook 页面的 RSS 提要，但 Facebook 一直在改变东西，我再也看不到它了。

我真正需要的只是我的 Facebook 公司页面的时间线/提要中的数据。

任何解决方案或建议都会有所帮助。

**回答：**这就是我最终用来根据内容获取数据的方法。下面抓取令牌，然后使用令牌抓取提要数据并将其放入结构中。这可能不是最简洁的方式，但它确实有效。

```
<cfhttp url="https://graph.facebook.com/oauth/access_token?client_id=[CLIENTID]&client_secret=[CLIENTSECRET]&grant_type=client_credentials&redirect_uri=[URL] "   
        result="AccessHTTP" />
<cfset token = replace(AccessHTTP.Filecontent,"access_token=", "", "ALL")>

<cfhttp result="result" url="https://graph.facebook.com/[USERNAME]/posts?access_token=#token#" ></cfhttp>
<cfset Facebook = deserializeJSON(result.filecontent).data /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:35:12.667

每次我的页面加载时我都会抓住令牌..

`<cfhttp url="https://graph.facebook.com/oauth/access_token?client_id=your_client_id&client_secret=your_secret&grant_type=client_credentials" result="ThisHTTP" /> <cfset this.access_token = '#replace(ThisHTTP.Filecontent,"access_token=", "", "ALL")#'>`

///在需要时使用#this.access_token#在下面运行您的代码。///