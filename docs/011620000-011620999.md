# StackOverflow 问答 11620000-11620999

# performance - 如何减慢 MS-Access 中宏的执行速度

> ID：11620001
> 
> 赞同：3
> 
> 时间：2012-07-23T20:26:12.167
> 
> 标签：performance, vba, ms-access

我在 MS-Access 中有一个宏，它只能在一台计算机上正常运行一半的时间，但在另一台计算机上测试时，它运行 100% 的时间。

我怀疑这是因为宏运行得很快，并且在移动到下一个步骤之前没有完成一个步骤的执行。有没有办法可以在步骤之间暂停？

我的宏的步骤如下：

1.  导入数据的运行代码
2.  打开追加查询
3.  打开追加查询
4.  打开更新查询
5.  用于删除数据的 RunSQL

第一步和最后一步在两台计算机上都执行 100% 的时间，但中间步骤有时会失败而没有错误。我试图在宏之间添加这段代码以减慢它的速度。我不知道如何正确应用它，或者这个解决方案是否正确。

```
Public Function SlowMacro()
Application.Wait (Now + TimeValue("0:00:02"))
End Function 
```

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:50:52.943

如果您希望您的`SlowMacro()`函数暂停 2 秒，您可以使用 Access Web: [API: Make code go to Sleep 中的代码](http://access.mvps.org/access/api/api0021.htm)

然后我认为这应该作为你的功能。

```
Public Function SlowMacro()
    sSleep 2000
End Function 
```

这些是我链接的那个网页的关键部分。

```
Private Declare Sub sapiSleep Lib "kernel32" _
        Alias "Sleep" _
        (ByVal dwMilliseconds As Long)

Sub sSleep(lngMilliSec As Long)
    If lngMilliSec > 0 Then
        Call sapiSleep(lngMilliSec)
    End If
End Sub 
```

# rally - 拉力赛：通过网络服务拆分未完成的故事

> ID：11620002
> 
> 赞同：0
> 
> 时间：2012-07-23T20:26:16.353
> 
> 标签：rally

Rally Web 服务中是否有任何方法可以对用户故事执行拆分操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:09:15.063

当然可以编写一个 Web 服务脚本来完成 Sprint 之间未完成故事的拆分。也就是说，要在 Rally UI 中复制 Story Splitter 的功能，此处详细描述：

`http://www.rallydev.com/help/manage-unfinished-work#split user stories`

在目标迭代是什么、要移动哪些任务、更新计划状态和计划估计字段等方面，向用户提供了许多选择。

与 Scrum 领导者就有关自动分配值的适当工作协议进行访问是一个好主意，否则用户将在 UI 中做出选择，以确保团队之间的行为一致。

# c++ - 如何在c代码块中添加音频

> ID：11620010
> 
> 赞同：1
> 
> 时间：2012-07-23T20:26:49.920
> 
> 标签：c++, audio

我正在制作一个游戏节目应用程序，我想在我的程序中添加音频文件。

```
Question
User Input (answer)
If Statement 
    --correct
        --Play cheering audio clip
    --incorrect
        --Play disappoint audio clip 
```

我有一台 Windows 7 电脑，我正在使用代码块。

有什么建议么？

# c# - 如何从用户输入查询创建 XML 文件？

> ID：11620011
> 
> 赞同：0
> 
> 时间：2012-07-23T20:27:16.237
> 
> 标签：c#, .net, xml

我有查询 Oracle 的 ac# windows 窗体应用程序。我已经拥有将结果从存储在应用程序中的查询导出到 XML 的功能。我还在表单上有一个文本框，供用户输入自定义查询。我想知道如何在不事先知道字段的情况下从自定义查询结果创建 XML 文件。我无法向公众发布我的代码，但我可以在需要时提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:38:05.850

如果您将查询结果存储到`DataSet`您调用的 C# 对象`DataSet.GetXml()`中，它会返回数据集的 XML 表示。

# c# - 数据表选择返回数组索引超出范围

> ID：11620012
> 
> 赞同：1
> 
> 时间：2012-07-23T20:27:22.350
> 
> 标签：c#, silverlight

这一行：

```
searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", tableNumbers[i], fieldName[i]))[0]["VALUE"] = wildcardedSearchString; 
```

在 C# 中返回数组索引越界异常。我怎样才能写这个不抛出错误？或者，如果没有返回记录以继续执行代码，是否有另一种方法可以编写此代码？我使用带有“i”的行作为表和字段名称的增量在三个不同的表中搜索结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:35:16.353

这是不完整的，我们怎么知道`tableNumbers`和是什么？异常可能在 tableNumbers[i]、fieldName[i] 或select 的索引器处引发。`fieldName``wildcardedSearchString``[0]`

我假设选择不返回行，所以`[0]`会抛出 `IndexOutOfBounds`异常。

您可以使用 Steves 方法或使用更具可读性和功能的 Linq-To-Dataset：

```
IEnumerable<DataRow> rows = searchParamsTable.AsEnumerable()
                         .Where(r => r.Field<String>("TABLE") == tableNumbers[i] 
                                 &&  r.Field<String>("FIELD ") == fieldName[i]);
if(rows.Any())
{
    // do something with the rows, for example create a new DataTable from the result:
    DataTable tblSearch = rows.CopyToDataTable();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:31:07.757

假设您的`i`索引变量是正确的，那么您应该检查 Select 语句是否返回了任何行

```
DataRow[] rows = searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", 
                 tableNumbers[i], fieldName[i]));

if(rows.Length > 0)
   rows[0]["VALUE"] = wildcardedSearchString; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:31:16.983

您在该语句中进行了大量的数组索引，因此很难准确判断哪个超出范围。您确定`i`是 tableNumbers 和 fieldName 的有效索引吗？

尝试将语句分成单独的行，然后使用调试器找出答案。

# jquery - fadeOut，removeClass 在 addClass 后不起作用

> ID：11620016
> 
> 赞同：0
> 
> 时间：2012-07-23T20:27:52.763
> 
> 标签：jquery, json, addclass, removeclass

我有一个时事通讯注册表单，我很高兴。我在下面有这个 jQuery 脚本：

```
$(document).ready(function(){  
$('#newsletter-signup').submit(function(){  

    //setup variables  
    var form = $(this),  
    formData = form.serialize(),  
    formUrl = form.attr('action'),  
    formMethod = form.attr('method'),   
    responseMsg = $('#signup-response');  

    //show response message - waiting  
    responseMsg.hide()  
               .addClass('response-waiting')  
               .text('Please Wait...')  
               .fadeIn(200);  

    //send data to server for validation  
    $.ajax({  
        url: formUrl,  
        type: formMethod,  
        data: formData,  
        success:function(data){  

            //setup variables  
            var responseData = jQuery.parseJSON(data),   
                klass = '';  

            //response conditional  
            switch(responseData.status){  
                case 'error':  
                    klass = 'response-error';  
                break;  
                case 'success':  
                    klass = 'response-success';  
                break;    
            }  

            //show reponse message  
            responseMsg.fadeOut(200,function(){  
                $(this).removeClass('response-waiting')  
                       .addClass(klass)  
                       .text(responseData.message)  
                       .fadeIn(200,function(){  
                           //set timeout to hide response message  
                           setTimeout(function(){  
                               responseMsg.fadeOut(200,function(){  
                                   $(this).removeClass(klass);  
                               });  
                           },3000);  
                        });  
             });  
          }  
    });  

    //prevent form from submitting  
    return false;  
});  
}); 
```

如果您有兴趣，这里是我的 PHP 的一个片段（删除了数据库凭据）：

```
<?php 
if(isset($_GET['action'])&& $_GET['action'] == "signup"){  
mysql_connect(***REMOVEDforprivacy*******);  
mysql_select_db(***REMOVEDforprivacy*******);  

//sanitize data  
$email = mysql_real_escape_string($_POST['signup-email']);  

$to ='***REMOVEDforprivacy*******';
$subject = '***REMOVEDforprivacy*******';
$body = "The email address ". $email. " has been added to the email database.";
$headers = 'From: ***REMOVEDforprivacy*******' . "\r\n" .
            'Reply-To:  ***REMOVEDforprivacy*******' . "\r\n" .
            'X-Mailer:  PHP/' . phpversion();

//validate email address - check if input was empty  
if(empty($email)){  
    $status = "error";  
    $message = "You did not enter an email address!";  
}  
else if(!filter_var($email, FILTER_VALIDATE_EMAIL)){ //validate email address - check if is a valid email address  
    $status = "error";  
    $message = "You have entered an invalid email address!";  
}  
else {  
   $existingSignup = mysql_query("SELECT * FROM signups WHERE email_address='$email'");  
   if(mysql_num_rows($existingSignup) < 1){  

       $insertSignup = mysql_query("INSERT INTO signups (email_address) VALUES ('$email')");  
       if($insertSignup){  
           $status = "success";  
           $message = "You have been signed up!";
            mail($to, $subject, $body, $headers);
       }  
       else {  
           $status = "error";  
           $message = "Oops, There has been a technical error!";  
       }  
    }  
    else {  
        $status = "error";  
        $message = "Looks like you have already registered this email address with us.  Thank you for your support!";  
    }  
}  

//return json response  
$data = array(  
    'status' => $status,  
    'message' => $message  
);  

echo json_encode($data);  

exit;  
}  

?> 
```

一切顺利，直到这里：

```
//show reponse message  
            responseMsg.fadeOut(200,function(){  
                $(this).removeClass('response-waiting')  
                       .addClass(klass)  
                       .text(responseData.message)  
                       .fadeIn(200,function(){  
                           //set timeout to hide response message  
                           setTimeout(function(){  
                               responseMsg.fadeOut(200,function(){  
                                   $(this).removeClass(klass);  
                               });  
                           },3000);  
                        });  
             }); 
```

我不明白这里有什么问题。但是，当我尝试删除大部分语法并仅使用时，语法*似乎很好*`responseMsg.fadeOut(200);`responseMsg 不会褪色（因此您可以忘记它删除类并添加新类）。我已经用 Firebug 对此进行了检查，并且 POST 响应确实显示了正确的错误并且正在返回成功消息......（并且确实检查了我的数据库，添加了条目并发送了一封警报电子邮件）......所以除了花哨的 schnazzy JQuery 效果外，一切都在工作。我短暂地认为我与页面上的另一个元素发生了 JQuery 冲突，所以我删除了它，并且没有任何变化。我尝试使用 $.noconflict()、$.noconflict(true)，并用 JQuery 替换所有 $ 实例（但是，页面上的其他项目无论如何都不冲突）。我尝试删除添加“响应等待”类的调用，并在数据的 JSON 解析后添加响应消息类，但这不起作用。[这个很棒](http://net.tutsplus.com/tutorials/javascript-ajax/building-a-sleek-ajax-signup-form/comment-page-1/#comments)的教程，所以我不知道为什么它不起作用。有人有线索吗？

**更新**

这里的 FWIW 是一个[JSFiddle](http://jsfiddle.net/k8nhR/1/)，尽管如果没有 PHP DB 的东西它绝对无法工作......不知道我该如何解决这个问题，伙计们......

**更新** 让它工作，将我的 PHP 代码放在我的 html 标题上方的愚蠢错误......一旦我被允许，将作为答案发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:56:23.483

我的意思是你应该减少代码来复制你的问题。一般来说，你会找出你的问题。这很好用（通过单击触发事件来模拟表单提交）：

[http://jsfiddle.net/k8nhR/3/](http://jsfiddle.net/k8nhR/3/)

```
$(document).ready(function(){  
    $('#signup-button').click(function(){  

        responseMsg = $("#signup-response");
                 //show response message - waiting  
         responseMsg.hide()  
                    .addClass('response-waiting')  
                    .text('Please Wait...')  
                    .fadeIn(200);  

        var responseData =  { status : "success", message: "success message"};
                var klass = '';

                //response conditional  
                switch(responseData.status){  
                    case 'error':  
                        klass = 'response-error';  
                    break;  
                    case 'success':  
                        klass = 'response-success';  
                    break;  
                }  

                //show reponse message  
                responseMsg.fadeOut(200,function(){  
                   $(this).removeClass('response-waiting')  
                          .addClass(klass)  
                          .text(responseData.message)  
                          .fadeIn(200,function(){  
                              //set timeout to hide response message  
                              setTimeout(function(){  
                                  responseMsg.fadeOut(200,function(){  
                                      $(this).removeClass(klass);  

                                  });  
                               },3000)  
                           });  
                });   
      });  
    }); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:45:23.727

您需要在成功函数之前声明 Klass 变量，以便回调函数可以检索它，而不是使用 setTimeout，只需使用 .delay()

# ios - iOS客户端服务器方法

> ID：11620017
> 
> 赞同：2
> 
> 时间：2012-07-23T20:27:53.253
> 
> 标签：ios, architecture, client-server

我熟悉用于其他平台上的点对点或客户端/服务器消息传递的 SOAP 和 Web 服务。消息传递的 Apple 等价物是什么？

我正在尝试组建一个应用程序服务器来管理协作工作环境。局域网上平均有 200 个，最多有 1000 个移动客户端。例如，一台 Mac 和 200 部 iPhone。我计划使用 Apple 的 Enteprise 方法将我们的私人（商业）应用程序分发给我们的每个 iPhone 客户。

服务器可以将配置设置推送到每个客户端。服务器还将向客户端推送少量数据。客户端将在本地对此数据执行任务，并最终向服务器报告状态。客户端可以从服务器请求更多的数据集。这些交换可以异步管理。

还需要对关键流程进行同步交换。这很少见，但这是必需的。

需要交换的数据相当小。这些客户端/服务器进程是时间相关的，因此性能是关键要求。

网络不会被共享，但需要被严格控制（并且快速）。例如，如果有令人信服的理由，它可以是 Bonjour。

我正在寻找有关使用哪些 Mac/iOS SDK 组件的建议。请将第 3 方软件排除在此讨论之外。在考虑外部软件之前，我必须知道 Apple 已经提供了什么以及存在哪些差距。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:42:09.213

如果您只打算使用 Mac 和 iOS 产品，那么 Bonjour 确实是您最好的选择。有很多本地方式可以以字节或对象形式传输数据。

WWDC 2012 上有几个很棒的视频展示了新的 Xcode 可以做什么来创建客户端和服务器应用程序。它在 NDA 下，但您可能想看看那里：[https](https://developer.apple.com/videos/wwdc/2012/) ://developer.apple.com/videos/wwdc/2012/ 。

你还说你不想要第三方，有什么特别的原因吗？您会在 Bonjour 之上使用开源层吗？

# html - Firefox 中的 CSS：Div 没有出现在正确的位置

> ID：11620020
> 
> 赞同：1
> 
> 时间：2012-07-23T20:28:06.207
> 
> 标签：html, css, firefox

我正在设计一个网页：[http ://trackstudent.pt/index.php](http://trackstudent.pt/index.php)

我遇到了一个我无法修复的错误，如果您在检查链接后注意到，`<p></p>`它被推到了右边，我不知道为什么。所有的 div 都有 margin:0, padding:0 并且有足够的空间使该元素适合该空间。

令人惊讶的是，在第二行内容中，这件事并没有发生。

我有来自 1kbgrid 的 css（960px 网格，12 列）：

```
// Grid Cell (column)
.column {
    margin: 5px 10px;
    overflow: hidden;
    float: left;
    display: inline;
}

// Grid row
.row {
    width:960px;
    margin: 0px auto;
    overflow: hidden;
}

// Nested rows
.row .row {
    margin: 0px -10px;
    width: auto;
    display: inline-block;
} 
```

在 HTML 中，我有：

```
<body> -> width: 100%
<div id="container"> -> width: 100%
<div id="mainWrapper"> -> width: 960px
<section class="row"> -> width: 960px 
```

编辑：明确：两者；在#wrapperMain 中它有效！但我仍然不明白为什么会这样，因为标题也有 height:40px 和徽标，所以徽标扩展中不应该有任何区域通过标题。任何人都可以提供见解？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:32:03.747

它来自浮动标志。只需添加以下 CSS：

```
#wrapperHeader {
 overflow:hidden; /* Forces header to contain elements */
} 
```

或者：

```
#wrapperMain {
 clear:both; /* Pushes wrapper down until it's past bottom of header elements */
} 
```

# gwt - 使用 GWT 请求工厂时如何访问 Servlet 上下文（在服务器上）？

> ID：11620024
> 
> 赞同：1
> 
> 时间：2012-07-23T20:28:29.010
> 
> 标签：gwt, requestfactory

我需要访问通常在 servlet 中可用的 ServletContext 对象，以便我可以调用如下方法：

```
String fullPath = getServletContext().getRealPath("images/file.jpg"); 
```

我确定有一些内置的东西，我只需要弄清楚它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:29:38.073

您需要做的就是：

```
String fullPath = RequestFactoryServlet.getThreadLocalServletContext().getRealPath("images/file.jpg"); 
```

# facebook - Facebook“点赞”请求参数缺失

> ID：11620025
> 
> 赞同：2
> 
> 时间：2012-07-23T20:28:30.217
> 
> 标签：facebook, facebook-like

我们有一个赞按钮。我们使用以下内容填充 data-href：http: [//foo.com/stuff/1?tracking=member1](http://foo.com/stuff/1?tracking=member1)

当 facebook 从我们的页面中抓取“og”元标记中定义的标题和图像时，它会忽略 data-href 中的原始请求参数。这意味着我们不能根据推荐成员自定义标题和图像，但这正是我们需要做的。

我们已经尝试了 data-href 和 og:url 字段的各种值组合，但均无济于事。有没有人有任何想法？

在头部标签内：

```
<meta content="This title should be based on the referring member" property="og:title"></meta>
<meta content="Content would go here" property="og:description"></meta>
<meta content="http://foo.com/stuff/1" property="og:url"></meta>
<meta content="http://foo.com/images/hello.png" property="og:image"></meta>
<meta content="Foolandia" property="og:site_name"></meta> 
```

然后是我们的like按钮标签：

```
<fb:like data-action="like" data-href="http://foo.com/stuff/1" data-ref="member1" data-send="false" data-show-faces="false" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:16:28.950

因此，经过多次排列和组合，这就是我们能够解决这个问题的方法：

我们将成员 ID 添加到 data-href (http://foo.com/stuff/1?tracking=member1) 并从我们的元标记中删除了 og:url。Facebook 现在使用 url 抓取我们的页面：http: [//foo.com/stuff/1?tracking](http://foo.com/stuff/1?tracking=member1) =member1 ，我们可以根据推荐成员自定义在 facebook 上显示的标题和图像。

感谢所有的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:56:48.427

您确定`og:url`您的 URL 返回给 Facebook 爬虫的标记值与 中的相同`data-href`吗？facebook 如果在抓取的页面上找到规范元标记或 og:url 标记，则会丢弃元数据并从规范 URL 检索元数据。

[您可以使用Facebook 的调试工具](https://developers.facebook.com/tools/debug)测试 facebook 检测到的 URL

# javascript - 带有悬停图像的可滚动 div（溢出：隐藏）

> ID：11620030
> 
> 赞同：0
> 
> 时间：2012-07-23T20:29:05.110
> 
> 标签：javascript, css, hover, overflow

我有一个带有 overflow:auto 的 div 和一个里面的表格。div 根据需要创建一个垂直滚动条。但是，我希望每一行都有一个预览悬停状态。这意味着这个悬停状态 div 必须超出包含 div 的边界。如果溢出已经设置为隐藏我的内容，我将如何做到这一点...... z-index 不会让我逃脱父级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:59:01.403

我最近解决了一个类似的问题，这应该可以帮助你：

[https://stackoverflow.com/a/13383906/1063287](https://stackoverflow.com/a/13383906/1063287)

还可以在这里查看相关的 jsfiddle：

[http://jsfiddle.net/rwone/eeaAr/](http://jsfiddle.net/rwone/eeaAr/)

**html**

```
<div id="wrapper">
<div id ="hbar_one"></div>
<div id="hbar_two"></div>
<div id="container_a">
<div id="container_b">
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
some amazing html
</div>
</div>
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
more amazing html
</div>
</div>
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
even more amazing html
</div>
</div>
</div>
</div>
<div id="hbar_three"></div>
<div id="hbar_four"></div>
</div> 
```

**css**

```
#wrapper {
width: 300px;   
}
#hbar_one {
background: #cc0000;   
height: 50px;
}

#hbar_two {
background: #ffcc00;   
height: 50px;
}

#container_b {
height: 100px;
overflow-y: auto;
}

.hidden_db_data_div {
display: none;
background: #00AFF0;
width: 120px;
height: 150px;
color: red;
position:absolute;
overflow: hidden; 
z-index: 999;  
}

img {
width: 50px;
height: 50px;
}

.magic {
display: inline;
}

#container_a { position:relative; }

#hbar_three {
background: #cccccc;   
height: 50px;
}

#hbar_four {
background: #000000;   
height: 50px;
} 
```

**脚本**

```
$(".magic").hover(
function () {
$(this)
.find('.hidden_db_data_div')
.css({'left':$(this).position().left+20 + "px", 'top':'-20px'})
.fadeIn(200);
},
function() { 
$(this)
.find('.hidden_db_data_div')
.fadeOut(100);
}                
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:55:11.670

使用`position:absolute;`并将 设置`z-index`为您希望溢出其容器的 div 的可见值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:12:12.700

既然是垂直滚动条，那么可以设置成overflow-y:scroll，不设置水平溢出。然后只需确保您的图像仅离开水平边界（而不是垂直边界）。

下一次，创建一个小提琴： http: [//jsfiddle.net/](http://jsfiddle.net/) ，我们可以帮助你更快:)

# c++ - C++/SFML 窗口创建失败

> ID：11620032
> 
> 赞同：5
> 
> 时间：2012-07-23T20:29:16.650
> 
> 标签：c++, visual-studio-2010, window, sfml

[好吧，我尝试按照教程](http://www.sfml-dev.org/tutorials/1.6/window-window.php)中所示做所有事情，但它只显示控制台，仅此而已。试过这个时钟程序，它工作得很好。我连接了所有库，并复制了所有 .dll 文件，所以真的不知道我错在哪里。请告诉我如何显示使其显示窗口。我正在使用 VS2010、SFML 1.6，这是我的代码。

```
 #include <SFML\Window.hpp>

    int main()
    {

         sf::Window App(sf::VideoMode(640, 480, 32), "wut");

         while (App.IsOpened())
         {
              sf::Event Event;
              while (App.GetEvent(Event))
              {
               // Window closed
               if (Event.Type == sf::Event::Closed)
                   App.Close();

               // Escape key pressed
               if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::Escape))
                  App.Close();        
               };
              App.Display();

          }
     }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:03:17.097

尝试这个：

```
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>

int main()
{
    // Create the main rendering window
    sf::RenderWindow App(sf::VideoMode(800, 600, 32), "SFML Graphics");

    // Start game loop
    while (App.IsOpened())
    {
        // Process events
        sf::Event Event;
        while (App.GetEvent(Event))
        {
            // Close window : exit
            if (Event.Type == sf::Event::Closed)
                App.Close();
        }

        // Clear the screen (fill it with black color)
        App.Clear();

        // Display window contents on screen
        App.Display();
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:06:32.597

我最近一直在使用 SFML。按顺序尝试这些建议，保留之前的每个更改：

```
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp> 
```

它应该是 sf::RenderWindow，而不是 sf::Window

它不应该是`while (App.isOpen())`IsOpened()

如果您的 RenderWindow 上似乎没有“isOpen”功能，您可能没有 SFML2，我建议您立即获取。

您是否为您的计算机重建了库，或者您是否只是尝试使用它们提供的 .dll？您可能需要使用 Cmake 重建它们，无论您的编译器是什么。我知道我做到了。

最后，我还建议使用最新的 Code::Blocks 作为您的 IDE，但我想只能在不得已的情况下切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:33:57.717

你链接到 sfml-main 库吗？如果没有，请尝试，如果失败，请尝试执行[WinMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)而不是 main() 函数。此外，请确保 Visual Studio 没有将您的项目设置为控制台程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-02T16:37:24.327

老问题..但这是我的回答：当你说；*“我正在使用 VS2010，SFML 1.6...”*，在下载页面中说对于 Windows 中的 sfml-1.6，可以使用 VScode 2005 和 VScode 2009。尝试使用不同版本的 Vscode（并链接所有内容测试），看看它是否有效。

（对我来说，您的代码对于 SFML-1.6 看起来不错，所以我认为这不是问题）

# linux - 线程安全的搜索和添加

> ID：11620034
> 
> 赞同：1
> 
> 时间：2012-07-23T20:29:22.833
> 
> 标签：linux, thread-safety, linked-list, kernel

我需要能够执行以下操作：

1.  搜索一个链表。
2.  将新节点添加到列表中，以防找不到。
3.  是线程安全的并使用 rwlock ，因为它主要读取列表。

我遇到的问题是，当我从 read_lock 提升到 write_lock 时，我需要再次搜索列表，以确保在执行持有 read_lock 的列表搜索时其他线程没有等待 write_lock。

是否有不同的方法可以在不进行双重列表搜索（可能是某种 seq_lock ）的情况下实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:40:24.103

将链表转换为排序的链表。当需要添加新节点时，您可以通过仅检查两个节点而不是搜索整个列表来再次检查其他写入者是否在您获取锁时添加了等效节点。您将在每个节点插入上花费更多时间，因为您需要确定新节点的排序顺序，但您无需搜索整个列表即可节省时间。总的来说，您可能会节省很多时间。

# javascript - 替换整个文档 JQuery 中的字符

> ID：11620038
> 
> 赞同：3
> 
> 时间：2012-07-23T20:29:58.463
> 
> 标签：javascript, jquery

我已经尝试了许多不同的方法，但没有任何效果。现在我有：

```
 $(document).ready(function () {
    $(".page").click(function () {

        var html = $(document).html();

        html.replace("[", "<");

        alert("here");
    });

 }); 
```

这拒绝工作。例如，它也不允许我做任何 Jquery exmaples 的事情

```
 $("[").replaceWith("<"); 
```

在我看来， .replace 甚至不在 jQuery 中，尽管很多示例似乎都将它作为查询的一部分。有什么建议么？这开始让我感到沮丧。我试过传入一个特定的 div，但它仍然拒绝工作。有任何想法吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:33:38.963

这是你想要的吗？

```
$(document.documentElement).html(function(i,val){
    return val.replace(/\[/g,'<');
}); 
```

[**document**](https://developer.mozilla.org/en/DOM/document)本身不是一个`DOM Element`，你应该使用[**document.documentElement**](https://developer.mozilla.org/en/DOM/document.documentElement)来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:47:05.507

在我看来，您正在从 html 创建一个变量，但没有将其发送回页面：

```
$(document).ready(function () {
    //EDIT:
    // $(".page").click(function () { changed to a bind type event handler to
    // prevent loss of interactivity. .on() requires jQuery 1.7+ I believe.
    $(".page").on('click', function () {   
           var htmlString = $('body').html();

            // To replace ALL occurrences you probably want to use a regular expression
            // htmlString.replace(/\[/g, "<");
            htmlString.replace("[", "<");

            //Validate the string is being manipulated
            alert(htmlString);

            // Overwrite the original html
            $('body').html(htmlString);
    });
}); 
```

请记住，我没有对此进行测试，但如果我没记错的话，jQuery 中的 .html() 方法用于获取/设置不一定是直接操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:48:21.617

生产线`html.replace("[", "<");`没有做任何事情

`html`是一个字符串，所以你正在替换字符串而不对输出做任何事情。

```
var foo = html.replace(/\[/g, "<");
$(document).html(foo); 
```

# c# - 你能用 localStorage 中的值初始化 Html.TextBoxFor 吗？

> ID：11620040
> 
> 赞同：0
> 
> 时间：2012-07-23T20:30:08.637
> 
> 标签：c#, asp.net, html, local-storage, html.textboxfor

你能用 HTML5 localStorage 中的值初始化 Html.TextBoxFor 的值吗？

我知道你可以用一个字符串来初始化。

```
@Html.TextBoxFor(m=>m.name, new {@Value="John Doe"}) 
```

如果我想在 localStorage 中使用字符串而不是“John Doe”怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:31:40.050

你不能，你必须使用 javascript，或者创建一个为你输出 javascript 的助手。

如果您创建帮助程序，您可以使用 jquery：

```
var localStorageKey = "yourkey";
$("#textboxid").val(window.localStorage[localStorageKey]); 
```

# .htaccess - .htaccess 重写直接文件访问

> ID：11620041
> 
> 赞同：0
> 
> 时间：2012-07-23T20:30:12.450
> 
> 标签：.htaccess, mod-rewrite

我一直在寻找，我找不到适合我的解决方案。

我正在尝试重定向[http://example.com/files/file.ext](http://example.com/files/file.ext) -> [http://example.com/users/documents/file.ext](http://example.com/users/documents/file.ext)

当我直接进入文件时，无论我尝试什么，它都会下载它。该文件的 GET 请求也没有显示在我的任何 apache 日志中。我已经登录调试。

[编辑] 我要下载的文件有多种类型，包括 ppt、pdf、xls、zip、doc 等。我想将文件名重写到新 URI 的末尾。我也在使用 CodeIgniter，所以 /users/documents/ 是一个 RESTy uri。

有人有解决办法吗？

这是我的 .htaccess 文件：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    Options +FollowSymLinks
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php

    <IfModule mod_php5.c>
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?/$1 [N]

        RewriteCond %{REQUEST_URI} ^/files/ [NC]
        RewriteRule ^/files/(.*)$ /users/documents/$1 [L,R=301]

    </IfModule>

    <IfModule !mod_php5.c>
        RewriteRule ^(.*)$ index.php?/$1 [L]
    </IfModule>

</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:10:21.410

如果这是在您的 htaccess 文件中，请尝试替换此行：

```
RewriteRule ^/files/(.*)$ /users/documents/$1 [L,R=301] 
```

和：

```
RewriteRule ^/?files/(.*)$ /users/documents/$1 [L,R=301] 
```

并将条件和规则放在任何`index.php`路由规则之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:42:02.500

我去了[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)并测试了我的重写规则。它说 RewriteCond 没有匹配任何东西，但是当我删除它匹配的规则时。

工作规则：

```
RewriteRule ^/?files/(.*)$ /users/documents/$1 [L,R=301] 
```

将其移至 htaccess 文件的顶部可解决此问题。

# ruby-on-rails - 在 nginx 上托管多个网站，类似于 apache

> ID：11620053
> 
> 赞同：1
> 
> 时间：2012-07-23T20:31:06.587
> 
> 标签：ruby-on-rails, ruby, deployment, nginx

我正在尝试在类似于 apache 的 nginx 中托管多个网站。在 apache 中，我们有一个名为 htdocs 的文件夹。我们将目录和文件放在 htdocs 中，如果 URL 类似于

```
www.example.com 
```

然后我们可以访问 htdocs 文件夹中的目录和文件

`www.example.com/exampledir1`和`www.example.com/exampledir2`

我想对 nginx 做同样的事情。可能吗。我的公司有一台服务器，它有一个静态 IP。我已经在上面安装了 nginx，默认情况下我在上面托管了一个 rails 应用程序，`nginx.conf`文件中包含以下几行

```
server {
  listen 80;
  server_name mycomp.does-it.net;
  root /var/www/mysamplerails/public;
  passenger_enabled on;
  rails_env development;
} 
```

如果我访问 url “mycomp.does-it.net”，我可以访问这个网站

现在我想做的是拥有另一个rails应用程序并`mycomp.does-it.net/mysecondrailsapp`以root身份访问它。

我用谷歌搜索了很多，我最终没有找到。我来自 apache 背景，这些是我在 nginx 中的第一次尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:43:42.773

使用**passenger_base_uri**选项。请参阅文档：[部署到子 URI](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_rack_to_sub_uri)

# windows-phone-7 - 单击表单代码时如何禁用按钮背光

> ID：11620057
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:31:19.183
> 
> 标签：windows-phone-7

当我点击它时，我必须禁用（表单代码）按钮背光。默认有白色背光。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:37:20.507

不，这是不可能的。WP7 硬件规范中没有任何内容甚至规定了这种背光的存在。

# c# - 关于列表排序和委托和 lambda 表达式 Func 的东西

> ID：11620060
> 
> 赞同：6
> 
> 时间：2012-07-23T20:31:30.243
> 
> 标签：c#

```
List<bool> test = new List<bool>();
test.Sort(new Func<bool, bool, int>((b1, b2) => 1)); 
```

我错过了什么？

> 错误 2 参数 1：无法从 'System.Func' 转换为 'System.Collections.Generic.IComparer'
> 
> 错误 1 ​​'System.Collections.Generic.List.Sort(System.Collections.Generic.IComparer)' 的最佳重载方法匹配有一些无效参数

当我有

```
private int func(bool b1, bool b2)
{
    return 1;
}

private void something()
{
    List<bool> test = new List<bool>();
    test.Sort(func);
} 
```

它工作正常。他们不是一回事吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T20:33:37.477

Func 是错误的委托类型。您可以使用以下任何一种：

```
test.Sort((b1, b2) => 1);
test.Sort(new Comparison<bool>((b1, b2) => 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:36:46.857

因为你需要传递它 a `System.Comparison<T>`，而不是 a `Func<something>`。放下`new Func...`它，它应该可以工作。

```
test.Sort((b1, b2) => !b1 && b2 ? -1 : b1 && !b2 ? +1 : 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:37:46.250

您也可以尝试：

```
test.Sort( delegate(bool b1,bool b2){return 1;}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:40:31.140

去除那个`new Func<...>`

```
var test = new List<bool>();
test.Sort((a, b) => 1); 
```

# jquery - jQuery 对话框 - 如何为每个对话框使用不同的样式？

> ID：11620067
> 
> 赞同：2
> 
> 时间：2012-07-23T20:32:03.577
> 
> 标签：jquery, css, jquery-ui, jquery-ui-dialog, jquery-dialog

我将 jQuery UI 对话框用于网站上的不同对话框。现在我想知道是否有一种简单的方法可以为不同的对话框使用不同的样式？

例如，像“真正删除......”这样的警报应该与其他消息有不同的风格......

现在，对话框中使用了一些类：

```
<div id="dialog-confirm" title="Title of dialog">Text of dialog</div> 
```

但是，实际样式应用于`.ui-widget-header`，~~我在源文本中的任何地方都找不到，所以我猜 jQuery 会在某些时候替换它，这是真的吗？~~

编辑：来自 docs.jquery.com：

```
Sample markup with jQuery UI CSS Framework classes

<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable">
   <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
      <span id="ui-dialog-title-dialog" class="ui-dialog-title">Dialog title</span>
      <a class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
   </div>
   <div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
      <p>Dialog content goes here.</p>
   </div>
</div>
Note: This is a sample of markup generated by the dialog plugin, not markup you should use to create a dialog. The only markup needed for that is <div></div>. 
```

为不同的对话框设置不同样式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:53:40.540

也直接来自 jQuery 站点：

```
$( ".selector" ).dialog({ dialogClass: "alert" }); 
```

它说

> 指定的类名将添加到对话框中，以进行其他主题化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:50:58.840

```
 <div id="dialog-confirm" title="Title of dialog" style="//put your styling here" >Text of dialog</div> 
```

像这样的内联样式覆盖所有 CSS 表

您可以为不同的对话框使用不同的 DIV，

```
 <div id="dialog-confirm0" title="Title of dialog" style=" put your styling here>Text of dialog</div> 
          <div id="dialog-confirm1" title="Title of dialog" style=" put your styling here>Text of dialog</div> 
          <div id="dialog-confirm2" title="Title of dialog" style=" put your styling here>Text of dialog</div> 
```

采用

```
 $( "#dialog-confirm0" ).dialog({
        height: 140,
        modal: true
         }); 
```

那么你可以在不同的地方使用 ,

```
 $( "#dialog-confirm1" ).dialog({
        height: 140,
        modal: true
         }); 
```

如果你想用 css 类来做，那么你可以使用 jQuery 向 DIV 添加一个不同的类，并添加 !important 来覆盖来自 jQuery UI 的样式。

前任。

```
 background-color: #454545 !important;
                color: #000 !important; 
```

# shell - 从 find 命令获取文件名

> ID：11620068
> 
> 赞同：0
> 
> 时间：2012-07-23T20:32:06.993
> 
> 标签：shell, unix, ksh

我有一个形式的查找命令：

```
find ${SRC} -type f -level 0 -exec rm -f {} \; 
```

这是在 ksh 脚本中，`${SRC}`我正在搜索的目录在哪里。

我的问题是，获取`-exec`操作文件列表的最佳方法是什么？

*编辑*具体来说，我希望将文件名放入字符串变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:48:43.473

通常，您可以使用 sh 将 exec 扩展到多个命令：

```
file_list=$( find ${SRC} -type f -level 0 -exec sh -c 'echo {} ; rm -f {}' \; ) 
```

但在这种情况下，你可以这样做：

```
file_list=$( find ${SRC} -type f -level 0 -print -exec rm -f {} \; ) 
```

# c++ - C++语言律师白话词典

> ID：11620072
> 
> 赞同：4
> 
> 时间：2012-07-23T20:32:32.467
> 
> 标签：c++, terminology, language-lawyer

在 C++ 中，有些术语在大多数 C++ 书籍中都没有提及或解释。例如：

*   奇异迭代器（[链接](https://stackoverflow.com/questions/5441893/what-is-singular-and-non-singular-values-in-the-context-of-stl-iterators)）
*   限定名称（[链接](https://stackoverflow.com/questions/7257563/what-are-qualified-id-name-and-unqualified-id-name)）
*   从属名称
*   推断的上下文
*   阴影
*   x/gl/pr-value ([链接](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues))
*   不完整的类型（[链接](http://msdn.microsoft.com/en-us/library/200xfxh6.aspx)）

如果您不知道它们的含义，您将不会理解编译器错误消息。我知道上述所有术语的含义（它们只是示例）。在一些不平凡的谷歌搜索之后的原因 - 我可以弄清楚术语的含义。在*单数迭代器*的情况下，我不得不查看 gcc 源代码。

有没有像标准中那样以不太专业的友好方式解释和定义这些内容的字典或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:37:06.727

在这里，我们有[官方的 C++11 最终工作草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)。

在本文档中，任何人都可以查找您提到的短语：

*   奇异迭代器 -~~未~~找到，（24.2.1：“迭代器也可以具有与任何序列无关的奇异值”，以及“无效的迭代器是可能是奇异的迭代器”）
*   限定名称 - 找到，解释
*   从属名称 - 找到，解释
*   推断的上下文 - 找到，解释
*   阴影 -**未找到**
*   xvalue -~~未~~找到，（3.10：一个 xvalue [an “eXpiring” value] 也指一个对象）
*   gl-value -~~未~~找到，（3.10：glvalue [“generalized” lvalue] 是左值或 xvalue）
*   pr-value -~~未~~找到，（3.10：prvalue [“pure” rvalue] 是一个不是 xvalue 的右值）
*   不完整的类型 - 找到，解释

其余的术语可以在互联网上查找，但似乎或多或少是供应商特定的短语，如果我没有完全弄错的话。

* * *

**在 Jonathan Wakely 发表评论后**更新。****

# haskell - 用各自的替换替换多个子字符串

> ID：11620075
> 
> 赞同：3
> 
> 时间：2012-07-23T20:32:55.437
> 
> 标签：haskell, replace

我有一个`String`包含多个标签的表单`${...}`（其中`...`可以是任何不包含字符的`}`字符串），例如`foo ${bar} baz ${qux}`.

我想替换这些标签，但要做到这一点，我需要以下形式的函数：

```
replace :: [String] -> [String] -> String -> String
--           tags    replacements  target    result
replace ["${bar}", "${qux}"] ["abc", "def"] "foo ${bar} baz ${qux}" == "foo abc baz def" 
```

（当给定数组作为参数时，这类似于 PHP 的[`str_replace`](http://php.net/manual/en/function.str-replace.php)函数。）

我在任何包中都找不到这样的替换功能。是否有这样的功能，如果没有，我将如何编写它（指向正确的方向就足够了；我正在学习 Haskell）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:03:06.613

作为一个单行：

```
Prelude Data.Text> Prelude.foldr (uncurry Data.Text.replace) "foo ${bar} baz ${qux}" $ Prelude.zip ["${bar}", "${qux}"] ["abc", "def"]
"foo abc baz def" 
```

换句话说：

```
replace as bs x = Prelude.foldr (uncurry Data.Text.replace) x $  Prelude.zip as bs 
```

# javascript - 防止/推迟加载 html 元素

> ID：11620081
> 
> 赞同：0
> 
> 时间：2012-07-23T20:33:16.247
> 
> 标签：javascript, jquery, html

在开发我的作品集时，我意识到加载页面需要很长时间，因为必须加载所有图像才能完成页面加载。

所以，我想知道是否有办法阻止或停止加载，然后再允许加载。

意思是，立即阻止加载，然后单击另一个已加载的元素，比如说#title，然后加载.images。

这可能吗？如果可以，怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:37:38.697

像这样的东西：

HTML

```
<img src="" class="lazyload" data-attr="image1.jpg" alt="Alt" title="Title" width="50" height="50" /> 
```

jQuery

```
$('#title').click(function(){
    $('.lazyload').each(function(){
        $(this).attr('src',$(this).attr('data-attr'));
    });
}); 
```

或者你可以使用[LazyLoad](http://www.appelsiini.net/projects/lazyload)插件来实现稍微不同的功能。

# jquery - 在 jQuery 中创建 iframe 再次询问

> ID：11620084
> 
> 赞同：-2
> 
> 时间：2012-07-23T20:33:37.460
> 
> 标签：jquery, html, iframe

如何在 jQuery 中创建 iframe 标签并将其设置为仅某些 div 的内容？

如果目标 div 有一些内容，请将其替换并放入动态创建的 iframe 标记。

这是我尝试过的：

```
 $(".someClass").click(function(){

             var $iframe = $('<iframe allowfullscreen  ></iframe>', {
                'width': 650,
                'height': 580,              
                'src': someUrl
             });
             $('#someId').html($iframe);

        }); 
```

此代码实际上将 iframe 添加到 div 但 iframe 缺少 src 属性。这段代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:42:49.327

这对我有用：

```
$('<iframe />', {
    name: 'myFrame',
    id:   'myFrame',
    src: 'http://www.google.com/'
}).appendTo('div'); 
```

[在线演示](http://jsfiddle.net/mWAPC/)（由于对 jsfiddle 的一些限制（我猜）不加载 google，但你可以看到 iframe 上有 src 属性）

希望能帮助到你！

**编辑**

```
var myFrame = $('<iframe />', { name: 'myFrame', id:   'myFrame', src: 'http://www.google.com/' });
$('div').html(myFrame); 
```

[使用 HTML() 的在线演示](http://jsfiddle.net/mWAPC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:36:23.140

将 ID 添加到 iframe 并执行

```
$('iframeID').attr('src','linktomysourcelocation'); 
```

现在您创建了元素，上面的代码添加了 source 属性。

# java - Java Webstart 应用程序 - 从单独的文件加载属性

> ID：11620087
> 
> 赞同：2
> 
> 时间：2012-07-23T20:33:44.563
> 
> 标签：java, jnlp, java-web-start

我目前正在将我们的项目设置为通过 java webstart 部署给用户，而不是当前用户从共享网络驱动器运行 .bat 文件的设置。当应用程序运行时，它会传递一个属性文件参数，其中包含诸如允许在不同环境之间切换的数据库凭据等信息。

我想知道是否有办法在 JNLP 文件中指定它并让 webstart 从 web 服务器中下拉属性文件。我花了很多时间在线调查这个问题，我唯一能想到的就是简单地将文件名指定为参数，如下所示：

```
 <application-desc main-class="Main"> 
        <argument>example.properties</argument> 
    </application-desc> 
```

然后包含一个单独的链接，让用户从服务器下载属性文件。这样做的问题是，如果 JNLP 文件和属性文件没有下载到同一个目录（这似乎是 IE 中的默认行为），那么整个应用程序就会崩溃。有没有一种方法可以将我的属性文件与 JNLP 文件中的其他资源捆绑在一起，或者我是否会以一种完全不正确的方式进行处理？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:45:28.503

您可以在 .jnlp 文件本身中设置属性，而不是使用单独的属性文件。 [http://www.coderanch.com/t/200871/JNLP-Web-Start/java/Properties-files-JNLP](http://www.coderanch.com/t/200871/JNLP-Web-Start/java/Properties-files-JNLP)

其他解决方案是：

*   将属性文件放在主 jar 或单独的 jar 中，并将其添加为资源。
*   将属性文件的位置作为属性或主要参数，然后从程序本身下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:45:14.683

看起来 jnlp 是一个 XML 文件，其中包含要放置在类路径中的 jar 文件列表。
如果您在其中一个 jar 中包含一个属性文件，那么您可以使用 this.getClass().getClassLoader().getResourceAsStream("mypropsname.properties") 来读取它。

您的所有用户都需要相同的属性文件吗？

# python - 在 Python 中对字符串列表进行排序

> ID：11620088
> 
> 赞同：3
> 
> 时间：2012-07-23T20:33:47.073
> 
> 标签：python, string, sorting

> **可能重复：**
> [如何在 Python 中对字符串列表进行排序？](https://stackoverflow.com/questions/36139/how-do-i-sort-a-list-of-strings-in-python)
> [如何在 Python 中按字母顺序对 unicode 字符串进行排序？](https://stackoverflow.com/questions/1097908/how-do-i-sort-unicode-strings-alphabetically-in-python)

我有一个字符串列表，`list`想按字母顺序对其进行排序。当我调用`list.sort()`列表的第一部分包含按字母顺序排序的以大写字母开头的条目时，第二部分包含以小写字母开头的排序条目。像这样：

```
Airplane
Boat
Car
Dog
apple
bicycle
cow
doctor 
```

我用谷歌搜索了答案，但没有找到可行的算法。我阅读了有关`locale`模块和`sort`参数`cmp`以及`key`. 通常情况下，这`lambda`会与 连续出现`sort`，这让我无法更好地理解事情。

我怎样才能得到：

```
list = ['Dog', 'bicycle', 'cow', 'doctor', 'Car', 'Boat', 'apple', 'Airplane'] 
```

至：

```
Airplane
apple
bicycle
Boat
Car
cow
doctor
Dog 
```

应考虑外语字符（如ä、é、î）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T20:36:08.427

使用不区分大小写的比较：

```
>>> sorted(['Dog', 'bicycle', 'cow', 'doctor', 'Car', 'Boat',
        'apple', 'Airplane'], key=str.lower)
['Airplane', 'apple', 'bicycle', 'Boat', 'Car', 'cow', 'doctor', 'Dog'] 
```

这实际上是[python wiki 上关于排序](http://wiki.python.org/moin/HowTo/Sorting/)的建议方式：

> 从 Python 2.4 开始，list.sort() 和 sorted() 都添加了一个关键参数来指定在进行比较之前对每个列表元素调用的函数。
> 
> 例如，这是一个不区分大小写的字符串比较：
> 
> ```
> >>> sorted("This is a test string from Andrew".split(), key=str.lower)
> ['a', 'Andrew', 'from', 'is', 'string', 'test', 'This'] 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T20:39:03.860

这里似乎对该主题有一个很好的概述： [http ://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

向下滚动一页到这里；

例如，这是一个不区分大小写的字符串比较：

```
>>> sorted("This is a test string from Andrew".split(), key=str.lower) 
```

# facebook - 使用 fql 向 facebook 评论发布新评论

> ID：11620090
> 
> 赞同：0
> 
> 时间：2012-07-23T20:33:54.853
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-comments

我已经使用带有以下代码的 fql 成功检索了特定链接上的评论：

```
{\"comments\":\"SELECT fromid, text, time, comments FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url ='http://permalink')\", \"users\":\"SELECT name, id FROM profile WHERE id IN (SELECT fromid FROM #comments)\"} 
```

我想发布新评论并且我拥有用户的访问令牌，使用 fql 执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:38:44.030

据我所知，您不能使用 FQL 插入。FQL 只是一种查询语言，用于执行比 Graph API 端点提供的更复杂的查询，允许您执行连接等（不是传统意义上的连接，而是使用“IN”语句）。

您需要使用图形 api 并发出 POST 请求，详细信息在本页底部[https://developers.facebook.com/docs/reference/api/link/](https://developers.facebook.com/docs/reference/api/link/)

# google-app-engine - 使用数据存储查看器 Google App Engine 创建实体

> ID：11620094
> 
> 赞同：5
> 
> 时间：2012-07-23T20:34:08.223
> 
> 标签：google-app-engine, google-cloud-datastore

我想从谷歌应用引擎的管理控制台在我的数据存储中创建一个实体。

为此，我读到我必须单击数据存储查看器中的“创建”选项卡，但我没有此链接。我只有“查询”选项卡，因为我没有数据，所以什么也没有出现。

如何从谷歌应用引擎的管理控制台创建实体？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T21:29:13.780

App Engine 仅允许您为已定义的 Kind 创建新实体。如果您从未将任何内容保存到数据存储中，那么您的数据存储就是一张白纸，您将无法在其中查询或创建。

如果您不想为了将第一个实体写入数据存储而部署代码，您可以在生产中启用[交互式控制台](https://stackoverflow.com/questions/1782906/how-do-i-activate-the-interactive-console-on-app-engine)，并编写代码来生成模型、填充和保存模型。完成后，您的创建链接应该会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:39:10.727

检查权限部分，也许您只有不允许您创建实体的查看者角色。

顺便说一句，创建链接如下所示： ![在此处输入图像描述](../Images/522f37e8eb004bd2219af6a57e5dee7d.png)

# java - 如何使用 Intellij Idea 而不是 eclipse 编译 mixare 项目？

> ID：11620098
> 
> 赞同：0
> 
> 时间：2012-07-23T20:34:32.147
> 
> 标签：java, android

[有](http://code.google.com/p/mixare/wiki/GettingStarted)一个说明告诉如何使用 Eclipse 构建项目，但我不能在 Intellij Idea 中重复它。我无法正确导入 mixarelib。=\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:21:50.493

mixarelib 项目位于主项目的子文件夹中（即工作副本的一部分）。尝试将它作为一个单独的项目添加到您的 IDE 中，并将其标记为“库”项目（这是 ADT 工作流程的一部分）并将其用作主项目的依赖项。

# java - 用于读/写 Map 的 Java 库 通过豆

> ID：11620101
> 
> 赞同：1
> 
> 时间：2012-07-23T20:34:56.337
> 
> 标签：java

`Map<String, String>`我正在寻找一个通过代理 Java bean提供类型安全读写访问的库。例如：

```
interface Person {
  String getName();
  void setName(String name);
  int getAge();
  void setAge(int age);
}

Map<String, String> data = new HashMap<String, String>() {{
  put("name", "juni");
  put("age", "4");
}}

Person p = HypotheticalLibrary.bind(Person.class, data);
p.getName(); // returns "juni"
p.setAge(5); // calls data.put("age", "5") --- notice the implicit type conversion 
```

有这样的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:23:06.277

我不知道一个。但是，使用[代理](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)编写一个相当简单。您需要编写一个[InvocationHandler](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html)来识别 getter 和 setter，并相应地获取或放置在地图上。有一点很繁琐——将方法名称转换为映射的键——还有一点很难——弄清楚如何转换类型。

我用大约 60 行代码编写了一个快速而肮脏的实现。它在类型上做得相当笨拙；对于所有基本类型，要完成体面的工作还需要一百左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:04:31.017

假设您可以使用 spring 作为依赖项，您可以按照建议使用代理方法。BeanUtils 类负责将方法名称转换为属性描述符，以便您可以获取名称。不需要类型转换，因为您正在使用接口本身，因此编译器将确保您发送正确的类型（并因此发送正确的类型）。

```
static interface Person {
    void setName(String name);
    String getName();
    void setAge(int age);
    int getAge();
}

public static Person createPerson() {
    return createPerson(new HashMap<String, String>());
}

public static Person createPerson(final Map<String, String> props) {
    InvocationHandler ih = new InvocationHandler() {
        private TypeConverter typeConverter = new SimpleTypeConverter();

        @Override
        public Object invoke(Object source, Method method, Object[] params)
                throws Throwable {
            PropertyDescriptor pd = BeanUtils.findPropertyForMethod(method);
            if (method.getName().startsWith("set")) {
                props.put(pd.getName(), typeConverter.convertIfNecessary(params[0], String.class));
                return null;
            }
            else if (method.getName().startsWith("get") ||
                     method.getName().startsWith("is")) {
                Object res = props.get(pd.getName());
                return typeConverter.convertIfNecessary(res, method.getReturnType());
            }
            return null;
        }
    };

    Person p = (Person) Proxy.newProxyInstance(Thread.currentThread().getContextClassLoader(),
            new Class<?>[] { Person.class },
            ih);

    return p;
}

public static void main(String args[]) {
    final Map<String, String> props = new HashMap<String, String>();
    props.put("name", "Matt");
    props.put("age", "4");

    Person p = createPerson(props);

    System.out.println(p.getName());
    System.out.println(p.getAge());

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:44:49.383

我不相信有一个，但你可以在[mvel](http://mvel.codehaus.org/)或[ognl](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html)或[spel](http://commons.apache.org/ognl/)的帮助下建立自己的。我确实在某个时候建立了自己的。

# java - Mockito：试图监视方法正在调用原始方法

> ID：11620103
> 
> 赞同：432
> 
> 时间：2012-07-23T20:35:02.640
> 
> 标签：java, junit, mockito

我正在使用 Mockito 1.9.0。我想在 JUnit 测试中模拟一个类的单个方法的行为，所以我有

```
final MyClass myClassSpy = Mockito.spy(myInstance);
Mockito.when(myClassSpy.method1()).thenReturn(myResults); 
```

问题是，在第二行中，`myClassSpy.method1()`实际上是被调用，导致异常。我使用模拟的唯一原因是以后，无论何时`myClassSpy.method1()`调用，都不会调用真正的方法，而是`myResults`返回对象。

`MyClass`是一个接口，并且`myInstance`是一个实现，如果这很重要的话。

我需要做什么来纠正这种间谍行为？

* * *

## 回答 #1

> 赞同：735
> 
> 时间：2012-07-23T20:41:36.480

让我引用[官方文档](https://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Mockito.html#13)：

> ## 监视真实物体的重要问题！
> 
> 有时不可能使用 when(Object) 来存根间谍。例子：
> 
> ```
> List list = new LinkedList();
> List spy = spy(list);
> 
> // Impossible: real method is called so spy.get(0) throws IndexOutOfBoundsException (the list is yet empty)
> when(spy.get(0)).thenReturn("foo");
> 
> // You have to use doReturn() for stubbing
> doReturn("foo").when(spy).get(0); 
> ```

在您的情况下，它类似于：

```
doReturn(resultsIWant).when(myClassSpy).method1(); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-03-29T20:46:24.187

在我的情况下，使用 Mockito 2.0，我必须将所有`any()`参数更改`nullable()`为以存根真正的调用。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-08-02T10:43:03.880

我的情况与接受的答案不同。我试图为不在该包中的实例模拟包私有方法

```
package common;

public class Animal {
  void packageProtected();
}

package instances;

class Dog extends Animal { } 
```

和测试类

```
package common;

public abstract class AnimalTest<T extends Animal> {
  @Before
  setup(){
    doNothing().when(getInstance()).packageProtected();
  }

  abstract T getInstance();
}

package instances;

class DogTest extends AnimalTest<Dog> {
  Dog getInstance(){
    return spy(new Dog());
  }

  @Test
  public void myTest(){}
} 
```

编译是正确的，但是当它尝试设置测试时，它会调用真实的方法。

声明方法*protected*或*public*可以解决问题，但这不是一个干净的解决方案。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-11-06T18:46:34.427

**Tomasz Nurkiewicz 的回答似乎并不能说明整个故事！**

注意 Mockito 版本：1.10.19。

我是一个 Mockito 新手，所以无法解释以下行为：如果有专家可以改进这个答案，请随意。

这里讨论的方法`getContentStringValue`, 是**NOT** `final`和**NOT** `static`。

这一行**确实**调用了原始方法`getContentStringValue`：

```
doReturn( "dummy" ).when( im ).getContentStringValue( anyInt(), isA( ScoreDoc.class )); 
```

此行**不**调用原始方法`getContentStringValue`：

```
doReturn( "dummy" ).when( im ).getContentStringValue( anyInt(), any( ScoreDoc.class )); 
```

由于我无法回答的原因，使用`isA()`会导致预期的（？）“不调用方法”行为`doReturn`失败。

让我们看看这里涉及的方法签名：它们`static`都是`Matchers`. Javadoc 都说两者都是 return `null`，这本身就有点难以理解。大概`Class`检查了作为参数传递的对象，但结果要么从未计算过，要么被丢弃。鉴于它`null`可以代表任何类，并且您希望不调用模拟方法，难道不能只返回`isA( ... )`而不是泛型参数*的签名吗？`any( ... )``null``<T>`

反正：

```
public static <T> T isA(java.lang.Class<T> clazz)

public static <T> T any(java.lang.Class<T> clazz) 
```

API 文档对此没有提供任何线索。似乎也说需要这种“不调用方法”行为是“非常罕见的”。**就我个人而言，我一直**使用这种技术：通常我发现模拟涉及几行“设置场景”......然后调用一个方法，然后在您上演的模拟上下文中“播放”场景...... . 当你在布置布景和道具时，你最不想要的就是让演员从左边进入舞台，开始表演他们的心...

但这远远超出了我的薪酬等级……我请任何路过的 Mockito 大祭司解释一下……

*“通用参数”是正确的术语吗？

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-10-08T14:10:11.677

可能导致间谍问题的另一种可能情况是，当您正在测试**spring bean**（使用 spring 测试框架）或其他一些**在 test 期间代理您的对象的框架时**。

例子

```
@Autowired
private MonitoringDocumentsRepository repository

void test(){
    repository = Mockito.spy(repository)
    Mockito.doReturn(docs1, docs2)
            .when(repository).findMonitoringDocuments(Mockito.nullable(MonitoringDocumentSearchRequest.class));
} 
```

在上面的代码中，Spring 和 Mockito 都会尝试代理您的 MonitoringDocumentsRepository 对象，但 Spring 将是第一个，这将导致 findMonitoringDocuments 方法的真正调用。如果我们在存储库对象上放置一个间谍后调试我们的代码，它在调试器中将如下所示：

```
repository = MonitoringDocumentsRepository$$EnhancerBySpringCGLIB$$MockitoMock$ 
```

**@SpyBean 来救援**

如果`@Autowired`我们使用注解代替注解`@SpyBean`，我们将解决上述问题，SpyBean 注解也会注入存储库对象，但它将首先由 Mockito 代理，并且在调试器中看起来像这样

```
repository = MonitoringDocumentsRepository$$MockitoMock$$EnhancerBySpringCGLIB$ 
```

这是代码：

```
@SpyBean
private MonitoringDocumentsRepository repository

void test(){
    Mockito.doReturn(docs1, docs2)
            .when(repository).findMonitoringDocuments(Mockito.nullable(MonitoringDocumentSearchRequest.class));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-11-30T14:43:43.250

**监视真实物体的重要问题**

当使用 spies 存根方法时，请使用**doReturn()**系列方法。

**when(Object)**将导致调用可能引发异常的实际方法。

```
List spy = spy(new LinkedList());

//Incorrect , spy.get() will throw IndexOutOfBoundsException   
 when(spy.get(0)).thenReturn("foo");

//You have to use doReturn() for stubbing    
doReturn("foo").when(spy).get(0); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-17T11:57:27.653

我发现 spy 调用原始方法的另一个原因。

有人想模拟一个`final`类，并发现`MockMaker`：

> 由于这与我们当前的机制不同，并且这个机制有不同的限制，并且我们想要收集经验和用户反馈，因此必须明确激活此功能才能使用；它可以通过 mockito 扩展机制通过创建`src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker`包含单行的文件来完成：`mock-maker-inline`

来源：[https ://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#mock-the-unmockable-opt-in-mocking-of-final-classesmethods](https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#mock-the-unmockable-opt-in-mocking-of-final-classesmethods)

在我合并并将该文件带到我的机器后，我的测试失败了。

我只需要删除该行（或文件），然后`spy()`工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-19T21:28:36.753

确保不调用类中的方法的一种方法是用虚拟对象覆盖该方法。

```
 WebFormCreatorActivity activity = spy(new WebFormCreatorActivity(clientFactory) {//spy(new WebFormCreatorActivity(clientFactory));
            @Override
            public void select(TreeItem i) {
                log.debug("SELECT");
            };
        }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-04T19:01:52.207

正如一些评论中提到的，我的方法是“静态的”（尽管被类的实例调用）

```
public class A {
  static void myMethod() {...}
}
A instance = spy(new A());
verify(instance).myMethod(); // still calls the original method because it's static 
```

解决方法是创建一个实例方法或将 Mockito 升级到具有一些配置的较新版本：[https ://stackoverflow.com/a/62860455/32453](https://stackoverflow.com/a/62860455/32453)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-09-13T06:16:24.933

派对迟到了，但上述解决方案对我不起作用，所以分享我的 0.02 美元

**Mokcito 版本：1.10.19**

MyClass.java

```
private int handleAction(List<String> argList, String action) 
```

测试.java

```
MyClass spy = PowerMockito.spy(new MyClass()); 
```

## 以下对我不起作用（正在调用实际方法）：

1.

```
doReturn(0).when(spy , "handleAction", ListUtils.EMPTY_LIST, new String()); 
```

2.

```
doReturn(0).when(spy , "handleAction", any(), anyString()); 
```

3.

```
doReturn(0).when(spy , "handleAction", null, null); 
```

## 以下工作：

```
doReturn(0).when(spy , "handleAction", any(List.class), anyString()); 
```

# objective-c - 可可触摸：在继续之前等待方法完成

> ID：11620108
> 
> 赞同：-2
> 
> 时间：2012-07-23T20:35:24.610
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

所以我有一个 UIButton 的 onclick 事件，它需要执行一些代码，但它可以随时按下，所以有可能在另一个方法仍在运行时按下它。有没有办法在特定方法完成之前阻止点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:40:31.467

> 有没有办法在特定方法完成之前阻止点击事件？

除非“特定方法”在另一个线程上运行，否则这已经发生了。当其他代码在主线程上运行时，运行循环无法处理输入事件。

# ios - 多对多字符串比较

> ID：11620112
> 
> 赞同：1
> 
> 时间：2012-07-23T20:35:53.000
> 
> 标签：ios, core-data, nspredicate

我正在尝试编写一个类似于

```
[NSPredicate predicateWithFormat:@"ANY manyNames in %@", allNames]; 
```

但不是'in'我需要'like'

```
[NSPredicate predicateWithFormat:@"ANY manyNames like %@", allNames]; 
```

这会导致错误。

所以我想得到一些manyNames对象的结果，这些对象至少类似于allNames中的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:13:11.873

我通过加入这些字符串并制作一串，然后寻找它来解决我的问题。

# c++ - .png 图片信息

> ID：11620114
> 
> 赞同：-2
> 
> 时间：2012-07-23T20:35:54.137
> 
> 标签：c++, c, png, image

在哪里可以找到 .png 图像中的图像信息，例如宽度、高度和 rgba 像素？我发现使用位图图像很容易做到这一点，但 png 图像看起来太复杂了。维基百科也无济于事。（可能是因为我的英语不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:40:38.813

与其编写自己的 PNG 渲染器，不如使用现有的库（例如[libpng](http://www.libpng.org/pub/png/libpng.html)）为您完成。libpng 具有`png_get_image_width`、`png_get_image_height`、 和等函数，`png_get_rows`分别获取宽度、高度和图像数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:58:36.267

.png 文件格式比 .bmp 灵活得多，因此没有固定的位置可以找到宽度和高度。更严重的问题是像素值被压缩了，必须先解压缩才能使用。这几乎可以保证您需要一个库来使用 .png 文件。

# vba - 使用条件和嵌套 If-Then 语句查找数值对 - VBA Excel 2007

> ID：11620118
> 
> 赞同：0
> 
> 时间：2012-07-23T20:36:12.407
> 
> 标签：vba, excel

我正在尝试对通过大型机系统中的 excel 宏导入的数据进行排序，以搜索潜在模式，尤其是重复模式等。可以说，宏工作正常，只是作为问题的背景。

我检查了问题重复项，但尚未找到与语言+主题焦点/细节完全匹配的内容。这个stackoverflow问题似乎有相似之处，但我觉得不一样：[需要找到一种方法让这个宏循环遍历所有其他列](https://stackoverflow.com/questions/10352600/need-to-find-a-way-to-loop-this-macro-through-every-other-column)

我已经检查了 AND 条件，但老实说，对于如何使用它来帮助我循环、运行比较并找到 Decimal 类型基于值的对的所有可能排列，我感到很困惑。

我根据三个条件对数据进行排序，其中两个作为第三个的先决条件，例如：

```
[pseudocode/thought process]
----------
IF String Comparison 1 (Cell Col 1 R 1) == (Cell Col 1 R 2) AND
IF String Comparison 2 (Cell Col 2 R 1) == (Cell Col 2 R 2) AND
IF Value of DECIMAL (Cell Col 3 R1) == DECIMAL (Cell Col 3 R2)
CHANGE CELLCOLOR to 'SomeColor'
----------
LOOP Through and run all value pair checks given String Compare 1,2 == TRUE for all 
comparisons of String Comparison 1 & String Comparison 2 
```

我确信有一个简单的以 OOP 为中心的解决方案，它只是递归地循环遍历单元格，但我没有看到它。

以下是我的示例 foobar 数据（工作表迁移后）：

> Category1ID Category2ID 值
> 
> CCC400 219S2 400
> 
> CCC400 219S2 400
> 
> BBB300 87F34 300
> 
> BBB300 87F34 300
> 
> ABA250 987M9 500
> 
> 600DDD 0432QV 700
> 
> 500ABA 01W29 600
> 
> 200AAA 867B2 200
> 
> 100AAA 5756A 100
> 
> 100AAA 5756A 100
> 
> 100AAA 5756A 100
> 
> 100AAA 5756A 100
> 
> 100AAA 5756A 100

这是我当前的解决方案集-

首先，我将数据分类到我将用于循环的三列中。数据按第 1 列 AZ、第 2 列 AZ 和第 3 列最小值到最大值排序：

## 代码块 1

```
Sub DataCopy()
'
' DataCopy Macro
' Move some data and sort.
'

'
    Range("B:B,D:D,F:F").Select
    Range("F1").Activate
    Selection.Copy
    Sheets("Worksheet2").Select
    Range("A1").Select
    ActiveSheet.Paste
    Application.CutCopyMode = False
    ActiveWorkbook.Worksheets("Worksheet2").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Worksheet2").Sort.SortFields.Add Key:=Range( _
        "A2:A14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    ActiveWorkbook.Worksheets("Worksheet2").Sort.SortFields.Add Key:=Range( _
        "B2:B14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    ActiveWorkbook.Worksheets("Worksheet2").Sort.SortFields.Add Key:=Range( _
        "C2:C14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    With ActiveWorkbook.Worksheets("Worksheet2").Sort
        .SetRange Range("A1:C14")
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
End Sub 
```

然后，我尝试根据条件循环并“标记”匹配值：

## 代码块 2

```
Private Sub CommandButton1_Click()

'Trying to set variable in type RANGE and set variable alias rng.
Dim c As Range, rng

'Trying to set variable in type RANGE and set variable alias rng2.
Dim c2 As Range, rng2

'Trying to set variable in type RANGE and set variable alias rng3.
Dim c3 As Range, rng3

Dim LASTROW As Long

LASTROW = Cells(Rows.Count, 1).End(xlUp).Row

Set rng = Range("A2:A" & LASTROW)

Set rng2 = Range("B2:B" & LASTROW)

Set rng3 = Range("C2:C" & LASTROW)

    For Each c In rng

            'If category1ID cell Ax = Ax+1, Then go to next if
            If StrComp(c, c.Offset(1, 0)) = 0 Then

                'If category2ID cell Bx = Bx+1, Then go to next if
                If StrComp(c2, c2.Offset(1, 0)) = 0 Then

                    'If the value contained of cell Cx = C, Then highlight the value cell
                    If Round(c3, 2) = Round(c3.Offset(1, 0), 2) Then

                    c3.Interior.ColorIndex = 4

                    End If

                End If

            End If

    Next c

End Sub 
```

*不幸的是，代码块 2 导致错误“**运行时错误 '91': Object variable or With block variable not set** ”。*

第 29 行的错误：

```
If StrComp(c2, c2.Offset(1, 0)) = 0 Then 
```

我尝试了多种方法来解决这个错误，但我只是增加了我绊倒的错误数量。

理论上，如果颜色标记过程起作用，我会尝试执行这段代码，可能在同一个执行按钮中。此代码与代码块 1 非常相似，只是它只是按值列（第 3 列）中的彩色单元格排序，然后按第 1 列 AZ、第 2 列 AZ 和第 3 列最小到最大值的标准进行排序：

## 代码块 3

```
Sub ColorSort()
'
' ColorSort Macro
' Sorts by Color and then by various data criteria.
'

'
    Columns("A:C").Select
    ActiveWorkbook.Worksheets("Worksheet3").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Worksheet3").Sort.SortFields.Add(Range("C2:C14"), _
        xlSortOnCellColor, xlAscending, , xlSortNormal).SortOnValue.Color = RGB(0, 255 _
        , 0)
    ActiveWorkbook.Worksheets("Worksheet3").Sort.SortFields.Add Key:=Range( _
        "A2:A14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    ActiveWorkbook.Worksheets("Worksheet3").Sort.SortFields.Add Key:=Range( _
        "B2:B14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    ActiveWorkbook.Worksheets("Worksheet3").Sort.SortFields.Add Key:=Range( _
        "C2:C14"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    With ActiveWorkbook.Worksheets("Worksheet3").Sort
        .SetRange Range("A1:C14")
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
End Sub 
```

但是，由于运行时 91 错误，代码块 3 永远不会执行。

*我希望有一个优雅的递归/迭代方法或一组方法来修复错误并优化性能*，但如果可能/可行的话，任何修复都可以。

非常感谢，

杰克橙灯笼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:20:28.013

如果我正确理解您的逻辑，这应该有效：

```
Private Sub CommandButton1_Click()
    Dim c As Range, rng As Range
    Dim c2 As Range
    Dim c3 As Range
    Dim LASTROW As Long

    With ActiveSheet       
        LASTROW = .Cells(Rows.Count, 1).End(xlUp).Row
        Set rng = .Range("A2:A" & LASTROW)
    End With

    For Each c In rng.Cells

        Set c2 = c.Offset(0, 1)
        Set c3 = c.Offset(0, 2)

        If StrComp(c.Value, c.Offset(1, 0).Value) = 0 Then
            If StrComp(c2.Value, c2.Offset(1, 0).Value) = 0 Then
                If Round(c3.Value, 2) = Round(c3.Offset(1, 0).Value, 2) Then
                    'EDIT: highlight the original and the duplicate
                    c3.Resize(2,1).Interior.ColorIndex = 4
                End If
            End If
        End If
    Next c
End Sub 
```

**编辑**：这应该更好（也适用于未排序的数据）

```
Private Sub HighlightDups()

    Const CLR_HILITE As Integer = 4
    Dim rw As Range, rng As Range
    Dim LASTROW As Long, r As Long
    Dim dict As Object, tmp

    With ActiveSheet
        LASTROW = .Cells(Rows.Count, 1).End(xlUp).Row
        Set rng = .Range("A2:C" & LASTROW)
    End With

    Set dict = CreateObject("scripting.dictionary")

    For Each rw In rng.Rows

        tmp = rw.Cells(1).Value & "~~" & rw.Cells(2).Value & _
               "~~" & CStr(Round(rw.Cells(3).Value, 1))

        If Not dict.exists(tmp) Then
            dict.Add tmp, rw.Cells(3)
        Else
            If Not dict(tmp) Is Nothing Then
                dict(tmp).Interior.ColorIndex = CLR_HILITE
                Set dict(tmp) = Nothing
            End If
            rw.Cells(3).Interior.ColorIndex = CLR_HILITE
        End If
    Next rw
End Sub 
```

# algorithm - 给定一组点，是否有众所周知的算法填充网格？

> ID：11620122
> 
> 赞同：15
> 
> 时间：2012-07-23T20:36:21.207
> 
> 标签：algorithm, graph

我在这里看到了这个游戏[Flow](http://apps.microsoft.com/webpdp/en-us/app/flow/117ec8c4-0dab-4536-9bab-2fbecb9583bb)，看起来很有趣。

> 将匹配的颜色与管道连接以创建流程。配对所有颜色，并**覆盖整个电路板**以解决每个难题。但请注意，如果管道交叉或重叠，管道会破裂。

给定一组对`(x, y)`，是否有解决难题的算法，即填充我不知道的整个网格（假设有解决方案）？

![在此处输入图像描述](../Images/2aeb4c8ae4c8941c936ea93b9b535368.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T05:35:25.953

这是全局路由问题的一个非常具体的例子。全局布线是 VLSI CAD 中一个经过充分研究的问题（需要在集成电路中布线数百万个网络）。这个问题是 NP 完全的，可以通过多种方式解决，具体取决于您需要在运行时和质量之间进行权衡。以下 wiki 是一个很好的起点：

[http://en.wikipedia.org/wiki/Routing_(electronic_design_automation](http://en.wikipedia.org/wiki/Routing_(electronic_design_automation) )

本文对各种技术进行了调查：

[http://dropzone.tamu.edu/~jhu/publications/HuIntegration01.pdf](http://dropzone.tamu.edu/~jhu/publications/HuIntegration01.pdf)

请记住，我给出的建议通常试图解决您所说的问题的更复杂的版本。尽管如此，数学概念保持不变。

# java - 使用带有 Jackson 的不可变类反序列化 JSON 平面对象

> ID：11620130
> 
> 赞同：3
> 
> 时间：2012-07-23T20:36:59.610
> 
> 标签：java, json, jackson

我对 Jackson 库（1.9 版）很陌生。我只用了几个星期才开始使用它，当它在 Java 中序列化和反序列化对象时，我发现它非常灵活且省时。

但是，我在将“平面” JSON 反序列化为一个由另一个组合的类时遇到了麻烦，而这两者都意味着是不可变的。

我的情况大致如下：

```
class Foo {

    private final String var1;

    Foo(String var1) {
            this.var1 = var1;
    }
    // getters omitted
}

class A {
    private final Foo foo;
    private final String var2;

    A(/* @JsonUnwrapped doesn't work here */ Foo foo, String var2) {
            this.foo = foo;
            this.var2 = var2;
    }

    @JsonUnwrapped
    Foo getFoo() {
        return foo;
    }

    String getVar2() {
        return var2;
    }
}

class B extends Foo {
    private final String var2;

    B(String var1, String var2) {
            super(var1);
            this.var2 = var2;
    }
    // getters omitted
} 
```

而要反序列化的 JSON 是这样的：

```
{ "var1" : "some_value", "var2" : "some_other_value" } 
```

问题是：是否有基于注释的方式（因此，无需使用自定义反序列化器）来告诉杰克逊将给定的 JSON 组合到“A”实例？我已经尝试在类“A”构造函数中为 Foo 参数使用 @JsonUnwrapped 属性，但它在多参数构造函数中不受支持，因为它需要 JsonProperty 才能工作（这没有意义，因为实际上没有这些项目的单一属性）。相反，序列化可以完美地使用这种模式。

它也可以通过使用单独的设置器与非不可变类一起使用，但我想知道是否有办法通过仅使用构造函数（或生成器，这在现实中是有意义的）来做同样的事情比示例中的要多得多）。

同样的方法显然适用于从“Foo”继承的“B”类。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T22:13:51.453

请注意，Jackson 的反序列化处理不一定尊重`final`字段的不变性。因此，一种简单的方法是只提供无参数（私有）构造函数供 Jackson 使用。

```
import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;
import com.fasterxml.jackson.annotation.JsonUnwrapped;
import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    // {"var1":"some_value", "var2":"some_other_value"}
    String jsonInput = "{\"var1\":\"some_value\", \"var2\":\"some_other_value\"}";

    ObjectMapper mapper = new ObjectMapper().setVisibility(PropertyAccessor.FIELD, Visibility.ANY);

    A a = new A(new Foo("some_value"), "some_other_value");
    System.out.println(mapper.writeValueAsString(a));
    // output: {"var1":"some_value","var2":"some_other_value"}

    A aCopy = mapper.readValue(jsonInput, A.class);
    System.out.println(mapper.writeValueAsString(aCopy));
    // output: {"var1":"some_value","var2":"some_other_value"}
  }
}

class Foo
{
  private final String var1;

  Foo(String var1) {this.var1 = var1;}

  private Foo() {this.var1 = null;}
}

class A
{
  @JsonUnwrapped
  private final Foo foo;
  private final String var2;

  A(Foo foo, String var2)
  {
    this.foo = foo;
    this.var2 = var2;
  }

  private A()
  {
    this.foo = null;
    this.var2 = null;
  }
} 
```

如果您真的不想提供这样的（额外的）构造函数，那么如果可以使用 设计类似的解决方案会很好[`@JsonCreator`](http://www.cowtowncoder.com/blog/archives/2011/07/entry_457.html)，但我无法让这样的事情发挥作用。[因此，我建议在https://github.com/FasterXML/jackson-core/issues](https://github.com/FasterXML/jackson-core/issues)记录一个增强请求，也许是为了更好地支持同时使用和注释`@JsonCreator`参数。`@JsonUnwrapped``@JsonProperty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:03:47.600

不幸的是，某些功能组合可能无法正确实现；这可能是其中之一（我不是 100% 确定：请随时为 Jackson github 问题或 Jira 提交 Bug/RFE）。这是因为方式`@JsonUnwrapped`和`@JsonCreator`两者都需要对数据进行潜在的重新排序；也因为创建实际实例的顺序使事情变得复杂。因此，虽然从概念上讲这应该是可能的，但可能存在实施困难。

至于 Jackson 2.0：我肯定会在 1.9 上尝试，因为某些部分的`@JsonUnwrapped`处理得到了改进；并且将在那里添加任何修复/改进。1.9 分支将尽可能向后移植错误修复，但不会添加新功能。

# html - 元标记中未显示 Unicode

> ID：11620132
> 
> 赞同：2
> 
> 时间：2012-07-23T20:37:13.377
> 
> 标签：html, unicode, meta-tags

我在我网站的元标记中使用了 unicode，如下所示。

`<meta property="og:title" content="ශ්‍රී ලංකා" />`

但是当我在浏览器中查看源代码时，它显示如下。

```
<meta property="og:title" content="????????" /> 
```

我怎样才能避免这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:49:25.530

在上传到服务器或服务器操作的过程中，您文件中的僧伽罗字符已被转换为问号。它们是实际的问号“？”，U+003F，而不是浏览器或源查看器使用的问题指示符。问号也出现在可见内容的页面末尾附近，第 445 行：`<a href="http://www.bitak.net" title="?????" target="_blank">?????</a>`

该页面似乎只是由 Apache 服务器从静态 HTML 文件提供的，没有特殊的服务器端技术（尽管从外部看无法确定）。这表明上传过程中出现了问题，例如不正确的字符代码转换（假设您已检查创作系统中的文件是 UTF-8 编码并正确显示）。如果您以“文本模式”或“Ascii 模式”传输文件，则可能会发生这种情况，因此我建议再次上传，尽可能以原始模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:45:43.423

使用[Notepadd++](http://notepad-plus-plus.org/)之类的编辑器，您必须将文件编码更改为[UTF-8](http://en.wikipedia.org/wiki/UTF-8)：

![编码](../Images/14dae31837fd4bb34fca0d8d52211b0d.png)

# android - MEGA ADK 无法与 jellybean 一起使用

> ID：11620140
> 
> 赞同：0
> 
> 时间：2012-07-23T20:37:43.713
> 
> 标签：android

我有一个 arduino Mega ADK 板，我一直在使用我的三星 Galaxy nexus。该板作为 USB 附件工作得很好，但在 jellybean 更新后，该板无法连接到`could not read device protocol version`. 是否有我遗漏的东西或者这是一个需要修复的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:05:34.247

Google 在 API 级别 16 (>= 4.1) 中更改了 Android Open Accessory 协议版本。新版本 (v2) 中的 AOA 不向后兼容。我在我的 MEGA ADK 上遇到了同样的错误。在某处读到有一个更新版本的 Arduino ADK 库可以与新的 AOA 一起使用，您所要做的就是重新编译您的 Arduino 代码。

试用最新的 adk 版本 [http://developer.android.com/tools/adk/adk.html](http://developer.android.com/tools/adk/adk.html)

我还在努力弄明白...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T16:01:54.850

它还应该是使用 IDE Arduino 1.00 或更高版本上传的 adk_release_20120606.zip 中的库

# android - 开源安卓启动器列表

> ID：11620144
> 
> 赞同：9
> 
> 时间：2012-07-23T20:37:54.683
> 
> 标签：android, launcher, android-2.3-gingerbread

哪些实际的启动器是开源的？我需要 2.3+ 的启动器，但不需要启动器加或 ADW，因为它们已经不受支持。库存 ICS+ 启动器不适用于 2.3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T21:07:56.557

根据[wikipedia](http://en.wikipedia.org/wiki/List_of_Android_Launchers)上的列表，只有少数启动器是开源的。

但是，启动器是一个非常简单的应用程序。UI 本身就是与众不同的。

如果您想从头开始，可以测试 google 制作的启动器演示：

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

# xml - 将整个 XML 输出为属性

> ID：11620147
> 
> 赞同：4
> 
> 时间：2012-07-23T20:38:05.650
> 
> 标签：xml, xslt, xpath, xslt-1.0

我对 XML 和 XSL 样式表还很陌生，我的任务是为我们的一个客户创建样式表。我已经创建了一个样式表，它以以下格式输出 XML：

```
<Trip TripType="Normal">
    <Plan BeginTime="2011-08-13T10:00:00" UserDefinedTripID="777" UserDefinedRouteID="777">
        <PlanStop ArrivalTime="2011-08-13T15:30:00" ArrivalLock="true" SiteID="1" PassThru1="test1" PassThru2="test2" PassThru3="test3" PassThru4="test4">
            <PlanNote Line1="Freeform Text" Line2="Line2" Line3="Line3" />
            <PlanCargo Duration="60" BillID="" Weight="100" Units="100.0" XUnitTypeID="10" Action="Pick" />
            <PlanNote Line1="Freeform Text" Line2="Line2" Line3="Line3" />
            <PlanCargo Duration="60" BillID="" Weight="100" Units="100.0" XUnitTypeID="12" Action="Pick" />
        </PlanStop>
    </Plan>
</Trip> 
```

我需要获取输出并将内容插入到 Trip 元素中的属性中，如下所示：

```
<Trip TripID="-1" CurrentRevisionNumber="1" IsDispatch="1" IsActive="0" 
IsComplete="0" OrganizationID="4"
TripData="&lt;Trip TripType=&quot;Normal&quot;&gt;
  &lt;Plan BeginTime=&quot;2011-08-13T10:00:00&quot; UserDefinedTripID=&quot;777&quot;
  UserDefinedRouteID=&quot;777&quot;&gt;
    &lt;PlanStop ArrivalTime=&quot;2011-08-13T10:00:00&quot; ArrivalLock=&    quot;true&quot; SiteID=&quot;1&quot; PassThru1=&quot;test1&quot; PassThru2=&    quot;test2&quot; PassThru3=&quot;test3&quot; PassThru4=&quot;test4&quot;&gt;
    &lt;PlanCargo Duration=&quot;45&quot; BillID=&quot;&quot; Weight=&    quot;100&quot; Units=&quot;100.0&quot; XUnitTypeID=&quot;9&quot; Action=&quot;Pick&quot;     /&gt;
    &lt;/PlanStop&gt; /> 
```

所以换句话说，我需要在执行一些字符转换的同时获取一个现有的 XML 输出并将其放入一个属性中。

是的，它非常丑陋，但这就是他们想要的。我正在考虑制作另一个 XSL，它将复制原始 XSL 转换的 XML 输出并将其放在一个属性中，同时将 <、>、" 等转换为 < 、 > 、 " 等（不确定它们叫什么）。

我已经在互联网上搜索了解决方案，但我似乎找不到任何类似的解决方案（我想那是因为这是一个荒谬的要求）。如有必要，我可以提供我的原始 XSL，但如果可能的话，我宁愿不更改它。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T02:27:18.523

**我会从别人的愚蠢中节省自己的时间、精力和沮丧，并将通过一个使用微小扩展函数的微小转换来实现这一点**。

下面是使用 .NET XslCompiledTransform XSLT 处理器的示例：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt"
 xmlns:my="my:my" exclude-result-prefixes="msxsl my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <t stupid="{my:stringize(.)}"/>
 </xsl:template>

 <msxsl:script language="c#" implements-prefix="my">
  public string stringize(XPathNavigator doc)
  {
   return doc.InnerXml;
  }
 </msxsl:script>
</xsl:stylesheet> 
```

当应用于任何 XML 文档时，它会生成带有属性的顶部元素，该`stupid`属性包含顶部元素主体的转义表示。

**例如，当转换应用于此 XML 文档时**：

```
<t>
  <a>
    <b x="y">
      <!--  Comment here -->
      <?aPI ?>
    </b>
  </a>
</t> 
```

**产生了想要的结果**：

```
<t stupid="&#xD;&#xA;  &lt;a&gt;&#xD;&#xA;    &lt;b x=&quot;y&quot;&gt;&#xD;&#xA;      &lt;!--  Comment here --&gt;&#xD;&#xA;      &lt;?aPI?&gt;&#xD;&#xA;    &lt;/b&gt;&#xD;&#xA;  &lt;/a&gt;&#xD;&#xA;" /> 
```

**几乎可以为几乎每个**具有扩展功能的 XSLT 处理器编写实现相同想法的转换，该扩展功能本身可以用各种编程语言编写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T01:06:01.640

我必须同意其他评论者的观点，将 XML 文档作为词法 XML 插入属性中是完全愚蠢的。数据的所有者将失去如此多的权力和灵活性，却一无所获。但是，如果你真的别无选择，那就自杀吧（笑话）。如果你不喜欢这个选项，那么你可以用这样的模板序列化你的内部 XML ......

```
<xsl:template match="*" mode="serialise">
  <xsl:value-of select="concat('&lt;',local-name(),' ')">
  <xsl:apply-templates select="@*" mode="serialise">
  <xsl:value-of select="' &gt;'">
  <xsl:apply-templates select="*|text()" mode="serialise">
  <xsl:value-of select="concat('&lt;/',local-name(),' &gt;')">
</xsl:template>

<xsl:template match="@*" mode="serialise">
  <xsl:value-of select="concat(local-name(),'=&quot;',.,'&quot; ')">
</xsl:template>

<xsl:template match="text()" mode="serialise">
  <xsl:value-of select=".">
</xsl:template> 
```

获取要编码为词法 XML 的内部结构的根元素，并使用 @mode="serialise" 调用 <xsl:apply-templates>。将此调用的输出捕获到字符串变量中。然后，您可以将字符串变量的内容插入您喜欢的结果树中的任何属性中。

## 警告

这些简单的模板不处理 comments()、processing-instructions() 和 DocTypes。此外，根据 XDM（与 DOM 相反），相邻的文本类型节点（文本、CDATA、字符引用等）将被合并。这也不适用于命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T01:36:02.733

用于将 XML 序列化为转义文本的 XSLT 样式表可以在[http://code.google.com/p/httpfox/source/browse/trunk/chrome/content/XMLPrettyPrint.xsl?r=3](http://code.google.com/p/httpfox/source/browse/trunk/chrome/content/XMLPrettyPrint.xsl?r=3)找到 它输出 HTML，但你可以轻松地将其调整为输出 XML，主要是通过删除不需要的东西，如扩展器。

唯一棘手的部分可能是从现有 XSL 获取 XML 输出作为新模板的输入。如果您将后者实现为单独的样式表，或者如果您使用 XSLT 2.0，这将没有问题。否则，您可能需要使用`node-set()`扩展功能。

上面有几个方面可以详细说明。如果你被卡住了，请大声喊叫！HTH。

**PS**实际上，自从我开始这篇文章以来，@Sean 发布了他的答案，它比改编上述样式表更容易使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T02:07:14.150

基本上，您需要对 XML 进行序列化，将序列化的结果捕获为字符串，然后以该字符串作为其值写入一个属性。在 XSLT 1.0 或 XSLT 2.0 中没有直接的方法可以做到这一点。XSLT 3.0 有一个函数 fn:serialize() 旨在满足此要求，并且在最近的 Saxon 版本中实现了它。（早期版本的 Saxon 使用 saxon:serialize() 扩展函数引入了这个想法。您可能会在其他产品中找到类似的函数，或者您可以编写自己的函数。）当然可以在 XSLT 本身中实现序列化程序，因为其他人建议；这只是相当乏味。

# atk4 - 有格调的形式

> ID：11620148
> 
> 赞同：0
> 
> 时间：2012-07-23T20:38:07.740
> 
> 标签：atk4

我正在使用版本 4.1.4

是否可以创建一个具有背景颜色的字段的表单？

类似于下一张图片。 ![示例表格](../Images/4947157b1dbfa39cd4bd6dda51f22e67.png)

谢谢亚历杭德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:09:07.420

我想对此给出一个简单的答案。这也适用于 4.1。

```
$form->getElement('yourfield')
    ->js(true)
    ->closest('.atk-form-row-line')
    ->css(array('background'=>'red')); 
```

当然，这里描述了表单的多种方式和样式：

*   [http://agiletoolkit.org/doc/form/styling](http://agiletoolkit.org/doc/form/styling)
*   [http://agiletoolkit.org/codepad/gui/formstyle](http://agiletoolkit.org/codepad/gui/formstyle)

# java - Java Servlet 错误“资源不可用”

> ID：11620150
> 
> 赞同：1
> 
> 时间：2012-07-23T20:38:18.207
> 
> 标签：java, jsp, tomcat, servlets

我正在尝试构建一个 Java servlet，并且我已经按照我的教授给我们班级的指示做了所有事情，但是我遇到了一个奇怪的错误。

背景：我正在使用 Java EE Helios 和 Tomcat 7。

我在 Eclipse 中启动了一个新的动态 Web 项目，我创建了一个 index.jsp 页面，它只获取用户名并将其发送到 servlet，然后应该打印出 Hello, [username]。该代码是教授给我们的所有示例代码，并为我班上的其他人工作。

我制作了一个名为 ServletHome 的新 Servlet，它位于一个名为 servlets 的包中。

当我从 Eclipse 运行程序时，它可以正常启动 Tomcat，没有问题。我可以导航到 index.jsp 页面，它看起来不错。

问题是，当我填写我的姓名并按下“提交”按钮时，我收到一个 tomcat 404 错误消息：“请求的资源 (/MyFirstServlet/ServletHome) 不可用。”

有任何想法吗？

谢谢！！

--- 编辑：代码 ---

index.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="ServletHome" method="POST">
    First Name: <input type="text" name="firstName" size="20"><br>
    Last Name: <input type="text" name="lastName" size="20"> <br>
    <br> <input type="submit" value="Submit">
</form>
</body>
</html> 
```

ServletHome.java：

```
package servlets;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ServletHome extends HttpServlet {

private static final long serialVersionUID = 1L;
public ServletHome() {
    super();
}

protected void doGet(HttpServletRequest request, HttpServletResponse response) 
throws ServletException, IOException 
{
}

/**
 * The function that gets the name and returns an HTML file with Hello to them
 * @param request
 * @param response
 * @throws ServletException
 * @throws IOException
 */
protected void doPost(HttpServletRequest request,
                                            HttpServletResponse response) 
throws ServletException, IOException {

    //set type of output
    response.setContentType("text/html;charset=UTF-8");

    //get writer
    PrintWriter out = response.getWriter();

    //get first name
    String firstName = request.getParameter("firstName").toString();

    //get last name
    String lastName = request.getParameter("lastName").toString();

    //write the file
    out.println("<html>");
    out.println("<head>");
    out.println("<title>Test Title</title>");
    out.println("</head>");
    out.println("<body>");
    out.println("<p>Welcome, " + firstName + " " + lastName + "!</p>");
    out.println("</body>");
    out.println("</html>");

    out.close();
}
} 
```

网页.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE web-app
PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
        <servlet>
            <servlet-name>ServletHome</servlet-name>
            <servlet-class>servlets.ServletHome</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>ServletHome</servlet-name>
            <url-pattern>/servlets/*</url-pattern>
        </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:01:44.983

该资源不可用，因为：

1.  您的操作属性错误，或者；
2.  您没有正确映射您的 servlet。为此，您可以：

使用 @WebServlet 注释，因为您使用的是 Tomcat 7：

```
@WebServlet( name = "ServletName", urlPatterns = { "/path/to/your/servlet/myName" } )
public class ServletName extends HttpServlet {
    // your code here
} 
```

**或者**在 web.xml 中映射您的 servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <!-- more code here... -->
    <servlet>
        <servlet-name>ServletName</servlet-name>
        <servlet-class>yout.package.here.ServletName</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletName</servlet-name>
        <url-pattern>/path/to/your/servlet/myName</url-pattern>
    </servlet-mapping>
    <!-- more code here... -->
</web-app> 
```

您需要注意的另一件事是，您必须实现与您希望 servlet 服务的 HTTP 方法（get、post 等）相对应的 doXXX 方法。

要通过您的表单请求此 servlet，您需要将 action 属性设置为：

```
<form action="/path/to/your/servlet/myName">
    <!-- form fields here... -->
</form> 
```

最后，您可以使用表单中的 method 属性来选择浏览器将用来请求 Servlet 的 HTTP 方法。如果您不提供，则默认方法是**get**。正如我已经说过的，如果使用get方法，则需要在servlet中实现doGet方法。

# python - python中以0开头的数字是什么意思？

> ID：11620151
> 
> 赞同：69
> 
> 时间：2012-07-23T20:38:18.643
> 
> 标签：python, python-2.x

当我在 python 中输入前面带有 0 的小整数时，它们会给出奇怪的结果。为什么是这样？

```
>>> 011
9
>>> 0100
64
>>> 027
23 
```

我正在使用 Python 2.7.3。我已经在 Python 3.0 中对此进行了测试，显然现在这是一个错误。所以它是特定于版本的。

它们显然仍然是整数：

```
>>> type(027)
<type 'int'> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-23T20:40:01.187

这些是以 8 为基数（八进制数）表示的数字。一些例子：

### Python 2（旧格式）

**注意**：这些表单仅适用于 Python 2.x。

`011`等于 1⋅8¹ + 1⋅8⁰ = 9，

`0100`等于 1⋅8² + 0⋅8¹ + 0⋅8⁰ = 64，

`027`等于 2⋅8¹ + 7⋅8⁰ = 16 + 7 = 23。

### Python 3（新格式）

在 Python 3 中，必须使用`0o`而不是仅仅`0`表示八进制常量，例如`0o11`or`0o27`等​​。Python 2.x 版本 >= 2.6 支持新旧格式。

`0o11`等于 1⋅8¹ + 1⋅8⁰ = 9，

`0o100`等于 1⋅8² + 0⋅8¹ + 0⋅8⁰ = 64，

`0o27`等于 2⋅8¹ + 7⋅8⁰ = 16 + 7 = 23。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-07-23T20:41:33.370

在 Python 2（和其他一些编程语言）中，这些表示[八进制数](http://en.wikipedia.org/wiki/Octal)。

在 Python 3 中，`011`不再起作用，您可以使用它`0o11`。

*作为对编辑的回应*：它们是常规整数。它们只是以不同的方式指定；并且它们被 Python 自动转换为内部整数表示（实际上是 base-2，因此两者`9`和`011`都在内部转换为`0b1001`）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-23T20:40:51.363

八进制数字系统中的数字。其他前缀`0x`用于十六进制和`0b`二进制。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-02T04:38:17.317

Python 版本 2 和 3 都理解用前导 '0o' 和 '0O'（大写 o）编写的八进制，因此在使用 Python 2.x 时也要养成使用 if 的习惯。

仅在字符串中的数字中使用前导零。

您可以使用 int() 转换来自任何其他基本系统的整数。

`>>> int(0o20)`

```
16 
```

如果您希望您的输出以前导零显示，请按照以下答案定义它： [Display number withleading zeros](https://stackoverflow.com/questions/134934/display-number-with-leading-zeros)

如果您打算使用邮政编码，最好在所有方面都将它们视为字符串。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-23T20:40:29.617

这些是八进制数（以 8 为底，值 0 - 7）

您可以使用[oct()](http://docs.python.org/library/functions.html#oct)函数将十进制数转换为八进制数。

```
In [125]: for i in range(10):
   .....:     print '{:5} {:5}'.format(i, oct(i))
   .....:
    0 0
    1 01
    2 02
    3 03
    4 04
    5 05
    6 06
    7 07
    8 010
    9 011 
```

并使用具有适当基数的[int()](http://docs.python.org/library/functions.html#int)函数将八进制值转换为整数（在本例中为 8）：

```
int(str(17), 8)
Out[129]: 15 
```

类似的规则/函数集适用于使用[hex()](http://docs.python.org/library/functions.html#hex)函数的十六进制数（基数 16）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-23T20:40:08.580

这很容易。它们是八进制数。

[http://en.wikipedia.org/wiki/八进制](http://en.wikipedia.org/wiki/Octal)

还有一些以 开头的数字`0x`。它们是十六进制数：

```
>>> 0x51
81 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-25T16:10:18.007

它们显然是八进制（以 8 为基数）数字，而 0 只是 Python 2 过去使用的过时前缀。

在 Python 3 中，您必须`0o11`改为：。

它们仍然是整数，但对它们进行操作会以常规的 base-10 形式给出结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-04T08:49:32.927

我已经试过了。我学到了一点。从 Java 中，我知道这是一个陷阱：前导零引入了八进制数。我有同事没有回应。不知道经过多年的Java经验。

现在我很感兴趣 Python 中的行为是什么。我很欣赏从 Python 2 到 Python 3 的变化。这是一个陷阱，我一直不明白为什么 Java（一种专注于“简单易用”的年轻语言）可以从 C 中接管那个愚蠢的解决方案。

可能会意外键入前导零作为前缀（错误的解决方案）。永远不会意外键入十六进制数的 0x（好的解决方案）。但是 0 和 o 相似，因此我认为 Python 中的 0o23 不是一个完美的解决方案。在我看来， 0c23 (oc **tal** ) 将是一个更好的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-12T21:13:53.517

数字文字的最新 Python 规范在[PEP-3127 "Integer Literal Support and Syntax"中](https://www.python.org/dev/peps/pep-3127/)

011 的语法已在 Python 3.0 中删除。0o11 的语法已在 Python 2.6 中添加，它是 Python 3.0 之后唯一支持的语法。Python 2 中没有`__future__`导入会禁止或至少警告带有前导零的数字文字，因此开发人员必须知道 011 的含义以及应该避免它（并且实际上可以避免它）。

# python - 当 y 是布尔值而不导入模块时，是否有更短的方法来编写“x = not y”？

> ID：11620152
> 
> 赞同：0
> 
> 时间：2012-07-23T20:38:19.287
> 
> 标签：python

只是想知道是否有一种更智能、更短的方法可以在 python 中编写它。

```
y = False
x = not y 
```

在javascript中我会：

```
y = false,
x = !y 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:41:12.747

不，这是最短的方法（您不必导入任何模块）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T20:40:34.633

您要保存 3 个字符？

警告：你不应该这样做。人们会查看您的代码并执行此操作

![掌心](../Images/ac7a528a8bd8ee4ec0213f7c854d927c.png)

你可以这样做：

```
y=0;x=1-y 
```

您在作业中节省了 6 个字符，在`y`作业中节省了 4 个字符`x`！欢呼！还删除了那个讨厌的换行符。

编辑：`y`为了对称而改变，并删除了空格，因为嘿，我们在这里减少了字符数，不是吗？还添加了猫。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:44:46.093

如果您使用的是 Python 的内置布尔对象——不，'not y' 非常简单。Python 不使用“！” 运算符，除非进行布尔检查（z != y => True 或 False 对象）。

对于经常使用 Python 的人来说，这不是语法负担（比 javascript/C 多 3 个字符）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T20:45:04.210

```
y=False
x=not y 
```

这不仅更短，而且更丑！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T02:34:41.770

或者这是为了节省1个字符而不是丑陋？

```
y = False
x = True 
```

# java - 如何在多个 jpanels 中使用变量？

> ID：11620154
> 
> 赞同：2
> 
> 时间：2012-07-23T20:38:27.467
> 
> 标签：java, swing, jpanel

我有一个带有 var 的框架，我将该 var 添加到 JPanel，如果我想将相同的 var 添加到另一个 JPanel，它会从第一个 JPanel 中消失。我想给我的问题一个合乎逻辑的解释，谢谢！我想将我的 JLabel 存储在我的两个 jpanels 中。

```
public class Gui {
    JPanel panel1, panel2;
    JLabel text = new JLabel("some text");
    JFrame frame = new JFrame();

    public Gui {
        panel1 = new JPanel();
        panel1.setLayout(null);
        panel1.add(text);
        panel1.getComponent(0).setBounds(50,50,50,50);
        panel1.setBorder(BorderFactory.createLineBorder(Color.black));
        panel1.setBounds(x,y,w,h);
        // it`s working, the labels it`s visible

        panel2 = new JPanel();
        panel2.setLayout(null);
        panel2.add(text);
        panel2.getComponent(0).setBounds(100,100,50,50);
        panel2.setBorder(BorderFactory.createLineBorder(Color.black));
        panel2.setBounds(x,y,w,h);
        //it`s not working, the label ins`t visible ...

        frame.add(panel1);
        frame.add(panel2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:48:04.940

**免责声明：**我正在编辑我的答案以回应 OP 的评论。但是，我仍然不完全确定问题的一些细节。随着更多的澄清，我很乐意编辑我的答案。

**答：**一种可能的解决方案是创建您正在使用的 Swing 组件的子类。例如，

```
public class MyPanel extends JPanel {
  private JLabel label = new JLabel("some text");

  public MyPanel() {
    this.add(label);
  }
} 
```

现在您可以创建多个实例`MyPanel`，每个实例都有自己的 JLabel。然后您可以将这些面板添加到您的框架中。

**补充：**使用评论中给出的附加信息，我会更进一步，创建一个自定义 JFrame 类：

```
public class MyFrame extends JFrame {
  private MyPanel panel = new MyPanel();

  public MyFrame() {
    this.add(panel);
  }
} 
```

现在您可以创建多个`MyFrame`. 如果您想更进一步，您可以向这两个自定义类的构造函数添加参数，以`JLabel`在每个实例中将文本设置为不同的值`MyFrame`。我将把细节留给读者作为练习。（当然，如果你卡住了，请询问。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:18:10.733

就像在其他帖子中讨论的那样。所有 Swing UI 组件（即包括 JLabel）只能有一个父级（即 JPanel）。如果您将其添加到另一个面板，它将自己从先前的父级中删除。这种行为有很好的理由。例如，JPanel 1 可能不使用与 JPanel 2 相同的布局，因此标签必须支持每个 JPanel 中的两个不同位置。使用对象作为组件的全部意义在于提供对对象内部数据的封装，例如（字体、父级中的位置、宽度、高度等）。如果您想要两个视觉元素，只需创建另一个元素。现在这会产生一个问题“如何在所有这些控件之间同步数据？” 这基本上是在讨论如何为您的程序构建合适的 Swing 架构？

您不想做的是使用 Swing 组件模型（即 Jabel、JTextField 等）作为您的数据模型。在阅读了您的问题和代码之后，我相信这就是您正在做的事情。你可能没有意识到。UI 组件应仅用于显示。它们反映了数据模型中的内容。因此，您需要创建一个不涉及 Swing 的模型。无论它如何显示，它都应该为您的问题建模。这意味着你不应该假设它总是 Swing 或 web 等。

这有非常实际的原因。假设您想在一年内重新设计您的 UI。如果您将视图组件和数据模型组合在一起，您几乎必须完全重新开始。即使您不切换技术。假设您正在从 JList 切换到 JTable 或 JTreeTable。如果您不从模型中分割视图，只需简单更改屏幕上的组件类型就绝对是一场噩梦。加上视图显示的东西，但模型可能需要不向用户显示但与正在显示的内容相关联的信息。例如，数据库中行的 ID。如果你把视图和数据模型塞在一起，你必须玩一些小技巧来以奇怪的方式存储这些不可见的信息。让其他人难以理解的事情。

如果你不明白我的意思，你要么在 6 个月内进行第一次重大重新设计，要么现在就省去一些痛苦，试着理解我现在的意思。只需简单的 POJO 就足够了。然后与您的 Swing 组件共享这些 POJO。例如：

```
MySpecialPanel panel1 = new MySpecialPanel();
MyOtherSPecialPanel panel2 = new MyOtherSpecialPanel();
frame.add( panel1 );
frame.add( panel2 );

...a little while later...

MySpecialPOJO specialPOJO = ...some call to a service...;
panel1.setSpecialPOJO( specialPOJO );
panel2.setSpecialPOJO( specialPOJO ); 
```

请注意，我创建了 JPanel 的两个子类，称为 MySpecialPanel 和 MyOtherSpecialPanel。他们在那里创建包含在其中的组件。然后公开一个获取 MySpecialPOJO 类型的数据模型对象的 setter 方法。在这些方法中，我们可能会看到如下内容：

```
public void setSpecialPOJO( MySpecialPOJO specialPOJO ) {
   this.model = specialPOJO;
   textField1.setText( specialPOJO.getName() );
   textField2.setText( specialPOJO.getDescription() );
   radioButtonGroup.setSelected( specialPOJO.getGender() );
   ....
} 
```

Now you have a way to take a model object, and update the relative UI components that make up that view. Notice it doesn't care about any other external dependencies (ie where it got the object from). It just updates the controls it owns to reflect what's carried by the POJO. Now if you follow these simple rules it makes instantiating your special panels easy. Whether you need only one instance or many instances. Also if you need to move panels within your program it's pretty easy to do that if you reduce your dependencies to just your POJOs. There's a lot more to this, but for now this will get you started. You still have to figure out how to get data out of the UI and back into your POJOs (events!). Controllers, Services, etc.

This might help you as well:

[Up-to-date Swing MVC example + Question](https://stackoverflow.com/questions/2330385/up-to-date-swing-mvc-example-question/2338877#2338877)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T20:43:00.350

你不能。正如您所注意到的，一个控件一次只能附加到一个窗口，如果您尝试将它附加到另一个窗口，它将从第一个窗口中删除。

建议：

```
panel2.add(text.clone()); // clone the existing label
panel2.add(new JLabel("some text")); // make a new label from scratch 
```

# java - Java新手，似乎无法修复错误；需要类、接口或枚举。274062

> ID：11620155
> 
> 赞同：2
> 
> 时间：2012-07-23T20:38:36.747
> 
> 标签：java, netbeans

我刚开始我的 Java 教程，作为我的第一个练习的一部分，我被要求：

a) 为现实世界的对象创建一个新类（我选择了手机）：mobile b) 对于这个类，创建一个定义其行为的接口，然后要求您的类实现它。

我在这个练习中使用了 Netbeans，这是我编写/扩展的代码：

```
 package mobile;

    /**
     * @param args the command line arguments
     */

    public static void main(String[] args) {

public class Mobile {
    int volume = 0;
    int ringtone = 0;

void volumeUp (int increment){
    volume = volume + increment;
}
void changeringtone (int newValue){
    ringtone = newValue;
}
void volumeDown (int decrement){
    volume = volume - decrement;
}
void printStates(){
    System.out.println("ringtone:" + ringtone + "volume:" + volume);
} 
```

}

但是，当我运行它时，我收到此错误消息：

```
java.lang.NoClassDefFoundError: mobile/Mobile (wrong name: mobile/mobile)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

找不到主类：mobile.Mobile。程序将会退出。

我恳请是否有人可以请，首先，向我指出我的代码中的错误，其次，我如何在 Netbeans 中解决这些问题。

先感谢您！

卡拉梅勒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:39:07.940

main 方法（任何方法）应该在类内。在打包和导入之后，它应该是类。请花一些时间阅读[Java Syntax](http://www.tutorialspoint.com/java/java_basic_syntax.htm)。

```
 public class Mobile {
    //Variables declarations 
    //Instance blocks etc.,
     public static void main(String[] args) {

//Your code here
 }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:57:01.743

除了 java 语言问题（方法位于类主体中）之外，我想鼓励您更改小型应用程序的*体系结构*。

您被要求先编写一个接口，然后再编写该接口的实现。你选择了一部手机，不错，但是你`Mobile`应该是接口，另一个类（`IPh**e`或`No**a`）应该提供该接口的真正实现。

然后我会为 main 方法使用第三个类。命名它`User`- 这将是调用`Mobile`.

简而言之：

```
public class Me {
  public static void main(String[] args) {
    Mobile myPhone = new Nokia();  // we "buy" a mobile
    myPhone.setVolume(11);         // that's more then 10 ;)
  }
} 
```

* * *

```
public interface Mobile {
  void setVolume(int level);  // as an example
} 
```

* * *

```
public class Nokia implements Mobile {
  // (1) a constructor
  // (2) implementations for all methods defined on Mobile
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:45:20.793

在这种情况下，您甚至可能不需要 main() 方法，除非您正在编写代码来测试您的类。正如 thinksteep 所建议的，您可以在 Mobile 类中移动 main() 方法。或者，您可以将其全部删除以编译您的代码。但是，请注意，您必须在*某个地方*有一个 main() 方法才能运行您的程序。

# php - 如何使用 PHP 合并两个 MPEG 文件

> ID：11620164
> 
> 赞同：1
> 
> 时间：2012-07-23T20:39:13.280
> 
> 标签：php, mpeg

我正在使用 Google Text-to-Speech 制作游戏，但 TTS 每个请求限制为 100 个字符。所以，我拆分了文本，我做了不止一个请求来合成完整的文本。

现在，我将文本声音的二进制文件拆分为两个文件。

只是做一个简单的

```
$audio1 .= $audio2 
```

不起作用。

文件类型是 MPEG，因此它与 MP3 不同。

我想我需要清除第二个文件的标题，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:43:06.880

有一个[FFmpeg](http://ffmpeg.org/)工具可以处理媒体文件，[例子concat两个文件](http://ulyssesonline.com/blog/2009/12/03/concatenate-video-files-using-ffmpeg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:39:57.673

我使用您的 URL 进行了测试，它生成 MP3 文件，在 Google 上查找后可以完成：
[https](https://www.dropbox.com/sh/iwbzqdvsxymytgu/c2SaOVjcHY) ://www.dropbox.com/sh/iwbzqdvsxymytgu/c2SaOVjcHY （托管在 Dropbox 上用于音频文件）

# sql - 在不知道其名称的情况下删除默认聚集索引

> ID：11620165
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:39:15.540
> 
> 标签：sql, sql-server-2008, indexing

我编写了一个脚本来创建一些表（如果它们存在，它以前会删除它们），然后尝试在每个表上创建两个索引。

第一个索引使用主键列创建非聚集索引，第二个索引使用另一列创建聚集索引。这是因为主键列是 GUID 而不是 int。

如果我不知道它的名称，如何删除默认索引？或者如何为主键列索引指定名称以便删除它？或者更好的是，如何在 Create Table 语句中指定我需要的 2 索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:56:51.627

您可以在创建表后立即定义两个索引：

```
CREATE TABLE dbo.YourTable ( ...... )
GO

ALTER TABLE dbo.YourTable
ADD CONSTRAINT PK_YourTable PRIMARY KEY NONCLUSTERED (YourGuidColumn)
                                      ****************
                  this is crucial ! Otherwise, your PK will be clustered!

CREATE CLUSTERED INDEX IX01_YourTable ON dbo.YourTable(YourOtherColumn)

or even better:  
CREATE UNIQUE CLUSTERED INDEX IX01_YourTable ON dbo.YourTable(YourOtherColumn) 
```

这应该在单独的列上创建一个**非聚集主键**和一个单独的（最好是唯一的）**聚集索引**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T20:45:27.597

```
SELECT * FROM sys.indexes 
```

但是，我不明白在您的流程中您实际上必须删除索引的位置。

您说您正在创建一些表，然后在每个表上创建两个索引。

如果您在开始时 DROPping 现有表，则会自动删除所有索引。

没有默认索引之类的东西。

表可以是堆或聚集索引。如果删除聚集索引，则表将转换为堆，并且必须更新任何非聚集索引以指向无序堆中的数据。

你可以一次创建这样的：

```
CREATE TABLE dbo.tbl
(
    Id int NOT NULL IDENTITY (1, 1) CONSTRAINT UK_ID UNIQUE CLUSTERED,
    SomeUUID UNIQUEIDENTIFIER NOT NULL CONSTRAINT PK_SomeUUID PRIMARY KEY NONCLUSTERED
) 
```

这是一个 SQLFiddle：[http ://sqlfiddle.com/#!6/d759e/12](http://sqlfiddle.com/#!6/d759e/12)

# html - 在 P 元素中发现额外的 2px（短小提琴）

> ID：11620166
> 
> 赞同：0
> 
> 时间：2012-07-23T20:39:31.487
> 
> 标签：html, css

这是一个非常短的小提琴，其中包括一个 20 像素 x 20 像素的“标尺”。我希望我的 p 标签高 20 像素...10 像素文本，顶部和底部填充 10 像素（5 像素 + 5 像素）。

但是它看起来大约是 22px。

[http://jsfiddle.net/BNnhp/30/](http://jsfiddle.net/BNnhp/30/)

我已经使用margin 0px、padding 0px和line-height 100%重置了body标签、p标签和div标签。

以前我有一个类似的问题，通过将 line-height 设置为 100% 来解决....但这在这里不起作用？

我想知道确切的原因 - CSS 属性和值。

但是出于测试目的，我单击了 jsfiddle 中的规范化框，这也没有效果。

在此处添加了更多重置：

[http://jsfiddle.net/BNnhp/32/](http://jsfiddle.net/BNnhp/32/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:57:45.057

您设置为 10px 的事实`font-size`并不能保证高度也会为 10px。一些特定的字母/符号高于其他字母/符号。

如果将其更改为 8px，如下所示：

```
#hold_name{
    font-size: 9px;
} 
```

然后你会注意到容器大小也发生了变化。这是因为

标签重新调整自身大小以包含其中的文本。你可以为你的设置一个特定的高度

也会改变：

```
#hold_name{
    font-size: 9px;
    height: 10px;
} 
```

`<p>`并且无论字体大小是多少，都会将包含元素的高度设置为 10 像素。

结合顶部和底部的 5px 填充，总和为 10px + 5px + 5px = 20px 高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:55:55.410

我创建了一个[小测试用例](http://jsfiddle.net/BNnhp/34/)，但它在那里工作得很好。所以，我回到你的答案，发现你将`p`'`display`值设置为`inline`，这导致了 2px - 3px 的差异（[固定版本](http://jsfiddle.net/BNnhp/37/)）。要修复，请按如下方式更改您的 CSS（查看评论）：

```
/* ... */
#hold_name{
  padding: 5px 5px 5px 5px;
  /* position:relative; -- Don't need */
  /* top: 0px; -- Don't need */
  color:#000000;
  /* display:inline; -- Don't need */
  background: #ffffff;
  font-size: 10px;
  margin:0; /* Need to add */
  line-height:100%;
}
#hold_name:hover{
}
#wrap{    
  position: absolute;
  top: 20px; /* Change to 20px from 24px */
  visibility: hidden;
  margin: 0;
  padding: 0;
  border-left: 1px solid #007fa5;
  border-bottom: 1px solid #007fa5;
  border-right: 1px solid #007fa5;
}
/* ... */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:01:56.463

在考虑其他答案的同时，您还可以更改 的 padding 属性`.menu-drop`以匹配以下内容，然后添加 20px 的行高：

```
.menu_drop{    
  position: relative;
  margin: 0;
  padding: 0 10px; /* modified padding value */
  white-space: nowrap;
  text-align: left;
  text-decoration: none;
  background: #bfddec;
  color: #2875DE;
  font: 11px arial;
  line-height: 20px; /* new line-height property */
} 
```

# android - CookieSyncManager::createInstance() IllegalStateException？

> ID：11620168
> 
> 赞同：4
> 
> 时间：2012-07-23T20:39:38.957
> 
> 标签：android, facebook-android-sdk

我的应用最近开始出现很多 CookieSyncManager 异常：

```
java.lang.IllegalStateException: CookieSyncManager::createInstance() 
    needs to be called before CookieSyncManager::getInstance()
at android.webkit.CookieSyncManager.getInstance(CookieSyncManager.java:81)
at android.webkit.CookieManager$2.run(CookieManager.java:532)
at java.lang.Thread.run(Thread.java:1096) 
```

从堆栈跟踪中可以清楚地看到错误，但它的来源不是（这是来自 Play 商店报告）。附加到堆栈跟踪的用户消息表明它发生在我使用 facebook SDK 的地方，并且它确实使用了 CookieSyncManager：

```
// From Facebook.java
private void startDialogAuth(Activity activity, String[] permissions) {
    ...
    CookieSyncManager.createInstance(activity); // <-- here
    dialog(activity, LOGIN, params, new DialogListener() {
        public void onComplete(Bundle values) {
            CookieSyncManager.getInstance().sync(); // <-- here
            ... 
```

[https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java#L342](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java#L342)

这对我来说看起来不错，但是上面的用法有什么问题吗？我无法在我的任何测试设备上重现错误，也许存在实施差异？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:03:24.997

它应该像例外说：

```
public void onComplete(Bundle values) {
   CookieSyncManager.createInstance( activity );    // <-- this line was missing
   CookieSyncManager.getInstance().sync();
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T12:45:26.817

根据android文档

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    CookieSyncManager.createInstance(MainActivity.this);
    CookieSyncManager.getInstance().startSync();
}
public void onReume(){
    super.onResume();
    CookieSyncManager.getInstance().stopSync();
}
public void onPause(){
    super.onPause();
    CookieSyncManager.getInstance().sync();
} 
```

# windows - 在 cygwin 的 xterm 会话中创建多个选项卡

> ID：11620171
> 
> 赞同：0
> 
> 时间：2012-07-23T20:39:46.420
> 
> 标签：windows, linux, terminal

我是 cygwin 的新手，因为我通常使用 Linux。我有一个关于它的快速问题。在 cywin 的 xterm 窗口中，如何创建多个终端选项卡，以便可以在同一个窗口中拥有多个 ssh（带 X11 转发）会话？我试着用谷歌搜索这个，但找不到任何有用的链接解决这个问题......我确信有一些方法可以做到这一点，只是想不通。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:37:05.150

如果您已经准备好启动 X11，请查看 mrxvt。它有多个选项卡，最后我检查了一下，它在 Cygwin 下顺利构建。

还有终结者，它是一个 java 终端仿真器... ISTR 它不需要 X11。

# image - 图像表单域 Sencha Touch 2

> ID：11620172
> 
> 赞同：0
> 
> 时间：2012-07-23T20:39:47.413
> 
> 标签：image, sencha-touch-2

我正在尝试为其中一个字段包含图像文件的*URL的模型创建**Sencha Touch 2*表单面板。如果我包含一个文本字段，它将正确显示*URL*的文本，但我真正想要的是**显示在该 URL 找到的图像**，我不知道该怎么做。如果我使用，我想我需要一个，并且我不确定如何指定所需的值在表单字段之一中。我的观点是这样的：****`xtype: image``src config`****

 ****```
Ext.define("CatalogApp.view.ItemDetailView", {
   extend: "Ext.form.Panel",
   requires: "Ext.form.FieldSet",
   alias: "widget.itemdetailview",
   config:{
      scrollable:'vertical'
   },
   initialize: function ()
   {

      this.callParent(arguments);

      var backButton = {
         xtype: "button",
         ui: "back",
         text: "Home",
         handler: this.onBackButtonTap,
         scope: this
      };

      var topToolbar = {
         xtype: "toolbar",
         docked: "top",
         title: "Item Detail",
         items: [
            backButton
         ]
      };

      var mainLayout = {
         xtype: "container",
         layout: 'hbox',
         items: [
            {
               xtype: 'textfield',
               width: 200,
               name: 'thumbUrl'
            },
            {
               xtype: "fieldset",
               flex: 1,
               items : [
                  {
                     xtype: 'textfield',
                     name: 'itemNbr',
                     label: 'Item Nbr',
                     disabled: true
                  },
                  {
                     xtype: 'textfield',
                     name: 'itemDesc',
                     label: 'Item Desc',
                     disabled: true
                  }
               ]
            }
         ]
      };

      this.add([
         topToolbar,
         mainLayout
      ]);
   },

   onBackButtonTap: function ()
   {
      console.log("backToHomeCommand");
      this.fireEvent("backToHomeCommand", this);
   }

}); 
```

如何设置此视图以正确显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:16:18.437

您必须定义新的 Sencha 组件：ImageField

```
Ext.define('Ext.ux.field.ImageField', {
extend: 'Ext.field.Field',
requires: [
    'Ext.Img'
],
xtype: 'imagefield',
config: {
    component: {
        xtype: 'image'
    }
},

updateValue: function(value, oldValue) {
    var me = this,
        component = me.getComponent();

    component.setSrc(value);
},

proxyConfig: {
    width: '100%',
    height: '100%'
}

}); 
```

比形式：

```
Ext.define("CatalogApp.view.ItemDetailView", {
extend: "Ext.form.Panel",
requires: "Ext.form.FieldSet",
alias: "widget.itemdetailview",
config:{
  scrollable:'vertical'
},
initialize: function ()
{

  this.callParent(arguments);

  var backButton = {
     xtype: "button",
     ui: "back",
     text: "Home",
     handler: this.onBackButtonTap,
     scope: this
  };

  var topToolbar = {
     xtype: "toolbar",
     docked: "top",
     title: "Item Detail",
     items: [
        backButton
     ]
  };

  var mainLayout = {
     xtype: "container",
     layout: 'hbox',
     items: [
        {
           xtype: 'imagefield',  // only this change
           width: 200,         
           height: 150,
           name: 'thumbUrl'
        },
        {
           xtype: "fieldset",
           flex: 1,
           items : [
              {
                 xtype: 'textfield',
                 name: 'itemNbr',
                 label: 'Item Nbr',
                 disabled: true
              },
              {
                 xtype: 'textfield',
                 name: 'itemDesc',
                 label: 'Item Desc',
                 disabled: true
              }
           ]
        }
     ]
  };

  this.add([
     topToolbar,
     mainLayout
  ]);
},

onBackButtonTap: function ()
{
   console.log("backToHomeCommand");
   this.fireEvent("backToHomeCommand", this);
}

}); 
```

干杯，奥列格****

# gcc - ARM：将数据从核心寄存器传输到其他寄存器的不同方式

> ID：11620173
> 
> 赞同：1
> 
> 时间：2012-07-23T20:39:57.910
> 
> 标签：gcc, assembly, arm, cpu-registers, armv7

据我所知，有许多不同的方法可以将数据从 ARM 核心寄存器（`R`寄存器）传输到其他寄存器。我找到了这两种方法：

1.  `MCR`使用指令从核心寄存器传输到协处理器寄存器

2.  `D`使用`VMOV`指令从核心寄存器传输到寄存器

我需要遍历每种方式并​​找出每种方式的延迟。但是现在，我想知道是否还有其他方法可以将数据从核心寄存器传输到我可能已经忘记的其他寄存器（不是内存）。

我的架构是 ARMv7-A，我使用的是 GCC 4.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:49:14.273

指令时序是特定于微架构的（即 ARMv7 架构的不同实现会有不同的延迟）。

您需要在 TRM 中查找您所针对的特定处理器，以找到每个实现的延迟。

# objective-c - NSURLConnection 总是连接到同一个 URL

> ID：11620175
> 
> 赞同：0
> 
> 时间：2012-07-23T20:40:01.127
> 
> 标签：objective-c, ios, nsurlconnection

每当我在我拥有的类中创建一个 NSURLConnection 时，它总是连接到该类连接的第一个 URL。它有一个`conn`存储 NSURLConnection 的 ivar，这是连接的方法：

```
-(void)getMoreProblems
{
    problemsPage++;
    NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://projecteuler.net/problems;page=%d",problemsPage]];
    NSURLRequest *req=[NSURLRequest requestWithURL:url];
    NSLog(@"%p",conn);
    conn=[[NSURLConnection alloc] initWithRequest:req delegate:self];
    NSLog(@"%p",conn);
} 
```

我检查`NSLog`了 URL 的描述和 Connection 的指针它们是不同的，并告诉 UIApplication 在 safari 中加载 URL。据我所知，它会尝试加载正确的页面。我也尝试了 POST 和 GET，但没有任何区别。这可能是什么原因造成的？

**为任何有类似问题的人编辑：**

我的问题最终是我没有`NSMutableData`在每个页面加载后重新初始化我存储的连接数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:15:07.590

这不是一个真正的答案，但评论太长了。我看不出你发布的代码有什么问题。我将您的 getMoreProblems 代码粘贴到一个新项目中，并添加了查看结果所需的委托方法——据我所知，它运行良好。我可以在结果字符串中看到问题编号在我收到的第一页上以 1 开头（从第一次调用 getMoreProblems 开始），在第二次调用 getMoreProblems 时从问题 51 开始。我添加到您的 getMoreProblems 方法中的唯一内容是最后的 if-else 子句。这是我使用的代码：

```
@synthesize window = _window,receivedData;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    problemsPage = 0;
    [self getMoreProblems];
}

-(void)getMoreProblems {
    problemsPage++;
    NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://projecteuler.net/problems;page=%d",problemsPage]];
    NSURLRequest *req=[NSURLRequest requestWithURL:url];
    NSLog(@"%p",conn);
    conn=[[NSURLConnection alloc] initWithRequest:req delegate:self];
    NSLog(@"%p",conn);
    if (conn) {
        self.receivedData = [NSMutableData data];
    } else {
        NSLog(@"The Connection Failed");
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"%@",response.URL);
    [self.receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"In connection:didReceiveData:");
    [self.receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"Succeeded! Received %lu bytes of data",[receivedData length]);
    NSString *page = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",page);
    [self performSelector:@selector(getMoreProblems) withObject:nil afterDelay:5];
} 
```

所以，我无法重现你的问题——我猜它在你没有发布的一些代码中的其他地方。

# 3d - simple-openni / processing - 仅在某个 z 深度记录

> ID：11620181
> 
> 赞同：0
> 
> 时间：2012-07-23T20:40:32.060
> 
> 标签：3d, processing, kinect, openni

我正在关注 simple-openni 库中的 RecorderPlay 示例进行处理：

[http://code.google.com/p/simple-openni/](http://code.google.com/p/simple-openni/)

它记录到 ONI 文件，一种保留深度和 rgb 信息的视频格式。但目前，它捕获了整个图像，我希望能够仅捕获某个 z 深度范围。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:27:44.297

我不认为您可以配置要记录的深度范围，但是您可以做的是处理从 .oni 记录中读取的信息：

```
import SimpleOpenNI.*;

SimpleOpenNI  context;
boolean       recordFlag = true;
boolean       saving = false;
int frames = 0;
int savedFrames = 0;
//change these two values as you wish:
float minZ = 100;
float maxZ = 500;

void setup(){
  context = new SimpleOpenNI(this);

  if(! recordFlag){
    if(! context.openFileRecording("test.oni") ){
      println("can't find recording !!!!");
      exit();
    }
    context.enableDepth();
  }else{  
    // recording
    context.enableDepth();
    // setup the recording 
    context.enableRecorder(SimpleOpenNI.RECORD_MEDIUM_FILE,"test.oni");
    // select the recording channels
    context.addNodeToRecording(SimpleOpenNI.NODE_DEPTH,SimpleOpenNI.CODEC_16Z_EMB_TABLES);
  }
  // set window size 
  if((context.nodes() & SimpleOpenNI.NODE_DEPTH) != 0)
    size(context.depthWidth() , context.depthHeight());
  else 
    exit();
}
void draw()
{
  background(0);
  context.update();
  if((context.nodes() & SimpleOpenNI.NODE_DEPTH) != 0) image(context.depthImage(),0,0);
  if(recordFlag) frames++;
  if(saving && savedFrames < frames){
      delay(3000);//hack
      int i = savedFrames;
      int w = context.depthWidth();
      int h = context.depthHeight();
      PrintWriter output = createWriter(dataPath("frame_"+i+".ply"));
      output.println("ply");
      output.println("format ascii 1.0");
      output.println("element vertex " + (w*h));
      output.println("property float x");
      output.println("property float y");
      output.println("property float z");
      output.println("end_header\n");
      rect(random(width),random(height),100,100);
      int[]   depthMap = context.depthMap();
      int     index;
      PVector realWorldPoint;
      for(int y=0;y < h;y++){
        for(int x=0;x < w;x++){
          index = x + y * w;
          realWorldPoint = context.depthMapRealWorld()[index];
          if(realWorldPoint.z > minZ && realWorldPoint.z < maxZ)
            output.println(realWorldPoint.x + " " + realWorldPoint.y + " " + realWorldPoint.z);
        }
      }
      output.flush();
      output.close();
      println("saved " + (i+1) + " of " + frames);
      savedFrames++;
  }
}
void keyPressed(){
  if(key == ' '){
    if(recordFlag){
      saveStrings(dataPath("frames.txt"),split(frames+" ",' '));
      exit();
    }else saveONIToPLY();
  }
}
void saveONIToPLY(){
  frames = int(loadStrings(dataPath("frames.txt"))[0]);
  saving = true;
  println("recording " + frames + " frames");
} 
```

# mysql - 将数据库从 1.5.1.3 更新到 1.5.3.1 OpenCart

> ID：11620188
> 
> 赞同：0
> 
> 时间：2012-07-23T20:40:43.243
> 
> 标签：mysql, upgrade, opencart

我正在尝试将数据从我的表 OpenCart 版本 1.5.1.3 传递到版本 1.5.3.1。我将使用一个新的主题，并且只使用以前版本中使用的几个模块，但不想丢失客户、销售和产品的数据记录。

考虑到这一点，我想最简单的方法是将表转移到 SQL 脚本（我使用 phpmyadmin），但是数据库模式和数据的版本之间存在一些差异，因此我无法从另一个表中传递数据.

作为示例，我将使用 phpmyadmin 导出时具有以下结构的表“地址”1.5.1.3 版本：

```
INSERT INTO `address` (`address_id`, `customer_id`, `firstname`, `lastname`, `company`, `address_1`, `address_2`, `city`, `postcode`, `country_id`, `zone_id`) VALUES
(6, 6, 'Fulano', 'Silva', '', 'My Street, 455', 'Neighborhood 1', 'City 1', 'd9c 5t7', 30, 464),
(2, 2, 'Cicrano', 'Souza', '', 'My Avenue, 921', 'Neighborhood 2', 'City 2', 'd9c 5t7', 30, 464),
(4, 4, 'Beltrano', 'Cabrito', '', 'My Street 2, 191', 'Neighborhood 3', 'City 3', 'd9c 3t7', 30, 464); 
```

并且数据库版本 1.5.3.1 遵循这个模型：

```
INSERT INTO `address` (`address_id`, `customer_id`, `firstname`, `lastname`, `apelido`, `company`, `company_id`, `tax_id`, `address_1`, `numero`, `address_2`, `complemento`, `city`, `postcode`, `country_id`, `zone_id`) VALUES
(6, 6, 'Fulano', 'Silva', '', '', '', '', 'My Street', '455', 'Neighborhood 1', '', 'City 1', 'd9c 5t7', 30, 464),
(2, 2, 'Beltrano', 'Cabrito', '', '', '', '', '', 'My Street 2', '191', 'Neighborhood 3', '', 'City 3', 'd9c 3t7', 30, 464); 
```

这在几个表中重复，现在我如何使用 SQL 或其他更简单的方法仅从 v1.5.1.3 到 v1.5.3.1 获取您想要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:51:46.133

这就是升级脚本存在的原因。[您可以在此处](http://www.opencart.com/index.php?route=documentation/documentation&path=98)了解如何升级

# java - 使用纯 JPA 和 Spring 在视图中打开会话 - 不是休眠会话

> ID：11620189
> 
> 赞同：0
> 
> 时间：2012-07-23T20:40:47.800
> 
> 标签：java, spring, hibernate, jpa, lazy-loading

我正在创建一个使用 JPA 进行数据访问的 Java EE 应用程序。最初我使用 EclipseLink，但它依赖于 Moxy 的捆绑 Geronimo Javamail 实现给我带来了一些奇怪的问题，我无法强制它使用 Sun Javamail，因此我切换到 Hiberate 作为 JPA 提供程序。

EclipseLink 忽略了惰性/渴望注释，它急切地加载所有内容。Hibernate 会注意这些注释，因此不会加载依赖对象。这意味着如果我加载一个人，延迟加载人的父母，如果我在视图中访问父母，它不是延迟加载，我会得到一个异常，说数据库会话已关闭。

我知道有两种方法可以解决这个问题： - 在视图模式/反模式中打开会话（从分层的角度来看这不是很好，并且可能有 N+1 数据库调用问题，但很容易） - 有服务加载视图需要的所有数据的方法（这使得服务层混乱，有很多重复的方法来获取不同数量的数据）

作为参考，我的层是 View -> Controller -> Service -> Entity Object -> JPA。我没有 dto，因为它是一个小应用程序，而且我不喜欢 DTO 反模式。

考虑 View 模式中的 Open Session，问题在于 OpenSessionInViewInterceptor 和 OpenSessionInViewFilter 都是特定于 Hibernate 的，并且都需要您在 Spring 配置文件上声明一个休眠会话。我更喜欢使用配置有 persistence.xml 文件的纯 JPA。

我在这里有什么选择？我可以更改我的 Spring 配置以显式加载 Hibernate，然后在我的应用程序中使用纯 JPA 吗？是否有一种纯 JPA 方式可以实现相同的结果，从视图中延迟加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:45:08.323

*   EclipseLink 忽略标准 JPA 注释听起来很奇怪。
*   javamail 实现不应与 JPA 有任何关系
*   有`OpenEntityManagerInViewX`（过滤器/拦截器）为 JPA 处理相同的场景
*   如果您明智地声明和使用您的集合，您可以轻松摆脱这种模式。

# android - 在圆圈中添加视图 (Android)

> ID：11620193
> 
> 赞同：2
> 
> 时间：2012-07-23T20:41:30.533
> 
> 标签：android, android-layout, geometry, radial

我想在布局中添加一些视图。

我们如何将这些视图放在相对或线性布局或任何其他布局中，与此图像相同。我想用代码来做。

![在此处输入图像描述](../Images/4541c707385f5703bd9bc0612c40d91b.png)

# android - 谷歌云消息传递的目的是什么

> ID：11620198
> 
> 赞同：4
> 
> 时间：2012-07-23T20:41:49.400
> 
> 标签：android, cloud, message

我一直在阅读有关 google Cloud Messaging 的信息，作为开发人员，我的问题是“这是为了什么？” 任何人都可以提供一个例子来说明它的用途吗？我不是在寻找源代码。相反，我对人们使用它的想法感到好奇。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:54:01.893

来自[谷歌文档](http://developer.android.com/guide/google/gcm/index.html)：

> Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

真的很不言自明。它只是一种将小消息从外部/网络服务发送到手机以供应用程序操作的机制。这比使用完全手动编码的协议实现依赖于 JSON 或 XML 之类的完整自定义包要容易得多。（并不是说经常使用“现成的”工具提供了一个非常优雅的解决方案！）

过去我正在实现一个简单的视频播客风格的应用程序；没什么了不起的——只是在等待来自服务器的新内容。在这种情况下，我必须专门编写代码，以便应用程序在启动时查询服务器，然后下载视频文件。另一种选择显然是应用程序每隔*x*分钟或小时查询一次服务器。

现在使用 GCM，我可以重写该应用程序并让服务器通知应用程序，而无需应用程序启动操作。自然，在移动设备上，这比让应用程序连接到服务器并无缘无故地多次查询更可取；并且它也比启动应用程序并在它从服务器请求更新时必须等待更可取。

上一段中的示例是显而易见的应用程序 - 但如果有一些想象，它可以用于更多用途。

我认为要记住的主要事情是*为目的寻找工具，而不是为工具寻找目的*！如果您需要它，它就在那里 - 但不要试图将它楔入不需要的地方！

# linux - 我应该将 SDK 目录放在 Linux 中的什么位置？

> ID：11620204
> 
> 赞同：1
> 
> 时间：2012-07-23T20:42:08.410
> 
> 标签：linux, ubuntu, sdk, directory

我正在我的 Ubuntu 系统上安装 Android SDK，我不想将所有内容都放在我的主目录中。

出于某种原因，LSB 目录层次结构对放置开发工具包的位置保持沉默。创建 /opt/sdks 树或 /usr/local/sdks 或完全在其他地方更正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:45:27.830

这几乎是在你身上。我总是把这些东西放在我的主目录 ~/development 下。

如果您是唯一需要访问 SDK 的用户。无需将其放置在其他地方。

这没有严格的规定！？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:48:51.653

对于可选的东西，有 /opt。例如，QNX 软件开发平台（SDP，与 SDK 相同）默认安装在那里。

# symfony - 使用带有 twitter 引导程序和资产的图标

> ID：11620208
> 
> 赞同：5
> 
> 时间：2012-07-23T20:42:20.997
> 
> 标签：symfony, twitter-bootstrap, less, assetic

我已配置资产并使用以下配置

```
assetic:
    assets:
        global:
            inputs:
                - '%kernel.root_dir%/Resources/public/less/global.less'
    debug:          %kernel.debug%
    use_controller: false
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        less:
            node:       /usr/local/bin/node
            node_paths: [/usr/local/lib/node, /usr/local/lib/node_modules]
            apply_to: "\.less$" 
```

在我的树枝文件中，我有以下内容可以完美地打印出 css 文件。

```
{% stylesheets filter='less,cssrewrite'
   '@global'
%}
<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
{% endstylesheets %} 
```

这是我的 app/Resources/public/global.less 文件

```
@import "../../../../vendor/twitter/bootstrap/less/bootstrap.less";

/*
* Global Styles
*/
body{
    background: #333;
} 
```

问题是我无法使用 Twitter Bootstrap 图标，因为它们是 404。我的图像目前存在于`app/Resources/public/img/`我已经尝试了一切让这些工作，并尝试了每一个资产命令。

我需要这里提到的 cssembed[吗](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/doc/assetic-configuration.md)？我当然希望我不必运行 Java 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:18:55.313

我前段时间为此建立了一个解决方案，我不知道是否是最好的方法，但它有效。只需从网络/捆绑包中调用您的资产，而不是从真实位置调用。然后，您必须先运行 assets:install，然后再运行 assets:dump。你的资产配置和我的一样。我没有使用较少的过滤器，但我认为这也是适用的。

```
{% block head_style %}
{% stylesheets filter='yui_css, cssrewrite' 
        'bundles/bgcomun/css/bootstrap.css'
            'bundles/bgcomun/css/comun.css'
             output='css/compiled/main.css'

    %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet"
          media="screen" />
{% endstylesheets %} 
```

# sql - 识别在 DML 操作期间生成错误的行

> ID：11620209
> 
> 赞同：0
> 
> 时间：2012-07-23T20:42:25.413
> 
> 标签：sql, oracle, plsql, stack-trace

我们有一个表`EVAPP_INTERFACE`，它没有在许多数字列上指定比例或精度。我们需要修改列定义以添加适当的比例和精度，但我们无法更改表中列的顺序。为了实现这一点，我们正在执行以下操作

*   我们将所有数据复制到一个新表中`EVI`
*   `EVAPP_INTERFACE`我们将现有表中的数字列设置为`NULL`
*   我们改变`EVAPP_INTERFACE`列的精度
*   我们将数据复制回来

然而，当数据被复制回来时，一些行会产生异常，因为它们超出了新的比例和/或精度设置（即，应该存储利率的列中的值 10 亿）。

```
ERROR : ORA-01438: value larger than specified precision allowed for this column 
```

我想确定哪一列和哪一行有这个坏数据。

首先是重复表

```
 select count(*) into countTab from USER_TAB_COLUMNS where TABLE_NAME = 'EVI'; 
IF  (countTab <> 0) then 
    execute immediate 'drop table EVI';
    execute immediate 'create table EVI as (select * from EVAPP_INTERFACE)'; 
ELSE
    execute immediate 'create table EVI as (select * from EVAPP_INTERFACE)'; 
END IF;
execute immediate 'TRUNCATE TABLE EVAPP_INTERFACE'; 
```

然后，我改变精度：整个脚本中有 226 个这样的块。

```
 select count(*) into countCol from USER_TAB_COLUMNS where TABLE_NAME = 'EVAPP_INTERFACE' and COLUMN_NAME = 'PST_NUM' and DATA_SCALE is null; 
  IF    (countCol <> 0) then   
 execute immediate 'alter table EVAPP_INTERFACE modify PST_NUM NUMBER(14,2)' ; 
     DBMS_OUTPUT.put_line('  EVAPP_INTERFACE.PST_NUM has been modified to the required precision'); 
END IF; 
```

然后，我插入旧数据。这是它爆炸的地方

```
 execute immediate 'INSERT INTO EVAPP_INTERFACE SELECT * from EVI'; 
```

所以，我不完全确定 SQLERRM 和 SQLCODE 是否会给出完整的堆栈跟踪。而且，我没有足够的数据集来验证这一点。谁能确认我是否可以找出导致问题的特定列？我已经提供了 NUMBER(14,2) 作为大多数列的精度，如果可能的话，我想删除坏数据而不是提高精度。而且由于是生产数据，我不允许导入数据进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:55:11.503

您可能希望使用[DML 错误日志](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php)记录所有有问题数据的行。

我不确定你为什么到处都使用动态 SQL——在脚本之外创建表而不是每次都删除和重新创建它会更加传统。这将允许您使用静态 SQL 来引用表，并允许您将大量错误检查移至编译阶段而不是执行阶段。不过，我假设您有充分的理由希望它完全是动态的。

您需要创建一个错误表（如果要删除基表，则需要删除错误表以便重新创建它）。你需要修改你`INSERT`的添加一个`LOG ERRORS INTO`. 就像是

```
dbms_errlog.create_error_table( 'EVAPP_INTERFACE', 
                                'EVAPP_ERROR' ); 
```

创建错误表和

```
EXECUTE IMMEDIATE 
  'INSERT INTO evapp_interface ' ||
  '  SELECT * ' ||
  '    FROM evi ' || 
  '  LOG ERRORS INTO evapp_error ' ||
  '  REJECT LIMIT UNLIMITED'; 
```

`EVAPP_INTERFACE`在写入任何失败时插入数据`EVAPP_ERROR`（我们在上面的步骤中创建的错误表）。

# oauth - 使用 OAuth +1 并在 Google+ 上分享

> ID：11620210
> 
> 赞同：0
> 
> 时间：2012-07-23T20:42:27.240
> 
> 标签：oauth, google-plus

有没有办法通过 OAuth 为网页 +1 或在 Google+ 上分享？（我正在创建一个移动 Web 应用程序，我使用默认按钮的问题是它们可能会创建一个弹出窗口，这对移动 Web 应用程序不利！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:54:12.613

您可以使用 ACTION_SEND 启动 Google+ 分享对话框。

```
Intent shareIntent = ShareCompat.IntentBuilder.from(MyActivity.this)
   .setText("Hello World!")
   .setType("text/plain")
   .getIntent()
   .setPackage("com.google.android.apps.plus");

startActivity(shareIntent); 
```

# playframework-2.0 - 如何应用自定义逻辑并将表单 POJO 绑定到模型？

> ID：11620211
> 
> 赞同：0
> 
> 时间：2012-07-23T20:42:39.267
> 
> 标签：playframework-2.0

我有一个相当复杂和大的`Model`叫做`Task`. 在这个对象中，我有一些繁重的自定义逻辑和日期时间转换，所以我决定`POJO`为表单制作一个，因为我需要自定义验证/转换。但是如何将此 POJO 绑定回 a `Model`？

这是正确的方法吗：

```
public static Result save() {
    Form<forms.Task> taskForm = form(forms.Task.class).bindFromRequest();

    if (taskForm.hasErrors()) {
        return badRequest(views.html.tasks.create.render(taskForm));
    }
            // bind the formValues to our model
    Task newTask = form(Task.class).bind(taskForm.data()).get();
    newTask.createdBy = User.getLoggedInUserByAlias(session().get("user"));
    newTask.save();

    return GO_TO_OVERVIEW;
} 
```

有没有`cleaner`办法做到这一点？我认为我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:43.243

正如维基上提到的：[https](https://github.com/playframework/Play20/wiki/JavaForms) ://github.com/playframework/Play20/wiki/JavaForms 使用该方法的自定义 POJO`validate`是最好和正确的使用方法：

```
public class User {

  @Required
  public String email;
  public String password;

  public String validate() {
      if(authenticate(email,password) == null) {
          return "Invalid email or password";
      }
      return null;
  }
} 
```

# emacs - 如何绑定到 s-up？

> ID：11620212
> 
> 赞同：6
> 
> 时间：2012-07-23T20:42:45.297
> 
> 标签：emacs

我正在尝试这样做

```
(global-set-key (kbd "s-up") 'beginning-of-buffer) 
```

我得到这个错误

```
error "s- must prefix a single character, not up" 
```

我如何告诉它这样做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T20:50:11.227

命名键应写在尖括号中，如下所示：

```
(kbd "s-<up>") 
```

例外情况是`RET`, `SPC`, `TAB`, `DEL`, `LFD`, `ESC`, 和`NUL`，它们必须大写。有关接受的语法的更完整说明，请参阅`edmacro-mode`( ) 的文档。`C-h f edmacro-mode``kbd`

另请注意，`s-`前缀用于超级修饰符，`S-`用于移位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T20:47:12.803

```
(global-set-key (kbd "S-<up>") 'beginning-of-buffer) 
```

# javascript - 如何在 Django 模板中使用 Django 列表作为 javascript 变量？

> ID：11620224
> 
> 赞同：0
> 
> 时间：2012-07-23T20:43:47.527
> 
> 标签：javascript, python, django, django-templates, google-visualization

我有一个名为的 Django 列表`list_a`：

```
[['Host Name', 'No. of Events'], [u'12.23.21.23', 0], [u'2.152.0.2', 2]] 
```

我`Google Chart API`在我的 Django 模板中使用。我必须对`list_a`以下 java 脚本变量进行 paas：

```
var data = google.visualization.arrayToDataTable([
    ['Host_name', 'No of events'], 
    ['12.23.21.23', 0], 
    ['2.152.0.2', 2]
    ]); 
```

以上是硬编码的，但我想以下列方式使用：

```
var data = google.visualization.arrayToDataTable({{list_a}}); 
```

我尝试使用上面的代码并检查了`javascript console`chrome 中提供的选项。它显示了这一点：

```
 var data = google.visualization.arrayToDataTable([[&#39;Host Name&#39;, &#39;No. of Events&#39;], [u&#39;12.23.21.23&#39;, 0], [u&#39;2.152.0.2&#39;, 2]]); 
```

我将上述代码与硬编码代码进行了比较，由于以下方式，它非常不同：

```
&#39;
['12.23.21.23', 0]  See the quotes on ip address field but not to the next field 
```

我应该如何制作`list_a`与硬编码的等价物，以便我可以轻松获得所需的图表。

除此之外，为什么`&#39`当我尝试直接使用它时会发生这种情况

我正在使用这个[https://google-developers.appspot.com/chart/interactive/docs/gallery/combochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/combochart) Google 图表示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:46:37.340

将其编码为 JSON，将其标记为安全，然后打印出来。

```
var data = google.visualization.arrayToDataTable({{ list_a|json|safe }}) 
```

不幸的是，您需要编写或查找`json`过滤器，或在视图中将其编码为 JSON。

# ruby-on-rails - Rails 3，has_one belongs_to 问题

> ID：11620225
> 
> 赞同：0
> 
> 时间：2012-07-23T20:43:55.607
> 
> 标签：ruby-on-rails

我有一个名为 User 的模型：

```
has_one :etho 
```

还有一个名为 Etho 的模型：

```
belongs_to :user 
```

我在 User 中的 create 方法上有一个构建：

```
@user.build_etho 
```

出于某种原因，当我登录时，我仍然能够创建超过 1 种精神！一个用户应该只有 1 种精神，并且不能创造超过 1 种精神！为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:07:10.720

根据文档，我认为您误解了 build_etho 的作用

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

“build_association(attributes = {}) 返回关联类型的新对象，该对象已用属性实例化并通过外键链接到该对象，但尚未保存。”

也就是说，每次调用 build_etho 时，都会创建一个新的 Etho 对象（构建，即尚未保存在数据库中） - 用户将始终链接到一个确切的对象，可能是最后创建的，但调用 build_etho 并不能保证只有一个是从您的用户对象创建的！

你到底想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:52:54.847

您的参考`id`列应该在您的`users`表格中，您能确认一下吗？

这意味着在您的用户迁移中，您应该拥有

```
t.references :ethos 
```

# css - 如何防止 webkit 破坏长文本

> ID：11620226
> 
> 赞同：0
> 
> 时间：2012-07-23T20:43:56.787
> 
> 标签：css, text, webkit

我想在状态栏中显示 URL。我希望状态栏只有一行处理带有文本溢出的溢出：省略号。

长 URL 总是这样中断：jadajajajaj
-jadajajajdaj-ajdjjajdaj

我希望它像jadajajajaj-jadajajajdaj-ajdj...

我得到的只是：

```
 <div style="position:fixed;top:12.7ex;left:0ex;display:inline-block;width:100%;z-index:5;text-overflow:ellipsis;background:inherit;">
        <div id="status-bar" class="ui-corner-all"
            style="width:1000%;display:inline-block;margin-right:1.4ex;padding:0.3ex 0.5ex 0ex 1ex;overflow-y:hidden;overflow-x:hidden;color:grey;font-size:3.3ex;height:3.2ex;font-weight:normal;text-align:left;"></div>
    </div> 
```

我正在使用 width:1000% 来克服这个问题，但我不会看到...这样的省略号。

我尝试使用 CSS 属性 -webkit-hyphens:none, word-wrap:normal, 没有什么能正常工作...我缺少 word-wrap:keep-all。这在当前版本的 chrome 20.0.1132.57 m 中无法识别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:09:18.347

您正在寻找 text-overflow 属性。通过将`text-overflow:ellipsis`and`white-space:nowrap`应用于#status-bar，您将看到所需的效果。但是，您必须为要截断的元素设置一个宽度，以便浏览器知道何时/何处附加省略号。（确保您删除或更改`width:1000%`）

```
#status-bar {
 text-overflow: ellipsis;
 width: 100%; /* or whatever you prefer */
 white-space: nowrap;
} 
```

# c# - Windows8 - 在 C# 中使用本地化字符串

> ID：11620227
> 
> 赞同：9
> 
> 时间：2012-07-23T20:44:09.607
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我在本地化我的应用程序时遇到了问题。我有文件 Resources.resw，其中包含字符串“noResults.Text”（它以 .Text 结尾，因为我在 xaml 中将它用于 textblock (x:Uid) ）问题是我想在后面的代码中使用相同的字符串（ C#) 我如何访问它？我尝试过这样的事情：

```
resourceLoader.GetString("noResults");
resourceLoader.GetString("noResults.Text"); 
```

但是这些都不起作用

提前致谢 ：）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T22:58:25.907

做这样的事情：

```
var loader = new Windows.ApplicationModel.Resources.ResourceLoader();
string result = loader.GetString("noResults/text"); 
```

请注意，在您的资源中，如果您使用“noResults.text”，请不要将另一个字符串定义为“noResults”（无扩展名）。

# python - Python：在 Linux 上启动新终端并等待它完成/退出

> ID：11620230
> 
> 赞同：4
> 
> 时间：2012-07-23T20:44:16.257
> 
> 标签：python, linux, ubuntu

与我的其他问题相同的情况：[Python：在 Windows 上启动新的命令提示符并等待它完成/退出](https://stackoverflow.com/questions/11615455/python-start-new-command-prompt-on-windows-and-wait-for-it-finish-exit)，除非我需要它在 Linux 上工作。

如果您不想阅读另一个问题：我想打开一些新的终端窗口并让每个窗口执行一个命令，并且我希望父 python 程序等到所有终端窗口都关闭。

正在做：

```
os.system("gnome-terminal -e {command}") 
```

打开一个新的终端窗口，但程序不会等待。使用`p = Popen()`and`p.wait()`不起作用，因为 gnome-terminal 命令立即完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T20:52:33.203

Gnome-terminal 为所有终端窗口重用相同的父进程。

用于`gnome-terminal --disable-factory`强制它启动一个新进程。

# java - 从另一个 JSP 文件中读取变量

> ID：11620231
> 
> 赞同：0
> 
> 时间：2012-07-23T20:44:17.107
> 
> 标签：java, jsp, servlets, scope

在**one.jsp**中，我有

```
<% int testVar1 = 1; %> 
```

在**two.jsp**中，我有

```
<%@ include file="one.jsp" %>
<% if(testVar1 == 1) { %>
<!-- Should equal 1 -->
<% } else { %>
<!-- Does not equal 1 -->
<% } %> 
```

但是，并不总是采用正确的条件路径。如果我在执行条件测试之前没有读取 testVar1 ，即使在 one.jsp 中将 testVar1 设置为 0，它也始终评估为**true**。

这是从第二个 JSP 文件中读取变量的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:38:24.040

我在代码中看不到任何错误，它应该按预期工作。

至于`testVar1`执行条件测试之前或之后的阅读，应该没有任何区别。

我认为可能的问题是您的 JSP 可能没有正确更新，即如果您更新`one.jsp`它`testVar1 = 0`可能不一定反映，因为它是一个包含的 JSP `two.jsp`，所以您还需要更新`two.jsp`，以便在`two.jsp`编译时需要`one.jsp`在编译期间更新。因此，简而言之，如果您进行任何更改，请更新两个 JSP。

**注意：**还请考虑@Lion 在他的[评论](https://stackoverflow.com/questions/11620231/reading-a-variable-from-another-jsp-file#comment15387513_11620231)中所说的内容。这将有助于未来的发展。

希望这可以帮助。

# python - numpy.allclose 和多精度与 mpmath

> ID：11620239
> 
> 赞同：0
> 
> 时间：2012-07-23T20:45:00.367
> 
> 标签：python, numpy, arbitrary-precision, mpmath

在我的 python 代码中，我经常使用`numpy.allclose`. 另一方面，除了这些检查之外，实现还能够处理多精度 ( `mpmath.mpc`) 数字。如果我想为这些`mpmath`数字运行验证码，我会得到类似

```
>>> check(H)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
File "module.py", line 19, in check_H
  assert(numpy.allclose(H, I, rtol=rtol, atol=atol))
File "/home/gereon/python/numpy/core/numeric.py", line 2025, in allclose
  xinf = isinf(x)
TypeError: ufunc 'isinf' not supported for the input types, and the inputs could
not be safely coerced to any supported types according to the casting rule ''safe'' 
```

检查两个多精度数组是否足够相等的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:07:46.497

我查看了代码（`allclose`在 numeric.py 中）。这取决于`isinf`函数，显然没有为 mpmath 实现。

该功能虽然很简单。它归结为：

```
def allclose(x, y, rtol=1.e-5, atol=1.e-8):
    return all(less_equal(abs(x-y), atol + rtol * abs(y))) 
```

您可能必须用 mpmath 等效项而不是浮点数替换`rtol`and 。`atol`

# c# - 正则表达式匹配不在引号中的关键字

> ID：11620250
> 
> 赞同：19
> 
> 时间：2012-07-23T20:45:29.530
> 
> 标签：c#, regex, parsing

我将如何查找不在字符串中的关键字。

例如，如果我有文字：

> 您好，本文就是一个例子。
> 
> bla bla bla "此文本在字符串中"
> 
> “随机字符串” 更多文本 bla bla bla “foo”

我希望能够匹配所有`text`不在里面的单词`" "`。在其他我想匹配：

![在此处输入图像描述](../Images/ff24f5d10a13217a051092094909a754.png)

注意我不想匹配以红色突出显示的文本，因为它在字符串内

* * *

**可能的解决方案：**

我一直在努力，这就是我到目前为止所拥有的：

`(?s)((?<q>")|text)(?(q).*?"|)`

请注意，正则表达式将 if 语句用作： (?(predicate) true Alternative|false Alternative)

所以正则表达式将显示：

> 找到 " 或文本。如果找到 " 然后继续选择直到再次找到 " (.*?") 如果找到文本则什么也不做...

当我运行该正则表达式时，我匹配整个字符串。我问这个问题是为了学习。我知道我可以删除所有字符串然后寻找我需要的东西。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-23T21:01:37.293

这是一个答案：

```
(?<=^([^"]|"[^"]*")*)text 
```

这表示：

```
(?<=       # preceded by...
^          # the start of the string, then
([^"]      # either not a quote character
|"[^"]*"   # or a full string
)*         # as many times as you want
)
text       # then the text 
```

您也可以轻松地将其扩展为处理包含转义的字符串。

在 C# 代码中：

```
Regex.Match("bla bla bla \"this text is inside a string\"",
            "(?<=^([^\"]|\"[^\"]*\")*)text", RegexOptions.ExplicitCapture); 
```

从评论讨论中添加 - 扩展版本（基于每行匹配并处理转义）。用于`RegexOptions.Multiline`此：

```
(?<=^([^"\r\n]|"([^"\\\r\n]|\\.)*")*)text 
```

在 C# 字符串中，这看起来像：

```
"(?<=^([^\"\r\n]|\"([^\"\\\\\r\n]|\\\\.)*\")*)text" 
```

由于您现在想使用`**`而不是`"`这里是一个版本：

```
(?<=^([^*\r\n]|\*(?!\*)|\*\*([^*\\\r\n]|\\.|\*(?!\*))*\*\*)*)text 
```

解释：

```
(?<=       # preceded by
^          # start of line
 (         # either
 [^*\r\n]| #  not a star or line break
 \*(?!\*)| #  or a single star (star not followed by another star)
  \*\*     #  or 2 stars, followed by...
   ([^*\\\r\n] # either: not a star or a backslash or a linebreak
   |\\.        # or an escaped char
   |\*(?!\*)   # or a single star
   )*          # as many times as you want
  \*\*     # ended with 2 stars
 )*        # as many times as you want
)
text      # then the text 
```

由于此版本不包含`"`字符，因此使用文字字符串更简洁：

```
@"(?<=^([^*\r\n]|\*(?!\*)|\*\*([^*\\\r\n]|\\.|\*(?!\*))*\*\*)*)text" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T20:56:50.257

这可能会变得非常棘手，但这是一种潜在的方法，可以确保匹配文本和字符串末尾之间有偶数个引号：

```
text(?=[^"]*(?:"[^"]*"[^"]*)*$) 
```

替换`text`为您要匹配的正则表达式。

Rubular：[http ://www.rubular.com/r/cut5SeWxyK](http://www.rubular.com/r/cut5SeWxyK)

解释：

```
text            # match the literal characters 'text'
(?=             # start lookahead
   [^"]*          # match any number of non-quote characters
   (?:            # start non-capturing group, repeated zero or more times
      "[^"]*"       # one quoted portion of text
      [^"]*         # any number of non-quote characters
   )*             # end non-capturing group
   $              # match end of the string
)               # end lookahead 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:04:57.010

我会简单地在非捕获组中贪婪地匹配文本的引号以将它们过滤掉，然后使用捕获组作为非引用的答案，如下所示：

```
".*(?:text).*"|(text) 
```

您可能希望针对单词边界等进行一些改进。但这应该可以让您到达您想去的地方，并且是一个清晰易读的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T10:51:56.443

到目前为止，我已经多次使用这些答案，并希望分享解决此问题的替代方法，因为有时我无法实施和使用给定的答案。

与其匹配关键字，不如将任务分解为两个子任务：

1.  用空字符串替换您不需要匹配的所有内容
2.  使用普通匹配

例如，要替换引号中的文本，我使用：

```
[dbo].[fn_Utils_RegexReplace] ([TSQLRepresentation_WHERE], '''.*?(?<!\\)''', '') 
```

或更清楚：`'.*?(?<!\\)'`。

我知道这可能看起来像是双重工作并且对某些平台/语言有性能影响，所以每个人也需要对此进行测试。

# android - 在定时视图翻转Android上执行代码

> ID：11620251
> 
> 赞同：1
> 
> 时间：2012-07-23T20:45:36.723
> 
> 标签：android, view, timer

我正在编写一个类似于幻灯片放映的应用程序，并使用以 5 秒间隔翻转的 viewflipper。我是 android 新手，我想知道，有什么方法可以在每次视图翻转时执行代码？此代码将更新布局对象，例如文本框中的文本。

这是一些示例代码：

```
vf=(ViewFlipper)findViewById(R.id.ViewFlipper01); 
vf.setFlipInterval(5000);       
vf.startFlipping();` 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:41:05.547

ViewFlipper 没有内置方法可以让您轻松做到这一点。尽管如此，仍然可以通过几种方式做到这一点。

您拥有的一个选项是使用可运行的“沿边运行”您的 ViewFlipper，因为您的间隔是已知的，您可以设置一个递归可运行的，它也将使用 5000 毫秒的间隔使事情与视图同时发生变化。

```
vf=(ViewFlipper)findViewById(R.id.ViewFlipper01); 
vf.setFlipInterval(5000);       
Runnable r = new Runnable() {
    @Override
    public void run(){
        //Do something here

        vf.postDelayed(r,5000);
    }
}
vf.postDelayed(r, 5000);
vf.startFlipping(); 
```

另一种方法是放弃通过 startFlipping() 进行的自动翻转，而是在其中使用这样的可运行对象`vf.showNext()`。这样，runnable 的每次迭代都会为你翻转视图，你可以随它做任何你想做的事情。

# c# - EDMX 文件中的 Schema XML 属性问题

> ID：11620253
> 
> 赞同：0
> 
> 时间：2012-07-23T20:45:45.207
> 
> 标签：c#, entity-framework, t4, edmx, edmx-designer

我正在使用从 EDMX 文件生成 POCO 的 T4 模板。

所有底层实体都有自己的模式。[该答案](https://stackoverflow.com/questions/3970783/getting-the-schema-from-an-edmx-file)描述了如何从 EDMX 中提取模式名称：

```
StoreItemCollection sic;
loader.TryCreateStoreItemCollection(inputFile, out sic);
EntityContainer sicEntityContainer = sic.GetItems<EntityContainer>().First();

EntitySet eset = sicEntityContainer.GetEntitySetByName(code.Escape(entity), true);
string schemaName = eset.MetadataProperties["Schema"].Value.ToString(); 
```

如果我查看 EDMX 文件的内容，我会发现每个实体都有一个*Schema属性：*

```
<EntitySet Name="Table_1"
           EntityType="TestModel.Store.Table_1"
           store:Type="Tables"
           Schema="Blubb" /> 
```

此时一切正常，我可以提取模式名称。

**这是问题所在：**

自从一两个月以来，Visual Studio 2010 为我的模型中较新实体的*Schema*属性添加了一个名为*store的前缀。*

 *```
<EntitySet Name="Table_1"
           EntityType="TestModel.Store.Table_1"
           store:Type="Tables"
           store:Schema="Blubb" /> 
```

所以我无法使用上面链接文章的逻辑来提取模式。

我必须使用文本编辑器手动删除这些前缀，所以任何事情都可以正常工作。

我的问题：

1.  这是什么原因？
2.  如何使用*store:Schema*等命名空间读取属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:19:21.360

您需要在“类型/模式”前面加上其命名空间

IE：

```
 eset.MetadataProperties["http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator:Type"].Value.ToString(); 
 eset.MetadataProperties["http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator:Schema"].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T01:33:01.090

不确定这是否会有所帮助，但它可能会有所帮助，请参阅[http://brewdawg.github.io/Tiraggo.Edmx/](http://brewdawg.github.io/Tiraggo.Edmx/)，您可以从 NuGet 安装它。它提供了 edmx 文件中的所有元数据，包括所有映射、每列的低级 SQL 数据类型，所有这些东西，看看页面上的示例，你会发现它是多么容易。*

# regex - RewriteURL 的正则表达式在下划线上拆分

> ID：11620255
> 
> 赞同：0
> 
> 时间：2012-07-23T20:46:11.260
> 
> 标签：regex, isapi-rewrite

我正在为 IIS 使用 Isapi Rewrite，我想为动态产品页面制作 SEO 友好的 URL。

我需要在单个查询字符串参数中将 SKU 从产品名称中拆分出来。SKU 始终是第一部分，后跟下划线。下划线后的所有内容都是产品名称。产品名称在单词之间使用破折号。

这是我到目前为止所拥有的，它只是在一个参数中返回整个查询字符串。我需要将其拆分为下划线，以便获得两个值 $1 和 $2。

```
RewriteRule ^Store/([^/]+) Store/Product.aspx?sku=$1&name=$2  [QSA,NC] 
```

*   存储/1234_name-name
*   //$1: 1234
*   //$2: 名字-名字

*   商店/mn98765_name

*   //$1: mn98765
*   //$2: 名称

*   商店/sk000p9_name-name-name

*   //$1: sk000p9
*   //$2: 名字-名字-名字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:15:10.437

您想用两个单独的括号捕获两个组。尝试这个：

```
RewriteRule ^Store/([^_]+)_([^/]+) Store/Product.aspx?sku=$1&name=$2 [QSA,NC] 
```

# bash - Bash：迭代参数文件

> ID：11620256
> 
> 赞同：3
> 
> 时间：2012-07-23T20:46:12.493
> 
> 标签：bash, argument-passing

这可能是一个简单的答案，但是在谷歌搜索之后，我可能只是把术语记下来了，所以我还没有找到任何关于我要问的东西。

当接受 /bin/*.txt 之类的参数时，如何遍历每个文件？

我试过这个：

```
for file in $2; do
    echo $file
done 
```

第二个参数 ($2) 有一个输入，例如 /bin/*.txt，但 echo 只打印出我拥有的 6 个文本文件中的 1 个。我是否错误地迭代了这个？

我也尝试过使用 ls ，它也不会正确打印出来......

```
ls $2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T20:48:37.437

除非参数被引用，否则参数`/bin/*.txt`将*在您的脚本看到它之前*被扩展。因此，如果参数仍然是`/bin/*.txt`，则可以确定没有与该 glob 匹配的文件。否则，您将有多个参数匹配所有匹配的文件，您可以只使用参数：

```
for file; do # equivalent to for file in "$@"
    echo "$file"
done 
```

如果你想引用参数，你必须自己扩展它。数组是一种不错的方法：

```
arg='/bin/*.txt'
files=( $arg )
for file in "${files[@]}"… 
```

# python - 用户 Python 的系统 CPU 使用情况

> ID：11620260
> 
> 赞同：0
> 
> 时间：2012-07-23T20:46:27.143
> 
> 标签：python, windows

无论如何，我可以交叉链接所有传入用户（CMD 中的 netstat -a）来创建一个监控系统来跟踪 python 中每个用户使用的 CPU 百分比。Windows 系统是否在其上写入任何日志文件？我使用 psutil 获得了每个进程的 CPU 使用情况，但我只是想不出一种方法来显示用户的 CPU 使用情况。请我需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T00:40:39.013

无法确定每个用户本身的 CPU 使用率。您可能要做的是找出某个用户拥有的进程的 CPU 使用情况，如下所示：

```
for p in psutil.process_iter():
    if p.username == 'someusername':
        print p.get_cpu_percent(interval=1) 
```

但是，将所有这些相加以获得总数不太可能产生有意义的值。

# postgresql - PostgreSQL 同一连接上的多个事务

> ID：11620263
> 
> 赞同：11
> 
> 时间：2012-07-23T20:46:43.183
> 
> 标签：postgresql

PostgreSQL 是否支持同一连接上的多个事务？我不是指嵌套事务，而是不相关的不同事务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T21:19:04.633

如果您指的是 Java JTA 标准所要求的“交错事务”：不，不支持。请参阅此[JDBC FAQ 部分](http://jdbc.postgresql.org/documentation/faq.html#transaction-interleaving)，了解为什么它不是大损失。

PostgreSQL 核心也不支持这样的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T21:12:00.903

如果不相关的意思是一个接一个，那么答案是肯定的。

如果您的意思是同时打开不同的事务，那么答案是否定的（使用 dblink 可以使用一些 hack，但我认为它们不符合“在同一连接上”的条件）。

# javascript - 使用 jQuery 中的类访问文本框（HTMLHelper）值

> ID：11620265
> 
> 赞同：0
> 
> 时间：2012-07-23T20:46:56.287
> 
> 标签：javascript, jquery, asp.net-mvc, partial-views, html-helper

如何在 JavaScript 函数（jQuery）中访问“StudentID”值。

HTML：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

    <div class="divClass">
      <table class="tableClass">
      <% foreach (var item in Model) { %>
        <tr class="trClass">
          <td class="tdClass">
            <%= Html.TextBox("StudentID") %>
          </td>
        </tr>
      <% } %>
      </table>
    </div> 
```

查询：

```
 $('#ShowStudentID').click(function () {        
      $(".tdClass").each(function () {
          alert($(this).val());           
      });
 }); 
```

硕士（形式）：

```
<% using(Html.BeginForm("SaveCommitment", "LPForm")) %>
<% { %>
<div>
<% Html.RenderPartial("DisplayStudents"); %>
</div>
<% } %>
<br/><br/>
<input type="button" id="ShowStudentID" name="ShowStudentID" value="Show StudentID" />
</div> 
```

我曾尝试使用 text()、innerHTML() 和 innerText() 方法，但无法使其正常工作。任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:14:50.240

如果要获取 .tdClass 中输入的值，可以尝试以下操作：

```
 $('#ShowStudentID').click(function () {        
      $(".tdClass").find('input').each(function() {
          alert($(this).val());           
      });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T14:55:39.370

通过 ID 轻松快速地访问它：

```
$('#StudentID').val(); 
```

# php - 无法解决 MySQL 语法中的错误 - 有效但显示错误消息

> ID：11620266
> 
> 赞同：1
> 
> 时间：2012-07-23T20:46:58.077
> 
> 标签：php, mysql

经过数小时试图了解这个简单查询有什么问题后，我有什么遗漏吗？它正确发布，并且一切正常（例如，它使用变量正确更新数据库）但每次提交时都会显示以下错误：

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“1”附近使用正确的语法

```
 $eventIDResult = ((int)$_POST["eventIDResult"]);
$eventNameResult = ($_POST["eventNameResult"]);
$eventTextResult = ($_POST["eventTextResult"]);
$eventDateResult = ($_POST["eventDateResult"]);
$eventAgendaResult = ($_POST["eventAgendaResult"]);
$sql = mysql_query("UPDATE events SET eventName='$eventNameResult', eventText='$eventTextResult', eventDate='$eventDateResult', eventAgenda='$eventAgendaResult' WHERE eventID='$eventIDResult'");
if (!mysql_query($sql, $con))
{
die('Error: ' . mysql_error());
}
else
{
header('Location: ../add-remove-event.php');
exit;
}
mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:50:10.600

您正在调用`mysql_query`previous 的结果`mysql_query`，它可能返回受影响的行数（在本例中为 1）：

```
$sql = mysql_query(...)
if (!mysql_query(...)) 
```

您可能想要做的只是将查询放在一个字符串中：

```
$sql = "...";
if (!mysql_query($sql, $con))
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:54:27.547

将评论作为答案移动，以便将来的观众知道答案是什么。

确保所有字段都是 varchar。¿ 它们都不是 INT 或类似的吗？¿ eventID 是否为 INT 类型（因此不需要单引号）？

# c# - 密码安全随机数发生器

> ID：11620277
> 
> 赞同：2
> 
> 时间：2012-07-23T20:47:57.317
> 
> 标签：c#, security, encryption, cryptography

我正在开发一款适用于 Windows 手机的应用程序，需要一个 1MB 的随机字节池作为一次性加密的密钥。我计划首先制作一个字节数组，并用内置的 RNGCryptoServiceProvider 生成的字节填充它（应用程序是用 c# 制作的）。并使用来自加速度计、摄像头、麦克风和触控等来源的信息。然后我用每个池位按位异或这个信息。

这是一种安全的方法还是有更好/更安全的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:54:54.830

好的，所以我们似乎有几个针对第 1 部分的评论，这是否安全。现在进入问题 2，有没有更好更安全的方法？

这个难题包含三个部分：密钥生成、密钥分发和加密。

我强烈建议坚持使用经过验证的、真实的密钥分发和加密方法，但在从采样输入设备生成的密钥中添加熵只会有帮助。

诀窍是您想使用散列函数将熵累积并“白化”到密钥中。例如，您可以从您提到的所有熵源收集数据，使用 SHA-256 对它们进行哈希处理，以将所有熵打包到一个可管理的空间中并对其进行随机化，然后按照您之前的建议与 RNGCryptoServiceProvider 数据进行异或。

现在，您添加的狂野熵已经从您的 PRNG 中生成了一个真正的 RNG。

当您收集更多熵时，将原始哈希与新数据散列，以便旧熵与新熵混合。这样，您最终将累积一个完整的哈希长度的熵。

但是，要弄清楚达到该状态需要多长时间是比较困难的。

# ios - ios：如何为模拟器构建静态库？

> ID：11620280
> 
> 赞同：2
> 
> 时间：2012-07-23T20:48:01.477
> 
> 标签：ios

您好我无法通过模拟器测试静态库。如果我在方案是 iPhone 模拟器时构建静态库，则不会生成 *.a 文件。仅当方案是 iOS 设备时才会生成。这个怎么做？

# iphone - 使用 SSCollectionView 重用 Cell Confusion

> ID：11620281
> 
> 赞同：0
> 
> 时间：2012-07-23T20:48:04.580
> 
> 标签：iphone, ios, uitableview, reusability, sstoolkit

因此，我了解将单元格重用于表格视图等的概念，但我在 SSCollectionViewItem 中使用自定义项目时遇到了糟糕的情况。这是我正在使用的代码：

```
- (SSCollectionViewItem *)collectionView:(SSCollectionView *)aCollectionView itemForIndexPath:(NSIndexPath *)indexPath {
static NSString *const itemIdentifier = @"itemIdentifier";

StoryCollectionViewItem *item = (StoryCollectionViewItem *)[aCollectionView dequeueReusableItemWithIdentifier:itemIdentifier];

if(item == nil){
item = [[StoryCollectionViewItem alloc] initWithReuseIdentifier:itemIdentifier];
}
    NSString *sURL = [[featuredStories objectAtIndex:indexPath.row] objectAtIndex:1];
    NSURL *url = [NSURL URLWithString:sURL];

[item.card.imageView setImageWithURL:url placeholderImage:nil];

return item;
} 
```

它似乎“有点”工作，但不幸的是并不完美。我得到的是大约 80% 的单元格正确加载，但其余的单元格仅在它们消失在屏幕上然后重新出现后才加载。以下是一些截图：

![未加载单元格](../Images/97733b543eb6d065e5dd3f20436ff763.png) ![在他们重新出现在屏幕上之后](../Images/ac40485d81e76f75bf47e58456ed3995.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:29:47.787

我之前遇到过这个问题，但后来我覆盖了 prepareForReuse 方法并设置了一个占位符 imagem 并得到了修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:02:36.233

虽然我不能肯定地说，但我建议您在此处设置图像的方式非常不标准。随着桌子的移动，细胞不断地被回收。做你想做的事（但更复杂）的更好方法是保留与标签关联的图像缓存（可能是单元格的 indexPath。

当你被要求提供一个单元格时，你提供它，如果你有图像，你会立即设置它。如果没有，则为单元格发出 fetch，当您获得它时，将其添加到缓存中，然后查看需要它的单元格现在是否可见（通过询问 tableView），以及它是否可见你然后设置它。

# ios - onavo 等应用程序如何拦截来自其他应用程序的互联网流量

> ID：11620287
> 
> 赞同：2
> 
> 时间：2012-07-23T20:48:32.007
> 
> 标签：ios

怎么可能截获手机与任何服务器的流量？您如何创建一个代理来拦截来自用户在其设备上安装的任何应用程序的流量？应用程序不是在沙箱中运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:53:43.313

据我所知，它通过代理数据并将压缩放在移动设备前面来工作。

> Onavo Extend 会在您的设备上安装配置文件（其中包括您的运营商的 APN 设置），以便您从 Internet 接收的数据在我们基于云的压缩服务中进行压缩，该服务位于由 Amazon Web Services 运营的数据中心。然后将压缩数据发送到您的移动设备，以便您获得更精简、更快、更高效的网络版本。

这可以通过[带压缩的 VPN](http://help.apple.com/iosdeployment-ipcu/?lang=en-us#appbec2bfec)或[更改 APN](http://help.apple.com/iosdeployment-ipcu/?lang=en-us#appbec2b702)来实现。

上面的引用取自[此处](http://www.onavo.com/apps/iphone_extend_help)的帮助/常见问题解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:58:29.443

[来自macrumors](http://forums.macrumors.com/showthread.php?t=1493450)

2012 年 11 月 20 日 08:49 PM #1 petrucci666 macrumors 6502

加入日期：2009 年 4 月 Onavo 突然创建 VPN 网络自从 Onavo 推出以来，我几乎一直在使用它，它是一个解决真正问题的了不起的应用程序。我知道他们会不断更新他们在你的 iPhone 上安装的配置文件，但突然 Onavo 正在通过 VPN 连接。

我以前从未见过这种情况。为什么它使用 VPN，而不是像以前那样做？0
Nov 21, 2012, 03:58 AM #2 onavo macrumors 新手

加入日期：2012年2月

嗨 Petrucci666，首先，感谢您对我们的应用程序的积极反馈。我们很高兴听到您迄今为止对 Onavo 的体验非常积极。

**我们一直在将应用程序的基础架构升级到 VPN，以解决一些影响我们部分用户的运营商特定错误。使用 VPN 代替 APN 使我们能够继续帮助我们的用户，同时消除一些用户遇到的某些运营商特定的问题。**

很抱歉 VPN 更新令人惊讶，非常感谢您与我们联系！

# gmagick - Gmagick：定义了重力常数但没有 setgravity() 方法？

> ID：11620288
> 
> 赞同：0
> 
> 时间：2012-07-23T20:48:33.597
> 
> 标签：gmagick

我正在用 PHP 编程并尝试使用 Gmagick 扩展。根据[文档](http://www.php.net/manual/en/book.gmagick.php)，没有[Imagick 中的](http://www.php.net/manual/en/imagick.setgravity.php)`setgravity()`方法，但 Gmagick 定义了[重力常数](http://www.php.net/manual/en/gmagick.constants.php)。那么如何在 Gmagick 中设置重力呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:01:29.913

据此，添加[了](http://pecl.php.net/package-info.php?package=gmagick&version=1.0.10b1)重力功能*并且*它们似乎确实有效，因此文档已经过时了。这些功能就像 Imagick 一样。

# linux - 将可执行属性扩展到所有用户

> ID：11620291
> 
> 赞同：1
> 
> 时间：2012-07-23T20:48:37.667
> 
> 标签：linux, chmod

我有一个由 root 拥有的目录结构，其中一些文件可由 root 执行，并且所有文件/目录都可由所有用户读取。

什么是让所有用户都可以执行其中的所有可执行文件（但不是其他文件）的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:53:51.147

尝试（作为根）：

```
find /your/directory -executable -type f -exec chmod o+x {} + 
```

# jquery - 设置 sj:select 的默认值

> ID：11620292
> 
> 赞同：3
> 
> 时间：2012-07-23T20:48:38.573
> 
> 标签：jquery, struts2

我正在使用 struts2-jquery 插件，我需要为`sj:select`下拉小部件设置默认值。

该小部件当前工作并将显示所有适当的值（来自地图，其中值是要在菜单上显示的值）。它是从处理适当方法的动作类中调用的。

```
<s:url id="menu" action="getListofObjects" />
<sj:select name="list" href="%{getListofObjects}" list="objects"/> 
```

假设对象是蓝色的，它的 ID 是 3。目前我有一个`.jsp`页面，其中列出了所有对象。如果我单击“3”，它会调用一个动作，该动作会找到对象（蓝色）并将“3”和蓝色都保存在动作中。然后，它调用一个`.jsp`显示对象信息的新页面。

我想要的是有一个`sj:select`下拉菜单，默认为我选择的对象（在本例中为蓝色），但单击时将显示其余对象。当我用我调用小部件时，`value="%{object}"`我会得到相同的对象显示两次。

有人对此有解决方案吗？我见过人们使用 jQuery 来清除重复项的下拉列表，但我想知道是否有一个真正的解决方案，我可以根据下拉菜单返回的内容设置默认值。

另外，我使用的`sj:select`是因为我有一些双/三选择方法，所以我无法切换到 s:select。

谢谢。

**更新 -> 更多代码**

**page1.jsp**

```
<s:iterator value="penList">
<tr class="detail">
<td class="detail">
<s:url action="penUpdate" var="urlTag">
<s:param name="penId"><s:property value="penId"/></s:param></s:url>
<a href="<s:property value="#urlTag" />"><s:property value="penId" /></a></td> 
```

**penUpdateAction.java**

```
public String execute(){
    getPen();
    return Action.SUCCESS;
}
public PenVO getPen(){
penVO = penService.searchPens(penId);
name = penVO.getName();
    id = penVO.getPenId();
return penVO;
} 
```

Page1 调用调用 page2 的 penUpdateAction

**Page2.jsp**

```
<s:url id="nameList" action="getNames" />
<sj:select name="name" href="%{nameList}" list="names" onChangeTopics="reloadsecondlist"/> 
```

这是一个显示所有可用名称的下拉菜单。它正在工作，但我希望它默认存储在 penUpdateAction 类中的值。然后用户可以更改该值或保持原样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T14:20:14.497

试试这个。我没有测试过它，但我认为它应该可以工作：

```
<sj:select name="list" href="%{getListofObjects}" list="objects" listKey="id" listValue="name" value="%{id}"/> 
```

**注意：**`listKey`和的值`listValue`必须是您要填充的 的`Object`属性。`list``sj:select`

`id`属性中设置的属性`value`应该是您的操作类中的一个属性，它带有您要设置的默认值。假设值为`3`，并且您有一个这样的选择列表

```
<select>
    <option value="1">Yellow</option>
    <option value="2">Black</option>
    <option value="3">Blue</option>
</select> 
```

当页面加载时，选择将默认显示`Blue`。如果你这样做有问题，请告诉我。

# php - PHP 生成的表列数据不在正确位置？

> ID：11620298
> 
> 赞同：1
> 
> 时间：2012-07-23T20:49:24.890
> 
> 标签：php, javascript, html

我有一些 PHP 代码：

1.  连接到mysql表
2.  检索结果
3.  格式化结果以显示为 HTML 表格（添加标签等）
4.  将格式正确的结果存储到名为 $echoResultsFinal 的变量中

然后，在 HTML 内部，我有一些内联 PHP。它：

1.  检查是否 $echoResultsFinal isset
2.  如果是，则回显其内容
3.  如果不是，则回显一些与问题无关的内容

**问题：**当 PHP 生成的表格被回显时，表格内容的顺序不正确。

生成表格的代码：

```
$echoResultArray = array();
$i = 0;
while ($row = mysql_fetch_array($result))
{
    $td = '';
    foreach(array('FIRST_NAME', 'LAST_NAME', 'RIT_ACC', 'LINK_1', 'LINK_2', 'LINK_3', 'LINK_4', 'LINK_5', 'LINK_6' ) as $key => $value)
    {
        $td .= "<td>" . $row[$key] . "</td>";
    }
    $echoResultArray[$i] = "<tr>" . $td . "</tr>";
    $i++;
}
//Table closing tag
$echoResultsClosing = "</tbody></table>";
mysql_close();

$echoResultData = '';
foreach($echoResultArray as $var)
{
    $echoResultData .= $var;
    $echoResultData .= PHP_EOL;
}

$echoResultFinal = $echoResult . $echoResultData . $echoResultsClosing; 
```

知道怎么了？:)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:55:04.737

`foreach`你的第一个循环有问题。您拥有的代码是这样的：

```
foreach(array('FIRST_NAME', 'LAST_NAME', 'RIT_ACC', 'LINK_1', 'LINK_2', 'LINK_3', 'LINK_4', 'LINK_5', 'LINK_6' ) as $key => $value)
{
    $td .= "<td>" . $row[$key] . "</td>";
} 
```

这里要注意的重要一点是，您的 foreach 正在将所有键`$key`和所有值分配给它，`$value`因为它遍历您传递给它的数组（`$key => $value`）。这里的问题是您正在使用`$key`从`$row`数组中检索值。但是，传入数组后，键是数字 0-8（数组的索引）。您可以通过执行`var_dump`传递给 foreach 的数组来看到这一点：

```
array(9) {
  [0] => string(10) "FIRST_NAME"
  [1] => string(9) "LAST_NAME"
  [2] => string(7) "RIT_ACC"
  [3] => string(6) "LINK_1"
  [4] => string(6) "LINK_2"
  [5] => string(6) "LINK_3"
  [6] => string(6) "LINK_4"
  [7] => string(6) "LINK_5"
  [8] => string(6) "LINK_6"
} 
```

`$key`您正在使用的s 在括号中。所以你正在寻找`$row`数组中的数字索引。由于以下默认行为，这仍然会为您提供输出[`mysql_fetch_array()`](http://php.net/mysql-fetch-array)：

> 返回数组的类型取决于 result_type 的定义方式。**通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。**使用 MYSQL_ASSOC，你只能得到关联索引（因为 mysql_fetch_assoc() 有效），使用 MYSQL_NUM，你只能得到数字索引（因为 mysql_fetch_row() 有效）。

我已将重点添加到文档的引用中。

因此，您的调用`mysql_fetch_array()`返回一个包含列名和值的数组，以及列及其值的数字索引。您的结果是无序的，因为您的查询`SELECT`对字段的排序顺序与您传递给 foreach 的数组中的顺序不同。由于数字索引将对应于 中字段的顺序，因此`SELECT`您按照数据库提供给您的顺序而不是您想要的顺序输出它们。

为避免将来出现此错误，请显式使用`mysql_fetch_assoc()`or`mysql_fetch_row()`或将`MYSQL_ASSOC`or`MYSQL_NUM`常量传递给`mysql_fetch_array()`. *但是，*这些`mysql_*`函数已被弃用，并将在 PHP 5.4 中删除。我强烈建议您查看[PDO](http://php.net/PDO)。（PDO 有一个类似的返回策略，它返回列名和索引，`MYSQL_BOTH`所以要小心！）

要解决此问题，您应该使用`$value`从查询中获取列，因为此变量将包含列的字符串名称。

```
foreach(array('FIRST_NAME', 'LAST_NAME', 'RIT_ACC', 'LINK_1', 'LINK_2', 'LINK_3', 'LINK_4', 'LINK_5', 'LINK_6' ) as $value)
{
    $td .= "<td>" . $row[$value] . "</td>";
} 
```

另请注意，我将您更改`as $key => $value`为只是`as $value`因为如果您不使用密钥，则不需要指定变量来接收它。这是 的[两种形式`foreach`](http://php.net/manual/en/control-structures.foreach.php)。

# objective-c - Objective-C ARC 是否需要继承 NSObject？

> ID：11620299
> 
> 赞同：1
> 
> 时间：2012-07-23T20:49:25.987
> 
> 标签：objective-c, automatic-ref-counting

我之前（大约一年前）写过 Objective-C，但那是在 ARC 之前。我有一个不需要从 NSObject （或任何其他 NS* 类）继承的类，但如果没有，我在尝试实例化单例时会收到此错误：

```
+(Operator *) getInstance
{
  static Operator * g_instance = NULL;

  if (NULL == g_instance)
  {
      @synchronized( self )
      {
         g_instance = [[Operator alloc] init];
      }
  }

  return( g_instance );
} 
```

选择器“alloc”没有已知的类，它被列为 ARC 问题。
ARC 现在是否要求所有类都继承自 NSObject ？还是我错过了一个更大的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:55:01.160

好吧，如果你调用`alloc`你的类，不提供实现，也不继承`NSObject`'s，我不确定你期望它做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:56:25.207

我认为这与ARC无关。Alloc 是 NSObject 的一个方法，所以如果你不继承 NSObject 的形式，你希望如何使用 Alloc？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:52:27.040

如果您使用的是 Objective C，则每个类都必须从提供消息处理和生命周期管理的基类继承。

最初有一个 Object 类，但从 NexTStep 3 开始，Apple 和 Gnu 编译器和运行时更改为使用 NSObject。还有另一个基类 NSProxy 主要用于分布式对象。NSObject 还提供了基本的 Cocoa 功能，如 KVO。请参阅 Apple 的“ [The Root class](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW35) ”和[这个 SO question](https://stackoverflow.com/questions/4295317/what-use-cases-are-there-for-defining-a-new-root-class)。

在您的情况下，编译器无法找到 alloc 消息的定义，但在运行时它不知道如何将任何消息发送到 Operator 类（如果已创建）。

# javascript - jQuery lib 会导致错误，直到刷新

> ID：11620303
> 
> 赞同：1
> 
> 时间：2012-07-23T20:50:02.413
> 
> 标签：javascript, jquery, anytime

在我的表单中（表单链接如下，目前正在谈论 form1）我包含 jquery.js，它会导致错误。错误是它没有加载**doAjax**和**getIP**函数，我将它们放在一个名为**func**的 js 文件中- 您可以在源代码中找到它（无法发布更多超链接）。

doAjax 应该根据第一个字段中的输入来检索 First 和 Lastname。getIP 根据 IP 检索位置

我的表单中还包含任何时间日期选择器，我需要 jQuery。

**当您在 IE 中打开表单时，在第[一个表单](http://bit.ly/MALpFT)中，您会看到该位置没有自动选择，并且用户名字段甚至没有说它应该是无效的。**

表格现在似乎在 FF 中不起作用，这很糟糕！

**但是，在我没有包含 jQuery.js的[第二种形式中，它实际上返回 IP 和用户名。](http://bit.ly/OcfmMn)所以，它适用于第二个，但我不能使用 Anytime 日期选择器，因为我的 html 中没有包含 jQuery.js。**

这两种形式都会在 IE 的左下角抛出 Done 错误，当我既不包含 jQuery.js 也不包含 Anytime.js 时，该错误就解决了。

单击 F5 刷新后，第一个表单效果很好。但这不是它应该如何工作的。

**任何想法我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:51:36.770

您是否查看过开发人员工具 (F12) 中的错误控制台？它报告安全异常：

SEC7118：*http* ://www.yourdomain.com/resource 的 XMLHttpRequest需要跨域资源共享 (CORS)。it.html

SEC7120：在 Access-Control-Allow-Origin 标头中找不到来源*http://www.yourdomain.com/resource 。*

问题似乎是我假设发出 Ajax 请求的 returnBuilding.php 来自与 Ajax 请求不同的主机。请记住，如果没有 CORS，来源必须完全相同，检查的不仅仅是域，而是实际的服务器名称、方案和端口。如果是这种情况，您必须将请求 URL 和请求的 URL 放在同一服务器上，或者将 Access-Control-Allow-Origin 标头添加到 Ajax 调用的响应中。

# html - 如何使文本垂直居中？

> ID：11620306
> 
> 赞同：-2
> 
> 时间：2012-07-23T20:50:13.303
> 
> 标签：html, css

让我们想象一下：

```
<span>IMAGE</span><span>Title `this text must be centered vertically`</span>
<div>
 content 
 content 
 content
</div> 
```

如何在第二个跨度中居中文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:03:46.387

这可能有帮助，也可能没有帮助......

```
 <div>
    Content<br />
    Content<br />
    Content<br />
    Content<br />
    Content<br />
  </div>
  <div style="margin-top: -60px;">Center this in content</div> 
```

你可以去[这里](http://jsbin.com/apelel/2/)查看和更改它。

# c# - 是否必须为异步方法调用调用 EndInvoke （或定义回调），即使它返回时您无事可做

> ID：11620310
> 
> 赞同：8
> 
> 时间：2012-07-23T20:50:38.137
> 
> 标签：c#, .net, vb.net, asynchronous, callback

我在 CodeProject 上找到了以下代码片段，用于异步调用方法... [http://www.codeproject.com/Articles/14931/Asynchronous-Method-Invocation](http://www.codeproject.com/Articles/14931/Asynchronous-Method-Invocation)

```
private void CallFooWithOutAndRefParameters()
{
    // create the paramets to pass to the function
    string strParam1 = "Param1";
    int intValue = 100;
    ArrayList list = new ArrayList();
    list.Add("Item1");

    // create the delegate
    DelegateWithOutAndRefParameters delFoo =
      new DelegateWithOutAndRefParameters(FooWithOutAndRefParameters);

    // call the beginInvoke function!
    IAsyncResult tag =
        delFoo.BeginInvoke(strParam1,
            out intValue,
            ref list,
            null, null);

    // normally control is returned right away,
    // so you can do other work here...

    // calling end invoke notice that intValue and list are passed
    // as arguments because they might be updated within the function.
    string strResult =
        delFoo.EndInvoke(out intValue, ref list, tag);

    // write down the parameters:
    Trace.WriteLine("param1: " + strParam1);
    Trace.WriteLine("param2: " + intValue);
    Trace.WriteLine("ArrayList count: " + list.Count);
    Trace.WriteLine("return value: " + strResult);
} 
```

关于这段代码，我有几件事不明白。

每个注释控件在到达 BeginInvoke 行时立即返回给调用代码。

这是否意味着后面的代码（EndInvoke 后跟一些跟踪日志记录）仅在 FooWithOutAndRefParameters 调用完成后运行......自动（即使该代码驻留在同一方法中）。我看起来有点困惑。（我一直对这种事情使用回调。）

使用此方法我必须调用 EndInvoke。我可以异步调用该方法并忘记它的发生吗？这有什么缺点吗？

如果我不调用 EndInvoke（如本方法所示），我应该总是有一个回调吗？即使回调什么也不做。

如果答案是您应该...那么您是调用 EndInvoke 还是定义一个回调？（定义回调的好处是通知您结果）

顺便说一句，我知道我可以在 EndInvoke 或回调中检查错误或记录结果（实际上我可能会这样做）。我想知道的是是否存在不调用 EndInvoke 或定义回调（例如内存泄漏）的风险？什么是最佳实践。

赛斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T21:22:14.070

是的，您必须调用 EndInvoke()。不这样做会导致持续 10 分钟的相当严重的资源泄漏。底层管道是 .NET Remoting，10 分钟是“默认生命周期租用时间”。经常这样做，你的程序就会崩溃。让委托目标花费超过 10 分钟也有有趣的结果。

但最重要的是，如果不是调用操作的结果，则需要查看调用的方法是否成功完成。如果它死于异常，那么在调用 EndInvoke() 之前你不会发现它。此时会重新引发异常。实际上处理这个异常是相当棘手的，因为你真的不知道你的程序状态有多少在它爆炸之前被委托目标改变了。如果你真的想抓住它，那么目标没有太多的副作用是非常重要的。或者相反，目标捕获并重新抛出异常，并根据需要执行状态恢复。

您使用的示例当然是一个非常愚蠢的示例，很难在*一种*方法中在 BeginInvoke 和 EndInvoke 调用之间做任何有用的事情。您始终依赖于可以注册的回调，即 BeginInvoke 调用中倒数第二个参数。或者换句话说，不要`null`像示例代码那样通过。并且喜欢像 BackgroundWorker 和 Task 这样的类，甚至是 ThreadPool.QueueUserWorkItem() 来消除这段代码的刺痛。使用委托的 BeginInvoke() 方法是非常低级的黑客攻击。

委托是 .NET 中非常强大的抽象，但它们并没有很好地分配其功能。使用它们来实现事件是样板和无故障的。正确使用它的 BeginInvoke() 方法是一种黑带艺术。一个值得注意的细节是它不再在 .NETCore 中工作，对远程处理的支持已从 CoreCLR 中删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T21:03:22.567

在任何事情之前，这些链接可能是有趣的：

[异步调用同步方法](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)

[Delegate.EndInvoke() 真的有必要吗？](https://stackoverflow.com/questions/4585042/is-delegate-endinvoke-really-necessary)

* * *

**现在，关于您的问题：**

> 每个注释控件在到达 BeginInvoke 行时立即返回给调用代码。

是的，调用是异步进行的（我可能假设它正在使用另一个线程）。

> 这是否意味着后面的代码（EndInvoke 后跟一些跟踪日志记录）仅在 FooWithOutAndRefParameters 调用完成后运行......自动（即使该代码驻留在同一方法中）。我看起来有点困惑。（我一直对这种事情使用回调。）

`EndInvoke`将阻塞执行，直到 BeginInvoke 启动的线程（方法）完成。在这种情况下，它类似于线程连接。

> 使用此方法我必须调用 EndInvoke。我可以异步调用该方法并忘记它的发生吗？这有什么缺点吗？

你必须总是打电话`EndInvoke`（见下文）。这可能有很多原因，但我认为最重要的一个是如果方法失败，通过抛出异常，在调用 EndInvoke 之前您不会收到异常。

> 如果我不调用 EndInvoke（如本方法所示），我应该总是有一个回调吗？即使回调什么也不做。

在这种情况下，回调必须`EndInvoke`从回调中调用。所以只有回调是可选的。

> 如果您应该回答...那么您是调用 EndInvoke 还是定义一个回调？（定义回调的好处是通知您结果）

您不必定义回调，但如果您这样做，则在其中调用 EndInvoke。

由您决定哪种方案更好：完全异步地通知方法完成或强制与方法连接（从而阻塞调用线程）。这都是关于控制的，你应该做一个或另一个，甚至两者兼而有之。

> 顺便说一句，我知道我可以在 EndInvoke 或回调中检查错误或记录结果（实际上我可能会这样做）。我想知道的是是否存在不调用 EndInvoke 或定义回调（例如内存泄漏）的风险？什么是最佳实践。

不是天生的，不，我不相信有风险。但是您必须始终检查该方法是否失败或成功完成。

* * *

在[MSDN](http://msdn.microsoft.com/en-us/library/2e08f6yc%28v=vs.110%29.aspx)中，以下是 BeginInvoke 之后可以执行的操作的选项：

*   做一些工作，然后调用 EndInvoke 进行阻塞，直到调用完成。

*   使用 IAsyncResult.AsyncWaitHandle 属性获取 WaitHandle，使用其 WaitOne 方法阻止执行，直到发出 WaitHandle 信号，然后调用 EndInvoke。

*   轮询 BeginInvoke 返回的 IAsyncResult 以确定异步调用何时完成，然后调用 EndInvoke。

*   将回调方法的委托传递给 BeginInvoke。当异步调用完成时，该方法在 ThreadPool 线程上执行。回调方法调用 EndInvoke。

* * *

**OBS：**正如@ScottChamberlain 在评论中所说，[MSDN 指出](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx#remarksToggle)：

> 如果需要，您可以调用`EndInvoke`以从委托中检索返回值，但这不是必需的。EndInvoke 将阻塞，直到可以检索到返回值。

我认为其背后的原因是，在处理控件时，您是在 UI 线程上进行操作。由于 EndInvoke 阻塞了线程，您可能有理由不想这样做。尽管如此，我还是建议使用回调或轮询完成，以确保您的方法已成功完成。这将使您的程序更加**健壮**（或*容错*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:54:04.737

作为实践，您*应该*调用 EndInvoke，因为调用者可能有处理程序订阅的事件可能对*您的*处理无关紧要，但对*消费者*可能很重要，以确保某些类型的处理可以在已知时间发生/应用状态。

# c# - 如何在 selenium 中指定下载文件名或检索下载的文件？

> ID：11620311
> 
> 赞同：0
> 
> 时间：2012-07-23T20:50:38.213
> 
> 标签：c#, selenium

我将硒用于带有 C#/ 的 /NET 4.0。

我通过输入日期范围并单击导出来下载文件：

这会自动将 CSV 下载到我的浏览器上设置的默认下载位置：

![在此处输入图像描述](../Images/6209636a28423c7e3090d7a106d68ed6.png)

```
public static void Downloadreport()
{
    selenium.Open("https://mlis.millenniumlabs.com/Admin/Reports/SpecimenVolume.aspx");

    //selenium.Click("link=Specimen Volume Report - Drugs");
    selenium.WaitForPageToLoad("30000");
    selenium.Click("id=ctl00_cphBody_dtpFrom");
    selenium.Type("id=ctl00_cphBody_dtpFrom", DateTime.Now.ToString("MM/dd/yyyy"));
    selenium.Type("id=ctl00_cphBody_dtpTo", DateTime.Now.ToString("MM/dd/yyyy"));
    selenium.Click("id=ctl00_cphBody_btnExport");
    selenium.SetSpeed("6000");
    Console.WriteLine("Waiting for result complete");
    selenium.IsTextPresent("Specimen Volume Report");
    selenium.IsTextPresent("Display Specimen Detail");

} 
```

我无法控制文件名，我想知道是否可以：

1.  在下载文件之前，明确指定文件名；或者
2.  获取最后下载的文件的文件名？

文件名类似于：`Export23498238974.csv`

# php - 在 php 应用程序中支持分析的最佳实践是什么？

> ID：11620316
> 
> 赞同：0
> 
> 时间：2012-07-23T20:50:59.637
> 
> 标签：php, performance, profiling

我正在为高性能 php Web 应用程序启动一个新项目。我想在向应用程序添加功能时不断分析应用程序，这样我就能够在开发过程中快速发现瓶颈。我已经在我的软件堆栈上配置了 xdebug，我对使用它很满意，但我希望在从头开始开发应用程序时能够深入了解最佳实践。我想从一开始就烘焙用于收集指标的功能。为此有什么建议？

如果它有所作为，应用程序将高度面向对象并使用 Zend 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:53:11.367

大多数性能瓶颈可能来自数据库。查询分析应该是至关重要的。它相对容易分析和加速慢查询可能会产生巨大的性能提升。这可以通过`EXPLAIN`缓慢的查询日志轻松完成，但能够在页面加载时查看这些指标非常好。

Zend 支持开箱即用 [http://framework.zend.com/manual/en/zend.db.profiler.html](http://framework.zend.com/manual/en/zend.db.profiler.html)

# macos - 如何使用快捷方式弹出菜单栏？

> ID：11620318
> 
> 赞同：2
> 
> 时间：2012-07-23T20:51:11.710
> 
> 标签：macos, cocoa

如果有人正在使用浏览器或任何其他应用程序，我希望用户能够输入快捷方式（例如 control-shift-P），然后我希望我的菜单栏弹出一个窗口，以便用户可以输入一些文字，按回车键关闭。

我该如何实施呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T20:42:33.530

也许您已经找到了解决方案，但这是我对这个问题的回答。

您可能正在搜索的是全局热键。查看有关如何创建全局热键的本教程：http: [//cocoasamurai.blogspot.ch/2009/03/global-keyboard-shortcuts-with-carbon.html](http://cocoasamurai.blogspot.ch/2009/03/global-keyboard-shortcuts-with-carbon.html)

一旦你让那部分工作，你唯一需要做的就是打开你的窗口。您可以通过以下方式执行此操作：

```
[myWindow makeKeyAndOrderFront:sender]; 
```

希望这对仍在寻找答案的人有所帮助

# iphone - iphone opengl es 2.0 非二的幂

> ID：11620320
> 
> 赞同：0
> 
> 时间：2012-07-23T20:51:20.323
> 
> 标签：iphone, opengl-es-2.0, textures, texture-mapping

我认为图像文件大小在 2.0 中不必是 2 的幂，但是当我尝试时，它只是显示黑屏。但它适用于两个图像的力量。谁能给我一些提示我缺少什么或者我应该怎么做才能使用 NPOT 图像？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:52:34.270

不幸的是，适用于 iOS 的 OpenGL ES 需要二次幂图像，因为它是一个相当严格的实现（例如，查看 OpenGL ES 中不可用的所有内容）。

如果您的图像不是二次幂，则有一些解决方案。

首先，最明显的一点是，您必须在图像中添加一些内边距才能做到这一点。这可以在图像编辑器中完成，也可以在加载纹理数据时以编程方式完成。

其次，如果您有多个纹理，则可以使用纹理打包工具将图像编译成更大的图像。这是一种更有针对性的方法，具体取决于您的预期用途，如果您打算将纹理用于多个 3D 网格或模型，则需要做更多工作，因为您的 UV/纹理坐标将与其原始坐标不同。

***编辑***

由于不是每个人都阅读评论，因此我将引用我的评论以使其具有更高的知名度。在非常特殊的情况下，NPOT 纹理是有效的，如下所示。

> 经过一番挖掘，NPOT 纹理在运行 2.0 ES 的较新 iOS 硬件中在技术上启用，但使用极为有限。具体来说，您必须使用具有钳位到边缘的线性过滤，并且没有 mipmapping。这限制了您的使用，并且在大多数情况下，二次方图像仍然会更有效/具有更高的帧速率。

# eclipse - 配置eclipse以使用jad

> ID：11620324
> 
> 赞同：17
> 
> 时间：2012-07-23T20:51:28.297
> 
> 标签：eclipse, jad

*   我[下载](http://sourceforge.net/projects/jadclipse/)了jar文件并将其放入插件目录
*   我[下载](http://www.varaneckas.com/jad/)了二进制文件并将其放入其他目录
*   我反弹了 Eclipse（Juno - 版本：4.2.0）
*   我更新了 jadclipse 以指向正确的文件夹 ![在此处输入图像描述](../Images/63dfdf0098785f1c99f409bd5b18040f.png)

单击我没有源的 jar 中存在的方法时，不会发生反编译。

**我错过了什么？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-23T21:01:09.570

您是否按照 JadClipse wiki 中的说明更改了类文件的默认编辑器？

> 打开的是 Eclipse 类文件查看器，而不是 JadClipse 类文件查看器。
> 转到 Window > Preferences... > General > Editors > File Associations 并确保 JadClipse Class File Viewer 具有 *.class 文件的默认文件关联。

对于 Eclipse 的最新版本，还要确保将“ *.class without source”设置为默认使用 JadClipse 类文件查看器。默认情况下，安装插件只会设置“* .class”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-19T09:20:48.987

转到 Window > Preferences... > General > Editors > File Associations 并选择*.class without source*如果默认情况下已经存在Class File Viewer并删除*Class File Viewer并仅保留 JadClipse Class File Viewer。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T15:08:27.537

在 Kepler 中，Window-> Eclipse 市场。安装杰德。重新开始。转到窗口-> 安装软件，然后粘贴[http://feeling.sourceforge.net/update](http://feeling.sourceforge.net/update)。选择两者，然后安装。现在应该工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-13T08:36:33.433

与 Eclipse 集成的 Java 反编译器 (Jad)

**1.下载Jad**

下载 Jad 可执行文件。

> Jad 官方网站似乎不再工作，请尝试镜像下载链接。Jad官网[http://www.kpdus.com/jad.html](http://www.kpdus.com/jad.html) Jad镜像下载
> 
> [http://www.softpedia.com/get/Programming/Debuggers-Decompilers-Dissasemblers/JAD.shtml](http://www.softpedia.com/get/Programming/Debuggers-Decompilers-Dissasemblers/JAD.shtml) [http://www.varaneckas.com/jad](http://www.varaneckas.com/jad)

**2.下载Jad Eclipse插件**

[下载名为http://sourceforge.net/projects/jadclipse/](http://sourceforge.net/projects/jadclipse/)的 Jad Eclipse 插件`Jabclipse (net.sf.jadclipse_x.x.x.jar)`

**3.将其复制到Eclipse插件文件夹**

将下载的 Jad Eclipse 插件复制`Jabclipse(jadclipse_x.x.x.jar)`到 Eclipse 插件文件夹。例如，

> D:\eclipse\plugins\net.sf.jadclipse_3.3.0.jar

PS 不需要解压，复制整个jar文件即可。

**4.重启Eclipse**

重启 Eclipse 使插件生效。

**5.在Eclipse中配置Jadclipse**

在 Eclipse 中，单击窗口 -> 偏好 -> Java –> Jadclips , 在“Path to Decompiler”字段中键入 Jad 的路径

[![在此处输入图像描述](../Images/35a0586c1f171295fb0b52471b203b55.png)](https://i.stack.imgur.com/y6ZY2.png)

**6\. 完成**

在 Eclipse 中，尝试 F3 进入任何没有源代码的类，Jad 会自动反编译它。

见例子：

```
/*jadclipse*/// Decompiled by Jad v1.5.8f. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) radix(10) lradix(10)
// Source File Name:   JSObject.java

package netscape.javascript;

import java.applet.Applet;
import sun.plugin.javascript.JSContext;

// Referenced classes of package netscape.javascript:
//            JSException

public abstract class JSObject
{ 
```

参考： [https ://mkyong.com/java/java-decompiler-plugin-for-eclipse/](https://mkyong.com/java/java-decompiler-plugin-for-eclipse/)

# css - 带有 H3 的 CSS div 标题，如附加的示例

> ID：11620327
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:51:48.587
> 
> 标签：css

请检查我试图实现的这个例子.. ![http://desmond.imageshack.us/Himg651/scaled.php?server=651&filename=cssre.gif&res=landing](../Images/c276f89ca5f83d9e7b6e0b9911093d52.png)

当有更多文字时，标题会自动拉伸..可以在这里看到 [http://demo.gavick.com/joomla15/mar2009/](http://demo.gavick.com/joomla15/mar2009/)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:05:43.947

您是否想要完全在 CSS 中完成带有圆角末端的背景部分？这并不容易，但可以按照与[这些选项卡](https://stackoverflow.com/questions/10684524/how-do-i-make-a-slated-rounded-border-on-a-html-element/10684564#10684564)相同的方式完成（检查 dabblet）。“可拉伸”方面是最简单的部分，因为它仅由`display:inline-block;`包含`div`.

仅使用 CSS 完成，绝对没有图像[http://dabblet.com/gist/3166401](http://dabblet.com/gist/3166401)

HTML结构很简单：

```
<div class="box-wrapper">
    <div class="heading-container">
        <h3>FEATURED STORY - exapandable: add or remove text here</h3>
    </div>
</div> 
```

CSS：

```
.box-wrapper {
    width: 600px;
    min-height: 150px;
    margin: 175px auto;
    border: solid 1px #ccc;
    position: relative;
}
.heading-container {
    left: 40px;
    display: inline-block;
    position: absolute;
    background: linear-gradient(#3c72a4, #345a7c);
}
.heading-container h3 {
    margin: 0;
    height: 20px;
    padding: 0 5px;
    font: 700 10px/20px /* 20px, just like the height */ Helvetica;
    color: #fff;
}
.heading-container:before, 
.heading-container:after {
    top: 0;
    width: 20px; /* just like the height of .heading-container */
    height: 20px; /* just like the height of .heading-container */
    position: absolute;
    z-index: -1;
    background: linear-gradient(#3c72a4, #345a7c);
    content: '';
}
.heading-container:before {
    left: -10px; /* 10px = half the height of .heading-container */
    border-radius: 0 0 0 25%; /* 25% = a quarter (of 20px) */
    transform: skewX(25deg);
}
.heading-container:after {
    right: -10px; /* 10px = half the height of .heading-container */
    border-radius: 0 0 25% 0; /* 25% = a quarter (of 20px) */
    transform: skewX(-25deg);
}
.heading-container h3:before, 
.heading-container h3:after {
    top: 0;
    width: 5px; /* same as the border-radius for .heading-container:before and :after */
    height: 5px; /* same as the border-radius for .heading-container:before and :after */
    position: absolute;
    background: #f00;
    content: '';
}
.heading-container h3:before {
    left: -18px;
    transform: skewX(25deg);
    background: radial-gradient(left bottom, 
        rgba(255, 255, 255, 0) 70.71%, #3b7a9c 70.71%);
    /* 70.71% = (2 * 100%)/sqrt(2) */
}
.heading-container h3:after {
    right: -18px;
    transform: skewX(-25deg);
    background: radial-gradient(right bottom, 
        rgba(255, 255, 255, 0) 70.71%, #3b7a9c 70.71%);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:57:05.810

让我们假设`<h3>`元素的背景图像是 20px 宽。

适用`display:inline-block`于`<h3>`以及`<span>`其中。然后，考虑到背景图像的宽度`<h3>`，我们将设置 margin-left 的值以`<span>`使其移动（实际上，这将显示 h3 的背景图像）。

```
h3, h3 span {
 display: inline-block;
}

h3 span {
 margin-left: 20px; /* This is assuming that the background-image of h3 is 20px wide; change accordingly */
} 
```

当一切都说完了，`<br>`在元素之后添加一个换行符（）`<h3>`，一切都应该没问题！或者，您可以将其他文本包装在不同的块元素/div 中以进行换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:57:55.343

为 h3 子跨度设置 87% 的宽度：

```
div.moduletable h3 span { 
  width:87%;
} 
```

# asp-classic - 如何使用 ASP 的服务器端 javascript 检索目录

> ID：11620330
> 
> 赞同：0
> 
> 时间：2012-07-23T20:52:15.250
> 
> 标签：asp-classic, recursion, directory, jscript

我正在尝试使用经典 ASP 的服务器端 Javascript 将所有子文件夹递归检索到以字符分隔的字符串“列表”中。这是我应该做的伎俩的功能：

```
function hasContent(text) {
if (text == undefined) {
    return false;
} else if (text === undefined) {
    return false;
} else if (text == "undefined") {
    return false;
} else if (text === "undefined") {
    return false;
} else if (typeof text == "undefined") {
    return false;
} else if (text == null) {
    return false;
} else if (text === null) {
    return false;
} else if (text == "") {
    return false;
} else if (text === "") {
    return false;
} else {
    return true;
}
}

function generateActualPath(path) {

try {
    if (!hasContent(path)) {
        return "./";
    } 

    if (!/.+[\\/\\\\]$/.test(path)) {
        path += "/";
    } 

    if (!/^\\./.test(path)) {
        path = "." + path;
    }

    return path;

} catch (e) {
    return "./";
}
}

function retrieveDirectories(dir) {
    try {
        var actualPath = '/' + dir;
        var obj = Server.CreateObject("Scripting.FileSystemObject");
        dirs = obj.GetFolder(Server.MapPath(generateActualPath(actualPath)));
        for (var enumm = new Enumerator(dirs.subFolders); !enumm.atEnd(); enumm.moveNext()) {
            if (/^[a-zA-Z0-9\-_&%#]/.test(enumm.item().Name) && enumm.item().Name.trim().indexOf('_') != 0) {
                if (hasContent(Session("directories"))) {
                    Session("directories") += enumm.item().Name + '|';
                } else {
                    Session("directories") = enumm.item().Name + '|';
                }
                retrieveDirectories(enumm.item().Name);
            }
        }
    } catch (e) {} 
} 
```

但是，尽管进行了递归调用，但我只看到了“dir”的第一级子文件夹，没有更多的东西。我可能在这里缺少什么？我验证了“dir”最多有 4 个子目录的子目录，这些子目录不以“_”开头，并且根据客户要求包含合法的字母数字字符。

# r - 在多面 ggplot 中绘制排序值

> ID：11620332
> 
> 赞同：2
> 
> 时间：2012-07-23T20:52:23.037
> 
> 标签：r, ggplot2

我无法使用 ggplot2 在每个方面内绘制排序值。

这是示例图![在此处输入图像描述](../Images/56f4644fe8ddcd3589ec59283232274a.png)

```
ggplot(data=df) + 
    geom_point(aes(y=log(count_neg,10), x= ref_name, colour=replicate)) +             
    facet_grid(condition ~ sub_groups) 
```

我想做的是按 Y 值对每个方面的点进行排序。我尝试了以下但没有奏效：

```
ggplot(data=df) + 
    geom_point(aes(sort(y=log(count_neg,10),decreading=TRUE), 
                   x= ref_name, colour=replicate)) + 
    facet_grid(condition ~ sub_groups) 
```

这里的原始数据：

```
df<-structure(list(condition = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L), .Label = c("N_0m", "N_10m", "N_1h", "N_24h", "N_2h", 
"N_30m", "N_48h", "N_6h", "N_8h"), class = "factor"), replicate = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("A", "B"), class = "factor"), 
    ref_name = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 
    10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 
    22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 
    34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 
    46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 55L, 56L, 57L, 
    58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 67L, 68L, 69L, 
    70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 80L, 81L, 
    82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 1L, 
    2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 
    15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 
    27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 
    39L, 40L, 41L, 42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 
    51L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 
    63L, 64L, 65L, 66L, 67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 
    75L, 76L, 77L, 78L, 79L, 80L, 81L, 82L, 83L, 84L, 85L, 86L, 
    87L, 88L, 89L, 90L, 91L, 92L), .Label = c("ERCC-00002", "ERCC-00003", 
    "ERCC-00004", "ERCC-00009", "ERCC-00012", "ERCC-00013", "ERCC-00014", 
    "ERCC-00016", "ERCC-00017", "ERCC-00019", "ERCC-00022", "ERCC-00024", 
    "ERCC-00025", "ERCC-00028", "ERCC-00031", "ERCC-00033", "ERCC-00034", 
    "ERCC-00035", "ERCC-00039", "ERCC-00040", "ERCC-00041", "ERCC-00042", 
    "ERCC-00043", "ERCC-00044", "ERCC-00046", "ERCC-00048", "ERCC-00051", 
    "ERCC-00053", "ERCC-00054", "ERCC-00057", "ERCC-00058", "ERCC-00059", 
    "ERCC-00060", "ERCC-00061", "ERCC-00062", "ERCC-00067", "ERCC-00069", 
    "ERCC-00071", "ERCC-00073", "ERCC-00074", "ERCC-00075", "ERCC-00076", 
    "ERCC-00077", "ERCC-00078", "ERCC-00079", "ERCC-00081", "ERCC-00083", 
    "ERCC-00084", "ERCC-00085", "ERCC-00086", "ERCC-00092", "ERCC-00095", 
    "ERCC-00096", "ERCC-00097", "ERCC-00098", "ERCC-00099", "ERCC-00104", 
    "ERCC-00108", "ERCC-00109", "ERCC-00111", "ERCC-00112", "ERCC-00113", 
    "ERCC-00116", "ERCC-00117", "ERCC-00120", "ERCC-00123", "ERCC-00126", 
    "ERCC-00130", "ERCC-00131", "ERCC-00134", "ERCC-00136", "ERCC-00137", 
    "ERCC-00138", "ERCC-00142", "ERCC-00143", "ERCC-00144", "ERCC-00145", 
    "ERCC-00147", "ERCC-00148", "ERCC-00150", "ERCC-00154", "ERCC-00156", 
    "ERCC-00157", "ERCC-00158", "ERCC-00160", "ERCC-00162", "ERCC-00163", 
    "ERCC-00164", "ERCC-00165", "ERCC-00168", "ERCC-00170", "ERCC-00171"
    ), class = "factor"), count_neg = c(468869L, 34677L, 113226L, 
    23508L, 8655L, 9319L, 210L, 25675L, 928L, 53981L, 8878L, 
    22507L, 5880L, 11756L, 21688L, 95L, 2397L, 6553L, 2533L, 
    12714L, 110L, 13520L, 71598L, 3177L, 55453L, 4157L, 3391L, 
    2740L, 144203L, 52L, 10710L, 15576L, 22028L, 5328L, 42474L, 
    1906L, 2829L, 12753L, 1207L, 351477L, 28401L, 5523L, 1166L, 
    7515L, 2773L, 17744L, 757L, 16316L, 16855L, 1236L, 16087L, 
    5447L, 358290L, 29127L, 34571L, 159457L, 630L, 46067L, 5977L, 
    22835L, 4014L, 111972L, 12372L, 5396L, 8183L, 1293L, 210L, 
    734814L, 10174L, 12838L, 39742L, 4259L, 35927L, 801L, 16309L, 
    16153L, 133685L, 8209L, 4331L, 5319L, 6029L, 3074L, 4768L, 
    2274L, 4958L, 9128L, 7243L, 2946L, 14718L, 20577L, 11257L, 
    78889L, 2407687L, 116262L, 52712L, 47998L, 10892L, 10124L, 
    479L, 19437L, 1257L, 61059L, 31119L, 25751L, 10645L, 14689L, 
    20248L, 92L, 3168L, 11003L, 3396L, 16732L, 176L, 29809L, 
    77936L, 12340L, 155159L, 5336L, 3818L, 3127L, 163497L, 66L, 
    14612L, 12687L, 25586L, 6996L, 25554L, 2284L, 3667L, 15745L, 
    1444L, 1033128L, 20087L, 17619L, 1412L, 11946L, 8014L, 19551L, 
    978L, 24182L, 22125L, 1717L, 14514L, 4564L, 903132L, 33653L, 
    39776L, 173518L, 796L, 35684L, 6524L, 62638L, 14418L, 398893L, 
    7938L, 6422L, 10595L, 1563L, 572L, 370134L, 10825L, 13837L, 
    17794L, 5164L, 43831L, 1114L, 17244L, 18924L, 171171L, 10228L, 
    5789L, 6847L, 6467L, 3582L, 6834L, 3084L, 7450L, 12474L, 
    6399L, 2390L, 22084L, 20090L, 7961L, 192521L), sub_groups = structure(c(4L, 
    4L, 1L, 2L, 3L, 4L, 4L, 3L, 1L, 1L, 4L, 3L, 2L, 1L, 2L, 1L, 
    2L, 2L, 3L, 3L, 4L, 2L, 4L, 3L, 4L, 4L, 2L, 2L, 3L, 3L, 3L, 
    4L, 2L, 4L, 1L, 2L, 4L, 3L, 2L, 3L, 2L, 3L, 4L, 4L, 4L, 4L, 
    1L, 3L, 1L, 4L, 1L, 1L, 2L, 1L, 3L, 3L, 2L, 1L, 2L, 3L, 4L, 
    3L, 1L, 2L, 3L, 1L, 2L, 1L, 1L, 1L, 1L, 4L, 2L, 2L, 3L, 1L, 
    3L, 1L, 2L, 2L, 1L, 1L, 3L, 2L, 4L, 3L, 4L, 3L, 4L, 4L, 1L, 
    2L, 4L, 4L, 1L, 2L, 3L, 4L, 4L, 3L, 1L, 1L, 4L, 3L, 2L, 1L, 
    2L, 1L, 2L, 2L, 3L, 3L, 4L, 2L, 4L, 3L, 4L, 4L, 2L, 2L, 3L, 
    3L, 3L, 4L, 2L, 4L, 1L, 2L, 4L, 3L, 2L, 3L, 2L, 3L, 4L, 4L, 
    4L, 4L, 1L, 3L, 1L, 4L, 1L, 1L, 2L, 1L, 3L, 3L, 2L, 1L, 2L, 
    3L, 4L, 3L, 1L, 2L, 3L, 1L, 2L, 1L, 1L, 1L, 1L, 4L, 2L, 2L, 
    3L, 1L, 3L, 1L, 2L, 2L, 1L, 1L, 3L, 2L, 4L, 3L, 4L, 3L, 4L, 
    4L, 1L, 2L), .Label = c("A", "B", "C", "D"), class = "factor")), .Names = c("condition", 
"replicate", "ref_name", "count_neg", "sub_groups"), row.names = c(NA, 
184L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T22:43:19.273

试试这个：

```
df$ref_name <- reorder(df$ref_name,-log(df$count_neg,10))    

ggplot(data=df) + 
    geom_point(aes(y=log(count_neg,10), x= ref_name, colour=replicate)) +             
    facet_grid(condition ~ sub_groups) 
```

如果您想要相反的顺序，则省略减号。这将按（全局）y 值对 x 轴进行排序。如果您打算分别对每个方面进行排序，那会稍微复杂一些，部分原因是它会使图表更加混乱。

# javascript - Firebase child_added

> ID：11620333
> 
> 赞同：1
> 
> 时间：2012-07-23T20:52:25.653
> 
> 标签：javascript, firebase

我的应用程序现在可以运行，但我不确定它为什么会运行...

我有一些类似的代码：

```
var itemRef;

listRef.on('child_added', function(childSnapshot, prevChildName) {
    itemRef = childSnapshot;
}); 
```

问题是当我稍后尝试使用`itemRef`它时它不起作用。然而，我花了几个小时才意识到引用不起作用，因为`itemRef.name()`返回了正确的引用名称。

在搜索 API 时，我遇到了该`.ref()`函数。API 声明`.ref()`返回“生成此 DataSnapshot 的位置的 Firebase 参考”。这使该功能对我来说完全没有意义，但我决定尝试一下：

```
var itemRef;

listRef.on('child_added', function(childSnapshot, prevChildName) {
    itemRef = childSnapshot.ref();
}); 
```

谁能向我解释为什么`.ref()`我的参考工作只是返回“生成此 DataSnapshot 的位置的 Firebase 参考”。??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:30:55.650

Firebase 公开了两种不同类型的对象：[Firebase 引用](http://www.firebase.com/docs/firebase.html)和[DataSnapshots](http://www.firebase.com/docs/datasnapshot.html)。

Firebase 引用就像一条路径。它只是指向 Firebase 中的一个位置。您可以使用它来设置（）数据，使用 on（）附加事件回调等。

DataSnapshot 存储在某个时间点从 Firebase 检索到的数据。它只包含数据。您可以调用 .child()、.val() 等来读取数据，但不能使用它来执行 set() 或任何其他 Firebase 操作。

因此，您的第一个代码段不起作用，因为它存储了与 Firebase 引用不同的快照。碰巧这两个对象都有一个行为相同的 .name() 函数，这可能在这里引起了混乱。

# sql - 求和函数在 SQL 中不起作用

> ID：11620343
> 
> 赞同：1
> 
> 时间：2012-07-23T20:52:59.180
> 
> 标签：sql, sum

> **可能重复：**
> [根据表的另一个总和对表的列求和](https://stackoverflow.com/questions/11617958/sum-a-column-of-a-table-based-on-another-sum-of-a-table)

我从 sql 中的子选择中的已求和列中求和一列，但它给了我与已求和列相同的值。TotalAmount 应该与 InvoiceTotal 相加，但它只是复制相同的值。谁能看到我做错了什么，或者是否有更好的方法来解决这个问题？

```
declare @ReportLines table 
    (RebateInvoiceID int, 
     RebateSetupID int ,
     ShortItemNo float primary key(RebateInvoiceID,RebateSetupID,ShortItemNo),
     TotalAmount float,
     InvoiceTotal float,
     TotalQuantity int )
insert @ReportLines
select
  Total.RebateInvoiceID
, Total.ID
, Total.ShortItemNo
, Total.TotalAmount
, sum(Total.TotalAmount) as InvoiceTotal
, Total.TotalQuantity
from
(
select 
i.RebateInvoiceID
,coalesce(rs.WholesalerRebateSetupID,r.RebateSetupID) as ID
,bl.ShortItemNo
, sum(round(r.Amount,2)) as TotalAmount
, sum(r.Quantity) TotalQuantity
from
  @Invoices i
  join RebateInvoices ri (nolock) on 
    ri.RebateInvoiceID=i.RebateInvoiceID
  inner loop join Rebates r (nolock) on
    r.RebateInvoiceID=i.RebateInvoiceID       
  join RebateSetup rs (nolock) on
    rs.RebateSetupID=r.RebateSetupID
  join BidLines bl (nolock) on 
    r.BidLineGuid=bl.BidLineGuid
  join @Products p on
    p.ShortItemNo=bl.ShortItemNo
  left join ChargebackDetailHistory cd (nolock) on 
    r.DocumentBranchPlant = cd.DocumentBranchPlant
    and r.DocumentNumber = cd.DocumentNumber
    and r.DocumentType = cd.DocumentType
    and r.LineNumber = cd.LineNumber
  left join EDI.dbo.JDE_SaleDetail sd (nolock) on 
    r.DocumentBranchPlant = sd.BranchPlant
    and r.DocumentNumber = sd.OrderNumber
    and r.DocumentType = sd.OrderType
    and r.LineNumber = sd.LineNumber
where 
    cd.InvoiceDate between @BeginDate and @EndDate
    or sd.InvoiceDate between @BeginDate and @EndDate
group by
  i.RebateInvoiceID
, coalesce(rs.WholesalerRebateSetupID,r.RebateSetupID)
, bl.ShortItemNo
) Total

group by 
total.rebateinvoiceid,
total.ID,
total.shortitemno,
total.totalamount,
total.totalquantity 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:59:57.330

不要在您尝试进行 SUM 的同一字段上进行分组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:04:08.103

这是因为您按`TotalAmount`和分组`TotalQuantity`。按这些值分组是没有意义的。由于其余三个组字段与子选择中的相同，因此您将获得相同的行。您必须按较少的字段进行分组，以便将子选择的几行统一到外部选择的一行中，以获得总和的总和。

但在我看来，这个外部选择根本没有意义，为什么不单独使用内部选择呢？

# tfs - tfs 统一差异文件生成。标题行与补丁命令不匹配

> ID：11620345
> 
> 赞同：5
> 
> 时间：2012-07-23T20:53:01.223
> 
> 标签：tfs, diff

我正在尝试生成差异文件（补丁文件）并将此补丁应用到一些已经部署的文件夹。我正在运行以下命令来生成差异文件：

`tf diff version.asp /format:unified > C:\patch.diff`

它会产生类似的东西：

`Comparing local to latest: C:\dev\folder\version.asp File: version.asp ===================================================================`

**--- version.asp (local) 2011-06-17 09:18** *文本，在文件名之后，不应该在这里*

**+++ version.asp;958 (server) 2011-09-19 14:27** *这里一样*

```
@@ -13,7 +13,7 @@
'============================================================
Dim APP_VERSION, APP_BUILD, APP_DATE  
APP_VERSION = 6
-APP_BUILD = 45
+APP_BUILD = 52
%>
\ No newline at end of file
============================================================ 
```

问题出现在粗体线上。UNIX*补丁*应用程序无法识别文件名，因为这些行应该只包含文件名而不包含任何附加信息。如果我在这些行上删除文件名后的文本，*补丁*将成功运行。所以我的问题是：是否可以从 tf diff 生成 diff 文件，而标题中没有此类信息，以便它与*patch*兼容？

有一种替代方法，例如应用正则表达式并替换此类行，但这将是使其正常工作的最后尝试。

谢谢

**更新**

最后，我最终`regex`从行中删除了那些不必要的信息，使用 Unix`sed`实用程序运行它，我从`MinGW`.

`sed "s/^\(+++\|---\)\(.*\)\(\.[A-Za-z0-9]\{1,4\}\)\(.*\)$/\1\2\3/" C:\patch.diff > C:\patch.new`

`patch.diff``tfs`是从输出生成的格式错误的文件`patch.new`是正确的统一差异文件并与`patch`实用程序兼容

**更新2**

经过数小时的撞墙后，我发现在从`tfs`Unicode 扩展字符生成的差异文件中，只是简单地转义或替换为最接近的 ASCII 表示。

例如，如果代码有`ä`字母，在输出差异文件中它将被一个简单的`a`字母替换。

这使得从`tfs`实用程序生成的差异文件毫无用处。

这显然是一个错误。

**仅供参考：** 我正在使用 vs2010 和团队基础服务器 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:03:28.547

至于它的价值，我也想不通。TFS 使用 /unified 创建格式错误的文件。

我使用本地 git install 解决了这个问题：

```
(shelve change set)
tfpt scorch
git init 
git add .
git commit -a -m "Original"
git checkout -b "New"
(checkout shelf in tfs)
git add . 
git commit -a -m "Change"
git format-patch master 
```

：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:22:04.420

如果输出与[`tf diff /format:unified`](http://msdn.microsoft.com/en-us/library/6fd7dc73%28v=vs.100%29.aspx)不同`diff -u`且不兼容`patch`，则这是您应该向 Microsoft 报告的错误

正如您所说，解决方法是繁琐地查找和替换。

# ios - 增强现实：OpenGL 视图上的相机流

> ID：11620346
> 
> 赞同：2
> 
> 时间：2012-07-23T20:53:02.083
> 
> 标签：ios, opengl-es, avfoundation, glkit

AR（增强现实）似乎是当今所有 iO 开发人员都在关注的东西。我正在玩一个非常经典的宠物项目，用纹理滚动骰子，如果可能的话，将相机流放在骰子面上。我在最后一部分面临一些问题，我有一些问题要问专家：

获取视频流需要 AV Foundation ：`AVCaptureVideoDataOutputSampleBufferDelegate`获取图像缓冲区，然后构建`UIImage`使用 Quartz 函数，如`CGBitmapContextCreate`. 这在[http://www.benjaminloulier.com/articles/ios4-and-direct-access-to-the-camera](http://www.benjaminloulier.com/articles/ios4-and-direct-access-to-the-camera)或苹果 AV Foundation Programming Guide 中进行了演示（参见[https://developer.apple.com/library /ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW30](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW30)）

然后我可以像为“静止”图像所做的那样创建纹理，并将其与`GLKBaseEffect`（或着色器？）一起使用。

问题 1：`GLKBaseEffect`看起来非常好和简单，但我应该瞄准 OpenGL 2 和着色器吗？

现在来自苹果的 RosyWriter 演示使用 Core Video`CVOpenGLESTextureCacheCreateTextureFromImage`功能直接绑定纹理，无需创建中介`UIImage`。这是 - 如演示描述中所述 - IOS 5 中的新功能。

问题 2：这是映射纹理的更好方法吗？

问题 3：有一些有趣的框架，比如 GPUImage，甚至 3D Gaming 框架也可以使用。有人对使用这些有什么反馈吗？到目前为止，苹果提供的框架对我来说似乎很完整。

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:02:55.320

针对您的各种问题：

> GLKBaseEffect 看起来非常好和简单，但我应该瞄准 OpenGL 2 和着色器吗？

GLKBaseEffect 只是一些简单的 OpenGL ES 2.0 着色器的封装，因此它的核心使用 2.0。虽然 GLKit 提供了一些很好的便利，但最终您将需要创建默认情况下无法提供的效果，因此您很可能需要在某个时候学习如何制作自己的顶点和片段着色器。[我在这个答案](https://stackoverflow.com/a/8495261/19679)中列出了一些学习这些资源的资源。

> 现在来自 Apple 的 RosyWriter 演示使用 Core Video CVOpenGLESTextureCacheCreateTextureFromImage 函数直接绑定纹理，而无需创建中间 UIImage。这是 - 如演示描述中所述 - IOS 5 中的新功能。
> 
> 问题 2：这是映射纹理的更好方法吗？

是的，在 iOS 5.0 上，使用纹理缓存上传视频帧可以带来一些可靠的性能改进。对于 iPhone 4S，使用纹理缓存时，我看到帧上传时间从 640x480 帧的 9.3 ms 下降到 1.8 ms。[从纹理缓存中读取以编码视频](https://stackoverflow.com/questions/9550297/faster-alternative-to-glreadpixels-in-iphone-opengl-es-2-0/9704392#9704392)时，还有更大的好处。

> 问题 3：有一些有趣的框架，比如 GPUImage，甚至 3D Gaming 框架也可以使用。有人对使用这些有什么反馈吗？到目前为止，苹果提供的框架对我来说似乎很完整。

我建议为此使用 GPUImage，但我有点偏见，看看我是如何写的。作为更具体的一点，我在该框架的示例代码中的 CubeExample 中几乎完全按照您的描述（读取视频帧并将它们映射到旋转立方体的侧面）。

这个例子有点复杂，因为我拍摄实时视频，通过棕褐色色调过滤器运行它，将其作为纹理读取并将其显示在可以用手指旋转的 3-D 立方体上，然后获取渲染立方体的视图通过像素化过滤器运行。但是，您可以仅从该示例中提取您需要的部分。通过这样做，您将节省大量代码，因为我会为您处理视频捕获和上传到 OpenGL ES。

# java - 在没有默认 java.policy 文件的情况下运行 Java 安全管理器

> ID：11620354
> 
> 赞同：6
> 
> 时间：2012-07-23T20:53:46.217
> 
> 标签：java, security, securitymanager

我不想修改我的 java 主目录中的任何内容，但是，我担心有时我的默认 java.policy 文件可能过于宽松。当我使用该选项运行 java 时，有没有办法让我使用指定的策略文件作为唯一的策略文件`-Djava.security.manager`？

如果我添加一个`-Djava.security.policy=myPolicy.policy`选项，除了默认策略文件之外，它还会使用我的策略文件——这很糟糕，因为看起来默认策略文件中授予的所有权限仍然被授予。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T20:27:11.927

[Java SecurityManager 的一个常见错误](http://javahowto.blogspot.fi/2006/05/common-mistake-with-java.html)：

*   使用 SecurityManager 和默认 Java 安全策略运行，即 $JAVA_HOME/jre/lib/security/java.policy：

    `java -Djava.security.manager Main`

*   **要使用 SecurityManager 并且仅使用您的自定义安全策略（忽略默认的 java 安全策略）运行：**

    `java -Djava.security.manager -Djava.security.policy==security.policy Main`

*   首先使用 SecurityManager 和默认 java 安全策略运行，然后是您的自定义安全策略：

    `java -Djava.security.manager -Djava.security.policy=security.policy Main`

*   如果您不想要 SecurityManager，那么只需省略 java.security.policy 以避免任何混淆。

# android - 获取视图的位置

> ID：11620356
> 
> 赞同：0
> 
> 时间：2012-07-23T20:53:54.783
> 
> 标签：android

我想从设备屏幕顶部获取视图的距离。

我正在使用动画对我的活动做一些事情，我需要一个动画从某个点开始。这是一个 TranslateAnimation，它以百分比的形式给出了行驶距离。

前任：

```
Animation animation = new TranslateAnimation(
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.1f, Animation.RELATIVE_TO_PARENT, 0.0f
            ); 
```

上面的代码用于对视图进行动画处理，该视图从屏幕顶部下方 10% 处开始向上移动，直到与屏幕顶部对齐。

出于我的目的，值 0.1f 不能被硬编码，因为所需的确切值可能会随着不同的设备而变化。我需要一种方法来确定应该使用什么动态值来代替 0.1f。这个值应该是另一个特定视图与屏幕顶部的距离。

所以，基本上，我想要的是一种在屏幕上获取现有视图并确定它离屏幕顶部多远的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:07:48.070

该类`View`有两个方便的方法，`getLocationOnScreen()`允许`getLocationInWindow()`您直接获取视图相对于整个显示的位置，而不仅仅是其父视图。这些方法会预先初始化`int[]`x/y 位置将被填充的位置。

方法`getLeft()`和`getTop()`也可能有用，但请记住，这些方法将返回给定对象相对于其父对象的坐标，在这种情况下，这可能是您需要的，也可能不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:01:31.697

> 可以通过调用 getLeft() 和 getTop() 方法来检索视图的位置。前者返回代表视图的矩形的左坐标或 X 坐标。后者返回代表视图的矩形的顶部或 Y 坐标。这些方法都返回视图相对于其父视图的位置。例如，当 getLeft() 返回 20 时，这意味着视图位于其直接父级的左边缘右侧 20 像素处。

来自[Android 开发者网站](http://developer.android.com/reference/android/view/View.html)

# android - Android系统媒体文件存放在哪里？

> ID：11620358
> 
> 赞同：0
> 
> 时间：2012-07-23T20:54:00.333
> 
> 标签：android

Android在哪里存储系统媒体文件？具体来说，我正在寻找系统“点击”音频文件。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:17:43.933

这个问题可能更适合[Android.stackexchange.com](https://android.stackexchange.com/)

顺便说一句，我已经在那里问过一些非常相似的东西。请参阅：[禁用系统滴答声](https://android.stackexchange.com/questions/26091/disable-system-tick-sound/26092)

作为参考，该文件在我的设备（T-mobile Sidekick 4g）上的位置是

```
/system/media/audio/ui/TW_Touch.ogg 
```

注意：您需要有根设备才能访问它。

# git - 使用 gitblit 1.0 进行 ldap 身份验证

> ID：11620359
> 
> 赞同：0
> 
> 时间：2012-07-23T20:54:01.223
> 
> 标签：git, authentication, ldap, gitblit

我刚刚获得了 Gitblit 的最新版本 1.0 可用在这里

我正在尝试集成身份验证的 LDAP 方法。因为我认为我的 ldap 不是典型的，所以我对这些术语匹配的内容有疑问。

到目前为止，我一直在关注有限的资源（因为 1.0 刚出来）和 google 组。

但是，我什至无法连接我的服务器。

我将粘贴 Gitblit 进行身份验证所需的字段，然后我将粘贴我的 ldap 中列出的一些相关字段。

我以前在 ldap 结构上遇到过问题，但我想知道是不是只有我一个人。

谢谢！

内部：gitblit.properties

```
realm.ldap.server = http://127.0.0.1 #for this purpose

# Login username for LDAP searches.
  realm.ldap.username = username

# Login password for LDAP searches.
  realm.ldap.password = password

# Root node for all LDAP users
  realm.ldap.accountBase = CN=Users,DC=rem,DC=pri

# Filter criteria for LDAP users
# Query pattern to use when searching for a user account. This may be any valid 
# LDAP query expression, including the standard (&) and (|) operators.
#    ${username} - The text entered as the user name
  realm.ldap.accountPattern = (&(objectClass=person)(sAMAccountName=${jsmith}))

# Root node for all LDAP groups to be used as Gitblit Teams
# This is the root node from which subtree team searches will begin.
  realm.ldap.groupBase = 

# Filter criteria for LDAP groups
# Variables may be injected via the ${variableName} syntax.
# Recognized variables are:
#    ${username} - The text entered as the user name
#    ${dn} - The Distinguished Name of the user logged in
# All attributes from the LDAP User record are available. For example, if a user
# has an attribute "fullName" set to "John", "(fn=${fullName})" will be 
# translated to "(fn=John)".
  realm.ldap.groupMemberPattern = (&(objectClass=group)) 
```

这是我的目录列表的图片（显然标识的东西已被删除）

![ldap 目录](../Images/10f548843b23628b87dea836968c7d90.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:09:59.740

我对 Gitblit 一无所知，但不应该

```
realm.ldap.accountPattern = (&(objectClass=person)(sAMAccountName=${jsmith})) 
```

是

```
realm.ldap.accountPattern = (&(objectClass=person)(sAMAccountName=${username})) 
```

用于基于变量的搜索，或

```
realm.ldap.accountPattern = (&(objectClass=person)(sAMAccountName=jsmith)) 
```

如果您试图对搜索进行硬编码（用于测试）？

# asp.net-mvc - 类名的多个 DBML 模型最佳实践

> ID：11620364
> 
> 赞同：0
> 
> 时间：2012-07-23T20:54:18.637
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq-to-sql, naming-conventions

我们的几个应用程序使用下面示例中的多个数据库 - 每个数据库都在各自单独的 DBML 文件中。问题是，按照惯例，MVC 将它们都放在了`namespace AppName.Models`导致类名冲突的地方。

这两个选项中哪一个是更好的解决方案，为什么：

1.) 将它们放在单独的命名空间中。为了让 stylecop/resharper 满意，他们会进入自己的子文件夹：

*   /楷模
*   *   /居住
*   *   *   Live.dbml
*   *   *   LiveDataContext.cs
*   *   /CRM
*   *   *   CRM.dbml
*   *   *   CrmDataContext.cs

**但现在在代码中，它们的所有用途都必须是`Live.Customer`和`Crm.Customer`区分对象。

### 编辑：这个的另一个主要缺点是我没有看到专家使用文件夹中的子文件夹的其他示例代码`Models`。最重要的是，为了保持`Helper`文件代码重用的相同命名 - 即使只使用一个数据库的应用程序也需要一个子文件夹 in `Models`，我当然从未见过有人在 MVC 中这样做

2.) 在一个或两个 DBML 设计器中为所有对象名称添加前缀。这是我目前的做法。Live 数据库有`Customer`和`Order`对象，而 Crm 数据库有`CrmCustomer`和`CrmOrder`。它们都位于相同的命名空间和`/Models`文件夹中。然而，这有两个主要缺点：

*   访问子对象时有相当多的前缀冗余：`CrmCustomer.CrmOrders.First().CrmOrderType`Marsha Marsha Marsha
*   在仅使用一个数据库的其他应用程序中，我们经常省略前缀 - 然后在代码重用或`Helper`文件期间，我们必须进行大量查找/替换。`Helper`这在添加到每个应用程序的文件中尤其明显，例如错误/活动日志记录。

所以我想听听其他专家的意见，他们使用了这两种策略中的哪一种，或者完全是别的什么。数据库之间至少有一些名称冲突似乎很常见。谢谢

* * *

示例表名：

**实时数据库：**

*   顾客
*   命令
*   地址
*   电话
*   日志
*   其他 20 张桌子

**内网数据库：**

*   顾客
*   命令
*   地址
*   电话
*   日志
*   其他 20 张桌子

**CRM 工具数据库：**

*   顾客
*   命令
*   地址
*   电话
*   日志
*   其他 400 张桌子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:26:42.507

如果我正确理解您的问题，您还有另外两种可能的解决方案：

1.  您可以修改 DBML 生成的实体的名称空间。假设您使用 T4 模板生成它们，您可以右键单击 *.tt 文件，然后转到属性。有一个命名空间属性，您可以将其设置为您自己的自定义命名空间，因此是唯一的命名空间：

    *   MyCompany.MyProject.DataModels.Live
    *   MyCompany.MyProject.DataModels.Intranet
    *   MyCompany.MyProject.DataModels.CRM
2.  第二个类似的选择是让每个 dbml 和生成的类包含在它们自己的项目中，并且它们自己的命名空间与之关联。因此，在这种情况下，您将拥有三个新项目：

    *   实时数据
    *   数据.Intranet
    *   数据.CRM

    然后，您可以在想要使用项目时添加对项目的引用。

    在我看来，这样做的好处是，明天你很可能会有一个需要引用 Live、CRM 和全新数据库的项目。在这种情况下，您只需依赖于您已经创建的项目（二进制或代码——我的偏好是二进制，但 YMMV），第二个项目的那部分就完成了。

在我看来，不要装饰你的班级（你的选择 2）。这将很难维持。您的选项 1 本质上没有任何问题，我也这样做了，但是对于我当前的大多数解决方案，我为可重用性因素创建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:25:12.370

因此，我质疑导致您在代码中需要两个相同数据库的设计。除此之外，我认为选项1更好。这是我的推理：

1.  代码更可重用。如果您需要将任一模型分离到另一个项目中，或删除一个，您不必在任何地方删除前缀。这提供了干净的分离。
2.  选项 2 也需要您指定，您不能避免这一点。但是，如果任何类只需要访问一个命名空间，您只需在`using`级别上指定，而不是在对代码的每一个引用中指定。在需要两者的类中，无论哪种情况，您都不会避免使用前缀。所以选项#1 在唯一重要的情况下胜出。
3.  我通常会避免使用类型前缀。他们很难看。
4.  抱怨，抱怨，数据库设计

# php - Apache - PHP 文件返回黑色，php 文件显示中甚至没有 HTML

> ID：11620365
> 
> 赞同：1
> 
> 时间：2012-07-23T20:54:21.260
> 
> 标签：php, apache, ubuntu

我有 Ubuntu 10.04，我的 apache2 服务器已经运行了几天。

我创建了一个名为“xmlscores”的新目录，当我在该目录中运行任何 PHP 文件时，什么都不会返回，甚至我在页面内的 HTML 也不会返回。

注意：其他文件类型在浏览器中正确打开（我尝试过 HTML 和 XML）。

这向我表明 php 代码甚至没有被解释，因此甚至没有发送到我的 apache 服务器 - 默认情况下，我的浏览器返回空白页面（源为空白）

注意：问题不在于我的 php 代码，因为我尝试了多个文件但没有一个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:19:41.580

检查您的 Apache 错误日志，确保安装了整个 PHP 版本

如果您使用的是 Debian/Ubuntu，您可以运行

```
apt-get install php5 
```

# javascript - 如何让特定的 jquery 切换显示/隐藏 div 加载可见？

> ID：11620368
> 
> 赞同：0
> 
> 时间：2012-07-23T20:54:32.957
> 
> 标签：javascript, toggle, show-hide

我正在使用 jQuery 隐藏/显示页面上的部分内容。在一页上，我有两个这样的部分。现在页面加载时都隐藏了。我需要在第一个 div 可见和第二个隐藏的情况下加载页面。

这是我的javascript：

```
function a2012() {
    var ele = document.getElementById("toggleArch12");
    var text = document.getElementById("displayArch12");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "2012 Newsletter Archive";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "Hide Archive";
    }

} 

function a2011() {
    var ele = document.getElementById("toggleArch11");
    var text = document.getElementById("displayArch11");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "2011 Newsletter Archive";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "Hide Archive";
    }

} 
```

以及用于设置 DIV 及其切换链接的 HTML：

```
<a id="displayArch12" href="javascript:a2012();">2012 Newsletter Archive</a>
<div id="toggleArch12" style="display:none">content goes here</div>

<a id="displayArch11" href="javascript:a2011();">2011 Newsletter Archive</a>
<div id="toggleArch11" style="display:none">content goes here</div> 
```

我尝试将第一个 div 的 style="display:none" 更改为 style="display:visible"，虽然它确实导致页面加载时内容可见，但切换链接仍然显示“点击打开”文本（在本案例“2012 年通讯档案”）。

我需要第一个 div 来加载可见和正确的切换文本（隐藏存档）来显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:13:31.953

如果你想使用 jQuery（你不是来自你发布的代码），你可以这样写：

```
$("#displayArch11").click(function(e) {
    var $display = $(this)
    $display.next().toggle(function() {
         $display.html($display.html() == "2011 Newsletter Archive" ? "Hide Archive" : "2011 Newsletter Archive");
    });
    e.preventDefault();        
});
$("#displayArch12").click(function(e) {
    var $display = $(this)
    $display.next().toggle(function() {
         $display.html($display.html() == "2012 Newsletter Archive" ? "Hide Archive" : "2012 Newsletter Archive");
    });
    e.preventDefault();        
}); 
```

和这样的HTML

```
<a id="displayArch12" href="#">2012 Newsletter Archive</a>
<div id="toggleArch12" style="display:none">content goes here</div>

<a id="displayArch11" href="#">2011 Newsletter Archive</a>
<div id="toggleArch11" style="display:none">content goes here</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:00:08.023

更改内联脚本：

```
<div id="toggleArch12" style="display:block">content goes here</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:06:30.283

首先，如果您希望其中一个 div 可见，请不要指定 display 属性。默认情况下它们是可见的。尽管您使用 div 查找的值是 display:block;

我会使用 div 而不是链接来满足您的切换需求。

```
<div id="displayArch12" class="toggleDiv">
    2012 Newsletter Archive
    <div id="toggleArch12" style="display:block;">Content Here</div>
</div>
<div id="displayArch11" class="toggleDiv">
    2011 Newsletter Archive
    <div id="toggleArch11" style="display:none;">Content Here</div>
</div> 
```

然后你需要一些真正的 jQuery 来正确切换它们。

```
$(function() {
    $(".toggleDiv").click(function () {
        $("div:first-child", this).toggle();
    });
}); 
```

那应该对你有用。当然不要忘记包含 jQuery 库本身。最简单的方法是使用 Google API 链接。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:11:05.600

如果您使用 jQuery，这会更容易，但我认为只需设置正确的默认 html 即可实现您的目标。

```
<a id="displayArch12" href="javascript:a2012();">Hide Archive</a>
<div id="toggleArch12" style="display:block">content goes here</div> 
```

# python - PyQt4中的慢QFileDialog

> ID：11620373
> 
> 赞同：1
> 
> 时间：2012-07-23T20:55:11.570
> 
> 标签：python, qt, pyqt4

PyQt4 在使用 QFileDialog 时似乎使用了本机 MacOS 文件选择器小部件。但是，当使用该小部件中的聚光灯功能搜索文件时，整个窗口似乎会挂起，直到搜索完成。在 PyQt4 之外，Mac 文件对话框在搜索时保持响应，大概是因为搜索发生在单独的执行线程上。

有什么方法可以让 QFileDialog 小部件在 PyQt4 中保持响应？

# css - 从精灵重复背景

> ID：11620377
> 
> 赞同：1
> 
> 时间：2012-07-23T20:55:17.513
> 
> 标签：css

我想创建一个包含几张用作背景的图像的精灵。其中一些将与 norepeat 一起使用，而另一些将与 repeat-x 一起使用。

设置此类样式的最佳方法是什么？

到目前为止，我已经尝试过了，但它不能正常工作：

css

```
.sprites {
    background-color: transparent;
    background-image: url(img/sprites.png);
        background-repeat: no-repeat;
}
.bg {
    width: 1px;
    height: 25px;
    background-position: 0 0;
    background-repeat: repeat-x;
} 
```

html

```
<div class="sprites bg">

</div> 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:02:05.567

如果您只在 x 方向重复，请确保将图像垂直放置。也就是说，不要并排放置两个不同的图像。

[http://www.phpied.com/background-repeat-and-css-sprites/](http://www.phpied.com/background-repeat-and-css-sprites/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:03:03.100

我认为最好的方法是将不重复的 Bgs 与重复的 Bgs 分开。将所有 norepeated bgs 放在一个 sprite 图像中。对于重复的，只有在宽度相同的情况下才能将它们放在一起，并且必须垂直放置。

# jquery - 仅在 Firefox 中中止 jQuery.fadeTo 时，内容在半秒内不可见

> ID：11620385
> 
> 赞同：14
> 
> 时间：2012-07-23T20:56:42.430
> 
> 标签：jquery, jquery-ui, animation

这是 JsFiddle：http: [//jsfiddle.net/d6mmZ/7/](http://jsfiddle.net/d6mmZ/7/)

单击链接 1 和 2 会立即更新文本。单击链接 3 开始缓慢淡出。如果我在此期间单击链接 1 或 2，则动画应该被中止并立即显示新文本。

在 Chrome 中，这正是发生的事情。在 Firefox 13/14 中，有半秒的暂停，在此期间内容完全不可见。如果我让淡入淡出完成，链接 1 和 2 会立即生效。

这是 Firefox/jQuery 错误还是我误用了淡入淡出？如果是错误，我可以以某种方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T20:42:55.977

至少在 Firefox 13 中，简单地隐藏、强制重排然后再次显示它对我有用：

```
function showIt(message) {
    var div = $("div");
    div.empty().append(message).stop().hide();
    div[0].offsetWidth; //Force reflow, required
    div.show().css('opacity', 1);
} 
```

[http://jsfiddle.net/d6mmZ/28/](http://jsfiddle.net/d6mmZ/28/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T09:43:47.010

这肯定是一个 Firefox（*经过 v14 测试*）错误。

然而，好消息是我发现了**三种**简单的解决方案可供您选择，它们将保留您当前的网页布局。

`.click()`如果这还不够，我还为单个功能带来了一个带有备用标记的奖励 jsFiddle 。

* * *

**参考：** [**jsFiddle 1**](http://jsfiddle.net/QEqM6/)

**解决方案 1 HTML：**

```
<div id="status">Initial</div> 
```

**解决方案 1 CSS：**

```
#status{
  display: table;
} 
```

* * *

**参考：** [**jsFiddle 2**](http://jsfiddle.net/QEqM6/1)

**解决方案 2 HTML：**

```
<div id="status">Initial</div> <br /> 
```

**解决方案 2 CSS：**

```
#status{
  display: inline-block;
} 
```

* * *

**参考：** [**jsFiddle 3**](http://jsfiddle.net/QEqM6/2)

**解决方案 3 HTML：**

```
<div id="status">Initial</div> 
```

**解决方案 3 CSS：**

```
#status{
  font-size: 28px;
} 
```

* * *

如果你只想使用**1 个 jQuery Click 事件监听器**而不是使用一大堆，你可以考虑这个***奖励版本***，它也使用与上面相同的错误修复 CSS：

**参考：** [**jsFiddle 单击**](http://jsfiddle.net/Ba3r6/2/)

**解决方案单击 HTML：**

```
<div id="status">Initial</div>

<div id="links">
  <a id="a1" href="#">Link 1</a>
  <a id="a2" href="#">Link 2</a>
  <a id="a3" href="#">Link 3</a>
</div> 
```

**解决方案单击 jQuery：**

```
function showIt(message, opacity, duration) {
    $('#status').stop().html(message).animate({opacity: opacity}, duration, 'easeInExpo');
}    

jQuery('#links a').click(function(event) {

    switch (this.id) {

      case 'a1':
        showIt('Foo!', 1, 0);
      break;

      case 'a2':
        showIt('Bar!', 1, 0);
      break;

      case 'a3':
        showIt('Quux...', 0, 3000);
      break;

    }

    event.preventDefault();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:12:07.020

对于它的价值，在 FF15 beta 中尝试过，它似乎工作正常，所以如果这是 FF13/14 中的一个错误，很快就会得到修复。作为一种解决方法，可以`.fadeTo(0,1)`代替`.css('opacity', 1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:58:00.467

这是我想出的解决方法。适用于 Firefox14

[http://jsfiddle.net/d6mmZ/27/](http://jsfiddle.net/d6mmZ/27/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-30T09:05:05.857

在这种情况下，真的不明白为什么您将不透明度设置为 1（或 true），只需`.show`在您的中使用`showIt`它就可以修复它。

```
function showIt(message) {
    $('div').empty().append(message)
        .stop()
        .show();
} 
```

编辑：在这里试试：http: [//jsfiddle.net/nqkS8/](http://jsfiddle.net/nqkS8/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-02T13:33:00.430

```
function showIt(message) {
    //the old code here didnt update 'display' (i use show() for this), and treated the text as a node.
    $('div').text(message)
        .stop()
        .show()
        .css('opacity', '1');
} 
```

然后将fadeTo() 更改为fadeOut()，并在动画完成后运行回调：

```
$('div').fadeOut(1000, function(){
    //this function isnt run until fadeOut is finished
    showIt('Quux...');
}); 
```

[http://jsfiddle.net/d6mmZ/57/](http://jsfiddle.net/d6mmZ/57/)

# joomla - Joomla 1.5 到 2.5 升级。“未定义的迁移错误”

> ID：11620390
> 
> 赞同：2
> 
> 时间：2012-07-23T20:56:57.013
> 
> 标签：joomla, migration, joomla1.5

我尝试使用 jUpgrade 将 Joomla 中的网站从 1.5 迁移到 2.5，但收到“未定义的迁移”错误。

![](../Images/a4765e7fdaf1d526198d3a8cecf44245.png)

文件已正确传输，但数据库没有任何变化，当我尝试登录时`website.com/jupgrade`，我登陆一个页面，上面写着“请删除安装文件夹”并且没有传输/创建数据库（所以我必须手动创建它并且创建菜单、文章等浪费了这么多时间！）

请帮忙。我已经尝试删除文件夹并更改`tmp`为 777 权限（使用`chmod`），但没有任何改变！

**更新：2012-07-24 在调试模式下运行 jupdate 时获取更多信息：

> "========== [检查]
> 
> 1
> 
> ========== [清理]
> 
> 1
> 
> ========== [解压]
> 
> 1
> 
> ========== [安装配置]
> 
> ========== [安装数据库]
> 
> ========== [未定义] [未定义]
> 
> jos-错误：表 'name_joomla.j25_users' 不存在 SQL=INSERT INTO `j25_users` ( `id`, `name`, `username`, `email`, `password`, `usertype`, `block`, `sendEmail`, `registerDate`, `lastvisitDate`, `activation`, `params`) VALUES ('62','Administrator','admin','email@company. com','d7bfdb4f0aa91c9618b2969f4b91006e:jJzEVXG7VDz0u95RQu06CQPMFsxCic4e','超级管理员','0','1','2011-12-16 14:37:40','2012-07-24 13:57:43','' ,'{\"admin_language\":\"\",\"language\":\"\",\"editor\":\"\",\"helpsite\":\"\",\"timezone \“：\“世界标准时间\”}'） ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:46:46.903

终于工作了——此时——遵循@wiki.redcomponent.com 的第一个解决方案，删除所有插件并**重新安装另一个版本**（从 2.5.1 到 2.5.2）

**“迁移未定义”或“[未定义][未定义]”**

可能会出现在迁移特定组件的数据时进程会卡住的情况，并且（启用“调试模式”）将显示类似于“迁移未定义”或“[未定义] [未定义]”的错误。

**一些原因和补救措施包括：** jUpgrade 请求的 migrate_xxx.php 文件不可用或无法访问

（这些文件存储在 {root}/administrator/components/com_jupgrade/includes/ 文件夹中，标记为“migrate_xxx.php”，其中“xxx”是当时正在传输的内容部分。）

> **修复：卸载并重新安装 jUpgrade（以恢复所有必需的文件）并重试。**[获取升级 2.5.2](http://redcomponent.com/free-downloads/cat_view/931-jupgrade) **

• 从中传输内容的数据库表已损坏或已被修改（jUpgrade 要求未对任何核心表本身进行任何修改，否则在处理自定义字段时迁移可能会遇到问题）

> 修复：下载并安装维护组件，例如“管理工具！” 并运行数据库完整性检查和修复。或者，可能必须使用“phpmyadmin”或类似界面手动修复数据库。正在研究具有自定义字段的数据库的解决方案，但目前必须手动迁移这些字段，或者如果它们干扰迁移，则将其删除。（当然，在任何此类操作之前都应运行备份。）

• 迁移在尝试将内容复制到已包含内容的数据库时遇到问题（来自先前的迁移，无论是否失败）。

> 修复：删除为新 Joomla 创建的所有表！在迁移期间安装并再次运行 jUpgrade。

• 处理迁移过程的 Javascript 遇到了问题

> 修复：检查插件管理器以确保所有与 javascript 库相关的系统插件，除了“MooTools 升级”插件（这是必需的）已被禁用并尝试再次运行 jUpgrade。*让我们放弃 IE 并尝试 Chrome ;-)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T12:41:58.817

好吧，对我来说，它的工作方式如下：在第一次尝试使用 Jupgrade 安装 joomla 2.5 后，它卡在迁移中。我检查了 mysql 表，发现其中大约 15 个是新的 j25 表。所以我认为它卡在某个地方并再次尝试通过再次进入 jupgrade 组件并再次按下升级按钮。它又被卡住了，所以我检查了 mysql 并看到创建了新的 10 个表。所以我又试了一次，这次成功了。它创建了所有 mysql 表并将 joomla 从 1.5.26 升级到 2.5.2。我之前唯一想到的就是手动解压缩目标目录中的 joomla25.zip 以进行新安装，然后我禁用了下载、解压缩并检查 Jupgrade 中的设置。希望这对其他人有用:)

# scala - Scala 中的副作用

> ID：11620395
> 
> 赞同：16
> 
> 时间：2012-07-23T20:57:20.573
> 
> 标签：scala, functional-programming, monads, side-effects, purely-functional

这些天我正在学习 Scala。我对 Haskell 有一点熟悉，尽管我不能声称自己很了解它。

**给不熟悉 Haskell 的人的附注**

我喜欢 Haskell 的一个特点是，不仅函数是一等公民，而且副作用（让我称之为动作）也是一等公民。一个动作，在执行时会给你一个 type 的值`a`，属于一个特定的 type `IO a`。您可以像传递任何其他值一样传递这些操作，并以有趣的方式将它们组合起来。

事实上，*结合*副作用是 Haskell 中对它们做某事的唯一方法，因为你无法执行它们。相反，*将*`main`执行的程序是您的函数返回的组合操作。这是一个巧妙的技巧，它可以让函数变得纯粹，同时让你的程序实际上做一些除了消耗能量之外的事情。

这种方法的主要优点是编译器知道您执行副作用的代码部分，因此它可以帮助您捕获错误。

**实际问题**

在 Scala 中是否有某种方法可以让编译器类型为您检查副作用，例如，您可以保证不会在某个函数内执行副作用？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T21:00:57.673

不，这在 Scala 中原则上是不可能的，因为该语言不强制引用透明性——语言语义忽略了副作用。您的编译器不会为您跟踪和强制摆脱副作用。

您将能够使用类型系统将[某些操作标记](http://apocalisp.wordpress.com/2011/12/19/towards-an-effect-system-in-scala-part-2-io-monad/)为`IO`类型，并且通过程序员的纪律，获得一些编译器支持，但没有编译器证明。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-24T01:19:57.250

强制引用透明性的能力与 Scala 拥有与 Java 可互操作的类/对象系统的目标非常不兼容。

Java 代码可以以任意方式不纯（并且在 Scala 编译器运行时可能无法用于分析），因此 Scala 编译器必须假定*所有*外部代码都是不纯的（为它们分配`IO`类型）。要使用对 Java 的调用来实现纯 Scala 代码，您必须将调用包装在等效于`unsafePerformIO`. 这增加了样板文件并使互操作性变得不那么愉快，但它变得更糟。

除非程序员另有承诺，否则必须假设所有 Java 代码都在`IO`其中，这几乎会扼杀从 Java 类的继承。所有继承的方法都必须假设在`IO`类型中；这甚至适用于接口，因为 Scala 编译器必须假设在 Java 领域的某个地方存在不纯的实现。因此，您永远不能`IO`从 Java 类或接口派生带有任何非方法的 Scala 类。

更糟糕的是，即使是在 Scala 中定义的类，理论上也可能在 Java 中定义一个未跟踪的子类，其中包含不纯的方法，其实例可能会作为父类的实例传回 Scala。因此，除非 Scala 编译器可以*证明*给定对象不可能是 Java 代码定义的类的实例，否则它必须假定对该对象的任何方法调用都可能调用由 Java 编译器编译的代码，而不遵守返回结果不在的函数`IO`可以做什么。这将迫使几乎*所有东西都*在`IO`. 但是把所有东西都`IO`放进去就等于什么都不放进去`IO`，只是不跟踪副作用！

所以最终，Scala*鼓励*你编写纯代码，但它并没有试图强制你这样做。就编译器而言，任何对任何东西的调用都会产生副作用。

# python - 将 range() 的结果存储为列表变量 - Python

> ID：11620397
> 
> 赞同：1
> 
> 时间：2012-07-23T20:57:26.490
> 
> 标签：python, python-2.7

我正在挑战 Project Euler 以在 python 上做得更好（我是初学者），我正在尝试做[Problem 9](http://projecteuler.net/problem=9)。

```
vara = lista[-1]
varb = listb[-1]
varc = listc[-1]

while not(vara < varb < varc):
listb.pop(-1)
lista.pop(-1)
lista.pop(-1)
if ((vara * vara) + (varb * varb) == varc * varc):
    print vara, varb, varc
else:
listc.pop(-1)
if ((vara * vara) + (varb * varb) == varc * varc):
    print vara, varb, varc
else:
    listb.pop(-1)
    if ((vara * vara) + (varb * varb) == varc * varc):
        print vara, varb, varc
    else:
        lista.pop(-1) 
```

我已经尝试了很多方法来让 lista/listb/listc 的值在 1 - 1000 之间，但它们似乎都没有真正起作用

```
lista = range(1, 1000)
lista = range[1, 1000] 
```

ETC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:58:37.293

要生成从 1 到 1000 的值，您需要将结束值指定为 1000 **+ 1**，即 1001。所以

**Python 2.x**

```
# python 2.x
liasta = range(1, 1001) 
```

**Python 3.x**

```
# python 3.x
liasta = list(range(1, 1001)) 
```

将为您提供从 1 到 1000 的值列表。

[range()](http://docs.python.org/library/functions.html#range)使用*半闭区间*，这意味着它***包含***它生成的值列表中的第一个值，但***不包括***最后一个值。请注意，如果您不指定起始值，`range()`则默认为`0`. 您还可以指定一个增量值，`1`除非另有说明，否则默认为。

[文档页面](http://docs.python.org/library/functions.html#range)中的三个示例：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

>>> range(1, 11)
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

>>> range(0, 30, 5)
[0, 5, 10, 15, 20, 25] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:04:18.000

将此用于您的代码：

```
lista = range(1, 1001)
listb = list(lista)
listc = list(lista) 
```

不要这样做：

```
lista = listb = listc = range(1, 1001) 
```

因为那样你`pop`的 s 都在同一个列表上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:20:11.887

尽管您的问题询问如何在一个范围内制作数字列表，但我想问您一个问题：

> 您真的需要三个数字列表，还是只需要查看解决方案*的*可能值？

我问是因为虽然你可以得到你所寻求的答案，但最好用你的方式表达。例如：

```
for c in range(1, 1001):
    for b in range(1, c):
        for a in range(1, b):
             if is_pythagorean_triple(a, b, c):
                 ...

def is__pythagorean_triple(a, b, c):
    ... 
```

不创建任何列表（至少没有您需要考虑的）。另一个问题是为什么`a`范围只达到`b`?

# c# - 同一类的多个实例都为非静态属性返回相同的值

> ID：11620403
> 
> 赞同：0
> 
> 时间：2012-07-23T20:57:41.727
> 
> 标签：c#, properties, multiple-inheritance, abstract, multiple-instances

我这里有很大的问题。我有一个 MVP 应用程序，其中有一个模型可以处理与外部设备通信的实现。在应用程序中，我创建了 4 个此类的实例。每个实例使用唯一的 IP 和端口通过 UDP 套接字与其外部设备进行通信。

现在，对于所有初始测试，一切似乎都很好，因为我有 4 个视图，每个视图都显示了每个唯一设备的计数。对于测试，我总是只连接到一个设备，而其他 3 个连接什么也不做，但是视图总是按预期显示计数为零。

当我开始以编程方式创建单个 log4net 记录器以根据计时器触发记录每个实例的计数时，问题就出现了。我发现每个日志文件都记录了相同的计数！我以为这是我的 log4net 实现，但是在调试时，我在调试器中为自己看到每个实例都返回相同的计数。

当模型的实例被创建时，它们都被传递给一个演示者，该演示者持有对每个模型的引用。每个模型都有一个唯一的字符串标识符，这就是我在调试时知道正在查看哪个实例的方式（除了 IP 和端口）。

另外，我应该注意，计数是在接收到一个未经请求的 UDP 数据包时设置的，该数据包从未出现在 3 个实例上。

我的继承如下。

HeadModel
-HeadModelAbstract
--SubModel
---SubModelAbstract

引用的计数在子模型中。这样做是因为我需要一个类来与具有一组有限功能的基本级设备对话。然而，更高级的设备将具有该功能以及附加功能。我最初想传递接口，但发现这样做会隐藏子模型中的属性和方法，我仍然想公开这些属性和方法，所以我选择了你看到的抽象实现。

感谢所有能够做到这一点并尝试提供帮助的人。

摘要 - 为什么一个类的 4 个唯一实例都为相同的非静态属性返回相同的值？

更新：这是杂项代码

SystemStatus 保存所有计数和状态。ParseSystemStatus 函数从每次接收到 UDP 消息时触发的事件处理程序中调用。

```
public class SuccintClass : SuccintAbstract{

    UdpServer udpServer = null;

    public SuccintClass(int port){
        udpServer = new UdpServer(port); //Start receiver on port 3000
        udpServer.PacketReceived += client_UnsolicitedMessageReceived;
    }

    private void client_UnsolicitedMessageReceived(object sender, PacketReceivedEventArgs e) {

        ushort msgID = (ushort)((e.Buffer.Data[10]<<8) + e.Buffer.Data[11]);

        byte[] data = new byte[e.Buffer.Length];
        Array.Copy(e.Buffer.Data, 0, data, 0, e.Buffer.Length);

        switch (msgID) {
            case 9001:  
                break;
            case 0x5000:    
                break;
            case 9005:  //System Status
                ParseSystemStatus(data);
                OnSystemStatusReceived(new SystemStatusReceivedEventArgs(this.sysStatus));
                break;
            case 9014:  
                break;
            default:
                break;
        }
    }
    private SystemStatus sysStatus = SystemStatus.NullStatus;

    public void ParseSystemStatus(byte[] buffer) {
        int CounterOffset = 14;
        int[] converted = new int[6];

        for (int i = 0; i < 6; i++) {
            converted[i] = BitConverter.ToInt32(buffer, i * 4 + CounterOffset);
        }

        this.sysStatus.State = (SystemStatus.SystemState)converted[0];
        this.sysStatus.Count1 = converted[1];
        this.sysStatus.Count2= converted[2];
        this.sysStatus.Count3= converted[3];
        this.sysStatus.Count4= converted[4];
        this.sysStatus.Count5= converted[5];
    }
} 
```

然后 UdpServer 看起来像这样

```
sealed class UdpServer : IDisposable {
    public UdpServer( int serverPort ) {
        this.socket = new Socket( AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp );
        this.socket.Bind( new IPEndPoint( IPAddress.Any, serverPort ) );

        for ( int i = 0; i < 200; i++ ) {
            BeginAsyncReceive( );
        }
    }

    ~UdpServer( ) {
        Dispose( false );
    }

    public void Dispose( ) {
        Dispose( true );
        GC.SuppressFinalize( this );
    }

    private void Dispose( bool isDisposing ) {
        if ( !disposed ) {
            disposed = true;
            rwLock.AcquireWriterLock( Timeout.Infinite );
            socket.Close( );
            rwLock.ReleaseWriterLock( );

            while ( threads > 0 )
                Thread.Sleep( 1 );
        }
    }

    private bool disposed;

    private void BeginAsyncReceive( ) {
        rwLock.AcquireReaderLock( Timeout.Infinite );

        UdpPacketBuffer buffer = UdpPacketBufferPool.GetInstance( ).GetFromPool( );

        try {
            socket.BeginReceiveFrom( buffer.Data, 0, buffer.Data.Length, SocketFlags.None, ref buffer.RemoteEndPoint, EndAsyncReceive, buffer );
            Interlocked.Increment( ref threads );
        }
        catch ( SocketException exc ) {
            if ( logger.IsWarnEnabled ) {
                logger.Warn( "Error happened at the start of packet acquisition." );
                logger.Warn( exc.ToString( ) );
            }
        }
        catch ( ObjectDisposedException exc ) {
        }

        rwLock.ReleaseReaderLock( );
    }

    private void EndAsyncReceive( IAsyncResult asyncResult ) {
        BeginAsyncReceive( );

        rwLock.AcquireReaderLock( Timeout.Infinite );

        UdpPacketBuffer buffer = (UdpPacketBuffer)asyncResult.AsyncState;

        try {
            buffer.Length = socket.EndReceiveFrom( asyncResult, ref buffer.RemoteEndPoint );

            OnPacketReceived( new PacketReceivedEventArgs( buffer ) );
        }
        catch ( SocketException exc ) {
            logger.Warn( "Error happened during completion of packet acquisition." );
            logger.Warn( exc.Message );
            logger.Warn( exc.StackTrace );
        }
        catch ( ObjectDisposedException ) {
        }

        Interlocked.Decrement( ref threads );

        rwLock.ReleaseReaderLock( );
    }

    private void OnPacketReceived( PacketReceivedEventArgs args ) {
        EventHandler<PacketReceivedEventArgs> handler = PacketReceived;

        if ( handler != null ) {
            handler( this, args );
        }
    }

    public event EventHandler<PacketReceivedEventArgs> PacketReceived;

    private int threads;
    private ReaderWriterLock rwLock = new ReaderWriterLock( );
    private Socket socket;

    private ILog logger = LogManager.GetLogger( typeof( UdpServer ) );
} 
```

最后，使用访问 SystemStatus 对象属性的 getter 和 setter 返回计数

```
override public int Count1 {
        get { return sysStatus.Count1; }
    }

    override public int Count2 {
        get { return sysStatus.Count2 ; }
    }

    override public int Count3 {
        get { return sysStatus.Count3 ; }
    }

    override public int Count4 {
        get { return sysStatus.Count4 ; }
    }

    override public int Count5 {
        get { return sysStatus.Count5 ; }
    } 
```

每个实例都在其自己的唯一端口上启动。我已经在回调函数上设置了断点，用于接收未经请求的消息，但对于除实际用于接收数据的实例之外的任何实例都不会中断，但所有实例都返回相同的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:41:43.787

初始化 sysStatus 时，将其设置为 SystemStatus.NullStatus，我假设它是一个静态 SystemStatus 实例。此分配更新 sysStatus 变量以指向内存中的 NullStatus 对象 - 它不会复制该对象。当您通过 sysStatus 变量设置值时，它将更新 SystemStatus.NullSTatus 指向的同一对象，该对象是所有实例共享的静态对象。您可能希望将其更改为结构，或使用新的 SystemStatus() 而不是将 sysStatus 指向该静态实例。

编辑：以下是我的原始答案...

我怀疑你的问题的关键在这里：

> ParseSystemStatus 函数从每次收到 UDP 消息时触发的事件处理程序中调用

All 3 of your instances are wired up to listen for the PacketReceived event. When the OnPacketReceived method is called and it triggers the event stored in PacketReceived, that will fire off *all* of the event handlers which are wired up to listen to it. That means the client_UnsolicitedMessageReceived method will be called individually for each instance of your class.

In other words, the way your system is written now, you have 1 UDP server. Every time it receives a packet, it will notify every instance of SuccinctClass that the packet was received. If you want different behavior, you may have to come up with a way to specify which instance you really want to notify, or to detect from within an instance of SuccinctClass whether you really want to act on a particular packet or leave it up to another instance of the class.

# sql - SQL：加入嵌套查询

> ID：11620405
> 
> 赞同：9
> 
> 时间：2012-07-23T20:57:46.633
> 
> 标签：sql, join

我正在尝试执行此连接操作。由于我是 sql 新手，我发现理解语法和内容时遇到问题。

您认为以下查询有什么问题：

```
select top 1 * 
from 
    (select * 
     from dbo.transaction_unrated 
        where transaction_date >= '2012/05/01' 
            and transaction_date < '2012/06/01' 
            and content_provider_code_id in (1)
    )   FULL OUTER JOIN 
    (select * 
     from dbo.transaction_rated 
        where transaction_date >= '2012/05/01' 
            and transaction_date < '2012/06/01' 
            and entity_id in (1) 
            and mapping_entity_id = 1)
    ) 
    ON dbo.transaction_unrated.cst_id = dbo.transaction_rated.unrated_transaction_id 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T21:00:53.927

您需要给派生表起别名。

```
select top 1 * 
from 
(
     select * 
     from dbo.transaction_unrated 
        where transaction_date >= '2012/05/01' 
            and transaction_date < '2012/06/01' 
            and content_provider_code_id in (1)
) rsQuery1  
FULL OUTER JOIN 
(
     select * 
     from dbo.transaction_rated 
        where transaction_date >= '2012/05/01' 
            and transaction_date < '2012/06/01' 
            and entity_id in (1) 
            and mapping_entity_id = 1)
) rsQuery2 ON rsQuery1.cst_id = rsQuery2.unrated_transaction_id 
```

`FULL OUTER JOIN`也很不寻常（根据我的经验）。你确定那是你想要的吗？通常，您将执行一个`INNER JOIN`which 会在两个表中带回与您的条件匹配的行，或者您将让一个表作为驱动程序并执行`LEFT`or`RIGHT OUTER JOIN`将带回驱动表中的所有行，无论是否存在匹配另一张桌子。A`FULL OUTER JOIN`将带回两个表中的所有行，无论它们是否匹配。

# ruby - 脚本底部的Ruby方法？

> ID：11620409
> 
> 赞同：12
> 
> 时间：2012-07-23T20:58:18.107
> 
> 标签：ruby, methods, scripting

我正在使用红宝石 1.8.7。我本可以发誓我之前已经在脚本底部编写了函数并且它运行良好。

我必须把它们放在顶部吗？这似乎是他们现在工作的唯一方式。没有大碍。我只是更喜欢把它们放在底部，所以我想我会问的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-23T21:09:59.257

您可以在一个或多个 BEGIN 块中初始化代码（继承自 Perl，Perl 继承自 awk）。

```
can_i_do_this? #=>yes

BEGIN {
  def can_i_do_this?
    puts "yes"
  end
} 
```

为了完整起见，还有 END 块：

```
END {
  can_i_do_this? #=> yes
}

def can_i_do_this?
  puts "yes"
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T21:06:29.573

```
a
def a
  puts "Hello world!"
end 
```

在 Ruby 中运行这个脚本会给你：

```
script.rb:1:in `<main>': undefined local variable or method `a' for main:Object (NameError) 
```

所以不，你不能把它们放在底部。由于 Ruby 是一种解释型语言，任何代码都只在运行时被解析和处理。因此，您只能运行在实际引用之前已经定义的代码（调用方法、使用变量...）。

# android - Android：使用不同像素密度的图像的目的？

> ID：11620416
> 
> 赞同：1
> 
> 时间：2012-07-23T20:58:49.663
> 
> 标签：android, dpi

我知道使用具有不同 DPI 的图像在 Android 中是一种相当普遍的做法。但是我并没有真正看到它的目的，为什么我们不能只使用一个超大的图像，然后在程序中对其进行缩放？我知道如果我们不使用不同 DPI 的图像，我们可能需要进行额外的计算，但除此之外，还有其他原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T21:26:33.110

蒂姆和广告对你有正确的推理。如果您想查看重新缩放或以正确大小绘制的内容之间的比较，这是一个视觉示例。如果有非常小的细节，效果总是更明显。

![在此处输入图像描述](../Images/e60b3f427427e1901003dd547e252b25.png) ![在此处输入图像描述](../Images/e783215c426a7ee538c29d05ae55d508.png) ![在此处输入图像描述](../Images/a8f9997a9def152cf3267118beb0a84e.png)

第一个是一个大的 200x200（我们称之为 xhdpi），第二个是为 mdpi (75x75) 重新采样的相同图像。第三个重新设计为相同的规格，但从 75x75 开始。如您所见，第二个文本明显模糊，并且在重新缩放的形状边缘存在一些伪影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:02:30.897

您可以获得针对屏幕密度优化的图像。如果你把它全部留给xhdpi，你一定知道在这个过程中可能会丢失一些重要的像素，因为你没有注意这一点。

如果您不关心速度和准确性，并且您认为人们不会注意到丢失了重要的像素，那么可以使用这种方法。

不仅如此，如果您自己缩放图像（例如使用权重），您根本不需要将它们放在 dpi 文件夹中 - 您可以将它们放在 drawable-nodpi 文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:03:24.117

通过为每个主要的屏幕密度类别提供已经渲染为适当大小的图像，您可以避免在代码中显式地进行缩放，这将使代码“更干净”。

您还可以避免因显示的每个图像都必须缩放而导致的性能消耗，具体取决于您的应用程序必须进行多少缩放" 因为视图正在向用户显示。

最后，为每种尺寸提供适当渲染的图像将确保您的资源看起来更好。系统缩放并不完美，如果它必须缩放它们，则会损害图像的“清晰度”。如果它必须显着扩展它们，这将是用户注意到的。

# deployment - 使用 Capistrano 部署到无法更改 DocumentRoot 的 cPanel？

> ID：11620420
> 
> 赞同：0
> 
> 时间：2012-07-23T20:59:06.623
> 
> 标签：deployment, capistrano, cpanel, shared-hosting, document-root

我正在尝试使用 Capistrano 将基于 PHP 的网站部署到客户端的共享主机。我想控制所有版本，但它们与 cPanel (Bluehost) 共享托管，我无法将 DocumentRoot 更改为指向“当前”符号链接。部署到 public_html 很好，但我需要让网站指向根目录下的当前版本。

有什么办法可以解决这个问题，以便我可以继续使用 Capistrano 并将“当前”版本作为主域名的根目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:40:44.150

可能为时已晚，但我已经得到了你的答案。

如果您的服务器由 cPanel 管理，您可以更改此配置文件中的 documentroot 行：

`/var/cpanel/userdata/USERNAME/DOMAIN.COM`

然后，您可以将其更改为： `/home/USERNAME/public_html/current`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-08T21:49:12.663

欢迎来到我的世界……反之亦然？

这是一个旧帖子，但问题仍然存在。cPanel 不允许主域使用不同的根文件夹。不过，它适用于插件域。

`/var/`在共享主机上无法访问该文件夹。

目前，似乎可以简单地删除帐户中的 public_html 并用当前的符号链接替换它。我们已经通过 bitbucket 管道这样做了一段时间，并且它有效（尽管托管者一开始很谨慎）。

# jquery - 如何使用 jquery 向 tr 添加类？

> ID：11620421
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:59:05.970
> 
> 标签：jquery

我正在尝试使用 jquery 向 tr 添加类。

我尝试了各种选项，但似乎没有用。任何帮助将不胜感激。ñ

```
 //jQuery("div.flexigrid > table.flexme1 > tr").addClass("cal");

or

        jQuery("div.flexigrid > table.flexme1 > tr").addClass("sev1");
  or 
        jQuery(".erow").addClass("sev2");
   or
        jQuery(".flexigrid > tr").addClass("sev3");
   or
        jQuery(".flexigrid >tr").addClass("sev4");
   or
        jQuery(".flexigrid >tr").addClass("sev5"); 
```

以上似乎都不起作用

我希望 tr 添加 class="sev" 。

```
<div class="flexigrid">
  ..< some other divs>
... <some other divs>
---
<div class="bDiv" style="height: 200px;">
   <table cellspacing="0" cellpadding="0" border="0" class="flexme1" >
      <tbody>
         <tr  class="sev1">
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr class="erow"  class="sev1">
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">1</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr   class="sev3">
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr class="erow" >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">1</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">BM1M</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr class="erow" >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">4</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">BM1N</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr class="erow" >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
         <tr class="erow" >
            <td align="left" abbr="InstanceDisplayName8">
               <div style="text-align: left; width: 190px;">undefined</div>
            </td>
            <td align="right" abbr="severity" class="sorted">
               <div style="text-align: right; width: 40px;">&nbsp;</div>
            </td>
            <td align="right" abbr="Impact">
               <div style="text-align: right; width: 40px;">0</div>
            </td>
            <td align="right" abbr="occurrencecount">
               <div style="text-align: right; width: 40px;">undefined</div>
            </td>
            <td align="left" abbr="NotificationID">
               <div style="text-align: left; width: 100px;">Host</div>
            </td>
            <td align="left" abbr="Name">
               <div style="text-align: left; width: 120px;">Down</div>
            </td>
            <td align="right">
               <div style="text-align: right; width: 130px;">undefined</div>
            </td>
         </tr>
      </tbody>
   </table>
   <div class="iDiv" style="display: none;"></div>
</div>

</div><!-- end of flexidiv> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:03:41.247

您没有 div 与 class `flexigrid`。你有`div.bDiv`

二、表格行有错误：

```
class="flexme1 stype=&quot;display: none&quot;" 
```

它应该是：

```
class="flexme1" style="display: none" 
```

第三，您有多个带有`id="rowHost"`. 元素*必须*具有唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:05:59.723

首先，您的代码中没有 div 具有“flexigrid”类，因此 jquery 不会找到您想要的内容。

现在，这应该工作

```
$("bDiv tr").addClass("sev1"); 
```

# php - 在没有转义的情况下将用户数据存储在数据库中

> ID：11620422
> 
> 赞同：1
> 
> 时间：2012-07-23T20:59:06.703
> 
> 标签：php, mysql

我的大部分问题本质上都是理论性的，因为我认为“伟大的思想讨论思想”而文员讨论语法。

无论如何..所以情况就是这样

我有一个从用户那里获取输入的系统。但是查询中没有使用任何输入（根本没有）。此输入包含大量代码片段。现在过去我转义了输入，然后将其存储在数据库中。我不使用任何类型的添加和剥离斜杠功能，而是使用我自己的使用 preg_replace 的程序，如下所示

```
$data = preg_replace("/\;/", "&#59;", $data);//
$data = preg_replace("/</", "&lt;",   $data);
$data = preg_replace("/>/", "&gt;",   $data);
$data = preg_replace("/\"/", "&quot;",$data);
$data = preg_replace("/\(/", "&#40;", $data); 
```

但是出现了以下问题。

有时软件会错误地转义数据（因为我的软件不是没有错误的），我将无法找到实际数据是什么。我不时更新我的​​转义程序，这意味着不同的输入以不同的方式转义。

用户可以选择编辑他的帖子。因此这意味着我必须向他展示转义数据（或取消转义数据）以防止两次转义数据......所以最后我得出的结论是我将未转义的数据从用户直接保存到数据库。并在显示之前将其转义（它没有其他用途……在查询等中没有用处）。对于其他任何事情，我都未更改原始数据。

我的问题::

即使未在查询中使用或在显示前转义，数据库中未转义的用户数据仍然很危险吗？

使用斜线进行转义是否等于/更好/不同于通过将字符（例如 < 转换为 <..

如果数据被正确转义（我的意思是所有特殊字符）它仍然可以用于 XSS 攻击。SQL注入是没有问题的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T21:00:55.457

***在您真正要显示数据之前，***切勿**对数据进行编码以进行显示。存储时编码存储，传输时编码传输等。在适当的时间进行适当的编码将为您处理这些问题。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:03:05.083

是的，这可能很危险。用户可以轻松地注入代码以在您的数据库上运行他自己的查询（即使您不打算查询此数据）。**

# c# - 存储在数据库中

> ID：11620423
> 
> 赞同：0
> 
> 时间：2012-07-23T20:59:32.487
> 
> 标签：c#, asp.net

我正在发送一封邮件，其中包含电子邮件正文中选中的复选框项目。我想在每个检查项目后换行。我在电子邮件正文中得到了一个换行符，但我的问题是当它存储在数据库中时，它存储在`br`例如：

```
apple <br>orange <br> 
```

那么有没有办法在不将 br 存储在数据库中的情况下进行换行？

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e)
{ 
    for (int i = 0; i < check1.Items.Count ;i++ )
    {
        if (check1.Items[i].Selected)
        {
             comment.Text = "\u2022 " + check1.Items[i].Text + "<br/>" + comment.Text;        
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:12:07.307

我认为根本问题是：

```
comment.Text = "\u2022 " + check1.Items[i].Text + "<br/>" + comment.Text; 
```

每次所选项目更改时，*新*的所选项目文本 ( `Items[i].Text`) 都会添加到*旧*的所选项目文本 ( `comment.Text`) .. 选择事件发生的时间越多，附加的项目文本就越多！

我怀疑应该只保存*最后*选择的值..在任何情况下，删除那个“<br>”都会“阻止它被保存”。

# linux - 使用 bash 为文本文件中的所有列添加双引号

> ID：11620424
> 
> 赞同：1
> 
> 时间：2012-07-23T20:59:42.970
> 
> 标签：linux, bash, text

抱歉格式不正确......现在它表明了这一点：

（列 - 制表符分隔）输入：

1 2 3 4

5 6 7 8

某些列可能如下所示：

1 一些文本 2 带空格的文本 3 很多 `:"' 等 4

5 6 7 8

如何制作输出：

“1” “2” “3” “4”

“5” “6” “7” “8”

甚至更好：

"1","2","3","4"

"5","6","7","8"

知道了！这有点愚蠢......但有效：

sed 's/\t/","/g' input.txt | sed 's/^/"/;s​​/$/"/'

第一个 sed 将制表符更改为“，”，下一个是在行首和行尾添加“。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:04:57.710

用 替换每个选项卡，在开头和结尾添加`", "`一个额外的：`"`

```
string=$'1\t2\t3\t4\t5\t6\t7\t8'
echo \"${string//$'\t'/\", \"}\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:07:34.420

我所知道的最简单的解决方案是`perl`：

```
while read; do
  IFS=$'\t' perl -e '$,=","; $\="\n"; print map(qq/"$_"/, @ARGV); ' $REPLY
done < input.txt 
```

`bash`需要临时变量的纯解决方案：

```
while read; do
  IFS=$'\t' printf -v var '"%s",' $REPLY
  echo "${var%,}"
done < input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:25:32.460

这可能对您有用（GNU sed）：

```
echo -e '1\t2\t3\t4\t5\t6\t7\t8' | sed 's/[^\t]\+/"&"/g;y/\t/,/'
"1","2","3","4","5","6","7","8" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:33:52.660

纯 Bash，用于制表符分隔的输出：

```
while read  line ; do
  echo -e "\"${line//$'\t'/\"\t\"}\""
done < "$infile" 
```

对于逗号分隔的输出：

```
while read  line ; do
  echo -e "\"${line//$'\t'/\",\"}\""
done < "$infile" 
```

字符串中允许有空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T22:40:40.473

像这样的东西`perl`应该可以工作：

```
perl -F'\t' -lape '$_ = qw(") . join(qw(","), @F) . qw(")' infile 
```

`infile`它拆分at 制表符的每一行并将它们与`","`同时预先和附加连接起来`"`。

# hide - 显示和隐藏标记绘图管理器

> ID：11620429
> 
> 赞同：0
> 
> 时间：2012-07-23T21:00:05.347
> 
> 标签：hide, show, markers

嗨，我的地图代码有问题...我使用绘图管理器创建标记，但我想根据复选框显示或隐藏，但我不知道该怎么做...有人可以帮忙！多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:21:54.923

您需要 3 部分代码来执行此操作。

1）下面是显示层的代码（我假设你已经有了）：

```
var parcel_boundary = new google.maps.FusionTablesLayer({
query: {
    select: 'parcel_boundary_1_9999',
    from: '1ouLS0fm8tPPQNQRpr-bwE4ct-cBkMB-Ru_XttDQ'
  },
  styles: [{
    polygonOptions: {
    strokeColor: "#333333",
    strokeOpacity: 0.8,
    strokeWeight: 0.7,
    fillColor: "#36549C",
    fillOpacity: 0.3
    }
}],
    //map: map,
    suppressInfoWindows: true
    });
    google.maps.event.addListener(parcel_boundary, 'click', function(e) {
    windowControl(e, infoWindow, map);
}); 
```

2）紧接着显示层代码下面是这部分代码：

```
$('#parcel_boundary_box').click(function(){
    if ($(this).is(':checked'))
    parcel_boundary.setMap(map); // show
    else
    parcel_boundary.setMap(null); // hide
    });
$('#parcel_boundary_box').removeAttr('disabled'); 
```

3）在正文中，您需要添加以下代码：

```
<div id="panel" style="position:absolute; left:560; top:0px; width:140px; height:30px;">
<input type="checkbox" id="parcel_boundary_box" disabled="true">
<span class="style2">Parcel Boundary</span> 
</div> 
```

我希望我对你有所帮助。

最好的，达科

# python - 基本的python多线程问题

> ID：11620431
> 
> 赞同：3
> 
> 时间：2012-07-23T21:00:07.730
> 
> 标签：python, multithreading, thread-safety

刚接触 python 并试图理解多线程。[这是Queue](http://docs.python.org/library/queue.html#module-Queue)上的 python 文档中的一个示例

对于我的生活，我不明白这个例子是如何工作的。在 worker() 函数中，有一个无限循环。工人如何知道何时退出循环？似乎没有破坏条件。

到底加入到底在做什么？我不应该加入线程吗？

```
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
    t = Thread(target=worker)
    t.daemon = True
    t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

还有一个问题，什么时候应该使用多线程，什么时候应该使用多处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T21:07:14.357

是的。你是对的。`worker`将永远运行。然而，由于队列只有有限数量的项目，最终`worker`将永久阻塞在`q.get()`（因为队列中将不再有项目）。在这一点上，它`worker`仍然在运行是无关紧要的。`q.join()`阻塞，直到 Queue 计数下降到 0（每当工作线程调用`q.task_done`，计数下降 1）。之后，程序结束。无限阻塞线程与它的创建者一起死亡。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T21:19:31.160

关于你的第二个问题，Python中线程和进程的最大区别在于主流实现使用全局解释器锁（GIL）来确保多个线程不会弄乱Python的内部数据结构。这意味着对于大部分时间在纯 Python 中进行计算的程序，即使有多个 CPU，您也不会大大加快程序速度，因为一次只有一个线程可以保存 GIL。另一方面，多个线程可以在 Python 程序中轻松共享数据，并且在某些（但绝不是全部）情况下，您不必过多担心线程安全性。

多线程可以加速 Python 程序的地方是程序将大部分时间花在等待 I/O 上——磁盘访问，或者，尤其是现在，网络操作。执行 I/O 时不会保留 GIL，因此许多 Python 线程可以在 I/O 绑定应用程序中同时运行。

另一方面，对于多处理，每个进程都有自己的 GIL，因此您的性能可以扩展到您可用的 CPU 内核数量。不利的一面是，进程之间的所有通信都必须通过 multiprocessing.Queue 完成（它在表面上的作用非常类似于 Queue.Queue，但具有非常不同的底层机制，因为它必须跨进程边界进行通信）。

由于通过线程安全或进程间队列工作避免了许多潜在的线程问题，而且 Python 使它变得如此简单，因此该`multiprocessing`模块非常有吸引力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:34:33.220

同意乔尔-科内特的观点，**主要是**。我尝试在 python2.7 中运行以下代码段：

```
from threading import Thread
from Queue import Queue

def worker():
    def do_work(item):
        print(item)

    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(4):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in range(10):
    q.put(item)

q.join() 
```

输出是：

```
0
1
2
3
4
5
6
7
8
9
Exception in thread Thread-3 (most likely raised during interpreter shutdown):
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
  File "/usr/lib/python2.7/threading.py", line 504, in run
  File "abc.py", line 9, in worker
  File "/usr/lib/python2.7/Queue.py", line 168, in get
  File "/usr/lib/python2.7/threading.py", line 236, in wait
<type 'exceptions.TypeError'>: 'NoneType' object is not callable 
```

*我认为最可能的解释：*

由于任务耗尽后队列变空，父线程在从 q.join() 返回后退出并销毁队列。子线程在接收到“item = q.get()”中产生的第一个 TypeError 异常时终止，因为队列不再存在。

# java - Apache commons 文件上传“流式 API”

> ID：11620432
> 
> 赞同：4
> 
> 时间：2012-07-23T21:00:11.457
> 
> 标签：java, file-upload, apache-commons

我从 Apache Commons Page 引用`Commons FileUpload`

> 本页介绍 commons fileupload 库的传统 API。传统的 API 是一种方便的方法。但是，为了获得最佳性能，您可能更喜欢**更快**的Streaming API。

**我的问题**

什么具体的区别`Streaming API`比 快`traditional API`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:55:34.577

关键区别在于您处理文件的方式，正如您在工厂类中所注意到的那样。

获取输入流时，流 API 未保存在磁盘中。最后，您将能够更快地处理文件（以临时内存为代价）......但我们的想法是避免将二进制文件保存在磁盘中，除非您真的想要/需要。

之后，您当然可以使用缓冲输入流、字节数组或类似方法将数据保存到磁盘。

编辑：打开流时的处理程序（[fileItemStreamElement.openStream](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html#openStream%28%29) () ）是一个常见的 InputStream 实例。因此，您的“如果它是一个大文件怎么办”的答案类似于[Java 中 InputStream 的内存问题](https://stackoverflow.com/questions/4826764/memory-issues-with-inputstream-in-java)

编辑：流 API 不应保存到磁盘或保存在内存中。它只是提供了一个流，您可以从中读取文件以将文件复制到您想要的任何位置。这是一种避免临时目录并避免分配足够内存来保存文件的方法。这至少应该更快，因为它不会被复制两次，一次是从浏览器复制到磁盘/内存，然后再从磁盘/内存复制到您保存它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:41:24.270

> 用户指南中描述的传统 API 假设文件项必须存储在某个地方，然后才能被用户实际访问。这种方法很方便，因为它允许轻松访问项目内容。另一方面，它是内存和耗时的。

[http://commons.apache.org/fileupload/streaming.html](http://commons.apache.org/fileupload/streaming.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:25:38.573

流式 API 不应保存到磁盘或保存在内存中。它只是提供了一个流，您可以从中读取文件以将文件复制到您想要的任何位置。这是一种避免临时目录并避免分配足够内存来保存文件的方法。这至少应该更快，因为它不会被复制两次，一次是从浏览器复制到磁盘/内存，然后再从磁盘/内存复制到您保存它的位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T10:08:51.463

流通常是指一种 API（如 Apache FileUpload 或 StAX），其中数据在应用程序运行时以串行方式传输和解析，通常是实时的，并且通常来自动态源，其内容事先并不精确。

传统模型指的是 API（如传统文件处理 API、DOM API），它们提供了有关数据的更多详细信息。

类似于 FileHandling API 传统方法假定文件项必须存储在某个地方，然后才能被用户实际访问。这种方法很方便，因为它允许轻松访问项目内容。另一方面，它是内存和耗时的。

Streaming API 将具有更小的内存占用和更小的处理器要求，并且在某些情况下可以具有更高的性能。

它适用于您正在使用的文档的“纸板管”视图的基础。

# c# - 在 CANBus 适配器的隐藏代码中终止线程

> ID：11620434
> 
> 赞同：1
> 
> 时间：2012-07-23T21:00:13.053
> 
> 标签：c#, multithreading, terminate, abort

我正在使用[CANBus 适配器](http://www.easysync-ltd.com/product/530/usb2-f-1001.html "EASYSYNC的网站")，目前正在 Microsoft Visual C# 2010 Express 中为其编写代码。我正在尝试制作一个运行单独线程的 GUI，用于通过 CANBus 串行适配器从 TEKTRONIX 020-2924-XX DPO DEMO 2 板读取消息。

我试图找出终止线程的安全方法（称为 setReceiveCallBackThread）。但是，此特定线程的特殊之处在于该线程的代码不可用。它是 CANBus API 的一部分。

我在网上搜索了如何安全地停止线程（尤其是堆栈溢出）。我发现使用中止方法应该始终是最后的手段。

因此，如果我决定不能在线程上使用 abort，我将不得不在 canplus_setReceiveCallBack 子例程中使用异常处理。但是，问题是我无法访问 canplus_setReceiveCallBack；代码是隐藏的。请记住，这是一种独特的情况，因为我无法访问代码。与所有其他可以看到回调函数代码的情况不同，这个子例程中的代码是看不到的。

下面的代码应该是您分析问题所需的一切，并希望能找到在线程上使用 Abort() 的替代方法。

```
// CANSnifferForm.cs

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Runtime.InteropServices;
using System.IO;
using System.Diagnostics;

namespace WindowsFormsApplication1
{

    public partial class CANSnifferForm : Form
    {

        // per the api document. "This is a blocking call and must be called on a separate thread."
        // the code previously after setCallback... was never being reached because the call is blocking.
        // this calls the setCallbackThread function in another thread so processing can continue.
        Thread setReceiveCallBackThread;
        bool stop;

        int can; // Return value of canplus_open

        uint idFilter; // Filter values entered by user
        ulong lenFilter; 
        bool stopThread; // Used for stopping thread         

        public CANSnifferForm()
        {
            InitializeComponent();
             del = new EASYSYNC.CallbackDelegate(callback);
        }

        private void callback(ref EASYSYNC.CANMsg msg)
        {
            // Populate the dataGridView
            if(InvokeRequired)
               BeginInvoke(del, msg);
            else
               this.dataGridView1.Rows.Add(msg.id, msg.len, msg.data, msg.timestamp);
        }

        private EASYSYNC.CallbackDelegate del;

        private void StartRestart_Click(object sender, EventArgs e)
        {
            this.CANSnifferStatusBox.Clear();
            this.CANSnifferStatusBox.AppendText("CAN closed");
            this.ProcessStatusBox.Clear();
            this.ProcessStatusBox.AppendText("Stopped");
            EASYSYNC.CANMsg msg = new EASYSYNC.CANMsg();
            msg.id = 1;
            msg.timestamp = 2;
            msg.flags = 3;
            msg.len = 4;
            msg.data = 5;

            // Attempt to open CANBus adapter
            can = EASYSYNC.canplus_Open(IntPtr.Zero, "1000", IntPtr.Zero, IntPtr.Zero, 0);

            if (can < 0)
            {
                // CANBus Adapter not opened
                this.ErrorBox.Clear();
                this.ErrorBox.AppendText("Error opening CAN");
                return;
            }

            // CANBus Adapter successfully opened
            this.CANSnifferStatusBox.Clear();
            this.CANSnifferStatusBox.AppendText("CAN open");

            // Initialize thread
            setReceiveCallBackThread = new Thread(() => EASYSYNC.canplus_setReceiveCallBack(can, del));

            // Attempt for CANBus adapter to listen
            if (EASYSYNC.canplus_Listen(can) < 0)
            {
                // CANBus Adapter not listening
                this.ErrorBox.Clear();
                this.ErrorBox.AppendText("Error setting listen mode\n");
                EASYSYNC.canplus_Close(can);
                this.CANSnifferStatusBox.Clear();
                this.CANSnifferStatusBox.AppendText("CAN closed");
                return;
            }

            // CANBus Adapter successfully listening
            this.CANSnifferStatusBox.Clear();
            this.CANSnifferStatusBox.AppendText("CAN Listening\n");

            // Place thread in background. Then start it
            setReceiveCallBackThread.IsBackground = true; 
            setReceiveCallBackThread.Start(); 
            while(!setReceiveCallBackThread.IsAlive);

            this.ProcessStatusBox.Clear();
            this.ProcessStatusBox.AppendText("Running\n");       

        }

        private void FilterData_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
        private void Stop_Click(object sender, EventArgs e)
        {
           setReceiveCallBackThread.Abort(); // Stop thread
           while (setReceiveCallBackThread.IsAlive == true)
           {

           }

           this.ProcessStatusBox.Clear();
           this.ProcessStatusBox.AppendText("Stopped");

           // Attempt to flush CANBus Adapter
           if (EASYSYNC.canplus_Flush(can) < 0)
           {
               // CANBus not flushing
               this.ErrorBox.Clear();
               this.ErrorBox.AppendText("Error flushing CAN");
               EASYSYNC.canplus_Close(can); // Close CANBus Adapter
               this.CANSnifferStatusBox.Clear();
               this.CANSnifferStatusBox.AppendText("CAN closed");
               return;
           }
            // Attempt to reset CANBus Adapter
           if (EASYSYNC.canplus_Reset(can) < 0)
           {
               // CANBus not resetting
               this.ErrorBox.Clear();
               this.ErrorBox.AppendText("Error resetting CAN");
               EASYSYNC.canplus_Close(can); // Close CANBus Adapter
               this.CANSnifferStatusBox.Clear();
               this.CANSnifferStatusBox.AppendText("CAN closed");
               return;
           }

           this.CANSnifferStatusBox.Clear();
           this.CANSnifferStatusBox.AppendText("CAN closed");
           this.ErrorBox.Clear();
        }

        private void FilterID_KeyDown(object sender, EventArgs e)
        {

        }

        private void FilterLength_KeyDown(object sender, EventArgs e)
        {

        }

        private void FilterID_MaskInputRejected(object sender, MaskInputRejectedEventArgs e)
        {
            if (FilterIDBox.MaskFull)
            {

            }
            else if (e.Position == FilterIDBox.Mask.Length)
            {

            }
            else
            {

            }
        }

        private void FilterLength_MaskInputRejected(object sender, MaskInputRejectedEventArgs e)
        {
            if (FilterLengthBox.MaskFull)
            {

            }
            else if (e.Position == FilterLengthBox.Mask.Length)
            {

            }
            else
            {

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:34:45.570

我原来的答案是不正确的。根据 API 指南

> 定义一个函数，它将接收所有传入消息的回调。这是一个阻塞调用，必须在单独的线程上调用。要取消注册此回调函数，可以使用 cbfn 等于 NULL 来调用 canplus_setReceiveCallback。

该文档没有说明阻塞的呼叫何时退出，所以我的猜测是当您使用 NULL 调用 canplus_setReceiveCallback 时它会退出。

我没有办法轻松测试它，但您可以通过在原始调用返回时输出文本来验证这一点。

```
setReceiveCallBackThread = new Thread(() => { EASYSYNC.canplus_setReceiveCallBack(can, del); Trace.WriteLine("EASYSYNC thread terminated"); }); 
```

您的 Stop_Click 方法可以通过以下方式停止线程：

```
EASYSYNC.canplus_setReceiveCallBack(can, null); 
```

# java - 添加到 TreeSet 时记录位置

> ID：11620435
> 
> 赞同：1
> 
> 时间：2012-07-23T21:00:14.863
> 
> 标签：java, treeset

我有一个包含大约 20,000,000 个条目的列表。大约 5,000,000 个条目是唯一的。我需要遍历我的列表，识别唯一条目，并为每个条目分配一个 0 到 5,000,000 之间的整数。

目前，我按顺序将每个条目添加到 TreeSet，然后使用 .headSet() 找出它的去向。我想这是次优的。

```
 while((nextline = wholefile.listIterator().next()) != null){

        //sorted, unique, addition
        keywords.add(nextline);

        //hmmm, get index of element in TreeSet?
        k_j = keywords.headSet(nextline).size();

    } 
```

当我调用 .add() 时，有没有办法获取位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:06:10.883

我会简单地使用一个计数器和`HashMap<Keyword, Integer>`. 对于列表中的每个关键字，从地图中获取其位置。如果得到 null，则将关键字放入映射中，并将当前计数器值作为值，并递增计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:07:40.407

我会这样做：

1.  通过填充 a 来计算对象`Map<YourObject, Integer>`。
2.  浏览此映射并为映射到值 1 的每个键分配一个序列号。

在代码中...

```
List<String> keywords = Arrays.asList("a", "b", "c", "a");

Map<String, Integer> counts = new HashMap<String, Integer>();
for (String str : keywords) {
    if (!counts.containsKey(str))
        counts.put(str, 0);

    counts.put(str, counts.get(str) + 1);
}

int seq = 0;
for (String keyword : counts.keySet())
    if (counts.get(keyword) == 1)                      // is unique?
        System.out.println(keyword + " -> " + seq++);  // assign id. 
```

# jquery-plugins - 如何使这两个事件的代码简短

> ID：11620436
> 
> 赞同：3
> 
> 时间：2012-07-23T21:00:35.090
> 
> 标签：jquery-plugins, jquery

我有以下代码。我怎样才能让它简短，所以它可以点击并输入，所以我不必复制它。

```
$(document).ready(function(){

    $(document).keypress(function(e) {
     if(e.which == 13) {
       $('form#myform').submit();
     }
   });

   $('#mybutton').click(function() {
     $('form#myform').submit();
   });  

});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:31:45.290

这将是一个较短的，它利用事件冒泡：

```
$(document).ready(function(){
   $(this).on('keypress click', function(e) {
       if(e.which == 13 || e.target.id==='mybutton')
           $('form#myform').submit();
   });  
});​ 
```

这就是它的工作原理：http: [//jsfiddle.net/e6L3W/](http://jsfiddle.net/e6L3W/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:07:30.693

尝试这个：

（虽然`$(this)`on document ready 的使用不清楚，或者可能是拼写错误，它应该是一个输入框。）

希望这有助于事业，并阅读下面的链接：`:)`

[使用 jQuery 在“Enter”上提交表单？](https://stackoverflow.com/questions/699065/submitting-a-form-on-enter-with-jquery)

**代码**

```
$(document).ready(function(){

   $('#search').keypress(function(event) { //<<== #search is input box id
     if ( event.which == 13 ) {
        $('#mybutton').trigger('click');
     }
   })

   $('#mybutton').click(function() {
     $('form#myform').submit();
   });  

});​ 
```

**或者**

```
 var myFunction = function() {
        $('form#myform').submit();
      }

     $('#search').keypress(function(event) { //<<== #search is input box id
         if ( event.which == 13 ) {
            myFunction;
         }
       })

       $('#mybutton').click(myFunction); 
```

**或者**

您可以尝试像这样链接：

这将绑定`#element`到事件，但您可能希望将 2 个单独的元素与 2 个单独的事件绑定，但结果相同。

```
$('#element').bind('keypress click', function(e) {
    ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:38:16.423

```
$(document).ready(function(){
   $(this).bind('keypress click', function(e) {
       if(e.type == 'click') {
           if(e.target.id == 'mybutton') {
             $('form#myform').submit();
           }
       } else if(e.type == 'keypress') {
           if(e.which == 13) {
             $('form#myform').submit();
           }
       }
   });
});​ 
```

# c++ - 非常基本的 C++ 程序问题 - 二进制表达式的操作数无效

> ID：11620437
> 
> 赞同：5
> 
> 时间：2012-07-23T21:00:43.797
> 
> 标签：c++

我刚开始在 Mac 上自学 C++，遇到了一些问题。

我编写了一些代码，允许用户输入一个数字，当他们按 Enter 键时，该数字将返回给用户。

Xcode 绝对不会有它。每次我尝试运行我的代码时，它都会说代码存在问题`cin>> thisisanumber;`。

错误出现并说

`Invalid operands to binary expression.` **错误在第 10 行。**

我究竟做错了什么？

```
#include <iostream>

using namespace std;

int main()
{
   int thisisanumber();

   cout << "Please enter a number: ";
   cin  >> thisisanumber;
   cin.ignore();
   cout << "You entered"<< thisisanumber <<"\n";
   cin.get();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T21:01:57.403

您已经成为[最令人烦恼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)的受害者，这意味着`thisisanumber`被视为一个函数。去掉括号，你应该没问题：

```
int thisisanumber; 
```

还可以考虑使其更具可读性，例如`thisIsANumber`. 如果您需要知道它，请`thisIsANumber`使用*驼峰*命名约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:02:21.253

声明不带括号的变量，例如

```
int thisisanumber; 
```

带括号，它被解释为一个函数，一个函数不能作为参数传递给`>>`操作符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T21:03:26.113

您的问题是所谓的[最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。基本上所有可以被解析为函数声明的东西都会被解析。因此，编译器将解释`int thisisanumber();`为一个函数的声明，该函数`thisisanumber`采用零参数并返回一个`int`. 如果您考虑这种行为，那么问题`cin>>thisisanumber;`应该是不言而喻的。

如果您删除括号，将变量声明更改为`int thisisanumber;`，您的程序的行为应该像您期望的那样，它`thisisanumber`是一个类型的变量`int`。

但是，您可能会重新考虑您的命名约定，`thisisanumber`这并不完全可读。我建议使用`this_is_a_number`,`thisIsANumber`或`ThisIsANumber`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-01T07:10:58.967

```
int thisIsANumber; 
```

尝试使其成为变量声明，因为您编写的内容已被解释为函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-16T19:32:49.160

delete () after `thisisanumber`，因为 () after`thisisanumber`意味着它是一个函数，当它不是。

# r - SAS中的“auto.arima”？

> ID：11620445
> 
> 赞同：2
> 
> 时间：2012-07-23T21:01:01.630
> 
> 标签：r, sas

我曾经使用“auto.arima”在 R 中运行 arima 模型，以确定适合数据的最佳 arima 模型。即使没有它，在 R 中也很容易编写一个函数来执行类似的任务。但是，过去几天我用谷歌搜索，我在 SAS 中找不到类似的程序。有谁知道SAS中是否有“auto.arima”？还是必须自己写一篇？谢谢！

编辑：经过几天的在线搜索，我能找到的最接近的是时间序列预测包中的自动模型选择。但是，该功能是使用 GUI 的功能，仍然需要手动选择所有不同的模型进行测试。有谁知道一个命令行过程或包来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:55:48.093

SAS`proc arima`是 SAS/ETS 模块的一部分（单独许可）。您可以使用 Enterprise Guide proc arima 节点作为它的 GUI 界面，也可以使用 Solutions->Analysis->Time Series Analysis 作为基本 SAS 界面。基本的 sas 接口是我通常使用的，它的优点是可以比较许多模型，而不仅仅是 arima。

要检查您是否拥有正确的许可证，请运行以下代码：

```
proc setinit;
run; 
```

如果您获得许可，您应该在结果中看到类似的内容：

```
---SAS/ETS (01 JAN 2020) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-28T20:17:16.767

用于高性能预测的 SAS HpF 是市场上最好的时间序列预测，当您尝试为多个产品生成预测时，没有什么能比它的准确性更高...... Proc hpfdiagnose 后跟 proc hpfengine 你会讨厌 auto.arima 使用后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T12:49:01.770

您可能想尝试一下 PROC FORECAST。

我正在研究一个类似的问题，我有大约 6,000 个单独的时间序列要预测，因此单独对每个时间序列进行建模是不可能的。您可以在 PROC FORECAST 中指定一个 BY 变量，它可以让您一次非常快速地预测多个系列（它在不到 3 秒的时间内运行了我的中等大型数据集）。如果您选择 STEPAR 方法，它将适合您的数据可以找到的最佳自回归模型。

以下是 FORECAST 程序的一个很好的概述：[http ://www.okstate.edu/sas/v8/saspdf/ets/chap12.pdf](http://www.okstate.edu/sas/v8/saspdf/ets/chap12.pdf)

仍然不如 R 中的 auto.arima 出色，但可以完成工作。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T19:12:06.993

SAS有高性能的预测程序（PROC HPFDIAGNOSE+PROC HPFENGINE），它不仅可以选择最好的ARIMA模型，还可以在ARIMA、ESM、UCM、IDM、组合模型、外部模型等中选择最好的。你可以让它根据默认选择标准自动选择最佳，或自定义选择标准。有一个程序族可以自定义一切：PROC HPFDIAGNOSE、PROC HPFENGINE、PROC ARIMASPEC 等。如果你想做更灵活的时间序列分析和编码，你还可以使用 PROC TIMEDATA 和所有内置的时间序列包，这允许你编程你想要的任何东西，也可以做所有的自动建模。

就像上面提到的，它是市场上最好的时间序列预测，当您尝试为多个序列生成预测时，没有什么能比它的准确性更好。但是，它通常与 SAS Forecast Server 或 SAS Forecast Studio 一起获得许可，它们是具有 GUI 的企业预测解决方案。这是可以理解的，因为其他基于 R 和 Python 构建的可以处理自动并行化和自动预测的预测解决方案也收费。

云计算版本还有PROC TSMODEL和Visual Forecasting版本，兼具预测精度和计算性能优势。但是，它也是供企业使用且价格昂贵。毕竟，它针对的是需要预测数千或数百万个时间序列的市场。

对于免费版本，可能最接近的版本是 PROC FORECAST。

# android - 创建 Android 应用程序仅在 WebView 中显示移动网站

> ID：11620446
> 
> 赞同：1
> 
> 时间：2012-07-23T21:01:02.580
> 
> 标签：android, appstore-approval, google-play

我是一个 .NET 人，所以我正在为 WP7 开发应用程序。

在 Windows 市场上，如果应用程序仅在其中打开 WebBrowser 控件和移动网站，他们不会批准应用程序。您必须使用 Silverlight、C# 和 XAML 编写主要功能。

对于 android，我只想在 WebView 控件中使用 m.myapplication.com，因此一旦您打开应用程序，它就会向您显示该 url。

这个应用程序适用于安卓市场吗？还是他们会要求我编写 java 代码来填充内容？

PS：我也想知道有没有什么基本的android模板可以用于eclipse，并为我的移动网站填写url，它会在我的手机上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:05:36.817

对于上传到市场的任何应用程序都没有“审查”流程（除了检查它们是否使用有效的发布密钥签名）

所以是的，您将被允许将您的应用程序上传到市场。即使它只是一个指向移动站点的 webview。

我知道没有这样的模板，但这并不意味着不存在。如果您在网上搜索“Android WebView 示例”之类的内容，并且已经完成了 Hello World 教程，您应该能够轻松实现您的 webview。

# scheme - 查找列表中的元素是否为整数？

> ID：11620450
> 
> 赞同：4
> 
> 时间：2012-07-23T21:01:23.987
> 
> 标签：scheme

我想知道，你如何检查列表中的每个元素是否都是整数？我可以使用 (integer? (car list) 检查第一个元素，但如果我这样做 (integer? (cdr list))，它总是返回 false (#f)，因为列表的最后一部分不是整数作为一个组。在这种情况下，假设列表被定义为。（定义列表'（1 2 5 4 5 3））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:57:39.590

```
 (define get-integers
    (lambda (x)
     (if (null? x)
        "All elements of list are integers"
        (if (integer? (car x))
            (get-integers (cdr x))
            "Not all elements are an integer")))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:18:28.907

实用方案提供了跨整个序列进行测试的功能。例如，应用[*andmap*](http://practical-scheme.net/wiliki/schemexref.cgi?andmap)函数将是合适的。Racket 提供了一个[*for/and*](http://docs.racket-lang.org/guide/for.html#%28part._for_and_and_for_or%29) to 做类似的事情。如果你真的需要手动写出循环，你将使用递归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T21:30:16.430

您需要做的是测试列表中的每个元素以查看它是否满足条件（在这种情况下是整数）。当您对`(integer? (car list))`整数列表进行评估时，您正在检查列表中的第一个元素是否为整数，这很好。但是表达式`(integer? (cdr list))` 测试一个*列表*是否是一个整数（因为`cdr`返回一个列表），这是行不通的——你需要测试列表中的*下一个*元素，然后再测试下一个，依此类推，直到列表为空。

有几种方法可以完成上述操作，最直接的方法是在列表中依次测试每个元素，`false`如果找到非整数元素或者`true`如果所有列表都被消耗而没有找到非整数元素，则返回，例如这个：

```
(define (all-integers? lst)
  (cond ((null? lst) #t)
        ((not (integer? (car lst))) #f)
        (else (all-integers? (cdr lst))))) 
```

更实用的方法是使用内置过程，如下所示：

```
(andmap integer? lst) 
```

[`andmap`](http://docs.racket-lang.org/reference/pairs.html)将检查给定谓词`lst`是否评估为的所有元素。`true`例如：

```
(andmap integer? '(1 2 3))
> #t

(andmap integer? '(1 "x" 3))
> #f 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T12:45:28.960

SRFI-1 使用术语`every`and`any`而不是`andmap`and `ormap`。`match`也可以使用：

```
(define list-of-integers?
  (lambda (lst)
    (match lst
           (((? number?) ..1) #t)
           (_ #f)))) 
```

# objective-c - 请在 IOS 上使用 Drag Drop 将我放在正确的轨道上

> ID：11620454
> 
> 赞同：0
> 
> 时间：2012-07-23T21:01:31.693
> 
> 标签：objective-c, ios, ios5, touchesmoved

我正在创建一个视频混搭应用程序（如 imovie），我要处理的第一个功能是能够从视频库中拖动缩略图并将其放在时间线上。我能够将拖动代码添加到视频缩略图类中，因此当您触摸它时，它会创建一个拖动代理视图，当您移动手指时它会四处移动。接下来我希望能够将它放在时间线上。

我的时间轴也是一个 uiview，我不确定它如何接收缩略图被拖到上面的通知！它需要缩略图的位置，以便它可以在时间线上显示它以及剪辑的持续时间等（我已附加到我的视频缩略图对象的信息）

你会如何处理这个问题？该应用程序适用于 ipad，并且在 ios 5 上。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:08:18.400

您很可能希望继承 UIView。你可以看看这个帖子： [https ://stackoverflow.com/a/4130641/1535038](https://stackoverflow.com/a/4130641/1535038)

主要是你会想看看我的时间线视图是否被触摸，然后看看你是否在拖动的中间。

# javascript - window.location 重定向有效，但原始 URL 未显示在浏览器历史记录中

> ID：11620456
> 
> 赞同：11
> 
> 时间：2012-07-23T21:01:41.653
> 
> 标签：javascript, jquery, redirect, browser-history, window.location

下面的代码运行良好。这是我的问题：窗口 url 重定向，但原始 url 未记录在我的浏览器历史记录中。

例如，如果我访问“http://example.com/page1”，浏览器会重定向到“http://example.com/test”。但是，我需要访问的原始 URL（“http://example.com/page1”）显示在我的浏览器历史记录中，以便我可以在不同的函数中调用它。

无论如何在重定向之前获取访问的原始网址以登录我的浏览器的历史记录？

```
<!-- script to enable age verification cookies and ensure people have age checked -->
<script type="text/javascript">
    $(document).ready(function(){
       if (window.location =="http://example.com/home") {//do nothing
       } else {
           window.location = "http://example.com/test";
       }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:47:55.377

我想你需要的是`window.location.href`. 这会将先前的 URL 添加到浏览器历史记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-11T06:06:32.457

我自己也遇到了这种行为，这是因为我通过文件系统将页面加载到 chrome 中，即使用`file://`协议。我启动了一个 HTTP 服务器，并使用它来保存历史记录。

# opengl-es-2.0 - 将 OpenGL ES 2.0 扩展与 Marmalade SDK 一起使用

> ID：11620458
> 
> 赞同：0
> 
> 时间：2012-07-23T21:01:47.050
> 
> 标签：opengl-es-2.0, marmalade

我想使用一些非标准的 GLES 2 扩展，如“GL_OES_vertex_array_object”，但我找不到将它们与 Marmalade SDK 一起使用的方法。我想我必须使用与果酱相关的函数（如 Windows 上的 wglGetProcAddress）来初始化它们，但我在网上找不到任何关于此的信息。目前我的代码编译得很好，但在链接过程中我得到“未解析的外部符号”错误。有没有办法可以将这些扩展与 Marmalade 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:17:55.563

这在[Marmalade Documentation](http://www.madewithmarmalade.com/devnet/documentation#/api/iwglapidocumentation/iwglapioverview/iwglextensions.html)中有介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:15:57.890

我是 Marmalade SDK 开发人员之一，据我所知，对 GLES2 驱动程序的支持还没有完成。这个功能应该在八月底的某个地方发布。我明确地知道它不适用于 OSX。

# php - 为什么这个透明的 PNG 在使用 GD 组合时会导致边框？

> ID：11620462
> 
> 赞同：6
> 
> 时间：2012-07-23T21:02:03.727
> 
> 标签：php, image, transparency, gd, antialiasing

我正在尝试使用 PHP 从另一个图像创建图像。这是我的代码：

```
<?php
    $width = 109;
    $height = 109;
    $image = imagecreatetruecolor($width, $height);
    $source_under = imagecreatefrompng('ecloid_under.png');
    $black = imagecolorallocate($image, 0x00, 0x00, 0x00);

    imagecolortransparent($image, $black);

    imagecopy($image, $source_under, 0, 0, 0, 0, $width, $height);

    header('Content-type: image/png');
    imagepng($image);
    imagedestroy($image);
?> 
```

所以我正在加载这张图片`$source_under`

![在此处输入图像描述](../Images/fdc2d4e10efd2c07c0479268e86edbab.png)

并将其复制到透明的空白“画布”图像上。这是该操作的结果：

![在此处输入图像描述](../Images/1a860fc7fdb9946b09fc52f7dbe8e317.png)

可以看出，整个初始图像周围有一种黑色边框。我认为这是因为最初，“画布”图像全是黑色的。所以图像的透明度和抗锯齿有问题。

这不是我第一次遇到类似问题，但上次源图像是原因。这一次，在 Photoshop 中打开它并没有显示任何潜在的问题。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T21:19:48.330

在将原件复制到 $image 之前，您能否尝试在 $image 上启用 alpha 混合：

```
imagealphablending($image, true); 
```

第二次尝试是创建一种透明颜色并在复制之前用该颜色填充 $image 。

```
$transparent = imagecolorallocatealpha($image, 0, 0, 0, 127);
imagefill($image, 0, 0, $transparent);
imagealphablending($image, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:08:12.583

您的源图像边缘具有部分透明度。这使它与画布图像的黑色相结合（您通常看不到，因为它是 100% 透明的），从而得到您看到的结果。您可以通过确保源图像上的整个 alpha 通道为 100% 或 0%，或者为您的画布图像选择更合适的基色（即与您网站的背景配色方案相匹配的基色）来避免这种情况。

Fabio Anselmo 的评论将有助于 GIF 没有真正的 Alpha 通道——GIF 透明度是全有或全无的——因此保存为一个将完成 100% 或 0% 的解决方案。除非你非常小心，否则它还会在源图像中为你提供一个“边框”——由你在 GIF 转换中选择的任何背景颜色组成——这是图像抗锯齿的结果。（但是，隔行扫描部分无关紧要。）

# groovy - 在 Groovy 中使用命名空间正确遍历 XML

> ID：11620465
> 
> 赞同：1
> 
> 时间：2012-07-23T21:02:05.637
> 
> 标签：groovy, namespaces, xml-parsing, soapui, xmlslurper

我有以下 xml 代码：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <cms:RelatedConfigurationItemList xmlns:cms="some namespace">
         <ConfigurationItem>
            <name>data</name>
            <id>data</id>
            <type>data</type>
            <relationship>IS CHILD OF</relationship>
            <ConfigurationItemList>
               <ConfigurationItem>
                  <name>data</name>
                  <id>data</id>
                  <type>data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
               <ConfigurationItem>
                  <name>data</name>
                  <id>data</id>
                  <type>data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
            </ConfigurationItemList>
         </ConfigurationItem>
     <ConfigurationItem>
            <name>other data</name>
            <id>other data</id>
            <type>other data</type>
            <relationship>IS CHILD OF</relationship>
            <ConfigurationItemList>
               <ConfigurationItem>
                  <name>other data</name>
                  <id>other data</id>
                  <type>other data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
               <ConfigurationItem>
                  <name>other data</name>
                  <id>other data</id>
                  <type>other data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
            </ConfigurationItemList>
         </ConfigurationItem>
      </cms:RelatedConfigurationItemList>
   </soapenv:Body>
</soapenv:Envelope> 
```

我想使用以下伪代码在 Groovy 中进行验证：

```
def request = testRunner.testCase.getTestStepByName( "relationship_request" )
def resp = new File('H://test_xml.xml')
def cms_ns = new groovy.xml.Namespace("namespace for cms",'cms')
def soap_ns = new groovy.xml.Namespace("http://schemas.xmlsoap.org/soap/envelope/",'soapenv')
def root = new XmlSlurper().parse(resp)

def config_item = root[soap_ns.Envelope][soap_ns.Body][cms_ns.RelatedConfigurationItemList][ConfigurationItem]

config_item.each{
    it.name.each{
        it == corresponding value in db?
        else
        die
    }
} 
```

但是我似乎无法获得正确的语法和逻辑来尝试针对数据库响应验证定义的值（例如名称）。如果 config_item 声明是正确的，那么可能我对 Groovy 闭包的理解很差。此外，我不确定 XML slurper 或解析器是否更合适，也无法确定到底有什么区别。希望这是对问题的充分描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:20:05.443

XmlSlurper 按需工作，内存占用较少。当需要访问 xml 的多个节点时，一般使用 XmlParser。或者，如果您只想读取 xml 的一个或两个节点，您可以使用 Slurper。

[这个例子](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlParser)应该可以帮助你理解 XMLParser 是如何工作的。

在您的情况下，配置项声明和命名空间使用在语法上是正确的，但使用 XmlParser 可能是理想的，因为您可能正在验证 xml 的许多或所有组件。您可能会对使用闭包访问元素感到困惑。这是您的示例，没有名称空间来帮助您理解。

```
 xml = '''<Envelope>
   <Body>
      <RelatedConfigurationItemList>
         <ConfigurationItem>
            <name>Top level name1</name>
            <id>Top level id1</id>
            <type>Top level type1</type>
            <relationship>IS CHILD OF</relationship>
            <ConfigurationItemList>
               <ConfigurationItem>
                  <name>data1</name>
                  <id>data1</id>
                  <type>data1</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
               <ConfigurationItem>
                  <name>data2</name>
                  <id>data2</id>
                  <type>data2</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
            </ConfigurationItemList>
         </ConfigurationItem>
     <ConfigurationItem>
            <name>Top level name2</name>
            <id>Top level id2</id>
            <type>Top level type2</type>
            <relationship>IS CHILD OF</relationship>
            <ConfigurationItemList>
               <ConfigurationItem>
                  <name>other data</name>
                  <id>other data</id>
                  <type>other data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
               <ConfigurationItem>
                  <name>other data</name>
                  <id>other data</id>
                  <type>other data</type>
                  <relationship>IS CHILD OF</relationship>
                  <ConfigurationItemList/>
               </ConfigurationItem>
            </ConfigurationItemList>
         </ConfigurationItem>
      </RelatedConfigurationItemList>
   </Body>
</Envelope>'''

def Envelope = new XmlParser().parseText(xml)

//For accessing top level top level Configuration Item
Envelope.Body.RelatedConfigurationItemList.ConfigurationItem.each{
 //Put your check conditions here.. == or any other
 assert it.name.text().contains("Top level name")
 assert it.id.text().contains("Top level id")
 assert it.type.text().contains("Top level type")
 //Inner children configuration items
 it.ConfigurationItemList.ConfigurationItem.each{
     assert it.name.text().contains("data")
     assert it.id.text().contains("data")
     assert it.type.text().contains("data")
 }       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:10:57.867

你几乎拥有它...

如果您使用`XmlParser`（如 Vamsi 建议的那样）而不是`XmlSlurper`，您会得到：

```
def cms_ns = new groovy.xml.Namespace("some namespace",'cms')
def soap_ns = new groovy.xml.Namespace("http://schemas.xmlsoap.org/soap/envelope/",'soapenv')
def root = new XmlParser().parse(resp)

def config_item = root[soap_ns.Body][cms_ns.RelatedConfigurationItemList].ConfigurationItem 
```

您不需要使用`Envelope`标签进行区分，因为这是根节点，因此它被认为已经加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T03:09:27.430

XmlSlurper 很好。尝试以下操作：

```
def configItem = root.'**'.findAll{
   it.name()=='ConfigurationItem'
}

configItem.each{
   // check data here
} 
```

这应该递归地检查所有配置项，假设这就是你想要完成的。

# yii - Yii CActiveRecord 使用搜索两次

> ID：11620466
> 
> 赞同：0
> 
> 时间：2012-07-23T21:02:09.187
> 
> 标签：yii

我正在尝试在 Yii 框架上创建小型应用程序，但一时无法理解。我有从 CActiveRecord 扩展的 Order 模型，在索引操作中我尝试使用 Order 模型两次但遇到了一些麻烦。

原因是在表格和最后一行中显示分页记录我希望显示某些字段的平均总数，并且必须为按排序/过滤条件过滤的所有记录计算此总数

这是行动代码：

```
public function actionIndex()
{
    $model = new Order('search');
    $model->unsetAttributes();
    if (isset($_GET['Order']))
        $model->attributes = $_GET['Order'];

    // Get average totals by current filters
    $totals = array();
    $tm = clone $model;
    $tmdp = $tm->search();
    $tmdp->criteria->select = array('avg(price) as avgPrice', 'avg(cost) as avgCost');
    $data = $tmdp->getData(true);
    $totals['cost'] = number_format($data[0]->avgCost, 0, '.', ' ');
    $totals['price'] = number_format($data[0]->avgPrice, 0, '.', ' ');
    $totals['marja'] = Order::getMarjaVal(round($data[0]->avgCost, 0), round($data[0]->avgPrice, 0));

    $this->render('index', array(
        'model'         => $model,
        'totals'        => $totals
    ));
} 
```

在我看来，我以相同的方式获取数据**$data = $model->search()->getData();**

因此，如果我查看第一页 - 一切正常，但如果我更改页面，则**$data = $tmdp->getData(true);** 得到空数组。我还尝试为**$tmdp**设置页面，例如：

```
 $tmdp->criteria->select = array('avg(price) as avgPrice', 'avg(cost) as avgCost');
    $tmdp->pagination->setCurrentPage(0);
    $data = $tmdp->getData(true); 
```

但在此之后，我只从第一页获取数据。

请有人能告诉我如何正确地做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:59:46.220

当我们在分页中更改当前页面时，Yii 会自动更新 $_GET['Order_page'] 值（如果未设置此值 - 它将创建它），并且当我们从数据提供者获取数据时分页会自动获取此值。所以对于这段代码，我做了这样的改变：

```
public function actionIndex()
{
    $model = new Order('search');
    $model->unsetAttributes();
    if (isset($_GET['Order']))
        $model->attributes = $_GET['Order'];

    // Get average totals by current filters
    $totals = array();

    $tm = clone $model;
    $tdp = $tm->search();
    $tdp->criteria->select = array('avg(price) as avgPrice', 'avg(cost) as avgCost');
    if (isset($_GET['Order_page'])) {
        $curPage = $_GET['Order_page'] - 1;
    } else {
        $curPage = 0;
    }
    $tdp->pagination->currentPage = 0;
    $data = $tdp->getData(true);
    $totals['cost'] = number_format($data[0]->avgCost, 0, '.', ' ');
    $totals['price'] = number_format($data[0]->avgPrice, 0, '.', ' ');
    $totals['marja'] = Order::getMarjaVal(round($data[0]->avgCost, 0), round($data[0]->avgPrice, 0));
    $tdp->pagination->currentPage = $curPage;

    $this->render('index', array(
        'model'         => $model,
        'totals'        => $totals
    ));
} 
```

所以我们试图从 $_GET 全局数组中获取页面，在 owr 操作之后我们只是更新这个值

# python - if 语句测试 2 个字符串但没有输出？

> ID：11620470
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:02:46.300
> 
> 标签：python, regex, if-statement

我的目标是尝试将字符串列表与整数列表进行匹配：

例如我的字符串列表：`wholelookup[uniprotID] = [A177T,I126T,M418T]`.

我的整数列表：`lookup[uniprotID] = [177,126,418]`.

如果有匹配项，那么我想在整个查找中打印令牌。

这是我到目前为止所拥有的，但它没有打印任何结果：

```
for item in lookup[uniprotID]:
    for names in wholelookup[uniprotID]:
        if start <= item <= end and re.match(item, names) :
            item, start, end = map(int, (item, start, end))
            print names 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:13:33.607

`match`尝试从头开始匹配。另外：您不想将 a 匹配`1`到 例如 `a321a`。

您可以使用 're.match(r'\w'+str(item)+r'\w', names)' 而不是`re.match(item, names)`

或使用`re.search`：

```
re.search(r'\d+',names).group(0)==item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:20:39.810

为什么要使用正则表达式？

假设`start`and`end`已经是整数并且`item`是一个字符串，试试这个：

```
for item in lookup[uniprotID]:
    if start <= int(item) <= end: continue
    for names in wholelookup[uniprotID]:
        if str(item) in names :
            print names 
```

# ruby - Ruby 输出原始 HTTP 请求

> ID：11620474
> 
> 赞同：1
> 
> 时间：2012-07-23T21:02:59.290
> 
> 标签：ruby, http

我的一个脚本提交了一个 HTTP 请求，但我想将原始 HTTP 请求发送给一位同事以进行故障排除。有没有办法可以将原始 HTTP 请求输出到文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:46:45.040

如果您正在使用`Net::HTTP`，请使用`#set_debug_output`：

```
1.9.3p194 :017 > http = Net::HTTP.new('google.com')
 => #<Net::HTTP google.com:80 open=false> 
1.9.3p194 :018 > http.request_get('/')
 => #<Net::HTTPMovedPermanently 301 Moved Permanently readbody=true> 
1.9.3p194 :019 > http.set_debug_output($stdout)
 => #<IO:<STDOUT>> 
1.9.3p194 :020 > http.request_get('/')
opening connection to google.com...
opened
<- "GET / HTTP/1.1\r\nAccept: */*\r\nUser-Agent: Ruby\r\nConnection: close\r\nHost: google.com\r\n\r\n"
-> "HTTP/1.1 301 Moved Permanently\r\n"
-> "Location: http://www.google.com/\r\n"
-> "Content-Type: text/html; charset=UTF-8\r\n"
-> "Date: Mon, 23 Jul 2012 21:41:13 GMT\r\n"
-> "Expires: Wed, 22 Aug 2012 21:41:13 GMT\r\n"
-> "Cache-Control: public, max-age=2592000\r\n"
-> "Server: gws\r\n"
-> "Content-Length: 219\r\n"
-> "X-XSS-Protection: 1; mode=block\r\n"
-> "X-Frame-Options: SAMEORIGIN\r\n"
-> "Connection: close\r\n"
-> "\r\n"
reading 219 bytes...
-> "<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>301 Moved</TITLE></HEAD><BODY>\n<H1>301 Moved</H1>\nThe document has moved\n<A HREF=\"http://www.google.com/\">here</A>.\r\n</BODY></HTML>\r\n"
read 219 bytes
Conn close
 => #<Net::HTTPMovedPermanently 301 Moved Permanently readbody=true> 
```

或者`HTTParty`，使用以下`:debug_output`选项：

```
1.9.3p194 :028 > HTTParty.get('http://www.google.com', :debug_output => $stdout)
opening connection to www.google.com...
opened
<- "GET / HTTP/1.1\r\nConnection: close\r\nHost: www.google.com\r\n\r\n"
-> "HTTP/1.1 200 OK\r\n"
-> "Date: Mon, 23 Jul 2012 21:42:55 GMT\r\n"
-> "Expires: -1\r\n"
-> "Cache-Control: private, max-age=0\r\n"
-> "Content-Type: text/html; charset=ISO-8859-1\r\n"
-> "Set-Cookie: expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com\r\n"
-> "Set-Cookie: path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com\r\n"
-> "Set-Cookie: domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com\r\n"
-> "Set-Cookie: expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com\r\n"
-> "Set-Cookie: path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com\r\n"
-> "Set-Cookie: domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com\r\n"
-> "Set-Cookie: expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com\r\n"
-> "Set-Cookie: path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com\r\n"
-> "Set-Cookie: domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com\r\n"
-> "Set-Cookie: expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com\r\n"
-> "Set-Cookie: path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com\r\n"
-> "Set-Cookie: domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com\r\n"
-> "Set-Cookie: PREF=ID=bf7ea711fb78b88f:FF=0:TM=1343079775:LM=1343079775:S=sitzmIr74uTXkzTt; expires=Wed, 23-Jul-2014 21:42:55 GMT; path=/; domain=.google.com\r\n"
-> "Set-Cookie: NID=62=i-gpt9kPmB80W787ganAdeSSc502sPHOT5bwpddGHTbVtAB5-oDjjaJtQAN7znbEk70RkuHDui5sJOlZrXB0MzfIKtpU2x7vRDj3vFQch6BRcqQaVmzm_J7OzAIOpB5H; expires=Tue, 22-Jan-2013 21:42:55 GMT; path=/; domain=.google.com; HttpOnly\r\n"
-> "P3P: CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\"\r\n"
-> "Server: gws\r\n"
-> "X-XSS-Protection: 1; mode=block\r\n"
-> "X-Frame-Options: SAMEORIGIN\r\n"
-> "Connection: close\r\n"
-> "\r\n"
reading all...
# ... snip ... 
```

此时，您可以复制该输出，也可以替换`$stdout`为任何`IO`实例，例如`File`：

```
1.9.3p194 :034 > File.open('/tmp/http.out', 'w') {|f| http.set_debug_output(f); http.get('/')}
 => #<Net::HTTPMovedPermanently 301 Moved Permanently readbody=true> 
1.9.3p194 :035 > File.read('/tmp/http.out')
 => "opening connection to google.com...\nopened\n<- "GET / HTTP/1.1\\r\\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\\r\\nAccept: */*\\r\\nUser-Agent: Ruby\\r\\nConnection: close\\r\\nHost: google.com\\r\\n\\r\\n"\n-> "HTTP/1.1 301 Moved Permanently\\r\\n"\n-> "Location: http://www.google.com/\\r\\n"\n-> "Content-Type: text/html; charset=UTF-8\\r\\n"\n-> "Date: Mon, 23 Jul 2012 21:46:02 GMT\\r\\n"\n-> "Expires: Wed, 22 Aug 2012 21:46:02 GMT\\r\\n"\n-> "Cache-Control: public, max-age=2592000\\r\\n"\n-> "Server: gws\\r\\n"\n-> "Content-Length: 219\\r\\n"\n-> "X-XSS-Protection: 1; mode=block\\r\\n"\n-> "X-Frame-Options: SAMEORIGIN\\r\\n"\n-> "Connection: close\\r\\n"\n-> "\\r\\n"\nreading 219 bytes...\n-> "<HTML><HEAD><meta http-equiv=\\"content-type\\" content=\\"text/html;charset=utf-8\\">\\n<TITLE>301 Moved</TITLE></HEAD><BODY>\\n<H1>301 Moved</H1>\\nThe document has moved\\n<A HREF=\\"http://www.google.com/\\">here</A>.\\r\\n</BODY></HTML>\\r\\n"\nread 219 bytes\nConn close\n" 
```

# android - 适用于 Android 和 iOS 的 Microsoft 合并复制

> ID：11620480
> 
> 赞同：2
> 
> 时间：2012-07-23T21:03:24.273
> 
> 标签：android, ios, database-replication, merge-replication

Microsoft Sync Toolkit 在设计上具有可扩展性，允许您连接 Android 和 iOS 客户端上的数据库以进行同步。

你能让合并复制在 iOS 和 Android 上工作吗？

# database - 识别场景的实体

> ID：11620482
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:03:27.313
> 
> 标签：database, database-design

这是场景：

“将其服务扩展到组织和个人的安置机构。候选人注册他们的详细信息，如个人、学术、技能和经验。组织在技能、资格、经验等方面给出他们的要求。该机构维护一个网站，通过该网站进行注册可以做到。网站还允许更新候选人资料和组织要求。它还为搜索工作和合适的候选人提供了便利。

这里的实体是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:04:05.947

实体通常是场景描述中的名词。

并非每个名词都成为实体：

*   它们会根据您的规范化水平而有所不同（[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)）
*   一些名词可能成为实体的属性
*   一些名词可能成为业务逻辑组件而不是实体。

有关从自然语言映射的更多信息，请参见维基百科： [http ://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model#Mapping_natural_language](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model#Mapping_natural_language)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2022-02-06T07:26:50.480

1.  机构
2.  候选人
3.  组织
4.  网站

我的猜测是这个

# java - 使用 Ektorp 调用 createAttachment 以与 CouchDB 交互时发生 ClientProtocolException

> ID：11620483
> 
> 赞同：2
> 
> 时间：2012-07-23T21:03:31.440
> 
> 标签：java, couchdb, ektorp

我正在使用[Ektorp](https://github.com/helun/Ektorp)（CouchDB 的 Java API）将文档存储在我的 CouchDB 实例中。我无法将图像附加到文档。每次我调用`createAttachment()`它都会抛出一个`ClientProtocolException`.

代码示例：

```
AttachmentInputStream attachment =
    new AttachmentInputStream(attachmentId,
                              fileInputStream,
                              contentType,
                              file.length());
String rev = db.createAttachment(doc.getId(), attachment)); 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:07:06.463

我在使用 Ektorp 时遇到了类似的问题。我通过将最新的修订号传递给重载的 createAttachment 方法（db.createAttachment(doc.getId()、**doc.getRevision()**、attachment))）解决了这个问题。您可能可以执行以下操作：

```
AttachmentInputStream attachment = 
  new AttachmentInputStream(attachmentId, 
                            fileInputStream, 
                            contentType, 
                            file.length());
String rev = db.createAttachment(doc.getId(), doc.getRevision(), attachment)); 
```

祝你好运！

# sql - SP_WHO2 有条件的？

> ID：11620484
> 
> 赞同：9
> 
> 时间：2012-07-23T21:03:39.113
> 
> 标签：sql, sql-server, sql-server-2008-r2, sp-who2

我有一个长时间运行的插入，当我运行 SP_WHO2 时，它会定期显示“CONDITIONAL”作为命令。那说明什么？当我搜索这个时，我发现大多数事情都在说，“是的，当你有一个长时间运行的查询时，你会看到......”它表明数据库中正在发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T21:16:11.203

通常，您会在一些长时间运行的操作中看到这一点，例如 while 循环、非常昂贵的 IF 查询，甚至可能是游标，具体取决于所使用的选项。如果您识别出与其关联的查询，则与仅依赖 sp_who2 相比，您有更好的机会弄清楚它在做什么。这些输出命令是非常通用的存储桶，不应用于尝试对查询进行故障排除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-15T16:59:51.393

您可以使用 DBCC INPUTBUFFER(SPID) 来查找查询

示例：DBCC INPUTBUFFER(102)

# jquery - 表内有两个表的表排序

> ID：11620486
> 
> 赞同：0
> 
> 时间：2012-07-23T21:03:43.773
> 
> 标签：jquery, html, sorting, html-table

我需要为一个大表实现表排序，其中表结构如下，我使用Jquery进行简单的表排序但无法实现这种类型的结构。我非常需要帮助。

表结构如下：

```
<div id="div1" onmouseover="scroll();" style="overflow: auto; height: 400px;width: 990px;">
<table class="mainTable" style="z-index: -500" border="0px" bordercolor="white" width="1400px">
    <tbody>
    <tr >
    <td>
        <div style="width: 100%; overflow:hidden; ">
    <table class="headTable" border="0px" bordercolor="white" style="width: 1400px" height="14px">
    <tbody>
            <tr style="height:14px; width: 100%;text-align: center; font-family: Arial, Helvetica, sans- serif; font-size: 12px; font-weight: bold">
                <th style="width: 3%;">Login ID</th>
                <th style="width: 5%;">firstName</th>
            <th style="width: 5%;">lastName</th>
            <th style="width: 3%;">country</th>
            <th style="width: 5%;">role</th>    
            <th style="width: 8%;">role2</th>
            <th style="width: 6%;">role3</th>
            <th style="width: 8%;">role4</th>
            <th style="width: 6%;">role5</th>
            </tr>
        </tbody>
    </table>    
        </div>
    </td>
    </tr>   
    <tr>
    <td>        
         <DIV  id="div2"  style="position:absolute;width:1000px; height:355px; overflow-x: hidden;overflow-y: scroll; ">
    <table border="0px" bordercolor="white" width="1400px" >
    <tbody>
    <logic:iterate name="AdminForm" property="AdminList">
    <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    </tr>               
    </logic:iterate>
    </tbody>    
    </table>
        </div>
    </td>   
    </tr>       
    </tbody>        
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:06:05.590

您应该使用[Tablesorter](http://tablesorter.com)进行测试。

```
$("#myTable1").tablesorter();
$("#myTable2").tablesorter(); 
```

# javascript - Javascript中的QuickSort - 错误太多递归

> ID：11620489
> 
> 赞同：0
> 
> 时间：2012-07-23T21:04:05.817
> 
> 标签：javascript, recursion, quicksort

我创建了自己的自定义快速排序例程来使用我拥有的自定义数据结构。它应该像常规快速排序一样工作，除了比较时我需要使用特殊函数将字符串转换为数值。

无论如何，我一定做错了什么，因为 Firefox 告诉我“错误太多递归”。

这是代码：

```
//Will be called on various buckets to sort by dates
function target_sort_wrapper(array) {
    target_sort(array, array.length, 0, length-1);
}

//Quicksort to swap around targets based on dates
//"array" is DDATA, where DDATA[i] are targets
function target_sort(array, length, left, right) {
    if (length < 2) return;
    var pivotIndex = choosePivot(array, length); //returns the index
    partition(array, pivotIndex, left, right);
    //recursive calls now - left then right
    target_sort(array, pivotIndex, 0, pivotIndex - 1);
    target_sort(array, array.length - (pivotIndex+1), pivotIndex+1, array.length - 1);
}

function partition(array, pivotIndex, left, right) {
    //first, put the pivot as the first element to make things easier
    swap(array, pivotIndex, 0);
    var pivot = array[0];
    var i = left + 1; 
    for(var j = left + 1; j < right; j++) {
        //if (array[j] > pivot) { } //do nothing, satisfies invariant
        if (dateValue(array[j].date) < dateValue(pivot.date)) {
            swap(array, i, j);
            i = i + 1; 
        }
    }
}

function choosePivot(array, length) {
    return Math.floor(Math.random() * length); //0 (inclusive) to length (exclusive) 
}

function swap(arr, i, j) {
    var temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:24:52.023

要进行自定义排序，您可以使用“比较功能”。看一看：

*   [如何用哈希对该数组进行排序？](https://stackoverflow.com/questions/11533445/how-to-sort-this-array-with-hashes/11533476#11533476)
*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

虽然你有一个很好的问题，但你不需要实现你的排序算法或关心它，只需使用我说的。

# android - Android服务未按预期启动/停止

> ID：11620492
> 
> 赞同：1
> 
> 时间：2012-07-23T21:04:16.700
> 
> 标签：android, android-service, android-notifications

对于我认为常见的情况，我得到了多种解决方案。不幸的是，似乎没有一个按预期工作。

我创建了一个非常简单的安卓游戏。用户可以邀请朋友一起玩，并且他们在游戏生命周期中会经过一些活动。所有回合和数据都存储在远程服务器中，该服务器通过 Web 服务公开数据。每次发送邀请或对手完成他们的回合时，都会通过服务提示用户轮到他们。

该服务使用标准的 android 通知提示用户，告诉他们轮到他们了。我不希望该服务在用户查看游戏时轮询 Web 服务或显示通知（他们已经知道是否轮到了）。

我尝试了以下解决方案但没有成功。

1.  在主Activity的onPause方法中启动服务，在主Activity的onResume方法中停止服务。

    *   问题 - 每次用户离开另一个活动时，服务就会启动。用户可能正在写东西或创建邀请，并提示他们轮到他们。
2.  将每个活动绑定到服务，并在所有活动的相同 onPause/onResume 方法中设置一个布尔（运行）标志。

    *   问题 - 这似乎合乎逻辑，但由于某种原因，该服务从未显示通知。这可能是用户错误，但我不确定这是否是正确的解决方案。
3.  在所有活动的onPause方法中启动服务，在所有活动的onResume方法中停止服务。

    *   问题 - 基于我在屏幕上显示的显示服务状态的祝酒词，这按预期工作。问题是用户在服务关闭时会收到通知。显然我的祝酒词具有误导性。

任何帮助是极大的赞赏。示例代码不是必需的，但如果解决方案比上述概念更复杂，我们将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:42:02.437

不要使用服务，使用 Google Cloud Messaging 并在广播的接收者中检查游戏状态，然后决定是否显示通知。轮询通常很糟糕，不必要地使用数据和电池。

# android - 通过彩信发送照片

> ID：11620497
> 
> 赞同：0
> 
> 时间：2012-07-23T21:04:28.827
> 
> 标签：android, sms, mms

我正在尝试通过彩信发送照片，我正在使用以下已知片段

```
Intent i = new Intent(Intent.ACTION_SEND);
i.putExtra(Intent.EXTRA_TEXT, "This is an MMS message");
String sendfilepath = "file://" + sendfile.toString() + ".jpg";
i.putExtra(Intent.EXTRA_STREAM,Uri.parse(sendfilepath)) ;
i.setType("image/jpeg"); 
```

它适用于我的索尼设备。弹出菜单显示消息应用程序以及其他应用程序。但是对于 HTC，它不会显示消息应用程序。它显示蓝牙、Facebook、邮件等。如何让它在“使用完成操作”列表中显示消息应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:12:37.130

您可以使用此技术检查 HTC 感知设备并做出适当反应以发送正确的“版本”意图。

```
Uri uri = Uri.fromFile(imgFile);
//HTC Sense intent
Intent sendIntent = new Intent("android.intent.action.SEND_MSG");
sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
sendIntent.setType("image/"+type);
List<ResolveInfo> resolves = getPackageManager().queryIntentActivities(sendIntent,PackageManager.MATCH_DEFAULT_ONLY);
if (resolves.size() > 0) {
    // This branch is followed only for HTC 
    startActivity(sendIntent);
} else {
    // Else launch the non-HTC sense Intent
    sendIntent = new Intent(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
    sendIntent.setType("image/"+type);
    startActivity(Intent.createChooser(sendIntent,"Send"));
} 
```

# vba - 在 Excel VBA 代码中使用 Excel 公式函数（ERF、ERFC）？

> ID：11620500
> 
> 赞同：3
> 
> 时间：2012-07-23T21:04:51.003
> 
> 标签：vba, excel

我正在尝试在我的程序中使用错误函数和免费错误函数。两者都没有工作。我不断收到错误`Compile Error: Sub or Function not defined`。但是，如果我进入一个单元格并手动尝试使用错误功能，它就可以工作。

这是为什么？如何在我的实际代码中使用它？

误差函数是`ERF(x)`和互补误差函数是`ERFC(x)`。

下面是一个不起作用的例子：

```
Sub SeriouslyWHYIsntThisWorking()
    x = 3
    Range("A1") = Erf(x)
End Sub 
```

即使这样也行不通：

```
Sub PleaseWork()
    Range("A1") = Erfc(1)
End Sub 
```

但是，如果我进入 Excel 并输入`=ERF(3)`或`=ERFC(1)`输入一个单元格，它就会起作用。

我对此很陌生，可能错过了一些非常简单的东西。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:15:24.777

您是否安装/引用了适用于 VBA 加载项的 Analysis Toolpak？（查找 atpvbaen.xls）

该`ERF`函数是该加载项的一部分，它有两个版本（一个用于 Excel 函数，一个用于 VBA），您需要设置正确的版本并由您的项目引用才能使用。

插件是 MSFT 的标准插件，但并非总是默认设置。如果您可以在 Excel 中正常使用它，那么您至少已经设置了 Excel 版本。因此，无论您如何实现/使用该功能，都像您想要的那样使用它需要加载项。这意味着，如果您想与其他人共享此内容，他们将需要安装/激活插件。

* * *

要将此答案与提供的其他答案（同样准确和正确）联系在一起，请使用以下方式设置单元格值

`Range("A1").value = Application.WorksheetFunction.ERF(x)`

或设置一个单元格公式

`Range("A1").Formula = "=Erfc(" + x + ")"`

将要求最终用户使用加载项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:11:57.507

试试这个：

```
Sub ThisShouldWorkNow()
    x = 3
    formula = "=Erfc(" + x + ")"
    Range("A1").Formula = formula
End Sub 
```

完全未经测试，因为我的 Linux 机器上没有 Excel……但我想我明白了——你需要使用 Range 对象的 .Formula 属性。

这里有更多信息：

[http://msdn.microsoft.com/en-us/library/office/gg192736.aspx](http://msdn.microsoft.com/en-us/library/office/gg192736.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T21:12:31.810

要在 vba 中使用工作表公式，您需要将其放在`Application.WorksheetFunction.`前面。

有些函数确实有 vba 等价物，但（据我所知）不是`erf`and`erfc`

# c# - 为什么当我运行计时器时刻度数（trackBar 小线）会发生变化？

> ID：11620505
> 
> 赞同：0
> 
> 时间：2012-07-23T21:05:05.003
> 
> 标签：c#

我有 48 帧/图像。当我点击播放（button14）时，我做了什么，它将自动在图像中移动。

但我也希望 trackBar Bar 与计时器一起移动。但如果我让 TrackBar1.Value = _indx; 在 timer3 滴答事件中，然后在它一遍又一遍地播放之后，如果我有 48 帧，trackBar 的值会发生变化，所以现在 trackBar 只有 15 个滴答声，然后当它到达右侧的末尾时它会停止。

我想要的是，如果我点击播放它会一遍又一遍地运行图像，如果我点击暂停然后继续直到我停止。

事实上 trackBar 的值在 timer3 滴答事件中发生了变化，我也做了 _indx++; 当它在 trackBar 上的 15 帧时，它也最终停止而不是继续。

```
private void btnPlay_Click(object sender, EventArgs e)
{
    _indx = 0;
    DirectoryInfo dir = new DirectoryInfo(sf);

    if (_files == null)
        _files = new List<FileInfo>();

    FileInfo[] fi = dir.GetFiles("*.bmp");
    _files.AddRange(fi);

    _files = _files.OrderBy(f => f.LastWriteTime).ToList();
    button14.ForeColor = Color.Red;
    button13.ForeColor = Color.Black;
    button12.ForeColor = Color.Black;
    timer3.Start();
    button13.Enabled = true;
    button13.Text = "Pause";
    button12.Enabled = true;
}

private void timer3_Tick(object sender, EventArgs e)
{
    try
    {
        Image iOLd = this.pictureBox1.Image;
        Image img = Image.FromFile(_files[_indx].FullName);
        trackBar1.Value = _indx;
        label23.Text = _files[_indx].Name;
        this.pictureBox1.Image = img;

        if (iOLd != null)
            iOLd.Dispose();

        _indx++;

        if (_indx >= _files.Count)
            _indx = 0;

        timer3.Interval = 10;
        timer3.Start();
    }
    catch
    {

    }
}

private void btnPause_Click(object sender, EventArgs e)
{
    button13.ForeColor = Color.Red;
    button14.ForeColor = Color.Black;
    timer3.Stop();
    if (button13.Text == "Continue")
    {
        timer3.Start();
        button13.Text = "Pause";
        return;
    }

    if (button13.Text == "Pause")
    {
        timer3.Stop();
        button13.Text = "Continue";
    }
}

private void btnStop_Click(object sender, EventArgs e)
{
    trackBar1.Value = 0;
    Image iOLd = this.pictureBox1.Image;
    Image img = Image.FromFile(_files[0].FullName);
    this.pictureBox1.Image = img;
    if (iOLd != null)
        iOLd.Dispose();
    button13.Text = "Pause";
    timer3.Stop();
    _indx = 0;
    label23.Text = _files[_indx].Name;
    button12.ForeColor = Color.Red;
    button14.ForeColor = Color.Black;
    button13.Enabled = false;
} 
```

Button14 是 Play button13 是 Pause/Continue 而 Button12 是 Stop 问题是如果我不做 trackBar1.Value = _indx; trackBar 根本不会移动。如果我不制作_indx++；那么什么都行不通。

_files 是 List 而 _indx 是 int

# c# - 我的实体模型中应该有外键列吗？

> ID：11620506
> 
> 赞同：5
> 
> 时间：2012-07-23T21:05:10.787
> 
> 标签：c#, nhibernate, fluent-nhibernate

我从实体框架来到 NHibernate。在查看如何创建我的域实体时，我注意到在某些示例中它们不包括外键关系列。由于`Session`该类包含一个`Load()`方法，因此可以只使用对象而无需访问数据库而不是主键。这是在 NHibernate 中构建实体模型时的正常做法吗？

**示例实体**

```
public class BlogPost : Entity
{
    public virtual string Name { get; set; }

    //Should this be here
    public virtual int AuthorID { get; set; }

    public virtual Author Author { get; set; }
} 
```

**创建实体**

```
BlogPost post = new BlogPost
{
    Name = "My first post",
    Author = session.Load<Author>(1) //Avoids hitting the database
};

session.Save(post); 
```

- 或者 - -

```
BlogPost post = new BlogPost
{
    Name = "My first post",
    AuthorID = 1 //Use the id of the object
};

session.Save(post); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:11:59.610

您应该使用完整的实体/对象，而不是使用外键。

外键是数据库概念。当您进行面向对象编程时，它们没有多大意义。在进行 OOP 时，您将对象组合在一起。在您的情况下， a`Blog` **有一个**集合`Posts`。`Post` **有**父母`Blog`等

实体 ID 仅用于唯一标识实体。

[对象-关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)的重点应该是允许您使用 OOP 最佳实践（对象）、数据库最佳实践（关系），而不是混合它们之间的概念（这就是 Mapping 名称的一部分所[代表的](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)意思）。

一些 ORM 在遵循这一点方面比其他 ORM 更好。提示：*[NHibernate](http://nhforge.org/Default.aspx)*。

# php - 将 PHP 的“setrawcookie()”翻译成 .NET

> ID：11620507
> 
> 赞同：-4
> 
> 时间：2012-07-23T21:05:16.433
> 
> 标签：php, .net, cookies

我需要将以下 PHP 脚本转换为 .NET，但在 setrawcookie() 的 C#/ASP.NET 等效项上找不到任何文档：

```
<?php
    $type = $_REQUEST['type'];
    $location = "Location: /includes/fonts/universltstd-lightultracn-webfont.".$type;

    // create a cookie
    setrawcookie("FontDownloaded", 1, time()+3600*24, '/');
    header($location);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:10:37.383

```
Response.Cookies["FontDownloaded"].Value = 1;
Response.Cookies["FontDownloaded"].Expires = DateTime.Now.AddDays(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:10:46.167

看看[这个页面](http://msdn.microsoft.com/en-us/library/78c837bd.aspx)

如果要使用默认的 ASP.NET Cookie

```
Response.Cookies["UserSettings"]["Font"] = "Arial";
Response.Cookies["UserSettings"]["Color"] = "Blue";
Response.Cookies["UserSettings"].Expires = DateTime.Now.AddDays(1d); 
```

如果你想设置一个新的 cookie

```
HttpCookie myCookie = new HttpCookie("UserSettings");
myCookie["Font"] = "Arial";
myCookie["Color"] = "Blue";
myCookie.Expires = DateTime.Now.AddDays(1d);
Response.Cookies.Add(myCookie); 
```

# jquery - 外部内容加载导致 div 不扩展到页面底部

> ID：11620516
> 
> 赞同：0
> 
> 时间：2012-07-23T21:06:09.417
> 
> 标签：jquery, html, css

这是CSS：

```
.container{
    background-image:url('images/containerbg.png');
    background-repeat:no-repeat;
    width:1078px;
    background-color: #000;
    margin:0 auto 0 auto;
    position:relative;
} 
```

这是正在发生的事情的图片：

![在此处输入图像描述](../Images/98f5ad211f699e6dd922fad91139e42d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:09:12.110

尝试使用`overflow: hidden`：

```
.container {
    overflow: hidden; // or overflow: auto;
    ....
} 
```

# java - 大整数集的搜索和差分

> ID：11620519
> 
> 赞同：0
> 
> 时间：2012-07-23T21:06:14.047
> 
> 标签：java, algorithm

我有 2 个大整数数组。我必须得到这些数组的区别（即第二个数组中的元素，而不是第一个数组中的元素，反之亦然）。我正在实现线性搜索并将差异存储在数组中。有什么方法可以让我做得更快（线性时间）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:09:07.820

如果将一个数组放入一个散列集，然后遍历另一个数组，探测散列集，则很容易获得 O(n+m) 时间。当然，如果您的数组已排序，那么您可以直接使用 O(n+m)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:11:06.760

我会说可能，这取决于您的过度需求。您可以将列表分解为小集合，并使用线程处理每个集合，将结果组合回一个集中的池中。

虽然不是太困难，但您需要进行一些管理，以便将结果组织回正确的顺序（因为线程 2 可能在线程 1 之前完成）以及监视进程以了解它何时完成。

您可以查看[执行器教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)以获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:42:32.857

哈希很好，但是集合数据结构呢？

```
stromberg@aw50 ~ $ /usr/local/pypy-1.9/bin/pypy
Python 2.7.2 (341e1e3821ff, Jun 07 2012, 15:38:48)
[PyPy 1.9.0 with GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
And now for something completely different: ``<arigato> the AI state is indeed
close''
>>>> s1 = set(range(10))
>>>> s2 = set(range(5,15))
>>>> s1
set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>>> s2
set([5, 6, 7, 8, 9, 10, 11, 12, 13, 14])
>>>> s1 - s2
set([0, 1, 2, 3, 4])
>>>> s2 - s1
set([10, 11, 12, 13, 14])
>>>> s1 & s2
set([8, 9, 5, 6, 7])
>>>> s1 | s2
set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14])
>>>> 
```

我想这是一种方便的方式，并且对于同时适合内存的列表来说速度很快。

还有诸如磁盘 BTree 或布隆过滤器之类的东西。

使用 BTree，您不必将所有内容都放入内存中，并且可以像合并排序的合并步骤一样进行差分。它们基本上是一个有序的数据库表。

对于布隆过滤器，如果您需要过滤掉需要考虑的事情的数量，它们非常适合；他们是概率性的，并且可以给出诸如“这绝对不在集合中”和“这几乎可以肯定在集合中”之类的答案。布隆过滤器的主要好处是它们需要很少的内存（有时每个元素只需一位）。好的实现将允许您指定最大允许错误概率。EG，检测 *ix 硬链接几乎是布隆过滤器非常适合的集合成员资格问题 - 它们为您提供了一个简短的可能硬链接列表，之后可以快速使其 100% 准确，因为硬链接的数量往往很小，即使实际文件的数量很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T22:00:54.070

你不需要任何花哨的东西。如果您的数组已排序，那么通过每个数组一次就足以获得差异。只需在每个数组中保留一个索引，如果索引指向相同的元素，则增加两个索引，否则将较低的元素添加到返回数组并增加其索引。

这是在 Go 中执行此操作的代码：[http ://play.golang.org/p/VZgGWmu-aO](http://play.golang.org/p/VZgGWmu-aO)

这个解决方案需要 O(n+m) 时间和 O(n+m) 空间，你真的不能做得比这更好。它也没有涉及哈希表的解决方案所具有的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T22:04:53.750

这是实现目标的一种直截了当的方法：

```
public static Set<Integer> foundInFirstButNotSecond(int[] first,
        int[] second) {
    Set<Integer> secondSet = new HashSet<Integer>(second.length);
    for (Integer i :
            second) {
        secondSet.add(i);
    }
    Set<Integer> resultSet = new HashSet<Integer>(first.length);
    for (Integer j :
            first) {
        if (!secondSet.contains(j)) {
            // Current integer from first not found in second
            resultSet.add(j);
        }
    }
    return resultSet;
} 
```

请注意，它返回的是 Set 而不是数组，但如果更适合您，您可以轻松修改此代码以生成数组。

例如，如果您调用此代码：

```
public static void main(String[] args) {
    int[] first = new int[]{1, 2, 3, 4, 5, 6};
    int[] second = new int[]{5, 6, 7, 8};
    System.out.println("In first but not second: " + ArrayCompare.
            foundInFirstButNotSecond(first, second));
} 
```

你会得到一个内容为 [1, 2, 3, 4] 的 Set。（注意 HashSet 不保证任何特定的顺序，所以你也可以得到一个无序的变化。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T23:29:46.253

假设这两个数组是排序的，你可以使用两个slinding指针来查找差异。时间复杂度为O(n+m)，空间O(max(n,m))。

```
 void set_difference(std::vector<int> & array1,std::vector<int> & array2,std::vector<int> & output ) 
{
    auto index1 =  0 ;
    auto index2 = 0 ;
    while (index1 != array1.size() & index2 != array2.size()) 
    {       //since the arrays are sorted, we can stop looking right when we find a number bigger
        while ((array1[index1] < array2[index2]) & index2 != array2.size() )  
            index2++ ;
        if (array1[index1] != array2[index2]) //array1[index1] is not array2
            output.push_back(array1[index1]);
        index1++ ;
    }
} 
```

# java - Spring 和返回受保护的资源

> ID：11620521
> 
> 赞同：0
> 
> 时间：2012-07-23T21:06:21.130
> 
> 标签：java, spring, spring-mvc

我有一个非常标准的 Spring 3.0.7 web 应用程序

结构是这样的

```
WebContent/
    resources/
      myStaticConent/
    WEB-INF/
       views/
       myProtectedContent/ 
```

我正在使用`<mvc:resources>`静态内容的配置，我的控制器使用来自 WEB-INF/views 的 InternalViewResolver 获取视图

现在我需要从 WEB-INF 中的受保护目录中返回非 JSP 内容（JPG、PNG、HTML 等）

因此，用户可能会输入一个类似 http:myWebApp/myProtectedContent 的 URL 并点击我的受保护内容控制器。

```
@Controller
public class HelloWorldController {

@RequestMapping(value="/myProtectedContent")
public String index() {
  return "myjpg.jpg";
 }
} 
```

本质上，我想像视图一样有条件地提供文件。任何人都知道如何做到这一点？

我在这里查看了其他一些方法，使用 Inputstream 的流式处理对于本质上是静态的文件来说似乎有点过分了。我可以注册另一个“视图”类型吗？我需要它像标准的 http 请求响应（如当前视图实现）一样出现 l（从 Web 浏览器端）。

我真的很想避免发明自己的文件处理方法，除非有某种原因为什么使用文件访问方法比使用 Springs “其他”视图解析器（如 ResourceBundleResolver）更好

因此，要求是从 WEB-INF 内部有条件地响应具有可变文件类型（jpg、png、html）的 http 请求，而不用包装在 jsp 中或让文件由 JSTL 视图解释。文件的名称是已知的和静态的。控制器将根据自己的业务逻辑确定文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:30:52.567

您可以重现其底层实现的行为`<mvc:resources/>`，`org.springframework.web.servlet.resource.ResourceHttpRequestHandler`它本质上是流式传输静态文件的内容 - 您可以像 ResourceHttpRequestHandler 一样，扩展`org.springframework.web.servlet.support.WebContentGenerator`它对发送最后修改和缓存相关标头的广泛支持，最后流式传输内容还有一个 Spring 提供的实用程序：

```
org.springframework.util.FileCopyUtils.copy(resource.getInputStream(), response.getOutputStream()); 
```

更新：

```
@Controller
public class HelloWorldController implements ApplicationContextAware  {
    ApplicatonContext ctx = ...;

    @RequestMapping(value="/myProtectedContent")
    public void index(HttpServletRequest req, HttpServletResponse res) {
        Resource resource = ctx.getResource("classpath:staticpath/myjpg.jpg");
        FileCopyUtils.copy(resource.getInputStream(), response.getOutputStream());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T00:29:24.137

您可以做的是将一个新的 servlet 映射到您想要保护的路径并以您想要的方式处理请求。

例如，在 web.xml 中：

```
<servlet>
    <servlet-name>protServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/protServlet-context.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>protServlet</servlet-name>
    <url-pattern>/myProtectedContent</url-pattern>
</servlet-mapping> 
```

这样，您可以为受保护内容的 URL 映射一个新的 servlet (DispatcherServlet)。如果您已经有一个此字段值等于 1 的 DispatcherServlet，则 load-on-startup 值等于 2 是到期的。

# c# - 从网站读取数据，在文本视图中解析和显示数据

> ID：11620534
> 
> 赞同：0
> 
> 时间：2012-07-23T21:07:20.147
> 
> 标签：c#

> **可能重复：**
> [在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)

我正在尝试编写一些使用 HttpWebRequest 和 GET 方法（或任何建议的更快函数）的代码，在页面上找到一个关键字，然后在各种文本视图中显示它之后的内容。

它查找的主页将始终相同，并且始终会找到相同的行但具有不同的数据。

我读过很多关于 HtmlAgilityPack 的东西，但我不知道我是否可以使用它，也不知道如何使用它。

是否有任何更快的函数可用于在源中获取和查找数据？
我可以使用 HtmlAgilityPack，如果可以的话（请举例）？
有没有更简单的方法可以做到这一点？

干杯
诺克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:13:29.110

是的，如果你想从标签中提取文本，你可以使用 HtmlAgilityPack

[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)是一个 HTML 解析器，它从“真实世界”的 HTML 文件构建读/写 DOM。它支持 XPATH 或 XSLT，并且可以容忍“真实世界”的畸形 HTML

在一行中，它使用真正有助于快速提取数据的 XPath 查询

# django - POST 403 Forbidden for Chrome extension with Django on backend

> ID：11620540
> 
> 赞同：2
> 
> 时间：2012-07-23T21:07:50.023
> 
> 标签：django, api, google-chrome-extension, http-post, django-csrf

我以前从未开发过 Chrome 扩展程序，目前正在为我的 Django 驱动的应用程序开发 Chrome 扩展程序（具有链接提交功能）。当我尝试使用扩展程序提交链接时，出现以下错误：

```
'POST http://127.0.0.1:8000/add_link_from_extension 403 (FORBIDDEN)' 
```

这可以通过在 postdata JSON 中传递 csrfmiddlewaretoken 来解决，但是，显然我做不到

```
<script>var csrfmiddlewaretoken = "{{ csrf_token }}"</script> 
```

在 Chrome 扩展的 html 文件中。您如何将 csrf_token 从 Django 传递到 Chrome 扩展的 JavaScript？或者，有没有其他方法可以解决这个问题？这是来自 Chrome 扩展的 JS 代码的相关部分：

```
postdata = {
        "url":url.value
        //"csrfmiddlewaretoken": csrfmiddlewaretoken 
    };
$.post('http://' + "127.0.0.1:8000" + '/add_link_from_extension', postdata, success); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:30:25.980

您可以尝试使用 CSRF 令牌设置 cookie（请参阅：[https](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax) ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax ）。或者，简单地用[`csrf_exempt`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt).

就个人而言，我发现这两种方法都不是最佳的。真的，如果您要允许通过浏览器扩展之类的方式对您的站点进行外部访问，您应该设置和使用 API，特别是，如果您要允许任何类型的写访问，您应该添加具有 OAuth 之类的身份验证层。[`django-tastypie`](https://github.com/toastdriven/django-tastypie)是一个很好的插入式 API 解决方案，您可以尝试，它支持开箱即用的 OAuth。

# ms-access - ms 查询 man min date 月份查询

> ID：11620544
> 
> 赞同：2
> 
> 时间：2012-07-23T21:08:09.990
> 
> 标签：ms-access, date, max, monthcalendar

我正在尝试为一家小公司开发基于访问的数据库。我做了几张表，其中一些是“2011/2012 年总产量”和“2011/2012 年总产量”。所有四个表都有一个“实际产量”列

现在，使用查询工具，我必须实现两个目标。

1.  获取一年中每个月的最大和最小产量
2.  显示当月实际产量最大/最小的日期

我完成了第一个简单的任务；进行查询，获取相关字段，汇总最大值和最小值，最后按月分发。即一月最大 5000，最小 2000...二月最大 6000 最小 1000

现在我想要的是显示该月的最大或最小生产日期。因此，如果 4 月的月份有 MAX 181,218.00，我希望它显示它发生的日期（即 2012 年 4 月 10 日）

我是 Access 的初学者，所以请尽可能简单。

从评论中收集的示例数据：

```
Month         Sum of Prod   Min Prod in $ Max Prod in $
------------- ------------- ------------- -------------
January 2011  $1,184,096.98    $20,486.40   $171,470.40
February 2011 $1,558,072.20    $44,962.20   $116,359.20
March 2011    $1,744,442.19    $19,200.00   $141,065.10
April 2011    $1,698,608.63    $27,500.70   $181,218.00
May 2011      $1,826,915.38    $37,996.00   $130,066.00
June 2011     $2,317,890.71    $42,645.00   $144,323.30 
```

以上数据是Query生成的少数字段。

我正在寻找的是

```
Month         Date of Min Prod Min Prod in $ Date of Max Prod  Max Prod in $
------------- ------------- ------------- -------------     -------------
January 2011     Jan 15        $20,486.40     Jan 10         $171,470.40
February 2011    Feb 20        $44,962.20     Feb 27         $116,359.20
March 2011      March 10       $19,200.00     March 1        $141,065.10 
```

等等。

是否可以使用查询来生成此结果？

谢谢！

与评论的关系。

其中一张表中的相关字段是。

```
Date of Activity Actual Production  
-------------   ------------- -------
1/3/2012              $20,486.40    
1/4/2012              $44,962.20    
1/5/2012              $19,200.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:23:44.707

我迷失了你问题的细节。因此，我将向您展示示例数据和查询，以从这些数据中获得我希望您想要的东西。

以下是 的内容`tblAbbas`。

```
activity_date actual_production
1/3/2012             $20,486.40
1/4/2012             $44,962.20
1/5/2012             $19,200.00
2/1/2012                  $3.00
2/2/2012                  $2.00
2/3/2012                  $1.00 
```

这是名为 的查询的 SQL `qryMonthStart`。此查询的目的是确定包含`activity_date`.

```
SELECT
    DateSerial(Year(activity_date),Month(activity_date),1)
        AS month_start,
    activity_date,
    actual_production
FROM tblAbbas; 
```

下面的查询`qryMonthStart`用作它的数据源，并给了我这个结果集。

```
month_year    SumOf_production min_prod_date MinOf_production max_prod_date MaxOf_production
January 2012        $84,648.60      1/5/2012       $19,200.00      1/4/2012       $44,962.20
February 2012            $6.00      2/3/2012            $1.00      2/1/2012            $3.00 
```

而查询 SQL ...

```
SELECT
    Format(grpby.month_start,"mmmm yyyy") AS month_year,
    grpby.SumOf_production,
    qmin.activity_date AS min_prod_date,
    grpby.MinOf_production,
    qmax.activity_date AS max_prod_date,
    grpby.MaxOf_production
FROM
    (
    (
        SELECT
            month_start,
            Sum(actual_production) AS SumOf_production,
            Min(actual_production) AS MinOf_production,
            Max(actual_production) AS MaxOf_production
        FROM qryMonthStart
        GROUP BY month_start
    ) AS grpby
    INNER JOIN qryMonthStart AS qmin
    ON
            (grpby.MinOf_production = qmin.actual_production)
        AND (grpby.month_start = qmin.month_start)
    )
    INNER JOIN qryMonthStart AS qmax
    ON
            (grpby.MaxOf_production = qmax.actual_production)
        AND (grpby.month_start = qmax.month_start)
ORDER BY grpby.month_start; 
```

请注意，如果您对`activity_date`. 防止这种情况发生的最简单方法是清除 Null，然后在`activity_date`列中禁止它们（在表设计视图中将 Required 属性设置为 Yes）。如果您决定必须允许 Nulls in `activity_date`，那么您还有更多工作要做。

另请注意，`month_year`如果该`actual_production`月的多个每日记录中的值与每月最小值 ( `MinOf_production`) 匹配，则查询将为您提供相同的多行。同样的情况也适用于每月最高限额 ( `MaxOf_production`)。

# php - 我可以在php中将逻辑运算符设置为变量吗

> ID：11620550
> 
> 赞同：2
> 
> 时间：2012-07-23T21:08:54.047
> 
> 标签：php, operators, logic

我想做类似（下面）的事情，可能吗？

```
$operator = >=;
if($value.$operator 400){

// ...

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T21:10:29.833

您不能将运算符存储为变量，但*可以*存储函数（在 PHP 5.3+ 中）。试试看：

```
$operator = function($a){
    return $a >= 400;
}

if($operator($value)){
} 
```

或者，我想您可以使用“正常”功能：

```
function operator($a){
    return $a >= 400;
}

if(operator($value)){
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:14:26.133

您可以（**但永远不应该**这样做）的另一件事是使用`eval()`：

```
<?php
$value = 400;
$operator = '>=';
eval('if('.$value.$operator.' 400) echo "something";'); 
```

同样，这只是为了向您展示它可以做到，但您永远不应该使用`eval()`，否则我会亲自杀死一只小猫！

如果你认为你需要这样的东西，我真的认为你的设计存在很大缺陷。

正如@rocket 在[评论](https://stackoverflow.com/questions/11620550/can-i-set-logical-operators-to-variables-in-php/11620609#comment15388125_11620609)中所说。一种更清洁的方法是：

```
<?php
$value = 400;
$operator = '>=';
eval("\$result = $value$operator 400;");

if ($result) {
    echo 'Something';
} 
```

**不**，这更清洁并不意味着你可以使用。如果你用这个我是认真的，我会追捕你；）

# c# - 将 ListView 绑定到动态 Accordion

> ID：11620559
> 
> 赞同：1
> 
> 时间：2012-07-23T21:09:28.643
> 
> 标签：c#, asp.net, listview, accordion

在`page_load`我正在使用来自的数据动态创建标题`SpGetCompanies`，这工作正常。然后，我尝试`ListView`使用数据源向每个动态创建的手风琴窗格添加一个`SpSearchPublicationsTop1`。

```
protected void Page_Load(object sender, EventArgs e)
    {    
       if (!this.IsPostBack)
        {
            SQLConnection dataAccessor = new SQLConnection();
            dtCompanies = dataAccessor.SpGetCompanies();

            if (dtCompanies.Rows.Count > 0)
            {
                AccordionPane pn;

                Label lblContent;
                int j = 0;
                for (int i = 0; i < dtCompanies.Rows.Count; i++)
                {   
                    lblHeader = new Label();
                    lblHeader.Text = dtCompanies.Rows[i][1].ToString();

                    lblContent = new Label();                       
                    lblContent.Text = "Hallo";

                    pn = new AccordionPane();
                    pn.ID = "Pane" + j;
                    pn.HeaderContainer.Controls.Add(lblHeader);

                    ListView view = new ListView();

                    view.LayoutTemplate = new LayoutTemplate();
                    view.ItemTemplate = new ItemTemplate();
                    //view = (ListView)FindControl("lv_result");

                    view.DataSource = SQLConnection.SpSearchPublicationsTop1(lblHeader.Text);
                    view.DataBind();

                    #region commented stuff
                    //dt2 = SQLConnection.SpSearchPublicationsTop1(lblHeader.Text);

                    //if (dt2.Rows.Count > 0)
                    //{
                    //    //view = (ListView)FindControl("lv_result");

                    //    //column1.Text = dt2.Rows[0][0].ToString();                       
                    //    //view.Columns.Add(column1);
                    //    //Label lblAcronym = new Label();
                    //    //lblAcronym.Text = dt2.Rows[0][0].ToString();

                    //    //view.DataSource = lblAcronym;
                    //    view.DataSource = dt2;
                    //    view.DataBind();

                    //}

                    //listView1.Columns.Add(column1);

                    //foreach (DataRow dr in dt2.Rows)
                    //{
                    //    ListViewItem lvi = new ListViewItem(dr[0].ToString()); //1.st column in datatable, instead of 0 you can write column`s name like: ["CustomerID"]
                    //    lvi.SubItems.Add(dr[1].ToString()); //2nd column from datatable
                    //    view.Items.Add(lvi);
                    //}

                    //this.Controls.Add(view);

                    //ListView lv_result = new ListView();
                    ////lv_result.ItemTemplate = new ItemTemplate();
                    //lv_result.ID = "lvpane" + i;
                    //lv_result.Visible = true;

                    //dt2 = SQLConnection.SpSearchPublicationsTop1(lblHeader.Text);

                    //if (dt2.Rows.Count > 0)
                    //{
                    //    lv_result.DataSource = dt2;
                    //    lv_result.DataBind();
                    //}

                    //var level2 = (ListView)FindControl("lv_result");
                    //level2.ItemTemplate = view.ItemTemplate;

                    ////level2.DataSource = dt2(e.AccordionItem.DataItemIndex);
                    ////level2.DataBind();

                    //dt2 = SQLConnection.SpSearchPublicationsTop1(lblHeader.Text);

                    //if (dt2.Rows.Count > 0)
                    //{
                    //    level2.DataSource = dt2;
                    //    level2.DataBind();
                    //}
                    #endregion

                    pn.ContentContainer.Controls.Add(view);
                    //pn.ContentContainer.Controls.Add(lblContent);
                    Accordion1.Panes.Add(pn);
                    ++j;
                }
            }
        }

    }

 private class LayoutTemplate : ITemplate
    {

        public void InstantiateIn(Control container)
        {
            var ol = new HtmlGenericControl("ol");
            var li = new HtmlGenericControl("li") { ID = "itemPlaceholder" };
            ol.Controls.Add(li);

            container.Controls.Add(ol);
        }
    }

    private class ItemTemplate : ITemplate
    {
        public void InstantiateIn(Control container)
        {
            var li = new HtmlGenericControl("li");

            li.DataBinding += DataBinding;
            container.Controls.Add(li);
        }

        public void DataBinding(object sender, EventArgs e)
        {
            var container = (HtmlGenericControl)sender;
            var dataItem = ((ListViewDataItem)container.NamingContainer).DataItem;

            container.Controls.Add(new Literal() { Text = dataItem.ToString() });
        }
    } 
```

使用上面的代码，手风琴的标题工作正常，但`ListView`我只得到内容中的数据而不是：`System.Data.DataRowView`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:58:19.077

您错过了以下电话：

```
DataBinder.Eval(container.DataItem, "YouBindingProperty"); 
```

例子：

```
public void DataBinding(object sender, EventArgs e)
{
    var genericControl = (HtmlGenericControl)sender;
    var container = (ListViewDataItem)container.NamingContainer;

    container.Controls.Add(new Literal() { Text = DataBinder.Eval(container.DataItem, "YouBindingProperty") });
} 
```

# java - 平板电脑 - 获得可绘制的屏幕分辨率，而不是总屏幕分辨率

> ID：11620564
> 
> 赞同：1
> 
> 时间：2012-07-23T21:10:00.263
> 
> 标签：java, android, android-canvas, tablet, screen-resolution

平板电脑和一些运行 4.0 的手机有屏幕控制。我正在开发一个基于画布的全屏游戏。我调整我的画布以适应带有矩阵的屏幕尺寸。

在任何具有屏幕按钮的设备上，我的应用程序当前在这些按钮下绘制了部分游戏控件。

有没有办法确定可绘制的屏幕分辨率，即分辨率减去任何屏幕按钮？

编辑：

这是我测试分辨率的方式

```
Display display = ((Activity) gameContext).getWindowManager().getDefaultDisplay(); 

Log.d("Display.getWidth(): ", Integer.toString(display.getWidth()));
Log.d("Display.getHeight(): ", Integer.toString(display.getHeight()));

DisplayMetrics metrics = new DisplayMetrics();
((Activity) gameContext).getWindowManager().getDefaultDisplay().getMetrics(metrics);

Log.d("Metrics.getWidth(): ", Integer.toString(metrics.widthPixels));
Log.d("Metrics.getHeight(): ", Integer.toString(metrics.heightPixels)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:16:23.197

使用安卓[`DisplayMetrics`](http://developer.android.com/reference/android/util/DisplayMetrics.html)类。它返回的数据是可供应用使用的区域，不包括屏幕控件等。

# android - 多个网格视图

> ID：11620565
> 
> 赞同：0
> 
> 时间：2012-07-23T21:10:04.170
> 
> 标签：android, tablelayout, android-gridview

我需要制作一个显示多个网格视图的应用程序，但是当其中一个网格视图不适合屏幕时，它可以滚动，但只是网格视图。我想让整个页面可滚动。这是代码：

```
<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/TextView02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="22dp"
                android:text="Mañana"
                android:textSize="20dp" />

            <GridView
                android:id="@+id/GridMorningClasses"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:horizontalSpacing="@dimen/padding_small"
                android:numColumns="5"
                android:scrollbarAlwaysDrawVerticalTrack="false"
                android:scrollbars="none"
                android:verticalSpacing="@dimen/padding_medium"
                tools:listitem="@android:layout/simple_list_item_2" >

            </GridView>
        </LinearLayout>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:overScrollMode="never"
            android:scrollbarAlwaysDrawVerticalTrack="false" >

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="22dp"
                android:text="Tarde"
                android:textSize="20dp" />

            <GridView
                android:id="@+id/GridAfternoonClasses"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:fastScrollEnabled="false"
                android:horizontalSpacing="@dimen/padding_small"
                android:numColumns="5"
                android:verticalSpacing="@dimen/padding_medium"
                tools:listitem="@android:layout/simple_list_item_2" >

            </GridView>
        </LinearLayout>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:overScrollMode="never" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/TextView03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="22dp"
                android:text="Noche"
                android:textSize="20dp" />

            <GridView
                android:id="@+id/GridNightClasses"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:horizontalSpacing="@dimen/padding_small"
                android:numColumns="5"
                android:verticalSpacing="@dimen/padding_medium"
                tools:listitem="@android:layout/simple_list_item_2" >
            </GridView>
        </LinearLayout>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:17:45.820

如果你把所有东西都放在一个 android.widget.ScrollView 里面，它应该让整个屏幕一次滚动。

# maven - 如何为多模块项目中的特定模块激活 Maven 配置文件

> ID：11620566
> 
> 赞同：5
> 
> 时间：2012-07-23T21:10:18.333
> 
> 标签：maven, build, project, multi-module

我们有一个由父 POM 和 5 个或更多模块组成的多模块 Maven 项目。

如果我们激活我们的自定义“自动部署”配置文件，每个模块都可以作为构建的一部分部署到正在运行的服务器，该配置文件在每个模块中明确定义，因为每个模块的部署方式/内容略有不同。

但是，当从父 POM 构建时，如果我激活“自动部署”配置文件，Maven 将最终部署所有模块，这几乎不是我们需要做的（基于我们的开发流程等）。但我们确实希望从根目录构建，因为多个模块之间可能存在更改，并且某些模块之间存在依赖关系。

在从父 POM 构建时，有没有办法为其中一个模块而不是所有模块激活我们的自定义“自动部署”配置文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T23:49:58.613

如果您的每个模块都有自己的“自动部署”配置文件，并且配置文件激活将由传递给`mvn`命令的变量触发，您将能够在父模块上运行单个 mvn 命令并通过声明来决定应该部署哪些模块激活变量

```
<profiles>
    <profile>
        <id>profileId</id>
        <activation>
            <property>
                <name>profileIdEnabled</name>
                <value>true</value>
            </property>
        </activation>
        <properties></properties>
    </profile>
</profiles> 
```

接着

```
mvn -DprofileIdEnabled=true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T04:59:50.103

查看[Maven：完整参考 - 第 6.2 节。使用高级反应器选项](http://www.sonatype.com/books/mvnref-book/reference/_using_advanced_reactor_options.html)。

> 从 Maven 2.1 版本开始，有新的 Maven 命令行选项允许您操作 Maven 构建多模块项目的方式。这些新选项是：
> 
> **-rf, --resume-from**
> 
> ```
>  Resume reactor from specified project 
> ```
> 
> **-pl，--项目**
> 
> ```
>  Build specified reactor projects instead of all projects 
> ```
> 
> **-am, --also-make**
> 
> ```
>  If project list is specified, also build projects required by the list 
> ```
> 
> **-amd, --also-make-dependents**
> 
> ```
>  If project list is specified, also build projects that depend on projects on the list 
> ```

要从根目录仅构建 module-b：

> $ mvn --projects 模块-b 安装

# tomcat - Tomcat 的 Java VM 路径选择

> ID：11620573
> 
> 赞同：2
> 
> 时间：2012-07-23T21:10:54.087
> 
> 标签：tomcat

我是第一次安装 Tomcat，想知道为 Java Path 提供的最佳路径是什么？我应该指向JRE吗？斌？到JDK？

![在此处输入图像描述](../Images/b7b58ad3e7f693337d9dfa593eabe999.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T21:14:21.360

Tomcat 需要 JDK。将路径设置为`%JAVA_HOME%/bin`环境`JAVA_HOME`变量指向 JDK 的位置。

编辑：

从 Apache 的站点，扩展 Windows 的环境变量：

> **设置** `JAVA_HOME`。将此环境变量设置为指向 Java 安装目录的顶层（例如，C:\Program Files\Java\jdk1.6.0_21）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T21:29:38.337

尝试阅读 Tomcat 的[安装说明](http://tomcat.apache.org/tomcat-7.0-doc/setup.html#Windows)：

> 安装程序将提供一个默认 JRE 用于运行服务。安装程序使用注册表来确定 Java 6 或更高版本 JRE 的基本路径，包括作为完整 JDK 的一部分安装的 JRE。在 64 位操作系统上运行时，安装程​​序将首先查找 64 位 JRE，如果未找到 64 位 JRE，则仅查找 32 位 JRE。使用安装程序检测到的默认 JRE 不是强制性的。可以使用任何已安装的 Java 6 或更高版本的 JRE（32 位或 64 位）。

如果您不喜欢自动检测到的值，可以输入自己的值。在您的情况下，`C:\Program Files\Java\jdk1.7.0_01`应该是您输入的内容。如果这不起作用，您可能必须添加`\jre`到该路径的末尾（就像在示例中一样）。

# cordova - 建议将 google api 用作 phoneGap 应用程序的 CDN

> ID：11620577
> 
> 赞同：0
> 
> 时间：2012-07-23T21:11:12.547
> 
> 标签：cordova, google-drive-api, google-api-client

我想创建一个 phoneGap 应用程序，它将浏览谷歌驱动器帐户上的项目。这个想法是我可以在必要时将新文档推送给应用程序的用户。

我不希望用户必须对帐户进行身份验证，理想情况下应用程序将自动进行身份验证。

1.  是否可以创建一个访问权限不公开但可供 phoneGap 应用程序的所有用户和管理员使用的 google drive 帐户？

2.  你能想出更好的方法来达到我想要的结果吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:35:22.717

1.  你不能
2.  试用 Google App Engine、Google 云存储

# ios - UIImagePickerController 中的复选标记覆盖

> ID：11620578
> 
> 赞同：0
> 
> 时间：2012-07-23T21:11:15.070
> 
> 标签：ios, ios5

我正在使用`UIImagePickerController`通过不关闭模式来进行多项选择，并添加一个子视图来计算所选图像的数量。

这是非常基本的，我向选择器展示的是：

```
- (IBAction)choseImagesTouched:(id)sender {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [imagePicker setDelegate:self];

    //place image picker on the screen
    [self presentViewController:imagePicker animated:YES completion:nil];
} 
```

我需要做的一件事是为任何选定的图像添加复选标记，就像他们在添加到相册时在照片应用程序中所做的那样。

我能否以某种方式监听触摸事件、获取坐标并在屏幕上的该位置添加子视图或覆盖视图，以指示图像已被选中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:40:02.243

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
        CGPoint location = [touch locationInView: self.view];
        //... check if there is an image at this location and do something...
    }
} 
```

您还可以使用`touchesMoved:`和`touchesEnded:`

# regex - 创建一个正则表达式来匹配不同长度的单词

> ID：11620580
> 
> 赞同：0
> 
> 时间：2012-07-23T21:11:35.633
> 
> 标签：regex, python-2.7

我正在编写一个正则表达式来解析日志文件，但我无法弄清楚如何为特定表达式建立一个范围（？）。具体来说，在这种情况下，我的日志文件包含各种严重性：

(['EMERG','ALERT','CRIT','ERR','WARNING','NOTICE','INFO','DEBUG'])

我基本上想知道如何编写正则表达式来匹配所有这些。我了解大多数数字工作，但字符对我来说是个难题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:14:59.193

此正则表达式将匹配所有这些条目： [A-Za-z]{1,} 基本上它表示匹配所有仅具有从 A 到 Z 或 a 到 z 的字符且长度至少为一个字符的模式。

有关更多信息，请参阅：[正则表达式备忘单](http://www.addedbytes.com/download/regular-expressions-cheat-sheet-v1/pdf/)

并在这里尝试您的正则表达式：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# javascript - 基于类的语言（如 Java 或 Python）和基于原型的语言（如 Javascript）之间的区别？

> ID：11620582
> 
> 赞同：11
> 
> 时间：2012-07-23T21:11:53.780
> 
> 标签：javascript, python, class, prototype

> **可能重复：**
> [基于原型与基于类的继承](https://stackoverflow.com/questions/816071/prototype-based-vs-class-based-inheritance)

前几天在工作中出现了这个问题——像 Python 这样的基于类的语言和像 Javascript 这样的基于原型的语言有什么区别？除了不同的方法之外，这两种方式看起来都非常相似，我们努力寻找基于类的语言可以做而基于原型的语言不能做的事情，反之亦然。

任何人都可以详细说明或详细说明它们的根本区别吗？

我在网上没有找到太多关于这些差异的信息，只是向您展示了如何完成一个与另一个的网站（例如：[Simulating classes with prototypes in JavaScript](http://unspecified.wordpress.com/2011/06/05/simulating-classes-with-prototypes-in-javascript/)）

任何启蒙表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T21:20:27.550

看看[这篇文章](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Details_of_the_Object_Model#Class-Based_vs._Prototype-Based_Language)。这是一篇详细的文章，讨论了基于类和基于原型的语言之间的区别。

总结差异的表格副本：

## 基于类 (Java)

*   类和实例是不同的实体。
*   用类定义定义一个类；用构造方法实例化一个类。
*   使用 new 运算符创建单个对象。
*   通过使用类定义来定义现有类的子类来构造对象层次结构。
*   按照类链继承属性。
*   类定义指定类的所有实例的所有属性。无法在运行时动态添加属性。

## 基于原型 (JavaScript)

*   所有对象都是实例。
*   使用构造函数定义和创建一组对象。
*   相同的。
*   通过将对象分配为与构造函数关联的原型来构造对象层次结构。
*   按照原型链继承属性。
*   构造函数或原型指定一组初始属性。可以为单个对象或整个对象集动态添加或删除属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T21:22:25.783

看起来你对实际的语言很熟悉，所以你知道有什么区别，对吧？我猜您是在更深层次，也许是更“哲学”的层面上询问差异。

基于类的语言倾向于从上到下，从一般到特殊。经典示例是定义“车辆”类，然后定义“汽车”、“火车”等子类。

相反，基于原型的语言倾向于从特定开始，实际上是从特定的实例开始并对其进行修改。

我喜欢这个：[http ://steve-yegge.blogspot.ie/2008/10/universal-design-pattern.html](http://steve-yegge.blogspot.ie/2008/10/universal-design-pattern.html)

最后，这不是您是否可以在 JS 中进行继承的问题，或者您是否可以使用一种语言而不是另一种语言来做某事。他们解决问题的方式有很大的不同。对于一个特定的问题，一个能充分利用语言特性的好的惯用解决方案在基于原型的语言中可能与基于类的语言中的解决方案完全不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:16:44.680

MDN 的 JavaScript 指南有一些好处，看看：[https ://developer.mozilla.org/en/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en/JavaScript/Guide/Details_of_the_Object_Model)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:22:43.977

好吧，它们（通常）都已完成。:)

类是关于强制封装，以牺牲一些（或很多）运行时可扩展性为代价。原型鼓励封装并允许几乎无限的运行时扩展。

严肃地说，基于原型的 OO 使得从对象动态扩展/派生变得非常容易——有些人会说非常容易。因此，原型语言不容易与静态类型共存。因此，如果您喜欢编译器捕获类型错误的方式，那么您几乎肯定会排除基于原型的语言。

这里实际上有一个很好的讨论：http: [//yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)尽管还有其他的也一样好我喜欢那个。

# algorithm - 为什么前向后向算法中的先验状态向量不是特征值为1的转移矩阵的特征向量？

> ID：11620588
> 
> 赞同：2
> 
> 时间：2012-07-23T21:12:08.477
> 
> 标签：algorithm, hidden-markov-models

维基百科说您不知道第一个状态是什么，因此您必须在先前状态向量中为每个状态分配相等的概率。但是您确实知道转移概率矩阵是什么，并且该矩阵的特征值为 1 的特征向量是 HMM 中每个状态的频率（我认为），那么您为什么不先使用该向量而是状态向量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:53:37.003

这确实是一个建模决策。您的建议当然是可能的，因为它几乎对应于在观察前加上大量观察，其中隐藏状态根本没有观察到或没有任何影响 - 这将使原始状态有时间稳定到平衡分配。

但是，如果您有一段带有分隔开头的观察，例如从说话者开始时开始的一段语音，或者从句子开头开始的一段文本，则没有特别的理由相信分布第一种状态与均衡分布相同：我非常怀疑“e”是否是句首最常见的字符，而众所周知，它是英文文本中最常见的字符。

你选择什么可能并不重要，除非你有很多非常短的观察序列要一起处理。大多数情况下，如果您想将状态概率之一设置为零，我只会担心，因为经常用于优化 HMM 参数的 EM 算法或 Baum-Welch 算法可能不愿意重新估计远离零的参数。

# powershell - 启动进程：ID 为 5344 的进程未运行

> ID：11620591
> 
> 赞同：3
> 
> 时间：2012-07-23T21:12:18.020
> 
> 标签：powershell

```
PS C:\> start regedit -ArgumentList '/S', 'D:\resources\hawk_config.reg' -Wait
Start-Process : Process with an Id of 5344 is not running.
At line:1 char:6
+ start <<<<  regedit -ArgumentList '/S', 'D:\resources\hawk_config.reg'
    + CategoryInfo          : NotSpecified: (:) [Start-Process], ArgumentException
    + FullyQualifiedErrorId : System.ArgumentException,Microsoft.PowerShell.Commands.StartProcessCommand 
```

我不知道它是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:57:35.050

合并 .reg 文件后，该参数不会`/S`导致 regedit 退出吗？我怀疑您遇到的错误是因为在 Start-Process 有机会在进程对象上调用 Process.WaitForExit() 之前 regedit 已经退出。`$error[0] | Format-List *`通过在命令之后 运行来查看错误的内容。如果进程已经退出，`WaitForExit()`将抛出一个。`SystemException`我无法在 PowerShell v3 上重现它。也许他们解决了这个 cmdlet 的问题。

作为一种解决方法，您可以尝试：

```
$p = start-process regedit -ArgumentList '/S', 'D:\resources\hawk_config.reg' -passthru
$p.WaitForExit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T17:43:20.727

*如果进程已经退出，WaitForExit() 将抛出 SystemException。*

我在一个循环使用 start-process 的 PS 脚本中随机得到了同样的东西。永远不会在同一迭代中，有时根本不会。这将完美地解释这种行为。线程和进程的随机异步计时。

我尝试了建议的错误消息转储，看起来它确认了进程在 WaitForExit() 看到它之前完成的想法：

> Start-Process：无法处理请求，因为进程 (38152) 已退出。
> 
> $result = start-process <<<< -filepath $compiler -argumentlist $argstr -nonewwindow -passthru -wait CategoryInfo : NotSpecified: (:) [Start-Process], InvalidOperationException + FullyQualifiedErrorId : System.InvalidOperationException,Microsoft.PowerShell.Commands .StartProcessCommand

# sqlcmd - sqlcmd 在解析我的 .sql 文件时遇到错误

> ID：11620594
> 
> 赞同：0
> 
> 时间：2012-07-23T21:12:34.103
> 
> 标签：sqlcmd

我正在调用 sqlcmd，如下所示：

```
sqlcmd -S SERVERNAME\SQLEXPRESS -i "C:\Documents and Settings\user\Desktop\data\bigDB.sql" 
```

脚本执行时出现错误：

```
Sqlcmd: Error: Syntax error at line 86626 near command '%' in file 'C:\Documents
 and Settings\user\Desktop\data\bigDB.sql'. 
```

如何告诉 sqlcmd 忽略当前记录并继续运行？我想我可以编辑 bigDB.sql 并在顶部包含一个 :On Error Ignore 指令 - 但 bigDB.sql 文件的大小为 5GB - 我无法编辑。

或者我怎样才能去特定的行并删除不良记录？感谢您的帮助。

# python - 将列表导出到 CSV 或 XML 以及每个子列表在其自己的列中 - 重新发布

> ID：11620597
> 
> 赞同：0
> 
> 时间：2012-07-23T21:12:55.123
> 
> 标签：python, xml, csv

我确信有一种简单的方法可以做到这一点，所以就到这里吧。我正在尝试将我的列表导出为列中的 CSV。（基本上，这是另一个程序能够使用我生成的数据的方式。）我有一个名为 [frames] 的组，其中包含 [frame001]、[frame002]、[frame003] 等。我想要 CSV 文件生成的所有值在第一列中包含 [frame001]，在第二列中包含 [frame002]，依此类推。我想如果我可以将文件保存为 CSV，我可以在 Excel 中对其进行操作，但是，我认为有一个解决方案可以通过编程来跳过该步骤。

这是我迄今为止尝试使用的代码：

```
import csv

data = [frames]
out = csv.writer(open(filename,"w"), delimiter=',',quoting=csv.QUOTE_ALL)
out.writerow(data) 
```

我也试过：

```
import csv

myfile = open(..., 'wb')
wr = csv.writer(myfile, quoting=csv.QUOTE_ALL)
wr.writerow(mylist) 
```

最近我尝试过：

```
import csv

data = [frames]
out = csv.writer(open(filename,"w"), delimiter=',',quoting=csv.QUOTE_ALL)
out.writerows(zip(*data)) 
```

经过更多研究，我实际上需要构建一个 XML 文件，但我仍然需要数据以正确的顺序排列。即一列中[frame001]的内容，下一列中的[frame002]等。所有的帧都包含相同数量的信息。

再次感谢您的帮助！

这是前 2 列的数据示例： [255, 0, 0, 255, 0, 0, 255, 0, 0, 255, 0, 0, 255, 0, 0, 255, 0 , 0, 255, 0, 0, 255, 0, 0, 255, 0, 0, 255, 0, 0], [0, 171, 205, 0, 171, 205, 0, 171, 205, 0, 171 , 205, 0, 171, 205, 0, 171, 205, 0, 171, 205, 0, 171, 205, 0, 171, 205, 0, 171, 205]

什么时候应该：

```
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205
255 0
0 171
0 205

```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:24:00.910

您的最后一个解决方案应该可以正常工作。你得到了什么错误？

要转换为 xml，您只需为每个“行”创建一个字典并使用此处列出的解决方案之一：将[Python 字典序列化为 XML](https://stackoverflow.com/questions/1019895/serialize-python-dictionary-to-xml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:44:11.647

XML 并不是像 csv 这样的基于行和列的格式。它是分层的，可能不是存储行/列数据的最佳格式。您需要标签来指定行和列，如果您将其导入另一个应用程序，它需要知道行和列标签是什么才能正确解析它。

第二个应用程序也是用 python 编写的吗？如果是这样，只需使用 python pickle 模块来序列化您的 2D python 列表。这样，您的第二个应用程序可以将其作为 2D 列表读回，而不是将其来回编组为 csv 或 xml。

# c# - 将对象（使用 KeyValuePair）传回控制器

> ID：11620610
> 
> 赞同：1
> 
> 时间：2012-07-23T21:14:34.700
> 
> 标签：c#, asp.net-mvc, key-value

我试图四处寻找答案，但我已经被困了一天的大部分时间，所以我认为这里的好人可能能够帮助我！

我有一个在索引页面上列出的 Monitor 对象列表。每个监视器都有更多信息显示在详细信息页面上。我遇到的问题是

```
public List<KeyValuePair<int, int>> FaxcomMonitorData { get; set; } 
```

如下图所示。

监控类：

```
[DataContract]
public class Monitor
{
    [DataMember]
    public string MonitorType { get; set; }

    [DataMember]
    public string AtlasMonitorHeader { get; set; }

    [DataMember]
    public string AtlasMonitorData { get; set; }

    [DataMember]
    public List<KeyValuePair<int, int>> FaxcomMonitorData { get; set; }

    (...other attributes here...)

} 
```

监视器可以有 2 种类型：ATLAS 和 FAXCOM。根据它们的不同，相应的数据属性将使用适当的值进行更新，而另一个则为空。（即 Atlas 有 AtlasMonitorHeader 和 Data 不为空，但 FaxcomMonitorData 为空）

索引操作结果：

```
public ActionResult Index() 
    {
        MonitorServiceClient client = null;
        List<Monitor> monitors = null;
        try
        {
            client = new MonitorServiceClient("BasicHttpBinding_IMonitorService");
            monitors = new List<Monitor>(client.GetMonitors());
            if (monitors.Any(x => x.Status.Equals("red")))
                ViewData["OverallStatus"] = "red";
            else
                ViewData["OverallStatus"] = "green";
        }
        catch (Exception ex)
        {
            if (null != client)
                client.Abort();
        }
        return View(monitors);
    } 
```

当监视器列表出现在这里时，列表中的监视器看起来很棒！KeyValuePair 具有正确的值，一切都很好。

索引视图：

```
<div id="overallstatus">
    <table style="border-style:none">
        <tr>
            <td style="vertical-align:middle; font-size:30px; color:Black; border-style:none" >Overall Status:</td>
            <td style="border-style:none" >
                <% if (ViewData["OverallStatus"].Equals("red")) { %>
                    <img src="../../../Content/Images/RedStoplightRG.png" alt="" height="60px" width="140px"/>
                <% } %>
                <% else if (ViewData["OverallStatus"].Equals("green")) { %>
                    <img src="../../../Content/Images/GreenStoplightRG.png" alt="" height="60px" width="140px"/>
                <% } %>
            </td>
        </tr> 
    </table>
</div>

<br />
<br />

<table>
    <tr>
        <th></th>
        <th>
            Monitor
        </th>
        <th>
            Current Status
        </th>
        <th>
            Last Update
        </th>
    </tr>

<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: Html.ActionLink("Details", "Details", item)%>
        </td>
        <td>
            <%: item.MonitorName %>
        </td>
        <td>
            <% if (item.Status.Equals("green")) { %>
                <img alt="" src="../../../Content/Images/GreenStoplightRG.png" height="40px" width="95px"/> 
            <% } %>
            <%-- <% else if (Model.CurrentStatus.Equals("red")) { %>
                <img alt="" src="../../../Content/Images/RedStoplightRG.png" />
            <% } %> --%>
            <% else { %>
                <img alt="" src="../../../Content/Images/RedStoplightRG.png" height="40px" width="95px"/>
            <% } %>
        </td>
        <td>
            <%: String.Format("{0:g}", item.LastUpdated) %>
        </td>
    </tr>

<% } %>

</table> 
```

这里的底部表格显示了每个监视器和一些数据。当我单击详细信息超链接时，我会转到此控制器方法。

详细操作结果：

```
public ActionResult Details(Monitor monitor)
    {
        if (monitor.MonitorType.Equals("ATLAS"))
            return RedirectToAction("AtlasDetails", monitor);
        if (monitor.MonitorType.Equals("FAXCOM"))
            return RedirectToAction("FaxcomDetails", monitor);

        return RedirectToAction("Index");
    } 
```

如果我单击 ATLAS 类型的监视器（没有 KeyValuePair），所有属性都很好。

尽管 FAXCOM 类型的大多数属性设置正确，但 KeyValuePair 除外。现在它为空，即使最初接收对象时不是（在索引 ActionResult 中）。

我不相信我正在做任何事情导致 KeyValuePair 在视图中变为空，但我之前没有使用过它，所以我可能需要以与我现在不同的方式传递信息。

让我知道其他代码或解释是否会有所帮助。谢谢！

编辑：我根本没有使用数据库，我在索引页面中使用的服务只会给我一个 Monitor 对象列表。我不希望再次调用（并等待）该服务，因为如果有很多监视器会花费很长时间。

编辑：感谢 fan711 解释了为什么我们尝试的方法行不通，由于时间限制，我们决定采用不同的（有些丑陋的）解决方法。如果您有更多时间，您应该选择 Jonathan 的答案，并尽可能遵循这些良好的编码实践。我想我至少会在这里发布我们所做的，以防其他人想要使用它。

我们最终使 FaxcomMonitorData 成为由逗号和胡萝卜（和 ^）分隔的字符串，以将键与其值和键值与其他键值分开。然后我们解析这个字符串并将数据存储在 List> 中。

```
List<KeyValuePair<int,int>> FaxcomData = new List<KeyValuePair<int,int>>();

        List<string> keyvaluepairs = monitor.FaxcomMonitorData.Split('^').ToList();
        foreach (var pair in keyvaluepairs)
        {
            List<string> stringData = pair.Split(',').ToList();
            FaxcomData.Add(new KeyValuePair<int,int>(Convert.ToInt32(stringData[0]), Convert.ToInt32(stringData[1])));
        } 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:25:54.933

与其通过整个“监视器”对象，不如通过一个 Id 并在 Details 操作中重建对象会更好？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:15:12.517

ActionLink() 的第三个参数在您的情况下是 RouteValues。您不能将复杂对象传递给此参数；它是路由值的键/值集合。您可以在第一个视图的结果 html 中看到 .ToString 在您的项目对象的每个属性上返回。

正如乔纳森所说，首选方法是从您的服务重新加载监视器对象。如果这不可能，您可能希望将整个对象包装在一个表单中，并将每个属性作为隐藏字段传递。就像是：

```
<% for (item = 0; item<Model.Count; item++) { %>
    <% using(Html.BeginForm("Details",Nothing, FormMethod.Post)) { %>
        <%= Html.HiddenFor(m => m(item).MonitorType) %>
        <%= Html.HiddenFor(m => m(item).AtlasMonitor) %>
        <%= Html.HiddenFor(m => m(item).AtlasMonitorData) %>
        <% for (var i = 0; i<item.FaxcomMonitorData.Count; i++) { %>
            <% Html.HiddenFor(Function(m) m(item).Data(i).Key) %>
            <% Html.HiddenFor(Function(m) m(item).Data(i).Value) %>
        <% } %>
        <input type="submit" value="Search" />
    <% } %>
<% } %> 
```

您可能需要将项目放在部分视图中（未测试此代码）。这听起来可能很复杂，但 MVC 并非旨在将对象从控制器动作传递到控制器动作。

我能想到的另一个解决方案是将监控项存储在会话状态中。然后仅将索引传递给“详细信息”操作方法。从会话状态中检索它。这当然会添加通常也不推荐的状态。

# ruby - 使用正则表达式在哈希键上部分匹配字符串（从单词的开头）？

> ID：11620611
> 
> 赞同：2
> 
> 时间：2012-07-23T21:14:37.007
> 
> 标签：ruby, regex, hash

我有一个有`keys => meaning`关系的哈希。此哈希的各种元素是：

```
"fish" => "aquatic animal"
"fiend" => "bad person"
"great" => "remarkable" 
```

我需要创建一个函数 find ，这样当我使用这个函数时`find("fi")`，它应该返回 " `fish`" 和 " `fiend`" 以及定义。所以输出应该是：

```
"fish" => "aquatic animal"
"fiend" => "bad person" 
```

我是正则表达式和 Ruby 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:29:07.213

```
 hash.select{ |k,v| k.start_with? pattern } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:25:53.490

您可以将其作为单个表达式执行：

```
hash.select { |key, value| key.start_with? prefix } 
```

或者，如果您使用的是 Ruby 1.8：

```
hash.reject { |key, value| not key.start_with? prefix } 
```

例子：

```
{'foo' => 1, 'bar' => 2, 'baz' => 3}.select { |key, value| key.start_with? 'f' } # {'foo' => 1}
{'foo' => 1, 'bar' => 2, 'baz' => 3}.select { |key, value| key.start_with? 'b' } # {'bar' => 2, 'baz' => 3} 
```

`select`只会保留与块中的条件不匹配的对。如果以（很明显）开头，`str.start_with? prefix`则返回 true 。`str``prefix`

1.8 代码中有一点尴尬 - 我正在做`reject`，而不是`select`我需要从`#start_with?`. 原因是在 Ruby 1.8 中`Hash#reject`返回 a `Hash`，而`Hash#select`返回对数组。

# php - phpBB 会话集成和致命错误

> ID：11620612
> 
> 赞同：1
> 
> 时间：2012-07-23T21:14:42.123
> 
> 标签：php, session, integration, phpbb

我有一个从头开始构建的网站，显然位于我的根文件夹中。

在我的根文件夹中，我有一个名为“forum”的目录，其中包含我的 phpBB 3.0.8 安装。

我要做的就是在我的网站索引上显示当前登录用户的头像、姓名和消息数。

我知道必须首先开始一个会话。我找到了这个网站并一步一步地关注它。 [http://www.3cc.org/blog/2010/03/integrating-your-existing-site-into-phpbb3/](http://www.3cc.org/blog/2010/03/integrating-your-existing-site-into-phpbb3/)

我唯一改变的是

`$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : 'change_this_to_phpbb_dir';`

至

`$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './forum';`

当我创建我的测试页面时，我得到

> 致命错误：在第 7 行的 /data/25/2/25/137/2514626/user/2754604/htdocs/alpha/phpbb.php 中的非对象上调用成员函数 session_begin()

第 7 行是`$user->session_begin();`

我已经阅读了一百万篇有类似问题的文章和论坛帖子，但似乎没有任何帮助。我的 phpBB 论坛可以在这里找到：http: [//alphakravmagainternational.com/forum/](http://alphakravmagainternational.com/forum/)

请记住，我是一个 php / phpBB noob，所以请尝试包含示例。我还在学习 ：）

谢谢

phpbb.php 文件：

```
<?php
define('IN_PHPBB', true);
$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './forum';
$phpEx = substr(strrchr(__FILE__, '.'), 1);
include($phpbb_root_path . 'common.' . $phpEx);
// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup();
?> 
```

# xmpp - 由于广播接收器网络更改，Xmpp 重新登录

> ID：11620618
> 
> 赞同：0
> 
> 时间：2012-07-23T21:15:11.580
> 
> 标签：xmpp

我正在开发一个带有smack的XMMP android客户端，问题是登录延迟也是如此，当我启动第一个连接时运行良好，但我有一个广播接收器来监听网络变化，当我停止连接并重新启动它时由于网络的变化，服务器也延迟，有时无法登录服务器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:18:58.263

也许您应该使用会话附件！这是迄今为止在您下次重新连接时建立 xmpp 连接的最可靠的方法。

# javascript - D3.js svg 到画布的转换

> ID：11620621
> 
> 赞同：1
> 
> 时间：2012-07-23T21:15:29.373
> 
> 标签：javascript, canvas, svg, cross-browser, d3.js

我正在尝试将 d3.js 可视化转换为画布。d3.js 代码可以在这里找到：[https ://gist.github.com/3166265](https://gist.github.com/3166265)

有人可以解释将此可视化转换为画布的基础知识吗？我不能使用像 canvg 这样的程序，因为我的目标浏览器（android 平台 2.3）根本无法解析任何 SVG。因此我需要将此可视化转换为画布。您可以提供的任何帮助将不胜感激...

# rest - CXF REST：如何在拦截器中的消息中检索 POJO 对象，然后再将其编组？

> ID：11620622
> 
> 赞同：4
> 
> 时间：2012-07-23T21:15:33.557
> 
> 标签：rest, cxf, message, interceptor, pojo

我们在 CXF 中实现了一个 REST API。我的目标是能够在 POJO 上定义自定义注释，并在它们被编组之前在 CXF 拦截器中处理它们。我相信除了在拦截器中检索实际对象之外，我拥有执行此操作所需的所有信息。我的代码如下所示：

1.  资源类

    ```
    @Path("/mypath")
    public class MyResource {

        @GET
        public MyObject getObject() {
           MyObject o = new MyObject();
           ...
           return o;
        }
    } 
    ```

2.  我的对象

    ```
    public class MyObject {

        private String x;

        @MyAnnotation
        public String getX() {
           return x;
        }

        public String setX(x) {
           this.x = x;
        }
    } 
    ```

3.  拦截器

    ```
    public class MyInterceptor extends AbstractPhaseInterceptor<Message> {

        public VersionOutInterceptor() {
            super(Phase.POST_LOGICAL);
        }

        public final void handleMessage(Message message) {
            // 1\. STUCK -- get object from the message
            // 2\. parse annotations and manipulate the object
            // 3\. put the object back on the message for serialization
        }
    } 
    ```

如何从消息中获取对象，根据注释对其进行操作，然后将其放回消息中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T12:13:59.993

我有类似的要求，这就是我能做到的

对于 In Interceptor，我使用**了 PRE_INVOKE** Phase 和 Out Interceptor **PRE_LOGICAL** Phase。此代码仅显示日志记录，但如果 Usecase 需要，您可以更改对象。

下面的代码将为您获取您正在寻找的对象

```
@Override
   public void handleMessage(Message message) throws Fault {
      MessageContentsList objs = MessageContentsList.getContentsList(message);
      if (objs != null && objs.size() == 1) {
      Object responseObj = objs.get(0);
      DomainPOJO do= (DomainPOJO)responseObj;
   _logger.info(do.toString());
  }
} 
```

# java - Java 数据库应用程序

> ID：11620631
> 
> 赞同：0
> 
> 时间：2012-07-23T21:16:20.453
> 
> 标签：java, database

有人可以帮我解决这个问题：我正在制作一个 java 数据库应用程序，我想将我的选择、插入、更新和删除方法放入单独的类中，以便可以从另一个类中调用它们并重用它们。到目前为止，我设法在不使用准备好的语句时仅分离更新和删除方法以及插入方法。我遇到的问题是如何从数据库中选择返回数据并将它们放入表中。

这是我在查询类中的更新和删除方法：

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import com.Konekcija.Konekcija;

public class Queries {
Konekcija konekcija = new Konekcija();

public void updateTable(String sqlQuery){
    Connection conn = null;
    Statement st = null;
    try{
        Class.forName("com.mysql.jdbc.Driver");
        conn = konekcija.getConn();
        st = conn.createStatement();
        st.executeUpdate(sqlQuery);

    }catch(Exception e){
        e.printStackTrace();
    }finally{
        try {
            conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
            st.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

public void deleteFromTable(String sqlQuery){
    Connection conn = null;
    Statement st = null;
    try{
        Class.forName("com.mysql.jdbc.Driver");
        conn = konekcija.getConn();
        st = conn.createStatement();
        st.executeUpdate(sqlQuery);
    }catch(Exception e){
        e.printStackTrace();
    }finally{
        try {
            conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
            st.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

} 
```

PS 连接属性在另一个类“Konekcija”中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:31:38.777

您应该创建一个集合并使用查询结果填充它，它应该类似于：

```
List<Foo> selectFoos(Connection connection) throws SQLException {
    PreparedStatement ps = connection.prepareStatement("select * from foo");
    try {
        ResultSet resultSet = ps.executeQuery();
        try {
            List<Foo> foos = new ArrayList<Foo>();
            while (resultSet.next()) {
                Foo foo = new Foo();
                // use resultSet methods get... to retrieve data from current row of results
                // and populate foo
                foos.add(foo);
            }
        } finally {
            resultSet.close();
        }
    } finally {
        ps.close();
    }
    return foos;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:19:14.677

“从表中选择”的返回数据将是[ResultSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html)。

1.  您可以将 ResultSet 返回给调用者并获取值（或）
2.  [在 Queries 类的“Select”方法中，从结果集中检索数据并将其设置为一些 VO 对象，然后将此 VO 添加到集合并返回集合（假设您将在ResultSet](http://www.java-samples.com/showtutorial.php?tutorialid=202)中获得多行）。例如，如果您正在查询用户表，请使用 get/set 方法创建 Java bean 类“用户”。将检索到的值设置为此 bean 并返回它。//在某个包中使用get/set创建用户类。

    ```
    Class.forName("com.mysql.jdbc.Driver");
        conn = konekcija.getConn();
        st = conn.createStatement();
        ResultSet rs=st.execute(sqlQuery);
        //Instantiate user class
           while (rs.next())
        System.out.println("Name= " + rs.getString("moviename") + " Date= " +               String fName = rs.getString("firstName"); 
    ```

    用户 myUser = new User(); myUser.setFirstName(fName); }

    `NOTE:`此代码是手动输入的。可能存在语法错误。请以它为起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:24:02.953

尝试执行查询方法。在“结果集”类的 java 文档中，您会找到一个示例：

[http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

# ios - UINavigationController &“不支持推送导航控制器”异常？

> ID：11620633
> 
> 赞同：0
> 
> 时间：2012-07-23T21:16:29.897
> 
> 标签：ios, uinavigationcontroller

我试图重做一个*如何从*Appress 开始 iPhone 开发中创建基于 UINavigationController 的应用程序的示例。

我收到以下异常：

```
Exception: Pushing a navigation controller is not supported
Exception: [NSException]:Pushing a navigation controller is not supported
ex.name:'NSInvalidArgumentException'
ex.reason:'Pushing a navigation controller is not supported' 
```

当用户尝试推送已经在堆栈中的视图时会发生这种情况，*在我的情况下这不是真的。*

**My_3AppDelegate.h**

```
IBOutlet UINavigationController * navController; 
@property (nonatomic, retain)    UINavigationController * navController; 
```

**My_3AppDelegate.m**

```
[window addSubview: navController.view]; 
```

`MainWindow.xib`将`UINavigationController`连接到插座的窗口添加到窗口。

我的代码中唯一的区别`RootViewController`是不是`UITableViewController`. 它只有`UIViewController`2`UIbutton`秒。

```
FirstViewController *fv = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
fv.navigationItem.title=@"First View Controller";
[self.navigationController pushViewController:fv animated:NO];
[fv release]; 
```

该错误发生在应用程序的初始运行中，它确保*不是那样，视图已经添加到堆栈中，我正在尝试准备好。*

它是一个非常简单的教程应用程序，我被困在其中，我不知道为什么？

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:17:43.567

我通过将超类从 UINavigationCotroller 更改为 UIViewController 解决了同样的问题。

# database - 如何编写查询以查看谁在 Access 电话呼叫数据库中呼叫谁的次数最多？

> ID：11620634
> 
> 赞同：0
> 
> 时间：2012-07-23T21:16:31.780
> 
> 标签：database, ms-access

我在 Excel 中有一个电话帐单，其中显示了我的电话拨打和拨打的所有电话，我将它导入到 Access 2007 中的一个表中。我想学习使用 Access 执行一个简单的查询，以确定我与谁通话最多。

假设我们有 A 列（呼叫者）和 B 列（被呼叫者），并且我的号码将始终在任一列中。如何在 Access 中进行查询以确定与我交谈最多的电话号码？我有一个包含 Excel 数据的表格，但我需要一些逐步的手持来学习如何进行查询。

用简单的英语，我想在 A 列或 B 列中查询所有包含我的号码的电话。然后，我想计算每个唯一对（mynumber + othernumber 或 othernumber + mynumber 应计入同一对）。然后，我想计算/总结每个独特的对，看看哪对产生的计数最高。

例如，转到创建功能区，单击查询向导等...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:06:14.047

假设您有下表：-

```
Column A : Column B
---------:----------
Fred     : 1
Bill     : 2
Fred     : 1 
```

例如，您可以进行查询：-

```
SELECT A, B, Count(B) AS CountOfB
FROM Table1
GROUP BY A, B
ORDER BY Count(B) DESC 
```

这会给你： -

```
Column A : Column B : CountOfB
---------:----------:----------
Fred     : 1        : 2
Bill     : 2        : 1 
```

第一行将列出 B 列最常见的出现次数，计数将列出该行出现的次数。

# symfony - FOSUserBundle 覆盖映射以消除对用户名的需要

> ID：11620635
> 
> 赞同：7
> 
> 时间：2012-07-23T21:16:41.697
> 
> 标签：symfony, doctrine, fosuserbundle

我想消除 FOSUserBundle 中对用户名的需求。我的用户将仅使用电子邮件地址登录，并且我已将真实姓名字段添加为用户实体的一部分。我意识到我需要重做[这里描述的整个映射。](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/doctrine.md) 我想我做得对，但是当我尝试提交注册表时，我得到了错误：

“只有 Doctrine 映射的字段名称才能验证唯一性。”

奇怪的是，我没有尝试对用户实体中的任何内容断言唯一约束。

这是我的完整用户实体文件：

```
 <?php
        // src/MyApp/UserBundle/Entity/User.php

        namespace MyApp\UserBundle\Entity;

        use FOS\UserBundle\Model\User as BaseUser;
        use Doctrine\ORM\Mapping as ORM;
        use Symfony\Component\Validator\Constraints as Assert;

        /**
         * @ORM\Entity
         * @ORM\Table(name="depbook_user")
         */
        class User extends BaseUser
        {
            /**
             * @ORM\Id
             * @ORM\Column(type="integer")
             * @ORM\GeneratedValue(strategy="AUTO")
             */
            protected $id;

            /**
             * @ORM\Column(type="string", length=255)
             *
             * @Assert\NotBlank(message="Please enter your first name.", groups={"Registration", "Profile"})
             * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
             */
            protected $firstName;

            /**
             * @ORM\Column(type="string", length=255)
             *
             * @Assert\NotBlank(message="Please enter your last name.", groups={"Registration", "Profile"})
             * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
             */
            protected $lastName;

            /**
             * @ORM\Column(type="string", length=255)
             *
             * @Assert\NotBlank(message="Please enter your email address.", groups={"Registration", "Profile"})
             * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
             * @Assert\Email(groups={"Registration"})
             */
            protected $email;

            /**
             * @ORM\Column(type="string", length=255, name="email_canonical", unique=true)
             */
             protected $emailCanonical;

            /**
             * @ORM\Column(type="boolean")
             */
             protected $enabled;

            /**
             * @ORM\Column(type="string")
             */
             protected $salt;

            /**
             * @ORM\Column(type="string")
             */
             protected $password;

            /**
             * @ORM\Column(type="datetime", nullable=true, name="last_login")
             */
             protected $lastLogin;

            /**
             * @ORM\Column(type="boolean")
             */
             protected $locked;

            /**
             * @ORM\Column(type="boolean")
             */
             protected $expired;

            /**
             * @ORM\Column(type="datetime", nullable=true, name="expires_at")
             */
             protected $expiresAt;

            /**
             * @ORM\Column(type="string", nullable=true, name="confirmation_token")
             */
             protected $confirmationToken;

            /**
             * @ORM\Column(type="datetime", nullable=true, name="password_requested_at")
             */
             protected $passwordRequestedAt;

            /**
             * @ORM\Column(type="array")
             */
             protected $roles;

            /**
             * @ORM\Column(type="boolean", name="credentials_expired")
             */
             protected $credentialsExpired;

            /**
             * @ORM\Column(type="datetime", nullable=true, name="credentials_expired_at")
             */
             protected $credentialsExpiredAt;

            public function __construct()
            {
                parent::__construct();
                // your own logic
            }

            /**
             * @return string
             */
            public function getFirstName()
            {
                return $this->firstName;
            }

            /**
             * @return string
             */
            public function getLastName()
            {
                return $this->lastName;
            }

             /**
             * Sets the first name.
             *
             * @param string $firstname
             *
             * @return User
             */
            public function setFirstName($firstname)
            {
                $this->firstName = $firstname;

                return $this;
            }

                 /**
             * Sets the last name.
             *
             * @param string $lastname
             *
             * @return User
             */
            public function setLastName($lastname)
            {
                $this->lastName = $lastname;

                return $this;

       }
    } 
```

我已经看到了有关此的各种建议，但似乎没有一个建议对我有用。FOSUserBundle 文档对于什么必须是非常常见的请求非常少见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T15:29:39.840

我认为解决此问题的最简单方法是将捆绑包保持原样，而是将您的用户类设置为具有与电子邮件地址相同的用户名。

通过覆盖`setEmail()`方法来实现这一点，同时将`$username`属性设置为`$email`参数，并将`setEmailCanonical()`设置`$usernameCanonical`为`$emailCanonical`.

```
public function setEmail($email){
    $this->email = $email;
    $this->username = $email;
}

public function setEmailCanonical($emailCanonical){
    $this->emailCanonical = $emailCanonical;
    $this->usernameCanonical = $emailCanonical;
} 
```

除此之外，您需要做的就是与语义相关的事情。就像让您的表单标签读取电子邮件而不是默认的用户名标签一样。您可以通过覆盖翻译文件来做到这一点。我将把它留给你（或其他人），因为它甚至可能对你来说没有必要。

使用这种策略，您的数据库中将有冗余数据，但它会为您省去很多重新映射的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T08:41:51.687

如果您使用的是原则 2，则可以使用生命周期事件将您的逻辑放入回调中。

[http://docs.doctrine-project.org/en/2.0.x/reference/events.html](http://docs.doctrine-project.org/en/2.0.x/reference/events.html)

```
/**
 * @ORM\PreUpdate()
 * @ORM\PrePersist()
 */
public function setUsernameToEmail()
{
    $this->username = $this->email;
    $this->usernameCanonical = $this->emailCanonical;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-28T09:30:07.453

当我不想*要求*用户输入电子邮件时（从而使电子邮件在 FOSUserBundle 中成为可选），我使用 Symfony 2.7 + FOSUser+SonataUser+SonataAdmin。

同时，我需要输入的电子邮件在系统中是唯一的。所以用户在注册时有两个选择：

1.  将电子邮件留空
2.  提供一个独特的电子邮件，该电子邮件尚未在系统中

以下是我按预期工作的解决方案（我并不声称它是最干净的解决方案，但希望它会向您展示如何完成类似任务的方法）

**1) 对 Entity/User.php 的更改**

```
namespace AppBundle\Entity;

use Sonata\UserBundle\Entity\BaseUser as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 *
 *
 * @ORM\AttributeOverrides({
 *      @ORM\AttributeOverride(name="email",
 *          column=@ORM\Column(
 *              type =  "string",
 *              name     = "email",
 *              nullable = true,
 *              unique   = true
 *          )
 *      ),
 *      @ORM\AttributeOverride(name="emailCanonical",
 *          column=@ORM\Column(
 *              type = "string",
 *              name     = "email_canonical",
 *              nullable = true,
 *              unique   = true
 *          )
 *      )
 * })
 *
\*/
class User extends BaseUser
{ 
```

**2)**执行应用程序/控制台原则：迁移：差异和迁移，数据库表已按预期更改，将“DEFAULT NULL”添加到电子邮件和 email_canonical 字段

**3)**无论我尝试什么，email 都被设置为 NULL，但 email_canonical 不是，它正在返回“”。我尝试在我的 RegistrationFormHandler 中手动将其设置为 NULL，var_dump 确认在未输入电子邮件时它确实设置为 NULL。但是 FOSUser 会向数据库提交“”空字符串，这违反了我为电子邮件设置的 UNIQUE 约束，因此解决方案是覆盖 Entity/User.php 中的方法（如先前对该问题的回答中所述）

```
// src/AppBundle/Entity/User.php
// ...
public function setEmailCanonical($emailCanonical)
{
   // when email is empty, force canonical to NULL
   // for some reason by default "" empty string is inserted
   $this->emailCanonical = $this->getEmail();
} 
```

**4）**在我的情况下更改 FOSUserBundle（或 SonataUserBundle）的验证，这样就不需要设置电子邮件。（我只是将 .. 从 validation.xml 中删除，因为不再适用于电子邮件）

将这 2 个文件复制到您的 config/validation/ 目录中（对于 SonataUser+FOSUser，它是：Application/Sonata/UserBundle/Resources）

1.  供应商/friendsofsymfony/user-bundle/FOS/UserBundle/Resources/config/storage-validation/orm.xml
2.  以上路径，config/validation/orm.xml

将这些文件中的“注册”组重命名为您自己的名称，例如“myRegistration”。

将新的validation_group 绑定到config.yml 中的fos_user。如果使用奏鸣曲用户，它是：

```
sonata_user:
   profile:
      register:
          form:
              ...
              validation_groups:
                - myRegistration
                - Default 
```

玩得开心。

# android - Android 错误 - 打开失败 ENOENT

> ID：11620641
> 
> 赞同：52
> 
> 时间：2012-07-23T21:17:33.960
> 
> 标签：android, eclipse, fileoutputstream

我正在尝试使用一个整数数组来保存一些块覆盖率，该数组只是保存一个块的执行次数。但是，由于某种原因，当我尝试写入我创建的一些文件（例如“BlockForHelper.txt”，我专门在 Eclipse 中创建并放置在项目目录中）时，我收到此错误：

```
java.io.FileNotFoundException:  /nfs/guille/groce/users/nicholsk/workspace3/SQLTest/BlockForTest: open failed: ENOENT (No such file or directory)
at libcore.io.IoBridge.open(IoBridge.java:416)
at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
at com.example.sql2.SQLTest.blockCoverage(SQLTest.java:149)
at com.example.sql2.test.SQLTestCase.testSuite(SQLTestCase.java:41)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:192)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)
Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
at libcore.io.Posix.open(Native Method)
at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
at libcore.io.IoBridge.open(IoBridge.java:400)
... 18 more 
```

并给我错误：

```
public void blockCoverage() throws IOException
{
    String coverage = "";
    for (int x = 0; x < 20; x++)
        coverage += x + " " + bb_count[x] + "\n";

    File file = new File("/nfs/guille/groce/users/nicholsk/workspace3/SQLTest/BlockForTest.txt");
    Writer out = new OutputStreamWriter(new FileOutputStream(file)); // Here
    try
    {
        out.write(coverage);
    } finally {
        out.close();
    }
} 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-23T21:32:03.887

使用 sdk，您无法写入内部存储的根目录。这会导致您的错误。

编辑 ：

根据您的代码，将内部存储与 sdk 一起使用：

```
final File dir = new File(context.getFilesDir() + "/nfs/guille/groce/users/nicholsk/workspace3/SQLTest");
dir.mkdirs(); //create folders where write files
final File file = new File(dir, "BlockForTest.txt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:33:25.813

将文本文件放在资产目录中。如果没有资产目录，则在项目的根目录中创建一个。然后您可以使用`Context.getAssets().open("BlockForTest.txt");`打开此文件的流。

# html - css：将 div 附加到居中的 div

> ID：11620642
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:17:40.297
> 
> 标签：html, css, css-float

我有一个居中的 div，想知道如何在其右侧附加一个 div，顶部有一个标题 DIV，然后是黄色居中的 DIV 和我想在右侧附加的这个社交共享 DIV。

谢谢！！！

![我的 div 的图像](../Images/1030cb3fadd67a881c6cace0acd1675b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:21:26.843

将其添加到黄色 div 中，并将其定位如下：

```
#yellowdiv { position: relative; }
#sidebar { position: absolute; left: 790px; top: 10px; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:22:56.873

将黄色 div 用作棕色 div 的父元素是完全可行的；社交数据是视频的所有相关信息。在这种情况下，如果需要，请使用以下命令：

```
#video {
 position: relative;
}

#brown {
 position: absolute; top: 0; left: 100%; /* this guarantees that it'll line up at the very end of #video */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:24:36.900

# 演示

[http://jsfiddle.net/KXvpV/1/](http://jsfiddle.net/KXvpV/1/)

# 代码

**HTML**

```
<div id="one"></div>
<div id="two">
    <div id="social"></div>
</div> 
```

**CSS**

```
#social { position: relative; top: 20px; right: -201px; } 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:21:31.870

尝试制作黄色 div 位置：相对，将侧边栏 div 放入其中并使其位置：绝对，值为 top:0 和 right:-XXX 其中 XXX 是侧边栏的宽度加上您需要的边距。

# objective-c - 在Objective C中子类化时需要实现的方法

> ID：11620646
> 
> 赞同：1
> 
> 时间：2012-07-23T21:17:51.950
> 
> 标签：objective-c, ios, methods, subclassing

总的来说，我是编程新手（尽管我在很多很多年前上过 C 课）并且正在学习 Objective-C 以在 iPhone 上进行编程。我有一个我认为是一个简单的问题，但是在寻找了一段时间（几天，断断续续）之后，我找不到我正在寻找的答案。

我知道当子类化一个Objective-C类时，我应该实现initialize方法和deallocate方法（除非后者使用ARC，如果我是正确的？）。问题是：

1.  是否只有这两个需要担心，或者其他类是否可能具有需要实现的其他方法？
2.  如果其他类可能有我在子类化它们时需要实现的方法，那么通常在哪里可以找到该文档？（我似乎没有在 Apple 框架文档中看到这一点，尽管它出现的协议中有这种信息）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:26:24.487

*   `init`从技术上讲，即使`dealloc`继承的版本足够，您也不需要实现。此外，ARC 并不能让您`dealloc`在所有情况下都不必编写（但它肯定涵盖了绝大多数）。例如，如果您使用 为对象分配内存，则`malloc`需要在`dealloc`.
*   当您将实例变量添加到您的类时，您需要初始化它们。通常，您在*指定的初始化程序*中执行此操作。同样，如果您不初始化任何内容，则不必编写自己的初始化程序；反初始化器也是如此。
*   唯一需要实现方法的情况是当您采用带有一个或多个方法标记的协议时`@requried`。这些方法在协议参考中都有标记。例如，`tableView:cellForRowAtIndexPath:`并且`tableView:numberOfRowsInSection:`在[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)中标有“必需方法”标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:25:55.510

子类化 NSObject（或其任何子类，例如 UIViewController、UIView 等）时不需要任何方法。

如果您创建一个新的，比如说 UIViewController，通常最好将您在新创建的文件中找到的方法保留为指南/模板，但您实际上并不需要保留任何方法。超类总是会调用自己的方法。

但是请注意，您必须调用 super 的某些方法，例如 viewWillAppear 等。

# javascript - Node.js 的 Cluster 模块和 Learnboost 的 Cluster 模块有什么区别？

> ID：11620648
> 
> 赞同：6
> 
> 时间：2012-07-23T21:17:53.930
> 
> 标签：javascript, node.js, cluster-computing, npm

Node.js 本身有一个名为 Cluster 的核心模块（参考：[http](http://nodejs.org/docs/v0.8.3/api/cluster.html) : //nodejs.org/docs/v0.8.3/api/cluster.html），Learnboost 发布了一个也称为 Cluster 的模块（参考：[http:// /learnboost.github.com/cluster/](http://learnboost.github.com/cluster/) [https://github.com/LearnBoost/cluster](https://github.com/LearnBoost/cluster)）。

这两者如何比较？它们在某种程度上是相关的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:02:24.613

Nick Hagianis 已经说过了，node.js 的集群模块被暂时移除了。据我所知，LearnBoost 集群模块不再积极开发。LearnBoost 模块的问题列表很长。

LearnBoost 模块具有一些内部模块不提供的零停机重启功能。但我不确定它是否仍然适用于当前（0.8.x）版本的节点。如果您需要类似的功能，您可以查看[Forever](https://github.com/nodejitsu/forever/)工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T10:00:17.000

[集群模块](http://nodejs.org/api/cluster.html)现在已重新添加到核心模块集中。

# haskell - 在 Unit 值上使用 case 表达式只是为了使用警卫是一种好的风格吗？

> ID：11620649
> 
> 赞同：14
> 
> 时间：2012-07-23T21:18:04.693
> 
> 标签：haskell

测试几个布尔表达式的推荐方法是什么？

我一直在使用这个：

```
case () of () | test1 -> value1
              | test2 -> value2
              | otherwise -> value3 
```

这是好风格吗？有没有更漂亮的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T21:27:26.603

这种模式可以用一个函数来模拟——例如，`cond`来自[Control.Conditional](http://hackage.haskell.org/packages/archive/cond/latest/doc/html/Control-Conditional.html#v%3acond)：

```
signum x = cond [(x > 0     ,  1)
                ,(x < 0     , -1)
                ,(otherwise ,  0)] 
```

不过，我不能说它特别漂亮。

* * *

在下一个 GHC 中，我们[将能够使用多路 if](http://hackage.haskell.org/trac/ghc/ticket/4359)，万岁！（刚刚发现）

```
f t x = if | l <- length t, l > 2, l < 5 -> "length is 3 or 4" 
           | Just y <- lookup x t        -> y 
           | False                       -> "impossible" 
           | null t                      -> "empty" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T21:29:09.460

这是我经常看到的一个习惯用法，因为 Haskell 缺少一个正确的语法来处理没有匹配的情况。为了使我的意图更清楚，我通常故意匹配`undefined`：

```
case undefined of
  _ | foo       -> bar
    | baz       -> quux
    | otherwise -> chunkyBacon 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:16:09.887

您还可以对元组内的一系列表达式进行模式匹配

```
case (test1,test2) of
  (True,_) -> value1
  (_,True) -> value2
  _        -> value3 
```

# c# - 系统窗口窗体的用户控件上的工具提示文本属性丢失

> ID：11620651
> 
> 赞同：0
> 
> 时间：2012-07-23T21:18:13.997
> 
> 标签：c#, winforms, user-controls, tooltip

使用 C# 一段时间后，我认识到系统窗口窗体的用户控件不提供 tooltiptext 属性，就像我在 Visual Basic 6 中所知道的那样。我看到 Form、TextBox、Label、ComboBox 和 PictureBox 没有这样的财产。现在我有一个奇怪的问题：如何在鼠标悬停在上述控件上时向用户显示工具提示？

是的，我在工具箱中看到了“工具提示”控件。它提供了一个气球，我不需要气球。它在每个用户会话中只显示一个项目的工具提示，然后从不显示（组件的已知问题）以及为什么我需要一个额外的组件，如果这应该只是相应控件的属性，我想提供文本框、标签等工具提示。

是的，我看到了“帮助提供者”。我通常从来没有为我的项目分配帮助文件，所以我不使用帮助系统。我需要的是一个简单的 Tooltiptext，而不是“F1 组件”。现在我很好奇，如果控件不提供选项，我将如何实现 Tooltiptext。会不会是 C# 没有控制工具提示？连德尔福都有！还是我在某个地方错过了什么？

**解决方案：**

1.  从您的项目中删除所有通知图标控件，以确保系统托盘中不会出现不需要的信息气泡。

2.  将工具箱中的工具提示组件拖放到表单上，但**忽略**所有气球属性和气球超时属性和气球计时器属性，只需拖放组件而无需进一步操作。

3.  一个奇怪的新属性字段“tooltip1 上的工具提示”现在显示在表单上的所有文本框和标签等中。只需处理此字段，因为它将是您的 Tooltip 属性，并且不要在代码或设计器中设置任何其他内容。构建和编译。工具提示文本现在将显示为没有气球功能的普通工具提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T21:54:47.347

听起来您错误地使用了 ToolTip 控件。

1-将其从工具箱拖到您的表单中。

此时，窗体上的每个控件现在都获得了一个属性“Tooltip”来设置适当的文本。

2- 以您认为最直观的方式设置每个控件的新“工具提示”属性。

# events - 单击 GWT 中的后退按钮时未触发 ChangeValueHandler

> ID：11620652
> 
> 赞同：1
> 
> 时间：2012-07-23T21:18:17.477
> 
> 标签：events, gwt, back

我有一个表单，我想在用户按下后退按钮时显示一个确认对话框。假设我有一个听 ChangeValueHandler 的 Texbonx

```
addValueChangeHandler(new ValueChangeHandler<String>() {    
    @Override
    public void onValueChange(ValueChangeEvent<String> event) {
        setChanged(true);
    }
}); 
```

这是简短的场景

1）我在文本框中输入文本

2）我点击后退按钮

3)`ValueChangeEvent`未被调用

`BlurEvent`我在 TextBox 上以编程方式尝试着火，`textBox.fireEvent(new BlurEvent() { });`但仍然没有结果。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:13:14.220

When the page is closed (by pressing the back button, or closing the page) no events will be fired by the controls. What will fire first is `window.onbeforeunload` to give you a chance to warn the user about data loss and offer to stay on the page. If the user chooses to stay on the page, then all the events that were supposed to be fired, will fire (so your change event will fire).

You can attach a handler to the native `onbeforeunload` event by using `Window.addClosingHandler`.

```
Window.addWindowClosingHandler(new ClosingHandler() {

        @Override
        public void onWindowClosing( ClosingEvent event )
        {
            event.setMessage("If you leave the page now all data will be lost.");
        }

}); 
```

It's worth noting that the `ClosingEvent` and it's underlying `onbeforeunload` event, cannot, under any circumstances, be cancelled programmatically. The only way to prevent the user from leaving the page is if the user itself chooses "Stay On This Page" in the popup that results from the code above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:59:46.903

我所做的是将 TextBox 的焦点设置为 False，然后检查它是否已更改，这会在单击后退按钮时强制 TextBox 不聚焦。

这是检查表单是否更改的代码

```
public boolean isChanged(){
    if(formPanel == null) return false;     
    for (int i = 0; i < formPanel.getWidgetCount(); i++) {
        if(formPanel.getWidget(i) instanceof BaseWidget){
            BaseWidget w= (BaseWidget) formPanel.getWidget(i);
            w.setFocus(false);
            if(w.isChanged()){
                return true;
            }
        }
    }
    return false;
} 
```

# java - getSubImage() 触发 RasterFormatException

> ID：11620653
> 
> 赞同：0
> 
> 时间：2012-07-23T21:18:18.627
> 
> 标签：java, image

该程序应该截取屏幕截图（干草堆），然后在屏幕截图中查找子图像（针）。然后它输出针的位置。它使用 for 循环遍历每个维度。它从左->右和上->下。在第 36 行和第 37 行中，从 getSubImage() 方法中抛出了 RasterFormatException。

```
import java.awt.AWTException;
import java.awt.HeadlessException;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
public class Test {
    public static void main(String[] args) throws HeadlessException, AWTException,   IOException, ClassNotFoundException {

        BufferedImage haystack = new Robot().createScreenCapture(new Rectangle(
                Toolkit.getDefaultToolkit().getScreenSize()));

        Point p = findNeedle (ImageIO.read(new File ("needle.png")));

        System.out.println(p.getX() + ", " + p.getY());
    }

    static Point findNeedle(BufferedImage needle) throws HeadlessException, AWTException {
        BufferedImage haystack = new Robot().createScreenCapture(new Rectangle(
                Toolkit.getDefaultToolkit().getScreenSize()));

        for (int i = 0; i < haystack.getHeight(); i++) {
            for (int j = 0; j < haystack.getWidth(); j++) {

                if (haystack.getSubimage(j, i, haystack.getWidth() - needle.getWidth(),
                        haystack.getHeight() - needle.getHeight()) == needle) {
                    return new Point(j, i);
                }
            }
        }
        return null;
    }
} 
```

这是错误。

```
Exception in thread "main" java.awt.image.RasterFormatException: (x + width) is outside raster
    at sun.awt.image.IntegerInterleavedRaster.createWritableChild(IntegerInterleavedRaster.java:467)
    at java.awt.image.BufferedImage.getSubimage(BufferedImage.java:1173)
    at test.Test.findNeedle(Test.java:36)
    at test.Test.main(Test.java:20)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:42:40.323

您总是得到宽度为**haystack.getWidth() - needle.getWidth()**和高度为**haystack.getHeight() - needle.getHeight()**的子图像。
但是你循环遍历 haystack 图像的整个宽度和高度。

假设干草堆是 100x100 像素，针是 10x10 像素。所以子图像将是 90x90 像素。

在 for 循环中，前 10 次会起作用，因为 10+90 = 100。但是第 11 次，你会遇到问题：11+90 = 101。
由于 101 比 haystack 图像大，它会尝试创建一个 subImage这超出了干草堆图像的范围。

修复：

```
public class Test
{

public static void main(String[] args) throws HeadlessException, AWTException, IOException, ClassNotFoundException
{

    BufferedImage haystack = new Robot().createScreenCapture(new Rectangle(
            Toolkit.getDefaultToolkit().getScreenSize()));

    Point p = findNeedle(ImageIO.read(new File("needle.png")), haystack);

    System.out.println(p.getX() + ", " + p.getY());
}

static Point findNeedle(BufferedImage needle, BufferedImage haystack) throws HeadlessException, AWTException
{
    for (int i = 0; i <= haystack.getWidth() - needle.getWidth(); i++)
    {
        for (int j = 0; j <= haystack.getHeight() - needle.getHeight(); j++)
        {
            if (haystack.getSubimage(i, j, needle.getWidth(), needle.getHeight()) == needle)
            {
                return new Point(j, i);
            }
        }
    }
    return null;
} 
```

}

错误（我第一次没有发现）是子图像的大小与其他两个图像的不同，而它应该只是针的大小。请记住，使用`needle == subImage`将不起作用。
虽然图像的内容可能相同，但两个图像对象并不相等。

# eclipse - Subversion 提交失败 - 但我的凭据是正确的

> ID：11620655
> 
> 赞同：1
> 
> 时间：2012-07-23T21:18:29.457
> 
> 标签：eclipse, svn, commit, subclipse

我的问题非常类似于：[svn: MKACTIVITY 403 Forbidden](https://stackoverflow.com/questions/1032209/svn-mkactivity-403-forbidden)

我的错误信息如下（间距很尴尬，但这就是它在 Eclipse 中的样子）：

```
 svn: Commit failed (details follow):
    svn: Commit failed (details follow):
svn: MKACTIVITY of '/svnroot/...': 403 Forbidden (https://repository.url) 
```

### 我的软件：

*   带有 KDE 用户界面的 Linux 操作系统，
*   SpringSource 工具套件 2.9.1 版，
*   子剪辑版本 1.6.10

### 我试过的：

1.  关闭 Eclipse。删除 Eclipse 的“configuration/org.eclipse.core.runtime”目录中的 .keyring 文件（以重置任何存储的凭据）。
2.  修改 '/home/[user_name]/.subversion/servers' 以存储密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:57:05.193

事实证明 OnResolve （来自原始帖子的评论）是正确的。我与 /svnroot/ 的所有者交谈过，我需要先注册一个帐户才能提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T09:42:26.073

我解决了这个问题，问题在于旧凭​​据存储在以下文件夹 \Users\AppData\Roaming\Subversion\auth\svn.simple

刚刚从该文件夹中备份文件并删除所有文件并再次尝试提交，SVN 或 Subclipse 将提示用户名和密码并提供并完成，它将提交。

# c# - Linq To SQL 包含

> ID：11620661
> 
> 赞同：2
> 
> 时间：2012-07-23T21:19:19.700
> 
> 标签：c#, .net, linq-to-sql

如何将此 SQL 语句转换为 LINQ：

```
SELECT     [Content].[Content], [Content].ListOrder, [Content].ContentTypeId,        
           [Content].ContentId
FROM       [Content] INNER JOIN
           GroupContentPermission ON [Content].ContentId = GroupContentPermission.ContentId 
WHERE      GroupContentPermission.GroupId IN 
           (SELECT GroupId FROM GroupUser WHERE GroupUser.UserId = 169) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:25:56.713

转换为 LINQ 通常非常简单，除了在查询的情况下有一个特殊技巧。您可以用自然的方式翻译您的 select、where 和 from 语句，如下所示。但是，在语句的情况下，您必须*先从*`IN`内部子查询中获取结果，然后检查内部子查询是否是您要检查的值。*`.Contains`*

 *```
var groups =
   (from gu in GroupUser
    where gu.UserId == 169
    select gu.GroupId).ToList();

var result = 
    from p in GroupContentPermission
    join c in Content on p.ContentId equals c.ContentId
    where groups.Contains(p.GroupId)
    select new { c.Content, c.ListOrder, c.ContentTypeID, c.ContentId };

// result should contain the same results as the SQL query 
```

以下是您可能会发现有用的其他一些资源（如果您进行快速 google 搜索，您可以在 LINQ 上找到更多资源和教程。实际上有*数千个*）：

*   [Linqer](http://www.sqltolinq.com/)，一个 SQL 到 LINQ 的转换器。
*   [LinqPAD](http://www.linqpad.com/)，一个用于快速实验的简单 .NET/LINQ 测试器
*   ScottGu[使用 LINQ To SQL的权威指南](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)
*   相关的 SO 问题：[有哪些好的 LINQ 资源？](https://stackoverflow.com/questions/47740/what-are-some-good-linq-resources)，其中引用了一个名为[101 LINQ Samples](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:29:34.363

假设您已经将表与模型中的外键链接起来（DBML/EntityFrameworks）：

```
Contents.Where(x => x.GroupContentPermission.GroupUser.UserId == 169).Select(x => new {
    x.Content,
    x.ListOrder,
    x.ContentTypeId,
    x.ContentId }) 
```

或者最好只抓取完整的 Content 对象，并使用您想要的任何列：

```
var contents = Contents.Where(x => x.GroupContentPermission.GroupUser.UserId == 169).ToList();

foreach (var content in contents)
    Console.Write(content.Content); 
```*

# eclipse - Eclipse 创建了太多（数百万）本地历史文件？

> ID：11620662
> 
> 赞同：2
> 
> 时间：2012-07-23T21:19:22.977
> 
> 标签：eclipse, rad

我的 Eclipse 环境不断创建本地历史文件，我不知道为什么。在一个月的时间里，我最终在 .metadata/.plugins/org.eclipse.core.resources/.history 中有几百万个文件

几乎所有这些都是小文件，一些 MANIFEST.MF 的副本。都是一样的。

我正在使用 RAD 7.5，带有 m2eclipse 插件（maven）和 ClearCase。我使用以下设置：

项目 | 自动构建已关闭 工作区 | 本地历史设置为仅保留 1 个历史版本，并且文件仅保留 1 天。

我有一个项目存活了几个月，创建了超过 2000 万个本地历史文件。这么多小文件对于 Windows 来说是一个严重的问题——当我试图删除它们时，我什至出现了蓝屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:23:17.210

我发现似乎在不断创建这些历史文件的项目存在问题。每个有这个问题的项目都包含一个空的配置文件

```
org.eclipse.wst.common.component 
```

实际上，该文件并不完全是空的。它的内容看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0"/> 
```

由于这些项目都是 JSF 项目，因此组件文件应如下所示。我手动编辑了文件（在 MyWebApp/.settings/org.eclipse.wst.common.component 中），重新启动 Eclipse，并立即注意到系统速度更快，并且不再创建历史文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
  <wb-module deploy-name="MyWebApp">
    <wb-resource deploy-path="/" source-path="WebContent"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/java"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/resources"/>
    <property name="context-root" value=".MyWebApp"/>
    <property name="java-output-path" value="WebContent/WEB-INF/classes"/>
    <property name="jsf.base" value="7.5.0.0"/>
    ... the above property (I think) is RAD specific
    ... many more property elements with name="jsf.*" 
  </wb-module>
</project-modules> 
```

如果使用 maven，则必须小心*source-path*属性。maven 的默认值可能是“/src/main/webapp”，但对于我的项目（以及上述配置），我需要 Eclipse 默认值“WebContent”（有时默认值是“Web Content”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:37:02.803

我猜这些文件中的大多数是由 ClearCase 操作创建的。如果您每天签入、签出、合并等，那么您可能每天都会代表您创建许多新文件。由于只有在退出 RAD/Eclipse 时才会压缩历史记录，因此您可能永远不会看到这些文件消失。

在周末后的星期一早上启动和关闭您的工作区（在 RAD 中没有工作：）。希望 ClearCase 不会介入并代表您自动执行某些操作。如果关闭后这些文件消失了，那么您的问题与 ClearCase（或大多数任何版本控制插件）的日常使用有关

# java - twitter4j 使用不同帐户登录

> ID：11620666
> 
> 赞同：0
> 
> 时间：2012-07-23T21:19:42.103
> 
> 标签：java, twitter, twitter-oauth, twitter4j

我对 twitter4j API 完全感到困惑，我想我真的可以使用你的帮助。

我正在尝试使用 twitter4j API 在 java 中构建桌面 twitter 客户端，但无论如何我都被迫使用 OAuth 方法。

在最简单的场景中，我只希望我的用户能够动态登录（例如在 tweekdeck 中）并发布推文。但是，使用 OAuth 身份验证，我的用户将被迫通过许多步骤来检索他的令牌，而没有明显的原因。

简而言之，例如，我不记得在使用 tweekdeck 时做过任何这些。我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-04T17:41:17.460

嘿，我现在正在做同样的事情。

我的解决方案：嵌入浏览器并从那里进行身份验证。

我正在使用 javafx，它的浏览器已经准备好，我经历了整个过程，我认为你不会找到更好的解决方案。

# c# - 使用 linq 将 XML 文档插入 SQL 列

> ID：11620672
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:20:05.847
> 
> 标签：c#, sql, xml, linq, xmlreader

我的一个 SQL 表中有一个 XML 类型的列。我想使用 linq 从后端将整个 XML 文件插入到该列的一个单元格中。有几个类似的问题，但没有一个对我有太大帮助。

提前致谢。

编辑：

好吧，我真的没有走得很远，但这里是我想要做的一个粗略的想法。

```
StagingDBDataContext ctx = new LoaderCommon.StagingDBDataContext();
upload_info ups = (from u in ctx.upload_infos where u.upload_id == info.upload_id select u).SingleOrDefault();
ups.upload_params = //xml text (huge file, 50,000 lines long) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:26:56.590

当你把它放在 SqlXml 上时，只需将 xml 作为字符串读取

```
private string LoadXml(string FileName)
{
    try
    {
        using (StreamReader reader = new StreamReader(FileName))
        {
            return reader.ReadToEnd();
        }
    }
    catch
    {
        return string.Empty;
    }
} 
```

# javascript - 连接恢复后上传文件

> ID：11620694
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:21:56.843
> 
> 标签：javascript, jquery, http, blueimp

我是使用[BlueImp](https://github.com/blueimp/jQuery-File-Upload)的新手，我正在寻找一种在连接恢复后上传视频的方法。

有没有办法上传具有此要求的视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:12:24.497

Blueimp Wiki 有关于如何处理恢复的文档。请参阅以下文档：

[https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads](https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads)

> 注意：只有支持 XHR 文件上传和 Blob API 的浏览器才支持分块文件上传，其中包括 Google Chrome 和 Mozilla Firefox 4+。

# python - 使用python 3进行递归布尔检查列表是否已排序

> ID：11620695
> 
> 赞同：0
> 
> 时间：2012-07-23T21:21:56.877
> 
> 标签：python, recursion, python-3.x, sortedlist

我正在尝试编写一个递归函数来执行布尔检查列表是否已排序。如果列表已排序，则返回 true；如果未排序，则返回 false。到目前为止，我试图了解我的“基本情况”是否正确（即我的第一个“if”语句）：

```
def isSorted(L, i=[]):
    if L[i] > L[i + 1]:
         return false
    else:
         return true 
```

我的初始`if "L[i] > L[i + 1]:"`作为递归的基本情况是否正确？

假设我的“基本情况”是正确的，我不确定如何递归地确定列表是否按非降序排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:40:29.000

这是我想出的。我将默认列表指定为`0`; 首先检查第一项是否是最后一项。如果没有，应该检查每个项目，直到它到达列表的末尾。

```
def isSorted(L):
    # Base case
    if len(L) == 1:
        return True

return L[0] <= L[1] and isSorted(L[1:]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:29:35.840

这就是我要开始的方式。编写一个具有以下签名的函数：

```
function isSorted(currentIndex, collection) 
```

在函数内部，检查是否`currentIndex`在集合的末尾。如果是，则返回 true。

`collection[index]`接下来，检查是否`collection[index+1]`正确排序。

如果不是，则返回 false
如果是，则返回`isSorted(currentIndex+1, collection)`

**警告**：这是递归的可怕用途

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:37:28.750

我同意@MStodd：递归不是在 Python 中解决这个问题的方法。对于很长的列表，Python 可能会溢出它的堆栈！但是对于短名单应该没问题，如果你的老师给你这个问题，你需要这样做。

以下是您应该如何考虑这个问题。每次递归调用你应该做以下三件事之一： 0）返回`False`，因为你发现列表没有排序；1）`True`因为您已达到基本情况而返回；2）分解工作并以某种方式使剩余的问题更小，直到达到基本情况。基本情况是不能进一步分解工作的情况。

这是一个大致的轮廓：

```
def recursive_check(lst, i):
    # check at the current position "i" in list
    # if check at current position fails, return False
    # update current position i
    # if i is at the end of the string, and we cannot move it any more, we are done checking; return true
    # else, if i is not at the end of the string yet, return the value returned by a recursive call to this function 
```

例如，这是一个检查字符串中是否有字符的函数`'@'`。如果字符串`True`中没有任何地方，它应该返回。`@`

```
def at_check(s, i):
    if s[i] == '@':
        return False
    i += 1
    if i >= len(s):
        return True
    else:
        return at_check(s, i) 
```

我写了上面的大纲，就像我上面给出的大纲一样。这是一个稍短的版本，它做同样的事情，但顺序不完全相同。

```
def at_check(s, i=0):
    if i >= len(s):
        return True
    if s[i] == '@':
        return False
    return at_check(s, i+1) 
```

编辑：请注意，我将`i=0`论点放入`at_check()`. 这意味着“默认”值`i`将是 0。调用此函数的人可以直接调用`at_check(some_string)`，而不是在第一次调用时显式传入 0；默认参数将提供第一个 0 参数。

我们真正需要添加一个的唯一时间`i`是当我们递归调用该函数时。我们加 1 的部分是重要的“分解工作”部分。我们尚未检查的字符串部分是 之后的部分`i`，每次调用该部分都会变小。我不知道你是否已经了解了“切片”，但我们可以使用“切片”来让字符串在每次调用时变得越来越小。这是一个以这种方式工作的版本；如果您还不知道切片，请忽略它。

```
def at_check(s):
    if s == '':  # empty string
        return True
    if s[-1] == '@':  # is last character '@'?
        return False
    return at_check(s[:-1]) # recursive call with string shortened by 1 
```

在这个版本中，空字符串是基本情况。空字符串不包含`@`，所以我们返回`True`。然后如果最后一个字符是`@`我们可以返回`False`; 但否则我们砍掉最后一个字符并递归调用该函数。在这里，我们通过使字符串越来越短直到我们完成来分解工作。但是将 1 添加到索引变量，并在字符串中移动索引，将是同一件事。

研究这些示例，直到您了解使用递归来分解工作并在每个递归调用上取得一些进展。然后看看你是否能弄清楚如何将这个想法应用到查找列表是否排序的问题上。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:58:52.430

不，基本情况将是当您到达列表末尾时，在这种情况下您返回 true。

否则，如果您正在查看的两个元素乱序返回 false。

否则，返回列表中下一个元素的递归调用结果。

# python - 计算任意维度数组的外积

> ID：11620697
> 
> 赞同：8
> 
> 时间：2012-07-23T21:22:07.030
> 
> 标签：python, arrays, numpy, scipy, slice

我有两个数组`A,B`，想在它们的最后一个维度上取外积，例如 `result[:,i,j]=A[:,i]*B[:,j]` 什么时候`A,B`是二维的。

如果我不知道它们是 2 维还是 3 维，我该怎么做？

在我的具体问题`A,B`中，从更大的 3 维数组中切片`Z`，有时可以用整数索引调用，有时`A=Z[:,1,:], B=Z[:,2,:]`用切片调用`A=Z[:,1:3,:],B=Z[:,4:6,:]`。由于 scipy “挤压”单例维度，我不知道我的输入将是什么维度。

我试图定义的数组外积应该满足

```
array_outer_product( Y[a,b,:], Z[i,j,:] ) == scipy.outer( Y[a,b,:], Z[i,j,:] )
array_outer_product( Y[a:a+N,b,:], Z[i:i+N,j,:])[n,:,:] == scipy.outer( Y[a+n,b,:], Z[i+n,j,:] ) 
array_outer_product( Y[a:a+N,b:b+M,:], Z[i:i+N, j:j+M,:] )[n,m,:,:]==scipy.outer( Y[a+n,b+m,:] , Z[i+n,j+m,:] ) 
```

对于任何 rank-3 数组`Y,Z`和整数`a,b,...i,j,k...n,N,...`

我正在处理的问题涉及二维空间网格，每个网格点都有一个向量值函数。我希望能够在前两个轴上的切片定义的区域上计算这些向量的协方差矩阵（外积）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:29:58.570

您可能对 einsum 有一些运气：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:13:14.620

在发现 numpy/scipy 数组中使用省略号后，我最终将其实现为递归函数：

```
def array_outer_product(A, B, result=None):
    ''' Compute the outer-product in the final two dimensions of the given arrays.
    If the result array is provided, the results are written into it.
    '''
    assert(A.shape[:-1] == B.shape[:-1])
    if result is None:
        result=scipy.zeros(A.shape+B.shape[-1:], dtype=A.dtype)
    if A.ndim==1:
        result[:,:]=scipy.outer(A, B)
    else:
        for idx in xrange(A.shape[0]):
            array_outer_product(A[idx,...], B[idx,...], result[idx,...])
    return result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:56:53.977

假设我对您的理解正确，几周前我在研究中遇到了类似的问题。我意识到克罗内克积只是一个保持维度的外积。因此，您可以执行以下操作：

```
import numpy as np

# Generate some data
a = np.random.random((3,2,4))
b = np.random.random((2,5))

# Now compute the Kronecker delta function
c = np.kron(a,b)

# Check the shape
np.prod(c.shape) == np.prod(a.shape)*np.prod(b.shape) 
```

我不确定你最后想要什么形状，但你可以使用数组切片与`np.rollaxis`, `np.reshape`, `np.ravel`（等）结合使用来随意调整。我想这样做的缺点是它做了一些额外的计算。这可能很重要，也可能无关紧要，具体取决于您的限制。

# javascript - 单击 HTML 按钮或 JavaScript 时如何触发文件下载

> ID：11620698
> 
> 赞同：574
> 
> 时间：2012-07-23T21:22:08.437
> 
> 标签：javascript, html, download

这很疯狂，但我不知道该怎么做，而且由于这些词很常见，很难在搜索引擎上找到我需要的东西。我想这应该是一个容易回答的问题。

我想要一个简单的文件下载，它会做同样的事情：

```
<a href="file.doc">Download!</a> 
```

但我想使用 HTML 按钮，例如：

```
<input type="button" value="Download!">
<button>Download!</button> 
```

同样，是否可以通过 JavaScript 触发简单下载？

```
$("#fileRequest").click(function(){ /* code to download? */ }); 
```

我绝对*不是*在寻找一种方法来创建一个看起来像按钮的锚，使用任何后端脚本，或者弄乱服务器标题或 mime 类型。

* * *

## 回答 #1

> 赞同：581
> 
> 时间：2013-09-07T22:54:45.253

`download`您可以使用 HTML5属性触发下载。

```
<a href="path_to_file" download="proposed_file_name">Download</a> 
```

在哪里：

*   `path_to_file`是解析为**[同一来源](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)****的 URL的路径。**这意味着页面和文件必须共享相同的域、子域、协议（HTTP 与 HTTPS）和端口（如果指定）。例外是[`blob:`](https://developer.mozilla.org/en-US/docs/Web/API/Blob)和[`data:`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs)（总是有效）和[`file:`](https://en.wikipedia.org/wiki/File_URI_scheme)（永远不会有效）。
*   `proposed_file_name`是要保存到的文件名。如果为空，浏览器默认使用文件名。

文档：[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download) , [HTML Standard on download](https://html.spec.whatwg.org/multipage/links.html#downloading-resources) , [HTML Standard on`download`](https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-download) , [CanIUse](https://caniuse.com/#feat=download)

* * *

## 回答 #2

> 赞同：330
> 
> 时间：2012-07-23T21:26:19.057

对于按钮你可以做

```
<form method="get" action="file.doc">
   <button type="submit">Download!</button>
</form> 
```

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2013-09-07T18:57:46.823

HTML：

```
<button type="submit" onclick="window.open('file.doc')">Download!</button> 
```

* * *

## 回答 #4

> 赞同：83
> 
> 时间：2018-04-19T09:08:52.807

一个简单的JS解决方案：

```
function download(url) {
  const a = document.createElement('a')
  a.href = url
  a.download = url.split('/').pop()
  document.body.appendChild(a)
  a.click()
  document.body.removeChild(a)
} 
```

* * *

## 回答 #5

> 赞同：73
> 
> 时间：2012-07-23T21:23:49.760

使用 jQuery：

```
$("#fileRequest").click(function() {
    // hope the server sets Content-Disposition: attachment!
    window.location = 'file.doc';
}); 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-03-06T16:57:46.660

您可以使用不可见 iframe 的“技巧”来做到这一点。当您将“src”设置为它时，浏览器会做出反应，就像您单击具有相同“href”的链接一样。与表单解决方案相反，它使您能够嵌入额外的逻辑，例如在超时后激活下载，满足某些条件等。

它也非常安静，没有像使用`window.open`.

HTML：

```
<iframe id="invisible" style="display:none;"></iframe> 
```

Javascript：

```
function download() {
    var iframe = document.getElementById('invisible');
    iframe.src = "file.doc";
} 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2018-04-08T19:34:24.253

**引导版本**

```
<a class="btn btn-danger" role="button" href="path_to_file"
   download="proposed_file_name">
  Download
</a> 
```

记录[在 Bootstrap 4 文档](https://getbootstrap.com/docs/4.0/components/buttons/)中，也适用于 Bootstrap 3。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2017-03-22T19:28:34.617

我认为这是您正在寻找的解决方案

```
<button type="submit" onclick="window.location.href='file.doc'">Download!</button> 
```

我有一个案例，我的 Javascript 生成了一个 CSV 文件。由于没有远程 URL 来下载它，我使用以下实现。

```
downloadCSV: function(data){
    var MIME_TYPE = "text/csv";

    var blob = new Blob([data], {type: MIME_TYPE});
    window.location.href = window.URL.createObjectURL(blob);
} 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-06-09T17:28:07.103

您可以隐藏下载链接并让按钮单击它。

```
<button onclick="document.getElementById('link').click()">Download!</button>
<a id="link" href="file.doc" download hidden></a> 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2013-07-22T03:23:04.080

关于什么：

```
<input type="button" value="Download Now!" onclick="window.location = 'file.doc';"> 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2021-07-29T17:51:01.497

您好，我只包含“下载”一词并且效果很好。

```
<a href="file.pdf" download>Download</a> 
```

所以在javascript中你可以使用以下内容：

```
function onStartedDownload(id) {
  console.log(`Started downloading: ${id}`);
}

function onFailed(error) {
  console.log(`Download failed: ${error}`);
}

var downloadUrl = "https://example.org/image.png";

var downloading = browser.downloads.download({
  url : downloadUrl,
  filename : 'my-image-again.png',
  conflictAction : 'uniquify'
});

downloading.then(onStartedDownload, onFailed); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-02-05T21:38:20.593

如果您正在寻找一个普通的 JavaScript（无 jQuery）解决方案并且不使用 HTML5 属性，您可以试试这个。

```
const download = document.getElementById("fileRequest");

download.addEventListener('click', request);

function request() {
    window.location = 'document.docx';
}
```

```
.dwnld-cta {
    border-radius: 15px 15px;
    width: 100px;
    line-height: 22px
}
```

```
<h1>Download File</h1>
<button id="fileRequest" class="dwnld-cta">Download</button>
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-07-03T07:17:18.017

在我的测试中，只要您使用相对链接，以下内容适用于所有文件类型和浏览器：

```
<a href="/assets/hello.txt" download="my_file.txt"><button>Download 2</button></a> 
```

*   `/assets/hello.txt`只是我网站上的相对路径。将其更改为您自己的相对路径。
*   `my_file.txt`是您希望文件在下载时被调用的名称。

## 解释

我注意到很多答案下都有评论说浏览器只会尝试打开文件本身而不是根据文件类型下载它。我发现这是真的。

我制作了两个按钮来使用两种不同的方法对其进行测试：

[![在此处输入图像描述](../Images/c89055e7176f9a09d971c80cfbb77bcb.png)](https://i.stack.imgur.com/1lmuI.png)

```
<button onclick="window.location.href='/assets/hello.txt';">Download 1</button>

<a href="/assets/hello.txt" download="my_file.txt"><button>Download 2</button></a> 
```

**备注**：

*   按钮 1 在新的浏览器选项卡中打开了文本文件。但是，按钮 1*会*下载无法自行打开的文件类型的文件（例如，.apk 文件）。
*   按钮 2 下载了文本文件。但是，按钮 2 仅在路径是相对路径时才下载文件。当我将路径更改为绝对路径时，浏览器会在新选项卡中打开它。

我在 Firefox、Safari 和 Chrome 上对此进行了测试。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-19T23:01:15.410

这最终对我有用，因为要下载的文件是在加载页面时确定的。

JS 更新表单的 action 属性：

```
function setFormAction() {
    document.getElementById("myDownloadButtonForm").action = //some code to get the filename;
} 
```

调用 JS 更新表单的 action 属性：

```
<body onLoad="setFormAction();"> 
```

带有提交按钮的表单标签：

```
<form method="get" id="myDownloadButtonForm" action="">
    Click to open document:  
    <button type="submit">Open Document</button>
</form> 
```

以下没有**工作**：

```
<form method="get" id="myDownloadButtonForm" action="javascript:someFunctionToReturnFileName();"> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-05-25T17:12:04.287

在您的`<body>`和`</body>`标签之间的任何地方，使用以下代码放入一个按钮：

```
<button>
    <a href="file.doc" download>Click to Download!</a>
</button> 
```

这肯定行得通！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-08-07T12:55:13.390

如果您不能使用表单，另一种使用[downloadjs](https://www.npmjs.com/package/downloadjs)的方法很合适。Downloadjs 在后台使用 blob 和 html 5 文件 API：

```
<div onClick=(()=>{downloadjs(url, filename)})/> 
```

*它是 jsx/react 语法，但可以在纯 html 中使用

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-04-23T09:48:29.657

`<a href="file.doc"><button>Download!</button></a>`
**这将下载文件，因为`.doc`不支持在浏览器中打开文件扩展名**。
按钮的最简单方法之一，这`text-decoration`将有助于更改或删除链接的文本装饰。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-02T14:46:05.957

不是对原始问题的真正答案，但它可能会帮助面临与我类似情况的其他人。

如果您要下载的文件不在同一来源上托管，但您希望能够下载它，则可以使用`Content-Disposition` [header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition)来执行此操作。确保服务器在响应文件请求时包含标头。

设置一个类似的值 `Content-Disposition: attachment`将确保文件将被下载而不是在浏览器中查看。

在这种情况下，一个简单的`<a href="http://www.notMyOrigin.com/file.txt">Download</a>`指向您的文件应该下载它。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-10T15:44:15.440

如果你想

```
<a href="path_to_file" download="proposed_file_name">Download</a> 
```

为了能够下载将由浏览器呈现的文件，但仍然希望在按钮中使用简洁的 javascript 函数；您可以在 html 中有一个不可见的链接，然后在 javascript 中单击它。

```
function download_file() {
  document.getElementById("my_download").click()
}
```

```
<a id="my_download" href="path_to_file" download="file_name" style="display:none;"></a>

<button onClick="download_file()">Download!!!</button>
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-01-23T00:13:43.390

您需要做的就是在您输入的文件名之后添加下载：

**前：**

```
<a href="file.doc">Download!</a> 
```

**后**

```
<a href="file.doc" Download >Download!</a> 
```

确保下载用大写字母书写，否则将无法正常工作。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-06-22T10:21:26.223

如果您有一个复杂的 URL，另一种方法是`file.doc?foo=bar&jon=doe`在表单中添加隐藏字段

```
<form method="get" action="file.doc">
  <input type="hidden" name="foo" value="bar" />
  <input type="hidden" name="john" value="doe" />
  <button type="submit">Download Now</button>
</form> 
```

灵感来自@Cfreak 不完整的答案

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2020-10-27T05:58:49.217

我想出的解决方案是您可以在锚标记中使用下载属性，但只有当您的 html 文件在服务器上时它才有效。但是你可能有一个问题，比如在设计一个简单的 html 页面时，我们如何检查你是否可以使用 VS code 实时服务器或括号实时服务器，你会看到你的下载属性可以工作，但如果你尝试简单地打开它只需双击 html 页面即可打开文件而不是下载文件。结论：仅当您的 html 文件不是服务器时，锚标记中的属性下载才有效。

* * *

## 回答 #23

> 赞同：-8
> 
> 时间：2017-08-27T06:08:34.293

对我来说，添加按钮而不是锚文本效果很好。

```
<a href="file.doc"><button>Download!</button></a> 
```

大多数规则可能不太好，但它看起来相当不错。

* * *

## 回答 #24

> 赞同：-11
> 
> 时间：2012-07-23T21:27:52.257

如果您使用`<a>`标签，请不要忘记使用指向文件的整个 url - 即：

```
<a href="http://www.example.com/folder1/file.doc">Download</a> 
```

# matlab - Parfor 循环不起作用，如何解决？

> ID：11620701
> 
> 赞同：0
> 
> 时间：2012-07-23T21:22:13.303
> 
> 标签：matlab, loops, for-loop, parallel-processing

我正在尝试并行化我的两个 for 循环并在远程集群上运行它。

我在开始时使用 matlabpool open local 12，最后使用 matlabpool close。我遇到的问题是我的 parfor 循环无法正确使用我的矩阵，我不确定如何重写它以使其工作。

```
H = hadamard(n);
H = [H;-H];
P = setdiff(P,H,'rows');
[r,c] = size(P);
A = zeros(n,r);
  parfor i=1:r
      for j=1:n
          d = P(i,:) + H(j,:);
          A(j,i) = sum(d(:) ~= 0);
      end
  end 
```

和：

```
u2Had = cell(2,r);
parfor i =1:r
    u2Had{1,i} = min(A(:,i));
    MinHadIndex = find(A(:,i) == u2Had{1,i});
    u2Had{2,i} = MinHadIndex;
end 
```

这些是我试图并行化的两段代码。非常感谢任何帮助，如果我需要添加更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:00:08.087

我不知道您在第一部分的问题是什么，因为它工作正常（也许如果您更好地定义了 P）

关于第二部分，您只能在狭窄的情况下向 parloops 发送信息和从 parloops 发送信息。

在这里将您的代码更改为以下内容：

```
u2HadT = cell(1,r);

parfor i =1:r
    temp = min(A(:,i));
    MinHadIndex = find(A(:,i) == temp);
    u2HadT{i} = {temp;MinHadIndex};   
end
u2Had = cell(2,r);
for i =1:r
    u2Had{1,i} = u2HadT{i}(1);
    u2Had{2,i} = u2HadT{i}(2);
end 
```

# javascript - 在 iFrame 内保持重定向

> ID：11620703
> 
> 赞同：1
> 
> 时间：2012-07-23T21:22:24.333
> 
> 标签：javascript, http, redirect, iframe

我正在构建一个应用程序，我想将另一个服务器的页面加载到我的页面中。我从中提取数据的特定页面取决于该外部服务器上正在运行的查询（具有 OAuth 访问权限）。获得该页面的 URL 后，我会将其加载到 iFrame 中并将其显示在我的页面上。

问题是，查询给我的 URL 实际上是一个页面，该页面在到达我真正想去的地方之前转发了 3 次。为了让事情变得更复杂，它还在初始页面上提供了框架破坏代码。我将我的页面设置为重定向到在页面卸载时返回 204 状态的页面，以便击败帧破坏者，但现在它只是卡在显示初始空白页面而不是我想要的内容，这是在三个结尾重定向。

我最初的想法是尝试在页面卸载时捕获传出位置请求的代码。我曾希望能够看到用户被重定向到哪里并在 iFrame 中加载该请求。重复 3 次以获得 iFrame 中的正确页面。然而，直观地说，这感觉它不应该能够工作，当然它不会因为让页面看到他们的用户在离开网站时要去哪里将是一个主要的隐私问题。

接下来，我在想也许我可以在每个新页面加载到 iFrame 时依次解析每个新页面以找到重定向脚本。但是，我很确定它是在服务器端完成的，因为查看我得到的代码并没有发现任何问题。

我开始寻找在 iFrame 中维持这种重定向的方法。也就是说，允许重定向发生，但强制它留在 iFrame 内，同时还阻止帧破坏代码执行任何操作。这将是最简单的解决方案，但我找不到一个好方法。现在，我只是在 iFrame 中加载了一个空白页面，我认为服务器端有一些东西在执行 iFrame 中没有运行的重定向。frame buster 代码只防止整个文档发生变化，而不是 iFrame。有没有好的方法可以做到这一点，还是我做错了事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:28:12.420

为了防止帧破坏，从[这里](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)：

```
<script type="text/javascript">
    var prevent_bust = 0  
    window.onbeforeunload = function() { prevent_bust++ }  
    setInterval(function() {  
      if (prevent_bust > 0) {  
        prevent_bust -= 2  
        window.top.location = 'http://server-which-responds-with-204.com'  
      }  
    }, 1)  
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:28:57.947

通过 curl 在本地加载第一页，剥离破坏代码，使所有链接成为绝对链接并在 iframe 中显示。

它应该按照预期重定向并做你快乐的事情。祝你好运，让文档中的所有 url 都是绝对的。不要忘记您可能需要通过在脚本标记之后粘贴您自己的代码来覆盖的 javascript url 和函数。

# c# - 数组越界？

> ID：11620715
> 
> 赞同：0
> 
> 时间：2012-07-23T21:23:36.837
> 
> 标签：c#, arrays

我总是让数组索引越界？

我尝试将 mymatches.Count 更改为 +1 和 -1 但它仍然超出范围。

为什么？

```
 public string[] readAllScripts()
    {
        string[] scripts = txt_script.Lines;

        int arraysize = scripts.Length;
        int x = 0;
        int y = 0;
        MessageBox.Show(arraysize.ToString());

        //string pattern = "[a-zA-Z]*";
        string[][] scriptarray = new string[arraysize][];

        for (int i = 0; i < scripts.Length; i++)
        {

            MatchCollection mymatches = Regex.Matches(scripts[i], "[a-zA-Z]*");

            scriptarray[i] = new string[mymatches.Count];

            foreach (Match thematch in mymatches)
            {
                scriptarray[x][y] = thematch.Value;
                y++;
            }
            x++;
        }

        return scripts;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:26:43.690

看起来您需要在循环中重新初始化 y ：

```
public string[] readAllScripts() 
{ 
    string[] scripts = txt_script.Lines; 

    int arraysize = scripts.Length; 
    int x = 0; 

    MessageBox.Show(arraysize.ToString()); 

    //string pattern = "[a-zA-Z]*"; 
    string[][] scriptarray = new string[arraysize][]; 

    for (int i = 0; i < scripts.Length; i++) 
    { 

        MatchCollection mymatches = Regex.Matches(scripts[i], "[a-zA-Z]*"); 

        scriptarray[i] = new string[mymatches.Count]; 

        int y = 0; 
        foreach (Match thematch in mymatches) 
        { 
            scriptarray[x][y] = thematch.Value; 
            y++; 
        } 
        x++; 
    } 

    return scripts; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T21:26:20.680

```
 scriptarray[i] = new string[mymatches.Count];
        y = 0;   // add this
        foreach (Match thematch in mymatches)
        {
            scriptarray[x][y] = thematch.Value;
            y++;
        } 
```

正如您所看到的，您可能已经使用了 a `for (int y = 0; y < mymatches.Count; y++)`，并且通常它有助于使声明（如 of `int y`）尽可能地保持本地化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T21:54:17.347

摆脱所有与 linq 的索引混淆：

```
string[][] scriptarray = txt_script
  .Lines
  .Select(
     line =>
      Regex
        .Matches(line, "[a-zA-Z]*")
        .Cast<Match>()
        .Select(m => m.Value)
        .ToArray())
  .ToArray() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T21:28:02.843

您需要将 y 重置为零

这边走

```
foreach (Match thematch in mymatches)
{
   scriptarray[x][y] = thematch.Value;
   y++;
}

y = 0;
x++; 
```

# html - html中颜色选择的效率。RGB vs 十六进制 vs 名称

> ID：11620719
> 
> 赞同：20
> 
> 时间：2012-07-23T21:23:49.057
> 
> 标签：html, css, performance

浏览器解析颜色的速度有区别吗？

例如，红色，我可以使用以下 CSS：

```
.red
{
    color:red;
    color:#ff0000;
    color:rgb(255,0,0);
} 
```

这些都产生相同的结果，文本颜色为红色，但在效率方面，最好搭配什么？

我意识到使用文本“红色”是最少的字符数，并且为了最小化最好选择的文档大小，这应该决定选择吗？

我问这个的唯一原因实际上是网站上的所有东西都有不同的颜色，所以如果有一个小的变化可能会增加几毫秒，那么可能值得使用最好的方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-12-17T17:52:49.497

我认为可以肯定地说，如果您在 CSS 中使用 #rrggbb 颜色哈希，浏览器会更快地呈现页面。

我做了一个超级简单的网页，通过 CSS 将背景和前景色放在 body 元素上，页面底部的一个小 JS 超时输出第一个渲染时间（不幸的是我使用了 performance.timing. msFirstPaint 值，所以它*只能*在 IE 中工作，但你可以从中得到要点）。我将页面渲染了十次并取平均值。然后我更改了 CSS 中的颜色名称（“绿色”和“白色”），将它们更改为十六进制值（#008000 和 #fff）并重复测量。使用名称，页面平均渲染时间为**41.6ms**；使用十六进制值：**14.5ms**。鉴于测试页面非常简单，只有*两种*颜色，我觉得这是一个非常显着的差异。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Color name test</title>
    <style>body{background-color:green;color:white;}</style>
</head>
<body>
    <h1 id="foo"></h1>
    <script>
        setTimeout(function ()
        {
            var start = performance.timing.domLoading;
            document.getElementById("foo").innerHtml = 
              performance.timing.msFirstPaint - start;
        }, 1000);
    </script>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T21:27:19.697

您将无法衡量任何重要网页上三个选项的任何差异。

与下载、解析和渲染页面的成本相比，下载和解析更多或更少字节的成本是微不足道的。

@Vinny 提供的性能测量支持这一点。

> 我问这个的唯一原因实际上是网站上的所有东西都有不同的颜色

如果你可以优化你的 CSS 以便不在许多不同的地方指定颜色（尽可能使用继承的属性），那可能会对整体性能产生更大的影响（需要下载和解析的 CSS 更少）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-23T21:29:59.147

`red`是最容易解析的，但需要在表中查找才能获得要使用的实际值。

`#ff0000`是最容易解析的，需要 3 次 Text -> Int 转换才能获得实际值。

`rgb(255,0,0)`是最难解析的，仍然需要 3 次 Text -> Int 转换才能获得实际值。

第二个可能是总体上最快的，因为该`red`方法（可能）需要散列操作（另一个 Text -> Int 转换，只是我们通常不考虑的），然后是查找。与 相比，`red`令牌也可以任意长`#ff0000`。

我不会评论微优化方面或其智慧。

# pandas - 处理 Pandas 中的缺失数据

> ID：11620721
> 
> 赞同：6
> 
> 时间：2012-07-23T21:23:50.867
> 
> 标签：pandas

我在`dataframe`Pandas 中加载了 200,000 x 500。有没有可以自动告诉我哪些列缺少数据的功能？还是我必须遍历每一列并逐个元素检查？

一旦我找到了一个缺失的元素，我如何定义一个自定义函数（基于列名和同一行中的一些其他数据）来进行自动替换。我看到了 fillna() 方法，但我认为它不需要 (lambda) 函数作为输入。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T21:46:55.280

就像是：

```
import pandas as pd
pd.isnull(frame).any() 
```

可能是您要查找丢失数据的内容

fillna 目前不采用 lambda 函数，尽管这是 github 上的一个开放问题。

您现在可以使用 DataFrame.apply 进行自定义填充。虽然您能更具体地说明您需要做什么来填充数据吗？只是好奇用例是什么。

# python - 为什么这个类似 python 的 ruby 脚本不起作用？

> ID：11620727
> 
> 赞同：4
> 
> 时间：2012-07-23T21:24:08.507
> 
> 标签：python, ruby, scope

我对 Ruby 中的作用域如何工作感到有些困惑。哪些 Ruby 范围规则会阻止以下代码打印出 x 的值？

```
#!/usr/bin/ruby

x = 5
def test
    puts "x = #{x}"
end

test    # => undefined local variable or method `x' for main:Object 
```

等效的 Python 脚本会打印 x 的值：

```
#!/usr/bin/python

x = 5
def test():
    print "x = %s" % x

test()  # => x = 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:26:12.307

这就是所谓的“范围门”。ruby 中有三个门：方法、类或模块的定义。这意味着在该定义内部，来自外部范围的本地人是不可见的。

之所以如此，是因为当范围发生变化时，当前的绑定集会被一组新的绑定替换，并且无法轻松访问。

有关更多信息，请参阅“[元编程 Ruby：像 Ruby 专家一样编程](http://pragprog.com/book/ppmetr/metaprogramming-ruby)”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T21:35:31.530

有关 Ruby 的作用域和作用域门控的更多信息，请参阅“ [Ruby 类、包含和作用域](https://stackoverflow.com/a/7549843/502458)”。

有几种方法可以为您的测试功能提供可见性。一种是使变量成为实例变量：

```
#!/usr/bin/ruby

@x = 5
def test
    puts "x = #{@x}"
end 
```

另一个是使用带有 lambda 的闭包：

```
#!/usr/bin/ruby

x = 5
test = lambda do
    puts "x = #{x}"
end

test.call 
```

或 Proc.new()

```
#!/usr/bin/ruby

x = 5
test = Proc.new do
    puts "x = #{x}"
end

test.call 
```

关于 lambda 和 Proc.new 的区别，请参见“[何时使用 lambda，何时使用 Proc.new？](https://stackoverflow.com/a/723/502458) ”。

# c++ - 用于 C++ 的快速、大且可扩展的几何库

> ID：11620732
> 
> 赞同：7
> 
> 时间：2012-07-23T21:24:13.443
> 
> 标签：c++, c, 3d, geometry, computational-geometry

我搜索了很多主题并遇到了很多主题，例如“易于使用的几何库”。

我正在寻找除此之外的东西。我计划编写复杂的应用程序来处理 3D 数据（比如说 blender、3ds max、maya 或 houdini）。我正在寻找可在我的项目中使用的最佳可用几何库（它可以是免费的或商业的）。我不在乎它是否易于使用，或者它是否又难又复杂。

在这个库之上，我想构建这个应用程序的基本功能（如建模、布尔运算、三角函数、纹理、重新拓扑工具等）。

关键是：

*   它应该很快
*   它应该是可扩展的（从长远来看 - 如果它不提供某些功能 - 它应该是进一步开发的良好基础）
*   它应该允许处理大多数几何类型（三角形、多边形、退化元素）
*   它应该有很多实现的算法来处理这个几何图形
*   如果它可以处理 NURBS、Bezier 曲线、点云、体素等，那就太好了。

**当然，这可能不是一个库。但是，如果这些库能够无缝地协同工作，那就太好了。**

我知道有 boost:geometry、CGAL、OpenMesh 和 PCL。有没有其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T11:40:45.543

如果您确实需要`BIG`（CAD 级）库来进行全方位的几何操作，请查看以下两个：

1.  [Spatial Corporation 的ACIS](http://www.spatial.com/products/3d-acis-modeling)：doc.spatial.com/qref/ACIS/html/

2.  西门子的[Parasolid](http://www.plm.automation.siemens.com/en_us/products/open/parasolid/?stc=usiia400121&gclid=CL3Ouqmgt7ECFc0vmAodLwgA8g)

这两个库都用于高端 3D 建模软件。

# ruby-on-rails - koala gem in ruby on rails

> ID：11620733
> 
> 赞同：1
> 
> 时间：2012-07-23T21:24:21.050
> 
> 标签：ruby-on-rails, ruby

我正在制作一个 Rails 网站，我想与 facebook 交互并从我看过本教程的页面中获取一些照片，但它只显示朋友 [https://github.com/arsduo/koala/](https://github.com/arsduo/koala/) 我已经完成了这些步骤

```
@graph = Koala::Facebook::API.new(oauth_access_token)
profile = @graph.get_object("me")
friends = @graph.get_connections("me", "friends")
@graph.put_connections("me", "feed", :message => "I am writing on my wall!") 
```

现在的问题是如何使用 koala gem 从 facebook 页面获取照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:39:09.200

假设您具有所需的访问权限：

`photos = @graph.get_connections fb_page_id, "photos"`

[Facebook Graph Exlorer](https://developers.facebook.com/tools/explorer)是一个试验的好地方。

# sql - 重用表变量？

> ID：11620736
> 
> 赞同：2
> 
> 时间：2012-07-23T21:24:36.400
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在某个日期时间段（即 05/01/2012 到 05/31/2012）的数据库上运行复杂查询列表。然后我需要对 06/01/2012 到 06/30/2012 运行相同的查询。然后加入结果以用于报告目的。

在查询中，我使用了几个表变量来保存临时数据。因为数据库很大，所以表变量也很大。有没有办法可以重用这些表变量？

DROP，截断将不起作用。我必须从@table 中删除所有数据吗？如果是这样，它会很慢吗？因为它有很多数据，我是否必须对 @table 进行批量删除？

顺便说一句，由于系统的设计方式，我必须将所有查询放在一个 SP 文件中，不能调用函数或其他 SP。

谢谢

==============================

查询中没有循环。它的工作原理如下：

选择.....选择......更新......加入......

对日期 05/01/2012 到 05/31/2012 进行一组查询。然后需要对 06/01/2012 到 06/30/2012 进行同一组查询。

在查询中，里面有很多逻辑，所以我们不能将这两个组合成一组查询。由于系统设计的原因，我们不能调用函数或SP进行查询。必须执行第一组查询，然后依次执行第二组查询。

问题是数据太多，@table 太大。如果我们可以重用@table，它将解决问题。

谢谢

================================

是的，现在，相同的代码，对于 2 个不同的日期时间间隔重复两次。但是，在代码中，它有一些逻辑内部，基于日期时间的差异不同的过程。抱歉，我无法发布实际代码。但是，这个过程就像一个SP，以不同的日期时间段作为参数。

但是，在这种情况下我不能使用 SP/function，所以必须对相同的代码进行两次硬编码。理想情况下，每次我重复代码时都需要使用不同的@table（现在，我需要重复3次），但是由于数据大小，如果我重复3次@table太大（每次需要多个@table做逻辑部分）。

也许我最好使用临时表？所以我可以在开始新的“重复”时放弃它？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T21:45:50.260

表变量没有记录在当前数据库中，也不受事务的影响。为什么你认为截断或删除会比删除更快？你试过这个吗？

```
DECLARE @f TABLE(id INT);

INSERT @f SELECT 1;

BEGIN TRANSACTION;
DELETE @f WHERE id = 1;
ROLLBACK TRANSACTION;

SELECT id FROM @f; 
```

没有结果。现在，如果删除已完全记录在当前数据库中（这`DELETE`比`TRUNCATE`普通用户表慢），您会期望`DELETE`已回滚，并且`SELECT`应该已返回数据。但是不，删除不是事务的一部分。那么，您可以从逻辑上得出结论，如果允许后者，即使不相同`DELETE`，`TRUNCATE`也会非常相似。

如果必须使用表变量，只需使用删除即可。如果您发现它很慢，可能不是因为删除，可能是因为您在循环中重复使用表变量，而不是使用基于集合的操作。但是，当然，您比我们任何人都处于更好的位置来测试如果您使用两个不同的 @table 变量与重新使用单个表变量并在两者之间发出删除，您的代码会慢多少。但我仍然认为你的整个过程需要重新调查，因为它在很多层面上对我来说都不是最理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:46:50.430

当然可以，但是您真正想要的不是表参数，而是需要一个临时表。

```
CREATE TABLE #my_temp_table (column1 int, column2 varchar(max), ...)
INSERT INTO #my_temp_table (column1, column2) VALUES (...)
-- Use the temporary table here
DELETE FROM #my_temp_table
INSERT INTO #my_temp_table (column1, column2) VALUES (...)
-- Use the temporary table again
DROP TABLE #my_temp_table 
```

编辑：提交者可能会说“我不能使用表变量，因为它被传递给我的带有 READONLY 标志的存储过程”。在这种情况下，他可能会从将其转换为临时表中获得一些好处。

附带说明一下，尽管 SQL Server 的文档声称情况并非如此，但我已经看到临时表比表变量执行得更好的实例。我相信这是因为我把我的 TEMPDB 放在了一个单独的磁盘上，它有很多可用的 IO 容量。

但是请记住，临时表存在命名问题——如果存储过程试图为临时表创建命名冲突，您可以锁定它。表变量不会遇到这个问题。

# sql - 如何从一组列中选择非 NULL 值？

> ID：11620738
> 
> 赞同：1
> 
> 时间：2012-07-23T21:24:41.547
> 
> 标签：sql, tsql

我有 1 + 5 列的表格，如下所示。

MemberID ==> 代表 Member_ID

值 1 ==> 代表值 1

Value2 ==> 代表 Value2

Value3 ==> 代表 Value3

Value4 ==> 代表 Value4

Value5 ==> 代表 Value5

在任何给定时间，只有一列不为空（在 Value1、Value2、Value3、Value4 和 Value5 的集合中）。

我想运行一个查询，其中我将结果作为 Member_ID, Value ，其中值是来自 5 个值列中的任何一个的非空值。

如何在 TSQL 中做到这一点？谢谢你，史密斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:26:19.677

```
select memberID, coalesce(value1, value2, value3, value4, value5)
from myTable 
```

如果存在所有值都可能为空的可能性，您可能希望默认为一个值。

```
select memberID, coalesce(value1, value2, value3, value4, value5, <default>)
from myTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T10:10:46.267

你可以试试case语句

```
select memberID,
       case
           when Value1 is not null then
               Value1
           when Value2 is not null then
               Value2  
           when Value3 is not null then
               Value3
           when Value4 is not null then
               Value4
           when CValue5 is not null then
               Value5
       end as [Value]
from myTable 
```

如果所有值都为空，还可以在 case 语句中添加“else”以返回默认值。

# url - Symfony2：如何将 url 查询字符串参数传递给控制器 ？

> ID：11620739
> 
> 赞同：21
> 
> 时间：2012-07-23T21:24:41.407
> 
> 标签：url, symfony, parameters, routing, query-string

也许我遗漏了一些东西，但似乎没有办法在 Symfony2 的路由中定义查询字符串参数，以便可以将它们传递给控制器​​。

例如，不要生成类似`/blog/my-blog-post`（来自 Symfony2 的[路由文档](http://symfony.com/doc/master/book/routing.html)）的 URI 并将其传递给以下路由：

```
# app/config/routing.yml    
blog_show:
    pattern:   /blog/{slug}
    defaults:  { _controller: AcmeBlogBundle:Blog:show } 
```

我更愿意生成一个类似`/blog?slug=my-blog-post`. 问题是我找不到`slug`在路由配置文件中定义参数的任何地方（如上面的 {slug} 对应项）。

也许这是故意的，但是在查询字符串中使用 GET 参数的最佳实践是什么？

[文档在使用查询字符串生成 URL](http://symfony.com/doc/master/book/routing.html#generating-urls-with-query-strings)中确实提到了它们，那么如何将它们传递给控制器​​？

我可以找到提到它们的地方是[Symfony2 和 HTTP Fundamentals](http://symfony.com/doc/current/book/http_fundamentals.html)：

```
use Symfony\Component\HttpFoundation\Request;

$request = Request::createFromGlobals();

// retrieve GET variables
$request->query->get('foo'); 
```

这是在控制器内使用它们的最佳实践吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-23T21:39:52.847

在扩展 Symfony\Bundle\FrameworkBundle\Controller\Controller 的控制器中使用 GET / POST 参数：

```
public function updateAction()
{
    $request = $this->getRequest();
    $request->query->get('myParam'); // get a $_GET parameter
    $request->request->get('myParam'); // get a $_POST parameter
    ...
} 
```

对于不扩展 Symfony 基本控制器的控制器，将请求对象声明为操作方法的参数并按上述方式进行：

```
public function updateAction(Request $request)
{
    $request->query->get('myParam'); // get a $_GET parameter
    $request->request->get('myParam'); // get a $_POST parameter
    ...
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-23T21:29:57.680

您不能在路由配置文件中指定查询字符串参数。您只需从控制器中的 $request 对象中获取它们：（`$request->query->get('foo');` 如果`null`它不存在，则为）。

要生成具有给定参数的路线，您可以在树枝模板中执行此操作，如下所示：

```
{{ path(route, query|merge({'page': 1})) }} 
```

如果您想在控制器中生成路由，就像在您链接的文档中一样：

```
$router->generate('blog', array('page' => 2, 'category' => 'Symfony')); 
```

将生成路由`/blog/2?category=Symfony`（路由定义中不存在的参数将作为查询字符串传递）。

# drupal-7 - Drupal 7 views 3 - 如何根据另一个视图结果排除一个视图中的结果

> ID：11620742
> 
> 赞同：2
> 
> 时间：2012-07-23T21:25:11.867
> 
> 标签：drupal-7, drupal-modules, drupal-views

我有两个观点：

1.  查看按日期列出所有内容。
2.  查看显示顶部查看的节点的位置（仅限 2 个节点）。

如何从视图 #1 中排除已经在视图 #2 中的节点？是否有任何模块可以做到这一点？或者视图是否已经内置？

注意：我使用的是views 3的最新开发版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T09:51:40.730

我刚刚发现了一个模块，它试图从视图中排除以前在同一页面上显示的节点。它是 Drupal 7 的开发，但似乎做了它应该做的事情。 [http://drupal.org/project/views_exclude_previous](http://drupal.org/project/views_exclude_previous)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:03:54.853

我不知道有什么模块可以做到这一点，但是您可以添加一个过滤器以不显示前 2 个节点？

# mysql - 加入记录以获取最新信息

> ID：11620743
> 
> 赞同：0
> 
> 时间：2012-07-23T21:25:18.693
> 
> 标签：mysql

我有桌子：

用户

```
id | first_name | last_name
 1   Johnny       Steve
 2   Kim          Borden 
```

销售量

```
id | user_id | service_id | date
 1    1         2           2012-02-12
 2    1         6           2012-04-21 
```

我想检索附有最近销售信息的用户列表。如果没有找到，则为 NULL。

到目前为止我所拥有的：

```
SELECT
    users.*,
    sales.*,
FROM
    users
LEFT JOIN
    sales ON users.id=sales.user_id 
```

但这为约翰尼创造了两项记录，因为这两项是销售额。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:47:55.653

Without the use of analytic functions, this is a pretty basic way to do what you're trying to do:

```
select users.*, sales.*
from users, 
(select a.*
    from sales a,
        (select user_id, MAX(date) as mostRecentDate
        from sales
        group by user_id) b
    where a.user_id = b.user_id
      and a.date = b.mostRecentDate) sales
where users.id = sales.user_id; 
```

I don't have a mysql server available to me at the moment to test this, if it gives any errors, just post back.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:40:42.583

```
SELECT 
        u.*,
        SUBSTRING_INDEX(GROUP_CONCAT(s.id ORDER BY s.date DESC,s.id DESC),',',1) as sale_id,
        SUBSTRING_INDEX(GROUP_CONCAT(s.service_id ORDER BY s.date DESC,s.id DESC),',',1) as service_id,
        SUBSTRING_INDEX(GROUP_CONCAT(s.date ORDER BY s.date DESC,s.id DESC),',',1) as sale_date
FROM users u 
LEFT JOIN sales s ON s.user_id = u.id
GROUP BY u.id; 
```

这是您在没有时间的情况下最接近“最后一次销售”的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:34:23.747

SELECT u.id as id, u.first_name as first_name, u.last_name as last_name, MAX(s.date) as `date` FROM users as u LEFT JOIN sales as s on u.id = s.user_id GROUP BY id

查看此链接以获取更复杂的每组查询结构类型的前 N ​​个。

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:42:40.427

```
 SELECT u.*, s.*,
    FROM users u
    LEFT JOIN 
(select max(id) as sales_id, user_id from sales group by user_id) sa 
on sa.user_id = u.id
    LEFT JOIN sales s ON sa.user_id=s.user_id and s.id=sa.sales_id 
```

编辑：如果您将日期设置为 TIMESTAMP，则可以在 MAX() 中使用它而不是 id。如果您保留它作为日期，您仍然可以使用它，但是您将获得额外的记录，以防一天内有多个用户销售

# facebook - facebook 插件 - 分享和喜欢

> ID：11620744
> 
> 赞同：1
> 
> 时间：2012-07-23T21:25:20.277
> 
> 标签：facebook, button, share, facebook-like

我有一个带有照片库的网页。目前上传了 3500 多张照片，所以每张照片（帖子）都有他唯一的链接。facebook 评论框和点赞 + 发送按钮正在工作，我成功实现了 META 元素（标题、描述和缩略图），但我遇到了一些麻烦或误解。

当有人喜欢这张照片时，为什么帖子没有显示在他的新闻提要上？它只显示在他自己的墙上。我想要这样的东西，当你在 yo*tube 上分享视频时，视频会立即显示在你的墙上和新闻源上，这样每个人都可以看到分享的视频。

我想进行一些额外的访问，但是使用这种方法，我只有在有人访问其他人的墙时才会得到。

喜欢和分享按钮有什么区别吗？如果是，我在哪里可以找到分享按钮插件？

这是我的代码：

```
<fb:like href='http://www.example.com/index.php?id=XX' send='true' width='450' show_faces='false'></fb:like> 
```

这是 XFBML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:16:42.327

当有人点击你的 Like 按钮时，新闻故事也应该出现在他们一些朋友的 News Feed 中，但这将是不一致的，并且基于 Facebook 的[Edge Rank Algorithm](http://www.insidefacebook.com/2011/12/27/edgerank-and-graph-rank-defined/)。

Facebook 不再正式支持分享按钮，但现在您仍然可以使用 JavaScript 实现它：

```
<a name="fb_share" type="button" share_url="http://www.yourdomain.com">Share</a> 
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
</script> 
```

或者通过链接到 Sharer.php 应用程序：

```
<a href="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.yourdomain.com" target="_blank">Share</a> 
```

# android - Eclipse 中的 Android 构建未获取对链接项目的更改

> ID：11620745
> 
> 赞同：1
> 
> 时间：2012-07-23T21:25:23.740
> 
> 标签：android, eclipse, libgdx

> **可能重复：**
> [当我在 Android 上运行 Libgdx 项目时，代码中的更改没有反映出来](https://stackoverflow.com/questions/12160191/changes-in-code-arent-reflected-when-i-run-libgdx-project-on-android)

几个月来，我一直在 Eclipse 中开发一个 Android 应用程序。最近，我遇到了一个问题，我对源代码进行了更改，然后按 Ctrl+F11 在物理设备上运行应用程序，但我最近的更改没有反映出来。据我所知，我的代码正在编译，但没有重新打包到 APK 中。

我使用的是 libGDX，所以我的 Android 应用程序实际上包含两个项目，一个是 Android，一个是与平台无关的位（以及 libGDX 库）。Android 项目包括一个常见的“项目”（在 Java 构建路径首选项中）。

当我对一些非 Android 特定的通用代码进行更改时，我相信 Android 项目的构建器正在“看到”更改，正如“控制台”日志所示（因为我在`Window -> Preferences -> Android -> Build: Build Output`设置中启用了 Verbose 构建）：

```
[2012-07-23 13:42:04 - Project - Android] Starting incremental Package build: Checking resource changes.
[2012-07-23 13:42:04 - Project - Android] Skipping over Post Compiler. 
```

（“Project - Android”是项目的 Android 特定部分的名称。）

如果我在进行更改后尝试运行 Android 构建，我会收到“您没有进行任何更改”警告（因此它只是将现有实例带到设备上，而不是杀死它并启动新代码）：

```
[2012-07-23 13:46:44 - Project - Android] Application already deployed. No need to reinstall. 
```

如果我明确地清理构建 ( `Project -> Clean`)，我所做的任何更改都会被合并，并且生成的 Android 项目会随着这些更改一起部署。所以，我相信基本路径和构建基础设施工作正常，只是增量更新有问题。注意我已经`Project -> Build Automatically`检查过了。

如果我构建一个“桌面”版本（如 Android 版本，但包含公共代码的第三个项目），则在更改公共代码后增量构建工作。因此，问题似乎出在构建系统的特定于 Android 的部分（也许？）。

是否有任何日志我可以查看以获取有关构建系统如何决定需要重建哪些内容的更多详细信息？

我正在使用 Eclipse 靛蓝：

```
 Eclipse IDE for Java Developers

 Version: Indigo Service Release 2
 Build id: 20120216-1857 
```

我正在使用最新的 Android SDK（SDK 工具 rev 20，并针对 SDK 16 进行编译）。

## 更新

其他 libGDX 用户已将其缩小到 SDK v20：[http ://www.badlogicgames.com/forum/viewtopic.php?f=11&t=4627&hilit=build+project+linked](http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=4627&hilit=build+project+linked)

感谢 libGDX 论坛上的人们，在 google 上提交了一个错误： ~~[http](http://code.google.com/p/android/issues/detail?id=34305)~~ ://code.google.com/p/android/issues/detail ?id=34305（反对： [http://code .google.com/p/android/issues/detail?id=36174](http://code.google.com/p/android/issues/detail?id=36174)）

# wcf - Excel-VBA REST WCF 适用于第一次调用，但后续调用返回缓存（非当前）数据

> ID：11620747
> 
> 赞同：2
> 
> 时间：2012-07-23T21:25:46.190
> 
> 标签：wcf, rest, excel, vba

我有一个基本的 WCF 客户端服务，格式如下。第一次调用它时，它会从远程服务器返回正确的数据。但是数据经常变化。在随后的调用中，它返回与第一次调用相同的数据。因此，Excel 似乎返回缓存数据。
如果我从 Fiddler 或浏览器运行相同的 WCF 过程，它似乎总是返回当前/刷新的数据（所以我认为问题出在 Excel 中，而不是服务器中）。如何强制 Excel VBA “刷新”调用而不是从缓存中获取数据？注意：这将分发给各种最终用户，因此我无法更改客户端配置。

```
Public Function CallWCF() As String
   Dim HttpReq As Object
   Set HttpReq = CreateObject("MSXML2.XMLHTTP")
   HttpReq.Open "GET", "http://ws.mydomain.com/Rest.svc/getmydata"
   Call HttpReq.Send
   Do While HttpReq.readyState <> 4
     DoEvents
   Loop
   Dim resp As String
   resp = HttpReq.ResponseText
   CallWCF = resp
   Set HttpReq = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:47:37.793

从[stackoverflow.com/q/11526810/190829](https://stackoverflow.com/q/11526810/190829)看来，添加： `httpReq.setRequestHeader "If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"` 解决了我的 PC 上的问题（不知道它是否适用于具有不同浏览器的所有 PC）。另一个2： `HttpReq.setRequestHeader "Cache-Control", "no-cache"`似乎 `HttpReq.setRequestHeader "Pragma", "no-cache"` 没有帮助。

我还尝试在 URL 中附加一个可以更改每个请求（例如时间或随机数）的虚拟参数，这也可以。但是我认为这将需要更改我所有操作的服务器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T19:00:51.510

我在使用 GET 调用资源并缓存响应时遇到了类似的问题。我解决它的方法是调用“PUT”（或任何其他不受支持的东西），然后调用有用的“GET” - 这样它将强制建立新的连接，从而切断持久性。

# javascript-events - 如何使用 JS 触发用户离开站点事件

> ID：11620748
> 
> 赞同：3
> 
> 时间：2012-07-23T21:25:45.873
> 
> 标签：javascript-events

我有一个网站，它为在我的网站中填写表格的用户提供财务搜索服务。通过与提供程序进行直接 xml 集成来完成搜索，并且此类搜索可能需要长达一分钟才能完成。如果用户决定在搜索完成之前离开网站，我想通知服务器。

我使用了 onunload js 事件，该事件有效，但是，当服务器完成财务搜索并将用户重定向到“找到服务”页面时，它也会触发。因此，尽管用户从服务器端重定向到“找到服务”页面，但我还是会收到每个用户的用户离开站点通知。

当服务器响应并重定向到“找到服务”页面时，检测用户是否离开网页而不触发事件的最佳方法是什么？

我阅读了 Scott Mitchell 的文章“离开页面时提示用户保存”（[http://www.4guysfromrolla.com/webtech/100604-1.shtml](http://www.4guysfromrolla.com/webtech/100604-1.shtml)），但是，我无法仅在用户离开时触发事件网站。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:51:38.610

你可以用 AJAX 发布表单吗？您将能够停用您的卸载处理程序。以下是它与 jQuery 的工作方式：

```
$('#myform').submit(function() {
  $.post('/form-action', $(this).serialize(), function(responseText) {
    $(window).unbind('unload');

    // update the page with the response
    $('#response').html(responseText);

    // or redirect to the result page: window.location = 'new location';
}); 
```

# mysql - 一种具有多个数据库的数据库结构，还是一个全局数据库？

> ID：11620749
> 
> 赞同：0
> 
> 时间：2012-07-23T21:25:52.127
> 
> 标签：mysql, database, oracle

问题是这样的：

我们应该为每个垂直行业提供 1 个数据库还是为所有内容提供 1 个数据库？网站将包含几个出售广告。

A）每个垂直示例 1 db 含义，当您查看这些页面时： [http](http://www.site.com/cars) ://www.site.com/cars http://www.site.com/boats

/cars 从字面上连接到数据库，可以说“db_cars”，并且该数据库只有汽车数据，没有其他内容。/boats 从字面上连接到数据库，可以说“db_boats”，并且该数据库只有船数据，没有其他内容。

两个数据库具有相同的结构，表名“item”“seller”等

或者

B）1 db for everything example /cars 连接到“db_everything”并根据链接到 items 表的表过滤汽车，因此 WHERE item_type="cars" /boats 连接到“db_everything”并根据链接到的表过滤汽车项目表，所以 WHERE item_type="boats"

那你会选A还是B？任何一个优点/缺点？它是 MySQL、Oracle 还是 Postgres 是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:31:34.153

只是我的两分钱：

我会为不同的应用程序使用不同的数据库，而不是在一个应用程序中使用不同类型的数据。

您想在同一个应用程序中显示船只和汽车吗？在同一页上？你曾经做过一个应该返回汽车和船只的 SQL 查询吗？

还是您基本上将船只和汽车视为完全独立的网站？如果它们是完全独立的，并且可以单独支持，并且可以单独修改应用程序，那么使用单独的数据库是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:36:12.890

想到的一个考虑因素是站点代码的可重用性。控制数百个类别的单独数据库用户名：密码组合听起来很烦人。

在性能方面，我认为分离变得无关紧要，除非您的单独数据库位于单独的机器上。

还要看你的用途...

从长远来看，将它们保存在一个数据库中可能会给您更多的灵活性和机会来生成趋势数据或交叉链接类别。

但是，如果您正在制造引擎以向特定行业的其他公司销售，那么每个垂直方向 1 db 是有意义的。

我自己的倾向是情况 B，除非有特殊需要告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:38:51.357

只要数据库在同一用户下的同一台服务器上，您仍然可以进行连接等。但是，如果您的网站的一个部分需要超过 30 个表格，我只会推荐这个。当您必须直接在数据库中工作时，它使管理变得容易。

但是，如果您的网站不需要如此复杂的程度，我建议您不要这样做，这不值得麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:44:35.053

> *它是 MySQL、Oracle 还是 Postgres 是否重要？*

绝对地。

Oracle 中的“数据库”一词的含义与大多数其他数据库中的完全不同。如果您正在考虑 MySQL 或 Postgres（或 SQL Server）中的“数据库”，您通常会认为 Oracle 中的“模式”（=用户）。

在 PostgreSQL 中，您无法进行跨数据库查询。因此，对于分离，模式可能更好（因为它更灵活）。

关于您的实际设计决策：听起来您可能希望将所有内容都放在一个数据库/架构中，但没有足够的信息来真正回答这个问题。

我认为 wegjprgm 的回答几乎可以确定。

# php - 是否有一个开放的图形“人”对象？

> ID：11620756
> 
> 赞同：1
> 
> 时间：2012-07-23T21:25:59.290
> 
> 标签：php, facebook-opengraph

假设我有一个“拥抱”应用程序，当你拥抱你的一个朋友时，它会告诉你。设置接收拥抱动作的“人”对象的最佳方法是什么？

例如：“拥抱”动作->“人”对象-“乔治拥抱苏西”

profile 对象似乎是最佳匹配，但似乎不适用于 facebook 个人资料页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:30:52.893

看起来没有任何适合“人”的[内置 Open Graph 对象类型，而您找到的](https://developers.facebook.com/docs/opengraph/objects/builtin/)[`profile`类型](https://developers.facebook.com/docs/opengraph/objects/builtin/#external_profile)是用于外部配置文件的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:54:40.483

你可以试试这个： http: [//ogp.me/#type_profile](http://ogp.me/#type_profile)和[http://ogp.me/ns/fb#profile_id](http://ogp.me/ns/fb#profile_id) profile_id 可能会成功。

# java - 使用ant运行自定义java任务找不到类文件

> ID：11620759
> 
> 赞同：0
> 
> 时间：2012-07-23T21:26:10.507
> 
> 标签：java, ant

我正在尝试使用 ant 运行自定义 java 任务，自定义任务已成功编译到 .class 文件中。此自定义任务将调用应用程序中的另一个类，理论上通过命令行运行该程序。

```
<?xml version="1.0"?>
   <project default="main" name="myproject">
    <property name="distDir" location=".\dist\" />
<property name="mainDir" location=".\" />
<property name="host" value=""/>
<property name="port" value=""/>
<property name="dir" value=""/>
<property name="startTest" value=""/>
<property name="endTest" value=""/>
<property name="testOnly" value=""/>
<property name="userName" value=""/>
<property name="passwd" value=""/>
    <taskdef name="mytask" classname="Classrunner">
        <classpath>  
            <fileset dir="${distDir}>
                <includes="*.jar">
            </fileset>
         </classpath>
    </taskdef>
    <target name="main">
        <mytask host="${host}" port="${port}" dir="${dir}" startTest="${startTest}" endTest="${endTest}" testOnly="${testOnly}" userName="${userName}" passwd="${passwd}"/>
    </target>
</project> 
```

我的 ant 文件的 taskdef 部分指定了一个文件集，该文件集包含一个目录，其中包含所有 jar 以运行我正在尝试运行的应用程序。我遇到的问题是每当我通过命令行调用 ant 并传递所有正确的参数时，我都会收到一条错误消息“java.lang.NoClassDefFoundError: com/pega/fuzz/player/CustomClass”

CustomClass 是我在自定义文件中调用的类，它存在于所有 jar 文件的该目录中，所以我不确定如何指定它的位置，因为 Ant 找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:34:42.680

工作中的某个人帮助我找到了解决此问题的方法。

最好的方法是通过 .bat 文件设置环境变量类路径，如下所示：

```
set "CURRENT_DIR=%~dp0"
cd %CURRENT_DIR%
set "CLASSPATH=%CURRENT_DIR%\dist\bsf-2.3.0.jar;%CURRENT_DIR%\....   " 
```

然后，您可以从那里为 ant 设置一个变量并从这里运行您的 ant 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:35:19.637

我认为您需要 taskdef 标记的类路径属性。
请参阅此处的文档：http: [//ant.apache.org/manual/tutorial-writing-tasks.html#use1](http://ant.apache.org/manual/tutorial-writing-tasks.html#use1)

# ruby-on-rails - 使用子类控制器设计“翻译缺失”错误

> ID：11620767
> 
> 赞同：11
> 
> 时间：2012-07-23T21:26:36.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我已经子类化了`Devise::RegistrationsController`. 就我而言，子类控制器是`AdminRegistrationsController`.

但是，例如，当我注册一个新管理员时，会`flash`显示以下消息：

`translation missing: en.devise.admin_registrations.admin.signed_up`

我已经验证了一个条目存在于`config/locales/devise.en.yml`. 这是片段：

```
en:
  devise:
    registrations:
      signed_up: 'Welcome! You have signed up successfully.' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T21:41:14.027

你必须这样做：

```
en:
  devise:
    admin_registrations:
      admin:
        signed_up: 'Welcome! You have signed up successfully.' 
```

# css - @font-face 在任何浏览器中都不起作用

> ID：11620768
> 
> 赞同：0
> 
> 时间：2012-07-23T21:26:40.413
> 
> 标签：css, fonts, path, font-face, embedding

我知道，这不完全是一个新话题，但是通读所有与@font-face 相关的帖子，我仍然找不到我的问题的答案。

我是新手，所以我假设我没有看到一个非常尴尬的主要/基本错误，或者我这边存在一些概念上的误解。

非常感谢任何帮助！

这是我的样式表中的内容（以及所有其他样式定义）：

```
 @font-face {
    font-family:'CorporateSBQ-Light';
    src:url('/fonts/CorporateSBQ-Light.eot');
    src:url('/fonts/CorporateSBQ-Light.eot?#iefix') format('embedded-opentype'),
    url('/fonts/CorporateSBQ-Light.woff') format('woff'),
    url('/fonts/CorporateSBQ-Light.ttf') format('truetype'),
    url('/fonts/CorporateSBQ-Light.svg#CorporateSBQ-Light') format('svg');
    font-weight:normal;
    font-style:normal;
    font-variant:normal;
    }
    html, body 
    {
    background-color:#FFFFFF;
    margin-top:auto;
    margin-right:auto;
    margin-bottom:auto;
    margin-left:auto;
    font-family:"CorporateSBQ-Light", Helvetica Light, Arial, sans-serif;
    font-size:16px;
    color:#9FAD9E;
    height:100%;
    width:100%;
    overflow-y:scroll;
    } 
```

我觉得我有正确的路径到正确的目录和正确的拼写等，但即使经过几天尝试不同的路径，重新转换字体（在 Fontsquirrel 和另一个基于 Web 的转换器服务）等，出于某种原因上传时，无论是在本地 DM 或浏览器中，还是在任何浏览器中，所需的字体都无法正确显示。相反，我得到的是 Helvetica 或 Arial。

我还尝试在转换之前给字体一个完全不同的名称，这只是将其转换回原始名称。转换后重命名也无济于事。

“字体”文件夹放置在根文件夹中。我也尝试将字体直接放在根文件夹中（没有任何文件夹保存它们），并且我在所有可以想到的变体中使用“CorporateSBQ-Light”和“CorporateSBQ-Light” - 没有成功。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:40:29.123

在您的字体定义之前，您还有其他样式定义吗？如果没有尝试将它们添加为第一行。

我还记得遇到过这种麻烦，当字体与 CSS 位于不同的文件夹中时，也许这也值得一试。

这些是我最近购买的一些字体的说明，在任何浏览器中都适用于我：

> 将字体上传到与 CSS 文件相同的文件夹中，然后将此代码复制到 CSS 中：

```
/* first for IE 4–8 */
@font-face {
  font-family: Family-Name;
  src: url("Family-Name.eot");
}

/* then for WOFF-capable browsers */
@font-face {
  font-family: Family-Name;
  src: url("Family-Name.woff") format("woff");
}

/* go on with normal style definitions */
body { 
  font-family: Family-Name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:42:29.767

或者你可以试试

```
 @font-face {
    font-family:'CorporateSBQ-Light';
    src:url('../fonts/CorporateSBQ-Light.eot');
    src:url('../fonts/CorporateSBQ-Light.eot?iefix') format('truetype'),
    url('../fonts/CorporateSBQ-Light.woff') format('woff'),
    url('../fonts/CorporateSBQ-Light.ttf') format('truetype'),
    url('../fonts/CorporateSBQ-Light.svg') format('svg');
    font-weight:normal;
    font-style:normal;
    font-variant:normal;
    } 
```

# c# - 这个 Font 对象什么时候被释放？

> ID：11620771
> 
> 赞同：4
> 
> 时间：2012-07-23T21:27:04.050
> 
> 标签：c#, .net, garbage-collection

我的 C# 代码中有一行创建字体以测量字符串的长度：

```
int width = (int)(myGraphics.MeasureString(text, new Font(myFontName, myFontSize, FontStyle.Bold)).Width); 
```

我的问题是，什么时候处理`new Font()`变量？是在处置表单时处置，还是立即处置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T21:29:38.590

`Font`已声明终结器：

```
~Font()
{
    this.Dispose(false);
} 
```

当字体对象被创建时，它被注册到终结队列中。这些对象在垃圾回收期间不会被销毁（即内存保持分配状态） - 它们稍后会在调用终结器时被销毁（顺便说一句，终结器可能永远不会执行）。因此最好`Dispose`手动或通过`using`语句调用。在这种情况下，字体对象将被释放并从最终确定中注销（因此它将在垃圾收集期间从内存中删除）：

```
public void Dispose()
{
    this.Dispose(true);
    GC.SuppressFinalize(this);
} 
```

[您可以在 Jeffrey Richter 的文章中](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)阅读有关垃圾收集和终结的更多信息

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-23T21:30:23.500

每当垃圾收集器感觉时，它就会被处理掉。您不应该过多依赖使用 dispose，因为您不能保证它会很快发生。您可以放心，在您完成使用它之前不会释放它（即在范围内的对象中不存在对它的引用）

# facebook - 在 Facebook Graph API 中过滤掉非故意报道

> ID：11620774
> 
> 赞同：2
> 
> 时间：2012-07-23T21:27:18.137
> 
> 标签：facebook, facebook-graph-api

有没有一种简单的方法可以从 Facebook Graph API 中过滤掉“非故意”的故事。例如，当我查看用户的提要时，我会收到大量“John Smith 现在是 xyz 的朋友”的帖子，这些帖子实际上并不是由用户发布的。

图形 API 过去根本不返回这些。对于较旧的 Facebook 应用程序，有一个迁移设置“包括最近的活动故事”可以抑制这些，但新应用程序没有该迁移选项。

我已经使用了 RegEx 并检查了“story_tags”属性，但我希望有一种更简洁的方法（也许是 /feed 端点的查询标志？）

谢谢！

缺口

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-24T12:35:33.453

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

帖子

用户自己的帖子。

任何有效的 access_token 或 read_stream 以查看非公开帖子。

Post 对象的数组。

我觉得这就是。

# ios - StageWebView 失败的一些原因是什么？

> ID：11620779
> 
> 赞同：0
> 
> 时间：2012-07-23T21:27:48.680
> 
> 标签：ios, actionscript-3, apache-flex, stagewebview

在我的 iOS 版 Flex 应用程序中，我使用 StageWebView 访问 Web 门户以获取一些应用程序设置。有时，StageWebView 并没有显示加载的门户，而是完全变灰：

![StageWebView 显示全灰色](../Images/f7583909290489b4ca857b3bd00acb2b.png)

没有派发错误事件，仍然可以从 ActionScript 控制组件（已派发位置事件，但仍不呈现内容）。在其他时间加载相同的网站成功 - 灰色区域正确填充了我的 Web 内容。

这里有什么可能的原因？内存限制似乎是一种选择，但我找不到任何文档表明 iOS 网络视图将停止呈现而不是简单地使应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:13:56.143

我们没有确定真正的根本原因，但最接近的原因是在后台加载页面（即，在设置 StageWebView 的 stage 属性之前）。

我们对潜在问题的最佳理论是由 Javascript onLoad 和 onReady 事件运行的代码，它们与在后台渲染的交互很差。

我们通过在加载主要内容页面时定向到 StageWebView 中的插页式页面解决了这个问题，而不是在 Flex 应用程序本身中提供进度信息。

# list - 如何在 Prolog 中编写 cmp_list/3 函数？

> ID：11620781
> 
> 赞同：0
> 
> 时间：2012-07-23T21:27:50.443
> 
> 标签：list, comparison, prolog

> 写一个 predicate `cmp_list/3`，前 2 个参数是 2 个列表，最后一个是`Comparison`which 表示`ge`, `lt`, `le`, or `gt`。
> `ge`: 大于等于
> `lt`: 小于
> `le`: 小于等于
> `gt`: 大于
> 输出应该是这样的：
> 前两个列表代表一个软件的版本，该函数用于比较一个软件的两个版本，看哪个版本更新：

```
?- cmp_list([2,3,4], [2,3,5], C).
C = lt ;
C = le .

?- cmp_list([1,2,3,4], [1,1,8], C).
C = gt ;
C = ge . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:33:56.590

这闻起来像家庭作业，所以我只给你一些提示。

*   如果两个列表都为空，则它们相等（`le`或`ge`）。
*   如果第一个列表为空，则`[], [V|Vt], ...`比较时可能会出现递归结束，例如 1.2 和 1.2.3，因此第三个参数应该是`lt`.
*   同样，如果第二个列表为空，则第三个参数应该是`gt`。
*   如果两者都不为空，则应比较磁头。如果它们不同，请回答`gt`或`lt`相应地回答。如果它们相等，则在尾部递归。

# javascript - Jquery / Javascript 视频替换

> ID：11620785
> 
> 赞同：0
> 
> 时间：2012-07-23T21:28:02.690
> 
> 标签：javascript, jquery, video, replace

好的，所以我显然在这里遗漏了一些东西（只是无法弄清楚我遗漏了什么）。我一直在编写一个基本脚本来获取 div 的内容，如下所示：

```
<div class="sxvideo">1745623935001,640,360</div>
<div class="sxvideo">1745605281001</div>
<div class="sxvideo">1745623933001,900</div> 
```

然后我有这个（加载在页面底部）来获取innerHTML（这是视频ID，宽度和高度）将它们交换出来，用逗号分割数据，确保高度和宽度都是'不要未定义，然后用完整的嵌入代码替换innerHTML，将变量放到正确的位置：

```
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

<script type="text/javascript">
$("div.sxvideo").each(function () {
"use strict";
var bcid = this.innerHTML.split(",");
if (bcid[1] === undefined) {
    bcid[1] = "720";
    }
if (bcid[2] === undefined) {
    bcid[2] = "404";
    }
this.innerHTML = '<center><div style="margin-bottom:15px; height: ' + bcid[2] + 'px; width: ' + bcid[1] + 'px;"><object id="myExperience' + bcid[0] + '" class="BrightcoveExperience"><param name="bgcolor" value="#172531" /><param name="width" value="' + bcid[1] + '" /><param name="height" value="' + bcid[2] + '" /><param name="playerID" value="68593058001" /><param name="playerKey" value="AQ~~,AAAACmfZzQE~,c2ejuULn_boEBJAb-NiqNIQuC2o543gE" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="@videoPlayer" value="' + bcid[0] + '" /></object></div></center>';
});
</script>

<script type="text/javascript">brightcove.createExperiences();</script> 
```

编辑添加：为了稍微澄清一下（这可能是问题），嵌入代码获取信息，然后通过脚本调用视频（这是最后一行 brightcove.createExperiences() 所做的）。嵌入代码很好。如果我采用这种格式并发布（用数据替换变量），它可以正常工作并加载视频。

是因为我在脚本之外调用了 brightcove .js 吗？我想替换 的每个实例，然后调用 brightcove.createExperiences()，而不是替换内容并为每个 div 调用它（您只需每页调用一次）。

是否应该与准备好的文档一起编写以确保以正确的顺序完成？脑子乱成一团。

或者，如果有人对如何更有效/更好地执行此操作有更好的建议，请随时在此处发布。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:53:25.490

您的 Flash 插件依赖于使用外部 JavaScript 分配给标记的一些动态 HTML 属性。此脚本 (http://admin.brightcove.com/js/BrightcoveExperiences.js) 通常在页面加载时运行，但您的脚本在页面加载后运行。Brightcove 脚本未正确转换您的 HTML，因为它尚未创建。

解决方案是在代码完成后显式运行 Brightcove 脚本。在您的代码之后添加这一行，一切都应该很好：

```
$.getScript('http://admin.brightcove.com/js/BrightcoveExperiences.js'); 
```

[http://jsfiddle.net/mblase75/bLU9x/](http://jsfiddle.net/mblase75/bLU9x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:34:53.543

好的，在喝了很多咖啡因后，我回来了，让它起作用了。这就是它最终的样子：

```
<script type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

<script type="text/javascript">
jQuery(document).ready(function($) {
$("div.sxvideo").each(function() {
    var bcid = this.innerHTML.split(",");
    if (bcid[1] === undefined) {
            bcid[1] = "720";
        }
if (bcid[2] === undefined) {
            bcid[2] = "404";
    }
    this.innerHTML = '<center><div style="margin-bottom:15px; height: ' + bcid[2] + 'px; width: ' + bcid[1] + 'px;"><object id="myExperience' + bcid[0] + '" class="BrightcoveExperience"><param name="bgcolor" value="#172531" /><param name="width" value="' + bcid[1] + '" /><param name="height" value="' + bcid[2] + '" /><param name="playerID" value="68593058001" /><param name="playerKey" value="AQ~~,AAAACmfZzQE~,c2ejuULn_boEBJAb-NiqNIQuC2o543gE" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="@videoPlayer" value="' + bcid[0] + '" /></object></div></center>';
});
brightcove.createExperiences();
});
</script> 
```

基本上，我只需要添加准备好的文档（感谢 LA 的 Frenchi），然后在其中移动 Brightcove 初始化。现在就像一个魅力。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T19:06:55.463

以为我会为此添加一个变体。我有一个按钮单击，需要通过 ajax 查找视频 ID 和信息，然后显示视频。我必须在一页中完成所有操作，所以我隐藏了 div：

```
<script type="text/javascript">

function onSelect(e) {
    var dataItem = this.dataItem(e.node);

    var type = $(e.node).data("type");
    if (type == "video") {

        var request = {
            VideoID: dataItem.id
        };

        $.ajax({
            type: "POST",
            url: '@Url.Action("VideoRequest", "Video")',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(request),
            dataType: "json",
            success: function(data) {

                var referenceID = data["ReferenceID"];

                $("#playerCode").html(
                    '<object id="videoPlayer" class="BrightcoveExperience">' +
                        '<param name="bgcolor" value="#FFFFFF" />' +
                        '<param name="width" value="480" />' +
                        '<param name="height" value="270" />' +
                        '<param name="playerID" value="2810882002001" />' +
                        '<param name="playerKey" value="AQ~~,AAACbZTjlpE~,8zoTOFpOgAiTJ1UDRoQvrBanwRVGwo2w" />' +
                        '<param name="isVid" value="true" />' +
                        '<param name="isUI" value="true" />' +
                        '<param name="dynamicStreaming" value="true" />' +
                        '<param name="videoID" value="' + referenceID + '" /></object>');

                brightcove.createExperiences();

                $("#tree").css("visibility", "hidden");
                $("#player").css("visibility", "visible");
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:43:26.203

您的 javascript 部分不包含准备好的文档。尝试：

```
$(function(){// Your code here}); 
```

# ios - Xcode 4.3.3：代码设计操作失败：检查您签署的身份是否有效

> ID：11620786
> 
> 赞同：0
> 
> 时间：2012-07-23T21:28:08.227
> 
> 标签：ios, xcode, app-store, distribution, codesign

我已经搞砸了“iOS 没有可用于签名的身份”，并且有一个简单的解决方案，只是为了获取开发人员资料。但是，在提交我的应用程序之前，我遇到了另一个问题。我查看并尝试了其他解决方案，例如：[Xcode 4.3：代码设计操作失败（检查您选择的身份是否有效）](https://stackoverflow.com/questions/9386925/xcode-4-3-codesign-operation-failed-check-that-the-identity-you-selected-is-va)

没有用，现在任何帮助都将不胜感激，因为我正处于分发这个应用程序时沮丧地尖叫的边缘，因为老实说，导致它的一切都容易多了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:37:05.420

从您的 iOS 配置门户中删除配置文件。重新创建配置文件。在 Xcode 中，点击管理器中的刷新 -> 设备。清理项目并重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T18:10:55.707

如果其他人有这个问题，并且上面@Ninja 的建议没有解决，请尝试删除无关文件。对我来说，他们是：

> Gruntfile.js、karma-e2e.conf.js、karma.conf.js 和整个 node_modules 目录。

请参阅：[如何使用 XCode 5 构建 IPA 以使用 TestFlight 进行分发？](https://stackoverflow.com/q/25109616/1449799)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:04:08.400

也许您需要撤销并重新创建证书/配置文件......干杯

# c# - JavaScript：不正确的日期

> ID：11620796
> 
> 赞同：0
> 
> 时间：2012-07-23T21:28:58.757
> 
> 标签：c#, javascript, asp.net, mysql, vb.net

我有一个托管的 Web 应用程序，它根据每日工作日结束数据生成报告。由于服务器位于欧洲（设置为使用 UTC 时间），我位于亚洲 (UTC+5)，而我的老板和同事位于美国 (UTC-5)，我们似乎无法获得相同的日期。

例如，我这边的报告显示“2012 年 7 月 23 日”，而在美国显示“2012 年 7 月 22 日”。我使用 RDP 检查了服务器，它也显示“2012 年 7 月 23 日”。

我的应用程序中没有本地化。我不确定这是 ASP.NET、客户端 JavaScript 还是 MySql，它们根据请求的来源更改日期？有任何想法吗？

**编辑** 刚刚与我的老板核实，他的浏览器中的源代码也显示“2012-07-23”。所以我想这可以缩小到 JavaScript 更改`new Date("2012-07-23")`调用日期的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:32:22.373

如果您使用 ISO 日期时间，请确保最后指定时区，否则将被视为本地时间。

如果可能，在使用数据库和 ASP.NET 应用程序时，一切都使用 UTC 时间。

```
GETUTCDATE() 

DateTime.UTCNow() 
```

如果您指定使用日期，则尽可能使用 ISO 日期以减少文化差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:18:28.053

我认为你可以责怪你的 JavaScript 代码。使用像你这样的[`Date`构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)`new Date("2012-07-23")`( ) 和字符串调用[`Date.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)，如果未指定，则使用本地时区。

使用 ISO 时间戳或自纪元以来的毫秒数。

当然，展示还有另一个作用。当您输出 utc 时间，解析为本地时区，作为本地时间，它将“正确”显示 utc。如果您将 utc-parsed 的 utc-string 输出为本地时间，它将正确显示本地时间。

# c# - 针对 XSD 验证 XML 并忽略子元素的顺序

> ID：11620802
> 
> 赞同：17
> 
> 时间：2012-07-23T21:29:16.233
> 
> 标签：c#, xml, validation, xsd

我在 C# 应用程序中有一个方法可以针对嵌入式 XSD 验证用户输入 XML 文件。它工作得很好，但它要求所有子元素都按照 XSD 中定义的确切顺序。不过对我来说，只要元素存在，顺序就无关紧要。

例如，如果我有以下 XSD...

```
<xs:element maxOccurs="unbounded" name="ParentElement">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="FirstChildElement" type="xs:string" />
      <xs:element name="SecondChildElement" type="xs:string" />
      <xs:element name="ThirdChildElement" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

像这样的 XML...

```
<ParentElement>
    <FirstChildElement>someValue</FirstChildElement>        
    <ThirdChildElement>someValue</ThirdChildElement>
    <SecondChildElement>someValue</SecondChildElement>
</ParentElement> 
```

如果我验证它，我会收到一个错误，因为子元素出现故障。

我可以对 XSD 进行一些更改，以便验证只关心元素是否存在，并且它们是否在正确的父元素下，而不是它们的顺序？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-23T21:35:52.737

顺序意味着，元素必须以特定的顺序出现。你可能想要 xs:all。看看[http://www.w3schools.com/xml/schema_complex_indicators.asp](http://www.w3schools.com/xml/schema_complex_indicators.asp)

# javascript - 单元测试响应式 Javascript、Qunit 和 matchMedia

> ID：11620804
> 
> 赞同：0
> 
> 时间：2012-07-23T21:29:18.977
> 
> 标签：javascript, unit-testing, media-queries, qunit

我在测试和自动化条件 matchMedia 语句时遇到问题。我想创建一个可以测试多种宽度（在本例中为桌面和平板电脑宽度）的单元测试。

我可以为每个设备/媒体查询（例如 this.setForTablet()）编写一个测试，但我如何测试下面的迷你控制器？

有没有一种实用的方法来测试如下语句？重构我的代码以避免以下语句是否是更好的做法，如果是这样，如何？

```
 if ( window.matchMedia('(max-width: 768px)').matches  ) { // View <= tablet
            this.setForTablet();
        } else { // View > tablet
            this.setForDesktop();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:29:44.393

重构并返回。

重构迷你控制器以接受不同的输入/宽度并为每种情况返回已知/预期值。这些将是您的测试断言。

人们应该期望 matchMedia 能够按预期工作并且只测试用户/编码器自己的代码。

# android - 处理 MapController 的缩放控制

> ID：11620805
> 
> 赞同：1
> 
> 时间：2012-07-23T21:29:24.887
> 
> 标签：android, android-mapview, android-maps

我想保存地图的最后缩放级别。因此我需要处理 mapview 的 zoomLevel。我编码如下。但我不确定这是一个好的解决方案。我无法实现 onDestroy，因为当按下后退按钮时，缩放级别由旧值解决。

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    config.setZoomLevel(mapView.getZoomLevel());
    saveConfig(config);
} 
```

# spring - 如何禁用弹簧表单复选框？

> ID：11620807
> 
> 赞同：10
> 
> 时间：2012-07-23T21:29:33.677
> 
> 标签：spring, jsp

在我的 jsp 中，对于某些条件，我希望复选框存在，但不想让用户选中或取消选中它。

我不确定如何实现这一目标。我尝试了以下

```
<form:checkbox path="..." disabled = "disabled"> 
<form:checkbox path="..." disabled = "true"> 
<form:checkbox path="..." readonly = "readonly"> 
```

似乎没有任何工作。

有人可以对此有所了解吗？

谢谢..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T06:20:52.273

`disabled`属性 in`<spring:checkbox>`应该设置为`true`or`false`并且复选框没有`readonly`属性。所以

```
<form:checkbox path="corespondingPath" disabled = "true"> 
```

应该管用。

很少链接
[Spring doc 链接。](http://static.springsource.org/spring/docs/2.5.x/reference/spring-form.tld.html#spring-form.tld.checkbox)
[Spring表单输入中的只读和禁用属性](http://www.developandconquer.com/2012/07/readonly-and-disabled-property-in.html)

您可以根据某些条件使用 JSTL 添加它

```
<c:choose>
    <c:when test="${condition}">
          // Add checkbox with disabled="true"
          <form:checkbox path="desiredPAth" disabled="true" />
    </c:when>
    <c:otherwise>
          // Do something else
    </c:otherwise>
</c:choose> 
```

# python - 如何修复此 ImportError：没有名为 win32api 的模块？（win32api 路径变量）

> ID：11620811
> 
> 赞同：5
> 
> 时间：2012-07-23T21:29:39.083
> 
> 标签：python, winapi, path, environment-variables, bioinformatics

我是编程和计算机世界的新手。我正在尝试用 MMTK 研究生物分子模拟。

我在 Windows 7 中运行它并且我已经安装了这个软件：

*   python-2.5.4
*   numpy-1.6.2-win32-superpack-python2.5
*   netCDF4-0.8.2.win32-py2.5
*   ScientificPython-2.9.0.win32-py2.5
*   MMTK-2.6.0.win32-py2.5

当我运行这个[protein.py](http://structure.usc.edu/mmtk/Examples/MolecularDynamics/protein.py) mmtk 样本时，一切似乎都很好。它显示了 1000 个流程步骤的数量。

但是当我使用方法运行脚本时`view`，如下所示：

```
from MMTK import *
molecule = Molecule('water')
molecule.view() 
```

然后我得到这个错误：

```
Traceback (most recent call last):
File "C:\Users\BIOCHEM\Desktop\mmtk\mmtk_water.py", line 4, in <module>
molecule.view()
File "C:\Python25\Lib\site-packages\MMTK\Collections.py", line 495, in view
Visualization.viewConfiguration(self, configuration, format)
File "C:\Python25\Lib\site-packages\MMTK\Visualization.py", line 263, in viewConfiguration
function(*args, **kwargs)
File "C:\Python25\Lib\site-packages\MMTK\Visualization.py", line 236, in genericViewConfiguration
import win32api
ImportError: No module named win32api 
```

在网上搜索了一些答案（主要是这个：[http](http://www.varioustopics.com/python/142947-importerror-no-module-named-win32api.html) ://www.varioustopics.com/python/142947-importerror-no-module-named-win32api.html ），得出的结论是这是一个问题在**路径环境变量**中。不幸的是，这个问题的答案没有提供细节。我需要一个**详细**的答案。这个环境变量问题在我看来就像地球上生命出现的奥秘一样简单。我知道如何改变它，但我不知道改变**什么**或**何时**改变它。阅读有关该主题的维基百科文章对我没有太大帮助。所以我想知道的是：如何在**此修改系统变量**案子？我必须添加一个新变量还是只添加一个现有变量的路径？win32api 的路径是什么（不应该是 C:\Windows\System32）？

这是我当前的变量值：

变量名称：路径

变量的值：

```
C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;%PYTHON_HOME%;%PYTHON_HOME%\Scripts;C:\Program Files (x86);C:\Python27\; C:\Python27\Scripts;C:\Python25\DLLs 
```

我也有这个 Python 变量：`PYTHON_HOME`使用这个变量的值：`C:\Python27`

对于有经验的程序员来说，这个问题似乎微不足道。但它的答案对其他人可能非常有用。有大量的生物学家、生物化学家和药剂师对使用计算方法来解决他们的问题感兴趣。这些专业人员并不总是在附近有计算机科学家（特别是如果他们在不发达国家）。

克服最初令人沮丧的错误和安装问题对于许多人的科学生涯至关重要。这个问题的答案将对他们有所帮助。

提前致谢。如果这个论坛不适合这个级别的问题，请给我反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:58:48.000

安装 pywin32 或 ActivePython。

# ruby - Ruby：要散列的数组，没有任何局部变量

> ID：11620812
> 
> 赞同：2
> 
> 时间：2012-07-23T21:29:44.123
> 
> 标签：ruby, enumerable

我有一个字符串数组。

```
array = ["foo","bar","baz"] 
```

我试图将其转换为以下内容：

```
{"foo"=>nil, "bar"=>nil, "baz" => nil} 
```

我一直在这样做：

```
new_hash = {}
array.each { |k| new_hash[k] = nil }
new_hash 
```

我想知道是否有任何方法可以在单行/没有任何实例变量的情况下完成此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T21:36:19.923

这会起作用：

```
new_hash = Hash[array.zip]
# => {"foo"=>nil, "bar"=>nil, "baz"=>nil} 
```

*   [`array.zip`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)返回`[["foo"], ["bar"], ["baz"]]`
*   [`Hash::[]`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)从这些键创建一个哈希

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:35:25.717

您可以使用`Hash[]`：

```
1.9.3p194 :004 > Hash[%w[foo bar baz].map{|k| [k, nil]}]
 => {"foo"=>nil, "bar"=>nil, "baz"=>nil} 
```

或者`tap`

```
1.9.3p194 :006 > {}.tap {|h| %w[foo bar baz].each{|k| h[k] = nil}}
 => {"foo"=>nil, "bar"=>nil, "baz"=>nil} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:52:43.477

```
Hash[array.zip([nil].cycle)] 
```

这个答案太短了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T21:51:06.943

```
array.each_with_object({}) { |i,h| h[i] = nil } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T21:33:51.750

在一行中：

```
array.inject({}) { |new_hash, k| new_hash[k] = nil ; new_hash } 
```

它并不完全优雅，但它完成了工作。

但是，您是否有理由需要已经初始化哈希？如果你只想要一个默认值为 nil 的哈希，Hash.new 可以做到这一点。

```
Hash.new {|h, k| h[k] = nil} 
```

# java - 部分模拟对象以进行单元测试

> ID：11620817
> 
> 赞同：4
> 
> 时间：2012-07-23T21:30:06.107
> 
> 标签：java, unit-testing, easymock

我正在使用 easymock 进行单元测试。我正在尝试在测试类中模拟一个方法。

```
ServiceEJB partialMockServiceEJB = EasyMock
            .createMockBuilder(ServiceEJB.class)
             .addMockedMethod("getStatusType")
            .createMock(); 
```

但它会抛出一个错误：多个具有相同名称的方法。我用不同数量的参数覆盖了这个方法。如何显示我想要的这些覆盖方法中的哪一个？我如何在这里应用论点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:36:48.880

您可以传入参数类型以区分重载方法，例如

```
PortalServiceEJB partialMockServiceEJB = EasyMock
            .createMockBuilder(ServiceEJB.class)
             .addMockedMethod("getStatusType", int.class)
            .createMock(); 
```

顺便说一句，这不是部分模拟，因为这里没有被部分模拟的真实对象。此外，您可能希望将 Mockito 视为一个模拟框架，其语法在 IMO 上要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:36:30.623

而不是`addMockedMethod()`只使用方法的名称，而是使用方法名称及其参数类型作为参数的方法：[http ://www.easymock.org/api/easymock/3.1/org/easymock/internal /MockBuilder.html#addMockedMethod%28java.lang.String,%20java.lang.Class...%29](http://www.easymock.org/api/easymock/3.1/org/easymock/internal/MockBuilder.html#addMockedMethod%28java.lang.String,%20java.lang.Class...%29)

# objective-c - 从 API 返回中选择某个值

> ID：11620819
> 
> 赞同：0
> 
> 时间：2012-07-23T21:30:14.140
> 
> 标签：objective-c, ios, xcode

我正在尝试选择返回字符串的某个部分用作 isEqual。

```
guest_user_id = [[NSMutableString alloc]initWithData:[APIv2 Guest_Sign_Up:guest_email] encoding:NSUTF8StringEncoding];
guest_user = [guest_user_id JSONValue];
appDelegate.guest_user_id = guest_user [@"id"];

    NSData *jsonData = [guest_user_id dataUsingEncoding:NSUTF8StringEncoding];

NSError *e;
NSMutableDictionary *jsonList = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&e];
NSLog(@"jsonList: %@", jsonList[@"success"]);

if([jsonList [@"success"] isEqualToString:@"0"]){ 
```

API的返回看起来像这样......

```
Return: {"success":0,"error":"That email address is already registered! Please try again or login."} 
```

它不会看到它是错误的，只是去其他地方。有任何想法吗？！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:34:13.143

正确的做法是使用 NSJSONSerialization 将从 Web 返回的 JSON blob 转换为 ObjectiveC 对象，然后向返回的对象询问“成功”的值。

所以现在你已经使用了序列化器，并且你得到了 ObjectiveC 对象：

id foo = NSJSONSerialization(.....);

那你现在怎么办？好吧，您可以使用 NSLog 转储输出并查看它的外观。该调用使用的符号可以让您看到什么时候是字典、字符串等。

有时很难弄清楚某物是什么——例如“0”。那是一个数字还是一个字符串。所以处理这种特殊情况的方法可以用一种简单的方式来完成：

NSInteger theNum = [[val objectForKey:@"Success"] integerValue]，因为 NSString 和 NSNumber 都实现了该方法（我在代码中广泛使用了该方法）。

但是，你真的很想知道对象是什么——只是想知道。那么你要做的是获取对象：

id foo = [val objectForKey:@"Success"]; NSLog(@"成功是一个 %@", NSStringFromClass([id class]);

你想在代码中处理这个，然后：

if([foo isKindOfClass[NSNumber class]) { ... } else if([foo isKindOfClass:[NSString class])) { ... }

# .net - 在派生类的重写（新）函数中使用基类保护方法

> ID：11620821
> 
> 赞同：0
> 
> 时间：2012-07-23T21:30:22.863
> 
> 标签：.net, inheritance, protected, managed-c++, overriding

我试图完成类似于Java **“超级”**调用的东西，我认为可以通过这种方式：

```
public ref class base {

public: base(){}

protected: virtual void funct()
{
   MessageBox::Show("base funct");
}
};

public ref class derived : public base
{
public: derived() : base(){}

protected: virtual void funct() new
{
((Base^)this)->funct();
///some work
}
}; 
```

但它给了我*“候选函数不可访问”*错误。**“受保护”**修饰符是否不会将基类元素的访问权授予其所有子类？我不知道它是否有任何区别，但我想要覆盖的基类方法也被基继承。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:02:26.903

您的语法不正确，您可以像这样调用基本函数。

```
base::funct(); 
```

它抱怨是因为，在演员表之后，你有一个`base`. 该`funct()`函数是受保护的，因此您不能在给定的`base`.

# java - XSD 具有 2 个根元素（一次 1 个）

> ID：11620825
> 
> 赞同：3
> 
> 时间：2012-07-23T21:30:35.580
> 
> 标签：java, xml, xsd, jaxb, jaxb2

所以这是一个复杂/迟缓的情况。我正在编写一个 XSD，恰好有一个要求，我需要 2 个根元素（在任何给定时间 1 个）

```
<xs:element name="booksList">
    <xs:complexType>
         <xs:sequence>
             <xs:element name="book" type="bookType" minOccurs="0" maxOccurs="unbounded"/>
         </xs:sequence> 
    </xs:complexType>   
</xs:element> 
```

接着

```
<xs:element name="book" type="bookType"></xs:element> 
```

在任何给定时间，这些元素中的任何一个都将用作根元素，因此 XML 看起来像

```
<bookList>
<book>
<author>XYZ</author>
</book>
</bookList> 
```

或者

```
<book>
<author>XYZ</author>
</book> 
```

这两个 XML 都将从 2 个不同的 URL 发送回用户，即列表将从**localhost/books.xml?author=XYZ**发送，单本书将从**localhost/book_name.xml发送**

我怎样才能用一个 xml 实现这一点？我尝试将书籍定义放在 XSD 中，但 JAXB2.1 没有生成任何书籍类。有什么我想念的吗？

* * *

**EDIT1**：BookType 已生成，但 BookType 没有任何根元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T01:55:03.597

**XML 架构**

> 我正在编写一个 XSD，恰好有一个要求，我需要 2 个根元素（在任何给定时间 1 个）

下面的 XML 模式支持具有两个根元素`booksList`并且`book`您正在寻找。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="booksList">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="book" type="bookType" minOccurs="0"
                    maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:element name="book" type="bookType"></xs:element>

    <xs:complexType name="bookType">
        <xs:sequence>
            <xs:element name="author" type="xs:string" />
        </xs:sequence>
    </xs:complexType>

</xs:schema> 
```

* * *

**生成模型**

> 我尝试将书籍定义放在 XSD 中，但 JAXB2.1 没有生成任何书籍类。

您的 JAXB (JSR-222) 实现将为命名的复杂类型生成一个类`bookType`，然后为该类`bookElement`创建一个`@XmlElementDecl`注释`ObjectFactory`。

***书单***

在此类上生成了一个带有 的`@XmlRootElement`类，因为它对应于具有匿名复杂类型的全局元素。

```
package forum11620825;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"book"})
@XmlRootElement(name = "booksList")
public class BooksList {

    protected List<BookType> book;

    public List<BookType> getBook() {
        if (book == null) {
            book = new ArrayList<BookType>();
        }
        return this.book;
    }

} 
```

***书本类型***

生成此类以对应于命名的复杂类型。

```
package forum11620825;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "bookType", propOrder = {"author"})
public class BookType {

    @XmlElement(required = true)
    protected String author;

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String value) {
        this.author = value;
    }

} 
```

***对象工厂***

对应于命名复杂类型的全局元素具有`@XmlElementDecl`在类上生成的注释`ObjectFactory`。这是必要的，因为多个全局元素可能对应于命名的复杂类型。

```
package forum11620825;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

@XmlRegistry
public class ObjectFactory {

    private final static QName _Book_QNAME = new QName("", "book");

    public ObjectFactory() {
    }

    public BooksList createBooksList() {
        return new BooksList();
    }

    public BookType createBookType() {
        return new BookType();
    }

    @XmlElementDecl(namespace = "", name = "book")
    public JAXBElement<BookType> createBook(BookType value) {
        return new JAXBElement<BookType>(_Book_QNAME, BookType.class, null, value);
    }

} 
```

* * *

**XML**

以下是您问题中的 XML 文档。

***书籍列表.xml***

```
<booksList>
    <book>
        <author>XYZ</author>
    </book>
</booksList> 
```

***书本.xml***

```
<book>
    <author>XYZ</author>
</book> 
```

* * *

**演示代码**

当您解组其中根元素对应于`@XmlRootElement`注释的文档时，您将获得相应域对象的实例。如果你解组一个根元素对应于一个`@XmlElementDecl`注释的文档，你会得到一个`JAXBElement`包含与命名复杂类型对应的域对象的实例。

```
package forum11620825;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("forum11620825");
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        File input1 = new File("src/forum11620825/booksList.xml");
        BooksList bookList = (BooksList) unmarshaller.unmarshal(input1);

        File input2 = new File("src/forum11620825/book.xml");
        JAXBElement<BookType> je = (JAXBElement<BookType>) unmarshaller.unmarshal(input2);
        BookType bookType = je.getValue();
    }

} 
```

* * *

**更新**

下面是一个代码片段，演示了如何将 的实例包装`BookType`在 a`JAXBElement`中，以便对其进行编组。

```
ObjectFactory objectFactory = new ObjectFactory();
JAXBElement<BookType> jaxbElement = objectFactory.createBook(aBookType);
marshaller.marshal(jaxbElement, System.out); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T21:58:09.870

请参阅[上一个问题](https://stackoverflow.com/q/1639259/577228)。您可以通过简单地按顺序列出可能性来对根元素执行等效的 <xs:choice/> ，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="bookList">
        <xs:complexType>
             <xs:sequence>
                 <xs:element name="book" type="bookType" minOccurs="0" maxOccurs="unbounded"/>
             </xs:sequence> 
        </xs:complexType>   
    </xs:element>
    <xs:element name="book" type="bookType"/>
    <!-- ... -->
</xs:schema> 
```

# actionscript-3 - 如何比较两个数组集合

> ID：11620829
> 
> 赞同：2
> 
> 时间：2012-07-23T21:30:53.547
> 
> 标签：actionscript-3, apache-flex

我用（arA）填充数据网格。这个arraycollection 是一个httpService 的resultEvent。arraycollection 由于我的数据网格必须是最新的，我使用计时器来查询数据库并查看是否存在新记录。今天，每次查询时，我都会刷新数据网格。但是，这种定位不利于用户体验。

所以，我有了一个新想法，将更新httpservice的结果存储在一个新的arraycollection（ArB）中并比较两个arraycollection。但我不知道该怎么做。

可以，你帮助我或目的更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:29:31.660

使用 Flex，您可能想尝试`mx.utils.ObjectUtil`进行比较。

```
public function compare(arrayCollection1:ArrayCollection, arrayCollection2:ArrayCollection):Boolean
{
    if (arrayCollection1.length != arrayCollection2.length)
        return false;

    for (var i:uint = 0; i < arrayCollection1.length; i++)
    {
        if (ObjectUtil.compare(arrayCollection1[i], arrayCollection2[i]) != 0)
            return false;
    }

    return true;
} 
```

这是计算密集型的；因此，您可能需要考虑更改您的方法以包含上次接收数据时的时间戳或索引。在您的 Web 服务中，该时间戳可以作为参数传递。然后，您的 Web 服务将更精简，仅返回上次调用的增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:31:50.303

我建议你可以通过以下方式做到这一点：

# #1

每条记录都有自己的id，因此可以根据id字段比较本地arraycollection和远程arraycollection，然后将新记录添加到本地arraycollection。

# #2

在服务器中添加新的 api 以支持带 id 的分页。

例如：

`getRecord(fromid,-1)`将记录从“from id”返回到最新记录。`getRecord(fromid,toid)`将返回记录 from 和 to。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:56:58.610

我会提出这个建议：

*   使用数组作为缓冲区。

*   将缓冲区大小设置为合理的大小。说 10 条记录。

*   每当缓冲区已满或您指定的瞬间填充网格 - 以之前的为准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T03:06:00.100

在我看来，你可以尝试这样的方法：

1- 存储在数据库中的数据将具有字段 updateDate，这是该字段的最新更新时间。

2-每次查询新/更新/删除项目，只需加载更新项目。（使用这种方法，已删除的项目不会真正从系统中删除，只需将其标志更新为已删除）。

3-比较更新数组与当前数组时，您只需比较当前数组中对象的ID与更新数组中对象的ID，并相应地更新它。

这种方法类似于上面 www.Flextras.com 的评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T17:52:54.163

我会考虑在带有时间戳的响应中有一个 last_modify 字段，因此您可以检查响应的长度，即响应的 last_modify 字段是否大于之前的 last_modify 是因为数据发生了变化，但您需要后端的帮助才能进行此更改

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-24T13:57:53.187

如果两个数组集合具有相同的长度：

```
public function foo(coll1:ArrayCollection, coll2:ArrayCollection):void 
{
    if (coll1.length == coll2.length) 
    {
        for (var i:int = 0; i < coll1.length; i++) 
        {
            if (coll1[i].first != coll2[i].first || coll1[i].last != coll2[i].last) 
            {
                Alert.show("Different");
                return;
            }
       }
    }

   Alert.show("Same");
} 
```

# iis - 是否有一种编程方式来确定 IIS 日志记录是否已停止？

> ID：11620831
> 
> 赞同：1
> 
> 时间：2012-07-23T21:31:06.853
> 
> 标签：iis, windows-server-2003

我找不到工具来告诉我 IIS 日志记录是否已停止，所以我想我可以写点什么。我不知道从哪里开始。我正在使用 Windows 2003 服务器，而我的 IIS 日志记录一直在消失。我可以收到错误消息，但我想知道它何时出现故障并通过电子邮件收到警报。

不知道该怎么办。也许一些挂钩到事件查看器？

谢谢你的帮助。

编辑：我在这里找到了来自 MS 的 eventtriggers.exe：

[http://technet.microsoft.com/en-us/library/bb490901](http://technet.microsoft.com/en-us/library/bb490901)

我相信我可以将它与 vbscript 一起使用。我会继续寻找。

# c# - 强类型 ActionLink 的注意事项

> ID：11620832
> 
> 赞同：3
> 
> 时间：2012-07-23T21:31:09.243
> 
> 标签：c#, asp.net-mvc

我一直在尝试查找有关在 Futures 中首次亮相的强类型 ActionLink 辅助方法的更多信息。我知道使用它有一些很大的缺点，但想了解更多。我找到的最好的链接是这个。

[Asp.Net MVC 2 中的强类型 ActionLink？](https://stackoverflow.com/questions/2240123/strongly-typed-actionlink-in-asp-net-mvc-2)

上面链接中的解释很简短，而且我对 MVC 的底层知识也很了解，以至于我很难丢弃从表面上看似乎是生成 URL 的更可取的方法。

所以我的问题：

*   在 MVC 3 中是否有任何关于此状态的更新信息？
*   是否有任何地方对其缺点进行了更深入的解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:12:32.690

This does not answer any of your questions, but it possibly gives a nice alternative: Check out [T4MVC](http://t4mvc.codeplex.com/)

From the description:

e.g. instead of

```
@Html.ActionLink("Delete Dinner", "Delete", "Dinners", new { id = Model.DinnerID }, null) 
```

T4MVC lets you write

```
@Html.ActionLink("Delete Dinner", MVC.Dinners.Delete(Model.DinnerID)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T23:53:33.673

我想您正在寻找的答案可能在Phil Haack的这篇[博客文章](http://haacked.com/archive/2009/06/02/alternative-to-expressions.aspx)和Rudi Benkovic的这个[幻灯片中。](http://www.slideshare.net/rudib/aspnet-mvc-performance)

基本上，这是一个性能问题。当使用花哨的表达式语法与“魔术字符串”语法时，ASP.NET MVC 需要大约 30 倍的时间来确定链接的路径。

您可能会发现性能权衡是值得的。如果没有，[T4MVC](http://nuget.org/packages/T4MVC)可能是您要找到的最佳选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T23:46:58.727

您链接到的有关其工作原理的描述非常清楚：“鉴于此信息并假设没有可扩展性挂钩，请猜测哪个路由将执行此操作”。如果您不打算过多地更改自定义应用程序使用路由的方式，那应该没问题。

如果要使用扩展方法，它仍然需要[Futures 包。](http://nuget.org/packages/Mvc3Futures)

# c++ - C ++解析可变长度的双精度行

> ID：11620833
> 
> 赞同：0
> 
> 时间：2012-07-23T21:31:20.473
> 
> 标签：c++, string-parsing

我正在尝试逐行读取文件，根据空格对其进行解析并将其放入称为输入的向量中。但是，我不能做 cin >> x1 >> x2 >> x3 ... 因为该行没有固定数量的术语。以下是我的想法，但它可能是错误的。

```
vector <double> input;
fstream inputFile("../Sphere.in", fstream::in);
inputFile.open("../Sphere.in", fstream::in);

while (inputFile.good())
{
    getline(inputFile, line); 
```

然后这里的一些东西说明输入输入[i]中的每个空格

```
 } 
```

我是 C++ 的新手，如果有人能给我提供任何帮助，我将不胜感激。

谢谢，

约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:37:09.750

如果你只想要一个平面的双打集合：

```
#include <vector>
#include <istream>     //  for operator>>
#include <fstream>     //  for std::ifstream

std::vector<double> v;
for (double d; inputFile >> d; ) { v.push_back(d); } 
```

或更简单：

```
// includes as above
#include <iterator>

std::vector<double> v((std::istream_iterator<double>(inputFile)),
                      std::istream_iterator<double>()); 
```

* * *

如果您想要每行都有一个容器：

```
// includes as above
#include <string>
#include <sstream>

std::vector<std::vector<double>> v;

for (std::string line; std::getline(inputFile, line); )
{
    std::istringstream iss(line);
    v.emplace_back(std::istream_iterator<double>(iss),
                   std::istream_iterator<double>());
} 
```

在逐行方法中，您还可以检查是否已成功到达输入字符串的末尾，或者是否因无效输入而停止并发出诊断信息。如果您想将错误检查发挥到极致，您可以从流中提取单个*字符串*`double`并将它们解析为（使用`std::strtod`）并在失败时发出诊断信息，跳过无法解析的标记：

```
// ...
#include <cstdlib>

for (std::string line; std::getline(inputFile, line); )
{
    std::istringstream iss(line);
    v.emplace_back();

    for (std::string token; iss >> token; )
    {
        char * e;
        double const d = std::strtod(token.c_str(), &e);
        if (*e != '\0') { /* error! skip this token */ continue; }
        v.back().emplace_back(d);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:39:33.803

`while (inputFile.good())`是错误的，因为它仅在读取失败*后*评估为假。如果没有在循环内进行额外检查，最后一次迭代将处理无效输入。正确的惯用方法是将读取放入循环的条件：

```
while (getline(inputFile, line)) { ... } 
```

这样你只有在 getline 成功时才进入循环。`line`现在，您可以使用带有 read inside loop 条件的类似方法从那里构造一个字符串流并从中读取双精度：

```
while (getline(inputFile, line)) {
    istringstream iss(line);
    double d;
    while (iss >> d) input.push_back(d);
} 
```

# python - 将c struct返回给python时出错

> ID：11620834
> 
> 赞同：0
> 
> 时间：2012-07-23T21:31:21.240
> 
> 标签：python, c, ctypes

我有交流功能：

```
extern "C"  __declspec(dllexport) MyStruct foo()
{
    MyStruct s = {0, 0}
    return s;
} 
```

其中 MyStruct 定义为：

```
struct MyStruct{
    uInt32   a;
    uInt32   b;
    void *   c;
}; 
```

我试图在 python 中调用该函数，但总是得到如下错误：

> WindowsError：异常：访问冲突写入 0x00000000

如果我从结构中删除 void * c，那么它可以工作......

那么我应该如何返回 void 指针？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T22:13:50.160

这几乎可以肯定是由于您的 C 编译器和 ABI 上的 ctypes 库在返回对象方面存在分歧。如果没有看到您的 Python 代码，很难说问题是由于返回类型的错误 Python 声明、ctypes 库中的错误还是 C 编译器选择的非标准 ABI 造成的。

对于最便携的行为，我建议更改函数以通过 out 参数返回对象，如下所示：

```
extern "C"  __declspec(dllexport) void foo(MyStruct *ret)
{
    MyStruct s = {0, 0}
    *ret = s;
} 
```

并像这样与它交互：

```
class MyStruct(ctypes.Structure):
    _fields_ = [("a", ctypes.c_uint),
                ("b", ctypes.c_uint),
                ("c", ctypes.c_void_p)]

mylib = ctypes.cdll.LoadLibrary('mylibrary')
foo = mylib.foo
foo.argtypes = [ctypes.POINTER(MyStruct)]

x = MyStruct()
foo(ctypes.byref(x))
# x should now have the return value from the C code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:10:44.947

我看不出你是在分配你的`void*` `c`. 我在任何地方都没有看到它，但它似乎稍后在某处被读取（即`access violation writing 0x00000000`，一个 NULL 指针）。因此，`c`需要在取消引用之前对其进行初始化。

似乎 的值`c`恰好在`0`这里，但并非必须如此。它没有静态存储持续时间，并且您没有对其进行初始化（您仅使用`a`和`b`进行了初始化`{0, 0}`），因此`c`可以具有任何值。碰巧的是，在我的测试用例中，它`c`驻留在已初始化的内存区域中`0`（即使在发布时）。这不能保证。

我敢打赌你正在做类似的事情：

```
MyStruct s = foo();
*((some_type*)s.c) = some_value;  // BLAMOOO! c is uninitialized 
```

你还没有发布使用返回值的代码，所以这是我能给你的最好猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T01:52:36.747

如果您展示您的 Python 代码，将会有所帮助。您需要定义结构和返回类型`foo`：

```
from ctypes import *

class MyStruct(Structure):
    _fields_ = [
        ('a',c_int),
        ('b',c_int),
        ('c',c_void_p)]

mydll = CDLL('mydll')
mydll.foo.restype = MyStruct

r = mydll.foo()
print r.a
print r.b
print r.c 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-23T22:01:38.760

在堆上分配您的结构并返回指向它的指针，而不是在堆栈上分配它。当您在堆栈上分配事物时，它们是短暂的，即它们在从子例程返回时由机器自动释放。

查找`malloc`（`man malloc`）/见这里： http: [//linux.die.net/man/3/malloc](http://linux.die.net/man/3/malloc)

# c++ - 销毁其他人引用的对象

> ID：11620835
> 
> 赞同：1
> 
> 时间：2012-07-23T21:31:22.487
> 
> 标签：c++

假设我的应用程序正在使用一个`Server`具有回调的库对象，它在与客户端建立新连接时`onConnected`传递对对象的引用；`Connection`保留`Server`所有权`Connection`。我想`Connection`在它关闭时销毁它（无论是本地还是远程），但我不确定如何最好地处理通知正在使用连接的应用程序。

显而易见的解决方案是立即进行某种`onDisconnected`回调`delete`，允许应用程序在尝试继续使用它时崩溃，或者将其传递`shared_ptr`并让对象逗留直到应用程序清理它。这两种方法对我来说都不是特别好。前者只是感觉不安全，后者混淆了谁拥有连接的概念，如果应用程序忽略回调，则可能导致泄漏。

是否有一些我缺少的惯用解决方案，或者只是一种更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:34:04.187

对我来说，似乎没有人是该对象的明确所有者，所以我会使用`shared_ptr`. IMO 这正是您需要的那种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:24:19.500

目前尚不清楚您是在编写库组件还是应用程序（或两者兼而有之），但如果您不拥有该对象，那么您无法决定何时销毁它。

但是看看连接句柄通常在 OS 网络库中是如何工作的；当连接关闭时，应用程序的连接句柄不会突然变得无效。应用程序是其连接句柄的所有者，并负责正确关闭它。但最终用于处理连接的实际数据结构归内核所有，并且可以在连接不再实际打开时被丢弃。然后，当尝试使用关闭连接时，应用程序将得到明确定义的错误。

# objective-c - __bridge_transfer 的描述相互矛盾；它避免双重保留吗？

> ID：11620836
> 
> 赞同：1
> 
> 时间：2012-07-23T21:31:25.683
> 
> 标签：objective-c, ios, automatic-ref-counting

迈克·阿什 说：

> 当 __bridge_transfer 用于强制转换时，它告诉 ARC 该对象已被保留，并且 ARC 不需要再次保留它。由于 ARC 取得所有权，它仍然会在完成后释放它。

Clang 文档说：

> (__bridge_transfer T) op 将必须具有不可保留指针类型的操作数强制转换为目标类型，该目标类型必须是可保留对象指针类型。ARC 将在封闭的完整表达式的末尾释放该值，这取决于对局部值的通常优化。

Clang 文档中没有任何地方说 __bridge_transfer 避免了双重保留。它只是说该对象在将来的某个时间被释放。

为什么这很重要？考虑以下代码片段：

```
NSString *value = (__bridge_transfer NSString *)CFPreferencesCopyAppValue(CFSTR("someKey"), CFSTR("com.company.someapp")); 
```

CFStringRef 以 +1 的 retainCount 开始。当它赋值给 value 时，CFStringRef 会再次保留，因为默认情况下，`value`它是强引用的。这导致双重保留。在范围结束时，-release 被发送到`value`，但没有其他东西可以平衡来自 CFPreferences* *Copy* *AppValue 的延迟保留，从而导致内存泄漏。

如何`__bridge_transfer`避免双重保留？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:36:29.003

Clang 的文档与 Mike Ash 一致。它说它执行强制转换，并且对象在作用域结束时被释放。演员阵容期间没有保留。

基本上，`(__bridge_transfer T)`导致该值被视为 type 的已拥有值`T`，就像调用如何`[T new]`返回 type 的已拥有值一样`T`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:48:04.293

When you use "transfer", ARC decrements the objects retain count at the end of what its doing - so in this case, you started with a count of 1, "value" is strong so it increments the count, but the "transfer" causes a decrement so you end up back with 1.

```
NSString *value = (__bridge_transfer NSString *)CFStringCreateMutableCopy(NULL, 1000, CFSTR("Hello World") );
NSLog(@"value retainCount %ld", CFGetRetainCount((__bridge CFTypeRef)value));
NSLog(@"Value = %@", value); 
```

2012-07-23 17:45:49.421 TimeTester[75918:f803] value retainCount 1 2012-07-23 17:45:49.423 TimeTester[75918:f803] Value = Hello World

# android - Android服务，可能与否？

> ID：11620847
> 
> 赞同：1
> 
> 时间：2012-07-23T21:31:52.657
> 
> 标签：android, service, broadcastreceiver

我正在开发一个应用程序，当访问默认的 Android 选项时，我想在其中运行一些服务，即当访问播放音乐或画廊时生成一个`Toast`等等......可以这样做吗？这是我的代码。

这是我在 Main 开始服务的地方`Activity`：

```
if(autoBrightOn){
  startService(new Intent(this, MyService.class));
} 
```

和我的`Service.class`

```
public class MyService extends Service {
    private static final String TAG = "MyService";

    @Override
    public IBinder onBind(Intent intent) {
        Log.w(" ibinder ","");
        return null;
    }

    @Override
    public void onCreate() {
//        Toast.makeText(this, "My Service Created",0).show();
        Log.w(TAG, "onCreate");

            }

   @Override
    public void onDestroy() {
//        Toast.makeText(this, "My Service Stopped",0).show();
//        Log.w(TAG, "onDestroy");
//        player.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started :"+intent+" start id :"+startid,0).show();
//        Log.d(TAG, "onStart");
//        player.start();

        Intent intentBrowseFiles = new Intent(Intent.ACTION_VIEW);
      intentBrowseFiles.setType("image/*");
      intentBrowseFiles.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      startActivity(intentBrowseFiles);                   

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:52:38.970

您可以创建一个自定义`BroadcastReceiver`并监听不同`Intent`的 s 发出。似乎没有“包罗万象” `ACTIVITY_STARTED`，因此您可能需要创建一个非常详细的`Intent`s 列表来收听。这是Android`Intent`参考：

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:39:55.637

是的。创建一个扩展 Service 的类并覆盖 onCreate()、onDestroy() 和 onBind() 方法。在你的主要清单中，把

```
<service android:name=".GameServerService"/> 
```

，但将 .GameServerService 替换为您的服务名称。然后在你的主要课程中，输入：

```
Intent gameServerService = new Intent(this, GameServerService.class); 
```

利用

```
this.startService(gameServerService); 
```

和

```
this.stopService(gameServerService); 
```

如所须。祝你好运！

# javascript - 触发事件的文本字段上的 Selenium，一种模拟人类交互的方法

> ID：11620850
> 
> 赞同：5
> 
> 时间：2012-07-23T21:32:11.097
> 
> 标签：javascript, selenium, angularjs

我正在尝试在 selenium 中测试使用 angularjs 创建的网页。在此页面上是用户将填写的文本字段。当用户在文本字段中键入时，angular 将拾取每次击键并即时显示预览，准确地填写 stackoverflow 问题如何生成预览。:)

我的问题是我无法弄清楚如何测试它。如果我单击文本字段并键入它就可以了。我尝试过 selenium 类型命令、typeKeys 命令，使用 mousedown 和 mouseup 命令，然后使用 typeKeys 来尝试模仿用户打字。但是它们没有像没有触发事件处理程序一样工作。我需要模仿人类打字的方式，以便触发事件。这就是我的想法，但它不起作用。

```
<tr>
  <td>mouseDown</td>
  <td>name=appName</td>
  <td></td>
</tr>
<tr>
  <td>mouseUp</td>
  <td>name=appName</td>
  <td></td>
</tr>
<tr>
  <td>typeKeys</td>
  <td>name=appName</td>
  <td>foobar</td>
</tr> 
```

如果有一种使用javascript的方法也是可以接受的。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:20:56.010

我在使用 Selenium IDE 测试 Angular JS 表单字段时遇到了同样的问题。我尝试了几乎所有已知的焦点、单击、clickAt、keypress 等组合。最后发现起作用的是使用 sendKeys 命令将文本放入字段中。所以在 Selenium-IDE 中，命令是

```
sendKeys | xpath=(//input[@type='text'])[2] | TEXT To Enter 
```

请注意，我使用了 xpath，但我使用什么来标识目标（css=，xpath，//div）并不重要，任何标识符都有效，它只是使用 sendKeys 来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:50:28.867

尝试使用焦点或单击命令。

# php - 我正在尝试在 php 中获取流

> ID：11620852
> 
> 赞同：1
> 
> 时间：2012-07-23T21:32:19.183
> 
> 标签：php, oop, nonblocking

所以我一直在研究更好的架构和运行时性能和流的技术，阅读了文档和博客文章，我现在只是模糊地意识到使用流。我的问题是您将如何解释流、streamWrappers 以及最干净的 OO 实现是什么？

我目前认为我可以使用流函数对象来提高返回应用程序视图和客户端请求处理的速度。但我不知道怎么做。

无论如何...有人明白我在说什么吗？我不认为这是微不足道的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:38:12.143

除非你的“观点”很大，否则你会从流中看到很少的好处。

因此，从我的角度来看，这里有两种可能性：

1.  你认为你可以让事情变得比现在更快
2.  您实际上遇到了性能问题，并认为您可以使用流使事情变得更快。

如果您属于第一类，请不要朝这个方向看。除非您正在处理更大的文件，否则这将是相关的。

如果您属于第 2 类，那么您的瓶颈出现在您视野中的可能性非常小。通常对于 PHP 应用程序，这是应用程序中最快的部分之一。

相反，您应该安装 xdebug，开始使用 Webgrind/Valgrind/KCachegrind/WinCacheGrind 分析和分析您的代码。这将为您提供大量信息，并准确告诉您问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:14:03.390

流真的很简单，它只是一个像流一样工作的资源对象：以线性方式可读和可写，所以我/我们正在处理流，如果每次我们编写一些指定我们响应的内容和方式的代码时都是倾斜的要求。虽然它的功能远不止于此，还有一个名为 pecl_http 的梨扩展，它真正简化了 http 的工作。

# c - 跟踪应用程序访问或创建的文件和文件夹的软件？

> ID：11620854
> 
> 赞同：1
> 
> 时间：2012-07-23T21:32:27.373
> 
> 标签：c, winapi

是否有适用于 windows 的软件可以使用 winapi 或其他东西来检测该应用程序的文件夹访问或文件访问？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T21:35:11.640

[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)在显示进程正在做什么方面做得很好，包括文件和注册表访问。

# java - 替换片段不起作用/我是否以正确的方式执行此操作？

> ID：11620855
> 
> 赞同：20
> 
> 时间：2012-07-23T21:32:29.430
> 
> 标签：java, android, android-fragments

我花了一些时间来思考片段，但这应该是我关于片段的最后一个问题，因为我想我差不多要把它们记下来了。我知道这是一堆乱七八糟的代码。但我会很感激你的帮助，以确保我没有用碎片打破任何基本规则。

我将发布我所有的代码，只是为了看看是否有人可以“查看它”，看看我是否犯了任何重大错误，或者我是否应该走一条更简单的路线。最后，如标题所述，我的片段没有被替换......它会被添加到顶部。

文件树：

![在此处输入图像描述](../Images/f31616121b5fbabfea4f543a959f1109.png)

MainActivity.java：

```
package com.example.learn.fragments;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;

public class MainActivity extends FragmentActivity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /* Add a class to handle fragment */
    public static class SSFFragment extends Fragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            View v = inflater.inflate(R.layout.choose_pill_frag, container,
                    false);
            return v;
        }
    }

    public void red(View view) {

        // Create new fragment and transaction
        ExampleFragments newFragment = new ExampleFragments();
        android.support.v4.app.FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack
        transaction.replace(R.id.frag, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }

    public void blue(View view) {
        //Figure out code for "red" first
    }

} 
```

ExampleFragments.java：

```
package com.example.learn.fragments;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class ExampleFragments extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.red_pill_frag, container, false);
    }
} 
```

ActivityMain.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/frag"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.learn.fragments.MainActivity$SSFFragment" />

</RelativeLayout> 
```

choose_pill_frag.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:onClick="blue"
        android:src="@drawable/blue" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:onClick="red"
        android:src="@drawable/red" />

</RelativeLayout> 
```

red_pill_frag.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="You stay in Wonderland and I show you how deep the rabbit-hole goes."
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

应用程序应显示两个按钮。这两个按钮存在于单个片段中，然后如果您点击一个按钮，该片段将被替换为显示正确文本的新片段。截至目前，它应该替换，但它似乎只是将它添加到顶部。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-29T14:55:47.680

而不是在布局 xml 中`<fragment>`用于`<FrameLayout>`活动。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container_id"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

然后在`FragmentActivity`添加`onCreate`初始片段（在你的情况下`SSFFragment`）：

```
 FragmentA fragmentA = new FragmentA();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.container_id, fragmentA);
    transaction.commit(); 
```

从片段内部，您可以替换容器中的片段。

```
class FragmentA extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Button button = new Button(getActivity());
        button.setText("Replace");
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
                FragmentB fragmentB = new FragmentB();
                transaction.replace(R.id.container_id, fragmentB);
                transaction.commit();
            }
        });
        return button;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T22:46:53.280

这是您真正问题的答案...由于这是[您原始帖子](https://stackoverflow.com/questions/11619573/fragment-add-or-replace-not-working/16451356#16451356)产生的第二个问题，因此我修改了解决方案以另一种方式解决该问题：

```
Fragment details = (Fragment)getSupportFragmentManager().findFragmentById(R.id.details);
details = new ExamplesFragment();
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.replace(R.id.details, details);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.commit(); 
```

此外，**android.support.v4.app**部分不是必需的，坦率地说，通过在代码中添加和删除它可能会导致“走错路”类型的努力（只要你使用： )

```
import android.support.v4.app.FragmentTransaction; 
```

在这个我的示例中，您不需要导入对 FragmentManager 的支持。但是，如果您遇到错误，请确保您已将库本身导入到“libs”文件夹中。

该解决方案将解决重叠片段问题，并有望节省人们在更换片段方面进行修补的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T07:00:24.797

好吧，我遇到了同样的问题，我只是用线性布局替换主布局中的片段，然后猜测它的工作原理。它奇怪的是不知道它是如何工作的。我正在使用操作栏在片段之间切换以替换我的代码是：

```
 protected class MyTabsListener1 implements ActionBar.TabListener{
        private Fragment frag ;
        public MyTabsListener1 ( Fragment frag){
            this.frag = frag;
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            //  TODO Auto-generated method stub

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

                switch (tab.getPosition()){
                case 0:

                        ft.replace(R.id.replace, homeFrag);
                    break;

                case 1:
                    ft.replace(R.id.replace, createFrag);
                        break;

                case 2:
                    ft.replace(R.id.replace, ioListFrag);
                    break;
                case 3:

                    ft.replace(R.id.replace, settingFrag);

                    break;      

                default: 

                    break;

                }

            } 
```

我的主要布局是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:id="@+id/replace"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:53:37.903

简而言之，如果您在 XML 中使用片段标记定义片段，则不能替换片段。相反，正如@pawelzieba 建议的那样，在您的布局中添加 Frame 标签，找到它并在那里添加、删除、替换片段。希望它有所帮助。干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T02:34:11.093

使用片段的主要好处是能够让它们占据屏幕的一部分而不是整个屏幕，这正是活动所做的。

如果您只是为一个功能类似于 Activity 的小屏幕制作应用程序，但使用 Fragments 进行编码，则只需`FragmentActivity`为每个 Fragment 单独制作一个。

将其设为 FragmentActivity 的 onCreate：

```
public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.emptylayout);

    FragmentManager fragmentManager = getSupportFragmentManager(); //Or getFragmentManager() if you're not using the support library
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();
    YourFragment fragment = new YourFragment();
    fragmentTransaction.add(R.id.emptyview, fragment);
    fragmentTransaction.commit();
} 
```

其中 layout/emptylayout 是一个带有 FrameLayout 的 XML 布局文件。id/emptyview 就是那个FrameLayout。

如果您想为片段的实际布局使用 XML，请为实际片段制作单独的 XML 布局，并在片段的 `onCreateView' 中对其进行扩充：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.files, container, false);
            // Do stuff here
    return view;
} 
```

然后只需使用`startActivity(new Intent(getActivity(), YourFragmentActivity.class))`从 Fragment 启动 FragmentActivity。

是的，这似乎是多余的，但是如果您以后要针对更大的屏幕（如果不是，那您为什么要为片段烦恼？），从长远来看，它将使事情变得更容易。

# ruby-on-rails-3 - 使用嵌套资源计数的rails 3查询

> ID：11620856
> 
> 赞同：1
> 
> 时间：2012-07-23T21:32:32.267
> 
> 标签：ruby-on-rails-3

考虑我有 3 个表：用户 (has_many) -> 网站 (has_many) -> 访问。如果不编写普通的 sql 代码，如何找出每个用户的总访问次数？

我有一个我不太自豪的想法，因为我让 rails 来代替 mysql 做数学：

```
count = 0
user.websites.each |website|
    count += website.visits.count() 
```

我是 Rails 的新手，也许我缺少一些文档。是否可以仅从查询生成器中找出该计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:37:20.027

您可以定义用户通过网站进行多次访问，如下所示：

```
class User < ActiveRecord::Base
  has_many :websites
  has_many :visits, :through => :websites
end 
```

现在，如果你这样做

> some_user.visits.count

这个sql被执行：

```
(0.4ms)  SELECT COUNT(*) FROM "visits" INNER JOIN "websites" ON "visits"."website_id" = "websites"."id" WHERE "websites"."user_id" = 1
=> 8 
```

也就是说，ActiveRecord 会为您创建 SQL 查询。

# ajax - Ajax 调用后 MVC Webgrid 分页和排序停止工作

> ID：11620857
> 
> 赞同：0
> 
> 时间：2012-07-23T21:32:37.837
> 
> 标签：ajax, asp.net-mvc, sorting, paging, webgrid

我创建了一个 MVC 应用程序，它使用 webgrids 在我的视图上显示数据。在我的网格工具栏中，我有下拉菜单、文本框和一个搜索按钮，它们调用 Jquery 来执行各种操作。例如，如果我单击搜索按钮，我会根据文本条目通过 Ajax 刷新网格。在与 webgrid（页面或排序）发生交互之前，这一切都很好。我们注意到，如果进行了任何 ajax 调用，那么排序和分页将不再起作用。此外，如果我先加载页面和页面或排序，那么我的 JavaScript 都不起作用。我一直在研究这个问题，但没有看到任何具体的解决方案。有没有人有解决方案的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:17:56.490

我敢打赌你正在使用类似的东西在 document.ready 函数中附加你的 jquery 处理程序`$("#Sort").click(function(){});`。当您通过 AJAX 调用重新加载网格时，不会重新附加 jquery 处理程序，因为没有重新加载 DOM。尝试使用类似的东西`$("#Sort").live('click', function(){});`，一旦它出现在页面上，它会将处理程序附加到您的标识符的任何实例。

这是一个完整的猜测，因为您没有发布任何代码，但是这个和您上面引用的帖子（[SO post](https://stackoverflow.com/questions/9903420/paging-sorting-not-working-on-web-grid-used-in-partial-view)）似乎已经解决了您的问题。

# html - 无法更改导航栏的文本定位

> ID：11620863
> 
> 赞同：0
> 
> 时间：2012-07-23T21:33:26.477
> 
> 标签：html, css, frontend

代码请访问[http://coloradohypnosis.com.s51572.gridserver.com/](http://coloradohypnosis.com.s51572.gridserver.com/)

在导航栏中，我无法让文本居中对齐导航项目，例如“主页”、“其他人在说什么”、“期待什么”等。

当前的对齐方式略微倾斜了设计。我玩过 Chrome 的开发者工具来更改浏览器中的 CSS，但我没有做任何事情来改变文本的对齐方式。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:52:26.397

我建议将左右填充更改为相同的值，这样它将在左右部分添加相同的填充以使锚元素中的文本居中对齐。例如：

```
#nav ul li a { padding: 34px 0.5em 18px 0.5em } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:39:04.397

我建议将`a`标签设置为`text-align:center`，`display: block`然后将相等的左右填充添加到 a 标签。也许将`li`标签设置`text-align:center`得太确定：p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:36:14.200

更改 style.css 中的锚填充（第 41 行）：

```
#nav ul li a 
```

# jquery - jquery treeview 仅突出显示当前项目

> ID：11620870
> 
> 赞同：0
> 
> 时间：2012-07-23T21:34:06.997
> 
> 标签：jquery, treeview, highlighting

需要一点帮助：我正在使用 jquery treeview 插件（这个：[http](http://bassistance.de/jquery-plugins/jquery-plugin-treeview/) ://bassistance.de/jquery-plugins/jquery-plugin-treeview/ ）。我想突出显示当前项目。我是这样做的：

CSS：

```
.filetree li .clicked {
    font-weight: bold;
} 
```

和JS代码：

```
$('li').live('click', function(event){
    event.stopPropagation();
    console.log(this.id);
    $('.clicked').removeClass('clicked');
    $(this).addClass('clicked');
    return false;
}); 
```

一切正常，但所有项目与其子元素一起突出显示，并且根元素没有整体突出显示。

如何仅突出显示当前项目？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:21:42.810

好的，正确的方法是：

```
 $(event.target).addClass('clicked'); 
```

代替

```
 $(this).addClass('clicked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:54:30.480

问题可能是您将`bold`字体应用于整个`li`元素。如果您查看标记，就会发现它`li`有一个`ul`子元素，它代表了它的所有子元素。

因此，在您的 css 中，您应该尝试仅将 应用于`bold`具有`span`名称的节点，而不是整个`li`节点：

```
.filetree li.clicked > span {
  font-weight: bold;
} 
```

有关子选择器的信息，请参见此处：

[http://www.w3.org/TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)

# mysql - 从 JOIN 更新列

> ID：11620872
> 
> 赞同：4
> 
> 时间：2012-07-23T21:34:13.027
> 
> 标签：mysql, sql, database

我有一张`t1`我`PRIMARY KEY`会打电话的桌子`ITEM_ID`。表格如下：

```
ITEM_ID    VALUE1
2          2500
3          3500
5          5500 
```

我还有几张桌子`t2`，`t3`就像这样：

```
ITEM_ID    VALUE2
2          250
3          350
4          450
5          550 
```

和

```
ITEM_ID    VALUE3
2          25
3          35
4          45
5          55
6          65 
```

我想获得这个（我加入只保留在 中找到的行`t1`）

```
ITEM_ID    VALUE1    VALUE2    VALUE3
2          2500      250       25
3          3500      350       35
5          5500      550       55 
```

我知道如何使用一个`JOIN`和`CREATE`一个新表来做到这一点。但是是否可以仅通过`ALTER`,`ADD`和`UPDATE`列来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T21:46:36.303

```
ALTER TABLE t1 ADD VALUE2 INT, ADD VALUE3 INT;

UPDATE t1 a
JOIN   t2 b ON a.ITEM_ID = b.ITEM_ID
JOIN   t3 c ON a.ITEM_ID = c.ITEM_ID
SET    a.VALUE2 = b.VALUE2,
       a.VALUE3 = c.VALUE3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:47:34.397

You can either use a Stored Procedure which may be overkill, or execute two queries. If you want to perform your JOIN first, this is what you'll do:

```
mysql> SELECT t1.ITEM_ID, t1.VALUE1, t2.VALUE2, t3.VALUE3 FROM t1 LEFT JOIN t2 ON t2.ITEM_ID = t1.ITEM_ID LEFT JOIN t3 ON t3.ITEM_ID = t1.ITEM_ID
    -> ;
+---------+--------+--------+--------+
| ITEM_ID | VALUE1 | VALUE2 | VALUE3 |
+---------+--------+--------+--------+
|       2 | 2500   | 250    | 25     |
|       3 | 3500   | 350    | 35     |
|       5 | 5500   | 550    | 55     |
+---------+--------+--------+--------+
3 rows in set (0.00 sec)

mysql> 
```

Next if you want to create a new table with these values, you then can do this:

```
CREATE TABLE my_temp_table (SELECT t1.ITEM_ID, t1.VALUE1, t2.VALUE2, t3.VALUE3 FROM t1 LEFT JOIN t2 ON t2.ITEM_ID = t1.ITEM_ID LEFT JOIN t3 ON t3.ITEM_ID = t1.ITEM_ID); 
```

If you want to perform an update on the data, use your original join but convert to an UPDATE instead:

```
UPDATE t1 LEFT JOIN t2 ON t2.ITEM_ID = t1.ITEM_ID LEFT JOIN t3 ON t3.ITEM_ID = t1.ITEM_ID SET t1.VALUE1 = 'someValue' WHERE t1.ITEM_ID = 'someId'; 
```

Here is the build up for tests:

```
mysql> CREATE TABLE t1 (ITEM_ID INT NOT NULL AUTO_INCREMENT, VALUE1 VARCHAR(24) NOT NULL, PRIMARY KEY (ITEM_ID));
Query OK, 0 rows affected (0.01 sec)

mysql> INSERT INTO t1 VALUES (2, 2500), (3, 3500), (5, 5500);
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> CREATE TABLE t2 (ITEM_ID INT NOT NULL AUTO_INCREMENT, VALUE2 VARCHAR(24) NOT NULL, PRIMARY KEY (ITEM_ID));
Query OK, 0 rows affected (0.00 sec)

mysql> CREATE TABLE t3 (ITEM_ID INT NOT NULL AUTO_INCREMENT, VALUE3 VARCHAR(24) NOT NULL, PRIMARY KEY (ITEM_ID));
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO t2 VALUES (2, 250), (3, 350), (4, 450), (5, 550);
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> INSERT INTO t3 VALUES (2, 25), (3, 35), (4, 45), (5, 55), (6, 65);
Query OK, 5 rows affected (0.00 sec)
Records: 5  Duplicates: 0  Warnings: 0 
```

# android - Android 相当于 iOS MobileSubstrate 风格的挂钩？

> ID：11620873
> 
> 赞同：2
> 
> 时间：2012-07-23T21:34:20.053
> 
> 标签：android, iphone, hook, jailbreak

什么是 Android 等效的 MobileSubstrate 样式挂钩（如果有的话）？我需要了解在合理的时间内挂钩到数字化仪事件流以拦截并对手势/触摸进行自定义处理是否可行和可行。

澄清：必须为所有应用程序执行此操作。目前我有一个过滤到 UIKit 的调整，所以它到处加载。有没有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T05:46:44.127

Saurik 宣布 CydiaSubstrate 适用于 2.3 至 4.2 版本支持的 Android 设备，包括 Kindle Fire、CyanogenMod 和 Intel。您需要先root您的设备才能使其正常工作。您可以在[CydiaSubstrate For Android](http://veryrite.com/2013/05/15/cydiasubstrate-for-android/)上阅读更多内容，并从[CydiaSubstrate](http://www.cydiasubstrate.com/download/com.saurik.substrate.apk)或[GooglePlay 商店](https://play.google.com/store/apps/details?id=com.saurik.substrate)下载。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T03:09:19.720

完成问题/答案序列：似乎没有。Objective-C 的动态自省功能是类似 smalltalk 的消息传递的结果。Java/C 没有。另一方面，.Net 与反射很接近。结案。

# c++ - 如何将数组指针传递给函数

> ID：11620875
> 
> 赞同：0
> 
> 时间：2012-07-23T21:34:26.683
> 
> 标签：c++

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

typedef vector <double> record_t;
typedef vector <record_t> data_t;

int sorted(int *data,int max_record_size)
{

}

int main()
{
    // Here is the data we want.
    data_t data;

    // Here is the file containing the data. Read it into data.
    ifstream infile( "sort.txt" );
    infile >> data;

    // Complain if something went wrong.
    if (!infile.eof())
    {
        cout << "Fooey!\n";
        return 1;
    }

    infile.close();

    // Otherwise, list some basic information about the file.
    cout << "Your CSV file contains " << data.size() << " records.\n";

    unsigned max_record_size = 0;
    for (unsigned n = 0; n < data.size(); n++)
        if (max_record_size < data[ n ].size())
            max_record_size = data[ n ].size();
    cout << "The largest record has " << max_record_size << " fields.\n";
    int i;
    for (i=0; i <= max_record_size; i++)
    {

        cout << "your data contains " << data[ 0 ][ i ] << ".\n";
        int temp[max_record_size];

        sorted(&data,max_record_size);

        //cout << "Your sorted data contains" << sorted [0] [i] << ".\n";
    }

    cout << "Good bye!\n";
    system("PAUSE");

    return 0;
} 
```

> 无法将`data_t*' to`int*' 转换为参数`1' to`int sorted(int*, int)'

我试图将我的数据指针传递给我的排序函数，它应该是一个包含我的数字列表的数组，我到底做错了什么，请你详细解释一下，以便我理解，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:41:14.853

你没有数组。C（或 C++）中的数组将只是一个整数列表，您可以像以前一样传递它。

但是，您有一个向量（我猜 record_t 最终是一个 int）。vector<> 的行为很像数组，但它们不是，它们是实际的对象。

您可能想要做的是将您的函数编写为

```
int sorted(data_t& data, int max_record_size) 
```

你的电话就像

```
sorted(data,max_record_size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:41:16.413

`data_t`是一个`vector<vector<double>>`。这甚至不接近整数数组。您只需要编写一个处理 data_t 而不是 ints 的函数。

如果该函数应该排序，`data`那么您应该使用`std::sort`，为此您需要编写一个比较函数，该函数可以比较 的两个元素，`data`以便查看排序结果中哪个元素应该排在另一个之前。

这是一个使用带有 lexicographical_compare 的 lambda 提供这种比较函数的示例。

```
sort(begin(data),end(data), [](record_t const &lhs,record_t const &rhs) {
    return lexicographical_compare(begin(lhs),end(lhs),begin(rhs),end(rhs));]
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:07:18.773

尝试将 a 传递**`reference`**给原始向量。为什么？

*   您仍然想使用原始矢量而不制作副本
*   您不能传递`null`引用，因此参数始终有效
*   你没有做任何指针算术，所以要安全并使用**`reference`**

    ```
    int sorted(data_t& data, int max_record_size)
    {             
    } 
    ```

像这样传递你的`data_t`结构：

```
sorted(data, max_record_size); 
```

现在您可以访问`sorted`函数内的 data_t 结构。

**还**

你知道你的代码不会编译吗？

*   `unsigned max_record_size`并且`int temp[max_record_size]`无效。如果要在堆栈上分配数组，则需要使用常量大小。
*   处理 的类中的`>>`运算符没有重载，因此该语句也被破坏：`istream``vector<vector<double>>``infile >> data;`

# php - 保护我的网站管理区域

> ID：11620878
> 
> 赞同：1
> 
> 时间：2012-07-23T21:34:32.890
> 
> 标签：php

所以我正在为我的网站构建一个 GUI 管理区域。我将是唯一一个登录的人，它只会显示来自我的数据库的干净（可打印）信息布局。

这就是我为安全所做的事情。让我知道您是否认为这很好以及我可以如何改进。

1.  所有页面上的标题检查`admin == true`或死/重定向
2.  因为我家里有一个专用IP，所以我只会在家登录。我制作了所有页面，包括登录表单页面检查我的 IP `$_SERVER['REMOTE_ADDR'];`！= 标头重定向
3.  我的登录脚本在文件夹权限中`dir`设置`700`。
4.  我的登录名和密码总共包含 10 个字母、数字和特殊字符的组合。PW 存储为 SHA2 HASH
5.  我的登录脚本检查`regex`之前`sql`和我的凭据存储在单独的管理表中
6.  整个网站都在 SSL 上。

那么这安全吗？我可以做更多吗？这是矫枉过正吗？请分享您的意见和建议（尤其是关于我的 IP 检查。可以绕过吗？）

用于转义不良数据 - 与`regex`每个字段一起使用

```
function escape_data ($data) {
    if (function_exists(‘mysql_real_escape_string’)) {
        global $dbc;

        $data = mysql_real_escape_string (trim($data), $dbc);
        $data = strip_tags($data);
} else {
        $data = mysql_escape_string (trim($data));
        $data = strip_tags($data);
        }
        return $data;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:42:31.220

*对于管理页面来说，没有什么*是矫枉过正的。您需要尽可能多的安全性。

至于你的方法，大部分都还不错，但有一些建议：

*   设置`chmod`为 700 不会阻止其他人至少访问管理页面（我假设这就是您使用它的目的），因为它是访问文件的 Web 服务器，无论是谁发出 HTTP 请求。
*   与检查相比`$_SERVER['REMOTE_ADDR']`，创建一个唯一的用户 SSL 证书并只允许具有该用户证书的计算机（即您的）访问该站点可能更安全（也更容易）。这可以在您的 Apache 设置中完成（如果您设法设置 SSL，您可以返回并在您的 SSL 上设置用户认证），解决`chmod`问题，并防止人们欺骗您的 IP 进入您的管理页面。
*   如果您不需要通过 SSH 连接到您的家庭计算机，请禁用 SSH 守护程序。这将（希望）防止其他人以您的计算机为目标来攻击您的服务器。

这些是我能想到的第一件事。当他们来找我时，我会添加更多。

编辑：**对，记录！**记录在您的管理页面上发生的*所有事情。*一切。对于 SSL，对于请求，对于数​​据库访问，对于一切。然后获取一个日志监视程序（例如：）[`logwatch`](http://sourceforge.net/projects/logwatch/files/)来监视它的可疑活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:39:15.503

*   您是否还在[cookie](http://php.net/manual/en/function.setcookie.php)上设置了安全、域和仅 http 标志？

> 我的登录脚本在 sql 之前检查正则表达式，并且我的凭据存储在单独的管理表中

*   这听起来像你做错了什么。你不使用[准备好的陈述](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)吗？
*   你在使用[CSRF 保护](http://en.wikipedia.org/wiki/Cross-site_request_forgery)吗？
*   你在防止[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)吗？
*   你有办法防止暴力破解吗？无论是在您的网站上还是在您的服务器上？
*   [您是否在数据库](http://php.net/manual/en/function.crypt.php)中散列密码？你用什么算法来做这个？
*   您是否在服务器上安装了[入侵检测](http://www.ossec.net/)？

请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

PS 据我所知，该`$_SERVER['REMOTE_ADDR']`变量使用起来非常安全，因为我认为可利用的唯一方法是攻击者通过您的机器代理或欺骗 IP。而且（错误时纠正我）两者都很难做到。

PS 2：

看到你在你的代码中使用，也请停止使用它[:-)](http://misko.hevery.com/2008/11/11/clean-code-talks-dependency-injection/)`global`有关此手表的更多信息，请参阅一般的依赖注入和[SOLID 编程](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))。与安全无关，只是编程的最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:47:22.850

确保您使用准备好的 SQL 语句，使用暴力破解保护（以防有人在您的 PC 上获得代理）并且*不*使用 SHA2。SHA2 是一种糟糕的、无用的哈希密码方法。查看`crypt`函数或使用 pkbdf，或者至少；一个原始的 sha512。（参见“哈希”函数）

# python - Django Tastypie，创建用户后做的事情

> ID：11620880
> 
> 赞同：0
> 
> 时间：2012-07-23T21:34:48.043
> 
> 标签：python, django, tastypie

在我使用 Tastypie 创建（发布）用户后，我想向我的用户配置文件模型添加一些值。

这只是一种情况，我还有其他情况，我可能想更改我的美味派资源中的数据 PRE 或 POST 保存。这是可能的还是我将如何实现这一目标？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:48:00.023

Will a [signal](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save) do what you want?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:20:12.873

您还可以在 Tastypie 用户资源上覆盖 obj_create。这将使您可以访问用户对象所在的包，并且您可以将更多值放入那里的字段。这是一个例子：

```
def obj_create(self, bundle, request=None, **kwargs):
    try:
        username = bundle.data['username']
        password = bundle.data['password']
        bundle.obj = User.objects.create_user(username,password)
        # add more stuff here

        bundle.obj.save()
        return bundle 
```

# php - 如何使 wp_editor 在可视模式下启动

> ID：11620881
> 
> 赞同：4
> 
> 时间：2012-07-23T21:34:48.867
> 
> 标签：php, wordpress, tinymce

我尝试用标记制作一个漂亮的文本区域。我的用户超过 40 岁，所以他们需要一个所见即所得的编辑器来立即加载。

我使用 wordpres 来加载这样的字段：

```
<form style="clear:both" method='post' action="./?id=<?= $_GET['id'] ?>">
<?php wp_editor(getUserData('message'), 'message'); ?>
<div id="message" ></div >
<input type="submit" name='action' value="opslaan">
</form> 
```

但这会以 html 方式加载 wordpres 的编辑器。他们绝对不会明白他们需要推动视觉来获得漂亮的编辑器。那么有谁知道如何让它默认以可视模式加载？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T16:45:16.407

[这](http://trepmal.com/filter_hook/wp_default_editor/)对我有用（Wordpress 3.5.2）：

```
add_filter( 'wp_default_editor', 'force_default_editor' );
function force_default_editor() {
    //allowed: tinymce, html, test
    return 'tinymce';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T08:52:01.810

你可以使用这个：

```
add_filter( 'wp_default_editor', create_function('', 'return "tinymce";') ); 
```

如果您不想更改所有网站的默认行为，就在您的页面中

# c# - 如何从 IHTMLElement 中检索 aspx 父名称

> ID：11620882
> 
> 赞同：0
> 
> 时间：2012-07-23T21:35:05.820
> 
> 标签：c#, .net, ihtmldocument2

我正在寻找从 IHTMLElement 的父级获取 *.aspx 页面名称。我开始查看 IHTMLElement 上的属性，并且文档属性看起来很有希望。

我只需要按如下方式进行投射吗？

```
IHTMLElement elem;
elem = getElement(args);
IHTMLElement2 dom = (IHTMLElement2)elem.document;
string aspx = dom.<something?>; 
```

这似乎不起作用，但我觉得我在正确的轨道上。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:59:37.670

```
 HTMLDocument doc = somedoc;

        Regex pullASPX = new Regex(@"(?<=\/)[^//]*?(?=\.aspx)");
        if (elem != null && !doc.url.Contains("default.aspx"))
        {
            EchoAbstraction.page = pullASPX.Match(doc.url).Value;
            EchoAbstraction.tag = tagName;
            EchoAbstraction.id = elem.id;
        } 
```

这就是我最终做到的方式。我已经在 dom 中找到了 ID，所以我只是拉出当前的文档页面并解析了 URL。

# postgresql - 如果它们所在的表不存在，如何删除外键？

> ID：11620886
> 
> 赞同：2
> 
> 时间：2012-07-23T21:35:33.250
> 
> 标签：postgresql, corruption, postgresql-8.4

设想：

```
DELETE FROM table_x WHERE id not in (1,2,3,4) 
```

回复：

> 表“table_x”上的更新或删除违反了表“table_y”上的外键约束“fk1” 详细信息：键（table_x_id）=（7）仍然从表“table_y”中引用。

*   清空所有记录的“table_y”
*   FK 未显示在“table_y”的 FK 列表中
*   完全删除表'table_y'

我们仍然收到此消息，因此假设表中某处存在 rouge 记录`pg_constraints`。寻找约束“fk1”，我们找到两条记录并删除它们。

询问：

```
delete from pg_constraint where conname = 'fk1' 
```

现在我们得到这个错误：

> [Err] 错误：约束 868152 的缓存查找失败

在这一点上，我相当肯定我们需要清理一些记录，但不确定如何 - 任何人都有这方面的经验可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:39:41.843

这听起来像是一个糟糕的索引。请注意，这里的解决方案是部分的。你需要找出根本原因是什么。我过去看到的原因包括硬盘驱动器和 RAM 故障，以及 CPU 过热或故障。

外键约束命中唯一索引。如果您在这里看到奇怪的行为，则问题可能是一个错误的索引。尝试重新索引所涉及的表甚至整个数据库以解决问题。

我不认为这是由于没有吸尘造成的。xid 环绕在发生时是令人讨厌的，但最近的版本竭尽全力防止这种情况发生。可能这充其量是索引损坏。如果不是这样，那就是数据损坏（请注意，索引损坏在 IME 中发生的频率要高得多，但数据损坏的原因都是一样的，所以要找到问题统计的根源）。

# javascript - 为什么 Firefox 中的 offsetHeight 不同

> ID：11620888
> 
> 赞同：1
> 
> 时间：2012-07-23T21:35:36.213
> 
> 标签：javascript

以下代码在 IE 和 Chrome 中以及在大多数 FireFox 安装中为 offsetHeight 产生 15，但我遇到了一些情况（到目前为止，3 台计算机）FF 产生 14。我卸载并重新安装了 FF，仍然得到相同的结果。

```
<html>
<head>
<style type="text/css">

body {
    font-size: 12px;
}
</style>
</head>

<body>
    <span id="abc">ABC</span>

<script>
console.log(document.getElementById('abc').offsetHeight);
</script>

</body>
</html> 
```

我已经比较了文本的实际像素高度，并且在浏览器之间是相同的。如果我在文本周围放置一个边框，它会显示 Chrome 在文本顶部和顶部边框之间留下三个像素（底部也是如此），而 FF 在顶部留下两个像素，在底部留下三个像素。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:43:46.657

您的代码以[“怪癖模式”](http://en.wikipedia.org/wiki/Quirks_mode)呈现。尝试`doctype`在第一行添加一个来触发标准模式。这应该会消除渲染中的一些怪癖。还要考虑[CSS 重置](http://html5doctor.com/html-5-reset-stylesheet/)以规范其他一些浏览器怪癖。

```
<!DOCTYPE html>
<html>
    <head> 
```

我还必须提到，[您不需要 DTD 来触发标准模式](http://en.wikipedia.org/wiki/Document_Type_Declaration#HTML5_DTD-less_DOCTYPE)。您只需要 doctype 声明。

> DOCTYPE 在 HTML5 中保留为“大部分无用但必需的”标头，仅用于在普通浏览器中触发“标准模式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:45:19.070

使用严格的文档类型，并进行 css 重置：

```
* {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:57:19.110

这是内联元素的问题，例如`<span/>`.

如果添加这个 css，它将限制 #abc 元素的行高并将其显示类型更改为 inline-block 以便它在某些方面仍然可以像内联元素一样工作：

```
#abc {
    display: inline-block;
    line-height: 12px;
} 
```

这是我能想到的最好的解决方案，也是所有浏览器似乎都同意的解决方案。众所周知，[.offsetHeight 和 .offsetWidth 跨浏览器不一致](http://vadikom.com/dailies/offsetwidth-offsetheight-useless-in-ie9-firefox4/)，但是，我只能将问题隔离到内联元素，而无需深入研究 W3C 文档或错误报告。

# c# - 如何在 C# 中使用多个引用编辑快捷方式的目标路径

> ID：11620899
> 
> 赞同：2
> 
> 时间：2012-07-23T21:36:21.123
> 
> 标签：c#, visual-studio-2010, ms-access-2007, shortcut

我正在使用 WshShell VS2010 .Net 4 和 ant 创建一个快捷方式，以便能够创建一个引用 AccessRuntinme 然后是我们的应用程序的目标路径。这是我到目前为止没有错误的，直到我运行程序并单击按钮。

```
 private void CreateShortCut64()
    {
        object shDesktop = (object)"Desktop";
        WshShell shell = new WshShell();
        string shortcutAddress = (string)shell.SpecialFolders.Item(ref shDesktop) + @"\LinkName.lnk";
        IWshShortcut shortcut = (IWshShortcut)shell.CreateShortcut(shortcutAddress);
        string targetPath64 = "\"C:\\Program Files (x86)\\Microsoft Office\\Office12\\MSACCESS.EXE\" \"C:\\Program Files (x86)\\My Program\\Prog.accdr\"";
        shortcut.Description = "Program";
        shortcut.Hotkey = "Ctrl+Shift+A";
        shortcut.TargetPath = targetPath64;
        shortcut.IconLocation = "c:\\Program Files (x86)\\My Program\\" + @"\Prog.ico";
        shortcut.Save();
    } 
```

如果我省略了对 Access Runtime 的引用并且只将我的程序作为目标，那么上面的示例可以正常工作，但是我希望在通过 Windows 编辑目标时可以正常工作的目标中同时包含这两个。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:47:57.150

I suspect that it is because you are not setting MS Access to run-time mode:

```
"C:\Program Files (x86)\Microsoft Office\Office12\MSACCESS.EXE" /runtime "C:\Program Files (x86)\My Program\Prog.accdr" 
```

Edit re comments

```
shortcut.TargetPath = "\"C:\\Program Files (x86)\\Microsoft Office\\Office12\\MSACCESS.EXE\";
shortcut.Arguments = "\"C:\\Program Files (x86)\\My Program\\Prog.accdr\" /runtime"; 
```

I tested with MS Access 2010 x64 installed, so the path names are different, otherwise the code is pretty similar to the OP.

```
object shDesktop = (object)"Desktop";
WshShell shell = new WshShell();
string shortcutAddress = (string)shell.SpecialFolders.Item(ref shDesktop) + @"\LinkName.lnk";
IWshShortcut shortcut = (IWshShortcut)shell.CreateShortcut(shortcutAddress);
shortcut.Description = "Program";
shortcut.Hotkey = "Ctrl+Shift+A";
shortcut.TargetPath = "\"C:\\Program Files\\Microsoft Office\\Office14\\MSACCESS.EXE\"";
shortcut.Arguments = "\"C:\\Program Files (x86)\\My Program\\Prog.accdr\"  /runtime";
shortcut.IconLocation = "c:\\Program Files (x86)\\Abtrac\\" + @"\Prog.ico";
shortcut.Save(); 
```

# c#-4.0 - 如何将运算符作为参数传递给函数，我正在用 C# 做计算器

> ID：11620900
> 
> 赞同：1
> 
> 时间：2012-07-23T21:36:25.687
> 
> 标签：c#-4.0, arguments, calculator

```
 public int MainOperationSimplifeid(char operatoru)
    {
        if (beforeoperation == 2)
        {
            a2 = Convert.ToInt32(textBox1.Text);
            textBox1.Text = "";
            result = a1 operatoru a2;
            //   textBox1.Text = Convert.ToString(result);
            a1 = 0;
            a2 = 0;
        }
        beforeoperation++;
        return result;
    } 
```

> a1, a2 - 表示程序中的两个数字，结果是执行的 > 操作的答案

我正在考虑使用一个字符或其他类似的参数来减少我在程序中其他地方使用的所有运算符

但我无法将 +、* 替换为两个整数之间的字符。:(

你们能帮忙，哪个 inbult 函数或参数可以将我的所有运算符替换为单个变量，以便我可以将它作为我的参数传递。

感谢您回答我的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-02T16:05:05.097

这种事情可以用代表来完成。内置委托类型`Func<T1, T2, T3>`表示接受两个参数并返回结果的代码。

```
public int MainOperationSimplifeid(Func<int, int, int> operatoru)
{
    if (beforeoperation == 2)
    {
        a2 = Convert.ToInt32(textBox1.Text);
        textBox1.Text = "";
        result = operatoru(a1, a2);
        //   textBox1.Text = Convert.ToString(result);
        a1 = 0;
        a2 = 0;
    }
    beforeoperation++;
    return result;
} 
```

然后您可以使用 lambda 调用该方法：

```
var addResult = MakeOperationSimplifeid((x, y) => x + y);
var multResult = MakeOperationSimplifeid((x, y) => x * y); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T21:49:18.410

I think you can't make that, because the compiler needs the operator to compile the program. So, as I can see, the solution could be a `enum`, Something Like this:

```
Enum Operator {
     Addition, Substraction, Multiplication, Division 
};

public double MainOperationSimplified(Operator operatoru)
{
    if (beforeoperation == 2)
    {
        a2 = Convert.ToInt32(textBox1.Text);
        textBox1.Text = "";

        switch (operatoru) {
            case Addition:
               result = a1 + a2;
               break;
            case Substraction:
               result = a1 - a2;
               break;
            case Multiplication:
               result = a1 * a2;
               break;
            case Division:
               result = a1 / a2;
               break;
            default:
               result = 0;
               break;
        }

        a1 = 0;
        a2 = 0;
    }
    beforeoperation++;
    return result;
} 
```

# jsf - 如何手动禁用rich:pickList 中的删除按钮？

> ID：11620912
> 
> 赞同：1
> 
> 时间：2012-07-23T21:36:51.767
> 
> 标签：jsf, richfaces

我正在与 rich:pickList 合作，它运行良好。在我选择目标列表中的项目时，我只需要找到一种方法来禁用删除按钮。我想它可以用 JavaScript 或 JQuery 完成，但我没有这方面的经验。

我做的最多的是获取目标列表的选定项目的文本，但我想获取该项目所代表的整个对象。此外，我在 DOM 树中查找了按钮，但该按钮没有 id，所以我不知道如何找到该按钮以便给它正确的样式类来禁用它，以及如何做到这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:57:24.550

尝试设置 的属性`rich:pickList` `removeVisible`。这将显示/不显示组件中的删除按钮。

希望这可以帮助。-干杯

# facebook - 从 facebook 获取事件 - 令牌过期

> ID：11620913
> 
> 赞同：0
> 
> 时间：2012-07-23T21:36:53.097
> 
> 标签：facebook, facebook-graph-api

我需要从粉丝页面/用户那里获取最新事件并将其显示在博客上。一切都适用于 Graph API，但问题是，我需要一个 access_token（目前我使用一个 access_token，从帐户生成）。

但问题是令牌过期（也是离线令牌）.. 最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T19:56:49.920

对于粉丝页面事件，您应该能够使用给定页面的页面访问令牌来检索数据。这将在[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)中的场景 5 之后成为可能。对于用户的事件，您最多可以将令牌延长两个月，也在这里描述[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)。

要让它在您的博客上运行并不容易，因为您需要一种方法在令牌到期时每两个月重新验证一次用户。

Facebook 已经放弃了离线令牌的概念，因为它们会给用户带来巨大的安全风险，因为他们可能会忘记应用程序。如果用户在两个月内没有使用您的应用程序，Facebook 删除您的应用程序的用户授权是合理的。

# python - 从数组中删除 nan 值

> ID：11620914
> 
> 赞同：311
> 
> 时间：2012-07-23T21:36:54.337
> 
> 标签：python, arrays, numpy, nan

我想弄清楚如何从我的数组中删除 nan 值。我的数组看起来像这样：

```
x = [1400, 1500, 1600, nan, nan, nan ,1700] #Not in this exact configuration 
```

如何从中删除`nan`值`x`？

* * *

## 回答 #1

> 赞同：477
> 
> 时间：2012-07-23T21:42:30.267

如果您对数组使用 numpy，您也可以使用

```
x = x[numpy.logical_not(numpy.isnan(x))] 
```

等效地

```
x = x[~numpy.isnan(x)] 
```

[感谢 chbrown 添加的速记]

**解释**

内部函数`numpy.isnan`返回一个布尔/逻辑数组，该数组在`True`任何地方都`x`具有非数字的值。正如我们想要的相反，我们使用逻辑非运算符`~`来获得一个数组，其中`True`s 到处都是`x` **有效**数字。

最后，我们使用这个逻辑数组来索引原始数组`x`，只检索非 NaN 值。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2015-04-16T15:46:36.443

```
filter(lambda v: v==v, x) 
```

适用于列表和 numpy 数组，因为 v!=v 仅适用于 NaN

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-07-23T21:39:59.420

试试这个：

```
import math
print [value for value in x if not math.isnan(value)] 
```

有关更多信息，请阅读[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2017-04-18T14:37:51.067

对我来说，@jmetz 的答案没有用，但是使用 pandas isnull() 可以。

```
x = x[~pd.isnull(x)] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-11-25T12:55:01.577

正如其他人所展示的

```
x[~numpy.isnan(x)] 
```

作品。但是如果 numpy dtype 不是本机数据类型，例如它是对象，它将引发错误。在这种情况下，您可以使用熊猫。

```
x[~pandas.isna(x)] or x[~pandas.isnull(x)] 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-05-04T09:43:05.117

[@jmetz 的答案](https://stackoverflow.com/a/11620982/3645374)可能是大多数人需要的；但是它会产生一个一维数组，例如使其无法删除矩阵中的整行或整列。

为此，应该将逻辑数组减少到一维，然后索引目标数组。例如，以下将删除至少具有一个 NaN 值的行：

```
x = x[~numpy.isnan(x).any(axis=1)] 
```

[在此处](https://www.w3resource.com/python-exercises/numpy/python-numpy-exercise-91.php)查看更多详细信息。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-06-23T20:35:51.397

执行上述操作：

```
x = x[~numpy.isnan(x)] 
```

或者

```
x = x[numpy.logical_not(numpy.isnan(x))] 
```

我发现重置为相同的变量 (x) 并没有删除实际的 nan 值，并且必须使用不同的变量。将其设置为不同的变量会删除 nans。例如

```
y = x[~numpy.isnan(x)] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-02-16T09:19:02.433

如果你正在使用`numpy`

```
# first get the indices where the values are finite
ii = np.isfinite(x)

# second get the values
x = x[ii] 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-03-16T06:37:23.617

[接受的答案](https://stackoverflow.com/a/11620982/7128154)改变了二维数组的形状。我在这里提出了一个解决方案，使用 Pandas [dropna()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html)功能。它适用于一维和二维数组。在 2D 情况下，您可以选择天气来**删除**包含`np.nan`.

```
import pandas as pd
import numpy as np

def dropna(arr, *args, **kwarg):
    assert isinstance(arr, np.ndarray)
    dropped=pd.DataFrame(arr).dropna(*args, **kwarg).values
    if arr.ndim==1:
        dropped=dropped.flatten()
    return dropped

x = np.array([1400, 1500, 1600, np.nan, np.nan, np.nan ,1700])
y = np.array([[1400, 1500, 1600], [np.nan, 0, np.nan] ,[1700,1800,np.nan]] )

print('='*20+' 1D Case: ' +'='*20+'\nInput:\n',x,sep='')
print('\ndropna:\n',dropna(x),sep='')

print('\n\n'+'='*20+' 2D Case: ' +'='*20+'\nInput:\n',y,sep='')
print('\ndropna (rows):\n',dropna(y),sep='')
print('\ndropna (columns):\n',dropna(y,axis=1),sep='')

print('\n\n'+'='*20+' x[np.logical_not(np.isnan(x))] for 2D: ' +'='*20+'\nInput:\n',y,sep='')
print('\ndropna:\n',x[np.logical_not(np.isnan(x))],sep='') 
```

**结果：**

```
==================== 1D Case: ====================
Input:
[1400\. 1500\. 1600\.   nan   nan   nan 1700.]

dropna:
[1400\. 1500\. 1600\. 1700.]

==================== 2D Case: ====================
Input:
[[1400\. 1500\. 1600.]
 [  nan    0\.   nan]
 [1700\. 1800\.   nan]]

dropna (rows):
[[1400\. 1500\. 1600.]]

dropna (columns):
[[1500.]
 [   0.]
 [1800.]]

==================== x[np.logical_not(np.isnan(x))] for 2D: ====================
Input:
[[1400\. 1500\. 1600.]
 [  nan    0\.   nan]
 [1700\. 1800\.   nan]]

dropna:
[1400\. 1500\. 1600\. 1700.] 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-03-15T18:36:11.117

如果有帮助，对于简单的一维数组：

```
x = np.array([np.nan, 1, 2, 3, 4])

x[~np.isnan(x)]
>>> array([1., 2., 3., 4.]) 
```

但如果您希望扩展为矩阵并保留形状：

```
x = np.array([
    [np.nan, np.nan],
    [np.nan, 0],
    [1, 2],
    [3, 4]
])

x[~np.isnan(x).any(axis=1)]
>>> array([[1., 2.],
           [3., 4.]]) 
```

我在处理 pandas 功能时遇到了这个问题，由于效率低下`.shift()`，我想不惜一切代价避免使用。`.apply(..., axis=1)`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-12-18T10:08:48.947

只需填写

```
 x = numpy.array([
 [0.99929941, 0.84724713, -0.1500044],
 [-0.79709026, numpy.NaN, -0.4406645],
 [-0.3599013, -0.63565744, -0.70251352]])

x[numpy.isnan(x)] = .555

print(x)

# [[ 0.99929941  0.84724713 -0.1500044 ]
#  [-0.79709026  0.555      -0.4406645 ]
#  [-0.3599013  -0.63565744 -0.70251352]] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-21T18:03:06.630

一个最简单的方法是：

```
numpy.nan_to_num(x) 
```

文档：[https ://docs.scipy.org/doc/numpy/reference/generated/numpy.nan_to_num.html](https://docs.scipy.org/doc/numpy/reference/generated/numpy.nan_to_num.html)

# google-chrome - Chrome 14 不支持 Offline_enabled crx 属性-

> ID：11620921
> 
> 赞同：1
> 
> 时间：2012-07-23T21:37:56.987
> 
> 标签：google-chrome, google-chrome-extension

我想升级我的 Chrome 应用程序以支持`offline_enabled`CRX 清单中的标志。但是，当我使用 Chrome 14 对其进行测试时，它给了我以下错误消息并且它停止下载 crx。

“包无效。详细信息：托管应用程序无法使用扩展功能‘offline_enabled’”

知道如何解决低于 15 的 Chrome 版本的这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:43:59.157

似乎是一个 Chrome 错误。 [http://code.google.com/p/chromium/issues/detail?id=98537](http://code.google.com/p/chromium/issues/detail?id=98537)

# oop - 设计模式：具体实现如何在运行时选择行为？

> ID：11620926
> 
> 赞同：1
> 
> 时间：2012-07-23T21:38:16.337
> 
> 标签：oop, design-patterns

我是这个术语的新手，所以如果我的问题的任何部分表述错误，请纠正我。

这是我正在考虑的示例：一个文件同步程序，可让您将两个文件夹配对在一起，并指定诸如镜像两个文件夹之类的选项，仅以一种方式复制内容等。
我将如何在运行时指定每个文件夹这些具体实现复制文件（例如，不同类型的加密）。

这是我有点想完成的事情：http: [//i.imgur.com/fkVN9.png](http://i.imgur.com/fkVN9.png)

我是否必须为每个具体实施？即MirrorAes、MirrorBlowfish、OnewayAes 等？有更好的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:50:05.567

您有正交问题 - 同步类型和加密。解决此问题的一种方法是策略模式，其中同步类的具体实现聚合一个加密类，同步器与加密接口交互，允许“混合和匹配”加密和同步，而不会对数量产生乘数效应你写的课。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:51:20.937

你的意思是，你需要一个加密策略？

使用抽象工厂和一组加密策略。如果您有多个选项，请使用构建器。

假设您有一个 SHA1Encryption 和一个 DESEncryption。两者都实现了一个接口，例如 GeneralEncryptionStrategy，并且您有一个 EncryptionFactory，它接受一个字符串（“sha1”或“des”）作为参数并创建相应类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:00:38.200

您的图表显示它的方式，您加密的方式似乎取决于您进行同步的方式。我怀疑情况是否如此（尽管我可能错了）。

如果您同步的方式真正独立于您的加密方式，请从继承切换到组合。制作`FolderPair`一个具有 a`SyncStrategy`和 an的对象`EncryptionStrategy`，如下所示：

```
class FolderPair {
    URI a, b;
    private final SyncStrategy syncStrategy;
    private final EncryptionStrategy cryptStrategy;
    public FolderPair(
        URI a
    ,   URI b
    ,   SyncStrategy syncStrategy
    ,   EncryptionStrategy cryptStrategy) {
        ...
    }
    public void sync() {
        syncStrategy.synchronize(a, b, cryptStrategy);
    }
}

interface SyncStrategy {
    void synchronize(URI a, URI b, EncryptionStrategy cryptStrategy);
}

interface EncryptionStrategy {
    byte[] encrypt(byte[] data);
} 
```

现在您可以使用 and 的实例配置您的对象`FolderPair`，混合和匹配它们，而不会创建组合爆炸：`SyncStrategy``EncryptionStrategy`

```
FolderPair p1 = new FolderPair(aUri, bUri, new OneWyaSync(), new AesCrypt()); 
```

该设计具有[*策略模式*](http://en.wikipedia.org/wiki/Strategy_pattern)的两种应用——一种用于同步行为，另一种用于加密。

# python - Python，提取标签并获取单词的位置

> ID：11620931
> 
> 赞同：1
> 
> 时间：2012-07-23T21:38:51.890
> 
> 标签：python, regex, beautifulsoup

我有一个字符串，

```
data = 'very <strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong> discount' 
```

我想将列表中的输出作为

```
ans = ['very','<strong class="keyword">Awesome</strong>','<strong class="keyword">Book</strong>','discount'] 
```

所以我可以知道单词的位置以及标签中出现的单词。我使用 BeautifulSoup 提取单词 in 和单词 with are not in 。但我需要找到位置。我试过的代码。

```
from bs4 import BeautifulSoup as BS
data = 'very <strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong>'
soup = BS(data)
to_extract = soup.findAll('strong')
[comment.extract() for comment in to_extract]
soup = str(soup)
notInStrongWords = []
for t in to_extract:
    t_soup = BS('{0}'.format(t))
    t_tag = t_soup.strong
    matchWords.append(t_tag.string)
soup = re.sub("[^A-Za-z0-9\\-\\.\\(\\)\\\\\/\\&': ]+",' ', soup)
soup = re.findall('[(][^)]*[)]|\S+', soup)
InStrongWords = []
InStrongWords = [x for x in soup] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:14:44.410

尝试（对于 Python 2.x - Python 3 的 unicode 不同）：

```
from bs4 import BeautifulSoup as BS
data = 'very <strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong>'
soup = BS(data)
pTag = soup.p
list = [ unicode(child) for child in pTag.children ]
print list 
```

回报：

```
[u'very ', u'<strong class="keyword">Awesome</strong>', u' ', u'<strong class="keyword">Book</strong>'] 
```

基本上，迭代子元素并将它们转换回 Unicode 字符串。您可能想要过滤掉空格，但这在技术上存在于您的 HTML 中。

如果您需要检查哪些孩子“强壮”，您可以执行以下操作：

```
import bs4

data = 'very <strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong>'
soup = bs4.BeautifulSoup(data)

list = [ (child.name if isinstance(child, bs4.Tag) else None, unicode(child)) for child in soup.children ]
print list 
```

它返回一个元组列表，每个元组是（标签的名称或*无*标签，HTML）：

```
[(None, u'very '), (u'strong', u'<strong class="keyword">Awesome</strong>'), (None, u' '), (u'strong', u'<strong class="keyword">Book</strong>')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:38:22.960

根据 Andrew Alcok 的回答，谢谢 Ansrew。

可以说，

```
data = ['very <strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong>','<strong class="keyword">Awesome</strong> <strong class="keyword">Book</strong> discount'] 
```

所以对于 python 2.x 和 BeautifulSoup 4

```
from bs4 import BeautifulSoup as BS
for d in data:
    soup = BS(d)
    soupPTag = soup.p
    if soupPTag:
        soupList = [unicode(child) for child in soupPTag.children if child!=" "]
        print soupList
    else:
        soupBodyTag = soup.body
        soupList = [unicode(child) for child in soupBodyTag.children if child!=" "]
        print soupList 
```

这将给出所需的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:46:43.363

[`re.finditer`](http://docs.python.org/library/re.html#re.finditer)（而不是`re.findall`） 为您提供[匹配](http://docs.python.org/library/re.html#re.MatchObject)的对象，您可以获得`start()`and `end()`of。

# php - simplexml_load_file 问题

> ID：11620932
> 
> 赞同：0
> 
> 时间：2012-07-23T21:38:57.180
> 
> 标签：php, simplexml

我有以下代码要读入 XML 文件：

```
$xml2 = simplexml_load_file('http://www.facebook.com/feeds/page.php?format=rss20&id=334704593230758'); 
$item = $xml2->channel->item; 
```

我在源代码中得到以下内容：

```
<b>Warning</b>:  simplexml_load_file() [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: http://www.facebook.com/feeds/page.php?format=rss20&amp;id=334704593230758:11: parser error : xmlParseEntityRef: no name in <b>/home/content/49/8644249/html/test/_inc/footer.php</b> on line <b>110</b><br /> 
```

它继续这样持续了 10 多行。xml代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:02:40.577

好吧，有点奇怪，因为这是一个 RSS 提要，并不是设计为直接人类可读的，答案是你必须`User-Agent:`在你的请求中包含一个标题。

当我在 Chrome 中加载 URL 时获取有效的 XML 文档，当我运行您的代码时，我会遇到与您相同的错误。经过仔细检查，我发现当我运行你的代码时，我实际上得到了一个最小的 HTML 文档，而不是所需的 XML——为了得到正确的结果，你必须传递一个有效的用户代理字符串，这意味着你不能使用`simplexml_load_file()`，因为它不支持流上下文。

这段代码对我有用：

```
// User-Agent string from Chrome. I haven't tested anything else so I don't know
// what is actually required, but this works.
$context = stream_context_create(array(
  'http'=>array(
    'user_agent' => 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11'
   )
));

// Get data as a string
$xml2 = file_get_contents('http://www.facebook.com/feeds/page.php?format=rss20&id=334704593230758', FALSE, $context);

// Convert string to a SimpleXML object
$xml2 = simplexml_load_string($xml2);

$item = $xml2->channel->item; 
```

# javascript - 在输入按钮中传递多个参数和一个javascript函数

> ID：11620934
> 
> 赞同：0
> 
> 时间：2012-07-23T21:39:09.990
> 
> 标签：javascript, html

我想在一个按钮中传递几个参数和一个 javascript 函数。

我必须传递一个参数`vToggle`，值是`ON`一个 javascript 函数`Ingredient()`。

我试过这样：

```
<input type="button" value="Search" onclick=
    "Ingredient(); |
    javascript: document.getElementById('_set').value='vToggle \'ON\'';
    Submit();"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:46:07.113

你应该可以这样[做](http://jsfiddle.net/ZWS8n/1/)。

JavaScript

```
function buttonClick() {
    Ingredient();
    document.getElementById('_set').value='vToggle \'ON\'';
    Submit();
};​ 
```

HTML

```
<button onclick="javascript: buttonClick();">Click me</button>​ 
```

但请注意，您在加载按钮之前加载了创建函数的脚本。如果您不想在加载按钮之前加载函数，则需要延迟绑定到 click 事件。请参阅此[Fiddle](http://jsfiddle.net/TVSqS/4/)以获取演示。

HTML

```
<button id="ingredientButton">Click me</button>​ 
```

JavaScript

```
document.onreadystatechange = function() {

    document.getElementById("ingredientButton").onclick = function() {
        Ingredient();
        document.getElementById('_set').value='vToggle \'ON\'';
        Submit();
    };

}​ 
```

# javascript - 是否有相当于 webkitGetAsEntry 的 mozilla？

> ID：11620939
> 
> 赞同：7
> 
> 时间：2012-07-23T21:39:22.233
> 
> 标签：javascript, html, drag-and-drop

现在 webkitGetAsEntry() 已在 Chrome 21 上激活以允许文件夹拖放，在 mozilla 中是否有等效的 - mozGetAsEntry()、getAsEntry() 或其他？我只能找到关于 webkit 方法和 whatwg 提案的非常少的信息；我找不到 Firefox（或任何其他浏览器）的任何内容。

参考：

*   http://wiki.whatwg.org/wiki/DragAndDropEntries#DataTransferItem.getAsEntry.28.29
*   http://updates.html5rocks.com/2012/07/Drag-and-drop-a-folder-onto-Chrome-now-available
*   http://blog.protonet.info/post/26894439416/html5-drag-drop-files-and-folders

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:25:50.213

您正在寻找的是`mozGetDataAt()`方法，它返回一个`nsIFile`对象：

[https://developer.mozilla.org/En/DragDrop/Recommended_Drag_Types#file](https://developer.mozilla.org/En/DragDrop/Recommended_Drag_Types#file)

所以要回答你的问题，相当于：

`mozEntry = event.dataTransfer.mozGetDataAt(0);`

或者..

`event.dataTransfer.mozGetDataAt(0).isFile()`等等

文档`nsIFile`（包含 webkit 条目中的字段）： [https ://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIFile](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIFile)

# java - 前端实例小时数 - 如何减少使用量？

> ID：11620948
> 
> 赞同：1
> 
> 时间：2012-07-23T21:40:05.680
> 
> 标签：java, performance, google-app-engine

我正在尝试使用免费的 Google App Engine 作为我的下一个 Android 应用程序的 Google Cloud Messages 的后端，但是当我“完成”编写服务器时，它已经使用了几乎 100% 的免费前端实例小时数。我的问题是我是否以及如何改善这一点？

该应用程序是一个 servlet，每 15 分钟从 cron 作业调用一次，servlet 下载并解析 3 个 RSS 提要并检查自上次调用以来是否有任何更改，将日期保存到数据库（JDO 和 memcache，3 次调用）以知道上次运行是什么时候，以及自上次呼叫将信息发送到连接的手机后是否发生了任何变化，现在有 3 部手机已连接，这只是对 Google 服务器的一次呼叫。servlet 不返回任何数据。

这是代码

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws IOException
{
    boolean sendMessage = false;

    String eventsFeedUrl = "http://rss.com";
    String newsFeedUrl = "http://rss2.com";
    String trafficFeedUrl = "http://rss3.com";

    response.setContentType("text/plain");
    Message.Builder messageBuilder = new Message.Builder();
    String messageData = getFeedMessageData(eventsFeedUrl);
    if (!messageData.equals(StringUtils.EMPTY))
    {
        messageBuilder.addData("event", messageData);
        sendMessage = true;
    }
    messageData = getFeedMessageData(newsFeedUrl);
    if (!messageData.equals(StringUtils.EMPTY))
    {
        messageBuilder.addData("news", messageData);
        sendMessage = true;
    }
    messageData = getFeedMessageData(trafficFeedUrl);
    if (!messageData.equals(StringUtils.EMPTY))
    {
        messageBuilder.addData("traffic", messageData);
        sendMessage = true;
    }
    if (sendMessage)
    {
        sendMessage(messageBuilder.build(), response, debug);
    }
}

private void sendMessage(Message message, HttpServletResponse response, boolean debug)
    throws IOException
{
    SendResult sendResult = GCMService.send(message, Device.list());
    int deleteCount = 0;
    for (MessageResult errorResult : sendResult.getErrorResults())
    {
        if (deleteCount < 200 && (errorResult.getErrorName().equals(Constants.ERROR_NOT_REGISTERED) || errorResult.getErrorName().equals(Constants.ERROR_INVALID_REGISTRATION)))
        {
            Device.delete(errorResult.getDeviceId());
            deleteCount++;
        }
    }
}

private String getFeedMessageData(String feedUrl)
{
    String messageData = StringUtils.EMPTY;
    FeedHistory history = FeedHistory.getFeedHistoryItem(feedUrl);
    Feed feedContent = RssParser.parse(feedUrl);
    if (feedContent != null && feedContent.getFeedItems().size() > 0)
    {
        if (history == null)
        {
            history = new FeedHistory(feedUrl);
            history.setLastDate(new Date(0));
            history.save();
        }
        for (FeedItem item : feedContent.getFeedItems())
        {
            if (item.getDate().after(history.getLastDate()))
            {
                messageData += "|" + item.getCountyId();
            }
        }
        if (!messageData.equals(StringUtils.EMPTY))
        {
            messageData = new SimpleDateFormat("yyyyMMddHHmmssZ").format(history.getLastDate()) + messageData;
        }
        history.setLastDate(feedContent.getFeedItem(0).getDate());
        history.save();
    }
    return messageData;
} 
```

调用 Device.list() 使用 memcache，因此在一次调用后它将被缓存，RSS 解析器是一个简单的解析器，它使用`org.w3c.dom.NodeList`和`javax.xml.parsers.DocumentBuilder`. 根据日志文件，我使用同一个实例好几天了，所以实例启动和占用资源没有问题。对 servlet 的正常调用在日志中如下所示，

> ms=1480 cpu_ms=653 api_cpu_ms=0 cpm_usd=0.019673

我对接下来要尝试什么有了一些想法，尝试异步执行 RSS 下载调用以最小化请求时间。将 RSS 解析移至后台作业。还有什么可以做的？感觉就像我的代码在这里犯了一些基本错误，因为如果不能在 24 小时内调用 100 次 servlet 而不会消耗 100% 的前端时间，那么普通的 Web 应用程序如何工作。

/维克托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T02:23:53.407

您的空闲实例会在自行关闭之前停留一段时间。我不知道这是多长时间，但我猜它在 5-15 分钟范围内。如果它实际上是 15 分钟，那么您的 cron 作业每 15 分钟点击一次它会使其无限期地保持活动状态，因此您最终将每天使用 24 个实例小时。

您可以通过将您的 cron 作业设置为每 30 分钟运行一次来​​测试这个理论，并查看它是否将您的实例小时使用量减半。

# sql - 如何在我的表中获得每天的字数

> ID：11620950
> 
> 赞同：0
> 
> 时间：2012-07-23T21:40:06.597
> 
> 标签：sql, oracle

我需要编写一个 sql 语句来获取表中每天的 WPM 计数。几天内会有多个条目；我只需要最高的 WPM。此外，不包括空条目。

```
The data set should look like:
Date_completed, Max_WPM
date here, wpm
date here, wpm

SELECT 
       DISTINCT A.DATE_COMPLETED
            ,A.WPM Max_WPM
FROM KEYBOARD_LEARNING A 
```

我正在尝试过滤此表的结果集中仅返回不同日期的位置。但是上面的查询不起作用。如何使用 WPM 返回不同的日期？

```
DATE_completed    MAX_WPM
--------------------------     ---------------
7/12/2012                ...
7/12/2012                ....
7/12/2012
7/22/2012
7/6/2012
7/12/2012
7/12/2012
7/6/2012
7/12/2012
7/12/2012
7/6/2012
7/6/2012
6/13/2012
7/12/2012
7/12/2012
7/16/2012
6/6/2012
7/6/2012
7/6/2012
6/12/2012
6/13/2012
7/6/2012
7/6/2012
7/6/2012
7/12/2012
6/13/2012
7/4/2012
6/14/2012
7/6/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:42:20.993

听起来你想要

```
SELECT A.DATE_COMPLETED
      ,MAX(A.WPM) Max_WPM
  FROM KEYBOARD_LEARNING A
 WHERE a.wpm IS NOT NULL
 GROUP BY a.date_completed 
```

这假设没有任何`DATE_COMPLETED`值具有时间分量。如果是这样，您需要`TRUNC`日期

```
SELECT TRUNC(A.DATE_COMPLETED) date_completed
      ,MAX(A.WPM) Max_WPM
  FROM KEYBOARD_LEARNING A
 WHERE a.wpm IS NOT NULL
 GROUP BY TRUNC(a.date_completed) 
```

# ios - IOS使按钮在视图控制器之间工作

> ID：11620951
> 
> 赞同：0
> 
> 时间：2012-07-23T21:40:08.333
> 
> 标签：ios

我之前问过一个类似的问题，得到了很多答案，首先感谢他们，但由于项目的复杂性，我不明白答案，所以我决定这次以非常简单的形式再问一次。

我在 viewcontrollerA 中有一个按钮，我希望该按钮写在 viewcontrollerB 中的标签上。A 处的简单按钮将在 B 上设置标签文本。

例子

用户打开应用

点击页面 A 的按钮

第二页出现，在该页面标签文本由标签设置。文本代码来自 viewcontroller A 它调用代码

或者也许我可以从 B 调用 A 的代码，只要我做了它并不重要。我可以制作按钮来打开另一个视图控制器，所以你不需要解释它。

另外，如果有任何其他方法，只要它们很简单，我也可以这样做。也许我在其他地方编写了代码并从 A 和 B 调用它。

请逐步解释它，因为我对目标 C 和 xcode 知之甚少。

我问这个问题是为了了解视图控制器之间的连接。实际上，我会让那个按钮在第二页显示一个随机数，但它现在并不重要，因为如果我学会了简单的连接，我可以做剩下的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:45:25.493

在您的操作中，您需要引用第二个视图控制器。例如

```
- (IBAction)buttonAClicked:(id)sender {
    ViewController2 *vc2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
    [self.navigationController pushViewController:vc2 animated:YES];
    vc2.someVariable = @"This is random text";
    [vc2.someButton setTitle:@"Some button text" forControlState:UIControlStateNormal];
} 
```

这显示了如何创建第二个视图控制器，更改两个属性，然后推送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:02:57.700

在您的第二个视图控制器中创建一个名为`theText`that的属性`NSString`，然后将其`viewDidLoad`分配`label.text`给`NSString`;

```
- (void)viewDidLoad
{
    if(self.theText)
        self.label.text = self.theText;
} 
```

现在使用您的第一个视图控制器`theText`在第二个视图控制器中进行设置。

如果您使用的是 segue，请使用`prepareForSegue`：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"Second View Segue"])
    {
        SecondViewController *theController = segue.destinationViewController;
        theController.theText = @"Some text";
    }
} 
```

如果您使用某种模态演示：

```
SecondViewController *theController = [[SecondViewController alloc] init];
theController.theText = @"Some text";
[self presentModalViewController:theController animated:YES]; 
```

或者如果您使用的是导航控制器：

```
SecondViewController *theController = [[SecondViewController alloc] init];
theController.theText = @"Some text";
[self.navigationController pushViewController:theController animated:YES]; 
```

所以你的第一个视图控制器将`NSString`在第二个中设置属性，然后第二个将在加载期间设置`UILabel`等于。在加载第二个视图控制器之前，`NSString`您不能设置 a 的文本，例如：`UILabel`

```
SecondViewController *theController = [[SecondViewController alloc] init];
theController.label.text = @"Some text";
[self.navigationController pushViewController:theController animated:YES]; 
```

将无法正常工作，因为在加载视图之前您无法设置标签的文本。

希望有帮助。

# xml - ActionScript/Flex：从数组构建 XML 结构

> ID：11620953
> 
> 赞同：0
> 
> 时间：2012-07-23T21:40:23.013
> 
> 标签：xml, apache-flex, actionscript

我正在构建一个处理基于列的数据库中的数据的应用程序。我将数据作为数组获取，其中每个数组代表数据库返回的表中的一列。数据包含父子关系。数组可能看起来像这样（将每个数组中的相同索引视为普通 SQL 数据库中的一行）：

```
[0] empty   [1] empty   [2] ID-A  [3] ID-B  [4] ID-B <-- this represents nodes' parents  
[0] ID-A    [1] ID-A    [2] ID-B  [3] ID-C  [4] ID-D <-- this represents nodes' labels  
[0] 100     [1] 200     [3] 300   [4] 150   [4] 150  <-- this represents values associated with nodes 
```

当然，它们要大得多。多达 100000 个元素。我想做的就是从我拥有的数据中创建以下 XML：

```
<root>  
   <node label="ID-A" value="300">  
      <node label="ID-B" value="300">  
          <node label="ID-C" value="150"/>  
          <node label="ID-D" value="150"/>  
      </node>
   </node>
</root> 
```

请注意，对于 ID-A，顶层只有一个条目，它的值是数组中所有条目的总和。

我事先不知道结构的深度以及任何 ID 或值。如何创建 XML 以便以后能够在树控件中显示它？我想要做的是遍历数组，如果 ID 不存在，则每次为 ID 添加一个节点，但如果 ID 存在，只需更新值（将其添加到当前值）。我可以创建第一层，但我无法在更大的深度访问和更新适当的元素。基本上，我如何将 ID-B 下面的 ID-E 添加到上面的 XML 中，以实现以下目的：

```
<root>  
   <node label="ID-A" value="300">  
      <node label="ID-B" value="300">  
          <node label="ID-C" value="150"/>  
          <node label="ID-D" value="150"/>  
          <node label="ID-E" value="sth"/>
      </node>
   </node>
</root> 
```

或者用我拥有的数组中的孩子构建一个 ArrayCollection 会更好吗？我是 Flex 的新手，所以我无法告诉自己什么会更有效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:56:59.103

将 100k 行转换为 XML 可能会非常慢，并且 XML 占用大量内存，如果它只是用作树数据提供程序，那么这是浪费的。如果您只需要这样做以查看树中的数据，也许您可​​以将其保存在数组中，但使用客户树数据描述符来定义层次结构。[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Tree.html#dataDescriptor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Tree.html#dataDescriptor)

# android - 实现位置更新服务的最佳方式

> ID：11620956
> 
> 赞同：0
> 
> 时间：2012-07-23T21:40:31.407
> 
> 标签：android, location, android-service

我想开发一个应用程序 - 一项服务 - 将用户位置更新到服务器，例如，每 1 小时。

我从 Android 文档中了解到我必须使用“Android 服务”并且我必须在`onStartCommand()`

但是由于我需要每 1 小时发送一次这些位置更新，所以我需要在里面运行无限循环`onStartCommand()`......对吗？

现在，我的问题是：

*   如果系统终止服务会发生什么，我知道我的服务会启动，但它`onStartCommand()`也会调用吗？

*   是否有更好的方法来实现位置更新，例如系统是否可以`onStartCommand()`每隔 1 小时定期调用该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:48:24.893

Yes... Search for AlarmManager.. That is exactly what you need. You can schedule intent to be called and therefore start your service every hour.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:44:48.083

一种可能的方法是查看 AlarmManager。您可以安排您的应用程序按时间间隔运行。您还可以确定我可能自上一小时以来没有更改并延长延迟以延长电池寿命。

[报警管理器文档](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T22:01:30.010

[正如其他帖子所提到的， AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)是您正在寻找的。

但是，“永远，每小时”运行东西是违反 Android 最佳实践的。如果您从“每一小时、每一天”开始思考，您可能会采取会损害用户电池寿命的行动。

每小时打开一次 gps，等待它获得锁，然后将其关闭，比在检查位置时“更聪明”地使用电池寿命要长得多。

如果你做对了，例如 setInexactRepeating，尝试使用 WiFi 定位，设置监听器来更新位置，那么你就可以拥有你的蛋糕（用户的电池寿命长）并吃掉它（仍然可以获得你需要的信息）。

有关如何防止您的应用程序占用过多电池（并可能被卸载）的一些好的提示，请观看 GOogle IO 2012 的此视频：[http ://www.youtube.com/watch?v=PwC1OlJo5VM](http://www.youtube.com/watch?v=PwC1OlJo5VM)

编辑：也看看这个：http: [//developer.android.com/reference/android/location/LocationListener.html](http://developer.android.com/reference/android/location/LocationListener.html)

您可以设置一个仅在设备位置更改时才调用的侦听器。YMMV，但看看。

# javascript - 在对话框中重置 JQuery 验证

> ID：11620958
> 
> 赞同：0
> 
> 时间：2012-07-23T21:41:01.783
> 
> 标签：javascript, jquery

我试图在使用 JQuery 验证的 JQuery 对话框中清除表单的内容。

它在我的 (dialog).validate(); 任务上咆哮。“dialog.validate 不是函数”

```
// dialog is an ID of a dialog, in this case, "#myDialog" is passed in
function reset(dialog){
    var validator = (dialog).validate();
    validator.resetForm();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:44:11.750

`Dialog`是一个字符串，而不是一个 DOM 元素。你正在调用`validate`一个字符串。看来你已经忘记了`$`。这个：

```
var validator = (dialog).validate(); 
```

应该是这样的：

```
var validator = $(dialog).validate(); 
```

# c# - 制作索引控件数组？

> ID：11620959
> 
> 赞同：6
> 
> 时间：2012-07-23T21:41:02.263
> 
> 标签：c#, arrays, winforms, user-controls

是否有 C# 索引控件数组？我想放置一个“按钮数组”，例如带有 5 个按钮，它们只使用一个事件处理程序来处理所有这 5 个控件的索引（就像 VB6 一样）。否则我必须为这 5 个按钮中的每一个编写一个额外的事件处理程序。如果我有 100 个按钮，我需要 100 个事件处理程序吗？我的意思是这样的：

```
TextBox1[i].Text="Example"; 
```

它可以让我使用控制数组更容易编码。现在我已经看到，C# 至少在用户控件上没有可见的数组功能，并且在用户控件上没有“索引”属性。所以我猜 C# 没有控制数组，或者我必须通过已知名称调用每个元素。

我不必在 for 循环中提供 100 个文本框 100 个递增值，而是必须编写：

```
TextBox1.Text = Value1;
TextBox2.Text = Value2;
...
...
TextBox100.Text = Value100; 
```

更多的工作 + 所有这 100 个事件处理程序每​​个额外的一个 TextBox。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-10T13:34:43.467

我知道我参加这个聚会有点晚了，但是这个解决方案会起作用：

创建一个全局数组：

```
 TextBox[] myTextBox; 
```

然后在你的对象的构造函数中，在调用之后

```
 InitializeComponent(); 
```

初始化你的数组：

```
 myTextBox = new TextBox[] {TextBox1, TextBox2, ... }; 
```

现在您可以迭代您的控件数组：

```
 for(int i = 0; i < myTextBox.Length; i++)
        myTextBox[i].Text = "OMG IT WORKS!!!"; 
```

我希望这有帮助！

皮特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T04:10:52.080

正如我在对 HatSoft 解决方案的评论中提到的那样，C# Winforms 不允许您像旧的 VB6 一样创建控件数组。我认为我们能得到的最接近的是 HatSoft 和 Bert Evans 在他们的帖子中展示的内容。

我希望能满足您的要求的一件事是事件处理程序，您将获得一个通用事件处理程序，并且在事件处理程序中，当您对“发送者”进行类型转换时，您可以直接获得控件，就像在 VB6 中一样

C＃

```
TextBox textBox = sender as TextBox; 
```

VB6

```
TextBox textBox = TextBox1[i]; 
```

因此，您可能遇到的唯一麻烦是将这 100 个文本框连接到一个事件处理程序，如果您不是通过代码动态创建控件，而是在设计时手动创建它，那么所有人都可以建议将它们分组在一个容器中，比如面板。然后在 Form Load 上将它们全部连接到一个事件处理程序，如下所示：

```
foreach (Control control in myTextBoxPanel.Controls)
{
    if(control is TextBox)
         control.TextChanged += new EventHandler(control_TextChanged);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T21:44:59.730

只需创建一个处理程序并将所有按钮指向它。

```
var ButtonHandler = (sender, args) => {
    var clicked = (Button)sender;
    if (clicked.Text == "whatever")
       //do stuff
    else
       //do other stuff 
};

button1.Click += ButtonHandler;
button2.Click += ButtonHandler; 
```

或者，如果您在代码中创建控件，则可以使用[此答案中指定的技术之一](https://stackoverflow.com/questions/3645643/c-sharp-how-to-deal-with-events-for-multi-dynamic-created-buttons)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T21:48:11.790

> **我不必在 for 循环中提供 100 个文本框 100 个递增值，而是必须编写：**

```
for(int i = 0; i <100; i++)
{
   TextBox t = new TextBox(){ Id = "txt_" + i, Value = "txt_" + i};
   t.TextChanged += new System.EventHandler(this.textBox_Textchanged);
  Page.Controls.Add(t);

}

//and for event on TextChanged
private void textBox_Textchanged(object sender, EventArgs e)
    {
        TextBox textBox = sender as TextBox;

        if (textBox != null)
        {
////
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-07T19:03:51.147

还有一点需要注意：如果你真的需要在一个表单上编辑 100 个字符串，你可能应该考虑一下 100 个文本框是否真的是最好的方法。也许 ListView、DataGridView 或 PropertyGrid 会更合适。

这几乎适用于您认为需要大量控件的任何时候。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T21:48:56.070

如果您使用的是 Web 窗体而不是 MVC，则可以访问页面上[的控件集合，如在 ASP.NET 网页中使用控件集合中](http://msdn.microsoft.com/en-us/library/20zys56y%28v=VS.90%29.aspx)所示。本质上，控件集合是一棵树，其中包含第一级子控件的页面和一些具有自己子控件的项目。有关如何遵循树的示例，请参阅[如何：通过遍历控件集合在页面上定位 Web 窗体控件。](http://msdn.microsoft.com/en-us/library/yt340bh4%28v=vs.90%29)

另请参阅[如何：以编程方式将控件添加到 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/651f9b4f-607d-4d8d-b498-04a596a5bbe1%28v=vs.90%29)。

只要所需的签名相同，您就可以对多个项目使用相同的事件处理程序。

对于 Windows 窗体，这几乎是相同的，因为它们基于相似的架构模型，但您需要[Control.Controls 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls)和[如何：将控件添加到 Windows 窗体](http://msdn.microsoft.com/en-us/library/0h5y8567.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-07T22:26:47.117

保持简单：

```
TextBox[] keybox = new TextBox[16];   //create an array

for (int i=0; i<16; i++) 
{
    keybox[i] = new TextBox();        //initialize (create storage for elements)
    keybox[i].Tag = i;                //Tag prop = index (not available at design time)
    keybox[i].KeyDown += keybox_down; //define event handler for array
}

private void keybox_down(object sender, KeyEventArgs e)
{
    int index = (int)((TextBox)sender).Tag    //get index of element that fired event
    ...
} 
```

# r - 如何计算arcsin(sgn(x)√|x|)？

> ID：11620968
> 
> 赞同：5
> 
> 时间：2012-07-23T21:41:23.160
> 
> 标签：r, transformation

我正在尝试对位于`[-1,1]`. 尝试对负数据点进行平方根时，`transf.arcsine`使用包`metafor`会产生。`NaNs`从概念上讲，我想使用`arcsin(sgn(x)√|x|)`ie 平方绝对值，应用它的前一个符号，然后反正弦变换它。问题是我不知道如何在 R 中开始这样做。我们将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T22:29:25.707

```
x <- seq(-1, 1, length = 20)
asin(sign(x) * sqrt(abs(x))) 
```

或作为一个函数

```
trans.arcsine <- function(x){
  asin(sign(x) * sqrt(abs(x)))
}
trans.arcsine(x) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T21:52:07.740

R 中的帮助只是`help()`or `help.search()`。所以，让我们试试显而易见的，

```
> help(arcsin)
No documentation for ‘arcsin’ in specified packages and libraries: 
```

好吧，那不好。但它必须能够触发......让我们尝试一些更简单的东西。

```
help(sin) 
```

有所有的三角函数。我注意到，`Math`页面上有一个链接。单击似乎可以提供您需要的所有功能。原来我本来可以打字的。。

```
help(Math) 
```

还，

```
help.search('trigonometry') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:56:02.657

我有一个类似的问题。我想对大部分数据集“logmeantd.ascvr”进行反正弦变换并以这种方式接近它：

首先是数据范围已转换为 b/t -1 和 1（在这种情况下，它们以百分比表示）：

```
logmeantd.ascvr[1:12] <- logmeantd.ascvr[1:12] * 0.01 
```

接下来应用平方根函数 sqrt()：

```
logmeantd.ascvr[1:12] <- sqrt(logmeantd.ascvr[1:12]) 
```

最后应用反正弦函数 asin()：

```
logmeantd.ascvr[1:12] <- asin(logmeantd.ascvr[1:12]) 
```

*注意，在这种情况下，我排除了数据集的 MEAN 变量，因为我想对其应用日志函数 log()：

```
 logmeantd.ascvr$MEAN <- log(logmeantd.ascvr$MEAN) 
```

# shell - Shell/bash 中的 GNU 隐私保护 (GPG)

> ID：11620969
> 
> 赞同：0
> 
> 时间：2012-07-23T21:41:30.930
> 
> 标签：shell, gnupg

在过去的几天里，我试图做更多的 shell 脚本。

我正在尝试计算函数的值。首先我得到一个

```
echo "blah"
read blub

md5=`md5sum $blub | cut -d ' ' -f 1`
echo $md5

echo "secretkey"
read $SK 
```

例如，如果得到这样的值。
有没有可能做这样的`GPG`计算

`GPG(VALUE1,VALUE2)`在我的情况下`GPG(md5,sk)`

稍后我想对该值采用模块化函数。这可以通过 shell 脚本实现。

如果可能的话，请问如何在 GPG 中进行操作。还是有其他更好的公共生成算法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:56:01.623

如果我理解正确，您正在尝试获取 MD5 + 密钥对的摘要（哈希、校验和）（很像 MD5 是 的摘要`blub`）。

无论如何，GPG 在这里帮不了你。它主要是一种使用 PGP 进行加密和签名的工具。它也可以对文件进行对称加密，但 AFAICS 它不进行独立摘要，当然也不以十进制形式进行。

最简单的解决方案似乎是使用一种常见的 shell 校验和工具，它实际上具有数字输出——例如`cksum`.

这些工具只接受一个 blob 作为参数，因此您可能只想简单地连接输入

我认为一个可行的例子是：

```
gpg=$(echo "$md5$sk" | cksum | cut -d' ' -f1) 
```

然后`gpg`将包含一些十进制值，对于每个 md5 + 密钥对都是唯一的。

# vbscript - VBScript 环境变量

> ID：11620970
> 
> 赞同：1
> 
> 时间：2012-07-23T21:41:50.760
> 
> 标签：vbscript, environment-variables

我有一个关于如何修复运行脚本时看到的错误的问题。我很确定这与我使用 %COMPUTERNAME% 环境变量的方式有关。

我的脚本所做的是在本地压缩一些文件，然后使用 robocopy 将它们复制到已安装或共享的驱动器，然后检查文件大小是否相同，如果相同，则删除原始计算机上的文件。如果过程中的任何步骤产生错误，它将退出脚本。

现在，如果我不将“%COMPUTERNAME%”添加到最终目标路径，脚本就可以正常工作了。（压缩文件最终将在哪里）我需要将压缩文件放在它们自己的文件夹中，并使用它起源的主机的名称，因为这个脚本将在许多不同的机器上运行，它们都去同一个位置。

所以基本上它需要看起来像这样：

E:\LocalHostName\TestZip.zip

现在脚本将在复制压缩文件时很好地构建文件夹，一旦文件大小检查开始，问题就会出现。我收到“FileToBeCompared2”行的“找不到文件”错误。我理解为什么会产生错误，因为它没有识别 %COMPUTERNAME% 环境变量，但我不知道如何解决这个问题。

我还将尝试添加一些功能，如果发生错误，则会在输出文件夹中生成带有“脚本期间发生错误”之类的文本文件。

感谢您提前提供的所有帮助。该脚本在下面找到：

```
'-------------------------------------------------------------------------------------------
'This script is used to zip files locally, copy them to a new location, verify that the
'files were copied correctly, and then delete the files from the original source.
'In it's current state it is being used as a means to zip event files and move them
'to a central location.

'Run with administrator priveleges.

'-----------------------------------------------------------------------------------------------------
Option Explicit

Dim sDirectoryPath, sLocalDestinationPath, sFinalDestinationPath, sOutputFilename, Shell, sFileExt, sFilePrefix

Set Shell = WScript.CreateObject("WScript.Shell")

'Specify Directory Path where files to be zipped are located
'Specify local destination for zipped files
'Specify final destination path for zippped files
'Specify file extension name to look for
'Specify prefix of filename to look for

sDirectoryPath = "C:\Testscripts\"
sLocalDestinationPath = "C:\ScriptOutput\"
sFinalDestinationPath = "E:\CopyTestFolder\" & sOutputFilename & "\" 
sFileExt = ".evtx"
sFilePrefix = "Archive*"
sOutputFilename = shell.ExpandEnvironmentStrings("%COMPUTERNAME%") 'Environment variables needed for grabbing hostname

Dim ZipCommand, RobocopyCommand, RunCommand, filesys, filetext
Dim d : d = Date() 
Dim dateStr : dateStr = Year(d) & "-" & Right("00" & Month(d), 2) & "-" & Right("00" &     Day(d), 2) 'Date String
Dim t : t = Time()
Dim timeStr: timeStr = Hour(t) & "-" & Right("00" & Minute(t), 2) & "-" & Right("00" & Second(t), 2) 'Time String
Dim FullFileName

FullFileName = sOutputFilename & "-" & dateStr & "-" & timeStr & ".zip "

'Following command runs 7-zip and grabs the files to be zipped from your set sDirectoryPath, zips them into set sLocalDestinationPath
'and names the file with the localhost name and date/time

ZipCommand = """C:\Program Files\7-zip\7z.exe"" a " & sLocalDestinationPath & FullFileName & sDirectoryPath & sFilePrefix & sFileExt

RunCommand = Shell.Run(ZipCommand,0,true)

if err.Number <> 0 then
    WScript.Echo "An error has occurred during the zip process, re-run Script."     WScript.Quit
end if

Wscript.Sleep 2000

'The following command creates a folder named after the host computer where the files are being copied from 

Dim newfolder, newfolderpath, filesys2

newfolderpath = "E:\CopyTestFolder\" & sOutputFilename & "\"
set filesys2 = CreateObject("Scripting.FileSystemObject")
If Not filesys2.FolderExists(newfolderpath) Then
    Set newfolder = filesys2.CreateFolder(newfolderpath)
End If

'Following command runs Robocopy from command line, moves files from your set sLocalDestinationPath to your set sFinalDestinationPath       

WScript.Echo "Robocopy.exe " & sLocalDestinationPath & " " & sFinalDestinationPath  
RobocopyCommand = "Robocopy.exe " & sLocalDestinationPath & " " & sFinalDestinationPath 
RunCommand = Shell.Run(RobocopyCommand,0,true)

if err.Number <> 0 then
    WScript.Echo "An error has occured copying the files, re-run Script."
    WScript.Quit
end if

Dim fso, FileToBeCompared1, FileToBeCompared2

Set fso = CreateObject("Scripting.FileSystemObject")

'Setting the Local file to be compared
Set FileToBeCompared1 = fso.GetFile(sLocalDestinationPath & FullFileName) 
WScript.echo sFinalDestinationPath & FullFileName

'Setting the file copied to final destination to be compared
Set FileToBeCompared2 = fso.GetFile(sFinalDestinationPath & FullFileName)       

If FileToBeCompared1.size = FileToBeCompared2.size then
    fso.DeleteFile("C:\Testscripts\Archive*.evtx") 'This will be the path where events are being Archived to. (Non restricted path)
    fso.DeleteFolder("C:\ScriptOutput") 'This deletes the archive folder that 7-zip builds each time this script is run
else
    WScript.Echo "File sizes do not match, File was not fully copied, Re run script."   
    WScript.Quit
end if 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T23:09:32.043

因为`fso.GetFile()`不会自动展开`%COMPUTERNAME%`，修改`sFinalDestinationPath`成`sOutputFilename`这样使用：

```
sOutputFilename = shell.ExpandEnvironmentStrings("%COMPUTERNAME%")
sFinalDestinationPath = "E:\CopyTestFolder\" & sOutputFilename & "\" 
```

# javascript - 在 JavaScript 中获取 asp.net 控件的 id

> ID：11620975
> 
> 赞同：0
> 
> 时间：2012-07-23T21:42:08.410
> 
> 标签：javascript, asp.net, identifier, clientid

我在 ASP.Net 应用程序中工作，需要获取一些客户端控件的 ID。我尝试了以下但不断收到错误：

```
<script type="text/javascript">
    var cbDeclinedID = '<%= cbDeclined.ClientID %>';
</script> 
```

我把这段代码放在哪里并不重要，我总是得到错误：

**CS0103：当前上下文中不存在名称“cbDeclined”**

标记：

```
<%@ Page Title="Manage Resident Meals" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="ManageResidentMeals.aspx.cs" Inherits="Chart2GoWeb.WebUI.WebForms.ManageResident.ManageResidentMeals" %>

<asp:Content ID="jsContent" ContentPlaceHolderID="JavaScriptContent" runat="server">

<script type="text/javascript">
<!--
    // var cbDeclinedID = '< %= cbDeclined.ClientID % >';

    function NumericOnly() { var key = window.event.keyCode; if (key < 48 || key > 57) window.event.returnValue = false; }

    $(document).ready(function () {
        function UpdateTextBoxes(isDeclined, isNOP, isOutOfFac) {
            var ddlMealReplacement = $('#ddlMealReplacement');

            var lblMealOld = $('#lblMealOld');
            var lblFortifiedFluidOld = $('#lblFortifiedFluidOld');
            var lblFluidOld = $('#lblFluidOld');

            var txtMeal = $('#txtMeal');
            var txtFluid = $('#txtFluid');
            var txtFortifiedFluid = $('#txtFortifiedFluid');

            var mealReplacement = '';
            if (ddlMealReplacement.length) {
                mealReplacement = ddlMealReplacement.text();
            }

            if (isNOP || (isDeclined && mealReplacement != 'G')) {
                txtMeal.prop('disabled', true);
                txtMeal.val('');
                lblMealOld.val('___');
            } else {
                txtMeal.prop('disabled', false);
            }

            // txtFluid.Enabled = !isNOP;
            txtFluid.prop('disabled', isNOP);
            // txtFortifiedFluid.Enabled = !isNOP;
            txtFortifiedFluid.prop('disabled', isNOP);

            if (isNOP) {
                txtFluid.val('');
                txtFortifiedFluid.val('');
                $('#lblFluidTotalString').val('');
            }
        }

        function Total(lblFluidTotal, val1, val2) {
            var totalFluids = null;

            var num = parseFloat(val1);
            if (num != 'NaN')
                totalFluids = val1Num;

            num = parseFloat(val2);
            if (num != 'NaN')
                totalFluids = (totalFluids == null) ? num : num + totalFluids;

            if (totalFluids == null)
                lblFluidTotal.val('___');
            else
                lblFluidTotal.val(totalFluids);
        }

        $('#'+cbDeclinedID).click(function () {
            var cbDeclined = $(this);
            var cbIsOutOfFac = $('#cbIsOutOfFac');
            var cbNOP = $('#cbNOP');

            if (cbDeclined.is(':checked'))
                cbIsOutOfFac.attr('checked', false);

            UpdateTextBoxes(cbDeclined.is(':checked'), cbNOP.is(':checked'), cbIsOutOfFac.is(':checked'));
        });

        $('#cbIsOutOfFac').click(function () {
            var cbDeclined = $('#cbDeclined');
            var cbIsOutOfFac = $(this);
            var cbNOP = $('#cbNOP');

            UpdateTextBoxes(cbDeclined.is(':checked'), cbNOP.is(':checked'), cbIsOutOfFac.is(':checked'));
        });

        $('#cbNOP').click(function () {
            var cbDeclined = $('#cbDeclined');
            var cbIsOutOfFac = $('#cbIsOutOfFac');
            var cbNOP = $(this);

            UpdateTextBoxes(cbDeclined.is(':checked'), cbNOP.is(':checked'), cbIsOutOfFac.is(':checked'));
        });

        $('#ddlMealReplacement').change(function () {
            var cbDeclined = $('#cbDeclined');
            var cbIsOutOfFac = $('#cbIsOutOfFac');
            var cbNOP = $('#cbNOP');

            UpdateTextBoxes(cbDeclined.is(':checked'), cbNOP.is(':checked'), cbIsOutOfFac.is(':checked'));
        });

        $('#txtFluid').change(function () {
            var txtFluid = $(this);
            var txtFortifiedFluid = $('#txtFortifiedFluid');
            var lblFluidTotal = $('#lblFluidTotal');

            Total(lblFluidTotal, txtFluid.val(), txtFortifiedFluid.val());
        });

        $('#txtFortifiedFluid').change(function () {
            var txtFluid = $('#txtFluid');
            var txtFortifiedFluid = $(this);
            var lblFluidTotal = $('#lblFluidTotal');

            Total(lblFluidTotal, txtFluid.val(), txtFortifiedFluid.val());
        });
    });

    //-->
    </script> 

</asp:Content>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <asp:ObjectDataSource ID="ResidentsMealsODS" runat="server" 
        InsertMethod="InsertNourishment"        
        SelectMethod="GetMealsDetailByResMealInTakeId" 
        TypeName="Chart2GoWeb.Domain.DAL.ResidentsMealsDAL"
        UpdateMethod="UpdateNourishment"
        >

        <SelectParameters>
            <asp:SessionParameter DefaultValue="" Name="session" SessionField="__MySession__" Type="Object" />
            <asp:QueryStringParameter Name="resMealInTakeIdString" QueryStringField="resMealInTakeId" Type="String" />
            <asp:QueryStringParameter Name="nourishment" QueryStringField="nourishmentType" Type="String" />
        </SelectParameters>

        <InsertParameters>
            <asp:SessionParameter DefaultValue="" Name="session" SessionField="__MySession__" Type="Object" />
            <asp:QueryStringParameter Name="resMealInTakeIdString" QueryStringField="resMealInTakeId" Type="String" />
            <asp:QueryStringParameter Name="nourishment" QueryStringField="nourishmentType" Type="String" />
            <asp:Parameter Name="IsDeclined" Type="String"/>
            <asp:Parameter Name="IsOutOfFac" Type="String"/>
            <asp:Parameter Name="IsNpo" Type="String"/>
            <asp:Parameter Name="MealReplacement" Type="string"/>
            <asp:Parameter Name="Pct" Type="String"/>
            <asp:Parameter Name="Fluid" Type="String"/>
            <asp:Parameter Name="FortifiedFluid" Type="String"/>
            <asp:Parameter Name="FluidTotal" Type="String"/>
            <asp:Parameter Name="TubeFeeding" Type="String" />
        </InsertParameters>

        <UpdateParameters>
            <asp:SessionParameter DefaultValue="" Name="session" SessionField="__MySession__" Type="Object" />
            <asp:QueryStringParameter Name="resMealInTakeIdString" QueryStringField="resMealInTakeId" Type="String" />
            <asp:QueryStringParameter Name="nourishment" QueryStringField="nourishmentType" Type="String" />
            <asp:Parameter Name="IsDeclined" Type="String"/>
            <asp:Parameter Name="IsOutOfFac" Type="String"/>
            <asp:Parameter Name="IsNpo" Type="String"/>
            <asp:Parameter Name="MealReplacement" Type="String"/>
            <asp:Parameter Name="Pct2EditBind" Type="String"/>
            <asp:Parameter Name="Fluid2EditBind" Type="String"/>
            <asp:Parameter Name="FortifiedFluid2EditBind" Type="String"/>
            <asp:Parameter Name="TubeFeeding" Type="String" />
        </UpdateParameters>

    </asp:ObjectDataSource>

    <asp:ObjectDataSource ID="MealReplacementOptionDataSource" runat="server" 
        TypeName="Chart2GoWeb.Domain.Entities.WFEvents.MealReplacementOption" 
        SelectMethod="Select">
    </asp:ObjectDataSource>

    <asp:FormView
        DataSourceID="ResidentsMealsODS" 
        ID="nourishmentFormView" 
        DefaultMode="Edit" 
        OnItemInserted="nourishment_OnItemInserted" 
        OnItemUpdated="nourishment_OnItemUpdated" 
        RunAt="server">
        <EditItemTemplate>

        <table class="EventQtable">
            <tr>
                <th colspan="2">
                    <asp:Label ID="Title" runat="server"><% Response.Write( TitleString); %></asp:Label>
                </th>
            </tr>
            <tr>
                <td>Date</td>
                <td><asp:Label ID="mealDate" runat="server" Text='<%# Eval("MealDate") %>'/></td>
            </tr>
            <tr>
                <td>Declined</td>
                <td><asp:CheckBox ID="cbDeclined" runat="server" Checked='<%# Bind("IsDeclined") %>' /></td>
            </tr>
            <tr>
                <td>Out Of Facility</td>
                <td><asp:CheckBox ID="cbIsOutOfFac" runat="server" Checked='<%# Bind("IsOutOfFac") %>'/></td>
            </tr>
            <tr>
                <td>NPO</td>
                <td><asp:CheckBox ID="cbNPO" runat="server" Checked='<%# Bind("IsNpo") %>'/></td>
            </tr>
<% 
    // Only show the meal replacement if the nourishment type does NOT have an underscore in it.
    if (Request.QueryString["nourishmentType"].IndexOf('_') == -1)
    { 
%>
            <tr>
                <td>
                    Meal Replacement</td>
                <td>
                    <asp:DropDownList ID="ddlMealReplacement" runat="server" AutoPostBack="True" 
                        DataSourceID="MealReplacementOptionDataSource" DataTextField="DisplayValue" 
                        DataValueField="DBValue"                         
                        SelectedValue='<%# Bind("MealReplacement") %>' />
                </td>
            </tr>
<%
    }
%>
            <tr>
                <td>Meal</td>
                <td>
                    <asp:Label ID="lblMealOld" runat="server" CssClass="ccUnits" Text='<%# Eval("Pct4Edit") %>' />% +
                    <asp:TextBox ID="txtMeal" runat="server" type="number" CssClass="ccUnits" MaxLength="3" OnKeyPress="NumericOnly()" Text='<%# Bind("Pct2EditBind") %>' />%<asp:RangeValidator ID="rvRangeValidator" runat="server" ControlToValidate="txtMeal" ErrorMessage="Valid range is 0-200" MaximumValue="200" MinimumValue="0" Type="Integer">*</asp:RangeValidator>
                </td>
            </tr>
            <tr>
                <td>Fluid</td>
                <td>
                    <asp:Label ID="lblFluidOld" runat="server" CssClass="ccUnits" Text='<%# Eval("Fluid4Edit") %>' />cc +
                    <asp:TextBox ID="txtFluid" runat="server" type="number" CssClass="ccUnits" MaxLength="4" OnKeyPress="NumericOnly()" Text='<%# Bind("Fluid2EditBind") %>' />cc
                </td>
            </tr>
            <tr>
                <td>Fortified Fluid</td>
                <td>
                    <asp:Label ID="lblFortifiedFluidOld" runat="server" CssClass="ccUnits" Text='<%# Eval("FortifiedFluid4Edit") %>' />cc +
                    <asp:TextBox ID="txtFortifiedFluid" runat="server" type="number" CssClass="ccUnits" MaxLength="4" OnKeyPress="NumericOnly()" Text='<%# Bind("FortifiedFluid2EditBind") %>' />cc
                </td>
            </tr>
            <tr>
                <td>Fluid Total</td>
                <td>
                    <asp:Label ID="lblFluidTotal" runat="server" CssClass="ccUnits" Text='<%# Eval("FluidTotal4Edit") %>' />cc
                </td>
            </tr>
        </table>
        <asp:Button ID="saveButton" runat="server" CommandName="Update" CssClass="GenBtn" Text="Save" />&nbsp;
        <asp:Button ID="cancelButton" runat="server" CssClass="GenBtn" onclick="cancelButton_Click" Text="Cancel" />
        </EditItemTemplate>

        <InsertItemTemplate>
        <table class="EventQtable">
            <tr>
                <th colspan="2"><asp:Label ID="Title" runat="server"><% Response.Write( TitleString); %></asp:Label></th>
            </tr>
            <tr>
                <td>Date</td>
                <td><asp:Label ID="mealDate" runat="server" Text='<%# Eval("MealDate") %>'/></td>
            </tr>
            <tr>
                <td>Declined</td>
                <td><asp:CheckBox ID="cbDeclined" runat="server" Checked='<%# Bind("IsDeclined") %>'/></td>
            </tr>
            <tr>
                <td>Out Of Facility</td>
                <td><asp:CheckBox ID="cbIsOutOfFac" runat="server" Checked='<%# Bind("IsOutOfFac") %>'/></td>
            </tr>
            <tr>
                <td>NPO</td>
                <td><asp:CheckBox ID="cbNPO" runat="server" Checked='<%# Bind("IsNpo") %>'/></td>
            </tr>
<% 
    // Only show the meal replacement if the nourishment type does NOT have an underscore in it.
    if (Request.QueryString["nourishmentType"].IndexOf('_') == -1)
    { 
%>
            <tr>
                <td>Meal Replacement</td>
                <td><asp:DropDownList ID="ddlMealReplacement" runat="server" AutoPostBack="True" 
                                      DataSourceID="MealReplacementOptionDataSource" DataTextField="DisplayValue" 
                                      DataValueField="DBValue" 
                                      SelectedValue='<%# Bind("MealReplacement") %>' /></td>
            </tr>
<% 
    }
%>
            <tr>
                <td>Meal</td>
                <td>
                    <asp:Label ID="lblMealOld" runat="server" Text="0" CssClass="ccUnits"/>%&nbsp; +
                    <asp:TextBox ID="txtMeal" runat="server" type="number" Text='<%# Bind("Pct") %>' MaxLength="3" OnKeyPress="NumericOnly()" CssClass="ccUnits" />%<asp:RangeValidator ID="rvRangeValidator" runat="server" ErrorMessage="Valid range is 0-200" Type="Integer" MaximumValue="200" MinimumValue="0" ControlToValidate="txtMeal">*</asp:RangeValidator>
                </td>
            </tr>
            <tr>
                <td>Fluid</td>
                <td>
                    <asp:Label ID="lblFluidOld" runat="server" Text="0" CssClass="ccUnits"/>cc +
                    <asp:TextBox ID="txtFluid" runat="server" type="number" Text='<%# Bind("Fluid") %>' MaxLength="4" OnKeyPress="NumericOnly()" CssClass="ccUnits" />cc
                </td>
            </tr>
            <tr>
                <td>Fortified Fluid</td>
                <td>
                    <asp:Label ID="lblFortifiedFluidOld" runat="server" Text="0" CssClass="ccUnits" Enabled="false" />cc +
                    <asp:TextBox ID="txtFortifiedFluid" runat="server" type="number" Text='<%# Bind("FortifiedFluid") %>'  MaxLength="4" OnKeyPress="NumericOnly()" CssClass="ccUnits" />cc
                </td>
            </tr>
            <tr>
                <td>Fluid Total</td>
                <td>
                    <asp:Label ID="lblFluidTotal" runat="server" Text='0' CssClass="ccUnits"/>cc
                </td>
            </tr>
        </table>
        <asp:Button ID="saveButton"  CssClass="GenBtn" runat="server" Text="Save" CommandName="Insert"/>&nbsp;
        <asp:Button ID="cancelButton" CssClass="GenBtn" runat="server" Text="Cancel" onclick="cancelButton_Click"/>

        </InsertItemTemplate>
    </asp:FormView>

<script type="text/javascript">
    var cbDeclinedID = '<%= cbDeclined.ClientID %>';
</script> 

</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="FooterContent" runat="server"> 
    <table class="footer" border="0" cellspacing="0" cellpadding="0" style="background-image: url('<%= ResolveClientUrl("~/Images/BottomBar-1000x42.png")%>'); background-repeat: no-repeat; height: 42px; width: 1000px;" >
        <tr>
            <td width="4%">&nbsp;</td>
            <td width="9%"></td>
            <td width="56%">&nbsp;</td>
            <td width="27%" align="center"/>
            <td width="4%"></td>
        </tr>
    </table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:20:37.423

这是因为`dbDeclines`在您的`<asp:FormView id="nourishmentFormView">`.

试试这个（未经测试）......

```
<script type="text/javascript">
    var cbDeclinedID = '<%=nourishmentFormView.FindControl("cbDeclined").ClientID%>';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:46:11.660

愚蠢的问题，但 cbDeclined 存在吗？

如果是这样，它是否可能在另一个控件（即gridview 或listview）中，然后需要您获取网格，然后是.GetChildControl() 而不是直接引用cbDeclined？

您当前执行此操作的方式是在 ASP.NET 中引用 ID 的正确方法（除非您使用静态可猜测的 ID，但这会破坏控件重复的功能）。

**编辑**

更新代码后，您似乎正在尝试引用另一个控件中的控件，您需要执行类似的操作

```
<script type="text/javascript">
    var cbDeclinedID = '<%= ((CheckBox)nourishmentFormView.FindControl("cbDeclined")).ClientID %>';
</script> 
```

# java - 与 Spring/Hibernate3 的多对多关系问题

> ID：11620976
> 
> 赞同：0
> 
> 时间：2012-07-23T21:42:17.467
> 
> 标签：java, database, spring, hibernate

我正在开发一个结合了 GWT、Spring MVC 和 Hibernate 的应用程序（具体来说，我使用 Hibernate 3 jar 库）。我是 Hibernate 的新手，我需要使用以下模型。

![在此处输入图像描述](../Images/d9a797f1c0c2aa38d9cdc520304cb0a0.png)

所以在 Node 和 Wall、Room 和 Wall 之间，我需要有 ManyToMany 的关系。

下面是**Node**实体类的代码：

```
package sk.jakub.app.shared.model;

@Entity
public class Node implements Serializable{
    private static final long serialVersionUID = -5924198459524011627L;

    private Long id; //id of the concrete node
    private float x, y;

    @ManyToMany
    private Collection<Wall> walls;

    public Node(){
        walls = new ArrayList<Wall>();
    }

    @Id
    @Column(name = "NODE_ID")
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    //getters and setters for x,y omitted

    public void addWall(Wall wall){
        if(!getWalls().contains(wall))
            getWalls().add(wall);
        if(!wall.getNodes().contains(this))
            wall.getNodes().add(this);
    }

    public Collection<Wall> getWalls(){
        return walls;
    }   
} 
```

和**Wall** .java 实体类：

```
package sk.jakub.app.shared.model;

@Entity
public class Wall implements Serializable{
    private static final long serialVersionUID = -5924198459524011627L;

    private Long id;
    private String type;

    @ManyToMany
    private Collection<Room> rooms;

    @ManyToMany(targetEntity=Node.class, mappedBy="walls", fetch=FetchType.EAGER)
    private Collection<Node> nodes;

    public Wall(){
        nodes = new ArrayList<Node>();
    }

    @Id
    @Column(name = "WALL_ID")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    //getters and setters for type omitted

    public Collection<Node> getNodes(){
        return nodes;
    }

    public void addNode(Node node){
        if(!getNodes().contains(node))
            getNodes().add(node);
        if(!node.getWalls().contains(this))
            node.getWalls().add(this);
    }

    public Collection<Room> getRooms(){
        return rooms;
    }

    public void addRoom(Room room){
        if(!getRooms().contains(room))
            getRooms().add(room);
        if(!room.getWallsH().contains(this))
            room.getWallsH().add(this);
    }
} 
```

**Room** .java 实体类：

```
package sk.jakub.app.shared.model;

@Entity
public class Room implements Serializable{
    private static final long serialVersionUID = -5924198459524011627L;

    private Long id;
    private String name;
    private String description;

    @ManyToMany(targetEntity=Wall.class, mappedBy="rooms", fetch=FetchType.EAGER)
    private Collection<Wall> wallsH;

    public Room(){
        wallsH = new ArrayList<Wall>();
    }

    @Id
    @Column(name = "ROOM_ID")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    //getters and setters for name and descritpion omitted

    public Collection<Wall> getWallsH(){
        return wallsH;
    }

    public void addWallsH(Wall wall){
        if(!getWallsH().contains(wall))
            getWallsH().add(wall);
        if(!wall.getRooms().contains(this))
            wall.getRooms().add(this);
    }
} 
```

现在***是 DAO***（数据访问对象）。

**节点道**：

```
package sk.jakub.app.server.dao;

@Repository
public class NodeDAO {

    @Autowired
    private HibernateTemplate hibernate;

    public Node get(Long id){
        return hibernate.get(Node.class, id);
    }

    public void delete(Node entity){
        hibernate.delete(entity);
    }

    public void save(Node entity){
        hibernate.saveOrUpdate(entity);
    }

    private Session getCurrentSession(){
        return hibernate.getSessionFactory().getCurrentSession();
    }   
} 
```

**墙道**：

```
package sk.jakub.app.server.dao;

@Repository
public class WallDAO {

    @Autowired
    private HibernateTemplate hibernate;

    public Wall get(Long id){
        return hibernate.get(Wall.class, id);
    }

    public void delete(Wall entity){
        hibernate.delete(entity);
    }

    public void save(Wall entity){
        hibernate.saveOrUpdate(entity);
    }

    private Session getCurrentSession(){
        return hibernate.getSessionFactory().getCurrentSession();
    }
} 
```

**房间道**：

```
package sk.jakub.app.server.dao;

@Repository
public class RoomDAO {

    @Autowired
    private HibernateTemplate hibernate;

    public Room get(Long id){
        return hibernate.get(Room.class, id);
    }

    public void delete(Room entity){
        hibernate.delete(entity);
    }

    public void save(Room entity){
        hibernate.saveOrUpdate(entity);
    }

    private Session getCurrentSession(){
        return hibernate.getSessionFactory().getCurrentSession();
    }   
} 
```

现在这里是 Spring MVC **applicationContext.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/tx 
                        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                        http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-2.5.xsd
                        http://www.springframework.org/schema/aop 
                        http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

<tx:annotation-driven transaction-manager="transactionManager"/>
<context:annotation-config/>

<!-- NASTAVENIE KORENOVEHO BALIKA -->
<context:component-scan base-package="sk.jakub.app.server"/>
<aop:aspectj-autoproxy/>

<bean id="databaseProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">

</bean>

<!-- UDAJE PRE PRIPOJENIE DO DATABAZY A VYTVORENIE BEANU PRE DATA SOURCE -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="url" value="jdbc:mysql://localhost:3306/editor" />
    <property name="username" value="root" />
    <property name="password" value="gk04006c" />
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="maxActive" value="100" />
    <property name="maxIdle" value="30" />
    <property name="maxWait" value="-1" />
    <property name="defaultAutoCommit" value="false" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<!-- NASTEAVENIE DIALEKTU PRE HIBERNATE A POD -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" destroy-method="destroy">
    <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="sk.jakub.app.shared.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.id.new_generator_mappings">true</prop>
        </props>
    </property>
</bean>

<!-- NASTAVEIE HIBERNATE TEMPLATE PRE PRIPOJENIE KU DATABAZE, TEN JE POTOM PRIPRAVENY NA AUTOWIRING DO SAMOTNEHO JAVOVSKEHO KODU -->
<bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

</beans> 
```

问题是我收到以下**错误消息**：

```
Starting Jetty on port 8888
   [WARN] Failed startup of context com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload@1d69af9f{/,/home/jakub/ws/Editor1/war}
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'roomDAO': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.orm.hibernate3.HibernateTemplate sk.jakub.app.server.dao.RoomDAO.hibernate; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplate' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.orm.hibernate3.HibernateTemplate sk.jakub.app.server.dao.RoomDAO.hibernate; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplate' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    ... 31 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplate' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 33 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 46 more
Caused by: org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:291)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:275)
    at org.hibernate.mapping.Property.isValid(Property.java:217)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:464)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:236)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1193)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1378)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 53 more
   [WARN] Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'roomDAO': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.orm.hibernate3.HibernateTemplate sk.jakub.app.server.dao.RoomDAO.hibernate; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplate' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]:
org.hibernate.MappingException: Could not determine type for: java.util.Collection, at table: Wall, for columns: [org.hibernate.mapping.Column(nodes)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:291)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:275)
    at org.hibernate.mapping.Property.isValid(Property.java:217)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:464)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:236)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1193)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1378)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

我认为问题可能出在定义多对多关系的集合中。我为 ManyToMany 的集合尝试了 @ElementCollection 注释，但它不起作用。

非常感谢您的任何建议、想法和帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:54:38.250

您必须选择：要么注释 getter，要么注释字段。但不是两者兼而有之。

如果`@Id`在 getter 上，则字段的所有注释都将被忽略。如果`@Id`是在一个字段上，那么 getter 上的所有注释都将被忽略。

# java - Quartz 调度程序：集群 - 作业执行两次

> ID：11620979
> 
> 赞同：0
> 
> 时间：2012-07-23T21:42:23.857
> 
> 标签：java, spring, triggers, quartz-scheduler, scheduler

我有一个使用 Quartz 1.6.6 的 Java 应用程序。它部署在Weblogic上，其架构包括两个应用服务器。

该应用程序包括一个定期运行的触发过程 - 每分钟一次。这是使用 Spring 3.1.1（使用 org.springframework.scheduling.quartz.SchedulerFactoryBean）实现的。

我在 Java 应用程序的 EAR 文件中包含了一个quartz.properties 文件，希望能够利用 Quartz 的集群设施，以便应用程序服务器能够同步自己，以便该作业每分钟只运行一次。但是，在查看应用程序日志时，很明显可以从生成的消息中看到，每 60 秒仍有两个作业在运行 - 一个比另一个慢几秒钟。

令人困惑的是，我有另一个 Java 应用程序，其中包含了 Quartz 调度，它似乎工作得非常愉快。这个其他应用程序具有每分钟触发一次触发器的相同机制，从日志中我可以看到该作业每 60 秒只运行一次。

昨天下午作业已运行的时间示例：

15:10:46,984 15:10:49,583 15:11:46,961 15:11:49,561

这是我的quartz.properties 文件：

```
org.quartz.scheduler.instanceName=QuartzClusteredScheduler
org.quartz.scheduler.instanceId=AUTO

org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount=5

org.quartz.dataSource.dbDS.driver=oracle.jdbc.driver.OracleDriver
org.quartz.dataSource.dbDS.URL=jdbc:oracle:thin:@MY_DB:1521:my_sid
org.quartz.dataSource.dbDS.user=username
org.quartz.dataSource.dbDS.password=password

org.quartz.dataSource.dbDS.maxConnections=5

org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate

org.quartz.jobStore.isClustered=true
org.quartz.jobStore.dataSource=dbDS
org.quartz.jobStore.tablePrefix=QRTZ_ 
```

我查看了 Quartz 特定表的数据库，但其中根本没有数据，这让我认为属性文件由于某种原因没有被拾取。但是，我不明白为什么，因为我在 WAR 的 WEB-INF/classes 下的 EAR 文件中包含了quartz.properties。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:46:08.580

您能否在日志中看到石英调度程序启动时的输出：

```
[INFO] 23 Jul 10:41:08.813 PM main [com.mchange.v2.c3p0.C3P0Registry]
Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace: 10]

[INFO] 23 Jul 10:41:08.842 PM main [org.quartz.impl.StdSchedulerFactory]
Using default implementation for ThreadExecutor

[INFO] 23 Jul 10:41:08.876 PM main [org.quartz.core.SchedulerSignalerImpl]
Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl

[INFO] 23 Jul 10:41:08.876 PM main [org.quartz.core.QuartzScheduler]
Quartz Scheduler v.2.2.0-SNAPSHOT created.

[INFO] 23 Jul 10:41:08.878 PM main [org.quartz.impl.jdbcjobstore.JobStoreTX]
Using thread monitor-based data access locking (synchronization).

[INFO] 23 Jul 10:41:08.879 PM main [org.quartz.impl.jdbcjobstore.JobStoreTX]
JobStoreTX initialized.

[INFO] 23 Jul 10:41:08.880 PM main [org.quartz.core.QuartzScheduler]
Scheduler meta-data: Quartz Scheduler (v2.2.0-SNAPSHOT) 'TestScheduler' with instanceId     'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 12 threads.
  Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports         persistence. and is not clustered.

[INFO] 23 Jul 10:41:08.880 PM main [org.quartz.impl.StdSchedulerFactory]
Quartz scheduler 'TestScheduler' initialized from default resource file in Quartz         package: 'quartz.properties'

[INFO] 23 Jul 10:41:08.880 PM main [org.quartz.impl.StdSchedulerFactory]
Quartz scheduler version: 2.2.0-SNAPSHOT

[INFO] 23 Jul 10:41:08.949 PM main         [com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource]
Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1hge1678o1eqj5izxjkbki|12b31a7c, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> org.apache.derby.jdbc.ClientDriver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge1678o1eqj5izxjkbki|12b31a7c, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:derby://localhost:1527//tmp/bug.db;create=true, lastAcquisitionFailureDefaultUser -> null, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 5, maxStatements -> 0, maxStatementsPerConnection -> 120, minPoolSize -> 1, numHelperThreads -> 3, numThreadsAwaitingCheckoutDefaultUser -> 0, preferredTestQuery -> null, properties -> {user=******, password=******}, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false ] 
```

这表明您的quartz.properties 被使用并且JobStoreTX 被选为jobstore。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T00:57:01.640

我使用了解决方法：在我的应用程序上下文 XML 文件中包含 SchedulerFactoryBean 定义中的属性，而不是使用quartz.properties。

# php - 使用 PHP 返回 reddit 中的链接列表

> ID：11620985
> 
> 赞同：3
> 
> 时间：2012-07-23T21:42:30.690
> 
> 标签：php, reddit

只是想知道是否有人有示例代码来返回 reddit 的前 25 个链接（使用 PHP）。在 JSON 或 XML 中。我无法绕开 API ......而且很少使用 python。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T22:06:32.390

```
$array = (array) json_decode(file_get_contents("http://www.reddit.com/.json")); 
```

这将返回一个 PHP 数组，其中包含来自首页的所有数据。您可以使用简单的 while() 循环来限制显示的数量。

这很简单，因为您有上面的数组，因为您所要做的就是逐步完成它。

# multithreading - NSThread callStackSymbols 来自另一个线程？

> ID：11620986
> 
> 赞同：3
> 
> 时间：2012-07-23T21:42:31.057
> 
> 标签：multithreading, background, nsthread

我有一个后台线程，每 200 毫秒轮询一次 UI 线程。如果挂起 2 秒，我想在那时从 UI 线程获取调用堆栈。当我调用 [NSThread callStackSymbols] 时，它在后台线程上执行，因为我检查了后台线程中的挂起是否超过 2 秒。

有没有一种简单的方法可以从 bg 线程获取主线程上的调用堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:54:43.090

**以下是如何“手动”执行此操作**。好吧，如果我理解正确的话，其中一个线程正在做一些繁重的工作，这需要很长时间。对于这些情况，我只需点击 xcode 中的暂停按钮即可暂停调试器。然后很容易检查调用堆栈并查看哪个方法阻止了继续。

# android - 滚动时带有 ViewHolder 和部分的 Listview 失败

> ID：11620988
> 
> 赞同：3
> 
> 时间：2012-07-23T21:42:34.837
> 
> 标签：android, listview, adapter

我正在构建一个带有部分的列表视图。我之前正在使用[这个](https://stackoverflow.com/questions/3832254/how-can-i-make-my-arrayadapter-follow-the-viewholder-pattern)帖子的答案并问过一个问题，但又被卡住了。我认为这是一个非常奇怪的错误。

当我开始我的活动时，我可以在屏幕上看到我想要的列表。但是当我尝试开始滚动活动时崩溃了。我以为我以相同的方式实现了一切，但显然我不是。我的适配器：

```
public class DelftAdapter extends BaseAdapter {

    private static final int TYPE_ITEM = 0;
    private static final int TYPE_SECTION = 1;
    private Activity activity;
    private  List<ListItem> listItems;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 
    private final int[] bgColors = new int[] { R.color.list_odd, R.color.list_even };

    public DelftAdapter(Activity a, ArrayList<ListItem> li) {
        activity = a;
        listItems = li;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());

    }

    public int getCount() {
        return listItems.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public int getItemViewType(int position) {
        return listItems.get(position).isSection() ? TYPE_SECTION : TYPE_ITEM;
    }

    @Override
    public int getViewTypeCount() {
        return 2;  // sectionheader and regular item
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        int type = getItemViewType(position);
        View vi=convertView;
            final ListItem li = listItems.get(position);
            ItemViewHolder itemHolder;
            SectionViewHolder sectionHolder;

             switch (type) {
             case TYPE_SECTION: // is sectionheader
                 if (vi == null) { //convertview==null
                sectionHolder = new SectionViewHolder();
                vi = inflater.inflate(R.layout.sectionedlistitem, null);
                vi.setOnClickListener(null);
                vi.setOnLongClickListener(null);
                vi.setLongClickable(false);
                sectionHolder.title = (TextView) vi.findViewById(R.id.list_header_title);
               }else{//convertview is not null
                   sectionHolder = (SectionViewHolder)vi.getTag();
               }
                   SectionItem si = (SectionItem)li;
                   sectionHolder.title.setText(si.getTitle());
                break;
             case TYPE_ITEM:// no sectionheader
                if (vi == null) { //convertview==null
                    itemHolder = new ItemViewHolder();
                    vi = inflater.inflate(R.layout.singlelistitem, null);
                    itemHolder.name=(TextView)vi.findViewById(R.id.tvname);
                    itemHolder.tip=(TextView)vi.findViewById(R.id.tvtip);
                    itemHolder.image=(ImageView)vi.findViewById(R.id.image);
                }else{  // convertview != null
                    itemHolder = (ItemViewHolder)vi.getTag();
                }
                ListData ld = (ListData)li;
                itemHolder.name.setText(ld.name);
                itemHolder.tip.setText(ld.tip);
                        if (ld.photoUrl != null ){
                            imageLoader.DisplayImage(ld.photoUrl, itemHolder.image);
                        }else{
                            itemHolder.image.setImageURI(Uri.fromFile(new File("//assets/nopic.png")));
                        }
                        // alternating colors
                    int colorPos = position % bgColors.length;
                    vi.setBackgroundResource(bgColors[colorPos]);
                    break;
                 }

        return vi;

}
    public static class SectionViewHolder {
        public TextView title;
    }

    public static class ItemViewHolder {
        public TextView name;
        public TextView tip;
        public ImageView image;
    }

} 
```

我为两种不同的视图构建了两个 ViewHolders。发生的错误是 NullPointerException 就 `itemHolder.name.setText(ld.name);`行了。我没有得到的是代码适用于前几个条目，但当我开始滚动时失败。在我使用的数据中，name 和 tip 永远不会为空，只有 photoUrl 可能是空的，但这已包含在代码中。

任何人都知道为什么这段代码失败了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:47:00.787

在你创建一个新的 viewholder 并扩展一个新视图的代码路径中，你从来没有真正将 viewHolder 存储在 Views 标记中，所以当你滚动并获取现有视图时，view.gettag() 返回 null，稍后当你尝试并使用 ViewHolder 你得到空指针异常。您需要添加对 setTag() 的调用。

# php - 记录 PHP 脚本的实时运行时间

> ID：11620989
> 
> 赞同：2
> 
> 时间：2012-07-23T21:42:36.313
> 
> 标签：php, email, loops, cron

假设我`set_time_limit`的设置为 30 秒且无法更改。我在 php 中有一个电子邮件脚本，它将在 1 个 cron 作业上运行超过 30 秒（我还没有达到那个时间标记。） 30 秒后超时会发生什么？脚本会停止然后继续吗？

如果没有，我想记录从脚本循环开始到达到 30 秒的经过时间，然后暂停该过程然后继续。

有什么好方法可以做到这一点？

**更新：我认为可能有效**

```
function email()
{
  sleep(2); //delays script 2 seconds (time to break script on reset)

  foreach ($emails as $email): 
       // send individual emails with different content
       // takes longer than 30 seconds
   enforeach;

   // on 28 seconds
   return email(); //restarts process
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:49:23.057

Suggested approach:

```
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$time_start = microtime_float();
foreach ($emails as $email): 
   // send individual emails with different content
   // takes longer than 30 seconds

   $time_curr = microtime_float();
   $time = $time_curr - $time_start;
   if($time > 28){ //if time is bigger than 28 seconds (2 seconds less - just in case)
        break;// we will continue processing the rest of the emails - next time cron will call the script
   }
enforeach; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:10:01.250

What you ask is not possible. When the script timeout is reached, it stops. You cannot pause it and continue it. You can only restart it. Let me tell you what I did to solve a similar problem.

```
Part One:
Queue all your emails into a simple database. (Just a few fields like to,
 from, subject, message, and a flag to track if it is sent.)

Part Two.
1\. Start script
2\. Set a variable with the start time
3\. Check the db for any mails that have not been sent yet
4\. If you find any start a FOR loop
5\. Check if more than 20 seconds have elapsed (adjust the window here, I like 
   to allow some spare time in case a mail call takes a few seconds longer.)
6\. If too much time passed, exit the loop, go to step 10
7\. Send an email
8\. Mark this email as sent in the db
9\. The FOR loop takes us back to step 4
10\. Exit the script 
```

Run this every 60 seconds. It sends what it can, then the rest gets sent next time.

# sphinx - 如何让 sphinx 在字符串中间执行星搜索？

> ID：11620995
> 
> 赞同：0
> 
> 时间：2012-07-23T21:43:04.497
> 
> 标签：sphinx

例如，搜索单词 cat，我想用#*cat* 匹配单词。我已经设置了哈希标签索引设置，并且设置了用于星搜索的 sphinx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:33:22.370

它没有很好的记录，我自己也从未尝试过，但这里有一个帖子： [http ://sphinxsearch.com/forum/view.html?id=9847](http://sphinxsearch.com/forum/view.html?id=9847)

来自 Sphinx 开发人员的建议，使用普通索引和 dict=keywords 将允许通配符，因此可以搜索

```
#%cat* 
```

由于某种原因，% 似乎被用作字符串中间的通配符。

# facebook - Facebook是否改变了他们放置“via”的位置 ' 当帖子通过第 3 方平台发布到新闻源/时间线时？

> ID：11620997
> 
> 赞同：-1
> 
> 时间：2012-07-23T21:43:12.753
> 
> 标签：facebook

过去，logo + via 出现在帖子底部，现在“via”出现在顶部品牌 logo 旁边。我尝试先在博客/支持网站上搜索，但找不到任何东西。感谢您的洞察力！我在 PMD FB 页面上发布了这个，Jennifer Nieto 建议我在这里发布这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:30:48.967

在新闻源中，'via' 属性仍然出现在帖子底部，但是如果它是 Open Graph 动作帖子，那么帖子的第一行将会有一个额外的属性，可以是 'via Sitename'，'在 Sitename'、'by Sitename' 或其他一些替代方案上。

归因出现在用户时间轴上略有不同的位置，在这种情况下，我认为在帖子的顶部。