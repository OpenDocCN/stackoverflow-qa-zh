# StackOverflow 问答 12055000-12055999

# c# - Metro app 如何在后面的 C# 代码中创建分组的 GridView

> ID：12055002
> 
> 赞同：0
> 
> 时间：2012-08-21T12:37:47.447
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

在我的 Metro 应用程序中，我需要在 GridView 上显示一组 VariableSizeWrapGrid。在 XAML 中这样做很简单（通过创建 ItemsPanelTemplate 和 GroupStyle）。但是有没有办法在后面的 C# 代码中做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:42:27.207

从[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.groupstyle.aspx)：

```
using System;
using System.Windows;
using System.Windows.Data;

namespace GroupingSample
{
    public partial class Window1 : System.Windows.Window
    {

        public Window1()
        {
            InitializeComponent();
        }

        CollectionView myView;
        private void AddGrouping(object sender, RoutedEventArgs e)
        {
            myView = (CollectionView)CollectionViewSource.GetDefaultView(myItemsControl.ItemsSource);
            if (myView.CanGroup == true)
            {
                PropertyGroupDescription groupDescription
                    = new PropertyGroupDescription("@Type");
                myView.GroupDescriptions.Add(groupDescription);
            }
            else 
                return;
        }

        private void RemoveGrouping(object sender, RoutedEventArgs e)
        {
            myView = (CollectionView)CollectionViewSource.GetDefaultView(myItemsControl.ItemsSource);
            myView.GroupDescriptions.Clear();
        }
    }
} 
```

这里的关键是您从 中获取默认视图`ItemsSource`并在其上设置分组。这一行：

```
myView = (CollectionView)CollectionViewSource.GetDefaultView(myItemsControl.ItemsSource); 
```

# c# - 密码必须至少包含一个非字母字符

> ID：12055005
> 
> 赞同：8
> 
> 时间：2012-08-21T12:38:07.390
> 
> 标签：c#, regex, asp.net-mvc, validation

我需要一个密码的正则表达式。密码必须至少包含 8 个字符。至少一个字符必须是数字或特殊字符（不是字母）。

```
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 8)]
[RegularExpression(@"(?=.*\W)?(?=.*\d)", ErrorMessage = "Error message")]
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; } 
```

我有一个长度验证，但我需要一个正则表达式的帮助来检查密码是否包含至少一个数字或特殊字符。

有效密码示例：

```
testtest85*
testtes*
testtes1
test1234*+ 
```

无效密码示例：

```
testtest
testabc 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T14:21:17.000

使用正则表达式模式`^(?=.{8})(?=.*[^a-zA-Z])`

* * *

解释：

```
^(?=.{8})(?=.*[^a-zA-Z])
│└──┬───┘└──────┬──────┘
│   │           │
│   │           └ string contains some non-letter character
│   │
│   └ string contains at least 8 characters
│
└ begining of line/string 
```

* * *

如果您还想限制最大长度*（比如说 16）*，那么使用正则表达式模式：

```
^(?=.{8,16}$)(?=.*[^a-zA-Z]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:48:47.420

通过一个相当简单的正则表达式运行它：`[^a-zA-Z]`

然后分别检查它的长度：

```
if(string.Length > 7) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:28:23.277

一个简单的方法是这样的：

```
Match match1 = Regex.Match(<input_string>, @"(?=.{7})"); 
```

match1.Success 确保至少有 8 个字符。

```
Match match2 = Regex.Match(<input_string>, [^a-zA-Z]); 
```

match2.Success 确保字符串中至少有一个特殊字符或数字。

```
So, match1.Success && match2.Success guarantees will get what you want. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T15:31:24.407

我尝试了 Omega 的示例，但它不适用于我的 C# 代码。我建议改用这个：

```
[RegularExpression(@"^(?=[^\d_].*?\d)\w(\w|[!@#$%]){7,20}", ErrorMessage = @"Error. Password must have one capital, one special character and one numerical character. It can not start with a special character or a digit.")] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T12:47:50.153

像这样的表达：

```
[a-zA-Z]*[0-9\+\*][a-zA-Z0-9\+\*]* 
```

应该可以正常工作（显然插入您想要允许的任何其他特殊字符或使用 ^ 运算符来匹配除字母/数字以外的任何内容）；无需使用复杂的环视。如果您只想允许您知道是“安全”的特殊字符的某个子集，而禁止所有其他特殊字符，则这种方法是有意义的。

如果您想包含除某些您知道是“不安全”的特殊字符之外的所有特殊字符，那么使用以下内容是有意义的：

```
\w[^\\]*[^a-zA-Z\\][^\\]* 
```

在这种情况下，您明确禁止密码中出现反斜杠，并允许与至少一个非字母字符进行任何组合。

上面的表达式将匹配任何包含字母和至少一个数字或 +、* 的字符串。至于“长度为 8”的要求，确实没有理由使用正则表达式进行检查。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-01-05T08:06:26.137

```
 function randomPassword(length) {
        var chars = "abcdefghijklmnopqrstuvwxyz#$%ABCDEFGHIJKLMNOP1234567890";
        var pass = "";
        for (var x = 0; x < length; x++) {
            var i = Math.floor(Math.random() * chars.length);
            pass += chars.charAt(i);
        }
        var pattern = false;
        var passwordpattern = new RegExp("[^a-zA-Z0-9+]+[0-9+]+[A-Z+]+[a-z+]");
        pattern = passwordpattern.test(pass);
        if (pattern == true)
            { alert(pass); }
        else
         { randomPassword(length); }
    } 
```

试试这个来创建至少有一个特殊字符的随机密码

# javascript - iframe 提交并且用户被重定向回原始页面，但 iframe 似乎仍然存在？

> ID：12055007
> 
> 赞同：0
> 
> 时间：2012-08-21T12:38:11.190
> 
> 标签：javascript, html, iframe

我有一些 JavaScript 会生成一个 iframe，需要用户填写一些详细信息。在他们提交 iframe 表单后，他们会被重定向到之前的位置；但是，iframe 似乎仍然存在，因为在 firefox 中单击鼠标右键会显示“This Frame”选项。此外，我无法单击页面上的链接或任何内容。

另一方面，如果我包含一个在表单提交后关闭 iframe 的功能，则用户再次被重定向回原始页面，但这次没有右键单击“This Frame”选项以及页面上的所有链接可以点击。

谁能向我解释这里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:43:49.083

如果使用 Javascript 进行重定向，请尝试在重定向前添加：

```
window.top.location.href = "http://www.site.com"; 
```

否则，使用`target="_top"`：

```
<form action".." target="_top">
</form> 
```

# android - atomisboolean 的多线程问题

> ID：12055008
> 
> 赞同：0
> 
> 时间：2012-08-21T12:38:12.643
> 
> 标签：android, multithreading, atomicboolean

在尝试“开发”代码以使用 android 设备驱动机器人时，我陷入了一个愚蠢的问题，在寻求解决数周后，我最终会向你寻求帮助。我对android和java都是全新的。我基本上使用的是蓝牙聊天示例，只是更改了主要布局，绘制了一个带有 4 个箭头的遥控器。为了使用这些箭头，我实现了一个函数，只要按下给定的 imageButton，它应该每 300 毫秒发送一个字节。看下面的代码，如果它是一团糟不要太生气（我是初学者）：

```
private void OnTouch(ImageButton IB , final String str){

    IB.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, final MotionEvent ev){

             Thread t = new Thread() {

                public void run() {
                try{
                    if(ev.getAction()== MotionEvent.ACTION_DOWN){
                        a.set(false);
                        Log.e(TAG, "a set to false");
                    }
                    if(ev.getAction()== MotionEvent.ACTION_MOVE){
                        a.compareAndSet(true, false);
                    }
                    if(ev.getAction() == MotionEvent.ACTION_UP){
                        Log.e(TAG, "actionUp");
                        a.set(true);
                        Log.e(TAG, "a set to true");
                    }
                }
                finally{}
                }
            };

            t.start();
            while(!a.get()){

                    sendMessage(str);

                    Log.e(TAG, "message sent");
                    try {
                        Thread.sleep(300);
                        Log.e(TAG, "dodo");
                    } catch (InterruptedException e) {
                        Log.e(TAG, "error thread.sleep");
                        e.printStackTrace();
                    }
                }

            if(a.get())
            {
                mOutStringBuffer.setLength(0);
                Log.e(TAG, "StringBuffer=0");
                sendMessage(Stop);  
                Log.e(TAG, "S sent");
            }

            t.stop();
            Log.e(TAG, "t.stop and return");
            return a.get();
        }
    });
    } 
```

atomicBoolean a 在类的开头设置为： private AtomicBoolean a = new AtomicBoolean(true);

我的问题如下：当我按下一个按钮并按住它时，logcat 显示“StringBuffer=0”，然后显示“a set to false”“S sent”“t.stop and return”，然后有一段时间什么都没有（大约 12秒）然后它开始循环“发送的消息”“渡渡鸟”，即使我抬起手指也没有结束。如果我不让手指太长（简单点击），我会得到：“stringBuffer=0”“S sent”“a set to false”“t.stop and return”“actionUp”“a set to true”“已发送消息”“dodo”“StringBuffer=0”“S 已发送”“t.stop 并返回”

我真的很迷茫，不明白这个功能是怎么回事。

如果有帮助，我正在三星 Galaxy Tab (GT-P1000) 固件版本 2.2.1 上进行调试

希望有人可以帮助我调试它并解释我的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:48:15.037

据我了解，您正在 UI 线程中睡觉和循环。您不应该这样做 - 它会阻止 UI 对进一步的事件做出反应。相反，您应该以被动的方式进行操作 - 如果您希望“在 300 毫秒内”发生某些事情，那么设置一个计时器来执行此操作，如果在此之前发生了一些其他适当的操作，则取消它。

# devexpress - Xtrareports - 报告标题问题

> ID：12055013
> 
> 赞同：2
> 
> 时间：2012-08-21T12:38:31.363
> 
> 标签：devexpress

我有一份 .repx 格式的报告。带有组页眉、详细信息和组页脚。

问题是当第一页没有更多的组页脚空间时，组页脚会打印在下一页上，但在这一页上也会打印组页眉，即使详细部分没有更多记录。如果没有更多详细记录部分组标题在下一页上不可见，我该怎么做。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:03:28.493

请参阅此[当分组字段为空或为空时如何隐藏 GroupFooterBand？](http://www.devexpress.com/Support/Center/p/Q311702.aspx)

有两种方法可以实现这一点，但我建议您遵循以下方法：

> 如果您可以在 GroupHeaderBand.BeforePrint 和 GroupFooterBand.BeforePrint 事件处理程序中找出将隐藏哪些细节带，那么您可以隐藏相应的组页眉和页脚。

参考： [隐藏 GroupHeader 和 GroupFooter](http://www.devexpress.com/Support/Center/p/Q295143.aspx)
**[来自报告。]**
[如何缩小 groupHeader 或隐藏 groupHeader 中的 xrtable - 如果组标题被抑制，则不工作](http://www.devexpress.com/Support/Center/p/Q355774.aspx)
[抑制组页脚](http://www.devexpress.com/Support/Center/p/CQ19826.aspx)
[如何在最后一页上隐藏 GroupFooterBand](http://www.devexpress.com/Support/Center/p/Q230489.aspx)
[GroupFooter BeforePrint with Hierarchical数据结构](http://www.devexpress.com/Support/Center/p/Q382573.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T17:06:16.630

对于几乎相同的问题，我想出的解决方案是跟踪在每个页面上重置的计数器。

首先，在每页上打印`BeforePrint`的带子上连线：`TopMargin`

```
private int detailsPrintedThisPage = 0;
private void TopMargin_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e) {
    detailsPrintedThisPage = 0;
} 
```

接下来，每当打印细节时，都要跟踪它：

```
private void Details_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e) {
    detailsPrintedThisPage++;
} 
```

最后，在组页脚上，如果没有详细信息已打印此页，则取消页脚：

```
private void GroupFooter1_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e) {
   e.Cancel = (detailsPrintedThisPage == 0);
} 
```

我要解决的问题最初与您的问题相同，只是我的组页脚只是一个空白标签，用于在组之间提供填充。如果详细信息排列得恰到好处，空白间距会导致整个页面（带有组标题）打印在最后一页上，这正是您所描述的情况。

然而，在我的情况下，我通过完全删除页脚并在组标题之前添加额外的空间来简化问题，如果它是打印在给定页面上的第一个组标题，我会抑制它。但是，上面的代码改编自我的解决方案，适用于更一般的情况下，如果页面上没有详细信息，则您要专门描述要隐藏组页脚的位置。分享晚了 7 年，以防它帮助其他登陆这里的人......

# scala - Scala/Akka 负载均衡

> ID：12055017
> 
> 赞同：4
> 
> 时间：2012-08-21T12:38:44.190
> 
> 标签：scala, load-balancing, akka

我正在将 Scala/Akka 用于服务器/工作者样式程序。我目前正在使用[`RoundRobinRouter`](http://doc.akka.io/api/akka/2.0/akka/routing/RoundRobinRouter.html)我的工人演员之间的负载平衡。但是我想知道是否有更好的路由器？还是有什么“最好的”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:07:24.190

有一个[`SmallestMailboxRouter`](http://doc.akka.io/api/akka/2.0/akka/routing/SmallestMailboxLike.html)。该路由器将新消息添加到具有最短邮箱队列的从站。[您可以在此处](http://doc.akka.io/docs/akka/snapshot/scala/routing.html)找到文档。另一种方法是使用[`LoadBalancer`](http://doc.akka.io/api/akka/1.3.1/#akka.routing.LoadBalancer). 我只在pdf中找到它。

# python - Gnonlin 中的预定暂停

> ID：12055018
> 
> 赞同：25
> 
> 时间：2012-08-21T12:38:44.187
> 
> 标签：python, gstreamer, gnonlin

我正在使用 Gnonlin 播放两个视频。有一刻，我想暂停一个视频并播放另一个。但是，我不想手动暂停管道，因为其他视频也会暂停。

例如：

```
self.video[0].set_property("location", LOCATION_VIDEO1)
self.video[0].set_property("start", 0 * gst.SECOND)
self.video[0].set_property("duration", 5 * gst.SECOND)
self.video[0].set_property("media-start", 0 * gst.SECOND)
self.video[0].set_property("media-duration", 5 * gst.SECOND) 
```

这段视频持续了五秒钟。在接下来的五秒钟内，我可以做些什么来暂停或停止播放此视频？有没有办法让同一帧显示五秒钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T23:08:01.760

基于这篇文章[http://www.jonobacon.com/2006/12/27/using-gnonlin-with-gstreamer-and-python/](http://www.jonobacon.com/2006/12/27/using-gnonlin-with-gstreamer-and-python/)，如果我理解正确，我想你可以写：

```
self.video[0].set_property("location", LOCATION_VIDEO1)
self.video[0].set_property("start", 0 * gst.SECOND)
self.video[0].set_property("duration", 5 * gst.SECOND)
self.video[0].set_property("media-start", 0 * gst.SECOND)
self.video[0].set_property("media-duration", 0 * gst.SECOND) 
```

获得 5 秒的冻结帧。它可能对你有用......或者这可能有用：

```
self._playbin.set_state(gst.STATE_PAUSED) 
```

除此之外，我没有任何建议 - 文档似乎很少。如果你能指点我一个 API，我可能会有更好的主意。

# javascript - 使用图像作为 D3.js 的输入

> ID：12055028
> 
> 赞同：1
> 
> 时间：2012-08-21T12:39:02.033
> 
> 标签：javascript, image-processing, d3.js

我正在尝试评估 D3.js 是否适合我即将进行的项目。

我需要生成某些图像图表（例如 PNG 或浏览器通过其`<image>`标签支持的任何其他内容），但经过一番调查，我找不到任何机制来使用图像作为可视化的数据输入。

我错过了什么吗？它已经实施了吗？否则，是否有一些易于实现的抽象接口，我可以使用它并自己实现它？

# jquery - 如果有容器的总高度，则不能拖动 div

> ID：12055030
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:10.457
> 
> 标签：jquery, jquery-ui, resize, draggable, containment

我有一个带有以下css的div：

```
.azul{
   height:100%;
   width:100px;
   position:absolute;
   left:0px;
   top:0px;
   background-color:blue;
} 
```

100% 高度与容器的高度相同。

我将“dragstart”绑定到一个函数。该函数将 div 的大小调整为较小的高度。

如果我定义：

```
jQuery(element).draggable({ containment: ".container" }); 
```

div的大小调整得很好，但不能移动它的Y位置，只有X，所以......左边的css属性改变了，但顶部没有......

我推断当拖动开始时，jquery-ui 采用 div 的初始高度（100%），当我在函数中更改它时……jquery-ui 不允许我移动 Y 位置，因为 100%存储在某个地方...

我试图不投入 100% 并使用 px 值进行动态化......

谢谢建议！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:35:20.417

看起来您需要在 dragStart 之前调整大小。

```
jQuery(".panel").bind("mousedown", onDragStart); 
```

# android - 活动导航需要很多时间

> ID：12055035
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:25.217
> 
> 标签：android

朋友们，我正在使用意图从一个活动导航到另一个活动。导航过程需要大约一分钟。请查找日志

```
08-21 18:01:32.719: I/System.out(4636): Button has been clicked
08-21 18:02:32.999: I/System.out(4636): successfull navigation 
```

代码：

```
public void onClick(View v) {
if(v==refreshButton)
{
    System.out.println("Button has been clicked");
    startActivity(new Intent(this,Refresh.class));
} 
```

请帮助我。我已经尝试清理项目并重新启动智能手机。

刷新类

```
public class RefreshSettings extends Activity implements android.view.View.OnClickListener
{

    Button refresh;
    EditText code;
    String pinCode;
    TelephonyManager telephonyManager;
     String imei;
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        System.out.println("successfull navigation");
        super.onSaveInstanceState(outState);
        setContentView(R.layout.refresh_settings);

        telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
        imei=telephonyManager.getDeviceId();

        refresh=(Button)findViewById(R.id.button_Refresh_Settings);
        refresh.setOnClickListener(this);

        code=(EditText)findViewById(R.id.edittext_Refresh_Code);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:48:07.987

更改`onSaveInstanceState()`为`onCreate()`。

从文档中我了解到应该调用 onSaveInstanceState() 来仅存储临时信息，

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    System.out.println("successfull navigation");
    setContentView(R.layout.refresh_settings);

    telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    imei=telephonyManager.getDeviceId();

    refresh=(Button)findViewById(R.id.button_Refresh_Settings);
    refresh.setOnClickListener(this);

    code=(EditText)findViewById(R.id.edittext_Refresh_Code);

} 
```

# python - Pylint 似乎没有生成导入图

> ID：12055037
> 
> 赞同：6
> 
> 时间：2012-08-21T12:39:30.137
> 
> 标签：python, pylint

我正在使用以下基本上未经编辑的配置文件运行 pylint

```
[MASTER]

# Specify a configuration file.
#rcfile=

# Python code to execute, usually for sys.path manipulation such as
# pygtk.require().
#init-hook=

# Profiled execution.
profile=no

# Add files or directories to the blacklist. They should be base names, not
# paths.
ignore=CVS

# Pickle collected data for later comparisons.
persistent=yes

# List of plugins (as comma separated values of python modules names) to load,
# usually to register additional checkers.
load-plugins=

[MESSAGES CONTROL]

# Enable the message, report, category or checker with the given id(s). You can
# either give multiple identifier separated by comma (,) or put this option
# multiple time.
#enable=

# Disable the message, report, category or checker with the given id(s). You
# can either give multiple identifier separated by comma (,) or put this option
# multiple time (only on the command line, not in the configuration file where
# it should appear only once).
#disable=

[REPORTS]

# Set the output format. Available formats are text, parseable, colorized, msvs
# (visual studio) and html
output-format=text

# Include message's id in output
include-ids=no

# Put messages in a separate file for each module / package specified on the
# command line instead of printing them on stdout. Reports (if any) will be
# written in a file name "pylint_global.[txt|html]".
files-output=yes

# Tells whether to display a full report or only the messages
reports=yes

# Python expression which should return a note less than 10 (10 is the highest
# note). You have access to the variables errors warning, statement which
# respectively contain the number of errors / warnings messages and the total
# number of statements analyzed. This is used by the global evaluation report
# (RP0004).
evaluation=10.0 - ((float(5 * error + warning + refactor + convention) / statement) * 10)

# Add a comment according to your evaluation note. This is used by the global
# evaluation report (RP0004).
comment=no

[BASIC]

# Required attributes for module, separated by a comma
required-attributes=

# List of builtins function names that should not be used, separated by a comma
bad-functions=map,filter,apply,input

# Regular expression which should only match correct module names
module-rgx=(([a-z_][a-z0-9_]*)|([A-Z][a-zA-Z0-9]+))$

# Regular expression which should only match correct module level names
const-rgx=(([A-Z_][A-Z0-9_]*)|(__.*__))$

# Regular expression which should only match correct class names
class-rgx=[A-Z_][a-zA-Z0-9]+$

# Regular expression which should only match correct function names
function-rgx=[a-z_][a-z0-9_]{2,30}$

# Regular expression which should only match correct method names
method-rgx=[a-z_][a-z0-9_]{2,30}$

# Regular expression which should only match correct instance attribute names
attr-rgx=[a-z_][a-z0-9_]{2,30}$

# Regular expression which should only match correct argument names
argument-rgx=[a-z_][a-z0-9_]{2,30}$

# Regular expression which should only match correct variable names
variable-rgx=[a-z_][a-z0-9_]{2,30}$

# Regular expression which should only match correct list comprehension /
# generator expression variable names
inlinevar-rgx=[A-Za-z_][A-Za-z0-9_]*$

# Good variable names which should always be accepted, separated by a comma
good-names=i,j,k,ex,Run,_

# Bad variable names which should always be refused, separated by a comma
bad-names=foo,bar,baz,toto,tutu,tata

# Regular expression which should only match functions or classes name which do
# not require a docstring
no-docstring-rgx=__.*__

[FORMAT]

# Maximum number of characters on a single line.
max-line-length=80

# Maximum number of lines in a module
max-module-lines=1000

# String used as indentation unit. This is usually " " (4 spaces) or "\t" (1
# tab).
indent-string='    '

[MISCELLANEOUS]

# List of note tags to take in consideration, separated by a comma.
notes=FIXME,XXX,TODO

[SIMILARITIES]

# Minimum lines number of a similarity.
min-similarity-lines=4

# Ignore comments when computing similarities.
ignore-comments=yes

# Ignore docstrings when computing similarities.
ignore-docstrings=yes

[TYPECHECK]

# Tells whether missing members accessed in mixin class should be ignored. A
# mixin class is detected if its name ends with "mixin" (case insensitive).
ignore-mixin-members=yes

# List of classes names for which member attributes should not be checked
# (useful for classes with attributes dynamically set).
ignored-classes=SQLObject

# When zope mode is activated, add a predefined set of Zope acquired attributes
# to generated-members.
zope=no

# List of members which are set dynamically and missed by pylint inference
# system, and so shouldn't trigger E0201 when accessed. Python regular
# expressions are accepted.
generated-members=REQUEST,acl_users,aq_parent

[VARIABLES]

# Tells whether we should check for unused import in __init__ files.
init-import=no

# A regular expression matching the beginning of the name of dummy variables
# (i.e. not used).
dummy-variables-rgx=_|dummy

# List of additional names supposed to be defined in builtins. Remember that
# you should avoid to define new builtins when possible.
additional-builtins=

[CLASSES]

# List of interface methods to ignore, separated by a comma. This is used for
# instance to not check methods defines in Zope's Interface base class.
ignore-iface-methods=isImplementedBy,deferred,extends,names,namesAndDescriptions,queryDescriptionFor,getBases,getDescriptionFor,getDoc,getName,getTaggedValue,getTaggedValueTags,isEqualOrExtendedBy,setTaggedValue,isImplementedByInstancesOf,adaptWith,is_implemented_by

# List of method names used to declare (i.e. assign) instance attributes.
defining-attr-methods=__init__,__new__,setUp

# List of valid names for the first argument in a class method.
valid-classmethod-first-arg=cls

[DESIGN]

# Maximum number of arguments for function / method
max-args=5

# Argument names that match this expression will be ignored. Default to name
# with leading underscore
ignored-argument-names=_.*

# Maximum number of locals for function / method body
max-locals=15

# Maximum number of return / yield for function / method body
max-returns=6

# Maximum number of branch for function / method body
max-branchs=12

# Maximum number of statements in function / method body
max-statements=50

# Maximum number of parents for a class (see R0901).
max-parents=7

# Maximum number of attributes for a class (see R0902).
max-attributes=7

# Minimum number of public methods for a class (see R0903).
min-public-methods=2

# Maximum number of public methods for a class (see R0904).
max-public-methods=20

[IMPORTS]

# Deprecated modules which should not be used, separated by a comma
deprecated-modules=regsub,string,TERMIOS,Bastion,rexec

# Create a graph of every (i.e. internal and external) dependencies in the
# given file (report RP0402 must not be disabled)
import-graph=~/gr.dot

# Create a graph of external dependencies in the given file (report RP0402 must
# not be disabled)
ext-import-graph=~/egr.dot

# Create a graph of internal dependencies in the given file (report RP0402 must
# not be disabled)
int-import-graph=~/igr.dot

[EXCEPTIONS]

# Exceptions that will emit a warning when being caught. Defaults to
# "Exception"
overgeneral-exceptions=Exception 
```

我已经在项目、单个 python 文件上运行它，更改了 import-graph 文件路径参数，将参数放在引号中，但我仍然看不出它为什么不生成图形。

我在 mac os 10.6.8 上运行 pylint 0.25.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-02T15:50:57.287

我不知道为什么它在原始问题中失败了，但这可能仍然有用：

您需要（全局）启用报告，即提供`-ry`/`--reports=y`命令行标志，请参阅[https://github.com/PyCQA/pylint/issues/1278](https://github.com/PyCQA/pylint/issues/1278)。

您还需要启用特定报告 RP0402。您还需要相关的检查器，`imports`.

这最终对我有用：

```
pylint -ry --disable=all --enable=imports,RP0402 --import-graph=imports_all.gv --ext-import-graph=imports_ext.gv --int-import-graph=imports_int.gv my_src_folder 
```

它创建 3 个给定文件（使用 .gv 扩展名不依赖`dot`于路径上的可执行文件）

# javascript - 全局参考 b/t 模板和视图

> ID：12055038
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:39.180
> 
> 标签：javascript, backbone.js, coffeescript, underscore.js, marionette

在处理绑定到单个 dom 元素的特定事件时，我希望有一种方法能够清楚地表明有问题的元素具有事件......而不需要查看 javascript（以及删除双重引用）。

例如，让我们以这个简单的模板为例：

```
<script type="text/template" id="template-page">
   <button id="do-something">click me</button>
</script> 
```

我可以使用一个没有被任何有问题的模板解析器使用的符号（在我的情况下，我正在使用 Play！，所以`@`已经过时了），并让开发人员清楚该按钮绑定到一个事件（我实际上不确定这是否有效，但你明白了要点）：

```
<script type="text/template" id="template-page">
   <button id="~do-something">click me</button>
</script> 
```

虽然使用`~`来表示绑定到事件的元素是可行的，但它*仍然*在应用程序中被引用两次——一次在上面的模板中，一次在视图中：

```
class window.Page extends Backbone.Marionette.Layout

  template: '#template-page'

  events:
    'click button#~do-something': 'doSomething' 
```

有一个更好的方法吗？事情很容易出错，并且在不了解后果的情况下意外更改 html（尤其是在命名模式演变等情况下）。我可以想到一种方法，但有点麻烦。

也许在视图中指定一个变量会很酷。

```
class window.Page extends Backbone.Marionette.Layout

  template: '#template-page'

  @doSomethingButton: 'button#do-something'

  events:
    'click #{doSomethingButton}: 'doSomething' 
```

不过，我似乎无法将此信息获取到模板中。我看到了类似的东西：[如何将其他变量传递给下划线模板](https://stackoverflow.com/questions/8809817/how-to-pass-additional-variables-in-to-underscores-templates)，但没有骰子。理想情况下，它看起来像这样：

```
<script type="text/template" id="template-page">
   <button id="<%= Page.doSomethingButton %>">click me</button>
</script> 
```

然后我就会有我想要的知名度！这是我一直在尝试的：http: [//jsfiddle.net/franklovecchio/FkNwG/248/](http://jsfiddle.net/franklovecchio/FkNwG/248/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:34:35.377

这（来自你的小提琴）：

```
@doSomethingButton: 'button#do-something'
events:
  'click #{@doSomethingButton}': 'doSomething' 
```

由于各种原因不起作用：

1.  插值在单引号字符串中不起作用。
2.  您不能在对象键中使用任意表达式，因此切换到`"click #{...}"`将无济于事。
3.  您正在尝试将其`button#do-something`用作事件规范和`id`属性 ( `id="<%= Page.doSomethingButton %>"`)，这没有任何意义。

您可以修复`doSomethingButton`为只是一个并在第一次创建实例时`id`创建您的类的事件：`Page`

```
@doSomethingButton: 'do-something'
initialize: ->
   if(!@constructor::events)
     key = "click button##{Page.doSomethingButton}"
     @constructor::events = { }
     @constructor::events[key] = 'doSomething' 
```

演示：http: [//jsfiddle.net/ambiguous/Zzv34/](http://jsfiddle.net/ambiguous/Zzv34/)

这行得通，但我看不出它有什么帮助，你只是添加了更多的层和混乱的东西。

我不明白你为什么不使用数据属性：

```
<script type="text/template" id="template-page">
   <button id="do-something" data-is-bound="yes">click me</button>
</script> 
```

然后，如果有人在弄乱模板并看到`date-is-bound="yes"`，他们就会知道其他东西关心`id`该按钮的 ，因此他们将不得不传播任何更改。

您可以将一组显式事件传递给，[`delegateEvents`](http://backbonejs.org/#View-delegateEvents)以便您可以遍历模板的 DOM 并解释`id`属性以构建事件。您可以查找`id`带有`do-`前缀的 s，然后将后缀映射到处理程序名称：

```
events = { }
@$('[id^=do-]').each (i, el) ->
  events["click ##{el.id}"] = el.id.match(/(?:do-)(.*)/)[1]
@delegateEvents(events) 
```

但是现在你在两个地方都有方法名称，所以你仍然卡住了，但至少你会得到一个错误而不是无声的混乱。

# c# - 使用 C# 在 MSWord 中插入图像和文本

> ID：12055039
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:38.950
> 
> 标签：c#, visual-studio, ms-word

好吧，我正在 C# 中尝试 Word 自动化。现在我正在尝试在 Word 中插入图片以及右侧的文本。但是我无法这样做，因为当我添加图片时，光标会移动到下方的下一个位置图片。到现在我的代码如下

```
 Word._Application oWord;
        Word._Document oDoc;

        oWord = new Word.Application();
oDoc = oWord.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing); //Add Blank sheet to Word App
        oWord.Visible = true;

      //I have Copied Image 
   oWord.Selection.Paste();
    //I want these text to be added to the right of the image however they appear on the next line
   oWord.Selection.TypeText("A");
   oWord.Selection.TypeText("B");
   oWord.Selection.TypeText("C");
   oWord.Selection.TypeText("D"); 
```

我尝试使用表格方法我尝试插入一个带有一行和两个 COolumns 的表格。第一行将保存图片，另一行可以存储文本

```
oDoc.Tables.Add(NewRange, 1, 2, ref defaultTableBehavior, ref autoFitBehavior);
         Word.Table tbl = oDoc.Tables[1];
         oWord.Selection.PasteAndFormat(WdRecoveryType.wdChart);

         tbl.Cell(1, 2).Range.Text="A".PadLeft(10,' ').PadRight(50,' ')+"1.38"
             + Environment.NewLine + "B".PadRight(50,' ')+"1.90"
             + Environment.NewLine + "C".PadRight(55,' ')+"-0.70"
             + Environment.NewLine + "D".PadRight(55,' ')+"0.50"; 
```

但是，这是一项非常艰巨的任务。我的数据可能包含巨大的值，如果这样做，这种方法可能会很麻烦，如果有人可以为我提供更简单的方法，我将不胜感激

# javascript - Gmaps4rails：通过 AJAX 添加标记后启用集群的正确方法是什么？

> ID：12055042
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:43.997
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, gmaps4rails

我试图从文档中搜索答案，但找不到..

当我通过 AJAX 在地图上添加标记时，如何在 Gmaps4rails 中启用集群。我的观点是这样的：

```
<%= gmaps( map_options: { zoom: 15, auto_adjust: false } ) %> 
```

在我的javascript中，我添加了这样的标记：

```
 $.getJSON(path, { lat: lat, lng: lng, user_lat: user_lat, user_lng: user_lng }, function(markers_json) {
        Gmaps.map.replaceMarkers(markers_json); 
     }); 
```

我只想将 do_clustering 选项设置为 true，但因为我在 map gmaps() 调用中没有标记 json，所以我也无法添加标记选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:48:21.033

直接告诉`gmaps4rails`：

```
Gmaps.map.markers_conf.do_clustering = true; 
```

并包括这个脚本：

```
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/src/markerclusterer_packed.js"></script> 
```

# c++ - 如何通过使用for循环c ++放入另一个向量来组织一个向量

> ID：12055044
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:52.710
> 
> 标签：c++, sorting, vector, organizer

我想知道如何通过将一个向量放入另一个向量中来组织它。（注意：它们是对象的向量）。到目前为止我所拥有的是：

```
double done;
for ( int i = 0; i < id; i++ )
{
    done = guy[i].done();
    int smallest = i;
    for( int j = i + 1; j < id; j++ ){
        if( done > guy[j].done() )
            {
                done = guy[j].done();
                smallest = j;   
            }
        }
    newGuy.push_back( guy[smallest] );
} 
```

这不会组织向量的每个部分，有时甚至会将同一个人复制到 newGuy 中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:43:52.343

如果您尝试对向量进行排序，您可以为您的对象定义一个自定义的小于比较器，并使用[std::sort](http://en.cppreference.com/w/cpp/algorithm/sort)。

```
bool myComparison(const MyType& lhs, const MyType& rhs) {
  return lhs.done() < rhs.done();
}

std::vector<MyType> guy = ....;
std::sort(guy.begin(), guy.end(), myComparison); 
```

如果您希望所有内容都转到一个新向量，则只需复制原始向量，然后对副本进行排序：

```
std::vector<MyType> newGuy = guy;
std::sort(newGuy.begin(), newGuy.end(), myComparison); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:49:04.390

因为当您将最小的人放入新数组时，您并没有从旧数组中删除它。考虑价值观`[5,4,3,2,1]`

您的算法将在第一个值上`i`找到最小的值`j=4 (value 1)`并将 1 推到新数组上，然后它将执行此操作`i=2`，依此类推，直到您只有`[1,1,1,1,1]`

这是您正在做的事情，其中​​粗体数字是被循环的数字，第二个数组是输出数组。

通过 1：
[ **5** , **4** , **3** , **2** , **1** ]
[1]

传球 2：
[5, **4** , **3** , **2** , **1** ]
[1,1]

传球 3：
[5, 4, **3** , **2** , **1** ]
[1,1,1]

传球 4：
[5, 4, 3, **2** , **1** ]
[1,1,1,1]

传球 5：
[ 5,4,3,2,1 ] [ **1,1,1,1,1**
]

每次将它添加到新向量时，只需从旧向量中删除您刚刚发现的最小的项目。当然，正如其他人指出的那样，实际上只使用 std 的排序算法会更好

# c# - Oracle 中的 NHibernate 分页 - 使用 rownum

> ID：12055045
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:39:56.843
> 
> 标签：c#, oracle, nhibernate, paging

我正在尝试在 Oracle DB 上的 NHibernate 中进行分页。但是，即使在 NHibernate 3.3 中，SetFirstResult 和 SetMaxResults 也不起作用（它不可预测并且经常返回零结果）。

我现在尝试在查询中使用“rownum”来做同样的事情。我试过这个：

```
 finalCriteria
  .Add(Restrictions.Between(Projections.SqlProjection("rownum", new string[] { "RowNumber" }, new IType[] { NHibernateUtil.Int64 }), rowIndex, rowIndex + pageSize)); 
```

但是它不起作用（ORA-00936：找不到表达式）

有什么建议么？

这是我徒劳地使用的方法之一，SetFirst & SetMax

```
finalCriteria.SetFirstResults(pageIndex* pageSize).SetMaxResults(pageSize) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:50:34.750

不知道为什么它对您不起作用，但我们在 Oracle 11 上成功使用了 SetFirstResult 和 SetMaxResult。这是我们的代码，与您的代码非常相似：

```
criteria.SetFirstResult(pageSize * Offset);
criteria.SetMaxResults(pageSize); 
```

我从来没有注意到任何问题。你检查过hibernate创建的sql语句吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:41:46.763

几年来，我一直在使用 Oracle 和 NHibernate，除了一些极端情况外，从来没有遇到过分页问题。SetFirstResult 和 SetMaxResults 有效。您可以使用 NHibernate Profiler [http://www.nhprof.org](http://www.nhprof.org)查看实际创建的 sql。这可能会帮助你

# javascript - 如何禁用 s:select 动态

> ID：12055046
> 
> 赞同：1
> 
> 时间：2012-08-21T12:39:56.480
> 
> 标签：javascript, struts2

当我尝试动态禁用时，它没有被禁用..

```
document.getElementById('selectId').disabled=true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:06:03.050

`document.getElementById('selectId').disabled=true.`应该：
`document.getElementById('selectId').disabled=true;`

* * *

由于我的第一个答案中的错误，一些额外的信息：

disabled 属性可以接受任何值。
只要此属性存在，该元素将被禁用，无论其值如何。

```
<input type="text" value="This is disabled" disabled>
<input type="text" value="This is disabled" disabled="disabled">
<input type="text" value="This is disabled" disabled="true">
<input type="text" value="This is disabled" disabled="false">

<input type="text" value="This is not disabled"> 
```

尽管在脚本中，它是不同的。

```
document.formname.elementname.disabled = true; //disabled
document.formname.elementname.disabled = false; //enabled 
```

这些属性也是如此：
选中（单选按钮和复选框）
选中（选项）
nowrap（td）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:35:32.647

如struts[文档](http://struts.apache.org/2.0.11/docs/select.html)中所述，选择元素的“禁用”属性属于“字符串”类型，我至少会尝试将 .disable="disabled;" 在您的代码中，看看是否有效。

我发现的另一个解决 Struts 与 HTML 问题的方法是[在这里](http://www.coderanch.com/t/504166/Struts/Showing-Hiding-div-tag-Struts)。解决方案是使用元素标签中的属性`theme='simple'`（在这种情况下，您的标签或它的容器之一）。这让 HTML 的功能超过了 Struts 尝试在显示方面执行的功能。我建议这个答案，因为您可能遇到了幕后问题，即 Struts 不喜欢您尝试使用的 HTML“禁用”属性并且它无法正常触发。所以尝试添加 theme='simple' （或其他一些主题），看看是否有任何变化。

# vb.net-2010 - 请求“System.Net.WebPermission”类型的权限，失败

> ID：12055048
> 
> 赞同：0
> 
> 时间：2012-08-21T12:39:58.913
> 
> 标签：vb.net-2010, system.net.webexception

编辑已修复！：我觉得很傻；因此，经过几天的调查和调试，答案是/是网站设置相同，除了一个我从未想过要看的地方；实时站点上的目录是使用管理共享而不是服务器上的本地物理路径无意中创建的。在实时站点上切换路径后，API 将按预期与其余代码一起工作。

原始问题：

我有两个网站托管在同一个应用程序池中的同一台服务器上。网站 1 是我的测试平台。我有一个试图调用第 3 部分函数的小类，该函数基本上等同于验证给定用户是否存在于第 3 方的允许用户中。如果是，则返回 true，否则返回 false。如果返回为真，它将重定向到该第三方，否则用户对第三方一无所知。

在我的开发站点上，我的代码 100% 没有错误地工作，在任何一种情况下我都能得到预期的结果。它一直在这里工作，从来没有问题。但是，当我将其移动到实时站点时，我会收到***Request for the permission of type 'System.Net.WebPermission, Failed***。经过广泛的谷歌搜索后，我仍然感到困惑，已经好几天了。这就是我如此困惑的原因：

1.  运行现场和开发站点的服务器和帐户是相同的。
2.  他们的应用程序池是同一个
3.  代码是 100% 相同的。
4.  web.configs 是相同的。

也许其中最令人费解的部分是我在 vb.net 中使用了母版页系统。该代码实际上在母版页的 page_load 事件中执行。开发站点运行没有问题，但是一旦您尝试加载页面，代码就会引发异常。最奇怪的部分是，如果我从母版页 page_load 中取出代码并创建一个新的空白页面，除了这个调用和调用它的 page_load 代码之外什么都没有，它就可以工作。

我已经如此彻底地检查了这个母版页，我不敢相信它在 dev 上工作但不能在现场工作，昨天当我对新页面和相同代码的实验在现场网站上工作时，我完全吃了一惊。

到目前为止，我尝试解决此问题的方法是：

1.  在 AppPool 中加载用户配置文件 = true
2.  直接比较代码以确保它是 1:1
3.  已验证运行此帐户的权限
4.  重新启动的网络服务器
5.  通过 web/config 设置完全信任

我不知所措。下面是代码 - 它是如此简单，但这个问题仍然存在。我无法弄清楚为什么它可以在实时站点上运行，而不是在我需要的特定页面上运行。这是各自的代码：

```
Sub page_load()      
    If Not Page.IsPostBack Then
        Dim SFUser As New StorefrontUser
        'Response.Write(SFUser.GetadminticketValue)
        If SFUser.isActiveStorefrontUser = 1 Then
            LBCELink.Style.Add("visibility", "visible")
        Else
            LBCELink.Style.Add("visibility", "hidden")
        End If
    End If
End Sub 
```

这是它调用的类/函数： Public Class StorefrontUser Dim storefront As New SXI.StorefrontAPIHelper("http://subdomain.blah.com/3rdpartyAPI.asmx")

```
Function isActiveStorefrontUser() As String
    If GetAdminTicket() <> "UNAUTHORIZED ACCESS" Then
        Return storefront.GetValue("UserProperty", "IsActive", storefront.FindUserID(theID))
    Else
        Return "1"
    End If

End Function
Function GetadminticketValue() As String
        Return GetAdminTicket()

End Function
Public Function GetAdminTicket() As String
    Dim ScratchTicket As String = String.Empty
    Try
        ScratchTicket = storefront.ObtainUserTicket("user", "password", "Identity")
    Catch ex As Exception
        HttpContext.Current.Response.Write(ex.ToString)
        ScratchTicket = String.Empty
    End Try
    Return ScratchTicket
End Function

End Class 
```

如果它不是它需要的母版页的一部分，则可以在 Live 站点上正常工作，在任何地方的开发站点上都可以正常工作。完全被难住了。如果我的格式很差或者我的问题不够清晰，我们深表歉意；第一次来电，长期聆听。

最后一条重要信息是，使用他们的 API 需要引用第 3 方的 dll - 这似乎是一个有效的争论点，除了它适用于我创建的空白页面，只是不适用于这个母版页与开发站点的母版页相同。

提前感谢您提供的任何信息。

# html - 带有accept属性的html文件上传表单

> ID：12055050
> 
> 赞同：0
> 
> 时间：2012-08-21T12:40:03.390
> 
> 标签：html, forms

我有一个带有上传字段的html表单，我试图通过使用accept属性来限制用户仅上传PDF文件，这似乎在crome中有效，但在firefox中无效，但w3c表示它也支持firefox。我需要它来支持Firefox，这可能吗？

```
 <input type="file" placeholder="Upload file"  name="file" id="file" accept="application/pdf" class="required" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:52:49.703

在[w3schools](http://www.w3schools.com/TAGS/att_input_accept.asp)中，一些主要浏览器不正确支持“接受”属性。原因是文件浏览器对话框中的过滤器不起作用。所以你必须检查一些条件，比如给定文件类型是否正确。它可以用于检查 JavaScript 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:43:11.230

查看此问题的答案：[文件输入“接受”属性 - 有用吗？](https://stackoverflow.com/questions/181214/file-input-accept-attribute-is-it-useful)

最好不要使用，或者至少依赖accept属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T22:20:07.070

尝试`accept=".pdf"`

```
<input type="file" name="file" id="file" accept=".pdf" class="required" /> 
```

演示：http: [//jsfiddle.net/dirtyd77/ZCDUe/](http://jsfiddle.net/dirtyd77/ZCDUe/)

# android - 可以使用带有 sup 的 OData SDK 从 wcf 数据服务中检索数据吗？

> ID：12055052
> 
> 赞同：0
> 
> 时间：2012-08-21T12:40:10.977
> 
> 标签：android, sybase, odata, sup

是否可以使用`OData SDK`with`Sybase Unwired Platform`开发连接到非`SAP EIS`系统的原生 Android 应用程序，例如`WCF Data Service`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:56:11.917

鉴于 OData 是一个标准，您会认为您的假设是合理的。我不能代表其他 SDK，但我可以说 WCF 数据服务客户端将很好地使用许多不同风格的 OData。

在大多数情况下，我们的客户都遵守标准；如果不是，通常是由于我们发现某些提供商偏离了标准，因此在这种情况下我们会考虑放宽我们的客户。例如，我们会将“True”或“False”解析为有效的布尔值，即使规范规定该值必须为“true”或“1”或“false”或“0”。

我知道许多为 Android 编写 OData 客户端的人使用[OData4J](http://code.google.com/p/odata4j/) - 如果您遇到 Sybase OData SDK 问题，您应该考虑尝试一下。

# core-audio - 如何实现音频单元的暂停功能

> ID：12055058
> 
> 赞同：2
> 
> 时间：2012-08-21T12:40:41.587
> 
> 标签：core-audio, audiounit, audio-player

我的代码基于[此示例](http://cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)，并且已经实现了停止功能，有一些功能可以取消初始化和停止音频单元：

```
 AudioOutputUnitStop(toneUnit);
    AudioUnitUninitialize(toneUnit);
    AudioComponentInstanceDispose(toneUnit);
    toneUnit = nil; 
```

在示例中，我不需要链接到暂停功能，因为只有一个频率正在播放，因此暂停和停止之间没有区别。然而，在我的实现中，我正在播放一系列不同的频率，并且我希望能够暂停播放。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:53:17.313

*   淡出 (~10ms) AU 的输出，在淡出后输入输出静音
*   记住你停止读取输入信号的位置
*   在恢复之前重置 AU
*   从您上面记录的位置恢复（这里，输入信号到 AU 的淡入也很好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:01:11.387

您可以在播放时尝试将 0 写入缓冲区。这实际上是一个暂停。下面是一些您可以在播放回调中使用的代码。

```
 NSLog(@"Playing silence!");

   for (int i = 0 ; i < ioData->mNumberBuffers; i++){
    //get the buffer to be filled
    AudioBuffer buffer = ioData->mBuffers[i];
    UInt32 *frameBuffer = buffer.mData;

    //loop through the buffer and fill the frames
       for (int j = 0; j < inNumberFrames; j++){
           frameBuffer[j] = 0;
       }
   } 
```

# database - 如何确定数据库是否已针对 Access、SQL、Oracle 或文件系统进行了更改

> ID：12055061
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:40:45.683
> 
> 标签：database, visual-studio-2010, automation

在我为所有应用程序从该数据库中提取信息工作的公司中，我决定写一个详细的答案来回答不同的数据库如何让用户知道它们已被更改。我将回答以下类型：

*   使用权
*   SQL
*   甲骨文
*   文件系统（文件和文件夹）

我为什么要这样做？......我工作的公司有许多不同的数据库和使用这些数据库的应用程序。然而，应用程序花费大量时间在数据库中检查数据是否已更改。我已编写此列表以显示某些数据库/文件如何使用不同的工具让应用程序知道它已被更改。所以可以触发一个事件。这有望降低计算能力并加速应用程序。

请按您认为合适的方式进行编辑。如果您需要任何其他信息，请发表评论。我仍在添加 Oracle 数据库解决方案并编辑 Access 和 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:49:15.873

# **访问和文件系统/文件**

对于接入点，我使用了 SystemFileWatcher。这会密切关注数据库，如果它已被修改，它将运行代码以从数据库中获取新数据。这意味着应用程序不会不断地进入数据库并在不需要时获取新数据。

FileSystemWatcher 可以根据名称更改、移动或修改等事件运行不同的代码。我只需要使用修改后的。我从我正在使用的 XML 文件中获得了数据库路径，这意味着它不是硬编码的，可以从 xml 文件中更改，并且观察者将在其他地方观察。

```
Protected Overrides Sub OnStart(ByVal args() As String)     
    Dim g1 As New FileSystemWatcher()
    g1.Path = GetSingleNode(XmlFileName, "data/G1Path")

    g1.NotifyFilter = (NotifyFilters.LastAccess Or NotifyFilters.LastWrite Or NotifyFilters.FileName Or NotifyFilters.DirectoryName)

    g1.Filter = GetSingleNode(XmlFileName, "data/G1Filter")
    AddHandler g1.Changed, AddressOf OnChanged

    g1.EnableRaisingEvents = True

    Dim g2 As New FileSystemWatcher()
    g2.Path = GetSingleNode(XmlFileName, "data/G2Path")

    g2.NotifyFilter = (NotifyFilters.LastAccess Or NotifyFilters.LastWrite Or NotifyFilters.FileName Or NotifyFilters.DirectoryName)
    g2.Filter = GetSingleNode(XmlFileName, "data/G2Filter")

    AddHandler g2.Changed, AddressOf OnChanged
    g2.EnableRaisingEvents = True

End Sub

Protected Overrides Sub OnStop()

End Sub

Public Shared Function GetSingleNode(ByVal xmlPath As String, ByVal nodeLocation As String) As String
    Try
        Dim xpathDoc As New XPathDocument(xmlPath) 'gets the nodes from the XML file ready to be put in to the network path/variables
        Dim xmlNav As XPathNavigator = xpathDoc.CreateNavigator()

        Return xmlNav.SelectSingleNode(nodeLocation).Value

    Catch ex As Exception
        Throw

    End Try
End Function 
```

在此之后，我只是有一个 on changed 功能。希望这可以帮助任何需要它的人。

## 文件系统/文件

对于文件路径和系统路径，上面的代码非常相似，只是使用不同的路径和过滤器来获取文件的某些类型或名称。如果这些已更改/修改，这将运行代码。如果有人想要此代码，请写评论，我可以提供一些。

# SQL 数据库

在 SQL 数据库中，有多种方法可以检查数据是否已更改。我将参考一些 MSDN 页面以及另一个问题来为这些页面提供信息。但是我使用的方式略有不同，因为我没有运行服务代理，也没有在我的 SQL 数据库上启用队列。

[有没有类似 Sql Server 表的 FileSystemWatcher 的东西？](https://stackoverflow.com/questions/1311924/is-there-something-like-the-filesystemwatcher-for-sql-server-tables)

[http://msdn.microsoft.com/en-us/library/62xk7953.aspx#Y342](http://msdn.microsoft.com/en-us/library/62xk7953.aspx#Y342)

但是，我使用的方法是使用校验和和计时器并在循环中检查校验和以查看数据库是否已更改。因为如果数据发生变化，“哈希”总是会发生变化：

[http://sqlserverplanet.com/design/how-to-detect-table-changes](http://sqlserverplanet.com/design/how-to-detect-table-changes)

[http://www.mssqltips.com/sqlservertip/1023/checksum-functions-in-sql-server-2005/](http://www.mssqltips.com/sqlservertip/1023/checksum-functions-in-sql-server-2005/)

我的代码：

'在 main 中获取第一个校验和值，以便在以后进行比较。这些是全局变量

```
Dim newdata As DataTable = SQLMethods.ExecuteReader(ConnectionString1, "SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM Alarms")
checksum = newdata.Rows(0).Item(0)

    Timer1.Start()

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Timer1.Stop()
    Dim newdata As DataTable = SQLMethods.ExecuteReader(ConnectionString1, "SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM Alarms")
    checksumNew = newdata.Rows(0).Item(0)

    If checksum <> checksumNew Then
        MsgBox("Hello")

        checksum = checksumNew
    End If
    Timer1.Start()
End Sub 
```

如您所见，它们是否匹配，校验和已更改为匹配，因此下次发生时它们将相同，除非确实更改了数据库。我已经停止然后重新开始时间以避免混淆消息框，但是消息框用于调试目的，因为可以在此处触发事件或者如果数据库发生更改则希望发生什么代码。

# 甲骨文

经过研究，我无法在我自己的应用程序中实现这个解决方案，但希望它能为其他用户提供信息。在 Oracle 中有一个叫做 OracleDependencyClass 的东西，如果所选数据已被修改，它会向应用程序提供通知。我将提供一些超链接，其中包含一些示例以及如何使用这些示例的基础知识，希望有人不需要反映我自己的研究。

[使用数据库更改通知开发应用程序](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_dcn.htm/ "使用数据库更改通知开发应用程序")

[Oracle依赖类](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDependencyClass.htm#BBABBDEF "Oracle依赖类")

[Oracle® Data Provider for .NET 开发人员指南 - OracleDependency Class(2)](http://oracledocs.shu.ac.uk/oracle/B28359_01/win.111/b28375/OracleDependencyClass.htm "另一个解释类的页面")

[在 C# 和 VB.NET 中使用类的示例](http://www.devart.com/dotconnect/oracle/docs/Devart.Data.Oracle~Devart.Data.Oracle.OracleDependency.html "例子")

如果这些页面没有帮助，那么如果您搜索“oracle dependency”、“OracleDependency Class”和“Database Change Notification”，您可以访问许多其他网页。

# asp.net - DotNetOpenAuth 和 Quickbooks

> ID：12055068
> 
> 赞同：0
> 
> 时间：2012-08-21T12:41:16.860
> 
> 标签：asp.net, dotnetopenauth, quickbooks

我需要开发一个从 Quickbooks 导入数据的 .NET 3.5 应用程序，我决定使用 DNOA 对它们进行 OAuthorize。我下载了最新的可用版本（4.1.something），环顾四周，然后按照 GoogleConsumer 的示例创建了一个 QuickBooksConsumer。但是，有一个问题我似乎无法解决。

QuickBooks REST 服务的 url 如下所示：

```
https://services.intuit.com/sb/{0}/v2/{1} 
```

在哪里：

`{0}`是要获取记录的对象的名称（例如“发票”或“付款”）；

`{1}`是`realmId`，即需要数据的公司的 id

问题是我看不到如何`PrepareAuthorizedRequest`处理这些变量 url。该函数不是虚拟的，所以我不能在我的`QuickBooksConsumer.cs`. 我被困住了。你能告诉我怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:43:56.177

授权对动态创建的 URL 的请求应该完全没有问题。只需将任何 URL 包装在 a 中`MessageReceivingEndpoint`并发送它`ConsumerBase.PrepareAuthorizedRequest`，您就可以开始了。

# jquery - JQuery UI自动完成功能修改文本框

> ID：12055071
> 
> 赞同：0
> 
> 时间：2012-08-21T12:41:26.323
> 
> 标签：jquery, jquery-ui, autocomplete

我有一个带有自动完成功能的文本框：

```
 $( "#mytextbox" ).autocomplete({
            source: bigData,

            select: function(event, ui) {

            $("#mytextbox").val(set this value here);

            }
   }); 
```

As you can see, when an option is selected I want the textbox to actually change the value! 我知道这听起来很疯狂和愚蠢，但是自动完成选项给出了一个详细列表，其中包含每个选项的大量信息，但我不希望输入所有数据，我只需要一小部分数据。例如，如果是城市，它可能有：

> 美国伯明翰邮政编码...
> 
> 英国伯明翰邮政编码...
> 
> 伯明翰，其他地方，...

我希望能够选择正确的“伯明翰”，但我不想输入所有其他信息。那我选择哪一个有什么不同呢？其他信息在不同的框中输入，因此正确的城市很重要。

那么如何修改函数内自动完成功能的分配文本框呢？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:12:04.363

根据 jquery-ui 文档，该`ui`对象包含一个`item`对象，该对象是从自动完成下拉列表中选择的项目。因此，如果您的项目以您描述的方式列出，即`Birmingham, UK, 15780`您可以简单地用逗号分割字符串并仅使用第一部分替换文本框值。

```
$( "#mytextbox" ).autocomplete({
        source: bigData,

        select: function(event, ui) {
          // not sure if ui.item is the text value itself
          // or an HTML item, gotta check that. I'm assuming a string here.
          var str = ui.item.split(",")[0];

          $("#mytextbox").val(str);
        }
}); 
```

当然，您可以通过修剪空白等来扩展它。这取决于您获取数据的方式......

# jquery - 试图让 jquery 图像缩放插件工作

> ID：12055074
> 
> 赞同：0
> 
> 时间：2012-08-21T12:41:28.420
> 
> 标签：jquery, image, zooming

这是我正在尝试使用的插件 [http://andreaslagerkvist.com/jquery/image-zoom/](http://andreaslagerkvist.com/jquery/image-zoom/)

无论我做什么，当我单击 a 标签时，什么都没有发生，我也没有收到任何错误......这是我为测试目的而创建的 html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="jquery.imageZoom.css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="jquery.imageZoom.js"></script>
<script type="text/javascript">
$("div.jquery-image-zoom").imageZoom();
</script>
</head>
<body>
<div id="jquery-image-zoom">
<ul>
<li><a href="http://exscale.se/__files/3d/bloodcells.jpg">Bloodcells</a></li>
<li><a href="http://exscale.se/__files/3d/x-wing.jpg">X-Wing</a></li>
<li><a href="http://exscale.se/__files/3d/weve-moved.jpg">We've moved</a></li>
</ul>
<ul>
<li><a href="http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01.jpg">
<img src="http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01_small.jpg" alt="Lamp and Mates" /></a></li>
<li><a href="http://exscale.se/__files/3d/stugan-winter.jpg">
<img src="http://exscale.se/__files/3d/stugan-winter_small.jpg" alt="The Cottage - Winter      time" /></a></li>
<li><a href="http://exscale.se/__files/3d/ps2.jpg">
<img src="http://exscale.se/__files/3d/ps2_small.jpg" alt="PS2" /></a></li>
</ul>
</div>
</body>
</html> 
```

有没有机会有人可以尝试在网上获得一份工作副本，这样我就可以与自己的进行比较，最终意识到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:44:25.360

我注意到的第一件事是您使用了 ID 标签，但没有选择 ID。您选择了一个班级。另外，我你可能想在`document`is时这样做`ready`。

正确的选择器：

```
$('document').ready( function() {
    $("div#jquery-image-zoom").imageZoom();
}); 
```

# sql-server - 如何从 SQL Server Management Studio 批量修改数据库

> ID：12055075
> 
> 赞同：0
> 
> 时间：2012-08-21T12:41:29.520
> 
> 标签：sql-server, ssms

我正在努力弄清楚如何在 SQL Server Management Studio 中批量修改我们的数据库。我们将执行我们需要在所有环境中执行的操作，例如编辑列、创建表、重命名表等 - 但直到我们准备好推送应用程序。我正在尝试使用 SQL 分析器来获取 SQL，但这似乎非常低效。

应用程序中是否有内置的解决方案可以为我跟踪此类更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:45:06.053

看起来我找到了答案：[http ://www.mssqltips.com/sqlservertip/1723/auto-generate-change-scripts-in-sql-server-management-studio-ssms-for-tables/](http://www.mssqltips.com/sqlservertip/1723/auto-generate-change-scripts-in-sql-server-management-studio-ssms-for-tables/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:45:07.457

如果您使用的版本低于 SqlServer 2005，则可以使用[osql 实用程序](http://msdn.microsoft.com/en-us/library/aa214012%28v=sql.80%29.aspx)轻松创建脚本。

从 sql server 2005 开始，我们使用[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# linux - linux shell 存放路径

> ID：12055077
> 
> 赞同：1
> 
> 时间：2012-08-21T12:41:38.263
> 
> 标签：linux, bash, shell

我想找到文件夹的路径并将其存储到变量中

```
 #!/bin/bash
 howdy=$(whereis yum.repos.d)
 howdy=$howdy"/remi.repo"
 echo $howdy 
```

问题是当我想使用变量 $howdy 时，它会输出

```
 yum.repos: /etc/yum.repos.d/remi.repo 
```

我希望它只是路径

```
 /etc/yum.repos.d/remi.repo 
```

所以我可以在我的代码中使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:43:48.647

您可以擦除字符串的第一部分：

```
echo ${howdy##*: } 
```

或者你可以通过管道`cut -d' ' -f2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:44:13.893

您可以使用参数扩展：

```
${howdy#yum.repos: } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:46:24.070

您可以使用[`awk`](http://www.grymoire.com/Unix/Awk.html)格式化输出：

```
howdy=$(whereis yum.repos.d| awk '{print $2}') 
```

完整代码：

```
#!/bin/bash
howdy=$(whereis yum.repos.d| awk '{print $2}')
howdy=$howdy"/remi.repo"
echo $howdy 
```

这将输出：`/etc/yum.repos.d/remi.repo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:46:02.003

怎么样：

```
howdy=$(find /etc -type f -name remi.repo) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T12:47:33.107

`whereis yum.repos.d | awk -F: '{print $2}'`将剥离第一部分

# perl - Perl 变量在 if 语句中变为空

> ID：12055079
> 
> 赞同：0
> 
> 时间：2012-08-21T12:41:44.253
> 
> 标签：perl, variables, if-statement

这让我发疯，一旦我输入 if 语句，Perl 就会丢失变量的值......而且奇怪的是，它只是那个变量，任何其他变量都不会失去它的值

```
open (MYFILE, "b");

my $haysack = "";
while (<MYFILE>)
{
    $haysack  = $haysack . "$_";
}
close (MYFILE);

open (MYFILE2, "ip_range");
my $needles = "";
while (<MYFILE2>)
{
    $needles  = $needles . "$_";
}
close (MYFILE2);

my $someOtherValue = "blabla";

while ($needles =~ m/(.*?)\n/g)
{
    $needle = $1;

    if ($haysack =~ m/$needle/ims)
    {
        print "FOUND :  $needle\n";
        print "$someOtherValue\n";
    }
} 
```

所以代码成功地进入了 if 语句，但是一旦它完成，我得到以下输出：

```
FOUND: 
blabla 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:33:13.163

这真的应该是一个评论，因为它不是一个答案，但评论不允许代码格式化，所以：

您能否提供一个完整的、可运行的、独立的、*最小的*示例来演示该问题而无需额外的移动部件，例如读取文件？类似于以下内容：

```
#!/usr/bin/env perl

use strict;
use warnings;

my $haysack = "Foo
Bar
Baz
";

my $needles = "a
b
c
";

while ($needles =~ m/(.*?)\n/g) {
    my $needle = $1;

    if ($haysack =~ m/$needle/ims) {
        print "FOUND :  $needle\n";
    }
} 
```

...除了我的运行完美，产生输出

```
FOUND :  a
FOUND :  b 
```

而不是失败。请注意，在创建最小失败示例的过程中，您很可能会发现问题的解决方案......

至于一般故障排除建议，`use strict`如果`use warnings`您还没有这样做。在进行外部匹配后检查 的值，`$1`以验证`$needle`将获得您期望的值。

# iphone - NSFetchedResultsController 中的 NSPredicate 抛出 EXC_BAD_ACCESS

> ID：12055082
> 
> 赞同：0
> 
> 时间：2012-08-21T12:42:02.617
> 
> 标签：iphone, objective-c, ios, core-data, exc-bad-access

我有一个使用 NSFetchedResultsController 的 UITableViewController。如果我删除谓词，它可以正常工作，但是使用谓词，它会引发错误的访问（EXC_BAD_ACCESS）。我启用了 NSZombieEnabled，但没有任何结果。我正在使用ARC。我不明白！请帮忙。这是我的 fetchedresultscontroller 代码注意：将我的谓词更改为随机的简单谓词，例如“unitNumber = nil”或“unitNumber LIKE %@”，unString 仍然会导致崩溃，但是将谓词完全注释掉不会产生崩溃（但是我已经全部对象，显然没有过滤器）：

```
- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Unit" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Predicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"workTicket.appointment.scheduleRowPointer = %@", rp];
[self.fetchedResultsController.fetchRequest setPredicate:predicate];

// Sort Descriptor
NSSortDescriptor *unitNumberDescriptor = [[NSSortDescriptor alloc] initWithKey:@"unitNumber" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:unitNumberDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"addedToTicket" cacheName:nil];

return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:53:04.557

改变：

```
[self.fetchedResultsController.fetchRequest setPredicate:predicate]; 
```

至 ：

```
[fetchRequest setPredicate:predicate]; 
```

# macos - Xcode 4.4.1 上的代码覆盖率

> ID：12055085
> 
> 赞同：3
> 
> 时间：2012-08-21T12:42:09.667
> 
> 标签：macos, ios5, code-coverage, xcode4.4

我一直在尝试在 Xcode4.4.1 上对 Mac 应用程序进行代码覆盖测试，该应用程序是 10.8 应用程序，因此该应用程序只能通过 Xcode4.4.1 构建和运行。但是使用 Xcode4.4.1 时找不到 /Developer/usr/lib/libprofile_rt.dylib 库。有没有更好的工具在 Xcode4.4.1 上运行代码覆盖？

寻找一些适用于 Xcode4.4.1 上的 mac 和 iOS 应用程序的代码覆盖工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:46:31.630

在 xCode 4.4.1 中运行项目时，您**不需要**包含 *libprofile_rt.dylib* 并使用 *-profile_rt* 标志（与 iOS 模拟器一起工作就像魅力一样）只需设置这些标志：

```
Generate Test Coverage Files: YES
Instrument Program Flow: YES 
```

构建并运行。如果您运行应用程序的测试目标，*.gcda 文件会自动创建，因为测试的应用程序终止，如果运行常规目标，*.gcda 文件会在您明确终止应用程序时创建（另一种方法是设置*UIApplicationExitsOnSuspend =*在.plist 中是）

请注意，它在使用 xCode 4.4.1 创建的新项目上经过了很好的测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:36:12.100

您只需要在 Build Settings 中设置以下内容：
Generate Test Coverage Files: YES
Instrument Program Flow: YES

.gcda 文件只会在应用程序退出时输出，因此对于 iOS 构建，您应该在 Info.plist 中将 'UIApplicationExitsOnSuspend' 设置为 YES。

代码覆盖率文件将输出到 <派生数据>/Build/Intermediates/.build/<configuration>/<targetName>.build/Objects-normal/i386

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:33:45.640

似乎使用 LLVM 和 CoverStrory 的代码覆盖在 Xocde4.4.1 中被破坏了，

[https://devforums.apple.com/message/717814#717814](https://devforums.apple.com/message/717814#717814) - 苹果开发论坛中讨论此问题的链接。

# c++ - 超时后重新发出与 Libcurl 的连接

> ID：12055086
> 
> 赞同：0
> 
> 时间：2012-08-21T12:42:16.167
> 
> 标签：c++, curl, libcurl

我用 Libcurl C++ 做了一个长轮询客户端

通过以下方式将超时设置为 30 秒：

```
curl_easy_setopt(longPollingHandle, CURLOPT_TIMEOUT, 30L); 
```

操作超时后如何重新发出 HTTP get 请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:53:01.313

对于任何有兴趣的人。

我刚刚检查了 CURLcode 的状态。如果是 != 0 则重新发出请求。

```
if(res != 0)
    {
        cout << "Timeout : Repolling " << endl;
        continue;
    } 
```

continue 返回到循环的开头，我再次发出 curl_easy_perform 。

谢谢

# jsp - 使用struts从字节数组中显示jsp中的图像

> ID：12055092
> 
> 赞同：0
> 
> 时间：2012-08-21T12:42:26.283
> 
> 标签：jsp, servlets, struts

我可以将图像作为 byte[] 获取并使用 form.jsp 和 FormFile 将其存储在我的数据库中。现在我需要能够检索该 byte[] 并将其作为图像显示在 JSP 中。有没有办法创建资源并检索该图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:45:13.467

```
public ActionForward pageLoad(ActionMapping a,ActionForm b,HttpServletRequest c,HttpServletResponse d){
    b.setImageData(loadImageData());
    return a.findForward("toPage");
}

public ActionForward imageLoad(ActionMapping a,ActionForm b,HttpServletRequest c,HttpServletResponse d){
    byte[] tempByte = b.getImageData();
    d.setContentType("image/jpeg");
    ServletOutputStream stream = d.getOutputStream();
    /*
        Code to write tempByte into stream here.
    */
    return null;
} 
```

写入`tempByte`into `stream`，刷新并关闭它。`return null`从动作。

现在从内部调用动作`<img src="yourAction.do">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:48:29.250

```
 <%@ page import="java.sql.*" %>
       <%@ page import="java.io.*" %> 

        Connection connection =  null;

      String connectionURL = "jdbc:mysql://localhost:3306/Test";
      ResultSet rs = null;

       PreparedStatement psmnt = null;

 InputStream sImage;
 try {

Class.forName("com.mysql.jdbc.Driver").newInstance();

 connection = DriverManager.getConnection(connectionURL, "Admin", "Admin");
psmnt = connection.prepareStatement("SELECT image FROM save_image WHERE id = ?");
psmnt.setString(1, "11"); // here integer number '11' is image id from the table
rs = psmnt.executeQuery();
if(rs.next()) {
byte[] bytearray = new byte[1048576];
int size=0;
sImage = rs.getBinaryStream(1);
response.reset();
response.setContentType("image/jpeg");
while((size=sImage.read(bytearray))!= -1 ){
response.getOutputStream().write(bytearray,0,size);
 }
 }
 }
     catch(Exception ex){
           out.println("error :"+ex);
        }
            finally {
                  rs.close();
                 psmnt.close();
                 connection.close();
         }
                  %> 
```

通过这个你可以从数据库中检索图像

# php - Codeigniter - 在每次访问页面时更新数据库

> ID：12055095
> 
> 赞同：0
> 
> 时间：2012-08-21T12:42:36.120
> 
> 标签：php, codeigniter

我在 Codeigniter 中做我的网站，我需要`timestamp`为每次页面访问更新我的表格字段。由于我不熟悉 Codeigniter 中的控制流，我对在哪里编写代码感到困惑？它应该对站点周围的所有页面都是通用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:48:18.650

最简单的方法可能是将它放在控制器的构造函数中，因为在每次页面加载时都会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:52:07.917

您可以在 application/config/hooks.php 中使用钩子

[http://ellislab.com/codeigniter/user_guide/general/hooks.html](http://ellislab.com/codeigniter/user_guide/general/hooks.html)

```
$hook['pre_controller'] = array(
                            'class'    => 'MyClass',
                            'function' => 'Myfunction',
                            'filename' => 'Myclass.php',
                            'filepath' => 'hooks',
                            'params'   => array('beer', 'wine', 'snacks')
                            ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:51:15.600

制作模型并将模型名称添加到 config/autoload.php 搜索行：

> $autoload['model'] = array();

然后（在您的模型制作完成后）您需要做的就是在每个控制器上请求 update_entry() 函数；

> $this->update->update_entry();

模型示例：

> 类更新扩展 CI_Model {
> 
> ```
> function update_entry()
> {
>     $timestamp    = time();
> 
>     $this->db->where('id',1)->update('entries', array('timestamp' => $timestamp));
> } 
> ```
> 
> }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:18:58.077

或者简单地把它放在 __Construct

# android - 有意图的哈希图

> ID：12055097
> 
> 赞同：0
> 
> 时间：2012-08-21T12:42:55.650
> 
> 标签：android, android-intent, hashmap

首先，我尝试使用来自 hashmap 的数组的意图意图只是一个类并且可以工作

```
 try{

        JSONArray  earthquakes = json.getJSONArray("result");

        for(int i=0;i<earthquakes.length();i++){                        
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = earthquakes.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("tempat", "" + e.getString("place"));
            map.put("kode", "" + e.getString("code"));
            map.put("jarak", "Jarak: " +  e.getString("distance"));
            mylist.add(map);            
        }       
    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "tempat", "jarak" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(KalkulasiJson.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            Intent i = new Intent(KalkulasiJson.this, Details.class);
            startActivity(i);

        }
    });

} 
```

* * *

然后我想用数组中的许多类和特定值来制作意图

```
 try{

        JSONArray  earthquakes = json.getJSONArray("result");

        for(int i=0;i<earthquakes.length();i++){                        
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = earthquakes.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("tempat", "" + e.getString("place"));
            map.put("kode", "" + e.getString("code"));
            map.put("jarak", "Jarak: " +  e.getString("distance"));
            mylist.add(map);            
        }       
    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "tempat", "jarak", "kode"  }, 
                    new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_kode });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(KalkulasiJson.this, "ID '" + o.get("kode") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            TextView theCode = (TextView) findViewById(R.id.item_kode);
            String Codefix = theCode.getText().toString();

    if(Codefix=="kode001")
    {
        Intent i = new Intent(KalkulasiJson.this, Menu1.class);
        startActivity(i);
    }
    else if(Codefix=="kode005")
    {
        Intent i = new Intent(KalkulasiJson.this, Menu5.class);
        startActivity(i);
    }
    else if(Codefix=="kode003")
    {
        Intent i = new Intent(KalkulasiJson.this, Menu3.class);
        startActivity(i);
    }
    else if(Codefix=="kode089")
    {
        Intent i = new Intent(KalkulasiJson.this, Menu89.class);
        startActivity(i);
    }

        }
    });

} 
```

只有脚本吐司正在工作，意图不受影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:48:16.130

尝试：

```
if(Codefix.equals("kode001"))... 
```

# wso2 - wso2 身份服务器 - 添加新配置文件

> ID：12055100
> 
> 赞同：1
> 
> 时间：2012-08-21T12:43:10.620
> 
> 标签：wso2, wso2is

我正在使用 wso2 身份服务器 3.2.3。我想创建一个新的用户配置文件。我以管理员身份连接，然后转到我的身份/我的个人资料，但我没有看到应该位于个人资料表上方的“添加新个人资料”按钮。

如何添加新的用户配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:30:28.167

我在代码中发现 LDAP 用户存储管理器不支持用户的多个配置文件。这就是没有出现“添加新配置文件”按钮的原因。要查看它，我必须将我的 user-mgt 配置为使用 JDBC 使用存储管理器，或者实现我自己的 UserStoreManager。

请参阅 org.wso2.carbon.user.core.ldap.LDAPUserStoreManager 源代码的摘录：

```
/**
  * This method is to check whether multiple profiles are allowed with a particular user-store.
  * For an example, currently, JDBC user store supports multiple profiles and where as ApacheDS
  * does not allow.
  * LDAP currently does not allow multiple profiles.
  * @return boolean
  */
public boolean isMultipleProfilesAllowed() {
    return false;  //To change body of implemented methods use File | Settings | File Templates.
} 
```

# .htaccess - Htaccess 从 301 重定向中删除查询字符串

> ID：12055103
> 
> 赞同：1
> 
> 时间：2012-08-21T12:43:19.107
> 
> 标签：.htaccess, magento

**我写301重定向如下**

```
Redirect 301 /catalogue/novelty_linen_q_t/spongebob_squarepants/spongebob_squarepants_quilt_cover_wonderland/image/?size=275x275&helper=1281395930.79 http://www.thebedroom.com.au/manchester/character-bedding.html?size=275x275&helper=1281395930.79 
```

**但是当我去** [http://www.thebedroom.com.au/catalogue/novelty_linen_q_t/spongebob_squarepants/spongebob_squarepants_quilt_cover_wonderland/image/?size=275x275&helper=1281395930.79](http://www.thebedroom.com.au/catalogue/novelty_linen_q_t/spongebob_squarepants/spongebob_squarepants_quilt_cover_wonderland/image/?size=275x275&helper=1281395930.79)

**它重定向** [http://www.thebedroom.com.au/manchester/character-bedding.html?size=275x275&helper=1281395930.79](http://www.thebedroom.com.au/manchester/character-bedding.html?size=275x275&helper=1281395930.79)

........我需要重定向 [http://www.thebedroom.com.au/manchester/character-bedding.html](http://www.thebedroom.com.au/manchester/character-bedding.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:49:34.637

从您的重定向指令中删除查询字符串，这就是您所拥有的：（确保一直滚动到右侧以查看评论）

```
#                                                                                                                           This question mark right here is why you have a query string in your redirect ---------v
Redirect 301 /catalogue/novelty_linen_q_t/spongebob_squarepants/spongebob_squarepants_quilt_cover_wonderland/image/?size=275x275&helper=1281395930.79 http://www.thebedroom.com.au/manchester/character-bedding.html?size=275x275&helper=1281395930.79 
```

不太确定它为什么会起作用，但是您需要在**之后**删除所有内容，然后`?`将其`?`留在那里。这确实具有杂散问号的难看副作用，但您可以使用 mod_rewrite 摆脱它，将其替换为`Redirect`：

```
RewriteEngine On
RewriteRule ^catalogue/novelty_linen_q_t/spongebob_squarepants/spongebob_squarepants_quilt_cover_wonderland/image/?$ /manchester/character-bedding.html? [L,R=301] 
```

# vim - 如何区分每种语言的vim设置？

> ID：12055105
> 
> 赞同：4
> 
> 时间：2012-08-21T12:43:27.257
> 
> 标签：vim, color-scheme

我将 vim 与许多不同的语言（C、C++、Java、shell 等）一起使用。我知道 vim 已经为每种语言预设了设置，但我想根据我的个人喜好更改每种语言的设置。我已经有一个带有设置的 .vimrc 文件，但是我想要更多的文件来根据我使用的语言声明更具体的设置。应该调用哪些文件？c.vim? java.vim?

示例：在 C 中，我希望我的注释为绿色，而在 Java 中，我希望它们为浅紫色。

另外，我讨厌 vim 的预设颜色方案。有什么方法可以创建自己的配色方案？

我希望这是可以理解的、完整的、有意义的。

提前致谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T13:17:03.390

您可以使用任一自动命令：

```
autocmd FileType java colorscheme desert 
```

或将命令放入`~/.vim/ftplugin/java_mycolors.vim`. （这是用于新设置；如果您想覆盖默认的系统范围 ftplugins 中的内容，您可以将它们放入`~/.vim/after/ftplugin/java.vim`.）

如您所见，第一种方法快速而肮脏，而后者允许模块化和大量定制。你的来电。

* * *

至于更改颜色方案，这是一个全局设置；你不能同时混合*它们*；但是您只会注意到，当您拆分窗口或使用标签页时，它可能没问题。

但是，您可以更改各个语法颜色。默认情况下，所有语言的评论都链接到`Comment`突出显示组。阅读语法文件（例如`$VIMRUNTIME/syntax/java.vim`）或使用 SyntaxAttr.vim 插件来确定组名。然后你可以在你的重新定义它`.vimrc`：

```
:highlight javaLineComment guifg=Purple
:highlight javaComment guifg=Purple 
```

这很乏味（取决于您想要定制多少），但更精确，并且可以并行工作。我会推荐这个，除非你真的想要每种文件类型完全不同的颜色。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T12:58:05.180

您应该将所有特定于语言的设置放在`ftplugin`目录中：

```
~/.vim/ftplugin/c.vim 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-21T12:54:32.230

你要`autocmd`

```
:help autocmd

autocmd FileType c,java map something somethingelse
" Colorscheme just for PHP
autocmd FileType php colorscheme desert 
```

通过测试`FileType`，您可以指定其他特定设置。或者，在您的内部`~/.vim/ftplugin/`，为各个类型创建文件：

```
~/.vim/ftplugin/java.vim
~/.vim/ftplugin/c.vim 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T13:27:09.970

Romainl 给了你[正确的答案](https://stackoverflow.com/a/12055364/15934)，ftplugins 是要走的路，但它是不完整的。

由于您的问题是一个反复出现的问题，因此我找到了一些更完整的其他答案：

*   [https://stackoverflow.com/a/1414845/15934](https://stackoverflow.com/a/1414845/15934)
*   [https://stackoverflow.com/a/8826323/15934](https://stackoverflow.com/a/8826323/15934)
*   [gVim 和多种编程语言](https://stackoverflow.com/questions/1404515/gvim-and-multiple-programming-languages/1404570#1404570)

# java - 使用 Java 代码显示 Imageview

> ID：12055106
> 
> 赞同：0
> 
> 时间：2012-08-21T12:43:28.920
> 
> 标签：java, android, imageview

我需要显示 res/drawable 文件夹中的图像并将其放入 imageview 中。我做了一些研究并实施了它们。它只显示空白屏幕，但没有图像。

我的xml代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/mainlayout"
    />
</LinearLayout> 
```

Java代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {   
        String value = extras.getString("FaType");

        if(value.equals("AnimalBite"))
        {
            LinearLayout mainLayout = (LinearLayout)findViewById(R.id.mainlayout);

            ImageView imageView = new ImageView(this);
            imageView.setImageResource(R.drawable.medrem);
            LayoutParams imageViewLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            imageView.setLayoutParams(imageViewLayoutParams);

            mainLayout.addView(imageView);

        }
} 
```

目录

```
08-21 20:54:35.698: E/Trace(684): error opening trace file: No such file or directory (2)
08-21 20:54:36.618: D/dalvikvm(684): GC_FOR_ALLOC freed 227K, 4% free 8142K/8455K, paused 123ms, total 142ms
08-21 20:54:36.948: D/dalvikvm(684): GC_CONCURRENT freed 196K, 4% free 8383K/8711K, paused 35ms+25ms, total 138ms
08-21 20:54:37.978: I/Choreographer(684): Skipped 199 frames!  The application may be doing too much work on its main thread.
08-21 20:54:38.158: D/gralloc_goldfish(684): Emulator without GPU emulation detected.
08-21 20:54:39.318: I/Choreographer(684): Skipped 64 frames!  The application may be doing too much work on its main thread.
08-21 20:54:47.318: I/Choreographer(684): Skipped 77 frames!  The application may be doing too much work on its main thread.
08-21 20:54:48.138: I/Choreographer(684): Skipped 45 frames!  The application may be doing too much work on its main thread.
08-21 20:54:49.798: D/AndroidRuntime(684): Shutting down VM
08-21 20:54:49.798: W/dalvikvm(684): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-21 20:54:49.848: E/AndroidRuntime(684): FATAL EXCEPTION: main
08-21 20:54:49.848: E/AndroidRuntime(684): java.lang.RuntimeException: Unable to start activity ComponentInfo{dr.droid/dr.droid.ImageViewer}: java.lang.NullPointerException
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.os.Looper.loop(Looper.java:137)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-21 20:54:49.848: E/AndroidRuntime(684):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 20:54:49.848: E/AndroidRuntime(684):  at java.lang.reflect.Method.invoke(Method.java:511)
08-21 20:54:49.848: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-21 20:54:49.848: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-21 20:54:49.848: E/AndroidRuntime(684):  at dalvik.system.NativeStart.main(Native Method)
08-21 20:54:49.848: E/AndroidRuntime(684): Caused by: java.lang.NullPointerException
08-21 20:54:49.848: E/AndroidRuntime(684):  at dr.droid.ImageViewer.onCreate(ImageViewer.java:29)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.Activity.performCreate(Activity.java:5008)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-21 20:54:49.848: E/AndroidRuntime(684):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-21 20:54:49.848: E/AndroidRuntime(684):  ... 11 more
08-21 20:54:52.268: I/Process(684): Sending signal. PID: 684 SIG: 9 
```

有任何想法吗？我还需要知道这段代码的问题。因为每当我尝试在我的可绘制文件夹上添加图像并在此使用它时

```
imageView.setImageResource(R.drawable.medrem) 
```

它似乎无法识别图像。请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:44:55.147

更改您的if **条件**`if(value == "AnimalBite")`

至

```
if(value.equals("AnimalBite")) 
```

比较两个字符串总是使用`.equals()`类`String`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:54:07.673

在您的代码中添加这一行

```
setContentView(R.layout.your layout name); 
```

很高兴去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:07:55.017

你没有 setcontentview 吗？

这意味着您的 MainLayout 没有被夸大，这会导致在您的日志文件中抛出空指针异常。

手动充气或 setContentView(R.layout.xxxx);

# perl - Perl 函数 string2hex

> ID：12055107
> 
> 赞同：3
> 
> 时间：2012-08-21T12:43:30.050
> 
> 标签：perl

我有一个功能：

```
sub ascii_to_hex ($)
{
    ## Convert each ASCII character to a two-digit hex number.
    (my $str = shift) =~ s/(.|\n)/sprintf("%02lx", ord .$1)/eg;
    return $str;
} 
```

我需要在每个数字前添加一个“%”。收到 %68%75%44

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T12:53:04.747

`%%`在`sprintf`格式字符串中用于打印百分号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:31:53.940

CPAN 解决方案：

```
use URI::Escape;
sub ascii_to_hex { return uri_escape(shift, "\x00-\xFF"); } 
```

或者

```
use URI::Escape qw(%escapes);
sub ascii_to_hex {
    (my $str = shift) =~ s/[\s\S]/$escapes{$1}/g;
    return $str;
} 
```

URI::Escape 是 URI 包的一部分，虽然不是核心，但它是许多其他模块所必需的，并且倾向于安装在大多数系统上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:42:06.873

只需`%`将其翻倍即可逃脱。

```
( my $str = shift ) =~ s/(.)/ sprintf "%%%02x", ord $1 /seg;
return $str; 
```

但这肯定会快一点：

```
( my $str = unpack 'H*', shift ) =~ s/(..)/%$1/sg;
return $str; 
```

顺便说一句，从 5.14 开始，你可以做

```
return unpack('H*', shift) =~ s/(..)/%$1/sgr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:50:16.357

```
sub ascii_to_hex ($)
{
  return join("", map { '%'.sprintf("%02x", ord($_)) } split(//, shift));
} 
```

# sql-server - 设计用户身份验证（角色和权限）模块

> ID：12055116
> 
> 赞同：1
> 
> 时间：2012-08-21T12:43:52.313
> 
> 标签：sql-server, database, database-design, data-modeling

我正在尝试为 MS SQL Server 数据库建模用户身份验证模块，该数据库将成为 Delphi UI 应用程序的后端。基本上，我希望拥有用户只属于一个组的用户帐户。一个组可以有“n”个权限。

我还想将密码历史记录添加到数据库中，因为用户需要根据应用程序设置更改密码（例如，每 90 天）。

我还想为每次用户登录和注销时记录一个事件。我可能会将其扩展到将来的其他活动。

下面你会发现我第一次破解它。请让我知道任何改进它的建议，因为这是我第一次这样做。

您是否认为需要额外的属性来实现基于角色的安全性和密码规则/有效期的约束？

![在此处输入图像描述](../Images/dc71a833b1543a85aeb0160d1cf0ceac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:29:03.727

您可以在 Windows 集成身份验证之上构建它吗？这将在一定程度上简化您的设计。

我过去所做的是将 db 角色用于用户权限，然后将授予角色的列表传回给应用程序。这意味着数据输入和检索由后端强制执行，应用程序可以在前端强制执行它想要的任何内容。它还允许您将规则外包给某些外部源（在这种情况下是 Windows 域）。

# ajax - 任何人都可以在这个脚本中帮助我吗？

> ID：12055120
> 
> 赞同：0
> 
> 时间：2012-08-21T12:44:20.700
> 
> 标签：ajax, jquery

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.php #conten';
        $('#conten').load(toLoad)

    }   

});

$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #conten';
    $('#conten').hide('fast',loadContent);
    $('#load').remove();
    $('#conten').append('<span id="load"></span>');
    $('#load').fadeIn('normal');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#conten').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#conten').show('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('normal');
    }
    return false;

}); 
```

现在的问题是我需要在使用 ajax 加载内容后加载 javascripts 代码我如何使用 Ajax 回调方法，例如 jQuery 的 ajax() 方法中的一个来定义请求完成时要执行的内容。？？？

添加这个功能怎么样？？？

```
$.ajax({
    type: "POST",
    url: "product.php",
    dataType: "html",
    success: function(msg){

        if(parseInt(msg)!=0)
        {
            $('Conten').html(msg);
            $('#loading').css('visibility','hidden');
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:54:09.780

在 .load() 参数中将 () 从 showNewContent() 中取出。换句话说，从这里更改您的代码：

```
function loadContent() {
    $('#conten').load(toLoad,'',showNewContent())
} 
```

对此：

```
function loadContent() {
    $('#conten').load(toLoad,'',showNewContent)
} 
```

一旦`.load()`操作完成，`showNewContent()`就会被调用。

# c# - 单击按钮后打印tablelayoutpanel的内容C#

> ID：12055121
> 
> 赞同：0
> 
> 时间：2012-08-21T12:44:23.717
> 
> 标签：c#, tablelayoutpanel

```
private void bt_saveImage_Click(object sender, System.EventArgs e)   
{
   using (Bitmap printImage = new Bitmap(tlp.Width, tlp.Height))
   {
       tlp.DrawToBitmap(printImage, new Rectangle(0, 0, printImage.Width, printImage.Height));                   
       printImage.Save( "C:/image.jpg",System.Drawing.Imaging.ImageFormat.Jpeg);
   }              
   throw new System.NotImplementedException();       
} 
```

我有错误提示“ExternalException 未处理；GDI+ 中发生一般错误。” 在 `"printImage.Save( "C:/image.jpg",System.Drawing.Imaging.ImageFormat.Jpeg)`“

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:53:11.373

在“C:\image.jpg”之前使用@

```
printImage.Save( @"C:\image.jpg",System.Drawing.Imaging.ImageFormat.Jpeg) 
```

**或者**

在位置中使用“\\”

```
printImage.Save( "C:\\image.jpg",System.Drawing.Imaging.ImageFormat.Jpeg) 
```

# javascript - 如何创建新事件

> ID：12055127
> 
> 赞同：2
> 
> 时间：2012-08-21T12:44:50.097
> 
> 标签：javascript, jquery, javascript-events

我想创建新事件（使用 document.createEvent() 或 Jquery.Event + 复制所有重要属性）并发送克隆以避免修改原始事件。
这是源代码[http://jsfiddle.net/uymYJ/20/](http://jsfiddle.net/uymYJ/20/)

这个问题与这个有关[如何避免在这种情况下修改事件对象](https://stackoverflow.com/questions/12041811/how-to-avoid-to-modify-the-event-object-in-this-situation/12050471#comment16095656_12050471)

任何想法为什么当我在键盘上键入一个键时我得到`newEvent.keyCode`未定义的值？

```
$("#box").keydown(function(event){

    var newEvent = $.Event("keydown");

    console.log(event.keyCode); // 68 
    console.log(newEvent.keyCode); // undefined
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:49:00.593

来自[jQuery API 手册](http://api.jquery.com/category/events/event-object/)：

> 从 jQuery 1.6 开始，您还可以将一个对象传递给 jQuery.Event()，它的属性将设置在新创建的 Event 对象上。

所以你可以尝试`var newEvent = $.Event('keydown', event)`，但据我所知，这只会创建原始事件对象的浅表副本。

或者，只需复制您需要的属性：

```
var newEvent = $.Event("keydown", {
    keyCode:  event.keyCode
}); 
```

除非您这样做，否则您的事件对象将根本**没有**有用的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:52:19.670

[http://jsfiddle.net/uymYJ/21/](http://jsfiddle.net/uymYJ/21/)

```
var e = $.Event('keydown', en); 
```

这会产生您*（真的？）*想要的效果；）

# iphone - 如何在 iPhone sdk 中为 MP3 文件设置速度/比特率？

> ID：12055128
> 
> 赞同：2
> 
> 时间：2012-08-21T12:44:51.723
> 
> 标签：iphone, objective-c, mp3, core-audio, bitrate

我正在尝试将 MP3 文件的速度更改为保存在 iPhone 中的 b。我知道它是流式音频，但有没有办法永久反映这种变化？我能够 [musicPlayer setRate:float_value] 以更改的比特率播放音频，是否也可以以某种方式存储它？

或者是否可以在以更改的比特率播放时将同一文件内部录制到另一个文件中。请帮我解决这个问题。先感谢您！

# html - Nivo 滑块上一个和下一个链接未在 IE8 中显示

> ID：12055130
> 
> 赞同：0
> 
> 时间：2012-08-21T12:44:58.990
> 
> 标签：html, internet-explorer-8, nivo-slider

您可以在这里看到：[http](http://tonysandwich.co.uk/rockinghorses) ://tonysandwich.co.uk/rockinghorses图像滑块上有一个上一个和下一个按钮。

在 IE8 中查看此按钮时，这些按钮不复存在。IE 检查器甚至不选择 div 或内容。

这是我所指的脚本部分：

```
// Add Direction nav
    if(settings.directionNav){
        slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav"></a><a class="nivo-nextNav"></div>');

        $('a.nivo-prevNav', slider).live('click', function(){
            if(vars.running) { return true; }
            clearInterval(timer);
            timer = '';
            vars.currentSlide -= 2;
            nivoRun(slider, kids, settings, 'prev');
        });

        $('a.nivo-nextNav', slider).live('click', function(){
            if(vars.running) { return true; }
            clearInterval(timer);
            timer = '';
            nivoRun(slider, kids, settings, 'next');
        });
    } 
```

这是CSS：

```
 /* Direction nav styles (e.g. Next & Prev) */
.nivo-directionNav a {
      cursor:pointer;
      position: absolute;
      margin-left: -90px;
      z-index: 100;
}

.nivo-prevNav {
    left:0px;
    width: 61px;
    height: 27px;
    background-image:url(images/Back%202.png);
    top: 105%;
            }

.nivo-nextNav {
    right:0px;
    width: 106px;
    height: 126px;
    background-image:url(images/Next%202.png);
    top: 85%;
    margin-right: -25px;

} 
```

我不知道这是否与 prev 和 next 所在的 div 位于 javascript 文件中这一事实有关，因此 IE8 似乎看不到它。

如果有人可以向我提供有关如何在 IE8 中显示它的见解，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:03:44.110

好的，我已经解决了。

我下载了以前版本的 nivo 滑块脚本，并从中获取了以下代码并将其添加到最新版本的代码中。

我在上面显示的代码下立即添加了它，就像魔术一样，按钮现在可以在 IE8 中愉快地显示，我已经恢复了理智。

```
$('a.nivo-prevNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            vars.currentSlide -= 2;
            nivoRun(slider, kids, settings, 'prev');
        });

        $('a.nivo-nextNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            nivoRun(slider, kids, settings, 'next');
        }); 
```

# c# - 在数据库视觉工作室中保存图像

> ID：12055132
> 
> 赞同：1
> 
> 时间：2012-08-21T12:45:01.160
> 
> 标签：c#, database, visual-studio-2010, image, byte

我想知道如何将图像保存到数据库中。我知道我们必须先将图像转换为字节，然后将其保存到数据库中。我已在数据库中将数据类型设置为字节。我需要有关如何在 Visual Studios 2010 C# 中执行此操作的示例项目或代码示例。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:48:38.200

如果你想找到你的形象

```
 FileInfo fInfo = new FileInfo(yourPath);
        long numBytes = fInfo.Length;
        FileStream fStream = new FileStream(sPath, FileMode.Open, FileAccess.Read);
        BinaryReader br = new BinaryReader(fStream);
        byte[] imageData = br.ReadBytes((int)numBytes); 
```

根据对象类型尝试这些行

```
command.Parameters.Add(new SqlParameter("@Image", (object)imageData)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:47:19.327

嘿，您可以将图像保存在服务器上的某个位置，并仅将图像的名称保存在数据库中。

# jsp - 如何使用 servlet 和 jsp 进行身份验证？

> ID：12055145
> 
> 赞同：0
> 
> 时间：2012-08-21T12:45:47.257
> 
> 标签：jsp, authentication, tomcat, servlets, servlet-filters

我正在使用带有 tomcat 7.0 的 Eclipse IDE。

我有一个 Web 应用程序，现在在我的 Web 应用程序中：

1.  `MainPage.html`
2.  `Servlet1`（java类）
3.  一些jsp文件。（其中一些仅供管理员使用 - 例如，`driving_page.jsp`）

在主页中，我在重定向到 servlet 的表单中有 4 个按钮。当我单击一个按钮时，它会转到 servlet，servlet 重定向到`driving_page.jsp`但首先它需要显示`login.jsp`页面并且它没有..

在 chrome 中，我在显示页面之前输入了driving_page URL `localhost:8080/TaxiWeb/driving_page.jsp` ，它向我显示了`login.jsp`需要的页面。

但是如果我点击`MainPage.html`上面提到的按钮，它会跳过`login.jsp`页面并直接进入`driving_page.jsp`页面。为什么？

**注意：**该`driving_page.jsp`文件位于 FOLDER:AdminPages.. 中，因此文件`url-pattern`中的`web.xml`内容是正确的。

`tomcat-users.xml:`

```
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>  
  <user username="role1" password="tomcat" roles="role1"/>
</tomcat-users> 
```

`my web.xml file:`

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
<security-constraint>
  <web-resource-collection>
      <web-resource-name>Driving page</web-resource-name>
      <url-pattern>/AdminPages/*</url-pattern>
  </web-resource-collection>
  <auth-constraint>
      <role-name>role1</role-name>
  </auth-constraint>
  </security-constraint>
  <security-role><role-name>role1</role-name></security-role>

  <login-config>
  <auth-method>FORM</auth-method>
  <form-login-config>
      <form-login-page>/login.jsp</form-login-page>
      <form-error-page>/login_error.jsp</form-error-page>
  </form-login-config>
  </login-config>
  !-- ********************************************************************** -->
  <servlet>
     <servlet-name>Servlet1</servlet-name>
     <servlet-class>pack.servlets.servlet1</servlet-class>
  </servlet>
  <servlet-mapping>
     <servlet-name>Servlet1</servlet-name>
     <url-pattern>/Servlet1</url-pattern>
   </servlet-mapping> 
```

和 servlet 代码：注意：我只是在 servlet 中添加提到的按钮代码：

```
 else if (request.getParameter("submit").equals("Show Taxis at Driving"))
{
   request.getRequestDispatcher("AdminPages/driving_page.jsp").forward(request,response);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:46:40.497

您的问题属于[servlet 规范 13.2](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/) (Declarative Security)

> 安全模型适用于 Web 应用程序的静态内容部分以及应用程序中客户端请求的 servlet 和过滤器。当 servlet 使用 RequestDispatcher 调用静态资源或使用转发的 servlet 时，安全模型不适用或包含。

基本上，您的安全约束只会被初始请求接收并被您的 servlet 转发忽略。

解决此问题的方法是将所有安全 JSP 移动到 WEB-INF 文件夹下，以便无法直接访问它们。更新您到那里的前进路径。然后将您的安全约束指向您的 servlet 而不是 JSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:03:00.163

在这里，您需要使用. 此`response.sendRedirect(String location)`方法将响应连同状态码和新页面位置一起发送回浏览器。现在，浏览器再次发送重定向“位置”的新请求。
在这里，您需要`Filter`在该 URL 上有一个，并且在该过滤器中，您需要检查是否允许用户查看此页面。

# r - 使用 := 将多列添加到 data.table 的子集

> ID：12055146
> 
> 赞同：15
> 
> 时间：2012-08-21T12:45:58.703
> 
> 标签：r, data.table

我的问题是对此处先前回答的问题的扩展：

[在一个函数调用中向 R data.table 添加多列？](https://stackoverflow.com/questions/11308754/add-multiple-columns-to-r-data-table-in-one-function-call)

如果 data.table 有一个我根据子集设置的键，我在分配多个新列时遇到问题。例子：

```
library(data.table)
example(data.table)
DT[J("a")]
   x y  v  m
1: a 1 42 42
2: a 3 42 42
3: a 6 42 42 
```

即 DT 有一个`key(DT) = c("x", "y")`，我想在一次调用中分配 2 个新列`new1`，`new2`类似于上述解决方案。我这样做：

```
DT[J("a"),c("new1","new2") := list(c(1,2,3),c(3,2,1)),with=FALSE] 
```

但我明白了

```
 x y  v  m new1
1: a 1 42 42    1
2: a 3 42 42    2
3: a 6 42 42    3
4: b 1  4  5   NA
5: b 3  5  5   NA
6: b 6  6  5   NA
7: c 1  7  8   NA
8: c 3  8  8   NA
9: c 6  9  8   NA 
```

即预期的行为（将值分配给 x==a, 否则为 NA 的位置），但仅适用于第一列。这是我的错误还是错误？

请注意，如果没有子集 DT，这可以完美地工作：

```
DT[,c("new1","new2") := list(c(1,2,3),c(3,2,1)),with=FALSE]
   x y  v  m new1 new2
1: a 1 42 42    1    3
2: a 3 42 42    2    2
3: a 6 42 42    3    1
4: b 1  4  5    1    3
5: b 3  5  5    2    2
6: b 6  6  5    3    1
7: c 1  7  8    1    3
8: c 3  8  8    2    2
9: c 6  9  8    3    1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T13:41:58.640

很好发现：这是一个新错误。请提交一个`bug.report(package="data.table")`.

谢谢。

===

现在在 v1.8.3 中修复。[Bug#2215](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2215&group_id=240&atid=975)和[最新消息](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)。

# actionscript-3 - Flex - spark.components.VideoPlayer - 在源（？）或皮肤属性上设置 alpha

> ID：12055148
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:07.507
> 
> 标签：actionscript-3, apache-flex, flex-spark

长期消费者，第一次海报。我在另一个论坛上发布了这个问题，但没有得到答案，所以我想我会转向我的“解决问题”论坛。

我遇到了问题，但不确定问题出在哪里，因为我对 spark 视频播放器不熟悉。在 Flex 中，我有一个使用透明背景渲染的 .flv。如果我在 Flash 中使用 FLVPlayback 组件，视频将按预期播放，并且视频源中的透明度显示正常。当我拍摄相同的视频并将其设置为 Spark 视频播放器中的源时，背景是黑色的。我知道使用 FLVPlayback 组件可以解决我的问题，但这超出了我当前项目的范围。

我的问题是：有谁知道这是 Spark 视频播放器没有渲染视频中的 Alpha 通道的结果，还是视频播放器皮肤的这一部分需要调整？还是这两种概念的结合。我将如何解决这个问题？

感谢您的帮助，非常感谢您的阅读，

~奇普莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:37:10.153

我还没有测试过这个，但是你不能在播放器内的 VideoDisplay 组件上设置 opaqueBackground=null 吗？[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#opaqueBackground](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#opaqueBackground)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:50:16.643

这很可能是皮肤的`VideoPlayer`。看看这个`VideoPlayerSkin`类，它定义了这个矩形（以及其他东西），它给它一个黑色的背景：

```
 <!-- background when the videoDisplay doesn't fill its whole spot -->
            <s:Rect bottom="1" left="1" right="1" top="1"
                    bottom.fullScreenStates="0" left.fullScreenStates="0" 
                    right.fullScreenStates="0" top.fullScreenStates="0">
                <s:fill>
                    <s:SolidColor color="0x000000" />
                </s:fill>
            </s:Rect> 
```

您可以创建自己的皮肤，`VideoPlayerSkin`并将其设置`alpha`为`SolidColor`0。

# android - Android - 将区域分成子区域

> ID：12055150
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:11.787
> 
> 标签：android

我有一个复杂的区域和一条折线，将区域分成两部分。我想拥有该区域定义的两个子区域并将它们用于其他目的。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:20:40.313

我最终所做的是我使用径向扫描算法在区域周围绘制轮廓，从折线退出区域的位置开始，并在扫描到达折线进入区域的点时停止。扫描进行了两次——一次顺时针，一次逆时针。

为了在每次迭代中确定径向像素是否在区域内/外，我使用了 region.contains(x,y)。

径向扫描解释： [http ://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/ray.html](http://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/ray.html)

# objective-c - 我将在哪里实现一个通用方法，供 3 个不同的视图控制器使用？

> ID：12055159
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:25.873
> 
> 标签：objective-c, ios, generics, implementation

我有**3 个 ViewControllers**。

这些控制器中的每一个都需要对给定的**核心数据对象**执行计算。

这些计算因对象类型和控制器而异。

方法是，

```
performTimeOperations:(Year *) // VC1
performTimeOperations:(Month *) // VC2
performTimeOperations:(Day *) // VC3 
```

每个大约有 50 行代码。

但是他们每个人的代码变化都非常小，我真的很想传递一个ID，就像这样，

```
performTimeOperations:(id) 
```

让它处理我扔给它的每一种类型的物体。

主要是因为我所做的每一次改变，我都必须在 3 个地方进行。

你会在哪里实现这个？如何？

我应该看类别吗？我也不认为这应该放在我的 appDelegate 中……但这肯定比拥有 3 个实现更好？

任何建议表示赞赏

谢谢！

努诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:53:18.773

正如@deanWombourne 所说，您可以在对象中实现不同部分的计算。或者您可以在单一计算方法中检查对象类型（类）。这取决于你把这个方法放在哪里，你比我们更了解你的代码。也许你可以创建例如。计算器类并将计算方法放在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:50:03.807

为什么不让你所有的核心数据对象都继承自一个实现这个方法的通用基类呢？

即代替

```
Day -> NSManagedObject
Month -> NSManagedObject
Year -> NSManagedObject 
```

你将会拥有

```
Day -> MyDateType -> NSManagedObject
Month -> MyDateType -> NSManagedObject
Year -> MyDateType -> NSManagedObject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:18:27.120

Two options, the C way:

```
id doYourThing(id arg) {
   //50 lines of code on the screen
   //50 lines of code on the ...
   return anAnswer;
} 
```

The static method way:

```
@interface AnAppropriateClass : NSSomething 
+ (id) doYourThing: (id) arg;
@end

@implementation AnAppropriateClass 
+ (id) doYourThing: (id) arg {
    //50 lines of code on the screen
    //50 lines of code on the ...
    return anAnswer;
}
@end 
```

Both of these are

1.  faster than using instance methods
2.  Produce smaller binaries
3.  Have smaller runtime memory footprints

# jquery - Phonegap：不能在同一页面中执行多个 SQL 请求

> ID：12055160
> 
> 赞同：4
> 
> 时间：2012-08-21T12:46:33.103
> 
> 标签：jquery, sql, database, cordova

在我的页面中，我有不同的按钮，每次单击时都会生成不同的查询来访问数据库。我已经有一个函数“queryDB”来检索表中的所有数据，当我单击重置按钮时，另一个查询来更新表值。

我注意到它**没有**进入 FUNCTION “ **resetDB** ”。是因为phoneGap 只使用“queryDB”功能吗？我应该如何解决这个问题？

****** ******新发现的问题******* 我意识到当我使用 location.reload() 时它不会更新表。所以我没有使用它，它确实进入了函数并更新了数据库，但它没有显示“新”页面。如果我使用 href 回到设置页面，它不会像以前那样更新数据库。**

 **```
$('button#reset').on("click",function(){
            var db = window.openDatabase("Database", "1.0", "ApplicationDB", 200000);
            db.transaction(resetDB, errorCB);
            location.reload();
        }); 
```

函数resetDB

```
function resetDB(tx) {
            tx.executeSql("UPDATE RESULT SET Difficulty = 'Easy' "  , [], querySuccess, errorCB);

        } 
```

函数查询数据库

```
function queryDB(tx) {

        tx.executeSql("SELECT * FROM RESULT ORDER BY Level"  , [], querySuccess, errorCB);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:09:51.470

> 我需要再次重新加载同一页面以显示数据库中的更新信息。

我相信这应该对你有用。

```
$('button#reset').on("click",function(){              
    var db = window.openDatabase("Database", "1.0", "ApplicationDB", 200000);
    db.transaction(resetDB, errorCB, successCB);              

});  

// Success callback
function successCB() {
    location.reload();    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:03:08.767

如果您正在使用 JQueryMobile 并希望导航到同一页面，您可以这样做：

$.mobile.changePage(hashedPage, {allowSamePageTransition:true});

您能否还输入更多代码来理解位置对象？**

# asp.net-mvc-3 - 带有 MVC3 的 PayPal IPN

> ID：12055161
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:46:38.143
> 
> 标签：asp.net-mvc-3, paypal-ipn

我似乎无法获得任何关于 IPN 侦听器和使用 MVC3 回发的特定代码。

请有人可以向我提供此代码。现在挣扎了几个星期，才能得到它。

我已经设法正常重定向到沙盒，但只是我需要的 IPN 东西。

任何人都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:51:26.770

似乎有很多代码可用，请查看这篇文章[Paypal IPN Listener for ASP.NET MVC](https://stackoverflow.com/questions/2447468/paypal-ipn-listener-for-asp-net-mvc)

哪个链接到这个[http://blog.wekeroad.com/2008/10/11/mvcstore-part-22](http://blog.wekeroad.com/2008/10/11/mvcstore-part-22)

这也链接到这个[https://mvcsamples.svn.codeplex.com/svn/trunk/Kona.Web/Controllers/PayPalController.cs](https://mvcsamples.svn.codeplex.com/svn/trunk/Kona.Web/Controllers/PayPalController.cs)

**我还建议阅读此[http://www.superstarcoders.com/blogs/posts/paypal-with-asp-net-mvc.aspx](http://www.superstarcoders.com/blogs/posts/paypal-with-asp-net-mvc.aspx)**

而且，这个[http://www.xdevsoftware.com/PPIPNDesc.aspx](http://www.xdevsoftware.com/PPIPNDesc.aspx)

而且，这个[http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html](http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html)

# node.js - 尝试获取错误页面时无法加载样式表 expressJs

> ID：12055163
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:41.387
> 
> 标签：node.js, express

我一直试图在我的 expressJs 应用程序中使用模板呈现错误页面。当我尝试写..

```
app.get('/*', pages.error_page); 
```

..该应用程序运行良好，但没有任何风格！删除那条线一切都会恢复正常。这是我加载错误页面的简单功能：

```
exports.errore_pagina = function (req, res){
res.render('errore', {title: 'Pagina errore'});
} 
```

app.get 位于之前页面的底部：

```
http.createServer(app).listen(app.get('port'), function(){
console.log("Express server listening on port " + app.get('port'));
}); 
```

有没有人发现同样的问题？非常感谢！弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:05:41.227

我已经有一条用于处理静态文件的行：

```
 app.use(express.static(path.join(__dirname, 'public'))); 
```

问题是关于职位的！正如@rdrey 所建议的那样，该行应该在 app.router 之前！也感谢@HectorCorrea！

# vb.net - 显示基于身份验证的视图

> ID：12055165
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:47.677
> 
> 标签：vb.net, asp.net-mvc-3, razor

我已经在我一直在处理的 MVC 应用程序上正确实现了身份验证，并且希望就为不同用户角色显示不同主布局页面的可能性提出一些建议。

我的系统目前有（并且可能永远有）3 个用户角色：

```
1\. Administrator
2\. Superior
3\. General 
```

我想做的是根据他们的角色创建3个用户布局（在首先被指向登录页面之后）所以_layout_admin.vbhtml等

有谁知道如何做到这一点？我已经搜索过并且知道我可以限制控制器但想首先将它们重定向到正确的用户布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:51:18.143

在你的`~/Views/ViewStart.cshtml`：

```
@Code
    Dim r = Roles.GetRolesForUser()
    If r.Contains("Administrator") Then
        Layout = "~/Views/Shared/_LayoutForAdmin.vbhtml"
    ElseIf r.Contains("Superior") Then
        Layout = "~/Views/Shared/_LayoutForSuperior.vbhtml"
    ElseIf r.Contains("General") Then
        Layout = "~/Views/Shared/_LayoutForGeneral.vbhtml"
    Else
        Layout = "~/Views/Shared/_Layout.vbhtml"
    End If
End Code 
```

# javascript - 在外部解析 RSS 提要，无需任何库，如谷歌和服务器端

> ID：12055166
> 
> 赞同：0
> 
> 时间：2012-08-21T12:46:48.533
> 
> 标签：javascript, jquery, parsing, rss, external

我正在尝试实现一个 RSS 解析器，它使用 jquery/javascript 解析提要，而不调用谷歌提要 api 或任何服务器端。原因是我想实现自动更新 RSS 提要。为此，我希望它调用 RSS 提要并从客户端本身进行解析。随着许多用户的使用，我的服务器将被我不想要的几个请求超载。所以我想要的是 AJAX 应该调用提要提供者，然后 javascript 应该解析提要并将其显示给用户。有没有这样的插件或框架来实现它。？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:50:58.610

您不能进行跨域 ajax 调用，因此您不会绕过服务器调用来获取提要

# ajax - Richfaces 3.3/JBoss Seam 2.2。动态加载多个组合框

> ID：12055168
> 
> 赞同：0
> 
> 时间：2012-08-21T12:47:03.200
> 
> 标签：ajax, combobox, richfaces

我有三个组合框。第一个填充了值。当我从中选择一个值时，第二个必须更新。之后，当我从第二个组合中选择一个值时，应该填充第三个。我知道这已经传达了，但是有两个组合。超过两个它不起作用。你能告诉我我做错了什么吗？

这是视图：

```
<h:form>
    <h:panelGrid columns="2">        
        <h:outputText value="Choose the produce type:"/>

        <h:selectOneMenu id="firstList"
                            value="#{userBean.firstItem}"                
                            valueChangeListener="#{userBean.valueChanged}">
            <f:selectItems value="#{userBean.firstList}"
                           var="element"
                           itemLabel="#{element.label}"
                           itemValue="#{element.value}" />
                <a4j:support reRender="outputPanel"
                             event="onchange"                                                                  
                             ajaxSingle="true"
                             bypassUpdates="false" />                
        </h:selectOneMenu>

        <a4j:outputPanel id="outputPanel">
            <h:selectOneMenu value="#{userBean.secondItem}"                
                             valueChangeListener="#{userBean.valueChanged}">
            <f:selectItems value="#{userBean.secondList}"
                           var="element"
                           itemLabel="#{element.label}"
                           itemValue="#{element.value}" />                    
                    <a4j:support reRender="outputPanel"
                             event="onchange"                                                                  
                             ajaxSingle="true"
                             bypassUpdates="false" />                                                 
            </h:selectOneMenu>

            <h:selectOneMenu value="#{userBean.thirdItem}"                
                             valueChangeListener="#{userBean.valueChanged}">
            <f:selectItems value="#{userBean.thirdList}"
                           var="element"
                           itemLabel="#{element.label}"
                           itemValue="#{element.value}" />                                                 
            </h:selectOneMenu>                
        </a4j:outputPanel>

    </h:panelGrid>
</h:form> 
```

这是 Bean（这是一个没有任何意义的示例代码）：

```
@Name("userBean")
public class UserBean
{
@Logger private Log log;

@In StatusMessages statusMessages;

private String firstItem="";
private String secondItem="";
private String thirdItem="";
public List<SelectItem> firstList = new ArrayList<SelectItem>(); 
public List<SelectItem> secondList = new ArrayList<SelectItem>();
public List<SelectItem> thirdList = new ArrayList<SelectItem>();
private static final String [] FRUITS = {"Banana", "Cranberry", "Blueberry", "Orange"};
private static final String [] VEGETABLES = {"Potatoes", "Broccoli", "Garlic", "Carrot"};
private static final String [] GIRLS = {"Victoria", "Nana", "Etc.."};

public UserBean() {
    SelectItem item = new SelectItem("fruits", "Fruits");
    firstList.add(item);
    item = new SelectItem("vegetables", "Vegetables");
    firstList.add(item);
    item = new SelectItem("girls", "Girls");
    firstList.add(item);
    for (int i = 0; i < FRUITS.length; i++) {
        item = new SelectItem(FRUITS[i]);
    }
}

public List<SelectItem> getFirstList() {
    return firstList;
}

public List<SelectItem> getSecondList() {
    return secondList;
}

public List<SelectItem> getThirdList() {
    return thirdList;
}

public static String[] getFRUITS() {
    return FRUITS;
}

public static String[] getVEGETABLES() {
    return VEGETABLES;
}

public static String[] getGIRLS() {
    return GIRLS;
}

public void valueChanged(ValueChangeEvent event){
    String[] currentItems;
    String id = ((HtmlSelectOneMenu)event.getSource()).getId();
    if (id.equals("firstList")) {            
        currentItems = FRUITS;

        for (int i = 0; i < currentItems.length; i++) {
            SelectItem item = new SelectItem(currentItems[i]);
            secondList.add(item);
        }

        thirdList.clear();
    } else {
        currentItems = GIRLS;

        for (int i = 0; i < currentItems.length; i++) {
            SelectItem item = new SelectItem(currentItems[i]);
            thirdList.add(item);
        }
    }  
}

public String getFirstItem() {
    return firstItem;
}

public void setFirstItem(String firstItemArg) {
    firstItem = firstItemArg;
}

public String getSecondItem() {
    return secondItem;
}

public void setSecondItem(String secondItemArg) {
    secondItem = secondItemArg;
}

public String getThirdItem() {
    return thirdItem;
}

public void setThirdItem(String thirdItemArg) {
    thirdItem = thirdItemArg;
} 
```

问题是，当我从第二个组合框中选择一个值（其值是动态加载的）时，页面会重新加载（而不是执行 ajax 请求）并且我有异常：

请求处理期间的异常：由 javax.servlet.ServletException 引起，消息为：“java.util.NoSuchElementException”

第二个列表从第一个列表成功更新，但之后出现了问题。

提前致谢！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:25:21.797

确保您的 bean 具有比 Request 更广泛的范围，例如 Conversation 范围。看起来您使用的是 JSF 1.2，在这种情况下，RichFaces 有一个`<a4j:keepAlive>`标签组件，用于将托管 bean 的范围从 Request 提升到 View（在幕后使用会话变量）。此选项可能是您需要的。有两种实现方式

1.  使用标签组件。这将使 bean 仅具有此页面的“查看范围”。

    ```
    <a4j:keepAlive bean="userBean" />
    <h:form>
        <h:panelGrid columns="2">
        <!-- the rest of your code... --> 
    ```

2.  使用标签注释。这将使 bean 在使用的​​每个页面上都有“查看范围”。

    ```
    @Name("userBean")
    @KeepAlive
    public class UserBean {
        //your managed bean code...
    } 
    ```

注意：要使用此标记（作为组件或注释），bean 必须具有请求范围。

# java - 如何在远程 ubuntu 服务器上开发 java 应用程序？

> ID：12055172
> 
> 赞同：1
> 
> 时间：2012-08-21T12:47:22.633
> 
> 标签：java, eclipse

每次我想检查我的应用程序时，我都需要编译它并将其上传到我的服务器并运行它。这需要很多时间。我无法调试。

有没有更有效的方法来做到这一点？甚至在我的远程服务器上调试？

我更喜欢使用 eclipse，但任何可以完成这项工作的编译器都很好。而且我无法在本地电脑上调试该应用程序，因为它使用了一些基于 linux 的软件包 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:46:04.873

另一种选择是编写一个脚本（ant 或其他）来构建您的应用程序并将其部署到 ubuntu 服务器。然后在启用远程调试的情况下启动应用程序：

```
java -Xdebug -Xrunjdwp:transport=dt_socket,address=8998,server=y -jar theApp.jar 
```

然后使用 Eclipse 远程调试应用程序。

[http://www.eclipsezone.com/eclipse/forums/t53459.html](http://www.eclipsezone.com/eclipse/forums/t53459.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:48:19.217

Java 为您提供远程调试。

这是有关此主题的教程：

[如何调试远程 Java 应用程序](http://java.dzone.com/articles/how-debug-remote-java-applicat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:49:59.817

您可以使用 VNC/NoMachine 客户端在您的服务器上获取远程 GUI 会话并直接在服务器机器上进行开发。我们在工作中使用[NoMachine](http://www.nomachine.com/)连接到 RedHat 盒子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:50:49.967

哦，你总是可以使用 vim+命令行魔法在服务器上进行开发。如果你太习惯使用 Eclipse。查看[Eclim](http://eclim.org/)项目，它将在您的 vim 上提供 eclipse 功能，您可以在服务器上运行该功能来进行开发。

另一种方法是使用 git repo，您​​可以将所有更改推送到服务器，然后在服务器上编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:26:03.410

如果您与 linux 机器的连接非常好（而且速度很快），您可以直接在那里安装 Eclipse 并通过 SSH 会话进行开发。使用 X11 隧道和[Xming](http://www.straightrunning.com/XmingNotes/)

*   在 Linux 机器上安装 Java 和 Eclipse
*   在您的 Windows 客户端上安装[Xming](http://www.straightrunning.com/XmingNotes/)（请参阅安装/设置说明）
*   将您的源文件（Eclipse 工作区）放在 Linux 机器的某个位置
*   从 Windows 机器通过 SSH 隧道直接在 Linux 上运行 Eclipse（请参阅 Xming 指南）
*   现在一切都在 Linux 上运行，您可以完全访问调试等。

# c# - 防止表单接收鼠标点击

> ID：12055174
> 
> 赞同：2
> 
> 时间：2012-08-21T12:47:24.483
> 
> 标签：c#, winforms, onclick

我试图阻止用户在通过初始单击启动数据后处理数据时多次单击按钮。

简单地禁用按钮 ( `buttonBackupNow.Enabled = false;`) 并没有帮助，因为如果用户多次单击按钮，即使按钮被禁用，表单也会像之前的数据处理例程一样注册单击并重新开始数据处理。

我尝试使按钮不可见，结果仍然相同。再次尝试禁用表单，结果相同。所以我认为唯一的解决方案是在处理数据时完全忽略点击。

那么，如何阻止表单接收用户鼠标点击？

**编辑：此问题与我在数据处理完成后尝试重新启用按钮的事实有关。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:01:07.710

> 简单地禁用按钮 (buttonBackupNow.Enabled = false;) 并没有帮助，因为如果用户多次单击按钮，即使按钮被禁用，表单也会注册单击并在前一个数据处理例程完成后立即重新开始数据处理.

真的吗？你是怎么做到的？我根本无法重现它。禁用按钮会阻止`Click`触发事件。

这本身就足够了。**您不必**解除事件（以及使用其他技巧）。如果您需要求助于它，则其他地方可能不正确（也许某些代码正在重新启用该按钮？）。

事实上，即使删除处理程序对您也无济于事 - 正如您自己在回应`Justin Harvey`'s answer 时所说的那样 - 让我确信问题出在其他地方。

* * *

PS。从用户体验的角度来看，禁用按钮比仅仅忽略点击要好得多，因为它给你的用户一些视觉反馈：命令现在不可用。显示一条消息：“不是现在，我已经在做这些事情了”也许会更好。但是在不对点击做出反应的情况下留下可点击的按钮是不好的。

* * *

**更新：**在 OP 澄清问题后（在评论中）

> 好吧，当按钮被按下时，我立即禁用它，然后数据处理序列如下，当它完成时我重新启用按钮。但我认为这个问题与数据处理它使应用程序无响应这一事实有关，但表单仍会注册点击，并且在重新启用后再次按下按钮。

您应该异步运行此操作（在后台线程上）。使用 BackgroundWorker 对象并在其 RunWorkerCompleted 事件中重新启用按钮。

*它解决了这个问题。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:52:16.380

您可以删除处理程序：

```
this.button.Click -= button_Click; 
```

然后在处理后重新恢复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:53:38.173

我不知道 C#，但我认为您可以（创建并）在处理事件时检查变量*alreadyClicked*是否为 true，如果不是，则将其设置为 true，然后正常处理事件。
这样当用户第二次点击按钮时，*已经点击*为真，代码不会被执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:55:06.940

我可以考虑是否有很多方法可以防止这种情况发生，但一个非常快速的方法是在表单上设置一个布尔变量，检查用户是否已经点击了按钮，并且只在第一次执行 on_click 事件中的代码时他点击按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T12:56:57.287

而不是触发您使用按钮的单击事件处理的任何内容，而是通过提交表单来触发它。因此，一旦用户第一次提交表单，您就可以防止默认表单，直到您决定这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-11T05:37:16.260

以上答案均不正确。

真正的原因是：执行按钮点击事件处理方法的是主线程，也是检测到有鼠标点击并决定如何处理的主线程。

在您的按钮单击事件处理程序中，您首先禁用按钮，然后执行耗时的工作，然后在最后启用按钮，希望在您执行耗时的工作时，会处理并忽略以下鼠标点击. 但这种情况并非如此。主线程只有在完成事件处理程序后才能查看以下鼠标单击，并且到那时按钮已重新启用！

所以你需要做的是禁用事件处理程序中的按钮，然后，在该事件处理程序结束时，启动一个 100 毫秒的计时器，然后让计时器重新启用按钮。这样，当主线程退出您的事件处理程序时，按钮保持禁用状态，主线程继续执行并消耗以下鼠标单击并浪费它们，然后计时器启动并重新启用按钮，以便您可以单击它再次。

# numpy - numpy 多重矩阵乘法

> ID：12055176
> 
> 赞同：1
> 
> 时间：2012-08-21T12:47:33.387
> 
> 标签：numpy, scipy

如果我有一个像 $(x-\mu)^T \Sigma^{-1} (x-\mu)$ 这样的矩阵产品，那么为 numpy 数组编写这个的方法是`reduce(numpy.dot,((x-mu).T, scipy.linalg.inv(Sigma), x-mu))`？Matlab 和 R 语法要简单得多，以至于 numpy 没有等效的运算符语法似乎有点奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:22:10.970

你也可以试试：

```
x = x.view(np.matrix)
isigma = scipy.linalg.inv(Sigma).view(np.matrix)
result = (x-mu).T * isigma * (x-mu) 
```

通过将数组视为矩阵，您可以`.__mul__`在`np.matrix`使用`*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:48:59.663

你也可以写（Numpy >= 1.4 左右）

```
from scipy.linalg import inv

(x - mu).T.dot(inv(Sigma)).dot(x - mu) 
```

如另一个答案中所述，有限的运算符语法是由于 Python 中可用的运算符数量有限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:04:26.893

The main issue is that `*` is already defined as elementwise multiplication for numpy arrays, and there is no other obvious operator left for matrix multiplication. The solution, as Pierre suggests, is to convert to numpy matrices, where `*` means matrix multiplication.

There have been a few proposals to add new operator types to Python ([PEP 225](http://www.python.org/dev/peps/pep-0225/), for example) which would allow something like `~*` to represent matrix multiplication.

# php - Yii 关系搜索

> ID：12055180
> 
> 赞同：0
> 
> 时间：2012-08-21T12:47:54.510
> 
> 标签：php, search, yii

在询问之前我尝试“做我的功课”，但我尝试的方法似乎都不起作用，所以我需要帮助。（我不是 Yii 专家）

我的问题是我想在我的索引页面上有一个搜索框，它可以帮助我按标签搜索电影。我找到了[一篇有用的文章](http://learnyii.blogspot.hu/2011/01/creating-instant-search-box-for.html) ，所以基本上我就是这样开始的。

我有以下表格：

电影

标签

movie_has_tag（其中包含 movie_id 和 tag_id）

// 我认为搜索需要的是 movie_title 和 tag_name

BaseMovie 中的关系：

```
public function relations(){
    return array(
        'tags' => array(self::MANY_MANY, 'Tag', 'movie_has_tag(movie_id, tag_id)'),
    );
} 
```

BaseTag 中的关系：

```
public function relations(){
    return array(
        'movies' => array(self::MANY_MANY, 'Movie', 'movie_has_tag(tag_id, movie_id)'),
    );
} 
```

我试过这样：

```
public function actionIndex(){
    if( isset($_GET['q']) ){
        $model = new Movie($scenario='search');

        $model->unsetAttributes();

        $tag = $_GET['q'];

        // this is how I tried
        $tags = Movie::model()->with('tags')->findAllByAttributes( array('movie_title' => $tag));

        $this->render('index',array(
            'dataProvider'=>$model->search(),  
        ));

} 
```

使用此代码，当我开始在搜索框中输入内容时没有任何反应。

* * *

编辑：
@Stu

我已阅读链接并提出以下内容。我将此关系添加到 BaseMovie：

```
'tagz' => array(self::HAS_MANY, 'Tag', array('movie_id'=>'tag_id', 'through'=>'MovieTags')). 
```

然后我编辑了 actionIndex 中的内容：

```
if( isset($_GET['q']) ){
        $model = new Movie($scenario='search');
        $model->unsetAttributes();

        $movies = Movie::model()->withTag($_GET['q'])->findAll();
        $tags = $movies->movieTags;
} 
```

当我开始输入时，即时搜索框变得很有趣，所有电影都消失了（即使我删除了我输入的内容，它们也没有回来。我必须刷新页面）。

编辑 v2： _view 非常简单：

```
<div class="view">
    <?php echo CHtml::encode($data->title); ?>
</div> 
```

其他所有内容（如索引页面）与我第一次提到的链接中的相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:32:28.787

好的，我已经阅读了您在此处写的内容（问题和第一个答案），并将尝试在您的“编辑：@Stu”标记之前解决您的问题，因为在那之后您开始做一些我没有做过的奇怪事情理解。

您有 2 个模型`Movie`和`Tag`. 模型中的关系`Movie`就像你之前写的：

```
public function relations(){
  return array(
    'tags' => array(self::MANY_MANY, 'Tag', 'movie_has_tag(movie_id, tag_id)'),
  );
} 
```

模型中的关系`Tag`与您之前编写的相同：

```
public function relations(){
  return array(
    'movies' => array(self::MANY_MANY, 'Movie', 'movie_has_tag(tag_id, movie_id)'),
  );
} 
```

现在您在`Movie`模型中创建新方法：

```
public function searchByTag($q)
{
    $criteria=new CDbCriteria;
    $criteria->with = 'tags';
    $criteria->together = true;
    $criteria->compare('`tags`.`name`', $q, true, 'OR');
    // You can add here another comparision to search in your movie title, for example
    // $criteria->compare('`t`.`title`', $q, true, 'OR');
    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

在你的控制器中，动作应该是这样的：

```
public function actionIndex() {
    if( isset($_GET['q']) ) {
        $tag = $_GET['q']; // Please add needed safety measures, for example with HTMLPurifier
        $this->render('index', array(
            'dataProvider'=>Movie::model()->searchByTag($tag),  
        ));
    } else
        $this->render('index');
} 
```

希望这是有用的。

# mysql - SELECT DISTINCT 不返回不同的值

> ID：12055186
> 
> 赞同：0
> 
> 时间：2012-08-21T12:48:14.717
> 
> 标签：mysql, sql

我有以下 MYSQL 来获取不同的 emails.to 值，但请参阅下面的结果

```
SELECT DISTINCT `emails`.`to`,`emails`.`from` as fromEmail, `emails`.`time` as timestamp
FROM `emails` 
WHERE ((`emails`.`from` = 'sdadr@googlemail.com') 
OR (`emails`.`to` = '887')) 
AND (`emails`.`to` != 0) 
ORDER BY `id` DESC LIMIT 4 
```

-

```
to    fromEmail             timestamp
370   sdadr@googlemail.com  2012-08-15 16:52:15
1923  sdadr@googlemail.com  2012-08-15 10:54:48
890   sdadr@googlemail.com  2012-08-15 10:43:06
890   sdadr@googlemail.com  2012-08-15 10:43:02 
```

为什么它会返回重复的 890？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:49:54.680

因为时间戳不同。这`DISTINCT`意味着整行，而不仅仅是一列。

这会将您的时间戳截断为仅日期，然后 890 不会重复。正如 Nikola Markovinović 所建议的那样。

```
SELECT DISTINCT `emails`.`to`,`emails`.`from` as fromEmail, DATE(`emails`.`time`) as timestamp
FROM `emails` 
WHERE ((`emails`.`from` = 'sdadr@googlemail.com') 
OR (`emails`.`to` = '887')) 
AND (`emails`.`to` != 0) 
ORDER BY `id` DESC LIMIT 4 
```

如果您只想截断秒数，这也会导致所需的结果，您可以这样做：

```
SELECT DISTINCT `emails`.`to`,`emails`.`from` as fromEmail, 
DATE_FORMAT(`emails`.`time`, '%Y-%m-%d %H:%i') as timestamp
FROM `emails` 
WHERE ((`emails`.`from` = 'sdadr@googlemail.com') 
OR (`emails`.`to` = '887')) 
AND (`emails`.`to` != 0) 
ORDER BY `id` DESC LIMIT 4 
```

[手动输入以`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-format)获取更多信息。

**根据您的评论，如果您只想拥有唯一的电子邮件。**只需选择该列，不要再使用`DISTINCT`.

```
SELECT DISTINCT `emails`.`to`
FROM `emails` 
WHERE ((`emails`.`from` = 'sdadr@googlemail.com') 
OR (`emails`.`to` = '887')) 
AND (`emails`.`to` != 0) 
ORDER BY `id` DESC LIMIT 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:53:10.097

```
SELECT DISTINCT `emails`.`to` 
  FROM `emails`  WHERE ((`emails`.`from` = 'sdadr@googlemail.com')  OR (`emails`.`to` = '887'))  AND (`emails`.`to` != 0)  
  ORDER BY `id` DESC LIMIT 4 
```

根据您的问题，您正在寻找`to`可以从此查询中获取的不同地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:51:24.523

如前所述，截断至今：

```
SELECT DISTINCT `emails`.`to`,`emails`.`from` as fromEmail, DATE(`emails`.`time`) as timestamp
FROM `emails` 
WHERE ((`emails`.`from` = 'sdadr@googlemail.com') 
OR (`emails`.`to` = '887')) 
AND (`emails`.`to` != 0) 
ORDER BY `id` DESC LIMIT 4 
```

# android - 动画列表视图，动态扩展以填满屏幕

> ID：12055188
> 
> 赞同：0
> 
> 时间：2012-08-21T12:48:17.170
> 
> 标签：android, animation

好的，所以我有 3 个列表视图，我的布局看起来像这样

列表视图 1
按钮 1
列表视图 2
按钮 2
列表视图 3
按钮 3

我想做的是，

当用户单击按钮 1 时，我希望 Listview 1 填满屏幕，但动画应该类似于在下面视图顶部折叠的车库门。

除此之外，当用户单击 Button 2 时，第二个列表视图需要展开以填充屏幕但覆盖其他视图。现在，当我运行动画时，它要么完全退出屏幕。

如何创建像动画一样的车库门，基本上是在其他视图上滑动并覆盖它们。Android状态栏之类的东西向下拖动。

有人可以告诉我如何做到这一点吗？我尝试了各种方法，但都没有走远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:56:02.417

将每个转换`listviews`为[`ListFragments`](http://developer.android.com/reference/android/app/ListFragment.html) 然后像往常一样显示它们，当用户单击按钮时，通过动态[添加来展开 ListFragment](https://stackoverflow.com/a/5161143/492561)

# iphone - 视网膜显示实现

> ID：12055191
> 
> 赞同：-6
> 
> 时间：2012-08-21T12:48:27.207
> 
> 标签：iphone, ios, ipad

谁能告诉我在我的 iphone 应用程序中实现 Retina Display 的分步过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:55:02.450

创建标准尺寸和双倍尺寸的图像。给它们起相同的名称，但双倍大小的后缀为“@2x”。例如`homebutton.png`和`homebutton@2x.png`。

只要两者都在您的捆绑包中并且您正确引用它们，操作系统就能够为您处理加载正确的图像。在应用程序中（无论是在代码中还是在界面构建器中）应用您的图像时，只需将图像引用为`homebutton`. 这告诉 iOS 为视网膜设备加载@2x，为标准分辨率显示器加载非@2x。

这是一个非常简单的过程，如果您有任何其他问题，请告诉我，我会尽力回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:55:35.087

如果您在应用程序中讨论图像分辨率，则添加另一个图像（分辨率为两倍），并将 @2x 作为文件名的一部分。例如，image.png 将有一个名为 image@2x.png 的伙伴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:59:26.253

如果您的意思是您需要采取什么样的步骤来优化您的视网膜显示器应用程序，这些文章将提供有关您如何执行此操作的详细说明：

[为 Retina 显示屏设计，第一部分](http://bjango.com/articles/designingforretina/)

[Retina 显示屏设计，第二部分](http://bjango.com/articles/designingforretina2/)

# excel - 如何在 c# 中访问 excel 的“ThisWorkbook”

> ID：12055194
> 
> 赞同：1
> 
> 时间：2012-08-21T12:48:31.467
> 
> 标签：excel, excel-2007, vba

下面是创建 Module1.bas 并在其上存储代码。我想添加以下代码以从“Thisworkbook”触发宏。

如何在 Thisworkbook 中添加 Workbook_Open() ？

> sCode ="Private Sub Workbook_Open()\r\n" + "UserForm1.Show\r\n" + "end sub"

```
using Excel = Microsoft.Office.Interop.Excel;
using VBIDE = Microsoft.Vbe.Interop;
VBIDE.VBComponent oModule;
String sCode;
oModule = wb.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule);
sCode ="Private Sub Workbook_Open()\r\n" +
                  "UserForm1.Show\r\n" +
                  "end sub"
oModule.CodeModule.AddFromString(sCode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:31:33.913

```
var workbookMainModule = wkBk.VBProject.VBComponents.Item("ThisWorkbook");
    workbookMainModule.CodeModule.AddFromString(sCode); 
```

# c++ - 将 int 转换为 wchar_t 的正确方法是什么？

> ID：12055197
> 
> 赞同：2
> 
> 时间：2012-08-21T12:48:38.047
> 
> 标签：c++, windows, type-conversion, wchar

说你有“方法”

```
int Read(...)
{
    unsigned char Byte = 0;
    if(!ReadFile(.., &byte, 1,...))
        return -1;

    return Byte;
}

int ReadBlock(LPWSTR buffer, int cchBuffer ...)
{
    int c = 0;
    int cnt = 0;
    do
    {
        if( (c=Read(...)) != -1 )
            buffer[num++] = c; // Here.
    } while( num < ccBuffer );
    return cnt;
} 
```

将 int 正确获取到 WCHAR 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:21:54.477

使用`mbstowcs`（多字节字符串到宽字符串）：

```
int ReadBlock(LPWSTR buffer, int cchBuffer ...)
{
    int c = 0;
    std::vector<char> narrow;
    while((c=Read(...)) != -1 )
       narrow.push_back(c);
    }
    narrow.push_back(0);
    mbstowcs(buffer, &narrow.front(), cchBuffer);
} 
```

`mbstowcs`使用当前的语言环境，因此应该与您输入的编码相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:33:14.473

```
convert char <= => wchar
in windows:
MultiByteToWideChar
WideCharToMultiByte

in linux:
mbsrtowcs
wcsrtombs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:12:10.683

```
#include<tchar.h>

int main()
{
    int integer = 0;
    wchar_t wideCharacter = (wchar_t)integer;

    return 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T06:37:04.487

看完[什么时候应该使用static_cast、dynamic_cast和reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)，我意识到是我缺乏关于选角的知识促使我提出这个问题。

# git - 找出 Git 分支创建者

> ID：12055198
> 
> 赞同：195
> 
> 时间：2012-08-21T12:48:39.450
> 
> 标签：git, git-branch

我想知道谁创建了一个分支。

我可以这样做：

```
git branch -a | xargs -L 1 bash -c 'echo "$1 `git log --pretty=format:"%H %an" $1^..$1`"' _ 
```

但是，这会返回每个分支的最后一个提交者，不一定是创建分支的人。

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2013-10-02T11:14:35.207

按提交者日期排序的作者列出远程 Git 分支：

```
git for-each-ref --format='%(committerdate) %09 %(authorname) %09 %(refname)' --sort=committerdate 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-08-21T13:06:26.710

分支只不过是一个提交指针。因此，它不会跟踪诸如“谁创造了我”之类的元数据。你自己看。在您的存储库中尝试`cat .git/refs/heads/<branch>`。

如果您真的想在存储库中跟踪此信息，请查看[分支描述。](https://stackoverflow.com/a/11886179/877115)它们允许您至少在本地将任意元数据附加到分支。

DarVar[在下面的回答](https://stackoverflow.com/a/19135644/877115)也是获取此信息的一种非常聪明的方法。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-08-31T13:34:00.220

我通过使用`--sort`标志调整了以前的答案并添加了一些颜色/格式：

```
git for-each-ref --format='%(color:cyan)%(authordate:format:%m/%d/%Y %I:%M %p)    %(align:25,left)%(color:yellow)%(authorname)%(end) %(color:reset)%(refname:strip=3)' --sort=authordate refs/remotes 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-16T17:48:01.760

添加到[DarVar 的答案](https://stackoverflow.com/questions/12055198/find-out-a-git-branch-creator/19135644#19135644)：

```
git for-each-ref --format='%(committerdate) %09 %(authorname) %09 %(refname)' | sort -k5n -k2M -k3n -k4n | awk '{print $7 $8}' 
```

PS：我们使用 AWK 漂亮地打印作者和远程分支。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-29T14:48:34.333

```
git for-each-ref --format='%(authorname) %09 -%(refname)' | sort 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-08-05T15:47:52.537

您可以通过以下方式找出谁在**本地**存储库中创建了分支

```
git reflog --format=full 
```

示例输出：

```
commit e1dd940
Reflog: HEAD@{0} (a <a@none>)
Reflog message: checkout: moving from master to b2
Author: b <b.none>
Commit: b <b.none>
(...) 
```

但这可能没有用，因为通常只有在您创建分支的本地存储库上。

信息存储在 ./.git/logs/refs/heads/ *branch*。示例内容：

```
0000000000000000000000000000000000000000 e1dd9409c4ba60c28ad9e7e8a4b4c5ed783ba69b a <a@none> 1438788420 +0200   branch: Created from HEAD 
```

此示例中的最后一次提交来自用户“b”，而分支“b2”由用户“a”创建。如果您更改用户名，您可以验证 git reflog 从日志中获取信息并且不使用本地用户。

我不知道将本地日志信息传输到中央存储库的任何可能性。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-10-30T10:19:28.903

我们可以根据作者姓名找出

```
git for-each-ref --format='%(authorname) %09 %(if)%(HEAD)%(then)*%(else)%(refname:short)%(end) %09 %(creatordate)' refs/remotes/ --sort=authorname DESC 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-16T18:03:11.280

假设：

1.  分支是由`master`
2.  尚未`master`合并

* * *

```
 git log --format="%ae %an" master..<HERE_COMES_THE_BRANCH_NAME> | tail -1 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-02T20:57:41.830

据我所知，您可能会看到**您**是否只是分支的创建者。这由 .git/ref/heads/<branch> 中的第一行表示。如果它以“从 HEAD 创建”结尾，那么您就是创建者。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-14T16:00:03.540

对于那些寻找 DESC 的人......这似乎有效`--sort=-`

ty 的格式，新的...我的眼睛正在失去一些它的血丝

```
git for-each-ref --format='%(color:cyan)%(authordate:format:%m/%d/%Y %I:%M %p)    %(align:25,left)%(color:yellow)%(authorname)%(end) %(color:reset)%(refname:strip=3)' --sort=-authordate refs/remotes 
```

进一步参考：[https ://stackoverflow.com/a/5188364/10643471](https://stackoverflow.com/a/5188364/10643471)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-24T11:47:03.420

警告！

请注意，这些命令显示了分支指向的提交数据，因此提交作者可能与分支作者不同。Git 不存储分支创建者，只存储提交的创建者。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-16T22:19:00.683

我知道这不完全是问题的范围，但是如果您发现只需要过滤特定作者的提交，您可以随时通过管道传递到 grep :)

```
# lists all commits in chronological order that
# belong to the github account with
# username `MY_GITHUB_USERNAME` (obviously you
# would want to replace that with your github username,
# or the username you are trying to filter by)

git for-each-ref --format='%(committerdate) %09 %(authorname) %09 %(refname)' | sort -committerdate | grep 'MY_GITHUB_USERNAME' 
```

快乐编码！:)

# c++ - 'allegro_init()' 未在此范围内声明

> ID：12055200
> 
> 赞同：1
> 
> 时间：2012-08-21T12:48:40.280
> 
> 标签：c++, linux, allegro5

伙计们，我正在尝试在 Ubuntu 11.04 上安装 allegro 5 库。我遵循的教程[是](http://wiki.allegro.cc/index.php?title=Install_Allegro5_From_SVN/Linux/Debian)这样的。现在我在第一次尝试安装库时遇到了一些错误，但我可以克服它们并正确安装库。问题是当我尝试运行我的示例代码时

```
#include <allegro5/allegro.h> 

int main(int argc, char *argv[]) 

{
allegro_init(); 

install_keyboard(); 

set_gfx_mode(GFX_AUTODETECT, 640,480,0,0); 

readkey();

return 0; 
}

END_OF_MAIN() 
```

我收到类似的错误

```
ajinkya@ajinkya-8I945GZME-RH:~/random$ g++ example.cpp -o example -lalleg
example.cpp: In function ‘int main(int, char**)’:
example.cpp:7:15: error: ‘allegro_init’ was not declared in this scope
example.cpp:9:19: error: ‘install_keyboard’ was not declared in this scope
example.cpp:11:15: error: ‘GFX_AUTODETECT’ was not declared in this scope
example.cpp:11:42: error: ‘set_gfx_mode’ was not declared in this scope
example.cpp:13:10: error: ‘readkey’ was not declared in this scope
example.cpp: At global scope:
example.cpp:18:13: error: expected constructor, destructor, or type conversion at end   of input 
```

我有所有的主要头文件`/usr/include/allegro5`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:57:31.340

您是否检查过这些方法是否确实存在于头文件中？

您似乎使用的是 Allegro 4 API 而不是 Allegro 5：请参阅[http://wiki.allegro.cc/index.php?title=Allegro_5_Tutorial/Displays](http://wiki.allegro.cc/index.php?title=Allegro_5_Tutorial/Displays)

# zip - 可以创建将自身提取到新创建的目录的存档吗？

> ID：12055214
> 
> 赞同：0
> 
> 时间：2012-08-21T12:49:28.047
> 
> 标签：zip, self-extracting

如果可能的话，我想压缩一些文件，当这个 zip 文件的接收者解压缩它（或双击它）时，它会在本地磁盘上创建一个目录并将包含的文件解压缩到该目录。有人可以指出我如何实现这一目标的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:00:06.040

看看这个 WinRar （只是不要将它用于恶意软件！）

[http://www.jackmccarthy.com/malware/WinRAR_Archive_Creation.htm](http://www.jackmccarthy.com/malware/WinRAR_Archive_Creation.htm)

或 WinZip：

[http://kb.winzip.com/kb/entry/88/](http://kb.winzip.com/kb/entry/88/)

甚至是 7zip：

[http://www.wikihow.com/Use-7Zip-to-Create-Self-Extracting-excutables](http://www.wikihow.com/Use-7Zip-to-Create-Self-Extracting-excutables)

# iphone - 在标签栏控制器中使用手势从一个视图移动到另一个视图

> ID：12055215
> 
> 赞同：0
> 
> 时间：2012-08-21T12:49:39.413
> 
> 标签：iphone, xcode

所以我有一个使用右舷的应用程序。我的主要导航是由标签栏控制器完成的。现在我希望能够在一个选项卡中切换多个视图。我知道如何使用导航控制器和按钮来做到这一点，但无法弄清楚如何使用手势......我的构建看起来像这样：

```
 tabbar controlller ->view controller ->some view
    //here i want to use gestures
    tabbar controlller ->view controller->view one->view two 
```

所以我希望能够做出手势并从视图一移动到视图二。

我知道我是新手，但我真的很难找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:01:19.953

你试过什么？您是否设置了手势识别器并在识别手势后以模态方式呈现您的下一个视图？似乎直截了当...

试试这个设置：

识别手势的视图：rootViewController-->tabBarController-->ViewControllerWithGestureRecognizer

识别手势后，弹出 tabbarController 并加载两个视图中的第一个：rootViewController-->firstView

该视图可能有另一个手势识别器，或者以某种方式导航到您的第二个视图或返回到 tabbarController...

# liferay - 如何在 Liferay 中获取全局（公司）组 ID？

> ID：12055216
> 
> 赞同：12
> 
> 时间：2012-08-21T12:49:47.350
> 
> 标签：liferay, global

如何在不访问的情况下获取 Liferay 中的全局（公司）组 ID `ThemeDisplay`？

PS：用`ThemeDisplay`起来很简单：`themeDisplay.getCompanyGroupId()`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T14:16:02.377

`Company`当您的门户中只有一个时：

```
Company company = CompanyLocalServiceUtil.getCompanyByMx(PropsUtil.get(PropsKeys.COMPANY_DEFAULT_WEB_ID));
long globalGroupId = company.getGroup().getGroupId(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T06:36:52.063

扩展黄色的[答案](https://stackoverflow.com/a/12056843/468763)`company`，如果您知道 Portal Instance ( ) 的某些值，您可以找到`Company`：

1.  如果您知道`webId`Portal Instance 的名称，可以`company`通过以下方式找到：

    ```
    String webId = "liferay.com"; // PropsUtil.get(PropsKeys.COMPANY_DEFAULT_WEB_ID)
    Company company = CompanyLocalServiceUtil.getCompanyByWebId(webId);
    long globalGroupId = company.getGroup().getGroupId(); 
    ```

2.  如果您知道`mail-domain`Portal Instance 的名称，可以`company`通过以下方式找到：

    ```
    String mailDomain = "liferay.com";
    Company company = CompanyLocalServiceUtil.getCompanyByMx(mailDomain);
    long globalGroupId = company.getGroup().getGroupId(); 
    ```

3.  如果您知道`virtual host`Portal Instance 的名称，可以`company`通过以下方式找到：

    ```
    String virtualHost = "localhost";
    Company company = CompanyLocalServiceUtil.getCompanyByVirtualHost(virtualHost);
    long globalGroupId = company.getGroup().getGroupId(); 
    ```

[[`CompanyLocalServiceUtil`](https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/service/CompanyLocalServiceUtil.java)对于那些感兴趣的人，还有其他有用的方法可供探索。]

感谢[Yellow](https://stackoverflow.com/users/832497/yellow)的领导，这真的很有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-01T12:05:35.897

您可以使用以下内容：

```
GroupLocalServiceUtil.getCompanyGroup(PortalUtil.getDefaultCompanyId()).getGroupId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-14T08:50:19.647

如果您需要文档库的此信息，您可以使用

```
public static long getDefaultCompanyId(){
        long companyId = 0;
        try{ companyId = getDefaultCompany().getCompanyId(); }
        catch(Exception e){ System.out.println(e.getClass() + " " +e.getMessage()); }
       return companyId;
}

public static long getDefaultGroupId (){

    long companyId = getDefaultCompanyId();
    long globalGroupId = 0L;

    Group group = null;
    try {
        group = GroupLocalServiceUtil.getGroup(companyId, "Guest");
    } catch (PortalException | SystemException e) {
        e.printStackTrace();
        return globalGroupId;
    }
     globalGroupId = group.getGroupId();

    return globalGroupId;
} 
```

# asp.net - 为什么注销/登录后 ServiceConfiguration.GetCurrent 可能会返回空对象引用？

> ID：12055226
> 
> 赞同：0
> 
> 时间：2012-08-21T12:50:41.450
> 
> 标签：asp.net, azure, wif, acs

我有一个 Windows Azure 应用程序，由一个 MVC4 Web 角色和一套服务角色（包括工作角色和 Web）组成，所有这些都是使用 2012 年 6 月的 SDK 构建的。我的 MVC 角色使用 WIF/ACS 和被动重定向来保护。我的服务只能通过内部端点访问，并且不受保护。

使用 WIF/ACS 进行身份验证和授权通常可以正常工作，但有时如果我退出一个帐户，然后从浏览器历史记录中快速返回索引页面，期望被要求再次登录，我反而会看到以下 YSOD：

```
 Object reference not set to an instance of an object.
 Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

 Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

 Source Error:

 An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

 Stack Trace:

 [NullReferenceException: Object reference not set to an instance of an object.]
    Microsoft.IdentityModel.Configuration.ServiceConfiguration.GetCurrent() +123
    Microsoft.IdentityModel.Claims.ClaimsPrincipal.CreateFromHttpContext(HttpContext httpContext, Boolean clientCertificateAuthenticationEnabled) +29
    Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.OnPostAuthenticateRequest(Object sender, EventArgs e) +91
    System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +79
    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +269 
```

起初我以为这可能是 cookie 没有被清除的情况，但令人惊讶的是，整个 MVC 站点似乎都崩溃了，并且在任何浏览器和其他机器上都可以看到这个错误。我发现的唯一解决方法是重新启动角色。

由于被动重定向是在 web.config 中设置的，并且是使用 STS 向导自动应用的，所以我怀疑当我注销用户时我做错了什么。我的注销代码如下所示：

```
public ActionResult CompleteLogOut(Boolean total, String provider = "")
    {
        WSFederationAuthenticationModule fam = FederatedAuthentication.WSFederationAuthenticationModule;
        FormsAuthentication.SignOut();
        fam.SignOut(true);
        if (total)
        {
            provider = @"logout:" + provider;
            return Redirect(ConfigurationManager.AppSettings[provider]);
        }
        else
        {
            return RedirectToAction("Index");
        }
    } 
```

...如果“total”为真，用户将被重定向到其身份提供者的注销页面，[https://accounts.google.com/Logout](https://accounts.google.com/Logout)或[https://login.live.com/login.srf？ wa=wsignout1.0](https://login.live.com/login.srf?wa=wsignout1.0)在我的测试设置中。

我只注意到当我的注销为“完全”时发生的错误，但由于无论如何它是一个间歇性错误，我不能确定这总是正确的。

谷歌搜索错误会引发[this](http://social.technet.microsoft.com/Forums/en/sharepoint2010setup/thread/e30c655f-d41a-4045-b311-4020d4fd97ff)，这似乎并不立即相关，但让我想知道我是否需要在注销后处理 WSFederationAuthenticationModule ？

有没有人遇到过类似的问题，或者有没有人知道问题可能是什么？

**更新**：

“似乎整个 MVC 站点都崩溃了，并且从任何浏览器都可以看到这个错误”——事实上，我认为这是不对的。只有两个不同的用户遇到相同的错误，巧合的是在同一时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:38:15.173

嗯，嗯，我找到了答案，但我不完全理解。

为了跟踪用户，一旦有人开始新会话，我就会在 Global.asax 中设置一个会话变量：

```
 protected void Session_Start()
    {
        HttpContext.Current.Session.Add("MySession", Session.SessionID);
    } 
```

这让 MVC 创建一个会话，因此我可以使用 SessionID 跟踪用户活动（否则 MVC 将为每个请求创建一个新会话）。

如果我在注销时明确处理我的会话，那么上述错误就会消失：

```
 public ActionResult CompleteLogOut(Boolean total, String provider = "")
    {
        var fam = FederatedAuthentication.WSFederationAuthenticationModule;
        Session.Clear();
        Session.Abandon();
        FormsAuthentication.SignOut();
        try
        {
            fam.SignOut(true);
        }
        catch {}
        finally
        {
            try
            {
                fam.Dispose();
                fam = null;
            }
            catch { }
        }
        if (total)
        {
            provider = @"logout:" + provider;
            return Redirect(ConfigurationManager.AppSettings[provider]);
        }
        else
        {
            return Redirect(ConfigurationManager.AppSettings["LoggedOutRedirect"]);
        }
    }
} 
```

如果用户没有从他们的身份提供者那里完全登录，我还需要重定向到我主页的绝对 URI，而不仅仅是重定向到 action 方法。

不知道为什么必须清除和放弃会话才能使 WIF 再次工作。WIF 是否在内部使用会话？也许有人可以提供更多的信息，但无论如何，上面的注销例程都有效，希望将来可以避免其他人与同样的错误搏斗。

# c# - 使用 svcutil 将序列转换为通用列表

> ID：12055229
> 
> 赞同：4
> 
> 时间：2012-08-21T12:51:03.650
> 
> 标签：c#, code-generation, svcutil.exe

我正在尝试使用 svcutil 自动生成一些代码。我在 xsd 中有以下内容：

```
<xs:complexType name="ForsikringstilfelleDetalj">
    <xs:sequence>
        <xs:element name="detaljID" type="xs:string" minOccurs="0" maxOccurs="1"/> 
```

然后我运行以下命令：

```
svcutil xx.wsdl yy.xsd  /ct:System.Collections.Generic.List`1 
```

然后我得到以下 C# 代码：

```
public ForsikringstilfelleDetalj[] forsikringstilfelle 
```

我想要的是：

```
public List<ForsikringstilfelleDetalj> forsikringstilfelle 
```

根据网上的信息 /ct 选项应该告诉 svcutil 使用通用列表进行集合。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:36:09.340

*   要将元数据（包括 xsd 方案）下载到当前目录，请使用：

    ```
    svcutil /t:metadata http://.../.../service?WSDL 
    ```

*   要生成客户端代码，请使用：

    ```
    svcutil *.wsdl *.xsd /language:C# /ct:System.Collections.Generic.List`1 
    ```

    注意：*.wsdl 和 *.xsd 因为可能有很多服务定义和方案。

*   要一步生成客户端代码，请使用：

    ```
    svcutil http://.../.../service?WSDL /ct:System.Collections.Generic.List`1 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-30T18:32:00.457

我可能回答这个问题有点晚了，但我会把它留在这里，以防其他人有同样的问题。

SvcUtil 不生成基于泛型的类的原因是它只支持 DataContract Serializer 而不是 XML Serializer。DataContract Serializer 可能不支持您拥有的 WSDL/XSD。像拥有一个属性（xsd/xml 不是“DataContractAttribute”）这样简单的东西将默认使用 XMLSerializer，因为 DataContracts 不支持属性。

阅读以下：

> “此外，用于引用类型的 /r 和 /ct 开关用于生成数据协定。这些开关在使用 XmlSerializer 时不起作用。”

[https://msdn.microsoft.com/en-us/library/aa347733(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/aa347733(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T16:17:33.063

我无法弄清楚为什么 /ct 开关在我的情况下不能正常工作。希望他们能尽快修复它；同时，我在批处理文件中添加了以下 powershell 命令，以将生成的数组替换为列表：

```
powershell -Command "(gc ServiceRef.cs) -replace 'ForsikringstilfelleDetalj\[\]', 'System.Collections.Generic.List<ForsikringstilfelleDetalj>' | Out-File ServiceRef.cs" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-21T05:28:27.850

`svcutil xx.wsdl yy.xsd /ct:System.Collections.Generic.List`仅当您的返回类型为 List 或泛型类时才有效。检查你的方法的返回类型，看看是否都是通用的。

# c# - 使用 C# 显示图像

> ID：12055231
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:51:13.987
> 
> 标签：c#, asp.net, visual-studio-2010, image

我在 Visual Studio 中做一个项目，用户可以首先看到不同用户上传的所有最新图像。然后当用户单击显示的图像之一时，该图像将显示在另一个页面中，其中包含有关图像的详细信息，例如图像上传的名称和日期。我不知道该怎么做和需要帮助。我正在使用 C# 在 Visual Studios 2010 上执行此操作。这些是我需要知道的：

1.  如何显示上传的最新图片
2.  如何使用图像详细信息显示用户在另一个页面上单击的图像。

我已经有一个数据库，其中将保存图像和图像信息。我不确定如何做其余的事情。我将不胜感激代码示例和示例项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:54:11.357

你应该看看[ASP.NET MVC](http://www.asp.net/mvc/overview)，你可以从[MVC 电影应用教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)开始。然后你将不得不重做它，用图像替换电影......

# scala - Scala 和 Haskell 中的“复合”代数数据类型

> ID：12055236
> 
> 赞同：6
> 
> 时间：2012-08-21T12:51:23.930
> 
> 标签：scala, haskell, algebraic-data-types

在尝试用 Scala 中的代数数据类型描述 Sql 的一部分时，我遇到了创建表示数据类型的根特征的子特征的必要性。由于满足此要求产生了一个我不确定是否可以用 Haskell 的 ADT 表示的代码，并且由于与 Haskell 不同，ADT 不是 Scala 的本机构造，我现在想知道：

1.  我是对的，在 Haskell 中不可能表示一个模型，例如一个`Sql`具有“子类型”的类型，并且在 Haskell`Statement`中有一个构造函数吗？*（似乎**[这](http://www.nt.ntnu.no/users/haugwarb/Programming/OHaskell/o_haskell_tutorial.html#sect4)**可能是相关的）。*`Select`
2.  如果是这样，术语“ADT”是否适用于我生成的代码？
3.  如果是的话，这是否使 Scala 在这方面实际上比 Haskell 更强大？
4.  如果没有，这个功能没有在 Haskell 中实现的原因是什么？这让我觉得我的模型中的事情可能过于复杂

这是我正在谈论的模型：

```
sealed trait Sql

sealed trait Statement 
  extends Sql

sealed case class Union 
  ( left : Statement, 
    right : Statement ) 
  extends Statement

sealed case class Select
  ( /** other fields don't matter **/
    where : Where )
  extends Statement

sealed trait Where 
  extends Sql

sealed case class And
  ( left : Where,
    right : Where )
  extends Where

sealed case class Or
  ( left : Where,
    right : Where )
  extends Where

sealed case class Equals
  ( /** fields don't matter **/ )
  extends Where 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T14:47:55.497

**1.**不，由于您的根特征是密封的，因此**可以**将呈现的层次结构表示为 ADT：

```
data Sql = Statement Statement | Where Where
        --           ^ This is the *type* called `Statement`
        -- ^ This is the *constructor* called `Statement`

data Statement = Union Statement Statement | Select Where

data Where = And Where Where | Or Where Where | Equals 
```

在这种情况下是可能的，因为您可以枚举数据类型的所有“子类”（`Sql`在这种情况下），这使得将它们转换为 ADT 构造函数成为可能。如果您想允许用户任意添加“构造函数”/“子类”，那么将类型层次结构模拟为 ADT 是很困难的。

**2.** ADT 一词永远不适用于 Scala 代码，因为 Scala 在该语言中缺少 ADT。但是，您提供的类的行为类似于 ADT，所以我会说“足够接近”。

**3 & 4.**语言有不同的长处和短处。

Haskell 可以模拟每个 Scala 语言功能，Scala 可以模拟每个 Haskell 功能，因为这两种语言都是图灵完备的，并且允许不同级别的元编程。Haskell 当然有 Template Haskell，它允许模拟任何东西——您可能使用 TH 能够在 Haskell 文件中编写 Scala 代码并将其编译为 Haskell。

Haskell 中不需要对象和继承，Scala 中大多不需要 ADT，因此没有理由将两者进行比较。大多数面向对象的特性也可以用简单的 Haskell 类型类和数据类型以及使用模块边界来模拟。ADT 可以在 Scala 中用案例类来模拟，而 Haskell 类型的类可以用隐式参数和隐式对象实例来模拟。

但是，我想说的是，在 Haskell 中模拟某些 Scala 功能通常更容易，因为 Haskell 允许比 Scala 更多的“隐式语言扩展”。我的意思是，如果你想`Monad`在 Scala 中模拟 Haskell s，你必须在使用 s 的部分编写大量代码`Monad`，而如果你想模拟，比如说，Scala 的定界延续或 Haskell 中的隐式参数, 你可以简单地写一个`Monad`实例（用于延续）或多参数类型类（用于隐式参数）一次，您稍后在实际函数中编写的代码看起来非常接近 Scala 代码，没有太多样板。Scala 的许多高级功能（如果不是大部分的话）也确实源自 Haskell 或 OCaml，因此它们已经存在并且不需要翻译。

换句话说：添加新功能所需的复杂代码只需在 Haskell 中的一个位置添加，之后它可以很容易地在多个位置使用，而您通常必须在您的任何地方添加大量“噪音”如果您想模拟 Haskell 功能，请使用 Scala 代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T14:55:05.063

您可以在 Haskell 中模仿 Scala 设计，尽管 Haskell 鼓励使用限定类型和求和类型而不是 Scala 的继承和子类型。摆脱我对 Scala 的有限知识，我在下面的 Haskell 中写了同样的东西。

*   特征是类
*   案例类是 ADT
*   特征继承是类成员
*   特征类型成员是有界存在类型
*   类`Typeable`用于向下转换

```
-- Define traits
class Typeable a => Sql a
class (Typeable a, Sql a) => Statement a
class (Typeable a, Sql a) => Where a

-- Define case classes
data Union  where Union     :: (Statement a, Statement b) => a -> b -> Union deriving (Typeable)
data Select where Select    :: Where a => a -> Select                        deriving (Typeable)          

data And    where And       :: (Where a, Where b) => a -> b -> And           deriving (Typeable)
data Or     where Or        :: (Where a, Where b) => a -> b -> Or            deriving (Typeable)
data Equals where Equals    :: Equals                                        deriving (Typeable)

-- Define subtyping
instance Sql Union
instance Statement Union
instance Sql Select
instance Statement Select
instance Sql And
instance Where And
instance Sql Or
instance Where Or
instance Sql Equals
instance Where Equals 
```

在 Haskell 中，您可能会使用 sum 类型而不是`Statement`and`Where`类。

```
class Sql a
instance Sql Statement
instance Sql Where

data Statement = Union Statement Statement | Select Where
data Where = And Where Where | Or Where Where | Equals 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T00:18:10.273

问题 4 的一种可能答案：

Haskell 的类型推断（Hindley-Milner）在存在继承时会出现问题，因此 Scala 具有继承，但类型推断器的功能较弱。

# php - 无法使用 PDO 将值插入 MSSQL

> ID：12055238
> 
> 赞同：1
> 
> 时间：2012-08-21T12:51:27.033
> 
> 标签：php, sql-server, pdo

我正在使用 PDO 从 PHP 代码与我的数据库进行通信，并且我有以下代码：

```
$sql = "SELECT <Column> FROM <tablename>"; 
```

它适用于我的 mssql 数据库，但是当我尝试将一些数据插入其中时

```
$sql = "INSERT INTO <tablename> ( <Column> ) VALUES ( '1' )"; 
```

它失败。

为什么？

这很有趣，但是当我从我的 SQL Server Management Studio 运行该代码时 - 它可以工作。我无法得到它...

我得到的错误是：

> > SQLSTATE [HY000]：一般错误：515 一般 SQL Server 错误：检查来自 SQL Server [515]（严重性 16）[（null）] 的消息

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:54:44.273

**解释**

如果在插入或更新不允许空值的列时尝试使用空值，则会在运行时发生此错误。

**行动**

如果在运行 UPDATE 或 INSERT 语句时发生此错误，请验证插入或更新的数据是否与受影响表的列定义匹配。

插入或更新列不允许空值。

检查这个：[http](http://www.lcard.ru/~nail/sybase/error/3742.htm) ://www.lcard.ru/~nail/sybase/error/3742.htm或这个：[http://technet.microsoft.com/en-us/library/aa258724(v=sql.100) .aspx](http://technet.microsoft.com/en-us/library/aa258724(v=sql.100).aspx)

# language-agnostic - 如何仅使用位移和逻辑 opr 将 unsigned int 递增 1？

> ID：12055240
> 
> 赞同：4
> 
> 时间：2012-08-21T12:51:41.543
> 
> 标签：language-agnostic, bit-shift

我的作业/项目中有一个问题，仅使用*位移*和*逻辑运算符*将 1 添加到无符号整数。函数中不应有任何“+”、“-”、“*”或“/”符号。

我从最后几天开始尝试，但还没有成功。到目前为止，我已经尝试了以下方法：

```
int A = (((B&C)<<1)^(B^C)) 
```

谁能帮我解决这个问题。？

你可以用任何编程语言帮助我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T12:56:50.730

```
unsigned int i = ...;
unsigned int mask = 1;
while (i & mask)
{
    i &= ~mask;
    mask <<= 1;
}
i |= mask; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T12:58:52.590

爪哇：

```
public static int inc(int i){
        if ((i & 1) == 0)
            return i | 1;
        else 
            return inc(i>>1)<<1;
    } 
```

PS while [henrik](https://stackoverflow.com/users/148897/henrik)的循环变体显然更快

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-23T09:52:01.570

试试这个：

```
int n = 3;
n = abs(~n);
std::cout << n; 
```

`~n = -(n+1)`[`~`用于按位补码]。`(n + 1)`是由于在 2 的补码转换中加了 1。

`(x + 1)`再次获得应用否定。因此，最终表达式变为`abs(~x)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:07:51.367

在不使用算术运算符的情况下自增的逻辑（`+, -. * and /`）

```
unsinged int no = 3; //actual number
unsigned int one = 1;
unsigned int ans = 0;
unsigned int carry = 0;
unsigned int prev_ans = 0;
unsigned int prev_carry = 0;

ans = no ^ one;
carry = no & one;

while (carry != 0)
{
   carry <<= 1;

   prev_ans = ans;
   prev_carry = carry;

   ans = prev_ans ^ prev_carry;
   carry = prev_ans & prev_carry;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T07:28:17.080

Google for **Full Adder**并尝试实现一个。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-21T22:52:39.310

这太容易了，例如在 Haskell 中：

```
data Unsigned = Zero | Succ Unsigned
increment :: Unsigned -> Unsigned
increment u = Succ u 
```

没有位或算术运算符，根本没有运算符！

# magento - Magento - 客户地址国家下拉问题

> ID：12055241
> 
> 赞同：4
> 
> 时间：2012-08-21T12:51:42.900
> 
> 标签：magento, admin, magento-1.7, country, street-address

我正在使用 Magento CE 1.7.0.2，最近从 1.4.2.0 升级。在后端编辑/创建客户地址时，国家下拉字段为空白 - 没有可供选择的选项。它也不适用于前端地址下拉列表。

任何导致这种情况的想法，我能找到的唯一代码提示是：“this.defaultCountries = [false,false];” 在页面上的 JS 中，而在新的 Magento 安装（相同版本，相同的默认国家/地区）上显示： this.defaultCountries = ['GB','GB'];

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-30T20:51:25.490

我们遇到了类似的问题，但我们的问题在一切正常运行后开始发生。

我们发现，在 core_config_data 表中，出于某种原因，其中出现了一个带有“general”路径的条目（后面什么都没有，或者可能是“/general/”）......

关键是，由于它是最后的条目之一，Magento 将其视为在它构建的 core_config 中创建（在这种情况下覆盖）XML 节点“一般”，基本上清除了 XML 对象该分支中的所有其他数据。

如果您在表中找到此条目，则应备份该表（始终保持安全），并删除该条目。然后清除缓存，您应该会发现一切恢复正常。

我们从未确定该条目是如何存在于表中的，但这对我们来说是解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:43:38.393

在您的带领下，我确保我需要的所有国家/地区在默认和网站范围内都可用，并且选项出现在管理员中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T10:58:00.770

您需要进入**系统 > 配置 > 常规 > 允许国家**/地区并包括您要在管理员中显示的国家/地区。然后，您选择的国家/地区的下拉菜单应正确显示。

我希望它能解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T22:32:20.047

在字段 'path' 中搜索表 'core_config_data' 删除具有值 'general' 的行，如果它存在的话。然后它将起作用

# list - SWI-Prolog，首先删除一个元素然后反转结果列表

> ID：12055249
> 
> 赞同：1
> 
> 时间：2012-08-21T12:52:10.763
> 
> 标签：list, prolog

我目前正忙于这个问题——它让我发疯。我是 Prolog 的新手，所以我仍然了解基础知识。从标题中，我要做的就是从列表中删除一个元素，然后从该结果列表中反转它。

到目前为止，我对如何在不同列表上分别执行这些功能进行了一些研究，但我不知道如何在单个列表上执行它们（删除然后反转）。

我的反向和删除如下：

```
reverse(List, RevList) :-
    reverselist(List, [], RevList).
reverselist([], RevList, RevList).
reverselist([E|Elements], Accu, RevList) :-
    reverselist(Elements, [E|Accu], RevList).

del(Element, [Element|Tail], Tail).
del(Element, [Y|Tail], [Y|Tail1]) :-
    del(Element, Tail, Tail1). 
```

我的尝试：

```
delete_reverse(Element, [Element|Tail], Tail1) :-
    // no idea what im doing below..
    del(Element, Tail, Tail1),
    reverse(Tail1, Tail). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:59:41.437

首先，您`del`缺少一个基本案例：

```
del(_,[],[]). 
```

然后，您`delete_reverse`几乎是对的：您应该使用不同的变量名来统一 的结果`del`和输入`reverse`：

```
delete_reverse(Element, [Element|Tail], Tail1) :-
    del(Element, Tail, Temp),
    reverse_family(Temp, Tail1). 
```

# ruby-on-rails - erb 中的图像管理和 if 语句

> ID：12055258
> 
> 赞同：0
> 
> 时间：2012-08-21T12:52:43.837
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, image

考虑这个

```
if params['image'].nil? 
```

1.  在 html 的情况下，我使用了上面的方法并检查了文件的存在，因此我相应地更改了路径。我如何在erb中检查它？

2.  我的代码中有一个`<%= f.file_field :IMAGE %>`，当我单击提交按钮时，我必须将图像存储在数据库中并使用它，或者我想将图像存储在文件中并将路径存储在数据库中，以便稍后显示图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:56:45.977

您应该查看一些宝石，例如[Paperclip](https://github.com/thoughtbot/paperclip)或[Carrierwave](https://github.com/jnicklas/carrierwave)，以及[Paperclip](http://railscasts.com/episodes/134-paperclip)的[Railscast 和 Carrierwave](http://railscasts.com/episodes/253-carrierwave-file-uploads)的 Railscast 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:04:19.727

1）您可以检查是否`params['image']`为 nil，您只需遵循最佳实践将其存储在我将调用的实例中，尽​​管`@image`您可以成为特立独行者并`params['image']`根据需要使用。

```
<% unless @image.nil? %>
  <!-- Code here -->
<% end %> 
```

或者

```
<% if @image.nil? %>
  <!-- Code here -->
<% else %>
  <!-- Code here -->
<% end %> 
```

2）您可以使用宝石来支持您，例如[**Dragonfly**](https://github.com/markevans/dragonfly)或[**Paperclip**](https://github.com/thoughtbot/paperclip)。检查此[回形针 vs Carrierwave vs Dragonfly 的问题](https://stackoverflow.com/questions/7419731/rails-3-paperclip-vs-carrierwave-vs-dragonfly-vs-attachment-fu)！

# quartz.net - quartz.net：如何在运行时添加和删除作业

> ID：12055260
> 
> 赞同：2
> 
> 时间：2012-08-21T12:52:49.390
> 
> 标签：quartz.net

我正在使用 Windows 服务在 Spring.NET 集成的帮助下运行 Quartz.NET 作业。

我面临以下两个问题：

1.  我不断地添加/删除工作（为新的业务对象使用新的 spring.net 配置）。这意味着我每次都需要停止 Windows 服务和正在运行的作业。

2.  此外，这些作业需要很长时间才能执行，因此最好让多台服务器分别执行我在一个中心位置配置的作业。

你会如何建议实现这 2 个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:23:51.070

AFAIK 如果不编写代码以将调度程序加载到单独的应用程序域中，然后自己管理应用程序域，就无法做到 #1。这在 Quartz.Net 发行版中不可用，所以你必须自己做。

对于第 2 项，您可以设置集群石英服务器，这将解决该问题。您将需要使用数据库存储来设置要集群的调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:56:23.020

如果您不想设置石英集群服务器，另一个建议是推出您自己的基于简单队列的架构。拥有一个轻量级调度程序服务，将您的作业推送到一个队列（AWS/Azure 队列运行良好），然后是一个可以使用这些作业的工作人员池。我在更改石英计划时遇到了类似的问题，并且发现当我不必担心在石英线程中运行的长时间运行的进程时管理石英更容易。如果您确实需要在请求更改后停止工作，这可能对您不起作用。

# architecture - 只能由一项服务处理的项目

> ID：12055262
> 
> 赞同：4
> 
> 时间：2012-08-21T12:53:01.327
> 
> 标签：architecture, cqrs

您将如何解决 CQRS 架构中的以下问题：

1.  有一个名为 Order 的域实体。
2.  需要处理订单。
3.  新创建的订单未处理并在处理队列中
4.  每个订单不得多次处理。
5.  有多个 Windows 服务可以查询（读取事物的一面）以获取未处理的订单。

现在，我如何确保每个订单仅由一项服务处理？

我会让服务发出一个 Command `StartOrderProcessing(order)`。如果由于版本不同，另一个服务已经开始处理此订单，则此命令将在域中失败。
但是，由于命令本质上是异步的，服务如何知道失败？

服务是否应该轮询读取模型以查看订单是否将其状态更改为正在处理？但是，由于它自己的命令而不是因为另一个服务的命令而改变了状态，该服务将如何改变状态？

* * *

UL：

*   订单：我系统中的订单代表用户请求更新他/她邮箱上的问候语。
*   信箱：当您拨打手机且未接听电话时，您将被重定向到信箱留言
*   问候语：当您到达邮箱时，您会收到一条短信，告诉您在哔声后留言。此文本（不是您的消息！）是问候语。
*   激活：在邮箱中设置新问候语的过程称为激活。正在激活问候语。
*   运营商：提供手机服务的公司，例如 T-Mobile。

处理订单的步骤：

1.  从预先录制的声音位创建问候语。这取决于邮箱关联的运营商。
2.  执行运营商特定的工作流程以激活邮箱上的问候语。此工作流程具有以下元素：

    2.1。调用邮箱
    2.2。使用 DTMF 音
    2.3 导航邮箱菜单。识别邮箱发送的某些音频元素（如确认蜂鸣声）
    2.4。播放在 1 中创建的问候语

    该工作流被定义为 Windows Workflow Foundation 工作流，因为每个运营商的工作流都不同。

3.  成功时：

    3.1。保存激活呼叫的录音
    3.2。通过邮件通知用户成功

4.  出错时：

    4.1。保存失败的激活呼叫和失败原因的记录
    4.2。如果这是第一次尝试，请安排 Order 在 X 分钟内重试
    4.3。如果这是第二次尝试，请通过邮件通知用户失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:41:51.930

首先，您需要整理出队，以便只有一个服务实例可以出队并处理订单。看看这个：[http ://www.eaipatterns.com/CompetingConsumers.html](http://www.eaipatterns.com/CompetingConsumers.html)

例如，NServiceBus 为您提供了开箱即用的功能。

然后您可能想考虑您的订单处理。**StartOrderProcessing**对我来说听起来不像是一个商业步骤。处理订单的真正步骤是什么？

订单的处理实际上可能是一个有限状态机。它有一个入口点和一个或多个退出条件。

看一下 saga 概念，其中聚合可以通过状态机并收集可以发送到域或其他有界上下文的信息，以便让他们做出决策，进而推动 saga 向前发展。

看看这个：[https ://github.com/haf/Documently/wiki/Sagas-SnowPloughExample](https://github.com/haf/Documently/wiki/Sagas-SnowPloughExample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:05:15.090

听起来 和 之间不仅有区别，而且`Order`有区别。也许这些应该单独建模以反映领域。这不仅可以优化域模型，还可以帮助简化您的问题。`UnprocessedOrder``ProcessedOrder`

# c# - 适用于 Windows 8 的简单数据库

> ID：12055266
> 
> 赞同：2
> 
> 时间：2012-08-21T12:53:08.977
> 
> 标签：c#, database, windows, sqlite, windows-8

我正在寻找与 Metro 应用程序兼容的简单数据库。我认为 sqlite 可以，但我必须支持所有 windows8 版本。这个问题有很好的解决方案还是我必须使用一些txt文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:50:07.633

您应该考虑使用 Windows 存储。[http://msdn.microsoft.com/en-us/library/windows/apps/br227346.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br227346.aspx) http://msdn.microsoft.com/en-us/library/windows/apps/br230302%28v=vs.110 %29.aspx#storage

如果您有 Windows Phone 7 的经验，那么它与独立存储没有什么不同。

这里有详细的其他选项：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee663264 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663264(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:06:20.753

我们使用 IndexedDB。在此处查找更多信息：[https ://developer.mozilla.org/en-US/docs/IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)

# ios5 - MPMoviePlayerController 是否可以在 ios 上播放 ts 流？

> ID：12055273
> 
> 赞同：0
> 
> 时间：2012-08-21T12:53:20.987
> 
> 标签：ios5, avfoundation, http-live-streaming

这是我的代码：

```
MPMoviePlayerController *moviePlayer;
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://127.0.0.1:8080/m3u8/test.ts"]]; 
```

它不能工作，我通过m3u8-segmenter将它分段到test.m3u8，它可以播放。

我想知道，如何在ios上播放ts流？

# xml - 用于 Linux 的开源命令行工具，用于区分 XML 文件，忽略元素顺序

> ID：12055278
> 
> 赞同：12
> 
> 时间：2012-08-21T12:53:30.987
> 
> 标签：xml, sorting, command-line, open-source, diff

是否有开源命令行工具（适用于 Linux）来区分忽略元素顺序的 XML 文件？

示例输入文件`a.xml`：

```
<tag name="AAA">
  <attr name="b" value="1"/>
  <attr name="c" value="2"/>
  <attr name="a" value="3"/>
</tag>

<tag name="BBB">
  <attr name="x" value="111"/>
  <attr name="z" value="222"/>
</tag>
<tag name="BBB">
  <attr name="x" value="333"/>
  <attr name="z" value="444"/>
</tag> 
```

`b.xml`：

```
<tag name="AAA">
  <attr name="a" value="3"/>
  <attr name="b" value="1"/>
  <attr name="c" value="2"/>
</tag>

<tag name="BBB">
  <attr name="z" value="444"/>
  <attr name="x" value="333"/>
</tag>
<tag name="BBB">
  <attr name="x" value="111"/>
  <attr name="z" value="222"/>
</tag> 
```

所以比较这两个文件不应该输出任何差异。我尝试先使用 XSLT 对文件进行排序：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" encoding="WINDOWS-1252" omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*">
        <xsl:sort select="@*" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

但问题是元素`<tag name="BBB">`没有排序。它们只是按照输入的顺序输出。

我已经看过`diffXml`, `xDiff`, `XMLUnit`，`xmlstarlet`但是这些都不能解决问题；diff 输出应该是人类可读的，例如使用`diff`.

关于如何解决排序或忽略元素顺序差异的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-02T17:20:59.313

我有一个类似的问题，我最终发现：[https ://superuser.com/questions/79920/how-can-i-diff-two-xml-files](https://superuser.com/questions/79920/how-can-i-diff-two-xml-files)

那篇文章建议做一个规范的 xml 排序然后做一个差异。因为你在 linux 上，所以这应该很适合你。它在我的 mac 上对我有用，如果他们安装了 cygwin 之类的东西，它应该适用于 windows 上的人：

```
$ xmllint --c14n a.xml > sortedA.xml
$ xmllint --c14n b.xml > sortedB.xml
$ diff sortedA.xml sortedB.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:51:56.453

First your XML examples are not valid, because they lack a root element. I added a root element. This is `a.xml`:

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <tag name="AAA">
        <attr name="b" value="1"/>
        <attr name="c" value="2"/>
        <attr name="a" value="3"/>
    </tag>
    <tag name="BBB">
        <attr name="x" value="111"/>
        <attr name="z" value="222"/>
    </tag>
    <tag name="BBB">
        <attr name="x" value="333"/>
        <attr name="z" value="444"/>
    </tag>
</root> 
```

And this is `b.xml`:

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <tag name="AAA">
        <attr name="a" value="3"/>
        <attr name="b" value="1"/>
        <attr name="c" value="2"/>
    </tag>
    <tag name="BBB">
        <attr name="z" value="444"/>
        <attr name="x" value="333"/>
    </tag>
    <tag name="BBB">
        <attr name="x" value="111"/>
        <attr name="z" value="222"/>
    </tag>
</root> 
```

You can create a canonical form for the comparison by merging the siblings with the same name attribute and sorting by the tag name and the value.

In order to merge the sibling elements with the same name you have to ignore the elements which name is the same like a preceding sibling and take the remaining. This can be done on the second element level by the following Xpath:

```
*[not(@name = preceding-sibling::*/@name)] 
```

You have to take the name of those elements in order to select all the child elements which have a parent with this name. After that you have to sort by name and value. This makes it possible to transform both files into this canonical form:

```
<?xml version="1.0" encoding="WINDOWS-1252"?>
<root>
    <tag name="AAA">
        <attr name="a" value="3"/>
        <attr name="b" value="1"/>
        <attr name="c" value="2"/>
    </tag>
    <tag name="BBB">
        <attr name="x" value="111"/>
        <attr name="x" value="333"/>
        <attr name="z" value="222"/>
        <attr name="z" value="444"/>
    </tag>
</root> 
```

This will do the transformation:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="WINDOWS-1252" omit-xml-declaration="no" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/root">
        <xsl:copy>
                <xsl:copy-of select="@*"/>
                <xsl:for-each select="*[not(@name = preceding-sibling::*/@name)]">
                    <xsl:variable name="name" select="@name"/>
                    <xsl:copy>
                        <xsl:copy-of select="@*"/>
                        <xsl:for-each select="../*[@name = $name]/*">
                            <xsl:sort select="@name"/>
                            <xsl:sort select="@value"/>
                            <xsl:copy>
                                <xsl:copy-of select="@*"/>
                            </xsl:copy>
                        </xsl:for-each>
                    </xsl:copy>
                </xsl:for-each>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T02:58:53.570

您必须编写自己的解释器来进行预处理。XSLT 是一种方法……也许吧；我不是 XSLT 方面的专家，我不确定您是否可以使用它进行排序。

这是一个快速而肮脏的 perl 脚本，它可以做你想做的事。请注意，使用真正的 XML 解析器要明智得多。我对任何一个都不熟悉，所以我让你接触我自己写它们的可怕做法。注意评论；你被警告了。

```
#!/usr/bin/perl

use strict;
use warnings;

# NOTE: general wisdom - do not use simple homebrewed XML parsers like this one!
#
# This makes sweeping assumptions that are not production grade.  Including:
#   1\. Assumption of one XML tag per line
#   2\. Assumption that no XML tag contains a greater-than character
#      like <foo bar="<oops>" />
#   3\. Assumes the XML is well-formed, nothing like <foo><bar>baz</foo></bar>

# recursive function to parse each tag.
sub parse_tag {
  my $tag_name = shift;
  my @level = (); # LOCAL: each recursive call has its OWN distinct @level
  while(<>) {
    chomp;

    # new open tag:  match new tag name, parse in recursive call
    if (m"<\s*([^\s/>]+)[^/>]*>") {
      push (@level, "$_\n" . parse_tag($1) );

    # close tag, verified by name, or else last line of input
    } elsif (m"<\s*/\s*$tag_name[\s>]"i or eof()) {
      # return all children, sorted and concatenated, then the end tag
      return join("\n", sort @level) . "\n$_";

    } else {
      push (@level, $_);
    }
  }
  return join("\n", sort @level);
}

# start with an impossible tag in case there is no root
print parse_tag("<root>"); 
```

将其另存为`xml_diff_prep.pl`，然后运行：

```
$ diff -sq <(perl xml_diff_prep.pl a.xml) <(perl xml_diff_prep.pl b.xml)
Files /proc/self/fd/11 and /proc/self/fd/12 are identical 
```

（我使用`-s`and`-q`标志是明确的。您可以使用 gvimdiff 或您喜欢的任何其他实用程序或标志。注意它通过文件描述符识别文件；那是因为我使用 bash 技巧在每个输入上运行预处理器命令。他们'将按照您指定的顺序。请注意，由于此问题要求的排序，内容可能位于意外位置。）

为了满足您对“开源”“命令行工具”的要求，我特此根据[Beerware](https://en.wikipedia.org/wiki/Beerware)许可证（BSD 2-clause，如果您认为值得，欢迎您给我买啤酒）将此代码作为开源发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:44:12.520

您正在请求根据正在排序的元素中的属性序列进行排序。但是您在这里的顶级`tag`元素只有一个属性：`name`. 如果您希望多个`tag`元素`name="BBB"`以不同的方式排序，则需要为它们提供不同的排序键。

在你的例子中，我会尝试类似的东西`select="concat(name(), @name, name(*[1]), *[1]/@name)"`——但这是一个非常浅的键。它使用输入中第一个孩子的值，但孩子可能会在此过程中移动位置。您可能能够（比我更了解您的数据）在一次传递中为每个元素计算一个好的键，或者您可能只需要几次传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-18T19:07:43.063

如果你想把它带到任意程度，你可以实现一些东西，将两棵树一起走，并决定两个文档之间哪些元素“匹配”。这会让你以任何你想要的方式实现匹配逻辑。这是 xslt 2.0 中的一个示例：

```
<xsl:stylesheet version="2.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"

                xmlns:set="http://exslt.org/sets"

                xmlns:primary="primary"
                xmlns:control="control"

                xmlns:util="util"

                exclude-result-prefixes="xsl xs set primary control">

    <xsl:output method="text"/>

    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:call-template name="compare">
            <xsl:with-param name="primary" select="*/*[1]"/><!-- first child of root element, for example -->
            <xsl:with-param name="control" select="*/*[2]"/><!-- second child of root element, for example --> 
        </xsl:call-template>
    </xsl:template>

    <!-- YOUR SPECIFIC OVERRIDES -->

    <xsl:template match="attr" mode="find-match" as="element()?">
        <xsl:param name="candidates" as="element()*"/>
        <!-- attr matches by @name and @value -->
        <xsl:sequence select="$candidates[@name = current()/@name][@value = current()/@value][1]"/>
    </xsl:template>

    <xsl:template match="tag" mode="find-match" as="element()?">
        <xsl:param name="candidates" as="element()*"/>
        <xsl:variable name="attrs" select="attr"/>
        <!-- tag matches if @name matches and attr counts (matched and unmatched) match -->
        <xsl:sequence select="$candidates[@name = current()/@name]
                                         [count($attrs) = count(util:find-match($attrs, attr))]
                                         [count($attrs) = count(attr)][1]"/>
    </xsl:template>

    <xsl:function name="util:find-match">
        <xsl:param name="this"/>
        <xsl:param name="candidates"/>
        <xsl:apply-templates select="$this" mode="find-match">
            <xsl:with-param name="candidates" select="$candidates"/>
        </xsl:apply-templates>
    </xsl:function>

    <!-- END SPECIFIC OVERRIDES -->

    <!-- compare "primary" and "control" elements -->
    <xsl:template name="compare">
        <xsl:param name="primary"/>
        <xsl:param name="control"/>

        <xsl:variable name="diff">
            <xsl:call-template name="match-children">
                <xsl:with-param name="primary" select="$primary"/>
                <xsl:with-param name="control" select="$control"/>
            </xsl:call-template>
        </xsl:variable>

        <xsl:choose>
            <xsl:when test="$diff//*[self::primary:* | self::control:*]">
                <xsl:text>FAIL</xsl:text><!-- or do something more sophisticated with $diff... -->
            </xsl:when>
            <xsl:otherwise>
                <xsl:text>PASS</xsl:text>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- default matching template for elements

         for context node (from "primary"), choose from among $candidates (from "control") which one matches

         (for "complex" elements, name has to match, for "simple" elements, name and value do)

         (override with more specific match pattern if desired)
         -->
    <xsl:template match="*" mode="find-match" as="element()?">
        <xsl:param name="candidates" as="element()*"/>
        <xsl:choose>
            <xsl:when test="text() and count(node()) = 1">
                <xsl:sequence select="$candidates[node-name(.) = node-name(current())][text() and count(node()) = 1][. = current()][1]"/>
            </xsl:when>
            <xsl:when test="not(node())">
                <xsl:sequence select="$candidates[node-name(.) = node-name(current())][not(node())][1]"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:sequence select="$candidates[node-name(.) = node-name(current())][1]"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- default matching template for attributes

         for context attr (from "primary"), choose from among $candidates (from "control") which one matches

         (name and value have to match)

         (override with more specific match pattern if desired)
         -->
    <xsl:template match="@*" mode="find-match" as="attribute()?">
        <xsl:param name="candidates" as="attribute()*"/>
        <xsl:sequence select="$candidates[. = current()][node-name(.) = node-name(current())][1]"/>
    </xsl:template>

    <!-- default primary-only template (override with more specific match pattern if desired) -->
    <xsl:template match="@* | *" mode="primary-only">
        <xsl:apply-templates select="." mode="illegal-primary-only"/>
    </xsl:template>

    <!-- write out a primary-only diff -->
    <xsl:template match="@* | *" mode="illegal-primary-only">
        <primary:only>
            <xsl:copy-of select="."/>
        </primary:only>
    </xsl:template>

    <!-- default control-only template (override with more specific match pattern if desired) -->
    <xsl:template match="@* | *" mode="control-only">
        <xsl:apply-templates select="." mode="illegal-control-only"/>
    </xsl:template>

    <!-- write out a control-only diff -->
    <xsl:template match="@* | *" mode="illegal-control-only">
        <control:only>
            <xsl:copy-of select="."/>
        </control:only>
    </xsl:template>

    <!-- assume primary (context) element and control element match, so render the "common" element and recurse -->
    <xsl:template match="*" mode="common">
        <xsl:param name="control"/>

        <xsl:copy>
            <xsl:call-template name="match-attributes">
                <xsl:with-param name="primary" select="@*"/>
                <xsl:with-param name="control" select="$control/@*"/>
            </xsl:call-template>

            <xsl:choose>
                <xsl:when test="text() and count(node()) = 1">
                    <xsl:value-of select="."/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:call-template name="match-children">
                        <xsl:with-param name="primary" select="*"/>
                        <xsl:with-param name="control" select="$control/*"/>
                    </xsl:call-template>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:copy>

    </xsl:template>

    <!-- find matches between collections of attributes in primary vs control -->
    <xsl:template name="match-attributes">
        <xsl:param name="primary" as="attribute()*"/>
        <xsl:param name="control" as="attribute()*"/>
        <xsl:param name="primaryCollecting" as="attribute()*"/>

        <xsl:choose>
            <xsl:when test="$primary and $control">
                <xsl:variable name="this" select="$primary[1]"/>
                <xsl:variable name="match" as="attribute()?">
                    <xsl:apply-templates select="$this" mode="find-match">
                        <xsl:with-param name="candidates" select="$control"/>
                    </xsl:apply-templates>
                </xsl:variable>

                <xsl:choose>
                    <xsl:when test="$match">
                        <xsl:copy-of select="$this"/>
                        <xsl:call-template name="match-attributes">
                            <xsl:with-param name="primary" select="subsequence($primary, 2)"/>
                            <xsl:with-param name="control" select="remove($control, 1 + count(set:leading($control, $match)))"/>
                            <xsl:with-param name="primaryCollecting" select="$primaryCollecting"/>
                        </xsl:call-template>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:call-template name="match-attributes">
                            <xsl:with-param name="primary" select="subsequence($primary, 2)"/>
                            <xsl:with-param name="control" select="$control"/>
                            <xsl:with-param name="primaryCollecting" select="$primaryCollecting | $this"/>
                        </xsl:call-template>
                    </xsl:otherwise>
                </xsl:choose>

            </xsl:when>
            <xsl:otherwise>
                <xsl:if test="$primaryCollecting | $primary">
                    <xsl:apply-templates select="$primaryCollecting | $primary" mode="primary-only"/>
                </xsl:if>
                <xsl:if test="$control">
                    <xsl:apply-templates select="$control" mode="control-only"/>
                </xsl:if>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- find matches between collections of elements in primary vs control -->
    <xsl:template name="match-children">
        <xsl:param name="primary" as="node()*"/>
        <xsl:param name="control" as="element()*"/>

        <xsl:variable name="this" select="$primary[1]" as="node()?"/>

        <xsl:choose>
            <xsl:when test="$primary and $control">
                <xsl:variable name="match" as="element()?">
                    <xsl:apply-templates select="$this" mode="find-match">
                        <xsl:with-param name="candidates" select="$control"/>
                    </xsl:apply-templates>
                </xsl:variable>

                <xsl:choose>
                    <xsl:when test="$match">
                        <xsl:apply-templates select="$this" mode="common">
                            <xsl:with-param name="control" select="$match"/>
                        </xsl:apply-templates>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:apply-templates select="$this" mode="primary-only"/>
                    </xsl:otherwise>
                </xsl:choose>
                <xsl:call-template name="match-children">
                    <xsl:with-param name="primary" select="subsequence($primary, 2)"/>
                    <xsl:with-param name="control" select="if (not($match)) then $control else remove($control, 1 + count(set:leading($control, $match)))"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$primary">
                <xsl:apply-templates select="$primary" mode="primary-only"/>
            </xsl:when>
            <xsl:when test="$control">
                <xsl:apply-templates select="$control" mode="control-only"/>
            </xsl:when>
        </xsl:choose>

    </xsl:template>

</xsl:stylesheet> 
```

应用于本文档（基于您的测试用例），结果为`PASS`：

```
<test>
  <root>
    <tag name="AAA">
      <attr name="b" value="1"/>
      <attr name="c" value="2"/>
      <attr name="a" value="3"/>
    </tag>
    <tag name="BBB">
      <attr name="x" value="111"/>
      <attr name="z" value="222"/>
    </tag>
    <tag name="BBB">
      <attr name="x" value="333"/>
      <attr name="z" value="444"/>
    </tag>
  </root>
  <root>
    <tag name="AAA">
      <attr name="a" value="3"/>
      <attr name="b" value="1"/>
      <attr name="c" value="2"/>
    </tag>
    <tag name="BBB">
      <attr name="z" value="444"/>
      <attr name="x" value="333"/>
    </tag>
    <tag name="BBB">
      <attr name="x" value="111"/>
      <attr name="z" value="222"/>
    </tag>
  </root>
</test> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-27T14:47:34.580

从您的示例来看，您似乎只关心元素内的重新排序元素，而不关心元素本身的重新排序。如果是这样，那么（正如之前的受访者所说）您需要使用排序，但在元素上，而不是元素或属性上。

许多人会发现将 XML 元素命名为“tag”和/或“attr”会让人感到困惑，因为这些术语已经在 XML 中具有特定含义——这可能有助于尝试按“@*”而不是对元素进行排序？

如果你的结构真的和你的例子一样，一个更“XML-ish”的表示将是：

```
<AAA b="1" c="2" a="3" />
<BBB x="111" z="222" />
<BBB x="333" z="444" /> 
```

更加紧凑，避免了术语冲突，并根据定义使属性与顺序无关——这意味着任何现成的 XML diff 实用程序都将获得您想要的效果，或者您可以转换为规范的 XML 和使用常规差异。

# javascript - OO javascript - 构造函数中自执行函数的上下文/范围

> ID：12055282
> 
> 赞同：4
> 
> 时间：2012-08-21T12:53:38.690
> 
> 标签：javascript

在构造函数中使用自执行匿名函数时，我有一个关于上下文/范围的快速问题。

观察以下工作代码：

```
function Foo() {
    this.height = 10;
    this.width = 10;
    this.init = function() {
        this.create();
    };
    this.create = function() {
        alert('test');
    };
} 

var span1 = new Foo();
span1.init(); 
```

警报按预期显示。但是，我不想在底部调用 span1.init 。我宁愿让构造函数中的初始化函数自动执行。这会给我如下代码：

```
function Foo() {
    this.height = 10;
    this.width = 10;
    this.init = (function() {
        this.create();
    })();
    this.create = function() {
        alert('test');
    };
} 

var span1 = new Foo(); 
```

然而，经过一些谷歌搜索，似乎使用自我执行给了它全局范围，因此 this.create 在全局意义上不存在。

我想我必须对 call/apply 做点什么，但我不确定具体是什么或在哪里。

任何指针将不胜感激。

干杯，广告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:47:45.573

Adi，您在示例中所做的工作存在两个问题。第一个问题是在立即调用的函数内部，`this === window`.

第二个问题是这些都是函数表达式。因此，它们都是在线定义的。

```
function makeIt () {
    this.a = function () { this.b(); };
    this.b = function () { console.log("B"); };
} 
```

由于后期静态绑定，这将起作用。这意味着在内部`a`，浏览器在调用函数之前不知道`this`指的是什么。`this`然后它会在那个确切的时刻找到所指的对象。

否则，就像分配变量一样：

```
function makeIt () {
    this.a = this.b;
    this.b = "George";
} 
```

在那里你会得到一个错误。为什么？仅仅是因为在您分配`a`,`b`时还没有值。

```
function Foo () {
    this.init = (function (context) { context.change(); }(this));
    this.change = function () { doStuff(); };
} 
```

那么这个说法有什么问题呢？好吧，***立即调用函数是立即调用的函数***。这意味着即使我们已经解决了`this`问题，通过将值`this`作为参数传递给内部作用域......

...我们要求它运行尚不存在的东西。

```
function Foo () {
    this.change = function () { doStuff(); };
    this.init = (function (context) { context.change(); }(this));
} 
```

那应该工作得很好。...然而...

……你为什么要那样做？例如，当您希望它自动构造时，为什么要给它一个`public` `init`属性（即）？`undefined`

为什么是`init` `undefined`？因为你没有返回任何东西——你正在运行一个函数并设置`init`为函数的返回值，但它没有返回任何东西，所以它设置`init`为`undefined`. 那为什么要在`init`那里呢？

两种解决方案：

```
function Foo () {
    this.change = function () { doStuff(); };
    var init = function () { this.change(); };
    // other stuff......
    init();
} 
```

或者：

```
function Foo () {
    this.change = function () { doStuff(); };
    // other stuff....

    (function (context) {
       context.change();
       /* a bunch of other stuff that would be in init
          if there was no other stuff, why not just call this.change()? */
    }(this));
} 
```

老实说，如果`init`是私有的并自动运行，`create`真的需要公开吗？你要`myObj.create();`在它已经创建后打电话吗？

为什么不做类似的事情：

```
function Foo () {
    this.public1 = "Bob";
    this.public2 = 32;
    this.publicMethod = function () {};

    var create = function () { /* initialize here */ };
    create();
} 
```

或者，如果你做的不仅仅是`create`：

```
function Foo () {
    this.public1 = "Bob";
    this.public2 = 32;
    this.arrayOfThings = [];
    this.publicMethod = function () {};

    var create = function () {},
        overclock = function () {},
        polish = function () {};

    // Initialize Everything
    (function (context) {
        var thing;
        for (/* ... */) {
            thing = create();
            polish(thing);
            context.arrayOfThings.push(thing);
        }
        overclock(context.arrayOfThings); 
    }(this));
} 
```

现在，您已经在一个范围内获得了所有函数、属性和变量，并且在另一个范围内进行了初始化——所有设置逻辑都与最终对象的逻辑分开......你可以做一些事情，比如根据输入参数分支你的对象（比如多态构造函数，它会根据它得到的东西修改它给你的东西，同时保持相同的接口——或者一个自包含的工厂模式，其中所有蓝图都是100% 私密和封闭），不会让实际作业看起来像一堆 if 和 fors。

您不必在已完成的对象之外调用设置（这意味着没有其他人***可以***在已完成的对象上调用设置，以重新创建/重置它）。`this.init`它所花费的只是一个你无论如何都要使用的匿名函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:04:39.960

是的，[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)会起作用（[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)只是有一个不同的 arguments 参数，你根本不使用它）：

```
this.init = (function() {
    this.create();
    // return something?
}).call(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:02:09.090

它是如何工作的（参见演示：http: [//jsfiddle.net/Jw8jz/1/](http://jsfiddle.net/Jw8jz/1/)）：

```
function Foo() {
  this.height = 10;
  this.width = 10;

  this.init();
}

Foo.prototype = {
  init: function() {
    this.create();
  },

  create: function() {
    alert('test');
  }
};

var span = new Foo(); 
```

了解有关原型属性的更多信息！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:02:21.280

我可能会遗漏一些东西，但也许你想要的是：

```
function Foo() {
    this.height = 10;
    this.width = 10;
    this.init = function() {
        this.create();
    };
    this.create = function() {
        alert('test');
    };

    this.init();
} 
```

当然，类似地，您可以`init`完全删除该功能，或将其设为私有。例如：

```
function Foo() {
    this.height = 10;
    this.width = 10;
    this.create = function() {
        alert('test');
    };

    this.create();
} 
```

另外，请注意`this.init = (function() {})();`设置`this.init`为`undefined`，因为您的函数不返回任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T12:56:28.217

您可以将上下文传递给新的闭包：

```
this.init = (function(ctx) {
    ctx.create();
})(this); 
```

请注意，这是在声明时执行的，因此除非您在分配*之前*分配`init`，否则它将不起作用。在您之前的示例中，这不是问题，因为在两者之后手动调用并已分配。`create` *`init``span1.init()``create``init`*

# iphone - 将数据更新到 SQLite 数据库的问题

> ID：12055283
> 
> 赞同：0
> 
> 时间：2012-08-21T12:53:48.523
> 
> 标签：iphone

我正在更新 SQLite 数据库。当我更新单个数据时（意味着它正在更新的数据库字段的 AcountName ）。但是当我一起更新多个字段时（如 AcountName、UserName、Password、Url，请注意与 AcountName 的任何组合，然后应用程序在**sql = [NSString stringWithFormat:@"update UserInfo1 set AcountName=?, UserName=?, Password 处崩溃=?, Url=?, Note=? where AcountName='%@'",strAcountName];** )

```
-(void)updateData:(NSString *)AcName :(NSString *)UsrName :(NSString *)Pswd :(NSString *)url :(NSString *)Note
{
   sqlite3_stmt *updateStatement = nil;
   NSString *sql;
   int returnvalue;

   sql = [NSString stringWithFormat:@"update UserInfo1 set AcountName=?, UserName=?, Password=?, Url=?, Note=? where AcountName='%@'",strAcountName];

   returnvalue = sqlite3_prepare_v2(database, [sql UTF8String], -1, &updateStatement, NULL);

   if (returnvalue == 1)
   {
      NSAssert1 (0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
   }

   sqlite3_bind_text(updateStatement, 1,[AcName UTF8String], -1, SQLITE_TRANSIENT);

   sqlite3_bind_text(updateStatement, 2,[UsrName UTF8String], -1, SQLITE_TRANSIENT);

   sqlite3_bind_text(updateStatement, 3,[Pswd UTF8String], -1, SQLITE_TRANSIENT);

   sqlite3_bind_text(updateStatement, 4,[url UTF8String],-1, SQLITE_TRANSIENT);

   sqlite3_bind_text(updateStatement, 5,[Note UTF8String], -1, SQLITE_TRANSIENT);

   if(sqlite3_step(updateStatement) != SQLITE_DONE )
   {
       bulDataExist = YES;
       [strAcountName retain];
   }
   else
   {
       sqlite3_reset(updateStatement);
       bulDataExist = NO;
   }
   sqlite3_finalize(updateStatement);
}
 Sent at 6:11 PM on Tuesday 
```

请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:07:13.150

我会说你在 strAcountName 中有一些不好的地方。我敢打赌它在你拿到它之前就自动发布了。称呼

```
[strAcountName retain] 
```

创建后，然后调用

```
[strAcountName release] 
```

当你完成它时。为什么在成功更新sql后保留它？我想你会在那个时候扔掉它。

# java - 使用 Jackson 生成 JSON 模式进入无限循环

> ID：12055285
> 
> 赞同：2
> 
> 时间：2012-08-21T12:53:55.497
> 
> 标签：java, json, jackson, jsonschema

可能是我在杰克逊遗漏了一个明显的注释，但我有以下课程

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.annotation.JsonSerialize;
import com.fasterxml.jackson.databind.jsonschema.JsonSchema;

@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
public class Loop {

  private String name;
  private Loop otherLoop;

  public String getName() { return name; }
  public void setName(String name) { this.name = name; }
  public Loop getOtherLoop() { return otherLoop; }
  public void setOtherLoop(Loop otherLoop) { this.otherLoop = otherLoop; }

  public static void main(String[] args) throws Exception {
    Loop parent = new Loop();
    parent.setName("parent");

    Loop child = new Loop();
    child.setName("child");
    child.setOtherLoop(parent);

    ObjectMapper mapper = new ObjectMapper();
    System.out.println(mapper.writeValueAsString(child));

    JsonSchema jsonSchema = mapper.generateJsonSchema(Loop.class);
    System.out.println(mapper.writeValueAsString(jsonSchema));
  }
} 
```

当我使用 Jackson 2 运行它时，它会进入无限循环

```
{"name":"child","otherLoop":{"name":"parent"}}
Exception in thread "main" java.lang.StackOverflowError
at com.fasterxml.jackson.databind.cfg.MapperConfig.isEnabled(MapperConfig.java:106)
at com.fasterxml.jackson.databind.SerializationConfig.getAnnotationIntrospector(SerializationConfig.java:382)
at com.fasterxml.jackson.databind.SerializerProvider.getAnnotationIntrospector(SerializerProvider.java:307)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.createContextual(BeanSerializerBase.java:318)
at com.fasterxml.jackson.databind.SerializerProvider._handleContextual(SerializerProvider.java:971)
at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:447)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.getSchema(BeanSerializerBase.java:619)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.getSchema(BeanSerializerBase.java:621)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.getSchema(BeanSerializerBase.java:621)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.getSchema(BeanSerializerBase.java:621) 
```

任何想法，解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:09:30.880

```
@XmlAccessorType(XmlAccessType.FIELD)
@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
public class Loop {
   @XMLAttribute(name = "Name")
   private String name;
   @XMLAttribute(name = "Loops")
   private List<Loop> listLoop;

   //getters and setters    
} 
```

# web-applications - 如何在 Glassfish 中为特定应用程序设置 DB？

> ID：12055287
> 
> 赞同：0
> 
> 时间：2012-08-21T12:54:03.337
> 
> 标签：web-applications, glassfish, glassfish-3

我在 glassfish 中部署了两个不同的应用程序（例如 App1 和 App2）。我想为这些应用程序使用两个不同的数据库（例如 DB1 和 DB2）。

`DB1 for App1 and DB2 for App2`. 可能吗？

如果是我如何在 Glassfish 中配置它，或者我需要在我的代码中处理它（我在 EJB3.0 中工作）？

这很紧急。请尽快回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:07:31.947

在 glassfish 管理控制台中，使用您的数据库配置创建两个 jdbc 资源（例如`jdbc/db1`和）。`jdbc/db2`然后在你的会话bean中以这种方式注入数据库连接：

```
@Resource(name = "jdbc/db1")
private DataSource ds; 
```

但是，您可以使用[`@DataSourceDefinition`](http://docs.oracle.com/javaee/6/api/javax/annotation/sql/DataSourceDefinition.html)注释直接在代码中设置数据库配置。

# cdn - 哪个 CDN 托管 Google Code Prettify CSS 文件？

> ID：12055291
> 
> 赞同：3
> 
> 时间：2012-08-21T12:54:20.253
> 
> 标签：cdn, google-code-prettify

我在 cloudflare 上找到了 JS 文件，但是找不到 CSS 文件。有任何想法吗 ？

注意：我不想直接链接到 SVN 存储库，也不想使用 dropbox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-12T07:04:09.600

你检查过这个吗？

这个网站有很多资源（js）

**[http://cdnjs.com/](http://cdnjs.com/)**

![在此处输入图像描述](../Images/eda19ae3a88f959e6fd9a5aefeba01c1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T19:55:37.343

这是你要找的吗？

[http://twitter.github.io/bootstrap/assets/js/google-code-prettify/prettify.css](http://twitter.github.io/bootstrap/assets/js/google-code-prettify/prettify.css)

# c# - 可移植类库和表达式混合

> ID：12055292
> 
> 赞同：2
> 
> 时间：2012-08-21T12:54:26.770
> 
> 标签：c#, silverlight, expression-blend

哪个版本的表达式混合支持可移植类库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:56:49.190

来自[Expression Blend Service Pack 2中的新增功能](http://msdn.microsoft.com/en-us/library/hh134806%28v=expression.40%29.aspx)

> 便携式组件支持
> 
> **Expression Blend 4 SP2 支持安装可移植类库项目。**在 Visual Studio 中，可移植库工具提供了创建面向各种 .NET 平台的新类库的能力，而无需重新编译您的项目。可移植类库可以将大部分应用程序逻辑存储在可移植程序集中，然后在具有特定形式用户界面的应用程序中实现逻辑。

# python - Python：添加元素以在字典中设置值

> ID：12055297
> 
> 赞同：5
> 
> 时间：2012-08-21T12:54:36.630
> 
> 标签：python, dictionary, set, add

我在向集合中添加值时遇到问题，该集合是字典中的值。我必须使用集合作为值而不是列表或其他任何东西。我看过[这个帖子](https://stackoverflow.com/questions/3199171/append-multiple-values-for-one-key-in-python-dictionary)，但它并没有完全回答我。

```
from collections import defaultdict
datoteka = open("vzorec.list","rt")
slovar = defaultdict(set)

for vrstica in datoteka:
    seznam = vrstica.split("\t")
    naslov = seznam[0]
    beseda = seznam[len(seznam)-1]
    beseda = beseda.strip()
    naslov2 = ""
    for crka in naslov:
        if crka == "(":
            break
        else:
            naslov2 = naslov2 + crka
    naslov = naslov2.lstrip('"')

    if naslov not in slovar:
        slovar[naslov] = set(beseda)

    elif naslov in slovar:
        slovar[naslov] = slovar[naslov].add(beseda)

print(slovar) 
```

我收到一个字符串类型没有添加函数的错误。但是为什么 python 不明白我想要将集合作为值。我什至使用了`defaultdict`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T12:59:06.553

你只想：

```
slovar[naslov].add(beseda) 
```

代替：

```
if naslov not in slovar:
    slovar[naslov] = set(beseda) # set of characters in beseda string ???

elif naslov in slovar:
    slovar[naslov] = slovar[naslov].add(beseda) # add to the set, returns None ??? 
```

这是因为使用 a `defaultdict`，如果键不存在，它会添加一个空集作为该特定键的值并将其返回空集。所以，第一次，`slovar[naslov]`返回一个空集，然后`.add(beseda)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T12:58:47.723

Python很好理解:)。您的代码中有错误。

`set.add`改变 set 并返回`None`，因此您已丢弃 set 并将密钥设置为`None`. 您只想做`slovar[naslov].add(beseda)`是否`naslov`在集合中，而不关心返回值。

我看不到字符串是如何进入那里的，所以如果这不能解决您的问题，您需要粘贴完整的回溯。

# android - 带缓存的自定义 AsyncTaskLoader

> ID：12055299
> 
> 赞同：4
> 
> 时间：2012-08-21T12:54:44.197
> 
> 标签：android, parallel-processing, asynctaskloader

有几个关于如何实现自定义 AsyncTaskLoaders 的教程，但我发现没有一个教程讨论如何处理数据缓存 - 在所有这些教程中，数据只是加载和交付。

您能否给我一些提示，如何实现自定义 AsyncTaskLoader，它会立即返回缓存的数据版本，但同时请求更新数据并在它们到达时立即提供更新的版本？这甚至可以通过装载机实现，还是我必须使用另一种机制？

背景：我有一个 IntentService，它接受数据加载请求并以广播的形式传递结果。我有一个 UI (ListView) 应该显示来自 ArrayAdapter 或 CrusorAdapter 的数据。我需要一些“缓存”层来保持数据的最新已知版本立即显示，但一旦有新数据到达，就会发布它们的更新并重新显示它们。

虽然这可以通过使用哑 SQLite 数据库来实现即时版本和广播接收器来完成新数据更新，但我会优先考虑一些可以使这种“backgorund”数据加载机制透明的东西，就像 Loader 派生类恕我直言。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T13:17:20.453

是的，`AsycnTask`这是最好的方法。您所要做的就是`onPostExecute()`将`AsyncTask`. 这可以通过创建一个比较数据时间的时间戳来完成，如果有新时间，则使用该数据。否则，您将不得不比较所有数据，这可能会花费宝贵的时间和资源，因此这取决于您拥有多少数据。

这是一个可能有帮助的链接：

[http://developer.android.com/training/efficient-downloads/redundant_redundant.html](http://developer.android.com/training/efficient-downloads/redundant_redundant.html)

# python - 在 python 中，对逗号分隔的域名列表执行 DNS 查询的最有效方法是什么？

> ID：12055301
> 
> 赞同：1
> 
> 时间：2012-08-21T12:54:46.813
> 
> 标签：python, dns

我想编写一个脚本来为我的缓存 dns 服务器预取域名列表。我正在使用来自 Alexa 的前 1,000,000 个访问网站，可在此处获得：

```
http://s3.amazonaws.com/alexa-static/top-1m.csv.zip 
```

如何编写 Python 脚本来读取此 CSV 文件并对列出的每个域名执行“nslookup”（或更有效的方式），每个查询之间可能会有轻微延迟？还是有更好的方法来做到这一点？

我猜逐行处理CSV而不是一次读取它以最大程度地减少内存使用会是最有效的。

具体来说，我正在寻找解决这个问题的策略（库、工具等......）。示例代码表示赞赏，但不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:12:06.920

你可以完全坚持使用 python 标准模块，因为它们提供了你需要的一切。

由于[`open`](http://docs.python.org/library/functions.html#open)返回一个可迭代的文件对象（不将整个文件加载到内存中），您可以使用如下代码：

```
from socket import gethostbyaddr 

with open('top-1m.csv') as input:
    for line in input:
        index, host = line.strip().split(',')
        try: 
            output = gethostbyaddr(host)
            print "%s %s is %s/%s" % (index, host, output[0], output[2])
        except: 
            print host, "not found" 
```

**结果：**

> 1 facebook.com 是 www-slb-10-08-prn1.facebook.com/['69.171.234.21']
> 2 google.com 是 fra07s07-in-f100.1e100.net/['209.85.148.100']
> 3 youtube .com 是 fra07s07-in-f93.1e100.net/['209.85.148.93']
> 4 yahoo.com 是 ir2.fp.vip.bf1.yahoo.com/['98.139.183.24']
> baidu.com not found

我不推荐[`csv`](http://docs.python.org/library/csv.html#module-contents)这里，因为每行总是只有两个值。如果您需要处理诸如引号字符之类的事情，或者如果您需要编写一个 csv 文件等，请使用它。

虽然[`twisted`](http://twistedmatrix.com/trac/)它也是一个很棒的网络模块，但对于这样一个简单的任务来说有点过分了。只需使用该[`socket`](http://docs.python.org/library/socket.html#socket.gethostbyaddr)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:04:58.797

模块，是的`csv`，你当然只是逐行阅读。对于进行 DNS 查找，我建议使用[twisted.names.client](http://twistedmatrix.com/documents/current/api/twisted.names.client.html)。

# git - 当存在合并冲突时合并 git 注释

> ID：12055303
> 
> 赞同：9
> 
> 时间：2012-08-21T12:54:56.957
> 
> 标签：git

我做了以下合并 Git 笔记。
参考： http: [//vmiklos.hu/blog/git-notes-merge](http://vmiklos.hu/blog/git-notes-merge)

我克隆了一个 repo，添加了对提交的注释引用（refs/notes/commits）。当我推送它时，中央仓库会拒绝它，因为它不是快进的——因为该提交对象已经有一个 refs/notes/commits。因此，为了将远程 Notes 引用合并到我的本地 Notes 引用，

> 1.  git checkout refs/notes/master
>     
> 2.  git fetch refs/notes/commits
>     
> 3.  git merge FETCH_HEAD
>     自动合并 206155715a78c9d91d42cda1de98449d2e0b1d36
>     CONFLICT (add/add): Merge conflict in 206155715a78c9d91d42cda1de98449d........
>     自动合并失败；修复冲突，然后提交结果。
>     
> 4.  vi 206155715a78c9d91d42cda1de98449d........ [像往常一样手动修复冲突]
>     
> 5.  git 添加 206155715a78c9d91d42cda1de98449d........
>     
> 6.  git commit -m "updated Notes"
>     [分离 HEAD 0afb80f] 更改了注释
>     
> 7.  git update-ref refs/notes/commits HEAD
>     
> 8.  git checkout master
>     以前的 HEAD 位置是 0afb80f... 更改注释
>     切换到分支'master'
>     
> 9.  git push origin refs/notes/commits
>     成功

问题是，这是否是最好的方法？

在 git notes 手册页之后，我尝试了以下操作。

> 1.  git fetch refs/notes/commits
>     
> 2.  git notes merge -v refs/notes/commits
>     没什么可更新的！

上述步骤显然对我有用。有没有办法使用 git notes merge 命令合并笔记，而不是第一张图中所示的“分支方法”？对于我的用户来说，这个简单的命令会更有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T23:56:06.243

正如我在评论中已经提到的那样，第一种方法对您不起作用的一个原因是您错误地复制了说明：您的第二步`git fetch refs/notes/commits`缺少遥控器的名称。

关于第二种方法`git notes merge`，您再次犯了同样的错误，即错过了`git fetch`. 但是即使修复了这个问题，我也很难让它工作，直到我最终发现你必须在合并之前将笔记从远程获取到不同的 ref 命名空间，因为如果存在冲突，它不会让你覆盖什么本地`refs/notes/commits`指向（尽管如果没有冲突，它会很高兴地快进它）。

所以这对我有用：

```
git fetch origin refs/notes/commits:refs/notes/origin/commits
git notes merge -v origin/commits 
```

如果存在冲突，它现在会告诉您编辑`.git/NOTES_MERGE_WORKTREE`然后通过 提交结果`git notes merge --commit`，或者使用 中止合并`git notes merge --abort`。

[使用上面 URL 中建议的技术的](http://vmiklos.hu/blog/git-notes-merge)`git notes merge`一大缺点是合并不提供任何索引，因此您不能通过etc 使用正常的合并工作流程。另一个是它不支持变基。因此，如果您预计会有复杂的冲突或需要重新设置基准，那么我建议您采用这种方法。但在简单的情况下，可能更方便，因为您可以在工作树脏时执行合并，而要求它是干净的。`git mergetool``git checkout refs/notes/commits``git notes merge``git checkout refs/notes/commits`

我很确定`git-notes(1)`手册页可以使这一切更加明显。也许我会找到一些时间为此提交补丁。然而，与此同时，我编写了一个[名为的新包装器`git-rnotes`](https://github.com/aspiers/git-config/blob/master/bin/git-rnotes)，它可以更轻松地与远程存储库共享笔记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T09:07:01.520

注意： git 2.6 (Q3/Q4 2015) 将`git notes merge`更加高效和精确：

请参阅[Jacob Keller (](https://github.com/jacob-keller) [)的](https://github.com/jacob-keller)[提交 4f655e2](https://github.com/git/git/commit/4f655e22b76fed49b0c32bcdcd899934215b9a6d)、[提交 d2d68d9](https://github.com/git/git/commit/d2d68d9975da4a15dfca0e6e59001948e5bf57f9)、[提交 11dd2b2](https://github.com/git/git/commit/11dd2b2e9a3303bd1e32fd2ee95ec5dff38d9d47)、[提交 93efcad](https://github.com/git/git/commit/93efcad31777142840eaefc19b71d1a4b6a2fe24)、[提交 4d03dd1](https://github.com/git/git/commit/4d03dd18f0860d4052fab5ce7779e4bba302e5fc)、[提交 e48ad1b](https://github.com/git/git/commit/e48ad1b9b1d862dd0aad3a21c7e6ca5ec68c024c)（2015 年 8 月 17 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 5b6211a](https://github.com/git/git/commit/5b6211aee1f042a6961ef8a6bd8286db51bfc513))^(中，2015 年 8 月 31 日）)[`jacob-keller`](https://github.com/jacob-keller)
^([`gitster`](https://github.com/gitster))

> # `notes``git notes`:教`notes.<name>.mergeStrategy`选项
> 
> 讲授`notes`一个新的“ `notes.<name>.mergeStrategy`”选项，用于在合并时配置笔记合并策略`refs/notes/<name>`。
> 此选项允许为特定的笔记参考选择合并策略，而不是所有笔记参考合并，因为用户可能不需要`cat_sort_uniq`所有参考，而只需要一些参考。
> 请注意，这`<name>`是我们要合并到的本地引用，而不是我们合并的远程引用。假设是用户主要希望配置单独的本地 ref 合并策略，而不是根据他们合并的远程 ref 的策略。
> 
> `notes.<name>.mergeStrategy`覆盖一般行为，因为它更具体。

# php - Wordpress add_action 和 mysql_select_db 不保存

> ID：12055306
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:55:01.670
> 
> 标签：php, mysql, wordpress

当我添加 mysql_select_db("table", $con); 到代码，我无法保存帖子。

当我点击保存时，系统消息显示“已保存”，但没有任何变化。如果我尝试创建一个新帖子，我会得到“提交审核”而不是“发布”。

如果我输入一个假表，一切正常，例如 mysql_select_db("fake_table", $con);

这是代码

```
add_action('save_post', 'export_to_ci');
function export_to_ci($post_id) {
//Connect to Database
$con =  mysql_connect("localhost", "root", "root");
if (!$con) {
 die('Could not connect: ' . mysql_error());
 }
 mysql_select_db("table", $con); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:15:15.370

下面是我使用的代码。

```
add_action('save_post', 'export_to_ci');

function export_to_ci($post_id) {
//verify post is not a revision
if (!wp_is_post_revision($post_id)) {

//Connect to CI Database
$ci_db = new wpdb("root", "root", "db_name", "localhost");
$ci_db->show_errors();

$results = $ci_db->get_results("SELECT * FROM blog_post");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:37:45.900

@user742736 @SMacFayden 给你的链接（见评论）是开始的正确方法。在那里，您了解了有关 WordPress 数据库操作的基础知识。

首先，您不应该使用自己的`mysql_connect`，因为 WordPress 提供了一类调用`wpdb`所有数据库操作的函数。

# .net - VB.NET 动态插件组件

> ID：12055308
> 
> 赞同：2
> 
> 时间：2012-08-21T12:55:08.237
> 
> 标签：.net, vb.net, plugins

我不是 VB 开发人员，但我正在领导一个部分使用 VB 的大型项目。要求之一是实现插件架构以支持动态可扩展的应用程序核心。

我们的 VB 开发人员似乎认为可以将 BLL 存储在 DLL 中 - 将接口全部保留在原始核心应用程序中 - 在安装扩展之前使其无用。

显然，这不太理想。我想知道是否可以将整个子应用程序/组件保留在一个不同的 DLL 中，将其加载到核心平台中？？？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:42:20.797

这根本不是问题，看看我的示例代码。这是存在于单独 dll 中的抽象类：

```
public abstract class ServerTask
{
    public int TaskId { get; set;}

    /// <summary>
    /// Gets description for ServerTask
    /// </summary>
    public abstract string Description { get; }

} 
```

这是插件实现的代码：

```
public class SampleTask : GP.Solutions.WF.Entities.Tasks.ServerTask
{

    public override string Description
    {
        get 
        {
            return "Sample plugin";
        }
    }

} 
```

最后来自加载插件的核心应用程序的代码：

```
 /// <summary>
    /// Loads Plugin from file
    /// </summary>
    /// <param name="fileName">Full path to file</param>
    /// <param name="lockFile">Lock loaded file or not</param>
    /// <returns></returns>
    static Entities.Tasks.ServerTask LoadServerTask(string fileName, bool lockFile, int taskId)
    {
        Assembly assembly = null;
        Entities.Tasks.ServerTask serverTask = null;
        if (lockFile)
        {
            assembly = System.Reflection.Assembly.LoadFile(fileName);
        }
        else
        {
            byte[] data = Services.Common.ReadBinaryFile(fileName);
            assembly = System.Reflection.Assembly.Load(data);
        }
        Type[] types = assembly.GetTypes();
        foreach (Type t in types)
        {
            if (t.IsSubclassOf(typeof(Entities.Tasks.ServerTask)))
            {
                serverTask = (Entities.Tasks.ServerTask)Activator.CreateInstance(t);
                serverTask.TaskId = taskId;
                break;
            }
        }
        if (serverTask == null)
        {
            throw new Exception("Unable to initialize to ServerTask type from library '" + fileName + "'!");
        }
        return serverTask;
    } 
```

如果您不熟悉 c#，只需使用 c# 到 vb.net 在线转换器。

快乐的编码和最好的问候！格雷戈尔·普里玛

# jquery - Jquery 对话框：在同一页面上显示 2 个具有不同 jquery-ui-rev.css 的对话框

> ID：12055310
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:16.940
> 
> 标签：jquery, css

我在同一页面上有 2 个 Jquery 对话框。两个对话框的外观和感觉彼此不同。由于两者都引用了相同`jquery-ui-rev.css`的任何 CSS，我为一个对话框应用了任何 CSS，因此它也适用于我不想要的其他 CSS。我该如何解决我的问题？并告诉对话框彼此使用不同的 CSS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:02:29.370

您必须为每个对话框创建单独的 css 文件。在对话框打开期间包含 css 文件并在关闭对话框时删除 css 文件。[动态删除或添加 css 文件](http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml)

这可能对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:02:32.583

查看[Dialog#dialogClass](http://jqueryui.com/demos/dialog/#option-dialogClass)为不同的对话指定单独的 css 类。

# c# - 如何在 DataGridViewComboBoxCell 中设置默认项

> ID：12055312
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:21.620
> 
> 标签：c#, winforms, datagridview

我在datagridview中有一个DataGridViewComboBoxCell。我在form_load中加载值。它最初在DataGridViewComboBoxCell中显示为空白，当添加新行时。但我的问题是我如何设置默认值，说“其他” DataGridViewComboBoxCell.So 每当我尝试添加新行时，它都会在其中显示默认项。

我想向您展示我的代码。

DataGridViewComboBoxCell comboItem_current = dataGridView1.CurrentRow.Cells[2] as DataGridViewComboBoxCell;

```
 comboItem_current.Items.Clear();
                comboItem_current.Items.Add("Other");

                foreach (DataRow dr in ds_Item.Tables[0].Rows)
                {
                    DataGridViewComboBoxCell comboItem1 = dataGridView1.CurrentRow.Cells[2] as DataGridViewComboBoxCell;  
                    comboItem1.Items.Add(dr[1].ToString());

                } 
```

请帮忙....谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T00:17:31.897

我知道这是一篇古老的帖子，但希望我能帮助一些人避免我的困惑。

使用 CellFormatting 是一个失败者，因为它每次接触到单元格时都会调用它。结果是该值不断地设置回默认值。

对我有用的是像这样处理 DefaultValuesNeeded 事件：

```
private void OnGridDefaultValuesNeeded(object sender, DataGridViewRowEventArgs e)
{
    e.Row.Cells["Position"].Value = PositionEnum.Any;
} 
```

这允许我设置默认值，并让用户更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:23:43.743

您可以这样做：[设置 DatagridviewComboBoxColumn 默认值](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/ba5c5d12-7eed-4b61-80b9-a576d5ee95be/)

**或者**这样：

只需`CellFormatting`为 datagridview 添加事件

```
void dgv_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 0) //Index of your DataGridViewComboBoxColumn 
    {
        e.Value = "Default Value";
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T13:40:13.423

为什么不保持简单，只使用类似的东西

```
<DataGridComboBoxColumn SelectedItemBinding="{Binding MyProp}" Width="*" Header="MyHeader" ></DataGridComboBoxColumn> 
```

当然，您的 DataGrid 需要使用 IEnumerable 设置 DataContext 属性，其中 MyObj 具有 MyProp

# javascript - XMLHttpRequest 无法加载 url Origin null is not allowed by Access-Control-Allow-Origin

> ID：12055314
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:31.933
> 
> 标签：javascript, jquery, ajax, html

json**响应**在

```
{"userName":"clevermeal835","userRole":"Participant"} 
```

我收到成功的警报消息，但是在阅读响应时，我收到错误消息

> XMLHttpRequest 无法加载 url Origin null 是 Access-Control-Allow-Origin 不允许的。

如果我通过 --disable-web-security 从命令提示符运行代码，我会收到响应
以下是代码。

```
<html>  
<head>  
<meta charset="UTF-8">  
<script type="text/javascript" src="Scripts/jquery-1.4.2.min.js"></script>  
                     <script>  
        $(document).ready(  
        function() {  
        $("#jsonpbtn2").click(function() {  
            var uid = "clevermeal835";  
            var pwd = "Welcome_1";  
            var userType = "participant";  
            var surl="http://localhost:8080/RESTlet_WS/MobiSignIn/{\"userName\":\""+uid+"\",\"password\":\""+pwd+"\",\"userType\":\""+userType+"\"}/";  
                $.ajax({  
                    type : 'GET',  
                    contentType: "application/json; charset=utf-8",  
                    url : surl,  
                    dataType : 'json',  
                    headers : {Accept : "application/json","Access-Control-Allow-Origin" : "*"},  
                    crossDomain : true,  
                    success :SucceedFunc ,
                    error : function(data, textStatus, errorThrown) {
                            console.log("error"+' '+JSON.stringify(data) + ' ' + textStatus + '  ' + errorThrown);  
                    }
                    });  
                    function SucceedFunc(data) {
                        alert("success");
                        var userName = data.userName;
                        alert(userName);
                    }
                    });  
                });  
    </script>   
    </head>  
    <body>  
    <input id="jsonpbtn2" type="submit" value="button" />  
    </body>  
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:22:31.433

如果您正在调用`ajaxCallPage.html`上述问题中的 html 页面，`file://.../ajaxCallPage.html`那么您做错了。

将`ajaxCallPage.html`文件放入您的 Web 服务器并像这样调用它`http:/localhost:8080/.../ajaxCallPage.html`。那么这个错误就不会出现了。

如果是这样，这个问题可能是[XMLHttpRequest cannot load http://localhost:8080/exist/rest/db/.... 的重复项。Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/10822514/xmlhttprequest-cannot-load-http-localhost8080-exist-rest-db-origin-null)

# extjs4 - Ext JS 4：将一条记录分成多个组

> ID：12055315
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:32.827
> 
> 标签：extjs4, filtering, grouping, store, gridpanel

是否可以将单个记录分组到多个组中？假设我有以下代码：

```
Ext.onReady(function() {
  var store = Ext.create('Ext.data.Store', {
    fields: ['name', 'profession'],
    groupField: 'profession',
    data: [
      {name: 'jack johnson', profession: 'surfer'},
      {name: 'dan aykroyd', profession: 'ghostbuster'},
      {name: 'dwayne johnson', profession: 'actor'},
      {name: 'chino moreno', profession: 'musician'}
    ]
  });
  var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    columns: [{
      text: 'Name',
      dataIndex: 'name',
      flex: 1
    }, {
      text: 'Profession',
      dataIndex: 'profession',
      flex: 2
    }],
    features: [{ftype: 'grouping'}],
    height: 400,
    width: 400,
    renderTo: Ext.getBody()
  });
}); 
```

不要过多地阅读专业，因为这是一个玩具示例，但假设我想将 Dan Aykroyd 分为两组……“捉鬼敢死队”和“音乐家”。但是，我在网上没有看到任何这样的例子，所以我想知道是否可以这样做。似乎可以做到，因为我假设过滤器已应用于商店，所以应该有可能，但我知道我错了。

如果有人有任何见解，那就太棒了！谢谢。

[**从Sencha 论坛](http://www.sencha.com/forum/showthread.php?237671-Putting-a-record-into-multiple-groups.)发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:05:54.120

最简单的方法是通过在加载时克隆某些记录、更改组属性字段的值并将它们插入到存储中来“伪造”它。因此，在您的示例中，您将有两条记录，`name === "Dan Aykroyd"`但一条将拥有`profession === "ghostbuster"`，另一条将拥有`profession === "musician"`. 您需要手动同步重复记录之间的所有更改。有点麻烦，但它会完成工作。

实际上修改网格分组的工作方式以支持多个值？那是另一个故事。在商店方面，石斑鱼的工作方式与分拣机非常相似。要更改分组的工作方式，您必须在 2-5 个类之间进行扩展。可能，但可能比它的价值更多的努力。

您需要一种方法来表示记录中的多个值。我建议使用分隔字符串，因为使用数组需要更多的工作来实现。与记录值的比较将变成调用`Ext.Array.contains(record.get(group.property).split(","), group.name)`等。如果您也希望您的网格不可分组，您可能需要在网格列上使用自定义渲染器。如果该列是可编辑的，那么您可能需要特殊的逻辑。

希望能帮助您找到解决方案。

# java - a=3 和 b=4 如何？

> ID：12055319
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:40.670
> 
> 标签：java, switch-statement, post-increment, pre-increment

我发现了一个有趣的编程问题：

执行此程序后 a,b,c,f 的值是多少？

```
int i=0,a=0,b=0,c=0,f=0;
while(i<=5){
switch(i++){
    case 1:++a;
    case 2:++b;
    break;
    case 3:
    case 4:++c;a++;b++;
    break;
    default:++f;
}
} 
```

我以为价值观

a=2 , b=2 , c=2 和 f=2 但是

当我执行这个程序时，我得到 a = 3、b = 4、c = 2 和 f = 2。

我明白 c 和 f 是如何得到它的值 2 的，但是 a=3 和 b=4 是怎么来的。

（根据语法 ++a 和 a++ 不同，因为 ++a 更新值然后使用它，而 a++ 使用值然后更新它）

谁能解释 a 和 b 如何将其值设为 3 和 4。

更新：

> 嘿，我的疑问是：在 i++ 中，初始值为 0 而不是 1。但是 case 4 => a=3
> 
> 它应该是 a=2 并且如果在案例 5 中有任何“a”更新（这是不正确的），则应该增加该值，因为我没有像 a=a++ 这样进行任何替换。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:01:57.037

我建议你用纸和笔来做这个练习。反正：

1.  i = 0 **==>** f =1；
2.  i = 1 **==>** a = 1; b = 1; **（在案例 1 之后没有中断！）**
3.  i = 2 **==>** b = 2;
4.  i = 3 **==>** c = 1; a = 2; b = 3;
5.  i = 4 **==>** c = 2; a = 3; b = 4;
6.  我 = 5 **==>** f = 2;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:03:11.647

希望对你有帮助...

```
When i is 0 
    None of the case matched and went to default
    so a=0,b=0,c=0,f=1;

When i is 1 
    Case 1 and 2 will execute as there is no break after 1;
    so a=1,b=1,c=0,f=1;

When i is 2 
    Case 2 will execute
    so a=1,b=2,c=0,f=1; 

When i is 3 
    Case 3 and 4 will execute as there is no break after 3;
    so a=2,b=3,c=1,f=1; 

When i is 4 
    Case 4 will execute
    so a=3,b=4,c=2,f=1; 

When i is 5 
    Default will execute
    so a=3,b=4,c=2,f=2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:00:30.470

请记住，switch 语句支持“失败”——对于 i=2，只有 b 递增，但对于 i=1，两者都递增。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:02:32.273

前一个和后增量（ ++a 和 a++ ）在[这个](https://stackoverflow.com/a/4445841/623546)先前的答案中得到了最好的解释

**更新** 正如下面评论中所指出的，这些概念的 C++ 和 Java 实现存在根本差异。但这里是java中的一个简单例子

```
 x = 1;
        y = ++x;  Here y = 2 and x =2 because we first increment x and assign it to y

        x = 1;
        y = x++;  But here y = 1 and x = 2 because we first assign x to y and then increment x

in essense , y = x++ is equivalent to those 2 statements
            y =x;
            x = x + 1; 
```

# php - PHP使用后期静态绑定来获取调用函数？

> ID：12055325
> 
> 赞同：0
> 
> 时间：2012-08-21T12:55:53.857
> 
> 标签：php, debugging, late-static-binding, debug-backtrace

是否可以通过使用后期静态绑定来获取调用函数的信息（文件名、行、函数...）？

```
<?php
class Log{
    public static function write($msg){
        $line = ??;
        $msg = date('Y-m-d H:i:s').' '.$line.' '.$msg;
    }
}

Log::write("wuhuu!"); // write new log entry including >>this<< line/filename/..
?> 
```

*以前*我`used debug_backtrace()`或`new \Exception`+ `getTrace()`。_ 是否有可能（或更容易）使用一些很棒的超级特殊后期静态绑定功能关键字/功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:33:49.610

不幸`debug_backtrace`的是，这可能是你最好的，尽管这效率很低。

另一种方法是将行和文件传递回您的日志方法......

```
Log::write("wuhuu!", __LINE__, __FILE__); 
```

这是一个痛苦的屁股，但我看不到另一种解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:12:50.490

您应该检查 XDebug 扩展：

xdebug_call_file()、xdebug_call_line()、xdebug_call_class()、xdebug_call_function()

不建议在生产环境中使用这类函数（XDebug、debug_backtrace()）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:09:06.867

是的，

PHP 为它运行的任何脚本提供了大量预定义的常量。然而，这些常量中有许多是由各种扩展创建的，并且只有在这些扩展可用时才会出现，无论是通过动态加载还是因为它们已被编译。

有八个神奇的常数会根据它们的使用位置而变化。例如，**LINE**的值取决于它在脚本中使用的行。这些特殊常量不区分大小写，如下所示：

**_*线*_** , **_*类*_** , **_*方法*_**等

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

但是您仍然需要将该数据提供给 log( **_ *LINE* _** ,_ ***METHOD* _** ) 之类的方法。

[对于全局警告，您可以使用http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)捕获那些警告

除此之外..

# asp.net-mvc - www 或 http www 用于重定向

> ID：12055326
> 
> 赞同：2
> 
> 时间：2012-08-21T12:56:01.127
> 
> 标签：asp.net-mvc, seo

这个问题可能被问了很多次，但我无法得到明确的答案，所以请原谅我。

我有一个成功运行的 ASP.NET MVC 博客，最近我知道谷歌看到请求`http://www.myblog.com`和`http://myblog.com`不同。

所以我想做一些从一个到另一个的重定向，但不确定从哪个到另一个我必须做重定向。意思是，我想做 301 重定向 from `http://www`to`http://`或反之亦然。

另外，在站点地图文件中，我将网址指定为`http://www.*`，在谷歌网络管理员工具中，该站点显示为`http://www.myblog.com`.

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:00:13.397

[您可以指定规范引用](http://googlewebmastercentral.blogspot.co.uk/2009/02/specify-your-canonical.html)来指示搜索引擎索引哪个 URL，而不是重定向内容。无论 google 看到哪个版本的 URL，它都会将内容视为相同的内容，并将您的网站编入该`www.myblog.com`域下的索引。

例如：

```
<head>
  <link rel="canonical" href="http://www.myblog.com" />
  ...
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:00:38.990

回答您最初的问题：您的偏好无关紧要。

回应斯波尔托的回答：

规范参考是建议。谷歌表示他们不一定会跟随他们，因为他们是你的偏好。另一方面，301s 是权威的。

Canonical 非常适合动态 URL 或产品分布在多个地方的电子商务。否则首选项仍应为 301，甚至在 GWT 中设置首选项。

“尽可能使用 301”——Matt Cutts [http://www.youtube.com/watch?v=zW5UL3lzBOA](http://www.youtube.com/watch?v=zW5UL3lzBOA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T09:54:26.953

对于我所有的网站，我总是选择使用非 www 权限（无子域）作为我的规范 URL，并且我在 .htaccess 中进行 301 重写，如下所示：

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.mydowmain.com$ [NC]
RewriteRule ^(.*)$ http://mydomain.com/$1 [R=301,L] 
```

# wpf - 如何失去对按钮按下的关注？

> ID：12055332
> 
> 赞同：4
> 
> 时间：2012-08-21T12:56:23.277
> 
> 标签：wpf, mvvm, lost-focus

简化：在我看来，我有一个 xaml 页面，其中包含一个按钮和某种文本框。按钮绑定到 ViewModel 中的 DelegateCommand，编辑框绑定到 ViewModel 中的某个属性。

```
View:
<Button Command="{Binding MyCommand}"/>
<TextBox Text="{Binding MyString}"/>

ViewModel:
public DelegateCommand MyCommand { get; set; }
public String MyString { get; set; } 
```

现在，当用户在框中输入内容并单击按钮时，按钮不会收到焦点更改事件。所以它不会将它的内容更新到属性中。所以属性 MyString 不会在单击按钮时反映 TextBox 的内容。因此，无论 MyCommand 正在做什么处理，它都在处理旧数据而不是当前输入。

现在，如果这真的只是一个 TextBox，我会将 UpdateSourceTrigger=PropertyChanged 添加到绑定中，我会很好。但在这种情况下，编辑控件有点复杂，需要对内容进行一些验证。所以当我用鼠标按下按钮时，我需要某种“失去焦点”的信号。

我的问题是：在 MVVM 中，按钮背后的代码无法访问视图，因此不能使其失去焦点。

xaml 中（例如在视图中）有什么方法可以使按钮在鼠标单击时获得键盘焦点？这将是我的自定义控件获得“失去焦点”消息的最简单方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:29:47.500

回复：在 xaml 中（例如在视图中）有什么方法可以使按钮在被鼠标单击时获得键盘焦点？> 一个按钮在被点击时确实会获得键盘焦点——前提是 IsEnabled、Focusable 和 IsHitTestVisible 属性都设置为 true，因为它们是默认的。要以编程方式设置键盘焦点，请调用 Keybaord.Focus，如下例所示。

与流行的 meme 不同，命令不必在 VM 中处理。如果在执行命令时需要独立于 VM 更改视图，则可以在视图中处理命令。事实上，这是 WPF 的原生模式。

以下示例显示了使用按钮上的 Command 属性来处理视图中的命令。为简单起见，该示例没有 VM。即使命令是在视图中处理的，如果有一个虚拟机，视图后面的代码也可以调用它。

```
public partial class MainWindow : Window
{
    public static readonly RoutedUICommand MyCommand = new RoutedUICommand("My Command", "MyCommand", typeof(MainWindow));
    public String MyString { get; set; }

    public MainWindow()
    {
        MyString = "some text";
        DataContext = this; // this simple example has no VM 
        InitializeComponent();
    }
    private void MyCommand_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        Button1.Content = MyString;
        Keyboard.Focus(Button1);   
    }
}
<Window x:Class="fwLoseFocus.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:me="clr-namespace:fwLoseFocus">
    <Window.CommandBindings>
        <CommandBinding Command="me:MainWindow.MyCommand" Executed="MyCommand_Executed"/>
    </Window.CommandBindings>
    <StackPanel>
        <TextBox Text="{Binding MyString}"/>
        <Button x:Name="Button1" Command="me:MainWindow.MyCommand"/>
    </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:18:07.430

是否不可能仍然拥有 Button 的单击事件并让后面的代码使文本框失去焦点？

```
private void Button_Click(object sender, RoutedEventArgs e) { 
    FocusManager.SetFocusedElement(this, null); 
} 
```

以下答案与您相关吗？

[WPF 在按钮单击时重置焦点](https://stackoverflow.com/questions/2052389/wpf-reset-focus-on-button-click)

# jquery - 如何进行遏制：jquery ui 1.8.23 中带有垂直滚动条的“父级”（可拖动）

> ID：12055340
> 
> 赞同：0
> 
> 时间：2012-08-21T12:56:46.117
> 
> 标签：jquery, jquery-ui

我使用可拖动的 im jquery ui 1.8.23

如何进行遏制：带有垂直滚动条的“父级”。

我会试试这个但没用。

```
$( "#hover" ).draggable({
            containment: "parent" ,

        }); 
```

所以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:56:30.430

好吧，你实际上并不想要收容父母。您只希望在某些方向上包含父级。您可以通过重置事件中可拖动对象的位置来伪造`drag`它，使其不会超出范围。

```
drag: function(event, ui) {
    if( ui.position.left < 0 ){ ui.position.left = 0; }
    if( ui.position.top < 0 ){ ui.position.top = 0; }

    var maxDown = $("#container").height() - $(this).height();
    if( ui.position.top > maxDown) {
        ui.position.top = maxDown;
    }
} 
```

更新演示：http: [//jsfiddle.net/DkGQB/5/](http://jsfiddle.net/DkGQB/5/)

# c# - 从 Byte 获取颜色以获取 256 色图像

> ID：12055341
> 
> 赞同：1
> 
> 时间：2012-08-21T12:56:47.287
> 
> 标签：c#, image-processing, colors

我有一个正在解析的自定义图像格式（不是我的，我正在尝试对其进行逆向工程）。图像以 256 色存储，任何给定像素的颜色由单个字节表示。如何将该字节转换为颜色？我的猜测是它使用某种标准托盘，但我不确定如何在 c# 中访问标准的 256 色托盘来查找颜色。图像中不包含托盘或其他信息；所有的图像都是相同的尺寸并且都使用相同的神秘托盘。

有点像[从 int 获取颜色](https://stackoverflow.com/questions/4174491/get-color-from-int)，但不是灰度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:07:51.817

BitmapPalettes类提供[了](http://msdn.microsoft.com/en-us/library/ms619234)一些标准的调色板。也许[WebPalette](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalettes.webpalette)值得一试：

```
Color c = BitmapPalettes.WebPalette.Colors[colorIndex]; 
```

# c++ - 类型为指向另一个类的对象的泛型类 - 不工作

> ID：12055346
> 
> 赞同：-12
> 
> 时间：2012-08-21T12:57:03.210
> 
> 标签：c++, templates, generics, pointers, vector

为什么这不起作用：

```
class/struct SomeClass
{
public:
      int     SomeValue;
}

template <class/struct/typename T> class/struct TClass
{
public:
        T     TObject;
}

vector<TClass<SomeClass*>> *vTcSomeClass = new vector<TClass<SomeClass*>>(); 
```

这是非法的还是我做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:03:29.743

如果您满足以下条件，您的代码应该可以编译：

*   选择类型中的类/结构之一和模板参数中的类/类型名之一
*   在类或结构定义后使用分号
*   编写`> >`而不是`>>`嵌套模板（C++ 11 之前）

# iphone - 拍摄照片时切换 AVCaptureSession 预设

> ID：12055350
> 
> 赞同：8
> 
> 时间：2012-08-21T12:57:15.707
> 
> 标签：iphone, ios, avfoundation

我当前的设置如下（基于[Brad Larson](https://stackoverflow.com/users/19679/brad-larson "布拉德·拉森")的 ColorTrackingCamera 项目）：

我正在使用一`AVCaptureSession`组`AVCaptureSessionPreset640x480`，我让输出作为纹理通过 OpenGL 场景运行。然后这个纹理由片段着色器操作。

我需要这种“低质量”预设，因为我想在用户预览时保持高帧率。然后，当用户拍摄静止照片时，我想切换到更高质量的输出。

首先我想我可以改变它`sessionPreset`，`AVCaptureSession`但这会迫使相机重新聚焦，这会破坏可用性。

```
[captureSession beginConfiguration];
captureSession.sessionPreset = AVCaptureSessionPresetPhoto;
[captureSession commitConfiguration]; 
```

目前我正在尝试向`AVCaptureStillImageOutput`AVCaptureSession 添加一秒钟，但我得到了一个空的像素缓冲区，所以我觉得我有点卡住了。

这是我的会话设置代码：

```
...

// Add the video frame output
[captureSession beginConfiguration];

videoOutput = [[AVCaptureVideoDataOutput alloc] init];
[videoOutput setAlwaysDiscardsLateVideoFrames:YES];
[videoOutput setVideoSettings:[NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey]];
[videoOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

if ([captureSession canAddOutput:videoOutput])
{
    [captureSession addOutput:videoOutput];
}
else
{
    NSLog(@"Couldn't add video output");
}

[captureSession commitConfiguration];

// Add still output
[captureSession beginConfiguration];
stillOutput = [[AVCaptureStillImageOutput alloc] init];

if([captureSession canAddOutput:stillOutput])
{
    [captureSession addOutput:stillOutput];
}
else
{
    NSLog(@"Couldn't add still output");
}

[captureSession commitConfiguration];

// Start capturing
[captureSession setSessionPreset:AVCaptureSessionPreset640x480];
if(![captureSession isRunning])
{
    [captureSession startRunning];
};

... 
```

这是我的捕获方法：

```
- (void)prepareForHighResolutionOutput
{
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillOutput.connections) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { break; }
    }

    [stillOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:
     ^(CMSampleBufferRef imageSampleBuffer, NSError *error) {
         CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(imageSampleBuffer);
         CVPixelBufferLockBaseAddress(pixelBuffer, 0);
         int width = CVPixelBufferGetWidth(pixelBuffer);
         int height = CVPixelBufferGetHeight(pixelBuffer);

         NSLog(@"%i x %i", width, height);
         CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);
     }];
} 
```

（`width`结果`height`为0）

我已经阅读了 AVFoundation 文档的文档，但似乎我没有得到必要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:13:58.267

我找到了针对我的具体问题的解决方案。如果有人偶然发现同样的问题，我希望它可以用作指南。

帧率大幅下降的原因与像素格式之间的内部转换有关。明确设置像素格式后，帧速率增加。

在我的情况下，我正在使用以下方法创建 BGRA 纹理：

```
// Let Core Video create the OpenGL texture from pixelbuffer
CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, videoTextureCache, pixelBuffer, NULL,
                                                            GL_TEXTURE_2D, GL_RGBA, width, height, GL_BGRA,
                                                            GL_UNSIGNED_BYTE, 0, &videoTexture); 
```

因此，当我设置`AVCaptureStillImageOutput`实例时，我将代码更改为：

```
// Add still output
stillOutput = [[AVCaptureStillImageOutput alloc] init];
[stillOutput setOutputSettings:[NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey]];

if([captureSession canAddOutput:stillOutput])
{
    [captureSession addOutput:stillOutput];
}
else
{
    NSLog(@"Couldn't add still output");
} 
```

我希望有一天这对某人有所帮助；）

# java - 在 try catch 中处理两个不同的连接关闭

> ID：12055352
> 
> 赞同：0
> 
> 时间：2012-08-21T12:57:19.937
> 
> 标签：java, exception, try-catch

如果您要打开连接，通常您所做的是 try-catch-finally

```
try {
    doSomething();
} catch(Exception e) {
    // handle the exception
} finally {
    close();
} 
```

在我的场景中，我有两个 catch 和两个不同的关闭：正常情况下的 close() 和抛出 StrangeException 的 closeStrange() 。

我想出了这样的事情：

```
try {
    doSomething();
} catch(StrangeException e) {
    closeStrange();
    throw new MyExc(e);
} catch(Exception e) {
    close();
    throw new MyExc(e);
}
close(); 
```

我想知道以这种方式处理这种情况是否安全。

**编辑：**

可能还不清楚：我只想调用一个结束。如果抛出 StrangeException，则 closeStrange()，如果抛出另一个异常或不抛出任何异常，则 close()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:01:13.887

不，您目前处理此问题的方式并不安全：

*   您没有使用`finally`块，因此抛出的任何非异常都会让您在不关闭连接的情况下离开
*   您正在“处理”任何异常，这几乎肯定是不合适的

你可能想要：

```
boolean closedStrangely = false;
try {
   ...
} catch (StrangeException e) {
    closeStrangely();
    closedStrangely = true;
    throw e; // Or maybe not, or maybe throwing some custom exception
} finally {
    if (!closedStrangely) {
        close();
    }
} 
```

请注意，如果`closeStrangely()`抛出异常，这将尝试“正常”关闭它。如果您不想要这种行为，请在调用*之前*`closedStrangely`设置为 true 。*`closeStrangely`*

 *编辑：即使你想在某些情况下抛出自定义异常，你几乎肯定*不*应该捕获`Exception`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:01:15.347

一个更常见的模式可能是。

```
try {
    doSomething();
} catch(StrangeException e) {
    // handle strange exception without closing.
} catch(Exception e) {
    // handle the exception without closing.
} finally {
    close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:00:31.323

```
try {
    doSomething();
} catch(Exception e) {
    if(e instanceof StrangeException) {
        closeStrange();
    } else {
        close();
    }
} finally {
   close();
} 
```

您可以使用 instanceof 检查异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:00:49.543

关于什么：

```
try {
    doSomething();
    close();
} catch(StrangeException e) {
    closeStrange();
    throw;
} catch(Throwable e) {
    close();
    throw;
} 
```

通过这种方式，您调用其中一个且仅一个`close`或`closeStrange`在任何情况下，您都让异常“通过”。*

# c# - DevExpress XtraGrid - 如何更新网格布局

> ID：12055362
> 
> 赞同：0
> 
> 时间：2012-08-21T12:57:46.063
> 
> 标签：c#, winforms, devexpress, xtragrid

我正在使用 DevExpress 网格，有保存布局的方法，但我还有一个问题：是否可以更新已保存的布局而不覆盖它，而只更新已更改的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:38:36.520

我不明白更新保存的布局的目的是什么。

但是，当您在更改列后调用 savelayout 时，它会将当前布局相关信息（列显示状态、列视图顺序、排序信息等）完全写入注册表/流/XML，并且不可能仅更新现有布局信息。

如果您之前从已保存的文件中应用了布局，则覆盖相同的文件（带有布局信息）将等同于您的要求 -**更新已保存的布局**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:05:47.127

我可以建议您创建此布局文件的副本吗？这样，您可以更新副本并仍然拥有原件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T08:17:27.267

这个问题是很久以前提出的，但是有可能升级 DevExpress 中现有的布局文件。您必须处理两个事件： **LayoutUpgrade**和**BeforeLoadLayout**。在开始时，您必须使用属性**O​​ptionsLayout.LayoutVersion**为布局提供版本号。当您更改布局时，隐藏一些列、添加新列、添加新过滤器......更改 LayoutVersion 编号。当您的应用程序启动时，DevExpress 将现有的 LayoutVersion 编号与新的编号进行比较，如果存在差异，则触发**LayoutUpgrade**事件。

DevExpress 在此处描述此行为： [升级布局](https://documentation.devexpress.com/#WindowsForms/CustomDocument2383)

我希望这将有所帮助。

# winforms - 在演示者 (MVP) 中声明时如何执行负责更新 UI 的事件处理程序

> ID：12055365
> 
> 赞同：1
> 
> 时间：2012-08-21T12:58:09.330
> 
> 标签：winforms, multithreading, c#-4.0, mvp

我正在尝试实现 MVP 模式并且我在事件处理程序方面遇到了一些问题。最初我在部分类中声明了这一点。因为它包含逻辑我假设它应该被移动到演示者中？

不过，当我将 InvokeRequired/invoke 移到 Presenter 时，它显然会产生错误。因此，除了将整个方法留在视图中之外，我想出的唯一其他选择是将事件处理程序留在视图中，因此 InvokeRequired 等不会有任何问题，而是移动 EventHandler 的主体，即动作委托，进入演示者。我不知道这样的方法调用将如何工作，尽管我使用 DI atm 在 View -> Presenter 之间进行通信，但不确定如何获取 Presenter -> View。

```
 public void CompletionReportNotifier(object sender, VerificationStatusEventArgs e)
    {
        Action action = () =>
        {
            //Display messages depending on whether it was canceled or not.
            if (e.CarriedOutToCompletion == true)
            {
                string logMessage = string.Format("The data verification operation has been completed and {0} errors were found. Please view the error log for additional information.", inputs.NumberOfErrorsFound.ToString());
                _view.UpdateLog(logMessage);
            }
            else
            {
                _view.UpdateLog("The data verification has failed. Please view the error log for additional information.");
            }

            //...
        };

        if (InvokeRequired)
            Invoke(action);
        else
            action();
    } 
```

**根据ItsMatt的回复编辑**

演示者代码：

```
 public void CompletionReportNotifier(object sender, VerificationStatusEventArgs e)
    {
        _view.PermanentCsvFileVerificationCancellation = null;

        string logMessage;
        bool inputsVisible = false;

        //Display messages depending on whether it was canceled or not.
        if (e.CarriedOutToCompletion == true)
        {
            logMessage = string.Format("The data verification operation has been completed and {0} errors were found. Please view the error log for additional information.", inputs.NumberOfErrorsFound.ToString());
        }
        else
        {
            logMessage = "The data verification has failed. Please view the error log for additional information.";
        }

        //Assign values to parameters depending on if it failed or errors were encountered.
        if (e.CarriedOutToCompletion != true || inputs.NumberOfErrorsFound > 0)
        {
            inputsVisible = true;
            _view.VerificationCompleted = false;
        }
        else
        {
            _view.VerificationCompleted = true;
        }

        _view.UIUpdate(logMessage, inputsVisible);
    } 
```

查看代码：

```
 public void UIUpdate(string logMessage, bool inputsVisible)
    {
        Action action = () =>
        {
            UpdateLog(logMessage);
            AccessToCsvFileVerificationInputs(inputsVisible);
            btnDataVerification.Text = "Verify Data";
            DisplayBusyMouseCursor(false);
            VerifyingData = false;
        };
        if (InvokeRequired)
            Invoke(action);
        else
            action();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:36:21.090

在您的特定情况下，您本质上是 - 至少从我在代码片段中看到的 - 确定最终向用户显示的日志消息字符串，对吗？

那么使用`Func`而不是`Action`呢？这样，您可以使用您`Func`在演示者那里获得的任何逻辑在演示者端创建您的委托，让它创建 logMessage 并在视图执行它时返回它。

这会将您的逻辑保留在演示者端，并将有关 UI 的细节保留在 UI 端。是否需要调用 Invoke 确实是 UI 问题，而不是演示者的问题，对吧？我在想你只是在 UI 中粘贴 Invoke 代码并让它执行传递给它的 Func。

我在想这样的事情：

```
public void CompletionReportNotifier(object sender, VerificationStatusEventArgs e)
{
    Func<string> func = () =>
    {
        string logMessage = string.empty;

        //Display messages depending on whether it was canceled or not.
        if (e.CarriedOutToCompletion == true)
        {
            logMessage = 
                    string.Format("The data verification operation has been completed and {0} errors were found. Please view the error log for additional information.",
                    inputs.NumberOfErrorsFound.ToString());
       }
        else
        {
            logMessage ="The data verification has failed. Please view the error log for additional information.";
        }

        return logMessage;
    };
    _view.UpdateLog(func);
} 
```

在视图中类似于

```
public void UpdateLog(Func func)
{
   if (InvokeRequired) 
   {
      someControl.Invoke((MethodInvoker)(() =>
      {
         Invoke(whateverUi.Text = func());
      }));  
   }
   else
      whateverUi.Text = func();
} 
```

因此，据 Presenter 所知，它有一些 IView（或者不管你做什么——我假设 Presenter 有一个 IView 但无论如何）上面有一个 UpdateLog 方法，可以通过传递一个 Func 参数来调用它。

就 View 所知，它的 UpdateLog 方法会被某人调用，并且无论 Func 输出如何，UI 都会使用它。在我的示例中，我只是将某些控件的文本设置为结果。如果需要调用 Invoke，它就是。

# php - 计算两个值之间的百分比并将结果提交到新表

> ID：12055369
> 
> 赞同：-2
> 
> 时间：2012-08-21T12:58:30.853
> 
> 标签：php, mysql, sql, insert

你将如何编写一个脚本来计算两个值之间的百分比变化，然后将结果提交到一个新的 MYSQL 表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:01:48.737

您可以在一个简单的 SQL 查询中完成，而无需在 PHP 中执行任何操作：

假设要插入的表被调用`newTable`并且有两列（`ID`这是 auto_increment，`percy`这是`col1/col2`来自 table2 的百分比值）：

```
insert into newTable 
(ID, percy) 
select 
    null, 
    col1/col2 
from 
    table2 
where 
    somecondition=someOtherCondition 
```

或者，如果您想获取原始行的 ID（称为 myID）并将计算的百分比插入到新表中：

```
insert into newTable 
    (ID, percy) 
    select 
        myID, 
        col1/col2 
    from 
        table2 
    where 
        somecondition=someOtherCondition 
```

# css - CSS 中的优先级问题

> ID：12055370
> 
> 赞同：2
> 
> 时间：2012-08-21T12:58:32.030
> 
> 标签：css

对不起，标题不够精确，我真的不知道该写什么。

的HTML：

```
<div id="blabla">
  hello
  <span class="red">hello2</span>
</div> 
```

的CSS：

```
#blabla{
  color: black;
}

#blabla:hover{
  color: white;
}

.red{
  color: red;
} 
```

当鼠标悬停在 div“blabla”上时，我希望字符串“hello2”变为白色。在当前状态下，它保持红色。

我已经尝试了我能想到的任何事情但没有成功，我希望你能帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:01:37.050

这就是你需要的：

```
#blabla:hover .red {
  color: white;
} 
```

看看：http: [//jsfiddle.net/4xhqc/](http://jsfiddle.net/4xhqc/)

问题是，即使选择器`#blabla:hover`比`.red`,更具体，`.red`也适用于有问题的元素本身 - 这使得它具有优先权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:01:49.480

您可以将最终的 CSS 规则更改为：

```
#blabla:hover span.red {
  color: white;
} 
```

您面临的问题是您的 div 规则`blabla`比 span 规则绑定得更紧密（即这些规则更具体）。有关规则特异性的更多信息，请参阅 BrainJar.com 上的 CSS 教程[“使用样式表”](http://www.brainjar.com/css/using/default4.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:06:08.333

您还需要指定 Span 元素悬停更改：

```
#blabla{
  color: black;
}

#blabla:hover{
  color: white;
}

#blabla span:hover{
  color: white;
}

.red{
  color: red;
} 
```

如果您希望该 div 中的所有元素都变为白色，则使用 * 选择器，但是同时指定每个元素的实现更有意义。

# vba - 仅当活动列中的第一个单元格具有某些值时，如何获取 MsgBox？

> ID：12055374
> 
> 赞同：0
> 
> 时间：2012-08-21T12:58:37.047
> 
> 标签：vba, excel

如果活动列中的第一个单元格不是“abc”，我试图退出

```
If Not Cells(1, ActiveCell.Column).Value = "abc" Then Exit Sub
MsgBox ("323") 
```

无论活动列中的第一个单元格是什么 - MsgBox 都不会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:12:24.247

怎么样

```
If Cells(1, ActiveCell.Column).Value <> "abc" Then Exit Sub
MsgBox ("323") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:06:05.343

在调用 msgbox 之前，您正在退出子程序。调用 msgbox 然后退出 sub。

# javascript - 用 JQuery/Javascript 替换字符串中的所有逗号

> ID：12055376
> 
> 赞同：12
> 
> 时间：2012-08-21T12:58:44.947
> 
> 标签：javascript, jquery, replace

我有一个表单，其中有几百个文本框，我想在加载它们时删除所有逗号并防止输入逗号。假设选择器是正确的，下面的代码不应该工作吗？

```
$(document).ready(function () {
  $("input[id*=_tb]")
  .each(function () {
      this.value.replace(",", "")
  })
  .onkeyup(function () {
      this.value.replace(",", "") 
  })
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-21T13:01:22.257

```
$(function(){
    $("input[id*=_tb]").each(function(){
        this.value=this.value.replace(/,/g, "");
    }).on('keyup', function(){
        this.value=this.value.replace(/,/g, "");
    });
}); 
```

`string.replace()`有关 javascript函数的说明和示例，请参见此处：

[http://davidwalsh.name/javascript-replace](http://davidwalsh.name/javascript-replace)

正如@Vega 所说，这不会将新值写回文本框 - 我更新了代码来这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T13:01:36.680

使用带有`g`标志的正则表达式而不是字符串：[`.replace(/,/g, "")`](http://jsfiddle.net/GhQ4T/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:01:48.277

您的代码看起来正确，只是它没有将值设置回输入字段，

```
$(document).ready(function () {
  $("input[id*=_tb]")
  .each(function () {
      this.value = this.value.replace(/,/g, "")
  })
  .onkeyup(function () {
      this.value = this.value.replace(/,/g, "") 
  })
}); 
```

**编辑：**使用的正则表达式

# javascript - 使用 JavaScript 或 jQuery 拆分文件

> ID：12055386
> 
> 赞同：11
> 
> 时间：2012-08-21T12:59:15.953
> 
> 标签：javascript, jquery, file, upload, split

我需要上传文件的一部分（只有第一个 MB）。我创建了一个上传整个文件的 PHP 脚本。数据（`formData`对象）由 ajax 调用传递。

我的想法是现在用 javascript (jquery) 拆分文件。我的要求有什么解决方案吗？

当前代码：

```
function start(a){
    //var fSize = $('#fileUpload')[0].files[0].size / 1024;
    var formData = new FormData();    
    formData.append( 'fileUpload', $('#fileUpload')[0].files[0] );
    //AJAX
    $.ajax({
        url: 'script.php',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(msg){
            alert("Win: " + msg);
        },
        error: function(bla, msg){
            alert("Fail: " + msg);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T13:53:42.247

由于您使用`FormData`的是一项相当新的技术，因此我也会向您展示一些新技术。

`FileReader`首先，用一个对象读取文件：

```
var fr = new FileReader(), buf, file = $('#fileUpload')[0].files[0];
fr.onload = function(e) {
    buf = new Uint8Array(e.target.result);
};
fr.readAsArrayBuffer(file); 
```

然后您可以`Blob`为每个拆分部分创建一个（每个`1e6`字节长）：

```
for (var i = 0, blobs = []; i < buf.length; i += 1e6)
    blobs.push(new Blob([buf.subarray(i, i + 1e6)])); 
```

最后，您可以将所有`Blob`s 添加到`FormData`对象中：

```
var formData = new FormData();
for (var i = 0; i < blobs.length; i++)
    formData.append("slice" + i, blobs[i], file.name + ".part" + i); 
```

你应该没事的。不过，我还没有测试过。

我对表演也一无所知。您也可以使用`fr.readAsBinaryString`，从而制作`e.target.result`一个字符串。这样，您可以`Blob`使用简单的`substring`// `slice`/ `substr`whatever 创建 s，但我担心 Unicode 字符之类的可能会有一些问题。另外，也许它更慢。

将所有内容放在一个更连贯的片段中：

```
$('#fileUpload').change(function() {
    // If no file is selected, there's nothing to do
    if (!this.files.length) return;

    var fr = new FileReader(), file = this.files[0];
    fr.onload = function(e) {
        splitAndSendFile(new Uint8Array(e.target.result), file);
    };
    fr.readAsArrayBuffer(file);
};

function splitAndSendFile(dataArray, file) {
    var i = 0, formData, blob;
    for (; i < dataArray.length; i += 1e6) {
        blob = new Blob([dataArray.subarray(i, i + 1e6)]);
        formData = new FormData();
        formData.append("fileUpload", blob, file.name + ".part" + (i / 1e6));
        $.ajax({
            url: 'script.php',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function(msg){
                alert("Win: " + msg);
            },
            error: function(bla, msg){
                alert("Fail: " + msg);
            }
        });
    }
} 
```

**注意**：接受第三个可选参数，如果是或值`FormData.append`，它应该是文件的名称。如果未指定，s 可能会得到不可预知的随机文件名。`File``Blob``Blob`

可能该参数不是标准的，并且在[MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)中没有提及，但我仍然在上面的代码段中使用了它。无论如何，如果你知道你在做什么，你可以有几个选项来指定文件名。例如，`formData.append("filename", file.name)`在请求中使用或发送自定义标头。

# clearcase - 关闭案例：合并管理器：错误：无法切换到基线

> ID：12055387
> 
> 赞同：1
> 
> 时间：2012-08-21T12:59:15.993
> 
> 标签：clearcase, clearcase-ucm, cleartool

在 Clearcase Project Explorer 中，在特性流的配置选项卡下，我选择主流的推荐基线，然后对流进行 rebase。这很好，然后我做了一个推荐的基线。但是，当我在此功能流下重新设置子流时，会出现以下错误。知道这里有什么问题吗？

```
The foundation configuration is invalid.
Switching to baseline "YYYYYYV50" of component "PPPP"
Switching to baseline "ZZZZZZZV50" of component "QQQQ"
Merge Manager: Error: Can't switch to baseline "TTTTTTT09V46"
of component "core" because the stream has made changes
based on the current baseline. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:56:38.983

这意味着：

*   您的组件“ `core`”是一个复合组件（它包括其他组件）
*   您的复合基线“ `TTTTTTT09V46`”中的“ `core`”包括其他基线
*   变基意味着改变基础基线。

如果您对其中一个子组件进行了任何修改，则只能通过在父 Stream 上生成的更新的基础基线对其进行变基。
因此，请检查`"TTTTTTT09V46`“（以及所有子基线）是否已在要素流中创建并且比子流上使用的基础基线更新。

如果涉及不可修改的组件，请检查这是否不是称为“寄生虫基线”的错误，详见“ [ClearCase UCM - 使用组件的最佳实践](https://stackoverflow.com/questions/1764329/clearcase-ucm-best-practices-using-components/1766662#1766662)”答案的“最终警告”部分。

# c# - 将新项目添加到列表中。我认为要么每次都覆盖原始项目，要么每次都创建一个新列表

> ID：12055388
> 
> 赞同：0
> 
> 时间：2012-08-21T12:59:17.693
> 
> 标签：c#, asp.net

我正在使用 asp.net 4 和 C#。我在通过单击按钮的事件将项目添加到列表时遇到问题。在按钮上单击我想从文本框中读取文本，将其转换为 int 并将其添加到 int 类型列表的底部。然后我想在标签中显示列表中的每个项目。问题是它每次只显示最新的文本框条目。我花了很长时间来研究这个并尝试不同的事情，但无法弄清楚我做错了什么。请问有人可以帮忙吗？

我的代码如下：

```
namespace CSI
{
    public partial class _Default : System.Web.UI.Page

{

string lablelItems;

List<int> numbers = new List<int>();

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void AddToSeqBTN_Click(object sender, EventArgs e)
    {
        int number;
        number = Convert.ToInt32(AddNumberTXB.Text);
        numbers.Add(number);
        printtolabel(numbers);

    }

    private void printtolabel(List<int> numbers)
    {
        foreach (int n in numbers)
        {
            lablelItems += " " + n.ToString();
            CurrentSequenceLBL.Text = lablelItems;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:03:33.293

HTTP 是无状态的。这意味着在 ASP.NET 中，所有对象都在页面生命周期结束时被销毁。因此，一旦页面呈现给客户端，它将不再存在于服务器的内存中。

因此，您需要将项目保存在某处。

[在 ASP.NET 应用程序中管理持久用户状态的九个选项。](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:07:27.043

在您的处理程序方法中

```
AddToSeqBTN_Click 
```

只是这样做：

```
CurrentSequenceLBL.Text += " " + Convert.ToInt32(AddNumberTXB.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:02:30.400

该列表`numbers`正在为您的页面收到的每个回发重新实例化。您必须将它的引用存储在某处，例如`Session`（在服务器上）或将其发送到`ViewState`（到客户端）。

另外，当您说“将其添加到底部”时，是字面意思吗？我的意思是，这个*职位*对你来说重要吗？因为，如果是，您应该使用另一个类，例如 a `Queue`，因为`List`不能确保位置。

# scroll - 如何确保块内联正常工作？

> ID：12055389
> 
> 赞同：0
> 
> 时间：2012-08-21T12:59:16.867
> 
> 标签：scroll, css

我手上有一个 CSS 问题，我似乎无法弄清楚。

我的目标是实现这一目标：

有一个非常大的 div（voyagescontainer），宽度为 2190 像素。在该 div 中，我有几个较小的 div（航程），其中包含更多 div（一个带有 4 个 fase-div 的 fasecontainer，在其下方是一个信息 div，与 fasecontainerdiv 一样宽）。

我遇到的问题是四个 fase-div 不是内联的（尽管 CSS 说“显示：内联块”），而是当它们显示在超父 div 范围之外（可以滚动）时，它们在彼此下方。希望它们彼此相邻，但我似乎无法修复它。当它们被放置在 parentdiv 的范围内时，它们看起来又漂亮又整洁。

举例说明：我制作了一个有两个航程的 JSfiddle。一个立即可见（并且有效），第二个更靠右。正如你所看到的，这个根本不整洁。

[http://jsfiddle.net/8BCur/1/](http://jsfiddle.net/8BCur/1/)

我想念什么？

**编辑**

两个 voyages-div 彼此相距很远的点是因为 voyagesdiv 和时间线div 是时间所固有的。div 的开始时间是 2012 年 1 月 1 日，结束时间正好是 5 年后，1day=4px。我从数据库中检索航行的开始日期，并计算该日期与 2012 年 1 月 1 日之间的天数。乘以 4 是 voyage-div 需要留下的像素数，相对于 voyageSdiv（宽 7304px）。

因此，float 和 block 将不起作用，因为现在它们失去了位置（这是显示 voyage-div 的点；））。

稍后，当它工作时，我正在使用 jQuery 使 div 的大小可调整/可拖动，以便我们可以在时间线上以图形方式计划内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:10:22.000

如果你想与旧版本的 IE 兼容，你应该避免使用内联块。而是尝试使用浮点数。这就是你所追求的吗？[http://jsfiddle.net/8BCur/2/](http://jsfiddle.net/8BCur/2/)

我所做的只是改变这个：

```
.voyage{
    display: inline-block;
    position:absolute;
    width:auto;
} 
```

对此：

```
.voyage{
    display: block;
    float: left;
    width:auto;
} 
```

您可以添加边距以使它们看起来更明显，但不确定您在追求什么......

**编辑：**
现在很清楚你在做什么，我再次更新了小提琴：http: [//jsfiddle.net/8BCur/7/](http://jsfiddle.net/8BCur/7/)
正如我之前建议的那样，我将内联样式更改`left: ##px`为`margin-left: ##px`. 似乎工作得很好imo。请注意，我还将值更改为整数。我建议您在服务器端脚本中将数字转换为整数，因为屏幕上没有半像素之类的东西。只会产生无用的字节，而您永远不知道我们的好朋友 IE 会怎么做。
希望这会有所帮助，如果不能随时告诉我！

# vba - 通过版本更新更新对另一个文档中单元格的引用

> ID：12055391
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:59:31.337
> 
> 标签：vba, excel

假设有一个 Excel 文档`C:\Budget-v034-2012.xlsx`(doc A) 和另一个 Excel 文档 (doc B) 引用了第一个文档中的一个单元格，如下所示：`='C:\[Budget-v034-2012.xlsx]Sheet1'!$A$1`

当文档 A 更新时，它会以更新的版本号保存（即 v034 变为 v035）。如何使 doc B 使用新版本号自动更新其引用？

该解决方案不需要完全自动化。例如，文档 B 中可能有一个单元格，其中手动提供了当前版本号，并且所有引用都自动合并了提供的版本号。如何实现这样的合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:30:31.167

这是一个非常简单（简单化？）的解决方案：

在您的文档 B 中，您可以存储文件的路径和/或名称（例如在我的示例中的单元格 A1 中）并使用[`INDIRECT`](http://www.cpearson.com/excel/indirect.htm)公式在另一个单元格中为您提供结果。

*   在单元格 A1 中：`Budget-v034-2012.xlsx`
*   在另一个单元格中：`=INDIRECT('C:[' & A1 & ']Sheet1'!$A$1)`

* * *

为了更好的可维护性，请注意您也可以使用[Named Range](http://www.cpearson.com/excel/named.htm)。

*   在文档 B 的工作表的单元格中添加路径或名称（Sheet1、单元格 A1 或其他）
*   在左上角（单元格 A1 上方）输入一个名称（您想要的名称），比如说`Path`
*   在另一张纸上，您可以使用以下公式：`=INDIRECT('C:[' & Path & ']Sheet1'!$A$1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:37:18.810

除非有充分的理由，否则通常更容易保持相同的文件名并更新文件单元格中的版本详细信息。这样，任何外部链接都将与相关数据保持同步。

如果您在 Excel 中使用新文件名保存新文件，则其他工作簿中的链接仍将链接到旧文件，并且只有在您删除文件或在外部重命名文件时才会断开。

有几种方法可以在 Excel 中手动执行此操作

1.  在 Excel 数据/编辑链接/突出显示源并单击更改源
2.  使用 Find & Replace，例如 find [Budget-v034-2012.xlsx] 替换为 [Budget-v035-2012.xlsx]（确保选项已启用并且 Lookin:= 公式和 March Entire 单元格内容：= FALSE）

如果您记录执行上述两项操作的宏，您将得到类似于

```
Sub Macro1()

ThisWorkbook.ChangeLink Name:="C:\Users\ooo\Desktop\Budget-v034-2012.xlsx", NewName _
        :="C:\Users\ooo\Desktop\Budget-v035-2012.xlsx", Type:=xlExcelLinks

End sub

Sub Macro1()

    Cells.Replace What:="[Budget-v034-2012.xlsx]", Replacement:="[Budget-v035-2012.xlsx]", LookAt:=xlPart _
        , SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
End Sub 
```

# php - PHP 字段验证 -（2 个字符后跟 6 个数字）示例：bp125489

> ID：12055393
> 
> 赞同：0
> 
> 时间：2012-08-21T12:59:33.340
> 
> 标签：php, javascript, regex

我正在开发一个带有字段验证的注册表单。那么，有人可以为我提供验证 8 个字符（2 个字母 + 6 个数字）字段的逻辑。

示例：验证值：bp123456

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:07:02.077

听起来您正在寻找的是正则表达式。

```
// Result holds either true or false
var patt = /(^[A-Za-z]{2}\d{6}$)/g;
var result = patt.test(str); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T13:07:07.293

```
if(preg_match('/^[a-z]{2}[0-9]{6}$/i')
{
//do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:02:49.957

您可能想要使用使用正则表达式的[preg_replace函数。](http://php.net/manual/function.preg-replace.php)这些很容易学习，至少对于您想要的行为而言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:16:58.353

我认为最好的方法是使用正则表达式。PHP 示例：

```
$value = 'bp123456';
$match = preg_match('^([a-zA-Z]{2}[\\d]{6})$',$value); 
```

如果 $match > 0 那么它是有效的

# iphone - 如何检查仅在 UITextField 中允许的特定字符串格式？

> ID：12055396
> 
> 赞同：1
> 
> 时间：2012-08-21T12:59:37.100
> 
> 标签：iphone, nsstring, uitextfield

我想检查我的文本字段中是否只允许使用字母、数字和一些特殊字符。只有 %&@-_。此特殊字符在 textfield 中是允许的，其他特殊字符是不允许的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:03:36.987

实施

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

在委托中，并检查其中的所有字符`string`是否属于您允许的类型。

检查字符是否属于集合的一种非常简单的方法是使用[`NSCharacterSet`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nscharacterset_Class/Reference/Reference.html)类。

# zend-framework - Zend 框架。模块化结构

> ID：12055397
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:59:39.933
> 
> 标签：zend-framework

做模块化目录结构。即我想要的结构如下：

```
application
  modules
       default
           controllers
           models
           views 

       my
           controllers
           models
           views 
```

索引控制器关闭（默认/控制器/IndexController.php）。但是当我转向位于我的目录中的控制器时 - 显示错误：

> 致命错误：在 /home/webhouse/public_html/metr/library/Zend/Controller/Dispatcher/Standard.php:248 中未捕获的异常“Zend_Controller_Dispatcher_Exception”和消息“指定的控制器无效（错误）”

当我尝试应用控制器的模型时出现同样的错误：

> 警告：include_once（IndexModel.php）[function.include-once]：无法打开流：没有这样的文件或目录

**我在application.ini中添加：**

```
; Front Controller
 resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
 resources.modules = "" 
```

我还需要在文件 application.ini 中注册什么，所以它对我有用吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:39:19.443

尝试命名你的控制器：

My_IndexController 类扩展 Zend_Controller_Action {}

# jquery - 担心 data-* 属性的安全性？

> ID：12055399
> 
> 赞同：3
> 
> 时间：2012-08-21T12:59:41.603
> 
> 标签：jquery, asp.net, custom-data-attribute

我刚开始使用 data-* 属性来存储 View 所需的自定义属性和值。例如 。

```
<div id='someId' data-ItemValues='SomeValues'>
</div> 
```

基于`data-*`我正在做一些操作（CRUD）。如果用户在客户端更改了 data-* 属性值（即从使用 firebug 和其他一些开发工具的浏览器）怎么办？我只是想知道，我们是否需要遵循任何标准，或者想知道社区如何处理这种情况。

**更新 ：**

我也会在服务器端验证。但在某些情况下。数据不存储在服务器中。它将被标记。只有当用户点击保存按钮时它才会保存。

我将从 javacript 中选择数据并使用 ajax 将值发送到服务器。但我担心的是，如果用户更改了 data-* 属性中的值，那么即使服务器端验证也会满足通过的规则。那我该如何预防呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:02:11.147

规则与以往一样。

[永远不要相信客户](http://en.wikipedia.org/wiki/Defensive_programming)。始终在服务器端验证和验证值是否符合您的期望。

这适用于隐藏字段中的值、通过 AJAX 传入的数据或来自不受您控制的机器的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:02:41.197

您存储在标记或 javascript 对象中的任何内容都可能很容易被篡改，因此我的建议是对来自此类属性/对象的任何内容执行服务器端验证，特别是如果您将其用于 CRUD 或任何类似操作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:02:57.983

**永远不要依赖（信任）客户端数据。**

始终进行服务器端验证以确保事务发生在正确的数据上。客户端应该使应用程序更具交互性和响应性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:02:25.673

我认为存储在 data-* 属性中的数据应该像任何其他客户端数据一样对待，即您应该不信任数据并在服务器上正确验证它。

# java - 为什么我的 JavaFX 2 应用程序的可见帧率如此不可靠？

> ID：12055401
> 
> 赞同：1
> 
> 时间：2012-08-21T12:59:54.910
> 
> 标签：java, windows, animation, javafx-2, frame-rate

我必须确定 JavaFX (2) 是否是我们即将构建的游戏平台的正确 UI 工具包。游戏是简单的 2D 游戏，没有什么花哨的东西，但对于用户体验来说，游戏看起来“流畅”很重要。

目前，我对一个简单的测试应用程序（在 ImageViews 中移动一些精灵）表现出的帧速率有些担忧。

*   在我的主显示器上运行应用程序时，在我的第二个显示器上使用鼠标执行某些操作时，应用程序的流畅度明显下降。这会持续几秒钟，然后恢复正常。
*   该应用程序在我的第二台显示器上从未达到与在我的主显示器上相同的平滑度。
*   请注意，这是关于人眼可见的帧速率差异。由于某种原因，内部帧速率（由`PerformanceTracker.getAverageFPS()`JavaFX Balls 演示应用程序报告）并没有下降（事实上，报告的数字甚至上升了几帧：通常它运行在 ~128fps 左右，当动画看起来像它口吃报告的fps是〜131）。这是与`javafx.animation.fullspeed=true`.
*   当我在后台打开 Flash 动画时，JavaFX 应用程序永远不会实现流畅的动画，即使 CPU 没有竞争（我的 CPU 大约使用了 30-40%）。虽然在这种情况下报告的帧速率实际上较低，但如果我的 CPU 甚至没有达到最大值，为什么我的帧速率会受到影响？

有谁知道这种糟糕的表现来自哪里？是平台的不成熟还是一些固有的限制？JavaFX 是否是（简单 2D）游戏平台的糟糕基础，除了使用 OpenGL 加速下降到 C++ 之外，没有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T08:40:08.557

JavaFX 没有理由会导致您描述的问题。

听起来很像你的显卡不匹配，是这样吗？

# java - 如何使用 Java 从 MySQL DB 获取数据作为 CSV 文件

> ID：12055403
> 
> 赞同：0
> 
> 时间：2012-08-21T13:00:09.573
> 
> 标签：java, mysql, csv

我正在使用以下 Java 代码从*MySQL*表中获取数据作为*CSV*文件。

使用此命令，我可以从*MySQL*获取数据作为 CSV*文件*：

```
mysql -uuname -ppassword BR_RNCM -e'select * from Inward where inwarddate between "2012-08-21 00:00:00" and "2012-08-21 23:59:59"'>/home/praveen/downloadfile.csv 
```

如何优化我的代码\算法？

我的代码是：

```
package com.mypackage.CAF.APController;

import com.rajsoft.CAF.util.DB2Connection;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class InwardDataDownload extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        Connection con = null;
        ResultSet rs = null;
        Statement st = null;

        String date1 = null;
        String date2 = null;

        date1 = request.getParameter("fromdate");
        date2 = request.getParameter("todate");

        System.out.println("Date1 : " + date1 + "Date2 : " + date2);

        try {
            response.setContentType("text/csv");

            out.write("CAF");
            out.write(',');
            out.write("MDN");
            out.write(',');
            out.write("CRT CODE");
            out.write(',');
            out.write("DISTRIBUTOR NAME");
            out.write(',');
            out.write("CLUSTER");
            out.write(',');
            out.write("MNP");
            out.write(',');
            out.write("LOT NO");
            out.write(',');
            out.write("INDEX NO");
            out.write(',');
            out.write("BOX NO");
            out.write(',');
            out.write("USER");
            out.write(',');
            out.write("INWARD DATE");
            out.write('\n');

            query = "select * from Inward where inwarddate between '" + date1 + "' and '" + date2 + "';";
            con = (Connection) new DB2Connection().getDatabaseConnection();
            st = con.createStatement();
            rs = st.executeQuery(query);
            while (rs.next()) {
                out.write(rs.getString(1));
                out.write(',');
                out.write(rs.getString(2));
                out.write(',');
                out.write(rs.getString(3));
                out.write(',');
                out.write(rs.getString(4));
                out.write(',');
                out.write(rs.getString(5));
                out.write(',');
                out.write(rs.getString(6));
                out.write(',');
                out.write(rs.getString(7));
                out.write(',');
                out.write(rs.getString(8));
                out.write(',');
                out.write(rs.getString(9));
                out.write(',');
                out.write(rs.getString(10));
                out.write(',');
                out.write(rs.getString(11));
                out.write('\n');
            }

            response.setContentType("application/download");
            response.setHeader("Content-disposition", "attachment; filename =InwardData.csv");
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            out.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:11:50.223

您可以使用 rs.getMetadata() 来获取 ResultSetMetaData 对象。这将告诉您有多少列，以及列名是什么。

使用该信息，您可以使用循环输出标题。

现在您知道了列数，您还可以使用循环输出每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:49:24.317

您无法消除该 while 循环，这是您执行时间的很大一部分。该循环基本上使您的过程成为 O(n) ，这非常好。由于您没有任何其他循环要消除，因此您已经处于非常好的位置。

[PrintWriters](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)在刷新到磁盘之前缓冲到内存，因此您不会因为等待写入磁盘完成而影响性能。虽然，您的代码没有提及任何有关刷新的内容，因此如果您使用非常大的数据集，您可能会遇到内存不足的问题。也许每千条记录执行一次 out.flush() （取决于最有效的方法）。

# c - 在 Visual C++ 中对外部函数进行原型设计

> ID：12055405
> 
> 赞同：1
> 
> 时间：2012-08-21T13:00:13.777
> 
> 标签：c, winapi, dll, prototyping

我有一些 exe 应用程序。这个应用程序有一个导出表并导出一堆功能。我想使用其中的一些。例如，我需要使用 ABS 功能。我打开了 Ida Pro，查看了伪代码，然后我有了下一个：

```
double __cdecl ABS(double *a1, double *a2)
{
 if ( *a2 < 0.0 )
 {
   *a1 = -1.0 * *a2;
 }
 else
 {
   *a1 = *a2;
   *(a1 + 4) = *(a2 + 4);
 }
 return *a1;
} 
```

然后我写了原型：

```
typedef double (*ABS)(double *,double *);

int _tmain(int argc,_TCHAR* argv[])
{
    HINSTANCE hMod = LoadLibrary(L"exe.exe");
    if (hMod!=NULL)
    {
        ABS func = (ABS)GetProcAddress(HMod,"ABS");
        if (func!=NULL)
        {
            double x=0;
            double y =-2;
            double z = func(&x,&y);
        }
    }

    return 0;
} 
```

我项目中的原型：

```
typedef double (*ABS)(double *, double *); 
```

好的，hMod 和 func 不是 NULL，但是结果我有一个错误（在读取内存时）或一些不正确的值。（例如：483435，-343524）请帮助我纠正这种情况

这里起源于 Ida pro 伪代码：

```
double __cdecl ABS(int a1, int a2)
{
  if ( *(double *)a2 < 0.0 )
  {
    *(double *)a1 = -1.0 * *(double *)a2;
  }
  else
  {
    *(_DWORD *)a1 = *(_DWORD *)a2;
    *(_DWORD *)(a1 + 4) = *(_DWORD *)(a2 + 4);
  }
  return *(double *)a1;
} 
```

我以为等于我的优化

PS：`*(a1 + 4) = *(a2 + 4);`是不是意味着我们搬地址？因为我们移动指针值

# c# - C# SOAP-ERROR：解析 WSDL：无法从

> ID：12055412
> 
> 赞同：0
> 
> 时间：2012-08-21T13:00:38.503
> 
> 标签：c#, asp.net, wcf, magento

我尝试将 magento Web 服务从[https://myclient.com/api/v2_soap/index/wsdl/1](https://myclient.com/api/v2_soap/index/wsdl/1)加载到我的 .net 控制台测试应用程序中。我添加了服务引用，它在带有端点的 app.config 文件中生成了 basichttpbinding。

但是，当我尝试登录时，出现此错误：“SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://myclient.com/index.php/api/v2_soap/index/wsdl/1/' :需要开始标签，'<' 未找到”

有任何想法吗？

```
System.ServiceModel.FaultException was unhandled
  HResult=-2146233087
  Message=SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://myclient.com/index.php/api/v2_soap/index/wsdl/1/' : Start tag expected, '<' not found

  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
```

应用程序配置：

```
<?xml version="1.0"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Mage_Api_Model_Server_V2_HandlerBinding" closeTimeout="00:01:00"
           openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"      
           maxBufferPoolSize="524288000" maxBufferSize="65536000" maxReceivedMessageSize="65536000">
          <security mode="Transport" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>

      <endpoint address="https://myclient.com/api/v2_soap/index/wsdl/1"
          binding="basicHttpBinding" bindingConfiguration="Mage_Api_Model_Server_V2_HandlerBinding"
          contract="TattyService.Mage_Api_Model_Server_V2_HandlerPortType"
          name="Mage_Api_Model_Server_V2_HandlerPort" />
    </client>
  </system.serviceModel>
</configuration> 
```

程序.cs：

```
 using (Mage_Api_Model_Server_V2_HandlerPortTypeClient proxy = new Mage_Api_Model_Server_V2_HandlerPortTypeClient())
            {
                proxy.login("username", "apikey");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:02:13.977

原来是网络主机添加了额外的 SSL 层，大多数机器都没有安装它。那是浏览器可以浏览它但不能浏览它的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:17:56.413

通过错误“ `Start tag expected, '<' not found`”这句话，基本问题一定是Magento文件“ `wsdl.xml`”中缺少XML Start标记。

我几乎不知道最简单的解决方案，但在浏览器中成功加载 WSDL 后，您绝对可以手动浏览每一行。根据错误的行，您将必须识别 Magento 模块，然后纠正此缺陷。

希望能帮助到你。

# php - 包含在包含中的全局对象

> ID：12055413
> 
> 赞同：1
> 
> 时间：2012-08-21T13:00:41.203
> 
> 标签：php, oop, include, globals

对吧

我对 OOP 相当陌生。

我正在使用 PHP v5+

我有我的 index.php：

```
<?
include_once('class/includes.php');
$reg = new register;
$action = $_GET['action'];
$page = $_GET['page'];
include('header.php');
if($page):
include($page);
else:
include('home.php');
endif;
include('footer.php');
?> 
```

我设置了我的 htaccess，以便每个页面的 url 是 foo.com/pagename

没关系。

在我的 classes.php 页面 (foo.com/classes) 上，默认情况下包括 viewClasses.php //注意类是指瑜伽类而不是 OOP 类

所以基本上我有 2 个级别的包含（index.php 包括 classes.php，其中包括 viewClass.php）

这是我的 viewClass.php

```
<?
global $reg;
$reg->viewClassList();
echo $reg->classList;

?> 
```

由于某种原因，它没有按照 index.php 中的定义获取 $reg，因此给了我这个错误：

致命错误：在第 3 行的 /home/pandazco/public_html/register/viewClass.php 中的非对象上调用成员函数 viewClassList()

我希望这能很好地解释我的问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:06:11.600

问题似乎是您没有在 viewClass.php 中包含实例化，这意味着 $reg 什么都不是。这就是错误告诉您的内容。

但是我永远不会使用全局变量，事实上我很确定有很多关于不使用它们的冗长讨论。相反，如果您需要在不同的 php 脚本之间传递数据，我会设置一个会话变量并从中读取。

另外，为什么您仍然使用 $reg 作为全局变量？您似乎所做的只是在 index.php 中实例化它并尝试在 viewClass.php 中调用它。你到底想达到什么目的？

# jquery - 使用 json 传递 jquery 变量

> ID：12055417
> 
> 赞同：1
> 
> 时间：2012-08-21T13:01:00.843
> 
> 标签：jquery, ajax, json, cakephp

我正在尝试将 jquery 字符串传递给我的 cakephp 控制器，但我不断收到错误消息，提示 json_decode 需要一个字符串，但传递了一个数组。

这是我的ajax的代码：

```
var str = 'Data that i need';

    var jsonString = JSON.stringify(str);

    $.ajax({
        type: "POST",
        url: "http:/Configs/",
        cache: false,
        datatype: 'json',
        data: {data : jsonString},
        timeout: 100000,

        success: function(data) 
        {
            alert('Ok');
        }
    }); 
```

在我的控制器中，我试图像这样接收数据：

```
$value = json_decode($_POST['data']); 
```

但我得到了上述错误任何想法如何解决这个问题将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:26:49.340

你确定你使用的网址是正确的吗？如果您使用的是 CakePHP，那么您为什么不使用`$this->request->data`?

尝试使用调试代码

```
pr($_POST); exit; 
```

或者

```
pr($this->request); exit; 
```

他们说什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:05:55.920

尝试这个：

```
var str = 'Data that i need';

var jsonString = JSON.stringify(str);

var DataToSend = {};
DataToSend.data = JSON.stringify(jsonString);

$.ajax({
    type: "POST",
    url: "http:/Configs/",
    cache: false,
    datatype: 'json',
    data: JSON.stringify(DataToSend),
    timeout: 100000,

    success: function(data) 
    {
        alert('Ok');
    }
}); 
```

# android - Android 2.x XML 旋转可绘制，移动方向错误

> ID：12055425
> 
> 赞同：1
> 
> 时间：2012-08-21T13:01:15.960
> 
> 标签：android, xml, rotation, drawable, seekbar

我对已旋转 135 度的自定义 XML 可绘制对象有疑问。

可绘制对象用作 SeekBar 布局组件中的拇指。

这在 Android 4 上运行良好，但在 Android 2.x 上，拇指以 135 度角朝外，而不是遵循 SeekBar 方向。这是我设置为拇指的drawable：

```
<item>
    <rotate android:drawable="@drawable/thumb_basic_shape"
        android:visible="true"
        android:fromDegrees="135"
        android:toDegrees="135" />
</item> 
```

我怀疑它与 Android 2.x 处理分层可绘制对象中引用的方式有关，但有没有办法修复它，最好是在 XML 中？

[这](http://i.imgur.com/4ISph.png)是一个图像，红色圆圈表示拇指*应该*在哪里，红色箭头表示拇指移动的方向，因为我拖动滑块。

[编辑]

下面给出的第一个答案指出我需要创建一个单独的持久旋转动画并将其应用于我的拇指可绘制对象。旋转视图或类似的 GUI 元素时有很多示例，但在这种情况下，我想旋转作为GUI SeekBar 元素*一部分的可绘制对象，它会带来一些额外的问题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:12:52.533

您可以使用持久旋转动画来做到这一点，并具有完整的 2.x 兼容性。

希望它会有所帮助。

# javascript - 获取鼠标悬停在不移动鼠标的元素 - jQuery JavaScript

> ID：12055429
> 
> 赞同：3
> 
> 时间：2012-08-21T13:01:20.343
> 
> 标签：javascript, jquery

我有一个包含几个过渡元素的应用程序。这些相同的元素对 mouseenter 和 mouseleave 事件作出反应。这些事件在转换期间被停用，以避免用户与传输中的元素交互。

当这些元素之一再次处于活动状态时位于鼠标下方时，问题就出现了。一旦移动的元素不再移动，它们应该再次注册鼠标悬停在它们上面。但是由于 mouseenter 是在元素被停用时发生的，所以一旦元素再次被激活，该事件就不会被触发。

如果您随后将鼠标从元素上移开，然后再移开，它就可以正常工作。这显然不是很用户友好。

有没有办法注册鼠标悬停在元素上而不移动鼠标？

有关上述元素的更多信息：所讨论的元素是包含大量内容的大型 div。它们实际上是我动态添加和删除的应用程序中的页面。我有一个自定义滚动条，显示该区域是否有焦点，如果没有则隐藏。

当鼠标移入页面内容区域时，会显示自定义滚动条。一旦它移出，滚动条就会再次隐藏。在动画运行期间，所有事件都处于非活动状态。

问题是当页面动画时鼠标移动到页面区域，滚动条不（也不应该）显示。然而，一旦动画完成，应用程序应该注册用户正在页面区域内悬停，而无需将鼠标移出和移回该空间内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:24:10.367

使用`mousemove`事件跟踪鼠标的位置，并在使用重新启用行为时在最后一个已知的鼠标位置测试元素

```
document.elementFromPoint(x, y) 
```

# c# - C#：字符串作为事件的参数？

> ID：12055431
> 
> 赞同：13
> 
> 时间：2012-08-21T13:01:26.397
> 
> 标签：c#, .net, multithreading, events, event-handling

我有一个用于我的表单的 GUI 线程和另一个计算事物的线程。

该表单有一个richtTextBox。我希望工作线程将字符串传递给表单，以便每个字符串都显示在文本框中。

每次在工作线程中生成一个新字符串时，我都会调用一个事件，现在应该显示该字符串。但我不知道如何传递字符串！这是我到目前为止所尝试的：

```
///// Form1
private void btn_myClass_Click(object sender, EventArgs e)
{
    myClass myObj = new myClass();
    myObj.NewListEntry += myObj_NewListEntry;
    Thread thrmyClass = new Thread(new ThreadStart(myObj.ThreadMethod));
    thrmyClass.Start();
}

private void myObj_NewListEntry(Object objSender, EventArgs e)
{
    this.BeginInvoke((MethodInvoker)delegate
    {
        // Here I want to add my string from the worker-thread to the textbox!
        richTextBox1.Text += "TEXT"; // I want: richTextBox1.Text += myStringFromWorkerThread;
    });
} 
```

* * *

```
///// myClass (working thread...)
class myClass
{
    public event EventHandler NewListEntry;

    public void ThreadMethod()
    {
        DoSomething();
    }

    protected virtual void OnNewListEntry(EventArgs e)
    {
        EventHandler newListEntry = NewListEntry;
        if (newListEntry != null)
        {
            newListEntry(this, e);
        }
    }

    private void DoSomething()
    {
        ///// Do some things and generate strings, such as "test"...
        string test = "test";

        // Here I want to pass the "test"-string! But how to do that??
        OnNewListEntry(EventArgs.Empty); // I want: OnNewListEntry(test);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T13:20:07.760

像这样

```
public class NewListEntryEventArgs : EventArgs
{
    private readonly string test;

    public NewListEntryEventArgs(string test)
    {
        this.test = test;
    }

    public string Test
    {
        get { return this.test; }
    }
} 
```

然后你像这样声明你的类

```
class MyClass
{
    public delegate void NewListEntryEventHandler(
        object sender,
        NewListEntryEventArgs args);

    public event NewListEntryEventHandler NewListEntry;

    protected virtual void OnNewListEntry(string test)
    {
        if (NewListEntry != null)
        {
            NewListEntry(this, new NewListEntryEventArgs(test));
        }
    }
} 
```

并在订阅中`Form`

```
private void btn_myClass_Click(object sender, EventArgs e)
{
    MyClass myClass = new MyClass();
    myClass.NewListEntry += NewListEntryEventHandler;
    ...
}

private void NewListEntryEventHandler(
    object sender,
    NewListEntryEventArgs e)
{
    if (richTextBox1.InvokeRequired)
    {
        this.Invoke((MethodInvoker)delegate
            {             
                this.NewListEntryEventHandler(sender, e);
            });
        return;
    }

    richTextBox1.Text += e.Test;
} 
```

* * *

我冒昧地使`NewListEntryEventArgs`类不可变，因为这是有道理的。我还部分更正了您的命名约定，在方便的地方进行了简化和更正。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:02:58.777

您需要通过继承 EventArgs 创建一个新类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T13:07:26.010

创建您自己的`EventArgs`.

像这样做：

```
public class MyEventArgs : EventArgs
{
   public string MyEventString {get; set; }

   public MyEventArgs(string myString)
   {
       this.MyEventString = myString;
   }
} 
```

然后在您的代码中替换为`EventArgs`并`MyEventArgs`创建一个`MyEventArgs`包含您的字符串的对象。

然后您可以使用`MyEventArgs`实例访问它`.MyEventString`。

所以你会做这样的事情：

```
///// myClass (working thread...)
class myClass
{
    public event EventHandler NewListEntry;

    public void ThreadMethod()
    {
        DoSomething();
    }

    protected virtual void OnNewListEntry(MyEventArgs e)
    {
        EventHandler newListEntry = NewListEntry;
        if (newListEntry != null)
        {
            newListEntry(this, e);
        }
    }

    private void DoSomething()
    {
        ///// Do some things and generate strings, such as "test"...
        string test = "test";

        OnNewListEntry(new MyEventArgs(test));
    }
} 
```

并以您的形式：

```
private void myObj_NewListEntry(Object objSender, MyEventArgs e)
{
    this.BeginInvoke((MethodInvoker)delegate
    {
        // Here I want to add my string from the worker-thread to the textbox!
        richTextBox1.Text += e.MyEventString;
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:05:46.413

一般来说，您需要继承`EventArgs`并添加一个`string`属性，然后将您的事件设为 类型`EventHandler<YourEventArgs>`，但这是`BackgroundWorker`.

示例：http: [//msdn.microsoft.com/en-us/library/cc221403 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

在这里： [C# backgroundWorker 报告字符串？](https://stackoverflow.com/questions/1289310/c-sharp-backgroundworker-reports-string)

# jquery - 将 JSON 数据附加到 POST 请求

> ID：12055435
> 
> 赞同：7
> 
> 时间：2012-08-21T13:01:42.107
> 
> 标签：jquery, asp.net-mvc, post

我有一个正确提交并将完整模型发送到控制器的 AJAX 表单。我想要的是添加一个与请求一起发送的 JSON。我设法像这样拦截POST：

```
$(document).ready(function() {
    $("form").submit(function(e) {
        if (e.originalEvent.explicitOriginalTarget.id == "submit") {
        }
    }); 
```

我不知道如何发送我的 JSON 数据，同时还保留最初在表单提交中发送的数据。我曾想过添加一个隐藏字段，将其值设置为 JSON 字符串，然后在服务器上对其进行反序列化，但这似乎是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:05:46.507

如果不能使用 AJAX，则必须使用隐藏字段将 JSON 数据存储在表单中。否则你的 JSON 将永远不会被发送到服务器。HTML 规范明确规定了规则：只有表单内的输入字段中包含的值才会在提交表单时发送到服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:08:00.787

随意使用 jQuery 我的功能：

```
$.fn.addHiddenInputData = function(data) {          
      var keys = {};          
      var addData = function(data, prefix) {          
          for(var key in data) {
              var value = data[key];
              if(!prefix) {
                var nprefix = key;                                            
              }else{
                var nprefix = prefix + '['+key+']';
              }
              if(typeof(value) == 'object') {                                    
                  addData(value, nprefix);
                  continue;
              }
              keys[nprefix] = value;
          }          
      }          
      addData(data);          
      var $form = $(this);      
      for(var k in keys) {
          $form.addHiddenInput(k, keys[k]);
      }

}
$.fn.addHiddenInput = function(key, value) {      
      var $input = $('<input type="hidden" name="'+key+'" />')
      $input.val(value);
      $(this).append($input);

} 
```

用法：

```
// click event is fired before submit event
$('#form input[type="submit"]').click(function(){

  // add some JSON data before submit
  $('#form').addHiddenInputData({
    'foo': 123,
    'bar': 456,
    'foo2': {
      'bar': 123
    }
  });
}); 
```

不需要使用ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:06:29.697

如果您阅读 jQuery 文档中的信息，您会注意到**$.post()**有一个 Data 选项。

*   **data**：与请求一起发送到服务器的映射或字符串。

例子 ：

```
$.post("test.php", { name: "AdrianMar" } ); 
```

您可以使用通常的`$("form").serialize()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:10:42.193

要进行实际的 Ajax 发布，您可以使用[JQuery.Ajax](http://api.jquery.com/jQuery.ajax/)（有更多选项）或[JQuery.Post](http://api.jquery.com/jQuery.post/)

对于数据，您可以使用`$("form").serialize()`来获取所有表单的数据。然后，您可以像这样手动添加其他数据`var data = $("form").serialize() + ",other=data"`。如果您想添加大量数据，这可能会变得混乱。更简单的选择是在表单中添加隐藏字段，当您调用时它们将包含在数据中`serialize()`

示例：-这将发布所有数据，包括包含额外数据的隐藏字段。

```
$.post('www.magicurl.com/api', $("form").serialize(),
                function (data) {
                    //process data from server
                }); 
```

# c# - 从多 tiff 获取页面

> ID：12055436
> 
> 赞同：1
> 
> 时间：2012-08-21T13:01:44.477
> 
> 标签：c#, tiff, libtiff.net

NET 库检索多 tiff 中的页面计数。[我使用来自http://bitmiracle.com/libtiff/help/retrieve-number-of-pages-in-tiff-image.aspx](http://bitmiracle.com/libtiff/help/retrieve-number-of-pages-in-tiff-image.aspx)的样本 。

```
 public int GetNumberOfPages(Tiff image)
    {
        int pageCount = 0;
        do
        {
            ++pageCount;
        } while (image.ReadDirectory());

        return pageCount;
    }

    [TestMethod]
    public void GetNumberOfPages()
    {
        using (Tiff tiffFromFile = Tiff.Open(@"test.tif", "r"))
        {
            int numberOfPages = GetNumberOfPages(tiffFromFile);
        }

    } 
```

我得到异常： **无法写入已关闭的 TextWriter。**

堆栈跟踪：

```
at System.IO.__Error.WriterClosed()
   at System.IO.StringWriter.Write(String value)
   at Microsoft.VisualStudio.TestTools.TestTypes.Unit.ThreadSafeStringWriter.Write(String value)
   at System.IO.TextWriter.Write(String format, Object arg0)
   at System.IO.TextWriter.SyncTextWriter.Write(String format, Object arg0)
   at BitMiracle.LibTiff.Classic.TiffErrorHandler.WarningHandler(Tiff tif, String method, String format, Object[] args)
   at BitMiracle.LibTiff.Classic.Tiff.WarningExt(Tiff tif, Object clientData, String method, String format, Object[] args)
   at BitMiracle.LibTiff.Classic.Tiff.ReadDirectory() 
```

代码与示例相同。我找不到这个问题的根源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:14:46.573

我猜这个问题可能与不支持的图像类型或您传递的 tiff 文件中的错误有关。如果您想响应错误，LibTiff 文档会讨论添加自定义处理程序。以前没有使用过那个库，我不能确定发生了什么。我猜可能在 Open 中有一个错误，但是没有处理程序，它吃掉了错误。然后当你尝试`ReadDirectory`文件已经关闭时。这只是一个猜测。我建议您添加一个错误处理程序，看看发生了什么。

[http://bitmiracle.com/libtiff/help/tiff.seterrorhandler.aspx](http://bitmiracle.com/libtiff/help/tiff.seterrorhandler.aspx)

编辑：

我回头查看了示例页面。他们实际上给出了两种读取页数的方法。您是否尝试过更简单的方法来查看是否以同样的方式失败？ `To calculate number of pages in a TIFF image the Tiff.NumberOfDirectories() method or a simple loop that traverses directories can be used. This sample shows both methods.`

您应该能够将您的方法变成这样：

```
public short GetNumberOfPages(Tiff image)
{
    return image.NumberOfDirectories()
} 
```

如果您仍然遇到问题，请尝试使用您知道有效且包含多个页面的其他图片，以便排除图片问题。

# c# - 仅来自登台服务器的 ActiveDirectory 错误

> ID：12055460
> 
> 赞同：0
> 
> 时间：2012-08-21T13:03:01.070
> 
> 标签：c#, vb.net, active-directory

尝试登录我的应用程序时收到以下错误。它在本地工作，但在使用远程服务器时收到此错误。

**错误**

```
The format of the specified domain name is invalid.
System.DirectoryServices.ActiveDirectory.ActiveDirectoryOperationException: The format of the specified domain name is invalid. 
```

**堆栈跟踪**

```
[ActiveDirectoryOperationException: The format of the specified domain name is invalid.]
System.DirectoryServices.ActiveDirectory.DirectoryContext.GetDnsDomainName(String domainName) +195
System.DirectoryServices.ActiveDirectory.DirectoryContext.GetLoggedOnDomain() +785
System.DirectoryServices.ActiveDirectory.DirectoryContext.IsContextValid(DirectoryContext context, DirectoryContextType contextType) +186
System.DirectoryServices.ActiveDirectory.DirectoryContext.isDomain() +66
System.DirectoryServices.ActiveDirectory.Domain.GetDomain(DirectoryContext context) +98
PQI.ActiveDirectoryPasswordExpires..ctor() in [PATH REMOVED]\vb\ActiveDirectoryPasswordExpires.vb:11
PQI._Default.UserIsSuper(String username, String password) in [PATH REMOVED]\Default.aspx.vb:104
PQI._Default.rb_Login_Click(Object sender, EventArgs e) in [PATH REMOVED]\Default.aspx.vb:20
Telerik.Web.UI.RadButton.RaisePostBackEvent(String eventArgument) +311
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3707 
```

这是一个标准的 VB.Net 应用程序，没有什么特别之处，只是检查 AD 以验证登录用户（正如堆栈跟踪所暗示的，超级用户是否属于特定的 AD 组）。有没有人遇到过这个问题？我究竟做错了什么？

暂存服务器上的应用程序位于其自己的 .Net 4.0/Integrated 应用程序池中。

为了回答 Matt Wilko 的问题，LDAP 字符串是动态生成的。下面 New() 函数的第一行是触发错误的原因。

```
Public Sub New()
    Dim currentDomain As Domain = Domain.GetCurrentDomain
    Dim root As DirectoryEntry = currentDomain.GetDirectoryEntry
    Using (currentDomain)
        Using (root)
            Me.policy = New ActiveDirectoryDomainPolicy(root)
        End Using
    End Using
End Sub 
```

# python - 在 Python 中传递列表的费用是多少？

> ID：12055461
> 
> 赞同：4
> 
> 时间：2012-08-21T13:03:05.977
> 
> 标签：python

我有一个迭代函数 phi，它会多次调用自身以返回正确的结果。

```
def phi(n, primes, phis): 
```

其中 primes 是一个素数列表，1 < n < 10,000,000 并且 phis 是在 n 的相同范围内的所有值的列表。

在 Python 中执行此操作是否需要昂贵的计算？我的猜测是它不会花费太多，因为我们在 Python 中处理指针，所以传递的只是指针？然而，有了这个函数，即使是 POINTERS 也会被传递很多（阅读：sh##load）。这计算成本高吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:04:26.327

你是对的，你没有传递整个列表，而是一个指针。您将招致函数调用的常规开销，这将远远超过指针/参数的传递。

# jquery - 处理 jQuery 中附加元素的单击事件

> ID：12055462
> 
> 赞同：28
> 
> 时间：2012-08-21T13:03:07.073
> 
> 标签：jquery, onclick, append

我使用以下方法在我的页面中生成了一些元素。例如，

```
$("#button"+caption).click(function(){
        var firstDisplay = '<div id="firstDisp'+caption+'"><ul>';
        for(var i=0;i<parents.length;i++){
            firstDisplay=firstDisplay+'<li class="fClick">'+parents[i]+'</li>';
        }
        firstDisplay=firstDisplay+'</ul></div>';
        $(firstDisplay).dialog();
}); 
```

当我像这样为'fClass'创建一个onclick事件时：

```
$(".fClick").click(function(){
    alert("hey!");
}); 
```

它不起作用！但是，如果我将 onclick 函数放在另一个函数中，就在 .dialog() 之后，它可以工作！我有很多以这种方式创建的元素，所以我不能将所有 onclick 事件放在一个方法中。有没有办法解决？我对 .append 方法也有同样的问题。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-21T13:04:40.867

将其更改为`.on`或`.delegate`基于您正在使用的 jQuery 版本..

**从 jQuery 1.7+ 开始**

```
$(document).on('click', '.fClick', function(){ 
    alert("hey!");
}); 
```

对于较旧的 jQuery 版本，请使用委托

```
$(document).delegate('.fClick', 'click', function(){
    alert("hey!");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:04:31.390

使用`on`代替`click`：

```
$(".fClick").on('click',function(){
  alert("hey!");
}); 
```

`click`将点击处理程序添加到`.fClick`调用时出现的元素`$('.fClick').click({...})`。以后添加的新`.fClick`元素不会有点击事件。但是当您使用 时`on`，所有`.fClick`元素都会有一个点击处理程序，即使它们是稍后添加的。
在这里阅读更多：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T16:24:24.973

再次调用 $(document).ready(function() 并在那里添加您的代码。该文档再次被读取（刷新），您可以在那里应用您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T16:20:45.223

维加所说的完全有效。有一个提示：我认为第二行有一个错误。可能您可以使用 addClass 方法，因为您不能将 id 或 class 放入渲染中。这是一个例子：

```
var content = "<div>Hello, World</div>";
$("div").after(content);
$("last:div").addClass("mydiv"); 
```

并且将添加该类，但我不确定您是否可以添加一个 id。

# c# - 映射列表字典的替代方法？

> ID：12055464
> 
> 赞同：5
> 
> 时间：2012-08-21T13:03:11.930
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate

我有一个简单的模式，如下所示：

[![](../Images/44c2b1edab271231f33b52be7a735c53.png)](https://i.stack.imgur.com/kl5ci.png)

这个想法是有用户、部门和流程。对于每个部门，用户可以“星标”多个流以“标记”它们（因此部门/用户对可以有多个流）。

理想情况下，我想使用以下类：

```
public class User
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; set; }
}

public class Department
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; set; }
    public virtual IDictionary<User, IList<StarredFlow>> StarredFlows { get; protected set; }

    public Department()
    {
        this.UserStarredFlows = new Dictionary<User, IList<StarredFlow>>();
    }
}

public class Flow
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; set; }

    protected Flow() { }
}

public class StarredFlow
{
    public virtual int Id { get; protected set; }
    public virtual User User { get; protected set; }
    public virtual Department EntryPoint { get; protected set; }
    public virtual Flow Flow { get; protected set; }
    public virtual string Name { get; protected set; }

    protected StarredFlow() { }

    public StarredFlow(User user, Department ep, Flow flow, string name)
    {
        this.User = user;
        this.EntryPoint = ep;
        this.Flow = flow;
        this.Name = name;
    }
} 
```

这*将*允许非常文字代码：

```
var userStarredFlowsForDepartment = department.StarredFlows[currentUser]; 
```

但是，NHibernate 不支持列表的映射字典。我发现了一个[类似的问题/答案](https://stackoverflow.com/a/1308544/200322)，涉及将 移动`IList<StarredFlow>`到新类并使用组件对其进行映射。遗憾的是，FluentNHibernate 不支持使用组件进行集合映射（没有`HasMany`脱离组件映射）。

这对于 NHibernate 来说似乎是一件微不足道的事情，但我正在努力寻找解决方案。有没有更好的解决方案来做到这一点？我真的很想*不必*解决*只*使用`session.Save(starredFlow)`and`Query<StarredFlow>()`因为它们将逻辑移到模型之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:34:15.620

你想做的事情**绝对**不支持。我并不是说它不是理论上有效的设计，但 NHibernate 不支持它，而且它不太可能在未来这样做。

也就是说，您始终可以使用方法`Department`而不是字典，并采用`IQueryable`：

```
public IEnumerable<StarredFlow> GetUserStarredFlows(IQueryable<StarredFlow> source,
                                                    User user)
{
    return source.Where(x => x.User == user)
                 .ToList(); //you could skip this depending on your usage
} 
```

或者（更复杂一点）你可以注入`IQueryable`或会话。

# c# - 网络服务性能

> ID：12055465
> 
> 赞同：0
> 
> 时间：2012-08-21T13:03:13.090
> 
> 标签：c#, .net

我有几个在 IIS 7 上运行的负载平衡应用程序服务器。我需要检查每个服务器进行了多少 Web 服务调用。我还需要在特定情况下检查这一点。我们在 .net 中是否有一些东西可以与服务器通信并给我特定实例的快照。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:23:10.373

您可以使用 Perfmon 添加有关调用次数的统计信息。一旦你这样做了，你也可以添加计时数据......然后你可以在本地机器上使用 Perfmon 或使用任意数量的工具远程连接它。

抱歉，我无法指出具体细节——我只看到它完成了，我自己没有做过:) 但我认为这很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:40:57.737

还有一些示例代码，展示了如何实现性能计数器：

```
using System;
using System.Configuration;
using System.Diagnostics;
namespace TEST
{
    // sample implementation
    public static class PerformanceHelper
    {
        // update a performance counter value
        public static void UpdateCounter(string WebMethodName, int count)
        {
            // to be able to turn the monitoring on or off
            if (ConfigurationManager.AppSettings["PerformanceMonitor"].ToUpper() == "TRUE")
            {
                PerformanceCounter counter;
                if (!PerformanceCounterCategory.Exists("SAMPLE"))
                {
                    CounterCreationDataCollection listCounters = new CounterCreationDataCollection();
                    CounterCreationData newCounter = new CounterCreationData(WebMethodName, WebMethodName, PerformanceCounterType.NumberOfItems64);
                    listCounters.Add(newCounter);
                    PerformanceCounterCategory.Create("SAMPLE", "DESCRIPTION", new PerformanceCounterCategoryType(), listCounters);
                }
                else
                {
                    if (!PerformanceCounterCategory.CounterExists(WebMethodName, "SAMPLE"))
                    {
                        CounterCreationDataCollection rebuildCounterList = new CounterCreationDataCollection();
                        CounterCreationData newCounter = new CounterCreationData(WebMethodName, WebMethodName, PerformanceCounterType.NumberOfItems64);
                        rebuildCounterList.Add(newCounter);
                        PerformanceCounterCategory category = new PerformanceCounterCategory("SAMPLE");
                        foreach (var item in category.GetCounters())
                        {
                            CounterCreationData existingCounter = new CounterCreationData(item.CounterName, item.CounterName, item.CounterType);
                            rebuildCounterList.Add(existingCounter);
                        }
                        PerformanceCounterCategory.Delete("SAMPLE");
                        PerformanceCounterCategory.Create("SAMPLE", "DESCRIPTION", new PerformanceCounterCategoryType(), rebuildCounterList);
                    }
                }
                counter = new PerformanceCounter("SAMPLE", WebMethodName, false);
                if (count == -1)
                    counter.IncrementBy(-1);
                else
                    counter.IncrementBy(count);
            }
        }
    }
} 
```

# iphone - 为什么我的 tableView 总是使用空单元格？

> ID：12055467
> 
> 赞同：1
> 
> 时间：2012-08-21T13:03:16.030
> 
> 标签：iphone, cocoa-touch, uitableview

我为tableView做了一个简单的代码来显示一些玩家数据；但是，我总是得到空桌子。

这是一个包含从站点获取的数据的表。我想显示带有玩家编号（作为部分）和玩家名称（作为行）的表格。

但是在我运行程序之后，它会出现空单元格，并且似乎没有获取尝试。

谁能告诉我我的代码有什么问题？非常感谢。

```
#import "playerName.h"

@interface playerName ()
@end

@implementation playerName
@synthesize players = _players;
@synthesize sectionInRtf = _sectionInRtf;

- (NSMutableDictionary *)getPlayerFormRtf
{
    if (!_players) {
        NSURL *url = [NSURL URLWithString:@"file_on_site"];
        _players = [NSMutableDictionary dictionaryWithContentsOfURL:url];
    }
    return _players;
}
- (NSArray *)getSections
{
    if (!_sectionInRtf) {
        _sectionInRtf = [self.players allKeys];
    }
    return _sectionInRtf;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Players";
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
}
- (void)viewDidUnload
{
    [super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return self.sectionInRtf.count;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSArray *namesInSection = [self.players objectForKey:[self.sectionInRtf objectAtIndex:section]];
    return namesInSection.count;
}
//Additional Method
- (NSString *)name:(NSIndexPath *)indexPath
{
    NSArray *nameInSection2 = [self.players objectForKey:[self.sectionInRtf objectAtIndex:indexPath.section]];
    return [nameInSection2 objectAtIndex:indexPath.row];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"players";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.textLabel.text = [self name:indexPath];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:06:11.207

这看起来像您正在尝试覆盖访问器方法，但您没有使用正确的命名。我做出这个假设是因为你从来没有真正打电话给`getPlayerFormRtf`.

通过两个简单的修改，代码应该可以工作（虽然不是很好）。

```
- (NSMutableDictionary *)players
{
    if (!_players) {
        NSURL *url = [NSURL URLWithString:@"file_on_site"];
        _players = [NSMutableDictionary dictionaryWithContentsOfURL:url];
    }
    return _players;
}
- (NSArray *)sectionInRtf
{
    if (!_sectionInRtf) {
        _sectionInRtf = [self.players allKeys];
    }
    return _sectionInRtf;
} 
```

**请**注意，这是一个*非常*糟糕的主意，指的是同步加载 url，因为您的占位符 url 字符串似乎暗示了网络访问 url。这可能会阻塞主线程足够长的时间以致应用程序被杀死。

# spotify - Spotify 应用程序 javascript 交叉淡入淡出

> ID：12055472
> 
> 赞同：2
> 
> 时间：2012-08-21T13:03:32.920
> 
> 标签：spotify, spotify-queue

如何在基于 Spotify javascript 的应用程序上实现交叉淡化？

我正在创建一个临时播放列表并动态添加歌曲，添加的歌曲播放但不会交叉淡入淡出。

编辑：我想真正的问题是如何让 Spotify 刷新播放队列。添加的歌曲仅在曲目更改时添加到可见的播放队列中，这使其不会交叉淡入淡出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:33:56.140

目前在 spotify 应用程序（https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html）中没有对交叉淡化的编程访问但是，如果用户启用了交叉淡化（设置->播放->交叉淡入淡出轨道）和模型。播放器正在从具有多个轨道（如播放列表或专辑）的上下文中播放，然后交叉淡入淡出应该开始。这里需要注意的是，您必须尽早添加播放列表中的下一首歌曲，所以客户有时间识别播放列表的变化。验证您是否及时添加的一种方法是确保“播放队列”显示它将播放播放列表中的下一首歌曲。

# scala - 按位置对 ListBuffer 进行排序

> ID：12055477
> 
> 赞同：4
> 
> 时间：2012-08-21T13:03:43.217
> 
> 标签：scala, sorting, position, traits

不幸的是，`scala.util.parsing.input.Position`没有扩展`Ordering[Position]`。

`ListBuffer`要根据位置对错误进行排序，我使用以下代码：

```
semanticErrors.sortBy(_.pos)(new Ordering[Position] {
  def compare(x: Position, y: Position): Int = x.line - y.line 
}).toList 
```

我相信这可以做得更优雅。但是怎么做？例如，我注意到`Position`实现`<`. 是否有一个通用包装器可以将支持的东西`<`变成`Ordering`?

* * *

有趣的是，当转换为第一个时，这似乎要容易得多`List`：

```
semanticErrors.toList.sort((a, b) => a.pos < b.pos) 
```

但这可能不是最有效的解决方案。就地的那种`ListBuffer`将是理想的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:18:26.603

`ListBuffer`您可以使用以下方法对 a 进行排序`sortWith`：

```
semanticErrors.sortWith(_.pos < _.pos) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T17:56:16.553

使用`sortWith`drexin 说的一次性使用是最简单的，但有几点注意事项：

1)`sort`已弃用，所以不要使用它。文档告诉您`sortWith`改用。

2)`Ordering`是一个类型类，所以不会扩展它（不像`Ordered`）。您只需要在隐式范围内拥有一个，通常在伴随对象中。然而`Position`没有同伴。所以你可以自己添加隐式：

```
implicit val posOrd: Ordering[Position] = Ordering.fromLessThan(_ < _) 
```

然后`semanticErrors.sortBy(_.pos)`应该工作。

# .net - 新的 DbContext 对象不是全新创建的吗？

> ID：12055481
> 
> 赞同：0
> 
> 时间：2012-08-21T13:03:53.207
> 
> 标签：.net, entity-framework, c#-4.0, entity-framework-4

我一直在观察一个非常奇怪的案例。

```
foreach (var obj in objs)
{
     // a - unattached object
     DomainObject a = this.dict[key];
     using(var context = new DomainModelContainer())
     {
         this.SomeMethod(context, a);
     }
}

...
private void SomeMethod(DomainModelContainer context, DomainObject obj)
{
    // some code here with the query

    context.Entry(obj).State = EntityState.Unchanged;
} 
```

毕竟我得到一个异常：ObjectStateManager 中已经存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

我想知道 DbContext 的新实例是否真的是新的，如果不是，我如何才能完全“清除”它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:45:17.917

我还没有设法找到上述问题的答案，但我已经设法解决了这个问题。

您需要做的就是每次创建一个全新的对象：

```
private void SomeMethod(DomainModelContainer context, DomainObject obj)
{
    // some code here with the query
    var newObj = new DomainObject() { Id = obj.Id };

    context.Entry(newObj).State = EntityState.Unchanged;
} 
```

由于某种原因，现在它工作正常。

# javascript - JS 事件冲突

> ID：12055492
> 
> 赞同：1
> 
> 时间：2012-08-21T13:04:26.073
> 
> 标签：javascript, jquery, collision

当我使用内置的 JS/jQuery 运行 html 时发生冲突。虽然此操作`onclick='window.location="location A"`适用于整个区域，并且`onclick='action 1'` 仅适用于“删除”链接。冲突是当我按下“删除”时，JS 首先计算出所需的 action1，并且（*不需要*）重定向到“位置 A”。是否可以将链接留在该区域内并使该 div 的 JS 在单击此链接时没有反应？

```
<div class='scraper_item' onclick='window.location="location A"'>
<ul class="scraper_actions1">
    <li><a href="/">Schedule</a></li>
    <li><a class="delete" onclick='action1'>Delete</a></li>
</ul>
</div> 
```

PS 应该有 jQuery 脚本挂在“删除”类上。jQuery 中删除类的`preventDefault()`方法不能阻止移动到`location A`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:08:04.513

如果你打算用 jQuery 来做：

```
$('div.scraper_item').click(window.location='location A');
$('a.delete').click(function(e){
    e.stopPropagation();
    action1();
}); 
```

`e.stopPropogation()`是您要查找的内容，这意味着我们正在处理的事件只会触发当前函数，而不是它的父母应该触发的所有事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:23:02.060

从 jQuery 事件回调返回`false`与调用`e.preventDefault()` **和** `e.stopPropogation()`

# c# - 如何使用 C# 动态隐藏 gridview 中的列？

> ID：12055496
> 
> 赞同：0
> 
> 时间：2012-08-21T13:04:35.340
> 
> 标签：c#, gridview

有没有一种方法可以动态隐藏 gridView 中的列（或某些列）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:10:05.830

您可能必须为点击或事件分配一些值，以便当它们发生时您可以编写如下内容：

```
GridView1.Columns[YouEventValue].Visible = false; 
```

其中 YourEventValue 是一个变量，它根据刚刚发生的事件分配一个数字。

# c - C：偷偷摸摸地计算正位？

> ID：12055499
> 
> 赞同：8
> 
> 时间：2012-08-21T12:21:48.297
> 
> 标签：c, bitwise-operators

所以我想看看是否有一些偷偷摸摸的位操作系列可以让我计算 uint32 中有多少位是 1（或者更确切地说是 count mod 2）。

“明显”的方式是这样的：

```
uint32 count_1_bits_mod_2(uint32 word) {
    uint32 i, sum_mod_2;
    for(i = 0; i < 32; i++)
        sum_mod_2 ^= word;
        word >>= 1; 
```

是否有一些“偷偷摸摸”的方法可以在不使用循环的情况下获得正确的 sum_mod_2 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:32:58.830

计算位数最快的方法[是使用“幻数”](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel)：

```
unsigned int v = 0xCF31; // some number
v = v - ((v >> 1) & 0x55555555);                    // reuse input as temporary
v = (v & 0x33333333) + ((v >> 2) & 0x33333333);     // temp
unsigned int c = ((v + (v >> 4) & 0xF0F0F0F) * 0x1010101) >> 24; // count 
```

这将打印 9（指向ideone 的[链接）。](http://ideone.com/9FUXX)

对于 32 位数字，这需要 12 次操作——与基于查找的方法所需的数字相同，但您不需要查找表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T13:20:41.257

“最佳”方式可能取决于您的代码运行的 CPU 架构。例如，以 Nehalem/Barcelona 开头的 Intel/AMD CPU 支持“popcnt”指令，该指令计算整数寄存器中 1 的位数，因此只需两条指令（popcnt 和按位与 1）即可计算该值你追求。

如果您碰巧使用的是相当新的 GCC 版本（或具有类似支持的其他编译器），您可以使用其 __builtin_popcount() 函数来计算人口计数，使用“-mpopcount”或“-msse4.2”编译指定的标志使用 popcnt 指令。有关更多信息，请参阅[此链接](http://www.dalkescientific.com/writings/diary/archive/2011/11/02/faster_popcount_update.html)。例如：

```
uint32_t parity = __builtin_popcount(x) & 1; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-21T13:26:00.437

最快*最快*的是使用 CPU popcnt 指令，紧随其后的是 SSSE3 代码。最快的便携是bitslice方法，其次是查找表：[http ://www.dalkescientific.com/writings/diary/archive/2011/11/02/faster_popcount_update.html](http://www.dalkescientific.com/writings/diary/archive/2011/11/02/faster_popcount_update.html)

与所有事情一样，您应该对负载进行基准测试。如果太慢，则进行优化。

对于 AMD Phenom II X2 550，使用 gcc 4.7.1（使用`g++ -O3 popcnt.cpp -o popcnt -mpopcnt -msse2`）：

```
Bitslice(7) 1462142 我们；cnt = 32500610
Bitslice(24) 1221985 我们；cnt = 32500610
劳拉杜 2347749 我们；cnt = 32500610
SSE2 8 位 790898 us；cnt = 32500610
SSE2 16 位 825568 我们；cnt = 32500610
SSE2 32 位 864665 我们；cnt = 32500610
16 位 LUT 1236739 我们；cnt = 32500610
8 位 LUT 1951629 我们；cnt = 32500610
gcc popcount 803173 我们；cnt = 32500610
gcc popcountll 7678479 我们；cnt = 32500610
FreeBSD 版本 1 2802681 我们；cnt = 32500610
FreeBSD 版本 2 2167031 我们；cnt = 32500610
维基百科#2 4927947 我们；cnt = 32500610
维基百科#3 4212143 我们；cnt = 32500610
HAKMEM 169/X11 3559245 我们；cnt = 32500610
天真 16182699 我们；cnt = 32500610
Wegner/Kernigan 12115119 我们；cnt = 32500610
安德森 61045764 我们；cnt = 32500610
8x 移位并添加 6712049 us；cnt = 32500610
32x班次加6662200 us；cnt = 32500610

```

对于带有 gcc 4.7.1 的 Intel Core2 Duo E8400（`g++ -O3 popcnt.cpp -o popcnt -mssse3`此`-mpopcnt`CPU 不支持）

```
Bitslice(7) 1353007 我们；cnt = 32500610
Bitslice(24) 953044 我们；cnt = 32500610
劳拉杜 534697 我们；cnt = 32500610
SSE2 8 位 458277 我们；cnt = 32500610
SSE2 16 位 555278 我们；cnt = 32500610
SSE2 32 位 634897 我们；cnt = 32500610
SSSE3 414542 我们；cnt = 32500610
16 位 LUT 1208412 我们；cnt = 32500610
8 位 LUT 1400175 我们；cnt = 32500610
gcc popcount 5428396 我们；cnt = 32500610
gcc popcountll 2743358 我们；cnt = 32500610
FreeBSD 版本 1 3025944 我们；cnt = 32500610
FreeBSD 版本 2 2313264 我们；cnt = 32500610
维基百科#2 1570519 我们；cnt = 32500610
维基百科#3 1051828 我们；cnt = 32500610
HAKMEM 169/X11 3982779 我们；cnt = 32500610
天真 20951420 我们；cnt = 32500610
Wegner/Kernigan 13665630 我们；cnt = 32500610
安德森 6771549 我们；cnt = 32500610
8x 移位加 14917323 us；cnt = 32500610
32x 移位加 14494482 us；cnt = 32500610

```

Bitslice 方法是一种并行机制，一次计算多个（7 或 24 个）机器字，因此它对通用函数具有边际可用性。在[http://dalkescientific.com/writings/diary/popcnt.cpp](http://dalkescientific.com/writings/diary/popcnt.cpp)之后：

```
static inline int popcount_fbsd2(unsigned *buf, int n)
{
  int cnt=0;
  do {
    unsigned v = *buf++;
    v -= ((v >> 1) & 0x55555555);
    v = (v & 0x33333333) + ((v >> 2) & 0x33333333);
    v = (v + (v >> 4)) & 0x0F0F0F0F;
    v = (v * 0x01010101) >> 24;
    cnt += v;
  } while(--n);
  return cnt;
}

static inline int merging2(const unsigned *data) 
{
        unsigned count1,count2,half1,half2;
        count1=data[0];
        count2=data[1];
        half1=data[2]&0x55555555;
        half2=(data[2]>>1)&0x55555555;
        count1 = count1 - ((count1 >> 1) & 0x55555555);
        count2 = count2 - ((count2 >> 1) & 0x55555555);
        count1+=half1;
        count2+=half2;
        count1 = (count1 & 0x33333333) + ((count1 >> 2) & 0x33333333);
        count2 = (count2 & 0x33333333) + ((count2 >> 2) & 0x33333333);
        count1+=count2;
        count1 = (count1&0x0F0F0F0F)+ ((count1 >> 4) & 0x0F0F0F0F);
        count1 = count1  + (count1 >> 8);
        count1 = count1 + (count1 >> 16);

        return count1 & 0x000000FF;
}

static inline int merging3(const unsigned *data) 
{
        unsigned count1,count2,half1,half2,acc=0;
        int i;

        for(i=0;i<24;i+=3)
        {
                count1=data[i];
                count2=data[i+1];
                //w = data[i+2];
                half1=data[i+2]&0x55555555;
                half2=(data[i+2]>>1)&0x55555555;
                count1 = count1 - ((count1 >> 1) & 0x55555555);
                count2 = count2 - ((count2 >> 1) & 0x55555555);
                count1+=half1;
                count2+=half2;
                count1 = (count1 & 0x33333333) + ((count1 >> 2) & 0x33333333);
                count1 += (count2 & 0x33333333) + ((count2 >> 2) & 0x33333333);
                acc += (count1 & 0x0F0F0F0F)+ ((count1>>4) &0x0F0F0F0F);
        }
        acc = (acc & 0x00FF00FF)+ ((acc>>8)&0x00FF00FF);
        acc = acc + (acc >> 16);
        return acc & 0x00000FFFF;
}

/* count 24 words at a time, then 3 at a time, then 1 at a time */
static inline int popcount_24words(unsigned *buf, int n) {
  int cnt=0, i;

  for (i=0; i<n-n%24; i+=24) {
    cnt += merging3(buf+i);
  }
  for (;i<n-n%3; i+=3) {
    cnt += merging2(buf+i);
  }
  cnt += popcount_fbsd2(buf+i, n-i);
  return cnt;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T12:34:39.600

```
count = 0;
while (word != 0) {
  word = word & (word-1);
  count++;
} 
```

该声明

```
word = word & (word-1); 
```

清除字中的最低 1 位。最终，您会用完 1 位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T13:40:53.737

我认为这很容易理解，而且效率很高。

```
x = some number;
x ^= (x >> 1); // parity of every bit pair now in bits 0, 2, 4, ...
x ^= (x >> 2); // parity of every 4 bits now in bits 0, 4, 8, ...
x ^= (x >> 4); // ...etc
x ^= (x >> 8);
x ^= (x >> 16); // parity of all 32 bits now in bit 0
parity = x & 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T12:32:43.510

预先计算所有结果并进行简单的数组查找。对于简单的“偶数或奇数”布尔结果，您可以创建一个位数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T14:42:39.750

```
 cnt = 0;
           while (word != 0) {
           word = word & (word-1);
           cnt++; 
```

这可以删除 1 位以获取更多详细信息，请访问[http://pgrtutorials.blogspot.in/p/bit-manipulation.html](http://pgrtutorials.blogspot.in/p/bit-manipulation.html)

# android - IllegalStateException：第二个应用程序进入时数据库未打开，ORMLite

> ID：12055506
> 
> 赞同：1
> 
> 时间：2012-08-21T13:05:12.437
> 
> 标签：android, dao, ormlite, illegalstateexception

我使用我的数据库助手：

```
@Override
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) 
{
     try
     {  

        TableUtils.createTable(connectionSource, Category.class);
        Log.i(DatabaseHandler.class.getName(), "created new entries in onCreate: " );
     }
     catch (SQLException e){
         Log.e(TAG, "error creating DB " + DATABASE_NAME);
         throw new RuntimeException(e);
     }
}

// Upgrading database
  @Override
   public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource, int oldVer, int newVer)
  {
       try
        {         

           TableUtils.dropTable(connectionSource, Category.class, true);
           onCreate(db, connectionSource);
        }
       catch (SQLException e){
           Log.e(TAG,"error upgrading db "+DATABASE_NAME+"from ver "+oldVer);
           throw new RuntimeException(e);
       }

   }
 public Dao<Category, Integer> getCategoryDao() throws SQLException 
    {
        if (simpleCategoryDao == null) {
            simpleCategoryDao = getDao(Category.class);
        }
        return simpleCategoryDao;
    }

  public static synchronized DatabaseHandler getHelper(Context context) 
   {
        if (helper == null) 
        {
            helper = new DatabaseHandler(context);
        }
        usageCounter.incrementAndGet();
        return helper;
    } 
```

我得到 JSON 数据，将其包装到我的模型中并将其保存在 ORMLite 中。我在 AsyncTask 内部类中执行此操作。我的 doInBackground 方法在里面。

```
 protected Void doInBackground(String... param) {
             ContentRepository _contactRepo;
            UserFunctions userFunction = new UserFunctions();
            json = userFunction.loginUser(param[0], param[1]);
            try {
                if ((json.getString(KEY_STATUS) != null) & json.getString(KEY_MESSAGE).equals((String)"Success"))
                {

                    String res = json.getString(KEY_STATUS);
                    if(Integer.parseInt(res) == 1)
                    {   

                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONParser p = new JSONParser();
                        appendLog(json.toString());
                        DataParsing u = new DataParsing();
                        List<Category> catlist = u.wrapCategories(json);
                        List<ProcessStatus> status = u.wrapStatuses(json);
                        List<Level> level = u.wrapLevels(json);
                        List<Subject> subject = u.wrapSubjects(json);

                        _contactRepo=new ContentRepository(getContentResolver(),getApplicationContext());

                        OrmLiteSqliteOpenHelper dbHelper=getHelper1();
                        getHelper1().open();

                        Dao<Category, Integer> daoCat=dbHelper.getDao(Category.class);
                        QueryBuilder<Category,Integer> catquery = daoCat.queryBuilder();
                        try{
                            getHelper1().open();    
                            if (catquery.query().isEmpty())
                            {
                                _contactRepo.saveCategories(catlist);
                            }
                        }
                        catch (IllegalStateException e)
                        {
                            getHelper1().open();            
                            e.printStackTrace();

                        }

                        Log.i("category",catquery.query().toString());

                    }   
                } 
```

和 getHelper1() 方法：

```
private DatabaseHandler getHelper1() {
        if (databaseHandler == null) {
            databaseHandler = DatabaseHandler.getHelper(this);
        }
        return (DatabaseHandler) databaseHandler;
    } 
```

当我启动应用程序时，一切正常。当我第二次尝试启动它时，我得到：

```
 08-21 15:44:48.939: E/AndroidRuntime(1893): FATAL EXCEPTION: AsyncTask #2
08-21 15:44:48.939: E/AndroidRuntime(1893): java.lang.RuntimeException: An error occured while executing doInBackground()
08-21 15:44:48.939: E/AndroidRuntime(1893):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.lang.Thread.run(Thread.java:1019)
08-21 15:44:48.939: E/AndroidRuntime(1893): Caused by: java.lang.IllegalStateException: database not open
08-21 15:44:48.939: E/AndroidRuntime(1893):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1343)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.android.AndroidCompiledStatement.getCursor(AndroidCompiledStatement.java:154)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.android.AndroidCompiledStatement.runQuery(AndroidCompiledStatement.java:57)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.stmt.SelectIterator.<init>(SelectIterator.java:55)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.stmt.StatementExecutor.buildIterator(StatementExecutor.java:206)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.stmt.StatementExecutor.query(StatementExecutor.java:155)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.dao.BaseDaoImpl.query(BaseDaoImpl.java:261)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.j256.ormlite.stmt.QueryBuilder.query(QueryBuilder.java:262)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:329)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-21 15:44:48.939: E/AndroidRuntime(1893):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-21 15:44:48.939: E/AndroidRuntime(1893):     ... 4 more
08-21 15:44:54.589: I/destroy(1893): destroy
08-21 15:44:54.839: E/WindowManager(1893): Activity com.assignmentexpert.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40668ff0 that was originally added here
08-21 15:44:54.839: E/WindowManager(1893): android.view.WindowLeaked: Activity com.assignmentexpert.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40668ff0 that was originally added here
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.ViewRoot.<init>(ViewRoot.java:263)
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-21 15:44:54.839: E/WindowManager(1893):  at android.app.Dialog.show(Dialog.java:241)
08-21 15:44:54.839: E/WindowManager(1893):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
08-21 15:44:54.839: E/WindowManager(1893):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
08-21 15:44:54.839: E/WindowManager(1893):  at com.assignmentexpert.LoginActivity$LoginTask.onPreExecute(LoginActivity.java:239)
08-21 15:44:54.839: E/WindowManager(1893):  at android.os.AsyncTask.execute(AsyncTask.java:391)
08-21 15:44:54.839: E/WindowManager(1893):  at com.assignmentexpert.LoginActivity$5.onClick(LoginActivity.java:195)
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.View.performClick(View.java:2485)
08-21 15:44:54.839: E/WindowManager(1893):  at android.view.View$PerformClick.run(View.java:9080)
08-21 15:44:54.839: E/WindowManager(1893):  at android.os.Handler.handleCallback(Handler.java:587)
08-21 15:44:54.839: E/WindowManager(1893):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-21 15:44:54.839: E/WindowManager(1893):  at android.os.Looper.loop(Looper.java:123)
08-21 15:44:54.839: E/WindowManager(1893):  at android.app.ActivityThread.main(ActivityThread.java:3687)
08-21 15:44:54.839: E/WindowManager(1893):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 15:44:54.839: E/WindowManager(1893):  at java.lang.reflect.Method.invoke(Method.java:507)
08-21 15:44:54.839: E/WindowManager(1893):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-21 15:44:54.839: E/WindowManager(1893):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-21 15:44:54.839: E/WindowManager(1893):  at dalvik.system.NativeStart.main(Native Method) 
```

但是当我再次启动应用程序时 - 一切都恢复正常了。下次 - 我再次遇到异常。

我在辅助类中的 open() 方法：

```
 public void open() throws SQLException {
      helper.getReadableDatabase();
      helper.getWritableDatabase();

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:19:14.807

所以所有的[ORMLIte](http://ormlite.com/) Android 例子都有一个相似的模式，我相信你可能会违反。您需要确保在应用程序关闭时删除所有缓存的 DAO。例如，[HelloAndroid 示例](http://ormlite.com/docs/android-examples)在其`DatabaseHelper`.

```
public void close() {
    super.close();
    simpleDao = null;
    simpleRuntimeDao = null;
} 
```

我也看到你在打电话`getHelper1().open();`，但我不知道那个方法在做什么。助手将在 Android 的时候打开`SQLiteOpenHelper`——你不需要自己打开它。

我看到`getHelper()`返回一个`DatabaseHandler`. 我不知道那个班。那是错字吗？内置到`OrmLiteBaseActivity`类似的类中的是一种`getHelper()`方法，它知道何时使其无效并创建一个新的。你应该确保你正在使用它们。

此外，我`getHelper()`在帮助类本身上看到了一个方法以及一个`usageCounter`. 我会回到[HelloAndroid 示例](http://ormlite.com/docs/android-examples)中的模式并删除所有这些自定义项，除非您有充分的理由拥有它们。您的自定义是这里令人困惑的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:14:22.360

尝试：

```
 DatabaseHelper db = getHelper1(); 
```

在您`getHelper1()`返回一个`DatabaseHelper`类类型，但您已将其分配给 OrmLiteSqliteOpenHelper。您似乎也没有使用该`db`变量。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:20:25.467

通常，当您在关闭 ormlite 数据库时尝试从数据库中读取或写入某些内容时，您会遇到此问题。即使我遇到了这个错误。

确保当您尝试读取或写入操作时，您必须拥有`dbhelper.getreadable()`或`getwritable()`为此。

# mysql - 如何使用本地 wamp 连接远程数据库？

> ID：12055507
> 
> 赞同：0
> 
> 时间：2012-08-21T13:05:13.237
> 
> 标签：mysql

我在本地 wamp 中配置了一个 Joomla 网站。我的数据库所在的另一台服务器。现在我想将该数据库连接到我的本地 wamp 以运行我的网站。我已经尝试在`configuration.php`.

我已将所有必需的权限应用于远程服务器

```
public $host = 'xx.xx.xx.xx';
public $db = 'database_name';
public $user = 'username';
public $password = 'password'; 
```

我还在远程数据库服务器上使用了通配符 (%.%.%.%)。但不幸的是，我无法连接它。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:04:22.040

这里最可能的问题是，在您的外部 MySQL 数据库中，“用户名”帐户没有将“主机”字段设置为“%”（表示任何主机）...如果它设置为“本地主机”，那么只有本地将允许连接。

此外，检查 my.cnf 以确保您没有将外部 MySQL 数据库绑定到 127.0.0.1。它应该绑定到 0.0.0.0（所有 IP）。

# c# - 事务范围超时 10 分钟

> ID：12055511
> 
> 赞同：37
> 
> 时间：2012-08-21T13:05:22.057
> 
> 标签：c#, entity-framework, transactions, transactionscope

我`TransactionScope`在 C# 中运行了很长时间。我告诉示波器它应该有很长的时间跨度，但我仍然超时。什么可能导致这种情况？

```
TransactionOptions transactionOptions = new TransactionOptions();
transactionOptions.IsolationLevel = IsolationLevel.ReadCommitted;
transactionOptions.Timeout = TimeSpan.MaxValue;
using (var ts = new TransactionScope(TransactionScopeOption.Required, transactionOptions))
{ 
    DoLongCode();
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-03-03T23:45:57.300

要让交易时间超过 10 分钟，而无需更改 machine.config，请使用此代码

```
 private void SetTransactionManagerField(string fieldName, object value)
    {
        typeof(TransactionManager).GetField(fieldName, BindingFlags.NonPublic | BindingFlags.Static).SetValue(null, value);
    }

    public TransactionScope CreateTransactionScope(TimeSpan timeout)
    {
        // or for netcore / .net5+ use these names instead:
        //    s_cachedMaxTimeout
        //    s_maximumTimeout
        SetTransactionManagerField("_cachedMaxTimeout", true);
        SetTransactionManagerField("_maximumTimeout", timeout);
        return new TransactionScope(TransactionScopeOption.RequiresNew, timeout);
    } 
```

用法：

```
using (var ts = CreateTransactionScope(TimeSpan.FromMinutes(20)))
{ 
    DoLongCode();
    ts.Complete();
} 
```

[基于这篇文章文章](http://jupaol.blogspot.com/2015/03/changing-transactionscope-timeout-at-runtime.html) *的代码最初粘贴在这里。答案中的代码现在被重构和简化。*

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-17T19:29:09.097

进一步澄清：

事务范围使用机器配置设置作为最大超时。默认机器超时为 10 分钟。

将机器配置设置为 2 小时：

```
 <system.transactions>
        <machineSettings maxTimeout="02:00:00"/>
      </system.transactions> 
```

app.config 或 web.config 可用于减少到超时，但不能用于超过机器配置超时。

将应用配置设置为 1 小时：

```
<system.transactions>
     <defaultSettings timeout="01:00:00" />
</system.transactions> 
```

此外，当达到限制时，我们没有收到任何异常，也没有跟踪或事件日志记录。

TransactionScope 对象还具有构造函数重载，允许您指定超时，但我不确定如何处理。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-21T13:10:53.947

您好，如果您的 web.config 或 app.config 中没有此部分，您可以在配置文件中验证 maxTimeout

验证您的 machine.config

```
<configuration> 
  <system.transactions>
    <machineSettings maxTimeout=""/>
  </system.transactions>
</configuration> 
```

调整值

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-18T19:16:58.363

它们不起作用，因为您尝试更改超时的上下文错误。

尝试将其更改为更接近有效查询。

你应该有这些上下文：

```
 using (var txn = new TransactionScope(
                            TransactionScopeOption.Required,
                            new TransactionOptions { IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted, Timeout = new TimeSpan(1,0,0) })) // 1 hour or wathever, will not affect anything
                    {

                        using (SqlConnection connection = new SqlConnection(ConnectionString))
                        {
                            int ct = connection.ConnectionTimeout // (read Only, this is the effective default timeout is 15 seconds)
                            connection.Open();

                            SqlCommand select = new SqlCommand(sql.query, connection); // bind to server
                            select.CommandTimeout = 0; // <-- here does apply infinite timeout
SqlDataReader reader = select.ExecuteReader(); // never stop 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-11T13:29:33.597

考虑到完全信任的环境，您可以使用反射覆盖最大超时：

```
 //Get machineSettings session
            var machineSettings = (System.Transactions.Configuration.MachineSettingsSection)ConfigurationManager.GetSection("system.transactions/machineSettings");
            //Allow modifications
            var bReadOnly = (typeof(ConfigurationElement)).GetField("_bReadOnly", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
            bReadOnly.SetValue(machineSettings, false);
            //Change max allowed timeout
            machineSettings.MaxTimeout = TimeSpan.MaxValue;

            using (var t = new TransactionScope(TransactionScopeOption.Required, new TimeSpan(1,0,0))) { //1 hour transaction
                //...
            } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-01T20:45:56.663

*我通过修改“物理文件*” **machine.config**解决了这个问题。

* * *

**1.**您必须本地化文件：

*   **32 位：** C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machie.config
*   **64 位：** C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config

**2.**您必须添加以下代码：

```
<system.transactions>
     <defaultSettings timeout="00:59:00" />
</system.transactions> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-23T17:21:59.550

如果有人想知道如何在 .NET Core 上实现这一点， [这就是答案](https://github.com/dotnet/runtime/issues/1418#issuecomment-786027181)。基本上，您必须更新字段的名称：

`_cachedMaxTimeout`->`s_cachedMaxTimeout`

`_maximumTimeout`->`s_maximumTimeout`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-04T08:10:33.747

您可以在您的项目中添加此代码以延长交易时间。

```
// This is used for set the transaction timeout to 40 minutes.
Type oSystemType = typeof(global::System.Transactions.TransactionManager);
System.Reflection.FieldInfo oCachedMaxTimeout = 
                    oSystemType.GetField("_cachedMaxTimeout", 
                    System.Reflection.BindingFlags.NonPublic | 
                    System.Reflection.BindingFlags.Static);
System.Reflection.FieldInfo oMaximumTimeout = 
                    oSystemType.GetField("_maximumTimeout", 
                    System.Reflection.BindingFlags.NonPublic | 
                    System.Reflection.BindingFlags.Static);
oCachedMaxTimeout.SetValue(null, true);
oMaximumTimeout.SetValue(null, TimeSpan.FromSeconds(2400)); 
```

# jquery - 使用 JQuery 问题的图像翻转

> ID：12055512
> 
> 赞同：0
> 
> 时间：2012-08-21T13:05:24.943
> 
> 标签：jquery, image, flip

我在点击事件上翻转图像。第一次单击时，会显示第二张图像（在第一次被翻转后），但反之亦然。

这是我的代码：

```
 $(document).ready(function () {
        var margin = $("#image1").width() / 2;
        var width = $("#image1").width();
        var height = $("#image1").height();

        $("#image2").stop().css({ width: '0px', height: '' + height + 'px', marginLeft: '' + margin + 'px', opacity: '0.5' });
        $("#reflection2").stop().css({ width: '0px', height: '' + height + 'px', marginLeft: '' + margin + 'px' });

        $("#image1").click(function () {
            $(this).stop().animate({ width: '0px', height: '' + height + 'px', marginLeft: '' + margin + 'px', opacity: '0.5' }, { duration: 300 });
            window.setTimeout(function () {
                $("#image2").stop().animate({ width: '' + width + 'px', height: '' + height + 'px', marginLeft: '0px', opacity: '1' }, { duration: 300 });
            }, 500);
        });

        $("#image2").click(function () {
            $(this).stop().animate({ width: '0px', height: '' + height + 'px', marginLeft: '' + margin + 'px', opacity: '0.5' }, { duration: 500 });
            window.setTimeout(function () {
                $("#image1").stop().animate({ width: '' + width + 'px', height: '' + height + 'px', marginLeft: '0px', opacity: '1' }, { duration: 500 });
            }, 500);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:27:04.350

这是小提琴：[**jsFiddle**](http://jsfiddle.net/WJWmh/)

似乎工作正常。

# sitecore - Sitecore 6：设备布局上出现重复控件

> ID：12055513
> 
> 赞同：0
> 
> 时间：2012-08-21T13:05:34.520
> 
> 标签：sitecore, sitecore6

背景：我们有一个 sitecore 6 安装，其中包含一些自定义代码来检测设备（和来源），并在 sitecore 中切换到不同的（自定义）设备定义。这具有更改模板的效果，并在适当的地方进行控制。
这一切都很好。

然而。

当我们在内容树中选择一个节点时，转到 Presentation 选项卡，单击 Details 以获取 Layout Details 窗口，然后编辑一个设备项以添加控件，我们看到重复项被添加到设备中 - 而不仅仅是我们的设备编辑。它似乎“加倍”了那里的东西 - 但它永远不会改变“默认”布局。
我检查了通常的嫌疑人（即所有连接字符串都是正确的，指向正确的数据库）但我仍然在保存时得到重复。副本不会出现在编辑中 - 但保存 - 似乎。

关于如何追踪这一点的任何建议，因为它给我们带来了一场噩梦。

![在此处输入图像描述](../Images/07bbf7e5a5afe71b6927bf21df06dedd.png)

Sitecore 版本：6.4.1 (rev:110324)
安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:00:14.243

这是一个已知问题，可以通过在模板的标准值上指定布局（在您的情况下为移动布局和主布局）来解决。

# asp.net-mvc - HTML标记打破剃刀使用

> ID：12055516
> 
> 赞同：3
> 
> 时间：2012-08-21T13:05:49.753
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我有这个标记：

```
@using (Html.BeginRouteForm("Default", new { controller = "Home", action = "Form" }, FormMethod.Post, new { @ID="FormId", @Name="FormId"}))
{
    <span>...</span>
    <div class="clearFloats"><!-- ---></div>
    <span>...</span>
} 
```

自从搬到 Razor 2，MVC 4 我现在得到错误：

*   > using 块缺少结束“}”字符。确保此块中的所有“{”字符都有一个匹配的“}”字符，并且没有一个“}”字符被解释为标记。

如果我删除`<div class="clearFloats"><!-- ---></div>`代码，一切正常。我知道解决方案是将这些浮动清除 div 更改为某种不同的构造，但为什么它现在会中断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:10:46.330

一个临时的解决方案是`<!-- -->`用`@Html.Raw("<!-- -->")`似乎可以消除错误的包装。

**编辑**：实际上，您的示例中的问题是`--->`关闭评论标签上的尾随三个破折号。删除其中之一，它可以正常工作。

# jpa - 使用 JPA 持久化图形

> ID：12055520
> 
> 赞同：0
> 
> 时间：2012-08-21T13:05:57.080
> 
> 标签：jpa, graph, persist

我尝试使用 JPA 持久化图表，但它不起作用。我有叶子，它们是节点，它可以有多个父级，一个父级可以有多个子级（节点）。

```
@Entity
@Table(name = "NODES")
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "KIND", discriminatorType = DiscriminatorType.STRING, length = 1)
public abstract class Node implements Serializable {

    @Column(unique = true, name = "NAME", nullable = false, length = 50)
    private String name;

    @ManyToMany(mappedBy = "children", fetch = FetchType.LAZY)
    @JoinTable(name = "NODE_PARENTS", joinColumns = { @JoinColumn(name = "NODEID", referencedColumnName = "ID") }, inverseJoinColumns = { @JoinColumn(name = "PARENTID", referencedColumnName = "ID") })
    private Set<Parent> parents;

    public Node() {
        this.parents = new HashSet<Parent>();
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setParents(Collection<Parent> parentList) {
        for(Parent parent : this.parents) {
            removeParent(parent);
        }
        for (Parent parent : parentList) {
            addParent(parent);
        }
    }

    public void addParent(Parent parent) {
        this.parents.add(parent);
        if (!parent.getMembers().contains(this)) {
            parent.getMembers().add(this);
        }
    }

    public void removeParent(ACLGroup parent) {
        this.parents.remove(parent);
        if (parent.getMembers().contains(this)) {
            parent.getMembers().remove(this);
        }
    }

    public Set<ACLGroup> getParents() {
        return Collections.unmodifiableSet(this.parents);
    }
}

@Entity
@Table(name = "LEAFS")
@DiscriminatorValue("L")
public class Leaf extends Node {

    // some fields to persist
}

@Entity
@Table(name = "INNER_NODES")
@DiscriminatorValue("P")
public class InnerNodes extends Node implements Parent {

    // some fields to persist

    @ManyToMany(fetch = FetchType.LAZY)
    private Set<Node> children;

    public InnerNodes() {
        this.children = new HashSet<Node>();
    }

    public Set<Node> getChildren() {
        return Collections.unmodifiableSet(this.children);
    }

    public void setChildren(Set<Node> childList) {
        for (Node child : this.children) {
            removeChild(child);
        }
        for (Node child : childList) {
            addChild(child);
        }
    }

    public void addChild(Node child) {
        this.children.add(child);
        if (!child.getParents().contains(this)) {
            child.addParent(this);
        }
    }

    public void removeChild(Node child) {
        this.children.remove(child);
        if (child.getParents().contains(this)) {
            child.removeParent(this);
        }
    }
}

public interface Parent {
    Set<Node> getChildren();
    void setChildren(Set<Node> childList);
    void addChild(Node child);
    void removeChild(Node child);
} 
```

问题是，我不能坚持界面父，但我需要它来防止圈子。每个 Leaf 或 InnerNode 可以有多个 Parent，每个 Parent 可以有多个孩子。

有什么想法可以实现吗？非常感谢。

安德烈

# jquery - 动态检测div是否滑下？

> ID：12055521
> 
> 赞同：0
> 
> 时间：2012-08-21T13:05:56.697
> 
> 标签：jquery

我正在使用一个 div：

```
<div class="testDivClass" id="myDiv"></div> 
```

`$("#myDiv").slideDown()`div 将分别用和上下滑动`$("#myDiv").slideUp()`。

在某些情况下，如果 div 可见，我想向上滑动，即向下滑动。我尝试了一个类似 using 的解决方案，`$("#myDiv").slideToggle()`但这不起作用，因为如果它向上滑动，它将向下滑动 div。有没有办法使用 jQuery 来知道 div 是否向下滑动（可见）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:10:07.717

您可以检查'display' css 属性，如果它是slidedDown，它应该等于'block'，否则等于'none'。

例子：

```
var status = jQuery('div.myDiv').css('display');

if(status == 'block'){
    alert('I am slided down (shown)');
}else{
    alert('I am slided up (hidden)');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:11:26.790

只需使用这个：`$('#myDiv').is(':visible') // returns true/false`
所以对于你的例子，你会做这样的事情：

```
$myDiv = $('#myDiv')
if ($myDiv.is(':visible'))
  $myDiv.slideUp() 
```

# .htaccess - 多个文件的mod重写规则

> ID：12055528
> 
> 赞同：0
> 
> 时间：2012-08-21T13:06:08.137
> 
> 标签：.htaccess, mod-rewrite

我在我的 CMS 系统中使用了两个 php 文件。第一个接受请求[http://mydomain.com/page.php?page=about-us](http://mydomain.com/page.php?page=about-us)，第二个接受[http://mydomain.com/otherpage.php?page=additional-page](http://mydomain.com/otherpage.php?page=additional-page)。

我想放入我的 .htaccess 文件

```
RewriteRule ^([a-z0-9-]+)$ page.php?page=$1
RewriteRule ^([a-z0-9-]+)$ otherpage.php?page=$1 
```

并让这两个规则都起作用。你能帮忙吗？

# .htaccess - 使用 .htaccess 从所有子目录中隐藏 index.php

> ID：12055530
> 
> 赞同：3
> 
> 时间：2012-08-21T13:06:12.893
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

所以我正在使用向我建议的文件结构构建一个电子商务网站，它看起来像这样：

```
http://www.sample.com/index.php
http://www.sample.com/department/index.php
http://www.sample.com/department/men/index.php 
```

基本上我想摆脱 url 中的所有 index.php 文件名，所以它看起来像这样：

```
http://www.sample.com
http://www.sample.com/department
http://www.sample.com/department/men 
```

通过在 .htaccess 中添加以下代码，我已经为我的主页实现了这一点：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

但是，有没有办法通过编辑根 .htaccess 文件将此规则应用于我网站中的每个子目录？我猜这可以通过在每个目录的 .htaccess 文件中添加此规则来完成，但我宁愿只拥有一个。

此外，这甚至是构建网站的好方法吗？我不是特别喜欢它，因为 index.php 文件太多，但我不确定有更好的选择......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:00:04.030

尝试将这些规则置于文档根目录中的 htaccess 文件中的规则*之上：*

```
RewriteRule ^index.php$ / [L,R=301]
RewriteRule ^(.+)/index.php$ /$1/ [L,R=301] 
```

# jquery - 为什么我不能在标题中使用它？

> ID：12055532
> 
> 赞同：0
> 
> 时间：2012-08-21T13:06:16.507
> 
> 标签：jquery

我不能在标题中使用脚本，这是代码：

```
<!DOCTYPE html>
<html>
<head> 

<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
 <a href="javascript:void" class="sl-start">Click Here</a> 
<p class="slide" style="display: none">Something to display</p>

<script>
    $(".sl-start").click(function () {
    $(".slide").show();
    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:09:19.443

将代码包装在 document.ready 事件处理程序中，如下所示：

```
<!DOCTYPE html>
<html>
<head> 

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
        $(document).ready(function(){
            $(".sl-start").one('click', function () {
                $(".slide").show();
            });
        });
    </script>
</head>
<body>
 <a href="javascript:void" class="sl-start">Click Here</a> 
<p class="slide" style="display: none">Something to display</p>

</body>
</html> 
```

否则，脚本将在元素存在之前执行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:09:32.113

因为 DOM 尚未准备好附加事件的头部。

如果在`document`'s 的 ready 事件触发时让它运行，它将起作用：

```
$(document).ready(function(){
    $(".sl-start").click(function () {
        $(".slide").show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:09:50.350

如果你想在 <head> 区域使用它，那么你必须使用 $(document).ready() 事件。

```
<script type="text/JavaScript">
    $(document).ready(function() {
        $(".sl-start").click(function () {
            $(".slide").show();
        });
    });
</script> 
```

或简写：

```
$(function() {
    ...
}); 
```

因为在读取 HTML/CSS 文档**后**会触发 $(document).ready() 事件。这意味着浏览器已经知道 HTML 文档的**全部**内容和结构。

否则 HTML 结构不可用（尚未完全阅读），因此您的 jQuery 调用将无法找到任何对象。

# crystal-reports - Crystal Report - 无法使用 TEXT 类型作为参数？

> ID：12055537
> 
> 赞同：2
> 
> 时间：2012-08-21T13:06:22.570
> 
> 标签：crystal-reports

我目前正在开发一个网站，asp.net 4.0 使用水晶报表，我可以完美地查看报表等，但是当尝试在报表中创建参数时，我无法在选择`TEXT`字段时选择甚至查看数据库表中的类型字段从创建参数。选择字符串或整数等工作正常，但所有`TEXT`类型字段甚至都不可见。

关于为什么会这样的任何想法？我需要从`TEXT`字段中添加一个参数，因为我们希望将结果限制为包含特定短语的所有消息，并且该消息作为一种`TEXT`类型存储在 sql 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:19:46.950

您必须将 Text 类型转换为 varchar(max) 然后才会显示。

否则，您必须添加自定义参数字段并将此值读入参数，此参数将拖到您的报告设计页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:51:22.603

您将需要创建一个“字符串”类型的参数。

接下来，使用 SQL 表达式将您的 TEXT 值转换为不同的类型：

```
//{%converted_text}
(
   cast( TEXT AS varchar2(255) )
) 
```

您可能需要调整语法（我使用的是 Oracle 的）。

最后，在记录选择公式中引用每个：

```
{%converted_text} = {?text_prompt} 
```

# mongodb - 在 MongoDB 中对混合分桶模式进行排序

> ID：12055541
> 
> 赞同：2
> 
> 时间：2012-08-21T13:06:46.650
> 
> 标签：mongodb, sorting, comments, database-schema

我们的应用程序允许用户创建帖子和评论。数据正在快速增长，我们已经回顾了 Mongodb 扩展策略。我们喜欢[http://www.10gen.com/presentations/mongosf2011/schemascale](http://www.10gen.com/presentations/mongosf2011/schemascale)中介绍的方法，它使用嵌入式和非嵌入式文档之间的混合模式，对评论进行分组，以便将它们保存在每组 100 或 200 条评论中文档。

```
{   
    "_id" : '/post/2323423/1--1',
    "comments" : [{
                "author" : "peter",
                "text"  : "comment!",
                "when" : "June 24 2012,
                "votes": 43
              },
              {
                "author" : "joe",
                "text"  : "hi!",
                "when" : "June 25 2012,
                "votes": 102
              },
              ...
     ], 
```

}

通过对评论进行分桶，显示数千条评论所需的磁盘读取次数更少，同时文档保持较小，因此写入速度很快。对按日期排序的评论进行分页是完美的。

我们对这种方法非常感兴趣，但我们的应用程序要求评论按投票和子评论排序。

目前我们使用非嵌入式方法，它使用单独的评论集合。允许我们检索按任何字段排序的数据并且子注释很容易（通过引用），但性能正在成为一个问题。我们想使用分桶，但按投票排序的东西似乎不适合桶。

按日期排序是微不足道的，只需在用户单击“下一页”时转到下一个存储桶，查询一个文档。但是，如果我们想按选票排序，我们如何做到这一点？我们必须检索所有存储桶，然后对评论进行排序，这显然是无效的......

关于适当的模式设计来实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:57:37.440

您应该能够按降序排序：

> db.collection.find({},{_id:0}).sort({'comments.votes':1})

请注意，有一个错误，您只能按升序排序。看到这个[错误票](https://jira.mongodb.org/browse/SERVER-5065)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-04T00:30:10.200

您是否尝试过聚合查询？

```
db.commentbuckets.aggregate([
    $match: {discussion_id: <discussion_id>},
    $unwind: "$comments",
    $sort: {votes: -1}
]); 
```

# nhibernate - 在 Fluent NHibernate 上将 AskedBy_PersonId 设为外部列名（而不是默认的 AskedBy_id）

> ID：12055543
> 
> 赞同：0
> 
> 时间：2012-08-21T13:06:57.220
> 
> 标签：nhibernate, fluent-nhibernate, mapping

我有这些表：

```
create table Person
(
PersonId int identity(1,1) primary key,
PersonName nvarchar(100) not null
);

create table Question
(
QuestionId int identity(1,1) primary key,
QuestionText nvarchar(100) not null,
AskedBy_PersonId int not null references Person(PersonId),
QuestionModifiedBy_PersonId int not null references Person(PersonId)
); 
```

我有这些模型：

```
public class Question
{
    public virtual int QuestionId { get; set; }

    public virtual string QuestionText { get; set; }

    public virtual Person AskedBy { get; set; }
    public virtual Person QuestionModifiedBy { get; set; }
}

public class Person
{
    public virtual int PersonId { get; set; }
    public virtual string PersonName { get; set; }
} 
```

我正在使用 FluentNHibernate 的自动映射，引用属性默认为这些数据库列名：

```
AskedBy_id
QuestionModifiedBy_id 
```

如何让 FluentNHibernate 使引用属性映射到这种样式的外部列名？

```
AskedBy_PersonId
QuestionModifiedBy_PersonId 
```

截至目前，我正在手动覆盖：

```
.Override<Question>(x => 
{
    x.References(y => y.AskedBy).Column("AskedBy_PersonId");
    x.References(y => y.QuestionModifiedBy).Column("QuestionModifiedBy_PersonId");
}) 
```

我想删除该覆盖并希望 Fluent NHibernate 自动使外部列名遵循上面的命名模式

如何使用 Fluent NHibernate 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:42:31.060

[使用IReferenceConvention](https://github.com/jagregory/fluent-nhibernate/wiki/Available-conventions)实现应该很容易：

```
public class ReferenceConvention : IReferenceConvention
{
    public void Apply(IManyToOneInstance instance)
    {
        instance.Column(
            instance.Name + "_" + instance.Property.PropertyType.Name + "Id");
    }
} 
```

NHibernate 应该配置为读取约定（使用类似这样的东西）：

```
Fluently.Configure()
    //... other configuration
    .Mappings(m => m.AutoMappings.Add(
        AutoMap.AssemblyOf<Person>()
            .Conventions.AddFromAssemblyOf<ReferenceConvention>()); 
```

# javascript - Node js express.compiler错误

> ID：12055549
> 
> 赞同：2
> 
> 时间：2012-08-21T13:07:25.530
> 
> 标签：javascript, node.js, less, express

我目前正在开发一个 express.js Webapp，我正在使用 MS Webmatrix 附带的样板应用程序。我可以在我的计算机上运行该应用程序，但是当我推送到 nodejitsu 或使用我从 git 获取应用程序的另一台计算机时，我收到阻止服务器启动的错误。

```
app.use(express.compiler({ src: __dirname + '/public', enable: ['less'] })
                ^
TypeError: Object function createApplication() {
var app = connect();
utils.merge(app, proto);
app.request = { __proto__: req };
app.response = { __proto__: res };
app.init();
return app;
} has no method 'compiler'
at Function.<anonymous> (C:\Users\hoopdog2\Desktop\afterthoughts_nodejs\serv
er.js:197:21)
at Function.app.configure (C:\Users\hoopdog2\Desktop\afterthoughts_nodejs\no
de_modules\express\lib\application.js:399:61)
at Object.<anonymous> (C:\Users\hoopdog2\Desktop\afterthoughts_nodejs\server
.js:188:5)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

该应用程序使用的依赖项是

```
"node-uuid": ">= 1.3.3",
"everyauth": ">= 0.2.29",
"nconf": ">= 0.5.1",
"express": ">= 2.5.0",
"jade": ">= 0.18.0",
"less": ">= 1.1.5",
"socket.io": ">= 0.8.7",
"connect": ">=1.8.5",
"recaptcha": ">=1.1.0" 
```

我正在使用节点版本 0.8.7。非常感谢您对可能导致此错误的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:28:16.560

Express的`compiler`中间件来自 Connect 框架，自 2011 年 7 月起，Connect 不再包括`compiler`. 所以再做`express.compiler(...)`也行不通了。

已经创建了一个 LESS 特定的中间件，如果你将它包含在你的启动配置中，Express 现在会使用它。`express -c less`将此行添加到配置中：

```
 app.use(require('less-middleware')({ src: __dirname + '/public' })); 
```

如果您有旧版本的 Express and Connect，您可以添加`less-middleware`到您的`package.json`并添加上面的行以使其正常工作。

它的工作原理与原始编译器几乎相同，但包含更多的花里胡哨。

[少中间件项目存储库](https://github.com/emberfeather/less.js-middleware)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:40:30.910

感谢赫克托，我解决了这个问题。我安装了错误版本的 express 并将 express 从 >=2.5.0 更改为 = 2.5.0 并重新安装依赖项已解决问题，我现在可以运行该应用程序。谢谢

# razor - 作为按钮登录，在右侧

> ID：12055562
> 
> 赞同：0
> 
> 时间：2012-08-21T13:08:12.767
> 
> 标签：razor, twitter-bootstrap

我正在尝试将 MVC Asp 应用程序默认附带的 Login Partial 更改为按钮并移至导航栏的右侧（我正在使用 twitter bootstrap）。我基本上希望我的按钮看起来像一个示例（在 v2.1 的 bootstap 中似乎不再存在），这些示例显示在站点上，带有一个人 silohette 并作为右侧的按钮。我不确定是否有人知道我在说什么？

我的 HTMLPartial 如下：

```
 @If Request.IsAuthenticated Then
        @<text>Welcome <strong>@User.Identity.Name</strong>!
        @Html.ActionLink("Log Off", "LogOff", "Account")</text>
    Else
        @:@Html.ActionLink("Log On", "LogOn", "Account")
    End If 
```

我的观点中与此相关的部分是：

```
<!-- Menu for Reporting -->
<li class="pull-right">@Html.Partial("_LogOnPartial")</li> 
```

如您所见，我已尝试在课堂上实现 pull-right，但它没有效果。我也有部分改变：

```
@Html.ActionLink("Log On", "LogOn", "Account") 
```

到

```
@Html.ActionLink("Log On", "LogOn", "Account", New With {.class = "btn"}) 
```

但这会产生一个非常大的按钮，其行为奇怪，并且登录时的名称等不在按钮中（而是显示在其上方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:28:45.753

你不应该使用带有 li 标签的 pull-right。这应该用 div 来完成。您必须将代码放入以下 ​​html 中，然后就可以了！

```
<div class="btn-group pull-right">
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">$Account</a><span class="caret"></span>
<ul class="dropdown-menu"><li>whatever you like</li><li>whatever you like</li></ul>
</div> 
```

希望这会有所帮助:)

# asp.net - 如何通过发布到新地址然后转发到它来更新网站？

> ID：12055563
> 
> 赞同：0
> 
> 时间：2012-08-21T13:08:26.463
> 
> 标签：asp.net, html, web-applications, web

如果我想更新我的网站而不中断其功能（几乎），我想我可能会将新版本发布到一个新文件夹，并且在它上传之后 - 只需从正常 url “指向”它网站。

这可以做到吗？我的意思不仅仅是`MySite.com`指向`MySite.com/folder1/default.aspx`，我的意思是网站上的*每个*页面都是这样的（例如`MySite.com/A.aspx`将指向`MySite.com/folder1/A.aspx`）。如果是这样 - 如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:49.667

您将使用 301 重定向从旧 URL 指向新 URL。

我在 IIS 上找到了这些说明。希望它们有用。

> 是重定向
> 
> *   在 Internet 服务管理器中，右键单击要重定向的文件或文件夹
> *   选择标题为“重定向到 URL”的单选。
> *   进入重定向页面
> *   检查“上面输入的确切网址”和“此资源的永久重定向”
> *   点击“应用”

# c# - 如何在指定的失败尝试后阻止用户并在 5 分钟后取消阻止用户

> ID：12055564
> 
> 赞同：0
> 
> 时间：2012-08-21T13:08:29.377
> 
> 标签：c#, asp.net, login, login-attempts

我想问在指定的失败尝试后如何阻止用户。30 分钟或任何时间后，用户将能够再次登录。这是我的登录示例代码。

```
public partial class Login : System.Web.UI.Page
{
    SimplerAES AES = new SimplerAES();
    protected void Page_Load(object sender, EventArgs e)
    {
        Session.Clear();
    }
    protected void btnLogIn_Click(object sender, EventArgs e)
    {

        if (txtUsername.Text == "" || txtPassword.Text == "")
        {
            lblMessage.Visible = true;
            txtUsername.Text = "";
            txtPassword.Text = "";
            lblMessage.Text = "Invalid Username/Password";
        }
        else
        {
            SqlConnection con = new SqlConnection(SeiboLMS.Helper.GetConnectionString());
            con.Open();

            SqlCommand com = new SqlCommand();
            com.Connection = con;
            com.CommandType = CommandType.Text;

            com.CommandText = "SELECT * FROM Users WHERE UserName=@UserName";

            com.Parameters.Add("@UserName", SqlDbType.NVarChar);
            com.Parameters[0].Value = txtUsername.Text;

            SqlDataReader data = com.ExecuteReader();

            if (data != null)
            {
                while (data.Read())
                {
                    if (txtPassword.Text == AES.Decrypt(data["Password"].ToString()))
                    {
                        if (data["UserTypeID"].ToString() == "1")
                        {
                            Session["userid"] = data["UserID"].ToString();
                            Session["usertypeid"] = data["UserTypeID"].ToString();
                            Session["username"] = data["UserName"].ToString();
                            Session["password"] = data["Password"].ToString();
                            Helper.Logs(int.Parse(data["UserID"].ToString()), 1, "Log In Successful");
                            Response.Redirect("Admin/Default.aspx");
                        }
                        else
                        {
                            Session["userid"] = data["UserID"].ToString();
                            Session["usertypeid"] = data["UserTypeID"].ToString();
                            Session["username"] = data["UserName"].ToString();
                            Session["password"] = data["Password"].ToString();
                            Helper.Logs(int.Parse(data["UserID"].ToString()), 1, "Log In Successful");
                            Response.Redirect("Employees/Default.aspx");
                        }

                    }
                    else
                    {
                        lblMessage.Text = "Invalid Username/Password.";
                        txtUsername.Text = "";
                        txtPassword.Text = "";
                    }
                }
            }
            else
            {
                lblMessage.Text = "Invalid Username/Password.";
                txtUsername.Text = "";
                txtPassword.Text = "";
            }

            data.Close();
            con.Close();
            con.Dispose();
        }
    }
} 
```

请与我分享你有什么想法。先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:14:12.360

这个问题已经回答过很多次了。

搜索[尝试失败的 c# 登录](https://stackoverflow.com/search?q=c%23+login+with+failed+attempts&submit=search)

这个特定的问题非常相似。 [登录 - 仅允许 3 次尝试](https://stackoverflow.com/questions/3988013/login-allow-only-3-attempts)

[威廉](https://stackoverflow.com/users/245581/willem)的[最高投票答案](https://stackoverflow.com/a/3988168/444610)有以下文字：

> 使用 MembershipProvider 并在您的 web.config 中，在 system.web 中，您可以配置尝试次数和超时。根据您的要求设置 maxInvalidPasswordAttempts="3" 和 passwordAttemptWindow="5"。

我建议如果你觉得这有帮助，你就去投票给 Willems [answer](https://stackoverflow.com/a/3988168/444610)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:16:27.120

您可以使用 MembershipProvider 或根据您的数据库结构创建自己的。实现这一点的方法很多，但一种方法是包含 login_attempt、lockflag 和 timestamp 列。我猜你有 login_attempt 计数器并且正在递增它（并在成功时将其重置为零）然后在登录时检查值，如果用户被锁定，检查时间戳以查看帐户何时以及是否有足够的时间过去被解锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:18:11.577

那么，你可以做的是以下几点：

1）在您的用户表中添加一个字段（DateTime），指示他/她被阻止的时间超过了最大登录尝试次数。2) 在 web.config（可能是 AppSettings）中添加一个键，指示访问被阻止的用户必须等待多长时间才能重试。3) 尝试验证用户时，检查锁定字段（DateTime）是否为空，如果是用户正常登录。否则将当前时间与表中此字段中的时间进行比较，如果大于 appsettings 值，则阻止用户登录。

希望我有所帮助！

# perl - 使用 Mojolicious 桥接时的深度递归

> ID：12055568
> 
> 赞同：1
> 
> 时间：2012-08-21T13:08:45.133
> 
> 标签：perl, mojolicious

我定义了一个 Mojolicious 桥

```
my $foo = $route->bridge('/')->to(cb => sub {
    my $self = shift;
    return 1;
});
return $foo; 
```

我正在定义这样的路线

```
$foo->route('/')->to(
    module      => 'test',
    controller  => 'test',
    action      => 'test'
);

$foo->route('/login')->to(
    module      => 'test1',
    controller  => 'test1',
    action      => 'test1'
); 
```

启动应用程序后，在 /usr/local/share/perl5/Mojolicious/Routes/Route.pm 第 23 行的子例程“Mojolicious::Routes::Route::AUTOLOAD”上出现错误 Deep recursion。

我不知道这里发生了什么。谁能帮我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:14:15.187

您可以做的一件事是重新定义 AUTOLOAD 子以发出跟踪，如下所示：

```
{   no warnings 'redefine';
    my $old_autoload = *Mojolicious::Routes::Route::AUTOLOAD{CODE};
    *Mojolicious::Routes::Route = sub { 
        Carp::cluck( "Trace from $Mojolicious::Routes::Route::AUTOLOAD\n - " );
        goto &$old_autoload;
    };
} 
```

这至少会给你问题的名称和路径。您也可以在其中放置一些递归跟踪，尽管它可能需要弄乱 a`goto`留下的小足迹。

# nsis - NSISdl 在下载期间无法打开文件

> ID：12055570
> 
> 赞同：1
> 
> 时间：2012-08-21T13:08:49.083
> 
> 标签：nsis

我正在使用 NSIS 创建一个安装程序，它将从 Web 服务器安装文件。我正在使用 NSISdl 插件下载文件，但它们没有下载，它只是说下载失败：打开文件失败。

这是正在下载的部分，我可以在这里遗漏一些东西吗？

```
 Section "Aquiva"
    ; Set    output path to the installation directory.
    SetOutPath $INSTDIR

    ;Include files from this location, and copy that to the current
    ;out path

    NSISdl::download http://41.78.239.158/Aquiva.exe
Pop $R0 ;Get the return value
  StrCmp $R0 "success" +3
    MessageBox MB_OK "Download failed: $R0"
    Quit

SectionEnd ; end the section 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:48.543

您应该`inetc`为此目的使用：

```
inetc::get "http://41.78.239.158/Aquiva.exe" "$EXEDIR\Aquiva.exe"
pop $R0
DetailPrint "Result: $R0" 
```

你可以在[这里得到](http://nsis.sourceforge.net/Inetc_plug-in)

如果您坚持使用`NSISdl`，您的问题可能是由于未指定目标文件，请尝试以下操作：

```
NSISdl::download http://41.78.239.158/Aquiva.exe "$INSTDIR\Aquiva.exe"
pop $R0
... 
```

# ios5 - 按下时隐藏底部栏不起作用

> ID：12055580
> 
> 赞同：0
> 
> 时间：2012-08-21T13:09:55.430
> 
> 标签：ios5, uitabbarcontroller, uistoryboard

我有 UINavigationController，它包含 TabBarController。标签栏子控制器总是隐藏底部标签栏，无论是否选择了“按下时隐藏底部栏”。

试图以编程方式设置：

```
downloadViewController.hidesBottomBarWhenPushed = NO;
[self.navigationController pushViewController:downloadViewController animated:NO]; 
```

但仍然没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:15:34.087

通过删除导航控制器并为每个选项卡添加导航控制器来解决。

# android - 在 webview 中加载 facebook.com 时，lenovo Ideapad 应用程序崩溃

> ID：12055584
> 
> 赞同：2
> 
> 时间：2012-08-21T13:10:03.923
> 
> 标签：android, facebook, sqlite, android-webview, android-sqlite

**在lenovo IdeaPad**上的 webview 中加载**facebook.com**时应用程序崩溃，并出现以下异常

 **这不是来自我的应用程序，而是系统抛出的异常。

当 facebook 在 lenovo 提供的标准浏览器中加载时，会观察到同样的崩溃。

在我运行应用程序时崩溃之后，没有观察到崩溃并且能够加载 facebook 页面，但这是随机行为，因为我可以在标准浏览器和我的 webview 上多次看到崩溃

这个异常是从我的应用程序中处理的吗？如何 ？

通常`onPageFinished()`在调用 webview 时会引发此异常，但有时会引发此异常`onPageStarted()`

以下是logcat日志

```
E/MediaProvider(4671): failed to open database external.db
E/MediaProvider(4671):android.database.sqlite.SQLiteDatabaseLockedException: error code 5: database is locked 
E/MediaProvider(4671):  at android.database.sqlite.SQLiteStatement.native_1x1_string(Native Method)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteStatement.simpleQueryForString(SQLiteStatement.java:154)
E/MediaProvider(4671):  at android.database.DatabaseUtils.stringForQuery(DatabaseUtils.java:736)
E/MediaProvider(4671):  at android.database.DatabaseUtils.stringForQuery(DatabaseUtils.java:724)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteDatabase.setJournalMode(SQLiteDatabase.java:1030)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:966)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
E/MediaProvider(4671):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:734)
E/MediaProvider(4671):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
E/MediaProvider(4671):  at com.android.providers.media.MediaProvider$DatabaseHelper.getWritableDatabase(MediaProvider.java:252)
E/MediaProvider(4671):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:223)
E/MediaProvider(4671):  at com.android.providers.media.MediaProvider.query(MediaProvider.java:1743)
E/MediaProvider(4671):  at android.content.ContentProvider$Transport.bulkQuery(ContentProvider.java:179)
E/MediaProvider(4671):  at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:111)
E/MediaProvider(4671):  at android.os.Binder.execTransact(Binder.java:320)
E/MediaProvider(4671):  at dalvik.system.NativeStart.run(Native Method)
D/dalvikvm(121): GC_CONCURRENT freed 2041K, 46% free 15375K/28227K, paused 3ms+8ms
W/InputManagerService(121): Got RemoteException sending setActive(false) notification to pid 4693 uid 10089
D/AsyncChannel(121): TODO: handle sendMessage RemoteExceptionandroid.os.DeadObjectException
D/dalvikvm(4671): GC_EXPLICIT freed 282K, 30% free 6356K/8963K, paused 6ms+2ms
E/SQLiteDatabase(4671): close() was never explicitly called on database '/data/data/com.android.providers.media/databases/external.db' 
E/SQLiteDatabase(4671): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1980)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:977)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
E/SQLiteDatabase(4671):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:734)
E/SQLiteDatabase(4671):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider$DatabaseHelper.getWritableDatabase(MediaProvider.java:252)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:223)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider.query(MediaProvider.java:1743)
E/SQLiteDatabase(4671):  at android.content.ContentProvider$Transport.bulkQuery(ContentProvider.java:179)
E/SQLiteDatabase(4671):  at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:111)
E/SQLiteDatabase(4671):  at android.os.Binder.execTransact(Binder.java:320)
E/SQLiteDatabase(4671):  at dalvik.system.NativeStart.run(Native Method)
E/SQLiteDatabase(4671): close() was never explicitly called on database '/data/data/com.android.providers.media/databases/external.db' 
E/SQLiteDatabase(4671): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1980)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:977)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
E/SQLiteDatabase(4671):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:734)
E/SQLiteDatabase(4671):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider$DatabaseHelper.getWritableDatabase(MediaProvider.java:252)
E/SQLiteDatabase(4671):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:223)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider.query(MediaProvider.java:1743)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider.attachVolume(MediaProvider.java:4035)
E/SQLiteDatabase(4671):  at com.android.providers.media.MediaProvider.onCreate(MediaProvider.java:443)
E/SQLiteDatabase(4671):  at android.content.ContentProvider.attachInfo(ContentProvider.java:955)
E/SQLiteDatabase(4671):  at android.app.ActivityThread.installProvider(ActivityThread.java:3880)
E/SQLiteDatabase(4671):  at android.app.ActivityThread.installContentProviders(ActivityThread.java:3635)
E/SQLiteDatabase(4671):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3591)
E/SQLiteDatabase(4671):  at android.app.ActivityThread.access$2200(ActivityThread.java:122)
E/SQLiteDatabase(4671):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1040)
E/SQLiteDatabase(4671):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/SQLiteDatabase(4671):  at android.os.Looper.loop(Looper.java:132)
E/SQLiteDatabase(4671):  at android.app.ActivityThread.main(ActivityThread.java:4025)
E/SQLiteDatabase(4671):  at java.lang.reflect.Method.invokeNative(Native Method)
E/SQLiteDatabase(4671):  at java.lang.reflect.Method.invoke(Method.java:491) 
```**

# directx-11 - 如何手动设置 ID3D11Texture2D 纹素？

> ID：12055592
> 
> 赞同：2
> 
> 时间：2012-08-21T13:10:48.403
> 
> 标签：directx-11, texture2d

我要制作一个光线追踪器，我想将我的渲染数据存储在 ID3D11Texture2D 上，以便我可以使用 DX11 显示它或轻松保存到文件，但我不知道如何使用我将拥有的数据初始化 ID3D11Texture2D（可能是32 位 RGB 颜色数组）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:22:17.740

如果您在创建时已经知道内容，则可以`pInitialData`在[CreateTexture2D](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476521%28v=vs.85%29.aspx)中指定，或者在纹理上调用`UpdateSubresource` [(MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486%28v=vs.85%29.aspx)或`Map` [(MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476457%28v=vs.85%29.aspx) / `Unmap` [(MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476485%28v=vs.85%29.aspx)以使用原始值填充它。

# amazon-s3 - EMR 如何将文件合二为一？

> ID：12055595
> 
> 赞同：6
> 
> 时间：2012-08-21T13:10:55.760
> 
> 标签：amazon-s3, amazon-web-services, hadoop-streaming, amazon-emr, emr

我已将大二进制文件拆分为 (2Gb) 块并将其上传到 Amazon S3。现在我想将它加入一个文件并使用我的自定义处理

我试过跑

```
elastic-mapreduce -j $JOBID -ssh \
"hadoop dfs -cat s3n://bucket/dir/in/* > s3n://bucket/dir/outfile" 
```

但由于 -cat 将数据输出到我的本地终端而失败 - 它无法远程工作......

我怎么能做到这一点？

PS 我尝试将 cat 作为流式 MR 作业运行：

```
den@aws:~$ elastic-mapreduce --create --stream --input s3n://bucket/dir/in \
--output s3n://bucket/dir/out --mapper /bin/cat --reducer NONE 
```

这项工作已成功完成。但。我在 dir/in 中有 3 个文件部分 - 现在我在 /dir/out 中有 6 个部分

```
part-0000
part-0001
part-0002
part-0003
part-0004
part-0005 
```

和文件 _SUCCESS ofcource 这不是我的输出的一部分......

所以。如何加入拆分前的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:19:32.270

所以。我找到了解决方案。也许不是更好 - 但它正在工作。

所以。我创建了一个带有引导操作的 EMR 作业流程

```
--bootstrap-action joinfiles.sh 
```

在那个 joinfiles.sh 中，我使用 wget 从 S3 下载我的文件片段，使用常规 cat abc > abc 加入它们。

之后，我添加了一个 s3distcp，它将结果复制回 S3。（样本可以在：[https](https://stackoverflow.com/a/12302277/658346) ://stackoverflow.com/a/12302277/658346 找到）。就这些。

# svg - 更改刻度标签 D3 的大小

> ID：12055597
> 
> 赞同：2
> 
> 时间：2012-08-21T13:10:58.933
> 
> 标签：svg, d3.js, label, legend

我想增加使用 D3 标记我的图例的数字的大小。传说是这样制作的：

```
map.legend_axes = d3.svg.axis()
            .scale(map.legend_scales)
            .orient('bottom')
            .tickSize(map.settings.legend.ticks); 
```

我可以通过一个参数来增加数字的大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:22:33.883

添加一个增加字体大小的 CSS 类，然后将该类添加到轴上的文本中：

```
d3.selectAll("axisElement")
  .classed("large-font", true); 
```

# c++ - 带有指向自身的指针的 Arduino 结构泄漏内存

> ID：12055600
> 
> 赞同：1
> 
> 时间：2012-08-21T13:11:13.133
> 
> 标签：c++, memory-leaks, struct, arduino

我有一个 arduino 程序，我想将数据存储在**动态列表中**。为此，我使用以下内容`struct`：

```
struct Project {
  boolean         status;
  String          name;
  struct Project* nextProject;
}; 
```

`Project`现在我根据外部数据生成动态数量的对象。我只有第一个`Project`对象作为变量，其余的我可以通过`nextProject`指针获得。

对象的生成每分钟`Project`都在 my 中完成。`loop`问题是我有时会失去记忆，直到它变空。
这就是我的主循环的样子：

```
void loop() {
  webServer(server);
  webClient();

  if (parseTimer(60)) {
    sendRequest();
  }
} 
```

（`parseTimer`是一个非阻塞延迟函数，`true`每 60 秒返回一次；`sendRequest`生成`Project`对象）

我测量内存的方法：

```
uint8_t* stackptr;
uint8_t* heapptr;

long getFreeMemory() {
  stackptr = (uint8_t *) malloc(4);
  heapptr  = stackptr;
  free(stackptr);
  stackptr = (uint8_t *) (SP);

  return long(stackptr) - long(heapptr);
} 
```

这是每个循环的内存量：

```
1:  4716 *
2:  4716 *
3:  4716 *
4:  4671
5:  4687
6:  4587 *
7:  4736
8:  4587 *
9:  4559
10: 4577
11: 4515
12: 4527
13: 4587 *
14: 4479
15: 4497
16: 4435
17: 4447
18: 4587 *
19: 4399
20: 4417
21: 4355
22: 4367
23: 4587 *
24: 4319 
```

内存越来越少，但在前几个循环之后，每 5 个循环我就有`4587 Bytes`可用内存。大约 280 次循环后，程序内存不足，但在此之前，每 5 次循环都有完全`4587 Bytes`可用的内存。谁能解释一下导致这种奇怪行为的原因以及如何创建一个不会泄漏内存的更好的动态列表。

**更新**

在每个循环中，都会`Project`生成、使用和删除对象。它做某事。像这样：

```
void sendRequest() {
  // at first it gets some remote data from a server the result is:
  String  names[]  = {"Project 1", "Project 2", "Project 3"};
  boolean states[] = {true, false, true};

  for(int i = 0; i <= projectCount; i++) {
    addProject(names[i], states[i]);
  }
}

// all variables that are not declarated here are declarated in the
// header file of the class
void addProject(String name, boolean state) {
  if (!startProject) {
    startProject = true;

    firstProject.status      = state;
    firstProject.name        = name;
    firstProject.nextProject = NULL;

    ptrToLastProject = &firstProject;
  } else {
    ptrToLastProject->nextProject = new Project();

    ptrToLastProject->nextProject->status      = tempProjectStatus;
    ptrToLastProject->nextProject->name        = tempData;
    ptrToLastProject->nextProject->nextProject = NULL;

    ptrToLastProject = ptrToLastProject->nextProject;
  }
}

void RssParser::resetParser() { 
  delete ptrToLastProject;
  [...]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:57:29.457

首先，您没有泄漏内存，因为在每 5 次迭代中，您的内存恢复到**4587 字节**

然而，这里发生了一个有趣的模式。您会注意到，*在*您拥有**4587 个字节**之前发生的每组*调用*总是比最后一组少**80 个字节。**`getFreeMemory`

 *****我将*猜测*每个 接收到的数据越来越多`sendRequest`，作为回报，您试图在每次循环中**分配更多内存。**你在某个地方发布它很好，但在某些时候你试图分配太多！

一种可能性是您正在**附加**请求数据，而不是覆盖它，然后`projectCount`不断增加。

作为旁注，请注意**这一点**：

```
for(int i = 0; i <= projectCount; i++) {
    addProject(names[i], states[i]);
} 
```

遍历数组需要一个**基于 0 的索引**。当您检查条件时`i <= projectCount`，您可能会超出缓冲区。如果里面有`3`元素`names`，而你`projectCount`是`3`，当`i = 3`你访问时会发生什么`names[i]`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:26:40.997

在对项目的几乎每个功能进行大量研究和编写单元测试之后，我能够找到错误。

在我的`resetParser()`功能中，我只做了一个`delete ptrToLastProject`. 但是还有一个指向这个对象的指针，所以内存没有被释放。将此添加到`resetParser()`函数中修复了泄漏。

```
delete firstProject.nextProject; 
```

这样做的原因是因为`firstProject`它在堆栈上，并带有指向堆上列表中其他项目的指针。当我删除这个指针时，列表中的所有其他对象也被它们的析构函数删除。*****

# python - 如何生成连续的字符串？

> ID：12055601
> 
> 赞同：5
> 
> 时间：2012-08-21T13:11:12.507
> 
> 标签：python, string, generator, brute-force, alphanumeric

我想在python（没有字典）中生成一个来自aaa-zzz的字符串列表，然后输出一个这样的txt文件（注意，...是中间字符串的缩写）：

```
aaa
aab
aac
aad
...
aaz
aba
abb
abc
abd
...
aaz
...
zaa
...
zzy
zzz 
```

更难的挑战是生成交替（上下）字符串。如何生成这些？

```
aaa
...
aaz
aaA
...
aaZ
aba
...
abz
...
abA
...
abZ
aBa
...
aBz
aBA
...
aBZ
...
zzz
zzA
...
...
zzZ
zAa
...
zAz
...
zZa
...
zZz
...
...
ZZZ 
```

只是一个额外的问题，有没有办法在一代中不仅包括az，AZ，还包括0-9？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T13:15:03.127

```
import itertools, string

map(''.join, itertools.product(string.ascii_lowercase, repeat=3))
map(''.join, itertools.product(string.ascii_letters, repeat=3))
map(''.join, itertools.product(string.ascii_letters + string.digits, repeat=3)) 
```

# c++ - Boost::mutex 性能与 pthread_mutex_t

> ID：12055602
> 
> 赞同：3
> 
> 时间：2012-08-21T13:11:22.330
> 
> 标签：c++, mutex, boost-mutex

我`pthread_mutex_t`事先使用了 s 。代码有时会卡住。我有几行代码分散在我包装的函数中......

```
pthread_mutex_lock(&map_mutex);// Line 1
  //critical code involving reading/writing wrapped around a mutex //Line 2
pthread_mutex_unlock(&map_mutex); //Line 3 
```

不知道代码是如何/在哪里卡住的，我把它切换`pthread_mutex_t`到了`boost:mutex`

1）如果我只是用第 1 行替换第 1 行和第 3`boost::lock_guard<boost::mutex> lock(map_mutex);`行，并且一切正常，那么 pthread 实现会出现什么问题？

2）我是否通过切换到提升来放弃性能。这里的关键部分对时间非常敏感，所以我希望互斥锁非常轻量级。（C++，红帽）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:19:11.053

1.  If an exception is thrown, or the function returns, between lines 1 and 3, then the mutex will not be unlocked. The next time anyone tries to lock it, their thread will wait indefinitely.

2.  On a Posix platform, `boost::mutex` is a very thin wrapper around a `pthread_mutex_t`, and `lock_guard` just contains a reference to the mutex, and unlocks it in its destructor. The only extra overhead will be to initialise that reference (and even that is likely to be optimised away), and the extra code needed to unlock the mutex in the event of an exception/return, which you'd need anyway.

# java - 在写入 JTextField 时更新 JLabel，我应该使用哪个事件？

> ID：12055606
> 
> 赞同：2
> 
> 时间：2012-08-21T13:11:52.457
> 
> 标签：java, swing, jtextfield, documentlistener

我希望标签显示与文本字段相同。每次使用 KeyTyped 都会落后于一次击键，而使用 KeyPressed 则非常相似。

ActionPerformed 在我按 Enter 之前什么都不做。

```
private void myTextFieldKeyPressed(java.awt.event.KeyEvent evt) {
        cicloLabel.setText(myTextField.getText()+" horas apagado.");
    } 
```

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:14:35.423

您可以在此处使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)并调用`setText`您的标签。

# css - CSS中最后一行没有结束标签“;”的原因？

> ID：12055620
> 
> 赞同：4
> 
> 时间：2012-08-21T13:12:30.583
> 
> 标签：css

我使用 CSS 已经有一段时间了，我发现在很多教程和练习中，CSS 标记的最后一行没有“;” 添加到它。例如：

```
ul li:hover ul { 
    display: block
}

ul li ul {
      list-style: none;
      position: absolute;
      display: none;
      width: 104px;
      height: 100px;
      background-image: url(../_img/nav/dropdownbg.1.png);
      background-repeat: no-repeat;
      background-position: center;
      background-position: top
} 
```

如您所见，有两个示例。一个只有一行，另一个在一个标签中有不同的命令。我想知道为什么以及有什么理由这样做？！在学校，他们没有告诉我们任何关于这件事的事情。我只是用和“;”关闭最后一行或唯一一行 它工作得很好。

那么，这样做的原因是什么？是不是更安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:19:10.003

[Šime Vidas 对](https://stackoverflow.com/a/5732519/3609)相关问题的回答在这里也是有效的。分号是分隔符，因此不需要分隔最终属性。

但是，我不推荐它，因为在您需要在 CSS 规则的末尾添加另一个属性的情况下，您很可能会错过对分号的需求并且您的 CSS 会中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:17:46.510

[规格](http://www.w3.org/TR/CSS2/syndata.html)说_

```
ruleset     : selector? '{' S* declaration? [ ';' S* declaration? ]* '}' S*; 
```

如您所见，这并不意味着`;`以花括号结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:15:42.097

分号是一个分隔符：它分隔事物。最后一项不需要与后面的任何内容分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:16:33.157

分号分隔不同的行，所以如果你已经到了最后一行，就不需要输入分号，因为你会看到一个大括号，它不仅关闭了行，还关闭了块。

无论如何，我个人更愿意输入分号，但您可以随意将其省略。

也退房；[http://www.pagetoscreen.net/journal/item/the_missing_semi-colon/](http://www.pagetoscreen.net/journal/item/the_missing_semi-colon/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:14:53.970

由于它是规则中的最后一行，因此它与下一条规则之间没有歧义，因为没有。这就是为什么可以去掉最后一个分号的原因。否则，它不会提供任何好处或性能提升。

# visual-studio-lightswitch - URI 无效：升级到 LightSwitch v2 后 Uri 字符串过长

> ID：12055621
> 
> 赞同：0
> 
> 时间：2012-08-21T13:12:31.613
> 
> 标签：visual-studio-lightswitch

我已将我的 Lightswitch 应用程序从 v1 升级到 v2，当我选择菜单时，某些屏幕返回以下错误：

![在此处输入图像描述](../Images/6694fd3244ae03cfaba31147a13a6100.png)

Silverlight 向服务器发出的某些 URL 字符串请求似乎太长了。

在另一个菜单上，我也收到以下相同的错误，但在 VS 2012 中。这是生成的 LightSwitchApplication 命名空间的代码部分。

![在此处输入图像描述](../Images/16a1e26b5c63b573c87b676f9e28e08c.png)

我在浏览器或桌面模式下遇到同样的错误。

将新发布的 VS 2012 与 SQL Server 一起使用

**更新（2012 年 8 月 21 日）：** 新测试完成：我在 VS 2012 中创建了一个全新的 Lightswitch 项目，仅向项目添加了**一个**SQL 数据库表（SQL Server 2008 R2），创建了该表的简单搜索屏幕和我有同样的错误。

此表包含 36 列

**更新（2012 年 8 月 22 日）：** 我找到了导致错误的原因。我有一个包含 80,289 个字符的 SQL 行 (nvarchar(MAX))。[它是来自 Telerik Rich Text Box 的 xml 字符串值，此实现Here](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/48/Using-the-Telerik-Rich-Text-Editor-In-Visual-Studio-LightSwitch.aspx)不再使用该值。它现在只是一个存储的字符串。如果我将 SQL 数据类型转换为 XML 而不是 nvarchar(MAX)，则 LS 页面现在可以工作。由于我也在 Microsoft Lightswitch 论坛上开设了论坛讨论，因此我现在将切换到[那里](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/e10b6569-efd3-447a-8b17-0e3bcbd3ae78/)以获得有关此行为的答案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:20:23.497

1）您是否进行了全部重建？2）你的文件系统中有这个项目吗？我所做的是将项目放在像“C：\ temp”这样的短目录路径中，看看这是否是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T02:06:53.867

如果迈克尔的建议没有帮助，也可能是表中标记为“默认显示”的属性数量。您可以尝试取消选中不需要显示的任何属性的框（这也会影响搜索）。

# mdx - MDX - 添加“where”过滤器时，avg 函数无法按预期工作

> ID：12055630
> 
> 赞同：0
> 
> 时间：2012-08-21T13:12:56.870
> 
> 标签：mdx, average

**问题**

下面的 MDX 没有返回我期望的平均毛利润数字。

**MDX**

```
select NON EMPTY {Hierarchize({[New Repeat].[New Repeat].[New]})} ON COLUMNS,
NON EMPTY {Hierarchize({[Measures].[Order Count], [Measures].[Total Gross Profit], [Measures].[Average Gross Profit]})} ON ROWS
from [USAOrders]
where {({{[Voucher Code].[ABC], [Voucher Code].[DEF]}})} 
```

回报：

新重复=新

订单数 = 13

总毛利 = 438.03

平均毛利润 = 24.668

（平均毛利润应为 438.03/13 = 33.69）

**数字是如何得出的**

从此 MDX 派生的 SQL 返回 2 行：

```
new repeat voucher_code | order_count | total_gross_profit | avg_gross_profit    

       "ABC"                    2                23.26      11.63                
       "DEF"                   11               414.77      37.7063636363636 
```

因此，查看这些数字，MDX 似乎通过将每个凭证的平均毛利润相加，然后除以不同凭证的行数（在本例中为 2）来计算所有指定凭证的平均毛利润：

例如 (11.63 + 37.7063636363636)/2 = 24.668

然而，为了获得正确的数字，它应该将 Total Gross Profit 中的值相加并除以原始数据的行数：

例如 (23.26 + 414.77)/13 = 33.69

（在多维数据集中，总毛利和平均毛利是在毛利度量/列上使用 sum 和 avg 函数定义的度量）。

有没有办法解决问题以获得正确的号码？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:47:57.183

您的 MDX 非常简单。它只是从立方体中提取数字，而不是以任何方式调整它们。如果有错误，一定是在聚合方法或者OLAP多维数据集中的度量计算中。

相信你想用`SOLVE_ORDER`命令指示cube先进行计算得到total_gross_profit，然后再进行平均计算。对不起，我不能给你确切的语法来插入；您必须阅读文档。

# sql - 从范围计算总计的 SELECT 语句出现问题

> ID：12055633
> 
> 赞同：1
> 
> 时间：2012-08-21T13:13:00.240
> 
> 标签：sql, sql-server

抱歉，如果我的标题无论如何都具有误导性。试图为我遇到的问题想出一个准确的描述性标题时遇到了麻烦。

我有一些数据需要从我的 SQL Server 2008 R2 中提取。我只是想使用 C# ASP.Net 将此数据输出到 GridView。

我只是想看看是否有一种方法可以利用单个查询来提取我需要的所有数据。我会尽力解释我的设置并向您展示我的意思：

我有 2 个表，示例结构和数据如下。

**表：费率**

```
int  nvarchar         nvarchar         decimal nvarchar                  nvarchar                    nvarchar
ID   Location_Code_A  Location_Code_B  Rate    EffectiveRateDate_YYMMDD  TerminationRateDate_YYMMDD  Classificaton
54   123456           456789           400     110801                    999999                      C
55   123456           456789           885.3   110801                    999999                      D
56   123456           456789           901.75  110801                    999999                      T
57   123456           456789           407.5   120501                    120630                      C
58   123456           456789           850     120501                    120630                      D
59   123456           456789           898     120501                    120630                      T
60   123456           987654           325     110801                    999999                      C
61   123456           987654           345.5   120501                    120630                      C 
```

**表：跟踪**

```
int nvarchar           nvarchar         nvarchar         nvarchar              nvarchar
ID  TrackCode          Location_Code_A  Location_Code_B  DepartureDate_YYMMDD  Classification
7   124FWDSE48W621543  123456           456789           111025                C
8   124FWDSE48W621544  123456           456789           111025                C
9   124FWDSE48W621545  123456           456789           111025                C
10  124FWDSE48W621546  123456           456789           111025                D
11  124FWDSE48W621547  123456           456789           111025                D
12  124FWDSE48W621548  123456           456789           111028                T
13  124FWDSE48W621549  123456           456789           111025                C
14  124FWDSE48W621550  123456           456789           111125                C
15  124FWDSE48W621551  123456           456789           120525                D
16  124FWDSE48W621552  123456           456789           120526                C
17  124FWDSE48W621553  123456           987654           110927                C
18  124FWDSE48W621554  123456           987654           111027                C
19  124FWDSE48W621555  123456           987654           111027                C
20  124FWDSE48W621556  123456           987654           120514                C
21  124FWDSE48W621557  123456           987654           120515                C
22  124FWDSE48W621558  123456           987654           120515                C 
```

我想要实现的是一个分组查询，它提取`Tracking.TrackCode`, 乘以`Tracking.Location_Code`(s) 的计数，然后乘以`Rates.Rate`得到总数以及`Tracking.DepartureDate_YYMMDD`费率的有效/终止日期之间的位置。分类确实在确保使用正确的速率方面发挥了作用，但在实际的最终 GridView 中却没有。

所以我的 GridView 结果看起来像：

```
Location_A  Location_B  TotalTrackCodes  RateTotal
123456      456789      10               5522.35
123456      987654      6                2011.5 
```

您可以看到，当费率的离开日期介于其`Rates.EffectiveRateDate`&的 2 个不同记录之间时，就会出现我的问题`Rates.TerminationRateDate`。发生这种情况时，我想获取最新的费率信息，基本上是具有更新 Rates.EffectiveRateDate 的信息（如果转换为 int，则为最高 EffectiveRateDate）。

由于 EffectiveRateDates 不是日期格式，我只是在查询中将它们转换为 int 并将它们用作一种范围而不是进行检查等。似乎以这种方式工作得很好。

是否有可能做一个查询，我可以将它作为 DataSet 传递给我的 GridView 来给我正确的结果？

请注意，我没有构建这些表/格式等。它们已经由第 3 方填充，我只是想查询这些表，因此无法自行调整表。

非常感谢您的帮助。

为了节省人们的时间和帮助，请参阅下面的每个表及其数据内容的 SQL 转储：

```
/****** Object:  Table [dbo].[Tracking]    Script Date: 08/21/2012 14:03:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tracking](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [TrackCode] [nvarchar](50) NULL,
    [Location_Code_A] [nvarchar](50) NULL,
    [Location_Code_B] [nvarchar](50) NULL,
    [DepartureDate_YYMMDD] [nvarchar](50) NULL,
    [Classification] [nvarchar](50) NULL,
 CONSTRAINT [PK_Tracking] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[Tracking] ON
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (1, N'124FWDSE48W621543', N'123456', N'456789', N'111025', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (2, N'124FWDSE48W621544', N'123456', N'456789', N'111025', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (3, N'124FWDSE48W621545', N'123456', N'456789', N'111025', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (4, N'124FWDSE48W621546', N'123456', N'456789', N'111025', N'D')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (5, N'124FWDSE48W621547', N'123456', N'456789', N'111025', N'D')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (6, N'124FWDSE48W621548', N'123456', N'456789', N'111028', N'T')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (7, N'124FWDSE48W621549', N'123456', N'456789', N'111025', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (8, N'124FWDSE48W621550', N'123456', N'456789', N'111025', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (9, N'124FWDSE48W621551', N'123456', N'456789', N'120525', N'D')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (10, N'124FWDSE48W621552', N'123456', N'456789', N'120526', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (11, N'124FWDSE48W621553', N'123456', N'987654', N'110927', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (12, N'124FWDSE48W621554', N'123456', N'987654', N'111027', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (13, N'124FWDSE48W621555', N'123456', N'987654', N'111027', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (14, N'124FWDSE48W621556', N'123456', N'987654', N'120514', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (15, N'124FWDSE48W621557', N'123456', N'987654', N'120515', N'C')
INSERT [dbo].[Tracking] ([ID], [TrackCode], [Location_Code_A], [Location_Code_B], [DepartureDate_YYMMDD], [Classification]) VALUES (16, N'124FWDSE48W621558', N'123456', N'987654', N'120515', N'C')
SET IDENTITY_INSERT [dbo].[Tracking] OFF
/****** Object:  Table [dbo].[Rates]    Script Date: 08/21/2012 14:03:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Rates](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Location_Code_A] [nvarchar](50) NULL,
    [Location_Code_B] [nvarchar](50) NULL,
    [Rate] [nvarchar](50) NULL,
    [EffectiveRateDate_YYMMDD] [nvarchar](50) NULL,
    [TerminationRateDate_YYMMDD] [nvarchar](50) NULL,
    [Classification] [nvarchar](50) NULL,
 CONSTRAINT [PK_Rates] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[Rates] ON
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (1, N'123456', N'456789', N'400', N'110801', N'999999', N'C')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (2, N'123456', N'456789', N'885.3', N'110801', N'999999', N'D')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (3, N'123456', N'456789', N'901.75', N'110801', N'999999', N'T')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (4, N'123456', N'456789', N'407.5', N'120501', N'120630', N'C')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (5, N'123456', N'456789', N'850', N'120501', N'120630', N'D')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (6, N'123456', N'456789', N'898', N'120501', N'120630', N'T')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (7, N'123456', N'987654', N'325', N'110801', N'999999', N'C')
INSERT [dbo].[Rates] ([ID], [Location_Code_A], [Location_Code_B], [Rate], [EffectiveRateDate_YYMMDD], [TerminationRateDate_YYMMDD], [Classification]) VALUES (8, N'123456', N'987654', N'345.5', N'120501', N'120630', N'C')
SET IDENTITY_INSERT [dbo].[Rates] OFF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:32:20.510

```
select
    Location_Code_A,
    Location_Code_B,
    COUNT(*),
    SUM(rate)
from
(    
    select 
    ROW_NUMBER() over (partition by tracking.id order by rates.effectiveratedate_yymmdd desc) rn,
    tracking.*, 
    convert(decimal(9,5),rates.Rate) rate
from 
    tracking
        inner join  
    rates
        on tracking.Location_Code_A = rates.Location_Code_A
        and tracking.Location_Code_B = rates.Location_Code_B
        and tracking.Classification = rates.Classification
        and tracking.DepartureDate_YYMMDD>=rates.EffectiveRateDate_YYMMDD
) v
where rn=1  
    group by Location_Code_A, Location_Code_B
    order by Location_Code_A, Location_Code_B 
```

生产

```
123456   456789 10  5929.85000
123456   987654 6   2011.50000 
```

# asp.net - Asp.net 文本文件上传和从数据库检索

> ID：12055634
> 
> 赞同：0
> 
> 时间：2012-08-21T13:13:00.053
> 
> 标签：asp.net, file-upload

网络文件上传和以下是用于检索 word 和 pdf 和 xsl 等文件的代码，但没有正确获取包含 aspx 代码的文本文件，也请填写下面的代码

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        LinkButton lbl = (LinkButton)sender;
        int idee = Convert.ToInt16(lbl.CommandArgument.ToString());
        DataTable dt = new DataTable();            
        con.Open();
        cmd = new SqlCommand("select Name, ContentType, Data from Data_Files where Id=@Id");
        cmd.Parameters.Add("@id", SqlDbType.Int).Value = idee;
        cmd.Connection = con;
        cmd.CommandType = CommandType.Text;
        da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        da.Fill(dt);
        if (dt != null)
        {
            Byte[] bytes = (Byte[])dt.Rows[0]["Data"];
            Response.Buffer = true;
            Response.Charset = "";
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            Response.ContentType = dt.Rows[0]["ContentType"].ToString();
            if (dt.Rows[0]["ContentType"].ToString() == "application/vnd.ms-word" || dt.Rows[0]["ContentType"].ToString() == "application/vnd.ms-excel" )
            {
               Response.AddHeader("content-disposition", "attachment;filename=" + dt.Rows[0]["Name"].ToString());
            }
            Response.BinaryWrite(bytes); 
```

{

# iphone - 使用 FBGraph API 共享图像不起作用

> ID：12055635
> 
> 赞同：0
> 
> 时间：2012-08-21T13:13:00.817
> 
> 标签：iphone, facebook, fb-graph

我已使用以下代码在 fb 墙上分享图像：

```
NSData *imageData = UIImageJPEGRepresentation(self.selectedImage, 10);
NSMutableDictionary* variables = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"your caption message", @"message", imageData, @"data", nil];
FbGraphResponse *fb_graph_response = [[sharedSingleton fbGraph] doGraphPost:@"me/photos" withPostVars:variables];
NSLog(@"postMeFeedButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

但是当我尝试分享时，应用程序就会崩溃。指导我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:30:19.870

试试这个代码.....

-(IBAction)postPictureButtonPressed:(id)sender {

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:2];

//create a UIImage (you could use the picture album or camera too)
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 20, 240, 240)];
[imgView setImage:[UIImage imageNamed:@"app1.jpg"]];
[self.view addSubview:imgView];
[imgView release];

UIImage *tempimag=imgView.image;

//UIImage *picture = [UIImage imageNamed:@"75x75.png"];

//create a FbGraphFile object insance and set the picture we wish to publish on it
FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:tempimag];

NSLog(@"img posted");

//finally, set the FbGraphFileobject onto our variables dictionary....
[variables setObject:graph_file forKey:@"file"];

[variables setObject:@"this is a test message: postPictureButtonPressed" forKey:@"message"];

//the fbGraph object is smart enough to recognize the binary image data inside the FbGraphFile
//object and treat that is such.....
FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"117795728310/photos" withPostVars:variables];
NSLog(@"postPictureButtonPressed:  %@", fb_graph_response.htmlResponse);

NSLog(@"Now log into Facebook and look at your profile & photo albums..."); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:44:35.977

// JSON EXAMPLE

.H FILE

NSMutableArray *arrRespone;

```
NSMutableDictionary *resultsDictionary; 
```

.M FILE

# define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1

# define kLatestKivaLoansURL [NSURL URLWithString: @"[http://www.indiaglitz.com/json/vod_menu_init.asp](http://www.indiaglitz.com/json/vod_menu_init.asp)"]

// [how can print array json values into uitableview in iphone](https://stackoverflow.com/questions/12418747/how-can-print-array-json-values-into-uitableview-in-iphone)

# import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize tableView1;

*   (void)viewDidLoad

{

arrRespone=[NSMutableArray new];

```
practice_ArrayForDisplayingEx=[[NSArray alloc]initWithObjects:@"bhupi",@"bhupi",@"bhupi",@"bhupi",nil];

dispatch_async(kBgQueue, ^ 
```

{

NSData* dataURL = [NSData dataWithContentsOfURL: kLatestKivaLoansURL]; [self performSelectorOnMainThread:@selector(fetchedData:) withObject:dataURL waitUntilDone:YES]; });

```
[super viewDidLoad];

// Do any additional setup after loading the view, typically from a nib. 
```

}

*   (void)fetchedData:(NSData *)responseData {

    NSError *error;

    resultsDictionary = [NSJSONSerialization JSONObjectWithData:responseData //1 options:kNilOptions error:&error];

    NSDictionary *arrDetails=[[resultsDictionary objectForKey:@"menu"] objectAtIndex:0] ; NSDictionary *genr=[[arrDetails valueForKey:@"categories"] objectAtIndex:0];

    NSLog(@"array detailsarray ====>%@",arrDetails); NSLog( @"genreee arrray==%@",genr); //NSLog(@"genrvalueeee -----%@",[genr valueForKey:@"genre"]);

    NSLog(@"counttttt===%d",[[genr valueForKey:@"genre" ] count]); NSLog(@"genre objectatindex==%@",[genr valueForKey:@"cliptype"]);

    for (int i=0;i<[[genr valueForKey:@"genre" ] count];i++) {

    ```
    NSDictionary *strDetails=[[genr valueForKey:@"genre"] objectAtIndex:i];
    NSString *str=[strDetails valueForKey:@"gname"];
    NSLog(@"First string details===>%@",str);

    [arrRespone addObject:str];

    NSLog(@"response ====>%@",arrRespone); 
    ```

    } [tableView1 reloadData]; }

# pragma mark Table view methods

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    NSLog(@"numberOfSectionsInTableView");

    return 1; }

*   (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{ return 45;

    NSLog(@"heightForRowAtIndexPath");

}

// Customize the number of rows in the table view. - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { NSLog(@"numberOfRowsInSection");

return [arrRespone count]; }

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"inside tableview"); static NSString *CellIdentifier = @"TableCell";

    //TableCell *cell = (TableCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

    ```
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier]; 
    ```

    } // cell.textLabel.text=[arrRespone objectAtIndex:indexPath.row];

    NSLog(@"cellvalue:%@",cell.textLabel.text); NSLog(@"inside numberofRowsInsection"); // Configure the cell... cell.textLabel.text = [arrRespone objectAtIndex:indexPath.row];

    return cell;

}

*   (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. }

@end

# ruby - 如何在 heroku 上运行简单的 ruby 脚本（不是 RoR 应用程序）？

> ID：12055637
> 
> 赞同：2
> 
> 时间：2012-08-21T13:13:07.260
> 
> 标签：ruby, heroku, scheduler

我想知道如何在 Heroku 上运行简单的脚本？到目前为止，我一直只使用我在 Heroku 上托管的 RoR 应用程序，但我从未在那里运行过一个简单的脚本。

我只需要运行由调度程序运行的简单 ruby​​ 脚本。我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:17:31.957

使用Heroku`rake`的`scheduler`插件。
这是 heroku 文档中的综合指南。
[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)
Baiscally 您创建了一个 rake 任务并选择何时运行它。这很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-07T05:42:59.333

您所要做的就是添加空白 Gemfile 和 Gemfile.lock 以便 heroku 将您的应用程序检测为 Ruby 应用程序。

```
#!/usr/bin/env ruby
source 'https://rubygems.org' 
```

# ruby-on-rails - Rails 3为日期设置语言环境

> ID：12055643
> 
> 赞同：0
> 
> 时间：2012-08-21T13:13:38.553
> 
> 标签：ruby-on-rails, locale

我在 rails 3.2.1 下，显示本地化月份名称时遇到问题

```
date.strftime("%d %B %Y") 
```

即使我在 application.rb 中设置了语言环境，我总是得到英文版本

```
config.i18n.default_locale = :it 
```

从控制台应用程序我得到这个输出

```
> I18n.locale
=> :it 
```

任何提示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:23:36.680

查看[Rails 国际化 API 指南](http://guides.rubyonrails.org/i18n.html)

首先，确保您有您的语言的翻译文件。您需要一个描述您的语言的 .yml 文件。第 3.3 节描述了如何设置处理日期和时间格式的本地化文件。

现在，加载您的本地化。（看来您已经这样做了。）似乎有几个地方可以设置您的语言环境。该指南的第 2.2 节 f 讨论了手动加载语言环境。

最后，[这个问题](https://stackoverflow.com/questions/3879680/how-can-i-make-rails-3-localize-my-date-formats)有更多关于 Ruby 日期国际化的内容。

# mysql - 如何从 MySQL 命令行客户端创建 sql 文件

> ID：12055647
> 
> 赞同：2
> 
> 时间：2012-08-21T13:13:55.903
> 
> 标签：mysql

我使用 MySQL 命令行客户端创建了一个数据库。*.frm 格式的所有数据库文件。现在我想从这个数据库的表中创建一个 *.sql 文件。这该怎么做 ？我在这里喜欢一些类似的问题，并且提供的解决方案都不适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:19:54.823

[mysql转储](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

```
mysqldump -uroot -p database > /path/to/file/database.sql 
```

用户名在哪里，`root`系统将提示您输入密码，`database`是数据库名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:17:14.343

使用 mysqldump 导出数据库。

```
mysqldump MyDatabase > MyDatabase.sql 
```

[http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T05:35:03.653

选择要创建其 .sql 文件的表 -> 然后单击导出 -> 然后按 Go。将创建该表的 .SQL 文件

# c# - 在 C# 中将字符串转换为控件名称

> ID：12055648
> 
> 赞同：3
> 
> 时间：2012-08-21T13:13:59.760
> 
> 标签：c#, winforms, controls

> **可能重复：**
> [在 C# winforms 中按名称查找控件](https://stackoverflow.com/questions/4483912/find-a-control-in-c-sharp-winforms-by-name)

想象一下，我们有 4 个文本框（和一个按钮）：

> textBox1:(这里我们必须输入我们要改变背景的文本框的名称)
> 
> 文本框2:()
> 
> 文本框3:()
> 
> 文本框4:()

在我们的第一个文本框中，我们输入任何其他文本框的名称，当我们点击一​​个按钮时 - 背景会相应地改变。

通常我会做这样的事情：

```
private void button1_Click(object sender, EventArgs e)
{
string variableName = textBox1.Text();

if (variableName == "textBox1")
{
    textBox1.BackColor = Color.Black;
}
else if (variableName == "textBox2")
{
    textBox2.BackColor = Color.Black;
}
else if (variableName == "textBox3")
{
    textBox3.BackColor = Color.Black;
}
else if (variableName == "textBox4")
{
    textBox4.BackColor = Color.Black;
}
} 
```

另一种方法 -执行相同操作**的更简单的方法是：**

```
private void button1_Click(object sender, EventArgs e)
{
    string variableName = textBox1.Text();
    variableName.BackColor = Color.Black;
} 
```

就这样！所以我的问题是：

是否可以将字符串转换为“控件名称”，如示例所示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T13:16:59.817

一个**非常乐观**的方法是

```
this.Controls.Find("variableName", true)[0].BackColor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:16:33.937

尝试这样的事情：

```
var txtBox = this.Controls.Find("textBox4", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:17:03.533

您可以创建一个`Dictionary<string, TextBox>`字典中每个文本框的名称是该文本框的键的位置。

然后它会像 一样简单`TextBoxDictionary[variableName].BackColor = Color.Black;`，尽管我建议在执行此操作之前检查以确保它确实在字典中。

# actionscript-3 - FireFox 显示意外错误

> ID：12055649
> 
> 赞同：0
> 
> 时间：2012-08-21T13:14:01.320
> 
> 标签：actionscript-3, flash, flashdevelop

大家好，我正在开发绘图应用程序。我已经完成了应用程序，但它无法在 FireFox 上正常工作，它显示为意外错误，即解释图像。谁能帮我找出这个错误。

这是错误屏幕的图像： ![火狐报错画面](../Images/3d03eb9974aa347e77e99d5db3817721.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:57:31.503

分配过多内存时会出现感叹号。

要诊断此问题，您可以使用诸如此类的性能监控工具来监控内存使用[情况](https://github.com/mrdoob/Hi-ReS-Stats)。它将显示您当前和最大内存使用量（以及其他有用数据）。

# mysql - 插入重复键上的复合键

> ID：12055650
> 
> 赞同：0
> 
> 时间：2012-08-21T13:14:04.233
> 
> 标签：mysql, sql

我想让我`m:n`的表与另一个系统的另一个 mysql 数据库表保持同步。

假设一个员工可以在 n 个部门工作，一个部门可以有 n 个员工：

```
Table Department(id(pk), name)

Table Employee(id(pk), name)

Table employee_department(employee_id(fk), department_id(fk)) 
```

对于我使用的所有其他表`"insert into...on duplicate key"`，它工作得很好，因为 Mysql 正在用新值更新找到的项目。如果我在employee_department 表上使用此语句，它会插入重复值（当然因为这些只是fks）。我考虑将 fks 更改为 pks 以便我有一个复合键。但是 mysql 没有再次插入，但没有从其他系统中删除已删除的引用。

我需要更改什么才能使完整的表保持同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:33:34.520

您不必删除当前的外键，只需添加主键或唯一复合键：

```
ALTER TABLE `employee_department`
ADD PRIMARY KEY (`employee_id`, `department_id`); 
```

或者

```
ALTER TABLE `employee_department`
ADD UNIQUE INDEX (`employee_id`, `department_id`); 
```

但是，请记住，您仍然必须手动删除在原始系统中删除且相关记录完好无损的关系。

2 种可靠的方法是进行完整的数据库擦除/转储或使用[复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

# jquery - 在页面（aspx）中查找运行时加载的用户控件（ascx）对象

> ID：12055651
> 
> 赞同：0
> 
> 时间：2012-08-21T13:14:09.210
> 
> 标签：jquery, asp.net, user-controls, ascx

我正在使用 jquery-ajax 将动态用户控件（ascx）加载到页面（aspx）。运行时，我想要一个已加载到 Page 中的用户控件实例。我能怎么做？谢谢

```
 function funDersinSubeleriniGoster(programDersGrubDersId) {
            $.blockUI();
            var ControlName = "OgrenciUserControls/KayitYenileme/DersSubeleriControl.ascx";
            $.ajax({
                type: "POST",
                url: "KayitYenileme.aspx/DersinSubeleriniYukle",
                data: "{controlName:'" + ControlName + "',programDersGrubDersId:'" + programDersGrubDersId + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    $.unblockUI();
                    //$('#dialogDersKayitPopup').html(response.d).dialog({ resizable: false, height: 600, width: 800, modal: true });
                },
                failure: function (msg) {
                    $.unblockUI();
                    //$('#dialogDersKayitPopup').html(msg).dialog({ resizable: false, height: 600, width: 800, modal: true });
                }
            });

            return false;

        } 
```

页面

```
[WebMethod]
public static void DersinSubeleriniYukle(string controlName, int programDersGrubDersId)
{

}

private void UserControlsFind()
{
    //I want to have user controls instance.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T11:00:06.010

答案是：[通过 jQuery 加载 ascx](https://stackoverflow.com/questions/4597103/load-ascx-via-jquery)

还可以在这里查看：http: [//zemlyaniy.wordpress.com/2011/07/11/render-ascx-control-to-pure-html-and-load-using-jquery/](http://zemlyaniy.wordpress.com/2011/07/11/render-ascx-control-to-pure-html-and-load-using-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:16:34.120

如果您传递对象名称（您的 DersinSubeleriniYukle sub 中的 controlName），您可以从服务器端找到该控件：

```
dim myControl as yourUserControlType 
myControl = me.findControl(controlName) 
```

您可能需要在 ascx 页面中添加参考，如下所示：

```
<%@ Reference Control="~/user_controls/yourUserControlType.ascx"%> 
```

# unit-testing - 存根/模拟与服务虚拟化..？呸呸呸

> ID：12055654
> 
> 赞同：7
> 
> 时间：2012-08-21T13:14:12.333
> 
> 标签：unit-testing, mocking, stub, service-virtualization

我目前正在研究难以触及的领域的单元测试（我知道这是一个非常高级的视图）并且我遇到了这个问题：存根/模拟或服务虚拟化？

我正在阅读以寻求答案，但我能找到的唯一资源似乎来自 SV 供应商（他们显然有偏见）。

谁能想到一个绝对比另一个更合适的例子，为什么？如果答案是“视情况而定”，那么请提出原因/内容。似乎任何一种方式都可以实现相同的结果 - 这是时间（开发）或可用资金（GreenHat等不便宜！）的问题。

提前致谢！

编辑：

检查下面发布的链接之一（1）后，我认为这就是我所得到的：

“虚拟服务只是你可以自己制作的测试存根。

虽然您可以编写自己的存根代码，但一旦您克服了非常简单的行为，在整个软件开发生命周期中模拟您所依赖的所有系统的工作量和成本就会变得不堪重负。服务虚拟化要求自动化，因为模拟和建模可以通过软件的直接观察来进行，而不需要手动编码和调整。否则，您维护存根环境所花费的时间可能与构建和测试应用程序功能本身所花费的时间一样多。”

基本上和任何工具一样，是吗？

(1) [http://servicevirtualization.com/top-10](http://servicevirtualization.com/top-10)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:53:40.117

好问题。基本上，存根将测试套件与环境断开连接，服务虚拟化模拟环境，以便更好地执行测试的真正意图。

更详细...

存根为对象、方法或函数提供替代实现，以消除外部依赖关系。存根通常在单元和组件测试期间用于两个主要目的：1) 将被测代码与集成环境隔离 2) 在无法访问外部资源或有问题的方法/功能/对象时进行测试.

如果您正在尝试编写单元测试并且需要替换对数据库、外部库（例如，文件 I/O）或其他系统 API 的简单调用，那么存根可能非常适合您的需求。

虽然存根/模拟通常用于“跳过”不可用的系统组件，但服务虚拟化允许团队成员模拟环境（或特定组件）并将其行为提供给整个团队。例如，服务虚拟化可用于模拟正在发展、尚不可用或难以访问/配置的依赖组件（例如第 3 方服务、数据库、大型机、打包应用程序等）的行为测试。

服务虚拟化可以代表比简单的存根和模拟更现实的行为。如果您可以访问相关应用程序，则可以通过从实时系统记录来在“虚拟资产”中捕获其当前行为。或者，您可以对代表预期行为的虚拟资产进行建模。然后，您可以通过参数化其条件行为、性能标准和测试数据来配置此虚拟资产。此外，您可以轻松地修改虚拟资产以生成适当的故障条件、异常等分类，以验证系统行为的全部范围。

我工作的公司 Parasoft 解决了这两个用例。我们的开发测试平台促进了单元测试的存根生成和管理，我们获得 Jolt 奖的 Parasoft Virtualize 产品提供服务虚拟化。有关详细信息，请参阅[http://www.parasoft.com/service-virtualization](http://www.parasoft.com/service-virtualization)和[http://www.parasoft.com/development-testing](http://www.parasoft.com/development-testing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T15:29:09.770

IMO，单元测试不应依赖于外部服务，包括服务虚拟化。

在编写集成测试、功能测试、端到端测试时，您只需要将这些依赖关系连接到外部服务。

尽管所有这些类型都可以在 JUnit 等测试框架中编写或驱动，但它们是不同类型的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-05T16:32:40.260

这是一篇概述差异的 InfoQ 文章：[Stubbing, Mocking and Service Virtualization Differences for Test and Development Teams](https://www.infoq.com/articles/stubbing-mocking-service-virtualization-differences)

来自文章：

> **存根**：接口的最小实现，通常返回与测试套件紧密耦合的硬编码数据。当测试套件很简单并且将硬编码数据保留在存根中不是问题时，它最有用。有些存根是手写的；有些可以通过工具生成。存根通常由开发人员编写供个人使用。它可以与测试人员共享，但更广泛的共享通常受到与硬编码的软件平台和部署基础设施依赖关系相关的互操作性问题的限制。一种常见的做法是，当存根直接在进程中使用类、方法和函数进行单元、模块和验收测试时。一些开发人员会说存根也可以被启动，但您无法验证存根上的调用。存根也可以“通过网络”进行通信，
> 
> **嘲笑**：一个可编程的接口观察器，根据测试定义的期望验证输出。它经常使用第三方库创建，例如在 Java 中的 Mockito、JMock 或 WireMock。当您有大量测试并且存根不够用时，它最有用，因为每个测试都需要设置不同的数据，并且在存根中维护它们的成本很高。模拟让我们在测试中保持数据设置。模拟通常由开发人员编写供个人使用，但可以与测试人员共享。然而，更广泛的共享通常受到与硬编码的软件平台和部署基础设施依赖关系相关的互操作性问题的限制。他们通常直接在进程内处理单元、模块和验收测试的类、方法和函数。Mock 根据满足预定义条件的给定请求提供响应（也称为请求或参数匹配）。模拟还关注交互而不是状态，因此模拟通常是有状态的。例如，您可以验证调用给定方法的次数或调用给定对象的顺序。
> 
> **虚拟服务**：通常作为软件即服务 (SaaS) 提供的测试替身，总是被远程调用，并且永远不会直接使用方法或函数在进程中工作。虚拟服务通常是通过使用服务虚拟化平台之一记录流量来创建的，而不是基于接口或 API 文档从头开始构建交互模式。虚拟服务可用于为团队建立共同基础，以便与其他开发团队以及测试团队进行沟通和促进工件共享。远程调用虚拟服务（通过 HTTP、TCP 等）通常支持多种协议（例如 HTTP、MQ、TCP 等），而存根或模拟通常仅支持一种。有时，虚拟服务需要用户授权，尤其是在部署在具有企业范围可见性的环境中时。用于创建虚拟服务的服务虚拟化工具通常具有用户界面，允许不太懂技术的软件测试人员在深入了解特定协议如何工作的细节之前开始运行。它们有时由数据库支持。它们还可以模拟系统的非功能特性，例如响应时间或慢速连接。您有时可以找到为给定请求标准提供一组存根响应的虚拟服务，并将所有其他请求传递给实时后端系统（部分存根）。与模拟类似，虚拟服务可以有相当复杂的请求匹配器，允许为许多不同类型的请求返回一个响应。有时，虚拟服务通过基于请求属性和数据构造部分响应来模拟系统行为。
> 
> 通常很难确定测试替身适合以下哪些类别。它们应该被视为频谱而不是严格的定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:20:05.340

我们的意思是 SV 可以比存根更真实地表示行为。服务虚拟化不需要像孤岛一样运行；它们可以代表复合行为。例如，在一个虚拟端点中转移资金的调用可以触发另一个虚拟端点的帐户余额更新。这允许虚拟资产以有状态的方式运行，并允许您轻松地对整个系统的行为进行建模——即使该行为跨越多个连接、协议或接口。

# excel - 根据 Excel 2010 中的配置“食谱”创建订单列表

> ID：12055655
> 
> 赞同：1
> 
> 时间：2012-08-21T13:14:17.497
> 
> 标签：excel, list, vlookup, recipe

我一直在创建一个庞大的机械设备清单以及组装它们所需的零件。基本上我拥有的是三个工作表。
一张包含所有可订购零件（例如螺钉、螺母、螺栓）及其订购数量，
一张包含构建特定设备所需零件数量和类型的工作表（例如，一个小部件需要 3 个螺钉、0 个螺母和 4 个螺栓）
和一张汇总表应该在哪里输入想要构建的设备。

由于每个零件都不能以单一数量订购，而是以更大的包装（例如 500 个螺钉、100 个螺栓等）订购，我需要一些解决方案来阅读“待建”表，查找所有小工具，添加需要的相应零件并创建一个列表，列出我需要的每个零件的数量。

我尝试过通过 vlookup 以某种方式做到这一点，但这些查询让我大吃一惊，而且我对 VBA 缺乏经验。我忽略了一个简单的解决方案吗？非常感谢你。

*编辑*

下面的示例数据：

**这是设备的配方列表**

```
设备名称 Part 1 数量 1 Part 2 数量 2 Part 3 数量 3 价格
小工具螺丝 20 螺母 40 螺栓 12 6,14 €
小部件螺丝 10 螺栓 12 垫圈 100 2,02 €
Thingie 螺母 11 垫圈 122 螺栓 14 2,93 €

```

**这是零件清单和订单尺寸**

```
零件 订单大小 价格 每单位价格
螺丝 500 20 € 0,040 €
坚果 100 12 € 0,120 €
螺栓 200 9 € 0,045 €
垫圈 1000 10 € 0,010 €

```

**这是设备的订单列表**

```
项目金额
小工具 14
小部件 22
东西121

```

现在我想创建一个如下所示的表（或报告、文本文件或任何类型的汇总输出）：

*这些数字现在组成*

```
订购零件 包装数量 价格
螺丝 1 20€
坚果 3 36€
螺栓 2 18€
垫圈 5 50€

```

我没有任何有用的代码可以分享，因为我在 vlookups 中玩过 vlookups，我得到的只是头疼......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T00:52:50.963

首先，通过向订单列表添加列来进行中间步骤（这可以很好地粘贴到带有空格分隔符的 Excel 中，对于此处的格式表示抱歉）。您可能希望考虑以`Recipe`不同的方式格式化选项卡，但我已经使用了您所拥有的）：

```
Item    Amount  Screws  Bolts   Nuts    Washers
Gadget  14  280 168 560 0
Widget  22  220 264 0   2200
Thingie 121 0   1694    1331    14762 
```

其次，对“螺丝”下的公式使用以下公式并向下/向上拖动：

```
 =$B2*(SUMIFS(recipe!$C:$C,recipe!$B:$B,order!C$1,recipe!$A:$A,order!$A2)+SUMIFS(recipe!$E:$E,recipe!$D:$D,order!C$1,recipe!$A:$A,order!$A2)+SUMIFS(recipe!$G:$G,recipe!$F:$F,order!C$1,recipe!$A:$A,order!$A2)) 
```

这`SUMIFS`会根据您的配方列表中的 Item 和 PartType 来计算 a。因为您需要在`Recipe`选项卡上检查三列部分，所以您需要将基本相同的公式重复 3 次。乘以这些零件的总数，即可得出每个项目的每个基本零件的总数。如果每个 Item/basicPart 都有自己的行条目，那么公式文本将是 1/3。

现在您已经计算出每个基本部件的总数量`Item`，您需要编写`Report`公式来给出包装数量。我添加了一个中间`total # required`列以使这一点更清楚。

```
Parts to be ordered total # required    Amount of packages  Price
Screws  500 1   20 €
Nuts    1891    19  228 €
Bolts   2126    11  99 €
Washers 16962   17  170 € 
```

要汇总每个部分的总数，您可以根据每个部分的`=sum(order!C:C)`列手动设置适当的公式，或使用以下公式：

```
=SUM(OFFSET(order!B:B,0,MATCH(A2,order!$C$1:$F$1,FALSE))) 
```

这会在上面构建的订单选项卡上找到匹配的列并将其相加。为了降低复杂性，您可以对其进行硬编码。但是，将此添加到单元格 Reports!B2 并向下拖动。

最后，使用以下公式获得`Amount of Packages`（在 Reports!C2 中输入）：

```
=ROUNDUP(B2/VLOOKUP(A2,ordersize!A:B,2,FALSE),0) 
```

然后获取您的总成本（在报告中输入！D2）：

```
=C2*VLOOKUP(A2,ordersize!A:C,3,FALSE) 
```

您可能必须根据我使用的工作表名称更改一些公式。

* * *

我认为值得注意的是，您可能可以通过数据透视表以最少的 Excel 公式为您提供所需的所有输出的方式重组这些数据。因此，“简单的解决方案”是了解数据透视表的工作原理并确定如何最好地重组信息（以及可以更改哪些元素），并让自己避免一些更复杂的 Excel 公式工作。

# c# - App_Code VS 程序集中的 ASP.NET 自定义 Web 控件

> ID：12055659
> 
> 赞同：0
> 
> 时间：2012-08-21T13:14:28.303
> 
> 标签：c#, asp.net, dll, custom-controls, .net-assembly

我已经实现了一些 asp.net 服务器控件，我已将它们放入**App_Code**文件夹中。由于此文件夹是在运行时编译的，它会**减慢**网站的运行速度吗？

第 2 次。如何将它们移动到单独的 dll 文件中？（参考一些好的链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:18:13.983

把它们放在一个dll中。只需在 VS 中创建一个“库”项目并将控件放在那里。将此库 (.dll) 添加到您想要的任何项目中，您将拥有自己的控件。我没有提供链接，因为您可能无需查看任何文档就可以做到这一点（这很简单，只需将项目创建为库，将其构建为 .dll，然后链接到任何项目）。

正如 yogi 所说，您可能不会获得性能，但它是一个控件，应该放在“库”中以便于重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:20:05.540

你好 levanlevi 你可以试试这篇文章，他们很有趣

[http://msdn.microsoft.com/fr-fr/library/4yf3whkx(v=vs.90).aspx](http://msdn.microsoft.com/fr-fr/library/4yf3whkx(v=vs.90).aspx)

[http://www.codeproject.com/Articles/7708/Web-Custom-Controls](http://www.codeproject.com/Articles/7708/Web-Custom-Controls)

您必须在库中创建控件并添加对该库的引用。最后，您必须在使用前注册此程序集

# c# - 使用 AdoJobStore 删除持久作业

> ID：12055661
> 
> 赞同：1
> 
> 时间：2012-08-21T13:14:37.807
> 
> 标签：c#, quartz-scheduler, quartz.net, quartz.net-2.0

我们有使用以下配置运行石英的 Windows 服务。我们还有一个具有相同设置的 mvc 应用程序，用于维护集群的作业和触发器。但是由于某种原因，作业和触发器正在被删除，即使该作业是持久的。

```
<quartz>
    <add key="quartz.scheduler.instanceId" value="AUTO" />
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="10" />
    <add key="quartz.threadPool.threadPriority" value="Normal" />
    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
    <add key="quartz.jobStore.tablePrefix" value="support.QRTZ_" />
    <add key="quartz.jobStore.dataSource" value="myDS" />
    <add key="quartz.jobStore.useProperties" value="true" />
    <add key="quartz.jobStore.clustered" value="true" />
    <add key="quartz.jobStore.clusterCheckinInterval" value="15000" />
    <add key="quartz.dataSource.paymentsDS.connectionString" value="connString" />
    <add key="quartz.dataSource.paymentsDS.provider" value="SqlServer-20" />
  </quartz> 
```

Windows 服务启动

```
 IScheduler scheduler = _schedulerFactory.GetScheduler();
    scheduler.JobFactory = _jobFactory;
    scheduler.Start(); 
```

MVC 管理器

```
 IScheduler scheduler = _schedulerFactory.GetScheduler();
    scheduler.AddJob(jobDetail, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:23:14.040

我认为您必须像这样更改**MVC 管理器**的配置：

```
<quartz>
    <add key="quartz.scheduler.instanceId" value="AUTO" />
    <add key="quartz.threadPool.type" value="Quartz.Simpl.ZeroSizeThreadPool, Quartz" />
    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
    <add key="quartz.jobStore.tablePrefix" value="support.QRTZ_" />
    <add key="quartz.jobStore.dataSource" value="myDS" />
    <add key="quartz.jobStore.useProperties" value="true" />
    <add key="quartz.jobStore.clustered" value="true" />
    <add key="quartz.jobStore.clusterCheckinInterval" value="15000" />
    <add key="quartz.dataSource.paymentsDS.connectionString" value="connString" />
    <add key="quartz.dataSource.paymentsDS.provider" value="SqlServer-20" />
  </quartz> 
```

我已将 ThreadPool 类型更改为**ZeroSizeThreadPool**并删除

```
<add key="quartz.threadPool.threadCount" value="10" />
<add key="quartz.threadPool.threadPriority" value="Normal" /> 
```

[你可以在这里](https://stackoverflow.com/a/6504528/219406)找到更多信息。

# wpf - WPF RowDefinition 怪异

> ID：12055672
> 
> 赞同：1
> 
> 时间：2012-08-21T13:15:04.543
> 
> 标签：wpf, xaml, snoop

我有一个正在尝试调试的应用程序，并且我正在通过 snoop 在运行时查看各种设置。

我遇到的问题是这样的：

有一个网格，高度为 50.4 。它有 3 个行定义，每个定义的高度为 1 星 (*)。因此可以假设每个 RowDefinition 的实际高度为 50.4/3 (16.8)。但是，我可以看到前 2 个 RowDefinition 的 ActualHeight 为 25.2，第三个的 ActualHeight 为 0。所有三个 RowDefinition 的高度仍然是 1 星。

这怎么可能 ？我只是可以看到您如何实现这种情况。您不能在语法上将 ActualHeight 更改为只读。高度必须在 Grid 的 Arrange pass 中设置。

有谁知道会产生这种情况的任何情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:38:57.283

我找到了答案 - 我不知道它是否是 WPF 错误，或者我没有正确阅读文档

```
<Border Background="Red" HorizontalAlignment="Center" VerticalAlignment="Center">
    <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <TextBox Text="123" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <TextBox Text="123" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <TextBox Text="123" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <TextBox Text="123" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <TextBox Text="123" Grid.Row="2" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed" />
        <TextBox Text="123" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed" />
    </Grid>
</Border> 
```

如果您查看代码，您会看到有 3 个星号 (*) 大小的行，它们应该在网格的高度中占有相等的份额，而不管它们的内容如何。

但是，当您折叠分配给该行的所有内容时，该行本身也会折叠。（如果你窥探它，它的高度为 *，但 ActualHeight 为 0）

有人认为这是正常行为吗？在过去 5 年的所有 WPF 开发中，我从未听说过这一点

# android - 如何在整个应用程序中更改Android中GUI元素的颜色？

> ID：12055673
> 
> 赞同：0
> 
> 时间：2012-08-21T13:15:15.027
> 
> 标签：android, styles

我创建了一个自定义样式，在其中更改了整个 App 的背景。现在我想将浅蓝色的项目更改为红色。我不想更改每个单独的视图...有没有一种简单快捷的方法来更改它，就像应用程序的背景一样？

```
<?xml version="1.0" encoding="UTF-8"?>

<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <color name="colorBackground">#A0A0A3</color>
    <color name="windowBackground">#0B2265</color>
    <color name="textColor">#FFFFFF</color>
    <color name="highlight">#ED1B24</color>

    <style name="CustomStyle" parent="android:Theme.Holo">
        <item name="android:windowBackground">@color/windowBackground</item>
        <item name="android:colorBackground">@color/colorBackground</item>
        <item name="android:textColor">@color/textColor</item>

    </style>
</resources> 
```

![我想改变的颜色](../Images/9c015747ad468e0269f3e3e82b1890ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:26:17.573

你不能只改变一种颜色，一切都会改变。大部分 UI 元素都是 png 图形，因此您必须自己更改所有图形并创建自己的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:52:09.737

至于 ActionBar 和 EditText - 这些是 9-patch 可绘制对象，您可以用自己的替换来更改外观。例如，查看[ActionBar 下面的行的](https://stackoverflow.com/questions/11524867/how-to-turn-off-blue-line-under-actionbar-actionbarsherlock)这个答案和[EditText 的这个答案](https://stackoverflow.com/questions/9900825/android-edittext-blends-into-background)。

至于 DatePicker，我不太确定 - 还没有使用它。我建议查看 Android 源代码以找出蓝线的来源（例如来自样式属性或硬编码）。一种方法是打开 DatePicker.class，查看加载了哪些 XML 文件来构建布局，并从那里找到任何关联的样式和可绘制对象。如果您找到 XML / drawables，请将它们复制到您的项目中，更改它们以满足您的需求，然后以与 Android 系统相同的方式将它们应用到（在这种情况下）DatePicker（如源代码中所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:18:45.250

您可以创建自己的主题并将其应用于整个应用程序

请参阅以下链接：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# grep - 使用 grep 管道错误消息

> ID：12055674
> 
> 赞同：3
> 
> 时间：2012-08-21T13:15:16.447
> 
> 标签：grep, stderr, piping

我有一个脚本失败，因为某些文件丢失了。

运行脚本并将其传递给 grep

```
$ ./adder | grep Error 
```

产生以下输出：

```
Error in <TFile::ReadBuffer>: error reading all requested bytes from file v2.2_V3_194424_194712/output_853.root, got 0 of 300
Error in <TFile::Init>: v2.2_V3_194424_194712/output_853.root not a ROOT file 
```

以及具有不同文件的类似输出

我想`v2.2_V3_194424_194712/output_853.root`从这个输出中提取根文件，但是这样做`./adder | grep Error | grep .root`不起作用。

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:16:53.550

您需要将标准错误流（数字代码：2）从管道中的第一个命令重定向到标准输出流（数字代码：1），如下所示：

```
$ ./adder 2>&1 | grep Error 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T22:14:19.610

就像 piokuc 建议的那样，将 stderr 与 stdout 结合起来。但是，我认为您正在寻找更好的 grep 调用：

```
./adder 2>&1 | grep "^Error" | grep -oP '[^ ]*\.root' 
```

# spring - 带注释的 Spring AOP（记录器）

> ID：12055676
> 
> 赞同：0
> 
> 时间：2012-08-21T13:15:27.747
> 
> 标签：spring, aop, aspectj, spring-aop

我被Spring aop困住了。我试图在类中记录一些方法被注释，我已经配置了一个 xml 文件和方面类，但似乎没有任何工作。
aopconfig.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:aop="http://www.springframework.org/schema/aop"
           xmlns:context="http://www.springframework.org/schema/context"
           xsi:schemaLocation="http://www.springframework.org/schema/beans
                               http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                               http://www.springframework.org/schema/aop
                               http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
                               http://www.springframework.org/schema/context
                               http://www.springframework.org/schema/context/spring-context-2.5.xsd
    ">

     <aop:aspectj-autoproxy/>
     <context:component-scan base-package="BL.AOPLogger" />
  <bean class="BL.TaxiStation" />

            <!-- Aspect -->
         <bean id="AOPLogger" class="BL.AOPLogger"/>

</beans> 
```

LogThis.java

```
 package BL;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface LogThis {
    String actionPerformed();
}

AOPLogger.java

    package BL;
import org.aspectj.lang.annotation.*;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Pointcut;
import org.aspectj.lang.annotation.Around;
import org.springframework.beans.factory.annotation.Configurable;
import org.springframework.stereotype.Component;
/**
 *
 * @author PUWKIN
 */
@Component
@Aspect
public class AOPLogger {

     @Pointcut("execution(public * *(..))")
    public void anyPublicMethod() {}

     @After("anyPublicMethod() && @annotation(LogThis)")
    public void LogCallAfter(JoinPoint JP){

        String methodName = JP.getSignature().getName();
        System.out.println("In Aspect");
        System.out.println(methodName);
    }

} 
```

TaxiStation.java

```
 package BL;

import java.io.IOException;
import java.io.Serializable;
import java.util.Vector;
//import java.util.logging.*;
import java.util.Calendar;
import java.util.logging.FileHandler;
import java.util.logging.Filter;
import java.util.logging.Handler;
import java.util.logging.Logger;
import BL.LogThis;

import Listeners.PassengersEventsListener;
import Listeners.TaxisEventsListener;
import UI.MainPanel;

public class TaxiStation implements Runnable, Serializable{
    private String Sname;
    private int maxWaitingTaxis;
    private Vector<Taxi> allTaxi =new Vector<Taxi>();
    private Vector<Taxi> awaitingTaxi = new Vector<Taxi>();
    private Vector<Taxi> drivingTaxi = new Vector<Taxi>();
    private Vector<Taxi> finishedDrivingTaxi = new Vector<Taxi>();
    private Vector<Passenger> allPassengers = new Vector<Passenger>();
    private boolean isAvailable = true;
    private boolean isAvailableQue=true;
    private boolean isOpen=true;
    private static Object stationRester = new Object();
    private String sameDist;
    private boolean ReOpened=false;
    private   float StartPrice;
    private  float PricePerSecond;
    private int wait=0;
    private Logger logger;
    transient private TaxisEventsListener listenerTaxi;
    transient private PassengersEventsListener listenerPassenger;
    private boolean fillFirstTime=false;
    private boolean copyData;

        @LogThis(actionPerformed="doSomething")
    public void EndTaxiDriving(int tNumber)
    {
        for (int i=0;i<drivingTaxi.size();i++)
        {
            if (drivingTaxi.elementAt(i).getTnumber()==tNumber)
            {
                drivingTaxi.elementAt(i).EndTaxiDriving();
            }
        }
    }

    public TaxiStation(String Sname, int max,TaxisEventsListener listenerTaxi,PassengersEventsListener listenerPassenger)
    {
        copyData=false;
        this.setSname(Sname);
        this.maxWaitingTaxis=max;
        this.listenerTaxi=listenerTaxi;
        this.listenerPassenger=listenerPassenger;
        //this.openHours=(long) (Math.random() * 100000);
    }

public TaxiStation(TaxiStation taxiStation,TaxisEventsListener listenerTaxi,PassengersEventsListener listenerPassenger)
{
    this.copyData=true;
    this.Sname=taxiStation.Sname;
    this.maxWaitingTaxis=taxiStation.maxWaitingTaxis;
    this.allTaxi=taxiStation.allTaxi;
    this.awaitingTaxi=taxiStation.awaitingTaxi;
    this.drivingTaxi=taxiStation.drivingTaxi;
    this.finishedDrivingTaxi=taxiStation.finishedDrivingTaxi;
    this.allPassengers=taxiStation.allPassengers;
    this.isAvailable =taxiStation.isAvailable;
    this.isAvailableQue=taxiStation.isAvailableQue;
    this.isOpen=taxiStation.isOpen;
    this.sameDist=taxiStation.sameDist;
    this.ReOpened=taxiStation.ReOpened;
    this.StartPrice=taxiStation.StartPrice;
    this.PricePerSecond=taxiStation.PricePerSecond;
    this.wait=taxiStation.wait;
    this.logger=taxiStation.logger;
    this.fillFirstTime=taxiStation.fillFirstTime;
    this.listenerTaxi=listenerTaxi;
    this.listenerPassenger=listenerPassenger;
    registerListeners();
}

void registerListeners()
{
    for (int i=0;i<allPassengers.size();i++)
        allPassengers.elementAt(i).changeListener(listenerPassenger);

    for (int i=0;i<allTaxi.size();i++)
        allTaxi.elementAt(i).changeListener(listenerTaxi);

    for (int i=0;i<drivingTaxi.size();i++)
        drivingTaxi.elementAt(i).changeListener(listenerTaxi);

    for (int i=0;i<awaitingTaxi.size();i++)
        awaitingTaxi.elementAt(i).changeListener(listenerTaxi);

    for (int i=0;i<finishedDrivingTaxi.size();i++)
        finishedDrivingTaxi.elementAt(i).changeListener(listenerTaxi); 
}
@LogThis(actionPerformed="doSomething")
public void  addTaxi(Taxi newTaxi) {
    allTaxi.add(newTaxi);
    //newTaxi.start();  
} 
```

我错过了什么吗？谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:41:52.643

注释的引用可能必须与包名称一起使用，您可以试试这个：

```
@Pointcut("execution(public * *(..))")
public void anyPublicMethod() {}

@After("anyPublicMethod() && @annotation(BL.LogThis)")
... 
```

另一种指定方式是：

```
@Pointcut("execution(@BL.LogThis public * *(..))")
public void anyPublicMethod() {}

@After("anyPublicMethod()")
... 
```

# hibernate - 自引用多对多休眠3

> ID：12055678
> 
> 赞同：0
> 
> 时间：2012-08-21T13:15:29.150
> 
> 标签：hibernate, many-to-many

我有一个使用关联表的多对多关系：

目的：

```
Foo
id;
name
Set<Foo> dependencies; 
```

主表：

```
Foo      
id
name 
```

关联表

```
foo_rel
parent_id <fk to Foo.id> 
child_id <fk to Foo.id> 
```

在我的 Foo.hbm.xml 我有以下

```
<set name="dependencies" table="foo_rel" inverse="false" lazy="true" cascade="none" >
                <key column="parent_id" />
                <many-to-many column="child_id" class="Foo"  />
 </set> 
```

问题是，每当我创建 2 个具有相同依赖 Foo 的新 Foo 对象时， foo_rel 表就会更新，因此它只保存最新 Foo 对象的关联。

我所需要的只是将 Foo 与其自身之间的自引用关系保存在关联表中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:48:17.187

忽略这个。回答我自己的问题：

`previousFoo.dependencies.clear()`在保存对象之前，我正在调用某种方法。

# jquery - jquery在点击时隐藏最近的行

> ID：12055684
> 
> 赞同：0
> 
> 时间：2012-08-21T13:15:59.507
> 
> 标签：jquery, ruby-on-rails, haml

当用户单击删除时，我曾经能够使用下面的代码来隐藏一行，为什么这已经停止工作

```
$(document).ready(function () {
    $('.deleteRecord').live( function() {
        if(confirm("Are you sure?")){
            $(this).closest('tr').fadeOut();
        }
    });
}); 
```

哈姆线

```
\#{link_to image_tag('/img/icons/packs/diagona/16x16/101.png', :border => 0), schedule, :method => :delete, :remote=>true, :class=>'deleteRecord'} 
```

这就是我在 application.js 中的内容，所有其他事件似乎都在工作或触发，减去这个

```
//= require jquery
//= require rails
//= require jquery_ujs
//= require jquery-ui
//= require best_in_place
//= require plugins

//= require messages
//= require_self

$(document).ready(function() {
    jQuery(".best_in_place").best_in_place();
    $('.best_in_place').bind("ajax:success", function(){
        $(this).closest('tr').effect("pulsate", { times:3 }, 500);
    });

});

$(window).load(function () {
    $('#tab-panel-1').createTabs();
    $('#dataTable').dataTable(
        {
            "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
            "aaSorting": [[ 4, "desc" ]]
        }
    );
});

$(document).ready(function () {
    $('.deleteRecord').on('click', function() {
        if(confirm("Are you sure?")){
            $(this).closest('tr').fadeOut();
        }
    });

    $('#notice').effect("pulsate", { times:3 }, 500);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:19:26.917

试试这个：

```
 $(document).ready(function() {
        $('img.deleteRecord').on("click", function() {
            if ( confirm("Are you sure?") ) {
                $(this).closest('tr').fadeOut();
            }
        });
    }); 
```

`.live()`已弃用，[`.on()`](http://api.jquery.com/on/)自 jQuery 1.7+ 起优先使用。

另外，只搜索类名也不好，如果可能的话，使用像上面这样的选择器。

**编辑**

如果行是动态添加的，则需要使用以下内容：

```
 $(document).ready(function() {
        $('#parent').on("click", "img.deleteRecord", function() {
            if ( confirm("Are you sure?") ) {
                $(this).closest('tr').fadeOut();
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:19:32.567

我认为您滥用了该`live`功能：

```
$(document).ready(function() {
    $('.deleteRecord').live('click', function() {
        if(confirm("Are you sure?")){
            $(this).closest('tr').fadeOut();
        }
    });
}); 
```

现在，`live`已弃用，所以只需使用`on`

```
$(document).ready(function() {
    $('.deleteRecord').on('click', function() {
        if(confirm("Are you sure?")){
            $(this).closest('tr').fadeOut();
        }
    });
}); 
```

jQuery api [.on()](http://api.jquery.com/on/)

**编辑**

事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。

的使用`on`或`live`取决于您的目的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T13:24:19.133

***描述：**获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。*

从当前元素开始 向上遍历 DOM 树，直到找到与提供的选择器匹配的对象 返回的 jQuery 对象包含零个或一个元素

来源：[http ://api.jquery.com/closest/](http://api.jquery.com/closest/)

**编辑**

如果您完全理解文档，请使用 Firebug 控制台尝试您的代码。首先，试试这个：

```
$('.deleteRecord').eq(0).closest('tr').fadeOut(); 
```

如果有效，请尝试将此 onlick 函数添加到另一个元素，以查看它是否适用于它。

最后尝试使用确认（）。

# android - 将 Visual C/C++ 移植到 Android，在 linux 中途停留？

> ID：12055687
> 
> 赞同：3
> 
> 时间：2012-08-21T13:16:07.197
> 
> 标签：android, linux, visual-c++, android-ndk, porting

在我最近开始的实习中，我需要将一个相当大的 Visual C/C++ 项目移植到 Android。昨天我问了另一个[关于](https://stackoverflow.com/questions/12034132/porting-visual-c-c-to-android)这个话题的问题，寻求一些帮助来寻找移植的概念。我得到了一个建议使用自动化解决方案的答案（例如用于 android 的单声道），但是经过一天对我的概念进行明确的研究后，我倾向于使用“手动解决方案”，这意味着我手动删除所有 Windows 和 Visual 特定的将其替换为 Android 下可用的功能。

现在，我想到的第一件事是首先使用 windows gnu Complier 删除所有 Visual 特定的内容，然后使用 linux gnu Compiler 删除所有与 Windows 相关的内容（然后使用 ndk 使其可在 Android 上运行）。

这意味着我将它从 Windows 移植到 Linux，而不是从 Linux 移植到 Android，假设从 Linux 到 Android 的步骤非常小，因为我希望代码从 Linux 到 Android 几乎可以保持不变，因为 Android 是基于 Linux核心。

现在我的问题是：这是一个好主意，还是从 Linux 移植到 Android 也是一项巨大的努力，所以我会做两次所有工作，一次是从 Windows 到 Linux，另一次是从 Linux 到 Android？！

绝对欢迎提出如何做得更好的建议！

编辑：忘了提一下，这将是一个更大的应用程序的一部分，并且不包含任何 GUI 东西（当然，我知道这是因为，尽管 linux 到 Android 步骤会很繁重），只是上面和下面的组件的接口.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:34:42.870

不要尝试手动删除“Windows 的东西”。

而是创建一个“仿真层” - 在标题中定义项目使用的所有窗口函数并编写它们的主体。

因此，您将保持您的项目不受影响，甚至可以使用它的新版本（如果有的话）。

在移植 Windows->Linux 时，您可能会遇到以下“大”问题：

*   windows 注册表模拟
*   windows 多线程模型和 IPC 有点难以翻译成 Linux 术语。尤其是 SetEvent 和 WaitForMultipleObjects
*   GUI（但我明白，你没有）

移植Linux->Android最大的麻烦应该是UI。如果您不涉及用户交互，我*建议*先移植 win->lin。

如果需要，您可以从 Linux 中引入和构建缺少的库。

如果需要任何用户交互，您可能想用 Java 编写原生 Android 前端应用程序，并通过 D-Bus 与您的主程序进行交互。

# javascript - 如何执行从 PageMethod 返回的 javascript

> ID：12055694
> 
> 赞同：0
> 
> 时间：2012-08-21T13:16:23.497
> 
> 标签：javascript, jquery, eval, pagemethods

我有一个页面，我在其中进行 ajax 调用`PageMethod`，结果我得到了一些 html 字符串，我需要将其附加到一些 div 中。现在 Html 字符串中有一些 javascript 代码，所以我希望在我将 html 附加到 div 之后执行这个 js 代码。但问题是，我收到错误消息 - `Microsoft JScript runtime error: Access is denied.`，当 globalEval 方法尝试执行时会引发此错误。

这是我打的 ajax 调用

```
var data ={id: id};

$.ajax({

    type: "POST",
    url: "/srv/Loader.aspx/LoadUserControl",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(data),
    dataType: "json",
    success: function (data) {
       $('#TargetDivID').html(data.d);
    },
    error: function (error) {
       $('#TargetDivID')..html("Control can not be loaded");
       console.log("LOG: Exeption trying to load Control:\n" + error.responseText);
    }
}); 
```

这是 WebMethod 返回的 Html：

```
<div class="someclass" id="inHouseAdModule" style="display:none;">
Some Html Content
    <script type="text/javascript">
        $(document).ready(function () {
            Some logic goes here
        });
    </script>

</div> 
```

有什么想法可以解决这个问题吗？

**编辑：**

```
 <div class="someclass" id="inHouseAdModule" style="display:none;">
    Some Html Content
        <script type="text/javascript">            
                Some logic goes here            
        </script>
 </div> 
```

**也不行。**

**编辑：** 我在 JS 代码的开头添加了调试器，但在到达该点之前引发了异常。

```
<script type="text/javascript"> 
   debugger;           
   Some logic goes here            
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:24:02.333

搜索您的错误后，普遍的共识是您的请求中的 URL 可能不正确。如果 web 方法接受 GET，请尝试在浏览器中点击 URL 以确保它正确。此外，您可以使用浏览器的开发人员工具检查网络流量，以确保您的请求和响应具有预期的标头。

==================================================== ==========

此外

该文件可能已经准备好。将您的 HTML 更改为以下内容以立即执行 JavaScript。

```
<script type="text/javascript"> /*Some logic goes here*/ </script> 
```

如果您需要稍后再次调用它，请保留函数包装器并在声明后立即调用该函数。

```
<script type="text/javascript"> function MyFunc() { Some logic goes here } MyFunc(); </script> 
```

==================================================== ==========

另一种方法

我建议不要通过 AJAX 加载动态创建的内容并尝试将其注入您的页面，而是使用指向返回动态创建内容的 URL 的 HTML IFRAME。这是广告内容的常用方法。

# objective-c - iOS / Objective-C：将标签添加到操作表中的pickerview

> ID：12055697
> 
> 赞同：0
> 
> 时间：2012-08-21T13:16:31.830
> 
> 标签：objective-c, ios, uilabel, uipickerview, uiactionsheet

我正在尝试将标签添加到操作表中的选择器视图。

如果选择器视图不在操作表中，则代码正在工作。

我的代码：

```
- (void)initActionSheetPickerView {
  actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

  pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 40, 0, 0)];
  pickerView.showsSelectionIndicator = YES;
  pickerView.dataSource = self;
  pickerView.delegate = self;
  pickerViewMeasureLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 97, 50, 22)];
  pickerViewMeasureLabel.text = @"asdf";
  pickerViewMeasureLabel.font = [UIFont boldSystemFontOfSize:20];
  pickerViewMeasureLabel.textColor = [UIColor blackColor];
  pickerViewMeasureLabel.backgroundColor = [UIColor clearColor];
  pickerViewMeasureLabel.shadowColor = [UIColor whiteColor];
  pickerViewMeasureLabel.shadowOffset = CGSizeMake (0, 1);
  [pickerView addSubview:pickerViewMeasureLabel];

  UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];
  closeButton.momentary = YES;
  closeButton.frame = CGRectMake(260, 7, 50, 30);
  closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
  closeButton.tintColor = [UIColor blackColor];
  [closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];

  [actionSheet addSubview:pickerView];
  [actionSheet addSubview:closeButton];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T23:06:47.190

您需要实现以下 UIPickerView 的数据源方法：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
return [self.pickerOptions count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [self.pickerOptions objectAtIndex:row];
} 
```

其中 self.pickerOptions 是您正在谈论的“标签”值的数组。但是，我建议使用[EAActionSheetPicker](https://github.com/EckyZero/EAActionSheetPickerDemo)为您处理此问题。它使得在 UIActionSheets 中处理 UIPicker/DatePickers 变得非常容易。

从他们的 README 中提取，它的实现很简单：

```
NSArray *options = [NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", @"Five", nil];

EAActionSheetPicker *actionPicker = [[EAActionSheetPicker alloc]initWithOptions:options];
actionPicker.textField = self.emailField;
actionPicker.delegate = self;

[actionPicker showInView:self.view]; 
```

祝你好运！

# string - SQL比较字符串

> ID：12055700
> 
> 赞同：7
> 
> 时间：2012-08-21T13:16:42.483
> 
> 标签：string, oracle, oracle11g, compare, case-statement

```
CASE 
WHEN ' 1a' = ' 1a                 '
THEN 'EQUAL - but it isn´t- HELP!!!!' ELSE 'UNEQUAL'
END                     
from dual; 
```

任何人都可以帮助我，向我解释为什么数据库说这两个字符串是相同的

```
' 1a' = ' 1a                 ' 
```

我已经尝试了很多陈述，但我找不到原因。我也在 Oracle 11g 的规范中进行了搜索，但没有这样的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:20:47.230

因为 Oracle 将您的字符串文字转换为 CHAR；由于 CHAR 是固定长度的，它必须将较短的字符串扩展为正确的长度，因此会添加空格。尝试 VARCHAR2 代替：

```
SELECT
  CASE 
  WHEN cast(' 1a' as varchar2(100)) = cast(' 1a                 ' as varchar2(100))
  THEN 'EQUAL - but it isn´t- HELP!!!!' ELSE 'UNEQUAL'
  END                     
from dual; 
```

编辑：示例说明 CHAR(10) 和 VARCHAR2(10) 之间的区别

```
declare
  l_char1 char(10) := '1';
  l_char2 char(10) := '1    ';
  l_varchar1 varchar2(10) := '1';
  l_varchar2 varchar2(10) := '1    ';
begin
  if l_char1 = l_char2 then     
    dbms_output.put_line('char equal');
  else
    dbms_output.put_line('char NOT equal');
  end if;  
  if l_varchar1 = l_varchar2 then 
    dbms_output.put_line('varchar equal');
  else
    dbms_output.put_line('varchar NOT equal');
  end if;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:21:48.197

除了[弗兰克施密特的](https://stackoverflow.com/a/12055788/521799)解决方案，请在此论坛帖子中阅读有关此问题的信息：

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:59852033114407](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:59852033114407)

解决此问题的另一种选择是不使用比较谓词，而是使用其他一些执行比较的函数，例如`DECODE()`，它不强制数据类型：

```
SELECT
  CASE 
  WHEN decode(' 1a', ' 1a                 ', 1, 0) = 1
  THEN 'EQUAL - but it isn´t- HELP!!!!' ELSE 'UNEQUAL'
  END                     
FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:32:19.497

有关更多信息，您可以参考[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#i42617)的文档，其中说：“在表达式和条件中，Oracle 通过使用空白填充的比较语义来比较文本文字，就好像它们具有数据类型 CHAR”，以及[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements002.htm#BABJJGBI)的空白填充的详细信息比较语义。

# c# - 为部分代码创建上下文

> ID：12055702
> 
> 赞同：4
> 
> 时间：2012-08-21T13:16:52.313
> 
> 标签：c#, session

所以这里的问题是：有没有办法创建一个只共享一部分代码的*上下文。*我真的不知道如何解释，所以我举个例子。

假设我有：

```
using(Context ctx = new Context())
{
    ctx.Set("abc","abc");
    method1();
    method2();
} 
```

和（与方法 2 相同）：

```
public void method1()
{
    Context ctx = Context.Instance();
    string abc = ctx.Get("abc");
} 
```

目标是`Context.Instance()`in 方法返回在 using 中创建的对象，但它必须保持线程安全。我的意思是，如果从一个 using 外部或同时在另一个 using 内部进行调用，它将根据 using 返回上下文。如果不存在，`Context.Instante()`将返回一个新的`Context`（或 null，我会在之后适应，这不是重点）。

我知道这不是经典的做法，但我不想在每次调用时都传递上下文。真正的方法会有很多 subs 方法，只有 lasts 需要它，但它必须从一开始就很常见。

目标是创建一个将共享给所有（且仅）子方法的事务，但顶级方法无权访问 EF 类。我唯一的解决方案是使用会话来存储我的 EF 上下文，或者在批处理中使用静态，因为它们没有会话。这是我的目标，但问题更为笼统。

我希望我很清楚，不要犹豫，问问题。并添加标签，因为我真的不知道添加了什么标签。

谢谢 ！

**编辑**

我可能还不够清楚。单例是不够的，静态是在所有实例之间共享的。如果两个不同的用户同时对 using 进行两次调用，则上下文对他们来说是相同的，但我希望它们不同。

理想情况下，我想允许这样的事情：

```
using(Context ctx = new Context())
{
    ctx.Set("abc","abc");
    method1();
    using(Context ctx = new Context())
    {
        ctx.Set("abc","def");
        method2();
    }
    method1();
} 
```

但我觉得我要求的太多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:25:33.400

让您的 Context.Instance() 方法管理[线程静态](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)变量。第一个调用可以创建实例，其他调用可以使用它，并且在第一个调用的使用结束时，您将其销毁。

使用线程静态方法，不会出现多线程问题，因为每个线程都有自己的实例。在单个线程中，每个“下一个方法执行”都将使用相同的实例。

更新：

一些代码。如果我通过它进行调试，则只创建一个上下文，第二个 using 语句接收与第一个 using 语句相同的上下文。

```
class Context : IDisposable {
    [ThreadStatic]
    private static Context _instance;
    [ThreadStatic]
    private static int _instanceCounter;

    public static Context Instance() {
        if (_instanceCounter == 0) {
            _instance = new Context();
        }
        _instanceCounter++;
        return _instance;
    }

    private static void Release() {
        _instanceCounter--;
        if (_instanceCounter == 0) {
            if (_instance != null)
                _instance.Dispose();
            _instance = null;
        }
    }

    public void Dispose() {
        Release();
    }
}

public class Test {
    public void Test1() {
        using (var context = Context.Instance()) {
            // do something
            Test2();
        }
    }

    private void Test2() {
        using (var context = Context.Instance()) {
            // identical context as in Test1
            // do something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:24:55.267

如果你想要 Singleton 设计模式，这里有一个模板。它将确保只创建一个类的实例，并且程序的所有部分都使用相同的实例

```
public class Singleton {

 private static Singleton instance; 

 private Singleton(){ // note private constructor

  // intialize code here
 }

 public static Singleton GetInstance(){

  if(instance == null){

   instance = new Singleton();
 }
   return instance;
 }

} 
```

}

同样在多线程环境中，您可能需要想象这样一种情况，当 Instance 为空时，两个线程可以进入您的 GetInstance 方法，并且最终都初始化 Singleton 类的单独实例。

要检索您将调用的实例`Singleton.GetInstance()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:44:28.080

正如 Maarten 所说，您需要使用 ThreadStatic，这样的事情可能会起作用：

```
public class Context : IDisposable
{
    [ThreadStatic]
    private static Context context;

    private Context(Guid id)
    {
        this.Id = id;
    }

    public Guid Id
    {
        get;
        private set;
    }

    public static Context Instance()
    {
        if (context == null)
        {
            context = new Context(Guid.NewGuid());
        }

        return context;
    }

    public void Dispose()
    {
        context = null;
    }
} 
```

如果您创建一个包含以下代码的控制台应用程序，您应该了解它是如何工作的。

```
private static void Main(string[] args)
{
    Action action = () =>
    {
        using (var context = Context.Instance())
        {
            Console.WriteLine("Thread {0} - Context Id {1}", Thread.CurrentThread.ManagedThreadId, context.Id);

            using (var context2 = Context.Instance())
            {
                Console.WriteLine("Thread {0} - Context Id {1}", Thread.CurrentThread.ManagedThreadId, context.Id);
            }
        }

        Thread.Sleep(1000);
    };

    Task.Factory.StartNew(action);
    Task.Factory.StartNew(action);

    Console.ReadLine();
} 
```

如果要确保上下文仅由最外层的 using 语句实际处理，则还需要计算每个线程调用实例的次数。

# php - PHP将变量传递给awk

> ID：12055704
> 
> 赞同：2
> 
> 时间：2012-08-21T13:16:56.963
> 
> 标签：php, awk

我是使用 PHP 的新手。我想在 PHP 中使用 awk。我有一个名为`a`. 内容是：

```
www.b.com * record=600,IN,A,1.2.3.4record=600,IN,A,5.6.7.8
www.1.com u record=600,IN,A,1.2.3.4
www.1.com w record=600,IN,A,1.2.3.4 
```

现在我使用 PHP 来处理它。

```
<?php

        $dn = "www.1.com";

        $hello = shell_exec("awk '{ if ( $1==".$dn.")print $1}' a") ;
        echo $hello;
?> 
```

它不起作用——你能告诉我为什么吗？如果我使用这种其他方式，它确实有效。

```
$hello = shell_exec("awk '{ if ( $1==\"www.b.com\")print $1}' a") ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:19:54.860

`awk`视为`$dn`字符串文字，因此您需要在内部引用字符串`awk`，这就是您在测试示例中所做的：

```
$dn = "www.1.com";

$hello = shell_exec("awk '{ if ( $1==\"".$dn."\")print $1}' a") ;
// ---------------------------------^^^-------^^^
// Surround in escaped double quotes...
echo $hello; 
```

如果要从任何类型的用户或浏览器输入中获取字符串`$dn`，请务必先使用[`escapeshellarg()`](http://us3.php.net/manual/en/function.escapeshellarg.php)or正确转义它[`escapeshellcmd()`](http://us3.php.net/manual/en/function.escapeshellcmd.php)。由于`escapeshellarg()`添加了单引号，这在这里可能没有用，但`escapeshellcmd()`通常用于转义整个命令，至少可以转义任何内部引号或其他可能出现的错误字符`$dn`。

# linux - 如何将旧文件移动到另一个文件夹

> ID：12055712
> 
> 赞同：4
> 
> 时间：2012-08-21T13:17:12.140
> 
> 标签：linux, shell

在我的文件夹中，我有一个后缀是创建此文件的日期的文件，例如：file.log2012-08-21, file.log2012-08-20 ... 现在我如何移动比 2012-08- 更早的文件20 ? 我知道我可以每天如何做到这一点：`mv file.log2012-08-19 /old/`但我不知道什么时候停止......命令 mv 中是否有一些参数可以更轻松地做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T13:31:23.350

您可以`find`与`-mtime`参数一起使用。这假定上述文件后缀与文件上的日期戳相匹配。

*   `-mtime +1`表示查找超过 1 天的文件
*   `-mtime -1`表示查找不到 1 天的文件
*   `-mtime 1`表示查找 1 天前的文件

示例（更新）：

```
find . -type f -mtime +1 -name "file.log*" -exec mv {} /old/ \; 
```

或者如果您只想`find`在当前目录中添加`-maxdepth 1`（否则，它将递归搜索）：

```
find . -maxdepth 1 -type f -mtime +1 -name "file.log*" -exec mv {} /old/ \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:37:03.757

假设您的日志文件在写入最后一行后没有被修改：

```
find . ! -newer file.log2012-08-20 | xargs -r -IX mv X /old/ 
```

注意：使用此命令 file.log2012-08-20 也会被移动。如果您不想要它，请使用以前的文件：

```
find . ! -newer file.log2012-08-19 | xargs -r -IX mv X /old/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:34:04.347

您可能需要为此编写一个小脚本。如果你所有的文件都在一个特定的命名约定中`file.log2012-08-21`，那么像这样的东西就可以了。

```
since=$(date --date="2012-08-20" +%s)
for file in `ls -1 --color=none`
do
    date=$(date --date="${file#file.log}" +%s)
    [ $date -lt $since ] && mv -v $file /old/
done 
```

在真正执行此操作之前，最好将 mv 命令更改为 echo 以查看要移动的文件是否正确。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T13:40:57.917

`ls -l | awk '{print $NF}' | awk 'substr($0, length($0)-9, length($0)) < "2012-08-20" {system("mv "$0" /old/")}'`

这会将所有早于“2012-08-20”的文件移动到文件夹“/old”。同样，您可以更改“2012-08-20”以指定您想要的特定日期。请注意，这假定文件后缀是日期戳，但前缀可以是任何名称。

如果您只需要移动超过特定天数的文件，那么我认为 rkyser 的回答对此更好。

# rdf - 在 RDF 中引用 URN 的预期方式是什么？

> ID：12055715
> 
> 赞同：3
> 
> 时间：2012-08-21T13:17:29.290
> 
> 标签：rdf, semantic-web, urn

我想为关于发布的 RDF/XML 语句建模（在命名空间中，例如“myns”）。我知道这个出版物在给定的 URN 下是已知的。在 RDF 中引用该 URN 的正确方法是什么？我可以想到许多不同的方法来做到这一点，例如：

```
<myns:Publication rdf:about="item42">
    <myns:urn>urn:abc:xy:123-456789</myns:urn>
</myns:Publication>

<myns:Publication rdf:about="item42">
    <rdfs:seeAlso>urn:abc:xy:123-456789</rdfs:seeAlso>
</myns:Publication>

<myns:Publication rdf:about="item42">
    <owl:sameAs>urn:abc:xy:123-456789</owl:sameAs>
</myns:Publication>

<myns:Publication rdf:about="item42">
    <owl:sameAs rdf:reference="urn:abc:xy:123-456789" />
</myns:Publication> 
```

提供 URN 参考的正确（即最有益的）方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:31:01.870

首先，您需要参考[RDF/XML 规范](http://www.w3.org/TR/REC-rdf-syntax/)，但通常您要查找的是 rdf:resource 属性，例如：

```
<owl:sameAs rdf:resource="urn:abc:xy:123-456789"/> 
```

但是，您*永远不*应该手动创建 RDF/XML。我知道的每个工具包都提供了某种类型的 RDF 图形对象表示和用于为您处理这些事情的各种 RDF 格式的序列化程序。

我猜您正在使用 Java，在这种情况下，您应该在编写应用程序时查看[Jena](http://jena.apache.org)或[Sesame 。](http://openrdf.org)如果您使用的是 .Net，那么您应该查看[dotNetRdf](http://www.dotnetrdf.org/)。其他语言可能是鱼龙混杂，我知道 Python 和 PHP 的库存在，但我使用它们的程度不足以对使用什么提出好的建议。

最后，除非您需要使用基于 XML 的 RDF 序列化，否则不要使用 RDF/XML。它丑陋且难以阅读，如果你坚持手工操作，就像你看起来那样，很容易出错。我的建议是使用[Turtle](http://www.w3.org/TeamSubmission/turtle/)，它是一种更加人性化的 RDF 序列化。

# django - Django1.4，继承 - 在子类中决定字段是从父类继承还是已在子类中定义

> ID：12055718
> 
> 赞同：1
> 
> 时间：2012-08-21T13:17:36.717
> 
> 标签：django, inheritance, django-models

是否有可能从字段实例中判断它是在基类（'myBaseModel'）还是在子类（'myDerivedModel'）中定义的。

或者其他方式。是否可以从模型实例中获取所有非继承字段？

现在我来到了现场实例。也许字段实例附加了一些元信息？

设置：

```
class myBaseModel(models.Model):
    baseField = models.CharField(max_length=30)

    class Meta:
        abstract = True

class myDerivedModel(myBaseModel):
    subClassField = models.CharField(max_length=30) 
```

该方法：

```
myModel = get_model('my_app_name', 'myDerivedModel')
defaultFields = myModel._meta.get_all_field_names()
for field in defaultFields:
    fieldInstance = myModel._meta.get_field_by_name(field)
    print fieldInstance[0] 
```

这将输出 subClassField 和 baseField。我正在寻找只输出 subClassField 的方法。

来自 django/db/models/options.py

```
def get_field_by_name(self, name):
    """
    Returns the (field_object, model, direct, m2m), where field_object is
    the Field instance for the given name, model is the model containing
    this field (None for local fields), direct is True if the field exists
    on this model, and m2m is True for many-to-many relations. When
    'direct' is False, 'field_object' is the corresponding RelatedObject
    for this field (since the field doesn't have an instance associated
    with it).

    Uses a cache internally, so after the first access, this is very fast.
    """ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:37:29.773

```
inherited_fields=[]
for base_class in list(myModel .__bases__):
    inherited_fields.extend(base_class._meta.get_all_field_names())
... your code
for field in defaultFields:
    if field not in inherited_fields:
        do_something_with_non_inherited_fields() 
```

# c# - 时间：2019-01-10 标签：c#imagetoolsgif转png

> ID：12055720
> 
> 赞同：-3
> 
> 时间：2012-08-21T13:17:42.160
> 
> 标签：c#, wpf, windows-phone-7, xaml

我尝试使用 ImageTools 将 .gif 转换为 .png。不幸的是，我失败了，我不知道为什么。这是我的代码 - 简单，但它不起作用。你能说哪里错了吗？非常感谢。

```
fs = new FileStream(@"\Photo.gif", FileMode.Open, FileAccess.Read, FileShare.Read);
PngEncoder encoder = new PngEncoder();
ExtendedImage ei = new ExtendedImage();
ei.SetSource(fs);
MemoryStream toms = new MemoryStream();
encoder.Encode(ei, toms);
BitmapImage bi = new BitmapImage();
bi.StreamSource = toms;
image1.Source = bi; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:44:48.040

你可以按照[这个](http://msdn.microsoft.com/en-us/library/twss4wb0%28v=vs.90%29.aspx)

```
// Load the image.
System.Drawing.Image image1 = System.Drawing.Image.FromFile(@"C:\test.bmp");

// Save the image in JPEG format.
image1.Save(@"C:\test.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);

// Save the image in GIF format.
image1.Save(@"C:\test.gif", System.Drawing.Imaging.ImageFormat.Gif);

// Save the image in PNG format.
image1.Save(@"C:\test.png", System.Drawing.Imaging.ImageFormat.Png); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:34:39.763

您可以使用以下代码将位图图像转换为 PNG 格式。

```
 private byte[] ConvertToPNG(Bitmap bmp)
    {
        MemoryStream ms = new MemoryStream();
        // Save to memory using the Png format
        bmp.Save (ms, ImageFormat.Png);

        // read to end
        byte[] bmpBytes = ms.GetBuffer();
        bmp.Dispose();
        ms.Close();

        return bmpBytes;
    } 
```

如果要更改格式，也可以通过 ImageFormat.Jpeg、ImageFormat.gif 等进行更改。

# design-patterns - 中介设计模式

> ID：12055725
> 
> 赞同：0
> 
> 时间：2012-08-21T13:18:00.817
> 
> 标签：design-patterns, class-diagram

在我的系统中，我有 2 个类：User 和 LoginUser 类。LoginUser 是用户的孩子。在 2 个对象 - User 和 LoginUser 之间可能存在各种通信（好友请求、照片请求、好友请求接受等）。基于 LoginUser 的成员身份，有不同的安全权限，基于这些权限，会有不同的消息。

对于给定的场景，我应该使用哪种设计模式？我正在考虑使用调解器设计模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:42:18.143

这不是真正的设计模式，但我会拆分这两个概念：权限和用户信息。

从可读性的角度来看，当我看到一个子类时，我通常会假设还有其他一些互斥的子类。例如，如果我看到一个 Animal 接口和一个 MeatEater 子类，我会假设在其他地方有一个 VeggieEater 子类。LoginUser 是一个子类并且所有用户都是 LoginUsers 的事实对我来说感觉不自然。

从设计的角度来看，您是 LoginUser 有 2 个不同的职责：
1）房屋用户级别信息，例如用户名、电子邮件、朋友等
2）确定权限

我会试着打破这个。如

```
public class User { 
  // keep info in here 
  private String username;
  private String email;
}

public class Authorization {
   // this will determine access
   public Authorization(User user) { this.user = user; }

   public boolean isAccessAllowed(String someAction) { // ... }
} 
```

像这样的事情会打破不同的责任。

# solaris - Solaris Services : offline status when application running fine

> ID：12055732
> 
> 赞同：0
> 
> 时间：2012-08-21T13:18:21.360
> 
> 标签：solaris

I don't know if my title is significant but I hope you can help me.

I'm using Solaris Services (on a SunOS 5.10 station) to start/stop/restart business applications. The services work fine but I've some kind of issue.

The applications can also be start/stop/restart manually by scripts, and some users still use those old scripts (and I can't change their way to work). So I have to face sometimes to a disabled or an offline service, but the application running fine...

It's a problem because I use my services to monitor the state of each application on each server with a GUI, which is wrong in this case.

So I wonder if we can catch the status of an application and define the service status with it. Or anything like this.

Tell me if I'm not clear.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:53:26.063

在开始时将以下内容添加到您的脚本中：

```
if [ -z $SMF_FRMI ]; then
    echo "Don't be nasty!!!"
    exit 1
fi 
```

脱机状态是因为 SMF 已经启动而无法启动服务。最好不要让用户成为 root，而是设置控制您的服务并使选定用户成为该角色的一部分的角色。

# html - Stretch 4 elements equally inside a div

> ID：12055736
> 
> 赞同：0
> 
> 时间：2012-08-21T13:18:29.460
> 
> 标签：html, css

I have div which has a width of 100%. Inside of it I have 4 images. How can I stretch the images such that they are all of equal width, such that no spaces exist between the window or the images.

A table row with four cells each styled with `width:100%;` seems like the easy solution. But I know that I'll get screamed at for even suggesting that. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:27:34.630

好吧，如果您的 div 的宽度是 100%，并且您有四个 div，需要平均共享该空间，那么您将 100 除以 4，得到 25。所以将它们的宽度设置为 25%。还要确保剥离任何边框/边距。那会把事情搞砸的。

```
.myDivs{
  width: 25%;
  margin: 0;
  border: 0;
  float: left; // Forces divs to flow left to right as opposed to down.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:28:32.963

你可以这样设置宽度

```
<div style="width:100%;height:300px;padding:0;">
    <img src="path" width="25%;padding:0;margin:0;"/>
    <img src="path" width="25%;padding:0;margin:0;"/>
    <img src="path" width="25%;padding:0;margin:0;"/>
    <img src="path" width="25%;padding:0;margin:0;"/>
</div> 
```

由于 div 有宽度，因此将考虑 25% 的宽度

# android - Problems getting an image from a Url

> ID：12055737
> 
> 赞同：0
> 
> 时间：2012-08-21T13:18:30.287
> 
> 标签：android

I'm trying to get an image from a Url into an ImageView. I've searched for it all day and I've tried lots of different solutions but none of them work for me...the image doesn't load. This is my code:

```
 String imageUrl = "http://www.photo-flash-maker.com/img/file_formats/jpg_file.jpg";

   iv.setImageDrawable(getImage(imageUrl));

 //...

  public static Drawable getImage(String url) {
    try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (Exception e) {
        return null;
    }
} 
```

I found it here: [How to display image from URL on Android](https://stackoverflow.com/questions/6407324/how-to-get-image-from-url-in-android) because this seems to be the simplest solution but the image doesn't load at all. Any solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:23:03.650

您可以使用`BitmapFactory`

```
Bitmap bitmap;
try {
    bitmap = BitmapFactory.decodeStream(new URL(imageUrl).openConnection().getInputStream());
    Log.i("image", "retrieved");
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:23:48.393

您是否在 manifest.xml 文件中设置了允许您的应用程序从 Internet 加载图像的权限？

```
<manifest xlmns:android...>  
    ...  
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

也试试这个链接：[http ://android-er.blogspot.co.uk/2010/06/load-imageview-with-bitmap-from.html](http://android-er.blogspot.co.uk/2010/06/load-imageview-with-bitmap-from.html)

包含您的 imageview 所需的所有 xml 更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:51:02.503

我认为最好的解决方案是评论中建议的一个 zapi：

> 不要在 UI 线程上下载。您的应用将 ANR。使用/编写类似 github.com/nostra13/Android-Universal-Image-Loader

但是，AA 和 RossC 的其他解决方案也可能有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:28:19.347

[我想你会在这里](http://www.mediafire.com/?xlt6s61v14d38x7)得到你所需要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:54:29.440

您是否尝试添加权限写入外部存储 android:name="android.permission.WRITE_EXTERNAL_STORAGE"

试试这两个我不确定它是否有帮助

# css - Is it necessary to provide a fallback font for a web font face?

> ID：12055739
> 
> 赞同：10
> 
> 时间：2012-08-21T13:18:32.177
> 
> 标签：css, font-face, webfonts, google-webfonts

We are using some web fonts on our site, e.g.

```
<link href="http://fonts.googleapis.com/css?family=Anton" 
    rel="stylesheet" type="text/css"> 
```

Due to a [bug in IE8](https://stackoverflow.com/questions/7768029/ie8-web-font-iframe-bug-workarounds) that I have no desire to workaround in other ways, I'd like to recommend to our site authors that they not provide a fallback font when specifying web fonts. For example, instead of:

```
font-family: 'Anton', "Arial Black", sans-serif; 
```

..do...

```
font-family: 'Anton'; 
```

Is there a real-world scenario where this could cause problems, i.e. why would I need to provide a fallback for a font that I am providing?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:41:29.247

谷歌字体使用@font-face 标签。当@font-face 不受支持或不可用时，后备字体可以让您的设计/布局看起来一致。

参考：[http ://webdesignerwall.com/tutorials/css3-font-face-design-guide](http://webdesignerwall.com/tutorials/css3-font-face-design-guide)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T19:52:22.317

不使用后备将意味着您对以下内容充满信心：

*   您的网站将始终加载良好的互联网连接
*   外部字体资源将始终在您请求的位置完全可用
*   如果您的字体未加载，则站点中受影响的文本看起来非常好，没有字体

如果你不同意其中任何一个，那么是的，你应该有一个后备字体，它被设计为*后备*，以防你最初的选择不可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T17:08:47.953

我认为，如果 Google 的“字体服务器”出现故障、无法访问或其他情况，浏览器将回退到它的默认字体。所以在这种情况下，自己定义一个后备字体可能会很方便。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T14:09:00.470

I doubt you would have a problem with Google being unreachable. However some browsers do use the fallback font until the downloaded font is available.

From Google: [https://developers.google.com/webfonts/faq](https://developers.google.com/webfonts/faq)

> **How is text displayed while the browser is still loading the font file?**
> 
> Browser behavior varies depending on the type of browser. Some will only display the text after the font file is loaded, others will use the fallback font from the font stack and then refresh the page when the font is available. The latter behavior is generally referred to as the "flash of unstyled text." For browser details, see the Technical Considerations page.
> 
> For greater control over how browsers behave while the font is still loading, use the WebFont Loader.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T20:07:40.133

...取决于您的字体应用：

**设计相关**

*   如果它是在您的应用程序之上添加一些额外糖的设计资源，那么使用该字体而不是显示一些错误样式的元素会更便宜并且可能更好。例如大的特殊字母或背景中的标志（如：“？！＃）
*   如果它对于非常以设计为中心的页面至关重要 - 更好的后备将是一些静态图形或从字体呈现的图形，例如通过（[字体/sIFR/Cufon](https://stackoverflow.com/questions/692990/sifr-vs-cufon-vs-typeface-js)）

**功能相关**

*   将您的特殊字体用于默认交互项（提交/按钮/链接等）
*   使用字体为例如导航元素提供独特的图标（[Iconsets via Raphael](http://icons.marekventur.de/)）对于处理回退至关重要，因为它会影响用户的已知和未知部分。现在您知道 IE8 问题并且不想花精力处理它们，但是所有浏览器和系统在野外 - 如果您知道您的用户群系统（内部网/公司环境）或现在无法处理扩展为了获得更大的支持（上市时间/开发成本），暂时可以离开它

**内容样式**

*   这是完美的后备方案，无需额外费用，客户仍然可以阅读您的文章/标题等。在这种情况下，留下后备的可能性只是一种不好的方式。
*   如果没有给出标准字体，打印支持可能会失败（[打印问题示例](http://css-tricks.com/snippets/css/using-font-face/#comment-84372)）
*   提高对比度和可读性或删除字体以使内容可读的操作系统/辅助系统使用自己的或默认字体

我肯定错过了一些应用程序 - 为了获得更好的帮助，请指定使用类型，最好是一些例子。但在所有情况下——你不能假设外部资源正在加载——所以如果你希望用户处理你的应用程序，允许他这样做，而不受网络可靠性、速度或系统限制的影响。

问候。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-29T18:35:50.870

至少提供一个备用字体总是一个好主意：衬线或无衬线。如果@font-face 请求失败或加载时间过长，将显示此字体。

此外，您可以使用 google 字体加载器对网站的加载方式进行细粒度控制。

[https://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T18:23:43.807

您需要为非 JS 浏览器提供备用字体。诚然，在桌面上这是一个不常见的问题，并且只有在您销售商品时才可能相关。但是，对于需要支持各种设备的响应式设计，您需要为它们提供非 JS 后备。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-28T20:12:25.923

除了墨菲定律，不要相信网络上的任何东西。

我总是指出后备（<offtopic>*并且在另一方面，我正在寻找一个 Firefox 扩展，它会在每个站点的基础上停用字体，更像 QuickJava 而不是 Stylish 或 Greasemonkey。`position: fixed`因为其他页面上没有更多蹩脚的网站。只是希望用户开始使用它，当他们厌倦了一些设计师的糟糕选择和滥用。不是全部，一些。* </offtopic>）因为它在 gzip 和缩小中花费了我 10 到 16 个字节样式表，在我的情况下不会导致其他问题。

如果它确实给你带来了问题，那么权衡利弊并做出决定。

您将有一个后备：它是默认系列的默认字体（**serif**）；Times 或 Times New Roman 大部分时间（我相信在某些或大多数 Linux 上除外）。

如果您的网站在 OS X、Windows 和 Ubuntu 上的衬线显示效果很好，那么您解决了其中一个问题。
如果你是：

*   期待像素完美的渲染，即使在 XP、W7、OS X 和 Ubuntu 上使用“Cleartype”或用户未激活的 Firefox、IE 和 Chrome 如此不同的渲染，
*   使用`height`而不是`min-height`
*   等等

好吧，您可能会学到很难对访问者使用的系统抱有太大期望的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-25T17:22:45.700

如果您访问该样式表链接，您会得到...

```
@font-face {
   font-family: 'Anton';
   font-style: normal;
   font-weight: 400;
   src: local('Anton'), 
   url(http://themes.googleusercontent.com/static/fonts/anton/v3/tilmJBBU81h1G7ZsdY3Hmw.woff) format('woff');
} 
```

它说它`local('Acton')`寻找用户拥有Acton的本地副本，所以你可以写一些类似的东西`local('Acton'), url('http://themes.google...), local('Arial');`，然后链接到你自己编辑的样式而不是通过谷歌的api......但我不确定是否将 A) 正常工作，或 B) 违反某些服务条款（尽管我真的不明白为什么应该这样做）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-30T08:34:05.383

Google 提供的“woff”格式并非适用于所有浏览器和设备。

以下是浏览器支持的格式的小列表：

*   **.TTF：** Firefox 3.5+、Opera 10+、Safari 3.1+、Chrome 4.0.249.4+
*   **.EOT：** Internet Explorer 4+
*   **.WOFF：** Firefox 3.6+、Internet Explorer 9+、Chrome 5+
*   **.SVG：** iPad 和 iPhone

无法呈现“woff”格式的系统很可能会使用 Times New Roman 或任何系统的默认字体。如果您对此感到满意，那么 Google 的服务就没有问题。

如果没有，那么我建议使用[Font Squirrel @font-face Generator](http://www.fontsquirrel.com/fontface/generator)（或类似的转换器）来创建字体的所有必要格式，并使用 @font-face 直接从服务器加载格式。

例如。

```
@font-face {
font-family: 'EnigmaticRegular';
src: url('../fonts/Enigma__2-webfont.eot');
src: url('../fonts/Enigma__2-webfont.eot?#iefix') format('embedded-opentype'),
     url('../fonts/Enigma__2-webfont.woff') format('woff'),
     url('../fonts/Enigma__2-webfont.ttf') format('truetype'),
     url('../fonts/Enigma__2-webfont.svg#EnigmaticRegular') format('svg');
font-weight: normal;
font-style: normal; 
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-30T18:34:24.937

是的，您仍然应该提供后备字体。拥有它们可以让您获得更大的控制权，而没有它们会让您任由客户摆布。[http://cssfontstack.com/](http://cssfontstack.com/)是找到合适字体的好资源。

# plot - how many bins given some data

> ID：12055740
> 
> 赞同：2
> 
> 时间：2012-08-21T13:18:33.107
> 
> 标签：plot, matplotlib, histogram, bin, binning

I have to plot some data using histograms. My data are between [0,1], with no large concentrations on any particular point.

What's a good ratio between number of samples and number of bins (of equal length)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:22:31.683

我一般使用样本数的平方根作为 bin 数。[这是Wikipedia histogram 文章](http://en.wikipedia.org/wiki/Histogram#Number_of_bins_and_width)中讨论适当数量的 bin 时列出的最简单的选择。从这篇文章

> 没有“最佳”数量的 bin，不同的 bin 大小可以揭示数据的不同特征。一些理论家试图确定最佳的箱数，但这些方法通常对分布的形状做出强有力的假设。

如果您不想对数据的分布做出假设，则使用样本数的平方根通常是一个不错的起点。

# c# - Get bytes after index in byte[]

> ID：12055741
> 
> 赞同：2
> 
> 时间：2012-08-21T13:18:36.230
> 
> 标签：c#, bytearray

> **Possible Duplicate:**
> [C# arrays , Getting a sub-array from an existing array](https://stackoverflow.com/questions/943635/c-sharp-arrays-getting-a-sub-array-from-an-existing-array)

Basically I have a `byte[]` that's going to be different every time, but it's going to be the same length.

Then, after that, I have more bytes with the data that I need.

If that doesn't make sense, this is basically what I mean.

```
"samebytesDataNeededIsHere" 
```

So I need to get the data after "samebytes", and I'm not sure how to do it. I've searched and there's really nothing on this, besides byte patterns and that's not really what I need.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:23:51.747

怎么样

```
byte[] bytes = Encoding.UTF8.GetBytes("samebytesDataNeededIsHere");
byte[] bytesToUse = bytes.Skip(countOfBytesToSkip).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:21:47.537

你还没有说你在做什么，但是在很多`byte[]`处理代码中你使用缓冲区中的偏移量......所以，不是最初将此偏移量设置为`0`，而是将其设置为“相同的长度”字节”。

如果您正在包装`MemoryStream`，您可以`Position`在使用它之前将转发设置为该数字。

最后，您可以只复制所需的数据，也许使用`Buffer.BlockCopy`，指定起始偏移量。这将是我最不喜欢的选项，因为第二个缓冲区和块副本是多余的（我们已经拥有数据并且知道我们想要查看的位置）。

例子：

```
// invent some initial data
byte[] data = Encoding.ASCII.GetBytes("samebytesDataNeededIsHere");
int fixedOffset = 9; // length of samebytes

// as a segment
ArraySegment<byte> segment = new ArraySegment<byte>(data,
     fixedOffset, data.Length - fixedOffset);

// as a separate buffer
byte[] copy = new byte[data.Length - fixedOffset];
Buffer.BlockCopy(data, fixedOffset, copy, 0, copy.Length);

// as a stream
var ms = new MemoryStream(data, fixedOffset, data.Length - fixedOffset);

// or just directly
for(int i = fixedOffset ; i < data.Length ; i++) {
   // access data[i]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:22:05.973

I think you are asking for how to retrieve a portion of a byte array from a constant start index. There are a variety of ways you can do this.

First, a simple loop:

```
// make sure you use the correct encoding
// see http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx
byte[] bytes = Encoding.UTF8.GetBytes( "samebytesDataNeededIsHere" );

for( int i = startIndex; i < bytes.Length; i++ ){
  byte b = bytes[i]; // now do something with the value...
} 
```

You could also use [Array.CopyTo](http://msdn.microsoft.com/en-us/library/06x742cw.aspx) to copy a portion of one array into a new array. Of course, if you are dealing with an array of significant size, it would be better to not copy it but rather iterate through it or consume it as a stream (as @MarcGravell suggests).

# c# - JSON.NET JObject key comparison case-insensitive

> ID：12055743
> 
> 赞同：45
> 
> 时间：2012-08-21T13:18:50.720
> 
> 标签：c#, json, json.net

I'm using Newtonsoft Json.net to parse the JSON string. I convert the string into the JObject. When access the value of the element by the key, I want to the comparison is case-insensitive. In the code below, I use "FROM" as the key. I want it returns string "1" at the line json["FROM"].ToString(). But it fails. Is it possible to make the code below work?

```
String ptString = "{from: 1, to: 3}";
var json = (JObject)JsonConvert.DeserializeObject(ptString);

String f = json["FROM"].ToString(); 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-12-09T16:26:55.983

这应该有效：

```
var json = @"{UPPER: 'value'}";
var jObj = JObject.Parse(json);
var upper = jObj.GetValue("upper", StringComparison.OrdinalIgnoreCase)?.Value<string>();

Console.WriteLine(upper); // value 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-26T22:57:54.377

c# 允许您使用不区分大小写的键的字典，因此我使用的解决方法是将 JObject 转换为带有`StringComparer.CurrentCultureIgnoreCase`集合的字典，如下所示：

```
JObject json = (JObject)JsonConvert.DeserializeObject(ptString);
Dictionary<string, object> d = new Dictionary<string, object>(json.ToObject<IDictionary<string, object>>(), StringComparer.CurrentCultureIgnoreCase);

String f = d["FROM"].ToString(); 
```

# ruby-on-rails - Gem not building with new aggregated model

> ID：12055744
> 
> 赞同：0
> 
> 时间：2012-08-21T13:18:54.963
> 
> 标签：ruby-on-rails, ruby, gem

I have 2 projects that share the same models, so this models are packaged into a gem. I needed to add a new model to this gem so I created the migration and class needed, build the gem and then unpacked it onto the other projects and did

```
bundle install --local 
```

The gem gets installed with it's new version but the new model file I added is not there. What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:19:55.727

感谢克里斯托夫的评论，我能够找到问题所在。我的 .gemspec 文件正在使用 git-ls 列出将添加到 gem 中的所有文件，并且我在没有将新文件添加到 git 的情况下进行测试。在我添加它们之后它很好。

# java - Exception handling over RMI

> ID：12055745
> 
> 赞同：4
> 
> 时间：2012-08-21T13:19:00.990
> 
> 标签：java, exception-handling, rmi

I have a common problem where I would like to hear your opinion on what's the best way to do it.

Assume you have an application that runs on a distributed server system. Let's say frontend and backend server. Methods on the backend server a called through RMI.

The backend java process usually needs different libraries than the frontend java process. It's possible that a runtime exception occurs in the backend. The thrown exception is not caught by the backend and so it travels to the frontend server. The problem now is that the frontend doesn't know the exception because the package isn't in the classpath (e.g. EJBTransactionRolledBackException). Another exception is thrown - ClassNotFoundException. This makes it impossible to see where the execption occured because the stacktrace doesn't include the stack from the backend server. Another scenario I can think of is where the exception cannot be serialized.

How do you solve this problem? Can I somehow log any runtime exception that is thrown without having to build a try ... catch and rethrow block?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:41:53.733

> 后端服务器上的方法通过 RMI 调用。

嗯**，有**你的问题。:-)

说真的，处理这个问题的最简单方法可能是在服务器上设置以下属性：

```
-Dsun.rmi.server.exceptionTrace=true 
```

这将为您提供服务器端的异常堆栈跟踪。它不会修复`ClassNotFoundException`客户端的问题，但至少在发生这种情况时，您知道要挖掘服务器日志以查找更多信息。

此处记录了其他有用的 RMI 属性：

[http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/javarmiproperties.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/javarmiproperties.html)

[http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:21:08.900

*   您可以在需要时尝试 RMI 的[代码库](http://docs.oracle.com/javase/1.3/docs/guide/rmi/codebase.html)功能来获取服务器类。但是，在 JBoss 上配置很痛苦
*   您可以安装基于[动态代理](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)的接口层来进行异常转换（我认为在大多数 EJB 服务器中都不起作用）
*   如果你的服务器是 JBoss，你可以使用[EJB 拦截器](http://docs.jboss.org/ejb3/app-server/tutorial/interceptor/interceptor.html)来做异常转换

我没有其他服务器在这个方向上提供什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T11:02:16.060

我对这个问题有点困惑。既然我们使用前端和后端服务器，为什么不将消息/结果对定义为 response 。并且消息不需要是文本，唯一的编码系统就足够了，我们可以在前端服务器以统一的机制将代码翻译成文本消息，类似于 Spring Exception 翻译器所做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T00:44:45.193

我在自己寻找答案时偶然发现了这个问题。事实证明，没有好的答案，但有解决方法。

我使用通过 http 的序列化构建了一个简单的 rpc 协议，它有同样的问题。你可以在这里找到我对这个问题的半聪明解决方案：

[https://github.com/stickfigure/trivet/blob/master/src/main/java/com/voodoodyne/trivet/ExceptionalObjectInputStream.java](https://github.com/stickfigure/trivet/blob/master/src/main/java/com/voodoodyne/trivet/ExceptionalObjectInputStream.java)

*基本上，在反序列化对象流时，查找以“Exception”结尾的缺失类并将类描述符与客户端*上的异常类交换。好处是嵌套的堆栈跟踪按原样保留。坏消息是，因为它替换了异常类，所以信息丢失了；每个被替换的异常都变为`ServerSideException`. 除了消息之外的任何附加数据也被丢弃。通常从堆栈跟踪和消息中弄清楚发生了什么并不难，但是这段代码记录了原始异常类型，以防万一你需要挖掘它。

不过，我怀疑您是否在客户端代理中获得了足够的钩子来将此技术应用于 RMI。

# html - 根据 HTML 中选择的值从数据库中检索行

> ID：12055746
> 
> 赞同：0
> 
> 时间：2012-08-21T13:19:01.973
> 
> 标签：html, database, jsp, drop-down-menu

我是 JSP 新手，需要帮助。我想在 JSP 中创建一个带有下拉菜单的网页。并使用选定下拉列表的值从数据库中检索行。有没有办法做到这一点。如果是，那么我们该怎么做。如果没有，那么也请让我知道其他可能性。示例将不胜感激。

我尝试使用诸如 onclick 之类的事件，但无法获得所需的输出。

提前致谢。

JSP 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ page import="java.sql.*"%>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>LIBRARY</title>
</head>
<body>
<center>CATALOG</center>
<select name="subject" size="1" id="subject">
<option value="MATHS">MATHS</option>
<option value="PHY">PHYSICS</option>
<option value="CHEM">CHEMISTRY</option>
<option value="BIO" selected>BIOLOGY</option>             
</select>
</div>
<% 
String str = request.getParameter("subject");
try {
Class.forName("org.postgresql.Driver");
String url = "jdbc:postgresql://localhost/books";
Connection con = DriverManager.getConnection(url,"#","#");
Statement st=con.createStatement();
String QueryString = "SELECT * from catalog WHERE subject='"+str+"'";
ResultSet rs = st.executeQuery(QueryString);
%>
<table class="sortable" id="catalog" width="100%" border="0">
    <thead>
        <tr>
            <th scope="col" class="sr">S. No.</th>
            <th scope="col" class="subject">SUBJECT</th>
            <th scope="col" class="tt">TITLE</th>
            <th scope="col" class="Auth">AUTHOR</th>
            <th scope="col" class="price">PRICE</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5" class="left">&nbps;/td>
        </tr>
    </tfoot>
    <tbody>
        <%
int i=1;
while (rs.next()) {
%>
        <tr>
            <td><%=i%></td>
            <td><%=rs.getString(1)%></td>
            <td><%=rs.getString(2)%></td>
            <td><%=rs.getString(3)%></td>
            <td><%=rs.getString(4)%></td>
        </tr>
        <% i++;} %>
        <%
// close all the connections.
rs.close();
st.close();
con.close();
} catch (Exception ex) {
out.println("Unable to connect to database.");
}
%>
    </tbody>
</table>
</body>
</html> 
```

我不确定我做错了什么。因此，如果有任何错误，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:11:50.707

对于您的下拉菜单，您可以尝试以下内容

```
<select name="drops" size="1" id="drops">
<option value="Audi">Audi</option>
<option value="BMW">BMW</option>
<option value="Corolla">Corolla</option>
<option value="Benz">Benz</option>
<option value="Others" selected>Others</option>                  
</select> 
```

要获得选定的值，请使用以下

```
String str = request.getParameter("drops"); 
```

这将从下拉列表中获取选定的值，您可以使用它来获取数据库记录。

问候

**编辑 1**

我创建了一个带有示例值的测试 jsp。您可以检查是否
`request.getParameter()`为空。如果它不为空，则继续您的数据库查询。

问候

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
    <title>Request Details--</title>
  </head>
  <body>
  <form name="myform" method="post" action="drops.jsp">
  <select name="drops" size="1" id="drops">
<option value="Audi">Audi</option>
<option value="BMW">BMW</option>
<option value="Corolla">Corolla</option>
<option value="Benz">Benz</option>
<option value="Others" selected>Others</option>                  
</select>
 <input type="Submit" value="Click -me"></input>
</form>
<%         
            if(request.getParameter("drops")!=null){
            String str=request.getParameter("drops");              
            out.println(str);     
            }
            %>
  </body>
</html> 
```

# android - OpenGL ES: render once at normal resolution then half the resolution

> ID：12055747
> 
> 赞同：1
> 
> 时间：2012-08-21T13:19:02.580
> 
> 标签：android, opengl-es-2.0

Is there a way to render a scene to normal resolution then the other part of the screen to a lower resolution in OpenGL ES 2.0 on Android?

If I use GLES20.glViewPort() and change the resolution, it won't scale to full screen size, but I'm getting the desired result, only smaller.

I would like a solution without having to render to a texture than render the quad on the screen.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:01:48.830

如果您想要实现的是将较低分辨率的场景渲染到更高分辨率的视口中（从而获得某种“像素化”效果），那么 OpenGL 就不能轻易做到这一点。[在这里](https://stackoverflow.com/q/7071090/743214)寻找类似的问题。

基本上，您不会绕过将整个事物渲染为低分辨率纹理（最好使用[FBO](http://www.songho.ca/opengl/gl_fbo.html)完成）并在高分辨率视口中显示屏幕大小的四边形，使用最近过滤从低分辨率纹理中采样。OpenGL 不能只是放大你的像素，单个片段会产生一个（或没有）像素。

但也许这不是你所追求的，我误解了你的问题。

# c++ - 按键或移动鼠标时游戏变慢

> ID：12055751
> 
> 赞同：1
> 
> 时间：2012-08-21T13:19:24.360
> 
> 标签：c++, events, visual-c++, mouse, sdl

最近我一直在尝试使用 SDL 编写自己的游戏（克隆太空入侵者），但我遇到了事件问题......我有 2 个事件，一个由我的计时器发出，我用它来绘制移动的敌舰。第二个事件是我用来移动我的船的键盘事件。当我开始游戏时，敌舰开始完全按照我的预期移动，但如果我按下键或移动鼠标，它们的移动速度会变慢。我在移动我的船时遇到了同样的问题，如果我尝试移动鼠标，帧速率会减慢很多。我的事件循环：

```
while(!exit)
{
    while(SDL_PollEvent(&event));
    {
        if(event.type == SDL_QUIT) exit=true;
        if(event.type == SDL_KEYDOWN)
        {
            switch(event.key.keysym.sym) 
            {
            case SDLK_LEFT:
                pship.move(pship.getPosition().x - 1, pship.getPosition().y);
                break;
            case SDLK_RIGHT:
                pship.move(pship.getPosition().x + 1, pship.getPosition().y);
                break;
            }
        }

        if(event.type == SDL_USEREVENT)
        {
            switch(event.user.code)
            {
            case 1:
                static int xOffset, yOffset;
                xOffset++;
                yOffset++;

                drawEnemyShips(eship,xOffset,yOffset);
                break;
            }
        }
    }
} 
```

我使用 Visual c++ 2010 express 和 SDL 1.2.15

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:25:31.127

```
while(SDL_PollEvent(&event)); 
```

你绝对不想要那个`;`！你拥有它的方式，你正在吃事件。如果你得到一个事件，`SDL_PollEvent`返回一个，所以你`SDL_PollEvent`再次调用。如果没有事件，您将跳出`while`循环并处理它。但是如果有第二个事件，你永远不会处理第一个。

但无论如何，一个旋转的轮询循环被打破了。就像孩子每分钟都在问“我们到了吗”，不让父母开车。用于`SDL_WaitEvent`等待一个事件，而不是为一个事件旋转 CPU 轮询。

一个简单的方法是改变：

```
while(SDL_PollEvent(&event)); 
```

对此：

```
while (SDL_WaitEvent(&event) != 0) 
```

这会让你的代码有点笨拙（`while`循环仍然是不必要的，当你跳出它时，你只需重新输入它），但至少它不会被破坏。

# ssis - BIDS 2008 SSIS Package Failing on Windows 7 64, PervasiveOLEDB.11.0 provider is not registered

> ID：12055753
> 
> 赞同：2
> 
> 时间：2012-08-21T13:19:30.800
> 
> 标签：ssis, oledb, bids, pervasive-sql

I have a BIDS 2008 SSIS Package accessing a Pervasive SQL database using the Pervasive PSQL OLE DB Provider.

The package was failing validation at run time with the following message in the Execution Results tab:

**Error: System.InvalidOperationException: The 'PervasiveOLEDB.11.0' provider is not registered on the local machine.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:19:30.800

Although I had verified that the Pervasive OLE DB provider had been successfully registered, BIDS was running my package under the 64 Bit Runtime, thus not finding a suitably registered 64-bit provider.

This was easily solved by going to the Project Properties > Debugging and setting the "Run64BitRuntime" to **False**.

Thanks to Miguel Salles on [this thread](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/920a0817-d9b8-4766-b0bf-baa6430acf93/) for the insight.

# ant - 实时蚂蚁构建分析器

> ID：12055760
> 
> 赞同：1
> 
> 时间：2012-08-21T13:19:46.960
> 
> 标签：ant, build

是否有任何 Ant 工具可以在运行时分析 Ant 构建活动？由于时间不够，我不想通过 ant 脚本中的每一行代码来了解它在做什么。如果我能就任何此类工具获得任何建议，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:21:05.117

查看关于 ANT[记录器和侦听器](http://ant.apache.org/manual/listeners.html)的 ANT 文档。

要打印 ANT 所做的一切，我建议使用非常强大的 log4j 侦听器。

# 例子

log4j 监听器需要一些设置。示例可以按如下方式运行：

```
ant bootstrap
ant -listener org.apache.tools.ant.listener.Log4jListener -lib . 
```

它会生成一个日志文件，其中详细说明了构建中的每个步骤：

```
[     0]  Project : Build started.
[    94]   Target : Target "run1" started.
[   319]     Echo : Run1: Hello world
[   320]   Target : Target "run1" finished.
[   320]   Target : Target "run2" started.
[   321]     Echo : Run2: Hello world
[   321]   Target : Target "run2" finished.
[   321]   Target : Target "run" started.
[   321]   Target : Target "run" finished.
[   328]  Project : Build finished. 
```

## 构建.xml

```
<project name="ANT listener" default="run">

  <target name="bootstrap">
    <get src="http://search.maven.org/remotecontent?filepath=log4j/log4j/1.2.17/log4j-1.2.17.jar" dest="log4j.jar"/>

    <echo file="log4j.properties">
log4j.rootLogger=ERROR, LogFile
log4j.logger.org.apache.tools.ant.Project=INFO
log4j.logger.org.apache.tools.ant.Target=INFO
log4j.logger.org.apache.tools.ant.taskdefs=INFO
log4j.logger.org.apache.tools.ant.taskdefs.Echo=WARN

log4j.appender.LogFile=org.apache.log4j.FileAppender
log4j.appender.LogFile.layout=org.apache.log4j.PatternLayout
log4j.appender.LogFile.layout.ConversionPattern=[%6r] %8c{1} : %m%n
log4j.appender.LogFile.file=build.log
    </echo>
  </target>

  <target name="run" depends="run1,run2">
  </target>

  <target name="run1">
    <echo message="Run1: Hello world"/>
  </target>

  <target name="run2">
    <echo message="Run2: Hello world"/>
  </target>

</project> 
```

# java - 取出 char 数组的一部分并将其转换为字符串 - Java

> ID：12055767
> 
> 赞同：0
> 
> 时间：2012-08-21T13:20:03.170
> 
> 标签：java, string, char, type-conversion

在Java中，是否有一种预制方法可以用来获取字符数组的一些选定索引，将这些索引定义的术语粘在一起并将其作为字符串返回？我在这里寻找一种方法的原因是我想避免必须创建另一个数组来保存我选择的值。我正在寻找的是看起来像这样的东西：

```
public String charArrayToString(char[] array, int startingIndex, int lastIndex) {
        // ignore any index that is outside of the startingIndex - lastIndex range
        // turn array[startingIndex], array[startingIndex + 1] ... array[lastIndex] into a string
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:22:31.157

我会使用构造函数

```
public String charArrayToString(char[] array, int startingIndex, int lastIndex) {
    return new String(array, startIndex, lastIndex - startIndex + 1);
} 
```

根据您对结果的处理，更好的解决方案可能是使用 StringBuilder.append

```
char[] coords = "000175001022".toCharArray();

StringBuilder sb = new StringBuilder();
sb.append("( ");
sb.append(coords, 0, 6);
sb.append(", ");
sb.append(coords, 6, 6);
sb.append(" )");
System.out.println(sb); // prints ( 000175, 001022 ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T13:21:25.507

听起来像你想要的：

```
return new String(array, startingIndex, lastIndex + 1 - startingIndex); 
```

`startingIndex`...对and进行了一些边界检查`lastIndex`，例如

```
startingIndex = Math.max(startingIndex, 0);
lastIndex = Math.min(lastIndex, array.length - 1);
if (startingIndex > lastIndex) {
    // Return empty string? Throw an exception?
}
return new String(array, startingIndex, lastIndex + 1 - startingIndex); 
```

请注意，如果您将上限设为*独占*- 就像大多数 Java API 一样 - 您可以摆脱很多这些 +1 和 -1 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:23:06.163

```
public StringBuilder append(char str[], int offset, int len) { 
```

# html - HTML的重新定位下拉菜单元素 我有一种方法可以将 html 选择元素的列表下拉列表向下移动几个像素。理论上你可以设置选择元素的边框底部，例如：select {border-bottom：5px solid transparent; 但是有更好的方法，比如下拉菜单的自定义插件等。

> ID：12055768
> 
> 赞同：0
> 
> 时间：2012-08-21T13:20:03.887
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:28:36.360

理论上你可以破解它设置选择元素的边框底部，例如：

```
select { border-bottom: 5px solid transparent; } 
```

但是有更好的方法，例如下拉菜单的自定义插件等。

# sharepoint - 在 SharePoint 作业中更新进度

> ID：12055769
> 
> 赞同：2
> 
> 时间：2012-08-21T13:20:04.370
> 
> 标签：sharepoint

我有一个**长期运行的 SharePoint 计时器作业**，我想在中央管理中显示它的**进度**（所以我正在使用`SPJobDefinition.UpdateProgress(int percentage)`方法）。

假设我想在 foreach 循环中更新列表中有 50 000 个元素。如果我将类似的东西`job.UpdateProgress((int) itemNo / itemCount)`放在一个循环中，它是否会在每次调用方法时（50 000 次）向 SharePoint 服务器发送一个 Web 请求，或者仅当百分比实际发生变化时（不超过 100 次）？

我不希望因此出现任何明显的性能下降，并且我认为更多的请求可能会减慢工作速度。

此外，什么工具可以很好地查看请求和响应（Fiddler？或者其他对 Sharepoint 更好的工具？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:43:30.887

（在 SP2010 中）每次调用 job.UpdateProgress，SPJobDefinition 类都会发送一个 SPRequest。SPJobDefinition 不会在内部跟踪其完成百分比，因此除非它联系服务器，否则它无法知道您的新 int 是否是更新，因此它只是联系服务器。所以是的，调用这 50000 次可能会显着减慢您的代码。

找出此类内容的最简单方法（因为在线 MSDN 文档有时可能非常稀疏）是在 Microsoft.SharePoint.dll 上使用 .Net 反射器。就个人而言，我倾向于使用 ilSpy。

# javascript - JavaScript 变量相关

> ID：12055772
> 
> 赞同：0
> 
> 时间：2012-08-21T13:20:06.257
> 
> 标签：javascript, variables

我有这个定义随机颜色集的函数。

我的问题是定义变量 ( ) 以从对象`var target`中选择新的颜色集。`kuler`

```
kuler: {
    set0:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set1:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set2:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set3:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set4:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set5:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set6:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9']
},
setNewColourSet: function () {
    rn=Math.floor(Math.random()*5);
    for (i=0; i<4; i++){
        var target = "project.kuler.set"+rn+"["+i+"]";
        $('.kuler'+i).css('background-color',target);
        /* works *///  $('.kuler'+i).css('background-color',project.kuler.set4[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:22:44.773

认为你很接近 - 只需将字符串放在方括号内。

`var target = project.kuler['set' + rn][i];`

假设`rn`是附加到的数字`'set'`，并且`kuler`它本身在一个名为 的对象字面量中`project`。

请注意，第一个大括号 ( `kuler['set'+rn]`) 是对对象字面量的属性访问`kuler`，第二个大括号 ( `[i]`) 是对数组的数组索引访问....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:28:38.730

```
kuler: {
    set0:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set1:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set2:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set3:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set4:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
    set5:['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
    set6:['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9']
},
setNewColourSet: function () {
    var rn = Math.floor(Math.random()*5);

    for (i=0; i<4; i++){
    $('.kuler'+i).css('background-color', this.kuler['set'+i][rn]);
    }
} 
```

干得好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:26:50.280

如果您要拥有一个像这样带有**编号名称**的对象，为什么不只是一个列表呢？

```
kuler: [
  ['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
  ['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
  ['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
  ['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
  ['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9'],
  ['#0F2440','#2C3F59','#518C8C','#94BEAC','#D9CAAD'],
  ['#499E8D','#85CC9F','#A4DEAB','#C8E8C7','#FFF6C9']
],

setNewColourSet: function () {
  rn=Math.floor(Math.random()*5);
  for (i=0; i<4; i++){        
    $('.kuler'+i).css('background-color',kuler[rn][i]);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:27:46.393

var target = "project.kuler.set"+rn+"["+i+"]";

您正在将字符串分配给目标。

我想 project 是一个对象，而 kuler 是它的一部分，所以尝试删除引号；

# objective-c - 从数组数组中提取数据

> ID：12055773
> 
> 赞同：-1
> 
> 时间：2012-08-21T13:20:06.320
> 
> 标签：objective-c

我有以下代码：

```
NSString *movies = [[NSString alloc] initWithData:webData7 encoding:NSUTF8StringEncoding];
NSLog(@"movies: %@", movies);
array_webdata = [parsedata objectWithString:movies error:nil];
userMovies = [array_webdata valueForKey:@"movies"];
NSLog(@"userMovies: %@", userMovies);
NSMutableArray *arrayCodes = [userMovies valueForKey:@"rtid"];
NSLog(@"arrayCodes: %@", arrayCodes); 
```

在第一行中，我将以下内容保存在电影中：

电影：

> {"电影":[["rtid","770672122"],["rtid","771268706"],["rtid","771240265"],["rtid","9377"]]}

与：`userMovies = [array_webdata valueForKey:@"movies"];` 我存储在 userMovies 中：

```
userMovies: (
        rtid,
        770672122
    ),
        (
        rtid,
        771268706
    ),
        (
        rtid,
        771240265
    ),
        (
        rtid,
        9377
    ) 
```

从这里我想提取数字以创建另一个数组，例如：

> 代码：（770672122、771268706、771240265、9377）

但是使用以下行，执行会崩溃：

```
NSMutableArray *arrayCodes = [userMovies valueForKey:@"rtid"]; 
```

错误是 EXC_BAD_ACCESS。在调试区域显示没有错误

你知道出了什么问题吗？谢谢！

**我已编辑问题以使其更易于理解**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:26:31.757

您拥有的代码显然不起作用，因为您正在将一个数字（或 int 或某种类型）分配给一个可变数组。你不能那样做。您需要将它们添加到数组中，因为它们将包含在数组中，这些数字不是数组...

你是如何从 JSON 中得到它的？您的数组可能是 NSDictionary 的数组，因此您需要执行以下操作：

```
for (NSDictionary *aDictionary in userMovies)
{
    [arrayCodes addObject: [aDictionary valueForKey:@"rtid"]];
} 
```

您需要首先找出阵列中的内容。做：

```
NSLog(@"My array contains %@'s", [[userMovies valueForKey:@"rtid"] class]); 
```

从那里，如果你得到 NSDictionary 使用上面的代码，如果你得到一个数组，你将不得不像这样循环遍历数组：

```
for (NSArray *anArray in userMovies)
{
    [arrayCodes addObject: [anArray objectAtIndex:1]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:09:41.853

解决了！

我删除了最后两行代码：

```
NSMutableArray *arrayCodes = [userMovies valueForKey:@"rtid"];
NSLog(@"arrayCodes: %@", arrayCodes); 
```

并添加了以下内容

```
NSMutableArray *moviesCodes = [[NSMutableArray alloc] init];
for (int counter = 0; counter<[userMovies count]; counter++){
   [moviesCodes addObject:[[userMovies objectAtIndex:counter] objectAtIndex:1]];
} 
```

有了这个，我将所有 id 存储在名为 moviesCodes 的数组中。问题是 userMovies 是一个数组数组

# php - codeigniter 会话过期刷新

> ID：12055777
> 
> 赞同：1
> 
> 时间：2012-08-21T13:20:15.170
> 
> 标签：php, ajax, codeigniter, session-timeout

我有会话过期刷新的问题。

我这样做：

```
trought -> $.ajax ({url: "/index.php/main/refresh_session"}); 
```

发挥作用：

```
function refresh_session() {
   $this->session->sess_destroy();

   $data = array('is_logged_in' => true);
   $this->session->set_userdata($data);
} 
```

我的目的是刷新会话超时，但此代码不起作用，会话在 60 秒后过期。（配置：$config['sess_expiration']= 60;）

也许有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:10:48.853

如果您坚持调用，`$this->session->sess_destroy();`那么您还必须`$this->session->sess_create();`在尝试再次设置会话数据之前调用，否则将无法设置。

编辑：这是如果您使用数据库来存储会话。否则，您可以重新创建会话而无需手动调用`sess_create()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T17:26:34.103

对于 CodeIgniter 的最新版本，包括当前在“开发”分支中的内容，您不能在另一个答案已经提到的`session->set_userdata`之后调用。`session->sess_destroy`这是因为`sess_destroy()`清除了内部 userdata 数组，包括由（直接需要 current的`set_userdata`set_userdata 调用）间接需要的当前 session_id 。`sess_write``session_id`

如果您启用了警告，您应该会看到此要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:30:05.793

设置`$config['sess_time_to_update']`低于`$config['sess_expiration']`。

并删除`$this->session->sess_destroy()`. 这个函数应该是最后一个调用的，甚至 flash 变量也将不再可用。如果您只想销毁某些项目而不是全部，请使用`unset_userdata()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:04:24.160

```
trought -> $.ajax ({url: "/index.php/main/refresh_session"});

function refresh_session() {
   $data = array('is_logged_in' => true);
   $this->session->set_userdata($data);
} 
```

1.  会话过期根本没有执行：

    ```
    $config['sess_expiration'] = 60;
    $config['sess_time_to_update'] = 59; 
    ```

2.  会话在 60 秒后过期。会话到期时间未更新：

    ```
    $config['sess_expiration'] = 60;
    $config['sess_time_to_update'] = 5;
    $config['sess_time_to_update'] = ? 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T11:10:58.137

我遇到了同样的问题，在经历了令人沮丧的几个小时后，我发现我的索引页面上有一个空白区域。删除了空间并解决了。

# android - Facebook 在向 Graph Api 的单个请求中上传两个相同的标记图像。

> ID：12055783
> 
> 赞同：2
> 
> 时间：2012-08-21T13:20:31.660
> 
> 标签：android, facebook, image, facebook-graph-api, post

我正在使用 Graph API 将标记的图像上传到 facebook。这是我的代码：

```
MultipartEntity entity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            HttpClient httpClient = new DefaultHttpClient();
            mPostTagUrl = "https://graph.facebook.com/"
                    + dataManager.getOwnerId() + "/photos";

            HttpPost httppost = new HttpPost(mPostTagUrl);
            byte[] data = null;
            try {
                try {

                    String mPath = Environment.getExternalStorageDirectory()
                            .toString() + "/" + "screenshot.jpg";

                    FileInputStream fis = new FileInputStream(mPath);
                    Bitmap bi = BitmapFactory.decodeStream(fis);
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                    data = baos.toByteArray();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    Log.d("onCreate", "debug error  e = " + e.toString());
                }
                if (data != null) {
                    ByteArrayBody bab = new ByteArrayBody(data, "event_pic"
                            + ".jpg");
                    entity.addPart("source", bab);

                }

                StringBody mAccesssToken = new StringBody(dataManager
                        .getAccessToken().trim());
                entity.addPart("access_token", mAccesssToken);
JSONArray mJsonArray = new JSONArray();
JSONObject json;
                for (int i = 0; i < getAllAddFriends().size(); i++) {
                    final int index = i;
                    String fId = getAllAddFriends().get(index)
                            .getFacebookFriendId();
                    Log.d("gaurav", "facebook id ==" + fId);
                    try {
                         json = new JSONObject();
                        json.put("x", "" + position);
                        json.put("y", "" + position);

                        json.put("tag_uid", fId);

                        position = position + 10;
                        mJsonArray.put(i, json);

                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                String str = new String(mJsonArray.toString());
                Log.d("gaurav", "Add event Url=" + str);

                StringBody mEventNameBody = new StringBody(str);
                entity.addPart("tags", mEventNameBody);

                httppost.setEntity(entity);
                try {
                    httpClient.execute(httppost);
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                HttpResponse response = httpClient.execute(httppost);
                String ret = EntityUtils.toString(response.getEntity());
                Log.d("gaurav", "Response Tag Friends =" + ret);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            } 
```

请检查我的代码。我可以发布标记的图像，但在 facebook 中，相同的图像同时上传两次。请就这个问题向我提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:50:42.067

因为你执行了两次

```
httpClient.execute(httppost); 
```

这就是为什么。

# html - 菜单项的 CSS 块悬停状态

> ID：12055786
> 
> 赞同：0
> 
> 时间：2012-08-21T13:20:39.923
> 
> 标签：html, css, hover, onhover

可能是一个简单的解决方案，但我遇到了问题。我希望在一个大块中的网站主导航的悬停状态。目前它只在当前链接上显示一个悬停选择器。我希望它在任一站点上都有填充。

设计示例 -> [http://www.garyrevell.co.uk/student-i/screenshot_01.jpg](http://www.garyrevell.co.uk/student-i/screenshot_01.jpg)

这是当前的 WIP 站点。[http://www.garyrevell.co.uk/student-i/index.html](http://www.garyrevell.co.uk/student-i/index.html)

资产净值CSS

```
 header nav {
    cursor:pointer;
    font-family: GeoSlb712XBdBT;
    text-transform:uppercase;
    float: left;
    color:#fff;
     /* WebKit (Safari/Chrome) Only */
     -webkit-text-stroke: 0.5px #F47B20;

     /* If we weren't using text-shadow, we'd set a         fallback color
     and use this to set color instead
    -webkit-text-fill-color: white; */

  color: white;

    text-shadow:1px 1px 0 #F47B20,
    /* Simulated effect for Firefox and Opera
       and nice enhancement for WebKit */
   -1px -1px 0 #F47B20,  
    1px -1px 0 #F47B20,
   -1px  1px 0 #F47B20,
    1px  1px 0 #F47B20;

    font-size:17px;
    text-align: right;
    padding-top: 5px;
    padding-bottom:5px;
    padding-left:2px;
    padding-right:2px;
    /*background-color: #ffffff;*/
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.20)), to(rgba(255, 255, 255, 0.20)));
    background-image: -webkit-linear-gradient(top, rgba(255, 255, 255, 0.20), rgba(255, 255, 255, 0.20));
    background-image: -moz-linear-gradient(top, rgba(255, 255, 255, 0.20), rgba(255, 255, 255, 0.20));
    background-image: -o-linear-gradient(top, rgba(255, 255, 255, 0.20), rgba(255, 255, 255, 0.20));
    background-image: -ms-linear-gradient(top, rgba(255, 255, 255, 0.20), rgba(255, 255, 255, 0.20));
    background-image: linear-gradient(top, rgba(255, 255, 255, 0.20), rgba(255, 255, 255, 0.20));
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#ffffff', EndColorStr='#ffffff');
    margin-top:15px;
    margin-left:20px;
    -webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;
    color:#FFFFFF;

    }
        header nav ul {
            list-style: none;
        }
            header nav li {
    float: left;
    margin: 0px 30px 0 30px;
            }

.navi {
    width: 500px;
    height:35px;
    padding: 0px;
    margin: 0px 0;
    overflow: hidden;
}
        .navi li {
                float: left;
                margin-right: 5px;
                list-style: none;
                color: #ffffff;
                outline: none;
                text-align: center;
                text-transform: uppercase;
                letter-spacing: 0;
                display: block; 
        }
            .navi li a {
                display:block;
                list-style: none;
                color: #ffffff;
                outline: none;
                text-align: center;
                text-transform: uppercase;
                letter-spacing: 0;
                display: block; 
                padding:3px;

            }

  .navi li:hover {

                background-color: #F47B20;
                color: #ffffff;

            }
            .navi li.current-menu-item {

            } 
```

任何帮助都会很棒。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:45:31.633

添加这个CSS

```
header nav { 
    padding:0; 
}

.navi {
    height: 40px;
}

.navi li{
    border-radius:5px;
    margin:0;
    padding:0 20px;
}

.navi li a{
    line-height:40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:46:47.410

```
.navi li {
     line-height: 30px;
     border-radius: 7px;
     margin-left: 20px
}

.navi li a{
     padding: 0 15px;
}

.navi li:hover {
    background-color: #F47B20;

} 
```

将这些属性添加到您现有的代码中，（不要替换仅添加）

# sql-server - 向现有数据库添加索引

> ID：12055789
> 
> 赞同：0
> 
> 时间：2012-08-21T13:20:54.483
> 
> 标签：sql-server, database, indexing

我有一个充满数据的表的数据库。我想添加索引（集群和非集群）。是否可以添加索引而无需再次插入此数据（我的意思是创建带有索引的新数据库并将数据从旧数据库导出到新数据库）？据我所知，聚集索引是物理保存的，这意味着如果不重新创建数据库，我将无法做到这一点。但是，是否可以向现有数据库添加索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:23:18.783

> 是否可以添加索引而无需再次插入此数据？

是的。不仅有可能，而且在添加索引之前删除数据几乎没有意义。

不过，向大表添加索引可能需要很长时间。

# fubumvc - FubuMVC：如何配置要使用的 ISessionState 实现

> ID：12055790
> 
> 赞同：0
> 
> 时间：2012-08-21T13:21:05.837
> 
> 标签：fubumvc

我在让 Fubu 使用我自己的 ISessionState 实现时遇到了一些麻烦。

我的控制器有一个带有 ISessionState 参数的构造函数。

我曾尝试在我的全局 asax 中使用 StructureMap

```
FubuApplication.For<ConfigureFubu>().StructureMapObjectFactory(container => 
{
    container.Scan(scanner =>
    {
        scanner.TheCallingAssembly();
        scanner.WithDefaultConventions();
    });

    container
        .For<ISessionState>()
        .Use<MySessionState>();
})
.Bootstrap(); 
```

我应该在哪里以及如何告诉 Fubu 使用 MySessionState 而不是 SimpleSessionState？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:16:26.210

@Pingvinen 这应该按原样工作。到底发生了什么？我假设您正在注入 SimpleSessionState 而不是您的实现？

只是为了好玩，您可以尝试进入您的 ConfigureFubu 类并修改服务（在构造函数中）：

```
Services(x => x.ReplaceService<ISessionState, MySessionState>()); 
```

# reporting-services - 获取当前实体 ID 并在 SSRS 报告中使用

> ID：12055795
> 
> 赞同：0
> 
> 时间：2012-08-21T13:21:34.087
> 
> 标签：reporting-services, dynamics-crm, dynamics-crm-2011

我正在为 Dynamics CRM 2011 中的服务案例创建一个范围为单个记录级别的报告。

该报告有 4 个数据集；1\. 过滤器，2\. TicketDetails，3\. 材料和，4\. 劳动力。

过滤器数据集用于获取在 CRM 中查看的当前服务案例的 IncidentId。

```
SELECT IncidentId FROM FilteredIncident AS CRMAF_FilteredIncident 
```

我有一个名为incidentfilter 的参数，它的来源是Filter 数据集。CRM 似乎忽略了 CRMAF_ 前缀，只返回所有服务案例。

数据集 2 和 4 都有一个 where 子句来过滤事件过滤器参数值。数据集 3，查询 GP，为此我从服务案例中传入 TicketNumber 字段。

我的报告似乎正在运行，只是它从 CRM 检索每个服务案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:07:34.867

我在忽略 CRMAF_Prefix 的 CRM 中遇到了类似的问题。你可以试试这个：

1.  只是为了确保，您是否尝试在多个表上应用 CRMAF_prefix？如果有，请确保将表的数量限制为一张。
2.  您也可以尝试将 CRMAF_prefix 添加到字段中：

从 FilteredIncident 中选择 CRMAF_FilteredIncident.IncidentId 作为 CRMAF_FilteredIncident

# jquery - 如果没有，jQuery 可以向图像添加 css 类吗？

> ID：12055797
> 
> 赞同：0
> 
> 时间：2012-08-21T13:21:41.990
> 
> 标签：jquery, css, image, jquery-selectors

正如标题所说，我有一个 div。某处（可以嵌入到更多的子 div 中）将是图像。是否可以为此 div 中当前没有样式的所有图像分配样式？

编辑：

```
<div id="testDiv">
<div>
<img id="testImage1" class="testclass1"/>
<img id="testImage2" />
</div>
<span>
<img id="testImage3"/>
<img id="testImage4" class="testclass2"/>
</span>
</div> 
```

testImage2 和 testImage3（上图）将分配一个 testclass3 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:27:08.067

使用[:not()](http://api.jquery.com/not-selector/)选择器查找没有类的元素，然后使用[addClass()](http://api.jquery.com/addClass/)添加一个类。

试试这个：

```
$("img:not([class])").addClass("robasta"); 
```

注意：[我做了一个 jsFiddle](http://jsfiddle.net/P6Mg3/)，但要查看结果，您必须通过结果窗格查看 Firebug

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:28:28.263

```
$('div').find('img[class=""]').addClass('yourClass'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:33:12.183

```
$("#divid").find("img").each(function(index){
 if(undefined==$(this).attr("style")){
  // SET YOU STYLE HERE
 }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:39:08.370

试试下面的东西，

```
$(function() {
    $('#testDiv').find('img').filter(function (){        
        return this.className == '';  
    }).addClass('yourClass');
}); 
```

**演示：http:** [//jsfiddle.net/EXSUN/](http://jsfiddle.net/EXSUN/)

# php - mySQL 选择查询，从多个表中获取一些逻辑的数据

> ID：12055798
> 
> 赞同：1
> 
> 时间：2012-08-21T13:21:44.450
> 
> 标签：php, mysql, sql

我有两个表*用户*和 *activation_details*

用户表有这些数据。uid 是主键。

```
uid     |    user_name
______________________
 1     |    John Smith
 2     |    Mary Smith
 3     |    Nancy Smith
 4     |    Agent Smith 
```

activation_details 有这些数据

```
aid     |    is_activated   |  user_id
______________________________________
1      |         0         |     0
2      |         1         |     4
3      |         1         |     1
4      |         1         |     777 
```

请注意，用户 id 777 不在 users 表中。

我需要这种格式的结果

```
aid     |    is_activated   |  user_name      
______________________________________________
1       |         0         |     0
2       |         1         |     Agent Smith
3       |         1         |     John Smith
4       |         1         |     777 
```

如果用户 id 存在于 users 表中，则必须显示用户名，否则必须显示 user_id 本身。

我试过这样的事情

```
SELECT aid, is_activated, user_id, users.user_name from activation_details, users WHERE users.uid = user_id 
```

它给出了这个输出，这是没有用的。

```
aid     |    is_activated   |  user_name      | user_id
________________________________________________________ 
2       |         1         |     Agent Smith |     4 
3       |         1         |     John Smith  |     1 
```

无论如何只能使用mysql来获得这个输出，我可以用PHP中的多个查询来做到这一点，但这不是我想要的。

```
aid     |    is_activated   |  user_name
______________________________________
1       |         0         |     0
2       |         1         |     Agent Smith
3       |         1         |     John Smith
4       |         1         |     777 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:24:36.857

您希望将外连接与`coalesce()`函数（返回所选列中的第一个非空值）结合使用，如下所示：

```
SELECT 
    a.aid, 
    a.is_activated, 
    a.user_id, 
    coalesce(b.user_name, a.user_id, 0) as User
from 
    activation_details a
        left outer join users b
            on a.user_id=b.uid 
```

编辑：我为该函数添加了一项检查，如果和字段均为空值，该`coalesce()`函数将为用户返回一个。`0``user_name``user_id`

在mysql中完成的测试：

```
mysql> select * from first
    -> ;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
+------+-------+
3 rows in set (0.00 sec)

mysql> select coalesce('a', id) from first
    -> ;
+-------------------+
| coalesce('a', id) |
+-------------------+
| a                 |
| a                 |
| a                 |
+-------------------+
3 rows in set (0.00 sec)

mysql> select coalesce('a', 1) from first;
+------------------+
| coalesce('a', 1) |
+------------------+
| a                |
| a                |
| a                |
+------------------+
3 rows in set (0.00 sec)

mysql> select coalesce(null, 1) from first;
+-------------------+
| coalesce(null, 1) |
+-------------------+
|                 1 |
|                 1 |
|                 1 |
+-------------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:07:24.240

```
SELECT t3.aid,t3.is_activated,
IF (t2.user_name IS NOT null, t2.user_name, t3.user_id)
FROM activation_details AS t3
LEFT JOIN users AS t2 ON t3.user_id = t2.uid; 
```

我认为这个查询会给出结果

# php - 使用 IF 和 Echo 正确的 PHP 语法

> ID：12055803
> 
> 赞同：0
> 
> 时间：2012-08-21T13:22:01.007
> 
> 标签：php, list, if-statement, echo

我希望我能从你们那里得到一些帮助。下面的代码有效，但我怀疑这是编写语法的好方法。特别是因为它需要大量的代码。

我正在尝试做的事情是创建一个列表，仅当项目具有值时才会填充该列表。我已经指定了变量是否有值（我认为部分代码也可以使用一些工作，但这是一个不同的问题）。而且我找到了一种方法来显示或隐藏列表中的项目。但我不认为它是有效的。这就是我可以使用一些帮助的地方。

```
 <?php
                if(empty($orderNum))
                    {
                    echo "<li><a href='#' title='Brodit'>Tomte</a></li>";
                    }
                else
                    {
                    echo "<li><a href='unordered.php?SupName=2&SupStatus=3' title='Brodit'>Order ("; echo "$orderNum"; echo ")</a></li>";
                    }
            ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:35:08.347

您可以使用 php 模板中广泛使用的 php 替代语法，并在 zend 手册和 symfony 等文档中提出建议：

```
<?php if(empty($orderNum)): ?>
    <li><a href="#" title="Brodit">Tomte</a></li>
<?php else: ?>
    <li><a href="unordered.php?SupName=2&SupStatus=3"title="Brodit">
      Order (<?php echo $orderNum; ?>)</a>
    </li>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:29:37.970

```
<?php
  if(empty($orderNum)){
    echo "<li><a href='#' title='Brodit'>Tomte</a></li>";
  } else {
    echo "<li><a href='unordered.php?SupName=2&SupStatus=3' title='Brodit'>Order ({$orderNum})</a>  </li>";
  }
?> 
```

您可以使用`"foo {$var} bar"`而不是`"foo ".$var." bar"`. 这（在我看来）更优雅。

**如果 HTML 代码变得更长，我希望：**

```
<?php if(empty($orderNum)): ?>
    <li><a href="#" title="Brodit">Tomte</a></li>
<?php else: ?>
    <li><a href="unordered.php?SupName=2&SupStatus=3"title="Brodit">
      Order (<?php echo $orderNum; ?>)</a>
    </li>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:28:55.143

要为已回答的内容添加另一种选择，您可以专注于 HTML 而不是 PHP：

```
 <?php if(empty($orderNum)) { ?>
     <li><a href='#' title='Brodit'>Tomte</a></li>
 <?php } else {?>
     <li><a href='unordered.php?SupName=2&SupStatus=3' title='Brodit'>Order ("<?php echo $orderNum;?>")</a></li>";
 <?php }?> 
```

如果您想利用 HTML 编辑器（语法验证、自动完成等），这尤其有用。我会为大块 HTML 以及与集成商合作时选择这种语法，因为它们不太可能搞砸 PHP 部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:25:07.597

```
 <?php
            if(empty($orderNum))
                {
                echo "<li><a href='#' title='Brodit'>Tomte</a></li>";
                }
            else
                {
                echo "<li><a href='unordered.php?SupName=2&SupStatus=3' title='Brodit'>Order (". $orderNum .")</a></li>";
                }
        ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:26:28.143

您可以做的一件事是将字符串分配给一个变量，然后在最后有一个 echo 语句。您也可以在双引号中进行变量替换。例如：

“订单（$orderNum）”

# javascript - Javascript to get selected option works in Webkit/FF but not IE

> ID：12055804
> 
> 赞同：1
> 
> 时间：2012-08-21T13:22:03.067
> 
> 标签：javascript

I am using javascript to get the selected option from one drop down and then put that information into another drop down. The code work fine in Safari, Chrome and Firefox but fails in IE. Can someone help me make the code cross browser compatible?

```
 function showTeams(weekNum) {
    var selectedItem = document.getElementById('pick'+weekNum);
    var a = document.getElementById('week'+weekNum).selectedIndex;
    if (a != 0) {
        var str = document.getElementById('week'+weekNum).value;
        var away = str.match(/^(.*)(?= at)/);
        var home = str.match(/at(.*)/);
        selectedItem.options[0].text = away[0];
        selectedItem.options[0].value = away[0];
        selectedItem.options[1].text = home[1];
        selectedItem.options[1].value = home[1];

        document.getElementById('week'+weekNum).style.visibility = "none";
        selectedItem.style.visibility = "visible";
        selectedItem.selectedIndex = 0;
    }
} 
```

It fails in IE at `var str = document.getElementById('week'+weekNum).value;`, `str` returns as blank which breaks the regex and everything below it. Any insights and help would be greatly appreciated.

Edit: Adding relevant HTML.

```
<form class="pick" name="picks" action="./resources/send_picks.php" method="post">
    <p>Week 1: <select class="week" name="week1" id="week1" onchange="javascript:showTeams('1');">
        <option></option>
        <option>Dallas Cowboys at N.Y. Giants</option>
        <option>Indianapolis Colts at Chicago Bears</option>
        <option>New England Patriots at Tennessee Titans</option>
        <option>Buffalo Bills at N.Y. Jets</option>
        <option>Washington Redskins at New Orleans Saints</option>
        <option>Jacksonville Jaguars at Minnesota Vikings</option>
        <option>Atlanta Falcons at Kansas City Chiefs</option>
        <option>Philadelphia Eagles at Cleveland Browns</option>
        <option>St. Louis Rams at Detroit Lions</option>
        <option>Miami Dolphins at Houston Texans</option>
        <option>San Francisco 49ers at Green Bay Packers</option>
        <option>Seattle Seahawks at Arizona Cardinals</option>
        <option>Carolina Panthers at Tampa Bay Buccaneers</option>
        <option>Pittsburgh Steelers at Denver Broncos</option>
        <option>Cincinnati Bengals at Baltimore Ravens</option>
        <option>San Diego Chargers at Oakland Raiders</option>
    </select>
    <select class="pick" name="pick1" id="pick1" style="visibility:hidden" onchange="javascript:cancel('1')">
        <option></option>
        <option></option>
        <option>Cancel</option>
    </select> 
```

Testing is being done on IE8 currently.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:51:16.647

首先 - 要让 .value 在 IE 中工作，您需要将其实际放入您的 html 中：

```
<option value="Dallas Cowboys at N.Y. Giants">Dallas Cowboys at N.Y. Giants</option> 
```

第二 - 没有“可见性=无”。试试这个：

```
document.getElementById('week'+weekNum).style.visibility = "hidden" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:45:06.907

基于其他有问题的问题`.value`and `.checked`，最好使用 jQuery。

```
var str = $('#week'+weekNum).val(); 
```

如果您切换到 jQuery，您将节省大量时间。不再担心 IE 的怪癖（或者不再担心）。

# ruby-on-rails - rails: exclude blank select_tag from url

> ID：12055806
> 
> 赞同：0
> 
> 时间：2012-08-21T13:22:05.103
> 
> 标签：ruby-on-rails, filter, scope

I have a form on index.html.erb (User views):

```
<%= form_tag( '', :method => :get ) do %>

<% @company = Position.all.map { |p| [ p.company, p.company ] } %>
<%= select_tag "company", options_for_select((@company), params[:position_id]), { :include_blank => true, :reject_if => @company.blank? } %> 

<% @industry = Position.all.map { |p| [ p.industry, p.industry ] } %>
<%= select_tag "industry", options_for_select((@industry), params[:position_id]), { :include_blank => true, :reject_if => @industry.blank? } %> 

<%= submit_tag 'Filter', class: 'btn btn-large btn-primary' %>
<% end %> 
```

and a controller (User controller):

```
def index
    if params[:company] && params[:industry]
      @users = User.companies(params[:company]).industries(params[:industry])
    elsif params[:company]
      @users = User.companies(params[:company])
    elsif params[:industry]
      @users = User.companies(params[:industry])
    else 
      @users = User.all
    end
end 
```

A User has many companies and industries through positions:

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :first_name, :last_name, :position_ids

  has_many :positions
  has_many :companies, :through => :positions
  has_many :industries, :through => :positions
  has_one :current_position, :class_name => "Position", :conditions => { :is_current => true }

  scope :companies, lambda { |*company| {:include => :positions, :conditions => ["positions.company = ?", company]} }
  scope :industries, lambda { |*industry| {:include => :positions, :conditions => ["positions.industry = ?", industry]} }
end 
```

Despite the if statement in my user controller, I cannot get my view to ignore blank entries in either the company or industry field. For instance, a blank company and "Internet" industry filter returns this url:

...users?utf8=%E2%9C%93&company=&industry=Internet&commit=Filter

how do I modify my code to ignore a blank company field so that the url excludes 'company=&' entirely? In this case, I get the returned results that I want:

...users?utf8=%E2%9C%93&industry=Internet&commit=Filter

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:36:17.437

您需要做的是检查参数是否为空。

```
if !params[:company].blank? && !params[:industry].blank?
  @users = User.companies(params[:company]).industries(params[:industry])
elsif !params[:company].blank? && params[:industry].blank?
    @users = User.companies(params[:company])
elsif !params[:industry].blank? && params[:company].blank?
    @users = User.companies(params[:industry])
else
    @users = User.all
end 
```

当您提交表单时，正在设置变量。就是这样，它们有空白值。所以你需要检查它们是否为空白而不是它们是否存在。

# jquery - Pass JSON object up the tree

> ID：12055808
> 
> 赞同：0
> 
> 时间：2012-08-21T13:22:25.243
> 
> 标签：jquery, json, variables

I have a JSON object that is returned inside a function (see below) and that in turn is inside a parent function and then a global function. There is a further child function within that global function that needs access to the JSON to parse the records.

I have left out some things that are not really part of the problem but hopefully included enough to explain the problem I have! You can see that

```
MyFunc.prototype.CreateMine = function(){
//do some work...
    submit: function(e,v,m,f){
        var xhr = new jsonRequest()
        xhr.onreadystatechange = function(){
            var jsonText = JSON.parse(xhr.responseText); //jsonText now contains my data
        };
    }
//need to access jsonText...
    }
} 
```

Let me know if the example of not complete enough, thanks in advance Chris

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:30:21.347

或许您应该了解更多关于[JavaScript 中作用域的](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)工作原理。简单来说，在外部函数中创建的所有变量都在内部函数中可用。所以你只需要`jsonText`在“上层”函数之一中声明你的。

`var`注意in的缺失`submit`：这样它将尝试`jsonText`在作用域树中查找变量 upper：

```
MyFunc.prototype.CreateMine = function(){
    var jsonText
    //do some work...
    submit: function(e,v,m,f){
        var xhr = new jsonRequest()
        xhr.onreadystatechange = function(){
            jsonText = JSON.parse(xhr.responseText); //jsonText now contains my data
        };
    }
    jsonText // available
    }
} 
```

但是，在您的情况下，[回调](http://www.phpied.com/async-javascript-callbacks/)或[延迟](https://stackoverflow.com/questions/4869609/how-can-jquery-deferred-be-used)会更好，因为 in`submit` `jsonText`是异步更改的，因此您无法在调用`submit`.

```
function myCallback(myData) {
    // do smt with your data
}
MyFunc.prototype.CreateMine = function(){
    //do some work...
    submit: function(e,v,m,f){
        var xhr = new jsonRequest()
        xhr.onreadystatechange = function(){
            var jsonText = JSON.parse(xhr.responseText);
            myCallback(jsonText)
        };
    }
    }
} 
```

# oracle - 使用 WiX 静默安装 Oracle

> ID：12055815
> 
> 赞同：0
> 
> 时间：2012-08-21T13:22:40.020
> 
> 标签：oracle, installation, wix, custom-action, silent

我正在使用 WiX 创建一个安装程序，作为其中的一部分，我也在安装 Oracle。我正在使用 CA 来执行此操作。但它没有执行就失败了。

```
<CustomAction Id="InstallORA" ExeCommand="[ORACLE]start-oraclexe-install.bat" Directory="ORACLE" Execute="deferred" Return="check" Impersonate="no" /> 
```

我的bat文件内容是：

```
C:\xe-10.2.0.1-nt.exe /s /f1"C:\OracleXE-install.iss" /f2"C:\oraclexe-setup.log" 
```

在日志中我看到`MSI (s) (44:9C) [12:18:42:344]: Running as a service.`它会弹出一条错误消息。

任何想法如何解决它？

# javascript - 第一次通过后返回的递归 JavaScript

> ID：12055818
> 
> 赞同：1
> 
> 时间：2012-08-21T13:22:44.640
> 
> 标签：javascript, recursion, marionette

我有以下递归 javascript 函数，它循环遍历具有子 ItemViews 又是 CollectionViews 的backbone.marionette CollectionView 的子代：

```
 findViewByCid: function(cid, children){
      var col = (arguments.length === 1) ? this.children : children;

      if(cid in col){
        return col[cid];
      }

      for(child in col){
        var grandChildren = col[child].children;

        if(cid in grandChildren){
          return grandChildren[cid];
        }

        if(grandChildren && (!jQuery.isEmptyObject(grandChildren))){
          return this.findViewByCid(cid, grandChildren);
        }
      }
    } 
```

我这样称呼它：

var view = DocumentManager.Documents.treeRoot.findViewByCid(model.cid);

问题是这条线：

```
return this.findViewByCid(cid, grandChildren); 
```

如果我有这样的层次结构

```
c1
|_c2
  |_c3
|_c4
  |_c5 
```

然后 te return 语句将导致函数在传递 th3 c2 节点后退出并且永远不会到达 c4 等。

如果我删除 return 语句，则会找到正确的孩子但返回 null。

如何继续解析层次结构并返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:27:33.880

这就是我最终得到的结果，它是主干.marionette，使用 CollectionView 的 itemView 迭代 collectionView：

```
findViewByCid: function(cid){
  var self = this,
      ret;

  function findView(cid, children){
    var col = (arguments.length === 1) ? self.children : children,
    grandChildren;

    if(cid in col){
      ret = col[cid];
    }

    for(child in col){
      grandChildren = col[child].children;

      if(cid in grandChildren){
        ret = grandChildren[cid];
      }

      if(grandChildren && (!jQuery.isEmptyObject(grandChildren))){
        findView(cid, grandChildren);
      }
    }
  };

  findView(cid);

  return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:30:51.527

**return 将退出您的功能**。

尝试将所有内容保存在 var 中并**在最后返回，**如果您需要返回多个值，它可以是一个数组。（并且不要在 for 循环中声明变量！）

这是一个**建议**：

```
findViewByCid: function(cid, children){
  var willBeReturned=[];
  var grandChildren;

  var col = (arguments.length === 1) ? this.children : children;

  if(cid in col){
    willBeReturned[willBeReturned.length] = col[cid];
  }
  for(child in col){
    grandChildren = col[child].children;

    if(cid in grandChildren){
      willBeReturned[willBeReturned.length] = grandChildren[cid];
    }

    if(grandChildren && (!jQuery.isEmptyObject(grandChildren))){
      willBeReturned[willBeReturned.length] = this.findViewByCid(cid, grandChildren);
    }
  }
  return willBeReturned;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:15:33.813

```
findViewByCid: function(cid, children) {
    var col = (arguments.length === 1) ? this.children : children;

    if(cid in col){
        return col[cid];
    }       
    for(var childKey in col) {
        var grandChildren = col[childKey].children,
            childView;

        if (grandChildren) {
            childView = this.findViewByCid(cid, grandChildren);
        }

        if (childView) {
            return childView;
        }
    }
    return null;
} 
```

首先，这看起来像 Backbone.js，如果是，标记它可能会有所帮助。我觉得人们可能会遇到类似的问题，并且知道更好的方法来存储对视图的引用。

您只想在找到某些东西时返回它......仅在第一个递归调用上使用 return 将强制该方法在搜索第一组孙子时停止执行，即使没有找到任何东西。

我还将在您在 for 循环中引入的新变量前面添加一个 var - 没有它，该变量将是全局的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:44:46.213

仅当找到某些内容时才需要返回，否则该`return`语句将中断您的循环而无需搜索其他子项。这是一个简单的[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)你想要的东西。

假设函数在每个子节点的原型上（不仅在根节点上）：

```
findViewByCid: function(cid) {
    var col = this.children;
    if (!col) // break if the node has no children
        return false;
    if (cid in col) // look for cid and return the node if one found
        return col[cid];
    for (var child in col) {
        // search through each child and return the result if something is found
        var found = col[child].findViewByCid(cid);
        if (found)
            return found;
    }
    // else nothing was found
    return false;
} 
```

或者有一个以节点为参数的函数：

```
function findViewByCid(cid, node) {
    var col = node.children;
    if (!col)
        return false;
    if (cid in col)
        return col[cid];
    for (var child in col) {
        var found = findViewByCid(cid, col[child]);
        if (found)
            return found;
    }
    return false;
} 
```

但是，该算法似乎无法找到根节点。`cid`如果您可以通过 来识别当前节点，而不是查看其所有子节点，那就更好了：

```
if (this /*… is what we have searched for */)
    return this; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T13:33:13.707

我相信 if (cid in col) 这行不是你想做的。尝试

```
findViewByCid: function(cid, children){
  if (this.cid === cid) return this;

  var col = (arguments.length === 1) ? this.children : children;
  for(var childI in col){
    var child = col[childI];

    if (child.cid === cid) {
      return child;
    }

    var grandChildren = child.children;
    if(grandChildren && (!jQuery.isEmptyObject(grandChildren))){
      return this.findViewByCid(cid, grandChildren);
    }
  }
} 
```

# c++ - 使用 SSE 内在函数编译一个简单的 c++ 程序

> ID：12055822
> 
> 赞同：6
> 
> 时间：2012-08-21T13:22:50.733
> 
> 标签：c++, x86, sse, simd

我是 SSE 说明的新手，我试图从这个站点学习它们：http: [//www.codeproject.com/Articles/4522/Introduction-to-SSE-Programming](http://www.codeproject.com/Articles/4522/Introduction-to-SSE-Programming)

我在带有 Intel Core i7 960 CPU 的 Ubuntu 10.10 上使用 GCC 编译器

这是基于我尝试的文章的代码：

对于长度为 ARRAY_SIZE 的两个数组，它计算

`fResult[i] = sqrt( fSource1[i]*fSource1[i] + fSource2[i]*fSource2[i] ) + 0.5`

这是代码

```
#include <iostream>
#include <iomanip>
#include <ctime>
#include <stdlib.h>
#include <xmmintrin.h> // Contain the SSE compiler intrinsics
#include <malloc.h>
void myssefunction(
          float* pArray1,                   // [in] first source array
          float* pArray2,                   // [in] second source array
          float* pResult,                   // [out] result array
          int nSize)                        // [in] size of all arrays
{
    int nLoop = nSize/ 4;

    __m128 m1, m2, m3, m4;

    __m128* pSrc1 = (__m128*) pArray1;
    __m128* pSrc2 = (__m128*) pArray2;
    __m128* pDest = (__m128*) pResult;

    __m128 m0_5 = _mm_set_ps1(0.5f);        // m0_5[0, 1, 2, 3] = 0.5

    for ( int i = 0; i < nLoop; i++ )
    {
        m1 = _mm_mul_ps(*pSrc1, *pSrc1);        // m1 = *pSrc1 * *pSrc1
        m2 = _mm_mul_ps(*pSrc2, *pSrc2);        // m2 = *pSrc2 * *pSrc2
        m3 = _mm_add_ps(m1, m2);                // m3 = m1 + m2
        m4 = _mm_sqrt_ps(m3);                   // m4 = sqrt(m3)
        *pDest = _mm_add_ps(m4, m0_5);          // *pDest = m4 + 0.5

        pSrc1++;
        pSrc2++;
        pDest++;
    }
}

int main(int argc, char *argv[])
{
  int ARRAY_SIZE = atoi(argv[1]);
  float* m_fArray1 = (float*) _aligned_malloc(ARRAY_SIZE * sizeof(float), 16);
  float* m_fArray2 = (float*) _aligned_malloc(ARRAY_SIZE * sizeof(float), 16);
  float* m_fArray3 = (float*) _aligned_malloc(ARRAY_SIZE * sizeof(float), 16);

  for (int i = 0; i < ARRAY_SIZE; ++i)
    {
      m_fArray1[i] = ((float)rand())/RAND_MAX;
      m_fArray2[i] = ((float)rand())/RAND_MAX;
    }

  myssefunction(m_fArray1 , m_fArray2 , m_fArray3, ARRAY_SIZE);

  _aligned_free(m_fArray1);
   _aligned_free(m_fArray2);
   _aligned_free(m_fArray3);

  return 0;
} 
```

我收到以下编译错误

```
[Programming/SSE]$ g++ -g -Wall -msse sseintro.cpp 
sseintro.cpp: In function ‘int main(int, char**)’:
sseintro.cpp:41: error: ‘_aligned_malloc’ was not declared in this scope
sseintro.cpp:53: error: ‘_aligned_free’ was not declared in this scope
[Programming/SSE]$ 
```

我在哪里搞砸了？我是否缺少一些头文件？我似乎已经包括了所有相关的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T13:24:33.540

[_aligned_malloc](https://msdn.microsoft.com/en-us/library/8z34s9c6.aspx)和[_aligned_free](https://msdn.microsoft.com/en-us/library/17b5h8td.aspx)是微软主义。在 Linux*等*上使用[posix_memalign](http://linux.die.net/man/3/posix_memalign)或[memalign](http://linux.die.net/man/3/memalign)。对于 Mac OS X，您可以只使用 malloc，因为它始终是 16 字节对齐的。对于可移植的 SSE 代码，您通常希望为对齐的内存分配实现包装函数，例如

 *```
void * malloc_simd(const size_t size)
{
#if defined WIN32           // WIN32
    return _aligned_malloc(size, 16);
#elif defined __linux__     // Linux
    return memalign(16, size);
#elif defined __MACH__      // Mac OS X
    return malloc(size);
#else                       // other (use valloc for page-aligned memory)
    return valloc(size);
#endif
} 
```

的实现`free_simd`留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-12T12:20:37.020

简短的回答：使用`_mm_malloc`and `_mm_free`from`xmmintrin.h`代替`_aligned_malloc`and `_aligned_free`。

## 讨论

**在**编写 SSE/AVX 代码时，不应使用`_aligned_malloc`、`_aligned_free`、`posix_memalign`、或其他任何内容。`memalign`这些都是特定于编译器/平台的函数（MSVC 或 GCC 或 POSIX）。

Intel 引入了专门用于 SIMD 计算的函数`_mm_malloc`和`_mm_free`Intel 编译器（参见 参考资料[）](https://software.intel.com/en-us/articles/data-alignment-to-assist-vectorization)。其他具有 x86 目标架构的编译器也[添加了它们](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=16570)（就像它们定期添加 Intel 内在函数一样）。从这个意义上说，它们是唯一的跨平台解决方案：它们应该在每个支持 SSE 的编译器中都可用。

这些函数在`xmmintrin.h`头文件中声明。`smmintrin.h`以后 SSE/AVX 版本的任何标头都会自动包含以前的标头，因此仅包含或`emmintrin.h`例如就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:23:55.370

这并不能直接回答您的问题，但我想指出您的 SSE 代码编写不正确，如果它有效，我会感到惊讶。您需要对包含对齐的非 sse 类型（如对齐的浮点数组）的非 sse 类型使用加载/存储操作（即使您有 SSE 类型的动态数组，也需要执行此操作）。您需要记住，当您使用 SSE 时，假设 SSE 数据类型代表 SSE 寄存器中的数据，而其他所有内容通常都在系统内存或非 SSE 寄存器中，因此您需要从/注册和记忆。你的函数应该是这样的：

```
void myssefunction
(
    float* pArray1,                   // [in] first source array
    float* pArray2,                   // [in] second source array
    float* pResult,                   // [out] result array
    int nSize                         // [in] size of all arrays
)                                   
{
    const __m128 m0_5 = _mm_set_ps1(0.5f);        // m0_5[0, 1, 2, 3] = 0.5
    for (size_t index = 0; index < nSize; index += 4)
    {
        __m128 pSrc1 = _mm_load_ps(pArray1 + index); // load 4 elements from memory into SSE register
        __m128 pSrc2 = _mm_load_ps(pArray2 + index); // load 4 elements from memory into SSE register

        __m128 m1   = _mm_mul_ps(pSrc1, pSrc1);        // m1 = *pSrc1 * *pSrc1
        __m128 m2   = _mm_mul_ps(pSrc2, pSrc2);        // m2 = *pSrc2 * *pSrc2
        __m128 m3   = _mm_add_ps(m1, m2);                // m3 = m1 + m2
        __m128 m4   = _mm_sqrt_ps(m3);                   // m4 = sqrt(m3)
        __m128 pDest  = _mm_add_ps(m4, m0_5);          // pDest = m4 + 0.5

        _mm_store_ps(pResult + index, pDest); // store 4 elements from SSE register to memory.
    }
} 
```

还值得注意的是，在给定时间内可以使用的寄存器数量是有限制的（对于 SSE2 来说是 16 个）。您可以编写尝试使用超过限制的代码，但这会导致寄存器溢出。*

# xna - 带有 XNA 4.0 的 Nvidia 3D 立体声？

> ID：12055829
> 
> 赞同：0
> 
> 时间：2012-08-21T13:23:08.440
> 
> 标签：xna, nvidia

我想创建一个使用 Nvidia 3D Vision 和 XNA 4.0 的程序。XNA 4.0可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:20:47.527

基于[Xbox论坛上的这篇文章](http://xboxforums.create.msdn.com/forums/t/60236.aspx)上的这篇文章，显然有人成功地做到了这一点。

摘自论坛帖子：

`I just got Nvidia 3d Vision to work with both 3.1 and 4.0`

# android - OutputStreamWriter 不写

> ID：12055831
> 
> 赞同：0
> 
> 时间：2012-08-21T13:23:15.230
> 
> 标签：android, file, android-asynctask, fileoutputstream, executor

我创建了一个带有异步任务的文件。之后安排一个执行程序每秒一次将信息写入所述文件。一旦我触摸一个按钮，执行程序就会关闭并且文件关闭，但通常不会在文件中写入任何内容。

代码：

```
startButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                preferences.edit().putBoolean(GlobalConstants.stopPreference,false).commit();
                loc_thr = new LocationThread(preferences, getApplicationContext());
                loc_thr.run();

                startButton.setVisibility(View.INVISIBLE);
                startButton.setClickable(false);
                stopButton.setVisibility(View.VISIBLE);
                stopButton.setClickable(true);

                currentDateAndTime = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
                fileName = getString(R.string.loc_log_path) + currentDateAndTime + ".txt";
                new CreateFileTask(fileName).execute();
                loc_file = new File(fileName);
                try {
                    FOS = new FileOutputStream(loc_file.getAbsolutePath());
                    OSW = new OutputStreamWriter(FOS);
                    OSW.write(GlobalConstants.fileHeader + '\n');
                } catch (FileNotFoundException e1) {
                    e1.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                scheduledTaskExecutor = Executors.newScheduledThreadPool(5);
                scheduledTaskExecutor.scheduleAtFixedRate(new Runnable() {
                    public void run() {
                        if(loc_thr.getLocationStatus() & loc_thr.newLocation() & !preferences.getBoolean(GlobalConstants.stopPreference,false)){
                            SensorBundle SB = new SensorBundle(loc_thr.getCurrentLocation(),loc_thr.getCurrentGPSStatus());
                            try {
                                OSW.write(new SimpleDateFormat("yyyy/MM/dd;hh:mm:ss").format(new Date()) + ";");
                                OSW.write(SB.getLatitude() + ";");
                                OSW.write(SB.getLongitude() + ";");
                                OSW.write(SB.getAltitude() + ";");
                                OSW.write(SB.getAccuracy() + ";");
                                OSW.write(SB.getProvider() + ";");
                                OSW.write('\n');
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        } else{
                            if(preferences.getBoolean(GlobalConstants.stopPreference,false)){
                                try {
                                    OSW.close();
                                    FOS.close();

                                    scheduledTaskExecutor.shutdown();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }
                        }
                    }
                }, 0, 1, TimeUnit.SECONDS);
                }
        }); 
```

每当按下停止按钮时，之前查询的 SharedPreference 都会设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:34:09.200

我想你的问题可能在这里

```
 new CreateFileTask(fileName).execute();
   loc_file = new File(fileName); 
```

我假设此任务会创建文件，并且您希望何时可以`new File(fileName)`创建文件。这是否属实是不确定的。如果 AsyncTask CreateFileTask 计划在执行下一条语句之前运行并完成，则该文件将存在，否则将不存在。您是否从 IOException 或 FileNoteFoundExceptions 在 logcat 中看到堆栈跟踪？

# python - 搜索大量文本文件python

> ID：12055833
> 
> 赞同：1
> 
> 时间：2012-08-21T13:23:15.660
> 
> 标签：python, excel, text

我有一个从 Excel 文档中导出的文本文件。它沿列列出了每个供应商，在下面的行中列出了各自的定价。最后会列出最低供应商和最低价格。例子：

```
Project: Name.
Supplier A, Supplier B, Supplier C, Lowest Price, Winning Supplier
600, 900, 650, 600, Supplier A 
```

由于我需要搜索数百个 Excel 文档，我认为最好创建每个文档的文本文件并在 python 中处理数据。

我已经阅读了 python 手册，但我发现很难得到任何结果。我想要的最终结果是能够处理单个文件夹中的大量文件。我的目标是能够列出每个供应商，并搜索他们是否在每个项目上都取得了成功，如果他们不是以美元计价或价格与获胜供应商的百分比差异有多大。

任何人都可以就从哪里开始构建它提供一些帮助吗？

格雷吉 D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:59:44.433

我可能会将供应商数据封装在一个类中：

```
class Supplier(object):
    def __init__(self):
        self.projects = []  #winning projects
        self.bids = []      #how much this supplier bid, winning bid. 
```

然后我将每个数据文件分别解析为：

```
from collections import defaultdict
def parse_datafile(fname,output=None):
    if output is None:
       output = defaultdict(Supplier)
    with open(fname,r) as f:
       project = f.readline().split(':')[1].strip()
       suppliers = map(str.strip,f.readline().split(',')[:-2])
       bids = map(str.strip,f.readline().split(','))
       winner = bids[-1]
       win_amt = bids[-2]

       for s,b in zip(suppliers,bids):
           output[s].bids.append(int(b),int(win_amt))
       output[winner].projects.append(project)
    return output 
```

现在我们可以建立我们的字典：

```
 import glob
 from Collections import defaultdict
 d = defaultdict(Supplier)
 for fname in glob.iglob('*.txt'):
     d = parse_datafile(fname,output=d) 
```

您可以通过以下方式获取有关该供应商的信息：

```
print d['supplier A'].projects
print [ float(bid)/winbid for bid,winbid in d['supplier A'].bids ] 
```

等等

当然，有一些库可以`.xls`直接在 python 中解析文件，这可能比我的手动解析函数更合适。但我仍然认为包含所有相关信息的类的 defaultdict 可能是你最好的选择（不管你如何设法解析数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:59:17.767

我也缺少有关该问题的详细信息。但对我来说，总体而言，您最好直接使用 xls 文件，因为它们似乎包含相当多的语义。看看这里：[http](http://www.python-excel.org/) : //www.python-excel.org/ ，xlrd 非常棒且易于使用。

# c++ - 静态指针和运算符 new

> ID：12055835
> 
> 赞同：2
> 
> 时间：2012-08-21T13:23:21.513
> 
> 标签：c++

```
class X {
public:
    X(int i) : num(i){}
    int num;
};

void f(int i){

    static X* px1 = new X(i);
    X* px2 = new X(i);
    cout<<px1->num;
    cout<<px2->num<<' ';

};

void main(){
    for (int i=0;i<5;i++) 
        f(i);
} 
```

这段代码会输出`00 01 02 03 04`，但我不太明白为什么静态指针`px1`不能使用`operator new`.

此外，此代码存在内存泄漏问题。我可以使用`delete`吗`px1`？在两个指针上使用会`delete`解决内存泄漏问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T13:24:55.083

这是因为当控制第一次通过初始化代码时，静态局部变量只被初始化一次。因此，尽管您在以下行多次调用该函数：

```
static X* px1 = new X(i); 
```

只会在第一次调用中执行（`i`为零），并且变量将在函数调用之间保持其值。

是的，你可以，`delete` `px1`但你最好在之后将其设置为 null 以避免双重释放和未定义的行为。你也有指向的对象泄漏`px2`- 你也必须照顾这些对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:26:50.183

> 但我不太明白为什么静态指针 px1 不能使用 operator new 改变它的值

静态局部变量在第一次被调用时被初始化，并且只在第一次被调用

> 在两个指针上使用 delete 会解决内存泄漏问题吗？

是的

作为一种更好的做法，在这种情况下，您应该使用`std::unique_ptr`原始指针而不是原始指针。`delete`它会`delete`自动为您完成，因此您不会泄漏。

此外，您的任何分配都不需要在堆上分配。通常，您仅`new`在希望对象在其创建的范围之外持续存在时才使用。在这种情况下，您不需要它，因此您可以编写：

```
static X x1(i);
X x2(i);
cout<<x1.num;
cout<<x2.num<<' '; 
```

# linux - 如何在 Bluez Linux 中测试配置文件？

> ID：12055836
> 
> 赞同：3
> 
> 时间：2012-08-21T13:23:25.127
> 
> 标签：linux, testing, bluetooth

任何对测试 Linux 系统中可用的蓝牙配置文件有任何想法的人。Linux 中是否有可用的测试套件或程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:47:10.010

您可以针对官方蓝牙组织“Profile Tuning Suite”或 PTS 工具进行测试。 [https://www.bluetooth.org/Building/Product/TestProduct.htm](https://www.bluetooth.org/Building/Product/TestProduct.htm)

我相信，Bluez 已经在不同阶段和不同配置文件中进行了测试。

但是，它不是免费的。

我可以从 Bluetooth.org 网站（需要公司注册和登录）看到，Bluez 堆栈最近已被高通公司认证为（2012 年 6 月 12 日列出）针对蓝牙规范 4.0 + HS 的组件。

这是使用 Kernal 3.0、Bluez 4.93。

资格中经过专门测试的配置文件和协议：

*   服务发现协议

*   逻辑链路控制和适配协议

*   通用访问配置文件

*   带有 TS 07.10 的 RFCOMM

*   串行端口配置文件

*   音频/视频控制传输协议 (AVCTP 1.3) 目标

*   蓝牙网络封装协议

*   通用音频/视频分发配置文件 - 接受者、GAVDP 1.2、
    发起者

*   音频/视频分发传输协议 - Acceptor、AVDTP 1.2、Initiator、Source

*   主机控制器接口

*   多通道适配协议 - 支持 Sink 角色，支持 Source 角色，支持标准操作码

*   AMP 管理器协议

*   4.0 主机控制器接口

*   通用属性配置文件 - LE、客户端、服务器支持的属性协议

*   属性协议 - 客户端、服务器、通过 BR/EDR（L2CAP 固定通道支持）、通过 LE

*   安全管理器协议

是否有您感兴趣的特定配置文件或协议尚未在该列表中？

# jquery - 从服务器获取数据后更新剔除视图

> ID：12055843
> 
> 赞同：0
> 
> 时间：2012-08-21T13:23:44.670
> 
> 标签：jquery, knockout.js

我正在尝试在这里使用演示：

[http://knockoutjs.com/examples/cartEditor.html](http://knockoutjs.com/examples/cartEditor.html)

但是，在使用的数据集中，即：sampleProductCategories - 在示例中它是静态的。

我想在通过 jQuery getJson 调用 API 后填充该数据集。

所以标记将存在于页面上 - 但是它还没有数据来填充视图。

当 sampleProductCategories 列表更改时，如何重新触发标记以重绘自身？

例如 - 这部分可以重绘/反弹到数据吗？

```
 <tbody data-bind='foreach: lines'>
    <tr>
        <td>
            <select data-bind='options: sampleProductCategories, optionsText: "TypeName", optionsCaption: "Select...", value: TypeID'></select>
        </td>
        <td data-bind="with: category">
            <select data-bind='options: products, optionsText: "name", optionsCaption: "Select...", value: $parent.product'></select>
        </td> 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:29:50.353

您可以将 an`observableArray`用于您的选项，然后通过 AJAX 请求填充它们。UI 将相应更新。

这是购物车编辑器的更新示例，它使用一个空`observableArray`并在 1 秒后使用静态数据在 setTimeout 中更新它（就像使用 AJAX 调用一样）。 [http://jsfiddle.net/rniemeyer/TmUDc/](http://jsfiddle.net/rniemeyer/TmUDc/)

# c# - 使用 SQL Server 在 Linq 中查询投票应用程序的帮助

> ID：12055844
> 
> 赞同：2
> 
> 时间：2012-08-21T13:23:45.073
> 
> 标签：c#, .net, sql-server, linq

我正在尝试创建一个查询来获取投票结果。

有一张表格记录了某人所做的每一次投票。人们可以多次投票，但只应考虑最后一次投票。

除了“只应考虑用户的最后一票”部分之外，我正处于它可以工作的地步。

这是我的桌子：

**表投票：**

```
 id            bigint      PK
  TimeStamp     datetime
  QuestionId    int
  UserId        int 
```

和 Linq 查询：

```
var total = (float)(_db.Votes).Count(vote => vote.Timestamp>=startWeekDay && vote.Timestamp<endWeekDay);

var results = (from vote in _db.Votes 
                  where vote.Timestamp >= startWeekDay && vote.Timestamp < endWeekDay
                  group vote by new { vote.QuestionId} into g
                  orderby g.Count() descending
                  select new VoteResults()
                      {
                          QuestionID = g.Key.QuestionId, 
                          Percentage = (g.Count() / total * 100.0f),
                      }).ToList(); 
```

我的问题：如何更改此查询，以便仅考虑每个用户的最后一次投票？

编辑：鉴于此输入：

```
{
    UserId = 1,
    QuestionId = 2,
    TimeStamp = Yesterday
},
{
    UserId = 1,
    QuestionId = 1,
    TimeStamp = Today
},
{
    UserId = 2,
    QuestionId = 2,
    TimeStamp = Yesterday
},
{
    UserId = 3,
    QuestionId = 1,
    TimeStamp = Yesterday
} 
```

输出应如下所示：

```
{
    QuestionID = 2,
    Percentage = 33.3333
},
{
    QuestionID = 1,
    Percentage = 66.66666
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:33:48.933

下面我向您展示我在控制台应用程序中运行的测试用例......它应该可以解决您的问题。我用您在示例中传递的数据进行了测试：

```
public class User
{
    public int UserId {get; set;}
}

public class Question
{
    public int QuestionId { get; set; }
}

public class Vote
{
    public int VoteId {get; set;}
    public DateTime TimeStamp {get; set;}
    public Question Question {get; set;}
    public User User { get; set; }
}

public class VoteResult
{
    public int QuestionId { get; set; }
    public float Percentage { get; set; }
}

public class Program
{
    static void Main(string[] args)
    {
        var question1 = new Question();
        question1.QuestionId = 1;

        var question2 = new Question();
        question2.QuestionId = 2;

        var user1 = new User();
        user1.UserId = 1;

        var user2 = new User();
        user2.UserId = 2;

        var user3 = new User();
        user3.UserId = 3;

        List<Vote> votes = new List<Vote>()
        {
            new Vote()
            { 
                Question = question2,
                TimeStamp = DateTime.Today.AddDays(-1), // Yesterday
                User = user1,
                VoteId = 1
            },

            new Vote()
            { 
                Question = question1,
                TimeStamp = DateTime.Today,
                User = user1,
                VoteId = 2
            },

            new Vote()
            {
                Question = question2,
                TimeStamp = DateTime.Today.AddDays(-1), // Yesterday
                User = user2,
                VoteId = 3
            },

            new Vote()
            {
                Question = question1,
                TimeStamp = DateTime.Today.AddDays(-1), // Yesterday
                User = user3,
                VoteId = 4
            }
        };

        // Group Votes by User and then Select only the most recent Vote of
        // each User
        var results = from vote in votes
                        where vote.TimeStamp >= DateTime.Today.AddDays(-7) &&
                              vote.TimeStamp < DateTime.Today.AddDays(1)
                        group vote by vote.User into g
                        select g.OrderByDescending(v => v.TimeStamp).First();

        // Total Users who voted
        var total = results.Count();

                               // Group Users' votes by Question
        foreach (var result in results.GroupBy(v => v.Question.QuestionId))
        {
            var voteResult = new VoteResult()
            {
                QuestionId = result.Key,
                Percentage = ((float)result.Count() / total) * 100.0f
            };

            Console.WriteLine(voteResult.QuestionId);

            Console.WriteLine(voteResult.Percentage);
        }

    }
} 
```

# android - 更新列表视图

> ID：12055848
> 
> 赞同：0
> 
> 时间：2012-08-21T13:23:56.940
> 
> 标签：android, listview

我已经坚持了很长时间，这真的很令人沮丧。基本上，该应用程序以`ListView`包含`Movie Titles`、它们的`Gross`和开始`Year`。

然后，用户可以使用菜单中的不同活动添加新电影、总票房和年份。然后将这些值返回到第一个活动并放置在列表的底部。

这就是我的问题开始的地方。我遇到的第一个问题是应用程序在即将显示新项目时强制关闭。现在，它根本不想显示。这是代码：

```
public class Lab7_084106 extends ListActivity {

private SampleCustomAdapter adapter;
private ArrayList<MyMovies> movieList;

public static boolean Flag = false;

@SuppressWarnings("null")
@Override
public void onCreate(Bundle savedInstanceState) {

    //create stuff
    super.onCreate(savedInstanceState);
    movieList = new ArrayList<MyMovies>();

    Intent data = getIntent();
    //Flag = data.getStringExtra("Flag");

    String[] oldMovieList = getResources().getStringArray(R.array.movieArray);
    String[] oldGrossList = getResources().getStringArray(R.array.worldwideGross);
    String[] oldYearList = getResources().getStringArray(R.array.yearArray);

    //if there's no new movie to display
    if(!Flag){                  

        for (int i = 0; i < oldMovieList.length; i++) {
            MyMovies newMovie = new MyMovies();
            newMovie.setMovie(oldMovieList[i] + "NEW");
            newMovie.setGross(oldGrossList[i]);
            newMovie.setYear(oldYearList[i]);
            movieList.add(newMovie);
        }

        //adapter = new SampleCustomAdapter(movieList);

        //setContentView(R.layout.row);
        //setListAdapter(adapter);
    }
    else{

        Toast.makeText(getApplicationContext(), "Else Entered", Toast.LENGTH_SHORT).show();

        int newLength = 50; //oldMovieList.length + 1;

        //create new array to store the new value

        String[] newMovieArray = new String[newLength];
        String[] newGrossArray = new String[newLength];
        String[] newYearArray = new String[newLength];

        //populate the new list with the old one plus the new one
        for (int i = 0; i < newLength; i++) {

            if( i != newLength - 1){
                newMovieArray[i] = oldMovieList[i];
                newGrossArray[i] = oldGrossList[i];
                newYearArray[i] = oldYearList[i];       
            }
            else{
                newMovieArray[i] = data.getStringExtra("Title");
                newGrossArray[i] = data.getStringExtra("Gross");
                newYearArray[i] = data.getStringExtra("Year");
            }

        }

        //populate the old one using the new list
        for (int i = 0; i < newLength; i++) {

            oldMovieList[i] = newMovieArray[i];
            oldGrossList[i] = newGrossArray[i];
            oldYearList[i] = newYearArray[i];

        }

        //display stuff
        for (int i = 0; i < newLength; i++) {

                MyMovies newMovie = new MyMovies();
                newMovie.setMovie(oldMovieList[i]);
                newMovie.setGross(oldGrossList[i]);
                newMovie.setYear(oldYearList[i]);
                movieList.add(newMovie);

        }

        //adapter = new SampleCustomAdapter(movieList);
        //setListAdapter(adapter);

    }

    adapter = new SampleCustomAdapter(movieList);
    setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    //set stuff such that Page2 sends back a result to page 1
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            TextView t = (TextView) view.findViewById(R.id.title);
            String name = (String) t.getText();
            Toast.makeText(getApplicationContext(), name, Toast.LENGTH_SHORT).show();

        }
    });
}

private class SampleCustomAdapter extends BaseAdapter {

    private ArrayList<MyMovies> internalList;

    String[] oldMovieList = getResources().getStringArray(R.array.movieArray);
    String[] oldGrossList = getResources().getStringArray(R.array.worldwideGross);
    String[] oldYearList = getResources().getStringArray(R.array.yearArray);

    private ArrayList<MyMovies> GetSearchResults(){
        ArrayList<MyMovies> results = new ArrayList<MyMovies>();
        // make sure the arrays have the same length
        for (int i = 0; i < oldMovieList.length; i++) {
            MyMovies sr = new MyMovies();
            sr.setMovie(oldMovieList[i]);
            sr.setGross(oldGrossList[i]);
            sr.setYear(oldYearList[i]);
            results.add(sr);

       }
       return results;

    }

    public SampleCustomAdapter(ArrayList<MyMovies> contacts){
        internalList = contacts;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return internalList.size();
    }

    @Override
    public Object getItem(int index) {
        // TODO Auto-generated method stub
        return internalList.get(index);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // NOTE: you can only do this if you have access to the Activity object
        //       which is why this is an inner class
        LayoutInflater inflater = getLayoutInflater();
        View view;

        //System.out.println(parent.getClass().getName());
        //System.out.println(position);

        if (convertView==null){
            view = inflater.inflate(R.layout.row, null);
        }
        else{
            view = convertView;
        }

        // extract the views to be populated
        TextView movie = (TextView) view.findViewById(R.id.title);
        TextView gross = (TextView) view.findViewById(R.id.gross);
        TextView date = (TextView) view.findViewById(R.id.date);

        // extract the object that will fill these

        MyMovies movies = GetSearchResults().get(position);
        //MyMovies movies = internalList.get(position);

        movie.setText(movies.getMovie());
        gross.setText(movies.getGross());
        date.setText(movies.getYear());

        // return the view
        return view;
    }
}

//menu lawl
@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menupage1, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    //Handle item selection using item.getItemId()
    switch(item.getItemId()){
    case R.id.addMovie:
        AddMovie();
        break;
    }

     return true;
}
//end menu stuff lol

public void AddMovie(){
    Intent intent2 = new Intent(this, com.Android.Lab7.addMovie.class);

    startActivity(intent2);
    finish();
}
 } 
```

Flag`Boolean`变量基本上告诉用户是否添加了电影。如果用户添加了电影，它将进入 else 语句并从那里更新。我真的很困惑把这个`if-else`声明放在哪里。

我用 的`GetSearchResult`函数做了一些实验`SampleCustomAdapter`，发现它直接影响`ListView`. 我尝试将`if-else`声明放在那里，但我最终在`ListView`.

Using`adapter.notifyDataSetChanged();`给出一个 NullPointerException 错误并指向我放置它的位置。因此，即使执行以下操作：

```
MyMovies newMovie = new MyMovies();
newMovie.setMovie(data.getStringExtra("Title"));
newMovie.setGross(data.getStringExtra("Gross"));
newMovie.setYear(data.getStringExtra("Year"));
movieList.add(newMovie);
adapter.notifyDataSetChanged(); 
```

作为`else`块，它不起作用。我认为这与我从 string.xml 资源文件夹而不是通过硬代码或用户输入获取初始值这一事实有关。

自 2-3 天前以来，这个问题一直让我感到沮丧，非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:27:20.637

您只需通知适配器上的数据集已更改

```
movieList.add(newMovie);
adapter.notifyDataSetChanged(); 
```

列表视图将自动更新

**更新** 您始终可以使用以下内容，但我更喜欢通知适配器。

```
movieList.add(newMovie);
adapter = new SampleCustomAdapter(movieList);
setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:37:16.923

你应该使用**adapter.notifyDataSetChanged()**。检查[此链接](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

# web2py - 显示其他表字段值时如何在要求字段上应用语言翻译

> ID：12055856
> 
> 赞同：0
> 
> 时间：2012-08-21T13:24:11.803
> 
> 标签：web2py

在我的应用程序中，我必须指定一个标题字段，如下所示

```
Field('title', type='string',label=T('Title'),requires=IS_IN_DB(db,db.t_title.id, '%(name)s',orderby=db.t_title.id)) 
```

t_title 表中提到了所有标题选项。例如，在 t_title 表中，我有值 Mr. 和 Mrs. 对于英语，这很好。但是对于德语，我必须展示 Herr 和 Frau。

如何将语言翻译“T()”设置为标题值。所以我可以在其他语言文件中添加相应的标题名称。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:07:36.050

尝试：

```
IS_IN_DB(db, db.t_title.id, lambda r: T(r.name), orderby=db.t_title.id) 
```

IS_IN_DB 的标签参数可以是一个函数，它接受一个 Row 对象并返回该行的标签。

# mysql - mysql 选择进行性能调整

> ID：12055859
> 
> 赞同：0
> 
> 时间：2012-08-21T13:24:31.210
> 
> 标签：mysql

知道为什么即使我在 sql 中使用/强制索引作为提示，也没有选择 cli.clitype 和 c.cli。它在 4 秒内给了我输出，只为下面的查询获取 1634。我正在使用 5.5.25.log 请建议。

```
mysql> explain SELECT   DATE(sr.`date`),   v.company_name,   c.cli,   COUNT(*),   c.charge,   SUM(c.`charge`) FROM subscriptionrequest AS sr, cli AS c ,   vendor AS v WHERE sr.cli = c.cli     AND sr.secretkey = v.secretkey     AND sr.`date` BETWEEN'2012-03-12 00:00:00' AND '2012-10-13 00:00:00' and c.clitype = 'chargemo' GROUP BY DATE(sr.`date`), sr.secretkey,c.cli;
+----+-------------+-------+------+-----------------------------------------------+----------------+---------+----------------------------+------+----------------------------------------------+
| id | select_type | table | type | possible_keys                                 | key            | key_len | ref                        | rows | Extra                                        |
+----+-------------+-------+------+-----------------------------------------------+----------------+---------+----------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | c     | ALL  | idx_cli                                       | NULL           | NULL    | NULL                       |  115 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | sr    | ref  | idx_subreq_key,idx_subreq_cli,idx_subreq_date | idx_subreq_cli | 53      | crystal_du_sm.c.cli        |  869 | Using where                                  |
|  1 | SIMPLE      | v     | ref  | secretkey_idx                                 | secretkey_idx  | 52      | crystal_du_sm.sr.secretkey |    1 | Using where                                  |
+----+-------------+-------+------+-----------------------------------------------+----------------+---------+----------------------------+------+----------------------------------------------+
3 rows in set (0.00 sec)
mysql> show indexes from cli;
+-------+------------+--------------+--------------+-------------+-----------+---------     ----+----------+--------+------+------------+---------+---------------+
| Table | Non_unique | Key_name     | Seq_in_index | Column_name | Collation |      Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
 +-------+------------+--------------+--------------+-------------+-----------+--------    -----+----------+--------+------+------------+---------+---------------+
| cli   |          0 | PRIMARY      |            1 | idcli       | A         |             115 |     NULL | NULL   |      | BTREE      |         |               |
| cli   |          1 | idx_cli      |            1 | cli         | A         |         115 |     NULL | NULL   |      | BTREE      |         |               |
| cli   |          1 | cli_type_idx |            1 | clitype     | A         |         115 |     NULL | NULL   | YES  | BTREE      |         |               |
+-------+------------+--------------+--------------+-------------+-----------+---------     ----+----------+--------+------+------------+---------+---------------+
3 rows in set (0.00 sec)    

mysql> show create table cli;

| cli   | CREATE TABLE `cli` (
`idcli` bigint(255) NOT NULL AUTO_INCREMENT,
`cli` varchar(256) NOT NULL,
`type` enum('SDMF','MDMF') NOT NULL DEFAULT 'SDMF',
`priority` enum('realtime','high','normal','low','ignore') NOT NULL DEFAULT 'normal',
`status` enum('active','inactive','suspended','deleted') NOT NULL DEFAULT 'active',
`date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`description` text,
`charge` float DEFAULT '0',
`clitype` enum('chargemo','freemo') DEFAULT 'freemo',
PRIMARY KEY (`idcli`),
KEY `idx_cli` (`cli`),
KEY `cli_type_idx` (`clitype`)
) ENGINE=InnoDB AUTO_INCREMENT=117 DEFAULT CHARSET=latin1 |

1 row in set (0.00 sec)

mysql> show create table vendor;
| vendor | CREATE TABLE `vendor` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(256) NOT NULL,
`company_name` varchar(256) DEFAULT NULL,
`phone_no` varchar(256) DEFAULT NULL,
`status` enum('active','inactive','suspended','deleted') DEFAULT 'active',
`mo` bigint(255) NOT NULL,
`mt` bigint(255) NOT NULL,
`used_mo` bigint(255) DEFAULT '0',
`used_mt` bigint(255) DEFAULT '0',
`start_time` timestamp NULL DEFAULT '0000-00-00 00:00:00',
`end_time` timestamp NULL DEFAULT '0000-00-00 00:00:00',
`secretkey` varchar(50) NOT NULL,
`callback_url` text,
`payment_callback_url` text,
`date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`userid` int(255) DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `secretkey_idx` (`secretkey`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1 |

1 row in set (0.00 sec)

| subscriptionrequest | CREATE TABLE `subscriptionrequest` (
`id` bigint(255) unsigned NOT NULL AUTO_INCREMENT,
`ipaddress` varchar(256) CHARACTER SET latin1 NOT NULL DEFAULT '0.0.0.0',
`message` text,
`msisdn` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
`mode` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
`cli` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
`transactionid` varchar(100) DEFAULT NULL,
`secretkey` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
`date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`error_code` int(10) DEFAULT NULL,
`success` int(10) NOT NULL DEFAULT '0',
`status` enum('waiting','processing','completed','moexceeds','reject') DEFAULT     'waiting',
PRIMARY KEY (`id`),
KEY `idx_subreq_key` (`secretkey`),
KEY `idx_subreq_status` (`status`),
KEY `idx_subreq_transid` (`transactionid`),
KEY `idx_subreq_cli` (`cli`),
KEY `idx_subreq_date` (`date`)
) ENGINE=InnoDB AUTO_INCREMENT=1594161 DEFAULT CHARSET=utf8 | 
```

对于 SETSUNA ---

```
mysql> explain SELECT DATE(sr.`date`) AS sr_date, v.company_name, c.cli, 
->   COUNT(*) AS cnt, c.charge, 
->   SUM(c.`charge`) AS charge_sum 
->   FROM 
->   subscriptionrequest AS sr 
->   JOIN cli AS c ON sr.cli = c.cli     
->   JOIN vendor AS v ON sr.secretkey = v.secretkey
->   WHERE 
->   sr.`date` >= '2012-03-12' AND sr.`date` <= '2012-10-13' 
->   AND c.clitype = 'chargemo' 
->   GROUP BY DATE(sr.`date`), sr.secretkey, c.cli;
+----+-------------+-------+------+-----------------------------+----------------+---------     +---------------------------+-------+---------------------------------+
| id | select_type | table | type | possible_keys               | key            | key_len     | ref                       | rows  | Extra                           |
+----+-------------+-------+------+-----------------------------+----------------+---------  +---------------------------+-------+---------------------------------+
|  1 | SIMPLE      | v     | ALL  | secretkey_idx               | NULL           | NULL    | NULL                      |     9 | Using temporary; Using filesort |
|  1 | SIMPLE      | sr    | ref  | idx_subreq_key,cli_date_idx | idx_subreq_key | 103     | crystal_du_sm.v.secretkey | 88746 | Using where                     |
|  1 | SIMPLE      | c     | ref  | idx_cli,cli_type_idx        | idx_cli        | 258         | crystal_du_sm.sr.cli      |     1 | Using where                     |
+----+-------------+-------+------+-----------------------------+----------------+---------   +---------------------------+-------+---------------------------------+
3 rows in set (0.00 sec) 
```

--- 2012 年 8 月 23 日 ---

```
+----+-------------+-------+------+---------------------------------------+------------  -----+---------+----------------------------+-------+-----------------+
| id | select_type | table | type | possible_keys                         | key               | key_len | ref                        | rows  | Extra           |
+----+-------------+-------+------+---------------------------------------+-----------------+---------+----------------------------+-------+-----------------+
|  1 | SIMPLE      | v     | ALL  | secretkey_idx                         | NULL            | NULL    | NULL                       |     9 | Using temporary |
|  1 | SIMPLE      | sr    | ref  | idx_subreq_key,idx_date_cli_secretkey | idx_subreq_key  | 103     | crystal_du_sm.v.secretkey  | 88608 | Using where     |
|  1 | SIMPLE      | c     | ref  | idx_cli_clitype                       | idx_cli_clitype     | 260     | crystal_du_sm.sr.cli,const |     1 | Using where     |
+----+-------------+-------+------+---------------------------------------+----------------   -+---------+----------------------------+-------+-----------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:26:23.243

一些一般性的评论：

*   避免使用保留关键字作为列名 ( *subscriptionrequest.date* )
*   在字段名称上使用别名，尤其是在使用函数时

我认为这个版本更具可读性

```
 SELECT DATE(sr.`date`) AS sr_date, v.company_name, c.cli, 
  COUNT(*) AS cnt, c.charge, 
  SUM(c.`charge`) AS charge_sum 
  FROM 
  subscriptionrequest AS sr 
  JOIN cli AS c ON sr.cli = c.cli     
  JOIN vendor AS v ON sr.secretkey = v.secretkey
  WHERE 
  sr.`date` >= '2012-03-12' AND sr.`date` <= '2012-10-13' 
  AND c.clitype = 'chargemo' 
  GROUP BY DATE(sr.`date`), sr.secretkey, c.cli; 
```

您可能需要修改*订阅*请求表：

```
ALTER TABLE subscriptionrequest DROP INDEX `idx_subreq_cli` , DROP INDEX 
`idx_subreq_date`, ADD INDEX `cli_date` (`date`,`cli`); 
```

这将有助于根据日期字段获取正确的记录子集，从而减少从*订阅请求*表返回的记录数。

**编辑#1**

架构修改和（轻微）查询优化：

```
ALTER TABLE subscriptionrequest DROP INDEX `cli_date`, 
ADD INDEX `idx_date_cli_secretkey` (`date`,`secretkey`,`cli`);

ALTER TABLE `cli` DROP INDEX idx_cli, DROP INDEX cli_type_idx, 
ADD INDEX `idx_cli_clitype` (cli,clitype);

EXPLAIN  SELECT DATE(sr.`date`) AS sr_date, v.company_name, c.cli, 
COUNT(*) AS cnt, c.charge, SUM(c.`charge`) AS charge_sum    
FROM    subscriptionrequest AS sr JOIN 
cli AS c ON sr.cli = c.cli JOIN vendor AS v ON sr.secretkey = v.secretkey     
WHERE  sr.`date` >= '2012-03-12' AND sr.`date` <= '2012-10-13' 
AND c.clitype = 'chargemo' GROUP BY DATE(sr.`date`), sr.secretkey, c.cli 
ORDER BY NULL\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: sr
         type: index
possible_keys: idx_subreq_key,idx_date_cli_secretkey
          key: idx_date_cli_secretkey
      key_len: 160
          ref: NULL
         rows: 1
        Extra: Using where; Using index; Using temporary
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: c
         type: ref
possible_keys: idx_cli_clitype
          key: idx_cli_clitype
      key_len: 260
          ref: so_12055859.sr.cli,const
         rows: 1
        Extra: Using where
*************************** 3\. row ***************************
           id: 1
  select_type: SIMPLE
        table: v
         type: ref
possible_keys: secretkey_idx
          key: secretkey_idx
      key_len: 52
          ref: so_12055859.sr.secretkey
         rows: 1
        Extra: Using where
3 rows in set (0.01 sec) 
```

# drupal - 有时为 drupal 作品打开图形元标记

> ID：12055860
> 
> 赞同：0
> 
> 时间：2012-08-21T13:24:31.327
> 
> 标签：drupal, facebook-opengraph

所以我正在使用 drupal 6.0 的开放图形元标记模块。有时，当我将文章网址（在我的网站上）粘贴到我的 Facebook 时，会显示打开的图形图像、描述等，但有时不会。我该怎么做才能让这些一直出现？

侧载时间会是一个因素吗？如果网站加载缓慢，是否会影响打开的图形图像的显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:36:42.553

这取决于文章何时被*抓取*。

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

[来源：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)]

# sql-server - 使用 SQL Server 更新触发器中的空主键

> ID：12055863
> 
> 赞同：1
> 
> 时间：2012-08-21T13:24:35.670
> 
> 标签：sql-server, tsql, triggers, primary-key

我正在将我们的系统从 Oracle 迁移到 SQL SERVER。在 Oracle 中，我们有插入触发器，如果​​未设置，则可以设置主键。您将在下面找到来自 PL/SQL 的代码。

```
create or replace trigger trigg1
 before insert on table1
  for each row
   when (new.ID_T1 is null) -- if primary key is null
 begin
   select OUR_SEQ.nextval into :new.ID_T1 from dual;
end trigg1; 
```

现在我必须在 T-SQL 中做类似的事情。我找到了解决方案，但不幸的是，我必须列出创建表触发器的所有列。这是我想避免的（系统模型仍然非常动态）。

是否可以在不列出触发器中的所有列的情况下实现这样的触发器？

马尔钦

# nagios - 为什么在通过 icinga 运行时检查 URL 失败？

> ID：12055871
> 
> 赞同：0
> 
> 时间：2012-08-21T13:25:02.193
> 
> 标签：nagios

我创建了自己的命令来检查特定的 URL

```
define command{
    command_name    check_url
    command_line    /usr/lib/nagios/plugins/check_http -f follow -H '$HOSTNAME$' -I '$HOSTADDRESS$' -u '$ARG1$'
    } 
```

如果我从命令行运行我的命令，它可以工作：

```
/usr/lib/nagios/plugins/check_http -f follow -H www.example.com -u http://www.example.com/server-status

HTTP OK: HTTP/1.1 200 OK - 4826 bytes in 0.011 second response time  |time=0.010625s;;;0.000000 size=4826B;;;0 
```

但是当穿过 Icinga 时，我得到了

```
HTTP WARNING: HTTP/1.1 404 NOT FOUND - 314 bytes in 0.011 second response time 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:11:37.773

我的猜测是用于 -u 选项的 check_http 插件，您应该提供附加在服务器名称之后的 url，而不是整个 url。前任。

/`usr/lib/nagios/plugins/check_http -f follow -H www.example.com -u /server-status`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:48:21.090

您的手动测试不等同于您的命令定义。

-H/-I 的区别很微妙，但非常重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-07T22:55:49.723

当我遇到这样的问题时，Icinga 正在抽象它是如何执行命令的，我发现准确地找出 Icinga 正在执行的内容很有帮助。我将按如下方式完成此操作：

将 check_http 移动到临时位置

```
# mv /usr/lib/nagios/plugins/check_http /usr/lib/nagios/plugins/check_http_actual 
```

制作一个 Icinga 将调用的 bash 脚本，而不是实际的 check_http 脚本

```
# vi /usr/lib/nagios/plugins/check_http 
```

在该文件中，创建这个简单的 bash 脚本，它简单地回显调用它的命令行参数，然后退出：

```
#!/bin/bash
echo $@ 
```

然后，当然，使该 bash 脚本可执行：

```
# chmod +x /usr/lib/nagios/plugins/check_http 
```

现在在 Icinga 中，运行 check_http 命令。此时，Icinga Web 界面中显示的返回状态将准确显示 Icinga 如何调用 check_http。看到原始命令，应该很明显 Icinga 做错了什么。一旦你纠正了 Icinga 的错误，你可以简单地将原来的 check_http 脚本移回原处：

```
# mv /usr/lib/nagios/plugins/{check_http_actual,check_http} 
```

# ruby - 如何将数组作为参数传递给 Rake 任务？

> ID：12055877
> 
> 赞同：37
> 
> 时间：2012-08-21T13:25:30.483
> 
> 标签：ruby, rake

我正在编写一个 Rake 任务，我想将一个数组作为参数之一传递。这是我目前拥有它的方式。

```
task :change_statuses, :ids, :current_status, :new_status do |task, args|
  puts "args were #{args.inspect}"
end 
```

我尝试通过以下方式运行任务：

```
# First argument as array
rake "change_statuses[[1,2,3], active, inactive]"

# First argument as string
rake "utility:change_account_statuses['1,2,3', foo, bar]" 
```

我的**预期**输出是：

```
args were {:ids=> [1,2,3], :current_status=> 2 , :new_status=> 3} 
```

但是，我在每种情况下的**实际**输出是：

```
args were {:ids=>"[1", :current_status=>"2", :new_status=>"3]"} 
```

如何将数组传递给 Rake 任务？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-21T13:48:56.000

解决方案之一是避免`,`在字符串中使用符号，因此您的命令行如下所示：

```
$ rake change_statuses['1 2 3', foo, bar] 
```

然后您可以简单地拆分 ID：

```
# Rakefile

task :change_statuses, :ids, :current_status, :new_status do |task, args|
  ids = args[:ids].split ' '

  puts "args were #{args.inspect}"
  puts "ids were #{ids.inspect}"
end 
```

或者您可以解析 ids 值以获得预期的输出：

```
args[:ids] = args[:ids].split(' ').map{ |s| s.to_i } 
```

我正在使用 rake 0.8.7

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-08T00:25:49.337

另一种实现这一点的方法也赢得了传递哈希的能力

```
namespace :stackoverflow do
  desc 'How to pass an array and also a hash at the same time 8-D'
  task :awesome_task, [:attributes] do |_task, args|
    options = Rack::Utils.parse_nested_query(args[:attributes])
    puts options
  end
end 
```

只需像这样调用 rake 任务：

```
bundle exec rake "stackoverflow:awesome_task[what_a_great_key[]=I know&what_a_great_key[]=Me too\!&i_am_a_hash[and_i_am_your_key]=what_an_idiot]" 
```

那将打印

```
{"what_a_great_key"=>["I know", "Me too!"], "i_am_a_hash"=>{"and_i_am_your_key"=>"what_an_idiot"}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T07:22:17.277

```
rake "change_statuses[1 2 3, foo, bar]" 
```

这对我有用，你不应该用'配额 1 2 3

```
task :import_course, [:cids, :title] => :environment do |t, args|
  puts args[:cids]
end 
```

如果您将 1 2 3 作为正确答案，则 args[:cids] 将是“'1 2 3'”，其中`'`包括 char，您必须修剪`'`char，但如果您使用我的答案，则 args[:cids] 将是"1 2 3"，更容易使用，只需要 args[:cids].split(" ") 就可以得到 [1, 2, 3]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-06T14:55:07.290

您也可以尝试稍微改变方法，并尝试使用该`arg.extras`方法获取 id。

```
$ rake change_statuses[foo, bar, 1, 2, 3] 
```

```
task :change_statuses, [:foo, :bar] do |_task, args|
  puts args[:foo]     # => foo
  puts args[:bar]     # => bar
  puts args.extras    # => ["1","2","3"]
end 
```

您可以在本文中找到更多信息 -> [https://blog.stevenocchipinti.com/2013/10/18/rake-task-with-an-arbitrary-number-of-arguments/](https://blog.stevenocchipinti.com/2013/10/18/rake-task-with-an-arbitrary-number-of-arguments/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-05T17:12:09.557

您可以这样做：

```
 task :my_task, [:values] do |_task, args|
   values = args.values.split(',')
   puts values
 end 
```

并使用运行任务

```
rake my_task"[1\,2\,3]" 
```

# valgrind - 禁止与某些库相关的警告

> ID：12055879
> 
> 赞同：1
> 
> 时间：2012-08-21T13:25:34.283
> 
> 标签：valgrind

如何告诉`valgrind`停止显示与某个库相关的任何类型的错误？我收到了很多这样的报告：

```
==24152== Invalid write of size 8
==24152==    at 0xD9FF876: ??? (in /usr/lib64/dri/fglrx_dri.so)
==24152==    by 0x110647AF: ???
==24152==  Address 0x7f3c98553f20 is not stack'd, malloc'd or (recently) free'd 
```

我可以通过地址修剪它们（0x7fxxxxxxxxxx 不是在用户空间分配的东西），但我的`valgrind`构建似乎不接受`--ignore-ranges=0x7f0000000000-0x7fffffffffff`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:32:56.750

您可以使用`--gen-suppressions=all`. 然后你可以将它们添加`.supp`到`lib/valgrind`.

# c# - 从自动完成建议列表中选择一个项目会引发带有 ENTER 键的 KeyDown-event

> ID：12055883
> 
> 赞同：5
> 
> 时间：2012-08-21T13:25:55.287
> 
> 标签：c#, autocomplete, textbox, onkeydown

在 Winforms 中，我有一个 AutoCompleteMode 设置为 SuggestAppend 和一个 AutoCompleteCustomSource 设置的文本框。当用户键入一些字母时，会显示建议列表。如果通过用鼠标单击该列表中的一项来选择它，则为 ENTER 键引发包含文本框的表单的 KeyDown 事件。

用鼠标选择建议的项目时是否有可能不引发此事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:16:21.737

自动完成功能有几个怪癖，这些怪癖是从其最初的设计用途继承而来的，即 Internet Explorer 的地址框。这包括在您单击列表中的项目时发出 Enter 键。在 IE 的地址框中按 Enter 可以导航到输入的 URL。

您对此无能为力，本机界面 (IAutoComplete2) 几乎没有选项来配置其工作方式。它通过伪造 Windows 消息将击键插入文本框。这是您可以区分的一种方法，实际的密钥不会被关闭。您可以通过调用 GetKeyState() 进行检查，如下所示：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e) {
        if (e.KeyData == Keys.Enter && GetKeyState(Keys.Enter) < 0) {
            Console.WriteLine("Really down");
        }
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern short GetKeyState(Keys key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:29:55.597

您可以捕获 keydown 键：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
    //Do nothing or something
    }
} 
```

# winforms - 如何在c#winform中创建一个文本框来接受自动建议，不仅可以从开始，还可以从中间或任何地方（如果匹配）

> ID：12055885
> 
> 赞同：0
> 
> 时间：2012-08-21T13:25:56.233
> 
> 标签：winforms, c#-4.0, autocomplete, textbox, keypress

我有一个简单的表单，里面有一个文本框，我正在尝试制作一个用户友好的自动建议文本框..

根据当前场景，我正在使用`AutoCompleteStringCollection`类，通过该类，我可以使文本框显示以在文本框中输入的特定文本开头的单词的建议。但是，我想让我的程序即使在某个部分也应该显示建议来自数据库的字符串与 Textbox.Text 匹配。

目前，我可以使用 . 根据 userInput 过滤来自 DB 的数据`dataView`。但我仍然无法在前端显示输出。

我已经尝试了所有文本框事件，例如 ' `KeyPress`', `KeyDown`, `KeyUp`，`TextChanged`但它不起作用....

我的代码::

```
 public partial class Form2 : Form
        {
            AutoCompleteStringCollection autoCompletefromDB = new AutoCompleteStringCollection();
            AutoCompleteStringCollection searchResults = new AutoCompleteStringCollection();

            MyLinqDataContext dtcontext = new MyLinqDataContext();
          //  static string searchChar = "";
            SqlConnection con = new SqlConnection("Data Source=DATASERVER\\SQL2K8;Initial Catalog=VTMMedicalContent;Persist Security Info=True;User ID=vtm;Password=M3d!c@l");
            DataTable dTable = new DataTable();
            SqlCommand cmd;
            SqlDataAdapter da;
            DataView dtView;
            public Form2()
            {
                InitializeComponent();
            }

            private void Form2_Load(object sender, EventArgs e)
            {
                cmd = new SqlCommand();
                cmd.Connection = con;
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "select DiagnosisName from [VTMMedicalContent].[dbo].[DiagnosisMaster]";
                da = new SqlDataAdapter(cmd);
                da.Fill(dTable);
                dtView = new DataView(dTable);

            }

     //And My KeyPress Event Code..

 private void txtAutoComplete_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!Char.IsControl(e.KeyChar))
            {
                dtView.RowFilter = dtView.Table.Columns[0].ColumnName + " Like '%" + e.KeyChar + "%'";
                foreach (DataRowView dtViewRow in dtView)
                    searchResults.Add(dtViewRow[0].ToString());

                txtAutoComplete.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
                txtAutoComplete.AutoCompleteSource = AutoCompleteSource.CustomSource;
                txtAutoComplete.AutoCompleteCustomSource = searchResults;
            }
            //MessageBox.Show("The Elements in searchResult are:" + searchResults.Count);
        } 
```

我尝试在`KeyDown`, `KeyUp`,`TextChanged`事件中编写相同的代码，但没有用..:(

它仅适用于 Form_Load 但仅显示与单词起点匹配的建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:02:00.547

[创建一个自动完成文本框控件](http://www.dreamincode.net/forums/topic/34785-create-an-autocomplete-textbox-control-in-c#/)

自动完成功能有几个怪癖，这些怪癖是从其最初的设计用途继承而来的，即 Internet Explorer 的地址框。这包括在您单击列表中的项目时发出 Enter 键。在 IE 的地址框中按 Enter 可以导航到输入的 URL。

您对此无能为力，本机界面 (IAutoComplete2) 几乎没有选项来配置其工作方式。它通过伪造 Windows 消息将击键插入文本框。这是您可以区分的一种方法，实际的密钥不会被关闭。您可以通过调用 GetKeyState() 来检查某些内容，例如：作为示例，您可以随意处理这个问题

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e) {
        if (e.KeyData == Keys.Enter && GetKeyState(Keys.Enter) < 0) {
            Console.WriteLine("Really down");
        }
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern short GetKeyState(Keys key); 
```

# c++ - 调用应用程序 libjingle，用户自动从名册中删除。为什么？

> ID：12055892
> 
> 赞同：0
> 
> 时间：2012-08-21T13:26:11.917
> 
> 标签：c++, p2p, voip, libjingle

好的，尝试在 2 台装有 ubuntu 11.10 的笔记本电脑上运行 libjingle-0.6.14 中编译的“调用”程序，

当我从第一台笔记本电脑登录，并从另一台笔记本电脑再次登录（使用不同的帐户）时。上线的用户立即从名册中删除，我没有人可以打电话...

这是输出..

```
 <stream:stream from="gmail.com" id="1D65B8B570251398" version="1.0"xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
 XmppLoginTask::Advance - LOGINSTATE_STREAMSTART_SENT
 RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
  <stream:features>
 <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
   <mechanism>
     PLAIN
   </mechanism>
   <mechanism>
     X-GOOGLE-TOKEN
   </mechanism>
   <mechanism>
     X-OAUTH2
   </mechanism>
 </mechanisms>
</stream:features>
XmppLoginTask::Advance - LOGINSTATE_STARTED_XMPP
XmppLoginTask::Advance - LOGINSTATE_AUTH_INIT
XmppLoginTask::Advance - LOGINSTATE_SASL_RUNNING
SEND >>>>>>>>>>>>>>>> : Tue Aug 21 18:37:51 2012

 <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN" auth:allow-
 non-google- 
  login="true" auth:client-uses-full-bind-result="true" 
 xmlns:auth="http://www.google.com/talk/protocol/auth">
 ## TEXT REMOVED ##
 </auth>
 RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
<success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
XmppLoginTask::Advance - LOGINSTATE_SASL_RUNNING
XmppLoginTask::Advance - No error
XmppLoginTask::Advance - LOGINSTATE_STREAMSTART_SENT
SEND >>>>>>>>>>>>>>>> : Tue Aug 21 18:37:51 2012
<stream:stream to="gmail.com" xml:lang="*" version="1.0" 
xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
<stream:stream from="gmail.com" id="2B727FCA62E71E0F" version="1.0" 
xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
XmppLoginTask::Advance - LOGINSTATE_STREAMSTART_SENT
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
<stream:features>
 <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"/>
 <session xmlns="urn:ietf:params:xml:ns:xmpp-session"/>
 </stream:features>
XmppLoginTask::Advance - LOGINSTATE_STARTED_XMPP
XmppLoginTask::Advance - LOGINSTATE_BIND_INIT
XmppLoginTask::Advance - LOGINSTATE_BIND_REQUESTED
SEND >>>>>>>>>>>>>>>> : Tue Aug 21 18:37:51 2012

<iq type="set" id="0">
 <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
   <resource>
     call
   </resource>
 </bind>
 </iq>
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
<iq id="0" type="result">
  <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
   <jid>
     tejeshsmith@gmail.com/call6183138F
   </jid>
  </bind>
</iq>
XmppLoginTask::Advance - LOGINSTATE_BIND_REQUESTED
XmppLoginTask::Advance - LOGINSTATE_SESSION_REQUESTED
SEND >>>>>>>>>>>>>>>> : Tue Aug 21 18:37:51 2012
<iq type="set" id="1">
 <session xmlns="urn:ietf:params:xml:ns:xmpp-session"/>
</iq>
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:51 2012

<iq type="result" id="1"/>
XmppLoginTask::Advance - LOGINSTATE_SESSION_REQUESTED
logged in...
Creating default VideoCapturer
Enumerating V4L2 devices
V4L2 device metadata found at /sys/class/video4linux/
Found V4L2 capture device /dev/video0
Trying /sys/class/video4linux/video0/name
Name for video0 is HP Webcam
Total V4L2 devices found : 1
Creating default VideoCapturer
Enumerating V4L2 devices
V4L2 device metadata found at /sys/class/video4linux/
Found V4L2 capture device /dev/video0
Trying /sys/class/video4linux/video0/name
Name for video0 is HP Webcam 
Total V4L2 devices found : 1
Selected PulseAudio sound system
Number of references: 1
<pre><code>Number of references: 0
Selected PulseAudio sound system
Number of references: 1
Number of references: 0
Enumerating V4L2 devices
V4L2 device metadata found at /sys/class/video4linux/
Found V4L2 capture device /dev/video0
Trying /sys/class/video4linux/video0/name
Name for video0 is HP Webcam
Total V4L2 devices found : 1
SEND >>>>>>>>>>>>>>>> : Tue Aug 21 18:37:51 2012
<presence>
 <status/>
 <priority>
   0
 </priority>
 <c xmlns="http://jabber.org/protocol/caps" node="http://code.google.com/p/libjingle
 /call" ver="0.6" ext=" pmuc-v1"/>
 <x xmlns="jabber:x:delay" stamp="20120821T13:07:51"/>
</presence>
RECV <<<<<<<<<<<<<<<< : Tue Aug 21 18:37:52 2012
<presence from="smithtejesh@gmail.com/callAB04C4D8"  
to="tejeshsmith@gmail.com/call6183138F">
 <status/>
 <priority>
   0
 </priority>
 <c node="http://code.google.com/p/libjingle/call" ver="0.6" ext=" pmuc-v1" 
 xmlns="http://jabber.org/protocol/caps"/>
 <x stamp="20120821T12:58:59" xmlns="jabber:x:delay"/>
 <x xmlns="vcard-temp:x:update"/> 
```

从名册中删除：smithtejesh@gmail.com/callAB04C4D8

smithtejesh@gmail.com 已从名册中删除..自动...这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:02:03.880

调用“调用”示例的论据很可能是不完整的。libjingle 源附带的示例未经修改，不会从计算机硬件捕获视频/音频。它将播放包含音频/视频的 rtp 转储文件。源文件确实带有示例 rtp 转储文件，可用于将音频/视频播放到浏览器客户端，或者可以“传输”到另一个“调用”示例客户端并在本地保存到第二个客户端上的 rtcp 转储文件。

使用调用示例程序的正确方法是（如果在 linux 上）：

```
./call --videoinput ./test.rtpdump --voiceinput ./voice.rtpdump --videooutput ./vidoutput.rtpdump --voiceoutput ./voioutput.rtpdump 
```

libjingle 谷歌代码网站上有一些关于这个的问题，我目前正在努力寻找它们。如果我这样做，我将编辑这篇文章或添加带有链接的评论。

# crystal-reports - 无法从 Crystl32.OCX 加载“CrystalReport”

> ID：12055896
> 
> 赞同：0
> 
> 时间：2012-08-21T13:26:28.647
> 
> 标签：crystal-reports, ocx

每当我尝试运行这个使用 Crystl32.OCX 的应用程序（不是我写的）时，我都会收到错误消息...

```
Run-time error '372':

Failed to load control 'CrystalReport' from Crystl32.OCX.  Your version of
Crystl32.OCX may be outdated.  Make sure you are using the version of the
control that was provided with your application. 
```

找了很久，一直报Crystl32.OCX找不到的错误，但最终还是成功注册了。但是，它现在无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-11T13:27:28.840

我通过重新加载 Crystl32.ocx 文件并将其安装在路径中解决了这个问题。C:\Windows\System\crystl32.ocx 或 C:\Windows\SysWow64\crystl32.ocx 您可以通过此链接下载更新文件 ---> [https://www.ocxme.com/files/crystl32_ocx](https://www.ocxme.com/files/crystl32_ocx)

# html - 如何在 HTML / CSS 中隐藏软连字符 ()

> ID：12055899
> 
> 赞同：10
> 
> 时间：2012-08-21T13:26:37.783
> 
> 标签：html, css, word-wrap, hyphenation, soft-hyphen

我正在尝试在 div 中对电子邮件地址进行自动换行，否则它会溢出，因为它对于 div 的宽度来说太长了。

*我知道这个问题之前已经在这里讨论过（例如[这个问题](https://stackoverflow.com/questions/5038920/html-soft-hypen-shy-without-dash)），但是请继续阅读，因为我涵盖了那里和其他地方提到的所有可能的解决方案。*

以下解决方案都不能完全满足我的要求：

1.  **CSS**

    ```
    "word-wrap: break-word". 
    ```

    根据 div 的宽度，这会在尴尬的地方破坏电子邮件地址。例如

    > info@longemailaddress.co.u
    > 
    > ķ

2.  在 HTML 中使用**软连字符：**

    ```
    &shy; 
    ```

    这确实得到了很好的支持，但在页面上呈现了一个可见的连字符，导致用户相信电子邮件地址中有一个连字符：

    > 信息@long-
    > 
    > emailaddress.co.uk

3.  在电子邮件地址中使用**细**空间或**零宽度空间：**

    ```
    &thinsp; (thinspace)
    &#8203; (zero-width space) 
    ```

    这两个都插入了额外的字符（如果用户复制粘贴，那就太糟糕了）

4.  **换行符**...

    ```
    <br /> 
    ```

    ......因为，大多数时候，div 足够大，可以在一行中包含电子邮件地址。

我想我希望在 HTML/CSS 中有一些巧妙的方法来做到这一点，也许使用伪元素（例如：before / :after），或者使用软连字符但以某种巧妙的方式用 CSS 隐藏它。

我的网站使用 jquery，所以如果必须的话，我会求助于它，尽管我宁愿不包含一个完整的连字符库，只是为了这个小问题！

*请在明信片上回答。（或者，理想情况下在这里......）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:39:22.957

您可以剪辑文本并使用工具提示

```
 width: 100px;
   overflow: hidden;
   text-overflow: ellipsis; 
```

我所做的是在悬停时将全文显示为工具提示或使用工具提示的`title`属性。

```
<p class="email" title="long-email-address@mail.com">...</p> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:42:56.810

也许您可以尝试`<wbr>`代替`<br>`
不幸的是，这在 IE 中不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:43:22.627

`word-wrap:break-word`是基于你想要打破这个词的容器的宽度。它不会在你决定的地方打破它。不幸的是，除非您想减小 div 的宽度以便它在您想要的位置中断，否则您很不幸。

正如您所发现的，其他解决方案不足以满足您的需求。此外，使用“jQuery 连字符库”可能也无法解决您的问题，因为它只会像您尝试的那样注入字符、换行符等。你最终会遇到同样的问题。

我并不是说这有任何冒犯，但也许重新考虑设计而不是围绕设计工作会更好？Robin 的回答是一个不错的选择，尽管您将无法选择没有 javascript 的电子邮件地址。

# string - ANTLR 任意字符串变量前缀内容

> ID：12055904
> 
> 赞同：-1
> 
> 时间：2012-08-21T13:26:45.203
> 
> 标签：string, variables, antlr

我想知道为什么

```
expr:
a=(.*) 'ing' { System.out.println($a.text}; 
```

不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:21:40.510

一方面，您`);`在嵌入式代码中丢失了。它不是：

```
{ System.out.println($a.text} 
```

但：

```
{ System.out.println($a.text); } 
```

您也不太清楚“不起作用”是什么意思，但我可以做出有根据的猜测。您可能会看到`null`打印到控制台。这是因为您不能将标签分配给`.*`（`a=(.*)`无效）。您*可以*做的是将`a`应该指向的内容移至子规则：

```
expr
 : a=sub_rule 'ing' { System.out.println($a.text); }
 ;

sub_rule
 : /* ... something other than '.*' ... */
 ; 
```

您*不*应该使用`.*`内部解析器规则，除非您确切知道自己在做什么。

# java - Java - getResource 在 csv 文件上失败

> ID：12055905
> 
> 赞同：2
> 
> 时间：2012-08-21T13:26:46.110
> 
> 标签：java, resources, filepath, getresource

我有一个单元测试包，其中保存了一些 txt 文件。这些通过调用加载`getClass().getResource(file);`，它工作得很好。我在同一个文件夹中添加了一个 csv 文件，如果我提供它的名称作为参数，即`getClass().getResource("csvFile.csv");`我得到 null ......任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:31:52.460

当你使用

```
 getClass().getResource("csvFile.csv"); 
```

它看起来与班级有关。

当你使用

```
 getClass().getClassLoader().getResource("csvFile.csv"); 
```

它在您的类路径的顶级目录中查找。

我怀疑你想要第二种形式。

从[Class.getResource(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)

> 在委托之前，使用以下算法从给定的资源名称构造一个绝对资源名称：
> 
> *   如果名称以“/”开头（“\u002f”），则资源的绝对名称是名称中“/”后面的部分。
> *   否则，绝对名称的格式如下：
>     
>     
>     
>     modified_pa​​ckage_name/name
>     
>     
>     
>     其中 modified_pa​​ckage_name 是此对象的包名称，其中 '/' 替换为 '.' ('\u002e')。

如您所见，使用了类的包名的目录翻译。

* * *

例如，我有一个 maven 项目，其中代码位于`src/main/java`. 我的资源目录`src/main/resources`

我添加`csvFile.csv`到我的资源目录中，该目录将被复制到我的类路径中。

```
public class B {
    B() {
        URL resource = getClass().getClassLoader().getResource("csvFile.csv");
        System.out.println("Found "+resource);
    }
    public static void main(String... args) {
        new B();
    }
} 
```

哪个打印

```
Found file:/C:/untitled/target/classes/csvFile.csv 
```

这是maven从资源目录构建的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:41:03.267

你试过吗`getClass().getClassLoader().getResourceAsStream(file)` 这反过来又返回一个输入流，你可以用它来访问文件

# ruby-on-rails-3 - 尽管使用 POST，但 URL 参数出现在地址栏中

> ID：12055908
> 
> 赞同：4
> 
> 时间：2012-08-21T13:26:50.187
> 
> 标签：ruby-on-rails-3

我是 ROR 的新手，但我遇到了这个问题：在我的索引页面中

```
<%= button_to 'Yes', { :action => 'vote', :id => poll.id, :user_answer => 'yes' }, :method => :post  %> 
```

当用户按下“是”按钮时，传递给控制器​​的 url 包含显式给用户的所有参数。

```
vote?id=1&user_answer=yes 
```

在 routes.rb 我有：

```
match 'vote' => 'polls#vote', :via => :post 
```

任何帮助表示赞赏

编辑：整个 index.html.erb

## 民意调查

```
 <% @polls.each do |poll| %>
   <p>
   <%= poll.question %>?
   <%= button_to 'Yes', { :action => 'vote', :id => poll.id, :user_answer => 'yes' }, :method => :post %> (<%= poll.yes %>) /
   <%= button_to 'No', { :action => 'vote', :id => poll.id, :user_answer => 'no' }, :method => :post %> (<%= poll.no %>)
   </p>
 <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T18:14:07.633

button_to 的默认方法是 post，因此无需显式指定它，除非您想使用其他动词（get、put）。

如果您不喜欢附加到 url 的参数，您可能希望使用表单。
或者，只需将表单哈希添加到您的 button_to 标记：

```
<%= button_to 'Yes', { :action => 'vote', :id => poll.id, :user_answer => 'yes' }, :form => {:data_type => <your choice (html, json)> %> 
```

# iphone - 通过 NSNetService 连接和发送数据

> ID：12055916
> 
> 赞同：4
> 
> 时间：2012-08-21T13:27:11.633
> 
> 标签：iphone, objective-c, macos, nsnetservice

我正在尝试使用 NSNetService 在 iPhone 应用程序和 Mac 应用程序之间建立通信。

我已经设置了 Mac 应用程序以发布 iPhone 应用程序可以发现的 NSNetService，但我不知道如何在它们之间发送数据。

在我的 Mac 应用程序中，我发布了我的 NSNetService：

```
self.netService = [[NSNetService alloc] initWithDomain:@"" type:@"_sputnik._tcp" name:@"" port:port];
if (self.netService) {
    [self.netService scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:@"PrivateMyMacServiceMode"];

    [self.netService setDelegate:self];
    [self.netService publish];
    [self.netService startMonitoring];
    NSLog(@"SUCCESS!");
} else {
    NSLog(@"FAIL!");
} 
```

一切看起来都很好，并且触发了委托方法`- (void)netServiceDidPublish:(NSNetService *)sender`（在 Mac 应用程序中）。

在 iPhone 应用程序中，我创建了一个实例，`NSNetServiceBrowser`一两秒后它触发了`didFindService`委托方法。

```
- (void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser didFindService:(NSNetService *)aNetService moreComing:(BOOL)moreComing {
    TRACE;
    NSLog(@"moreComing: %d", moreComing);
    self.connectedService = aNetService;
    if (!moreComing) {
        self.connectedService.delegate = self;
        [self.connectedService resolveWithTimeout:30];
    }
} 
```

紧接着它触发下一个委托方法`- (void)netServiceDidResolveAddress:(NSNetService *)sender`。

这里不知道是connected还是not，can't find any connect method och connect state on `sender`.

所以我尝试使用以下命令写入输出流：

```
[self.connectedService getInputStream:&istream outputStream:&ostream];
NSString *test = @"test";
NSData *data = [test dataUsingEncoding:NSUTF8StringEncoding];
[ostream write:[data bytes] maxLength:[data length]]; 
```

并且还用 . 更新 TXTRecordData `[sender setTXTRecordData:data];`。我没有收到任何错误，我的 Mac 应用程序也没有任何反应。Mac 应用程序具有委托方法`- (void)netService:(NSNetService *)sender didUpdateTXTRecordData:(NSData *)data`。

我不知道该怎么做。我想我遗漏了一些东西，但我不知道它是在 Mac 应用程序还是 iPhone 应用程序中。我想我首先需要以某种方式从 iPhone 应用程序连接到 Mac 应用程序，然后在 Mac 应用程序中添加一些监听连接的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:15:44.890

不要相信苹果声称的一切，

使用`NSNetworkService`.

如果您执行以下操作，它将起作用：

首先获取一个端口来发布网络。不要自己选择端口。

然后您可以使用该端口发布网络。

获取客户端流：

```
[nService qNetworkAdditions_getInputStream:&istream outputStream:&ostream]; 
```

许多程序员犯的错误是通过自己选择端口然后打开流来发布网络

```
[nService qNetworkAdditions_getInputStream:&istream outputStream:&ostream]; 
```

流不会打开....

结论：首先获得一个端口，然后使用类似的东西来发布：

```
self.netService = [[NSNetService alloc] initWithDomain:@"local" type:@"_xxx._tcp." name:serviceName port:(int) self.port];
open streams with
CFStreamCreatePairWithSocket(kCFAllocatorDefault, nativeSocketHandle, &readStream, &writeStream);
open streams with (you open a connection here)
EchoConnection * connection = [[EchoConnection alloc] initWithInputStream:( NSInputStream *)readStream outputStream:( NSOutputStream *)writeStream];
        [self.connections addObject:connection]; 
```

然后浏览服务并添加它们

然后从您浏览的服务中打开所需服务的流

```
[nService qNetworkAdditions_getInputStream:&istream outputStream:&ostream];
(and open them with [istream open] and [ostream open]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:34:34.100

也许您需要先打开输出流？

```
[ostream open]; 
```

# sql-server-2008 - 如果 datetime2 值是最小值，如何检查 sproc？

> ID：12055919
> 
> 赞同：1
> 
> 时间：2012-08-21T13:27:22.073
> 
> 标签：sql-server-2008, c#-4.0

我有一个带有 datetime2 参数的 SQL Server 2008 存储过程。如果用户传入最小值，我不想运行存储过程的一部分。我的问题是，检查传入的值是否是 c# DateTime.MinValue 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:46:56.913

如果您`DateTime.MinValue`在 DateTime2 类型的数据库中插入示例值。结果将是 0001-01-01 00:00:00.0000000

## 验证部分

```
if @Param != '0001-01-01 00:00:00.0000000'
begin
  -- Your code
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:37:57.513

要控制存储过程中的流程，您应该使用[IF](http://msdn.microsoft.com/en-us/library/ms182717.aspx)。[datetime2](http://technet.microsoft.com/en-us/library/bb677335.aspx)的最小值与[C# datetime](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx)`'0001-01-01'`相同，因此...

```
if @DatetimeParam > '0001-01-01'
begin
  -- Param is not min value, do stuff here.
end 
```

# c# - 复选框的 OnCheckedChanged 事件的编译错误

> ID：12055921
> 
> 赞同：0
> 
> 时间：2012-08-21T13:27:28.360
> 
> 标签：c#, asp.net-ajax

我的 aspx 页面中有复选框，后面的代码中有 oncheckedchanged 事件处理程序。我的aspx页面如下

```
<div align="center">
    <table width="500px">
        <tr>
            <td>
                <fieldset id="fs1" runat="server">
                    <legend>Type </legend>
                    <table>
                        <tr>
                            <td>
                                <asp:CheckBox ID="CBNPatient" runat="server" Text="New Patient" OnCheckedChanged="CBNPatient_CheckedChanged" AutoPostBack="true" />
                            </td>
                            <td>
                                <asp:CheckBox ID="CBNPhPatient" runat="server" Text="New Patient By Phone" OnCheckedChanged="CBNPhPatient_CheckedChanged" AutoPostBack="true" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <fieldset id="fsAdd" runat="server" visible="false">
                                    <table> 
```

在后面的代码中，复选框事件处理程序如下：

```
 protected void CBNPatient_CheckedChanged(object sender,EventArgs e  )
        {
            if (CBNPatient.Checked == true)
            {

                HtmlGenericControl fieldset = (HtmlGenericControl)Master.FindControl("fsAdd");
                fieldset.Visible = true;
                PatAdd = true;               

            }
            else
            {
                HtmlGenericControl fieldset = (HtmlGenericControl)Master.FindControl("fsAdd");
                fieldset.Visible = false;
                PatAdd = false;
            }

        }

        protected void CBNPhPatient_CheckedChanged(object sender, EventArgs e)
        {
            if (CBNPhPatient.Checked == true)
            {

                HtmlGenericControl fieldset = (HtmlGenericControl)Master.FindControl("fsAdd");
                fieldset.Visible = true;
                PhPatAdd = true;
            }
            else
            {
                HtmlGenericControl fieldset = (HtmlGenericControl)Master.FindControl("fsAdd");
                fieldset.Visible = false;
                PhPatAdd = false;
            }
        } 
```

我收到如下编译错误：

'ASP.framepages_registration_raddock_aspx' 不包含'CBNPatient_CheckedChanged' 的定义，并且找不到接受'ASP.framepages_registration_raddock_aspx' 类型的第一个参数的扩展方法'CNPatient_CheckedChanged'（您是否缺少 using 指令或程序集引用？）复选框位于字段集中。这会导致任何问题吗？

请帮助我。谢谢， 苏米亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:34:25.627

看，**这还不是一个完整的答案**，但是您应该注意以下几点：

1.  如果条件语句 ( `if`) 中有布尔变量，则不必将它们与`true`or进行比较`false`。简单地测试它们，比如`if(CBNPatient.Checked)`
2.  看看你的代码，你在做同样的逻辑，只是*根据*复选框的选择来改变布尔值。*这两种方法都*可以简化为：

    ```
     HtmlGenericControl fieldset = (HtmlGenericControl)Master.FindControl("fsAdd");
        fieldset.Visible = CBNPatient.Checked;
        PatAdd = CBNPatient.Checked; 
    ```

# language-agnostic - 一起使用多种语言的过程名称

> ID：12055925
> 
> 赞同：2
> 
> 时间：2012-08-21T13:27:39.453
> 
> 标签：language-agnostic, programming-languages, naming-conventions, naming, multiple-languages

我想知道一起使用多种语言的过程的正式名称是什么。假设我正在用 C++ 编写一个程序，该程序调用 Java 函数（并使用 Java 库），有时还调用 Python 函数。然后它收集这些调用的结果并继续执行。

你会如何命名这个过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:08:02.767

根据您使用多少种不同的语言、使用不同语言的子问题有多小、这些语言对于手头的子问题的具体程度以及您自己设计的用于解决该特定子问题的语言中的多少，可能是称为*Language-Oriented Programming*、*Polyglot Programming*或只是*Programming*。

例如，仅使用 C++，您实际上会使用三种语言：C++ 本身、C++ 模板语言（基本上是一种混合功能/逻辑编程语言）和 C++ 宏语言。投入`make`并`sh`用于构建，JSON 用于配置、`roff`文档和 Tcl 用于测试，您正在查看 8 种语言。但是，我只是称其为普通*Programming*，并没有什么特别之处。这同样适用于结合 HTML、CSS、ECMAScript、JSON、SQL、Java、XML 的典型 Web 项目`sh`。

*面向语言的编程*处于光谱的另一端。在 LOP 中，您将问题分解为更小的子问题、子子问题等，然后使用最适合该特定子问题的语言解决每个子问题，可能是您专门为该子问题设计的语言。基本上，在 LOP 中，您使用*语言*的方式与在 OOP 中使用*对象*、在 PP中使用*过程*、在 FP中使用*函数等方式相同。*通常，这些语言是*特定于领域的*，通常不是图灵完备的。

*多语言编程*处于中间位置：您对不同的较大组件使用不同的语言，但与单个对象的抽象级别不同，并且您通常使用预先存在的图灵完备的通用语言，而不是设计他们自己。例如，trend.ly 使用“Smalltalk 用于思考，Java 用于蛮力计算，ECMAScript 用于可视化，Ruby 用于将这三者粘合在一起并`sh`用于部署”。对我来说，您的描述听起来最像*多语言编程*。

请注意，这些定义是非常主观的：例如，在 Lisp 中，设计和实现新语言是*如此*明显、自然和微不足道，以至于没有 Lisp 程序员会称他所做的事情为“面向语言的编程”。他们只是称之为“编程”。

我不会对它提出硬性规定，说“在 5 到 10 种语言之间是多语言，更多是面向语言的，更少只是编程”。这更像是一种心态：当你看到一个问题时，首先想到的是“我如何用这种语言解决这个问题”，“解决这个问题的最佳语言是什么”或“完美的语言是什么？解决这个问题的样子”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:30:31.837

它被称为多语言编程。

# c# - 以编程方式在 Dynamics CRM 2011 中创建文章

> ID：12055926
> 
> 赞同：1
> 
> 时间：2012-08-21T13:27:44.787
> 
> 标签：c#, plugins, dynamics-crm, dynamics-crm-2011

我有一个能够更新 CRM 中的案例的插件，但我现在希望它创建一个新的知识库文章，因为我不相信使用工作流可以自动执行此操作。该插件由解决案例时执行的工作流触发。

这是我到目前为止所拥有的，但它不起作用：

```
Entity article = new Entity("kbarticle");
article["title"] = articleTitle;
article["subject"] = articleSubject;

service.Create(article);

Guid articleGUID = service.Create(article);

ColumnSet attributes = new ColumnSet(new string[] { "description" });

article = service.Retrieve(article.LogicalName, articleGUID, attributes);

article["description"] = articleDescription;

service.Update(article); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:53:46.757

一些东西...

## 无效属性

```
article["subject"] = articleSubject; 
```

`subject`不是`kbarticle`实体上的有效属性。`subjectid` *是*，但需要是`Lookup`一个有效的主题记录。我无法从您的片段中判断它是否存在。

## 缺少属性

根据[SDK](http://msdn.microsoft.com/en-us/library/gg309345.aspx)，您还需要指定一个 KB 模板：

> 创建知识库文章时，必须将其与知识库模板和主题相关联...

[剪辑]

> 要将文章与模板关联，请使用 KbArticle。KbArticleTemplateId 属性。要通过指定主题将文章放入特定类别，请使用 KbArticle.SubjectId 属性。

## 冗余代码

此外，可能不是您的错误的来源，但您的代码尝试创建文章两次。您的第一行代码是多余的：

```
service.Create(article);

Guid articleGUID = service.Create(article); 
```

除此之外，我们确实需要知道您的代码引发的错误（尽管我怀疑这将是我的第一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:40:43.590

感谢您的回答，他们都帮助我朝着解决方案的正确方向前进。主要问题是我需要为 subjectid 和模板使用实体引用：

```
Entity kbarticle = new Entity("kbarticle");

kbarticle["title"] = title;
kbarticle["subjectid"] = new EntityReference(subject_LogicalName, subject_Guid);
kbarticle["kbarticletemplateid"] = new EntityReference(template_LogicalName, template_Guid);

service.Create(kbarticle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:50:18.323

您是否看过这篇[MSDN](http://msdn.microsoft.com/en-us/library/gg309345.aspx)文章，它不是代码示例，而是描述了创建文章的步骤。

编辑：

您需要向我们提供更多调试信息。任何一个;

*   [按照此处](http://support.microsoft.com/kb/907490)所述启用跟踪或使用这个方便的[工具](http://mscrmtools.blogspot.co.uk/2011/04/new-tool-crmdiagtool-2011.html)。重现问题并发布日志。
*   [从工作流本身发布错误，如此处](http://www.avanadeblog.com/.a/6a0120a757f751970b0133f53f5d36970b-800wi)所示。
*   附加调试器并找出发生了什么。

您可能会发现在 Visual Studio 中针对单元测试开发文章创建代码更容易，然后您可以稍后将其连接到工作流活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:24:21.647

它应该看起来像

```
 KbArticle a = new KbArticle();
        a.Title = articleTitle;
        a.SubjectId = new Xrm.Sdk.EntityReference(Subject.EntityLogicalName, subjectGuid);
        service.Create(a); 
```

# javascript - 字符计数不适用于动态创建的元素

> ID：12055933
> 
> 赞同：0
> 
> 时间：2012-08-21T13:28:02.630
> 
> 标签：javascript, jquery, html

我正在使用 charcount.js 来计算在 textarea 中输入的字符数。

```
 <textarea class="counter" rows="3"></textarea> 
```

在 jquery 我称之为

```
 $('.counter').charCount(); 
```

它对我有用......当我在javascript中动态创建textarea时它不起作用

```
 var txtar=document.createElement("textarea");
    txtar.setAttribute("maxlength","140");
    txtar.setAttribute("class","counter");
    ad.appendChild(txtar); 
```

textarea 正确添加到文档中，但 charcount 功能不起作用.....

我该如何解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:29:48.700

您是在将元素附加到 DOM`charCount()` *后调用吗？*你应该。

# php - 如果给定当天的随机时间戳，有一种简单的方法可以获取一天的 unix 时间范围？

> ID：12055934
> 
> 赞同：1
> 
> 时间：2012-08-21T13:28:07.687
> 
> 标签：php, time

如果给定当天的随机时间戳，有一种简单的方法可以获取一天的 unix 时间范围？我有一个像 1345547471 这样的日期，即“星期二，2012 年 8 月 21 日 11:11:11 GMT”

有一个 php 函数可以接收这样的时间戳并返回当天的 00:00 小时时间戳和 23:59 小时时间戳？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:30:14.600

当然，[DateTime](http://www.php.net/datetime)可以做到这一点：

```
$time = 1345547471;
$date = new DateTime;
// $date->setTimezone( new DateTimeZone( "America/New_York")); // Can set TZ here if needed
$date->setTimestamp( $time); 
```

现在，您可以将时间设置为您想要的任何时间：

```
$date->setTime( 0, 0, 0); // 0h 0m 0s 
```

并获取生成的 UNIX 时间戳：

```
$timestamp = $date->getTimestamp(); 
```

下一个用例也是如此：

```
$date->setTime( 23, 59, 0);
$timestamp = $date->getTimestamp(); 
```

重要的是要注意 DateTime 将正确处理夏令时和本地时间不连续的情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T13:30:39.480

您可以使用这样的`mod`PHP 函数（在除法后给出余数）来获取 Unix 时间戳的第一秒（即今天 0:00:00）

```
$var=time()-(time()%86400); 
```

然后使用这个 unix 时间戳，您可以添加 86399 以获得当天的最后一秒。

编辑：这不考虑日光节约。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:30:15.067

```
$ts = 1345547471;

$ts_00_00 = mktime(0,0,0, date("m", $ts), date("d",$ts), date("Y",$ts);
$ts_23_59 = mktime(23,59,59, date("m", $ts), date("d",$ts), date("Y",$ts); 
```

文档：

*   [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)
*   [http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:31:09.497

如果您使用的是 PHP >= 5.3.0 那么您可以使用这个...检查一下。

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-27T16:06:30.000

这类似于 Fluffeh 的回答，但考虑了夏令时。这基于服务器的时区。

```
//Get time range for today
$start = strtotime(date("Y-m-d")." 00:00:00");
$end = strtotime(date("Y-m-d")." 23:59:59");

//Show our date in a human-readable format for troubleshooting
echo date(DATE_RFC1036,$start)."<br>".date(DATE_RFC1036,$end); 
```

如果你想指定一个自定义时区而不是服务器时区，你可以像这样添加它：

```
//Get time range for today
$start = strtotime(date("Y-m-d")." 00:00:00 -0500");
$end = strtotime(date("Y-m-d")." 23:59:59 -0500");

//Show our date in a human-readable format for troubleshooting
echo date(DATE_RFC1036,$start)."<br>".date(DATE_RFC1036,$end); 
```

[链接到工作样本](http://rextester.com/RNNE95553)

# ios - iOS中的信息图标只能用于应用设置吗？

> ID：12055936
> 
> 赞同：0
> 
> 时间：2012-08-21T13:28:15.003
> 
> 标签：ios, icons, hig

在 iOS 人机界面指南的表 7-5 中，包含斜体的“i”图标。该表标记为“用于表行和其他 UI 元素的标准按钮”。

与表格中的图标相反，它指出：“翻转到视图的背面以显示配置选项或更多信息。请注意，信息按钮也可用作深色圆圈中的浅色“i”。”

这是否意味着此图标或类似图标只能用于配置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:34:17.843

我已经看到这个图标用于很多事情，例如指示有更多信息要查看，以及有关已批准的应用程序本身的信息，因此该图标不能用于配置选项之外的其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:36:00.543

苹果当然会接受你引用的指导方针的任何事情。如果你开始偏离呈现信息的功能太远，那么是的，Apple 会拒绝。

您对图标还有其他想法吗？

**更新：** 在您在下面描述的情况下，我认为信息图标是完美的。特别是考虑到您打算将图标与其主题（您的手稿）在视觉上紧密关联。

# objective-c - resizableImageWithCapInsets 或 stretchableImageWithLeftCapWidth:24 topCapHeight:15

> ID：12055940
> 
> 赞同：2
> 
> 时间：2012-08-21T13:28:24.593
> 
> 标签：objective-c, xcode, uiimage, deprecated

我知道可拉伸的......是旧的（并且已弃用）......并且可调整大小......是新的 - 但一个大问题在这里......

新方法无法正常工作 - 在我对 tableview 的测试中，我有很多滞后。

我不知道问题出在哪里，但“离开”的那一行（我都知道）：

```
home = [[UIImage imageNamed:@"homebubble"] resizableImageWithCapInsets:UIEdgeInsetsMake(24.0f, 15.0f, 24.0f, 15.0f)];
away = [[UIImage imageNamed:@"awaybubble"] resizableImageWithCapInsets:UIEdgeInsetsMake(24.0f, 15.0f, 24.0f, 15.0f)]; 
```

会出现问题 - 相信我，你不需要我的漏洞代码，我测试了每一行，如果我用 away 评论该行，一切正常，但如果同时调用两者，它就会滞后。

与旧版本相比，它的功能非常完美：

```
home = [[UIImage imageNamed:@"homebubble"] stretchableImageWithLeftCapWidth:24 topCapHeight:15];
away = [[UIImage imageNamed:@"awaybubble"] stretchableImageWithLeftCapWidth:24 topCapHeight:15]; 
```

怎么可能？有谁有他们的经验？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:33:42.763

现在我知道原因了。

“可调整大小的区域”必须只有 1px，这一点非常重要。在我的项目中，我有一个 43x32 像素的气泡 - resizabel 区域是 -5x2px（-5 因为 uiedgeinsets 是 24、15、24、15） - 所以它必须始终未签名，aaaand，它必须是 1px。经过更多的测试，这是解决方案。

谢谢回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:31:16.090

UIMakeEdgeInsetsMake 从最高值开始：

```
UIEdgeInsets UIEdgeInsetsMake (
   CGFloat top,
   CGFloat left,
   CGFloat bottom,
   CGFloat right
); 
```

这可能是新方法无法正常工作的原因。尝试：

```
home = [[UIImage imageNamed:@"homebubble"] resizableImageWithCapInsets:UIEdgeInsetsMake(15.0, 24.0, 15.0, 24.0)];
away = [[UIImage imageNamed:@"awaybubble"] resizableImageWithCapInsets:UIEdgeInsetsMake(15.0, 24.0, 15.0, 24.0)]; 
```

我不知道这是你思想滞后的原因。

# php - 允许用户查看上传文件的路径

> ID：12055942
> 
> 赞同：0
> 
> 时间：2012-08-21T13:28:30.870
> 
> 标签：php, html, file, url, hyperlink

我正在尝试添加一个允许用户查看上传文件的链接。

现在我有这个：

```
$path = "http://" . APACHE_ROOT . UPLOAD_PATH . $result[0]['username'] . "ref_" . $ref_info[$i]['ref_email'] ."_" . $ref_info[$i]['year']; 

$status = '<a href="' . $path . '"> Uploaded </a>'; 
```

（在哪里：

```
APACHE_ROOT = /var/www/faculty-recruiting-ref/
UPLOAD_PATH = html/upload/ 
```

)

但我收到一个错误，即 url 不存在（特别是“Google Chrome 找不到 var”）

我也尝试使用“file://”开始 url，但链接没有响应。

谢谢！

PS如果有人认为这个标题更好，请更改它！我想不出更好的了。

编辑：我应该添加手动输入网址确实链接到正确的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:31:45.020

`/var/www/faculty-recruiting-ref/`是你的服务器的本地路径，它不能从外部访问。

APACHE_ROOT 应该被替换为`www.yourdomain.com/faculty-recruiting-ref/`

# android - Android - 来自网站的视频播放器未在 WebView 中播放

> ID：12055943
> 
> 赞同：0
> 
> 时间：2012-08-21T13:28:30.853
> 
> 标签：android, webview, android-webview, android-websettings

嗨，我有一个网站，里面有一个视频播放器，我想在我的 android 应用程序中播放那个视频播放器。视频播放器在 androids 原生浏览器中播放效果很好，但是当我指示 WebView 与播放器一起访问同一个站点时，视频播放器不会显示，播放器周围的所有内容都会显示。如何让视频播放器在我的应用程序 webview 中播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:39:25.907

默认情况下，Webview 不允许使用 Javascript，这很可能是您的视频播放器在网站上使用的。您很可能需要告诉您的 Webview 使用 Javascript，以便它至少尝试播放视频（我说尝试是因为我自己从未这样做过，我通常使用播放器活动来播放视频）。

因此，通过引用您的活动 webview 对象，您可以这样做：

```
browser = (WebView) findViewById(R.id.webbrowser_wvViewer);    
browser.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:32:59.933

您确定您的视频编解码器与 Android webview 兼容吗？

根据浏览器的不同，所需的视频编解码器也不同。您还可以检查此链接以进行调试并查看确切的错误：

[http://www.smartjava.org/content/remote-chrome-debugging-android](http://www.smartjava.org/content/remote-chrome-debugging-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:56:53.280

Christian，您在哪个版本的 Android 操作系统上进行测试？

在 Android 版本的 Gingerbread 及更早版本中，基于 WebView 的应用必须实现 WebChromeClient 回调才能播放视频。这是 WebChromeClient 的文档：http: [//developer.android.com/reference/android/webkit/WebChromeClient.html](http://developer.android.com/reference/android/webkit/WebChromeClient.html)

具体来说，查看 onShowCustomView() 和 onHideCustomView 回调。播放视频时，WebView 将回调您提供的 WebChromeClient 实现的 onShowCustomView()。此回调中的第一个参数是视图 - 实际上是您要显示的视频。应用程序应覆盖此回调并将此视图添加到应用程序的窗口。总而言之，您的步骤如下： 1\. 在您的应用程序中创建一个 WebView，在您的应用程序中实现 WebChromeClient 并使用 WebView.setWebChromeClient(this) 注册它。2\. 现在，当用户选择播放视频时，将调用您应用的 onShowCustomView。3\. 在您的应用程序的 onShowCustomView() 实现中，您可以将当前显示的 WebView 替换为新视图。对 onHideCustomView 回调执行相反的操作。

# algorithm - 推荐者：记录用户操作并对其进行数据挖掘——很好的解决方案

> ID：12055953
> 
> 赞同：10
> 
> 时间：2012-08-21T13:29:11.133
> 
> 标签：algorithm, machine-learning, recommendation-engine

我计划记录所有用户操作，例如查看的页面、标签等。

**对这些数据进行数据挖掘**以获得**建议**的精益解决方案是什么？
像这样说：

*   从查看的 URL 中找出所有兴趣（假设我知道相关的标签）
*   找出有相似兴趣的人。例如，John & Jane 查看了与汽车等相关的 URL

**编辑：**
这确实是我在这个领域缺乏知识，这是开始的一个限制因素。

让我重述一下。
让我们说一个像**stackoverflow**或**Quora**这样的网站。我所有浏览不同问题的历史记录都会被记录下来，Quora 会进行数据挖掘工作，通过它查看并用相关问题填充我的信息流。我浏览了有关*育儿*的问题，下次登录时，我会看到有关*育儿*的问题。与亚马逊购物同上。我浏览了手表和调音台，两天后他们给我发了一封我感兴趣的相关购物物品的邮件。

我的问题是，他们如何有效地存储这些数据，然后对其进行数据挖掘以显示下一组相关数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:34:13.303

数据挖掘是一种需要大量存储空间和大量计算能力的方法。

我给你举个例子：

想象一下，您是沃尔玛等大型连锁超市的老板，您想了解如何将您的产品投放到您的市场，以便消费者在进入您的商店时花很多钱。

首先，你需要一个想法。您的想法是找到经常一起购买的不同产品组的产品。如果你有这样一对产品，你应该把这些产品放在尽可能远的地方。如果客户想同时购买这两种产品，他/她必须走遍您的整个商店，这样您就可以放置其他可能很适合其中一对但销售频率不高的产品。一些客户会看到这个产品并购买它，这个附加产品的收入就是你的数据挖掘过程的收入。

所以你需要大量的数据。您必须存储从所有商店中所有客户的所有购买中获得的所有数据。当一个人买了一瓶牛奶、一根香肠和一些面包时，你需要存储已经卖出了什么商品、数量和价格。如果您想注意到牛奶和香肠是一起购买的，那么每次购买都需要有自己的 ID。

所以你有大量的购买数据。你有很多不同的产品。假设您在商店中销售 10.000 种不同的产品。每个产品都可以相互配对。这使得 10,000 * 10,000 / 2 = 50,000,000（5000 万）对。对于每个可能的配对，您必须找出它是否包含在购买中。但也许您认为周六下午的客户与周三上午晚些时候的客户不同。因此，您也必须存储购买时间。也许你每周定义 20 个时间片。这使得 50M * 20 = 10 亿条记录。而且由于孟菲斯的人们可能会购买与比佛利山庄不同的东西，因此您也需要数据中的位置。假设您定义了 50 个区域，因此您的数据库中有 500 亿条记录。

然后您处理所有数据。如果客户确实在一次购买中购买了 20 件产品，那么您有 20 * 19 / 2 = 190 双。对于这对中的每一对，您都在数据库中增加了此次购买的时间和地点的计数器。但是你应该通过什么来增加计数器？只差1？还是按购买产品的数量？但是你有一对两个产品。你应该取两者的总和吗？还是最大值？最好使用多个计数器，以便能够以您能想到的所有方式对其进行计数。

你还得做点别的：顾客买的牛奶和面包比香槟和鱼子酱要多得多。因此，如果他们选择任意产品，那么一对牛奶面包的数量当然比一对香槟-鱼子酱高。因此，当您分析数据时，您也必须注意其中的一些影响。

然后，当您完成所有这些操作后，您就可以进行数据挖掘查询了。您选择实际计数与估计计数的比率最高的对。您从具有数十亿条记录的数据库表中选择它。这可能需要几个小时来处理。因此，在提交查询之前，请仔细考虑您的查询是否真的是您想知道的！

您可能会发现，在乡村环境中，人们在周六下午购买的啤酒和尿布比您预期的要多得多。所以你只需要把啤酒放在商店的一端，尿布放在另一端，这会让很多人走过你的整个商店，在那里他们看到（并希望购买）许多他们不会看到的其他东西（并且购买）如果啤酒和尿布放在一起。

请记住：您的数据挖掘过程的成本仅由客户的额外讨价还价支付！

**结论：**

*   您必须存储对、甚至更大的项目元组的三元组，这将需要大量空间。因为你不知道最后会找到什么，所以你必须存储所有可能的组合！
*   你必须计算那些元组
*   您必须将计数值与估计值进行比较

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:08:46.087

将每笔交易存储为标签向量（即包含这些标签的已访问页面）。然后对这些数据进行关联分析（我可以推荐 Weka），以使用可用的“关联”算法找到关联。当然，有效性取决于很多不同的事情。

我大学的一个人告诉我的一件事是，通常你可以简单地创建一个人购买的所有产品的向量，并将其与其他人的向量进行比较，并获得不错的推荐。那就是将用户表示为他们购买的产品或他们访问的页面，并进行例如 Jaccard 相似度计算。如果“人”是相似的，那么看看他们买的这个人没有的产品。（可能是同类人群中最常见的那些）

存储是一个完全不同的球赛，矢量数据有许多很好的索引，例如在不同 RDBM 中实现的 KD 树。

参加数据挖掘课程:) 或者只是阅读一本优秀的教科书（我读过 Pang-Ning tan 等人的《数据挖掘导论》，很好。）

而关于存储所有产品对等，当然没有这样做，而是使用基于支持和置信度的更有效的算法来修剪搜索空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T19:45:52.110

我应该说推荐是机器学习问题。如何存储数据取决于您选择的算法。

# rest - 使用 Apache Camel 使用 RESTful Web 服务

> ID：12055957
> 
> 赞同：1
> 
> 时间：2012-08-21T13:29:24.330
> 
> 标签：rest, oauth-2.0, apache-camel

我正在尝试使用骆驼来使用宁静的 Web 服务。

为此，我正在配置动态端点 url，因为 RESTful url 是在运行时创建的。每次我使用 CamelContext 类的以下方法检查特定端点 url 是否在我的骆驼上下文中注册为路由时。

端点 hasEndpoint(String uri);

在这种情况下，如果端点未注册，那么我使用自定义路由生成器将路由添加到我的骆驼上下文。

我为此使用骆驼 HTTP 组件。到目前为止，这对我来说效果很好。

但是，我认为从性能角度来看，这并不好，因为每次我必须检查路由是否已在骆驼上下文中注册，如果没有，则在进行 web 服务调用之前进行注册。

有人可以告诉我是否有更好的方法在骆驼中使用 RESTful Web 服务？

我还想知道我正在使用的 RESTful web 服务是否使用 OAuth 2.0 协议，我是否需要在我的代码中更改任何内容，因为我只是在使用它？

问候， 尼洛帕尔

* * *

感谢您的回复。

我正在检查该路线是否已经存在，以确保我最终不会将重复的路线添加到骆驼上下文中。

关于长寿路线和路线动态，你能解释一下吗？如何实现路由动态？

如果您能指出一些 CXF-RS 生产者示例，这也会很有帮助。我阅读了 CXFRS 的文档，但无法清楚地理解它。

谢谢尼洛帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:32:51.133

究竟为什么在拨打电话之前需要检查路由是否已注册？您也许应该设置一个更长寿的路线和路线动态以重新获得资源。

至于 Rest with camel，我认为 HTTP 组件做得很好，但也有更高级别的组件可供使用，更多的是为 REST 设计的。 [CXFRS](http://camel.apache.org/cxfrs.html)和[Restlet](http://camel.apache.org/restlet.html)，restlet 的生产者示例可以在 Apache Camel 源单元测试中找到，例如这个[RestletProducerGetTest.java](http://svn.apache.org/viewvc/camel/trunk/components/camel-restlet/src/test/java/org/apache/camel/component/restlet/RestletProducerGetTest.java?view=log)。

至于 oAuth 2.0，Camel 内置了一些 oAuth 支持，尤其是对 google。寻找[高斯组件](http://camel.apache.org/gauth.html)。甚至还有一个教程，但它可能与您的情况不一致，它仍然可能提供一些背景知识，以便您解决问题：[http ://camel.apache.org/tutorial-oauth.html](http://camel.apache.org/tutorial-oauth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T14:53:22.397

```
CamelContext context = new DefaultCamelContext(); 
```

我的目标

我正在尝试拦截传入的请求，并根据传入请求的 ip 我想调用 get offer 的动态端点

```
context.addRoutes(new RouteBuilder(){
     public void configure(){

     from("jetty:localhost:9000/offers")
     .process(new Processor(){
         public void process(Exchange exchange) throws Exception {

            //getting the request object
            HttpServletRequest req = exchange.getIn().getBody(HttpServletRequest.class);
            //Extracting information from the request
            String requestIP=req.getRemoteAddr();

            /**
             * After getting the ip address i do necessay processing
             * and then add a property to exchange object.
             * Destination ip address is the address to which i want to   
             * send my request
             */

           exchange.setProperty("operatorAddress",destinationIpAddress);

       }
      })
     .to("direct:getOffers")
     .end();
}
}); 
```

现在我将调用 getOffers 端点

所以首先我会注册它

```
context.addRoutes(new RouteBuilder(){
     public void configure(){
         from("direct:getOffers")
         .toD("jetty:${property.operatorAddress}/api/v2.0/offers? 
          bridgeEndpoint=true")
        .end();

    }
}); 
```

所以我们可以访问交换对象的 operatorAddress 属性

```
${property.operatorAddress} 
```

同样，当我们有动态路线时，我们需要调用

```
.toD()   and not .to() 
```

# c# - SerializationException：来自命名空间“”的结束元素“标题”预期

> ID：12055958
> 
> 赞同：1
> 
> 时间：2012-08-21T13:29:28.797
> 
> 标签：c#, json, deserialization

我正在尝试反序列化 json 字符串，但`End element 'caption' from namespace '' expected. Found element 'created_time' from namespace ''.`在调用时出现错误

```
InstagramObject test = (InstagramObject) instagramObject.ReadObject(instagramWebResponse.GetResponseStream()); 
```

Instagram 中的 json 返回了许多元素，但我只需要一些元素。我的 DataContract 将在下面发布。

基本上我需要`{data:[{caption: string, link: string, images: {...}}]}`

这是一个json的例子......

```
{
"data": [{
    "comments": {
        "data": [],
        "count": 0
    },
    "caption": {
        "created_time": "1296710352",
        "text": "Inside le truc #foodtruck",
        "from": {
            "username": "kevin",
            "full_name": "Kevin Systrom",
            "type": "user",
            "id": "3"
        },
        "id": "26621408"
    },
    "likes": {
        "count": 15,
        "data": [{
            "username": "mikeyk",
            "full_name": "Mike Krieger",
            "id": "4",
            "profile_picture": "..."
        }, {...subset of likers...}]
    },
    "link": "http://instagr.am/p/BWrVZ/",
    "user": {
        "username": "kevin",
        "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_3_75sq_1295574122.jpg",
        "id": "3"
    },
    "created_time": "1296710327",
    "images": {
        "low_resolution": {
            "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/6ea7baea55774c5e81e7e3e1f6e791a7_6.jpg",
            "width": 306,
            "height": 306
        },
        "thumbnail": {
            "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/6ea7baea55774c5e81e7e3e1f6e791a7_5.jpg",
            "width": 150,
            "height": 150
        },
        "standard_resolution": {
            "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/6ea7baea55774c5e81e7e3e1f6e791a7_7.jpg",
            "width": 612,
            "height": 612
        }
    },
    "type": "image",
    "filter": "Earlybird",
    "tags": ["foodtruck"],
    "id": "22721881",
    "location": {
        "latitude": 37.778720183610183,
        "longitude": -122.3962783813477,
        "id": "520640",
        "street_address": "",
        "name": "Le Truc"
    }
}]
} 
```

这是我的数据合同...

```
[DataContract]
public class InstagramObject {

    [DataMember(Name = "data")]
    public IEnumerable<InstagramData> instagramData { get; set; }

}

[DataContract]
public class InstagramData {

    [DataMember(Name = "images")]
    public List<InstagramImage> instagramImages { get; set; }

    [DataMember(Name = "caption")]
    public string caption { get; set; }

    [DataMember(Name = "link")]
    public string link { get; set; }

}

[DataContract]
public class InstagramImage {

    [DataMember(Name = "low_resolution")]
    public InstagramImageInfo lowResolutionImage { get; set; }

    [DataMember(Name = "thumbnail")]
    public InstagramImageInfo thumbnail { get; set; }

    [DataMember(Name = "standard_resolution")]
    public InstagramImageInfo standardResolution { get; set; }

}

[DataContract]
public class InstagramImageInfo {

    [DataMember(Name = "url")]
    public string url { get; set; }

    [DataMember(Name = "width")]
    public int width { get; set; }

    [DataMember(Name = "height")]
    public int height { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:42:23.050

在数据契约`caption`中被声明为字符串，但在 JSON`caption`中是具有各种字段的记录 -`caption`应声明为具有兼容结构的对象：

```
[DataContract]  
public class InstagramCaption {

   [DataMember(Name = "text")]
   public string Text {get; set;}

} 

. . . 

  [DataMember(Name = "caption")]     
  public InstagramCaption caption { get; set; }     

. . . 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T14:06:36.907

如果您想使用[Json.Net](http://json.codeplex.com/) + Linq ，则无需声明这些类

```
var obj = (JObject)JsonConvert.DeserializeObject(json);
var result = obj["data"]
    .Select(x => new {
        Caption = (string)x["caption"]["text"],
        Link = (string)x["link"],
        Images = x["images"].Children()
                            .Select(y=>(string)y.First()["url"]).ToArray()
    })
    .ToArray(); 
```

# magento - 可下载产品的运输 - Magento

> ID：12055960
> 
> 赞同：1
> 
> 时间：2012-08-21T13:29:35.570
> 
> 标签：magento

我有一个可下载的产品，我可以选择发送 medie。如果用户选择与我的可下载产品一起使用媒体，我希望在结帐时启用运输选项。我怎样才能实现这个想法？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:13:16.670

重建您的产品。

使用一个简单的产品和一个可下载的。

从两者中构建一个可配置的产品。

然后根据用户选择的选项，他会得到一个简单的产品（有运输）或没有的可下载产品。

# php - 使用 PHP 简单模板时

> ID：12055965
> 
> 赞同：-7
> 
> 时间：2012-08-21T13:29:52.497
> 
> 标签：php, template-engine

我使用了 overthemike 的 php 模板（[php-templates](https://github.com/overthemike/php-templates)），但它不适用于函数 while（在 mysql 上）...

显示正确的类别：

```
1件
    1.电源
    2.VGA
    3.RAM
    4.音频
2.笔记本电脑
    1.监控
    2.引脚
    3.键盘
```

运行后：

```
1件
    3.电源
    4.VGA
    5.RAM
    6.音频
    7.监控
    8.引脚
    9.键盘
2.笔记本电脑
    3.电源
    4.VGA
    5.RAM
    6.音频
    7.监控
    8.引脚
    9.键盘

```

示例：[http ://www.mediafire.com/?fln71mh5pwqjn7m](http://www.mediafire.com/?fln71mh5pwqjn7m)

为什么代码会填满所有可用空间？

你能帮我修复这段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:55:30.640

```
$data = array();

while($result = mysql_fetch_array($query))
{

    $sql = mysql_query("SELECT * FROM category WHERE sub = ".$result["id"]." ORDER BY id ASC");

    while($resub = mysql_fetch_array($sql))
    {
        $data[$result["title"]][] = array(
            "id"=>$resub["id"],
            "title"=>$resub["title"],
        );

    }

}
print_r($data); 
```

这应该有效。另外我认为您应该使用其他东西，因为这不是您想要实现的目标的好解决方案。

# jquery - 当我停止“调整”窗口大小时，我可以调用一个函数吗？

> ID：12055979
> 
> 赞同：0
> 
> 时间：2012-08-21T13:30:34.830
> 
> 标签：jquery

> **可能重复：**
> [在拖动调整大小手柄时多次触发 javascript 调整大小事件](https://stackoverflow.com/questions/667426/javascript-resize-event-firing-multiple-times-while-dragging-the-resize-handle)

试过：

```
$(window).bind('load resize', function (e) {
    console.log("resized");
}); 
```

但它为窗口的每一个小动作写了“调整大小”。我可以仅在完成（停止）时调用函数（在此示例中为 console.log()）来调整窗口大小吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:43:00.047

如果在接下来的 100 毫秒内没有新的调整大小事件，您可能只是定义调整大小完成。像这样：

```
var resizeEnd;
$(window).bind('resize', function(e) {
    clearTimeout(resizeEnd);
    resizeEnd = setTimeout(function() {
        console.log("resized");
    }, 100);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:33:56.000

Resize 会在调整窗口大小时连续触发，而在不调整大小时不会触发。因此，您无法识别连续调整大小何时停止，因此请坚持在触发调整大小事件时起作用的逻辑。

# xslt - XSLT：向根元素添加命名空间声明

> ID：12055981
> 
> 赞同：3
> 
> 时间：2012-08-21T13:30:42.063
> 
> 标签：xslt, xslt-1.0

我有这个 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="AcquisitionFolder">
            <Directory Id="dir2EE87E668A6861A2C8B6528214144568" Name="bin" />
            <Directory Id="dir99C9EB95694B90A2CD31AD7E2F4BF7F6" Name="Decoders" />
        </DirectoryRef>
    </Fragment>
</Wix> 
```

我想获得以下结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension>
    <Fragment>
        <DirectoryRef Id="AcquisitionFolder">
            <Directory Id="dir2EE87E668A6861A2C8B6528214144568" Name="bin" />
            <Directory Id="dir99C9EB95694B90A2CD31AD7E2F4BF7F6" Name="Decoders" />
        </DirectoryRef>
    </Fragment>
</Wix> 
```

这似乎是一个简单的问题，但我没有找到解决方案:-(我做了几次尝试，发现了几个类似的问题（例如：[XSLT: Add namespace to root element](https://stackoverflow.com/questions/2686650/xslt-add-namespace-to-root-element)），但他们没有帮助我。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:40:44.070

在许多情况下，您可以简单地将命名空间作为[Literal Result Element](https://www.w3.org/TR/1999/REC-xslt-19991116#result-element-stylesheet)的一部分嵌入到投影的 Xml 元素（包括根）中：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/*[local-name()='Wix']">
        <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
             xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
            <xsl:copy-of select="node()|@*"/>
        </Wix>
     </xsl:template>
</xsl:stylesheet> 
```

更正式/更一般地，输出 xml 中的任何命名空间都可以添加到[样式表自己的声明](https://www.w3.org/TR/1999/REC-xslt-19991116#stylesheet-element)中（全局或使用命名空间别名），例如

```
<xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:wix="http://www.foo.com/2001/v1"
    ...other namespaces here> 
```

...然后在输出中引用

```
<xsl:template match="/">
    <wix:Wix>
       <wix:Child>
          ... 
```

如果结果输出中残留不需要/未使用的命名空间（例如，源文档中需要，但输出文档中没有），您可以使用[`exclude-result-prefixes`](https://stackoverflow.com/a/857026)

# macos - 仅将多个目录中的 mp3 移动到单个文件夹

> ID：12055982
> 
> 赞同：0
> 
> 时间：2012-08-21T13:30:45.657
> 
> 标签：macos, bash, mp3, cp

[SO](https://stackoverflow.com/questions/3686860/move-all-files-of-same-type-in-multiple-directories-up-one-folder)的这个解决方案有效，但不幸的是我的一些mp3名称中有引号（'），导致以下错误：

```
xargs: unterminated quote 
```

是否可以调整以下命令以允许它复制所有 mp3，而不管文件名中的引号如何？

```
find . -name "*.mp3" | xargs -I {} cp -iv "{}" /my/dir 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:35:28.873

尝试添加`-print0`to`find`和`-0`to `xargs`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:39:53.787

```
find . -name "*.mp3" -exec cp -iv {} /my/dir \; 
```

# java - Java（字节）文字转换效率高吗？

> ID：12055983
> 
> 赞同：2
> 
> 时间：2012-08-21T13:30:46.890
> 
> 标签：java, casting, byte, literals

好的，从 Java 6 开始，没有 y 文字后缀。考虑这段代码：

```
byte b = some_byte();
switch (b) {
    case (byte) 0x80: ...
    case (byte) 0x81: ... 
```

和这个选择：

```
int b = some_byte() & 0xff;
switch (b) {
    case 0x80: ...
    case 0x81: ... 
```

你会用哪个？在第一种情况下，（字节）转换是在运行时还是编译时执行的？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:32:58.747

> 你会用哪个？

可能是后者，只是为了简单起见 - 但有评论来解释发生了什么。

> 在第一种情况下，（字节）转换是在运行时还是编译时执行的？

编译时。不要忘记 case 值无论如何都必须是编译时常量。

另一种选择是为这些东西创建常量： private static final byte FOO = (byte) 0x80; 私有静态最终字节BAR =（字节）0x81；

```
...

switch (someByte()) {
    case FOO:
    case BAR:
        ...
} 
```

除此之外，这使得价值观不那么“神奇”。

或者你甚至可以使用枚举......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:05:05.610

在第二种情况下，

```
some_byte() & 0xff; 
```

添加2条指令。其余的都是一样的。你可以检查它

```
javap -c Test 
```

其中 Test 是测试类的名称。

# xul - 更新 XULRunner 应用程序中的扩展

> ID：12055985
> 
> 赞同：2
> 
> 时间：2012-08-21T13:30:50.673
> 
> 标签：xul, xulrunner

XUL 应用程序中的扩展是否可以在应用程序启动时自动更新到较新版本？我试图弄清楚这一点。如果这是可能的，如果有人能指出关于这方面的好的文档，我将非常感激，因为我在 Internet 上找不到任何关于这个主题的好文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:14:28.873

XULRunner 内置了与 Firefox 相同的扩展更新机制——它会在应用程序运行时每天查找一次扩展更新。如果找到更新，它将立即更新无需重启的扩展，其他扩展将在下次应用程序启动时下载和更新。您必须确保为您的应用程序定义了以下首选项（从 Firefox 首选项复制）：

```
pref("extensions.update.autoUpdateDefault", true);
pref("extensions.update.enabled", true);
pref("extensions.update.interval", 86400);
pref("extensions.update.url", "...");
pref("extensions.update.background.url", "..."); 
```

棘手的部分是更新 URL。当然，您可以使用与 Firefox 相同的 URL：

> `https://versioncheck.addons.mozilla.org/update/VersionCheck.php?reqVersion=%REQ_VERSION%&id=%ITEM_ID%&version=%ITEM_VERSION%&maxAppVersion=%ITEM_MAXAPPVERSION%&status=%ITEM_STATUS%&appID=%APP_ID%&appVersion=%APP_VERSION%&appOS=%APP_OS%&appABI=%APP_ABI%&locale=%APP_LOCALE%&currentAppVersion=%CURRENT_APP_VERSION%&updateType=%UPDATE_TYPE%&compatMode=%COMPATIBILITY_MODE%`
> 
> `https://versioncheck-bg.addons.mozilla.org/update/VersionCheck.php?reqVersion=%REQ_VERSION%&id=%ITEM_ID%&version=%ITEM_VERSION%&maxAppVersion=%ITEM_MAXAPPVERSION%&status=%ITEM_STATUS%&appID=%APP_ID%&appVersion=%APP_VERSION%&appOS=%APP_OS%&appABI=%APP_ABI%&locale=%APP_LOCALE%&currentAppVersion=%CURRENT_APP_VERSION%&updateType=%UPDATE_TYPE%&compatMode=%COMPATIBILITY_MODE%`

这适用于[addons.mozilla.org](http://addons.mozilla.org/)上可用的扩展。但是，我怀疑您的应用程序的扩展将在那里不可用。那么你有两个选择。您可以在此处输入一些虚拟 URL，`data:text/xml,<nada/>`以使插件管理器保持安静，并确保所有扩展都具有[自定义`updateURL`](https://developer.mozilla.org/en-US/docs/Install_Manifests#updateURL). 或者你可以运行你自己的更新服务器，它会为所有已知的扩展生成[更新清单](https://developer.mozilla.org/en-US/docs/Extension_Versioning,_Update_and_Compatibility#Update_RDF_Format)（基本上是 addons.mozilla.org 正在做的事情）。

# android - 使用 Java 应用引擎的 GCM 服务器无法正常工作

> ID：12055989
> 
> 赞同：2
> 
> 时间：2012-08-21T13:31:06.627
> 
> 标签：android, google-app-engine, google-cloud-messaging

所以我遵循了 GCM Demo 应用教程。[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

我让它与码头服务器一起工作。但现在我想为 java 服务器做应用程序引擎，但它不工作。我确信我的客户端配置正常，因为它适用于码头服务器。

在 ApiKeyInitializer.java 中，我用我的访问密钥替换了“replace_this_text_by_your_Simple_API_Access_key”。

我将 appengine sdk 复制到一个简单的位置 D:\appenginesdk 比我在 cmd 中运行：

```
ant -Dsdk.dir=D:\appenginesdk runserver -Dserver.host=192.168.0.101 
```

其中 192.168.0.101 是我的本地 IP。

```
D:\gmcserverapp>ant -Dsdk.dir=D:\appenginesdk runserver -Dserver.host=192.168.0.101
Buildfile: D:\gmcserverapp\build.xml

init:

copyjars:

compile:
[javac] Compiling 1 source file to D:\gmcserverapp\WebContent\WEB-INF\classes
[javac]
[javac]           WARNING
[javac]
[javac] The -source switch defaults to 1.7 in JDK 1.7.
[javac] If you specify -target 1.5 you now must also specify -source 1.5.
[javac] Ant will implicitly add -source 1.5 for you.  Please change your build file.
[javac] warning: [options] bootstrap class path not set in conjunction with-source 1.5
[javac] 1 warning
datanucleusenhance:
[enhance] DataNucleus Enhancer (version 1.1.4) : Enhancement of classes
[enhance] DataNucleus Enhancer completed with success for 0 classes. Timings :input=156 ms, enhance=0 ms, total=156 ms. Consult the log for full details
[enhance] DataNucleus Enhancer completed and no classes were enhanced. Consult the log for full details

runserver:
 [java] aug 21, 2012 1:17:55 PM com.google.apphosting.utils.jetty.JettyLogger info
 [java] INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
 [java] aug 21, 2012 1:17:55 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
 [java] INFO: Successfully processed D:\gmcserverapp\WebContent\WEB-INF/appengine-web.xml
 [java] aug 21, 2012 1:17:55 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
 [java] INFO: Successfully processed D:\gmcserverapp\WebContent\WEB-INF/web.xml
 [java] aug 21, 2012 3:17:57 PM com.google.appengine.tools.development.DevAppServerImpl start
 [java] INFO: The server is running at http://192.168.0.101:8080/
 [java] aug 21, 2012 3:17:57 PM com.google.appengine.tools.development.DevAppServerImpl start
 [java] INFO: The admin console is running at http://192.168.0.101:8080/_ah/admin 
```

这就是我在模拟器中得到的

![带有谷歌 api 的模拟器 android 4.1](../Images/2dc6c293b221a15d5c16e8dc96974f1e.png)

在浏览器中，我没有注册任何设备。

我能做些什么？

我究竟做错了什么？

我做了很多教程，没有任何效果，我变得绝望。

编辑 2012-08-21 15:57：

感谢 Yahor10，解决了一些错误。我现在收到此错误：

```
 [java] aug 21, 2012 1:52:40 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
 [java] WARNING: No file found for: //register 
```

编辑 2012-08-21 16:18：

```
 //   String serverUrl = SERVER_URL + "/register";
 String serverUrl = SERVER_URL; 
```

我为 Android 应用更改了 serverUtilities.java 中的 server_url。这使模拟器说它已连接。但是当我刷新 192.168.0.101:8080 它仍然没有设备......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:55:14.630

在我发现我的 server_url 不正确之前，我在 GCM 演示中遇到了类似的困难。正如示例和教程所建议的那样，我已将其设置为 'http://<my_ip_address>:8080/gcm-demo'。更重要的是，每次应用程序尝试联系服务器时，ant 都会给我一个日志，所以我不认为 url 不正确。

但我只是从网址末尾取出了“/gcm-demo”，它就像一个魅力。

希望这是/是让您头疼的原因。

-Mrdresden

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:35:03.753

在您的服务器 build.xml 中设置 1.7 java 代码

```
<target name="compile" depends="init" description="Compile the Java classes.">
    <javac destdir="${classes}" debug="true" srcdir="${src}" target="1.7"
      includeantruntime="false">
      <classpath refid="compile.classpath"/>
    </javac>
  </target> 
```

设置 App engine sdk 的正确 dir 位置并在客户端写入正确的计算机 IP 地址

# ios - iOS 中的沙盒是什么？我可以在一个应用程序之间传输数据到另一个应用程序吗？

> ID：12055990
> 
> 赞同：15
> 
> 时间：2012-08-21T13:31:06.937
> 
> 标签：ios, iphone

有什么类似于沙盒 iPhone 应用程序，使用沙盒有什么好处，它们是否允许我在一个应用程序和另一个应用程序之间共享数据？

我在搜索时发现了这个链接，但由于我是 iOS 开发的新手，所以我无法理解。

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/56207-what-is-sandbox-in-iphone.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/56207-what-is-sandbox-in-iphone.html)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T13:36:08.603

来自[iOS 环境](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)

> 出于安全原因，iOS 在安装时将每个应用程序（包括其首选项和数据）放置在沙箱中。沙盒是一组细粒度的控件，用于限制应用程序对文件、首选项、网络资源、硬件等的访问。作为沙盒过程的一部分，系统将每个应用程序安装在其自己的沙盒目录中，该目录充当应用程序及其数据的主目录。

将数据从一个应用程序传输到另一个应用程序的一种解决方案是通过[URL 方案](http://wiki.akosma.com/IPhone_URL_Schemes)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-01T16:05:22.090

移动设备应用程序开发人员使用 iOS 的沙盒功能来确保用户数据的安全性，并确保应用程序不会与安装在同一设备上的其他应用程序共享数据。

*   沙盒为每个应用程序形成并维护一个私有的数据和信息环境。

*   沙盒可以最大限度地减少潜在黑客可能造成的损害，但它无法阻止攻击的发生。

*   尽管 Apple 已在 iOS 中构建了强大的沙盒功能，但开发人员需要确保他们的应用程序是安全编写的。

*   当应用程序安装在移动设备上时，系统会为其创建一个唯一目录。

*   沙盒只能防止被劫持的应用程序影响其他应用程序以及系统的其他部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:33:30.400

iPhone 应用程序都是沙盒的，这意味着应用程序之间没有文件共享。

有一些方法可以在应用程序之间传输数据，但它们非常有限。查看 URL 方案。

[http://wiki.akosma.com/IPhone_URL_Schemes](http://wiki.akosma.com/IPhone_URL_Schemes)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T22:07:16.533

默认情况下，这些应用程序位于沙盒中。您无需担心手动将其放入沙箱中。

# javascript - 在鼠标当前位置触发 mousemove

> ID：12055992
> 
> 赞同：4
> 
> 时间：2012-08-21T13:31:16.983
> 
> 标签：javascript

假设我们有一个绑定到它的处理程序`<div>`。`mousemove`如果鼠标指针进入并围绕 this 移动`div`，则触发事件。

但是，我正在处理一个丰富的 Web 应用程序，其中`<div>`s 在屏幕上移动，出现和消失......因此可能会出现 a`<div>`出现在鼠标指针下方。在这种情况下，`mousemove`不会触发。但是，我需要它。（请注意，替换`mousemove`为`mouseover`不会更改此行为。）

具体来说，`<div>`必须突出显示，我认为这是一个 UI 缺陷，要求用户稍微移动鼠标以触发突出显示。

`mousemove`是否可以以编程方式触发事件？我不是说

```
document.getElementById('mydiv').onmousemove(); 
```

因为是由我没有`onmousemove`的对象参数化的。`event`

是否可以使浏览器的行为就像`onmousemove`在当前鼠标的位置上触发一样（尽管实际上鼠标没有移动）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:34:47.390

您可以修改您`mousemove`的状态变量以使用当前鼠标坐标保留状态变量，并使用该信息执行您在鼠​​标移动和移动 div 时调用的碰撞检测。

[一个可能看起来像什么的小例子](http://jsfiddle.net/AKkst/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:58:13.617

你实际上可以创建一个`mousemove`事件对象来传递，使用这样的东西：

```
window.onload = function () {
    document.getElementById("test").onmousemove = function(e) { console.log(e); };
    document.getElementById("test").onclick = function(e) { 
        var e = document.createEvent('MouseEvents'); 
        e.initMouseEvent('mousemove',true,true,document.defaultView,<detail>,<screenX>,<screenY>,<mouseX>,<mouseY>,false,false,false,false,<button>,null);
        this.onmousemove(e); 
    };
}; 
```

当然，这里我是在单击时触发它，但是您可以在任何您想要的事件上执行它，例如当您的 div 变得可见时，检查鼠标是否在其中。您只需要确保您的参数正确，并且您需要自己跟踪鼠标位置。此外，我认为 IE 也存在一些差异。这是我的来源：[http](http://chamnapchhorn.blogspot.com/2008/06/artificial-mouse-events-in-javascript.html) ://chamnapchhorn.blogspot.com/2008/06/artificial-mouse-events-in-javascript.html 。他添加了一些额外的代码来解释它。

这是一个可以玩的小提琴。[http://jsfiddle.net/grimmertop90/LxT7V/1/](http://jsfiddle.net/grimertop90/LxT7V/1/)

# blackberry - 减少 BlackBerry 应用程序生成的类文件数量

> ID：12055995
> 
> 赞同：2
> 
> 时间：2012-08-21T13:31:22.650
> 
> 标签：blackberry, java-me

我为 BlackBerry 开发了一个订单处理应用程序。当我查看 bin 文件夹时，我看到了 100 多个`.class`文件。

我创建了一个用于添加新客户端的主屏幕类。屏幕有 7 个 LabelField 对象和 7 个对应的 TextField 对象。此屏幕还创建一个 VerticalFieldManager 并将所有这些字段添加到其中，然后将 VerticalFieldManager 添加到屏幕。

对于这个屏幕，我`.class`在 bin 文件夹中有 14 个文件。似乎程序中的每个字段都有一个类文件。例如：

```
NewClient.class
NewClient$1.class
...
NewClient$14.class 
```

如何设计 UI 以减少编译类的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:45:00.333

为 BlackBerry 构建 Java-ME 应用程序是一个两步过程。首先将 java 源代码编译为类文件，然后将这些类文件再次编译为 .cod 文件，该文件可以部署到模拟器或设备上。

'rapc' 是 RIM 编译器，它采用 java 程序并将它们转换为 cod 或 ax 文件以进行部署。'rapc' 可以采用 java 源代码或已编译的 java 类。无论哪种方式，它都可以产生适合设备的输出。

从 Java 源文件开始时，您可以将它们显式编译为类文件并将这些类文件交给，`rapc`或者您可以将 Java 源代码传递给 rapc，它将直接编译源代码。 `rapc`当出现 java 源代码时，只是遵从 JDK javac 编译器。这意味着标准的 java JDK 编译器始终用作编译 BlackBerry 应用程序的第一步，我们可以查看标准的 java 行为以了解正在发生的事情。

在 Java 中，每个实例化的类都只有一个`.class`文件。对于具有声明名称的普通类，如下所示：

```
public class Foo extends Bar {
} 
```

该`.class`文件被分配了一个与声明的类名匹配的名称。但是，Java 也允许匿名类。它们采用 a`new Foo()`后跟花括号的形式，将其转换为匿名类。这带来了一个问题，因为这个匿名类必须在 VM 级别分配一个名称，尽管在 Java 源代码级别没有。解决方法是使用在 Java 源代码中无效但在 VM 中有效的字符，即`$`. 匿名类根据封闭的 Java 类分配一个名称，然后是`$`，然后是一个基于匿名类数量的整数索引。在您的情况下，即`NewClient`后跟 14 个不同的整数。

要查看您描述的行为，您的字段实际上必须都是您提到的那些类的匿名实现。要减少类的数量，请尝试重用显式类，而不是为每个实例编写自定义行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:14:54.427

右键单击 myComputer 图标，在环境变量路径上设置您的 jdk bin 文件夹路径

然后重启电脑

其他方法是不要在您的代码上使用覆盖方法，例如

```
btmSave.setChangeListner(new FieldChangeListner()
{
   private void fieldChange()
   {
    }

}
); 
```

避免这种类型的编写代码它会在项目 bin 文件夹中创建您的类文件

# multithreading - CPU 热插拔和严格的 1:1 线程

> ID：12055996
> 
> 赞同：1
> 
> 时间：2012-08-21T13:31:23.427
> 
> 标签：multithreading, affinity, hotplugging

我希望在具有严格关联规则的应用程序中添加对 CPU 热插拔的支持。每个物理核心都固定有一个线程，但我用于将线程固定到 CPU 的逻辑相当幼稚，如果 0..N 之间的 CPU 离线，则会失败。

我选择了一种方法，其中我有一个 size 数组，`MAX_CPU`系统上的每个 CPU 通过其标识符映射到一个插槽。例如，CPU0 ->`threads[0]`和 CPU1 ->`threads[1]`等等。这个想法是反映系统的设置。

```
for (i = 0; i < N; ++i)
    set_affinity(threads[i], i); 
```

但是，如果在任何地方遇到离线 CPU，它就会失败。

更糟糕的是，当 CPU 在运行时脱机时，固定线程的关联掩码会在没有通知的情况下重置。

最终，我希望支持复杂的设置，例如：

```
CPU0     CPU1      CPU2     CPU3
ONLINE   OFFLINE   ONLINE   OFFLINE 
```

如何将在线和离线 CPU:s 的意识整合到我的应用程序中？

我正在避免`/proc`并且`/sys`因为我有兴趣移植到其他平台，特别是各种 BSD:s。我现在使用 x86_64，所以该`cpuid`指令可能有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:54:07.040

事实证明`sched_getaffinity(2)`它很棒，更适合这种情况。`cpu_set_t`它所填写的不是一个通用的掩码，`0xffffffff...`它意味着任何地方的调度，而是每个*在线*和*允许*的CPU 的详细且最新的掩码。使用`CPU_*`宏，可以提取有多少 CPU:s 在线以及哪些。

```
cpu_set_t set;
int i, n;

if (sched_getaffinity(0, sizeof(cpu_set_t), &set))
    return;

n = CPU_COUNT(&set);

/* pin a thread to each online and permitted cpu */
for (i = 0; n; ++i)
    if (CPU_ISSET(i, &set)) {
        /* spawn a thread and pin it to cpu identified by 'i' ... */
        --n;
    } 
```

当通知热插拔事件时，`sched_getaffinity(2)`来自非固定线程的调用将为我们提供更新的掩码。

另一个好处是对实用程序的认识，例如`taskset(1)`.

FreeBSD 有一个`cpuset_getaffinity(2)`可能以类似方式运行的系统调用。我现在无权试用。

# java - Java：调用本机方法给出“线程“主”java.lang.UnsatisfiedLinkError中的异常”

> ID：12055997
> 
> 赞同：1
> 
> 时间：2012-08-21T13:31:24.050
> 
> 标签：java, c++, c, java-native-interface

我正在尝试从 C++ 调用 Java 中的简单本机方法，为此我执行以下操作：

1.  创建一个简单的类，如下所示：

    ```
    public class HelloNative{
       public native void printString(String str);
       static{
            System.out.println("Current Directory is: " + System.getProperty("user.dir"));
            System.load(System.getProperty("user.dir") + "/libhellonative.so");
        }
        public static void main(String[] args){
            System.out.println("Calling Native Libraray (libhellonative.so) method printString");
            new HelloNative().printString("Message from Java to C");
         }
    } 
    ```

2.  为本地方法创建 .h 文件，使用`javah -jni`该文件创建以下声明：

    `JNIEXPORT void JNICALL Java_HelloNative_printString(JNIEnv *, jobject, jstring);`

3.  将文件中的本机函数实现`.cpp`为：

    ```
    JNIEXPORT void JNICALL Java_HelloNative_printString(JNIEnv* jni_env, jobject java_obj, jstring msg){
        printf("inside native method\n");
        jboolean iscopy;
        const char *message = (jni_env)->GetStringUTFChars( msg, &iscopy);
        printf("%s", message);
    } 
    ```

4.  最后`.so`使用以下命令创建文件：

    `g++ HelloNative.cpp -o libhellonative.so -shared -Wl,-soname,libhellonative.so -static -lc -I /usr/lib/jvm/java-6-sun-1.6.0.26/include -I /usr/lib/jvm/java-6-sun-1.6.0.26/include/linux`

但是当我编译并运行 .java 文件时，它给了我运行时异常：

```
Current Directory is: /home/gmuhammad/Projects/test
Calling Native Libraray (libhellonative.so) method printString
Exception in thread "main" java.lang.UnsatisfiedLinkError: HelloNative.printString(Ljava/lang/String;)V
    at HelloNative.printString(Native Method)
    at HelloNative.main(HelloNative.java:16) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:14:42.630

好的，我得到了这个工作。它与加载库无关，而是实际从该库调用方法。

我通过从您的问题中复制/粘贴创建`.java`,`.h`和文件并运行它们（我必须在文件中添加） - 并得到与您完全相同的错误。`.cpp``#include <jni.h>``.cpp`

然后我编辑了`.cpp`文件以包含生成的`.h`文件。此外，正如*maba*在他的回答中指出的那样，您需要调用`(jni_env)->ReleaseStringUTFChars(msg, message);`以释放该对象。我的完整`.cpp`文件现在看起来像这样：

```
#include "HelloNative.h"

JNIEXPORT void JNICALL Java_HelloNative_printString(JNIEnv* jni_env, jobject java_obj, jstring msg){
    printf("inside native method\n");
    jboolean iscopy;
    const char *message = (jni_env)->GetStringUTFChars( msg, &iscopy);
    printf("%s", message);
    (jni_env)->ReleaseStringUTFChars(msg, message);
} 
```

我重新编译了库，运行了 java 代码——瞧！一切正常。这样，无论您使用哪种方式加载库，它都可以使用`load`或`loadLibrary`。

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:48:22.007

我建议以稍微不同的方式加载库。

1.  将您`libmynative.so`放入您喜欢的任何目录。

2.  将该目录添加到`LD_LIBRARY_PATH`变量中。

3.  在您的 java 代码中，将`System.load`调用更改为`System.loadLibrary("mynative")`（注意缺少完整路径、前缀*lib*和扩展名*.so*）

4.  运行你的java代码。

在这里查看更多详细信息：http: [//java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:38:32.587

使用它是完全可以的，`System.load()`但您必须确保您的共享库确实在您所说的位置。

```
Current Directory is: /home/gmuhammad/Projects/test 
```

您的代码正在尝试访问该目录中的共享库。你确定`libhellonative.so`那里有吗？

然后你也可以使用`System.mapLibraryName("hellonative")`获取当前平台的共享库的名称。这使得它更加独立于平台。该电话将`libhellonative.so`在 Linux 和`hellonative.dll`Windows 上为您提供。

此外，您必须调用`(jni_env)->GetReleaseUTFChars(msg, message);`释放对象。

# java - JAVA中Streamin API的最佳搜索算法

> ID：12055998
> 
> 赞同：2
> 
> 时间：2012-08-21T13:31:32.413
> 
> 标签：java, search

我正在使用 twitter 流媒体搜索 20,000 个关键字，例如

```
https://stream.twitter.com/1/statuses/filter.json?delimited=length&track=api,software,hardwate,etc 
```

现在我在这里使用像 for 循环这样的顺序搜索，但它需要很长时间才能在一个 twit 中搜索 20,000 个关键字。

java中是否有任何最佳搜索方法可用于搜索来自高流量http/web的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:43:12.930

如果您的数据不必实时处理，您可以使用**[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)**(IR) 技术。

拥有一个后端服务器，可以为您“一夜之间”索引所有数据¹。它将创建一个[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)，并会监听您的应用程序。
**然后，您的应用程序将查询后端服务器**（而不是流服务器），并在标准 IR 技术中“询问”所需的关键字作为查询。

您可以使用[Apache Lucene](http://lucene.apache.org/core/)来帮助您。Lucene 是一个成熟的开源信息检索库，因此它可以帮助您进行索引和查询。

希望有帮助

* * *

(1) 这里的“过夜”是指以下之一：

1.  如果有一段时间应用程序处于非活动状态 - 可以这样做
2.  有一些库支持同时查询和构建索引。我不记得lucene是否是其中之一。
3.  您可以使用 2 台服务器，并且在每个时间点 - 一台将构建索引，另一台可用于查询。